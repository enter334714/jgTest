var Laya=window.Laya=function(d$l,d$a){var d$m={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(d$a,d$b){return 1==arguments.length?d$m.__presubstr.call(this,d$a):d$m.__presubstr.call(this,d$a,0<d$b?d$b:this.length+d$b);},__init:function(d$a){d$a.forEach(function(d$a){d$a.__init$&&d$a.__init$();});},__isClass:function(d$a){return d$a&&(d$a.__isclass||d$a==Object||d$a==String||d$a==Array);},__newvec:function(d$a,d$b){var d$c=[];d$c.length=d$a;for(var d$d=0;d$d<d$a;d$d++)d$c[d$d]=d$b;return d$c;},__extend:function(d$a,d$b){for(var d$c in d$b)if(d$b.hasOwnProperty(d$c)){var d$d=Object.getOwnPropertyDescriptor(d$b,d$c),d$e=d$d.get,d$f=d$d.set;d$e||d$f?d$e&&d$f?Object.defineProperty(d$a,d$c,d$d):(d$e&&Object.defineProperty(d$a,d$c,d$e),d$f&&Object.defineProperty(d$a,d$c,d$f)):d$a[d$c]=d$b[d$c];}function d$i(){d$m.un(this,"constructor",d$a);}d$i.prototype=d$b.prototype,d$a.prototype=new d$i(),d$m.un(d$a.prototype,"__imps",d$m.__copy({},d$b.prototype.__imps));},__copy:function(d$a,d$b){if(!d$b)return null;for(var d$c in d$a=d$a||{},d$b)d$a[d$c]=d$b[d$c];return d$a;},__package:function(d$a,d$b){if(!d$m.__packages[d$a]){d$m.__packages[d$a]=!0;var d$c=d$l,d$d=d$a.split(".");if(1<d$d.length)for(var d$e=0,d$f=d$d.length-1;d$e<d$f;d$e++){var d$i=d$c[d$d[d$e]];d$c=d$i||(d$c[d$d[d$e]]={});}d$c[d$d[d$d.length-1]]||(d$c[d$d[d$d.length-1]]=d$b||{});}},__hasOwnProperty:function(d$a,d$b){return d$b=d$b||this,Object.hasOwnProperty.call(d$b,d$a)||function d$a(d$b,d$c){if(Object.hasOwnProperty.call(d$c.prototype,d$b))return!0;var d$d=d$c.prototype.__super;return null==d$d?null:d$a(d$b,d$d);}(d$a,d$b.__class);},__typeof:function(d$a,d$b){if(!d$a||!d$b)return!1;if(d$b===String)return"string"==typeof d$a;if(d$b===Number)return"number"==typeof d$a;if(d$b.__interface__)d$b=d$b.__interface__;else if("string"!=typeof d$b)return d$a instanceof d$b;return d$a.__imps&&d$a.__imps[d$b]||d$a.__class==d$b;},__as:function(d$a,d$b){return this.__typeof(d$a,d$b)?d$a:null;},__int:function(d$a){return d$a?parseInt(d$a):0;},interface:function(d$a,d$b){d$m.__package(d$a,{});var d$c=d$m.__internals,d$d=d$c[d$a]=d$c[d$a]||{self:d$a};if(d$b){var d$e=d$b.split(",");d$d.extend=[];for(var d$f=0;d$f<d$e.length;d$f++){var d$i=d$e[d$f];d$c[d$i]=d$c[d$i]||{self:d$i},d$d.extend.push(d$c[d$i]);}}var d$j=d$l,d$k=d$a.split(".");for(d$f=0;d$f<d$k.length-1;d$f++)d$j=d$j[d$k[d$f]];d$j[d$k[d$k.length-1]]={__interface__:d$a};},class:function(d$a,d$b,d$c,d$d){if(d$c&&d$m.__extend(d$a,d$c),d$b)if(d$m.__package(d$b,d$a),d$m.__classmap[d$b]=d$a,0<d$b.indexOf(".")){if(0==d$b.indexOf("laya.")){var d$e=d$b.split(".");d$d=d$d||d$e[d$e.length-1],d$m[d$d]&&console.log("Warning!,this class["+d$d+"] already exist:",d$m[d$d]),d$m[d$d]=d$a;}}else"Main"==d$b?d$l.Main=d$a:"MainWX"==d$b?d$l.MainWX=d$a:(d$m[d$b]&&console.log("Error!,this class["+d$b+"] already exist:",d$m[d$b]),d$m[d$b]=d$a);var d$f=d$m.un,d$i=d$a.prototype;d$f(d$i,"hasOwnProperty",d$m.__hasOwnProperty),d$f(d$i,"__class",d$a),d$f(d$i,"__super",d$c),d$f(d$i,"__className",d$b),d$f(d$a,"__super",d$c),d$f(d$a,"__className",d$b),d$f(d$a,"__isclass",!0),d$f(d$a,"super",function(d$a){this.__super.call(d$a);});},imps:function(d$a,d$b){if(!d$b)return null;var d$e=d$a.__imps||d$m.un(d$a,"__imps",{});function d$f(d$a){var d$b,d$c;if((d$b=d$m.__internals[d$a])&&(d$e[d$a]=!0,d$c=d$b.extend))for(var d$d=0;d$d<d$c.length;d$d++)d$f(d$c[d$d].self);}for(var d$c in d$b)d$f(d$c);},superSet:function(d$a,d$b,d$c,d$d){var d$e=d$a.prototype["_$set_"+d$c];d$e&&d$e.call(d$b,d$d);},superGet:function(d$a,d$b,d$c){var d$d=d$a.prototype["_$get_"+d$c];return d$d?d$d.call(d$b):null;},getset:function(d$a,d$b,d$c,d$d,d$e){d$a?(d$d&&(d$b["_$GET_"+d$c]=d$d),d$e&&(d$b["_$SET_"+d$c]=d$e)):(d$d&&d$m.un(d$b,"_$get_"+d$c,d$d),d$e&&d$m.un(d$b,"_$set_"+d$c,d$e)),d$d&&d$e?Object.defineProperty(d$b,d$c,{get:d$d,set:d$e,enumerable:!1,configurable:!0}):(d$d&&Object.defineProperty(d$b,d$c,{get:d$d,enumerable:!1,configurable:!0}),d$e&&Object.defineProperty(d$b,d$c,{set:d$e,enumerable:!1,configurable:!0}));},static:function(d$c,d$d){for(var d$e=0,d$a=d$d.length;d$e<d$a;d$e+=2)if("length"==d$d[d$e])d$c.length=d$d[d$e+1].call(d$c);else{function d$b(){var d$b=d$d[d$e],d$a=d$d[d$e+1];Object.defineProperty(d$c,d$b,{get:function(){return delete this[d$b],this[d$b]=d$a.call(this);},set:function(d$a){delete this[d$b],this[d$b]=d$a;},enumerable:!0,configurable:!0});}d$b();}},un:function(d$a,d$b,d$c){return d$c||(d$c=d$a[d$b]),d$m.__propun.value=d$c,Object.defineProperty(d$a,d$b,d$m.__propun),d$c;},uns:function(d$b,d$a){d$a.forEach(function(d$a){d$m.un(d$b,d$a);});}};return d$l.console=d$l.console||{log:function(){}},d$l.trace=d$l.console.log,Error.prototype.throwError=function(){throw arguments;},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),d$m;}(window,document);!function(d$a,d$b,d$c){d$c.un,d$c.uns,d$c.static,d$c.class,d$c.getset,d$c.__newvec;}(window,document,Laya),function(d$i,d$b,d$z){d$z.un,d$z.uns;var d$k=d$z.static,d$m=d$z.class,d$q=d$z.getset;d$z.__newvec;d$z.interface("laya.runtime.IMarket"),d$z.interface("laya.filters.IFilter"),d$z.interface("laya.display.ILayout"),d$z.interface("laya.resource.IDispose"),d$z.interface("laya.runtime.IPlatform"),d$z.interface("laya.resource.IDestroy"),d$z.interface("laya.runtime.IConchNode"),d$z.interface("laya.filters.IFilterAction"),d$z.interface("laya.runtime.ICPlatformClass"),d$z.interface("laya.resource.ICreateResource"),d$z.interface("laya.runtime.IConchRenderObject"),d$z.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var d$F=function(){function d$f(){}return d$m(d$f,"laya.utils.RunDriver"),d$f.FILTER_ACTIONS=[],d$f.pixelRatio=-1,d$f._charSizeTestDiv=null,d$f.now=function(){return Date.now();},d$f.getWindow=function(){return d$i;},d$f.getPixelRatio=function(){if(d$f.pixelRatio<0){var d$a=d$O.context,d$b=d$a.backingStorePixelRatio||d$a.webkitBackingStorePixelRatio||d$a.mozBackingStorePixelRatio||d$a.msBackingStorePixelRatio||d$a.oBackingStorePixelRatio||d$a.backingStorePixelRatio||1;(d$f.pixelRatio=(d$O.window.devicePixelRatio||1)/d$b)<1&&(d$f.pixelRatio=1);}return d$f.pixelRatio;},d$f.getIncludeStr=function(d$a){return null;},d$f.createShaderCondition=function(d$a){var d$b="(function() {return "+d$a+";})";return d$z._runScript(d$b);},d$f.fontMap=[],d$f.measureText=function(d$a,d$b){var d$c=d$f.hanzi.test(d$a);if(d$c&&d$f.fontMap[d$b])return d$f.fontMap[d$b];var d$d=d$O.context;d$d.font=d$b;var d$e=d$d.measureText(d$a);return d$e||(d$e={width:16,height:16}),d$c&&(d$f.fontMap[d$b]=d$e),d$e;},d$f.getWebGLContext=function(d$a){},d$f.beginFlush=function(){},d$f.endFinish=function(){},d$f.addToAtlas=null,d$f.flashFlushImage=function(d$a){},d$f.drawToCanvas=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=d$va.create("2D"),d$j=new d$K(d$c,d$d,d$i);return d$L.renders[d$b]._fun(d$a,d$j,d$e,d$f),d$i;},d$f.createParticleTemplate2D=null,d$f.createGLTextur=null,d$f.createWebGLContext2D=null,d$f.changeWebGLSize=function(d$a,d$b){},d$f.createRenderSprite=function(d$a,d$b){return new d$L(d$a,d$b);},d$f.createFilterAction=function(d$a){return new d$v();},d$f.createGraphics=function(){return new d$o();},d$f.clear=function(d$a){d$J._context.ctx.clear();},d$f.cancelLoadByUrl=function(d$a){},d$f.clearAtlas=function(d$a){},d$f.isAtlas=function(d$a){return!1;},d$f.addTextureToAtlas=function(d$a){},d$f.getTexturePixels=function(d$a,d$b,d$c,d$d,d$e){return null;},d$f.skinAniSprite=function(){return null;},d$f.update3DLoop=function(){},d$k(d$f,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$");}]),d$f;}(),d$d=(d$q(1,d$z,"alertGlobalError",null,function(d$a){var d$f=0;d$O.window.onerror=d$a?function(d$a,d$b,d$c,d$d,d$e){d$f++<5&&d$e&&alert(d$e.stack||d$e);}:null;}),d$z.init=function(d$a,d$b,d$c){for(var d$d=[],d$e=2,d$f=arguments.length;d$e<d$f;d$e++)d$d.push(arguments[d$e]);if(!d$z._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=d$z._arrayBufferSlice),d$z._isinit=!0,d$O.__init__(),d$M.__init__(),d$o.__init__(),d$z.timer=new d$Y(),d$z.scaleTimer=new d$Y(),d$z.loader=new d$ka(),d$g.__init__(),d$e=0;for(var d$i=d$d.length;d$e<d$i;d$e++)d$d[d$e].enable&&d$d[d$e].enable();return d$p.__init__(),d$j.__init__(),d$N.__init__(),d$Q.beginCheck(),d$z._currentStage=d$z.stage=new d$ta(),d$z.stage.conchModel&&d$z.stage.conchModel.setRootNode(),d$z._getUrlPath(),d$z.render=new d$J(0,0),d$z.stage.size(d$a,d$b),d$L.__init__(),d$n.__init__(),d$r.instance.__init__(d$z.stage,d$J.canvas),d$xa.__init__(),d$E.autoStopMusic=!0,d$C.__init__(),d$J.canvas;}},d$z._getUrlPath=function(){var d$a=d$O.window.location,d$b=d$a.pathname;d$b=d$b&&":"==d$b.charAt(2)?d$b.substring(1):d$b,d$I.rootPath=d$I.basePath=d$I.getPath("file:"==d$a.protocol?d$b:d$a.protocol+"//"+d$a.host+d$a.pathname);},d$z._arrayBufferSlice=function(d$a,d$b){var d$c=new Uint8Array(this,d$a,d$b-d$a),d$d=new Uint8Array(d$c.length);return d$d.set(d$c),d$d.buffer;},d$z._runScript=function(d$a){return d$O.window[d$z._evcode](d$a);},d$z.stage=null,d$z.timer=null,d$z.scaleTimer=null,d$z.loader=null,d$z.version="1.8.6",d$z.render=null,d$z._currentStage=null,d$z._isinit=!1,d$z.isDebug=!1,d$z.MiniAdpter={init:function(){d$i.navigator&&d$i.navigator.userAgent&&-1<d$i.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0");}},d$k(d$z,["conchMarket",function(){return this.conchMarket=d$i.conch?conchMarket:null;},"PlatformClass",function(){return this.PlatformClass=d$i.PlatformClass;},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al";}]),function(){function d$a(){}return d$m(d$a,"Config"),d$a.WebGLTextCacheCount=500,d$a.atlasEnable=!1,d$a.showCanvasMark=!1,d$a.animationInterval=50,d$a.isAntialias=!1,d$a.isAlpha=!1,d$a.premultipliedAlpha=!0,d$a.isStencil=!0,d$a.preserveDrawingBuffer=!1,d$a;}()),d$l=function(){function d$l(){this._events=null;}d$m(d$l,"laya.events.EventDispatcher");var d$a=d$l.prototype;return d$a.hasListener=function(d$a){return!!(this._events&&this._events[d$a]);},d$a.getListener=function(d$a){return this._events?this._events[d$a]:null;},d$a.event=function(d$a,d$b){if(!this._events||!this._events[d$a])return!1;var d$c=this._events[d$a];if(d$c.lock)d$c.queue||(d$c.queue=[]),d$c.queue.push(d$b);else{var d$d;for(d$c.lock=!0,d$c.cursor=d$c.head;d$c.cursor;)(d$d=d$c.cursor).recover?(d$c.head=d$c.tail=d$c.cursor=null,console.error("node is recover："+d$d.id)):(d$c.cursor=d$d.next,d$d.once&&d$l.delNode(d$c,d$d),d$d.method&&(null!=d$b?d$d.args?d$d.method.apply(d$d.caller,d$d.args.concat(d$b)):d$b instanceof Array?d$d.method.apply(d$d.caller,d$b):d$d.caller?d$d.method.call(d$d.caller,d$b):d$z.recordError("事件派发错误","node.caller:"+d$d.caller+"node.method:"+d$d.method+"data:"+d$b+"node.prev"+d$d.prev):d$d.method.apply(d$d.caller,d$d.args)),d$d.once&&d$l.recoverHandler(d$d));d$c.lock=!1,!d$c.head&&this._events&&this._events[d$a]==d$c&&delete this._events[d$a],d$c.queue&&d$c.queue.length&&this.event(d$a,d$c.queue.shift());}return!0;},d$a.on=function(d$a,d$b,d$c,d$d){return this._createListener(d$a,d$b,d$c,d$d,!1);},d$a.once=function(d$a,d$b,d$c,d$d){return this._createListener(d$a,d$b,d$c,d$d,!0);},d$a._createListener=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$f&&(d$f=!0),d$f&&this.off(d$a,d$b,d$c,d$e);var d$i=d$l.createHandler(d$b||this,d$c,d$d,d$e);this._events||(this._events={});var d$j=this._events,d$k=d$j[d$a];return d$k?d$k.tail?(d$i.prev=d$k.tail,d$k.tail.next=d$i,d$k.tail=d$i):d$k.head=d$k.tail=d$i:d$j[d$a]={head:d$i,tail:d$i,cursor:null,lock:!1},this;},d$a.off=function(d$a,d$b,d$c,d$d){if(void 0===d$d&&(d$d=!1),!this._events||!this._events[d$a])return this;for(var d$e=this._events[d$a],d$f=d$e.head;d$f;){if((!d$b||d$f.caller===d$b)&&d$f.method===d$c&&(!d$d||d$f.once)){d$l.delNode(d$e,d$f),d$e.cursor==d$f&&(d$e.cursor=d$f.next),d$l.recoverHandler(d$f);break;}d$f=d$f.next;}return this;},d$a.offAll=function(d$a){var d$b=this._events;if(!d$b)return this;if(d$a)this._recoverHandlers(d$b[d$a]),delete d$b[d$a];else{for(var d$c in d$b)this._recoverHandlers(d$b[d$c]);this._events=null;}return this;},d$a._recoverHandlers=function(d$a){if(d$a){for(var d$b=d$a.head;d$b;){d$l.delNode(d$a,d$b);var d$c=d$b.next;d$l.recoverHandler(d$b),d$b=d$c;}d$a.cursor=null;}},d$a.isMouseEvent=function(d$a){return d$l.MOUSE_EVENTS[d$a];},d$l.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},d$l.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0});},d$l.delNode=function(d$a,d$b){d$b.prev?d$b.prev.next=d$b.next:d$a.head=d$b.next,d$b.next?d$b.next.prev=d$b.prev:d$a.tail=d$b.prev;},d$l.createHandler=function(d$a,d$b,d$c,d$d){var d$e=500<d$l._freeHandler.length?d$l._freeHandler.shift():null;if(d$e){if(d$e.recover)d$e.recover=!1,d$e.caller=d$a,d$e.method=d$b,d$e.args=d$c,d$e.once=d$d;else{var d$f="";try{arguments.propertyIsEnumerable.caller;}catch(d$a){d$f=d$a.stack;}var d$i=d$e.caller?(d$e.caller.__proto__&&d$e.caller.__proto__.constructor&&d$e.caller.__proto__.constructor.name)+"|"+d$e.caller.__className+"|"+d$e.caller.name:"",d$j=d$e.method?d$e.method.name:"";d$z.recordError("EventDispatcher重复创建","caller="+d$i+"  method="+d$j+"  stack="+d$f),d$e={id:++d$l._nodeCount,caller:d$a,method:d$b,args:d$c,once:d$d,recover:!1};}}else d$e={id:++d$l._nodeCount,caller:d$a,method:d$b,args:d$c,once:d$d,recover:!1};return d$e.prev=d$e.next=null,d$e;},d$l.recoverHandler=function(d$a){if(d$a.recover){if(d$l._errorCount<5){d$l._errorCount++;var d$b="";try{arguments.propertyIsEnumerable.caller;}catch(d$a){d$b=d$a.stack;}var d$c=d$a.caller?(d$a.caller.__proto__&&d$a.caller.__proto__.constructor&&d$a.caller.__proto__.constructor.name)+"|"+d$a.caller.__className+"|"+d$a.caller.name:"",d$d=d$a.method?d$a.method.name:"";d$z.recordError("EventDispatcher重复回收","id="+d$a.id+"  caller="+d$c+"  method="+d$d+"  stack="+d$b);}d$a.caller=d$a.method=d$a.args=d$a.prev=null;}else d$a.recover=!0,d$a.caller=d$a.method=d$a.args=d$a.prev=d$a.next=null,d$l._freeHandler&&d$l._freeHandler.length<3e3&&d$l._freeHandler.push(d$a);},d$l._freeHandler=[],d$l._nodeCount=0,d$l._errorCount=0,d$l;}(),d$u=function(){function d$e(d$a,d$b,d$c,d$d){this.once=!1,void(this._id=0)===d$d&&(d$d=!1),this.setTo(d$a,d$b,d$c,d$d);}d$m(d$e,"laya.utils.Handler");var d$a=d$e.prototype;return d$a.setTo=function(d$a,d$b,d$c,d$d){return this._id=d$e._gid++,this.caller=d$a,this.method=d$b,this.args=d$c,this.once=d$d,this;},d$a.run=function(){if(null==this.method)return null;var d$a=this._id,d$b=this.method.apply(this.caller,this.args);return this._id===d$a&&this.once&&this.recover(),d$b;},d$a.runWith=function(d$a){if(null==this.method)return null;var d$b=this._id;if(null==d$a)var d$c=this.method.apply(this.caller,this.args);else d$c=this.args||d$a.unshift?this.args?this.method.apply(this.caller,this.args.concat(d$a)):this.method.apply(this.caller,d$a):this.method.call(this.caller,d$a);return this._id===d$b&&this.once&&this.recover(),d$c;},d$a.clear=function(){return this.caller=null,this.method=null,this.args=null,this;},d$a.recover=function(){0<this._id&&(this._id=0,this.clear());},d$e.create=function(d$a,d$b,d$c,d$d){return void 0===d$d&&(d$d=!0),new d$e(d$a,d$b,d$c,d$d);},d$e._gid=1,d$e;}(),d$D=function(){function d$a(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0;}d$m(d$a,"laya.display.BitmapFont");var d$b=d$a.prototype;return d$b.loadFont=function(d$a,d$b){this._path=d$a,this._complete=d$b,d$z.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],d$u.create(this,this.onLoaded));},d$b.onLoaded=function(){this.parseFont(d$ja.getRes(this._path),d$ja.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null);},d$b.parseFont=function(d$a,d$b){if(null!=d$a&&null!=d$b){this._texture=d$b;var d$c=d$a.getElementsByTagName("info");if(!d$c[0].getAttributeNode)return this.parseFont2(d$a,d$b);this.fontSize=parseInt(d$c[0].getAttributeNode("size").nodeValue);var d$d,d$e=d$c[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(d$e[0]),parseInt(d$e[1]),parseInt(d$e[2]),parseInt(d$e[3])],d$d=d$a.getElementsByTagName("char");var d$f=0;for(d$f=0;d$f<d$d.length;d$f++){var d$i=d$d[d$f],d$j=parseInt(d$i.getAttributeNode("id").nodeValue),d$k=parseInt(d$i.getAttributeNode("xoffset").nodeValue)/1,d$l=parseInt(d$i.getAttributeNode("yoffset").nodeValue)/1,d$m=parseInt(d$i.getAttributeNode("xadvance").nodeValue)/1,d$n=new d$B();d$n.x=parseInt(d$i.getAttributeNode("x").nodeValue),d$n.y=parseInt(d$i.getAttributeNode("y").nodeValue),d$n.width=parseInt(d$i.getAttributeNode("width").nodeValue),d$n.height=parseInt(d$i.getAttributeNode("height").nodeValue);var d$o=d$ma.create(d$b,d$n.x,d$n.y,d$n.width,d$n.height,d$k,d$l);this._maxWidth=Math.max(this._maxWidth,d$m+this.letterSpacing),this._fontCharDic[d$j]=d$o,this._fontWidthMap[d$j]=d$m;}}},d$b.parseFont2=function(d$a,d$b){if(null!=d$a&&null!=d$b){this._texture=d$b;var d$c=d$a.getElementsByTagName("info");this.fontSize=parseInt(d$c[0].attributes.size.nodeValue);var d$d=d$c[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(d$d[0]),parseInt(d$d[1]),parseInt(d$d[2]),parseInt(d$d[3])];var d$e=d$a.getElementsByTagName("char"),d$f=0;for(d$f=0;d$f<d$e.length;d$f++){var d$i=d$e[d$f].attributes,d$j=parseInt(d$i.id.nodeValue),d$k=parseInt(d$i.xoffset.nodeValue)/1,d$l=parseInt(d$i.yoffset.nodeValue)/1,d$m=parseInt(d$i.xadvance.nodeValue)/1,d$n=new d$B();d$n.x=parseInt(d$i.x.nodeValue),d$n.y=parseInt(d$i.y.nodeValue),d$n.width=parseInt(d$i.width.nodeValue),d$n.height=parseInt(d$i.height.nodeValue);var d$o=d$ma.create(d$b,d$n.x,d$n.y,d$n.width,d$n.height,d$k,d$l);this._maxWidth=Math.max(this._maxWidth,d$m+this.letterSpacing),this._fontCharDic[d$j]=d$o,this._fontWidthMap[d$j]=d$m;}}},d$b.getCharTexture=function(d$a){return this._fontCharDic[d$a.charCodeAt(0)];},d$b.destroy=function(){if(this._texture){for(var d$a in this._fontCharDic){var d$b=this._fontCharDic[d$a];d$b&&d$b.destroy();}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null;}},d$b.setSpaceWidth=function(d$a){this._spaceWidth=d$a;},d$b.getCharWidth=function(d$a){var d$b=d$a.charCodeAt(0);return this._fontWidthMap[d$b]?this._fontWidthMap[d$b]+this.letterSpacing:" "==d$a?this._spaceWidth+this.letterSpacing:0;},d$b.getTextWidth=function(d$a){for(var d$b=0,d$c=0,d$d=d$a.length;d$c<d$d;d$c++)d$b+=this.getCharWidth(d$a.charAt(d$c));return d$b;},d$b.getMaxWidth=function(){return this._maxWidth;},d$b.getMaxHeight=function(){return this.fontSize;},d$b.drawText=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i,d$j=this.getTextWidth(d$a),d$k=0;"center"===d$e&&(d$k=(d$f-d$j)/2),"right"===d$e&&(d$k=d$f-d$j);for(var d$l=0,d$m=0,d$n=d$a.length;d$m<d$n;d$m++)(d$i=this.getCharTexture(d$a.charAt(d$m)))&&(d$b.graphics.drawTexture(d$i,d$c+d$l+d$k,d$d),d$l+=this.getCharWidth(d$a.charAt(d$m)));},d$a;}(),d$j=function(){function d$c(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=d$c._TF_EMPTY;}d$m(d$c,"laya.display.css.Style");var d$a=d$c.prototype;return d$a.getTransform=function(){return this._tf;},d$a.setTransform=function(d$a){this._tf="none"!==d$a&&d$a?d$a:d$c._TF_EMPTY;},d$a.setTranslateX=function(d$a){this._tf===d$c._TF_EMPTY&&(this._tf=new d$e()),this._tf.translateX=d$a;},d$a.setTranslateY=function(d$a){this._tf===d$c._TF_EMPTY&&(this._tf=new d$e()),this._tf.translateY=d$a;},d$a.setScaleX=function(d$a){this._tf===d$c._TF_EMPTY&&(this._tf=new d$e()),this._tf.scaleX=d$a;},d$a.setScale=function(d$a,d$b){this._tf===d$c._TF_EMPTY&&(this._tf=new d$e()),this._tf.scaleX=d$a,this._tf.scaleY=d$b;},d$a.setScaleY=function(d$a){this._tf===d$c._TF_EMPTY&&(this._tf=new d$e()),this._tf.scaleY=d$a;},d$a.setRotate=function(d$a){this._tf===d$c._TF_EMPTY&&(this._tf=new d$e()),this._tf.rotate=d$a;},d$a.setSkewX=function(d$a){this._tf===d$c._TF_EMPTY&&(this._tf=new d$e()),this._tf.skewX=d$a;},d$a.setSkewY=function(d$a){this._tf===d$c._TF_EMPTY&&(this._tf=new d$e()),this._tf.skewY=d$a;},d$a.destroy=function(){this.scrollRect=null;},d$a.render=function(d$a,d$b,d$c,d$d){},d$a.getCSSStyle=function(){return d$ba.EMPTY;},d$a._enableLayout=function(){return!1;},d$q(0,d$a,"scaleX",function(){return this._tf.scaleX;},function(d$a){this.setScaleX(d$a);}),d$q(0,d$a,"transform",function(){return this.getTransform();},function(d$a){this.setTransform(d$a);}),d$q(0,d$a,"translateX",function(){return this._tf.translateX;},function(d$a){this.setTranslateX(d$a);}),d$q(0,d$a,"translateY",function(){return this._tf.translateY;},function(d$a){this.setTranslateY(d$a);}),d$q(0,d$a,"scaleY",function(){return this._tf.scaleY;},function(d$a){this.setScaleY(d$a);}),d$q(0,d$a,"block",function(){return 0!=(1&this._type);}),d$q(0,d$a,"skewY",function(){return this._tf.skewY;},function(d$a){this.setSkewY(d$a);}),d$q(0,d$a,"rotate",function(){return this._tf.rotate;},function(d$a){this.setRotate(d$a);}),d$q(0,d$a,"skewX",function(){return this._tf.skewX;},function(d$a){this.setSkewX(d$a);}),d$q(0,d$a,"paddingLeft",function(){return 0;}),d$q(0,d$a,"paddingTop",function(){return 0;}),d$q(0,d$a,"absolute",function(){return!0;}),d$c.__init__=function(){d$c._TF_EMPTY=new d$e(),d$c.EMPTY=new d$c();},d$c.EMPTY=null,d$c._TF_EMPTY=null,d$c;}(),d$p=function(){function d$b(d$a){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=d$S.create(d$b.defaultColor),this.family=d$b.defaultFamily,this.stroke=d$b._STROKE,this.size=d$b.defaultSize,d$a&&d$a!==d$b.EMPTY&&d$a.copyTo(this);}d$m(d$b,"laya.display.css.Font");var d$a=d$b.prototype;return d$a.set=function(d$a){this._text=null;for(var d$b=d$a.split(" "),d$c=0,d$d=d$b.length;d$c<d$d;d$c++){var d$e=d$b[d$c];switch(d$e){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue;}0<d$e.indexOf("px")&&(this.size=parseInt(d$e),this.family=d$b[d$c+1],d$c++);}},d$a.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family;},d$a.copyTo=function(d$a){d$a._type=this._type,d$a._text=this._text,d$a._weight=this._weight,d$a._color=this._color,d$a.family=this.family,d$a.stroke=this.stroke!=d$b._STROKE?this.stroke.slice():d$b._STROKE,d$a.indent=this.indent,d$a.size=this.size;},d$q(0,d$a,"password",function(){return 0!=(1024&this._type);},function(d$a){d$a?this._type|=1024:this._type&=-1025;}),d$q(0,d$a,"color",function(){return this._color.strColor;},function(d$a){this._color=d$S.create(d$a);}),d$q(0,d$a,"italic",function(){return 0!=(512&this._type);},function(d$a){d$a?this._type|=512:this._type&=-513;}),d$q(0,d$a,"bold",function(){return 0!=(2048&this._type);},function(d$a){d$a?this._type|=2048:this._type&=-2049;}),d$q(0,d$a,"weight",function(){return""+this._weight;},function(d$a){var d$b=0;switch(d$a){case"normal":break;case"bold":this.bold=!0,d$b=700;break;case"bolder":d$b=800;break;case"lighter":d$b=100;break;default:d$b=parseInt(d$a);}this._weight=d$b,this._text=null;}),d$q(0,d$a,"decoration",function(){return this._decoration?this._decoration.value:null;},function(d$a){var d$b=d$a.split(" ");switch(this._decoration||(this._decoration={}),d$b[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=d$b[0];}d$b[1]&&(this._decoration.color=d$S.create(d$b)),this._decoration.value=d$a;}),d$b.__init__=function(){d$b.EMPTY=new d$b(null);},d$b.EMPTY=null,d$b.defaultColor="#000000",d$b.defaultSize=12,d$b.defaultFamily="Arial",d$b.defaultFont="12px Arial",d$b._STROKE=[0,"#000000"],d$b._ITALIC=512,d$b._PASSWORD=1024,d$b._BOLD=2048,d$b;}(),d$e=function(){function d$a(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0;}return d$m(d$a,"laya.display.css.TransformInfo"),d$a;}(),d$o=function(){function d$n(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,d$J.isConchNode){this._nativeObj=new d$i._conchGraphics(),this.id=this._nativeObj.conchID;}}d$m(d$n,"laya.display.Graphics");var d$a=d$n.prototype;return d$a.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null;},d$a.clear=function(d$a){void 0===d$a&&(d$a=!1);var d$b=0,d$c=0;if(d$a){var d$d=this._one;if(this._cmds){for(d$c=this._cmds.length,d$b=0;d$b<d$c;d$b++)!(d$d=this._cmds[d$b])||d$d.callee!==d$J._context._drawTexture&&d$d.callee!==d$J._context._drawTextureWithTransform||(d$d[0]=null,d$n._cache.push(d$d));this._cmds.length=0;}else d$d&&(!d$d||d$d.callee!==d$J._context._drawTexture&&d$d.callee!==d$J._context._drawTextureWithTransform||(d$d[0]=null,d$n._cache.push(d$d)));}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(d$b=0,d$c=this._vectorgraphArray.length;d$b<d$c;d$b++)d$_.getInstance().deleteShape(this._vectorgraphArray[d$b]);this._vectorgraphArray.length=0;}},d$a._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset();},d$a._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new d$c(),this._graphicBounds._graphics=this);},d$a._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint();},d$a._isOnlyOne=function(){return!this._cmds||0===this._cmds.length;},d$a.getBounds=function(d$a){return void 0===d$a&&(d$a=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(d$a);},d$a.getBoundPoints=function(d$a){return void 0===d$a&&(d$a=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(d$a);},d$a._addCmd=function(d$a){this._cmds=this._cmds||[],d$a.callee=d$a.shift(),this._cmds.push(d$a);},d$a.setFilters=function(d$a){this._saveToCmd(d$J._context._setFilters,d$a);},d$a.drawTexture=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){if(void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0),void 0===d$i&&(d$i=1),!d$a||d$i<.01)return null;d$d||(d$d=d$a.sourceWidth),d$e||(d$e=d$a.sourceHeight),d$i=d$i<0?0:1<d$i?1:d$i;var d$j,d$k=!d$J.isWebGL&&(d$O.onFirefox||d$O.onEdge||d$O.onIE||d$O.onSafari)?.5:0,d$l=d$d/d$a.sourceWidth,d$m=d$e/d$a.sourceHeight;return d$d=d$a.width*d$l,d$e=d$a.height*d$m,d$a.loaded&&(d$d<=0||d$e<=0)?null:(d$b+=d$a.offsetX*d$l,d$c+=d$a.offsetY*d$m,this._sp&&(this._sp._renderType|=512),d$b-=d$k,d$c-=d$k,d$d+=2*d$k,d$e+=2*d$k,d$n._cache.length?((d$j=d$n._cache.pop())[0]=d$a,d$j[1]=d$b,d$j[2]=d$c,d$j[3]=d$d,d$j[4]=d$e,d$j[5]=d$f,d$j[6]=d$i):d$j=[d$a,d$b,d$c,d$d,d$e,d$f,d$i],d$j.callee=d$f||1!=d$i?d$J._context._drawTextureWithTransform:d$J._context._drawTexture,null!=this._one||d$f||1!=d$i?this._saveToCmd(d$j.callee,d$j):(this._one=d$j,this._render=this._renderOneImg),d$a.loaded||d$a.once("loaded",this,this._textureLoaded,[d$a,d$j]),this._repaint(),d$j);},d$a.cleanByTexture=function(d$a,d$b,d$c,d$d,d$e){if(void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0),!d$a)return this.clear();if(this._one&&this._render===this._renderOneImg){d$d||(d$d=d$a.sourceWidth),d$e||(d$e=d$a.sourceHeight);var d$f=d$d/d$a.sourceWidth,d$i=d$e/d$a.sourceHeight;d$d=d$a.width*d$f,d$e=d$a.height*d$i,d$b+=d$a.offsetX*d$f,d$c+=d$a.offsetY*d$i,this._one[0]=d$a,this._one[1]=d$b,this._one[2]=d$c,this._one[3]=d$d,this._one[4]=d$e,this._repaint();}else this.clear(),d$a&&this.drawTexture(d$a,d$b,d$c,d$d,d$e);},d$a.drawTextures=function(d$a,d$b){d$a&&this._saveToCmd(d$J._context._drawTextures,[d$a,d$b]);},d$a.fillTexture=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){if(void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0),void 0===d$f&&(d$f="repeat"),d$a){var d$j=[d$a,d$b,d$c,d$d,d$e,d$f,d$i||d$A.EMPTY,{}];d$a.loaded||d$a.once("loaded",this,this._textureLoaded,[d$a,d$j]),this._saveToCmd(d$J._context._fillTexture,d$j);}},d$a._textureLoaded=function(d$a,d$b){d$b[3]=d$b[3]||d$a.width,d$b[4]=d$b[4]||d$a.height,this._repaint();},d$a.fillCircle=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){d$c.bitmap.enableMerageInAtlas=!1;var d$j=new Float32Array(2*(d$i+1)),d$k=new Float32Array(2*(d$i+1)),d$l=new Uint16Array(3*d$i),d$m=2*Math.PI/d$i,d$n=0;d$j[0]=d$d,d$j[1]=d$e,d$k[0]=d$d/d$c.width,d$k[1]=d$e/d$c.height;for(var d$o=2,d$p=0;d$p<d$i;d$p++){var d$q=d$f*Math.cos(d$n)+d$d,d$r=d$f*Math.sin(d$n)+d$e;d$j[d$o]=d$q,d$j[d$o+1]=d$r,d$k[d$o]=d$q/d$c.width,d$k[d$o+1]=d$r/d$c.height,d$n+=d$m,d$o+=2;}for(d$p=d$o=0;d$p<d$i;d$p++)d$l[d$o++]=0,d$l[d$o++]=d$p+1,d$l[d$o++]=d$i+1<=d$p+2?1:d$p+2;this.drawTriangles(d$c,d$a,d$b,d$j,d$k,d$l);},d$a.drawTriangles=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){void 0===d$j&&(d$j=1),this._saveToCmd(d$J._context.drawTriangles,[d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l]);},d$a._saveToCmd=function(d$a,d$b){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=d$b,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(d$b)),d$b.callee=d$a,this._repaint(),d$b;},d$a.clipRect=function(d$a,d$b,d$c,d$d){this._saveToCmd(d$J._context._clipRect,[d$a,d$b,d$c,d$d]);},d$a.fillText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){void 0===d$i&&(d$i=0),this._saveToCmd(d$J._context._fillText,[d$a,d$b,d$c,d$d||d$p.defaultFont,d$e,d$f]);},d$a.fillBorderText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){this._saveToCmd(d$J._context._fillBorderText,[d$a,d$b,d$c,d$d||d$p.defaultFont,d$e,d$f,d$i,d$j]);},d$a.strokeText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this._saveToCmd(d$J._context._strokeText,[d$a,d$b,d$c,d$d||d$p.defaultFont,d$e,d$f,d$i]);},d$a.alpha=function(d$a){d$a=d$a<0?0:1<d$a?1:d$a,this._saveToCmd(d$J._context._alpha,[d$a]);},d$a.setAlpha=function(d$a){d$a=d$a<0?0:1<d$a?1:d$a,this._saveToCmd(d$J._context._setAlpha,[d$a]);},d$a.transform=function(d$a,d$b,d$c){void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),this._saveToCmd(d$J._context._transform,[d$a,d$b,d$c]);},d$a.rotate=function(d$a,d$b,d$c){void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),this._saveToCmd(d$J._context._rotate,[d$a,d$b,d$c]);},d$a.scale=function(d$a,d$b,d$c,d$d){void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=0),this._saveToCmd(d$J._context._scale,[d$a,d$b,d$c,d$d]);},d$a.translate=function(d$a,d$b){this._saveToCmd(d$J._context._translate,[d$a,d$b]);},d$a.save=function(){this._saveToCmd(d$J._context._save,[]);},d$a.restore=function(){this._saveToCmd(d$J._context._restore,[]);},d$a.replaceText=function(d$a){this._repaint();var d$b=this._cmds;if(d$b){for(var d$c=d$b.length-1;-1<d$c;d$c--)if(this._isTextCmd(d$b[d$c].callee))return d$b[d$c][0].toUpperCase?d$b[d$c][0]=d$a:d$b[d$c][0].setText(d$a),!0;}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=d$a:this._one[0].setText(d$a),!0;return!1;},d$a._isTextCmd=function(d$a){return d$a===d$J._context._fillText||d$a===d$J._context._fillBorderText||d$a===d$J._context._strokeText;},d$a.replaceTextColor=function(d$a){this._repaint();var d$b=this._cmds;if(d$b)for(var d$c=d$b.length-1;-1<d$c;d$c--)this._isTextCmd(d$b[d$c].callee)&&(d$b[d$c][4]=d$a,d$b[d$c][0].toUpperCase||(d$b[d$c][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=d$a,this._one[0].toUpperCase||(this._one[0].changed=!0));},d$a.loadImage=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=this;void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0);var d$j=d$ja.getRes(d$a);function d$k(d$a){d$a&&(d$i.drawTexture(d$a,d$b,d$c,d$d,d$e),null!=d$f&&d$f.call(d$i._sp,d$a));}d$j?d$k(d$j):d$z.loader.load(d$a,d$u.create(null,d$k),null,"image");},d$a._renderEmpty=function(d$a,d$b,d$c,d$d){},d$a._renderAll=function(d$a,d$b,d$c,d$d){for(var d$e,d$f=this._cmds,d$i=0,d$j=d$f.length;d$i<d$j;d$i++)(d$e=d$f[d$i]).callee.call(d$b,d$c,d$d,d$e);},d$a._renderOne=function(d$a,d$b,d$c,d$d){this._one.callee.call(d$b,d$c,d$d,this._one);},d$a._renderOneImg=function(d$a,d$b,d$c,d$d){this._one.callee.call(d$b,d$c,d$d,this._one),2305!==d$a._renderType&&(d$a._renderType|=1);},d$a.drawLine=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$f&&(d$f=1);var d$i=0;d$J.isWebGL&&(d$i=d$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(d$i));var d$j=d$f%2==0?0:.5,d$k=[d$a+d$j,d$b+d$j,d$c+d$j,d$d+d$j,d$e,d$f,d$i];this._saveToCmd(d$J._context._drawLine,d$k);},d$a.drawLines=function(d$a,d$b,d$c,d$d,d$e){void 0===d$e&&(d$e=1);var d$f=0;if(d$c&&!(d$c.length<4)){d$J.isWebGL&&(d$f=d$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(d$f));var d$i=d$e%2==0?0:.5,d$j=[d$a+d$i,d$b+d$i,d$c,d$d,d$e,d$f];this._saveToCmd(d$J._context._drawLines,d$j);}},d$a.drawCurves=function(d$a,d$b,d$c,d$d,d$e){void 0===d$e&&(d$e=1);var d$f=[d$a,d$b,d$c,d$d,d$e];this._saveToCmd(d$J._context._drawCurves,d$f);},d$a.drawRect=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){void 0===d$i&&(d$i=1);var d$j=d$f?d$i/2:0,d$k=d$f?d$i:0,d$l=[d$a+d$j,d$b+d$j,d$c-d$k,d$d-d$k,d$e,d$f,d$i];this._saveToCmd(d$J._context._drawRect,d$l);},d$a.drawCircle=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$f&&(d$f=1);var d$i=d$e?d$f/2:0,d$j=0;d$J.isWebGL&&(d$j=d$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(d$j));var d$k=[d$a,d$b,d$c-d$i,d$d,d$e,d$f,d$j];this._saveToCmd(d$J._context._drawCircle,d$k);},d$a.drawPie=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){void 0===d$j&&(d$j=1);var d$k=d$i?d$j/2:0,d$l=d$i?d$j:0,d$m=0;d$J.isWebGL&&(d$m=d$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(d$m));var d$n=[d$a+d$k,d$b+d$k,d$c-d$l,d$d,d$e,d$f,d$i,d$j,d$m];d$n[3]=d$$.toRadian(d$d),d$n[4]=d$$.toRadian(d$e),this._saveToCmd(d$J._context._drawPie,d$n);},d$a.drawPoly=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$f&&(d$f=1);var d$i=0,d$j=!1;d$J.isWebGL&&(d$i=d$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(d$i),d$j=!(6<d$c.length));var d$k=d$e?d$f%2==0?0:.5:0,d$l=[d$a+d$k,d$b+d$k,d$c,d$d,d$e,d$f,d$i,d$j];this._saveToCmd(d$J._context._drawPoly,d$l);},d$a.drawPath=function(d$a,d$b,d$c,d$d,d$e){var d$f=[d$a,d$b,d$c,d$d,d$e];this._saveToCmd(d$J._context._drawPath,d$f);},d$q(0,d$a,"cmds",function(){return this._cmds;},function(d$a){this._sp&&(this._sp._renderType|=512),this._cmds=d$a,this._render=this._renderAll,this._repaint();}),d$n.__init__=function(){if(d$J.isConchNode){for(var d$a=laya.display.Graphics.prototype,d$b=d$O.window.ConchGraphics.prototype,d$c=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],d$d=0,d$e=d$c.length;d$d<=d$e;d$d++){var d$f=d$c[d$d];d$a[d$f]=d$b[d$f];}d$a._saveToCmd=null,d$b.drawImageS&&(d$a.drawTextures=function(d$a,d$b){if(d$a&&d$a.loaded&&d$a.bitmap&&d$a.source){var d$c=d$a.uv,d$d=d$a.bitmap.width,d$e=d$a.bitmap.height;this.drawImageS(d$a.bitmap.source,d$c[0]*d$d,d$c[1]*d$e,(d$c[2]-d$c[0])*d$d,(d$c[5]-d$c[3])*d$e,d$a.offsetX,d$a.offsetY,d$a.width,d$a.height,d$b);}}),d$a.drawTexture=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){if(void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0),void 0===d$i&&(d$i=1),d$a)if(d$a.loaded){if(d$a.loaded&&d$a.bitmap&&d$a.source&&(d$d||(d$d=d$a.sourceWidth),d$e||(d$e=d$a.sourceHeight),d$i=d$i<0?0:1<d$i?1:d$i,d$d=d$d-d$a.sourceWidth+d$a.width,d$e=d$e-d$a.sourceHeight+d$a.height,!(d$d<=0||d$e<=0))){d$b+=d$a.offsetX,d$c+=d$a.offsetY;var d$j=d$a.uv,d$k=d$a.bitmap.width,d$l=d$a.bitmap.height;d$j[4]<d$j[0]&&d$j[5]<d$j[1]?this.drawImageM(d$a.bitmap.source,d$j[4]*d$k,d$j[5]*d$l,(d$j[0]-d$j[4])*d$k,(d$j[1]-d$j[5])*d$l,d$b,d$c,d$d,d$e,d$f,d$i):this.drawImageM(d$a.bitmap.source,d$j[0]*d$k,d$j[1]*d$l,(d$j[2]-d$j[0])*d$k,(d$j[5]-d$j[3])*d$l,d$b,d$c,d$d,d$e,d$f,d$i),this._repaint();}}else d$a.once("loaded",this,function(){this.drawTexture(d$a,d$b,d$c,d$d,d$e,d$f);});},d$a.fillTexture=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){if(void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0),void 0===d$f&&(d$f="repeat"),d$a&&d$a.loaded){var d$j,d$k=d$J._context.ctx,d$l=d$a.bitmap.width,d$m=d$a.bitmap.height,d$n=d$a.uv;d$j=d$a.uv!=d$ma.DEF_UV?d$k.createPattern(d$a.bitmap.source,d$f,d$n[0]*d$l,d$n[1]*d$m,(d$n[2]-d$n[0])*d$l,(d$n[5]-d$n[3])*d$m):d$k.createPattern(d$a.bitmap.source,d$f);var d$o=0,d$p=0;d$i&&(d$b+=d$i.x%d$a.width,d$c+=d$i.y%d$a.height,d$o-=d$i.x%d$a.width,d$p-=d$i.y%d$a.height),this._fillImage(d$j,d$b,d$c,d$o,d$p,d$d,d$e);}};}},d$n._cache=[],d$n;}(),d$c=function(){function d$v(){this._cacheBoundsType=!1;}d$m(d$v,"laya.display.GraphicsBounds");var d$a=d$v.prototype;return d$a.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null;},d$a.reset=function(){this._temp&&(this._temp.length=0);},d$a.getBounds=function(d$a){return void 0===d$a&&(d$a=!1),(!this._bounds||!this._temp||this._temp.length<1||d$a!=this._cacheBoundsType)&&(this._bounds=d$B._getWrapRec(this.getBoundPoints(d$a),this._bounds)),this._cacheBoundsType=d$a,this._bounds;},d$a.getBoundPoints=function(d$a){return void 0===d$a&&(d$a=!1),(!this._temp||this._temp.length<1||d$a!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(d$a)),this._cacheBoundsType=d$a,this._rstBoundPoints=d$$.copyArray(this._rstBoundPoints,this._temp);},d$a._getCmdPoints=function(d$a){void 0===d$a&&(d$a=!1);var d$b,d$c,d$d=d$J._context,d$e=this._graphics.cmds;if((d$b=this._temp||(this._temp=[])).length=0,d$e||null==this._graphics._one||(d$v._tempCmds.length=0,d$v._tempCmds.push(this._graphics._one),d$e=d$v._tempCmds),!d$e)return d$b;(d$c=d$v._tempMatrixArrays).length=0;var d$f=d$v._initMatrix;d$f.identity();for(var d$i,d$j,d$k=d$v._tempMatrix,d$l=NaN,d$m=NaN,d$n=NaN,d$o=NaN,d$p=NaN,d$q=NaN,d$r=0,d$s=d$e.length;d$r<d$s;d$r++)if((d$i=d$e[d$r]).callee)switch(d$i.callee){case d$d._save:case 7:d$c.push(d$f),d$f=d$f.clone();break;case d$d._restore:case 8:d$f=d$c.pop();break;case d$d._scale:case 5:d$k.identity(),d$k.translate(-d$i[2],-d$i[3]),d$k.scale(d$i[0],d$i[1]),d$k.translate(d$i[2],d$i[3]),this._switchMatrix(d$f,d$k);break;case d$d._rotate:case 3:d$k.identity(),d$k.translate(-d$i[1],-d$i[2]),d$k.rotate(d$i[0]),d$k.translate(d$i[1],d$i[2]),this._switchMatrix(d$f,d$k);break;case d$d._translate:case 6:d$k.identity(),d$k.translate(d$i[0],d$i[1]),this._switchMatrix(d$f,d$k);break;case d$d._transform:case 4:d$k.identity(),d$k.translate(-d$i[1],-d$i[2]),d$k.concat(d$i[0]),d$k.translate(d$i[1],d$i[2]),this._switchMatrix(d$f,d$k);break;case 16:case 24:d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[0],d$i[1],d$i[2],d$i[3]),d$f);break;case 17:d$f.copyTo(d$k),d$k.concat(d$i[4]),d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[0],d$i[1],d$i[2],d$i[3]),d$k);break;case d$d._drawTexture:d$j=d$i[0],d$a?d$i[3]&&d$i[4]?d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[1],d$i[2],d$i[3],d$i[4]),d$f):(d$j=d$i[0],d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[1],d$i[2],d$j.width,d$j.height),d$f)):(d$l=(d$i[3]||d$j.sourceWidth)/d$j.width,d$m=(d$i[4]||d$j.sourceHeight)/d$j.height,d$n=d$l*d$j.sourceWidth,d$o=d$m*d$j.sourceHeight,d$p=0<d$j.offsetX?d$j.offsetX:0,d$q=0<d$j.offsetY?d$j.offsetY:0,d$p*=d$l,d$q*=d$m,d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[1]-d$p,d$i[2]-d$q,d$n,d$o),d$f));break;case d$d._fillTexture:d$i[3]&&d$i[4]?d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[1],d$i[2],d$i[3],d$i[4]),d$f):(d$j=d$i[0],d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[1],d$i[2],d$j.width,d$j.height),d$f));break;case d$d._drawTextureWithTransform:var d$t;d$t=d$i[5]?(d$f.copyTo(d$k),d$k.concat(d$i[5]),d$k):d$f,d$a?d$i[3]&&d$i[4]?d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[1],d$i[2],d$i[3],d$i[4]),d$t):(d$j=d$i[0],d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[1],d$i[2],d$j.width,d$j.height),d$t)):(d$j=d$i[0],d$l=(d$i[3]||d$j.sourceWidth)/d$j.width,d$m=(d$i[4]||d$j.sourceHeight)/d$j.height,d$n=d$l*d$j.sourceWidth,d$o=d$m*d$j.sourceHeight,d$p=0<d$j.offsetX?d$j.offsetX:0,d$q=0<d$j.offsetY?d$j.offsetY:0,d$p*=d$l,d$q*=d$m,d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[1]-d$p,d$i[2]-d$q,d$n,d$o),d$t));break;case d$d._drawRect:case 13:d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[0],d$i[1],d$i[2],d$i[3]),d$f);break;case d$d._drawCircle:case d$d._fillCircle:case 14:d$v._addPointArrToRst(d$b,d$B._getBoundPointS(d$i[0]-d$i[2],d$i[1]-d$i[2],d$i[2]+d$i[2],d$i[2]+d$i[2]),d$f);break;case d$d._drawLine:case 20:d$v._tempPoints.length=0;var d$u;d$u=.5*d$i[5],d$i[0]==d$i[2]?d$v._tempPoints.push(d$i[0]+d$u,d$i[1],d$i[2]+d$u,d$i[3],d$i[0]-d$u,d$i[1],d$i[2]-d$u,d$i[3]):d$i[1]==d$i[3]?d$v._tempPoints.push(d$i[0],d$i[1]+d$u,d$i[2],d$i[3]+d$u,d$i[0],d$i[1]-d$u,d$i[2],d$i[3]-d$u):d$v._tempPoints.push(d$i[0],d$i[1],d$i[2],d$i[3]),d$v._addPointArrToRst(d$b,d$v._tempPoints,d$f);break;case d$d._drawCurves:case 22:d$v._addPointArrToRst(d$b,d$w.I.getBezierPoints(d$i[2]),d$f,d$i[0],d$i[1]);break;case d$d._drawPoly:case d$d._drawLines:case 18:d$v._addPointArrToRst(d$b,d$i[2],d$f,d$i[0],d$i[1]);break;case d$d._drawPath:case 19:d$v._addPointArrToRst(d$b,this._getPathPoints(d$i[2]),d$f,d$i[0],d$i[1]);break;case d$d._drawPie:case 15:d$v._addPointArrToRst(d$b,this._getPiePoints(d$i[0],d$i[1],d$i[2],d$i[3],d$i[4]),d$f);}return 200<d$b.length?d$b=d$$.copyArray(d$b,d$B._getWrapRec(d$b)._getBoundPoints()):8<d$b.length&&(d$b=d$x.scanPList(d$b)),d$b;},d$a._switchMatrix=function(d$a,d$b){d$b.concat(d$a),d$b.copyTo(d$a);},d$a._getPiePoints=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$v._tempPoints;d$v._tempPoints.length=0,d$f.push(d$a,d$b);var d$i=(d$e-d$d)%(2*Math.PI)/10,d$j=NaN,d$k=d$d;for(d$j=0;d$j<=10;d$j++)d$f.push(d$a+d$c*Math.cos(d$k),d$b+d$c*Math.sin(d$k)),d$k+=d$i;return d$f;},d$a._getPathPoints=function(d$a){var d$b,d$c,d$d=0,d$e=d$v._tempPoints;for(d$e.length=0,d$b=d$a.length,d$d=0;d$d<d$b;d$d++)1<(d$c=d$a[d$d]).length&&(d$e.push(d$c[1],d$c[2]),3<d$c.length&&d$e.push(d$c[3],d$c[4]));return d$e;},d$v._addPointArrToRst=function(d$a,d$b,d$c,d$d,d$e){void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0);var d$f,d$i=0;for(d$f=d$b.length,d$i=0;d$i<d$f;d$i+=2)d$v._addPointToRst(d$a,d$b[d$i]+d$d,d$b[d$i+1]+d$e,d$c);},d$v._addPointToRst=function(d$a,d$b,d$c,d$d){var d$e=d$A.TEMP;d$e.setTo(d$b||0,d$c||0),d$d.transformPoint(d$e),d$a.push(d$e.x,d$e.y);},d$v._tempPoints=[],d$v._tempMatrixArrays=[],d$v._tempCmds=[],d$k(d$v,["_tempMatrix",function(){return this._tempMatrix=new d$G();},"_initMatrix",function(){return this._initMatrix=new d$G();}]),d$v;}(),d$f=function(){function d$a(){}d$m(d$a,"laya.events.Event");var d$b=d$a.prototype;return d$b.setTo=function(d$a,d$b,d$c){return this.type=d$a,this.currentTarget=d$b,this.target=d$c,this;},d$b.stopPropagation=function(){this._stoped=!0;},d$q(0,d$b,"stageY",function(){return d$z.stage.mouseY;}),d$q(0,d$b,"charCode",function(){return this.nativeEvent.charCode;}),d$q(0,d$b,"touches",function(){var d$a=this.nativeEvent.touches;if(d$a)for(var d$b=d$z.stage,d$c=0,d$d=d$a.length;d$c<d$d;d$c++){var d$e=d$a[d$c],d$f=d$A.TEMP;d$f.setTo(d$e.clientX,d$e.clientY),d$b._canvasTransform.invertTransformPoint(d$f),d$b.transform.invertTransformPoint(d$f),d$e.stageX=d$f.x,d$e.stageY=d$f.y;}return d$a;}),d$q(0,d$b,"keyLocation",function(){return this.nativeEvent.keyLocation;}),d$q(0,d$b,"ctrlKey",function(){return this.nativeEvent.ctrlKey;}),d$q(0,d$b,"altKey",function(){return this.nativeEvent.altKey;}),d$q(0,d$b,"shiftKey",function(){return this.nativeEvent.shiftKey;}),d$q(0,d$b,"stageX",function(){return d$z.stage.mouseX;}),d$a.EMPTY=new d$a(),d$a.MOUSE_DOWN="mousedown",d$a.MOUSE_UP="mouseup",d$a.CLICK="click",d$a.RIGHT_MOUSE_DOWN="rightmousedown",d$a.RIGHT_MOUSE_UP="rightmouseup",d$a.RIGHT_CLICK="rightclick",d$a.MOUSE_MOVE="mousemove",d$a.MOUSE_OVER="mouseover",d$a.MOUSE_OUT="mouseout",d$a.MOUSE_WHEEL="mousewheel",d$a.ROLL_OVER="mouseover",d$a.ROLL_OUT="mouseout",d$a.DOUBLE_CLICK="doubleclick",d$a.CHANGE="change",d$a.CHANGED="changed",d$a.RESIZE="resize",d$a.ADDED="added",d$a.REMOVED="removed",d$a.DISPLAY="display",d$a.UNDISPLAY="undisplay",d$a.ERROR="error",d$a.COMPLETE="complete",d$a.LOADED="loaded",d$a.INITED="inited",d$a.PROGRESS="progress",d$a.INPUT="input",d$a.RENDER="render",d$a.OPEN="open",d$a.MESSAGE="message",d$a.CLOSE="close",d$a.KEY_DOWN="keydown",d$a.KEY_PRESS="keypress",d$a.KEY_UP="keyup",d$a.FRAME="enterframe",d$a.DRAG_START="dragstart",d$a.DRAG_MOVE="dragmove",d$a.DRAG_END="dragend",d$a.ENTER="enter",d$a.SELECT="select",d$a.BLUR="blur",d$a.FOCUS="focus",d$a.VISIBILITY_CHANGE="visibilitychange",d$a.FOCUS_CHANGE="focuschange",d$a.PLAYED="played",d$a.PAUSED="paused",d$a.STOPPED="stopped",d$a.START="start",d$a.END="end",d$a.ENABLE_CHANGED="enablechanged",d$a.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",d$a.COMPONENT_ADDED="componentadded",d$a.COMPONENT_REMOVED="componentremoved",d$a.LAYER_CHANGED="layerchanged",d$a.HIERARCHY_LOADED="hierarchyloaded",d$a.RECOVERED="recovered",d$a.RELEASED="released",d$a.LINK="link",d$a.LABEL="label",d$a.FULL_SCREEN_CHANGE="fullscreenchange",d$a.DEVICE_LOST="devicelost",d$a.MESH_CHANGED="meshchanged",d$a.MATERIAL_CHANGED="materialchanged",d$a.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",d$a.ANIMATION_CHANGED="animationchanged",d$a.TRIGGER_ENTER="triggerenter",d$a.TRIGGER_STAY="triggerstay",d$a.TRIGGER_EXIT="triggerexit",d$a.TRAIL_FILTER_CHANGE="trailfilterchange",d$a.DOMINO_FILTER_CHANGE="dominofilterchange",d$a;}(),d$n=(function(){function d$a(){}d$m(d$a,"laya.events.Keyboard"),d$a.NUMBER_0=48,d$a.NUMBER_1=49,d$a.NUMBER_2=50,d$a.NUMBER_3=51,d$a.NUMBER_4=52,d$a.NUMBER_5=53,d$a.NUMBER_6=54,d$a.NUMBER_7=55,d$a.NUMBER_8=56,d$a.NUMBER_9=57,d$a.A=65,d$a.B=66,d$a.C=67,d$a.D=68,d$a.E=69,d$a.F=70,d$a.G=71,d$a.H=72,d$a.I=73,d$a.J=74,d$a.K=75,d$a.L=76,d$a.M=77,d$a.N=78,d$a.O=79,d$a.P=80,d$a.Q=81,d$a.R=82,d$a.S=83,d$a.T=84,d$a.U=85,d$a.V=86,d$a.W=87,d$a.X=88,d$a.Y=89,d$a.Z=90,d$a.F1=112,d$a.F2=113,d$a.F3=114,d$a.F4=115,d$a.F5=116,d$a.F6=117,d$a.F7=118,d$a.F8=119,d$a.F9=120,d$a.F10=121,d$a.F11=122,d$a.F12=123,d$a.F13=124,d$a.F14=125,d$a.F15=126,d$a.NUMPAD=21,d$a.NUMPAD_0=96,d$a.NUMPAD_1=97,d$a.NUMPAD_2=98,d$a.NUMPAD_3=99,d$a.NUMPAD_4=100,d$a.NUMPAD_5=101,d$a.NUMPAD_6=102,d$a.NUMPAD_7=103,d$a.NUMPAD_8=104,d$a.NUMPAD_9=105,d$a.NUMPAD_ADD=107,d$a.NUMPAD_DECIMAL=110,d$a.NUMPAD_DIVIDE=111,d$a.NUMPAD_ENTER=108,d$a.NUMPAD_MULTIPLY=106,d$a.NUMPAD_SUBTRACT=109,d$a.SEMICOLON=186,d$a.EQUAL=187,d$a.COMMA=188,d$a.MINUS=189,d$a.PERIOD=190,d$a.SLASH=191,d$a.BACKQUOTE=192,d$a.LEFTBRACKET=219,d$a.BACKSLASH=220,d$a.RIGHTBRACKET=221,d$a.QUOTE=222,d$a.ALTERNATE=18,d$a.BACKSPACE=8,d$a.CAPS_LOCK=20,d$a.COMMAND=15,d$a.CONTROL=17,d$a.DELETE=46,d$a.ENTER=13,d$a.ESCAPE=27,d$a.PAGE_UP=33,d$a.PAGE_DOWN=34,d$a.END=35,d$a.HOME=36,d$a.LEFT=37,d$a.UP=38,d$a.RIGHT=39,d$a.DOWN=40,d$a.SHIFT=16,d$a.SPACE=32,d$a.TAB=9,d$a.INSERT=45;}(),function(){function d$e(){}return d$m(d$e,"laya.events.KeyBoardManager"),d$e.__init__=function(){d$e._addEvent("keydown"),d$e._addEvent("keypress"),d$e._addEvent("keyup");},d$e._addEvent=function(d$b){d$O.document.addEventListener(d$b,function(d$a){laya.events.KeyBoardManager._dispatch(d$a,d$b);},!0);},d$e._dispatch=function(d$a,d$b){if(d$e.enabled){d$e._event._stoped=!1,d$e._event.nativeEvent=d$a,d$e._event.keyCode=d$a.keyCode||d$a.which||d$a.charCode,"keydown"===d$b?d$e._pressKeys[d$e._event.keyCode]=!0:"keyup"===d$b&&(d$e._pressKeys[d$e._event.keyCode]=null);for(var d$c=d$z.stage.focus&&null!=d$z.stage.focus.event&&d$z.stage.focus.displayedInStage?d$z.stage.focus:d$z.stage,d$d=d$c;d$d;)d$d.event(d$b,d$e._event.setTo(d$b,d$d,d$c)),d$d=d$d.parent;}},d$e.hasKeyDown=function(d$a){return d$e._pressKeys[d$a];},d$e._pressKeys={},d$e.enabled=!0,d$k(d$e,["_event",function(){return this._event=new d$f();}]),d$e;}()),d$r=(function(){function d$a(){}d$m(d$a,"laya.events.KeyLocation"),d$a.STANDARD=0,d$a.LEFT=1,d$a.RIGHT=2,d$a.NUM_PAD=3;}(),function(){function d$l(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=d$O.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new d$f(),this._matrix=new d$G(),this._point=new d$A(),this._rect=new d$B(),this._prePoint=new d$A(),this._curTouchID=NaN;}d$m(d$l,"laya.events.MouseManager");var d$a=d$l.prototype;return d$a.__init__=function(d$a,d$b){var d$c=this;this._stage=d$a;var d$d=this,d$e=this._eventList;d$b.oncontextmenu=function(d$a){if(d$l.enabled)return!1;},d$b.addEventListener("mousedown",function(d$a){d$l.enabled&&(d$O.onIE||d$a.preventDefault(),d$e.push(d$a),d$d.mouseDownTime=d$O.now());}),d$b.addEventListener("mouseup",function(d$a){d$l.enabled&&(d$a.preventDefault(),d$e.push(d$a),d$d.mouseDownTime=-d$O.now());},!0),d$b.addEventListener("mousemove",function(d$a){if(d$l.enabled){d$a.preventDefault();var d$b=d$O.now();if(d$b-d$d._lastMoveTimer<10)return;d$d._lastMoveTimer=d$b,d$e.push(d$a);}},!0),d$b.addEventListener("mouseout",function(d$a){d$l.enabled&&d$e.push(d$a);}),d$b.addEventListener("mouseover",function(d$a){d$l.enabled&&d$e.push(d$a);}),d$b.addEventListener("touchstart",function(d$a){d$l.enabled&&(d$e.push(d$a),d$l._isFirstTouch||d$xa.isInputting||d$a.preventDefault(),d$d.mouseDownTime=d$O.now());}),d$b.addEventListener("touchend",function(d$a){d$l.enabled?(d$l._isFirstTouch||d$xa.isInputting||d$a.preventDefault(),d$l._isFirstTouch=!1,d$e.push(d$a),d$d.mouseDownTime=-d$O.now()):d$c._curTouchID=NaN;},!0),d$b.addEventListener("touchmove",function(d$a){d$l.enabled&&(d$a.preventDefault(),d$e.push(d$a));},!0),d$b.addEventListener("touchcancel",function(d$a){d$l.enabled?(d$a.preventDefault(),d$e.push(d$a)):d$c._curTouchID=NaN;},!0),d$b.addEventListener("mousewheel",function(d$a){d$l.enabled&&d$e.push(d$a);}),d$b.addEventListener("DOMMouseScroll",function(d$a){d$l.enabled&&d$e.push(d$a);});},d$a.initEvent=function(d$a,d$b){var d$c;this._event._stoped=!1,this._event.nativeEvent=d$b||d$a,this._target=null,this._point.setTo(d$a.pageX||d$a.clientX,d$a.pageY||d$a.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=d$a.identifier||0,this._tTouchID=this._event.touchId,(d$c=d$s.I._event)._stoped=!1,d$c.nativeEvent=this._event.nativeEvent,d$c.touchId=this._event.touchId;},d$a.checkMouseWheel=function(d$a){this._event.delta=d$a.wheelDelta?.025*d$a.wheelDelta:-d$a.detail;for(var d$b=d$s.I.getLastOvers(),d$c=0,d$d=d$b.length;d$c<d$d;d$c++){var d$e=d$b[d$c];d$e.event("mousewheel",this._event.setTo("mousewheel",d$e,this._target));}},d$a.onMouseMove=function(d$a){d$s.I.onMouseMove(d$a,this._tTouchID);},d$a.onMouseDown=function(d$a){if(d$xa.isInputting&&d$z.stage.focus&&d$z.stage.focus.focus&&!d$z.stage.focus.contains(this._target)){var d$b=d$z.stage.focus._tf||d$z.stage.focus,d$c=d$a._tf||d$a;d$c instanceof laya.display.Input&&d$c.multiline==d$b.multiline?d$b._focusOut():d$b.focus=!1;}d$s.I.onMouseDown(d$a,this._tTouchID,this._isLeftMouse);},d$a.onMouseUp=function(d$a){d$s.I.onMouseUp(d$a,this._tTouchID,this._isLeftMouse);},d$a.check=function(d$a,d$b,d$c,d$d){this._point.setTo(d$b,d$c),d$a.fromParentPoint(this._point),d$b=this._point.x,d$c=this._point.y;var d$e=d$a.scrollRect;if(d$e&&(this._rect.setTo(d$e.x,d$e.y,d$e.width,d$e.height),!this._rect.contains(d$b,d$c)))return!1;if(!this.disableMouseEvent){if(d$a.hitTestPrior&&!d$a.mouseThrough&&!this.hitTest(d$a,d$b,d$c))return!1;for(var d$f=d$a._childs.length-1;-1<d$f;d$f--){var d$i=d$a._childs[d$f];if(!d$i.destroyed&&d$i.mouseEnabled&&d$i.visible&&this.check(d$i,d$b,d$c,d$d))return!0;}}var d$j=!(!d$a.hitTestPrior||d$a.mouseThrough||this.disableMouseEvent)||this.hitTest(d$a,d$b,d$c);return d$j?(this._target=d$a,d$d.call(this,d$a)):d$d===this.onMouseUp&&d$a===this._stage&&(this._target=this._stage,d$d.call(this,this._target)),d$j;},d$a.hitTest=function(d$a,d$b,d$c){var d$d=!1;if(d$a.scrollRect&&(d$b-=d$a.scrollRect.x,d$c-=d$a.scrollRect.y),d$a.hitArea instanceof laya.utils.HitArea)return d$a.hitArea.isHit(d$b,d$c);if(0<d$a.width&&0<d$a.height||d$a.mouseThrough||d$a.hitArea)if(d$a.mouseThrough)d$d=d$a.getGraphicBounds().contains(d$b,d$c);else{var d$e=this._rect;d$a.hitArea?d$e=d$a.hitArea:d$e.setTo(0,0,d$a.width,d$a.height),d$d=d$e.contains(d$b,d$c);}return d$d;},d$a.runEvent=function(){var d$a=this._eventList.length;if(d$a){this.mouseEventTime=d$O.now();var d$b,d$c=0,d$d=0,d$e=0;try{for(;d$c<d$a;){var d$f=this._eventList[d$c];switch("mousemove"!==d$f.type&&(this._prePoint.x=this._prePoint.y=-1e6),d$f.type){case"mousedown":this._touchIDs[0]=this._id++,d$l._isTouchRespond?d$l._isTouchRespond=!1:(this._isLeftMouse=0===d$f.button,this.initEvent(d$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===d$f.button,this.initEvent(d$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-d$f.clientX)+Math.abs(this._prePoint.y-d$f.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=d$f.clientX,this._prePoint.y=d$f.clientY,this.initEvent(d$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":d$l._isTouchRespond=!0,this._isLeftMouse=!0;var d$i=d$f.changedTouches;for(d$d=0,d$e=d$i.length;d$d<d$e;d$d++)d$b=d$i[d$d],(d$l.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=d$b.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[d$b.identifier]=this._id++,this.initEvent(d$b,d$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":d$l._isTouchRespond=!0,this._isLeftMouse=!0;var d$j=d$f.changedTouches;for(d$d=0,d$e=d$j.length;d$d<d$e;d$d++)if(d$b=d$j[d$d],d$l.multiTouchEnabled||d$b.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(d$b,d$f);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null);}break;case"touchmove":var d$k=d$f.changedTouches;for(d$d=0,d$e=d$k.length;d$d<d$e;d$d++)d$b=d$k[d$d],(d$l.multiTouchEnabled||d$b.identifier==this._curTouchID)&&(this.initEvent(d$b,d$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(d$f);break;case"mouseout":d$s.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage));}d$c++;}}catch(d$a){throw this._eventList.length=0,d$a;}this._eventList.length=0;}},d$l.enabled=!0,d$l.multiTouchEnabled=!0,d$l._isTouchRespond=!1,d$l._isFirstTouch=!0,d$k(d$l,["instance",function(){return this.instance=new d$l();}]),d$l;}()),d$s=function(){function d$q(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new d$f();}d$m(d$q,"laya.events.TouchManager");var d$a=d$q.prototype;return d$a._clearTempArrs=function(){d$q._oldArr.length=0,d$q._newArr.length=0,d$q._tEleArr.length=0;},d$a.getTouchFromArr=function(d$a,d$b){var d$c,d$d,d$e=0;for(d$c=d$b.length,d$e=0;d$e<d$c;d$e++)if((d$d=d$b[d$e]).id==d$a)return d$d;return null;},d$a.removeTouchFromArr=function(d$a,d$b){var d$c=0;for(d$c=d$b.length-1;0<=d$c;d$c--)d$b[d$c].id==d$a&&d$b.splice(d$c,1);},d$a.createTouchO=function(d$a,d$b){var d$c;return(d$c=d$W.getItem("TouchData")||{}).id=d$b,d$c.tar=d$a,d$c;},d$a.onMouseDown=function(d$a,d$b,d$c){var d$d,d$e,d$f,d$i;(void 0===d$c&&(d$c=!1),this.enable)&&(d$d=this.getTouchFromArr(d$b,this.preOvers),d$f=this.getEles(d$a,null,d$q._tEleArr),d$d?d$d.tar=d$a:(d$e=this.createTouchO(d$a,d$b),this.preOvers.push(d$e)),d$O.onMobile&&this.sendEvents(d$f,"mouseover",d$b),d$i=d$c?this.preDowns:this.preRightDowns,(d$d=this.getTouchFromArr(d$b,d$i))?d$d.tar=d$a:(d$e=this.createTouchO(d$a,d$b),d$i.push(d$e)),this.sendEvents(d$f,d$c?"mousedown":"rightmousedown",d$b),this._clearTempArrs());},d$a.sendEvents=function(d$a,d$b,d$c){void 0===d$c&&(d$c=0);var d$d,d$e,d$f,d$i=0;for(d$d=d$a.length,this._event._stoped=!1,d$e=d$a[0],d$i=0;d$i<d$d;d$i++){if((d$f=d$a[d$i]).destroyed)return;if(d$f.event(d$b,this._event.setTo(d$b,d$f,d$e)),this._event._stoped)break;}},d$a.getEles=function(d$a,d$b,d$c){for(d$c?d$c.length=0:d$c=[];d$a&&d$a!=d$b;)d$c.push(d$a),d$a=d$a.parent;return d$c;},d$a.checkMouseOutAndOverOfMove=function(d$a,d$b,d$c){if(void 0===d$c&&(d$c=0),d$b!=d$a){var d$d,d$e,d$f=0,d$i=0;if(d$b.contains(d$a))d$e=this.getEles(d$a,d$b,d$q._tEleArr),this.sendEvents(d$e,"mouseover",d$c);else if(d$a.contains(d$b))d$e=this.getEles(d$b,d$a,d$q._tEleArr),this.sendEvents(d$e,"mouseout",d$c);else{var d$j,d$k;(d$e=d$q._tEleArr).length=0,d$j=this.getEles(d$b,null,d$q._oldArr),d$k=this.getEles(d$a,null,d$q._newArr),d$i=d$j.length;var d$l=0;for(d$f=0;d$f<d$i;d$f++){if(d$d=d$j[d$f],0<=(d$l=d$k.indexOf(d$d))){d$k.splice(d$l,d$k.length-d$l);break;}d$e.push(d$d);}0<d$e.length&&this.sendEvents(d$e,"mouseout",d$c),0<d$k.length&&this.sendEvents(d$k,"mouseover",d$c);}}},d$a.onMouseMove=function(d$a,d$b){var d$c,d$d;this.enable&&((d$c=this.getTouchFromArr(d$b,this.preOvers))?(this.checkMouseOutAndOverOfMove(d$a,d$c.tar),d$c.tar=d$a,d$d=this.getEles(d$a,null,d$q._tEleArr)):(d$d=this.getEles(d$a,null,d$q._tEleArr),this.sendEvents(d$d,"mouseover",d$b),this.preOvers.push(this.createTouchO(d$a,d$b))),this.sendEvents(d$d,"mousemove",d$b),this._clearTempArrs());},d$a.getLastOvers=function(){return(d$q._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,d$q._tEleArr):(d$q._tEleArr.push(d$z.stage),d$q._tEleArr);},d$a.stageMouseOut=function(){var d$a;d$a=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(d$a,"mouseout",0);},d$a.onMouseUp=function(d$a,d$b,d$c){if(void 0===d$c&&(d$c=!1),this.enable){var d$d,d$e,d$f,d$i,d$j,d$k,d$l=0,d$m=0,d$n=d$O.onMobile;if(d$e=this.getEles(d$a,null,d$q._tEleArr),this.sendEvents(d$e,d$c?"mouseup":"rightmouseup",d$b),d$k=d$c?this.preDowns:this.preRightDowns,d$d=this.getTouchFromArr(d$b,d$k)){var d$o,d$p=d$O.now();if(d$o=d$p-this._lastClickTime<300,this._lastClickTime=d$p,d$a==d$d.tar)d$j=d$e;else for(d$f=this.getEles(d$d.tar,null,d$q._oldArr),(d$j=d$q._newArr).length=0,d$m=d$f.length,d$l=0;d$l<d$m;d$l++)d$i=d$f[d$l],0<=d$e.indexOf(d$i)&&d$j.push(d$i);0<d$j.length&&this.sendEvents(d$j,d$c?"click":"rightclick",d$b),d$c&&d$o&&this.sendEvents(d$j,"doubleclick",d$b),this.removeTouchFromArr(d$b,d$k),d$d.tar=null,d$W.recover("TouchData",d$d);}else;(d$d=this.getTouchFromArr(d$b,this.preOvers))&&d$n&&((d$j=this.getEles(d$d.tar,null,d$j))&&0<d$j.length&&this.sendEvents(d$j,"mouseout",d$b),this.removeTouchFromArr(d$b,this.preOvers),d$d.tar=null,d$W.recover("TouchData",d$d)),this._clearTempArrs();}},d$q._oldArr=[],d$q._newArr=[],d$q._tEleArr=[],d$k(d$q,["I",function(){return this.I=new d$q();}]),d$q;}(),d$t=function(){function d$a(){this._action=null;}d$m(d$a,"laya.filters.Filter");var d$b=d$a.prototype;return d$z.imps(d$b,{"laya.filters.IFilter":!0}),d$b.callNative=function(d$a){},d$q(0,d$b,"type",function(){return-1;}),d$q(0,d$b,"action",function(){return this._action;}),d$a.BLUR=16,d$a.COLOR=32,d$a.GLOW=8,d$a._filterStart=null,d$a._filterEnd=null,d$a._EndTarget=null,d$a._recycleScope=null,d$a._filter=null,d$a._useSrc=null,d$a._endSrc=null,d$a._useOut=null,d$a._endOut=null,d$a;}(),d$v=function(){function d$a(){this.data=null;}d$m(d$a,"laya.filters.ColorFilterAction");var d$b=d$a.prototype;return d$z.imps(d$b,{"laya.filters.IFilterAction":!0}),d$b.apply=function(d$a){var d$b=d$a.ctx.ctx,d$c=d$a.ctx.ctx.canvas;if(0==d$c.width||0==d$c.height)return d$c;for(var d$d,d$e=d$b.getImageData(0,0,d$c.width,d$c.height),d$f=d$e.data,d$i=0,d$j=d$f.length;d$i<d$j;d$i+=4)d$d=this.getColor(d$f[d$i],d$f[d$i+1],d$f[d$i+2],d$f[d$i+3]),0!=d$f[d$i+3]&&(d$f[d$i]=d$d[0],d$f[d$i+1]=d$d[1],d$f[d$i+2]=d$d[2],d$f[d$i+3]=d$d[3]);return d$b.putImageData(d$e,0,0),d$a;},d$b.getColor=function(d$a,d$b,d$c,d$d){var d$e=[];if(this.data._mat&&this.data._alpha){var d$f=this.data._mat,d$i=this.data._alpha;d$e[0]=d$f[0]*d$a+d$f[1]*d$b+d$f[2]*d$c+d$f[3]*d$d+d$i[0],d$e[1]=d$f[4]*d$a+d$f[5]*d$b+d$f[6]*d$c+d$f[7]*d$d+d$i[1],d$e[2]=d$f[8]*d$a+d$f[9]*d$b+d$f[10]*d$c+d$f[11]*d$d+d$i[2],d$e[3]=d$f[12]*d$a+d$f[13]*d$b+d$f[14]*d$c+d$f[15]*d$d+d$i[3];}return d$e;},d$a;}(),d$w=(function(){function d$a(){}d$m(d$a,"laya.maths.Arith"),d$a.formatR=function(d$a){return d$a>Math.PI&&(d$a-=2*Math.PI),d$a<-Math.PI&&(d$a+=2*Math.PI),d$a;},d$a.isPOT=function(d$a,d$b){return 0<d$a&&0==(d$a&d$a-1)&&0<d$b&&0==(d$b&d$b-1);},d$a.setMatToArray=function(d$a,d$b){d$a.a,d$a.b,d$a.c,d$a.d,d$a.tx,d$a.ty,d$b[0]=d$a.a,d$b[1]=d$a.b,d$b[4]=d$a.c,d$b[5]=d$a.d,d$b[12]=d$a.tx,d$b[13]=d$a.ty;};}(),function(){function d$a(){this._controlPoints=[new d$A(),new d$A(),new d$A()],this._calFun=this.getPoint2;}d$m(d$a,"laya.maths.Bezier");var d$b=d$a.prototype;return d$b._switchPoint=function(d$a,d$b){var d$c=this._controlPoints.shift();d$c.setTo(d$a,d$b),this._controlPoints.push(d$c);},d$b.getPoint2=function(d$a,d$b){var d$c=this._controlPoints[0],d$d=this._controlPoints[1],d$e=this._controlPoints[2],d$f=Math.pow(1-d$a,2)*d$c.x+2*d$a*(1-d$a)*d$d.x+Math.pow(d$a,2)*d$e.x,d$i=Math.pow(1-d$a,2)*d$c.y+2*d$a*(1-d$a)*d$d.y+Math.pow(d$a,2)*d$e.y;d$b.push(d$f,d$i);},d$b.getPoint3=function(d$a,d$b){var d$c=this._controlPoints[0],d$d=this._controlPoints[1],d$e=this._controlPoints[2],d$f=this._controlPoints[3],d$i=Math.pow(1-d$a,3)*d$c.x+3*d$d.x*d$a*(1-d$a)*(1-d$a)+3*d$e.x*d$a*d$a*(1-d$a)+d$f.x*Math.pow(d$a,3),d$j=Math.pow(1-d$a,3)*d$c.y+3*d$d.y*d$a*(1-d$a)*(1-d$a)+3*d$e.y*d$a*d$a*(1-d$a)+d$f.y*Math.pow(d$a,3);d$b.push(d$i,d$j);},d$b.insertPoints=function(d$a,d$b){var d$c,d$d=NaN;for(d$c=1/(d$a=0<d$a?d$a:5),d$d=0;d$d<=1;d$d+=d$c)this._calFun(d$d,d$b);},d$b.getBezierPoints=function(d$a,d$b,d$c){void 0===d$b&&(d$b=5),void 0===d$c&&(d$c=2);var d$d,d$e,d$f=0;if((d$d=d$a.length)<2*(d$c+1))return[];switch(d$e=[],d$c){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[];}for(;this._controlPoints.length<=d$c;)this._controlPoints.push(new d$A());for(d$f=0;d$f<2*d$c;d$f+=2)this._switchPoint(d$a[d$f],d$a[d$f+1]);for(d$f=2*d$c;d$f<d$d;d$f+=2)this._switchPoint(d$a[d$f],d$a[d$f+1]),d$f/2%d$c==0&&this.insertPoints(d$b,d$e);return d$e;},d$k(d$a,["I",function(){return this.I=new d$a();}]),d$a;}()),d$x=function(){function d$l(){}return d$m(d$l,"laya.maths.GrahamScan"),d$l.multiply=function(d$a,d$b,d$c){return(d$a.x-d$c.x)*(d$b.y-d$c.y)-(d$b.x-d$c.x)*(d$a.y-d$c.y);},d$l.dis=function(d$a,d$b){return(d$a.x-d$b.x)*(d$a.x-d$b.x)+(d$a.y-d$b.y)*(d$a.y-d$b.y);},d$l._getPoints=function(d$a,d$b,d$c){for(void 0===d$b&&(d$b=!1),d$l._mPointList||(d$l._mPointList=[]);d$l._mPointList.length<d$a;)d$l._mPointList.push(new d$A());return d$c||(d$c=[]),d$c.length=0,d$b?d$l.getFrom(d$c,d$l._mPointList,d$a):d$l.getFromR(d$c,d$l._mPointList,d$a),d$c;},d$l.getFrom=function(d$a,d$b,d$c){var d$d=0;for(d$d=0;d$d<d$c;d$d++)d$a.push(d$b[d$d]);return d$a;},d$l.getFromR=function(d$a,d$b,d$c){var d$d=0;for(d$d=0;d$d<d$c;d$d++)d$a.push(d$b.pop());return d$a;},d$l.pListToPointList=function(d$a,d$b){void 0===d$b&&(d$b=!1);var d$c=0,d$d=d$a.length/2,d$e=d$l._getPoints(d$d,d$b,d$l._tempPointList);for(d$c=0;d$c<d$d;d$c++)d$e[d$c].setTo(d$a[d$c+d$c],d$a[d$c+d$c+1]);return d$e;},d$l.pointListToPlist=function(d$a){var d$b,d$c=0,d$d=d$a.length,d$e=d$l._temPList;for(d$c=d$e.length=0;d$c<d$d;d$c++)d$b=d$a[d$c],d$e.push(d$b.x,d$b.y);return d$e;},d$l.scanPList=function(d$a){return d$$.copyArray(d$a,d$l.pointListToPlist(d$l.scan(d$l.pListToPointList(d$a,!0))));},d$l.scan=function(d$a){var d$b,d$c,d$d,d$e=0,d$f=0,d$i=0,d$j=d$a.length,d$k={};for((d$c=d$l._temArr).length=0,d$e=(d$j=d$a.length)-1;0<=d$e;d$e--)d$d=(d$b=d$a[d$e]).x+"_"+d$b.y,d$k.hasOwnProperty(d$d)||(d$k[d$d]=!0,d$c.push(d$b));for(d$j=d$c.length,d$$.copyArray(d$a,d$c),d$e=1;d$e<d$j;d$e++)(d$a[d$e].y<d$a[d$i].y||d$a[d$e].y==d$a[d$i].y&&d$a[d$e].x<d$a[d$i].x)&&(d$i=d$e);for(d$b=d$a[0],d$a[0]=d$a[d$i],d$a[d$i]=d$b,d$e=1;d$e<d$j-1;d$e++){for(d$f=(d$i=d$e)+1;d$f<d$j;d$f++)(0<d$l.multiply(d$a[d$f],d$a[d$i],d$a[0])||0==d$l.multiply(d$a[d$f],d$a[d$i],d$a[0])&&d$l.dis(d$a[0],d$a[d$f])<d$l.dis(d$a[0],d$a[d$i]))&&(d$i=d$f);d$b=d$a[d$e],d$a[d$e]=d$a[d$i],d$a[d$i]=d$b;}if((d$c=d$l._temArr).length=0,d$a.length<3)return d$$.copyArray(d$c,d$a);for(d$c.push(d$a[0],d$a[1],d$a[2]),d$e=3;d$e<d$j;d$e++){for(;2<=d$c.length&&0<=d$l.multiply(d$a[d$e],d$c[d$c.length-1],d$c[d$c.length-2]);)d$c.pop();d$a[d$e]&&d$c.push(d$a[d$e]);}return d$c;},d$l._mPointList=null,d$l._tempPointList=[],d$l._temPList=[],d$l._temArr=[],d$l;}(),d$y=function(){function d$e(){}return d$m(d$e,"laya.maths.MathUtil"),d$e.subtractVector3=function(d$a,d$b,d$c){d$c[0]=d$a[0]-d$b[0],d$c[1]=d$a[1]-d$b[1],d$c[2]=d$a[2]-d$b[2];},d$e.lerp=function(d$a,d$b,d$c){return d$a*(1-d$c)+d$b*d$c;},d$e.scaleVector3=function(d$a,d$b,d$c){d$c[0]=d$a[0]*d$b,d$c[1]=d$a[1]*d$b,d$c[2]=d$a[2]*d$b;},d$e.lerpVector3=function(d$a,d$b,d$c,d$d){var d$e=d$a[0],d$f=d$a[1],d$i=d$a[2];d$d[0]=d$e+d$c*(d$b[0]-d$e),d$d[1]=d$f+d$c*(d$b[1]-d$f),d$d[2]=d$i+d$c*(d$b[2]-d$i);},d$e.lerpVector4=function(d$a,d$b,d$c,d$d){var d$e=d$a[0],d$f=d$a[1],d$i=d$a[2],d$j=d$a[3];d$d[0]=d$e+d$c*(d$b[0]-d$e),d$d[1]=d$f+d$c*(d$b[1]-d$f),d$d[2]=d$i+d$c*(d$b[2]-d$i),d$d[3]=d$j+d$c*(d$b[3]-d$j);},d$e.slerpQuaternionArray=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){var d$j,d$k,d$l,d$m,d$n,d$o=d$a[d$b+0],d$p=d$a[d$b+1],d$q=d$a[d$b+2],d$r=d$a[d$b+3],d$s=d$c[d$d+0],d$t=d$c[d$d+1],d$u=d$c[d$d+2],d$v=d$c[d$d+3];return(d$k=d$o*d$s+d$p*d$t+d$q*d$u+d$r*d$v)<0&&(d$k=-d$k,d$s=-d$s,d$t=-d$t,d$u=-d$u,d$v=-d$v),d$n=1e-6<1-d$k?(d$j=Math.acos(d$k),d$l=Math.sin(d$j),d$m=Math.sin((1-d$e)*d$j)/d$l,Math.sin(d$e*d$j)/d$l):(d$m=1-d$e,d$e),d$f[d$i+0]=d$m*d$o+d$n*d$s,d$f[d$i+1]=d$m*d$p+d$n*d$t,d$f[d$i+2]=d$m*d$q+d$n*d$u,d$f[d$i+3]=d$m*d$r+d$n*d$v,d$f;},d$e.getRotation=function(d$a,d$b,d$c,d$d){return Math.atan2(d$d-d$b,d$c-d$a)/Math.PI*180;},d$e.sortBigFirst=function(d$a,d$b){return d$a==d$b?0:d$a<d$b?1:-1;},d$e.sortSmallFirst=function(d$a,d$b){return d$a==d$b?0:d$a<d$b?-1:1;},d$e.sortNumBigFirst=function(d$a,d$b){return parseFloat(d$b)-parseFloat(d$a);},d$e.sortNumSmallFirst=function(d$a,d$b){return parseFloat(d$a)-parseFloat(d$b);},d$e.sortByKey=function(d$c,d$a,d$b){var d$d;return void 0===d$a&&(d$a=!1),void 0===d$b&&(d$b=!0),d$d=d$a?d$b?d$e.sortNumBigFirst:d$e.sortBigFirst:d$b?d$e.sortNumSmallFirst:d$e.sortSmallFirst,function(d$a,d$b){return d$d(d$a[d$c],d$b[d$c]);};},d$e;}(),d$G=function(){function d$c(d$a,d$b,d$c,d$d,d$e,d$f){this.inPool=!1,this.bTransform=!1,void 0===d$a&&(d$a=1),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=1),void 0===d$e&&(d$e=0),void 0===d$f&&(d$f=0),this.a=d$a,this.b=d$b,this.c=d$c,this.d=d$d,this.tx=d$e,this.ty=d$f,this._checkTransform();}d$m(d$c,"laya.maths.Matrix");var d$a=d$c.prototype;return d$a.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this;},d$a._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d;},d$a.setTranslate=function(d$a,d$b){return this.tx=d$a,this.ty=d$b,this;},d$a.translate=function(d$a,d$b){return this.tx+=d$a,this.ty+=d$b,this;},d$a.scale=function(d$a,d$b){this.a*=d$a,this.d*=d$b,this.c*=d$a,this.b*=d$b,this.tx*=d$a,this.ty*=d$b,this.bTransform=!0;},d$a.rotate=function(d$a){var d$b=Math.cos(d$a),d$c=Math.sin(d$a),d$d=this.a,d$e=this.c,d$f=this.tx;this.a=d$d*d$b-this.b*d$c,this.b=d$d*d$c+this.b*d$b,this.c=d$e*d$b-this.d*d$c,this.d=d$e*d$c+this.d*d$b,this.tx=d$f*d$b-this.ty*d$c,this.ty=d$f*d$c+this.ty*d$b,this.bTransform=!0;},d$a.skew=function(d$a,d$b){var d$c=Math.tan(d$a),d$d=Math.tan(d$b),d$e=this.a,d$f=this.b;return this.a+=d$d*this.c,this.b+=d$d*this.d,this.c+=d$c*d$e,this.d+=d$c*d$f,this;},d$a.invertTransformPoint=function(d$a){var d$b=this.a,d$c=this.b,d$d=this.c,d$e=this.d,d$f=this.tx,d$i=d$b*d$e-d$c*d$d,d$j=d$e/d$i,d$k=-d$c/d$i,d$l=-d$d/d$i,d$m=d$b/d$i,d$n=(d$d*this.ty-d$e*d$f)/d$i,d$o=-(d$b*this.ty-d$c*d$f)/d$i;return d$a.setTo(d$j*d$a.x+d$l*d$a.y+d$n,d$k*d$a.x+d$m*d$a.y+d$o);},d$a.transformPoint=function(d$a){return d$a.setTo(this.a*d$a.x+this.c*d$a.y+this.tx,this.b*d$a.x+this.d*d$a.y+this.ty);},d$a.transformPointN=function(d$a){return d$a.setTo(this.a*d$a.x+this.c*d$a.y,this.b*d$a.x+this.d*d$a.y);},d$a.transformPointArray=function(d$a,d$b){for(var d$c=d$a.length,d$d=0;d$d<d$c;d$d+=2){var d$e=d$a[d$d],d$f=d$a[d$d+1];d$b[d$d]=this.a*d$e+this.c*d$f+this.tx,d$b[d$d+1]=this.b*d$e+this.d*d$f+this.ty;}return d$b;},d$a.transformPointArrayScale=function(d$a,d$b){for(var d$c=d$a.length,d$d=0;d$d<d$c;d$d+=2){var d$e=d$a[d$d],d$f=d$a[d$d+1];d$b[d$d]=this.a*d$e+this.c*d$f,d$b[d$d+1]=this.b*d$e+this.d*d$f;}return d$b;},d$a.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b);},d$a.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d);},d$a.invert=function(){var d$a=this.a,d$b=this.b,d$c=this.c,d$d=this.d,d$e=this.tx,d$f=d$a*d$d-d$b*d$c;return this.a=d$d/d$f,this.b=-d$b/d$f,this.c=-d$c/d$f,this.d=d$a/d$f,this.tx=(d$c*this.ty-d$d*d$e)/d$f,this.ty=-(d$a*this.ty-d$b*d$e)/d$f,this;},d$a.setTo=function(d$a,d$b,d$c,d$d,d$e,d$f){return this.a=d$a,this.b=d$b,this.c=d$c,this.d=d$d,this.tx=d$e,this.ty=d$f,this;},d$a.concat=function(d$a){var d$b=this.a,d$c=this.c,d$d=this.tx;return this.a=d$b*d$a.a+this.b*d$a.c,this.b=d$b*d$a.b+this.b*d$a.d,this.c=d$c*d$a.a+this.d*d$a.c,this.d=d$c*d$a.b+this.d*d$a.d,this.tx=d$d*d$a.a+this.ty*d$a.c+d$a.tx,this.ty=d$d*d$a.b+this.ty*d$a.d+d$a.ty,this;},d$a.scaleEx=function(d$a,d$b){var d$c=this.a,d$d=this.b,d$e=this.c,d$f=this.d;0!==d$d||0!==d$e?(this.a=d$a*d$c,this.b=d$a*d$d,this.c=d$b*d$e):(this.a=d$a*d$c,this.b=0*d$f,this.c=0*d$c),this.d=d$b*d$f,this.bTransform=!0;},d$a.rotateEx=function(d$a){var d$b=Math.cos(d$a),d$c=Math.sin(d$a),d$d=this.a,d$e=this.b,d$f=this.c,d$i=this.d;0!==d$e||0!==d$f?(this.a=d$b*d$d+d$c*d$f,this.b=d$b*d$e+d$c*d$i,this.c=-d$c*d$d+d$b*d$f,this.d=-d$c*d$e+d$b*d$i):(this.a=d$b*d$d,this.b=d$c*d$i,this.c=-d$c*d$d,this.d=d$b*d$i),this.bTransform=!0;},d$a.clone=function(){var d$a=d$c.create();return d$a.a=this.a,d$a.b=this.b,d$a.c=this.c,d$a.d=this.d,d$a.tx=this.tx,d$a.ty=this.ty,d$a.bTransform=this.bTransform,d$a;},d$a.copyTo=function(d$a){return d$a.a=this.a,d$a.b=this.b,d$a.c=this.c,d$a.d=this.d,d$a.tx=this.tx,d$a.ty=this.ty,d$a.bTransform=this.bTransform,d$a;},d$a.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty;},d$a.destroy=function(){if(!this.inPool){var d$a=d$c._cache;this.inPool=!0,d$a._length||(d$a._length=0),(d$a[d$a._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1;}},d$c.mul=function(d$a,d$b,d$c){var d$d=d$a.a,d$e=d$a.b,d$f=d$a.c,d$i=d$a.d,d$j=d$a.tx,d$k=d$a.ty,d$l=d$b.a,d$m=d$b.b,d$n=d$b.c,d$o=d$b.d,d$p=d$b.tx,d$q=d$b.ty;return 0!==d$m||0!==d$n?(d$c.a=d$d*d$l+d$e*d$n,d$c.b=d$d*d$m+d$e*d$o,d$c.c=d$f*d$l+d$i*d$n,d$c.d=d$f*d$m+d$i*d$o,d$c.tx=d$l*d$j+d$n*d$k+d$p,d$c.ty=d$m*d$j+d$o*d$k+d$q):(d$c.a=d$d*d$l,d$c.b=d$e*d$o,d$c.c=d$f*d$l,d$c.d=d$i*d$o,d$c.tx=d$l*d$j+d$p,d$c.ty=d$o*d$k+d$q),d$c;},d$c.mul16=function(d$a,d$b,d$c){var d$d=d$a.a,d$e=d$a.b,d$f=d$a.c,d$i=d$a.d,d$j=d$a.tx,d$k=d$a.ty,d$l=d$b.a,d$m=d$b.b,d$n=d$b.c,d$o=d$b.d,d$p=d$b.tx,d$q=d$b.ty;return 0!==d$m||0!==d$n?(d$c[0]=d$d*d$l+d$e*d$n,d$c[1]=d$d*d$m+d$e*d$o,d$c[4]=d$f*d$l+d$i*d$n,d$c[5]=d$f*d$m+d$i*d$o,d$c[12]=d$l*d$j+d$n*d$k+d$p,d$c[13]=d$m*d$j+d$o*d$k+d$q):(d$c[0]=d$d*d$l,d$c[1]=d$e*d$o,d$c[4]=d$f*d$l,d$c[5]=d$i*d$o,d$c[12]=d$l*d$j+d$p,d$c[13]=d$o*d$k+d$q),d$c;},d$c.mulPre=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){var d$k=d$a.a,d$l=d$a.b,d$m=d$a.c,d$n=d$a.d,d$o=d$a.tx,d$p=d$a.ty;return 0!==d$c||0!==d$d?(d$j.a=d$k*d$b+d$l*d$d,d$j.b=d$k*d$c+d$l*d$e,d$j.c=d$m*d$b+d$n*d$d,d$j.d=d$m*d$c+d$n*d$e,d$j.tx=d$b*d$o+d$d*d$p+d$f,d$j.ty=d$c*d$o+d$e*d$p+d$i):(d$j.a=d$k*d$b,d$j.b=d$l*d$e,d$j.c=d$m*d$b,d$j.d=d$n*d$e,d$j.tx=d$b*d$o+d$f,d$j.ty=d$e*d$p+d$i),d$j;},d$c.mulPos=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){var d$k=d$a.a,d$l=d$a.b,d$m=d$a.c,d$n=d$a.d,d$o=d$a.tx,d$p=d$a.ty;return 0!==d$l||0!==d$m?(d$j.a=d$b*d$k+d$c*d$m,d$j.b=d$b*d$l+d$c*d$n,d$j.c=d$d*d$k+d$e*d$m,d$j.d=d$d*d$l+d$e*d$n,d$j.tx=d$k*d$f+d$m*d$i+d$o,d$j.ty=d$l*d$f+d$n*d$i+d$p):(d$j.a=d$b*d$k,d$j.b=d$c*d$n,d$j.c=d$d*d$k,d$j.d=d$e*d$n,d$j.tx=d$k*d$f+d$o,d$j.ty=d$n*d$i+d$p),d$j;},d$c.preMul=function(d$a,d$b,d$c){var d$d=d$a.a,d$e=d$a.b,d$f=d$a.c,d$i=d$a.d,d$j=d$b.a,d$k=d$b.b,d$l=d$b.c,d$m=d$b.d,d$n=d$b.tx,d$o=d$b.ty;return d$c.a=d$j*d$d,d$c.b=d$c.c=0,d$c.d=d$m*d$i,d$c.tx=d$n*d$d+d$a.tx,d$c.ty=d$o*d$i+d$a.ty,0===d$k&&0===d$l&&0===d$e&&0===d$f||(d$c.a+=d$k*d$f,d$c.d+=d$l*d$e,d$c.b+=d$j*d$e+d$k*d$i,d$c.c+=d$l*d$d+d$m*d$f,d$c.tx+=d$o*d$f,d$c.ty+=d$n*d$e),d$c;},d$c.preMulXY=function(d$a,d$b,d$c,d$d){var d$e=d$a.a,d$f=d$a.b,d$i=d$a.c,d$j=d$a.d;return d$d.a=d$e,d$d.b=d$f,d$d.c=d$i,d$d.d=d$j,d$d.tx=d$b*d$e+d$a.tx+d$c*d$i,d$d.ty=d$c*d$j+d$a.ty+d$b*d$f,d$d;},d$c.create=function(){var d$a=d$c._cache,d$b=d$a._length?d$a[--d$a._length]:new d$c();return d$b.inPool=!1,d$b;},d$c.EMPTY=new d$c(),d$c.TEMP=new d$c(),d$c._cache=[],d$c;}(),d$A=function(){function d$a(d$a,d$b){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),this.x=d$a,this.y=d$b;}d$m(d$a,"laya.maths.Point");var d$b=d$a.prototype;return d$b.setTo=function(d$a,d$b){return this.x=d$a,this.y=d$b,this;},d$b.distance=function(d$a,d$b){return Math.sqrt((this.x-d$a)*(this.x-d$a)+(this.y-d$b)*(this.y-d$b));},d$b.toString=function(){return this.x+","+this.y;},d$b.normalize=function(){var d$a=Math.sqrt(this.x*this.x+this.y*this.y);if(0<d$a){var d$b=1/d$a;this.x*=d$b,this.y*=d$b;}},d$a.TEMP=new d$a(),d$a.EMPTY=new d$a(),d$a;}(),d$B=function(){function d$l(d$a,d$b,d$c,d$d){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=0),this.x=d$a,this.y=d$b,this.width=d$c,this.height=d$d;}d$m(d$l,"laya.maths.Rectangle");var d$a=d$l.prototype;return d$a.setTo=function(d$a,d$b,d$c,d$d){return this.x=d$a,this.y=d$b,this.width=d$c,this.height=d$d,this;},d$a.copyFrom=function(d$a){return this.x=d$a.x,this.y=d$a.y,this.width=d$a.width,this.height=d$a.height,this;},d$a.contains=function(d$a,d$b){return!(this.width<=0||this.height<=0)&&d$a>=this.x&&d$a<this.right&&d$b>=this.y&&d$b<this.bottom;},d$a.intersects=function(d$a){return!(d$a.x>this.x+this.width||d$a.x+d$a.width<this.x||d$a.y>this.y+this.height||d$a.y+d$a.height<this.y);},d$a.intersection=function(d$a,d$b){return this.intersects(d$a)?(d$b||(d$b=new d$l()),d$b.x=Math.max(this.x,d$a.x),d$b.y=Math.max(this.y,d$a.y),d$b.width=Math.min(this.right,d$a.right)-d$b.x,d$b.height=Math.min(this.bottom,d$a.bottom)-d$b.y,d$b):null;},d$a.union=function(d$a,d$b){return d$b||(d$b=new d$l()),this.clone(d$b),d$a.width<=0||d$a.height<=0?d$b:(d$b.addPoint(d$a.x,d$a.y),d$b.addPoint(d$a.right,d$a.bottom),this);},d$a.clone=function(d$a){return d$a||(d$a=new d$l()),d$a.x=this.x,d$a.y=this.y,d$a.width=this.width,d$a.height=this.height,d$a;},d$a.toString=function(){return this.x+","+this.y+","+this.width+","+this.height;},d$a.equals=function(d$a){return!(!d$a||d$a.x!==this.x||d$a.y!==this.y||d$a.width!==this.width||d$a.height!==this.height);},d$a.addPoint=function(d$a,d$b){return this.x>d$a&&(this.width+=this.x-d$a,this.x=d$a),this.y>d$b&&(this.height+=this.y-d$b,this.y=d$b),this.width<d$a-this.x&&(this.width=d$a-this.x),this.height<d$b-this.y&&(this.height=d$b-this.y),this;},d$a._getBoundPoints=function(){var d$a=d$l._temB;return(d$a.length=0)==this.width||0==this.height||d$a.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),d$a;},d$a.isEmpty=function(){return this.width<=0||this.height<=0;},d$q(0,d$a,"right",function(){return this.x+this.width;}),d$q(0,d$a,"bottom",function(){return this.y+this.height;}),d$l._getBoundPointS=function(d$a,d$b,d$c,d$d){var d$e=d$l._temA;return(d$e.length=0)==d$c||0==d$d||d$e.push(d$a,d$b,d$a+d$c,d$b,d$a,d$b+d$d,d$a+d$c,d$b+d$d),d$e;},d$l._getWrapRec=function(d$a,d$b){if(!d$a||d$a.length<1)return d$b?d$b.setTo(0,0,0,0):d$l.TEMP.setTo(0,0,0,0);d$b=d$b||new d$l();var d$c,d$d,d$e,d$f,d$i,d$j=d$a.length,d$k=d$A.TEMP;for(d$e=d$i=-(d$d=d$f=99999),d$c=0;d$c<d$j;d$c+=2)d$k.x=d$a[d$c],d$k.y=d$a[d$c+1],d$d=d$d<d$k.x?d$d:d$k.x,d$f=d$f<d$k.y?d$f:d$k.y,d$e=d$e>d$k.x?d$e:d$k.x,d$i=d$i>d$k.y?d$i:d$k.y;return d$b.setTo(d$d,d$f,d$e-d$d,d$i-d$f);},d$l.EMPTY=new d$l(),d$l.TEMP=new d$l(),d$l._temB=[],d$l._temA=[],d$l;}(),d$E=function(){function d$k(){}return d$m(d$k,"laya.media.SoundManager"),d$q(1,d$k,"useAudioMusic",function(){return d$k._useAudioMusic;},function(d$a){d$k._useAudioMusic=d$a,d$k._musicClass=d$a?d$ca:null;}),d$q(1,d$k,"autoStopMusic",function(){return d$k._autoStopMusic;},function(d$a){d$z.stage.off("blur",null,d$k._stageOnBlur),d$z.stage.off("focus",null,d$k._stageOnFocus),d$z.stage.off("visibilitychange",null,d$k._visibilityChange),(d$k._autoStopMusic=d$a)&&(d$z.stage.on("blur",null,d$k._stageOnBlur),d$z.stage.on("focus",null,d$k._stageOnFocus),d$z.stage.on("visibilitychange",null,d$k._visibilityChange));}),d$q(1,d$k,"muted",function(){return d$k._muted;},function(d$a){d$a!=d$k._muted&&(d$a&&d$k.stopAllSound(),d$k.musicMuted=d$a,d$k._muted=d$a);}),d$q(1,d$k,"musicMuted",function(){return d$k._musicMuted;},function(d$a){d$a!=d$k._musicMuted&&(d$a?(d$k._tMusic&&d$k._musicChannel&&!d$k._musicChannel.isStopped?d$k._musicChannel.pause():d$k._musicChannel=null,d$k._musicMuted=d$a):(d$k._musicMuted=d$a,d$k._tMusic&&d$k._musicChannel&&d$k._musicChannel.resume()));}),d$q(1,d$k,"soundMuted",function(){return d$k._soundMuted;},function(d$a){d$k._soundMuted=d$a;}),d$k.addChannel=function(d$a){0<=d$k._channels.indexOf(d$a)||(d$k._channels.push(d$a),d$k.autoReleaseSound&&0!=d$k._notUsedCount&&d$k._notUsedUrls[d$a.url]&&(delete d$k._notUsedUrls[d$a.url],0==--d$k._notUsedCount&&d$z.timer.clear(d$k,d$k.disposeSoundIfNotUsed)));},d$k.removeChannel=function(d$a){var d$b=d$k._channels,d$c=d$b.indexOf(d$a);if(-1!=d$c&&(d$b.splice(d$c,1),d$k.autoReleaseSound)){var d$d=d$a.url,d$e=d$k.defaultIntervals[d$d]||2e4;if(0<d$e){var d$f=!0;for(d$c=d$b.length-1;0<=d$c;d$c--)if(d$b[d$c].url==d$d){d$f=!1;break;}d$f&&(d$k._notUsedUrls[d$d]=Date.now()+d$e,0==d$k._notUsedCount++&&d$z.timer.loop(1e4,d$k,d$k.disposeSoundIfNotUsed));}}},d$k.disposeSoundIfNotUsed=function(){var d$a=d$k._notUsedUrls;if(0!=d$k._notUsedCount){var d$b=Date.now();for(var d$c in d$a)d$b>=d$a[d$c]&&(delete d$a[d$c],--d$k._notUsedCount,d$k.destroySound(d$c));if(0!=d$k._notUsedCount)return;}d$z.timer.clear(d$k,d$k.disposeSoundIfNotUsed);},d$k._visibilityChange=function(){d$z.stage.isVisibility?d$k._stageOnFocus():d$k._stageOnBlur();},d$k._stageOnBlur=function(){d$k._isActive=!1,d$k._musicChannel&&(d$k._musicChannel.isStopped||(d$k._blurPaused=!0,d$k._musicChannel.pause())),d$k.stopAllSound(),d$z.stage.once("mousedown",null,d$k._stageOnFocus);},d$k._recoverWebAudio=function(){d$fa.ctx&&"running"!=d$fa.ctx.state&&d$fa.ctx.resume&&d$fa.ctx.resume();},d$k._stageOnFocus=function(){if(d$k._isActive=!0,d$k._recoverWebAudio(),d$z.stage.off("mousedown",null,d$k._stageOnFocus),d$k._blurPaused){var d$a=d$k._musicChannel;d$a&&d$k._music&&d$a.isStopped&&(d$k._blurPaused=!1,d$k._music._disposed?d$k.playMusic(d$a.url,d$a.loops,d$a.startHandler,d$a.completeHandler,d$a.startTime):d$a.audioBuffer?d$a.resume():d$k._music.play(d$a.startTime,d$a.loops,d$a.startHandler,d$a));}},d$k.playSound=function(d$a,d$b,d$c,d$d,d$e,d$f){if(void 0===d$b&&(d$b=1),void 0===d$f&&(d$f=0),!d$a)return null;if(d$k._muted)return null;if(d$k._recoverWebAudio(),d$a==d$k._tMusic){if(d$k._musicMuted)return null;}else{if(!d$k._isActive)return null;if(d$k._soundMuted)return null;}var d$i,d$j=d$k._pool[d$a];return d$e||(d$e=d$k._soundClass),d$j||((d$j=new d$e()).load(d$a),d$k._pool[d$a]=d$j),(d$i=d$j.play(d$f,d$b,d$c))?(d$a==d$k._tMusic&&(d$k._music=d$j,d$k._isActive||(d$k._blurPaused=!0,d$i.pause())),d$i.url=d$a,d$i.volume=d$a==d$k._tMusic?d$k.musicVolume:d$k.soundVolume,d$i.completeHandler=d$d,d$i):null;},d$k.destroySound=function(d$a){var d$b=d$k._pool[d$a];d$b&&(delete d$k._pool[d$a],d$b.dispose());},d$k.playMusic=function(d$a,d$b,d$c,d$d,d$e){return void 0===d$b&&(d$b=0),void 0===d$e&&(d$e=0),d$k._tMusic=d$a,d$k._musicChannel&&d$k._musicChannel.stop(),d$k._musicChannel=d$k.playSound(d$a,d$b,d$c,d$d,null,d$e);},d$k.stopSound=function(d$a){for(var d$b,d$c=d$k._channels.length-1;0<=d$c;d$c--)(d$b=d$k._channels[d$c]).url==d$a&&d$b.stop();},d$k.stopAll=function(){d$k._tMusic=null;var d$a=0;for(d$a=d$k._channels.length-1;0<=d$a;d$a--)d$k._channels[d$a].stop();},d$k.stopAllSound=function(){var d$a,d$b=0;for(d$b=d$k._channels.length-1;0<=d$b;d$b--)(d$a=d$k._channels[d$b]).url!=d$k._tMusic&&d$a.stop();},d$k.stopMusic=function(){d$k._musicChannel&&d$k._musicChannel.stop(),d$k._tMusic=null;},d$k.setSoundVolume=function(d$a,d$b){if(d$b)d$k._setVolume(d$b,d$a);else{d$k.soundVolume=d$a;var d$c,d$d=0;for(d$d=d$k._channels.length-1;0<=d$d;d$d--)(d$c=d$k._channels[d$d]).url!=d$k._tMusic&&(d$c.volume=d$a);}},d$k.setMusicVolume=function(d$a){d$k.musicVolume=d$a,d$k._setVolume(d$k._tMusic,d$a);},d$k._setVolume=function(d$a,d$b){for(var d$c,d$d=d$k._channels.length-1;0<=d$d;d$d--)(d$c=d$k._channels[d$d]).url==d$a&&(d$c.volume=d$b);},d$k.musicVolume=1,d$k.soundVolume=1,d$k.playbackRate=1,d$k._useAudioMusic=!0,d$k._muted=!1,d$k._soundMuted=!1,d$k._musicMuted=!1,d$k._tMusic=null,d$k._musicChannel=null,d$k._music=null,d$k._channels=[],d$k._autoStopMusic=!1,d$k._blurPaused=!1,d$k._isActive=!0,d$k._soundClass=null,d$k._musicClass=null,d$k.autoReleaseSound=!0,d$k._pool={},d$k.defaultIntervals={},d$k._notUsedUrls={},d$k._notUsedCount=0,d$k;}(),d$C=function(){var d$a;function d$c(){}return d$m(d$c,"laya.net.LocalStorage"),d$c.__init__=function(){d$c._baseClass||(d$c._baseClass=d$a).init(),d$c.items=d$c._baseClass.items,d$c.support=d$c._baseClass.support;},d$c.setItem=function(d$a,d$b){d$c._baseClass.setItem(d$a,d$b);},d$c.getItem=function(d$a){return d$c._baseClass.getItem(d$a);},d$c.setJSON=function(d$a,d$b){d$c._baseClass.setJSON(d$a,d$b);},d$c.getJSON=function(d$a){return d$c._baseClass.getJSON(d$a);},d$c.removeItem=function(d$a){d$c._baseClass.removeItem(d$a);},d$c.clear=function(){d$c._baseClass.clear();},d$c._baseClass=null,d$c.items=null,d$c.support=!1,d$c.__init$=function(){d$a=function(){function d$c(){}return d$m(d$c,""),d$c.init=function(){try{d$c.support=!0,d$c.items=d$i.localStorage,d$c.setItem("laya","1"),d$c.removeItem("laya");}catch(d$a){d$c.support=!1;}d$c.support||console.log("LocalStorage is not supprot or browser is private mode.");},d$c.setItem=function(d$a,d$b){try{d$c.support&&d$c.items.setItem(d$a,d$b);}catch(d$a){console.warn("set localStorage failed",d$a);}},d$c.getItem=function(d$a){return d$c.support?d$c.items.getItem(d$a):null;},d$c.setJSON=function(d$a,d$b){try{d$c.support&&d$c.items.setItem(d$a,JSON.stringify(d$b));}catch(d$a){console.warn("set localStorage failed",d$a);}},d$c.getJSON=function(d$a){return JSON.parse(d$c.support?d$c.items.getItem(d$a):null);},d$c.removeItem=function(d$a){d$c.support&&d$c.items.removeItem(d$a);},d$c.clear=function(){d$c.support&&d$c.items.clear();},d$c.items=null,d$c.support=!1,d$c;}();},d$c;}(),d$H=(function(){function d$d(){}d$m(d$d,"laya.net.ResourceVersion"),d$d.enable=function(d$a,d$b,d$c){void 0===d$c&&(d$c=2),laya.net.ResourceVersion.type=d$c,d$z.loader.load(d$a,d$u.create(null,d$d.onManifestLoaded,[d$b]),null,"json"),d$I.customFormat=d$d.addVersionPrefix;},d$d.onManifestLoaded=function(d$a,d$b){d$d.manifest=d$b,d$a.run(),d$b||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。");},d$d.addVersionPrefix=function(d$a){return d$d.manifest&&d$d.manifest[d$a]?2==d$d.type?d$d.manifest[d$a]:d$d.manifest[d$a]+"/"+d$a:d$a;},d$d.FOLDER_VERSION=1,d$d.FILENAME_VERSION=2,d$d.manifest=null,d$d.type=1;}(),function(){function d$a(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null;}d$m(d$a,"laya.net.TTFLoader");var d$b=d$a.prototype;return d$b.load=function(d$a){var d$b=(this._url=d$a).split(".ttf")[0].split("/");this.fontName=d$b[d$b.length-1],d$O.window.conch?this._loadConch():d$O.window.FontFace?this._loadWithFontFace():this._loadWithCSS();},d$b._loadConch=function(){this._http=new d$ia(),this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer");},d$b._onHttpLoaded=function(d$a){d$O.window.conch.setFontFaceFromBuffer(this.fontName,d$a),this._clearHttp(),this._complete();},d$b._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null);},d$b._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null);},d$b._complete=function(){d$z.timer.clear(this,this._complete),d$z.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null);},d$b._checkComplete=function(){d$F.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete();},d$b._loadWithFontFace=function(){var d$a=new d$O.window.FontFace(this.fontName,"url('"+this._url+"')");d$O.window.document.fonts.add(d$a);var d$b=this;d$a.loaded.then(function(){d$b._complete();}),d$a.load();},d$b._createDiv=function(){this._div=d$O.createElement("div"),this._div.innerHTML="laya";var d$a=this._div.style;d$a.fontFamily=this.fontName,d$a.position="absolute",d$a.left="-100px",d$a.top="-100px",d$O.document.body.appendChild(this._div);},d$b._loadWithCSS=function(){var d$a=this,d$b=d$O.createElement("style");d$b.type="text/css",d$O.document.body.appendChild(d$b),d$b.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=d$F.measureText("LayaTTFFont",this._fontTxt).width;var d$c=this;d$b.onload=function(){d$z.timer.once(1e4,d$c,d$a._complete);},d$z.timer.loop(20,this,this._checkComplete),this._createDiv();},d$a._testString="LayaTTFFont",d$a;}()),d$I=function(){function d$d(d$a){this._url=null,this._path=null,this._url=d$d.formatURL(d$a),this._path=d$d.getPath(d$a);}d$m(d$d,"laya.net.URL");var d$a=d$d.prototype;return d$q(0,d$a,"path",function(){return this._path;}),d$q(0,d$a,"url",function(){return this._url;}),d$d.formatURL=function(d$a,d$b){if(!d$a)return"null path";if(0<d$a.indexOf(":"))return d$a;null!=d$d.customFormat&&(d$a=d$d.customFormat(d$a,d$b));var d$c=d$a.charAt(0);if("."===d$c)return d$d.formatRelativePath((d$b||d$d.basePath)+d$a);if("~"===d$c)return d$d.rootPath+d$a.substring(1);if("d"===d$c){if(0===d$a.indexOf("data:image"))return d$a;}else if("/"===d$c)return d$a;return(d$b||d$d.basePath)+d$a;},d$d.formatRelativePath=function(d$a){for(var d$b=d$a.split("/"),d$c=0,d$d=d$b.length;d$c<d$d;d$c++)".."==d$b[d$c]&&(d$b.splice(d$c-1,2),d$c-=2);return d$b.join("/");},d$d.isAbsolute=function(d$a){return 0<d$a.indexOf(":")||"/"==d$a.charAt(0);},d$d.getPath=function(d$a){var d$b=d$a.lastIndexOf("/");return 0<d$b?d$a.substr(0,d$b+1):"";},d$d.getFileName=function(d$a){var d$b=d$a.lastIndexOf("/");return 0<d$b?d$a.substr(d$b+1):d$a;},d$d.version={},d$d.basePath="",d$d.rootPath="",d$d.customFormat=function(d$a){var d$b=d$d.version[d$a];return!d$J.isConchApp&&d$b&&(d$a+="?v="+d$b),d$a;},d$d;}(),d$J=function(){function d$e(d$a,d$b){this._timeId=0;var d$c=d$e._mainCanvas.source.style;d$c.position="absolute",d$c.top=d$c.left="0px",d$c.background="#000000",d$e._mainCanvas.source.id="layaCanvas";var d$d=laya.renders.Render.isWebGL;d$e._mainCanvas.source.width=d$a,d$e._mainCanvas.source.height=d$b,d$d&&d$e.WebGL.init(d$e._mainCanvas,d$a,d$b),d$O.container.appendChild(d$e._mainCanvas.source),(d$e._context=new d$K(d$a,d$b,d$d?null:d$e._mainCanvas)).ctx.setIsMainContext(),d$O.window.requestAnimationFrame(function d$a(d$b){d$O.window.requestAnimationFrame(d$a);d$z.stage._loop();}),d$z.stage.on("visibilitychange",this,this._onVisibilitychange);}d$m(d$e,"laya.renders.Render");var d$a=d$e.prototype;return d$a._onVisibilitychange=function(){d$z.stage.isVisibility?0!=this._timeId&&d$O.window.clearInterval(this._timeId):this._timeId=d$O.window.setInterval(this._enterFrame,1e3);},d$a._enterFrame=function(d$a){d$z.stage._loop();},d$q(1,d$e,"context",function(){return d$e._context;}),d$q(1,d$e,"canvas",function(){return d$e._mainCanvas.source;}),d$e._context=null,d$e._mainCanvas=null,d$e.WebGL=null,d$e.isConchNode=!1,d$e.isConchApp=!1,d$e.isConchWebGL=!1,d$e.isWebGL=!1,d$e.is3DMode=!1,d$e.optimizeTextureMemory=function(d$a,d$b){return!0;},d$e.__init$=function(){d$i.ConchRenderType=d$i.ConchRenderType||1,d$i.ConchRenderType|=d$i.conch?4:0,d$e.isConchNode=5==(5&d$i.ConchRenderType),d$e.isConchApp=4==(4&d$i.ConchRenderType),d$e.isConchWebGL=6==d$i.ConchRenderType;},d$e;}(),d$K=function(){function d$i(d$a,d$b,d$c){this.x=0,this.y=0,this._drawTexture=function(d$a,d$b,d$c){d$c[0].loaded&&this.ctx.drawTexture(d$c[0],d$c[1],d$c[2],d$c[3],d$c[4],d$a,d$b);},this._fillTexture=function(d$a,d$b,d$c){d$c[0].loaded&&this.ctx.fillTexture(d$c[0],d$c[1]+d$a,d$c[2]+d$b,d$c[3],d$c[4],d$c[5],d$c[6],d$c[7]);},this._drawTextureWithTransform=function(d$a,d$b,d$c){d$c[0].loaded&&this.ctx.drawTextureWithTransform(d$c[0],d$c[1],d$c[2],d$c[3],d$c[4],d$c[5],d$a,d$b,d$c[6]);},this._fillQuadrangle=function(d$a,d$b,d$c){this.ctx.fillQuadrangle(d$c[0],d$c[1],d$c[2],d$c[3],d$c[4]);},this._drawRect=function(d$a,d$b,d$c){var d$d=this.ctx;null!=d$c[4]&&(d$d.fillStyle=d$c[4],d$d.fillRect(d$a+d$c[0],d$b+d$c[1],d$c[2],d$c[3],null)),null!=d$c[5]&&(d$d.strokeStyle=d$c[5],d$d.lineWidth=d$c[6],d$d.strokeRect(d$a+d$c[0],d$b+d$c[1],d$c[2],d$c[3],d$c[6]));},this._drawPie=function(d$a,d$b,d$c){var d$d=this.ctx;d$J.isWebGL&&d$d.setPathId(d$c[8]),d$d.beginPath(),d$J.isWebGL?(d$d.movePath(d$c[0]+d$a,d$c[1]+d$b),d$d.moveTo(0,0)):d$d.moveTo(d$a+d$c[0],d$b+d$c[1]),d$d.arc(d$a+d$c[0],d$b+d$c[1],d$c[2],d$c[3],d$c[4]),d$d.closePath(),this._fillAndStroke(d$c[5],d$c[6],d$c[7],!0);},this._clipRect=function(d$a,d$b,d$c){this.ctx.clipRect(d$a+d$c[0],d$b+d$c[1],d$c[2],d$c[3]);},this._fillRect=function(d$a,d$b,d$c){this.ctx.fillRect(d$a+d$c[0],d$b+d$c[1],d$c[2],d$c[3],d$c[4]);},this._drawCircle=function(d$a,d$b,d$c){var d$d=this.ctx;d$J.isWebGL&&d$d.setPathId(d$c[6]),d$X.drawCall++,d$d.beginPath(),d$J.isWebGL&&d$d.movePath(d$c[0]+d$a,d$c[1]+d$b),d$d.arc(d$c[0]+d$a,d$c[1]+d$b,d$c[2],0,d$i.PI2),d$d.closePath(),this._fillAndStroke(d$c[3],d$c[4],d$c[5],!0);},this._fillCircle=function(d$a,d$b,d$c){d$X.drawCall++;var d$d=this.ctx;d$d.beginPath(),d$d.fillStyle=d$c[3],d$d.arc(d$c[0]+d$a,d$c[1]+d$b,d$c[2],0,d$i.PI2),d$d.fill();},this._setShader=function(d$a,d$b,d$c){this.ctx.setShader(d$c[0]);},this._drawLine=function(d$a,d$b,d$c){var d$d=this.ctx;d$J.isWebGL&&d$d.setPathId(d$c[6]),d$d.beginPath(),d$d.strokeStyle=d$c[4],d$d.lineWidth=d$c[5],d$J.isWebGL?(d$d.movePath(d$a,d$b),d$d.moveTo(d$c[0],d$c[1]),d$d.lineTo(d$c[2],d$c[3])):(d$d.moveTo(d$a+d$c[0],d$b+d$c[1]),d$d.lineTo(d$a+d$c[2],d$b+d$c[3])),d$d.stroke();},this._drawLines=function(d$a,d$b,d$c){var d$d=this.ctx;d$J.isWebGL&&d$d.setPathId(d$c[5]),d$d.beginPath(),d$a+=d$c[0],d$b+=d$c[1],d$J.isWebGL&&d$d.movePath(d$a,d$b),d$d.strokeStyle=d$c[3],d$d.lineWidth=d$c[4];var d$e=d$c[2],d$f=2,d$i=d$e.length;if(d$J.isWebGL)for(d$d.moveTo(d$e[0],d$e[1]);d$f<d$i;)d$d.lineTo(d$e[d$f++],d$e[d$f++]);else for(d$d.moveTo(d$a+d$e[0],d$b+d$e[1]);d$f<d$i;)d$d.lineTo(d$a+d$e[d$f++],d$b+d$e[d$f++]);d$d.stroke();},this._drawLinesWebGL=function(d$a,d$b,d$c){this.ctx.drawLines(d$a+this.x+d$c[0],d$b+this.y+d$c[1],d$c[2],d$c[3],d$c[4]);},this._drawCurves=function(d$a,d$b,d$c){this.ctx.drawCurves(d$a,d$b,d$c);},this._draw=function(d$a,d$b,d$c){d$c[0].call(null,this,d$a,d$b);},this._transformByMatrix=function(d$a,d$b,d$c){this.ctx.transformByMatrix(d$c[0]);},this._setTransform=function(d$a,d$b,d$c){this.ctx.setTransform(d$c[0],d$c[1],d$c[2],d$c[3],d$c[4],d$c[5]);},this._setTransformByMatrix=function(d$a,d$b,d$c){this.ctx.setTransformByMatrix(d$c[0]);},this._save=function(d$a,d$b,d$c){this.ctx.save();},this._restore=function(d$a,d$b,d$c){this.ctx.restore();},this._translate=function(d$a,d$b,d$c){this.ctx.translate(d$c[0],d$c[1]);},this._transform=function(d$a,d$b,d$c){this.ctx.translate(d$c[1]+d$a,d$c[2]+d$b);var d$d=d$c[0];this.ctx.transform(d$d.a,d$d.b,d$d.c,d$d.d,d$d.tx,d$d.ty),this.ctx.translate(-d$a-d$c[1],-d$b-d$c[2]);},this._rotate=function(d$a,d$b,d$c){this.ctx.translate(d$c[1]+d$a,d$c[2]+d$b),this.ctx.rotate(d$c[0]),this.ctx.translate(-d$a-d$c[1],-d$b-d$c[2]);},this._scale=function(d$a,d$b,d$c){this.ctx.translate(d$c[2]+d$a,d$c[3]+d$b),this.ctx.scale(d$c[0],d$c[1]),this.ctx.translate(-d$a-d$c[2],-d$b-d$c[3]);},this._alpha=function(d$a,d$b,d$c){this.ctx.globalAlpha*=d$c[0];},this._setAlpha=function(d$a,d$b,d$c){this.ctx.globalAlpha=d$c[0];},this._fillText=function(d$a,d$b,d$c){this.ctx.fillText(d$c[0],d$c[1]+d$a,d$c[2]+d$b,d$c[3],d$c[4],d$c[5]);},this._strokeText=function(d$a,d$b,d$c){this.ctx.strokeText(d$c[0],d$c[1]+d$a,d$c[2]+d$b,d$c[3],d$c[4],d$c[5],d$c[6]);},this._fillBorderText=function(d$a,d$b,d$c){this.ctx.fillBorderText(d$c[0],d$c[1]+d$a,d$c[2]+d$b,d$c[3],d$c[4],d$c[5],d$c[6],d$c[7]);},this._blendMode=function(d$a,d$b,d$c){this.ctx.globalCompositeOperation=d$c[0];},this._beginClip=function(d$a,d$b,d$c){this.ctx.beginClip&&this.ctx.beginClip(d$a+d$c[0],d$b+d$c[1],d$c[2],d$c[3]);},this._setIBVB=function(d$a,d$b,d$c){this.ctx.setIBVB(d$c[0]+d$a,d$c[1]+d$b,d$c[2],d$c[3],d$c[4],d$c[5],d$c[6],d$c[7]);},this._fillTrangles=function(d$a,d$b,d$c){this.ctx.fillTrangles(d$c[0],d$c[1]+d$a,d$c[2]+d$b,d$c[3],d$c[4]);},this._drawPath=function(d$a,d$b,d$c){var d$d=this.ctx;d$J.isWebGL&&d$d.setPathId(-1),d$d.beginPath(),d$a+=d$c[0],d$b+=d$c[1],d$J.isWebGL&&d$d.movePath(d$a,d$b);for(var d$e=d$c[2],d$f=0,d$i=d$e.length;d$f<d$i;d$f++){var d$j=d$e[d$f];switch(d$j[0]){case"moveTo":d$J.isWebGL?d$d.moveTo(d$j[1],d$j[2]):d$d.moveTo(d$a+d$j[1],d$b+d$j[2]);break;case"lineTo":d$J.isWebGL?d$d.lineTo(d$j[1],d$j[2]):d$d.lineTo(d$a+d$j[1],d$b+d$j[2]);break;case"arcTo":d$J.isWebGL?d$d.arcTo(d$j[1],d$j[2],d$j[3],d$j[4],d$j[5]):d$d.arcTo(d$a+d$j[1],d$b+d$j[2],d$a+d$j[3],d$b+d$j[4],d$j[5]);break;case"closePath":d$d.closePath();}}var d$k=d$c[3];null!=d$k&&(d$d.fillStyle=d$k.fillStyle,d$d.fill());var d$l=d$c[4];null!=d$l&&(d$d.strokeStyle=d$l.strokeStyle,d$d.lineWidth=d$l.lineWidth||1,d$d.lineJoin=d$l.lineJoin,d$d.lineCap=d$l.lineCap,d$d.miterLimit=d$l.miterLimit,d$d.stroke());},this.drawPoly=function(d$a,d$b,d$c){this.ctx.drawPoly(d$a+this.x+d$c[0],d$b+this.y+d$c[1],d$c[2],d$c[3],d$c[4],d$c[5],d$c[6]);},this._drawPoly=function(d$a,d$b,d$c){var d$d=this.ctx,d$e=d$c[2],d$f=2,d$i=d$e.length;if(d$J.isWebGL)for(d$d.setPathId(d$c[6]),d$d.beginPath(),d$a+=d$c[0],d$b+=d$c[1],d$d.movePath(d$a,d$b),d$d.moveTo(d$e[0],d$e[1]);d$f<d$i;)d$d.lineTo(d$e[d$f++],d$e[d$f++]);else for(d$d.beginPath(),d$a+=d$c[0],d$b+=d$c[1],d$d.moveTo(d$a+d$e[0],d$b+d$e[1]);d$f<d$i;)d$d.lineTo(d$a+d$e[d$f++],d$b+d$e[d$f++]);d$d.closePath(),this._fillAndStroke(d$c[3],d$c[4],d$c[5],d$c[7]);},this._drawSkin=function(d$a,d$b,d$c){var d$d=d$c[0];if(d$d){var d$e=this.ctx;d$d.render(d$e,d$a,d$b);}},this._drawParticle=function(d$a,d$b,d$c){this.ctx.drawParticle(d$a+this.x,d$b+this.y,d$c[0]);},this._setFilters=function(d$a,d$b,d$c){this.ctx.setFilters(d$c);},d$c?this.ctx=d$c.getContext("2d"):(d$c=d$va.create("3D"),this.ctx=d$F.createWebGLContext2D(d$c),d$c._setContext(this.ctx)),d$c.size(d$a,d$b),this.canvas=d$c;}d$m(d$i,"laya.renders.RenderContext");var d$a=d$i.prototype;return d$a.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null);},d$a.drawTexture=function(d$a,d$b,d$c,d$d,d$e){d$a.loaded&&this.ctx.drawTexture(d$a,d$b,d$c,d$d,d$e,this.x,this.y);},d$a._drawTextures=function(d$a,d$b,d$c){d$c[0].loaded&&this.ctx.drawTextures(d$c[0],d$c[1],d$a+this.x,d$b+this.y);},d$a.drawTextureWithTransform=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){d$a.loaded&&this.ctx.drawTextureWithTransform(d$a,d$b,d$c,d$d,d$e,d$f,this.x,this.y,d$i);},d$a.fillQuadrangle=function(d$a,d$b,d$c,d$d,d$e){this.ctx.fillQuadrangle(d$a,d$b,d$c,d$d,d$e);},d$a.drawCanvas=function(d$a,d$b,d$c,d$d,d$e){this.ctx.drawCanvas(d$a,d$b+this.x,d$c+this.y,d$d,d$e);},d$a.drawRect=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$f&&(d$f=1);var d$i=this.ctx;d$i.strokeStyle=d$e,d$i.lineWidth=d$f,d$i.strokeRect(d$a+this.x,d$b+this.y,d$c,d$d,d$f);},d$a._fillAndStroke=function(d$a,d$b,d$c,d$d){void 0===d$d&&(d$d=!1);var d$e=this.ctx;null!=d$a&&(d$e.fillStyle=d$a,d$J.isWebGL?d$e.fill(d$d):d$e.fill()),null!=d$b&&0<d$c&&(d$e.strokeStyle=d$b,d$e.lineWidth=d$c,d$e.stroke());},d$a.clipRect=function(d$a,d$b,d$c,d$d){this.ctx.clipRect(d$a+this.x,d$b+this.y,d$c,d$d);},d$a.fillRect=function(d$a,d$b,d$c,d$d,d$e){this.ctx.fillRect(d$a+this.x,d$b+this.y,d$c,d$d,d$e);},d$a.drawCircle=function(d$a,d$b,d$c,d$d,d$e){void 0===d$e&&(d$e=1),d$X.drawCall++;var d$f=this.ctx;d$f.beginPath(),d$f.strokeStyle=d$d,d$f.lineWidth=d$e,d$f.arc(d$a+this.x,d$b+this.y,d$c,0,d$i.PI2),d$f.stroke();},d$a.drawTriangles=function(d$a,d$b,d$c){if(d$J.isWebGL)this.ctx.drawTriangles(d$c[0],d$a+d$c[1],d$b+d$c[2],d$c[3],d$c[4],d$c[5],d$c[6],d$c[7],d$c[8],d$c[9]);else{var d$d=d$c[5],d$e=0,d$f=d$d.length,d$i=this.ctx;for(d$e=0;d$e<d$f;d$e+=3){var d$j=2*d$d[d$e],d$k=2*d$d[d$e+1],d$l=2*d$d[d$e+2];d$i.drawTriangle(d$c[0],d$c[3],d$c[4],d$j,d$k,d$l,d$c[6],!0);}}},d$a.fillCircle=function(d$a,d$b,d$c,d$d){d$X.drawCall++;var d$e=this.ctx;d$e.beginPath(),d$e.fillStyle=d$d,d$e.arc(d$a+this.x,d$b+this.y,d$c,0,d$i.PI2),d$e.fill();},d$a.setShader=function(d$a){this.ctx.setShader(d$a);},d$a.drawLine=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$f&&(d$f=1);var d$i=this.ctx;d$i.beginPath(),d$i.strokeStyle=d$e,d$i.lineWidth=d$f,d$i.moveTo(this.x+d$a,this.y+d$b),d$i.lineTo(this.x+d$c,this.y+d$d),d$i.stroke();},d$a.clear=function(){this.ctx.clear();},d$a.transformByMatrix=function(d$a){this.ctx.transformByMatrix(d$a);},d$a.setTransform=function(d$a,d$b,d$c,d$d,d$e,d$f){this.ctx.setTransform(d$a,d$b,d$c,d$d,d$e,d$f);},d$a.setTransformByMatrix=function(d$a){this.ctx.setTransformByMatrix(d$a);},d$a.save=function(){this.ctx.save();},d$a.restore=function(){this.ctx.restore();},d$a.translate=function(d$a,d$b){this.ctx.translate(d$a,d$b);},d$a.transform=function(d$a,d$b,d$c,d$d,d$e,d$f){this.ctx.transform(d$a,d$b,d$c,d$d,d$e,d$f);},d$a.rotate=function(d$a){this.ctx.rotate(d$a);},d$a.scale=function(d$a,d$b){this.ctx.scale(d$a,d$b);},d$a.alpha=function(d$a){this.ctx.globalAlpha*=d$a;},d$a.setAlpha=function(d$a){this.ctx.globalAlpha=d$a;},d$a.fillWords=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$f&&(d$f=0),this.ctx.fillWords(d$a,d$b,d$c,d$d,d$e,d$f);},d$a.fillBorderWords=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this.ctx.fillBorderWords(d$a,d$b,d$c,d$d,d$e,d$f,d$i);},d$a.fillText=function(d$a,d$b,d$c,d$d,d$e,d$f){this.ctx.fillText(d$a,d$b+this.x,d$c+this.y,d$d,d$e,d$f);},d$a.strokeText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this.ctx.strokeText(d$a,d$b+this.x,d$c+this.y,d$d,d$e,d$f,d$i);},d$a.blendMode=function(d$a){this.ctx.globalCompositeOperation=d$a;},d$a.flush=function(){this.ctx.flush&&this.ctx.flush();},d$a.addRenderObject=function(d$a){this.ctx.addRenderObject(d$a);},d$a.beginClip=function(d$a,d$b,d$c,d$d){this.ctx.beginClip&&this.ctx.beginClip(d$a,d$b,d$c,d$d);},d$a.endClip=function(){this.ctx.endClip&&this.ctx.endClip();},d$a.fillTrangles=function(d$a,d$b,d$c){this.ctx.fillTrangles(d$c[0],d$c[1],d$c[2],d$c[3],4<d$c.length?d$c[4]:null);},d$i.PI2=2*Math.PI,d$i;}(),d$L=function(){function d$i(d$a,d$b){switch(this._next=d$b||d$i.NORENDER,d$a){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=d$t._filter);case 69905:return void(this._fun=d$i._initRenderFun);}this.onCreate(d$a);}d$m(d$i,"laya.renders.RenderSprite");var d$a=d$i.prototype;return d$a.onCreate=function(d$a){},d$a._style=function(d$a,d$b,d$c,d$d){d$a._style.render(d$a,d$b,d$c,d$d);var d$e=this._next;d$e._fun.call(d$e,d$a,d$b,d$c,d$d);},d$a._no=function(d$a,d$b,d$c,d$d){},d$a._custom=function(d$a,d$b,d$c,d$d){d$a.customRender(d$b,d$c,d$d);var d$e=d$a._style._tf;this._next._fun.call(this._next,d$a,d$b,d$c-d$e.translateX,d$d-d$e.translateY);},d$a._clip=function(d$a,d$b,d$c,d$d){var d$e=this._next;if(d$e!=d$i.NORENDER){var d$f=d$a._style.scrollRect;d$b.ctx.save(),d$b.ctx.clipRect(d$c,d$d,d$f.width,d$f.height),d$e._fun.call(d$e,d$a,d$b,d$c-d$f.x,d$d-d$f.y),d$b.ctx.restore();}},d$a._blend=function(d$a,d$b,d$c,d$d){var d$e=d$a._style;d$e.blendMode&&(d$b.ctx.globalCompositeOperation=d$e.blendMode);var d$f=this._next;d$f._fun.call(d$f,d$a,d$b,d$c,d$d),d$b.ctx.globalCompositeOperation="source-over";},d$a._mask=function(d$a,d$b,d$c,d$d){var d$e=this._next;d$e._fun.call(d$e,d$a,d$b,d$c,d$d);var d$f=d$a.mask;d$f&&(d$b.ctx.globalCompositeOperation="destination-in",(0<d$f.numChildren||!d$f.graphics._isOnlyOne())&&(d$f.cacheAsBitmap=!0),d$f.render(d$b,d$c-d$a.pivotX,d$d-d$a.pivotY)),d$b.ctx.globalCompositeOperation="source-over";},d$a._graphics=function(d$a,d$b,d$c,d$d){var d$e=d$a._style._tf;d$a._graphics&&d$a._graphics._render(d$a,d$b,d$c-d$e.translateX,d$d-d$e.translateY);var d$f=this._next;d$f._fun.call(d$f,d$a,d$b,d$c,d$d);},d$a._image=function(d$a,d$b,d$c,d$d){var d$e=d$a._style;d$b.ctx.drawTexture2(d$c,d$d,d$e._tf.translateX,d$e._tf.translateY,d$a.transform,d$e.alpha,d$e.blendMode,d$a._graphics._one);},d$a._image2=function(d$a,d$b,d$c,d$d){var d$e=d$a._style._tf;d$b.ctx.drawTexture2(d$c,d$d,d$e.translateX,d$e.translateY,d$a.transform,1,null,d$a._graphics._one);},d$a._alpha=function(d$a,d$b,d$c,d$d){var d$e;if(.01<(d$e=d$a._style.alpha)||d$a._needRepaint()){var d$f=d$b.ctx.globalAlpha;d$b.ctx.globalAlpha*=d$e;var d$i=this._next;d$i._fun.call(d$i,d$a,d$b,d$c,d$d),d$b.ctx.globalAlpha=d$f;}},d$a._transform=function(d$a,d$b,d$c,d$d){var d$e=d$a.transform,d$f=this._next;d$e&&d$f!=d$i.NORENDER?(d$b.save(),d$b.transform(d$e.a,d$e.b,d$e.c,d$e.d,d$e.tx+d$c,d$e.ty+d$d),d$f._fun.call(d$f,d$a,d$b,0,0),d$b.restore()):d$f._fun.call(d$f,d$a,d$b,d$c,d$d);},d$a._childs=function(d$a,d$b,d$c,d$d){var d$e=d$a._style,d$f=d$e._tf;if(d$c=d$c-d$f.translateX+d$e.paddingLeft,d$d=d$d-d$f.translateY+d$e.paddingTop,d$e._calculation){var d$i=d$a._getWords();if(d$i){var d$j=d$e;d$j&&(d$j.stroke?d$b.fillBorderWords(d$i,d$c,d$d,d$j.font,d$j.color,d$j.strokeColor,d$j.stroke):d$b.fillWords(d$i,d$c,d$d,d$j.font,d$j.color,"none"!=d$j.textDecoration&&d$j.underLine?1:0));}}var d$k,d$l=d$a._childs,d$m=d$l.length;if(d$a.viewport||d$a.optimizeScrollRect&&d$a._style.scrollRect){var d$n=d$a.viewport||d$a._style.scrollRect,d$o=d$n.x,d$p=d$n.y,d$q=d$n.right,d$r=d$n.bottom,d$s=NaN,d$t=NaN;for(d$u=0;d$u<d$m;++d$u)(d$k=d$l[d$u]).visible&&(d$s=d$k._x)<d$q&&d$s+d$k.width>d$o&&(d$t=d$k._y)<d$r&&d$t+d$k.height>d$p&&d$k.render(d$b,d$c,d$d);}else for(var d$u=0;d$u<d$m;++d$u)(d$k=d$l[d$u])._style.visible&&d$k.render(d$b,d$c,d$d);},d$a._canvas=function(d$a,d$b,d$c,d$d){var d$e=d$a._$P.cacheCanvas;if(d$e){"bitmap"===d$e.type?d$X.canvasBitmap++:d$X.canvasNormal++;var d$f=d$e.ctx;if(d$a._needRepaint()||!d$f)this._canvas_repaint(d$a,d$b,d$c,d$d);else{var d$i=d$e._cacheRec;d$b.drawCanvas(d$f.canvas,d$c+d$i.x,d$d+d$i.y,d$i.width,d$i.height);}}else this._next._fun.call(this._next,d$a,d$b,d$c,d$d);},d$a._canvas_repaint=function(d$a,d$b,d$c,d$d){var d$e=d$a._$P.cacheCanvas,d$f=this._next;if(d$e){var d$i,d$j,d$k,d$l,d$m=d$e.ctx,d$n=d$a._needRepaint()||!d$m,d$o=d$e.type;if("bitmap"===d$o?d$X.canvasBitmap++:d$X.canvasNormal++,d$n){var d$p,d$q;d$e._cacheRec||(d$e._cacheRec=new d$B()),d$J.isWebGL&&"bitmap"!==d$o?d$e._cacheRec.setTo(-d$a.pivotX,-d$a.pivotY,1,1):((d$l=d$a.getSelfBounds()).x=d$l.x-d$a.pivotX,d$l.y=d$l.y-d$a.pivotY,d$l.x=d$l.x-16,d$l.y=d$l.y-16,d$l.width=d$l.width+32,d$l.height=d$l.height+32,d$l.x=Math.floor(d$l.x+d$c)-d$c,d$l.y=Math.floor(d$l.y+d$d)-d$d,d$l.width=Math.floor(d$l.width),d$l.height=Math.floor(d$l.height),d$e._cacheRec.copyFrom(d$l)),d$l=d$e._cacheRec;var d$r,d$s=d$J.isWebGL?1:d$O.pixelRatio*d$z.stage.clientScaleX,d$t=d$J.isWebGL?1:d$O.pixelRatio*d$z.stage.clientScaleY;if(!d$J.isWebGL){var d$u,d$v=1,d$w=1;for(d$u=d$a;d$u&&d$u!=d$z.stage;)d$v*=d$u.scaleX,d$w*=d$u.scaleY,d$u=d$u.parent;d$J.isWebGL?(d$v<1&&(d$s*=d$v),d$w<1&&(d$t*=d$w)):(1<d$v&&(d$s*=d$v),1<d$w&&(d$t*=d$w));}if(d$a.scrollRect){var d$x=d$a.scrollRect;d$l.x-=d$x.x,d$l.y-=d$x.y;}if(d$p=d$l.width*d$s,d$q=d$l.height*d$t,d$j=d$l.x,d$k=d$l.y,d$J.isWebGL&&"bitmap"===d$o&&(2048<d$p||2048<d$q))return console.warn("cache bitmap size larger than 2048,cache ignored"),d$e.ctx&&(d$W.recover("RenderContext",d$e.ctx),d$e.ctx.canvas.size(0,0),d$e.ctx=null),void d$f._fun.call(d$f,d$a,d$b,d$c,d$d);if(d$m||(d$m=d$e.ctx=d$W.getItem("RenderContext")||new d$K(d$p,d$q,d$va.create("AUTO"))),d$m.ctx.sprite=d$a,(d$i=d$m.canvas).clear(),(d$i.width!=d$p||d$i.height!=d$q)&&d$i.size(d$p,d$q),"bitmap"===d$o?d$i.context.asBitmap=!0:"normal"===d$o&&(d$i.context.asBitmap=!1),1!=d$s||1!=d$t){var d$y=d$m.ctx;d$y.save(),d$y.scale(d$s,d$t),!d$J.isConchWebGL&&d$J.isConchApp&&(d$r=d$a._$P.cf)&&d$y.setFilterMatrix&&d$y.setFilterMatrix(d$r._mat,d$r._alpha),d$f._fun.call(d$f,d$a,d$m,-d$j,-d$k),d$y.restore(),d$J.isConchApp&&!d$J.isConchWebGL||d$a._applyFilters();}else d$y=d$m.ctx,!d$J.isConchWebGL&&d$J.isConchApp&&(d$r=d$a._$P.cf)&&d$y.setFilterMatrix&&d$y.setFilterMatrix(d$r._mat,d$r._alpha),d$f._fun.call(d$f,d$a,d$m,-d$j,-d$k),d$J.isConchApp&&!d$J.isConchWebGL||d$a._applyFilters();d$a._$P.staticCache&&(d$e.reCache=!1),d$X.canvasReCache++;}else d$j=(d$l=d$e._cacheRec).x,d$k=d$l.y,d$i=d$m.canvas;d$b.drawCanvas(d$i,d$c+d$j,d$d+d$k,d$l.width,d$l.height);}else d$f._fun.call(d$f,d$a,d$m,d$c,d$d);},d$i.__init__=function(){var d$a,d$b,d$c=0;for(d$b=d$F.createRenderSprite(69905,null),d$a=d$i.renders.length=4096,d$c=0;d$c<d$a;d$c++)d$i.renders[d$c]=d$b;d$i.renders[0]=d$F.createRenderSprite(0,null),function(d$a,d$b){for(var d$c=0,d$d=0;d$d<d$a.length;d$d++)d$c|=d$a[d$d],d$i.renders[d$c]=d$b;}([1,512,4,2],new d$i(1,null)),d$i.renders[513]=d$F.createRenderSprite(513,null),d$i.renders[517]=new d$i(517,null);},d$i._initRenderFun=function(d$a,d$b,d$c,d$d){var d$e=d$a._renderType;(d$i.renders[d$e]=d$i._getTypeRender(d$e))._fun(d$a,d$b,d$c,d$d);},d$i._getTypeRender=function(d$a){for(var d$b=null,d$c=2048;1<d$c;)d$c&d$a&&(d$b=d$F.createRenderSprite(d$c,d$b)),d$c>>=1;return d$b;},d$i.IMAGE=1,d$i.ALPHA=2,d$i.TRANSFORM=4,d$i.BLEND=8,d$i.CANVAS=16,d$i.FILTERS=32,d$i.MASK=64,d$i.CLIP=128,d$i.STYLE=256,d$i.GRAPHICS=512,d$i.CUSTOM=1024,d$i.CHILDS=2048,d$i.INIT=69905,d$i.renders=[],d$i.NORENDER=new d$i(0,null),d$i;}(),d$M=function(){function d$j(){this._repaint=!1;}d$m(d$j,"laya.resource.Context");var d$a=d$j.prototype;return d$a.replaceReset=function(){var d$a,d$b,d$c=0;for(d$a=d$j.replaceKeys.length,d$c=0;d$c<d$a;d$c++)d$b=d$j.replaceKeys[d$c],this[d$j.newKeys[d$c]]=this[d$b];},d$a.replaceResotre=function(){this.__restore(),this.__reset();},d$a.setIsMainContext=function(){},d$a.drawTextures=function(d$a,d$b,d$c,d$d){d$X.drawCall+=d$b.length/2;for(var d$e=d$a.width,d$f=d$a.height,d$i=0,d$j=d$b.length;d$i<d$j;d$i+=2)this.drawTexture(d$a,d$b[d$i],d$b[d$i+1],d$e,d$f,d$c,d$d);},d$a.drawCanvas=function(d$a,d$b,d$c,d$d,d$e){d$X.drawCall++,this.drawImage(d$a.source,d$b,d$c,d$d,d$e);},d$a.fillRect=function(d$a,d$b,d$c,d$d,d$e){d$X.drawCall++,d$e&&(this.fillStyle=d$e),this.__fillRect(d$a,d$b,d$c,d$d);},d$a.fillText=function(d$a,d$b,d$c,d$d,d$e,d$f){d$X.drawCall++,3<arguments.length&&null!=d$d&&(this.font=d$d,this.fillStyle=d$e,this.textAlign=d$f,this.textBaseline="top"),this.__fillText(d$a,d$b,d$c);},d$a.fillBorderText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){d$X.drawCall++,this.font=d$d,this.fillStyle=d$e,this.textBaseline="top",this.strokeStyle=d$f,this.lineWidth=d$i,this.textAlign=d$j,this.__strokeText(d$a,d$b,d$c),this.__fillText(d$a,d$b,d$c);},d$a.strokeText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){d$X.drawCall++,3<arguments.length&&null!=d$d&&(this.font=d$d,this.strokeStyle=d$e,this.lineWidth=d$f,this.textAlign=d$i,this.textBaseline="top"),this.__strokeText(d$a,d$b,d$c);},d$a.transformByMatrix=function(d$a){this.transform(d$a.a,d$a.b,d$a.c,d$a.d,d$a.tx,d$a.ty);},d$a.setTransformByMatrix=function(d$a){this.setTransform(d$a.a,d$a.b,d$a.c,d$a.d,d$a.tx,d$a.ty);},d$a.clipRect=function(d$a,d$b,d$c,d$d){d$X.drawCall++,this.beginPath(),this.rect(d$a,d$b,d$c,d$d),this.clip();},d$a.drawTexture=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){d$X.drawCall++;var d$j=d$a.uv,d$k=d$a.bitmap.width,d$l=d$a.bitmap.height;this.drawImage(d$a.source,d$j[0]*d$k,d$j[1]*d$l,(d$j[2]-d$j[0])*d$k,(d$j[5]-d$j[3])*d$l,d$b+d$f,d$c+d$i,d$d,d$e);},d$a.drawTextureWithTransform=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){d$X.drawCall++;var d$l=d$a.uv,d$m=d$a.bitmap.width,d$n=d$a.bitmap.height;this.save(),1!=d$k&&(this.globalAlpha*=d$k),d$f?(this.transform(d$f.a,d$f.b,d$f.c,d$f.d,d$f.tx+d$i,d$f.ty+d$j),this.drawImage(d$a.source,d$l[0]*d$m,d$l[1]*d$n,(d$l[2]-d$l[0])*d$m,(d$l[5]-d$l[3])*d$n,d$b,d$c,d$d,d$e)):this.drawImage(d$a.source,d$l[0]*d$m,d$l[1]*d$n,(d$l[2]-d$l[0])*d$m,(d$l[5]-d$l[3])*d$n,d$b+d$i,d$c+d$j,d$d,d$e),this.restore();},d$a.drawTexture2=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){var d$k=d$j[0];if(d$k.loaded&&d$k.bitmap&&d$k.source){d$X.drawCall++;var d$l=1!==d$f;if(d$l){var d$m=this.globalAlpha;this.globalAlpha*=d$f;}var d$n=d$k.uv,d$o=d$k.bitmap.width,d$p=d$k.bitmap.height;d$e?(this.save(),this.transform(d$e.a,d$e.b,d$e.c,d$e.d,d$e.tx+d$a,d$e.ty+d$b),this.drawImage(d$k.source,d$n[0]*d$o,d$n[1]*d$p,(d$n[2]-d$n[0])*d$o,(d$n[5]-d$n[3])*d$p,d$j[1]-d$c,d$j[2]-d$d,d$j[3],d$j[4]),this.restore()):this.drawImage(d$k.source,d$n[0]*d$o,d$n[1]*d$p,(d$n[2]-d$n[0])*d$o,(d$n[5]-d$n[3])*d$p,d$j[1]-d$c+d$a,d$j[2]-d$d+d$b,d$j[3],d$j[4]),d$l&&(this.globalAlpha=d$m);}},d$a.fillTexture=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){if(!d$j.pat){if(d$a.uv!=d$ma.DEF_UV){var d$k=new d$va("2D");d$k.getContext("2d"),d$k.size(d$a.width,d$a.height),d$k.context.drawTexture(d$a,0,0,d$a.width,d$a.height,0,0),d$a=new d$ma(d$k);}d$j.pat=this.createPattern(d$a.bitmap.source,d$f);}var d$l=d$b,d$m=d$c,d$n=0,d$o=0;d$i&&(d$l+=d$i.x%d$a.width,d$m+=d$i.y%d$a.height,d$n-=d$i.x%d$a.width,d$o-=d$i.y%d$a.height),this.translate(d$l,d$m),this.fillRect(d$n,d$o,d$d,d$e,d$j.pat),this.translate(-d$l,-d$m);},d$a.drawTriangle=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){var d$k=d$a.bitmap,d$l=d$k.source,d$m=d$a.width,d$n=d$a.height,d$o=d$k.width,d$p=d$k.height,d$q=d$c[d$d]*d$o,d$r=d$c[d$e]*d$o,d$s=d$c[d$f]*d$o,d$t=d$c[d$d+1]*d$p,d$u=d$c[d$e+1]*d$p,d$v=d$c[d$f+1]*d$p,d$w=d$b[d$d],d$x=d$b[d$e],d$y=d$b[d$f],d$z=d$b[d$d+1],d$A=d$b[d$e+1],d$B=d$b[d$f+1];if(d$j){var d$C=(d$w+d$x+d$y)/3,d$D=(d$z+d$A+d$B)/3,d$E=d$w-d$C,d$F=d$z-d$D,d$G=Math.sqrt(d$E*d$E+d$F*d$F);d$w=d$C+d$E/d$G*(d$G+1),d$z=d$D+d$F/d$G*(d$G+1),d$F=d$A-d$D,d$x=d$C+(d$E=d$x-d$C)/(d$G=Math.sqrt(d$E*d$E+d$F*d$F))*(d$G+1),d$A=d$D+d$F/d$G*(d$G+1),d$F=d$B-d$D,d$y=d$C+(d$E=d$y-d$C)/(d$G=Math.sqrt(d$E*d$E+d$F*d$F))*(d$G+1),d$B=d$D+d$F/d$G*(d$G+1);}this.save(),d$i&&this.transform(d$i.a,d$i.b,d$i.c,d$i.d,d$i.tx,d$i.ty),this.beginPath(),this.moveTo(d$w,d$z),this.lineTo(d$x,d$A),this.lineTo(d$y,d$B),this.closePath(),this.clip();var d$H=1/(d$q*d$u+d$t*d$s+d$r*d$v-d$u*d$s-d$t*d$r-d$q*d$v),d$I=d$w*d$u+d$t*d$y+d$x*d$v-d$u*d$y-d$t*d$x-d$w*d$v,d$J=d$q*d$x+d$w*d$s+d$r*d$y-d$x*d$s-d$w*d$r-d$q*d$y,d$K=d$q*d$u*d$y+d$t*d$x*d$s+d$w*d$r*d$v-d$w*d$u*d$s-d$t*d$r*d$y-d$q*d$x*d$v,d$L=d$z*d$u+d$t*d$B+d$A*d$v-d$u*d$B-d$t*d$A-d$z*d$v,d$M=d$q*d$A+d$z*d$s+d$r*d$B-d$A*d$s-d$z*d$r-d$q*d$B,d$N=d$q*d$u*d$B+d$t*d$A*d$s+d$z*d$r*d$v-d$z*d$u*d$s-d$t*d$r*d$B-d$q*d$A*d$v;this.transform(d$I*d$H,d$L*d$H,d$J*d$H,d$M*d$H,d$K*d$H,d$N*d$H),this.drawImage(d$l,d$a.uv[0]*d$o,d$a.uv[1]*d$p,d$m,d$n,d$a.uv[0]*d$o,d$a.uv[1]*d$p,d$m,d$n),this.restore();},d$a.flush=function(){return 0;},d$a.fillWords=function(d$a,d$b,d$c,d$d,d$e,d$f){d$d&&(this.font=d$d),d$e&&(this.fillStyle=d$e);this.textBaseline="top",this.textAlign="left";for(var d$i=0,d$j=d$a.length;d$i<d$j;d$i++){var d$k=d$a[d$i];if(this.__fillText(d$k.char,d$k.x+d$b,d$k.y+d$c),1===d$f){var d$l=d$k.height,d$m=.5*d$k.style.letterSpacing;d$m||(d$m=0),this.beginPath(),this.strokeStyle=d$e,this.lineWidth=1,this.moveTo(d$b+d$k.x-d$m+.5,d$c+d$k.y+d$l+.5),this.lineTo(d$b+d$k.x+d$k.width+d$m+.5,d$c+d$k.y+d$l+.5),this.stroke();}}},d$a.fillBorderWords=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){d$d&&(this.font=d$d),d$e&&(this.fillStyle=d$e),this.textBaseline="top",this.lineWidth=d$i,this.textAlign="left",this.strokeStyle=d$f;for(var d$j=0,d$k=d$a.length;d$j<d$k;d$j++){var d$l=d$a[d$j];this.__strokeText(d$l.char,d$l.x+d$b,d$l.y+d$c),this.__fillText(d$l.char,d$l.x+d$b,d$l.y+d$c);}},d$a.destroy=function(){this.canvas.width=this.canvas.height=0;},d$a.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1;},d$a.drawCurves=function(d$a,d$b,d$c){this.beginPath(),this.strokeStyle=d$c[3],this.lineWidth=d$c[4];var d$d=d$c[2];d$a+=d$c[0],d$b+=d$c[1],this.moveTo(d$a+d$d[0],d$b+d$d[1]);for(var d$e=2,d$f=d$d.length;d$e<d$f;)this.quadraticCurveTo(d$a+d$d[d$e++],d$b+d$d[d$e++],d$a+d$d[d$e++],d$b+d$d[d$e++]);this.stroke();},d$j.__init__=function(d$b){var d$c=laya.resource.Context.prototype;if(!(d$b=d$b||CanvasRenderingContext2D.prototype).inited){d$b.inited=!0,d$b.__fillText=d$b.fillText,d$b.__fillRect=d$b.fillRect,d$b.__strokeText=d$b.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(d$a){d$b[d$a]=d$c[d$a];});}},d$j.replaceCanvasGetSet=function(d$a,d$b){var d$c=Object.getOwnPropertyDescriptor(d$a,d$b);if(!d$c||!d$c.configurable)return!1;var d$d,d$e={};for(d$d in d$c)"set"!=d$d&&(d$e[d$d]=d$c[d$d]);var d$f=d$c.set;return d$e.set=function(d$a){d$f.call(this,d$a);var d$b=this.getContext("2d");d$b&&"__reset"in d$b&&d$b.__reset();},Object.defineProperty(d$a,d$b,d$e),!0;},d$j.replaceGetSet=function(d$a,d$b){var d$c=Object.getOwnPropertyDescriptor(d$a,d$b);if(!d$c||!d$c.configurable)return!1;var d$d,d$e={};for(d$d in d$c)"set"!=d$d&&(d$e[d$d]=d$c[d$d]);var d$f=d$c.set,d$i="___"+d$b+"__";return d$j.newKeys.push(d$i),d$e.set=function(d$a){d$a!=this[d$i]&&(this[d$i]=d$a,d$f.call(this,d$a));},Object.defineProperty(d$a,d$b,d$e),!0;},d$j._default=new d$j(),d$j.newKeys=[],d$k(d$j,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"];}]),d$j;}(),d$N=function(){function d$f(d$a){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++d$f._uniqueIDCounter,this._name=d$a||"Content Manager",d$f._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,d$f._resourceManagers.push(this),this._resources=[],this._records={};}d$m(d$f,"laya.resource.ResourceManager");var d$a=d$f.prototype;return d$z.imps(d$a,{"laya.resource.IDispose":!0}),d$a.getResourceByIndex=function(d$a){return this._resources[d$a];},d$a.getResourcesLength=function(){return this._resources.length;},d$a.addResource=function(d$a){return d$a.resourceManager&&d$a.resourceManager.removeResource(d$a),-1===this._resources.indexOf(d$a)&&((d$a._resourceManager=this)._resources.push(d$a),this.addRecord(d$a.uri,d$a.__className,d$a.memorySize),this.addSize(d$a.memorySize),!0);},d$a.removeResource=function(d$a){var d$b=this._resources.indexOf(d$a);return-1!==d$b&&(this._resources.splice(d$b,1),d$a._resourceManager=null,this._memorySize-=d$a.memorySize,this.addRecord(d$a.uri,d$a.__className,-d$a.memorySize),!0);},d$a.unload=function(){for(var d$a=this._resources.slice(0,this._resources.length),d$b=0;d$b<d$a.length;d$b++){d$a[d$b].destroy();}d$a.length=0;},d$a.dispose=function(){if(this===d$f._systemResourceManager)throw new Error("systemResourceManager不能被释放！");d$f._resourceManagers.splice(d$f._resourceManagers.indexOf(this),1),d$f._isResourceManagersSorted=!1;for(var d$a=this._resources.slice(0,this._resources.length),d$b=0;d$b<d$a.length;d$b++){var d$c=d$a[d$b];d$c.resourceManager.removeResource(d$c),d$c.destroy();}d$a.length=0;},d$a.addSize=function(d$a){d$a&&(this.autoRelease&&0<d$a&&this._memorySize+d$a>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=d$a);},d$a.addRecord=function(d$a,d$b,d$c){DEBUG&&d$c&&!d$a&&console.error(d$a,d$b,d$c);},d$a.garbageCollection=function(d$a){var d$b=this._resources;(d$b=d$b.slice()).sort(function(d$a,d$b){if(!d$a||!d$b)throw new Error("a或b不能为空！");return d$a.released&&d$b.released?0:d$a.released?1:d$b.released?-1:d$a._lastUseFrameCount-d$b._lastUseFrameCount;});for(var d$c=d$X.loopCount,d$d=0,d$e=d$b.length;d$d<d$e;d$d++){var d$f=d$b[d$d];if(!(1<d$c-d$f._lastUseFrameCount))return void(this._memorySize>=d$a&&(this._isOverflow=!0));if(d$f.releaseResource(),this._memorySize<d$a)return void(this._isOverflow=!1);}},d$q(0,d$a,"id",function(){return this._id;}),d$q(0,d$a,"name",function(){return this._name;},function(d$a){!d$a&&""===d$a||this._name===d$a||(this._name=d$a,d$f._isResourceManagersSorted=!1);}),d$q(0,d$a,"memorySize",function(){return this._memorySize;}),d$q(0,d$a,"records",function(){return this._records;}),d$q(1,d$f,"systemResourceManager",function(){return d$f._systemResourceManager;}),d$f.__init__=function(){d$f.currentResourceManager=d$f.systemResourceManager;},d$f.getLoadedResourceManagerByIndex=function(d$a){return d$f._resourceManagers[d$a];},d$f.getLoadedResourceManagersCount=function(){return d$f._resourceManagers.length;},d$f.recreateContentManagers=function(d$a){void 0===d$a&&(d$a=!1);for(var d$b=d$f.currentResourceManager,d$c=0;d$c<d$f._resourceManagers.length;d$c++){d$f.currentResourceManager=d$f._resourceManagers[d$c];for(var d$d=0;d$d<d$f.currentResourceManager._resources.length;d$d++)d$f.currentResourceManager._resources[d$d].releaseResource(d$a),d$f.currentResourceManager._resources[d$d].activeResource(d$a);}d$f.currentResourceManager=d$b;},d$f.releaseContentManagers=function(d$a){void 0===d$a&&(d$a=!1);for(var d$b=d$f.currentResourceManager,d$c=0;d$c<d$f._resourceManagers.length;d$c++){d$f.currentResourceManager=d$f._resourceManagers[d$c];for(var d$d=0;d$d<d$f.currentResourceManager._resources.length;d$d++){var d$e=d$f.currentResourceManager._resources[d$d];!d$e.released&&d$e.releaseResource(d$a);}}d$f.currentResourceManager=d$b;},d$f._uniqueIDCounter=0,d$f._isResourceManagersSorted=!1,d$f._resourceManagers=[],d$k(d$f,["_systemResourceManager",function(){return this._systemResourceManager=new d$f("System Resource Manager");},"currentResourceManager",function(){return this.currentResourceManager=d$f._systemResourceManager;}]),d$f;}(),d$O=(function(){function d$a(){}d$m(d$a,"laya.system.System"),d$a.changeDefinition=function(d$a,d$b){d$z[d$a]=d$b;var d$c=d$a+"=classObj";d$z._runScript(d$c);},d$a.__init__=function(){d$J.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice());};}(),function(){function d$c(){}return d$m(d$c,"laya.utils.Browser"),d$q(1,d$c,"pixelRatio",function(){return d$c.__init__(),-1<d$c.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:d$F.getPixelRatio();}),d$q(1,d$c,"height",function(){return d$c.__init__(),(d$z.stage&&d$z.stage.canvasRotation?d$c.clientWidth:d$c.clientHeight)*d$c.pixelRatio;}),d$q(1,d$c,"clientWidth",function(){return d$c.__init__(),d$c.window.innerWidth||d$c.document.body.clientWidth;}),d$q(1,d$c,"window",function(){return d$c.__init__(),d$c._window;}),d$q(1,d$c,"clientHeight",function(){return d$c.__init__(),d$c.window.innerHeight||d$c.document.body.clientHeight||d$c.document.documentElement.clientHeight;}),d$q(1,d$c,"width",function(){return d$c.__init__(),(d$z.stage&&d$z.stage.canvasRotation?d$c.clientHeight:d$c.clientWidth)*d$c.pixelRatio;}),d$q(1,d$c,"container",function(){return d$c.__init__(),d$c._container||((d$c._container=d$c.createElement("div")).id="layaContainer",d$c.document.body.appendChild(d$c._container)),d$c._container;},function(d$a){d$c._container=d$a;}),d$q(1,d$c,"document",function(){return d$c.__init__(),d$c._document;}),d$c.__init__=function(){if(!d$c._window){d$c._window=d$F.getWindow(),d$c._document=d$c.window.document,d$c._window.addEventListener("message",function(d$a){laya.utils.Browser._onMessage(d$a);},!1),d$c.document.__createElement=d$c.document.createElement,d$i.requestAnimationFrame=d$i.requestAnimationFrame||d$i.webkitRequestAnimationFrame||d$i.mozRequestAnimationFrame||d$i.oRequestAnimationFrame||d$i.msRequestAnimationFrame||function(d$a){return d$i.setTimeout(d$a,1e3/60);};var d$a=d$i.document.body.style;d$a["-webkit-user-select"]="none",d$a["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",d$c.userAgent=d$c.window.navigator.userAgent,d$c.onIOS=!!(d$c.u=d$c.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),d$c.onMobile=-1<d$c.u.indexOf("Mobile"),d$c.onIPhone=-1<d$c.u.indexOf("iPhone"),d$c.onMac=-1<d$c.u.indexOf("Mac OS X"),d$c.onIPad=-1<d$c.u.indexOf("iPad"),d$c.onAndroid=-1<d$c.u.indexOf("Android")||-1<d$c.u.indexOf("Adr"),d$c.onWP=-1<d$c.u.indexOf("Windows Phone"),d$c.onQQBrowser=-1<d$c.u.indexOf("QQBrowser"),d$c.onMQQBrowser=-1<d$c.u.indexOf("MQQBrowser")||-1<d$c.u.indexOf("Mobile")&&-1<d$c.u.indexOf("QQ"),d$c.onIE=!!d$c.window.ActiveXObject||"ActiveXObject"in d$c.window,d$c.onWeiXin=-1<d$c.u.indexOf("MicroMessenger"),d$c.onPC=!d$c.onMobile,d$c.onSafari=-1<d$c.u.indexOf("Safari"),d$c.onFirefox=-1<d$c.u.indexOf("Firefox"),d$c.onEdge=-1<d$c.u.indexOf("Edge"),d$c.onMiniGame=-1<d$c.u.indexOf("MiniGame"),d$c.onLimixiu=-1<d$c.u.indexOf("limixiu"),d$c.httpProtocol="http:"==d$c.window.location.protocol,d$c.onMiniGame&&null==d$c.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),d$c.webAudioEnabled=!!(d$c.window.AudioContext||d$c.window.webkitAudioContext||d$c.window.mozAudioContext),d$c.soundType=d$c.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",d$ea=d$c.webAudioEnabled?d$fa:d$ca,d$c.webAudioEnabled&&d$fa.initWebAudio(),d$ca._initMusicAudio(),d$c.enableTouch="ontouchstart"in d$i||d$i.DocumentTouch&&d$b instanceof DocumentTouch,d$i.focus(),d$E._soundClass=d$ea,d$E._musicClass=d$ca,d$J._mainCanvas=d$J._mainCanvas||d$va.create("2D"),d$c.canvas||(d$c.canvas=d$va.create("2D"),d$c.context=d$c.canvas.getContext("2d"));}},d$c._onMessage=function(d$a){if(d$a.data&&"size"==d$a.data.name){if(d$c.window.innerWidth=d$a.data.width,d$c.window.innerHeight=d$a.data.height,d$c.window.__innerHeight=d$a.data.clientHeight,!d$c.document.createEvent)return void console.warn("no document.createEvent");var d$b=d$c.document.createEvent("HTMLEvents");return d$b.initEvent("resize",!1,!1),void d$c.window.dispatchEvent(d$b);}},d$c.createElement=function(d$a){return d$c.__init__(),d$c.document.__createElement(d$a);},d$c.getElementById=function(d$a){return d$c.__init__(),d$c.document.getElementById(d$a);},d$c.removeElement=function(d$a){d$a&&d$a.parentNode&&d$a.parentNode.removeChild(d$a);},d$c.now=function(){return d$F.now();},d$c._window=null,d$c._document=null,d$c._container=null,d$c.userAgent=null,d$c.u=null,d$c.onIOS=!1,d$c.onMac=!1,d$c.onMobile=!1,d$c.onIPhone=!1,d$c.onIPad=!1,d$c.onAndroid=!1,d$c.onWP=!1,d$c.onQQBrowser=!1,d$c.onMQQBrowser=!1,d$c.onSafari=!1,d$c.onFirefox=!1,d$c.onEdge=!1,d$c.onIE=!1,d$c.onWeiXin=!1,d$c.onMiniGame=!1,d$c.onLimixiu=!1,d$c.onPC=!1,d$c.httpProtocol=!1,d$c.webAudioEnabled=!1,d$c.soundType=null,d$c.enableTouch=!1,d$c.canvas=null,d$c.context=null,d$c.__init$=function(){},d$c;}()),d$P=function(){function d$b(d$a){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,d$a?(this._u8d_=new Uint8Array(d$a),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_);}d$m(d$b,"laya.utils.Byte");var d$a=d$b.prototype;return d$a.___resizeBuffer=function(d$b){try{var d$a=new Uint8Array(d$b);null!=this._u8d_&&(this._u8d_.length<=d$b?d$a.set(this._u8d_):d$a.set(this._u8d_.subarray(0,d$b))),this._u8d_=d$a,this._d_=new DataView(d$a.buffer);}catch(d$a){throw"___resizeBuffer err:"+d$b;}},d$a.getString=function(){return this.rUTF(this.getUint16());},d$a.getFloat32Array=function(d$a,d$b){var d$c=d$a+d$b;d$c=d$c>this._length?this._length:d$c;var d$d=new Float32Array(this._d_.buffer.slice(d$a,d$c));return this._pos_=d$c,d$d;},d$a.getUint8Array=function(d$a,d$b){var d$c=d$a+d$b;d$c=d$c>this._length?this._length:d$c;var d$d=new Uint8Array(this._d_.buffer.slice(d$a,d$c));return this._pos_=d$c,d$d;},d$a.getInt16Array=function(d$a,d$b){var d$c=d$a+d$b;d$c=d$c>this._length?this._length:d$c;var d$d=new Int16Array(this._d_.buffer.slice(d$a,d$c));return this._pos_=d$c,d$d;},d$a.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var d$a=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,d$a;},d$a.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var d$a=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,d$a;},d$a.writeFloat32=function(d$a){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,d$a,this._xd_),this._pos_+=4;},d$a.writeFloat64=function(d$a){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,d$a,this._xd_),this._pos_+=8;},d$a.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var d$a=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,d$a;},d$a.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var d$a=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,d$a;},d$a.writeInt32=function(d$a){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,d$a,this._xd_),this._pos_+=4;},d$a.writeUint32=function(d$a){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,d$a,this._xd_),this._pos_+=4;},d$a.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var d$a=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,d$a;},d$a.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var d$a=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,d$a;},d$a.writeUint16=function(d$a){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,d$a,this._xd_),this._pos_+=2;},d$a.writeInt16=function(d$a){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,d$a,this._xd_),this._pos_+=2;},d$a.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++);},d$a.writeUint8=function(d$a){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,d$a),this._pos_++;},d$a._getUInt8=function(d$a){return this._d_.getUint8(d$a);},d$a._getUint16=function(d$a){return this._d_.getUint16(d$a,this._xd_);},d$a._getMatrix=function(){return new d$G(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32());},d$a.rUTF=function(d$a){for(var d$b=[],d$c=this._pos_+d$a,d$d=0,d$e=0,d$f=0,d$i=String.fromCharCode,d$j=this._u8d_;this._pos_<d$c;)(d$d=d$j[this._pos_++])<128?0!=d$d&&d$b.push(d$i(d$d)):d$d<224?d$b.push(d$i((63&d$d)<<6|127&d$j[this._pos_++])):d$d<240?(d$e=d$j[this._pos_++],d$b.push(d$i((31&d$d)<<12|(127&d$e)<<6|127&d$j[this._pos_++]))):(d$e=d$j[this._pos_++],d$f=d$j[this._pos_++],d$b.push(d$i((15&d$d)<<18|(127&d$e)<<12|d$f<<6&127|127&d$j[this._pos_++]))),0;return d$b.join("");},d$a.getCustomString=function(d$a){for(var d$b=[],d$c=0,d$d=0,d$e=0,d$f=String.fromCharCode,d$i=this._u8d_;0<d$a;)if((d$d=d$i[this._pos_])<128)d$b.push(d$f(d$d)),this._pos_++,d$a--;else for(d$c=d$d-128,this._pos_++,d$a-=d$c;0<d$c;)d$d=d$i[this._pos_++],d$e=d$i[this._pos_++],d$b.push(d$f(d$e<<8|d$d)),d$c--;return d$b.join("");},d$a.clear=function(){this._pos_=0,this.length=0;},d$a.__getBuffer=function(){return this._d_.buffer;},d$a.writeUTFBytes=function(d$a){for(var d$b=0,d$c=(d$a+="").length;d$b<d$c;d$b++){var d$d=d$a.charCodeAt(d$b);d$d<=127?this.writeByte(d$d):d$d<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|d$d>>6,128|63&d$d],this._pos_),this._pos_+=2):d$d<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|d$d>>12,128|d$d>>6&63,128|63&d$d],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|d$d>>18,128|d$d>>12&63,128|d$d>>6&63,128|63&d$d],this._pos_),this._pos_+=4);}},d$a.writeUTFString=function(d$a){var d$b=this.pos;this.writeUint16(1),this.writeUTFBytes(d$a);var d$c=this.pos-d$b-2;if(65536<=d$c)throw"writeUTFString byte len more than 65536";this._d_.setUint16(d$b,d$c,this._xd_);},d$a.readUTFString=function(){return this.readUTFBytes(this.getUint16());},d$a.getUTFString=function(){return this.readUTFString();},d$a.readUTFBytes=function(d$a){if(void 0===d$a&&(d$a=-1),0==d$a)return"";var d$b=this.bytesAvailable;if(d$b<d$a)throw"readUTFBytes error - Out of bounds";return d$a=0<d$a?d$a:d$b,this.rUTF(d$a);},d$a.getUTFBytes=function(d$a){return void 0===d$a&&(d$a=-1),this.readUTFBytes(d$a);},d$a.writeByte=function(d$a){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,d$a),this._pos_+=1;},d$a.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++);},d$a.getByte=function(){return this.readByte();},d$a.ensureWrite=function(d$a){this._length<d$a&&(this._length=d$a),this._allocated_<d$a&&(this.length=d$a);},d$a.writeArrayBuffer=function(d$a,d$b,d$c){if(void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),d$b<0||d$c<0)throw"writeArrayBuffer error - Out of bounds";0==d$c&&(d$c=d$a.byteLength-d$b),this.ensureWrite(this._pos_+d$c);var d$d=new Uint8Array(d$a);this._u8d_.set(d$d.subarray(d$b,d$b+d$c),this._pos_),this._pos_+=d$c;},d$q(0,d$a,"buffer",function(){var d$a=this._d_.buffer;return d$a.byteLength==this.length?d$a:d$a.slice(0,this.length);}),d$q(0,d$a,"endian",function(){return this._xd_?"littleEndian":"bigEndian";},function(d$a){this._xd_="littleEndian"==d$a;}),d$q(0,d$a,"length",function(){return this._length;},function(d$a){this._allocated_<d$a?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(d$a,2*this._allocated_))):this._allocated_>d$a&&this.___resizeBuffer(this._allocated_=d$a),this._length=d$a;}),d$q(0,d$a,"pos",function(){return this._pos_;},function(d$a){this._pos_=d$a;}),d$q(0,d$a,"bytesAvailable",function(){return this._length-this._pos_;}),d$b.getSystemEndian=function(){if(!d$b._sysEndian){var d$a=new ArrayBuffer(2);new DataView(d$a).setInt16(0,256,!0),d$b._sysEndian=256===new Int16Array(d$a)[0]?"littleEndian":"bigEndian";}return d$b._sysEndian;},d$b.BIG_ENDIAN="bigEndian",d$b.LITTLE_ENDIAN="littleEndian",d$b._sysEndian=null,d$b;}(),d$Q=function(){function d$e(){}return d$m(d$e,"laya.utils.CacheManager"),d$e.regCacheByFunction=function(d$a,d$b){var d$c;d$e.unRegCacheByFunction(d$a,d$b),d$c={tryDispose:d$a,getCacheList:d$b},d$e._cacheList.push(d$c);},d$e.unRegCacheByFunction=function(d$a,d$b){var d$c,d$d=0;for(d$c=d$e._cacheList.length,d$d=0;d$d<d$c;d$d++)if(d$e._cacheList[d$d].tryDispose==d$a&&d$e._cacheList[d$d].getCacheList==d$b)return void d$e._cacheList.splice(d$d,1);},d$e.forceDispose=function(){var d$a=0,d$b=d$e._cacheList.length;for(d$a=0;d$a<d$b;d$a++)d$e._cacheList[d$a].tryDispose(!0);},d$e.beginCheck=function(d$a){void 0===d$a&&(d$a=15e3),d$z.timer.loop(d$a,null,d$e._checkLoop);},d$e.stopCheck=function(){d$z.timer.clear(null,d$e._checkLoop);},d$e._checkLoop=function(){var d$a=d$e._cacheList;if(!(d$a.length<1)){var d$b,d$c=d$O.now(),d$d=0;for(d$b=d$d=d$a.length;0<d$d&&(d$a[d$e._index=++d$e._index%d$b].tryDispose(!1),!(d$O.now()-d$c>d$e.loopTimeLimit));)d$d--;}},d$e.loopTimeLimit=2,d$e._cacheList=[],d$e._index=0,d$e;}(),d$R=function(){function d$p(){}return d$m(d$p,"laya.utils.ClassUtils"),d$p.regClass=function(d$a,d$b){d$p._classMap[d$a]=d$b;},d$p.getRegClass=function(d$a){return d$p._classMap[d$a];},d$p.getInstance=function(d$a){var d$b=d$p.getClass(d$a);return d$b?new d$b():(console.warn("[error] Undefined class:",d$a),null);},d$p.createByJson=function(d$a,d$b,d$c,d$d,d$e){"string"==typeof d$a&&(d$a=JSON.parse(d$a));var d$f=d$a.props;if(!d$b&&!(d$b=d$e?d$e.runWith(d$a):d$p.getInstance(d$f.runtime||d$a.type)))return null;var d$i=d$a.child;if(d$i)for(var d$j=0,d$k=d$i.length;d$j<d$k;d$j++){var d$l=d$i[d$j];if("render"!==d$l.props.name&&"render"!==d$l.props.renderType||!d$b._$set_itemRender){if("Graphic"==d$l.type)d$p.addGraphicsToSprite(d$l,d$b);else if(d$p.isDrawType(d$l.type))d$p.addGraphicToSprite(d$l,d$b,!0);else{var d$m=d$p.createByJson(d$l,null,d$c,d$d,d$e);"Script"==d$l.type?d$m.hasOwnProperty("owner")?d$m.owner=d$b:d$m.hasOwnProperty("target")&&(d$m.target=d$b):"mask"==d$l.props.renderType?d$b.mask=d$m:d$b.addChild(d$m);}}else d$b.itemRender=d$l;}if(d$f)for(var d$n in d$f){var d$o=d$f[d$n];"var"===d$n&&d$c?d$c[d$o]=d$b:d$o instanceof Array&&"function"==typeof d$b[d$n]?d$b[d$n].apply(d$b,d$o):d$b[d$n]=d$o;}return d$d&&d$a.customProps&&d$d.runWith([d$b,d$a]),d$b.created&&d$b.created(),d$b;},d$p.addGraphicsToSprite=function(d$a,d$b){var d$c;if((d$c=d$a.child)&&!(d$c.length<1)){var d$d;d$d=d$p._getGraphicsFromSprite(d$a,d$b);var d$e=0,d$f=0;d$a.props&&(d$e=d$p._getObjVar(d$a.props,"x",0),d$f=d$p._getObjVar(d$a.props,"y",0)),0!=d$e&&0!=d$f&&d$d.translate(d$e,d$f);var d$i,d$j=0;for(d$i=d$c.length,d$j=0;d$j<d$i;d$j++)d$p._addGraphicToGraphics(d$c[d$j],d$d);0!=d$e&&0!=d$f&&d$d.translate(-d$e,-d$f);}},d$p.addGraphicToSprite=function(d$a,d$b,d$c){var d$d;void 0===d$c&&(d$c=!1),d$d=d$c?d$p._getGraphicsFromSprite(d$a,d$b):d$b.graphics,d$p._addGraphicToGraphics(d$a,d$d);},d$p._getGraphicsFromSprite=function(d$a,d$b){var d$c,d$d;if(!d$a||!d$a.props)return d$b.graphics;switch(d$d=d$a.props.renderType){case"hit":case"unHit":var d$e;d$b.hitArea||(d$b.hitArea=new d$V()),(d$e=d$b.hitArea)[d$d]||(d$e[d$d]=new d$o()),d$c=d$e[d$d];}return d$c||(d$c=d$b.graphics),d$c;},d$p._getTransformData=function(d$a){var d$b;(d$a.hasOwnProperty("pivotX")||d$a.hasOwnProperty("pivotY"))&&(d$b=d$b||new d$G()).translate(-d$p._getObjVar(d$a,"pivotX",0),-d$p._getObjVar(d$a,"pivotY",0));var d$c=d$p._getObjVar(d$a,"scaleX",1),d$d=d$p._getObjVar(d$a,"scaleY",1),d$e=d$p._getObjVar(d$a,"rotation",0);d$p._getObjVar(d$a,"skewX",0),d$p._getObjVar(d$a,"skewY",0);return 1==d$c&&1==d$d&&0==d$e||((d$b=d$b||new d$G()).scale(d$c,d$d),d$b.rotate(.0174532922222222*d$e)),d$b;},d$p._addGraphicToGraphics=function(d$a,d$b){var d$c,d$d;if((d$c=d$a.props)&&(d$d=d$p.DrawTypeDic[d$a.type])){var d$e,d$f;d$e=d$b;var d$i=d$p._getParams(d$c,d$d[1],d$d[2],d$d[3]);((d$f=d$p._tM)||1!=d$p._alpha)&&(d$e.save(),d$f&&d$e.transform(d$f),1!=d$p._alpha&&d$e.alpha(d$p._alpha)),d$e[d$d[0]].apply(d$e,d$i),(d$f||1!=d$p._alpha)&&d$e.restore();}},d$p._adptLineData=function(d$a){return d$a[2]=parseFloat(d$a[0])+parseFloat(d$a[2]),d$a[3]=parseFloat(d$a[1])+parseFloat(d$a[3]),d$a;},d$p._adptTextureData=function(d$a){return d$a[0]=d$ja.getRes(d$a[0]),d$a;},d$p._adptLinesData=function(d$a){return d$a[2]=d$p._getPointListByStr(d$a[2]),d$a;},d$p.isDrawType=function(d$a){return"Image"!=d$a&&d$p.DrawTypeDic.hasOwnProperty(d$a);},d$p._getParams=function(d$a,d$b,d$c,d$d){var d$e;void 0===d$c&&(d$c=0),(d$e=d$p._temParam).length=d$b.length;var d$f,d$i,d$j=0;for(d$f=d$b.length,d$j=0;d$j<d$f;d$j++)d$e[d$j]=d$p._getObjVar(d$a,d$b[d$j][0],d$b[d$j][1]);return d$p._alpha=d$p._getObjVar(d$a,"alpha",1),d$i=d$p._getTransformData(d$a),d$p._tM=d$i?(d$c||(d$c=0),d$i.translate(d$e[d$c],d$e[d$c+1]),d$e[d$c]=d$e[d$c+1]=0,d$i):null,d$d&&d$p[d$d]&&(d$e=d$p[d$d](d$e)),d$e;},d$p._getPointListByStr=function(d$a){var d$b,d$c,d$d=0;for(d$c=(d$b=d$a.split(",")).length,d$d=0;d$d<d$c;d$d++)d$b[d$d]=parseFloat(d$b[d$d]);return d$b;},d$p._getObjVar=function(d$a,d$b,d$c){return d$a.hasOwnProperty(d$b)?d$a[d$b]:d$c;},d$p._temParam=[],d$p._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},d$p.getClass=function(d$a){var d$b=d$p._classMap[d$a]||d$a;return"string"==typeof d$b?d$z.__classmap[d$b]:d$b;},d$p._tM=null,d$p._alpha=NaN,d$k(d$p,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]};}]),d$p;}(),d$S=function(){function d$f(d$a){if(this._color=[],"string"==typeof d$a){null===(this.strColor=d$a)&&(d$a="#000000"),"#"==d$a.charAt(0)&&(d$a=d$a.substr(1));var d$b=d$a.length;if(3==d$b||4==d$b){for(var d$c="",d$d=0;d$d<d$b;d$d++)d$c+=d$a[d$d]+d$a[d$d];d$a=d$c;}var d$e=this.numColor=parseInt(d$a,16);if(8==d$a.length)return void(this._color=[parseInt(d$a.substr(0,2),16)/255,((16711680&d$e)>>16)/255,((65280&d$e)>>8)/255,(255&d$e)/255]);}else d$e=this.numColor=d$a,this.strColor=d$$.toHexColor(d$e);this._color=[((16711680&d$e)>>16)/255,((65280&d$e)>>8)/255,(255&d$e)/255,1],this._color.__id=++d$f._COLODID;}return d$m(d$f,"laya.utils.Color"),d$f._initDefault=function(){for(var d$a in d$f._DEFAULT={},d$f._COLOR_MAP)d$f._SAVE[d$a]=d$f._DEFAULT[d$a]=new d$f(d$f._COLOR_MAP[d$a]);return d$f._DEFAULT;},d$f._initSaveMap=function(){for(var d$a in d$f._SAVE_SIZE=0,d$f._SAVE={},d$f._DEFAULT)d$f._SAVE[d$a]=d$f._DEFAULT[d$a];},d$f.create=function(d$a){var d$b=d$f._SAVE[d$a+""];return null!=d$b?d$b:(d$f._SAVE_SIZE<1e3||d$f._initSaveMap(),d$f._SAVE[d$a+""]=new d$f(d$a));},d$f._SAVE={},d$f._SAVE_SIZE=0,d$f._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},d$f._DEFAULT=d$f._initDefault(),d$f._COLODID=1,d$f;}(),d$T=(function(){function d$a(){this._values=[],this._keys=[];}d$m(d$a,"laya.utils.Dictionary");var d$b=d$a.prototype;d$b.set=function(d$a,d$b){var d$c=this.indexOf(d$a);0<=d$c?this._values[d$c]=d$b:(this._keys.push(d$a),this._values.push(d$b));},d$b.indexOf=function(d$a){var d$b=this._keys.indexOf(d$a);return 0<=d$b?d$b:(d$a="string"==typeof d$a?Number(d$a):"number"==typeof d$a?d$a.toString():d$a,this._keys.indexOf(d$a));},d$b.get=function(d$a){var d$b=this.indexOf(d$a);return d$b<0?null:this._values[d$b];},d$b.remove=function(d$a){var d$b=this.indexOf(d$a);return 0<=d$b&&(this._keys.splice(d$b,1),this._values.splice(d$b,1),!0);},d$b.clear=function(){this._values.length=0,this._keys.length=0;},d$q(0,d$b,"values",function(){return this._values;}),d$q(0,d$b,"keys",function(){return this._keys;});}(),function(){function d$a(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0;}d$m(d$a,"laya.utils.Dragging");var d$b=d$a.prototype;return d$b.start=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){void 0===d$j&&(d$j=.92),this.clearTimer(),this.target=d$a,this.area=d$b,this.hasInertia=d$c,this.elasticDistance=d$b?d$d:0,this.elasticBackTime=d$e,this.data=d$f,this._disableMouseEvent=d$i,this.ratio=d$j,1!=d$a.globalScaleX||1!=d$a.globalScaleY?this._parent=d$a.parent:this._parent=d$z.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,d$z.stage.on("mouseup",this,this.onStageMouseUp),d$z.stage.on("mouseout",this,this.onStageMouseUp),d$z.timer.frameLoop(1,this,this.loop);},d$b.clearTimer=function(){d$z.timer.clear(this,this.loop),d$z.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null);},d$b.stop=function(){this._dragging&&(d$r.instance.disableMouseEvent=!1,d$z.stage.off("mouseup",this,this.onStageMouseUp),d$z.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear());},d$b.loop=function(){var d$a=this._parent.getMousePoint(),d$b=d$a.x,d$c=d$a.y,d$d=d$b-this._lastX,d$e=d$c-this._lastY;if(this._clickOnly){if(!(1<Math.abs(d$d*d$z.stage._canvasTransform.getScaleX())||1<Math.abs(d$e*d$z.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),d$r.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1);}else this._offsets.push(d$d,d$e);0==d$d&&0==d$e||(this._lastX=d$b,this._lastY=d$c,this.target.x+=d$d*this._elasticRateX,this.target.y+=d$e*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data));},d$b.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var d$a=this.area.x-this.target.x;else d$a=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-d$a/this.elasticDistance),this.target.y<this.area.y)var d$b=this.area.y-this.target.y;else d$b=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-d$b/this.elasticDistance);}},d$b.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height);},d$b.onStageMouseUp=function(d$a){if(d$r.instance.disableMouseEvent=!1,d$z.stage.off("mouseup",this,this.onStageMouseUp),d$z.stage.off("mouseout",this,this.onStageMouseUp),d$z.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var d$b=this._offsets.length,d$c=Math.min(d$b,6),d$d=this._offsets.length-d$c,d$e=d$b-1;d$d<d$e;d$e--)this._offsetY+=this._offsets[d$e--],this._offsetX+=this._offsets[d$e];this._offsetX=this._offsetX/d$c*2,this._offsetY=this._offsetY/d$c*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),d$z.timer.frameLoop(1,this,this.tweenMove);}else 0<this.elasticDistance?this.checkElastic():this.clear();},d$b.checkElastic=function(){var d$a=NaN,d$b=NaN;if(this.target.x<this.area.x?d$a=this.area.x:this.target.x>this.area.x+this.area.width&&(d$a=this.area.x+this.area.width),this.target.y<this.area.y?d$b=this.area.y:this.target.y>this.area.y+this.area.height&&(d$b=this.area.y+this.area.height),isNaN(d$a)&&isNaN(d$b))this.clear();else{var d$c={};isNaN(d$a)||(d$c.x=d$a),isNaN(d$b)||(d$c.y=d$b),this._tween=d$Z.to(this.target,d$c,this.elasticBackTime,d$U.sineOut,d$u.create(this,this.clear),0,!1,!1);}},d$b.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(d$z.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear());},d$b.clear=function(){if(this.target){this.clearTimer();var d$a=this.target;this.target=null,this._parent=null,d$a.event("dragend",this.data);}},d$a;}()),d$U=function(){function d$j(){}return d$m(d$j,"laya.utils.Ease"),d$j.linearNone=function(d$a,d$b,d$c,d$d){return d$c*d$a/d$d+d$b;},d$j.linearIn=function(d$a,d$b,d$c,d$d){return d$c*d$a/d$d+d$b;},d$j.linearInOut=function(d$a,d$b,d$c,d$d){return d$c*d$a/d$d+d$b;},d$j.linearOut=function(d$a,d$b,d$c,d$d){return d$c*d$a/d$d+d$b;},d$j.bounceIn=function(d$a,d$b,d$c,d$d){return d$c-d$j.bounceOut(d$d-d$a,0,d$c,d$d)+d$b;},d$j.bounceInOut=function(d$a,d$b,d$c,d$d){return d$a<.5*d$d?.5*d$j.bounceIn(2*d$a,0,d$c,d$d)+d$b:.5*d$j.bounceOut(2*d$a-d$d,0,d$c,d$d)+.5*d$c+d$b;},d$j.bounceOut=function(d$a,d$b,d$c,d$d){return(d$a/=d$d)<1/2.75?d$c*(7.5625*d$a*d$a)+d$b:d$a<2/2.75?d$c*(7.5625*(d$a-=1.5/2.75)*d$a+.75)+d$b:d$a<2.5/2.75?d$c*(7.5625*(d$a-=2.25/2.75)*d$a+.9375)+d$b:d$c*(7.5625*(d$a-=2.625/2.75)*d$a+.984375)+d$b;},d$j.backIn=function(d$a,d$b,d$c,d$d,d$e){return void 0===d$e&&(d$e=1.70158),d$c*(d$a/=d$d)*d$a*((d$e+1)*d$a-d$e)+d$b;},d$j.backInOut=function(d$a,d$b,d$c,d$d,d$e){return void 0===d$e&&(d$e=1.70158),(d$a/=.5*d$d)<1?.5*d$c*(d$a*d$a*((1+(d$e*=1.525))*d$a-d$e))+d$b:d$c/2*((d$a-=2)*d$a*((1+(d$e*=1.525))*d$a+d$e)+2)+d$b;},d$j.backOut=function(d$a,d$b,d$c,d$d,d$e){return void 0===d$e&&(d$e=1.70158),d$c*((d$a=d$a/d$d-1)*d$a*((d$e+1)*d$a+d$e)+1)+d$b;},d$j.elasticIn=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i;return void 0===d$e&&(d$e=0),void 0===d$f&&(d$f=0),0==d$a?d$b:1==(d$a/=d$d)?d$b+d$c:(d$f||(d$f=.3*d$d),d$i=!d$e||0<d$c&&d$e<d$c||d$c<0&&d$e<-d$c?(d$e=d$c,d$f/4):d$f/d$j.PI2*Math.asin(d$c/d$e),-d$e*Math.pow(2,10*(d$a-=1))*Math.sin((d$a*d$d-d$i)*d$j.PI2/d$f)+d$b);},d$j.elasticInOut=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i;return void 0===d$e&&(d$e=0),void 0===d$f&&(d$f=0),0==d$a?d$b:2==(d$a/=.5*d$d)?d$b+d$c:(d$f||(d$f=d$d*(.3*1.5)),d$i=!d$e||0<d$c&&d$e<d$c||d$c<0&&d$e<-d$c?(d$e=d$c,d$f/4):d$f/d$j.PI2*Math.asin(d$c/d$e),d$a<1?d$e*Math.pow(2,10*(d$a-=1))*Math.sin((d$a*d$d-d$i)*d$j.PI2/d$f)*-.5+d$b:d$e*Math.pow(2,-10*(d$a-=1))*Math.sin((d$a*d$d-d$i)*d$j.PI2/d$f)*.5+d$c+d$b);},d$j.elasticOut=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i;return void 0===d$e&&(d$e=0),void 0===d$f&&(d$f=0),0==d$a?d$b:1==(d$a/=d$d)?d$b+d$c:(d$f||(d$f=.3*d$d),d$i=!d$e||0<d$c&&d$e<d$c||d$c<0&&d$e<-d$c?(d$e=d$c,d$f/4):d$f/d$j.PI2*Math.asin(d$c/d$e),d$e*Math.pow(2,-10*d$a)*Math.sin((d$a*d$d-d$i)*d$j.PI2/d$f)+d$c+d$b);},d$j.strongIn=function(d$a,d$b,d$c,d$d){return d$c*(d$a/=d$d)*d$a*d$a*d$a*d$a+d$b;},d$j.strongInOut=function(d$a,d$b,d$c,d$d){return(d$a/=.5*d$d)<1?.5*d$c*d$a*d$a*d$a*d$a*d$a+d$b:.5*d$c*((d$a-=2)*d$a*d$a*d$a*d$a+2)+d$b;},d$j.strongOut=function(d$a,d$b,d$c,d$d){return d$c*((d$a=d$a/d$d-1)*d$a*d$a*d$a*d$a+1)+d$b;},d$j.sineInOut=function(d$a,d$b,d$c,d$d){return .5*-d$c*(Math.cos(Math.PI*d$a/d$d)-1)+d$b;},d$j.sineIn=function(d$a,d$b,d$c,d$d){return-d$c*Math.cos(d$a/d$d*d$j.HALF_PI)+d$c+d$b;},d$j.sineOut=function(d$a,d$b,d$c,d$d){return d$c*Math.sin(d$a/d$d*d$j.HALF_PI)+d$b;},d$j.quintIn=function(d$a,d$b,d$c,d$d){return d$c*(d$a/=d$d)*d$a*d$a*d$a*d$a+d$b;},d$j.quintInOut=function(d$a,d$b,d$c,d$d){return(d$a/=.5*d$d)<1?.5*d$c*d$a*d$a*d$a*d$a*d$a+d$b:.5*d$c*((d$a-=2)*d$a*d$a*d$a*d$a+2)+d$b;},d$j.quintOut=function(d$a,d$b,d$c,d$d){return d$c*((d$a=d$a/d$d-1)*d$a*d$a*d$a*d$a+1)+d$b;},d$j.quartIn=function(d$a,d$b,d$c,d$d){return d$c*(d$a/=d$d)*d$a*d$a*d$a+d$b;},d$j.quartInOut=function(d$a,d$b,d$c,d$d){return(d$a/=.5*d$d)<1?.5*d$c*d$a*d$a*d$a*d$a+d$b:.5*-d$c*((d$a-=2)*d$a*d$a*d$a-2)+d$b;},d$j.quartOut=function(d$a,d$b,d$c,d$d){return-d$c*((d$a=d$a/d$d-1)*d$a*d$a*d$a-1)+d$b;},d$j.cubicIn=function(d$a,d$b,d$c,d$d){return d$c*(d$a/=d$d)*d$a*d$a+d$b;},d$j.cubicInOut=function(d$a,d$b,d$c,d$d){return(d$a/=.5*d$d)<1?.5*d$c*d$a*d$a*d$a+d$b:.5*d$c*((d$a-=2)*d$a*d$a+2)+d$b;},d$j.cubicOut=function(d$a,d$b,d$c,d$d){return d$c*((d$a=d$a/d$d-1)*d$a*d$a+1)+d$b;},d$j.quadIn=function(d$a,d$b,d$c,d$d){return d$c*(d$a/=d$d)*d$a+d$b;},d$j.quadInOut=function(d$a,d$b,d$c,d$d){return(d$a/=.5*d$d)<1?.5*d$c*d$a*d$a+d$b:.5*-d$c*(--d$a*(d$a-2)-1)+d$b;},d$j.quadOut=function(d$a,d$b,d$c,d$d){return-d$c*(d$a/=d$d)*(d$a-2)+d$b;},d$j.expoIn=function(d$a,d$b,d$c,d$d){return 0==d$a?d$b:d$c*Math.pow(2,10*(d$a/d$d-1))+d$b-.001*d$c;},d$j.expoInOut=function(d$a,d$b,d$c,d$d){return 0==d$a?d$b:d$a==d$d?d$b+d$c:(d$a/=.5*d$d)<1?.5*d$c*Math.pow(2,10*(d$a-1))+d$b:.5*d$c*(2-Math.pow(2,-10*--d$a))+d$b;},d$j.expoOut=function(d$a,d$b,d$c,d$d){return d$a==d$d?d$b+d$c:d$c*(1-Math.pow(2,-10*d$a/d$d))+d$b;},d$j.circIn=function(d$a,d$b,d$c,d$d){return-d$c*(Math.sqrt(1-(d$a/=d$d)*d$a)-1)+d$b;},d$j.circInOut=function(d$a,d$b,d$c,d$d){return(d$a/=.5*d$d)<1?.5*-d$c*(Math.sqrt(1-d$a*d$a)-1)+d$b:.5*d$c*(Math.sqrt(1-(d$a-=2)*d$a)+1)+d$b;},d$j.circOut=function(d$a,d$b,d$c,d$d){return d$c*Math.sqrt(1-(d$a=d$a/d$d-1)*d$a)+d$b;},d$j.HALF_PI=.5*Math.PI,d$j.PI2=2*Math.PI,d$j;}(),d$V=function(){function d$n(){this._hit=null,this._unHit=null;}d$m(d$n,"laya.utils.HitArea");var d$a=d$n.prototype;return d$a.isHit=function(d$a,d$b){return!!d$n.isHitGraphic(d$a,d$b,this.hit)&&!d$n.isHitGraphic(d$a,d$b,this.unHit);},d$a.contains=function(d$a,d$b){return this.isHit(d$a,d$b);},d$q(0,d$a,"hit",function(){return this._hit||(this._hit=new d$o()),this._hit;},function(d$a){this._hit=d$a;}),d$q(0,d$a,"unHit",function(){return this._unHit||(this._unHit=new d$o()),this._unHit;},function(d$a){this._unHit=d$a;}),d$n.isHitGraphic=function(d$a,d$b,d$c){if(!d$c)return!1;var d$d;if(!(d$d=d$c.cmds)&&d$c._one&&((d$d=d$n._cmds).length=1,d$d[0]=d$c._one),!d$d)return!1;var d$e,d$f,d$i=0;for(d$e=d$d.length,d$i=0;d$i<d$e;d$i++)if(d$f=d$d[d$i]){var d$j=d$J._context;switch(d$f.callee){case d$j._translate:case 6:d$a-=d$f[0],d$b-=d$f[1];}if(d$n.isHitCmd(d$a,d$b,d$f))return!0;}return!1;},d$n.isHitCmd=function(d$a,d$b,d$c){if(!d$c)return!1;var d$d=d$J._context,d$e=!1;switch(d$c.callee){case d$d._drawRect:case 13:d$n._rec.setTo(d$c[0],d$c[1],d$c[2],d$c[3]),d$e=d$n._rec.contains(d$a,d$b);break;case d$d._drawCircle:case d$d._fillCircle:case 14:d$e=(d$a-=d$c[0])*d$a+(d$b-=d$c[1])*d$b<d$c[2]*d$c[2];break;case d$d._drawPoly:case 18:d$a-=d$c[0],d$b-=d$c[1],d$e=d$n.ptInPolygon(d$a,d$b,d$c[2]);}return d$e;},d$n.ptInPolygon=function(d$a,d$b,d$c){var d$d;(d$d=d$n._ptPoint).setTo(d$a,d$b);var d$e,d$f=0,d$i=NaN,d$j=NaN,d$k=NaN,d$l=NaN;d$e=d$c.length;for(var d$m=0;d$m<d$e;d$m+=2){if(d$i=d$c[d$m],d$j=d$c[d$m+1],d$k=d$c[(d$m+2)%d$e],d$j!=(d$l=d$c[(d$m+3)%d$e]))if(!(d$d.y<Math.min(d$j,d$l)))if(!(d$d.y>=Math.max(d$j,d$l)))(d$d.y-d$j)*(d$k-d$i)/(d$l-d$j)+d$i>d$d.x&&d$f++;}return d$f%2==1;},d$n._cmds=[],d$k(d$n,["_rec",function(){return this._rec=new d$B();},"_ptPoint",function(){return this._ptPoint=new d$A();}]),d$n;}(),d$W=(function(){function d$e(d$a,d$b,d$c,d$d){this.char=d$a,this.charNum=d$a.charCodeAt(0),this._x=this._y=0,this.width=d$b,this.height=d$c,this.style=d$d,this.isWord=!d$e._isWordRegExp.test(d$a);}d$m(d$e,"laya.utils.HTMLChar");var d$a=d$e.prototype;d$z.imps(d$a,{"laya.display.ILayout":!0}),d$a.setSprite=function(d$a){this._sprite=d$a;},d$a.getSprite=function(){return this._sprite;},d$a._isChar=function(){return!0;},d$a._getCSSStyle=function(){return this.style;},d$q(0,d$a,"width",function(){return this._w;},function(d$a){this._w=d$a;}),d$q(0,d$a,"x",function(){return this._x;},function(d$a){this._sprite&&(this._sprite.x=d$a),this._x=d$a;}),d$q(0,d$a,"y",function(){return this._y;},function(d$a){this._sprite&&(this._sprite.y=d$a),this._y=d$a;}),d$q(0,d$a,"height",function(){return this._h;},function(d$a){this._h=d$a;}),d$e._isWordRegExp=new RegExp("[\\w.]","");}(),function(){function d$b(){}d$m(d$b,"laya.utils.Log"),d$b.enable=function(){d$b._logdiv||(d$b._logdiv=d$O.window.document.createElement("div"),d$O.window.document.body.appendChild(d$b._logdiv),d$b._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;");},d$b.toggle=function(){var d$a=d$b._logdiv.style;"1px"==d$a.width?d$a.width=d$a.height="50%":d$a.width=d$a.height="1px";},d$b.print=function(d$a){d$b._logdiv&&(d$b.maxCount<=d$b._count&&d$b.clear(),d$b._count++,d$b._logdiv.innerText+=d$a+"\n",d$b._logdiv.scrollTop=d$b._logdiv.scrollHeight);},d$b.clear=function(){d$b._logdiv.innerText="",d$b._count=0;},d$b._logdiv=null,d$b._count=0,d$b.maxCount=20;}(),function(){function d$b(){}d$m(d$b,"laya.utils.Mouse"),d$q(1,d$b,"cursor",function(){return d$b._style.cursor;},function(d$a){d$b._style.cursor=d$a;}),d$b.hide=function(){"none"!=d$b.cursor&&(d$b._preCursor=d$b.cursor,d$b.cursor="none");},d$b.show=function(){"none"==d$b.cursor&&(d$b.cursor=d$b._preCursor?d$b._preCursor:"auto");},d$b._preCursor=null,d$k(d$b,["_style",function(){return this._style=d$O.document.body.style;}]);}(),function(){function d$f(){}return d$m(d$f,"laya.utils.Pool"),d$f.getPoolBySign=function(d$a){return d$f._poolDic[d$a]||(d$f._poolDic[d$a]=[]);},d$f.clearBySign=function(d$a){d$f._poolDic[d$a]&&(d$f._poolDic[d$a].length=0);},d$f.recover=function(d$a,d$b){d$b.__InPool||(d$b.__InPool=!0,d$f.getPoolBySign(d$a).push(d$b));},d$f.getItemByClass=function(d$a,d$b){var d$c=d$f.getPoolBySign(d$a),d$d=d$c.length?d$c.pop():new d$b();return d$d.__InPool=!1,d$d;},d$f.getItemByCreateFun=function(d$a,d$b,d$c){var d$d=d$f.getPoolBySign(d$a),d$e=d$d.length?d$d.pop():d$b.call(d$c);return d$e.__InPool=!1,d$e;},d$f.getItem=function(d$a){var d$b=d$f.getPoolBySign(d$a),d$c=d$b.length?d$b.pop():null;return d$c&&(d$c.__InPool=!1),d$c;},d$f._poolDic={},d$f.InPoolSign="__InPool",d$f;}()),d$X=function(){function d$k(){}return d$m(d$k,"laya.utils.Stat"),d$q(1,d$k,"onclick",null,function(d$a){d$k._sp&&d$k._sp.on("click",d$k._sp,d$a),d$k._canvas&&(d$k._canvas.source.onclick=d$a,d$k._canvas.source.style.pointerEvents="");}),d$k.show=function(d$a,d$b,d$c){if(void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),!d$J.isConchApp||d$J.isConchWebGL){if(d$J.isConchWebGL||d$O.onMiniGame||d$O.onLimixiu||(d$k._useCanvas=!0),d$k._show=!0,d$k._fpsData.length=60,d$k._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},d$k._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},d$k._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},d$k._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},d$J.isWebGL){if(d$k._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},d$J.is3DMode){if(d$k._view[0].title="FPS(3D)",d$k._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},d$k._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},d$k._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==d$c){var d$d=8;d$k._view[d$d++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},d$k._view[d$d++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},d$k._view[d$d++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},d$k._view[d$d++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},d$k._view[d$d++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},d$k._view[d$d++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},d$k._view[d$d++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},d$k._view[d$d++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},d$k._view[d$d++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1};}else if(2==d$c){d$d=8;d$k._view[d$d++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},d$k._view[d$d++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},d$k._view[d$d++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},d$k._view[d$d++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},d$k._view[d$d++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},d$k._view[d$d++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},d$k._view[d$d++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2};}}else d$k._view[0].title="FPS(WebGL)",d$k._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};}else d$k._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};d$k._useCanvas?d$k.createUIPre(d$a,d$b):d$k.createUI(d$a,d$b),d$k.enable();}else d$O.window.conch.showFPS&&d$O.window.conch.showFPS(d$a,d$b);},d$k.createUIPre=function(d$a,d$b){var d$c=d$O.pixelRatio;d$k._width=170*d$c,d$k._vx=75*d$c,d$k._height=d$c*(12*d$k._view.length+3*d$c)+4,d$k._fontSize=12*d$c;for(var d$d=0;d$d<d$k._view.length;d$d++)d$k._view[d$d].x=4,d$k._view[d$d].y=d$d*d$k._fontSize+2*d$c;d$k._canvas||((d$k._canvas=new d$va("2D")).size(d$k._width,d$k._height),(d$k._ctx=d$k._canvas.getContext("2d")).textBaseline="top",d$k._ctx.font=d$k._fontSize+"px Sans-serif",d$k._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+d$a+"px;top:"+d$b+"px;width:"+d$k._width/d$c+"px;height:"+d$k._height/d$c+"px;"),d$k._first=!0,d$k.loop(),d$k._first=!1,d$O.container.appendChild(d$k._canvas.source);},d$k.createUI=function(d$a,d$b){var d$c=d$k._sp,d$d=d$O.pixelRatio;d$c||(d$c=new d$na(),(d$k._leftText=new d$sa()).pos(5,5),d$k._leftText.color="#ffffff",d$c.addChild(d$k._leftText),(d$k._txt=new d$sa()).pos(80*d$d,5),d$k._txt.color="#ffffff",d$c.addChild(d$k._txt),d$k._sp=d$c),d$c.pos(d$a,d$b);for(var d$e="",d$f=0;d$f<d$k._view.length;d$f++){d$e+=d$k._view[d$f].title+"\n";}d$k._leftText.text=d$e;var d$i=170*d$d,d$j=d$d*(12*d$k._view.length+3*d$d)+4;d$k._txt.fontSize=d$k._fontSize*d$d,d$k._leftText.fontSize=d$k._fontSize*d$d,d$c.size(d$i,d$j),d$c.graphics.clear(),d$c.graphics.setAlpha(.5),d$c.graphics.drawRect(0,0,d$i,d$j,"#999999"),d$c.graphics.setAlpha(1),d$k.loop();},d$k.enable=function(){d$z.timer.frameLoop(1,d$k,d$k.loop);},d$k.hide=function(){d$k._show=!1,d$z.timer.clear(d$k,d$k.loop),d$k._canvas&&d$O.removeElement(d$k._canvas.source);},d$k.clear=function(){d$k.trianglesFaces=d$k.drawCall=d$k.shaderCall=d$k.spriteCount=d$k.spriteRenderUseCacheCount=d$k.treeNodeCollision=d$k.treeSpriteCollision=d$k.canvasNormal=d$k.canvasBitmap=d$k.canvasReCache=0;},d$k.loop=function(){d$k._count++;var d$a=d$O.now();if(!(d$a-d$k._timer<1e3)){var d$b=d$k._count;if(d$k.FPS=Math.round(1e3*d$b/(d$a-d$k._timer)),d$k._show){d$k.trianglesFaces=Math.round(d$k.trianglesFaces/d$b),d$k.spriteCount=d$k._useCanvas?(d$k.drawCall=Math.round(d$k.drawCall/d$b)-2,d$k.shaderCall=Math.round(d$k.shaderCall/d$b),Math.round(d$k.spriteCount/d$b)-1):(d$k.drawCall=Math.round(d$k.drawCall/d$b)-2,d$k.shaderCall=Math.round(d$k.shaderCall/d$b)-4,Math.round(d$k.spriteCount/d$b)-4),d$k.spriteRenderUseCacheCount=Math.round(d$k.spriteRenderUseCacheCount/d$b),d$k.canvasNormal=Math.round(d$k.canvasNormal/d$b),d$k.canvasBitmap=Math.round(d$k.canvasBitmap/d$b),d$k.canvasReCache=Math.ceil(d$k.canvasReCache/d$b),d$k.treeNodeCollision=Math.round(d$k.treeNodeCollision/d$b),d$k.treeSpriteCollision=Math.round(d$k.treeSpriteCollision/d$b);var d$c=0<d$k.FPS?Math.floor(1e3/d$k.FPS).toString():" ";d$k._fpsStr=d$k.FPS+(d$k.renderSlow?" slow":"")+" "+d$c,d$k._spriteStr=d$k.spriteCount+(d$k.spriteRenderUseCacheCount?"/"+d$k.spriteRenderUseCacheCount:""),d$k._canvasStr=d$k.canvasReCache+"/"+d$k.canvasNormal+"/"+d$k.canvasBitmap,d$k.currentMemorySize=d$N.systemResourceManager.memorySize,d$k._useCanvas?d$k.renderInfoPre():d$k.renderInfo(),d$k.clear();}d$k._count=0,d$k._timer=d$a;}},d$k.renderInfoPre=function(){if(d$k._canvas){var d$a=d$k._ctx;d$a.clearRect(d$k._first?0:d$k._vx,0,d$k._width,d$k._height);for(var d$b=d$J.WebGL.mainContext,d$c=0;d$c<d$k._view.length;d$c++){var d$d=d$k._view[d$c];d$k._first&&(d$a.fillStyle="white",d$a.fillText(d$d.title,d$d.x,d$d.y,null,null,null)),d$a.fillStyle=d$d.color;var d$e=-1;if((d$d=d$k._view[d$c]).varying){if(d$b)switch(d$d.varying){case 1:d$e=d$b.getParameter(d$b[d$d.value]);break;case 2:d$e=d$b.getExtension(d$d.value);}}else d$e=d$k[d$d.value];"M"==d$d.units&&(d$e=Math.floor(d$e/1048576*100)/100+" M"),"K"==d$d.units&&(d$e=Math.floor(d$e/1024*100)/100+" K"),"string"==d$d.units&&(d$e=d$e.match(/\d+\.?\d/i)),d$a.fillText(d$e+"",d$d.x+d$k._vx,d$d.y,null,null,null);}}},d$k.renderInfo=function(){for(var d$a="",d$b=d$J.WebGL.mainContext,d$c=0;d$c<d$k._view.length;d$c++){var d$d=d$k._view[d$c],d$e=-1;if(d$d.varying){if(d$b)switch(d$d.varying){case 1:d$e=d$b.getParameter(d$b[d$d.value]);break;case 2:d$e=d$b.getExtension(d$d.value);}}else d$e=d$k[d$d.value];"M"==d$d.units&&(d$e=Math.floor(d$e/1048576*100)/100+" M"),"K"==d$d.units&&(d$e=Math.floor(d$e/1024*100)/100+" K"),"string"==d$d.units&&(d$e=d$e.match(/\d+\.?\d/i)),d$a+=d$e+"\n";}d$k._txt.text=d$a;},d$k.FPS=0,d$k.loopCount=0,d$k.shaderCall=0,d$k.drawCall=0,d$k.trianglesFaces=0,d$k.spriteCount=0,d$k.spriteRenderUseCacheCount=0,d$k.treeNodeCollision=0,d$k.treeSpriteCollision=0,d$k.canvasNormal=0,d$k.canvasBitmap=0,d$k.canvasReCache=0,d$k.renderSlow=!1,d$k.currentMemorySize=0,d$k._fpsStr=null,d$k._canvasStr=null,d$k._spriteStr=null,d$k._fpsData=[],d$k._timer=0,d$k._count=0,d$k._view=[],d$k._fontSize=12,d$k._txt=null,d$k._leftText=null,d$k._sp=null,d$k._show=!1,d$k._useCanvas=!1,d$k._canvas=null,d$k._ctx=null,d$k._first=!1,d$k._vx=NaN,d$k._width=0,d$k._height=100,d$k;}(),d$Y=(function(){function d$a(){this._strsToID={},this._idToStrs=[],this._length=0;}d$m(d$a,"laya.utils.StringKey");var d$b=d$a.prototype;d$b.add=function(d$a){var d$b=this._strsToID[d$a];return null!=d$b?d$b:(this._idToStrs[this._length]=d$a,this._strsToID[d$a]=this._length++);},d$b.getID=function(d$a){var d$b=this._strsToID[d$a];return null==d$b?-1:d$b;},d$b.getName=function(d$a){var d$b=this._idToStrs[d$a];return null==d$b?void 0:d$b;};}(),function(){var d$l;function d$a(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init();}d$m(d$a,"laya.utils.Timer");var d$b=d$a.prototype;return d$b._init=function(){d$z.timer&&d$z.timer.frameLoop(1,this,this._update);},d$b._now=function(){return Date.now();},d$b._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var d$a=this.currFrame=this.currFrame+this.scale,d$b=this._now();this._delta=(d$b-this._lastTimer)*this.scale;var d$c=this.currTimer=this.currTimer+this._delta;d$z.isDebug&&6e4<Math.abs(d$b-this._lastTimer)&&console.error("系统时间错误！"+(d$b-this._lastTimer)),this._lastTimer=d$b;var d$d=this._handlers;for(d$i=this._count=0,d$j=d$d.length;d$i<d$j;d$i++)if(null!==(d$k=d$d[d$i]).method){var d$e=d$k.userFrame?d$a:d$c;if(d$e>=d$k.exeTime)if(d$k.repeat){if(d$k.jumpFrame)for(;d$e>=d$k.exeTime;)d$k.exeTime+=d$k.delay,d$k.run(!1);else d$k.exeTime+=d$k.delay,d$k.run(!1),d$e>d$k.exeTime&&(d$k.exeTime+=Math.ceil((d$e-d$k.exeTime)/d$k.delay)*d$k.delay);}else d$k.run(!0);}else this._count++;(30<this._count||d$a%200==0)&&this._clearHandlers();for(var d$f=this._laters,d$i=0,d$j=d$f.length-1;d$i<=d$j;d$i++){var d$k=d$f[d$i];this._isIgnoreRecover(d$k)||(null!==d$k.method&&(delete this._map[d$k.key],d$k.run(!1)),this._recoverHandler(d$k)),d$i===d$j&&(d$j=d$f.length-1);}d$f.length=0;}},d$b._clearHandlers=function(){for(var d$a=this._handlers,d$b=0,d$c=d$a.length;d$b<d$c;d$b++){var d$d=d$a[d$b];null!==d$d.method?this._temp.push(d$d):this._isIgnoreRecover(d$d)?this._temp.push(d$d):this._recoverHandler(d$d);}this._handlers=this._temp,this._temp=d$a,this._temp.length=0;},d$b._recoverHandler=function(d$a){this._map[d$a.key]==d$a&&delete this._map[d$a.key],d$a.recover();},d$b._create=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){if(!d$c)return d$e.apply(d$d,d$f),null;if(d$i){var d$k=this._getHandler(d$d,d$e);if(d$k)return d$k.repeat=d$b,d$k.userFrame=d$a,d$k.delay=d$c,d$k.ignoreRecover=d$j,d$k.caller=d$d,d$k.method=d$e,d$k.args=d$f,d$k.exeTime=d$c+(d$a?this.currFrame:this.currTimer+this._now()-this._lastTimer),d$k;}return(d$k=d$l.create()).repeat=d$b,d$k.userFrame=d$a,d$k.delay=d$c,d$k.ignoreRecover=d$j,d$k.caller=d$d,d$k.method=d$e,d$k.args=d$f,d$k.exeTime=d$c+(d$a?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(d$k),this._handlers.push(d$k),d$k;},d$b._indexHandler=function(d$a){var d$b=d$a.caller,d$c=d$a.method,d$d=d$b?d$b.$_GID||(d$b.$_GID=d$$.getGID()):0,d$e=d$c.$_TID||(d$c.$_TID=this._mid++);d$a.key=d$d+"_"+d$e,this._map[d$a.key]=d$a;},d$b.once=function(d$a,d$b,d$c,d$d,d$e){void 0===d$e&&(d$e=!0),this._create(!1,!1,d$a,d$b,d$c,d$d,d$e,!1);},d$b.loop=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){void 0===d$e&&(d$e=!0),void 0===d$f&&(d$f=!1),void 0===d$i&&(d$i=!1);var d$j=this._create(!1,!0,d$a,d$b,d$c,d$d,d$e,d$i);d$j&&(d$j.jumpFrame=d$f);},d$b.frameOnce=function(d$a,d$b,d$c,d$d,d$e){void 0===d$e&&(d$e=!0),this._create(!0,!1,d$a,d$b,d$c,d$d,d$e,!1);},d$b.frameLoop=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$e&&(d$e=!0),void 0===d$f&&(d$f=!1),this._create(!0,!0,d$a,d$b,d$c,d$d,d$e,d$f);},d$b.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+d$l._freeCount;},d$b.clear=function(d$a,d$b){var d$c=this._getHandler(d$a,d$b);return!(!d$c||this._isIgnoreRecover(d$c))&&(delete this._map[d$c.key],d$c.key=null,d$c.clear(),!0);},d$b.clearAll=function(d$a){if(d$a)for(var d$b=0,d$c=this._handlers.length;d$b<d$c;d$b++){var d$d=this._handlers[d$b];d$d.caller===d$a&&(this._isIgnoreRecover(d$d)||(delete this._map[d$d.key],d$d.key=null,d$d.clear()));}},d$b._getHandler=function(d$a,d$b){var d$c=d$a?d$a.$_GID||(d$a.$_GID=d$$.getGID()):0,d$d=d$b.$_TID||(d$b.$_TID=this._mid++);return this._map[d$c+"_"+d$d];},d$b._isIgnoreRecover=function(d$a){if(d$a.ignoreRecover||d$a.caller&&"IgnoreRecover"==d$a.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var d$b="";try{arguments.propertyIsEnumerable.caller;}catch(d$a){d$b=d$a.stack;}d$z.recordError("报错：核心定时器销毁忽略  "+d$b);}return!0;}return!1;},d$b.hasHandler=function(d$a,d$b){return this._map[d$a.$_GID+"_"+d$b.$_TID];},d$b.callLater=function(d$a,d$b,d$c){if(null==this._getHandler(d$a,d$b)){var d$d=d$l.create();d$d.caller=d$a,d$d.method=d$b,d$d.args=d$c,this._indexHandler(d$d),this._laters.push(d$d);}},d$b.runCallLater=function(d$a,d$b){var d$c=this._getHandler(d$a,d$b);d$c&&null!=d$c.method&&(this._isIgnoreRecover(d$c)||(delete this._map[d$c.key],d$c.run(!0)));},d$b.runTimer=function(d$a,d$b){this.runCallLater(d$a,d$b);},d$q(0,d$b,"delta",function(){return this._delta;}),d$a.__init$=function(){d$l=function(){function d$b(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1;}d$m(d$b,"");var d$a=d$b.prototype;return d$a.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1;},d$a.recover=function(){this.clear(),this.args=d$b._freeHandler,d$b._freeHandler=this,d$b._freeCount++;},d$a.run=function(d$a){var d$b=this.caller;if(d$b&&d$b.destroyed)return this.clear();var d$c=this.method,d$d=this.args;d$a&&this.clear(),null!=d$c&&(d$d?d$c.apply(d$b,d$d):d$c.call(d$b));},d$b._freeHandler=null,d$b._freeCount=0,d$b.create=function(){var d$a=d$b._freeHandler;return d$a?(d$b._freeHandler=d$a.args,--d$b._freeCount,d$a.args=null,d$a):new d$b();},d$b;}();},d$a;}()),d$Z=function(){function d$n(){this.gid=0;}d$m(d$n,"laya.utils.Tween");var d$a=d$n.prototype;return d$a.to=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){return void 0===d$f&&(d$f=0),void 0===d$i&&(d$i=!1),this._create(d$a,d$b,d$c,d$d,d$e,d$f,d$i,!0,!1,!0);},d$a.from=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){return void 0===d$f&&(d$f=0),void 0===d$i&&(d$i=!1),this._create(d$a,d$b,d$c,d$d,d$e,d$f,d$i,!1,!1,!0);},d$a._create=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){if(!d$a)throw new Error("Tween:target is null");this._target=d$a,this._duration=d$c,this._ease=d$d||d$b.ease||d$n.easeNone,this._complete=d$e||d$b.complete,this._delay=d$f,this._props=[],this._usedTimer=0,this._startTimer=d$O.now(),this._usedPool=d$k,this._delayParam=null,this.update=d$b.update;var d$m=d$a.$_GID||(d$a.$_GID=d$$.getGID());return d$n.tweenMap[d$m]?(d$i&&d$n.clearTween(d$a),d$n.tweenMap[d$m].push(this)):d$n.tweenMap[d$m]=[this],d$l?d$f<=0?this.firstStart(d$a,d$b,d$j):(this._delayParam=[d$a,d$b,d$j],d$z.scaleTimer.once(d$f,this,this.firstStart,this._delayParam)):this._initProps(d$a,d$b,d$j),this;},d$a.firstStart=function(d$a,d$b,d$c){this._delayParam=null,d$a.destroyed?this.clear():(this._initProps(d$a,d$b,d$c),this._beginLoop());},d$a._initProps=function(d$a,d$b,d$c){for(var d$d in d$b)if("number"==typeof d$a[d$d]){var d$e=d$c?d$a[d$d]:d$b[d$d],d$f=d$c?d$b[d$d]:d$a[d$d];this._props.push([d$d,d$e,d$f-d$e]),d$c||(d$a[d$d]=d$e);}},d$a._beginLoop=function(){d$z.scaleTimer.frameLoop(1,this,this._doEase);},d$a._doEase=function(){this._updateEase(d$O.now());},d$a._updateEase=function(d$a){var d$b=this._target;if(d$b){if(d$b.destroyed)return d$n.clearTween(d$b);var d$c=this._usedTimer=d$a-this._startTimer-this._delay;if(!(d$c<0)){if(d$c>=this._duration)return this.complete();for(var d$d=0<d$c?this._ease(d$c,0,1,this._duration):0,d$e=this._props,d$f=0,d$i=d$e.length;d$f<d$i;d$f++){var d$j=d$e[d$f];d$b[d$j[0]]=d$j[1]+d$d*d$j[2];}this.update&&this.update.run();}}},d$a.complete=function(){if(this._target){d$z.scaleTimer.runTimer(this,this.firstStart);for(var d$a=this._target,d$b=this._props,d$c=this._complete,d$d=0,d$e=d$b.length;d$d<d$e;d$d++){var d$f=d$b[d$d];d$a[d$f[0]]=d$f[1]+d$f[2];}this.update&&this.update.run(),this.clear(),d$c&&d$c.run();}},d$a.pause=function(){d$z.scaleTimer.clear(this,this._beginLoop),d$z.scaleTimer.clear(this,this._doEase),d$z.scaleTimer.clear(this,this.firstStart);var d$a;(d$a=d$O.now()-this._startTimer-this._delay)<0&&(this._usedTimer=d$a);},d$a.setStartTime=function(d$a){this._startTimer=d$a;},d$a.clear=function(){this._target&&(this._remove(),this._clear());},d$a._clear=function(){this.pause(),d$z.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,d$W.recover("tween",this));},d$a.recover=function(){this._usedPool=!0,this._clear();},d$a._remove=function(){var d$a=d$n.tweenMap[this._target.$_GID];if(d$a)for(var d$b=0,d$c=d$a.length;d$b<d$c;d$b++)if(d$a[d$b]===this){d$a.splice(d$b,1);break;}},d$a.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=d$O.now(),this._delayParam)d$z.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var d$a=this._props,d$b=0,d$c=d$a.length;d$b<d$c;d$b++){var d$d=d$a[d$b];this._target[d$d[0]]=d$d[1];}d$z.scaleTimer.once(this._delay,this,this._beginLoop);}},d$a.resume=function(){this._usedTimer>=this._duration||(this._startTimer=d$O.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?d$z.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop());},d$q(0,d$a,"progress",null,function(d$a){var d$b=d$a*this._duration;this._startTimer=d$O.now()-this._delay-d$b;}),d$n.to=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){return void 0===d$f&&(d$f=0),void 0===d$i&&(d$i=!1),void 0===d$j&&(d$j=!0),d$W.getItemByClass("tween",d$n)._create(d$a,d$b,d$c,d$d,d$e,d$f,d$i,!0,d$j,!0);},d$n.from=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){return void 0===d$f&&(d$f=0),void 0===d$i&&(d$i=!1),void 0===d$j&&(d$j=!0),d$W.getItemByClass("tween",d$n)._create(d$a,d$b,d$c,d$d,d$e,d$f,d$i,!1,d$j,!0);},d$n.clearAll=function(d$a){if(d$a&&d$a.$_GID){var d$b=d$n.tweenMap[d$a.$_GID];if(d$b){for(var d$c=0,d$d=d$b.length;d$c<d$d;d$c++)d$b[d$c]._clear();d$b.length=0;}}},d$n.clear=function(d$a){d$a.clear();},d$n.clearTween=function(d$a){d$n.clearAll(d$a);},d$n.easeNone=function(d$a,d$b,d$c,d$d){return d$c*d$a/d$d+d$b;},d$n.tweenMap={},d$n;}(),d$$=function(){function d$j(){}return d$m(d$j,"laya.utils.Utils"),d$j.toRadian=function(d$a){return d$a*d$j._pi2;},d$j.toAngle=function(d$a){return d$a*d$j._pi;},d$j.toHexColor=function(d$a){if(d$a<0||isNaN(d$a))return null;for(var d$b=d$a.toString(16);d$b.length<6;)d$b="0"+d$b;return"#"+d$b;},d$j.getGID=function(){return d$j._gid++;},d$j.concatArray=function(d$a,d$b){if(!d$b)return d$a;if(!d$a)return d$b;var d$c=0,d$d=d$b.length;for(d$c=0;d$c<d$d;d$c++)d$a.push(d$b[d$c]);return d$a;},d$j.clearArray=function(d$a){return d$a&&(d$a.length=0),d$a;},d$j.copyArray=function(d$a,d$b){if(d$a||(d$a=[]),!d$b)return d$a;d$a.length=d$b.length;var d$c=0,d$d=d$b.length;for(d$c=0;d$c<d$d;d$c++)d$a[d$c]=d$b[d$c];return d$a;},d$j.getGlobalRecByPoints=function(d$a,d$b,d$c,d$d,d$e){var d$f,d$i;return d$f=new d$A(d$b,d$c),d$f=d$a.localToGlobal(d$f),d$i=new d$A(d$d,d$e),d$i=d$a.localToGlobal(d$i),d$B._getWrapRec([d$f.x,d$f.y,d$i.x,d$i.y]);},d$j.getGlobalPosAndScale=function(d$a){return d$j.getGlobalRecByPoints(d$a,0,0,1,1);},d$j.bind=function(d$a,d$b){return d$a.bind(d$b);},d$j.measureText=function(d$a,d$b){return d$F.measureText(d$a,d$b);},d$j.contextMeasureText=function(d$a){var d$b=d$O.context.measureText(d$a);return d$b||(d$b={width:16,height:16}),d$b;},d$j.updateOrder=function(d$a){if(!d$a||d$a.length<2)return!1;for(var d$b,d$c=1,d$d=0,d$e=d$a.length,d$f=NaN;d$c<d$e;){for(d$b=d$a[d$d=d$c],d$f=d$a[d$d]._zOrder;-1<--d$d&&d$a[d$d]._zOrder>d$f;)d$a[d$d+1]=d$a[d$d];d$a[d$d+1]=d$b,d$c++;}var d$i=d$b.parent.conchModel;if(d$i)if(null!=d$i.updateZOrder)d$i.updateZOrder();else{for(d$c=0;d$c<d$e;d$c++)d$i.removeChild(d$a[d$c].conchModel);for(d$c=0;d$c<d$e;d$c++)d$i.addChildAt(d$a[d$c].conchModel,d$c);}return!0;},d$j.transPointList=function(d$a,d$b,d$c){var d$d=0,d$e=d$a.length;for(d$d=0;d$d<d$e;d$d+=2)d$a[d$d]+=d$b,d$a[d$d+1]+=d$c;},d$j.parseInt=function(d$a,d$b){void 0===d$b&&(d$b=0);var d$c=d$O.window.parseInt(d$a,d$b);return isNaN(d$c)?0:d$c;},d$j.getFileExtension=function(d$a){d$j._extReg.lastIndex=d$a.lastIndexOf(".");var d$b=d$j._extReg.exec(d$a);return d$b&&1<d$b.length?d$b[1].toLowerCase():null;},d$j.getTransformRelativeToWindow=function(d$a,d$b,d$c){var d$d=d$z.stage,d$e=laya.utils.Utils.getGlobalPosAndScale(d$a),d$f=d$d._canvasTransform.clone(),d$i=d$f.tx,d$j=d$f.ty;d$f.rotate(-Math.PI/180*d$z.stage.canvasDegree),d$f.scale(d$z.stage.clientScaleX,d$z.stage.clientScaleY);var d$k=d$z.stage.canvasDegree%180!=0,d$l=NaN,d$m=NaN;d$k?(d$l=d$c+d$e.y,d$m=d$b+d$e.x,d$l*=d$f.d,d$m*=d$f.a,90==d$z.stage.canvasDegree?(d$l=d$i-d$l,d$m+=d$j):(d$l+=d$i,d$m=d$j-d$m)):(d$l=d$b+d$e.x,d$m=d$c+d$e.y,d$l*=d$f.a,d$m*=d$f.d,d$l+=d$i,d$m+=d$j);var d$n=NaN,d$o=NaN;return d$o=d$k?(d$n=d$f.d*d$e.height,d$f.a*d$e.width):(d$n=d$f.a*d$e.width,d$f.d*d$e.height),{x:d$l,y:d$m,scaleX:d$n,scaleY:d$o};},d$j.fitDOMElementInArea=function(d$a,d$b,d$c,d$d,d$e,d$f){d$a._fitLayaAirInitialized||(d$a._fitLayaAirInitialized=!0,d$a.style.transformOrigin=d$a.style.webKittransformOrigin="left top",d$a.style.position="absolute");var d$i=d$j.getTransformRelativeToWindow(d$b,d$c,d$d);d$a.style.transform=d$a.style.webkitTransform="scale("+d$i.scaleX+","+d$i.scaleY+") rotate("+d$z.stage.canvasDegree+"deg)",d$a.style.width=d$e+"px",d$a.style.height=d$f+"px",d$a.style.left=d$i.x+"px",d$a.style.top=d$i.y+"px";},d$j.isOkTextureList=function(d$a){if(!d$a)return!1;var d$b,d$c=0,d$d=d$a.length;for(d$c=0;d$c<d$d;d$c++)if(!(d$b=d$a[d$c])||!d$b.source)return!1;return!0;},d$j.isOKCmdList=function(d$a){if(!d$a)return!1;var d$b,d$c,d$d=0,d$e=d$a.length,d$f=d$J._context;for(d$d=0;d$d<d$e;d$d++)switch((d$b=d$a[d$d]).callee){case d$f._drawTexture:case d$f._fillTexture:case d$f._drawTextureWithTransform:if(!(d$c=d$b[0])||!d$c.source)return!1;}return!0;},d$j._gid=1,d$j._pi=180/Math.PI,d$j._pi2=Math.PI/180,d$j._extReg=/\.(\w+)\??/g,d$j.parseXMLFromString=function(d$a){var d$b;if(d$a=d$a.replace(/>\s+</g,"><"),-1<(d$b=new DOMParser().parseFromString(d$a,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(d$b.firstChild.firstChild.textContent);return d$b;},d$j;}(),d$_=function(){function d$a(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],d$J.isWebGL&&d$Q.regCacheByFunction(d$$.bind(this.startDispose,this),d$$.bind(this.getCacheList,this));}d$m(d$a,"laya.utils.VectorGraphManager");var d$b=d$a.prototype;return d$b.getId=function(){return this._id++;},d$b.addShape=function(d$a,d$b){this.shapeDic[d$a]=d$b,this.useDic[d$a]||(this.useDic[d$a]=!0);},d$b.addLine=function(d$a,d$b){this.shapeLineDic[d$a]=d$b,this.shapeLineDic[d$a]||(this.shapeLineDic[d$a]=!0);},d$b.getShape=function(d$a){this._checkKey&&null!=this.useDic[d$a]&&(this.useDic[d$a]=!0);},d$b.deleteShape=function(d$a){this.shapeDic[d$a]&&(this.shapeDic[d$a]=null,delete this.shapeDic[d$a]),this.shapeLineDic[d$a]&&(this.shapeLineDic[d$a]=null,delete this.shapeLineDic[d$a]),null!=this.useDic[d$a]&&delete this.useDic[d$a];},d$b.getCacheList=function(){var d$a,d$b=[];for(d$a in this.shapeDic)d$b.push(this.shapeDic[d$a]);for(d$a in this.shapeLineDic)d$b.push(this.shapeLineDic[d$a]);return d$b;},d$b.startDispose=function(d$a){var d$b;for(d$b in this.useDic)this.useDic[d$b]=!1;this._checkKey=!0;},d$b.endDispose=function(){if(this._checkKey){var d$a;for(d$a in this.useDic)this.useDic[d$a]||this.deleteShape(d$a);this._checkKey=!1;}},d$a.getInstance=function(){return d$a.instance=d$a.instance||new d$a();},d$a.instance=null,d$a;}(),d$g=function(){function d$d(){this._obj=null,this._obj=d$d.supportWeakMap?new d$O.window.WeakMap():{},d$d.supportWeakMap||d$d._maps.push(this);}d$m(d$d,"laya.utils.WeakObject");var d$a=d$d.prototype;return d$a.set=function(d$a,d$b){if(null!=d$a)if(d$d.supportWeakMap){var d$c=d$a;"string"!=typeof d$a&&"number"!=typeof d$a||(d$c=d$d._keys[d$a])||(d$c=d$d._keys[d$a]={k:d$a}),this._obj.set(d$c,d$b);}else"string"==typeof d$a||"number"==typeof d$a?this._obj[d$a]=d$b:(d$a.$_GID||(d$a.$_GID=d$$.getGID()),this._obj[d$a.$_GID]=d$b);},d$a.get=function(d$a){if(null==d$a)return null;if(d$d.supportWeakMap){var d$b="string"==typeof d$a||"number"==typeof d$a?d$d._keys[d$a]:d$a;return d$b?this._obj.get(d$b):null;}return"string"==typeof d$a||"number"==typeof d$a?this._obj[d$a]:this._obj[d$a.$_GID];},d$a.del=function(d$a){if(null!=d$a)if(d$d.supportWeakMap){var d$b="string"==typeof d$a||"number"==typeof d$a?d$d._keys[d$a]:d$a;if(!d$b)return;this._obj.delete(d$b);}else"string"==typeof d$a||"number"==typeof d$a?delete this._obj[d$a]:delete this._obj[this._obj.$_GID];},d$a.has=function(d$a){if(null==d$a)return!1;if(d$d.supportWeakMap){var d$b="string"==typeof d$a||"number"==typeof d$a?d$d._keys[d$a]:d$a;return this._obj.has(d$b);}return"string"==typeof d$a||"number"==typeof d$a?null!=this._obj[d$a]:null!=this._obj[this._obj.$_GID];},d$d.__init__=function(){(d$d.supportWeakMap=null!=d$O.window.WeakMap)||d$z.timer.loop(d$d.delInterval,null,d$d.clearCache);},d$d.clearCache=function(){for(var d$a=0,d$b=d$d._maps.length;d$a<d$b;d$a++){d$d._maps[d$a]._obj={};}},d$d.supportWeakMap=!1,d$d.delInterval=3e5,d$d._keys={},d$d._maps=[],d$k(d$d,["I",function(){return this.I=new d$d();}]),d$d;}(),d$h=function(){function d$a(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null;}d$m(d$a,"laya.utils.WordText");var d$b=d$a.prototype;return d$b.setText=function(d$a){this.changed=!0,this._text=d$a;},d$b.toString=function(){return this._text;},d$b.charCodeAt=function(d$a){return this._text?this._text.charCodeAt(d$a):NaN;},d$b.charAt=function(d$a){return this._text?this._text.charAt(d$a):null;},d$q(0,d$b,"length",function(){return this._text?this._text.length:0;}),d$a;}(),d$aa=function(d$a){function d$i(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,d$i.__super.call(this),this._childs=d$i.ARRAY_EMPTY,this._$P=d$i.PROP_EMPTY,this.timer=d$z.scaleTimer,this.conchModel=d$J.isConchNode?this.createConchModel():null;}d$m(d$i,"laya.display.Node",d$l);var d$b=d$i.prototype;return d$b._setBit=function(d$a,d$b){1==d$a&&this._getBit(d$a)!=d$b&&this._updateDisplayedInstage();d$b?this._bits|=d$a:this._bits&=~d$a;},d$b._getBit=function(d$a){return 0!=(this._bits&d$a);},d$b._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1);},d$b._setUpNoticeType=function(d$a){var d$b=this;for(d$b._setBit(d$a,!0),d$b=d$b.parent;d$b;){if(d$b._getBit(d$a))return;d$b._setBit(d$a,!0),d$b=d$b.parent;}},d$b.on=function(d$a,d$b,d$c,d$d){return"display"!==d$a&&"undisplay"!==d$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(d$a,d$b,d$c,d$d,!1);},d$b.once=function(d$a,d$b,d$c,d$d){return"display"!==d$a&&"undisplay"!==d$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(d$a,d$b,d$c,d$d,!0);},d$b.createConchModel=function(){return null;},d$b.destroy=function(d$a){void 0===d$a&&(d$a=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(d$a?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this);},d$b.destroyChildren=function(){if(this._childs)for(var d$a=this._childs.length-1;-1<d$a;d$a--)this._childs[d$a].destroy(!0);},d$b.addChild=function(d$a){if(!d$a||this.destroyed||d$a===this)return d$a;if(d$a.zOrder&&this._set$P("hasZorder",!0),d$a._parent===this){var d$b=this.getChildIndex(d$a);d$b!==this._childs.length-1&&(this._childs.splice(d$b,1),this._childs.push(d$a),this.conchModel&&(this.conchModel.removeChild(d$a.conchModel),this.conchModel.addChildAt(d$a.conchModel,this._childs.length-1)),this._childChanged());}else d$a.parent&&d$a.parent.removeChild(d$a),this._childs===d$i.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(d$a),this.conchModel&&this.conchModel.addChildAt(d$a.conchModel,this._childs.length-1),(d$a.parent=this)._childChanged();return d$a;},d$b.addChildren=function(d$a){for(var d$b=arguments,d$c=0,d$d=d$b.length;d$c<d$d;)this.addChild(d$b[d$c++]);},d$b.addChildAt=function(d$a,d$b){if(!d$a||this.destroyed||d$a===this)return d$a;if(d$a.zOrder&&this._set$P("hasZorder",!0),0<=d$b&&d$b<=this._childs.length){if(d$a._parent===this){var d$c=this.getChildIndex(d$a);this._childs.splice(d$c,1),this._childs.splice(d$b,0,d$a),this.conchModel&&(this.conchModel.removeChild(d$a.conchModel),this.conchModel.addChildAt(d$a.conchModel,d$b)),this._childChanged();}else d$a.parent&&d$a.parent.removeChild(d$a),this._childs===d$i.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(d$b,0,d$a),this.conchModel&&this.conchModel.addChildAt(d$a.conchModel,d$b),d$a.parent=this;return d$a;}throw new Error("appendChildAt:The index is out of bounds");},d$b.getChildIndex=function(d$a){return this._childs.indexOf(d$a);},d$b.getChildByName=function(d$a){var d$b=this._childs;if(d$b)for(var d$c=0,d$d=d$b.length;d$c<d$d;d$c++){var d$e=d$b[d$c];if(d$e.name===d$a)return d$e;}return null;},d$b._get$P=function(d$a){return this._$P[d$a];},d$b._set$P=function(d$a,d$b){return this.destroyed||(this._$P===d$i.PROP_EMPTY&&(this._$P={}),this._$P[d$a]=d$b),d$b;},d$b.getChildAt=function(d$a){return this._childs[d$a];},d$b.setChildIndex=function(d$a,d$b){var d$c=this._childs;if(d$b<0||d$b>=d$c.length)throw new Error("setChildIndex:The index is out of bounds.");var d$d=this.getChildIndex(d$a);if(d$d<0)throw new Error("setChildIndex:node is must child of this object.");return d$c.splice(d$d,1),d$c.splice(d$b,0,d$a),this.conchModel&&(this.conchModel.removeChild(d$a.conchModel),this.conchModel.addChildAt(d$a.conchModel,d$b)),this._childChanged(),d$a;},d$b._childChanged=function(d$a){},d$b.removeChild=function(d$a){if(!this._childs)return d$a;var d$b=this._childs.indexOf(d$a);return this.removeChildAt(d$b);},d$b.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this;},d$b.removeChildByName=function(d$a){var d$b=this.getChildByName(d$a);return d$b&&this.removeChild(d$b),d$b;},d$b.removeChildAt=function(d$a){var d$b=this.getChildAt(d$a);if(d$b){for(var d$c=this._childs.length-1,d$d=d$a;d$d<d$c;++d$d)this._childs[d$d]=this._childs[d$d+1];this._childs.length=d$c,this.conchModel&&this.conchModel.removeChild(d$b.conchModel),d$b.parent=null;}return d$b;},d$b.removeChildren=function(d$a,d$b){if(void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=2147483647),this._childs&&0<this._childs.length){var d$c=this._childs;if(0===d$a&&d$f<=d$b){var d$d=d$c;this._childs=d$i.ARRAY_EMPTY;}else d$d=d$c.splice(d$a,d$b-d$a);for(var d$e=0,d$f=d$d.length;d$e<d$f;d$e++)d$d[d$e].parent=null,this.conchModel&&this.conchModel.removeChild(d$d[d$e].conchModel);}return this;},d$b.replaceChild=function(d$a,d$b){var d$c=this._childs.indexOf(d$b);return-1<d$c?(this._childs.splice(d$c,1,d$a),this.conchModel&&(this.conchModel.removeChild(d$b.conchModel),this.conchModel.addChildAt(d$a.conchModel,d$c)),d$b.parent=null,d$a.parent=this,d$a):null;},d$b._updateDisplayedInstage=function(){var d$a;d$a=this;var d$b=d$z.stage;for(this._displayedInStage=!1;d$a;){if(d$a._getBit(1)){this._displayedInStage=d$a._displayedInStage;break;}if(d$a==d$b||d$a._displayedInStage){this._displayedInStage=!0;break;}d$a=d$a.parent;}},d$b._setDisplay=function(d$a){this._displayedInStage!==d$a&&((this._displayedInStage=d$a)?this.event("display"):this.event("undisplay"));},d$b._displayChild=function(d$a,d$b){var d$c=d$a._childs;if(d$c)for(var d$d=0;d$d<d$c.length;d$d++){var d$e=d$c[d$d];d$e&&d$e._getBit(1)&&(0<d$e._childs.length?this._displayChild(d$e,d$b):d$e._setDisplay(d$b));}d$a._setDisplay(d$b);},d$b.contains=function(d$a){if(d$a===this)return!0;for(;d$a;){if(d$a.parent===this)return!0;d$a=d$a.parent;}return!1;},d$b.timerLoop=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$e&&(d$e=!0),void 0===d$f&&(d$f=!1),this.timer.loop(d$a,d$b,d$c,d$d,d$e,d$f);},d$b.timerOnce=function(d$a,d$b,d$c,d$d,d$e){void 0===d$e&&(d$e=!0),this.timer._create(!1,!1,d$a,d$b,d$c,d$d,d$e);},d$b.frameLoop=function(d$a,d$b,d$c,d$d,d$e){void 0===d$e&&(d$e=!0),this.timer._create(!0,!0,d$a,d$b,d$c,d$d,d$e);},d$b.frameOnce=function(d$a,d$b,d$c,d$d,d$e){void 0===d$e&&(d$e=!0),this.timer._create(!0,!1,d$a,d$b,d$c,d$d,d$e);},d$b.clearTimer=function(d$a,d$b){this.timer.clear(d$a,d$b);},d$q(0,d$b,"numChildren",function(){return this._childs.length;}),d$q(0,d$b,"destroyed",function(){return this._destroyed;}),d$q(0,d$b,"parent",function(){return this._parent;},function(d$a){this._parent!==d$a&&(d$a?(this._parent=d$a,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),d$a.displayedInStage&&this._displayChild(this,!0)),d$a._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=d$a));}),d$q(0,d$b,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage;}),d$i.ARRAY_EMPTY=[],d$i.PROP_EMPTY={},d$i.NOTICE_DISPLAY=1,d$i.MOUSEENABLE=2,d$i;}(),d$ba=function(d$a){function d$o(d$a){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,d$o.__super.call(this),this._padding=d$o._PADDING,this._spacing=d$o._SPACING,this._aligns=d$o._ALIGNS,this._font=d$p.EMPTY,this._ower=d$a;}d$m(d$o,"laya.display.css.CSSStyle",d$a);var d$b=d$o.prototype;return d$b.destroy=function(){this._ower=null,this._font=null,this._rect=null;},d$b.inherit=function(d$a){this._font=d$a._font,this._spacing=d$a._spacing===d$o._SPACING?d$o._SPACING:d$a._spacing.slice(),this.lineHeight=d$a.lineHeight;},d$b._widthAuto=function(){return 0!=(262144&this._type);},d$b.widthed=function(d$a){return 0!=(8&this._type);},d$b._calculation=function(d$a,d$b){if(d$b.indexOf("%")<0)return!1;var d$d=this._ower,d$e=d$d.parent,d$f=this._rect;function d$i(d$a,d$b,d$c){return d$a*d$c[0]+d$b*d$c[1]+d$c[2];}function d$c(d$a){var d$b=d$e.width,d$c=d$d.width;d$f.width&&(d$d.width=d$i(d$b,d$c,d$f.width)),d$f.height&&(d$d.height=d$i(d$b,d$c,d$f.height)),d$f.left&&(d$d.x=d$i(d$b,d$c,d$f.left)),d$f.top&&(d$d.y=d$i(d$b,d$c,d$f.top));}null===d$f&&(d$e._getCSSStyle()._type|=524288,d$e.on("resize",this,d$c),this._rect=d$f={input:{}});var d$j=d$b.split(" ");return d$j[0]=parseFloat(d$j[0])/100,1==d$j.length?d$j[1]=d$j[2]=0:(d$j[1]=parseFloat(d$j[1])/100,d$j[2]=parseFloat(d$j[2])),d$f[d$a]=d$j,d$f.input[d$a]=d$b,d$c(),!0;},d$b.heighted=function(d$a){return 0!=(8192&this._type);},d$b.size=function(d$a,d$b){var d$c=this._ower,d$d=!1;-1!==d$a&&d$a!=this._ower.width&&(this._type|=8,this._ower.width=d$a,d$d=!0),-1!==d$b&&d$b!=this._ower.height&&(this._type|=8192,this._ower.height=d$b,d$d=!0),d$d&&(d$c._layoutLater(),524288&this._type&&d$c.event("resize",this));},d$b._getAlign=function(){return this._aligns[0];},d$b._getValign=function(){return this._aligns[1];},d$b._getCssFloat=function(){return 0!=(32768&this._type)?32768:0;},d$b._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new d$p(this._font));},d$b.render=function(d$a,d$b,d$c,d$d){var d$e=d$a.width,d$f=d$a.height;d$c-=d$a.pivotX,d$d-=d$a.pivotY,this._bgground&&null!=this._bgground.color&&d$b.ctx.fillRect(d$c,d$d,d$e,d$f,this._bgground.color),this._border&&this._border.color&&d$b.drawRect(d$c,d$d,d$e,d$f,this._border.color.strColor,this._border.size);},d$b.getCSSStyle=function(){return this;},d$b.cssText=function(d$a){this.attrs(d$o.parseOneCSS(d$a,";"));},d$b.attrs=function(d$a){if(d$a)for(var d$b=0,d$c=d$a.length;d$b<d$c;d$b++){var d$d=d$a[d$b];this[d$d[0]]=d$d[1];}},d$b.setTransform=function(d$a){"none"===d$a?this._tf=d$j._TF_EMPTY:this.attrs(d$o.parseOneCSS(d$a,","));},d$b.translate=function(d$a,d$b){this._tf===d$j._TF_EMPTY&&(this._tf=new d$e()),this._tf.translateX=d$a,this._tf.translateY=d$b;},d$b.scale=function(d$a,d$b){this._tf===d$j._TF_EMPTY&&(this._tf=new d$e()),this._tf.scaleX=d$a,this._tf.scaleY=d$b;},d$b._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type);},d$q(0,d$b,"block",d$a.prototype._$get_block,function(d$a){d$a?this._type|=1:this._type&=-2;}),d$q(0,d$b,"valign",function(){return d$o._valigndef[this._aligns[1]];},function(d$a){this._aligns===d$o._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=d$o._valigndef[d$a];}),d$q(0,d$b,"height",null,function(d$a){if(this._type|=8192,"string"==typeof d$a){if(this._calculation("height",d$a))return;d$a=parseInt(d$a);}this.size(-1,d$a);}),d$q(0,d$b,"width",null,function(d$a){if(this._type|=8,"string"==typeof d$a){var d$b=d$a.indexOf("auto");if(0<=d$b&&(this._type|=262144,d$a=d$a.substr(0,d$b)),this._calculation("width",d$a))return;d$a=parseInt(d$a);}this.size(d$a,-1);}),d$q(0,d$b,"fontWeight",function(){return this._font.weight;},function(d$a){this._createFont().weight=d$a;}),d$q(0,d$b,"left",null,function(d$a){var d$b=this._ower;if("string"==typeof d$a){if("center"===d$a?d$a="50% -50% 0":"right"===d$a&&(d$a="100% -100% 0"),this._calculation("left",d$a))return;d$a=parseInt(d$a);}d$b.x=d$a;}),d$q(0,d$b,"_translate",null,function(d$a){this.translate(d$a[0],d$a[1]);}),d$q(0,d$b,"absolute",function(){return 0!=(4&this._type);}),d$q(0,d$b,"top",null,function(d$a){var d$b=this._ower;if("string"==typeof d$a){if("middle"===d$a?d$a="50% -50% 0":"bottom"===d$a&&(d$a="100% -100% 0"),this._calculation("top",d$a))return;d$a=parseInt(d$a);}d$b.y=d$a;}),d$q(0,d$b,"align",function(){return d$o._aligndef[this._aligns[0]];},function(d$a){this._aligns===d$o._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=d$o._aligndef[d$a];}),d$q(0,d$b,"bold",function(){return this._font.bold;},function(d$a){this._createFont().bold=d$a;}),d$q(0,d$b,"padding",function(){return this._padding;},function(d$a){this._padding=d$a;}),d$q(0,d$b,"leading",function(){return this._spacing[1];},function(d$a){"string"==typeof d$a&&(d$a=parseInt(d$a+"")),this._spacing===d$o._SPACING&&(this._spacing=[0,0]),this._spacing[1]=d$a;}),d$q(0,d$b,"lineElement",function(){return 0!=(65536&this._type);},function(d$a){d$a?this._type|=65536:this._type&=-65537;}),d$q(0,d$b,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left";},function(d$a){this.lineElement=!1,"right"===d$a?this._type|=32768:this._type&=-32769;}),d$q(0,d$b,"textDecoration",function(){return this._font.decoration;},function(d$a){this._createFont().decoration=d$a;}),d$q(0,d$b,"whiteSpace",function(){return 131072&this._type?"nowrap":"";},function(d$a){"nowrap"===d$a&&(this._type|=131072),"none"===d$a&&(this._type&=-131073);}),d$q(0,d$b,"background",null,function(d$a){d$a?(this._bgground||(this._bgground={}),this._bgground.color=d$a,this._ower.conchModel&&this._ower.conchModel.bgColor(d$a),this._type|=16384,this._ower._renderType|=256):this._bgground=null;}),d$q(0,d$b,"wordWrap",function(){return 0==(131072&this._type);},function(d$a){d$a?this._type&=-131073:this._type|=131072;}),d$q(0,d$b,"color",function(){return this._font.color;},function(d$a){this._createFont().color=d$a;}),d$q(0,d$b,"password",function(){return this._font.password;},function(d$a){this._createFont().password=d$a;}),d$q(0,d$b,"backgroundColor",function(){return this._bgground?this._bgground.color:null;},function(d$a){"none"===d$a?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=d$a),this._ower.conchModel&&this._ower.conchModel.bgColor(d$a),this._ower._renderType|=256;}),d$q(0,d$b,"font",function(){return this._font.toString();},function(d$a){this._createFont().set(d$a);}),d$q(0,d$b,"weight",null,function(d$a){this._createFont().weight=d$a;}),d$q(0,d$b,"letterSpacing",function(){return this._spacing[0];},function(d$a){"string"==typeof d$a&&(d$a=parseInt(d$a+"")),this._spacing===d$o._SPACING&&(this._spacing=[0,0]),this._spacing[0]=d$a;}),d$q(0,d$b,"fontSize",function(){return this._font.size;},function(d$a){this._createFont().size=d$a;}),d$q(0,d$b,"italic",function(){return this._font.italic;},function(d$a){this._createFont().italic=d$a;}),d$q(0,d$b,"fontFamily",function(){return this._font.family;},function(d$a){this._createFont().family=d$a;}),d$q(0,d$b,"stroke",function(){return this._font.stroke[0];},function(d$a){this._createFont().stroke===d$p._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=d$a;}),d$q(0,d$b,"strokeColor",function(){return this._font.stroke[1];},function(d$a){this._createFont().stroke===d$p._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=d$a;}),d$q(0,d$b,"border",function(){return this._border?this._border.value:"";},function(d$a){if("none"!=d$a){this._border||(this._border={});var d$b=(this._border.value=d$a).split(" ");if(this._border.color=d$S.create(d$b[d$b.length-1]),1==d$b.length)return this._border.size=1,void(this._border.type="solid");var d$c=0;0<d$b[0].indexOf("px")?(this._border.size=parseInt(d$b[0]),d$c++):this._border.size=1,this._border.type=d$b[d$c],this._ower._renderType|=256;}else this._border=null;}),d$q(0,d$b,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null;},function(d$a){d$a?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==d$a?null:d$S.create(d$a),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null;}),d$q(0,d$b,"position",function(){return 4&this._type?"absolute":"";},function(d$a){"absolute"==d$a?this._type|=4:this._type&=-5;}),d$q(0,d$b,"display",null,function(d$a){switch(d$a){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater();}}),d$q(0,d$b,"paddingLeft",function(){return this.padding[3];}),d$q(0,d$b,"paddingTop",function(){return this.padding[0];}),d$q(0,d$b,"_scale",null,function(d$a){this._ower.scale(d$a[0],d$a[1]);}),d$q(0,d$b,"_rotate",null,function(d$a){this._ower.rotation=d$a;}),d$o.parseOneCSS=function(d$a,d$b){for(var d$c,d$d=[],d$e=d$a.split(d$b),d$f=0,d$i=d$e.length;d$f<d$i;d$f++){var d$j=d$e[d$f],d$k=d$j.indexOf(":"),d$l=d$j.substr(0,d$k).replace(/^\s+|\s+$/g,"");if(0!=d$l.length){var d$m=d$j.substr(d$k+1).replace(/^\s+|\s+$/g,""),d$n=[d$l,d$m];switch(d$l){case"italic":case"bold":d$n[1]="true"==d$m;break;case"line-height":d$n[0]="lineHeight",d$n[1]=parseInt(d$m);break;case"font-size":d$n[0]="fontSize",d$n[1]=parseInt(d$m);break;case"padding":1<(d$c=d$m.split(" ")).length||(d$c[1]=d$c[2]=d$c[3]=d$c[0]),d$n[1]=[parseInt(d$c[0]),parseInt(d$c[1]),parseInt(d$c[2]),parseInt(d$c[3])];break;case"rotate":d$n[0]="_rotate",d$n[1]=parseFloat(d$m);break;case"scale":d$c=d$m.split(" "),d$n[0]="_scale",d$n[1]=[parseFloat(d$c[0]),parseFloat(d$c[1])];break;case"translate":d$c=d$m.split(" "),d$n[0]="_translate",d$n[1]=[parseInt(d$c[0]),parseInt(d$c[1])];break;default:(d$n[0]=d$o._CSSTOVALUE[d$l])||(d$n[0]=d$l);}d$d.push(d$n);}}return d$d;},d$o.parseCSS=function(d$a,d$b){for(var d$c;null!=(d$c=d$o._parseCSSRegExp.exec(d$a));)d$o.styleSheets[d$c[1]]=d$o.parseOneCSS(d$c[2],";");},d$o.EMPTY=new d$o(null),d$o._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},d$o._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),d$o._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},d$o._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},d$o.styleSheets={},d$o.ALIGN_CENTER=1,d$o.ALIGN_RIGHT=2,d$o.VALIGN_MIDDLE=1,d$o.VALIGN_BOTTOM=2,d$o._CSS_BLOCK=1,d$o._DISPLAY_NONE=2,d$o._ABSOLUTE=4,d$o._WIDTH_SET=8,d$o._PADDING=[0,0,0,0],d$o._RECT=[-1,-1,-1,-1],d$o._SPACING=[0,0],d$o._ALIGNS=[0,0,0],d$o.ADDLAYOUTED=512,d$o._NEWFONT=4096,d$o._HEIGHT_SET=8192,d$o._BACKGROUND_SET=16384,d$o._FLOAT_RIGHT=32768,d$o._LINE_ELEMENT=65536,d$o._NOWARP=131072,d$o._WIDTHAUTO=262144,d$o._LISTERRESZIE=524288,d$o;}(d$j),d$ca=function(d$a){function d$i(){this.url=null,this.audio=null,this.loaded=!1,d$i.__super.call(this);}d$m(d$i,"laya.media.h5audio.AudioSound",d$l);var d$b=d$i.prototype;return d$b.dispose=function(){var d$a=d$i._audioCache[this.url];d$a&&(d$a.src="",delete d$i._audioCache[this.url]);},d$b.load=function(d$a){var d$b;if(d$a=d$I.formatURL(d$a),(this.url=d$a)==d$E._tMusic?(d$i._initMusicAudio(),(d$b=d$i._musicAudio).src!=d$a&&(d$i._audioCache[d$b.src]=null,d$b=null)):d$b=d$i._audioCache[d$a],d$b&&2<=d$b.readyState)this.event("complete");else{d$b||(d$b=d$a==d$E._tMusic?(d$i._initMusicAudio(),d$i._musicAudio):d$O.createElement("audio"),(d$i._audioCache[d$a]=d$b).src=d$a),d$b.addEventListener("canplaythrough",d$d),d$b.addEventListener("error",d$e);var d$c=this;(this.audio=d$b).load?d$b.load():d$e();}function d$d(){d$f(),d$c.loaded=!0,d$c.event("complete");}function d$e(){d$b.load=null,d$f(),d$c.event("error");}function d$f(){d$b.removeEventListener("canplaythrough",d$d),d$b.removeEventListener("error",d$e);}},d$b.play=function(d$a,d$b,d$c){if(void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),!this.url)return null;var d$d,d$e;if(!(d$d=this.url==d$E._tMusic?d$i._musicAudio:d$i._audioCache[this.url]))return null;d$e=d$W.getItem("audio:"+this.url),d$J.isConchApp?d$e||((d$e=d$O.createElement("audio")).src=this.url):this.url==d$E._tMusic?(d$i._initMusicAudio(),(d$e=d$i._musicAudio).src=this.url):d$e=d$e||d$d.cloneNode(!0);var d$f=new d$oa(d$e);return d$f.url=this.url,d$f.loops=d$b,d$f.startTime=d$a,d$f.startHandler=d$c,d$f.play(!1),d$E.addChannel(d$f),d$f;},d$q(0,d$b,"duration",function(){var d$a;return(d$a=d$i._audioCache[this.url])?d$a.duration:0;}),d$i._initMusicAudio=function(){d$i._musicAudio||(d$i._musicAudio||(d$i._musicAudio=d$O.createElement("audio")),d$J.isConchApp||d$O.document.addEventListener("mousedown",d$i._makeMusicOK));},d$i._makeMusicOK=function(){d$O.document.removeEventListener("mousedown",d$i._makeMusicOK),d$i._musicAudio.src?d$i._musicAudio.play():(d$i._musicAudio.src="",d$i._musicAudio.load());},d$i._audioCache={},d$i._musicAudio=null,d$i;}(),d$da=function(d$a){function d$b(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,d$b.__super.call(this);}d$m(d$b,"laya.media.SoundChannel",d$l);var d$c=d$b.prototype;return d$c.play=function(){},d$c.stop=function(){},d$c.pause=function(){},d$c.resume=function(){},d$c.__runComplete=function(d$a){d$a&&d$a.run();},d$q(0,d$c,"volume",function(){return 1;},function(d$a){}),d$q(0,d$c,"position",function(){return 0;}),d$q(0,d$c,"duration",function(){return 0;}),d$b;}(),d$ea=function(d$a){function d$b(){d$b.__super.call(this);}d$m(d$b,"laya.media.Sound",d$l);var d$c=d$b.prototype;return d$c.load=function(d$a){},d$c.play=function(d$a,d$b,d$c){return void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),null;},d$c.dispose=function(){},d$q(0,d$c,"duration",function(){return 0;}),d$b;}(),d$fa=function(d$a){function d$e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,d$e.__super.call(this);}d$m(d$e,"laya.media.webaudio.WebAudioSound",d$l);var d$b=d$e.prototype;return d$b.load=function(d$a){this.url=d$a,this.audioBuffer=d$e._dataCache[d$a],this.audioBuffer?this._loaded(this.audioBuffer):(d$e.e.on("loaded:"+d$a,this,this._loaded),d$e.e.on("err:"+d$a,this,this._err),d$e.__loadingSound[d$a]||(d$e.__loadingSound[d$a]=!0,d$z.loader.load(d$a,d$u.create(this,this.onloaded),null,d$ja.BUFFER,4,!1,null,!0)));},d$b.onloaded=function(d$a){d$a||this._err(),this._disposed?this._removeLoadEvents():(this.data=d$a,d$e.buffs.push({buffer:this.data,url:this.url}),d$e.decode());},d$b._err=function(){if(this._removeLoadEvents(),d$e.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var d$a,d$b,d$c,d$d=0;for(d$a=(d$b=this.__toPlays).length,d$d=0;d$d<d$a;d$d++)(d$c=d$b[d$d])[3]&&!d$c[3].isStopped&&d$c[3].event("error");this.__toPlays.length=0;}},d$b._loaded=function(d$a){this._removeLoadEvents(),this._disposed||(this.audioBuffer=d$a,this.loaded=!0,this.event("complete"));},d$b._removeLoadEvents=function(){d$e.e.off("loaded:"+this.url,this,this._loaded),d$e.e.off("err:"+this.url,this,this._err);},d$b.__playAfterLoaded=function(){if(this.__toPlays){var d$a,d$b,d$c,d$d=0;for(d$a=(d$b=this.__toPlays).length,d$d=0;d$d<d$a;d$d++)(d$c=d$b[d$d])[3]&&!d$c[3].isStopped&&this.play(d$c[0],d$c[1],d$c[2],d$c[3]);this.__toPlays.length=0;}},d$b.play=function(d$a,d$b,d$c,d$d){return void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),d$d=d$d||new d$pa(),this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([d$a,d$b,d$c,d$d]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),d$d.url=this.url,d$d.loops=d$b,d$d.audioBuffer=this.audioBuffer,d$d.startTime=d$a,d$d.startHandler=d$c,d$d.play(!1),d$E.addChannel(d$d),d$d;},d$b.dispose=function(){this._disposed=!0,delete d$e._dataCache[this.url],delete d$e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[];},d$q(0,d$b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0;}),d$e.decode=function(){if(!(d$e.buffs.length<=0||d$e.isDecoding))if(d$e.isDecoding=!0,(d$e.tInfo=d$e.buffs.shift())&&d$e.tInfo.buffer&&d$e.tInfo.buffer.byteLength)try{d$e.ctx.decodeAudioData(d$e.tInfo.buffer,d$e._done,d$e._fail);}catch(d$a){console.error("decodeAudioData error  byteLength:"+d$e.tInfo.buffer.byteLength+"  url:"+d$e.tInfo.url);}else d$e._fail();},d$e._done=function(d$a){d$e.e.event("loaded:"+d$e.tInfo.url,d$a),d$e._dataCache[d$e.tInfo.url]=d$a,d$e.isDecoding=!1,d$e.decode();},d$e._fail=function(){d$e.e.event("err:"+d$e.tInfo.url,null),d$e.isDecoding=!1,d$e.decode();},d$e._playEmptySound=function(){if(null!=d$e.ctx){if(d$e._emptySource&&(d$e._emptySource.stop(),d$e._emptySource.disconnect(0),!d$pa._tryCleanFailed))try{d$e._emptySource.buffer=null;}catch(d$a){d$pa._tryCleanFailed=!0;}var d$a=d$e.ctx.createBufferSource();d$a.buffer=d$e._miniBuffer,d$a.connect(d$e.ctx.destination),d$a.start(0,0,0),d$e._emptySource=d$a;}},d$e._unlock=function(){d$e._unlocked||(d$e._playEmptySound(),"running"==d$e.ctx.state?(d$O.document.removeEventListener("mousedown",d$e._unlock,!0),d$O.document.removeEventListener("touchend",d$e._unlock,!0),d$O.document.removeEventListener("touchstart",d$e._unlock,!0),d$e._unlocked=!0):"suspended"==d$e.ctx.state&&d$E._recoverWebAudio());},d$e.initWebAudio=function(){"running"!=d$e.ctx.state&&(d$e._unlock(),d$O.document.addEventListener("mousedown",d$e._unlock,!0),d$O.document.addEventListener("touchend",d$e._unlock,!0),d$O.document.addEventListener("touchstart",d$e._unlock,!0));},d$e._emptySource=null,d$e._dataCache={},d$e.buffs=[],d$e.isDecoding=!1,d$e._unlocked=!1,d$e.tInfo=null,d$e.__loadingSound={},d$k(d$e,["window",function(){return this.window=d$O.window;},"webAudioEnabled",function(){return this.webAudioEnabled=d$e.window.AudioContext||d$e.window.webkitAudioContext||d$e.window.mozAudioContext;},"ctx",function(){return this.ctx=d$e.webAudioEnabled?new(d$e.window.AudioContext||d$e.window.webkitAudioContext||d$e.window.mozAudioContext)():void 0;},"_miniBuffer",function(){return this._miniBuffer=d$e.ctx.createBuffer(1,1,22050);},"e",function(){return this.e=new d$l();}]),d$e;}(),d$ia=function(d$a){function d$b(){this._responseType=null,this._data=null,d$b.__super.call(this),this._http=new d$O.window.XMLHttpRequest();}d$m(d$b,"laya.net.HttpRequest",d$l);var d$c=d$b.prototype;return d$c.send=function(d$a,d$b,d$c,d$d,d$e){void 0===d$c&&(d$c="get"),void 0===d$d&&(d$d="text"),this._responseType=d$d,this._data=null;var d$f=this,d$i=this._http;if(d$i.open(d$c,d$a,!0),d$e)for(var d$j=0;d$j<d$e.length;d$j++)d$i.setRequestHeader(d$e[d$j++],d$e[d$j]);else d$J.isConchApp||(d$b&&"string"!=typeof d$b?d$i.setRequestHeader("Content-Type","application/json"):d$i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));d$i.responseType="arraybuffer"!==d$d?"text":"arraybuffer",d$i.onerror=function(d$a){d$f._onError(d$a);},d$i.onabort=function(d$a){d$f._onAbort(d$a);},d$i.onprogress=function(d$a){d$f._onProgress(d$a);},d$i.onload=function(d$a){d$f._onLoad(d$a);},d$i.send(d$b);},d$c._onProgress=function(d$a){d$a&&d$a.lengthComputable&&this.event("progress",d$a.loaded/d$a.total);},d$c._onAbort=function(d$a){this.error("Request was aborted by user");},d$c._onError=function(d$a){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText);},d$c._onLoad=function(d$a){var d$b=this._http,d$c=void 0!==d$b.status?d$b.status:200;200===d$c||204===d$c||0===d$c?this.complete():this.error("["+d$b.status+"]"+d$b.statusText+":"+d$b.responseURL);},d$c.error=function(d$a){this.clear(),this.event("error",d$a);},d$c.complete=function(){this.clear();var d$b=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=d$$.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText;}catch(d$a){d$b=!1,this.error(d$a.message);}d$b&&this.event("complete",this._data instanceof Array?[this._data]:this._data);},d$c.clear=function(){var d$a=this._http;d$a.onerror=d$a.onabort=d$a.onprogress=d$a.onload=null;},d$q(0,d$c,"url",function(){return this._http.responseURL;}),d$q(0,d$c,"http",function(){return this._http;}),d$q(0,d$c,"data",function(){return this._data;}),d$b;}(),d$ja=function(d$a){function d$C(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,d$C.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1;}d$m(d$C,"laya.net.Loader",d$l);var d$b=d$C.prototype;return d$b.load=function(d$a,d$b,d$c,d$d,d$e){if(d$a&&""!=d$a||console.error("Loader 加载的url不合法 "+d$a),void 0===d$c&&(d$c=!0),void 0===d$e&&(d$e=!1),0===(this._url=d$a).indexOf("data:image")?this._type=d$b="image":this._type=d$b||(d$b=this.getTypeFromUrl(d$a)),this._cache=d$c,this._data=null,!d$e&&d$C.loadedMap[d$a])return this._data=d$C.loadedMap[d$a],this.event("progress",1),void this.event("complete",this._data);if(d$d&&d$C.setGroup(d$a,d$d),null!=d$C.parserMap[d$b])return this._customParse=!0,void(d$C.parserMap[d$b]instanceof laya.utils.Handler?d$C.parserMap[d$b].runWith(this):d$C.parserMap[d$b].call(null,this));if("image"===d$b||"htmlimage"===d$b||"nativeimage"===d$b)return this._loadImage(d$a);if("ttf"===d$b)return this._loadTTF(d$a);switch(d$b){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:d$b;}d$C.preLoadedMap[d$a]?this.onLoaded(d$C.preLoadedMap[d$a]):d$i.resMgrLoad(d$a,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime);},d$b.getTypeFromUrl=function(d$a){var d$b=d$$.getFileExtension(d$a);return d$b?d$C.typeMap[d$b]:(console.warn("Not recognize the resources suffix",d$a),"text");},d$b._loadTTF=function(d$a){d$a=d$I.formatURL(d$a);var d$b=new d$H();d$b.complete=d$u.create(this,this.onLoaded),d$b.load(d$a);},d$b._loadImage=function(d$a){d$i.imgMgrLoad(d$a,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime);},d$b._loadImageComplete=function(d$a,d$b,d$c){if(null!=d$c){if(d$c instanceof ArrayBuffer){var d$d=new DataView(d$c),d$e=new laya.webgl.resource.WebGLImage(new Uint8Array(d$c,8),d$a,0,!1,d$d.getUint32(0),d$d.getUint32(4));this.onLoaded(d$e);}else if(d$c instanceof d$ma)d$C.imgMgrSet[d$a]=d$b,d$i.imgMgrLock(d$a,d$C.imgMgrSet[d$a]),this._url=d$a,this.complete(d$c);else{var d$f=-1!=d$a.indexOf(".png",d$a.length-4)?6408:6407;d$e=new laya.webgl.resource.WebGLImage(d$c,d$a,d$f,!1,d$c.width,d$c.height);this.onLoaded(d$e);}}else this.event("error","Load image failed");},d$b.imageCancel=function(d$a,d$b,d$c){d$i.imgMgrCancel(d$a,this._onImageCallback);},d$b._loadSound=function(d$a){var d$b=new d$E._soundClass(),d$c=this;function d$d(){d$b.offAll();}d$b.on("complete",this,function(){d$d(),d$c.onLoaded(d$b);}),d$b.on("error",this,function(){d$d(),d$b.dispose(),d$c.event("error","Load sound failed");}),d$b.load(d$a);},d$b.onProgress=function(d$a){"atlas"===this._type?this.event("progress",.3*d$a):this.event("progress",d$a);},d$b.onError=function(d$a){this.event("error",d$a);},d$b._loadedComplete=function(d$a,d$b,d$c){if(null!=d$c)switch(this._type){case"atlas":case"plf":case"json":var d$d=new d$P(d$c);this.onLoaded(JSON.parse(d$d.readUTFBytes()));break;case"font":d$d=new d$P(d$c);this.onLoaded(d$$.parseXMLFromString(d$d.readUTFBytes()));break;default:this.onLoaded(d$c);}else this.event("error",d$a);},d$b.onLoaded=function(d$a){var d$b=this._type;if("plf"==d$b)this.parsePLFData(d$a),this.complete(d$a);else if("image"===d$b){var d$c=new d$ma(d$a);d$c.url=this._url,this.complete(d$c);}else if("sound"===d$b||"htmlimage"===d$b||"nativeimage"===d$b)this.complete(d$a);else if("atlas"===d$b){if(!d$a.src&&!d$a._setContext){if(!this._data){if((this._data=d$a).meta&&d$a.meta.image)for(var d$d=d$a.meta.image.split(","),d$e=0<=this._url.indexOf("/")?"/":"\\",d$f=this._url.lastIndexOf(d$e),d$i=0<=d$f?this._url.substr(0,d$f+1):"",d$j=0,d$k=d$d.length;d$j<d$k;d$j++)d$d[d$j]=d$i+d$d[d$j];else d$d=[this._url.replace(".json",".png")];d$d.reverse(),d$a.toLoads=d$d,d$a.pics=[];}return this.event("progress",.3+1/d$d.length*.6),this._loadImage(d$d.pop());}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(d$a),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var d$l=this._data.frames,d$m=this._url.split("?")[0],d$n=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:d$m.substring(0,d$m.lastIndexOf("."))+"/",d$o=this._data.pics,d$p=d$I.formatURL(this._url),d$q=d$C.atlasMap[d$p]||(d$C.atlasMap[d$p]=[]);d$q.dir=d$n;var d$r=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var d$s in d$r=parseFloat(this._data.meta.scale),d$l){var d$t,d$u=d$l[d$s],d$v=d$o[d$u.frame.idx?d$u.frame.idx:0],d$w=d$I.formatURL(d$n+d$s);d$v.scaleRate=d$r,d$t=d$ma.create(d$v,d$u.frame.x,d$u.frame.y,d$u.frame.w,d$u.frame.h,d$u.spriteSourceSize.x,d$u.spriteSourceSize.y,d$u.sourceSize.w,d$u.sourceSize.h),d$C.cacheRes(d$w,d$t),d$C.keepCache(this._url,d$n+d$s),d$t.url=d$w,d$q.push(d$w);}else for(d$s in d$l)d$v=d$o[(d$u=d$l[d$s]).frame.idx?d$u.frame.idx:0],d$w=d$I.formatURL(d$n+d$s),d$C.cacheRes(d$w,d$ma.create(d$v,d$u.frame.x,d$u.frame.y,d$u.frame.w,d$u.frame.h,d$u.spriteSourceSize.x,d$u.spriteSourceSize.y,d$u.sourceSize.w,d$u.sourceSize.h)),d$C.loadedMap[d$w].url=d$w,d$C.keepCache(this._url,d$n+d$s),d$q.push(d$w);delete this._data.pics,this.complete(this._data);}else if("font"==d$b){if(!d$a.src)return this._data=d$a,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var d$x=new d$D();d$x.parseFont(this._data,d$a);var d$y=this._url.split(".fnt")[0].split("/"),d$z=d$y[d$y.length-1];d$sa.registerBitmapFont(d$z,d$x),this._data=d$x,this.complete(this._data);}else if("pkm"==d$b){var d$A=d$ya.create(d$a,this._url),d$B=new d$ma(d$A);d$B.url=this._url,this.complete(d$B);}else this.complete(d$a);},d$b.parsePLFData=function(d$a){var d$b,d$c,d$d;for(d$b in d$a)switch(d$d=d$a[d$b],d$b){case"json":case"text":for(d$c in d$d)d$C.preLoadedMap[d$I.formatURL(d$c)]=d$d[d$c];break;default:for(d$c in d$d)d$C.preLoadedMap[d$I.formatURL(d$c)]=d$d[d$c];}},d$b.complete=function(d$a){this._data=d$a,this._customParse?this.event("loaded",d$a instanceof Array?[d$a]:d$a):(d$C._loaders.push(this),d$C._isWorking||d$C.checkNext());},d$b.endLoad=function(d$a){d$a&&(this._data=d$a),this._cache&&d$C.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data);},d$q(0,d$b,"url",function(){return this._url;}),d$q(0,d$b,"data",function(){return this._data;}),d$q(0,d$b,"cache",function(){return this._cache;}),d$q(0,d$b,"type",function(){return this._type;}),d$C.checkNext=function(){d$C._isWorking=!0;for(var d$a=d$O.now();d$C._startIndex<d$C._loaders.length;)if(d$O.now(),d$C._loaders[d$C._startIndex].endLoad(),d$C._startIndex++,d$O.now()-d$a>d$C.maxTimeOut)return console.warn("loader callback cost a long time:"+(d$O.now()-d$a)+" url="+d$C._loaders[d$C._startIndex-1].url),void d$z.timer.frameOnce(1,null,d$C.checkNext);d$C._loaders.length=0,d$C._startIndex=0,d$C._isWorking=!1;},d$C.clearRes=function(d$a,d$b){if(null!=d$a){void 0===d$b&&(d$b=!1),d$a=d$I.formatURL(d$a);var d$c=d$C.getAtlas(d$a);if(d$c){for(var d$d=0,d$e=d$c.length;d$d<d$e;d$d++){var d$f=d$c[d$d],d$i=d$C.getRes(d$f);delete d$C.loadedMap[d$f],d$C.clearCache(d$a.substring(d$I.basePath.length),d$f.substring(d$I.basePath.length)),d$i&&d$i.destroy(d$b);}d$c.length=0,delete d$C.atlasMap[d$a],delete d$C.loadedMap[d$a];}else{var d$j=d$C.loadedMap[d$a];d$j&&(delete d$C.loadedMap[d$a],d$j instanceof laya.resource.Texture&&d$j.bitmap&&d$j.destroy(d$b));}}},d$C.clearTextureRes=function(d$a){d$a=d$I.formatURL(d$a);var d$b=laya.net.Loader.getAtlas(d$a),d$c=d$b&&0<d$b.length?laya.net.Loader.getRes(d$b[0]):laya.net.Loader.getRes(d$a);d$c&&d$c.bitmap&&(d$J.isConchApp&&!d$J.isConchWebGL?d$c.bitmap.source.releaseTexture&&d$c.bitmap.source.releaseTexture():null==d$c.bitmap._atlaser&&d$c.bitmap.releaseResource(!0));},d$C.getRes=function(d$a){return d$C.loadedMap[d$I.formatURL(d$a)];},d$C.getAtlas=function(d$a){return d$C.atlasMap[d$I.formatURL(d$a)];},d$C.cacheRes=function(d$a,d$b){d$a=d$I.formatURL(d$a),null!=d$C.loadedMap[d$a]?console.warn("Resources already exist,is repeated loading:",d$a):d$C.loadedMap[d$a]=d$b;},d$C.setGroup=function(d$a,d$b){d$C.groupMap[d$b]||(d$C.groupMap[d$b]=[]),d$C.groupMap[d$b].push(d$a);},d$C.clearResByGroup=function(d$a){if(d$C.groupMap[d$a]){var d$b=d$C.groupMap[d$a],d$c=0,d$d=d$b.length;for(d$c=0;d$c<d$d;d$c++)d$C.clearRes(d$b[d$c]);d$b.length=0;}},d$C.keepCache=function(d$a,d$b){if(d$a&&d$b){var d$c=d$C.cacheSet[d$b];d$c?-1==d$c.indexOf(d$a)&&d$c.push(d$a):d$C.cacheSet[d$b]=[d$a];}},d$C.clearCache=function(d$a,d$b){if(d$a&&d$b){var d$c=d$C.cacheSet[d$b];if(d$c){var d$d=d$c.indexOf(d$a);if(-1!==d$d){var d$e=d$c.length-1;0==d$e?(delete d$C.cacheSet[d$b],0<d$C.imgMgrSet[d$b]?d$i.imgMgrFree(d$b,d$C.imgMgrSet[d$b]):d$C.clearRes(d$b,!0)):(d$c[d$d]=d$c[d$e],d$c.length=d$e);}}}},d$C.saveObject=function(d$a,d$b,d$c){if(d$b&&d$a){var d$d=d$C.objectSet[d$a];d$d?(console.warn("Loader.saveObject: "+d$a),d$d[0]=d$b,d$d[1]=d$c):d$C.objectSet[d$a]=[d$b,d$c,[]];}},d$C.findObject=function(d$a){if(d$a){var d$b=d$C.objectSet[d$a];if(d$b)return d$b[0];}return null;},d$C.keepObject=function(d$a,d$b){if(d$a&&d$b){var d$c=d$C.objectSet[d$b];d$c&&-1===d$c[2].indexOf(d$a)&&d$c[2].push(d$a);}},d$C.clearObject=function(d$a,d$b){if(d$a&&d$b){var d$c=d$C.objectSet[d$b];if(d$c){var d$d=d$c[2],d$e=d$d.indexOf(d$a);if(-1!==d$e){var d$f=d$d.length-1;0==d$f?(delete d$C.objectSet[d$b],d$c[1]&&d$c[1].call(null,d$c[0])):(d$d[d$e]=d$d[d$f],d$d.length=d$f);}}}},d$C.TEXT="text",d$C.JSON="json",d$C.XML="xml",d$C.BUFFER="arraybuffer",d$C.IMAGE="image",d$C.SOUND="sound",d$C.ATLAS="atlas",d$C.FONT="font",d$C.TTF="ttf",d$C.PLF="plf",d$C.PKM="pkm",d$C.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},d$C.parserMap={},d$C.groupMap={},d$C.maxTimeOut=100,d$C.loadedMap={},d$C.preLoadedMap={},d$C.atlasMap={},d$C._loaders=[],d$C._isWorking=!1,d$C._startIndex=0,d$C.imgCache={},d$C.cacheSet={},d$C.objectSet={},d$C.imgMgrSet={},d$C;}(),d$ka=function(d$a){var d$o;function d$p(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},d$p.__super.call(this);for(var d$a=0;d$a<this._maxPriority;d$a++)this._resInfos[d$a]=[];}d$m(d$p,"laya.net.LoaderManager",d$l);var d$b=d$p.prototype;return d$b.create=function(d$a,d$c,d$b,d$d,d$e,d$f,d$i,d$j){if(null==d$f&&(d$f=2),null==d$i&&(d$i=!0),d$a instanceof Array){var d$k=d$a,d$l=d$k.length,d$m=0;if(d$b)var d$n=d$u.create(d$b.caller,d$b.method,d$b.args,!1);for(var d$o=0;d$o<d$l;d$o++){var d$p=d$k[d$o];"string"==typeof d$p&&(d$p=d$k[d$o]={url:d$p}),d$p.progress=0;}for(d$o=0;d$o<d$l;d$o++){d$p=d$k[d$o];var d$q=d$b?d$u.create(null,d$t,[d$p],!1):null,d$r=d$b||d$c?d$u.create(null,d$s,[d$p]):null;this._create(d$p.url,d$r,d$q,d$p.clas||d$d,d$p.params||d$e,null!=d$p.priority&&0<=d$p.priority?d$p.priority:d$f,d$i,d$p.group||d$j);}function d$s(d$a,d$b){d$m++,d$a.progress=1,d$m===d$l&&d$c&&d$c.run();}function d$t(d$a,d$b){d$a.progress=d$b;for(var d$c=0,d$d=0;d$d<d$l;d$d++){d$c+=d$k[d$d].progress;}var d$e=d$c/d$l;d$n.runWith(d$e);}return!0;}return this._create(d$a,d$c,d$b,d$d,d$e,d$f,d$i,d$j);},d$b._create=function(d$b,d$c,d$a,d$d,d$e,d$f,d$i,d$j){d$b&&""!=d$b||console.error("加载的url不合法 "+d$b),null==d$f&&(d$f=2),null==d$i&&(d$i=!0);var d$k=d$I.formatURL(d$b),d$l=this.getRes(d$k);if(d$l)!d$l.hasOwnProperty("loaded")||d$l.loaded?(d$a&&d$a.runWith(1),d$c&&d$c.run()):d$c&&d$z.loader._createListener(d$b,d$c.caller,d$c.method,d$c.args,!0,!1);else{var d$m=d$$.getFileExtension(d$b),d$n=d$p.createMap[d$m];if(!d$n)throw new Error("LoaderManager:unknown file("+d$b+") extension with: "+d$m+".");d$d||(d$d=d$n[0]);var d$o=d$n[1];if("atlas"==d$m)this.load(d$b,d$c,d$a,d$o,d$f,d$i);else{d$d===d$ma&&(d$o="htmlimage"),(d$l=d$d?new d$d():null).hasOwnProperty("_loaded")&&(d$l._loaded=!1),d$l._setUrl(d$b),d$j&&d$l._setGroup(d$j),this._createLoad(d$l,d$b,d$u.create(null,function(d$a){d$l&&!d$l.destroyed&&d$a&&d$l.onAsynLoaded.call(d$l,d$b,d$a,d$e),d$c&&d$c.run();d$z.loader.event(d$b);}),d$a,d$o,d$f,!1,d$j,!0),d$i&&this.cacheRes(d$k,d$l);}}return d$l;},d$b.load=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){d$a&&""!=d$a||console.error("加载的url不合法 "+d$a);var d$k=this;if(null==d$e&&(d$e=2),null==d$f&&(d$f=!0),void 0===d$j&&(d$j=!1),d$a instanceof Array)return this._loadAssets(d$a,d$b,d$c,d$d,d$e,d$f,d$i);var d$l=d$ja.getRes(d$a);if(null!=d$l)d$z.timer.frameOnce(1,null,function(){d$c&&d$c.runWith(1),d$b&&d$b.runWith(d$l),d$k._loaderCount||d$k.event("complete");});else{var d$m=d$p._resMap[d$a];d$m?(d$b&&d$m._createListener("complete",d$b.caller,d$b.method,d$b.args,!1,!1),d$c&&d$m._createListener("progress",d$c.caller,d$c.method,d$c.args,!1,!1)):((d$m=this._infoPool.length?this._infoPool.pop():new d$o()).url=d$a,d$m.clas=null,d$m.type=d$d,d$m.cache=d$f,d$m.group=d$i,d$m.ignoreCache=d$j,d$m.priority=d$e,d$b&&d$m.on("complete",d$b.caller,d$b.method,d$b.args),d$c&&d$m.on("progress",d$c.caller,d$c.method,d$c.args),d$p._resMap[d$a]=d$m,d$e=d$e<this._maxPriority?0<=d$e?d$e:0:this._maxPriority-1,this._resInfos[d$e].push(d$m),this._next());}return this;},d$b.cancel=function(d$a,d$b,d$c){if(d$l=d$p._resMap[d$a]){d$b&&d$l.off("complete",d$b.caller,d$b.method,!1),d$c&&d$l.off("progress",d$c.caller,d$c.method,!1);var d$d=d$l.getListener("complete"),d$e=d$l.getListener("progress");if(!(d$d&&d$d.head||d$e&&d$e.head)){if(d$l.loader){var d$f=d$l.loader;d$f.imageCancel(d$a),d$f.offAll(),d$f._data=null,d$f._customParse=!1,d$f._url=null,d$f._class=null,d$f._type=null,this._loaders.push(d$f),this._loaderCount--,delete this._loaderMap[d$l.url];}for(var d$i=0;d$i<this._maxPriority;d$i++)for(var d$j=this._resInfos[d$i],d$k=d$j.length-1;-1<d$k;d$k--){var d$l;(d$l=d$j[d$k])&&d$l.url===d$a&&(d$j[d$k]=null,d$l.destroy(),d$l.offAll(),this._infoPool.push(d$l));}delete d$p._resMap[d$a],this._next();}}},d$b._createLoad=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){var d$l=this;if(null==d$f&&(d$f=2),null==d$i&&(d$i=!0),void 0===d$k&&(d$k=!1),d$b instanceof Array)return this._loadAssets(d$b,d$c,d$d,d$e,d$f,d$i,d$j);var d$m=d$ja.getRes(d$b);if(null!=d$m)d$z.timer.frameOnce(1,null,function(){d$d&&d$d.runWith(1),d$c&&d$c.runWith(d$m),d$l._loaderCount||d$l.event("complete");});else{var d$n=d$p._resMap[d$b];d$n?(d$c&&d$n._createListener("complete",d$c.caller,d$c.method,d$c.args,!1,!1),d$d&&d$n._createListener("progress",d$d.caller,d$d.method,d$d.args,!1,!1)):((d$n=this._infoPool.length?this._infoPool.pop():new d$o()).url=d$b,d$n.clas=d$a,d$n.type=d$e,d$n.cache=d$i,d$n.group=d$j,d$n.ignoreCache=d$k,d$n.priority=d$f,d$c&&d$n.on("complete",d$c.caller,d$c.method,d$c.args),d$d&&d$n.on("progress",d$d.caller,d$d.method,d$d.args),d$p._resMap[d$b]=d$n,d$f=d$f<this._maxPriority?0<=d$f?d$f:0:this._maxPriority-1,this._resInfos[d$f].push(d$n),this._next());}return this;},d$b._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var d$a=0;d$a<this._maxPriority;d$a++)for(var d$b=this._resInfos[d$a];0<d$b.length;){var d$c=d$b.shift();if(d$c)return this._doLoad(d$c);}this._loaderCount||this.event("complete");}},d$b._doLoad=function(d$b){var d$c=this._loaders.length?this._loaders.pop():new d$ja();this._loaderCount++,(this._loaderMap[d$b.url]=d$c).on("complete",null,d$e),d$c.on("progress",null,function(d$a){d$b.event("progress",d$a);}),d$c.on("error",null,function(d$a){d$e(null);}),d$b.loader=d$c;var d$d=this;function d$e(d$a){d$c.offAll(),d$c._data=null,d$c._customParse=!1,d$c._url=null,d$c._class=null,d$c._type=null,d$d._loaders.push(d$c),d$d._loaderCount--,delete d$d._loaderMap[d$b.url],d$d._endLoad(d$b,d$a instanceof Array?[d$a]:d$a),d$d._next();}d$c._class=d$b.clas,1<=d$b.priority?(d$c.priority=d$b.priority,d$c.realTime=!1):(d$c.priority=0,d$c.realTime=!0),d$c.load(d$b.url,d$b.type,d$b.cache,d$b.group,d$b.ignoreCache);},d$b._endLoad=function(d$a,d$b){var d$c=d$a.url;if(null==d$b){var d$d=this._failRes[d$c]||0;if(d$d<this.retryNum)return console.warn("[warn]Retry to load:",d$c),this._failRes[d$c]=d$d+1,void d$z.timer.once(this.retryDelay,this,this._addReTry,[d$a],!1);console.warn("[error]Failed to load:",d$c),this.event("error",d$c);}this._failRes[d$c]&&(this._failRes[d$c]=0),delete d$p._resMap[d$c],d$a.event("complete",d$b),d$a.destroy(),d$a.offAll(),this._infoPool.push(d$a);},d$b._addReTry=function(d$a){this._resInfos[this._maxPriority-1].push(d$a),this._next();},d$b.clearRes=function(d$a,d$b){void 0===d$b&&(d$b=!1),d$ja.clearRes(d$a,d$b);},d$b.getRes=function(d$a){return d$ja.getRes(d$a);},d$b.cacheRes=function(d$a,d$b){d$ja.cacheRes(d$a,d$b);},d$b.clearTextureRes=function(d$a){d$ja.clearTextureRes(d$a);},d$b.setGroup=function(d$a,d$b){d$ja.setGroup(d$a,d$b);},d$b.clearResByGroup=function(d$a){d$ja.clearResByGroup(d$a);},d$b.clearUnLoaded=function(){for(var d$a=0;d$a<this._maxPriority;d$a++){for(var d$b=this._resInfos[d$a],d$c=d$b.length-1;-1<d$c;d$c--){var d$d=d$b[d$c];d$d&&(d$d.destroy(),d$d.offAll(),this._infoPool.push(d$d));}d$b.length=0;}this._loaderCount=0,d$p._resMap={};},d$b.cancelLoadByUrls=function(d$a){if(d$a)for(var d$b=0,d$c=d$a.length;d$b<d$c;d$b++)this.cancelLoadByUrl(d$a[d$b]);},d$b.cancelLoadByUrl=function(d$a){for(var d$b=0;d$b<this._maxPriority;d$b++)for(var d$c=this._resInfos[d$b],d$d=d$c.length-1;-1<d$d;d$d--){var d$e=d$c[d$d];d$e&&d$e.url===d$a&&(d$c[d$d]=null,d$e.destroy(),d$e.offAll(),this._infoPool.push(d$e));}d$p._resMap[d$a]&&delete d$p._resMap[d$a];},d$b._loadAssets=function(d$a,d$c,d$i,d$b,d$d,d$e,d$f){null==d$d&&(d$d=2),null==d$e&&(d$e=!0);for(var d$j=d$a.length,d$k=0,d$l=0,d$m=[],d$n=!0,d$o=0;d$o<d$j;d$o++){var d$p=d$a[d$o];if(!d$p)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+d$a);"string"==typeof d$p&&(d$p={url:d$p,type:d$b,size:1,priority:d$d}),d$p.size||(d$p.size=1),d$p.progress=0,d$l+=d$p.size,d$m.push(d$p);var d$q=d$i?d$u.create(null,d$t,[d$p],!1):null,d$r=d$c||d$i?d$u.create(null,d$s,[d$p]):null;this.load(d$p.url,d$r,d$q,d$p.type,null!=d$p.priority&&0<=d$p.priority?d$p.priority:2,d$e,d$p.group||d$f);}function d$s(d$a,d$b){d$k++,d$a.progress=1,d$b||(d$n=!1),d$k===d$j&&d$c&&d$c.runWith(d$n);}function d$t(d$a,d$b){if(null!=d$i){d$a.progress=d$b;for(var d$c=0,d$d=0;d$d<d$m.length;d$d++){var d$e=d$m[d$d];d$c+=d$e.size*d$e.progress;}var d$f=d$c/d$l;d$i.runWith(d$f);}}return this;},d$p.cacheRes=function(d$a,d$b){d$ja.cacheRes(d$a,d$b);},d$p._resMap={},d$k(d$p,["createMap",function(){return this.createMap={atlas:[null,"atlas"]};}]),d$p.__init$=function(){d$o=function(d$a){function d$b(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,d$b.__super.call(this);}return d$m(d$b,"",d$l),d$b.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1;},d$b;}();},d$p;}(),d$la=(function(d$a){function d$e(d$a){d$e.__super.call(this),d$a||(d$a=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var d$b=0,d$c=0,d$d=0;d$d<20;d$d++)d$d%5!=4?this._mat[d$b++]=d$a[d$d]:this._alpha[d$c++]=d$a[d$d];this._action=d$F.createFilterAction(32),this._action.data=this;}d$m(d$e,"laya.filters.ColorFilter",d$t);var d$b=d$e.prototype;d$z.imps(d$b,{"laya.filters.IFilter":!0}),d$b.callNative=function(d$a){d$a._$P.cf=this;d$a.conchModel&&d$a.conchModel.setFilterMatrix&&d$a.conchModel.setFilterMatrix(this._mat,this._alpha);},d$q(0,d$b,"type",function(){return 32;}),d$q(0,d$b,"action",function(){return this._action;});}(),function(d$a){function d$d(d$a,d$b,d$c){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===d$b&&(d$b=0),d$d.__super.call(this),this._byteClass=d$c||d$P,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,d$a&&0<d$b&&d$b<65535&&this.connect(d$a,d$b);}d$m(d$d,"laya.net.Socket",d$l);var d$b=d$d.prototype;d$b.connect=function(d$a,d$b){var d$c="ws://"+d$a+":"+d$b;d$c="https:"==d$O.window.location.protocol?"wss://"+d$a+":"+d$b:"ws://"+d$a+":"+d$b,this.connectByUrl(d$c);},d$b.connectByUrl=function(d$a){var d$b=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new d$O.window.WebSocket(d$a,this.protocols):this._socket=new d$O.window.WebSocket(d$a),this._socket.binaryType="arraybuffer",this._output=new this._byteClass(),this._output.endian=this.endian,this._input=new this._byteClass(),this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(d$a){d$b._onOpen(d$a);},this._socket.onmessage=function(d$a){d$b._onMessage(d$a);},this._socket.onclose=function(d$a){d$b._onClose(d$a);},this._socket.onerror=function(d$a){d$b._onError(d$a);};},d$b.cleanSocket=function(){try{this._socket.close();}catch(d$a){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null;},d$b.close=function(){if(null!=this._socket)try{this._socket.close();}catch(d$a){}},d$b._onOpen=function(d$a){this._connected=!0,this.event("open",d$a);},d$b._onMessage=function(d$a){if(d$a&&d$a.data){var d$b=d$a.data;if(this.disableInput&&d$b)this.event("message",d$b);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var d$c=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,d$b&&("string"==typeof d$b?this._input.writeUTFBytes(d$b):this._input.writeArrayBuffer(d$b),this._addInputPosition=this._input.pos,this._input.pos=d$c),this.event("message",d$b);}}},d$b._onClose=function(d$a){this._connected=!1,this.event("close",d$a);},d$b._onError=function(d$a){this.event("error",d$a);},d$b.send=function(d$a){this._socket.send(d$a);},d$b.flush=function(){if(this._output&&0<this._output.length){var d$b;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length));}catch(d$a){d$b=d$a;}this._output.endian=this.endian,this._output.clear(),d$b&&this.event("error",d$b);}},d$q(0,d$b,"input",function(){return this._input;}),d$q(0,d$b,"output",function(){return this._output;}),d$q(0,d$b,"connected",function(){return this._connected;}),d$q(0,d$b,"endian",function(){return this._endian;},function(d$a){this._endian=d$a,null!=this._input&&(this._input.endian=d$a),null!=this._output&&(this._output.endian=d$a);}),d$d.LITTLE_ENDIAN="littleEndian",d$d.BIG_ENDIAN="bigEndian";}(),function(d$a){function d$j(){d$j.__super.call(this),this._$1__id=++d$j._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(d$j._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,d$N.currentResourceManager&&d$N.currentResourceManager.addResource(this);}d$m(d$j,"laya.resource.Resource",d$l);var d$b=d$j.prototype;return d$z.imps(d$b,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),d$b._setUrl=function(d$a){var d$b;this._url!==d$a&&(this._url&&((d$b=d$j._urlResourcesMap[this._url]).splice(d$b.indexOf(this),1),0===d$b.length&&delete d$j._urlResourcesMap[this._url]),d$a&&((d$b=d$j._urlResourcesMap[d$a])||(d$j._urlResourcesMap[d$a]=d$b=[]),d$b.push(this)),this._url=d$a);},d$b._getGroup=function(){return this._group;},d$b._setGroup=function(d$a){var d$b;this._group!==d$a&&(this._group&&((d$b=d$j._groupResourcesMap[this._group]).splice(d$b.indexOf(this),1),0===d$b.length&&delete d$j._groupResourcesMap[this._group]),d$a&&((d$b=d$j._groupResourcesMap[d$a])||(d$j._groupResourcesMap[d$a]=d$b=[]),d$b.push(this)),this._group=d$a);},d$b._addReference=function(){this._referenceCount++;},d$b._removeReference=function(){this._referenceCount--;},d$b._clearReference=function(){this._referenceCount=0;},d$b._endLoaded=function(){this.__loaded=!0,this.event("loaded",this);},d$b.recreateResource=function(){this.completeCreate();},d$b.disposeResource=function(){},d$b.activeResource=function(d$a){void 0===d$a&&(d$a=!1),this._lastUseFrameCount=d$X.loopCount,!this._destroyed&&this.__loaded&&(this._released||d$a)&&this.recreateResource();},d$b.releaseResource=function(d$a){return void 0===d$a&&(d$a=!0),!(!d$a&&this.lock)&&!(this._released&&!d$a)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0);},d$b.onAsynLoaded=function(d$a,d$b,d$c){throw new Error("Resource: must override this function!");},d$b.destroy=function(){var d$a;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete d$j._idResourcesMap[this.id],this._url&&((d$a=d$j._urlResourcesMap[this._url])&&(d$a.splice(d$a.indexOf(this),1),0===d$a.length&&delete d$j._urlResourcesMap[this.url]),d$ja.clearRes(this._url),this.__loaded||d$F.cancelLoadByUrl(this._url)),this._group&&((d$a=d$j._groupResourcesMap[this._group]).splice(d$a.indexOf(this),1),0===d$a.length&&delete d$j._groupResourcesMap[this.url]));},d$b.completeCreate=function(){this._released=!1,this.event("recovered",this);},d$b.dispose=function(){this.destroy();},d$q(0,d$b,"memorySize",function(){return this._memorySize;},function(d$a){var d$b=d$a-this._memorySize;this._memorySize=d$a,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,d$b),this.resourceManager&&this.resourceManager.addSize(d$b);}),d$q(0,d$b,"_loaded",null,function(d$a){this.__loaded=d$a;}),d$q(0,d$b,"loaded",function(){return this.__loaded;}),d$q(0,d$b,"id",function(){return this._$1__id;}),d$q(0,d$b,"destroyed",function(){return this._destroyed;}),d$q(0,d$b,"group",function(){return this._getGroup();},function(d$a){this._setGroup(d$a);}),d$q(0,d$b,"resourceManager",function(){return this._resourceManager;}),d$q(0,d$b,"url",function(){return this._url;}),d$q(0,d$b,"released",function(){return this._released;}),d$q(0,d$b,"referenceCount",function(){return this._referenceCount;}),d$j.getResourceByID=function(d$a){return d$j._idResourcesMap[d$a];},d$j.getResourceByURL=function(d$a,d$b){return void 0===d$b&&(d$b=0),null==d$j._urlResourcesMap[d$a]?null:d$j._urlResourcesMap[d$a][d$b];},d$j.getResourceCountByURL=function(d$a){return d$j._urlResourcesMap[d$a].length;},d$j.destroyUnusedResources=function(d$a){var d$b;if(d$a){var d$c=d$j._groupResourcesMap[d$a];if(d$c)for(var d$d=d$c.slice(),d$e=0,d$f=d$d.length;d$e<d$f;d$e++)(d$b=d$d[d$e]).lock||0!==d$b._referenceCount||d$b.destroy();}else for(var d$i in d$j._idResourcesMap)(d$b=d$j._idResourcesMap[d$i]).lock||0!==d$b._referenceCount||d$b.destroy();},d$j._uniqueIDCounter=0,d$j._idResourcesMap={},d$j._urlResourcesMap={},d$j._groupResourcesMap={},d$j;}()),d$ma=function(d$a){function d$C(d$a,d$b){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,d$C.__super.call(this),d$a&&null!=d$a._addReference&&d$a._addReference(),this.setTo(d$a,d$b);}d$m(d$C,"laya.resource.Texture",d$l);var d$b=d$C.prototype;return d$b._setUrl=function(d$a){this.url=d$a;},d$b.setTo=function(d$a,d$b){if(d$a instanceof d$i.HTMLElement){var d$c=d$va.create("2D",d$a);this.bitmap=d$c;}else this.bitmap=d$a;if(this.uv=d$b||d$C.DEF_UV,d$a){this._w=d$a.width,this._h=d$a.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var d$d=this;if(this._loaded)d$F.addToAtlas&&d$F.addToAtlas(d$d);else{var d$e=d$a;d$e instanceof laya.resource.HTMLImage&&d$e.image&&d$e.image.addEventListener("load",function(d$a){d$F.addToAtlas&&d$F.addToAtlas(d$d);},!1);}}},d$b.active=function(){this.bitmap&&this.bitmap.activeResource();},d$b.destroy=function(d$a){if(void 0===d$a&&(d$a=!1),this.alphaTexture&&(this.alphaTexture.destroy(d$a),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var d$b=this.bitmap;d$a?(d$J.isConchApp&&d$b.source&&d$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,d$b.dispose(),d$b._clearReference()):(d$b._removeReference(),0==d$b.referenceCount&&(d$J.isConchApp&&d$b.source&&d$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,d$b.dispose())),this.url&&this===d$z.loader.getRes(this.url)&&d$z.loader.clearRes(this.url,d$a),this._loaded=!1;}},d$b.load=function(d$a){var d$b=this;this._loaded=!1,d$a=d$I.customFormat(d$a);var d$c=this.bitmap||(this.bitmap=d$ya.create(d$a));d$c.uri=d$a,d$c&&d$c._addReference();var d$d=this;d$c.onload=function(){d$c.onload=null,d$d._loaded=!0,d$b.sourceWidth=d$b._w=d$c.width,d$b.sourceHeight=d$b._h=d$c.height,d$d.event("loaded",this),d$F.addToAtlas&&d$F.addToAtlas(d$d);};},d$b.addTextureToAtlas=function(d$a){d$F.addTextureToAtlas(this);},d$b.getPixels=function(d$a,d$b,d$c,d$d){if(d$J.isConchApp){var d$e=this.bitmap;if(d$e.source&&d$e.source.getImageData){var d$f=d$e.source.getImageData(d$a,d$b,d$c,d$d),d$i=new Uint8Array(d$f);return Array.from(d$i);}return null;}return d$J.isWebGL?d$F.getTexturePixels(this,d$a,d$b,d$c,d$d):(d$O.canvas.size(d$c,d$d),d$O.canvas.clear(),d$O.context.drawTexture(this,-d$a,-d$b,this.width,this.height,0,0),d$O.context.getImageData(0,0,d$c,d$d).data);},d$b.onAsynLoaded=function(d$a,d$b){if(d$b){if("function"!=typeof d$b._addReference)throw new Error("bitmap._addReference is not a function. "+d$b.className+" "+typeof d$b._addReference+" "+d$b.constructor);d$b._addReference();}this.setTo(d$b,this.uv),this._loaded&&this.event("loaded",this);},d$q(0,d$b,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null;}),d$q(0,d$b,"loaded",function(){return this._loaded;}),d$q(0,d$b,"released",function(){return!this.bitmap||this.bitmap.released;}),d$q(0,d$b,"width",function(){return this._w?this._w:this.uv&&this.uv!==d$C.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width;},function(d$a){this._w=d$a,this.sourceWidth||(this.sourceWidth=d$a);}),d$q(0,d$b,"repeat",function(){return!d$J.isWebGL||!this.bitmap||this.bitmap.repeat;},function(d$a){d$a&&d$J.isWebGL&&this.bitmap&&(this.bitmap.repeat=d$a)&&(this.bitmap.enableMerageInAtlas=!1);}),d$q(0,d$b,"height",function(){return this._h?this._h:this.uv&&this.uv!==d$C.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height;},function(d$a){this._h=d$a,this.sourceHeight||(this.sourceHeight=d$a);}),d$q(0,d$b,"isLinearSampling",function(){return!d$J.isWebGL||9728!=this.bitmap.minFifter;},function(d$a){!d$a&&d$J.isWebGL&&(d$a||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1));}),d$C.moveUV=function(d$a,d$b,d$c){for(var d$d=0;d$d<8;d$d+=2)d$c[d$d]+=d$a,d$c[d$d+1]+=d$b;return d$c;},d$C.create=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){void 0===d$f&&(d$f=0),void 0===d$i&&(d$i=0),void 0===d$j&&(d$j=0),void 0===d$k&&(d$k=0);var d$l=d$a instanceof laya.resource.Texture,d$m=d$l?d$a.uv:d$C.DEF_UV,d$n=d$l?d$a.bitmap:d$a,d$o=d$F.isAtlas(d$n);if(d$o){var d$p=d$n._atlaser,d$q=d$a._atlasID;if(-1==d$q)throw new Error("create texture error");d$n=d$p._inAtlasTextureBitmapValue[d$q],d$m=d$p._inAtlasTextureOriUVValue[d$q];}var d$r=new d$C(d$n,null);d$n.width&&d$b+d$d>d$n.width&&(d$d=d$n.width-d$b),d$n.height&&d$c+d$e>d$n.height&&(d$e=d$n.height-d$c),d$r.width=d$d,d$r.height=d$e,d$r.offsetX=d$f,d$r.offsetY=d$i,d$r.sourceWidth=d$j||d$d,d$r.sourceHeight=d$k||d$e;var d$s=1/d$n.width,d$t=1/d$n.height;d$b*=d$s,d$c*=d$t,d$d*=d$s,d$e*=d$t;var d$u=d$r.uv[0],d$v=d$r.uv[1],d$w=d$r.uv[4],d$x=d$r.uv[5],d$y=d$w-d$u,d$z=d$x-d$v,d$A=d$C.moveUV(d$m[0],d$m[1],[d$b,d$c,d$b+d$d,d$c,d$b+d$d,d$c+d$e,d$b,d$c+d$e]);d$r.uv=[d$u+d$A[0]*d$y,d$v+d$A[1]*d$z,d$w-(1-d$A[2])*d$y,d$v+d$A[3]*d$z,d$w-(1-d$A[4])*d$y,d$x-(1-d$A[5])*d$z,d$u+d$A[6]*d$y,d$x-(1-d$A[7])*d$z],d$o&&d$r.addTextureToAtlas();var d$B=d$n.scaleRate;return d$B&&1!=d$B?(d$r.sourceWidth/=d$B,d$r.sourceHeight/=d$B,d$r.width/=d$B,d$r.height/=d$B,d$r.scaleRate=d$B,d$r.offsetX/=d$B,d$r.offsetY/=d$B):d$r.scaleRate=1,d$r;},d$C.createFromTexture=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$a.scaleRate;1!=d$f&&(d$b*=d$f,d$c*=d$f,d$d*=d$f,d$e*=d$f);var d$i=d$B.TEMP.setTo(d$b-d$a.offsetX,d$c-d$a.offsetY,d$d,d$e),d$j=d$i.intersection(d$C._rect1.setTo(0,0,d$a.width,d$a.height),d$C._rect2);if(!d$j)return null;var d$k=d$C.create(d$a,d$j.x,d$j.y,d$j.width,d$j.height,d$j.x-d$i.x,d$j.y-d$i.y,d$d,d$e);if(d$k.bitmap&&d$k.bitmap._removeReference)return d$k.bitmap._removeReference(),d$k;var d$l="bitmap:"+(d$k.bitmap?d$k.bitmap.constructor?d$k.bitmap.constructor.name:d$k.bitmap.__className:"")+", url:"+(d$a.url+" | "+(d$k.bitmap?d$k.bitmap.url:d$a.url))+", x="+d$b+",y="+d$c+",width="+d$d+",height="+d$e+", result="+(d$j?d$j.x+","+d$j.y+","+d$j.width+","+d$j.height:"null")+", rect="+d$i.x+","+d$i.y+","+d$i.width+","+d$i.height;throw new Error("报错：bitmap._removeReference is not a function  "+d$l);},d$C.DEF_UV=[0,0,1,0,1,1,0,1],d$C.INV_UV=[0,1,1,1,1,0,0,0],d$C._rect1=new d$B(),d$C._rect2=new d$B(),d$C;}(),d$a=function(d$a){var d$j;function d$f(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,d$f.__super.call(this);}d$m(d$f,"laya.utils.TimeLine",d$l);var d$b=d$f.prototype;return d$b.to=function(d$a,d$b,d$c,d$d,d$e){return void 0===d$e&&(d$e=0),this._create(d$a,d$b,d$c,d$d,d$e,!0);},d$b.from=function(d$a,d$b,d$c,d$d,d$e){return void 0===d$e&&(d$e=0),this._create(d$a,d$b,d$c,d$d,d$e,!1);},d$b._create=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=d$W.getItemByClass("tweenData",d$j);return d$i.isTo=d$f,d$i.type=0,d$i.target=d$a,d$i.duration=d$c,d$i.data=d$b,d$i.startTime=this._startTime+d$e,d$i.endTime=d$i.startTime+d$i.duration,d$i.ease=d$d,this._startTime=Math.max(d$i.endTime,this._startTime),this._tweenDataList.push(d$i),this._startTimeSort=!0,this._endTimeSort=!0,this;},d$b.addLabel=function(d$a,d$b){var d$c=d$W.getItemByClass("tweenData",d$j);return d$c.type=1,d$c.data=d$a,d$c.endTime=d$c.startTime=this._startTime+d$b,this._labelDic||(this._labelDic={}),this._labelDic[d$a]=d$c,this._tweenDataList.push(d$c),this;},d$b.removeLabel=function(d$a){if(this._labelDic&&this._labelDic[d$a]){var d$b=this._labelDic[d$a];if(d$b){var d$c=this._tweenDataList.indexOf(d$b);-1<d$c&&this._tweenDataList.splice(d$c,1);}delete this._labelDic[d$a];}},d$b.gotoTime=function(d$a){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var d$b,d$c,d$d,d$e;for(var d$f in this._firstTweenDic)if(d$c=this._firstTweenDic[d$f])for(var d$i in d$c)d$c.diyTarget.hasOwnProperty(d$i)&&(d$c.diyTarget[d$i]=d$c[d$i]);for(d$f in this._tweenDic)(d$b=this._tweenDic[d$f]).clear(),delete this._tweenDic[d$f];if(this._index=0,this._gidIndex=0,this._currTime=d$a,this._lastTime=d$O.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=d$d=this._tweenDataList.concat(),d$d.sort(function(d$a,d$b){return d$a.endTime>d$b.endTime?1:d$a.endTime<d$b.endTime?-1:0;});}else d$d=this._endTweenDataList;for(var d$j=0,d$k=d$d.length;d$j<d$k;d$j++)if(0==(d$e=d$d[d$j]).type){if(!(d$a>=d$e.endTime))break;this._index=Math.max(this._index,d$j+1);var d$l=d$e.data;if(d$e.isTo)for(var d$m in d$l)d$e.target[d$m]=d$l[d$m];}for(d$j=0,d$k=this._tweenDataList.length;d$j<d$k;d$j++)0==(d$e=this._tweenDataList[d$j]).type&&d$a>=d$e.startTime&&d$a<d$e.endTime&&(this._index=Math.max(this._index,d$j+1),this._gidIndex++,(d$b=d$W.getItemByClass("tween",d$Z))._create(d$e.target,d$e.data,d$e.duration,d$e.ease,d$u.create(this,this._animComplete,[this._gidIndex]),0,!1,d$e.isTo,!0,!1),d$b.setStartTime(this._currTime-(d$a-d$e.startTime)),d$b._updateEase(this._currTime),d$b.gid=this._gidIndex,this._tweenDic[this._gidIndex]=d$b);}},d$b.gotoLabel=function(d$a){if(null!=this._labelDic){var d$b=this._labelDic[d$a];d$b&&this.gotoTime(d$b.startTime);}},d$b.pause=function(){d$z.timer.clear(this,this._update);},d$b.resume=function(){this.play(this._currTime,this._loopKey);},d$b.play=function(d$a,d$b){if(void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(d$a,d$b){return d$a.startTime>d$b.startTime?1:d$a.startTime<d$b.startTime?-1:0;});for(var d$c=0,d$d=this._tweenDataList.length;d$c<d$d;d$c++){var d$e=this._tweenDataList[d$c];if(null!=d$e&&0==d$e.type){var d$f=d$e.target,d$i=d$f.$_GID||(d$f.$_GID=d$$.getGID()),d$j=null;for(var d$k in null==this._firstTweenDic[d$i]?((d$j={}).diyTarget=d$f,this._firstTweenDic[d$i]=d$j):d$j=this._firstTweenDic[d$i],d$e.data)null==d$j[d$k]&&(d$j[d$k]=d$f[d$k]);}}}"string"==typeof d$a?this.gotoLabel(d$a):this.gotoTime(d$a),this._loopKey=d$b,this._lastTime=d$O.now(),d$z.timer.frameLoop(1,this,this._update);}},d$b._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var d$a in this._tweenDic)(d$b=this._tweenDic[d$a]).complete();return this._complete(),void this.pause();}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0);}var d$b,d$c=d$O.now(),d$d=d$c-this._lastTime,d$e=this._currTime+=d$d*this.scale;for(d$a in this._lastTime=d$c,this._tweenDic)(d$b=this._tweenDic[d$a])._updateEase(d$e);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var d$f=this._tweenDataList[this._index];d$e>=d$f.startTime&&(this._index++,0==d$f.type?(this._gidIndex++,(d$b=d$W.getItemByClass("tween",d$Z))._create(d$f.target,d$f.data,d$f.duration,d$f.ease,d$u.create(this,this._animComplete,[this._gidIndex]),0,!1,d$f.isTo,!0,!1),d$b.setStartTime(d$e),d$b.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=d$b)._updateEase(d$e)):this.event("label",d$f.data));}},d$b._animComplete=function(d$a){this._tweenDic[d$a]&&delete this._tweenDic[d$a];},d$b._complete=function(){this.event("complete");},d$b.reset=function(){var d$a;if(this._labelDic)for(d$a in this._labelDic)delete this._labelDic[d$a];for(d$a in this._tweenDic)this._tweenDic[d$a].clear(),delete this._tweenDic[d$a];for(d$a in this._firstTweenDic)delete this._firstTweenDic[d$a];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var d$b,d$c=0;for(d$b=this._tweenDataList.length,d$c=0;d$c<d$b;d$c++)this._tweenDataList[d$c]&&this._tweenDataList[d$c].destroy();}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,d$z.timer.clear(this,this._update);},d$b.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null;},d$q(0,d$b,"index",function(){return this._frameIndex;},function(d$a){this._frameIndex=d$a,this.gotoTime(this._frameIndex/this._frameRate*1e3);}),d$q(0,d$b,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total;}),d$f.to=function(d$a,d$b,d$c,d$d,d$e){return void 0===d$e&&(d$e=0),new d$f().to(d$a,d$b,d$c,d$d,d$e);},d$f.from=function(d$a,d$b,d$c,d$d,d$e){return void 0===d$e&&(d$e=0),new d$f().from(d$a,d$b,d$c,d$d,d$e);},d$f.__init$=function(){d$j=function(){function d$a(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null;}return d$m(d$a,""),d$a.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,d$W.recover("tweenData",this);},d$a;}();},d$f;}(),d$na=function(d$e){function d$c(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,d$c.__super.call(this),this._style=d$j.EMPTY;}d$m(d$c,"laya.display.Sprite",d$e);var d$a=d$c.prototype;return d$z.imps(d$a,{"laya.display.ILayout":!0}),d$a.createConchModel=function(){return new ConchNode();},d$a.destroy=function(d$a){if(void 0===d$a&&(d$a=!0),this._releaseMem(),!this._destroyed){this.filters=null;var d$b=this.mask;d$b&&(this.mask=null,d$b.destroy(d$a));}d$e.prototype.destroy.call(this,d$a),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null;},d$a.updateZOrder=function(){d$$.updateOrder(this._childs)&&this.repaint();},d$a.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1;},d$a.setBounds=function(d$a){this._set$P("uBounds",d$a);},d$a.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new d$B()),d$B._getWrapRec(this._boundPointsToParent(),this._$P.mBounds);},d$a.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new d$B()),d$B._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds));},d$a._boundPointsToParent=function(d$a){void 0===d$a&&(d$a=!1);var d$b=0,d$c=0;this._style&&(d$b=this._style._tf.translateX,d$c=this._style._tf.translateY,d$a=d$a||0!==this._style._tf.rotate,this._style.scrollRect&&(d$b+=this._style.scrollRect.x,d$c+=this._style.scrollRect.y));var d$d=this._getBoundPointsM(d$a);if(!d$d||d$d.length<1)return d$d;if(8!=d$d.length&&(d$d=d$a?d$x.scanPList(d$d):d$B._getWrapRec(d$d,d$B.TEMP)._getBoundPoints()),!this.transform)return d$$.transPointList(d$d,this._x-d$b,this._y-d$c),d$d;var d$e=d$A.TEMP,d$f=0,d$i=d$d.length;for(d$f=0;d$f<d$i;d$f+=2)d$e.x=d$d[d$f],d$e.y=d$d[d$f+1],this.toParentPoint(d$e),d$d[d$f]=d$e.x,d$d[d$f+1]=d$e.y;return d$d;},d$a.getGraphicBounds=function(d$a){return void 0===d$a&&(d$a=!1),this._graphics?this._graphics.getBounds(d$a):d$B.TEMP.setTo(0,0,0,0);},d$a._getBoundPointsM=function(d$a){if(void 0===d$a&&(d$a=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var d$b=d$$.clearArray(this._$P.temBM),d$c=d$B.TEMP;return d$c.copyFrom(this.scrollRect),d$$.concatArray(d$b,d$c._getBoundPoints()),d$b;}for(var d$d,d$e,d$f,d$i=this._graphics?this._graphics.getBoundPoints():d$$.clearArray(this._$P.temBM),d$j=0,d$k=(d$f=this._childs).length;d$j<d$k;d$j++)(d$d=d$f[d$j])instanceof laya.display.Sprite&&1==d$d.visible&&(d$e=d$d._boundPointsToParent(d$a))&&(d$i=d$i?d$$.concatArray(d$i,d$e):d$e);return d$i;},d$a.getStyle=function(){return this._style===d$j.EMPTY&&(this._style=new d$j()),this._style;},d$a.setStyle=function(d$a){this._style=d$a;},d$a._adjustTransform=function(){this._tfChanged=!1;var d$a,d$b=this._style._tf,d$c=d$b.scaleX,d$d=d$b.scaleY;if(d$b.rotate||1!==d$c||1!==d$d||d$b.skewX||d$b.skewY){(d$a=this._transform||(this._transform=d$G.create())).bTransform=!0;var d$e=.0174532922222222*(d$b.rotate-d$b.skewX),d$f=.0174532922222222*(d$b.rotate+d$b.skewY),d$i=Math.cos(d$f),d$j=Math.sin(d$f),d$k=Math.sin(d$e),d$l=Math.cos(d$e);return d$a.a=d$c*d$i,d$a.b=d$c*d$j,d$a.c=-d$d*d$k,d$a.d=d$d*d$l,d$a.tx=d$a.ty=0,d$a;}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,d$a;},d$a.pos=function(d$a,d$b,d$c){if(void 0===d$c&&(d$c=!1),this._x!==d$a||this._y!==d$b){if(this.destroyed)return this;if(d$c){this._x=d$a,this._y=d$b,this.conchModel&&this.conchModel.pos(this._x,this._y);var d$d=this._parent;d$d&&0===d$d._repaint&&(d$d._repaint=1,d$d.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}else this.x=d$a,this.y=d$b;}return this;},d$a.pivot=function(d$a,d$b){return this.pivotX=d$a,this.pivotY=d$b,this;},d$a.size=function(d$a,d$b){return this.width=d$a,this.height=d$b,this;},d$a.scale=function(d$a,d$b,d$c){void 0===d$c&&(d$c=!1);var d$d=this.getStyle(),d$e=d$d._tf;if(d$e.scaleX!=d$a||d$e.scaleY!=d$b){if(this.destroyed)return this;if(d$c){d$d.setScale(d$a,d$b),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(d$a,d$b),this._renderType|=4;var d$f=this._parent;d$f&&0===d$f._repaint&&(d$f._repaint=1,d$f.parentRepaint());}else this.scaleX=d$a,this.scaleY=d$b;}return this;},d$a.skew=function(d$a,d$b){return this.skewX=d$a,this.skewY=d$b,this;},d$a.render=function(d$a,d$b,d$c){d$X.spriteCount++,d$L.renders[this._renderType]._fun(this,d$a,d$b+this._x,d$c+this._y),this._repaint=0;},d$a.drawToCanvas=function(d$a,d$b,d$c,d$d){if(d$J.isConchNode){var d$e=d$va.create("2D");return new d$K(d$a,d$b,d$e).ctx.setCanvasType(1),this.conchModel.drawToCanvas(d$e.source,d$c,d$d),d$e;}return d$F.drawToCanvas(this,this._renderType,d$a,d$b,d$c,d$d);},d$a.customRender=function(d$a,d$b,d$c){this._renderType|=1024;},d$a._applyFilters=function(){var d$a;if(!d$J.isWebGL&&(d$a=this._$P.filters)&&!(d$a.length<1))for(var d$b=0,d$c=d$a.length;d$b<d$c;d$b++)d$a[d$b].action.apply(this._$P.cacheCanvas);},d$a._isHaveGlowFilter=function(){var d$a,d$b=0;if(this.filters)for(d$b=0;d$b<this.filters.length;d$b++)if(8==this.filters[d$b].type)return!0;for(d$b=0,d$a=this._childs.length;d$b<d$a;d$b++)if(this._childs[d$b]._isHaveGlowFilter())return!0;return!1;},d$a.localToGlobal=function(d$a,d$b){void 0===d$b&&(d$b=!1),!0===d$b&&(d$a=new d$A(d$a.x,d$a.y));for(var d$c=this;d$c&&d$c!=d$z.stage;)d$a=d$c.toParentPoint(d$a),d$c=d$c.parent;return d$a;},d$a.globalToLocal=function(d$a,d$b){void 0===d$b&&(d$b=!1),d$b&&(d$a=new d$A(d$a.x,d$a.y));for(var d$c=this,d$d=[];d$c&&d$c!=d$z.stage;)d$d.push(d$c),d$c=d$c.parent;for(var d$e=d$d.length-1;0<=d$e;)d$a=(d$c=d$d[d$e]).fromParentPoint(d$a),d$e--;return d$a;},d$a.toParentPoint=function(d$a){if(!d$a)return d$a;d$a.x-=this.pivotX,d$a.y-=this.pivotY,this.transform&&this._transform.transformPoint(d$a),d$a.x+=this._x,d$a.y+=this._y;var d$b=this._style.scrollRect;return d$b&&(d$a.x-=d$b.x,d$a.y-=d$b.y),d$a;},d$a.fromParentPoint=function(d$a){if(!d$a)return d$a;d$a.x-=this._x,d$a.y-=this._y;var d$b=this._style.scrollRect;return d$b&&(d$a.x+=d$b.x,d$a.y+=d$b.y),this.transform&&this._transform.invertTransformPoint(d$a),d$a.x+=this.pivotX,d$a.y+=this.pivotY,d$a;},d$a.on=function(d$a,d$b,d$c,d$d){return 1!==this._mouseEnableState&&this.isMouseEvent(d$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(d$a,d$b,d$c,d$d,!1)):d$e.prototype.on.call(this,d$a,d$b,d$c,d$d);},d$a.once=function(d$a,d$b,d$c,d$d){return 1!==this._mouseEnableState&&this.isMouseEvent(d$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(d$a,d$b,d$c,d$d,!0)):d$e.prototype.once.call(this,d$a,d$b,d$c,d$d);},d$a._$2__onDisplay=function(){if(1!==this._mouseEnableState){var d$a=this;for(d$a=d$a.parent;d$a&&1!==d$a._mouseEnableState&&!d$a._getBit(2);)d$a.mouseEnabled=!0,d$a._setBit(2,!0),d$a=d$a.parent;}},d$a.loadImage=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=this;return void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0),this.graphics.loadImage(d$a,d$b,d$c,d$d,d$e,function(d$a){d$i.destroyed||(d$i.size(d$b+(d$d||d$a.width),d$c+(d$e||d$a.height)),d$i.repaint(),d$f&&d$f.runWith(d$a));}),this;},d$a.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint();},d$a._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache;},d$a._childChanged=function(d$a){this._childs.length?this._renderType|=2048:this._renderType&=-2049,d$a&&this._get$P("hasZorder")&&d$z.timer.callLater(this,this.updateZOrder),this.repaint();},d$a.parentRepaint=function(){var d$a=this._parent;d$a&&0===d$a._repaint&&(d$a._repaint=1,d$a.parentRepaint());},d$a.startDrag=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){void 0===d$b&&(d$b=!1),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=300),void 0===d$f&&(d$f=!1),void 0===d$i&&(d$i=.92),this._$P.dragging||this._set$P("dragging",new d$T()),this._$P.dragging.start(this,d$a,d$b,d$c,d$d,d$e,d$f,d$i);},d$a.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop();},d$a._releaseMem=function(){if(this._$P){var d$a=this._$P.cacheCanvas;d$a&&d$a.ctx&&(d$W.recover("RenderContext",d$a.ctx),d$a.ctx.canvas.size(0,0),d$a.ctx=null);var d$b=this._$P._filterCache;d$b&&(d$b.destroy(),d$b.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null;}},d$a._setDisplay=function(d$a){d$a||this._releaseMem(),d$e.prototype._setDisplay.call(this,d$a);},d$a.hitTestPoint=function(d$a,d$b){var d$c=this.globalToLocal(d$A.TEMP.setTo(d$a,d$b));return d$a=d$c.x,d$b=d$c.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?d$B.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(d$a,d$b);},d$a.getMousePoint=function(){return this.globalToLocal(d$A.TEMP.setTo(d$z.stage.mouseX,d$z.stage.mouseY));},d$a._getWords=function(){return null;},d$a._addChildsToLayout=function(d$a){var d$b=this._getWords();if(null==d$b&&0==this._childs.length)return!1;if(d$b)for(var d$c=0,d$d=d$b.length;d$c<d$d;d$c++)d$a.push(d$b[d$c]);d$c=0;for(var d$e=this._childs.length;d$c<d$e;++d$c){var d$f=this._childs[d$c];d$f._style._enableLayout()&&d$f._addToLayout(d$a);}return!0;},d$a._addToLayout=function(d$a){this._style.absolute||(this._style.block?d$a.push(this):this._addChildsToLayout(d$a)&&(this.x=this.y=0));},d$a._isChar=function(){return!1;},d$a._getCSSStyle=function(){return this._style.getCSSStyle();},d$a._setAttributes=function(d$a,d$b){switch(d$a){case"x":this.x=parseFloat(d$b);break;case"y":this.y=parseFloat(d$b);break;case"width":this.width=parseFloat(d$b);break;case"height":this.height=parseFloat(d$b);break;default:this[d$a]=d$b;}},d$a._layoutLater=function(){this.parent&&this.parent._layoutLater();},d$q(0,d$a,"optimizeScrollRect",function(){return this._optimizeScrollRect;},function(d$a){this._optimizeScrollRect!=d$a&&(this._optimizeScrollRect=d$a,this.conchModel&&this.conchModel.optimizeScrollRect(d$a));}),d$q(0,d$a,"customRenderEnable",null,function(d$a){if(d$a&&(this._renderType|=1024,d$J.isConchNode)){d$c.CustomList.push(this);var d$b=new d$va("2d");d$b._setContext(new CanvasRenderingContext2D()),this.customContext=new d$K(0,0,d$b),d$b.context.setCanvasType&&d$b.context.setCanvasType(2),this.conchModel.custom(d$b.context);}}),d$q(0,d$a,"cacheAsBitmap",function(){return"none"!==this.cacheAs;},function(d$a){this.cacheAs=d$a?this._$P.hasFilter?"none":"normal":"none";}),d$q(0,d$a,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type;},function(d$a){var d$b=this._$P.cacheCanvas;if(d$a!==(d$b?d$b.type:"none")){if("none"!==d$a)this._getBit(1)||this._setUpNoticeType(1),d$b||(d$b=this._set$P("cacheCanvas",d$W.getItemByClass("cacheCanvas",Object))),d$b.type=d$a,d$b.reCache=!0,this._renderType|=16,"bitmap"==d$a&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(d$b){var d$c=d$b;d$c&&d$c.ctx&&(d$W.recover("RenderContext",d$c.ctx),d$c.ctx.canvas.size(0,0),d$c.ctx=null),d$W.recover("cacheCanvas",d$b);}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0);}this.repaint();}}),d$q(0,d$a,"zOrder",function(){return this._zOrder;},function(d$a){this._zOrder!=d$a&&(this._zOrder=d$a,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(d$a),this._parent&&(d$a&&this._parent._set$P("hasZorder",!0),d$z.timer.callLater(this._parent,this.updateZOrder)));}),d$q(0,d$a,"rotation",function(){return this._style._tf.rotate;},function(d$a){var d$b=this.getStyle();if(d$b._tf.rotate!==d$a){d$b.setRotate(d$a),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(d$a),this._renderType|=4;var d$c=this._parent;d$c&&0===d$c._repaint&&(d$c._repaint=1,d$c.parentRepaint());}}),d$q(0,d$a,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width;},function(d$a){this._width!==d$a&&(this._width=d$a,this.conchModel&&this.conchModel.size(d$a,this._height),this.repaint());}),d$q(0,d$a,"x",function(){return this._x;},function(d$a){if(this._x!==d$a){if(this.destroyed)return;this._x=d$a,this.conchModel&&this.conchModel.pos(d$a,this._y);var d$b=this._parent;d$b&&0===d$b._repaint&&(d$b._repaint=1,d$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}}),d$q(0,d$a,"globalScaleY",function(){for(var d$a=1,d$b=this;d$b&&d$b!==d$z.stage;)d$a*=d$b.scaleY,d$b=d$b.parent;return d$a;}),d$q(0,d$a,"hitArea",function(){return this._$P.hitArea;},function(d$a){this._set$P("hitArea",d$a);}),d$q(0,d$a,"staticCache",function(){return this._$P.staticCache;},function(d$a){this._set$P("staticCache",d$a),d$a||this.reCache();}),d$q(0,d$a,"texture",function(){return this._texture;},function(d$a){this._texture!=d$a&&(this._texture=d$a,this.graphics.cleanByTexture(d$a,0,0));}),d$q(0,d$a,"y",function(){return this._y;},function(d$a){if(this._y!==d$a){if(this.destroyed)return;this._y=d$a,this.conchModel&&this.conchModel.pos(this._x,d$a);var d$b=this._parent;d$b&&0===d$b._repaint&&(d$b._repaint=1,d$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint());}}),d$q(0,d$a,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height;},function(d$a){this._height!==d$a&&(this._height=d$a,this.conchModel&&this.conchModel.size(this._width,d$a),this.repaint());}),d$q(0,d$a,"blendMode",function(){return this._style.blendMode;},function(d$a){this.getStyle().blendMode=d$a,this.conchModel&&this.conchModel.blendMode(d$a),d$a&&"source-over"!=d$a?this._renderType|=8:this._renderType&=-9,this.parentRepaint();}),d$q(0,d$a,"scaleX",function(){return this._style._tf.scaleX;},function(d$a){var d$b=this.getStyle();if(d$b._tf.scaleX!==d$a){d$b.setScaleX(d$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(d$a,d$b._tf.scaleY),this._renderType|=4;var d$c=this._parent;d$c&&0===d$c._repaint&&(d$c._repaint=1,d$c.parentRepaint());}}),d$q(0,d$a,"scaleY",function(){return this._style._tf.scaleY;},function(d$a){var d$b=this.getStyle();if(d$b._tf.scaleY!==d$a){d$b.setScaleY(d$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(d$b._tf.scaleX,d$a),this._renderType|=4;var d$c=this._parent;d$c&&0===d$c._repaint&&(d$c._repaint=1,d$c.parentRepaint());}}),d$q(0,d$a,"stage",function(){return d$z.stage;}),d$q(0,d$a,"skewX",function(){return this._style._tf.skewX;},function(d$a){var d$b=this.getStyle();if(d$b._tf.skewX!==d$a){d$b.setSkewX(d$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(d$a,d$b._tf.skewY),this._renderType|=4;var d$c=this._parent;d$c&&0===d$c._repaint&&(d$c._repaint=1,d$c.parentRepaint());}}),d$q(0,d$a,"scrollRect",function(){return this._style.scrollRect;},function(d$a){this.getStyle().scrollRect=d$a,this.repaint(),d$a?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(d$a.x,d$a.y,d$a.width,d$a.height)):(this._renderType&=-129,this.conchModel&&(d$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)));}),d$q(0,d$a,"skewY",function(){return this._style._tf.skewY;},function(d$a){var d$b=this.getStyle();if(d$b._tf.skewY!==d$a){d$b.setSkewY(d$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(d$b._tf.skewX,d$a),this._renderType|=4;var d$c=this._parent;d$c&&0===d$c._repaint&&(d$c._repaint=1,d$c.parentRepaint());}}),d$q(0,d$a,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform;},function(d$a){this._tfChanged=!1,(this._transform=d$a)&&(this._x=d$a.tx,this._y=d$a.ty,d$a.tx=d$a.ty=0,this.conchModel&&this.conchModel.transform(d$a.a,d$a.b,d$a.c,d$a.d,this._x,this._y)),d$a?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint();}),d$q(0,d$a,"pivotX",function(){return this._style._tf.translateX;},function(d$a){this.getStyle().setTranslateX(d$a),this.conchModel&&this.conchModel.pivot(d$a,this._style._tf.translateY),this.repaint();}),d$q(0,d$a,"pivotY",function(){return this._style._tf.translateY;},function(d$a){this.getStyle().setTranslateY(d$a),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,d$a),this.repaint();}),d$q(0,d$a,"alpha",function(){return this._style.alpha;},function(d$a){this._style&&this._style.alpha!==d$a&&(d$a=d$a<0?0:1<d$a?1:d$a,this.getStyle().alpha=d$a,this.conchModel&&this.conchModel.alpha(d$a),1!==d$a?this._renderType|=2:this._renderType&=-3,this.parentRepaint());}),d$q(0,d$a,"visible",function(){return this._style.visible;},function(d$a){this._style&&this._style.visible!==d$a&&(this.getStyle().visible=d$a,this.conchModel&&this.conchModel.visible(d$a),this.parentRepaint());}),d$q(0,d$a,"graphics",function(){return this._graphics||(this.graphics=d$F.createGraphics());},function(d$a){this._graphics&&(this._graphics._sp=null),(this._graphics=d$a)?(this._renderType&=-2,this._renderType|=512,(d$a._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(d$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint();}),d$q(0,d$a,"filters",function(){return this._$P.filters;},function(d$a){d$a&&0===d$a.length&&(d$a=null),this._$P.filters!=d$a&&(this._set$P("filters",d$a?d$a.slice():null),d$J.isConchApp&&(this.conchModel&&(d$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),d$J.isWebGL&&(d$a&&d$a.length?this._renderType|=32:this._renderType&=-33),d$a&&0<d$a.length?(this._getBit(1)||this._setUpNoticeType(1),d$J.isWebGL&&1==d$a.length&&d$a[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(d$J.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint());}),d$q(0,d$a,"parent",d$e.prototype._$get_parent,function(d$a){d$z.superSet(d$aa,this,"parent",d$a),d$a&&this._getBit(2)&&this._$2__onDisplay();}),d$q(0,d$a,"mask",function(){return this._$P._mask;},function(d$a){d$a&&this.mask&&this.mask._$P.maskParent||(d$a?(this.cacheAs="bitmap",this._set$P("_mask",d$a),d$a._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",d$a),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(d$a?d$a.conchModel:null),this._renderType|=64,this.parentRepaint());}),d$q(0,d$a,"mouseEnabled",function(){return 1<this._mouseEnableState;},function(d$a){this._mouseEnableState=d$a?2:1;}),d$q(0,d$a,"globalScaleX",function(){for(var d$a=1,d$b=this;d$b&&d$b!==d$z.stage;)d$a*=d$b.scaleX,d$b=d$b.parent;return d$a;}),d$q(0,d$a,"mouseX",function(){return this.getMousePoint().x;}),d$q(0,d$a,"mouseY",function(){return this.getMousePoint().y;}),d$c.fromImage=function(d$a){return new d$c().loadImage(d$a);},d$c._cachePool=[],d$c.CustomList=[],d$k(d$c,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=d$i.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):"";}]),d$c;}(d$aa),d$oa=function(d$a){function d$b(d$a){this._audio=null,this._onEnd=null,this._resumePlay=null,d$b.__super.call(this),this._onEnd=d$$.bind(this.__onEnd,this),this._resumePlay=d$$.bind(this.__resumePlay,this),d$a.addEventListener("ended",this._onEnd),this._audio=d$a;}d$m(d$b,"laya.media.h5audio.AudioSoundChannel",d$da);var d$c=d$b.prototype;return d$c.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(d$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0);},d$c.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,d$O.container.appendChild(this._audio),this._audio.play();}catch(d$a){this.event("error");}},d$c.play=function(d$a){this.isStopped=!1;try{this._audio.playbackRate=d$E.playbackRate,this._audio.currentTime=this.startTime;}catch(d$a){return void this._audio.addEventListener("canplay",this._resumePlay);}d$E.addChannel(this),d$O.container.appendChild(this._audio),!d$a&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play();},d$c.stop=function(){this.isStopped=!0,d$E.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&d$J.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),d$O.onIE||this._audio!=d$ca._musicAudio&&d$W.recover("audio:"+this.url,this._audio),d$O.removeElement(this._audio),this._audio=null);},d$c.pause=function(){this.isStopped=!0,d$E.removeChannel(this),"pause"in this._audio&&this._audio.pause();},d$c.resume=function(){this._audio&&(this.isStopped=!1,d$E.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play());},d$q(0,d$c,"position",function(){return this._audio?this._audio.currentTime:0;}),d$q(0,d$c,"duration",function(){return this._audio?this._audio.duration:0;}),d$q(0,d$c,"volume",function(){return this._audio?this._audio.volume:1;},function(d$a){this._audio&&(this._audio.volume=d$a);}),d$b;}(),d$pa=function(d$a){function d$b(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=d$fa.ctx,d$b.__super.call(this),this._onPlayEnd=d$$.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode();}d$m(d$b,"laya.media.webaudio.WebAudioSoundChannel",d$da);var d$c=d$b.prototype;return d$c.play=function(d$a){if(d$E.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var d$b=this.context,d$c=this.gain,d$d=d$b.createBufferSource();(this.bufferSource=d$d).buffer=this.audioBuffer,d$d.connect(d$c),d$c&&d$c.disconnect(),d$c.connect(d$b.destination),d$d.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=d$O.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(d$d.loop=!0),d$d.playbackRate.setTargetAtTime?d$d.playbackRate.setTargetAtTime(d$E.playbackRate,this.context.currentTime,.1):d$d.playbackRate.value=d$E.playbackRate,d$d.start(0,this.startTime),!d$a&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0;}},d$c.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(d$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0);},d$c._clearBufferSource=function(){if(this.bufferSource){var d$a=this.bufferSource;d$a.stop?d$a.stop(0):d$a.noteOff(0),d$a.disconnect(0),d$a.onended=null,d$b._tryCleanFailed||this._tryClearBuffer(d$a),this.bufferSource=null;}},d$c._tryClearBuffer=function(d$a){try{d$a.buffer=null;}catch(d$a){d$b._tryCleanFailed=!0;}},d$c.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,d$E.removeChannel(this),this.startHandler=null,this.completeHandler=null;},d$c.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,d$E.removeChannel(this);},d$c.resume=function(){this.startTime=this._pauseTime,this.play(!1);},d$q(0,d$c,"position",function(){return this.bufferSource?(d$O.now()-this._startTime)/1e3+this.startTime:0;}),d$q(0,d$c,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0;}),d$q(0,d$c,"volume",function(){return this._volume;},function(d$a){this.isStopped||(this._volume=d$a,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(d$a,this.context.currentTime,.1):this.gain.gain.value=d$a);}),d$b._tryCleanFailed=!1,d$b;}(),d$qa=function(d$a){function d$b(){d$b.__super.call(this),this._w=0,this._h=0;}d$m(d$b,"laya.resource.Bitmap",d$la);var d$c=d$b.prototype;return d$q(0,d$c,"width",function(){return this._w;}),d$q(0,d$c,"height",function(){return this._h;}),d$q(0,d$c,"source",function(){return this._source;}),d$b;}(),d$ra=function(d$b){function d$a(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,d$a.__super.call(this),this._interval=d$d.animationInterval,this._setUpNoticeType(1);}d$m(d$a,"laya.display.AnimationPlayerBase",d$b);var d$c=d$a.prototype;return d$c.play=function(d$a,d$b,d$c,d$d){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=!0),void 0===d$c&&(d$c=""),void 0===d$d&&(d$d=!0),this._isPlaying=!0,this.index="string"==typeof d$a?this._getFrameByLabel(d$a):d$a,this.loop=d$b,this._actionName=d$c,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0);},d$c._getFrameByLabel=function(d$a){var d$b=0;for(d$b=0;d$b<this._count;d$b++)if(this._labels[d$b]&&0<=this._labels[d$b].indexOf(d$a))return d$b;return 0;},d$c._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete");}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete");}this.index=this._index;},d$c._setControlNode=function(d$a){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=d$a)&&d$a!=this&&(d$a.on("display",this,this._checkResumePlaying),d$a.on("undisplay",this,this._checkResumePlaying));},d$c._setDisplay=function(d$a){d$b.prototype._setDisplay.call(this,d$a),this._checkResumePlaying();},d$c._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop));},d$c.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop);},d$c.addLabel=function(d$a,d$b){this._labels||(this._labels={}),this._labels[d$b]||(this._labels[d$b]=[]),this._labels[d$b].push(d$a);},d$c.removeLabel=function(d$a){if(d$a){if(this._labels)for(var d$b in this._labels)this._removeLabelFromLabelList(this._labels[d$b],d$a);}else this._labels=null;},d$c._removeLabelFromLabelList=function(d$a,d$b){if(d$a)for(var d$c=d$a.length-1;0<=d$c;d$c--)d$a[d$c]==d$b&&d$a.splice(d$c,1);},d$c.gotoAndStop=function(d$a){this.index="string"==typeof d$a?this._getFrameByLabel(d$a):d$a,this.stop();},d$c._displayToIndex=function(d$a){},d$c.clear=function(){this.stop(),this._labels=null;},d$q(0,d$c,"interval",function(){return this._interval;},function(d$a){this._interval!=d$a&&(this._frameRateChanged=!0,this._interval=d$a,this._isPlaying&&0<d$a&&this.timerLoop(d$a,this,this._frameLoop,null,!0,!0));}),d$q(0,d$c,"isPlaying",function(){return this._isPlaying;}),d$q(0,d$c,"index",function(){return this._index;},function(d$a){if(this._index=d$a,this._displayToIndex(d$a),this._labels&&this._labels[d$a])for(var d$b=this._labels[d$a],d$c=0,d$d=d$b.length;d$c<d$d;d$c++)this.event("label",d$b[d$c]);}),d$q(0,d$c,"count",function(){return this._count;}),d$a.WRAP_POSITIVE=0,d$a.WRAP_REVERSE=1,d$a.WRAP_PINGPONG=2,d$a;}(d$na),d$sa=function(d$b){function d$p(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,d$p.__super.call(this),this.overflow=d$p.VISIBLE,this._style=new d$ba(this),this._style.wordWrap=!1;}d$m(d$p,"laya.display.Text",d$b);var d$a=d$p.prototype;return d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._lines=null,this._words&&(this._words.length=0,this._words=null);},d$a._getBoundPointsM=function(d$a){void 0===d$a&&(d$a=!1);var d$b=d$B.TEMP;return d$b.setTo(0,0,this.width,this.height),d$b._getBoundPoints();},d$a.getGraphicBounds=function(d$a){void 0===d$a&&(d$a=!1);var d$b=d$B.TEMP;return d$b.setTo(0,0,this.width,this.height),d$b;},d$a._getCSSStyle=function(){return this._style;},d$a.lang=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m){if(d$a=d$p.langPacks&&d$p.langPacks[d$a]?d$p.langPacks[d$a]:d$a,arguments.length<2)this._text=d$a;else{for(var d$n=0,d$o=arguments.length;d$n<d$o;d$n++)d$a=d$a.replace("{"+d$n+"}",arguments[d$n+1]);this._text=d$a;}},d$a._isPassWordMode=function(){var d$a=this._style.password;return"prompt"in this&&this.prompt==this._text&&(d$a=!1),d$a;},d$a._getPassWordTxt=function(d$a){var d$b;d$b="";for(var d$c=d$a.length;0<d$c;d$c--)d$b+="●";return d$b;},d$a.renderText=function(d$a,d$b){var d$c=this.graphics;d$c.clear(!0);var d$d=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(d$O.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);d$O.context.font=d$d;var d$e=this.padding,d$f=d$e[3],d$i="left",d$j=this._lines,d$k=this.leading+this._charSize.height,d$l=this._currBitmapFont;d$l&&(d$k=this.leading+d$l.getMaxHeight());var d$m=d$e[0];if(!d$l&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(d$i="right",d$f=this._width-d$e[1]):"center"==this.align&&(d$i="center",d$f=.5*this._width+d$e[3]-d$e[1])),0<this._height){var d$n=this._textHeight>this._height?"top":this.valign;"middle"===d$n?d$m=.5*(this._height-d$b*d$k)+d$e[0]-d$e[2]:"bottom"===d$n&&(d$m=this._height-d$b*d$k-d$e[2]);}var d$o=this._style;if(d$l&&d$l.autoScaleSize)var d$p=d$l.fontSize/this.fontSize;if(this._clipPoint)if(d$c.save(),d$l&&d$l.autoScaleSize){var d$q=0,d$r=0;d$q=this._width?this._width-d$e[3]-d$e[1]:this._textWidth,d$r=this._height?this._height-d$e[0]-d$e[2]:this._textHeight,d$q*=d$p,d$r*=d$p,d$c.clipRect(d$e[3],d$e[0],d$q,d$r);}else d$c.clipRect(d$e[3],d$e[0],this._width?this._width-d$e[3]-d$e[1]:this._textWidth,this._height?this._height-d$e[0]-d$e[2]:this._textHeight);var d$s=d$o.password;"prompt"in this&&this.prompt==this._text&&(d$s=!1);for(var d$t=0,d$u=0,d$v=Math.min(this._lines.length,d$b+d$a)||1,d$w=d$a;d$w<d$v;d$w++){var d$x,d$y=d$j[d$w];if(d$s){var d$z=d$y.length;d$y="";for(var d$A=d$z;0<d$A;d$A--)d$y+="●";}if(d$t=d$f-(this._clipPoint?this._clipPoint.x:0),d$u=d$m+d$k*d$w-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(d$i,d$t,d$u,d$w),d$l){var d$B=this.width;d$l.autoScaleSize&&(d$B=this.width*d$p),d$l.drawText(d$y,this,d$t,d$u,this.align,d$B);}else d$J.isWebGL?(this._words||(this._words=[]),(d$x=this._words.length>d$w-d$a?this._words[d$w-d$a]:new d$h()).setText(d$y)):d$x=d$y,d$o.stroke?d$c.fillBorderText(d$x,d$t,d$u,d$d,this.color,d$o.strokeColor,d$o.stroke,d$i):d$c.fillText(d$x,d$t,d$u,d$d,this.color,d$i);}if(d$l&&d$l.autoScaleSize){var d$C=1/d$p;this.scale(d$C,d$C);}this._clipPoint&&d$c.restore(),this._startX=d$f,this._startY=d$m;},d$a.drawUnderline=function(d$a,d$b,d$c,d$d){var d$e=this._lineWidths[d$d];switch(d$a){case"center":d$b-=d$e/2;break;case"right":d$b-=d$e;}d$c+=this._charSize.height,this._graphics.drawLine(d$b,d$c,d$b+d$e,d$c,this.underlineColor||this.color,1);},d$a.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);d$O.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new d$A(0,0)):this._clipPoint=null;var d$a=this._lines.length;if(this.overflow!=d$p.VISIBLE){var d$b=this.overflow==d$p.HIDDEN?Math.floor:Math.ceil;d$a=Math.min(d$a,d$b((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)));}var d$c=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(d$c,d$a),this.repaint();},d$a.evalTextSize=function(){var d$a,d$b=NaN;d$a=Math.max.apply(this,this._lineWidths),d$b=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],d$a==this._textWidth&&d$b==this._textHeight||(this._textWidth=d$a,this._textHeight=d$b,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight));},d$a.checkEnabledViewportOrNot=function(){return this.overflow==d$p.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height);},d$a.changeText=function(d$a){this._text!==d$a&&(this.lang(d$a+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset());},d$a.parseLines=function(d$a){var d$b=this.wordWrap||this.overflow==d$p.HIDDEN;if(d$b)var d$c=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var d$d=d$$.contextMeasureText(d$p._testWord);d$J.isConchApp&&0===d$d.width&&0===d$d.height&&(d$d=d$$.contextMeasureText("W")),this._charSize.width=d$d.width,this._charSize.height=d$d.height||this.fontSize;}for(var d$e=d$a.replace(/\r\n/g,"\n").split("\n"),d$f=0,d$i=d$e.length;d$f<d$i;d$f++){var d$j=d$e[d$f];d$b?this.parseLine(d$j,d$c):(this._lineWidths.push(this.getTextWidth(d$j)),this._lines.push(d$j));}},d$a.parseLine=function(d$a,d$b){d$O.context;var d$c,d$d=this._lines,d$e=0,d$f=NaN,d$i=NaN,d$j=0;if((d$f=this.getTextWidth(d$a))<=d$b)return d$d.push(d$a),void this._lineWidths.push(d$f);d$f=this._charSize.width,0==(d$e=Math.floor(d$b/d$f))&&(d$e=1),d$i=d$f=this.getTextWidth(d$a.substring(0,d$e));for(var d$k=d$e,d$l=d$a.length;d$k<d$l;d$k++)if(d$b<(d$i+=d$f=this.getTextWidth(d$a.charAt(d$k))))if(this.wordWrap){var d$m=d$a.substring(d$j,d$k);if(d$m.charCodeAt(d$m.length-1)<255?(d$c=/(?:\w|-)+$/.exec(d$m))&&(d$k=d$c.index+d$j,0==d$c.index?d$k+=d$m.length:d$m=d$a.substring(d$j,d$k)):d$p.RightToLeft&&(d$c=/([\u0600-\u06FF])+$/.exec(d$m))&&(d$k=d$c.index+d$j,0==d$c.index?d$k+=d$m.length:d$m=d$a.substring(d$j,d$k)),d$d.push(d$m),this._lineWidths.push(d$i-d$f),!((d$j=d$k)+d$e<d$l)){d$d.push(d$a.substring(d$j,d$l)),this._lineWidths.push(this.getTextWidth(d$d[d$d.length-1])),d$j=-1;break;}d$k+=d$e,d$i=d$f=this.getTextWidth(d$a.substring(d$j,d$k)),d$k--;}else if(this.overflow==d$p.HIDDEN)return d$d.push(d$a.substring(0,d$k)),void this._lineWidths.push(this.getTextWidth(d$d[d$d.length-1]));this.wordWrap&&-1!=d$j&&(d$d.push(d$a.substring(d$j,d$l)),this._lineWidths.push(this.getTextWidth(d$d[d$d.length-1])));},d$a.getTextWidth=function(d$a){return this._currBitmapFont?this._currBitmapFont.getTextWidth(d$a):d$$.contextMeasureText(d$a).width;},d$a.getWordWrapWidth=function(){var d$a=this.padding,d$b=NaN;return(d$b=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(d$b=this.wordWrap?100:d$O.width),d$b<=0&&(d$b=100),d$b-d$a[3]-d$a[1];},d$a.getCharPoint=function(d$a,d$b){this._isChanged&&d$z.timer.runCallLater(this,this.typeset);for(var d$c=0,d$d=this._lines,d$e=0,d$f=0,d$i=d$d.length;d$f<d$i;d$f++){if(d$a<(d$c+=d$d[d$f].length)){var d$j=d$f;break;}d$e=d$c;}var d$k=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;d$O.context.font=d$k;var d$l=this.getTextWidth(this._text.substring(d$e,d$a));return(d$b||new d$A()).setTo(this._startX+d$l-(this._clipPoint?this._clipPoint.x:0),this._startY+d$j*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0));},d$q(0,d$a,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3];},function(d$a){d$a!=this._width&&(d$z.superSet(d$na,this,"width",d$a),this.isChanged=!0);}),d$q(0,d$a,"textWidth",function(){return this._isChanged&&d$z.timer.runCallLater(this,this.typeset),this._textWidth;}),d$q(0,d$a,"height",function(){return this._height?this._height:this.textHeight;},function(d$a){d$a!=this._height&&(d$z.superSet(d$na,this,"height",d$a),this.isChanged=!0);}),d$q(0,d$a,"textHeight",function(){return this._isChanged&&d$z.timer.runCallLater(this,this.typeset),this._textHeight;}),d$q(0,d$a,"padding",function(){return this._getCSSStyle().padding;},function(d$a){this._getCSSStyle().padding=d$a,this.isChanged=!0;}),d$q(0,d$a,"bold",function(){return this._getCSSStyle().bold;},function(d$a){this._getCSSStyle().bold=d$a,this.isChanged=!0;}),d$q(0,d$a,"text",function(){return this._text||"";},function(d$a){this._text!==d$a&&(this.lang(d$a+""),this.isChanged=!0,this.event("change"));}),d$q(0,d$a,"color",function(){return this._getCSSStyle().color;},function(d$a){this._getCSSStyle().color!=d$a&&(this._getCSSStyle().color=d$a,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0);}),d$q(0,d$a,"font",function(){return this._getCSSStyle().fontFamily;},function(d$a){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),d$p._bitmapFonts&&d$p._bitmapFonts[d$a]&&(this._currBitmapFont=d$p._bitmapFonts[d$a]),this._getCSSStyle().fontFamily=d$a,this.isChanged=!0;}),d$q(0,d$a,"fontSize",function(){return this._getCSSStyle().fontSize;},function(d$a){this._getCSSStyle().fontSize=d$a,this.isChanged=!0;}),d$q(0,d$a,"italic",function(){return this._getCSSStyle().italic;},function(d$a){this._getCSSStyle().italic=d$a,this.isChanged=!0;}),d$q(0,d$a,"align",function(){return this._getCSSStyle().align;},function(d$a){this._getCSSStyle().align=d$a,this.isChanged=!0;}),d$q(0,d$a,"valign",function(){return this._getCSSStyle().valign;},function(d$a){this._getCSSStyle().valign=d$a,this.isChanged=!0;}),d$q(0,d$a,"wordWrap",function(){return this._getCSSStyle().wordWrap;},function(d$a){this._getCSSStyle().wordWrap=d$a,this.isChanged=!0;}),d$q(0,d$a,"leading",function(){return this._getCSSStyle().leading;},function(d$a){this._getCSSStyle().leading=d$a,this.isChanged=!0;}),d$q(0,d$a,"bgColor",function(){return this._getCSSStyle().backgroundColor;},function(d$a){this._getCSSStyle().backgroundColor=d$a,this.isChanged=!0;}),d$q(0,d$a,"borderColor",function(){return this._getCSSStyle().borderColor;},function(d$a){this._getCSSStyle().borderColor=d$a,this.isChanged=!0;}),d$q(0,d$a,"stroke",function(){return this._getCSSStyle().stroke;},function(d$a){this._getCSSStyle().stroke=d$a,this.isChanged=!0;}),d$q(0,d$a,"strokeColor",function(){return this._getCSSStyle().strokeColor;},function(d$a){this._getCSSStyle().strokeColor=d$a,this.isChanged=!0;}),d$q(0,d$a,"isChanged",null,function(d$a){this._isChanged!==d$a&&(this._isChanged=d$a)&&d$z.timer.callLater(this,this.typeset);}),d$q(0,d$a,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0;},function(d$a){if(!(this.overflow!=d$p.SCROLL||this.textWidth<this._width)&&this._clipPoint){d$a=d$a<this.padding[3]?this.padding[3]:d$a;var d$b=this._textWidth-this._width;d$a=d$b<d$a?d$b:d$a;var d$c=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=d$a,this.renderText(this._lastVisibleLineIndex,d$c);}}),d$q(0,d$a,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0;},function(d$a){if(!(this.overflow!=d$p.SCROLL||this.textHeight<this._height)&&this._clipPoint){d$a=d$a<this.padding[0]?this.padding[0]:d$a;var d$b=this._textHeight-this._height,d$c=(d$a=d$b<d$a?d$b:d$a)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=d$c;var d$d=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=d$a,this.renderText(d$c,d$d);}}),d$q(0,d$a,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width;}),d$q(0,d$a,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height;}),d$q(0,d$a,"lines",function(){return this._isChanged&&this.typeset(),this._lines;}),d$q(0,d$a,"underlineColor",function(){return this._underlineColor;},function(d$a){this._underlineColor=d$a,this._isChanged=!0,this.typeset();}),d$p.registerBitmapFont=function(d$a,d$b){d$p._bitmapFonts||(d$p._bitmapFonts={}),d$p._bitmapFonts[d$a]=d$b;},d$p.unregisterBitmapFont=function(d$a,d$b){if(void 0===d$b&&(d$b=!0),d$p._bitmapFonts&&d$p._bitmapFonts[d$a]){var d$c=d$p._bitmapFonts[d$a];d$b&&d$c.destroy(),delete d$p._bitmapFonts[d$a];}},d$p.setTextRightToLeft=function(){var d$a;(d$a=d$O.canvas.source.style).display="none",d$a.position="absolute",d$a.direction="rtl",d$J._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,d$O.document.body.appendChild(d$O.canvas.source);},d$p.supportFont=function(d$a){d$O.context.font="10px sans-serif";var d$b=d$$.contextMeasureText("abcji").width;d$O.context.font="10px "+d$a;var d$c=d$$.contextMeasureText("abcji").width;return console.log(d$b,d$c),d$b!==d$c;},d$p._testWord="游",d$p.langPacks=null,d$p.VISIBLE="visible",d$p.SCROLL="scroll",d$p.HIDDEN="hidden",d$p.CharacterCache=!0,d$p.RightToLeft=!1,d$p._bitmapFonts=null,d$k(d$p,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"};}]),d$p;}(d$na),d$ta=function(d$n){function d$i(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",d$i.__super.call(this),this.offset=new d$A(),this._canvasTransform=new d$G(),this._previousOrientation=d$O.window.orientation;var d$b=this;this.transform=d$G.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var d$a=d$O.window,d$c=this;d$a.addEventListener("focus",function(){d$b._isFocused=!0,d$c.event("focus"),d$c.event("focuschange");}),d$a.addEventListener("blur",function(){d$b._isFocused=!1,d$c.event("blur"),d$c.event("focuschange"),d$c._isInputting()&&(d$xa.inputElement.target.focus=!1);});var d$d="visibilityState",d$e="visibilitychange",d$f=d$a.document;void 0!==d$f.hidden?(d$e="visibilitychange",d$d="visibilityState"):void 0!==d$f.mozHidden?(d$e="mozvisibilitychange",d$d="mozVisibilityState"):void 0!==d$f.msHidden?(d$e="msvisibilitychange",d$d="msVisibilityState"):void 0!==d$f.webkitHidden&&(d$e="webkitvisibilitychange",d$d="webkitVisibilityState"),d$a.document.addEventListener(d$e,function(){"hidden"==d$O.document[d$d]?d$c._setStageVisible(!1):d$c._setStageVisible(!0);}),d$a.document.addEventListener("qbrowserVisibilityChange",function(d$a){d$c._setStageVisible(!d$a.hidden);}),d$a.addEventListener("resize",function(){var d$a=d$O.window.orientation;null!=d$a&&d$a!=d$b._previousOrientation&&d$c._isInputting()&&(d$xa.inputElement.target.focus=!1),d$b._previousOrientation=d$a,d$c._isInputting()||d$c._resetCanvas();}),d$a.addEventListener("orientationchange",function(d$a){d$c._resetCanvas();}),this.on("mousemove",this,this._onmouseMove),d$O.onMobile&&this.on("mousedown",this,this._onmouseMove);}d$m(d$i,"laya.display.Stage",d$n);var d$a=d$i.prototype;return d$a._setStageVisible=function(d$a){this._isVisibility!=d$a&&(this._isVisibility=d$a,this._isVisibility||this._isInputting()&&(d$xa.inputElement.target.focus=!1),this.event("visibilitychange"));},d$a._isInputting=function(){return d$O.onMobile&&d$xa.isInputting;},d$a._changeCanvasSize=function(){this.setScreenSize(d$O.clientWidth*d$O.pixelRatio,d$O.clientHeight*d$O.pixelRatio);},d$a._resetCanvas=function(){if(this.screenAdaptationEnabled){var d$a=d$J._mainCanvas;d$a.source.style;d$a.size(1,1),d$z.timer.once(100,this,this._changeCanvasSize);}},d$a.setScreenSize=function(d$a,d$b){var d$c=!1;if("none"!==this._screenMode&&(d$c=(d$a/d$b<1?"vertical":"horizontal")!==this._screenMode)){var d$d=d$b;d$b=d$a,d$a=d$d;}this.canvasRotation=d$c;var d$e=d$J._mainCanvas,d$f=d$e.source.style,d$i=this._canvasTransform.identity(),d$j=this._scaleMode,d$k=d$a/this.designWidth,d$l=d$b/this.designHeight,d$m=this.designWidth,d$n=this.designHeight,d$o=d$a,d$p=d$b,d$q=d$O.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,d$j){case"noscale":d$k=d$l=1,d$o=this.designWidth,d$p=this.designHeight;break;case"showall":d$k=d$l=Math.min(d$k,d$l),d$m=d$o=Math.round(this.designWidth*d$k),d$n=d$p=Math.round(this.designHeight*d$l);break;case"noborder":d$k=d$l=Math.max(d$k,d$l),d$o=Math.round(this.designWidth*d$k),d$p=Math.round(this.designHeight*d$l);break;case"full":d$k=d$l=1,this._width=d$m=d$a,this._height=d$n=d$b;break;case"fixedwidth":d$l=d$k,this._height=d$n=Math.round(d$b/d$k);break;case"fixedheight":d$k=d$l,this._width=d$m=Math.round(d$a/d$l);break;case"fixedauto":d$a/d$b<this.designWidth/this.designHeight?(d$l=d$k,this._height=d$n=Math.round(d$b/d$k)):(d$k=d$l,this._width=d$m=Math.round(d$a/d$l));}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,d$m=d$m+1&2147483646,d$n=d$n+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),d$k*=this.scaleX,d$l*=this.scaleY,1===d$k&&1===d$l?this.transform.identity():(this.transform.a=this._formatData(d$k/(d$o/d$m)),this.transform.d=this._formatData(d$l/(d$p/d$n)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),d$e.size(d$m,d$n),d$F.changeWebGLSize(d$m,d$n),d$i.scale(d$o/d$m/d$q,d$p/d$n/d$q),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(d$a-d$o)/d$q:this.offset.x=.5*(d$a-d$o)/d$q,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(d$b-d$p)/d$q:this.offset.y=.5*(d$b-d$p)/d$q,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),d$i.translate(this.offset.x,this.offset.y),this.canvasDegree=0,d$c&&("horizontal"===this._screenMode?(d$i.rotate(Math.PI/2),d$i.translate(d$b/d$q,0),this.canvasDegree=90):(d$i.rotate(-Math.PI/2),d$i.translate(0,d$a/d$q),this.canvasDegree=-90)),d$i.a=this._formatData(d$i.a),d$i.d=this._formatData(d$i.d),d$i.tx=this._formatData(d$i.tx),d$i.ty=this._formatData(d$i.ty),d$f.transformOrigin=d$f.webkitTransformOrigin=d$f.msTransformOrigin=d$f.mozTransformOrigin=d$f.oTransformOrigin="0px 0px 0px",d$f.transform=d$f.webkitTransform=d$f.msTransform=d$f.mozTransform=d$f.oTransform="matrix("+d$i.toString()+")",d$i.translate(parseInt(d$f.left)||0,parseInt(d$f.top)||0),this.visible=!0,this._repaint=1,this.event("resize");},d$a._formatData=function(d$a){return Math.abs(d$a)<1e-6?0:Math.abs(1-d$a)<.001?0<d$a?1:-1:d$a;},d$a.getMousePoint=function(){return d$A.TEMP.setTo(this.mouseX,this.mouseY);},d$a.repaint=function(){this._repaint=1;},d$a.parentRepaint=function(){},d$a._loop=function(){return this.render(d$J.context,0,0),!0;},d$a._onmouseMove=function(d$a){this._mouseMoveTime=d$O.now();},d$a.getTimeFromFrameStart=function(){return d$O.now()-this._frameStartTime;},d$a.render=function(d$a,d$b,d$c){if("sleep"===this._frameRate&&!d$J.isConchApp){var d$d=d$O.now();if(!(1e3<=d$d-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(d$X.loopCount++,d$r.instance.runEvent(),d$z.timer._update()));this._frameStartTime=d$d;}if(this._renderCount++,d$J.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=d$O.now();var d$e="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),d$f=this._renderCount%2==0;if(d$X.renderSlow=!d$e,d$e||d$f||d$J.isConchApp){var d$i;d$X.loopCount++,d$r.instance.runEvent(),d$z.timer._update(),d$F.update3DLoop();var d$j=0,d$k=0;if(d$J.isConchNode)for(d$j=0,d$k=this._scenes.length;d$j<d$k;d$j++)(d$i=this._scenes[d$j])&&d$i._updateSceneConch();else for(d$j=0,d$k=this._scenes.length;d$j<d$k;d$j++)(d$i=this._scenes[d$j])&&d$i._updateScene();if(d$J.isConchNode){var d$l=d$na.CustomList;for(d$j=0,d$k=d$l.length;d$j<d$k;d$j++){var d$m=d$l[d$j];d$m.customRender(d$m.customContext,0,0);}return;}}d$J.isConchNode||this.renderingEnabled&&(d$e||!d$f||d$J.isConchWebGL)&&(d$J.isWebGL?d$J.WebGL.mainContext&&!d$J.WebGL.mainContext.isContextLost()&&(d$a.clear(),d$n.prototype.render.call(this,d$a,d$b,d$c),d$X._show&&d$X._sp&&d$X._sp.render(d$a,d$b,d$c),d$F.clear(this._bgColor),d$F.beginFlush(),d$a.flush(),d$F.endFinish(),d$_.instance&&d$_.getInstance().endDispose()):(d$F.clear(this._bgColor),d$n.prototype.render.call(this,d$a,d$b,d$c),d$X._show&&d$X._sp&&d$X._sp.render(d$a,d$b,d$c)));}else this._renderCount%5==0&&(d$X.loopCount++,d$r.instance.runEvent(),d$z.timer._update());},d$a._requestFullscreen=function(){var d$a=d$O.document.documentElement;d$a.requestFullscreen?d$a.requestFullscreen():d$a.mozRequestFullScreen?d$a.mozRequestFullScreen():d$a.webkitRequestFullscreen?d$a.webkitRequestFullscreen():d$a.msRequestFullscreen&&d$a.msRequestFullscreen();},d$a._fullScreenChanged=function(){d$z.stage.event("fullscreenchange");},d$a.exitFullscreen=function(){var d$a=d$O.document;d$a.exitFullscreen?d$a.exitFullscreen():d$a.mozCancelFullScreen?d$a.mozCancelFullScreen():d$a.webkitExitFullscreen&&d$a.webkitExitFullscreen();},d$q(0,d$a,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1;}),d$q(0,d$a,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight;}),d$q(0,d$a,"frameRate",function(){return this._frameRate;},function(d$a){if(this._frameRate=d$a,d$J.isConchApp)switch(this._frameRate){case"slow":d$O.window.conch&&d$O.window.conchConfig.setSlowFrame&&d$O.window.conchConfig.setSlowFrame(!0);break;case"fast":d$O.window.conch&&d$O.window.conchConfig.setSlowFrame&&d$O.window.conchConfig.setSlowFrame(!1);break;case"mouse":d$O.window.conch&&d$O.window.conchConfig.setMouseFrame&&d$O.window.conchConfig.setMouseFrame(2e3);break;case"sleep":d$O.window.conch&&d$O.window.conchConfig.setLimitFPS&&d$O.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.");}}),d$q(0,d$a,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1;}),d$q(0,d$a,"width",d$n.prototype._$get_width,function(d$a){this.designWidth=d$a,d$z.superSet(d$na,this,"width",d$a),d$z.timer.callLater(this,this._changeCanvasSize);}),d$q(0,d$a,"alignH",function(){return this._alignH;},function(d$a){this._alignH=d$a,d$z.timer.callLater(this,this._changeCanvasSize);}),d$q(0,d$a,"isFocused",function(){return this._isFocused;}),d$q(0,d$a,"height",d$n.prototype._$get_height,function(d$a){this.designHeight=d$a,d$z.superSet(d$na,this,"height",d$a),d$z.timer.callLater(this,this._changeCanvasSize);}),d$q(0,d$a,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||d$G.create();},d$n.prototype._$set_transform),d$q(0,d$a,"isVisibility",function(){return this._isVisibility;}),d$q(0,d$a,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth;}),d$q(0,d$a,"scaleMode",function(){return this._scaleMode;},function(d$a){this._scaleMode=d$a,d$z.timer.callLater(this,this._changeCanvasSize);}),d$q(0,d$a,"alignV",function(){return this._alignV;},function(d$a){this._alignV=d$a,d$z.timer.callLater(this,this._changeCanvasSize);}),d$q(0,d$a,"bgColor",function(){return this._bgColor;},function(d$a){this._bgColor=d$a,this.conchModel&&this.conchModel.bgColor(d$a),d$J.isWebGL&&(d$a?d$i._wgColor=d$S.create(d$a)._color:d$O.onMiniGame||(d$i._wgColor=null)),d$O.onLimixiu?d$i._wgColor=d$S.create(d$a)._color:d$J.canvas.style.background=d$a||"none";}),d$q(0,d$a,"mouseX",function(){return Math.round(d$r.instance.mouseX/this.clientScaleX);}),d$q(0,d$a,"mouseY",function(){return Math.round(d$r.instance.mouseY/this.clientScaleY);}),d$q(0,d$a,"screenMode",function(){return this._screenMode;},function(d$a){this._screenMode=d$a;}),d$q(0,d$a,"visible",d$n.prototype._$get_visible,function(d$a){this.visible!==d$a&&(d$z.superSet(d$na,this,"visible",d$a),d$J._mainCanvas.source.style.visibility=d$a?"visible":"hidden");}),d$q(0,d$a,"fullScreenEnabled",null,function(d$a){var d$b=d$O.document,d$c=d$J.canvas;d$a?(d$c.addEventListener("mousedown",this._requestFullscreen),d$c.addEventListener("touchstart",this._requestFullscreen),d$b.addEventListener("fullscreenchange",this._fullScreenChanged),d$b.addEventListener("mozfullscreenchange",this._fullScreenChanged),d$b.addEventListener("webkitfullscreenchange",this._fullScreenChanged),d$b.addEventListener("msfullscreenchange",this._fullScreenChanged)):(d$c.removeEventListener("mousedown",this._requestFullscreen),d$c.removeEventListener("touchstart",this._requestFullscreen),d$b.removeEventListener("fullscreenchange",this._fullScreenChanged),d$b.removeEventListener("mozfullscreenchange",this._fullScreenChanged),d$b.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),d$b.removeEventListener("msfullscreenchange",this._fullScreenChanged));}),d$i.SCALE_NOSCALE="noscale",d$i.SCALE_EXACTFIT="exactfit",d$i.SCALE_SHOWALL="showall",d$i.SCALE_NOBORDER="noborder",d$i.SCALE_FULL="full",d$i.SCALE_FIXED_WIDTH="fixedwidth",d$i.SCALE_FIXED_HEIGHT="fixedheight",d$i.SCALE_FIXED_AUTO="fixedauto",d$i.ALIGN_LEFT="left",d$i.ALIGN_RIGHT="right",d$i.ALIGN_CENTER="center",d$i.ALIGN_TOP="top",d$i.ALIGN_MIDDLE="middle",d$i.ALIGN_BOTTOM="bottom",d$i.SCREEN_NONE="none",d$i.SCREEN_HORIZONTAL="horizontal",d$i.SCREEN_VERTICAL="vertical",d$i.FRAME_FAST="fast",d$i.FRAME_SLOW="slow",d$i.FRAME_MOUSE="mouse",d$i.FRAME_SLEEP="sleep",d$i.FRAME_MOUSE_THREDHOLD=2e3,d$k(d$i,["_wgColor",function(){return this._wgColor=[0,0,0,1];}]),d$i;}(d$na),d$ua=(function(d$a){function d$b(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,d$b.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange);}d$m(d$b,"laya.media.SoundNode",d$na);var d$c=d$b.prototype;d$c._onParentChange=function(){this.target=this.parent;},d$c.play=function(d$a,d$b){void 0===d$a&&(d$a=1),isNaN(d$a)&&(d$a=1),this.url&&(this.stop(),this._channel=d$E.playSound(this.url,d$a,null,d$b));},d$c.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null;},d$c._setPlayAction=function(d$a,d$b,d$c,d$d){void 0===d$d&&(d$d=!0),this[d$c]&&d$a&&(d$d?d$a.on(d$b,this,this[d$c]):d$a.off(d$b,this,this[d$c]));},d$c._setPlayActions=function(d$a,d$b,d$c,d$d){if(void 0===d$d&&(d$d=!0),d$a&&d$b){var d$e,d$f=d$b.split(","),d$i=0;for(d$e=d$f.length,d$i=0;d$i<d$e;d$i++)this._setPlayAction(d$a,d$f[d$i],d$c,d$d);}},d$q(0,d$c,"playEvent",null,function(d$a){(this._playEvents=d$a)&&this._tar&&this._setPlayActions(this._tar,d$a,"play");}),d$q(0,d$c,"target",null,function(d$a){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=d$a,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0));}),d$q(0,d$c,"stopEvent",null,function(d$a){(this._stopEvents=d$a)&&this._tar&&this._setPlayActions(this._tar,d$a,"stop");});}(),function(d$a){function d$b(){this._src=null,this._onload=null,this._onerror=null,d$b.__super.call(this);}d$m(d$b,"laya.resource.FileBitmap",d$qa);var d$c=d$b.prototype;return d$q(0,d$c,"src",function(){return this._src;},function(d$a){this._src=d$a;}),d$q(0,d$c,"onload",null,function(d$a){}),d$q(0,d$c,"onerror",null,function(d$a){}),d$b;}()),d$va=function(d$a){function d$c(d$a,d$b){this._is2D=!1,d$c.__super.call(this);var d$d=this;if(this._source=this,"2D"===d$a||"AUTO"===d$a&&!d$J.isWebGL){this._is2D=!0,this._source=d$b||d$O.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var d$e=this;d$e.getContext=function(d$a,d$b){if(d$d._ctx)return d$d._ctx;var d$c=d$d._ctx=d$d._source.getContext(d$a,d$b);return d$c&&(d$c._canvas=d$e,d$J.isFlash||d$O.onLimixiu||(d$c.size=function(d$a,d$b){})),d$c;};}this.uri="HTMLCanvas_"+this.id,this.lock=!0;}d$m(d$c,"laya.resource.HTMLCanvas",d$qa);var d$b=d$c.prototype;return d$b.clear=function(){this._ctx&&this._ctx.clear();},d$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this);},d$b.release=function(){},d$b._setContext=function(d$a){this._ctx=d$a;},d$b.getContext=function(d$a,d$b){return this._ctx?this._ctx:this._ctx=d$c._createContext(this);},d$b.getMemSize=function(){return 0;},d$b.size=function(d$a,d$b){(this._w!=d$a||this._h!=d$b||this._source&&(this._source.width!=d$a||this._source.height!=d$b))&&(this._w=d$a,this._h=d$b,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(d$a,d$b),this._source&&(this._source.height=d$b,this._source.width=d$a));},d$b.getCanvas=function(){return this._source;},d$b.toBase64=function(d$a,d$b,d$c){if(this._source)if(d$J.isConchApp&&this._source.toBase64)this._source.toBase64(d$a,d$b,d$c);else{var d$d=this._source.toDataURL(d$a,d$b);d$c.call(this,d$d);}},d$q(0,d$b,"context",function(){return this._ctx;}),d$q(0,d$b,"asBitmap",null,function(d$a){}),d$c.create=function(d$a,d$b){return new d$c(d$a,d$b);},d$c.TYPE2D="2D",d$c.TYPE3D="3D",d$c.TYPEAUTO="AUTO",d$c._createContext=null,d$c;}(),d$wa=(function(d$a){function d$k(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){throw d$k.__super.call(this),new Error("不允许new！");}d$m(d$k,"laya.resource.HTMLSubImage",d$qa),d$k.create=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){return void 0===d$j&&(d$j=!1),new d$k(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j);};}(),function(d$a){function d$n(){this._frames=null,this._url=null,d$n.__super.call(this),this._setControlNode(this);}d$m(d$n,"laya.display.Animation",d$a);var d$b=d$n.prototype;d$b.destroy=function(d$a){void 0===d$a&&(d$a=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,d$a),this._frames=null,this._labels=null;},d$b.play=function(d$a,d$b,d$c,d$d){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=!0),void 0===d$c&&(d$c=""),void 0===d$d&&(d$d=!0),d$c&&this._setFramesFromCache(d$c,d$d),this._isPlaying=!0,this.index="string"==typeof d$a?this._getFrameByLabel(d$a):d$a,this.loop=d$b,this._actionName=d$c,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0);},d$b._setFramesFromCache=function(d$a,d$b){var d$c;return void 0===d$b&&(d$b=!1),this._url&&(d$a=this._url+"#"+d$a),d$a&&d$n.framesMap[d$a]?((d$c=d$n.framesMap[d$a])instanceof Array?(this._frames=d$n.framesMap[d$a],this._count=this._frames.length):(d$c.nodeRoot&&(d$n.framesMap[d$a]=this._parseGraphicAnimationByData(d$c),d$c=d$n.framesMap[d$a]),this._frames=d$c.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=d$c.interval),this._labels=this._copyLabels(d$c.labels)),!0):(d$b&&console.log("ani not found:",d$a),!1);},d$b._copyLabels=function(d$a){if(!d$a)return null;var d$b,d$c;for(d$c in d$b={},d$a)d$b[d$c]=d$$.copyArray([],d$a[d$c]);return d$b;},d$b._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&d$a.prototype._frameLoop.call(this);},d$b._displayToIndex=function(d$a){this._frames&&(this.graphics=this._frames[d$a]);},d$b.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null;},d$b.loadImages=function(d$a,d$b){return void 0===d$b&&(d$b=""),this._url="",this._setFramesFromCache(d$b)||(this.frames=d$n.framesMap[d$b]?d$n.framesMap[d$b]:d$n.createFrames(d$a,d$b)),this;},d$b.loadAtlas=function(d$b,d$c,d$d){void 0===d$d&&(d$d=""),this._url="";var d$e=this;function d$a(d$a){d$b===d$a&&(d$e.frames=d$n.framesMap[d$d]?d$n.framesMap[d$d]:d$n.createFrames(d$b,d$d),d$c&&d$c.run());}return d$e._setFramesFromCache(d$d)||(d$ja.getAtlas(d$b)?d$a(d$b):d$z.loader.load(d$b,d$u.create(null,d$a,[d$b]),null,"atlas")),this;},d$b.loadAnimation=function(d$a,d$b,d$c){this._url=d$a;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,d$b&&d$b.run()):!d$c||d$ja.getAtlas(d$c)?this._loadAnimationData(d$a,d$b,d$c):d$z.loader.load(d$c,d$u.create(this,this._loadAnimationData,[d$a,d$b,d$c]),null,"atlas"),this;},d$b._loadAnimationData=function(d$j,d$k,d$a){var d$l=this;if(!d$a||d$ja.getAtlas(d$a)){var d$m=this;d$ja.getRes(d$j)?d$b(d$j):d$z.loader.load(d$j,d$u.create(null,d$b,[d$j]),null,"json"),d$ja.clearRes(d$j);}else console.warn("atlas load fail:"+d$a);function d$b(d$a){if(d$ja.getRes(d$a)&&d$j===d$a){var d$b;if(d$n.framesMap[d$j+"#"])d$m._setFramesFromCache(d$l._actionName,!0),d$l.index=0,d$l._checkResumePlaying();else{var d$c=d$m._parseGraphicAnimation(d$ja.getRes(d$j));if(!d$c)return;var d$d,d$e=d$c.animationList,d$f=0,d$i=d$e.length;for(d$f=0;d$f<d$i;d$f++)d$b=d$e[d$f],d$n.framesMap[d$j+"#"+d$b.name]=d$b,d$d||(d$d=d$b);d$d&&(d$n.framesMap[d$j+"#"]=d$d,d$m._setFramesFromCache(d$l._actionName,!0),d$l.index=0),d$l._checkResumePlaying();}d$k&&d$k.run();}}},d$b._parseGraphicAnimation=function(d$a){return d$za.parseAnimationData(d$a);},d$b._parseGraphicAnimationByData=function(d$a){return d$za.parseAnimationByData(d$a);},d$q(0,d$b,"frames",function(){return this._frames;},function(d$a){(this._frames=d$a)&&(this._count=d$a.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index);}),d$q(0,d$b,"autoPlay",null,function(d$a){d$a?this.play():this.stop();}),d$q(0,d$b,"source",null,function(d$a){-1<d$a.indexOf(".ani")?this.loadAnimation(d$a):-1<d$a.indexOf(".json")||-1<d$a.indexOf("als")||-1<d$a.indexOf("atlas")?this.loadAtlas(d$a):this.loadImages(d$a.split(","));}),d$q(0,d$b,"autoAnimation",null,function(d$a){this.play(0,!0,d$a,!1);}),d$n.createFrames=function(d$a,d$b){var d$c,d$d,d$e=0,d$f=0;if("string"==typeof d$a){var d$i=d$ja.getAtlas(d$a);if(d$i&&d$i.length)for(d$c=[],d$e=0,d$f=d$i.length;d$e<d$f;d$e++)(d$d=new d$F.createGraphics()).drawTexture(d$ja.getRes(d$i[d$e]),0,0),d$c.push(d$d);}else if(d$a instanceof Array)for(d$c=[],d$e=0,d$f=d$a.length;d$e<d$f;d$e++)(d$d=new d$F.createGraphics()).loadImage(d$a[d$e],0,0),d$c.push(d$d);return d$b&&(d$n.framesMap[d$b]=d$c),d$c;},d$n.clearCache=function(d$a){var d$b,d$c=d$n.framesMap,d$d=d$a+"#";for(d$b in d$c)d$b!==d$a&&0!=d$b.indexOf(d$d)||delete d$n.framesMap[d$b];},d$n.framesMap={};}(d$ra),function(d$a){function d$f(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,d$f.__super.call(this),null==d$f._sortIndexFun&&(d$f._sortIndexFun=d$y.sortByKey("index",!1,!0));}d$m(d$f,"laya.display.FrameAnimation",d$a);var d$b=d$f.prototype;return d$b._setUp=function(d$a,d$b){this._labels=null,this._animationNewFrames=null,this._targetDic=d$a,this._animationData=d$b,this.interval=1e3/d$b.frameRate,d$b.parsed?(this._count=d$b.count,this._labels=d$b.labels,this._animationNewFrames=d$b.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),d$b.parsed=!0,d$b.labels=this._labels,d$b.count=this._count,d$b.animationNewFrames=this._animationNewFrames;},d$b.clear=function(){d$a.prototype.clear.call(this),this._targetDic=null,this._animationData=null;},d$b._displayToIndex=function(d$a){if(this._animationData){d$a<0&&(d$a=0),d$a>this._count&&(d$a=this._count);var d$b=this._animationData.nodes,d$c=0,d$d=d$b.length;for(d$c=0;d$c<d$d;d$c++)this._displayNodeToFrame(d$b[d$c],d$a);}},d$b._displayNodeToFrame=function(d$a,d$b,d$c){d$c||(d$c=this._targetDic);var d$d=d$c[d$a.target];if(d$d){var d$e,d$f,d$i,d$j=d$a.frames,d$k=d$a.keys,d$l=0,d$m=d$k.length;for(d$l=0;d$l<d$m;d$l++)d$i=(d$f=d$j[d$e=d$k[d$l]]).length>d$b?d$f[d$b]:d$f[d$f.length-1],d$d[d$e]=d$i;}},d$b._calculateDatas=function(){if(this._animationData){var d$a,d$b=this._animationData.nodes,d$c=0,d$d=d$b.length;for(d$c=this._count=0;d$c<d$d;d$c++)d$a=d$b[d$c],this._calculateNodeKeyFrames(d$a);this._count+=1;}},d$b._calculateNodeKeyFrames=function(d$a){var d$b,d$c,d$d=d$a.keyframes,d$e=d$a.target;for(d$b in d$a.frames||(d$a.frames={}),d$a.keys?d$a.keys.length=0:d$a.keys=[],d$a.initValues||(d$a.initValues={}),d$d)d$c=d$d[d$b],d$a.frames[d$b]||(d$a.frames[d$b]=[]),this._targetDic&&this._targetDic[d$e]&&(d$a.initValues[d$b]=this._targetDic[d$e][d$b]),d$c.sort(d$f._sortIndexFun),d$a.keys.push(d$b),this._calculateNodePropFrames(d$c,d$a.frames[d$b],d$b,d$e);},d$b.resetToInitState=function(){if(this._targetDic&&this._animationData){var d$a,d$b,d$c=this._animationData.nodes,d$d=0,d$e=d$c.length;for(d$d=0;d$d<d$e;d$d++)if(d$b=(d$a=d$c[d$d]).initValues){var d$f,d$i=this._targetDic[d$a.target];if(d$i)for(d$f in d$b)d$i[d$f]=d$b[d$f];}}},d$b._calculateNodePropFrames=function(d$a,d$b,d$c,d$d){var d$e=0,d$f=d$a.length-1;if(0<d$f){for(d$b.length=d$a[d$f].index+1,d$e=0;d$e<d$f;d$e++)this._dealKeyFrame(d$a[d$e]),this._calculateFrameValues(d$a[d$e],d$a[d$e+1],d$b);this._dealKeyFrame(d$a[d$e]);}0==d$f&&(d$b[d$a[0].index]=d$a[0].value,this._animationNewFrames&&(this._animationNewFrames[d$a[0].index]=!0));},d$b._dealKeyFrame=function(d$a){d$a.label&&""!=d$a.label&&this.addLabel(d$a.label,d$a.index);},d$b._calculateFrameValues=function(d$a,d$b,d$c){var d$d,d$e=0,d$f=d$a.index,d$i=d$b.index,d$j=d$a.value,d$k=d$b.value-d$a.value,d$l=d$i-d$f;if(d$i>this._count&&(this._count=d$i),d$a.tween)for(null==(d$d=d$U[d$a.tweenMethod])&&(d$d=d$U.linearNone),d$e=d$f;d$e<d$i;d$e++)d$c[d$e]=d$d(d$e-d$f,d$j,d$k,d$l),this._animationNewFrames&&(this._animationNewFrames[d$e]=!0);else for(d$e=d$f;d$e<d$i;d$e++)d$c[d$e]=d$j;this._animationNewFrames&&(this._animationNewFrames[d$a.index]=!0,this._animationNewFrames[d$b.index]=!0),d$c[d$b.index]=d$b.value;},d$f._sortIndexFun=null,d$f;}(d$ra)),d$xa=function(d$b){function d$e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",d$e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=d$sa.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay);}d$m(d$e,"laya.display.Input",d$b);var d$a=d$e.prototype;return d$a.setSelection=function(d$a,d$b){this.focus=!0,laya.display.Input.inputElement.selectionStart=d$a,laya.display.Input.inputElement.selectionEnd=d$b;},d$a._onUnDisplay=function(d$a){this.focus=!1;},d$a._onMouseDown=function(d$a){this.focus=!0;},d$a._syncInputTransform=function(){var d$a=this.nativeInput,d$b=d$$.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),d$c=this._width-this.padding[1]-this.padding[3],d$d=this._height-this.padding[0]-this.padding[2];d$J.isConchApp?(d$a.setScale(d$b.scaleX,d$b.scaleY),d$a.setSize(d$c,d$d),d$a.setPos(d$b.x,d$b.y)):(d$e.inputContainer.style.transform=d$e.inputContainer.style.webkitTransform="scale("+d$b.scaleX+","+d$b.scaleY+") rotate("+d$z.stage.canvasDegree+"deg)",d$a.style.width=d$c+"px",d$a.style.height=d$d+"px",d$e.inputContainer.style.left=d$b.x+"px",d$e.inputContainer.style.top=d$b.y+"px");},d$a.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select();},d$a._setInputMethod=function(){d$e.input.parentElement&&d$e.inputContainer.removeChild(d$e.input),d$e.area.parentElement&&d$e.inputContainer.removeChild(d$e.area),d$e.inputElement=this._multiline?d$e.area:d$e.input,d$e.inputContainer.appendChild(d$e.inputElement),d$sa.RightToLeft&&(d$e.inputElement.style.direction="rtl");},d$a._focusIn=function(){laya.display.Input.isInputting=!0;var d$a=this.nativeInput;this._focus=!0;var d$b=d$a.style;d$b.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),d$a.readOnly=!this._editable,d$J.isConchApp&&(d$a.setType(this._type),d$a.setForbidEdit(!this._editable)),d$a.maxLength=this._maxChars;this.padding;if(d$a.type=this._type,d$a.value=this._content,d$a.placeholder=this._prompt,d$z.stage.off("keydown",this,this._onKeyDown),d$z.stage.on("keydown",this,this._onKeyDown),(d$z.stage.focus=this).event("focus"),d$O.onPC&&d$a.focus(),!d$O.onMiniGame){this._text;this._text=null;}this.typeset(),d$a.setColor(this._originColor),d$a.setFontSize(this.fontSize),d$a.setFontFace(d$O.onIPhone&&d$sa._fontFamilyMap[this.font]||this.font),d$J.isConchApp&&d$a.setMultiAble&&d$a.setMultiAble(this._multiline),d$b.lineHeight=this.leading+this.fontSize+"px",d$b.fontStyle=this.italic?"italic":"normal",d$b.fontWeight=this.bold?"bold":"normal",d$b.textAlign=this.align,d$b.padding="0 0",this._syncInputTransform(),!d$J.isConchApp&&d$O.onPC&&d$z.timer.frameLoop(1,this,this._syncInputTransform);},d$a._setPromptColor=function(){(d$e.promptStyleDOM=d$O.getElementById("promptStyle"))||((d$e.promptStyleDOM=d$O.createElement("style")).setAttribute("id","promptStyle"),d$O.document.head.appendChild(d$e.promptStyleDOM)),d$e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}";},d$a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(d$z.superSet(d$sa,this,"text",this._content),d$z.superSet(d$sa,this,"color",this._originColor)):(d$z.superSet(d$sa,this,"text",this._prompt),d$z.superSet(d$sa,this,"color",this._promptColor)),d$z.stage.off("keydown",this,this._onKeyDown),d$z.stage.focus=null,this.event("blur"),d$J.isConchApp&&this.nativeInput.blur(),d$O.onPC&&d$z.timer.clear(this,this._syncInputTransform);},d$a._onKeyDown=function(d$a){13===d$a.keyCode&&(d$O.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"));},d$a.changeText=function(d$a){this._content=d$a,this._focus?(this.nativeInput.value=d$a||"",this.event("change")):d$b.prototype.changeText.call(this,d$a);},d$q(0,d$a,"color",d$b.prototype._$get_color,function(d$a){this._focus&&this.nativeInput.setColor(d$a),d$z.superSet(d$sa,this,"color",this._content?d$a:this._promptColor),this._originColor=d$a;}),d$q(0,d$a,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0;},function(d$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。");}),d$q(0,d$a,"multiline",function(){return this._multiline;},function(d$a){this._multiline=d$a,this.valign=d$a?"top":"middle";}),d$q(0,d$a,"maxChars",function(){return this._maxChars;},function(d$a){d$a<=0&&(d$a=1e5),this._maxChars=d$a;}),d$q(0,d$a,"text",function(){return this._focus?this.nativeInput.value:this._content||"";},function(d$a){d$z.superSet(d$sa,this,"color",this._originColor),d$a+="",this._focus?(this.nativeInput.value=d$a||"",this.event("change")):(this._multiline||(d$a=d$a.replace(/\r?\n/g,"")),(this._content=d$a)?d$z.superSet(d$sa,this,"text",d$a):(d$z.superSet(d$sa,this,"text",this._prompt),d$z.superSet(d$sa,this,"color",this.promptColor)));}),d$q(0,d$a,"nativeInput",function(){return this._multiline?d$e.area:d$e.input;}),d$q(0,d$a,"prompt",function(){return this._prompt;},function(d$a){!this._text&&d$a&&d$z.superSet(d$sa,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?d$z.superSet(d$sa,this,"text",this._text==this._prompt?d$a:this._text):d$z.superSet(d$sa,this,"text",d$a),this._prompt=d$sa.langPacks&&d$sa.langPacks[d$a]?d$sa.langPacks[d$a]:d$a;}),d$q(0,d$a,"focus",function(){return this._focus;},function(d$a){var d$b=this.nativeInput;this._focus!==d$a&&(d$a?(d$b.target?d$b.target._focusOut():this._setInputMethod(),(d$b.target=this)._focusIn()):(d$b.target=null,this._focusOut(),d$O.document.body.scrollTop=0,d$b.blur(),d$J.isConchApp?d$b.setPos(-1e4,-1e4):d$e.inputContainer.contains(d$b)&&d$e.inputContainer.removeChild(d$b)));}),d$q(0,d$a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:"";},function(d$a){d$a?(-1<(d$a="[^"+d$a+"]").indexOf("^^")&&(d$a=d$a.replace("^^","")),this._restrictPattern=new RegExp(d$a,"g")):this._restrictPattern=null;}),d$q(0,d$a,"editable",function(){return this._editable;},function(d$a){this._editable=d$a,d$J.isConchApp&&d$e.input.setForbidEdit(!d$a);}),d$q(0,d$a,"promptColor",function(){return this._promptColor;},function(d$a){this._promptColor=d$a,this._content||d$z.superSet(d$sa,this,"color",d$a);}),d$q(0,d$a,"type",function(){return this._type;},function(d$a){this._getCSSStyle().password="password"==d$a,this._type=d$a,d$J.isConchApp&&this.nativeInput.setType(d$a);}),d$q(0,d$a,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0;},function(d$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。");}),d$q(0,d$a,"asPassword",function(){return this._getCSSStyle().password;},function(d$a){this._getCSSStyle().password=d$a,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0;}),d$e.__init__=function(){d$e._createInputElement(),d$O.onMobile&&d$J.canvas.addEventListener(d$e.IOS_IFRAME?d$O.onMiniGame?"touchend":"click":"touchend",d$e._popupInputMethod);},d$e._popupInputMethod=function(d$a){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus();},d$e._createInputElement=function(){d$e._initInput(d$e.area=d$O.createElement("textarea")),d$e._initInput(d$e.input=d$O.createElement("input")),(d$e.inputContainer=d$O.createElement("div")).style.position="absolute",d$e.inputContainer.style.zIndex=1e5,d$O.container.appendChild(d$e.inputContainer),d$e.inputContainer.setPos=function(d$a,d$b){d$e.inputContainer.style.left=d$a+"px",d$e.inputContainer.style.top=d$b+"px";};},d$e._initInput=function(d$b){var d$a=d$b.style;d$a.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",d$a.resize="none",d$a.backgroundColor="transparent",d$a.border="none",d$a.outline="none",d$a.zIndex=1,d$b.addEventListener("input",d$e._processInputting),d$b.addEventListener("mousemove",d$e._stopEvent),d$b.addEventListener("mousedown",d$e._stopEvent),d$b.addEventListener("touchmove",d$e._stopEvent),d$b.setFontFace=function(d$a){d$b.style.fontFamily=d$a;},d$J.isConchApp||(d$b.setColor=function(d$a){d$b.style.color=d$a;},d$b.setFontSize=function(d$a){d$b.style.fontSize=d$a+"px";});},d$e._processInputting=function(d$a){var d$b=laya.display.Input.inputElement.target;if(d$b){var d$c=laya.display.Input.inputElement.value;d$b._restrictPattern&&(d$c=d$c.replace(/\u2006|\x27/g,""),d$b._restrictPattern.test(d$c)&&(d$c=d$c.replace(d$b._restrictPattern,""),laya.display.Input.inputElement.value=d$c)),d$b._text=d$c,d$b.event("input");}},d$e._stopEvent=function(d$a){"touchmove"==d$a.type&&d$a.preventDefault(),d$a.stopPropagation&&d$a.stopPropagation();},d$e.TYPE_TEXT="text",d$e.TYPE_PASSWORD="password",d$e.TYPE_EMAIL="email",d$e.TYPE_URL="url",d$e.TYPE_NUMBER="number",d$e.TYPE_RANGE="range",d$e.TYPE_DATE="date",d$e.TYPE_MONTH="month",d$e.TYPE_WEEK="week",d$e.TYPE_TIME="time",d$e.TYPE_DATE_TIME="datetime",d$e.TYPE_DATE_TIME_LOCAL="datetime-local",d$e.TYPE_SEARCH="search",d$e.input=null,d$e.area=null,d$e.inputElement=null,d$e.inputContainer=null,d$e.confirmButton=null,d$e.promptStyleDOM=null,d$e.inputHeight=45,d$e.isInputting=!1,d$e.stageMatrix=null,d$k(d$e,["IOS_IFRAME",function(){return this.IOS_IFRAME=d$O.onIOS&&d$O.window.top!=d$O.window.self;}]),d$e;}(d$sa),d$ya=function(d$a){function d$c(d$a,d$b){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,d$c.__super.call(this),d$a&&this._init_(d$a,d$b);}d$m(d$c,"laya.resource.HTMLImage",d$ua);var d$b=d$c.prototype;return d$b._init_=function(d$a,d$b){this._src=d$a,this._source=new d$O.window.Image(),d$b&&(d$b.onload&&(this.onload=d$b.onload),d$b.onerror&&(this.onerror=d$b.onerror),d$b.onCreate&&d$b.onCreate(this)),0!=d$a.indexOf("data:image")&&(this._source.crossOrigin=""),d$a&&(this._source.src=d$a);},d$b.recreateResource=function(){var d$a=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate();}else{this._recreateLock=!0;var d$b=this;this._source=new d$O.window.Image(),this._source.crossOrigin="",this._source.onload=function(){if(d$b._needReleaseAgain)return d$b._needReleaseAgain=!1,d$b._source.onload=null,void(d$b._source=null);d$b._source.onload=null,d$b.memorySize=d$a._w*d$a._h*4,d$b._recreateLock=!1,d$b.completeCreate();},this._source.src=this._src;}},d$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0);},d$b.onresize=function(){this._w=this._source.width,this._h=this._source.height;},d$q(0,d$b,"onload",null,function(d$a){var d$b=this;this._onload=d$a,this._source&&(this._source.onload=null!=this._onload?function(){d$b.onresize(),d$b._onload();}:null);}),d$q(0,d$b,"onerror",null,function(d$a){var d$b=this;this._onerror=d$a,this._source&&(this._source.onerror=null!=this._onerror?function(){d$b._onerror();}:null);}),d$q(0,d$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas;},function(d$a){this._enableMerageInAtlas=d$a,d$J.isConchApp&&this._source&&(this._source.enableMerageInAtlas=d$a);}),d$c.create=function(d$a,d$b){return new d$c(d$a,d$b);},d$c;}(),d$za=(function(d$f){function d$a(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,d$a.__super.call(this);}d$m(d$a,"laya.display.EffectAnimation",d$f);var d$b=d$a.prototype;d$b._onOtherBegin=function(d$a){d$a!=this&&this.stop();},d$b.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction));},d$b._onPlayAction=function(){this.play(0,!1);},d$b.play=function(d$a,d$b,d$c,d$d){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=!0),void 0===d$c&&(d$c=""),void 0===d$d&&(d$d=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,d$a,d$b,d$c,d$d));},d$b._recordInitData=function(){if(this._aniKeys){var d$a,d$b,d$c=0;for(d$a=this._aniKeys.length,d$c=0;d$c<d$a;d$c++)d$b=this._aniKeys[d$c],this._initData[d$b]=this._target[d$b];}},d$b._displayToIndex=function(d$a){if(this._animationData){d$a<0&&(d$a=0),d$a>this._count&&(d$a=this._count);var d$b=this._animationData.nodes,d$c=0,d$d=d$b.length;for(d$d=1<d$d?1:d$d,d$c=0;d$c<d$d;d$c++)this._displayNodeToFrame(d$b[d$c],d$a);}},d$b._displayNodeToFrame=function(d$a,d$b,d$c){if(this._target){var d$d;d$d=this._target;var d$e,d$f,d$i,d$j,d$k=d$a.frames,d$l=d$a.keys,d$m=0,d$n=d$l.length;d$j=d$a.secondFrames;var d$o,d$p,d$q,d$r,d$s=0;for(d$m=0;d$m<d$n;d$m++)d$f=d$k[d$e=d$l[d$m]],d$i=-1==(d$s=d$j[d$e])?this._initData[d$e]:d$b<d$s?(d$q=(d$p=d$a.keyframes[d$e])[0]).tween?(null==(d$o=d$U[d$q.tweenMethod])&&(d$o=d$U.linearNone),d$r=d$p[1],d$o(d$b,this._initData[d$e],d$r.value-this._initData[d$e],d$r.index)):this._initData[d$e]:d$f.length>d$b?d$f[d$b]:d$f[d$f.length-1],d$d[d$e]=d$i;}},d$b._calculateNodeKeyFrames=function(d$a){d$f.prototype._calculateNodeKeyFrames.call(this,d$a);var d$b,d$c,d$d,d$e=d$a.keyframes;d$a.target;for(d$b in d$d={},d$a.secondFrames=d$d,d$e)(d$c=d$e[d$b]).length<=1?d$d[d$b]=-1:d$d[d$b]=d$c[1].index;},d$q(0,d$b,"target",function(){return this._target;},function(d$a){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=d$a,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent();}),d$q(0,d$b,"playEvent",null,function(d$a){(this._playEvents=d$a)&&this.addEvent();}),d$q(0,d$b,"effectData",null,function(d$a){var d$b;d$a&&(d$b=d$a.animations)&&d$b[0]&&(this._setUp({},d$b[0]),d$b[0].nodes&&d$b[0].nodes[0]&&(this._aniKeys=d$b[0].nodes[0].keys));}),d$q(0,d$b,"effectClass",null,function(d$a){var d$b,d$c;(this._effectClass=d$R.getClass(d$a),this._effectClass)&&(d$b=this._effectClass.uiView)&&(d$c=d$b.animations)&&d$c[0]&&(this._setUp({},d$c[0]),d$c[0].nodes&&d$c[0].nodes[0]&&(this._aniKeys=d$c[0].nodes[0].keys));}),d$a.EffectAnimationBegin="effectanimationbegin";}(d$wa),function(d$b){var d$D;function d$E(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,d$E.__super.call(this);}d$m(d$E,"laya.utils.GraphicAnimation",d$b);var d$a=d$E.prototype;return d$a._parseNodeList=function(d$a){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[d$a.compId]=d$a.props,d$a.compId&&this._nodeList.push(d$a.compId);var d$b=d$a.child;if(d$b){var d$c=0,d$d=d$b.length;for(d$c=0;d$c<d$d;d$c++)this._parseNodeList(d$b[d$c]);}},d$a._calGraphicData=function(d$a){var d$b;if(this._setUp(null,d$a),this._createGraphicData(),this._nodeIDAniDic)for(d$b in this._nodeIDAniDic)this._nodeIDAniDic[d$b]=null;},d$a._createGraphicData=function(){var d$a,d$b=[],d$c=0,d$d=this.count,d$e=this._animationNewFrames;for(d$e||(d$e=[]),d$c=0;d$c<d$d;d$c++)!d$e[d$c]&&d$a||(d$a=this._createFrameGraphic(d$c)),d$b.push(d$a);this._gList=d$b;},d$a._createFrameGraphic=function(d$a){var d$b=d$F.createGraphics();return d$E._rootMatrix||(d$E._rootMatrix=new d$G()),this._updateNodeGraphic(this._rootNode,d$a,d$E._rootMatrix,d$b),d$b;},d$a._updateNodeGraphic=function(d$a,d$b,d$c,d$d,d$e){var d$f;void 0===d$e&&(d$e=1);var d$i,d$j,d$k,d$l=(d$f=this._nodeGDic[d$a.compId]=this._getNodeGraphicData(d$a.compId,d$b,this._nodeGDic[d$a.compId])).alpha*d$e;if(!(d$l<.01)&&(d$f.resultTransform||(d$f.resultTransform=d$G.create()),d$i=d$f.resultTransform,d$G.mul(d$f.transform,d$c,d$i),d$f.skin&&(d$j=this._getTextureByUrl(d$f.skin))&&(d$i._checkTransform()?(d$d.drawTexture(d$j,0,0,d$f.width,d$f.height,d$i,d$l),d$f.resultTransform=null):d$d.drawTexture(d$j,d$i.tx,d$i.ty,d$f.width,d$f.height,null,d$l)),d$k=d$a.child)){var d$m,d$n=0;for(d$m=d$k.length,d$n=0;d$n<d$m;d$n++)this._updateNodeGraphic(d$k[d$n],d$b,d$i,d$d,d$l);}},d$a._updateNoChilds=function(d$a,d$b){if(d$a.skin){var d$c=this._getTextureByUrl(d$a.skin);if(d$c){var d$d=d$a.transform;d$d._checkTransform();!d$d.bTransform?d$b.drawTexture(d$c,d$d.tx,d$d.ty,d$a.width,d$a.height,null,d$a.alpha):d$b.drawTexture(d$c,0,0,d$a.width,d$a.height,d$d.clone(),d$a.alpha);}}},d$a._updateNodeGraphic2=function(d$a,d$b,d$c){var d$d;if(d$d=this._nodeGDic[d$a.compId]=this._getNodeGraphicData(d$a.compId,d$b,this._nodeGDic[d$a.compId]),d$a.child){var d$e=d$d.transform;d$e._checkTransform();var d$f,d$i;d$i=(d$f=!d$e.bTransform)&&(0!=d$e.tx||0!=d$e.ty);var d$j,d$k,d$l;if((d$j=d$e.bTransform||1!=d$d.alpha)&&d$c.save(),1!=d$d.alpha&&d$c.alpha(d$d.alpha),d$f?d$i&&d$c.translate(d$e.tx,d$e.ty):d$c.transform(d$e.clone()),d$k=d$a.child,d$d.skin&&(d$l=this._getTextureByUrl(d$d.skin))&&d$c.drawTexture(d$l,0,0,d$d.width,d$d.height),d$k){var d$m,d$n=0;for(d$m=d$k.length,d$n=0;d$n<d$m;d$n++)this._updateNodeGraphic2(d$k[d$n],d$b,d$c);}d$j?d$c.restore():d$f?d$i&&d$c.translate(-d$e.tx,-d$e.ty):d$c.transform(d$e.clone().invert());}else this._updateNoChilds(d$d,d$c);},d$a._calculateNodeKeyFrames=function(d$a){d$b.prototype._calculateNodeKeyFrames.call(this,d$a),this._nodeIDAniDic[d$a.target]=d$a;},d$a.getNodeDataByID=function(d$a){return this._nodeIDAniDic[d$a];},d$a._getParams=function(d$a,d$b,d$c,d$d){var d$e=d$E._temParam;d$e.length=d$b.length;var d$f=0,d$i=d$b.length;for(d$f=0;d$f<d$i;d$f++)d$e[d$f]=this._getObjVar(d$a,d$b[d$f][0],d$c,d$b[d$f][1],d$d);return d$e;},d$a._getObjVar=function(d$a,d$b,d$c,d$d,d$e){if(d$a.hasOwnProperty(d$b)){var d$f=d$a[d$b];if(d$c>=d$f.length&&(d$c=d$f.length-1),null!=d$a[d$b][d$c])return d$a[d$b][d$c];}return d$e.hasOwnProperty(d$b)?d$e[d$b]:d$d;},d$a._getNodeGraphicData=function(d$a,d$b,d$c){d$c||(d$c=d$D.create()),d$c.transform?d$c.transform.identity():d$c.transform=d$G.create();var d$d=this.getNodeDataByID(d$a);if(!d$d)return d$c;var d$e,d$f,d$i=d$d.frames,d$j=this._getParams(d$i,d$E._drawTextureCmd,d$b,this._nodeDefaultProps[d$a]),d$k=d$j[0],d$l=NaN,d$m=NaN,d$n=d$j[5],d$o=d$j[6],d$p=d$j[13],d$q=d$j[14],d$r=d$j[7],d$s=d$j[8],d$t=d$j[9],d$u=d$j[11],d$v=d$j[12];d$l=d$j[3],d$m=d$j[4],0!=d$l&&0!=d$m||(d$k=null),-1==d$l&&(d$l=0),-1==d$m&&(d$m=0),d$c.skin=d$k,d$c.width=d$l,d$c.height=d$m,d$k&&((d$e=this._getTextureByUrl(d$k))?(d$l||(d$l=d$e.sourceWidth),d$m||(d$m=d$e.sourceHeight)):console.warn("lost skin:",d$k,",you may load pics first")),d$c.alpha=d$j[10],d$f=d$c.transform,0!=d$p&&(d$n=d$p*d$l),0!=d$q&&(d$o=d$q*d$m),0==d$n&&0==d$o||d$f.translate(-d$n,-d$o);var d$w=null;if(d$t||1!==d$r||1!==d$s||d$u||d$v){(d$w=d$E._tempMt).identity(),d$w.bTransform=!0;var d$x=.0174532922222222*(d$t-d$u),d$y=.0174532922222222*(d$t+d$v),d$z=Math.cos(d$y),d$A=Math.sin(d$y),d$B=Math.sin(d$x),d$C=Math.cos(d$x);d$w.a=d$r*d$z,d$w.b=d$r*d$A,d$w.c=-d$s*d$B,d$w.d=d$s*d$C,d$w.tx=d$w.ty=0;}return d$w&&(d$f=d$G.mul(d$f,d$w,d$f)),d$f.translate(d$j[1],d$j[2]),d$c;},d$a._getTextureByUrl=function(d$a){return d$ja.getRes(d$a);},d$a.setAniData=function(d$a,d$b){if(d$a.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=d$a,this._parseNodeList(d$a);var d$c,d$d={},d$e=[],d$f=d$a.animations,d$i=0,d$j=d$f.length;for(d$i=0;d$i<d$j;d$i++)if(d$c=d$f[d$i],this._labels=null,(!d$b||d$b==d$c.name)&&d$c){try{this._calGraphicData(d$c);}catch(d$a){console.warn("parse animation fail:"+d$c.name+",empty animation created"),this._gList=[];}var d$k={};d$k.interval=1e3/d$c.frameRate,d$k.frames=this._gList,d$k.labels=this._labels,d$k.name=d$c.name,d$e.push(d$k),d$d[d$c.name]=d$k;}this.animationList=d$e,this.animationDic=d$d;}d$E._temParam.length=0;},d$a.parseByData=function(d$a){var d$b,d$c;d$b=d$a.nodeRoot,d$c=d$a.aniO,delete d$a.nodeRoot,delete d$a.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=d$b,this._parseNodeList(d$b),this._labels=null;try{this._calGraphicData(d$c);}catch(d$a){console.warn("parse animation fail:"+d$c.name+",empty animation created"),this._gList=[];}var d$d=d$a;return d$d.interval=1e3/d$c.frameRate,d$d.frames=this._gList,d$d.labels=this._labels,d$d.name=d$c.name,d$d;},d$a.setUpAniData=function(d$a){if(d$a.animations){var d$b,d$c={},d$d=[],d$e=d$a.animations,d$f=0,d$i=d$e.length;for(d$f=0;d$f<d$i;d$f++)if(d$b=d$e[d$f]){var d$j={};d$j.name=d$b.name,d$j.aniO=d$b,d$j.nodeRoot=d$a,d$d.push(d$j),d$c[d$b.name]=d$j;}this.animationList=d$d,this.animationDic=d$c;}},d$a._clear=function(){var d$a,d$b;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(d$a in this._nodeGDic)(d$b=this._nodeGDic[d$a])&&d$b.recover();this._nodeGDic=null;},d$E.parseAnimationByData=function(d$a){var d$b;return d$E._I||(d$E._I=new d$E()),d$b=d$E._I.parseByData(d$a),d$E._I._clear(),d$b;},d$E.parseAnimationData=function(d$a){var d$b;return d$E._I||(d$E._I=new d$E()),d$E._I.setUpAniData(d$a),(d$b={}).animationList=d$E._I.animationList,d$b.animationDic=d$E._I.animationDic,d$E._I._clear(),d$b;},d$E._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],d$E._temParam=[],d$E._I=null,d$E._rootMatrix=null,d$k(d$E,["_tempMt",function(){return this._tempMt=new d$G();}]),d$E.__init$=function(){d$D=function(){function d$a(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1;}return d$m(d$a,""),d$a.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),d$W.recover("GraphicNode",this);},d$a.create=function(){return d$W.getItemByClass("GraphicNode",d$a);},d$a;}();},d$E;}(d$wa));d$z.__init([d$l,d$ka,d$J,d$O,d$Y,d$C,d$a,d$za]);}(window,document,Laya),function(d$a,d$b,d$c){d$c.un,d$c.uns,d$c.static;var d$d=d$c.class;d$c.getset,d$c.__newvec;new(function(){function d$a(){}return d$d(d$a,"LayaMain"),d$a;}())();}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(d$a,d$b){"use strict";for(var d$c in Object.defineProperty(d$b,"__esModule",{value:!0}),Laya){var d$d=Laya[d$c];d$d&&d$d.__isclass&&(d$b[d$c]=d$d);}}),function(d$a,d$b,d$y){d$y.un,d$y.uns;var d$i=d$y.static,d$o=d$y.class,d$d=d$y.getset,d$f=d$y.__newvec,d$m=laya.maths.Arith,d$n=laya.maths.Bezier,d$c=laya.resource.Bitmap,d$p=laya.utils.Browser,d$k=laya.utils.Byte,d$q=laya.utils.Color,d$z=(laya.filters.ColorFilter,d$y.Config),d$e=laya.resource.Context,d$A=(laya.events.Event,laya.filters.Filter),d$j=laya.display.Graphics,d$l=laya.resource.HTMLCanvas,d$r=(laya.utils.HTMLChar,laya.resource.HTMLImage),d$s=laya.resource.HTMLSubImage,d$B=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),d$C=laya.maths.Point,d$D=laya.maths.Rectangle,d$t=laya.renders.Render,d$u=(laya.renders.RenderContext,laya.renders.RenderSprite),d$v=laya.resource.Resource,d$w=laya.resource.ResourceManager,d$x=laya.utils.RunDriver,d$E=laya.display.Sprite,d$F=laya.display.Stage,d$G=laya.utils.Stat,d$H=laya.utils.StringKey,d$I=(laya.display.css.Style,laya.system.System),d$J=laya.display.Text,d$K=laya.resource.Texture,d$L=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),d$M=laya.utils.VectorGraphManager;laya.utils.WordText;d$y.interface("laya.webgl.shapes.IShape"),d$y.interface("laya.webgl.submit.ISubmit"),d$y.interface("laya.webgl.text.ICharSegment"),d$y.interface("laya.webgl.canvas.save.ISaveData"),d$y.interface("laya.webgl.resource.IMergeAtlasBitmap"),d$y.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var d$N=function(){function d$a(){}d$o(d$a,"laya.filters.webgl.FilterActionGL");var d$b=d$a.prototype;return d$y.imps(d$b,{"laya.filters.IFilterActionGL":!0}),d$b.setValue=function(d$a){},d$b.setValueMix=function(d$a){},d$b.apply3d=function(d$a,d$b,d$c,d$d,d$e){return null;},d$b.apply=function(d$a){return null;},d$d(0,d$b,"typeMix",function(){return 0;}),d$a;}(),d$O=function(){function d$a(){}return d$o(d$a,"laya.webgl.shader.ShaderValue"),d$a;}(),d$P=function(){var d$d,d$e;function d$a(d$a,d$b,d$c){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new d$e(),void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),this._cells=null,this._rowInfo=null,this._init(d$a,d$b),this._atlasID=d$c;}d$o(d$a,"laya.webgl.atlas.AtlasGrid");var d$b=d$a.prototype;return d$b.getAltasID=function(){return this._atlasID;},d$b.setAltasID=function(d$a){0<=d$a&&(this._atlasID=d$a);},d$b.addTex=function(d$a,d$b,d$c){var d$d=this._get(d$b,d$c);return 0==d$d.ret||(this._fill(d$d.x,d$d.y,d$b,d$c,d$a),this._texCount++),d$d;},d$b._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null);},d$b._init=function(d$a,d$b){if(this._width=d$a,this._height=d$b,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=d$f(this._height);for(var d$c=0;d$c<this._height;d$c++)this._rowInfo[d$c]=new d$d();return this._clear(),!0;},d$b._get=function(d$a,d$b){var d$c=new d$R();if(d$a>=this._failSize.width&&d$b>=this._failSize.height)return d$c;for(var d$d=-1,d$e=-1,d$f=this._width,d$i=this._height,d$j=this._cells,d$k=0;d$k<d$i;d$k++)if(!(this._rowInfo[d$k].spaceCount<d$a))for(var d$l=0;d$l<d$f;){var d$m=3*(d$k*d$f+d$l);if(0!=d$j[d$m]||d$j[1+d$m]<d$a||d$j[2+d$m]<d$b)d$l+=d$j[1+d$m];else{d$d=d$l,d$e=d$k;for(var d$n=0;d$n<d$a;d$n++)if(d$j[3*d$n+d$m+2]<d$b){d$d=-1;break;}if(!(d$d<0))return d$c.ret=!0,d$c.x=d$d,d$c.y=d$e,d$c;d$l+=d$j[1+d$m];}}return d$c;},d$b._fill=function(d$a,d$b,d$c,d$d,d$e){var d$f=this._width,d$i=this._height;this._check(d$a+d$c<=d$f&&d$b+d$d<=d$i);for(var d$j=d$b;d$j<d$d+d$b;++d$j){this._check(this._rowInfo[d$j].spaceCount>=d$c),this._rowInfo[d$j].spaceCount-=d$c;for(var d$k=0;d$k<d$c;d$k++){var d$l=3*(d$a+d$j*d$f+d$k);this._check(0==this._cells[d$l]),this._cells[d$l]=d$e,this._cells[1+d$l]=d$c,this._cells[2+d$l]=d$d;}}if(0<d$a)for(d$j=0;d$j<d$d;++d$j){var d$m=0;for(d$k=d$a-1;0<=d$k&&0==this._cells[3*((d$b+d$j)*d$f+d$k)];--d$k,++d$m);for(d$k=d$m;0<d$k;--d$k)this._cells[3*((d$b+d$j)*d$f+d$a-d$k)+1]=d$k,this._check(0<d$k);}if(0<d$b)for(d$k=d$a;d$k<d$a+d$c;++d$k){for(d$m=0,d$j=d$b-1;0<=d$j&&0==this._cells[3*(d$k+d$j*d$f)];--d$j,d$m++);for(d$j=d$m;0<d$j;--d$j)this._cells[3*(d$k+(d$b-d$j)*d$f)+2]=d$j,this._check(0<d$j);}},d$b._check=function(d$a){0==d$a&&console.log("xtexMerger 错误啦");},d$b._clear=function(){for(var d$a=this._texCount=0;d$a<this._height;d$a++)this._rowInfo[d$a].spaceCount=this._width;for(var d$b=0;d$b<this._height;d$b++)for(var d$c=0;d$c<this._width;d$c++){var d$d=3*(d$b*this._width+d$c);this._cells[d$d]=0,this._cells[1+d$d]=this._width-d$c,this._cells[2+d$d]=this._width-d$b;}this._failSize.width=this._width+1,this._failSize.height=this._height+1;},d$a.__init$=function(){d$d=function(){function d$a(){this.spaceCount=0;}return d$o(d$a,""),d$a;}(),d$e=function(){function d$a(){this.width=0,this.height=0;}return d$o(d$a,""),d$a;}();},d$a;}(),d$Q=function(){function d$t(d$a,d$b,d$c,d$d){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=d$a,this._height=d$b,this._gridSize=d$c,this._maxAtlaserCount=d$d,this._gridNumX=d$a/d$c,this._gridNumY=d$b/d$c,this._curAtlasIndex=0,this._atlaserArray=[];}d$o(d$t,"laya.webgl.atlas.AtlasResourceManager");var d$a=d$t.prototype;return d$a.setAtlasParam=function(d$a,d$b,d$c,d$d){if(1==this._setAtlasParam)return d$t._sid_=0,this._width=d$a,this._height=d$b,this._gridSize=d$c,this._maxAtlaserCount=d$d,this._gridNumX=d$a/d$c,this._gridNumY=d$b/d$c,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1;},d$a.pushData=function(d$a){var d$b,d$c=d$a.bitmap,d$d=-1,d$e=null,d$f=0,d$i=0;for(d$f=0,d$b=this._atlaserArray.length;d$f<d$b&&(d$i=(this._curAtlasIndex+d$f)%d$b,-1==(d$d=(d$e=this._atlaserArray[d$i]).findBitmapIsExist(d$c)));d$f++);if(-1!=d$d){var d$j=d$e.InAtlasWebGLImagesOffsetValue[d$d];return d$q=d$j[0],d$r=d$j[1],d$e.addToAtlas(d$a,d$q,d$r),!0;}this._setAtlasParam=!1;for(var d$k=Math.ceil((d$a.bitmap.width+2)/this._gridSize),d$l=Math.ceil((d$a.bitmap.height+2)/this._gridSize),d$m=!1,d$n=0;d$n<2;d$n++){var d$o=this._maxAtlaserCount;for(d$f=0;d$f<d$o;d$f++){d$i=(this._curAtlasIndex+d$f)%d$o,this._atlaserArray.length-1>=d$i||this._atlaserArray.push(new d$Da(this._gridNumX,this._gridNumY,this._width,this._height,d$t._sid_++));var d$p=this._atlaserArray[d$i],d$q=0,d$r=0,d$s=d$p.addTex(1,d$k,d$l);if(d$s.ret){d$q=d$s.x*this._gridSize+1,d$r=d$s.y*this._gridSize+1,d$c.lock=!0,d$p.addToAtlasTexture(d$c,d$q,d$r),d$p.addToAtlas(d$a,d$q,d$r),d$m=!0,this._curAtlasIndex=d$i;break;}}if(d$m)break;this._atlaserArray.push(new d$Da(this._gridNumX,this._gridNumY,this._width,this._height,d$t._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1;}return d$m||console.log(">>>AtlasManager pushData error"),d$m;},d$a.addToAtlas=function(d$a){laya.webgl.atlas.AtlasResourceManager.instance.pushData(d$a);},d$a.garbageCollection=function(){if(!0===this._needGC){for(var d$a=this._atlaserArray.length-this._maxAtlaserCount,d$b=0;d$b<d$a;d$b++)this._atlaserArray[d$b].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+d$a),this._atlaserArray.splice(0,d$a),this._needGC=!1;}return!0;},d$a.freeAll=function(){for(var d$a=0,d$b=this._atlaserArray.length;d$a<d$b;d$a++)this._atlaserArray[d$a].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0;},d$a.getAtlaserCount=function(){return this._atlaserArray.length;},d$a.getAtlaserByIndex=function(d$a){return this._atlaserArray[d$a];},d$d(1,d$t,"instance",function(){return d$t._Instance||(d$t._Instance=new d$t(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),d$t._Instance;}),d$d(1,d$t,"enabled",function(){return d$z.atlasEnable;}),d$d(1,d$t,"atlasLimitWidth",function(){return d$t._atlasLimitWidth;},function(d$a){d$t._atlasLimitWidth=d$a;}),d$d(1,d$t,"atlasLimitHeight",function(){return d$t._atlasLimitHeight;},function(d$a){d$t._atlasLimitHeight=d$a;}),d$t._enable=function(){d$z.atlasEnable=!0;},d$t._disable=function(){d$z.atlasEnable=!1;},d$t.__init__=function(){d$t.atlasTextureWidth=2048,d$t.atlasTextureHeight=2048,d$t.maxTextureCount=6,d$t.atlasLimitWidth=512,d$t.atlasLimitHeight=512;},d$t._atlasLimitWidth=0,d$t._atlasLimitHeight=0,d$t.gridSize=16,d$t.atlasTextureWidth=0,d$t.atlasTextureHeight=0,d$t.maxTextureCount=0,d$t._atlasRestore=0,d$t.BOARDER_TYPE_NO=0,d$t.BOARDER_TYPE_RIGHT=1,d$t.BOARDER_TYPE_LEFT=2,d$t.BOARDER_TYPE_BOTTOM=4,d$t.BOARDER_TYPE_TOP=8,d$t.BOARDER_TYPE_ALL=15,d$t._sid_=0,d$t._Instance=null,d$t;}(),d$R=function(){function d$a(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0;}return d$o(d$a,"laya.webgl.atlas.MergeFillInfo"),d$a;}(),d$S=function(){function d$b(){}return d$o(d$b,"laya.webgl.canvas.BlendMode"),d$b._init_=function(d$a){d$b.fns=[d$b.BlendNormal,d$b.BlendAdd,d$b.BlendMultiply,d$b.BlendScreen,d$b.BlendOverlay,d$b.BlendLight,d$b.BlendMask,d$b.BlendDestinationOut],d$b.targetFns=[d$b.BlendNormalTarget,d$b.BlendAddTarget,d$b.BlendMultiplyTarget,d$b.BlendScreenTarget,d$b.BlendOverlayTarget,d$b.BlendLightTarget,d$b.BlendMask,d$b.BlendDestinationOut];},d$b.BlendNormal=function(d$a){d$a.blendFunc(1,771);},d$b.BlendAdd=function(d$a){d$a.blendFunc(1,772);},d$b.BlendMultiply=function(d$a){d$a.blendFunc(774,771);},d$b.BlendScreen=function(d$a){d$a.blendFunc(1,1);},d$b.BlendOverlay=function(d$a){d$a.blendFunc(1,769);},d$b.BlendLight=function(d$a){d$a.blendFunc(1,1);},d$b.BlendNormalTarget=function(d$a){d$a.blendFunc(1,771);},d$b.BlendAddTarget=function(d$a){d$a.blendFunc(1,772);},d$b.BlendMultiplyTarget=function(d$a){d$a.blendFunc(774,771);},d$b.BlendScreenTarget=function(d$a){d$a.blendFunc(1,1);},d$b.BlendOverlayTarget=function(d$a){d$a.blendFunc(1,769);},d$b.BlendLightTarget=function(d$a){d$a.blendFunc(1,1);},d$b.BlendMask=function(d$a){d$a.blendFunc(0,770);},d$b.BlendDestinationOut=function(d$a){d$a.blendFunc(0,0);},d$b.activeBlendFunction=null,d$b.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],d$b.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},d$b.NORMAL="normal",d$b.ADD="add",d$b.MULTIPLY="multiply",d$b.SCREEN="screen",d$b.LIGHT="light",d$b.OVERLAY="overlay",d$b.DESTINATIONOUT="destination-out",d$b.fns=[],d$b.targetFns=[],d$b;}(),d$T=function(){function d$c(d$a){this._color=d$q.create("black"),this.setValue(d$a);}d$o(d$c,"laya.webgl.canvas.DrawStyle");var d$a=d$c.prototype;return d$a.setValue=function(d$a){if(d$a){if("string"==typeof d$a)return void(this._color=d$q.create(d$a));if(d$a instanceof laya.utils.Color)return void(this._color=d$a);}},d$a.reset=function(){this._color=d$q.create("black");},d$a.equal=function(d$a){return"string"==typeof d$a?this._color.strColor===d$a:d$a instanceof laya.utils.Color&&this._color.numColor===d$a.numColor;},d$a.toColorStr=function(){return this._color.strColor;},d$c.create=function(d$a){var d$b;if(d$a&&("string"==typeof d$a?d$b=d$q.create(d$a):d$a instanceof laya.utils.Color&&(d$b=d$a),d$b))return d$b._drawStyle||(d$b._drawStyle=new d$c(d$a));return laya.webgl.canvas.DrawStyle.DEFAULT;},d$i(d$c,["DEFAULT",function(){return this.DEFAULT=new d$c("#000000");}]),d$c;}(),d$U=function(){function d$a(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];d$wa.mainContext;this.ib=d$ga.create(35048),this.vb=d$ha.create(5);}d$o(d$a,"laya.webgl.canvas.Path");var d$b=d$a.prototype;return d$b.addPoint=function(d$a,d$b){this.tempArray.push(d$a,d$b);},d$b.getEndPointX=function(){return this.tempArray[this.tempArray.length-2];},d$b.getEndPointY=function(){return this.tempArray[this.tempArray.length-1];},d$b.polygon=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i;return this.geomatrys.push(this._curGeomatry=d$i=new d$Ha(d$a,d$b,d$c,d$d,d$e,d$f)),d$d||(d$i.fill=!1),null==d$f&&(d$i.borderWidth=0),d$i;},d$b.setGeomtry=function(d$a){this.geomatrys.push(this._curGeomatry=d$a);},d$b.drawLine=function(d$a,d$b,d$c,d$d,d$e){var d$f;return this.closePath?this.geomatrys.push(this._curGeomatry=d$f=new d$Ga(d$a,d$b,d$c,d$d,d$e)):this.geomatrys.push(this._curGeomatry=d$f=new d$Fa(d$a,d$b,d$c,d$d,d$e)),d$f.fill=!1,d$f;},d$b.update=function(){var d$a=this.ib._byteLength,d$b=this.geomatrys.length;this.offset=d$a;for(var d$c=this.geoStart;d$c<d$b;d$c++)this.geomatrys[d$c].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=d$b,this.count=(this.ib._byteLength-d$a)/d$ra.BYTES_PIDX;},d$b.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0;},d$b.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null;},d$a;}(),d$V=function(){function d$j(){}d$o(d$j,"laya.webgl.canvas.save.SaveBase");var d$a=d$j.prototype;return d$y.imps(d$a,{"laya.webgl.canvas.save.ISaveData":!0}),d$a.isSaveMark=function(){return!1;},d$a.restore=function(d$a){this._dataObj[this._valueName]=this._value,(d$j._cache[d$j._cache._length++]=this)._newSubmit&&(d$a._curSubmit=d$fa.RENDERBASE,d$a._renderKey=0);},d$j._createArray=function(){var d$a=[];return d$a._length=0,d$a;},d$j._init=function(){var d$a=d$j._namemap={};return d$a[1]="ALPHA",d$a[2]="fillStyle",d$a[8]="font",d$a[256]="lineWidth",d$a[512]="strokeStyle",d$a[8192]="_mergeID",d$a[1024]=d$a[2048]=d$a[4096]=[],d$a[16384]="textBaseline",d$a[32768]="textAlign",d$a[65536]="_nBlendType",d$a[1048576]="shader",d$a[2097152]="filters",d$a;},d$j.save=function(d$a,d$b,d$c,d$d){if((d$a._saveMark._saveuse&d$b)!==d$b){d$a._saveMark._saveuse|=d$b;var d$e=d$j._cache,d$f=0<d$e._length?d$e[--d$e._length]:new d$j();d$f._value=d$c[d$f._valueName=d$j._namemap[d$b]],d$f._dataObj=d$c,d$f._newSubmit=d$d;var d$i=d$a._save;d$i[d$i._length++]=d$f;}},d$j._cache=laya.webgl.canvas.save.SaveBase._createArray(),d$j._namemap=d$j._init(),d$j;}(),d$W=function(){function d$f(){this._clipRect=new d$D();}d$o(d$f,"laya.webgl.canvas.save.SaveClipRect");var d$a=d$f.prototype;return d$y.imps(d$a,{"laya.webgl.canvas.save.ISaveData":!0}),d$a.isSaveMark=function(){return!1;},d$a.restore=function(d$a){d$a._clipRect=this._clipSaveRect,(d$f._cache[d$f._cache._length++]=this)._submitScissor.submitLength=d$a._submits._length-this._submitScissor.submitIndex,d$a._curSubmit=d$fa.RENDERBASE,d$a._renderKey=0;},d$f.save=function(d$a,d$b){if(131072!=(131072&d$a._saveMark._saveuse)){d$a._saveMark._saveuse|=131072;var d$c=d$f._cache,d$d=0<d$c._length?d$c[--d$c._length]:new d$f();d$d._clipSaveRect=d$a._clipRect,d$a._clipRect=d$d._clipRect.copyFrom(d$a._clipRect),d$d._submitScissor=d$b;var d$e=d$a._save;d$e[d$e._length++]=d$d;}},d$i(d$f,["_cache",function(){return this._cache=d$V._createArray();}]),d$f;}(),d$X=function(){function d$p(){this._contextX=0,this._contextY=0,this._clipRect=new d$D(),this._rect=new d$D(),this._matrix=new d$B();}d$o(d$p,"laya.webgl.canvas.save.SaveClipRectStencil");var d$a=d$p.prototype;return d$y.imps(d$a,{"laya.webgl.canvas.save.ISaveData":!0}),d$a.isSaveMark=function(){return!1;},d$a.restore=function(d$a){d$ma.restore(d$a,this._rect,this._saveMatrix,this._contextX,this._contextY),d$a._clipRect=this._clipSaveRect,d$a._curMat=this._saveMatrix,d$a._x=this._contextX,d$a._y=this._contextY,d$p._cache[d$p._cache._length++]=this,d$a._curSubmit=d$fa.RENDERBASE;},d$p.save=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){if(262144!=(262144&d$a._saveMark._saveuse)){d$a._saveMark._saveuse|=262144;var d$m=d$p._cache,d$n=0<d$m._length?d$m[--d$m._length]:new d$p();d$n._clipSaveRect=d$a._clipRect,d$n._clipRect.setTo(d$i,d$j,d$k,d$l),d$a._clipRect=d$n._clipRect,d$n._rect.x=d$c,d$n._rect.y=d$d,d$n._rect.width=d$e,d$n._rect.height=d$f,d$n._contextX=d$a._x,d$n._contextY=d$a._y,d$n._saveMatrix=d$a._curMat,d$a._curMat.copyTo(d$n._matrix),d$a._curMat=d$n._matrix,d$n._submitStencil=d$b;var d$o=d$a._save;d$o[d$o._length++]=d$n;}},d$i(d$p,["_cache",function(){return this._cache=d$V._createArray();}]),d$p;}(),d$Y=function(){function d$d(){this._saveuse=0;}d$o(d$d,"laya.webgl.canvas.save.SaveMark");var d$a=d$d.prototype;return d$y.imps(d$a,{"laya.webgl.canvas.save.ISaveData":!0}),d$a.isSaveMark=function(){return!0;},d$a.restore=function(d$a){d$a._saveMark=this._preSaveMark,d$d._no[d$d._no._length++]=this;},d$d.Create=function(d$a){var d$b=d$d._no,d$c=0<d$b._length?d$b[--d$b._length]:new d$d();return d$c._saveuse=0,d$c._preSaveMark=d$a._saveMark,d$a._saveMark=d$c;},d$i(d$d,["_no",function(){return this._no=d$V._createArray();}]),d$d;}(),d$Z=function(){function d$f(){this._matrix=new d$B();}d$o(d$f,"laya.webgl.canvas.save.SaveTransform");var d$a=d$f.prototype;return d$y.imps(d$a,{"laya.webgl.canvas.save.ISaveData":!0}),d$a.isSaveMark=function(){return!1;},d$a.restore=function(d$a){d$a._curMat=this._savematrix,d$f._no[d$f._no._length++]=this;},d$f.save=function(d$a){var d$b=d$a._saveMark;if(2048!=(2048&d$b._saveuse)){d$b._saveuse|=2048;var d$c=d$f._no,d$d=0<d$c._length?d$c[--d$c._length]:new d$f();d$d._savematrix=d$a._curMat,d$a._curMat=d$a._curMat.copyTo(d$d._matrix);var d$e=d$a._save;d$e[d$e._length++]=d$d;}},d$i(d$f,["_no",function(){return this._no=d$V._createArray();}]),d$f;}(),d$$=function(){function d$e(){}d$o(d$e,"laya.webgl.canvas.save.SaveTranslate");var d$a=d$e.prototype;return d$y.imps(d$a,{"laya.webgl.canvas.save.ISaveData":!0}),d$a.isSaveMark=function(){return!1;},d$a.restore=function(d$a){d$a._curMat;d$a._x=this._x,d$a._y=this._y,d$e._no[d$e._no._length++]=this;},d$e.save=function(d$a){var d$b=d$e._no,d$c=0<d$b._length?d$b[--d$b._length]:new d$e();d$c._x=d$a._x,d$c._y=d$a._y;var d$d=d$a._save;d$d[d$d._length++]=d$c;},d$i(d$e,["_no",function(){return this._no=d$V._createArray();}]),d$e;}(),d$_=function(){function d$a(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new d$D();}d$o(d$a,"laya.webgl.resource.RenderTargetMAX");var d$b=d$a.prototype;return d$b.setSP=function(d$a){this._sp=d$a;},d$b.size=function(d$a,d$b){var d$c=this;this._width!==d$a||this._height!==d$b?(this.repaint=!0,this._width=d$a,this._height=d$b,this.target?this.target.size(d$a,d$b):this.target=d$Ma.create(d$a,d$b),this.target.hasListener("recovered")||this.target.on("recovered",this,function(d$a){d$y.timer.callLater(d$c._sp,d$c._sp.repaint);})):this.target.size(d$a,d$b);},d$b._flushToTarget=function(d$a,d$b){if(!d$b._destroy){var d$c=d$ua.worldScissorTest,d$d=d$ua.worldClipRect;d$ua.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,d$ua.worldScissorTest=!1,d$wa.mainContext.disable(3089);var d$e=d$ua.worldAlpha,d$f=d$ua.worldMatrix4,d$i=d$ua.worldMatrix,d$j=d$ua.worldFilters,d$k=d$ua.worldShaderDefines;if(d$ua.worldMatrix=d$B.EMPTY,d$ua.restoreTempArray(),d$ua.worldMatrix4=d$ua.TEMPMAT4_ARRAY,d$ua.worldAlpha=1,d$ua.worldFilters=null,d$ua.worldShaderDefines=null,d$La.activeShader=null,d$b.start(),d$z.showCanvasMark?d$b.clear(0,1,0,.3):d$b.clear(0,0,0,0),d$a.flush(),d$b.end(),d$La.activeShader=null,d$ua.worldAlpha=d$e,d$ua.worldMatrix4=d$f,d$ua.worldMatrix=d$i,d$ua.worldFilters=d$j,d$ua.worldShaderDefines=d$k,d$ua.worldScissorTest=d$c){var d$l=d$ua.height-d$d.y-d$d.height;d$wa.mainContext.scissor(d$d.x,d$l,d$d.width,d$d.height),d$wa.mainContext.enable(3089);}d$ua.worldClipRect=d$d;}},d$b.flush=function(d$a){this.repaint&&(this._flushToTarget(d$a,this.target),this.repaint=!1);},d$b.drawTo=function(d$a,d$b,d$c,d$d,d$e){d$a.drawTexture(this.target.getTexture(),d$b,d$c,d$d,d$e,0,0);},d$b.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null);},d$a;}(),d$g=function(){function d$a(){this.ALPHA=1,this.shaderType=0,this.defines=new d$Ea();}return d$o(d$a,"laya.webgl.shader.d2.Shader2D"),d$a.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null;},d$a.__init__=function(){var d$a,d$b;d$Ya.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),d$Ya.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),d$Ya.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),d$Ya.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),d$Ya.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),d$Ya.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),d$Ya.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),d$Ya.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),d$a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",d$b='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',d$Ya.preCompile2D(0,1,d$a,d$b,null),d$a="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",d$b='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',d$Ya.preCompile2D(0,2,d$a,d$b,null),d$a="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",d$b="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",d$Ya.preCompile2D(0,4,d$a,d$b,null),d$a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",d$b='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',d$Ya.preCompile2D(0,256,d$a,d$b,null),d$a="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",d$b="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",d$Ya.preCompile2D(0,512,d$a,d$b,null);},d$a;}(),d$h=function(){function d$b(d$a,d$b,d$c){this._value=0,this._name2int=d$a,this._int2name=d$b,this._int2nameMap=d$c;}d$o(d$b,"laya.webgl.shader.ShaderDefines");var d$a=d$b.prototype;return d$a.add=function(d$a){return"string"==typeof d$a&&(d$a=this._name2int[d$a]),this._value|=d$a,this._value;},d$a.addInt=function(d$a){return this._value|=d$a,this._value;},d$a.remove=function(d$a){return"string"==typeof d$a&&(d$a=this._name2int[d$a]),this._value&=~d$a,this._value;},d$a.isDefine=function(d$a){return(this._value&d$a)===d$a;},d$a.getValue=function(){return this._value;},d$a.setValue=function(d$a){this._value=d$a;},d$a.toNameDic=function(){var d$a=this._int2nameMap[this._value];return d$a||d$b._toText(this._value,this._int2name,this._int2nameMap);},d$b._reg=function(d$a,d$b,d$c,d$d){d$d[d$c[d$a]=d$b]=d$a;},d$b._toText=function(d$a,d$b,d$c){var d$d=d$c[d$a];if(d$d)return d$d;for(var d$e={},d$f=1,d$i=0;d$i<32&&!(d$a<(d$f=1<<d$i));d$i++)if(d$a&d$f){var d$j=d$b[d$f];d$j&&(d$e[d$j]="");}return d$c[d$a]=d$e;},d$b._toInt=function(d$a,d$b){for(var d$c=d$a.split("."),d$d=0,d$e=0,d$f=d$c.length;d$e<d$f;d$e++){var d$i=d$b[d$c[d$e]];if(!d$i)throw new Error("Defines to int err:"+d$a+"/"+d$c[d$e]);d$d|=d$i;}return d$d;},d$b;}(),d$aa=function(){function d$i(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new d$B();}d$o(d$i,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var d$a=d$i.prototype;return d$a.init=function(d$a,d$b,d$c){if(d$b)this._vs=d$b;else{this._vs=[];var d$d=d$a.width,d$e=d$a.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(d$d,0,1,0,1,1,1,1),this._vs.push(d$d,d$e,1,1,1,1,1,1),this._vs.push(0,d$e,0,1,1,1,1,1);}d$c?this._ps=d$c:(d$i._defaultPS||(d$i._defaultPS=[]).push(0,1,3,3,1,2),this._ps=d$i._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=d$a;},d$a.init2=function(d$a,d$b,d$c,d$d,d$e){this.transform&&(this.transform=null),d$c?this._ps=d$c:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=d$d,this._uvs=d$e,this.mEleNum=this._ps.length,this.mTexture=d$a,(d$t.isConchNode||d$t.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs));},d$a._initMyData=function(){var d$a=0,d$b=0,d$c=4*this._verticles.length;this._vs=d$i._tempVS;var d$d=!1;if(d$t.isConchNode||d$t.isConchApp?(this._vs.length=d$c,d$d=!0):this._vs.length<d$c&&(this._vs.length=d$c,d$d=!0),d$i._tVSLen=d$c,d$d)for(;d$a<d$c;)this._vs[d$a]=this._verticles[d$b],this._vs[d$a+1]=this._verticles[d$b+1],this._vs[d$a+2]=this._uvs[d$b],this._vs[d$a+3]=this._uvs[d$b+1],this._vs[d$a+4]=1,this._vs[d$a+5]=1,this._vs[d$a+6]=1,this._vs[d$a+7]=1,d$a+=8,d$b+=2;else for(;d$a<d$c;)this._vs[d$a]=this._verticles[d$b],this._vs[d$a+1]=this._verticles[d$b+1],this._vs[d$a+2]=this._uvs[d$b],this._vs[d$a+3]=this._uvs[d$b+1],d$a+=8,d$b+=2;},d$a.getData2=function(d$a,d$b,d$c){var d$d;this.mVBBuffer=d$a,this.mIBBuffer=d$b,this._initMyData(),d$a.appendEx2(this._vs,Float32Array,d$i._tVSLen,4),this._indexStart=d$b._byteLength,(d$d=d$i._tempIB).length<this._ps.length&&(d$d.length=this._ps.length);for(var d$e=0,d$f=this._ps.length;d$e<d$f;d$e++)d$d[d$e]=this._ps[d$e]+d$c;d$b.appendEx2(d$d,Uint16Array,this._ps.length,2);},d$a.getData=function(d$a,d$b,d$c){if(this.mVBBuffer=d$a,this.mIBBuffer=d$b,d$a.append(this.mVBData),this._indexStart=d$b._byteLength,this.mIBData.start!=d$c){for(var d$d=0,d$e=this._ps.length;d$d<d$e;d$d++)this.mIBData[d$d]=this._ps[d$d]+d$c;this.mIBData.start=d$c;}d$b.append(this.mIBData);},d$a.render=function(d$a,d$b,d$c){if(d$t.isWebGL&&this.mTexture){d$a._renderKey=0,d$a._shader2D.glTexture=null,d$ba.getInstance().addSkinMesh(this);var d$d=d$fa.createShape(d$a,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,d$Aa.create(512,0));this.transform||(this.transform=d$B.EMPTY),this.transform.translate(d$b,d$c),d$B.mul(this.transform,d$a._curMat,this._tempMatrix),this.transform.translate(-d$b,-d$c);var d$e=d$d.shaderValue,d$f=d$e.u_mmat2||d$ua.getMatrArray();d$ua.mat2MatArray(this._tempMatrix,d$f),d$e.textureHost=this.mTexture,d$e.offsetX=0,d$e.offsetY=0,d$e.u_mmat2=d$f,d$e.ALPHA=d$a._shader2D.ALPHA,d$a._submits[d$a._submits._length++]=d$d;}else d$t.isConchApp&&this.mTexture&&(this.transform||(this.transform=d$B.EMPTY),d$a.setSkinMesh&&d$a.setSkinMesh(d$b,d$c,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform));},d$i._tempVS=[],d$i._tempIB=[],d$i._defaultPS=null,d$i._tVSLen=0,d$i;}(),d$ba=function(){function d$a(){this.ib=null,this.vb=null;d$wa.mainContext;this.ib=d$ga.create(35048),this.vb=d$ha.create(8);}d$o(d$a,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var d$b=d$a.prototype;return d$b.addSkinMesh=function(d$a){d$a.getData2(this.vb,this.ib,this.vb._byteLength/32);},d$b.reset=function(){this.vb.clear(),this.ib.clear();},d$a.getInstance=function(){return d$a.instance=d$a.instance||new d$a();},d$a.instance=null,d$a;}(),d$ca=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===d$k&&(d$k=0),this.x=d$a,this.y=d$b,this.width=d$c,this.height=d$d,this.edges=d$e,this.color=d$f,this.borderWidth=d$i,this.borderColor=d$j;}d$o(d$a,"laya.webgl.shapes.BasePoly");var d$b=d$a.prototype;return d$y.imps(d$b,{"laya.webgl.shapes.IShape":!0}),d$b.getData=function(d$a,d$b,d$c){},d$b.rebuild=function(d$a){},d$b.setMatrix=function(d$a){},d$b.needUpdate=function(d$a){return!0;},d$b.sector=function(d$a,d$b,d$c){var d$d=this.x,d$e=this.y,d$f=this.edges,d$i=(this.r1-this.r0)/d$f,d$j=this.width,d$k=this.height,d$l=this.color,d$m=(d$l>>16&255)/255,d$n=(d$l>>8&255)/255,d$o=(255&d$l)/255;d$a.push(d$d,d$e,d$m,d$n,d$o);for(var d$p=0;d$p<d$f+1;d$p++)d$a.push(d$d+Math.sin(d$i*d$p+this.r0)*d$j,d$e+Math.cos(d$i*d$p+this.r0)*d$k),d$a.push(d$m,d$n,d$o);for(d$p=0;d$p<d$f;d$p++)d$b.push(d$c,d$c+d$p+1,d$c+d$p+2);},d$b.createLine2=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i,d$j,d$k,d$l,d$m,d$n,d$o,d$p,d$q,d$r,d$s,d$t,d$u,d$v,d$w,d$x,d$y,d$z,d$A,d$B,d$C=d$a.concat(),d$D=d$e,d$E=this.borderColor,d$F=(d$E>>16&255)/255,d$G=(d$E>>8&255)/255,d$H=(255&d$E)/255,d$I=d$C.length/2,d$J=d$d,d$K=d$c/2;d$k=d$C[0],d$l=d$C[1],d$r=d$k-(d$m=d$C[2]),d$q=(d$q=-(d$l-(d$n=d$C[3])))/(d$B=Math.sqrt(d$q*d$q+d$r*d$r))*d$K,d$r=d$r/d$B*d$K,d$D.push(d$k-d$q+this.x,d$l-d$r+this.y,d$F,d$G,d$H,d$k+d$q+this.x,d$l+d$r+this.y,d$F,d$G,d$H);for(var d$L=1;d$L<d$I-1;d$L++)d$k=d$C[2*(d$L-1)],d$l=d$C[2*(d$L-1)+1],d$m=d$C[2*d$L],d$n=d$C[2*d$L+1],d$o=d$C[2*(d$L+1)],d$p=d$C[2*(d$L+1)+1],d$r=d$k-d$m,d$t=d$m-d$o,d$w=(-(d$q=(d$q=-(d$l-d$n))/(d$B=Math.sqrt(d$q*d$q+d$r*d$r))*d$K)+d$k)*(-(d$r=d$r/d$B*d$K)+d$n)-(-d$q+d$m)*(-d$r+d$l),d$z=(-(d$s=(d$s=-(d$n-d$p))/(d$B=Math.sqrt(d$s*d$s+d$t*d$t))*d$K)+d$o)*(-(d$t=d$t/d$B*d$K)+d$n)-(-d$s+d$m)*(-d$t+d$p),d$A=(d$u=-d$r+d$l-(-d$r+d$n))*(d$y=-d$s+d$m-(-d$s+d$o))-(d$x=-d$t+d$p-(-d$t+d$n))*(d$v=-d$q+d$m-(-d$q+d$k)),Math.abs(d$A)<.1?(d$A+=10.1,d$D.push(d$m-d$q+this.x,d$n-d$r+this.y,d$F,d$G,d$H,d$m+d$q+this.x,d$n+d$r+this.y,d$F,d$G,d$H)):(((d$i=(d$v*d$z-d$y*d$w)/d$A)-d$m)*(d$i-d$m)+((d$j=(d$x*d$w-d$u*d$z)/d$A)-d$n)+(d$j-d$n),d$D.push(d$i+this.x,d$j+this.y,d$F,d$G,d$H,d$m-(d$i-d$m)+this.x,d$n-(d$j-d$n)+this.y,d$F,d$G,d$H));d$k=d$C[d$C.length-4],d$l=d$C[d$C.length-3],d$r=d$k-(d$m=d$C[d$C.length-2]),d$q=(d$q=-(d$l-(d$n=d$C[d$C.length-1])))/(d$B=Math.sqrt(d$q*d$q+d$r*d$r))*d$K,d$r=d$r/d$B*d$K,d$D.push(d$m-d$q+this.x,d$n-d$r+this.y,d$F,d$G,d$H,d$m+d$q+this.x,d$n+d$r+this.y,d$F,d$G,d$H);var d$M=d$f;for(d$L=1;d$L<d$M;d$L++)d$b.push(d$J+2*(d$L-1),d$J+2*(d$L-1)+1,d$J+2*d$L+1,d$J+2*d$L+1,d$J+2*d$L,d$J+2*(d$L-1));return d$D;},d$b.createLine=function(d$a,d$b,d$c,d$d){var d$e=d$a.concat(),d$f=d$a,d$i=this.borderColor,d$j=(d$i>>16&255)/255,d$k=(d$i>>8&255)/255,d$l=(255&d$i)/255;d$e.splice(0,5);var d$m,d$n,d$o,d$p,d$q,d$r,d$s,d$t,d$u,d$v,d$w,d$x,d$y,d$z,d$A,d$B,d$C,d$D,d$E,d$F,d$G=d$e.length/5,d$H=d$d,d$I=d$c/2;d$o=d$e[0],d$p=d$e[1],d$v=d$o-(d$q=d$e[5]),d$u=(d$u=-(d$p-(d$r=d$e[6])))/(d$F=Math.sqrt(d$u*d$u+d$v*d$v))*d$I,d$v=d$v/d$F*d$I,d$f.push(d$o-d$u,d$p-d$v,d$j,d$k,d$l,d$o+d$u,d$p+d$v,d$j,d$k,d$l);for(var d$J=1;d$J<d$G-1;d$J++)d$o=d$e[5*(d$J-1)],d$p=d$e[5*(d$J-1)+1],d$q=d$e[5*d$J],d$r=d$e[5*d$J+1],d$s=d$e[5*(d$J+1)],d$t=d$e[5*(d$J+1)+1],d$v=d$o-d$q,d$x=d$q-d$s,d$A=(-(d$u=(d$u=-(d$p-d$r))/(d$F=Math.sqrt(d$u*d$u+d$v*d$v))*d$I)+d$o)*(-(d$v=d$v/d$F*d$I)+d$r)-(-d$u+d$q)*(-d$v+d$p),d$D=(-(d$w=(d$w=-(d$r-d$t))/(d$F=Math.sqrt(d$w*d$w+d$x*d$x))*d$I)+d$s)*(-(d$x=d$x/d$F*d$I)+d$r)-(-d$w+d$q)*(-d$x+d$t),d$E=(d$y=-d$v+d$p-(-d$v+d$r))*(d$C=-d$w+d$q-(-d$w+d$s))-(d$B=-d$x+d$t-(-d$x+d$r))*(d$z=-d$u+d$q-(-d$u+d$o)),Math.abs(d$E)<.1?(d$E+=10.1,d$f.push(d$q-d$u,d$r-d$v,d$j,d$k,d$l,d$q+d$u,d$r+d$v,d$j,d$k,d$l)):(((d$m=(d$z*d$D-d$C*d$A)/d$E)-d$q)*(d$m-d$q)+((d$n=(d$B*d$A-d$y*d$D)/d$E)-d$r)+(d$n-d$r),d$f.push(d$m,d$n,d$j,d$k,d$l,d$q-(d$m-d$q),d$r-(d$n-d$r),d$j,d$k,d$l));d$o=d$e[d$e.length-10],d$p=d$e[d$e.length-9],d$v=d$o-(d$q=d$e[d$e.length-5]),d$u=(d$u=-(d$p-(d$r=d$e[d$e.length-4])))/(d$F=Math.sqrt(d$u*d$u+d$v*d$v))*d$I,d$v=d$v/d$F*d$I,d$f.push(d$q-d$u,d$r-d$v,d$j,d$k,d$l,d$q+d$u,d$r+d$v,d$j,d$k,d$l);var d$K=this.edges+1;for(d$J=1;d$J<d$K;d$J++)d$b.push(d$H+2*(d$J-1),d$H+2*(d$J-1)+1,d$H+2*d$J+1,d$H+2*d$J+1,d$H+2*d$J,d$H+2*(d$J-1));return d$f;},d$b.createLoopLine=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=d$a.concat(),d$j=d$e||d$a,d$k=this.borderColor,d$l=(d$k>>16&255)/255,d$m=(d$k>>8&255)/255,d$n=(255&d$k)/255;d$i.splice(0,5);var d$o=[d$i[0],d$i[1]],d$p=[d$i[d$i.length-5],d$i[d$i.length-4]],d$q=d$p[0]+.5*(d$o[0]-d$p[0]),d$r=d$p[1]+.5*(d$o[1]-d$p[1]);d$i.unshift(d$q,d$r,0,0,0),d$i.push(d$q,d$r,0,0,0);var d$s,d$t,d$u,d$v,d$w,d$x,d$y,d$z,d$A,d$B,d$C,d$D,d$E,d$F,d$G,d$H,d$I,d$J,d$K,d$L,d$M=d$i.length/5,d$N=d$d,d$O=d$c/2;d$u=d$i[0],d$v=d$i[1],d$B=d$u-(d$w=d$i[5]),d$A=(d$A=-(d$v-(d$x=d$i[6])))/(d$L=Math.sqrt(d$A*d$A+d$B*d$B))*d$O,d$B=d$B/d$L*d$O,d$j.push(d$u-d$A,d$v-d$B,d$l,d$m,d$n,d$u+d$A,d$v+d$B,d$l,d$m,d$n);for(var d$P=1;d$P<d$M-1;d$P++)d$u=d$i[5*(d$P-1)],d$v=d$i[5*(d$P-1)+1],d$w=d$i[5*d$P],d$x=d$i[5*d$P+1],d$y=d$i[5*(d$P+1)],d$z=d$i[5*(d$P+1)+1],d$B=d$u-d$w,d$D=d$w-d$y,d$G=(-(d$A=(d$A=-(d$v-d$x))/(d$L=Math.sqrt(d$A*d$A+d$B*d$B))*d$O)+d$u)*(-(d$B=d$B/d$L*d$O)+d$x)-(-d$A+d$w)*(-d$B+d$v),d$J=(-(d$C=(d$C=-(d$x-d$z))/(d$L=Math.sqrt(d$C*d$C+d$D*d$D))*d$O)+d$y)*(-(d$D=d$D/d$L*d$O)+d$x)-(-d$C+d$w)*(-d$D+d$z),d$K=(d$E=-d$B+d$v-(-d$B+d$x))*(d$I=-d$C+d$w-(-d$C+d$y))-(d$H=-d$D+d$z-(-d$D+d$x))*(d$F=-d$A+d$w-(-d$A+d$u)),Math.abs(d$K)<.1?(d$K+=10.1,d$j.push(d$w-d$A,d$x-d$B,d$l,d$m,d$n,d$w+d$A,d$x+d$B,d$l,d$m,d$n)):(((d$s=(d$F*d$J-d$I*d$G)/d$K)-d$w)*(d$s-d$w)+((d$t=(d$H*d$G-d$E*d$J)/d$K)-d$x)+(d$t-d$x),d$j.push(d$s,d$t,d$l,d$m,d$n,d$w-(d$s-d$w),d$x-(d$t-d$x),d$l,d$m,d$n));d$f&&(d$b=d$f);var d$Q=this.edges+1;for(d$P=1;d$P<d$Q;d$P++)d$b.push(d$N+2*(d$P-1),d$N+2*(d$P-1)+1,d$N+2*d$P+1,d$N+2*d$P+1,d$N+2*d$P,d$N+2*(d$P-1));return d$b.push(d$N+2*(d$P-1),d$N+2*(d$P-1)+1,d$N+1,d$N+1,d$N,d$N+2*(d$P-1)),d$j;},d$a;}(),d$da=function(){function d$r(){}return d$o(d$r,"laya.webgl.shapes.Earcut"),d$r.earcut=function(d$a,d$b,d$c){d$c=d$c||2;var d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m=d$b&&d$b.length,d$n=d$m?d$b[0]*d$c:d$a.length,d$o=d$r.linkedList(d$a,0,d$n,d$c,!0),d$p=[];if(!d$o)return d$p;if(d$m&&(d$o=d$r.eliminateHoles(d$a,d$b,d$o,d$c)),d$a.length>80*d$c){d$d=d$f=d$a[0],d$e=d$i=d$a[1];for(var d$q=d$c;d$q<d$n;d$q+=d$c)(d$j=d$a[d$q])<d$d&&(d$d=d$j),(d$k=d$a[d$q+1])<d$e&&(d$e=d$k),d$f<d$j&&(d$f=d$j),d$i<d$k&&(d$i=d$k);d$l=0!==(d$l=Math.max(d$f-d$d,d$i-d$e))?1/d$l:0;}return d$r.earcutLinked(d$o,d$p,d$c,d$d,d$e,d$l),d$p;},d$r.linkedList=function(d$a,d$b,d$c,d$d,d$e){var d$f,d$i;if(d$e===0<d$r.signedArea(d$a,d$b,d$c,d$d))for(d$f=d$b;d$f<d$c;d$f+=d$d)d$i=d$r.insertNode(d$f,d$a[d$f],d$a[d$f+1],d$i);else for(d$f=d$c-d$d;d$b<=d$f;d$f-=d$d)d$i=d$r.insertNode(d$f,d$a[d$f],d$a[d$f+1],d$i);return d$i&&d$r.equals(d$i,d$i.next)&&(d$r.removeNode(d$i),d$i=d$i.next),d$i;},d$r.filterPoints=function(d$a,d$b){if(!d$a)return d$a;d$b||(d$b=d$a);var d$c,d$d=d$a;do{if(d$c=!1,d$d.steiner||!d$r.equals(d$d,d$d.next)&&0!==d$r.area(d$d.prev,d$d,d$d.next))d$d=d$d.next;else{if(d$r.removeNode(d$d),(d$d=d$b=d$d.prev)===d$d.next)break;d$c=!0;}}while(d$c||d$d!==d$b);return d$b;},d$r.earcutLinked=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){if(d$a){!d$i&&d$f&&d$r.indexCurve(d$a,d$d,d$e,d$f);for(var d$j,d$k,d$l=d$a;d$a.prev!==d$a.next;)if(d$j=d$a.prev,d$k=d$a.next,d$f?d$r.isEarHashed(d$a,d$d,d$e,d$f):d$r.isEar(d$a))d$b.push(d$j.i/d$c),d$b.push(d$a.i/d$c),d$b.push(d$k.i/d$c),d$r.removeNode(d$a),d$a=d$k.next,d$l=d$k.next;else if((d$a=d$k)===d$l){d$i?1===d$i?(d$a=d$r.cureLocalIntersections(d$a,d$b,d$c),d$r.earcutLinked(d$a,d$b,d$c,d$d,d$e,d$f,2)):2===d$i&&d$r.splitEarcut(d$a,d$b,d$c,d$d,d$e,d$f):d$r.earcutLinked(d$r.filterPoints(d$a,null),d$b,d$c,d$d,d$e,d$f,1);break;}}},d$r.isEar=function(d$a){var d$b=d$a.prev,d$c=d$a,d$d=d$a.next;if(0<=d$r.area(d$b,d$c,d$d))return!1;for(var d$e=d$a.next.next;d$e!==d$a.prev;){if(d$r.pointInTriangle(d$b.x,d$b.y,d$c.x,d$c.y,d$d.x,d$d.y,d$e.x,d$e.y)&&0<=d$r.area(d$e.prev,d$e,d$e.next))return!1;d$e=d$e.next;}return!0;},d$r.isEarHashed=function(d$a,d$b,d$c,d$d){var d$e=d$a.prev,d$f=d$a,d$i=d$a.next;if(0<=d$r.area(d$e,d$f,d$i))return!1;for(var d$j=d$e.x<d$f.x?d$e.x<d$i.x?d$e.x:d$i.x:d$f.x<d$i.x?d$f.x:d$i.x,d$k=d$e.y<d$f.y?d$e.y<d$i.y?d$e.y:d$i.y:d$f.y<d$i.y?d$f.y:d$i.y,d$l=d$e.x>d$f.x?d$e.x>d$i.x?d$e.x:d$i.x:d$f.x>d$i.x?d$f.x:d$i.x,d$m=d$e.y>d$f.y?d$e.y>d$i.y?d$e.y:d$i.y:d$f.y>d$i.y?d$f.y:d$i.y,d$n=d$r.zOrder(d$j,d$k,d$b,d$c,d$d),d$o=d$r.zOrder(d$l,d$m,d$b,d$c,d$d),d$p=d$a.nextZ;d$p&&d$p.z<=d$o;){if(d$p!==d$a.prev&&d$p!==d$a.next&&d$r.pointInTriangle(d$e.x,d$e.y,d$f.x,d$f.y,d$i.x,d$i.y,d$p.x,d$p.y)&&0<=d$r.area(d$p.prev,d$p,d$p.next))return!1;d$p=d$p.nextZ;}for(d$p=d$a.prevZ;d$p&&d$p.z>=d$n;){if(d$p!==d$a.prev&&d$p!==d$a.next&&d$r.pointInTriangle(d$e.x,d$e.y,d$f.x,d$f.y,d$i.x,d$i.y,d$p.x,d$p.y)&&0<=d$r.area(d$p.prev,d$p,d$p.next))return!1;d$p=d$p.prevZ;}return!0;},d$r.cureLocalIntersections=function(d$a,d$b,d$c){var d$d=d$a;do{var d$e=d$d.prev,d$f=d$d.next.next;!d$r.equals(d$e,d$f)&&d$r.intersects(d$e,d$d,d$d.next,d$f)&&d$r.locallyInside(d$e,d$f)&&d$r.locallyInside(d$f,d$e)&&(d$b.push(d$e.i/d$c),d$b.push(d$d.i/d$c),d$b.push(d$f.i/d$c),d$r.removeNode(d$d),d$r.removeNode(d$d.next),d$d=d$a=d$f),d$d=d$d.next;}while(d$d!==d$a);return d$d;},d$r.splitEarcut=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=d$a;do{for(var d$j=d$i.next.next;d$j!==d$i.prev;){if(d$i.i!==d$j.i&&d$r.isValidDiagonal(d$i,d$j)){var d$k=d$r.splitPolygon(d$i,d$j);return d$i=d$r.filterPoints(d$i,d$i.next),d$k=d$r.filterPoints(d$k,d$k.next),d$r.earcutLinked(d$i,d$b,d$c,d$d,d$e,d$f),void d$r.earcutLinked(d$k,d$b,d$c,d$d,d$e,d$f);}d$j=d$j.next;}d$i=d$i.next;}while(d$i!==d$a);},d$r.eliminateHoles=function(d$a,d$b,d$c,d$d){var d$e,d$f,d$i,d$j,d$k,d$l=[];for(d$e=0,d$f=d$b.length;d$e<d$f;d$e++)d$i=d$b[d$e]*d$d,d$j=d$e<d$f-1?d$b[d$e+1]*d$d:d$a.length,(d$k=d$r.linkedList(d$a,d$i,d$j,d$d,!1))===d$k.next&&(d$k.steiner=!0),d$l.push(d$r.getLeftmost(d$k));for(d$l.sort(d$r.compareX),d$e=0;d$e<d$l.length;d$e++)d$r.eliminateHole(d$l[d$e],d$c),d$c=d$r.filterPoints(d$c,d$c.next);return d$c;},d$r.compareX=function(d$a,d$b){return d$a.x-d$b.x;},d$r.eliminateHole=function(d$a,d$b){if(d$b=d$r.findHoleBridge(d$a,d$b)){var d$c=d$r.splitPolygon(d$b,d$a);d$r.filterPoints(d$c,d$c.next);}},d$r.findHoleBridge=function(d$a,d$b){var d$c,d$d=d$b,d$e=d$a.x,d$f=d$a.y,d$i=-1/0;do{if(d$f<=d$d.y&&d$f>=d$d.next.y&&d$d.next.y!==d$d.y){var d$j=d$d.x+(d$f-d$d.y)*(d$d.next.x-d$d.x)/(d$d.next.y-d$d.y);if(d$j<=d$e&&d$i<d$j){if((d$i=d$j)===d$e){if(d$f===d$d.y)return d$d;if(d$f===d$d.next.y)return d$d.next;}d$c=d$d.x<d$d.next.x?d$d:d$d.next;}}d$d=d$d.next;}while(d$d!==d$b);if(!d$c)return null;if(d$e===d$i)return d$c.prev;var d$k,d$l=d$c,d$m=d$c.x,d$n=d$c.y,d$o=1/0;for(d$d=d$c.next;d$d!==d$l;)d$e>=d$d.x&&d$d.x>=d$m&&d$e!==d$d.x&&d$r.pointInTriangle(d$f<d$n?d$e:d$i,d$f,d$m,d$n,d$f<d$n?d$i:d$e,d$f,d$d.x,d$d.y)&&((d$k=Math.abs(d$f-d$d.y)/(d$e-d$d.x))<d$o||d$k===d$o&&d$d.x>d$c.x)&&d$r.locallyInside(d$d,d$a)&&(d$c=d$d,d$o=d$k),d$d=d$d.next;return d$c;},d$r.indexCurve=function(d$a,d$b,d$c,d$d){for(var d$e=d$a;null===d$e.z&&(d$e.z=d$r.zOrder(d$e.x,d$e.y,d$b,d$c,d$d)),d$e.prevZ=d$e.prev,d$e.nextZ=d$e.next,(d$e=d$e.next)!==d$a;);d$e.prevZ.nextZ=null,d$e.prevZ=null,d$r.sortLinked(d$e);},d$r.sortLinked=function(d$a){var d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l=1;do{for(d$c=d$a,d$f=d$a=null,d$i=0;d$c;){for(d$i++,d$d=d$c,d$b=d$j=0;d$b<d$l&&(d$j++,d$d=d$d.nextZ);d$b++);for(d$k=d$l;0<d$j||0<d$k&&d$d;)0!==d$j&&(0===d$k||!d$d||d$c.z<=d$d.z)?(d$c=(d$e=d$c).nextZ,d$j--):(d$d=(d$e=d$d).nextZ,d$k--),d$f?d$f.nextZ=d$e:d$a=d$e,d$e.prevZ=d$f,d$f=d$e;d$c=d$d;}d$f.nextZ=null,d$l*=2;}while(1<d$i);return d$a;},d$r.zOrder=function(d$a,d$b,d$c,d$d,d$e){return(d$a=1431655765&((d$a=858993459&((d$a=252645135&((d$a=16711935&((d$a=32767*(d$a-d$c)*d$e)|d$a<<8))|d$a<<4))|d$a<<2))|d$a<<1))|(d$b=1431655765&((d$b=858993459&((d$b=252645135&((d$b=16711935&((d$b=32767*(d$b-d$d)*d$e)|d$b<<8))|d$b<<4))|d$b<<2))|d$b<<1))<<1;},d$r.getLeftmost=function(d$a){for(var d$b=d$a,d$c=d$a;d$b.x<d$c.x&&(d$c=d$b),(d$b=d$b.next)!==d$a;);return d$c;},d$r.pointInTriangle=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){return 0<=(d$e-d$i)*(d$b-d$j)-(d$a-d$i)*(d$f-d$j)&&0<=(d$a-d$i)*(d$d-d$j)-(d$c-d$i)*(d$b-d$j)&&0<=(d$c-d$i)*(d$f-d$j)-(d$e-d$i)*(d$d-d$j);},d$r.isValidDiagonal=function(d$a,d$b){return d$a.next.i!==d$b.i&&d$a.prev.i!==d$b.i&&!d$r.intersectsPolygon(d$a,d$b)&&d$r.locallyInside(d$a,d$b)&&d$r.locallyInside(d$b,d$a)&&d$r.middleInside(d$a,d$b);},d$r.area=function(d$a,d$b,d$c){return(d$b.y-d$a.y)*(d$c.x-d$b.x)-(d$b.x-d$a.x)*(d$c.y-d$b.y);},d$r.equals=function(d$a,d$b){return d$a.x===d$b.x&&d$a.y===d$b.y;},d$r.intersects=function(d$a,d$b,d$c,d$d){return!!(d$r.equals(d$a,d$b)&&d$r.equals(d$c,d$d)||d$r.equals(d$a,d$d)&&d$r.equals(d$c,d$b))||0<d$r.area(d$a,d$b,d$c)!=0<d$r.area(d$a,d$b,d$d)&&0<d$r.area(d$c,d$d,d$a)!=0<d$r.area(d$c,d$d,d$b);},d$r.intersectsPolygon=function(d$a,d$b){var d$c=d$a;do{if(d$c.i!==d$a.i&&d$c.next.i!==d$a.i&&d$c.i!==d$b.i&&d$c.next.i!==d$b.i&&d$r.intersects(d$c,d$c.next,d$a,d$b))return!0;d$c=d$c.next;}while(d$c!==d$a);return!1;},d$r.locallyInside=function(d$a,d$b){return d$r.area(d$a.prev,d$a,d$a.next)<0?0<=d$r.area(d$a,d$b,d$a.next)&&0<=d$r.area(d$a,d$a.prev,d$b):d$r.area(d$a,d$b,d$a.prev)<0||d$r.area(d$a,d$a.next,d$b)<0;},d$r.middleInside=function(d$a,d$b){for(var d$c=d$a,d$d=!1,d$e=(d$a.x+d$b.x)/2,d$f=(d$a.y+d$b.y)/2;d$c.y>d$f!=d$c.next.y>d$f&&d$c.next.y!==d$c.y&&d$e<(d$c.next.x-d$c.x)*(d$f-d$c.y)/(d$c.next.y-d$c.y)+d$c.x&&(d$d=!d$d),(d$c=d$c.next)!==d$a;);return d$d;},d$r.splitPolygon=function(d$a,d$b){var d$c=new d$ea(d$a.i,d$a.x,d$a.y),d$d=new d$ea(d$b.i,d$b.x,d$b.y),d$e=d$a.next,d$f=d$b.prev;return(d$a.next=d$b).prev=d$a,(d$c.next=d$e).prev=d$c,(d$d.next=d$c).prev=d$d,(d$f.next=d$d).prev=d$f,d$d;},d$r.insertNode=function(d$a,d$b,d$c,d$d){var d$e=new d$ea(d$a,d$b,d$c);return d$d?(d$e.next=d$d.next,(d$e.prev=d$d).next.prev=d$e,d$d.next=d$e):(d$e.prev=d$e).next=d$e,d$e;},d$r.removeNode=function(d$a){d$a.next.prev=d$a.prev,d$a.prev.next=d$a.next,d$a.prevZ&&(d$a.prevZ.nextZ=d$a.nextZ),d$a.nextZ&&(d$a.nextZ.prevZ=d$a.prevZ);},d$r.signedArea=function(d$a,d$b,d$c,d$d){for(var d$e=0,d$f=d$b,d$i=d$c-d$d;d$f<d$c;d$f+=d$d)d$e+=(d$a[d$i]-d$a[d$f])*(d$a[d$f+1]+d$a[d$i+1]),d$i=d$f;return d$e;},d$r;}(),d$ea=function(){function d$a(d$a,d$b,d$c){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=d$a,this.x=d$b,this.y=d$c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1;}return d$o(d$a,"laya.webgl.shapes.EarcutNode"),d$a;}(),d$fa=(function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this.lineWidth=d$a,this.lineColor=d$b,this.lineAlpha=d$c,this.fillColor=d$d,this.fillAlpha=d$e,this.shape=d$i,this.fill=d$f;}d$o(d$a,"laya.webgl.shapes.GeometryData");var d$b=d$a.prototype;d$b.clone=function(){return new d$a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape);},d$b.getIndexData=function(){return null;},d$b.getVertexData=function(){return null;},d$b.destroy=function(){this.shape=null;};}(),function(){function d$a(d$a){if(d$a instanceof Float32Array)this.points=d$a;else if(d$a instanceof Array){d$a.length;this.points=new Float32Array(d$a);}}d$o(d$a,"laya.webgl.shapes.Vertex");var d$b=d$a.prototype;d$y.imps(d$b,{"laya.webgl.shapes.IShape":!0}),d$b.getData=function(d$a,d$b,d$c){},d$b.needUpdate=function(d$a){return!1;},d$b.rebuild=function(d$a){},d$b.setMatrix=function(d$a){};}(),function(){function d$k(d$a){void 0===d$a&&(d$a=1e4),this._renderType=d$a;}d$o(d$k,"laya.webgl.submit.Submit");var d$a=d$k.prototype;return d$y.imps(d$a,{"laya.webgl.submit.ISubmit":!0}),d$a.releaseRender=function(){var d$a=d$k._cache;(d$a[d$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null;},d$a.getRenderType=function(){return this._renderType;},d$a.renderSubmit=function(){if(0===this._numEle)return 1;var d$a=this.shaderValue.textureHost;if(d$a){var d$b=d$a.source;if(!d$a.bitmap||!d$b)return 1;this.shaderValue.texture=d$b,d$a.alphaTexture&&d$a.alphaTexture.source&&(this.shaderValue.texture1=d$a.alphaTexture.source);}this._vb.bind_upload(this._ib);var d$c=d$wa.mainContext;return this.shaderValue.upload(),d$S.activeBlendFunction!==this._blendFn&&(d$c.enable(3042),this._blendFn(d$c),d$S.activeBlendFunction=this._blendFn),d$G.drawCall++,d$G.trianglesFaces+=this._numEle/3,d$c.drawElements(4,this._numEle,5123,this._startIdx),1;},d$k.__init__=function(){var d$a=d$k.RENDERBASE=new d$k(-1);d$a.shaderValue=new d$Aa(0,0),d$a.shaderValue.ALPHA=-1234;},d$k.createSubmit=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$k._cache._length?d$k._cache[--d$k._cache._length]:new d$k();null==d$c&&((d$c=d$f._selfVb||(d$f._selfVb=d$ha.create(-1))).clear(),d$d=0),d$f._ib=d$b,d$f._vb=d$c,d$f._startIdx=d$d*d$ra.BYTES_PIDX,d$f._numEle=0;var d$i=d$a._nBlendType;d$f._blendFn=d$a._targets?d$S.targetFns[d$i]:d$S.fns[d$i],d$f.shaderValue=d$e,d$f.shaderValue.setValue(d$a._shader2D);var d$j=d$a._shader2D.filters;return d$j&&d$f.shaderValue.setFilters(d$j),d$f;},d$k.createShape=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=d$k._cache._length?d$k._cache[--d$k._cache._length]:new d$k();d$i._ib=d$b,d$i._vb=d$c,d$i._numEle=d$d,d$i._startIdx=d$e,d$i.shaderValue=d$f,d$i.shaderValue.setValue(d$a._shader2D);var d$j=d$a._nBlendType;return d$i._blendFn=d$a._targets?d$S.targetFns[d$j]:d$S.fns[d$j],d$i;},d$k.TYPE_2D=1e4,d$k.TYPE_CANVAS=10003,d$k.TYPE_CMDSETRT=10004,d$k.TYPE_CUSTOM=10005,d$k.TYPE_BLURRT=10006,d$k.TYPE_CMDDESTORYPRERT=10007,d$k.TYPE_DISABLESTENCIL=10008,d$k.TYPE_OTHERIBVB=10009,d$k.TYPE_PRIMITIVE=10010,d$k.TYPE_RT=10011,d$k.TYPE_BLUR_RT=10012,d$k.TYPE_TARGET=10013,d$k.TYPE_CHANGE_VALUE=10014,d$k.TYPE_SHAPE=10015,d$k.TYPE_TEXTURE=10016,d$k.TYPE_FILLTEXTURE=10017,d$k.RENDERBASE=null,d$k._cache=((d$k._cache=[])._length=0,d$k._cache),d$k;}()),d$ia=function(){function d$d(){this.fun=null,this.args=null;}d$o(d$d,"laya.webgl.submit.SubmitCMD");var d$a=d$d.prototype;return d$y.imps(d$a,{"laya.webgl.submit.ISubmit":!0}),d$a.renderSubmit=function(){return this.fun.apply(null,this.args),1;},d$a.getRenderType=function(){return 0;},d$a.releaseRender=function(){var d$a=d$d._cache;d$a[d$a._length++]=this;},d$d.create=function(d$a,d$b){var d$c=d$d._cache._length?d$d._cache[--d$d._cache._length]:new d$d();return d$c.fun=d$b,d$c.args=d$a,d$c;},d$d._cache=((d$d._cache=[])._length=0,d$d._cache),d$d;}(),d$ja=function(){function d$b(){this.variables={};}d$o(d$b,"laya.webgl.submit.SubmitCMDScope");var d$a=d$b.prototype;return d$a.getValue=function(d$a){return this.variables[d$a];},d$a.addValue=function(d$a,d$b){return this.variables[d$a]=d$b;},d$a.setValue=function(d$a,d$b){return this.variables.hasOwnProperty(d$a)?this.variables[d$a]=d$b:null;},d$a.clear=function(){for(var d$a in this.variables)delete this.variables[d$a];},d$a.recycle=function(){this.clear(),d$b.POOL.push(this);},d$b.create=function(){var d$a=d$b.POOL.pop();return d$a||(d$a=new d$b()),d$a;},d$b.POOL=[],d$b;}(),d$ka=function(){function d$n(){this.offset=0,this.startIndex=0,this._mat=d$B.create();}d$o(d$n,"laya.webgl.submit.SubmitOtherIBVB");var d$a=d$n.prototype;return d$y.imps(d$a,{"laya.webgl.submit.ISubmit":!0}),d$a.releaseRender=function(){var d$a=d$n._cache;(d$a[d$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null;},d$a.getRenderType=function(){return 10009;},d$a.renderSubmit=function(){var d$a=this._shaderValue.textureHost;if(d$a){var d$b=d$a.source;if(!d$a.bitmap||!d$b)return 1;this._shaderValue.texture=d$b;}this._vb.bind_upload(this._ib);var d$c=d$ua.worldMatrix4,d$d=d$B.TEMP;d$B.mulPre(this._mat,d$c[0],d$c[1],d$c[4],d$c[5],d$c[12],d$c[13],d$d);var d$e=d$ua.worldMatrix4=d$n.tempMatrix4;d$e[0]=d$d.a,d$e[1]=d$d.b,d$e[4]=d$d.c,d$e[5]=d$d.d,d$e[12]=d$d.tx,d$e[13]=d$d.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var d$f=d$wa.mainContext;return d$S.activeBlendFunction!==this._blendFn&&(d$f.enable(3042),this._blendFn(d$f),d$S.activeBlendFunction=this._blendFn),d$G.drawCall++,d$G.trianglesFaces+=this._numEle/3,d$f.drawElements(4,this._numEle,5123,this.startIndex),d$ua.worldMatrix4=d$c,d$La.activeShader=null,1;},d$n.create=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){void 0===d$k&&(d$k=0);var d$l=d$n._cache._length?d$n._cache[--d$n._cache._length]:new d$n();d$l._ib=d$c,d$l._vb=d$b,d$l._numEle=d$d,d$l._shader=d$e,d$l._shaderValue=d$f;var d$m=d$a._nBlendType;switch(d$l._blendFn=d$a._targets?d$S.targetFns[d$m]:d$S.fns[d$m],d$k){case 0:d$l.offset=0,d$l.startIndex=d$j/(d$ra.BYTES_PE*d$b.vertexStride)*1.5,d$l.startIndex*=d$ra.BYTES_PIDX;break;case 1:d$l.startIndex=d$i,d$l.offset=d$j;}return d$l;},d$n._cache=((d$n._cache=[])._length=0,d$n._cache),d$n.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d$n;}(),d$la=function(){function d$c(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new d$D(),this.screenRect=new d$D();}d$o(d$c,"laya.webgl.submit.SubmitScissor");var d$a=d$c.prototype;return d$y.imps(d$a,{"laya.webgl.submit.ISubmit":!0}),d$a._scissor=function(d$a,d$b,d$c,d$d){var d$e=d$ua.worldMatrix4,d$f=d$e[0],d$i=d$e[5],d$j=d$e[12],d$k=d$e[13];if(d$d*=d$i,(d$c*=d$f)<1||d$d<1)return!1;var d$l=(d$a=d$a*d$f+d$j)+d$c,d$m=(d$b=d$b*d$i+d$k)+d$d;d$a<0&&(d$c=d$l-(d$a=0)),d$b<0&&(d$d=d$m-(d$b=0));var d$n=d$ua.worldClipRect;if(d$a=Math.max(d$a,d$n.x),d$b=Math.max(d$b,d$n.y),d$c=Math.min(d$l,d$n.right)-d$a,d$d=Math.min(d$m,d$n.bottom)-d$b,d$c<1||d$d<1)return!1;var d$o=d$ua.worldScissorTest;return this.screenRect.copyFrom(d$n),d$n.x=d$a,d$n.y=d$b,d$n.width=d$c,d$n.height=d$d,d$ua.worldScissorTest=!0,d$b=d$ua.height-d$b-d$d,d$wa.mainContext.scissor(d$a,d$b,d$c,d$d),d$wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),d$o?(d$b=d$ua.height-this.screenRect.y-this.screenRect.height,d$wa.mainContext.scissor(this.screenRect.x,d$b,this.screenRect.width,this.screenRect.height),d$wa.mainContext.enable(3089)):(d$wa.mainContext.disable(3089),d$ua.worldScissorTest=!1),d$n.copyFrom(this.screenRect),!0;},d$a._scissorWithTagart=function(d$a,d$b,d$c,d$d){if(d$c<1||d$d<1)return!1;var d$e=d$a+d$c,d$f=d$b+d$d;d$a<0&&(d$c=d$e-(d$a=0)),d$b<0&&(d$d=d$f-(d$b=0));var d$i=d$ua.worldClipRect;if(d$a=Math.max(d$a,d$i.x),d$b=Math.max(d$b,d$i.y),d$c=Math.min(d$e,d$i.right)-d$a,d$d=Math.min(d$f,d$i.bottom)-d$b,d$c<1||d$d<1)return!1;var d$j=d$ua.worldScissorTest;return this.screenRect.copyFrom(d$i),d$ua.worldScissorTest=!0,d$i.x=d$a,d$i.y=d$b,d$i.width=d$c,d$i.height=d$d,d$b=d$ua.height-d$b-d$d,d$wa.mainContext.scissor(d$a,d$b,d$c,d$d),d$wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),d$j?(d$b=d$ua.height-this.screenRect.y-this.screenRect.height,d$wa.mainContext.scissor(this.screenRect.x,d$b,this.screenRect.width,this.screenRect.height),d$wa.mainContext.enable(3089)):(d$wa.mainContext.disable(3089),d$ua.worldScissorTest=!1),d$i.copyFrom(this.screenRect),!0;},d$a.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1;},d$a.getRenderType=function(){return 0;},d$a.releaseRender=function(){var d$a=d$c._cache;(d$a[d$a._length++]=this).context=null;},d$c.create=function(d$a){var d$b=d$c._cache._length?d$c._cache[--d$c._cache._length]:new d$c();return d$b.context=d$a,d$b;},d$c._cache=((d$c._cache=[])._length=0,d$c._cache),d$c;}(),d$ma=function(){function d$k(){this.step=0,this.blendMode=null,this.level=0;}d$o(d$k,"laya.webgl.submit.SubmitStencil");var d$a=d$k.prototype;return d$y.imps(d$a,{"laya.webgl.submit.ISubmit":!0}),d$a.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8();}return 1;},d$a.getRenderType=function(){return 0;},d$a.releaseRender=function(){var d$a=d$k._cache;d$a[d$a._length++]=this;},d$a.do1=function(){var d$a=d$wa.mainContext;d$a.enable(2960),d$a.clear(1024),d$a.colorMask(!1,!1,!1,!1),d$a.stencilFunc(514,this.level,255),d$a.stencilOp(7680,7680,7682);},d$a.do2=function(){var d$a=d$wa.mainContext;d$a.stencilFunc(514,this.level+1,255),d$a.colorMask(!0,!0,!0,!0),d$a.stencilOp(7680,7680,7680);},d$a.do3=function(){var d$a=d$wa.mainContext;d$a.colorMask(!0,!0,!0,!0),d$a.stencilOp(7680,7680,7680),d$a.clear(1024),d$a.disable(2960);},d$a.do4=function(){var d$a=d$wa.mainContext;0==this.level&&(d$a.enable(2960),d$a.clear(1024)),d$a.colorMask(!1,!1,!1,!1),d$a.stencilFunc(519,0,255),d$a.stencilOp(7680,7680,7682);},d$a.do5=function(){var d$a=d$wa.mainContext;d$a.stencilFunc(514,this.level,255),d$a.colorMask(!0,!0,!0,!0),d$a.stencilOp(7680,7680,7680);},d$a.do6=function(){var d$a=d$wa.mainContext;d$S.targetFns[d$S.TOINT[this.blendMode]](d$a);},d$a.do7=function(){var d$a=d$wa.mainContext;d$a.colorMask(!1,!1,!1,!1),d$a.stencilOp(7680,7680,7683);},d$a.do8=function(){var d$a=d$wa.mainContext;d$a.colorMask(!0,!0,!0,!0),d$a.stencilFunc(514,this.level,255),d$a.stencilOp(7680,7680,7680);},d$k.restore=function(d$a,d$b,d$c,d$d,d$e){var d$f;if((d$a._renderKey=0)<d$k._mask&&d$k._mask--,0==d$k._mask)d$f=laya.webgl.submit.SubmitStencil.create(3),d$a.addRenderObject(d$f),d$a._curSubmit=d$fa.RENDERBASE;else{d$f=laya.webgl.submit.SubmitStencil.create(7),d$a.addRenderObject(d$f);var d$i=d$a._vb;d$i._byteLength;if(d$sa.fillRectImgVb(d$i,null,d$b.x,d$b.y,d$b.width,d$b.height,d$K.DEF_UV,d$c,d$d,d$e,0,0)){d$a._shader2D.glTexture=null;var d$j=d$a._curSubmit=d$fa.createSubmit(d$a,d$a._ib,d$i,(d$i._byteLength-64)/32*3,d$Aa.create(2,0));d$j.shaderValue.ALPHA=1,d$a._submits[d$a._submits._length++]=d$j,d$a._curSubmit._numEle+=6,d$a._curSubmit=d$fa.RENDERBASE;}else alert("clipRect calc stencil rect error");d$f=laya.webgl.submit.SubmitStencil.create(8),d$a.addRenderObject(d$f);}},d$k.restore2=function(d$a,d$b){var d$c;(d$a._renderKey=0)<d$k._mask&&d$k._mask--,0==d$k._mask?(d$c=laya.webgl.submit.SubmitStencil.create(3),d$a.addRenderObject(d$c),d$a._curSubmit=d$fa.RENDERBASE):(d$c=laya.webgl.submit.SubmitStencil.create(7),d$a.addRenderObject(d$c),d$a._submits[d$a._submits._length++]=d$b,d$c=laya.webgl.submit.SubmitStencil.create(8),d$a.addRenderObject(d$c));},d$k.create=function(d$a){var d$b=d$k._cache._length?d$k._cache[--d$k._cache._length]:new d$k();return 5==(d$b.step=d$a)&&++d$k._mask,d$b.level=d$k._mask,d$b;},d$k._cache=((d$k._cache=[])._length=0,d$k._cache),d$k._mask=0,d$k;}(),d$na=function(){function d$j(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null;}d$o(d$j,"laya.webgl.submit.SubmitTarget");var d$a=d$j.prototype;return d$y.imps(d$a,{"laya.webgl.submit.ISubmit":!0}),d$a.renderSubmit=function(){this._vb.bind_upload(this._ib);var d$a=this.scope.getValue(this.proName);return d$a&&(this.shaderValue.texture=d$a.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[d$a.width,d$a.height]),this.shaderValue.upload(),this.blend(),d$G.drawCall++,d$G.trianglesFaces+=this._numEle/3,d$wa.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1;},d$a.blend=function(){if(d$S.activeBlendFunction!==d$S.fns[this.blendType]){var d$a=d$wa.mainContext;d$a.enable(3042),d$S.fns[this.blendType](d$a),d$S.activeBlendFunction=d$S.fns[this.blendType];}},d$a.getRenderType=function(){return 0;},d$a.releaseRender=function(){var d$a=d$j._cache;(d$a[d$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null;},d$j.create=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=d$j._cache._length?d$j._cache[--d$j._cache._length]:new d$j();return d$i._ib=d$b,d$i._vb=d$c,d$i.proName=d$f,d$i._startIdx=d$d*d$ra.BYTES_PIDX,d$i._numEle=0,d$i.blendType=d$a._nBlendType,d$i.shaderValue=d$e,d$i.shaderValue.setValue(d$a._shader2D),d$i;},d$j._cache=((d$j._cache=[])._length=0,d$j._cache),d$j;}(),d$oa=function(){function d$a(){this._sourceStr=null;}d$o(d$a,"laya.webgl.text.CharSegment");var d$b=d$a.prototype;return d$y.imps(d$b,{"laya.webgl.text.ICharSegment":!0}),d$b.textToSpit=function(d$a){this._sourceStr=d$a;},d$b.getChar=function(d$a){return this._sourceStr.charAt(d$a);},d$b.getCharCode=function(d$a){return this._sourceStr.charCodeAt(d$a);},d$b.length=function(){return this._sourceStr.length;},d$a;}(),d$pa=function(){var d$a;function d$G(){}return d$o(d$G,"laya.webgl.text.DrawText"),d$G.__init__=function(){d$G._charsTemp=new Array(),d$G._drawValue=new d$a(),d$G._charSeg=new d$oa();},d$G.customCharSeg=function(d$a){d$G._charSeg=d$a;},d$G.getChar=function(d$a,d$b,d$c){var d$d=d$Va.createOneChar(d$a,d$c);return-1!=d$b&&(d$G._charsCache[d$b]=d$d),d$d;},d$G._drawSlow=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$n,d$o,d$p,d$q){var d$r,d$s,d$t=d$G._drawValue.value(d$f,d$j,d$k,d$l,d$o,d$p,d$q),d$u=0,d$v=0,d$w=d$G._charsTemp,d$x=0,d$y=NaN;if(d$d)for(d$w.length=d$d.length,d$u=0,d$v=d$d.length;d$u<d$v;d$u++)(d$s=d$d[d$u])&&(d$y=d$s.charNum+d$t.txtID,d$w[d$u]=d$r=d$G._charsCache[d$y]||d$G.getChar(d$s.char,d$y,d$t),d$r.active());else{var d$z=d$c instanceof laya.utils.WordText?d$c.toString():d$c;if(d$J.CharacterCache){d$G._charSeg.textToSpit(d$z);var d$A=d$G._charSeg.length();for(d$u=0,d$v=d$w.length=d$A;d$u<d$v;d$u++)d$y=d$G._charSeg.getCharCode(d$u)+d$t.txtID,d$w[d$u]=d$r=d$G._charsCache[d$y]||d$G.getChar(d$G._charSeg.getChar(d$u),d$y,d$t),d$r.active(),d$x+=d$r.cw;}else d$w.length=0,(d$r=d$G.getChar(d$z,-1,d$t)).active(),d$x+=d$r.cw,d$w[0]=d$r;}var d$B=0;null!==d$i&&"left"!==d$i&&(d$B=-("center"==d$i?d$x/2:d$x));var d$C,d$D,d$E=NaN,d$F=0;if(d$d)for(d$u=0,d$v=d$w.length;d$u<d$v;d$u++)d$r=d$w[d$u],d$s=d$d[d$u],d$r&&d$s&&!d$r.isSpace&&(d$E=d$r.borderSize,d$C=d$r.texture,d$b._drawText(d$C,d$m+d$B+d$s.x*d$o-d$E,d$n+d$s.y*d$p-d$E,d$C.width,d$C.height,d$e,0,0,0,0));else{for(d$u=0,d$v=d$w.length;d$u<d$v;d$u++)(d$r=d$w[d$u])&&!d$r.isSpace&&(d$E=d$r.borderSize,d$C=d$r.texture,d$b._drawText(d$C,d$m+d$B-d$E,d$n-d$E,d$C.width,d$C.height,d$e,0,0,0,0),d$a&&((d$D=d$a[d$F++])||(d$D=d$a[d$F-1]=[]),d$D[0]=d$C,d$D[1]=d$B-d$E,d$D[2]=-d$E)),d$B+=d$r.cw;d$a&&(d$a.length=d$F);}},d$G._drawFast=function(d$a,d$b,d$c,d$d,d$e){for(var d$f,d$i,d$j=0,d$k=d$a.length;d$j<d$k;d$j++)(d$f=(d$i=d$a[d$j])[0]).active(),d$b._drawText(d$f,d$d+d$i[1],d$e+d$i[2],d$f.width,d$f.height,d$c,0,0,0,0);},d$G.drawText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$n){if(void 0===d$n&&(d$n=0),!(d$b&&0===d$b.length||d$c&&0===d$c.length)){var d$o=d$d.a,d$p=d$d.d;(0!==d$d.b||0!==d$d.c)&&(d$o=d$p=1);var d$q=1!==d$o||1!==d$p;if(d$q&&d$y.stage.transform){var d$r=d$y.stage.transform;d$q=d$r.a===d$o&&d$r.d===d$p;}else d$q=!1;if(d$q){var d$s=(d$d=d$d.copyTo(d$za._tmpMatrix)).tx,d$t=d$d.ty;d$d.scale(1/d$o,1/d$p),d$d._checkTransform(),d$l*=d$o,d$m*=d$p,d$l+=d$s-d$d.tx,d$m+=d$t-d$d.ty;}else d$o=d$p=1;if(d$c)d$G._drawSlow(null,d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$o,d$p,d$n);else{if(null===d$b.toUpperCase){var d$u=d$o+1e5*d$p,d$v=d$b;return void(d$v.changed||d$v.id!==d$u?(d$v.id=d$u,d$v.changed=!1,d$G._drawSlow(d$v.save,d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$o,d$p,d$n)):d$G._drawFast(d$v.save,d$a,d$d,d$l,d$m));}var d$w=d$b+d$e.toString()+d$i+d$j+d$k+d$o+d$p+d$f,d$x=d$G._textsCache[d$w];d$J.CharacterCache?d$x?d$G._drawFast(d$x,d$a,d$d,d$l,d$m):(d$G._textsCache.__length||(d$G._textsCache.__length=0),d$G._textsCache.__length>d$z.WebGLTextCacheCount&&((d$G._textsCache={}).__length=0,d$G._curPoolIndex=0),d$G._textCachesPool[d$G._curPoolIndex]?(d$x=d$G._textsCache[d$w]=d$G._textCachesPool[d$G._curPoolIndex]).length=0:d$G._textCachesPool[d$G._curPoolIndex]=d$x=d$G._textsCache[d$w]=[],d$G._textsCache.__length++,d$G._curPoolIndex++,d$G._drawSlow(d$x,d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$o,d$p,d$n)):d$G._drawSlow(d$x,d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$o,d$p,d$n);}}},d$G._charsTemp=null,d$G._textCachesPool=[],d$G._curPoolIndex=0,d$G._charsCache={},d$G._textsCache={},d$G._drawValue=null,d$G.d=[],d$G._charSeg=null,d$G.__init$=function(){d$a=function(){function d$k(){}return d$o(d$k,""),d$k.prototype.value=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this.font=d$a,this.fillColor=d$b,this.borderColor=d$c,this.lineWidth=d$d,this.scaleX=d$e,this.scaleY=d$f,this.underLine=d$i;var d$j=d$a.toString()+d$e+d$f+d$d+(d$b?d$b.toLowerCase():" ")+(d$c?d$c.toLowerCase():" ")+d$i;return this.txtID=d$k._keymap[d$j],this.txtID||(this.txtID=1e-7*++d$k._keymapCount,d$k._keymap[d$j]=this.txtID),this;},d$k.clear=function(){d$k._keymap={},d$k._keymapCount=1;},d$k._keymap={},d$k._keymapCount=1,d$k;}();},d$G;}(),d$qa=function(){function d$e(d$a){this._index=0,this._size=14,this._italic=-2,d$e._cache2=d$e._cache2||[],this.setFont(d$a||"14px Arial");}d$o(d$e,"laya.webgl.text.FontInContext");var d$a=d$e.prototype;return d$a.setFont=function(d$a){var d$b=d$e._cache2[d$a];if(d$b)this._words=d$b[0],this._size=d$b[1];else{this._words=d$a.split(" ");for(var d$c=0,d$d=this._words.length;d$c<d$d;d$c++)if(0<this._words[d$c].indexOf("px")){this._index=d$c;break;}this._size=parseInt(this._words[this._index]),d$e._cache2[d$a]=[this._words,this._size];}this._text=null,this._italic=-2;},d$a.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic;},d$a.hasType=function(d$a){for(var d$b=0,d$c=this._words.length;d$b<d$c;d$b++)if(this._words[d$b]===d$a)return d$b;return-1;},d$a.removeType=function(d$a){for(var d$b=0,d$c=this._words.length;d$b<d$c;d$b++)if(this._words[d$b]===d$a){this._words.splice(d$b,1),this._index>d$b&&this._index--;break;}this._text=null,this._italic=-2;},d$a.copyTo=function(d$a){return d$a._text=this._text,d$a._size=this._size,d$a._index=this._index,d$a._words=this._words.slice(),d$a._italic=-2,d$a;},d$a.toString=function(){return this._text?this._text:this._text=this._words.join(" ");},d$d(0,d$a,"size",function(){return this._size;},function(d$a){this._size=d$a,this._words[this._index]=d$a+"px",this._text=null;}),d$e.create=function(d$a){var d$b=d$e._cache[d$a];return d$b||(d$b=d$e._cache[d$a]=new d$e(d$a));},d$e.EMPTY=new d$e(),d$e._cache={},d$e._cache2=null,d$e;}(),d$ra=function(){function d$a(){}return d$o(d$a,"laya.webgl.utils.CONST3D2D"),d$a.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d$a.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],d$a.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],d$a._TMPARRAY=[],d$a._OFFSETX=0,d$a._OFFSETY=0,d$i(d$a,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT;},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT;}]),d$a;}(),d$sa=function(){function d$q(){}return d$o(d$q,"laya.webgl.utils.GlUtils"),d$q.make2DProjection=function(d$a,d$b,d$c){return[2/d$a,0,0,0,0,-2/d$b,0,0,0,0,2/d$c,0,-1,1,0,1];},d$q.fillIBQuadrangle=function(d$a,d$b){if(65535/4<d$b)throw Error("IBQuadrangle count:"+d$b+" must<:"+Math.floor(65535/4));d$b=Math.floor(d$b),d$a._resizeBuffer(6*(d$b+1)*2,!1),d$a.byteLength=d$a.bufferLength;for(var d$c=d$a.getUint16Array(),d$d=0,d$e=0;d$e<d$b;d$e++)d$c[d$d++]=4*d$e,d$c[d$d++]=4*d$e+2,d$c[d$d++]=4*d$e+1,d$c[d$d++]=4*d$e,d$c[d$d++]=4*d$e+3,d$c[d$d++]=4*d$e+2;return d$a.setNeedUpload(),!0;},d$q.expandIBQuadrangle=function(d$a,d$b){d$a.bufferLength>=6*d$b*2||d$q.fillIBQuadrangle(d$a,d$b);},d$q.mathCeilPowerOfTwo=function(d$a){return d$a--,d$a|=d$a>>1,d$a|=d$a>>2,d$a|=d$a>>4,d$a|=d$a>>8,d$a|=d$a>>16,++d$a;},d$q.fillQuadrangleImgVb=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){var d$k=16+(d$a._byteLength>>2);d$a.byteLength=d$k<<2;var d$l=d$a.getFloat32Array();d$l[(d$k-=16)+2]=d$e[0],d$l[d$k+3]=d$e[1],d$l[d$k+6]=d$e[2],d$l[d$k+7]=d$e[3],d$l[d$k+10]=d$e[4],d$l[d$k+11]=d$e[5],d$l[d$k+14]=d$e[6],d$l[d$k+15]=d$e[7];var d$m=d$f.a,d$n=d$f.b,d$o=d$f.c,d$p=d$f.d;if(1!==d$m||0!==d$n||0!==d$o||1!==d$p){d$f.bTransform=!0;var d$q=d$f.tx+d$i,d$r=d$f.ty+d$j;d$l[d$k]=(d$d[0]+d$b)*d$m+(d$d[1]+d$c)*d$o+d$q,d$l[d$k+1]=(d$d[0]+d$b)*d$n+(d$d[1]+d$c)*d$p+d$r,d$l[d$k+4]=(d$d[2]+d$b)*d$m+(d$d[3]+d$c)*d$o+d$q,d$l[d$k+5]=(d$d[2]+d$b)*d$n+(d$d[3]+d$c)*d$p+d$r,d$l[d$k+8]=(d$d[4]+d$b)*d$m+(d$d[5]+d$c)*d$o+d$q,d$l[d$k+9]=(d$d[4]+d$b)*d$n+(d$d[5]+d$c)*d$p+d$r,d$l[d$k+12]=(d$d[6]+d$b)*d$m+(d$d[7]+d$c)*d$o+d$q,d$l[d$k+13]=(d$d[6]+d$b)*d$n+(d$d[7]+d$c)*d$p+d$r;}else d$f.bTransform=!1,d$b+=d$f.tx+d$i,d$c+=d$f.ty+d$j,d$l[d$k]=d$b+d$d[0],d$l[d$k+1]=d$c+d$d[1],d$l[d$k+4]=d$b+d$d[2],d$l[d$k+5]=d$c+d$d[3],d$l[d$k+8]=d$b+d$d[4],d$l[d$k+9]=d$c+d$d[5],d$l[d$k+12]=d$b+d$d[6],d$l[d$k+13]=d$c+d$d[7];return d$a._upload=!0;},d$q.fillTranglesVB=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){var d$j=(d$a._byteLength>>2)+d$d.length;d$a.byteLength=d$j<<2;var d$k=d$a.getFloat32Array();d$j-=d$d.length;for(var d$l=d$d.length,d$m=d$e.a,d$n=d$e.b,d$o=d$e.c,d$p=d$e.d,d$q=0;d$q<d$l;d$q+=4)if(d$k[d$j+d$q+2]=d$d[d$q+2],d$k[d$j+d$q+3]=d$d[d$q+3],1!==d$m||0!==d$n||0!==d$o||1!==d$p){d$e.bTransform=!0;var d$r=d$e.tx+d$f,d$s=d$e.ty+d$i;d$k[d$j+d$q]=(d$d[d$q]+d$b)*d$m+(d$d[d$q+1]+d$c)*d$o+d$r,d$k[d$j+d$q+1]=(d$d[d$q]+d$b)*d$n+(d$d[d$q+1]+d$c)*d$p+d$s;}else d$e.bTransform=!1,d$b+=d$e.tx+d$f,d$c+=d$e.ty+d$i,d$k[d$j+d$q]=d$b+d$d[d$q],d$k[d$j+d$q+1]=d$c+d$d[d$q+1];return d$a._upload=!0;},d$q.copyPreImgVb=function(d$a,d$b,d$c){var d$d=d$a._byteLength>>2;d$a.byteLength=d$d+16<<2;for(var d$e=d$a.getFloat32Array(),d$f=0,d$i=d$d-16;d$f<4;d$f++)d$e[d$d]=d$e[d$i]+d$b,++d$i,d$e[++d$d]=d$e[d$i]+d$c,++d$i,d$e[++d$d]=d$e[d$i],++d$i,d$e[++d$d]=d$e[d$i],++d$d,++d$i;d$a._upload=!0;},d$q.fillRectImgVb=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$n,d$o){void 0===d$o&&(d$o=!1);var d$p,d$q,d$r,d$s,d$t,d$u,d$v,d$w,d$x,d$y,d$z,d$A,d$B,d$C,d$D,d$E,d$F=1,d$G=d$j.a,d$H=d$j.b,d$I=d$j.c,d$J=d$j.d,d$K=d$b&&d$b.width<99999999;if(1!==d$G||0!==d$H||0!==d$I||1!==d$J?(d$j.bTransform=!0,0===d$H&&0===d$I&&(d$F=23,d$x=d$e+d$c,d$y=d$f+d$d,d$p=d$G*d$c+(d$z=d$j.tx+d$k),d$r=d$G*d$x+d$z,d$q=d$J*d$d+(d$A=d$j.ty+d$l),d$s=d$J*d$y+d$A)):(d$F=23,d$j.bTransform=!1,d$r=(d$p=d$c+d$j.tx+d$k)+d$e,d$s=(d$q=d$d+d$j.ty+d$l)+d$f),d$K&&(d$t=d$b.x,d$u=d$b.y,d$v=d$b.width+d$t,d$w=d$b.height+d$u),1!==d$F){if(Math.min(d$p,d$r)>=d$v)return!1;if(Math.min(d$q,d$s)>=d$w)return!1;if(Math.max(d$r,d$p)<=d$t)return!1;if(Math.max(d$s,d$q)<=d$u)return!1;}var d$L=d$a._byteLength>>2;d$a.byteLength=16+d$L<<2;var d$M=d$a.getFloat32Array();switch(d$M[2+d$L]=d$i[0],d$M[3+d$L]=d$i[1],d$M[6+d$L]=d$i[2],d$M[7+d$L]=d$i[3],d$M[10+d$L]=d$i[4],d$M[11+d$L]=d$i[5],d$M[14+d$L]=d$i[6],d$M[15+d$L]=d$i[7],d$F){case 1:d$z=d$j.tx+d$k,d$A=d$j.ty+d$l;var d$N=d$G*d$c,d$O=d$I*d$d,d$P=d$J*d$d,d$Q=d$H*d$c,d$R=d$G*(d$x=d$e+d$c),d$S=d$I*(d$y=d$f+d$d),d$T=d$J*d$y,d$U=d$H*d$x;d$o?(d$B=d$N+d$O+d$z,d$D=Math.round(d$B)-d$B,d$C=d$P+d$Q+d$A,d$E=Math.round(d$C)-d$C,d$M[d$L]=d$B+d$D,d$M[1+d$L]=d$C+d$E,d$M[4+d$L]=d$R+d$O+d$z+d$D,d$M[5+d$L]=d$P+d$U+d$A+d$E,d$M[8+d$L]=d$R+d$S+d$z+d$D,d$M[9+d$L]=d$T+d$U+d$A+d$E,d$M[12+d$L]=d$N+d$S+d$z+d$D,d$M[13+d$L]=d$T+d$Q+d$A+d$E):(d$M[d$L]=d$N+d$O+d$z,d$M[1+d$L]=d$P+d$Q+d$A,d$M[4+d$L]=d$R+d$O+d$z,d$M[5+d$L]=d$P+d$U+d$A,d$M[8+d$L]=d$R+d$S+d$z,d$M[9+d$L]=d$T+d$U+d$A,d$M[12+d$L]=d$N+d$S+d$z,d$M[13+d$L]=d$T+d$Q+d$A);break;case 23:d$o?(d$B=d$p+d$m,d$D=Math.round(d$B)-d$B,d$C=d$q,d$E=Math.round(d$C)-d$C,d$M[d$L]=d$B+d$D,d$M[1+d$L]=d$C+d$E,d$M[4+d$L]=d$r+d$m+d$D,d$M[5+d$L]=d$q+d$E,d$M[8+d$L]=d$r+d$D,d$M[9+d$L]=d$s+d$E,d$M[12+d$L]=d$p+d$D,d$M[13+d$L]=d$s+d$E):(d$M[d$L]=d$p+d$m,d$M[1+d$L]=d$q,d$M[4+d$L]=d$r+d$m,d$M[5+d$L]=d$q,d$M[8+d$L]=d$r,d$M[9+d$L]=d$s,d$M[12+d$L]=d$p,d$M[13+d$L]=d$s);}return d$a._upload=!0;},d$q.fillLineVb=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){var d$k=.5*d$i,d$l=d$q._fillLineArray,d$m=-(d$d-d$f),d$n=d$c-d$e,d$o=Math.sqrt(d$m*d$m+d$n*d$n);d$m/=d$o,d$n/=d$o,d$m*=d$k,d$n*=d$k,d$l[0]=d$c-d$m,d$l[1]=d$d-d$n,d$l[4]=d$c+d$m,d$l[5]=d$d+d$n,d$l[8]=d$e+d$m,d$l[9]=d$f+d$n,d$l[12]=d$e-d$m,d$l[13]=d$f-d$n,d$j&&d$j.transformPointArray(d$l,d$l);var d$p=16+(d$a._byteLength>>2);return d$a.byteLength=d$p<<2,d$a.insertData(d$l,d$p-16),!0;},d$q._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d$q;}(),d$ta=(function(){function d$k(){}d$o(d$k,"laya.webgl.utils.MatirxArray"),d$k.ArrayMul=function(d$a,d$b,d$c){if(d$a){if(d$b)for(var d$d=NaN,d$e=NaN,d$f=NaN,d$i=NaN,d$j=0;d$j<4;d$j++)d$d=d$a[d$j],d$e=d$a[d$j+4],d$f=d$a[d$j+8],d$i=d$a[d$j+12],d$c[d$j]=d$d*d$b[0]+d$e*d$b[1]+d$f*d$b[2]+d$i*d$b[3],d$c[d$j+4]=d$d*d$b[4]+d$e*d$b[5]+d$f*d$b[6]+d$i*d$b[7],d$c[d$j+8]=d$d*d$b[8]+d$e*d$b[9]+d$f*d$b[10]+d$i*d$b[11],d$c[d$j+12]=d$d*d$b[12]+d$e*d$b[13]+d$f*d$b[14]+d$i*d$b[15];else d$k.copyArray(d$a,d$c);}else d$k.copyArray(d$b,d$c);},d$k.copyArray=function(d$a,d$b){if(d$a&&d$b)for(var d$c=0;d$c<d$a.length;d$c++)d$b[d$c]=d$a[d$c];};}(),function(){function d$b(d$a,d$b,d$c){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=d$a,this._vb=new d$ha(d$a,35048),d$b&&this._vb._resizeBuffer(d$b,!1),this._ib=new d$ga(),d$c&&this._ib._resizeBuffer(d$c,!1);}d$o(d$b,"laya.webgl.utils.Mesh2D");var d$a=d$b.prototype;return d$a.cloneWithNewVB=function(){var d$a=new d$b(this._stride,0,0);return d$a._ib=this._ib,d$a._quadNum=this._quadNum,d$a._attribInfo=this._attribInfo,d$a;},d$a.cloneWithNewVBIB=function(){var d$a=new d$b(this._stride,0,0);return d$a._attribInfo=this._attribInfo,d$a;},d$a.getVBW=function(){return this._vb.setNeedUpload(),this._vb;},d$a.getVBR=function(){return this._vb;},d$a.getIBR=function(){return this._ib;},d$a.getIBW=function(){return this._ib.setNeedUpload(),this._ib;},d$a.createQuadIB=function(d$a){this._quadNum=d$a,this._ib._resizeBuffer(6*d$a*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var d$b=this._ib.getUint16Array(),d$c=0,d$d=0,d$e=0;d$e<d$a;d$e++)d$b[d$c++]=d$d,d$b[d$c++]=d$d+2,d$b[d$c++]=d$d+1,d$b[d$c++]=d$d,d$b[d$c++]=d$d+3,d$b[d$c++]=d$d+2,d$d+=4;this._ib.setNeedUpload();},d$a.setAttributes=function(d$a){if(this._attribInfo=d$a,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!";},d$a.getEleNum=function(){return this._ib.getBuffer().byteLength/2;},d$a.releaseMesh=function(){},d$a.destroy=function(){},d$a.clearVB=function(){this._vb.clear();},d$b._gvaoid=0,d$b;}()),d$ua=function(){function d$e(){}return d$o(d$e,"laya.webgl.utils.RenderState2D"),d$e.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];},d$e.mat2MatArray=function(d$a,d$b){var d$c=d$a,d$d=d$b;return d$d[0]=d$c.a,d$d[1]=d$c.b,d$d[2]=d$e.EMPTYMAT4_ARRAY[2],d$d[3]=d$e.EMPTYMAT4_ARRAY[3],d$d[4]=d$c.c,d$d[5]=d$c.d,d$d[6]=d$e.EMPTYMAT4_ARRAY[6],d$d[7]=d$e.EMPTYMAT4_ARRAY[7],d$d[8]=d$e.EMPTYMAT4_ARRAY[8],d$d[9]=d$e.EMPTYMAT4_ARRAY[9],d$d[10]=d$e.EMPTYMAT4_ARRAY[10],d$d[11]=d$e.EMPTYMAT4_ARRAY[11],d$d[12]=d$c.tx,d$d[13]=d$c.ty,d$d[14]=d$e.EMPTYMAT4_ARRAY[14],d$d[15]=d$e.EMPTYMAT4_ARRAY[15],d$b;},d$e.restoreTempArray=function(){d$e.TEMPMAT4_ARRAY[0]=1,d$e.TEMPMAT4_ARRAY[1]=0,d$e.TEMPMAT4_ARRAY[4]=0,d$e.TEMPMAT4_ARRAY[5]=1,d$e.TEMPMAT4_ARRAY[12]=0,d$e.TEMPMAT4_ARRAY[13]=0;},d$e.clear=function(){d$e.worldScissorTest=!1,d$e.worldShaderDefines=null,d$e.worldFilters=null,d$e.worldAlpha=1,d$e.worldClipRect.x=d$e.worldClipRect.y=0,d$e.worldClipRect.width=d$e.width,d$e.worldClipRect.height=d$e.height,d$e.curRenderTarget=null;},d$e._MAXSIZE=99999999,d$e.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d$e.worldMatrix4=d$e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d$e.worldAlpha=1,d$e.worldScissorTest=!1,d$e.worldFilters=null,d$e.worldShaderDefines=null,d$e.curRenderTarget=null,d$e.width=0,d$e.height=0,d$i(d$e,["worldMatrix",function(){return this.worldMatrix=new d$B();},"worldClipRect",function(){return this.worldClipRect=new d$D(0,0,99999999,99999999);}]),d$e;}(),d$va=function(){var d$u,d$c;function d$v(d$a,d$b,d$c,d$d,d$e){var d$f=this;function d$i(d$a){var d$b=[],d$c=new d$u(d$b);return d$f._compileToTree(d$c,d$a.split("\n"),0,d$b,d$e),d$c;}var d$j=d$p.now();this._VS=d$i(d$b),this._PS=d$i(d$c),this._nameMap=d$d,2<d$p.now()-d$j&&console.log("ShaderCompile use time:"+(d$p.now()-d$j)+"  size:"+d$b.length+"/"+d$c.length);}d$o(d$v,"laya.webgl.utils.ShaderCompile");var d$a=d$v.prototype;return d$a._compileToTree=function(d$a,d$b,d$c,d$d,d$e){var d$f,d$i,d$j,d$k,d$l,d$m,d$n,d$o=0,d$p=0,d$q=0,d$r=0;for(d$p=d$c;d$p<d$b.length;d$p++)if(!((d$j=d$b[d$p]).length<1)&&0!==(d$o=d$j.indexOf("//"))){if(0<=d$o&&(d$j=d$j.substr(0,d$o)),d$f=d$n||new d$u(d$d),d$n=null,d$f.text=d$j,d$f.noCompile=!0,0<=(d$o=d$j.indexOf("#"))){for(d$k="#",d$r=d$o+1,d$q=d$j.length;d$r<d$q;d$r++){var d$s=d$j.charAt(d$r);if(" "===d$s||"\t"===d$s||"\r"===d$s||"\n"===d$s||"?"===d$s)break;d$k+=d$s;}switch(d$f.name=d$k){case"#ifdef":case"#ifndef":if(d$f.src=d$j,d$f.noCompile=null!=d$j.match(/[!&|()=<>]/),d$f.noCompile?console.log("function():Boolean{return "+d$j.substr(d$o+d$f.name.length)+"}"):(d$m=d$j.replace(/^\s*/,"").split(/\s+/),d$f.setCondition(d$m[1],"#ifdef"===d$k?1:2),d$f.text="//"+d$f.text),d$f.setParent(d$a),d$a=d$f,d$e)for(d$m=d$j.substr(d$r).split(d$v._splitToWordExps3),d$r=0;d$r<d$m.length;d$r++)(d$j=d$m[d$r]).length&&(d$e[d$j]=!0);continue;case"#if":if(d$f.src=d$j,d$f.noCompile=!0,d$f.setParent(d$a),d$a=d$f,d$e)for(d$m=d$j.substr(d$r).split(d$v._splitToWordExps3),d$r=0;d$r<d$m.length;d$r++)(d$j=d$m[d$r]).length&&"defined"!=d$j&&(d$e[d$j]=!0);continue;case"#else":d$f.src=d$j,d$i=(d$a=d$a.parent).childs[d$a.childs.length-1],d$f.noCompile=d$i.noCompile,d$f.noCompile||(d$f.condition=d$i.condition,d$f.conditionType=1==d$i.conditionType?2:1,d$f.text="//"+d$f.text+" "+d$i.text+" "+d$f.conditionType),d$f.setParent(d$a),d$a=d$f;continue;case"#endif":d$i=(d$a=d$a.parent).childs[d$a.childs.length-1],d$f.noCompile=d$i.noCompile,d$f.noCompile||(d$f.text="//"+d$f.text),d$f.setParent(d$a);continue;case"#include":d$m=d$v.splitToWords(d$j,null);var d$t=d$v.includes[d$m[1]];if(!d$t)throw"ShaderCompile error no this include file:"+d$m[1];if((d$o=d$m[0].indexOf("?"))<0){d$f.setParent(d$a),d$j=d$t.getWith("with"==d$m[2]?d$m[3]:null),this._compileToTree(d$f,d$j.split("\n"),0,d$d,d$e),d$f.text="";continue;}d$f.setCondition(d$m[0].substr(d$o+1),1),d$f.text=d$t.getWith("with"==d$m[2]?d$m[3]:null);break;case"#import":d$l=(d$m=d$v.splitToWords(d$j,null))[1],d$d.push({node:d$f,file:d$v.includes[d$l],ofs:d$f.text.length});continue;}}else{if((d$i=d$a.childs[d$a.childs.length-1])&&!d$i.name){0<d$d.length&&d$v.splitToWords(d$j,d$i),d$n=d$f,d$i.text+="\n"+d$j;continue;}0<d$d.length&&d$v.splitToWords(d$j,d$f);}d$f.setParent(d$a);}},d$a.createShader=function(d$a,d$b,d$c){var d$d={},d$e="";if(d$a)for(var d$f in d$a)d$e+="#define "+d$f+"\n",d$d[d$f]=!0;var d$i=this._VS.toscript(d$d,[]),d$j=this._PS.toscript(d$d,[]);return(d$c||d$Ya.create)(d$e+d$i.join("\n"),d$e+d$j.join("\n"),d$b,this._nameMap);},d$v._parseOne=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i={type:d$v.shaderParamsMap[d$c[d$d+1]],name:d$c[d$d+2],size:isNaN(parseInt(d$c[d$d+3]))?1:parseInt(d$c[d$d+3])};return d$f&&("attribute"==d$e?d$a.push(d$i):d$b.push(d$i)),":"==d$c[d$d+3]&&(d$i.type=d$c[d$d+4],d$d+=2),d$d+=2;},d$v.addInclude=function(d$a,d$b){if(!d$b||0===d$b.length)throw new Error("add shader include file err:"+d$a);if(d$v.includes[d$a])throw new Error("add shader include file err, has add:"+d$a);d$v.includes[d$a]=new d$c(d$b);},d$v.preGetParams=function(d$a,d$b){var d$c=[d$a,d$b],d$d={},d$e=[],d$f=[],d$i={},d$j=[];d$d.attributes=d$e,d$d.uniforms=d$f,d$d.defines=d$i;for(var d$k=0,d$l=0,d$m=0;d$m<2;d$m++){d$c[d$m]=d$c[d$m].replace(d$v._removeAnnotation,"");var d$n,d$o=d$c[d$m].match(d$v._reg);for(d$k=0,d$l=d$o.length;d$k<d$l;d$k++){var d$p=d$o[d$k];if("attribute"==d$p||"uniform"==d$p)d$k=d$v._parseOne(d$e,d$f,d$o,d$k,d$p,!0);else{if("#define"==d$p){d$j[d$p=d$o[++d$k]]=1;continue;}if("#ifdef"==d$p){d$i[d$n=d$o[++d$k]]=d$i[d$n]||[];for(d$k++;d$k<d$l;d$k++)if("attribute"==(d$p=d$o[d$k])||"uniform"==d$p)d$k=d$v._parseOne(d$e,d$f,d$o,d$k,d$p,d$j[d$n]);else if("#else"==d$p)for(d$k++;d$k<d$l;d$k++)if("attribute"==(d$p=d$o[d$k])||"uniform"==d$p)d$k=d$v._parseOne(d$e,d$f,d$o,d$k,d$p,!d$j[d$n]);else if("#endif"==d$p)break;}}}}return d$d;},d$v.splitToWords=function(d$a,d$b){for(var d$c,d$d,d$e=[],d$f=-1,d$i=0,d$j=d$a.length;d$i<d$j;d$i++)if(d$c=d$a.charAt(d$i),0<=" \t=+-*/&%!<>()'\",;".indexOf(d$c)){if(0<=d$f&&1<d$i-d$f&&(d$d=d$a.substr(d$f,d$i-d$f),d$e.push(d$d)),'"'==d$c||"'"==d$c){var d$k=d$a.indexOf(d$c,d$i+1);if(d$k<0)throw"Sharder err:"+d$a;d$e.push(d$a.substr(d$i+1,d$k-d$i-1)),d$i=d$k,d$f=-1;continue;}"("==d$c&&d$b&&0<d$e.length&&(d$d=d$e[d$e.length-1]+";","vec4;main;".indexOf(d$d)<0&&(d$b.useFuns+=d$d)),d$f=-1;}else d$f<0&&(d$f=d$i);return d$f<d$j&&1<d$j-d$f&&(d$d=d$a.substr(d$f,d$j-d$f),d$e.push(d$d)),d$e;},d$v.IFDEF_NO=0,d$v.IFDEF_YES=1,d$v.IFDEF_ELSE=2,d$v.IFDEF_PARENT=3,d$v._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),d$v._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),d$v._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),d$v.includes={},d$i(d$v,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680};},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g");}]),d$v.__init$=function(){d$u=function(){function d$c(d$a){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=d$a;}d$o(d$c,"");var d$a=d$c.prototype;return d$a.setParent=function(d$a){d$a.childs.push(this),this.z=d$a.z+1,this.parent=d$a;},d$a.setCondition=function(d$a,d$b){d$a&&(this.conditionType=d$b,d$a=d$a.replace(/(\s*$)/g,""),this.condition=function(){return this[d$a];},this.condition.__condition=d$a);},d$a.toscript=function(d$a,d$b){return this._toscript(d$a,d$b,++d$c.__id);},d$a._toscript=function(d$d,d$e,d$f){if(this.childs.length<1&&!this.text)return d$e;d$e.length;if(this.condition){var d$a=!!this.condition.call(d$d);if(2===this.conditionType&&(d$a=!d$a),!d$a)return d$e;}if(this.text&&d$e.push(this.text),0<this.childs.length&&this.childs.forEach(function(d$a,d$b,d$c){d$a._toscript(d$d,d$e,d$f);}),0<this.includefiles.length&&0<this.useFuns.length)for(var d$b,d$c=0,d$i=this.includefiles.length;d$c<d$i;d$c++)this.includefiles[d$c].curUseID!=d$f&&0<(d$b=this.includefiles[d$c].file.getFunsScript(this.useFuns)).length&&(this.includefiles[d$c].curUseID=d$f,d$e[0]=d$b+d$e[0]);return d$e;},d$c.__id=1,d$c;}(),d$c=function(){function d$a(d$a){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=d$a;for(var d$b=0,d$c=0,d$d=0;!((d$b=d$a.indexOf("#begin",d$b))<0);){for(d$d=d$b+5;!((d$d=d$a.indexOf("#end",d$d))<0)&&"i"===d$a.charAt(d$d+4);)d$d+=5;if(d$d<0)throw"add include err,no #end:"+d$a;d$c=d$a.indexOf("\n",d$b);var d$e=d$v.splitToWords(d$a.substr(d$b,d$c-d$b),null);"code"==d$e[1]?this.codes[d$e[2]]=d$a.substr(d$c+1,d$d-d$c-1):"function"==d$e[1]&&(d$c=d$a.indexOf("function",d$b),d$c+="function".length,this.funs[d$e[3]]=d$a.substr(d$c+1,d$d-d$c-1),this.funnames+=d$e[3]+";"),d$b=d$d+1;}}d$o(d$a,"");var d$b=d$a.prototype;return d$b.getWith=function(d$a){var d$b=d$a?this.codes[d$a]:this.script;if(!d$b)throw"get with error:"+d$a;return d$b;},d$b.getFunsScript=function(d$a){var d$b="";for(var d$c in this.funs)0<=d$a.indexOf(d$c+";")&&(d$b+=this.funs[d$c]);return d$b;},d$a;}();},d$v;}(),d$wa=function(){function d$i(){}return d$o(d$i,"laya.webgl.WebGL"),d$i._uint8ArraySlice=function(){for(var d$a=this.length,d$b=new Uint8Array(this.length),d$c=0;d$c<d$a;d$c++)d$b[d$c]=this[d$c];return d$b;},d$i._float32ArraySlice=function(){for(var d$a=this.length,d$b=new Float32Array(this.length),d$c=0;d$c<d$a;d$c++)d$b[d$c]=this[d$c];return d$b;},d$i._uint16ArraySlice=function(d$a){var d$b,d$c=arguments,d$d=0,d$e=0;if(0===d$c.length)for(d$d=this.length,d$b=new Uint16Array(d$d),d$e=0;d$e<d$d;d$e++)d$b[d$e]=this[d$e];else if(2===d$c.length){var d$f=d$c[0],d$i=d$c[1];if(d$f<d$i)for(d$d=d$i-d$f,d$b=new Uint16Array(d$d),d$e=d$f;d$e<d$i;d$e++)d$b[d$e-d$f]=this[d$e];else d$b=new Uint16Array(0);}return d$b;},d$i.expandContext=function(){var d$a=d$e.prototype,d$b=CanvasRenderingContext2D.prototype;d$b.fillTrangles=d$a.fillTrangles,d$Za.__int__(null),d$b.setIBVB=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){void 0===d$k&&(d$k=0),void 0===d$l&&(d$l=0),null===d$c&&(this._ib=this._ib||d$ga.QuadrangleIB,d$c=this._ib,d$sa.expandIBQuadrangle(d$c,d$d._byteLength/64+8)),this._setIBVB(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l);},d$b.fillTrangles=function(d$a,d$b,d$c,d$d,d$e){this._curMat=this._curMat||d$B.create(),this._vb=this._vb||d$ha.create(),this._ib||(this._ib=d$ga.create(),d$sa.fillIBQuadrangle(this._ib,d$i/4));var d$f=this._vb,d$i=d$d.length>>4;d$sa.fillTranglesVB(d$f,d$b,d$c,d$d,d$e||this._curMat,0,0),d$sa.expandIBQuadrangle(this._ib,d$f._byteLength/64+8);var d$j=new d$Aa(1,0);d$j.textureHost=d$a;var d$k=new d$_a("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");d$f._vertType=3,this._setIBVB(d$b,d$c,this._ib,d$f,6*d$i,d$e,d$k,d$j,0,0);};},d$i.enable=function(){if(d$p.__init__(),d$t.isConchApp&&!d$t.isConchWebGL)return d$x.skinAniSprite=function(){return new d$aa();},d$i.expandContext(),!1;if(d$x.getWebGLContext=function(d$a){for(var d$b,d$c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d$d=0;d$d<d$c.length;d$d++){try{d$b=d$a.getContext(d$c[d$d],{stencil:d$z.isStencil,alpha:d$z.isAlpha,antialias:d$z.isAntialias,premultipliedAlpha:d$z.premultipliedAlpha,preserveDrawingBuffer:d$z.preserveDrawingBuffer});}catch(d$a){}if(d$b)return d$b;}return null;},null==(d$i.mainContext=d$i.mainContext||d$x.getWebGLContext(d$t._mainCanvas)))return!1;if(d$t.isWebGL)return!0;d$r.create=function(d$a,d$b){return new d$ab(d$a,d$b);},d$s.create=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){return new d$Xa(d$a,d$b,d$c,d$d,d$e,d$f,d$i);},d$t.WebGL=d$i,d$t.isWebGL=!0,d$pa.__init__(),d$x.createRenderSprite=function(d$a,d$b){return new d$Ba(d$a,d$b);},d$x.createWebGLContext2D=function(d$a){return new d$za(d$a);},d$x.changeWebGLSize=function(d$a,d$b){laya.webgl.WebGL.onStageResize(d$a,d$b);},d$x.createGraphics=function(){return new d$ya();};var d$a=d$x.createFilterAction;return d$x.createFilterAction=d$a||function(d$a){return new d$Ca();},d$x.clear=function(d$a){d$ua.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var d$b=d$t.context.ctx,d$c=0==d$b._submits._length||d$z.preserveDrawingBuffer?d$q.create(d$a)._color:d$F._wgColor;d$c&&d$b.clearBG(d$c[0],d$c[1],d$c[2],d$c[3]),d$ua.clear();},d$x.addToAtlas=function(d$a,d$b){void 0===d$b&&(d$b=!1);var d$c=d$a.bitmap;d$t.optimizeTextureMemory(d$a.url,d$a)?d$y.__typeof(d$c,"laya.webgl.resource.IMergeAtlasBitmap")&&d$c.allowMerageInAtlas&&d$c.on("recovered",d$a,d$a.addTextureToAtlas):d$c.enableMerageInAtlas=!1;},d$x.isAtlas=function(d$a){return d$a instanceof laya.webgl.atlas.AtlasWebGLCanvas;},d$Q._enable(),d$x.beginFlush=function(){for(var d$a=d$Q.instance,d$b=d$a.getAtlaserCount(),d$c=0;d$c<d$b;d$c++){var d$d=d$a.getAtlaserByIndex(d$c).texture;d$d._flashCacheImageNeedFlush&&d$x.flashFlushImage(d$d);}},d$x.drawToCanvas=function(d$a,d$b,d$c,d$d,d$e,d$f){(d$c<=0||d$d<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),d$c|=0,d$d|=0,d$e|=0,d$f|=0;var d$i=d$Ma.create(d$c,d$d,6408,5121,0,!1);d$i.start(),d$i.clear(0,0,0,0),d$t.context.clear(),d$u.renders[d$b]._fun(d$a,d$t.context,d$e,d$ua.height-d$d+d$f),d$t.context.flush(),d$i.end();var d$j=d$i.getData(0,0,d$c,d$d);if(d$i.recycle(),d$j.byteLength==d$c*d$d*4){var d$k=new d$Ua();d$k._canvas=d$p.createElement("canvas"),d$k.size(d$c,d$d);var d$l=d$k._canvas.getContext("2d");d$p.canvas.size(d$c,d$d);var d$m=d$p.context,d$n=d$m.createImageData(d$c,d$d);return d$n.data.set(new Uint8ClampedArray(d$j.buffer)),d$k._imgData=d$n,d$m.putImageData(d$n,0,0),d$l.save(),d$l.translate(0,d$d),d$l.scale(1,-1),d$l.drawImage(d$p.canvas.source,0,0),d$l.restore(),d$k;}console.log("drawToCanvas error: w:"+d$c+",h:"+d$d+",datalen:"+d$j.byteLength);},d$x.createFilterAction=function(d$a){var d$b;switch(d$a){case 32:d$b=new d$Ca();}return d$b;},d$x.addTextureToAtlas=function(d$a){d$a._uvID++,d$Q._atlasRestore++,d$a.bitmap.enableMerageInAtlas&&d$Q.instance.addToAtlas(d$a);},d$x.getTexturePixels=function(d$a,d$b,d$c,d$d,d$e){d$t.context.ctx.clear();var d$f=new d$E();d$f.graphics.drawTexture(d$a,-d$b,-d$c);var d$i=d$Ma.create(d$d,d$e);d$i.start(),d$i.clear(0,0,0,0),d$f.render(d$t.context,0,0),d$t.context.ctx.flush(),d$i.end();for(var d$j=d$i.getData(0,0,d$d,d$e),d$k=[],d$l=0,d$m=d$e-1;0<=d$m;d$m--)for(var d$n=0;d$n<d$d;d$n++)d$l=4*(d$m*d$d+d$n),d$k.push(d$j[d$l]),d$k.push(d$j[d$l+1]),d$k.push(d$j[d$l+2]),d$k.push(d$j[d$l+3]);return d$k;},d$x.skinAniSprite=function(){return new d$aa();},d$l.create=function(d$a,d$b){var d$c=new d$Ua();return d$c._imgData=d$b,d$c.flipY=!1,d$c;},d$A._filterStart=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$a.getValue("bounds"),d$i=d$Ma.create(d$f.width,d$f.height);if(d$i.start(),d$i.clear(0,0,0,0),d$a.addValue("src",d$i),d$a.addValue("ScissorTest",d$ua.worldScissorTest),d$ua.worldScissorTest){var d$j=new d$D();d$j.copyFrom(d$c.ctx._clipRect),d$a.addValue("clipRect",d$j),d$ua.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089);}},d$A._filterEnd=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$a.getValue("bounds");d$a.getValue("src").end();var d$i=d$Ma.create(d$f.width,d$f.height);d$i.start(),d$i.clear(0,0,0,0),d$a.addValue("out",d$i),d$b._set$P("_filterCache",d$i),d$b._set$P("_isHaveGlowFilter",d$a.getValue("_isHaveGlowFilter"));},d$A._EndTarget=function(d$a,d$b){if(d$a.getValue("src").recycle(),d$a.getValue("out").end(),d$a.getValue("ScissorTest")){d$ua.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),d$b.ctx.save();var d$c=d$a.getValue("clipRect");d$b.ctx.clipRect(d$c.x,d$c.y,d$c.width,d$c.height);}},d$A._useSrc=function(d$a){var d$b=d$a.getValue("out");d$b.end(),(d$b=d$a.getValue("src")).start(),d$b.clear(0,0,0,0);},d$A._endSrc=function(d$a){d$a.getValue("src").end();},d$A._useOut=function(d$a){var d$b=d$a.getValue("src");d$b.end(),(d$b=d$a.getValue("out")).start(),d$b.clear(0,0,0,0);},d$A._endOut=function(d$a){d$a.getValue("out").end();},d$A._recycleScope=function(d$a){d$a.recycle();},d$A._filter=function(d$a,d$b,d$c,d$d){var d$e=this._next;if(d$e){var d$f,d$i,d$j=d$a.filters,d$k=d$j.length;if(1==d$k&&32==d$j[0].type)return d$b.ctx.save(),d$b.ctx.setFilters([d$j[0]]),d$e._fun.call(d$e,d$a,d$b,d$c,d$d),void d$b.ctx.restore();var d$l=d$ja.create(),d$m=d$C.TEMP,d$n=d$b.ctx._getTransformMatrix(),d$o=d$B.create();d$n.copyTo(d$o);var d$p=0,d$q=0,d$r=!1,d$s=d$a._$P._filterCache?d$a._$P._filterCache:null;if(!d$s||d$a._repaint){d$r=d$a._isHaveGlowFilter(),d$l.addValue("_isHaveGlowFilter",d$r),d$r&&(d$p=50,d$q=25),(d$i=new d$D()).copyFrom(d$a.getSelfBounds()),d$i.x+=d$a.x,d$i.y+=d$a.y,d$i.x-=d$a.pivotX+4,d$i.y-=d$a.pivotY+4;var d$t=d$i.x,d$u=d$i.y;if(d$i.width+=d$p+8,d$i.height+=d$p+8,d$m.x=d$i.x*d$o.a+d$i.y*d$o.c,d$m.y=d$i.y*d$o.d+d$i.x*d$o.b,d$i.x=d$m.x,d$i.y=d$m.y,d$m.x=d$i.width*d$o.a+d$i.height*d$o.c,d$m.y=d$i.height*d$o.d+d$i.width*d$o.b,d$i.width=d$m.x,d$i.height=d$m.y,d$i.width<=0||d$i.height<=0)return;d$s&&d$s.recycle(),d$l.addValue("bounds",d$i);var d$v=d$ia.create([d$l,d$a,d$b,0,0],d$A._filterStart);d$b.addRenderObject(d$v),d$b.ctx._renderKey=0,d$b.ctx._shader2D.glTexture=null;var d$w=d$a.x-d$t+d$q,d$x=d$a.y-d$u+d$q;d$e._fun.call(d$e,d$a,d$b,d$w,d$x),d$v=d$ia.create([d$l,d$a,d$b,0,0],d$A._filterEnd),d$b.addRenderObject(d$v);for(var d$y=0;d$y<d$k;d$y++){0!=d$y&&(d$v=d$ia.create([d$l],d$A._useSrc),d$b.addRenderObject(d$v),d$f=d$Aa.create(1,0),d$B.TEMP.identity(),d$b.ctx.drawTarget(d$l,0,0,d$i.width,d$i.height,d$B.TEMP,"out",d$f,null,d$S.TOINT.overlay),d$v=d$ia.create([d$l],d$A._useOut),d$b.addRenderObject(d$v)),d$j[d$y].action.apply3d(d$l,d$a,d$b,0,0);}d$v=d$ia.create([d$l,d$b],d$A._EndTarget),d$b.addRenderObject(d$v);}else{if((d$r=!!d$a._$P._isHaveGlowFilter&&d$a._$P._isHaveGlowFilter)&&(d$p=50,d$q=25),(d$i=d$a.getBounds()).width<=0||d$i.height<=0)return;d$i.width+=d$p,d$i.height+=d$p,d$m.x=d$i.x*d$o.a+d$i.y*d$o.c,d$m.y=d$i.y*d$o.d+d$i.x*d$o.b,d$i.x=d$m.x,d$i.y=d$m.y,d$m.x=d$i.width*d$o.a+d$i.height*d$o.c,d$m.y=d$i.height*d$o.d+d$i.width*d$o.b,d$i.width=d$m.x,d$i.height=d$m.y,d$l.addValue("out",d$s);}d$c=d$c-d$q-d$a.x,d$d=d$d-d$q-d$a.y,d$m.setTo(d$c,d$d),d$o.transformPoint(d$m),d$c=d$m.x+d$i.x,d$d=d$m.y+d$i.y,d$f=d$Aa.create(1,0),d$B.TEMP.identity(),d$b.ctx.drawTarget(d$l,d$c,d$d,d$i.width,d$i.height,d$B.TEMP,"out",d$f,null,d$S.TOINT.overlay),d$v=d$ia.create([d$l],d$A._recycleScope),d$b.addRenderObject(d$v),d$o.destroy();}},Float32Array.prototype.slice||(Float32Array.prototype.slice=d$i._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=d$i._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=d$i._uint8ArraySlice),!0;},d$i.onStageResize=function(d$a,d$b){null!=d$i.mainContext&&(d$i.mainContext.viewport(0,0,d$a,d$b),d$ua.width=d$a,d$ua.height=d$b);},d$i.onInvalidGLRes=function(){d$Q.instance.freeAll(),d$w.releaseContentManagers(!0),d$i.doNodeRepaint(d$y.stage),d$i.mainContext.viewport(0,0,d$ua.width,d$ua.height),d$y.stage.event("devicelost");},d$i.doNodeRepaint=function(d$a){0==d$a.numChildren&&d$a.repaint();for(var d$b=0;d$b<d$a.numChildren;d$b++)d$i.doNodeRepaint(d$a.getChildAt(d$b));},d$i.init=function(d$a,d$b,d$c){d$i.mainCanvas=d$a,d$l._createContext=function(d$a){return new d$za(d$a);},d$Ua._createContext=function(d$a){return new d$za(d$a);};var d$d=laya.webgl.WebGL.mainContext;if(null!=d$d.getShaderPrecisionFormat){var d$e=d$d.getShaderPrecisionFormat(35633,36338),d$f=d$d.getShaderPrecisionFormat(35632,36338);d$i.shaderHighPrecision=!(!d$e.precision||!d$f.precision);}else d$i.shaderHighPrecision=!1;if(d$i.compressAstc=d$d.getExtension("WEBGL_compressed_texture_astc"),d$i.compressAtc=d$d.getExtension("WEBGL_compressed_texture_atc"),d$i.compressEtc=d$d.getExtension("WEBGL_compressed_texture_etc"),d$i.compressEtc1=d$d.getExtension("WEBGL_compressed_texture_etc1"),d$i.compressPvrtc=d$d.getExtension("WEBGL_compressed_texture_pvrtc"),d$i.compressS3tc=d$d.getExtension("WEBGL_compressed_texture_s3tc"),d$i.compressS3tc_srgb=d$d.getExtension("WEBGL_compressed_texture_s3tc_srgb"),d$i.compressAstc=d$i.compressAstc?d$i.compressAstc:{},d$i.compressAtc=d$i.compressAtc?d$i.compressAtc:{},d$i.compressEtc=d$i.compressEtc?d$i.compressEtc:{},d$i.compressEtc1=d$i.compressEtc1?d$i.compressEtc1:{},d$i.compressPvrtc=d$i.compressPvrtc?d$i.compressPvrtc:{},d$i.compressS3tc=d$i.compressS3tc?d$i.compressS3tc:{},d$i.compressS3tc_srgb=d$i.compressS3tc_srgb?d$i.compressS3tc_srgb:{},d$d.deleteTexture1=d$d.deleteTexture,d$d.deleteTexture=function(d$a){d$a==d$xa.curBindTexValue&&(d$xa.curBindTexValue=null),d$d.deleteTexture1(d$a);},d$i.onStageResize(d$b,d$c),null==d$i.mainContext)throw new Error("webGL getContext err!");d$I.__init__(),d$Q.__init__(),d$Ea.__init__(),d$fa.__init__(),d$za.__init__(),d$Aa.__init__(),d$g.__init__(),d$Za.__int__(d$d),d$S._init_(d$d),d$t.isConchApp&&conch.setOnInvalidGLRes(d$i.onInvalidGLRes);},d$i.mainCanvas=null,d$i.antialias=!0,d$i.shaderHighPrecision=!1,d$i._bg_null=[0,0,0,0],d$i;}(),d$xa=function(){function d$d(){}return d$o(d$d,"laya.webgl.WebGLContext"),d$d.UseProgram=function(d$a){return d$d._useProgram!==d$a&&(d$wa.mainContext.useProgram(d$a),d$d._useProgram=d$a,!0);},d$d.setDepthTest=function(d$a,d$b){d$b!==d$d._depthTest&&((d$d._depthTest=d$b)?d$a.enable(2929):d$a.disable(2929));},d$d.setDepthMask=function(d$a,d$b){d$b!==d$d._depthMask&&(d$d._depthMask=d$b,d$a.depthMask(d$b));},d$d.setDepthFunc=function(d$a,d$b){d$b!==d$d._depthFunc&&(d$d._depthFunc=d$b,d$a.depthFunc(d$b));},d$d.setBlend=function(d$a,d$b){d$b!==d$d._blend&&((d$d._blend=d$b)?d$a.enable(3042):d$a.disable(3042));},d$d.setBlendFunc=function(d$a,d$b,d$c){(d$b!==d$d._sFactor||d$c!==d$d._dFactor)&&(d$d._sFactor=d$b,d$d._dFactor=d$c,d$a.blendFunc(d$b,d$c));},d$d.setCullFace=function(d$a,d$b){d$b!==d$d._cullFace&&((d$d._cullFace=d$b)?d$a.enable(2884):d$a.disable(2884));},d$d.setFrontFace=function(d$a,d$b){d$b!==d$d._frontFace&&(d$d._frontFace=d$b,d$a.frontFace(d$b));},d$d.bindTexture=function(d$a,d$b,d$c){d$a.bindTexture(d$b,d$c),d$d.curBindTexTarget=d$b,d$d.curBindTexValue=d$c;},d$d.DEPTH_BUFFER_BIT=256,d$d.STENCIL_BUFFER_BIT=1024,d$d.COLOR_BUFFER_BIT=16384,d$d.POINTS=0,d$d.LINES=1,d$d.LINE_LOOP=2,d$d.LINE_STRIP=3,d$d.TRIANGLES=4,d$d.TRIANGLE_STRIP=5,d$d.TRIANGLE_FAN=6,d$d.ZERO=0,d$d.ONE=1,d$d.SRC_COLOR=768,d$d.ONE_MINUS_SRC_COLOR=769,d$d.SRC_ALPHA=770,d$d.ONE_MINUS_SRC_ALPHA=771,d$d.DST_ALPHA=772,d$d.ONE_MINUS_DST_ALPHA=773,d$d.DST_COLOR=774,d$d.ONE_MINUS_DST_COLOR=775,d$d.SRC_ALPHA_SATURATE=776,d$d.FUNC_ADD=32774,d$d.BLEND_EQUATION=32777,d$d.BLEND_EQUATION_RGB=32777,d$d.BLEND_EQUATION_ALPHA=34877,d$d.FUNC_SUBTRACT=32778,d$d.FUNC_REVERSE_SUBTRACT=32779,d$d.BLEND_DST_RGB=32968,d$d.BLEND_SRC_RGB=32969,d$d.BLEND_DST_ALPHA=32970,d$d.BLEND_SRC_ALPHA=32971,d$d.CONSTANT_COLOR=32769,d$d.ONE_MINUS_CONSTANT_COLOR=32770,d$d.CONSTANT_ALPHA=32771,d$d.ONE_MINUS_CONSTANT_ALPHA=32772,d$d.BLEND_COLOR=32773,d$d.ARRAY_BUFFER=34962,d$d.ELEMENT_ARRAY_BUFFER=34963,d$d.ARRAY_BUFFER_BINDING=34964,d$d.ELEMENT_ARRAY_BUFFER_BINDING=34965,d$d.STREAM_DRAW=35040,d$d.STATIC_DRAW=35044,d$d.DYNAMIC_DRAW=35048,d$d.BUFFER_SIZE=34660,d$d.BUFFER_USAGE=34661,d$d.CURRENT_VERTEX_ATTRIB=34342,d$d.FRONT=1028,d$d.BACK=1029,d$d.CULL_FACE=2884,d$d.FRONT_AND_BACK=1032,d$d.BLEND=3042,d$d.DITHER=3024,d$d.STENCIL_TEST=2960,d$d.DEPTH_TEST=2929,d$d.SCISSOR_TEST=3089,d$d.POLYGON_OFFSET_FILL=32823,d$d.SAMPLE_ALPHA_TO_COVERAGE=32926,d$d.SAMPLE_COVERAGE=32928,d$d.NO_ERROR=0,d$d.INVALID_ENUM=1280,d$d.INVALID_VALUE=1281,d$d.INVALID_OPERATION=1282,d$d.OUT_OF_MEMORY=1285,d$d.CW=2304,d$d.CCW=2305,d$d.LINE_WIDTH=2849,d$d.ALIASED_POINT_SIZE_RANGE=33901,d$d.ALIASED_LINE_WIDTH_RANGE=33902,d$d.CULL_FACE_MODE=2885,d$d.FRONT_FACE=2886,d$d.DEPTH_RANGE=2928,d$d.DEPTH_WRITEMASK=2930,d$d.DEPTH_CLEAR_VALUE=2931,d$d.DEPTH_FUNC=2932,d$d.STENCIL_CLEAR_VALUE=2961,d$d.STENCIL_FUNC=2962,d$d.STENCIL_FAIL=2964,d$d.STENCIL_PASS_DEPTH_FAIL=2965,d$d.STENCIL_PASS_DEPTH_PASS=2966,d$d.STENCIL_REF=2967,d$d.STENCIL_VALUE_MASK=2963,d$d.STENCIL_WRITEMASK=2968,d$d.STENCIL_BACK_FUNC=34816,d$d.STENCIL_BACK_FAIL=34817,d$d.STENCIL_BACK_PASS_DEPTH_FAIL=34818,d$d.STENCIL_BACK_PASS_DEPTH_PASS=34819,d$d.STENCIL_BACK_REF=36003,d$d.STENCIL_BACK_VALUE_MASK=36004,d$d.STENCIL_BACK_WRITEMASK=36005,d$d.VIEWPORT=2978,d$d.SCISSOR_BOX=3088,d$d.COLOR_CLEAR_VALUE=3106,d$d.COLOR_WRITEMASK=3107,d$d.UNPACK_ALIGNMENT=3317,d$d.PACK_ALIGNMENT=3333,d$d.MAX_TEXTURE_SIZE=3379,d$d.MAX_VIEWPORT_DIMS=3386,d$d.SUBPIXEL_BITS=3408,d$d.RED_BITS=3410,d$d.GREEN_BITS=3411,d$d.BLUE_BITS=3412,d$d.ALPHA_BITS=3413,d$d.DEPTH_BITS=3414,d$d.STENCIL_BITS=3415,d$d.POLYGON_OFFSET_UNITS=10752,d$d.POLYGON_OFFSET_FACTOR=32824,d$d.TEXTURE_BINDING_2D=32873,d$d.SAMPLE_BUFFERS=32936,d$d.SAMPLES=32937,d$d.SAMPLE_COVERAGE_VALUE=32938,d$d.SAMPLE_COVERAGE_INVERT=32939,d$d.NUM_COMPRESSED_TEXTURE_FORMATS=34466,d$d.COMPRESSED_TEXTURE_FORMATS=34467,d$d.DONT_CARE=4352,d$d.FASTEST=4353,d$d.NICEST=4354,d$d.GENERATE_MIPMAP_HINT=33170,d$d.BYTE=5120,d$d.UNSIGNED_BYTE=5121,d$d.SHORT=5122,d$d.UNSIGNED_SHORT=5123,d$d.INT=5124,d$d.UNSIGNED_INT=5125,d$d.FLOAT=5126,d$d.DEPTH_COMPONENT=6402,d$d.ALPHA=6406,d$d.RGB=6407,d$d.RGBA=6408,d$d.LUMINANCE=6409,d$d.LUMINANCE_ALPHA=6410,d$d.UNSIGNED_SHORT_4_4_4_4=32819,d$d.UNSIGNED_SHORT_5_5_5_1=32820,d$d.UNSIGNED_SHORT_5_6_5=33635,d$d.FRAGMENT_SHADER=35632,d$d.VERTEX_SHADER=35633,d$d.MAX_VERTEX_ATTRIBS=34921,d$d.MAX_VERTEX_UNIFORM_VECTORS=36347,d$d.MAX_VARYING_VECTORS=36348,d$d.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,d$d.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,d$d.MAX_TEXTURE_IMAGE_UNITS=34930,d$d.MAX_FRAGMENT_UNIFORM_VECTORS=36349,d$d.SHADER_TYPE=35663,d$d.DELETE_STATUS=35712,d$d.LINK_STATUS=35714,d$d.VALIDATE_STATUS=35715,d$d.ATTACHED_SHADERS=35717,d$d.ACTIVE_UNIFORMS=35718,d$d.ACTIVE_ATTRIBUTES=35721,d$d.SHADING_LANGUAGE_VERSION=35724,d$d.CURRENT_PROGRAM=35725,d$d.NEVER=512,d$d.LESS=513,d$d.EQUAL=514,d$d.LEQUAL=515,d$d.GREATER=516,d$d.NOTEQUAL=517,d$d.GEQUAL=518,d$d.ALWAYS=519,d$d.KEEP=7680,d$d.REPLACE=7681,d$d.INCR=7682,d$d.DECR=7683,d$d.INVERT=5386,d$d.INCR_WRAP=34055,d$d.DECR_WRAP=34056,d$d.VENDOR=7936,d$d.RENDERER=7937,d$d.VERSION=7938,d$d.NEAREST=9728,d$d.LINEAR=9729,d$d.NEAREST_MIPMAP_NEAREST=9984,d$d.LINEAR_MIPMAP_NEAREST=9985,d$d.NEAREST_MIPMAP_LINEAR=9986,d$d.LINEAR_MIPMAP_LINEAR=9987,d$d.TEXTURE_MAG_FILTER=10240,d$d.TEXTURE_MIN_FILTER=10241,d$d.TEXTURE_WRAP_S=10242,d$d.TEXTURE_WRAP_T=10243,d$d.TEXTURE_2D=3553,d$d.TEXTURE=5890,d$d.TEXTURE_CUBE_MAP=34067,d$d.TEXTURE_BINDING_CUBE_MAP=34068,d$d.TEXTURE_CUBE_MAP_POSITIVE_X=34069,d$d.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,d$d.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,d$d.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,d$d.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,d$d.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,d$d.MAX_CUBE_MAP_TEXTURE_SIZE=34076,d$d.TEXTURE0=33984,d$d.TEXTURE1=33985,d$d.TEXTURE2=33986,d$d.TEXTURE3=33987,d$d.TEXTURE4=33988,d$d.TEXTURE5=33989,d$d.TEXTURE6=33990,d$d.TEXTURE7=33991,d$d.TEXTURE8=33992,d$d.TEXTURE9=33993,d$d.TEXTURE10=33994,d$d.TEXTURE11=33995,d$d.TEXTURE12=33996,d$d.TEXTURE13=33997,d$d.TEXTURE14=33998,d$d.TEXTURE15=33999,d$d.TEXTURE16=34e3,d$d.TEXTURE17=34001,d$d.TEXTURE18=34002,d$d.TEXTURE19=34003,d$d.TEXTURE20=34004,d$d.TEXTURE21=34005,d$d.TEXTURE22=34006,d$d.TEXTURE23=34007,d$d.TEXTURE24=34008,d$d.TEXTURE25=34009,d$d.TEXTURE26=34010,d$d.TEXTURE27=34011,d$d.TEXTURE28=34012,d$d.TEXTURE29=34013,d$d.TEXTURE30=34014,d$d.TEXTURE31=34015,d$d.ACTIVE_TEXTURE=34016,d$d.REPEAT=10497,d$d.CLAMP_TO_EDGE=33071,d$d.MIRRORED_REPEAT=33648,d$d.FLOAT_VEC2=35664,d$d.FLOAT_VEC3=35665,d$d.FLOAT_VEC4=35666,d$d.INT_VEC2=35667,d$d.INT_VEC3=35668,d$d.INT_VEC4=35669,d$d.BOOL=35670,d$d.BOOL_VEC2=35671,d$d.BOOL_VEC3=35672,d$d.BOOL_VEC4=35673,d$d.FLOAT_MAT2=35674,d$d.FLOAT_MAT3=35675,d$d.FLOAT_MAT4=35676,d$d.SAMPLER_2D=35678,d$d.SAMPLER_CUBE=35680,d$d.VERTEX_ATTRIB_ARRAY_ENABLED=34338,d$d.VERTEX_ATTRIB_ARRAY_SIZE=34339,d$d.VERTEX_ATTRIB_ARRAY_STRIDE=34340,d$d.VERTEX_ATTRIB_ARRAY_TYPE=34341,d$d.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,d$d.VERTEX_ATTRIB_ARRAY_POINTER=34373,d$d.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,d$d.COMPILE_STATUS=35713,d$d.LOW_FLOAT=36336,d$d.MEDIUM_FLOAT=36337,d$d.HIGH_FLOAT=36338,d$d.LOW_INT=36339,d$d.MEDIUM_INT=36340,d$d.HIGH_INT=36341,d$d.FRAMEBUFFER=36160,d$d.RENDERBUFFER=36161,d$d.RGBA4=32854,d$d.RGB5_A1=32855,d$d.RGB565=36194,d$d.DEPTH_COMPONENT16=33189,d$d.STENCIL_INDEX=6401,d$d.STENCIL_INDEX8=36168,d$d.DEPTH_STENCIL=34041,d$d.RENDERBUFFER_WIDTH=36162,d$d.RENDERBUFFER_HEIGHT=36163,d$d.RENDERBUFFER_INTERNAL_FORMAT=36164,d$d.RENDERBUFFER_RED_SIZE=36176,d$d.RENDERBUFFER_GREEN_SIZE=36177,d$d.RENDERBUFFER_BLUE_SIZE=36178,d$d.RENDERBUFFER_ALPHA_SIZE=36179,d$d.RENDERBUFFER_DEPTH_SIZE=36180,d$d.RENDERBUFFER_STENCIL_SIZE=36181,d$d.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,d$d.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,d$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,d$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,d$d.COLOR_ATTACHMENT0=36064,d$d.DEPTH_ATTACHMENT=36096,d$d.STENCIL_ATTACHMENT=36128,d$d.DEPTH_STENCIL_ATTACHMENT=33306,d$d.NONE=0,d$d.FRAMEBUFFER_COMPLETE=36053,d$d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,d$d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,d$d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,d$d.FRAMEBUFFER_UNSUPPORTED=36061,d$d.FRAMEBUFFER_BINDING=36006,d$d.RENDERBUFFER_BINDING=36007,d$d.MAX_RENDERBUFFER_SIZE=34024,d$d.INVALID_FRAMEBUFFER_OPERATION=1286,d$d.UNPACK_FLIP_Y_WEBGL=37440,d$d.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,d$d.CONTEXT_LOST_WEBGL=37442,d$d.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,d$d.BROWSER_DEFAULT_WEBGL=37444,d$d._useProgram=null,d$d._depthTest=!0,d$d._depthMask=!0,d$d._blend=!1,d$d._cullFace=!1,d$d.curBindTexTarget=null,d$d.curBindTexValue=null,d$i(d$d,["_depthFunc",function(){return this._depthFunc=513;},"_sFactor",function(){return this._sFactor=1;},"_dFactor",function(){return this._dFactor=0;},"_frontFace",function(){return this._frontFace=2305;}]),d$d;}(),d$ya=function(d$a){function d$b(){d$b.__super.call(this);}d$o(d$b,"laya.webgl.display.GraphicsGL",d$j);var d$c=d$b.prototype;return d$c.setShader=function(d$a){this._saveToCmd(d$t.context._setShader,[d$a]);},d$c.setIBVB=function(d$a,d$b,d$c,d$d,d$e,d$f){this._saveToCmd(d$t.context._setIBVB,[d$a,d$b,d$c,d$d,d$e,d$f]);},d$c.drawParticle=function(d$a,d$b,d$c){var d$d=d$x.createParticleTemplate2D(d$c);d$d.x=d$a,d$d.y=d$b,this._saveToCmd(d$t.context._drawParticle,[d$d]);},d$b;}(),d$za=function(d$a){var d$c;function d$P(d$a){this._x=0,this._y=0,this._id=++d$P._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,d$P.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=d$P.MAXCLIPRECT,this.mOutPoint,this._canvas=d$a,this._canvas._addReference(),d$P._contextcount++,d$t.isFlash?(this._ib=d$ga.create(35044),d$sa.fillIBQuadrangle(this._ib,16)):this._ib=d$ga.QuadrangleIB,this.clear();}d$o(d$P,"laya.webgl.canvas.WebGLContext2D",d$e);var d$b=d$P.prototype;return d$b.setIsMainContext=function(){this._isMain=!0;},d$b.clearBG=function(d$a,d$b,d$c,d$d){var d$e=d$wa.mainContext;d$e.clearColor(d$a,d$b,d$c,d$d),d$e.clear(16384);},d$b._getSubmits=function(){return this._submits;},d$b._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var d$a=0,d$b=this._submits._length;d$a<d$b;d$a++)this._submits[d$a].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null);}},d$b.destroy=function(){--d$P._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=d$ga.QuadrangleIB&&this._ib.releaseResource();},d$b.clear=function(){this._submits||(this._other=d$c.DEFAULT,this._curMat=d$B.create(),this._vb=d$ha.create(-1),this._submits=[],this._save=[d$Y.Create(this)],this._save.length=10,this._shader2D=new d$g(),this._triangleMesh=d$Ka.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=d$c.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=d$P.MAXCLIPRECT,this._curSubmit=d$fa.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=d$T.DEFAULT;for(var d$a=0,d$b=this._submits._length;d$a<d$b;d$a++)this._submits[d$a].releaseRender(),this._submits[d$a]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1;},d$b.size=function(d$a,d$b){if(this._width!=d$a||this._height!=d$b)if(0==d$a||0==d$b){0!=this._vb._byteLength&&(this._width=d$a,this._height=d$b,this._vb.clear(),this._vb.upload());for(var d$c=0,d$d=this._submits._length;d$c<d$d;d$c++)this._submits[d$c].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null;}else this._width=d$a,this._height=d$b,this._targets&&this._targets.size(d$a,d$b),this._canvas.memorySize-=this._canvas.memorySize;0===d$a&&0===d$b&&this._releaseMem();},d$b._getTransformMatrix=function(){return this._curMat;},d$b.translate=function(d$a,d$b){0===d$a&&0===d$b||(d$$.save(this),this._curMat.bTransform&&(d$Z.save(this),this._curMat.transformPointN(d$C.TEMP.setTo(d$a,d$b)),d$a=d$C.TEMP.x,d$b=d$C.TEMP.y),this._x+=d$a,this._y+=d$b);},d$b.save=function(){this._save[this._save._length++]=d$Y.Create(this);},d$b.restore=function(){var d$a=this._save._length;if(!(d$a<1))for(var d$b=d$a-1;0<=d$b;d$b--){var d$c=this._save[d$b];if(d$c.restore(this),d$c.isSaveMark())return void(this._save._length=d$b);}},d$b._fillText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){void 0===d$l&&(d$l=0);var d$m=this._shader2D,d$n=this._curSubmit.shaderValue,d$o=d$e?d$qa.create(d$e):this._other.font;if(d$Q.enabled)d$m.ALPHA!==d$n.ALPHA&&(d$m.glTexture=null),d$pa.drawText(this,d$a,d$b,this._curMat,d$o,d$k||this._other.textAlign,d$f,d$i,d$j,d$c,d$d,d$l);else{this._shader2D.defines.getValue();var d$p=d$f?d$q.create(d$f)._color:d$m.colorAdd;d$m.ALPHA===d$n.ALPHA&&d$p===d$m.colorAdd&&d$n.colorAdd===d$m.colorAdd||(d$m.glTexture=null,d$m.colorAdd=d$p),d$pa.drawText(this,d$a,d$b,this._curMat,d$o,d$k||this._other.textAlign,d$f,d$i,d$j,d$c,d$d,d$l);}},d$b.fillWords=function(d$a,d$b,d$c,d$d,d$e,d$f){this._fillText(null,d$a,d$b,d$c,d$d,d$e,null,-1,null,d$f);},d$b.fillBorderWords=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this._fillBorderText(null,d$a,d$b,d$c,d$d,d$e,d$f,d$i,null);},d$b.fillText=function(d$a,d$b,d$c,d$d,d$e,d$f){this._fillText(d$a,null,d$b,d$c,d$d,d$e,null,-1,d$f);},d$b.strokeText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this._fillText(d$a,null,d$b,d$c,d$d,null,d$e,d$f||1,d$i);},d$b.fillBorderText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){this._fillBorderText(d$a,null,d$b,d$c,d$d,d$e,d$f,d$i,d$j);},d$b._fillBorderText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){if(!d$Q.enabled)return this._fillText(d$a,d$b,d$c,d$d,d$e,null,d$i,d$j||1,d$k),void this._fillText(d$a,d$b,d$c,d$d,d$e,d$f,null,-1,d$k);var d$l=this._shader2D,d$m=this._curSubmit.shaderValue;d$l.ALPHA!==d$m.ALPHA&&(d$l.glTexture=null);var d$n=d$e?(d$P._fontTemp.setFont(d$e),d$P._fontTemp):this._other.font;d$pa.drawText(this,d$a,d$b,this._curMat,d$n,d$k||this._other.textAlign,d$f,d$i,d$j||1,d$c,d$d,0);},d$b.fillRect=function(d$a,d$b,d$c,d$d,d$e){var d$f=this._vb;if(d$sa.fillRectImgVb(d$f,this._clipRect,d$a,d$b,d$c,d$d,d$K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var d$i=this._shader2D.fillStyle;d$e&&(this._shader2D.fillStyle=d$T.create(d$e));var d$j=this._shader2D,d$k=this._curSubmit.shaderValue;if(d$j.fillStyle!==d$k.fillStyle||d$j.ALPHA!==d$k.ALPHA){d$j.glTexture=null;var d$l=this._curSubmit=d$fa.createSubmit(this,this._ib,d$f,(d$f._byteLength-64)/32*3,d$Aa.create(2,0));d$l.shaderValue.color=d$j.fillStyle._color._color,d$l.shaderValue.ALPHA=d$j.ALPHA,this._submits[this._submits._length++]=d$l;}this._curSubmit._numEle+=6,this._shader2D.fillStyle=d$i;}},d$b.fillTexture=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){if(d$a.loaded&&d$a.bitmap&&d$a.source){var d$k=this._vb,d$l=d$a.bitmap.width,d$m=d$a.bitmap.height,d$n=d$a.uv,d$o=d$i.x%d$a.width,d$p=d$i.y%d$a.height;if(d$l!=d$j.w||d$m!=d$j.h){if(!d$j.w&&!d$j.h)switch(d$j.oy=d$j.ox=0,d$f){case"repeat":d$j.width=d$d,d$j.height=d$e;break;case"repeat-x":d$j.width=d$d,d$p<0?d$a.height+d$p>d$e?d$j.height=d$e:d$j.height=d$a.height+d$p:(d$j.oy=d$p,d$a.height+d$p>d$e?d$j.height=d$e-d$p:d$j.height=d$a.height);break;case"repeat-y":d$o<0?d$a.width+d$o>d$d?d$j.width=d$d:d$j.width=d$a.width+d$o:(d$j.ox=d$o,d$a.width+d$o>d$d?d$j.width=d$d-d$o:d$j.width=d$a.width),d$j.height=d$e;break;case"no-repeat":d$o<0?d$a.width+d$o>d$d?d$j.width=d$d:d$j.width=d$a.width+d$o:(d$j.ox=d$o,d$a.width+d$o>d$d?d$j.width=d$d-d$o:d$j.width=d$a.width),d$p<0?d$a.height+d$p>d$e?d$j.height=d$e:d$j.height=d$a.height+d$p:(d$j.oy=d$p,d$a.height+d$p>d$e?d$j.height=d$e-d$p:d$j.height=d$a.height);break;default:d$j.width=d$d,d$j.height=d$e;}d$j.w=d$l,d$j.h=d$m,d$j.uv=[0,0,d$j.width/d$l,0,d$j.width/d$l,d$j.height/d$m,0,d$j.height/d$m];}if(d$b+=d$j.ox,d$c+=d$j.oy,d$o-=d$j.ox,d$p-=d$j.oy,d$sa.fillRectImgVb(d$k,this._clipRect,d$b,d$c,d$j.width,d$j.height,d$j.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var d$q=d$Ja.create(this,this._ib,d$k,(d$k._byteLength-64)/32*3,d$Aa.create(256,0)),d$r=(this._submits[this._submits._length++]=d$q).shaderValue;d$r.textureHost=d$a;var d$s=d$n[0]*d$l,d$t=d$n[1]*d$m,d$u=(d$n[2]-d$n[0])*d$l,d$v=(d$n[5]-d$n[3])*d$m,d$w=-d$o/d$l,d$x=-d$p/d$m;d$r.u_TexRange[0]=d$s/d$l,d$r.u_TexRange[1]=d$u/d$l,d$r.u_TexRange[2]=d$t/d$m,d$r.u_TexRange[3]=d$v/d$m,d$r.u_offset[0]=d$w,d$r.u_offset[1]=d$x,d$Q.enabled&&!this._isMain&&d$q.addTexture(d$a,(d$k._byteLength>>2)-16),(this._curSubmit=d$q)._renderType=10017,d$q._numEle+=6;}}else this.sprite&&d$y.timer.callLater(this,this._repaintSprite);},d$b.setShader=function(d$a){d$V.save(this,1048576,this._shader2D,!0),this._shader2D.shader=d$a;},d$b.setFilters=function(d$a){d$V.save(this,2097152,this._shader2D,!0),this._shader2D.filters=d$a,this._curSubmit=d$fa.RENDERBASE,this._renderKey=0,this._drawCount++;},d$b.drawTexture=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this._drawTextureM(d$a,d$b,d$c,d$d,d$e,d$f,d$i,null,1);},d$b.addTextureVb=function(d$a,d$b,d$c){var d$d=this._curSubmit._vb||this._vb,d$e=d$d._byteLength>>2;d$d.byteLength=d$e+16<<2;for(var d$f=d$d.getFloat32Array(),d$i=0;d$i<16;d$i+=4)d$f[d$e++]=d$a[d$i]+d$b,d$f[d$e++]=d$a[d$i+1]+d$c,d$f[d$e++]=d$a[d$i+2],d$f[d$e++]=d$a[d$i+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),d$d._upload=!0;},d$b.willDrawTexture=function(d$a,d$b){if(!(d$a.loaded&&d$a.bitmap&&d$a.source))return this.sprite&&d$y.timer.callLater(this,this._repaintSprite),0;var d$c=d$a.bitmap,d$d=d$c.id+this._shader2D.ALPHA*d$b+10016;if(d$d==this._renderKey)return d$d;var d$e=this._shader2D,d$f=d$e.ALPHA,d$i=this._curSubmit.shaderValue;d$e.ALPHA*=d$b,this._renderKey=d$d,this._drawCount++,d$e.glTexture=d$c;var d$j=this._vb,d$k=null,d$l=d$j._byteLength/32*3,d$m=d$i.textureHost&&d$i.textureHost==d$a&&d$i.textureHost.alphaTexture==d$a.alphaTexture;return d$k=d$Ja.create(this,this._ib,d$j,d$l,d$Aa.create(1,0)),(this._submits[this._submits._length++]=d$k).shaderValue.textureHost=d$a,d$k._renderType=10016,d$k._preIsSameTextureShader=10016===this._curSubmit._renderType&&d$e.ALPHA===d$i.ALPHA&&d$m,this._curSubmit=d$k,d$e.ALPHA=d$f,d$d;},d$b.drawTextures=function(d$a,d$b,d$c,d$d){if(d$a.loaded&&d$a.bitmap&&d$a.source){var d$e=this._clipRect;if(this._clipRect=d$P.MAXCLIPRECT,this._drawTextureM(d$a,d$b[0],d$b[1],d$a.width,d$a.height,d$c,d$d,null,1)){if(this._clipRect=d$e,d$G.drawCall++,!(d$b.length<4)){for(var d$f=this._curSubmit._vb||this._vb,d$i=this._curMat.a,d$j=this._curMat.d,d$k=2,d$l=d$b.length;d$k<d$l;d$k+=2)d$sa.copyPreImgVb(d$f,(d$b[d$k]-d$b[d$k-2])*d$i,(d$b[d$k+1]-d$b[d$k-1])*d$j),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle);}}else alert("drawTextures err");}else this.sprite&&d$y.timer.callLater(this,this._repaintSprite);},d$b._drawTextureM=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){if(!d$a.loaded||!d$a.source)return this.sprite&&d$y.timer.callLater(this,this._repaintSprite),!1;var d$l=this._curSubmit._vb||this._vb,d$m=d$a.bitmap;d$b+=d$f,d$c+=d$i,this._drawCount++;var d$n=d$m.id+this._shader2D.ALPHA*d$k+10016;if(d$n!=this._renderKey){this._renderKey=d$n;var d$o=this._curSubmit.shaderValue,d$p=this._shader2D,d$q=d$p.ALPHA;d$p.ALPHA*=d$k,d$p.glTexture=d$m;var d$r=this._vb,d$s=null,d$t=d$r._byteLength/32*3,d$u=d$o.textureHost&&d$o.textureHost==d$a&&d$o.textureHost.alphaTexture==d$a.alphaTexture;d$s=d$Ja.create(this,this._ib,d$r,d$t,d$Aa.create(1,0)),(this._submits[this._submits._length++]=d$s).shaderValue.textureHost=d$a,d$s._renderType=10016,d$s._preIsSameTextureShader=10016===this._curSubmit._renderType&&d$p.ALPHA===d$o.ALPHA&&d$u,this._curSubmit=d$s,d$l=this._curSubmit._vb||this._vb,d$p.ALPHA=d$q;}return!!d$sa.fillRectImgVb(d$l,this._clipRect,d$b,d$c,d$d||d$a.width,d$e||d$a.height,d$a.uv,d$j||this._curMat,this._x,this._y,0,0)&&(d$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(d$a,(d$l._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0);},d$b._repaintSprite=function(){this.sprite&&this.sprite.repaint();},d$b._drawText=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){var d$m=d$a.bitmap;this._drawCount++;var d$n=d$m.id+this._shader2D.ALPHA+10016;if(d$n!=this._renderKey){this._renderKey=d$n;var d$o=this._curSubmit.shaderValue,d$p=this._shader2D;d$p.glTexture=d$m;var d$q=this._vb,d$r=null,d$s=d$q._byteLength/32*3,d$t=d$o.textureHost&&d$o.textureHost==d$a&&d$o.textureHost.alphaTexture==d$a.alphaTexture;(d$r=d$Q.enabled?d$Ja.create(this,this._ib,d$q,d$s,d$Aa.create(1,0)):d$Ja.create(this,this._ib,d$q,d$s,d$$a.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&d$p.ALPHA===d$o.ALPHA&&d$t,(this._submits[this._submits._length++]=d$r).shaderValue.textureHost=d$a,d$r._renderType=10016,this._curSubmit=d$r;}d$a.active();var d$u=this._curSubmit._vb||this._vb;d$sa.fillRectImgVb(d$u,this._clipRect,d$b+d$i,d$c+d$j,d$d||d$a.width,d$e||d$a.height,d$a.uv,d$f||this._curMat,this._x,this._y,d$k,d$l,!0)&&(d$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(d$a,(d$u._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle));},d$b.drawTextureWithTransform=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){if(d$f){var d$l=this._curMat,d$m=this._x,d$n=this._y;(0!==d$i||0!==d$j)&&(this._x=d$i*d$l.a+d$j*d$l.c,this._y=d$j*d$l.d+d$i*d$l.b),d$f&&d$l.bTransform?(d$B.mul(d$f,d$l,d$P._tmpMatrix),(d$f=d$P._tmpMatrix)._checkTransform()):(this._x+=d$l.tx,this._y+=d$l.ty),this._drawTextureM(d$a,d$b,d$c,d$d,d$e,0,0,d$f,d$k),this._x=d$m,this._y=d$n;}else this._drawTextureM(d$a,d$b,d$c,d$d,d$e,d$i,d$j,null,d$k);},d$b.fillQuadrangle=function(d$a,d$b,d$c,d$d,d$e){var d$f=this._curSubmit,d$i=this._vb,d$j=this._shader2D,d$k=d$f.shaderValue;if(this._renderKey=0,d$a.bitmap){var d$l=d$a.bitmap;d$j.glTexture==d$l&&d$j.ALPHA===d$k.ALPHA||(d$j.glTexture=d$l,(d$f=this._curSubmit=d$fa.createSubmit(this,this._ib,d$i,d$i._byteLength/32*3,d$Aa.create(1,0))).shaderValue.glTexture=d$l,this._submits[this._submits._length++]=d$f),d$sa.fillQuadrangleImgVb(d$i,d$b,d$c,d$d,d$a.uv,d$e||this._curMat,this._x,this._y);}else d$f.shaderValue.fillStyle&&d$f.shaderValue.fillStyle.equal(d$a)&&d$j.ALPHA===d$k.ALPHA||(d$j.glTexture=null,(d$f=this._curSubmit=d$fa.createSubmit(this,this._ib,d$i,d$i._byteLength/32*3,d$Aa.create(2,0))).shaderValue.defines.add(2),d$f.shaderValue.fillStyle=d$T.create(d$a),this._submits[this._submits._length++]=d$f),d$sa.fillQuadrangleImgVb(d$i,d$b,d$c,d$d,d$K.DEF_UV,d$e||this._curMat,this._x,this._y);d$f._numEle+=6;},d$b.drawTexture2=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){if(0!=d$f){var d$k=this._curMat;if(this._x=d$a*d$k.a+d$b*d$k.c,this._y=d$b*d$k.d+d$a*d$k.b,d$e&&(d$e=d$k.bTransform||d$e.bTransform?(d$B.mul(d$e,d$k,d$P._tmpMatrix),d$P._tmpMatrix):(this._x+=d$e.tx+d$k.tx,this._y+=d$e.ty+d$k.ty,d$B.EMPTY)),1!==d$f||d$i){var d$l=this._shader2D.ALPHA,d$m=this._nBlendType;this._shader2D.ALPHA=d$f,d$i&&(this._nBlendType=d$S.TOINT(d$i)),this._drawTextureM(d$j[0],d$j[1]-d$c,d$j[2]-d$d,d$j[3],d$j[4],0,0,d$e,1),this._shader2D.ALPHA=d$l,this._nBlendType=d$m;}else this._drawTextureM(d$j[0],d$j[1]-d$c,d$j[2]-d$d,d$j[3],d$j[4],0,0,d$e,1);this._x=this._y=0;}},d$b.drawCanvas=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$a.context;if(this._renderKey=0,d$f._targets)this._submits[this._submits._length++]=d$Ia.create(d$f,0,null),this._curSubmit=d$fa.RENDERBASE,d$f._targets.drawTo(this,d$b,d$c,d$d,d$e);else{var d$i=this._submits[this._submits._length++]=d$Ia.create(d$f,this._shader2D.ALPHA,this._shader2D.filters),d$j=d$d/d$a.width,d$k=d$e/d$a.height,d$l=d$i._matrix;this._curMat.copyTo(d$l),1!=d$j&&1!=d$k&&d$l.scale(d$j,d$k);var d$m=d$l.tx,d$n=d$l.ty;d$l.tx=d$l.ty=0,d$l.transformPoint(d$C.TEMP.setTo(d$b,d$c)),d$l.translate(d$C.TEMP.x+d$m,d$C.TEMP.y+d$n),this._curSubmit=d$fa.RENDERBASE;}d$z.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=d$f._targets?"yellow":"green",this.strokeRect(d$b-1,d$c-1,d$d+2,d$e+2,1),this.strokeRect(d$b,d$c,d$d,d$e,1),this.restore());},d$b.drawTarget=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){void 0===d$l&&(d$l=-1);var d$m=this._vb;if(d$sa.fillRectImgVb(d$m,this._clipRect,d$b,d$c,d$d,d$e,d$k||d$K.DEF_UV,d$f||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var d$n=this._curSubmit=d$na.create(this,this._ib,d$m,(d$m._byteLength-64)/32*3,d$j,d$i);d$n.blendType=-1==d$l?this._nBlendType:d$l,d$n.scope=d$a,this._submits[this._submits._length++]=d$n,this._curSubmit._numEle+=6;}},d$b.mixRGBandAlpha=function(d$a){return this._mixRGBandAlpha(d$a,this._shader2D.ALPHA);},d$b._mixRGBandAlpha=function(d$a,d$b){var d$c=(4278190080&d$a)>>>24;return 0!=d$c?d$c*=d$b:d$c=255*d$b,16777215&d$a|d$c<<24;},d$b.drawTriangles=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){if(!d$a.loaded||!d$a.source)return this.sprite&&d$y.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;d$a.bitmap;var d$m=this._mixRGBandAlpha(4294967295,d$j),d$n=(d$d.length,d$f.length);this._renderKey=-1;var d$o=this._curSubmit=d$Ja.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,d$Aa.create(1,0));return d$o.shaderValue.textureHost=d$a,d$o._renderType=10016,this._submits[this._submits._length++]=d$o,d$i?(d$P._tmpMatrix.a=d$i.a,d$P._tmpMatrix.b=d$i.b,d$P._tmpMatrix.c=d$i.c,d$P._tmpMatrix.d=d$i.d,d$P._tmpMatrix.tx=d$i.tx+d$b,d$P._tmpMatrix.ty=d$i.ty+d$c,d$B.mul(d$P._tmpMatrix,this._curMat,d$P._tmpMatrix)):(d$P._tmpMatrix.a=this._curMat.a,d$P._tmpMatrix.b=this._curMat.b,d$P._tmpMatrix.c=this._curMat.c,d$P._tmpMatrix.d=this._curMat.d,d$P._tmpMatrix.tx=this._curMat.tx+d$b,d$P._tmpMatrix.ty=this._curMat.ty+d$c),this._triangleMesh.addData(d$d,d$e,d$f,d$P._tmpMatrix,d$m,this),this._curSubmit._numEle+=d$n,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0;},d$b.transform=function(d$a,d$b,d$c,d$d,d$e,d$f){d$Z.save(this),d$B.mul(d$B.TEMP.setTo(d$a,d$b,d$c,d$d,d$e,d$f),this._curMat,this._curMat),this._curMat._checkTransform();},d$b.setTransformByMatrix=function(d$a){d$a.copyTo(this._curMat);},d$b.transformByMatrix=function(d$a){d$Z.save(this),d$B.mul(d$a,this._curMat,this._curMat),this._curMat._checkTransform();},d$b.rotate=function(d$a){d$Z.save(this),this._curMat.rotateEx(d$a);},d$b.scale=function(d$a,d$b){d$Z.save(this),this._curMat.scaleEx(d$a,d$b);},d$b.clipRect=function(d$a,d$b,d$c,d$d){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var d$e=d$ma.create(4);this.addRenderObject(d$e);var d$f=this._vb,d$i=d$f._byteLength>>2;if(d$sa.fillRectImgVb(d$f,null,d$a,d$b,d$c,d$d,d$K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var d$j=this._curSubmit=d$fa.createSubmit(this,this._ib,d$f,(d$f._byteLength-64)/32*3,d$Aa.create(2,0));d$j.shaderValue.ALPHA=1,this._submits[this._submits._length++]=d$j,this._curSubmit._numEle+=6;}else alert("clipRect calc stencil rect error");var d$k=d$ma.create(5);this.addRenderObject(d$k);var d$l=d$f.getFloat32Array(),d$m=Math.min(Math.min(Math.min(d$l[0+d$i],d$l[4+d$i]),d$l[8+d$i]),d$l[12+d$i]),d$n=Math.max(Math.max(Math.max(d$l[0+d$i],d$l[4+d$i]),d$l[8+d$i]),d$l[12+d$i]),d$o=Math.min(Math.min(Math.min(d$l[1+d$i],d$l[5+d$i]),d$l[9+d$i]),d$l[13+d$i]),d$p=Math.max(Math.max(Math.max(d$l[1+d$i],d$l[5+d$i]),d$l[9+d$i]),d$l[13+d$i]);d$X.save(this,d$k,d$a,d$b,d$c,d$d,d$m,d$o,d$n-d$m,d$p-d$o),this._curSubmit=d$fa.RENDERBASE;}else{d$c*=this._curMat.a,d$d*=this._curMat.d;var d$q=d$C.TEMP;this._curMat.transformPoint(d$q.setTo(d$a,d$b)),d$c<0&&(d$q.x=d$q.x+d$c,d$c=-d$c),d$d<0&&(d$q.y=d$q.y+d$d,d$d=-d$d),this._renderKey=0;var d$r=this._curSubmit=d$la.create(this);(this._submits[this._submits._length++]=d$r).submitIndex=this._submits._length,d$r.submitLength=9999999,d$W.save(this,d$r);var d$s=this._clipRect,d$t=d$s.x,d$u=d$s.y,d$v=d$q.x+d$c,d$w=d$q.y+d$d;d$t<d$q.x&&(d$s.x=d$q.x),d$u<d$q.y&&(d$s.y=d$q.y),d$s.width=Math.min(d$v,d$t+d$s.width)-d$s.x,d$s.height=Math.min(d$w,d$u+d$s.height)-d$s.y,this._shader2D.glTexture=null,d$r.clipRect.copyFrom(d$s),this._curSubmit=d$fa.RENDERBASE;}},d$b.setIBVB=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m){if(void 0===d$k&&(d$k=0),void 0===d$l&&(d$l=0),void 0===d$m&&(d$m=0),null===d$c){if(d$t.isFlash){var d$n=d$d;d$n._selfIB||(d$n._selfIB=d$ga.create(35044)),d$n._selfIB.clear(),d$c=d$n._selfIB;}else d$c=this._ib;d$sa.expandIBQuadrangle(d$c,d$d._byteLength/(4*d$d.vertexStride*4));}if(!d$j||!d$i)throw Error("setIBVB must input:shader shaderValues");var d$o=d$ka.create(this,d$d,d$c,d$e,d$i,d$j,d$k,d$l,d$m);d$f||(d$f=d$B.EMPTY),d$f.translate(d$a,d$b),d$B.mul(d$f,this._curMat,d$o._mat),d$f.translate(-d$a,-d$b),this._submits[this._submits._length++]=d$o,this._curSubmit=d$fa.RENDERBASE,this._renderKey=0;},d$b.addRenderObject=function(d$a){this._submits[this._submits._length++]=d$a;},d$b.fillTrangles=function(d$a,d$b,d$c,d$d,d$e){var d$f=this._curSubmit,d$i=this._vb,d$j=this._shader2D,d$k=d$f.shaderValue,d$l=d$d.length>>4,d$m=d$a.bitmap;this._renderKey=0,d$j.glTexture==d$m&&d$j.ALPHA===d$k.ALPHA||((d$f=this._curSubmit=d$fa.createSubmit(this,this._ib,d$i,d$i._byteLength/32*3,d$Aa.create(1,0))).shaderValue.textureHost=d$a,this._submits[this._submits._length++]=d$f),d$sa.fillTranglesVB(d$i,d$b,d$c,d$d,d$e||this._curMat,this._x,this._y),d$f._numEle+=6*d$l;},d$b.submitElement=function(d$a,d$b){var d$c=this._submits;for(d$b<0&&(d$b=d$c._length);d$a<d$b;)d$a+=d$c[d$a].renderSubmit();},d$b.finish=function(){d$wa.mainContext.finish();},d$b.flush=function(){var d$a=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(d$a>this._ib.bufferLength/12&&d$sa.expandIBQuadrangle(this._ib,d$a),!this._isMain&&d$Q.enabled&&d$Q._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=d$Q._atlasRestore;for(var d$b=this._submits,d$c=0,d$d=d$b._length;d$c<d$d;d$c++){var d$e=d$b[d$c];10016===d$e.getRenderType()&&d$e.checkTexture();}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),d$ba.instance&&d$ba.getInstance().reset();var d$f;for(d$c=0,d$f=this.meshlist.length;d$c<d$f;d$c++){var d$i=this.meshlist[d$c];d$i.canReuse?d$i.releaseMesh():d$i.destroy();}return this.meshlist.length=0,this._curSubmit=d$fa.RENDERBASE,this._renderKey=0,this._triangleMesh=d$Ka.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length;},d$b.setPathId=function(d$a){if(this.mId=d$a,-1!=this.mId){this.mHaveKey=!1;var d$b=d$M.getInstance();d$b.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,d$b.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0);}},d$b.movePath=function(d$a,d$b){var d$c=d$a,d$d=d$b;d$a=this._curMat.a*d$c+this._curMat.c*d$d+this._curMat.tx,d$b=this._curMat.b*d$c+this._curMat.d*d$d+this._curMat.ty,this.mX+=d$a,this.mY+=d$b;},d$b.beginPath=function(){var d$a=this._getPath();d$a.tempArray.length=0,d$a.closePath=!1,this.mX=0,this.mY=0;},d$b.closePath=function(){this._path.closePath=!0;},d$b.fill=function(d$a){void 0===d$a&&(d$a=!1);var d$b=this._getPath();this.drawPoly(0,0,d$b.tempArray,this.fillStyle._color.numColor,0,0,d$a);},d$b.stroke=function(){var d$a=this._getPath();if(0<this.lineWidth){if(-1==this.mId)d$a.drawLine(0,0,d$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var d$b=d$M.getInstance().shapeLineDic[this.mId];d$b.rebuild(d$a.tempArray),d$a.setGeomtry(d$b);}else d$M.getInstance().addLine(this.mId,d$a.drawLine(0,0,d$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor));d$a.update();var d$c=[this.mX,this.mY],d$d=d$fa.createShape(this,d$a.ib,d$a.vb,d$a.count,d$a.offset,d$Aa.create(4,0));d$d.shaderValue.ALPHA=this._shader2D.ALPHA,d$d.shaderValue.u_pos=d$c,d$d.shaderValue.u_mmat2=d$ua.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=d$d,this._renderKey=-1;}},d$b.line=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=this._curSubmit,d$j=this._vb;if(d$sa.fillLineVb(d$j,this._clipRect,d$a,d$b,d$c,d$d,d$e,d$f)){this._renderKey=0;var d$k=this._shader2D,d$l=d$i.shaderValue;d$k.strokeStyle===d$l.strokeStyle&&d$k.ALPHA===d$l.ALPHA||(d$k.glTexture=null,(d$i=this._curSubmit=d$fa.createSubmit(this,this._ib,d$j,(d$j._byteLength-64)/32*3,d$Aa.create(2,0))).shaderValue.strokeStyle=d$k.strokeStyle,d$i.shaderValue.mainID=2,d$i.shaderValue.ALPHA=d$k.ALPHA,this._submits[this._submits._length++]=d$i),d$i._numEle+=6;}},d$b.moveTo=function(d$a,d$b,d$c){void 0===d$c&&(d$c=!0);var d$d=this._getPath();if(d$c){var d$e=d$a,d$f=d$b;d$a=this._curMat.a*d$e+this._curMat.c*d$f,d$b=this._curMat.b*d$e+this._curMat.d*d$f;}d$d.addPoint(d$a,d$b);},d$b.lineTo=function(d$a,d$b,d$c){void 0===d$c&&(d$c=!0);var d$d=this._getPath();if(d$c){var d$e=d$a,d$f=d$b;d$a=this._curMat.a*d$e+this._curMat.c*d$f,d$b=this._curMat.b*d$e+this._curMat.d*d$f;}d$d.addPoint(d$a,d$b);},d$b.drawCurves=function(d$a,d$b,d$c){this.setPathId(-1),this.beginPath(),this.strokeStyle=d$c[3],this.lineWidth=d$c[4];var d$d=d$c[2];d$a+=d$c[0],d$b+=d$c[1],this.movePath(d$a,d$b),this.moveTo(d$d[0],d$d[1]);for(var d$e=2,d$f=d$d.length;d$e<d$f;)this.quadraticCurveTo(d$d[d$e++],d$d[d$e++],d$d[d$e++],d$d[d$e++]);this.stroke();},d$b.arcTo=function(d$a,d$b,d$c,d$d,d$e){if(-1==this.mId||!this.mHaveKey){var d$f=0,d$i=0,d$j=0,d$k=this._getPath();this._curMat.copyTo(d$P._tmpMatrix),d$P._tmpMatrix.tx=d$P._tmpMatrix.ty=0,d$P._tempPoint.setTo(d$k.getEndPointX(),d$k.getEndPointY()),d$P._tmpMatrix.invertTransformPoint(d$P._tempPoint);var d$l=d$P._tempPoint.x-d$a,d$m=d$P._tempPoint.y-d$b,d$n=Math.sqrt(d$l*d$l+d$m*d$m);if(!(d$n<=1e-6)){var d$o=d$l/d$n,d$p=d$m/d$n,d$q=d$c-d$a,d$r=d$d-d$b,d$s=d$q*d$q+d$r*d$r,d$t=Math.sqrt(d$s);if(!(d$t<=1e-6)){var d$u=d$q/d$t,d$v=d$r/d$t,d$w=d$o+d$u,d$x=d$p+d$v,d$y=Math.sqrt(d$w*d$w+d$x*d$x);if(!(d$y<=1e-6)){var d$z=d$w/d$y,d$A=d$x/d$y,d$B=Math.acos(d$z*d$o+d$A*d$p),d$C=Math.PI/2-d$B,d$D=(d$n=d$e/Math.tan(d$C))*d$o+d$a,d$E=d$n*d$p+d$b,d$F=Math.sqrt(d$n*d$n+d$e*d$e),d$G=d$a+d$z*d$F,d$H=d$b+d$A*d$F,d$I=0,d$J=0;if(0<=d$o*d$v-d$p*d$u){var d$K=2*d$C/d$P.SEGNUM;d$I=Math.sin(d$K),d$J=Math.cos(d$K);}else d$K=2*-d$C/d$P.SEGNUM,d$I=Math.sin(d$K),d$J=Math.cos(d$K);d$i=this._curMat.a*d$D+this._curMat.c*d$E,d$j=this._curMat.b*d$D+this._curMat.d*d$E,d$i==this._path.getEndPointX()&&d$j==this._path.getEndPointY()||d$k.addPoint(d$i,d$j);var d$L=d$D-d$G,d$M=d$E-d$H;for(d$f=0;d$f<d$P.SEGNUM;d$f++){var d$N=d$L*d$J+d$M*d$I,d$O=-d$L*d$I+d$M*d$J;d$i=d$N+d$G,d$j=d$O+d$H,d$a=this._curMat.a*d$i+this._curMat.c*d$j,d$j=d$b=this._curMat.b*d$i+this._curMat.d*d$j,(d$i=d$a)==this._path.getEndPointX()&&d$j==this._path.getEndPointY()||d$k.addPoint(d$i,d$j),d$L=d$N,d$M=d$O;}}}}}},d$b.arc=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){if(void 0===d$f&&(d$f=!1),void 0===d$i&&(d$i=!0),-1!=this.mId){var d$j=d$M.getInstance().shapeDic[this.mId];if(d$j&&this.mHaveKey&&!d$j.needUpdate(this._curMat))return;d$b=d$a=0;}var d$k,d$l=0,d$m=0,d$n=0,d$o=0,d$p=0,d$q=0,d$r=0;if(d$m=d$e-d$d,d$f){if(Math.abs(d$m)>=2*Math.PI)d$m=2*-Math.PI;else for(;0<d$m;)d$m-=2*Math.PI;}else if(Math.abs(d$m)>=2*Math.PI)d$m=2*Math.PI;else for(;d$m<0;)d$m+=2*Math.PI;d$k=d$m/(d$r=d$c<101?Math.max(10,d$m*d$c/5):d$c<201?Math.max(10,d$m*d$c/20):Math.max(10,d$m*d$c/40))/2,d$n=Math.abs(4/3*(1-Math.cos(d$k))/Math.sin(d$k)),d$f&&(d$n=-d$n);var d$s=this._getPath(),d$t=NaN,d$u=NaN;for(d$q=0;d$q<=d$r;d$q++)d$l=d$d+d$m*(d$q/d$r),d$o=d$a+Math.cos(d$l)*d$c,d$p=d$b+Math.sin(d$l)*d$c,d$i&&(d$t=d$o,d$u=d$p,d$o=this._curMat.a*d$t+this._curMat.c*d$u,d$p=this._curMat.b*d$t+this._curMat.d*d$u),d$o==this._path.getEndPointX()&&d$p==this._path.getEndPointY()||d$s.addPoint(d$o,d$p);d$o=d$a+Math.cos(d$e)*d$c,d$p=d$b+Math.sin(d$e)*d$c,d$i&&(d$t=d$o,d$u=d$p,d$o=this._curMat.a*d$t+this._curMat.c*d$u,d$p=this._curMat.b*d$t+this._curMat.d*d$u),d$o==this._path.getEndPointX()&&d$p==this._path.getEndPointY()||d$s.addPoint(d$o,d$p);},d$b.quadraticCurveTo=function(d$a,d$b,d$c,d$d){var d$e=d$n.I,d$f=d$c,d$i=d$d;d$c=this._curMat.a*d$f+this._curMat.c*d$i,d$d=this._curMat.b*d$f+this._curMat.d*d$i,d$f=d$a,d$i=d$b,d$a=this._curMat.a*d$f+this._curMat.c*d$i,d$b=this._curMat.b*d$f+this._curMat.d*d$i;for(var d$j=d$e.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),d$a,d$b,d$c,d$d],30,2),d$k=0,d$l=d$j.length/2;d$k<d$l;d$k++)this.lineTo(d$j[2*d$k],d$j[2*d$k+1],!1);this.lineTo(d$c,d$d,!1);},d$b.rect=function(d$a,d$b,d$c,d$d){this._other=this._other.make(),this._other.path||(this._other.path=new d$U()),this._other.path.rect(d$a,d$b,d$c,d$d);},d$b.strokeRect=function(d$a,d$b,d$c,d$d,d$e){var d$f=.5*d$e;this.line(d$a-d$f,d$b,d$a+d$c+d$f,d$b,d$e,this._curMat),this.line(d$a+d$c,d$b,d$a+d$c,d$b+d$d,d$e,this._curMat),this.line(d$a,d$b,d$a,d$b+d$d,d$e,this._curMat),this.line(d$a-d$f,d$b+d$d,d$a+d$c+d$f,d$b+d$d,d$e,this._curMat);},d$b.clip=function(){},d$b.drawPoly=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){void 0===d$i&&(d$i=!1),this._renderKey=0,this._shader2D.glTexture=null;var d$j=this._getPath();if(-1==this.mId)d$j.polygon(d$a,d$b,d$c,d$d,d$e||1,d$f);else if(this.mHaveKey){var d$k=d$M.getInstance().shapeDic[this.mId];d$k.setMatrix(this._curMat),d$k.rebuild(d$j.tempArray),d$j.setGeomtry(d$k);}else{var d$l=d$j.polygon(d$a,d$b,d$c,d$d,d$e||1,d$f);d$M.getInstance().addShape(this.mId,d$l),d$l.setMatrix(this._curMat);}d$j.update();var d$m,d$n=[this.mX,this.mY];if((d$m=d$fa.createShape(this,d$j.ib,d$j.vb,d$j.count,d$j.offset,d$Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,d$m.shaderValue.u_pos=d$n,d$m.shaderValue.u_mmat2=d$ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=d$m,0<d$e){if(this.mHaveLineKey){var d$o=d$M.getInstance().shapeLineDic[this.mId];d$o.rebuild(d$j.tempArray),d$j.setGeomtry(d$o);}else d$M.getInstance().addShape(this.mId,d$j.drawLine(d$a,d$b,d$c,d$e,d$f));d$j.update(),(d$m=d$fa.createShape(this,d$j.ib,d$j.vb,d$j.count,d$j.offset,d$Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,d$m.shaderValue.u_mmat2=d$ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=d$m;}},d$b.drawParticle=function(d$a,d$b,d$c){d$c.x=d$a,d$c.y=d$b,this._submits[this._submits._length++]=d$c;},d$b._getPath=function(){return this._path||(this._path=new d$U());},d$d(0,d$b,"globalCompositeOperation",function(){return d$S.NAMES[this._nBlendType];},function(d$a){var d$b=d$S.TOINT[d$a];null==d$b||this._nBlendType===d$b||(d$V.save(this,65536,this,!0),this._curSubmit=d$fa.RENDERBASE,this._renderKey=0,this._nBlendType=d$b);}),d$d(0,d$b,"strokeStyle",function(){return this._shader2D.strokeStyle;},function(d$a){this._shader2D.strokeStyle.equal(d$a)||(d$V.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=d$T.create(d$a));}),d$d(0,d$b,"globalAlpha",function(){return this._shader2D.ALPHA;},function(d$a){(d$a=Math.floor(1e3*d$a)/1e3)!=this._shader2D.ALPHA&&(d$V.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=d$a);}),d$d(0,d$b,"asBitmap",null,function(d$a){if(d$a){if(this._targets||(this._targets=new d$_()),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height);}else this._targets=null;}),d$d(0,d$b,"fillStyle",function(){return this._shader2D.fillStyle;},function(d$a){this._shader2D.fillStyle.equal(d$a)||(d$V.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=d$T.create(d$a));}),d$d(0,d$b,"textAlign",function(){return this._other.textAlign;},function(d$a){this._other.textAlign===d$a||(this._other=this._other.make(),d$V.save(this,32768,this._other,!1),this._other.textAlign=d$a);}),d$d(0,d$b,"lineWidth",function(){return this._other.lineWidth;},function(d$a){this._other.lineWidth===d$a||(this._other=this._other.make(),d$V.save(this,256,this._other,!1),this._other.lineWidth=d$a);}),d$d(0,d$b,"textBaseline",function(){return this._other.textBaseline;},function(d$a){this._other.textBaseline===d$a||(this._other=this._other.make(),d$V.save(this,16384,this._other,!1),this._other.textBaseline=d$a);}),d$d(0,d$b,"font",null,function(d$a){d$a!=this._other.font.toString()&&(this._other=this._other.make(),d$V.save(this,8,this._other,!1),this._other.font===d$qa.EMPTY?this._other.font=new d$qa(d$a):this._other.font.setFont(d$a));}),d$P.__init__=function(){d$c.DEFAULT=new d$c();},d$P._tempPoint=new d$C(),d$P._SUBMITVBSIZE=32e3,d$P._MAXSIZE=99999999,d$P._RECTVBSIZE=16,d$P.MAXCLIPRECT=new d$D(0,0,99999999,99999999),d$P._COUNT=0,d$P._tmpMatrix=new d$B(),d$P.SEGNUM=32,d$P._contextcount=0,d$i(d$P,["_fontTemp",function(){return this._fontTemp=new d$qa();},"_drawStyleTemp",function(){return this._drawStyleTemp=new d$T(null);}]),d$P.__init$=function(){d$c=function(){function d$a(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=d$qa.EMPTY;}d$o(d$a,"");var d$b=d$a.prototype;return d$b.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=d$qa.EMPTY;},d$b.make=function(){return this===d$a.DEFAULT?new d$a():this;},d$a.DEFAULT=null,d$a;}();},d$P;}(),d$Aa=function(d$a){function d$d(d$a,d$b){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,d$d.__super.call(this),this.defines=new d$Ea(),this.position=d$d._POSITION,this.mainID=d$a,this.subID=d$b,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=d$a|d$b,this._inClassCache=d$d._cache[this._cacheID],0<d$a&&!this._inClassCache&&(this._inClassCache=d$d._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear();}d$o(d$d,"laya.webgl.shader.d2.value.Value2D",d$O);var d$b=d$d.prototype;return d$b.setValue=function(d$a){},d$b.refresh=function(){var d$a=this.size;return d$a[0]=d$ua.width,d$a[1]=d$ua.height,this.alpha=this.ALPHA*d$ua.worldAlpha,this.mmat=d$ua.worldMatrix4,this;},d$b._ShaderWithCompile=function(){return d$Ya.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,d$_a.create);},d$b._withWorldShaderDefines=function(){var d$a=d$ua.worldShaderDefines,d$b=d$Ya.sharders[this.mainID|this.defines._value|d$a.getValue()];if(!d$b){var d$c,d$d={};for(d$c in this.defines.toNameDic())d$d[d$c]="";for(d$c in d$a.toNameDic())d$d[d$c]="";d$b=d$Ya.withCompile2D(0,this.mainID,d$d,this.mainID|this.defines._value|d$a.getValue(),d$_a.create);}var d$e=d$ua.worldFilters;if(!d$e)return d$b;for(var d$f,d$i=d$e.length,d$j=0;d$j<d$i;d$j++)(d$f=d$e[d$j])&&d$f.action.setValue(this);return d$b;},d$b.upload=function(){var d$a=d$ua;this.alpha=this.ALPHA*d$a.worldAlpha,d$ua.worldMatrix4!==d$ua.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),d$wa.shaderHighPrecision&&this.defines.add(1024);var d$b,d$c=d$a.worldShaderDefines?this._withWorldShaderDefines():d$Ya.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=d$a.width,this.size[1]=d$a.height,this.mmat=d$a.worldMatrix4,d$La.activeShader!==d$c?d$c._shaderValueWidth!==d$a.width||d$c._shaderValueHeight!==d$a.height?(d$c._shaderValueWidth=d$a.width,d$c._shaderValueHeight=d$a.height):d$b=d$c._params2dQuick2||d$c._make2dQuick2():d$c._shaderValueWidth!==d$a.width||d$c._shaderValueHeight!==d$a.height?(d$c._shaderValueWidth=d$a.width,d$c._shaderValueHeight=d$a.height):d$b=d$c._params2dQuick1||d$c._make2dQuick1(),d$c.upload(this,d$b);},d$b.setFilters=function(d$a){if(this.filters=d$a)for(var d$b,d$c=d$a.length,d$d=0;d$d<d$c;d$d++)(d$b=d$a[d$d])&&(this.defines.add(d$b.type),d$b.action.setValue(this));},d$b.clear=function(){this.defines.setValue(this.subID);},d$b.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear();},d$d._initone=function(d$a,d$b){d$d._typeClass[d$a]=d$b,d$d._cache[d$a]=[],d$d._cache[d$a]._length=0;},d$d.__init__=function(){d$d._POSITION=[2,5126,!1,4*d$ra.BYTES_PE,0],d$d._TEXCOORD=[2,5126,!1,4*d$ra.BYTES_PE,2*d$ra.BYTES_PE],d$d._initone(2,d$Pa),d$d._initone(4,d$Sa),d$d._initone(256,d$Qa),d$d._initone(512,d$Oa),d$d._initone(1,d$Ra),d$d._initone(65,d$$a),d$d._initone(9,d$Ra);},d$d.create=function(d$a,d$b){var d$c=d$d._cache[d$a|d$b];return d$c._length?d$c[--d$c._length]:new d$d._typeClass[d$a|d$b](d$b);},d$d._POSITION=null,d$d._TEXCOORD=null,d$d._cache=[],d$d._typeClass=[],d$d.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d$d;}(),d$Ba=function(d$a){function d$s(d$a,d$b){d$s.__super.call(this,d$a,d$b);}d$o(d$s,"laya.webgl.utils.RenderSprite3D",d$u);var d$b=d$s.prototype;return d$b.onCreate=function(d$a){switch(d$a){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform);}},d$b._mask=function(d$a,d$b,d$c,d$d){var d$e,d$f,d$i=this._next,d$j=d$a.mask;if(d$j){d$b.ctx.save();var d$k=d$b.ctx.globalCompositeOperation,d$l=new d$D();if(d$l.copyFrom(d$j.getBounds()),d$l.width=Math.round(d$l.width),d$l.height=Math.round(d$l.height),d$l.x=Math.round(d$l.x),d$l.y=Math.round(d$l.y),0<d$l.width&&0<d$l.height){var d$m=d$a._style._tf,d$n=d$ja.create();d$n.addValue("bounds",d$l),d$e=d$ia.create([d$n,d$b],laya.webgl.utils.RenderSprite3D.tmpTarget),d$b.addRenderObject(d$e),d$j.render(d$b,-d$l.x,-d$l.y),d$e=d$ia.create([d$n],laya.webgl.utils.RenderSprite3D.endTmpTarget),d$b.addRenderObject(d$e),d$b.ctx.save(),d$b.clipRect(d$c-d$m.translateX+d$l.x,d$d-d$m.translateY+d$l.y,d$l.width,d$l.height),d$i._fun.call(d$i,d$a,d$b,d$c,d$d),d$b.ctx.restore(),d$f=d$ma.create(6),d$k=d$b.ctx.globalCompositeOperation,d$f.blendMode="mask",d$b.addRenderObject(d$f),d$B.TEMP.identity();var d$o=d$Aa.create(1,0),d$p=d$K.INV_UV,d$q=d$l.width,d$r=d$l.height;(d$l.width<32||d$l.height<32)&&((d$p=d$s.tempUV)[0]=0,d$p[1]=0,d$p[2]=32<=d$l.width?1:d$l.width/32,d$p[3]=0,d$p[4]=32<=d$l.width?1:d$l.width/32,d$p[5]=32<=d$l.height?1:d$l.height/32,d$p[6]=0,d$p[7]=32<=d$l.height?1:d$l.height/32,d$l.width=32<=d$l.width?d$l.width:32,d$l.height=32<=d$l.height?d$l.height:32,d$p[1]*=-1,d$p[3]*=-1,d$p[5]*=-1,d$p[7]*=-1,d$p[1]+=1,d$p[3]+=1,d$p[5]+=1,d$p[7]+=1),d$b.ctx.drawTarget(d$n,d$c+d$l.x-d$m.translateX,d$d+d$l.y-d$m.translateY,d$q,d$r,d$B.TEMP,"tmpTarget",d$o,d$p,6),d$e=d$ia.create([d$n],laya.webgl.utils.RenderSprite3D.recycleTarget),d$b.addRenderObject(d$e),(d$f=d$ma.create(6)).blendMode=d$k,d$b.addRenderObject(d$f);}d$b.ctx.restore();}else d$i._fun.call(d$i,d$a,d$b,d$c,d$d);},d$b._blend=function(d$a,d$b,d$c,d$d){var d$e=d$a._style,d$f=this._next;d$e.blendMode?(d$b.ctx.save(),d$b.ctx.globalCompositeOperation=d$e.blendMode,d$f._fun.call(d$f,d$a,d$b,d$c,d$d),d$b.ctx.restore()):d$f._fun.call(d$f,d$a,d$b,d$c,d$d);},d$b._transform=function(d$a,d$b,d$c,d$d){var d$e=d$a.transform,d$f=this._next;if(d$e&&d$f!=d$u.NORENDER){var d$i=d$b.ctx;d$a._style;d$e.tx=d$c,d$e.ty=d$d;var d$j=d$i._getTransformMatrix(),d$k=d$j.clone();d$B.mul(d$e,d$j,d$j),d$j._checkTransform(),d$e.tx=d$e.ty=0,d$f._fun.call(d$f,d$a,d$b,0,0),d$k.copyTo(d$j),d$k.destroy();}else d$f._fun.call(d$f,d$a,d$b,d$c,d$d);},d$s.tmpTarget=function(d$a,d$b){var d$c=d$a.getValue("bounds"),d$d=d$Ma.create(d$c.width,d$c.height);d$d.start(),d$d.clear(0,0,0,0),d$a.addValue("tmpTarget",d$d);},d$s.endTmpTarget=function(d$a){d$a.getValue("tmpTarget").end();},d$s.recycleTarget=function(d$a){d$a.getValue("tmpTarget").recycle(),d$a.recycle();},d$i(d$s,["tempUV",function(){return this.tempUV=new Array(8);}]),d$s;}(),d$Ca=function(d$a){function d$b(){this.data=null,d$b.__super.call(this);}d$o(d$b,"laya.filters.webgl.ColorFilterActionGL",d$N);var d$c=d$b.prototype;return d$y.imps(d$c,{"laya.filters.IFilterActionGL":!0}),d$c.setValue=function(d$a){d$a.colorMat=this.data._mat,d$a.colorAlpha=this.data._alpha;},d$c.apply3d=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$a.getValue("bounds"),d$i=d$Aa.create(1,0);d$i.setFilters([this.data]);var d$j=d$B.TEMP;d$j.identity(),d$c.ctx.drawTarget(d$a,0,0,d$f.width,d$f.height,d$j,"src",d$i);},d$b;}(),d$Da=function(d$a){function d$f(d$a,d$b,d$c,d$d,d$e){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,d$f.__super.call(this,d$a,d$b,d$e),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new d$Ta(),this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=d$c,this._atlasCanvas.height=d$d,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0;}d$o(d$f,"laya.webgl.atlas.Atlaser",d$P);var d$b=d$f.prototype;return d$b.computeUVinAtlasTexture=function(d$a,d$b,d$c,d$d){var d$e=d$Q.atlasTextureWidth,d$f=d$Q.atlasTextureHeight,d$i=d$c/d$e,d$j=d$d/d$f,d$k=(d$c+d$a.bitmap.width)/d$e,d$l=(d$d+d$a.bitmap.height)/d$f,d$m=d$a.bitmap.width/d$e,d$n=d$a.bitmap.height/d$f;d$a.uv=[d$i+d$b[0]*d$m,d$j+d$b[1]*d$n,d$k-(1-d$b[2])*d$m,d$j+d$b[3]*d$n,d$k-(1-d$b[4])*d$m,d$l-(1-d$b[5])*d$n,d$i+d$b[6]*d$m,d$l-(1-d$b[7])*d$n];},d$b.findBitmapIsExist=function(d$a){if(d$a instanceof laya.webgl.resource.WebGLImage){var d$b=d$a,d$c=d$b.url,d$d=this._InAtlasWebGLImagesKey[d$c||d$b.id];if(d$d)return d$d.offsetInfoID;}return-1;},d$b.addToAtlasTexture=function(d$a,d$b,d$c){if(d$a instanceof laya.webgl.resource.WebGLImage){var d$d=d$a,d$e=d$d.url;this._InAtlasWebGLImagesKey[d$e||d$d.id]={bitmap:d$a,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([d$b,d$c]);}this._atlasCanvas.texSubImage2D(d$b,d$c,d$a.atlasSource),d$a.clearAtlasSource();},d$b.addToAtlas=function(d$a,d$b,d$c){d$a._atlasID=this._inAtlasTextureKey.length;var d$d=d$a.uv.slice(),d$e=d$a.bitmap;this._inAtlasTextureKey.push(d$a),this._inAtlasTextureOriUVValue.push(d$d),this._inAtlasTextureBitmapValue.push(d$e),this.computeUVinAtlasTexture(d$a,d$d,d$b,d$c),d$a.bitmap=this._atlasCanvas;},d$b.clear=function(){for(var d$a=0,d$b=this._inAtlasTextureKey.length;d$a<d$b;d$a++)this._inAtlasTextureKey[d$a].bitmap=this._inAtlasTextureBitmapValue[d$a],this._inAtlasTextureKey[d$a].uv=this._inAtlasTextureOriUVValue[d$a],this._inAtlasTextureKey[d$a]._atlasID=-1,this._inAtlasTextureKey[d$a].bitmap.lock=!1,this._inAtlasTextureKey[d$a].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0;},d$b.dispose=function(){this.clear(),this._atlasCanvas.destroy();},d$d(0,d$b,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue;}),d$d(0,d$b,"texture",function(){return this._atlasCanvas;}),d$d(0,d$b,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey;}),d$f;}(),d$Ea=function(d$a){function d$c(){d$c.__super.call(this,d$c.__name2int,d$c.__int2name,d$c.__int2nameMap);}return d$o(d$c,"laya.webgl.shader.d2.ShaderDefines2D",d$h),d$c.__init__=function(){d$c.reg("TEXTURE2D",1),d$c.reg("COLOR2D",2),d$c.reg("PRIMITIVE",4),d$c.reg("GLOW_FILTER",8),d$c.reg("BLUR_FILTER",16),d$c.reg("COLOR_FILTER",32),d$c.reg("COLOR_ADD",64),d$c.reg("WORLDMAT",128),d$c.reg("FILLTEXTURE",256),d$c.reg("FSHIGHPRECISION",1024),d$c.reg("TXTALPHA",2048),d$c.reg("TXTCOMPRESS",4096);},d$c.reg=function(d$a,d$b){d$h._reg(d$a,d$b,d$c.__name2int,d$c.__int2name);},d$c.toText=function(d$a,d$b,d$c){return d$h._toText(d$a,d$b,d$c);},d$c.toInt=function(d$a){return d$h._toInt(d$a,d$c.__name2int);},d$c.TEXTURE2D=1,d$c.COLOR2D=2,d$c.PRIMITIVE=4,d$c.FILTERGLOW=8,d$c.FILTERBLUR=16,d$c.FILTERCOLOR=32,d$c.COLORADD=64,d$c.WORLDMAT=128,d$c.FILLTEXTURE=256,d$c.SKINMESH=512,d$c.SHADERDEFINE_FSHIGHPRECISION=1024,d$c.TXTALPHA=2048,d$c.TXTCOMPRESS=4096,d$c.__name2int={},d$c.__int2name=[],d$c.__int2nameMap=[],d$c;}(),d$Fa=(function(d$a){function d$j(d$a,d$b,d$c,d$d,d$e,d$f,d$i){d$j.__super.call(this,d$a,d$b,d$c,d$d,40,d$e,d$f,d$i);}d$o(d$j,"laya.webgl.shapes.Ellipse",d$ca);}(),function(d$a){function d$f(d$a,d$b,d$c,d$d,d$e){this._points=[],this.rebuild(d$c),d$f.__super.call(this,d$a,d$b,0,0,0,d$e,d$d,d$e,0);}d$o(d$f,"laya.webgl.shapes.Line",d$ca);var d$b=d$f.prototype;return d$b.rebuild=function(d$a){var d$b=d$a.length;d$b!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(d$b/2-1)),this.mFloat32Array=new Float32Array(5*d$b)),this._points.length=0;for(var d$c=NaN,d$d=NaN,d$e=-1,d$f=-1,d$i=d$a.length/2,d$j=0;d$j<d$i;d$j++)d$c=d$a[2*d$j],d$d=d$a[2*d$j+1],(.01<Math.abs(d$e-d$c)||.01<Math.abs(d$f-d$d))&&this._points.push(d$c,d$d),d$e=d$c,d$f=d$d;},d$b.getData=function(d$a,d$b,d$c){var d$d=[],d$e=[];0<this.borderWidth&&this.createLine2(this._points,d$d,this.borderWidth,d$c,d$e,this._points.length/2),this.mUint16Array.set(d$d,0),this.mFloat32Array.set(d$e,0),d$a.append(this.mUint16Array),d$b.append(this.mFloat32Array);},d$f;}()),d$Ga=function(d$a){function d$n(d$a,d$b,d$c,d$d,d$e){this._points=[];for(var d$f=NaN,d$i=NaN,d$j=-1,d$k=-1,d$l=d$c.length/2-1,d$m=0;d$m<d$l;d$m++)d$f=d$c[2*d$m],d$i=d$c[2*d$m+1],(.01<Math.abs(d$j-d$f)||.01<Math.abs(d$k-d$i))&&this._points.push(d$f,d$i),d$j=d$f,d$k=d$i;d$f=d$c[2*d$l],d$i=d$c[2*d$l+1],d$j=this._points[0],d$k=this._points[1],(.01<Math.abs(d$j-d$f)||.01<Math.abs(d$k-d$i))&&this._points.push(d$f,d$i),d$n.__super.call(this,d$a,d$b,0,0,this._points.length/2,0,d$d,d$e);}d$o(d$n,"laya.webgl.shapes.LoopLine",d$ca);var d$b=d$n.prototype;return d$b.getData=function(d$a,d$b,d$c){if(0<this.borderWidth){for(var d$d=this.color,d$e=(d$d>>16&255)/255,d$f=(d$d>>8&255)/255,d$i=(255&d$d)/255,d$j=[],d$k=0,d$l=0,d$m=[],d$n=Math.floor(this._points.length/2),d$o=0;d$o<d$n;d$o++)d$k=this._points[2*d$o],d$l=this._points[2*d$o+1],d$j.push(this.x+d$k,this.y+d$l,d$e,d$f,d$i);this.createLoopLine(d$j,d$m,this.borderWidth,d$c+d$j.length/5),d$a.append(new Uint16Array(d$m)),d$b.append(new Float32Array(d$j));}},d$b.createLoopLine=function(d$a,d$b,d$c,d$d,d$e,d$f){d$a.length;var d$i=d$a.concat(),d$j=d$e||d$a,d$k=this.borderColor,d$l=(d$k>>16&255)/255,d$m=(d$k>>8&255)/255,d$n=(255&d$k)/255,d$o=[d$i[0],d$i[1]],d$p=[d$i[d$i.length-5],d$i[d$i.length-4]],d$q=d$p[0]+.5*(d$o[0]-d$p[0]),d$r=d$p[1]+.5*(d$o[1]-d$p[1]);d$i.unshift(d$q,d$r,0,0,0),d$i.push(d$q,d$r,0,0,0);var d$s,d$t,d$u,d$v,d$w,d$x,d$y,d$z,d$A,d$B,d$C,d$D,d$E,d$F,d$G,d$H,d$I,d$J,d$K,d$L,d$M=d$i.length/5,d$N=d$d,d$O=d$c/2;d$u=d$i[0],d$v=d$i[1],d$B=d$u-(d$w=d$i[5]),d$A=(d$A=-(d$v-(d$x=d$i[6])))/(d$L=Math.sqrt(d$A*d$A+d$B*d$B))*d$O,d$B=d$B/d$L*d$O,d$j.push(d$u-d$A,d$v-d$B,d$l,d$m,d$n,d$u+d$A,d$v+d$B,d$l,d$m,d$n);for(var d$P=1;d$P<d$M-1;d$P++)d$u=d$i[5*(d$P-1)],d$v=d$i[5*(d$P-1)+1],d$w=d$i[5*d$P],d$x=d$i[5*d$P+1],d$y=d$i[5*(d$P+1)],d$z=d$i[5*(d$P+1)+1],d$B=d$u-d$w,d$D=d$w-d$y,d$G=(-(d$A=(d$A=-(d$v-d$x))/(d$L=Math.sqrt(d$A*d$A+d$B*d$B))*d$O)+d$u)*(-(d$B=d$B/d$L*d$O)+d$x)-(-d$A+d$w)*(-d$B+d$v),d$J=(-(d$C=(d$C=-(d$x-d$z))/(d$L=Math.sqrt(d$C*d$C+d$D*d$D))*d$O)+d$y)*(-(d$D=d$D/d$L*d$O)+d$x)-(-d$C+d$w)*(-d$D+d$z),d$K=(d$E=-d$B+d$v-(-d$B+d$x))*(d$I=-d$C+d$w-(-d$C+d$y))-(d$H=-d$D+d$z-(-d$D+d$x))*(d$F=-d$A+d$w-(-d$A+d$u)),Math.abs(d$K)<.1?(d$K+=10.1,d$j.push(d$w-d$A,d$x-d$B,d$l,d$m,d$n,d$w+d$A,d$x+d$B,d$l,d$m,d$n)):(((d$s=(d$F*d$J-d$I*d$G)/d$K)-d$w)*(d$s-d$w)+((d$t=(d$H*d$G-d$E*d$J)/d$K)-d$x)+(d$t-d$x),d$j.push(d$s,d$t,d$l,d$m,d$n,d$w-(d$s-d$w),d$x-(d$t-d$x),d$l,d$m,d$n));d$f&&(d$b=d$f);var d$Q=this.edges+1;for(d$P=1;d$P<d$Q;d$P++)d$b.push(d$N+2*(d$P-1),d$N+2*(d$P-1)+1,d$N+2*d$P+1,d$N+2*d$P+1,d$N+2*d$P,d$N+2*(d$P-1));return d$b.push(d$N+2*(d$P-1),d$N+2*(d$P-1)+1,d$N+1,d$N+1,d$N,d$N+2*(d$P-1)),d$j;},d$n;}(),d$Ha=function(d$a){function d$i(d$a,d$b,d$c,d$d,d$e,d$f){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=d$B.create(),this._points=d$c.slice(0,d$c.length),d$i.__super.call(this,d$a,d$b,0,0,this._points.length/2,d$d,d$e,d$f);}d$o(d$i,"laya.webgl.shapes.Polygon",d$ca);var d$b=d$i.prototype;return d$b.rebuild=function(d$a){this._repaint||(this._points.length=0,this._points=this._points.concat(d$a));},d$b.setMatrix=function(d$a){d$a.copyTo(this._mat);},d$b.needUpdate=function(d$a){return this._repaint=this._mat.a==d$a.a&&this._mat.b==d$a.b&&this._mat.c==d$a.c&&this._mat.d==d$a.d&&this._mat.tx==d$a.tx&&this._mat.ty==d$a.ty,!this._repaint;},d$b.getData=function(d$a,d$b,d$c){var d$d,d$e=0,d$f=this._points,d$i=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=d$c){for(this._start=d$c,d$d=[],d$i=this.earcutTriangles.length,d$e=0;d$e<d$i;d$e++)d$d.push(this.earcutTriangles[d$e]+d$c);this.mUint16Array=new Uint16Array(d$d);}}else{this._start=d$c,d$d=[];var d$j=[],d$k=[],d$l=this.color,d$m=(d$l>>16&255)/255,d$n=(d$l>>8&255)/255,d$o=(255&d$l)/255;for(d$i=Math.floor(d$f.length/2),d$e=0;d$e<d$i;d$e++)d$j.push(this.x+d$f[2*d$e],this.y+d$f[2*d$e+1],d$m,d$n,d$o),d$k.push(this.x+d$f[2*d$e],this.y+d$f[2*d$e+1]);for(this.earcutTriangles=d$da.earcut(d$k,null,2),d$i=this.earcutTriangles.length,d$e=0;d$e<d$i;d$e++)d$d.push(this.earcutTriangles[d$e]+d$c);this.mUint16Array=new Uint16Array(d$d),this.mFloat32Array=new Float32Array(d$j);}d$a.append(this.mUint16Array),d$b.append(this.mFloat32Array);},d$i;}(),d$Ia=function(d$a){function d$f(){this._matrix=new d$B(),this._matrix4=d$ra.defaultMatrix4.concat(),d$f.__super.call(this,1e4),this.shaderValue=new d$Aa(0,0);}d$o(d$f,"laya.webgl.submit.SubmitCanvas",d$fa);var d$b=d$f.prototype;return d$b.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var d$a=d$ua.worldAlpha,d$b=d$ua.worldMatrix4,d$c=d$ua.worldMatrix,d$d=d$ua.worldFilters,d$e=d$ua.worldShaderDefines,d$f=this.shaderValue,d$i=this._matrix,d$j=this._matrix4,d$k=d$B.TEMP;return d$B.mul(d$i,d$c,d$k),d$j[0]=d$k.a,d$j[1]=d$k.b,d$j[4]=d$k.c,d$j[5]=d$k.d,d$j[12]=d$k.tx,d$j[13]=d$k.ty,d$ua.worldMatrix=d$k.clone(),d$ua.worldMatrix4=d$j,d$ua.worldAlpha=d$ua.worldAlpha*d$f.alpha,d$f.filters&&d$f.filters.length&&(d$ua.worldFilters=d$f.filters,d$ua.worldShaderDefines=d$f.defines),this._ctx_src.flush(),d$ua.worldAlpha=d$a,d$ua.worldMatrix4=d$b,d$ua.worldMatrix.destroy(),d$ua.worldMatrix=d$c,d$ua.worldFilters=d$d,d$ua.worldShaderDefines=d$e,1;},d$b.releaseRender=function(){var d$a=d$f._cache;this._ctx_src=null,d$a[d$a._length++]=this;},d$b.getRenderType=function(){return 10003;},d$f.create=function(d$a,d$b,d$c){var d$d=d$f._cache._length?d$f._cache[--d$f._cache._length]:new d$f();d$d._ctx_src=d$a;var d$e=d$d.shaderValue;return d$e.alpha=d$b,d$e.defines.setValue(0),d$c&&d$c.length&&d$e.setFilters(d$c),d$d;},d$f._cache=((d$f._cache=[])._length=0,d$f._cache),d$f;}(),d$Ja=function(d$a){function d$l(d$a){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array(),this._texsID=new Array(),this._vbPos=new Array(),void 0===d$a&&(d$a=1e4),d$l.__super.call(this,d$a);}d$o(d$l,"laya.webgl.submit.SubmitTexture",d$fa);var d$b=d$l.prototype;return d$b.releaseRender=function(){var d$a=d$l._cache;(d$a[d$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0;},d$b.addTexture=function(d$a,d$b){this._texsID[this._texs.length]=d$a._uvID,this._texs.push(d$a),this._vbPos.push(d$b);},d$b.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var d$a=this.shaderValue.textureHost.bitmap;if(null!==d$a)for(var d$b=this._vb.getFloat32Array(),d$c=0,d$d=this._texs.length;d$c<d$d;d$c++){var d$e=this._texs[d$c];d$e.active();var d$f=d$e.uv;if(this._texsID[d$c]!==d$e._uvID){this._texsID[d$c]=d$e._uvID;var d$i=this._vbPos[d$c];d$b[d$i+2]=d$f[0],d$b[d$i+3]=d$f[1],d$b[d$i+6]=d$f[2],d$b[d$i+7]=d$f[3],d$b[d$i+10]=d$f[4],d$b[d$i+11]=d$f[5],d$b[d$i+14]=d$f[6],d$b[d$i+15]=d$f[7],this._vb.setNeedUpload();}d$e.bitmap!==d$a&&(this._isSameTexture=!1);}}},d$b.renderSubmit=function(){if(0===this._numEle)return d$l._shaderSet=!1,1;var d$a=this.shaderValue.textureHost;if(d$a){var d$b=d$a.source;if(!d$a.bitmap||!d$b)return d$l._shaderSet=!1,1;this.shaderValue.texture=d$b,d$a.alphaTexture&&d$a.alphaTexture.source&&(this.shaderValue.texture1=d$a.alphaTexture.source);}this._vb.bind_upload(this._ib);var d$c=d$wa.mainContext;if(d$S.activeBlendFunction!==this._blendFn&&(d$c.enable(3042),this._blendFn(d$c),d$S.activeBlendFunction=this._blendFn),d$G.drawCall++,d$G.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&d$La.activeShader&&d$l._shaderSet?(d$La.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&d$La.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),d$l._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var d$d=d$a.bitmap,d$e=0,d$f=d$La.activeShader,d$i=0,d$j=this._texs.length;d$i<d$j;d$i++){var d$k=this._texs[d$i];d$k.bitmap===d$d&&d$i+1!==d$j||(d$f.uploadTexture2D(d$k.source),d$c.drawElements(4,6*(d$i-d$e+1),5123,this._startIdx+6*d$e*d$ra.BYTES_PIDX),d$d=d$k.bitmap,d$e=d$i);}else d$c.drawElements(4,this._numEle,5123,this._startIdx);return 1;},d$l.create=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$l._cache._length?d$l._cache[--d$l._cache._length]:new d$l();null==d$c&&((d$c=d$f._selfVb||(d$f._selfVb=d$ha.create(-1))).clear(),d$d=0),d$f._ib=d$b,d$f._vb=d$c,d$f._startIdx=d$d*d$ra.BYTES_PIDX,d$f._numEle=0;var d$i=d$a._nBlendType;d$f._blendFn=d$a._targets?d$S.targetFns[d$i]:d$S.fns[d$i],d$f.shaderValue=d$e,d$f.shaderValue.setValue(d$a._shader2D);var d$j=d$a._shader2D.filters;return d$j&&d$f.shaderValue.setFilters(d$j),d$f;},d$l._cache=((d$l._cache=[])._length=0,d$l._cache),d$l._shaderSet=!0,d$l;}(),d$Ka=function(d$a){function d$t(){d$t.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo);}d$o(d$t,"laya.webgl.utils.MeshTexture",d$ta);var d$b=d$t.prototype;return d$b.addData=function(d$a,d$b,d$c,d$d,d$e,d$f){for(var d$i=d$a.length/2,d$j=this._vb.needSize(d$i*d$t.const_stride)>>2,d$k=this._vb.getFloat32Array(),d$l=0,d$m=0;d$m<d$i;d$m++){var d$n=d$a[d$l],d$o=d$a[d$l+1],d$p=d$n*d$d.a+d$o*d$d.c+d$d.tx,d$q=d$n*d$d.b+d$o*d$d.d+d$d.ty;d$k[d$j++]=d$p,d$k[d$j++]=d$q,d$k[d$j++]=d$b[d$l],d$k[d$j++]=d$b[d$l+1],d$l+=2;}this._vb.setNeedUpload();var d$r=this.vertNum;if(0<d$r){(d$i=d$c.length)>d$t.tmpIdx.length&&(d$t.tmpIdx=new Uint16Array(d$i));for(var d$s=0;d$s<d$i;d$s++)d$t.tmpIdx[d$s]=d$c[d$s]+d$r;this._ib.appendU16Array(d$t.tmpIdx,d$c.length);}else this._ib.append(d$c);this._ib.setNeedUpload(),this.vertNum+=d$i,this.indexNum+=d$c.length;},d$b.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this);},d$b.destroy=function(){this._ib.destroy(),this._vb.destroy();},d$t.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new d$t();},d$t.const_stride=16,d$t._POOL=[],d$i(d$t,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8];},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4);}]),d$t;}(),d$La=function(d$a){function d$b(){d$b.__super.call(this),this.lock=!0;}return d$o(d$b,"laya.webgl.shader.BaseShader",d$v),d$b.activeShader=null,d$b.bindShader=null,d$b;}(),d$Ma=function(d$b){function d$m(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===d$c&&(d$c=6408),void 0===d$d&&(d$d=5121),void 0===d$e&&(d$e=34041),void 0===d$f&&(d$f=!1),void 0===d$i&&(d$i=!1),void 0===d$j&&(d$j=-1),void 0===d$k&&(d$k=-1),this._type=1,this._w=d$a,this._h=d$b,this._surfaceFormat=d$c,this._surfaceType=d$d,this._depthStencilFormat=d$e,d$t.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=d$f,this._repeat=d$i,this._minFifter=d$j,this._magFifter=d$k,this._createWebGLRenderTarget(),this.bitmap.lock=!0,d$m.__super.call(this,this.bitmap,d$K.INV_UV);}d$o(d$m,"laya.webgl.resource.RenderTarget2D",d$b);var d$a=d$m.prototype;return d$y.imps(d$a,{"laya.resource.IDispose":!0}),d$a.getType=function(){return this._type;},d$a.getTexture=function(){return this;},d$a.size=function(d$a,d$b){this._w==d$a&&this._h==d$b||(this._w=d$a,this._h=d$b,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget());},d$a.release=function(){this.destroy();},d$a.recycle=function(){d$m.POOL.push(this);},d$a.start=function(){var d$a=d$wa.mainContext;return this._preRenderTarget=d$ua.curRenderTarget,d$ua.curRenderTarget=this,d$a.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(d$a.viewport(0,0,this._w,this._h),this._svWidth=d$ua.width,this._svHeight=d$ua.height,d$ua.width=this._w,d$ua.height=this._h,d$La.activeShader=null),this;},d$a.clear=function(d$a,d$b,d$c,d$d){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=1);var d$e=d$wa.mainContext;d$e.clearColor(d$a,d$b,d$c,d$d);var d$f=16384;switch(this._depthStencilFormat){case 33189:d$f|=256;break;case 36168:d$f|=1024;break;case 34041:d$f|=256,d$f|=1024;}d$e.clear(d$f);},d$a.end=function(){var d$a=d$wa.mainContext;d$a.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,d$ua.curRenderTarget=this._preRenderTarget,1==this._type?(d$a.viewport(0,0,this._svWidth,this._svHeight),d$ua.width=this._svWidth,d$ua.height=this._svHeight,d$La.activeShader=null):d$a.viewport(0,0,d$y.stage.width,d$y.stage.height);},d$a.getData=function(d$a,d$b,d$c,d$d){var d$e=d$wa.mainContext;if(d$e.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===d$e.checkFramebufferStatus(36160)))return d$e.bindFramebuffer(36160,null),null;var d$f=new Uint8Array(this._w*this._h*4);return d$e.readPixels(d$a,d$b,d$c,d$d,this._surfaceFormat,this._surfaceType,d$f),d$e.bindFramebuffer(36160,null),d$f;},d$a.destroy=function(d$a){void 0===d$a&&(d$a=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,d$b.prototype.destroy.call(this));},d$a.dispose=function(){},d$a._createWebGLRenderTarget=function(){this.bitmap=new d$Wa(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(d$a){this.event("recovered");});},d$d(0,d$a,"surfaceFormat",function(){return this._surfaceFormat;}),d$d(0,d$a,"magFifter",function(){return this._magFifter;}),d$d(0,d$a,"surfaceType",function(){return this._surfaceType;}),d$d(0,d$a,"mipMap",function(){return this._mipMap;}),d$d(0,d$a,"depthStencilFormat",function(){return this._depthStencilFormat;}),d$d(0,d$a,"minFifter",function(){return this._minFifter;}),d$d(0,d$a,"source",function(){return this._alreadyResolved?d$y.superGet(d$K,this,"source"):null;}),d$m.create=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){void 0===d$c&&(d$c=6408),void 0===d$d&&(d$d=5121),void 0===d$e&&(d$e=34041),void 0===d$f&&(d$f=!1),void 0===d$i&&(d$i=!1),void 0===d$j&&(d$j=-1),void 0===d$k&&(d$k=-1);var d$l=d$m.POOL.pop();return d$l||(d$l=new d$m(d$a,d$b)),d$l.bitmap&&d$l._w==d$a&&d$l._h==d$b&&d$l._surfaceFormat==d$c&&d$l._surfaceType==d$d&&d$l._depthStencilFormat==d$e&&d$l._mipMap==d$f&&d$l._repeat==d$i&&d$l._minFifter==d$j&&d$l._magFifter==d$k||(d$l._w=d$a,d$l._h=d$b,d$l._surfaceFormat=d$c,d$l._surfaceType=d$d,d$l._depthStencilFormat=d$e,d$t.isConchWebGL&&34041===d$l._depthStencilFormat&&(d$l._depthStencilFormat=33189),d$l._mipMap=d$f,d$l._repeat=d$i,d$l._minFifter=d$j,d$l._magFifter=d$k,d$l.release(),d$l._createWebGLRenderTarget()),d$l;},d$m.TYPE2D=1,d$m.TYPE3D=2,d$m.POOL=[],d$m;}(d$K),d$Na=function(d$a){function d$b(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,d$b.__super.call(this),d$b._gl=d$wa.mainContext;}d$o(d$b,"laya.webgl.utils.Buffer",d$v);var d$c=d$b.prototype;return d$c._bind=function(){this.activeResource(),d$b._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(d$b._bindVertexBuffer=this._glBuffer),d$b._gl.bindBuffer(this._bufferType,d$b._bindActive[this._bufferType]=this._glBuffer),d$La.activeShader=null);},d$c.recreateResource=function(){this._glBuffer||(this._glBuffer=d$b._gl.createBuffer()),this.completeCreate();},d$c.disposeResource=function(){this._glBuffer&&(d$wa.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0;},d$d(0,d$c,"bufferUsage",function(){return this._bufferUsage;}),d$b._gl=null,d$b._bindActive={},d$b._bindVertexBuffer=null,d$b._enableAtributes=[],d$b;}(),d$Oa=function(d$a){function d$c(d$a){this.texcoord=null,this.offsetX=300,this.offsetY=0,d$c.__super.call(this,512,0);var d$b=8*d$ra.BYTES_PE;this.position=[2,5126,!1,d$b,0],this.texcoord=[2,5126,!1,d$b,2*d$ra.BYTES_PE],this.color=[4,5126,!1,d$b,4*d$ra.BYTES_PE];}return d$o(d$c,"laya.webgl.shader.d2.skinAnishader.SkinSV",d$Aa),d$c;}(),d$Pa=function(d$a){function d$b(d$a){d$b.__super.call(this,2,0),this.color=[];}return d$o(d$b,"laya.webgl.shader.d2.value.Color2dSV",d$Aa),d$b.prototype.setValue=function(d$a){d$a.fillStyle&&(this.color=d$a.fillStyle._color._color),d$a.strokeStyle&&(this.color=d$a.strokeStyle._color._color);},d$b;}(),d$Qa=function(d$a){function d$b(d$a){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=d$Aa._TEXCOORD,d$b.__super.call(this,256,0);}d$o(d$b,"laya.webgl.shader.d2.value.FillTextureSV",d$Aa);var d$c=d$b.prototype;return d$c.setValue=function(d$a){this.ALPHA=d$a.ALPHA,d$a.filters&&this.setFilters(d$a.filters);},d$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0);},d$b;}(),d$Ra=function(d$a){function d$b(d$a){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=d$Aa._TEXCOORD,void 0===d$a&&(d$a=0),d$b.__super.call(this,1,d$a);}d$o(d$b,"laya.webgl.shader.d2.value.TextureSV",d$Aa);var d$c=d$b.prototype;return d$c.setValue=function(d$a){this.ALPHA=d$a.ALPHA,d$a.filters&&this.setFilters(d$a.filters);},d$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0);},d$b;}(),d$Sa=function(d$a){function d$b(d$a){this.a_color=null,this.u_pos=[0,0],d$b.__super.call(this,4,0),this.position=[2,5126,!1,5*d$ra.BYTES_PE,0],this.a_color=[3,5126,!1,5*d$ra.BYTES_PE,2*d$ra.BYTES_PE];}return d$o(d$b,"laya.webgl.shader.d2.value.PrimitiveSV",d$Aa),d$b;}(),d$Ta=function(d$a){function d$b(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,d$b.__super.call(this);}d$o(d$b,"laya.webgl.atlas.AtlasWebGLCanvas",d$a);var d$c=d$b.prototype;return d$c.recreateResource=function(){var d$a=d$wa.mainContext,d$b=this._source=d$a.createTexture(),d$c=d$xa.curBindTexTarget,d$d=d$xa.curBindTexValue;d$xa.bindTexture(d$a,3553,d$b),d$a.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),d$a.texParameteri(3553,10241,9729),d$a.texParameteri(3553,10240,9729),d$a.texParameteri(3553,10242,33071),d$a.texParameteri(3553,10243,33071),d$c&&d$d&&d$xa.bindTexture(d$a,d$c,d$d),this.memorySize=this._w*this._h*4,this.completeCreate();},d$c.disposeResource=function(){this._source&&(d$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},d$c.texSubImage2D=function(d$a,d$b,d$c){if(d$t.isFlash){this._flashCacheImage||(this._flashCacheImage=d$r.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var d$d=d$c.bitmapdata;this._flashCacheImage._image.copyPixels(d$d,0,0,d$d.width,d$d.height,d$a,d$b),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0);}else{var d$e=d$wa.mainContext,d$f=d$xa.curBindTexTarget,d$i=d$xa.curBindTexValue;d$xa.bindTexture(d$e,3553,this._source),d$e.pixelStorei(37441,!0),0<=d$a-1&&d$e.texSubImage2D(3553,0,d$a-1,d$b,6408,5121,d$c),d$a+1<=this._w&&d$e.texSubImage2D(3553,0,d$a+1,d$b,6408,5121,d$c),0<=d$b-1&&d$e.texSubImage2D(3553,0,d$a,d$b-1,6408,5121,d$c),d$b+1<=this._h&&d$e.texSubImage2D(3553,0,d$a,d$b+1,6408,5121,d$c),d$e.texSubImage2D(3553,0,d$a,d$b,6408,5121,d$c),d$e.pixelStorei(37441,!1),d$f&&d$i&&d$xa.bindTexture(d$e,d$f,d$i);}},d$c.texSubImage2DPixel=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$wa.mainContext,d$i=d$xa.curBindTexTarget,d$j=d$xa.curBindTexValue;d$xa.bindTexture(d$f,3553,this._source);var d$k=new Uint8Array(d$e.data);d$f.pixelStorei(37441,!0),d$f.texSubImage2D(3553,0,d$a,d$b,d$c,d$d,6408,5121,d$k),d$f.pixelStorei(37441,!1),d$i&&d$j&&d$xa.bindTexture(d$f,d$i,d$j);},d$d(0,d$c,"width",d$a.prototype._$get_width,function(d$a){this._w=d$a;}),d$d(0,d$c,"height",d$a.prototype._$get_height,function(d$a){this._h=d$a;}),d$b;}(d$c),d$Ua=function(d$a){function d$e(){this.flipY=!0,this.alwaysChange=!1,d$e.__super.call(this);}d$o(d$e,"laya.webgl.resource.WebGLCanvas",d$c);var d$b=d$e.prototype;return d$b.getCanvas=function(){return this._canvas;},d$b.clear=function(){this._ctx&&this._ctx.clear();},d$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this);},d$b._setContext=function(d$a){this._ctx=d$a;},d$b.getContext=function(d$a,d$b){return this._ctx?this._ctx:this._ctx=d$e._createContext(this);},d$b.size=function(d$a,d$b){this._w==d$a&&this._h==d$b||(this._w=d$a,this._h=d$b,this._ctx&&this._ctx.size(d$a,d$b),this._canvas&&(this._canvas.height=d$b,this._canvas.width=d$a));},d$b.activeResource=function(d$a){void 0===d$a&&(d$a=!1),this._source||this.recreateResource();},d$b.recreateResource=function(){this.createWebGlTexture(),this.completeCreate();},d$b.disposeResource=function(){this._source&&!this.iscpuSource&&(d$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},d$b.createWebGlTexture=function(){var d$a=d$wa.mainContext;this._canvas;var d$b=this._source=d$a.createTexture();this.iscpuSource=!1;var d$c=d$xa.curBindTexTarget,d$d=d$xa.curBindTexValue;d$xa.bindTexture(d$a,3553,d$b),d$a.pixelStorei(37440,this.flipY?1:0),d$e.premulAlpha&&d$a.pixelStorei(37441,!0),d$a.texImage2D(3553,0,6408,6408,5121,this._imgData),d$e.premulAlpha&&d$a.pixelStorei(37441,!1),d$a.texParameteri(3553,10240,9729),d$a.texParameteri(3553,10241,9729),d$a.texParameteri(3553,10242,33071),d$a.texParameteri(3553,10243,33071),d$a.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,d$c&&d$d&&d$xa.bindTexture(d$a,d$c,d$d);},d$b.reloadCanvasData=function(){var d$a=d$wa.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var d$b=d$xa.curBindTexTarget,d$c=d$xa.curBindTexValue;d$xa.bindTexture(d$a,3553,this._source),d$e.premulAlpha&&d$a.pixelStorei(37441,!0),d$a.texImage2D(3553,0,6408,6408,5121,this._imgData),d$e.premulAlpha&&d$a.pixelStorei(37441,!1),d$a.pixelStorei(37440,0),d$b&&d$c&&d$xa.bindTexture(d$a,d$b,d$c);},d$b.texSubImage2D=function(d$a,d$b,d$c){var d$d=d$wa.mainContext,d$e=d$xa.curBindTexTarget,d$f=d$xa.curBindTexValue;d$xa.bindTexture(d$d,3553,this._source),d$d.pixelStorei(37441,!0),d$d.texSubImage2D(3553,0,d$b,d$c,6408,5121,d$a._source),d$d.pixelStorei(37441,!1),d$e&&d$f&&d$xa.bindTexture(d$d,d$e,d$f);},d$b.toBase64=function(d$a,d$b,d$c){var d$d=null;this._canvas&&(d$d=this._canvas.toDataURL(d$a,d$b)),d$c.call(this,d$d);},d$d(0,d$b,"context",function(){return this._ctx;}),d$d(0,d$b,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source;}),d$d(0,d$b,"asBitmap",null,function(d$a){this._ctx&&(this._ctx.asBitmap=d$a);}),d$e._createContext=null,d$e.premulAlpha=!1,d$e;}(),d$Va=function(d$a){function d$f(d$a,d$b){this.CborderSize=12,d$f.__super.call(this),this.char=d$a,this.isSpace=" "===d$a,this.xs=d$b.scaleX,this.ys=d$b.scaleY,this.font=d$b.font.toString(),this.fontSize=d$b.font.size,this.fillColor=d$b.fillColor,this.borderColor=d$b.borderColor,this.lineWidth=d$b.lineWidth,this.underLine=d$b.underLine;var d$c,d$d=d$t.isConchApp;d$d?((d$c=ConchTextCanvas)._source=ConchTextCanvas,d$c._source.canvas=ConchTextCanvas):d$c=d$p.canvas.source,this.canvas=d$c,this._enableMerageInAtlas=!0,this._ctx=d$d?d$c:this.canvas.getContext("2d",void 0);var d$e=d$L.measureText(this.char,this.font);this.cw=d$e.width*this.xs,this.ch=(d$e.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new d$K(this);}d$o(d$f,"laya.webgl.resource.WebGLCharImage",d$c);var d$b=d$f.prototype;return d$y.imps(d$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),d$b.active=function(){this.texture.active();},d$b.recreateResource=function(){var d$a=d$t.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),d$a){var d$b=this.fontSize;1==this.xs&&1==this.ys||(d$b=parseInt(d$b*(this.xs>this.ys?this.xs:this.ys)+""));var d$c="normal 100 "+this.font;d$c=d$c.replace(d$f._fontSizeReg,d$b),this.borderColor&&(d$c+=" 1 "+this.borderColor),this._ctx.font=d$c,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null);}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,d$J.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var d$d=this._ctx.measureText(this.char);d$d||(d$d={width:16});var d$e=d$d.width+1;this._ctx.lineTo(d$e,this.fontSize+1),this._ctx.stroke();}this._ctx.restore();}this.borderSize=this.CborderSize,this.completeCreate();},d$b.onresize=function(d$a,d$b){this._w=d$a,this._h=d$b,this._allowMerageInAtlas=!0;},d$b.clearAtlasSource=function(){},d$d(0,d$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),d$d(0,d$b,"atlasSource",function(){return this.canvas;}),d$d(0,d$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas;},function(d$a){this._enableMerageInAtlas=d$a;}),d$f.createOneChar=function(d$a,d$b){return new d$f(d$a,d$b);},d$f._fontSizeReg=new RegExp("\\d+(?=px)","g"),d$f;}(),d$Wa=function(d$a){function d$l(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){void 0===d$c&&(d$c=6408),void 0===d$d&&(d$d=5121),void 0===d$e&&(d$e=34041),void 0===d$f&&(d$f=!1),void 0===d$i&&(d$i=!1),void 0===d$j&&(d$j=-1),void 0===d$k&&(d$k=1),d$l.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=d$a,this._h=d$b,this._surfaceFormat=d$c,this._surfaceType=d$d,this._depthStencilFormat=d$e,this._mipMap=d$f,this._repeat=d$i,this._minFifter=d$j,this._magFifter=d$k;}d$o(d$l,"laya.webgl.resource.WebGLRenderTarget",d$c);var d$b=d$l.prototype;return d$b.recreateResource=function(){var d$a=d$wa.mainContext;this._frameBuffer||(this._frameBuffer=d$a.createFramebuffer()),this._source||(this._source=d$a.createTexture());var d$b=d$xa.curBindTexTarget,d$c=d$xa.curBindTexValue;d$xa.bindTexture(d$a,3553,this._source),d$a.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var d$d=this._minFifter,d$e=this._magFifter,d$f=this._repeat?10497:33071,d$i=d$m.isPOT(this._w,this._h);if(d$i?(this._mipMap?-1!==d$d||(d$d=9987):-1!==d$d||(d$d=9729),-1!==d$e||(d$e=9729),d$a.texParameteri(3553,10241,d$d),d$a.texParameteri(3553,10240,d$e),d$a.texParameteri(3553,10242,d$f),d$a.texParameteri(3553,10243,d$f),this._mipMap&&d$a.generateMipmap(3553)):(-1!==d$d||(d$d=9729),-1!==d$e||(d$e=9729),d$a.texParameteri(3553,10241,d$d),d$a.texParameteri(3553,10240,d$e),d$a.texParameteri(3553,10242,33071),d$a.texParameteri(3553,10243,33071)),d$a.bindFramebuffer(36160,this._frameBuffer),d$a.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=d$a.createRenderbuffer()),d$a.bindRenderbuffer(36161,this._depthStencilBuffer),d$a.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:d$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:d$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:d$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);}d$a.bindFramebuffer(36160,null),d$b&&d$c&&d$xa.bindTexture(d$a,d$b,d$c),d$a.bindRenderbuffer(36161,null),d$i&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate();},d$b.disposeResource=function(){this._frameBuffer&&(d$wa.mainContext.deleteTexture(this._source),d$wa.mainContext.deleteFramebuffer(this._frameBuffer),d$wa.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null);},d$d(0,d$b,"depthStencilBuffer",function(){return this._depthStencilBuffer;}),d$d(0,d$b,"frameBuffer",function(){return this._frameBuffer;}),d$l;}(),d$Xa=function(d$a){function d$j(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this.offsetX=0,this.offsetY=0,d$j.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=d$f,this.canvas=d$a,this._ctx=d$a.getContext("2d",void 0),this._w=d$d,this._h=d$e,this.offsetX=d$b,this.offsetY=d$c,this.src=d$i,this._enableMerageInAtlas=!0,d$Q.enabled&&this._w<d$Q.atlasLimitWidth&&this._h<d$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;}d$o(d$j,"laya.webgl.resource.WebGLSubImage",d$c);var d$b=d$j.prototype;return d$y.imps(d$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),d$b.size=function(d$a,d$b){this._w=d$a,this._h=d$b,this._ctx&&this._ctx.size(d$a,d$b),this.canvas&&(this.canvas.height=d$b,this.canvas.width=d$a);},d$b.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate();},d$b.createWebGlTexture=function(){var d$a=d$wa.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var d$b=this._source=d$a.createTexture(),d$c=d$xa.curBindTexTarget,d$d=d$xa.curBindTexValue;d$xa.bindTexture(d$a,3553,d$b),d$a.pixelStorei(37441,!0),d$a.texImage2D(3553,0,6408,6408,5121,this.canvas),d$a.pixelStorei(37441,!1);var d$e=this.minFifter,d$f=this.magFifter,d$i=this.repeat?10497:33071,d$j=d$m.isPOT(this.width,this.height);d$j?(this.mipmap?-1!==d$e||(d$e=9987):-1!==d$e||(d$e=9729),-1!==d$f||(d$f=9729),d$a.texParameteri(3553,10240,d$f),d$a.texParameteri(3553,10241,d$e),d$a.texParameteri(3553,10242,d$i),d$a.texParameteri(3553,10243,d$i),this.mipmap&&d$a.generateMipmap(3553)):(-1!==d$e||(d$e=9729),-1!==d$f||(d$f=9729),d$a.texParameteri(3553,10241,d$e),d$a.texParameteri(3553,10240,d$f),d$a.texParameteri(3553,10242,33071),d$a.texParameteri(3553,10243,33071)),d$c&&d$d&&d$xa.bindTexture(d$a,d$c,d$d),this.canvas=null,d$j&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4;},d$b.disposeResource=function(){d$Q.enabled&&this._allowMerageInAtlas||!this._source||(d$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},d$b.clearAtlasSource=function(){},d$d(0,d$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),d$d(0,d$b,"atlasSource",function(){return this.canvas;}),d$d(0,d$b,"enableMerageInAtlas",function(){return this._allowMerageInAtlas;},function(d$a){this._allowMerageInAtlas=d$a;}),d$j;}(),d$Ya=function(d$a){function d$l(d$a,d$b,d$c,d$d){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,d$l.__super.call(this),!d$a||!d$b)throw"Shader Error";this._id=++d$l._count,this._vs=d$a,this._ps=d$b,this._nameMap=d$d||{},null!=d$c&&(d$l.sharders[d$c]=this);}d$o(d$l,"laya.webgl.shader.Shader",d$La);var d$b=d$l.prototype;return d$b.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0;},d$b.disposeResource=function(){d$wa.mainContext.deleteShader(this._vshader),d$wa.mainContext.deleteShader(this._pshader),d$wa.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0;},d$b._compile=function(){if(!d$wa.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var d$a=[this._vs,this._ps],d$b=d$wa.mainContext;if(this._program=d$b.createProgram(),this._vshader=d$l._createShader(d$b,d$a[0],35633),this._pshader=d$l._createShader(d$b,d$a[1],35632),d$b.attachShader(this._program,this._vshader),d$b.attachShader(this._program,this._pshader),d$b.linkProgram(this._program),!d$t.isConchApp&&!d$b.getProgramParameter(this._program,35714))throw d$b.getProgramInfoLog(this._program);var d$c,d$d,d$e=0,d$f=0;for(d$f=d$t.isConchApp?d$b.getProgramParameterEx(this._vs,this._ps,"",35721):d$b.getProgramParameter(this._program,35721),d$e=0;d$e<d$f;d$e++){var d$i=null;d$c={vartype:"attribute",glfun:null,ivartype:0,attrib:d$i=d$t.isConchApp?d$b.getActiveAttribEx(this._vs,this._ps,"",d$e):d$b.getActiveAttrib(this._program,d$e),location:d$b.getAttribLocation(this._program,d$i.name),name:d$i.name,type:d$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(d$c);}var d$j=0;for(d$j=d$t.isConchApp?d$b.getProgramParameterEx(this._vs,this._ps,"",35718):d$b.getProgramParameter(this._program,35718),d$e=0;d$e<d$j;d$e++){var d$k=null;d$k=d$t.isConchApp?d$b.getActiveUniformEx(this._vs,this._ps,"",d$e):d$b.getActiveUniform(this._program,d$e),0<(d$c={vartype:"uniform",glfun:null,ivartype:1,attrib:d$i,location:d$b.getUniformLocation(this._program,d$k.name),name:d$k.name,type:d$k.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(d$c.name=d$c.name.substr(0,d$c.name.length-3),d$c.isArray=!0,d$c.location=d$b.getUniformLocation(this._program,d$c.name)),this._params.push(d$c);}for(d$e=0,d$d=this._params.length;d$e<d$d;d$e++)if((d$c=this._params[d$e]).indexOfParams=d$e,d$c.index=1,d$c.value=[d$c.location,null],d$c.codename=d$c.name,d$c.name=this._nameMap[d$c.codename]?this._nameMap[d$c.codename]:d$c.codename,(this._paramsMap[d$c.name]=d$c)._this=this,d$c.uploadedValue=[],"attribute"!==d$c.vartype)switch(d$c.type){case 5124:d$c.fun=d$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:d$c.fun=d$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:d$c.fun=d$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:d$c.fun=d$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:d$c.fun=d$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:d$c.fun=this._uniform_sampler2D;break;case 35680:d$c.fun=this._uniform_samplerCube;break;case 35676:d$c.glfun=d$b.uniformMatrix4fv,d$c.fun=this._uniformMatrix4fv;break;case 35670:d$c.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!");}else d$c.fun=this._attribute;}},d$b.getUniform=function(d$a){return this._paramsMap[d$a];},d$b._attribute=function(d$a,d$b){var d$c=d$wa.mainContext,d$d=d$Na._enableAtributes,d$e=d$a.location;return d$d[d$e]||d$c.enableVertexAttribArray(d$e),d$c.vertexAttribPointer(d$e,d$b[0],d$b[1],d$b[2],d$b[3],d$b[4]+this._offset),d$d[d$e]=d$Na._bindVertexBuffer,1;},d$b._uniform1f=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b?(d$wa.mainContext.uniform1f(d$a.location,d$c[0]=d$b),1):0;},d$b._uniform1fv=function(d$a,d$b){if(d$b.length<4){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]||d$c[3]!==d$b[3]?(d$wa.mainContext.uniform1fv(d$a.location,d$b),d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2],d$c[3]=d$b[3],1):0;}return d$wa.mainContext.uniform1fv(d$a.location,d$b),1;},d$b._uniform_vec2=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]?(d$wa.mainContext.uniform2f(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1]),1):0;},d$b._uniform_vec2v=function(d$a,d$b){if(d$b.length<2){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]||d$c[3]!==d$b[3]?(d$wa.mainContext.uniform2fv(d$a.location,d$b),d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2],d$c[3]=d$b[3],1):0;}return d$wa.mainContext.uniform2fv(d$a.location,d$b),1;},d$b._uniform_vec3=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]?(d$wa.mainContext.uniform3f(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2]),1):0;},d$b._uniform_vec3v=function(d$a,d$b){return d$wa.mainContext.uniform3fv(d$a.location,d$b),1;},d$b._uniform_vec4=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]||d$c[3]!==d$b[3]?(d$wa.mainContext.uniform4f(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2],d$c[3]=d$b[3]),1):0;},d$b._uniform_vec4v=function(d$a,d$b){return d$wa.mainContext.uniform4fv(d$a.location,d$b),1;},d$b._uniformMatrix2fv=function(d$a,d$b){return d$wa.mainContext.uniformMatrix2fv(d$a.location,!1,d$b),1;},d$b._uniformMatrix3fv=function(d$a,d$b){return d$wa.mainContext.uniformMatrix3fv(d$a.location,!1,d$b),1;},d$b._uniformMatrix4fv=function(d$a,d$b){return d$wa.mainContext.uniformMatrix4fv(d$a.location,!1,d$b),1;},d$b._uniform1i=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b?(d$wa.mainContext.uniform1i(d$a.location,d$c[0]=d$b),1):0;},d$b._uniform1iv=function(d$a,d$b){return d$wa.mainContext.uniform1iv(d$a.location,d$b),1;},d$b._uniform_ivec2=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]?(d$wa.mainContext.uniform2i(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1]),1):0;},d$b._uniform_ivec2v=function(d$a,d$b){return d$wa.mainContext.uniform2iv(d$a.location,d$b),1;},d$b._uniform_vec3i=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]?(d$wa.mainContext.uniform3i(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2]),1):0;},d$b._uniform_vec3vi=function(d$a,d$b){return d$wa.mainContext.uniform3iv(d$a.location,d$b),1;},d$b._uniform_vec4i=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]||d$c[3]!==d$b[3]?(d$wa.mainContext.uniform4i(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2],d$c[3]=d$b[3]),1):0;},d$b._uniform_vec4vi=function(d$a,d$b){return d$wa.mainContext.uniform4iv(d$a.location,d$b),1;},d$b._uniform_sampler2D=function(d$a,d$b){var d$c=d$wa.mainContext,d$d=d$a.uploadedValue;return null==d$d[0]?(d$d[0]=this._curActTexIndex,d$c.uniform1i(d$a.location,this._curActTexIndex),d$c.activeTexture(d$l._TEXTURES[this._curActTexIndex]),d$xa.bindTexture(d$c,3553,d$b),this._curActTexIndex++,1):(d$c.activeTexture(d$l._TEXTURES[d$d[0]]),d$xa.bindTexture(d$c,3553,d$b),0);},d$b._uniform_samplerCube=function(d$a,d$b){var d$c=d$wa.mainContext,d$d=d$a.uploadedValue;return null==d$d[0]?(d$d[0]=this._curActTexIndex,d$c.uniform1i(d$a.location,this._curActTexIndex),d$c.activeTexture(d$l._TEXTURES[this._curActTexIndex]),d$xa.bindTexture(d$c,34067,d$b),this._curActTexIndex++,1):(d$c.activeTexture(d$l._TEXTURES[d$d[0]]),d$xa.bindTexture(d$c,34067,d$b),0);},d$b._noSetValue=function(d$a){console.log("no....:"+d$a.name);},d$b.uploadOne=function(d$a,d$b){this.activeResource(),d$xa.UseProgram(this._program);var d$c=this._paramsMap[d$a];d$c.fun.call(this,d$c,d$b);},d$b.uploadTexture2D=function(d$a){d$G.shaderCall++;var d$b=d$wa.mainContext;d$b.activeTexture(33984),d$xa.bindTexture(d$b,3553,d$a);},d$b.uploadTexture2D1=function(d$a){d$G.shaderCall++;var d$b=d$wa.mainContext;d$b.activeTexture(33985),d$xa.bindTexture(d$b,3553,d$a);},d$b.upload=function(d$a,d$b){d$La.activeShader=d$La.bindShader=this,this._lastUseFrameCount===d$G.loopCount||this.activeResource(),d$xa.UseProgram(this._program),this._reCompile?(d$b=this._params,this._reCompile=!1):d$b=d$b||this._params;d$wa.mainContext;for(var d$c,d$d,d$e=d$b.length,d$f=0,d$i=0;d$i<d$e;d$i++)null!==(d$d=d$a[(d$c=d$b[d$i]).name])&&(d$f+=d$c.fun.call(this,d$c,d$d));d$G.shaderCall+=d$f;},d$b.uploadArray=function(d$a,d$b,d$c){d$La.activeShader=this,(d$La.bindShader=this).activeResource(),d$xa.UseProgram(this._program);this._params;for(var d$d,d$e,d$f=0,d$i=d$b-2;0<=d$i;d$i-=2)(d$e=this._paramsMap[d$a[d$i]])&&null!=(d$d=d$a[d$i+1])&&(d$c&&d$c[d$e.name]&&d$c[d$e.name].bind(),d$f+=d$e.fun.call(this,d$e,d$d));d$G.shaderCall+=d$f;},d$b.getParams=function(){return this._params;},d$l.getShader=function(d$a){return d$l.sharders[d$a];},d$l.create=function(d$a,d$b,d$c,d$d){return new d$l(d$a,d$b,d$c,d$d);},d$l.withCompile=function(d$a,d$b,d$c,d$d){if(d$c&&d$l.sharders[d$c])return d$l.sharders[d$c];var d$e=d$l._preCompileShader[2e-4*d$a];if(!d$e)throw new Error("withCompile shader err!"+d$a);return d$e.createShader(d$b,d$c,d$d);},d$l.withCompile2D=function(d$a,d$b,d$c,d$d,d$e){if(d$d&&d$l.sharders[d$d])return d$l.sharders[d$d];var d$f=d$l._preCompileShader[2e-4*d$a+d$b];if(!d$f)throw new Error("withCompile shader err!"+d$a+" "+d$b);return d$f.createShader(d$c,d$d,d$e);},d$l.addInclude=function(d$a,d$b){d$va.addInclude(d$a,d$b);},d$l.preCompile=function(d$a,d$b,d$c,d$d){var d$e=2e-4*d$a;d$l._preCompileShader[d$e]=new d$va(d$e,d$b,d$c,d$d);},d$l.preCompile2D=function(d$a,d$b,d$c,d$d,d$e){var d$f=2e-4*d$a+d$b;d$l._preCompileShader[d$f]=new d$va(d$f,d$c,d$d,d$e);},d$l._createShader=function(d$a,d$b,d$c){var d$d=d$a.createShader(d$c);return d$a.shaderSource(d$d,d$b),d$a.compileShader(d$d),d$d;},d$l._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],d$l._count=0,d$l._preCompileShader={},d$l.SHADERNAME2ID=2e-4,d$l.sharders=((d$l.sharders=[]).length=32,d$l.sharders),d$i(d$l,["nameKey",function(){return this.nameKey=new d$H();}]),d$l;}(),d$Za=function(d$a){function d$b(){this._maxsize=0,this._upload=!0,this._uploadSize=0,d$b.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id;}d$o(d$b,"laya.webgl.utils.Buffer2D",d$a);var d$c=d$b.prototype;return d$c.needSize=function(d$a){var d$b=this._byteLength;if(d$a){var d$c=this._byteLength+d$a;d$c<=this._buffer.byteLength||this._resizeBuffer(d$c<<1,!0),this._byteLength=d$c;}return d$b;},d$c._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),d$G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,d$Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),d$Na._gl.bufferSubData(this._bufferType,0,this._buffer);},d$c._bufferSubData=function(d$a,d$b,d$c){if(void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),this._maxsize=Math.max(this._maxsize,this._byteLength),d$G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,d$Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),d$b||d$c){var d$d=this._buffer.slice(d$b,d$c);d$Na._gl.bufferSubData(this._bufferType,d$a,d$d);}else d$Na._gl.bufferSubData(this._bufferType,d$a,this._buffer);},d$c._checkArrayUse=function(){},d$c._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0);},d$c._bind_subUpload=function(d$a,d$b,d$c){return void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(d$a,d$b,d$c),!0);},d$c._resizeBuffer=function(d$a,d$b){if(d$a<this._buffer.byteLength)return this;if(this.memorySize=d$a,d$b&&this._buffer&&0<this._buffer.byteLength){var d$c=new ArrayBuffer(d$a);new Uint8Array(d$c).set(new Uint8Array(this._buffer),0),this._buffer=d$c;}else this._buffer=new ArrayBuffer(d$a);return this._checkArrayUse(),this._upload=!0,this;},d$c.append=function(d$a){this._upload=!0;var d$b,d$c;d$b=d$a.byteLength,d$a instanceof Uint8Array?(this._resizeBuffer(this._byteLength+d$b,!0),d$c=new Uint8Array(this._buffer,this._byteLength)):d$a instanceof Uint16Array?(this._resizeBuffer(this._byteLength+d$b,!0),d$c=new Uint16Array(this._buffer,this._byteLength)):d$a instanceof Float32Array&&(this._resizeBuffer(this._byteLength+d$b,!0),d$c=new Float32Array(this._buffer,this._byteLength)),d$c.set(d$a,0),this._byteLength+=d$b,this._checkArrayUse();},d$c.appendU16Array=function(d$a,d$b){this._resizeBuffer(this._byteLength+2*d$b,!0);for(var d$c=new Uint16Array(this._buffer,this._byteLength,d$b),d$d=0;d$d<d$b;d$d++)d$c[d$d]=d$a[d$d];this._byteLength+=2*d$b,this._checkArrayUse();},d$c.appendEx=function(d$a,d$b){this._upload=!0;var d$c;d$c=d$a.byteLength,this._resizeBuffer(this._byteLength+d$c,!0),new d$b(this._buffer,this._byteLength).set(d$a,0),this._byteLength+=d$c,this._checkArrayUse();},d$c.appendEx2=function(d$a,d$b,d$c,d$d){void 0===d$d&&(d$d=1),this._upload=!0;var d$e,d$f;d$e=d$c*d$d,this._resizeBuffer(this._byteLength+d$e,!0),d$f=new d$b(this._buffer,this._byteLength);var d$i=0;for(d$i=0;d$i<d$c;d$i++)d$f[d$i]=d$a[d$i];this._byteLength+=d$e,this._checkArrayUse();},d$c.getBuffer=function(){return this._buffer;},d$c.setNeedUpload=function(){this._upload=!0;},d$c.getNeedUpload=function(){return this._upload;},d$c.upload=function(){var d$a=this._bind_upload();return d$Na._gl.bindBuffer(this._bufferType,null),d$Na._bindActive[this._bufferType]=null,d$La.activeShader=null,d$a;},d$c.subUpload=function(d$a,d$b,d$c){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0);var d$d=this._bind_subUpload();return d$Na._gl.bindBuffer(this._bufferType,null),d$Na._bindActive[this._bufferType]=null,d$La.activeShader=null,d$d;},d$c.disposeResource=function(){d$a.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0;},d$c.clear=function(){this._byteLength=0,this._upload=!0;},d$d(0,d$c,"bufferLength",function(){return this._buffer.byteLength;}),d$d(0,d$c,"byteLength",null,function(d$a){this._byteLength!==d$a&&(d$a<=this._buffer.byteLength||this._resizeBuffer(2*d$a+256,!0),this._byteLength=d$a);}),d$b.__int__=function(d$a){d$ga.QuadrangleIB=d$ga.create(35044),d$sa.fillIBQuadrangle(d$ga.QuadrangleIB,16);},d$b.FLOAT32=4,d$b.SHORT=2,d$b;}(d$Na),d$$a=(function(d$b){function d$c(d$a){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,d$c.__super.call(this,9);}d$o(d$c,"laya.webgl.shader.d2.value.GlowSV",d$b);var d$a=d$c.prototype;d$a.setValue=function(d$a){d$b.prototype.setValue.call(this,d$a);},d$a.clear=function(){d$b.prototype.clear.call(this);};}(d$Ra),function(d$a){function d$b(d$a){d$b.__super.call(this,64),this.defines.add(64);}d$o(d$b,"laya.webgl.shader.d2.value.TextSV",d$a);var d$c=d$b.prototype;return d$c.release=function(){(d$b.pool[d$b._length++]=this).clear();},d$c.clear=function(){d$a.prototype.clear.call(this);},d$b.create=function(){return d$b._length?d$b.pool[--d$b._length]:new d$b(null);},d$b.pool=[],d$b._length=0,d$b;}(d$Ra)),d$_a=function(d$a){function d$e(d$a,d$b,d$c,d$d){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,d$e.__super.call(this,d$a,d$b,d$c,d$d);}d$o(d$e,"laya.webgl.shader.d2.Shader2X",d$a);var d$b=d$e.prototype;return d$b.upload2dQuick1=function(d$a){this.upload(d$a,this._params2dQuick1||this._make2dQuick1());},d$b._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var d$a,d$b=this._params,d$c=0,d$d=d$b.length;d$c<d$d;d$c++)d$a=d$b[d$c],(d$t.isFlash||"size"!==d$a.name&&"position"!==d$a.name&&"texcoord"!==d$a.name)&&this._params2dQuick1.push(d$a);}return this._params2dQuick1;},d$b.disposeResource=function(){d$a.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null;},d$b.upload2dQuick2=function(d$a){this.upload(d$a,this._params2dQuick2||this._make2dQuick2());},d$b._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var d$a,d$b=this._params,d$c=0,d$d=d$b.length;d$c<d$d;d$c++)d$a=d$b[d$c],(d$t.isFlash||"size"!==d$a.name)&&this._params2dQuick2.push(d$a);}return this._params2dQuick2;},d$e.create=function(d$a,d$b,d$c,d$d){return new d$e(d$a,d$b,d$c,d$d);},d$e;}(d$Ya),d$ga=function(d$a){function d$b(d$a){this._uint8Array=null,this._uint16Array=null,void 0===d$a&&(d$a=35044),d$b.__super.call(this),this._bufferUsage=d$a,this._bufferType=34963,d$t.isFlash||(this._buffer=new ArrayBuffer(8));}d$o(d$b,"laya.webgl.utils.IndexBuffer2D",d$Za);var d$c=d$b.prototype;return d$c._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer));},d$c.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer));},d$c.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer));},d$c.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null;},d$b.QuadrangleIB=null,d$b.create=function(d$a){return void 0===d$a&&(d$a=35044),new d$b(d$a);},d$b;}(),d$ha=function(d$a){function d$c(d$a,d$b){this._floatArray32=null,this._vertexStride=0,d$c.__super.call(this),this._vertexStride=d$a,this._bufferUsage=d$b,this._bufferType=34962,d$t.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array();}d$o(d$c,"laya.webgl.utils.VertexBuffer2D",d$a);var d$b=d$c.prototype;return d$b.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer));},d$b.bind=function(d$a){d$a&&d$a._bind(),this._bind();},d$b.insertData=function(d$a,d$b){this.getFloat32Array().set(d$a,d$b),this._upload=!0;},d$b.bind_upload=function(d$a){d$a._bind_upload()||d$a._bind(),this._bind_upload()||this._bind();},d$b._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer));},d$b.disposeResource=function(){d$a.prototype.disposeResource.call(this);},d$b.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null;},d$d(0,d$b,"vertexStride",function(){return this._vertexStride;}),d$c.create=function(d$a,d$b){return void 0===d$b&&(d$b=35048),new d$c(d$a,d$b);},d$c;}(d$Za),d$ab=function(d$a){function d$j(d$a,d$b,d$c,d$d,d$e,d$f){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===d$c&&(d$c=6408),void 0===d$d&&(d$d=!0),d$j.__super.call(this,d$a,d$b),d$a){if(this._format=d$c,this._mipmap=d$d,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof d$a)this._url=d$a,this._src=d$a,this._image=new d$p.window.Image(),d$b&&(d$b.onload&&(this.onload=d$b.onload),d$b.onerror&&(this.onerror=d$b.onerror),d$b.onCreate&&d$b.onCreate(this)),this._image.crossOrigin=d$a&&0==d$a.indexOf("data:")?null:"",d$a&&(this._image.src=d$a);else if(d$a instanceof ArrayBuffer){this._src=d$b,this._url=this._src;var d$i=new d$k(d$a);d$i.readUTFBytes(4),d$i.readUTFBytes(2),d$i.getInt16();d$i.endian="bigEndian",this._w=d$i.getInt16(),this._h=d$i.getInt16();d$i.getInt16(),d$i.getInt16();this._image=new Uint8Array(d$a,d$i.pos),this._format=d$wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,d$Q.enabled&&this._w<d$Q.atlasLimitWidth&&this._h<d$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;}else{if(!(d$a instanceof Uint8Array))return this._src=d$b,this._url=this._src,this._image=d$a.source||d$a,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=d$b,this._url=this._src,this._w=d$e,this._h=d$f,this._image=d$a,this._format=0===d$c?d$a.byteLength/(d$e*d$f)==4?6408:6407:d$c;}this._$5__enableMerageInAtlas=!0;}}d$o(d$j,"laya.webgl.resource.WebGLImage",d$r);var d$b=d$j.prototype;return d$y.imps(d$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),d$b._init_=function(d$a,d$b){},d$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var d$a=d$wa.mainContext,d$b=this._source=d$a.createTexture(),d$c=d$xa.curBindTexTarget,d$d=d$xa.curBindTexValue;d$xa.bindTexture(d$a,3553,d$b);var d$e=this.minFifter,d$f=this.magFifter,d$i=this.repeat?10497:33071,d$j=d$m.isPOT(this._w,this._h),d$k=!1;switch(d$j?(this.mipmap?-1!==d$e||(d$e=9987):-1!==d$e||(d$e=9729),-1!==d$f||(d$f=9729),d$a.texParameteri(3553,10241,d$e),d$a.texParameteri(3553,10240,d$f),d$a.texParameteri(3553,10242,d$i),d$a.texParameteri(3553,10243,d$i),this.mipmap&&d$a.generateMipmap(3553)):(-1!==d$e||(d$e=9729),-1!==d$f||(d$f=9729),d$a.texParameteri(3553,10241,d$e),d$a.texParameteri(3553,10240,d$f),d$a.texParameteri(3553,10242,33071),d$a.texParameteri(3553,10243,33071)),d$a.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&d$a.pixelStorei(d$a.UNPACK_ALIGNMENT,1),d$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&d$a.pixelStorei(d$a.UNPACK_ALIGNMENT,1),d$a.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:d$k=!0,d$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case d$wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:d$k=!0,d$a.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format);}d$a.pixelStorei(37441,!1),d$c&&d$d&&d$xa.bindTexture(d$a,d$c,d$d),this.uri||(this.uri=this._url),d$k?this.memorySize=this._image.length:d$j&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1;},d$b.recreateResource=function(){var d$a=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate();}else{this._recreateLock=!0;var d$b=this;this._image=new d$p.window.Image(),this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(d$b._needReleaseAgain)return d$b._needReleaseAgain=!1,d$b._image.onload=null,void(d$b._image=null);d$b._allowMerageInAtlas&&d$b._enableMerageInAtlas?(d$a.memorySize=0,d$a._recreateLock=!1):d$b._createWebGlTexture(),d$b.completeCreate();},this._image.src=this._src;}},d$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&d$wa.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0;},d$b.onresize=function(){this._w=this._image.width,this._h=this._image.height,d$Q.enabled&&this._w<d$Q.atlasLimitWidth&&this._h<d$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1;},d$b.clearAtlasSource=function(){this._image=null;},d$d(0,d$b,"format",function(){return this._format;}),d$d(0,d$b,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas;},function(d$a){this._$5__enableMerageInAtlas=d$a;}),d$d(0,d$b,"mipmap",function(){return this._mipmap;}),d$d(0,d$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas;}),d$d(0,d$b,"atlasSource",function(){return this._image;}),d$d(0,d$b,"onload",null,function(d$a){var d$b=this;this._onload=d$a,this._image&&(this._image.onload=null!=this._onload?function(){d$b.onresize(),d$b._onload();}:null);}),d$d(0,d$b,"onerror",null,function(d$a){var d$b=this;this._onerror=d$a,this._image&&(this._image.onerror=null!=this._onerror?function(){d$b._onerror();}:null);}),d$j;}();d$y.__init([d$pa,d$P,d$za,d$va]);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(d$a,d$b){"use strict";for(var d$c in Object.defineProperty(d$b,"__esModule",{value:!0}),Laya){var d$d=Laya[d$c];d$d&&d$d.__isclass&&(d$b[d$c]=d$d);}}),function(d$f,d$a,d$d){d$d.un,d$d.uns;var d$e=d$d.static,d$i=d$d.class,d$j=d$d.getset,d$k=(d$d.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),d$q=laya.utils.ClassUtils,d$n=(laya.events.Event,laya.utils.HTMLChar),d$l=laya.net.Loader,d$m=(laya.display.Node,laya.maths.Rectangle),d$o=laya.renders.Render,d$p=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),d$r=laya.utils.Stat,d$L=laya.display.Text,d$s=laya.resource.Texture,d$t=laya.net.URL,d$u=laya.utils.Utils,d$v=function(){function d$p(){}return d$i(d$p,"laya.html.utils.HTMLParse"),d$p.parse=function(d$a,d$b,d$c){d$b=(d$b="<root>"+(d$b=d$b.replace(/<br>/g,"<br/>"))+"</root>").replace(d$p.spacePattern,d$p.char255);var d$d=d$u.parseXMLFromString(d$b);d$p._parseXML(d$a,d$d.childNodes[0].childNodes,d$c);},d$p._parseXML=function(d$a,d$b,d$c,d$d){var d$e=0,d$f=0;if(d$b.join||d$b.item)for(d$e=0,d$f=d$b.length;d$e<d$f;++d$e)d$p._parseXML(d$a,d$b[d$e],d$c,d$d);else{var d$i,d$j,d$k;if(3==d$b.nodeType)return void(d$a instanceof laya.html.dom.HTMLDivElement?(null==d$b.nodeName&&(d$b.nodeName="#text"),d$j=d$b.nodeName.toLowerCase(),0<(d$k=d$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(d$i=d$q.getInstance(d$j))&&(d$a.addChild(d$i),d$i.innerTEXT=d$k.replace(d$p.char255AndOneSpacePattern," "))):0<(d$k=d$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(d$a.innerTEXT=d$k.replace(d$p.char255AndOneSpacePattern," ")));if("#comment"==(d$j=d$b.nodeName.toLowerCase()))return;if(d$i=d$q.getInstance(d$j)){(d$i=d$a.addChild(d$i)).URI=d$c,d$i.href=d$d;var d$l=d$b.attributes;if(d$l&&0<d$l.length)for(d$e=0,d$f=d$l.length;d$e<d$f;++d$e){var d$m=d$l[d$e],d$n=d$m.nodeName,d$o=d$m.value;d$i._setAttributes(d$n,d$o);}d$p._parseXML(d$i,d$b.childNodes,d$c,d$i.href);}else d$p._parseXML(d$a,d$b.childNodes,d$c,d$d);}},d$p.char255=String.fromCharCode(255),d$p.spacePattern=/&nbsp;|&#160;/g,d$p.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),d$p;}(),d$w=function(){function d$K(){}return d$i(d$K,"laya.html.utils.Layout"),d$K.later=function(d$a){null==d$K._will&&(d$K._will=[],d$d.stage.frameLoop(1,null,function(){if(!(d$K._will.length<1)){for(var d$a=0;d$a<d$K._will.length;d$a++)laya.html.utils.Layout.layout(d$K._will[d$a]);d$K._will.length=0;}})),d$K._will.push(d$a);},d$K.layout=function(d$a){if(!d$a||!d$a._style)return null;if(0==(512&d$a._style._type))return null;d$a.getStyle()._type&=-513;var d$b=d$K._multiLineLayout(d$a);return d$o.isConchApp&&d$a.layaoutCallNative&&d$a.layaoutCallNative(),d$b;},d$K._multiLineLayout=function(d$a){if(d$L.RightToLeft)return d$K._multiLineLayout2(d$a);var d$b=new Array();d$a._addChildsToLayout(d$b);var d$c,d$d,d$e,d$f,d$i,d$j=0,d$k=d$b.length,d$l=d$a._getCSSStyle(),d$m=d$l.letterSpacing,d$n=d$l.leading,d$o=d$l.lineHeight,d$p=d$l._widthAuto()||!d$l.wordWrap,d$q=d$p?999999:d$a.width,d$r=(d$a.height,0),d$s=d$l.italic?d$l.fontSize/3:0,d$t=d$l._getAlign(),d$u=d$l._getValign(),d$v=0!==d$u||0!==d$t||0!=d$o,d$w=0,d$x=0,d$y=0,d$z=0,d$A=new Array(),d$B=d$A[0]=new d$M(),d$C=!1,d$D=!1;d$B.h=0,d$l.italic&&(d$q-=d$l.fontSize/3);var d$E=0,d$F=!0;function d$G(){d$B.y=d$x,d$x+=d$B.h+d$n,0==d$B.h&&(d$x+=d$o),d$B.mWidth=d$E,d$E=0,d$B=new d$M(),d$A.push(d$B),d$B.h=0,d$C=!(d$F=!(d$w=0));}for(d$j=0;d$j<d$k;d$j++)if(null!=(d$c=d$b[d$j])){if(d$F=!1,d$c instanceof laya.html.dom.HTMLBrElement)d$G(),d$B.y=d$x;else{if(d$c._isChar()){if((d$f=d$c).isWord)d$C=d$D||"\n"===d$f.char,d$B.wordStartIndex=d$B.elements.length;else{if(d$y=d$f.width+d$f.style.letterSpacin,0<d$A.length&&d$q<d$w+d$y&&0<d$B.wordStartIndex){var d$H;d$H=d$B.elements.length-d$B.wordStartIndex+1,d$B.elements.length=d$B.wordStartIndex,d$j-=d$H,d$G();continue;}d$C=!1,d$E+=d$f.width;}d$y=d$f.width+d$m,d$z=d$f.height,d$D=!1,(d$C=d$C||d$q<d$w+d$y)&&d$G(),d$B.minTextHeight=Math.min(d$B.minTextHeight,d$c.height);}else d$d=d$c._getCSSStyle(),d$i=d$c,d$e=d$d.padding,0===d$d._getCssFloat()||(d$v=!0),d$C=d$D||d$d.lineElement,d$y=d$i.width*d$i._style._tf.scaleX+d$e[1]+d$e[3]+d$m,d$z=d$i.height*d$i._style._tf.scaleY+d$e[0]+d$e[2],d$D=d$d.lineElement,(d$C=d$C||d$q<d$w+d$y&&d$d.wordWrap)&&d$G();d$B.elements.push(d$c),d$B.h=Math.max(d$B.h,d$z),d$c.x=d$w,d$c.y=d$x,d$w+=d$y,d$B.w=d$w-d$m,d$B.y=d$x,d$r=Math.max(d$w+d$s,d$r);}}else d$F||(d$w+=d$K.DIV_ELEMENT_PADDING),d$B.wordStartIndex=d$B.elements.length;if(d$x=d$B.y+d$B.h,d$v){var d$I=0,d$J=d$q;for(d$p&&0<d$a.width&&(d$J=d$a.width),d$j=0,d$k=d$A.length;d$j<d$k;d$j++)d$A[d$j].updatePos(0,d$J,d$j,d$I,d$t,d$u,d$o),d$I+=Math.max(d$o,d$A[d$j].h+d$n);d$x=d$I;}return d$p&&(d$a.width=d$r),d$x>d$a.height&&(d$a.height=d$x),[d$r,d$x];},d$K._multiLineLayout2=function(d$a){var d$b=new Array();d$a._addChildsToLayout(d$b);var d$c,d$d,d$e,d$f,d$i,d$j=0,d$k=d$b.length,d$l=d$a._getCSSStyle(),d$m=d$l.letterSpacing,d$n=d$l.leading,d$o=d$l.lineHeight,d$p=d$l._widthAuto()||!d$l.wordWrap,d$q=d$p?999999:d$a.width,d$r=(d$a.height,0),d$s=d$l.italic?d$l.fontSize/3:0,d$t=2-d$l._getAlign(),d$u=d$l._getValign(),d$v=0!==d$u||0!=d$t||0!=d$o,d$w=0,d$x=0,d$y=0,d$z=0,d$A=new Array(),d$B=d$A[0]=new d$M(),d$C=!1,d$D=!1;d$B.h=0,d$l.italic&&(d$q-=d$l.fontSize/3);var d$E=0,d$F=!0;function d$G(){d$B.y=d$x,d$x+=d$B.h+d$n,0==d$B.h&&(d$x+=d$o),d$B.mWidth=d$E,d$E=0,d$B=new d$M(),d$A.push(d$B),d$B.h=0,d$C=!(d$F=!(d$w=0));}for(d$j=0;d$j<d$k;d$j++)if(null!=(d$c=d$b[d$j])){if(d$F=!1,d$c instanceof laya.html.dom.HTMLBrElement)d$G(),d$B.y=d$x;else{if(d$c._isChar()){if((d$f=d$c).isWord)d$C=d$D||"\n"===d$f.char,d$B.wordStartIndex=d$B.elements.length;else{if(0<d$A.length&&d$q<d$w+d$y&&0<d$B.wordStartIndex){var d$H;d$H=d$B.elements.length-d$B.wordStartIndex+1,d$B.elements.length=d$B.wordStartIndex,d$j-=d$H,d$G();continue;}d$C=!1,d$E+=d$f.width;}d$y=d$f.width+d$m,d$z=d$f.height,d$D=!1,(d$C=d$C||d$q<d$w+d$y)&&d$G(),d$B.minTextHeight=Math.min(d$B.minTextHeight,d$c.height);}else d$d=d$c._getCSSStyle(),d$i=d$c,d$e=d$d.padding,0===d$d._getCssFloat()||(d$v=!0),d$C=d$D||d$d.lineElement,d$y=d$i.width*d$i._style._tf.scaleX+d$e[1]+d$e[3]+d$m,d$z=d$i.height*d$i._style._tf.scaleY+d$e[0]+d$e[2],d$D=d$d.lineElement,(d$C=d$C||d$q<d$w+d$y&&d$d.wordWrap)&&d$G();d$B.elements.push(d$c),d$B.h=Math.max(d$B.h,d$z),d$c.x=d$w,d$c.y=d$x,d$w+=d$y,d$B.w=d$w-d$m,d$B.y=d$x,d$r=Math.max(d$w+d$s,d$r);}}else d$F||(d$w+=d$K.DIV_ELEMENT_PADDING),d$B.wordStartIndex=d$B.elements.length;if(d$x=d$B.y+d$B.h,d$v){var d$I=0,d$J=d$q;for(d$j=0,d$k=d$A.length;d$j<d$k;d$j++)d$A[d$j].updatePos(0,d$J,d$j,d$I,d$t,d$u,d$o),d$I+=Math.max(d$o,d$A[d$j].h+d$n);d$x=d$I;}for(d$p&&(d$a.width=d$r),d$x>d$a.height&&(d$a.height=d$x),d$j=0,d$k=d$A.length;d$j<d$k;d$j++)d$A[d$j].revertOrder(d$q);return[d$r,d$x];},d$K._will=null,d$K.DIV_ELEMENT_PADDING=0,d$K;}(),d$M=function(){function d$a(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array();}d$i(d$a,"laya.html.utils.LayoutLine");var d$b=d$a.prototype;return d$b.updatePos=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){var d$j,d$k=0;0<this.elements.length&&(d$k=(d$j=this.elements[this.elements.length-1]).x+d$j.width-this.elements[0].x);var d$l=0,d$m=NaN;1===d$e&&(d$l=(d$b-d$k)/2),2===d$e&&(d$l=d$b-d$k),0===d$i||0!=d$f||(d$f=1);for(var d$n=0,d$o=this.elements.length;d$n<d$o;d$n++){var d$p=(d$j=this.elements[d$n])._getCSSStyle();switch(0!==d$l&&(d$j.x+=d$l),d$p._getValign()){case 0:d$j.y=d$d;break;case 1:var d$q=0;99999!=this.minTextHeight&&(d$q=this.minTextHeight);var d$r=(d$q+d$i)/2;d$r=Math.max(d$r,this.h),d$m=(laya.html.dom.HTMLImageElement,d$d+d$r-d$j.height),d$j.y=d$m;break;case 2:d$j.y=d$d+(d$i-d$j.height);}}},d$b.revertOrder=function(d$a){var d$b;if(0<this.elements.length){var d$c,d$d=0;for(d$c=this.elements.length,d$d=0;d$d<d$c;d$d++)(d$b=this.elements[d$d]).x=d$a-d$b.x-d$b.width;}},d$a;}(),d$x=function(d$c){function d$b(){this.URI=null,this._href=null,d$b.__super.call(this),this._text=d$b._EMPTYTEXT,this.setStyle(new d$k(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0;}d$i(d$b,"laya.html.dom.HTMLElement",d$c);var d$a=d$b.prototype;return d$a.layaoutCallNative=function(){var d$a=0;if(this._childs&&0<(d$a=this._childs.length))for(var d$b=0;d$b<d$a;d$b++)this._childs[d$b].layaoutCallNative&&this._childs[d$b].layaoutCallNative();var d$c=this._getWords();d$c?laya.html.dom.HTMLElement.fillWords(this,d$c,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear();},d$a.appendChild=function(d$a){return this.addChild(d$a);},d$a._getWords2=function(){var d$a=this._text.text;if(!d$a||0===d$a.length)return null;var d$b,d$c,d$d=0,d$e=0;if(this._text.drawWords)d$c=this._text.drawWords;else{for(d$e=(d$b=d$a.split(" ")).length-1,d$c=[],d$d=0;d$d<d$e;d$d++)d$c.push(d$b[d$d]," ");0<=d$e&&d$c.push(d$b[d$e]),this._text.drawWords=d$c;}var d$f,d$i=this._text.words;if(d$i&&d$i.length===d$c.length)return d$i;null===d$i&&(this._text.words=d$i=[]),d$i.length=d$c.length;var d$j=this.style,d$k=d$j.font;for(d$d=0,d$e=d$c.length;d$d<d$e;d$d++){d$f=d$u.measureText(d$c[d$d],d$k);var d$l=d$i[d$d]=new d$n(d$c[d$d],d$f.width,d$f.height||d$j.fontSize,d$j);if(1<d$l.char.length&&(d$l.charNum=d$l.char),this.href){var d$m=new d$p();this.addChild(d$m),d$l.setSprite(d$m);}}return d$i;},d$a._getWords=function(){if(!d$L.CharacterCache)return this._getWords2();var d$a=this._text.text;if(!d$a||0===d$a.length)return null;var d$b,d$c=this._text.words;if(d$c&&d$c.length===d$a.length)return d$c;null===d$c&&(this._text.words=d$c=[]),d$c.length=d$a.length;for(var d$d=this.style,d$e=d$d.font,d$f=0,d$i=d$a.length;d$f<d$i;d$f++)if(d$b=d$u.measureText(d$a.charAt(d$f),d$e)){var d$j=d$c[d$f]=new d$n(d$a.charAt(d$f),d$b.width,d$b.height||d$d.fontSize,d$d);if(this.href){var d$k=new d$p();this.addChild(d$k),d$j.setSprite(d$k);}}else console.warn("_getWords size is null"+d$a.charAt(d$f),d$e);return d$c;},d$a.showLinkSprite=function(){var d$a=this._text.words;if(d$a)for(var d$b,d$c,d$d=[],d$e=0;d$e<d$a.length;d$e++)d$c=d$a[d$e],(d$b=new d$p()).graphics.drawRect(0,0,d$c.width,d$c.height,"#ff0000"),d$b.width=d$c.width,d$b.height=d$c.height,this.addChild(d$b),d$d.push(d$b);},d$a._layoutLater=function(){var d$a=this.style;512&d$a._type||(d$a.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&d$a.block?(d$w.later(this),d$a._type|=512):this.parent&&this.parent._layoutLater());},d$a._setAttributes=function(d$a,d$b){switch(d$a){case"style":return void this.style.cssText(d$b);case"class":return void(this.className=d$b);}d$c.prototype._setAttributes.call(this,d$a,d$b);},d$a.updateHref=function(){if(null!=this._href){var d$a=this._getWords();if(d$a)for(var d$b,d$c,d$d=0;d$d<d$a.length;d$d++)(d$c=(d$b=d$a[d$d]).getSprite())&&(d$c.size(d$b.width,d$b.height),d$c.on("click",this,this.onLinkHandler));}},d$a.onLinkHandler=function(d$a){switch(d$a.type){case"click":for(var d$b=this;d$b;)d$b.event("link",[this.href]),d$b=d$b.parent;}},d$a.formatURL=function(d$a){return this.URI?d$t.formatURL(d$a,this.URI?this.URI.path:null):d$a;},d$j(0,d$a,"href",function(){return this._href;},function(d$a){null!=(this._href=d$a)&&(this._getCSSStyle().underLine=1,this.updateHref());}),d$j(0,d$a,"color",null,function(d$a){this.style.color=d$a;}),d$j(0,d$a,"onClick",null,function(d$a){d$d._runScript("fn=function(event){"+d$a+";}"),this.on("click",this,void 0);}),d$j(0,d$a,"id",null,function(d$a){d$y.document.setElementById(d$a,this);}),d$j(0,d$a,"innerTEXT",function(){return this._text.text;},function(d$a){this.text=d$a;}),d$j(0,d$a,"style",function(){return this._style;}),d$j(0,d$a,"text",function(){return this._text.text;},function(d$a){this._text==d$b._EMPTYTEXT?this._text={text:d$a,words:null}:(this._text.text=d$a,this._text.words&&(this._text.words.length=0)),d$o.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref();}),d$j(0,d$a,"parent",d$c.prototype._$get_parent,function(d$a){if(d$a instanceof laya.html.dom.HTMLElement){var d$b=d$a;this.URI||(this.URI=d$b.URI),this.style.inherit(d$b.style);}d$d.superSet(d$p,this,"parent",d$a);}),d$j(0,d$a,"className",null,function(d$a){this.style.attrs(d$y.document.styleSheets["."+d$a]);}),d$b.fillWords=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){d$a.graphics.clear();for(var d$j=0,d$k=d$b.length;d$j<d$k;d$j++){var d$l=d$b[d$j];d$a.graphics.fillText(d$l.char,d$l.x+d$c,d$l.y+d$d,d$e,d$f,"left",d$i);}},d$b._EMPTYTEXT={text:null,words:null},d$b;}(d$p),d$b=(function(d$a){function d$b(){d$b.__super.call(this),this.style.lineElement=!0,this.style.block=!0;}d$i(d$b,"laya.html.dom.HTMLBrElement",d$x);}(),function(d$a){function d$b(){this.contextHeight=NaN,this.contextWidth=NaN,d$b.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200;}d$i(d$b,"laya.html.dom.HTMLDivElement",d$a);var d$c=d$b.prototype;return d$c.appendHTML=function(d$a){d$v.parse(this,d$a,this.URI),this.layout();},d$c._addChildsToLayout=function(d$b){var d$a=this._getWords();if(null==d$a&&0==this._childs.length)return!1;d$a&&d$a.forEach(function(d$a){d$b.push(d$a);});for(var d$c=!0,d$d=0,d$e=this._childs.length;d$d<d$e;d$d++){var d$f=this._childs[d$d];d$c?d$c=!1:d$b.push(null),d$f._addToLayout(d$b);}return!0;},d$c._addToLayout=function(d$a){this.layout();},d$c.layout=function(){if(this.style){this.style._type|=512;var d$a=d$w.layout(this);if(d$a){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new d$m());var d$b=this._$P.mHtmlBounds;d$b.x=d$b.y=0,d$b.width=this.contextWidth=d$a[0],d$b.height=this.contextHeight=d$a[1],this.setBounds(d$b);}}},d$j(0,d$c,"height",function(){return this._height?this._height:this.contextHeight;},d$a.prototype._$set_height),d$j(0,d$c,"innerHTML",null,function(d$a){this.destroyChildren(),this.appendHTML(d$a);}),d$j(0,d$c,"width",function(){return this._width?this._width:this.contextWidth;},function(d$a){var d$b=!1;d$b=0===d$a?d$a!=this._width:d$a!=this.width,d$d.superSet(d$x,this,"width",d$a),d$b&&this.layout();}),d$b;}(d$x)),d$y=function(d$a){function d$b(){this.all=new Array(),this.styleSheets=d$k.styleSheets,d$b.__super.call(this);}d$i(d$b,"laya.html.dom.HTMLDocument",d$x);var d$c=d$b.prototype;return d$c.getElementById=function(d$a){return this.all[d$a];},d$c.setElementById=function(d$a,d$b){this.all[d$a]=d$b;},d$e(d$b,["document",function(){return this.document=new d$b();}]),d$b;}();(function(d$a){function d$b(){this._tex=null,this._url=null,this._renderArgs=[],d$b.__super.call(this),this.style.block=!0;}d$i(d$b,"laya.html.dom.HTMLImageElement",d$x);var d$c=d$b.prototype;d$c._addToLayout=function(d$a){!this._style.absolute&&d$a.push(this);},d$c.render=function(d$a,d$b,d$c){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(d$r.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,d$a.ctx.drawTexture2(d$b,d$c,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs));},d$c.layaoutCallNative=function(){var d$a=0;if(this._childs&&0<(d$a=this._childs.length))for(var d$b=0;d$b<d$a;d$b++)this._childs[d$b].layaoutCallNative&&this._childs[d$b].layaoutCallNative();},d$j(0,d$c,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width;},function(d$a){this._width!==d$a&&(this._width=d$a,this._style.width=d$a,this.repaint());}),d$j(0,d$c,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height;},function(d$a){this._height!==d$a&&(this._height=d$a,this._style.height=d$a,this.repaint());}),d$c.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),d$l.clearCache(this,this._url),this._tex=null),d$x.prototype.destroy.call(this);},d$c.onloaded=function(){var d$a=this._style;d$a&&!d$a.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),d$a&&!d$a.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),d$o.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint();},d$c._loadImageComplete=function(d$a,d$b,d$c){if(!this._destroyed)if(null!=d$c){if(d$c instanceof ArrayBuffer){var d$d=new DataView(d$c);new laya.webgl.resource.WebGLImage(new Uint8Array(d$c,8),d$a,0,!1,d$d.getUint32(0),d$d.getUint32(4));this.onloaded();}else if(d$c instanceof d$s)d$l.imgMgrSet[d$a]=d$b,d$f.imgMgrLock(d$a,d$l.imgMgrSet[d$a]),this._url=d$a,this._tex=d$c,d$l.keepCache(this,d$a),d$l.cacheRes(d$a,this._tex),this.onloaded();else{var d$e=-1!=d$a.indexOf(".png",d$a.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(d$c,d$a,d$e,!1,d$c.width,d$c.height);this.onloaded();}}else this.event("error","Load image failed");},d$j(0,d$c,"src",null,function(d$a){(d$a=this.formatURL(d$a),this._url!=d$a)&&(null!=this._tex&&(d$l.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=d$a,(this._tex=d$l.getRes(d$a))?(d$l.keepCache(this,d$a),this.onloaded()):d$f.imgMgrLoad(d$a,this._loadImageComplete.bind(this),2,!1));});})(),function(d$a){function d$b(){this.type=null,d$b.__super.call(this),this.visible=!1;}d$i(d$b,"laya.html.dom.HTMLLinkElement",d$a);var d$c=d$b.prototype;d$c._onload=function(d$a){switch(this.type){case"text/css":d$k.parseCSS(d$a,this.URI);}},d$j(0,d$c,"href",d$a.prototype._$get_href,function(d$a){var d$b=this;d$a=this.formatURL(d$a),this.URI=new d$t(d$a);var d$c=new d$l();d$c.once("complete",null,function(d$a){d$b._onload(d$a);}),d$c.load(d$a,"text");}),d$b._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g");}(d$x),function(d$a){function d$b(){d$b.__super.call(this),this.visible=!1;}d$i(d$b,"laya.html.dom.HTMLStyleElement",d$a),d$j(0,d$b.prototype,"text",d$a.prototype._$get_text,function(d$a){d$k.parseCSS(d$a,null);});}(d$x),function(d$a){function d$b(){d$b.__super.call(this),this._getCSSStyle().valign="middle";}d$i(d$b,"laya.html.dom.HTMLIframeElement",d$a),d$j(0,d$b.prototype,"href",d$a.prototype._$get_href,function(d$c){var d$d=this;d$c=this.formatURL(d$c);var d$a=new d$l();d$a.once("complete",null,function(d$a){var d$b=d$d.URI;d$d.URI=new d$t(d$c),d$d.innerHTML=d$a,!d$b||(d$d.URI=d$b);}),d$a.load(d$c,"text");});}(d$b);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(d$a,d$b){"use strict";for(var d$c in Object.defineProperty(d$b,"__esModule",{value:!0}),Laya){var d$d=Laya[d$c];d$d&&d$d.__isclass&&(d$b[d$c]=d$d);}}),function(d$e,d$a,d$r){d$r.un,d$r.uns;var d$d=d$r.static,d$f=d$r.class,d$i=d$r.getset,d$c=(d$r.__newvec,laya.display.Animation),d$s=(laya.utils.Browser,laya.utils.ClassUtils),d$j=laya.filters.ColorFilter,d$k=laya.utils.Ease,d$l=laya.events.Event,d$m=(laya.events.EventDispatcher,laya.display.css.Font),d$n=laya.display.FrameAnimation,d$b=laya.display.Graphics,d$o=laya.utils.Handler,d$p=laya.display.Input,d$u=laya.net.Loader,d$q=(laya.display.Node,laya.maths.Point),d$t=laya.maths.Rectangle,d$v=laya.renders.Render,d$w=laya.display.Sprite,d$x=laya.display.Text,d$y=laya.resource.Texture,d$z=laya.utils.Tween,d$A=laya.utils.Utils,d$B=laya.utils.WeakObject;d$r.interface("laya.ui.IItem"),d$r.interface("laya.ui.ISelect"),d$r.interface("laya.ui.IRender"),d$r.interface("laya.ui.IComponent"),d$r.interface("laya.ui.IBox","IComponent");var d$C=function(){function d$a(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN;}return d$f(d$a,"laya.ui.LayoutStyle"),d$d(d$a,["EMPTY",function(){return this.EMPTY=new d$a();}]),d$a;}(),d$D=function(){function d$a(){}return d$f(d$a,"laya.ui.Styles"),d$a.labelColor="#000000",d$a.buttonStateNum=3,d$a.scrollBarMinNum=15,d$a.scrollBarDelayTime=500,d$d(d$a,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0];},"labelPadding",function(){return this.labelPadding=[2,2,2,2];},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3];},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"];},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"];}]),d$a;}(),d$E=function(){function d$e(){}return d$f(d$e,"laya.ui.UIUtils"),d$e.fillArray=function(d$a,d$b,d$c){var d$d=d$a.concat();if(d$b)for(var d$e=d$b.split(","),d$f=0,d$i=Math.min(d$d.length,d$e.length);d$f<d$i;d$f++){var d$j=d$e[d$f];d$d[d$f]="true"==d$j||"false"!=d$j&&d$j,null!=d$c&&(d$d[d$f]=d$c(d$j));}return d$d;},d$e.toColor=function(d$a){return d$A.toHexColor(d$a);},d$e.gray=function(d$a,d$b){void 0===d$b&&(d$b=!0),d$b?d$e.addFilter(d$a,d$e.grayFilter):d$e.clearFilter(d$a,d$j);},d$e.addFilter=function(d$a,d$b){var d$c=d$a.filters||[];d$c.push(d$b),d$a.filters=d$c;},d$e.clearFilter=function(d$a,d$b){var d$c=d$a.filters;if(null!=d$c&&0<d$c.length){for(var d$d=d$c.length-1;-1<d$d;d$d--){var d$e=d$c[d$d];d$r.__typeof(d$e,d$b)&&d$c.splice(d$d,1);}d$a.filters=d$c;}},d$e._getReplaceStr=function(d$a){return d$e.escapeSequence[d$a];},d$e.adptString=function(d$a){return d$a.replace(/\\(\w)/g,d$e._getReplaceStr);},d$e.getBindFun=function(d$a){var d$b=d$e._funMap.get(d$a);if(null==d$b){var d$c='"'+d$a+'"',d$d="(function(data){if(data==null)return;with(data){try{\nreturn "+(d$c=d$c.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";d$b=d$r._runScript(d$d),d$e._funMap.set(d$a,d$b);}return d$b;},d$d(d$e,["grayFilter",function(){return this.grayFilter=new d$j([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]);},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"};},"_funMap",function(){return this._funMap=new d$B();}]),d$e;}(),d$F=function(){function d$a(){}return d$f(d$a,"UIConfig"),d$a.touchScrollEnable=!0,d$a.mouseWheelEnable=!0,d$a.showButtons=!0,d$a.popupBgColor="#000000",d$a.popupBgAlpha=.5,d$a.closeDialogOnSide=!0,d$a;}(),d$G=function(d$c){function d$t(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,d$t.__super.call(this),this._weakKeys=[];}d$f(d$t,"laya.ui.AutoBitmap",d$c);var d$a=d$t.prototype;return d$a.destroy=function(){if(d$u.clearObject(this,this._weakKey),this._weakKeys){for(var d$a=0,d$b=this._weakKeys.length;d$a<d$b;++d$a)d$u.clearObject(this,this._weakKeys[d$a]);this._weakKeys=null;}d$c.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null;},d$a._setChanged=function(){this._isChanged||(this._isChanged=!0,d$r.timer.callLater(this,this.changeSource));},d$a.changeSource=function(){this._isChanged=!1;var d$a=this._source;if(d$a&&d$a.bitmap){var d$b=this.width,d$c=this.height,d$d=this._sizeGrid,d$e=d$a.sourceWidth,d$f=d$a.sourceHeight;if(!d$d||d$e===d$b&&d$f===d$c)this.cleanByTexture(d$a,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,d$b,d$c);else{d$u.clearObject(this,this._weakKey),d$a.$_GID||(d$a.$_GID=d$A.getGID());var d$i=d$a.$_GID+"."+d$b+"."+d$c+"."+d$d.join("."),d$j=d$u.findObject(d$i);if(d$A.isOKCmdList(d$j))return this._weakKey=d$i,d$u.keepObject(this,this._weakKey),void(this.cmds=d$j);this.clear();var d$k,d$l,d$m=d$d[0],d$n=d$d[1],d$o=d$d[2],d$p=d$d[3],d$q=d$d[4],d$r=!1;if(d$b==d$e&&(d$p=d$n=0),d$c==d$f&&(d$m=d$o=0),d$b<d$p+d$n){var d$s=d$b;d$r=!0,d$b=d$p+d$n,this.save(),this.clipRect(0,0,d$s,d$c);}d$p&&d$m&&(d$k=d$t.getTexture(d$a,0,0,d$p,d$m),d$l=this._weakKeys[0],d$k?(d$l!=d$k.weakKey&&(d$u.clearObject(this,d$l),d$u.keepObject(this,d$k.weakKey),this._weakKeys[0]=d$k.weakKey),this.drawTexture(d$k,0,0,d$p,d$m)):(d$u.clearObject(this,d$l),this._weakKeys[0]="")),d$n&&d$m&&(d$k=d$t.getTexture(d$a,d$e-d$n,0,d$n,d$m),d$l=this._weakKeys[1],d$k?(d$l!=d$k.weakKey&&(d$u.clearObject(this,d$l),d$u.keepObject(this,d$k.weakKey),this._weakKeys[1]=d$k.weakKey),this.drawTexture(d$k,d$b-d$n,0,d$n,d$m)):(d$u.clearObject(this,d$l),this._weakKeys[1]="")),d$p&&d$o&&(d$k=d$t.getTexture(d$a,0,d$f-d$o,d$p,d$o),d$l=this._weakKeys[2],d$k?(d$l!=d$k.weakKey&&(d$u.clearObject(this,d$l),d$u.keepObject(this,d$k.weakKey),this._weakKeys[2]=d$k.weakKey),this.drawTexture(d$k,0,d$c-d$o,d$p,d$o)):(d$u.clearObject(this,d$l),this._weakKeys[2]="")),d$n&&d$o&&(d$k=d$t.getTexture(d$a,d$e-d$n,d$f-d$o,d$n,d$o),d$l=this._weakKeys[3],d$k?(d$l!=d$k.weakKey&&(d$u.clearObject(this,d$l),d$u.keepObject(this,d$k.weakKey),this._weakKeys[3]=d$k.weakKey),this.drawTexture(d$k,d$b-d$n,d$c-d$o,d$n,d$o)):(d$u.clearObject(this,d$l),this._weakKeys[3]="")),d$m&&(d$k=d$t.getTexture(d$a,d$p,0,d$e-d$p-d$n,d$m),d$l=this._weakKeys[4],d$k?(d$l!=d$k.weakKey&&(d$u.clearObject(this,d$l),d$u.keepObject(this,d$k.weakKey),this._weakKeys[4]=d$k.weakKey),this.drawBitmap(d$q,d$k,d$p,0,d$b-d$p-d$n,d$m)):(d$u.clearObject(this,d$l),this._weakKeys[4]="")),d$o&&(d$k=d$t.getTexture(d$a,d$p,d$f-d$o,d$e-d$p-d$n,d$o),d$l=this._weakKeys[5],d$k?(d$l!=d$k.weakKey&&(d$u.clearObject(this,d$l),d$u.keepObject(this,d$k.weakKey),this._weakKeys[5]=d$k.weakKey),this.drawBitmap(d$q,d$k,d$p,d$c-d$o,d$b-d$p-d$n,d$o)):(d$u.clearObject(this,d$l),this._weakKeys[5]="")),d$p&&(d$k=d$t.getTexture(d$a,0,d$m,d$p,d$f-d$m-d$o),d$l=this._weakKeys[6],d$k?(d$l!=d$k.weakKey&&(d$u.clearObject(this,d$l),d$u.keepObject(this,d$k.weakKey),this._weakKeys[6]=d$k.weakKey),this.drawBitmap(d$q,d$k,0,d$m,d$p,d$c-d$m-d$o)):(d$u.clearObject(this,d$l),this._weakKeys[6]="")),d$n&&(d$k=d$t.getTexture(d$a,d$e-d$n,d$m,d$n,d$f-d$m-d$o),d$l=this._weakKeys[7],d$k?(d$l!=d$k.weakKey&&(d$u.clearObject(this,d$l),d$u.keepObject(this,d$k.weakKey),this._weakKeys[7]=d$k.weakKey),this.drawBitmap(d$q,d$k,d$b-d$n,d$m,d$n,d$c-d$m-d$o)):(d$u.clearObject(this,d$l),this._weakKeys[7]="")),d$k=d$t.getTexture(d$a,d$p,d$m,d$e-d$p-d$n,d$f-d$m-d$o),d$l=this._weakKeys[8],d$k?(d$l!=d$k.weakKey&&(d$u.clearObject(this,d$l),d$u.keepObject(this,d$k.weakKey),this._weakKeys[8]=d$k.weakKey),this.drawBitmap(d$q,d$k,d$p,d$m,d$b-d$p-d$n,d$c-d$m-d$o)):(d$u.clearObject(this,d$l),this._weakKeys[8]=""),d$r&&this.restore(),this.autoCacheCmd&&!d$v.isConchApp&&(d$u.saveObject(d$i,this.cmds,null),this._weakKey=d$i,d$u.keepObject(this,this._weakKey));}this._repaint();}},d$a.drawBitmap=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$e&&(d$e=0),void 0===d$f&&(d$f=0),d$e<.1||d$f<.1||(!d$a||d$b.width==d$e&&d$b.height==d$f?this.drawTexture(d$b,d$c,d$d,d$e,d$f):this.fillTexture(d$b,d$c,d$d,d$e,d$f));},d$a.clear=function(d$a){void 0===d$a&&(d$a=!0),d$c.prototype.clear.call(this,!1);},d$i(0,d$a,"sizeGrid",function(){return this._sizeGrid;},function(d$a){this._sizeGrid=d$a,this._setChanged();}),d$i(0,d$a,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0;},function(d$a){this._width!=d$a&&(this._width=d$a,this._setChanged());}),d$i(0,d$a,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0;},function(d$a){this._height!=d$a&&(this._height=d$a,this._setChanged());}),d$i(0,d$a,"source",function(){return this._source;},function(d$a){d$a?(this._source=d$a,this._setChanged()):(this._source=null,this.clear());}),d$t.getTexture=function(d$a,d$b,d$c,d$d,d$e){d$d<=0&&(d$d=1),d$e<=0&&(d$e=1),d$a.$_GID||(d$a.$_GID=d$A.getGID());var d$f=d$a.$_GID+"."+d$b+"."+d$c+"."+d$d+"."+d$e,d$i=d$u.findObject(d$f);if((!d$i||!d$i.source)&&(d$i=d$y.createFromTexture(d$a,d$b,d$c,d$d,d$e))){if(d$a.alphaTexture){var d$j=d$a.width/d$a.alphaTexture.width;d$i.alphaTexture=d$y.createFromTexture(d$a.alphaTexture,d$b/d$j,d$c/d$j,d$d/d$j,d$e/d$j);}d$u.saveObject(d$f,d$i),d$i.weakKey=d$f;}return d$i;},d$t;}(d$b),d$H=(function(d$a){function d$b(){d$b.__super.call(this);}d$f(d$b,"laya.ui.UIEvent",d$l),d$b.SHOW_TIP="showtip",d$b.HIDE_TIP="hidetip";}(),function(d$b){function d$a(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,d$a.__super.call(this),this._layout=d$C.EMPTY,this.preinitialize(),this.createChildren(),this.initialize();}d$f(d$a,"laya.ui.Component",d$b);var d$c=d$a.prototype;return d$r.imps(d$c,{"laya.ui.IComponent":!0}),d$c.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null;},d$c.preinitialize=function(){},d$c.createChildren=function(){},d$c.initialize=function(){},d$c.callLater=function(d$a,d$b){d$r.timer.callLater(this,d$a,d$b);},d$c.runCallLater=function(d$a){d$r.timer.runCallLater(this,d$a);},d$c.commitMeasure=function(){},d$c.changeSize=function(){this.event("resize");},d$c.getLayout=function(){return this._layout===d$C.EMPTY&&(this._layout=new d$C()),this._layout;},d$c._setLayoutEnabled=function(d$a){this._layout&&this._layout.enable!=d$a&&(this._layout.enable=d$a,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded());},d$c.onRemoved=function(){this.parent.off("resize",this,this.onCompResize);},d$c.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY();},d$c.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY());},d$c.resetLayoutX=function(){var d$a=this._layout;if(isNaN(d$a.anchorX)||(this.pivotX=d$a.anchorX*this.width),this.layoutEnabled){var d$b=this.parent;d$b&&(isNaN(d$a.centerX)?isNaN(d$a.left)?isNaN(d$a.right)||(this.x=Math.round(d$b.width-this.displayWidth-d$a.right+this.pivotX*this.scaleX)):(this.x=Math.round(d$a.left+this.pivotX*this.scaleX),isNaN(d$a.right)||(this.width=(d$b._width-d$a.left-d$a.right)/(this.scaleX||.01))):this.x=Math.round(.5*(d$b.width-this.displayWidth)+d$a.centerX+this.pivotX*this.scaleX));}},d$c.resetLayoutY=function(){var d$a=this._layout;if(isNaN(d$a.anchorY)||(this.pivotY=d$a.anchorY*this.height),this.layoutEnabled){var d$b=this.parent;d$b&&(isNaN(d$a.centerY)?isNaN(d$a.top)?isNaN(d$a.bottom)||(this.y=Math.round(d$b.height-this.displayHeight-d$a.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(d$a.top+this.pivotY*this.scaleY),isNaN(d$a.bottom)||(this.height=(d$b._height-d$a.top-d$a.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(d$b.height-this.displayHeight)+d$a.centerY+this.pivotY*this.scaleY));}},d$c.onMouseOver=function(d$a){d$r.stage.event("showtip",this._toolTip);},d$c.onMouseOut=function(d$a){d$r.stage.event("hidetip",this._toolTip);},d$i(0,d$c,"displayWidth",function(){return this.width*this.scaleX;}),d$i(0,d$c,"width",function(){return this._width?this._width:this.measureWidth;},function(d$a){this._width!=d$a&&(this._width=d$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX());}),d$i(0,d$c,"measureWidth",function(){var d$a=0;this.commitMeasure();for(var d$b=this.numChildren-1;-1<d$b;d$b--){var d$c=this.getChildAt(d$b);d$c.visible&&(d$a=Math.max(d$c.x+d$c.width*d$c.scaleX,d$a));}return d$a;}),d$i(0,d$c,"displayHeight",function(){return this.height*this.scaleY;}),d$i(0,d$c,"height",function(){return this._height?this._height:this.measureHeight;},function(d$a){this._height!=d$a&&(this._height=d$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY());}),d$i(0,d$c,"dataSource",function(){return this._dataSource;},function(d$a){for(var d$b in this._dataSource=d$a,this._dataSource)this.hasOwnProperty(d$b)&&"function"!=typeof this[d$b]&&(this[d$b]=this._dataSource[d$b]);}),d$i(0,d$c,"scaleY",d$b.prototype._$get_scaleY,function(d$a){d$r.superGet(d$w,this,"scaleY")!=d$a&&(d$r.superSet(d$w,this,"scaleY",d$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY());}),d$i(0,d$c,"measureHeight",function(){var d$a=0;this.commitMeasure();for(var d$b=this.numChildren-1;-1<d$b;d$b--){var d$c=this.getChildAt(d$b);d$c.visible&&(d$a=Math.max(d$c.y+d$c.height*d$c.scaleY,d$a));}return d$a;}),d$i(0,d$c,"scaleX",d$b.prototype._$get_scaleX,function(d$a){d$r.superGet(d$w,this,"scaleX")!=d$a&&(d$r.superSet(d$w,this,"scaleX",d$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX());}),d$i(0,d$c,"top",function(){return this._layout.top;},function(d$a){d$a!=this._layout.top&&(this.getLayout().top=d$a,this._setLayoutEnabled(!0)),this.resetLayoutY();}),d$i(0,d$c,"bottom",function(){return this._layout.bottom;},function(d$a){d$a!=this._layout.bottom&&(this.getLayout().bottom=d$a,this._setLayoutEnabled(!0)),this.resetLayoutY();}),d$i(0,d$c,"left",function(){return this._layout.left;},function(d$a){d$a!=this._layout.left&&(this.getLayout().left=d$a,this._setLayoutEnabled(!0)),this.resetLayoutX();}),d$i(0,d$c,"right",function(){return this._layout.right;},function(d$a){d$a!=this._layout.right&&(this.getLayout().right=d$a,this._setLayoutEnabled(!0)),this.resetLayoutX();}),d$i(0,d$c,"centerX",function(){return this._layout.centerX;},function(d$a){d$a!=this._layout.centerX&&(this.getLayout().centerX=d$a,this._setLayoutEnabled(!0)),this.resetLayoutX();}),d$i(0,d$c,"centerY",function(){return this._layout.centerY;},function(d$a){d$a!=this._layout.centerY&&(this.getLayout().centerY=d$a,this._setLayoutEnabled(!0)),this.resetLayoutY();}),d$i(0,d$c,"anchorX",function(){return this._layout.anchorX;},function(d$a){d$a!=this._layout.anchorX&&(this.getLayout().anchorX=d$a,this._setLayoutEnabled(!0)),this.resetLayoutX();}),d$i(0,d$c,"anchorY",function(){return this._layout.anchorY;},function(d$a){d$a!=this._layout.anchorY&&(this.getLayout().anchorY=d$a,this._setLayoutEnabled(!0)),this.resetLayoutY();}),d$i(0,d$c,"tag",function(){return this._tag;},function(d$a){this._tag=d$a;}),d$i(0,d$c,"toolTip",function(){return this._toolTip;},function(d$a){this._toolTip!=d$a&&(null!=(this._toolTip=d$a)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)));}),d$i(0,d$c,"comXml",function(){return this._comXml;},function(d$a){this._comXml=d$a;}),d$i(0,d$c,"gray",function(){return this._gray;},function(d$a){d$a!==this._gray&&(this._gray=d$a,d$E.gray(this,d$a));}),d$i(0,d$c,"disabled",function(){return this._disabled;},function(d$a){d$a!==this._disabled&&(this.gray=this._disabled=d$a,this.mouseEnabled=!d$a);}),d$a;}(d$w)),d$I=function(d$a){function d$b(){this.lockLayer=null,this.popupEffect=function(d$a){d$a.scale(1,1),d$z.from(d$a,{x:d$r.stage.width/2,y:d$r.stage.height/2,scaleX:0,scaleY:0},300,d$k.backOut,d$o.create(this,this.doOpen,[d$a]));},this.closeEffect=function(d$a,d$b){d$z.to(d$a,{x:d$r.stage.width/2,y:d$r.stage.height/2,scaleX:0,scaleY:0},300,d$k.strongOut,d$o.create(this,this.doClose,[d$a,d$b]));},d$b.__super.call(this),this.maskLayer=new d$w(),this.popupEffectHandler=d$o.create(this,this.popupEffect,null,!1),this.closeEffectHandler=d$o.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,d$r.stage.addChild(this),d$r.stage.on("resize",this,this._onResize),d$F.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null);}d$f(d$b,"laya.ui.DialogManager",d$w);var d$c=d$b.prototype;return d$c._closeOnSide=function(){var d$a=this.getChildAt(this.numChildren-1);d$a instanceof laya.ui.Dialog&&d$a.close("side");},d$c.setLockView=function(d$a){this.lockLayer||(this.lockLayer=new d$J(),this.lockLayer.mouseEnabled=!0,this.lockLayer.size(d$r.stage.width,d$r.stage.height)),this.lockLayer.removeChildren(),d$a&&(d$a.centerX=d$a.centerY=0,this.lockLayer.addChild(d$a));},d$c._onResize=function(d$a){var d$b=this.maskLayer.width=d$r.stage.width,d$c=this.maskLayer.height=d$r.stage.height;this.lockLayer&&this.lockLayer.size(d$b,d$c),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,d$b,d$c,d$F.popupBgColor),this.maskLayer.alpha=d$F.popupBgAlpha;for(var d$d=this.numChildren-1;-1<d$d;d$d--){var d$e=this.getChildAt(d$d);d$e.popupCenter&&this._centerDialog(d$e);}},d$c._centerDialog=function(d$a){d$a.x=Math.round((d$r.stage.width-d$a.width>>1)+d$a.pivotX),d$a.y=Math.round((d$r.stage.height-d$a.height>>1)+d$a.pivotY);},d$c.open=function(d$a,d$b,d$c){void 0===d$b&&(d$b=!1),void 0===d$c&&(d$c=!1),d$b&&this._closeAll(),d$a.popupCenter&&this._centerDialog(d$a),this.addChild(d$a),(d$a.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),d$c&&null!=d$a.popupEffect?d$a.popupEffect.runWith(d$a):this.doOpen(d$a),this.event("open");},d$c.doOpen=function(d$a){d$a.onOpened();},d$c.lock=function(d$a){this.lockLayer&&(d$a?this.addChild(this.lockLayer):this.lockLayer.removeSelf());},d$c.close=function(d$a,d$b,d$c){void 0===d$c&&(d$c=!1),d$c&&null!=d$a.closeEffect?d$a.closeEffect.runWith([d$a,d$b]):this.doClose(d$a,d$b),this.event("close");},d$c.doClose=function(d$a,d$b){d$a.removeSelf(),d$a.isModal&&this._checkMask(),d$a.closeHandler&&d$a.closeHandler.runWith(d$b),d$a.onClosed(d$b);},d$c.closeAll=function(){this._closeAll(),this.event("close");},d$c._closeAll=function(){for(var d$a=this.numChildren-1;-1<d$a;d$a--){var d$b=this.getChildAt(d$a);d$b&&null!=d$b.close&&this.doClose(d$b);}},d$c.getDialogsByGroup=function(d$a){for(var d$b=[],d$c=this.numChildren-1;-1<d$c;d$c--){var d$d=this.getChildAt(d$c);d$d&&d$d.group===d$a&&d$b.push(d$d);}return d$b;},d$c.closeByGroup=function(d$a){for(var d$b=[],d$c=this.numChildren-1;-1<d$c;d$c--){var d$d=this.getChildAt(d$c);d$d&&d$d.group===d$a&&(d$d.close(),d$b.push(d$d));}return d$b;},d$c._checkMask=function(){this.maskLayer.removeSelf();for(var d$a=this.numChildren-1;-1<d$a;d$a--){var d$b=this.getChildAt(d$a);if(d$b&&d$b.isModal)return void this.addChildAt(this.maskLayer,d$a);}},d$b;}(),d$J=function(d$a){function d$b(){d$b.__super.call(this);}d$f(d$b,"laya.ui.Box",d$a);var d$c=d$b.prototype;return d$r.imps(d$c,{"laya.ui.IBox":!0}),d$i(0,d$c,"dataSource",d$a.prototype._$get_dataSource,function(d$a){for(var d$b in this._dataSource=d$a){var d$c=this.getChildByName(d$b);d$c?d$c.dataSource=d$a[d$b]:this.hasOwnProperty(d$b)&&"function"!=typeof this[d$b]&&(this[d$b]=d$a[d$b]);}}),d$b;}(d$H),d$K=function(d$b){function d$c(d$a,d$b){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,d$c.__super.call(this),this._labelColors=d$D.buttonLabelColors,this._stateNum=d$D.buttonStateNum,void 0===d$b&&(d$b=""),this.skin=d$a,this.label=d$b;}d$f(d$c,"laya.ui.Button",d$b);var d$a=d$c.prototype;return d$r.imps(d$a,{"laya.ui.ISelect":!0}),d$a.destroy=function(d$a){this.clearEvent(),d$u.clearCache(this,this._skin),d$u.clearObject(this,this._weakKey),void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(d$a),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null;},d$a.clearEvent=function(){this._skin&&d$e.atalsNotify&&d$e.atalsNotify.off(this._skin,this,this._setBtnSource);},d$a.createChildren=function(){this.graphics=this._bitmap=new d$G();},d$a.createText=function(){this._text||(this._text=new d$x(),this._text.overflow=d$x.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height);},d$a.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1);},d$a.onMouse=function(d$a){if(!1!==this.toggle||!this._selected)return"click"===d$a.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=d$c.stateMap[d$a.type]));},d$a.changeClips=function(){var d$a=d$u.getRes(this._skin);if(d$a)if(this._skin&&""!=this._skin){d$u.clearObject(this,this._weakKey);var d$b=d$a.sourceWidth,d$c=d$a.sourceHeight/this._stateNum;d$a.$_GID||(d$a.$_GID=d$A.getGID());var d$d=d$a.$_GID+"-"+this._stateNum,d$e=d$u.findObject(d$d);if(d$A.isOkTextureList(d$e)||(d$e=null),d$e)this._weakKey=d$d,d$u.keepObject(this,this._weakKey),this._sources=d$e;else{if(this._sources=[],1===this._stateNum)this._sources.push(d$a);else for(var d$f=0;d$f<this._stateNum;d$f++){var d$i=d$y.createFromTexture(d$a,0,d$c*d$f,d$b,d$c);if(d$a.alphaTexture){var d$j=d$a.width/d$a.alphaTexture.width;d$i.alphaTexture=d$y.createFromTexture(d$a.alphaTexture,0/d$j,d$c*d$f/d$j,d$b/d$j,d$c/d$j);}this._sources.push(d$i);}d$u.saveObject(d$d,this._sources),this._weakKey=d$d,d$u.keepObject(this,this._weakKey);}this._autoSize?(this._bitmap.width=this._width||d$b,this._bitmap.height=this._height||d$c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=d$b);}else console.warn("lose skin ",this._skin,this.name,this.__className);},d$a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var d$a=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[d$a]),this.label&&(this._text.color=this._labelColors[d$a],this._strokeColors&&(this._text.strokeColor=this._strokeColors[d$a]));},d$a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState));},d$i(0,d$a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor;},function(d$a){this.createText(),this._text.strokeColor=d$a;}),d$i(0,d$a,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height;}),d$i(0,d$a,"skin",function(){return this._skin;},function(d$a){if(this._skin!=d$a)if(this.clearEvent(),d$u.clearCache(this,this._skin),this._skin=d$a,d$u.keepCache(this,this._skin),d$u.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var d$b=d$e.resAtalsObj&&d$e.resAtalsObj[this._skin];d$b?(d$e.atalsNotify&&d$e.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=d$b.sourceW),0==this.height&&(this.height=d$b.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className);}}),d$a._setBtnSource=function(d$a,d$b){d$a===this._skin&&d$b&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent());},d$i(0,d$a,"state",function(){return this._state;},function(d$a){this._state!=d$a&&(this._state=d$a,this._setStateChanged());}),d$i(0,d$a,"text",function(){return this.createText(),this._text;}),d$i(0,d$a,"stateNum",function(){return this._stateNum;},function(d$a){"string"==typeof d$a&&(d$a=parseInt(d$a)),this._stateNum!=d$a&&(this._stateNum=d$a<1?1:3<d$a?3:d$a,this.callLater(this.changeClips));}),d$i(0,d$a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):"";},function(d$a){this._strokeColors=d$E.fillArray(d$D.buttonLabelColors,d$a,String),this._setStateChanged();}),d$i(0,d$a,"labelColors",function(){return this._labelColors.join(",");},function(d$a){this._labelColors=d$E.fillArray(d$D.buttonLabelColors,d$a,String),this._setStateChanged();}),d$i(0,d$a,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0));}),d$i(0,d$a,"label",function(){return this._text?this._text.text:null;},function(d$a){(this._text||d$a)&&(this.createText(),this._text.text!=d$a&&(d$a&&!this._text.parent&&this.addChild(this._text),this._text.text=(d$a+"").replace(/\\n/g,"\n"),this._setStateChanged()));}),d$i(0,d$a,"selected",function(){return this._selected;},function(d$a){this._selected!=d$a&&(this._selected=d$a,this.state=this._selected?2:0,this.event("change"));}),d$i(0,d$a,"labelPadding",function(){return this.createText(),this._text.padding.join(",");},function(d$a){this.createText(),this._text.padding=d$E.fillArray(d$D.labelPadding,d$a,Number);}),d$i(0,d$a,"labelSize",function(){return this.createText(),this._text.fontSize;},function(d$a){this.createText(),this._text.fontSize=d$a;}),d$i(0,d$a,"labelStroke",function(){return this.createText(),this._text.stroke;},function(d$a){this.createText(),this._text.stroke=d$a;}),d$i(0,d$a,"labelBold",function(){return this.createText(),this._text.bold;},function(d$a){this.createText(),this._text.bold=d$a;}),d$i(0,d$a,"labelFont",function(){return this.createText(),this._text.font;},function(d$a){this.createText(),this._text.font=d$a;}),d$i(0,d$a,"labelAlign",function(){return this.createText(),this._text.align;},function(d$a){this.createText(),this._text.align=d$a;}),d$i(0,d$a,"clickHandler",function(){return this._clickHandler;},function(d$a){this._clickHandler=d$a;}),d$i(0,d$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null;},function(d$a){this._bitmap.sizeGrid=d$E.fillArray(d$D.defaultSizeGrid,d$a,Number);}),d$i(0,d$a,"width",d$b.prototype._$get_width,function(d$a){d$r.superSet(d$H,this,"width",d$a),this._autoSize&&(this._bitmap.width=d$a,this._text&&(this._text.width=d$a));}),d$i(0,d$a,"height",d$b.prototype._$get_height,function(d$a){d$r.superSet(d$H,this,"height",d$a),this._autoSize&&(this._bitmap.height=d$a,this._text&&(this._text.height=d$a));}),d$i(0,d$a,"dataSource",d$b.prototype._$get_dataSource,function(d$a){"number"==typeof(this._dataSource=d$a)||"string"==typeof d$a?this.label=d$a+"":d$r.superSet(d$H,this,"dataSource",d$a);}),d$i(0,d$a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null;},function(d$a){this._bitmap._offset=d$a?d$E.fillArray([1,1],d$a,Number):[];}),d$d(d$c,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0};}]),d$c;}(d$H),d$L=function(d$b){function d$d(d$a,d$b,d$c){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,d$d.__super.call(this),void 0===d$b&&(d$b=1),void 0===d$c&&(d$c=1),this._clipX=d$b,this._clipY=d$c,this.skin=d$a;}d$f(d$d,"laya.ui.Clip",d$b);var d$a=d$d.prototype;return d$a.destroy=function(d$a){this.clearEvent(),this.clearLoad(),d$u.clearCache(this,this._skin),d$u.clearObject(this,this._weakKey),void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null;},d$a.dispose=function(){this.destroy(!0),d$r.loader.clearRes(this._skin);},d$a.createChildren=function(){this.graphics=this._bitmap=new d$G();},d$a._onDisplay=function(d$a){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play();},d$a.changeClip=function(){if(this._clipChanged=!1,this._skin){var d$a=d$u.getRes(this._skin);if(d$a)this.loadComplete(this._skin,d$a);else{if(d$e.resAtalsObj&&d$e.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=d$o.create(this,this.loadComplete,[this._skin]),this._progress=null,d$r.loader.load(this._skin,this._complete,this._progress);}}},d$a.loadComplete=function(d$a,d$b){if(d$a===this._skin&&d$b){d$u.clearObject(this,this._weakKey);var d$c=this._clipWidth||Math.ceil(d$b.sourceWidth/this._clipX),d$d=this._clipHeight||Math.ceil(d$b.sourceHeight/this._clipY),d$e=this._skin+d$c+d$d,d$f=d$u.findObject(d$e);if(d$A.isOkTextureList(d$f)||(d$f=null),d$f)this._weakKey=d$e,d$u.keepObject(this,this._weakKey),this._sources=d$f;else{this._sources=[];for(var d$i=0;d$i<this._clipY;d$i++)for(var d$j=0;d$j<this._clipX;d$j++){var d$k=d$y.createFromTexture(d$b,d$c*d$j,d$d*d$i,d$c,d$d);if(d$b.alphaTexture){var d$l=d$b.width/d$b.alphaTexture.width;d$k.alphaTexture=d$y.createFromTexture(d$b.alphaTexture,d$c*d$j/d$l,d$d*d$i/d$l,d$c/d$l,d$d/d$l);}this._sources.push(d$k);}d$u.saveObject(d$e,this._sources),this._weakKey=d$e,d$u.keepObject(this,this._weakKey);}this.index=this._index,this.event("loaded"),this.onCompResize();}},d$a.play=function(d$a,d$b){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=-1),this._isPlaying=!0,this.index=d$a,this._toIndex=d$b,this._index++,d$r.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay);},d$a._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index);},d$a.stop=function(){this._isPlaying=!1,d$r.timer.clear(this,this._loop),this.event("complete");},d$a._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip));},d$i(0,d$a,"interval",function(){return this._interval;},function(d$a){this._interval!=d$a&&(this._interval=d$a,this._isPlaying&&this.play());}),d$a.clearEvent=function(){this._skin&&d$e.atalsNotify&&d$e.atalsNotify.off(this._skin,this,this._setBtnSource);},d$a.clearLoad=function(){this._skin&&((this._complete||this._progress)&&d$r.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null);},d$i(0,d$a,"skin",function(){return this._skin;},function(d$a){if(this._skin!=d$a)if(this.clearLoad(),this.clearEvent(),d$u.clearCache(this,this._skin),this._skin=d$a){d$u.keepCache(this,this._skin);var d$b=d$u.getRes(d$a),d$c=d$e.resAtalsObj&&d$e.resAtalsObj[this._skin];!d$b&&d$c?d$e.atalsNotify&&d$e.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged();}else this._bitmap.source=null;}),d$a._setBtnSource=function(d$a,d$b){d$a===this._skin&&d$b&&(this.loadComplete(d$a,d$b),this.clearEvent());},d$i(0,d$a,"sources",function(){return this._sources;},function(d$a){this._sources=d$a,this.index=this._index,this.event("loaded");}),d$i(0,d$a,"clipX",function(){return this._clipX;},function(d$a){this._clipX=d$a||1,this._setClipChanged();}),d$i(0,d$a,"clipY",function(){return this._clipY;},function(d$a){this._clipY=d$a||1,this._setClipChanged();}),d$i(0,d$a,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0;}),d$i(0,d$a,"clipWidth",function(){return this._clipWidth;},function(d$a){this._clipWidth=d$a,this._setClipChanged();}),d$i(0,d$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null;},function(d$a){this._bitmap.sizeGrid=d$E.fillArray(d$D.defaultSizeGrid,d$a,Number);}),d$i(0,d$a,"group",function(){return this._group;},function(d$a){d$a&&this._skin&&d$u.setGroup(this._skin,d$a),this._group=d$a;}),d$i(0,d$a,"clipHeight",function(){return this._clipHeight;},function(d$a){this._clipHeight=d$a,this._setClipChanged();}),d$i(0,d$a,"width",d$b.prototype._$get_width,function(d$a){d$r.superSet(d$H,this,"width",d$a),this._bitmap.width=d$a;}),d$i(0,d$a,"height",d$b.prototype._$get_height,function(d$a){d$r.superSet(d$H,this,"height",d$a),this._bitmap.height=d$a;}),d$i(0,d$a,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width;}),d$i(0,d$a,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height;}),d$i(0,d$a,"index",function(){return this._index;},function(d$a){this._index=d$a,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[d$a]),this.event("change");}),d$i(0,d$a,"autoPlay",function(){return this._autoPlay;},function(d$a){this._autoPlay!=d$a&&((this._autoPlay=d$a)?this.play():this.stop());}),d$i(0,d$a,"isPlaying",function(){return this._isPlaying;},function(d$a){this._isPlaying=d$a;}),d$i(0,d$a,"dataSource",d$b.prototype._$get_dataSource,function(d$a){"number"==typeof(this._dataSource=d$a)&&Math.floor(d$a)==d$a||"string"==typeof d$a?this.index=parseInt(d$a):d$r.superSet(d$H,this,"dataSource",d$a);}),d$i(0,d$a,"bitmap",function(){return this._bitmap;}),d$d;}(d$H),d$M=function(d$b){function d$a(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,d$a.__super.call(this);}d$f(d$a,"laya.ui.ColorPicker",d$b);var d$c=d$a.prototype;return d$c.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._colorPanel&&this._colorPanel.destroy(d$a),this._colorButton&&this._colorButton.destroy(d$a),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null;},d$c.createChildren=function(){this.addChild(this._colorButton=new d$K()),this._colorPanel=new d$J(),this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new d$w()),this._colorPanel.addChild(this._colorBlock=new d$w()),this._colorPanel.addChild(this._colorInput=new d$p());},d$c.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor;},d$c.onPanelMouseDown=function(d$a){d$a.stopPropagation();},d$c.changePanel=function(){this._panelChanged=!1;var d$a=this._colorPanel.graphics;d$a.clear(),d$a.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(d$a=this._colorTiles.graphics).clear();for(var d$b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],d$c=0;d$c<12;d$c++)for(var d$d=0;d$d<20;d$d++){var d$e=0;d$e=0===d$d?d$b[d$c]:1===d$d?0:51*(((3*d$c+d$d/6)%3<<0)+3*(d$c/6<<0))<<16|d$d%6*51<<8|(d$c<<0)%6*51;var d$f=d$E.toColor(d$e);this._colors.push(d$f);var d$i=d$d*this._gridSize,d$j=d$c*this._gridSize;d$a.drawRect(d$i,d$j,this._gridSize,this._gridSize,d$f,"#000000");}},d$c.onColorButtonClick=function(d$a){this._colorPanel.parent?this.close():this.open();},d$c.open=function(){var d$a=this.localToGlobal(new d$q()),d$b=d$a.x+this._colorPanel.width<=d$r.stage.width?d$a.x:d$r.stage.width-this._colorPanel.width,d$c=d$a.y+this._colorButton.height;d$c=d$c+this._colorPanel.height<=d$r.stage.height?d$c:d$a.y-this._colorPanel.height,this._colorPanel.pos(d$b,d$c),this._colorPanel.zOrder=1001,d$r._currentStage.addChild(this._colorPanel),d$r.stage.on("mousedown",this,this.removeColorBox);},d$c.close=function(){d$r.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf();},d$c.removeColorBox=function(d$a){this.close();},d$c.onColorFieldKeyDown=function(d$a){13==d$a.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),d$a.stopPropagation());},d$c.onColorInputChange=function(d$a){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF");},d$c.onColorTilesClick=function(d$a){this.selectedColor=this.getColorByMouse(),this.close();},d$c.onColorTilesMouseMove=function(d$a){this._colorInput.focus=!1;var d$b=this.getColorByMouse();this._colorInput.text=d$b,this.drawBlock(d$b);},d$c.getColorByMouse=function(){var d$a=this._colorTiles.getMousePoint(),d$b=Math.floor(d$a.x/this._gridSize),d$c=Math.floor(d$a.y/this._gridSize);return this._colors[20*d$c+d$b];},d$c.drawBlock=function(d$a){var d$b=this._colorBlock.graphics;d$b.clear();var d$c=d$a||"#ffffff";d$b.drawRect(0,0,50,20,d$c,this._borderColor),d$a||d$b.drawLine(0,0,50,20,"#ff0000");},d$c.changeColor=function(){var d$a=this.graphics;d$a.clear();var d$b=this._selectedColor||"#000000";d$a.drawRect(0,0,this._colorButton.width,this._colorButton.height,d$b);},d$c._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel));},d$i(0,d$c,"inputBgColor",function(){return this._inputBgColor;},function(d$a){this._inputBgColor=d$a,this._setPanelChanged();}),d$i(0,d$c,"selectedColor",function(){return this._selectedColor;},function(d$a){this._selectedColor!=d$a&&(this._selectedColor=this._colorInput.text=d$a,this.drawBlock(d$a),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",d$l.EMPTY.setTo("change",this,this)));}),d$i(0,d$c,"skin",function(){return this._colorButton.skin;},function(d$a){this._colorButton.skin=d$a,this.changeColor();}),d$i(0,d$c,"bgColor",function(){return this._bgColor;},function(d$a){this._bgColor=d$a,this._setPanelChanged();}),d$i(0,d$c,"borderColor",function(){return this._borderColor;},function(d$a){this._borderColor=d$a,this._setPanelChanged();}),d$i(0,d$c,"inputColor",function(){return this._inputColor;},function(d$a){this._inputColor=d$a,this._setPanelChanged();}),d$a;}(d$H),d$N=function(d$b){function d$c(d$a,d$b){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,d$c.__super.call(this),this._itemColors=d$D.comboBoxItemColors,this.skin=d$a,this.labels=d$b;}d$f(d$c,"laya.ui.ComboBox",d$b);var d$a=d$c.prototype;return d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._button&&this._button.destroy(d$a),this._list&&this._list.destroy(d$a),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null;},d$a.createChildren=function(){this.addChild(this._button=new d$K()),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown);},d$a._createList=function(){this._list=new d$X(),this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list);},d$a._setListEvent=function(d$a){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=d$o.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown);},d$a.onListDown=function(d$a){d$a.stopPropagation();},d$a.onScrollBarDown=function(d$a){d$a.stopPropagation();},d$a.onButtonMouseDown=function(d$a){this.callLater(this.switchTo,[!this._isOpen]);},d$a.changeList=function(){this._listChanged=!1;var d$a=this.width-2,d$b=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:d$a,height:this._itemHeight,fontSize:this._itemSize,color:d$b}}]},this._list.repeatY=this._visibleNum,this._list.refresh();},d$a.onlistItemMouse=function(d$a,d$b){var d$c=d$a.type;if("mouseover"===d$c||"mouseout"===d$c){if(this._isCustomList)return;var d$d=this._list.getCell(d$b);if(!d$d)return;var d$e=d$d.getChildByName("label");d$e&&("mouseover"===d$c?(d$e.bgColor=this._itemColors[0],d$e.color=this._itemColors[1]):(d$e.bgColor=null,d$e.color=this._itemColors[2]));}else"click"===d$c&&(this.selectedIndex=d$b,this.isOpen=!1);},d$a.switchTo=function(d$a){this.isOpen=d$a;},d$a.changeOpen=function(){this.isOpen=!this._isOpen;},d$a.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var d$a=this._list.graphics;d$a.clear(),d$a.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3]);}for(var d$b=this._list.array||[],d$c=d$b.length=0,d$d=this._labels.length;d$c<d$d;d$c++)d$b.push({label:this._labels[d$c]});this._list.height=this._listHeight,this._list.array=d$b;},d$a.changeSelected=function(){this._button.label=this.selectedLabel;},d$a._onStageMouseWheel=function(d$a){this._list&&!this._list.contains(d$a.target)&&this.removeList(null);},d$a.removeList=function(d$a){d$r.stage.off("mousedown",this,this.removeList),d$r.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1;},d$i(0,d$a,"selectedIndex",function(){return this._selectedIndex;},function(d$a){this._selectedIndex!=d$a&&(this._selectedIndex=d$a,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[d$l.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex));}),d$i(0,d$a,"measureHeight",function(){return this._button.height;}),d$i(0,d$a,"skin",function(){return this._button.skin;},function(d$a){this._button.skin!=d$a&&(this._button.skin=d$a,this._listChanged=!0);}),d$i(0,d$a,"measureWidth",function(){return this._button.width;}),d$i(0,d$a,"width",d$b.prototype._$get_width,function(d$a){d$r.superSet(d$H,this,"width",d$a),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0;}),d$i(0,d$a,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null;},function(d$a){this.selectedIndex=this._labels.indexOf(d$a);}),d$i(0,d$a,"labels",function(){return this._labels.join(",");},function(d$a){0<this._labels.length&&(this.selectedIndex=-1),d$a?this._labels=d$a.split(","):this._labels.length=0,this._itemChanged=!0;}),d$i(0,d$a,"height",d$b.prototype._$get_height,function(d$a){d$r.superSet(d$H,this,"height",d$a),this._button.height=this._height;}),d$i(0,d$a,"selectHandler",function(){return this._selectHandler;},function(d$a){this._selectHandler=d$a;}),d$i(0,d$a,"visibleNum",function(){return this._visibleNum;},function(d$a){this._visibleNum=d$a,this._listChanged=!0;}),d$i(0,d$a,"labelBold",function(){return this._button.text.bold;},function(d$a){this._button.text.bold=d$a;}),d$i(0,d$a,"itemColors",function(){return String(this._itemColors);},function(d$a){this._itemColors=d$E.fillArray(this._itemColors,d$a,String),this._listChanged=!0;}),d$i(0,d$a,"itemSize",function(){return this._itemSize;},function(d$a){this._itemSize=d$a,this._listChanged=!0;}),d$i(0,d$a,"scrollBar",function(){return this.list.scrollBar;}),d$i(0,d$a,"isOpen",function(){return this._isOpen;},function(d$a){if(this._isOpen!=d$a)if(this._isOpen=d$a,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var d$b=this.localToGlobal(d$q.TEMP.setTo(0,0)),d$c=d$b.y+this._button.height;d$c=d$c+this._listHeight<=d$r.stage.height?d$c:d$b.y-this._listHeight,this._list.pos(d$b.x,d$c),this._list.zOrder=1001,d$r._currentStage.addChild(this._list),d$r.stage.once("mousedown",this,this.removeList),d$r.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex;}else this._list&&this._list.removeSelf();}),d$i(0,d$a,"scrollBarSkin",function(){return this._scrollBarSkin;},function(d$a){this._scrollBarSkin=d$a;}),d$i(0,d$a,"sizeGrid",function(){return this._button.sizeGrid;},function(d$a){this._button.sizeGrid=d$a;}),d$i(0,d$a,"button",function(){return this._button;}),d$i(0,d$a,"list",function(){return this._list||this._createList(),this._list;},function(d$a){d$a&&(d$a.removeSelf(),this._isCustomList=!0,this._list=d$a,this._setListEvent(d$a),this._itemHeight=d$a.getCell(0).height+d$a.spaceY);}),d$i(0,d$a,"dataSource",d$b.prototype._$get_dataSource,function(d$a){"number"==typeof(this._dataSource=d$a)&&Math.floor(d$a)==d$a||"string"==typeof d$a?this.selectedIndex=parseInt(d$a):d$a instanceof Array?this.labels=d$a.join(","):d$r.superSet(d$H,this,"dataSource",d$a);}),d$i(0,d$a,"labelColors",function(){return this._button.labelColors;},function(d$a){this._button.labelColors!=d$a&&(this._button.labelColors=d$a);}),d$i(0,d$a,"labelPadding",function(){return this._button.text.padding.join(",");},function(d$a){this._button.text.padding=d$E.fillArray(d$D.labelPadding,d$a,Number);}),d$i(0,d$a,"labelSize",function(){return this._button.text.fontSize;},function(d$a){this._button.text.fontSize=d$a;}),d$i(0,d$a,"labelFont",function(){return this._button.text.font;},function(d$a){this._button.text.font=d$a;}),d$i(0,d$a,"stateNum",function(){return this._button.stateNum;},function(d$a){this._button.stateNum=d$a;}),d$c;}(d$H),d$O=function(d$b){function d$c(d$a){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,d$c.__super.call(this),this._showButtons=d$F.showButtons,this._touchScrollEnable=d$F.touchScrollEnable,this._mouseWheelEnable=d$F.mouseWheelEnable,this.skin=d$a,this.max=1;}d$f(d$c,"laya.ui.ScrollBar",d$b);var d$a=d$c.prototype;return d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),this.stopScroll(),this.target=null,d$b.prototype.destroy.call(this,d$a),this.upButton&&this.upButton.destroy(d$a),this.downButton&&this.downButton.destroy(d$a),this.slider&&this.slider.destroy(d$a),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null;},d$a.createChildren=function(){this.addChild(this.slider=new d$P()),this.addChild(this.upButton=new d$K()),this.addChild(this.downButton=new d$K());},d$a.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown);},d$a.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value);},d$a.onButtonMouseDown=function(d$a){var d$b=d$a.currentTarget===this.upButton;this.slide(d$b),d$r.timer.once(d$D.scrollBarDelayTime,this,this.startLoop,[d$b]),d$r.stage.once("mouseup",this,this.onStageMouseUp);},d$a.startLoop=function(d$a){d$r.timer.frameLoop(1,this,this.slide,[d$a]);},d$a.slide=function(d$a){d$a?this.value-=this._scrollSize:this.value+=this._scrollSize;},d$a.onStageMouseUp=function(d$a){d$r.timer.clear(this,this.startLoop),d$r.timer.clear(this,this.slide);},d$a.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint();},d$a.changeSize=function(){d$b.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value);},d$a.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition();},d$a.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width;},d$a.setScroll=function(d$a,d$b,d$c){this.runCallLater(this.changeSize),this.slider.setSlider(d$a,d$b,d$c),this.slider.bar.visible=0<d$b,!this._hide&&this.autoHide&&(this.visible=!1);},d$a.onTargetMouseWheel=function(d$a){this.value-=d$a.delta*this._scrollSize,this.target=this._target;},d$a.onTargetMouseDown=function(d$a){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new d$q()),this._lastPoint.setTo(d$r.stage.mouseX,d$r.stage.mouseY),d$r.timer.clear(this,this.tweenMove),d$z.clearTween(this),d$r.stage.once("mouseup",this,this.onStageMouseUp2),d$r.stage.once("mouseout",this,this.onStageMouseUp2),d$r.timer.frameLoop(1,this,this.loop);},d$a.loop=function(){var d$a=d$r.stage.mouseY,d$b=d$r.stage.mouseX;if(this._lastOffset=this.isVertical?d$a-this._lastPoint.y:d$b-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?d$r.stage._canvasTransform.getScaleY():d$r.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start");}this._offsets.push(this._lastOffset),this._lastPoint.x=d$b,this._lastPoint.y=d$a,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset);},d$a.onStageMouseUp2=function(d$a){if(d$r.stage.off("mouseup",this,this.onStageMouseUp2),d$r.stage.off("mouseout",this,this.onStageMouseUp2),d$r.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?d$z.to(this,{value:this.min},this.elasticBackTime,d$k.sineOut,d$o.create(this,this.elasticOver)):this._value>this.max&&d$z.to(this,{value:this.max},this.elasticBackTime,d$k.sineOut,d$o.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?d$r.stage.mouseY-this._lastPoint.y:d$r.stage.mouseX-this._lastPoint.x);for(var d$b=0,d$c=Math.min(this._offsets.length,3),d$d=0;d$d<d$c;d$d++)d$b+=this._offsets[this._offsets.length-1-d$d];if(this._lastOffset=d$b/d$c,(d$b=Math.abs(this._lastOffset))<2)return void this.event("end");60<d$b&&(this._lastOffset=0<this._lastOffset?60:-60);var d$e=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));d$r.timer.frameLoop(1,this,this.tweenMove,[d$e]);}},d$a.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&d$z.to(this,{alpha:0},500),this.event("end");},d$a.tweenMove=function(d$a){this._lastOffset*=this.rollRatio;var d$b=NaN;if(0<d$a&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,d$b=.5*-(this.min-d$a-this.value),this._lastOffset>d$b&&(this._lastOffset=d$b)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,d$b=.5*-(this.max+d$a-this.value),this._lastOffset<d$b&&(this._lastOffset=d$b))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(d$r.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?d$z.to(this,{value:this.min},this.elasticBackTime,d$k.sineOut,d$o.create(this,this.elasticOver)):this._value>this.max?d$z.to(this,{value:this.max},this.elasticBackTime,d$k.sineOut,d$o.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&d$z.to(this,{alpha:0},500);}},d$a.stopScroll=function(){this.onStageMouseUp2(null),d$r.timer.clear(this,this.tweenMove),d$z.clearTween(this);},d$i(0,d$a,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height;}),d$i(0,d$a,"skin",function(){return this._skin;},function(d$a){this._skin!=d$a&&(this._skin=d$a,this.slider.skin=this._skin,this.callLater(this.changeScrollBar));}),d$i(0,d$a,"max",function(){return this.slider.max;},function(d$a){this.slider.max=d$a;}),d$i(0,d$a,"showButtons",function(){return this._showButtons;},function(d$a){this._showButtons=d$a,this.callLater(this.changeScrollBar);}),d$i(0,d$a,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100;}),d$i(0,d$a,"min",function(){return this.slider.min;},function(d$a){this.slider.min=d$a;}),d$i(0,d$a,"value",function(){return this._value;},function(d$a){d$a!==this._value&&(this._value=d$a,this._isElastic||(this.slider._value!=d$a&&(this.slider._value=d$a,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value));}),d$i(0,d$a,"isVertical",function(){return this.slider.isVertical;},function(d$a){this.slider.isVertical=d$a;}),d$i(0,d$a,"sizeGrid",function(){return this.slider.sizeGrid;},function(d$a){this.slider.sizeGrid=d$a;}),d$i(0,d$a,"scrollSize",function(){return this._scrollSize;},function(d$a){this._scrollSize=d$a;}),d$i(0,d$a,"dataSource",d$b.prototype._$get_dataSource,function(d$a){"number"==typeof(this._dataSource=d$a)||"string"==typeof d$a?this.value=Number(d$a):d$r.superSet(d$H,this,"dataSource",d$a);}),d$i(0,d$a,"thumbPercent",function(){return this._thumbPercent;},function(d$a){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),d$a=1<=d$a?.99:d$a,this._thumbPercent=d$a,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*d$a,d$D.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*d$a,d$D.scrollBarMinNum));}),d$i(0,d$a,"target",function(){return this._target;},function(d$a){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=d$a)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown));}),d$i(0,d$a,"hide",function(){return this._hide;},function(d$a){this._hide=d$a,this.visible=!d$a;}),d$i(0,d$a,"touchScrollEnable",function(){return this._touchScrollEnable;},function(d$a){this._touchScrollEnable=d$a,this.target=this._target;}),d$i(0,d$a,"mouseWheelEnable",function(){return this._mouseWheelEnable;},function(d$a){this._mouseWheelEnable=d$a,this.target=this._target;}),d$i(0,d$a,"tick",function(){return this.slider.tick;},function(d$a){this.slider.tick=d$a;}),d$c;}(d$H),d$P=function(d$b){function d$c(d$a){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,d$c.__super.call(this),this.skin=d$a;}d$f(d$c,"laya.ui.Slider",d$b);var d$a=d$c.prototype;return d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._bg&&this._bg.destroy(d$a),this._bar&&this._bar.destroy(d$a),this._progress&&this._progress.destroy(d$a),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null;},d$a.createChildren=function(){this.addChild(this._bg=new d$Q()),this.addChild(this._bar=new d$K());},d$a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0;},d$a.onBarMouseDown=function(d$a){this._globalSacle||(this._globalSacle=new d$q()),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=d$r.stage.mouseX,this._ty=d$r.stage.mouseY,d$r.stage.on("mousemove",this,this.mouseMove),d$r.stage.once("mouseup",this,this.mouseUp),d$r.stage.once("mouseout",this,this.mouseUp),this.showValueText();},d$a.showValueText=function(){if(this.showLabel){var d$a=laya.ui.Slider.label;this.addChild(d$a),d$a.textField.changeText(this._value+""),this.isVertical?(d$a.x=this._bar.x+20,d$a.y=.5*(this._bar.height-d$a.height)+this._bar.y):(d$a.y=this._bar.y-20,d$a.x=.5*(this._bar.width-d$a.width)+this._bar.x);}},d$a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf();},d$a.mouseUp=function(d$a){d$r.stage.off("mousemove",this,this.mouseMove),d$r.stage.off("mouseup",this,this.mouseUp),d$r.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText();},d$a.mouseMove=function(d$a){var d$b=this._value;this.isVertical?(this._bar.y+=(d$r.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(d$r.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=d$r.stage.mouseX,this._ty=d$r.stage.mouseY;var d$c=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*d$c)/d$c,this._value!=d$b&&this.sendChangeEvent(),this.showValueText();},d$a.sendChangeEvent=function(d$a){void 0===d$a&&(d$a="change"),this.event(d$a),this.changeHandler&&this.changeHandler.runWith(this._value);},d$a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height));},d$a.changeSize=function(){d$b.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue();},d$a.setSlider=function(d$a,d$b,d$c){this._value=-1,this._min=d$a,this._max=d$a<d$b?d$b:d$a,this.value=d$c<d$a?d$a:d$b<d$c?d$b:d$c;},d$a.changeValue=function(){var d$a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*d$a)/d$a,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var d$b=this._max-this._min;0===d$b&&(d$b=1),this.isVertical?(this._bar.y=(this._value-this._min)/d$b*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/d$b*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width));},d$a.onBgMouseDown=function(d$a){var d$b=this._bg.getMousePoint();this.isVertical?this.value=d$b.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=d$b.x/(this.width-this._bar.width)*(this._max-this._min)+this._min;},d$i(0,d$a,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height);}),d$i(0,d$a,"skin",function(){return this._skin;},function(d$a){if(this._skin!=d$a){this._skin=d$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var d$b=this._skin.replace(".png","$progress.png");d$u.getRes(d$b)&&(this._progress||(this.addChild(this._progress=new d$Q()),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=d$b),this.setBarPoint(),this.callLater(this.changeValue);}}),d$i(0,d$a,"allowClickBack",function(){return this._allowClickBack;},function(d$a){this._allowClickBack!=d$a&&((this._allowClickBack=d$a)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown));}),d$i(0,d$a,"max",function(){return this._max;},function(d$a){this._max!=d$a&&(this._max=d$a,this.callLater(this.changeValue));}),d$i(0,d$a,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width);}),d$i(0,d$a,"tick",function(){return this._tick;},function(d$a){this._tick!=d$a&&(this._tick=d$a,this.callLater(this.changeValue));}),d$i(0,d$a,"sizeGrid",function(){return this._bg.sizeGrid;},function(d$a){this._bg.sizeGrid=d$a,this._bar.sizeGrid=d$a,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid);}),d$i(0,d$a,"min",function(){return this._min;},function(d$a){this._min!=d$a&&(this._min=d$a,this.callLater(this.changeValue));}),d$i(0,d$a,"value",function(){return this._value;},function(d$a){if(this._value!=d$a){var d$b=this._value;this._value=d$a,this.changeValue(),this._value!=d$b&&this.sendChangeEvent();}}),d$i(0,d$a,"dataSource",d$b.prototype._$get_dataSource,function(d$a){"number"==typeof(this._dataSource=d$a)||"string"==typeof d$a?this.value=Number(d$a):d$r.superSet(d$H,this,"dataSource",d$a);}),d$i(0,d$a,"bar",function(){return this._bar;}),d$d(d$c,["label",function(){return this.label=new d$R();}]),d$c;}(d$H),d$Q=function(d$b){function d$c(d$a){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,d$c.__super.call(this),this.skin=d$a;}d$f(d$c,"laya.ui.Image",d$b);var d$a=d$c.prototype;return d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,d$u.clearCache(this,this._skin);},d$a.dispose=function(){this.destroy(!0),d$u.clearCache(this,this._skin),this.clearEvent();},d$a.createChildren=function(){this.graphics=this._bitmap=new d$G();},d$a.setSource=function(d$a,d$b){this.destroyed||d$a===this._skin&&d$b&&(this.source=d$b,this.onCompResize(),this.clearEvent());},d$a.clearEvent=function(){this._skin&&d$e.atalsNotify&&d$e.atalsNotify.off(this._skin,this,this.setSource);},d$a.clearLoad=function(){this._skin&&((this._complete||this._progress)&&d$r.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null);},d$i(0,d$a,"source",function(){return this._bitmap.source;},function(d$a){this._bitmap&&(this._bitmap.source=d$a,this.event("loaded"),this.repaint());}),d$i(0,d$a,"dataSource",d$b.prototype._$get_dataSource,function(d$a){"string"==typeof(this._dataSource=d$a)?this.skin=d$a:d$r.superSet(d$H,this,"dataSource",d$a);}),d$i(0,d$a,"measureHeight",function(){return this._bitmap.height;}),d$i(0,d$a,"skin",function(){return this._skin;},function(d$a){if(this._skin!=d$a)if(d$u.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=d$a){d$u.keepCache(this,this._skin);var d$b=d$u.getRes(d$a),d$c=d$e.resAtalsObj&&d$e.resAtalsObj[this._skin];d$b?(this.source=d$b,this.onCompResize()):d$c?(d$e.atalsNotify&&d$e.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=d$c.sourceW),0==this.height&&(this.height=d$c.sourceH)):(this._complete=d$o.create(this,this.setSource,[this._skin]),this._progress=null,d$r.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group));}else this.source=null;}),d$i(0,d$a,"group",function(){return this._group;},function(d$a){d$a&&this._skin&&d$u.setGroup(this._skin,d$a),this._group=d$a;}),d$i(0,d$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null;},function(d$a){this._bitmap.sizeGrid=d$E.fillArray(d$D.defaultSizeGrid,d$a,Number);}),d$i(0,d$a,"measureWidth",function(){return this._bitmap.width;}),d$i(0,d$a,"width",d$b.prototype._$get_width,function(d$a){d$r.superSet(d$H,this,"width",d$a),this._bitmap.width=0==d$a?1e-7:d$a;}),d$i(0,d$a,"height",d$b.prototype._$get_height,function(d$a){d$r.superSet(d$H,this,"height",d$a),this._bitmap.height=0==d$a?1e-7:d$a;}),d$c;}(d$H),d$R=function(d$b){function d$c(d$a){this._tf=null,d$c.__super.call(this),void 0===d$a&&(d$a=""),d$m.defaultColor=d$D.labelColor,this.text=d$a;}d$f(d$c,"laya.ui.Label",d$b);var d$a=d$c.prototype;return d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._tf=null;},d$a.createChildren=function(){this.addChild(this._tf=new d$x());},d$a.changeText=function(d$a){this._tf.changeText(d$a);},d$i(0,d$a,"padding",function(){return this._tf.padding.join(",");},function(d$a){this._tf.padding=d$E.fillArray(d$D.labelPadding,d$a,Number);}),d$i(0,d$a,"bold",function(){return this._tf.bold;},function(d$a){this._tf.bold=d$a;}),d$i(0,d$a,"align",function(){return this._tf.align;},function(d$a){this._tf.align=d$a;}),d$i(0,d$a,"text",function(){return this._tf.text;},function(d$a){this._tf.text!=d$a&&(d$a&&(d$a=d$E.adptString(d$a+"")),this._tf.text=d$a,this.event("change"),this._width&&this._height||this.onCompResize());}),d$i(0,d$a,"italic",function(){return this._tf.italic;},function(d$a){this._tf.italic=d$a;}),d$i(0,d$a,"wordWrap",function(){return this._tf.wordWrap;},function(d$a){this._tf.wordWrap=d$a;}),d$i(0,d$a,"font",function(){return this._tf.font;},function(d$a){this._tf.font=d$a;}),d$i(0,d$a,"dataSource",d$b.prototype._$get_dataSource,function(d$a){"number"==typeof(this._dataSource=d$a)||"string"==typeof d$a?this.text=d$a+"":d$r.superSet(d$H,this,"dataSource",d$a);}),d$i(0,d$a,"color",function(){return this._tf.color;},function(d$a){this._tf.color=d$a;}),d$i(0,d$a,"valign",function(){return this._tf.valign;},function(d$a){this._tf.valign=d$a;}),d$i(0,d$a,"leading",function(){return this._tf.leading;},function(d$a){this._tf.leading=d$a;}),d$i(0,d$a,"fontSize",function(){return this._tf.fontSize;},function(d$a){this._tf.fontSize=d$a;}),d$i(0,d$a,"bgColor",function(){return this._tf.bgColor;},function(d$a){this._tf.bgColor=d$a;}),d$i(0,d$a,"borderColor",function(){return this._tf.borderColor;},function(d$a){this._tf.borderColor=d$a;}),d$i(0,d$a,"stroke",function(){return this._tf.stroke;},function(d$a){this._tf.stroke=d$a;}),d$i(0,d$a,"strokeColor",function(){return this._tf.strokeColor;},function(d$a){this._tf.strokeColor=d$a;}),d$i(0,d$a,"textField",function(){return this._tf;}),d$i(0,d$a,"measureWidth",function(){return this._tf.width;}),d$i(0,d$a,"measureHeight",function(){return this._tf.height;}),d$i(0,d$a,"width",function(){return this._width||this._tf.text?d$r.superGet(d$H,this,"width"):0;},function(d$a){d$r.superSet(d$H,this,"width",d$a),this._tf.width=d$a;}),d$i(0,d$a,"height",function(){return this._height||this._tf.text?d$r.superGet(d$H,this,"height"):0;},function(d$a){d$r.superSet(d$H,this,"height",d$a),this._tf.height=d$a;}),d$i(0,d$a,"overflow",function(){return this._tf.overflow;},function(d$a){this._tf.overflow=d$a;}),d$i(0,d$a,"underline",function(){return this._tf.underline;},function(d$a){this._tf.underline=d$a;}),d$i(0,d$a,"underlineColor",function(){return this._tf.underlineColor;},function(d$a){this._tf.underlineColor=d$a;}),d$c;}(d$H),d$S=function(d$b){function d$c(d$a){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,d$c.__super.call(this),this.skin=d$a;}d$f(d$c,"laya.ui.ProgressBar",d$b);var d$a=d$c.prototype;return d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._bg&&this._bg.destroy(d$a),this._bar&&this._bar.destroy(d$a),this._bg=this._bar=null,this.changeHandler=null;},d$a.createChildren=function(){this.addChild(this._bg=new d$Q()),this.addChild(this._bar=new d$Q());},d$a.changeValue=function(){if(this.sizeGrid){var d$a=this.sizeGrid.split(","),d$b=Number(d$a[3]),d$c=Number(d$a[1]),d$d=(this.width-d$b-d$c)*this._value;this._bar.width=d$b+d$c+d$d,this._bar.visible=this._bar.width>d$b+d$c;}else this._bar.width=this.width*this._value;},d$i(0,d$a,"measureHeight",function(){return this._bg.height;}),d$i(0,d$a,"skin",function(){return this._skin;},function(d$a){this._skin!=d$a&&(this._skin=d$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue));}),d$i(0,d$a,"measureWidth",function(){return this._bg.width;}),d$i(0,d$a,"height",d$b.prototype._$get_height,function(d$a){d$r.superSet(d$H,this,"height",d$a),this._bg.height=this._height,this._bar.height=this._height;}),d$i(0,d$a,"bar",function(){return this._bar;}),d$i(0,d$a,"value",function(){return this._value;},function(d$a){this._value!=d$a&&(d$a=1<d$a?1:d$a<0?0:d$a,this._value=d$a,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(d$a));}),d$i(0,d$a,"bg",function(){return this._bg;}),d$i(0,d$a,"sizeGrid",function(){return this._bg.sizeGrid;},function(d$a){this._bg.sizeGrid=this._bar.sizeGrid=d$a;}),d$i(0,d$a,"width",d$b.prototype._$get_width,function(d$a){d$r.superSet(d$H,this,"width",d$a),this._bg.width=this._width,this.callLater(this.changeValue);}),d$i(0,d$a,"dataSource",d$b.prototype._$get_dataSource,function(d$a){"number"==typeof(this._dataSource=d$a)||"string"==typeof d$a?this.value=Number(d$a):d$r.superSet(d$H,this,"dataSource",d$a);}),d$c;}(d$H),d$T=(function(d$a){function d$c(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,d$c.__super.call(this),this._tipBox=new d$H(),this._tipBox.addChild(this._tipText=new d$x()),this._tipText.x=this._tipText.y=5,this._tipText.color=d$c.tipTextColor,this._defaultTipHandler=this._showDefaultTip,d$r.stage.on("showtip",this,this._onStageShowTip),d$r.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100;}d$f(d$c,"laya.ui.TipManager",d$H);var d$b=d$c.prototype;d$b._onStageHideTip=function(d$a){d$r.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf();},d$b._onStageShowTip=function(d$a){d$r.timer.once(d$c.tipDelay,this,this._showTip,[d$a],!0);},d$b._showTip=function(d$a){if("string"==typeof d$a){var d$b=String(d$a);Boolean(d$b)&&this._defaultTipHandler(d$b);}else d$a instanceof laya.utils.Handler?d$a.run():"function"==typeof d$a&&d$a.apply();d$r.stage.on("mousemove",this,this._onStageMouseMove),d$r.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null);},d$b._onStageMouseDown=function(d$a){this.closeAll();},d$b._onStageMouseMove=function(d$a){this._showToStage(this,d$c.offsetX,d$c.offsetY);},d$b._showToStage=function(d$a,d$b,d$c){void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0);var d$d=d$a.getBounds();d$a.x=d$r.stage.mouseX+d$b,d$a.y=d$r.stage.mouseY+d$c,d$a.x+d$d.width>d$r.stage.width&&(d$a.x-=d$d.width+d$b),d$a.y+d$d.height>d$r.stage.height&&(d$a.y-=d$d.height+d$c);},d$b.closeAll=function(){d$r.timer.clear(this,this._showTip),d$r.stage.off("mousemove",this,this._onStageMouseMove),d$r.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren();},d$b.showDislayTip=function(d$a){this.addChild(d$a),this._showToStage(this),d$r._currentStage.addChild(this);},d$b._showDefaultTip=function(d$a){this._tipText.text=d$a;var d$b=this._tipBox.graphics;d$b.clear(),d$b.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,d$c.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),d$r._currentStage.addChild(this);},d$i(0,d$b,"defaultTipHandler",function(){return this._defaultTipHandler;},function(d$a){this._defaultTipHandler=d$a;}),d$c.offsetX=10,d$c.offsetY=15,d$c.tipTextColor="#ffffff",d$c.tipBackColor="#111111",d$c.tipDelay=200;}(),function(d$a){var d$p;function d$q(){this._idMap=null,this._aniList=null,this._watchMap={},d$q.__super.call(this);}d$f(d$q,"laya.ui.View",d$J);var d$b=d$q.prototype;return d$b.createView=function(d$a){if(d$a.animations&&!this._idMap&&(this._idMap={}),d$q.createComp(d$a,this,this),d$a.animations){var d$b,d$c,d$d=[],d$e=d$a.animations,d$f=0,d$i=d$e.length;for(d$f=0;d$f<d$i;d$f++){switch(d$b=new d$n(),d$c=d$e[d$f],d$b._setUp(this._idMap,d$c),(this[d$c.name]=d$b)._setControlNode(this),d$c.action){case 1:d$b.play(0,!1);break;case 2:d$b.play(0,!0);}d$d.push(d$b);}this._aniList=d$d;}0<this._width&&null==d$a.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0);},d$b.onEvent=function(d$a,d$b){},d$b.loadUI=function(d$a){var d$b=d$q.uiMap[d$a];d$b&&this.createView(d$b);},d$b.destroy=function(d$a){void 0===d$a&&(d$a=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,d$a);},d$b.changeData=function(d$a){var d$b=this._watchMap[d$a];if(d$b){console.log("change",d$a);for(var d$c=0,d$d=d$b.length;d$c<d$d;d$c++){d$b[d$c].exe(this);}}},d$q._regs=function(){for(var d$a in d$q.uiClassMap)d$s.regClass(d$a,d$q.uiClassMap[d$a]);},d$q.createComp=function(d$a,d$b,d$c,d$d){if(!(d$b=d$b||d$q.getCompInstance(d$a)))return console.warn("can not create:"+d$a.type),null;var d$e=d$a.child;if(d$e)for(var d$f=d$b instanceof laya.ui.List,d$i=0,d$j=d$e.length;d$i<d$j;d$i++){var d$k=d$e[d$i];if(!d$b.hasOwnProperty("itemRender")||"render"!=d$k.props.name&&"render"!==d$k.props.renderType){if("Graphic"==d$k.type)d$s.addGraphicsToSprite(d$k,d$b);else if(d$s.isDrawType(d$k.type))d$s.addGraphicToSprite(d$k,d$b,!0);else{if(d$f){var d$l=[],d$m=d$q.createComp(d$k,null,d$c,d$l);d$l.length&&(d$m._$bindData=d$l);}else d$m=d$q.createComp(d$k,null,d$c,d$d);"Script"==d$k.type?"owner"in d$m?d$m.owner=d$b:"target"in d$m&&(d$m.target=d$b):"mask"==d$k.props.renderType||"mask"==d$k.props.name?d$b.mask=d$m:d$m instanceof laya.display.Sprite&&d$b.addChild(d$m);}}else d$b.itemRender=d$k;}var d$n=d$a.props;for(var d$o in d$n){var d$p=d$n[d$o];d$q.eventDic[d$o]?d$p&&d$c&&d$b.on(d$o,d$c,d$c.onEvent,[d$p]):d$q.setCompValue(d$b,d$o,d$p,d$c,d$d);}return d$r.__typeof(d$b,"laya.ui.IItem")&&d$b.initItems(),d$a.compId&&d$c&&d$c._idMap&&(d$c._idMap[d$a.compId]=d$b),d$b;},d$q.setCompValue=function(d$a,d$b,d$c,d$d,d$e){if("string"==typeof d$c&&-1<d$c.indexOf("${")){if(d$q._sheet||(d$q._sheet=d$s.getClass("laya.data.Table")),!d$q._sheet)return void console.warn("Can not find class Sheet");if(d$e)d$e.push(d$a,d$b,d$c);else if(d$d){-1==d$c.indexOf("].")&&(d$c=d$c.replace(".","[0]."));var d$f,d$i,d$j=new d$p(d$a,d$b,d$c);d$j.exe(d$d);for(var d$k=d$c.replace(/\[.*?\]\./g,".");null!=(d$f=d$q._parseWatchData.exec(d$k));){for(var d$l=d$f[1];null!=(d$i=d$q._parseKeyWord.exec(d$l));){var d$m=d$i[0],d$n=d$d._watchMap[d$m]||(d$d._watchMap[d$m]=[]);d$n.push(d$j),d$q._sheet.I.notifer.on(d$m,d$d,d$d.changeData,[d$m]);}(d$n=d$d._watchMap[d$l]||(d$d._watchMap[d$l]=[])).push(d$j),d$q._sheet.I.notifer.on(d$l,d$d,d$d.changeData,[d$l]);}}}else if("var"===d$b&&d$d)d$d[d$c]=d$a;else if("onClick"==d$b){var d$o=d$r._runScript("(function(){"+d$c+"})");d$a.on("click",d$d,d$o);}else d$a[d$b]="true"===d$c||"false"!==d$c&&d$c;},d$q.getCompInstance=function(d$a){var d$b,d$c=d$a.props?d$a.props.runtime:null;return d$b=d$c?d$q.viewClassMap[d$c]||d$q.uiClassMap[d$c]||d$r.__classmap[d$c]:d$q.uiClassMap[d$a.type],d$a.props&&d$a.props.hasOwnProperty("renderType")&&"instance"==d$a.props.renderType?d$b.instance:d$b?new d$b():null;},d$q.regComponent=function(d$a,d$b){d$q.uiClassMap[d$a]=d$b,d$s.regClass(d$a,d$b);},d$q.regViewRuntime=function(d$a,d$b){d$q.viewClassMap[d$a]=d$b;},d$q.uiMap={},d$q.viewClassMap={},d$q._sheet=null,d$d(d$q,["uiClassMap",function(){return this.uiClassMap={ViewStack:d$aa,LinkButton:d$K,TextArea:d$la,ColorPicker:d$M,Box:d$J,Button:d$K,CheckBox:d$U,Clip:d$L,ComboBox:d$N,Component:d$H,HScrollBar:d$Y,HSlider:d$$,Image:d$Q,Label:d$R,List:d$X,Panel:d$Z,ProgressBar:d$S,Radio:d$g,RadioGroup:d$ja,ScrollBar:d$O,Slider:d$P,Tab:d$ka,TextInput:d$ca,View:d$q,VScrollBar:d$ba,VSlider:d$da,Tree:d$h,HBox:d$fa,VBox:d$ia,Sprite:d$w,Animation:d$c,Text:d$x,FontClip:d$W};},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0};},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g;},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g;}]),d$q.__init$=function(){d$q._regs(),d$p=function(){function d$a(d$a,d$b,d$c){this.comp=null,this.prop=null,this.value=null,this.comp=d$a,this.prop=d$b,this.value=d$c;}return d$f(d$a,""),d$a.prototype.exe=function(d$a){var d$b=d$E.getBindFun(this.value);this.comp[this.prop]=d$b.call(this,d$a);},d$a;}();},d$q;}()),d$U=function(d$a){function d$c(d$a,d$b){void 0===d$b&&(d$b=""),d$c.__super.call(this,d$a,d$b);}d$f(d$c,"laya.ui.CheckBox",d$a);var d$b=d$c.prototype;return d$b.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1;},d$b.initialize=function(){d$a.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0;},d$i(0,d$b,"dataSource",d$a.prototype._$get_dataSource,function(d$a){"boolean"==typeof(this._dataSource=d$a)?this.selected=d$a:"string"==typeof d$a?this.selected="true"===d$a:d$r.superSet(d$K,this,"dataSource",d$a);}),d$c;}(d$K),d$V=function(d$a){function d$b(){this._space=0,this._align="none",this._itemChanged=!1,d$b.__super.call(this);}d$f(d$b,"laya.ui.LayoutBox",d$J);var d$c=d$b.prototype;return d$c.addChild=function(d$a){return d$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,d$a);},d$c.onResize=function(d$a){this._setItemChanged();},d$c.addChildAt=function(d$a,d$b){return d$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,d$a,d$b);},d$c.removeChild=function(d$a){return d$a.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,d$a);},d$c.removeChildAt=function(d$a){return this.getChildAt(d$a).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,d$a);},d$c.refresh=function(){this._setItemChanged();},d$c.changeItems=function(){this._itemChanged=!1;},d$c.sortItem=function(d$a){d$a&&d$a.sort(function(d$a,d$b){return d$a.y-d$b.y;});},d$c._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems));},d$i(0,d$c,"space",function(){return this._space;},function(d$a){this._space=d$a,this._setItemChanged();}),d$i(0,d$c,"align",function(){return this._align;},function(d$a){this._align=d$a,this._setItemChanged();}),d$b;}(),d$W=function(d$b){function d$c(d$a,d$b){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,d$c.__super.call(this),d$a&&(this.skin=d$a),d$b&&(this.sheet=d$b);}d$f(d$c,"laya.ui.FontClip",d$b);var d$a=d$c.prototype;return d$a.createChildren=function(){this._bitmap=new d$G(),this.on("loaded",this,this._onClipLoaded);},d$a._onClipLoaded=function(){this.callLater(this.changeValue);},d$a.changeValue=function(){var d$a;if(this._sources&&this._valueArr&&(this.graphics.clear(!0),d$a=this._sources[0])){var d$b="horizontal"===this._direction;d$b?(this._wordsW=this._valueArr.length*(d$a.sourceWidth+this.spaceX),this._wordsH=d$a.sourceHeight):(this._wordsW=d$a.sourceWidth,this._wordsH=(d$a.sourceHeight+this.spaceY)*this._valueArr.length);var d$c=0;if(this._width)switch(this._align){case"center":d$c=.5*(this._width-this._wordsW);break;case"right":d$c=this._width-this._wordsW;break;default:d$c=0;}for(var d$d=0,d$e=this._valueArr.length;d$d<d$e;d$d++){var d$f=this._indexMap[this._valueArr.charAt(d$d)];this.sources[d$f]&&(d$a=this.sources[d$f],d$b?this.graphics.drawTexture(d$a,d$c+d$d*(d$a.sourceWidth+this.spaceX),0,d$a.sourceWidth,d$a.sourceHeight):this.graphics.drawTexture(d$a,0+d$c,d$d*(d$a.sourceHeight+this.spaceY),d$a.sourceWidth,d$a.sourceHeight));}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize));}},d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),d$b.prototype.destroy.call(this,d$a);},d$i(0,d$a,"sheet",function(){return this._sheet;},function(d$a){d$a+="";var d$b=(this._sheet=d$a).split(" ");this._clipX=String(d$b[0]).length,this.clipY=d$b.length,this._indexMap={};for(var d$c=0;d$c<this._clipY;d$c++)for(var d$d=d$b[d$c].split(""),d$e=0,d$f=d$d.length;d$e<d$f;d$e++)this._indexMap[d$d[d$e]]=d$c*this._clipX+d$e;}),d$i(0,d$a,"height",d$b.prototype._$get_height,function(d$a){d$r.superSet(d$L,this,"height",d$a),this.callLater(this.changeValue);}),d$i(0,d$a,"direction",function(){return this._direction;},function(d$a){this._direction=d$a,this.callLater(this.changeValue);}),d$i(0,d$a,"value",function(){return this._valueArr?this._valueArr:"";},function(d$a){d$a+="",this._valueArr=d$a,this.callLater(this.changeValue);}),d$i(0,d$a,"width",d$b.prototype._$get_width,function(d$a){d$r.superSet(d$L,this,"width",d$a),this.callLater(this.changeValue);}),d$i(0,d$a,"spaceX",function(){return this._spaceX;},function(d$a){this._spaceX=d$a,"horizontal"===this._direction&&this.callLater(this.changeValue);}),d$i(0,d$a,"spaceY",function(){return this._spaceY;},function(d$a){this._spaceY=d$a,"horizontal"!==this._direction&&this.callLater(this.changeValue);}),d$i(0,d$a,"align",function(){return this._align;},function(d$a){this._align=d$a,this.callLater(this.changeValue);}),d$i(0,d$a,"measureWidth",function(){return this._wordsW;}),d$i(0,d$a,"measureHeight",function(){return this._wordsH;}),d$c;}(d$L),d$X=function(d$a){function d$b(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new d$q(),d$b.__super.call(this);}d$f(d$b,"laya.ui.List",d$a);var d$c=d$b.prototype;return d$r.imps(d$c,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),d$c.destroy=function(d$a){void 0===d$a&&(d$a=!0),this._content&&this._content.destroy(d$a),this._scrollBar&&this._scrollBar.destroy(d$a),laya.ui.Component.prototype.destroy.call(this,d$a),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null;},d$c.createChildren=function(){this.addChild(this._content=new d$J());},d$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=d$r.superGet(d$J,this,"cacheAs")),d$r.superSet(d$J,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd);},d$c.onScrollEnd=function(){d$r.superSet(d$J,this,"cacheAs",this._$P.cacheAs);},d$c._removePreScrollBar=function(){var d$a=this.removeChildByName("scrollBar");d$a&&d$a.destroy(!0);},d$c.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var d$a=this._getOneCell(),d$b=d$a.width+this._spaceX||1,d$c=d$a.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/d$b):Math.ceil(this._width/d$b)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/d$c):Math.round(this._height/d$c));var d$d=this._width?this._width:d$b*this.repeatX-this._spaceX,d$e=this._height?this._height:d$c*this.repeatY-this._spaceY;this._cellSize=this._isVertical?d$c:d$b,this._cellOffset=this._isVertical?d$c*Math.max(this._repeatY2,this._repeatY)-d$e-this._spaceY:d$b*Math.max(this._repeatX2,this._repeatX)-d$d-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=d$e:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=d$d),this.setContentSize(d$d,d$e);var d$f=this._isVertical?this.repeatX:this.repeatY,d$i=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,d$f,d$i),this._createdLine=d$i,this._array&&(this.array=this._array,this.runCallLater(this.renderItems));}},d$c._getOneCell=function(){if(0===this._cells.length){var d$a=this.createItem();if(this._offset.setTo(d$a.x,d$a.y),this.cacheContent)return d$a;this._cells.push(d$a);}return this._cells[0];},d$c._createItems=function(d$a,d$b,d$c){var d$d=this._content,d$e=this._getOneCell(),d$f=d$e.width+this._spaceX,d$i=d$e.height+this._spaceY;if(this.cacheContent){var d$j=new d$J();d$j.cacheAsBitmap=!0,d$j.pos((this._isVertical?0:d$a)*d$f,(this._isVertical?d$a:0)*d$i),this._content.addChild(d$j),this._content.optimizeScrollRect=!0,d$d=d$j;}else{for(var d$k=[],d$l=this._cells.length-1;-1<d$l;d$l--){var d$m=this._cells[d$l];d$m.removeSelf(),d$k.push(d$m);}this._cells.length=0;}for(var d$n=d$a;d$n<d$c;d$n++)for(var d$o=0;d$o<d$b;d$o++)(d$e=d$k&&d$k.length?d$k.pop():this.createItem()).x=(this._isVertical?d$o:d$n)*d$f-d$d.x,d$e.y=(this._isVertical?d$n:d$o)*d$i-d$d.y,d$e.name="item"+(d$n*d$b+d$o),d$d.addChild(d$e),this.addCell(d$e);},d$c.createItem=function(){var d$a=[];if("function"==typeof this._itemRender)var d$b=new this._itemRender();else d$b=d$T.createComp(this._itemRender,null,null,d$a);if(0==d$a.length&&d$b._watchMap){var d$c=d$b._watchMap;for(var d$d in d$c)for(var d$e=d$c[d$d],d$f=0;d$f<d$e.length;d$f++){var d$i=d$e[d$f];d$a.push(d$i.comp,d$i.prop,d$i.value);}}return d$a.length&&(d$b._$bindData=d$a),d$b;},d$c.addCell=function(d$a){d$a.on("click",this,this.onCellMouse),d$a.on("rightclick",this,this.onCellMouse),d$a.on("mouseover",this,this.onCellMouse),d$a.on("mouseout",this,this.onCellMouse),d$a.on("mousedown",this,this.onCellMouse),d$a.on("mouseup",this,this.onCellMouse),this._cells.push(d$a);},d$c.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var d$a=0,d$b=d$a=0;d$b<1e4;d$b++){var d$c=this.getChildByName("item"+d$b);if(!d$c)break;this.addCell(d$c),d$a++;}this.repeatY=d$a;}},d$c.setContentSize=function(d$a,d$b){this._content.width=d$a,this._content.height=d$b,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new d$t()),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,d$a,d$b),this._content.scrollRect=this._content.scrollRect),this.event("resize");},d$c.onCellMouse=function(d$a){"mousedown"===d$a.type&&(this._isMoved=!1);var d$b=d$a.currentTarget,d$c=this._startIndex+this._cells.indexOf(d$b);d$c<0||("click"===d$a.type||"rightclick"===d$a.type?this.selectEnable&&!this._isMoved?this.selectedIndex=d$c:this.changeCellState(d$b,!0,0):"mouseover"!==d$a.type&&"mouseout"!==d$a.type||this._selectedIndex===d$c||this.changeCellState(d$b,"mouseover"===d$a.type,0),this.mouseHandler&&this.mouseHandler.runWith([d$a,d$c]));},d$c.changeCellState=function(d$a,d$b,d$c){var d$d=d$a.getChildByName("selectBox");d$d&&(this.selectEnable=!0,d$d.visible=d$b,d$d.index=d$c);},d$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange);},d$c.onScrollBarChange=function(d$a){this.runCallLater(this.changeCells);var d$b=this._scrollBar.value,d$c=this._isVertical?this.repeatX:this.repeatY,d$d=this._isVertical?this.repeatY:this.repeatX,d$e=Math.floor(d$b/this._cellSize);if(this.cacheContent)d$i=d$d+1,this._createdLine-d$e<d$i&&(this._createItems(this._createdLine,d$c,this._createdLine+d$i),this.renderItems(this._createdLine*d$c,0),this._createdLine+=d$i);else{var d$f=d$e*d$c,d$i=0;if(d$f>this._startIndex){d$i=d$f-this._startIndex;var d$j=!0,d$k=this._startIndex+d$c*(d$d+1);this._isMoved=!0;}else d$f<this._startIndex&&(d$i=this._startIndex-d$f,d$j=!1,d$k=this._startIndex-1,this._isMoved=!0);for(var d$l=0;d$l<d$i;d$l++){if(d$j){var d$m=this._cells.shift();this._cells[this._cells.length]=d$m;var d$n=d$k+d$l;}else d$m=this._cells.pop(),this._cells.unshift(d$m),d$n=d$k-d$l;var d$o=Math.floor(d$n/d$c)*this._cellSize;this._isVertical?d$m.y=d$o:d$m.x=d$o,this.renderItem(d$m,d$n);}this._startIndex=d$f,this.changeSelectStatus();}var d$p=this._content.scrollRect;this._isVertical?(d$p.y=d$b-this._offset.y,d$p.x=-this._offset.x):(d$p.y=-this._offset.y,d$p.x=d$b-this._offset.x),this._content.scrollRect=d$p;},d$c.posCell=function(d$a,d$b){if(this._scrollBar){var d$c=this._isVertical?this.repeatX:this.repeatY,d$d=(this._isVertical?this.repeatY:this.repeatX,Math.floor(d$b/d$c)*this._cellSize);this._isVertical?d$a.y=d$d:d$a.x=d$d;}},d$c.changeSelectStatus=function(){for(var d$a=0,d$b=this._cells.length;d$a<d$b;d$a++)this.changeCellState(this._cells[d$a],this._selectedIndex===this._startIndex+d$a,1);},d$c.renderItems=function(d$a,d$b){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0);for(var d$c=d$a,d$d=d$b||this._cells.length;d$c<d$d;d$c++)this.renderItem(this._cells[d$c],this._startIndex+d$c);this.changeSelectStatus(),this._twDone=!0;},d$c.renderItem=function(d$a,d$b){this._array&&0<=d$b&&d$b<this._array.length?(d$a.visible=!0,d$a._$bindData?(d$a._dataSource=this._array[d$b],this._bindData(d$a,this._array[d$b])):d$a.dataSource=this._array[d$b],this.cacheContent||this.posCell(d$a,d$b),this.hasListener("render")&&this.event("render",[d$a,d$b]),this.renderHandler&&this.renderHandler.runWith([d$a,d$b]),this.renderTwHandler&&this.renderTwHandler.runWith([d$a,d$b])):(d$a.visible=!1,d$a.dataSource=null);},d$c._bindData=function(d$a,d$b){for(var d$c=d$a._$bindData,d$d=0,d$e=d$c.length;d$d<d$e;d$d++){var d$f=d$c[d$d++],d$i=d$c[d$d++],d$j=d$c[d$d],d$k=d$E.getBindFun(d$j);d$f[d$i]=d$k.call(this,d$b);}},d$c.refresh=function(){this.array=this._array;},d$c.getItem=function(d$a){return-1<d$a&&d$a<this._array.length?this._array[d$a]:null;},d$c.changeItem=function(d$a,d$b){-1<d$a&&d$a<this._array.length&&(this._array[d$a]=d$b,d$a>=this._startIndex&&d$a<this._startIndex+this._cells.length&&this.renderItem(this.getCell(d$a),d$a));},d$c.setItem=function(d$a,d$b){this.changeItem(d$a,d$b);},d$c.addItem=function(d$a){this._array.push(d$a),this.array=this._array;},d$c.addItemAt=function(d$a,d$b){this._array.splice(d$b,0,d$a),this.array=this._array;},d$c.deleteItem=function(d$a){this._array.splice(d$a,1),this.array=this._array;},d$c.getCell=function(d$a){return this.runCallLater(this.changeCells),-1<d$a&&this._cells?this._cells[(d$a-this._startIndex)%this._cells.length]:null;},d$c.scrollTo=function(d$a){if(this._scrollBar){var d$b=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(d$a/d$b)*this._cellSize;}else this.startIndex=d$a;},d$c.tweenTo=function(d$a,d$b,d$c){if(void 0===d$b&&(d$b=200),this._scrollBar){var d$d=this._isVertical?this.repeatX:this.repeatY;d$z.to(this._scrollBar,{value:Math.floor(d$a/d$d)*this._cellSize},d$b,null,d$c,0,!0);}else this.startIndex=d$a,d$c&&d$c.run();},d$c._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells));},d$c.commitMeasure=function(){this.runCallLater(this.changeCells);},d$i(0,d$c,"cacheAs",d$a.prototype._$get_cacheAs,function(d$a){d$r.superSet(d$J,this,"cacheAs",d$a),this._scrollBar&&(this._$P.cacheAs=null,"none"!==d$a?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart));}),d$i(0,d$c,"content",function(){return this._content;}),d$i(0,d$c,"height",d$a.prototype._$get_height,function(d$a){d$a!=this._height&&(d$r.superSet(d$J,this,"height",d$a),this._setCellChanged());}),d$i(0,d$c,"itemRender",function(){return this._itemRender;},function(d$a){if(this._itemRender!=d$a){this._itemRender=d$a;for(var d$b=this._cells.length-1;-1<d$b;d$b--)this._cells[d$b].destroy();this._cells.length=0,this._setCellChanged();}}),d$i(0,d$c,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null;},function(d$a){this._removePreScrollBar();var d$b=new d$ba();d$b.name="scrollBar",d$b.right=0,d$a&&" "!=d$a&&(d$b.skin=d$a),this.scrollBar=d$b,this.addChild(d$b),this._setCellChanged();}),d$i(0,d$c,"page",function(){return this._page;},function(d$a){this._page=d$a,this._array&&(this._page=0<d$a?d$a:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY);}),d$i(0,d$c,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null;},function(d$a){this._removePreScrollBar();var d$b=new d$Y();d$b.name="scrollBar",d$b.bottom=0,d$a&&" "!=d$a&&(d$b.skin=d$a),this.scrollBar=d$b,this.addChild(d$b),this._setCellChanged();}),d$i(0,d$c,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1;},function(d$a){this._repeatX=d$a,this._setCellChanged();}),d$i(0,d$c,"scrollBar",function(){return this._scrollBar;},function(d$a){this._scrollBar!=d$a&&(this._scrollBar=d$a)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange));}),d$i(0,d$c,"width",d$a.prototype._$get_width,function(d$a){d$a!=this._width&&(d$r.superSet(d$J,this,"width",d$a),this._setCellChanged());}),d$i(0,d$c,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1;},function(d$a){this._repeatY=d$a,this._setCellChanged();}),d$i(0,d$c,"spaceX",function(){return this._spaceX;},function(d$a){this._spaceX=d$a,this._setCellChanged();}),d$i(0,d$c,"spaceY",function(){return this._spaceY;},function(d$a){this._spaceY=d$a,this._setCellChanged();}),d$i(0,d$c,"selectedIndex",function(){return this._selectedIndex;},function(d$a){this._selectedIndex!=d$a&&(this._selectedIndex=d$a,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(d$a),this.startIndex=this._startIndex);}),d$i(0,d$c,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null;},function(d$a){this.selectedIndex=this._array.indexOf(d$a);}),d$i(0,d$c,"length",function(){return this._array?this._array.length:0;}),d$i(0,d$c,"selection",function(){return this.getCell(this._selectedIndex);},function(d$a){this.selectedIndex=this._startIndex+this._cells.indexOf(d$a);}),d$i(0,d$c,"startIndex",function(){return this._startIndex;},function(d$a){this._startIndex=0<d$a?d$a:0,this.callLater(this.renderItems);}),d$i(0,d$c,"twSwitch",function(){return this._twSwitch;},function(d$a){this._twSwitch=d$a;}),d$i(0,d$c,"twDone",function(){return this._twDone;},function(d$a){this._twDone=d$a;}),d$i(0,d$c,"array",function(){return this._array;},function(d$a){this.runCallLater(this.changeCells),this._array=d$a||[];var d$b=this._array.length;if(this.totalPage=Math.ceil(d$b/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<d$b?this._selectedIndex:d$b-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var d$c=this._isVertical?this.repeatX:this.repeatY,d$d=this._isVertical?this.repeatY:this.repeatX,d$e=Math.ceil(d$b/d$c);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=d$d/d$e,this._scrollBar.setScroll(0,(d$e-d$d)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content;}}),d$i(0,d$c,"dataSource",d$a.prototype._$get_dataSource,function(d$a){"number"==typeof(this._dataSource=d$a)&&Math.floor(d$a)==d$a||"string"==typeof d$a?this.selectedIndex=parseInt(d$a):d$a instanceof Array?this.array=d$a:d$r.superSet(d$J,this,"dataSource",d$a);}),d$i(0,d$c,"cells",function(){return this.runCallLater(this.changeCells),this._cells;}),d$b;}(d$J),d$Y=function(d$a){function d$b(){d$b.__super.call(this);}return d$f(d$b,"laya.ui.HScrollBar",d$a),d$b.prototype.initialize=function(){d$a.prototype.initialize.call(this),this.slider.isVertical=!1;},d$b;}(d$O),d$Z=function(d$a){function d$b(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,d$b.__super.call(this),this.width=this.height=100;}d$f(d$b,"laya.ui.Panel",d$a);var d$c=d$b.prototype;return d$c.destroy=function(d$a){void 0===d$a&&(d$a=!0),laya.ui.Component.prototype.destroy.call(this,d$a),this._content&&this._content.destroy(d$a),this._vScrollBar&&this._vScrollBar.destroy(d$a),this._hScrollBar&&this._hScrollBar.destroy(d$a),this._vScrollBar=null,this._hScrollBar=null,this._content=null;},d$c.destroyChildren=function(){this._content.destroyChildren();},d$c.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new d$J());},d$c.addChild=function(d$a){return d$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(d$a);},d$c.onResize=function(){this._setScrollChanged();},d$c.addChildAt=function(d$a,d$b){return d$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(d$a,d$b);},d$c.removeChild=function(d$a){return d$a.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(d$a);},d$c.removeChildAt=function(d$a){return this.getChildAt(d$a).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(d$a);},d$c.removeChildren=function(d$a,d$b){return void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=2147483647),this._content.removeChildren(d$a,d$b),this._setScrollChanged(),this;},d$c.getChildAt=function(d$a){return this._content.getChildAt(d$a);},d$c.getChildByName=function(d$a){return this._content.getChildByName(d$a);},d$c.getChildIndex=function(d$a){return this._content.getChildIndex(d$a);},d$c.changeScroll=function(){this._scrollChanged=!1;var d$a=this.contentWidth||1,d$b=this.contentHeight||1,d$c=this._vScrollBar,d$d=this._hScrollBar,d$e=d$c&&d$b>this._height,d$f=d$d&&d$a>this._width,d$i=d$e?this._width-d$c.width:this._width,d$j=d$f?this._height-d$d.height:this._height;d$c&&(d$c.x=this._width-d$c.width,d$c.y=0,d$c.height=this._height-(d$f?d$d.height:0),d$c.scrollSize=Math.max(.033*this._height,1),d$c.thumbPercent=d$j/d$b,d$c.setScroll(0,d$b-d$j,d$c.value)),d$d&&(d$d.x=0,d$d.y=this._height-d$d.height,d$d.width=this._width-(d$e?d$c.width:0),d$d.scrollSize=Math.max(.033*this._width,1),d$d.thumbPercent=d$i/d$a,d$d.setScroll(0,d$a-d$i,d$d.value));},d$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height);},d$c.setContentSize=function(d$a,d$b){var d$c=this._content;d$c.width=d$a,d$c.height=d$b,d$c.scrollRect||(d$c.scrollRect=new d$t()),d$c.scrollRect.setTo(0,0,d$a,d$b),d$c.scrollRect=d$c.scrollRect;},d$c.onScrollBarChange=function(d$a){var d$b=this._content.scrollRect;if(d$b){var d$c=Math.round(d$a.value);d$a.isVertical?d$b.y=d$c:d$b.x=d$c,this._content.scrollRect=d$b;}},d$c.scrollTo=function(d$a,d$b){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),this.vScrollBar&&(this.vScrollBar.value=d$b),this.hScrollBar&&(this.hScrollBar.value=d$a);},d$c.refresh=function(){this.changeScroll();},d$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=d$r.superGet(d$J,this,"cacheAs")),d$r.superSet(d$J,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd);},d$c.onScrollEnd=function(){d$r.superSet(d$J,this,"cacheAs",this._$P.cacheAs);},d$c._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll));},d$i(0,d$c,"numChildren",function(){return this._content.numChildren;}),d$i(0,d$c,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null;},function(d$a){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new d$Y()),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=d$a;}),d$i(0,d$c,"contentWidth",function(){for(var d$a=0,d$b=this._content.numChildren-1;-1<d$b;d$b--){var d$c=this._content.getChildAt(d$b);d$a=Math.max(d$c.x+d$c.width*d$c.scaleX,d$a);}return d$a;}),d$i(0,d$c,"contentHeight",function(){for(var d$a=0,d$b=this._content.numChildren-1;-1<d$b;d$b--){var d$c=this._content.getChildAt(d$b);d$a=Math.max(d$c.y+d$c.height*d$c.scaleY,d$a);}return d$a;}),d$i(0,d$c,"width",d$a.prototype._$get_width,function(d$a){d$r.superSet(d$J,this,"width",d$a),this._setScrollChanged();}),d$i(0,d$c,"hScrollBar",function(){return this._hScrollBar;}),d$i(0,d$c,"content",function(){return this._content;}),d$i(0,d$c,"height",d$a.prototype._$get_height,function(d$a){d$r.superSet(d$J,this,"height",d$a),this._setScrollChanged();}),d$i(0,d$c,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null;},function(d$a){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new d$ba()),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=d$a;}),d$i(0,d$c,"vScrollBar",function(){return this._vScrollBar;}),d$i(0,d$c,"cacheAs",d$a.prototype._$get_cacheAs,function(d$a){d$r.superSet(d$J,this,"cacheAs",d$a),this._$P.cacheAs=null,"none"!==d$a?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart));}),d$b;}(d$J),d$$=function(d$a){function d$b(d$a){d$b.__super.call(this,d$a),this.isVertical=!1;}return d$f(d$b,"laya.ui.HSlider",d$P),d$b;}(),d$_=function(d$a){function d$c(d$a,d$b){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,d$c.__super.call(this),this.skin=d$b,this.labels=d$a;}d$f(d$c,"laya.ui.UIGroup",d$a);var d$b=d$c.prototype;return d$r.imps(d$b,{"laya.ui.IItem":!0}),d$b.preinitialize=function(){this.mouseEnabled=!0;},d$b.destroy=function(d$a){void 0===d$a&&(d$a=!0),laya.ui.Component.prototype.destroy.call(this,d$a),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null;},d$b.addItem=function(d$a,d$b){void 0===d$b&&(d$b=!0);var d$c=d$a,d$d=this._items.length;if(d$c.name="item"+d$d,this.addChild(d$c),this.initItems(),d$b&&0<d$d){var d$e=this._items[d$d-1];"horizontal"==this._direction?d$c.x=d$e.x+d$e.width+this._space:d$c.y=d$e.y+d$e.height+this._space;}else d$b&&(d$c.x=0,d$c.y=0);return d$d;},d$b.delItem=function(d$a,d$b){void 0===d$b&&(d$b=!0);var d$c=this._items.indexOf(d$a);if(-1!=d$c){var d$d=d$a;this.removeChild(d$d);for(var d$e=d$c+1,d$f=this._items.length;d$e<d$f;d$e++){var d$i=this._items[d$e];d$i.name="item"+(d$e-1),d$b&&("horizontal"==this._direction?d$i.x-=d$d.width+this._space:d$i.y-=d$d.height+this._space);}if(this.initItems(),-1<this._selectedIndex){var d$j;d$j=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=d$j;}}},d$b.initItems=function(){this._items||(this._items=[]);for(var d$a=this._items.length=0;d$a<1e4;d$a++){var d$b=this.getChildByName("item"+d$a);if(null==d$b)break;this._items.push(d$b),d$b.selected=d$a===this._selectedIndex,d$b.clickHandler=d$o.create(this,this.itemClick,[d$a],!1);}},d$b.itemClick=function(d$a){this.selectedIndex=d$a;},d$b.setSelect=function(d$a,d$b){this._items&&-1<d$a&&d$a<this._items.length&&(this._items[d$a].selected=d$b);},d$b.createItem=function(d$a,d$b){return null;},d$b.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var d$a=0,d$b=0,d$c=this._items.length;d$b<d$c;d$b++){var d$d=this._items[d$b];this._skin&&(d$d.skin=this._skin),this._labelColors&&(d$d.labelColors=this._labelColors),this._labelSize&&(d$d.labelSize=this._labelSize),this._labelStroke&&(d$d.labelStroke=this._labelStroke),this._labelStrokeColor&&(d$d.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(d$d.strokeColors=this._strokeColors),this._labelBold&&(d$d.labelBold=this._labelBold),this._labelPadding&&(d$d.labelPadding=this._labelPadding),this._labelAlign&&(d$d.labelAlign=this._labelAlign),this._stateNum&&(d$d.stateNum=this._stateNum),this._labelFont&&(d$d.labelFont=this._labelFont),"horizontal"===this._direction?(d$d.y=0,d$d.x=d$a,d$a+=d$d.width+this._space):(d$d.x=0,d$d.y=d$a,d$a+=d$d.height+this._space);}this.changeSize();},d$b.commitMeasure=function(){this.runCallLater(this.changeLabels);},d$b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels));},d$i(0,d$b,"labelStrokeColor",function(){return this._labelStrokeColor;},function(d$a){this._labelStrokeColor!=d$a&&(this._labelStrokeColor=d$a,this._setLabelChanged());}),d$i(0,d$b,"skin",function(){return this._skin;},function(d$a){this._skin!=d$a&&(this._skin=d$a,this._setLabelChanged());}),d$i(0,d$b,"selectedIndex",function(){return this._selectedIndex;},function(d$a){this._selectedIndex!=d$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=d$a,this.setSelect(d$a,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex));}),d$i(0,d$b,"labels",function(){return this._labels;},function(d$a){if(this._labels!=d$a){if(this._labels=d$a,this.removeChildren(),this._setLabelChanged(),this._labels)for(var d$b=this._labels.split(","),d$c=0,d$d=d$b.length;d$c<d$d;d$c++){var d$e=this.createItem(this._skin,d$b[d$c]);d$e.name="item"+d$c,this.addChild(d$e);}this.initItems();}}),d$i(0,d$b,"strokeColors",function(){return this._strokeColors;},function(d$a){this._strokeColors!=d$a&&(this._strokeColors=d$a,this._setLabelChanged());}),d$i(0,d$b,"labelColors",function(){return this._labelColors;},function(d$a){this._labelColors!=d$a&&(this._labelColors=d$a,this._setLabelChanged());}),d$i(0,d$b,"labelStroke",function(){return this._labelStroke;},function(d$a){this._labelStroke!=d$a&&(this._labelStroke=d$a,this._setLabelChanged());}),d$i(0,d$b,"labelSize",function(){return this._labelSize;},function(d$a){this._labelSize!=d$a&&(this._labelSize=d$a,this._setLabelChanged());}),d$i(0,d$b,"stateNum",function(){return this._stateNum;},function(d$a){this._stateNum!=d$a&&(this._stateNum=d$a,this._setLabelChanged());}),d$i(0,d$b,"labelBold",function(){return this._labelBold;},function(d$a){this._labelBold!=d$a&&(this._labelBold=d$a,this._setLabelChanged());}),d$i(0,d$b,"labelFont",function(){return this._labelFont;},function(d$a){this._labelFont!=d$a&&(this._labelFont=d$a,this._setLabelChanged());}),d$i(0,d$b,"labelPadding",function(){return this._labelPadding;},function(d$a){this._labelPadding!=d$a&&(this._labelPadding=d$a,this._setLabelChanged());}),d$i(0,d$b,"direction",function(){return this._direction;},function(d$a){this._direction=d$a,this._setLabelChanged();}),d$i(0,d$b,"space",function(){return this._space;},function(d$a){this._space=d$a,this._setLabelChanged();}),d$i(0,d$b,"items",function(){return this._items;}),d$i(0,d$b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null;},function(d$a){this.selectedIndex=this._items.indexOf(d$a);}),d$i(0,d$b,"dataSource",d$a.prototype._$get_dataSource,function(d$a){"number"==typeof(this._dataSource=d$a)&&Math.floor(d$a)==d$a||"string"==typeof d$a?this.selectedIndex=parseInt(d$a):d$a instanceof Array?this.labels=d$a.join(","):d$r.superSet(d$J,this,"dataSource",d$a);}),d$c;}(d$J),d$g=function(d$b){function d$c(d$a,d$b){this._value=null,void 0===d$b&&(d$b=""),d$c.__super.call(this,d$a,d$b);}d$f(d$c,"laya.ui.Radio",d$b);var d$a=d$c.prototype;return d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._value=null;},d$a.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1;},d$a.initialize=function(){d$b.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick);},d$a.onClick=function(d$a){this.selected=!0;},d$i(0,d$a,"value",function(){return null!=this._value?this._value:this.label;},function(d$a){this._value=d$a;}),d$c;}(d$K),d$h=function(d$a){function d$b(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,d$b.__super.call(this),this.width=this.height=200;}d$f(d$b,"laya.ui.Tree",d$a);var d$c=d$b.prototype;return d$r.imps(d$c,{"laya.ui.IRender":!0}),d$c.destroy=function(d$a){void 0===d$a&&(d$a=!0),laya.ui.Component.prototype.destroy.call(this,d$a),this._list&&this._list.destroy(d$a),this._list=null,this._source=null,this._renderHandler=null;},d$c.createChildren=function(){this.addChild(this._list=new d$X()),this._list.renderHandler=d$o.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange);},d$c.onListChange=function(d$a){this.event("change");},d$c.getArray=function(){var d$a,d$b=[];for(var d$c in this._source)d$a=this._source[d$c],this.getParentOpenStatus(d$a)&&(d$a.x=this._spaceLeft*this.getDepth(d$a),d$b.push(d$a));return d$b;},d$c.getDepth=function(d$a,d$b){return void 0===d$b&&(d$b=0),null==d$a.nodeParent?d$b:this.getDepth(d$a.nodeParent,d$b+1);},d$c.getParentOpenStatus=function(d$a){var d$b=d$a.nodeParent;return null==d$b||!!d$b.isOpen&&(null==d$b.nodeParent||this.getParentOpenStatus(d$b));},d$c.renderItem=function(d$a,d$b){var d$c=d$a.dataSource;if(d$c){d$a.left=d$c.x;var d$d=d$a.getChildByName("arrow");d$d&&(d$c.hasChild?(d$d.visible=!0,d$d.index=d$c.isOpen?1:0,d$d.tag=d$b,d$d.off("click",this,this.onArrowClick),d$d.on("click",this,this.onArrowClick)):d$d.visible=!1);var d$e=d$a.getChildByName("folder");d$e&&(2==d$e.clipY?d$e.index=d$c.isDirectory?0:1:d$e.index=d$c.isDirectory?d$c.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([d$a,d$b]);}},d$c.onArrowClick=function(d$a){var d$b=d$a.currentTarget.tag;this._list.array[d$b].isOpen=!this._list.array[d$b].isOpen,this.event("open"),this._list.array=this.getArray();},d$c.setItemState=function(d$a,d$b){this._list.array[d$a]&&(this._list.array[d$a].isOpen=d$b,this._list.array=this.getArray());},d$c.fresh=function(){this._list.array=this.getArray(),this.repaint();},d$c.parseXml=function(d$a,d$b,d$c,d$d){var d$e,d$f=d$a.childNodes,d$i=d$f.length;if(!d$d){d$e={};var d$j,d$k=d$a.attributes;for(var d$l in d$k){var d$m=(d$j=d$k[d$l]).nodeName,d$n=d$j.nodeValue;d$e[d$m]="true"==d$n||"false"!=d$n&&d$n;}d$e.nodeParent=d$c,0<d$i&&(d$e.isDirectory=!0),d$e.hasChild=0<d$i,d$b.push(d$e);}for(var d$o=0;d$o<d$i;d$o++){var d$p=d$f[d$o];this.parseXml(d$p,d$b,d$e,!1);}},d$c.parseOpenStatus=function(d$a,d$b){for(var d$c=0,d$d=d$b.length;d$c<d$d;d$c++){var d$e=d$b[d$c];if(d$e.isDirectory)for(var d$f=0,d$i=d$a.length;d$f<d$i;d$f++){var d$j=d$a[d$f];if(d$j.isDirectory&&this.isSameParent(d$j,d$e)&&d$e.label==d$j.label){d$e.isOpen=d$j.isOpen;break;}}}},d$c.isSameParent=function(d$a,d$b){return null==d$a.nodeParent&&null==d$b.nodeParent||null!=d$a.nodeParent&&null!=d$b.nodeParent&&d$a.nodeParent.label==d$b.nodeParent.label&&this.isSameParent(d$a.nodeParent,d$b.nodeParent);},d$c.filter=function(d$a){if(Boolean(d$a)){var d$b=[];this.getFilterSource(this._source,d$b,d$a),this._list.array=d$b;}else this._list.array=this.getArray();},d$c.getFilterSource=function(d$a,d$b,d$c){var d$d;for(var d$e in d$c=d$c.toLocaleLowerCase(),d$a)!(d$d=d$a[d$e]).isDirectory&&-1<String(d$d.label).toLowerCase().indexOf(d$c)&&(d$d.x=0,d$b.push(d$d)),d$d.child&&0<d$d.child.length&&this.getFilterSource(d$d.child,d$b,d$c);},d$i(0,d$c,"spaceBottom",function(){return this._list.spaceY;},function(d$a){this._list.spaceY=d$a;}),d$i(0,d$c,"keepStatus",function(){return this._keepStatus;},function(d$a){this._keepStatus=d$a;}),d$i(0,d$c,"itemRender",function(){return this._list.itemRender;},function(d$a){this._list.itemRender=d$a;}),d$i(0,d$c,"array",function(){return this._list.array;},function(d$a){this._keepStatus&&this._list.array&&d$a&&this.parseOpenStatus(this._list.array,d$a),this._source=d$a,this._list.array=this.getArray();}),d$i(0,d$c,"mouseHandler",function(){return this._list.mouseHandler;},function(d$a){this._list.mouseHandler=d$a;}),d$i(0,d$c,"dataSource",d$a.prototype._$get_dataSource,function(d$a){this._dataSource=d$a,d$r.superSet(d$J,this,"dataSource",d$a);}),d$i(0,d$c,"source",function(){return this._source;}),d$i(0,d$c,"scrollBar",function(){return this._list.scrollBar;}),d$i(0,d$c,"list",function(){return this._list;}),d$i(0,d$c,"scrollBarSkin",function(){return this._list.vScrollBarSkin;},function(d$a){this._list.vScrollBarSkin=d$a;}),d$i(0,d$c,"renderHandler",function(){return this._renderHandler;},function(d$a){this._renderHandler=d$a;}),d$i(0,d$c,"selectedIndex",function(){return this._list.selectedIndex;},function(d$a){this._list.selectedIndex=d$a;}),d$i(0,d$c,"spaceLeft",function(){return this._spaceLeft;},function(d$a){this._spaceLeft=d$a;}),d$i(0,d$c,"selectedItem",function(){return this._list.selectedItem;},function(d$a){this._list.selectedItem=d$a;}),d$i(0,d$c,"width",d$a.prototype._$get_width,function(d$a){d$r.superSet(d$J,this,"width",d$a),this._list.width=d$a;}),d$i(0,d$c,"height",d$a.prototype._$get_height,function(d$a){d$r.superSet(d$J,this,"height",d$a),this._list.height=d$a;}),d$i(0,d$c,"xml",null,function(d$a){var d$b=[];this.parseXml(d$a.childNodes[0],d$b,null,!0),this.array=d$b;}),d$i(0,d$c,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null;}),d$b;}(d$J),d$aa=function(d$a){function d$b(){this._items=null,this._selectedIndex=0,d$b.__super.call(this),this._setIndexHandler=d$o.create(this,this.setIndex,null,!1);}d$f(d$b,"laya.ui.ViewStack",d$a);var d$c=d$b.prototype;return d$r.imps(d$c,{"laya.ui.IItem":!0}),d$c.setItems=function(d$a){this.removeChildren();for(var d$b=0,d$c=0,d$d=d$a.length;d$c<d$d;d$c++){var d$e=d$a[d$c];d$e&&(d$e.name="item"+d$b,this.addChild(d$e),d$b++);}this.initItems();},d$c.addItem=function(d$a){d$a.name="item"+this._items.length,this.addChild(d$a),this.initItems();},d$c.initItems=function(){this._items=[];for(var d$a=0;d$a<1e4;d$a++){var d$b=this.getChildByName("item"+d$a);if(null==d$b)break;this._items.push(d$b),d$b.visible=d$a==this._selectedIndex;}},d$c.setSelect=function(d$a,d$b){this._items&&-1<d$a&&d$a<this._items.length&&(this._items[d$a].visible=d$b);},d$c.setIndex=function(d$a){this.selectedIndex=d$a;},d$i(0,d$c,"dataSource",d$a.prototype._$get_dataSource,function(d$a){if("number"==typeof(this._dataSource=d$a)&&Math.floor(d$a)==d$a||"string"==typeof d$a)this.selectedIndex=parseInt(d$a);else for(var d$b in this._dataSource)this.hasOwnProperty(d$b)&&(this[d$b]=this._dataSource[d$b]);}),d$i(0,d$c,"selectedIndex",function(){return this._selectedIndex;},function(d$a){this._selectedIndex!=d$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=d$a,this.setSelect(this._selectedIndex,!0));}),d$i(0,d$c,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null;},function(d$a){this.selectedIndex=this._items.indexOf(d$a);}),d$i(0,d$c,"items",function(){return this._items;}),d$i(0,d$c,"setIndexHandler",function(){return this._setIndexHandler;},function(d$a){this._setIndexHandler=d$a;}),d$b;}(d$J),d$ba=function(d$a){function d$b(){d$b.__super.call(this);}return d$f(d$b,"laya.ui.VScrollBar",d$O),d$b;}(),d$ca=function(d$b){function d$c(d$a){this._bg=null,this._skin=null,d$c.__super.call(this),void 0===d$a&&(d$a=""),this.text=d$a,this.skin=this.skin;}d$f(d$c,"laya.ui.TextInput",d$b);var d$a=d$c.prototype;return d$a.preinitialize=function(){this.mouseEnabled=!0;},d$a.destroy=function(d$a){d$u.clearCache(this,this._skin),void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._bg&&this._bg.destroy(),this._bg=null;},d$a.createChildren=function(){this.addChild(this._tf=new d$p()),this._tf.padding=d$D.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus);},d$a._onFocus=function(){this.event("focus",this);},d$a._onBlur=function(){this.event("blur",this);},d$a._onInput=function(){this.event("input",this);},d$a._onEnter=function(){this.event("enter",this);},d$a.initialize=function(){this.width=128,this.height=22;},d$a.select=function(){this._tf.select();},d$a.setSelection=function(d$a,d$b){this._tf.setSelection(d$a,d$b);},d$i(0,d$a,"text",d$b.prototype._$get_text,function(d$a){this._tf.text!=d$a&&(d$a+="",this._tf.text=d$a,this.event("change"));}),d$i(0,d$a,"bg",function(){return this._bg;},function(d$a){this.graphics=this._bg=d$a;}),d$i(0,d$a,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster;},function(d$a){this._tf.inputElementYAdjuster=d$a;}),d$i(0,d$a,"multiline",function(){return this._tf.multiline;},function(d$a){this._tf.multiline=d$a;}),d$i(0,d$a,"skin",function(){return this._skin;},function(d$a){this._skin!=d$a&&(d$u.clearCache(this,this._skin),this._skin=d$a,this._bg||(this.graphics=this._bg=new d$G()),d$u.keepCache(this,this._skin),this._bg.source=d$u.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height));}),d$i(0,d$a,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null;},function(d$a){this._bg||(this.graphics=this._bg=new d$G()),this._bg.sizeGrid=d$E.fillArray(d$D.defaultSizeGrid,d$a,Number);}),d$i(0,d$a,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster;},function(d$a){this._tf.inputElementXAdjuster=d$a;}),d$i(0,d$a,"width",d$b.prototype._$get_width,function(d$a){d$r.superSet(d$R,this,"width",d$a),this._bg&&(this._bg.width=d$a);}),d$i(0,d$a,"height",d$b.prototype._$get_height,function(d$a){d$r.superSet(d$R,this,"height",d$a),this._bg&&(this._bg.height=d$a);}),d$i(0,d$a,"editable",function(){return this._tf.editable;},function(d$a){this._tf.editable=d$a;}),d$i(0,d$a,"restrict",function(){return this._tf.restrict;},function(d$a){this._tf.restrict=d$a;}),d$i(0,d$a,"prompt",function(){return this._tf.prompt;},function(d$a){this._tf.prompt=d$a;}),d$i(0,d$a,"promptColor",function(){return this._tf.promptColor;},function(d$a){this._tf.promptColor=d$a;}),d$i(0,d$a,"maxChars",function(){return this._tf.maxChars;},function(d$a){this._tf.maxChars=d$a;}),d$i(0,d$a,"focus",function(){return this._tf.focus;},function(d$a){this._tf.focus=d$a;}),d$i(0,d$a,"type",function(){return this._tf.type;},function(d$a){this._tf.type=d$a;}),d$i(0,d$a,"asPassword",function(){return this._tf.asPassword;},function(d$a){this._tf.asPassword=d$a;}),d$c;}(d$R),d$da=function(d$a){function d$b(){d$b.__super.call(this);}return d$f(d$b,"laya.ui.VSlider",d$P),d$b;}(),d$ea=function(d$a){function d$d(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,d$d.__super.call(this);}d$f(d$d,"laya.ui.Dialog",d$a);var d$b=d$d.prototype;return d$b.initialize=function(){this.popupEffect=d$d.manager.popupEffectHandler,this.closeEffect=d$d.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick);},d$b._dealDragArea=function(){var d$a=this.getChildByName("drag");d$a&&(this.dragArea=d$a.x+","+d$a.y+","+d$a.width+","+d$a.height,d$a.removeSelf());},d$b._onClick=function(d$a){var d$b=d$a.target;if(d$b)switch(d$b.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(d$b.name);}},d$b.show=function(d$a,d$b){void 0===d$a&&(d$a=!1),void 0===d$b&&(d$b=!0),this._open(!1,d$a,d$b);},d$b.popup=function(d$a,d$b){void 0===d$a&&(d$a=!1),void 0===d$b&&(d$b=!0),this._open(!0,d$a,d$b);},d$b._open=function(d$a,d$b,d$c){d$d.manager.lock(!1),this.isModal=d$a,d$d.manager.open(this,d$b,d$c);},d$b.onOpened=function(){},d$b.close=function(d$a,d$b){void 0===d$b&&(d$b=!0),d$d.manager.close(this,d$a,d$b);},d$b.onClosed=function(d$a){},d$b._onMouseDown=function(d$a){var d$b=this.getMousePoint();this._dragArea.contains(d$b.x,d$b.y)?this.startDrag():this.stopDrag();},d$i(0,d$b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null;},function(d$a){if(d$a){var d$b=d$E.fillArray([0,0,0,0],d$a,Number);this._dragArea=new d$t(d$b[0],d$b[1],d$b[2],d$b[3]),this.on("mousedown",this,this._onMouseDown);}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown);}),d$i(0,d$b,"isPopup",function(){return null!=this.parent;}),d$i(0,d$b,"zOrder",d$a.prototype._$get_zOrder,function(d$a){d$r.superSet(d$T,this,"zOrder",d$a),d$d.manager._checkMask();}),d$i(1,d$d,"manager",function(){return d$d._manager=d$d._manager||new d$I();},function(d$a){d$d._manager=d$a;}),d$d.setLockView=function(d$a){d$d.manager.setLockView(d$a);},d$d.lock=function(d$a){d$d.manager.lock(d$a);},d$d.closeAll=function(){d$d.manager.closeAll();},d$d.getDialogsByGroup=function(d$a){return d$d.manager.getDialogsByGroup(d$a);},d$d.closeByGroup=function(d$a){return d$d.manager.closeByGroup(d$a);},d$d.CLOSE="close",d$d.CANCEL="cancel",d$d.SURE="sure",d$d.NO="no",d$d.OK="ok",d$d.YES="yes",d$d._manager=null,d$d;}(d$T),d$fa=function(d$a){function d$b(){d$b.__super.call(this);}d$f(d$b,"laya.ui.HBox",d$a);var d$c=d$b.prototype;return d$c.sortItem=function(d$a){d$a&&d$a.sort(function(d$a,d$b){return d$a.x-d$b.x;});},d$c.changeItems=function(){this._itemChanged=!1;for(var d$a=[],d$b=0,d$c=0,d$d=this.numChildren;d$c<d$d;d$c++){var d$e=this.getChildAt(d$c);d$e&&d$e.layoutEnabled&&(d$a.push(d$e),d$b=this._height?this._height:Math.max(d$b,d$e.height*d$e.scaleY));}this.sortItem(d$a);var d$f=0;for(d$c=0,d$d=d$a.length;d$c<d$d;d$c++)(d$e=d$a[d$c]).x=d$f,d$f+=d$e.width*d$e.scaleX+this._space,"top"==this._align?d$e.y=0:"middle"==this._align?d$e.y=.5*(d$b-d$e.height*d$e.scaleY):"bottom"==this._align&&(d$e.y=d$b-d$e.height*d$e.scaleY);this.changeSize();},d$i(0,d$c,"height",d$a.prototype._$get_height,function(d$a){this._height!=d$a&&(d$r.superSet(d$V,this,"height",d$a),this.callLater(this.changeItems));}),d$b.NONE="none",d$b.TOP="top",d$b.MIDDLE="middle",d$b.BOTTOM="bottom",d$b;}(d$V),d$ia=function(d$a){function d$b(){d$b.__super.call(this);}d$f(d$b,"laya.ui.VBox",d$a);var d$c=d$b.prototype;return d$c.changeItems=function(){this._itemChanged=!1;for(var d$a=[],d$b=0,d$c=0,d$d=this.numChildren;d$c<d$d;d$c++){var d$e=this.getChildAt(d$c);d$e&&d$e.layoutEnabled&&(d$a.push(d$e),d$b=this._width?this._width:Math.max(d$b,d$e.width*d$e.scaleX));}this.sortItem(d$a);var d$f=0;for(d$c=0,d$d=d$a.length;d$c<d$d;d$c++)(d$e=d$a[d$c]).y=d$f,d$f+=d$e.height*d$e.scaleY+this._space,"left"==this._align?d$e.x=0:"center"==this._align?d$e.x=.5*(d$b-d$e.width*d$e.scaleX):"right"==this._align&&(d$e.x=d$b-d$e.width*d$e.scaleX);this.changeSize();},d$i(0,d$c,"width",d$a.prototype._$get_width,function(d$a){this._width!=d$a&&(d$r.superSet(d$V,this,"width",d$a),this.callLater(this.changeItems));}),d$b.NONE="none",d$b.LEFT="left",d$b.CENTER="center",d$b.RIGHT="right",d$b;}(d$V),d$ja=function(d$a){function d$b(){d$b.__super.call(this);}return d$f(d$b,"laya.ui.RadioGroup",d$_),d$b.prototype.createItem=function(d$a,d$b){return new d$g(d$a,d$b);},d$b;}(),d$ka=function(d$a){function d$b(){d$b.__super.call(this);}return d$f(d$b,"laya.ui.Tab",d$_),d$b.prototype.createItem=function(d$a,d$b){return new d$K(d$a,d$b);},d$b;}(),d$la=function(d$b){function d$c(d$a){this._vScrollBar=null,this._hScrollBar=null,void 0===d$a&&(d$a=""),d$c.__super.call(this,d$a);}d$f(d$c,"laya.ui.TextArea",d$b);var d$a=d$c.prototype;return d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null;},d$a.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0;},d$a.onVBarChanged=function(d$a){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value);},d$a.onHBarChanged=function(d$a){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value);},d$a.changeScroll=function(){var d$a=this._vScrollBar&&0<this._tf.maxScrollY,d$b=this._hScrollBar&&0<this._tf.maxScrollX,d$c=d$a?this._width-this._vScrollBar.width:this._width,d$d=d$b?this._height-this._hScrollBar.height:this._height,d$e=this._tf.padding||d$D.labelPadding;this._tf.width=d$c,this._tf.height=d$d,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-d$e[2],this._vScrollBar.y=d$e[1],this._vScrollBar.height=this._height-(d$b?this._hScrollBar.height:0)-d$e[1]-d$e[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=d$d/Math.max(this._tf.textHeight,d$d),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=d$a),this._hScrollBar&&(this._hScrollBar.x=d$e[0],this._hScrollBar.y=this._height-this._hScrollBar.height-d$e[3],this._hScrollBar.width=this._width-(d$a?this._vScrollBar.width:0)-d$e[0]-d$e[2],this._hScrollBar.scrollSize=Math.max(.033*d$c,1),this._hScrollBar.thumbPercent=d$c/Math.max(this._tf.textWidth,d$c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=d$b);},d$a.scrollTo=function(d$a){this.commitMeasure(),this._tf.scrollY=d$a;},d$i(0,d$a,"scrollY",function(){return this._tf.scrollY;}),d$i(0,d$a,"width",d$b.prototype._$get_width,function(d$a){d$r.superSet(d$ca,this,"width",d$a),this.callLater(this.changeScroll);}),d$i(0,d$a,"hScrollBar",function(){return this._hScrollBar;}),d$i(0,d$a,"height",d$b.prototype._$get_height,function(d$a){d$r.superSet(d$ca,this,"height",d$a),this.callLater(this.changeScroll);}),d$i(0,d$a,"maxScrollX",function(){return this._tf.maxScrollX;}),d$i(0,d$a,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null;},function(d$a){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new d$ba()),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=d$a;}),d$i(0,d$a,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null;},function(d$a){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new d$Y()),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=d$a;}),d$i(0,d$a,"vScrollBar",function(){return this._vScrollBar;}),d$i(0,d$a,"maxScrollY",function(){return this._tf.maxScrollY;}),d$i(0,d$a,"scrollX",function(){return this._tf.scrollX;}),d$c;}(d$ca);!function(d$a){function d$b(){this._uiView=null,this.isCloseOther=!1,d$b.__super.call(this);}d$f(d$b,"laya.ui.AsynDialog",d$ea);var d$c=d$b.prototype;d$c.createView=function(d$a){this._uiView=d$a;},d$c._open=function(d$a,d$b,d$c){this.isModal=d$a,this.isCloseOther=d$b,d$ea.manager.lock(!0),this._uiView?this.onCreated():this.onOpen();},d$c.onCreated=function(){this.createUI(),this.onOpen();},d$c.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea();},d$c.onOpen=function(){d$ea.manager.open(this,this.isCloseOther),d$ea.manager.lock(!1);},d$c.close=function(d$a,d$b){void 0===d$b&&(d$b=!0),d$ea.manager.close(this),this.onClose();},d$c.onClose=function(){},d$c.destroy=function(d$a){void 0===d$a&&(d$a=!0),laya.ui.View.prototype.destroy.call(this,d$a),this._uiView=null,this.onDestroy();},d$c.onDestroy=function(){};}();d$r.__init([d$T]);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(d$a,d$b){"use strict";for(var d$c in Object.defineProperty(d$b,"__esModule",{value:!0}),Laya){var d$d=Laya[d$c];d$d&&d$d.__isclass&&(d$b[d$c]=d$d);}}),function(d$o,d$a,d$x){d$x.un,d$x.uns;var d$n=d$x.static,d$p=d$x.class,d$q=d$x.getset,d$d=d$x.__newvec,d$w=laya.maths.Arith,d$i=laya.webgl.atlas.AtlasResourceManager,d$c=laya.webgl.shader.BaseShader,d$H=laya.utils.Browser,d$j=laya.webgl.utils.Buffer,d$y=laya.utils.Byte,d$e=laya.utils.ClassUtils,d$k=d$x.Config,d$f=(laya.events.Event,laya.events.EventDispatcher),d$D=laya.utils.Handler,d$t=laya.net.Loader,d$b=laya.net.LoaderManager,d$l=(laya.maths.MathUtil,laya.display.Node),d$r=laya.renders.Render,d$m=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),d$s=laya.resource.Resource,d$u=laya.utils.RunDriver,d$v=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),d$z=laya.display.Sprite,d$A=laya.utils.Stat,d$B=laya.utils.StringKey,d$E=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),d$C=laya.utils.Utils,d$F=laya.webgl.WebGL,d$G=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;d$x.interface("laya.d3.core.IClone"),d$x.interface("laya.d3.graphics.IVertex"),d$x.interface("laya.d3.core.render.IUpdate"),d$x.interface("laya.d3.core.scene.ITreeNode"),d$x.interface("laya.d3.core.render.IRenderable");(function(){function d$K(){}d$p(d$K,"laya.d3.animation.AnimationClipParser01"),d$K.READ_DATA=function(){d$K._DATA.offset=d$K._reader.getUint32(),d$K._DATA.size=d$K._reader.getUint32();},d$K.READ_BLOCK=function(){for(var d$a=d$K._BLOCK.count=d$K._reader.getUint16(),d$b=d$K._BLOCK.blockStarts=[],d$c=d$K._BLOCK.blockLengths=[],d$d=0;d$d<d$a;d$d++)d$b.push(d$K._reader.getUint32()),d$c.push(d$K._reader.getUint32());},d$K.READ_STRINGS=function(){var d$a=d$K._reader.getUint32(),d$b=d$K._reader.getUint16(),d$c=d$K._reader.pos;d$K._reader.pos=d$a+d$K._DATA.offset;for(var d$d=0;d$d<d$b;d$d++)d$K._strings[d$d]=d$K._reader.readUTFString();d$K._reader.pos=d$c;},d$K.parse=function(d$a,d$b){d$K._animationClip=d$a;(d$K._reader=d$b).__getBuffer();d$K.READ_DATA(),d$K.READ_BLOCK(),d$K.READ_STRINGS();for(var d$c=0,d$d=d$K._BLOCK.count;d$c<d$d;d$c++){var d$e=d$b.getUint16(),d$f=d$K._strings[d$e],d$i=d$K["READ_"+d$f];if(null==d$i)throw new Error("model file err,no this function:"+d$e+" "+d$f);d$i.call();}},d$K.READ_ANIMATIONS=function(){var d$a,d$b=0,d$c=0,d$d=d$K._reader,d$e=d$d.__getBuffer(),d$f=[],d$i=d$d.getUint8();for(d$f.length=d$i,d$b=0;d$b<d$i;d$b++)d$f[d$b]=d$d.getUint16();var d$j=[],d$k=d$d.getUint16();for(d$j.length=d$k,d$b=0;d$b<d$k;d$b++)d$j[d$b]=d$d.getFloat32();var d$l=d$K._animationClip;d$l.name=d$K._strings[d$d.getUint16()];var d$m=d$l._duration=d$d.getFloat32();d$l.islooping=!!d$d.getByte(),d$l._frameRate=d$d.getInt16();var d$n=d$d.getInt16(),d$o=d$l._nodes=new Array();d$o.length=d$n,(d$l._publicClipDatas=[]).length=d$n;var d$p=d$l._nodesMap={},d$q=0,d$r=0;for(d$b=0;d$b<d$n;d$b++){d$a=d$o[d$b]=new d$S();var d$s=d$d.getUint16(),d$t=d$a.path=[];for(d$t.length=d$s,d$c=0;d$c<d$s;d$c++)d$t[d$c]=d$K._strings[d$d.getUint16()];var d$u=d$t.join("/"),d$v=d$p[d$u];d$v||(d$p[d$u]=d$v=[]),d$v.push(d$a);var d$w=d$d.getInt16();-1!==d$w&&(d$a.componentType=d$K._strings[d$w]);var d$x=d$Q._propertyIndexDic[d$K._strings[d$d.getUint16()]];if(null==d$x)throw new Error("AnimationClipParser01:unknown property name.");var d$y=d$x<4,d$z=!d$y||d$y&&""===d$t[0];(d$a._cacheProperty=d$z)?d$q++:d$r++,d$a.propertyNameID=d$x;var d$A=d$f[d$d.getUint8()];d$a.keyFrameWidth=d$A/4;var d$B=d$a.keyFrames=[],d$C=d$B.length=d$d.getUint16(),d$D=null,d$E=NaN;for(d$c=0;d$c<d$C;d$c++){var d$F=d$B[d$c]=new d$R();d$E=d$F.startTime=d$j[d$d.getUint16()];var d$G=d$d.pos;d$F.inTangent=new Float32Array(d$e.slice(d$G,d$G+d$A)),d$d.pos+=d$A,d$G=d$d.pos,d$F.outTangent=new Float32Array(d$e.slice(d$G,d$G+d$A)),d$d.pos+=d$A,d$G=d$d.pos,d$F.data=new Float32Array(d$e.slice(d$G,d$G+d$A)),d$d.pos+=d$A,d$D&&(d$D.next=d$F,d$D.duration=d$E-d$D.startTime),d$D=d$F;}d$F.next=null,d$F.duration=d$m-d$E;}var d$H=d$l._nodeToCachePropertyMap=new Int32Array(d$n),d$I=d$l._cachePropertyMap=new Int32Array(d$q),d$J=d$l._unCachePropertyMap=new Int32Array(d$r);for(d$q=d$r=0,d$b=0;d$b<d$n;d$b++)(d$a=d$o[d$b])._cacheProperty?(d$H[d$b]=d$q,d$I[d$q++]=d$b):d$J[d$r++]=d$b;},d$K._animationClip=null,d$K._reader=null,d$K._strings=[],d$n(d$K,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]);})(),function(){function d$O(){}d$p(d$O,"laya.d3.animation.AnimationClipParser02"),d$O.READ_DATA=function(){d$O._DATA.offset=d$O._reader.getUint32(),d$O._DATA.size=d$O._reader.getUint32();},d$O.READ_BLOCK=function(){for(var d$a=d$O._BLOCK.count=d$O._reader.getUint16(),d$b=d$O._BLOCK.blockStarts=[],d$c=d$O._BLOCK.blockLengths=[],d$d=0;d$d<d$a;d$d++)d$b.push(d$O._reader.getUint32()),d$c.push(d$O._reader.getUint32());},d$O.READ_STRINGS=function(){var d$a=d$O._reader.getUint32(),d$b=d$O._reader.getUint16(),d$c=d$O._reader.pos;d$O._reader.pos=d$a+d$O._DATA.offset;for(var d$d=0;d$d<d$b;d$d++)d$O._strings[d$d]=d$O._reader.readUTFString();d$O._reader.pos=d$c;},d$O.parse=function(d$a,d$b){d$O._animationClip=d$a;(d$O._reader=d$b).__getBuffer();d$O.READ_DATA(),d$O.READ_BLOCK(),d$O.READ_STRINGS();for(var d$c=0,d$d=d$O._BLOCK.count;d$c<d$d;d$c++){var d$e=d$b.getUint16(),d$f=d$O._strings[d$e],d$i=d$O["READ_"+d$f];if(null==d$i)throw new Error("model file err,no this function:"+d$e+" "+d$f);d$i.call();}},d$O.READ_ANIMATIONS=function(){var d$a,d$b=0,d$c=0,d$d=d$O._reader,d$e=d$d.__getBuffer(),d$f=[],d$i=d$d.getUint8();for(d$f.length=d$i,d$b=0;d$b<d$i;d$b++)d$f[d$b]=d$d.getUint16();var d$j=[],d$k=d$d.getUint16();for(d$j.length=d$k,d$b=0;d$b<d$k;d$b++)d$j[d$b]=d$d.getFloat32();var d$l=d$O._animationClip;d$l.name=d$O._strings[d$d.getUint16()];var d$m=d$l._duration=d$d.getFloat32();d$l.islooping=!!d$d.getByte(),d$l._frameRate=d$d.getInt16();var d$n=d$d.getInt16(),d$o=d$l._nodes=new Array();d$o.length=d$n,(d$l._publicClipDatas=[]).length=d$n;var d$p=d$l._nodesMap={},d$q=0,d$r=0;for(d$b=0;d$b<d$n;d$b++){d$a=d$o[d$b]=new d$S();var d$s=d$d.getUint16(),d$t=d$a.path=[];for(d$t.length=d$s,d$c=0;d$c<d$s;d$c++)d$t[d$c]=d$O._strings[d$d.getUint16()];var d$u=d$t.join("/"),d$v=d$p[d$u];d$v||(d$p[d$u]=d$v=[]),d$v.push(d$a);var d$w=d$d.getInt16();-1!==d$w&&(d$a.componentType=d$O._strings[d$w]);var d$x=d$Q._propertyIndexDic[d$O._strings[d$d.getUint16()]];if(null==d$x)throw new Error("AnimationClipParser02:unknown property name.");var d$y=d$x<4,d$z=!d$y||d$y&&""===d$t[0];(d$a._cacheProperty=d$z)?d$q++:d$r++,d$a.propertyNameID=d$x;var d$A=d$f[d$d.getUint8()];d$a.keyFrameWidth=d$A/4;var d$B=d$a.keyFrames=[],d$C=d$B.length=d$d.getUint16(),d$D=null,d$E=NaN;for(d$c=0;d$c<d$C;d$c++){var d$F=d$B[d$c]=new d$R();d$E=d$F.startTime=d$j[d$d.getUint16()];var d$G=d$d.pos;d$F.inTangent=new Float32Array(d$e.slice(d$G,d$G+d$A)),d$d.pos+=d$A,d$G=d$d.pos,d$F.outTangent=new Float32Array(d$e.slice(d$G,d$G+d$A)),d$d.pos+=d$A,d$G=d$d.pos,d$F.data=new Float32Array(d$e.slice(d$G,d$G+d$A)),d$d.pos+=d$A,d$D&&(d$D.next=d$F,d$D.duration=d$E-d$D.startTime),d$D=d$F;}d$F.next=null,d$F.duration=d$m-d$E;}var d$H=d$d.getUint16();for(d$b=0;d$b<d$H;d$b++){var d$I,d$J=new d$P();d$J.time=d$d.getFloat32(),d$J.eventName=d$O._strings[d$d.getUint16()];var d$K=d$d.getUint16();for(0<d$K&&(d$J.params=d$I=[]),d$c=0;d$c<d$K;d$c++){switch(d$d.getByte()){case 0:d$I.push(!!d$d.getByte());break;case 1:d$I.push(d$d.getInt32());break;case 2:d$I.push(d$d.getFloat32());break;case 3:d$I.push(d$O._strings[d$d.getUint16()]);break;default:throw new Error("unknown type.");}}d$l.addEvent(d$J);}var d$L=d$l._nodeToCachePropertyMap=new Int32Array(d$n),d$M=d$l._cachePropertyMap=new Int32Array(d$q),d$N=d$l._unCachePropertyMap=new Int32Array(d$r);for(d$q=d$r=0,d$b=0;d$b<d$n;d$b++)(d$a=d$o[d$b])._cacheProperty?(d$L[d$b]=d$q,d$M[d$q++]=d$b):d$N[d$r++]=d$b;},d$O._animationClip=null,d$O._reader=null,d$O._strings=[],d$n(d$O,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]);}();var d$P=function(){function d$a(){this.time=NaN,this.eventName=null,this.params=null;}return d$p(d$a,"laya.d3.animation.AnimationEvent"),d$a;}(),d$Q=function(){function d$d(){this._childs=[],this.transform=new d$ub(this);}d$p(d$d,"laya.d3.animation.AnimationNode");var d$a=d$d.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.addChild=function(d$a){d$a._parent=this,d$a.transform.setParent(this.transform),this._childs.push(d$a);},d$a.removeChild=function(d$a){var d$b=this._childs.indexOf(d$a);-1!==d$b&&this._childs.splice(d$b,1);},d$a.getChildByName=function(d$a){for(var d$b=0,d$c=this._childs.length;d$b<d$c;d$b++){var d$d=this._childs[d$b];if(d$d.name===d$a)return d$d;}return null;},d$a.getChildByIndex=function(d$a){return this._childs[d$a];},d$a.getChildCount=function(){return this._childs.length;},d$a.cloneTo=function(d$a){var d$b=d$a;d$b.name=this.name;for(var d$c=0,d$d=this._childs.length;d$c<d$d;d$c++){var d$e=this._childs[d$c],d$f=d$e.clone();d$b.addChild(d$f);var d$i=d$e.transform,d$j=d$f.transform;d$j.setLocalPosition(d$i.getLocalPosition()),d$j.setLocalRotation(d$i.getLocalRotation()),d$j.setLocalScale(d$i.getLocalScale()),d$j._localRotationEuler=d$i._localRotationEuler,d$j._setWorldMatrixIgnoreUpdate(d$i.getWorldMatrix());}},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$d.__init__=function(){d$d.registerAnimationNodeProperty("localPosition",d$d._getLocalPosition,d$d._setLocalPosition),d$d.registerAnimationNodeProperty("localRotation",d$d._getLocalRotation,d$d._setLocalRotation),d$d.registerAnimationNodeProperty("localScale",d$d._getLocalScale,d$d._setLocalScale),d$d.registerAnimationNodeProperty("localRotationEuler",d$d._getLocalRotationEuler,d$d._setLocalRotationEuler),d$d.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",d$d._getParticleRenderSharedMaterialTintColor,d$d._setParticleRenderSharedMaterialTintColor),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",d$d._getMeshRenderSharedMaterialTilingOffset,d$d._setMeshRenderSharedMaterialTilingOffset),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",d$d._getMeshRenderSharedMaterialAlbedo,d$d._setMeshRenderSharedMaterialAlbedo),d$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",d$d._getSkinnedMeshRenderSharedMaterialTilingOffset,d$d._setSkinnedMeshRenderSharedMaterialTilingOffset),d$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",d$d._getSkinnedMeshRenderSharedMaterialAlbedo,d$d._setSkinnedMeshRenderSharedMaterialAlbedo),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",d$d._getMeshRenderSharedMaterialAlbedo,d$d._setMeshRenderSharedMaterialAlbedo),d$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",d$d._getSkinnedMeshRenderSharedMaterialAlbedo,d$d._setSkinnedMeshRenderSharedMaterialAlbedo),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",d$d._getMeshRenderSharedMaterialIntensity,d$d._setMeshRenderSharedMaterialIntensity),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",d$d._getMeshRenderSharedMaterialAlpha,d$d._setMeshRenderSharedMaterialAlpha),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",d$d._getMeshRenderSharedMaterialAlphaColor,d$d._setMeshRenderSharedMaterialAlphaColor),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",d$d._getMeshRenderSharedMaterialBaseColor,d$d._setMeshRenderSharedMaterialBaseColor),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",d$d._getMeshRenderSharedMaterialDissolve,d$d._setMeshRenderSharedMaterialDissolve),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",d$d._getMeshRenderSharedMaterialDissolveSpeed,d$d._setMeshRenderSharedMaterialDissolveSpeed),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",d$d._getMeshRenderSharedMaterialMMultiplier,d$d._setMeshRenderSharedMaterialMMultiplier),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",d$d._getMeshRenderSharedMaterialBaseScrollSpeedX,d$d._setMeshRenderSharedMaterialBaseScrollSpeedX),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",d$d._getMeshRenderSharedMaterialBaseScrollSpeedY,d$d._setMeshRenderSharedMaterialBaseScrollSpeedY),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",d$d._getMeshRenderSharedMaterialSecondScrollSpeedX,d$d._setMeshRenderSharedMaterialSecondScrollSpeedX),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",d$d._getMeshRenderSharedMaterialSecondScrollSpeedY,d$d._setMeshRenderSharedMaterialSecondScrollSpeedY),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",d$d._getMeshRenderSharedMaterialDetailTilingOffset,d$d._setMeshRenderSharedMaterialDetailTilingOffset),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",d$d._getMeshRenderSharedMaterialDissolveTilingOffset,d$d._setMeshRenderSharedMaterialDissolveTilingOffset),d$d.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",d$d._getMeshRenderSharedMaterialMaskTilingOffset,d$d._setMeshRenderSharedMaterialMaskTilingOffset);},d$d.registerAnimationNodeProperty=function(d$a,d$b,d$c){if(d$d._propertyIndexDic[d$a])throw new Error("AnimationNode: this propertyName has registered.");d$d._propertyIndexDic[d$a]=d$d._propertyIDCounter,d$d._propertyGetFuncs[d$d._propertyIDCounter]=d$b,d$d._propertySetFuncs[d$d._propertyIDCounter]=d$c,d$d._propertyIDCounter++;},d$d._getLocalPosition=function(d$a,d$b){return d$a?d$a.transform.getLocalPosition():d$b._transform.localPosition.elements;},d$d._setLocalPosition=function(d$a,d$b,d$c){if(d$a)d$a.transform.setLocalPosition(d$c);else{var d$d=d$b._transform,d$e=d$d.localPosition;d$e.elements=d$c,d$d.localPosition=d$e;}},d$d._getLocalRotation=function(d$a,d$b){return d$a?d$a.transform.getLocalRotation():d$b._transform.localRotation.elements;},d$d._setLocalRotation=function(d$a,d$b,d$c){if(d$a)d$a.transform.setLocalRotation(d$c);else{var d$d=d$b._transform,d$e=d$d.localRotation;d$e.elements=d$c,d$d.localRotation=d$e;}},d$d._getLocalScale=function(d$a,d$b){return d$a?d$a.transform.getLocalScale():d$b._transform.localScale.elements;},d$d._setLocalScale=function(d$a,d$b,d$c){if(d$a)d$a.transform.setLocalScale(d$c);else{var d$d=d$b._transform,d$e=d$d.localScale;d$e.elements=d$c,d$d.localScale=d$e;}},d$d._getLocalRotationEuler=function(d$a,d$b){return d$a?d$a.transform.getLocalRotationEuler():d$b._transform.localRotationEuler.elements;},d$d._setLocalRotationEuler=function(d$a,d$b,d$c){if(d$a)d$a.transform.setLocalRotationEuler(d$c);else{var d$d=d$b._transform,d$e=d$d.localRotationEuler;d$e.elements=d$c,d$d.localRotationEuler=d$e;}},d$d._getMeshRenderSharedMaterialTilingOffset=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.tilingOffset.elements:null;}return d$b.meshRender.sharedMaterial.tilingOffset.elements;},d$d._setMeshRenderSharedMaterialTilingOffset=function(d$a,d$b,d$c){var d$d,d$e;if(d$a){var d$f=d$a.transform._entity;d$f&&((d$e=(d$d=d$f.owner.meshRender.material).tilingOffset).elements=d$c,d$d.tilingOffset=d$e);}else(d$e=(d$d=d$b.meshRender.material).tilingOffset).elements=d$c,d$d.tilingOffset=d$e;},d$d._getMeshRenderSharedMaterialAlbedo=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.albedoColor.elements:null;}return d$b.meshRender.sharedMaterial.albedoColor.elements;},d$d._setMeshRenderSharedMaterialAlbedo=function(d$a,d$b,d$c){var d$d,d$e;if(d$a){var d$f=d$a.transform._entity;d$f&&((d$e=(d$d=d$f.owner.meshRender.material).albedoColor).elements=d$c,d$d.albedoColor=d$e);}else(d$e=(d$d=d$b.meshRender.material).albedoColor).elements=d$c,d$d.albedoColor=d$e;},d$d._getSkinnedMeshRenderSharedMaterialTilingOffset=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null;}return d$b.skinnedMeshRender.sharedMaterial.tilingOffset.elements;},d$d._setSkinnedMeshRenderSharedMaterialTilingOffset=function(d$a,d$b,d$c){var d$d,d$e;if(d$a){var d$f=d$a.transform._entity;d$f&&((d$e=(d$d=d$f.owner.skinnedMeshRender.material).tilingOffset).elements=d$c,d$d.tilingOffset=d$e);}else(d$e=(d$d=d$b.skinnedMeshRender.material).tilingOffset).elements=d$c,d$d.tilingOffset=d$e;},d$d._getSkinnedMeshRenderSharedMaterialAlbedo=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null;}return d$b.skinnedMeshRender.sharedMaterial.albedoColor.elements;},d$d._setSkinnedMeshRenderSharedMaterialAlbedo=function(d$a,d$b,d$c){var d$d,d$e;if(d$a){var d$f=d$a.transform._entity;d$f&&((d$e=(d$d=d$f.owner.skinnedMeshRender.material).albedoColor).elements=d$c,d$d.albedoColor=d$e);}else(d$e=(d$d=d$b.skinnedMeshRender.material).albedoColor).elements=d$c,d$d.albedoColor=d$e;},d$d._getParticleRenderSharedMaterialTintColor=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.particleRender.sharedMaterial.tintColor.elements:null;}return d$b.particleRender.sharedMaterial.tintColor.elements;},d$d._setParticleRenderSharedMaterialTintColor=function(d$a,d$b,d$c){var d$d,d$e;if(d$a){var d$f=d$a.transform._entity;d$f&&((d$e=(d$d=d$f.owner.particleRender.material).tintColor).elements=d$c,d$d.tintColor=d$e);}else(d$e=(d$d=d$b.particleRender.material).tintColor).elements=d$c,d$d.tintColor=d$e;},d$d._getMeshRenderSharedMaterialAlphaColor=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.alphaColor.elements:null;}return d$b.meshRender.sharedMaterial.alphaColor.elements;},d$d._setMeshRenderSharedMaterialAlphaColor=function(d$a,d$b,d$c){var d$d,d$e;if(d$a){var d$f=d$a.transform._entity;d$f&&((d$e=(d$d=d$f.owner.meshRender.material).alphaColor).elements=d$c,d$d.alphaColor=d$e);}else(d$e=(d$d=d$b.meshRender.material).alphaColor).elements=d$c,d$d.alphaColor=d$e;},d$d._getMeshRenderSharedMaterialBaseColor=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.baseColor.elements:null;}return d$b.meshRender.sharedMaterial.baseColor.elements;},d$d._setMeshRenderSharedMaterialBaseColor=function(d$a,d$b,d$c){var d$d,d$e;if(d$a){var d$f=d$a.transform._entity;d$f&&((d$e=(d$d=d$f.owner.meshRender.material).baseColor).elements=d$c,d$d.baseColor=d$e);}else(d$e=(d$d=d$b.meshRender.material).baseColor).elements=d$c,d$d.baseColor=d$e;},d$d._getMeshRenderSharedMaterialDissolve=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.dissolve:0;}return d$b.meshRender.sharedMaterial.dissolve;},d$d._setMeshRenderSharedMaterialDissolve=function(d$a,d$b,d$c){if(d$a){var d$d=d$a.transform._entity;d$d&&(d$d.owner.meshRender.material.dissolve=d$c[0]);}else d$b.meshRender.material.dissolve=d$c[0];},d$d._getMeshRenderSharedMaterialDissolveSpeed=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.dissolveSpeed:0;}return d$b.meshRender.sharedMaterial.dissolveSpeed;},d$d._setMeshRenderSharedMaterialDissolveSpeed=function(d$a,d$b,d$c){if(d$a){var d$d=d$a.transform._entity;d$d&&(d$d.owner.meshRender.material.dissolveSpeed=d$c[0]);}else d$b.meshRender.material.dissolveSpeed=d$c[0];},d$d._getMeshRenderSharedMaterialMMultiplier=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.mMultiplier:0;}return d$b.meshRender.sharedMaterial.mMultiplier;},d$d._setMeshRenderSharedMaterialMMultiplier=function(d$a,d$b,d$c){if(d$a){var d$d=d$a.transform._entity;d$d&&(d$d.owner.meshRender.material.mMultiplier=d$c[0]);}else d$b.meshRender.material.mMultiplier=d$c[0];},d$d._getMeshRenderSharedMaterialBaseScrollSpeedX=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.baseScrollSpeedX:0;}return d$b.meshRender.sharedMaterial.baseScrollSpeedX;},d$d._setMeshRenderSharedMaterialBaseScrollSpeedX=function(d$a,d$b,d$c){if(d$a){var d$d=d$a.transform._entity;d$d&&(d$d.owner.meshRender.material.baseScrollSpeedX=d$c[0]);}else d$b.meshRender.material.baseScrollSpeedX=d$c[0];},d$d._getMeshRenderSharedMaterialBaseScrollSpeedY=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.baseScrollSpeedY:0;}return d$b.meshRender.sharedMaterial.baseScrollSpeedY;},d$d._setMeshRenderSharedMaterialBaseScrollSpeedY=function(d$a,d$b,d$c){if(d$a){var d$d=d$a.transform._entity;d$d&&(d$d.owner.meshRender.material.baseScrollSpeedY=d$c[0]);}else d$b.meshRender.material.baseScrollSpeedY=d$c[0];},d$d._getMeshRenderSharedMaterialSecondScrollSpeedX=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.secondScrollSpeedX:0;}return d$b.meshRender.sharedMaterial.secondScrollSpeedX;},d$d._setMeshRenderSharedMaterialSecondScrollSpeedX=function(d$a,d$b,d$c){if(d$a){var d$d=d$a.transform._entity;d$d&&(d$d.owner.meshRender.material.secondScrollSpeedX=d$c[0]);}else d$b.meshRender.material.secondScrollSpeedX=d$c[0];},d$d._getMeshRenderSharedMaterialSecondScrollSpeedY=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.secondScrollSpeedY:0;}return d$b.meshRender.sharedMaterial.secondScrollSpeedY;},d$d._setMeshRenderSharedMaterialSecondScrollSpeedY=function(d$a,d$b,d$c){if(d$a){var d$d=d$a.transform._entity;d$d&&(d$d.owner.meshRender.material.secondScrollSpeedY=d$c[0]);}else d$b.meshRender.material.secondScrollSpeedY=d$c[0];},d$d._getMeshRenderSharedMaterialAlpha=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.alpha:0;}return d$b.meshRender.sharedMaterial.alpha;},d$d._setMeshRenderSharedMaterialAlpha=function(d$a,d$b,d$c){if(d$a){var d$d=d$a.transform._entity;d$d&&(d$d.owner.meshRender.material.alpha=d$c[0]);}else d$b.meshRender.material.alpha=d$c[0];},d$d._getMeshRenderSharedMaterialIntensity=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.intensity:0;}return d$b.meshRender.sharedMaterial.intensity;},d$d._setMeshRenderSharedMaterialIntensity=function(d$a,d$b,d$c){if(d$a){var d$d=d$a.transform._entity;d$d&&(d$d.owner.meshRender.material.intensity=d$c[0]);}else d$b.meshRender.material.intensity=d$c[0];},d$d._getMeshRenderSharedMaterialDetailTilingOffset=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null;}return d$b.meshRender.sharedMaterial.detailTilingOffset.elements;},d$d._setMeshRenderSharedMaterialDetailTilingOffset=function(d$a,d$b,d$c){var d$d,d$e;if(d$a){var d$f=d$a.transform._entity;d$f&&((d$e=(d$d=d$f.owner.meshRender.material).detailTilingOffset).elements=d$c,d$d.detailTilingOffset=d$e);}else(d$e=(d$d=d$b.meshRender.material).detailTilingOffset).elements=d$c,d$d.detailTilingOffset=d$e;},d$d._getMeshRenderSharedMaterialDissolveTilingOffset=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null;}return d$b.meshRender.sharedMaterial.dissolveTilingOffset.elements;},d$d._setMeshRenderSharedMaterialDissolveTilingOffset=function(d$a,d$b,d$c){var d$d,d$e;if(d$a){var d$f=d$a.transform._entity;d$f&&((d$e=(d$d=d$f.owner.meshRender.material).dissolveTilingOffset).elements=d$c,d$d.dissolveTilingOffset=d$e);}else(d$e=(d$d=d$b.meshRender.material).dissolveTilingOffset).elements=d$c,d$d.dissolveTilingOffset=d$e;},d$d._getMeshRenderSharedMaterialMaskTilingOffset=function(d$a,d$b){if(d$a){var d$c=d$a.transform._entity;return d$c?d$c.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null;}return d$b.meshRender.sharedMaterial.maskTilingOffset.elements;},d$d._setMeshRenderSharedMaterialMaskTilingOffset=function(d$a,d$b,d$c){var d$d,d$e;if(d$a){var d$f=d$a.transform._entity;d$f&&((d$e=(d$d=d$f.owner.meshRender.material).maskTilingOffset).elements=d$c,d$d.maskTilingOffset=d$e);}else(d$e=(d$d=d$b.meshRender.material).maskTilingOffset).elements=d$c,d$d.maskTilingOffset=d$e;},d$d._propertyIDCounter=0,d$d._propertyIndexDic={},d$d._propertySetFuncs=[],d$d._propertyGetFuncs=[],d$d;}(),d$R=function(){function d$a(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null;}return d$p(d$a,"laya.d3.animation.Keyframe"),d$a;}(),d$S=function(){function d$a(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null;}return d$p(d$a,"laya.d3.animation.KeyframeNode"),d$a;}(),d$I=(function(){function d$a(){this._tempVector30=new d$ib(),this._tempVector31=new d$ib(),this._tempVector32=new d$ib(),this._a=new d$ib(),this._b=new d$ib(),this._c=new d$ib(),this._d=new d$ib();}d$p(d$a,"laya.d3.core.glitter.SplineCurvePositionVelocity");var d$b=d$a.prototype;d$b.Init=function(d$a,d$b,d$c,d$d){d$a.cloneTo(this._d),d$b.cloneTo(this._c),d$ib.scale(d$a,2,this._a),d$ib.scale(d$c,2,this._tempVector30),d$ib.subtract(this._a,this._tempVector30,this._a),d$ib.add(this._a,d$b,this._a),d$ib.add(this._a,d$d,this._a),d$ib.scale(d$c,3,this._b),d$ib.scale(d$a,3,this._tempVector30),d$ib.subtract(this._b,this._tempVector30,this._b),d$ib.subtract(this._b,d$d,this._b),d$ib.scale(d$b,2,this._tempVector30),d$ib.subtract(this._b,this._tempVector30,this._b);},d$b.Slerp=function(d$a,d$b){d$ib.scale(this._a,d$a*d$a*d$a,this._tempVector30),d$ib.scale(this._b,d$a*d$a,this._tempVector31),d$ib.scale(this._c,d$a,this._tempVector32),d$ib.add(this._tempVector30,this._tempVector31,d$b),d$ib.add(d$b,this._tempVector32,d$b),d$ib.add(d$b,this._d,d$b);};}(),function(){function d$M(d$a,d$b,d$c,d$d){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=d$a,this._h=d$b,this._minHeight=d$c,this._maxHeight=d$d;}d$p(d$M,"laya.d3.core.HeightMap");var d$a=d$M.prototype;d$a._inBounds=function(d$a,d$b){return 0<=d$a&&d$a<this._h&&0<=d$b&&d$b<this._w;},d$a.getHeight=function(d$a,d$b){return this._inBounds(d$a,d$b)?this._datas[d$a][d$b]:NaN;},d$q(0,d$a,"width",function(){return this._w;}),d$q(0,d$a,"height",function(){return this._h;}),d$q(0,d$a,"maxHeight",function(){return this._maxHeight;}),d$q(0,d$a,"minHeight",function(){return this._minHeight;}),d$M.creatFromMesh=function(d$a,d$b,d$c,d$d){for(var d$e=[],d$f=[],d$i=d$a.getSubMeshCount(),d$j=0;d$j<d$i;d$j++){for(var d$k=d$a.getSubMesh(d$j),d$l=d$k._getVertexBuffer(),d$m=d$l.getData(),d$n=[],d$o=0;d$o<d$m.length;d$o+=d$l.vertexDeclaration.vertexStride/4){var d$p=new d$ib(d$m[d$o+0],d$m[d$o+1],d$m[d$o+2]);d$n.push(d$p);}d$e.push(d$n);var d$q=d$k._getIndexBuffer();d$f.push(d$q.getData());}var d$r=d$a.boundingBox,d$s=d$r.min.x,d$t=d$r.min.z,d$u=d$r.max.x,d$v=d$r.max.z,d$w=d$r.min.y,d$x=d$r.max.y,d$y=d$u-d$s,d$z=d$v-d$t,d$A=d$d.elements[0]=d$y/(d$b-1),d$B=d$d.elements[1]=d$z/(d$c-1),d$C=new d$M(d$b,d$c,d$w,d$x),d$D=d$M._tempRay,d$E=d$D.direction.elements;d$E[0]=0,d$E[1]=-1,d$E[2]=0;var d$F=d$x+.1;d$D.origin.elements[1]=d$F;for(var d$G=0;d$G<d$c;d$G++){var d$H=d$t+d$G*d$B;d$C._datas[d$G]=[];for(var d$I=0;d$I<d$b;d$I++){var d$J=d$s+d$I*d$A,d$K=d$D.origin.elements;d$K[0]=d$J,d$K[2]=d$H;var d$L=d$M._getPosition(d$D,d$e,d$f);d$C._datas[d$G][d$I]=d$L===Number.MAX_VALUE?NaN:d$F-d$L;}}return d$C;},d$M.createFromImage=function(d$a,d$b,d$c){for(var d$d=d$a.width,d$e=d$a.height,d$f=new d$M(d$d,d$e,d$b,d$c),d$i=(d$c-d$b)/254,d$j=d$a.getPixels(),d$k=0,d$l=0;d$l<d$e;d$l++)for(var d$m=d$f._datas[d$l]=[],d$n=0;d$n<d$d;d$n++){var d$o=d$j[d$k++],d$p=d$j[d$k++],d$q=d$j[d$k++],d$r=d$j[d$k++];d$m[d$n]=255==d$o&&255==d$p&&255==d$q&&255==d$r?NaN:(d$o+d$p+d$q)/3*d$i+d$b;}return d$f;},d$M._getPosition=function(d$a,d$b,d$c){for(var d$d=Number.MAX_VALUE,d$e=0;d$e<d$b.length;d$e++)for(var d$f=d$b[d$e],d$i=d$c[d$e],d$j=0;d$j<d$i.length;d$j+=3){var d$k=d$f[d$i[d$j+0]],d$l=d$f[d$i[d$j+1]],d$m=d$f[d$i[d$j+2]],d$n=d$qb.rayIntersectsTriangle(d$a,d$k,d$l,d$m);!isNaN(d$n)&&d$n<d$d&&(d$d=d$n);}return d$d;},d$n(d$M,["_tempRay",function(){return this._tempRay=new d$eb(new d$ib(),new d$ib());}]);}(),function(){function d$e(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[];}d$p(d$e,"laya.d3.core.Layer");var d$a=d$e.prototype;return d$a._binarySearchIndex=function(){for(var d$a=0,d$b=d$e._collsionTestList.length-1,d$c=0;d$a<=d$b;){d$c=Math.floor((d$a+d$b)/2);var d$d=d$e._collsionTestList[d$c];if(d$d==this._number)return d$c;d$d>this._number?d$b=d$c-1:d$a=d$c+1;}return d$a;},d$a._addCollider=function(d$a){0===this._colliders.length&&d$e._collsionTestList.splice(this._binarySearchIndex(),0,this._number),d$a._isRigidbody?(this._colliders.unshift(d$a),this._nonRigidbodyOffset++):this._colliders.push(d$a);},d$a._removeCollider=function(d$a){var d$b=this._colliders.indexOf(d$a);d$b<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(d$b,1),0===this._colliders.length&&d$e._collsionTestList.splice(d$e._collsionTestList.indexOf(this._number),1);},d$q(0,d$a,"number",function(){return this._number;}),d$q(0,d$a,"visible",function(){return this._visible;},function(d$a){this._visible=d$a,d$e._visibleLayers=d$a?d$e._visibleLayers|this.mask:d$e._visibleLayers&~this.mask;}),d$q(0,d$a,"mask",function(){return this._mask;}),d$q(1,d$e,"visibleLayers",function(){return d$e._visibleLayers;},function(d$a){d$e._visibleLayers=d$a;for(var d$b=0,d$c=d$e._layerList.length;d$b<d$c;d$b++){var d$d=d$e._layerList[d$b];d$d._visible=0!=(d$d._mask&d$e._visibleLayers);}}),d$e.__init__=function(){d$e._layerList.length=31;for(var d$a=0;d$a<31;d$a++){var d$b=new d$e();d$e._layerList[d$a]=d$b,0===d$a?(d$b.name="Default Layer",d$b.visible=!0):(d$b.name="Layer-"+d$a,d$b.visible=!1),d$b._number=d$a,d$b._mask=Math.pow(2,d$a);}d$e.currentCreationLayer=d$e._layerList[0];},d$e.getLayerByNumber=function(d$a){if(d$a<0||30<d$a)throw new Error("无法返回指定Layer，该number超出范围！");return d$e._layerList[d$a];},d$e.getLayerByName=function(d$a){for(var d$b=0;d$b<31;d$b++)if(d$e._layerList[d$b].name===d$a)return d$e._layerList[d$b];throw new Error("无法返回指定Layer,该name不存在");},d$e.isVisible=function(d$a){return 0!=(d$a&d$e._currentCameraCullingMask&d$e._visibleLayers);},d$e._layerList=[],d$e._visibleLayers=2147483647,d$e._collsionTestList=[],d$e._currentCameraCullingMask=2147483647,d$e.maxCount=31,d$e.currentCreationLayer=null,d$e;}()),d$J=(function(){function d$a(d$a,d$b,d$c){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=d$a,this._minCount=d$b,this._maxCount=d$c;}d$p(d$a,"laya.d3.core.particleShuriKen.module.Burst");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.cloneTo=function(d$a){var d$b=d$a;d$b._time=this._time,d$b._minCount=this._minCount,d$b._maxCount=this._maxCount;},d$b.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$b,"time",function(){return this._time;}),d$q(0,d$b,"minCount",function(){return this._minCount;}),d$q(0,d$b,"maxCount",function(){return this._maxCount;});}(),function(){function d$a(d$a){this._color=null,this.enbale=!1,this._color=d$a;}d$p(d$a,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var d$b=d$a.prototype;d$b.cloneTo=function(d$a){var d$b=d$a;this._color.cloneTo(d$b._color),d$b.enbale=this.enbale;},d$b.clone=function(){var d$a;switch(this._color.type){case 0:d$a=d$L.createByConstant(this._color.constant.clone());break;case 1:d$a=d$L.createByGradient(this._color.gradient.clone());break;case 2:d$a=d$L.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:d$a=d$L.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone());}var d$b=new this.constructor(d$a);return d$b.enbale=this.enbale,d$b;},d$q(0,d$b,"color",function(){return this._color;});}(),function(){function d$a(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[];}d$p(d$a,"laya.d3.core.particleShuriKen.module.Emission");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),d$b._destroy=function(){this._bursts=null,this._destroyed=!0;},d$b.getBurstsCount=function(){return this._bursts.length;},d$b.getBurstByIndex=function(d$a){return this._bursts[d$a];},d$b.addBurst=function(d$a){var d$b=this._bursts.length;if(0<d$b)for(var d$c=0;d$c<d$b;d$c++)this._bursts[d$c].time>d$a.time&&this._bursts.splice(d$c,0,d$a);this._bursts.push(d$a);},d$b.removeBurst=function(d$a){var d$b=this._bursts.indexOf(d$a);-1!==d$b&&this._bursts.splice(d$b,1);},d$b.removeBurstByIndex=function(d$a){this._bursts.splice(d$a,1);},d$b.clearBurst=function(){this._bursts.length=0;},d$b.cloneTo=function(d$a){var d$b=d$a,d$c=d$b._bursts;d$c.length=this._bursts.length;for(var d$d=0,d$e=this._bursts.length;d$d<d$e;d$d++){var d$f=d$c[d$d];d$f?this._bursts[d$d].cloneTo(d$f):d$c[d$d]=this._bursts[d$d].clone();}d$b._emissionRate=this._emissionRate,d$b.enbale=this.enbale;},d$b.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$b,"destroyed",function(){return this._destroyed;}),d$q(0,d$b,"emissionRate",function(){return this._emissionRate;},function(d$a){if(d$a<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=d$a;});}(),function(){function d$d(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null;}d$p(d$d,"laya.d3.core.particleShuriKen.module.FrameOverTime");var d$a=d$d.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.cloneTo=function(d$a){var d$b=d$a;d$b._type=this._type,d$b._constant=this._constant,this._overTime.cloneTo(d$b._overTime),d$b._constantMin=this._constantMin,d$b._constantMax=this._constantMax,this._overTimeMin.cloneTo(d$b._overTimeMin),this._overTimeMax.cloneTo(d$b._overTimeMax);},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$a,"frameOverTimeData",function(){return this._overTime;}),d$q(0,d$a,"constant",function(){return this._constant;}),d$q(0,d$a,"type",function(){return this._type;}),d$q(0,d$a,"frameOverTimeDataMin",function(){return this._overTimeMin;}),d$q(0,d$a,"constantMin",function(){return this._constantMin;}),d$q(0,d$a,"frameOverTimeDataMax",function(){return this._overTimeMax;}),d$q(0,d$a,"constantMax",function(){return this._constantMax;}),d$d.createByConstant=function(d$a){var d$b=new d$d();return d$b._type=0,d$b._constant=d$a,d$b;},d$d.createByOverTime=function(d$a){var d$b=new d$d();return d$b._type=1,d$b._overTime=d$a,d$b;},d$d.createByRandomTwoConstant=function(d$a,d$b){var d$c=new d$d();return d$c._type=2,d$c._constantMin=d$a,d$c._constantMax=d$b,d$c;},d$d.createByRandomTwoOverTime=function(d$a,d$b){var d$c=new d$d();return d$c._type=3,d$c._overTimeMin=d$a,d$c._overTimeMax=d$b,d$c;},d$d;}()),d$K=function(){function d$l(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null;}d$p(d$l,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var d$a=d$l.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.cloneTo=function(d$a){var d$b=d$a;d$b._type=this._type,d$b._separateAxes=this._separateAxes,d$b._constant=this._constant,this._constantSeparate.cloneTo(d$b._constantSeparate),this._gradient.cloneTo(d$b._gradient),this._gradientX.cloneTo(d$b._gradientX),this._gradientY.cloneTo(d$b._gradientY),this._gradientZ.cloneTo(d$b._gradientZ),d$b._constantMin=this._constantMin,d$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(d$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(d$b._constantMaxSeparate),this._gradientMin.cloneTo(d$b._gradientMin),this._gradientMax.cloneTo(d$b._gradientMax),this._gradientXMin.cloneTo(d$b._gradientXMin),this._gradientXMax.cloneTo(d$b._gradientXMax),this._gradientYMin.cloneTo(d$b._gradientYMin),this._gradientYMax.cloneTo(d$b._gradientYMax),this._gradientZMin.cloneTo(d$b._gradientZMin),this._gradientZMax.cloneTo(d$b._gradientZMax);},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$a,"gradientZ",function(){return this._gradientZ;}),d$q(0,d$a,"constant",function(){return this._constant;}),d$q(0,d$a,"gradient",function(){return this._gradient;}),d$q(0,d$a,"separateAxes",function(){return this._separateAxes;}),d$q(0,d$a,"type",function(){return this._type;}),d$q(0,d$a,"constantSeparate",function(){return this._constantSeparate;}),d$q(0,d$a,"gradientX",function(){return this._gradientX;}),d$q(0,d$a,"gradientY",function(){return this._gradientY;}),d$q(0,d$a,"gradientW",function(){return this._gradientW;}),d$q(0,d$a,"gradientMin",function(){return this._gradientMin;}),d$q(0,d$a,"constantMin",function(){return this._constantMin;}),d$q(0,d$a,"gradientMax",function(){return this._gradientMax;}),d$q(0,d$a,"constantMax",function(){return this._constantMax;}),d$q(0,d$a,"gradientWMin",function(){return this._gradientWMin;}),d$q(0,d$a,"constantMinSeparate",function(){return this._constantMinSeparate;}),d$q(0,d$a,"constantMaxSeparate",function(){return this._constantMaxSeparate;}),d$q(0,d$a,"gradientXMin",function(){return this._gradientXMin;}),d$q(0,d$a,"gradientXMax",function(){return this._gradientXMax;}),d$q(0,d$a,"gradientWMax",function(){return this._gradientWMax;}),d$q(0,d$a,"gradientYMin",function(){return this._gradientYMin;}),d$q(0,d$a,"gradientYMax",function(){return this._gradientYMax;}),d$q(0,d$a,"gradientZMin",function(){return this._gradientZMin;}),d$q(0,d$a,"gradientZMax",function(){return this._gradientZMax;}),d$l.createByConstant=function(d$a){var d$b=new d$l();return d$b._type=0,d$b._separateAxes=!1,d$b._constant=d$a,d$b;},d$l.createByConstantSeparate=function(d$a){var d$b=new d$l();return d$b._type=0,d$b._separateAxes=!0,d$b._constantSeparate=d$a,d$b;},d$l.createByGradient=function(d$a){var d$b=new d$l();return d$b._type=1,d$b._separateAxes=!1,d$b._gradient=d$a,d$b;},d$l.createByGradientSeparate=function(d$a,d$b,d$c,d$d){var d$e=new d$l();return d$e._type=1,d$e._separateAxes=!0,d$e._gradientX=d$a,d$e._gradientY=d$b,d$e._gradientZ=d$c,d$e._gradientW=d$d,d$e;},d$l.createByRandomTwoConstant=function(d$a,d$b){var d$c=new d$l();return d$c._type=2,d$c._separateAxes=!1,d$c._constantMin=d$a,d$c._constantMax=d$b,d$c;},d$l.createByRandomTwoConstantSeparate=function(d$a,d$b){var d$c=new d$l();return d$c._type=2,d$c._separateAxes=!0,d$c._constantMinSeparate=d$a,d$c._constantMaxSeparate=d$b,d$c;},d$l.createByRandomTwoGradient=function(d$a,d$b){var d$c=new d$l();return d$c._type=3,d$c._separateAxes=!1,d$c._gradientMin=d$a,d$c._gradientMax=d$b,d$c;},d$l.createByRandomTwoGradientSeparate=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){var d$k=new d$l();return d$k._type=3,d$k._separateAxes=!0,d$k._gradientXMin=d$a,d$k._gradientXMax=d$b,d$k._gradientYMin=d$c,d$k._gradientYMax=d$d,d$k._gradientZMin=d$e,d$k._gradientZMax=d$f,d$k._gradientWMin=d$i,d$k._gradientWMax=d$j,d$k;},d$l;}(),d$L=function(){function d$d(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null;}d$p(d$d,"laya.d3.core.particleShuriKen.module.GradientColor");var d$a=d$d.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.cloneTo=function(d$a){var d$b=d$a;d$b._type=this._type,this._constant.cloneTo(d$b._constant),this._constantMin.cloneTo(d$b._constantMin),this._constantMax.cloneTo(d$b._constantMax),this._gradient.cloneTo(d$b._gradient),this._gradientMin.cloneTo(d$b._gradientMin),this._gradientMax.cloneTo(d$b._gradientMax);},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$a,"gradient",function(){return this._gradient;}),d$q(0,d$a,"constant",function(){return this._constant;}),d$q(0,d$a,"type",function(){return this._type;}),d$q(0,d$a,"gradientMin",function(){return this._gradientMin;}),d$q(0,d$a,"constantMin",function(){return this._constantMin;}),d$q(0,d$a,"gradientMax",function(){return this._gradientMax;}),d$q(0,d$a,"constantMax",function(){return this._constantMax;}),d$d.createByConstant=function(d$a){var d$b=new d$d();return d$b._type=0,d$b._constant=d$a,d$b;},d$d.createByGradient=function(d$a){var d$b=new d$d();return d$b._type=1,d$b._gradient=d$a,d$b;},d$d.createByRandomTwoConstant=function(d$a,d$b){var d$c=new d$d();return d$c._type=2,d$c._constantMin=d$a,d$c._constantMax=d$b,d$c;},d$d.createByRandomTwoGradient=function(d$a,d$b){var d$c=new d$d();return d$c._type=3,d$c._gradientMin=d$a,d$c._gradientMax=d$b,d$c;},d$d;}(),d$M=(function(){function d$a(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16);}d$p(d$a,"laya.d3.core.particleShuriKen.module.GradientDataColor");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.addAlpha=function(d$a,d$b){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==d$a&&(d$a=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=d$a,this._alphaElements[this._alphaCurrentLength++]=d$b):DEBUG;},d$b.addRGB=function(d$a,d$b){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==d$a&&(d$a=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=d$a,this._rgbElements[this._rgbCurrentLength++]=d$b.x,this._rgbElements[this._rgbCurrentLength++]=d$b.y,this._rgbElements[this._rgbCurrentLength++]=d$b.z):DEBUG;},d$b.cloneTo=function(d$a){var d$b=d$a,d$c=0,d$d=0;d$b._alphaCurrentLength=this._alphaCurrentLength;var d$e=d$b._alphaElements;for(d$e.length=this._alphaElements.length,d$c=0,d$d=this._alphaElements.length;d$c<d$d;d$c++)d$e[d$c]=this._alphaElements[d$c];d$b._rgbCurrentLength=this._rgbCurrentLength;var d$f=d$b._rgbElements;for(d$f.length=this._rgbElements.length,d$c=0,d$d=this._rgbElements.length;d$c<d$d;d$c++)d$f[d$c]=this._rgbElements[d$c];},d$b.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$b,"alphaGradientCount",function(){return this._alphaCurrentLength/2;}),d$q(0,d$b,"rgbGradientCount",function(){return this._rgbCurrentLength/4;});}(),function(){function d$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8);}d$p(d$a,"laya.d3.core.particleShuriKen.module.GradientDataInt");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.add=function(d$a,d$b){this._currentLength<8?(6===this._currentLength&&1!==d$a&&(d$a=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=d$a,this._elements[this._currentLength++]=d$b):console.log("Warning:data count must lessEqual than 4");},d$b.cloneTo=function(d$a){var d$b=d$a;d$b._currentLength=this._currentLength;var d$c=d$b._elements;d$c.length=this._elements.length;for(var d$d=0,d$e=this._elements.length;d$d<d$e;d$d++)d$c[d$d]=this._elements[d$d];},d$b.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$b,"gradientCount",function(){return this._currentLength/2;});}(),function(){function d$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8);}d$p(d$a,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.add=function(d$a,d$b){this._currentLength<8?(6===this._currentLength&&1!==d$a&&(d$a=1,DEBUG),this._elements[this._currentLength++]=d$a,this._elements[this._currentLength++]=d$b):DEBUG;},d$b.getKeyByIndex=function(d$a){return this._elements[2*d$a];},d$b.getValueByIndex=function(d$a){return this._elements[2*d$a+1];},d$b.getAverageValue=function(){for(var d$a=0,d$b=this._currentLength-2;d$a<d$b;d$a+=2){this._elements[d$a+1];this._elements[d$a+3],this._elements[d$a+2]-this._elements[d$a];}return 0;},d$b.cloneTo=function(d$a){var d$b=d$a;d$b._currentLength=this._currentLength;var d$c=d$b._elements;d$c.length=this._elements.length;for(var d$d=0,d$e=this._elements.length;d$d<d$e;d$d++)d$c[d$d]=this._elements[d$d];},d$b.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$b,"gradientCount",function(){return this._currentLength/2;});}(),function(){function d$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12);}d$p(d$a,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.add=function(d$a,d$b){this._currentLength<8?(6===this._currentLength&&1!==d$a&&(d$a=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=d$a,this._elements[this._currentLength++]=d$b.x,this._elements[this._currentLength++]=d$b.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4");},d$b.cloneTo=function(d$a){var d$b=d$a;d$b._currentLength=this._currentLength;var d$c=d$b._elements;d$c.length=this._elements.length;for(var d$d=0,d$e=this._elements.length;d$d<d$e;d$d++)d$c[d$d]=this._elements[d$d];},d$b.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$b,"gradientCount",function(){return this._currentLength/3;});}(),function(){function d$j(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null;}d$p(d$j,"laya.d3.core.particleShuriKen.module.GradientSize");var d$a=d$j.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.getMaxSizeInGradient=function(){var d$a=0,d$b=0,d$c=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(d$a=0,d$b=this._gradientX.gradientCount;d$a<d$b;d$a++)d$c=Math.max(d$c,this._gradientX.getValueByIndex(d$a));for(d$a=0,d$b=this._gradientY.gradientCount;d$a<d$b;d$a++)d$c=Math.max(d$c,this._gradientY.getValueByIndex(d$a));}else for(d$a=0,d$b=this._gradient.gradientCount;d$a<d$b;d$a++)d$c=Math.max(d$c,this._gradient.getValueByIndex(d$a));break;case 1:d$c=this._separateAxes?(d$c=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),d$c=Math.max(d$c,this._constantMinSeparate.y),Math.max(d$c,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(d$a=0,d$b=this._gradientXMin.gradientCount;d$a<d$b;d$a++)d$c=Math.max(d$c,this._gradientXMin.getValueByIndex(d$a));for(d$a=0,d$b=this._gradientXMax.gradientCount;d$a<d$b;d$a++)d$c=Math.max(d$c,this._gradientXMax.getValueByIndex(d$a));for(d$a=0,d$b=this._gradientYMin.gradientCount;d$a<d$b;d$a++)d$c=Math.max(d$c,this._gradientYMin.getValueByIndex(d$a));for(d$a=0,d$b=this._gradientZMax.gradientCount;d$a<d$b;d$a++)d$c=Math.max(d$c,this._gradientZMax.getValueByIndex(d$a));}else{for(d$a=0,d$b=this._gradientMin.gradientCount;d$a<d$b;d$a++)d$c=Math.max(d$c,this._gradientMin.getValueByIndex(d$a));for(d$a=0,d$b=this._gradientMax.gradientCount;d$a<d$b;d$a++)d$c=Math.max(d$c,this._gradientMax.getValueByIndex(d$a));}}return d$c;},d$a.cloneTo=function(d$a){var d$b=d$a;d$b._type=this._type,d$b._separateAxes=this._separateAxes,this._gradient.cloneTo(d$b._gradient),this._gradientX.cloneTo(d$b._gradientX),this._gradientY.cloneTo(d$b._gradientY),this._gradientZ.cloneTo(d$b._gradientZ),d$b._constantMin=this._constantMin,d$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(d$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(d$b._constantMaxSeparate),this._gradientMin.cloneTo(d$b._gradientMin),this._gradientMax.cloneTo(d$b._gradientMax),this._gradientXMin.cloneTo(d$b._gradientXMin),this._gradientXMax.cloneTo(d$b._gradientXMax),this._gradientYMin.cloneTo(d$b._gradientYMin),this._gradientYMax.cloneTo(d$b._gradientYMax),this._gradientZMin.cloneTo(d$b._gradientZMin),this._gradientZMax.cloneTo(d$b._gradientZMax);},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$a,"gradientZ",function(){return this._gradientZ;}),d$q(0,d$a,"gradient",function(){return this._gradient;}),d$q(0,d$a,"separateAxes",function(){return this._separateAxes;}),d$q(0,d$a,"type",function(){return this._type;}),d$q(0,d$a,"gradientMin",function(){return this._gradientMin;}),d$q(0,d$a,"constantMin",function(){return this._constantMin;}),d$q(0,d$a,"gradientX",function(){return this._gradientX;}),d$q(0,d$a,"gradientY",function(){return this._gradientY;}),d$q(0,d$a,"gradientMax",function(){return this._gradientMax;}),d$q(0,d$a,"constantMax",function(){return this._constantMax;}),d$q(0,d$a,"constantMinSeparate",function(){return this._constantMinSeparate;}),d$q(0,d$a,"constantMaxSeparate",function(){return this._constantMaxSeparate;}),d$q(0,d$a,"gradientXMin",function(){return this._gradientXMin;}),d$q(0,d$a,"gradientXMax",function(){return this._gradientXMax;}),d$q(0,d$a,"gradientYMin",function(){return this._gradientYMin;}),d$q(0,d$a,"gradientYMax",function(){return this._gradientYMax;}),d$q(0,d$a,"gradientZMin",function(){return this._gradientZMin;}),d$q(0,d$a,"gradientZMax",function(){return this._gradientZMax;}),d$j.createByGradient=function(d$a){var d$b=new d$j();return d$b._type=0,d$b._separateAxes=!1,d$b._gradient=d$a,d$b;},d$j.createByGradientSeparate=function(d$a,d$b,d$c){var d$d=new d$j();return d$d._type=0,d$d._separateAxes=!0,d$d._gradientX=d$a,d$d._gradientY=d$b,d$d._gradientZ=d$c,d$d;},d$j.createByRandomTwoConstant=function(d$a,d$b){var d$c=new d$j();return d$c._type=1,d$c._separateAxes=!1,d$c._constantMin=d$a,d$c._constantMax=d$b,d$c;},d$j.createByRandomTwoConstantSeparate=function(d$a,d$b){var d$c=new d$j();return d$c._type=1,d$c._separateAxes=!0,d$c._constantMinSeparate=d$a,d$c._constantMaxSeparate=d$b,d$c;},d$j.createByRandomTwoGradient=function(d$a,d$b){var d$c=new d$j();return d$c._type=2,d$c._separateAxes=!1,d$c._gradientMin=d$a,d$c._gradientMax=d$b,d$c;},d$j.createByRandomTwoGradientSeparate=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=new d$j();return d$i._type=2,d$i._separateAxes=!0,d$i._gradientXMin=d$a,d$i._gradientXMax=d$b,d$i._gradientYMin=d$c,d$i._gradientYMax=d$d,d$i._gradientZMin=d$e,d$i._gradientZMax=d$f,d$i;},d$j;}()),d$N=function(){function d$j(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null;}d$p(d$j,"laya.d3.core.particleShuriKen.module.GradientVelocity");var d$a=d$j.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.cloneTo=function(d$a){var d$b=d$a;d$b._type=this._type,this._constant.cloneTo(d$b._constant),this._gradientX.cloneTo(d$b._gradientX),this._gradientY.cloneTo(d$b._gradientY),this._gradientZ.cloneTo(d$b._gradientZ),this._constantMin.cloneTo(d$b._constantMin),this._constantMax.cloneTo(d$b._constantMax),this._gradientXMin.cloneTo(d$b._gradientXMin),this._gradientXMax.cloneTo(d$b._gradientXMax),this._gradientYMin.cloneTo(d$b._gradientYMin),this._gradientYMax.cloneTo(d$b._gradientYMax),this._gradientZMin.cloneTo(d$b._gradientZMin),this._gradientZMax.cloneTo(d$b._gradientZMax);},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$a,"gradientZ",function(){return this._gradientZ;}),d$q(0,d$a,"constant",function(){return this._constant;}),d$q(0,d$a,"type",function(){return this._type;}),d$q(0,d$a,"gradientXMax",function(){return this._gradientXMax;}),d$q(0,d$a,"constantMin",function(){return this._constantMin;}),d$q(0,d$a,"gradientX",function(){return this._gradientX;}),d$q(0,d$a,"gradientY",function(){return this._gradientY;}),d$q(0,d$a,"gradientXMin",function(){return this._gradientXMin;}),d$q(0,d$a,"constantMax",function(){return this._constantMax;}),d$q(0,d$a,"gradientYMin",function(){return this._gradientYMin;}),d$q(0,d$a,"gradientYMax",function(){return this._gradientYMax;}),d$q(0,d$a,"gradientZMin",function(){return this._gradientZMin;}),d$q(0,d$a,"gradientZMax",function(){return this._gradientZMax;}),d$j.createByConstant=function(d$a){var d$b=new d$j();return d$b._type=0,d$b._constant=d$a,d$b;},d$j.createByGradient=function(d$a,d$b,d$c){var d$d=new d$j();return d$d._type=1,d$d._gradientX=d$a,d$d._gradientY=d$b,d$d._gradientZ=d$c,d$d;},d$j.createByRandomTwoConstant=function(d$a,d$b){var d$c=new d$j();return d$c._type=2,d$c._constantMin=d$a,d$c._constantMax=d$b,d$c;},d$j.createByRandomTwoGradient=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=new d$j();return d$i._type=3,d$i._gradientXMin=d$a,d$i._gradientXMax=d$b,d$i._gradientYMin=d$c,d$i._gradientYMax=d$d,d$i._gradientZMin=d$e,d$i._gradientZMax=d$f,d$i;},d$j;}(),d$O=(function(){function d$a(d$a){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=d$a;}d$p(d$a,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.cloneTo=function(d$a){var d$b=d$a;this._angularVelocity.cloneTo(d$b._angularVelocity),d$b.enbale=this.enbale;},d$b.clone=function(){var d$a;switch(this._angularVelocity.type){case 0:d$a=this._angularVelocity.separateAxes?d$K.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):d$K.createByConstant(this._angularVelocity.constant);break;case 1:d$a=this._angularVelocity.separateAxes?d$K.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):d$K.createByGradient(this._angularVelocity.gradient.clone());break;case 2:d$a=this._angularVelocity.separateAxes?d$K.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):d$K.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:d$a=this._angularVelocity.separateAxes?d$K.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):d$K.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone());}var d$b=new this.constructor(d$a);return d$b.enbale=this.enbale,d$b;},d$q(0,d$b,"angularVelocity",function(){return this._angularVelocity;});}(),function(){function d$a(){this.enable=!1,this.randomDirection=!1;}d$p(d$a,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b._getShapeBoundBox=function(d$a){throw new Error("BaseShape: must override it.");},d$b._getSpeedBoundBox=function(d$a){throw new Error("BaseShape: must override it.");},d$b.generatePositionAndDirection=function(d$a,d$b,d$c,d$d){throw new Error("BaseShape: must override it.");},d$b._calculateProceduralBounds=function(d$a,d$b,d$c){this._getShapeBoundBox(d$a);var d$d=d$a.min,d$e=d$a.max;d$ib.multiply(d$d,d$b,d$d),d$ib.multiply(d$e,d$b,d$e);var d$f=new d$Za(new d$ib(),new d$ib());this.randomDirection?(d$f.min=new d$ib(-1,-1,-1),d$f.max=new d$ib(1,1,1)):this._getSpeedBoundBox(d$f);var d$i=new d$Za(new d$ib(),new d$ib()),d$j=d$i.min,d$k=d$i.max;d$ib.scale(d$f.min,d$c.y,d$j),d$ib.scale(d$f.max,d$c.y,d$k),d$ib.add(d$a.min,d$j,d$j),d$ib.add(d$a.max,d$k,d$k),d$ib.min(d$a.min,d$j,d$a.min),d$ib.max(d$a.max,d$j,d$a.max);var d$l=new d$Za(new d$ib(),new d$ib()),d$m=d$l.min,d$n=d$l.max;d$ib.scale(d$f.min,d$c.x,d$m),d$ib.scale(d$f.max,d$c.x,d$n),d$ib.min(d$l.min,d$n,d$j),d$ib.max(d$l.min,d$n,d$k),d$ib.min(d$a.min,d$j,d$a.min),d$ib.max(d$a.max,d$j,d$a.max);},d$b.cloneTo=function(d$a){d$a.enable=this.enable;},d$b.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$a;}()),d$T=function(){function d$f(){}return d$p(d$f,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),d$f._randomPointUnitArcCircle=function(d$a,d$b,d$c){var d$d=d$b.elements,d$e=NaN;d$e=d$c?d$c.getFloat()*d$a:Math.random()*d$a,d$d[0]=Math.cos(d$e),d$d[1]=Math.sin(d$e);},d$f._randomPointInsideUnitArcCircle=function(d$a,d$b,d$c){var d$d=d$b.elements;d$f._randomPointUnitArcCircle(d$a,d$b,d$c);var d$e=NaN;d$e=d$c?Math.pow(d$c.getFloat(),.5):Math.pow(Math.random(),.5),d$d[0]=d$d[0]*d$e,d$d[1]=d$d[1]*d$e;},d$f._randomPointUnitCircle=function(d$a,d$b){var d$c=d$a.elements,d$d=NaN;d$d=d$b?d$b.getFloat()*Math.PI*2:Math.random()*Math.PI*2,d$c[0]=Math.cos(d$d),d$c[1]=Math.sin(d$d);},d$f._randomPointInsideUnitCircle=function(d$a,d$b){var d$c=d$a.elements;d$f._randomPointUnitCircle(d$a);var d$d=NaN;d$d=d$b?Math.pow(d$b.getFloat(),.5):Math.pow(Math.random(),.5),d$c[0]=d$c[0]*d$d,d$c[1]=d$c[1]*d$d;},d$f._randomPointUnitSphere=function(d$a,d$b){var d$c=d$a.elements,d$d=NaN,d$e=NaN;d$e=d$b?(d$d=d$c[2]=2*d$b.getFloat()-1,d$b.getFloat()*Math.PI*2):(d$d=d$c[2]=2*Math.random()-1,Math.random()*Math.PI*2);var d$f=Math.sqrt(1-d$d*d$d);d$c[0]=d$f*Math.cos(d$e),d$c[1]=d$f*Math.sin(d$e);},d$f._randomPointInsideUnitSphere=function(d$a,d$b){var d$c=d$a.elements;d$f._randomPointUnitSphere(d$a);var d$d=NaN;d$d=d$b?Math.pow(d$b.getFloat(),1/3):Math.pow(Math.random(),1/3),d$c[0]=d$c[0]*d$d,d$c[1]=d$c[1]*d$d,d$c[2]=d$c[2]*d$d;},d$f._randomPointInsideHalfUnitBox=function(d$a,d$b){var d$c=d$a.elements;d$b?(d$c[0]=d$b.getFloat()-.5,d$c[1]=d$b.getFloat()-.5,d$c[2]=d$b.getFloat()-.5):(d$c[0]=Math.random()-.5,d$c[1]=Math.random()-.5,d$c[2]=Math.random()-.5);},d$f;}(),d$U=(function(){function d$a(d$a){this._size=null,this.enbale=!1,this._size=d$a;}d$p(d$a,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.cloneTo=function(d$a){var d$b=d$a;this._size.cloneTo(d$b._size),d$b.enbale=this.enbale;},d$b.clone=function(){var d$a;switch(this._size.type){case 0:d$a=this._size.separateAxes?d$M.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):d$M.createByGradient(this._size.gradient.clone());break;case 1:d$a=this._size.separateAxes?d$M.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):d$M.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:d$a=this._size.separateAxes?d$M.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):d$M.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone());}var d$b=new this.constructor(d$a);return d$b.enbale=this.enbale,d$b;},d$q(0,d$b,"size",function(){return this._size;});}(),function(){function d$d(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN;}d$p(d$d,"laya.d3.core.particleShuriKen.module.StartFrame");var d$a=d$d.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.cloneTo=function(d$a){var d$b=d$a;d$b._type=this._type,d$b._constant=this._constant,d$b._constantMin=this._constantMin,d$b._constantMax=this._constantMax;},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$a,"constant",function(){return this._constant;}),d$q(0,d$a,"type",function(){return this._type;}),d$q(0,d$a,"constantMin",function(){return this._constantMin;}),d$q(0,d$a,"constantMax",function(){return this._constantMax;}),d$d.createByConstant=function(d$a){var d$b=new d$d();return d$b._type=0,d$b._constant=d$a,d$b;},d$d.createByRandomTwoConstant=function(d$a,d$b){var d$c=new d$d();return d$c._type=1,d$c._constantMin=d$a,d$c._constantMax=d$b,d$c;},d$d;}()),d$V=(function(){function d$a(d$a,d$b){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new d$fb(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=d$a,this._startFrame=d$b;}d$p(d$a,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.cloneTo=function(d$a){var d$b=d$a;this.tiles.cloneTo(d$b.tiles),d$b.type=this.type,d$b.randomRow=this.randomRow,this._frame.cloneTo(d$b._frame),this._startFrame.cloneTo(d$b._startFrame),d$b.cycles=this.cycles,d$b.enableUVChannels=this.enableUVChannels,d$b.enable=this.enable;},d$b.clone=function(){var d$a,d$b;switch(this._frame.type){case 0:d$a=d$J.createByConstant(this._frame.constant);break;case 1:d$a=d$J.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:d$a=d$J.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:d$a=d$J.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone());}switch(this._startFrame.type){case 0:d$b=d$U.createByConstant(this._startFrame.constant);break;case 1:d$b=d$U.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax);}var d$c=new this.constructor(d$a,d$b);return this.tiles.cloneTo(d$c.tiles),d$c.type=this.type,d$c.randomRow=this.randomRow,d$c.cycles=this.cycles,d$c.enableUVChannels=this.enableUVChannels,d$c.enable=this.enable,d$c;},d$q(0,d$b,"frame",function(){return this._frame;}),d$q(0,d$b,"startFrame",function(){return this._startFrame;});}(),function(){function d$a(d$a){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=d$a;}d$p(d$a,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.cloneTo=function(d$a){var d$b=d$a;this._velocity.cloneTo(d$b._velocity),d$b.enbale=this.enbale,d$b.space=this.space;},d$b.clone=function(){var d$a;switch(this._velocity.type){case 0:d$a=d$N.createByConstant(this._velocity.constant.clone());break;case 1:d$a=d$N.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:d$a=d$N.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:d$a=d$N.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone());}var d$b=new this.constructor(d$a);return d$b.enbale=this.enbale,d$b.space=this.space,d$b;},d$q(0,d$b,"velocity",function(){return this._velocity;});}(),function(){function d$a(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new d$ob(),this._vb=d$Ob.create(d$a._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=d$Nb.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=d$Lb.nameKey.getID("LINE"),this._shaderCompile=d$Ab._preCompileShader[this._sharderNameID];}d$p(d$a,"laya.d3.core.PhasorSpriter3D");var d$b=d$a.prototype;return d$b.line=function(d$a,d$b,d$c,d$d){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(d$a.x,d$a.y,d$a.z,d$b.x,d$b.y,d$b.z,d$b.w),this.addVertex(d$c.x,d$c.y,d$c.z,d$d.x,d$d.y,d$d.z,d$d.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this;},d$b.circle=function(d$a,d$b,d$c,d$d,d$e,d$f){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*d$b,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/d$b,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*d$a,Math.cos(this._tempNumver0)*d$a,0,d$c,d$d,d$e,d$f),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this;},d$b.plane=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=d$d/2,this._tempNumver1=d$e/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(d$a-this._tempNumver0,d$b+this._tempNumver1,d$c,d$f,d$i,d$j,d$k),this.addVertex(d$a+this._tempNumver0,d$b+this._tempNumver1,d$c,d$f,d$i,d$j,d$k),this.addVertex(d$a-this._tempNumver0,d$b-this._tempNumver1,d$c,d$f,d$i,d$j,d$k),this.addVertex(d$a+this._tempNumver0,d$b-this._tempNumver1,d$c,d$f,d$i,d$j,d$k),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this;},d$b.box=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=d$d/2,this._tempNumver1=d$e/2,this._tempNumver2=d$f/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(d$a-this._tempNumver0,d$b+this._tempNumver1,d$c+this._tempNumver2,d$i,d$j,d$k,d$l),this.addVertex(d$a+this._tempNumver0,d$b+this._tempNumver1,d$c+this._tempNumver2,d$i,d$j,d$k,d$l),this.addVertex(d$a-this._tempNumver0,d$b-this._tempNumver1,d$c+this._tempNumver2,d$i,d$j,d$k,d$l),this.addVertex(d$a+this._tempNumver0,d$b-this._tempNumver1,d$c+this._tempNumver2,d$i,d$j,d$k,d$l),this.addVertex(d$a+this._tempNumver0,d$b+this._tempNumver1,d$c-this._tempNumver2,d$i,d$j,d$k,d$l),this.addVertex(d$a-this._tempNumver0,d$b+this._tempNumver1,d$c-this._tempNumver2,d$i,d$j,d$k,d$l),this.addVertex(d$a+this._tempNumver0,d$b-this._tempNumver1,d$c-this._tempNumver2,d$i,d$j,d$k,d$l),this.addVertex(d$a-this._tempNumver0,d$b-this._tempNumver1,d$c-this._tempNumver2,d$i,d$j,d$k,d$l),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this;},d$b.cone=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*d$c+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*d$c>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/d$c,this.addVertexIndex(0,d$b,0,d$d,d$e,d$f,d$i,this._tempUint0),this.addVertexIndex(0,0,0,d$d,d$e,d$f,d$i,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<d$c;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(d$a*this._tempNumver2,0,d$a*this._tempNumver3,d$d,d$e,d$f,d$i,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==d$c-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(d$a*this._tempNumver2,0,d$a*this._tempNumver3,d$d,d$e,d$f,d$i,this._tempUint0+(this._tempInt0+d$c)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==d$c-1?this.addIndexes(this._tempUint1+d$c+2):this.addIndexes(this._tempUint1+this._tempInt0+d$c+1),this.addIndexes(this._tempUint1+this._tempInt0+d$c),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this;},d$b.boundingBoxLine=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(d$a,d$e,d$f,d$i,d$j,d$k,d$l),this.addVertex(d$d,d$e,d$f,d$i,d$j,d$k,d$l),this.addVertex(d$a,d$b,d$f,d$i,d$j,d$k,d$l),this.addVertex(d$d,d$b,d$f,d$i,d$j,d$k,d$l),this.addVertex(d$d,d$e,d$c,d$i,d$j,d$k,d$l),this.addVertex(d$a,d$e,d$c,d$i,d$j,d$k,d$l),this.addVertex(d$d,d$b,d$c,d$i,d$j,d$k,d$l),this.addVertex(d$a,d$b,d$c,d$i,d$j,d$k,d$l),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this;},d$b.addVertex=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=d$a,this._vbData[this._posInVBData+1]=d$b,this._vbData[this._posInVBData+2]=d$c,this._vbData[this._posInVBData+3]=d$d,this._vbData[this._posInVBData+4]=d$e,this._vbData[this._posInVBData+5]=d$f,this._vbData[this._posInVBData+6]=d$i,this._posInVBData+=this._floatSizePerVer,this;},d$b.addVertexIndex=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){return this._hasBegun||this.addVertexIndexException(),this._vbData[d$j]=d$a,this._vbData[d$j+1]=d$b,this._vbData[d$j+2]=d$c,this._vbData[d$j+3]=d$d,this._vbData[d$j+4]=d$e,this._vbData[d$j+5]=d$f,this._vbData[d$j+6]=d$i,(d$j+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=d$j),this;},d$b.addIndexes=function(d$a){var d$b=arguments;this._hasBegun||this.addVertexIndexException();for(var d$c=0;d$c<d$b.length;d$c++)this._ibData[this._posInIBData]=d$b[d$c],this._posInIBData++;return this;},d$b.begin=function(d$a,d$b){return this._hasBegun&&this.beginException0(),1!==d$a&&4!==d$a&&this.beginException1(),this._primitiveType=d$a,this._camera=d$b,this._hasBegun=!0,this;},d$b.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this;},d$b.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(d$a._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),d$A.drawCall++,d$F.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0);},d$b.addVertexIndexException=function(){throw new Error("请先调用begin()函数");},d$b.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！");},d$b.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！");},d$b.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！");},d$b.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！");},d$b.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！");},d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(28,[new d$ia(0,"vector3",0),new d$ia(12,"vector4",1)]);}]),d$a;}()),d$W=function(){function d$a(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++d$a._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new d$ob();}d$p(d$a,"laya.d3.core.render.RenderElement");var d$b=d$a.prototype;return d$b.getDynamicBatchBakedVertexs=function(d$a){for(var d$b=this._renderObj._getVertexBuffer(d$a),d$c=d$b.getData().slice(),d$d=d$b.vertexDeclaration,d$e=d$d.getVertexElementByUsage(0).offset/4,d$f=d$d.getVertexElementByUsage(3).offset/4,d$i=this._sprite3D.transform,d$j=d$i.worldMatrix,d$k=d$i.rotation,d$l=d$d.vertexStride/4,d$m=0,d$n=d$c.length;d$m<d$n;d$m+=d$l){var d$o=d$m+d$e,d$p=d$m+d$f;d$sb.transformVector3ArrayToVector3ArrayCoordinate(d$c,d$o,d$j,d$c,d$o),d$sb.transformVector3ArrayByQuat(d$c,d$p,d$k,d$c,d$p);}return d$c;},d$b.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData();},d$b._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this);},d$q(0,d$b,"id",function(){return this._id;}),d$q(0,d$b,"renderObj",function(){return this._renderObj;},function(d$a){this._renderObj!==d$a&&(this._renderObj=d$a);}),d$a._uniqueIDCounter=0,d$a;}(),d$X=function(){function d$b(d$a){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++d$b._uniqueIDCounter,this._needSort=!1,this._scene=d$a,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={};}d$p(d$b,"laya.d3.core.render.RenderQueue");var d$a=d$b.prototype;return d$a._sortOpaqueFunc=function(d$a,d$b){if(d$a._render&&d$b._render){var d$c=d$a._material.renderQueue-d$b._material.renderQueue;return 0==d$c?d$a._render._distanceForSort-d$b._render._distanceForSort:d$c;}return 0;},d$a._sortAlphaFunc=function(d$a,d$b){if(d$a._render&&d$b._render){var d$c=d$a._material.renderQueue-d$b._material.renderQueue;return 0==d$c?d$b._render._distanceForSort-d$a._render._distanceForSort:d$c;}return 0;},d$a._begainRenderElement=function(d$a,d$b,d$c){return!!d$b._beforeRender(d$a);},d$a._sortAlpha=function(d$a){d$b._cameraPosition=d$a,this._finalElements.sort(this._sortAlphaFunc);},d$a._sortOpaque=function(d$a){d$b._cameraPosition=d$a,this._finalElements.sort(this._sortOpaqueFunc);},d$a._preRender=function(d$a){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements);},d$a._render=function(d$a,d$b){for(var d$c,d$d,d$e,d$f,d$i,d$j,d$k=d$A.loopCount,d$l=this._scene,d$m=d$a.camera,d$n=(d$m.id,!1),d$o=0,d$p=this._finalElements.length;d$o<d$p;d$o++){var d$q,d$r,d$s,d$t=this._finalElements[d$o];if(null!=d$t._onPreRenderFunction&&d$t._onPreRenderFunction.call(d$t._sprite3D,d$a),0===d$t._type){if(d$a.owner=d$s=d$t._sprite3D,d$a.renderElement=d$t,d$s._preRenderUpdateComponents(d$a),d$q=d$t.renderObj,d$r=d$t._material,this._begainRenderElement(d$a,d$q,d$r)){if(d$c=d$q._getVertexBuffers(),!(d$e=(d$d=d$q._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[d$d.id]){this._errorRecord[d$d.id]=1;var d$u="vertexBuffer:"+("("+d$d._destroyed+","+d$d._released+","+d$d._referenceCount+","+d$d._buffer+")")+", material:"+(d$r?d$r.__className+"("+d$r._destroyed+","+d$r._released+")":"null")+", owner:"+(d$s?d$s.__className+"("+d$s._destroyed+","+d$s._activeInHierarchy+","+d$s._displayedInStage+")":"null")+", renderObj:"+(d$q?d$q.__className+"("+d$q._destroyed+","+d$q._released+","+d$q._referenceCount+")":"")+", parent:, url:"+(d$s?d$s.url:"")+", disposeStack:"+d$d.disposeStack;d$x.recordError("报错：unknown vertexDeclaration  "+d$u);}continue;}if(d$n=(d$f=d$a._shader=d$r._getShader(d$l._shaderDefineValue,d$e.shaderDefineValue,d$s._shaderDefineValue)).bind()||d$k!==d$f._uploadLoopCount,d$c){if(d$f._uploadVertexBuffer!==d$c||d$n){for(var d$v=0;d$v<d$c.length;d$v++){var d$w=d$c[d$v];d$f.uploadAttributesX(d$w.vertexDeclaration.shaderValues.data,d$w);}d$f._uploadVertexBuffer=d$c;}}else(d$f._uploadVertexBuffer!==d$d||d$n)&&(d$f.uploadAttributes(d$e.shaderValues.data,null),d$f._uploadVertexBuffer=d$d);(d$f._uploadScene!==d$l||d$n)&&(d$f.uploadSceneUniforms(d$l._shaderValues.data),d$f._uploadScene=d$l),(d$m!==d$f._uploadCamera||d$f._uploadSprite3D!==d$s||d$n)&&(d$f.uploadSpriteUniforms(d$s._shaderValues.data),d$f._uploadSprite3D=d$s),(d$m!==d$f._uploadCamera||d$n)&&(d$f.uploadCameraUniforms(d$m._shaderValues.data),d$f._uploadCamera=d$m),(d$f._uploadMaterial!==d$r||d$n)&&(d$r._upload(),d$f._uploadMaterial=d$r),d$i!==d$r?(d$r._setRenderStateBlendDepth(),d$r._setRenderStateFrontFace(d$b,d$s.transform),d$i=d$r,d$j=d$s):d$j!==d$s&&(d$r._setRenderStateFrontFace(d$b,d$s.transform),d$j=d$s),d$q._render(d$a),d$f._uploadLoopCount=d$k;}d$s._postRenderUpdateComponents(d$a);}else if(2===d$t._type){d$t.renderObj;d$a.owner=d$s=d$t._sprite3D,d$a.renderElement=d$t,d$a._batchIndexStart=d$t._tempBatchIndexStart,d$a._batchIndexEnd=d$t._tempBatchIndexEnd,d$q=d$t.renderObj,d$r=d$t._material,this._begainRenderElement(d$a,d$q,d$r)&&(d$e=(d$d=d$q._getVertexBuffer(0)).vertexDeclaration,d$n=(d$f=d$a._shader=d$r._getShader(d$l._shaderDefineValue,d$e.shaderDefineValue,d$s._shaderDefineValue)).bind()||d$k!==d$f._uploadLoopCount,(d$f._uploadVertexBuffer!==d$d||d$n)&&(d$f.uploadAttributes(d$e.shaderValues.data,null),d$f._uploadVertexBuffer=d$d),(d$f._uploadScene!==d$l||d$n)&&(d$f.uploadSceneUniforms(d$l._shaderValues.data),d$f._uploadScene=d$l),(d$m!==d$f._uploadCamera||d$f._uploadSprite3D!==d$s||d$n)&&(d$f.uploadSpriteUniforms(d$s._shaderValues.data),d$f._uploadSprite3D=d$s),(d$m!==d$f._uploadCamera||d$n)&&(d$f.uploadCameraUniforms(d$m._shaderValues.data),d$f._uploadCamera=d$m),(d$f._uploadMaterial!==d$r||d$n)&&(d$r._upload(),d$f._uploadMaterial=d$r),d$i!==d$r?(d$r._setRenderStateBlendDepth(),d$r._setRenderStateFrontFace(d$b,d$s.transform),d$i=d$r,d$j=d$s):d$j!==d$s&&(d$r._setRenderStateFrontFace(d$b,d$s.transform),d$j=d$s),d$q._render(d$a),d$f._uploadLoopCount=d$k);}}},d$a._renderShadow=function(d$a,d$b){for(var d$c,d$d,d$e,d$f,d$i,d$j=d$A.loopCount,d$k=this._scene,d$l=d$a.camera,d$m=!1,d$n=0,d$o=this._finalElements.length;d$n<d$o;d$n++){var d$p,d$q,d$r,d$s=this._finalElements[d$n];0===d$s._type&&(d$a.owner=d$r=d$s._sprite3D,d$b||d$r._projectionViewWorldUpdateCamera===d$l&&d$r._projectionViewWorldUpdateLoopCount===d$A.loopCount||(d$r._render._renderUpdate(d$a._projectionViewMatrix),d$r._projectionViewWorldUpdateLoopCount=d$A.loopCount,d$r._projectionViewWorldUpdateCamera=d$l),d$a.renderElement=d$s,d$r._preRenderUpdateComponents(d$a),d$p=d$s.renderObj,d$q=d$s._material,this._begainRenderElement(d$a,d$p,null)&&(d$d=(d$c=d$p._getVertexBuffer(0)).vertexDeclaration,d$m=(d$e=d$a._shader=d$q._getShader(d$k._shaderDefineValue,d$d.shaderDefineValue,d$r._shaderDefineValue)).bind()||d$j!==d$e._uploadLoopCount,(d$e._uploadVertexBuffer!==d$c||d$m)&&(d$e.uploadAttributes(d$d.shaderValues.data,null),d$e._uploadVertexBuffer=d$c),(d$l!==d$e._uploadCamera||d$e._uploadSprite3D!==d$r||d$m)&&(d$e.uploadSpriteUniforms(d$r._shaderValues.data),d$e._uploadSprite3D=d$r),(d$l!==d$e._uploadCamera||d$m)&&(d$e.uploadCameraUniforms(d$l._shaderValues.data),d$e._uploadCamera=d$l),(d$e._uploadMaterial!==d$q||d$m)&&(d$q._upload(),d$e._uploadMaterial=d$q),d$e._uploadRenderElement,d$f!==d$q?(d$q._setRenderStateFrontFace(!1,d$r.transform),d$f=d$q,d$i=d$r):d$i!==d$r&&(d$q._setRenderStateFrontFace(!1,d$r.transform),d$i=d$r),d$p._render(d$a),d$e._uploadLoopCount=d$j),d$r._postRenderUpdateComponents(d$a));}},d$a._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0;},d$a._addRenderElement=function(d$a){this._renderElements.push(d$a),this._needSort=!0;},d$a._addDynamicBatchElement=function(d$a){this._dynamicBatchCombineRenderElements.push(d$a);},d$q(0,d$a,"id",function(){return this._id;}),d$b._uniqueIDCounter=0,d$b._cameraPosition=null,d$b;}(),d$Y=function(){function d$a(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null;}return d$p(d$a,"laya.d3.core.render.RenderState"),d$a.clientWidth=0,d$a.clientHeight=0,d$a;}(),d$Z=function(){function d$i(d$a,d$b){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new d$_a(new d$ib(),0),this._corners=[new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib()],this._boundingBoxCenter=new d$ib(),this._children=d$d(8),this._objects=[],this._tempBoundBoxCorners=[new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib()],this._scene=d$a,this._currentDepth=d$b;}d$p(d$i,"laya.d3.core.scene.OctreeNode");var d$a=d$i.prototype;return d$x.imps(d$a,{"laya.d3.core.scene.ITreeNode":!0}),d$a.init=function(d$a,d$b){var d$c=new d$ib(),d$d=new d$ib();d$ib.scale(d$b,-.5,d$c),d$ib.scale(d$b,.5,d$d),d$ib.add(d$c,d$a,d$c),d$ib.add(d$d,d$a,d$d),this.exactBox=new d$Za(d$c,d$d),this.relaxBox=new d$Za(d$c,d$d);},d$a.addTreeNode=function(d$a){1===Collision.boxContainsBox(this._relaxBox,d$a.boundingBox)?this.addNodeDown(d$a,0):this.addObject(d$a);},d$a.addChild=function(d$a){var d$b=this._children[d$a];if(null==d$b){d$b=new d$i(this._scene,this._currentDepth+1),(this._children[d$a]=d$b)._parent=this,d$ib.subtract(this._exactBox.max,this._exactBox.min,d$i.tempSize),d$ib.multiply(d$i.tempSize,d$i._octreeSplit[d$a],d$i.tempCenter),d$ib.add(this._exactBox.min,d$i.tempCenter,d$i.tempCenter),d$ib.scale(d$i.tempSize,.25,d$i.tempSize);var d$c=new d$ib(),d$d=new d$ib();d$ib.subtract(d$i.tempCenter,d$i.tempSize,d$c),d$ib.add(d$i.tempCenter,d$i.tempSize,d$d),d$b.exactBox=new d$Za(d$c,d$d),d$ib.scale(d$i.tempSize,d$i.relax,d$i.tempSize);var d$e=new d$ib(),d$f=new d$ib();d$ib.subtract(d$i.tempCenter,d$i.tempSize,d$e),d$ib.add(d$i.tempCenter,d$i.tempSize,d$f),d$b.relaxBox=new d$Za(d$e,d$f);}return d$b;},d$a.addObject=function(d$a){(d$a._treeNode=this)._objects.push(d$a);},d$a.removeObject=function(d$a){if(d$a._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var d$b=this._objects.indexOf(d$a);return-1!==d$b&&(this._objects.splice(d$b,1),!0);},d$a.clearObject=function(){this._objects.length=0;},d$a.addNodeUp=function(d$a,d$b){this._parent&&1!==Collision.boxContainsBox(this._exactBox,d$a.boundingBox)?this._parent.addNodeUp(d$a,d$b-1):this.addNodeDown(d$a,d$b);},d$a.addNodeDown=function(d$a,d$b){if(d$b<this._scene.treeLevel){var d$c=this.inChildIndex(d$a.boundingBoxCenter),d$d=this.addChild(d$c);1===Collision.boxContainsBox(d$d._relaxBox,d$a.boundingBox)?d$d.addNodeDown(d$a,++d$b):this.addObject(d$a);}else this.addObject(d$a);},d$a.inChildIndex=function(d$a){return 4*(d$a.z<this._boundingBoxCenter.z?0:1)+2*(d$a.y<this._boundingBoxCenter.y?0:1)+(d$a.x<this._boundingBoxCenter.x?0:1);},d$a.updateObject=function(d$a){1===Collision.boxContainsBox(this._relaxBox,d$a.boundingBox)?(this.removeObject(d$a),d$a._treeNode=null,this.addNodeDown(d$a,this._currentDepth)):this._parent&&(this.removeObject(d$a),d$a._treeNode=null,this._parent.addNodeUp(d$a,this._currentDepth-1));},d$a.cullingObjects=function(d$a,d$b,d$c,d$d,d$e){var d$f,d$i=0,d$j=0,d$k=0,d$l=this._scene._dynamicBatchManager;for(d$i=0,d$f=this._objects.length;d$i<d$f;d$i++){var d$m=this._objects[d$i];if(d$I.isVisible(d$m._owner.layer.mask)&&d$m.enable){if(d$b&&(d$A.treeSpriteCollision+=1,0===d$a.containsBoundSphere(d$m.boundingSphere)))continue;d$m._renderUpdate(d$e),d$m._distanceForSort=d$ib.distance(d$m.boundingSphere.center,d$d)+d$m.sortingFudge;var d$n=d$m._renderElements;for(d$j=0,d$k=d$n.length;d$j<d$k;d$j++){var d$o=d$n[d$j],d$p=d$o._staticBatch;if(d$p&&d$p._material===d$o._material)d$p._addBatchRenderElement(d$o);else{var d$q=d$o.renderObj;d$q.triangleCount<10&&1===d$q._vertexBufferCount&&d$q._getIndexBuffer()&&d$o._material.renderQueue<2&&d$o._canDynamicBatch&&!d$m._owner.isStatic?d$l._addPrepareRenderElement(d$o):this._scene.getRenderQueue(d$o._material.renderQueue)._addRenderElement(d$o);}}}}for(d$i=0;d$i<8;d$i++){var d$r=this._children[d$i];if(null!=d$r){var d$s=d$b;if(d$b){var d$t=d$a.containsBoundBox(d$r._relaxBox);if(d$A.treeNodeCollision+=1,0===d$t)continue;d$s=2===d$t;}d$r.cullingObjects(d$a,d$s,d$c,d$d,d$e);}}},d$a.cullingShadowObjects=function(d$a,d$b,d$c,d$d,d$e){var d$f,d$i=0,d$j=0,d$k=0;this._scene._dynamicBatchManager;for(d$i=0,d$f=this._objects.length;d$i<d$f;d$i++){var d$l=this._objects[d$i];if(d$l.castShadow&&d$I.isVisible(d$l._owner.layer.mask)&&d$l.enable){if(d$c&&0===d$a[0].containsBoundSphere(d$l.boundingSphere))continue;for(var d$m=1,d$n=d$a.length;d$m<d$n;d$m++){var d$o=d$b[d$m-1];if(0!==d$a[d$m].containsBoundSphere(d$l.boundingSphere)){var d$p=d$l._renderElements;for(d$j=0,d$k=d$p.length;d$j<d$k;d$j++)d$o._addRenderElement(d$p[d$j]);}}}}for(d$i=0;d$i<8;d$i++){var d$q=this._children[d$i];if(null!=d$q){var d$r=d$c;if(d$c){var d$s=d$a[0].containsBoundBox(d$q._relaxBox);if(0===d$s)continue;d$r=2===d$s;}d$q.cullingShadowObjects(d$a,d$b,d$r,d$d,d$e);}}},d$a.cullingShadowObjectsOnePSSM=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i,d$j=d$b[0],d$k=0,d$l=0,d$m=0;for(d$k=0,d$i=this._objects.length;d$k<d$i;d$k++){var d$n=this._objects[d$k];if(d$n.castShadow&&d$I.isVisible(d$n._owner.layer.mask)&&d$n.enable){if(d$d&&0===d$a.containsBoundSphere(d$n.boundingSphere))continue;d$n._renderUpdate(d$c);var d$o=d$n._renderElements;for(d$l=0,d$m=d$o.length;d$l<d$m;d$l++)d$j._addRenderElement(d$o[d$l]);}}for(d$k=0;d$k<8;d$k++){var d$p=this._children[d$k];if(null!=d$p){var d$q=d$d;if(d$d){var d$r=d$a.containsBoundBox(d$p._relaxBox);if(0===d$r)continue;d$q=2===d$r;}d$p.cullingShadowObjectsOnePSSM(d$a,d$b,d$c,d$q,d$e,d$f);}}},d$a.renderBoudingBox=function(d$a){this._renderBoudingBox(d$a);for(var d$b=0;d$b<8;++d$b){var d$c=this._children[d$b];d$c&&d$c.renderBoudingBox(d$a);}},d$a.buildAllChild=function(d$a){if(d$a<this._scene.treeLevel)for(var d$b=0;d$b<8;d$b++){this.addChild(d$b).buildAllChild(d$a+1);}},d$a._renderBoudingBox=function(d$a){},d$q(0,d$a,"exactBox",function(){return this._exactBox;},function(d$a){this._exactBox=d$a,d$ib.add(d$a.min,d$a.max,this._boundingBoxCenter),d$ib.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter);}),d$q(0,d$a,"relaxBox",function(){return this._relaxBox;},function(d$a){(this._relaxBox=d$a).getCorners(this._corners),d$_a.createfromPoints(this._corners,this._boundingSphere);}),d$i.debugMode=!1,d$i.relax=1.15,d$i.CHILDNUM=8,d$n(d$i,["tempVector0",function(){return this.tempVector0=new d$ib();},"tempSize",function(){return this.tempSize=new d$ib();},"tempCenter",function(){return this.tempCenter=new d$ib();},"_octreeSplit",function(){return this._octreeSplit=[new d$ib(.25,.25,.25),new d$ib(.75,.25,.25),new d$ib(.25,.75,.25),new d$ib(.75,.75,.25),new d$ib(.25,.25,.75),new d$ib(.75,.25,.75),new d$ib(.25,.75,.75),new d$ib(.75,.75,.75)];}]),d$i;}(),d$$=(function(){function d$a(){}d$p(d$a,"laya.d3.core.scene.SceneManager");}(),function(){function d$a(d$a,d$b,d$c,d$d){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===d$a&&(d$a=1),void 0===d$b&&(d$b=1),void 0===d$c&&(d$c=1),void 0===d$d&&(d$d=1),this._r=d$a,this._g=d$b,this._b=d$c,this._a=d$d;}return d$p(d$a,"laya.d3.core.trail.module.Color",null,"Color$1"),d$a.prototype.cloneTo=function(d$a){d$a._r=this._r,d$a._g=this._g,d$a._b=this._b,d$a._a=this._a;},d$n(d$a,["RED",function(){return this.RED=new d$a(1,0,0,1);},"GREEN",function(){return this.GREEN=new d$a(0,1,0,1);},"BLUE",function(){return this.BLUE=new d$a(0,0,1,1);},"CYAN",function(){return this.CYAN=new d$a(0,1,1,1);},"YELLOW",function(){return this.YELLOW=new d$a(1,.92,.016,1);},"MAGENTA",function(){return this.MAGENTA=new d$a(1,0,1,1);},"GRAY",function(){return this.GRAY=new d$a(.5,.5,.5,1);},"WHITE",function(){return this.WHITE=new d$a(1,1,1,1);},"BLACK",function(){return this.BLACK=new d$a(0,0,0,1);}]),d$a;}()),d$_=(function(){function d$a(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[];}d$p(d$a,"laya.d3.core.trail.module.Gradient");var d$b=d$a.prototype;d$b.setKeys=function(d$a,d$b){var d$c,d$d;this._colorKeys=d$a;for(var d$e=this.index=0;d$e<d$a.length;d$e++){var d$f=(d$c=d$a[d$e]).color;this._colorKeyData[this.index++]=d$f._r,this._colorKeyData[this.index++]=d$f._g,this._colorKeyData[this.index++]=d$f._b,this._colorKeyData[this.index++]=d$c.time;}this._alphaKeys=d$b;for(var d$i=this.index=0;d$i<d$b.length;d$i++)d$d=d$b[d$i],this._alphaKeyData[this.index++]=d$d.alpha,this._alphaKeyData[this.index++]=d$d.time;},d$b.cloneTo=function(d$a){var d$b=0,d$c=0,d$d=this.colorKeys,d$e=[];for(d$b=0,d$c=d$d.length;d$b<d$c;d$b++){var d$f=new d$g();d$d[d$b].cloneTo(d$f),d$e.push(d$f);}var d$i=this.alphaKeys,d$j=[];for(d$b=0,d$c=d$i.length;d$b<d$c;d$b++){var d$k=new d$_();d$i[d$b].cloneTo(d$k),d$j.push(d$k);}d$a.setKeys(d$e,d$j);},d$q(0,d$b,"mode",function(){return this._mode;},function(d$a){this._mode=d$a;}),d$q(0,d$b,"colorKeys",function(){return this._colorKeys;},function(d$a){this._colorKeys=d$a;for(var d$b=this.index=0;d$b<d$a.length;d$b++){var d$c=d$a[d$b],d$d=d$c.color;this._colorKeyData[this.index++]=d$d._r,this._colorKeyData[this.index++]=d$d._g,this._colorKeyData[this.index++]=d$d._b,this._colorKeyData[this.index++]=d$c.time;}}),d$q(0,d$b,"alphaKeys",function(){return this._alphaKeys;},function(d$a){this._alphaKeys=d$a;for(var d$b=this.index=0;d$b<d$a.length;d$b++){var d$c=d$a[d$b];this._alphaKeyData[this.index++]=d$c.alpha,this._alphaKeyData[this.index++]=d$c.time;}});}(),function(){function d$a(d$a,d$b){this._alpha=NaN,this._time=NaN,void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),this._alpha=d$a,this._time=d$b;}d$p(d$a,"laya.d3.core.trail.module.GradientAlphaKey");var d$b=d$a.prototype;return d$b.cloneTo=function(d$a){d$a.alpha=this.alpha,d$a.time=this.time;},d$q(0,d$b,"alpha",function(){return this._alpha;},function(d$a){this._alpha=d$a;}),d$q(0,d$b,"time",function(){return this._time;},function(d$a){this._time=d$a;}),d$a;}()),d$g=function(){function d$a(d$a,d$b){this._color=null,this._time=NaN,void 0===d$b&&(d$b=0),this._color=d$a||new d$$(),this._time=d$b;}d$p(d$a,"laya.d3.core.trail.module.GradientColorKey");var d$b=d$a.prototype;return d$b.cloneTo=function(d$a){this.color.cloneTo(d$a.color),d$a.time=this.time;},d$q(0,d$b,"color",function(){return this._color;},function(d$a){this._color=d$a;}),d$q(0,d$b,"time",function(){return this._time;},function(d$a){this._time=d$a;}),d$a;}(),d$h=(function(){function d$a(){}d$p(d$a,"laya.d3.core.trail.module.GradientMode"),d$a.Blend=0,d$a.Fixed=1;}(),function(){function d$a(){}d$p(d$a,"laya.d3.core.trail.module.TextureMode"),d$a.Stretch=0,d$a.Tile=1;}(),function(){function d$a(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN;}d$p(d$a,"laya.d3.core.trail.module.TrailKeyFrame"),d$a.prototype.cloneTo=function(d$a){d$a.time=this.time,d$a.inTangent=this.inTangent,d$a.outTangent=this.outTangent,d$a.value=this.value;};}(),function(){function d$b(d$a){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new d$ib(),this._curPosition=new d$ib(),this._delVector3=new d$ib(),this._lastFixedVertexPosition=new d$ib(),this._pointAtoBVector3=new d$ib(),this._pointA=new d$ib(),this._pointB=new d$ib(),this._owner=d$a,this._id=d$b.renderElementCount++,0==this._id?d$a._owner.transform.position.cloneTo(this._lastPosition):d$a._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new d$Ob(d$h.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new d$Ob(d$h.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2);}d$p(d$b,"laya.d3.core.trail.TrailRenderElement");var d$a=d$b.prototype;d$x.imps(d$a,{"laya.d3.core.render.IRenderable":!0}),d$a._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1);},d$a._addTrailByFirstPosition=function(d$a,d$b){d$ib.subtract(d$b,d$a,this._delVector3),d$ib.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),d$ib.normalize(this._pointAtoBVector3,this._pointAtoBVector3),d$ib.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(d$a),d$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0;},d$a._addTrailByNextPosition=function(d$a){d$ib.subtract(d$a,this._lastFixedVertexPosition,this._delVector3),d$ib.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),d$ib.normalize(this._pointAtoBVector3,this._pointAtoBVector3),d$ib.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=d$ib.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=d$ga.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(d$a),d$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(d$a),this._virtualVerticesCount=2);},d$a._updateVerticesByPosition=function(d$a){this._pointe=d$a.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0;},d$a._updateVertexBuffer2=function(){var d$a,d$b=0,d$c=0,d$d=0;for(d$d=0,d$a=(this._verticesCount+this._virtualVerticesCount)/2;d$d<d$a;d$d++)d$c=0==this._owner.textureMode?(this._VerticesToTailLength[d$d]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[d$d],this._vertices2[d$b++]=1-d$c,this._vertices2[d$b++]=1-d$c;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount);},d$a._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0;},d$a._updateDisappear=function(){var d$a,d$b=0;for(d$b=this._curDisappearIndex,d$a=(this._verticesCount+this._virtualVerticesCount)/2;d$b<d$a;d$b++)this._owner._curtime-this._everyGroupVertexBirthTime[d$b]>=this._owner.time+d$ga.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0));},d$a._beforeRender=function(d$a){return this._camera=d$a.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),d$ib.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0));},d$a._render=function(d$a){this._isDead||(d$F.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),d$A.drawCall++,d$A.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2);},d$a._getVertexBuffer=function(d$a){return void 0===d$a&&(d$a=0),0===d$a?this._vertexBuffer1:1===d$a?this._vertexBuffer2:null;},d$a._getVertexBuffers=function(){return this._vertexBuffers;},d$a._getIndexBuffer=function(){return null;},d$a.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition);},d$a._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null;},d$q(0,d$a,"_vertexBufferCount",function(){return this._vertexBuffers.length;}),d$q(0,d$a,"triangleCount",function(){return 0;}),d$b.renderElementCount=0;}(),function(){function d$a(){}d$p(d$a,"laya.d3.core.trail.VertexTrail");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration1;}),d$q(1,d$a,"vertexDeclaration1",function(){return d$a._vertexDeclaration1;}),d$q(1,d$a,"vertexDeclaration2",function(){return d$a._vertexDeclaration2;}),d$n(d$a,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new d$fa(32,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",41),new d$ia(24,"single",33),new d$ia(28,"single",40)]);},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new d$fa(4,[new d$ia(0,"single",38)]);}]),d$a;}()),d$aa=function(){function d$w(d$a){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=d$a;}d$p(d$w,"laya.d3.graphics.DynamicBatch");var d$a=d$w.prototype;return d$x.imps(d$a,{"laya.d3.core.render.IRenderable":!0}),d$a._getVertexBuffer=function(d$a){return void 0===d$a&&(d$a=0),0===d$a?this._vertexBuffer:null;},d$a._getIndexBuffer=function(){return this._indexBuffer;},d$a._getCombineRenderElementFromPool=function(d$a,d$b,d$c){var d$d=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return d$d||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=d$d=new d$W(),d$d._sprite3D=new d$Xb()),d$d._sprite3D._render._renderUpdate(d$c),d$d;},d$a._getRenderElement=function(d$a,d$b,d$c){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*d$w.maxVertexCount),this._indexDatas=new Uint16Array(d$w.maxIndexCount),this._vertexBuffer=d$Ob.create(this._vertexDeclaration,d$w.maxVertexCount,35048),this._indexBuffer=d$Nb.create("ushort",d$w.maxIndexCount,35048));for(var d$d=this._merageElements.length=0,d$e=0,d$f=0,d$i=this._combineRenderElements.length;d$f<d$i;d$f++){var d$j=this._combineRenderElements[d$f],d$k=d$j.getDynamicBatchBakedVertexs(0),d$l=d$j.getBakedIndices(),d$m=d$j._sprite3D.transform._isFrontFaceInvert,d$n=d$d/(this._vertexDeclaration.vertexStride/4),d$o=d$e,d$p=d$o+d$l.length;d$j._tempBatchIndexStart=d$o,d$j._tempBatchIndexEnd=d$p,this._indexDatas.set(d$l,d$e);var d$q=0;if(d$m)for(d$q=d$o;d$q<d$p;d$q+=3){this._indexDatas[d$q]=d$n+this._indexDatas[d$q];var d$r=this._indexDatas[d$q+1],d$s=this._indexDatas[d$q+2];this._indexDatas[d$q+1]=d$n+d$s,this._indexDatas[d$q+2]=d$n+d$r;}else for(d$q=d$o;d$q<d$p;d$q+=3)this._indexDatas[d$q]=d$n+this._indexDatas[d$q],this._indexDatas[d$q+1]=d$n+this._indexDatas[d$q+1],this._indexDatas[d$q+2]=d$n+this._indexDatas[d$q+2];d$e+=d$l.length,this._vertexDatas.set(d$k,d$d),d$d+=d$k.length;}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),d$f=this._combineRenderElementPoolIndex=0,d$i=this._materials.length;d$f<d$i;d$f++){var d$t=this._getCombineRenderElementFromPool(d$a,d$b,d$c);d$t._type=2,d$t._staticBatch=null;var d$u=(d$t.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[d$f]]._tempBatchIndexStart,d$v=d$f+1===this._materialToRenderElementsOffsets.length?d$e:this._combineRenderElements[this._materialToRenderElementsOffsets[d$f+1]]._tempBatchIndexStart;d$t._tempBatchIndexStart=d$u,d$t._tempBatchIndexEnd=d$v,d$t._material=this._materials[d$f],this._merageElements.push(d$t);}},d$a._addCombineRenderObjTest=function(d$a){var d$b=d$a.renderObj,d$c=this._currentCombineIndexCount+d$b._getIndexBuffer().indexCount,d$d=this._currentCombineVertexCount+d$b._getVertexBuffer().vertexCount;return!(d$w.maxVertexCount<d$d||d$w.maxIndexCount<d$c);},d$a._addCombineRenderObj=function(d$a){var d$b=d$a.renderObj;this._combineRenderElements.push(d$a),this._currentCombineIndexCount=this._currentCombineIndexCount+d$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+d$b._getVertexBuffer().vertexCount;},d$a._addCombineMaterial=function(d$a){this._materials.push(d$a);},d$a._addMaterialToRenderElementOffset=function(d$a){this._materialToRenderElementsOffsets.push(d$a);},d$a._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0;},d$a._addToRenderQueue=function(d$a,d$b,d$c,d$d){this._getRenderElement(d$b,d$c,d$d);for(var d$e=0,d$f=this._materials.length;d$e<d$f;d$e++)d$a.getRenderQueue(this._materials[d$e].renderQueue)._addDynamicBatchElement(this._merageElements[d$e]);},d$a._beforeRender=function(d$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},d$a._render=function(d$a){var d$b=d$a._batchIndexEnd-d$a._batchIndexStart;d$F.mainContext.drawElements(4,d$b,5123,2*d$a._batchIndexStart),d$A.drawCall++,d$A.trianglesFaces+=d$b/3;},d$a._getVertexBuffers=function(){return null;},d$q(0,d$a,"_vertexBufferCount",function(){return 1;}),d$q(0,d$a,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),d$q(0,d$a,"combineRenderElementsCount",function(){return this._combineRenderElements.length;}),d$w.maxVertexCount=2e4,d$w.maxIndexCount=4e4,d$w.maxCombineTriangleCount=10,d$w;}(),d$ba=function(){function d$w(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[];}d$p(d$w,"laya.d3.graphics.DynamicBatchManager");var d$a=d$w.prototype;return d$a.getDynamicBatch=function(d$a,d$b){var d$c,d$d=d$a.id.toString()+d$b;return this._dynamicBatches[d$d]?d$c=this._dynamicBatches[d$d]:this._dynamicBatches[d$d]=d$c=new d$aa(d$a),d$c;},d$a._garbageCollection=function(){for(var d$a in this._dynamicBatches)0===this._dynamicBatches[d$a].combineRenderElementsCount&&delete this._dynamicBatches[d$a];},d$a._addPrepareRenderElement=function(d$a){this._prepareDynamicBatchCombineElements.push(d$a);},d$a._finishCombineDynamicBatch=function(d$a){var d$b,d$c,d$d;this._prepareDynamicBatchCombineElements.sort(d$w._sortPrepareDynamicBatch);for(var d$e,d$f,d$i,d$j,d$k,d$l=-1,d$m=!0,d$n=0,d$o=-1,d$p=0,d$q=this._prepareDynamicBatchCombineElements.length;d$p<d$q;d$p++){var d$r=(d$f=this._prepareDynamicBatchCombineElements[d$p]).renderObj._getVertexBuffer(0).vertexDeclaration,d$s=d$c!==d$r;d$s&&(d$n=0,d$c=d$r);var d$t=d$n!==d$l;if(d$t&&(d$l=d$n),(d$s||d$t)&&(d$i=this.getDynamicBatch(d$r,d$n),d$b=null),d$m){if(d$i._addCombineRenderObjTest(d$f)){if(d$b!==(d$e=d$f._material))d$j&&(d$a.getRenderQueue(d$k._material.renderQueue)._addRenderElement(d$k),d$k=d$j=null,d$o=-1),d$j=d$e,d$o=d$i.combineRenderElementsCount,d$k=d$f,d$b=d$e;else if(d$j){var d$u=d$k.renderObj,d$v=d$f.renderObj;d$u._getVertexBuffer().vertexCount+d$v._getVertexBuffer().vertexCount>d$aa.maxVertexCount||d$u._getIndexBuffer().indexCount+d$v._getIndexBuffer().indexCount>d$aa.maxIndexCount?(d$a.getRenderQueue(d$k._material.renderQueue)._addRenderElement(d$k),d$j=d$e,d$o=d$i.combineRenderElementsCount,d$k=d$f):(d$i._addCombineMaterial(d$j),d$i._addMaterialToRenderElementOffset(d$o),d$i._addCombineRenderObj(d$k),d$k=d$j=null,d$o=-1,d$i._addCombineRenderObj(d$f));}else d$i._addCombineRenderObj(d$f);d$m=!0;}else d$j&&(d$a.getRenderQueue(d$k._material.renderQueue)._addRenderElement(d$k),d$k=d$j=null,d$o=-1),d$n++,d$m=!1;}else d$d=this._prepareDynamicBatchCombineElements[d$p-1],d$i._addMaterialToRenderElementOffset(d$i.combineRenderElementsCount),d$b=d$d._material,d$i._addCombineMaterial(d$b),d$i._addCombineRenderObj(d$d),d$m=!0,d$b!==(d$e=d$f._material)?(d$j=d$e,d$o=d$i.combineRenderElementsCount,d$k=d$f):d$i._addCombineRenderObj(d$f),d$b=d$e;}d$j&&(d$a.getRenderQueue(d$k._material.renderQueue)._addRenderElement(d$k),d$k=d$j=null,d$o=-1),this._prepareDynamicBatchCombineElements.length=0;},d$a._clearRenderElements=function(){for(var d$a in this._dynamicBatches)this._dynamicBatches[d$a]._clearRenderElements();},d$a._addToRenderQueue=function(d$a,d$b,d$c,d$d){for(var d$e in this._dynamicBatches){var d$f=this._dynamicBatches[d$e];0<d$f.combineRenderElementsCount&&d$f._addToRenderQueue(d$a,d$b,d$c,d$d);}},d$a.dispose=function(){this._dynamicBatches=null;},d$w._sortPrepareDynamicBatch=function(d$a,d$b){return d$a._mainSortID-d$b._mainSortID;},d$w;}(),d$ca=function(){function d$a(){}return d$p(d$a,"laya.d3.graphics.FrustumCulling"),d$a.renderShadowObjectCulling=function(d$a,d$b,d$c,d$d,d$e){var d$f=0,d$i=0,d$j=0,d$k=0;for(d$f=0,d$j=d$c.length;d$f<d$j;d$f++){var d$l=d$c[d$f];d$l&&d$l._clearRenderElements();}var d$m,d$n,d$o,d$p=d$a._cullingRenders;if(1<d$e){for(d$f=0,d$j=d$a._cullingRendersLength;d$f<d$j;d$f++)if((d$m=d$p[d$f]).castShadow&&d$I.isVisible(d$m._owner.layer.mask)&&d$m.enable)for(var d$q=1,d$r=d$b.length;d$q<d$r;d$q++)if(d$n=d$c[d$q-1],0!==d$b[d$q].containsBoundSphere(d$m.boundingSphere))for(d$i=0,d$k=(d$o=d$m._renderElements).length;d$i<d$k;d$i++)d$n._addRenderElement(d$o[d$i]);}else for(d$f=0,d$j=d$a._cullingRendersLength;d$f<d$j;d$f++)if((d$m=d$p[d$f]).castShadow&&d$I.isVisible(d$m._owner.layer.mask)&&d$m.enable&&0!==d$b[0].containsBoundSphere(d$m.boundingSphere))for(d$m._renderUpdate(d$d),d$n=d$c[0],d$i=0,d$k=(d$o=d$m._renderElements).length;d$i<d$k;d$i++)d$n._addRenderElement(d$o[d$i]);},d$a.renderShadowObjectCullingOctree=function(d$a,d$b,d$c,d$d,d$e){for(var d$f=0,d$i=d$c.length;d$f<d$i;d$f++){var d$j=d$c[d$f];d$j&&d$j._clearRenderElements();}1<d$e?d$a.treeRoot.cullingShadowObjects(d$b,d$c,!0,0,d$a):d$a.treeRoot.cullingShadowObjectsOnePSSM(d$b[0],d$c,d$d,!0,0,d$a);},d$a.renderObjectCulling=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=0,d$j=0,d$k=0,d$l=0,d$m=d$b._quenes,d$n=d$b._dynamicBatchManager,d$o=d$b._cullingRenders;for(d$i=0,d$j=d$m.length;d$i<d$j;d$i++){var d$p=d$m[d$i];d$p&&d$p._clearRenderElements();}var d$q=d$da._staticBatchManagers;for(d$i=0,d$j=d$q.length;d$i<d$j;d$i++)d$q[d$i]._clearRenderElements();d$n._clearRenderElements();var d$r=d$c.transform.position;for(d$i=0,d$j=d$b._cullingRendersLength;d$i<d$j;d$i++){var d$s=d$o[d$i];if(d$I.isVisible(d$s._owner.layer.mask)&&d$s.enable&&0!==d$a.containsBoundSphere(d$s.boundingSphere)&&d$s._renderUpdate(d$f)){d$s._distanceForSort=d$ib.distance(d$s.boundingSphere.center,d$r)+d$s.sortingFudge;var d$t=d$s._renderElements;for(d$k=0,d$l=d$t.length;d$k<d$l;d$k++){var d$u=d$t[d$k],d$v=d$u._staticBatch;if(d$v&&d$v._material===d$u._material)d$v._addBatchRenderElement(d$u);else{var d$w=d$u.renderObj;d$w.triangleCount<10&&1===d$w._vertexBufferCount&&d$w._getIndexBuffer()&&d$u._material.renderQueue<2&&d$u._canDynamicBatch&&!d$s._owner.isStatic?d$n._addPrepareRenderElement(d$u):d$b.getRenderQueue(d$u._material.renderQueue)._addRenderElement(d$u);}}}}for(d$i=0,d$j=d$q.length;d$i<d$j;d$i++)d$q[d$i]._addToRenderQueue(d$b,d$d,d$e,d$f);d$n._finishCombineDynamicBatch(d$b),d$n._addToRenderQueue(d$b,d$d,d$e,d$f);},d$a.renderObjectCullingOctree=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=0,d$j=0,d$k=d$b._quenes,d$l=d$b._dynamicBatchManager;for(d$i=0,d$j=d$k.length;d$i<d$j;d$i++){var d$m=d$k[d$i];d$m&&d$m._clearRenderElements();}var d$n=d$da._staticBatchManagers;for(d$i=0,d$j=d$n.length;d$i<d$j;d$i++)d$n[d$i]._clearRenderElements();for(d$l._clearRenderElements(),d$b._cullingRenders.length=0,d$b.treeRoot.cullingObjects(d$a,!0,0,d$c.transform.position,d$f),d$i=0,d$j=d$n.length;d$i<d$j;d$i++)d$n[d$i]._addToRenderQueue(d$b,d$d,d$e,d$f);d$l._finishCombineDynamicBatch(d$b),d$l._addToRenderQueue(d$b,d$d,d$e,d$f);},d$a.renderObjectCullingNoBoundFrustum=function(d$a,d$b,d$c,d$d,d$e){var d$f=0,d$i=0,d$j=0,d$k=0,d$l=d$a._quenes,d$m=d$a._dynamicBatchManager,d$n=d$a._cullingRenders;for(d$f=0,d$i=d$l.length;d$f<d$i;d$f++){var d$o=d$l[d$f];d$o&&d$o._clearRenderElements();}var d$p=d$da._staticBatchManagers;for(d$f=0,d$i=d$p.length;d$f<d$i;d$f++)d$p[d$f]._clearRenderElements();d$m._clearRenderElements();var d$q=d$b.transform.position;for(d$f=0,d$i=d$a._cullingRendersLength;d$f<d$i;d$f++){var d$r=d$n[d$f];if(d$I.isVisible(d$r._owner.layer.mask)&&d$r.enable){d$r._renderUpdate(d$e),d$r._distanceForSort=d$ib.distance(d$r.boundingSphere.center,d$q)+d$r.sortingFudge;var d$s=d$r._renderElements;for(d$j=0,d$k=d$s.length;d$j<d$k;d$j++){var d$t=d$s[d$j],d$u=d$t._staticBatch;if(d$u&&d$u._material===d$t._material)d$u._addBatchRenderElement(d$t);else{var d$v=d$t.renderObj;d$v.triangleCount<10&&1===d$v._vertexBufferCount&&d$v._getIndexBuffer()&&d$t._material.renderQueue<2&&d$t._canDynamicBatch&&!d$r._owner.isStatic?d$m._addPrepareRenderElement(d$t):d$a.getRenderQueue(d$t._material.renderQueue)._addRenderElement(d$t);}}}}for(d$f=0,d$i=d$p.length;d$f<d$i;d$f++)d$p[d$f]._addToRenderQueue(d$a,d$c,d$d,d$e);d$m._finishCombineDynamicBatch(d$a),d$m._addToRenderQueue(d$a,d$c,d$d,d$e);},d$a;}(),d$da=function(){function d$f(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={};}d$p(d$f,"laya.d3.graphics.StaticBatchManager");var d$a=d$f.prototype;return d$a._finishInit=function(){for(var d$a in this._staticBatches)this._staticBatches[d$a]._finishInit();this._initBatchRenderElements.length=0;},d$a._initStaticBatchs=function(d$a){throw new Error("StaticBatchManager:must override this function.");},d$a._addInitBatchSprite=function(d$a){for(var d$b=d$a._render._renderElements,d$c=0,d$d=d$b.length;d$c<d$d;d$c++)this._initBatchRenderElements.push(d$b[d$c]);},d$a._clearRenderElements=function(){for(var d$a in this._staticBatches)this._staticBatches[d$a]._clearRenderElements();},d$a._garbageCollection=function(d$a){var d$b=d$a._staticBatch,d$c=d$b._initBatchRenderElements,d$d=d$c.indexOf(d$a);d$c.splice(d$d,1),0===d$c.length&&(d$b.dispose(),delete this._staticBatches[d$b._key]);},d$a._addToRenderQueue=function(d$a,d$b,d$c,d$d){for(var d$e in this._staticBatches){var d$f=this._staticBatches[d$e];0<d$f._batchRenderElements.length&&d$f._updateToRenderQueue(d$a,d$d);}},d$a.dispose=function(){this._staticBatches=null;},d$f._addToStaticBatchQueue=function(d$a){d$a instanceof laya.d3.core.RenderableSprite3D&&d$a._addToInitStaticBatchManager();for(var d$b=0,d$c=d$a.numChildren;d$b<d$c;d$b++)d$f._addToStaticBatchQueue(d$a._childs[d$b]);},d$f.combine=function(d$a,d$b){var d$c,d$d=0,d$e=0;if(d$b)for(d$d=0,d$e=d$b.length;d$d<d$e;d$d++){d$b[d$d]._addToInitStaticBatchManager();}else d$a&&d$f._addToStaticBatchQueue(d$a);for(d$d=0,d$e=d$f._staticBatchManagers.length;d$d<d$e;d$d++)(d$c=d$f._staticBatchManagers[d$d])._initStaticBatchs(d$a),d$c._finishInit();},d$f._staticBatchManagers=[],d$f;}(),d$ea=function(){function d$a(d$a,d$b,d$c){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=d$a,this._manager=d$b,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=d$c;}d$p(d$a,"laya.d3.graphics.StaticBatch");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),d$b._binarySearch=function(d$a){for(var d$b=0,d$c=this._batchRenderElements.length-1,d$d=0;d$b<=d$c;)d$d=Math.floor((d$b+d$c)/2),this._compareBatchRenderElement(this._batchRenderElements[d$d],d$a)?d$c=d$d-1:d$b=d$d+1;return d$b;},d$b._compareBatchRenderElement=function(d$a,d$b){throw new Error("StaticBatch:must override this function.");},d$b._getVertexDecLightMap=function(d$a){return d$a===d$Na.vertexDeclaration?d$Ia.vertexDeclaration:d$a===d$Ma.vertexDeclaration?d$Ha.vertexDeclaration:d$a===d$Ba.vertexDeclaration?d$wa.vertexDeclaration:d$a===d$Ra.vertexDeclaration?null:d$a===d$ra.vertexDeclaration?d$sa.vertexDeclaration:d$a===d$Pa.vertexDeclaration?d$Ka.vertexDeclaration:d$a===d$Fa.vertexDeclaration?d$Ga.vertexDeclaration:d$a===d$Oa.vertexDeclaration?d$Ja.vertexDeclaration:d$a===d$Ma.vertexDeclaration?d$Ha.vertexDeclaration:d$a===d$Ca.vertexDeclaration?d$xa.vertexDeclaration:d$a===d$Ra.vertexDeclaration?null:d$a===d$ra.vertexDeclaration?d$sa.vertexDeclaration:d$a===d$Qa.vertexDeclaration?d$La.vertexDeclaration:d$a===d$Fa.vertexDeclaration?d$Ga.vertexDeclaration:d$a;},d$b._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.");},d$b._addBatchRenderElement=function(d$a){this._batchRenderElements.splice(this._binarySearch(d$a),0,d$a);},d$b._updateToRenderQueue=function(d$a,d$b){this._combineRenderElementPoolIndex=0,this._getRenderElement(d$a.getRenderQueue(this._material.renderQueue)._renderElements,d$a,d$b);},d$b._getRenderElement=function(d$a,d$b,d$c){throw new Error("StaticBatch:must override this function.");},d$b._finishInit=function(){throw new Error("StaticBatch:must override this function.");},d$b._clearRenderElements=function(){this._batchRenderElements.length=0;},d$b.dispose=function(){},d$b._getVertexBuffer=function(d$a){return void 0===d$a&&(d$a=0),null;},d$b._getIndexBuffer=function(){return null;},d$b._beforeRender=function(d$a){return!0;},d$b._render=function(d$a){},d$b._getVertexBuffers=function(){return null;},d$q(0,d$b,"_vertexBufferCount",function(){return 1;}),d$q(0,d$b,"triangleCount",function(){return 0;}),d$a.combine=function(d$a){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),d$da.combine(d$a);},d$a.maxBatchVertexCount=65535,d$a;}(),d$fa=function(){function d$i(d$a,d$b){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++d$i._uniqueIDCounter,this._id>d$i.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",d$i.maxVertexDeclaration);this._shaderValues=new d$ob(),this._vertexElementsDic={},this._vertexStride=d$a,this._vertexElements=d$b;for(var d$c=0;d$c<d$b.length;d$c++){var d$d=d$b[d$c],d$e=d$d.elementUsage;this._vertexElementsDic[d$e]=d$d;var d$f=[d$i._getTypeSize(d$d.elementFormat)/4,5126,!1,this._vertexStride,d$d.offset];switch(this._shaderValues.setValue(d$e,d$f),d$e){case 1:this._addShaderDefine(d$Ab.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(d$Ab.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(d$Ab.SHADERDEFINE_UV1);}}}d$p(d$i,"laya.d3.graphics.VertexDeclaration");var d$a=d$i.prototype;return d$a._addShaderDefine=function(d$a){this._shaderDefineValue|=d$a;},d$a._removeShaderDefine=function(d$a){this._shaderDefineValue&=~d$a;},d$a.getVertexElements=function(){return this._vertexElements.slice();},d$a.getVertexElementByUsage=function(d$a){return this._vertexElementsDic[d$a];},d$a.unBinding=function(){},d$q(0,d$a,"shaderDefineValue",function(){return this._shaderDefineValue;}),d$q(0,d$a,"id",function(){return this._id;}),d$q(0,d$a,"vertexStride",function(){return this._vertexStride;}),d$q(0,d$a,"shaderValues",function(){return this._shaderValues;}),d$i._getTypeSize=function(d$a){switch(d$a){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8;}return 0;},d$i.getVertexStride=function(d$a){for(var d$b=0,d$c=0;d$c<d$a.Length;d$c++){var d$d=d$a[d$c],d$e=d$d.offset+d$i._getTypeSize(d$d.elementFormat);d$b<d$e&&(d$b=d$e);}return d$b;},d$i._maxVertexDeclarationBit=1e3,d$i._uniqueIDCounter=1,d$n(d$i,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647);}]),d$i;}(),d$ia=function(){function d$a(d$a,d$b,d$c){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=d$a,this.elementFormat=d$b,this.elementUsage=d$c;}return d$p(d$a,"laya.d3.graphics.VertexElement"),d$a;}(),d$ja=(function(){function d$a(){}d$p(d$a,"laya.d3.graphics.VertexElementFormat"),d$a.Single="single",d$a.Vector2="vector2",d$a.Vector3="vector3",d$a.Vector4="vector4",d$a.Color="color",d$a.Byte4="byte4",d$a.Short2="short2",d$a.Short4="short4",d$a.NormalizedShort2="normalizedshort2",d$a.NormalizedShort4="normalizedshort4",d$a.HalfVector2="halfvector2",d$a.HalfVector4="halfvector4";}(),function(){function d$a(){}d$p(d$a,"laya.d3.graphics.VertexElementUsage"),d$a.POSITION0=0,d$a.COLOR0=1,d$a.TEXTURECOORDINATE0=2,d$a.NORMAL0=3,d$a.BINORMAL0=4,d$a.TANGENT0=5,d$a.BLENDINDICES0=6,d$a.BLENDWEIGHT0=7,d$a.DEPTH0=8,d$a.FOG0=9,d$a.POINTSIZE0=10,d$a.SAMPLE0=11,d$a.TESSELLATEFACTOR0=12,d$a.COLOR1=13,d$a.NEXTTEXTURECOORDINATE0=14,d$a.TEXTURECOORDINATE1=15,d$a.NEXTTEXTURECOORDINATE1=16,d$a.CORNERTEXTURECOORDINATE0=17,d$a.VELOCITY0=18,d$a.STARTCOLOR0=19,d$a.STARTSIZE=20,d$a.AGEADDSCALE0=21,d$a.STARTROTATION=22,d$a.ENDCOLOR0=23,d$a.STARTLIFETIME=24,d$a.TIME0=33,d$a.SHAPEPOSITIONSTARTLIFETIME=30,d$a.DIRECTIONTIME=32,d$a.SIZEROTATION0=27,d$a.RADIUS0=28,d$a.RADIAN0=29,d$a.STARTSPEED=31,d$a.RANDOM0=34,d$a.RANDOM1=35,d$a.SIMULATIONWORLDPOSTION=36,d$a.SIMULATIONWORLDROTATION=37,d$a.TEXTURECOORDINATE0X=38,d$a.TEXTURECOORDINATE0X1=39,d$a.TEXTURECOORDINATE0Y=40,d$a.OFFSETVECTOR=41;}(),function(){function d$a(d$a,d$b,d$c){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=d$a,this._textureCoordinate0=d$b,this._time=d$c;}d$p(d$a,"laya.d3.graphics.VertexGlitter");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate0;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"time",function(){return this._time;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(24,[new d$ia(0,"vector3",0),new d$ia(12,"vector2",2),new d$ia(20,"single",33)]);}]);}(),function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=d$a,this._position=d$b,this._velocity=d$c,this._startColor=d$d,this._endColor=d$e,this._sizeRotation=d$f,this._radius=d$i,this._radian=d$j,this._ageAddScale=d$k,this._time=d$l;}d$p(d$a,"laya.d3.graphics.VertexParticle");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"endColor",function(){return this._endColor;}),d$q(0,d$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),d$q(0,d$b,"sizeRotation",function(){return this._sizeRotation;}),d$q(0,d$b,"velocity",function(){return this._velocity;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"startColor",function(){return this._startColor;}),d$q(0,d$b,"radius",function(){return this._radius;}),d$q(0,d$b,"radian",function(){return this._radian;}),d$q(0,d$b,"ageAddScale",function(){return this._ageAddScale;}),d$q(0,d$b,"time",function(){return this._time;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(116,[new d$ia(0,"vector4",17),new d$ia(16,"vector3",0),new d$ia(28,"vector3",18),new d$ia(40,"vector4",19),new d$ia(56,"vector4",23),new d$ia(72,"vector3",27),new d$ia(84,"vector2",28),new d$ia(92,"vector4",29),new d$ia(108,"single",24),new d$ia(112,"single",33)]);}]);}(),function(){function d$a(d$a){this._position=null,this._position=d$a;}d$p(d$a,"laya.d3.graphics.VertexPosition");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(12,[new d$ia(0,"vector3",0)]);}]),d$a;}()),d$ka=function(){function d$a(d$a,d$b){this._position=null,this._normal=null,this._position=d$a,this._normal=d$b;}d$p(d$a,"laya.d3.graphics.VertexPositionNormal");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(24,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3)]);}]),d$a;}(),d$la=function(){function d$a(d$a,d$b,d$c){this._position=null,this._normal=null,this._color=null,this._position=d$a,this._normal=d$b,this._color=d$c;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColor");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(40,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1)]);}]),d$a;}(),d$ma=function(){function d$a(d$a,d$b,d$c,d$d,d$e){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._blendIndex=d$d,this._blendWeight=d$e;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorSkin");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(72,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector4",7),new d$ia(56,"vector4",6)]);}]),d$a;}(),d$na=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._tangent=d$d,this._blendIndex=d$e,this._blendWeight=d$f;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(88,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector4",7),new d$ia(56,"vector4",6),new d$ia(72,"vector4",5)]);}]),d$a;}(),d$oa=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._tangent=d$d,this._blendIndex=d$e,this._blendWeight=d$f;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(84,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector4",7),new d$ia(56,"vector4",6),new d$ia(72,"vector3",5)]);}]),d$a;}(),d$pa=function(){function d$a(d$a,d$b,d$c,d$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._tangent=d$d;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorSTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(56,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector4",5)]);}]),d$a;}(),d$qa=function(){function d$a(d$a,d$b,d$c,d$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._tangent=d$d;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(52,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector3",5)]);}]),d$a;}(),d$ra=function(){function d$a(d$a,d$b,d$c,d$d){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate=d$d;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTexture");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(48,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2)]);}]),d$a;}(),d$sa=function(){function d$a(d$a,d$b,d$c,d$d,d$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate0=d$d,this._textureCoordinate1=d$e;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(56,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector2",15)]);}]),d$a;}(),d$ta=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate0=d$d,this._textureCoordinate1=d$e,this._blendIndex=d$f,this._blendWeight=d$i;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(88,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector2",15),new d$ia(56,"vector4",7),new d$ia(72,"vector4",6)]);}]),d$a;}(),d$ua=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate0=d$d,this._textureCoordinate1=d$e,this._tangent=d$f,this._blendIndex=d$i,this._blendWeight=d$j;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(104,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector2",15),new d$ia(56,"vector4",7),new d$ia(72,"vector4",6),new d$ia(88,"vector4",5)]);}]),d$a;}(),d$va=function(){function d$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$b.VertexPositionNormalColorTexture0SkinTangent=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate0=d$d,this._textureCoordinate1=d$e,this._tangent=d$f,this._blendIndex=d$i,this._blendWeight=d$j;},d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(100,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector2",15),new d$ia(56,"vector4",7),new d$ia(72,"vector4",6),new d$ia(88,"vector3",5)]);}]),d$a;}(),d$wa=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate0=d$d,this._textureCoordinate1=d$e,this._tangent=d$f;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(72,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector2",15),new d$ia(56,"vector4",5)]);}]),d$a;}(),d$xa=function(){function d$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$b.VertexPositionNormalColorTexture0Tangent=function(d$a,d$b,d$c,d$d,d$e,d$f){this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate0=d$d,this._textureCoordinate1=d$e,this._tangent=d$f;},d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(68,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector2",15),new d$ia(56,"vector3",5)]);}]),d$a;}(),d$ya=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate=d$d,this._blendIndex=d$e,this._blendWeight=d$f;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(80,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector4",7),new d$ia(64,"vector4",6)]);}]),d$a;}(),d$za=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate=d$d,this._tangent=d$e,this._blendIndex=d$f,this._blendWeight=d$i;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(96,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector4",7),new d$ia(64,"vector4",6),new d$ia(80,"vector4",5)]);}]),d$a;}(),d$Aa=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate=d$d,this._tangent=d$e,this._blendIndex=d$f,this._blendWeight=d$i;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(92,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector4",7),new d$ia(64,"vector4",6),new d$ia(80,"vector3",5)]);}]),d$a;}(),d$Ba=function(){function d$a(d$a,d$b,d$c,d$d,d$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate=d$d,this._tangent=d$e;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(64,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector4",5)]);}]),d$a;}(),d$Ca=function(){function d$a(d$a,d$b,d$c,d$d,d$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._color=d$c,this._textureCoordinate=d$d,this._tangent=d$e;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"color",function(){return this._color;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(60,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",1),new d$ia(40,"vector2",2),new d$ia(48,"vector3",5)]);}]),d$a;}(),d$Da=function(){function d$a(d$a,d$b,d$c){this._position=null,this._normal=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._tangent=d$c;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalSTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(40,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector4",5)]);}]),d$a;}(),d$Ea=function(){function d$a(d$a,d$b,d$c){this._position=null,this._normal=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._tangent=d$c;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(36,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector3",5)]);}]),d$a;}(),d$Fa=function(){function d$a(d$a,d$b,d$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=d$a,this._normal=d$b,this._textureCoordinate=d$c;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTexture");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(32,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2)]);}]),d$a;}(),d$Ga=function(){function d$a(d$a,d$b,d$c,d$d){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=d$a,this._normal=d$b,this._textureCoordinate0=d$c,this._textureCoordinate1=d$d;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(40,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector2",15)]);}]),d$a;}(),d$Ha=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=d$a,this._normal=d$b,this._textureCoordinate0=d$c,this._textureCoordinate1=d$d,this._blendIndex=d$e,this._blendWeight=d$f;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(72,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector2",15),new d$ia(40,"vector4",7),new d$ia(56,"vector4",6)]);}]),d$a;}(),d$Ia=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._textureCoordinate0=d$c,this._textureCoordinate1=d$d,this._tangent=d$e,this._blendIndex=d$f,this._blendWeight=d$i;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(88,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector2",15),new d$ia(40,"vector4",7),new d$ia(56,"vector4",6),new d$ia(72,"vector4",5)]);}]),d$a;}(),d$Ja=function(){function d$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$b.VertexPositionNormalTexture0SkinTangent=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){this._position=d$a,this._normal=d$b,this._textureCoordinate0=d$c,this._textureCoordinate1=d$d,this._tangent=d$e,this._blendIndex=d$f,this._blendWeight=d$i;},d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(84,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector2",15),new d$ia(40,"vector4",7),new d$ia(56,"vector4",6),new d$ia(72,"vector3",5)]);}]),d$a;}(),d$Ka=function(){function d$a(d$a,d$b,d$c,d$d,d$e){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._textureCoordinate0=d$c,this._textureCoordinate1=d$d,this._tangent=d$e;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(56,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector2",15),new d$ia(40,"vector4",5)]);}]),d$a;}(),d$La=function(){function d$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$b.VertexPositionNormalTexture0Tangent=function(d$a,d$b,d$c,d$d,d$e){this._position=d$a,this._normal=d$b,this._textureCoordinate0=d$c,this._textureCoordinate1=d$d,this._tangent=d$e;},d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(52,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector2",15),new d$ia(40,"vector3",5)]);}]),d$a;}(),d$Ma=function(){function d$a(d$a,d$b,d$c,d$d,d$e){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=d$a,this._normal=d$b,this._textureCoordinate=d$c,this._blendIndex=d$d,this._blendWeight=d$e;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTextureSkin");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(64,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector4",7),new d$ia(48,"vector4",6)]);}]),d$a;}(),d$Na=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._textureCoordinate=d$c,this._tangent=d$d,this._blendIndex=d$e,this._blendWeight=d$f;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(80,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector4",7),new d$ia(48,"vector4",6),new d$ia(64,"vector4",5)]);}]),d$a;}(),d$Oa=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._textureCoordinate=d$c,this._tangent=d$d,this._blendIndex=d$e,this._blendWeight=d$f;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(76,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector4",7),new d$ia(48,"vector4",6),new d$ia(64,"vector3",5)]);}]),d$a;}(),d$Pa=function(){function d$a(d$a,d$b,d$c,d$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._textureCoordinate=d$c,this._tangent=d$d;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(48,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector4",5)]);}]),d$a;}(),d$Qa=function(){function d$a(d$a,d$b,d$c,d$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=d$a,this._normal=d$b,this._textureCoordinate=d$c,this._tangent=d$d;}d$p(d$a,"laya.d3.graphics.VertexPositionNormalTextureTangent");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(44,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector3",5)]);}]),d$a;}(),d$Ra=function(){function d$a(d$a,d$b,d$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=d$a,this._normal=d$b,this._textureCoordinate=d$c;}d$p(d$a,"laya.d3.graphics.VertexPositionNTBTexture");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(56,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector3",5),new d$ia(36,"vector3",4),new d$ia(48,"vector2",2)]);}]),d$a;}(),d$Sa=function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=d$a,this._normal=d$b,this._textureCoordinate0=d$d,this._textureCoordinate1=d$e,this._tangent=d$f,d$c=d$c,this._blendIndex=d$i,this._blendWeight=d$j;}d$p(d$a,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"tangent",function(){return this._tangent;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(0,d$b,"textureCoordinate1",function(){return this._textureCoordinate1;}),d$q(0,d$b,"blendIndex",function(){return this._blendIndex;}),d$q(0,d$b,"blendWeight",function(){return this._blendWeight;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(96,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector3",5),new d$ia(36,"vector3",4),new d$ia(48,"vector2",2),new d$ia(56,"vector2",15),new d$ia(64,"vector4",7),new d$ia(80,"vector4",6)]);}]),d$a;}(),d$Ta=function(){function d$a(d$a,d$b,d$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=d$a,this._normal=d$b,this._textureCoordinate=d$c;}d$p(d$a,"laya.d3.graphics.VertexPositionNTBTextureSkin");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"textureCoordinate",function(){return this._textureCoordinate;}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(88,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector3",5),new d$ia(36,"vector3",4),new d$ia(48,"vector2",2),new d$ia(56,"vector4",7),new d$ia(72,"vector4",6)]);}]),d$a;}(),d$Ua=(function(){function d$a(d$a,d$b,d$c,d$d){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=d$a,this._normal=d$b,this._textureCoord0=d$c,this._textureCoord1=d$d;}d$p(d$a,"laya.d3.graphics.VertexPositionTerrain");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"normal",function(){return this._normal;}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"textureCoord0",function(){return this._textureCoord0;}),d$q(0,d$b,"textureCoord1",function(){return this._textureCoord1;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(40,[new d$ia(0,"vector3",0),new d$ia(12,"vector3",3),new d$ia(24,"vector2",2),new d$ia(32,"vector2",15)]);}]);}(),function(){function d$a(d$a,d$b){this._position=null,this._textureCoordinate0=null,this._position=d$a,this._textureCoordinate0=d$b;}d$p(d$a,"laya.d3.graphics.VertexPositionTexture0");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"position",function(){return this._position;}),d$q(0,d$b,"textureCoordinate0",function(){return this._textureCoordinate0;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(20,[new d$ia(0,"vector3",0),new d$ia(12,"vector2",2)]);}]),d$a;}()),d$Va=(function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$n,d$o,d$p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=d$a,this._positionStartLifeTime=d$b,this._velocity=d$c,this._startColor=d$d,this._startSize=d$e,this._startRotation0=d$f,this._startRotation1=d$i,this._startRotation2=d$j,this._startLifeTime=d$k,this._time=d$l,this._startSpeed=d$m,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=d$p;}d$p(d$a,"laya.d3.graphics.VertexShurikenParticleBillboard");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),d$q(0,d$b,"random1",function(){return this._randoms1;}),d$q(0,d$b,"startRotation2",function(){return this._startRotation2;}),d$q(0,d$b,"positionStartLifeTime",function(){return this._positionStartLifeTime;}),d$q(0,d$b,"velocity",function(){return this._velocity;}),d$q(0,d$b,"random0",function(){return this._randoms0;}),d$q(0,d$b,"startSize",function(){return this._startSize;}),d$q(0,d$b,"startColor",function(){return this._startColor;}),d$q(0,d$b,"startRotation0",function(){return this._startRotation0;}),d$q(0,d$b,"startRotation1",function(){return this._startRotation1;}),d$q(0,d$b,"startLifeTime",function(){return this._startLifeTime;}),d$q(0,d$b,"time",function(){return this._time;}),d$q(0,d$b,"startSpeed",function(){return this._startSpeed;}),d$q(0,d$b,"simulationWorldPostion",function(){return this._simulationWorldPostion;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(152,[new d$ia(0,"vector4",17),new d$ia(16,"vector4",30),new d$ia(32,"vector4",32),new d$ia(48,"vector4",19),new d$ia(64,"vector3",20),new d$ia(76,"vector3",22),new d$ia(88,"single",31),new d$ia(92,"vector4",34),new d$ia(108,"vector4",35),new d$ia(124,"vector3",36),new d$ia(136,"vector4",37)]);}]);}(),function(){function d$a(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$n,d$o,d$p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=d$a,this._positionStartLifeTime=d$b,this._velocity=d$c,this._startColor=d$d,this._startSize=d$e,this._startRotation0=d$f,this._startRotation1=d$i,this._startRotation2=d$j,this._startLifeTime=d$k,this._time=d$l,this._startSpeed=d$m,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=d$p;}d$p(d$a,"laya.d3.graphics.VertexShurikenParticleMesh");var d$b=d$a.prototype;d$x.imps(d$b,{"laya.d3.graphics.IVertex":!0}),d$q(0,d$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate;}),d$q(0,d$b,"velocity",function(){return this._velocity;}),d$q(0,d$b,"position",function(){return this._positionStartLifeTime;}),d$q(0,d$b,"random0",function(){return this._randoms0;}),d$q(0,d$b,"startSize",function(){return this._startSize;}),d$q(0,d$b,"startColor",function(){return this._startColor;}),d$q(0,d$b,"startRotation0",function(){return this._startRotation0;}),d$q(0,d$b,"startRotation1",function(){return this._startRotation1;}),d$q(0,d$b,"random1",function(){return this._randoms1;}),d$q(0,d$b,"startRotation2",function(){return this._startRotation2;}),d$q(0,d$b,"startLifeTime",function(){return this._startLifeTime;}),d$q(0,d$b,"time",function(){return this._time;}),d$q(0,d$b,"startSpeed",function(){return this._startSpeed;}),d$q(0,d$b,"simulationWorldPostion",function(){return this._simulationWorldPostion;}),d$q(0,d$b,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$q(1,d$a,"vertexDeclaration",function(){return d$a._vertexDeclaration;}),d$n(d$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new d$fa(172,[new d$ia(0,"vector3",0),new d$ia(12,"vector4",1),new d$ia(28,"vector2",2),new d$ia(36,"vector4",30),new d$ia(52,"vector4",32),new d$ia(68,"vector4",19),new d$ia(84,"vector3",20),new d$ia(96,"vector3",22),new d$ia(108,"single",31),new d$ia(112,"vector4",34),new d$ia(128,"vector4",35),new d$ia(144,"vector3",36),new d$ia(156,"vector4",37)]);}]);}(),function(){function d$v(d$a,d$b,d$c,d$d,d$e,d$f){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=d$c,this._materials=d$d,this._subMeshes=d$e,this._materialMap=d$f,this._version=d$b,this._onLoaded(d$a);}d$p(d$v,"laya.d3.loaders.LoadModelV01");var d$a=d$v.prototype;return d$a._onLoaded=function(d$a){this._readData=d$a,this.READ_BLOCK();for(var d$b=0;d$b<this._BLOCK.count;d$b++){var d$c=this._readData.getUint16(),d$d=this._strings[d$c],d$e=this["READ_"+d$d];if(null==d$e)throw new Error("model file err,no this function:"+d$c+" "+d$d);if(!d$e.call(this))break;}return this._mesh;},d$a.onError=function(){},d$a._readString=function(){return this._strings[this._readData.getUint16()];},d$a.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0;},d$a.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0;},d$a.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var d$a=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var d$b=0;d$b<this._STRINGS.size;d$b++)this._strings[d$b]=this._readData.readUTFString();return this._readData.pos=d$a,!0;},d$a.READ_MATERIAL=function(){var d$a=this._readData.getUint16(),d$b=(this._readString(),this._readString());return this._materials[d$a]="null"!==d$b?d$t.getRes(this._materialMap[d$b]):new d$Eb(),!0;},d$a.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var d$a,d$b=this._readData.__getBuffer(),d$c=0,d$d=this._readData.getUint32(),d$e=this._readData.getUint32(),d$f=(new Float32Array(d$b.slice(d$d+this._DATA.offset,d$d+this._DATA.offset+d$e)),this._readData.getUint32()),d$i=this._readData.getUint32(),d$j=new Float32Array(d$b.slice(d$f+this._DATA.offset,d$f+this._DATA.offset+d$i));for(this.mesh._inverseBindPoses=[],d$c=0,d$a=d$j.length;d$c<d$a;d$c+=16){var d$k=new d$ab(d$j[d$c+0],d$j[d$c+1],d$j[d$c+2],d$j[d$c+3],d$j[d$c+4],d$j[d$c+5],d$j[d$c+6],d$j[d$c+7],d$j[d$c+8],d$j[d$c+9],d$j[d$c+10],d$j[d$c+11],d$j[d$c+12],d$j[d$c+13],d$j[d$c+14],d$j[d$c+15]);this.mesh._inverseBindPoses.push(d$k);}break;default:throw new Error("LoadModel:unknown version.");}return!0;},d$a.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var d$a=this._readString();this._shaderAttributes=d$a.match(d$v._attrReg);var d$b=this._readData.getUint32(),d$c=this._readData.getUint32(),d$d=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),d$e=this._readData.getUint32(),d$f=this._readData.getUint32(),d$i=this._readData.getUint32(),d$j=this._readData.__getBuffer(),d$k=new d$lb(this._mesh),d$l=this._getVertexDeclaration(),d$m=d$Ob.create(d$l,d$e/d$l.vertexStride,35044,!0),d$n=d$d+this._DATA.offset,d$o=d$j.slice(d$n,d$n+d$e);d$m.setData(new Float32Array(d$o));for(var d$p=(d$k._vertexBuffer=d$m).vertexDeclaration.getVertexElements(),d$q=0;d$q<d$p.length;d$q++)d$k._bufferUsage[d$p[d$q].elementUsage]=d$m;var d$r=d$Nb.create("ushort",d$c/2,35044,!0),d$s=d$b+this._DATA.offset,d$t=d$j.slice(d$s,d$s+d$c);d$r.setData(new Uint16Array(d$t)),d$k._indexBuffer=d$r;var d$u=d$j.slice(d$f+this._DATA.offset,d$f+this._DATA.offset+d$i);return d$k._boneIndicesList[0]=new Uint8Array(d$u),this._subMeshes.push(d$k),!0;},d$a.READ_DATAAREA=function(){return!1;},d$a._getVertexDeclaration=function(){for(var d$a,d$b=!1,d$c=!1,d$d=!1,d$e=!1,d$f=!1,d$i=!1,d$j=!1,d$k=!1,d$l=!1,d$m=0;d$m<this._shaderAttributes.length;d$m+=8)switch(this._shaderAttributes[d$m]){case"POSITION":d$b=!0;break;case"NORMAL":d$c=!0;break;case"COLOR":d$d=!0;break;case"UV":d$e=!0;break;case"UV1":d$f=!0;break;case"BLENDWEIGHT":d$j=!0;break;case"BLENDINDICES":d$k=!0;break;case"TANGENT":d$i=!0;break;case"BINORMAL":d$l=!0;}return d$b&&d$c&&d$d&&d$e&&d$f&&d$j&&d$k&&d$i?d$a=d$va.vertexDeclaration:d$b&&d$c&&d$d&&d$e&&d$f&&d$j&&d$k?d$a=d$ta.vertexDeclaration:d$b&&d$c&&d$e&&d$f&&d$j&&d$k&&d$i?d$a=d$Ja.vertexDeclaration:d$b&&d$c&&d$e&&d$f&&d$j&&d$k?d$a=d$Ha.vertexDeclaration:d$b&&d$c&&d$d&&d$e&&d$j&&d$k&&d$i?d$a=d$Aa.vertexDeclaration:d$b&&d$c&&d$d&&d$e&&d$j&&d$k?d$a=d$ya.vertexDeclaration:d$b&&d$c&&d$i&&d$l&&d$e&&d$j&&d$k?d$a=d$Ta.vertexDeclaration:d$b&&d$c&&d$e&&d$j&&d$k&&d$i?d$a=d$Oa.vertexDeclaration:d$b&&d$c&&d$e&&d$j&&d$k?d$a=d$Ma.vertexDeclaration:d$b&&d$c&&d$d&&d$j&&d$k&&d$i?d$a=d$oa.vertexDeclaration:d$b&&d$c&&d$d&&d$j&&d$k?d$a=d$ma.vertexDeclaration:d$b&&d$c&&d$d&&d$e&&d$f&&d$i?d$a=d$xa.vertexDeclaration:d$b&&d$c&&d$d&&d$e&&d$f?d$a=d$sa.vertexDeclaration:d$b&&d$c&&d$e&&d$f&&d$i?d$a=d$La.vertexDeclaration:d$b&&d$c&&d$e&&d$f?d$a=d$Ga.vertexDeclaration:d$b&&d$c&&d$d&&d$e&&d$i?d$a=d$Ca.vertexDeclaration:d$b&&d$c&&d$e&&d$i&&d$l?d$a=d$Ra.vertexDeclaration:d$b&&d$c&&d$d&&d$e?d$a=d$ra.vertexDeclaration:d$b&&d$c&&d$e&&d$i?d$a=d$Qa.vertexDeclaration:d$b&&d$c&&d$e?d$a=d$Fa.vertexDeclaration:d$b&&d$c&&d$d&&d$i?d$a=d$qa.vertexDeclaration:d$b&&d$c&&d$d&&(d$a=d$la.vertexDeclaration),d$a;},d$q(0,d$a,"mesh",function(){return this._mesh;}),d$v._attrReg=new RegExp("(\\w+)|([:,;])","g"),d$v;}()),d$Wa=function(){function d$z(){}return d$p(d$z,"laya.d3.loaders.LoadModelV02"),d$z.parse=function(d$a,d$b,d$c,d$d,d$e,d$f){d$z._mesh=d$c,d$z._materials=d$d,d$z._subMeshes=d$e,d$z._materialMap=d$f,d$z._version=d$b,d$z._readData=d$a,d$z.READ_DATA(),d$z.READ_BLOCK(),d$z.READ_STRINGS();for(var d$i=0,d$j=d$z._BLOCK.count;d$i<d$j;d$i++){d$z._readData.pos=d$z._BLOCK.blockStarts[d$i];var d$k=d$z._readData.getUint16(),d$l=d$z._strings[d$k],d$m=d$z["READ_"+d$l];if(null==d$m)throw new Error("model file err,no this function:"+d$k+" "+d$l);d$m.call();}d$z._strings.length=0,d$z._readData=null,d$z._version=null,d$z._mesh=null,d$z._materials=null,d$z._subMeshes=null,d$z._materialMap=null;},d$z._readString=function(){return d$z._strings[d$z._readData.getUint16()];},d$z.READ_DATA=function(){d$z._DATA.offset=d$z._readData.getUint32(),d$z._DATA.size=d$z._readData.getUint32();},d$z.READ_BLOCK=function(){for(var d$a=d$z._BLOCK.count=d$z._readData.getUint16(),d$b=d$z._BLOCK.blockStarts=[],d$c=d$z._BLOCK.blockLengths=[],d$d=0;d$d<d$a;d$d++)d$b.push(d$z._readData.getUint32()),d$c.push(d$z._readData.getUint32());},d$z.READ_STRINGS=function(){var d$a=d$z._readData.getUint32(),d$b=d$z._readData.getUint16(),d$c=d$z._readData.pos;d$z._readData.pos=d$a+d$z._DATA.offset;for(var d$d=0;d$d<d$b;d$d++)d$z._strings[d$d]=d$z._readData.readUTFString();d$z._readData.pos=d$c;},d$z.READ_MATERIAL=function(){d$z._readString(),d$z._readString();var d$a=d$z._readString();return""!==d$a&&d$z._materials.push(d$t.getRes(d$z._materialMap[d$a])),!0;},d$z.READ_MESH=function(){d$z._readString();var d$a,d$b=d$z._readData.__getBuffer(),d$c=0,d$d=d$z._readData.getInt16(),d$e=d$z._DATA.offset;for(d$c=0;d$c<d$d;d$c++){var d$f=d$e+d$z._readData.getUint32(),d$i=d$z._readData.getUint32(),d$j=new Float32Array(d$b.slice(d$f,d$f+d$i)),d$k=d$z._readString().match(d$z._attrReg),d$l=d$z._getVertexDeclaration(d$k),d$m=d$Ob.create(d$l,4*d$j.length/d$l.vertexStride,35044,!0);d$m.setData(d$j),d$z._mesh._vertexBuffers.push(d$m);}var d$n=d$e+d$z._readData.getUint32(),d$o=d$z._readData.getUint32(),d$p=new Uint16Array(d$b.slice(d$n,d$n+d$o)),d$q=d$Nb.create("ushort",d$o/2,35044,!0);d$q.setData(d$p),d$z._mesh._indexBuffer=d$q;var d$r=d$z._mesh._boneNames=[],d$s=d$z._readData.getUint16();for(d$r.length=d$s,d$c=0;d$c<d$s;d$c++)d$r[d$c]=d$z._strings[d$z._readData.getUint16()];var d$t=d$z._readData.getUint32(),d$u=d$z._readData.getUint32(),d$v=(new Float32Array(d$b.slice(d$e+d$t,d$e+d$t+d$u)),d$z._readData.getUint32()),d$w=d$z._readData.getUint32(),d$x=new Float32Array(d$b.slice(d$e+d$v,d$e+d$v+d$w));for(d$z._mesh._inverseBindPoses=[],d$c=0,d$a=d$x.length;d$c<d$a;d$c+=16){var d$y=new d$ab(d$x[d$c+0],d$x[d$c+1],d$x[d$c+2],d$x[d$c+3],d$x[d$c+4],d$x[d$c+5],d$x[d$c+6],d$x[d$c+7],d$x[d$c+8],d$x[d$c+9],d$x[d$c+10],d$x[d$c+11],d$x[d$c+12],d$x[d$c+13],d$x[d$c+14],d$x[d$c+15]);d$z._mesh._inverseBindPoses.push(d$y);}return d$z._mesh._skinnedDatas=new Float32Array(16*d$x.length),!0;},d$z.READ_SUBMESH=function(){var d$a=d$z._readData.__getBuffer(),d$b=new d$lb(d$z._mesh),d$c=d$z._readData.getInt16(),d$d=d$z._readData.getUint32(),d$e=d$z._readData.getUint32();d$b._vertexBuffer=d$z._mesh._vertexBuffers[d$c],d$b._vertexStart=d$d,d$b._vertexCount=d$e;var d$f=d$z._readData.getUint32(),d$i=d$z._readData.getUint32(),d$j=d$z._mesh._indexBuffer;d$b._indexBuffer=d$j,d$b._indexStart=d$f,d$b._indexCount=d$i,d$b._indices=new Uint16Array(d$j.getData().buffer,2*d$f,d$i);var d$k=d$z._DATA.offset,d$l=d$b._subIndexBufferStart,d$m=d$b._subIndexBufferCount,d$n=d$b._boneIndicesList,d$o=d$z._readData.getUint16();d$l.length=d$o,d$m.length=d$o,d$n.length=d$o;for(var d$p=0;d$p<d$o;d$p++){d$l[d$p]=d$z._readData.getUint32(),d$m[d$p]=d$z._readData.getUint32();var d$q=d$z._readData.getUint32(),d$r=d$z._readData.getUint32();d$b._boneIndicesList[d$p]=new Uint8Array(d$a.slice(d$k+d$q,d$k+d$q+d$r));}return d$z._subMeshes.push(d$b),!0;},d$z._getVertexDeclaration=function(d$a){for(var d$b,d$c=!1,d$d=!1,d$e=!1,d$f=!1,d$i=!1,d$j=!1,d$k=!1,d$l=!1,d$m=!1,d$n=0;d$n<d$a.length;d$n++)switch(d$a[d$n]){case"POSITION":d$c=!0;break;case"NORMAL":d$d=!0;break;case"COLOR":d$e=!0;break;case"UV":d$f=!0;break;case"UV1":d$i=!0;break;case"BLENDWEIGHT":d$k=!0;break;case"BLENDINDICES":d$l=!0;break;case"TANGENT":d$j=!0;break;case"BINORMAL":d$m=!0;}return d$c&&d$d&&d$e&&d$f&&d$i&&d$k&&d$l&&d$j?d$b=d$va.vertexDeclaration:d$c&&d$d&&d$e&&d$f&&d$i&&d$k&&d$l?d$b=d$ta.vertexDeclaration:d$c&&d$d&&d$f&&d$i&&d$k&&d$l&&d$j?d$b=d$Ja.vertexDeclaration:d$c&&d$d&&d$f&&d$i&&d$k&&d$l?d$b=d$Ha.vertexDeclaration:d$c&&d$d&&d$e&&d$f&&d$k&&d$l&&d$j?d$b=d$Aa.vertexDeclaration:d$c&&d$d&&d$e&&d$f&&d$k&&d$l?d$b=d$ya.vertexDeclaration:d$c&&d$d&&d$f&&d$k&&d$l&&d$j?d$b=d$Oa.vertexDeclaration:d$c&&d$d&&d$f&&d$k&&d$l?d$b=d$Ma.vertexDeclaration:d$c&&d$d&&d$e&&d$k&&d$l&&d$j?d$b=d$oa.vertexDeclaration:d$c&&d$d&&d$e&&d$k&&d$l?d$b=d$ma.vertexDeclaration:d$c&&d$d&&d$e&&d$f&&d$i&&d$j?d$b=d$xa.vertexDeclaration:d$c&&d$d&&d$e&&d$f&&d$i?d$b=d$sa.vertexDeclaration:d$c&&d$d&&d$f&&d$i&&d$j?d$b=d$La.vertexDeclaration:d$c&&d$d&&d$f&&d$i?d$b=d$Ga.vertexDeclaration:d$c&&d$d&&d$e&&d$f&&d$j?d$b=d$Ca.vertexDeclaration:d$c&&d$d&&d$f&&d$j&&d$m?d$b=d$Ra.vertexDeclaration:d$c&&d$d&&d$e&&d$f?d$b=d$ra.vertexDeclaration:d$c&&d$d&&d$f&&d$j?d$b=d$Qa.vertexDeclaration:d$c&&d$d&&d$f?d$b=d$Fa.vertexDeclaration:d$c&&d$d&&d$e&&d$j?d$b=d$qa.vertexDeclaration:d$c&&d$d&&d$e&&(d$b=d$la.vertexDeclaration),d$b;},d$z._attrReg=new RegExp("(\\w+)|([:,;])","g"),d$z._strings=[],d$z._readData=null,d$z._version=null,d$z._mesh=null,d$z._materials=null,d$z._subMeshes=null,d$z._materialMap=null,d$n(d$z,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),d$z;}(),d$Xa=function(){function d$y(){}return d$p(d$y,"laya.d3.loaders.LoadModelV03"),d$y.parse=function(d$a,d$b,d$c,d$d,d$e){d$y._mesh=d$c,d$y._subMeshes=d$d,d$y._materialMap=d$e,d$y._version=d$b,d$y._readData=d$a,d$y.READ_DATA(),d$y.READ_BLOCK(),d$y.READ_STRINGS();for(var d$f=0,d$i=d$y._BLOCK.count;d$f<d$i;d$f++){d$y._readData.pos=d$y._BLOCK.blockStarts[d$f];var d$j=d$y._readData.getUint16(),d$k=d$y._strings[d$j],d$l=d$y["READ_"+d$k];if(null==d$l)throw new Error("model file err,no this function:"+d$j+" "+d$k);d$l.call();}d$y._strings.length=0,d$y._readData=null,d$y._version=null,d$y._mesh=null,d$y._subMeshes=null,d$y._materialMap=null;},d$y._readString=function(){return d$y._strings[d$y._readData.getUint16()];},d$y.READ_DATA=function(){d$y._DATA.offset=d$y._readData.getUint32(),d$y._DATA.size=d$y._readData.getUint32();},d$y.READ_BLOCK=function(){for(var d$a=d$y._BLOCK.count=d$y._readData.getUint16(),d$b=d$y._BLOCK.blockStarts=[],d$c=d$y._BLOCK.blockLengths=[],d$d=0;d$d<d$a;d$d++)d$b.push(d$y._readData.getUint32()),d$c.push(d$y._readData.getUint32());},d$y.READ_STRINGS=function(){var d$a=d$y._readData.getUint32(),d$b=d$y._readData.getUint16(),d$c=d$y._readData.pos;d$y._readData.pos=d$a+d$y._DATA.offset;for(var d$d=0;d$d<d$b;d$d++)d$y._strings[d$d]=d$y._readData.readUTFString();d$y._readData.pos=d$c;},d$y.READ_MESH=function(){var d$a,d$b=d$y._readString(),d$c=d$y._readData.__getBuffer(),d$d=0,d$e=d$y._readData.getInt16(),d$f=d$y._DATA.offset;for(d$d=0;d$d<d$e;d$d++){var d$i,d$j=d$f+d$y._readData.getUint32(),d$k=d$y._readData.getUint32(),d$l=new Float32Array(d$c.slice(d$j,d$j+d$k)),d$m=d$y._readString();switch(d$y._version){case"LAYAMODEL:03":d$i=d$y._vertexDeclarationMap_Discard[d$m];break;case"LAYAMODEL:0301":d$i=d$y._vertexDeclarationMap[d$m];break;default:throw new Error("LoadModelV03: unknown version.");}if(!d$i)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+d$y._version+"  bufferAttribute="+d$m+"  name="+d$b+"  url="+(d$y._mesh?d$y._mesh.url:"null"));var d$n=d$Ob.create(d$i,4*d$l.length/d$i.vertexStride,35044,!0,d$y._mesh._url+"_"+d$d);d$n.setData(d$l),d$y._mesh._vertexBuffers.push(d$n);}var d$o=d$f+d$y._readData.getUint32(),d$p=d$y._readData.getUint32(),d$q=new Uint16Array(d$c.slice(d$o,d$o+d$p)),d$r=d$Nb.create("ushort",d$p/2,35044,!0,d$y._mesh._url);d$r.setData(d$q),d$y._mesh._indexBuffer=d$r;var d$s=d$y._mesh._boneNames=[],d$t=d$y._readData.getUint16();for(d$s.length=d$t,d$d=0;d$d<d$t;d$d++)d$s[d$d]=d$y._strings[d$y._readData.getUint16()];d$y._readData.pos+=8;var d$u=d$y._readData.getUint32(),d$v=d$y._readData.getUint32(),d$w=new Float32Array(d$c.slice(d$f+d$u,d$f+d$u+d$v));for(d$y._mesh._inverseBindPoses=[],d$d=0,d$a=d$w.length;d$d<d$a;d$d+=16){var d$x=new d$ab(d$w[d$d+0],d$w[d$d+1],d$w[d$d+2],d$w[d$d+3],d$w[d$d+4],d$w[d$d+5],d$w[d$d+6],d$w[d$d+7],d$w[d$d+8],d$w[d$d+9],d$w[d$d+10],d$w[d$d+11],d$w[d$d+12],d$w[d$d+13],d$w[d$d+14],d$w[d$d+15]);d$y._mesh._inverseBindPoses.push(d$x);}return d$y._mesh._skinnedDatas=new Float32Array(16*d$w.length),!0;},d$y.READ_SUBMESH=function(){var d$a=d$y._readData.__getBuffer(),d$b=new d$lb(d$y._mesh),d$c=d$y._readData.getInt16(),d$d=d$y._readData.getUint32(),d$e=d$y._readData.getUint32();d$b._vertexBuffer=d$y._mesh._vertexBuffers[d$c],d$b._vertexStart=d$d,d$b._vertexCount=d$e;var d$f=d$y._readData.getUint32(),d$i=d$y._readData.getUint32(),d$j=d$y._mesh._indexBuffer;d$b._indexBuffer=d$j,d$b._indexStart=d$f,d$b._indexCount=d$i,d$b._indices=new Uint16Array(d$j.getData().buffer,2*d$f,d$i);var d$k=d$y._DATA.offset,d$l=d$b._subIndexBufferStart,d$m=d$b._subIndexBufferCount,d$n=d$b._boneIndicesList,d$o=d$y._readData.getUint16();d$l.length=d$o,d$m.length=d$o,d$n.length=d$o;for(var d$p=0;d$p<d$o;d$p++){d$l[d$p]=d$y._readData.getUint32(),d$m[d$p]=d$y._readData.getUint32();var d$q=d$y._readData.getUint32(),d$r=d$y._readData.getUint32();d$n[d$p]=new Uint8Array(d$a.slice(d$k+d$q,d$k+d$q+d$r));}return d$y._subMeshes.push(d$b),!0;},d$y._strings=[],d$y._readData=null,d$y._version=null,d$y._mesh=null,d$y._subMeshes=null,d$y._materialMap=null,d$n(d$y,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":d$va.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":d$ta.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":d$Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":d$Ja.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":d$Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":d$Aa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":d$ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":d$Oa.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":d$Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":d$oa.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":d$ma.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":d$xa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":d$sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":d$La.vertexDeclaration,"POSITION,NORMAL,UV,UV1":d$Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":d$Ca.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":d$Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":d$ra.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":d$Qa.vertexDeclaration,"POSITION,NORMAL,UV":d$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":d$qa.vertexDeclaration,"POSITION,NORMAL,COLOR":d$la.vertexDeclaration,"POSITION,NORMAL,TANGENT":d$Ea.vertexDeclaration,"POSITION,NORMAL":d$ka.vertexDeclaration,"POSITION,UV":d$Ua.vertexDeclaration,POSITION:d$ja.vertexDeclaration};},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":d$ua.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":d$ta.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":d$Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":d$Ia.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":d$Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":d$za.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":d$ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":d$Na.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":d$Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":d$na.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":d$ma.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":d$wa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":d$sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":d$Ka.vertexDeclaration,"POSITION,NORMAL,UV,UV1":d$Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":d$Ba.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":d$Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":d$ra.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":d$Pa.vertexDeclaration,"POSITION,NORMAL,UV":d$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":d$pa.vertexDeclaration,"POSITION,NORMAL,COLOR":d$la.vertexDeclaration,"POSITION,NORMAL,TANGENT":d$Da.vertexDeclaration,"POSITION,NORMAL":d$ka.vertexDeclaration,"POSITION,UV":d$Ua.vertexDeclaration,POSITION:d$ja.vertexDeclaration};},"_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),d$y;}(),d$Ya=function(){function d$j(){}return d$p(d$j,"laya.d3.loaders.MeshReader"),d$j.read=function(d$a,d$b,d$c,d$d,d$e){var d$f=new d$y(d$a);d$f.pos=0;var d$i=d$f.readUTFString();switch(d$i){case"LAYAMODEL:01":case"LAYASKINANI:01":d$j._readVersion01(d$f,d$i,d$b,d$c,d$d,d$e);break;case"LAYAMODEL:02":d$Wa.parse(d$f,d$i,d$b,d$c,d$d,d$e);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":d$Xa.parse(d$f,d$i,d$b,d$d,d$e);break;default:throw new Error("MeshReader: unknown mesh version.");}d$b._setSubMeshes(d$d);},d$j._readVersion01=function(d$a,d$b,d$c,d$d,d$e,d$f){new d$Va(d$a,d$b,d$c,d$d,d$e,d$f);},d$j;}(),d$Za=function(){function d$a(d$a,d$b){this.min=null,this.max=null,this.min=d$a,this.max=d$b;}d$p(d$a,"laya.d3.math.BoundBox");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.getCorners=function(d$a){d$a.length=8;var d$b=this.min.elements,d$c=this.max.elements,d$d=d$b[0],d$e=d$b[1],d$f=d$b[2],d$i=d$c[0],d$j=d$c[1],d$k=d$c[2];d$a[0]=new d$ib(d$d,d$j,d$k),d$a[1]=new d$ib(d$i,d$j,d$k),d$a[2]=new d$ib(d$i,d$e,d$k),d$a[3]=new d$ib(d$d,d$e,d$k),d$a[4]=new d$ib(d$d,d$j,d$f),d$a[5]=new d$ib(d$i,d$j,d$f),d$a[6]=new d$ib(d$i,d$e,d$f),d$a[7]=new d$ib(d$d,d$e,d$f);},d$b.toDefault=function(){this.min.toDefault(),this.max.toDefault();},d$b.cloneTo=function(d$a){var d$b=d$a;this.min.cloneTo(d$b.min),this.max.cloneTo(d$b.max);},d$b.clone=function(){var d$a=new this.constructor(new d$ib(),new d$ib());return this.cloneTo(d$a),d$a;},d$a.createfromPoints=function(d$a,d$b){if(null==d$a)throw new Error("points");var d$c=d$b.min,d$d=d$b.max,d$e=d$c.elements;d$e[0]=Number.MAX_VALUE,d$e[1]=Number.MAX_VALUE,d$e[2]=Number.MAX_VALUE;var d$f=d$d.elements;d$f[0]=-Number.MAX_VALUE,d$f[1]=-Number.MAX_VALUE,d$f[2]=-Number.MAX_VALUE;for(var d$i=0,d$j=d$a.length;d$i<d$j;++d$i)d$ib.min(d$c,d$a[d$i],d$c),d$ib.max(d$d,d$a[d$i],d$d);},d$a.merge=function(d$a,d$b,d$c){d$ib.min(d$a.min,d$b.min,d$c.min),d$ib.max(d$a.max,d$b.max,d$c.max);},d$a;}(),d$$a=function(){function d$l(d$a){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=d$a,this._near=new d$bb(new d$ib()),this._far=new d$bb(new d$ib()),this._left=new d$bb(new d$ib()),this._right=new d$bb(new d$ib()),this._top=new d$bb(new d$ib()),this._bottom=new d$bb(new d$ib()),d$l._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom);}d$p(d$l,"laya.d3.math.BoundFrustum");var d$a=d$l.prototype;return d$a.equalsBoundFrustum=function(d$a){return this._matrix.equalsOtherMatrix(d$a.matrix);},d$a.equalsObj=function(d$a){if(d$a instanceof laya.d3.math.BoundFrustum){var d$b=d$a;return this.equalsBoundFrustum(d$b);}return!1;},d$a.getPlane=function(d$a){switch(d$a){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null;}},d$a.getCorners=function(d$a){d$l._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(d$a[0]),d$l._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(d$a[1]),d$l._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(d$a[2]),d$l._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(d$a[3]),d$l._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(d$a[4]),d$l._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(d$a[5]),d$l._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(d$a[6]),d$l._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(d$a[7]);},d$a.containsPoint=function(d$a){for(var d$b=d$bb.PlaneIntersectionType_Front,d$c=d$bb.PlaneIntersectionType_Front,d$d=0;d$d<6;d$d++){switch(d$d){case 0:d$c=Collision.intersectsPlaneAndPoint(this._near,d$a);break;case 1:d$c=Collision.intersectsPlaneAndPoint(this._far,d$a);break;case 2:d$c=Collision.intersectsPlaneAndPoint(this._left,d$a);break;case 3:d$c=Collision.intersectsPlaneAndPoint(this._right,d$a);break;case 4:d$c=Collision.intersectsPlaneAndPoint(this._top,d$a);break;case 5:d$c=Collision.intersectsPlaneAndPoint(this._bottom,d$a);}switch(d$c){case d$bb.PlaneIntersectionType_Back:return 0;case d$bb.PlaneIntersectionType_Intersecting:d$b=d$bb.PlaneIntersectionType_Intersecting;}}switch(d$b){case d$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1;}},d$a.containsBoundBox=function(d$a){for(var d$b,d$c=d$l._tempV30,d$d=d$l._tempV31,d$e=1,d$f=0;d$f<6;d$f++){if(d$b=this.getPlane(d$f),this._getBoxToPlanePVertexNVertex(d$a,d$b.normal,d$c,d$d),Collision.intersectsPlaneAndPoint(d$b,d$c)===d$bb.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(d$b,d$d)===d$bb.PlaneIntersectionType_Back&&(d$e=2);}return d$e;},d$a.containsBoundSphere=function(d$a){for(var d$b=d$bb.PlaneIntersectionType_Front,d$c=d$bb.PlaneIntersectionType_Front,d$d=0;d$d<6;d$d++){switch(d$d){case 0:d$c=Collision.intersectsPlaneAndSphere(this._near,d$a);break;case 1:d$c=Collision.intersectsPlaneAndSphere(this._far,d$a);break;case 2:d$c=Collision.intersectsPlaneAndSphere(this._left,d$a);break;case 3:d$c=Collision.intersectsPlaneAndSphere(this._right,d$a);break;case 4:d$c=Collision.intersectsPlaneAndSphere(this._top,d$a);break;case 5:d$c=Collision.intersectsPlaneAndSphere(this._bottom,d$a);}switch(d$c){case d$bb.PlaneIntersectionType_Back:return 0;case d$bb.PlaneIntersectionType_Intersecting:d$b=d$bb.PlaneIntersectionType_Intersecting;}}switch(d$b){case d$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1;}},d$a._getBoxToPlanePVertexNVertex=function(d$a,d$b,d$c,d$d){var d$e=d$a.min,d$f=d$e.elements,d$i=d$a.max,d$j=d$i.elements,d$k=d$b.elements,d$l=d$k[0],d$m=d$k[1],d$n=d$k[2];d$e.cloneTo(d$c);var d$o=d$c.elements;0<=d$l&&(d$o[0]=d$j[0]),0<=d$m&&(d$o[1]=d$j[1]),0<=d$n&&(d$o[2]=d$j[2]),d$i.cloneTo(d$d);var d$p=d$d.elements;0<=d$l&&(d$p[0]=d$f[0]),0<=d$m&&(d$p[1]=d$f[1]),0<=d$n&&(d$p[2]=d$f[2]);},d$q(0,d$a,"top",function(){return this._top;}),d$q(0,d$a,"matrix",function(){return this._matrix;},function(d$a){this._matrix=d$a,d$l._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom);}),d$q(0,d$a,"near",function(){return this._near;}),d$q(0,d$a,"far",function(){return this._far;}),d$q(0,d$a,"left",function(){return this._left;}),d$q(0,d$a,"right",function(){return this._right;}),d$q(0,d$a,"bottom",function(){return this._bottom;}),d$l._getPlanesFromMatrix=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){var d$j=d$a.elements,d$k=d$j[0],d$l=d$j[1],d$m=d$j[2],d$n=d$j[3],d$o=d$j[4],d$p=d$j[5],d$q=d$j[6],d$r=d$j[7],d$s=d$j[8],d$t=d$j[9],d$u=d$j[10],d$v=d$j[11],d$w=d$j[12],d$x=d$j[13],d$y=d$j[14],d$z=d$j[15],d$A=d$b.normal.elements;d$A[0]=d$n+d$m,d$A[1]=d$r+d$q,d$A[2]=d$v+d$u,d$b.distance=d$z+d$y,d$b.normalize();var d$B=d$c.normal.elements;d$B[0]=d$n-d$m,d$B[1]=d$r-d$q,d$B[2]=d$v-d$u,d$c.distance=d$z-d$y,d$c.normalize();var d$C=d$d.normal.elements;d$C[0]=d$n+d$k,d$C[1]=d$r+d$o,d$C[2]=d$v+d$s,d$d.distance=d$z+d$w,d$d.normalize();var d$D=d$e.normal.elements;d$D[0]=d$n-d$k,d$D[1]=d$r-d$o,d$D[2]=d$v-d$s,d$e.distance=d$z-d$w,d$e.normalize();var d$E=d$f.normal.elements;d$E[0]=d$n-d$l,d$E[1]=d$r-d$p,d$E[2]=d$v-d$t,d$f.distance=d$z-d$x,d$f.normalize();var d$F=d$i.normal.elements;d$F[0]=d$n+d$l,d$F[1]=d$r+d$p,d$F[2]=d$v+d$t,d$i.distance=d$z+d$x,d$i.normalize();},d$l._get3PlaneInterPoint=function(d$a,d$b,d$c){var d$d=d$a.normal,d$e=d$b.normal,d$f=d$c.normal;d$ib.cross(d$e,d$f,d$l._tempV30),d$ib.cross(d$f,d$d,d$l._tempV31),d$ib.cross(d$d,d$e,d$l._tempV32);var d$i=d$ib.dot(d$d,d$l._tempV30),d$j=d$ib.dot(d$e,d$l._tempV31),d$k=d$ib.dot(d$f,d$l._tempV32);return d$ib.scale(d$l._tempV30,-d$a.distance/d$i,d$l._tempV33),d$ib.scale(d$l._tempV31,-d$b.distance/d$j,d$l._tempV34),d$ib.scale(d$l._tempV32,-d$c.distance/d$k,d$l._tempV35),d$ib.add(d$l._tempV33,d$l._tempV34,d$l._tempV36),d$ib.add(d$l._tempV35,d$l._tempV36,d$l._tempV37),d$l._tempV37;},d$n(d$l,["_tempV30",function(){return this._tempV30=new d$ib();},"_tempV31",function(){return this._tempV31=new d$ib();},"_tempV32",function(){return this._tempV32=new d$ib();},"_tempV33",function(){return this._tempV33=new d$ib();},"_tempV34",function(){return this._tempV34=new d$ib();},"_tempV35",function(){return this._tempV35=new d$ib();},"_tempV36",function(){return this._tempV36=new d$ib();},"_tempV37",function(){return this._tempV37=new d$ib();}]),d$l;}(),d$_a=function(){function d$m(d$a,d$b){this.center=null,this.radius=NaN,this.center=d$a,this.radius=d$b;}d$p(d$m,"laya.d3.math.BoundSphere");var d$a=d$m.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.toDefault=function(){this.center.toDefault(),this.radius=0;},d$a.intersectsRayDistance=function(d$a){return Collision.intersectsRayAndSphereRD(d$a,this);},d$a.intersectsRayPoint=function(d$a,d$b){return Collision.intersectsRayAndSphereRP(d$a,this,d$b);},d$a.cloneTo=function(d$a){var d$b=d$a;this.center.cloneTo(d$b.center),d$b.radius=this.radius;},d$a.clone=function(){var d$a=new this.constructor(new d$ib(),new d$ib());return this.cloneTo(d$a),d$a;},d$m.createFromSubPoints=function(d$a,d$b,d$c,d$d){if(null==d$a)throw new Error("points");if(d$b<0||d$b>=d$a.length)throw new Error("start"+d$b+"Must be in the range [0, "+(d$a.length-1)+"]");if(d$c<0||d$b+d$c>d$a.length)throw new Error("count"+d$c+"Must be in the range <= "+d$a.length+"}");var d$e=d$b+d$c,d$f=d$m._tempVector3;d$f.elements[0]=0,d$f.elements[1]=0,d$f.elements[2]=0;for(var d$i=d$b;d$i<d$e;++d$i)d$ib.add(d$a[d$i],d$f,d$f);var d$j=d$d.center;d$ib.scale(d$f,1/d$c,d$j);var d$k=0;for(d$i=d$b;d$i<d$e;++d$i){var d$l=d$ib.distanceSquared(d$j,d$a[d$i]);d$k<d$l&&(d$k=d$l);}d$d.radius=Math.sqrt(d$k);},d$m.createfromPoints=function(d$a,d$b){if(null==d$a)throw new Error("points");d$m.createFromSubPoints(d$a,0,d$a.length,d$b);},d$n(d$m,["_tempVector3",function(){return this._tempVector3=new d$ib();}]),d$m;}(),d$ga=(function(){function d$a(){}d$p(d$a,"laya.d3.math.ContainmentType"),d$a.Disjoint=0,d$a.Contains=1,d$a.Intersects=2;}(),function(){function d$c(){}return d$p(d$c,"laya.d3.math.MathUtils3D"),d$c.isZero=function(d$a){return Math.abs(d$a)<d$c.zeroTolerance;},d$c.nearEqual=function(d$a,d$b){return!!d$c.isZero(d$a-d$b);},d$c.fastInvSqrt=function(d$a){return d$c.isZero(d$a)?d$a:1/Math.sqrt(d$a);},d$n(d$c,["zeroTolerance",function(){return this.zeroTolerance=1e-6;},"MaxValue",function(){return this.MaxValue=340282347e30;},"MinValue",function(){return this.MinValue=-340282347e30;}]),d$c;}()),d$ha=function(){function d$k(){var d$a=this.elements=new Float32Array(9);d$a[0]=1,d$a[1]=0,d$a[2]=0,d$a[3]=0,d$a[4]=1,d$a[5]=0,d$a[6]=0,d$a[7]=0,d$a[8]=1;}d$p(d$k,"laya.d3.math.Matrix3x3");var d$a=d$k.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.determinant=function(){var d$a=this.elements,d$b=d$a[0],d$c=d$a[1],d$d=d$a[2],d$e=d$a[3],d$f=d$a[4],d$i=d$a[5],d$j=d$a[6],d$k=d$a[7],d$l=d$a[8];return d$b*(d$l*d$f-d$i*d$k)+d$c*(-d$l*d$e+d$i*d$j)+d$d*(d$k*d$e-d$f*d$j);},d$a.translate=function(d$a,d$b){var d$c=d$b.elements,d$d=this.elements,d$e=d$a.elements,d$f=d$d[0],d$i=d$d[1],d$j=d$d[2],d$k=d$d[3],d$l=d$d[4],d$m=d$d[5],d$n=d$d[6],d$o=d$d[7],d$p=d$d[8],d$q=d$e[0],d$r=d$e[1];d$c[0]=d$f,d$c[1]=d$i,d$c[2]=d$j,d$c[3]=d$k,d$c[4]=d$l,d$c[5]=d$m,d$c[6]=d$q*d$f+d$r*d$k+d$n,d$c[7]=d$q*d$i+d$r*d$l+d$o,d$c[8]=d$q*d$j+d$r*d$m+d$p;},d$a.rotate=function(d$a,d$b){var d$c=d$b.elements,d$d=this.elements,d$e=d$d[0],d$f=d$d[1],d$i=d$d[2],d$j=d$d[3],d$k=d$d[4],d$l=d$d[5],d$m=d$d[6],d$n=d$d[7],d$o=d$d[8],d$p=Math.sin(d$a),d$q=Math.cos(d$a);d$c[0]=d$q*d$e+d$p*d$j,d$c[1]=d$q*d$f+d$p*d$k,d$c[2]=d$q*d$i+d$p*d$l,d$c[3]=d$q*d$j-d$p*d$e,d$c[4]=d$q*d$k-d$p*d$f,d$c[5]=d$q*d$l-d$p*d$i,d$c[6]=d$m,d$c[7]=d$n,d$c[8]=d$o;},d$a.scale=function(d$a,d$b){var d$c=d$b.elements,d$d=this.elements,d$e=d$a.elements,d$f=d$e[0],d$i=d$e[1];d$c[0]=d$f*d$d[0],d$c[1]=d$f*d$d[1],d$c[2]=d$f*d$d[2],d$c[3]=d$i*d$d[3],d$c[4]=d$i*d$d[4],d$c[5]=d$i*d$d[5],d$c[6]=d$d[6],d$c[7]=d$d[7],d$c[8]=d$d[8];},d$a.invert=function(d$a){var d$b=d$a.elements,d$c=this.elements,d$d=d$c[0],d$e=d$c[1],d$f=d$c[2],d$i=d$c[3],d$j=d$c[4],d$k=d$c[5],d$l=d$c[6],d$m=d$c[7],d$n=d$c[8],d$o=d$n*d$j-d$k*d$m,d$p=-d$n*d$i+d$k*d$l,d$q=d$m*d$i-d$j*d$l,d$r=d$d*d$o+d$e*d$p+d$f*d$q;d$r||(d$a=null),d$r=1/d$r,d$b[0]=d$o*d$r,d$b[1]=(-d$n*d$e+d$f*d$m)*d$r,d$b[2]=(d$k*d$e-d$f*d$j)*d$r,d$b[3]=d$p*d$r,d$b[4]=(d$n*d$d-d$f*d$l)*d$r,d$b[5]=(-d$k*d$d+d$f*d$i)*d$r,d$b[6]=d$q*d$r,d$b[7]=(-d$m*d$d+d$e*d$l)*d$r,d$b[8]=(d$j*d$d-d$e*d$i)*d$r;},d$a.transpose=function(d$a){var d$b=d$a.elements,d$c=this.elements;if(d$a===this){var d$d=d$c[1],d$e=d$c[2],d$f=d$c[5];d$b[1]=d$c[3],d$b[2]=d$c[6],d$b[3]=d$d,d$b[5]=d$c[7],d$b[6]=d$e,d$b[7]=d$f;}else d$b[0]=d$c[0],d$b[1]=d$c[3],d$b[2]=d$c[6],d$b[3]=d$c[1],d$b[4]=d$c[4],d$b[5]=d$c[7],d$b[6]=d$c[2],d$b[7]=d$c[5],d$b[8]=d$c[8];},d$a.identity=function(){var d$a=this.elements;d$a[0]=1,d$a[1]=0,d$a[2]=0,d$a[3]=0,d$a[4]=1,d$a[5]=0,d$a[6]=0,d$a[7]=0,d$a[8]=1;},d$a.cloneTo=function(d$a){var d$b,d$c,d$d;if((d$c=this.elements)!==(d$d=d$a.elements))for(d$b=0;d$b<9;++d$b)d$d[d$b]=d$c[d$b];},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$k.createFromTranslation=function(d$a,d$b){d$b.elements;var d$c=d$a.elements;d$b[0]=1,d$b[1]=0,d$b[2]=0,d$b[3]=0,d$b[4]=1,d$b[5]=0,d$b[6]=d$c[0],d$b[7]=d$c[1],d$b[8]=1;},d$k.createFromRotation=function(d$a,d$b){var d$c=d$b.elements,d$d=Math.sin(d$a),d$e=Math.cos(d$a);d$c[0]=d$e,d$c[1]=d$d,d$c[2]=0,d$c[3]=-d$d,d$c[4]=d$e,d$c[5]=0,d$c[6]=0,d$c[7]=0,d$c[8]=1;},d$k.createFromScaling=function(d$a,d$b){var d$c=d$b.elements,d$d=d$a.elements;d$c[0]=d$d[0],d$c[1]=0,d$c[2]=0,d$c[3]=0,d$c[4]=d$d[1],d$c[5]=0,d$c[6]=0,d$c[7]=0,d$c[8]=1;},d$k.createFromMatrix4x4=function(d$a,d$b){d$b[0]=d$a[0],d$b[1]=d$a[1],d$b[2]=d$a[2],d$b[3]=d$a[4],d$b[4]=d$a[5],d$b[5]=d$a[6],d$b[6]=d$a[8],d$b[7]=d$a[9],d$b[8]=d$a[10];},d$k.multiply=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements,d$i=d$e[0],d$j=d$e[1],d$k=d$e[2],d$l=d$e[3],d$m=d$e[4],d$n=d$e[5],d$o=d$e[6],d$p=d$e[7],d$q=d$e[8],d$r=d$f[0],d$s=d$f[1],d$t=d$f[2],d$u=d$f[3],d$v=d$f[4],d$w=d$f[5],d$x=d$f[6],d$y=d$f[7],d$z=d$f[8];d$d[0]=d$r*d$i+d$s*d$l+d$t*d$o,d$d[1]=d$r*d$j+d$s*d$m+d$t*d$p,d$d[2]=d$r*d$k+d$s*d$n+d$t*d$q,d$d[3]=d$u*d$i+d$v*d$l+d$w*d$o,d$d[4]=d$u*d$j+d$v*d$m+d$w*d$p,d$d[5]=d$u*d$k+d$v*d$n+d$w*d$q,d$d[6]=d$x*d$i+d$y*d$l+d$z*d$o,d$d[7]=d$x*d$j+d$y*d$m+d$z*d$p,d$d[8]=d$x*d$k+d$y*d$n+d$z*d$q;},d$k.lookAt=function(d$a,d$b,d$c,d$d){d$ib.subtract(d$a,d$b,d$k._tempV30),d$ib.normalize(d$k._tempV30,d$k._tempV30),d$ib.cross(d$c,d$k._tempV30,d$k._tempV31),d$ib.normalize(d$k._tempV31,d$k._tempV31),d$ib.cross(d$k._tempV30,d$k._tempV31,d$k._tempV32);var d$e=d$k._tempV30.elements,d$f=d$k._tempV31.elements,d$i=d$k._tempV32.elements,d$j=d$d.elements;d$j[0]=d$f[0],d$j[3]=d$f[1],d$j[6]=d$f[2],d$j[1]=d$i[0],d$j[4]=d$i[1],d$j[7]=d$i[2],d$j[2]=d$e[0],d$j[5]=d$e[1],d$j[8]=d$e[2];},d$k.DEFAULT=new d$k(),d$n(d$k,["_tempV30",function(){return this._tempV30=new d$ib();},"_tempV31",function(){return this._tempV31=new d$ib();},"_tempV32",function(){return this._tempV32=new d$ib();}]),d$k;}(),d$ab=function(){function d$B(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$n,d$o,d$p,d$q,d$r){void 0===d$a&&(d$a=1),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0),void 0===d$f&&(d$f=1),void 0===d$i&&(d$i=0),void 0===d$j&&(d$j=0),void 0===d$k&&(d$k=0),void 0===d$l&&(d$l=0),void 0===d$m&&(d$m=1),void 0===d$n&&(d$n=0),void 0===d$o&&(d$o=0),void 0===d$p&&(d$p=0),void 0===d$q&&(d$q=0),void 0===d$r&&(d$r=1);var d$s=this.elements=new Float32Array(16);d$s[0]=d$a,d$s[1]=d$b,d$s[2]=d$c,d$s[3]=d$d,d$s[4]=d$e,d$s[5]=d$f,d$s[6]=d$i,d$s[7]=d$j,d$s[8]=d$k,d$s[9]=d$l,d$s[10]=d$m,d$s[11]=d$n,d$s[12]=d$o,d$s[13]=d$p,d$s[14]=d$q,d$s[15]=d$r;}d$p(d$B,"laya.d3.math.Matrix4x4");var d$a=d$B.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.getElementByRowColumn=function(d$a,d$b){if(d$a<0||3<d$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(d$b<0||3<d$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*d$a+d$b];},d$a.setElementByRowColumn=function(d$a,d$b,d$c){if(d$a<0||3<d$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(d$b<0||3<d$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*d$a+d$b]=d$c;},d$a.equalsOtherMatrix=function(d$a){var d$b=this.elements,d$c=d$a.elements;return d$ga.nearEqual(d$b[0],d$c[0])&&d$ga.nearEqual(d$b[1],d$c[1])&&d$ga.nearEqual(d$b[2],d$c[2])&&d$ga.nearEqual(d$b[3],d$c[3])&&d$ga.nearEqual(d$b[4],d$c[4])&&d$ga.nearEqual(d$b[5],d$c[5])&&d$ga.nearEqual(d$b[6],d$c[6])&&d$ga.nearEqual(d$b[7],d$c[7])&&d$ga.nearEqual(d$b[8],d$c[8])&&d$ga.nearEqual(d$b[9],d$c[9])&&d$ga.nearEqual(d$b[10],d$c[10])&&d$ga.nearEqual(d$b[11],d$c[11])&&d$ga.nearEqual(d$b[12],d$c[12])&&d$ga.nearEqual(d$b[13],d$c[13])&&d$ga.nearEqual(d$b[14],d$c[14])&&d$ga.nearEqual(d$b[15],d$c[15]);},d$a.decomposeTransRotScale=function(d$a,d$b,d$c){var d$d=d$B._tempMatrix4x4;return this.decomposeTransRotMatScale(d$a,d$d,d$c)?(d$cb.createFromMatrix4x4(d$d,d$b),!0):(d$b.identity(),!1);},d$a.decomposeTransRotMatScale=function(d$a,d$b,d$c){var d$d=this.elements,d$e=d$a.elements,d$f=d$b.elements,d$i=d$c.elements;d$e[0]=d$d[12],d$e[1]=d$d[13],d$e[2]=d$d[14];var d$j=d$d[0],d$k=d$d[1],d$l=d$d[2],d$m=d$d[4],d$n=d$d[5],d$o=d$d[6],d$p=d$d[8],d$q=d$d[9],d$r=d$d[10],d$s=d$i[0]=Math.sqrt(d$j*d$j+d$k*d$k+d$l*d$l),d$t=d$i[1]=Math.sqrt(d$m*d$m+d$n*d$n+d$o*d$o),d$u=d$i[2]=Math.sqrt(d$p*d$p+d$q*d$q+d$r*d$r);if(d$ga.isZero(d$s)||d$ga.isZero(d$t)||d$ga.isZero(d$u))return d$f[1]=d$f[2]=d$f[3]=d$f[4]=d$f[6]=d$f[7]=d$f[8]=d$f[9]=d$f[11]=d$f[12]=d$f[13]=d$f[14]=0,d$f[0]=d$f[5]=d$f[10]=d$f[15]=1,!1;var d$v=d$B._tempVector0,d$w=d$v.elements;d$w[0]=d$p/d$u,d$w[1]=d$q/d$u,d$w[2]=d$r/d$u;var d$x=d$B._tempVector1,d$y=d$x.elements;d$y[0]=d$j/d$s,d$y[1]=d$k/d$s,d$y[2]=d$l/d$s;var d$z=d$B._tempVector2;d$ib.cross(d$v,d$x,d$z);var d$A=d$B._tempVector1;return d$ib.cross(d$z,d$v,d$A),d$f[3]=d$f[7]=d$f[11]=d$f[12]=d$f[13]=d$f[14]=0,d$f[15]=1,d$f[0]=d$A.x,d$f[1]=d$A.y,d$f[2]=d$A.z,d$f[4]=d$z.x,d$f[5]=d$z.y,d$f[6]=d$z.z,d$f[8]=d$v.x,d$f[9]=d$v.y,d$f[10]=d$v.z,d$f[0]*d$j+d$f[1]*d$k+d$f[2]*d$l<0&&(d$i[0]=-d$s),d$f[4]*d$m+d$f[5]*d$n+d$f[6]*d$o<0&&(d$i[1]=-d$t),d$f[8]*d$p+d$f[9]*d$q+d$f[10]*d$r<0&&(d$i[2]=-d$u),!0;},d$a.decomposeYawPitchRoll=function(d$a){var d$b=d$a.elements,d$c=Math.asin(-this.elements[9]);d$b[1]=d$c,Math.cos(d$c)>d$ga.zeroTolerance?(d$b[2]=Math.atan2(this.elements[1],this.elements[5]),d$b[0]=Math.atan2(this.elements[8],this.elements[10])):(d$b[2]=Math.atan2(-this.elements[4],this.elements[0]),d$b[0]=0);},d$a.normalize=function(){var d$a=this.elements,d$b=d$a[0],d$c=d$a[1],d$d=d$a[2],d$e=Math.sqrt(d$b*d$b+d$c*d$c+d$d*d$d);if(!d$e)return d$a[0]=0,d$a[1]=0,void(d$a[2]=0);1!=d$e&&(d$e=1/d$e,d$a[0]=d$b*d$e,d$a[1]=d$c*d$e,d$a[2]=d$d*d$e);},d$a.transpose=function(){var d$a,d$b;return d$b=(d$a=this.elements)[1],d$a[1]=d$a[4],d$a[4]=d$b,d$b=d$a[2],d$a[2]=d$a[8],d$a[8]=d$b,d$b=d$a[3],d$a[3]=d$a[12],d$a[12]=d$b,d$b=d$a[6],d$a[6]=d$a[9],d$a[9]=d$b,d$b=d$a[7],d$a[7]=d$a[13],d$a[13]=d$b,d$b=d$a[11],d$a[11]=d$a[14],d$a[14]=d$b,this;},d$a.invert=function(d$a){var d$b=this.elements,d$c=d$a.elements,d$d=d$b[0],d$e=d$b[1],d$f=d$b[2],d$i=d$b[3],d$j=d$b[4],d$k=d$b[5],d$l=d$b[6],d$m=d$b[7],d$n=d$b[8],d$o=d$b[9],d$p=d$b[10],d$q=d$b[11],d$r=d$b[12],d$s=d$b[13],d$t=d$b[14],d$u=d$b[15],d$v=d$d*d$k-d$e*d$j,d$w=d$d*d$l-d$f*d$j,d$x=d$d*d$m-d$i*d$j,d$y=d$e*d$l-d$f*d$k,d$z=d$e*d$m-d$i*d$k,d$A=d$f*d$m-d$i*d$l,d$B=d$n*d$s-d$o*d$r,d$C=d$n*d$t-d$p*d$r,d$D=d$n*d$u-d$q*d$r,d$E=d$o*d$t-d$p*d$s,d$F=d$o*d$u-d$q*d$s,d$G=d$p*d$u-d$q*d$t,d$H=d$v*d$G-d$w*d$F+d$x*d$E+d$y*d$D-d$z*d$C+d$A*d$B;0!==Math.abs(d$H)&&(d$H=1/d$H,d$c[0]=(d$k*d$G-d$l*d$F+d$m*d$E)*d$H,d$c[1]=(d$f*d$F-d$e*d$G-d$i*d$E)*d$H,d$c[2]=(d$s*d$A-d$t*d$z+d$u*d$y)*d$H,d$c[3]=(d$p*d$z-d$o*d$A-d$q*d$y)*d$H,d$c[4]=(d$l*d$D-d$j*d$G-d$m*d$C)*d$H,d$c[5]=(d$d*d$G-d$f*d$D+d$i*d$C)*d$H,d$c[6]=(d$t*d$x-d$r*d$A-d$u*d$w)*d$H,d$c[7]=(d$n*d$A-d$p*d$x+d$q*d$w)*d$H,d$c[8]=(d$j*d$F-d$k*d$D+d$m*d$B)*d$H,d$c[9]=(d$e*d$D-d$d*d$F-d$i*d$B)*d$H,d$c[10]=(d$r*d$z-d$s*d$x+d$u*d$v)*d$H,d$c[11]=(d$o*d$x-d$n*d$z-d$q*d$v)*d$H,d$c[12]=(d$k*d$C-d$j*d$E-d$l*d$B)*d$H,d$c[13]=(d$d*d$E-d$e*d$C+d$f*d$B)*d$H,d$c[14]=(d$s*d$w-d$r*d$y-d$t*d$v)*d$H,d$c[15]=(d$n*d$y-d$o*d$w+d$p*d$v)*d$H);},d$a.identity=function(){var d$a=this.elements;d$a[1]=d$a[2]=d$a[3]=d$a[4]=d$a[6]=d$a[7]=d$a[8]=d$a[9]=d$a[11]=d$a[12]=d$a[13]=d$a[14]=0,d$a[0]=d$a[5]=d$a[10]=d$a[15]=1;},d$a.cloneTo=function(d$a){var d$b,d$c,d$d;if((d$c=this.elements)!==(d$d=d$a.elements))for(d$b=0;d$b<16;++d$b)d$d[d$b]=d$c[d$b];},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$a.getTranslationVector=function(d$a){var d$b=this.elements,d$c=d$a.elements;d$c[0]=d$b[12],d$c[1]=d$b[13],d$c[2]=d$b[14];},d$a.setTranslationVector=function(d$a){var d$b=this.elements,d$c=d$a.elements;d$b[12]=d$c[0],d$b[13]=d$c[1],d$b[14]=d$c[2];},d$a.getForward=function(d$a){var d$b=this.elements,d$c=d$a.elements;d$c[0]=-d$b[8],d$c[1]=-d$b[9],d$c[2]=-d$b[10];},d$a.setForward=function(d$a){var d$b=this.elements,d$c=d$a.elements;d$b[8]=-d$c[0],d$b[9]=-d$c[1],d$b[10]=-d$c[2];},d$B.createRotationX=function(d$a,d$b){var d$c=d$b.elements,d$d=Math.sin(d$a),d$e=Math.cos(d$a);d$c[1]=d$c[2]=d$c[3]=d$c[4]=d$c[7]=d$c[8]=d$c[11]=d$c[12]=d$c[13]=d$c[14]=0,d$c[0]=d$c[15]=1,d$c[5]=d$c[10]=d$e,d$c[6]=d$d,d$c[9]=-d$d;},d$B.createRotationY=function(d$a,d$b){var d$c=d$b.elements,d$d=Math.sin(d$a),d$e=Math.cos(d$a);d$c[1]=d$c[3]=d$c[4]=d$c[6]=d$c[7]=d$c[9]=d$c[11]=d$c[12]=d$c[13]=d$c[14]=0,d$c[5]=d$c[15]=1,d$c[0]=d$c[10]=d$e,d$c[2]=-d$d,d$c[8]=d$d;},d$B.createRotationZ=function(d$a,d$b){var d$c=d$b.elements,d$d=Math.sin(d$a),d$e=Math.cos(d$a);d$c[2]=d$c[3]=d$c[6]=d$c[7]=d$c[8]=d$c[9]=d$c[11]=d$c[12]=d$c[13]=d$c[14]=0,d$c[10]=d$c[15]=1,d$c[0]=d$c[5]=d$e,d$c[1]=d$d,d$c[4]=-d$d;},d$B.createRotationYawPitchRoll=function(d$a,d$b,d$c,d$d){d$cb.createFromYawPitchRoll(d$a,d$b,d$c,d$B._tempQuaternion),d$B.createRotationQuaternion(d$B._tempQuaternion,d$d);},d$B.createRotationAxis=function(d$a,d$b,d$c){var d$d=d$a.elements,d$e=d$d[0],d$f=d$d[1],d$i=d$d[2],d$j=Math.cos(d$b),d$k=Math.sin(d$b),d$l=d$e*d$e,d$m=d$f*d$f,d$n=d$i*d$i,d$o=d$e*d$f,d$p=d$e*d$i,d$q=d$f*d$i,d$r=d$c.elements;d$r[3]=d$r[7]=d$r[11]=d$r[12]=d$r[13]=d$r[14]=0,d$r[15]=1,d$r[0]=d$l+d$j*(1-d$l),d$r[1]=d$o-d$j*d$o+d$k*d$i,d$r[2]=d$p-d$j*d$p-d$k*d$f,d$r[4]=d$o-d$j*d$o-d$k*d$i,d$r[5]=d$m+d$j*(1-d$m),d$r[6]=d$q-d$j*d$q+d$k*d$e,d$r[8]=d$p-d$j*d$p+d$k*d$f,d$r[9]=d$q-d$j*d$q-d$k*d$e,d$r[10]=d$n+d$j*(1-d$n);},d$B.createRotationQuaternion=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements,d$e=d$c[0],d$f=d$c[1],d$i=d$c[2],d$j=d$c[3],d$k=d$e*d$e,d$l=d$f*d$f,d$m=d$i*d$i,d$n=d$e*d$f,d$o=d$i*d$j,d$p=d$i*d$e,d$q=d$f*d$j,d$r=d$f*d$i,d$s=d$e*d$j;d$d[3]=d$d[7]=d$d[11]=d$d[12]=d$d[13]=d$d[14]=0,d$d[15]=1,d$d[0]=1-2*(d$l+d$m),d$d[1]=2*(d$n+d$o),d$d[2]=2*(d$p-d$q),d$d[4]=2*(d$n-d$o),d$d[5]=1-2*(d$m+d$k),d$d[6]=2*(d$r+d$s),d$d[8]=2*(d$p+d$q),d$d[9]=2*(d$r-d$s),d$d[10]=1-2*(d$l+d$k);},d$B.createTranslate=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements;d$d[4]=d$d[8]=d$d[1]=d$d[9]=d$d[2]=d$d[6]=d$d[3]=d$d[7]=d$d[11]=0,d$d[0]=d$d[5]=d$d[10]=d$d[15]=1,d$d[12]=d$c[0],d$d[13]=d$c[1],d$d[14]=d$c[2];},d$B.createScaling=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements;d$d[0]=d$c[0],d$d[5]=d$c[1],d$d[10]=d$c[2],d$d[1]=d$d[4]=d$d[8]=d$d[12]=d$d[9]=d$d[13]=d$d[2]=d$d[6]=d$d[14]=d$d[3]=d$d[7]=d$d[11]=0,d$d[15]=1;},d$B.multiply=function(d$a,d$b,d$c){var d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m;for(d$e=d$c.elements,d$f=d$a.elements,d$e===(d$i=d$b.elements)&&(d$i=d$i.slice()),d$d=0;d$d<4;d$d++)d$j=d$f[d$d],d$k=d$f[d$d+4],d$l=d$f[d$d+8],d$m=d$f[d$d+12],d$e[d$d]=d$j*d$i[0]+d$k*d$i[1]+d$l*d$i[2]+d$m*d$i[3],d$e[d$d+4]=d$j*d$i[4]+d$k*d$i[5]+d$l*d$i[6]+d$m*d$i[7],d$e[d$d+8]=d$j*d$i[8]+d$k*d$i[9]+d$l*d$i[10]+d$m*d$i[11],d$e[d$d+12]=d$j*d$i[12]+d$k*d$i[13]+d$l*d$i[14]+d$m*d$i[15];},d$B.createFromQuaternion=function(d$a,d$b){var d$c=d$b.elements,d$d=d$a.elements,d$e=d$d[0],d$f=d$d[1],d$i=d$d[2],d$j=d$d[3],d$k=d$e+d$e,d$l=d$f+d$f,d$m=d$i+d$i,d$n=d$e*d$k,d$o=d$f*d$k,d$p=d$f*d$l,d$q=d$i*d$k,d$r=d$i*d$l,d$s=d$i*d$m,d$t=d$j*d$k,d$u=d$j*d$l,d$v=d$j*d$m;d$c[0]=1-d$p-d$s,d$c[1]=d$o+d$v,d$c[2]=d$q-d$u,d$c[3]=0,d$c[4]=d$o-d$v,d$c[5]=1-d$n-d$s,d$c[6]=d$r+d$t,d$c[7]=0,d$c[8]=d$q+d$u,d$c[9]=d$r-d$t,d$c[10]=1-d$n-d$p,d$c[11]=0,d$c[12]=0,d$c[13]=0,d$c[14]=0,d$c[15]=1;},d$B.createAffineTransformation=function(d$a,d$b,d$c,d$d){var d$e=d$a.elements,d$f=d$b.elements,d$i=d$c.elements,d$j=d$d.elements,d$k=d$f[0],d$l=d$f[1],d$m=d$f[2],d$n=d$f[3],d$o=d$k+d$k,d$p=d$l+d$l,d$q=d$m+d$m,d$r=d$k*d$o,d$s=d$k*d$p,d$t=d$k*d$q,d$u=d$l*d$p,d$v=d$l*d$q,d$w=d$m*d$q,d$x=d$n*d$o,d$y=d$n*d$p,d$z=d$n*d$q,d$A=d$i[0],d$B=d$i[1],d$C=d$i[2];d$j[0]=(1-(d$u+d$w))*d$A,d$j[1]=(d$s+d$z)*d$A,d$j[2]=(d$t-d$y)*d$A,d$j[3]=0,d$j[4]=(d$s-d$z)*d$B,d$j[5]=(1-(d$r+d$w))*d$B,d$j[6]=(d$v+d$x)*d$B,d$j[7]=0,d$j[8]=(d$t+d$y)*d$C,d$j[9]=(d$v-d$x)*d$C,d$j[10]=(1-(d$r+d$u))*d$C,d$j[11]=0,d$j[12]=d$e[0],d$j[13]=d$e[1],d$j[14]=d$e[2],d$j[15]=1;},d$B.createLookAt=function(d$a,d$b,d$c,d$d){var d$e=d$d.elements,d$f=d$B._tempVector0,d$i=d$B._tempVector1,d$j=d$B._tempVector2;d$ib.subtract(d$a,d$b,d$j),d$ib.normalize(d$j,d$j),d$ib.cross(d$c,d$j,d$f),d$ib.normalize(d$f,d$f),d$ib.cross(d$j,d$f,d$i),d$d.identity(),d$e[0]=d$f.x,d$e[4]=d$f.y,d$e[8]=d$f.z,d$e[1]=d$i.x,d$e[5]=d$i.y,d$e[9]=d$i.z,d$e[2]=d$j.x,d$e[6]=d$j.y,d$e[10]=d$j.z,d$e[12]=-d$ib.dot(d$f,d$a),d$e[13]=-d$ib.dot(d$i,d$a),d$e[14]=-d$ib.dot(d$j,d$a);},d$B.createPerspective=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$e.elements,d$i=1/Math.tan(d$a/2),d$j=1/(d$c-d$d);d$f[0]=d$i/d$b,d$f[5]=d$i,d$f[10]=(d$d+d$c)*d$j,d$f[11]=-1,d$f[14]=2*d$d*d$c*d$j,d$f[1]=d$f[2]=d$f[3]=d$f[4]=d$f[6]=d$f[7]=d$f[8]=d$f[9]=d$f[12]=d$f[13]=d$f[15]=0;},d$B.createOrthoOffCenterRH=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){var d$j=d$i.elements,d$k=1/(d$a-d$b),d$l=1/(d$c-d$d),d$m=1/(d$e-d$f);d$j[1]=d$j[2]=d$j[3]=d$j[4]=d$j[6]=d$j[7]=d$j[8]=d$j[9]=d$j[11]=0,d$j[15]=1,d$j[0]=-2*d$k,d$j[5]=-2*d$l,d$j[10]=2*d$m,d$j[12]=(d$a+d$b)*d$k,d$j[13]=(d$d+d$c)*d$l,d$j[14]=(d$f+d$e)*d$m;},d$B.translation=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements;d$d[0]=d$d[5]=d$d[10]=d$d[15]=1,d$d[12]=d$c[0],d$d[13]=d$c[1],d$d[14]=d$c[2];},d$n(d$B,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new d$B();},"_tempVector0",function(){return this._tempVector0=new d$ib();},"_tempVector1",function(){return this._tempVector1=new d$ib();},"_tempVector2",function(){return this._tempVector2=new d$ib();},"_tempQuaternion",function(){return this._tempQuaternion=new d$cb();},"DEFAULT",function(){return this.DEFAULT=new d$B();},"ZERO",function(){return this.ZERO=new d$B(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);}]),d$B;}(),d$bb=(function(){function d$v(d$a,d$b){this.extents=null,this.transformation=null,this.extents=d$a,this.transformation=d$b;}d$p(d$v,"laya.d3.math.OrientedBoundBox");var d$a=d$v.prototype;d$a.getCorners=function(d$a){var d$b=d$v._tempV30.elements,d$c=d$v._tempV31.elements,d$d=d$v._tempV32.elements,d$e=this.extents.elements;d$b[0]=d$e[0],d$b[1]=d$b[2]=0,d$c[1]=d$e[1],d$c[0]=d$c[2]=0,d$d[2]=d$e[2],d$d[0]=d$d[1]=0,d$ib.TransformNormal(d$v._tempV30,this.transformation,d$v._tempV30),d$ib.TransformNormal(d$v._tempV31,this.transformation,d$v._tempV31),d$ib.TransformNormal(d$v._tempV32,this.transformation,d$v._tempV32);var d$f=d$v._tempV33;this.transformation.getTranslationVector(d$f),d$a.length=8,d$ib.add(d$f,d$v._tempV30,d$v._tempV34),d$ib.add(d$v._tempV34,d$v._tempV31,d$v._tempV34),d$ib.add(d$v._tempV34,d$v._tempV32,d$a[0]),d$ib.add(d$f,d$v._tempV30,d$v._tempV34),d$ib.add(d$v._tempV34,d$v._tempV31,d$v._tempV34),d$ib.subtract(d$v._tempV34,d$v._tempV32,d$a[1]),d$ib.subtract(d$f,d$v._tempV30,d$v._tempV34),d$ib.add(d$v._tempV34,d$v._tempV31,d$v._tempV34),d$ib.subtract(d$v._tempV34,d$v._tempV32,d$a[2]),d$ib.subtract(d$f,d$v._tempV30,d$v._tempV34),d$ib.add(d$v._tempV34,d$v._tempV31,d$v._tempV34),d$ib.add(d$v._tempV34,d$v._tempV32,d$a[3]),d$ib.add(d$f,d$v._tempV30,d$v._tempV34),d$ib.subtract(d$v._tempV34,d$v._tempV31,d$v._tempV34),d$ib.add(d$v._tempV34,d$v._tempV32,d$a[4]),d$ib.add(d$f,d$v._tempV30,d$v._tempV34),d$ib.subtract(d$v._tempV34,d$v._tempV31,d$v._tempV34),d$ib.subtract(d$v._tempV34,d$v._tempV32,d$a[5]),d$ib.subtract(d$f,d$v._tempV30,d$v._tempV34),d$ib.subtract(d$v._tempV34,d$v._tempV31,d$v._tempV34),d$ib.subtract(d$v._tempV34,d$v._tempV32,d$a[6]),d$ib.subtract(d$f,d$v._tempV30,d$v._tempV34),d$ib.subtract(d$v._tempV34,d$v._tempV31,d$v._tempV34),d$ib.add(d$v._tempV34,d$v._tempV32,d$a[7]);},d$a.transform=function(d$a){d$ab.multiply(this.transformation,d$a,this.transformation);},d$a.scale=function(d$a){d$ib.multiply(this.extents,d$a,this.extents);},d$a.translate=function(d$a){this.transformation.getTranslationVector(d$v._tempV30),d$ib.add(d$v._tempV30,d$a,d$v._tempV31),this.transformation.setTranslationVector(d$v._tempV31);},d$a.Size=function(d$a){d$ib.scale(this.extents,2,d$a);},d$a.getSize=function(d$a){var d$b=this.extents.elements;d$v._tempV30.x=d$b[0],d$v._tempV31.y=d$b[1],d$v._tempV32.z=d$b[2],d$ib.TransformNormal(d$v._tempV30,this.transformation,d$v._tempV30),d$ib.TransformNormal(d$v._tempV31,this.transformation,d$v._tempV31),d$ib.TransformNormal(d$v._tempV31,this.transformation,d$v._tempV32);var d$c=d$a.elements;d$c[0]=d$ib.scalarLength(d$v._tempV30),d$c[1]=d$ib.scalarLength(d$v._tempV31),d$c[2]=d$ib.scalarLength(d$v._tempV32);},d$a.getSizeSquared=function(d$a){var d$b=this.extents.elements;d$v._tempV30.x=d$b[0],d$v._tempV31.y=d$b[1],d$v._tempV32.z=d$b[2],d$ib.TransformNormal(d$v._tempV30,this.transformation,d$v._tempV30),d$ib.TransformNormal(d$v._tempV31,this.transformation,d$v._tempV31),d$ib.TransformNormal(d$v._tempV31,this.transformation,d$v._tempV32);var d$c=d$a.elements;d$c[0]=d$ib.scalarLengthSquared(d$v._tempV30),d$c[1]=d$ib.scalarLengthSquared(d$v._tempV31),d$c[2]=d$ib.scalarLengthSquared(d$v._tempV32);},d$a.getCenter=function(d$a){this.transformation.getTranslationVector(d$a);},d$a.containsPoint=function(d$a){var d$b=this.extents.elements,d$c=d$b[0],d$d=d$b[1],d$e=d$b[2];this.transformation.invert(d$v._tempM0),d$ib.transformCoordinate(d$a,d$v._tempM0,d$v._tempV30);var d$f=d$v._tempV30.elements,d$i=Math.abs(d$f[0]),d$j=Math.abs(d$f[1]),d$k=Math.abs(d$f[2]);return d$ga.nearEqual(d$i,d$c)&&d$ga.nearEqual(d$j,d$d)&&d$ga.nearEqual(d$k,d$e)?2:d$i<d$c&&d$j<d$d&&d$k<d$e?1:0;},d$a.containsPoints=function(d$a){var d$b=this.extents.elements,d$c=d$b[0],d$d=d$b[1],d$e=d$b[2];this.transformation.invert(d$v._tempM0);for(var d$f=!0,d$i=!1,d$j=0;d$j<d$a.length;d$j++){d$ib.transformCoordinate(d$a[d$j],d$v._tempM0,d$v._tempV30);var d$k=d$v._tempV30.elements,d$l=Math.abs(d$k[0]),d$m=Math.abs(d$k[1]),d$n=Math.abs(d$k[2]);d$ga.nearEqual(d$l,d$c)&&d$ga.nearEqual(d$m,d$d)&&d$ga.nearEqual(d$n,d$e)&&(d$i=!0),d$l<d$c&&d$m<d$d&&d$n<d$e?d$i=!0:d$f=!1;}return d$f?1:d$i?2:0;},d$a.containsSphere=function(d$a,d$b){void 0===d$b&&(d$b=!1);var d$c=this.extents.elements,d$d=d$c[0],d$e=d$c[1],d$f=d$c[2],d$i=d$a.radius;this.transformation.invert(d$v._tempM0),d$ib.transformCoordinate(d$a.center,d$v._tempM0,d$v._tempV30);var d$j=NaN;if(d$j=d$b?d$i:(d$ib.scale(d$ib.UnitX,d$i,d$v._tempV31),d$ib.TransformNormal(d$v._tempV31,d$v._tempM0,d$v._tempV31),d$ib.scalarLength(d$v._tempV31)),d$ib.scale(this.extents,-1,d$v._tempV32),d$ib.Clamp(d$v._tempV30,d$v._tempV32,this.extents,d$v._tempV33),d$j*d$j<d$ib.distanceSquared(d$v._tempV30,d$v._tempV33))return 0;var d$k=d$v._tempV30.elements,d$l=d$k[0],d$m=d$k[1],d$n=d$k[2],d$o=d$v._tempV32.elements,d$p=d$o[0],d$q=d$o[1],d$r=d$o[2];return d$p+d$j<=d$l&&d$l<=d$d-d$j&&d$j<d$d-d$p&&d$q+d$j<=d$m&&d$m<=d$e-d$j&&d$j<d$e-d$q&&d$r+d$j<=d$n&&d$n<=d$f-d$j&&d$j<d$f-d$r?1:2;},d$a.containsOrientedBoundBox=function(d$a){var d$b=0,d$c=0;d$a.getCorners(d$v._corners);var d$d=this.containsPoints(d$v._corners);if(0!=d$d)return d$d;var d$e=this.extents.elements;d$a.extents.cloneTo(d$v._tempV35);var d$f=d$v._tempV35.elements;d$v._getRows(this.transformation,d$v._rows1),d$v._getRows(d$a.transformation,d$v._rows2);var d$i=NaN;for(d$b=0;d$b<4;d$b++)for(d$c=0;d$c<4;d$c++)3==d$b||3==d$c?(d$v._tempM0.setElementByRowColumn(d$b,d$c,0),d$v._tempM1.setElementByRowColumn(d$b,d$c,0)):(d$i=d$ib.dot(d$v._rows1[d$b],d$v._rows2[d$c]),d$v._tempM0.setElementByRowColumn(d$b,d$c,d$i),d$v._tempM1.setElementByRowColumn(d$b,d$c,Math.abs(d$i)));d$a.getCenter(d$v._tempV34),this.getCenter(d$v._tempV36),d$ib.subtract(d$v._tempV34,d$v._tempV36,d$v._tempV30);var d$j=d$v._tempV31.elements;d$j[0]=d$ib.dot(d$v._tempV30,d$v._rows1[0]),d$j[1]=d$ib.dot(d$v._tempV30,d$v._rows1[1]),d$j[2]=d$ib.dot(d$v._tempV30,d$v._rows1[2]);var d$k=d$v._tempV32.elements,d$l=d$v._tempV33.elements;for(d$b=0;d$b<3;d$b++)if(d$k[0]=d$v._tempM1.getElementByRowColumn(d$b,0),d$k[1]=d$v._tempM1.getElementByRowColumn(d$b,1),d$k[2]=d$v._tempM1.getElementByRowColumn(d$b,2),d$e[d$b]+d$ib.dot(d$v._tempV35,d$v._tempV32)<Math.abs(d$j[d$b]))return 0;for(d$c=0;d$c<3;d$c++)if(d$k[0]=d$v._tempM1.getElementByRowColumn(0,d$c),d$k[1]=d$v._tempM1.getElementByRowColumn(1,d$c),d$k[2]=d$v._tempM1.getElementByRowColumn(2,d$c),d$l[0]=d$v._tempM0.getElementByRowColumn(0,d$c),d$l[1]=d$v._tempM0.getElementByRowColumn(1,d$c),d$l[2]=d$v._tempM0.getElementByRowColumn(2,d$c),d$ib.dot(this.extents,d$v._tempV32)+d$f[d$c]<Math.abs(d$ib.dot(d$v._tempV31,d$v._tempV33)))return 0;for(d$b=0;d$b<3;d$b++)for(d$c=0;d$c<3;d$c++){var d$m=(d$b+1)%3,d$n=(d$b+2)%3,d$o=(d$c+1)%3,d$p=(d$c+2)%3;if(d$e[d$m]*d$v._tempM1.getElementByRowColumn(d$n,d$c)+d$e[d$n]*d$v._tempM1.getElementByRowColumn(d$m,d$c)+(d$f[d$o]*d$v._tempM1.getElementByRowColumn(d$b,d$p)+d$f[d$p]*d$v._tempM1.getElementByRowColumn(d$b,d$o))<Math.abs(d$j[d$n]*d$v._tempM0.getElementByRowColumn(d$m,d$c)-d$j[d$m]*d$v._tempM0.getElementByRowColumn(d$n,d$c)))return 0;}return 2;},d$a.containsLine=function(d$a,d$b){d$v._corners[0]=d$a,d$v._corners[1]=d$b;var d$c=this.containsPoints(d$v._corners);if(0!=d$c)return d$c;var d$d=this.extents.elements,d$e=d$d[0],d$f=d$d[1],d$i=d$d[2];this.transformation.invert(d$v._tempM0),d$ib.transformCoordinate(d$a,d$v._tempM0,d$v._tempV30),d$ib.transformCoordinate(d$b,d$v._tempM0,d$v._tempV31),d$ib.add(d$v._tempV30,d$v._tempV31,d$v._tempV32),d$ib.scale(d$v._tempV32,.5,d$v._tempV32),d$ib.subtract(d$v._tempV30,d$v._tempV32,d$v._tempV33);var d$j=d$v._tempV33.elements,d$k=d$j[0],d$l=d$j[1],d$m=d$j[2],d$n=d$v._tempV34.elements,d$o=d$n[0]=Math.abs(d$j[0]),d$p=d$n[1]=Math.abs(d$j[1]),d$q=d$n[2]=Math.abs(d$j[2]),d$r=d$v._tempV32.elements,d$s=d$r[0],d$t=d$r[1],d$u=d$r[2];return Math.abs(d$s)>d$e+d$o?0:Math.abs(d$t)>d$f+d$p?0:Math.abs(d$u)>d$i+d$q?0:Math.abs(d$t*d$m-d$u*d$l)>d$f*d$q+d$i*d$p?0:Math.abs(d$s*d$m-d$u*d$k)>d$e*d$q+d$i*d$o?0:Math.abs(d$s*d$l-d$t*d$k)>d$e*d$p+d$f*d$o?0:2;},d$a.containsBoundBox=function(d$a){var d$b=0,d$c=0,d$d=d$a.min,d$e=d$a.max;d$a.getCorners(d$v._corners);var d$f=this.containsPoints(d$v._corners);if(0!=d$f)return d$f;d$ib.subtract(d$e,d$d,d$v._tempV30),d$ib.scale(d$v._tempV30,.5,d$v._tempV30),d$ib.add(d$d,d$v._tempV30,d$v._tempV30),d$ib.subtract(d$e,d$v._tempV30,d$v._tempV31);var d$i=this.extents.elements,d$j=d$v._tempV31.elements;d$v._getRows(this.transformation,d$v._rows1),this.transformation.invert(d$v._tempM0);for(d$b=0;d$b<3;d$b++)for(d$c=0;d$c<3;d$c++)d$v._tempM1.setElementByRowColumn(d$b,d$c,Math.abs(d$v._tempM0.getElementByRowColumn(d$b,d$c)));this.getCenter(d$v._tempV35),d$ib.subtract(d$v._tempV30,d$v._tempV35,d$v._tempV32);var d$k=d$v._tempV31.elements;d$k[0]=d$ib.dot(d$v._tempV32,d$v._rows1[0]),d$k[1]=d$ib.dot(d$v._tempV32,d$v._rows1[1]),d$k[2]=d$ib.dot(d$v._tempV32,d$v._rows1[2]);var d$l=d$v._tempV33.elements,d$m=d$v._tempV34.elements;for(d$b=0;d$b<3;d$b++)if(d$l[0]=d$v._tempM1.getElementByRowColumn(d$b,0),d$l[1]=d$v._tempM1.getElementByRowColumn(d$b,1),d$l[2]=d$v._tempM1.getElementByRowColumn(d$b,2),d$i[d$b]+d$ib.dot(d$v._tempV31,d$v._tempV33)<Math.abs(d$k[d$b]))return 0;for(d$c=0;d$c<3;d$c++)if(d$l[0]=d$v._tempM1.getElementByRowColumn(0,d$c),d$l[1]=d$v._tempM1.getElementByRowColumn(1,d$c),d$l[2]=d$v._tempM1.getElementByRowColumn(2,d$c),d$m[0]=d$v._tempM0.getElementByRowColumn(0,d$c),d$m[1]=d$v._tempM0.getElementByRowColumn(1,d$c),d$m[2]=d$v._tempM0.getElementByRowColumn(2,d$c),d$ib.dot(this.extents,d$v._tempV33)+d$j[d$c]<Math.abs(d$ib.dot(d$v._tempV31,d$v._tempV34)))return 0;for(d$b=0;d$b<3;d$b++)for(d$c=0;d$c<3;d$c++){var d$n=(d$b+1)%3,d$o=(d$b+2)%3,d$p=(d$c+1)%3,d$q=(d$c+2)%3;if(d$i[d$n]*d$v._tempM1.getElementByRowColumn(d$o,d$c)+d$i[d$o]*d$v._tempM1.getElementByRowColumn(d$n,d$c)+(d$j[d$p]*d$v._tempM1.getElementByRowColumn(d$b,d$q)+d$j[d$q]*d$v._tempM1.getElementByRowColumn(d$b,d$p))<Math.abs(d$k[d$o]*d$v._tempM0.getElementByRowColumn(d$n,d$c)-d$k[d$n]*d$v._tempM0.getElementByRowColumn(d$o,d$c)))return 0;}return 2;},d$a.intersectsRay=function(d$a,d$b){d$ib.scale(this.extents,-1,d$v._tempV30),this.transformation.invert(d$v._tempM0),d$ib.TransformNormal(d$a.direction,d$v._tempM0,d$v._ray.direction),d$ib.transformCoordinate(d$a.origin,d$v._tempM0,d$v._ray.origin),d$v._boxBound1.min=d$v._tempV30,d$v._boxBound1.max=this.extents;var d$c=Collision.intersectsRayAndBoxRP(d$v._ray,d$v._boxBound1,d$b);return-1!==d$c&&d$ib.transformCoordinate(d$b,this.transformation,d$b),d$c;},d$a._getLocalCorners=function(d$a){d$a.length=8;var d$b=this.extents.elements;d$v._tempV30.x=d$b[0],d$v._tempV31.y=d$b[1],d$v._tempV32.z=d$b[2],d$ib.add(d$v._tempV30,d$v._tempV31,d$v._tempV33),d$ib.add(d$v._tempV33,d$v._tempV32,d$a[0]),d$ib.add(d$v._tempV30,d$v._tempV31,d$v._tempV33),d$ib.subtract(d$v._tempV33,d$v._tempV32,d$a[1]),d$ib.subtract(d$v._tempV31,d$v._tempV30,d$v._tempV33),d$ib.subtract(d$v._tempV33,d$v._tempV30,d$a[2]),d$ib.subtract(d$v._tempV31,d$v._tempV30,d$v._tempV33),d$ib.add(d$v._tempV33,d$v._tempV32,d$a[3]),d$ib.subtract(d$v._tempV30,d$v._tempV31,d$v._tempV33),d$ib.add(d$v._tempV33,d$v._tempV32,d$a[4]),d$ib.subtract(d$v._tempV30,d$v._tempV31,d$v._tempV33),d$ib.subtract(d$v._tempV33,d$v._tempV32,d$a[5]),d$ib.scale(d$a[0],-1,d$a[6]),d$ib.subtract(d$v._tempV32,d$v._tempV30,d$v._tempV33),d$ib.subtract(d$v._tempV33,d$v._tempV31,d$a[7]);},d$a.equals=function(d$a){return this.extents==d$a.extents&&this.transformation==d$a.transformation;},d$a.cloneTo=function(d$a){var d$b=d$a;this.extents.cloneTo(d$b.extents),this.transformation.cloneTo(d$b.transformation);},d$v.createByBoundBox=function(d$a,d$b){var d$c=d$a.min,d$d=d$a.max;d$ib.subtract(d$d,d$c,d$v._tempV30),d$ib.scale(d$v._tempV30,.5,d$v._tempV30),d$ib.add(d$c,d$v._tempV30,d$v._tempV31),d$ib.subtract(d$d,d$v._tempV31,d$v._tempV32),d$ab.translation(d$v._tempV31,d$v._tempM0);var d$e=d$v._tempV32.clone(),d$f=d$v._tempM0.clone();d$b.extents=d$e,d$b.transformation=d$f;},d$v.createByMinAndMaxVertex=function(d$a,d$b){return d$ib.subtract(d$b,d$a,d$v._tempV30),d$ib.scale(d$v._tempV30,.5,d$v._tempV30),d$ib.add(d$a,d$v._tempV30,d$v._tempV31),d$ib.subtract(d$b,d$v._tempV31,d$v._tempV32),d$ab.translation(d$v._tempV31,d$v._tempM0),new d$v(d$v._tempV32,d$v._tempM0);},d$v._getRows=function(d$a,d$b){d$b.length=3;var d$c=d$a.elements,d$d=d$b[0].elements;d$d[0]=d$c[0],d$d[1]=d$c[1],d$d[2]=d$c[2];var d$e=d$b[1].elements;d$e[0]=d$c[4],d$e[1]=d$c[5],d$e[2]=d$c[6];var d$f=d$b[2].elements;d$f[0]=d$c[8],d$f[1]=d$c[9],d$f[2]=d$c[10];},d$v.getObbtoObbMatrix4x4=function(d$a,d$b,d$c,d$d){var d$e=d$a.transformation,d$f=d$b.transformation;if(d$c){d$v._getRows(d$e,d$v._rows1),d$v._getRows(d$f,d$v._rows2);for(var d$i=0;d$i<3;d$i++)for(var d$j=0;d$j<3;d$j++)d$d.setElementByRowColumn(d$i,d$j,d$ib.dot(d$v._rows2[d$i],d$v._rows1[d$j]));d$b.getCenter(d$v._tempV30),d$a.getCenter(d$v._tempV31),d$ib.subtract(d$v._tempV30,d$v._tempV31,d$v._tempV32);var d$k=d$d.elements;d$k[12]=d$ib.dot(d$v._tempV32,d$v._rows1[0]),d$k[13]=d$ib.dot(d$v._tempV32,d$v._rows1[1]),d$k[14]=d$ib.dot(d$v._tempV32,d$v._rows1[2]),d$k[15]=1;}else d$e.invert(d$v._tempM0),d$ab.multiply(d$f,d$v._tempM0,d$d);},d$v.merge=function(d$a,d$b,d$c){var d$d=d$a.extents,d$e=d$a.transformation;d$v.getObbtoObbMatrix4x4(d$a,d$b,d$c,d$v._tempM0),d$b._getLocalCorners(d$v._corners),d$ib.transformCoordinate(d$v._corners[0],d$v._tempM0,d$v._corners[0]),d$ib.transformCoordinate(d$v._corners[1],d$v._tempM0,d$v._corners[1]),d$ib.transformCoordinate(d$v._corners[2],d$v._tempM0,d$v._corners[2]),d$ib.transformCoordinate(d$v._corners[3],d$v._tempM0,d$v._corners[3]),d$ib.transformCoordinate(d$v._corners[4],d$v._tempM0,d$v._corners[4]),d$ib.transformCoordinate(d$v._corners[5],d$v._tempM0,d$v._corners[5]),d$ib.transformCoordinate(d$v._corners[6],d$v._tempM0,d$v._corners[6]),d$ib.transformCoordinate(d$v._corners[7],d$v._tempM0,d$v._corners[7]),d$ib.scale(d$d,-1,d$v._boxBound1.min),d$d.cloneTo(d$v._boxBound1.max),d$Za.createfromPoints(d$v._corners,d$v._boxBound2),d$Za.merge(d$v._boxBound2,d$v._boxBound1,d$v._boxBound3);var d$f=d$v._boxBound3.min,d$i=d$v._boxBound3.max;d$ib.subtract(d$i,d$f,d$v._tempV30),d$ib.scale(d$v._tempV30,.5,d$v._tempV30),d$ib.add(d$f,d$v._tempV30,d$v._tempV32),d$ib.subtract(d$i,d$v._tempV32,d$d),d$ib.transformCoordinate(d$v._tempV32,d$e,d$v._tempV33);},d$n(d$v,["_tempV30",function(){return this._tempV30=new d$ib();},"_tempV31",function(){return this._tempV31=new d$ib();},"_tempV32",function(){return this._tempV32=new d$ib();},"_tempV33",function(){return this._tempV33=new d$ib();},"_tempV34",function(){return this._tempV34=new d$ib();},"_tempV35",function(){return this._tempV35=new d$ib();},"_tempV36",function(){return this._tempV36=new d$ib();},"_tempM0",function(){return this._tempM0=new d$ab();},"_tempM1",function(){return this._tempM1=new d$ab();},"_corners",function(){return this._corners=[new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib()];},"_rows1",function(){return this._rows1=[new d$ib(),new d$ib(),new d$ib()];},"_rows2",function(){return this._rows2=[new d$ib(),new d$ib(),new d$ib()];},"_ray",function(){return this._ray=new d$eb(new d$ib(),new d$ib());},"_boxBound1",function(){return this._boxBound1=new d$Za(new d$ib(),new d$ib());},"_boxBound2",function(){return this._boxBound2=new d$Za(new d$ib(),new d$ib());},"_boxBound3",function(){return this._boxBound3=new d$Za(new d$ib(),new d$ib());}]);}(),function(){function d$x(d$a,d$b){this.normal=null,this.distance=NaN,void 0===d$b&&(d$b=0),this.normal=d$a,this.distance=d$b;}return d$p(d$x,"laya.d3.math.Plane"),d$x.prototype.normalize=function(){var d$a=this.normal.elements,d$b=d$a[0],d$c=d$a[1],d$d=d$a[2],d$e=1/Math.sqrt(d$b*d$b+d$c*d$c+d$d*d$d);d$a[0]=d$b*d$e,d$a[1]=d$c*d$e,d$a[2]=d$d*d$e,this.distance*=d$e;},d$x.createPlaneBy3P=function(d$a,d$b,d$c){var d$d=d$a.elements,d$e=d$b.elements,d$f=d$c.elements,d$i=d$e[0]-d$d[0],d$j=d$e[1]-d$d[1],d$k=d$e[2]-d$d[2],d$l=d$f[0]-d$d[0],d$m=d$f[1]-d$d[1],d$n=d$f[2]-d$d[2],d$o=d$j*d$n-d$k*d$m,d$p=d$k*d$l-d$i*d$n,d$q=d$i*d$m-d$j*d$l,d$r=1/Math.sqrt(d$o*d$o+d$p*d$p+d$q*d$q),d$s=d$o*d$r,d$t=d$p*d$r,d$u=d$q*d$r,d$v=d$x._TEMPVec3.elements;d$v[0]=d$s,d$v[1]=d$t,d$v[2]=d$u;var d$w=-(d$s*d$d[0]+d$t*d$d[1]+d$u*d$d[2]);return new d$x(d$x._TEMPVec3,d$w);},d$x.PlaneIntersectionType_Back=0,d$x.PlaneIntersectionType_Front=1,d$x.PlaneIntersectionType_Intersecting=2,d$n(d$x,["_TEMPVec3",function(){return this._TEMPVec3=new d$ib();}]),d$x;}()),d$cb=function(){function d$e(d$a,d$b,d$c,d$d){this.elements=new Float32Array(4),void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=1),this.elements[0]=d$a,this.elements[1]=d$b,this.elements[2]=d$c,this.elements[3]=d$d;}d$p(d$e,"laya.d3.math.Quaternion");var d$a=d$e.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.scaling=function(d$a,d$b){var d$c=d$b.elements,d$d=this.elements;d$c[0]=d$d[0]*d$a,d$c[1]=d$d[1]*d$a,d$c[2]=d$d[2]*d$a,d$c[3]=d$d[3]*d$a;},d$a.normalize=function(d$a){var d$b=d$a.elements,d$c=this.elements,d$d=d$c[0],d$e=d$c[1],d$f=d$c[2],d$i=d$c[3],d$j=d$d*d$d+d$e*d$e+d$f*d$f+d$i*d$i;0<d$j&&(d$j=1/Math.sqrt(d$j),d$b[0]=d$d*d$j,d$b[1]=d$e*d$j,d$b[2]=d$f*d$j,d$b[3]=d$i*d$j);},d$a.length=function(){var d$a=this.elements,d$b=d$a[0],d$c=d$a[1],d$d=d$a[2],d$e=d$a[3];return Math.sqrt(d$b*d$b+d$c*d$c+d$d*d$d+d$e*d$e);},d$a.rotateX=function(d$a,d$b){var d$c=d$b.elements,d$d=this.elements;d$a*=.5;var d$e=d$d[0],d$f=d$d[1],d$i=d$d[2],d$j=d$d[3],d$k=Math.sin(d$a),d$l=Math.cos(d$a);d$c[0]=d$e*d$l+d$j*d$k,d$c[1]=d$f*d$l+d$i*d$k,d$c[2]=d$i*d$l-d$f*d$k,d$c[3]=d$j*d$l-d$e*d$k;},d$a.rotateY=function(d$a,d$b){var d$c=d$b.elements,d$d=this.elements;d$a*=.5;var d$e=d$d[0],d$f=d$d[1],d$i=d$d[2],d$j=d$d[3],d$k=Math.sin(d$a),d$l=Math.cos(d$a);d$c[0]=d$e*d$l-d$i*d$k,d$c[1]=d$f*d$l+d$j*d$k,d$c[2]=d$i*d$l+d$e*d$k,d$c[3]=d$j*d$l-d$f*d$k;},d$a.rotateZ=function(d$a,d$b){var d$c=d$b.elements,d$d=this.elements;d$a*=.5;var d$e=d$d[0],d$f=d$d[1],d$i=d$d[2],d$j=d$d[3],d$k=Math.sin(d$a),d$l=Math.cos(d$a);d$c[0]=d$e*d$l+d$f*d$k,d$c[1]=d$f*d$l-d$e*d$k,d$c[2]=d$i*d$l+d$j*d$k,d$c[3]=d$j*d$l-d$i*d$k;},d$a.getYawPitchRoll=function(d$a){d$ib.transformQuat(d$ib.ForwardRH,this,d$e.TEMPVector31),d$ib.transformQuat(d$ib.Up,this,d$e.TEMPVector32);var d$b=d$e.TEMPVector32.elements;d$e.angleTo(d$ib.ZERO,d$e.TEMPVector31,d$e.TEMPVector33);var d$c=d$e.TEMPVector33.elements;d$c[0]==Math.PI/2?(d$c[1]=d$e.arcTanAngle(d$b[2],d$b[0]),d$c[2]=0):d$c[0]==-Math.PI/2?(d$c[1]=d$e.arcTanAngle(-d$b[2],-d$b[0]),d$c[2]=0):(d$ab.createRotationY(-d$c[1],d$e.TEMPMatrix0),d$ab.createRotationX(-d$c[0],d$e.TEMPMatrix1),d$ib.transformCoordinate(d$e.TEMPVector32,d$e.TEMPMatrix0,d$e.TEMPVector32),d$ib.transformCoordinate(d$e.TEMPVector32,d$e.TEMPMatrix1,d$e.TEMPVector32),d$c[2]=d$e.arcTanAngle(d$b[1],-d$b[0])),d$c[1]<=-Math.PI&&(d$c[1]=Math.PI),d$c[2]<=-Math.PI&&(d$c[2]=Math.PI),d$c[1]>=Math.PI&&d$c[2]>=Math.PI&&(d$c[1]=0,d$c[2]=0,d$c[0]=Math.PI-d$c[0]);var d$d=d$a.elements;d$d[0]=d$c[1],d$d[1]=d$c[0],d$d[2]=d$c[2];},d$a.invert=function(d$a){var d$b=d$a.elements,d$c=this.elements,d$d=d$c[0],d$e=d$c[1],d$f=d$c[2],d$i=d$c[3],d$j=d$d*d$d+d$e*d$e+d$f*d$f+d$i*d$i,d$k=d$j?1/d$j:0;d$b[0]=-d$d*d$k,d$b[1]=-d$e*d$k,d$b[2]=-d$f*d$k,d$b[3]=d$i*d$k;},d$a.identity=function(){var d$a=this.elements;d$a[0]=0,d$a[1]=0,d$a[2]=0,d$a[3]=1;},d$a.fromArray=function(d$a,d$b){void 0===d$b&&(d$b=0),this.elements[0]=d$a[d$b+0],this.elements[1]=d$a[d$b+1],this.elements[2]=d$a[d$b+2],this.elements[3]=d$a[d$b+3];},d$a.cloneTo=function(d$a){var d$b,d$c,d$d;if((d$c=this.elements)!==(d$d=d$a.elements))for(d$b=0;d$b<4;++d$b)d$d[d$b]=d$c[d$b];},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$a.equals=function(d$a){var d$b=this.elements,d$c=d$a.elements;return d$ga.nearEqual(d$b[0],d$c[0])&&d$ga.nearEqual(d$b[1],d$c[1])&&d$ga.nearEqual(d$b[2],d$c[2])&&d$ga.nearEqual(d$b[3],d$c[3]);},d$a.lengthSquared=function(){var d$a=this.elements[0],d$b=this.elements[1],d$c=this.elements[2],d$d=this.elements[3];return d$a*d$a+d$b*d$b+d$c*d$c+d$d*d$d;},d$q(0,d$a,"x",function(){return this.elements[0];}),d$q(0,d$a,"y",function(){return this.elements[1];}),d$q(0,d$a,"z",function(){return this.elements[2];}),d$q(0,d$a,"w",function(){return this.elements[3];}),d$e.createFromYawPitchRoll=function(d$a,d$b,d$c,d$d){var d$e=.5*d$c,d$f=.5*d$b,d$i=.5*d$a,d$j=Math.sin(d$e),d$k=Math.cos(d$e),d$l=Math.sin(d$f),d$m=Math.cos(d$f),d$n=Math.sin(d$i),d$o=Math.cos(d$i),d$p=d$d.elements;d$p[0]=d$o*d$l*d$k+d$n*d$m*d$j,d$p[1]=d$n*d$m*d$k-d$o*d$l*d$j,d$p[2]=d$o*d$m*d$j-d$n*d$l*d$k,d$p[3]=d$o*d$m*d$k+d$n*d$l*d$j;},d$e.multiply=function(d$a,d$b,d$c){var d$d=d$a.elements,d$e=d$b.elements,d$f=d$c.elements,d$i=d$d[0],d$j=d$d[1],d$k=d$d[2],d$l=d$d[3],d$m=d$e[0],d$n=d$e[1],d$o=d$e[2],d$p=d$e[3],d$q=d$j*d$o-d$k*d$n,d$r=d$k*d$m-d$i*d$o,d$s=d$i*d$n-d$j*d$m,d$t=d$i*d$m+d$j*d$n+d$k*d$o;d$f[0]=d$i*d$p+d$m*d$l+d$q,d$f[1]=d$j*d$p+d$n*d$l+d$r,d$f[2]=d$k*d$p+d$o*d$l+d$s,d$f[3]=d$l*d$p-d$t;},d$e.arcTanAngle=function(d$a,d$b){return 0==d$a?1==d$b?Math.PI/2:-Math.PI/2:0<d$a?Math.atan(d$b/d$a):d$a<0?0<d$b?Math.atan(d$b/d$a)+Math.PI:Math.atan(d$b/d$a)-Math.PI:0;},d$e.angleTo=function(d$a,d$b,d$c){d$ib.subtract(d$b,d$a,d$e.TEMPVector30),d$ib.normalize(d$e.TEMPVector30,d$e.TEMPVector30),d$c.elements[0]=Math.asin(d$e.TEMPVector30.y),d$c.elements[1]=d$e.arcTanAngle(-d$e.TEMPVector30.z,-d$e.TEMPVector30.x);},d$e.createFromAxisAngle=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements;d$b*=.5;var d$f=Math.sin(d$b);d$d[0]=d$f*d$e[0],d$d[1]=d$f*d$e[1],d$d[2]=d$f*d$e[2],d$d[3]=Math.cos(d$b);},d$e.createFromMatrix3x3=function(d$a,d$b){var d$c,d$d=d$b.elements,d$e=d$a.elements,d$f=d$e[0]+d$e[4]+d$e[8];if(0<d$f)d$c=Math.sqrt(d$f+1),d$d[3]=.5*d$c,d$c=.5/d$c,d$d[0]=(d$e[5]-d$e[7])*d$c,d$d[1]=(d$e[6]-d$e[2])*d$c,d$d[2]=(d$e[1]-d$e[3])*d$c;else{var d$i=0;d$e[4]>d$e[0]&&(d$i=1),d$e[8]>d$e[3*d$i+d$i]&&(d$i=2);var d$j=(d$i+1)%3,d$k=(d$i+2)%3;d$c=Math.sqrt(d$e[3*d$i+d$i]-d$e[3*d$j+d$j]-d$e[3*d$k+d$k]+1),d$d[d$i]=.5*d$c,d$c=.5/d$c,d$d[3]=(d$e[3*d$j+d$k]-d$e[3*d$k+d$j])*d$c,d$d[d$j]=(d$e[3*d$j+d$i]+d$e[3*d$i+d$j])*d$c,d$d[d$k]=(d$e[3*d$k+d$i]+d$e[3*d$i+d$k])*d$c;}},d$e.createFromMatrix4x4=function(d$a,d$b){var d$c,d$d,d$e=d$a.elements,d$f=d$b.elements,d$i=d$e[0]+d$e[5]+d$e[10];0<d$i?(d$c=Math.sqrt(d$i+1),d$f[3]=.5*d$c,d$c=.5/d$c,d$f[0]=(d$e[6]-d$e[9])*d$c,d$f[1]=(d$e[8]-d$e[2])*d$c,d$f[2]=(d$e[1]-d$e[4])*d$c):d$e[0]>=d$e[5]&&d$e[0]>=d$e[10]?(d$d=.5/(d$c=Math.sqrt(1+d$e[0]-d$e[5]-d$e[10])),d$f[0]=.5*d$c,d$f[1]=(d$e[1]+d$e[4])*d$d,d$f[2]=(d$e[2]+d$e[8])*d$d,d$f[3]=(d$e[6]-d$e[9])*d$d):d$e[5]>d$e[10]?(d$d=.5/(d$c=Math.sqrt(1+d$e[5]-d$e[0]-d$e[10])),d$f[0]=(d$e[4]+d$e[1])*d$d,d$f[1]=.5*d$c,d$f[2]=(d$e[9]+d$e[6])*d$d,d$f[3]=(d$e[8]-d$e[2])*d$d):(d$d=.5/(d$c=Math.sqrt(1+d$e[10]-d$e[0]-d$e[5])),d$f[0]=(d$e[8]+d$e[2])*d$d,d$f[1]=(d$e[9]+d$e[6])*d$d,d$f[2]=.5*d$c,d$f[3]=(d$e[1]-d$e[4])*d$d);},d$e.slerp=function(d$a,d$b,d$c,d$d){var d$e,d$f,d$i,d$j,d$k,d$l=d$a.elements,d$m=d$b.elements,d$n=d$d.elements,d$o=d$l[0],d$p=d$l[1],d$q=d$l[2],d$r=d$l[3],d$s=d$m[0],d$t=d$m[1],d$u=d$m[2],d$v=d$m[3];return(d$f=d$o*d$s+d$p*d$t+d$q*d$u+d$r*d$v)<0&&(d$f=-d$f,d$s=-d$s,d$t=-d$t,d$u=-d$u,d$v=-d$v),d$k=1e-6<1-d$f?(d$e=Math.acos(d$f),d$i=Math.sin(d$e),d$j=Math.sin((1-d$c)*d$e)/d$i,Math.sin(d$c*d$e)/d$i):(d$j=1-d$c,d$c),d$n[0]=d$j*d$o+d$k*d$s,d$n[1]=d$j*d$p+d$k*d$t,d$n[2]=d$j*d$q+d$k*d$u,d$n[3]=d$j*d$r+d$k*d$v,d$n;},d$e.lerp=function(d$a,d$b,d$c,d$d){var d$e=d$d.elements,d$f=d$a.elements,d$i=d$b.elements,d$j=d$f[0],d$k=d$f[1],d$l=d$f[2],d$m=d$f[3];d$e[0]=d$j+d$c*(d$i[0]-d$j),d$e[1]=d$k+d$c*(d$i[1]-d$k),d$e[2]=d$l+d$c*(d$i[2]-d$l),d$e[3]=d$m+d$c*(d$i[3]-d$m);},d$e.add=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=d$e[0]+d$f[0],d$d[1]=d$e[1]+d$f[1],d$d[2]=d$e[2]+d$f[2],d$d[3]=d$e[3]+d$f[3];},d$e.dot=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements;return d$c[0]*d$d[0]+d$c[1]*d$d[1]+d$c[2]*d$d[2]+d$c[3]*d$d[3];},d$e.rotationLookAt=function(d$a,d$b,d$c){d$e.lookAt(d$ib.ZERO,d$a,d$b,d$c);},d$e.lookAt=function(d$a,d$b,d$c,d$d){d$ha.lookAt(d$a,d$b,d$c,d$e._tempMatrix3x3),d$e.rotationMatrix(d$e._tempMatrix3x3,d$d);},d$e.invert=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements,d$e=d$a.lengthSquared();d$ga.isZero(d$e)||(d$e=1/d$e,d$d[0]=-d$c[0]*d$e,d$d[1]=-d$c[1]*d$e,d$d[2]=-d$c[2]*d$e,d$d[3]=d$c[3]*d$e);},d$e.rotationMatrix=function(d$a,d$b){var d$c=d$a.elements,d$d=d$c[0],d$e=d$c[1],d$f=d$c[2],d$i=d$c[3],d$j=d$c[4],d$k=d$c[5],d$l=d$c[6],d$m=d$c[7],d$n=d$c[8],d$o=d$b.elements,d$p=NaN,d$q=NaN,d$r=d$d+d$j+d$n;0<d$r?(d$p=Math.sqrt(d$r+1),d$o[3]=.5*d$p,d$p=.5/d$p,d$o[0]=(d$k-d$m)*d$p,d$o[1]=(d$l-d$f)*d$p,d$o[2]=(d$e-d$i)*d$p):d$j<=d$d&&d$n<=d$d?(d$q=.5/(d$p=Math.sqrt(1+d$d-d$j-d$n)),d$o[0]=.5*d$p,d$o[1]=(d$e+d$i)*d$q,d$o[2]=(d$f+d$l)*d$q,d$o[3]=(d$k-d$m)*d$q):d$n<d$j?(d$q=.5/(d$p=Math.sqrt(1+d$j-d$d-d$n)),d$o[0]=(d$i+d$e)*d$q,d$o[1]=.5*d$p,d$o[2]=(d$m+d$k)*d$q,d$o[3]=(d$l-d$f)*d$q):(d$q=.5/(d$p=Math.sqrt(1+d$n-d$d-d$j)),d$o[0]=(d$l+d$f)*d$q,d$o[1]=(d$m+d$k)*d$q,d$o[2]=.5*d$p,d$o[3]=(d$e-d$i)*d$q);},d$e.DEFAULT=new d$e(),d$n(d$e,["TEMPVector30",function(){return this.TEMPVector30=new d$ib();},"TEMPVector31",function(){return this.TEMPVector31=new d$ib();},"TEMPVector32",function(){return this.TEMPVector32=new d$ib();},"TEMPVector33",function(){return this.TEMPVector33=new d$ib();},"TEMPMatrix0",function(){return this.TEMPMatrix0=new d$ab();},"TEMPMatrix1",function(){return this.TEMPMatrix1=new d$ab();},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new d$ha();},"NAN",function(){return this.NAN=new d$e(NaN,NaN,NaN,NaN);}]),d$e;}(),d$db=function(){function d$a(d$a){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=d$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1;}d$p(d$a,"laya.d3.math.Rand");var d$b=d$a.prototype;return d$b.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3];},d$b.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607);},d$b.getSignedFloat=function(){return 2*this.getFloat()-1;},d$q(0,d$b,"seed",function(){return this.seeds[0];},function(d$a){this.seeds[0]=d$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1;}),d$a.getFloatFromInt=function(d$a){return 1/8388607*(8388607&d$a);},d$a.getByteFromInt=function(d$a){return(8388607&d$a)>>>15;},d$a;}(),d$eb=(function(){function d$e(d$a){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(d$a instanceof Array)||4!==d$a.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|d$a[0],this._state0L=0|d$a[1],this._state1U=0|d$a[2],this._state1L=0|d$a[3];}d$p(d$e,"laya.d3.math.RandX");var d$a=d$e.prototype;d$a.randomint=function(){var d$a=this._state0U,d$b=this._state0L,d$c=this._state1U,d$d=this._state1L,d$e=(d$d>>>0)+(d$b>>>0),d$f=d$c+d$a+(d$e/2>>>31)>>>0,d$i=d$e>>>0,d$j=0,d$k=0;d$j=(d$a^=d$j=d$a<<23|(-512&d$b)>>>9)^(this._state0U=d$c),d$k=(d$b^=d$k=d$b<<23)^(this._state0L=d$d);d$j^=d$a>>>18,d$k^=d$b>>>18|(262143&d$a)<<14;return d$j^=d$c>>>5,d$k^=d$d>>>5|(31&d$c)<<27,this._state1U=d$j,this._state1L=d$k,[d$f,d$i];},d$a.random=function(){var d$a=this.randomint(),d$b=d$a[0],d$c=1023<<20|d$b>>>12,d$d=0|(d$a[1]>>>12|(4095&d$b)<<20);return d$e._CONVERTION_BUFFER.setUint32(0,d$c,!1),d$e._CONVERTION_BUFFER.setUint32(4,d$d,!1),d$db._CONVERTION_BUFFER.getFloat64(0,!1)-1;},d$n(d$e,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8));},"defaultRand",function(){return this.defaultRand=new d$db([0,Date.now()/65536,0,Date.now()%65536]);}]);}(),function(){function d$a(d$a,d$b){this.origin=null,this.direction=null,this.origin=d$a,this.direction=d$b;}return d$p(d$a,"laya.d3.math.Ray"),d$a;}()),d$fb=function(){function d$a(d$a,d$b){this.elements=new Float32Array(2),void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0);var d$c=this.elements;d$c[0]=d$a,d$c[1]=d$b;}d$p(d$a,"laya.d3.math.Vector2");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.fromArray=function(d$a,d$b){void 0===d$b&&(d$b=0),this.elements[0]=d$a[d$b+0],this.elements[1]=d$a[d$b+1];},d$b.cloneTo=function(d$a){var d$b=d$a.elements,d$c=this.elements;d$b[0]=d$c[0],d$b[1]=d$c[1];},d$b.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$b,"x",function(){return this.elements[0];},function(d$a){this.elements[0]=d$a;}),d$q(0,d$b,"y",function(){return this.elements[1];},function(d$a){this.elements[1]=d$a;}),d$a.scale=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements;d$d[0]=d$e[0]*d$b,d$d[1]=d$e[1]*d$b;},d$n(d$a,["ZERO",function(){return this.ZERO=new d$a(0,0);},"ONE",function(){return this.ONE=new d$a(1,1);}]),d$a;}(),d$ib=function(){function d$m(d$a,d$b,d$c){this.elements=new Float32Array(3),void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0);var d$d=this.elements;d$d[0]=d$a,d$d[1]=d$b,d$d[2]=d$c;}d$p(d$m,"laya.d3.math.Vector3");var d$a=d$m.prototype;return d$x.imps(d$a,{"laya.d3.core.IClone":!0}),d$a.fromArray=function(d$a,d$b){void 0===d$b&&(d$b=0),this.elements[0]=d$a[d$b+0],this.elements[1]=d$a[d$b+1],this.elements[2]=d$a[d$b+2];},d$a.cloneTo=function(d$a){var d$b=d$a.elements,d$c=this.elements;d$b[0]=d$c[0],d$b[1]=d$c[1],d$b[2]=d$c[2];},d$a.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$a.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0;},d$a.reset=function(d$a,d$b,d$c){this.elements[0]=d$a,this.elements[1]=d$b,this.elements[2]=d$c;},d$q(0,d$a,"x",function(){return this.elements[0];},function(d$a){this.elements[0]=d$a;}),d$q(0,d$a,"y",function(){return this.elements[1];},function(d$a){this.elements[1]=d$a;}),d$q(0,d$a,"z",function(){return this.elements[2];},function(d$a){this.elements[2]=d$a;}),d$m.distanceSquared=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements,d$e=d$c[0]-d$d[0],d$f=d$c[1]-d$d[1],d$i=d$c[2]-d$d[2];return d$e*d$e+d$f*d$f+d$i*d$i;},d$m.distance=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements,d$e=d$c[0]-d$d[0],d$f=d$c[1]-d$d[1],d$i=d$c[2]-d$d[2];return Math.sqrt(d$e*d$e+d$f*d$f+d$i*d$i);},d$m.min=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=Math.min(d$e[0],d$f[0]),d$d[1]=Math.min(d$e[1],d$f[1]),d$d[2]=Math.min(d$e[2],d$f[2]);},d$m.max=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=Math.max(d$e[0],d$f[0]),d$d[1]=Math.max(d$e[1],d$f[1]),d$d[2]=Math.max(d$e[2],d$f[2]);},d$m.transformQuat=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements,d$i=d$e[0],d$j=d$e[1],d$k=d$e[2],d$l=d$f[0],d$m=d$f[1],d$n=d$f[2],d$o=d$f[3],d$p=d$o*d$i+d$m*d$k-d$n*d$j,d$q=d$o*d$j+d$n*d$i-d$l*d$k,d$r=d$o*d$k+d$l*d$j-d$m*d$i,d$s=-d$l*d$i-d$m*d$j-d$n*d$k;d$d[0]=d$p*d$o+d$s*-d$l+d$q*-d$n-d$r*-d$m,d$d[1]=d$q*d$o+d$s*-d$m+d$r*-d$l-d$p*-d$n,d$d[2]=d$r*d$o+d$s*-d$n+d$p*-d$m-d$q*-d$l;},d$m.scalarLength=function(d$a){var d$b=d$a.elements,d$c=d$b[0],d$d=d$b[1],d$e=d$b[2];return Math.sqrt(d$c*d$c+d$d*d$d+d$e*d$e);},d$m.scalarLengthSquared=function(d$a){var d$b=d$a.elements,d$c=d$b[0],d$d=d$b[1],d$e=d$b[2];return d$c*d$c+d$d*d$d+d$e*d$e;},d$m.normalize=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements,d$e=d$c[0],d$f=d$c[1],d$i=d$c[2],d$j=d$e*d$e+d$f*d$f+d$i*d$i;0<d$j&&(d$j=1/Math.sqrt(d$j),d$d[0]=d$c[0]*d$j,d$d[1]=d$c[1]*d$j,d$d[2]=d$c[2]*d$j);},d$m.multiply=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=d$e[0]*d$f[0],d$d[1]=d$e[1]*d$f[1],d$d[2]=d$e[2]*d$f[2];},d$m.scale=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements;d$d[0]=d$e[0]*d$b,d$d[1]=d$e[1]*d$b,d$d[2]=d$e[2]*d$b;},d$m.lerp=function(d$a,d$b,d$c,d$d){var d$e=d$d.elements,d$f=d$a.elements,d$i=d$b.elements,d$j=d$f[0],d$k=d$f[1],d$l=d$f[2];d$e[0]=d$j+d$c*(d$i[0]-d$j),d$e[1]=d$k+d$c*(d$i[1]-d$k),d$e[2]=d$l+d$c*(d$i[2]-d$l);},d$m.transformV3ToV3=function(d$a,d$b,d$c){var d$d=d$m._tempVector4;d$m.transformV3ToV4(d$a,d$b,d$d);var d$e=d$d.elements,d$f=d$c.elements;d$f[0]=d$e[0],d$f[1]=d$e[1],d$f[2]=d$e[2];},d$m.transformV3ToV4=function(d$a,d$b,d$c){var d$d=d$a.elements,d$e=d$d[0],d$f=d$d[1],d$i=d$d[2],d$j=d$b.elements,d$k=d$c.elements;d$k[0]=d$e*d$j[0]+d$f*d$j[4]+d$i*d$j[8]+d$j[12],d$k[1]=d$e*d$j[1]+d$f*d$j[5]+d$i*d$j[9]+d$j[13],d$k[2]=d$e*d$j[2]+d$f*d$j[6]+d$i*d$j[10]+d$j[14],d$k[3]=d$e*d$j[3]+d$f*d$j[7]+d$i*d$j[11]+d$j[15];},d$m.TransformNormal=function(d$a,d$b,d$c){var d$d=d$a.elements,d$e=d$d[0],d$f=d$d[1],d$i=d$d[2],d$j=d$b.elements,d$k=d$c.elements;d$k[0]=d$e*d$j[0]+d$f*d$j[4]+d$i*d$j[8],d$k[1]=d$e*d$j[1]+d$f*d$j[5]+d$i*d$j[9],d$k[2]=d$e*d$j[2]+d$f*d$j[6]+d$i*d$j[10];},d$m.transformCoordinate=function(d$a,d$b,d$c){var d$d=d$m._tempVector4.elements,d$e=d$a.elements,d$f=d$e[0],d$i=d$e[1],d$j=d$e[2],d$k=d$b.elements;d$d[0]=d$f*d$k[0]+d$i*d$k[4]+d$j*d$k[8]+d$k[12],d$d[1]=d$f*d$k[1]+d$i*d$k[5]+d$j*d$k[9]+d$k[13],d$d[2]=d$f*d$k[2]+d$i*d$k[6]+d$j*d$k[10]+d$k[14],d$d[3]=1/(d$f*d$k[3]+d$i*d$k[7]+d$j*d$k[11]+d$k[15]);var d$l=d$c.elements;d$l[0]=d$d[0]*d$d[3],d$l[1]=d$d[1]*d$d[3],d$l[2]=d$d[2]*d$d[3];},d$m.Clamp=function(d$a,d$b,d$c,d$d){var d$e=d$a.elements,d$f=d$e[0],d$i=d$e[1],d$j=d$e[2],d$k=d$b.elements,d$l=d$k[0],d$m=d$k[1],d$n=d$k[2],d$o=d$c.elements,d$p=d$o[0],d$q=d$o[1],d$r=d$o[2],d$s=d$d.elements;d$f=(d$f=d$p<d$f?d$p:d$f)<d$l?d$l:d$f,d$i=(d$i=d$q<d$i?d$q:d$i)<d$m?d$m:d$i,d$j=(d$j=d$r<d$j?d$r:d$j)<d$n?d$n:d$j,d$s[0]=d$f,d$s[1]=d$i,d$s[2]=d$j;},d$m.add=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=d$e[0]+d$f[0],d$d[1]=d$e[1]+d$f[1],d$d[2]=d$e[2]+d$f[2];},d$m.subtract=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=d$e[0]-d$f[0],d$d[1]=d$e[1]-d$f[1],d$d[2]=d$e[2]-d$f[2];},d$m.cross=function(d$a,d$b,d$c){var d$d=d$a.elements,d$e=d$b.elements,d$f=d$c.elements,d$i=d$d[0],d$j=d$d[1],d$k=d$d[2],d$l=d$e[0],d$m=d$e[1],d$n=d$e[2];d$f[0]=d$j*d$n-d$k*d$m,d$f[1]=d$k*d$l-d$i*d$n,d$f[2]=d$i*d$m-d$j*d$l;},d$m.dot=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements;return d$c[0]*d$d[0]+d$c[1]*d$d[1]+d$c[2]*d$d[2];},d$m.equals=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements;return d$ga.nearEqual(Math.abs(d$c[0]),Math.abs(d$d[0]))&&d$ga.nearEqual(Math.abs(d$c[1]),Math.abs(d$d[1]))&&d$ga.nearEqual(Math.abs(d$c[2]),Math.abs(d$d[2]));},d$m.ZERO=new d$m(0,0,0),d$m.ONE=new d$m(1,1,1),d$m.NegativeUnitX=new d$m(-1,0,0),d$m.UnitX=new d$m(1,0,0),d$m.UnitY=new d$m(0,1,0),d$m.UnitZ=new d$m(0,0,1),d$m.ForwardRH=new d$m(0,0,-1),d$m.ForwardLH=new d$m(0,0,1),d$m.Up=new d$m(0,1,0),d$m.NAN=new d$m(NaN,NaN,NaN),d$n(d$m,["_tempVector4",function(){return this._tempVector4=new d$jb();}]),d$m;}(),d$jb=function(){function d$a(d$a,d$b,d$c,d$d){this.elements=new Float32Array(4),void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=0);var d$e=this.elements;d$e[0]=d$a,d$e[1]=d$b,d$e[2]=d$c,d$e[3]=d$d;}d$p(d$a,"laya.d3.math.Vector4");var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b.fromArray=function(d$a,d$b){void 0===d$b&&(d$b=0),this.elements[0]=d$a[d$b+0],this.elements[1]=d$a[d$b+1],this.elements[2]=d$a[d$b+2],this.elements[3]=d$a[d$b+3];},d$b.cloneTo=function(d$a){var d$b=d$a.elements,d$c=this.elements;d$b[0]=d$c[0],d$b[1]=d$c[1],d$b[2]=d$c[2],d$b[3]=d$c[3];},d$b.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$b.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);},d$b.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;},d$q(0,d$b,"x",function(){return this.elements[0];},function(d$a){this.elements[0]=d$a;}),d$q(0,d$b,"y",function(){return this.elements[1];},function(d$a){this.elements[1]=d$a;}),d$q(0,d$b,"z",function(){return this.elements[2];},function(d$a){this.elements[2]=d$a;}),d$q(0,d$b,"w",function(){return this.elements[3];},function(d$a){this.elements[3]=d$a;}),d$a.lerp=function(d$a,d$b,d$c,d$d){var d$e=d$d.elements,d$f=d$a.elements,d$i=d$b.elements,d$j=d$f[0],d$k=d$f[1],d$l=d$f[2],d$m=d$f[3];d$e[0]=d$j+d$c*(d$i[0]-d$j),d$e[1]=d$k+d$c*(d$i[1]-d$k),d$e[2]=d$l+d$c*(d$i[2]-d$l),d$e[3]=d$m+d$c*(d$i[3]-d$m);},d$a.transformByM4x4=function(d$a,d$b,d$c){var d$d=d$a.elements,d$e=d$d[0],d$f=d$d[1],d$i=d$d[2],d$j=d$d[3],d$k=d$b.elements,d$l=d$c.elements;d$l[0]=d$e*d$k[0]+d$f*d$k[4]+d$i*d$k[8]+d$j*d$k[12],d$l[1]=d$e*d$k[1]+d$f*d$k[5]+d$i*d$k[9]+d$j*d$k[13],d$l[2]=d$e*d$k[2]+d$f*d$k[6]+d$i*d$k[10]+d$j*d$k[14],d$l[3]=d$e*d$k[3]+d$f*d$k[7]+d$i*d$k[11]+d$j*d$k[15];},d$a.equals=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements;return d$ga.nearEqual(Math.abs(d$c[0]),Math.abs(d$d[0]))&&d$ga.nearEqual(Math.abs(d$c[1]),Math.abs(d$d[1]))&&d$ga.nearEqual(Math.abs(d$c[2]),Math.abs(d$d[2]))&&d$ga.nearEqual(Math.abs(d$c[3]),Math.abs(d$d[3]));},d$a.normalize=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements,d$e=d$a.length();0<d$e&&(d$d[0]=d$c[0]*d$e,d$d[1]=d$c[1]*d$e,d$d[2]=d$c[2]*d$e,d$d[3]=d$c[3]*d$e);},d$a.add=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=d$e[0]+d$f[0],d$d[1]=d$e[1]+d$f[1],d$d[2]=d$e[2]+d$f[2],d$d[3]=d$e[3]+d$f[3];},d$a.subtract=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=d$e[0]-d$f[0],d$d[1]=d$e[1]-d$f[1],d$d[2]=d$e[2]-d$f[2],d$d[3]=d$e[3]-d$f[3];},d$a.multiply=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=d$e[0]*d$f[0],d$d[1]=d$e[1]*d$f[1],d$d[2]=d$e[2]*d$f[2],d$d[3]=d$e[3]*d$f[3];},d$a.scale=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements;d$d[0]=d$e[0]*d$b,d$d[1]=d$e[1]*d$b,d$d[2]=d$e[2]*d$b,d$d[3]=d$e[3]*d$b;},d$a.Clamp=function(d$a,d$b,d$c,d$d){var d$e=d$a.elements,d$f=d$e[0],d$i=d$e[1],d$j=d$e[2],d$k=d$e[3],d$l=d$b.elements,d$m=d$l[0],d$n=d$l[1],d$o=d$l[2],d$p=d$l[3],d$q=d$c.elements,d$r=d$q[0],d$s=d$q[1],d$t=d$q[2],d$u=d$q[3],d$v=d$d.elements;d$f=(d$f=d$r<d$f?d$r:d$f)<d$m?d$m:d$f,d$i=(d$i=d$s<d$i?d$s:d$i)<d$n?d$n:d$i,d$j=(d$j=d$t<d$j?d$t:d$j)<d$o?d$o:d$j,d$k=(d$k=d$u<d$k?d$u:d$k)<d$p?d$p:d$k,d$v[0]=d$f,d$v[1]=d$i,d$v[2]=d$j,d$v[3]=d$k;},d$a.distanceSquared=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements,d$e=d$c[0]-d$d[0],d$f=d$c[1]-d$d[1],d$i=d$c[2]-d$d[2],d$j=d$c[3]-d$d[3];return d$e*d$e+d$f*d$f+d$i*d$i+d$j*d$j;},d$a.distance=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements,d$e=d$c[0]-d$d[0],d$f=d$c[1]-d$d[1],d$i=d$c[2]-d$d[2],d$j=d$c[3]-d$d[3];return Math.sqrt(d$e*d$e+d$f*d$f+d$i*d$i+d$j*d$j);},d$a.dot=function(d$a,d$b){var d$c=d$a.elements,d$d=d$b.elements;return d$c[0]*d$d[0]+d$c[1]*d$d[1]+d$c[2]*d$d[2]+d$c[3]*d$d[3];},d$a.min=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=Math.min(d$e[0],d$f[0]),d$d[1]=Math.min(d$e[1],d$f[1]),d$d[2]=Math.min(d$e[2],d$f[2]),d$d[3]=Math.min(d$e[3],d$f[3]);},d$a.max=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b.elements;d$d[0]=Math.max(d$e[0],d$f[0]),d$d[1]=Math.max(d$e[1],d$f[1]),d$d[2]=Math.max(d$e[2],d$f[2]),d$d[3]=Math.max(d$e[3],d$f[3]);},d$n(d$a,["ZERO",function(){return this.ZERO=new d$a();},"ONE",function(){return this.ONE=new d$a(1,1,1,1);},"UnitX",function(){return this.UnitX=new d$a(1,0,0,0);},"UnitY",function(){return this.UnitY=new d$a(0,1,0,0);},"UnitZ",function(){return this.UnitZ=new d$a(0,0,1,0);},"UnitW",function(){return this.UnitW=new d$a(0,0,0,1);}]),d$a;}(),d$kb=function(){function d$f(d$a,d$b,d$c,d$d){this.minDepth=0,this.maxDepth=1,this.x=d$a,this.y=d$b,this.width=d$c,this.height=d$d;}d$p(d$f,"laya.d3.math.Viewport");var d$a=d$f.prototype;return d$a.project=function(d$a,d$b,d$c){d$ib.transformV3ToV3(d$a,d$b,d$c);var d$d=d$a.elements,d$e=d$b.elements,d$f=d$c.elements,d$i=d$d[0]*d$e[3]+d$d[1]*d$e[7]+d$d[2]*d$e[11]+d$e[15];1!==d$i&&(d$f[0]=d$f[0]/d$i,d$f[1]=d$f[1]/d$i,d$f[2]=d$f[2]/d$i),d$f[0]=.5*(d$f[0]+1)*this.width+this.x,d$f[1]=.5*(1-d$f[1])*this.height+this.y,d$f[2]=d$f[2]*(this.maxDepth-this.minDepth)+this.minDepth;},d$a.unprojectFromMat=function(d$a,d$b,d$c){var d$d=d$a.elements,d$e=d$b.elements,d$f=d$c.elements;d$f[0]=(d$d[0]-this.x)/this.width*2-1,d$f[1]=-((d$d[1]-this.y)/this.height*2-1);var d$i=(this.maxDepth-this.minDepth)/2;d$f[2]=(d$d[2]-this.minDepth-d$i)/d$i;var d$j=d$f[0]*d$e[3]+d$f[1]*d$e[7]+d$f[2]*d$e[11]+d$e[15];d$ib.transformV3ToV3(d$c,d$b,d$c),1!==d$j&&(d$f[0]=d$f[0]/d$j,d$f[1]=d$f[1]/d$j,d$f[2]=d$f[2]/d$j);},d$a.unprojectFromWVP=function(d$a,d$b,d$c,d$d,d$e){d$ab.multiply(d$b,d$c,d$f._tempMatrix4x4),d$d&&d$ab.multiply(d$f._tempMatrix4x4,d$d,d$f._tempMatrix4x4),d$f._tempMatrix4x4.invert(d$f._tempMatrix4x4),this.unprojectFromMat(d$a,d$f._tempMatrix4x4,d$e);},d$n(d$f,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new d$ab();}]),d$f;}(),d$lb=function(){function d$E(d$a){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=d$a,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[];}d$p(d$E,"laya.d3.resource.models.SubMesh");var d$a=d$E.prototype;return d$x.imps(d$a,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),d$a._getVertexBuffer=function(d$a){return void 0===d$a&&(d$a=0),0===d$a?this._vertexBuffer:null;},d$a._getIndexBuffer=function(){return this._indexBuffer;},d$a._getStaticBatchBakedVertexs=function(d$a,d$b){var d$c,d$d,d$e=this._vertexBuffer,d$f=d$e.vertexDeclaration,d$i=d$f.getVertexElementByUsage(0).offset/4,d$j=d$f.getVertexElementByUsage(3).offset/4,d$k=d$b.meshRender.lightmapScaleOffset,d$l=0,d$m=0,d$n=0,d$o=0,d$p=0,d$q=0;if(d$k){if(d$d=d$f.getVertexElementByUsage(15))d$n=d$f.vertexStride/4,d$c=0<this._vertexCount?d$e.getData().slice(this._vertexStart*d$n,(this._vertexStart+this._vertexCount)*d$n):d$e.getData().slice(),d$o=d$d.offset/4;else{d$n=(d$q=d$f.vertexStride/4)+2,d$c=this._vertexCount?new Float32Array(this._vertexCount*(d$e.vertexDeclaration.vertexStride/4+2)):new Float32Array(d$e.vertexCount*(d$e.vertexDeclaration.vertexStride/4+2)),d$o=(d$p=d$f.getVertexElementByUsage(2).offset/4)+2;var d$r=d$e.getData();for(d$l=0,d$m=d$r.length/d$q;d$l<d$m;d$l++){var d$s=0;d$s=0<this._vertexCount?(this._vertexStart+d$l)*d$q:d$l*d$q;var d$t=d$l*d$n,d$u=0;for(d$u=0;d$u<d$o;d$u++)d$c[d$t+d$u]=d$r[d$s+d$u];for(d$u=d$o;d$u<d$q;d$u++)d$c[d$t+d$u+2]=d$r[d$s+d$u];}}}else d$n=d$f.vertexStride/4,d$c=this._vertexCount?d$e.getData().slice(this._vertexStart*d$n,(this._vertexStart+this._vertexCount)*d$n):d$e.getData().slice();if(d$a){var d$v=d$a.worldMatrix,d$w=d$E._tempMatrix4x40;d$v.invert(d$w);var d$x=d$E._tempMatrix4x41,d$y=d$b.transform.worldMatrix;d$ab.multiply(d$w,d$y,d$x);}else d$x=d$b.transform.worldMatrix;var d$z=d$E._tempQuaternion0;for(d$x.decomposeTransRotScale(d$E._tempVector30,d$z,d$E._tempVector31),d$l=0,d$m=d$c.length/d$n;d$l<d$m;d$l++){var d$A=d$l*d$n+d$i,d$B=d$l*d$n+d$j;if(d$sb.transformVector3ArrayToVector3ArrayCoordinate(d$c,d$A,d$x,d$c,d$A),d$sb.transformVector3ArrayByQuat(d$c,d$B,d$z,d$c,d$B),d$k){var d$C=d$l*d$n+d$o;if(d$d)d$sb.transformLightingMapTexcoordByUV1Array(d$c,d$C,d$k,d$c,d$C);else{var d$D=d$l*d$q+d$p;d$sb.transformLightingMapTexcoordByUV0Array(d$r,d$D,d$k,d$c,d$C);}}}return d$c;},d$a._getVertexBuffers=function(){return null;},d$a._beforeRender=function(d$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},d$a._render=function(d$a){var d$b,d$c=0,d$d=d$a.renderElement;if(1<this._indexCount){var d$e=this._boneIndicesList.length;if(1<d$e){for(var d$f=0;d$f<d$e;d$f++)(d$b=d$d._skinAnimationDatas||this._skinAnimationDatas)&&(d$d._shaderValue.setValue(0,d$b[d$f]),d$a._shader.uploadRenderElementUniforms(d$d._shaderValue.data)),d$F.mainContext.drawElements(4,this._subIndexBufferCount[d$f],5123,2*this._subIndexBufferStart[d$f]);d$A.drawCall+=d$e;}else(d$b=d$d._skinAnimationDatas||this._skinAnimationDatas)&&(d$d._shaderValue.setValue(0,d$b[0]),d$a._shader.uploadRenderElementUniforms(d$d._shaderValue.data)),d$F.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),d$A.drawCall++;d$c=this._indexCount;}else d$c=this._indexBuffer.indexCount,(d$b=d$d._skinAnimationDatas||this._skinAnimationDatas)&&(d$d._shaderValue.setValue(0,d$b[0]),d$a._shader.uploadRenderElementUniforms(d$d._shaderValue.data)),d$F.mainContext.drawElements(4,d$c,5123,0),d$A.drawCall++;d$A.trianglesFaces+=d$c/3;},d$a.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData();},d$a.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null;},d$q(0,d$a,"_vertexBufferCount",function(){return 1;}),d$q(0,d$a,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),d$n(d$E,["_tempVector30",function(){return this._tempVector30=new d$ib();},"_tempVector31",function(){return this._tempVector31=new d$ib();},"_tempQuaternion0",function(){return this._tempQuaternion0=new d$cb();},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new d$ab();},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new d$ab();}]),d$E;}(),d$mb=function(){function d$a(d$a){this.defineCounter=0,this.defines=null,d$a?(this.defineCounter=d$a.defineCounter,this.defines=d$a.defines.slice()):(this.defineCounter=0,this.defines=[]);}return d$p(d$a,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),d$a.prototype.registerDefine=function(d$a){var d$b=Math.pow(2,this.defineCounter++);return this.defines[d$b]=d$a,d$b;},d$a;}(),d$nb=function(){function d$a(){}return d$p(d$a,"laya.d3.shader.ShaderInit3D"),d$a.__init__=function(){var d$a,d$b;d$Ab._globalRegDefine("HIGHPRECISION",d$Ab.SHADERDEFINE_HIGHPRECISION),d$Ab._globalRegDefine("FOG",d$Ab.SHADERDEFINE_FOG),d$Ab._globalRegDefine("DIRECTIONLIGHT",d$Ab.SHADERDEFINE_DIRECTIONLIGHT),d$Ab._globalRegDefine("POINTLIGHT",d$Ab.SHADERDEFINE_POINTLIGHT),d$Ab._globalRegDefine("SPOTLIGHT",d$Ab.SHADERDEFINE_SPOTLIGHT),d$Ab._globalRegDefine("UV",d$Ab.SHADERDEFINE_UV0),d$Ab._globalRegDefine("COLOR",d$Ab.SHADERDEFINE_COLOR),d$Ab._globalRegDefine("UV1",d$Ab.SHADERDEFINE_UV1),d$Ab._globalRegDefine("CASTSHADOW",d$pb.SHADERDEFINE_CAST_SHADOW),d$Ab._globalRegDefine("SHADOWMAP_PSSM1",d$pb.SHADERDEFINE_SHADOW_PSSM1),d$Ab._globalRegDefine("SHADOWMAP_PSSM2",d$pb.SHADERDEFINE_SHADOW_PSSM2),d$Ab._globalRegDefine("SHADOWMAP_PSSM3",d$pb.SHADERDEFINE_SHADOW_PSSM3),d$Ab._globalRegDefine("SHADOWMAP_PCF_NO",d$pb.SHADERDEFINE_SHADOW_PCF_NO),d$Ab._globalRegDefine("SHADOWMAP_PCF1",d$pb.SHADERDEFINE_SHADOW_PCF1),d$Ab._globalRegDefine("SHADOWMAP_PCF2",d$pb.SHADERDEFINE_SHADOW_PCF2),d$Ab._globalRegDefine("SHADOWMAP_PCF3",d$pb.SHADERDEFINE_SHADOW_PCF3),d$Ab._globalRegDefine("DEPTHFOG",d$Ab.SAHDERDEFINE_DEPTHFOG),d$Lb.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),d$Lb.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),d$a={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},d$b={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var d$c=d$Lb.nameKey.add("SIMPLE");shaderCompile=d$Ab.add(d$c,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',d$a,d$b),d$Mb.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),d$Mb.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),d$Mb.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),d$Mb.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),d$Mb.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),d$Mb.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),d$Mb.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),d$Mb.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),d$Mb.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG");},d$a;}(),d$ob=function(){function d$a(){this._data=null,this._data=[];}d$p(d$a,"laya.d3.shader.ValusArray");var d$b=d$a.prototype;return d$b.setValue=function(d$a,d$b){this._data[d$a]=d$b;},d$q(0,d$b,"data",function(){return this._data;}),d$a;}(),d$pb=function(){function d$a(){}return d$a.SHADERDEFINE_RECEIVE_SHADOW=1,d$a.SHADERDEFINE_CAST_SHADOW=512,d$a.SHADERDEFINE_SHADOW_PSSM1=1024,d$a.SHADERDEFINE_SHADOW_PSSM2=2048,d$a.SHADERDEFINE_SHADOW_PSSM3=4096,d$a.SHADERDEFINE_SHADOW_PCF_NO=8192,d$a.SHADERDEFINE_SHADOW_PCF1=16384,d$a.SHADERDEFINE_SHADOW_PCF2=32768,d$a.SHADERDEFINE_SHADOW_PCF3=65536,d$a.MAX_PSSM_COUNT=3,d$a;}(),d$qb=function(){function d$X(){}return d$p(d$X,"laya.d3.utils.Picker"),d$X.calculateCursorRay=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=d$a.elements[0],d$j=d$a.elements[1],d$k=d$X._tempVector30,d$l=d$k.elements;d$l[0]=d$i,d$l[1]=d$j,d$l[2]=d$b.minDepth;var d$m=d$X._tempVector31,d$n=d$m.elements;d$n[0]=d$i,d$n[1]=d$j,d$n[2]=d$b.maxDepth;var d$o=d$f.origin,d$p=d$X._tempVector32;d$b.unprojectFromWVP(d$k,d$c,d$d,d$e,d$o),d$b.unprojectFromWVP(d$m,d$c,d$d,d$e,d$p);var d$q=d$f.direction.elements;d$q[0]=d$p.x-d$o.x,d$q[1]=d$p.y-d$o.y,d$q[2]=d$p.z-d$o.z,d$ib.normalize(d$f.direction,d$f.direction);},d$X.rayIntersectsPositionsAndIndices=function(d$a,d$b,d$c,d$d,d$e){for(var d$f=d$c.vertexStride/4,d$i=d$c.getVertexElementByUsage(0).offset/4,d$j=Number.MAX_VALUE,d$k=-1,d$l=-1,d$m=-1,d$n=0;d$n<d$d.length;d$n+=3){var d$o=d$X._tempVector35,d$p=d$o.elements,d$q=d$d[d$n]*d$f,d$r=d$q+d$i;d$p[0]=d$b[d$r],d$p[1]=d$b[1+d$r],d$p[2]=d$b[2+d$r];var d$s=d$X._tempVector36,d$t=d$s.elements,d$u=d$d[d$n+1]*d$f,d$v=d$u+d$i;d$t[0]=d$b[d$v],d$t[1]=d$b[1+d$v],d$t[2]=d$b[2+d$v];var d$w=d$X._tempVector37,d$x=d$w.elements,d$y=d$d[d$n+2]*d$f,d$z=d$y+d$i;d$x[0]=d$b[d$z],d$x[1]=d$b[1+d$z],d$x[2]=d$b[2+d$z];var d$A=laya.d3.utils.Picker.rayIntersectsTriangle(d$a,d$o,d$s,d$w);!isNaN(d$A)&&d$A<d$j&&(d$j=d$A,d$k=d$q,d$l=d$u,d$m=d$y);}if(d$j===Number.MAX_VALUE)return d$e.position.toDefault(),d$e.distance=Number.MAX_VALUE,d$e.trianglePositions[0].toDefault(),d$e.trianglePositions[1].toDefault(),d$e.trianglePositions[2].toDefault(),d$e.triangleNormals[0].toDefault(),d$e.triangleNormals[1].toDefault(),d$e.triangleNormals[2].toDefault(),!1;d$e.distance=d$j,d$ib.scale(d$a.direction,d$j,d$e.position),d$ib.add(d$a.origin,d$e.position,d$e.position);var d$B=d$e.trianglePositions,d$C=d$B[0],d$D=d$B[1],d$E=d$B[2],d$F=d$C.elements,d$G=d$D.elements,d$H=d$E.elements,d$I=d$k+d$i;d$F[0]=d$b[d$I],d$F[1]=d$b[d$I+1],d$F[2]=d$b[d$I+2];var d$J=d$l+d$i;d$G[0]=d$b[d$J],d$G[1]=d$b[d$J+1],d$G[2]=d$b[d$J+2];var d$K=d$m+d$i;d$H[0]=d$b[d$K],d$H[1]=d$b[d$K+1],d$H[2]=d$b[d$K+2];var d$L=d$c.getVertexElementByUsage(3);if(d$L){var d$M=d$L.offset/4,d$N=d$e.triangleNormals,d$O=d$N[0],d$P=d$N[1],d$Q=d$N[2],d$R=d$O.elements,d$S=d$P.elements,d$T=d$Q.elements,d$U=d$k+d$M;d$R[0]=d$b[d$U],d$R[1]=d$b[d$U+1],d$R[2]=d$b[d$U+2];var d$V=d$l+d$M;d$S[0]=d$b[d$V],d$S[1]=d$b[d$V+1],d$S[2]=d$b[d$V+2];var d$W=d$m+d$M;d$T[0]=d$b[d$W],d$T[1]=d$b[d$W+1],d$T[2]=d$b[d$W+2];}return!0;},d$X.rayIntersectsTriangle=function(d$a,d$b,d$c,d$d){var d$e=d$X._tempVector30,d$f=d$X._tempVector31;d$ib.subtract(d$c,d$b,d$e),d$ib.subtract(d$d,d$b,d$f);var d$i,d$j=d$X._tempVector32;if(d$ib.cross(d$a.direction,d$f,d$j),(d$i=d$ib.dot(d$e,d$j))>-Number.MIN_VALUE&&d$i<Number.MIN_VALUE)return Number.NaN;var d$k,d$l=1/d$i,d$m=d$X._tempVector33;if(d$ib.subtract(d$a.origin,d$b,d$m),d$k=d$ib.dot(d$m,d$j),(d$k*=d$l)<0||1<d$k)return Number.NaN;var d$n,d$o,d$p=d$X._tempVector34;return d$ib.cross(d$m,d$e,d$p),d$n=d$ib.dot(d$a.direction,d$p),(d$n*=d$l)<0||1<d$k+d$n?Number.NaN:(d$o=d$ib.dot(d$f,d$p),(d$o*=d$l)<0?Number.NaN:d$o);},d$n(d$X,["_tempVector30",function(){return this._tempVector30=new d$ib();},"_tempVector31",function(){return this._tempVector31=new d$ib();},"_tempVector32",function(){return this._tempVector32=new d$ib();},"_tempVector33",function(){return this._tempVector33=new d$ib();},"_tempVector34",function(){return this._tempVector34=new d$ib();},"_tempVector35",function(){return this._tempVector35=new d$ib();},"_tempVector36",function(){return this._tempVector36=new d$ib();},"_tempVector37",function(){return this._tempVector37=new d$ib();}]),d$X;}(),d$rb=(function(){function d$a(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new d$ib(),new d$ib(),new d$ib()],this.trianglePositions.length=3,this.triangleNormals=[new d$ib(),new d$ib(),new d$ib()],this.triangleNormals.length=3,this.position=new d$ib();}d$p(d$a,"laya.d3.utils.RaycastHit"),d$a.prototype.cloneTo=function(d$a){d$a.distance=this.distance,this.trianglePositions[0].cloneTo(d$a.trianglePositions[0]),this.trianglePositions[1].cloneTo(d$a.trianglePositions[1]),this.trianglePositions[2].cloneTo(d$a.trianglePositions[2]),this.triangleNormals[0].cloneTo(d$a.triangleNormals[0]),this.triangleNormals[1].cloneTo(d$a.triangleNormals[1]),this.triangleNormals[2].cloneTo(d$a.triangleNormals[2]),this.position.cloneTo(d$a.position),d$a.sprite3D=this.sprite3D;};}(),function(){function d$a(d$a,d$b){this._width=0,this._height=0,this._width=d$a,this._height=d$b;}d$p(d$a,"laya.d3.utils.Size");var d$b=d$a.prototype;return d$q(0,d$b,"width",function(){return-1===this._width?d$Y.clientWidth:this._width;}),d$q(0,d$b,"height",function(){return-1===this._height?d$Y.clientHeight:this._height;}),d$q(1,d$a,"fullScreen",function(){return new d$a(-1,-1);}),d$a;}()),d$sb=function(){function d$I(){}return d$p(d$I,"laya.d3.utils.Utils3D"),d$I._rotationTransformScaleSkinAnimation=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$n){var d$o,d$p,d$q,d$r,d$s,d$t=d$I._tempArray16_0,d$u=d$I._tempArray16_1,d$v=d$I._tempArray16_2,d$w=d$d+d$d,d$x=d$e+d$e,d$y=d$f+d$f,d$z=d$d*d$w,d$A=d$e*d$w,d$B=d$e*d$x,d$C=d$f*d$w,d$D=d$f*d$x,d$E=d$f*d$y,d$F=d$i*d$w,d$G=d$i*d$x,d$H=d$i*d$y;for(d$t[15]=1,d$t[0]=1-d$B-d$E,d$t[1]=d$A+d$H,d$t[2]=d$C-d$G,d$t[4]=d$A-d$H,d$t[5]=1-d$z-d$E,d$t[6]=d$D+d$F,d$t[8]=d$C+d$G,d$t[9]=d$D-d$F,d$t[10]=1-d$z-d$B,d$u[15]=1,d$u[0]=d$j,d$u[5]=d$k,d$u[10]=d$l,d$o=0;d$o<4;d$o++)d$p=d$t[d$o],d$q=d$t[d$o+4],d$r=d$t[d$o+8],d$s=d$t[d$o+12],d$v[d$o]=d$p,d$v[d$o+4]=d$q,d$v[d$o+8]=d$r,d$v[d$o+12]=d$p*d$a+d$q*d$b+d$r*d$c+d$s;for(d$o=0;d$o<4;d$o++)d$p=d$v[d$o],d$q=d$v[d$o+4],d$r=d$v[d$o+8],d$s=d$v[d$o+12],d$m[d$o+d$n]=d$p*d$u[0]+d$q*d$u[1]+d$r*d$u[2]+d$s*d$u[3],d$m[d$o+d$n+4]=d$p*d$u[4]+d$q*d$u[5]+d$r*d$u[6]+d$s*d$u[7],d$m[d$o+d$n+8]=d$p*d$u[8]+d$q*d$u[9]+d$r*d$u[10]+d$s*d$u[11],d$m[d$o+d$n+12]=d$p*d$u[12]+d$q*d$u[13]+d$r*d$u[14]+d$s*d$u[15];},d$I._createNodeByJson=function(d$a,d$b,d$c,d$d){if(!d$c)switch(d$b.type){case"Sprite3D":d$c=new d$Kb();break;case"MeshSprite3D":d$c=new d$Xb();break;case"SkinnedMeshSprite3D":d$c=new SkinnedMeshSprite3D();break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":d$c=new ShuriKenParticle3D();break;case"TrailSprite3D":d$c=new TrailSprite3D();break;case"Terrain":d$c=new Terrain();break;case"Camera":d$c=new d$Wb();break;case"DirectionLight":d$c=new DirectionLight();break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.");}var d$e=d$b.props;if(d$e)for(var d$f in d$e)d$c[d$f]=d$e[d$f];var d$i=d$b.customProps;d$i&&(d$c instanceof laya.d3.core.Sprite3D?(d$c._parseBaseCustomProps(d$i),d$c._parseCustomProps(d$a,d$d,d$i,d$b),d$c._parseCustomComponent(d$a,d$d,d$b.components)):d$c._parseCustomProps(d$a,d$d,d$i,d$b));var d$j=d$b.child;if(d$j)for(var d$k=0,d$l=d$j.length;d$k<d$l;d$k++){var d$m=d$I._createNodeByJson(d$a,d$j[d$k],null,d$d);d$c.addChild(d$m);}return d$c;},d$I._computeBoneAndAnimationDatasByBindPoseMatrxix=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i,d$j,d$k=0,d$l=0,d$m=d$a.length;for(d$i=0;d$i<d$m;d$k+=d$a[d$i].keyframeWidth,d$l+=16,d$i++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(d$b[d$k+0],d$b[d$k+1],d$b[d$k+2],d$b[d$k+3],d$b[d$k+4],d$b[d$k+5],d$b[d$k+6],d$b[d$k+7],d$b[d$k+8],d$b[d$k+9],d$d,d$l),0!=d$i&&(d$j=16*d$a[d$i].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(d$d,d$j,d$d,d$l,d$d,d$l));var d$n=d$c.length;for(d$i=0;d$i<d$n;d$i++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(d$d,16*d$f[d$i],d$c[d$i],d$e,16*d$i);},d$I._computeAnimationDatasByArrayAndMatrixFast=function(d$a,d$b,d$c,d$d){for(var d$e=0,d$f=d$a.length;d$e<d$f;d$e++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(d$b,16*d$d[d$e],d$a[d$e],d$c,16*d$e);},d$I._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(d$a,d$b,d$c,d$d,d$e){var d$f,d$i,d$j=0,d$k=0,d$l=d$a.length;for(d$f=0;d$f<d$l;d$j+=d$a[d$f].keyframeWidth,d$k+=16,d$f++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(d$b[d$j+7],d$b[d$j+8],d$b[d$j+9],d$b[d$j+3],d$b[d$j+4],d$b[d$j+5],d$b[d$j+6],d$b[d$j+0],d$b[d$j+1],d$b[d$j+2],d$d,d$k),0!=d$f&&(d$i=16*d$a[d$f].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(d$d,d$i,d$d,d$k,d$d,d$k));var d$m=d$c.length;for(d$f=0;d$f<d$m;d$f++){var d$n=16*d$f;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(d$d,d$n,d$c[d$f],d$e,d$n);}},d$I._computeAnimationDatasByArrayAndMatrixFastOld=function(d$a,d$b,d$c){for(var d$d=d$a.length,d$e=0;d$e<d$d;d$e++){var d$f=16*d$e;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(d$b,d$f,d$a[d$e],d$c,d$f);}},d$I._computeRootAnimationData=function(d$a,d$b,d$c){for(var d$d=0,d$e=0,d$f=0,d$i=d$a.length;d$d<d$i;d$e+=d$a[d$d].keyframeWidth,d$f+=16,d$d++)laya.d3.utils.Utils3D.createAffineTransformationArray(d$b[d$e+0],d$b[d$e+1],d$b[d$e+2],d$b[d$e+3],d$b[d$e+4],d$b[d$e+5],d$b[d$e+6],d$b[d$e+7],d$b[d$e+8],d$b[d$e+9],d$c,d$f);},d$I.transformVector3ArrayByQuat=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$c.elements,d$i=d$a[d$b],d$j=d$a[d$b+1],d$k=d$a[d$b+2],d$l=d$f[0],d$m=d$f[1],d$n=d$f[2],d$o=d$f[3],d$p=d$o*d$i+d$m*d$k-d$n*d$j,d$q=d$o*d$j+d$n*d$i-d$l*d$k,d$r=d$o*d$k+d$l*d$j-d$m*d$i,d$s=-d$l*d$i-d$m*d$j-d$n*d$k;d$d[d$e]=d$p*d$o+d$s*-d$l+d$q*-d$n-d$r*-d$m,d$d[d$e+1]=d$q*d$o+d$s*-d$m+d$r*-d$l-d$p*-d$n,d$d[d$e+2]=d$r*d$o+d$s*-d$n+d$p*-d$m-d$q*-d$l;},d$I.mulMatrixByArray=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i,d$j,d$k,d$l,d$m;if(d$e===d$c){for(d$c=d$I._tempArray16_3,d$i=0;d$i<16;++d$i)d$c[d$i]=d$e[d$f+d$i];d$d=0;}for(d$i=0;d$i<4;d$i++)d$j=d$a[d$b+d$i],d$k=d$a[d$b+d$i+4],d$l=d$a[d$b+d$i+8],d$m=d$a[d$b+d$i+12],d$e[d$f+d$i]=d$j*d$c[d$d+0]+d$k*d$c[d$d+1]+d$l*d$c[d$d+2]+d$m*d$c[d$d+3],d$e[d$f+d$i+4]=d$j*d$c[d$d+4]+d$k*d$c[d$d+5]+d$l*d$c[d$d+6]+d$m*d$c[d$d+7],d$e[d$f+d$i+8]=d$j*d$c[d$d+8]+d$k*d$c[d$d+9]+d$l*d$c[d$d+10]+d$m*d$c[d$d+11],d$e[d$f+d$i+12]=d$j*d$c[d$d+12]+d$k*d$c[d$d+13]+d$l*d$c[d$d+14]+d$m*d$c[d$d+15];},d$I.mulMatrixByArrayFast=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i,d$j,d$k,d$l,d$m;for(d$i=0;d$i<4;d$i++)d$j=d$a[d$b+d$i],d$k=d$a[d$b+d$i+4],d$l=d$a[d$b+d$i+8],d$m=d$a[d$b+d$i+12],d$e[d$f+d$i]=d$j*d$c[d$d+0]+d$k*d$c[d$d+1]+d$l*d$c[d$d+2]+d$m*d$c[d$d+3],d$e[d$f+d$i+4]=d$j*d$c[d$d+4]+d$k*d$c[d$d+5]+d$l*d$c[d$d+6]+d$m*d$c[d$d+7],d$e[d$f+d$i+8]=d$j*d$c[d$d+8]+d$k*d$c[d$d+9]+d$l*d$c[d$d+10]+d$m*d$c[d$d+11],d$e[d$f+d$i+12]=d$j*d$c[d$d+12]+d$k*d$c[d$d+13]+d$l*d$c[d$d+14]+d$m*d$c[d$d+15];},d$I.mulMatrixByArrayAndMatrixFast=function(d$a,d$b,d$c,d$d,d$e){var d$f,d$i,d$j,d$k,d$l,d$m=d$c.elements,d$n=d$m[0],d$o=d$m[1],d$p=d$m[2],d$q=d$m[3],d$r=d$m[4],d$s=d$m[5],d$t=d$m[6],d$u=d$m[7],d$v=d$m[8],d$w=d$m[9],d$x=d$m[10],d$y=d$m[11],d$z=d$m[12],d$A=d$m[13],d$B=d$m[14],d$C=d$m[15],d$D=d$b,d$E=d$b+4,d$F=d$b+8,d$G=d$b+12,d$H=d$e,d$I=d$e+4,d$J=d$e+8,d$K=d$e+12;for(d$f=0;d$f<4;d$f++)d$i=d$a[d$D+d$f],d$j=d$a[d$E+d$f],d$k=d$a[d$F+d$f],d$l=d$a[d$G+d$f],d$d[d$H+d$f]=d$i*d$n+d$j*d$o+d$k*d$p+d$l*d$q,d$d[d$I+d$f]=d$i*d$r+d$j*d$s+d$k*d$t+d$l*d$u,d$d[d$J+d$f]=d$i*d$v+d$j*d$w+d$k*d$x+d$l*d$y,d$d[d$K+d$f]=d$i*d$z+d$j*d$A+d$k*d$B+d$l*d$C;},d$I.createAffineTransformationArray=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$n){var d$o=d$d+d$d,d$p=d$e+d$e,d$q=d$f+d$f,d$r=d$d*d$o,d$s=d$d*d$p,d$t=d$d*d$q,d$u=d$e*d$p,d$v=d$e*d$q,d$w=d$f*d$q,d$x=d$i*d$o,d$y=d$i*d$p,d$z=d$i*d$q;d$m[d$n+0]=(1-(d$u+d$w))*d$j,d$m[d$n+1]=(d$s+d$z)*d$j,d$m[d$n+2]=(d$t-d$y)*d$j,d$m[d$n+3]=0,d$m[d$n+4]=(d$s-d$z)*d$k,d$m[d$n+5]=(1-(d$r+d$w))*d$k,d$m[d$n+6]=(d$v+d$x)*d$k,d$m[d$n+7]=0,d$m[d$n+8]=(d$t+d$y)*d$l,d$m[d$n+9]=(d$v-d$x)*d$l,d$m[d$n+10]=(1-(d$r+d$u))*d$l,d$m[d$n+11]=0,d$m[d$n+12]=d$a,d$m[d$n+13]=d$b,d$m[d$n+14]=d$c,d$m[d$n+15]=1;},d$I.transformVector3ArrayToVector3ArrayCoordinate=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$I._tempArray4_0,d$i=d$a[d$b+0],d$j=d$a[d$b+1],d$k=d$a[d$b+2],d$l=d$c.elements;d$f[0]=d$i*d$l[0]+d$j*d$l[4]+d$k*d$l[8]+d$l[12],d$f[1]=d$i*d$l[1]+d$j*d$l[5]+d$k*d$l[9]+d$l[13],d$f[2]=d$i*d$l[2]+d$j*d$l[6]+d$k*d$l[10]+d$l[14],d$f[3]=1/(d$i*d$l[3]+d$j*d$l[7]+d$k*d$l[11]+d$l[15]),d$d[d$e+0]=d$f[0]*d$f[3],d$d[d$e+1]=d$f[1]*d$f[3],d$d[d$e+2]=d$f[2]*d$f[3];},d$I.transformLightingMapTexcoordByUV0Array=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$c.elements;d$d[d$e+0]=d$a[d$b+0]*d$f[0]+d$f[2],d$d[d$e+1]=(d$a[d$b+1]-1)*d$f[1]+d$f[3];},d$I.transformLightingMapTexcoordByUV1Array=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$c.elements;d$d[d$e+0]=d$a[d$b+0]*d$f[0]+d$f[2],d$d[d$e+1]=1+d$a[d$b+1]*d$f[1]+d$f[3];},d$I.getURLVerion=function(d$a){var d$b=d$a.indexOf("?");return 0<=d$b?d$a.substr(d$b):null;},d$I._quaternionCreateFromYawPitchRollArray=function(d$a,d$b,d$c,d$d){var d$e=.5*d$c,d$f=.5*d$b,d$i=.5*d$a,d$j=Math.sin(d$e),d$k=Math.cos(d$e),d$l=Math.sin(d$f),d$m=Math.cos(d$f),d$n=Math.sin(d$i),d$o=Math.cos(d$i);d$d[0]=d$o*d$l*d$k+d$n*d$m*d$j,d$d[1]=d$n*d$m*d$k-d$o*d$l*d$j,d$d[2]=d$o*d$m*d$j-d$n*d$l*d$k,d$d[3]=d$o*d$m*d$k+d$n*d$l*d$j;},d$I._createAffineTransformationArray=function(d$a,d$b,d$c,d$d){var d$e=d$b[0],d$f=d$b[1],d$i=d$b[2],d$j=d$b[3],d$k=d$e+d$e,d$l=d$f+d$f,d$m=d$i+d$i,d$n=d$e*d$k,d$o=d$e*d$l,d$p=d$e*d$m,d$q=d$f*d$l,d$r=d$f*d$m,d$s=d$i*d$m,d$t=d$j*d$k,d$u=d$j*d$l,d$v=d$j*d$m,d$w=d$c[0],d$x=d$c[1],d$y=d$c[2];d$d[0]=(1-(d$q+d$s))*d$w,d$d[1]=(d$o+d$v)*d$w,d$d[2]=(d$p-d$u)*d$w,d$d[3]=0,d$d[4]=(d$o-d$v)*d$x,d$d[5]=(1-(d$n+d$s))*d$x,d$d[6]=(d$r+d$t)*d$x,d$d[7]=0,d$d[8]=(d$p+d$u)*d$y,d$d[9]=(d$r-d$t)*d$y,d$d[10]=(1-(d$n+d$q))*d$y,d$d[11]=0,d$d[12]=d$a[0],d$d[13]=d$a[1],d$d[14]=d$a[2],d$d[15]=1;},d$I._mulMatrixArray=function(d$a,d$b,d$c,d$d){var d$e,d$f,d$i,d$j,d$k,d$l=d$b.elements,d$m=d$l[0],d$n=d$l[1],d$o=d$l[2],d$p=d$l[3],d$q=d$l[4],d$r=d$l[5],d$s=d$l[6],d$t=d$l[7],d$u=d$l[8],d$v=d$l[9],d$w=d$l[10],d$x=d$l[11],d$y=d$l[12],d$z=d$l[13],d$A=d$l[14],d$B=d$l[15],d$C=d$d,d$D=d$d+4,d$E=d$d+8,d$F=d$d+12;for(d$e=0;d$e<4;d$e++)d$f=d$a[d$e],d$i=d$a[d$e+4],d$j=d$a[d$e+8],d$k=d$a[d$e+12],d$c[d$C+d$e]=d$f*d$m+d$i*d$n+d$j*d$o+d$k*d$p,d$c[d$D+d$e]=d$f*d$q+d$i*d$r+d$j*d$s+d$k*d$t,d$c[d$E+d$e]=d$f*d$u+d$i*d$v+d$j*d$w+d$k*d$x,d$c[d$F+d$e]=d$f*d$y+d$i*d$z+d$j*d$A+d$k*d$B;},d$I.getYawPitchRoll=function(d$a,d$b){d$I.transformQuat(d$ib.ForwardRH,d$a,d$cb.TEMPVector31),d$I.transformQuat(d$ib.Up,d$a,d$cb.TEMPVector32);var d$c=d$cb.TEMPVector32.elements;d$I.angleTo(d$ib.ZERO,d$cb.TEMPVector31,d$cb.TEMPVector33);var d$d=d$cb.TEMPVector33.elements;d$d[0]==Math.PI/2?(d$d[1]=d$I.arcTanAngle(d$c[2],d$c[0]),d$d[2]=0):d$d[0]==-Math.PI/2?(d$d[1]=d$I.arcTanAngle(-d$c[2],-d$c[0]),d$d[2]=0):(d$ab.createRotationY(-d$d[1],d$cb.TEMPMatrix0),d$ab.createRotationX(-d$d[0],d$cb.TEMPMatrix1),d$ib.transformCoordinate(d$cb.TEMPVector32,d$cb.TEMPMatrix0,d$cb.TEMPVector32),d$ib.transformCoordinate(d$cb.TEMPVector32,d$cb.TEMPMatrix1,d$cb.TEMPVector32),d$d[2]=d$I.arcTanAngle(d$c[1],-d$c[0])),d$d[1]<=-Math.PI&&(d$d[1]=Math.PI),d$d[2]<=-Math.PI&&(d$d[2]=Math.PI),d$d[1]>=Math.PI&&d$d[2]>=Math.PI&&(d$d[1]=0,d$d[2]=0,d$d[0]=Math.PI-d$d[0]),d$b[0]=d$d[1],d$b[1]=d$d[0],d$b[2]=d$d[2];},d$I.arcTanAngle=function(d$a,d$b){return 0==d$a?1==d$b?Math.PI/2:-Math.PI/2:0<d$a?Math.atan(d$b/d$a):d$a<0?0<d$b?Math.atan(d$b/d$a)+Math.PI:Math.atan(d$b/d$a)-Math.PI:0;},d$I.angleTo=function(d$a,d$b,d$c){d$ib.subtract(d$b,d$a,d$cb.TEMPVector30),d$ib.normalize(d$cb.TEMPVector30,d$cb.TEMPVector30),d$c.elements[0]=Math.asin(d$cb.TEMPVector30.y),d$c.elements[1]=d$I.arcTanAngle(-d$cb.TEMPVector30.z,-d$cb.TEMPVector30.x);},d$I.transformQuat=function(d$a,d$b,d$c){var d$d=d$c.elements,d$e=d$a.elements,d$f=d$b,d$i=d$e[0],d$j=d$e[1],d$k=d$e[2],d$l=d$f[0],d$m=d$f[1],d$n=d$f[2],d$o=d$f[3],d$p=d$o*d$i+d$m*d$k-d$n*d$j,d$q=d$o*d$j+d$n*d$i-d$l*d$k,d$r=d$o*d$k+d$l*d$j-d$m*d$i,d$s=-d$l*d$i-d$m*d$j-d$n*d$k;d$d[0]=d$p*d$o+d$s*-d$l+d$q*-d$n-d$r*-d$m,d$d[1]=d$q*d$o+d$s*-d$m+d$r*-d$l-d$p*-d$n,d$d[2]=d$r*d$o+d$s*-d$n+d$p*-d$m-d$q*-d$l;},d$I.quaterionNormalize=function(d$a,d$b){var d$c=d$a[0],d$d=d$a[1],d$e=d$a[2],d$f=d$a[3],d$i=d$c*d$c+d$d*d$d+d$e*d$e+d$f*d$f;0<d$i&&(d$i=1/Math.sqrt(d$i),d$b[0]=d$c*d$i,d$b[1]=d$d*d$i,d$b[2]=d$e*d$i,d$b[3]=d$f*d$i);},d$I.matrix4x4MultiplyFFF=function(d$a,d$b,d$c){var d$d,d$e,d$f,d$i,d$j;if(d$c===d$b)for(d$b=new Float32Array(16),d$d=0;d$d<16;++d$d)d$b[d$d]=d$c[d$d];for(d$d=0;d$d<4;d$d++)d$e=d$a[d$d],d$f=d$a[d$d+4],d$i=d$a[d$d+8],d$j=d$a[d$d+12],d$c[d$d]=d$e*d$b[0]+d$f*d$b[1]+d$i*d$b[2]+d$j*d$b[3],d$c[d$d+4]=d$e*d$b[4]+d$f*d$b[5]+d$i*d$b[6]+d$j*d$b[7],d$c[d$d+8]=d$e*d$b[8]+d$f*d$b[9]+d$i*d$b[10]+d$j*d$b[11],d$c[d$d+12]=d$e*d$b[12]+d$f*d$b[13]+d$i*d$b[14]+d$j*d$b[15];},d$I.matrix4x4MultiplyMFM=function(d$a,d$b,d$c){d$I.matrix4x4MultiplyFFF(d$a.elements,d$b,d$c.elements);},d$n(d$I,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"};},"_tempVector3_0",function(){return this._tempVector3_0=new d$ib();},"_tempVector3_1",function(){return this._tempVector3_1=new d$ib();},"_tempVector3_2",function(){return this._tempVector3_2=new d$ib();},"_tempVector3_3",function(){return this._tempVector3_3=new d$ib();},"_tempVector3_4",function(){return this._tempVector3_4=new d$ib();},"_tempVector3_5",function(){return this._tempVector3_5=new d$ib();},"_tempVector3_6",function(){return this._tempVector3_6=new d$ib();},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4);},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16);},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16);},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16);},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16);}]),d$I;}(),d$tb=function(){function d$G(){}return d$p(d$G,"Laya3D"),d$G._cancelLoadByUrl=function(d$a){d$x.loader.cancelLoadByUrl(d$a),d$G._innerFirstLevelLoaderManager.cancelLoadByUrl(d$a),d$G._innerSecondLevelLoaderManager.cancelLoadByUrl(d$a),d$G._innerThirdLevelLoaderManager.cancelLoadByUrl(d$a),d$G._innerFourthLevelLoaderManager.cancelLoadByUrl(d$a);},d$G._changeWebGLSize=function(d$a,d$b){d$F.onStageResize(d$a,d$b),d$Y.clientWidth=d$a,d$Y.clientHeight=d$b;},d$G.__init__=function(){var d$a=d$b.createMap;d$a.lh=[d$Kb,"SPRITE3DHIERARCHY"],d$a.ls=[d$Jb,"SPRITE3DHIERARCHY"],d$a.lm=[d$Rb,"MESH"],d$a.lmat=[d$Mb,"MATERIAL"],d$a.jpg=[d$Tb,"nativeimage"],d$a.jpeg=[d$Tb,"nativeimage"],d$a.png=[d$Tb,"nativeimage"],d$a.pkm=[d$Tb,"arraybuffer"],d$a.raw=[d$Pb,"arraybuffer"],d$a.mipmaps=[d$Pb,"arraybuffer"],d$t.parserMap.SPRITE3DHIERARCHY=d$G._loadHierarchy,d$t.parserMap.MESH=d$G._loadMesh,d$t.parserMap.MATERIAL=d$G._loadMaterial,d$t.parserMap.TEXTURECUBE=d$G._loadTextureCube,d$t.parserMap.TERRAIN=d$G._loadTerrain,d$G._innerFirstLevelLoaderManager.on("error",null,d$G._eventLoadManagerError),d$G._innerSecondLevelLoaderManager.on("error",null,d$G._eventLoadManagerError),d$G._innerThirdLevelLoaderManager.on("error",null,d$G._eventLoadManagerError),d$G._innerFourthLevelLoaderManager.on("error",null,d$G._eventLoadManagerError);},d$G.READ_BLOCK=function(){return d$G._readData.pos+=4,!0;},d$G.READ_DATA=function(){return d$G._DATA.offset=d$G._readData.getUint32(),d$G._DATA.size=d$G._readData.getUint32(),!0;},d$G.READ_STRINGS=function(){var d$a=[],d$b={offset:0,size:0};d$b.offset=d$G._readData.getUint16(),d$b.size=d$G._readData.getUint16();d$G._readData.pos;d$G._readData.pos=d$b.offset+d$G._DATA.offset;for(var d$c=0;d$c<d$b.size;d$c++){var d$d=d$G._readData.readUTFString();-1===d$d.lastIndexOf(".lmat")&&-1===d$d.lastIndexOf(".lpbr")||d$a.push(d$d);}return d$a;},d$G.formatRelativePath=function(d$a,d$b){var d$c;if("."===d$b.charAt(0)){for(var d$d=(d$a+d$b).split("/"),d$e=0,d$f=d$d.length;d$e<d$f;d$e++)if(".."==d$d[d$e]){var d$i=d$e-1;0<d$i&&".."!==d$d[d$i]&&(d$d.splice(d$i,2),d$e-=2);}d$c=d$d.join("/");}else d$c=d$a+d$b;return null!=d$E.customFormat&&(d$c=d$E.customFormat(d$c,null)),d$c;},d$G._eventLoadManagerError=function(d$a){d$x.loader.event("error",d$a);},d$G._addHierarchyInnerUrls=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i=d$G.formatRelativePath(d$d,d$e);d$c&&(d$i+=d$c),d$a.push({url:d$i,clas:d$f}),d$b[d$e]=d$i;},d$G._getSprite3DHierarchyInnerUrls=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){var d$j,d$k=0,d$l=0;switch(d$a.type){case"Scene":var d$m=d$a.customProps.lightmaps;for(d$k=0,d$l=d$m.length;d$k<d$l;d$k++){var d$n=d$m[d$k].replace(".exr",".png");d$G._addHierarchyInnerUrls(d$d,d$e,d$f,d$i,d$n,d$Tb);}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var d$o;if(d$a.instanceParams)(d$o=d$a.instanceParams.loadPath)&&d$G._addHierarchyInnerUrls(d$b,d$e,d$f,d$i,d$o,d$Rb);else{(d$o=(d$j=d$a.customProps).meshPath)&&d$G._addHierarchyInnerUrls(d$b,d$e,d$f,d$i,d$o,d$Rb);var d$p=d$j.materials;if(d$p)for(d$k=0,d$l=d$p.length;d$k<d$l;d$k++){for(var d$q=d$p[d$k],d$r=d$q.type.split("."),d$s=d$H.window,d$t=0,d$u=d$r.length;d$t<d$u;++d$t){d$s=d$s[this.clasPaths[d$t]];}if("function"!=typeof d$s)throw"_getSprite3DHierarchyInnerUrls 错误: "+d$q.type+" 不是类";d$G._addHierarchyInnerUrls(d$c,d$e,d$f,d$i,d$q.path,d$s);}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var d$v=(d$j=d$a.customProps).meshPath;d$v&&d$G._addHierarchyInnerUrls(d$b,d$e,d$f,d$i,d$v,d$Rb);var d$w=d$j.material;if(d$w){d$r=d$w.type.split("."),d$s=d$H.window;for(d$t=0,d$u=d$r.length;d$t<d$u;++d$t){d$s=d$s[this.clasPaths[d$t]];}d$G._addHierarchyInnerUrls(d$c,d$e,d$f,d$i,d$w.path,d$s);}else{var d$x=d$j.materialPath;if(d$x)d$G._addHierarchyInnerUrls(d$c,d$e,d$f,d$i,d$x,ShurikenParticleMaterial);else{var d$y=d$j.texturePath;d$y&&d$G._addHierarchyInnerUrls(d$d,d$e,d$f,d$i,d$y,d$Tb);}}break;case"Terrain":d$G._addHierarchyInnerUrls(d$d,d$e,d$f,d$i,d$a.customProps.dataPath,TerrainRes);}var d$z=d$a.components;for(var d$A in d$z){var d$B=d$z[d$A];switch(d$A){case"Animator":var d$C=d$B.avatarPath;if(d$C)d$G._addHierarchyInnerUrls(d$d,d$e,d$f,d$i,d$C,Avatar);else{var d$D=d$B.avatar;d$D&&d$G._addHierarchyInnerUrls(d$d,d$e,d$f,d$i,d$D.path,Avatar);}var d$E=d$B.clipPaths;for(d$k=0,d$l=d$E.length;d$k<d$l;d$k++)d$G._addHierarchyInnerUrls(d$d,d$e,d$f,d$i,d$E[d$k],AnimationClip);}}var d$F=d$a.child;for(d$k=0,d$l=d$F.length;d$k<d$l;d$k++)d$G._getSprite3DHierarchyInnerUrls(d$F[d$k],d$b,d$c,d$d,d$e,d$f,d$i);},d$G._loadHierarchy=function(d$a){d$a.on("loaded",null,d$G._onHierarchylhLoaded,[d$a,d$a._class._getGroup()]),d$a.load(d$a.url,"json",!1,null,!0);},d$G._onHierarchylhLoaded=function(d$a,d$b,d$c){if(d$a._class.destroyed)d$a.endLoad();else{var d$d=d$a.url,d$e=d$sb.getURLVerion(d$d),d$f=d$E.getPath(d$d),d$i=[],d$j=[],d$k=[],d$l={};d$G._getSprite3DHierarchyInnerUrls(d$c,d$i,d$j,d$k,d$l,d$e,d$f);var d$m=d$i.length+d$j.length+d$k.length,d$n=d$m+1,d$o=1/d$n;if(d$G._onProcessChange(d$a,0,d$o,1),0<d$k.length){var d$p=d$m/d$n,d$q=d$D.create(null,d$G._onProcessChange,[d$a,d$o,d$p],!1);d$G._innerFourthLevelLoaderManager.create(d$k,d$D.create(null,d$G._onHierarchyInnerForthLevResouLoaded,[d$a,d$b,d$q,d$c,d$l,d$i,d$j,d$o+d$p*d$k.length,d$p]),d$q,null,null,1,!0,d$b);}else d$G._onHierarchyInnerForthLevResouLoaded(d$a,d$b,null,d$c,d$l,d$i,d$j,d$o,d$p);}},d$G._onHierarchyInnerForthLevResouLoaded=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){if(d$a._class.destroyed)d$a.endLoad();else if(d$c&&d$c.recover(),0<d$i.length){var d$l=d$D.create(null,d$G._onProcessChange,[d$a,d$j,d$k],!1);d$G._innerSecondLevelLoaderManager.create(d$i,d$D.create(null,d$G._onHierarchyInnerSecondLevResouLoaded,[d$a,d$b,d$l,d$d,d$e,d$f,d$j+d$k*d$i.length,d$k]),d$c,null,null,1,!0,d$b);}else d$G._onHierarchyInnerSecondLevResouLoaded(d$a,d$b,null,d$d,d$e,d$f,d$j,d$k);},d$G._onHierarchyInnerSecondLevResouLoaded=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j){if(d$a._class.destroyed)d$a.endLoad();else if(d$c&&d$c.recover(),0<d$f.length){var d$k=d$D.create(null,d$G._onProcessChange,[d$a,d$i,d$j],!1);d$G._innerFirstLevelLoaderManager.create(d$f,d$D.create(null,d$G._onHierarchyInnerFirstLevResouLoaded,[d$a,d$k,d$d,d$e]),d$c,null,null,1,!0,d$b);}else d$G._onHierarchyInnerFirstLevResouLoaded(d$a,null,d$d,d$e);},d$G._onHierarchyInnerFirstLevResouLoaded=function(d$a,d$b,d$c,d$d){d$b&&d$b.recover(),d$a.endLoad([d$c,d$d]);},d$G._loadTerrain=function(d$a){d$a.on("loaded",null,d$G._onTerrainLtLoaded,[d$a,d$a._class._getGroup()]),d$a.load(d$a.url,"json",!1,null,!0);},d$G._onTerrainLtLoaded=function(d$a,d$b,d$c){if(d$a._class.destroyed)d$a.endLoad();else{var d$d,d$e,d$f=d$a.url,d$i=d$sb.getURLVerion(d$f),d$j=d$E.getPath(d$f),d$k=[],d$l={},d$m=0,d$n=0,d$o=d$c.heightData;d$d=d$o.url,d$e=d$G.formatRelativePath(d$j,d$d),d$i&&(d$e+=d$i),d$d=d$l[d$d]=d$e;var d$p=d$c.detailTexture;for(d$m=0,d$n=d$p.length;d$m<d$n;d$m++)d$k.push({url:d$p[d$m].diffuse});var d$q=d$c.normalMap;for(d$m=0,d$n=d$q.length;d$m<d$n;d$m++)d$k.push({url:d$q[d$m]});var d$r=d$c.alphaMap;for(d$m=0,d$n=d$r.length;d$m<d$n;d$m++)d$k.push({url:d$r[d$m],params:[!1,!1,6408,!0]});for(d$m=0,d$n=d$k.length;d$m<d$n;d$m++){var d$s=d$k[d$m].url;d$e=d$G.formatRelativePath(d$j,d$s),d$i&&(d$e+=d$i),d$k[d$m].url=d$e,d$l[d$s]=d$e;}var d$t=d$k.length,d$u=d$t+2,d$v=1/d$u;d$G._onProcessChange(d$a,0,d$v,1);var d$w={heightMapLoaded:!1,texturesLoaded:!1},d$x=d$D.create(null,d$G._onProcessChange,[d$a,d$v,d$v],!1);d$G._innerFourthLevelLoaderManager.create(d$d,d$D.create(null,d$G._onTerrainHeightMapLoaded,[d$a,d$x,d$c,d$l,d$w]),d$x,null,[d$o.numX,d$o.numZ,d$o.bitType,d$o.value],1,!0,d$b);var d$y=d$D.create(null,d$G._onProcessChange,[d$a,2*d$v,d$t/d$u],!1);d$G._innerFourthLevelLoaderManager.create(d$k,d$D.create(null,d$G._onTerrainTexturesLoaded,[d$a,d$y,d$c,d$l,d$w]),d$y,null,null,1,!0,d$b);}},d$G._onTerrainHeightMapLoaded=function(d$a,d$b,d$c,d$d,d$e){d$e.heightMapLoaded=!0,d$e.texturesLoaded&&(d$a.endLoad([d$c,d$d]),d$b.recover());},d$G._onTerrainTexturesLoaded=function(d$a,d$b,d$c,d$d,d$e){d$e.texturesLoaded=!0,d$e.heightMapLoaded&&(d$a.endLoad([d$c,d$d]),d$b.recover());},d$G._loadMesh=function(d$a){d$a.on("loaded",null,d$G._onMeshLmLoaded,[d$a,d$a._class._getGroup()]),d$a.load(d$a.url,"arraybuffer",!1,null,!0);},d$G._onMeshLmLoaded=function(d$a,d$b,d$c){if(d$a._class.destroyed)d$a.endLoad();else{var d$d,d$e,d$f,d$i=d$a.url,d$j=d$sb.getURLVerion(d$i),d$k=d$E.getPath(d$i),d$l={},d$m=0,d$n=0;switch((d$G._readData=new d$y(d$c)).pos=0,d$G._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var d$o=d$G._readData.getUint32();d$G._readData.pos=d$G._readData.pos+4,d$n=d$G._readData.getUint16(),d$G._readData.pos=d$G._readData.pos+8*d$n;var d$p=d$G._readData.getUint32();for(d$n=d$G._readData.getUint16(),d$G._readData.pos=d$o+d$p,d$d=[],d$m=0;d$m<d$n;d$m++){var d$q=d$G._readData.readUTFString();-1!==d$q.lastIndexOf(".lmat")&&d$d.push(d$q);}break;default:for(d$G.READ_BLOCK(),d$m=0;d$m<2;d$m++){var d$r=d$G._readData.getUint16(),d$s=d$G._strings[d$r],d$t=d$G["READ_"+d$s];if(null==d$t)throw new Error("model file err,no this function:"+d$r+" "+d$s);1===d$m?d$d=d$t.call():d$t.call();}}for(d$m=0,d$f=d$d.length;d$m<d$f;d$m++){var d$u=d$d[d$m];d$e=d$G.formatRelativePath(d$k,d$u),d$j&&(d$e+=d$j),d$d[d$m]=d$e,d$l[d$u]=d$e;}if(0<d$d.length){d$G._onProcessChange(d$a,0,.5,1);var d$v=d$D.create(null,d$G._onProcessChange,[d$a,.5,.5],!1);d$G._innerSecondLevelLoaderManager.create(d$d,d$D.create(null,d$G._onMeshMateialLoaded,[d$a,d$v,d$c,d$l]),d$v,null,null,1,!0,d$b);}else d$a.endLoad([d$c,d$l]);}},d$G._onMeshMateialLoaded=function(d$a,d$b,d$c,d$d){d$a.endLoad([d$c,d$d]),d$b.recover();},d$G._getMaterialTexturePath=function(d$a,d$b,d$c){var d$d=d$a.length-4;return d$a.indexOf(".dds")!=d$d&&d$a.indexOf(".tga")!=d$d&&d$a.indexOf(".exr")!=d$d&&d$a.indexOf(".DDS")!=d$d&&d$a.indexOf(".TGA")!=d$d&&d$a.indexOf(".EXR")!=d$d||(d$a=d$a.substr(0,d$d)+".png"),d$a=d$G.formatRelativePath(d$c,d$a),d$b&&(d$a+=d$b),d$a;},d$G._loadMaterial=function(d$a){d$a.on("loaded",null,d$G._onMaterilLmatLoaded,[d$a,d$a._class._getGroup()]),d$a.load(d$a.url,"json",!1,null,!0);},d$G._onMaterilLmatLoaded=function(d$a,d$b,d$c){if(d$a._class.destroyed)d$a.endLoad();else{var d$d,d$e=d$a.url,d$f=d$sb.getURLVerion(d$e),d$i=d$E.getPath(d$e),d$j=[],d$k={},d$l=d$c.customProps,d$m=d$c.version;if(d$m)switch(d$m){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var d$n=d$c.props.textures,d$o=0,d$p=d$n.length;d$o<d$p;d$o++){var d$q=d$n[d$o],d$r=d$q.path;if(d$r){var d$s=d$r.length-4;d$r.indexOf(".exr")!=d$s&&d$r.indexOf(".EXR")!=d$s||(d$r=d$r.substr(0,d$s)+".png"),d$d=d$G.formatRelativePath(d$i,d$r),d$f&&(d$d+=d$f),d$j.push({url:d$d,params:d$q.params}),d$k[d$r]=d$d;}}break;default:throw new Error("Laya3D:unkonwn version.");}else{var d$t=d$l.diffuseTexture.texture2D;if(d$t&&(d$d=d$G._getMaterialTexturePath(d$t,d$f,d$i),d$j.push(d$d),d$k[d$t]=d$d),d$l.normalTexture){var d$u=d$l.normalTexture.texture2D;d$u&&(d$d=d$G._getMaterialTexturePath(d$u,d$f,d$i),d$j.push(d$d),d$k[d$u]=d$d);}if(d$l.specularTexture){var d$v=d$l.specularTexture.texture2D;d$v&&(d$d=d$G._getMaterialTexturePath(d$v,d$f,d$i),d$j.push(d$d),d$k[d$v]=d$d);}if(d$l.emissiveTexture){var d$w=d$l.emissiveTexture.texture2D;d$w&&(d$d=d$G._getMaterialTexturePath(d$w,d$f,d$i),d$j.push(d$d),d$k[d$w]=d$d);}if(d$l.ambientTexture){var d$x=d$l.ambientTexture.texture2D;d$x&&(d$d=d$G._getMaterialTexturePath(d$x,d$f,d$i),d$j.push(d$d),d$k[d$x]=d$d);}if(d$l.reflectTexture){var d$y=d$l.reflectTexture.texture2D;d$y&&(d$d=d$G._getMaterialTexturePath(d$y,d$f,d$i),d$j.push(d$d),d$k[d$y]=d$d);}}var d$z=d$j.length,d$A=d$z+1,d$B=1/d$A;if(d$G._onProcessChange(d$a,0,d$B,1),0<d$z){var d$C=d$D.create(null,d$G._onProcessChange,[d$a,d$B,d$z/d$A],!1);d$G._innerFourthLevelLoaderManager.create(d$j,d$D.create(null,d$G._onMateialTexturesLoaded,[d$a,d$C,d$c,d$k]),d$C,d$Tb,null,1,!0,d$b);}else d$G._onMateialTexturesLoaded(d$a,null,d$c,null);}},d$G._onMateialTexturesLoaded=function(d$a,d$b,d$c,d$d){d$a.endLoad([d$c,d$d]),d$b&&d$b.recover();},d$G._loadTextureCube=function(d$a){d$a.on("loaded",null,d$G._onTextureCubeLtcLoaded,[d$a]),d$a.load(d$a.url,"json",!1,null,!0);},d$G._onTextureCubeLtcLoaded=function(d$a,d$b){if(d$a._class.destroyed)d$a.endLoad();else{var d$c=d$E.getPath(d$a.url),d$d=[d$G.formatRelativePath(d$c,d$b.px),d$G.formatRelativePath(d$c,d$b.nx),d$G.formatRelativePath(d$c,d$b.py),d$G.formatRelativePath(d$c,d$b.ny),d$G.formatRelativePath(d$c,d$b.pz),d$G.formatRelativePath(d$c,d$b.nz)];d$G._onProcessChange(d$a,0,1/7,1);var d$e=d$D.create(null,d$G._onProcessChange,[d$a,1/7,6/7],!1);d$G._innerFourthLevelLoaderManager.load(d$d,d$D.create(null,d$G._onTextureCubeImagesLoaded,[d$a,d$d,d$e]),d$e,"nativeimage");}},d$G._onTextureCubeImagesLoaded=function(d$a,d$b,d$c){var d$d=[];d$d.length=6;for(var d$e=0;d$e<6;d$e++){var d$f=d$b[d$e];d$d[d$e]=d$t.getRes(d$f),d$t.clearRes(d$f);}d$a.endLoad(d$d),d$c.recover();},d$G._onProcessChange=function(d$a,d$b,d$c,d$d){(d$d=d$b+d$d*d$c)<1&&d$a.event("progress",d$d);},d$G.init=function(d$a,d$b,d$c,d$d,d$e,d$f){if(void 0===d$c&&(d$c=!1),void 0===d$d&&(d$d=!1),void 0===d$e&&(d$e=!0),void 0===d$f&&(d$f=!0),d$u.update3DLoop=function(){},d$u.cancelLoadByUrl=function(d$a){d$G._cancelLoadByUrl(d$a);},d$k.isAntialias=d$c,d$k.isAlpha=d$d,d$k.premultipliedAlpha=d$e,d$k.isStencil=d$f,!d$F.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");d$u.changeWebGLSize=d$G._changeWebGLSize,d$r.is3DMode=!0,d$x.init(d$a,d$b),d$I.__init__(),d$nb.__init__(),d$Xb.__init__(),d$Q.__init__(),d$G.__init__(),d$i.maxTextureCount=2,(d$G.debugMode||d$Z.debugMode)&&(d$G._debugPhasorSprite=new d$V());},d$G.HIERARCHY="SPRITE3DHIERARCHY",d$G.MESH="MESH",d$G.MATERIAL="MATERIAL",d$G.PBRMATERIAL="PBRMTL",d$G.TEXTURECUBE="TEXTURECUBE",d$G.TERRAIN="TERRAIN",d$G._readData=null,d$G._debugPhasorSprite=null,d$G.debugMode=!1,d$n(d$G,["_DATA",function(){return this._DATA={offset:0,size:0};},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"];},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new d$b();},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new d$b();},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new d$b();},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new d$b();}]),d$G;}(),d$ub=function(d$a){function d$e(d$a){d$e.__super.call(this),this._owner=d$a,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0;}d$p(d$e,"laya.d3.animation.AnimationTransform3D",d$f);var d$b=d$e.prototype;return d$b._getlocalMatrix=function(){return this._localUpdate&&(d$sb._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix;},d$b._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var d$a=0,d$b=this._childs.length;d$a<d$b;d$a++)this._childs[d$a]._onWorldTransform();}},d$b._setWorldMatrixAndUpdate=function(d$a){if(this._worldMatrix=d$a,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var d$b=this._getlocalMatrix(),d$c=0;d$c<16;++d$c)this._worldMatrix[d$c]=d$b[d$c];else d$sb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1;},d$b._setWorldMatrixNoUpdate=function(d$a){this._worldMatrix=d$a;},d$b._setWorldMatrixIgnoreUpdate=function(d$a){this._worldMatrix=d$a,this._worldUpdate=!1;},d$b.getLocalPosition=function(){return this._localPosition;},d$b.setLocalPosition=function(d$a){if(this._parent)this._localPosition=d$a,this._localUpdate=!0,this._onWorldTransform();else{var d$b=this._entity.owner._transform,d$c=this._entity.localPosition,d$d=d$c.elements;d$d[0]=d$a[0],d$d[1]=d$a[1],d$d[2]=d$a[2],d$b.localPosition=d$c;}},d$b.getLocalRotation=function(){if(this._localQuaternionUpdate){var d$a=this._localRotationEuler;d$sb._quaternionCreateFromYawPitchRollArray(d$a[1]/d$e._angleToRandin,d$a[0]/d$e._angleToRandin,d$a[2]/d$e._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1;}return this._localRotation;},d$b.setLocalRotation=function(d$a){if(this._parent)this._localRotation=d$a,d$sb.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var d$b=this._entity.owner._transform,d$c=this._entity.localRotation,d$d=d$c.elements;d$d[0]=d$a[0],d$d[1]=d$a[1],d$d[2]=d$a[2],d$d[3]=d$a[3],d$b.localRotation=d$c;}},d$b.getLocalScale=function(){return this._localScale;},d$b.setLocalScale=function(d$a){if(this._parent)this._localScale=d$a,this._localUpdate=!0,this._onWorldTransform();else{var d$b=this._entity.owner._transform,d$c=this._entity.localScale,d$d=d$c.elements;d$d[0]=d$a[0],d$d[1]=d$a[1],d$d[2]=d$a[2],d$b.localScale=d$c;}},d$b.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){d$sb.getYawPitchRoll(this._localRotation,d$e._tempVector3);var d$a=d$e._tempVector3,d$b=this._localRotationEuler;d$b[0]=d$a[1]*d$e._angleToRandin,d$b[1]=d$a[0]*d$e._angleToRandin,d$b[2]=d$a[2]*d$e._angleToRandin,this._locaEulerlUpdate=!1;}return this._localRotationEuler;},d$b.setLocalRotationEuler=function(d$a){if(this._parent)d$sb._quaternionCreateFromYawPitchRollArray(d$a[1]/d$e._angleToRandin,d$a[0]/d$e._angleToRandin,d$a[2]/d$e._angleToRandin,this._localRotation),this._localRotationEuler=d$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var d$b=this._entity.owner._transform,d$c=this._entity.localRotationEuler,d$d=d$c.elements;d$d[0]=d$a[0],d$d[1]=d$a[1],d$d[2]=d$a[2],d$b.localRotationEuler=d$c;}},d$b.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)d$sb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var d$a=this._getlocalMatrix(),d$b=0;d$b<16;++d$b)this._worldMatrix[d$b]=d$a[d$b];this._worldUpdate=!1;}return this._worldMatrix;},d$b.setParent=function(d$a){if(this._parent!==d$a){if(this._parent){var d$b=this._parent._childs,d$c=d$b.indexOf(this);d$b.splice(d$c,1);}d$a&&(d$a._childs.push(this),d$a&&this._onWorldTransform()),this._parent=d$a;}},d$n(d$e,["_tempVector3",function(){return this._tempVector3=new Float32Array(3);},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI;}]),d$e;}(),d$vb=function(d$a){function d$b(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,d$b.__super.call(this),this._destroyed=!1,this._id=d$b._uniqueIDCounter,d$b._uniqueIDCounter++;}d$p(d$b,"laya.d3.component.Component3D",d$f);var d$c=d$b.prototype;return d$x.imps(d$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),d$c._initialize=function(d$a){this._owner=d$a,this._enable=!0,this.started=!1,this._load(d$a);},d$c._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0;},d$c._load=function(d$a){},d$c._start=function(d$a){},d$c._update=function(d$a){},d$c._lateUpdate=function(d$a){},d$c._preRenderUpdate=function(d$a){},d$c._postRenderUpdate=function(d$a){},d$c._unload=function(d$a){this.offAll();},d$c._cloneTo=function(d$a){},d$q(0,d$c,"id",function(){return this._id;}),d$q(0,d$c,"destroyed",function(){return this._destroyed;}),d$q(0,d$c,"owner",function(){return this._owner;}),d$q(0,d$c,"enable",function(){return this._enable;},function(d$a){this._enable!==d$a&&(this._enable=d$a,this.event("enablechanged",this._enable));}),d$q(0,d$c,"isSingleton",function(){return d$b._isSingleton;}),d$b._isSingleton=!0,d$b._uniqueIDCounter=1,d$b;}(),d$wb=function(d$a){function d$b(){this._destroyed=!1,d$b.__super.call(this),this._destroyed=!1;}d$p(d$b,"laya.d3.core.GeometryFilter",d$f);var d$c=d$b.prototype;return d$x.imps(d$c,{"laya.resource.IDestroy":!0}),d$c._destroy=function(){this.offAll(),this._destroyed=!0;},d$q(0,d$c,"_isAsyncLoaded",function(){return!0;}),d$q(0,d$c,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.");}),d$q(0,d$c,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.");}),d$q(0,d$c,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.");}),d$q(0,d$c,"destroyed",function(){return this._destroyed;}),d$b;}(),d$xb=function(d$a){function d$d(d$a){d$d.__super.call(this),this._id=++d$d._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new d$Za(new d$ib(),new d$ib()),this._boundingBoxCenter=new d$ib(),this._boundingSphere=new d$_a(new d$ib(),0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=d$a,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange);}d$p(d$d,"laya.d3.core.render.BaseRender",d$f);var d$b=d$d.prototype;return d$x.imps(d$b,{"laya.resource.IDestroy":!0}),d$b._changeMaterialReference=function(d$a,d$b){d$a&&d$a._removeReference(),d$b._addReference();},d$b._getInstanceMaterial=function(d$a,d$b){var d$c=new d$a.constructor();return d$a.cloneTo(d$c),d$c.name=d$c.name+"(Instance)",this._materialsInstance[d$b]=!0,this._changeMaterialReference(this._materials[d$b],d$c),this._materials[d$b]=d$c;},d$b._setShaderValuelightMap=function(d$a){this._setShaderValueTexture(3,d$a);},d$b._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0;},d$b._renderRenderableBoundBox=function(){var d$a=d$tb._debugPhasorSprite,d$b=this.boundingBox,d$c=d$d._tempBoundBoxCorners;d$b.getCorners(d$c),d$a.line(d$c[0],d$d._greenColor,d$c[1],d$d._greenColor),d$a.line(d$c[2],d$d._greenColor,d$c[3],d$d._greenColor),d$a.line(d$c[4],d$d._greenColor,d$c[5],d$d._greenColor),d$a.line(d$c[6],d$d._greenColor,d$c[7],d$d._greenColor),d$a.line(d$c[0],d$d._greenColor,d$c[3],d$d._greenColor),d$a.line(d$c[1],d$d._greenColor,d$c[2],d$d._greenColor),d$a.line(d$c[2],d$d._greenColor,d$c[6],d$d._greenColor),d$a.line(d$c[3],d$d._greenColor,d$c[7],d$d._greenColor),d$a.line(d$c[0],d$d._greenColor,d$c[4],d$d._greenColor),d$a.line(d$c[1],d$d._greenColor,d$c[5],d$d._greenColor),d$a.line(d$c[4],d$d._greenColor,d$c[7],d$d._greenColor),d$a.line(d$c[5],d$d._greenColor,d$c[6],d$d._greenColor);},d$b._calculateBoundingSphere=function(){throw"BaseRender: must override it.";},d$b._calculateBoundingBox=function(){throw"BaseRender: must override it.";},d$b._setShaderValueTexture=function(d$a,d$b){this._owner._shaderValues.setValue(d$a,d$b);},d$b._setShaderValueMatrix4x4=function(d$a,d$b){this._owner._shaderValues.setValue(d$a,d$b?d$b.elements:null);},d$b._setShaderValueColor=function(d$a,d$b){this._owner._shaderValues.setValue(d$a,d$b?d$b.elements:null);},d$b._setShaderValueBuffer=function(d$a,d$b){this._owner._shaderValues.setValue(d$a,d$b);},d$b._setShaderValueInt=function(d$a,d$b){this._owner._shaderValues.setValue(d$a,d$b);},d$b._setShaderValueBool=function(d$a,d$b){this._owner._shaderValues.setValue(d$a,d$b);},d$b._setShaderValueNumber=function(d$a,d$b){this._owner._shaderValues.setValue(d$a,d$b);},d$b._setShaderValueVector2=function(d$a,d$b){this._owner._shaderValues.setValue(d$a,d$b?d$b.elements:null);},d$b._addShaderDefine=function(d$a){this._owner._shaderDefineValue|=d$a;},d$b._removeShaderDefine=function(d$a){this._owner._shaderDefineValue&=~d$a;},d$b._renderUpdate=function(d$a){return!0;},d$b._applyLightMapParams=function(){if(0<=this._lightmapIndex){var d$a=this._owner.scene;if(d$a){var d$b=d$a.getlightmaps()[this._lightmapIndex];d$b?(this._addShaderDefine(d$Vb.SAHDERDEFINE_LIGHTMAP),d$b.loaded?this._setShaderValuelightMap(d$b):d$b.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(d$Vb.SAHDERDEFINE_LIGHTMAP);}else this._removeShaderDefine(d$Vb.SAHDERDEFINE_LIGHTMAP);}else this._removeShaderDefine(d$Vb.SAHDERDEFINE_LIGHTMAP);},d$b._updateOctreeNode=function(){var d$a=this._treeNode;d$a&&this._octreeNodeNeedChange&&(d$a.updateObject(this),this._octreeNodeNeedChange=!1);},d$b._destroy=function(){this.offAll();var d$a=0,d$b=0;for(d$a=0,d$b=this._renderElements.length;d$a<d$b;d$a++)this._renderElements[d$a]._destroy();for(d$a=0,d$b=this._materials.length;d$a<d$b;d$a++)this._materials[d$a]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0;},d$q(0,d$b,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere;}),d$q(0,d$b,"id",function(){return this._id;}),d$q(0,d$b,"material",function(){var d$a=this._materials[0];if(d$a&&!this._materialsInstance[0]){var d$b=this._getInstanceMaterial(d$a,0);this.event("materialchanged",[this,0,d$b]);}return this._materials[0];},function(d$a){this.sharedMaterial=d$a;}),d$q(0,d$b,"sharedMaterial",function(){return this._materials[0];},function(d$a){var d$b=this._materials[0];d$b!==d$a&&(this._materials[0]=d$a,this._materialsInstance[0]=!1,this._changeMaterialReference(d$b,d$a),this.event("materialchanged",[this,0,d$a]));}),d$q(0,d$b,"lightmapIndex",function(){return this._lightmapIndex;},function(d$a){this._lightmapIndex=d$a,this._applyLightMapParams();}),d$q(0,d$b,"lightmapScaleOffset",function(){return this._lightmapScaleOffset;},function(d$a){this._lightmapScaleOffset=d$a,this._setShaderValueColor(2,d$a),this._addShaderDefine(d$Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV);}),d$q(0,d$b,"enable",function(){return this._enable;},function(d$a){this._enable=d$a,this.event("enablechanged",[this,d$a]);}),d$q(0,d$b,"materials",function(){for(var d$a=0,d$b=this._materials.length;d$a<d$b;d$a++)if(!this._materialsInstance[d$a]){var d$c=this._getInstanceMaterial(this._materials[d$a],d$a);this.event("materialchanged",[this,d$a,d$c]);}return this._materials.slice();},function(d$a){this.sharedMaterials=d$a;}),d$q(0,d$b,"sharedMaterials",function(){return this._materials.slice();},function(d$a){if(!d$a)throw new Error("MeshRender: shadredMaterials value can't be null.");var d$b=d$a.length;this._materialsInstance.length=d$b;for(var d$c=0;d$c<d$b;d$c++){var d$d=this._materials[d$c];d$d!==d$a[d$c]&&(this._materialsInstance[d$c]=!1,this._changeMaterialReference(d$d,d$a[d$c]),this.event("materialchanged",[this,d$c,d$a[d$c]]));}this._materials=d$a;}),d$q(0,d$b,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox;}),d$q(0,d$b,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var d$a=this.boundingBox;d$ib.add(d$a.min,d$a.max,this._boundingBoxCenter),d$ib.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1;}return this._boundingBoxCenter;}),d$q(0,d$b,"receiveShadow",function(){return this._receiveShadow;},function(d$a){this._receiveShadow!==d$a&&((this._receiveShadow=d$a)?this._addShaderDefine(d$pb.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(d$pb.SHADERDEFINE_RECEIVE_SHADOW));}),d$q(0,d$b,"destroyed",function(){return this._destroyed;}),d$d._uniqueIDCounter=0,d$n(d$d,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib(),new d$ib()];},"_greenColor",function(){return this._greenColor=new d$jb(0,1,0,1);}]),d$d;}(),d$yb=function(d$a){function d$j(d$a){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,d$j.__super.call(this),this._localPosition=new d$ib(),this._localRotation=new d$cb(0,0,0,1),this._localScale=new d$ib(1,1,1),this._localRotationEuler=new d$ib(),this._localMatrix=new d$ab(),this._position=new d$ib(),this._rotation=new d$cb(0,0,0,1),this._scale=new d$ib(1,1,1),this._worldMatrix=new d$ab(),this._forward=new d$ib(),this._up=new d$ib(),this._right=new d$ib(),this._owner=d$a,this._childs=[];}d$p(d$j,"laya.d3.core.Transform3D",d$f);var d$b=d$j.prototype;return d$b._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)d$ab.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var d$a=d$j._tempVector30;d$ib.multiply(this.pivot,this._localScale,d$a);var d$b=d$j._tempVector31;d$ib.subtract(d$a,this.pivot,d$b);var d$c=d$j._tempVector32,d$d=this.localRotation;d$ib.transformQuat(d$a,d$d,d$c),d$ib.subtract(d$c,d$a,d$c);var d$e=d$j._tempVector33;d$ib.subtract(this._localPosition,d$b,d$e),d$ib.subtract(d$e,d$c,d$e),d$ab.createAffineTransformation(d$e,d$d,this._localScale,this._localMatrix);}},d$b._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var d$a=0,d$b=this._childs.length;d$a<d$b;d$a++)this._childs[d$a]._onWorldPositionRotationTransform();}},d$b._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var d$a=0,d$b=this._childs.length;d$a<d$b;d$a++)this._childs[d$a]._onWorldPositionScaleTransform();}},d$b._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var d$a=0,d$b=this._childs.length;d$a<d$b;d$a++)this._childs[d$a]._onWorldPositionTransform();}},d$b._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var d$a=0,d$b=this._childs.length;d$a<d$b;d$a++)this._childs[d$a]._onWorldPositionRotationTransform();}},d$b._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var d$a=0,d$b=this._childs.length;d$a<d$b;d$a++)this._childs[d$a]._onWorldPositionScaleTransform();}},d$b._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var d$a=0,d$b=this._childs.length;d$a<d$b;d$a++)this._childs[d$a]._onWorldTransform();}},d$b.translate=function(d$a,d$b){void 0===d$b&&(d$b=!0),d$b?(d$ab.createFromQuaternion(this.localRotation,d$j._tempMatrix0),d$ib.transformCoordinate(d$a,d$j._tempMatrix0,d$j._tempVector30),d$ib.add(this.localPosition,d$j._tempVector30,this._localPosition),this.localPosition=this._localPosition):(d$ib.add(this.position,d$a,this._position),this.position=this._position);},d$b.rotate=function(d$a,d$b,d$c){var d$d;void 0===d$b&&(d$b=!0),void 0===d$c&&(d$c=!0),d$d=d$c?d$a:(d$ib.scale(d$a,Math.PI/180,d$j._tempVector30),d$j._tempVector30),d$cb.createFromYawPitchRoll(d$d.y,d$d.x,d$d.z,d$j._tempQuaternion0),d$b?(d$cb.multiply(this._localRotation,d$j._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(d$cb.multiply(d$j._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation);},d$b.lookAt=function(d$a,d$b,d$c){void 0===d$c&&(d$c=!1);var d$d,d$e=d$a.elements;if(d$c){if(d$d=this._localPosition.elements,Math.abs(d$d[0]-d$e[0])<d$ga.zeroTolerance&&Math.abs(d$d[1]-d$e[1])<d$ga.zeroTolerance&&Math.abs(d$d[2]-d$e[2])<d$ga.zeroTolerance)return;d$cb.lookAt(this._localPosition,d$a,d$b,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation;}else{var d$f=this.position;if(d$d=d$f.elements,Math.abs(d$d[0]-d$e[0])<d$ga.zeroTolerance&&Math.abs(d$d[1]-d$e[1])<d$ga.zeroTolerance&&Math.abs(d$d[2]-d$e[2])<d$ga.zeroTolerance)return;d$cb.lookAt(d$f,d$a,d$b,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation;}},d$q(0,d$b,"_isFrontFaceInvert",function(){var d$a=this.scale,d$b=d$a.x<0;return d$a.y<0&&(d$b=!d$b),d$a.z<0&&(d$b=!d$b),d$b;}),d$q(0,d$b,"owner",function(){return this._owner;}),d$q(0,d$b,"localRotation",function(){if(this._localQuaternionUpdate){var d$a=this._localRotationEuler.elements;d$cb.createFromYawPitchRoll(d$a[1]/d$j._angleToRandin,d$a[0]/d$j._angleToRandin,d$a[2]/d$j._angleToRandin,this._localRotation);}return this._localRotation;},function(d$a){this._localRotation=d$a,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform();}),d$q(0,d$b,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?d$ab.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix;},function(d$a){null===this._parent?d$a.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),d$ab.multiply(this._localMatrix,d$a,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=d$a,this._worldUpdate=!1;}),d$q(0,d$b,"worldNeedUpdate",function(){return this._worldUpdate;}),d$q(0,d$b,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix;},function(d$a){this._localMatrix=d$a,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform();}),d$q(0,d$b,"dummy",function(){return this._dummy;},function(d$a){this._dummy!==d$a&&(this._dummy&&(this._dummy._entity=null),d$a&&(d$a._entity=this),this._dummy=d$a);}),d$q(0,d$b,"localPosition",function(){return this._localPosition;},function(d$a){this._localPosition=d$a,this._localUpdate=!0,this._onWorldPositionTransform();}),d$q(0,d$b,"position",function(){if(this._positionUpdate){if(null!=this._parent){var d$a=this._parent.position;d$ib.multiply(this._localPosition,this._parent.scale,d$j._tempVector30),d$ib.transformQuat(d$j._tempVector30,this._parent.rotation,d$j._tempVector30),d$ib.add(d$a,d$j._tempVector30,this._position);}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1;}return this._position;},function(d$a){if(null!=this._parent){d$ib.subtract(d$a,this._parent.position,this._localPosition);var d$b=this._parent.scale.elements,d$c=d$b[0],d$d=d$b[1],d$e=d$b[2];if(1!==d$c||1!==d$d||1!==d$e){var d$f=d$j._tempVector30,d$i=d$f.elements;d$i[0]=1/d$c,d$i[1]=1/d$d,d$i[2]=1/d$e,d$ib.multiply(this._localPosition,d$f,this._localPosition);}this._parent.rotation.invert(d$j._tempQuaternion0),d$ib.transformQuat(this._localPosition,d$j._tempQuaternion0,this._localPosition);}else d$a.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=d$a,this._positionUpdate=!1;}),d$q(0,d$b,"localScale",function(){return this._localScale;},function(d$a){this._localScale=d$a,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform();}),d$q(0,d$b,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(d$j._tempVector30);var d$a=d$j._tempVector30.elements,d$b=this._localRotationEuler.elements;d$b[0]=d$a[1]*d$j._angleToRandin,d$b[1]=d$a[0]*d$j._angleToRandin,d$b[2]=d$a[2]*d$j._angleToRandin;}return this._localRotationEuler;},function(d$a){this._localRotationEuler=d$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform();}),d$q(0,d$b,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?d$cb.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation;},function(d$a){null!=this._parent?(this._parent.rotation.invert(d$j._tempQuaternion0),d$cb.multiply(d$a,d$j._tempQuaternion0,this._localRotation)):d$a.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=d$a,this._rotationUpdate=!1;}),d$q(0,d$b,"scale",function(){return this._scaleUpdate&&(null!==this._parent?d$ib.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale;},function(d$a){if(null!==this._parent){var d$b=this._parent.scale.elements,d$c=d$j._tempVector30.elements;d$c[0]=1/d$b[0],d$c[1]=1/d$b[1],d$c[2]=1/d$b[2],d$ib.multiply(d$a,d$j._tempVector30,this._localScale);}else d$a.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=d$a,this._scaleUpdate=!1;}),d$q(0,d$b,"rotationEuler",null,function(d$a){d$cb.createFromYawPitchRoll(d$a.y,d$a.x,d$a.z,this._rotation),this.rotation=this._rotation;}),d$q(0,d$b,"forward",function(){var d$a=this.worldMatrix.elements;return this._forward.elements[0]=-d$a[8],this._forward.elements[1]=-d$a[9],this._forward.elements[2]=-d$a[10],this._forward;}),d$q(0,d$b,"up",function(){var d$a=this.worldMatrix.elements;return this._up.elements[0]=d$a[4],this._up.elements[1]=d$a[5],this._up.elements[2]=d$a[6],this._up;}),d$q(0,d$b,"right",function(){var d$a=this.worldMatrix.elements;return this._right.elements[0]=d$a[0],this._right.elements[1]=d$a[1],this._right.elements[2]=d$a[2],this._right;}),d$q(0,d$b,"parent",function(){return this._parent;},function(d$a){if(this._parent!==d$a){if(this._parent){var d$b=this._parent._childs,d$c=d$b.indexOf(this);d$b.splice(d$c,1);}d$a&&(d$a._childs.push(this),d$a&&this._onWorldTransform()),this._parent=d$a;}}),d$n(d$j,["_tempVector30",function(){return this._tempVector30=new d$ib();},"_tempVector31",function(){return this._tempVector31=new d$ib();},"_tempVector32",function(){return this._tempVector32=new d$ib();},"_tempVector33",function(){return this._tempVector33=new d$ib();},"_tempQuaternion0",function(){return this._tempQuaternion0=new d$cb();},"_tempMatrix0",function(){return this._tempMatrix0=new d$ab();},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI;}]),d$j;}(),d$zb=(function(d$a){function d$b(){this._rotation=0,this._matNeedUpdte=!1,d$b.__super.call(this),this._matrix=new d$ab(),this._offset=new d$fb(),this._tiling=new d$fb(1,1);}d$p(d$b,"laya.d3.core.TransformUV",d$f);var d$c=d$b.prototype;d$x.imps(d$c,{"laya.d3.core.IClone":!0}),d$c._updateMatrix=function(){d$b._tempOffsetV3.elements[0]=this._offset.x,d$b._tempOffsetV3.elements[1]=this._offset.y,d$cb.createFromYawPitchRoll(0,0,this._rotation,d$b._tempRotationQua),d$b._tempTitlingV3.elements[0]=this._tiling.x,d$b._tempTitlingV3.elements[1]=this._tiling.y,d$ab.createAffineTransformation(d$b._tempOffsetV3,d$b._tempRotationQua,d$b._tempTitlingV3,this._matrix);},d$c.cloneTo=function(d$a){d$a._matrix=this._matrix.clone(),d$a._offset=this._offset.clone(),d$a._rotation=this._rotation,d$a._tiling=this._tiling.clone();},d$c.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$c,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix;}),d$q(0,d$c,"tiling",function(){return this._tiling;},function(d$a){this._tiling=d$a,this._matNeedUpdte=!0;}),d$q(0,d$c,"offset",function(){return this._offset;},function(d$a){this._offset=d$a,this._matNeedUpdte=!0;}),d$q(0,d$c,"rotation",function(){return this._rotation;},function(d$a){this._rotation=d$a,this._matNeedUpdte=!0;}),d$n(d$b,["_tempOffsetV3",function(){return this._tempOffsetV3=new d$ib(0,0,0);},"_tempRotationQua",function(){return this._tempRotationQua=new d$cb();},"_tempTitlingV3",function(){return this._tempTitlingV3=new d$ib(1,1,1);}]);}(),function(d$c){function d$a(){this.x=NaN,this.y=NaN,this.z=NaN,d$a.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1;}d$p(d$a,"laya.d3.core.particleShuriKen.module.shape.BoxShape",d$c);var d$b=d$a.prototype;d$b._getShapeBoundBox=function(d$a){var d$b=d$a.min.elements;d$b[0]=.5*-this.x,d$b[1]=.5*-this.y,d$b[2]=.5*-this.z;var d$c=d$a.max.elements;d$c[0]=.5*this.x,d$c[1]=.5*this.y,d$c[2]=.5*this.z;},d$b._getSpeedBoundBox=function(d$a){var d$b=d$a.min.elements;d$b[0]=0,d$b[1]=0,d$b[2]=0;var d$c=d$a.max.elements;d$c[0]=0,d$c[1]=1,d$c[2]=0;},d$b.generatePositionAndDirection=function(d$a,d$b,d$c,d$d){var d$e=d$a.elements,d$f=d$b.elements;d$c?(d$c.seed=d$d[16],d$T._randomPointInsideHalfUnitBox(d$a,d$c),d$d[16]=d$c.seed):d$T._randomPointInsideHalfUnitBox(d$a),d$e[0]=this.x*d$e[0],d$e[1]=this.y*d$e[1],d$e[2]=this.z*d$e[2],this.randomDirection?d$c?(d$c.seed=d$d[17],d$T._randomPointUnitSphere(d$b,d$c),d$d[17]=d$c.seed):d$T._randomPointUnitSphere(d$b):(d$f[0]=0,d$f[1]=0,d$f[2]=1);},d$b.cloneTo=function(d$a){d$c.prototype.cloneTo.call(this,d$a);var d$b=d$a;d$b.x=this.x,d$b.y=this.y,d$b.z=this.z,d$b.randomDirection=this.randomDirection;};}(d$O),function(d$c){function d$i(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,d$i.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1;}d$p(d$i,"laya.d3.core.particleShuriKen.module.shape.CircleShape",d$c);var d$a=d$i.prototype;d$a._getShapeBoundBox=function(d$a){var d$b=d$a.min.elements;d$b[0]=d$b[2]=-this.radius,d$b[1]=0;var d$c=d$a.max.elements;d$c[0]=d$c[2]=this.radius,d$c[1]=0;},d$a._getSpeedBoundBox=function(d$a){var d$b=d$a.min.elements;d$b[0]=d$b[1]=-1,d$b[2]=0;var d$c=d$a.max.elements;d$c[0]=d$c[1]=1,d$c[2]=0;},d$a.generatePositionAndDirection=function(d$a,d$b,d$c,d$d){var d$e=d$a.elements,d$f=d$i._tempPositionPoint.elements;d$c?(d$c.seed=d$d[16],this.emitFromEdge?d$T._randomPointUnitArcCircle(this.arc,d$i._tempPositionPoint,d$c):d$T._randomPointInsideUnitArcCircle(this.arc,d$i._tempPositionPoint,d$c),d$d[16]=d$c.seed):this.emitFromEdge?d$T._randomPointUnitArcCircle(this.arc,d$i._tempPositionPoint):d$T._randomPointInsideUnitArcCircle(this.arc,d$i._tempPositionPoint),d$e[0]=-d$f[0],d$e[1]=d$f[1],d$e[2]=0,d$ib.scale(d$a,this.radius,d$a),this.randomDirection?d$c?(d$c.seed=d$d[17],d$T._randomPointUnitSphere(d$b,d$c),d$d[17]=d$c.seed):d$T._randomPointUnitSphere(d$b):d$a.cloneTo(d$b);},d$a.cloneTo=function(d$a){d$c.prototype.cloneTo.call(this,d$a);var d$b=d$a;d$b.radius=this.radius,d$b.arc=this.arc,d$b.emitFromEdge=this.emitFromEdge,d$b.randomDirection=this.randomDirection;},d$n(d$i,["_tempPositionPoint",function(){return this._tempPositionPoint=new d$fb();}]);}(d$O),function(d$c){function d$o(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,d$o.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1;}d$p(d$o,"laya.d3.core.particleShuriKen.module.shape.ConeShape",d$c);var d$a=d$o.prototype;d$a._getShapeBoundBox=function(d$a){var d$b=this.radius+this.length*Math.sin(this.angle),d$c=this.length*Math.cos(this.angle),d$d=d$a.min.elements;d$d[0]=d$d[1]=-d$b,d$d[2]=0;var d$e=d$a.max.elements;d$e[0]=d$e[1]=d$b,d$e[2]=d$c;},d$a._getSpeedBoundBox=function(d$a){var d$b=Math.sin(this.angle),d$c=d$a.min.elements;d$c[0]=d$c[1]=-d$b,d$c[2]=0;var d$d=d$a.max.elements;d$d[0]=d$c[1]=d$b,d$d[2]=1;},d$a.generatePositionAndDirection=function(d$a,d$b,d$c,d$d){var d$e,d$f=d$a.elements,d$i=d$b.elements,d$j=d$o._tempPositionPoint.elements,d$k=NaN,d$l=NaN,d$m=Math.cos(this.angle),d$n=Math.sin(this.angle);switch(this.emitType){case 0:d$c?(d$c.seed=d$d[16],d$T._randomPointInsideUnitCircle(d$o._tempPositionPoint,d$c),d$d[16]=d$c.seed):d$T._randomPointInsideUnitCircle(d$o._tempPositionPoint),d$k=d$j[0],d$l=d$j[1],d$f[0]=d$k*this.radius,d$f[1]=d$l*this.radius,d$f[2]=0,this.randomDirection?(d$c?(d$c.seed=d$d[17],d$T._randomPointInsideUnitCircle(d$o._tempDirectionPoint,d$c),d$d[17]=d$c.seed):d$T._randomPointInsideUnitCircle(d$o._tempDirectionPoint),d$e=d$o._tempDirectionPoint.elements,d$i[0]=d$e[0]*d$n,d$i[1]=d$e[1]*d$n):(d$i[0]=d$k*d$n,d$i[1]=d$l*d$n),d$i[2]=d$m;break;case 1:d$c?(d$c.seed=d$d[16],d$T._randomPointUnitCircle(d$o._tempPositionPoint,d$c),d$d[16]=d$c.seed):d$T._randomPointUnitCircle(d$o._tempPositionPoint),d$k=d$j[0],d$l=d$j[1],d$f[0]=d$k*this.radius,d$f[1]=d$l*this.radius,d$f[2]=0,this.randomDirection?(d$c?(d$c.seed=d$d[17],d$T._randomPointInsideUnitCircle(d$o._tempDirectionPoint,d$c),d$d[17]=d$c.seed):d$T._randomPointInsideUnitCircle(d$o._tempDirectionPoint),d$e=d$o._tempDirectionPoint.elements,d$i[0]=d$e[0]*d$n,d$i[1]=d$e[1]*d$n):(d$i[0]=d$k*d$n,d$i[1]=d$l*d$n),d$i[2]=d$m;break;case 2:d$c?(d$c.seed=d$d[16],d$T._randomPointInsideUnitCircle(d$o._tempPositionPoint,d$c)):d$T._randomPointInsideUnitCircle(d$o._tempPositionPoint),d$k=d$j[0],d$l=d$j[1],d$f[0]=d$k*this.radius,d$f[1]=d$l*this.radius,d$i[d$f[2]=0]=d$k*d$n,d$i[1]=d$l*d$n,d$i[2]=d$m,d$ib.normalize(d$b,d$b),d$c?(d$ib.scale(d$b,this.length*d$c.getFloat(),d$b),d$d[16]=d$c.seed):d$ib.scale(d$b,this.length*Math.random(),d$b),d$ib.add(d$a,d$b,d$a),this.randomDirection&&(d$c?(d$c.seed=d$d[17],d$T._randomPointUnitSphere(d$b,d$c),d$d[17]=d$c.seed):d$T._randomPointUnitSphere(d$b));break;case 3:d$c?(d$c.seed=d$d[16],d$T._randomPointUnitCircle(d$o._tempPositionPoint,d$c)):d$T._randomPointUnitCircle(d$o._tempPositionPoint),d$k=d$j[0],d$l=d$j[1],d$f[0]=d$k*this.radius,d$f[1]=d$l*this.radius,d$i[d$f[2]=0]=d$k*d$n,d$i[1]=d$l*d$n,d$i[2]=d$m,d$ib.normalize(d$b,d$b),d$c?(d$ib.scale(d$b,this.length*d$c.getFloat(),d$b),d$d[16]=d$c.seed):d$ib.scale(d$b,this.length*Math.random(),d$b),d$ib.add(d$a,d$b,d$a),this.randomDirection&&(d$c?(d$c.seed=d$d[17],d$T._randomPointUnitSphere(d$b,d$c),d$d[17]=d$c.seed):d$T._randomPointUnitSphere(d$b));break;default:throw new Error("ConeShape:emitType is invalid.");}},d$a.cloneTo=function(d$a){d$c.prototype.cloneTo.call(this,d$a);var d$b=d$a;d$b.angle=this.angle,d$b.radius=this.radius,d$b.length=this.length,d$b.emitType=this.emitType,d$b.randomDirection=this.randomDirection;},d$n(d$o,["_tempPositionPoint",function(){return this._tempPositionPoint=new d$fb();},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new d$fb();}]);}(d$O),function(d$c){function d$a(){this.radius=NaN,this.emitFromShell=!1,d$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1;}d$p(d$a,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",d$c);var d$b=d$a.prototype;d$b._getShapeBoundBox=function(d$a){var d$b=d$a.min.elements;d$b[0]=d$b[1]=d$b[2]=-this.radius;var d$c=d$a.max.elements;d$c[0]=d$c[1]=this.radius,d$c[2]=0;},d$b._getSpeedBoundBox=function(d$a){var d$b=d$a.min.elements;d$b[0]=d$b[1]=-1,d$b[2]=0;var d$c=d$a.max.elements;d$c[0]=d$c[1]=d$c[2]=1;},d$b.generatePositionAndDirection=function(d$a,d$b,d$c,d$d){var d$e=d$a.elements;d$c?(d$c.seed=d$d[16],this.emitFromShell?d$T._randomPointUnitSphere(d$a,d$c):d$T._randomPointInsideUnitSphere(d$a,d$c),d$d[16]=d$c.seed):this.emitFromShell?d$T._randomPointUnitSphere(d$a):d$T._randomPointInsideUnitSphere(d$a),d$ib.scale(d$a,this.radius,d$a);var d$f=d$e[2];d$f<0&&(d$e[2]=-1*d$f),this.randomDirection?d$c?(d$c.seed=d$d[17],d$T._randomPointUnitSphere(d$b,d$c),d$d[17]=d$c.seed):d$T._randomPointUnitSphere(d$b):d$a.cloneTo(d$b);},d$b.cloneTo=function(d$a){d$c.prototype.cloneTo.call(this,d$a);var d$b=d$a;d$b.radius=this.radius,d$b.emitFromShell=this.emitFromShell,d$b.randomDirection=this.randomDirection;};}(d$O),function(d$c){function d$a(){this.radius=NaN,this.emitFromShell=!1,d$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1;}d$p(d$a,"laya.d3.core.particleShuriKen.module.shape.SphereShape",d$c);var d$b=d$a.prototype;d$b._getShapeBoundBox=function(d$a){var d$b=d$a.min.elements;d$b[0]=d$b[1]=d$b[2]=-this.radius;var d$c=d$a.max.elements;d$c[0]=d$c[1]=d$c[2]=this.radius;},d$b._getSpeedBoundBox=function(d$a){var d$b=d$a.min.elements;d$b[0]=d$b[1]=d$b[2]=-1;var d$c=d$a.max.elements;d$c[0]=d$c[1]=d$c[2]=1;},d$b.generatePositionAndDirection=function(d$a,d$b,d$c,d$d){d$c?(d$c.seed=d$d[16],this.emitFromShell?d$T._randomPointUnitSphere(d$a,d$c):d$T._randomPointInsideUnitSphere(d$a,d$c),d$d[16]=d$c.seed):this.emitFromShell?d$T._randomPointUnitSphere(d$a):d$T._randomPointInsideUnitSphere(d$a),d$ib.scale(d$a,this.radius,d$a),this.randomDirection?d$c?(d$c.seed=d$d[17],d$T._randomPointUnitSphere(d$b,d$c),d$d[17]=d$c.seed):d$T._randomPointUnitSphere(d$b):d$a.cloneTo(d$b);},d$b.cloneTo=function(d$a){d$c.prototype.cloneTo.call(this,d$a);var d$b=d$a;d$b.radius=this.radius,d$b.emitFromShell=this.emitFromShell,d$b.randomDirection=this.randomDirection;};}(d$O),function(d$a){function d$b(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,d$b.__super.call(this);}return d$p(d$b,"laya.d3.core.render.SubMeshRenderElement",d$W),d$b;}()),d$Ab=function(d$a){function d$s(d$a,d$b,d$c,d$d,d$e,d$f){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=d$a,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[d$pb.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[d$Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[d$Vb.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[d$Eb.SHADERDEFINE_ALPHATEST]="ALPHATEST";d$s.__super.call(this,d$a,d$b,d$c,null,{}),this._attributeMap=d$d;var d$i;for(d$i in d$e){var d$j=d$e[d$i];switch(d$j[1]){case 0:this._renderElementUniformMap[d$i]=d$j[0];break;case 1:this._materialUniformMap[d$i]=d$j[0];break;case 2:this._spriteUniformMap[d$i]=d$j[0];break;case 3:this._cameraUniformMap[d$i]=d$j[0];break;case 4:this._sceneUniformMap[d$i]=d$j[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.");}}}d$p(d$s,"laya.d3.shader.ShaderCompile3D",d$v);var d$b=d$s.prototype;return d$b._definesToNameDic=function(d$a,d$b){for(var d$c={},d$d=1,d$e=0;d$e<32&&!(d$a<(d$d=1<<d$e));d$e++)if(d$a&d$d){var d$f=d$b[d$d];d$f&&(d$c[d$f]="");}return d$c;},d$b.withCompile=function(d$a,d$b,d$c,d$d){var d$e,d$f,d$i;if(d$f=this.sharders[d$a]){if(d$i=d$f[d$b]){if(d$e=d$i[d$c])return d$e;}else d$i=d$f[d$b]=[];}else d$i=(d$f=this.sharders[d$a]=[])[d$b]=[];var d$j,d$k=this._definesToNameDic(d$a,d$s._globalInt2name),d$l=this._definesToNameDic(d$b,this._spriteInt2name),d$m=this._definesToNameDic(d$c,this._materialInt2name),d$n={},d$o="";if(d$k)for(d$j in d$k)d$o+="#define "+d$j+"\n",d$n[d$j]=!0;if(d$l)for(d$j in d$l)d$o+="#define "+d$j+"\n",d$n[d$j]=!0;if(d$m)for(d$j in d$m)d$o+="#define "+d$j+"\n",d$n[d$j]=!0;var d$p=d$Lb.nameKey.getName(this._name)+" compile ("+d$a+","+d$b+","+d$c+")",d$q=this._VS.toscript(d$n,[]),d$r=this._PS.toscript(d$n,[]);d$H.now();if(d$e=d$Lb.create(d$o+d$q.join("\n"),d$o+d$r.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,d$d,d$p),d$i[d$c]=d$e,laya.d3.shader.ShaderCompile3D.debugMode)d$H.now();return d$e;},d$b.precompileShaderWithShaderDefine=function(d$a,d$b,d$c){this.withCompile(d$a,d$b,d$c,!0);},d$b.addMaterialDefines=function(d$a){var d$b=d$a.defines;for(var d$c in d$b){var d$d=d$b[d$c],d$e=parseInt(d$c);this._materialInt2name[d$e]=d$d,this._materialName2Int[d$d]=d$e;}},d$b.addSpriteDefines=function(d$a){var d$b=d$a.defines;for(var d$c in d$b){var d$d=d$b[d$c],d$e=parseInt(d$c);this._spriteInt2name[d$e]=d$d,this._spriteName2Int[d$d]=d$e;}},d$b.getMaterialDefineByName=function(d$a){return this._materialName2Int[d$a];},d$b.registerMaterialDefine=function(d$a){var d$b=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[d$b]=d$a,this._materialName2Int[d$a]=d$b;},d$b.registerSpriteDefine=function(d$a){var d$b=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[d$b]=d$a,this._spriteName2Int[d$a]=d$b;},d$s._globalRegDefine=function(d$a,d$b){d$s._globalInt2name[d$b]=d$a;},d$s.add=function(d$a,d$b,d$c,d$d,d$e){return laya.d3.shader.ShaderCompile3D._preCompileShader[d$a]=new d$s(d$a,d$b,d$c,d$d,d$e,d$v.includes);},d$s.get=function(d$a){return laya.d3.shader.ShaderCompile3D._preCompileShader[d$Lb.nameKey.getID(d$a)];},d$s._preCompileShader={},d$s._globalInt2name=[],d$s.debugMode=!1,d$s.SHADERDEFINE_HIGHPRECISION=1,d$s.SHADERDEFINE_FOG=4,d$s.SHADERDEFINE_DIRECTIONLIGHT=8,d$s.SHADERDEFINE_POINTLIGHT=16,d$s.SHADERDEFINE_SPOTLIGHT=32,d$s.SHADERDEFINE_UV0=64,d$s.SHADERDEFINE_COLOR=128,d$s.SHADERDEFINE_UV1=256,d$s.SAHDERDEFINE_DEPTHFOG=131072,d$s;}(),d$Bb=function(d$a){function d$q(){d$q.__super.call(this);}d$p(d$q,"laya.d3.graphics.MeshSprite3DStaticBatchManager",d$da);var d$b=d$q.prototype;return d$b._getStaticBatch=function(d$a,d$b,d$c,d$d){var d$e,d$f;return d$f=d$a?d$a.id.toString()+d$c.id.toString()+d$b.id.toString()+d$d.toString():d$c.id.toString()+d$b.id.toString()+d$d.toString(),this._staticBatches[d$f]?d$e=this._staticBatches[d$f]:this._staticBatches[d$f]=d$e=new d$Cb(d$f,this,d$a,d$b,d$c),d$e;},d$b._initStaticBatchs=function(d$a){var d$b,d$c;this._initBatchRenderElements.sort(d$q._sortPrepareStaticBatch);for(var d$d,d$e=!1,d$f=0,d$i=0,d$j=this._initBatchRenderElements.length;d$i<d$j;d$i++){var d$k,d$l=this._initBatchRenderElements[d$i],d$m=d$l.renderObj._getVertexBuffer(0);d$l._sprite3D;if(d$c===d$m.vertexDeclaration&&d$b===d$l._material){if(d$e)d$d._addCombineBatchRenderObjTest(d$l)?(d$k=d$l._staticBatch)!==d$d&&(d$k&&d$k._deleteCombineBatchRenderObj(d$l),d$d._addCombineBatchRenderObj(d$l)):(d$e=!1,d$f++);else{var d$n=this._initBatchRenderElements[d$i-1],d$o=d$n.renderObj,d$p=d$l.renderObj;d$e=!(65535<d$o._getVertexBuffer().vertexCount+d$p._getVertexBuffer().vertexCount)&&(d$d=this._getStaticBatch(d$a,d$c,d$b,d$f),(d$k=d$n._staticBatch)!==d$d&&(d$k&&d$k._deleteCombineBatchRenderObj(d$n),d$d._addCombineBatchRenderObj(d$n)),(d$k=d$l._staticBatch)!==d$d&&(d$k&&d$k._deleteCombineBatchRenderObj(d$l),d$d._addCombineBatchRenderObj(d$l)),!0);}}else d$e=!1,d$f=0;d$b=d$l._material,d$c=d$m.vertexDeclaration;}},d$q._sortPrepareStaticBatch=function(d$a,d$b){var d$c=d$a._render,d$d=d$b._render,d$e=d$c.lightmapIndex-d$d.lightmapIndex;if(0!=d$e)return d$e;var d$f=d$c.receiveShadow-d$d.receiveShadow;if(0!=d$f)return d$f;var d$i=d$a._mainSortID-d$b._mainSortID;return 0==d$i?d$a.renderObj.triangleCount-d$b.renderObj.triangleCount:d$i;},d$q;}(),d$Cb=function(d$a){function d$f(d$a,d$b,d$c,d$d,d$e){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,d$f.__super.call(this,d$a,d$b,d$c),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=d$d,this._material=d$e;}d$p(d$f,"laya.d3.graphics.SubMeshStaticBatch",d$ea);var d$b=d$f.prototype;return d$b._compareBatchRenderElement=function(d$a,d$b){return d$a._batchIndexStart>d$b._batchIndexStart;},d$b._addCombineBatchRenderObjTest=function(d$a){var d$b=d$a.renderObj._vertexCount;return!(65535<(0<d$b?this._currentCombineVertexCount+d$b:this._currentCombineVertexCount+d$a.renderObj._getVertexBuffer().vertexCount));},d$b._addCombineBatchRenderObj=function(d$a){var d$b=d$a.renderObj,d$c=d$b._vertexCount;this._initBatchRenderElements.push(d$a),d$a._staticBatch=this,0<d$c?(this._currentCombineIndexCount+=d$b._indexCount,this._currentCombineVertexCount+=d$c):(this._currentCombineIndexCount=this._currentCombineIndexCount+d$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+d$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0;},d$b._deleteCombineBatchRenderObj=function(d$a){var d$b=d$a.renderObj,d$c=this._initBatchRenderElements.indexOf(d$a);if(-1!==d$c){this._initBatchRenderElements.splice(d$c,1),d$a._staticBatch=null;var d$d=d$b._vertexCount;0<d$d?(this._currentCombineIndexCount=this._currentCombineIndexCount-d$b._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-d$d):(this._currentCombineIndexCount=this._currentCombineIndexCount-d$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-d$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0;}},d$b._finishInit=function(){if(this._needFinishCombine){var d$a=0,d$b=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var d$c=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),d$d=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=d$Ob.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=d$Nb.create("ushort",this._currentCombineIndexCount,35044);for(var d$e=0,d$f=this._initBatchRenderElements.length;d$e<d$f;d$e++){var d$i=this._initBatchRenderElements[d$e],d$j=d$i.renderObj,d$k=d$j._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,d$i._sprite3D),d$l=d$j.getIndices(),d$m=d$i._sprite3D.transform._isFrontFaceInvert,d$n=d$a/(this._vertexDeclaration.vertexStride/4)-d$j._vertexStart,d$o=d$b,d$p=d$o+d$l.length;d$i._batchIndexStart=d$o,d$i._batchIndexEnd=d$p,d$d.set(d$l,d$b);var d$q=0;if(d$m)for(d$q=d$o;d$q<d$p;d$q+=3){d$d[d$q]=d$n+d$d[d$q];var d$r=d$d[d$q+1],d$s=d$d[d$q+2];d$d[d$q+1]=d$n+d$s,d$d[d$q+2]=d$n+d$r;}else for(d$q=d$o;d$q<d$p;d$q+=3)d$d[d$q]=d$n+d$d[d$q],d$d[d$q+1]=d$n+d$d[d$q+1],d$d[d$q+2]=d$n+d$d[d$q+2];d$b+=d$l.length,d$c.set(d$k,d$a),d$a+=d$k.length;}this._vertexBuffer.setData(d$c),this._indexBuffer.setData(d$d),this._needFinishCombine=!1;}},d$b._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new d$zb());},d$b._getRenderElement=function(d$a,d$b,d$c){for(var d$d,d$e,d$f=this._batchRenderElements.length,d$i=!0,d$j=0;d$j<d$f;d$j++){var d$k,d$l,d$m=(d$e=this._batchRenderElements[d$j])._sprite3D._render;if(0!==d$j&&(d$i=(d$k=(d$d=this._batchRenderElements[d$j-1])._sprite3D._render).lightmapIndex!==d$m.lightmapIndex||d$k.receiveShadow!==d$m.receiveShadow||d$d._batchIndexEnd!==d$e._batchIndexStart),d$i){(d$l=this._getCombineRenderElementFromPool()).renderObj=this,d$l._material=this._material,d$l._batchIndexStart=d$e._batchIndexStart,d$l._batchIndexEnd=d$e._batchIndexEnd;var d$n=d$m.lightmapIndex,d$o=d$n+1,d$p=this._batchOwnerIndices[d$o];d$p||(d$p=this._batchOwnerIndices[d$o]=[]);var d$q,d$r=d$p[d$e._render.receiveShadow?1:0];void 0===d$r?(d$p[d$m.receiveShadow?1:0]=this._batchOwners.length,(d$q=new d$Xb(null,"StaticBatchMeshSprite3D"))._scene=d$b,d$q._transform=this._rootOwner?this._rootOwner._transform:null,d$q._render.lightmapIndex=d$n,d$q._render.receiveShadow=d$e._render.receiveShadow,this._batchOwners.push(d$q)):d$q=this._batchOwners[d$r],d$q._render._renderUpdate(d$c),d$l._sprite3D=d$q,d$a.push(d$l);}else d$l._batchIndexEnd=d$e._batchIndexEnd;}},d$b._beforeRender=function(d$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},d$b._render=function(d$a){var d$b=d$a.renderElement,d$c=d$b._batchIndexStart,d$d=d$b._batchIndexEnd-d$c;d$F.mainContext.drawElements(4,d$d,5123,2*d$c),d$A.drawCall++,d$A.trianglesFaces+=d$d/3;},d$b.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy();},d$b._getVertexBuffer=function(d$a){return void 0===d$a&&(d$a=0),this._vertexBuffer;},d$f;}(),d$Db=function(d$a){function d$b(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,d$b.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[];}d$p(d$b,"laya.d3.core.ComponentNode",d$l);var d$c=d$b.prototype;return d$c.addComponent=function(d$a){var d$b,d$c=this._componentsMap.indexOf(d$a);if(-1===d$c)d$b=[],this._componentsMap.push(d$a),this._typeComponentsIndices.push(d$b);else if(d$b=this._typeComponentsIndices[d$c],this._components[d$b[0]].isSingleton)throw new Error("无法单实例创建"+d$a+"组件，"+d$a+"组件已存在！");var d$d=d$e.getInstance(d$a);return d$b.push(this._components.length),this._components.push(d$d),d$d instanceof laya.d3.component.Script&&this._scripts.push(d$d),d$d._initialize(this),d$d;},d$c._removeComponent=function(d$a,d$b){var d$c=this._typeComponentsIndices[d$a],d$d=d$c[d$b],d$e=this._components[d$d];this._components.splice(d$d,1),d$e instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(d$e),1),d$c.splice(d$b,1),0===d$c.length&&(this._typeComponentsIndices.splice(d$a,1),this._componentsMap.splice(d$a,1));for(var d$f=0,d$i=this._componentsMap.length;d$f<d$i;d$f++)for(var d$j=(d$c=this._typeComponentsIndices[d$f]).length-1;0<=d$j;d$j--){var d$k=d$c[d$j];if(!(d$d<d$k))break;d$c[d$j]=--d$k;}d$e._destroy();},d$c.getComponentByType=function(d$a,d$b){void 0===d$b&&(d$b=0);var d$c=this._componentsMap.indexOf(d$a);return-1===d$c?null:this._components[this._typeComponentsIndices[d$c][d$b]];},d$c.getComponentsByType=function(d$a,d$b){var d$c=this._componentsMap.indexOf(d$a);if(-1!==d$c){var d$d=this._typeComponentsIndices[d$c],d$e=d$d.length;d$b.length=d$e;for(var d$f=0;d$f<d$e;d$f++)d$b[d$f]=this._components[d$d[d$f]];}else d$b.length=0;},d$c.getComponentByIndex=function(d$a){return this._components[d$a];},d$c.removeComponentByType=function(d$a,d$b){void 0===d$b&&(d$b=0);var d$c=this._componentsMap.indexOf(d$a);-1!==d$c&&this._removeComponent(d$c,d$b);},d$c.removeComponentsByType=function(d$a){var d$b=this._componentsMap.indexOf(d$a);if(-1!==d$b)for(var d$c=this._typeComponentsIndices[d$b],d$d=0,d$e=d$c.length;d$d<d$e;d$c.length<d$e?d$e--:d$d++)this._removeComponent(d$b,d$d);},d$c.removeAllComponent=function(){for(var d$a=0,d$b=this._componentsMap.length;d$a<d$b;this._componentsMap.length<d$b?d$b--:d$a++)this.removeComponentsByType(this._componentsMap[d$a]);},d$c._updateComponents=function(d$a){for(var d$b=0,d$c=this._components.length;d$b<d$c;d$b++){var d$d=this._components[d$b];!d$d.started&&(d$d._start(d$a),d$d.started=!0),d$d.enable&&d$d._update(d$a);}},d$c._lateUpdateComponents=function(d$a){for(var d$b=0;d$b<this._components.length;d$b++){var d$c=this._components[d$b];!d$c.started&&(d$c._start(d$a),d$c.started=!0),d$c.enable&&d$c._lateUpdate(d$a);}},d$c._preRenderUpdateComponents=function(d$a){for(var d$b=0;d$b<this._components.length;d$b++){var d$c=this._components[d$b];!d$c.started&&(d$c._start(d$a),d$c.started=!0),d$c.enable&&d$c._preRenderUpdate(d$a);}},d$c._postRenderUpdateComponents=function(d$a){for(var d$b=0;d$b<this._components.length;d$b++){var d$c=this._components[d$b];!d$c.started&&(d$c._start(d$a),d$c.started=!0),d$c.enable&&d$c._postRenderUpdate(d$a);}},d$b;}(),d$Eb=function(d$d){function d$a(){d$a.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new d$ob(),this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new d$jb(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0;}d$p(d$a,"laya.d3.core.material.BaseMaterial",d$d);var d$b=d$a.prototype;return d$x.imps(d$b,{"laya.d3.core.IClone":!0}),d$b._addShaderDefine=function(d$a){this._shaderDefineValue|=d$a;},d$b._removeShaderDefine=function(d$a){this._shaderDefineValue&=~d$a;},d$b._addDisablePublicShaderDefine=function(d$a){this._disablePublicShaderDefine|=d$a;},d$b._removeDisablePublicShaderDefine=function(d$a){this._disablePublicShaderDefine&=~d$a;},d$b._setBuffer=function(d$a,d$b){this._shaderValues.setValue(d$a,d$b),this._values[d$a]=d$b;},d$b._getBuffer=function(d$a){return this._values[d$a];},d$b._setMatrix4x4=function(d$a,d$b){this._shaderValues.setValue(d$a,d$b?d$b.elements:null),this._values[d$a]=d$b;},d$b._getMatrix4x4=function(d$a){return this._values[d$a];},d$b._setInt=function(d$a,d$b){this._shaderValues.setValue(d$a,d$b),this._values[d$a]=d$b;},d$b._getInt=function(d$a){return this._values[d$a];},d$b._setNumber=function(d$a,d$b){this._shaderValues.setValue(d$a,d$b),this._values[d$a]=d$b;},d$b._getNumber=function(d$a){return this._values[d$a];},d$b._setBool=function(d$a,d$b){this._shaderValues.setValue(d$a,d$b),this._values[d$a]=d$b;},d$b._getBool=function(d$a){return this._values[d$a];},d$b._setVector2=function(d$a,d$b){this._shaderValues.setValue(d$a,d$b?d$b.elements:null),this._values[d$a]=d$b;},d$b._getVector2=function(d$a){return this._values[d$a];},d$b._setColor=function(d$a,d$b){this._shaderValues.setValue(d$a,d$b?d$b.elements:null),this._values[d$a]=d$b;},d$b._getColor=function(d$a){return this._values[d$a];},d$b._setTexture=function(d$a,d$b){var d$c=this._values[d$a];this._values[d$a]=d$b,this._shaderValues.setValue(d$a,d$b),0<this.referenceCount&&(d$c&&d$c._removeReference(),d$b&&d$b._addReference());},d$b._getTexture=function(d$a){return this._values[d$a];},d$b._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data);},d$b._getShader=function(d$a,d$b,d$c){var d$d=(d$a|d$b)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(d$d,d$c,this._shaderDefineValue),this._shader;},d$b._setRenderStateBlendDepth=function(){var d$a=d$F.mainContext;switch(d$G.setDepthMask(d$a,this.depthWrite),0===this.depthTest?d$G.setDepthTest(d$a,!1):(d$G.setDepthTest(d$a,!0),d$G.setDepthFunc(d$a,this.depthTest)),this.blend){case 0:d$G.setBlend(d$a,!1);break;case 1:d$G.setBlend(d$a,!0),d$G.setBlendFunc(d$a,this.srcBlend,this.dstBlend);break;case 2:d$G.setBlend(d$a,!0);}},d$b._setRenderStateFrontFace=function(d$a,d$b){var d$c=d$F.mainContext,d$d=0;switch(this.cull){case 0:d$G.setCullFace(d$c,!1);break;case 1:d$G.setCullFace(d$c,!0),d$d=d$a?d$b&&d$b._isFrontFaceInvert?2305:2304:d$b&&d$b._isFrontFaceInvert?2304:2305,d$G.setFrontFace(d$c,d$d);break;case 2:d$G.setCullFace(d$c,!0),d$d=d$a?d$b&&d$b._isFrontFaceInvert?2304:2305:d$b&&d$b._isFrontFaceInvert?2305:2304,d$G.setFrontFace(d$c,d$d);}},d$b.onAsynLoaded=function(d$a,d$b,d$c){var d$d=d$b[0],d$e=d$b[1];switch(d$d.version){case"LAYAMATERIAL:01":var d$f=0,d$i=0,d$j=d$d.props;for(var d$k in d$j)switch(d$k){case"vectors":var d$l=d$j[d$k];for(d$f=0,d$i=d$l.length;d$f<d$i;d$f++){var d$m=d$l[d$f],d$n=d$m.value;switch(d$n.length){case 2:this[d$m.name]=new d$fb(d$n[0],d$n[1]);break;case 3:this[d$m.name]=new d$ib(d$n[0],d$n[1],d$n[2]);break;case 4:this[d$m.name]=new d$jb(d$n[0],d$n[1],d$n[2],d$n[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.");}}break;case"textures":var d$o=d$j[d$k];for(d$f=0,d$i=d$o.length;d$f<d$i;d$f++){var d$p=d$o[d$f],d$q=d$p.path;d$q&&(this[d$p.name]=d$t.getRes(d$e[d$q]));}break;case"defines":var d$r=d$j[d$k];for(d$f=0,d$i=d$r.length;d$f<d$i;d$f++){var d$s=this._shaderCompile.getMaterialDefineByName(d$r[d$f]);this._addShaderDefine(d$s);}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[d$k]=d$j[d$k];break;case"renderQueue":switch(d$j[d$k]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3;}break;default:this[d$k]=d$j[d$k];}break;case"LAYAMATERIAL:02":for(d$k in d$j=d$d.props)switch(d$k){case"vectors":for(d$f=0,d$i=(d$l=d$j[d$k]).length;d$f<d$i;d$f++)switch((d$n=(d$m=d$l[d$f]).value).length){case 2:this[d$m.name]=new d$fb(d$n[0],d$n[1]);break;case 3:this[d$m.name]=new d$ib(d$n[0],d$n[1],d$n[2]);break;case 4:this[d$m.name]=new d$jb(d$n[0],d$n[1],d$n[2],d$n[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.");}break;case"textures":for(d$f=0,d$i=(d$o=d$j[d$k]).length;d$f<d$i;d$f++)(d$q=(d$p=d$o[d$f]).path)&&(this[d$p.name]=d$t.getRes(d$e[d$q]));break;case"defines":for(d$f=0,d$i=(d$r=d$j[d$k]).length;d$f<d$i;d$f++)d$s=this._shaderCompile.getMaterialDefineByName(d$r[d$f]),this._addShaderDefine(d$s);break;default:this[d$k]=d$j[d$k];}break;default:throw new Error("BaseMaterial:unkonwn version.");}this._endLoaded();},d$b._addReference=function(){d$d.prototype._addReference.call(this);for(var d$a=0,d$b=this._values.length;d$a<d$b;d$a++){var d$c=this._values[d$a];d$c&&d$c instanceof laya.d3.resource.BaseTexture&&d$c._addReference();}},d$b._removeReference=function(){d$d.prototype._removeReference.call(this);for(var d$a=0,d$b=this._values.length;d$a<d$b;d$a++){var d$c=this._values[d$a];d$c&&d$c instanceof laya.d3.resource.BaseTexture&&d$c._removeReference();}},d$b.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null;},d$b.setShaderName=function(d$a){var d$b=d$Lb.nameKey.getID(d$a);if(-1===d$b)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=d$Ab._preCompileShader[d$b];},d$b.cloneTo=function(d$a){var d$b=d$a;d$b.name=this.name,d$b.cull=this.cull,d$b.blend=this.blend,d$b.srcBlend=this.srcBlend,d$b.dstBlend=this.dstBlend,d$b.srcBlendRGB=this.srcBlendRGB,d$b.dstBlendRGB=this.dstBlendRGB,d$b.srcBlendAlpha=this.srcBlendAlpha,d$b.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(d$b.blendConstColor),d$b.blendEquation=this.blendEquation,d$b.blendEquationRGB=this.blendEquationRGB,d$b.blendEquationAlpha=this.blendEquationAlpha,d$b.depthTest=this.depthTest,d$b.depthWrite=this.depthWrite,d$b.renderQueue=this.renderQueue,d$b._shader=this._shader,d$b._disablePublicShaderDefine=this._disablePublicShaderDefine,d$b._shaderDefineValue=this._shaderDefineValue;var d$c,d$d=0,d$e=d$b._shaderValues;d$b._shaderValues.data.length=this._shaderValues.data.length;var d$f=this._values.length,d$i=d$b._values;for(d$d=0,d$c=d$i.length=d$f;d$d<d$c;d$d++){var d$j=this._values[d$d];if(d$j)if("number"==typeof d$j)d$i[d$d]=d$j,d$e.data[d$d]=d$j;else if("number"==typeof d$j&&Math.floor(d$j)==d$j)d$i[d$d]=d$j,d$e.data[d$d]=d$j;else if("boolean"==typeof d$j)d$i[d$d]=d$j,d$e.data[d$d]=d$j;else if(d$j instanceof laya.d3.math.Vector2){var d$k=d$i[d$d]||(d$i[d$d]=new d$fb());d$j.cloneTo(d$k),d$e.data[d$d]=d$k.elements;}else if(d$j instanceof laya.d3.math.Vector3){var d$l=d$i[d$d]||(d$i[d$d]=new d$ib());d$j.cloneTo(d$l),d$e.data[d$d]=d$l.elements;}else if(d$j instanceof laya.d3.math.Vector4){var d$m=d$i[d$d]||(d$i[d$d]=new d$jb());d$j.cloneTo(d$m),d$e.data[d$d]=d$m.elements;}else if(d$j instanceof laya.d3.math.Matrix4x4){var d$n=d$i[d$d]||(d$i[d$d]=new d$ab());d$j.cloneTo(d$n),d$e.data[d$d]=d$n.elements;}else d$j instanceof laya.d3.resource.BaseTexture&&(d$i[d$d]=d$j,d$e.data[d$d]=d$j);}},d$b.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$q(0,d$b,"alphaTestValue",function(){return this._getNumber(0);},function(d$a){this._setNumber(0,d$a);}),d$q(0,d$b,"alphaTest",function(){return this._alphaTest;},function(d$a){(this._alphaTest=d$a)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST);}),d$a.__init__=function(){d$a.SHADERDEFINE_ALPHATEST=d$a.shaderDefines.registerDefine("ALPHATEST");},d$a.RENDERQUEUE_OPAQUE=2e3,d$a.RENDERQUEUE_ALPHATEST=2450,d$a.RENDERQUEUE_TRANSPARENT=3e3,d$a.CULL_NONE=0,d$a.CULL_FRONT=1,d$a.CULL_BACK=2,d$a.BLEND_DISABLE=0,d$a.BLEND_ENABLE_ALL=1,d$a.BLEND_ENABLE_SEPERATE=2,d$a.BLENDPARAM_ZERO=0,d$a.BLENDPARAM_ONE=1,d$a.BLENDPARAM_SRC_COLOR=768,d$a.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,d$a.BLENDPARAM_DST_COLOR=774,d$a.BLENDPARAM_ONE_MINUS_DST_COLOR=775,d$a.BLENDPARAM_SRC_ALPHA=770,d$a.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,d$a.BLENDPARAM_DST_ALPHA=772,d$a.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,d$a.BLENDPARAM_SRC_ALPHA_SATURATE=776,d$a.BLENDEQUATION_ADD=0,d$a.BLENDEQUATION_SUBTRACT=1,d$a.BLENDEQUATION_REVERSE_SUBTRACT=2,d$a.DEPTHTEST_OFF=0,d$a.DEPTHTEST_NEVER=512,d$a.DEPTHTEST_LESS=513,d$a.DEPTHTEST_EQUAL=514,d$a.DEPTHTEST_LEQUAL=515,d$a.DEPTHTEST_GREATER=516,d$a.DEPTHTEST_NOTEQUAL=517,d$a.DEPTHTEST_GEQUAL=518,d$a.DEPTHTEST_ALWAYS=519,d$a.SHADERDEFINE_ALPHATEST=1,d$a.ALPHATESTVALUE=0,d$n(d$a,["shaderDefines",function(){return this.shaderDefines=new d$mb();}]),d$a;}(d$s),d$Fb=function(d$a){function d$b(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,d$b.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1;}d$p(d$b,"laya.d3.resource.BaseTexture",d$s);var d$c=d$b.prototype;return d$q(0,d$c,"width",function(){return this._width;}),d$q(0,d$c,"repeat",function(){return this._repeat;},function(d$a){if(this._repeat!==d$a&&(this._repeat=d$a,this._source)){var d$b=d$F.mainContext;d$G.bindTexture(d$b,this._type,this._source),d$w.isPOT(this._width,this._height)&&this._repeat?(d$b.texParameteri(this._type,10242,10497),d$b.texParameteri(this._type,10243,10497)):(d$b.texParameteri(this._type,10242,33071),d$b.texParameteri(this._type,10243,33071));}}),d$q(0,d$c,"height",function(){return this._height;}),d$q(0,d$c,"magFifter",function(){return this._magFifter;},function(d$a){(this._magFifter=d$a)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(d$a);}),d$q(0,d$c,"wrapModeV",function(){return this._wrapModeV;}),d$q(0,d$c,"size",function(){return this._size;}),d$q(0,d$c,"wrapModeU",function(){return this._wrapModeU;}),d$q(0,d$c,"mipmap",function(){return this._mipmap;},function(d$a){this._mipmap=d$a,this._mipmap!=d$a&&this._conchTexture&&this._conchTexture.setMipMap(d$a);}),d$q(0,d$c,"minFifter",function(){return this._minFifter;},function(d$a){this._minFifter=d$a,this._minFifter!=d$a&&this._conchTexture&&this._conchTexture.setMinFifter(d$a);}),d$q(0,d$c,"format",function(){return this._format;}),d$q(0,d$c,"source",function(){return this.activeResource(),this._source;}),d$q(0,d$c,"defaulteTexture",function(){return d$Sb.grayTexture;}),d$b.WARPMODE_REPEAT=0,d$b.WARPMODE_CLAMP=1,d$b;}(),d$Gb=function(d$a){function d$b(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,d$b.__super.call(this),this._boundingBoxCorners=d$d(8,null);}d$p(d$b,"laya.d3.resource.models.BaseMesh",d$s);var d$c=d$b.prototype;return d$c._getPositions=function(){throw new Error("未Override,请重载该属性！");},d$c._generateBoundingObject=function(){this._boundingSphere=new d$_a(new d$ib(),0),d$_a.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new d$Za(new d$ib(),new d$ib()),d$Za.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners);},d$c.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！");},d$c.getRenderElement=function(d$a){throw new Error("未Override,请重载该属性！");},d$q(0,d$c,"subMeshCount",function(){return this._subMeshCount;}),d$q(0,d$c,"boundingBox",function(){return this._boundingBox;}),d$q(0,d$c,"boundingBoxCorners",function(){return this._boundingBoxCorners;}),d$q(0,d$c,"boundingSphere",function(){return this._boundingSphere;}),d$b;}(),d$Hb=(function(d$a){function d$b(){d$b.__super.call(this);}d$p(d$b,"laya.d3.component.Script",d$vb);var d$c=d$b.prototype;d$c.onTriggerEnter=function(d$a){},d$c.onTriggerExit=function(d$a){},d$c.onTriggerStay=function(d$a){},d$q(0,d$c,"isSingleton",function(){return d$b._isSingleton;}),d$b._isSingleton=!1;}(),function(d$a){function d$b(d$a){this._owner=null,this._sharedMesh=null,d$b.__super.call(this),this._owner=d$a;}d$p(d$b,"laya.d3.core.MeshFilter",d$a);var d$c=d$b.prototype;return d$c._sharedMeshLoaded=function(){this.event("loaded");},d$c._destroy=function(){d$a.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null);},d$q(0,d$c,"sharedMesh",function(){return this._sharedMesh;},function(d$a){var d$b=this._sharedMesh;d$b&&d$b._removeReference(),(this._sharedMesh=d$a)._addReference(),this.event("meshchanged",[this,d$b,d$a]),d$a.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded);}),d$q(0,d$c,"_isAsyncLoaded",function(){return this._sharedMesh.loaded;}),d$q(0,d$c,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners;}),d$q(0,d$c,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere;}),d$q(0,d$c,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox;}),d$b;}(d$wb)),d$Ib=function(d$a){function d$b(d$a){d$b.__super.call(this,d$a),d$a.meshFilter.on("meshchanged",this,this._onMeshChanged);}d$p(d$b,"laya.d3.core.MeshRender",d$xb);var d$c=d$b.prototype;return d$c._onMeshChanged=function(d$a,d$b,d$c){d$c.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:d$c.once("loaded",this,this._onMeshLoaed);},d$c._onMeshLoaed=function(d$a,d$b){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0;},d$c._calculateBoundingSphereByInitSphere=function(d$a){var d$b=NaN,d$c=this._owner.transform,d$d=d$c.scale.elements,d$e=Math.abs(d$d[0]),d$f=Math.abs(d$d[1]),d$i=Math.abs(d$d[2]);d$b=d$f<=d$e&&d$i<=d$e?d$e:d$i<=d$f?d$f:d$i,d$ib.transformCoordinate(d$a.center,d$c.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=d$a.radius*d$b;},d$c._calculateBoundBoxByInitCorners=function(d$a){for(var d$b=this._owner.transform.worldMatrix,d$c=0;d$c<8;d$c++)d$ib.transformCoordinate(d$a[d$c],d$b,d$xb._tempBoundBoxCorners[d$c]);d$Za.createfromPoints(d$xb._tempBoundBoxCorners,this._boundingBox);},d$c._calculateBoundingSphere=function(){var d$a=this._owner.meshFilter.sharedMesh;null==d$a||null==d$a.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(d$a.boundingSphere);},d$c._calculateBoundingBox=function(){var d$a=this._owner.meshFilter.sharedMesh;null==d$a||null==d$a.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(d$a.boundingBoxCorners);},d$c._renderUpdate=function(d$a){var d$b=this._owner.transform;if(d$b){this._setShaderValueMatrix4x4(0,d$b.worldMatrix);var d$c=this._owner.getProjectionViewWorldMatrix(d$a);this._setShaderValueMatrix4x4(1,d$c);}else this._setShaderValueMatrix4x4(0,d$ab.DEFAULT),this._setShaderValueMatrix4x4(1,d$a);return d$tb.debugMode&&this._renderRenderableBoundBox(),!0;},d$b;}(),d$Jb=function(d$b){function d$d(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,d$d.__super.call(this),this._renderState=new d$Y(),this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new d$ob(),this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new d$ba(),this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new d$ib(.7,.7,.7),this.ambientColor=new d$ib(.212,.227,.259),d$F.shaderHighPrecision&&this.addShaderDefine(d$Ab.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[];}d$p(d$d,"laya.d3.core.scene.Scene",d$b);var d$a=d$d.prototype;return d$x.imps(d$a,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),d$a._setUrl=function(d$a){this._url=d$a;},d$a._getGroup=function(){return this._group;},d$a._setGroup=function(d$a){this._group=d$a;},d$a._display=function(){d$x.stage._scenes.push(this),d$x.stage._scenes.sort(d$d._sortScenes);for(var d$a=0,d$b=this._childs.length;d$a<d$b;d$a++){var d$c=this._childs[d$a];d$c.active&&d$c._activeHierarchy();}},d$a._unDisplay=function(){var d$a=d$x.stage._scenes;d$a.splice(d$a.indexOf(this),1);for(var d$b=0,d$c=this._childs.length;d$b<d$c;d$b++){var d$d=this._childs[d$b];d$d.active&&d$d._inActiveHierarchy();}},d$a._addChild3D=function(d$a){d$a.transform._onWorldTransform(),d$a._setBelongScene(this),this.displayedInStage&&d$a.active&&d$a._activeHierarchy();},d$a._removeChild3D=function(d$a){d$a.transform.parent=null,this.displayedInStage&&d$a.active&&d$a._inActiveHierarchy(),d$a._setUnBelongScene();},d$a.initOctree=function(d$a,d$b,d$c,d$d,d$e){void 0===d$e&&(d$e=6),this.treeSize=new d$ib(d$a,d$b,d$c),this.treeLevel=d$e,this.treeRoot=new d$Z(this,0),this.treeRoot.init(d$d,this.treeSize);},d$a._prepareUpdateToRenderState=function(d$a,d$b){d$b.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,d$b.scene=this;},d$a._prepareSceneToRender=function(d$a){var d$b=this._lights.length;if(0<d$b)for(var d$c=0,d$d=0;d$d<d$b&&!(this._lights[d$d]._prepareToScene(d$a)&&++d$c>=this._enableLightCount);d$d++);},d$a._updateChilds=function(d$a){for(var d$b=0,d$c=this._childs.length;d$b<d$c;++d$b)this._childs[d$b]._update(d$a);},d$a._preRenderScene=function(d$a,d$b,d$c){var d$d,d$e=d$b._viewMatrix,d$f=d$b._projectionMatrix,d$i=d$b._projectionViewMatrix,d$j=0,d$k=d$b.camera;for(d$k.useOcclusionCulling?this.treeRoot?d$ca.renderObjectCullingOctree(d$c,this,d$k,d$e,d$f,d$i):d$ca.renderObjectCulling(d$c,this,d$k,d$e,d$f,d$i):d$ca.renderObjectCullingNoBoundFrustum(this,d$k,d$e,d$f,d$i),d$j=0,d$d=this._quenes.length;d$j<d$d;d$j++)this._quenes[d$j]&&this._quenes[d$j]._preRender(d$b);},d$a._clear=function(d$a,d$b){var d$c=d$b._viewport,d$d=d$b.camera,d$e=d$c.x,d$f=d$d.renderTargetSize.height-d$c.y-d$c.height,d$i=d$c.width,d$j=d$c.height;d$a.viewport(d$e,d$f,d$i,d$j);var d$k=256,d$l=d$d.renderTarget;switch(d$d.clearFlag){case 0:var d$m=d$d.clearColor;if(d$m){d$a.enable(3089),d$a.scissor(d$e,d$f,d$i,d$j);var d$n=d$m.elements;d$a.clearColor(d$n[0],d$n[1],d$n[2],d$n[3]),d$k|=16384;}if(d$l)switch(d$m||(d$k=16384),d$l.depthStencilFormat){case 33189:d$k|=256;break;case 36168:d$k|=1024;break;case 34041:d$k|=256,d$k|=1024;}d$a.clear(d$k),d$m&&d$a.disable(3089);break;case 1:case 2:if(d$l)switch(d$k=16384,d$l.depthStencilFormat){case 33189:d$k|=256;break;case 36168:d$k|=1024;break;case 34041:d$k|=256,d$k|=1024;}d$a.clear(d$k);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.");}},d$a._renderScene=function(d$a,d$b){var d$c,d$d,d$e=d$b.camera,d$f=0;for(d$f=0;d$f<2;d$f++)(d$d=this._quenes[d$f])&&(d$e.renderTarget?d$d._render(d$b,!0):d$d._render(d$b,!1));if(1===d$e.clearFlag){var d$i=d$e.sky;d$i&&(d$G.setCullFace(d$a,!1),d$G.setDepthFunc(d$a,515),d$G.setDepthMask(d$a,!1),d$i._render(d$b),d$G.setDepthFunc(d$a,513),d$G.setDepthMask(d$a,!0));}for(d$f=2,d$c=this._quenes.length;d$f<d$c;d$f++)(d$d=this._quenes[d$f])&&(d$d._sortAlpha(d$b.camera.transform.position),d$e.renderTarget?d$d._render(d$b,!0):d$d._render(d$b,!1));},d$a._set3DRenderConfig=function(d$a){d$a.disable(3042),d$G._blend=!1,d$a.blendFunc(770,771),d$G._sFactor=770,d$G._dFactor=771,d$a.disable(2929),d$G._depthTest=!1,d$a.enable(2884),d$G._cullFace=!0,d$a.depthMask(1),d$G._depthMask=!0,d$a.frontFace(2304),d$G._frontFace=2304;},d$a._set2DRenderConfig=function(d$a){d$G.setBlend(d$a,!0),d$G.setBlendFunc(d$a,1,771),d$G.setDepthTest(d$a,!1),d$G.setCullFace(d$a,!1),d$G.setDepthMask(d$a,!0),d$G.setFrontFace(d$a,2305),d$a.viewport(0,0,d$m.width,d$m.height);},d$a._parseCustomProps=function(d$a,d$b,d$c,d$d){var d$e=d$d.customProps.lightmaps,d$f=d$e.length,d$i=this._lightmaps;d$i.length=d$f;for(var d$j=0;d$j<d$f;d$j++)d$i[d$j]=d$t.getRes(d$b[d$e[d$j].replace(".exr",".png")]);this.setlightmaps(d$i);var d$k=d$d.customProps.ambientColor;d$k&&(this.ambientColor=new d$ib(d$k[0],d$k[1],d$k[2]));var d$l=d$d.customProps.fogColor;d$l&&(this.fogColor=new d$ib(d$l[0],d$l[1],d$l[2]));},d$a._addLight=function(d$a){this._lights.indexOf(d$a)<0&&this._lights.push(d$a);},d$a._removeLight=function(d$a){var d$b=this._lights.indexOf(d$a);0<=d$b&&this._lights.splice(d$b,1);},d$a._updateScene=function(){var d$a=this._renderState;this._prepareUpdateToRenderState(d$F.mainContext,d$a),this._updateComponents(d$a),this._updateChilds(d$a),this._lateUpdateComponents(d$a),this._time+=d$a.elapsedTime/1e3,this._shaderValues.setValue(22,this._time);},d$a._updateSceneConch=function(){var d$a=this._renderState;this._prepareUpdateToRenderState(d$F.mainContext,d$a),this._updateComponents(d$a),this._lateUpdateComponents(d$a),this._prepareSceneToRender(d$a);for(var d$b=0,d$c=this._cameraPool.length;d$b<d$c;d$b++){var d$d=this._cameraPool[d$b];(d$a.camera=d$d)._prepareCameraToRender();}},d$a._preRenderShadow=function(d$a,d$b,d$c,d$d,d$e){this.treeRoot?d$ca.renderShadowObjectCullingOctree(this,d$b,d$c,d$d,d$e):d$ca.renderShadowObjectCulling(this,d$b,d$c,d$d,d$e);for(var d$f=0,d$i=d$c.length;d$f<d$i;d$f++)d$c[d$f]&&d$c[d$f]._preRender(d$a);},d$a._renderShadowMap=function(d$a,d$b,d$c){var d$d=this.parallelSplitShadowMaps[0];d$d._calcAllLightCameraInfo(d$c);var d$e,d$f,d$i,d$j=d$d.PSSMNum;if(this._preRenderShadow(d$b,d$d._lightCulling,d$d._shadowQuenes,d$d._lightVPMatrix[0],d$j),this.addShaderDefine(d$pb.SHADERDEFINE_CAST_SHADOW),1<d$j)for(var d$k=0;d$k<d$j;d$k++)d$e=d$d.getRenderTarget(d$k+1),d$d.beginRenderTarget(d$k+1),d$a.clearColor(1,1,1,1),d$a.clear(16640),d$a.viewport(0,0,d$e.width,d$e.height),d$b.camera=d$i=d$d.getLightCamera(d$k),d$i._prepareCameraToRender(),d$i._prepareCameraViewProject(d$i.viewMatrix,d$i.projectionMatrix),d$b._projectionViewMatrix=d$d._lightVPMatrix[d$k+1],(d$f=d$d._shadowQuenes[d$k])._preRender(d$b),d$f._renderShadow(d$b,!1),d$d.endRenderTarget(d$k+1);else d$e=d$d.getRenderTarget(1),d$d.beginRenderTarget(1),d$a.clearColor(1,1,1,1),d$a.clear(16640),d$a.viewport(0,0,d$e.width,d$e.height),d$b.camera=d$i=d$d.getLightCamera(0),d$i._prepareCameraToRender(),d$i._prepareCameraViewProject(d$i.viewMatrix,d$i.projectionMatrix),d$b._projectionViewMatrix=d$d._lightVPMatrix[0],(d$f=d$d._shadowQuenes[0])._preRender(d$b),d$f._renderShadow(d$b,!0),d$d.endRenderTarget(1);this.removeShaderDefine(d$pb.SHADERDEFINE_CAST_SHADOW);},d$a.addTreeNode=function(d$a){this.treeRoot.addTreeNode(d$a);},d$a.removeTreeNode=function(d$a){this.treeSize&&d$a._treeNode&&d$a._treeNode.removeObject(d$a);},d$a.setlightmaps=function(d$a){this._lightmaps=d$a;for(var d$b=0,d$c=this._renderableSprite3Ds.length;d$b<d$c;d$b++)this._renderableSprite3Ds[d$b]._render._applyLightMapParams();},d$a.getlightmaps=function(){return this._lightmaps;},d$a.addChildAt=function(d$a,d$b){if(!(d$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(d$a&&d$a.__className));if(!d$a||this.destroyed||d$a===this)return d$a;if(d$a.zOrder&&this._set$P("hasZorder",!0),0<=d$b&&d$b<=this._childs.length){if(d$a._parent===this){var d$c=this.getChildIndex(d$a);this._childs.splice(d$c,1),this._childs.splice(d$b,0,d$a),this.conchModel&&(this.conchModel.removeChild(d$a.conchModel),this.conchModel.addChildAt(d$a.conchModel,d$b)),this._childChanged();}else d$a.parent&&d$a.parent.removeChild(d$a),this._childs===d$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(d$b,0,d$a),this.conchModel&&this.conchModel.addChildAt(d$a.conchModel,d$b),(d$a.parent=this)._addChild3D(d$a);return d$a;}throw new Error("appendChildAt:The index is out of bounds");},d$a.addChild=function(d$a){if(!(d$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!d$a||this.destroyed||d$a===this)return d$a;if(d$a.zOrder&&this._set$P("hasZorder",!0),d$a._parent===this){var d$b=this.getChildIndex(d$a);d$b!==this._childs.length-1&&(this._childs.splice(d$b,1),this._childs.push(d$a),this.conchModel&&(this.conchModel.removeChild(d$a.conchModel),this.conchModel.addChildAt(d$a.conchModel,this._childs.length-1)),this._childChanged());}else d$a.parent&&d$a.parent.removeChild(d$a),this._childs===d$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(d$a),this.conchModel&&this.conchModel.addChildAt(d$a.conchModel,this._childs.length-1),(d$a.parent=this)._childChanged(),this._addChild3D(d$a);return d$a;},d$a.removeChildAt=function(d$a){var d$b=this.getChildAt(d$a);return d$b&&(this._removeChild3D(d$b),this._childs.splice(d$a,1),this.conchModel&&this.conchModel.removeChild(d$b.conchModel),d$b.parent=null),d$b;},d$a.removeChildren=function(d$a,d$b){if(void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=2147483647),this._childs&&0<this._childs.length){var d$c=this._childs;if(0===d$a&&d$f<=d$b){var d$d=d$c;this._childs=d$l.ARRAY_EMPTY;}else d$d=d$c.splice(d$a,d$b-d$a);for(var d$e=0,d$f=d$d.length;d$e<d$f;d$e++)this._removeChild3D(d$d[d$e]),d$d[d$e].parent=null,this.conchModel&&this.conchModel.removeChild(d$d[d$e].conchModel);}return this;},d$a.addFrustumCullingObject=function(d$a){this.treeRoot?this.addTreeNode(d$a):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(d$a):this._cullingRenders[this._cullingRendersLength]=d$a,d$a._indexInSceneFrustumCullingObjects=this._cullingRendersLength++);},d$a.removeFrustumCullingObject=function(d$a){if(this.treeRoot)this.removeTreeNode(d$a);else{this._cullingRendersLength--;var d$b=d$a._indexInSceneFrustumCullingObjects;if(d$b!==this._cullingRendersLength){var d$c=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[d$b]=d$c)._indexInSceneFrustumCullingObjects=d$b,d$a._indexInSceneFrustumCullingObjects=-1;}}},d$a.getRenderQueue=function(d$a){return d$a<3e3?this._quenes[1]||(this._quenes[1]=new d$X(this)):this._quenes[2]||(this._quenes[2]=new d$X(this));},d$a.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new d$X(this);},d$a.addShaderDefine=function(d$a){this._shaderDefineValue|=d$a;},d$a.removeShaderDefine=function(d$a){this._shaderDefineValue&=~d$a;},d$a.addScript=function(d$a){return this._addComponent(d$a);},d$a.getScriptByType=function(d$a,d$b){return void 0===d$b&&(d$b=0),this._getComponentByType(d$a,d$b);},d$a.getScriptsByType=function(d$a,d$b){this._getComponentsByType(d$a,d$b);},d$a.getScriptByIndex=function(d$a){return this._getComponentByIndex(d$a);},d$a.removeScriptByType=function(d$a,d$b){void 0===d$b&&(d$b=0),this._removeComponentByType(d$a,d$b);},d$a.removeScriptsByType=function(d$a){this._removeComponentByType(d$a);},d$a.removeAllScript=function(){this._removeAllComponent();},d$a.render=function(d$a,d$b,d$c){(d$r._context.ctx._renderKey=0)<this._childs.length&&d$a.addRenderObject(this);},d$a.renderSubmit=function(){var d$a=d$F.mainContext,d$b=this._renderState;this._set3DRenderConfig(d$a),this._prepareSceneToRender(this._renderState);var d$c,d$d=0,d$e=0;if(d$tb.debugMode||d$Z.debugMode)for(d$d=0,d$e=this._cameraPool.length;d$d<d$e;d$d++)d$c=this._cameraPool[d$d],d$tb._debugPhasorSprite.begin(1,d$c),d$c.activeInHierarchy&&d$c._renderCamera(d$a,d$b,this),d$tb._debugPhasorSprite.end();else for(d$d=0,d$e=this._cameraPool.length;d$d<d$e;d$d++)(d$c=this._cameraPool[d$d]).activeInHierarchy&&d$c._renderCamera(d$a,d$b,this);return this._set2DRenderConfig(d$a),1;},d$a.onAsynLoaded=function(d$a,d$b,d$c){var d$d=d$b[0];if("Scene"!==d$d.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var d$e=d$b[1];d$sb._createNodeByJson(this,d$d,this,d$e),this.event("hierarchyloaded",[this]),this.__loaded=!0;},d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),this.destroyed||(d$b.prototype.destroy.call(this,d$a),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,d$t.clearRes(this.url),this.loaded||d$tb._cancelLoadByUrl(this.url));},d$a.getRenderType=function(){return 0;},d$a.releaseRender=function(){},d$a._addComponent=function(d$a){var d$b,d$c=this._componentsMap.indexOf(d$a);if(-1===d$c)d$b=[],this._componentsMap.push(d$a),this._typeComponentsIndices.push(d$b);else if(d$b=this._typeComponentsIndices[d$c],this._components[d$b[0]].isSingleton)throw new Error("无法单实例创建"+d$a+"组件，"+d$a+"组件已存在！");var d$d=d$e.getInstance(d$a);d$b.push(this._components.length),this._components.push(d$d);return d$d._initialize(this),d$d;},d$a._removeComponent=function(d$a,d$b){var d$c=this._typeComponentsIndices[d$a],d$d=d$c[d$b],d$e=this._components[d$d];this._components.splice(d$d,1),d$c.splice(d$b,1),0===d$c.length&&(this._typeComponentsIndices.splice(d$a,1),this._componentsMap.splice(d$a,1));for(var d$f=0,d$i=this._componentsMap.length;d$f<d$i;d$f++)for(var d$j=(d$c=this._typeComponentsIndices[d$f]).length-1;0<=d$j;d$j--){var d$k=d$c[d$j];if(!(d$d<d$k))break;d$c[d$j]=--d$k;}d$e._destroy();},d$a._getComponentByType=function(d$a,d$b){void 0===d$b&&(d$b=0);var d$c=this._componentsMap.indexOf(d$a);return-1===d$c?null:this._components[this._typeComponentsIndices[d$c][d$b]];},d$a._getComponentsByType=function(d$a,d$b){var d$c=this._componentsMap.indexOf(d$a);if(-1!==d$c){var d$d=this._typeComponentsIndices[d$c],d$e=d$d.length;d$b.length=d$e;for(var d$f=0;d$f<d$e;d$f++)d$b[d$f]=this._components[d$d[d$f]];}else d$b.length=0;},d$a._getComponentByIndex=function(d$a){return this._components[d$a];},d$a._removeComponentByType=function(d$a,d$b){void 0===d$b&&(d$b=0);var d$c=this._componentsMap.indexOf(d$a);-1!==d$c&&this._removeComponent(d$c,d$b);},d$a._removeComponentsByType=function(d$a){var d$b=this._componentsMap.indexOf(d$a);if(-1!==d$b)for(var d$c=this._typeComponentsIndices[d$b],d$d=0,d$e=d$c.length;d$d<d$e;d$c.length<d$e?d$e--:d$d++)this._removeComponent(d$b,d$d);},d$a._removeAllComponent=function(){for(var d$a=0,d$b=this._componentsMap.length;d$a<d$b;this._componentsMap.length<d$b?d$b--:d$a++)this._removeComponentsByType(this._componentsMap[d$a]);},d$a._updateComponents=function(d$a){for(var d$b=0,d$c=this._components.length;d$b<d$c;d$b++){var d$d=this._components[d$b];!d$d.started&&(d$d._start(d$a),d$d.started=!0),d$d.enable&&d$d._update(d$a);}},d$a._lateUpdateComponents=function(d$a){for(var d$b=0;d$b<this._components.length;d$b++){var d$c=this._components[d$b];!d$c.started&&(d$c._start(d$a),d$c.started=!0),d$c.enable&&d$c._lateUpdate(d$a);}},d$a._preRenderUpdateComponents=function(d$a){for(var d$b=0;d$b<this._components.length;d$b++){var d$c=this._components[d$b];!d$c.started&&(d$c._start(d$a),d$c.started=!0),d$c.enable&&d$c._preRenderUpdate(d$a);}},d$a._postRenderUpdateComponents=function(d$a){for(var d$b=0;d$b<this._components.length;d$b++){var d$c=this._components[d$b];!d$c.started&&(d$c._start(d$a),d$c.started=!0),d$c.enable&&d$c._postRenderUpdate(d$a);}},d$q(0,d$a,"_loaded",null,function(d$a){this.__loaded=d$a;}),d$q(0,d$a,"fogColor",function(){return this._fogColor;},function(d$a){this._fogColor=d$a,this._shaderValues.setValue(0,d$a.elements);}),d$q(0,d$a,"enableFog",function(){return this._enableFog;},function(d$a){this._enableFog!==d$a&&((this._enableFog=d$a)?(this.addShaderDefine(d$Ab.SHADERDEFINE_FOG),this.removeShaderDefine(d$Ab.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(d$Ab.SHADERDEFINE_FOG));}),d$q(0,d$a,"url",function(){return this._url;}),d$q(0,d$a,"loaded",function(){return this.__loaded;}),d$q(0,d$a,"enableDepthFog",function(){return this._enableDepthFog;},function(d$a){this._enableDepthFog!=d$a&&((this._enableDepthFog=d$a)?(this.addShaderDefine(d$Ab.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(d$Ab.SHADERDEFINE_FOG)):this.removeShaderDefine(d$Ab.SAHDERDEFINE_DEPTHFOG));}),d$q(0,d$a,"fogStart",function(){return this._fogStart;},function(d$a){this._fogStart=d$a,this._shaderValues.setValue(1,d$a);}),d$q(0,d$a,"fogRange",function(){return this._fogRange;},function(d$a){this._fogRange=d$a,this._shaderValues.setValue(2,d$a);}),d$q(0,d$a,"ambientColor",function(){return this._ambientColor;},function(d$a){this._ambientColor=d$a,this._shaderValues.setValue(21,d$a.elements);}),d$q(0,d$a,"scene",function(){return this;}),d$q(0,d$a,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice();}),d$d._sortScenes=function(d$a,d$b){if(d$a.parent!==d$x.stage||d$b.parent!==d$x.stage)return d$a.parent!==d$x.stage&&d$b.parent!==d$x.stage?d$d._sortScenes(d$a.parent,d$b.parent):d$a.parent===d$x.stage?-1:1;var d$c=d$x.stage._childs;return d$c.indexOf(d$a)-d$c.indexOf(d$b);},d$d.load=function(d$a){return d$x.loader.create(d$a,null,null,d$d);},d$d.FOGCOLOR=0,d$d.FOGSTART=1,d$d.FOGRANGE=2,d$d.LIGHTDIRECTION=3,d$d.LIGHTDIRCOLOR=4,d$d.POINTLIGHTPOS=5,d$d.POINTLIGHTRANGE=6,d$d.POINTLIGHTATTENUATION=7,d$d.POINTLIGHTCOLOR=8,d$d.SPOTLIGHTPOS=9,d$d.SPOTLIGHTDIRECTION=10,d$d.SPOTLIGHTSPOT=11,d$d.SPOTLIGHTRANGE=12,d$d.SPOTLIGHTATTENUATION=13,d$d.SPOTLIGHTCOLOR=14,d$d.SHADOWDISTANCE=15,d$d.SHADOWLIGHTVIEWPROJECT=16,d$d.SHADOWMAPPCFOFFSET=17,d$d.SHADOWMAPTEXTURE1=18,d$d.SHADOWMAPTEXTURE2=19,d$d.SHADOWMAPTEXTURE3=20,d$d.AMBIENTCOLOR=21,d$d.TIME=22,d$d;}(d$z),d$Kb=function(d$a){function d$b(d$a){d$b.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new d$ab(),this._shaderValues=new d$ob(),this._colliders=[],this._id=++d$b._uniqueIDCounter,this._transform=new d$yb(this),this.name=d$a||"Sprite3D-"+d$b._nameNumberCounter++,this.layer=d$I.currentCreationLayer,this.active=!0;}d$p(d$b,"laya.d3.core.Sprite3D",d$Db);var d$c=d$b.prototype;return d$x.imps(d$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),d$c._setUrl=function(d$a){this._url=d$a;},d$c._getGroup=function(){return this._group;},d$c._setGroup=function(d$a){this._group=d$a;},d$c._addChild3D=function(d$a){d$a.transform.parent=this.transform,this._hierarchyAnimator&&(!d$a._hierarchyAnimator&&d$a._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(d$a,!0,[d$a.name])),this._scene&&(d$a._setBelongScene(this._scene),this._activeInHierarchy&&d$a._active&&d$a._activeHierarchy());},d$c._removeChild3D=function(d$a){d$a.transform.parent=null,this._scene&&(this._activeInHierarchy&&d$a._active&&d$a._inActiveHierarchy(),d$a._setUnBelongScene()),this._hierarchyAnimator&&(d$a._hierarchyAnimator==this._hierarchyAnimator&&d$a._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(d$a,!1,[d$a.name]));},d$c._parseBaseCustomProps=function(d$a){var d$b=this.transform.localPosition;d$a.translate?(d$b.fromArray(d$a.translate),d$b.x*=100,d$b.y*=100,d$b.z*=100):d$b.elements.fill(0),this.transform.localPosition=d$b;var d$c=this.transform.localRotation;d$a.rotation?d$c.fromArray(d$a.rotation):d$c.fromArray([0,0,0,-1]),this.transform.localRotation=d$c;var d$d=this.transform.localScale;d$a.scale?d$d.fromArray(d$a.scale):d$d.elements.fill(1),this.transform.localScale=d$d;var d$e=d$a.layer;null!=d$e&&(this.layer=d$I.getLayerByNumber(d$e));},d$c._parseCustomComponent=function(d$a,d$b,d$c){for(var d$d in d$c){var d$e=d$c[d$d];switch(d$d){case"Animator":var d$f=this.addComponent(Animator);if(d$e.avatarPath)d$f.avatar=d$t.getRes(d$b[d$e.avatarPath]);else{var d$i=d$e.avatar;if(d$i){d$f.avatar=d$t.getRes(d$b[d$i.path]);var d$j=d$i.linkSprites;d$j&&d$a.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[d$f,d$j]);}}for(var d$k=d$e.clipPaths,d$l=d$k.length,d$m=0;d$m<d$l;d$m++)d$f.addClip(d$t.getRes(d$b[d$k[d$m]]));d$f.clip=d$t.getRes(d$b[d$k[0]]);var d$n=d$e.playOnWake;void 0!==d$n&&(d$f.playOnWake=d$n);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var d$o=this.addComponent(SphereCollider);d$o.isTrigger=d$e.isTrigger;var d$p=d$o.center;d$p.fromArray(d$e.center),d$o.center=d$p,d$o.radius=d$e.radius;break;case"BoxCollider":var d$q=this.addComponent(BoxCollider);d$q.isTrigger=d$e.isTrigger,d$q.center.fromArray(d$e.center);var d$r=d$q.size;d$r.fromArray(d$e.size),d$q.size=d$r;break;case"MeshCollider":this.addComponent(MeshCollider);}}},d$c._onRootNodeHierarchyLoaded=function(d$a,d$b){for(var d$c in d$b){for(var d$d=this,d$e=d$b[d$c],d$f=0,d$i=d$e.length;d$f<d$i;d$f++){var d$j=d$e[d$f];if(""===d$j)break;if(!(d$d=d$d.getChildByName(d$j)))break;}d$d&&d$a.linkSprite3DToAvatarNode(d$c,d$d);}},d$c._setHierarchyAnimator=function(d$a,d$b){this._changeHierarchyAnimator(d$a);for(var d$c=0,d$d=this._childs.length;d$c<d$d;d$c++){var d$e=this._childs[d$c];d$e._hierarchyAnimator==d$b&&d$e._setHierarchyAnimator(d$a,d$b);}},d$c._clearHierarchyAnimator=function(d$a,d$b){this._changeHierarchyAnimator(d$b);for(var d$c=0,d$d=this._childs.length;d$c<d$d;d$c++){var d$e=this._childs[d$c];d$e._hierarchyAnimator==d$a&&d$e._clearHierarchyAnimator(d$a,d$b);}},d$c._getAnimatorToLinkSprite3D=function(d$a,d$b,d$c){var d$d=this.getComponentByType(Animator);if(d$d&&(d$d.avatar?d$d.avatar._version||d$a._setAnimatorToLinkAvatar(d$d,d$b):d$a._setAnimatorToLinkSprite3DNoAvatar(d$d,d$b,d$c)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){d$c.unshift(this._parent.name);var d$e=this._parent;d$e._hierarchyAnimator&&d$e._getAnimatorToLinkSprite3D(d$a,d$b,d$c);}},d$c._setAnimatorToLinkSprite3DNoAvatar=function(d$a,d$b,d$c){var d$d=0,d$e=0;for(d$d=0,d$e=d$a.getClipCount();d$d<d$e;d$d++)d$a._handleSpriteOwnersBySprite(d$d,d$b,d$c,this);for(d$d=0,d$e=this._childs.length;d$d<d$e;d$d++){var d$f=this._childs[d$d],d$i=d$c.length;d$c.push(d$f.name),d$f._setAnimatorToLinkSprite3DNoAvatar(d$a,d$b,d$c),d$c.splice(d$i,1);}},d$c._changeHierarchyAnimator=function(d$a){this._hierarchyAnimator=d$a;},d$c._isLinkSpriteToAnimationNode=function(d$a,d$b,d$c){var d$d=d$a._avatarNodes.indexOf(d$b),d$e=d$a._cacheSpriteToNodesMap;if(d$c)this._transform.dummy=d$b.transform,d$a._cacheNodesToSpriteMap[d$d]=d$e.length,d$e.push(d$d);else{this._transform.dummy=null;var d$f=d$a._cacheNodesToSpriteMap[d$d];d$a._cacheNodesToSpriteMap[d$d]=null,d$e.splice(d$f,1);}},d$c._setBelongScene=function(d$a){this._scene=d$a;for(var d$b=0,d$c=this._childs.length;d$b<d$c;d$b++)this._childs[d$b]._setBelongScene(d$a);},d$c._setUnBelongScene=function(){this._scene=null;for(var d$a=0,d$b=this._childs.length;d$a<d$b;d$a++)this._childs[d$a]._setUnBelongScene();},d$c._activeHierarchy=function(){var d$a=0,d$b=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),d$a=0,d$b=this._colliders.length;d$a<d$b;d$a++)this._layer._addCollider(this._colliders[d$a]);for(this.event("activeinhierarchychanged",!0),d$a=0,d$b=this._childs.length;d$a<d$b;d$a++){var d$c=this._childs[d$a];d$c._active&&d$c._activeHierarchy();}},d$c._inActiveHierarchy=function(){var d$a=0,d$b=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),d$a=0,d$b=this._colliders.length;d$a<d$b;d$a++){var d$c=this._colliders[d$a];d$c._clearCollsionMap(),this._layer._removeCollider(d$c);}for(this.event("activeinhierarchychanged",!1),d$a=0,d$b=this._childs.length;d$a<d$b;d$a++){var d$d=this._childs[d$a];d$d._active&&d$d._inActiveHierarchy();}},d$c.addComponent=function(d$a){var d$b,d$c=this._componentsMap.indexOf(d$a);if(-1===d$c)d$b=[],this._componentsMap.push(d$a),this._typeComponentsIndices.push(d$b);else if(d$b=this._typeComponentsIndices[d$c],this._components[d$b[0]].isSingleton)throw new Error("无法单实例创建"+d$a+"组件，"+d$a+"组件已存在！");var d$d=d$e.getInstance(d$a);return d$b.push(this._components.length),this._components.push(d$d),d$d instanceof laya.d3.component.Script&&this._scripts.push(d$d),d$d._initialize(this),d$d;},d$c._removeComponent=function(d$a,d$b){var d$c,d$d=0,d$e=this._typeComponentsIndices[d$a],d$f=d$e[d$b],d$i=this._components[d$f];for(d$i instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(d$i),1),d$e.splice(d$b,1),0===d$e.length&&(this._typeComponentsIndices.splice(d$a,1),this._componentsMap.splice(d$a,1)),d$d=0,d$c=this._componentsMap.length;d$d<d$c;d$d++)for(var d$j=(d$e=this._typeComponentsIndices[d$d]).length-1;0<=d$j;d$j--){var d$k=d$e[d$j];if(!(d$f<d$k))break;d$e[d$j]=--d$k;}d$i._destroy();},d$c._clearSelfRenderObjects=function(){},d$c._addSelfRenderObjects=function(){},d$c._parseCustomProps=function(d$a,d$b,d$c,d$d){},d$c._updateChilds=function(d$a){var d$b=this._childs.length;if(0!==d$b)for(var d$c=0;d$c<d$b;++d$c)this._childs[d$c]._update(d$a);},d$c._getSortID=function(d$a,d$b){return 1e3*d$b.id+d$a._getVertexBuffer().vertexDeclaration.id;},d$c._update=function(d$a){(d$a.owner=this)._activeInHierarchy&&(this._updateComponents(d$a),this._lateUpdateComponents(d$a),d$A.spriteCount++,this._childs.length&&this._updateChilds(d$a));},d$c.getProjectionViewWorldMatrix=function(d$a){return d$ab.multiply(d$a,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix;},d$c.loadHierarchy=function(d$a){this.addChild(laya.d3.core.Sprite3D.load(d$a));},d$c.addChildAt=function(d$a,d$b){if(!(d$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!d$a||this.destroyed||d$a===this)return d$a;if(d$a.zOrder&&this._set$P("hasZorder",!0),0<=d$b&&d$b<=this._childs.length){if(d$a._parent===this){var d$c=this.getChildIndex(d$a);this._childs.splice(d$c,1),this._childs.splice(d$b,0,d$a),this.conchModel&&(this.conchModel.removeChild(d$a.conchModel),this.conchModel.addChildAt(d$a.conchModel,d$b)),this._childChanged();}else d$a.parent&&d$a.parent.removeChild(d$a),this._childs===d$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(d$b,0,d$a),this.conchModel&&this.conchModel.addChildAt(d$a.conchModel,d$b),(d$a.parent=this)._addChild3D(d$a);return d$a;}throw new Error("appendChildAt:The index is out of bounds");},d$c.addChild=function(d$a){if(!(d$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!d$a||this.destroyed||d$a===this)return d$a;if(d$a.zOrder&&this._set$P("hasZorder",!0),d$a._parent===this){var d$b=this.getChildIndex(d$a);d$b!==this._childs.length-1&&(this._childs.splice(d$b,1),this._childs.push(d$a),this.conchModel&&(this.conchModel.removeChild(d$a.conchModel),this.conchModel.addChildAt(d$a.conchModel,this._childs.length-1)),this._childChanged());}else d$a.parent&&d$a.parent.removeChild(d$a),this._childs===d$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(d$a),this.conchModel&&this.conchModel.addChildAt(d$a.conchModel,this._childs.length-1),(d$a.parent=this)._childChanged(),this._addChild3D(d$a);return d$a;},d$c.removeChildAt=function(d$a){var d$b=this.getChildAt(d$a);return d$b&&(this._removeChild3D(d$b),this._childs.splice(d$a,1),this.conchModel&&this.conchModel.removeChild(d$b.conchModel),d$b.parent=null),d$b;},d$c.removeChildren=function(d$a,d$b){if(void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=2147483647),this._childs&&0<this._childs.length){var d$c=this._childs;if(0===d$a&&d$f<=d$b){var d$d=d$c;this._childs=d$l.ARRAY_EMPTY;}else d$d=d$c.splice(d$a,d$b-d$a);for(var d$e=0,d$f=d$d.length;d$e<d$f;d$e++)this._removeChild3D(d$d[d$e]),d$d[d$e].parent=null,this.conchModel&&this.conchModel.removeChild(d$d[d$e].conchModel);}return this;},d$c.onAsynLoaded=function(d$a,d$b,d$c){var d$d=d$b[0];if("Sprite3D"!==d$d.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var d$e=d$b[1];d$sb._createNodeByJson(this,d$d,this,d$e),this.event("hierarchyloaded",[this]),this.__loaded=!0;},d$c.cloneTo=function(d$a){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var d$b=d$a;d$b.name=this.name,d$b._destroyed=this._destroyed,d$b.timer=this.timer,d$b._$P=this._$P,d$b.active=this._active;var d$c=d$b.transform.localPosition;this.transform.localPosition.cloneTo(d$c),d$b.transform.localPosition=d$c;var d$d=d$b.transform.localRotation;this.transform.localRotation.cloneTo(d$d),d$b.transform.localRotation=d$d;var d$e=d$b.transform.localScale;this.transform.localScale.cloneTo(d$e),d$b.transform.localScale=d$e,d$b.isStatic=this.isStatic;var d$f=0,d$i=0;for(d$f=0,d$i=this._componentsMap.length;d$f<d$i;d$f++){var d$j=d$b.addComponent(this._componentsMap[d$f]);this._components[d$f]._cloneTo(d$j);}for(d$f=0,d$i=this._childs.length;d$f<d$i;d$f++)d$b.addChild(this._childs[d$f].clone());var d$k=d$b.getComponentByType(Animator);if(d$k){var d$l=d$k._linkSpritesData;if(d$l)for(var d$m in d$l){for(var d$n=d$l[d$m],d$o=d$b,d$p=0,d$q=d$n.length;d$p<d$q&&(d$o=d$o.getChildByName(d$n[d$p]));d$p++);if(d$o){var d$r=d$k._avatarNodeMap[d$m];d$o._isLinkSpriteToAnimationNode(d$k,d$r,!0);}}}},d$c.clone=function(){var d$a=new this.constructor();return this.cloneTo(d$a),d$a;},d$c.destroy=function(d$a){if(void 0===d$a&&(d$a=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,d$a);var d$b,d$c=0;for(d$c=0,d$b=this._components.length;d$c<d$b;d$c++)this._components[d$c]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,d$t.clearRes(this.url),this.loaded||d$tb._cancelLoadByUrl(this.url);}},d$c._handleSpriteToAvatar=function(d$a,d$b){d$a._avatarNodes;var d$c=d$a._avatarNodeMap[this.name];d$c&&d$c.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(d$a,d$c,d$b);},d$c._setAnimatorToLinkAvatar=function(d$a,d$b){this._handleSpriteToAvatar(d$a,d$b);for(var d$c=0,d$d=this._childs.length;d$c<d$d;d$c++){this._childs[d$c]._setAnimatorToLinkAvatar(d$a,d$b);}},d$q(0,d$c,"activeInHierarchy",function(){return this._activeInHierarchy;}),d$q(0,d$c,"_loaded",null,function(d$a){this.__loaded=d$a;}),d$q(0,d$c,"active",function(){return this._active;},function(d$a){this._active!==d$a&&(this._active=d$a,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(d$a?this._activeHierarchy():this._inActiveHierarchy()));}),d$q(0,d$c,"componentsCount",function(){return this._components.length;}),d$q(0,d$c,"loaded",function(){return this.__loaded;}),d$q(0,d$c,"id",function(){return this._id;}),d$q(0,d$c,"url",function(){return this._url;}),d$q(0,d$c,"layer",function(){return this._layer;},function(d$a){if(this._layer!==d$a){if(!d$a)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var d$b=0,d$c=this._colliders.length;if(this._layer)for(d$b=0;d$b<d$c;d$b++)this._layer._removeCollider(this._colliders[d$b]);for(d$b=0;d$b<d$c;d$b++)d$a._addCollider(this._colliders[d$b]);}this._layer=d$a,this.event("layerchanged",d$a);}}),d$q(0,d$c,"scene",function(){return this._scene;}),d$q(0,d$c,"transform",function(){return this._transform;}),d$b.instantiate=function(d$a,d$b,d$c,d$d,d$e){void 0===d$c&&(d$c=!0);var d$f=d$a.clone();d$b&&d$b.addChild(d$f);var d$i=d$f.transform;if(d$c){var d$j=d$i.worldMatrix;d$a.transform.worldMatrix.cloneTo(d$j),d$i.worldMatrix=d$j;}else d$d&&(d$i.position=d$d),d$e&&(d$i.rotation=d$e);return d$f;},d$b.load=function(d$a){return d$x.loader.create(d$a,null,null,d$b);},d$b.WORLDMATRIX=0,d$b.MVPMATRIX=1,d$b._uniqueIDCounter=0,d$b._nameNumberCounter=0,d$b;}(),d$Lb=function(d$a){function d$m(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],d$m.__super.call(this),!d$a||!d$b)throw"Shader Error";this._id=++d$m._count,this._vs=d$a,this._ps=d$b,this._attributeMap=d$c,this._sceneUniformMap=d$d,this._cameraUniformMap=d$e,this._spriteUniformMap=d$f,this._materialUniformMap=d$i,this._renderElementUniformMap=d$j,this._precompile=d$k,this._define=d$l,this._precompile&&d$m.extCompileObj&&d$m.extCompileFunc?d$m.extCompileFunc.call(d$m.extCompileObj,d$a,d$b,d$l):this.recreateResource();}d$p(d$m,"laya.d3.shader.Shader3D",d$c);var d$b=d$m.prototype;return d$b.recreateResource=function(){d$H.now();this._compile(),this.completeCreate(),this.memorySize=0;},d$b.disposeResource=function(){d$F.mainContext.deleteShader(this._vshader),d$F.mainContext.deleteShader(this._pshader),d$F.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0;},d$b._compile=function(){if(!d$F.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var d$a=[this._vs,this._ps],d$b=d$F.mainContext;if(this._program=d$b.createProgram(),this._vshader=d$m._createShader(d$b,d$a[0],35633),this._pshader=d$m._createShader(d$b,d$a[1],35632),d$b.attachShader(this._program,this._vshader),d$b.attachShader(this._program,this._pshader),d$b.linkProgram(this._program),!d$r.isConchApp&&d$Ab.debugMode&&!d$b.getProgramParameter(this._program,35714))throw d$b.getProgramInfoLog(this._program);var d$c,d$d=0,d$e=0,d$f=0;for(d$f=d$r.isConchApp?d$b.getProgramParameterEx(this._vs,this._ps,"",35721):d$b.getProgramParameter(this._program,35721),d$d=0;d$d<d$f;d$d++){var d$i=null;d$c={vartype:"attribute",ivartype:0,attrib:d$i=d$r.isConchApp?d$b.getActiveAttribEx(this._vs,this._ps,"",d$d):d$b.getActiveAttrib(this._program,d$d),location:d$b.getAttribLocation(this._program,d$i.name),name:d$i.name,type:d$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(d$c);}var d$j=0;for(d$j=d$r.isConchApp?d$b.getProgramParameterEx(this._vs,this._ps,"",35718):d$b.getProgramParameter(this._program,35718),d$d=0;d$d<d$j;d$d++){var d$k=null;d$k=d$r.isConchApp?d$b.getActiveUniformEx(this._vs,this._ps,"",d$d):d$b.getActiveUniform(this._program,d$d),0<(d$c={vartype:"uniform",ivartype:1,attrib:d$i,location:d$b.getUniformLocation(this._program,d$k.name),name:d$k.name,type:d$k.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(d$c.name=d$c.name.substr(0,d$c.name.length-3),d$c.isArray=!0,d$c.location=d$b.getUniformLocation(this._program,d$c.name)),this._uniformParams.push(d$c);}for(d$d=0,d$e=this._attributeParams.length;d$d<d$e;d$d++)(d$c=this._attributeParams[d$d]).indexOfParams=d$d,d$c.index=1,d$c.value=[d$c.location,null],d$c.codename=d$c.name,d$c.name=null!=this._attributeMap[d$c.codename]?this._attributeMap[d$c.codename]:d$c.codename,this._attributeParamsMap.push(d$c.name),this._attributeParamsMap.push(d$c),d$c._this=this,d$c.uploadedValue=[],d$c.fun=this._attribute;for(d$d=0,d$e=this._uniformParams.length;d$d<d$e;d$d++)switch((d$c=this._uniformParams[d$d]).indexOfParams=d$d,d$c.index=1,d$c.value=[d$c.location,null],d$c.codename=d$c.name,null!=this._sceneUniformMap[d$c.codename]?(d$c.name=this._sceneUniformMap[d$c.codename],this._sceneUniformParamsMap.push(d$c.name),this._sceneUniformParamsMap.push(d$c)):null!=this._cameraUniformMap[d$c.codename]?(d$c.name=this._cameraUniformMap[d$c.codename],this._cameraUniformParamsMap.push(d$c.name),this._cameraUniformParamsMap.push(d$c)):null!=this._spriteUniformMap[d$c.codename]?(d$c.name=this._spriteUniformMap[d$c.codename],this._spriteUniformParamsMap.push(d$c.name),this._spriteUniformParamsMap.push(d$c)):null!=this._materialUniformMap[d$c.codename]?(d$c.name=this._materialUniformMap[d$c.codename],this._materialUniformParamsMap.push(d$c.name),this._materialUniformParamsMap.push(d$c)):null!=this._renderElementUniformMap[d$c.codename]?(d$c.name=this._renderElementUniformMap[d$c.codename],this._renderElementUniformParamsMap.push(d$c.name),this._renderElementUniformParamsMap.push(d$c)):console.log("Shader:can't find uinform name:"+d$c.codename+" in shader file."),d$c._this=this,d$c.uploadedValue=[],d$c.type){case 5124:d$c.fun=d$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:d$c.fun=d$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:d$c.fun=d$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:d$c.fun=d$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:d$c.fun=d$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:d$c.fun=this._uniform_sampler2D;break;case 35680:d$c.fun=this._uniform_samplerCube;break;case 35676:d$c.fun=this._uniformMatrix4fv;break;case 35670:d$c.fun=this._uniform1i;break;case 35674:d$c.fun=this._uinformMatrix2fv;break;case 35675:d$c.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!");}}},d$b._attribute=function(d$a,d$b){var d$c=d$F.mainContext,d$d=d$j._enableAtributes,d$e=d$a.location;return d$d[d$e]||d$c.enableVertexAttribArray(d$e),d$c.vertexAttribPointer(d$e,d$b[0],d$b[1],d$b[2],d$b[3],d$b[4]),d$d[d$e]=d$j._bindVertexBuffer,1;},d$b._uniform1f=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b?(d$F.mainContext.uniform1f(d$a.location,d$c[0]=d$b),1):0;},d$b._uniform1fv=function(d$a,d$b){if(d$b.length<4){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]||d$c[3]!==d$b[3]?(d$F.mainContext.uniform1fv(d$a.location,d$b),d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2],d$c[3]=d$b[3],1):0;}return d$F.mainContext.uniform1fv(d$a.location,d$b),1;},d$b._uniform_vec2=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]?(d$F.mainContext.uniform2f(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1]),1):0;},d$b._uniform_vec2v=function(d$a,d$b){if(d$b.length<2){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]||d$c[3]!==d$b[3]?(d$F.mainContext.uniform2fv(d$a.location,d$b),d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2],d$c[3]=d$b[3],1):0;}return d$F.mainContext.uniform2fv(d$a.location,d$b),1;},d$b._uniform_vec3=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]?(d$F.mainContext.uniform3f(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2]),1):0;},d$b._uniform_vec3v=function(d$a,d$b){return d$F.mainContext.uniform3fv(d$a.location,d$b),1;},d$b._uniform_vec4=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]||d$c[3]!==d$b[3]?(d$F.mainContext.uniform4f(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2],d$c[3]=d$b[3]),1):0;},d$b._uniform_vec4v=function(d$a,d$b){return d$F.mainContext.uniform4fv(d$a.location,d$b),1;},d$b._uniformMatrix2fv=function(d$a,d$b){return d$F.mainContext.uniformMatrix2fv(d$a.location,!1,d$b),1;},d$b._uniformMatrix3fv=function(d$a,d$b){return d$F.mainContext.uniformMatrix3fv(d$a.location,!1,d$b),1;},d$b._uniformMatrix4fv=function(d$a,d$b){return d$F.mainContext.uniformMatrix4fv(d$a.location,!1,d$b),1;},d$b._uinformMatrix2fv=function(d$a,d$b){return d$F.mainContext.uniformMatrix2fv(d$a.location,!1,d$b),1;},d$b._uinformMatrix3fv=function(d$a,d$b){return d$F.mainContext.uniformMatrix3fv(d$a.location,!1,d$b),1;},d$b._uniform1i=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b?(d$F.mainContext.uniform1i(d$a.location,d$c[0]=d$b),1):0;},d$b._uniform1iv=function(d$a,d$b){return d$F.mainContext.uniform1iv(d$a.location,d$b),1;},d$b._uniform_ivec2=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]?(d$F.mainContext.uniform2i(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1]),1):0;},d$b._uniform_ivec2v=function(d$a,d$b){return d$F.mainContext.uniform2iv(d$a.location,d$b),1;},d$b._uniform_vec3i=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]?(d$F.mainContext.uniform3i(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2]),1):0;},d$b._uniform_vec3vi=function(d$a,d$b){return d$F.mainContext.uniform3iv(d$a.location,d$b),1;},d$b._uniform_vec4i=function(d$a,d$b){var d$c=d$a.uploadedValue;return d$c[0]!==d$b[0]||d$c[1]!==d$b[1]||d$c[2]!==d$b[2]||d$c[3]!==d$b[3]?(d$F.mainContext.uniform4i(d$a.location,d$c[0]=d$b[0],d$c[1]=d$b[1],d$c[2]=d$b[2],d$c[3]=d$b[3]),1):0;},d$b._uniform_vec4vi=function(d$a,d$b){return d$F.mainContext.uniform4iv(d$a.location,d$b),1;},d$b._uniform_sampler2D=function(d$a,d$b){var d$c=d$b.source||d$b.defaulteTexture.source,d$d=d$F.mainContext,d$e=d$a.uploadedValue;if(null!=d$e[0])return d$d.activeTexture(d$m._TEXTURES[d$e[0]]),d$c&&d$G.bindTexture(d$d,3553,d$c),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return d$e[0]=this._curActTexIndex,d$d.uniform1i(d$a.location,this._curActTexIndex),d$d.activeTexture(d$m._TEXTURES[this._curActTexIndex]),d$c&&d$G.bindTexture(d$d,3553,d$c),this._curActTexIndex++,1;},d$b._uniform_samplerCube=function(d$a,d$b){var d$c=d$b.source||d$b.defaulteTexture.source,d$d=d$F.mainContext,d$e=d$a.uploadedValue;if(null!=d$e[0])return d$d.activeTexture(d$m._TEXTURES[d$e[0]]),d$c?d$G.bindTexture(d$d,34067,d$c):d$G.bindTexture(d$d,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return d$e[0]=this._curActTexIndex,d$d.uniform1i(d$a.location,this._curActTexIndex),d$d.activeTexture(d$m._TEXTURES[this._curActTexIndex]),d$c?d$G.bindTexture(d$d,34067,d$c):d$G.bindTexture(d$d,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1;},d$b._noSetValue=function(d$a){console.log("no....:"+d$a.name);},d$b.bind=function(){return d$c.activeShader=this,(d$c.bindShader=this).activeResource(),d$G.UseProgram(this._program);},d$b.uploadAttributes=function(d$a,d$b){for(var d$c,d$d,d$e=0,d$f=0,d$i=this._attributeParamsMap.length;d$f<d$i;d$f+=2)d$d=this._attributeParamsMap[d$f+1],null!=(d$c=d$a[this._attributeParamsMap[d$f]])&&(d$b&&d$b[d$d.name]&&d$b[d$d.name].bind(),d$e+=d$d.fun.call(this,d$d,d$c));d$A.shaderCall+=d$e;},d$b.uploadAttributesX=function(d$a,d$b){for(var d$c,d$d,d$e=0,d$f=0,d$i=this._attributeParamsMap.length;d$f<d$i;d$f+=2)d$d=this._attributeParamsMap[d$f+1],null!=(d$c=d$a[this._attributeParamsMap[d$f]])&&(d$b._bind(),d$e+=d$d.fun.call(this,d$d,d$c));d$A.shaderCall+=d$e;},d$b.uploadSceneUniforms=function(d$a){for(var d$b,d$c,d$d=0,d$e=0,d$f=this._sceneUniformParamsMap.length;d$e<d$f;d$e+=2)d$c=this._sceneUniformParamsMap[d$e+1],null!=(d$b=d$a[this._sceneUniformParamsMap[d$e]])&&(d$d+=d$c.fun.call(this,d$c,d$b));d$A.shaderCall+=d$d;},d$b.uploadCameraUniforms=function(d$a){for(var d$b,d$c,d$d=0,d$e=0,d$f=this._cameraUniformParamsMap.length;d$e<d$f;d$e+=2)d$c=this._cameraUniformParamsMap[d$e+1],null!=(d$b=d$a[this._cameraUniformParamsMap[d$e]])&&(d$d+=d$c.fun.call(this,d$c,d$b));d$A.shaderCall+=d$d;},d$b.uploadSpriteUniforms=function(d$a){for(var d$b,d$c,d$d=0,d$e=0,d$f=this._spriteUniformParamsMap.length;d$e<d$f;d$e+=2)d$c=this._spriteUniformParamsMap[d$e+1],null!=(d$b=d$a[this._spriteUniformParamsMap[d$e]])&&(d$d+=d$c.fun.call(this,d$c,d$b));d$A.shaderCall+=d$d;},d$b.uploadMaterialUniforms=function(d$a){for(var d$b,d$c,d$d=0,d$e=0,d$f=this._materialUniformParamsMap.length;d$e<d$f;d$e+=2)d$c=this._materialUniformParamsMap[d$e+1],null!=(d$b=d$a[this._materialUniformParamsMap[d$e]])&&(d$d+=d$c.fun.call(this,d$c,d$b));d$A.shaderCall+=d$d;},d$b.uploadRenderElementUniforms=function(d$a){for(var d$b,d$c,d$d=0,d$e=0,d$f=this._renderElementUniformParamsMap.length;d$e<d$f;d$e+=2)d$c=this._renderElementUniformParamsMap[d$e+1],null!=(d$b=d$a[this._renderElementUniformParamsMap[d$e]])&&(d$d+=d$c.fun.call(this,d$c,d$b));d$A.shaderCall+=d$d;},d$m.create=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){return new d$m(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l);},d$m.addInclude=function(d$a,d$b){d$v.addInclude(d$a,d$b);},d$m._createShader=function(d$a,d$b,d$c){var d$d=d$a.createShader(d$c);if(d$a.shaderSource(d$d,d$b),d$a.compileShader(d$d),d$Ab.debugMode&&!d$a.getShaderParameter(d$d,35713))throw d$a.getShaderInfoLog(d$d);return d$d;},d$m.PERIOD_RENDERELEMENT=0,d$m.PERIOD_MATERIAL=1,d$m.PERIOD_SPRITE=2,d$m.PERIOD_CAMERA=3,d$m.PERIOD_SCENE=4,d$m._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],d$m._count=0,d$m._preCompile=!1,d$m.extCompileFunc=null,d$m.extCompileObj=null,d$n(d$m,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680};},"nameKey",function(){return this.nameKey=new d$B();}]),d$m;}(),d$Mb=function(d$j){function d$k(){this._transformUV=null,d$k.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new d$ib(.6,.6,.6)),this._setColor(10,new d$ib(1,1,1)),this._setColor(11,new d$jb(1,1,1,8)),this._setColor(12,new d$ib(1,1,1)),this._setColor(7,new d$jb(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new d$jb(1,1,0,0)),this.renderMode=1;}d$p(d$k,"laya.d3.core.material.StandardMaterial",d$j);var d$a=d$k.prototype;return d$a.disableLight=function(){this._addDisablePublicShaderDefine(d$Ab.SHADERDEFINE_POINTLIGHT|d$Ab.SHADERDEFINE_SPOTLIGHT|d$Ab.SHADERDEFINE_DIRECTIONLIGHT);},d$a.disableFog=function(){this._addDisablePublicShaderDefine(d$Ab.SHADERDEFINE_FOG);},d$a.onAsynLoaded=function(d$a,d$b,d$c){var d$d=d$b[0];if(d$d.version)d$j.prototype.onAsynLoaded.call(this,d$a,d$b,d$c);else{var d$e=d$b[1],d$f=d$d.props;for(var d$i in d$f)this[d$i]=d$f[d$i];d$k._parseStandardMaterial(d$e,this,d$d),this._endLoaded();}},d$a.cloneTo=function(d$a){d$j.prototype.cloneTo.call(this,d$a);var d$b=d$a;this._transformUV&&(d$b._transformUV=this._transformUV.clone());},d$q(0,d$a,"ambientColor",function(){return this._getColor(9);},function(d$a){this._setColor(9,d$a);}),d$q(0,d$a,"ambientTexture",function(){return this._getTexture(5);},function(d$a){d$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,d$a);}),d$q(0,d$a,"renderMode",null,function(d$a){switch(d$a){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(d$k.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.");}this._conchMaterial&&this._conchMaterial.setRenderMode(d$a);}),d$q(0,d$a,"reflectColor",function(){return this._getColor(12);},function(d$a){this._setColor(12,d$a);}),d$q(0,d$a,"tilingOffset",function(){return this._getColor(15);},function(d$a){if(d$a){var d$b=d$a.elements;1!=d$b[0]||1!=d$b[1]||0!=d$b[2]||0!=d$b[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,d$a);}),d$q(0,d$a,"albedo",function(){return this._getColor(7);},function(d$a){this._setColor(7,d$a);}),d$q(0,d$a,"diffuseColor",function(){return this._getColor(10);},function(d$a){this._setColor(10,d$a);}),d$q(0,d$a,"albedoColor",function(){return this._getColor(7);},function(d$a){this._setColor(7,d$a);}),d$q(0,d$a,"specularColor",function(){return this._getColor(11);},function(d$a){this._setColor(11,d$a);}),d$q(0,d$a,"diffuseTexture",function(){return this._getTexture(1);},function(d$a){d$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,d$a);}),d$q(0,d$a,"normalTexture",function(){return this._getTexture(2);},function(d$a){d$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,d$a);}),d$q(0,d$a,"specularTexture",function(){return this._getTexture(3);},function(d$a){d$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,d$a);}),d$q(0,d$a,"emissiveTexture",function(){return this._getTexture(4);},function(d$a){d$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,d$a);}),d$q(0,d$a,"reflectTexture",function(){return this._getTexture(6);},function(d$a){d$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,d$a);}),d$q(0,d$a,"transformUV",function(){return this._transformUV;},function(d$a){this._transformUV=d$a,this._setMatrix4x4(13,d$a.matrix),d$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,d$a.matrix.elements,0);}),d$k.__init__=function(){d$k.SHADERDEFINE_DIFFUSEMAP=d$k.shaderDefines.registerDefine("DIFFUSEMAP"),d$k.SHADERDEFINE_NORMALMAP=d$k.shaderDefines.registerDefine("NORMALMAP"),d$k.SHADERDEFINE_SPECULARMAP=d$k.shaderDefines.registerDefine("SPECULARMAP"),d$k.SHADERDEFINE_EMISSIVEMAP=d$k.shaderDefines.registerDefine("EMISSIVEMAP"),d$k.SHADERDEFINE_AMBIENTMAP=d$k.shaderDefines.registerDefine("AMBIENTMAP"),d$k.SHADERDEFINE_REFLECTMAP=d$k.shaderDefines.registerDefine("REFLECTMAP"),d$k.SHADERDEFINE_UVTRANSFORM=d$k.shaderDefines.registerDefine("UVTRANSFORM"),d$k.SHADERDEFINE_TILINGOFFSET=d$k.shaderDefines.registerDefine("TILINGOFFSET"),d$k.SHADERDEFINE_ADDTIVEFOG=d$k.shaderDefines.registerDefine("ADDTIVEFOG");},d$k.load=function(d$a){return d$x.loader.create(d$a,null,null,d$k);},d$k._parseStandardMaterial=function(d$a,d$b,d$c){var d$d=d$c.customProps,d$e=d$d.ambientColor;d$b.ambientColor=new d$ib(d$e[0],d$e[1],d$e[2]);var d$f=d$d.diffuseColor;d$b.diffuseColor=new d$ib(d$f[0],d$f[1],d$f[2]);var d$i=d$d.specularColor;d$b.specularColor=new d$jb(d$i[0],d$i[1],d$i[2],d$i[3]);var d$j=d$d.reflectColor;d$b.reflectColor=new d$ib(d$j[0],d$j[1],d$j[2]);var d$k=d$d.albedoColor;d$k&&(d$b.albedo=new d$jb(d$k[0],d$k[1],d$k[2],d$k[3]));var d$l=d$d.diffuseTexture.texture2D;d$l&&(d$b.diffuseTexture=d$t.getRes(d$a[d$l]));var d$m=d$d.normalTexture.texture2D;d$m&&(d$b.normalTexture=d$t.getRes(d$a[d$m]));var d$n=d$d.specularTexture.texture2D;d$n&&(d$b.specularTexture=d$t.getRes(d$a[d$n]));var d$o=d$d.emissiveTexture.texture2D;d$o&&(d$b.emissiveTexture=d$t.getRes(d$a[d$o]));var d$p=d$d.ambientTexture.texture2D;d$p&&(d$b.ambientTexture=d$t.getRes(d$a[d$p]));var d$q=d$d.reflectTexture.texture2D;d$q&&(d$b.reflectTexture=d$t.getRes(d$a[d$q]));},d$k.RENDERMODE_OPAQUE=1,d$k.RENDERMODE_OPAQUEDOUBLEFACE=2,d$k.RENDERMODE_CUTOUT=3,d$k.RENDERMODE_CUTOUTDOUBLEFACE=4,d$k.RENDERMODE_TRANSPARENT=13,d$k.RENDERMODE_TRANSPARENTDOUBLEFACE=14,d$k.RENDERMODE_ADDTIVE=15,d$k.RENDERMODE_ADDTIVEDOUBLEFACE=16,d$k.RENDERMODE_DEPTHREAD_TRANSPARENT=5,d$k.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,d$k.RENDERMODE_DEPTHREAD_ADDTIVE=7,d$k.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,d$k.RENDERMODE_NONDEPTH_TRANSPARENT=9,d$k.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,d$k.RENDERMODE_NONDEPTH_ADDTIVE=11,d$k.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,d$k.SHADERDEFINE_DIFFUSEMAP=0,d$k.SHADERDEFINE_NORMALMAP=0,d$k.SHADERDEFINE_SPECULARMAP=0,d$k.SHADERDEFINE_EMISSIVEMAP=0,d$k.SHADERDEFINE_AMBIENTMAP=0,d$k.SHADERDEFINE_REFLECTMAP=0,d$k.SHADERDEFINE_UVTRANSFORM=0,d$k.SHADERDEFINE_TILINGOFFSET=0,d$k.SHADERDEFINE_ADDTIVEFOG=0,d$k.DIFFUSETEXTURE=1,d$k.NORMALTEXTURE=2,d$k.SPECULARTEXTURE=3,d$k.EMISSIVETEXTURE=4,d$k.AMBIENTTEXTURE=5,d$k.REFLECTTEXTURE=6,d$k.ALBEDO=7,d$k.UVANIAGE=8,d$k.MATERIALAMBIENT=9,d$k.MATERIALDIFFUSE=10,d$k.MATERIALSPECULAR=11,d$k.MATERIALREFLECT=12,d$k.UVMATRIX=13,d$k.UVAGE=14,d$k.TILINGOFFSET=15,d$n(d$k,["defaultMaterial",function(){var d$a=new d$k();return d$a.lock=!0,this.defaultMaterial=d$a;},"shaderDefines",function(){return this.shaderDefines=new d$mb(d$Eb.shaderDefines);}]),d$k;}(d$Eb),d$Nb=function(d$a){function d$i(d$a,d$b,d$c,d$d,d$e){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===d$c&&(d$c=35044),void 0===d$d&&(d$d=!1),d$i.__super.call(this),this._indexType=d$a,this._indexCount=d$b,this._bufferUsage=d$c,this._bufferType=34963,this._canRead=d$d;var d$f;if("ushort"==d$a)this._indexTypeByteCount=2;else{if("ubyte"!=d$a)throw new Error("unidentification index type.");this._indexTypeByteCount=1;}d$f=this._indexTypeByteCount*d$b,this._byteLength=d$f,this._bind(),d$j._gl.bufferData(this._bufferType,d$f,this._bufferUsage),this.uri=d$e,d$d?("ushort"==d$a?this._buffer=new Uint16Array(d$b):"ubyte"==d$a&&(this._buffer=new Uint8Array(d$b)),this.memorySize=2*d$f):this.memorySize=d$f;}d$p(d$i,"laya.d3.graphics.IndexBuffer3D",d$a);var d$b=d$i.prototype;return d$b.setData=function(d$a,d$b,d$c,d$d){void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=4294967295);var d$e=0;if("ushort"==this._indexType?(d$e=2,0===d$c&&4294967295===d$d||(d$a=new Uint16Array(d$a.buffer,d$c*d$e,d$d))):"ubyte"==this._indexType&&(d$e=1,0===d$c&&4294967295===d$d||(d$a=new Uint8Array(d$a.buffer,d$c*d$e,d$d))),this._bind(),d$j._gl.bufferSubData(this._bufferType,d$b*d$e,d$a),this._canRead)if(0!==d$b||0!==d$c||4294967295!==d$d){var d$f=this._buffer.length-d$b;d$f<d$d&&(d$d=d$f);for(var d$i=0;d$i<d$d;d$i++)this._buffer[d$b+d$i]=d$a[d$i];}else this._buffer=d$a;},d$b.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!");},d$b.disposeResource=function(){d$a.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0;},d$q(0,d$b,"indexType",function(){return this._indexType;}),d$q(0,d$b,"indexTypeByteCount",function(){return this._indexTypeByteCount;}),d$q(0,d$b,"indexCount",function(){return this._indexCount;}),d$q(0,d$b,"canRead",function(){return this._canRead;}),d$i.INDEXTYPE_UBYTE="ubyte",d$i.INDEXTYPE_USHORT="ushort",d$i.create=function(d$a,d$b,d$c,d$d,d$e){return void 0===d$c&&(d$c=35044),void 0===d$d&&(d$d=!1),new d$i(d$a,d$b,d$c,d$d,d$e);},d$i;}(d$j),d$Ob=function(d$f){function d$i(d$a,d$b,d$c,d$d,d$e){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===d$d&&(d$d=!1),d$i.__super.call(this),this._vertexDeclaration=d$a,this._vertexCount=d$b,this._bufferUsage=d$c,this._bufferType=34962,this._canRead=d$d,this.uri=d$e,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*d$b,this._bind(),d$j._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),d$d&&(this._buffer=new Float32Array(this._byteLength/4));}d$p(d$i,"laya.d3.graphics.VertexBuffer3D",d$f);var d$a=d$i.prototype;return d$a.bindWithIndexBuffer=function(d$a){d$a&&d$a._bind(),this._bind();},d$a.setData=function(d$a,d$b,d$c,d$d){if(void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=4294967295),0===d$c&&4294967295===d$d||(d$a=new Float32Array(d$a.buffer,4*d$c,d$d)),this._bind(),d$j._gl.bufferSubData(this._bufferType,4*d$b,d$a),this._canRead)if(0!==d$b||0!==d$c||4294967295!==d$d){var d$e=this._buffer.length-d$b;d$e<d$d&&(d$d=d$e);for(var d$f=0;d$f<d$d;d$f++)this._buffer[d$b+d$f]=d$a[d$f];}else this._buffer=d$a;},d$a.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!");},d$a.disposeResource=function(){for(var d$a=d$F.mainContext,d$b=this._vertexDeclaration.getVertexElements(),d$c=d$j._enableAtributes,d$d=0,d$e=d$b.length;d$d<d$e;d$d++)d$c[d$d]===this._glBuffer&&(d$a.disableVertexAttribArray(d$d),d$c[d$d]=null);d$f.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0;},d$q(0,d$a,"vertexDeclaration",function(){return this._vertexDeclaration;}),d$q(0,d$a,"vertexCount",function(){return this._vertexCount;}),d$q(0,d$a,"canRead",function(){return this._canRead;}),d$i.create=function(d$a,d$b,d$c,d$d,d$e){return void 0===d$c&&(d$c=35044),void 0===d$d&&(d$d=!1),new d$i(d$a,d$b,d$c,d$d,d$e);},d$i;}(d$j),d$Pb=function(d$a){function d$v(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,d$v.__super.call(this),this._type=3553;}d$p(d$v,"laya.d3.resource.DataTexture2D",d$Fb);var d$b=d$v.prototype;return d$b.genDebugMipmaps=function(){var d$a=[];return d$a.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),d$a.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),d$a.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),d$a.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),d$a.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),d$a.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),d$a.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),d$a.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),d$a.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),d$a.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),d$a;},d$b._onTextureLoaded=function(d$a){},d$b._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var d$a=d$F.mainContext,d$b=this._source=d$a.createTexture(),d$c=this._width,d$d=this._height,d$e=d$G.curBindTexTarget,d$f=d$G.curBindTexValue,d$i=!1;if(d$G.bindTexture(d$a,this._type,d$b),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var d$j=0;d$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var d$k=0;d$k<this._mipmaps.length;d$k++){if(this._mipmaps[d$k].byteLength!=d$l*d$m*4)throw"mipmap size error  level:"+d$k;d$a.texSubImage2D(this._type,0,d$v.simLodRect[d$j++],d$v.simLodRect[d$j++],d$v.simLodRect[d$j++],d$v.simLodRect[d$j++],6408,5121,new Uint8Array(this._mipmaps[d$k]));}this.minFifter=9729,this.magFifter=9729;}else{var d$l=this._width,d$m=this._height;for(d$j=0,d$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),d$k=0;d$k<this._mipmaps.length;d$k++){if(this._mipmaps[d$k].byteLength!=d$l*d$m*4)throw"mipmap size error  level:"+d$k;d$a.texImage2D(this._type,d$k,6408,d$l,d$m,0,6408,5121,new Uint8Array(this._mipmaps[d$k])),(d$l/=2)<1&&(d$l=1),(d$m/=2)<1&&(d$m=1),this.minFifter=9987,this.magFifter=9729;}}this.mipmap=!1;}else if(this._image)6407==this._format&&d$a.pixelStorei(d$a.UNPACK_ALIGNMENT,1),d$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var d$n=0,d$o=!1,d$p=!1;this._buffer.byteLength==4*d$c*d$d?(d$n=6408,d$o=!0):this._buffer.byteLength==3*d$c*d$d?(d$n=6407,d$p=!0):d$n=this._format,d$o||d$p?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),d$p&&d$a.pixelStorei(d$a.UNPACK_ALIGNMENT,1),d$a.texImage2D(this._type,0,d$n,d$c,d$d,0,d$n,5121,this._buffer)):d$a&&d$n==d$a.ALPHA?(d$a.texImage2D(3553,0,d$n,d$c,d$d,0,d$n,d$a.UNSIGNED_BYTE,this._buffer),d$i=!0):0!=d$n&&(d$a.compressedTexImage2D(3553,0,d$n,d$c,d$d,0,this._buffer),d$i=!0);}var d$q=this._minFifter,d$r=this._magFifter,d$s=0==this._wrapModeU?10497:33071,d$t=0==this._wrapModeV?10497:33071,d$u=d$w.isPOT(d$c,d$d);d$u?(this._mipmap||this._mipmaps?-1!==d$q||(d$q=9987):-1!==d$q||(d$q=9729),-1!==d$r||(d$r=9729),d$a.texParameteri(this._type,10241,d$q),d$a.texParameteri(this._type,10240,d$r),d$a.texParameteri(this._type,10242,d$s),d$a.texParameteri(this._type,10243,d$t),this._mipmap&&d$a.generateMipmap(this._type)):(-1!==d$q||(d$q=9729),-1!==d$r||(d$r=9729),d$a.texParameteri(this._type,10241,d$q),d$a.texParameteri(this._type,10240,d$r),d$a.texParameteri(this._type,10242,33071),d$a.texParameteri(this._type,10243,33071)),d$e&&d$f&&d$G.bindTexture(d$a,d$e,d$f),this.memorySize=d$i?this._buffer.length:d$u?d$c*d$d*4*(1+1/3):d$c*d$d*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1;},d$b.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate();}else{this._recreateLock=!0;}},d$b.onAsynLoaded=function(d$a,d$b,d$c){var d$d;d$c&&(d$d=d$c[0].call(this,d$b)),d$d&&(this._width=d$d.width,this._height=d$d.height,this._buffer=d$d.data),this._src=d$a,this._size=new d$rb(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded();},d$b.getPixels=function(){return new Uint8Array(this._buffer);},d$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(d$F.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0);},d$q(0,d$b,"src",function(){return this._src;}),d$v.create=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){if(void 0===d$d&&(d$d=9729),void 0===d$e&&(d$e=9729),void 0===d$f&&(d$f=!0),!d$a||d$a.byteLength<d$b*d$c*4)throw"DataTexture2D create error";var d$j=new d$v();return d$j.uri=d$i,d$j._buffer=d$a,d$j._width=d$b,d$j._height=d$c,d$j._mipmap=d$f,d$j._magFifter=d$d,d$j._minFifter=d$e,d$j._size=new d$rb(d$j._width,d$j._height),d$j._conchTexture?alert("怎么给runtime传递datatexture数据"):d$j.activeResource(),d$j;},d$v.load=function(d$a,d$b,d$c,d$d,d$e){if(void 0===d$b&&(d$b=0),void 0===d$c&&(d$c=0),void 0===d$d&&(d$d=9729),void 0===d$e&&(d$e=9729),"mipmaps"===d$C.getFileExtension(d$a)){var d$f=d$x.loader.create(d$a,null,null,d$v,[function(d$a){this._mipmaps=[];var d$b=new Uint32Array(d$a);this._width=d$b[0];var d$c=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,d$c=1024),this._width!=d$c)throw"现在只支持512x256的环境贴图。当前的是"+d$b[0];this._height=d$b[1];for(var d$d=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,d$e=this._height,d$f=8;;){var d$i=d$d*d$e*4;if(d$f+d$i>d$a.byteLength)throw"load mipmaps data size error ";var d$j=new Uint8Array(d$a,d$f,d$i);if(this._mipmaps.push(d$j),d$f+=d$i,1==d$d&&1==d$e)break;(d$d/=2)<1&&(d$d=1),(d$e/=2)<1&&(d$e=1);}return null;}]);if(laya.d3.resource.DataTexture2D.lodasatlas){d$f.simLodInfo=new Float32Array(40);for(var d$i=0;d$i<d$f.simLodInfo.length;)d$f.simLodInfo[d$i]=(d$v.simLodRect[d$i]+.5)/1024,d$i++,d$f.simLodInfo[d$i]=(d$v.simLodRect[d$i]+.5)/256,d$i++,d$f.simLodInfo[d$i]=Math.max(d$v.simLodRect[d$i]-1,.1)/1024,d$i++,d$f.simLodInfo[d$i]=Math.max(d$v.simLodRect[d$i]-1.5,.1)/256,d$i++;}return d$f;}if("number"==typeof d$b)return d$x.loader.create(d$a,null,null,d$v,[function(d$a){return this._width=d$b,this._height=d$c,this._buffer=d$a,null;}]);if("function"==typeof d$b)return d$x.loader.create(d$a,null,null,d$v,[d$b]);throw new Error("unknown params.");},d$v.lodasatlas=!1,d$n(d$v,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1]);}]),d$v;}(),d$Qb=function(d$a){function d$b(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,d$b.__super.call(this);}d$p(d$b,"laya.d3.resource.models.PrimitiveMesh",d$Gb);var d$c=d$b.prototype;return d$x.imps(d$c,{"laya.d3.core.render.IRenderable":!0}),d$c._getVertexBuffer=function(d$a){return void 0===d$a&&(d$a=0),0===d$a?this._vertexBuffer:null;},d$c._getVertexBuffers=function(){return null;},d$c._getIndexBuffer=function(){return this._indexBuffer;},d$c._getPositions=function(){var d$a,d$b=[],d$c=this._vertexBuffer.vertexDeclaration.getVertexElements(),d$d=0;for(d$d=0;d$d<d$c.length;d$d++){var d$e=d$c[d$d];if("vector3"===d$e.elementFormat&&0===d$e.elementUsage){d$a=d$e;break;}}var d$f=this._vertexBuffer.getData();for(d$d=0;d$d<d$f.length;d$d+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var d$i=d$d+d$a.offset/4,d$j=new d$ib(d$f[d$i+0],d$f[d$i+1],d$f[d$i+2]);d$b.push(d$j);}return d$b;},d$c.getRenderElement=function(d$a){return this;},d$c.getRenderElementsCount=function(){return 1;},d$c.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0;},d$c._beforeRender=function(d$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0;},d$c._render=function(d$a){d$F.mainContext.drawElements(4,this._numberIndices,5123,0),d$A.drawCall++,d$A.trianglesFaces+=this._numberIndices/3;},d$q(0,d$c,"_vertexBufferCount",function(){return 1;}),d$q(0,d$c,"triangleCount",function(){return this._indexBuffer.indexCount/3;}),d$b;}(),d$Rb=function(d$a){function d$b(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,d$b.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[];}d$p(d$b,"laya.d3.resource.models.Mesh",d$Gb);var d$c=d$b.prototype;return d$c._getPositions=function(){var d$a,d$b,d$c,d$d,d$e,d$f=[],d$i=0,d$j=0,d$k=0;if(0!==this._vertexBuffers.length){var d$l=this._vertexBuffers.length;for(d$i=0;d$i<d$l;d$i++){for(d$c=(d$a=this._vertexBuffers[d$i]).vertexDeclaration.getVertexElements(),d$j=0;d$j<d$c.length;d$j++)if("vector3"===(d$d=d$c[d$j]).elementFormat&&0===d$d.elementUsage){d$b=d$d;break;}for(d$e=d$a.getData(),d$j=0;d$j<d$e.length;d$j+=d$a.vertexDeclaration.vertexStride/4)d$k=d$j+d$b.offset/4,d$f.push(new d$ib(d$e[d$k+0],d$e[d$k+1],d$e[d$k+2]));}}else{var d$m=this._subMeshes.length;for(d$i=0;d$i<d$m;d$i++){for(d$c=(d$a=this._subMeshes[d$i]._getVertexBuffer()).vertexDeclaration.getVertexElements(),d$j=0;d$j<d$c.length;d$j++)if("vector3"===(d$d=d$c[d$j]).elementFormat&&0===d$d.elementUsage){d$b=d$d;break;}for(d$e=d$a.getData(),d$j=0;d$j<d$e.length;d$j+=d$a.vertexDeclaration.vertexStride/4)d$k=d$j+d$b.offset/4,d$f.push(new d$ib(d$e[d$k+0],d$e[d$k+1],d$e[d$k+2]));}}return d$f;},d$c._setSubMeshes=function(d$a){this._subMeshes=d$a,this._subMeshCount=d$a.length;for(var d$b=0;d$b<this._subMeshCount;d$b++)d$a[d$b]._indexInMesh=d$b;this._positions=this._getPositions(),this._generateBoundingObject();},d$c.onAsynLoaded=function(d$a,d$b,d$c){var d$d=d$b[0],d$e=d$b[1];d$Ya.read(d$d,this,this._materials,this._subMeshes,d$e),this.completeCreate(),this._endLoaded();},d$c.getSubMesh=function(d$a){return this._subMeshes[d$a];},d$c.getSubMeshCount=function(){return this._subMeshes.length;},d$c.getRenderElementsCount=function(){return this._subMeshes.length;},d$c.getRenderElement=function(d$a){return this._subMeshes[d$a];},d$c.disposeResource=function(){for(var d$a=0;d$a<this._subMeshes.length;d$a++)this._subMeshes[d$a].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null;},d$q(0,d$c,"materials",function(){return this._materials.slice();}),d$q(0,d$c,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses;}),d$b.load=function(d$a){return d$x.loader.create(d$a,null,null,d$b);},d$b;}(),d$Sb=(function(d$a){function d$l(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===d$c&&(d$c=6408),void 0===d$d&&(d$d=5121),void 0===d$e&&(d$e=33189),void 0===d$f&&(d$f=!1),void 0===d$i&&(d$i=!1),void 0===d$j&&(d$j=-1),void 0===d$k&&(d$k=-1),d$l.__super.call(this),this._type=3553,this._width=d$a,this._height=d$b,this._size=new d$rb(d$a,d$b),this._surfaceFormat=d$c,this._surfaceType=d$d,this._depthStencilFormat=d$e,d$r.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=d$f,this._repeat=d$i,this._minFifter=d$j,this._magFifter=d$k,this.activeResource(),this._alreadyResolved=!0;}d$p(d$l,"laya.d3.resource.RenderTexture",d$Fb);var d$b=d$l.prototype;d$b.recreateResource=function(){var d$a=d$F.mainContext;this._frameBuffer=d$a.createFramebuffer(),this._source=d$a.createTexture();var d$b=d$G.curBindTexTarget,d$c=d$G.curBindTexValue;d$G.bindTexture(d$a,this._type,this._source),d$a.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var d$d=this._minFifter,d$e=this._magFifter,d$f=this._repeat?10497:33071;if(d$w.isPOT(this._width,this._height)?(this._mipmap?-1!==d$d||(d$d=9987):-1!==d$d||(d$d=9729),-1!==d$e||(d$e=9729),d$a.texParameteri(this._type,10241,d$d),d$a.texParameteri(this._type,10240,d$e),d$a.texParameteri(this._type,10242,d$f),d$a.texParameteri(this._type,10243,d$f),this._mipmap&&d$a.generateMipmap(this._type)):(-1!==d$d||(d$d=9729),-1!==d$e||(d$e=9729),d$a.texParameteri(this._type,10241,d$d),d$a.texParameteri(this._type,10240,d$e),d$a.texParameteri(this._type,10242,33071),d$a.texParameteri(this._type,10243,33071)),d$b&&d$c&&d$G.bindTexture(d$a,d$b,d$c),d$a.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=d$a.createRenderbuffer(),d$a.bindRenderbuffer(36161,this._depthStencilBuffer),d$a.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),d$a.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:d$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:d$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:d$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);}d$a.framebufferTexture2D(36160,36064,3553,this._source,0),d$a.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate();},d$b.start=function(){d$F.mainContext.bindFramebuffer(36160,this.frameBuffer),(d$l._currentRenderTarget=this)._alreadyResolved=!1;},d$b.end=function(){d$F.mainContext.bindFramebuffer(36160,null),d$l._currentRenderTarget=null,this._alreadyResolved=!0;},d$b.getData=function(d$a,d$b,d$c,d$d){var d$e=d$F.mainContext;if(d$e.bindFramebuffer(36160,this._frameBuffer),!(36053===d$e.checkFramebufferStatus(36160)))return d$e.bindFramebuffer(36160,null),null;var d$f=new Uint8Array(this._width*this._height*4);return d$e.readPixels(d$a,d$b,d$c,d$d,this._surfaceFormat,this._surfaceType,d$f),d$e.bindFramebuffer(36160,null),d$f;},d$b.disposeResource=function(){if(this._frameBuffer){var d$a=d$F.mainContext;d$a.deleteTexture(this._source),d$a.deleteFramebuffer(this._frameBuffer),d$a.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0;}},d$q(0,d$b,"surfaceFormat",function(){return this._surfaceFormat;}),d$q(0,d$b,"surfaceType",function(){return this._surfaceType;}),d$q(0,d$b,"depthStencilFormat",function(){return this._depthStencilFormat;}),d$q(0,d$b,"source",function(){return this._alreadyResolved?d$x.superGet(d$Fb,this,"source"):null;}),d$q(0,d$b,"depthStencilBuffer",function(){return this._depthStencilBuffer;}),d$q(0,d$b,"frameBuffer",function(){return this._frameBuffer;}),d$l._currentRenderTarget=null;}(),function(d$a){function d$b(d$a){this._color=null,this._pixels=null,d$b.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new d$rb(this.width,this.height),this._color=d$a,this._pixels=new Uint8Array([255*d$a.x,255*d$a.y,255*d$a.z,255*d$a.w]),this.uri="SolidColorTexture2D_"+this.id;}d$p(d$b,"laya.d3.resource.SolidColorTexture2D",d$Fb);var d$c=d$b.prototype;return d$c._createWebGlTexture=function(){var d$a=d$F.mainContext,d$b=this._source=d$a.createTexture(),d$c=this._width,d$d=this._height,d$e=d$G.curBindTexTarget,d$f=d$G.curBindTexValue;d$G.bindTexture(d$a,this._type,d$b),d$a.texImage2D(this._type,0,6408,d$c,d$d,0,6408,5121,this._pixels);var d$i=this._minFifter,d$j=this._magFifter,d$k=this._repeat?10497:33071,d$l=d$w.isPOT(d$c,d$d);d$l?(this._mipmap?-1!==d$i||(d$i=9987):-1!==d$i||(d$i=9729),-1!==d$j||(d$j=9729),d$a.texParameteri(this._type,10241,d$i),d$a.texParameteri(this._type,10240,d$j),d$a.texParameteri(this._type,10242,d$k),d$a.texParameteri(this._type,10243,d$k),this._mipmap&&d$a.generateMipmap(this._type)):(-1!==d$i||(d$i=9729),-1!==d$j||(d$j=9729),d$a.texParameteri(this._type,10241,d$i),d$a.texParameteri(this._type,10240,d$j),d$a.texParameteri(this._type,10242,33071),d$a.texParameteri(this._type,10243,33071)),d$e&&d$f&&d$G.bindTexture(d$a,d$e,d$f),this.memorySize=d$l?d$c*d$d*4*(1+1/3):d$c*d$d*4;},d$c.recreateResource=function(){this._createWebGlTexture(),this.completeCreate();},d$c.disposeResource=function(){this._source&&(d$F.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0);},d$n(d$b,["magentaTexture",function(){var d$a=new d$b(new d$jb(1,0,1,1));return d$a.lock=!0,this.magentaTexture=d$a;},"grayTexture",function(){var d$a=new d$b(new d$jb(.5,.5,.5,1));return d$a.lock=!0,this.grayTexture=d$a;}]),d$b;}()),d$Tb=function(d$a){function d$e(d$a,d$b,d$c,d$d){this._canRead=!1,this._image=null,this._pixels=null,void 0===d$a&&(d$a=!1),void 0===d$b&&(d$b=!0),void 0===d$c&&(d$c=6408),void 0===d$d&&(d$d=!0),d$e.__super.call(this),this._type=3553,this._repeat=d$b,this._canRead=d$a,this._format=d$c,this._mipmap=d$d;}d$p(d$e,"laya.d3.resource.Texture2D",d$Fb);var d$b=d$e.prototype;return d$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var d$a=d$F.mainContext,d$b=this._source=d$a.createTexture(),d$c=this._width,d$d=this._height,d$e=d$G.curBindTexTarget,d$f=d$G.curBindTexValue;switch(d$G.bindTexture(d$a,this._type,d$b),this._format){case 6407:case 6408:this._canRead?d$a.texImage2D(this._type,0,this._format,d$c,d$d,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?d$a.texImage2D(this._type,0,this._image._format,d$c,d$d,0,this._image._format,5121,this._image.atlasSource):d$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case d$F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:d$a.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format);}var d$i=this._minFifter,d$j=this._magFifter,d$k=this._repeat?10497:33071,d$l=0==this._wrapModeU?10497:33071,d$m=0==this._wrapModeV?10497:33071,d$n=d$w.isPOT(d$c,d$d);d$n?(this._mipmap?-1!==d$i||(d$i=9987):-1!==d$i||(d$i=9729),-1!==d$j||(d$j=9729),d$a.texParameteri(this._type,10241,d$i),d$a.texParameteri(this._type,10240,d$j),d$a.texParameteri(this._type,10242,d$k),d$a.texParameteri(this._type,10243,d$k),d$a.texParameteri(this._type,10242,d$l),d$a.texParameteri(this._type,10243,d$m),this._mipmap&&d$a.generateMipmap(this._type)):(-1!==d$i||(d$i=9729),-1!==d$j||(d$j=9729),d$a.texParameteri(this._type,10241,d$i),d$a.texParameteri(this._type,10240,d$j),d$a.texParameteri(this._type,10242,33071),d$a.texParameteri(this._type,10243,33071)),d$e&&d$f&&d$G.bindTexture(d$a,d$e,d$f),this._image.onload=null,this._image=null,this.memorySize=d$n?d$c*d$d*4*(1+1/3):d$c*d$d*4;},d$b.recreateResource=function(){this._createWebGlTexture(),this.completeCreate();},d$b.onAsynLoaded=function(d$a,d$b,d$c){if(d$c){var d$d=d$c[0];void 0!==d$d&&(this._canRead=d$d);var d$e=d$c[1];void 0!==d$e&&(this._repeat=d$e);var d$f=d$c[2];void 0!==d$f&&(this._format=d$f);var d$i=d$c[3];void 0!==d$i&&(this._mipmap=d$i);var d$j=d$c.wrapModeU;void 0!==d$j&&(this._wrapModeU=d$j);var d$k=d$c.wrapModeV;void 0!==d$k&&(this._wrapModeV=d$k);}switch(this._format){case 6407:case 6408:var d$l=(this._image=d$b).width,d$m=d$b.height;this._width=d$l,this._height=d$m,this._size=new d$rb(d$l,d$m),this._canRead&&(d$r.isConchApp?d$b instanceof d$o.HTMLElement&&(this._pixels=new Uint8Array(d$b.getImageData(0,0,d$l,d$m))):(d$H.canvas.size(d$l,d$m),d$H.canvas.clear(),d$H.context.drawImage(d$b,0,0,d$l,d$m),this._pixels=new Uint8Array(d$H.context.getImageData(0,0,d$l,d$m).data.buffer)));break;case d$F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var d$n=new d$y(d$b);d$n.readUTFBytes(4),d$n.readUTFBytes(2),d$n.getInt16();d$n.endian="bigEndian",this._width=d$n.getInt16(),this._height=d$n.getInt16(),this._size=new d$rb(this._width,this._height);d$n.getInt16(),d$n.getInt16();this._image=new Uint8Array(d$b,d$n.pos);}this.recreateResource(),this._endLoaded();},d$b.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.");},d$b.disposeResource=function(){this._source&&(d$F.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0);},d$q(0,d$b,"_src",function(){return this.url;}),d$q(0,d$b,"src",function(){return this.url;}),d$e.load=function(d$a){return d$x.loader.create(d$a,null,null,d$e);},d$e;}(),d$Ub=function(d$b){function d$c(d$a,d$b){d$c.__super.call(this),void 0===d$a&&(d$a=.3),void 0===d$b&&(d$b=1e3),this._tempVector3=new d$ib(),this._position=new d$ib(),this._up=new d$ib(),this._forward=new d$ib(),this._right=new d$ib(),this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=d$rb.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=d$a,this._farPlane=d$b,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),d$x.stage.on("resize",this,this._onScreenSizeChanged);}d$p(d$c,"laya.d3.core.BaseCamera",d$b);var d$a=d$c.prototype;return d$a._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var d$a=this.scene._cameraPool,d$b=d$a.length-1,d$c=0;d$c<d$b;d$c++)if(d$a[d$c].renderingOrder>d$a[d$b].renderingOrder){var d$d=d$a[d$c];d$a[d$c]=d$a[d$b],d$a[d$b]=d$d;}},d$a._calculateProjectionMatrix=function(){},d$a._onScreenSizeChanged=function(){this._calculateProjectionMatrix();},d$a._prepareCameraToRender=function(){d$I._currentCameraCullingMask=this.cullingMask;var d$a=this._shaderValues;d$a.setValue(0,this.transform.position.elements),d$a.setValue(5,this.forward.elements),d$a.setValue(6,this.up.elements);},d$a._prepareCameraViewProject=function(d$a,d$b){var d$c=this._shaderValues;d$c.setValue(1,d$a.elements),d$c.setValue(2,d$b.elements);},d$a._renderCamera=function(d$a,d$b,d$c){},d$a.addLayer=function(d$a){29!==d$a.number&&30!=d$a.number&&(this.cullingMask=this.cullingMask|d$a.mask);},d$a.removeLayer=function(d$a){29!==d$a.number&&30!=d$a.number&&(this.cullingMask=this.cullingMask&~d$a.mask);},d$a.addAllLayers=function(){this.cullingMask=2147483647;},d$a.removeAllLayers=function(){this.cullingMask=0|d$I.getLayerByNumber(29).mask|d$I.getLayerByNumber(30).mask;},d$a.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix();},d$a.moveForward=function(d$a){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=d$a,this.transform.translate(this._tempVector3);},d$a.moveRight=function(d$a){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=d$a,this.transform.translate(this._tempVector3);},d$a.moveVertical=function(d$a){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=d$a,this.transform.translate(this._tempVector3,!1);},d$a._addSelfRenderObjects=function(){var d$a=this.scene._cameraPool,d$b=d$a.length;if(0<d$b){for(var d$c=d$b-1;0<=d$c;d$c--)if(this.renderingOrder<=d$a[d$c].renderingOrder){d$a.splice(d$c+1,0,this);break;}}else d$a.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel);},d$a._clearSelfRenderObjects=function(){var d$a=this.scene._cameraPool;d$a.splice(d$a.indexOf(this),1);},d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,d$x.stage.off("resize",this,this._onScreenSizeChanged),d$b.prototype.destroy.call(this,d$a);},d$q(0,d$a,"sky",function(){return this._sky;},function(d$a){(this._sky=d$a)._ownerCamera=this;}),d$q(0,d$a,"forward",function(){var d$a=this.transform.worldMatrix.elements,d$b=this._forward.elements;return d$b[0]=-d$a[8],d$b[1]=-d$a[9],d$b[2]=-d$a[10],this._forward;}),d$q(0,d$a,"position",function(){var d$a=this.transform.worldMatrix.elements,d$b=this._position.elements;return d$b[0]=d$a[12],d$b[1]=d$a[13],d$b[2]=d$a[14],this._position;}),d$q(0,d$a,"renderTarget",function(){return this._renderTarget;},function(d$a){null!=(this._renderTarget=d$a)&&(this._renderTargetSize=d$a.size);}),d$q(0,d$a,"up",function(){var d$a=this.transform.worldMatrix.elements,d$b=this._up.elements;return d$b[0]=d$a[4],d$b[1]=d$a[5],d$b[2]=d$a[6],this._up;}),d$q(0,d$a,"right",function(){var d$a=this.transform.worldMatrix.elements,d$b=this._right.elements;return d$b[0]=d$a[0],d$b[1]=d$a[1],d$b[2]=d$a[2],this._right;}),d$q(0,d$a,"renderTargetSize",function(){return this._renderTargetSize;},function(d$a){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=d$a,this._calculateProjectionMatrix();}),d$q(0,d$a,"fieldOfView",function(){return this._fieldOfView;},function(d$a){this._fieldOfView=d$a,this._calculateProjectionMatrix();}),d$q(0,d$a,"nearPlane",function(){return this._nearPlane;},function(d$a){this._nearPlane=d$a,this._calculateProjectionMatrix();}),d$q(0,d$a,"farPlane",function(){return this._farPlane;},function(d$a){this._farPlane=d$a,this._calculateProjectionMatrix();}),d$q(0,d$a,"orthographic",function(){return this._orthographic;},function(d$a){this._orthographic=d$a,this._calculateProjectionMatrix();}),d$q(0,d$a,"orthographicVerticalSize",function(){return this._orthographicVerticalSize;},function(d$a){this._orthographicVerticalSize=d$a,this._calculateProjectionMatrix();}),d$q(0,d$a,"renderingOrder",function(){return this._renderingOrder;},function(d$a){this._renderingOrder=d$a,this._sortCamerasByRenderingOrder();}),d$c.CAMERAPOS=0,d$c.VIEWMATRIX=1,d$c.PROJECTMATRIX=2,d$c.VPMATRIX=3,d$c.VPMATRIX_NO_TRANSLATE=4,d$c.CAMERADIRECTION=5,d$c.CAMERAUP=6,d$c.ENVIRONMENTDIFFUSE=7,d$c.ENVIRONMENTSPECULAR=8,d$c.SIMLODINFO=9,d$c.DIFFUSEIRRADMATR=10,d$c.DIFFUSEIRRADMATG=11,d$c.DIFFUSEIRRADMATB=12,d$c.HDREXPOSURE=13,d$c.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",d$c.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",d$c.CLEARFLAG_SOLIDCOLOR=0,d$c.CLEARFLAG_SKY=1,d$c.CLEARFLAG_DEPTHONLY=2,d$c.CLEARFLAG_NONE=3,d$n(d$c,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new d$ab(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1);},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new d$ab();},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new d$ab();}]),d$c;}(d$Kb),d$Vb=function(d$c){function d$b(d$a){this._render=null,this._geometryFilter=null,d$b.__super.call(this,d$a);}d$p(d$b,"laya.d3.core.RenderableSprite3D",d$c);var d$a=d$b.prototype;return d$a._addToInitStaticBatchManager=function(){},d$a._setBelongScene=function(d$a){d$c.prototype._setBelongScene.call(this,d$a),d$a._renderableSprite3Ds.push(this),this._render._applyLightMapParams();},d$a._setUnBelongScene=function(){var d$a=this._scene._renderableSprite3Ds,d$b=d$a.indexOf(this);d$a.splice(d$b,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),d$c.prototype._setUnBelongScene.call(this);},d$a._update=function(d$a){(d$a.owner=this)._activeInHierarchy&&(this._updateComponents(d$a),this._render._updateOctreeNode(),this._lateUpdateComponents(d$a),d$A.spriteCount++,this._childs.length&&this._updateChilds(d$a));},d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$c.prototype.destroy.call(this,d$a),this._render._destroy(),this._render=null;},d$b.__init__=function(){d$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=d$b.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),d$b.SAHDERDEFINE_LIGHTMAP=d$b.shaderDefines.registerDefine("LIGHTMAP");},d$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,d$b.SAHDERDEFINE_LIGHTMAP=4,d$b.LIGHTMAPSCALEOFFSET=2,d$b.LIGHTMAP=3,d$n(d$b,["shaderDefines",function(){return this.shaderDefines=new d$mb();}]),d$b;}(d$Kb),d$Wb=(function(d$a){function d$d(d$a,d$b,d$c){this._long=NaN,this._width=NaN,this._height=NaN,void 0===d$a&&(d$a=1),void 0===d$b&&(d$b=1),void 0===d$c&&(d$c=1),d$d.__super.call(this),this._long=d$a,this._width=d$b,this._height=d$c,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject();}d$p(d$d,"laya.d3.resource.models.BoxMesh",d$Qb);var d$b=d$d.prototype;d$b.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var d$a=d$Fa.vertexDeclaration,d$b=(d$a.vertexStride,this._long/2),d$c=this._height/2,d$d=this._width/2,d$e=new Float32Array([-d$b,d$c,-d$d,0,1,0,0,0,d$b,d$c,-d$d,0,1,0,1,0,d$b,d$c,d$d,0,1,0,1,1,-d$b,d$c,d$d,0,1,0,0,1,-d$b,-d$c,-d$d,0,-1,0,0,1,d$b,-d$c,-d$d,0,-1,0,1,1,d$b,-d$c,d$d,0,-1,0,1,0,-d$b,-d$c,d$d,0,-1,0,0,0,-d$b,d$c,-d$d,-1,0,0,0,0,-d$b,d$c,d$d,-1,0,0,1,0,-d$b,-d$c,d$d,-1,0,0,1,1,-d$b,-d$c,-d$d,-1,0,0,0,1,d$b,d$c,-d$d,1,0,0,1,0,d$b,d$c,d$d,1,0,0,0,0,d$b,-d$c,d$d,1,0,0,0,1,d$b,-d$c,-d$d,1,0,0,1,1,-d$b,d$c,d$d,0,0,1,0,0,d$b,d$c,d$d,0,0,1,1,0,d$b,-d$c,d$d,0,0,1,1,1,-d$b,-d$c,d$d,0,0,1,0,1,-d$b,d$c,-d$d,0,0,-1,1,0,d$b,d$c,-d$d,0,0,-1,0,0,d$b,-d$c,-d$d,0,0,-1,0,1,-d$b,-d$c,-d$d,0,0,-1,1,1]),d$f=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new d$Ob(d$a,this._numberVertices,35044,!0),this._indexBuffer=new d$Nb("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(d$e),this._indexBuffer.setData(d$f),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},d$q(0,d$b,"long",function(){return this._long;},function(d$a){this._long!==d$a&&(this._long=d$a,this.releaseResource(),this.activeResource());}),d$q(0,d$b,"width",function(){return this._width;},function(d$a){this._width!==d$a&&(this._width=d$a,this.releaseResource(),this.activeResource());}),d$q(0,d$b,"height",function(){return this._height;},function(d$a){this._height!==d$a&&(this._height=d$a,this.releaseResource(),this.activeResource());});}(),function(d$a){function d$e(d$a,d$b,d$c,d$d){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===d$a&&(d$a=10),void 0===d$b&&(d$b=10),void 0===d$c&&(d$c=10),void 0===d$d&&(d$d=10),d$e.__super.call(this),this._long=d$a,this._width=d$b,this._stacks=d$c,this._slices=d$d,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject();}d$p(d$e,"laya.d3.resource.models.PlaneMesh",d$Qb);var d$b=d$e.prototype;d$b.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var d$a=new Uint16Array(this._numberIndices),d$b=d$Fa.vertexDeclaration,d$c=d$b.vertexStride/4,d$d=new Float32Array(this._numberVertices*d$c),d$e=this._long/2,d$f=this._width/2,d$i=this._long/this._stacks,d$j=this._width/this._slices,d$k=0,d$l=0;d$l<=this._slices;d$l++)for(var d$m=0;d$m<=this._stacks;d$m++)d$d[d$k++]=d$m*d$i-d$e,d$d[d$k++]=0,d$d[d$k++]=d$l*d$j-d$f,d$d[d$k++]=0,d$d[d$k++]=1,d$d[d$k++]=0,d$d[d$k++]=1*d$m/this._stacks,d$d[d$k++]=1*d$l/this._slices;var d$n=0;for(d$l=0;d$l<this._slices;d$l++)for(d$m=0;d$m<this._stacks;d$m++)d$a[d$n++]=(d$l+1)*(this._stacks+1)+d$m,d$a[d$n++]=d$l*(this._stacks+1)+d$m,d$a[d$n++]=(d$l+1)*(this._stacks+1)+d$m+1,d$a[d$n++]=d$l*(this._stacks+1)+d$m,d$a[d$n++]=d$l*(this._stacks+1)+d$m+1,d$a[d$n++]=(d$l+1)*(this._stacks+1)+d$m+1;this._vertexBuffer=new d$Ob(d$b,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new d$Nb("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(d$d),this._indexBuffer.setData(d$a),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate();},d$q(0,d$b,"long",function(){return this._long;},function(d$a){this._long!==d$a&&(this._long=d$a,this.releaseResource(),this.activeResource());}),d$q(0,d$b,"width",function(){return this._width;},function(d$a){this._width!==d$a&&(this._width=d$a,this.releaseResource(),this.activeResource());}),d$q(0,d$b,"stacks",function(){return this._stacks;},function(d$a){this._stacks!==d$a&&(this._stacks=d$a,this.releaseResource(),this.activeResource());}),d$q(0,d$b,"slices",function(){return this._slices;},function(d$a){this._slices!==d$a&&(this._slices=d$a,this.releaseResource(),this.activeResource());});}(),function(d$a){function d$i(d$a,d$b,d$c){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=.3),void 0===d$c&&(d$c=1e3),this._viewMatrix=new d$ab(),this._projectionMatrix=new d$ab(),this._projectionViewMatrix=new d$ab(),this._viewport=new d$kb(0,0,0,0),this._normalizedViewport=new d$kb(0,0,1,1),this._aspectRatio=d$a,this._boundFrustumUpdate=!0,this._boundFrustum=new d$$a(d$ab.DEFAULT),d$i.__super.call(this,d$b,d$c),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged);}d$p(d$i,"laya.d3.core.Camera",d$Ub);var d$b=d$i.prototype;return d$b._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0;},d$b._parseCustomProps=function(d$a,d$b,d$c,d$d){var d$e=d$c.clearColor;this.clearColor=new d$jb(d$e[0],d$e[1],d$e[2],d$e[3]);var d$f=d$c.viewport;this.normalizedViewport=new d$kb(d$f[0],d$f[1],d$f[2],d$f[3]);},d$b._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var d$a=this.orthographicVerticalSize*this.aspectRatio*.5,d$b=.5*this.orthographicVerticalSize;d$ab.createOrthoOffCenterRH(-d$a,d$a,-d$b,d$b,this.nearPlane,this.farPlane,this._projectionMatrix);}else d$ab.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0;},d$b._update=function(d$a){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,d$a);},d$b._renderCamera=function(d$a,d$b,d$c){var d$d,d$e;d$c.parallelSplitShadowMaps[0]&&d$c._renderShadowMap(d$a,d$b,this),(d$b.camera=this)._prepareCameraToRender(),d$c._preRenderUpdateComponents(d$b),d$d=d$b._viewMatrix=this.viewMatrix;var d$f=this._renderTarget;d$f?(d$f.start(),d$ab.multiply(d$Ub._invertYScaleMatrix,this._projectionMatrix,d$Ub._invertYProjectionMatrix),d$ab.multiply(d$Ub._invertYScaleMatrix,this.projectionViewMatrix,d$Ub._invertYProjectionViewMatrix),d$e=d$b._projectionMatrix=d$Ub._invertYProjectionMatrix,d$b._projectionViewMatrix=d$Ub._invertYProjectionViewMatrix):(d$e=d$b._projectionMatrix=this._projectionMatrix,d$b._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(d$d,d$e),d$b._viewport=this.viewport,d$c._preRenderScene(d$a,d$b,this.boundFrustum),d$c._clear(d$a,d$b),d$c._renderScene(d$a,d$b),d$c._postRenderUpdateComponents(d$b),d$f&&d$f.end();},d$b.viewportPointToRay=function(d$a,d$b){d$qb.calculateCursorRay(d$a,this.viewport,this._projectionMatrix,this.viewMatrix,null,d$b);},d$b.normalizedViewportPointToRay=function(d$a,d$b){var d$c=d$i._tempVector20,d$d=this.viewport,d$e=d$a.elements,d$f=d$c.elements;d$f[0]=d$e[0]*d$d.width,d$f[1]=d$e[1]*d$d.height,d$qb.calculateCursorRay(d$c,this.viewport,this._projectionMatrix,this.viewMatrix,null,d$b);},d$b.worldToViewportPoint=function(d$a,d$b){d$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(d$a,this._projectionViewMatrix,d$b);var d$c=d$b.elements;d$c[0]=d$c[0]/d$x.stage.clientScaleX,d$c[1]=d$c[1]/d$x.stage.clientScaleY;},d$b.worldToNormalizedViewportPoint=function(d$a,d$b){d$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(d$a,this._projectionViewMatrix,d$b);var d$c=d$b.elements;d$c[0]=d$c[0]/d$x.stage.clientScaleX,d$c[1]=d$c[1]/d$x.stage.clientScaleY;},d$b.convertScreenCoordToOrthographicCoord=function(d$a,d$b){if(this._orthographic){var d$c=d$Y.clientWidth,d$d=d$Y.clientHeight,d$e=this.orthographicVerticalSize*this.aspectRatio/d$c,d$f=this.orthographicVerticalSize/d$d,d$i=d$a.elements,d$j=d$b.elements;return d$j[0]=(-d$c/2+d$i[0])*d$e,d$j[1]=(d$d/2-d$i[1])*d$f,d$j[2]=(this.nearPlane-this.farPlane)*(d$i[2]+1)/2-this.nearPlane,d$ib.transformCoordinate(d$b,this.transform.worldMatrix,d$b),!0;}return!1;},d$q(0,d$b,"projectionViewMatrix",function(){return d$ab.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix;}),d$q(0,d$b,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var d$a=this.viewport;return d$a.width/d$a.height;},function(d$a){if(d$a<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=d$a,this._calculateProjectionMatrix();}),d$q(0,d$b,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum;}),d$q(0,d$b,"needViewport",function(){var d$a=this.normalizedViewport;return 0===d$a.x&&0===d$a.y&&1===d$a.width&&1===d$a.height;}),d$q(0,d$b,"viewport",function(){if(this._viewportExpressedInClipSpace){var d$a=this._normalizedViewport,d$b=this.renderTargetSize,d$c=d$b.width,d$d=d$b.height;this._viewport.x=d$a.x*d$c,this._viewport.y=d$a.y*d$d,this._viewport.width=d$a.width*d$c,this._viewport.height=d$a.height*d$d;}return this._viewport;},function(d$a){if(null!=this.renderTarget&&(d$a.x<0||d$a.y<0||0==d$a.width||0==d$a.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=d$a,this._calculateProjectionMatrix();}),d$q(0,d$b,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var d$a=this._viewport,d$b=this.renderTargetSize,d$c=d$b.width,d$d=d$b.height;this._normalizedViewport.x=d$a.x/d$c,this._normalizedViewport.y=d$a.y/d$d,this._normalizedViewport.width=d$a.width/d$c,this._normalizedViewport.height=d$a.height/d$d;}return this._normalizedViewport;},function(d$a){d$a.x<0&&(d$a.x=0,console.warn("Camera: viewport.x must large than 0.0.")),d$a.y<0&&(d$a.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<d$a.x+d$a.width&&(d$a.width=1-d$a.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<d$a.y+d$a.height&&(d$a.height=1-d$a.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=d$a,this._calculateProjectionMatrix();}),d$q(0,d$b,"projectionMatrix",function(){return this._projectionMatrix;},function(d$a){this._projectionMatrix=d$a,this._useUserProjectionMatrix=!0;}),d$q(0,d$b,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix;}),d$n(d$i,["_tempVector20",function(){return this._tempVector20=new d$fb();}]),d$i;}()),d$Xb=function(d$c){function d$d(d$a,d$b){d$d.__super.call(this,d$b),this._geometryFilter=new d$Hb(this),this._render=new d$Ib(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),d$a&&(this._geometryFilter.sharedMesh=d$a)instanceof laya.d3.resource.models.Mesh&&(d$a.loaded?this._render.sharedMaterials=d$a.materials:d$a.once("loaded",this,this._applyMeshMaterials));}d$p(d$d,"laya.d3.core.MeshSprite3D",d$c);var d$a=d$d.prototype;return d$a._changeRenderObjectByMesh=function(d$a){var d$b=this._render._renderElements,d$c=d$b[d$a];d$c||(d$c=d$b[d$a]=new d$zb()),d$c._render=this._render;var d$d=this._render.sharedMaterials[d$a];d$d||(d$d=d$Mb.defaultMaterial);var d$e=this._geometryFilter.sharedMesh.getRenderElement(d$a);return d$c._mainSortID=this._getSortID(d$e,d$d),d$c._sprite3D=this,d$c.renderObj=d$e,d$c._material=d$d,d$c;},d$a._changeRenderObjectByMaterial=function(d$a,d$b){var d$c=this._render._renderElements[d$a];d$b||(d$b=d$Mb.defaultMaterial);var d$d=this._geometryFilter.sharedMesh.getRenderElement(d$a);return d$c._mainSortID=this._getSortID(d$d,d$b),d$c._sprite3D=this,d$c.renderObj=d$d,d$c._material=d$b,d$c;},d$a._changeRenderObjectsByMesh=function(){var d$a=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=d$a;for(var d$b=0;d$b<d$a;d$b++)this._changeRenderObjectByMesh(d$b);},d$a._onMeshChanged=function(d$a){var d$b=d$a.sharedMesh;d$b.loaded?this._changeRenderObjectsByMesh():d$b.once("loaded",this,this._onMeshLoaded);},d$a._onMeshLoaded=function(d$a){d$a===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh();},d$a._onMaterialChanged=function(d$a,d$b,d$c){d$b<this._render._renderElements.length&&this._changeRenderObjectByMaterial(d$b,d$c);},d$a._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render);},d$a._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render);},d$a._parseCustomProps=function(d$a,d$b,d$c,d$d){var d$e=this.meshRender,d$f=d$c.lightmapIndex;null!=d$f&&(d$e.lightmapIndex=d$f);var d$i,d$j,d$k=d$c.lightmapScaleOffset;if(d$k&&(d$e.lightmapScaleOffset=new d$jb(d$k[0],d$k[1],d$k[2],d$k[3])),d$d.instanceParams)(d$i=d$d.instanceParams.loadPath)&&(d$j=d$t.getRes(d$b[d$i]),(this.meshFilter.sharedMesh=d$j).loaded?d$e.sharedMaterials=d$j.materials:d$j.once("loaded",this,this._applyMeshMaterials));else{(d$i=d$c.meshPath)&&(d$j=d$t.getRes(d$b[d$i]),this.meshFilter.sharedMesh=d$j);var d$l=d$c.materials;if(d$l){var d$m=d$e.sharedMaterials,d$n=d$l.length;d$m.length=d$n;for(var d$o=0;d$o<d$n;d$o++)d$m[d$o]=d$t.getRes(d$b[d$l[d$o].path]);d$e.sharedMaterials=d$m;}}},d$a._applyMeshMaterials=function(d$a){for(var d$b=this._render.sharedMaterials,d$c=d$a.materials,d$d=0,d$e=d$c.length;d$d<d$e;d$d++)d$b[d$d]||(d$b[d$d]=d$c[d$d]);this._render.sharedMaterials=d$b;},d$a._addToInitStaticBatchManager=function(){d$d._staticBatchManager._addInitBatchSprite(this);},d$a.cloneTo=function(d$a){var d$b=d$a;d$b._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var d$c=this._render,d$d=d$b._render;d$d.enable=d$c.enable,d$d.sharedMaterials=d$c.sharedMaterials,d$d.castShadow=d$c.castShadow;var d$e=d$c.lightmapScaleOffset;d$e&&(d$d.lightmapScaleOffset=d$e.clone()),d$d.lightmapIndex=d$c.lightmapIndex,d$d.receiveShadow=d$c.receiveShadow,d$d.sortingFudge=d$c.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,d$a);},d$a.destroy=function(d$a){if(void 0===d$a&&(d$a=!0),!this.destroyed){var d$b=this.meshFilter.sharedMesh;null!=d$b&&(d$b.loaded||d$b.off("loaded",this,this._applyMeshMaterials)),d$c.prototype.destroy.call(this,d$a),this._geometryFilter._destroy();}},d$q(0,d$a,"meshFilter",function(){return this._geometryFilter;}),d$q(0,d$a,"meshRender",function(){return this._render;}),d$d.__init__=function(){d$da._staticBatchManagers.push(d$d._staticBatchManager);},d$d.load=function(d$a){return d$x.loader.create(d$a,null,null,d$d);},d$n(d$d,["_staticBatchManager",function(){return this._staticBatchManager=new d$Bb();}]),d$d;}(d$Vb);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(d$a,d$b){"use strict";for(var d$c in Object.defineProperty(d$b,"__esModule",{value:!0}),Laya){var d$d=Laya[d$c];d$d&&d$d.__isclass&&(d$b[d$c]=d$d);}}),function(d$a,d$b,d$ea){d$ea.un,d$ea.uns;var d$c=d$ea.static,d$d=d$ea.class,d$f=d$ea.getset,d$r=d$ea.__newvec,d$j=laya.maths.Bezier,d$n=laya.utils.Browser,d$Fa=laya.utils.Byte,d$e=(laya.events.Event,laya.events.EventDispatcher),d$i=laya.display.Graphics,d$k=(laya.resource.HTMLCanvas,laya.utils.Handler),d$l=laya.net.Loader,d$o=laya.maths.MathUtil,d$Ga=laya.maths.Matrix,d$s=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),d$m=(laya.renders.RenderContext,laya.resource.Resource),d$p=laya.utils.RunDriver,d$fa=laya.display.Sprite,d$q=laya.utils.Stat,d$Ha=laya.resource.Texture,d$t=(laya.net.URL,laya.utils.Utils),d$G=function(){function d$a(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0;}return d$d(d$a,"laya.ani.AnimationContent"),d$a;}(),d$H=function(){function d$a(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0;}return d$d(d$a,"laya.ani.AnimationNodeContent"),d$a;}(),d$v=function(){function d$a(){}return d$d(d$a,"laya.ani.AnimationParser01"),d$a.parse=function(d$a,d$b){var d$c=d$b.__getBuffer(),d$d=0,d$e=0,d$f=0,d$i=0,d$j=0,d$k=0,d$l=0,d$m=d$b.readUTFString();d$a._aniClassName=d$m;var d$n,d$o=d$b.readUTFString().split("\n"),d$p=d$b.getUint8(),d$q=d$b.getUint32(),d$r=d$b.getUint32();0<d$q&&(d$n=d$c.slice(d$q,d$r));var d$s=new d$Fa(d$n);for(0<d$r&&(d$a._publicExtData=d$c.slice(d$r,d$c.byteLength)),d$a._useParent=!!d$b.getUint8(),d$a._anis.length=d$p,d$d=0;d$d<d$p;d$d++){var d$t=d$a._anis[d$d]=new d$G();d$t.nodes=new Array();var d$u=d$t.name=d$o[d$b.getUint16()];d$a._aniMap[d$u]=d$d,d$t.bone3DMap={},d$t.playTime=d$b.getFloat32(),d$t.playTime<=0&&console.error("播放时间不能为0  url="+d$a.url+" name="+d$t.name);var d$v=d$t.nodes.length=d$b.getUint8();for(d$e=d$t.totalKeyframeDatasLength=0;d$e<d$v;d$e++){var d$w=d$t.nodes[d$e]=new d$H();d$w.childs=[];var d$x=d$b.getInt16();0<=d$x&&(d$w.name=d$o[d$x],d$t.bone3DMap[d$w.name]=d$e),d$w.keyFrame=new Array(),d$w.parentIndex=d$b.getInt16(),-1==d$w.parentIndex?d$w.parent=null:d$w.parent=d$t.nodes[d$w.parentIndex],d$w.lerpType=d$b.getUint8();var d$y=d$b.getUint32();d$s.pos=d$y;var d$z=d$w.keyframeWidth=d$s.getUint16();if(d$t.totalKeyframeDatasLength+=d$z,0===d$w.lerpType||1===d$w.lerpType)for(d$w.interpolationMethod=[],d$w.interpolationMethod.length=d$z,d$f=0;d$f<d$z;d$f++)d$w.interpolationMethod[d$f]=d$K.interpolation[d$s.getUint8()];null!=d$w.parent&&d$w.parent.childs.push(d$w);var d$A=d$b.getUint16();0<d$A&&(d$w.extenData=d$c.slice(d$b.pos,d$b.pos+d$A),d$b.pos+=d$A);var d$B,d$C=d$b.getUint16(),d$D=0;for(d$f=0,d$i=d$w.keyFrame.length=d$C;d$f<d$i;d$f++){if((d$B=d$w.keyFrame[d$f]=new d$I()).duration=d$b.getFloat32(),d$B.startTime=d$D,2===d$w.lerpType){d$B.interpolationData=[];var d$E,d$F=d$b.getUint8();switch(d$E=d$b.getFloat32()){case 254:for(d$B.interpolationData.length=d$z,d$l=0;d$l<d$z;d$l++)d$B.interpolationData[d$l]=0;break;case 255:for(d$B.interpolationData.length=d$z,d$l=0;d$l<d$z;d$l++)d$B.interpolationData[d$l]=5;break;default:for(d$B.interpolationData.push(d$E),d$k=1;d$k<d$F;d$k++)d$B.interpolationData.push(d$b.getFloat32());}}for(d$B.data=new Float32Array(d$z),d$j=0;d$j<d$z;d$j++)d$B.data[d$j]=d$b.getFloat32(),-1e-8<d$B.data[d$j]&&d$B.data[d$j]<1e-8&&(d$B.data[d$j]=0);d$D+=d$B.duration;}d$B.startTime=d$t.playTime,d$w.playTime=d$t.playTime,d$a._calculateKeyFrame(d$w,d$C,d$z);}}},d$a;}(),d$w=function(){function d$x(){}return d$d(d$x,"laya.ani.AnimationParser02"),d$x.READ_DATA=function(){d$x._DATA.offset=d$x._reader.getUint32(),d$x._DATA.size=d$x._reader.getUint32();},d$x.READ_BLOCK=function(){for(var d$a=d$x._BLOCK.count=d$x._reader.getUint16(),d$b=d$x._BLOCK.blockStarts=[],d$c=d$x._BLOCK.blockLengths=[],d$d=0;d$d<d$a;d$d++)d$b.push(d$x._reader.getUint32()),d$c.push(d$x._reader.getUint32());},d$x.READ_STRINGS=function(){var d$a=d$x._reader.getUint32(),d$b=d$x._reader.getUint16(),d$c=d$x._reader.pos;d$x._reader.pos=d$a+d$x._DATA.offset;for(var d$d=0;d$d<d$b;d$d++)d$x._strings[d$d]=d$x._reader.readUTFString();d$x._reader.pos=d$c;},d$x.parse=function(d$a,d$b){d$x._templet=d$a;(d$x._reader=d$b).__getBuffer();d$x.READ_DATA(),d$x.READ_BLOCK(),d$x.READ_STRINGS();for(var d$c=0,d$d=d$x._BLOCK.count;d$c<d$d;d$c++){var d$e=d$b.getUint16(),d$f=d$x._strings[d$e],d$i=d$x["READ_"+d$f];if(null==d$i)throw new Error("model file err,no this function:"+d$e+" "+d$f);d$i.call();}},d$x.READ_ANIMATIONS=function(){var d$a=d$x._reader,d$b=d$a.__getBuffer(),d$c=0,d$d=0,d$e=0,d$f=0,d$i=d$a.getUint16(),d$j=[];for(d$j.length=d$i,d$c=0;d$c<d$i;d$c++)d$j[d$c]=d$K.interpolation[d$a.getByte()];var d$k=d$a.getUint8();for(d$x._templet._anis.length=d$k,d$c=0;d$c<d$k;d$c++){var d$l=d$x._templet._anis[d$c]={};d$l.nodes=new Array();var d$m=d$l.name=d$x._strings[d$a.getUint16()];d$x._templet._aniMap[d$m]=d$c,d$l.bone3DMap={},d$l.playTime=d$a.getFloat32();var d$n=d$l.nodes.length=d$a.getInt16();for(d$d=d$l.totalKeyframeDatasLength=0;d$d<d$n;d$d++){var d$o=d$l.nodes[d$d]={};d$o.keyframeWidth=d$i,d$o.childs=[];var d$p=d$a.getUint16();0<=d$p&&(d$o.name=d$x._strings[d$p],d$l.bone3DMap[d$o.name]=d$d),d$o.keyFrame=new Array(),d$o.parentIndex=d$a.getInt16(),-1==d$o.parentIndex?d$o.parent=null:d$o.parent=d$l.nodes[d$o.parentIndex],d$l.totalKeyframeDatasLength+=d$i,d$o.interpolationMethod=d$j,null!=d$o.parent&&d$o.parent.childs.push(d$o);var d$q=d$a.getUint16(),d$r=null,d$s=null;for(d$e=0,d$f=d$o.keyFrame.length=d$q;d$e<d$f;d$e++){(d$r=d$o.keyFrame[d$e]={}).startTime=d$a.getFloat32(),d$s&&(d$s.duration=d$r.startTime-d$s.startTime);var d$t=d$x._DATA.offset,d$u=d$a.getUint32(),d$v=4*d$i,d$w=d$b.slice(d$t+d$u,d$t+d$u+d$v);d$r.data=new Float32Array(d$w),d$s=d$r;}d$r.duration=0,d$o.playTime=d$l.playTime,d$x._templet._calculateKeyFrame(d$o,d$q,d$i);}}},d$x._templet=null,d$x._reader=null,d$x._strings=[],d$c(d$x,["_BLOCK",function(){return this._BLOCK={count:0};},"_DATA",function(){return this._DATA={offset:0,size:0};}]),d$x;}(),d$Ia=(function(){function d$a(){}d$d(d$a,"laya.ani.AnimationState"),d$a.stopped=0,d$a.paused=1,d$a.playing=2;}(),function(){function d$e(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new d$Va(),this.resultMatrix=new d$Ga(),this._children=[];}d$d(d$e,"laya.ani.bone.Bone");var d$a=d$e.prototype;return d$a.setTempMatrix=function(d$a){this._tempMatrix=d$a;var d$b,d$c=0;for(d$c=0,d$b=this._children.length;d$c<d$b;d$c++)this._children[d$c].setTempMatrix(this._tempMatrix);},d$a.update=function(d$a){var d$b;if(this.rotation=this.transform.skX,d$a)d$b=this.resultTransform.getMatrix(),d$Ga.mul(d$b,d$a,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone){if(this.inheritRotation&&this.inheritScale)d$b=this.resultTransform.getMatrix(),d$Ga.mul(d$b,this.parentBone.resultMatrix,this.resultMatrix);else{var d$c=this.parentBone,d$d=NaN,d$e=NaN,d$f=NaN,d$i=this.parentBone.resultMatrix;d$b=this.resultTransform.getMatrix();var d$j=d$i.a*d$b.tx+d$i.c*d$b.ty+d$i.tx,d$k=d$i.b*d$b.tx+d$i.d*d$b.ty+d$i.ty,d$l=new d$Ga();this.inheritRotation?(d$d=Math.atan2(d$c.resultMatrix.b,d$c.resultMatrix.a),d$e=Math.cos(d$d),d$f=Math.sin(d$d),d$l.setTo(d$e,d$f,-d$f,d$e,0,0),d$Ga.mul(this._tempMatrix,d$l,d$Ga.TEMP),d$Ga.TEMP.copyTo(d$l),d$b=this.resultTransform.getMatrix(),d$Ga.mul(d$b,d$l,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,d$b=this.resultTransform.getMatrix(),d$Ga.TEMP.identity(),d$Ga.TEMP.d=this.d,d$Ga.mul(d$b,d$Ga.TEMP,this.resultMatrix)),this.resultMatrix.tx=d$j,this.resultMatrix.ty=d$k;}}else(d$b=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var d$m,d$n=0;for(d$n=0,d$m=this._children.length;d$n<d$m;d$n++)this._children[d$n].update();},d$a.updateChild=function(){var d$a,d$b=0;for(d$b=0,d$a=this._children.length;d$b<d$a;d$b++)this._children[d$b].update();},d$a.setRotation=function(d$a){this._sprite&&(this._sprite.rotation=180*d$a/Math.PI);},d$a.updateDraw=function(d$a,d$b){d$e.ShowBones&&!d$e.ShowBones[this.name]||(this._sprite||(this._sprite=new d$fa(),this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),d$ea.stage.addChild(this._sprite)),this._sprite.x=d$a+this.resultMatrix.tx,this._sprite.y=d$b+this.resultMatrix.ty);var d$c,d$d=0;for(d$d=0,d$c=this._children.length;d$d<d$c;d$d++)this._children[d$d].updateDraw(d$a,d$b);},d$a.addChild=function(d$a){this._children.push(d$a),d$a.parentBone=this;},d$a.findBone=function(d$a){if(this.name==d$a)return this;var d$b,d$c,d$d=0;for(d$d=0,d$b=this._children.length;d$d<d$b;d$d++)if(d$c=this._children[d$d].findBone(d$a))return d$c;return null;},d$a.localToWorld=function(d$a){var d$b=d$a[0],d$c=d$a[1];d$a[0]=d$b*this.resultMatrix.a+d$c*this.resultMatrix.c+this.resultMatrix.tx,d$a[1]=d$b*this.resultMatrix.b+d$c*this.resultMatrix.d+this.resultMatrix.ty;},d$e.ShowBones={},d$e;}()),d$Ja=function(){function d$r(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null;}d$d(d$r,"laya.ani.bone.BoneSlot");var d$a=d$r.prototype;return d$a.showSlotData=function(d$a,d$b){void 0===d$b&&(d$b=!0),this.currSlotData=d$a,d$b&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null;},d$a.showDisplayByName=function(d$a){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(d$a));},d$a.replaceDisplayByName=function(d$a,d$b){if(this.currSlotData){var d$c;d$c=this.currSlotData.getDisplayByName(d$a);var d$d;d$d=this.currSlotData.getDisplayByName(d$b),this.replaceDisplayByIndex(d$c,d$d);}},d$a.replaceDisplayByIndex=function(d$a,d$b){this.currSlotData&&(this._replaceDic[d$a]=d$b,this.displayIndex==d$a&&this.showDisplayByIndex(d$a));},d$a.showDisplayByIndex=function(d$a){if(null!=this._replaceDic[d$a]&&(d$a=this._replaceDic[d$a]),this.currSlotData&&-1<d$a&&d$a<this.currSlotData.displayArr.length){if(this.displayIndex=d$a,this.currDisplayData=this.currSlotData.displayArr[d$a],this.currDisplayData){var d$b=this.currDisplayData.name;this.currTexture=this.templet.getTexture(d$b),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!d$s.isConchApp||d$s.isConchApp&&"0.9.15"<d$fa.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture));}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null;},d$a.replaceSkin=function(d$a){this._diyTexture=d$a,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null);},d$a.setParentMatrix=function(d$a){this._parentMatrix=d$a;},d$a.draw=function(d$a,d$b,d$c,d$d){if(void 0===d$c&&(d$c=!1),void 0===d$d&&(d$d=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var d$e,d$f=this.currTexture;switch(this._diyTexture&&(d$f=this._diyTexture),this.currDisplayData.type){case 0:if(d$a){var d$i=this.getDisplayMatrix();if(this._parentMatrix){var d$j=!1;if(d$i){var d$k;if(d$Ga.mul(d$i,this._parentMatrix,d$Ga.TEMP),d$k=d$c?(null==this._resultMatrix&&(this._resultMatrix=new d$Ga()),this._resultMatrix):new d$Ga(),!d$s.isWebGL&&this.currDisplayData.uvs||d$s.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var d$l=d$r._tempMatrix;d$l.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(d$l.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(d$j=!0,d$l.rotate(-Math.PI/2)),d$Ga.mul(d$l,d$Ga.TEMP,d$k);}else d$Ga.TEMP.copyTo(d$k);d$j?d$a.drawTexture(d$f,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,d$k):d$a.drawTexture(d$f,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,d$k);}}}break;case 1:if(null==(d$e=d$c?(null==this._skinSprite&&(this._skinSprite=d$r.createSkinMesh()),this._skinSprite):d$r.createSkinMesh()))return;var d$m;if(null==this.currDisplayData.bones){var d$n,d$o=this.currDisplayData.weights;this.deformData&&(d$o=this.deformData),d$n=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=d$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=d$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=d$o;this.currDisplayData.triangles.length;d$m=this.currDisplayData.triangles,d$e.init2(d$f,null,d$m,this._mVerticleArr,d$n);var d$p,d$q=this.getDisplayMatrix();if(this._parentMatrix)if(d$q)d$Ga.mul(d$q,this._parentMatrix,d$Ga.TEMP),d$p=d$c?(null==this._resultMatrix&&(this._resultMatrix=new d$Ga()),this._resultMatrix):new d$Ga(),d$Ga.TEMP.copyTo(d$p),d$e.transform=d$p;}else this.skinMesh(d$b,d$e,d$d);d$a.drawSkin(d$e);break;case 2:if(null==(d$e=d$c?(null==this._skinSprite&&(this._skinSprite=d$r.createSkinMesh()),this._skinSprite):d$r.createSkinMesh()))return;this.skinMesh(d$b,d$e,d$d),d$a.drawSkin(d$e);}}},d$a.skinMesh=function(d$a,d$b,d$c){var d$d,d$e=this.currTexture,d$f=this.currDisplayData.bones;d$d=this._diyTexture?(d$e=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=d$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=d$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var d$i,d$j,d$k=this.currDisplayData.weights,d$l=this.currDisplayData.triangles,d$m=0,d$n=0,d$o=0,d$p=NaN,d$q=NaN,d$r=0,d$s=0,d$t=[],d$u=0,d$v=0;if(this.deformData&&0<this.deformData.length){var d$w=0;for(d$u=0,d$v=d$f.length;d$u<d$v;){for(d$o=d$f[d$u++]+d$u,d$n=d$m=0;d$u<d$o;d$u++)d$j=d$a[d$f[d$u]],d$p=d$k[d$r]+this.deformData[d$w++],d$q=d$k[d$r+1]+this.deformData[d$w++],d$s=d$k[d$r+2],d$m+=(d$p*d$j.a+d$q*d$j.c+d$j.tx)*d$s,d$n+=(d$p*d$j.b+d$q*d$j.d+d$j.ty)*d$s,d$r+=3;d$t.push(d$m,d$n);}}else for(d$u=0,d$v=d$f.length;d$u<d$v;){for(d$o=d$f[d$u++]+d$u,d$n=d$m=0;d$u<d$o;d$u++)d$j=d$a[d$f[d$u]],d$p=d$k[d$r],d$q=d$k[d$r+1],d$s=d$k[d$r+2],d$m+=(d$p*d$j.a+d$q*d$j.c+d$j.tx)*d$s,d$n+=(d$p*d$j.b+d$q*d$j.d+d$j.ty)*d$s,d$r+=3;d$t.push(d$m,d$n);}this._mVerticleArr=d$t,d$i=d$l,d$b.init2(d$e,null,d$i,this._mVerticleArr,d$d);},d$a.drawBonePoint=function(d$a){d$a&&this._parentMatrix&&d$a.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000");},d$a.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null;},d$a.getMatrix=function(){return this._resultMatrix;},d$a.copy=function(){var d$a=new d$r();return d$a.type="copy",d$a.name=this.name,d$a.attachmentName=this.attachmentName,d$a.srcDisplayIndex=this.srcDisplayIndex,d$a.parent=this.parent,d$a.displayIndex=this.displayIndex,d$a.templet=this.templet,d$a.currSlotData=this.currSlotData,d$a.currTexture=this.currTexture,d$a.currDisplayData=this.currDisplayData,d$a;},d$r.createSkinMesh=function(){return d$s.isWebGL||d$s.isConchApp?d$p.skinAniSprite():(d$s.isWebGL,null);},d$c(d$r,["_tempMatrix",function(){return this._tempMatrix=new d$Ga();}]),d$r;}(),d$Ka=function(){function d$a(){this.skinName=null,this.deformSlotDataList=[];}return d$d(d$a,"laya.ani.bone.DeformAniData"),d$a;}(),d$La=function(){function d$a(){this.deformSlotDisplayList=[];}return d$d(d$a,"laya.ani.bone.DeformSlotData"),d$a;}(),d$Ma=function(){function d$a(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[];}d$d(d$a,"laya.ani.bone.DeformSlotDisplayData");var d$b=d$a.prototype;return d$b.binarySearch1=function(d$a,d$b){var d$c=0,d$d=d$a.length-2;if(0==d$d)return 1;for(var d$e=d$d>>>1;;){if(d$a[Math.floor(d$e+1)]<=d$b?d$c=d$e+1:d$d=d$e,d$c==d$d)return d$c+1;d$e=d$c+d$d>>>1;}return 0;},d$b.apply=function(d$a,d$b,d$c){if(void 0===d$c&&(d$c=1),d$a+=.05,!(this.timeList.length<=0)){var d$d=0;if(!(d$a<this.timeList[0])){var d$e=this.vectices[0].length,d$f=[],d$i=this.binarySearch1(this.timeList,d$a);if(this.frameIndex=d$i,d$a>=this.timeList[this.timeList.length-1]){var d$j=this.vectices[this.vectices.length-1];if(d$c<1)for(d$d=0;d$d<d$e;d$d++)d$f[d$d]+=(d$j[d$d]-d$f[d$d])*d$c;else for(d$d=0;d$d<d$e;d$d++)d$f[d$d]=d$j[d$d];this.deformData=d$f;}else{this.tweenKeyList[this.frameIndex];var d$k=this.vectices[this.frameIndex-1],d$l=this.vectices[this.frameIndex],d$m=this.timeList[this.frameIndex-1],d$n=this.timeList[this.frameIndex];d$c=this.tweenKeyList[d$i-1]?(d$a-d$m)/(d$n-d$m):0;var d$o=NaN;for(d$d=0;d$d<d$e;d$d++)d$o=d$k[d$d],d$f[d$d]=d$o+(d$l[d$d]-d$o)*d$c;this.deformData=d$f;}}}},d$a;}(),d$Na=function(){function d$a(){this.time=NaN,this.drawOrder=[];}return d$d(d$a,"laya.ani.bone.DrawOrderData"),d$a;}(),d$Oa=function(){function d$a(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN;}return d$d(d$a,"laya.ani.bone.EventData"),d$a;}(),d$u=function(){function d$da(d$a,d$b){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=d$a,this._targetBone=d$b[d$a.targetBoneIndex],this.isSpine=d$a.isSpine,null==this._bones&&(this._bones=[]);for(var d$c=this._bones.length=0,d$d=d$a.boneIndexs.length;d$c<d$d;d$c++)this._bones.push(d$b[d$a.boneIndexs[d$c]]);this.name=d$a.name,this.mix=d$a.mix,this.bendDirection=d$a.bendDirection;}d$d(d$da,"laya.ani.bone.IkConstraint");var d$a=d$da.prototype;return d$a.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix);}},d$a._applyIk1=function(d$a,d$b,d$c,d$d){var d$e=d$a.parentBone,d$f=1/(d$e.resultMatrix.a*d$e.resultMatrix.d-d$e.resultMatrix.b*d$e.resultMatrix.c),d$i=d$b-d$e.resultMatrix.tx,d$j=d$c-d$e.resultMatrix.ty,d$k=(d$i*d$e.resultMatrix.d-d$j*d$e.resultMatrix.c)*d$f-d$a.transform.x,d$l=(d$j*d$e.resultMatrix.a-d$i*d$e.resultMatrix.b)*d$f-d$a.transform.y,d$m=Math.atan2(d$l,d$k)*d$da.radDeg-0-d$a.transform.skX;d$a.transform.scX<0&&(d$m+=180),180<d$m?d$m-=360:d$m<-180&&(d$m+=360),d$a.transform.skX=d$a.transform.skY=d$a.transform.skX+d$m*d$d,d$a.update();},d$a.updatePos=function(d$a,d$b){this._sp&&this._sp.pos(d$a,d$b);},d$a._applyIk2=function(d$a,d$b,d$c,d$d,d$e,d$f){if(0!=d$f){var d$i=d$a.resultTransform.x,d$j=d$a.resultTransform.y,d$k=d$a.transform.scX,d$l=d$a.transform.scY,d$m=d$b.transform.scX,d$n=0,d$o=0,d$p=0;d$p=d$k<0?(d$k=-d$k,d$n=180,-1):(d$n=0,1),d$l<0&&(d$l=-d$l,d$p=-d$p),d$o=d$m<0?(d$m=-d$m,180):0;var d$q=d$b.resultTransform.x,d$r=NaN,d$s=NaN,d$t=NaN,d$u=d$a.resultMatrix.a,d$v=d$a.resultMatrix.c,d$w=d$a.resultMatrix.b,d$x=d$a.resultMatrix.d,d$y=Math.abs(d$k-d$l)<=1e-4;d$t=d$y?(d$s=d$u*d$q+d$v*(d$r=d$b.resultTransform.y)+d$a.resultMatrix.tx,d$w*d$q+d$x*d$r+d$a.resultMatrix.ty):(d$r=0,d$s=d$u*d$q+d$a.resultMatrix.tx,d$w*d$q+d$a.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new d$fa(),d$ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(d$c,d$d,15,"#ffff00"),this._sp.graphics.drawCircle(d$s,d$t,15,"#ff00ff")),d$a.setRotation(Math.atan2(d$t-d$a.resultMatrix.ty,d$s-d$a.resultMatrix.tx));var d$z=d$a.parentBone;d$u=d$z.resultMatrix.a,d$v=d$z.resultMatrix.c,d$w=d$z.resultMatrix.b;var d$A=1/(d$u*(d$x=d$z.resultMatrix.d)-d$v*d$w),d$B=d$c-d$z.resultMatrix.tx,d$C=d$d-d$z.resultMatrix.ty,d$D=(d$B*d$x-d$C*d$v)*d$A-d$i,d$E=(d$C*d$u-d$B*d$w)*d$A-d$j,d$F=((d$B=d$s-d$z.resultMatrix.tx)*d$x-(d$C=d$t-d$z.resultMatrix.ty)*d$v)*d$A-d$i,d$G=(d$C*d$u-d$B*d$w)*d$A-d$j,d$H=Math.sqrt(d$F*d$F+d$G*d$G),d$I=d$b.length*d$m,d$J=NaN,d$K=NaN;if(d$y){var d$L=(d$D*d$D+d$E*d$E-d$H*d$H-(d$I*=d$k)*d$I)/(2*d$H*d$I);d$L<-1?d$L=-1:1<d$L&&(d$L=1),d$K=Math.acos(d$L)*d$e,d$u=d$H+d$I*d$L,d$v=d$I*Math.sin(d$K),d$J=Math.atan2(d$E*d$u-d$D*d$v,d$D*d$u+d$E*d$v);}else{var d$M=(d$u=d$k*d$I)*d$u,d$N=(d$v=d$l*d$I)*d$v,d$O=d$D*d$D+d$E*d$E,d$P=Math.atan2(d$E,d$D),d$Q=-2*d$N*d$H,d$R=d$N-d$M;if(0<(d$x=d$Q*d$Q-4*d$R*(d$w=d$N*d$H*d$H+d$M*d$O-d$M*d$N))){var d$S=Math.sqrt(d$x);d$Q<0&&(d$S=-d$S);var d$T=(d$S=-(d$Q+d$S)/2)/d$R,d$U=d$w/d$S,d$V=Math.abs(d$T)<Math.abs(d$U)?d$T:d$U;d$V*d$V<=d$O&&(d$C=Math.sqrt(d$O-d$V*d$V)*d$e,d$J=d$P-Math.atan2(d$C,d$V),d$K=Math.atan2(d$C/d$l,(d$V-d$H)/d$k));}var d$W=0,d$X=Number.MAX_VALUE,d$Y=0,d$Z=0,d$$=0,d$_=0,d$g=0,d$h=0;d$_<(d$x=(d$B=d$H+d$u)*d$B)&&(d$$=0,d$_=d$x,d$g=d$B),(d$x=(d$B=d$H-d$u)*d$B)<d$X&&(d$W=Math.PI,d$X=d$x,d$Y=d$B);var d$aa=Math.acos(-d$u*d$H/(d$M-d$N));(d$x=(d$B=d$u*Math.cos(d$aa)+d$H)*d$B+(d$C=d$v*Math.sin(d$aa))*d$C)<d$X&&(d$W=d$aa,d$X=d$x,d$Y=d$B,d$Z=d$C),d$_<d$x&&(d$$=d$aa,d$_=d$x,d$g=d$B,d$h=d$C),d$K=d$O<=(d$X+d$_)/2?(d$J=d$P-Math.atan2(d$Z*d$e,d$Y),d$W*d$e):(d$J=d$P-Math.atan2(d$h*d$e,d$g),d$$*d$e);}var d$ba=Math.atan2(d$r,d$q)*d$p,d$ca=d$a.resultTransform.skX;180<(d$J=(d$J-d$ba)*d$da.radDeg+d$n-d$ca)?d$J-=360:d$J<-180&&(d$J+=360),d$a.resultTransform.x=d$i,d$a.resultTransform.y=d$j,d$a.resultTransform.skX=d$a.resultTransform.skY=d$ca+d$J*d$f,d$ca=d$b.resultTransform.skX,180<(d$K=((d$K+d$ba)*d$da.radDeg-0)*d$p+d$o-(d$ca%=360))?d$K-=360:d$K<-180&&(d$K+=360),d$b.resultTransform.x=d$q,d$b.resultTransform.y=d$r,d$b.resultTransform.skX=d$b.resultTransform.skY=d$b.resultTransform.skY+d$K*d$f,d$a.update();}},d$a._applyIk3=function(d$a,d$b,d$c,d$d,d$e,d$f){if(0!=d$f){var d$i,d$j,d$k=d$b.resultMatrix.a*d$b.length,d$l=d$b.resultMatrix.b*d$b.length,d$m=d$k*d$k+d$l*d$l,d$n=Math.sqrt(d$m),d$o=d$a.resultMatrix.tx,d$p=d$a.resultMatrix.ty,d$q=d$b.resultMatrix.tx,d$r=d$b.resultMatrix.ty,d$s=d$q-d$o,d$t=d$r-d$p,d$u=d$s*d$s+d$t*d$t,d$v=Math.sqrt(d$u),d$w=(d$s=d$c-d$a.resultMatrix.tx)*d$s+(d$t=d$d-d$a.resultMatrix.ty)*d$t,d$x=Math.sqrt(d$w);if(d$n+d$v<=d$x||d$x+d$n<=d$v||d$x+d$v<=d$n){var d$y=NaN;d$q=d$o+(d$y=d$n+d$v<=d$x?1:-1)*(d$c-d$o)*d$v/d$x,d$r=d$p+d$y*(d$d-d$p)*d$v/d$x;}else{var d$z=(d$u-d$m+d$w)/(2*d$w),d$A=Math.sqrt(d$u-d$z*d$z*d$w)/d$x,d$B=d$o+d$s*d$z,d$C=d$p+d$t*d$z,d$D=-d$t*d$A,d$E=d$s*d$A;d$r=0<d$e?(d$q=d$B-d$D,d$C-d$E):(d$q=d$B+d$D,d$C+d$E);}d$i=d$q,d$j=d$r,this.isDebug&&(this._sp||(this._sp=new d$fa(),d$ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(d$o,d$p,15,"#ff00ff"),this._sp.graphics.drawCircle(d$c,d$d,15,"#ffff00"),this._sp.graphics.drawCircle(d$i,d$j,15,"#ff00ff"));var d$F,d$G;d$F=Math.atan2(d$j-d$a.resultMatrix.ty,d$i-d$a.resultMatrix.tx),d$a.setRotation(d$F),(d$G=d$da._tempMatrix).identity(),d$G.rotate(d$F),d$G.scale(d$a.resultMatrix.getScaleX(),d$a.resultMatrix.getScaleY()),d$G.translate(d$a.resultMatrix.tx,d$a.resultMatrix.ty),d$G.copyTo(d$a.resultMatrix),d$a.updateChild();var d$H,d$I;d$H=Math.atan2(d$d-d$j,d$c-d$i),d$b.setRotation(d$H),(d$I=d$da._tempMatrix).identity(),d$I.rotate(d$H),d$I.scale(d$b.resultMatrix.getScaleX(),d$b.resultMatrix.getScaleY()),d$I.translate(d$i,d$j),d$G.copyTo(d$b.resultMatrix),d$b.updateChild();}},d$c(d$da,["radDeg",function(){return this.radDeg=180/Math.PI;},"degRad",function(){return this.degRad=Math.PI/180;},"_tempMatrix",function(){return this._tempMatrix=new d$Ga();}]),d$da;}(),d$Pa=function(){function d$a(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[];}return d$d(d$a,"laya.ani.bone.IkConstraintData"),d$a;}(),d$x=function(){function d$I(d$a,d$b){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=d$a,this.position=d$a.position,this.spacing=d$a.spacing,this.rotateMix=d$a.rotateMix,this.translateMix=d$a.translateMix,this.bones=[];for(var d$c=this.data.bones,d$d=0,d$e=d$c.length;d$d<d$e;d$d++)this.bones.push(d$b[d$c[d$d]]);}d$d(d$I,"laya.ani.bone.PathConstraint");var d$a=d$I.prototype;return d$a.apply=function(d$a,d$b){if(this.target){var d$c=this.translateMix,d$d=this.translateMix,d$e=0<d$d,d$f=this.data.spacingMode,d$i="length"==d$f,d$j=this.data.rotateMode,d$k="tangent"==d$j,d$l="chainScale"==d$j,d$m=[],d$n=this.bones.length,d$o=d$k?d$n:d$n+1,d$p=[];(this._spaces=d$p)[0]=this.position;var d$q=this.spacing;if(d$l||d$i)for(var d$r=0,d$s=d$o-1;d$r<d$s;){var d$t=this.bones[d$r],d$u=d$t.length,d$v=d$u*d$t.resultMatrix.a,d$w=d$u*d$t.resultMatrix.b;d$u=Math.sqrt(d$v*d$v+d$w*d$w),d$l&&(d$m[d$r]=d$u),d$p[++d$r]=d$i?Math.max(0,d$u+d$q):d$q;}else for(d$r=1;d$r<d$o;d$r++)d$p[d$r]=d$q;var d$x=this.computeWorldPositions(this.target,d$a,d$b,d$o,d$k,"percent"==this.data.positionMode,"percent"==d$f);if(this._debugKey){for(d$r=0;d$r<d$x.length;d$r++)d$b.drawCircle(d$x[d$r++],d$x[d$r++],5,"#00ff00");var d$y=[];for(d$r=0;d$r<d$x.length;d$r++)d$y.push(d$x[d$r++],d$x[d$r++]);d$b.drawLines(0,0,d$y,"#ff0000");}var d$z=d$x[0],d$A=d$x[1],d$B=this.data.offsetRotation,d$C="chain"==d$j&&0==d$B,d$D=NaN;for(d$r=0,d$D=3;d$r<d$n;d$r++,d$D+=3){(d$t=this.bones[d$r]).resultMatrix.tx+=(d$z-d$t.resultMatrix.tx)*d$c,d$t.resultMatrix.ty+=(d$A-d$t.resultMatrix.ty)*d$c;var d$E=(d$v=d$x[d$D])-d$z,d$F=(d$w=d$x[d$D+1])-d$A;if(d$l&&0!=(d$u=d$m[d$r])){var d$G=(Math.sqrt(d$E*d$E+d$F*d$F)/d$u-1)*d$d+1;d$t.resultMatrix.a*=d$G,d$t.resultMatrix.c*=d$G;}if(d$z=d$v,d$A=d$w,d$e){var d$H=d$t.resultMatrix.a,d$I=d$t.resultMatrix.c,d$J=d$t.resultMatrix.b,d$K=d$t.resultMatrix.d,d$L=NaN,d$M=NaN,d$N=NaN;d$L=d$k?d$x[d$D-1]:0==d$p[d$r+1]?d$x[d$D+2]:Math.atan2(d$F,d$E),d$L-=Math.atan2(d$J,d$H)-d$B/180*Math.PI,d$C&&(d$M=Math.cos(d$L),d$N=Math.sin(d$L),d$z+=((d$u=d$t.length)*(d$M*d$H-d$N*d$J)-d$E)*d$d,d$A+=(d$u*(d$N*d$H+d$M*d$J)-d$F)*d$d),d$L>Math.PI?d$L-=2*Math.PI:d$L<-Math.PI&&(d$L+=2*Math.PI),d$L*=d$d,d$M=Math.cos(d$L),d$N=Math.sin(d$L),d$t.resultMatrix.a=d$M*d$H-d$N*d$J,d$t.resultMatrix.c=d$M*d$I-d$N*d$K,d$t.resultMatrix.b=d$N*d$H+d$M*d$J,d$t.resultMatrix.d=d$N*d$I+d$M*d$K;}}}},d$a.computeWorldVertices2=function(d$a,d$b,d$c,d$d,d$e,d$f){var d$i,d$j,d$k=d$a.currDisplayData.bones,d$l=d$a.currDisplayData.weights,d$m=d$a.currDisplayData.triangles,d$n=0,d$o=0,d$p=0,d$q=0,d$r=0,d$s=0,d$t=0,d$u=0,d$v=0,d$w=0,d$x=0;if(null!=d$k){for(d$n=0;d$n<d$c;d$n+=2)d$o+=(d$q=d$k[d$o])+1,d$p+=d$q;var d$y=d$b;for(d$r=d$f,d$s=3*d$p;d$r<d$d;d$r+=2){for(d$u=d$t=0,d$q=d$k[d$o++],d$q+=d$o;d$o<d$q;d$o++,d$s+=3){d$i=d$y[d$k[d$o]].resultMatrix,d$v=d$l[d$s],d$w=d$l[d$s+1];var d$z=d$l[d$s+2];d$t+=(d$v*d$i.a+d$w*d$i.c+d$i.tx)*d$z,d$u+=(d$v*d$i.b+d$w*d$i.d+d$i.ty)*d$z;}d$e[d$r]=d$t,d$e[d$r+1]=d$u;}}else{var d$A,d$B;if(d$m||(d$m=d$l),d$a.deformData&&(d$m=d$a.deformData),d$A=d$a.parent,d$b)for(d$x=d$b.length,d$n=0;d$n<d$x;d$n++)if(d$b[d$n].name==d$A){d$j=d$b[d$n];break;}d$j&&(d$B=d$j.resultMatrix),d$B||(d$B=d$I._tempMt);var d$C=d$B.tx,d$D=d$B.ty,d$E=d$B.a,d$F=d$B.b,d$G=d$B.c,d$H=d$B.d;for(d$j&&(d$H*=d$j.d),d$o=d$c,d$r=d$f;d$r<d$d;d$o+=2,d$r+=2)d$v=d$m[d$o],d$w=d$m[d$o+1],d$e[d$r]=d$v*d$E+d$w*d$F+d$C,d$e[d$r+1]=-(d$v*d$G+d$w*d$H+d$D);}},d$a.computeWorldPositions=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i){d$a.currDisplayData.bones,d$a.currDisplayData.weights,d$a.currDisplayData.triangles;var d$j=[],d$k=0,d$l=d$a.currDisplayData.verLen,d$m=this.position,d$n=this._spaces,d$o=[],d$p=[],d$q=d$l/6,d$r=-1,d$s=NaN,d$t=0,d$u=0,d$v=NaN,d$w=NaN,d$x=NaN,d$y=NaN;if(d$q--,d$l-=4,this.computeWorldVertices2(d$a,d$b,2,d$l,d$j,0),this._debugKey)for(d$k=0;d$k<d$j.length;)d$c.drawCircle(d$j[d$k++],d$j[d$k++],10,"#ff0000");d$o=d$j,this._curves.length=d$q;var d$z=this._curves,d$A=d$o[d$s=0],d$B=d$o[1],d$C=0,d$D=0,d$E=0,d$F=0,d$G=0,d$H=0,d$I=NaN,d$J=NaN,d$K=NaN,d$L=NaN,d$M=NaN,d$N=NaN,d$O=NaN,d$P=NaN,d$Q=0;for(d$k=0,d$Q=2;d$k<d$q;d$k++,d$Q+=6)d$C=d$o[d$Q],d$D=d$o[d$Q+1],d$E=d$o[d$Q+2],d$F=d$o[d$Q+3],d$M=2*(d$I=.1875*(d$A-2*d$C+d$E))+(d$K=.09375*(3*(d$C-d$E)-d$A+(d$G=d$o[d$Q+4]))),d$N=2*(d$J=.1875*(d$B-2*d$D+d$F))+(d$L=.09375*(3*(d$D-d$F)-d$B+(d$H=d$o[d$Q+5]))),d$O=.75*(d$C-d$A)+d$I+.16666667*d$K,d$P=.75*(d$D-d$B)+d$J+.16666667*d$L,d$s+=Math.sqrt(d$O*d$O+d$P*d$P),d$O+=d$M,d$P+=d$N,d$M+=d$K,d$N+=d$L,d$s+=Math.sqrt(d$O*d$O+d$P*d$P),d$O+=d$M,d$P+=d$N,d$s+=Math.sqrt(d$O*d$O+d$P*d$P),d$O+=d$M+d$K,d$P+=d$N+d$L,d$s+=Math.sqrt(d$O*d$O+d$P*d$P),d$z[d$k]=d$s,d$A=d$G,d$B=d$H;if(d$f&&(d$m*=d$s),d$i)for(d$k=0;d$k<d$d;d$k++)d$n[d$k]*=d$s;var d$R=this._segments,d$S=0,d$T=0;for(d$T=d$u=d$t=d$k=0;d$k<d$d;d$k++,d$t+=3)if((d$v=d$m+=d$w=d$n[d$k])<0)this.addBeforePosition(d$v,d$o,0,d$p,d$t);else if(d$s<d$v)this.addAfterPosition(d$v-d$s,d$o,d$l-4,d$p,d$t);else{for(;;d$u++)if(!((d$y=d$z[d$u])<d$v)){0==d$u?d$v/=d$y:d$v=(d$v-(d$x=d$z[d$u-1]))/(d$y-d$x);break;}if(d$u!=d$r){var d$U=6*(d$r=d$u);for(d$A=d$o[d$U],d$B=d$o[d$U+1],d$C=d$o[d$U+2],d$D=d$o[d$U+3],d$E=d$o[d$U+4],d$F=d$o[d$U+5],d$M=2*(d$I=.03*(d$A-2*d$C+d$E))+(d$K=.006*(3*(d$C-d$E)-d$A+(d$G=d$o[d$U+6]))),d$N=2*(d$J=.03*(d$B-2*d$D+d$F))+(d$L=.006*(3*(d$D-d$F)-d$B+(d$H=d$o[d$U+7]))),d$O=.3*(d$C-d$A)+d$I+.16666667*d$K,d$P=.3*(d$D-d$B)+d$J+.16666667*d$L,d$S=Math.sqrt(d$O*d$O+d$P*d$P),d$R[0]=d$S,d$U=1;d$U<8;d$U++)d$O+=d$M,d$P+=d$N,d$M+=d$K,d$N+=d$L,d$S+=Math.sqrt(d$O*d$O+d$P*d$P),d$R[d$U]=d$S;d$O+=d$M,d$P+=d$N,d$S+=Math.sqrt(d$O*d$O+d$P*d$P),d$R[8]=d$S,d$O+=d$M+d$K,d$P+=d$N+d$L,d$S+=Math.sqrt(d$O*d$O+d$P*d$P),d$R[9]=d$S,d$T=0;}for(d$v*=d$S;;d$T++)if(!((d$y=d$R[d$T])<d$v)){0==d$T?d$v/=d$y:d$v=d$T+(d$v-(d$x=d$R[d$T-1]))/(d$y-d$x);break;}this.addCurvePosition(.1*d$v,d$A,d$B,d$C,d$D,d$E,d$F,d$G,d$H,d$p,d$t,d$e||0<d$k&&0==d$w);}return d$p;},d$a.addBeforePosition=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$b[d$c],d$i=d$b[d$c+1],d$j=d$b[d$c+2]-d$f,d$k=d$b[d$c+3]-d$i,d$l=Math.atan2(d$k,d$j);d$d[d$e]=d$f+d$a*Math.cos(d$l),d$d[d$e+1]=d$i+d$a*Math.sin(d$l),d$d[d$e+2]=d$l;},d$a.addAfterPosition=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$b[d$c+2],d$i=d$b[d$c+3],d$j=d$f-d$b[d$c],d$k=d$i-d$b[d$c+1],d$l=Math.atan2(d$k,d$j);d$d[d$e]=d$f+d$a*Math.cos(d$l),d$d[d$e+1]=d$i+d$a*Math.sin(d$l),d$d[d$e+2]=d$l;},d$a.addCurvePosition=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m,d$n){0==d$a&&(d$a=1e-4);var d$o=d$a*d$a,d$p=d$o*d$a,d$q=1-d$a,d$r=d$q*d$q,d$s=d$r*d$q,d$t=d$q*d$a,d$u=3*d$t,d$v=d$q*d$u,d$w=d$u*d$a,d$x=d$b*d$s+d$d*d$v+d$f*d$w+d$j*d$p,d$y=d$c*d$s+d$e*d$v+d$i*d$w+d$k*d$p;d$l[d$m]=d$x,d$l[d$m+1]=d$y,d$l[d$m+2]=d$n?Math.atan2(d$y-(d$c*d$r+d$e*d$t*2+d$i*d$o),d$x-(d$b*d$r+d$d*d$t*2+d$f*d$o)):0;},d$I.NONE=-1,d$I.BEFORE=-2,d$I.AFTER=-3,d$c(d$I,["_tempMt",function(){return this._tempMt=new d$Ga();}]),d$I;}(),d$Qa=function(){function d$a(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[];}return d$d(d$a,"laya.ani.bone.PathConstraintData"),d$a;}(),d$Ra=function(){function d$a(){this.name=null,this.slotArr=[];}return d$d(d$a,"laya.ani.bone.SkinData"),d$a;}(),d$Sa=function(){function d$a(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0;}d$d(d$a,"laya.ani.bone.SkinSlotDisplayData");var d$b=d$a.prototype;return d$b.createTexture=function(d$a){return this.texture||(this.texture=new d$Ha(d$a.bitmap,this.uvs),d$a.bitmap.alphaTexture&&(this.texture.alphaTexture=new d$Ha(d$a.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=d$a.height,this.texture.height=d$a.width,this.texture.offsetX=-d$a.offsetX,this.texture.offsetY=-d$a.offsetY,this.texture.sourceWidth=d$a.sourceHeight,this.texture.sourceHeight=d$a.sourceWidth):(this.texture.width=d$a.width,this.texture.height=d$a.height,this.texture.offsetX=-d$a.offsetX,this.texture.offsetY=-d$a.offsetY,this.texture.sourceWidth=d$a.sourceWidth,this.texture.sourceHeight=d$a.sourceHeight),d$s.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture;},d$b.destory=function(){this.texture&&this.texture.destroy();},d$a;}(),d$Ta=function(){function d$a(){this.name=null,this.displayArr=[];}return d$d(d$a,"laya.ani.bone.SlotData"),d$a.prototype.getDisplayByName=function(d$a){for(var d$b=0,d$c=this.displayArr.length;d$b<d$c;d$b++)if(this.displayArr[d$b].attachmentName==d$a)return d$b;return-1;},d$a;}(),d$y=function(){function d$a(d$a,d$b){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=d$r(2,0),this._data=d$a,null==this._bones&&(this._bones=[]),this.target=d$b[d$a.targetIndex];var d$c,d$d=0;for(d$d=0,d$c=d$a.boneIndexs.length;d$d<d$c;d$d++)this._bones.push(d$b[d$a.boneIndexs[d$d]]);this.rotateMix=d$a.rotateMix,this.translateMix=d$a.translateMix,this.scaleMix=d$a.scaleMix,this.shearMix=d$a.shearMix;}return d$d(d$a,"laya.ani.bone.TfConstraint"),d$a.prototype.apply=function(){for(var d$a,d$b=this.target.resultMatrix.a,d$c=this.target.resultMatrix.b,d$d=this.target.resultMatrix.c,d$e=this.target.resultMatrix.d,d$f=0,d$i=this._bones.length;d$f<d$i;d$f++){if(d$a=this._bones[d$f],0<this.rotateMix){var d$j=d$a.resultMatrix.a,d$k=d$a.resultMatrix.b,d$l=d$a.resultMatrix.c,d$m=d$a.resultMatrix.d,d$n=Math.atan2(d$d,d$b)-Math.atan2(d$l,d$j)+this._data.offsetRotation*Math.PI/180;d$n>Math.PI?d$n-=2*Math.PI:d$n<-Math.PI&&(d$n+=2*Math.PI),d$n*=this.rotateMix;var d$o=Math.cos(d$n),d$p=Math.sin(d$n);d$a.resultMatrix.a=d$o*d$j-d$p*d$l,d$a.resultMatrix.b=d$o*d$k-d$p*d$m,d$a.resultMatrix.c=d$p*d$j+d$o*d$l,d$a.resultMatrix.d=d$p*d$k+d$o*d$m;}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),d$a.resultMatrix.tx+=(this._temp[0]-d$a.resultMatrix.tx)*this.translateMix,d$a.resultMatrix.ty+=(this._temp[1]-d$a.resultMatrix.ty)*this.translateMix,d$a.updateChild()),0<this.scaleMix){var d$q=Math.sqrt(d$a.resultMatrix.a*d$a.resultMatrix.a+d$a.resultMatrix.c*d$a.resultMatrix.c),d$r=Math.sqrt(d$b*d$b+d$d*d$d),d$s=1e-5<d$q?(d$q+(d$r-d$q+this._data.offsetScaleX)*this.scaleMix)/d$q:0;d$a.resultMatrix.a*=d$s,d$a.resultMatrix.c*=d$s,d$q=Math.sqrt(d$a.resultMatrix.b*d$a.resultMatrix.b+d$a.resultMatrix.d*d$a.resultMatrix.d),d$r=Math.sqrt(d$c*d$c+d$e*d$e),d$s=1e-5<d$q?(d$q+(d$r-d$q+this._data.offsetScaleY)*this.scaleMix)/d$q:0,d$a.resultMatrix.b*=d$s,d$a.resultMatrix.d*=d$s;}if(0<this.shearMix){d$k=d$a.resultMatrix.b,d$m=d$a.resultMatrix.d;var d$t=Math.atan2(d$m,d$k);(d$n=Math.atan2(d$e,d$c)-Math.atan2(d$d,d$b)-(d$t-Math.atan2(d$a.resultMatrix.c,d$a.resultMatrix.a)))>Math.PI?d$n-=2*Math.PI:d$n<-Math.PI&&(d$n+=2*Math.PI),d$n=d$t+(d$n+this._data.offsetShearY*Math.PI/180)*this.shearMix,d$s=Math.sqrt(d$k*d$k+d$m*d$m),d$a.resultMatrix.b=Math.cos(d$n)*d$s,d$a.resultMatrix.d=Math.sin(d$n)*d$s;}}},d$a;}(),d$Ua=function(){function d$a(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[];}return d$d(d$a,"laya.ani.bone.TfConstraintData"),d$a;}(),d$Va=function(){function d$a(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null;}d$d(d$a,"laya.ani.bone.Transform");var d$b=d$a.prototype;return d$b.initData=function(d$a){null!=d$a.x&&(this.x=d$a.x),null!=d$a.y&&(this.y=d$a.y),null!=d$a.skX&&(this.skX=d$a.skX),null!=d$a.skY&&(this.skY=d$a.skY),null!=d$a.scX&&(this.scX=d$a.scX),null!=d$a.scY&&(this.scY=d$a.scY);},d$b.getMatrix=function(){var d$a;return(d$a=this.mMatrix?this.mMatrix:this.mMatrix=new d$Ga()).identity(),d$a.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(d$a,this.skewX*Math.PI/180,this.skewY*Math.PI/180),d$a.rotate(this.skX*Math.PI/180),d$a.translate(this.x,this.y),d$a;},d$b.skew=function(d$a,d$b,d$c){var d$d=Math.sin(d$c),d$e=Math.cos(d$c),d$f=Math.sin(d$b),d$i=Math.cos(d$b);return d$a.setTo(d$a.a*d$i-d$a.b*d$d,d$a.a*d$f+d$a.b*d$e,d$a.c*d$i-d$a.d*d$d,d$a.c*d$f+d$a.d*d$e,d$a.tx*d$i-d$a.ty*d$d,d$a.tx*d$f+d$a.ty*d$e),d$a;},d$a;}(),d$z=function(){function d$a(){}return d$d(d$a,"laya.ani.bone.UVTools"),d$a.getRelativeUV=function(d$a,d$b,d$c){var d$d=d$a[0],d$e=d$a[2]-d$a[0],d$f=d$a[1],d$i=d$a[5]-d$a[1];d$c||(d$c=[]),d$c.length=d$b.length;var d$j,d$k=0;d$j=d$c.length;var d$l=1/d$e,d$m=1/d$i;for(d$k=0;d$k<d$j;d$k+=2)d$c[d$k]=(d$b[d$k]-d$d)*d$l,d$c[d$k+1]=(d$b[d$k+1]-d$f)*d$m;return d$c;},d$a.getAbsoluteUV=function(d$a,d$b,d$c){if(0==d$a[0]&&0==d$a[1]&&1==d$a[4]&&1==d$a[5])return d$c?(d$t.copyArray(d$c,d$b),d$c):d$b;var d$d=d$a[0],d$e=d$a[2]-d$a[0],d$f=d$a[1],d$i=d$a[5]-d$a[1];d$c||(d$c=[]),d$c.length=d$b.length;var d$j,d$k=0;for(d$j=d$c.length,d$k=0;d$k<d$j;d$k+=2)d$c[d$k]=d$b[d$k]*d$e+d$d,d$c[d$k+1]=d$b[d$k+1]*d$i+d$f;return d$c;},d$a;}(),d$I=function(){function d$a(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null;}return d$d(d$a,"laya.ani.KeyFramesContent"),d$a;}(),d$A=function(){function d$m(){}return d$d(d$m,"laya.ani.math.BezierLerp"),d$m.getBezierRate=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$m._getBezierParamKey(d$b,d$c,d$d,d$e),d$i=100*d$f+d$a;if(d$m._bezierResultCache[d$i])return d$m._bezierResultCache[d$i];var d$j,d$k=d$m._getBezierPoints(d$b,d$c,d$d,d$e,d$f),d$l=0;for(d$j=d$k.length,d$l=0;d$l<d$j;d$l+=2)if(d$a<=d$k[d$l])return d$m._bezierResultCache[d$i]=d$k[d$l+1],d$k[d$l+1];return d$m._bezierResultCache[d$i]=1;},d$m._getBezierParamKey=function(d$a,d$b,d$c,d$d){return 100*(100*(100*(100*d$a+d$b)+d$c)+d$d);},d$m._getBezierPoints=function(d$a,d$b,d$c,d$d,d$e){return d$m._bezierPointsCache[d$e]?d$m._bezierPointsCache[d$e]:(d$f=[0,0,d$a,d$b,d$c,d$d,1,1],d$i=new d$j().getBezierPoints(d$f,100,3),d$m._bezierPointsCache[d$e]=d$i);var d$f,d$i;},d$m._bezierResultCache={},d$m._bezierPointsCache={},d$m;}(),d$B=function(d$a){function d$b(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,d$b.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1;}d$d(d$b,"laya.ani.AnimationPlayer",d$e);var d$c=d$b.prototype;return d$ea.imps(d$c,{"laya.resource.IDestroy":!0}),d$c._onTempletLoadedComputeFullKeyframeIndices=function(d$a,d$b,d$c){this._templet===d$c&&this._cachePlayRate===d$a&&this._cacheFrameRate===d$b&&this._computeFullKeyframeIndices();},d$c._computeFullKeyframeIndices=function(){for(var d$a=this._fullFrames=[],d$b=this._templet,d$c=this._cacheFrameRateInterval*this._cachePlayRate,d$d=0,d$e=d$b.getAnimationCount();d$d<d$e;d$d++){for(var d$f=[],d$i=0,d$j=d$b.getAnimation(d$d).nodes.length;d$i<d$j;d$i++){for(var d$k=d$b.getAnimation(d$d).nodes[d$i],d$l=Math.floor(d$k.playTime/d$c+.01),d$m=new Uint16Array(d$l+1),d$n=-1,d$o=0,d$p=d$k.keyFrame.length;d$o<d$p;d$o++){var d$q=d$k.keyFrame[d$o],d$r=d$q.startTime,d$s=d$r+d$q.duration+d$c;do{for(var d$t=Math.floor(d$r/d$c+.5),d$u=d$n+1;d$u<d$t;d$u++)d$m[d$u]=d$o;d$m[d$n=d$t]=d$o,d$r+=d$c;}while(d$r<=d$s);}d$f.push(d$m);}d$a.push(d$f);}},d$c._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration();},d$c._calculatePlayDuration=function(){if(0!==this.state){var d$a=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=d$a),this._playEnd>d$a&&(this._playEnd=d$a),this._playDuration=this._playEnd-this._playStart;}},d$c._setPlayParams=function(d$a,d$b){this._currentTime=d$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/d$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*d$b;},d$c._setPlayParamsWhenStop=function(d$a,d$b){this._currentTime=d$a,this._currentKeyframeIndex=Math.max(Math.floor(d$a/d$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*d$b,this._currentAnimationClipIndex=-1;},d$c._update=function(d$a){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var d$b=this._cacheFrameRateInterval*this._cachePlayRate,d$c=0;this._startUpdateLoopCount!==d$q.loopCount&&(d$c=d$a*this.playbackRate,this._elapsedPlaybackTime+=d$c);var d$d=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=d$d)return this._setPlayParamsWhenStop(d$d,d$b),void this.event("stopped");if(d$c+=this._currentTime,0<d$d){if(d$d<=d$c)do{if(d$c-=d$d,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(d$d,d$b),this._stopWhenCircleFinish=!1,void this.event("stopped");d$c<d$d&&(this._setPlayParams(d$c,d$b),this.event("complete"));}while(d$d<=d$c);else this._setPlayParams(d$c,d$b);}else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(d$d,d$b),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete");}}},d$c._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0;},d$c.play=function(d$a,d$b,d$c,d$d,d$e){if(void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=1),void 0===d$c&&(d$c=2147483647),void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(d$c<0||d$d<0||d$e<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==d$e&&d$e<d$d)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=d$b,this._overallDuration=d$c,this._playStart=d$d,this._playEnd=d$e,this._paused=!1,this._currentAnimationClipIndex=d$a,this._currentKeyframeIndex=0,this._startUpdateLoopCount=d$q.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0);},d$c.playByFrame=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$a&&(d$a=0),void 0===d$b&&(d$b=1),void 0===d$c&&(d$c=2147483647),void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0),void 0===d$f&&(d$f=30);var d$i=1e3/d$f;this.play(d$a,d$b,d$c,d$d*d$i,d$e*d$i);},d$c.stop=function(d$a){void 0===d$a&&(d$a=!0),d$a?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0;},d$f(0,d$c,"playEnd",function(){return this._playEnd;}),d$f(0,d$c,"templet",function(){return this._templet;},function(d$a){0===!this.state&&this.stop(!0),this._templet!==d$a&&((this._templet=d$a).loaded?this._computeFullKeyframeIndices():d$a.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]));}),d$f(0,d$c,"playStart",function(){return this._playStart;}),d$f(0,d$c,"playDuration",function(){return this._playDuration;}),d$f(0,d$c,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2;}),d$f(0,d$c,"currentKeyframeIndex",function(){return this._currentKeyframeIndex;}),d$f(0,d$c,"overallDuration",function(){return this._overallDuration;}),d$f(0,d$c,"currentFrameTime",function(){return this._currentFrameTime;}),d$f(0,d$c,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex;}),d$f(0,d$c,"currentPlayTime",function(){return this._currentTime+this._playStart;}),d$f(0,d$c,"cachePlayRate",function(){return this._cachePlayRate;},function(d$a){this._cachePlayRate!==d$a&&(this._cachePlayRate=d$a,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[d$a,this._cacheFrameRate])));}),d$f(0,d$c,"cacheFrameRate",function(){return this._cacheFrameRate;},function(d$a){this._cacheFrameRate!==d$a&&(this._cacheFrameRate=d$a,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,d$a])));}),d$f(0,d$c,"currentTime",null,function(d$a){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(d$a<this._playStart||d$a>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=d$q.loopCount;var d$b=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=d$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/d$b),0),this._currentFrameTime=this._currentKeyframeIndex*d$b;}}),d$f(0,d$c,"paused",function(){return this._paused;},function(d$a){(this._paused=d$a)&&this.event("paused");}),d$f(0,d$c,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval;}),d$f(0,d$c,"destroyed",function(){return this._destroyed;}),d$b;}(),d$J=function(d$a){function d$b(){d$b.__super.call(this),d$s.isConchNode&&(this.drawSkin=function(d$a){d$a.transform||(d$a.transform=d$Ga.EMPTY),this._addCmd([d$a]),this.setSkinMesh&&this.setSkinMesh(d$a._ps,d$a.mVBData,d$a.mEleNum,0,d$a.mTexture,d$a.transform);});}return d$d(d$b,"laya.ani.GraphicsAni",d$i),d$b.prototype.drawSkin=function(d$a){var d$b=[d$a];this._saveToCmd(d$s._context._drawSkin,d$b);},d$b.create=function(){return d$b._caches.pop()||new d$b();},d$b.recycle=function(d$a){d$a.clear(),d$b._caches.push(d$a);},d$b._caches=[],d$b;}(),d$K=function(d$a){function d$u(){this._aniMap={},this.unfixedLastAniIndex=-1,d$u.__super.call(this),this._anis=new Array();}d$d(d$u,"laya.ani.AnimationTemplet",d$m);var d$b=d$u.prototype;return d$b.parse=function(d$a){var d$b=new d$Fa(d$a);this._aniVersion=d$b.readUTFString(),d$v.parse(this,d$b);},d$b._calculateKeyFrame=function(d$a,d$b,d$c){var d$d=d$a.keyFrame;d$d[d$b]=d$d[0];for(var d$e=0;d$e<d$b;d$e++){var d$f=d$d[d$e];d$f.nextData=0===d$f.duration?d$f.data:d$d[d$e+1].data;}d$d.length--;},d$b.onAsynLoaded=function(d$a,d$b,d$c){var d$d=new d$Fa(d$b);switch(this._aniVersion=d$d.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":d$w.parse(this,d$d);break;default:d$v.parse(this,d$d);}this._endLoaded();},d$b.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null;},d$b.getAnimationCount=function(){return this._anis.length;},d$b.getAnimation=function(d$a){return this._anis[d$a];},d$b.getAniDuration=function(d$a){return this._anis[d$a].playTime;},d$b.getNodes=function(d$a){return this._anis[d$a].nodes;},d$b.getNodeIndexWithName=function(d$a,d$b){return this._anis[d$a].bone3DMap[d$b];},d$b.getNodeCount=function(d$a){return this._anis[d$a].nodes.length;},d$b.getTotalkeyframesLength=function(d$a){return this._anis[d$a].totalKeyframeDatasLength;},d$b.getPublicExtData=function(){return this._publicExtData;},d$b.getAnimationDataWithCache=function(d$a,d$b,d$c,d$d){var d$e=d$b[d$c];if(d$e){var d$f=d$e[d$a];return d$f?d$f[d$d]:null;}return null;},d$b.setAnimationDataWithCache=function(d$a,d$b,d$c,d$d,d$e){var d$f=d$b[d$c]||(d$b[d$c]={});(d$f[d$a]||(d$f[d$a]=[]))[d$d]=d$e;},d$b.getOriginalData=function(d$a,d$b,d$c,d$d,d$e){for(var d$f=this._anis[d$a].nodes,d$i=0,d$j=0,d$k=d$f.length,d$l=0;d$j<d$k;d$j++){var d$m,d$n=d$f[d$j];d$m=d$n.keyFrame[d$c[d$j][d$d]],d$n.dataOffset=d$l;var d$o=d$e-d$m.startTime,d$p=d$n.lerpType;if(d$p)switch(d$p){case 0:case 1:for(d$i=0;d$i<d$n.keyframeWidth;)d$i+=d$n.interpolationMethod[d$i](d$n,d$i,d$b,d$l+d$i,d$m.data,d$o,null,d$m.duration,d$m.nextData);break;case 2:var d$q=d$m.interpolationData,d$r=d$q.length,d$s=0;for(d$i=0;d$i<d$r;){var d$t=d$q[d$i];switch(d$t){case 6:case 7:d$i+=d$u.interpolation[d$t](d$n,d$s,d$b,d$l+d$s,d$m.data,d$o,null,d$m.duration,d$m.nextData,d$q,d$i+1);break;default:d$i+=d$u.interpolation[d$t](d$n,d$s,d$b,d$l+d$s,d$m.data,d$o,null,d$m.duration,d$m.nextData);}d$s++;}}else for(d$i=0;d$i<d$n.keyframeWidth;)d$i+=d$n.interpolationMethod[d$i](d$n,d$i,d$b,d$l+d$i,d$m.data,d$o,null,d$m.duration,d$m.nextData);d$l+=d$n.keyframeWidth;}},d$b.getNodesCurrentFrameIndex=function(d$a,d$b){var d$c=this._anis[d$a].nodes;d$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(d$c.length),this.unfixedCurrentTimes=new Float32Array(d$c.length),this.unfixedLastAniIndex=d$a);for(var d$d=0,d$e=d$c.length;d$d<d$e;d$d++){var d$f=d$c[d$d];for(d$b<this.unfixedCurrentTimes[d$d]&&(this.unfixedCurrentFrameIndexes[d$d]=0),this.unfixedCurrentTimes[d$d]=d$b;this.unfixedCurrentFrameIndexes[d$d]<d$f.keyFrame.length&&!(d$f.keyFrame[this.unfixedCurrentFrameIndexes[d$d]].startTime>this.unfixedCurrentTimes[d$d]);)this.unfixedCurrentFrameIndexes[d$d]++;this.unfixedCurrentFrameIndexes[d$d]--;}return this.unfixedCurrentFrameIndexes;},d$b.getOriginalDataUnfixedRate=function(d$a,d$b,d$c){var d$d=this._anis[d$a].nodes;d$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(d$d.length),this.unfixedCurrentTimes=new Float32Array(d$d.length),this.unfixedKeyframes=d$r(d$d.length),this.unfixedLastAniIndex=d$a);for(var d$e=0,d$f=0,d$i=d$d.length,d$j=0;d$f<d$i;d$f++){var d$k=d$d[d$f];for(d$c<this.unfixedCurrentTimes[d$f]&&(this.unfixedCurrentFrameIndexes[d$f]=0),this.unfixedCurrentTimes[d$f]=d$c;this.unfixedCurrentFrameIndexes[d$f]<d$k.keyFrame.length&&!(d$k.keyFrame[this.unfixedCurrentFrameIndexes[d$f]].startTime>this.unfixedCurrentTimes[d$f]);)this.unfixedKeyframes[d$f]=d$k.keyFrame[this.unfixedCurrentFrameIndexes[d$f]],this.unfixedCurrentFrameIndexes[d$f]++;var d$l=this.unfixedKeyframes[d$f];d$k.dataOffset=d$j;var d$m=d$c-d$l.startTime;if(d$k.lerpType)switch(d$k.lerpType){case 0:case 1:for(d$e=0;d$e<d$k.keyframeWidth;)d$e+=d$k.interpolationMethod[d$e](d$k,d$e,d$b,d$j+d$e,d$l.data,d$m,null,d$l.duration,d$l.nextData);break;case 2:var d$n=d$l.interpolationData,d$o=d$n.length,d$p=0;for(d$e=0;d$e<d$o;){var d$q=d$n[d$e];switch(d$q){case 6:case 7:d$e+=d$u.interpolation[d$q](d$k,d$p,d$b,d$j+d$p,d$l.data,d$m,null,d$l.duration,d$l.nextData,d$n,d$e+1);break;default:d$e+=d$u.interpolation[d$q](d$k,d$p,d$b,d$j+d$p,d$l.data,d$m,null,d$l.duration,d$l.nextData);}d$p++;}}else for(d$e=0;d$e<d$k.keyframeWidth;)d$e+=d$k.interpolationMethod[d$e](d$k,d$e,d$b,d$j+d$e,d$l.data,d$m,null,d$l.duration,d$l.nextData);d$j+=d$k.keyframeWidth;}},d$u._LinearInterpolation_0=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){var d$m=0===d$j?0:d$f/d$j;return d$c[d$d]=(1-d$m)*d$e[d$b]+d$m*d$k[d$b],1;},d$u._QuaternionInterpolation_1=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){var d$m=0===d$j?0:d$f/d$j;return d$o.slerpQuaternionArray(d$e,d$b,d$k,d$b,d$m,d$c,d$d),4;},d$u._AngleInterpolation_2=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){return 0;},d$u._RadiansInterpolation_3=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){return 0;},d$u._Matrix4x4Interpolation_4=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){for(var d$m=0;d$m<16;d$m++,d$b++)d$c[d$d+d$m]=d$e[d$b]+d$f*d$i[d$b];return 16;},d$u._NoInterpolation_5=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l){return d$c[d$d]=d$e[d$b],1;},d$u._BezierInterpolation_6=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m){return void 0===d$m&&(d$m=0),d$c[d$d]=d$e[d$b]+(d$k[d$b]-d$e[d$b])*d$A.getBezierRate(d$f/d$j,d$l[d$m],d$l[d$m+1],d$l[d$m+2],d$l[d$m+3]),5;},d$u._BezierInterpolation_7=function(d$a,d$b,d$c,d$d,d$e,d$f,d$i,d$j,d$k,d$l,d$m){return void 0===d$m&&(d$m=0),d$c[d$d]=d$l[d$m+4]+d$l[d$m+5]*d$A.getBezierRate((.001*d$f+d$l[d$m+6])/d$l[d$m+7],d$l[d$m],d$l[d$m+1],d$l[d$m+2],d$l[d$m+3]),9;},d$u.load=function(d$a){return d$ea.loader.create(d$a,null,null,d$u);},d$u.interpolation=[d$u._LinearInterpolation_0,d$u._QuaternionInterpolation_1,d$u._AngleInterpolation_2,d$u._RadiansInterpolation_3,d$u._Matrix4x4Interpolation_4,d$u._NoInterpolation_5,d$u._BezierInterpolation_6,d$u._BezierInterpolation_7],d$u;}(),d$C=function(d$b){function d$c(d$a,d$b){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,d$c.__super.call(this),void 0===d$b&&(d$b=0),d$a&&this.init(d$a,d$b);}d$d(d$c,"laya.ani.bone.Skeleton",d$b);var d$a=d$c.prototype;return d$a.init=function(d$a,d$b){void 0===d$b&&(d$b=0);var d$c,d$d,d$e,d$f=0,d$i=0;if(1==d$b)for(this._graphicsCache=[],d$f=0,d$i=d$a.getAnimationCount();d$f<d$i;d$f++)this._graphicsCache.push([]);if(this._yReverseMatrix=d$a.yReverseMatrix,this._aniMode=d$b,this._templet=d$a,this._player=new d$B(),this._player.cacheFrameRate=d$a.rate,this._player.templet=d$a,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=d$a.mBoneArr,this._rootBone=d$a.mRootBone,this._aniSectionDic=d$a.aniSectionDic,0<d$a.ikArr.length)for(this._ikArr=[],d$f=0,d$i=d$a.ikArr.length;d$f<d$i;d$f++)this._ikArr.push(new d$u(d$a.ikArr[d$f],this._boneList));if(0<d$a.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),d$f=0,d$i=d$a.pathArr.length;d$f<d$i;d$f++)d$c=d$a.pathArr[d$f],d$d=new d$x(d$c,this._boneList),(d$e=this._boneSlotDic[d$c.name])&&((d$d=new d$x(d$c,this._boneList)).target=d$e),this._pathDic[d$c.name]=d$d;if(0<d$a.tfArr.length)for(this._tfArr=[],d$f=0,d$i=d$a.tfArr.length;d$f<d$i;d$f++)this._tfArr.push(new d$y(d$a.tfArr[d$f],this._boneList));if(0<d$a.skinDataArray.length){var d$j=this._templet.skinDataArray[this._skinIndex];this._skinName=d$j.name;}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause);},d$a.load=function(d$a,d$b,d$c){},d$a._onLoaded=function(){},d$a._parseComplete=function(){var d$a=d$D.TEMPLET_DICTIONARY[this._aniPath];d$a&&(this.init(d$a,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this);},d$a._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败");},d$a._onPlay=function(){this.event("played");},d$a._onStop=function(){var d$a,d$b=this._templet.eventAniArr[this._aniClipIndex];if(d$b&&this._eventIndex<d$b.length)for(;this._eventIndex<d$b.length;this._eventIndex++)(d$a=d$b[this._eventIndex]).time>=this._player.playStart&&d$a.time<=this._player.playEnd&&this.event("label",d$a);this._eventIndex=0,this._drawOrder=null,this.event("stopped");},d$a._onPause=function(){this.event("paused");},d$a._parseSrcBoneMatrix=function(){var d$a=0,d$b=0;for(d$b=this._templet.srcBoneMatrixArr.length,d$a=0;d$a<d$b;d$a++)this._boneMatrixArray.push(new d$Ga());if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var d$c,d$d,d$e=this._templet.boneSlotArray;for(d$a=0,d$b=d$e.length;d$a<d$b;d$a++)d$c=d$e[d$a],null==(d$d=this._bindBoneBoneSlotDic[d$c.parent])&&(this._bindBoneBoneSlotDic[d$c.parent]=d$d=[]),this._boneSlotDic[d$c.name]=d$c=d$c.copy(),d$d.push(d$c),this._boneSlotArray.push(d$c);}},d$a._emitMissedEvents=function(d$a,d$b,d$c){void 0===d$c&&(d$c=0);var d$d=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(d$d){var d$e,d$f,d$i=0;for(d$e=d$d.length,d$i=d$c;d$i<d$e;d$i++)(d$f=d$d[d$i]).time>=this._player.playStart&&d$f.time<=this._player.playEnd&&this.event("label",d$f);}},d$a._update=function(d$a){if(void 0===d$a&&(d$a=!0),!(this._pause||d$a&&this._indexControl)){var d$b=this.timer.currTimer,d$c=this._player.currentKeyframeIndex,d$d=d$b-this._lastTime;if(d$a?this._player._update(d$d):d$c=-1,this._lastTime=d$b,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<d$d&&this._clipIndex==d$c&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var d$e;this._lastUpdateAniClipIndex=this._aniClipIndex,d$c>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var d$f,d$i=this._templet.eventAniArr[this._aniClipIndex];if(d$i&&this._eventIndex<d$i.length&&((d$e=d$i[this._eventIndex]).time>=this._player.playStart&&d$e.time<=this._player.playEnd?this._player.currentPlayTime>=d$e.time&&(this.event("label",d$e),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(d$f=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=d$f&&(this.graphics=d$f));var d$j=0,d$k=0;for(d$k=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,d$k-1)&&0<d$k;)d$k--;if(d$k<this._clipIndex)for(d$j=d$k;d$j<this._clipIndex;d$j++)this._createGraphics(d$j);}else if(1==this._aniMode){if(d$f=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=d$f&&(this.graphics=d$f));for(d$k=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,d$k-1)&&0<d$k;)d$k--;if(d$k<this._clipIndex)for(d$j=d$k;d$j<this._clipIndex;d$j++)this._createGraphics(d$j);}this._createGraphics();}}},d$a._createGraphics=function(d$a){void 0===d$a&&(d$a=-1),-1==d$a&&(d$a=this._clipIndex);var d$b,d$c,d$d=d$a*this._player.cacheFrameRateInterval,d$e=this._templet.drawOrderAniArr[this._aniClipIndex];if(d$e&&0<d$e.length)for(this._drawOrderIndex=0,d$b=d$e[this._drawOrderIndex];d$d>=d$b.time&&(this._drawOrder=d$b.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=d$e.length));)d$b=d$e[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=d$J.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=d$J.create(),d$c=this.graphics;var d$f=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],d$a,d$d);var d$i,d$j,d$k,d$l,d$m=this._aniSectionDic[this._aniClipIndex],d$n=0,d$o=0,d$p=0,d$q=0,d$r=0,d$s=this._templet.srcBoneMatrixArr.length;for(d$r=d$m[d$o=0];d$o<d$s;d$o++)d$l=this._boneList[d$o],d$k=this._templet.srcBoneMatrixArr[d$o],d$l.resultTransform.scX=d$k.scX*this._curOriginalData[d$n++],d$l.resultTransform.skX=d$k.skX+this._curOriginalData[d$n++],d$l.resultTransform.skY=d$k.skY+this._curOriginalData[d$n++],d$l.resultTransform.scY=d$k.scY*this._curOriginalData[d$n++],d$l.resultTransform.x=d$k.x+this._curOriginalData[d$n++],d$l.resultTransform.y=d$k.y+this._curOriginalData[d$n++],8===this._templet.tMatrixDataLen&&(d$l.resultTransform.skewX=d$k.skewX+this._curOriginalData[d$n++],d$l.resultTransform.skewY=d$k.skewY+this._curOriginalData[d$n++]);var d$t,d$u={},d$v={};for(d$r+=d$m[1];d$o<d$r;d$o++)d$u[(d$t=d$f[d$o]).name]=this._curOriginalData[d$n++],d$v[d$t.name]=this._curOriginalData[d$n++],this._curOriginalData[d$n++],this._curOriginalData[d$n++],this._curOriginalData[d$n++],this._curOriginalData[d$n++];var d$w,d$x,d$y={},d$z={};for(d$r+=d$m[2];d$o<d$r;d$o++)d$y[(d$t=d$f[d$o]).name]=this._curOriginalData[d$n++],d$z[d$t.name]=this._curOriginalData[d$n++],this._curOriginalData[d$n++],this._curOriginalData[d$n++],this._curOriginalData[d$n++],this._curOriginalData[d$n++];if(this._pathDic)for(d$r+=d$m[3];d$o<d$r;d$o++){if(d$t=d$f[d$o],d$w=this._pathDic[d$t.name])switch(new d$Fa(d$t.extenData).getByte()){case 1:d$w.position=this._curOriginalData[d$n++];break;case 2:d$w.spacing=this._curOriginalData[d$n++];break;case 3:d$w.rotateMix=this._curOriginalData[d$n++],d$w.translateMix=this._curOriginalData[d$n++];}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(d$Ga.TEMP.identity()),this._ikArr)for(d$o=0,d$r=this._ikArr.length;d$o<d$r;d$o++)d$x=this._ikArr[d$o],d$y.hasOwnProperty(d$x.name)&&(d$x.bendDirection=d$y[d$x.name]),d$z.hasOwnProperty(d$x.name)&&(d$x.mix=d$z[d$x.name]),d$x.apply();if(this._pathDic)for(var d$A in this._pathDic)(d$w=this._pathDic[d$A]).apply(this._boneList,d$c);if(this._tfArr)for(d$o=0,d$q=this._tfArr.length;d$o<d$q;d$o++)this._tfArr[d$o].apply();for(d$o=0,d$q=this._boneList.length;d$o<d$q;d$o++)if(d$l=this._boneList[d$o],d$j=this._bindBoneBoneSlotDic[d$l.name],d$l.resultMatrix.copyTo(this._boneMatrixArray[d$o]),d$j)for(d$p=0,d$r=d$j.length;d$p<d$r;d$p++)(d$i=d$j[d$p])&&d$i.setParentMatrix(d$l.resultMatrix);var d$B,d$C,d$D,d$E,d$F={},d$G=this._templet.deformAniArr;if(d$G&&0<d$G.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,d$o=0,d$r=this._boneSlotArray.length;d$o<d$r;d$o++)(d$i=this._boneSlotArray[d$o]).deformData=null;var d$H,d$I=d$G[this._aniClipIndex];for(d$H in d$B=d$I.default,this._setDeform(d$B,d$F,this._boneSlotArray,d$d),d$I)"default"!=d$H&&d$H!=this._skinName&&(d$B=d$I[d$H],this._setDeform(d$B,d$F,this._boneSlotArray,d$d));d$B=d$I[this._skinName],this._setDeform(d$B,d$F,this._boneSlotArray,d$d);}if(this._drawOrder)for(d$o=0,d$r=this._drawOrder.length;d$o<d$r;d$o++)d$C=d$u[(d$i=this._boneSlotArray[this._drawOrder[d$o]]).name],d$D=d$v[d$i.name],isNaN(d$D)||(d$c.save(),d$c.alpha(d$D)),isNaN(d$C)||-2==d$C||(this._templet.attachmentNames?d$i.showDisplayByName(this._templet.attachmentNames[d$C]):d$i.showDisplayByIndex(d$C)),d$F[this._drawOrder[d$o]]?(d$E=d$F[this._drawOrder[d$o]],d$i.currDisplayData&&d$E[d$i.currDisplayData.attachmentName]?d$i.deformData=d$E[d$i.currDisplayData.attachmentName]:d$i.deformData=null):d$i.deformData=null,isNaN(d$D)?d$i.draw(d$c,this._boneMatrixArray,2==this._aniMode):d$i.draw(d$c,this._boneMatrixArray,2==this._aniMode,d$D),isNaN(d$D)||d$c.restore();else for(d$o=0,d$r=this._boneSlotArray.length;d$o<d$r;d$o++)d$C=d$u[(d$i=this._boneSlotArray[d$o]).name],d$D=d$v[d$i.name],isNaN(d$D)||(d$c.save(),d$c.alpha(d$D)),isNaN(d$C)||-2==d$C||(this._templet.attachmentNames?d$i.showDisplayByName(this._templet.attachmentNames[d$C]):d$i.showDisplayByIndex(d$C)),d$F[d$o]?(d$E=d$F[d$o],d$i.currDisplayData&&d$E[d$i.currDisplayData.attachmentName]?d$i.deformData=d$E[d$i.currDisplayData.attachmentName]:d$i.deformData=null):d$i.deformData=null,isNaN(d$D)?d$i.draw(d$c,this._boneMatrixArray,2==this._aniMode):d$i.draw(d$c,this._boneMatrixArray,2==this._aniMode,d$D),isNaN(d$D)||d$c.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,d$a,d$c):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,d$a,d$c);},d$a._setDeform=function(d$a,d$b,d$c,d$d){if(d$a){var d$e,d$f,d$i,d$j=0,d$k=0,d$l=0;if(d$a)for(d$j=0,d$k=d$a.deformSlotDataList.length;d$j<d$k;d$j++)for(d$e=d$a.deformSlotDataList[d$j],d$l=0;d$l<d$e.deformSlotDisplayList.length;d$l++)d$i=d$c[(d$f=d$e.deformSlotDisplayList[d$l]).slotIndex],d$f.apply(d$d,d$i),d$b[d$f.slotIndex]||(d$b[d$f.slotIndex]={}),d$b[d$f.slotIndex][d$f.attachment]=d$f.deformData;}},d$a.getAnimNum=function(){return this._templet.getAnimationCount();},d$a.getAniNameByIndex=function(d$a){return this._templet.getAniNameByIndex(d$a);},d$a.getSlotByName=function(d$a){return this._boneSlotDic[d$a];},d$a.showSkinByName=function(d$a,d$b){void 0===d$b&&(d$b=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(d$a),d$b);},d$a.showSkinByIndex=function(d$a,d$b){void 0===d$b&&(d$b=!0);for(var d$c=0;d$c<this._boneSlotArray.length;d$c++)this._boneSlotArray[d$c].showSlotData(null,d$b);if(this._templet.showSkinByIndex(this._boneSlotDic,d$a,d$b)){var d$d=this._templet.skinDataArray[d$a];this._skinIndex=d$a,this._skinName=d$d.name;}this._clearCache();},d$a.showSlotSkinByIndex=function(d$a,d$b){if(0!=this._aniMode){var d$c=this.getSlotByName(d$a);d$c&&d$c.showDisplayByIndex(d$b),this._clearCache();}},d$a.showSlotSkinByName=function(d$a,d$b){if(0!=this._aniMode){var d$c=this.getSlotByName(d$a);d$c&&d$c.showDisplayByName(d$b),this._clearCache();}},d$a.replaceSlotSkinName=function(d$a,d$b,d$c){if(0!=this._aniMode){var d$d=this.getSlotByName(d$a);d$d&&d$d.replaceDisplayByName(d$b,d$c),this._clearCache();}},d$a.replaceSlotSkinByIndex=function(d$a,d$b,d$c){if(0!=this._aniMode){var d$d=this.getSlotByName(d$a);d$d&&d$d.replaceDisplayByIndex(d$b,d$c),this._clearCache();}},d$a.setSlotSkin=function(d$a,d$b){if(0!=this._aniMode){var d$c=this.getSlotByName(d$a);d$c&&d$c.replaceSkin(d$b),this._clearCache();}},d$a._clearCache=function(){if(1==this._aniMode)for(var d$a=0,d$b=this._graphicsCache.length;d$a<d$b;d$a++){for(var d$c=0,d$d=this._graphicsCache[d$a].length;d$c<d$d;d$c++){var d$e=this._graphicsCache[d$a][d$c];d$e!=this.graphics&&d$J.recycle(d$e);}this._graphicsCache[d$a].length=0;}},d$a.play=function(d$a,d$b,d$c,d$d,d$e,d$f){void 0===d$c&&(d$c=!0),void 0===d$d&&(d$d=0),void 0===d$e&&(d$e=0),void 0===d$f&&(d$f=!0),this._indexControl=!1;var d$i=-1,d$j=NaN;if(d$j=d$b?2147483647:0,"string"==typeof d$a)for(var d$k=0,d$l=this._templet.getAnimationCount();d$k<d$l;d$k++){var d$m=this._templet.getAnimation(d$k);if(d$m&&d$a==d$m.name){d$i=d$k;break;}}else d$i=d$a;-1<d$i&&d$i<this.getAnimNum()&&(this._aniClipIndex=d$i,(d$c||this._pause||this._currAniIndex!=d$i)&&(this._currAniIndex=d$i,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(d$i)),this._drawOrder=null,this._eventIndex=0,this._player.play(d$i,this._player.playbackRate,d$j,d$d,d$e),d$f&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=d$n.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()));},d$a.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update));},d$a.playbackRate=function(d$a){this._player&&(this._player.playbackRate=d$a);},d$a.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update));},d$a.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=d$n.now(),this.timer.frameLoop(1,this,this._update,null,!0));},d$a._getGrahicsDataWithCache=function(d$a,d$b){return this._graphicsCache[d$a][d$b];},d$a._setGrahicsDataWithCache=function(d$a,d$b,d$c){this._graphicsCache[d$a][d$b]=d$c;},d$a.destroy=function(d$a){void 0===d$a&&(d$a=!0),d$b.prototype.destroy.call(this,d$a),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update);},d$f(0,d$a,"url",function(){return this._aniPath;},function(d$a){this.load(d$a);}),d$f(0,d$a,"index",function(){return this._index;},function(d$a){this.player&&(this._index=d$a,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1));}),d$f(0,d$a,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total;}),d$f(0,d$a,"templet",function(){return this._templet;}),d$f(0,d$a,"player",function(){return this._player;}),d$c.useSimpleMeshInCanvas=!1,d$c;}(d$fa),d$D=function(d$b){function d$e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,d$e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[];}d$d(d$e,"laya.ani.bone.Templet",d$b);var d$a=d$e.prototype;return d$a.getLoadList=function(){return this._loadList;},d$a.loadAni=function(d$a){this._skBufferUrl=d$a,d$ea.loader.load(d$a,d$k.create(this,this.onComplete),null,"arraybuffer");},d$a.onComplete=function(d$a){if(this._isDestroyed)this.destroy();else{var d$b=d$l.getRes(this._skBufferUrl);d$b?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,d$b)):this.event("error","load failed:"+this._skBufferUrl);}},d$a.parseData=function(d$a,d$b,d$c){void 0===d$c&&(d$c=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=d$a,this._mainTexture&&d$s.isWebGL&&d$a.bitmap&&(d$a.bitmap.enableMerageInAtlas=!1),this._rate=d$c,this.parse(d$b);},d$a.buildArmature=function(d$a){return void 0===d$a&&(d$a=0),new d$C(this,d$a);},d$a.parse=function(d$a){d$b.prototype.parse.call(this,d$a),this._endLoaded(),this._aniVersion!=d$e.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+d$e.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0);},d$a._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var d$a=0;this._loadList=[];var d$b,d$c=new d$Fa(this.getPublicExtData()),d$d=0,d$e=0,d$f=0,d$i=d$c.getInt32(),d$j=d$c.readUTFString(),d$k=d$j.split("\n");for(d$a=0;d$a<d$i;d$a++)d$b=this._path+d$k[2*d$a],d$j=d$k[2*d$a+1],d$c.getFloat32(),d$c.getFloat32(),d$d=d$c.getFloat32(),d$e=d$c.getFloat32(),d$f=d$c.getFloat32(),isNaN(d$f)?0:d$f,d$f=d$c.getFloat32(),isNaN(d$f)?0:d$f,d$f=d$c.getFloat32(),isNaN(d$f)?d$d:d$f,d$f=d$c.getFloat32(),isNaN(d$f)?d$e:d$f,-1==this._loadList.indexOf(d$b)&&this._loadList.push(d$b);this.event("inited",this);}},d$a._textureComplete=function(){for(var d$a,d$b,d$c=0,d$d=this._loadList.length;d$c<d$d;d$c++)d$b=this._loadList[d$c],d$a=this._textureDic[d$b]=d$l.getRes(d$b),d$s.isWebGL&&d$a&&d$a.bitmap&&(d$a.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData();},d$a._parsePublicExtData=function(){var d$a=0,d$b=0,d$c=0,d$d=0,d$e=0;for(d$a=0,d$e=this.getAnimationCount();d$a<d$e;d$a++)this._graphicsCache.push([]);var d$f;d$f="Dragon"!=this._aniClassName;var d$i,d$j,d$k=new d$Fa(this.getPublicExtData()),d$l=0,d$m=0,d$n=0,d$o=0,d$p=0,d$q=0,d$r=0,d$s=0,d$t=0,d$u=d$k.getInt32(),d$v=d$k.readUTFString(),d$w=d$v.split("\n");for(d$a=0;d$a<d$u;d$a++){if(d$i=this._mainTexture,d$j=this._path+d$w[2*d$a],d$v=d$w[2*d$a+1],null==this._mainTexture&&(d$i=this._textureDic[d$j]),!d$i)return this.event("error",this),void(this.isParseFail=!0);d$l=d$k.getFloat32(),d$m=d$k.getFloat32(),d$n=d$k.getFloat32(),d$o=d$k.getFloat32(),d$t=d$k.getFloat32(),d$p=isNaN(d$t)?0:d$t,d$t=d$k.getFloat32(),d$q=isNaN(d$t)?0:d$t,d$t=d$k.getFloat32(),d$r=isNaN(d$t)?d$n:d$t,d$t=d$k.getFloat32(),d$s=isNaN(d$t)?d$o:d$t,this.subTextureDic[d$v]=d$Ha.create(d$i,d$l,d$m,d$n,d$o,-d$p,-d$q,d$r,d$s),d$i.alphaTexture&&(this.subTextureDic[d$v].alphaTexture=d$Ha.create(d$i.alphaTexture,d$l,d$m,d$n,d$o,-d$p,-d$q,d$r,d$s));}this._mainTexture=d$i;var d$x,d$y,d$z,d$A,d$B,d$C=d$k.getUint16();for(d$a=0;d$a<d$C;d$a++)(d$x=[]).push(d$k.getUint16()),d$x.push(d$k.getUint16()),d$x.push(d$k.getUint16()),d$x.push(d$k.getUint16()),this.aniSectionDic[d$a]=d$x;var d$D,d$E=d$k.getInt16(),d$F={};for(d$a=0;d$a<d$E;d$a++)d$y=new d$Ia(),0==d$a?d$D=d$y:d$y.root=d$D,d$y.d=d$f?-1:1,d$A=d$k.readUTFString(),d$B=d$k.readUTFString(),d$y.length=d$k.getFloat32(),1==d$k.getByte()&&(d$y.inheritRotation=!1),1==d$k.getByte()&&(d$y.inheritScale=!1),d$y.name=d$A,d$B&&((d$z=d$F[d$B])?d$z.addChild(d$y):this.mRootBone=d$y),d$F[d$A]=d$y,this.mBoneArr.push(d$y);this.tMatrixDataLen=d$k.getUint16();var d$G,d$H,d$I=d$k.getUint16(),d$J=Math.floor(d$I/this.tMatrixDataLen),d$K=this.srcBoneMatrixArr;for(d$a=0;d$a<d$J;d$a++)(d$G=new d$Va()).scX=d$k.getFloat32(),d$G.skX=d$k.getFloat32(),d$G.skY=d$k.getFloat32(),d$G.scY=d$k.getFloat32(),d$G.x=d$k.getFloat32(),d$G.y=d$k.getFloat32(),8===this.tMatrixDataLen&&(d$G.skewX=d$k.getFloat32(),d$G.skewY=d$k.getFloat32()),d$K.push(d$G),(d$y=this.mBoneArr[d$a]).transform=d$G;var d$L,d$M=d$k.getUint16(),d$N=0;for(d$a=0;d$a<d$M;d$a++){for(d$H=new d$Pa(),d$N=d$k.getUint16(),d$b=0;d$b<d$N;d$b++)d$H.boneNames.push(d$k.readUTFString()),d$H.boneIndexs.push(d$k.getInt16());d$H.name=d$k.readUTFString(),d$H.targetBoneName=d$k.readUTFString(),d$H.targetBoneIndex=d$k.getInt16(),d$H.bendDirection=d$k.getFloat32(),d$H.mix=d$k.getFloat32(),d$H.isSpine=d$f,this.ikArr.push(d$H);}var d$O,d$P=d$k.getUint16(),d$Q=0;for(d$a=0;d$a<d$P;d$a++){for(d$L=new d$Ua(),d$Q=d$k.getUint16(),d$b=0;d$b<d$Q;d$b++)d$L.boneIndexs.push(d$k.getInt16());d$L.name=d$k.getUTFString(),d$L.targetIndex=d$k.getInt16(),d$L.rotateMix=d$k.getFloat32(),d$L.translateMix=d$k.getFloat32(),d$L.scaleMix=d$k.getFloat32(),d$L.shearMix=d$k.getFloat32(),d$L.offsetRotation=d$k.getFloat32(),d$L.offsetX=d$k.getFloat32(),d$L.offsetY=d$k.getFloat32(),d$L.offsetScaleX=d$k.getFloat32(),d$L.offsetScaleY=d$k.getFloat32(),d$L.offsetShearY=d$k.getFloat32(),this.tfArr.push(d$L);}var d$R=d$k.getUint16(),d$S=0;for(d$a=0;d$a<d$R;d$a++){for((d$O=new d$Qa()).name=d$k.readUTFString(),d$S=d$k.getUint16(),d$b=0;d$b<d$S;d$b++)d$O.bones.push(d$k.getInt16());d$O.target=d$k.readUTFString(),d$O.positionMode=d$k.readUTFString(),d$O.spacingMode=d$k.readUTFString(),d$O.rotateMode=d$k.readUTFString(),d$O.offsetRotation=d$k.getFloat32(),d$O.position=d$k.getFloat32(),d$O.spacing=d$k.getFloat32(),d$O.rotateMix=d$k.getFloat32(),d$O.translateMix=d$k.getFloat32(),this.pathArr.push(d$O);}var d$T,d$U,d$V,d$W,d$X,d$Y=0,d$Z=0,d$$=0,d$_=NaN,d$g=0,d$h=d$k.getInt16();for(d$a=0;d$a<d$h;d$a++){var d$aa=d$k.getUint8(),d$ba={};this.deformAniArr.push(d$ba);for(var d$ca=0;d$ca<d$aa;d$ca++)for((d$T=new d$Ka()).skinName=d$k.getUTFString(),d$ba[d$T.skinName]=d$T,d$Y=d$k.getInt16(),d$b=0;d$b<d$Y;d$b++)for(d$U=new d$La(),d$T.deformSlotDataList.push(d$U),d$Z=d$k.getInt16(),d$c=0;d$c<d$Z;d$c++)for(d$V=new d$Ma(),d$U.deformSlotDisplayList.push(d$V),d$V.slotIndex=d$k.getInt16(),d$V.attachment=d$k.getUTFString(),d$$=d$k.getInt16(),d$d=0;d$d<d$$;d$d++)for(1==d$k.getByte()?d$V.tweenKeyList.push(!0):d$V.tweenKeyList.push(!1),d$_=d$k.getFloat32(),d$V.timeList.push(d$_),d$W=[],d$V.vectices.push(d$W),d$g=d$k.getInt16(),d$e=0;d$e<d$g;d$e++)d$W.push(d$k.getFloat32());}var d$da,d$ea,d$fa=d$k.getInt16(),d$ia=0,d$ja=0;for(d$a=0;d$a<d$fa;d$a++){for(d$ia=d$k.getInt16(),d$X=[],d$b=0;d$b<d$ia;d$b++){for((d$da=new d$Na()).time=d$k.getFloat32(),d$ja=d$k.getInt16(),d$c=0;d$c<d$ja;d$c++)d$da.drawOrder.push(d$k.getInt16());d$X.push(d$da);}this.drawOrderAniArr.push(d$X);}var d$ka,d$la=d$k.getInt16(),d$ma=0;for(d$a=0;d$a<d$la;d$a++){for(d$ma=d$k.getInt16(),d$ea=[],d$b=0;d$b<d$ma;d$b++)(d$ka=new d$Oa()).name=d$k.getUTFString(),d$ka.intValue=d$k.getInt32(),d$ka.floatValue=d$k.getFloat32(),d$ka.stringValue=d$k.getUTFString(),d$ka.time=d$k.getFloat32(),d$ea.push(d$ka);this.eventAniArr.push(d$ea);}var d$na=d$k.getInt16();if(0<d$na)for(this.attachmentNames=[],d$a=0;d$a<d$na;d$a++)this.attachmentNames.push(d$k.getUTFString());var d$oa,d$pa,d$qa=d$k.getInt16();for(d$a=0;d$a<d$qa;d$a++)(d$oa=new d$Ja()).name=d$k.readUTFString(),d$oa.parent=d$k.readUTFString(),d$oa.attachmentName=d$k.readUTFString(),d$oa.srcDisplayIndex=d$oa.displayIndex=d$k.getInt16(),(d$oa.templet=this).boneSlotDic[d$oa.name]=d$oa,null==(d$pa=this.bindBoneBoneSlotDic[d$oa.parent])&&(this.bindBoneBoneSlotDic[d$oa.parent]=d$pa=[]),d$pa.push(d$oa),this.boneSlotArray.push(d$oa);var d$ra,d$sa,d$ta,d$ua=d$k.readUTFString().split("\n"),d$va=0,d$wa=d$k.getUint8(),d$xa=0,d$ya=0,d$za=0,d$Aa=0,d$Ba=0,d$Ca=0,d$Da=0;for(d$a=0;d$a<d$wa;d$a++){for((d$ra=new d$Ra()).name=d$ua[d$va++],d$xa=d$k.getUint8(),d$b=0;d$b<d$xa;d$b++){for((d$sa=new d$Ta()).name=d$ua[d$va++],d$oa=this.boneSlotDic[d$sa.name],d$ya=d$k.getUint8(),d$c=0;d$c<d$ya;d$c++){if(d$ta=new d$Sa(),this.skinSlotDisplayDataArr.push(d$ta),d$ta.name=d$ua[d$va++],d$ta.attachmentName=d$ua[d$va++],d$ta.transform=new d$Va(),d$ta.transform.scX=d$k.getFloat32(),d$ta.transform.skX=d$k.getFloat32(),d$ta.transform.skY=d$k.getFloat32(),d$ta.transform.scY=d$k.getFloat32(),d$ta.transform.x=d$k.getFloat32(),d$ta.transform.y=d$k.getFloat32(),d$sa.displayArr.push(d$ta),d$ta.width=d$k.getFloat32(),d$ta.height=d$k.getFloat32(),d$ta.type=d$k.getUint8(),d$ta.verLen=d$k.getUint16(),0<(d$E=d$k.getUint16()))for(d$ta.bones=[],d$d=0;d$d<d$E;d$d++){var d$Ea=d$k.getUint16();d$ta.bones.push(d$Ea);}if(0<(d$za=d$k.getUint16()))for(d$ta.uvs=[],d$d=0;d$d<d$za;d$d++)d$ta.uvs.push(d$k.getFloat32());if(0<(d$Aa=d$k.getUint16()))for(d$ta.weights=[],d$d=0;d$d<d$Aa;d$d++)d$ta.weights.push(d$k.getFloat32());if(0<(d$Ba=d$k.getUint16()))for(d$ta.triangles=[],d$d=0;d$d<d$Ba;d$d++)d$ta.triangles.push(d$k.getUint16());if(0<(d$Ca=d$k.getUint16()))for(d$ta.vertices=[],d$d=0;d$d<d$Ca;d$d++)d$ta.vertices.push(d$k.getFloat32());if(0<(d$Da=d$k.getUint16()))for(d$ta.lengths=[],d$d=0;d$d<d$Da;d$d++)d$ta.lengths.push(d$k.getFloat32());}d$ra.slotArr.push(d$sa);}this.skinDic[d$ra.name]=d$ra,this.skinDataArray.push(d$ra);}1==d$k.getUint8()?(this.yReverseMatrix=new d$Ga(1,0,0,-1,0,0),d$D&&d$D.setTempMatrix(this.yReverseMatrix)):d$D&&d$D.setTempMatrix(new d$Ga()),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this);},d$a.getTexture=function(d$a){var d$b=this.subTextureDic[d$a];return d$b||(d$b=this.subTextureDic[d$a.substr(0,d$a.length-1)]),null==d$b?this._mainTexture:d$b;},d$a.showSkinByIndex=function(d$a,d$b,d$c){if(void 0===d$c&&(d$c=!0),d$b<0&&d$b>=this.skinDataArray.length)return!1;var d$d,d$e,d$f=0,d$i=0,d$j=this.skinDataArray[d$b];if(d$j){for(d$f=0,d$i=d$j.slotArr.length;d$f<d$i;d$f++)(d$e=d$j.slotArr[d$f])&&(d$d=d$a[d$e.name])&&(d$d.showSlotData(d$e,d$c),d$c&&"undefined"!=d$d.attachmentName&&"null"!=d$d.attachmentName?d$d.showDisplayByName(d$d.attachmentName):d$d.showDisplayByIndex(d$d.displayIndex));return!0;}return!1;},d$a.getSkinIndexByName=function(d$a){for(var d$b=0,d$c=this.skinDataArray.length;d$b<d$c;d$b++)if(this.skinDataArray[d$b].name==d$a)return d$b;return-1;},d$a.getGrahicsDataWithCache=function(d$a,d$b){return this._graphicsCache[d$a][d$b];},d$a.setGrahicsDataWithCache=function(d$a,d$b,d$c){this._graphicsCache[d$a][d$b]=d$c;},d$a.destroy=function(){var d$a;for(var d$b in this._isDestroyed=!0,this.subTextureDic)(d$a=this.subTextureDic[d$b])&&d$a.destroy();for(d$b in this._textureDic)(d$a=this._textureDic[d$b])&&d$a.destroy();for(var d$c=0,d$d=this.skinSlotDisplayDataArr.length;d$c<d$d;d$c++)this.skinSlotDisplayDataArr[d$c].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete d$e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this);},d$a.getAniNameByIndex=function(d$a){var d$b=this.getAnimation(d$a);return d$b?d$b.name:null;},d$f(0,d$a,"rate",function(){return this._rate;},function(d$a){this._rate=d$a;}),d$e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",d$e.TEMPLET_DICTIONARY=null,d$e;}(d$K);}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(d$a,d$b){"use strict";for(var d$c in Object.defineProperty(d$b,"__esModule",{value:!0}),Laya){var d$d=Laya[d$c];d$d&&d$d.__isclass&&(d$b[d$c]=d$d);}});