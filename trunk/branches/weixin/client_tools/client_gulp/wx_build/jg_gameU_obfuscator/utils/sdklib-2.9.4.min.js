var rE1=require("./usingOptionConfig");var Yrf2=require("./reportjs.min.js");var $VnkiHa3=require("md5Encryp.js");var wvekgcpw4="";var kc5="";rE1.useADSDK&&(wvekgcpw4=require("./adsdklib-2.0.0.min.js")),rE1.useACTIVITYSDK&&(console.log("\u5f00\u542f\u7ea2\u5305"),kc5=require("./ACTIVITYSDK3.0"),console.log("ACTIVITYSDK"));var IFMpK6={INIT_API:"https://m-api.39ej7e.com/h5sdk/active",CHECKBALANCE_API:"https://mpay-api.39ej7e.com/h5sdk/wxMiniGameBalance",ENTERGAME_API:"https://m-api.39ej7e.com/h5sdk/enter",CREATEROLE_API:"https://report-api.39ej7e.com/createrole",ROLEACTION_API:"https://report-api.39ej7e.com/roleaction",PROCESSACTION_API:"https://report-api.39ej7e.com/processaction",LEVELUP_API:"https://m-api.39ej7e.com/h5sdk/levelUp",GENERATEQRCODE_API:"https://mpay-api.39ej7e.com/h5sdk/generateQRCode",MSGChECK_API:"https://m-api.39ej7e.com/h5sdk/wechatMsgCheck",GAMELCINKCONF_API:"https://atj-api.39ej7e.com/wechat/gameLinkConf",SHAREREPORT_API:"https://atj-api.39ej7e.com/minigame/shareReport",SVERSION:"2.9.4",API_KEY:"Jp*4Y8vQOYck2*&Z",GAMELINKCONFKEY:"HhEVVQAMqeRl5blBvHF3ip7vD5CHRTNy",ACTIVITYWINDOWS_API:"https://s-api.39ej7e.com/go/cfg/show_red_float_window",GET_SUBSCRIBEINFO_API:"https://m-api.39ej7e.com/h5sdk/get_wx_minigame_subscribe_info",PUSH_SUBSCRIBE_API:"https://m-api.39ej7e.com/h5sdk/wx_minigame_subscribe"};var vnHZiLk7={sversion:"2.9.4",version:"2.9.4",kfimg:"",qrcodeimg:"",wxSDKVersion:""};var yLhm_SrcL8={};wx.onShow(function(e){console.log("onshow option:"+JSON.stringify(e)),vnHZiLk7.query=e.query,vnHZiLk7.scene=e.scene});let launchOptions=wx.getLaunchOptionsSync();vnHZiLk7.gdt_vid=launchOptions.query.gdt_vid,vnHZiLk7.weixinadinfo=launchOptions.query.weixinadinfo;const partnerSdk={getSystemParams:()=>{var e={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,sversion:vnHZiLk7.sversion,version:vnHZiLk7.version,dev:vnHZiLk7.dev,refer:vnHZiLk7.refer};return e.time=util.getTime(),vnHZiLk7.user&&vnHZiLk7.user.token&&vnHZiLk7.user.uid&&(e.token=vnHZiLk7.user.token,e.uid=vnHZiLk7.user.uid,e.uname=vnHZiLk7.user.uname||""),e},checkBalance:(e,i)=>{e={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,openid:vnHZiLk7.user.openid,session_key:vnHZiLk7.user.session_key,uid:vnHZiLk7.user.uid,dmoney:e.dmoney||""};var n={};(n=util.mixin(e,partnerSdk.getSystemParams())).sign=util.getSign(n,IFMpK6.API_KEY),wx.request({url:IFMpK6.CHECKBALANCE_API,data:n,header:{"content-type":"application/json"},method:"get",success(e){console.log("\u67e5\u8be2\u4f59\u989d\u63a5\u53e3\u8fd4\u56de:"+JSON.stringify(e.data)),1===e.data.state?(vnHZiLk7.offerid=e.data.data.offerid,i(e.data.data)):console.log("\u67e5\u8be2\u4f59\u989d\u5931\u8d25:"+JSON.stringify(e))},fail(e){console.log("\u8c03\u8d77\u4f59\u989d\u67e5\u8be2\u5931\u8d25:"+JSON.stringify(e))}})},order:(t,r)=>{var e={openid:vnHZiLk7.user.openid,session_key:vnHZiLk7.user.session_key,platform:vnHZiLk7.platform};t.pdata=JSON.stringify(e);e={};(e=util.mixin(t,partnerSdk.getSystemParams())).sign=util.getSign(e,IFMpK6.API_KEY),wx.request({url:IFMpK6.ORDER_API,data:e,header:{"content-type":"application/json"},method:"get",success(i){if(console.log("\u4e0b\u5355\u6210\u529f\u63a5\u53e3\u8fd4\u56de:"+JSON.stringify(i.data)),1===i.data.state){let e={money:t.dmoney,login_date:vnHZiLk7.loingDate};i.data&&i.data.data&&(e.order_id=i.data.data.moid);var n={event:"WXSDK_order_succ",ext:JSON.stringify(e)};partnerSdk.reportDataReq(n),r(i.data)}else wx.showToast({title:i.data.msg,icon:"loading",duration:2e3}),console.log("\u4e0b\u5355\u5931\u8d25:"+JSON.stringify(i))},fail(e){console.log("\u8c03\u8d77\u4e0b\u5355\u63a5\u53e3\u5931\u8d25:"+JSON.stringify(e))}})},reportDataReq:e=>{switch(e.msg_id=util.getTime(),e.dev=vnHZiLk7.user.openid,e.pid=vnHZiLk7.pid,e.gid=vnHZiLk7.gid,e.sversion=vnHZiLk7.sversion,e.uid=vnHZiLk7.user.uid,e.uname=vnHZiLk7.user.uname,e.mode=vnHZiLk7.model,e.refer=vnHZiLk7.refer,vnHZiLk7.platformSys){case"windows":e.os=3;break;case"android":e.os=1;break;case"ios":e.os=2;break;default:e.os=1}Yrf2.dataReportSend(e)},initSubTemplateId:(e,t)=>{let i={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,scene:e.scene,time:util.getTime()};i.sign=util.getSign(i,IFMpK6.API_KEY),wx.request({url:IFMpK6.GET_SUBSCRIBEINFO_API,data:i,header:{"content-type":"application/json"},success(n){1===n.data.state?(console.log("\u670d\u52a1\u7aef\u8fd4\u56de\u7684\u573a\u666f\u6a21\u677fID",JSON.stringify(n.data.data.template_ids)),partnerSdk.storeTemplateId(e.scene,n.data.data.template_ids,function(e){let i=n.data;i.data.template_ids=e,t(i)})):(t(n.data),console.log("\u83b7\u53d6\u8ba2\u9605\u6a21\u677f\u5931\u8d25",JSON.stringify(n.data)))},fail(e){console.log("\u83b7\u53d6\u573a\u666f\u8ba2\u9605\u5931\u8d25:"+JSON.stringify(e))}})},storeTemplateId:(t,r,a)=>{wx.getSetting({withSubscriptions:!0,success(e){let i=e.subscriptionsSetting;let n=[];for(let e=0;e<r.length;e+=1)i&&i.itemSettings&&i.itemSettings.hasOwnProperty(r[e])&&"accept"!==i.itemSettings[r[e]]||n.push(r[e]);yLhm_SrcL8[t]=n,a(n)},fail(e){console.log(e)}})},showWXSubscribe:(i,n)=>{var e=yLhm_SrcL8[i.scene];wx.requestSubscribeMessage({tmplIds:e,success(e){partnerSdk.pushWXSubscribe(i,e),console.log("\u8ba2\u9605\u8ba2\u9605\u6210\u529f\u8fd4\u56de\u5185\u5bb9",JSON.stringify(e)),n(e)},fail(e){n(e),console.log("\u8c03\u8d77\u5fae\u4fe1\u8ba2\u9605\u6d88\u606f\u5931\u8d25",JSON.stringify(e))}})},pushWXSubscribe:(i,n)=>{let t=[];for(let e=0;e<yLhm_SrcL8[i.scene].length;e+=1)"accept"===n[yLhm_SrcL8[i.scene][e]]&&t.push(yLhm_SrcL8[i.scene][e]);if(0!==t.length){let e={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,scene:i.scene,template_ids:t,uid:vnHZiLk7.user.uid,open_id:vnHZiLk7.user.openid,time:util.getTime()};e.sign=util.getSign(e,IFMpK6.API_KEY),wx.request({url:IFMpK6.PUSH_SUBSCRIBE_API,data:e,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},success(e){1===e.data.state?console.log("\u56de\u4f20\u8ba2\u9605\u4fe1\u606f\u6210\u529f"):console.log("\u56de\u8c03\u8ba2\u9605\u4fe1\u606f",JSON.stringify(e.data))},fail(e){console.log("\u56de\u8c03\u8ba2\u9605\u4fe1\u606f\u5931\u8d25:"+JSON.stringify(e))}})}}};const util={mixin:(i,n)=>(window.Object.keys(n).forEach(function(e){i[e]=n[e]}),i),getTime:()=>window.Date.parse(new window.Date)/1e3,getSign:(i,e)=>{var n="";return i=util.sortObject(i),window.Object.keys(i).forEach(function(e){e=e+"="+i[e];n+=e}),$VnkiHa3(n+=e)},sortObject:i=>{var e,n={},t=[];for(window.Object.keys(i).forEach(function(e){i.hasOwnProperty(e)&&t.push(e)}),t.sort(),e=0;e<t.length;e++)n[t[e]]=i[t[e]];return n},getKeys:i=>{var n=[];return window.Object.keys(i).forEach(function(e){i.hasOwnProperty(e)&&n.push(e)}),n},buildQuery:e=>{var i="";var n=util.getKeys(e);var t=n.length;for(var r=0;r<t;r++)i+=n[r]+"="+e[n[r]],r!=t-1&&(i+="&");return i},u$7G80$:(i,n)=>{i=i.split("."),n=n.split(".");var t=window.Math.max(i.length,n.length);for(;i.length<t;)i.push("0");for(;n.length<t;)n.push("0");for(let e=0;e<t;e++){var r=window.parseInt(i[e]);var a=window.parseInt(n[e]);if(a<r)return 1;if(r<a)return-1}return 0}};let GAMESDK={login:(e,i)=>{vnHZiLk7.query=vnHZiLk7.query||{},vnHZiLk7.pid=e.pid,vnHZiLk7.gid=e.gid,vnHZiLk7.query&&vnHZiLk7.query.cid&&vnHZiLk7.query.num&&vnHZiLk7.query.name&&partner.reportGameLinkConf({},function(e){console.log("\u4e0a\u62a5\u8d1f\u8d23\u6210\u529f")}),vnHZiLk7.query.cid&&vnHZiLk7.query.num?vnHZiLk7.refer=vnHZiLk7.pid+"_"+vnHZiLk7.gid+"_"+(vnHZiLk7.query.cid||"")+"_"+vnHZiLk7.query.num:(vnHZiLk7.refer=vnHZiLk7.pid+"_"+vnHZiLk7.gid+"_0_0",vnHZiLk7.query.cid="0",vnHZiLk7.query.num="0"),wx.login({success:function(e){vnHZiLk7.code=e.code,partner.initActive(function(e){partner.login(function(e){console.log("\u767b\u5f55\u9274\u6743\u63a5\u53e3\u56de\u8c03"+JSON.stringify(e)),vnHZiLk7.query.openid&&partner.reportShareFrom({},function(){console.log("\u4e0a\u62a5\u6765\u81ea\u5206\u4eab\u6210\u529f")});e={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,token:vnHZiLk7.user.token,time:util.getTime(),sign:vnHZiLk7.user.sign,params:{scene:vnHZiLk7.scene,preCreateRole:vnHZiLk7.clientConfig.preCreateRole}};vnHZiLk7.query.shareuid&&vnHZiLk7.query.sharedsid&&(e.params.shareuid=vnHZiLk7.query.shareuid,e.params.sharedsid=vnHZiLk7.query.sharedsid),vnHZiLk7.query.sharedrid&&(e.params.sharedrid=vnHZiLk7.query.sharedrid),i(e)})})},fail:function(e){console.log("\u5fae\u4fe1\u6388\u6743\u5931\u8d25"+JSON.stringify(e))}})},createRole:(e,i)=>{console.log("\u8c03\u8d77lib-createRole"),partner.createRole(e,function(e){i()})},enterGame:(e,i)=>{console.log("\u8c03\u8d77lib-enterGame"),partner.enterGame(e,function(e){i()})},startGuideScene:(e,i)=>{partner.startGuideScene(e,function(e){i(e)})},overGuideScene:(e,i)=>{partner.overGuideScene(e,function(e){i(e)})},roleLevelUp:(e,i)=>{console.log("\u8c03\u8d77lib-roleLevelUp"),partner.roleLevelUp(e,function(e){i()})},preCreateRole:(e,i)=>{console.log("\u8c03\u8d77lib-preCreateRole"),partner.preCreateRole(e,function(e){i()})},share:function(e,i){console.log("\u8c03\u8d77lib-share"),partner.share(e,function(e){i&&i()})},setShare:(e,i)=>{console.log("\u8c03\u8d77lib-setShare"),partner.setShare(e,function(e){i&&i()})},checkLimit:(e,i)=>{console.log("\u8c03\u8d77lib-checkLimit"),partner.checkLimit(e,function(e){i(e)})},service:function(e,i){console.log("\u8c03\u8d77lib-service"),partner.service(e,function(e){i()})},minImport:(e,i)=>{console.log("\u8c03\u8d77lib-minpay"),partner.minImport(e,function(e){i()})},officialImport:(e,i)=>{partner.officialImport(e,function(e){i()})},androidImport:(i,n)=>{partner.checkLimit(i,function(e){console.log("\u67e5\u8be2Import\u6743\u9650\u8fd4\u56de\u5185\u5bb9"+JSON.stringify(e)),1==e.state&&1==e.data.switch?1==e.data.type?partner.minImport(i,function(e){n()}):2==e.data.type?partner.service(i,function(e){n()}):3==e.data.type?partner.qrcodeImport(i,function(e){n()}):partner.officialImport(i,function(e){n()}):partner.officialImport(i,function(e){n()})})},otherImport:(i,n)=>{partner.checkLimit(i,function(e){console.log("\u67e5\u8be2Import\u6743\u9650\u8fd4\u56de\u5185\u5bb9"+JSON.stringify(e)),1==e.state&&1==e.data.switch?1==e.data.type?partner.minImport(i,function(e){n()}):2==e.data.type?partner.service(i,function(e){n()}):3==e.data.type?partner.qrcodeImport(i,function(e){n()}):wx.showToast({title:"\u5f53\u524d\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd",icon:"loading",duration:2e3}):wx.showToast({title:"\u5f53\u524d\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd",icon:"loading",duration:2e3})})},checkSecurity:(e,i)=>{e&&"msgSecCheck"===e.type&&partner.msgSecCheck(e.data,function(e){i(e)})},toActivityMini:(e,i)=>{partner.toActivityMini(e,function(e){i(e)})},showActivityWindows:(e,i)=>{partner.showActivityWindows(e,function(e){i(e)})},showSubscribe:(e,i)=>{console.log("\u8c03\u8d77lib-showSubscribe",e.scene),partner.showSubscribe(e,function(e){i(e)})},initSubscribe:(e,i)=>{console.log("\u8c03\u8d77lib-initSubscribe",e.scene),partner.initSubscribe(e,function(e){i(e)})}};rE1.useADSDK&&(GAMESDK.adSceneReach=wvekgcpw4.adSceneReach,GAMESDK.bannerAdCreate=wvekgcpw4.bannerAdCreate,GAMESDK.bannerAdShow=wvekgcpw4.bannerAdShow,GAMESDK.bannerAdHide=wvekgcpw4.bannerAdHide,GAMESDK.bannerAdDestroy=wvekgcpw4.bannerAdDestroy,GAMESDK.interstitialAdCreate=wvekgcpw4.interstitialAdCreate,GAMESDK.interstitialAdDestroy=wvekgcpw4.interstitialAdDestroy,GAMESDK.interstitialAdDestroy=wvekgcpw4.interstitialAdDestroy,GAMESDK.rewardedVideoAdCreate=wvekgcpw4.rewardedVideoAdCreate,GAMESDK.rewardedVideoAdShow=wvekgcpw4.rewardedVideoAdShow,GAMESDK.rewardedVideoAdDestory=wvekgcpw4.rewardedVideoAdDestory),rE1.useACTIVITYSDK&&(GAMESDK.getInfoNew=kc5.getInfoNew,GAMESDK.directWithdraw=kc5.directWithdraw,GAMESDK.finishTask=kc5.finishTask,GAMESDK.withdrawNew=kc5.withdrawNew,GAMESDK.itemExchange=kc5.itemExchange,GAMESDK.tokenExchangeCash=kc5.tokenExchangeCash,GAMESDK.cashDirectWithdraw=kc5.cashDirectWithdraw);const partner={init:()=>{wx.getSystemInfo({success:function(e){vnHZiLk7.os=e.system,vnHZiLk7.wxSDKVersion=e.SDKVersion,-1!=e.system.toLowerCase().indexOf("ios")?(vnHZiLk7.platformSys="ios",vnHZiLk7.platform="ios"):(vnHZiLk7.platformSys="android",vnHZiLk7.platform="android"),-1!==e.platform.indexOf("windows")&&(vnHZiLk7.platformSys="windows"),vnHZiLk7.model=e.model,vnHZiLk7.dev=$VnkiHa3(vnHZiLk7.model)}});Yrf2.dataReportInit({appid:"sdk"})},initActive:i=>{var e=util.mixin({},partnerSdk.getSystemParams());e.sign=util.getSign(e,IFMpK6.API_KEY),wx.request({url:IFMpK6.INIT_API,data:e,header:{"content-type":"application/json"},success(e){console.log("active\u8fd4\u56de"+JSON.stringify(e.data)),1===e.data.state&&(vnHZiLk7.clientConfig=e.data.data.clientConfig,IFMpK6.LOGIN_API=e.data.data.api.ptoken,IFMpK6.ORDER_API=e.data.data.api.order,console.log("\u6fc0\u6d3b\u63a5\u53e3\u56de\u8c03"),i(e.data))},fail(e){console.log("\u6fc0\u6d3b\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25:"+JSON.stringify(e))}})},login:n=>{var e={code:vnHZiLk7.code,path:vnHZiLk7.query,scene:vnHZiLk7.scene,platform:vnHZiLk7.platform,adid:vnHZiLk7.gdt_vid,weixinadinfo:vnHZiLk7.weixinadinfo};630!=vnHZiLk7.pid&&"630"!=vnHZiLk7.pid||(vnHZiLk7.query.from?e.channelId=vnHZiLk7.query.from:1007==vnHZiLk7.scene||1008==vnHZiLk7.scene||1044==vnHZiLk7.scene||1096==vnHZiLk7.scene?e.channelId="share":e.channelId="fkw001");var i={};i.pdata=JSON.stringify(e),i.ptoken=window.Date.parse(new window.Date)/1e3,(i=util.mixin(i,partnerSdk.getSystemParams())).sign=util.getSign(i,IFMpK6.API_KEY),wx.request({url:IFMpK6.LOGIN_API,data:i,header:{"content-type":"application/json"},success(e){var i;1===e.data.state&&(vnHZiLk7.user=e.data.data,vnHZiLk7.token=e.data.data.token,vnHZiLk7.uid=e.data.data.uid,vnHZiLk7.uname=e.data.data.uname,vnHZiLk7.openid=e.data.data.openid,vnHZiLk7.session_key=e.data.data.session_key,vnHZiLk7.loingDate=util.getTime(),i={login_date:vnHZiLk7.loingDate},i={event:"WXSDK_login_succ",ext:JSON.stringify(i)},partnerSdk.reportDataReq(i),partner.initADSDK(),partner.initACTIVITYSDK(),n(e.data))},fail(e){console.log("\u767b\u5f55\u9274\u6743\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25:"+JSON.stringify(e))}})},createRole:(e,i)=>{e.cid=vnHZiLk7.query.cid||0;var n={from_openid:vnHZiLk7.query.openid||""};e.pdata=JSON.stringify(n);n=util.mixin(e,partnerSdk.getSystemParams()),wx.request({url:IFMpK6.CREATEROLE_API,data:n,header:{"content-type":"application/json"},method:"get",success(e){console.log("\u4e0a\u62a5\u521b\u5efa\u89d2\u8272\u6210\u529f\uff1a"+JSON.stringify(e.data)),i(e.data)},fail(e){console.log("\u4e0a\u62a5\u521b\u5efa\u89d2\u8272\u4fe1\u606f\u5931\u8d25\uff1a"+JSON.stringify(e.data))}})},enterGame:(e,i)=>{var n={path:vnHZiLk7.query,platform:vnHZiLk7.platform};e.pdata=JSON.stringify(n);n={};(n=util.mixin(e,partnerSdk.getSystemParams())).sign=util.getSign(n,IFMpK6.API_KEY),wx.request({url:IFMpK6.ENTERGAME_API,data:n,header:{"content-type":"application/json"},success(e){console.log("\u4e0a\u62a5\u8fdb\u5165\u6e38\u620f\u4fe1\u606f\uff1a"+JSON.stringify(e.data)),i(e.data)},fail(e){console.log("\u4e0a\u62a5\u8fdb\u5165\u6e38\u620f\u4fe1\u606f\u5931\u8d25\uff1a"+JSON.stringify(e.data))}})},startGuideScene:(e,i)=>{let n=e;n.event="WXSDK_enter_guidepage",partnerSdk.reportDataReq(n);i({msg:"ok"})},overGuideScene:(e,i)=>{let n=e;n.event="WXSDK_complete_guidepage",partnerSdk.reportDataReq(n);i({msg:"ok"})},roleLevelUp:(e,i)=>{i({})},preCreateRole:(e,i)=>{var n={};(n=util.mixin(e,partnerSdk.getSystemParams())).acttype=20001,console.log("preCreateRole:"+JSON.stringify(n)),wx.request({url:IFMpK6.PROCESSACTION_API,data:n,header:{"content-type":"application/json"},method:"get",success(e){console.log("\u521b\u5efa\u89d2\u8272\u524d\u8d44\u6e90\u52a0\u8f7d\u4e0a\u62a5\u6210\u529f\uff1a"+JSON.stringify(e.data)),i(e.data)},fail(e){console.log("\u521b\u5efa\u89d2\u8272\u524d\u8d44\u6e90\u52a0\u8f7d\u4e0a\u62a5\u5931\u8d25"+JSON.stringify(e))}})},share:(e,i)=>{var n="sharepid="+vnHZiLk7.pid+"&sharegid="+vnHZiLk7.gid+"&shareuid="+vnHZiLk7.user.uid+"&sharedsid="+e.dsid+"&sharedrid="+(e.drid||"")+"&cid="+(vnHZiLk7.query.cid||"0")+"&num=9999&openid="+vnHZiLk7.user.openid+"&gameScene="+(e.gameScene||"commonScene")+"&wxScene="+vnHZiLk7.scene+"&materialId="+(e.materialId||"");e.query&&(n+="&"+util.buildQuery(e.query)),console.log("\u5206\u4eab\u643a\u5e26\u53c2\u6570",n),wx.shareAppMessage({withShareTicket:!0,title:e.title,imageUrl:e.imageUrl,query:n,success(e){i(e)}}),1==vnHZiLk7.clientConfig.shareReport&&(console.log("\u5f00\u542f\u5206\u4eab\u4e0a\u62a5"),n={},(n=util.mixin(e,partnerSdk.getSystemParams())).acttype=10001,wx.request({url:IFMpK6.ROLEACTION_API,data:n,header:{"content-type":"application/json"},success(e){console.log("\u4e0a\u62a5\u5206\u4eab\u4fe1\u606f\u6210\u529f")},fail(e){console.log("\u4e0a\u62a5\u5206\u4eab\u4fe1\u606f\u5931\u8d25"+JSON.stringify(e))}}))},setShare:(e,i)=>{wx.showShareMenu({withShareTicket:!0,success(e){console.log("\u663e\u793a\u8f6c\u53d1\u83dc\u5355:"+JSON.stringify(e)),i(e)},fail(e){console.log("\u663e\u793a\u8f6c\u53d1\u83dc\u5355\u5931\u8d25"+JSON.stringify(e))}});var n=e;console.log("shareParams"+n),wx.onShareAppMessage(function(){return console.log("\u5206\u4eab\u6807\u9898\uff1a"+n.title),console.log("\u5206\u4eab\u56fe\u7247\uff1a"+n.imageUrl),{title:n.title,imageUrl:n.imageUrl,success(e){console.log("\u5206\u4eab\u6210\u529f"+JSON.stringify(e))},fail(e){console.log("\u5206\u4eab\u5931\u8d25"+JSON.stringify(e))}}})},checkLimit:(e,i)=>{let n={dsid:e.dsid,drid:e.drid,drlevel:e.drlevel};n.time=util.getTime(),n.pid=vnHZiLk7.pid,n.gid=vnHZiLk7.gid,n.uid=vnHZiLk7.user.uid,n.version=vnHZiLk7.version,n.sign=util.getSign(n,IFMpK6.API_KEY),console.log("nfzfParams:"+JSON.stringify(n)),wx.request({url:IFMpK6.LEVELUP_API,data:n,header:{"content-type":"application/json"},success(e){console.log("\u83b7\u53d6\u6743\u9650\u8fd4\u56de:"+JSON.stringify(e.data)),1===e.data.state&&(vnHZiLk7.kfimg=e.data.data.url||""),i(e.data)},fail(e){console.log("\u83b7\u53d6\u6743\u9650\u5931\u8d25:"+JSON.stringify(e))}})},service:(e,i)=>{partnerSdk.order(e,function(e){console.log("\u4e0b\u5355\u8fd4\u56de\u5185\u5bb9"+JSON.stringify(e)),1==e.state?wx.openCustomerServiceConversation({sessionFrom:e.data.moid,showMessageCard:!0,sendMessageTitle:"\u60a8\u597d\uff0c\u56de\u590d\u4efb\u610f\u6d88\u606f\u7ee7\u7eed\uff01",sendMessageImg:vnHZiLk7.kfimg||"",success:function(e){console.log("\u8c03\u8d77\u5ba2\u670d\u754c\u9762:"+JSON.stringify(e)),i()}}):wx.showToast({title:"\u4e0b\u5355\u5931\u8d25",icon:"loading",duration:2e3})})},minImport:(e,i)=>{e=util.mixin(e,partnerSdk.getSystemParams()),console.log(util.buildQuery(e)),wx.navigateToMiniProgram({appId:"wx9412bbffe8ab53d5",path:"gamepay/gamepay?"+util.buildQuery(e),envVersion:"release ",extraData:e,success(e){console.log("\u8c03\u8d77\u6210\u529f"+JSON.stringify(e)),i(e)},fail(e){console.log("\u8c03\u8d77\u5931\u8d25"+JSON.stringify(e))}})},officialImport:(i,n)=>{var t=window.parseInt(i.dmoney*vnHZiLk7.user.ratio);var r=JSON.parse(JSON.stringify(i));var a=n;console.log("amount:"+t);var e={dmoney:i.dmoney};partnerSdk.checkBalance(e,function(e){console.log("\u6536\u5230\u67e5\u8be2\u4f59\u989d\u7684\u56de\u8c03"+JSON.stringify(e)),e.balance<t?wx.requestMidasPayment({mode:"game",env:0,offerId:vnHZiLk7.offerid,currencyType:"CNY",platform:"android",buyQuantity:t,zoneId:1,success:function(e){console.log("\u8c03\u8d77\u7c73\u5927\u5e08\u6210\u529f"+JSON.stringify(e));e={login_date:vnHZiLk7.loingDate,money:i.dmoney};e={event:"WXSDK_pay_succ",ext:JSON.stringify(e)};partnerSdk.reportDataReq(e),partnerSdk.order(i,function(e){-1==e.data.wechatRes.code?partner.officialImport(r,a):n()})},fail:function(e){console.log("\u8c03\u8d77\u7c73\u5927\u5e08\u5931\u8d25\uff1a"+JSON.stringify(e))}}):partnerSdk.order(i,function(e){-1==e.data.wechatRes.code?partner.officialImport(r,a):n()})})},qrcodeImport:(e,n)=>{e=e,partnerSdk.order(e,function(i){if(console.log("\u8fd4\u56de\u5185\u5bb9"+JSON.stringify(i)),1==i.state){let e={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,time:util.getTime(),scene:i.data.moid};e.sign=util.getSign(e,IFMpK6.API_KEY),wx.request({url:IFMpK6.GENERATEQRCODE_API,data:e,header:{"content-type":"application/json"},success(i){if(console.log("\u8bf7\u6c42\u5c0f\u7a0b\u5e8f\u4e8c\u7ef4\u7801\u8fd4\u56de"+JSON.stringify(i.data)),1==i.data.state){vnHZiLk7.qrcodeimg=i.data.data.url;let e=[];e.push(vnHZiLk7.qrcodeimg);i=vnHZiLk7.qrcodeimg;wx.previewImage({current:i,urls:e,success:function(e){console.log("\u8c03\u8d77\u56fe\u7247\u9884\u89c8\u6210\u529f"),n(e)},fail:function(e){console.log("\u8c03\u8d77\u56fe\u7247\u9884\u89c8\u5931\u8d25")}})}},fail(e){console.log("\u8bf7\u6c42\u83b7\u53d6\u5c0f\u7a0b\u5e8f\u4e8c\u7ef4\u7801\u5931\u8d25")}})}else wx.showToast({title:"\u4e0b\u5355\u5931\u8d25",icon:"loading",duration:2e3})})},msgSecCheck:(e,i)=>{let n={};(n={content:e.content,pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,time:util.getTime()}).sign=util.getSign(n,IFMpK6.API_KEY),wx.request({url:IFMpK6.MSGChECK_API,data:n,header:{"content-type":"application/json"},success(e){console.log("\u8bf7\u6c42\u5b89\u5168\u4fe1\u606f\u6210\u529f\u8fd4\u56de:"+JSON.stringify(e.data)),i(e.data)},fail(e){console.log("\u8bf7\u6c42\u5b89\u5168\u4fe1\u606f\u68c0\u67e5\u5931\u8d25:"+JSON.stringify(e))}})},reportGameLinkConf:(e,i)=>{let n={};(n={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,cid:vnHZiLk7.query.cid,num:vnHZiLk7.query.num,uname:vnHZiLk7.query.name,time:util.getTime()}).sign=util.getSign(n,IFMpK6.GAMELINKCONFKEY),wx.request({url:IFMpK6.GAMELCINKCONF_API,data:n,header:{"content-type":"application/json"},success(e){i(e.data)},fail(e){console.log("\u4e0a\u62a5\u5931\u8d25:"+JSON.stringify(e))}})},reportShareFrom:(e,i)=>{var n;n={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,uid:vnHZiLk7.uid,openid:vnHZiLk7.openid,scene_id:vnHZiLk7.query.gameScene,wx_scene_id:vnHZiLk7.query.wxScene,friend_pid:vnHZiLk7.query.sharepid,friend_gid:vnHZiLk7.query.sharegid,friend_uid:vnHZiLk7.query.shareuid,friend_openid:vnHZiLk7.query.openid,material_id:vnHZiLk7.query.materialId||"",time:util.getTime()},wx.request({url:IFMpK6.SHAREREPORT_API,data:n,header:{"content-type":"application/json"},success(e){i(e.data)},fail(e){console.log("\u4e0a\u62a5\u5931\u8d25:"+JSON.stringify(e))}})},toActivityMini:(e,i)=>{let n="";switch(e.scut){case"2":n="gds";break;case"3":n="jcs";break;default:n=""}e={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,actid:e.actid,token:vnHZiLk7.user.token,refer:vnHZiLk7.refer,scut:e.scut,scut3:n,dsid:e.dsid,drid:e.drid,roleName:e.drname};console.log("\u8df3\u8f6c\u53c2\u6570",util.buildQuery(e)),wx.navigateToMiniProgram({appId:"wxcb270b99e9d447a8",path:"activity/redenvelopes?"+util.buildQuery(e),envVersion:"release",success(e){i(e)},fail(e){console.log("\u8c03\u8d77\u5931\u8d25"+JSON.stringify(e))}})},showActivityWindows:(e,i)=>{let n={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,refer:vnHZiLk7.refer,dev:vnHZiLk7.dev,version:e.version,sversion:vnHZiLk7.sversion,gwversion:"1.0.0",start_service_ts:e.start_service_ts,time:util.getTime()};n.sign=util.getSign(n,vnHZiLk7.clientConfig.commonGamekey),wx.request({url:IFMpK6.ACTIVITYWINDOWS_API,data:n,header:{"content-type":"application/json"},success(e){console.log("\u60ac\u6d6e\u7403\u5f00\u542f\u6761\u4ef6:"+JSON.stringify(e.data)),i(e.data)},fail(e){console.log("\u60ac\u6d6e\u7403\u5f00\u542f\u6761\u4ef6\u8bf7\u6c42\u5931\u8d25:"+JSON.stringify(e))}})},showSubscribe:(e,i)=>{0<=util.compareVersion(vnHZiLk7.wxSDKVersion,"2.4.4")?partnerSdk.showWXSubscribe(e,function(e){console.log("\u8ba2\u9605\u4fe1\u606f",e)}):wx.showModal({title:"\u63d0\u793a",content:"\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u540e\u91cd\u8bd5\u3002"})},initSubscribe:(e,i)=>{partnerSdk.initSubTemplateId(e,function(e){i(e)})},initADSDK:()=>{var e;rE1.useADSDK&&(e={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,uid:vnHZiLk7.user.uid,openid:vnHZiLk7.user.openid,refer:vnHZiLk7.refer,scene:vnHZiLk7.scene,cid:vnHZiLk7.query.cid,wx_onshow:vnHZiLk7.scene,wx_aid:vnHZiLk7.gdt_vid,dev:vnHZiLk7.dev,env:rE1.env,sversion:vnHZiLk7.sversion},wvekgcpw4.initADSDK(e,function(e){console.log("\u521d\u59cb\u5316\u5e7f\u544a\u6570\u636e\u6210\u529f")}))},initACTIVITYSDK:()=>{var e;rE1.useACTIVITYSDK&&(e={pid:vnHZiLk7.pid,gid:vnHZiLk7.gid,uid:vnHZiLk7.user.uid,openid:vnHZiLk7.user.openid,token:vnHZiLk7.user.token,refer:vnHZiLk7.refer,cid:vnHZiLk7.query.cid,wx_onshow:vnHZiLk7.scene,wx_aid:vnHZiLk7.gdt_vid,dev:vnHZiLk7.dev,sversion:vnHZiLk7.sversion},kc5.init(e,function(){console.log("\u521d\u59cb\u5316\u6d3b\u52a8\u6570\u636e\u6210\u529f")}))}};partner.init(),module.exports=GAMESDK;