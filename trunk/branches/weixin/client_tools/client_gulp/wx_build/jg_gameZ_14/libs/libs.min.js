var Laya=window.Laya=function(T$H,T$$){var T$w={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(T$$,T$b){return 1==arguments.length?T$w.__presubstr.call(this,T$$):T$w.__presubstr.call(this,T$$,0<T$b?T$b:this.length+T$b)},__init:function(T$$){T$$.forEach(function(T$$){T$$.__init$&&T$$.__init$()})},__isClass:function(T$$){return T$$&&(T$$.__isclass||T$$==Object||T$$==String||T$$==Array)},__newvec:function(T$$,T$b){var T$u=[];T$u.length=T$$;for(var T$Z=0;T$Z<T$$;T$Z++)T$u[T$Z]=T$b;return T$u},__extend:function(T$$,T$b){for(var T$u in T$b)if(T$b.hasOwnProperty(T$u)){var T$Z=Object.getOwnPropertyDescriptor(T$b,T$u),T$E=T$Z.get,T$r=T$Z.set;T$E||T$r?T$E&&T$r?Object.defineProperty(T$$,T$u,T$Z):(T$E&&Object.defineProperty(T$$,T$u,T$E),T$r&&Object.defineProperty(T$$,T$u,T$r)):T$$[T$u]=T$b[T$u]}function T$F(){T$w.un(this,"constructor",T$$)}T$F.prototype=T$b.prototype,T$$.prototype=new T$F,T$w.un(T$$.prototype,"__imps",T$w.__copy({},T$b.prototype.__imps))},__copy:function(T$$,T$b){if(!T$b)return null;for(var T$u in T$$=T$$||{},T$b)T$$[T$u]=T$b[T$u];return T$$},__package:function(T$$,T$b){if(!T$w.__packages[T$$]){T$w.__packages[T$$]=!0;var T$u=T$H,T$Z=T$$.split(".");if(1<T$Z.length)for(var T$E=0,T$r=T$Z.length-1;T$E<T$r;T$E++){var T$F=T$u[T$Z[T$E]];T$u=T$F||(T$u[T$Z[T$E]]={})}T$u[T$Z[T$Z.length-1]]||(T$u[T$Z[T$Z.length-1]]=T$b||{})}},__hasOwnProperty:function(T$$,T$b){return T$b=T$b||this,Object.hasOwnProperty.call(T$b,T$$)||function T$$(T$b,T$u){if(Object.hasOwnProperty.call(T$u.prototype,T$b))return!0;var T$Z=T$u.prototype.__super;return null==T$Z?null:T$$(T$b,T$Z)}(T$$,T$b.__class)},__typeof:function(T$$,T$b){if(!T$$||!T$b)return!1;if(T$b===String)return"string"==typeof T$$;if(T$b===Number)return"number"==typeof T$$;if(T$b.__interface__)T$b=T$b.__interface__;else if("string"!=typeof T$b)return T$$ instanceof T$b;return T$$.__imps&&T$$.__imps[T$b]||T$$.__class==T$b},__as:function(T$$,T$b){return this.__typeof(T$$,T$b)?T$$:null},__int:function(T$$){return T$$?parseInt(T$$):0},interface:function(T$$,T$b){T$w.__package(T$$,{});var T$u=T$w.__internals,T$Z=T$u[T$$]=T$u[T$$]||{self:T$$};if(T$b){var T$E=T$b.split(",");T$Z.extend=[];for(var T$r=0;T$r<T$E.length;T$r++){var T$F=T$E[T$r];T$u[T$F]=T$u[T$F]||{self:T$F},T$Z.extend.push(T$u[T$F])}}var T$x=T$H,T$g=T$$.split(".");for(T$r=0;T$r<T$g.length-1;T$r++)T$x=T$x[T$g[T$r]];T$x[T$g[T$g.length-1]]={__interface__:T$$}},class:function(T$$,T$b,T$u,T$Z){if(T$u&&T$w.__extend(T$$,T$u),T$b)if(T$w.__package(T$b,T$$),T$w.__classmap[T$b]=T$$,0<T$b.indexOf(".")){if(0==T$b.indexOf("laya.")){var T$E=T$b.split(".");T$Z=T$Z||T$E[T$E.length-1],T$w[T$Z]&&console.log("Warning!,this class["+T$Z+"] already exist:",T$w[T$Z]),T$w[T$Z]=T$$}}else"Main"==T$b?T$H.Main=T$$:"MainWX"==T$b?T$H.MainWX=T$$:(T$w[T$b]&&console.log("Error!,this class["+T$b+"] already exist:",T$w[T$b]),T$w[T$b]=T$$);var T$r=T$w.un,T$F=T$$.prototype;T$r(T$F,"hasOwnProperty",T$w.__hasOwnProperty),T$r(T$F,"__class",T$$),T$r(T$F,"__super",T$u),T$r(T$F,"__className",T$b),T$r(T$$,"__super",T$u),T$r(T$$,"__className",T$b),T$r(T$$,"__isclass",!0),T$r(T$$,"super",function(T$$){this.__super.call(T$$)})},imps:function(T$$,T$b){if(!T$b)return null;var T$E=T$$.__imps||T$w.un(T$$,"__imps",{});function T$r(T$$){var T$b,T$u;if((T$b=T$w.__internals[T$$])&&(T$E[T$$]=!0,T$u=T$b.extend))for(var T$Z=0;T$Z<T$u.length;T$Z++)T$r(T$u[T$Z].self)}for(var T$u in T$b)T$r(T$u)},superSet:function(T$$,T$b,T$u,T$Z){var T$E=T$$.prototype["_$set_"+T$u];T$E&&T$E.call(T$b,T$Z)},superGet:function(T$$,T$b,T$u){var T$Z=T$$.prototype["_$get_"+T$u];return T$Z?T$Z.call(T$b):null},getset:function(T$$,T$b,T$u,T$Z,T$E){T$$?(T$Z&&(T$b["_$GET_"+T$u]=T$Z),T$E&&(T$b["_$SET_"+T$u]=T$E)):(T$Z&&T$w.un(T$b,"_$get_"+T$u,T$Z),T$E&&T$w.un(T$b,"_$set_"+T$u,T$E)),T$Z&&T$E?Object.defineProperty(T$b,T$u,{get:T$Z,set:T$E,enumerable:!1,configurable:!0}):(T$Z&&Object.defineProperty(T$b,T$u,{get:T$Z,enumerable:!1,configurable:!0}),T$E&&Object.defineProperty(T$b,T$u,{set:T$E,enumerable:!1,configurable:!0}))},static:function(T$u,T$Z){for(var T$E=0,T$$=T$Z.length;T$E<T$$;T$E+=2)if("length"==T$Z[T$E])T$u.length=T$Z[T$E+1].call(T$u);else{function T$b(){var T$b=T$Z[T$E],T$$=T$Z[T$E+1];Object.defineProperty(T$u,T$b,{get:function(){return delete this[T$b],this[T$b]=T$$.call(this)},set:function(T$$){delete this[T$b],this[T$b]=T$$},enumerable:!0,configurable:!0})}T$b()}},un:function(T$$,T$b,T$u){return T$u||(T$u=T$$[T$b]),T$w.__propun.value=T$u,Object.defineProperty(T$$,T$b,T$w.__propun),T$u},uns:function(T$b,T$$){T$$.forEach(function(T$$){T$w.un(T$b,T$$)})}};return T$H.console=T$H.console||{log:function(){}},T$H.trace=T$H.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),T$w}(window,document);!function(T$$,T$b,T$u){T$u.un,T$u.uns,T$u.static,T$u.class,T$u.getset,T$u.__newvec}(window,document,Laya),function(T$F,T$b,T$z){T$z.un,T$z.uns;var T$g=T$z.static,T$w=T$z.class,T$D=T$z.getset;T$z.__newvec;T$z.interface("laya.runtime.IMarket"),T$z.interface("laya.filters.IFilter"),T$z.interface("laya.display.ILayout"),T$z.interface("laya.resource.IDispose"),T$z.interface("laya.runtime.IPlatform"),T$z.interface("laya.resource.IDestroy"),T$z.interface("laya.runtime.IConchNode"),T$z.interface("laya.filters.IFilterAction"),T$z.interface("laya.runtime.ICPlatformClass"),T$z.interface("laya.resource.ICreateResource"),T$z.interface("laya.runtime.IConchRenderObject"),T$z.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var T$O=function(){function T$r(){}return T$w(T$r,"laya.utils.RunDriver"),T$r.FILTER_ACTIONS=[],T$r.pixelRatio=-1,T$r._charSizeTestDiv=null,T$r.now=function(){return Date.now()},T$r.getWindow=function(){return T$F},T$r.getPixelRatio=function(){if(T$r.pixelRatio<0){var T$$=T$s.context,T$b=T$$.backingStorePixelRatio||T$$.webkitBackingStorePixelRatio||T$$.mozBackingStorePixelRatio||T$$.msBackingStorePixelRatio||T$$.oBackingStorePixelRatio||T$$.backingStorePixelRatio||1;(T$r.pixelRatio=(T$s.window.devicePixelRatio||1)/T$b)<1&&(T$r.pixelRatio=1)}return T$r.pixelRatio},T$r.getIncludeStr=function(T$$){return null},T$r.createShaderCondition=function(T$$){var T$b="(function() {return "+T$$+";})";return T$z._runScript(T$b)},T$r.fontMap=[],T$r.measureText=function(T$$,T$b){var T$u=T$r.hanzi.test(T$$);if(T$u&&T$r.fontMap[T$b])return T$r.fontMap[T$b];var T$Z=T$s.context;T$Z.font=T$b;var T$E=T$Z.measureText(T$$);return T$E||(T$E={width:16,height:16}),T$u&&(T$r.fontMap[T$b]=T$E),T$E},T$r.getWebGLContext=function(T$$){},T$r.beginFlush=function(){},T$r.endFinish=function(){},T$r.addToAtlas=null,T$r.flashFlushImage=function(T$$){},T$r.drawToCanvas=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=T$y$.create("2D"),T$x=new T$k(T$u,T$Z,T$F);return T$M.renders[T$b]._fun(T$$,T$x,T$E,T$r),T$F},T$r.createParticleTemplate2D=null,T$r.createGLTextur=null,T$r.createWebGLContext2D=null,T$r.changeWebGLSize=function(T$$,T$b){},T$r.createRenderSprite=function(T$$,T$b){return new T$M(T$$,T$b)},T$r.createFilterAction=function(T$$){return new T$y},T$r.createGraphics=function(){return new T$o},T$r.clear=function(T$$){T$Y._context.ctx.clear()},T$r.cancelLoadByUrl=function(T$$){},T$r.clearAtlas=function(T$$){},T$r.isAtlas=function(T$$){return!1},T$r.addTextureToAtlas=function(T$$){},T$r.getTexturePixels=function(T$$,T$b,T$u,T$Z,T$E){return null},T$r.skinAniSprite=function(){return null},T$r.update3DLoop=function(){},T$g(T$r,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),T$r}(),T$Z=(T$D(1,T$z,"alertGlobalError",null,function(T$$){var T$r=0;T$s.window.onerror=T$$?function(T$$,T$b,T$u,T$Z,T$E){T$r++<5&&T$E&&alert(T$E.stack||T$E)}:null}),T$z.init=function(T$$,T$b,T$u){for(var T$Z=[],T$E=2,T$r=arguments.length;T$E<T$r;T$E++)T$Z.push(arguments[T$E]);if(!T$z._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=T$z._arrayBufferSlice),T$z._isinit=!0,T$s.__init__(),T$l.__init__(),T$o.__init__(),T$z.timer=new T$j,T$z.scaleTimer=new T$j,T$z.loader=new T$g$,T$B.__init__(),T$E=0;for(var T$F=T$Z.length;T$E<T$F;T$E++)T$Z[T$E].enable&&T$Z[T$E].enable();return T$N.__init__(),T$x.__init__(),T$X.__init__(),T$n.beginCheck(),T$z._currentStage=T$z.stage=new T$T$,T$z.stage.conchModel&&T$z.stage.conchModel.setRootNode(),T$z._getUrlPath(),T$z.render=new T$Y(0,0),T$z.stage.size(T$$,T$b),T$M.__init__(),T$I.__init__(),T$e.instance.__init__(T$z.stage,T$Y.canvas),T$P$.__init__(),T$K.autoStopMusic=!0,T$t.__init__(),T$Y.canvas}},T$z._getUrlPath=function(){var T$$=T$s.window.location,T$b=T$$.pathname;T$b=T$b&&":"==T$b.charAt(2)?T$b.substring(1):T$b,T$p.rootPath=T$p.basePath=T$p.getPath("file:"==T$$.protocol?T$b:T$$.protocol+"//"+T$$.host+T$$.pathname)},T$z._arrayBufferSlice=function(T$$,T$b){var T$u=new Uint8Array(this,T$$,T$b-T$$),T$Z=new Uint8Array(T$u.length);return T$Z.set(T$u),T$Z.buffer},T$z._runScript=function(T$$){return T$s.window[T$z._evcode](T$$)},T$z.stage=null,T$z.timer=null,T$z.scaleTimer=null,T$z.loader=null,T$z.version="1.8.6",T$z.render=null,T$z._currentStage=null,T$z._isinit=!1,T$z.isDebug=!1,T$z.MiniAdpter={init:function(){T$F.navigator&&T$F.navigator.userAgent&&-1<T$F.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},T$g(T$z,["conchMarket",function(){return this.conchMarket=T$F.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=T$F.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function T$$(){}return T$w(T$$,"Config"),T$$.WebGLTextCacheCount=500,T$$.atlasEnable=!1,T$$.showCanvasMark=!1,T$$.animationInterval=50,T$$.isAntialias=!1,T$$.isAlpha=!1,T$$.premultipliedAlpha=!0,T$$.isStencil=!0,T$$.preserveDrawingBuffer=!1,T$$}()),T$H=function(){function T$H(){this._events=null}T$w(T$H,"laya.events.EventDispatcher");var T$$=T$H.prototype;return T$$.hasListener=function(T$$){return!!(this._events&&this._events[T$$])},T$$.getListener=function(T$$){return this._events?this._events[T$$]:null},T$$.event=function(T$$,T$b){if(!this._events||!this._events[T$$])return!1;var T$u=this._events[T$$];if(T$u.lock)T$u.queue||(T$u.queue=[]),T$u.queue.push(T$b);else{var T$Z;for(T$u.lock=!0,T$u.cursor=T$u.head;T$u.cursor;)(T$Z=T$u.cursor).recover?(T$u.head=T$u.tail=T$u.cursor=null,console.error("node is recover："+T$Z.id)):(T$u.cursor=T$Z.next,T$Z.once&&T$H.delNode(T$u,T$Z),T$Z.method&&(null!=T$b?T$Z.args?T$Z.method.apply(T$Z.caller,T$Z.args.concat(T$b)):T$b instanceof Array?T$Z.method.apply(T$Z.caller,T$b):T$Z.caller?T$Z.method.call(T$Z.caller,T$b):T$z.recordError("事件派发错误","node.caller:"+T$Z.caller+"node.method:"+T$Z.method+"data:"+T$b+"node.prev"+T$Z.prev):T$Z.method.apply(T$Z.caller,T$Z.args)),T$Z.once&&T$H.recoverHandler(T$Z));T$u.lock=!1,!T$u.head&&this._events&&this._events[T$$]==T$u&&delete this._events[T$$],T$u.queue&&T$u.queue.length&&this.event(T$$,T$u.queue.shift())}return!0},T$$.on=function(T$$,T$b,T$u,T$Z){return this._createListener(T$$,T$b,T$u,T$Z,!1)},T$$.once=function(T$$,T$b,T$u,T$Z){return this._createListener(T$$,T$b,T$u,T$Z,!0)},T$$._createListener=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$r&&(T$r=!0),T$r&&this.off(T$$,T$b,T$u,T$E);var T$F=T$H.createHandler(T$b||this,T$u,T$Z,T$E);this._events||(this._events={});var T$x=this._events,T$g=T$x[T$$];return T$g?T$g.tail?(T$F.prev=T$g.tail,T$g.tail.next=T$F,T$g.tail=T$F):T$g.head=T$g.tail=T$F:T$x[T$$]={head:T$F,tail:T$F,cursor:null,lock:!1},this},T$$.off=function(T$$,T$b,T$u,T$Z){if(void 0===T$Z&&(T$Z=!1),!this._events||!this._events[T$$])return this;for(var T$E=this._events[T$$],T$r=T$E.head;T$r;){if((!T$b||T$r.caller===T$b)&&T$r.method===T$u&&(!T$Z||T$r.once)){T$H.delNode(T$E,T$r),T$E.cursor==T$r&&(T$E.cursor=T$r.next),T$H.recoverHandler(T$r);break}T$r=T$r.next}return this},T$$.offAll=function(T$$){var T$b=this._events;if(!T$b)return this;if(T$$)this._recoverHandlers(T$b[T$$]),delete T$b[T$$];else{for(var T$u in T$b)this._recoverHandlers(T$b[T$u]);this._events=null}return this},T$$._recoverHandlers=function(T$$){if(T$$){for(var T$b=T$$.head;T$b;){T$H.delNode(T$$,T$b);var T$u=T$b.next;T$H.recoverHandler(T$b),T$b=T$u}T$$.cursor=null}},T$$.isMouseEvent=function(T$$){return T$H.MOUSE_EVENTS[T$$]},T$H.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},T$H.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},T$H.delNode=function(T$$,T$b){T$b.prev?T$b.prev.next=T$b.next:T$$.head=T$b.next,T$b.next?T$b.next.prev=T$b.prev:T$$.tail=T$b.prev},T$H.createHandler=function(T$$,T$b,T$u,T$Z){var T$E=500<T$H._freeHandler.length?T$H._freeHandler.shift():null;if(T$E)if(T$E.recover)T$E.recover=!1,T$E.caller=T$$,T$E.method=T$b,T$E.args=T$u,T$E.once=T$Z;else{var T$r="";try{arguments.propertyIsEnumerable.caller}catch(T$$){T$r=T$$.stack}var T$F=T$E.caller?(T$E.caller.__proto__&&T$E.caller.__proto__.constructor&&T$E.caller.__proto__.constructor.name)+"|"+T$E.caller.__className+"|"+T$E.caller.name:"",T$x=T$E.method?T$E.method.name:"";T$z.recordError("EventDispatcher重复创建","caller="+T$F+"  method="+T$x+"  stack="+T$r),T$E={id:++T$H._nodeCount,caller:T$$,method:T$b,args:T$u,once:T$Z,recover:!1}}else T$E={id:++T$H._nodeCount,caller:T$$,method:T$b,args:T$u,once:T$Z,recover:!1};return T$E.prev=T$E.next=null,T$E},T$H.recoverHandler=function(T$$){if(T$$.recover){if(T$H._errorCount<5){T$H._errorCount++;var T$b="";try{arguments.propertyIsEnumerable.caller}catch(T$$){T$b=T$$.stack}var T$u=T$$.caller?(T$$.caller.__proto__&&T$$.caller.__proto__.constructor&&T$$.caller.__proto__.constructor.name)+"|"+T$$.caller.__className+"|"+T$$.caller.name:"",T$Z=T$$.method?T$$.method.name:"";T$z.recordError("EventDispatcher重复回收","id="+T$$.id+"  caller="+T$u+"  method="+T$Z+"  stack="+T$b)}T$$.caller=T$$.method=T$$.args=T$$.prev=null}else T$$.recover=!0,T$$.caller=T$$.method=T$$.args=T$$.prev=T$$.next=null,T$H._freeHandler&&T$H._freeHandler.length<3e3&&T$H._freeHandler.push(T$$)},T$H._freeHandler=[],T$H._nodeCount=0,T$H._errorCount=0,T$H}(),T$_=function(){function T$E(T$$,T$b,T$u,T$Z){this.once=!1,void(this._id=0)===T$Z&&(T$Z=!1),this.setTo(T$$,T$b,T$u,T$Z)}T$w(T$E,"laya.utils.Handler");var T$$=T$E.prototype;return T$$.setTo=function(T$$,T$b,T$u,T$Z){return this._id=T$E._gid++,this.caller=T$$,this.method=T$b,this.args=T$u,this.once=T$Z,this},T$$.run=function(){if(null==this.method)return null;var T$$=this._id,T$b=this.method.apply(this.caller,this.args);return this._id===T$$&&this.once&&this.recover(),T$b},T$$.runWith=function(T$$){if(null==this.method)return null;var T$b=this._id;if(null==T$$)var T$u=this.method.apply(this.caller,this.args);else T$u=this.args||T$$.unshift?this.args?this.method.apply(this.caller,this.args.concat(T$$)):this.method.apply(this.caller,T$$):this.method.call(this.caller,T$$);return this._id===T$b&&this.once&&this.recover(),T$u},T$$.clear=function(){return this.caller=null,this.method=null,this.args=null,this},T$$.recover=function(){0<this._id&&(this._id=0,this.clear())},T$E.create=function(T$$,T$b,T$u,T$Z){return void 0===T$Z&&(T$Z=!0),new T$E(T$$,T$b,T$u,T$Z)},T$E._gid=1,T$E}(),T$C=function(){function T$$(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}T$w(T$$,"laya.display.BitmapFont");var T$b=T$$.prototype;return T$b.loadFont=function(T$$,T$b){this._path=T$$,this._complete=T$b,T$z.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],T$_.create(this,this.onLoaded))},T$b.onLoaded=function(){this.parseFont(T$x$.getRes(this._path),T$x$.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},T$b.parseFont=function(T$$,T$b){if(null!=T$$&&null!=T$b){this._texture=T$b;var T$u=T$$.getElementsByTagName("info");if(!T$u[0].getAttributeNode)return this.parseFont2(T$$,T$b);this.fontSize=parseInt(T$u[0].getAttributeNode("size").nodeValue);var T$Z,T$E=T$u[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(T$E[0]),parseInt(T$E[1]),parseInt(T$E[2]),parseInt(T$E[3])],T$Z=T$$.getElementsByTagName("char");var T$r=0;for(T$r=0;T$r<T$Z.length;T$r++){var T$F=T$Z[T$r],T$x=parseInt(T$F.getAttributeNode("id").nodeValue),T$g=parseInt(T$F.getAttributeNode("xoffset").nodeValue)/1,T$H=parseInt(T$F.getAttributeNode("yoffset").nodeValue)/1,T$w=parseInt(T$F.getAttributeNode("xadvance").nodeValue)/1,T$I=new T$a;T$I.x=parseInt(T$F.getAttributeNode("x").nodeValue),T$I.y=parseInt(T$F.getAttributeNode("y").nodeValue),T$I.width=parseInt(T$F.getAttributeNode("width").nodeValue),T$I.height=parseInt(T$F.getAttributeNode("height").nodeValue);var T$o=T$w$.create(T$b,T$I.x,T$I.y,T$I.width,T$I.height,T$g,T$H);this._maxWidth=Math.max(this._maxWidth,T$w+this.letterSpacing),this._fontCharDic[T$x]=T$o,this._fontWidthMap[T$x]=T$w}}},T$b.parseFont2=function(T$$,T$b){if(null!=T$$&&null!=T$b){this._texture=T$b;var T$u=T$$.getElementsByTagName("info");this.fontSize=parseInt(T$u[0].attributes.size.nodeValue);var T$Z=T$u[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(T$Z[0]),parseInt(T$Z[1]),parseInt(T$Z[2]),parseInt(T$Z[3])];var T$E=T$$.getElementsByTagName("char"),T$r=0;for(T$r=0;T$r<T$E.length;T$r++){var T$F=T$E[T$r].attributes,T$x=parseInt(T$F.id.nodeValue),T$g=parseInt(T$F.xoffset.nodeValue)/1,T$H=parseInt(T$F.yoffset.nodeValue)/1,T$w=parseInt(T$F.xadvance.nodeValue)/1,T$I=new T$a;T$I.x=parseInt(T$F.x.nodeValue),T$I.y=parseInt(T$F.y.nodeValue),T$I.width=parseInt(T$F.width.nodeValue),T$I.height=parseInt(T$F.height.nodeValue);var T$o=T$w$.create(T$b,T$I.x,T$I.y,T$I.width,T$I.height,T$g,T$H);this._maxWidth=Math.max(this._maxWidth,T$w+this.letterSpacing),this._fontCharDic[T$x]=T$o,this._fontWidthMap[T$x]=T$w}}},T$b.getCharTexture=function(T$$){return this._fontCharDic[T$$.charCodeAt(0)]},T$b.destroy=function(){if(this._texture){for(var T$$ in this._fontCharDic){var T$b=this._fontCharDic[T$$];T$b&&T$b.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},T$b.setSpaceWidth=function(T$$){this._spaceWidth=T$$},T$b.getCharWidth=function(T$$){var T$b=T$$.charCodeAt(0);return this._fontWidthMap[T$b]?this._fontWidthMap[T$b]+this.letterSpacing:" "==T$$?this._spaceWidth+this.letterSpacing:0},T$b.getTextWidth=function(T$$){for(var T$b=0,T$u=0,T$Z=T$$.length;T$u<T$Z;T$u++)T$b+=this.getCharWidth(T$$.charAt(T$u));return T$b},T$b.getMaxWidth=function(){return this._maxWidth},T$b.getMaxHeight=function(){return this.fontSize},T$b.drawText=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F,T$x=this.getTextWidth(T$$),T$g=0;"center"===T$E&&(T$g=(T$r-T$x)/2),"right"===T$E&&(T$g=T$r-T$x);for(var T$H=0,T$w=0,T$I=T$$.length;T$w<T$I;T$w++)(T$F=this.getCharTexture(T$$.charAt(T$w)))&&(T$b.graphics.drawTexture(T$F,T$u+T$H+T$g,T$Z),T$H+=this.getCharWidth(T$$.charAt(T$w)))},T$$}(),T$x=function(){function T$u(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=T$u._TF_EMPTY}T$w(T$u,"laya.display.css.Style");var T$$=T$u.prototype;return T$$.getTransform=function(){return this._tf},T$$.setTransform=function(T$$){this._tf="none"!==T$$&&T$$?T$$:T$u._TF_EMPTY},T$$.setTranslateX=function(T$$){this._tf===T$u._TF_EMPTY&&(this._tf=new T$E),this._tf.translateX=T$$},T$$.setTranslateY=function(T$$){this._tf===T$u._TF_EMPTY&&(this._tf=new T$E),this._tf.translateY=T$$},T$$.setScaleX=function(T$$){this._tf===T$u._TF_EMPTY&&(this._tf=new T$E),this._tf.scaleX=T$$},T$$.setScale=function(T$$,T$b){this._tf===T$u._TF_EMPTY&&(this._tf=new T$E),this._tf.scaleX=T$$,this._tf.scaleY=T$b},T$$.setScaleY=function(T$$){this._tf===T$u._TF_EMPTY&&(this._tf=new T$E),this._tf.scaleY=T$$},T$$.setRotate=function(T$$){this._tf===T$u._TF_EMPTY&&(this._tf=new T$E),this._tf.rotate=T$$},T$$.setSkewX=function(T$$){this._tf===T$u._TF_EMPTY&&(this._tf=new T$E),this._tf.skewX=T$$},T$$.setSkewY=function(T$$){this._tf===T$u._TF_EMPTY&&(this._tf=new T$E),this._tf.skewY=T$$},T$$.destroy=function(){this.scrollRect=null},T$$.render=function(T$$,T$b,T$u,T$Z){},T$$.getCSSStyle=function(){return T$b$.EMPTY},T$$._enableLayout=function(){return!1},T$D(0,T$$,"scaleX",function(){return this._tf.scaleX},function(T$$){this.setScaleX(T$$)}),T$D(0,T$$,"transform",function(){return this.getTransform()},function(T$$){this.setTransform(T$$)}),T$D(0,T$$,"translateX",function(){return this._tf.translateX},function(T$$){this.setTranslateX(T$$)}),T$D(0,T$$,"translateY",function(){return this._tf.translateY},function(T$$){this.setTranslateY(T$$)}),T$D(0,T$$,"scaleY",function(){return this._tf.scaleY},function(T$$){this.setScaleY(T$$)}),T$D(0,T$$,"block",function(){return 0!=(1&this._type)}),T$D(0,T$$,"skewY",function(){return this._tf.skewY},function(T$$){this.setSkewY(T$$)}),T$D(0,T$$,"rotate",function(){return this._tf.rotate},function(T$$){this.setRotate(T$$)}),T$D(0,T$$,"skewX",function(){return this._tf.skewX},function(T$$){this.setSkewX(T$$)}),T$D(0,T$$,"paddingLeft",function(){return 0}),T$D(0,T$$,"paddingTop",function(){return 0}),T$D(0,T$$,"absolute",function(){return!0}),T$u.__init__=function(){T$u._TF_EMPTY=new T$E,T$u.EMPTY=new T$u},T$u.EMPTY=null,T$u._TF_EMPTY=null,T$u}(),T$N=function(){function T$b(T$$){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=T$J.create(T$b.defaultColor),this.family=T$b.defaultFamily,this.stroke=T$b._STROKE,this.size=T$b.defaultSize,T$$&&T$$!==T$b.EMPTY&&T$$.copyTo(this)}T$w(T$b,"laya.display.css.Font");var T$$=T$b.prototype;return T$$.set=function(T$$){this._text=null;for(var T$b=T$$.split(" "),T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++){var T$E=T$b[T$u];switch(T$E){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<T$E.indexOf("px")&&(this.size=parseInt(T$E),this.family=T$b[T$u+1],T$u++)}},T$$.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},T$$.copyTo=function(T$$){T$$._type=this._type,T$$._text=this._text,T$$._weight=this._weight,T$$._color=this._color,T$$.family=this.family,T$$.stroke=this.stroke!=T$b._STROKE?this.stroke.slice():T$b._STROKE,T$$.indent=this.indent,T$$.size=this.size},T$D(0,T$$,"password",function(){return 0!=(1024&this._type)},function(T$$){T$$?this._type|=1024:this._type&=-1025}),T$D(0,T$$,"color",function(){return this._color.strColor},function(T$$){this._color=T$J.create(T$$)}),T$D(0,T$$,"italic",function(){return 0!=(512&this._type)},function(T$$){T$$?this._type|=512:this._type&=-513}),T$D(0,T$$,"bold",function(){return 0!=(2048&this._type)},function(T$$){T$$?this._type|=2048:this._type&=-2049}),T$D(0,T$$,"weight",function(){return""+this._weight},function(T$$){var T$b=0;switch(T$$){case"normal":break;case"bold":this.bold=!0,T$b=700;break;case"bolder":T$b=800;break;case"lighter":T$b=100;break;default:T$b=parseInt(T$$)}this._weight=T$b,this._text=null}),T$D(0,T$$,"decoration",function(){return this._decoration?this._decoration.value:null},function(T$$){var T$b=T$$.split(" ");switch(this._decoration||(this._decoration={}),T$b[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=T$b[0]}T$b[1]&&(this._decoration.color=T$J.create(T$b)),this._decoration.value=T$$}),T$b.__init__=function(){T$b.EMPTY=new T$b(null)},T$b.EMPTY=null,T$b.defaultColor="#000000",T$b.defaultSize=12,T$b.defaultFamily="Arial",T$b.defaultFont="12px Arial",T$b._STROKE=[0,"#000000"],T$b._ITALIC=512,T$b._PASSWORD=1024,T$b._BOLD=2048,T$b}(),T$E=function(){function T$$(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return T$w(T$$,"laya.display.css.TransformInfo"),T$$}(),T$o=function(){function T$I(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,T$Y.isConchNode){this._nativeObj=new T$F._conchGraphics,this.id=this._nativeObj.conchID}}T$w(T$I,"laya.display.Graphics");var T$$=T$I.prototype;return T$$.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},T$$.clear=function(T$$){void 0===T$$&&(T$$=!1);var T$b=0,T$u=0;if(T$$){var T$Z=this._one;if(this._cmds){for(T$u=this._cmds.length,T$b=0;T$b<T$u;T$b++)!(T$Z=this._cmds[T$b])||T$Z.callee!==T$Y._context._drawTexture&&T$Z.callee!==T$Y._context._drawTextureWithTransform||(T$Z[0]=null,T$I._cache.push(T$Z));this._cmds.length=0}else T$Z&&(!T$Z||T$Z.callee!==T$Y._context._drawTexture&&T$Z.callee!==T$Y._context._drawTextureWithTransform||(T$Z[0]=null,T$I._cache.push(T$Z)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(T$b=0,T$u=this._vectorgraphArray.length;T$b<T$u;T$b++)T$U.getInstance().deleteShape(this._vectorgraphArray[T$b]);this._vectorgraphArray.length=0}},T$$._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},T$$._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new T$u,this._graphicBounds._graphics=this)},T$$._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},T$$._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},T$$.getBounds=function(T$$){return void 0===T$$&&(T$$=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(T$$)},T$$.getBoundPoints=function(T$$){return void 0===T$$&&(T$$=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(T$$)},T$$._addCmd=function(T$$){this._cmds=this._cmds||[],T$$.callee=T$$.shift(),this._cmds.push(T$$)},T$$.setFilters=function(T$$){this._saveToCmd(T$Y._context._setFilters,T$$)},T$$.drawTexture=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){if(void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0),void 0===T$F&&(T$F=1),!T$$||T$F<.01)return null;T$Z||(T$Z=T$$.sourceWidth),T$E||(T$E=T$$.sourceHeight),T$F=T$F<0?0:1<T$F?1:T$F;var T$x,T$g=!T$Y.isWebGL&&(T$s.onFirefox||T$s.onEdge||T$s.onIE||T$s.onSafari)?.5:0,T$H=T$Z/T$$.sourceWidth,T$w=T$E/T$$.sourceHeight;return T$Z=T$$.width*T$H,T$E=T$$.height*T$w,T$$.loaded&&(T$Z<=0||T$E<=0)?null:(T$b+=T$$.offsetX*T$H,T$u+=T$$.offsetY*T$w,this._sp&&(this._sp._renderType|=512),T$b-=T$g,T$u-=T$g,T$Z+=2*T$g,T$E+=2*T$g,T$I._cache.length?((T$x=T$I._cache.pop())[0]=T$$,T$x[1]=T$b,T$x[2]=T$u,T$x[3]=T$Z,T$x[4]=T$E,T$x[5]=T$r,T$x[6]=T$F):T$x=[T$$,T$b,T$u,T$Z,T$E,T$r,T$F],T$x.callee=T$r||1!=T$F?T$Y._context._drawTextureWithTransform:T$Y._context._drawTexture,null!=this._one||T$r||1!=T$F?this._saveToCmd(T$x.callee,T$x):(this._one=T$x,this._render=this._renderOneImg),T$$.loaded||T$$.once("loaded",this,this._textureLoaded,[T$$,T$x]),this._repaint(),T$x)},T$$.cleanByTexture=function(T$$,T$b,T$u,T$Z,T$E){if(void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0),!T$$)return this.clear();if(this._one&&this._render===this._renderOneImg){T$Z||(T$Z=T$$.sourceWidth),T$E||(T$E=T$$.sourceHeight);var T$r=T$Z/T$$.sourceWidth,T$F=T$E/T$$.sourceHeight;T$Z=T$$.width*T$r,T$E=T$$.height*T$F,T$b+=T$$.offsetX*T$r,T$u+=T$$.offsetY*T$F,this._one[0]=T$$,this._one[1]=T$b,this._one[2]=T$u,this._one[3]=T$Z,this._one[4]=T$E,this._repaint()}else this.clear(),T$$&&this.drawTexture(T$$,T$b,T$u,T$Z,T$E)},T$$.drawTextures=function(T$$,T$b){T$$&&this._saveToCmd(T$Y._context._drawTextures,[T$$,T$b])},T$$.fillTexture=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){if(void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0),void 0===T$r&&(T$r="repeat"),T$$){var T$x=[T$$,T$b,T$u,T$Z,T$E,T$r,T$F||T$q.EMPTY,{}];T$$.loaded||T$$.once("loaded",this,this._textureLoaded,[T$$,T$x]),this._saveToCmd(T$Y._context._fillTexture,T$x)}},T$$._textureLoaded=function(T$$,T$b){T$b[3]=T$b[3]||T$$.width,T$b[4]=T$b[4]||T$$.height,this._repaint()},T$$.fillCircle=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){T$u.bitmap.enableMerageInAtlas=!1;var T$x=new Float32Array(2*(T$F+1)),T$g=new Float32Array(2*(T$F+1)),T$H=new Uint16Array(3*T$F),T$w=2*Math.PI/T$F,T$I=0;T$x[0]=T$Z,T$x[1]=T$E,T$g[0]=T$Z/T$u.width,T$g[1]=T$E/T$u.height;for(var T$o=2,T$N=0;T$N<T$F;T$N++){var T$D=T$r*Math.cos(T$I)+T$Z,T$e=T$r*Math.sin(T$I)+T$E;T$x[T$o]=T$D,T$x[T$o+1]=T$e,T$g[T$o]=T$D/T$u.width,T$g[T$o+1]=T$e/T$u.height,T$I+=T$w,T$o+=2}for(T$N=T$o=0;T$N<T$F;T$N++)T$H[T$o++]=0,T$H[T$o++]=T$N+1,T$H[T$o++]=T$F+1<=T$N+2?1:T$N+2;this.drawTriangles(T$u,T$$,T$b,T$x,T$g,T$H)},T$$.drawTriangles=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){void 0===T$x&&(T$x=1),this._saveToCmd(T$Y._context.drawTriangles,[T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H])},T$$._saveToCmd=function(T$$,T$b){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=T$b,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(T$b)),T$b.callee=T$$,this._repaint(),T$b},T$$.clipRect=function(T$$,T$b,T$u,T$Z){this._saveToCmd(T$Y._context._clipRect,[T$$,T$b,T$u,T$Z])},T$$.fillText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){void 0===T$F&&(T$F=0),this._saveToCmd(T$Y._context._fillText,[T$$,T$b,T$u,T$Z||T$N.defaultFont,T$E,T$r])},T$$.fillBorderText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){this._saveToCmd(T$Y._context._fillBorderText,[T$$,T$b,T$u,T$Z||T$N.defaultFont,T$E,T$r,T$F,T$x])},T$$.strokeText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this._saveToCmd(T$Y._context._strokeText,[T$$,T$b,T$u,T$Z||T$N.defaultFont,T$E,T$r,T$F])},T$$.alpha=function(T$$){T$$=T$$<0?0:1<T$$?1:T$$,this._saveToCmd(T$Y._context._alpha,[T$$])},T$$.setAlpha=function(T$$){T$$=T$$<0?0:1<T$$?1:T$$,this._saveToCmd(T$Y._context._setAlpha,[T$$])},T$$.transform=function(T$$,T$b,T$u){void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),this._saveToCmd(T$Y._context._transform,[T$$,T$b,T$u])},T$$.rotate=function(T$$,T$b,T$u){void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),this._saveToCmd(T$Y._context._rotate,[T$$,T$b,T$u])},T$$.scale=function(T$$,T$b,T$u,T$Z){void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=0),this._saveToCmd(T$Y._context._scale,[T$$,T$b,T$u,T$Z])},T$$.translate=function(T$$,T$b){this._saveToCmd(T$Y._context._translate,[T$$,T$b])},T$$.save=function(){this._saveToCmd(T$Y._context._save,[])},T$$.restore=function(){this._saveToCmd(T$Y._context._restore,[])},T$$.replaceText=function(T$$){this._repaint();var T$b=this._cmds;if(T$b){for(var T$u=T$b.length-1;-1<T$u;T$u--)if(this._isTextCmd(T$b[T$u].callee))return T$b[T$u][0].toUpperCase?T$b[T$u][0]=T$$:T$b[T$u][0].setText(T$$),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=T$$:this._one[0].setText(T$$),!0;return!1},T$$._isTextCmd=function(T$$){return T$$===T$Y._context._fillText||T$$===T$Y._context._fillBorderText||T$$===T$Y._context._strokeText},T$$.replaceTextColor=function(T$$){this._repaint();var T$b=this._cmds;if(T$b)for(var T$u=T$b.length-1;-1<T$u;T$u--)this._isTextCmd(T$b[T$u].callee)&&(T$b[T$u][4]=T$$,T$b[T$u][0].toUpperCase||(T$b[T$u][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=T$$,this._one[0].toUpperCase||(this._one[0].changed=!0))},T$$.loadImage=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=this;void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0);var T$x=T$x$.getRes(T$$);function T$g(T$$){T$$&&(T$F.drawTexture(T$$,T$b,T$u,T$Z,T$E),null!=T$r&&T$r.call(T$F._sp,T$$))}T$x?T$g(T$x):T$z.loader.load(T$$,T$_.create(null,T$g),null,"image")},T$$._renderEmpty=function(T$$,T$b,T$u,T$Z){},T$$._renderAll=function(T$$,T$b,T$u,T$Z){for(var T$E,T$r=this._cmds,T$F=0,T$x=T$r.length;T$F<T$x;T$F++)(T$E=T$r[T$F]).callee.call(T$b,T$u,T$Z,T$E)},T$$._renderOne=function(T$$,T$b,T$u,T$Z){this._one.callee.call(T$b,T$u,T$Z,this._one)},T$$._renderOneImg=function(T$$,T$b,T$u,T$Z){this._one.callee.call(T$b,T$u,T$Z,this._one),2305!==T$$._renderType&&(T$$._renderType|=1)},T$$.drawLine=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$r&&(T$r=1);var T$F=0;T$Y.isWebGL&&(T$F=T$U.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$F));var T$x=T$r%2==0?0:.5,T$g=[T$$+T$x,T$b+T$x,T$u+T$x,T$Z+T$x,T$E,T$r,T$F];this._saveToCmd(T$Y._context._drawLine,T$g)},T$$.drawLines=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$E&&(T$E=1);var T$r=0;if(T$u&&!(T$u.length<4)){T$Y.isWebGL&&(T$r=T$U.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$r));var T$F=T$E%2==0?0:.5,T$x=[T$$+T$F,T$b+T$F,T$u,T$Z,T$E,T$r];this._saveToCmd(T$Y._context._drawLines,T$x)}},T$$.drawCurves=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$E&&(T$E=1);var T$r=[T$$,T$b,T$u,T$Z,T$E];this._saveToCmd(T$Y._context._drawCurves,T$r)},T$$.drawRect=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){void 0===T$F&&(T$F=1);var T$x=T$r?T$F/2:0,T$g=T$r?T$F:0,T$H=[T$$+T$x,T$b+T$x,T$u-T$g,T$Z-T$g,T$E,T$r,T$F];this._saveToCmd(T$Y._context._drawRect,T$H)},T$$.drawCircle=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$r&&(T$r=1);var T$F=T$E?T$r/2:0,T$x=0;T$Y.isWebGL&&(T$x=T$U.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$x));var T$g=[T$$,T$b,T$u-T$F,T$Z,T$E,T$r,T$x];this._saveToCmd(T$Y._context._drawCircle,T$g)},T$$.drawPie=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){void 0===T$x&&(T$x=1);var T$g=T$F?T$x/2:0,T$H=T$F?T$x:0,T$w=0;T$Y.isWebGL&&(T$w=T$U.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$w));var T$I=[T$$+T$g,T$b+T$g,T$u-T$H,T$Z,T$E,T$r,T$F,T$x,T$w];T$I[3]=T$d.toRadian(T$Z),T$I[4]=T$d.toRadian(T$E),this._saveToCmd(T$Y._context._drawPie,T$I)},T$$.drawPoly=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$r&&(T$r=1);var T$F=0,T$x=!1;T$Y.isWebGL&&(T$F=T$U.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(T$F),T$x=!(6<T$u.length));var T$g=T$E?T$r%2==0?0:.5:0,T$H=[T$$+T$g,T$b+T$g,T$u,T$Z,T$E,T$r,T$F,T$x];this._saveToCmd(T$Y._context._drawPoly,T$H)},T$$.drawPath=function(T$$,T$b,T$u,T$Z,T$E){var T$r=[T$$,T$b,T$u,T$Z,T$E];this._saveToCmd(T$Y._context._drawPath,T$r)},T$D(0,T$$,"cmds",function(){return this._cmds},function(T$$){this._sp&&(this._sp._renderType|=512),this._cmds=T$$,this._render=this._renderAll,this._repaint()}),T$I.__init__=function(){if(T$Y.isConchNode){for(var T$$=laya.display.Graphics.prototype,T$b=T$s.window.ConchGraphics.prototype,T$u=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],T$Z=0,T$E=T$u.length;T$Z<=T$E;T$Z++){var T$r=T$u[T$Z];T$$[T$r]=T$b[T$r]}T$$._saveToCmd=null,T$b.drawImageS&&(T$$.drawTextures=function(T$$,T$b){if(T$$&&T$$.loaded&&T$$.bitmap&&T$$.source){var T$u=T$$.uv,T$Z=T$$.bitmap.width,T$E=T$$.bitmap.height;this.drawImageS(T$$.bitmap.source,T$u[0]*T$Z,T$u[1]*T$E,(T$u[2]-T$u[0])*T$Z,(T$u[5]-T$u[3])*T$E,T$$.offsetX,T$$.offsetY,T$$.width,T$$.height,T$b)}}),T$$.drawTexture=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){if(void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0),void 0===T$F&&(T$F=1),T$$)if(T$$.loaded){if(T$$.loaded&&T$$.bitmap&&T$$.source&&(T$Z||(T$Z=T$$.sourceWidth),T$E||(T$E=T$$.sourceHeight),T$F=T$F<0?0:1<T$F?1:T$F,T$Z=T$Z-T$$.sourceWidth+T$$.width,T$E=T$E-T$$.sourceHeight+T$$.height,!(T$Z<=0||T$E<=0))){T$b+=T$$.offsetX,T$u+=T$$.offsetY;var T$x=T$$.uv,T$g=T$$.bitmap.width,T$H=T$$.bitmap.height;T$x[4]<T$x[0]&&T$x[5]<T$x[1]?this.drawImageM(T$$.bitmap.source,T$x[4]*T$g,T$x[5]*T$H,(T$x[0]-T$x[4])*T$g,(T$x[1]-T$x[5])*T$H,T$b,T$u,T$Z,T$E,T$r,T$F):this.drawImageM(T$$.bitmap.source,T$x[0]*T$g,T$x[1]*T$H,(T$x[2]-T$x[0])*T$g,(T$x[5]-T$x[3])*T$H,T$b,T$u,T$Z,T$E,T$r,T$F),this._repaint()}}else T$$.once("loaded",this,function(){this.drawTexture(T$$,T$b,T$u,T$Z,T$E,T$r)})},T$$.fillTexture=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){if(void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0),void 0===T$r&&(T$r="repeat"),T$$&&T$$.loaded){var T$x,T$g=T$Y._context.ctx,T$H=T$$.bitmap.width,T$w=T$$.bitmap.height,T$I=T$$.uv;T$x=T$$.uv!=T$w$.DEF_UV?T$g.createPattern(T$$.bitmap.source,T$r,T$I[0]*T$H,T$I[1]*T$w,(T$I[2]-T$I[0])*T$H,(T$I[5]-T$I[3])*T$w):T$g.createPattern(T$$.bitmap.source,T$r);var T$o=0,T$N=0;T$F&&(T$b+=T$F.x%T$$.width,T$u+=T$F.y%T$$.height,T$o-=T$F.x%T$$.width,T$N-=T$F.y%T$$.height),this._fillImage(T$x,T$b,T$u,T$o,T$N,T$Z,T$E)}}}},T$I._cache=[],T$I}(),T$u=function(){function T$y(){this._cacheBoundsType=!1}T$w(T$y,"laya.display.GraphicsBounds");var T$$=T$y.prototype;return T$$.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},T$$.reset=function(){this._temp&&(this._temp.length=0)},T$$.getBounds=function(T$$){return void 0===T$$&&(T$$=!1),(!this._bounds||!this._temp||this._temp.length<1||T$$!=this._cacheBoundsType)&&(this._bounds=T$a._getWrapRec(this.getBoundPoints(T$$),this._bounds)),this._cacheBoundsType=T$$,this._bounds},T$$.getBoundPoints=function(T$$){return void 0===T$$&&(T$$=!1),(!this._temp||this._temp.length<1||T$$!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(T$$)),this._cacheBoundsType=T$$,this._rstBoundPoints=T$d.copyArray(this._rstBoundPoints,this._temp)},T$$._getCmdPoints=function(T$$){void 0===T$$&&(T$$=!1);var T$b,T$u,T$Z=T$Y._context,T$E=this._graphics.cmds;if((T$b=this._temp||(this._temp=[])).length=0,T$E||null==this._graphics._one||(T$y._tempCmds.length=0,T$y._tempCmds.push(this._graphics._one),T$E=T$y._tempCmds),!T$E)return T$b;(T$u=T$y._tempMatrixArrays).length=0;var T$r=T$y._initMatrix;T$r.identity();for(var T$F,T$x,T$g=T$y._tempMatrix,T$H=NaN,T$w=NaN,T$I=NaN,T$o=NaN,T$N=NaN,T$D=NaN,T$e=0,T$L=T$E.length;T$e<T$L;T$e++)if((T$F=T$E[T$e]).callee)switch(T$F.callee){case T$Z._save:case 7:T$u.push(T$r),T$r=T$r.clone();break;case T$Z._restore:case 8:T$r=T$u.pop();break;case T$Z._scale:case 5:T$g.identity(),T$g.translate(-T$F[2],-T$F[3]),T$g.scale(T$F[0],T$F[1]),T$g.translate(T$F[2],T$F[3]),this._switchMatrix(T$r,T$g);break;case T$Z._rotate:case 3:T$g.identity(),T$g.translate(-T$F[1],-T$F[2]),T$g.rotate(T$F[0]),T$g.translate(T$F[1],T$F[2]),this._switchMatrix(T$r,T$g);break;case T$Z._translate:case 6:T$g.identity(),T$g.translate(T$F[0],T$F[1]),this._switchMatrix(T$r,T$g);break;case T$Z._transform:case 4:T$g.identity(),T$g.translate(-T$F[1],-T$F[2]),T$g.concat(T$F[0]),T$g.translate(T$F[1],T$F[2]),this._switchMatrix(T$r,T$g);break;case 16:case 24:T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[0],T$F[1],T$F[2],T$F[3]),T$r);break;case 17:T$r.copyTo(T$g),T$g.concat(T$F[4]),T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[0],T$F[1],T$F[2],T$F[3]),T$g);break;case T$Z._drawTexture:T$x=T$F[0],T$$?T$F[3]&&T$F[4]?T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[1],T$F[2],T$F[3],T$F[4]),T$r):(T$x=T$F[0],T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[1],T$F[2],T$x.width,T$x.height),T$r)):(T$H=(T$F[3]||T$x.sourceWidth)/T$x.width,T$w=(T$F[4]||T$x.sourceHeight)/T$x.height,T$I=T$H*T$x.sourceWidth,T$o=T$w*T$x.sourceHeight,T$N=0<T$x.offsetX?T$x.offsetX:0,T$D=0<T$x.offsetY?T$x.offsetY:0,T$N*=T$H,T$D*=T$w,T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[1]-T$N,T$F[2]-T$D,T$I,T$o),T$r));break;case T$Z._fillTexture:T$F[3]&&T$F[4]?T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[1],T$F[2],T$F[3],T$F[4]),T$r):(T$x=T$F[0],T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[1],T$F[2],T$x.width,T$x.height),T$r));break;case T$Z._drawTextureWithTransform:var T$T;T$T=T$F[5]?(T$r.copyTo(T$g),T$g.concat(T$F[5]),T$g):T$r,T$$?T$F[3]&&T$F[4]?T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[1],T$F[2],T$F[3],T$F[4]),T$T):(T$x=T$F[0],T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[1],T$F[2],T$x.width,T$x.height),T$T)):(T$x=T$F[0],T$H=(T$F[3]||T$x.sourceWidth)/T$x.width,T$w=(T$F[4]||T$x.sourceHeight)/T$x.height,T$I=T$H*T$x.sourceWidth,T$o=T$w*T$x.sourceHeight,T$N=0<T$x.offsetX?T$x.offsetX:0,T$D=0<T$x.offsetY?T$x.offsetY:0,T$N*=T$H,T$D*=T$w,T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[1]-T$N,T$F[2]-T$D,T$I,T$o),T$T));break;case T$Z._drawRect:case 13:T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[0],T$F[1],T$F[2],T$F[3]),T$r);break;case T$Z._drawCircle:case T$Z._fillCircle:case 14:T$y._addPointArrToRst(T$b,T$a._getBoundPointS(T$F[0]-T$F[2],T$F[1]-T$F[2],T$F[2]+T$F[2],T$F[2]+T$F[2]),T$r);break;case T$Z._drawLine:case 20:T$y._tempPoints.length=0;var T$_;T$_=.5*T$F[5],T$F[0]==T$F[2]?T$y._tempPoints.push(T$F[0]+T$_,T$F[1],T$F[2]+T$_,T$F[3],T$F[0]-T$_,T$F[1],T$F[2]-T$_,T$F[3]):T$F[1]==T$F[3]?T$y._tempPoints.push(T$F[0],T$F[1]+T$_,T$F[2],T$F[3]+T$_,T$F[0],T$F[1]-T$_,T$F[2],T$F[3]-T$_):T$y._tempPoints.push(T$F[0],T$F[1],T$F[2],T$F[3]),T$y._addPointArrToRst(T$b,T$y._tempPoints,T$r);break;case T$Z._drawCurves:case 22:T$y._addPointArrToRst(T$b,T$S.I.getBezierPoints(T$F[2]),T$r,T$F[0],T$F[1]);break;case T$Z._drawPoly:case T$Z._drawLines:case 18:T$y._addPointArrToRst(T$b,T$F[2],T$r,T$F[0],T$F[1]);break;case T$Z._drawPath:case 19:T$y._addPointArrToRst(T$b,this._getPathPoints(T$F[2]),T$r,T$F[0],T$F[1]);break;case T$Z._drawPie:case 15:T$y._addPointArrToRst(T$b,this._getPiePoints(T$F[0],T$F[1],T$F[2],T$F[3],T$F[4]),T$r)}return 200<T$b.length?T$b=T$d.copyArray(T$b,T$a._getWrapRec(T$b)._getBoundPoints()):8<T$b.length&&(T$b=T$P.scanPList(T$b)),T$b},T$$._switchMatrix=function(T$$,T$b){T$b.concat(T$$),T$b.copyTo(T$$)},T$$._getPiePoints=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$y._tempPoints;T$y._tempPoints.length=0,T$r.push(T$$,T$b);var T$F=(T$E-T$Z)%(2*Math.PI)/10,T$x=NaN,T$g=T$Z;for(T$x=0;T$x<=10;T$x++)T$r.push(T$$+T$u*Math.cos(T$g),T$b+T$u*Math.sin(T$g)),T$g+=T$F;return T$r},T$$._getPathPoints=function(T$$){var T$b,T$u,T$Z=0,T$E=T$y._tempPoints;for(T$E.length=0,T$b=T$$.length,T$Z=0;T$Z<T$b;T$Z++)1<(T$u=T$$[T$Z]).length&&(T$E.push(T$u[1],T$u[2]),3<T$u.length&&T$E.push(T$u[3],T$u[4]));return T$E},T$y._addPointArrToRst=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0);var T$r,T$F=0;for(T$r=T$b.length,T$F=0;T$F<T$r;T$F+=2)T$y._addPointToRst(T$$,T$b[T$F]+T$Z,T$b[T$F+1]+T$E,T$u)},T$y._addPointToRst=function(T$$,T$b,T$u,T$Z){var T$E=T$q.TEMP;T$E.setTo(T$b||0,T$u||0),T$Z.transformPoint(T$E),T$$.push(T$E.x,T$E.y)},T$y._tempPoints=[],T$y._tempMatrixArrays=[],T$y._tempCmds=[],T$g(T$y,["_tempMatrix",function(){return this._tempMatrix=new T$V},"_initMatrix",function(){return this._initMatrix=new T$V}]),T$y}(),T$r=function(){function T$$(){}T$w(T$$,"laya.events.Event");var T$b=T$$.prototype;return T$b.setTo=function(T$$,T$b,T$u){return this.type=T$$,this.currentTarget=T$b,this.target=T$u,this},T$b.stopPropagation=function(){this._stoped=!0},T$D(0,T$b,"stageY",function(){return T$z.stage.mouseY}),T$D(0,T$b,"charCode",function(){return this.nativeEvent.charCode}),T$D(0,T$b,"touches",function(){var T$$=this.nativeEvent.touches;if(T$$)for(var T$b=T$z.stage,T$u=0,T$Z=T$$.length;T$u<T$Z;T$u++){var T$E=T$$[T$u],T$r=T$q.TEMP;T$r.setTo(T$E.clientX,T$E.clientY),T$b._canvasTransform.invertTransformPoint(T$r),T$b.transform.invertTransformPoint(T$r),T$E.stageX=T$r.x,T$E.stageY=T$r.y}return T$$}),T$D(0,T$b,"keyLocation",function(){return this.nativeEvent.keyLocation}),T$D(0,T$b,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),T$D(0,T$b,"altKey",function(){return this.nativeEvent.altKey}),T$D(0,T$b,"shiftKey",function(){return this.nativeEvent.shiftKey}),T$D(0,T$b,"stageX",function(){return T$z.stage.mouseX}),T$$.EMPTY=new T$$,T$$.MOUSE_DOWN="mousedown",T$$.MOUSE_UP="mouseup",T$$.CLICK="click",T$$.RIGHT_MOUSE_DOWN="rightmousedown",T$$.RIGHT_MOUSE_UP="rightmouseup",T$$.RIGHT_CLICK="rightclick",T$$.MOUSE_MOVE="mousemove",T$$.MOUSE_OVER="mouseover",T$$.MOUSE_OUT="mouseout",T$$.MOUSE_WHEEL="mousewheel",T$$.ROLL_OVER="mouseover",T$$.ROLL_OUT="mouseout",T$$.DOUBLE_CLICK="doubleclick",T$$.CHANGE="change",T$$.CHANGED="changed",T$$.RESIZE="resize",T$$.ADDED="added",T$$.REMOVED="removed",T$$.DISPLAY="display",T$$.UNDISPLAY="undisplay",T$$.ERROR="error",T$$.COMPLETE="complete",T$$.LOADED="loaded",T$$.INITED="inited",T$$.PROGRESS="progress",T$$.INPUT="input",T$$.RENDER="render",T$$.OPEN="open",T$$.MESSAGE="message",T$$.CLOSE="close",T$$.KEY_DOWN="keydown",T$$.KEY_PRESS="keypress",T$$.KEY_UP="keyup",T$$.FRAME="enterframe",T$$.DRAG_START="dragstart",T$$.DRAG_MOVE="dragmove",T$$.DRAG_END="dragend",T$$.ENTER="enter",T$$.SELECT="select",T$$.BLUR="blur",T$$.FOCUS="focus",T$$.VISIBILITY_CHANGE="visibilitychange",T$$.FOCUS_CHANGE="focuschange",T$$.PLAYED="played",T$$.PAUSED="paused",T$$.STOPPED="stopped",T$$.START="start",T$$.END="end",T$$.ENABLE_CHANGED="enablechanged",T$$.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",T$$.COMPONENT_ADDED="componentadded",T$$.COMPONENT_REMOVED="componentremoved",T$$.LAYER_CHANGED="layerchanged",T$$.HIERARCHY_LOADED="hierarchyloaded",T$$.RECOVERED="recovered",T$$.RELEASED="released",T$$.LINK="link",T$$.LABEL="label",T$$.FULL_SCREEN_CHANGE="fullscreenchange",T$$.DEVICE_LOST="devicelost",T$$.MESH_CHANGED="meshchanged",T$$.MATERIAL_CHANGED="materialchanged",T$$.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",T$$.ANIMATION_CHANGED="animationchanged",T$$.TRIGGER_ENTER="triggerenter",T$$.TRIGGER_STAY="triggerstay",T$$.TRIGGER_EXIT="triggerexit",T$$.TRAIL_FILTER_CHANGE="trailfilterchange",T$$.DOMINO_FILTER_CHANGE="dominofilterchange",T$$}(),T$I=(function(){function T$$(){}T$w(T$$,"laya.events.Keyboard"),T$$.NUMBER_0=48,T$$.NUMBER_1=49,T$$.NUMBER_2=50,T$$.NUMBER_3=51,T$$.NUMBER_4=52,T$$.NUMBER_5=53,T$$.NUMBER_6=54,T$$.NUMBER_7=55,T$$.NUMBER_8=56,T$$.NUMBER_9=57,T$$.A=65,T$$.B=66,T$$.C=67,T$$.D=68,T$$.E=69,T$$.F=70,T$$.G=71,T$$.H=72,T$$.I=73,T$$.J=74,T$$.K=75,T$$.L=76,T$$.M=77,T$$.N=78,T$$.O=79,T$$.P=80,T$$.Q=81,T$$.R=82,T$$.S=83,T$$.T=84,T$$.U=85,T$$.V=86,T$$.W=87,T$$.X=88,T$$.Y=89,T$$.Z=90,T$$.F1=112,T$$.F2=113,T$$.F3=114,T$$.F4=115,T$$.F5=116,T$$.F6=117,T$$.F7=118,T$$.F8=119,T$$.F9=120,T$$.F10=121,T$$.F11=122,T$$.F12=123,T$$.F13=124,T$$.F14=125,T$$.F15=126,T$$.NUMPAD=21,T$$.NUMPAD_0=96,T$$.NUMPAD_1=97,T$$.NUMPAD_2=98,T$$.NUMPAD_3=99,T$$.NUMPAD_4=100,T$$.NUMPAD_5=101,T$$.NUMPAD_6=102,T$$.NUMPAD_7=103,T$$.NUMPAD_8=104,T$$.NUMPAD_9=105,T$$.NUMPAD_ADD=107,T$$.NUMPAD_DECIMAL=110,T$$.NUMPAD_DIVIDE=111,T$$.NUMPAD_ENTER=108,T$$.NUMPAD_MULTIPLY=106,T$$.NUMPAD_SUBTRACT=109,T$$.SEMICOLON=186,T$$.EQUAL=187,T$$.COMMA=188,T$$.MINUS=189,T$$.PERIOD=190,T$$.SLASH=191,T$$.BACKQUOTE=192,T$$.LEFTBRACKET=219,T$$.BACKSLASH=220,T$$.RIGHTBRACKET=221,T$$.QUOTE=222,T$$.ALTERNATE=18,T$$.BACKSPACE=8,T$$.CAPS_LOCK=20,T$$.COMMAND=15,T$$.CONTROL=17,T$$.DELETE=46,T$$.ENTER=13,T$$.ESCAPE=27,T$$.PAGE_UP=33,T$$.PAGE_DOWN=34,T$$.END=35,T$$.HOME=36,T$$.LEFT=37,T$$.UP=38,T$$.RIGHT=39,T$$.DOWN=40,T$$.SHIFT=16,T$$.SPACE=32,T$$.TAB=9,T$$.INSERT=45}(),function(){function T$E(){}return T$w(T$E,"laya.events.KeyBoardManager"),T$E.__init__=function(){T$E._addEvent("keydown"),T$E._addEvent("keypress"),T$E._addEvent("keyup")},T$E._addEvent=function(T$b){T$s.document.addEventListener(T$b,function(T$$){laya.events.KeyBoardManager._dispatch(T$$,T$b)},!0)},T$E._dispatch=function(T$$,T$b){if(T$E.enabled){T$E._event._stoped=!1,T$E._event.nativeEvent=T$$,T$E._event.keyCode=T$$.keyCode||T$$.which||T$$.charCode,"keydown"===T$b?T$E._pressKeys[T$E._event.keyCode]=!0:"keyup"===T$b&&(T$E._pressKeys[T$E._event.keyCode]=null);for(var T$u=T$z.stage.focus&&null!=T$z.stage.focus.event&&T$z.stage.focus.displayedInStage?T$z.stage.focus:T$z.stage,T$Z=T$u;T$Z;)T$Z.event(T$b,T$E._event.setTo(T$b,T$Z,T$u)),T$Z=T$Z.parent}},T$E.hasKeyDown=function(T$$){return T$E._pressKeys[T$$]},T$E._pressKeys={},T$E.enabled=!0,T$g(T$E,["_event",function(){return this._event=new T$r}]),T$E}()),T$e=(function(){function T$$(){}T$w(T$$,"laya.events.KeyLocation"),T$$.STANDARD=0,T$$.LEFT=1,T$$.RIGHT=2,T$$.NUM_PAD=3}(),function(){function T$H(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=T$s.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new T$r,this._matrix=new T$V,this._point=new T$q,this._rect=new T$a,this._prePoint=new T$q,this._curTouchID=NaN}T$w(T$H,"laya.events.MouseManager");var T$$=T$H.prototype;return T$$.__init__=function(T$$,T$b){var T$u=this;this._stage=T$$;var T$Z=this,T$E=this._eventList;T$b.oncontextmenu=function(T$$){if(T$H.enabled)return!1},T$b.addEventListener("mousedown",function(T$$){T$H.enabled&&(T$s.onIE||T$$.preventDefault(),T$E.push(T$$),T$Z.mouseDownTime=T$s.now())}),T$b.addEventListener("mouseup",function(T$$){T$H.enabled&&(T$$.preventDefault(),T$E.push(T$$),T$Z.mouseDownTime=-T$s.now())},!0),T$b.addEventListener("mousemove",function(T$$){if(T$H.enabled){T$$.preventDefault();var T$b=T$s.now();if(T$b-T$Z._lastMoveTimer<10)return;T$Z._lastMoveTimer=T$b,T$E.push(T$$)}},!0),T$b.addEventListener("mouseout",function(T$$){T$H.enabled&&T$E.push(T$$)}),T$b.addEventListener("mouseover",function(T$$){T$H.enabled&&T$E.push(T$$)}),T$b.addEventListener("touchstart",function(T$$){T$H.enabled&&(T$E.push(T$$),T$H._isFirstTouch||T$P$.isInputting||T$$.preventDefault(),T$Z.mouseDownTime=T$s.now())}),T$b.addEventListener("touchend",function(T$$){T$H.enabled?(T$H._isFirstTouch||T$P$.isInputting||T$$.preventDefault(),T$H._isFirstTouch=!1,T$E.push(T$$),T$Z.mouseDownTime=-T$s.now()):T$u._curTouchID=NaN},!0),T$b.addEventListener("touchmove",function(T$$){T$H.enabled&&(T$$.preventDefault(),T$E.push(T$$))},!0),T$b.addEventListener("touchcancel",function(T$$){T$H.enabled?(T$$.preventDefault(),T$E.push(T$$)):T$u._curTouchID=NaN},!0),T$b.addEventListener("mousewheel",function(T$$){T$H.enabled&&T$E.push(T$$)}),T$b.addEventListener("DOMMouseScroll",function(T$$){T$H.enabled&&T$E.push(T$$)})},T$$.initEvent=function(T$$,T$b){var T$u;this._event._stoped=!1,this._event.nativeEvent=T$b||T$$,this._target=null,this._point.setTo(T$$.pageX||T$$.clientX,T$$.pageY||T$$.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=T$$.identifier||0,this._tTouchID=this._event.touchId,(T$u=T$L.I._event)._stoped=!1,T$u.nativeEvent=this._event.nativeEvent,T$u.touchId=this._event.touchId},T$$.checkMouseWheel=function(T$$){this._event.delta=T$$.wheelDelta?.025*T$$.wheelDelta:-T$$.detail;for(var T$b=T$L.I.getLastOvers(),T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++){var T$E=T$b[T$u];T$E.event("mousewheel",this._event.setTo("mousewheel",T$E,this._target))}},T$$.onMouseMove=function(T$$){T$L.I.onMouseMove(T$$,this._tTouchID)},T$$.onMouseDown=function(T$$){if(T$P$.isInputting&&T$z.stage.focus&&T$z.stage.focus.focus&&!T$z.stage.focus.contains(this._target)){var T$b=T$z.stage.focus._tf||T$z.stage.focus,T$u=T$$._tf||T$$;T$u instanceof laya.display.Input&&T$u.multiline==T$b.multiline?T$b._focusOut():T$b.focus=!1}T$L.I.onMouseDown(T$$,this._tTouchID,this._isLeftMouse)},T$$.onMouseUp=function(T$$){T$L.I.onMouseUp(T$$,this._tTouchID,this._isLeftMouse)},T$$.check=function(T$$,T$b,T$u,T$Z){this._point.setTo(T$b,T$u),T$$.fromParentPoint(this._point),T$b=this._point.x,T$u=this._point.y;var T$E=T$$.scrollRect;if(T$E&&(this._rect.setTo(T$E.x,T$E.y,T$E.width,T$E.height),!this._rect.contains(T$b,T$u)))return!1;if(!this.disableMouseEvent){if(T$$.hitTestPrior&&!T$$.mouseThrough&&!this.hitTest(T$$,T$b,T$u))return!1;for(var T$r=T$$._childs.length-1;-1<T$r;T$r--){var T$F=T$$._childs[T$r];if(!T$F.destroyed&&T$F.mouseEnabled&&T$F.visible&&this.check(T$F,T$b,T$u,T$Z))return!0}}var T$x=!(!T$$.hitTestPrior||T$$.mouseThrough||this.disableMouseEvent)||this.hitTest(T$$,T$b,T$u);return T$x?(this._target=T$$,T$Z.call(this,T$$)):T$Z===this.onMouseUp&&T$$===this._stage&&(this._target=this._stage,T$Z.call(this,this._target)),T$x},T$$.hitTest=function(T$$,T$b,T$u){var T$Z=!1;if(T$$.scrollRect&&(T$b-=T$$.scrollRect.x,T$u-=T$$.scrollRect.y),T$$.hitArea instanceof laya.utils.HitArea)return T$$.hitArea.isHit(T$b,T$u);if(0<T$$.width&&0<T$$.height||T$$.mouseThrough||T$$.hitArea)if(T$$.mouseThrough)T$Z=T$$.getGraphicBounds().contains(T$b,T$u);else{var T$E=this._rect;T$$.hitArea?T$E=T$$.hitArea:T$E.setTo(0,0,T$$.width,T$$.height),T$Z=T$E.contains(T$b,T$u)}return T$Z},T$$.runEvent=function(){var T$$=this._eventList.length;if(T$$){this.mouseEventTime=T$s.now();var T$b,T$u=0,T$Z=0,T$E=0;try{for(;T$u<T$$;){var T$r=this._eventList[T$u];switch("mousemove"!==T$r.type&&(this._prePoint.x=this._prePoint.y=-1e6),T$r.type){case"mousedown":this._touchIDs[0]=this._id++,T$H._isTouchRespond?T$H._isTouchRespond=!1:(this._isLeftMouse=0===T$r.button,this.initEvent(T$r),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===T$r.button,this.initEvent(T$r),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-T$r.clientX)+Math.abs(this._prePoint.y-T$r.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=T$r.clientX,this._prePoint.y=T$r.clientY,this.initEvent(T$r),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":T$H._isTouchRespond=!0,this._isLeftMouse=!0;var T$F=T$r.changedTouches;for(T$Z=0,T$E=T$F.length;T$Z<T$E;T$Z++)T$b=T$F[T$Z],(T$H.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=T$b.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[T$b.identifier]=this._id++,this.initEvent(T$b,T$r),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":T$H._isTouchRespond=!0,this._isLeftMouse=!0;var T$x=T$r.changedTouches;for(T$Z=0,T$E=T$x.length;T$Z<T$E;T$Z++)if(T$b=T$x[T$Z],T$H.multiTouchEnabled||T$b.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(T$b,T$r);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var T$g=T$r.changedTouches;for(T$Z=0,T$E=T$g.length;T$Z<T$E;T$Z++)T$b=T$g[T$Z],(T$H.multiTouchEnabled||T$b.identifier==this._curTouchID)&&(this.initEvent(T$b,T$r),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(T$r);break;case"mouseout":T$L.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}T$u++}}catch(T$$){throw this._eventList.length=0,T$$}this._eventList.length=0}},T$H.enabled=!0,T$H.multiTouchEnabled=!0,T$H._isTouchRespond=!1,T$H._isFirstTouch=!0,T$g(T$H,["instance",function(){return this.instance=new T$H}]),T$H}()),T$L=function(){function T$D(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new T$r}T$w(T$D,"laya.events.TouchManager");var T$$=T$D.prototype;return T$$._clearTempArrs=function(){T$D._oldArr.length=0,T$D._newArr.length=0,T$D._tEleArr.length=0},T$$.getTouchFromArr=function(T$$,T$b){var T$u,T$Z,T$E=0;for(T$u=T$b.length,T$E=0;T$E<T$u;T$E++)if((T$Z=T$b[T$E]).id==T$$)return T$Z;return null},T$$.removeTouchFromArr=function(T$$,T$b){var T$u=0;for(T$u=T$b.length-1;0<=T$u;T$u--)T$b[T$u].id==T$$&&T$b.splice(T$u,1)},T$$.createTouchO=function(T$$,T$b){var T$u;return(T$u=T$G.getItem("TouchData")||{}).id=T$b,T$u.tar=T$$,T$u},T$$.onMouseDown=function(T$$,T$b,T$u){var T$Z,T$E,T$r,T$F;(void 0===T$u&&(T$u=!1),this.enable)&&(T$Z=this.getTouchFromArr(T$b,this.preOvers),T$r=this.getEles(T$$,null,T$D._tEleArr),T$Z?T$Z.tar=T$$:(T$E=this.createTouchO(T$$,T$b),this.preOvers.push(T$E)),T$s.onMobile&&this.sendEvents(T$r,"mouseover",T$b),T$F=T$u?this.preDowns:this.preRightDowns,(T$Z=this.getTouchFromArr(T$b,T$F))?T$Z.tar=T$$:(T$E=this.createTouchO(T$$,T$b),T$F.push(T$E)),this.sendEvents(T$r,T$u?"mousedown":"rightmousedown",T$b),this._clearTempArrs())},T$$.sendEvents=function(T$$,T$b,T$u){void 0===T$u&&(T$u=0);var T$Z,T$E,T$r,T$F=0;for(T$Z=T$$.length,this._event._stoped=!1,T$E=T$$[0],T$F=0;T$F<T$Z;T$F++){if((T$r=T$$[T$F]).destroyed)return;if(T$r.event(T$b,this._event.setTo(T$b,T$r,T$E)),this._event._stoped)break}},T$$.getEles=function(T$$,T$b,T$u){for(T$u?T$u.length=0:T$u=[];T$$&&T$$!=T$b;)T$u.push(T$$),T$$=T$$.parent;return T$u},T$$.checkMouseOutAndOverOfMove=function(T$$,T$b,T$u){if(void 0===T$u&&(T$u=0),T$b!=T$$){var T$Z,T$E,T$r=0,T$F=0;if(T$b.contains(T$$))T$E=this.getEles(T$$,T$b,T$D._tEleArr),this.sendEvents(T$E,"mouseover",T$u);else if(T$$.contains(T$b))T$E=this.getEles(T$b,T$$,T$D._tEleArr),this.sendEvents(T$E,"mouseout",T$u);else{var T$x,T$g;(T$E=T$D._tEleArr).length=0,T$x=this.getEles(T$b,null,T$D._oldArr),T$g=this.getEles(T$$,null,T$D._newArr),T$F=T$x.length;var T$H=0;for(T$r=0;T$r<T$F;T$r++){if(T$Z=T$x[T$r],0<=(T$H=T$g.indexOf(T$Z))){T$g.splice(T$H,T$g.length-T$H);break}T$E.push(T$Z)}0<T$E.length&&this.sendEvents(T$E,"mouseout",T$u),0<T$g.length&&this.sendEvents(T$g,"mouseover",T$u)}}},T$$.onMouseMove=function(T$$,T$b){var T$u,T$Z;this.enable&&((T$u=this.getTouchFromArr(T$b,this.preOvers))?(this.checkMouseOutAndOverOfMove(T$$,T$u.tar),T$u.tar=T$$,T$Z=this.getEles(T$$,null,T$D._tEleArr)):(T$Z=this.getEles(T$$,null,T$D._tEleArr),this.sendEvents(T$Z,"mouseover",T$b),this.preOvers.push(this.createTouchO(T$$,T$b))),this.sendEvents(T$Z,"mousemove",T$b),this._clearTempArrs())},T$$.getLastOvers=function(){return(T$D._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,T$D._tEleArr):(T$D._tEleArr.push(T$z.stage),T$D._tEleArr)},T$$.stageMouseOut=function(){var T$$;T$$=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(T$$,"mouseout",0)},T$$.onMouseUp=function(T$$,T$b,T$u){if(void 0===T$u&&(T$u=!1),this.enable){var T$Z,T$E,T$r,T$F,T$x,T$g,T$H=0,T$w=0,T$I=T$s.onMobile;if(T$E=this.getEles(T$$,null,T$D._tEleArr),this.sendEvents(T$E,T$u?"mouseup":"rightmouseup",T$b),T$g=T$u?this.preDowns:this.preRightDowns,T$Z=this.getTouchFromArr(T$b,T$g)){var T$o,T$N=T$s.now();if(T$o=T$N-this._lastClickTime<300,this._lastClickTime=T$N,T$$==T$Z.tar)T$x=T$E;else for(T$r=this.getEles(T$Z.tar,null,T$D._oldArr),(T$x=T$D._newArr).length=0,T$w=T$r.length,T$H=0;T$H<T$w;T$H++)T$F=T$r[T$H],0<=T$E.indexOf(T$F)&&T$x.push(T$F);0<T$x.length&&this.sendEvents(T$x,T$u?"click":"rightclick",T$b),T$u&&T$o&&this.sendEvents(T$x,"doubleclick",T$b),this.removeTouchFromArr(T$b,T$g),T$Z.tar=null,T$G.recover("TouchData",T$Z)}else;(T$Z=this.getTouchFromArr(T$b,this.preOvers))&&T$I&&((T$x=this.getEles(T$Z.tar,null,T$x))&&0<T$x.length&&this.sendEvents(T$x,"mouseout",T$b),this.removeTouchFromArr(T$b,this.preOvers),T$Z.tar=null,T$G.recover("TouchData",T$Z)),this._clearTempArrs()}},T$D._oldArr=[],T$D._newArr=[],T$D._tEleArr=[],T$g(T$D,["I",function(){return this.I=new T$D}]),T$D}(),T$T=function(){function T$$(){this._action=null}T$w(T$$,"laya.filters.Filter");var T$b=T$$.prototype;return T$z.imps(T$b,{"laya.filters.IFilter":!0}),T$b.callNative=function(T$$){},T$D(0,T$b,"type",function(){return-1}),T$D(0,T$b,"action",function(){return this._action}),T$$.BLUR=16,T$$.COLOR=32,T$$.GLOW=8,T$$._filterStart=null,T$$._filterEnd=null,T$$._EndTarget=null,T$$._recycleScope=null,T$$._filter=null,T$$._useSrc=null,T$$._endSrc=null,T$$._useOut=null,T$$._endOut=null,T$$}(),T$y=function(){function T$$(){this.data=null}T$w(T$$,"laya.filters.ColorFilterAction");var T$b=T$$.prototype;return T$z.imps(T$b,{"laya.filters.IFilterAction":!0}),T$b.apply=function(T$$){var T$b=T$$.ctx.ctx,T$u=T$$.ctx.ctx.canvas;if(0==T$u.width||0==T$u.height)return T$u;for(var T$Z,T$E=T$b.getImageData(0,0,T$u.width,T$u.height),T$r=T$E.data,T$F=0,T$x=T$r.length;T$F<T$x;T$F+=4)T$Z=this.getColor(T$r[T$F],T$r[T$F+1],T$r[T$F+2],T$r[T$F+3]),0!=T$r[T$F+3]&&(T$r[T$F]=T$Z[0],T$r[T$F+1]=T$Z[1],T$r[T$F+2]=T$Z[2],T$r[T$F+3]=T$Z[3]);return T$b.putImageData(T$E,0,0),T$$},T$b.getColor=function(T$$,T$b,T$u,T$Z){var T$E=[];if(this.data._mat&&this.data._alpha){var T$r=this.data._mat,T$F=this.data._alpha;T$E[0]=T$r[0]*T$$+T$r[1]*T$b+T$r[2]*T$u+T$r[3]*T$Z+T$F[0],T$E[1]=T$r[4]*T$$+T$r[5]*T$b+T$r[6]*T$u+T$r[7]*T$Z+T$F[1],T$E[2]=T$r[8]*T$$+T$r[9]*T$b+T$r[10]*T$u+T$r[11]*T$Z+T$F[2],T$E[3]=T$r[12]*T$$+T$r[13]*T$b+T$r[14]*T$u+T$r[15]*T$Z+T$F[3]}return T$E},T$$}(),T$S=(function(){function T$$(){}T$w(T$$,"laya.maths.Arith"),T$$.formatR=function(T$$){return T$$>Math.PI&&(T$$-=2*Math.PI),T$$<-Math.PI&&(T$$+=2*Math.PI),T$$},T$$.isPOT=function(T$$,T$b){return 0<T$$&&0==(T$$&T$$-1)&&0<T$b&&0==(T$b&T$b-1)},T$$.setMatToArray=function(T$$,T$b){T$$.a,T$$.b,T$$.c,T$$.d,T$$.tx,T$$.ty,T$b[0]=T$$.a,T$b[1]=T$$.b,T$b[4]=T$$.c,T$b[5]=T$$.d,T$b[12]=T$$.tx,T$b[13]=T$$.ty}}(),function(){function T$$(){this._controlPoints=[new T$q,new T$q,new T$q],this._calFun=this.getPoint2}T$w(T$$,"laya.maths.Bezier");var T$b=T$$.prototype;return T$b._switchPoint=function(T$$,T$b){var T$u=this._controlPoints.shift();T$u.setTo(T$$,T$b),this._controlPoints.push(T$u)},T$b.getPoint2=function(T$$,T$b){var T$u=this._controlPoints[0],T$Z=this._controlPoints[1],T$E=this._controlPoints[2],T$r=Math.pow(1-T$$,2)*T$u.x+2*T$$*(1-T$$)*T$Z.x+Math.pow(T$$,2)*T$E.x,T$F=Math.pow(1-T$$,2)*T$u.y+2*T$$*(1-T$$)*T$Z.y+Math.pow(T$$,2)*T$E.y;T$b.push(T$r,T$F)},T$b.getPoint3=function(T$$,T$b){var T$u=this._controlPoints[0],T$Z=this._controlPoints[1],T$E=this._controlPoints[2],T$r=this._controlPoints[3],T$F=Math.pow(1-T$$,3)*T$u.x+3*T$Z.x*T$$*(1-T$$)*(1-T$$)+3*T$E.x*T$$*T$$*(1-T$$)+T$r.x*Math.pow(T$$,3),T$x=Math.pow(1-T$$,3)*T$u.y+3*T$Z.y*T$$*(1-T$$)*(1-T$$)+3*T$E.y*T$$*T$$*(1-T$$)+T$r.y*Math.pow(T$$,3);T$b.push(T$F,T$x)},T$b.insertPoints=function(T$$,T$b){var T$u,T$Z=NaN;for(T$u=1/(T$$=0<T$$?T$$:5),T$Z=0;T$Z<=1;T$Z+=T$u)this._calFun(T$Z,T$b)},T$b.getBezierPoints=function(T$$,T$b,T$u){void 0===T$b&&(T$b=5),void 0===T$u&&(T$u=2);var T$Z,T$E,T$r=0;if((T$Z=T$$.length)<2*(T$u+1))return[];switch(T$E=[],T$u){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=T$u;)this._controlPoints.push(new T$q);for(T$r=0;T$r<2*T$u;T$r+=2)this._switchPoint(T$$[T$r],T$$[T$r+1]);for(T$r=2*T$u;T$r<T$Z;T$r+=2)this._switchPoint(T$$[T$r],T$$[T$r+1]),T$r/2%T$u==0&&this.insertPoints(T$b,T$E);return T$E},T$g(T$$,["I",function(){return this.I=new T$$}]),T$$}()),T$P=function(){function T$H(){}return T$w(T$H,"laya.maths.GrahamScan"),T$H.multiply=function(T$$,T$b,T$u){return(T$$.x-T$u.x)*(T$b.y-T$u.y)-(T$b.x-T$u.x)*(T$$.y-T$u.y)},T$H.dis=function(T$$,T$b){return(T$$.x-T$b.x)*(T$$.x-T$b.x)+(T$$.y-T$b.y)*(T$$.y-T$b.y)},T$H._getPoints=function(T$$,T$b,T$u){for(void 0===T$b&&(T$b=!1),T$H._mPointList||(T$H._mPointList=[]);T$H._mPointList.length<T$$;)T$H._mPointList.push(new T$q);return T$u||(T$u=[]),T$u.length=0,T$b?T$H.getFrom(T$u,T$H._mPointList,T$$):T$H.getFromR(T$u,T$H._mPointList,T$$),T$u},T$H.getFrom=function(T$$,T$b,T$u){var T$Z=0;for(T$Z=0;T$Z<T$u;T$Z++)T$$.push(T$b[T$Z]);return T$$},T$H.getFromR=function(T$$,T$b,T$u){var T$Z=0;for(T$Z=0;T$Z<T$u;T$Z++)T$$.push(T$b.pop());return T$$},T$H.pListToPointList=function(T$$,T$b){void 0===T$b&&(T$b=!1);var T$u=0,T$Z=T$$.length/2,T$E=T$H._getPoints(T$Z,T$b,T$H._tempPointList);for(T$u=0;T$u<T$Z;T$u++)T$E[T$u].setTo(T$$[T$u+T$u],T$$[T$u+T$u+1]);return T$E},T$H.pointListToPlist=function(T$$){var T$b,T$u=0,T$Z=T$$.length,T$E=T$H._temPList;for(T$u=T$E.length=0;T$u<T$Z;T$u++)T$b=T$$[T$u],T$E.push(T$b.x,T$b.y);return T$E},T$H.scanPList=function(T$$){return T$d.copyArray(T$$,T$H.pointListToPlist(T$H.scan(T$H.pListToPointList(T$$,!0))))},T$H.scan=function(T$$){var T$b,T$u,T$Z,T$E=0,T$r=0,T$F=0,T$x=T$$.length,T$g={};for((T$u=T$H._temArr).length=0,T$E=(T$x=T$$.length)-1;0<=T$E;T$E--)T$Z=(T$b=T$$[T$E]).x+"_"+T$b.y,T$g.hasOwnProperty(T$Z)||(T$g[T$Z]=!0,T$u.push(T$b));for(T$x=T$u.length,T$d.copyArray(T$$,T$u),T$E=1;T$E<T$x;T$E++)(T$$[T$E].y<T$$[T$F].y||T$$[T$E].y==T$$[T$F].y&&T$$[T$E].x<T$$[T$F].x)&&(T$F=T$E);for(T$b=T$$[0],T$$[0]=T$$[T$F],T$$[T$F]=T$b,T$E=1;T$E<T$x-1;T$E++){for(T$r=(T$F=T$E)+1;T$r<T$x;T$r++)(0<T$H.multiply(T$$[T$r],T$$[T$F],T$$[0])||0==T$H.multiply(T$$[T$r],T$$[T$F],T$$[0])&&T$H.dis(T$$[0],T$$[T$r])<T$H.dis(T$$[0],T$$[T$F]))&&(T$F=T$r);T$b=T$$[T$E],T$$[T$E]=T$$[T$F],T$$[T$F]=T$b}if((T$u=T$H._temArr).length=0,T$$.length<3)return T$d.copyArray(T$u,T$$);for(T$u.push(T$$[0],T$$[1],T$$[2]),T$E=3;T$E<T$x;T$E++){for(;2<=T$u.length&&0<=T$H.multiply(T$$[T$E],T$u[T$u.length-1],T$u[T$u.length-2]);)T$u.pop();T$$[T$E]&&T$u.push(T$$[T$E])}return T$u},T$H._mPointList=null,T$H._tempPointList=[],T$H._temPList=[],T$H._temArr=[],T$H}(),T$i=function(){function T$E(){}return T$w(T$E,"laya.maths.MathUtil"),T$E.subtractVector3=function(T$$,T$b,T$u){T$u[0]=T$$[0]-T$b[0],T$u[1]=T$$[1]-T$b[1],T$u[2]=T$$[2]-T$b[2]},T$E.lerp=function(T$$,T$b,T$u){return T$$*(1-T$u)+T$b*T$u},T$E.scaleVector3=function(T$$,T$b,T$u){T$u[0]=T$$[0]*T$b,T$u[1]=T$$[1]*T$b,T$u[2]=T$$[2]*T$b},T$E.lerpVector3=function(T$$,T$b,T$u,T$Z){var T$E=T$$[0],T$r=T$$[1],T$F=T$$[2];T$Z[0]=T$E+T$u*(T$b[0]-T$E),T$Z[1]=T$r+T$u*(T$b[1]-T$r),T$Z[2]=T$F+T$u*(T$b[2]-T$F)},T$E.lerpVector4=function(T$$,T$b,T$u,T$Z){var T$E=T$$[0],T$r=T$$[1],T$F=T$$[2],T$x=T$$[3];T$Z[0]=T$E+T$u*(T$b[0]-T$E),T$Z[1]=T$r+T$u*(T$b[1]-T$r),T$Z[2]=T$F+T$u*(T$b[2]-T$F),T$Z[3]=T$x+T$u*(T$b[3]-T$x)},T$E.slerpQuaternionArray=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){var T$x,T$g,T$H,T$w,T$I,T$o=T$$[T$b+0],T$N=T$$[T$b+1],T$D=T$$[T$b+2],T$e=T$$[T$b+3],T$L=T$u[T$Z+0],T$T=T$u[T$Z+1],T$_=T$u[T$Z+2],T$y=T$u[T$Z+3];return(T$g=T$o*T$L+T$N*T$T+T$D*T$_+T$e*T$y)<0&&(T$g=-T$g,T$L=-T$L,T$T=-T$T,T$_=-T$_,T$y=-T$y),T$I=1e-6<1-T$g?(T$x=Math.acos(T$g),T$H=Math.sin(T$x),T$w=Math.sin((1-T$E)*T$x)/T$H,Math.sin(T$E*T$x)/T$H):(T$w=1-T$E,T$E),T$r[T$F+0]=T$w*T$o+T$I*T$L,T$r[T$F+1]=T$w*T$N+T$I*T$T,T$r[T$F+2]=T$w*T$D+T$I*T$_,T$r[T$F+3]=T$w*T$e+T$I*T$y,T$r},T$E.getRotation=function(T$$,T$b,T$u,T$Z){return Math.atan2(T$Z-T$b,T$u-T$$)/Math.PI*180},T$E.sortBigFirst=function(T$$,T$b){return T$$==T$b?0:T$$<T$b?1:-1},T$E.sortSmallFirst=function(T$$,T$b){return T$$==T$b?0:T$$<T$b?-1:1},T$E.sortNumBigFirst=function(T$$,T$b){return parseFloat(T$b)-parseFloat(T$$)},T$E.sortNumSmallFirst=function(T$$,T$b){return parseFloat(T$$)-parseFloat(T$b)},T$E.sortByKey=function(T$u,T$$,T$b){var T$Z;return void 0===T$$&&(T$$=!1),void 0===T$b&&(T$b=!0),T$Z=T$$?T$b?T$E.sortNumBigFirst:T$E.sortBigFirst:T$b?T$E.sortNumSmallFirst:T$E.sortSmallFirst,function(T$$,T$b){return T$Z(T$$[T$u],T$b[T$u])}},T$E}(),T$V=function(){function T$u(T$$,T$b,T$u,T$Z,T$E,T$r){this.inPool=!1,this.bTransform=!1,void 0===T$$&&(T$$=1),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=1),void 0===T$E&&(T$E=0),void 0===T$r&&(T$r=0),this.a=T$$,this.b=T$b,this.c=T$u,this.d=T$Z,this.tx=T$E,this.ty=T$r,this._checkTransform()}T$w(T$u,"laya.maths.Matrix");var T$$=T$u.prototype;return T$$.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},T$$._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},T$$.setTranslate=function(T$$,T$b){return this.tx=T$$,this.ty=T$b,this},T$$.translate=function(T$$,T$b){return this.tx+=T$$,this.ty+=T$b,this},T$$.scale=function(T$$,T$b){this.a*=T$$,this.d*=T$b,this.c*=T$$,this.b*=T$b,this.tx*=T$$,this.ty*=T$b,this.bTransform=!0},T$$.rotate=function(T$$){var T$b=Math.cos(T$$),T$u=Math.sin(T$$),T$Z=this.a,T$E=this.c,T$r=this.tx;this.a=T$Z*T$b-this.b*T$u,this.b=T$Z*T$u+this.b*T$b,this.c=T$E*T$b-this.d*T$u,this.d=T$E*T$u+this.d*T$b,this.tx=T$r*T$b-this.ty*T$u,this.ty=T$r*T$u+this.ty*T$b,this.bTransform=!0},T$$.skew=function(T$$,T$b){var T$u=Math.tan(T$$),T$Z=Math.tan(T$b),T$E=this.a,T$r=this.b;return this.a+=T$Z*this.c,this.b+=T$Z*this.d,this.c+=T$u*T$E,this.d+=T$u*T$r,this},T$$.invertTransformPoint=function(T$$){var T$b=this.a,T$u=this.b,T$Z=this.c,T$E=this.d,T$r=this.tx,T$F=T$b*T$E-T$u*T$Z,T$x=T$E/T$F,T$g=-T$u/T$F,T$H=-T$Z/T$F,T$w=T$b/T$F,T$I=(T$Z*this.ty-T$E*T$r)/T$F,T$o=-(T$b*this.ty-T$u*T$r)/T$F;return T$$.setTo(T$x*T$$.x+T$H*T$$.y+T$I,T$g*T$$.x+T$w*T$$.y+T$o)},T$$.transformPoint=function(T$$){return T$$.setTo(this.a*T$$.x+this.c*T$$.y+this.tx,this.b*T$$.x+this.d*T$$.y+this.ty)},T$$.transformPointN=function(T$$){return T$$.setTo(this.a*T$$.x+this.c*T$$.y,this.b*T$$.x+this.d*T$$.y)},T$$.transformPointArray=function(T$$,T$b){for(var T$u=T$$.length,T$Z=0;T$Z<T$u;T$Z+=2){var T$E=T$$[T$Z],T$r=T$$[T$Z+1];T$b[T$Z]=this.a*T$E+this.c*T$r+this.tx,T$b[T$Z+1]=this.b*T$E+this.d*T$r+this.ty}return T$b},T$$.transformPointArrayScale=function(T$$,T$b){for(var T$u=T$$.length,T$Z=0;T$Z<T$u;T$Z+=2){var T$E=T$$[T$Z],T$r=T$$[T$Z+1];T$b[T$Z]=this.a*T$E+this.c*T$r,T$b[T$Z+1]=this.b*T$E+this.d*T$r}return T$b},T$$.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},T$$.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},T$$.invert=function(){var T$$=this.a,T$b=this.b,T$u=this.c,T$Z=this.d,T$E=this.tx,T$r=T$$*T$Z-T$b*T$u;return this.a=T$Z/T$r,this.b=-T$b/T$r,this.c=-T$u/T$r,this.d=T$$/T$r,this.tx=(T$u*this.ty-T$Z*T$E)/T$r,this.ty=-(T$$*this.ty-T$b*T$E)/T$r,this},T$$.setTo=function(T$$,T$b,T$u,T$Z,T$E,T$r){return this.a=T$$,this.b=T$b,this.c=T$u,this.d=T$Z,this.tx=T$E,this.ty=T$r,this},T$$.concat=function(T$$){var T$b=this.a,T$u=this.c,T$Z=this.tx;return this.a=T$b*T$$.a+this.b*T$$.c,this.b=T$b*T$$.b+this.b*T$$.d,this.c=T$u*T$$.a+this.d*T$$.c,this.d=T$u*T$$.b+this.d*T$$.d,this.tx=T$Z*T$$.a+this.ty*T$$.c+T$$.tx,this.ty=T$Z*T$$.b+this.ty*T$$.d+T$$.ty,this},T$$.scaleEx=function(T$$,T$b){var T$u=this.a,T$Z=this.b,T$E=this.c,T$r=this.d;0!==T$Z||0!==T$E?(this.a=T$$*T$u,this.b=T$$*T$Z,this.c=T$b*T$E):(this.a=T$$*T$u,this.b=0*T$r,this.c=0*T$u),this.d=T$b*T$r,this.bTransform=!0},T$$.rotateEx=function(T$$){var T$b=Math.cos(T$$),T$u=Math.sin(T$$),T$Z=this.a,T$E=this.b,T$r=this.c,T$F=this.d;0!==T$E||0!==T$r?(this.a=T$b*T$Z+T$u*T$r,this.b=T$b*T$E+T$u*T$F,this.c=-T$u*T$Z+T$b*T$r,this.d=-T$u*T$E+T$b*T$F):(this.a=T$b*T$Z,this.b=T$u*T$F,this.c=-T$u*T$Z,this.d=T$b*T$F),this.bTransform=!0},T$$.clone=function(){var T$$=T$u.create();return T$$.a=this.a,T$$.b=this.b,T$$.c=this.c,T$$.d=this.d,T$$.tx=this.tx,T$$.ty=this.ty,T$$.bTransform=this.bTransform,T$$},T$$.copyTo=function(T$$){return T$$.a=this.a,T$$.b=this.b,T$$.c=this.c,T$$.d=this.d,T$$.tx=this.tx,T$$.ty=this.ty,T$$.bTransform=this.bTransform,T$$},T$$.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},T$$.destroy=function(){if(!this.inPool){var T$$=T$u._cache;this.inPool=!0,T$$._length||(T$$._length=0),(T$$[T$$._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},T$u.mul=function(T$$,T$b,T$u){var T$Z=T$$.a,T$E=T$$.b,T$r=T$$.c,T$F=T$$.d,T$x=T$$.tx,T$g=T$$.ty,T$H=T$b.a,T$w=T$b.b,T$I=T$b.c,T$o=T$b.d,T$N=T$b.tx,T$D=T$b.ty;return 0!==T$w||0!==T$I?(T$u.a=T$Z*T$H+T$E*T$I,T$u.b=T$Z*T$w+T$E*T$o,T$u.c=T$r*T$H+T$F*T$I,T$u.d=T$r*T$w+T$F*T$o,T$u.tx=T$H*T$x+T$I*T$g+T$N,T$u.ty=T$w*T$x+T$o*T$g+T$D):(T$u.a=T$Z*T$H,T$u.b=T$E*T$o,T$u.c=T$r*T$H,T$u.d=T$F*T$o,T$u.tx=T$H*T$x+T$N,T$u.ty=T$o*T$g+T$D),T$u},T$u.mul16=function(T$$,T$b,T$u){var T$Z=T$$.a,T$E=T$$.b,T$r=T$$.c,T$F=T$$.d,T$x=T$$.tx,T$g=T$$.ty,T$H=T$b.a,T$w=T$b.b,T$I=T$b.c,T$o=T$b.d,T$N=T$b.tx,T$D=T$b.ty;return 0!==T$w||0!==T$I?(T$u[0]=T$Z*T$H+T$E*T$I,T$u[1]=T$Z*T$w+T$E*T$o,T$u[4]=T$r*T$H+T$F*T$I,T$u[5]=T$r*T$w+T$F*T$o,T$u[12]=T$H*T$x+T$I*T$g+T$N,T$u[13]=T$w*T$x+T$o*T$g+T$D):(T$u[0]=T$Z*T$H,T$u[1]=T$E*T$o,T$u[4]=T$r*T$H,T$u[5]=T$F*T$o,T$u[12]=T$H*T$x+T$N,T$u[13]=T$o*T$g+T$D),T$u},T$u.mulPre=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){var T$g=T$$.a,T$H=T$$.b,T$w=T$$.c,T$I=T$$.d,T$o=T$$.tx,T$N=T$$.ty;return 0!==T$u||0!==T$Z?(T$x.a=T$g*T$b+T$H*T$Z,T$x.b=T$g*T$u+T$H*T$E,T$x.c=T$w*T$b+T$I*T$Z,T$x.d=T$w*T$u+T$I*T$E,T$x.tx=T$b*T$o+T$Z*T$N+T$r,T$x.ty=T$u*T$o+T$E*T$N+T$F):(T$x.a=T$g*T$b,T$x.b=T$H*T$E,T$x.c=T$w*T$b,T$x.d=T$I*T$E,T$x.tx=T$b*T$o+T$r,T$x.ty=T$E*T$N+T$F),T$x},T$u.mulPos=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){var T$g=T$$.a,T$H=T$$.b,T$w=T$$.c,T$I=T$$.d,T$o=T$$.tx,T$N=T$$.ty;return 0!==T$H||0!==T$w?(T$x.a=T$b*T$g+T$u*T$w,T$x.b=T$b*T$H+T$u*T$I,T$x.c=T$Z*T$g+T$E*T$w,T$x.d=T$Z*T$H+T$E*T$I,T$x.tx=T$g*T$r+T$w*T$F+T$o,T$x.ty=T$H*T$r+T$I*T$F+T$N):(T$x.a=T$b*T$g,T$x.b=T$u*T$I,T$x.c=T$Z*T$g,T$x.d=T$E*T$I,T$x.tx=T$g*T$r+T$o,T$x.ty=T$I*T$F+T$N),T$x},T$u.preMul=function(T$$,T$b,T$u){var T$Z=T$$.a,T$E=T$$.b,T$r=T$$.c,T$F=T$$.d,T$x=T$b.a,T$g=T$b.b,T$H=T$b.c,T$w=T$b.d,T$I=T$b.tx,T$o=T$b.ty;return T$u.a=T$x*T$Z,T$u.b=T$u.c=0,T$u.d=T$w*T$F,T$u.tx=T$I*T$Z+T$$.tx,T$u.ty=T$o*T$F+T$$.ty,0===T$g&&0===T$H&&0===T$E&&0===T$r||(T$u.a+=T$g*T$r,T$u.d+=T$H*T$E,T$u.b+=T$x*T$E+T$g*T$F,T$u.c+=T$H*T$Z+T$w*T$r,T$u.tx+=T$o*T$r,T$u.ty+=T$I*T$E),T$u},T$u.preMulXY=function(T$$,T$b,T$u,T$Z){var T$E=T$$.a,T$r=T$$.b,T$F=T$$.c,T$x=T$$.d;return T$Z.a=T$E,T$Z.b=T$r,T$Z.c=T$F,T$Z.d=T$x,T$Z.tx=T$b*T$E+T$$.tx+T$u*T$F,T$Z.ty=T$u*T$x+T$$.ty+T$b*T$r,T$Z},T$u.create=function(){var T$$=T$u._cache,T$b=T$$._length?T$$[--T$$._length]:new T$u;return T$b.inPool=!1,T$b},T$u.EMPTY=new T$u,T$u.TEMP=new T$u,T$u._cache=[],T$u}(),T$q=function(){function T$$(T$$,T$b){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),this.x=T$$,this.y=T$b}T$w(T$$,"laya.maths.Point");var T$b=T$$.prototype;return T$b.setTo=function(T$$,T$b){return this.x=T$$,this.y=T$b,this},T$b.distance=function(T$$,T$b){return Math.sqrt((this.x-T$$)*(this.x-T$$)+(this.y-T$b)*(this.y-T$b))},T$b.toString=function(){return this.x+","+this.y},T$b.normalize=function(){var T$$=Math.sqrt(this.x*this.x+this.y*this.y);if(0<T$$){var T$b=1/T$$;this.x*=T$b,this.y*=T$b}},T$$.TEMP=new T$$,T$$.EMPTY=new T$$,T$$}(),T$a=function(){function T$H(T$$,T$b,T$u,T$Z){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=0),this.x=T$$,this.y=T$b,this.width=T$u,this.height=T$Z}T$w(T$H,"laya.maths.Rectangle");var T$$=T$H.prototype;return T$$.setTo=function(T$$,T$b,T$u,T$Z){return this.x=T$$,this.y=T$b,this.width=T$u,this.height=T$Z,this},T$$.copyFrom=function(T$$){return this.x=T$$.x,this.y=T$$.y,this.width=T$$.width,this.height=T$$.height,this},T$$.contains=function(T$$,T$b){return!(this.width<=0||this.height<=0)&&(T$$>=this.x&&T$$<this.right&&T$b>=this.y&&T$b<this.bottom)},T$$.intersects=function(T$$){return!(T$$.x>this.x+this.width||T$$.x+T$$.width<this.x||T$$.y>this.y+this.height||T$$.y+T$$.height<this.y)},T$$.intersection=function(T$$,T$b){return this.intersects(T$$)?(T$b||(T$b=new T$H),T$b.x=Math.max(this.x,T$$.x),T$b.y=Math.max(this.y,T$$.y),T$b.width=Math.min(this.right,T$$.right)-T$b.x,T$b.height=Math.min(this.bottom,T$$.bottom)-T$b.y,T$b):null},T$$.union=function(T$$,T$b){return T$b||(T$b=new T$H),this.clone(T$b),T$$.width<=0||T$$.height<=0?T$b:(T$b.addPoint(T$$.x,T$$.y),T$b.addPoint(T$$.right,T$$.bottom),this)},T$$.clone=function(T$$){return T$$||(T$$=new T$H),T$$.x=this.x,T$$.y=this.y,T$$.width=this.width,T$$.height=this.height,T$$},T$$.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},T$$.equals=function(T$$){return!(!T$$||T$$.x!==this.x||T$$.y!==this.y||T$$.width!==this.width||T$$.height!==this.height)},T$$.addPoint=function(T$$,T$b){return this.x>T$$&&(this.width+=this.x-T$$,this.x=T$$),this.y>T$b&&(this.height+=this.y-T$b,this.y=T$b),this.width<T$$-this.x&&(this.width=T$$-this.x),this.height<T$b-this.y&&(this.height=T$b-this.y),this},T$$._getBoundPoints=function(){var T$$=T$H._temB;return(T$$.length=0)==this.width||0==this.height||T$$.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),T$$},T$$.isEmpty=function(){return this.width<=0||this.height<=0},T$D(0,T$$,"right",function(){return this.x+this.width}),T$D(0,T$$,"bottom",function(){return this.y+this.height}),T$H._getBoundPointS=function(T$$,T$b,T$u,T$Z){var T$E=T$H._temA;return(T$E.length=0)==T$u||0==T$Z||T$E.push(T$$,T$b,T$$+T$u,T$b,T$$,T$b+T$Z,T$$+T$u,T$b+T$Z),T$E},T$H._getWrapRec=function(T$$,T$b){if(!T$$||T$$.length<1)return T$b?T$b.setTo(0,0,0,0):T$H.TEMP.setTo(0,0,0,0);T$b=T$b||new T$H;var T$u,T$Z,T$E,T$r,T$F,T$x=T$$.length,T$g=T$q.TEMP;for(T$E=T$F=-(T$Z=T$r=99999),T$u=0;T$u<T$x;T$u+=2)T$g.x=T$$[T$u],T$g.y=T$$[T$u+1],T$Z=T$Z<T$g.x?T$Z:T$g.x,T$r=T$r<T$g.y?T$r:T$g.y,T$E=T$E>T$g.x?T$E:T$g.x,T$F=T$F>T$g.y?T$F:T$g.y;return T$b.setTo(T$Z,T$r,T$E-T$Z,T$F-T$r)},T$H.EMPTY=new T$H,T$H.TEMP=new T$H,T$H._temB=[],T$H._temA=[],T$H}(),T$K=function(){function T$g(){}return T$w(T$g,"laya.media.SoundManager"),T$D(1,T$g,"useAudioMusic",function(){return T$g._useAudioMusic},function(T$$){T$g._useAudioMusic=T$$,T$g._musicClass=T$$?T$u$:null}),T$D(1,T$g,"autoStopMusic",function(){return T$g._autoStopMusic},function(T$$){T$z.stage.off("blur",null,T$g._stageOnBlur),T$z.stage.off("focus",null,T$g._stageOnFocus),T$z.stage.off("visibilitychange",null,T$g._visibilityChange),(T$g._autoStopMusic=T$$)&&(T$z.stage.on("blur",null,T$g._stageOnBlur),T$z.stage.on("focus",null,T$g._stageOnFocus),T$z.stage.on("visibilitychange",null,T$g._visibilityChange))}),T$D(1,T$g,"muted",function(){return T$g._muted},function(T$$){T$$!=T$g._muted&&(T$$&&T$g.stopAllSound(),T$g.musicMuted=T$$,T$g._muted=T$$)}),T$D(1,T$g,"musicMuted",function(){return T$g._musicMuted},function(T$$){T$$!=T$g._musicMuted&&(T$$?(T$g._tMusic&&T$g._musicChannel&&!T$g._musicChannel.isStopped?T$g._musicChannel.pause():T$g._musicChannel=null,T$g._musicMuted=T$$):(T$g._musicMuted=T$$,T$g._tMusic&&T$g._musicChannel&&T$g._musicChannel.resume()))}),T$D(1,T$g,"soundMuted",function(){return T$g._soundMuted},function(T$$){T$g._soundMuted=T$$}),T$g.addChannel=function(T$$){0<=T$g._channels.indexOf(T$$)||(T$g._channels.push(T$$),T$g.autoReleaseSound&&0!=T$g._notUsedCount&&T$g._notUsedUrls[T$$.url]&&(delete T$g._notUsedUrls[T$$.url],0==--T$g._notUsedCount&&T$z.timer.clear(T$g,T$g.disposeSoundIfNotUsed)))},T$g.removeChannel=function(T$$){var T$b=T$g._channels,T$u=T$b.indexOf(T$$);if(-1!=T$u&&(T$b.splice(T$u,1),T$g.autoReleaseSound)){var T$Z=T$$.url,T$E=T$g.defaultIntervals[T$Z]||2e4;if(0<T$E){var T$r=!0;for(T$u=T$b.length-1;0<=T$u;T$u--)if(T$b[T$u].url==T$Z){T$r=!1;break}T$r&&(T$g._notUsedUrls[T$Z]=Date.now()+T$E,0==T$g._notUsedCount++&&T$z.timer.loop(1e4,T$g,T$g.disposeSoundIfNotUsed))}}},T$g.disposeSoundIfNotUsed=function(){var T$$=T$g._notUsedUrls;if(0!=T$g._notUsedCount){var T$b=Date.now();for(var T$u in T$$)T$b>=T$$[T$u]&&(delete T$$[T$u],--T$g._notUsedCount,T$g.destroySound(T$u));if(0!=T$g._notUsedCount)return}T$z.timer.clear(T$g,T$g.disposeSoundIfNotUsed)},T$g._visibilityChange=function(){T$z.stage.isVisibility?T$g._stageOnFocus():T$g._stageOnBlur()},T$g._stageOnBlur=function(){T$g._isActive=!1,T$g._musicChannel&&(T$g._musicChannel.isStopped||(T$g._blurPaused=!0,T$g._musicChannel.pause())),T$g.stopAllSound(),T$z.stage.once("mousedown",null,T$g._stageOnFocus)},T$g._recoverWebAudio=function(){T$r$.ctx&&"running"!=T$r$.ctx.state&&T$r$.ctx.resume&&T$r$.ctx.resume()},T$g._stageOnFocus=function(){if(T$g._isActive=!0,T$g._recoverWebAudio(),T$z.stage.off("mousedown",null,T$g._stageOnFocus),T$g._blurPaused){var T$$=T$g._musicChannel;T$$&&T$g._music&&T$$.isStopped&&(T$g._blurPaused=!1,T$g._music._disposed?T$g.playMusic(T$$.url,T$$.loops,T$$.startHandler,T$$.completeHandler,T$$.startTime):T$$.audioBuffer?T$$.resume():T$g._music.play(T$$.startTime,T$$.loops,T$$.startHandler,T$$))}},T$g.playSound=function(T$$,T$b,T$u,T$Z,T$E,T$r){if(void 0===T$b&&(T$b=1),void 0===T$r&&(T$r=0),!T$$)return null;if(T$g._muted)return null;if(T$g._recoverWebAudio(),T$$==T$g._tMusic){if(T$g._musicMuted)return null}else{if(!T$g._isActive)return null;if(T$g._soundMuted)return null}var T$F,T$x=T$g._pool[T$$];return T$E||(T$E=T$g._soundClass),T$x||((T$x=new T$E).load(T$$),T$g._pool[T$$]=T$x),(T$F=T$x.play(T$r,T$b,T$u))?(T$$==T$g._tMusic&&(T$g._music=T$x,T$g._isActive||(T$g._blurPaused=!0,T$F.pause())),T$F.url=T$$,T$F.volume=T$$==T$g._tMusic?T$g.musicVolume:T$g.soundVolume,T$F.completeHandler=T$Z,T$F):null},T$g.destroySound=function(T$$){var T$b=T$g._pool[T$$];T$b&&(delete T$g._pool[T$$],T$b.dispose())},T$g.playMusic=function(T$$,T$b,T$u,T$Z,T$E){return void 0===T$b&&(T$b=0),void 0===T$E&&(T$E=0),T$g._tMusic=T$$,T$g._musicChannel&&T$g._musicChannel.stop(),T$g._musicChannel=T$g.playSound(T$$,T$b,T$u,T$Z,null,T$E)},T$g.stopSound=function(T$$){for(var T$b,T$u=T$g._channels.length-1;0<=T$u;T$u--)(T$b=T$g._channels[T$u]).url==T$$&&T$b.stop()},T$g.stopAll=function(){T$g._tMusic=null;var T$$=0;for(T$$=T$g._channels.length-1;0<=T$$;T$$--)T$g._channels[T$$].stop()},T$g.stopAllSound=function(){var T$$,T$b=0;for(T$b=T$g._channels.length-1;0<=T$b;T$b--)(T$$=T$g._channels[T$b]).url!=T$g._tMusic&&T$$.stop()},T$g.stopMusic=function(){T$g._musicChannel&&T$g._musicChannel.stop(),T$g._tMusic=null},T$g.setSoundVolume=function(T$$,T$b){if(T$b)T$g._setVolume(T$b,T$$);else{T$g.soundVolume=T$$;var T$u,T$Z=0;for(T$Z=T$g._channels.length-1;0<=T$Z;T$Z--)(T$u=T$g._channels[T$Z]).url!=T$g._tMusic&&(T$u.volume=T$$)}},T$g.setMusicVolume=function(T$$){T$g.musicVolume=T$$,T$g._setVolume(T$g._tMusic,T$$)},T$g._setVolume=function(T$$,T$b){for(var T$u,T$Z=T$g._channels.length-1;0<=T$Z;T$Z--)(T$u=T$g._channels[T$Z]).url==T$$&&(T$u.volume=T$b)},T$g.musicVolume=1,T$g.soundVolume=1,T$g.playbackRate=1,T$g._useAudioMusic=!0,T$g._muted=!1,T$g._soundMuted=!1,T$g._musicMuted=!1,T$g._tMusic=null,T$g._musicChannel=null,T$g._music=null,T$g._channels=[],T$g._autoStopMusic=!1,T$g._blurPaused=!1,T$g._isActive=!0,T$g._soundClass=null,T$g._musicClass=null,T$g.autoReleaseSound=!0,T$g._pool={},T$g.defaultIntervals={},T$g._notUsedUrls={},T$g._notUsedCount=0,T$g}(),T$t=function(){var T$$;function T$u(){}return T$w(T$u,"laya.net.LocalStorage"),T$u.__init__=function(){T$u._baseClass||(T$u._baseClass=T$$).init(),T$u.items=T$u._baseClass.items,T$u.support=T$u._baseClass.support},T$u.setItem=function(T$$,T$b){T$u._baseClass.setItem(T$$,T$b)},T$u.getItem=function(T$$){return T$u._baseClass.getItem(T$$)},T$u.setJSON=function(T$$,T$b){T$u._baseClass.setJSON(T$$,T$b)},T$u.getJSON=function(T$$){return T$u._baseClass.getJSON(T$$)},T$u.removeItem=function(T$$){T$u._baseClass.removeItem(T$$)},T$u.clear=function(){T$u._baseClass.clear()},T$u._baseClass=null,T$u.items=null,T$u.support=!1,T$u.__init$=function(){T$$=function(){function T$u(){}return T$w(T$u,""),T$u.init=function(){try{T$u.support=!0,T$u.items=T$F.localStorage,T$u.setItem("laya","1"),T$u.removeItem("laya")}catch(T$$){T$u.support=!1}T$u.support||console.log("LocalStorage is not supprot or browser is private mode.")},T$u.setItem=function(T$$,T$b){try{T$u.support&&T$u.items.setItem(T$$,T$b)}catch(T$$){console.warn("set localStorage failed",T$$)}},T$u.getItem=function(T$$){return T$u.support?T$u.items.getItem(T$$):null},T$u.setJSON=function(T$$,T$b){try{T$u.support&&T$u.items.setItem(T$$,JSON.stringify(T$b))}catch(T$$){console.warn("set localStorage failed",T$$)}},T$u.getJSON=function(T$$){return JSON.parse(T$u.support?T$u.items.getItem(T$$):null)},T$u.removeItem=function(T$$){T$u.support&&T$u.items.removeItem(T$$)},T$u.clear=function(){T$u.support&&T$u.items.clear()},T$u.items=null,T$u.support=!1,T$u}()},T$u}(),T$v=(function(){function T$Z(){}T$w(T$Z,"laya.net.ResourceVersion"),T$Z.enable=function(T$$,T$b,T$u){void 0===T$u&&(T$u=2),laya.net.ResourceVersion.type=T$u,T$z.loader.load(T$$,T$_.create(null,T$Z.onManifestLoaded,[T$b]),null,"json"),T$p.customFormat=T$Z.addVersionPrefix},T$Z.onManifestLoaded=function(T$$,T$b){T$Z.manifest=T$b,T$$.run(),T$b||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},T$Z.addVersionPrefix=function(T$$){return T$Z.manifest&&T$Z.manifest[T$$]?2==T$Z.type?T$Z.manifest[T$$]:T$Z.manifest[T$$]+"/"+T$$:T$$},T$Z.FOLDER_VERSION=1,T$Z.FILENAME_VERSION=2,T$Z.manifest=null,T$Z.type=1}(),function(){function T$$(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}T$w(T$$,"laya.net.TTFLoader");var T$b=T$$.prototype;return T$b.load=function(T$$){var T$b=(this._url=T$$).split(".ttf")[0].split("/");this.fontName=T$b[T$b.length-1],T$s.window.conch?this._loadConch():T$s.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},T$b._loadConch=function(){this._http=new T$F$,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},T$b._onHttpLoaded=function(T$$){T$s.window.conch.setFontFaceFromBuffer(this.fontName,T$$),this._clearHttp(),this._complete()},T$b._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},T$b._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},T$b._complete=function(){T$z.timer.clear(this,this._complete),T$z.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},T$b._checkComplete=function(){T$O.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},T$b._loadWithFontFace=function(){var T$$=new T$s.window.FontFace(this.fontName,"url('"+this._url+"')");T$s.window.document.fonts.add(T$$);var T$b=this;T$$.loaded.then(function(){T$b._complete()}),T$$.load()},T$b._createDiv=function(){this._div=T$s.createElement("div"),this._div.innerHTML="laya";var T$$=this._div.style;T$$.fontFamily=this.fontName,T$$.position="absolute",T$$.left="-100px",T$$.top="-100px",T$s.document.body.appendChild(this._div)},T$b._loadWithCSS=function(){var T$$=this,T$b=T$s.createElement("style");T$b.type="text/css",T$s.document.body.appendChild(T$b),T$b.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=T$O.measureText("LayaTTFFont",this._fontTxt).width;var T$u=this;T$b.onload=function(){T$z.timer.once(1e4,T$u,T$$._complete)},T$z.timer.loop(20,this,this._checkComplete),this._createDiv()},T$$._testString="LayaTTFFont",T$$}()),T$p=function(){function T$Z(T$$){this._url=null,this._path=null,this._url=T$Z.formatURL(T$$),this._path=T$Z.getPath(T$$)}T$w(T$Z,"laya.net.URL");var T$$=T$Z.prototype;return T$D(0,T$$,"path",function(){return this._path}),T$D(0,T$$,"url",function(){return this._url}),T$Z.formatURL=function(T$$,T$b){if(!T$$)return"null path";if(0<T$$.indexOf(":"))return T$$;null!=T$Z.customFormat&&(T$$=T$Z.customFormat(T$$,T$b));var T$u=T$$.charAt(0);if("."===T$u)return T$Z.formatRelativePath((T$b||T$Z.basePath)+T$$);if("~"===T$u)return T$Z.rootPath+T$$.substring(1);if("d"===T$u){if(0===T$$.indexOf("data:image"))return T$$}else if("/"===T$u)return T$$;return(T$b||T$Z.basePath)+T$$},T$Z.formatRelativePath=function(T$$){for(var T$b=T$$.split("/"),T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++)".."==T$b[T$u]&&(T$b.splice(T$u-1,2),T$u-=2);return T$b.join("/")},T$Z.isAbsolute=function(T$$){return 0<T$$.indexOf(":")||"/"==T$$.charAt(0)},T$Z.getPath=function(T$$){var T$b=T$$.lastIndexOf("/");return 0<T$b?T$$.substr(0,T$b+1):""},T$Z.getFileName=function(T$$){var T$b=T$$.lastIndexOf("/");return 0<T$b?T$$.substr(T$b+1):T$$},T$Z.version={},T$Z.basePath="",T$Z.rootPath="",T$Z.customFormat=function(T$$){var T$b=T$Z.version[T$$];return!T$Y.isConchApp&&T$b&&(T$$+="?v="+T$b),T$$},T$Z}(),T$Y=function(){function T$E(T$$,T$b){this._timeId=0;var T$u=T$E._mainCanvas.source.style;T$u.position="absolute",T$u.top=T$u.left="0px",T$u.background="#000000",T$E._mainCanvas.source.id="layaCanvas";var T$Z=laya.renders.Render.isWebGL;T$E._mainCanvas.source.width=T$$,T$E._mainCanvas.source.height=T$b,T$Z&&T$E.WebGL.init(T$E._mainCanvas,T$$,T$b),T$s.container.appendChild(T$E._mainCanvas.source),(T$E._context=new T$k(T$$,T$b,T$Z?null:T$E._mainCanvas)).ctx.setIsMainContext(),T$s.window.requestAnimationFrame(function T$$(T$b){T$s.window.requestAnimationFrame(T$$);T$z.stage._loop()}),T$z.stage.on("visibilitychange",this,this._onVisibilitychange)}T$w(T$E,"laya.renders.Render");var T$$=T$E.prototype;return T$$._onVisibilitychange=function(){T$z.stage.isVisibility?0!=this._timeId&&T$s.window.clearInterval(this._timeId):this._timeId=T$s.window.setInterval(this._enterFrame,1e3)},T$$._enterFrame=function(T$$){T$z.stage._loop()},T$D(1,T$E,"context",function(){return T$E._context}),T$D(1,T$E,"canvas",function(){return T$E._mainCanvas.source}),T$E._context=null,T$E._mainCanvas=null,T$E.WebGL=null,T$E.isConchNode=!1,T$E.isConchApp=!1,T$E.isConchWebGL=!1,T$E.isWebGL=!1,T$E.is3DMode=!1,T$E.optimizeTextureMemory=function(T$$,T$b){return!0},T$E.__init$=function(){T$F.ConchRenderType=T$F.ConchRenderType||1,T$F.ConchRenderType|=T$F.conch?4:0,T$E.isConchNode=5==(5&T$F.ConchRenderType),T$E.isConchApp=4==(4&T$F.ConchRenderType),T$E.isConchWebGL=6==T$F.ConchRenderType},T$E}(),T$k=function(){function T$F(T$$,T$b,T$u){this.x=0,this.y=0,this._drawTexture=function(T$$,T$b,T$u){T$u[0].loaded&&this.ctx.drawTexture(T$u[0],T$u[1],T$u[2],T$u[3],T$u[4],T$$,T$b)},this._fillTexture=function(T$$,T$b,T$u){T$u[0].loaded&&this.ctx.fillTexture(T$u[0],T$u[1]+T$$,T$u[2]+T$b,T$u[3],T$u[4],T$u[5],T$u[6],T$u[7])},this._drawTextureWithTransform=function(T$$,T$b,T$u){T$u[0].loaded&&this.ctx.drawTextureWithTransform(T$u[0],T$u[1],T$u[2],T$u[3],T$u[4],T$u[5],T$$,T$b,T$u[6])},this._fillQuadrangle=function(T$$,T$b,T$u){this.ctx.fillQuadrangle(T$u[0],T$u[1],T$u[2],T$u[3],T$u[4])},this._drawRect=function(T$$,T$b,T$u){var T$Z=this.ctx;null!=T$u[4]&&(T$Z.fillStyle=T$u[4],T$Z.fillRect(T$$+T$u[0],T$b+T$u[1],T$u[2],T$u[3],null)),null!=T$u[5]&&(T$Z.strokeStyle=T$u[5],T$Z.lineWidth=T$u[6],T$Z.strokeRect(T$$+T$u[0],T$b+T$u[1],T$u[2],T$u[3],T$u[6]))},this._drawPie=function(T$$,T$b,T$u){var T$Z=this.ctx;T$Y.isWebGL&&T$Z.setPathId(T$u[8]),T$Z.beginPath(),T$Y.isWebGL?(T$Z.movePath(T$u[0]+T$$,T$u[1]+T$b),T$Z.moveTo(0,0)):T$Z.moveTo(T$$+T$u[0],T$b+T$u[1]),T$Z.arc(T$$+T$u[0],T$b+T$u[1],T$u[2],T$u[3],T$u[4]),T$Z.closePath(),this._fillAndStroke(T$u[5],T$u[6],T$u[7],!0)},this._clipRect=function(T$$,T$b,T$u){this.ctx.clipRect(T$$+T$u[0],T$b+T$u[1],T$u[2],T$u[3])},this._fillRect=function(T$$,T$b,T$u){this.ctx.fillRect(T$$+T$u[0],T$b+T$u[1],T$u[2],T$u[3],T$u[4])},this._drawCircle=function(T$$,T$b,T$u){var T$Z=this.ctx;T$Y.isWebGL&&T$Z.setPathId(T$u[6]),T$A.drawCall++,T$Z.beginPath(),T$Y.isWebGL&&T$Z.movePath(T$u[0]+T$$,T$u[1]+T$b),T$Z.arc(T$u[0]+T$$,T$u[1]+T$b,T$u[2],0,T$F.PI2),T$Z.closePath(),this._fillAndStroke(T$u[3],T$u[4],T$u[5],!0)},this._fillCircle=function(T$$,T$b,T$u){T$A.drawCall++;var T$Z=this.ctx;T$Z.beginPath(),T$Z.fillStyle=T$u[3],T$Z.arc(T$u[0]+T$$,T$u[1]+T$b,T$u[2],0,T$F.PI2),T$Z.fill()},this._setShader=function(T$$,T$b,T$u){this.ctx.setShader(T$u[0])},this._drawLine=function(T$$,T$b,T$u){var T$Z=this.ctx;T$Y.isWebGL&&T$Z.setPathId(T$u[6]),T$Z.beginPath(),T$Z.strokeStyle=T$u[4],T$Z.lineWidth=T$u[5],T$Y.isWebGL?(T$Z.movePath(T$$,T$b),T$Z.moveTo(T$u[0],T$u[1]),T$Z.lineTo(T$u[2],T$u[3])):(T$Z.moveTo(T$$+T$u[0],T$b+T$u[1]),T$Z.lineTo(T$$+T$u[2],T$b+T$u[3])),T$Z.stroke()},this._drawLines=function(T$$,T$b,T$u){var T$Z=this.ctx;T$Y.isWebGL&&T$Z.setPathId(T$u[5]),T$Z.beginPath(),T$$+=T$u[0],T$b+=T$u[1],T$Y.isWebGL&&T$Z.movePath(T$$,T$b),T$Z.strokeStyle=T$u[3],T$Z.lineWidth=T$u[4];var T$E=T$u[2],T$r=2,T$F=T$E.length;if(T$Y.isWebGL)for(T$Z.moveTo(T$E[0],T$E[1]);T$r<T$F;)T$Z.lineTo(T$E[T$r++],T$E[T$r++]);else for(T$Z.moveTo(T$$+T$E[0],T$b+T$E[1]);T$r<T$F;)T$Z.lineTo(T$$+T$E[T$r++],T$b+T$E[T$r++]);T$Z.stroke()},this._drawLinesWebGL=function(T$$,T$b,T$u){this.ctx.drawLines(T$$+this.x+T$u[0],T$b+this.y+T$u[1],T$u[2],T$u[3],T$u[4])},this._drawCurves=function(T$$,T$b,T$u){this.ctx.drawCurves(T$$,T$b,T$u)},this._draw=function(T$$,T$b,T$u){T$u[0].call(null,this,T$$,T$b)},this._transformByMatrix=function(T$$,T$b,T$u){this.ctx.transformByMatrix(T$u[0])},this._setTransform=function(T$$,T$b,T$u){this.ctx.setTransform(T$u[0],T$u[1],T$u[2],T$u[3],T$u[4],T$u[5])},this._setTransformByMatrix=function(T$$,T$b,T$u){this.ctx.setTransformByMatrix(T$u[0])},this._save=function(T$$,T$b,T$u){this.ctx.save()},this._restore=function(T$$,T$b,T$u){this.ctx.restore()},this._translate=function(T$$,T$b,T$u){this.ctx.translate(T$u[0],T$u[1])},this._transform=function(T$$,T$b,T$u){this.ctx.translate(T$u[1]+T$$,T$u[2]+T$b);var T$Z=T$u[0];this.ctx.transform(T$Z.a,T$Z.b,T$Z.c,T$Z.d,T$Z.tx,T$Z.ty),this.ctx.translate(-T$$-T$u[1],-T$b-T$u[2])},this._rotate=function(T$$,T$b,T$u){this.ctx.translate(T$u[1]+T$$,T$u[2]+T$b),this.ctx.rotate(T$u[0]),this.ctx.translate(-T$$-T$u[1],-T$b-T$u[2])},this._scale=function(T$$,T$b,T$u){this.ctx.translate(T$u[2]+T$$,T$u[3]+T$b),this.ctx.scale(T$u[0],T$u[1]),this.ctx.translate(-T$$-T$u[2],-T$b-T$u[3])},this._alpha=function(T$$,T$b,T$u){this.ctx.globalAlpha*=T$u[0]},this._setAlpha=function(T$$,T$b,T$u){this.ctx.globalAlpha=T$u[0]},this._fillText=function(T$$,T$b,T$u){this.ctx.fillText(T$u[0],T$u[1]+T$$,T$u[2]+T$b,T$u[3],T$u[4],T$u[5])},this._strokeText=function(T$$,T$b,T$u){this.ctx.strokeText(T$u[0],T$u[1]+T$$,T$u[2]+T$b,T$u[3],T$u[4],T$u[5],T$u[6])},this._fillBorderText=function(T$$,T$b,T$u){this.ctx.fillBorderText(T$u[0],T$u[1]+T$$,T$u[2]+T$b,T$u[3],T$u[4],T$u[5],T$u[6],T$u[7])},this._blendMode=function(T$$,T$b,T$u){this.ctx.globalCompositeOperation=T$u[0]},this._beginClip=function(T$$,T$b,T$u){this.ctx.beginClip&&this.ctx.beginClip(T$$+T$u[0],T$b+T$u[1],T$u[2],T$u[3])},this._setIBVB=function(T$$,T$b,T$u){this.ctx.setIBVB(T$u[0]+T$$,T$u[1]+T$b,T$u[2],T$u[3],T$u[4],T$u[5],T$u[6],T$u[7])},this._fillTrangles=function(T$$,T$b,T$u){this.ctx.fillTrangles(T$u[0],T$u[1]+T$$,T$u[2]+T$b,T$u[3],T$u[4])},this._drawPath=function(T$$,T$b,T$u){var T$Z=this.ctx;T$Y.isWebGL&&T$Z.setPathId(-1),T$Z.beginPath(),T$$+=T$u[0],T$b+=T$u[1],T$Y.isWebGL&&T$Z.movePath(T$$,T$b);for(var T$E=T$u[2],T$r=0,T$F=T$E.length;T$r<T$F;T$r++){var T$x=T$E[T$r];switch(T$x[0]){case"moveTo":T$Y.isWebGL?T$Z.moveTo(T$x[1],T$x[2]):T$Z.moveTo(T$$+T$x[1],T$b+T$x[2]);break;case"lineTo":T$Y.isWebGL?T$Z.lineTo(T$x[1],T$x[2]):T$Z.lineTo(T$$+T$x[1],T$b+T$x[2]);break;case"arcTo":T$Y.isWebGL?T$Z.arcTo(T$x[1],T$x[2],T$x[3],T$x[4],T$x[5]):T$Z.arcTo(T$$+T$x[1],T$b+T$x[2],T$$+T$x[3],T$b+T$x[4],T$x[5]);break;case"closePath":T$Z.closePath()}}var T$g=T$u[3];null!=T$g&&(T$Z.fillStyle=T$g.fillStyle,T$Z.fill());var T$H=T$u[4];null!=T$H&&(T$Z.strokeStyle=T$H.strokeStyle,T$Z.lineWidth=T$H.lineWidth||1,T$Z.lineJoin=T$H.lineJoin,T$Z.lineCap=T$H.lineCap,T$Z.miterLimit=T$H.miterLimit,T$Z.stroke())},this.drawPoly=function(T$$,T$b,T$u){this.ctx.drawPoly(T$$+this.x+T$u[0],T$b+this.y+T$u[1],T$u[2],T$u[3],T$u[4],T$u[5],T$u[6])},this._drawPoly=function(T$$,T$b,T$u){var T$Z=this.ctx,T$E=T$u[2],T$r=2,T$F=T$E.length;if(T$Y.isWebGL)for(T$Z.setPathId(T$u[6]),T$Z.beginPath(),T$$+=T$u[0],T$b+=T$u[1],T$Z.movePath(T$$,T$b),T$Z.moveTo(T$E[0],T$E[1]);T$r<T$F;)T$Z.lineTo(T$E[T$r++],T$E[T$r++]);else for(T$Z.beginPath(),T$$+=T$u[0],T$b+=T$u[1],T$Z.moveTo(T$$+T$E[0],T$b+T$E[1]);T$r<T$F;)T$Z.lineTo(T$$+T$E[T$r++],T$b+T$E[T$r++]);T$Z.closePath(),this._fillAndStroke(T$u[3],T$u[4],T$u[5],T$u[7])},this._drawSkin=function(T$$,T$b,T$u){var T$Z=T$u[0];if(T$Z){var T$E=this.ctx;T$Z.render(T$E,T$$,T$b)}},this._drawParticle=function(T$$,T$b,T$u){this.ctx.drawParticle(T$$+this.x,T$b+this.y,T$u[0])},this._setFilters=function(T$$,T$b,T$u){this.ctx.setFilters(T$u)},T$u?this.ctx=T$u.getContext("2d"):(T$u=T$y$.create("3D"),this.ctx=T$O.createWebGLContext2D(T$u),T$u._setContext(this.ctx)),T$u.size(T$$,T$b),this.canvas=T$u}T$w(T$F,"laya.renders.RenderContext");var T$$=T$F.prototype;return T$$.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},T$$.drawTexture=function(T$$,T$b,T$u,T$Z,T$E){T$$.loaded&&this.ctx.drawTexture(T$$,T$b,T$u,T$Z,T$E,this.x,this.y)},T$$._drawTextures=function(T$$,T$b,T$u){T$u[0].loaded&&this.ctx.drawTextures(T$u[0],T$u[1],T$$+this.x,T$b+this.y)},T$$.drawTextureWithTransform=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){T$$.loaded&&this.ctx.drawTextureWithTransform(T$$,T$b,T$u,T$Z,T$E,T$r,this.x,this.y,T$F)},T$$.fillQuadrangle=function(T$$,T$b,T$u,T$Z,T$E){this.ctx.fillQuadrangle(T$$,T$b,T$u,T$Z,T$E)},T$$.drawCanvas=function(T$$,T$b,T$u,T$Z,T$E){this.ctx.drawCanvas(T$$,T$b+this.x,T$u+this.y,T$Z,T$E)},T$$.drawRect=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$r&&(T$r=1);var T$F=this.ctx;T$F.strokeStyle=T$E,T$F.lineWidth=T$r,T$F.strokeRect(T$$+this.x,T$b+this.y,T$u,T$Z,T$r)},T$$._fillAndStroke=function(T$$,T$b,T$u,T$Z){void 0===T$Z&&(T$Z=!1);var T$E=this.ctx;null!=T$$&&(T$E.fillStyle=T$$,T$Y.isWebGL?T$E.fill(T$Z):T$E.fill()),null!=T$b&&0<T$u&&(T$E.strokeStyle=T$b,T$E.lineWidth=T$u,T$E.stroke())},T$$.clipRect=function(T$$,T$b,T$u,T$Z){this.ctx.clipRect(T$$+this.x,T$b+this.y,T$u,T$Z)},T$$.fillRect=function(T$$,T$b,T$u,T$Z,T$E){this.ctx.fillRect(T$$+this.x,T$b+this.y,T$u,T$Z,T$E)},T$$.drawCircle=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$E&&(T$E=1),T$A.drawCall++;var T$r=this.ctx;T$r.beginPath(),T$r.strokeStyle=T$Z,T$r.lineWidth=T$E,T$r.arc(T$$+this.x,T$b+this.y,T$u,0,T$F.PI2),T$r.stroke()},T$$.drawTriangles=function(T$$,T$b,T$u){if(T$Y.isWebGL)this.ctx.drawTriangles(T$u[0],T$$+T$u[1],T$b+T$u[2],T$u[3],T$u[4],T$u[5],T$u[6],T$u[7],T$u[8],T$u[9]);else{var T$Z=T$u[5],T$E=0,T$r=T$Z.length,T$F=this.ctx;for(T$E=0;T$E<T$r;T$E+=3){var T$x=2*T$Z[T$E],T$g=2*T$Z[T$E+1],T$H=2*T$Z[T$E+2];T$F.drawTriangle(T$u[0],T$u[3],T$u[4],T$x,T$g,T$H,T$u[6],!0)}}},T$$.fillCircle=function(T$$,T$b,T$u,T$Z){T$A.drawCall++;var T$E=this.ctx;T$E.beginPath(),T$E.fillStyle=T$Z,T$E.arc(T$$+this.x,T$b+this.y,T$u,0,T$F.PI2),T$E.fill()},T$$.setShader=function(T$$){this.ctx.setShader(T$$)},T$$.drawLine=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$r&&(T$r=1);var T$F=this.ctx;T$F.beginPath(),T$F.strokeStyle=T$E,T$F.lineWidth=T$r,T$F.moveTo(this.x+T$$,this.y+T$b),T$F.lineTo(this.x+T$u,this.y+T$Z),T$F.stroke()},T$$.clear=function(){this.ctx.clear()},T$$.transformByMatrix=function(T$$){this.ctx.transformByMatrix(T$$)},T$$.setTransform=function(T$$,T$b,T$u,T$Z,T$E,T$r){this.ctx.setTransform(T$$,T$b,T$u,T$Z,T$E,T$r)},T$$.setTransformByMatrix=function(T$$){this.ctx.setTransformByMatrix(T$$)},T$$.save=function(){this.ctx.save()},T$$.restore=function(){this.ctx.restore()},T$$.translate=function(T$$,T$b){this.ctx.translate(T$$,T$b)},T$$.transform=function(T$$,T$b,T$u,T$Z,T$E,T$r){this.ctx.transform(T$$,T$b,T$u,T$Z,T$E,T$r)},T$$.rotate=function(T$$){this.ctx.rotate(T$$)},T$$.scale=function(T$$,T$b){this.ctx.scale(T$$,T$b)},T$$.alpha=function(T$$){this.ctx.globalAlpha*=T$$},T$$.setAlpha=function(T$$){this.ctx.globalAlpha=T$$},T$$.fillWords=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$r&&(T$r=0),this.ctx.fillWords(T$$,T$b,T$u,T$Z,T$E,T$r)},T$$.fillBorderWords=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this.ctx.fillBorderWords(T$$,T$b,T$u,T$Z,T$E,T$r,T$F)},T$$.fillText=function(T$$,T$b,T$u,T$Z,T$E,T$r){this.ctx.fillText(T$$,T$b+this.x,T$u+this.y,T$Z,T$E,T$r)},T$$.strokeText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this.ctx.strokeText(T$$,T$b+this.x,T$u+this.y,T$Z,T$E,T$r,T$F)},T$$.blendMode=function(T$$){this.ctx.globalCompositeOperation=T$$},T$$.flush=function(){this.ctx.flush&&this.ctx.flush()},T$$.addRenderObject=function(T$$){this.ctx.addRenderObject(T$$)},T$$.beginClip=function(T$$,T$b,T$u,T$Z){this.ctx.beginClip&&this.ctx.beginClip(T$$,T$b,T$u,T$Z)},T$$.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},T$$.fillTrangles=function(T$$,T$b,T$u){this.ctx.fillTrangles(T$u[0],T$u[1],T$u[2],T$u[3],4<T$u.length?T$u[4]:null)},T$F.PI2=2*Math.PI,T$F}(),T$M=function(){function T$F(T$$,T$b){switch(this._next=T$b||T$F.NORENDER,T$$){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=T$T._filter);case 69905:return void(this._fun=T$F._initRenderFun)}this.onCreate(T$$)}T$w(T$F,"laya.renders.RenderSprite");var T$$=T$F.prototype;return T$$.onCreate=function(T$$){},T$$._style=function(T$$,T$b,T$u,T$Z){T$$._style.render(T$$,T$b,T$u,T$Z);var T$E=this._next;T$E._fun.call(T$E,T$$,T$b,T$u,T$Z)},T$$._no=function(T$$,T$b,T$u,T$Z){},T$$._custom=function(T$$,T$b,T$u,T$Z){T$$.customRender(T$b,T$u,T$Z);var T$E=T$$._style._tf;this._next._fun.call(this._next,T$$,T$b,T$u-T$E.translateX,T$Z-T$E.translateY)},T$$._clip=function(T$$,T$b,T$u,T$Z){var T$E=this._next;if(T$E!=T$F.NORENDER){var T$r=T$$._style.scrollRect;T$b.ctx.save(),T$b.ctx.clipRect(T$u,T$Z,T$r.width,T$r.height),T$E._fun.call(T$E,T$$,T$b,T$u-T$r.x,T$Z-T$r.y),T$b.ctx.restore()}},T$$._blend=function(T$$,T$b,T$u,T$Z){var T$E=T$$._style;T$E.blendMode&&(T$b.ctx.globalCompositeOperation=T$E.blendMode);var T$r=this._next;T$r._fun.call(T$r,T$$,T$b,T$u,T$Z),T$b.ctx.globalCompositeOperation="source-over"},T$$._mask=function(T$$,T$b,T$u,T$Z){var T$E=this._next;T$E._fun.call(T$E,T$$,T$b,T$u,T$Z);var T$r=T$$.mask;T$r&&(T$b.ctx.globalCompositeOperation="destination-in",(0<T$r.numChildren||!T$r.graphics._isOnlyOne())&&(T$r.cacheAsBitmap=!0),T$r.render(T$b,T$u-T$$.pivotX,T$Z-T$$.pivotY)),T$b.ctx.globalCompositeOperation="source-over"},T$$._graphics=function(T$$,T$b,T$u,T$Z){var T$E=T$$._style._tf;T$$._graphics&&T$$._graphics._render(T$$,T$b,T$u-T$E.translateX,T$Z-T$E.translateY);var T$r=this._next;T$r._fun.call(T$r,T$$,T$b,T$u,T$Z)},T$$._image=function(T$$,T$b,T$u,T$Z){var T$E=T$$._style;T$b.ctx.drawTexture2(T$u,T$Z,T$E._tf.translateX,T$E._tf.translateY,T$$.transform,T$E.alpha,T$E.blendMode,T$$._graphics._one)},T$$._image2=function(T$$,T$b,T$u,T$Z){var T$E=T$$._style._tf;T$b.ctx.drawTexture2(T$u,T$Z,T$E.translateX,T$E.translateY,T$$.transform,1,null,T$$._graphics._one)},T$$._alpha=function(T$$,T$b,T$u,T$Z){var T$E;if(.01<(T$E=T$$._style.alpha)||T$$._needRepaint()){var T$r=T$b.ctx.globalAlpha;T$b.ctx.globalAlpha*=T$E;var T$F=this._next;T$F._fun.call(T$F,T$$,T$b,T$u,T$Z),T$b.ctx.globalAlpha=T$r}},T$$._transform=function(T$$,T$b,T$u,T$Z){var T$E=T$$.transform,T$r=this._next;T$E&&T$r!=T$F.NORENDER?(T$b.save(),T$b.transform(T$E.a,T$E.b,T$E.c,T$E.d,T$E.tx+T$u,T$E.ty+T$Z),T$r._fun.call(T$r,T$$,T$b,0,0),T$b.restore()):T$r._fun.call(T$r,T$$,T$b,T$u,T$Z)},T$$._childs=function(T$$,T$b,T$u,T$Z){var T$E=T$$._style,T$r=T$E._tf;if(T$u=T$u-T$r.translateX+T$E.paddingLeft,T$Z=T$Z-T$r.translateY+T$E.paddingTop,T$E._calculation){var T$F=T$$._getWords();if(T$F){var T$x=T$E;T$x&&(T$x.stroke?T$b.fillBorderWords(T$F,T$u,T$Z,T$x.font,T$x.color,T$x.strokeColor,T$x.stroke):T$b.fillWords(T$F,T$u,T$Z,T$x.font,T$x.color,"none"!=T$x.textDecoration&&T$x.underLine?1:0))}}var T$g,T$H=T$$._childs,T$w=T$H.length;if(T$$.viewport||T$$.optimizeScrollRect&&T$$._style.scrollRect){var T$I=T$$.viewport||T$$._style.scrollRect,T$o=T$I.x,T$N=T$I.y,T$D=T$I.right,T$e=T$I.bottom,T$L=NaN,T$T=NaN;for(T$_=0;T$_<T$w;++T$_)(T$g=T$H[T$_]).visible&&(T$L=T$g._x)<T$D&&T$L+T$g.width>T$o&&(T$T=T$g._y)<T$e&&T$T+T$g.height>T$N&&T$g.render(T$b,T$u,T$Z)}else for(var T$_=0;T$_<T$w;++T$_)(T$g=T$H[T$_])._style.visible&&T$g.render(T$b,T$u,T$Z)},T$$._canvas=function(T$$,T$b,T$u,T$Z){var T$E=T$$._$P.cacheCanvas;if(T$E){"bitmap"===T$E.type?T$A.canvasBitmap++:T$A.canvasNormal++;var T$r=T$E.ctx;if(T$$._needRepaint()||!T$r)this._canvas_repaint(T$$,T$b,T$u,T$Z);else{var T$F=T$E._cacheRec;T$b.drawCanvas(T$r.canvas,T$u+T$F.x,T$Z+T$F.y,T$F.width,T$F.height)}}else this._next._fun.call(this._next,T$$,T$b,T$u,T$Z)},T$$._canvas_repaint=function(T$$,T$b,T$u,T$Z){var T$E=T$$._$P.cacheCanvas,T$r=this._next;if(T$E){var T$F,T$x,T$g,T$H,T$w=T$E.ctx,T$I=T$$._needRepaint()||!T$w,T$o=T$E.type;if("bitmap"===T$o?T$A.canvasBitmap++:T$A.canvasNormal++,T$I){var T$N,T$D;T$E._cacheRec||(T$E._cacheRec=new T$a),T$Y.isWebGL&&"bitmap"!==T$o?T$E._cacheRec.setTo(-T$$.pivotX,-T$$.pivotY,1,1):((T$H=T$$.getSelfBounds()).x=T$H.x-T$$.pivotX,T$H.y=T$H.y-T$$.pivotY,T$H.x=T$H.x-16,T$H.y=T$H.y-16,T$H.width=T$H.width+32,T$H.height=T$H.height+32,T$H.x=Math.floor(T$H.x+T$u)-T$u,T$H.y=Math.floor(T$H.y+T$Z)-T$Z,T$H.width=Math.floor(T$H.width),T$H.height=Math.floor(T$H.height),T$E._cacheRec.copyFrom(T$H)),T$H=T$E._cacheRec;var T$e,T$L=T$Y.isWebGL?1:T$s.pixelRatio*T$z.stage.clientScaleX,T$T=T$Y.isWebGL?1:T$s.pixelRatio*T$z.stage.clientScaleY;if(!T$Y.isWebGL){var T$_,T$y=1,T$S=1;for(T$_=T$$;T$_&&T$_!=T$z.stage;)T$y*=T$_.scaleX,T$S*=T$_.scaleY,T$_=T$_.parent;T$Y.isWebGL?(T$y<1&&(T$L*=T$y),T$S<1&&(T$T*=T$S)):(1<T$y&&(T$L*=T$y),1<T$S&&(T$T*=T$S))}if(T$$.scrollRect){var T$P=T$$.scrollRect;T$H.x-=T$P.x,T$H.y-=T$P.y}if(T$N=T$H.width*T$L,T$D=T$H.height*T$T,T$x=T$H.x,T$g=T$H.y,T$Y.isWebGL&&"bitmap"===T$o&&(2048<T$N||2048<T$D))return console.warn("cache bitmap size larger than 2048,cache ignored"),T$E.ctx&&(T$G.recover("RenderContext",T$E.ctx),T$E.ctx.canvas.size(0,0),T$E.ctx=null),void T$r._fun.call(T$r,T$$,T$b,T$u,T$Z);if(T$w||(T$w=T$E.ctx=T$G.getItem("RenderContext")||new T$k(T$N,T$D,T$y$.create("AUTO"))),T$w.ctx.sprite=T$$,(T$F=T$w.canvas).clear(),(T$F.width!=T$N||T$F.height!=T$D)&&T$F.size(T$N,T$D),"bitmap"===T$o?T$F.context.asBitmap=!0:"normal"===T$o&&(T$F.context.asBitmap=!1),1!=T$L||1!=T$T){var T$i=T$w.ctx;T$i.save(),T$i.scale(T$L,T$T),!T$Y.isConchWebGL&&T$Y.isConchApp&&(T$e=T$$._$P.cf)&&T$i.setFilterMatrix&&T$i.setFilterMatrix(T$e._mat,T$e._alpha),T$r._fun.call(T$r,T$$,T$w,-T$x,-T$g),T$i.restore(),T$Y.isConchApp&&!T$Y.isConchWebGL||T$$._applyFilters()}else T$i=T$w.ctx,!T$Y.isConchWebGL&&T$Y.isConchApp&&(T$e=T$$._$P.cf)&&T$i.setFilterMatrix&&T$i.setFilterMatrix(T$e._mat,T$e._alpha),T$r._fun.call(T$r,T$$,T$w,-T$x,-T$g),T$Y.isConchApp&&!T$Y.isConchWebGL||T$$._applyFilters();T$$._$P.staticCache&&(T$E.reCache=!1),T$A.canvasReCache++}else T$x=(T$H=T$E._cacheRec).x,T$g=T$H.y,T$F=T$w.canvas;T$b.drawCanvas(T$F,T$u+T$x,T$Z+T$g,T$H.width,T$H.height)}else T$r._fun.call(T$r,T$$,T$w,T$u,T$Z)},T$F.__init__=function(){var T$$,T$b,T$u=0;for(T$b=T$O.createRenderSprite(69905,null),T$$=T$F.renders.length=4096,T$u=0;T$u<T$$;T$u++)T$F.renders[T$u]=T$b;T$F.renders[0]=T$O.createRenderSprite(0,null),function(T$$,T$b){for(var T$u=0,T$Z=0;T$Z<T$$.length;T$Z++)T$u|=T$$[T$Z],T$F.renders[T$u]=T$b}([1,512,4,2],new T$F(1,null)),T$F.renders[513]=T$O.createRenderSprite(513,null),T$F.renders[517]=new T$F(517,null)},T$F._initRenderFun=function(T$$,T$b,T$u,T$Z){var T$E=T$$._renderType;(T$F.renders[T$E]=T$F._getTypeRender(T$E))._fun(T$$,T$b,T$u,T$Z)},T$F._getTypeRender=function(T$$){for(var T$b=null,T$u=2048;1<T$u;)T$u&T$$&&(T$b=T$O.createRenderSprite(T$u,T$b)),T$u>>=1;return T$b},T$F.IMAGE=1,T$F.ALPHA=2,T$F.TRANSFORM=4,T$F.BLEND=8,T$F.CANVAS=16,T$F.FILTERS=32,T$F.MASK=64,T$F.CLIP=128,T$F.STYLE=256,T$F.GRAPHICS=512,T$F.CUSTOM=1024,T$F.CHILDS=2048,T$F.INIT=69905,T$F.renders=[],T$F.NORENDER=new T$F(0,null),T$F}(),T$l=function(){function T$x(){this._repaint=!1}T$w(T$x,"laya.resource.Context");var T$$=T$x.prototype;return T$$.replaceReset=function(){var T$$,T$b,T$u=0;for(T$$=T$x.replaceKeys.length,T$u=0;T$u<T$$;T$u++)T$b=T$x.replaceKeys[T$u],this[T$x.newKeys[T$u]]=this[T$b]},T$$.replaceResotre=function(){this.__restore(),this.__reset()},T$$.setIsMainContext=function(){},T$$.drawTextures=function(T$$,T$b,T$u,T$Z){T$A.drawCall+=T$b.length/2;for(var T$E=T$$.width,T$r=T$$.height,T$F=0,T$x=T$b.length;T$F<T$x;T$F+=2)this.drawTexture(T$$,T$b[T$F],T$b[T$F+1],T$E,T$r,T$u,T$Z)},T$$.drawCanvas=function(T$$,T$b,T$u,T$Z,T$E){T$A.drawCall++,this.drawImage(T$$.source,T$b,T$u,T$Z,T$E)},T$$.fillRect=function(T$$,T$b,T$u,T$Z,T$E){T$A.drawCall++,T$E&&(this.fillStyle=T$E),this.__fillRect(T$$,T$b,T$u,T$Z)},T$$.fillText=function(T$$,T$b,T$u,T$Z,T$E,T$r){T$A.drawCall++,3<arguments.length&&null!=T$Z&&(this.font=T$Z,this.fillStyle=T$E,this.textAlign=T$r,this.textBaseline="top"),this.__fillText(T$$,T$b,T$u)},T$$.fillBorderText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){T$A.drawCall++,this.font=T$Z,this.fillStyle=T$E,this.textBaseline="top",this.strokeStyle=T$r,this.lineWidth=T$F,this.textAlign=T$x,this.__strokeText(T$$,T$b,T$u),this.__fillText(T$$,T$b,T$u)},T$$.strokeText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){T$A.drawCall++,3<arguments.length&&null!=T$Z&&(this.font=T$Z,this.strokeStyle=T$E,this.lineWidth=T$r,this.textAlign=T$F,this.textBaseline="top"),this.__strokeText(T$$,T$b,T$u)},T$$.transformByMatrix=function(T$$){this.transform(T$$.a,T$$.b,T$$.c,T$$.d,T$$.tx,T$$.ty)},T$$.setTransformByMatrix=function(T$$){this.setTransform(T$$.a,T$$.b,T$$.c,T$$.d,T$$.tx,T$$.ty)},T$$.clipRect=function(T$$,T$b,T$u,T$Z){T$A.drawCall++,this.beginPath(),this.rect(T$$,T$b,T$u,T$Z),this.clip()},T$$.drawTexture=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){T$A.drawCall++;var T$x=T$$.uv,T$g=T$$.bitmap.width,T$H=T$$.bitmap.height;this.drawImage(T$$.source,T$x[0]*T$g,T$x[1]*T$H,(T$x[2]-T$x[0])*T$g,(T$x[5]-T$x[3])*T$H,T$b+T$r,T$u+T$F,T$Z,T$E)},T$$.drawTextureWithTransform=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){T$A.drawCall++;var T$H=T$$.uv,T$w=T$$.bitmap.width,T$I=T$$.bitmap.height;this.save(),1!=T$g&&(this.globalAlpha*=T$g),T$r?(this.transform(T$r.a,T$r.b,T$r.c,T$r.d,T$r.tx+T$F,T$r.ty+T$x),this.drawImage(T$$.source,T$H[0]*T$w,T$H[1]*T$I,(T$H[2]-T$H[0])*T$w,(T$H[5]-T$H[3])*T$I,T$b,T$u,T$Z,T$E)):this.drawImage(T$$.source,T$H[0]*T$w,T$H[1]*T$I,(T$H[2]-T$H[0])*T$w,(T$H[5]-T$H[3])*T$I,T$b+T$F,T$u+T$x,T$Z,T$E),this.restore()},T$$.drawTexture2=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){var T$g=T$x[0];if(T$g.loaded&&T$g.bitmap&&T$g.source){T$A.drawCall++;var T$H=1!==T$r;if(T$H){var T$w=this.globalAlpha;this.globalAlpha*=T$r}var T$I=T$g.uv,T$o=T$g.bitmap.width,T$N=T$g.bitmap.height;T$E?(this.save(),this.transform(T$E.a,T$E.b,T$E.c,T$E.d,T$E.tx+T$$,T$E.ty+T$b),this.drawImage(T$g.source,T$I[0]*T$o,T$I[1]*T$N,(T$I[2]-T$I[0])*T$o,(T$I[5]-T$I[3])*T$N,T$x[1]-T$u,T$x[2]-T$Z,T$x[3],T$x[4]),this.restore()):this.drawImage(T$g.source,T$I[0]*T$o,T$I[1]*T$N,(T$I[2]-T$I[0])*T$o,(T$I[5]-T$I[3])*T$N,T$x[1]-T$u+T$$,T$x[2]-T$Z+T$b,T$x[3],T$x[4]),T$H&&(this.globalAlpha=T$w)}},T$$.fillTexture=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){if(!T$x.pat){if(T$$.uv!=T$w$.DEF_UV){var T$g=new T$y$("2D");T$g.getContext("2d"),T$g.size(T$$.width,T$$.height),T$g.context.drawTexture(T$$,0,0,T$$.width,T$$.height,0,0),T$$=new T$w$(T$g)}T$x.pat=this.createPattern(T$$.bitmap.source,T$r)}var T$H=T$b,T$w=T$u,T$I=0,T$o=0;T$F&&(T$H+=T$F.x%T$$.width,T$w+=T$F.y%T$$.height,T$I-=T$F.x%T$$.width,T$o-=T$F.y%T$$.height),this.translate(T$H,T$w),this.fillRect(T$I,T$o,T$Z,T$E,T$x.pat),this.translate(-T$H,-T$w)},T$$.drawTriangle=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){var T$g=T$$.bitmap,T$H=T$g.source,T$w=T$$.width,T$I=T$$.height,T$o=T$g.width,T$N=T$g.height,T$D=T$u[T$Z]*T$o,T$e=T$u[T$E]*T$o,T$L=T$u[T$r]*T$o,T$T=T$u[T$Z+1]*T$N,T$_=T$u[T$E+1]*T$N,T$y=T$u[T$r+1]*T$N,T$S=T$b[T$Z],T$P=T$b[T$E],T$i=T$b[T$r],T$z=T$b[T$Z+1],T$q=T$b[T$E+1],T$a=T$b[T$r+1];if(T$x){var T$t=(T$S+T$P+T$i)/3,T$C=(T$z+T$q+T$a)/3,T$K=T$S-T$t,T$O=T$z-T$C,T$V=Math.sqrt(T$K*T$K+T$O*T$O);T$S=T$t+T$K/T$V*(T$V+1),T$z=T$C+T$O/T$V*(T$V+1),T$O=T$q-T$C,T$P=T$t+(T$K=T$P-T$t)/(T$V=Math.sqrt(T$K*T$K+T$O*T$O))*(T$V+1),T$q=T$C+T$O/T$V*(T$V+1),T$O=T$a-T$C,T$i=T$t+(T$K=T$i-T$t)/(T$V=Math.sqrt(T$K*T$K+T$O*T$O))*(T$V+1),T$a=T$C+T$O/T$V*(T$V+1)}this.save(),T$F&&this.transform(T$F.a,T$F.b,T$F.c,T$F.d,T$F.tx,T$F.ty),this.beginPath(),this.moveTo(T$S,T$z),this.lineTo(T$P,T$q),this.lineTo(T$i,T$a),this.closePath(),this.clip();var T$v=1/(T$D*T$_+T$T*T$L+T$e*T$y-T$_*T$L-T$T*T$e-T$D*T$y),T$p=T$S*T$_+T$T*T$i+T$P*T$y-T$_*T$i-T$T*T$P-T$S*T$y,T$Y=T$D*T$P+T$S*T$L+T$e*T$i-T$P*T$L-T$S*T$e-T$D*T$i,T$k=T$D*T$_*T$i+T$T*T$P*T$L+T$S*T$e*T$y-T$S*T$_*T$L-T$T*T$e*T$i-T$D*T$P*T$y,T$M=T$z*T$_+T$T*T$a+T$q*T$y-T$_*T$a-T$T*T$q-T$z*T$y,T$l=T$D*T$q+T$z*T$L+T$e*T$a-T$q*T$L-T$z*T$e-T$D*T$a,T$X=T$D*T$_*T$a+T$T*T$q*T$L+T$z*T$e*T$y-T$z*T$_*T$L-T$T*T$e*T$a-T$D*T$q*T$y;this.transform(T$p*T$v,T$M*T$v,T$Y*T$v,T$l*T$v,T$k*T$v,T$X*T$v),this.drawImage(T$H,T$$.uv[0]*T$o,T$$.uv[1]*T$N,T$w,T$I,T$$.uv[0]*T$o,T$$.uv[1]*T$N,T$w,T$I),this.restore()},T$$.flush=function(){return 0},T$$.fillWords=function(T$$,T$b,T$u,T$Z,T$E,T$r){T$Z&&(this.font=T$Z),T$E&&(this.fillStyle=T$E);this.textBaseline="top",this.textAlign="left";for(var T$F=0,T$x=T$$.length;T$F<T$x;T$F++){var T$g=T$$[T$F];if(this.__fillText(T$g.char,T$g.x+T$b,T$g.y+T$u),1===T$r){var T$H=T$g.height,T$w=.5*T$g.style.letterSpacing;T$w||(T$w=0),this.beginPath(),this.strokeStyle=T$E,this.lineWidth=1,this.moveTo(T$b+T$g.x-T$w+.5,T$u+T$g.y+T$H+.5),this.lineTo(T$b+T$g.x+T$g.width+T$w+.5,T$u+T$g.y+T$H+.5),this.stroke()}}},T$$.fillBorderWords=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){T$Z&&(this.font=T$Z),T$E&&(this.fillStyle=T$E),this.textBaseline="top",this.lineWidth=T$F,this.textAlign="left",this.strokeStyle=T$r;for(var T$x=0,T$g=T$$.length;T$x<T$g;T$x++){var T$H=T$$[T$x];this.__strokeText(T$H.char,T$H.x+T$b,T$H.y+T$u),this.__fillText(T$H.char,T$H.x+T$b,T$H.y+T$u)}},T$$.destroy=function(){this.canvas.width=this.canvas.height=0},T$$.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},T$$.drawCurves=function(T$$,T$b,T$u){this.beginPath(),this.strokeStyle=T$u[3],this.lineWidth=T$u[4];var T$Z=T$u[2];T$$+=T$u[0],T$b+=T$u[1],this.moveTo(T$$+T$Z[0],T$b+T$Z[1]);for(var T$E=2,T$r=T$Z.length;T$E<T$r;)this.quadraticCurveTo(T$$+T$Z[T$E++],T$b+T$Z[T$E++],T$$+T$Z[T$E++],T$b+T$Z[T$E++]);this.stroke()},T$x.__init__=function(T$b){var T$u=laya.resource.Context.prototype;if(!(T$b=T$b||CanvasRenderingContext2D.prototype).inited){T$b.inited=!0,T$b.__fillText=T$b.fillText,T$b.__fillRect=T$b.fillRect,T$b.__strokeText=T$b.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(T$$){T$b[T$$]=T$u[T$$]})}},T$x.replaceCanvasGetSet=function(T$$,T$b){var T$u=Object.getOwnPropertyDescriptor(T$$,T$b);if(!T$u||!T$u.configurable)return!1;var T$Z,T$E={};for(T$Z in T$u)"set"!=T$Z&&(T$E[T$Z]=T$u[T$Z]);var T$r=T$u.set;return T$E.set=function(T$$){T$r.call(this,T$$);var T$b=this.getContext("2d");T$b&&"__reset"in T$b&&T$b.__reset()},Object.defineProperty(T$$,T$b,T$E),!0},T$x.replaceGetSet=function(T$$,T$b){var T$u=Object.getOwnPropertyDescriptor(T$$,T$b);if(!T$u||!T$u.configurable)return!1;var T$Z,T$E={};for(T$Z in T$u)"set"!=T$Z&&(T$E[T$Z]=T$u[T$Z]);var T$r=T$u.set,T$F="___"+T$b+"__";return T$x.newKeys.push(T$F),T$E.set=function(T$$){T$$!=this[T$F]&&(this[T$F]=T$$,T$r.call(this,T$$))},Object.defineProperty(T$$,T$b,T$E),!0},T$x._default=new T$x,T$x.newKeys=[],T$g(T$x,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),T$x}(),T$X=function(){function T$r(T$$){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++T$r._uniqueIDCounter,this._name=T$$||"Content Manager",T$r._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,T$r._resourceManagers.push(this),this._resources=[],this._records={}}T$w(T$r,"laya.resource.ResourceManager");var T$$=T$r.prototype;return T$z.imps(T$$,{"laya.resource.IDispose":!0}),T$$.getResourceByIndex=function(T$$){return this._resources[T$$]},T$$.getResourcesLength=function(){return this._resources.length},T$$.addResource=function(T$$){return T$$.resourceManager&&T$$.resourceManager.removeResource(T$$),-1===this._resources.indexOf(T$$)&&((T$$._resourceManager=this)._resources.push(T$$),this.addRecord(T$$.uri,T$$.__className,T$$.memorySize),this.addSize(T$$.memorySize),!0)},T$$.removeResource=function(T$$){var T$b=this._resources.indexOf(T$$);return-1!==T$b&&(this._resources.splice(T$b,1),T$$._resourceManager=null,this._memorySize-=T$$.memorySize,this.addRecord(T$$.uri,T$$.__className,-T$$.memorySize),!0)},T$$.unload=function(){for(var T$$=this._resources.slice(0,this._resources.length),T$b=0;T$b<T$$.length;T$b++){T$$[T$b].destroy()}T$$.length=0},T$$.dispose=function(){if(this===T$r._systemResourceManager)throw new Error("systemResourceManager不能被释放！");T$r._resourceManagers.splice(T$r._resourceManagers.indexOf(this),1),T$r._isResourceManagersSorted=!1;for(var T$$=this._resources.slice(0,this._resources.length),T$b=0;T$b<T$$.length;T$b++){var T$u=T$$[T$b];T$u.resourceManager.removeResource(T$u),T$u.destroy()}T$$.length=0},T$$.addSize=function(T$$){T$$&&(this.autoRelease&&0<T$$&&this._memorySize+T$$>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=T$$)},T$$.addRecord=function(T$$,T$b,T$u){DEBUG&&T$u&&!T$$&&console.error(T$$,T$b,T$u)},T$$.garbageCollection=function(T$$){var T$b=this._resources;(T$b=T$b.slice()).sort(function(T$$,T$b){if(!T$$||!T$b)throw new Error("a或b不能为空！");return T$$.released&&T$b.released?0:T$$.released?1:T$b.released?-1:T$$._lastUseFrameCount-T$b._lastUseFrameCount});for(var T$u=T$A.loopCount,T$Z=0,T$E=T$b.length;T$Z<T$E;T$Z++){var T$r=T$b[T$Z];if(!(1<T$u-T$r._lastUseFrameCount))return void(this._memorySize>=T$$&&(this._isOverflow=!0));if(T$r.releaseResource(),this._memorySize<T$$)return void(this._isOverflow=!1)}},T$D(0,T$$,"id",function(){return this._id}),T$D(0,T$$,"name",function(){return this._name},function(T$$){!T$$&&""===T$$||this._name===T$$||(this._name=T$$,T$r._isResourceManagersSorted=!1)}),T$D(0,T$$,"memorySize",function(){return this._memorySize}),T$D(0,T$$,"records",function(){return this._records}),T$D(1,T$r,"systemResourceManager",function(){return T$r._systemResourceManager}),T$r.__init__=function(){T$r.currentResourceManager=T$r.systemResourceManager},T$r.getLoadedResourceManagerByIndex=function(T$$){return T$r._resourceManagers[T$$]},T$r.getLoadedResourceManagersCount=function(){return T$r._resourceManagers.length},T$r.recreateContentManagers=function(T$$){void 0===T$$&&(T$$=!1);for(var T$b=T$r.currentResourceManager,T$u=0;T$u<T$r._resourceManagers.length;T$u++){T$r.currentResourceManager=T$r._resourceManagers[T$u];for(var T$Z=0;T$Z<T$r.currentResourceManager._resources.length;T$Z++)T$r.currentResourceManager._resources[T$Z].releaseResource(T$$),T$r.currentResourceManager._resources[T$Z].activeResource(T$$)}T$r.currentResourceManager=T$b},T$r.releaseContentManagers=function(T$$){void 0===T$$&&(T$$=!1);for(var T$b=T$r.currentResourceManager,T$u=0;T$u<T$r._resourceManagers.length;T$u++){T$r.currentResourceManager=T$r._resourceManagers[T$u];for(var T$Z=0;T$Z<T$r.currentResourceManager._resources.length;T$Z++){var T$E=T$r.currentResourceManager._resources[T$Z];!T$E.released&&T$E.releaseResource(T$$)}}T$r.currentResourceManager=T$b},T$r._uniqueIDCounter=0,T$r._isResourceManagersSorted=!1,T$r._resourceManagers=[],T$g(T$r,["_systemResourceManager",function(){return this._systemResourceManager=new T$r("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=T$r._systemResourceManager}]),T$r}(),T$s=(function(){function T$$(){}T$w(T$$,"laya.system.System"),T$$.changeDefinition=function(T$$,T$b){T$z[T$$]=T$b;var T$u=T$$+"=classObj";T$z._runScript(T$u)},T$$.__init__=function(){T$Y.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function T$u(){}return T$w(T$u,"laya.utils.Browser"),T$D(1,T$u,"pixelRatio",function(){return T$u.__init__(),-1<T$u.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:T$O.getPixelRatio()}),T$D(1,T$u,"height",function(){return T$u.__init__(),(T$z.stage&&T$z.stage.canvasRotation?T$u.clientWidth:T$u.clientHeight)*T$u.pixelRatio}),T$D(1,T$u,"clientWidth",function(){return T$u.__init__(),T$u.window.innerWidth||T$u.document.body.clientWidth}),T$D(1,T$u,"window",function(){return T$u.__init__(),T$u._window}),T$D(1,T$u,"clientHeight",function(){return T$u.__init__(),T$u.window.innerHeight||T$u.document.body.clientHeight||T$u.document.documentElement.clientHeight}),T$D(1,T$u,"width",function(){return T$u.__init__(),(T$z.stage&&T$z.stage.canvasRotation?T$u.clientHeight:T$u.clientWidth)*T$u.pixelRatio}),T$D(1,T$u,"container",function(){return T$u.__init__(),T$u._container||((T$u._container=T$u.createElement("div")).id="layaContainer",T$u.document.body.appendChild(T$u._container)),T$u._container},function(T$$){T$u._container=T$$}),T$D(1,T$u,"document",function(){return T$u.__init__(),T$u._document}),T$u.__init__=function(){if(!T$u._window){T$u._window=T$O.getWindow(),T$u._document=T$u.window.document,T$u._window.addEventListener("message",function(T$$){laya.utils.Browser._onMessage(T$$)},!1),T$u.document.__createElement=T$u.document.createElement,T$F.requestAnimationFrame=T$F.requestAnimationFrame||T$F.webkitRequestAnimationFrame||T$F.mozRequestAnimationFrame||T$F.oRequestAnimationFrame||T$F.msRequestAnimationFrame||function(T$$){return T$F.setTimeout(T$$,1e3/60)};var T$$=T$F.document.body.style;T$$["-webkit-user-select"]="none",T$$["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",T$u.userAgent=T$u.window.navigator.userAgent,T$u.onIOS=!!(T$u.u=T$u.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),T$u.onMobile=-1<T$u.u.indexOf("Mobile"),T$u.onIPhone=-1<T$u.u.indexOf("iPhone"),T$u.onMac=-1<T$u.u.indexOf("Mac OS X"),T$u.onIPad=-1<T$u.u.indexOf("iPad"),T$u.onAndroid=-1<T$u.u.indexOf("Android")||-1<T$u.u.indexOf("Adr"),T$u.onWP=-1<T$u.u.indexOf("Windows Phone"),T$u.onQQBrowser=-1<T$u.u.indexOf("QQBrowser"),T$u.onMQQBrowser=-1<T$u.u.indexOf("MQQBrowser")||-1<T$u.u.indexOf("Mobile")&&-1<T$u.u.indexOf("QQ"),T$u.onIE=!!T$u.window.ActiveXObject||"ActiveXObject"in T$u.window,T$u.onWeiXin=-1<T$u.u.indexOf("MicroMessenger"),T$u.onPC=!T$u.onMobile,T$u.onSafari=-1<T$u.u.indexOf("Safari"),T$u.onFirefox=-1<T$u.u.indexOf("Firefox"),T$u.onEdge=-1<T$u.u.indexOf("Edge"),T$u.onMiniGame=-1<T$u.u.indexOf("MiniGame"),T$u.onLimixiu=-1<T$u.u.indexOf("limixiu"),T$u.httpProtocol="http:"==T$u.window.location.protocol,T$u.onMiniGame&&null==T$u.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),T$u.webAudioEnabled=!!(T$u.window.AudioContext||T$u.window.webkitAudioContext||T$u.window.mozAudioContext),T$u.soundType=T$u.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",T$E$=T$u.webAudioEnabled?T$r$:T$u$,T$u.webAudioEnabled&&T$r$.initWebAudio(),T$u$._initMusicAudio(),T$u.enableTouch="ontouchstart"in T$F||T$F.DocumentTouch&&T$b instanceof DocumentTouch,T$F.focus(),T$K._soundClass=T$E$,T$K._musicClass=T$u$,T$Y._mainCanvas=T$Y._mainCanvas||T$y$.create("2D"),T$u.canvas||(T$u.canvas=T$y$.create("2D"),T$u.context=T$u.canvas.getContext("2d"))}},T$u._onMessage=function(T$$){if(T$$.data&&"size"==T$$.data.name){if(T$u.window.innerWidth=T$$.data.width,T$u.window.innerHeight=T$$.data.height,T$u.window.__innerHeight=T$$.data.clientHeight,!T$u.document.createEvent)return void console.warn("no document.createEvent");var T$b=T$u.document.createEvent("HTMLEvents");return T$b.initEvent("resize",!1,!1),void T$u.window.dispatchEvent(T$b)}},T$u.createElement=function(T$$){return T$u.__init__(),T$u.document.__createElement(T$$)},T$u.getElementById=function(T$$){return T$u.__init__(),T$u.document.getElementById(T$$)},T$u.removeElement=function(T$$){T$$&&T$$.parentNode&&T$$.parentNode.removeChild(T$$)},T$u.now=function(){return T$O.now()},T$u._window=null,T$u._document=null,T$u._container=null,T$u.userAgent=null,T$u.u=null,T$u.onIOS=!1,T$u.onMac=!1,T$u.onMobile=!1,T$u.onIPhone=!1,T$u.onIPad=!1,T$u.onAndroid=!1,T$u.onWP=!1,T$u.onQQBrowser=!1,T$u.onMQQBrowser=!1,T$u.onSafari=!1,T$u.onFirefox=!1,T$u.onEdge=!1,T$u.onIE=!1,T$u.onWeiXin=!1,T$u.onMiniGame=!1,T$u.onLimixiu=!1,T$u.onPC=!1,T$u.httpProtocol=!1,T$u.webAudioEnabled=!1,T$u.soundType=null,T$u.enableTouch=!1,T$u.canvas=null,T$u.context=null,T$u.__init$=function(){},T$u}()),T$m=function(){function T$b(T$$){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,T$$?(this._u8d_=new Uint8Array(T$$),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}T$w(T$b,"laya.utils.Byte");var T$$=T$b.prototype;return T$$.___resizeBuffer=function(T$b){try{var T$$=new Uint8Array(T$b);null!=this._u8d_&&(this._u8d_.length<=T$b?T$$.set(this._u8d_):T$$.set(this._u8d_.subarray(0,T$b))),this._u8d_=T$$,this._d_=new DataView(T$$.buffer)}catch(T$$){throw"___resizeBuffer err:"+T$b}},T$$.getString=function(){return this.rUTF(this.getUint16())},T$$.getFloat32Array=function(T$$,T$b){var T$u=T$$+T$b;T$u=T$u>this._length?this._length:T$u;var T$Z=new Float32Array(this._d_.buffer.slice(T$$,T$u));return this._pos_=T$u,T$Z},T$$.getUint8Array=function(T$$,T$b){var T$u=T$$+T$b;T$u=T$u>this._length?this._length:T$u;var T$Z=new Uint8Array(this._d_.buffer.slice(T$$,T$u));return this._pos_=T$u,T$Z},T$$.getInt16Array=function(T$$,T$b){var T$u=T$$+T$b;T$u=T$u>this._length?this._length:T$u;var T$Z=new Int16Array(this._d_.buffer.slice(T$$,T$u));return this._pos_=T$u,T$Z},T$$.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var T$$=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,T$$},T$$.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var T$$=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,T$$},T$$.writeFloat32=function(T$$){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,T$$,this._xd_),this._pos_+=4},T$$.writeFloat64=function(T$$){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,T$$,this._xd_),this._pos_+=8},T$$.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var T$$=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,T$$},T$$.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var T$$=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,T$$},T$$.writeInt32=function(T$$){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,T$$,this._xd_),this._pos_+=4},T$$.writeUint32=function(T$$){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,T$$,this._xd_),this._pos_+=4},T$$.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var T$$=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,T$$},T$$.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var T$$=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,T$$},T$$.writeUint16=function(T$$){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,T$$,this._xd_),this._pos_+=2},T$$.writeInt16=function(T$$){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,T$$,this._xd_),this._pos_+=2},T$$.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},T$$.writeUint8=function(T$$){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,T$$),this._pos_++},T$$._getUInt8=function(T$$){return this._d_.getUint8(T$$)},T$$._getUint16=function(T$$){return this._d_.getUint16(T$$,this._xd_)},T$$._getMatrix=function(){return new T$V(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},T$$.rUTF=function(T$$){for(var T$b=[],T$u=this._pos_+T$$,T$Z=0,T$E=0,T$r=0,T$F=String.fromCharCode,T$x=this._u8d_;this._pos_<T$u;)(T$Z=T$x[this._pos_++])<128?0!=T$Z&&T$b.push(T$F(T$Z)):T$Z<224?T$b.push(T$F((63&T$Z)<<6|127&T$x[this._pos_++])):T$Z<240?(T$E=T$x[this._pos_++],T$b.push(T$F((31&T$Z)<<12|(127&T$E)<<6|127&T$x[this._pos_++]))):(T$E=T$x[this._pos_++],T$r=T$x[this._pos_++],T$b.push(T$F((15&T$Z)<<18|(127&T$E)<<12|T$r<<6&127|127&T$x[this._pos_++]))),0;return T$b.join("")},T$$.getCustomString=function(T$$){for(var T$b=[],T$u=0,T$Z=0,T$E=0,T$r=String.fromCharCode,T$F=this._u8d_;0<T$$;)if((T$Z=T$F[this._pos_])<128)T$b.push(T$r(T$Z)),this._pos_++,T$$--;else for(T$u=T$Z-128,this._pos_++,T$$-=T$u;0<T$u;)T$Z=T$F[this._pos_++],T$E=T$F[this._pos_++],T$b.push(T$r(T$E<<8|T$Z)),T$u--;return T$b.join("")},T$$.clear=function(){this._pos_=0,this.length=0},T$$.__getBuffer=function(){return this._d_.buffer},T$$.writeUTFBytes=function(T$$){for(var T$b=0,T$u=(T$$+="").length;T$b<T$u;T$b++){var T$Z=T$$.charCodeAt(T$b);T$Z<=127?this.writeByte(T$Z):T$Z<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|T$Z>>6,128|63&T$Z],this._pos_),this._pos_+=2):T$Z<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|T$Z>>12,128|T$Z>>6&63,128|63&T$Z],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|T$Z>>18,128|T$Z>>12&63,128|T$Z>>6&63,128|63&T$Z],this._pos_),this._pos_+=4)}},T$$.writeUTFString=function(T$$){var T$b=this.pos;this.writeUint16(1),this.writeUTFBytes(T$$);var T$u=this.pos-T$b-2;if(65536<=T$u)throw"writeUTFString byte len more than 65536";this._d_.setUint16(T$b,T$u,this._xd_)},T$$.readUTFString=function(){return this.readUTFBytes(this.getUint16())},T$$.getUTFString=function(){return this.readUTFString()},T$$.readUTFBytes=function(T$$){if(void 0===T$$&&(T$$=-1),0==T$$)return"";var T$b=this.bytesAvailable;if(T$b<T$$)throw"readUTFBytes error - Out of bounds";return T$$=0<T$$?T$$:T$b,this.rUTF(T$$)},T$$.getUTFBytes=function(T$$){return void 0===T$$&&(T$$=-1),this.readUTFBytes(T$$)},T$$.writeByte=function(T$$){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,T$$),this._pos_+=1},T$$.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},T$$.getByte=function(){return this.readByte()},T$$.ensureWrite=function(T$$){this._length<T$$&&(this._length=T$$),this._allocated_<T$$&&(this.length=T$$)},T$$.writeArrayBuffer=function(T$$,T$b,T$u){if(void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),T$b<0||T$u<0)throw"writeArrayBuffer error - Out of bounds";0==T$u&&(T$u=T$$.byteLength-T$b),this.ensureWrite(this._pos_+T$u);var T$Z=new Uint8Array(T$$);this._u8d_.set(T$Z.subarray(T$b,T$b+T$u),this._pos_),this._pos_+=T$u},T$D(0,T$$,"buffer",function(){var T$$=this._d_.buffer;return T$$.byteLength==this.length?T$$:T$$.slice(0,this.length)}),T$D(0,T$$,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(T$$){this._xd_="littleEndian"==T$$}),T$D(0,T$$,"length",function(){return this._length},function(T$$){this._allocated_<T$$?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(T$$,2*this._allocated_))):this._allocated_>T$$&&this.___resizeBuffer(this._allocated_=T$$),this._length=T$$}),T$D(0,T$$,"pos",function(){return this._pos_},function(T$$){this._pos_=T$$}),T$D(0,T$$,"bytesAvailable",function(){return this._length-this._pos_}),T$b.getSystemEndian=function(){if(!T$b._sysEndian){var T$$=new ArrayBuffer(2);new DataView(T$$).setInt16(0,256,!0),T$b._sysEndian=256===new Int16Array(T$$)[0]?"littleEndian":"bigEndian"}return T$b._sysEndian},T$b.BIG_ENDIAN="bigEndian",T$b.LITTLE_ENDIAN="littleEndian",T$b._sysEndian=null,T$b}(),T$n=function(){function T$E(){}return T$w(T$E,"laya.utils.CacheManager"),T$E.regCacheByFunction=function(T$$,T$b){var T$u;T$E.unRegCacheByFunction(T$$,T$b),T$u={tryDispose:T$$,getCacheList:T$b},T$E._cacheList.push(T$u)},T$E.unRegCacheByFunction=function(T$$,T$b){var T$u,T$Z=0;for(T$u=T$E._cacheList.length,T$Z=0;T$Z<T$u;T$Z++)if(T$E._cacheList[T$Z].tryDispose==T$$&&T$E._cacheList[T$Z].getCacheList==T$b)return void T$E._cacheList.splice(T$Z,1)},T$E.forceDispose=function(){var T$$=0,T$b=T$E._cacheList.length;for(T$$=0;T$$<T$b;T$$++)T$E._cacheList[T$$].tryDispose(!0)},T$E.beginCheck=function(T$$){void 0===T$$&&(T$$=15e3),T$z.timer.loop(T$$,null,T$E._checkLoop)},T$E.stopCheck=function(){T$z.timer.clear(null,T$E._checkLoop)},T$E._checkLoop=function(){var T$$=T$E._cacheList;if(!(T$$.length<1)){var T$b,T$u=T$s.now(),T$Z=0;for(T$b=T$Z=T$$.length;0<T$Z&&(T$$[T$E._index=++T$E._index%T$b].tryDispose(!1),!(T$s.now()-T$u>T$E.loopTimeLimit));)T$Z--}},T$E.loopTimeLimit=2,T$E._cacheList=[],T$E._index=0,T$E}(),T$c=function(){function T$N(){}return T$w(T$N,"laya.utils.ClassUtils"),T$N.regClass=function(T$$,T$b){T$N._classMap[T$$]=T$b},T$N.getRegClass=function(T$$){return T$N._classMap[T$$]},T$N.getInstance=function(T$$){var T$b=T$N.getClass(T$$);return T$b?new T$b:(console.warn("[error] Undefined class:",T$$),null)},T$N.createByJson=function(T$$,T$b,T$u,T$Z,T$E){"string"==typeof T$$&&(T$$=JSON.parse(T$$));var T$r=T$$.props;if(!T$b&&!(T$b=T$E?T$E.runWith(T$$):T$N.getInstance(T$r.runtime||T$$.type)))return null;var T$F=T$$.child;if(T$F)for(var T$x=0,T$g=T$F.length;T$x<T$g;T$x++){var T$H=T$F[T$x];if("render"!==T$H.props.name&&"render"!==T$H.props.renderType||!T$b._$set_itemRender)if("Graphic"==T$H.type)T$N.addGraphicsToSprite(T$H,T$b);else if(T$N.isDrawType(T$H.type))T$N.addGraphicToSprite(T$H,T$b,!0);else{var T$w=T$N.createByJson(T$H,null,T$u,T$Z,T$E);"Script"==T$H.type?T$w.hasOwnProperty("owner")?T$w.owner=T$b:T$w.hasOwnProperty("target")&&(T$w.target=T$b):"mask"==T$H.props.renderType?T$b.mask=T$w:T$b.addChild(T$w)}else T$b.itemRender=T$H}if(T$r)for(var T$I in T$r){var T$o=T$r[T$I];"var"===T$I&&T$u?T$u[T$o]=T$b:T$o instanceof Array&&"function"==typeof T$b[T$I]?T$b[T$I].apply(T$b,T$o):T$b[T$I]=T$o}return T$Z&&T$$.customProps&&T$Z.runWith([T$b,T$$]),T$b.created&&T$b.created(),T$b},T$N.addGraphicsToSprite=function(T$$,T$b){var T$u;if((T$u=T$$.child)&&!(T$u.length<1)){var T$Z;T$Z=T$N._getGraphicsFromSprite(T$$,T$b);var T$E=0,T$r=0;T$$.props&&(T$E=T$N._getObjVar(T$$.props,"x",0),T$r=T$N._getObjVar(T$$.props,"y",0)),0!=T$E&&0!=T$r&&T$Z.translate(T$E,T$r);var T$F,T$x=0;for(T$F=T$u.length,T$x=0;T$x<T$F;T$x++)T$N._addGraphicToGraphics(T$u[T$x],T$Z);0!=T$E&&0!=T$r&&T$Z.translate(-T$E,-T$r)}},T$N.addGraphicToSprite=function(T$$,T$b,T$u){var T$Z;void 0===T$u&&(T$u=!1),T$Z=T$u?T$N._getGraphicsFromSprite(T$$,T$b):T$b.graphics,T$N._addGraphicToGraphics(T$$,T$Z)},T$N._getGraphicsFromSprite=function(T$$,T$b){var T$u,T$Z;if(!T$$||!T$$.props)return T$b.graphics;switch(T$Z=T$$.props.renderType){case"hit":case"unHit":var T$E;T$b.hitArea||(T$b.hitArea=new T$W),(T$E=T$b.hitArea)[T$Z]||(T$E[T$Z]=new T$o),T$u=T$E[T$Z]}return T$u||(T$u=T$b.graphics),T$u},T$N._getTransformData=function(T$$){var T$b;(T$$.hasOwnProperty("pivotX")||T$$.hasOwnProperty("pivotY"))&&(T$b=T$b||new T$V).translate(-T$N._getObjVar(T$$,"pivotX",0),-T$N._getObjVar(T$$,"pivotY",0));var T$u=T$N._getObjVar(T$$,"scaleX",1),T$Z=T$N._getObjVar(T$$,"scaleY",1),T$E=T$N._getObjVar(T$$,"rotation",0);T$N._getObjVar(T$$,"skewX",0),T$N._getObjVar(T$$,"skewY",0);return 1==T$u&&1==T$Z&&0==T$E||((T$b=T$b||new T$V).scale(T$u,T$Z),T$b.rotate(.0174532922222222*T$E)),T$b},T$N._addGraphicToGraphics=function(T$$,T$b){var T$u,T$Z;if((T$u=T$$.props)&&(T$Z=T$N.DrawTypeDic[T$$.type])){var T$E,T$r;T$E=T$b;var T$F=T$N._getParams(T$u,T$Z[1],T$Z[2],T$Z[3]);((T$r=T$N._tM)||1!=T$N._alpha)&&(T$E.save(),T$r&&T$E.transform(T$r),1!=T$N._alpha&&T$E.alpha(T$N._alpha)),T$E[T$Z[0]].apply(T$E,T$F),(T$r||1!=T$N._alpha)&&T$E.restore()}},T$N._adptLineData=function(T$$){return T$$[2]=parseFloat(T$$[0])+parseFloat(T$$[2]),T$$[3]=parseFloat(T$$[1])+parseFloat(T$$[3]),T$$},T$N._adptTextureData=function(T$$){return T$$[0]=T$x$.getRes(T$$[0]),T$$},T$N._adptLinesData=function(T$$){return T$$[2]=T$N._getPointListByStr(T$$[2]),T$$},T$N.isDrawType=function(T$$){return"Image"!=T$$&&T$N.DrawTypeDic.hasOwnProperty(T$$)},T$N._getParams=function(T$$,T$b,T$u,T$Z){var T$E;void 0===T$u&&(T$u=0),(T$E=T$N._temParam).length=T$b.length;var T$r,T$F,T$x=0;for(T$r=T$b.length,T$x=0;T$x<T$r;T$x++)T$E[T$x]=T$N._getObjVar(T$$,T$b[T$x][0],T$b[T$x][1]);return T$N._alpha=T$N._getObjVar(T$$,"alpha",1),T$F=T$N._getTransformData(T$$),T$N._tM=T$F?(T$u||(T$u=0),T$F.translate(T$E[T$u],T$E[T$u+1]),T$E[T$u]=T$E[T$u+1]=0,T$F):null,T$Z&&T$N[T$Z]&&(T$E=T$N[T$Z](T$E)),T$E},T$N._getPointListByStr=function(T$$){var T$b,T$u,T$Z=0;for(T$u=(T$b=T$$.split(",")).length,T$Z=0;T$Z<T$u;T$Z++)T$b[T$Z]=parseFloat(T$b[T$Z]);return T$b},T$N._getObjVar=function(T$$,T$b,T$u){return T$$.hasOwnProperty(T$b)?T$$[T$b]:T$u},T$N._temParam=[],T$N._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},T$N.getClass=function(T$$){var T$b=T$N._classMap[T$$]||T$$;return"string"==typeof T$b?T$z.__classmap[T$b]:T$b},T$N._tM=null,T$N._alpha=NaN,T$g(T$N,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),T$N}(),T$J=function(){function T$r(T$$){if(this._color=[],"string"==typeof T$$){null===(this.strColor=T$$)&&(T$$="#000000"),"#"==T$$.charAt(0)&&(T$$=T$$.substr(1));var T$b=T$$.length;if(3==T$b||4==T$b){for(var T$u="",T$Z=0;T$Z<T$b;T$Z++)T$u+=T$$[T$Z]+T$$[T$Z];T$$=T$u}var T$E=this.numColor=parseInt(T$$,16);if(8==T$$.length)return void(this._color=[parseInt(T$$.substr(0,2),16)/255,((16711680&T$E)>>16)/255,((65280&T$E)>>8)/255,(255&T$E)/255])}else T$E=this.numColor=T$$,this.strColor=T$d.toHexColor(T$E);this._color=[((16711680&T$E)>>16)/255,((65280&T$E)>>8)/255,(255&T$E)/255,1],this._color.__id=++T$r._COLODID}return T$w(T$r,"laya.utils.Color"),T$r._initDefault=function(){for(var T$$ in T$r._DEFAULT={},T$r._COLOR_MAP)T$r._SAVE[T$$]=T$r._DEFAULT[T$$]=new T$r(T$r._COLOR_MAP[T$$]);return T$r._DEFAULT},T$r._initSaveMap=function(){for(var T$$ in T$r._SAVE_SIZE=0,T$r._SAVE={},T$r._DEFAULT)T$r._SAVE[T$$]=T$r._DEFAULT[T$$]},T$r.create=function(T$$){var T$b=T$r._SAVE[T$$+""];return null!=T$b?T$b:(T$r._SAVE_SIZE<1e3||T$r._initSaveMap(),T$r._SAVE[T$$+""]=new T$r(T$$))},T$r._SAVE={},T$r._SAVE_SIZE=0,T$r._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},T$r._DEFAULT=T$r._initDefault(),T$r._COLODID=1,T$r}(),T$f=(function(){function T$$(){this._values=[],this._keys=[]}T$w(T$$,"laya.utils.Dictionary");var T$b=T$$.prototype;T$b.set=function(T$$,T$b){var T$u=this.indexOf(T$$);0<=T$u?this._values[T$u]=T$b:(this._keys.push(T$$),this._values.push(T$b))},T$b.indexOf=function(T$$){var T$b=this._keys.indexOf(T$$);return 0<=T$b?T$b:(T$$="string"==typeof T$$?Number(T$$):"number"==typeof T$$?T$$.toString():T$$,this._keys.indexOf(T$$))},T$b.get=function(T$$){var T$b=this.indexOf(T$$);return T$b<0?null:this._values[T$b]},T$b.remove=function(T$$){var T$b=this.indexOf(T$$);return 0<=T$b&&(this._keys.splice(T$b,1),this._values.splice(T$b,1),!0)},T$b.clear=function(){this._values.length=0,this._keys.length=0},T$D(0,T$b,"values",function(){return this._values}),T$D(0,T$b,"keys",function(){return this._keys})}(),function(){function T$$(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}T$w(T$$,"laya.utils.Dragging");var T$b=T$$.prototype;return T$b.start=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){void 0===T$x&&(T$x=.92),this.clearTimer(),this.target=T$$,this.area=T$b,this.hasInertia=T$u,this.elasticDistance=T$b?T$Z:0,this.elasticBackTime=T$E,this.data=T$r,this._disableMouseEvent=T$F,this.ratio=T$x,1!=T$$.globalScaleX||1!=T$$.globalScaleY?this._parent=T$$.parent:this._parent=T$z.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,T$z.stage.on("mouseup",this,this.onStageMouseUp),T$z.stage.on("mouseout",this,this.onStageMouseUp),T$z.timer.frameLoop(1,this,this.loop)},T$b.clearTimer=function(){T$z.timer.clear(this,this.loop),T$z.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},T$b.stop=function(){this._dragging&&(T$e.instance.disableMouseEvent=!1,T$z.stage.off("mouseup",this,this.onStageMouseUp),T$z.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},T$b.loop=function(){var T$$=this._parent.getMousePoint(),T$b=T$$.x,T$u=T$$.y,T$Z=T$b-this._lastX,T$E=T$u-this._lastY;if(this._clickOnly){if(!(1<Math.abs(T$Z*T$z.stage._canvasTransform.getScaleX())||1<Math.abs(T$E*T$z.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),T$e.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(T$Z,T$E);0==T$Z&&0==T$E||(this._lastX=T$b,this._lastY=T$u,this.target.x+=T$Z*this._elasticRateX,this.target.y+=T$E*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},T$b.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var T$$=this.area.x-this.target.x;else T$$=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-T$$/this.elasticDistance),this.target.y<this.area.y)var T$b=this.area.y-this.target.y;else T$b=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-T$b/this.elasticDistance)}},T$b.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},T$b.onStageMouseUp=function(T$$){if(T$e.instance.disableMouseEvent=!1,T$z.stage.off("mouseup",this,this.onStageMouseUp),T$z.stage.off("mouseout",this,this.onStageMouseUp),T$z.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var T$b=this._offsets.length,T$u=Math.min(T$b,6),T$Z=this._offsets.length-T$u,T$E=T$b-1;T$Z<T$E;T$E--)this._offsetY+=this._offsets[T$E--],this._offsetX+=this._offsets[T$E];this._offsetX=this._offsetX/T$u*2,this._offsetY=this._offsetY/T$u*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),T$z.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},T$b.checkElastic=function(){var T$$=NaN,T$b=NaN;if(this.target.x<this.area.x?T$$=this.area.x:this.target.x>this.area.x+this.area.width&&(T$$=this.area.x+this.area.width),this.target.y<this.area.y?T$b=this.area.y:this.target.y>this.area.y+this.area.height&&(T$b=this.area.y+this.area.height),isNaN(T$$)&&isNaN(T$b))this.clear();else{var T$u={};isNaN(T$$)||(T$u.x=T$$),isNaN(T$b)||(T$u.y=T$b),this._tween=T$h.to(this.target,T$u,this.elasticBackTime,T$Q.sineOut,T$_.create(this,this.clear),0,!1,!1)}},T$b.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(T$z.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},T$b.clear=function(){if(this.target){this.clearTimer();var T$$=this.target;this.target=null,this._parent=null,T$$.event("dragend",this.data)}},T$$}()),T$Q=function(){function T$x(){}return T$w(T$x,"laya.utils.Ease"),T$x.linearNone=function(T$$,T$b,T$u,T$Z){return T$u*T$$/T$Z+T$b},T$x.linearIn=function(T$$,T$b,T$u,T$Z){return T$u*T$$/T$Z+T$b},T$x.linearInOut=function(T$$,T$b,T$u,T$Z){return T$u*T$$/T$Z+T$b},T$x.linearOut=function(T$$,T$b,T$u,T$Z){return T$u*T$$/T$Z+T$b},T$x.bounceIn=function(T$$,T$b,T$u,T$Z){return T$u-T$x.bounceOut(T$Z-T$$,0,T$u,T$Z)+T$b},T$x.bounceInOut=function(T$$,T$b,T$u,T$Z){return T$$<.5*T$Z?.5*T$x.bounceIn(2*T$$,0,T$u,T$Z)+T$b:.5*T$x.bounceOut(2*T$$-T$Z,0,T$u,T$Z)+.5*T$u+T$b},T$x.bounceOut=function(T$$,T$b,T$u,T$Z){return(T$$/=T$Z)<1/2.75?T$u*(7.5625*T$$*T$$)+T$b:T$$<2/2.75?T$u*(7.5625*(T$$-=1.5/2.75)*T$$+.75)+T$b:T$$<2.5/2.75?T$u*(7.5625*(T$$-=2.25/2.75)*T$$+.9375)+T$b:T$u*(7.5625*(T$$-=2.625/2.75)*T$$+.984375)+T$b},T$x.backIn=function(T$$,T$b,T$u,T$Z,T$E){return void 0===T$E&&(T$E=1.70158),T$u*(T$$/=T$Z)*T$$*((T$E+1)*T$$-T$E)+T$b},T$x.backInOut=function(T$$,T$b,T$u,T$Z,T$E){return void 0===T$E&&(T$E=1.70158),(T$$/=.5*T$Z)<1?.5*T$u*(T$$*T$$*((1+(T$E*=1.525))*T$$-T$E))+T$b:T$u/2*((T$$-=2)*T$$*((1+(T$E*=1.525))*T$$+T$E)+2)+T$b},T$x.backOut=function(T$$,T$b,T$u,T$Z,T$E){return void 0===T$E&&(T$E=1.70158),T$u*((T$$=T$$/T$Z-1)*T$$*((T$E+1)*T$$+T$E)+1)+T$b},T$x.elasticIn=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F;return void 0===T$E&&(T$E=0),void 0===T$r&&(T$r=0),0==T$$?T$b:1==(T$$/=T$Z)?T$b+T$u:(T$r||(T$r=.3*T$Z),T$F=!T$E||0<T$u&&T$E<T$u||T$u<0&&T$E<-T$u?(T$E=T$u,T$r/4):T$r/T$x.PI2*Math.asin(T$u/T$E),-T$E*Math.pow(2,10*(T$$-=1))*Math.sin((T$$*T$Z-T$F)*T$x.PI2/T$r)+T$b)},T$x.elasticInOut=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F;return void 0===T$E&&(T$E=0),void 0===T$r&&(T$r=0),0==T$$?T$b:2==(T$$/=.5*T$Z)?T$b+T$u:(T$r||(T$r=T$Z*(.3*1.5)),T$F=!T$E||0<T$u&&T$E<T$u||T$u<0&&T$E<-T$u?(T$E=T$u,T$r/4):T$r/T$x.PI2*Math.asin(T$u/T$E),T$$<1?T$E*Math.pow(2,10*(T$$-=1))*Math.sin((T$$*T$Z-T$F)*T$x.PI2/T$r)*-.5+T$b:T$E*Math.pow(2,-10*(T$$-=1))*Math.sin((T$$*T$Z-T$F)*T$x.PI2/T$r)*.5+T$u+T$b)},T$x.elasticOut=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F;return void 0===T$E&&(T$E=0),void 0===T$r&&(T$r=0),0==T$$?T$b:1==(T$$/=T$Z)?T$b+T$u:(T$r||(T$r=.3*T$Z),T$F=!T$E||0<T$u&&T$E<T$u||T$u<0&&T$E<-T$u?(T$E=T$u,T$r/4):T$r/T$x.PI2*Math.asin(T$u/T$E),T$E*Math.pow(2,-10*T$$)*Math.sin((T$$*T$Z-T$F)*T$x.PI2/T$r)+T$u+T$b)},T$x.strongIn=function(T$$,T$b,T$u,T$Z){return T$u*(T$$/=T$Z)*T$$*T$$*T$$*T$$+T$b},T$x.strongInOut=function(T$$,T$b,T$u,T$Z){return(T$$/=.5*T$Z)<1?.5*T$u*T$$*T$$*T$$*T$$*T$$+T$b:.5*T$u*((T$$-=2)*T$$*T$$*T$$*T$$+2)+T$b},T$x.strongOut=function(T$$,T$b,T$u,T$Z){return T$u*((T$$=T$$/T$Z-1)*T$$*T$$*T$$*T$$+1)+T$b},T$x.sineInOut=function(T$$,T$b,T$u,T$Z){return.5*-T$u*(Math.cos(Math.PI*T$$/T$Z)-1)+T$b},T$x.sineIn=function(T$$,T$b,T$u,T$Z){return-T$u*Math.cos(T$$/T$Z*T$x.HALF_PI)+T$u+T$b},T$x.sineOut=function(T$$,T$b,T$u,T$Z){return T$u*Math.sin(T$$/T$Z*T$x.HALF_PI)+T$b},T$x.quintIn=function(T$$,T$b,T$u,T$Z){return T$u*(T$$/=T$Z)*T$$*T$$*T$$*T$$+T$b},T$x.quintInOut=function(T$$,T$b,T$u,T$Z){return(T$$/=.5*T$Z)<1?.5*T$u*T$$*T$$*T$$*T$$*T$$+T$b:.5*T$u*((T$$-=2)*T$$*T$$*T$$*T$$+2)+T$b},T$x.quintOut=function(T$$,T$b,T$u,T$Z){return T$u*((T$$=T$$/T$Z-1)*T$$*T$$*T$$*T$$+1)+T$b},T$x.quartIn=function(T$$,T$b,T$u,T$Z){return T$u*(T$$/=T$Z)*T$$*T$$*T$$+T$b},T$x.quartInOut=function(T$$,T$b,T$u,T$Z){return(T$$/=.5*T$Z)<1?.5*T$u*T$$*T$$*T$$*T$$+T$b:.5*-T$u*((T$$-=2)*T$$*T$$*T$$-2)+T$b},T$x.quartOut=function(T$$,T$b,T$u,T$Z){return-T$u*((T$$=T$$/T$Z-1)*T$$*T$$*T$$-1)+T$b},T$x.cubicIn=function(T$$,T$b,T$u,T$Z){return T$u*(T$$/=T$Z)*T$$*T$$+T$b},T$x.cubicInOut=function(T$$,T$b,T$u,T$Z){return(T$$/=.5*T$Z)<1?.5*T$u*T$$*T$$*T$$+T$b:.5*T$u*((T$$-=2)*T$$*T$$+2)+T$b},T$x.cubicOut=function(T$$,T$b,T$u,T$Z){return T$u*((T$$=T$$/T$Z-1)*T$$*T$$+1)+T$b},T$x.quadIn=function(T$$,T$b,T$u,T$Z){return T$u*(T$$/=T$Z)*T$$+T$b},T$x.quadInOut=function(T$$,T$b,T$u,T$Z){return(T$$/=.5*T$Z)<1?.5*T$u*T$$*T$$+T$b:.5*-T$u*(--T$$*(T$$-2)-1)+T$b},T$x.quadOut=function(T$$,T$b,T$u,T$Z){return-T$u*(T$$/=T$Z)*(T$$-2)+T$b},T$x.expoIn=function(T$$,T$b,T$u,T$Z){return 0==T$$?T$b:T$u*Math.pow(2,10*(T$$/T$Z-1))+T$b-.001*T$u},T$x.expoInOut=function(T$$,T$b,T$u,T$Z){return 0==T$$?T$b:T$$==T$Z?T$b+T$u:(T$$/=.5*T$Z)<1?.5*T$u*Math.pow(2,10*(T$$-1))+T$b:.5*T$u*(2-Math.pow(2,-10*--T$$))+T$b},T$x.expoOut=function(T$$,T$b,T$u,T$Z){return T$$==T$Z?T$b+T$u:T$u*(1-Math.pow(2,-10*T$$/T$Z))+T$b},T$x.circIn=function(T$$,T$b,T$u,T$Z){return-T$u*(Math.sqrt(1-(T$$/=T$Z)*T$$)-1)+T$b},T$x.circInOut=function(T$$,T$b,T$u,T$Z){return(T$$/=.5*T$Z)<1?.5*-T$u*(Math.sqrt(1-T$$*T$$)-1)+T$b:.5*T$u*(Math.sqrt(1-(T$$-=2)*T$$)+1)+T$b},T$x.circOut=function(T$$,T$b,T$u,T$Z){return T$u*Math.sqrt(1-(T$$=T$$/T$Z-1)*T$$)+T$b},T$x.HALF_PI=.5*Math.PI,T$x.PI2=2*Math.PI,T$x}(),T$W=function(){function T$I(){this._hit=null,this._unHit=null}T$w(T$I,"laya.utils.HitArea");var T$$=T$I.prototype;return T$$.isHit=function(T$$,T$b){return!!T$I.isHitGraphic(T$$,T$b,this.hit)&&!T$I.isHitGraphic(T$$,T$b,this.unHit)},T$$.contains=function(T$$,T$b){return this.isHit(T$$,T$b)},T$D(0,T$$,"hit",function(){return this._hit||(this._hit=new T$o),this._hit},function(T$$){this._hit=T$$}),T$D(0,T$$,"unHit",function(){return this._unHit||(this._unHit=new T$o),this._unHit},function(T$$){this._unHit=T$$}),T$I.isHitGraphic=function(T$$,T$b,T$u){if(!T$u)return!1;var T$Z;if(!(T$Z=T$u.cmds)&&T$u._one&&((T$Z=T$I._cmds).length=1,T$Z[0]=T$u._one),!T$Z)return!1;var T$E,T$r,T$F=0;for(T$E=T$Z.length,T$F=0;T$F<T$E;T$F++)if(T$r=T$Z[T$F]){var T$x=T$Y._context;switch(T$r.callee){case T$x._translate:case 6:T$$-=T$r[0],T$b-=T$r[1]}if(T$I.isHitCmd(T$$,T$b,T$r))return!0}return!1},T$I.isHitCmd=function(T$$,T$b,T$u){if(!T$u)return!1;var T$Z=T$Y._context,T$E=!1;switch(T$u.callee){case T$Z._drawRect:case 13:T$I._rec.setTo(T$u[0],T$u[1],T$u[2],T$u[3]),T$E=T$I._rec.contains(T$$,T$b);break;case T$Z._drawCircle:case T$Z._fillCircle:case 14:T$E=(T$$-=T$u[0])*T$$+(T$b-=T$u[1])*T$b<T$u[2]*T$u[2];break;case T$Z._drawPoly:case 18:T$$-=T$u[0],T$b-=T$u[1],T$E=T$I.ptInPolygon(T$$,T$b,T$u[2])}return T$E},T$I.ptInPolygon=function(T$$,T$b,T$u){var T$Z;(T$Z=T$I._ptPoint).setTo(T$$,T$b);var T$E,T$r=0,T$F=NaN,T$x=NaN,T$g=NaN,T$H=NaN;T$E=T$u.length;for(var T$w=0;T$w<T$E;T$w+=2){if(T$F=T$u[T$w],T$x=T$u[T$w+1],T$g=T$u[(T$w+2)%T$E],T$x!=(T$H=T$u[(T$w+3)%T$E]))if(!(T$Z.y<Math.min(T$x,T$H)))if(!(T$Z.y>=Math.max(T$x,T$H)))(T$Z.y-T$x)*(T$g-T$F)/(T$H-T$x)+T$F>T$Z.x&&T$r++}return T$r%2==1},T$I._cmds=[],T$g(T$I,["_rec",function(){return this._rec=new T$a},"_ptPoint",function(){return this._ptPoint=new T$q}]),T$I}(),T$G=(function(){function T$E(T$$,T$b,T$u,T$Z){this.char=T$$,this.charNum=T$$.charCodeAt(0),this._x=this._y=0,this.width=T$b,this.height=T$u,this.style=T$Z,this.isWord=!T$E._isWordRegExp.test(T$$)}T$w(T$E,"laya.utils.HTMLChar");var T$$=T$E.prototype;T$z.imps(T$$,{"laya.display.ILayout":!0}),T$$.setSprite=function(T$$){this._sprite=T$$},T$$.getSprite=function(){return this._sprite},T$$._isChar=function(){return!0},T$$._getCSSStyle=function(){return this.style},T$D(0,T$$,"width",function(){return this._w},function(T$$){this._w=T$$}),T$D(0,T$$,"x",function(){return this._x},function(T$$){this._sprite&&(this._sprite.x=T$$),this._x=T$$}),T$D(0,T$$,"y",function(){return this._y},function(T$$){this._sprite&&(this._sprite.y=T$$),this._y=T$$}),T$D(0,T$$,"height",function(){return this._h},function(T$$){this._h=T$$}),T$E._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function T$b(){}T$w(T$b,"laya.utils.Log"),T$b.enable=function(){T$b._logdiv||(T$b._logdiv=T$s.window.document.createElement("div"),T$s.window.document.body.appendChild(T$b._logdiv),T$b._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},T$b.toggle=function(){var T$$=T$b._logdiv.style;"1px"==T$$.width?T$$.width=T$$.height="50%":T$$.width=T$$.height="1px"},T$b.print=function(T$$){T$b._logdiv&&(T$b.maxCount<=T$b._count&&T$b.clear(),T$b._count++,T$b._logdiv.innerText+=T$$+"\n",T$b._logdiv.scrollTop=T$b._logdiv.scrollHeight)},T$b.clear=function(){T$b._logdiv.innerText="",T$b._count=0},T$b._logdiv=null,T$b._count=0,T$b.maxCount=20}(),function(){function T$b(){}T$w(T$b,"laya.utils.Mouse"),T$D(1,T$b,"cursor",function(){return T$b._style.cursor},function(T$$){T$b._style.cursor=T$$}),T$b.hide=function(){"none"!=T$b.cursor&&(T$b._preCursor=T$b.cursor,T$b.cursor="none")},T$b.show=function(){"none"==T$b.cursor&&(T$b.cursor=T$b._preCursor?T$b._preCursor:"auto")},T$b._preCursor=null,T$g(T$b,["_style",function(){return this._style=T$s.document.body.style}])}(),function(){function T$r(){}return T$w(T$r,"laya.utils.Pool"),T$r.getPoolBySign=function(T$$){return T$r._poolDic[T$$]||(T$r._poolDic[T$$]=[])},T$r.clearBySign=function(T$$){T$r._poolDic[T$$]&&(T$r._poolDic[T$$].length=0)},T$r.recover=function(T$$,T$b){T$b.__InPool||(T$b.__InPool=!0,T$r.getPoolBySign(T$$).push(T$b))},T$r.getItemByClass=function(T$$,T$b){var T$u=T$r.getPoolBySign(T$$),T$Z=T$u.length?T$u.pop():new T$b;return T$Z.__InPool=!1,T$Z},T$r.getItemByCreateFun=function(T$$,T$b,T$u){var T$Z=T$r.getPoolBySign(T$$),T$E=T$Z.length?T$Z.pop():T$b.call(T$u);return T$E.__InPool=!1,T$E},T$r.getItem=function(T$$){var T$b=T$r.getPoolBySign(T$$),T$u=T$b.length?T$b.pop():null;return T$u&&(T$u.__InPool=!1),T$u},T$r._poolDic={},T$r.InPoolSign="__InPool",T$r}()),T$A=function(){function T$g(){}return T$w(T$g,"laya.utils.Stat"),T$D(1,T$g,"onclick",null,function(T$$){T$g._sp&&T$g._sp.on("click",T$g._sp,T$$),T$g._canvas&&(T$g._canvas.source.onclick=T$$,T$g._canvas.source.style.pointerEvents="")}),T$g.show=function(T$$,T$b,T$u){if(void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),!T$Y.isConchApp||T$Y.isConchWebGL){if(T$Y.isConchWebGL||T$s.onMiniGame||T$s.onLimixiu||(T$g._useCanvas=!0),T$g._show=!0,T$g._fpsData.length=60,T$g._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},T$g._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},T$g._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},T$g._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},T$Y.isWebGL)if(T$g._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},T$Y.is3DMode){if(T$g._view[0].title="FPS(3D)",T$g._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},T$g._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},T$g._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==T$u){var T$Z=8;T$g._view[T$Z++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},T$g._view[T$Z++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},T$g._view[T$Z++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},T$g._view[T$Z++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$g._view[T$Z++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$g._view[T$Z++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},T$g._view[T$Z++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},T$g._view[T$Z++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},T$g._view[T$Z++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==T$u){T$Z=8;T$g._view[T$Z++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},T$g._view[T$Z++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},T$g._view[T$Z++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},T$g._view[T$Z++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},T$g._view[T$Z++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},T$g._view[T$Z++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},T$g._view[T$Z++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else T$g._view[0].title="FPS(WebGL)",T$g._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else T$g._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};T$g._useCanvas?T$g.createUIPre(T$$,T$b):T$g.createUI(T$$,T$b),T$g.enable()}else T$s.window.conch.showFPS&&T$s.window.conch.showFPS(T$$,T$b)},T$g.createUIPre=function(T$$,T$b){var T$u=T$s.pixelRatio;T$g._width=170*T$u,T$g._vx=75*T$u,T$g._height=T$u*(12*T$g._view.length+3*T$u)+4,T$g._fontSize=12*T$u;for(var T$Z=0;T$Z<T$g._view.length;T$Z++)T$g._view[T$Z].x=4,T$g._view[T$Z].y=T$Z*T$g._fontSize+2*T$u;T$g._canvas||((T$g._canvas=new T$y$("2D")).size(T$g._width,T$g._height),(T$g._ctx=T$g._canvas.getContext("2d")).textBaseline="top",T$g._ctx.font=T$g._fontSize+"px Sans-serif",T$g._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+T$$+"px;top:"+T$b+"px;width:"+T$g._width/T$u+"px;height:"+T$g._height/T$u+"px;"),T$g._first=!0,T$g.loop(),T$g._first=!1,T$s.container.appendChild(T$g._canvas.source)},T$g.createUI=function(T$$,T$b){var T$u=T$g._sp,T$Z=T$s.pixelRatio;T$u||(T$u=new T$I$,(T$g._leftText=new T$L$).pos(5,5),T$g._leftText.color="#ffffff",T$u.addChild(T$g._leftText),(T$g._txt=new T$L$).pos(80*T$Z,5),T$g._txt.color="#ffffff",T$u.addChild(T$g._txt),T$g._sp=T$u),T$u.pos(T$$,T$b);for(var T$E="",T$r=0;T$r<T$g._view.length;T$r++){T$E+=T$g._view[T$r].title+"\n"}T$g._leftText.text=T$E;var T$F=170*T$Z,T$x=T$Z*(12*T$g._view.length+3*T$Z)+4;T$g._txt.fontSize=T$g._fontSize*T$Z,T$g._leftText.fontSize=T$g._fontSize*T$Z,T$u.size(T$F,T$x),T$u.graphics.clear(),T$u.graphics.setAlpha(.5),T$u.graphics.drawRect(0,0,T$F,T$x,"#999999"),T$u.graphics.setAlpha(1),T$g.loop()},T$g.enable=function(){T$z.timer.frameLoop(1,T$g,T$g.loop)},T$g.hide=function(){T$g._show=!1,T$z.timer.clear(T$g,T$g.loop),T$g._canvas&&T$s.removeElement(T$g._canvas.source)},T$g.clear=function(){T$g.trianglesFaces=T$g.drawCall=T$g.shaderCall=T$g.spriteCount=T$g.spriteRenderUseCacheCount=T$g.treeNodeCollision=T$g.treeSpriteCollision=T$g.canvasNormal=T$g.canvasBitmap=T$g.canvasReCache=0},T$g.loop=function(){T$g._count++;var T$$=T$s.now();if(!(T$$-T$g._timer<1e3)){var T$b=T$g._count;if(T$g.FPS=Math.round(1e3*T$b/(T$$-T$g._timer)),T$g._show){T$g.trianglesFaces=Math.round(T$g.trianglesFaces/T$b),T$g.spriteCount=T$g._useCanvas?(T$g.drawCall=Math.round(T$g.drawCall/T$b)-2,T$g.shaderCall=Math.round(T$g.shaderCall/T$b),Math.round(T$g.spriteCount/T$b)-1):(T$g.drawCall=Math.round(T$g.drawCall/T$b)-2,T$g.shaderCall=Math.round(T$g.shaderCall/T$b)-4,Math.round(T$g.spriteCount/T$b)-4),T$g.spriteRenderUseCacheCount=Math.round(T$g.spriteRenderUseCacheCount/T$b),T$g.canvasNormal=Math.round(T$g.canvasNormal/T$b),T$g.canvasBitmap=Math.round(T$g.canvasBitmap/T$b),T$g.canvasReCache=Math.ceil(T$g.canvasReCache/T$b),T$g.treeNodeCollision=Math.round(T$g.treeNodeCollision/T$b),T$g.treeSpriteCollision=Math.round(T$g.treeSpriteCollision/T$b);var T$u=0<T$g.FPS?Math.floor(1e3/T$g.FPS).toString():" ";T$g._fpsStr=T$g.FPS+(T$g.renderSlow?" slow":"")+" "+T$u,T$g._spriteStr=T$g.spriteCount+(T$g.spriteRenderUseCacheCount?"/"+T$g.spriteRenderUseCacheCount:""),T$g._canvasStr=T$g.canvasReCache+"/"+T$g.canvasNormal+"/"+T$g.canvasBitmap,T$g.currentMemorySize=T$X.systemResourceManager.memorySize,T$g._useCanvas?T$g.renderInfoPre():T$g.renderInfo(),T$g.clear()}T$g._count=0,T$g._timer=T$$}},T$g.renderInfoPre=function(){if(T$g._canvas){var T$$=T$g._ctx;T$$.clearRect(T$g._first?0:T$g._vx,0,T$g._width,T$g._height);for(var T$b=T$Y.WebGL.mainContext,T$u=0;T$u<T$g._view.length;T$u++){var T$Z=T$g._view[T$u];T$g._first&&(T$$.fillStyle="white",T$$.fillText(T$Z.title,T$Z.x,T$Z.y,null,null,null)),T$$.fillStyle=T$Z.color;var T$E=-1;if((T$Z=T$g._view[T$u]).varying){if(T$b)switch(T$Z.varying){case 1:T$E=T$b.getParameter(T$b[T$Z.value]);break;case 2:T$E=T$b.getExtension(T$Z.value)}}else T$E=T$g[T$Z.value];"M"==T$Z.units&&(T$E=Math.floor(T$E/1048576*100)/100+" M"),"K"==T$Z.units&&(T$E=Math.floor(T$E/1024*100)/100+" K"),"string"==T$Z.units&&(T$E=T$E.match(/\d+\.?\d/i)),T$$.fillText(T$E+"",T$Z.x+T$g._vx,T$Z.y,null,null,null)}}},T$g.renderInfo=function(){for(var T$$="",T$b=T$Y.WebGL.mainContext,T$u=0;T$u<T$g._view.length;T$u++){var T$Z=T$g._view[T$u],T$E=-1;if(T$Z.varying){if(T$b)switch(T$Z.varying){case 1:T$E=T$b.getParameter(T$b[T$Z.value]);break;case 2:T$E=T$b.getExtension(T$Z.value)}}else T$E=T$g[T$Z.value];"M"==T$Z.units&&(T$E=Math.floor(T$E/1048576*100)/100+" M"),"K"==T$Z.units&&(T$E=Math.floor(T$E/1024*100)/100+" K"),"string"==T$Z.units&&(T$E=T$E.match(/\d+\.?\d/i)),T$$+=T$E+"\n"}T$g._txt.text=T$$},T$g.FPS=0,T$g.loopCount=0,T$g.shaderCall=0,T$g.drawCall=0,T$g.trianglesFaces=0,T$g.spriteCount=0,T$g.spriteRenderUseCacheCount=0,T$g.treeNodeCollision=0,T$g.treeSpriteCollision=0,T$g.canvasNormal=0,T$g.canvasBitmap=0,T$g.canvasReCache=0,T$g.renderSlow=!1,T$g.currentMemorySize=0,T$g._fpsStr=null,T$g._canvasStr=null,T$g._spriteStr=null,T$g._fpsData=[],T$g._timer=0,T$g._count=0,T$g._view=[],T$g._fontSize=12,T$g._txt=null,T$g._leftText=null,T$g._sp=null,T$g._show=!1,T$g._useCanvas=!1,T$g._canvas=null,T$g._ctx=null,T$g._first=!1,T$g._vx=NaN,T$g._width=0,T$g._height=100,T$g}(),T$j=(function(){function T$$(){this._strsToID={},this._idToStrs=[],this._length=0}T$w(T$$,"laya.utils.StringKey");var T$b=T$$.prototype;T$b.add=function(T$$){var T$b=this._strsToID[T$$];return null!=T$b?T$b:(this._idToStrs[this._length]=T$$,this._strsToID[T$$]=this._length++)},T$b.getID=function(T$$){var T$b=this._strsToID[T$$];return null==T$b?-1:T$b},T$b.getName=function(T$$){var T$b=this._idToStrs[T$$];return null==T$b?void 0:T$b}}(),function(){var T$H;function T$$(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}T$w(T$$,"laya.utils.Timer");var T$b=T$$.prototype;return T$b._init=function(){T$z.timer&&T$z.timer.frameLoop(1,this,this._update)},T$b._now=function(){return Date.now()},T$b._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var T$$=this.currFrame=this.currFrame+this.scale,T$b=this._now();this._delta=(T$b-this._lastTimer)*this.scale;var T$u=this.currTimer=this.currTimer+this._delta;T$z.isDebug&&6e4<Math.abs(T$b-this._lastTimer)&&console.error("系统时间错误！"+(T$b-this._lastTimer)),this._lastTimer=T$b;var T$Z=this._handlers;for(T$F=this._count=0,T$x=T$Z.length;T$F<T$x;T$F++)if(null!==(T$g=T$Z[T$F]).method){var T$E=T$g.userFrame?T$$:T$u;if(T$E>=T$g.exeTime)if(T$g.repeat)if(T$g.jumpFrame)for(;T$E>=T$g.exeTime;)T$g.exeTime+=T$g.delay,T$g.run(!1);else T$g.exeTime+=T$g.delay,T$g.run(!1),T$E>T$g.exeTime&&(T$g.exeTime+=Math.ceil((T$E-T$g.exeTime)/T$g.delay)*T$g.delay);else T$g.run(!0)}else this._count++;(30<this._count||T$$%200==0)&&this._clearHandlers();for(var T$r=this._laters,T$F=0,T$x=T$r.length-1;T$F<=T$x;T$F++){var T$g=T$r[T$F];this._isIgnoreRecover(T$g)||(null!==T$g.method&&(delete this._map[T$g.key],T$g.run(!1)),this._recoverHandler(T$g)),T$F===T$x&&(T$x=T$r.length-1)}T$r.length=0}},T$b._clearHandlers=function(){for(var T$$=this._handlers,T$b=0,T$u=T$$.length;T$b<T$u;T$b++){var T$Z=T$$[T$b];null!==T$Z.method?this._temp.push(T$Z):this._isIgnoreRecover(T$Z)?this._temp.push(T$Z):this._recoverHandler(T$Z)}this._handlers=this._temp,this._temp=T$$,this._temp.length=0},T$b._recoverHandler=function(T$$){this._map[T$$.key]==T$$&&delete this._map[T$$.key],T$$.recover()},T$b._create=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){if(!T$u)return T$E.apply(T$Z,T$r),null;if(T$F){var T$g=this._getHandler(T$Z,T$E);if(T$g)return T$g.repeat=T$b,T$g.userFrame=T$$,T$g.delay=T$u,T$g.ignoreRecover=T$x,T$g.caller=T$Z,T$g.method=T$E,T$g.args=T$r,T$g.exeTime=T$u+(T$$?this.currFrame:this.currTimer+this._now()-this._lastTimer),T$g}return(T$g=T$H.create()).repeat=T$b,T$g.userFrame=T$$,T$g.delay=T$u,T$g.ignoreRecover=T$x,T$g.caller=T$Z,T$g.method=T$E,T$g.args=T$r,T$g.exeTime=T$u+(T$$?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(T$g),this._handlers.push(T$g),T$g},T$b._indexHandler=function(T$$){var T$b=T$$.caller,T$u=T$$.method,T$Z=T$b?T$b.$_GID||(T$b.$_GID=T$d.getGID()):0,T$E=T$u.$_TID||(T$u.$_TID=this._mid++);T$$.key=T$Z+"_"+T$E,this._map[T$$.key]=T$$},T$b.once=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$E&&(T$E=!0),this._create(!1,!1,T$$,T$b,T$u,T$Z,T$E,!1)},T$b.loop=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){void 0===T$E&&(T$E=!0),void 0===T$r&&(T$r=!1),void 0===T$F&&(T$F=!1);var T$x=this._create(!1,!0,T$$,T$b,T$u,T$Z,T$E,T$F);T$x&&(T$x.jumpFrame=T$r)},T$b.frameOnce=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$E&&(T$E=!0),this._create(!0,!1,T$$,T$b,T$u,T$Z,T$E,!1)},T$b.frameLoop=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$E&&(T$E=!0),void 0===T$r&&(T$r=!1),this._create(!0,!0,T$$,T$b,T$u,T$Z,T$E,T$r)},T$b.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+T$H._freeCount},T$b.clear=function(T$$,T$b){var T$u=this._getHandler(T$$,T$b);return!(!T$u||this._isIgnoreRecover(T$u))&&(delete this._map[T$u.key],T$u.key=null,T$u.clear(),!0)},T$b.clearAll=function(T$$){if(T$$)for(var T$b=0,T$u=this._handlers.length;T$b<T$u;T$b++){var T$Z=this._handlers[T$b];T$Z.caller===T$$&&(this._isIgnoreRecover(T$Z)||(delete this._map[T$Z.key],T$Z.key=null,T$Z.clear()))}},T$b._getHandler=function(T$$,T$b){var T$u=T$$?T$$.$_GID||(T$$.$_GID=T$d.getGID()):0,T$Z=T$b.$_TID||(T$b.$_TID=this._mid++);return this._map[T$u+"_"+T$Z]},T$b._isIgnoreRecover=function(T$$){if(T$$.ignoreRecover||T$$.caller&&"IgnoreRecover"==T$$.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var T$b="";try{arguments.propertyIsEnumerable.caller}catch(T$$){T$b=T$$.stack}T$z.recordError("报错：核心定时器销毁忽略  "+T$b)}return!0}return!1},T$b.hasHandler=function(T$$,T$b){return this._map[T$$.$_GID+"_"+T$b.$_TID]},T$b.callLater=function(T$$,T$b,T$u){if(null==this._getHandler(T$$,T$b)){var T$Z=T$H.create();T$Z.caller=T$$,T$Z.method=T$b,T$Z.args=T$u,this._indexHandler(T$Z),this._laters.push(T$Z)}},T$b.runCallLater=function(T$$,T$b){var T$u=this._getHandler(T$$,T$b);T$u&&null!=T$u.method&&(this._isIgnoreRecover(T$u)||(delete this._map[T$u.key],T$u.run(!0)))},T$b.runTimer=function(T$$,T$b){this.runCallLater(T$$,T$b)},T$D(0,T$b,"delta",function(){return this._delta}),T$$.__init$=function(){T$H=function(){function T$b(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}T$w(T$b,"");var T$$=T$b.prototype;return T$$.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},T$$.recover=function(){this.clear(),this.args=T$b._freeHandler,T$b._freeHandler=this,T$b._freeCount++},T$$.run=function(T$$){var T$b=this.caller;if(T$b&&T$b.destroyed)return this.clear();var T$u=this.method,T$Z=this.args;T$$&&this.clear(),null!=T$u&&(T$Z?T$u.apply(T$b,T$Z):T$u.call(T$b))},T$b._freeHandler=null,T$b._freeCount=0,T$b.create=function(){var T$$=T$b._freeHandler;return T$$?(T$b._freeHandler=T$$.args,--T$b._freeCount,T$$.args=null,T$$):new T$b},T$b}()},T$$}()),T$h=function(){function T$I(){this.gid=0}T$w(T$I,"laya.utils.Tween");var T$$=T$I.prototype;return T$$.to=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){return void 0===T$r&&(T$r=0),void 0===T$F&&(T$F=!1),this._create(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,!0,!1,!0)},T$$.from=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){return void 0===T$r&&(T$r=0),void 0===T$F&&(T$F=!1),this._create(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,!1,!1,!0)},T$$._create=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){if(!T$$)throw new Error("Tween:target is null");this._target=T$$,this._duration=T$u,this._ease=T$Z||T$b.ease||T$I.easeNone,this._complete=T$E||T$b.complete,this._delay=T$r,this._props=[],this._usedTimer=0,this._startTimer=T$s.now(),this._usedPool=T$g,this._delayParam=null,this.update=T$b.update;var T$w=T$$.$_GID||(T$$.$_GID=T$d.getGID());return T$I.tweenMap[T$w]?(T$F&&T$I.clearTween(T$$),T$I.tweenMap[T$w].push(this)):T$I.tweenMap[T$w]=[this],T$H?T$r<=0?this.firstStart(T$$,T$b,T$x):(this._delayParam=[T$$,T$b,T$x],T$z.scaleTimer.once(T$r,this,this.firstStart,this._delayParam)):this._initProps(T$$,T$b,T$x),this},T$$.firstStart=function(T$$,T$b,T$u){this._delayParam=null,T$$.destroyed?this.clear():(this._initProps(T$$,T$b,T$u),this._beginLoop())},T$$._initProps=function(T$$,T$b,T$u){for(var T$Z in T$b)if("number"==typeof T$$[T$Z]){var T$E=T$u?T$$[T$Z]:T$b[T$Z],T$r=T$u?T$b[T$Z]:T$$[T$Z];this._props.push([T$Z,T$E,T$r-T$E]),T$u||(T$$[T$Z]=T$E)}},T$$._beginLoop=function(){T$z.scaleTimer.frameLoop(1,this,this._doEase)},T$$._doEase=function(){this._updateEase(T$s.now())},T$$._updateEase=function(T$$){var T$b=this._target;if(T$b){if(T$b.destroyed)return T$I.clearTween(T$b);var T$u=this._usedTimer=T$$-this._startTimer-this._delay;if(!(T$u<0)){if(T$u>=this._duration)return this.complete();for(var T$Z=0<T$u?this._ease(T$u,0,1,this._duration):0,T$E=this._props,T$r=0,T$F=T$E.length;T$r<T$F;T$r++){var T$x=T$E[T$r];T$b[T$x[0]]=T$x[1]+T$Z*T$x[2]}this.update&&this.update.run()}}},T$$.complete=function(){if(this._target){T$z.scaleTimer.runTimer(this,this.firstStart);for(var T$$=this._target,T$b=this._props,T$u=this._complete,T$Z=0,T$E=T$b.length;T$Z<T$E;T$Z++){var T$r=T$b[T$Z];T$$[T$r[0]]=T$r[1]+T$r[2]}this.update&&this.update.run(),this.clear(),T$u&&T$u.run()}},T$$.pause=function(){T$z.scaleTimer.clear(this,this._beginLoop),T$z.scaleTimer.clear(this,this._doEase),T$z.scaleTimer.clear(this,this.firstStart);var T$$;(T$$=T$s.now()-this._startTimer-this._delay)<0&&(this._usedTimer=T$$)},T$$.setStartTime=function(T$$){this._startTimer=T$$},T$$.clear=function(){this._target&&(this._remove(),this._clear())},T$$._clear=function(){this.pause(),T$z.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,T$G.recover("tween",this))},T$$.recover=function(){this._usedPool=!0,this._clear()},T$$._remove=function(){var T$$=T$I.tweenMap[this._target.$_GID];if(T$$)for(var T$b=0,T$u=T$$.length;T$b<T$u;T$b++)if(T$$[T$b]===this){T$$.splice(T$b,1);break}},T$$.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=T$s.now(),this._delayParam)T$z.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var T$$=this._props,T$b=0,T$u=T$$.length;T$b<T$u;T$b++){var T$Z=T$$[T$b];this._target[T$Z[0]]=T$Z[1]}T$z.scaleTimer.once(this._delay,this,this._beginLoop)}},T$$.resume=function(){this._usedTimer>=this._duration||(this._startTimer=T$s.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?T$z.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},T$D(0,T$$,"progress",null,function(T$$){var T$b=T$$*this._duration;this._startTimer=T$s.now()-this._delay-T$b}),T$I.to=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){return void 0===T$r&&(T$r=0),void 0===T$F&&(T$F=!1),void 0===T$x&&(T$x=!0),T$G.getItemByClass("tween",T$I)._create(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,!0,T$x,!0)},T$I.from=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){return void 0===T$r&&(T$r=0),void 0===T$F&&(T$F=!1),void 0===T$x&&(T$x=!0),T$G.getItemByClass("tween",T$I)._create(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,!1,T$x,!0)},T$I.clearAll=function(T$$){if(T$$&&T$$.$_GID){var T$b=T$I.tweenMap[T$$.$_GID];if(T$b){for(var T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++)T$b[T$u]._clear();T$b.length=0}}},T$I.clear=function(T$$){T$$.clear()},T$I.clearTween=function(T$$){T$I.clearAll(T$$)},T$I.easeNone=function(T$$,T$b,T$u,T$Z){return T$u*T$$/T$Z+T$b},T$I.tweenMap={},T$I}(),T$d=function(){function T$x(){}return T$w(T$x,"laya.utils.Utils"),T$x.toRadian=function(T$$){return T$$*T$x._pi2},T$x.toAngle=function(T$$){return T$$*T$x._pi},T$x.toHexColor=function(T$$){if(T$$<0||isNaN(T$$))return null;for(var T$b=T$$.toString(16);T$b.length<6;)T$b="0"+T$b;return"#"+T$b},T$x.getGID=function(){return T$x._gid++},T$x.concatArray=function(T$$,T$b){if(!T$b)return T$$;if(!T$$)return T$b;var T$u=0,T$Z=T$b.length;for(T$u=0;T$u<T$Z;T$u++)T$$.push(T$b[T$u]);return T$$},T$x.clearArray=function(T$$){return T$$&&(T$$.length=0),T$$},T$x.copyArray=function(T$$,T$b){if(T$$||(T$$=[]),!T$b)return T$$;T$$.length=T$b.length;var T$u=0,T$Z=T$b.length;for(T$u=0;T$u<T$Z;T$u++)T$$[T$u]=T$b[T$u];return T$$},T$x.getGlobalRecByPoints=function(T$$,T$b,T$u,T$Z,T$E){var T$r,T$F;return T$r=new T$q(T$b,T$u),T$r=T$$.localToGlobal(T$r),T$F=new T$q(T$Z,T$E),T$F=T$$.localToGlobal(T$F),T$a._getWrapRec([T$r.x,T$r.y,T$F.x,T$F.y])},T$x.getGlobalPosAndScale=function(T$$){return T$x.getGlobalRecByPoints(T$$,0,0,1,1)},T$x.bind=function(T$$,T$b){return T$$.bind(T$b)},T$x.measureText=function(T$$,T$b){return T$O.measureText(T$$,T$b)},T$x.contextMeasureText=function(T$$){var T$b=T$s.context.measureText(T$$);return T$b||(T$b={width:16,height:16}),T$b},T$x.updateOrder=function(T$$){if(!T$$||T$$.length<2)return!1;for(var T$b,T$u=1,T$Z=0,T$E=T$$.length,T$r=NaN;T$u<T$E;){for(T$b=T$$[T$Z=T$u],T$r=T$$[T$Z]._zOrder;-1<--T$Z&&T$$[T$Z]._zOrder>T$r;)T$$[T$Z+1]=T$$[T$Z];T$$[T$Z+1]=T$b,T$u++}var T$F=T$b.parent.conchModel;if(T$F)if(null!=T$F.updateZOrder)T$F.updateZOrder();else{for(T$u=0;T$u<T$E;T$u++)T$F.removeChild(T$$[T$u].conchModel);for(T$u=0;T$u<T$E;T$u++)T$F.addChildAt(T$$[T$u].conchModel,T$u)}return!0},T$x.transPointList=function(T$$,T$b,T$u){var T$Z=0,T$E=T$$.length;for(T$Z=0;T$Z<T$E;T$Z+=2)T$$[T$Z]+=T$b,T$$[T$Z+1]+=T$u},T$x.parseInt=function(T$$,T$b){void 0===T$b&&(T$b=0);var T$u=T$s.window.parseInt(T$$,T$b);return isNaN(T$u)?0:T$u},T$x.getFileExtension=function(T$$){T$x._extReg.lastIndex=T$$.lastIndexOf(".");var T$b=T$x._extReg.exec(T$$);return T$b&&1<T$b.length?T$b[1].toLowerCase():null},T$x.getTransformRelativeToWindow=function(T$$,T$b,T$u){var T$Z=T$z.stage,T$E=laya.utils.Utils.getGlobalPosAndScale(T$$),T$r=T$Z._canvasTransform.clone(),T$F=T$r.tx,T$x=T$r.ty;T$r.rotate(-Math.PI/180*T$z.stage.canvasDegree),T$r.scale(T$z.stage.clientScaleX,T$z.stage.clientScaleY);var T$g=T$z.stage.canvasDegree%180!=0,T$H=NaN,T$w=NaN;T$g?(T$H=T$u+T$E.y,T$w=T$b+T$E.x,T$H*=T$r.d,T$w*=T$r.a,90==T$z.stage.canvasDegree?(T$H=T$F-T$H,T$w+=T$x):(T$H+=T$F,T$w=T$x-T$w)):(T$H=T$b+T$E.x,T$w=T$u+T$E.y,T$H*=T$r.a,T$w*=T$r.d,T$H+=T$F,T$w+=T$x);var T$I=NaN,T$o=NaN;return T$o=T$g?(T$I=T$r.d*T$E.height,T$r.a*T$E.width):(T$I=T$r.a*T$E.width,T$r.d*T$E.height),{x:T$H,y:T$w,scaleX:T$I,scaleY:T$o}},T$x.fitDOMElementInArea=function(T$$,T$b,T$u,T$Z,T$E,T$r){T$$._fitLayaAirInitialized||(T$$._fitLayaAirInitialized=!0,T$$.style.transformOrigin=T$$.style.webKittransformOrigin="left top",T$$.style.position="absolute");var T$F=T$x.getTransformRelativeToWindow(T$b,T$u,T$Z);T$$.style.transform=T$$.style.webkitTransform="scale("+T$F.scaleX+","+T$F.scaleY+") rotate("+T$z.stage.canvasDegree+"deg)",T$$.style.width=T$E+"px",T$$.style.height=T$r+"px",T$$.style.left=T$F.x+"px",T$$.style.top=T$F.y+"px"},T$x.isOkTextureList=function(T$$){if(!T$$)return!1;var T$b,T$u=0,T$Z=T$$.length;for(T$u=0;T$u<T$Z;T$u++)if(!(T$b=T$$[T$u])||!T$b.source)return!1;return!0},T$x.isOKCmdList=function(T$$){if(!T$$)return!1;var T$b,T$u,T$Z=0,T$E=T$$.length,T$r=T$Y._context;for(T$Z=0;T$Z<T$E;T$Z++)switch((T$b=T$$[T$Z]).callee){case T$r._drawTexture:case T$r._fillTexture:case T$r._drawTextureWithTransform:if(!(T$u=T$b[0])||!T$u.source)return!1}return!0},T$x._gid=1,T$x._pi=180/Math.PI,T$x._pi2=Math.PI/180,T$x._extReg=/\.(\w+)\??/g,T$x.parseXMLFromString=function(T$$){var T$b;if(T$$=T$$.replace(/>\s+</g,"><"),-1<(T$b=(new DOMParser).parseFromString(T$$,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(T$b.firstChild.firstChild.textContent);return T$b},T$x}(),T$U=function(){function T$$(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],T$Y.isWebGL&&T$n.regCacheByFunction(T$d.bind(this.startDispose,this),T$d.bind(this.getCacheList,this))}T$w(T$$,"laya.utils.VectorGraphManager");var T$b=T$$.prototype;return T$b.getId=function(){return this._id++},T$b.addShape=function(T$$,T$b){this.shapeDic[T$$]=T$b,this.useDic[T$$]||(this.useDic[T$$]=!0)},T$b.addLine=function(T$$,T$b){this.shapeLineDic[T$$]=T$b,this.shapeLineDic[T$$]||(this.shapeLineDic[T$$]=!0)},T$b.getShape=function(T$$){this._checkKey&&null!=this.useDic[T$$]&&(this.useDic[T$$]=!0)},T$b.deleteShape=function(T$$){this.shapeDic[T$$]&&(this.shapeDic[T$$]=null,delete this.shapeDic[T$$]),this.shapeLineDic[T$$]&&(this.shapeLineDic[T$$]=null,delete this.shapeLineDic[T$$]),null!=this.useDic[T$$]&&delete this.useDic[T$$]},T$b.getCacheList=function(){var T$$,T$b=[];for(T$$ in this.shapeDic)T$b.push(this.shapeDic[T$$]);for(T$$ in this.shapeLineDic)T$b.push(this.shapeLineDic[T$$]);return T$b},T$b.startDispose=function(T$$){var T$b;for(T$b in this.useDic)this.useDic[T$b]=!1;this._checkKey=!0},T$b.endDispose=function(){if(this._checkKey){var T$$;for(T$$ in this.useDic)this.useDic[T$$]||this.deleteShape(T$$);this._checkKey=!1}},T$$.getInstance=function(){return T$$.instance=T$$.instance||new T$$},T$$.instance=null,T$$}(),T$B=function(){function T$Z(){this._obj=null,this._obj=T$Z.supportWeakMap?new T$s.window.WeakMap:{},T$Z.supportWeakMap||T$Z._maps.push(this)}T$w(T$Z,"laya.utils.WeakObject");var T$$=T$Z.prototype;return T$$.set=function(T$$,T$b){if(null!=T$$)if(T$Z.supportWeakMap){var T$u=T$$;"string"!=typeof T$$&&"number"!=typeof T$$||(T$u=T$Z._keys[T$$])||(T$u=T$Z._keys[T$$]={k:T$$}),this._obj.set(T$u,T$b)}else"string"==typeof T$$||"number"==typeof T$$?this._obj[T$$]=T$b:(T$$.$_GID||(T$$.$_GID=T$d.getGID()),this._obj[T$$.$_GID]=T$b)},T$$.get=function(T$$){if(null==T$$)return null;if(T$Z.supportWeakMap){var T$b="string"==typeof T$$||"number"==typeof T$$?T$Z._keys[T$$]:T$$;return T$b?this._obj.get(T$b):null}return"string"==typeof T$$||"number"==typeof T$$?this._obj[T$$]:this._obj[T$$.$_GID]},T$$.del=function(T$$){if(null!=T$$)if(T$Z.supportWeakMap){var T$b="string"==typeof T$$||"number"==typeof T$$?T$Z._keys[T$$]:T$$;if(!T$b)return;this._obj.delete(T$b)}else"string"==typeof T$$||"number"==typeof T$$?delete this._obj[T$$]:delete this._obj[this._obj.$_GID]},T$$.has=function(T$$){if(null==T$$)return!1;if(T$Z.supportWeakMap){var T$b="string"==typeof T$$||"number"==typeof T$$?T$Z._keys[T$$]:T$$;return this._obj.has(T$b)}return"string"==typeof T$$||"number"==typeof T$$?null!=this._obj[T$$]:null!=this._obj[this._obj.$_GID]},T$Z.__init__=function(){(T$Z.supportWeakMap=null!=T$s.window.WeakMap)||T$z.timer.loop(T$Z.delInterval,null,T$Z.clearCache)},T$Z.clearCache=function(){for(var T$$=0,T$b=T$Z._maps.length;T$$<T$b;T$$++){T$Z._maps[T$$]._obj={}}},T$Z.supportWeakMap=!1,T$Z.delInterval=3e5,T$Z._keys={},T$Z._maps=[],T$g(T$Z,["I",function(){return this.I=new T$Z}]),T$Z}(),T$R=function(){function T$$(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}T$w(T$$,"laya.utils.WordText");var T$b=T$$.prototype;return T$b.setText=function(T$$){this.changed=!0,this._text=T$$},T$b.toString=function(){return this._text},T$b.charCodeAt=function(T$$){return this._text?this._text.charCodeAt(T$$):NaN},T$b.charAt=function(T$$){return this._text?this._text.charAt(T$$):null},T$D(0,T$b,"length",function(){return this._text?this._text.length:0}),T$$}(),T$$$=function(T$$){function T$F(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,T$F.__super.call(this),this._childs=T$F.ARRAY_EMPTY,this._$P=T$F.PROP_EMPTY,this.timer=T$z.scaleTimer,this.conchModel=T$Y.isConchNode?this.createConchModel():null}T$w(T$F,"laya.display.Node",T$H);var T$b=T$F.prototype;return T$b._setBit=function(T$$,T$b){1==T$$&&(this._getBit(T$$)!=T$b&&this._updateDisplayedInstage());T$b?this._bits|=T$$:this._bits&=~T$$},T$b._getBit=function(T$$){return 0!=(this._bits&T$$)},T$b._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},T$b._setUpNoticeType=function(T$$){var T$b=this;for(T$b._setBit(T$$,!0),T$b=T$b.parent;T$b;){if(T$b._getBit(T$$))return;T$b._setBit(T$$,!0),T$b=T$b.parent}},T$b.on=function(T$$,T$b,T$u,T$Z){return"display"!==T$$&&"undisplay"!==T$$||this._getBit(1)||this._setUpNoticeType(1),this._createListener(T$$,T$b,T$u,T$Z,!1)},T$b.once=function(T$$,T$b,T$u,T$Z){return"display"!==T$$&&"undisplay"!==T$$||this._getBit(1)||this._setUpNoticeType(1),this._createListener(T$$,T$b,T$u,T$Z,!0)},T$b.createConchModel=function(){return null},T$b.destroy=function(T$$){void 0===T$$&&(T$$=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(T$$?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},T$b.destroyChildren=function(){if(this._childs)for(var T$$=this._childs.length-1;-1<T$$;T$$--)this._childs[T$$].destroy(!0)},T$b.addChild=function(T$$){if(!T$$||this.destroyed||T$$===this)return T$$;if(T$$.zOrder&&this._set$P("hasZorder",!0),T$$._parent===this){var T$b=this.getChildIndex(T$$);T$b!==this._childs.length-1&&(this._childs.splice(T$b,1),this._childs.push(T$$),this.conchModel&&(this.conchModel.removeChild(T$$.conchModel),this.conchModel.addChildAt(T$$.conchModel,this._childs.length-1)),this._childChanged())}else T$$.parent&&T$$.parent.removeChild(T$$),this._childs===T$F.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$$),this.conchModel&&this.conchModel.addChildAt(T$$.conchModel,this._childs.length-1),(T$$.parent=this)._childChanged();return T$$},T$b.addChildren=function(T$$){for(var T$b=arguments,T$u=0,T$Z=T$b.length;T$u<T$Z;)this.addChild(T$b[T$u++])},T$b.addChildAt=function(T$$,T$b){if(!T$$||this.destroyed||T$$===this)return T$$;if(T$$.zOrder&&this._set$P("hasZorder",!0),0<=T$b&&T$b<=this._childs.length){if(T$$._parent===this){var T$u=this.getChildIndex(T$$);this._childs.splice(T$u,1),this._childs.splice(T$b,0,T$$),this.conchModel&&(this.conchModel.removeChild(T$$.conchModel),this.conchModel.addChildAt(T$$.conchModel,T$b)),this._childChanged()}else T$$.parent&&T$$.parent.removeChild(T$$),this._childs===T$F.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$b,0,T$$),this.conchModel&&this.conchModel.addChildAt(T$$.conchModel,T$b),T$$.parent=this;return T$$}throw new Error("appendChildAt:The index is out of bounds")},T$b.getChildIndex=function(T$$){return this._childs.indexOf(T$$)},T$b.getChildByName=function(T$$){var T$b=this._childs;if(T$b)for(var T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++){var T$E=T$b[T$u];if(T$E.name===T$$)return T$E}return null},T$b._get$P=function(T$$){return this._$P[T$$]},T$b._set$P=function(T$$,T$b){return this.destroyed||(this._$P===T$F.PROP_EMPTY&&(this._$P={}),this._$P[T$$]=T$b),T$b},T$b.getChildAt=function(T$$){return this._childs[T$$]},T$b.setChildIndex=function(T$$,T$b){var T$u=this._childs;if(T$b<0||T$b>=T$u.length)throw new Error("setChildIndex:The index is out of bounds.");var T$Z=this.getChildIndex(T$$);if(T$Z<0)throw new Error("setChildIndex:node is must child of this object.");return T$u.splice(T$Z,1),T$u.splice(T$b,0,T$$),this.conchModel&&(this.conchModel.removeChild(T$$.conchModel),this.conchModel.addChildAt(T$$.conchModel,T$b)),this._childChanged(),T$$},T$b._childChanged=function(T$$){},T$b.removeChild=function(T$$){if(!this._childs)return T$$;var T$b=this._childs.indexOf(T$$);return this.removeChildAt(T$b)},T$b.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},T$b.removeChildByName=function(T$$){var T$b=this.getChildByName(T$$);return T$b&&this.removeChild(T$b),T$b},T$b.removeChildAt=function(T$$){var T$b=this.getChildAt(T$$);if(T$b){for(var T$u=this._childs.length-1,T$Z=T$$;T$Z<T$u;++T$Z)this._childs[T$Z]=this._childs[T$Z+1];this._childs.length=T$u,this.conchModel&&this.conchModel.removeChild(T$b.conchModel),T$b.parent=null}return T$b},T$b.removeChildren=function(T$$,T$b){if(void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=2147483647),this._childs&&0<this._childs.length){var T$u=this._childs;if(0===T$$&&T$r<=T$b){var T$Z=T$u;this._childs=T$F.ARRAY_EMPTY}else T$Z=T$u.splice(T$$,T$b-T$$);for(var T$E=0,T$r=T$Z.length;T$E<T$r;T$E++)T$Z[T$E].parent=null,this.conchModel&&this.conchModel.removeChild(T$Z[T$E].conchModel)}return this},T$b.replaceChild=function(T$$,T$b){var T$u=this._childs.indexOf(T$b);return-1<T$u?(this._childs.splice(T$u,1,T$$),this.conchModel&&(this.conchModel.removeChild(T$b.conchModel),this.conchModel.addChildAt(T$$.conchModel,T$u)),T$b.parent=null,T$$.parent=this,T$$):null},T$b._updateDisplayedInstage=function(){var T$$;T$$=this;var T$b=T$z.stage;for(this._displayedInStage=!1;T$$;){if(T$$._getBit(1)){this._displayedInStage=T$$._displayedInStage;break}if(T$$==T$b||T$$._displayedInStage){this._displayedInStage=!0;break}T$$=T$$.parent}},T$b._setDisplay=function(T$$){this._displayedInStage!==T$$&&((this._displayedInStage=T$$)?this.event("display"):this.event("undisplay"))},T$b._displayChild=function(T$$,T$b){var T$u=T$$._childs;if(T$u)for(var T$Z=0;T$Z<T$u.length;T$Z++){var T$E=T$u[T$Z];T$E&&T$E._getBit(1)&&(0<T$E._childs.length?this._displayChild(T$E,T$b):T$E._setDisplay(T$b))}T$$._setDisplay(T$b)},T$b.contains=function(T$$){if(T$$===this)return!0;for(;T$$;){if(T$$.parent===this)return!0;T$$=T$$.parent}return!1},T$b.timerLoop=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$E&&(T$E=!0),void 0===T$r&&(T$r=!1),this.timer.loop(T$$,T$b,T$u,T$Z,T$E,T$r)},T$b.timerOnce=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$E&&(T$E=!0),this.timer._create(!1,!1,T$$,T$b,T$u,T$Z,T$E)},T$b.frameLoop=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$E&&(T$E=!0),this.timer._create(!0,!0,T$$,T$b,T$u,T$Z,T$E)},T$b.frameOnce=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$E&&(T$E=!0),this.timer._create(!0,!1,T$$,T$b,T$u,T$Z,T$E)},T$b.clearTimer=function(T$$,T$b){this.timer.clear(T$$,T$b)},T$D(0,T$b,"numChildren",function(){return this._childs.length}),T$D(0,T$b,"destroyed",function(){return this._destroyed}),T$D(0,T$b,"parent",function(){return this._parent},function(T$$){this._parent!==T$$&&(T$$?(this._parent=T$$,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),T$$.displayedInStage&&this._displayChild(this,!0)),T$$._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=T$$))}),T$D(0,T$b,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),T$F.ARRAY_EMPTY=[],T$F.PROP_EMPTY={},T$F.NOTICE_DISPLAY=1,T$F.MOUSEENABLE=2,T$F}(),T$b$=function(T$$){function T$o(T$$){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,T$o.__super.call(this),this._padding=T$o._PADDING,this._spacing=T$o._SPACING,this._aligns=T$o._ALIGNS,this._font=T$N.EMPTY,this._ower=T$$}T$w(T$o,"laya.display.css.CSSStyle",T$$);var T$b=T$o.prototype;return T$b.destroy=function(){this._ower=null,this._font=null,this._rect=null},T$b.inherit=function(T$$){this._font=T$$._font,this._spacing=T$$._spacing===T$o._SPACING?T$o._SPACING:T$$._spacing.slice(),this.lineHeight=T$$.lineHeight},T$b._widthAuto=function(){return 0!=(262144&this._type)},T$b.widthed=function(T$$){return 0!=(8&this._type)},T$b._calculation=function(T$$,T$b){if(T$b.indexOf("%")<0)return!1;var T$Z=this._ower,T$E=T$Z.parent,T$r=this._rect;function T$F(T$$,T$b,T$u){return T$$*T$u[0]+T$b*T$u[1]+T$u[2]}function T$u(T$$){var T$b=T$E.width,T$u=T$Z.width;T$r.width&&(T$Z.width=T$F(T$b,T$u,T$r.width)),T$r.height&&(T$Z.height=T$F(T$b,T$u,T$r.height)),T$r.left&&(T$Z.x=T$F(T$b,T$u,T$r.left)),T$r.top&&(T$Z.y=T$F(T$b,T$u,T$r.top))}null===T$r&&(T$E._getCSSStyle()._type|=524288,T$E.on("resize",this,T$u),this._rect=T$r={input:{}});var T$x=T$b.split(" ");return T$x[0]=parseFloat(T$x[0])/100,1==T$x.length?T$x[1]=T$x[2]=0:(T$x[1]=parseFloat(T$x[1])/100,T$x[2]=parseFloat(T$x[2])),T$r[T$$]=T$x,T$r.input[T$$]=T$b,T$u(),!0},T$b.heighted=function(T$$){return 0!=(8192&this._type)},T$b.size=function(T$$,T$b){var T$u=this._ower,T$Z=!1;-1!==T$$&&T$$!=this._ower.width&&(this._type|=8,this._ower.width=T$$,T$Z=!0),-1!==T$b&&T$b!=this._ower.height&&(this._type|=8192,this._ower.height=T$b,T$Z=!0),T$Z&&(T$u._layoutLater(),524288&this._type&&T$u.event("resize",this))},T$b._getAlign=function(){return this._aligns[0]},T$b._getValign=function(){return this._aligns[1]},T$b._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},T$b._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new T$N(this._font))},T$b.render=function(T$$,T$b,T$u,T$Z){var T$E=T$$.width,T$r=T$$.height;T$u-=T$$.pivotX,T$Z-=T$$.pivotY,this._bgground&&null!=this._bgground.color&&T$b.ctx.fillRect(T$u,T$Z,T$E,T$r,this._bgground.color),this._border&&this._border.color&&T$b.drawRect(T$u,T$Z,T$E,T$r,this._border.color.strColor,this._border.size)},T$b.getCSSStyle=function(){return this},T$b.cssText=function(T$$){this.attrs(T$o.parseOneCSS(T$$,";"))},T$b.attrs=function(T$$){if(T$$)for(var T$b=0,T$u=T$$.length;T$b<T$u;T$b++){var T$Z=T$$[T$b];this[T$Z[0]]=T$Z[1]}},T$b.setTransform=function(T$$){"none"===T$$?this._tf=T$x._TF_EMPTY:this.attrs(T$o.parseOneCSS(T$$,","))},T$b.translate=function(T$$,T$b){this._tf===T$x._TF_EMPTY&&(this._tf=new T$E),this._tf.translateX=T$$,this._tf.translateY=T$b},T$b.scale=function(T$$,T$b){this._tf===T$x._TF_EMPTY&&(this._tf=new T$E),this._tf.scaleX=T$$,this._tf.scaleY=T$b},T$b._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},T$D(0,T$b,"block",T$$.prototype._$get_block,function(T$$){T$$?this._type|=1:this._type&=-2}),T$D(0,T$b,"valign",function(){return T$o._valigndef[this._aligns[1]]},function(T$$){this._aligns===T$o._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=T$o._valigndef[T$$]}),T$D(0,T$b,"height",null,function(T$$){if(this._type|=8192,"string"==typeof T$$){if(this._calculation("height",T$$))return;T$$=parseInt(T$$)}this.size(-1,T$$)}),T$D(0,T$b,"width",null,function(T$$){if(this._type|=8,"string"==typeof T$$){var T$b=T$$.indexOf("auto");if(0<=T$b&&(this._type|=262144,T$$=T$$.substr(0,T$b)),this._calculation("width",T$$))return;T$$=parseInt(T$$)}this.size(T$$,-1)}),T$D(0,T$b,"fontWeight",function(){return this._font.weight},function(T$$){this._createFont().weight=T$$}),T$D(0,T$b,"left",null,function(T$$){var T$b=this._ower;if("string"==typeof T$$){if("center"===T$$?T$$="50% -50% 0":"right"===T$$&&(T$$="100% -100% 0"),this._calculation("left",T$$))return;T$$=parseInt(T$$)}T$b.x=T$$}),T$D(0,T$b,"_translate",null,function(T$$){this.translate(T$$[0],T$$[1])}),T$D(0,T$b,"absolute",function(){return 0!=(4&this._type)}),T$D(0,T$b,"top",null,function(T$$){var T$b=this._ower;if("string"==typeof T$$){if("middle"===T$$?T$$="50% -50% 0":"bottom"===T$$&&(T$$="100% -100% 0"),this._calculation("top",T$$))return;T$$=parseInt(T$$)}T$b.y=T$$}),T$D(0,T$b,"align",function(){return T$o._aligndef[this._aligns[0]]},function(T$$){this._aligns===T$o._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=T$o._aligndef[T$$]}),T$D(0,T$b,"bold",function(){return this._font.bold},function(T$$){this._createFont().bold=T$$}),T$D(0,T$b,"padding",function(){return this._padding},function(T$$){this._padding=T$$}),T$D(0,T$b,"leading",function(){return this._spacing[1]},function(T$$){"string"==typeof T$$&&(T$$=parseInt(T$$+"")),this._spacing===T$o._SPACING&&(this._spacing=[0,0]),this._spacing[1]=T$$}),T$D(0,T$b,"lineElement",function(){return 0!=(65536&this._type)},function(T$$){T$$?this._type|=65536:this._type&=-65537}),T$D(0,T$b,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(T$$){this.lineElement=!1,"right"===T$$?this._type|=32768:this._type&=-32769}),T$D(0,T$b,"textDecoration",function(){return this._font.decoration},function(T$$){this._createFont().decoration=T$$}),T$D(0,T$b,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(T$$){"nowrap"===T$$&&(this._type|=131072),"none"===T$$&&(this._type&=-131073)}),T$D(0,T$b,"background",null,function(T$$){T$$?(this._bgground||(this._bgground={}),this._bgground.color=T$$,this._ower.conchModel&&this._ower.conchModel.bgColor(T$$),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),T$D(0,T$b,"wordWrap",function(){return 0==(131072&this._type)},function(T$$){T$$?this._type&=-131073:this._type|=131072}),T$D(0,T$b,"color",function(){return this._font.color},function(T$$){this._createFont().color=T$$}),T$D(0,T$b,"password",function(){return this._font.password},function(T$$){this._createFont().password=T$$}),T$D(0,T$b,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(T$$){"none"===T$$?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=T$$),this._ower.conchModel&&this._ower.conchModel.bgColor(T$$),this._ower._renderType|=256}),T$D(0,T$b,"font",function(){return this._font.toString()},function(T$$){this._createFont().set(T$$)}),T$D(0,T$b,"weight",null,function(T$$){this._createFont().weight=T$$}),T$D(0,T$b,"letterSpacing",function(){return this._spacing[0]},function(T$$){"string"==typeof T$$&&(T$$=parseInt(T$$+"")),this._spacing===T$o._SPACING&&(this._spacing=[0,0]),this._spacing[0]=T$$}),T$D(0,T$b,"fontSize",function(){return this._font.size},function(T$$){this._createFont().size=T$$}),T$D(0,T$b,"italic",function(){return this._font.italic},function(T$$){this._createFont().italic=T$$}),T$D(0,T$b,"fontFamily",function(){return this._font.family},function(T$$){this._createFont().family=T$$}),T$D(0,T$b,"stroke",function(){return this._font.stroke[0]},function(T$$){this._createFont().stroke===T$N._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=T$$}),T$D(0,T$b,"strokeColor",function(){return this._font.stroke[1]},function(T$$){this._createFont().stroke===T$N._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=T$$}),T$D(0,T$b,"border",function(){return this._border?this._border.value:""},function(T$$){if("none"!=T$$){this._border||(this._border={});var T$b=(this._border.value=T$$).split(" ");if(this._border.color=T$J.create(T$b[T$b.length-1]),1==T$b.length)return this._border.size=1,void(this._border.type="solid");var T$u=0;0<T$b[0].indexOf("px")?(this._border.size=parseInt(T$b[0]),T$u++):this._border.size=1,this._border.type=T$b[T$u],this._ower._renderType|=256}else this._border=null}),T$D(0,T$b,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(T$$){T$$?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==T$$?null:T$J.create(T$$),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),T$D(0,T$b,"position",function(){return 4&this._type?"absolute":""},function(T$$){"absolute"==T$$?this._type|=4:this._type&=-5}),T$D(0,T$b,"display",null,function(T$$){switch(T$$){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),T$D(0,T$b,"paddingLeft",function(){return this.padding[3]}),T$D(0,T$b,"paddingTop",function(){return this.padding[0]}),T$D(0,T$b,"_scale",null,function(T$$){this._ower.scale(T$$[0],T$$[1])}),T$D(0,T$b,"_rotate",null,function(T$$){this._ower.rotation=T$$}),T$o.parseOneCSS=function(T$$,T$b){for(var T$u,T$Z=[],T$E=T$$.split(T$b),T$r=0,T$F=T$E.length;T$r<T$F;T$r++){var T$x=T$E[T$r],T$g=T$x.indexOf(":"),T$H=T$x.substr(0,T$g).replace(/^\s+|\s+$/g,"");if(0!=T$H.length){var T$w=T$x.substr(T$g+1).replace(/^\s+|\s+$/g,""),T$I=[T$H,T$w];switch(T$H){case"italic":case"bold":T$I[1]="true"==T$w;break;case"line-height":T$I[0]="lineHeight",T$I[1]=parseInt(T$w);break;case"font-size":T$I[0]="fontSize",T$I[1]=parseInt(T$w);break;case"padding":1<(T$u=T$w.split(" ")).length||(T$u[1]=T$u[2]=T$u[3]=T$u[0]),T$I[1]=[parseInt(T$u[0]),parseInt(T$u[1]),parseInt(T$u[2]),parseInt(T$u[3])];break;case"rotate":T$I[0]="_rotate",T$I[1]=parseFloat(T$w);break;case"scale":T$u=T$w.split(" "),T$I[0]="_scale",T$I[1]=[parseFloat(T$u[0]),parseFloat(T$u[1])];break;case"translate":T$u=T$w.split(" "),T$I[0]="_translate",T$I[1]=[parseInt(T$u[0]),parseInt(T$u[1])];break;default:(T$I[0]=T$o._CSSTOVALUE[T$H])||(T$I[0]=T$H)}T$Z.push(T$I)}}return T$Z},T$o.parseCSS=function(T$$,T$b){for(var T$u;null!=(T$u=T$o._parseCSSRegExp.exec(T$$));)T$o.styleSheets[T$u[1]]=T$o.parseOneCSS(T$u[2],";")},T$o.EMPTY=new T$o(null),T$o._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},T$o._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),T$o._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},T$o._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},T$o.styleSheets={},T$o.ALIGN_CENTER=1,T$o.ALIGN_RIGHT=2,T$o.VALIGN_MIDDLE=1,T$o.VALIGN_BOTTOM=2,T$o._CSS_BLOCK=1,T$o._DISPLAY_NONE=2,T$o._ABSOLUTE=4,T$o._WIDTH_SET=8,T$o._PADDING=[0,0,0,0],T$o._RECT=[-1,-1,-1,-1],T$o._SPACING=[0,0],T$o._ALIGNS=[0,0,0],T$o.ADDLAYOUTED=512,T$o._NEWFONT=4096,T$o._HEIGHT_SET=8192,T$o._BACKGROUND_SET=16384,T$o._FLOAT_RIGHT=32768,T$o._LINE_ELEMENT=65536,T$o._NOWARP=131072,T$o._WIDTHAUTO=262144,T$o._LISTERRESZIE=524288,T$o}(T$x),T$u$=function(T$$){function T$F(){this.url=null,this.audio=null,this.loaded=!1,T$F.__super.call(this)}T$w(T$F,"laya.media.h5audio.AudioSound",T$H);var T$b=T$F.prototype;return T$b.dispose=function(){var T$$=T$F._audioCache[this.url];T$$&&(T$$.src="",delete T$F._audioCache[this.url])},T$b.load=function(T$$){var T$b;if(T$$=T$p.formatURL(T$$),(this.url=T$$)==T$K._tMusic?(T$F._initMusicAudio(),(T$b=T$F._musicAudio).src!=T$$&&(T$F._audioCache[T$b.src]=null,T$b=null)):T$b=T$F._audioCache[T$$],T$b&&2<=T$b.readyState)this.event("complete");else{T$b||(T$b=T$$==T$K._tMusic?(T$F._initMusicAudio(),T$F._musicAudio):T$s.createElement("audio"),(T$F._audioCache[T$$]=T$b).src=T$$),T$b.addEventListener("canplaythrough",T$Z),T$b.addEventListener("error",T$E);var T$u=this;(this.audio=T$b).load?T$b.load():T$E()}function T$Z(){T$r(),T$u.loaded=!0,T$u.event("complete")}function T$E(){T$b.load=null,T$r(),T$u.event("error")}function T$r(){T$b.removeEventListener("canplaythrough",T$Z),T$b.removeEventListener("error",T$E)}},T$b.play=function(T$$,T$b,T$u){if(void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),!this.url)return null;var T$Z,T$E;if(!(T$Z=this.url==T$K._tMusic?T$F._musicAudio:T$F._audioCache[this.url]))return null;T$E=T$G.getItem("audio:"+this.url),T$Y.isConchApp?T$E||((T$E=T$s.createElement("audio")).src=this.url):this.url==T$K._tMusic?(T$F._initMusicAudio(),(T$E=T$F._musicAudio).src=this.url):T$E=T$E||T$Z.cloneNode(!0);var T$r=new T$o$(T$E);return T$r.url=this.url,T$r.loops=T$b,T$r.startTime=T$$,T$r.startHandler=T$u,T$r.play(!1),T$K.addChannel(T$r),T$r},T$D(0,T$b,"duration",function(){var T$$;return(T$$=T$F._audioCache[this.url])?T$$.duration:0}),T$F._initMusicAudio=function(){T$F._musicAudio||(T$F._musicAudio||(T$F._musicAudio=T$s.createElement("audio")),T$Y.isConchApp||T$s.document.addEventListener("mousedown",T$F._makeMusicOK))},T$F._makeMusicOK=function(){T$s.document.removeEventListener("mousedown",T$F._makeMusicOK),T$F._musicAudio.src?T$F._musicAudio.play():(T$F._musicAudio.src="",T$F._musicAudio.load())},T$F._audioCache={},T$F._musicAudio=null,T$F}(),T$Z$=function(T$$){function T$b(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,T$b.__super.call(this)}T$w(T$b,"laya.media.SoundChannel",T$H);var T$u=T$b.prototype;return T$u.play=function(){},T$u.stop=function(){},T$u.pause=function(){},T$u.resume=function(){},T$u.__runComplete=function(T$$){T$$&&T$$.run()},T$D(0,T$u,"volume",function(){return 1},function(T$$){}),T$D(0,T$u,"position",function(){return 0}),T$D(0,T$u,"duration",function(){return 0}),T$b}(),T$E$=function(T$$){function T$b(){T$b.__super.call(this)}T$w(T$b,"laya.media.Sound",T$H);var T$u=T$b.prototype;return T$u.load=function(T$$){},T$u.play=function(T$$,T$b,T$u){return void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),null},T$u.dispose=function(){},T$D(0,T$u,"duration",function(){return 0}),T$b}(),T$r$=function(T$$){function T$E(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,T$E.__super.call(this)}T$w(T$E,"laya.media.webaudio.WebAudioSound",T$H);var T$b=T$E.prototype;return T$b.load=function(T$$){this.url=T$$,this.audioBuffer=T$E._dataCache[T$$],this.audioBuffer?this._loaded(this.audioBuffer):(T$E.e.on("loaded:"+T$$,this,this._loaded),T$E.e.on("err:"+T$$,this,this._err),T$E.__loadingSound[T$$]||(T$E.__loadingSound[T$$]=!0,T$z.loader.load(T$$,T$_.create(this,this.onloaded),null,T$x$.BUFFER,4,!1,null,!0)))},T$b.onloaded=function(T$$){T$$||this._err(),this._disposed?this._removeLoadEvents():(this.data=T$$,T$E.buffs.push({buffer:this.data,url:this.url}),T$E.decode())},T$b._err=function(){if(this._removeLoadEvents(),T$E.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var T$$,T$b,T$u,T$Z=0;for(T$$=(T$b=this.__toPlays).length,T$Z=0;T$Z<T$$;T$Z++)(T$u=T$b[T$Z])[3]&&!T$u[3].isStopped&&T$u[3].event("error");this.__toPlays.length=0}},T$b._loaded=function(T$$){this._removeLoadEvents(),this._disposed||(this.audioBuffer=T$$,this.loaded=!0,this.event("complete"))},T$b._removeLoadEvents=function(){T$E.e.off("loaded:"+this.url,this,this._loaded),T$E.e.off("err:"+this.url,this,this._err)},T$b.__playAfterLoaded=function(){if(this.__toPlays){var T$$,T$b,T$u,T$Z=0;for(T$$=(T$b=this.__toPlays).length,T$Z=0;T$Z<T$$;T$Z++)(T$u=T$b[T$Z])[3]&&!T$u[3].isStopped&&this.play(T$u[0],T$u[1],T$u[2],T$u[3]);this.__toPlays.length=0}},T$b.play=function(T$$,T$b,T$u,T$Z){return void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),T$Z=T$Z||new T$N$,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([T$$,T$b,T$u,T$Z]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),T$Z.url=this.url,T$Z.loops=T$b,T$Z.audioBuffer=this.audioBuffer,T$Z.startTime=T$$,T$Z.startHandler=T$u,T$Z.play(!1),T$K.addChannel(T$Z),T$Z},T$b.dispose=function(){this._disposed=!0,delete T$E._dataCache[this.url],delete T$E.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},T$D(0,T$b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),T$E.decode=function(){if(!(T$E.buffs.length<=0||T$E.isDecoding))if(T$E.isDecoding=!0,(T$E.tInfo=T$E.buffs.shift())&&T$E.tInfo.buffer&&T$E.tInfo.buffer.byteLength)try{T$E.ctx.decodeAudioData(T$E.tInfo.buffer,T$E._done,T$E._fail)}catch(T$$){console.error("decodeAudioData error  byteLength:"+T$E.tInfo.buffer.byteLength+"  url:"+T$E.tInfo.url)}else T$E._fail()},T$E._done=function(T$$){T$E.e.event("loaded:"+T$E.tInfo.url,T$$),T$E._dataCache[T$E.tInfo.url]=T$$,T$E.isDecoding=!1,T$E.decode()},T$E._fail=function(){T$E.e.event("err:"+T$E.tInfo.url,null),T$E.isDecoding=!1,T$E.decode()},T$E._playEmptySound=function(){if(null!=T$E.ctx){if(T$E._emptySource&&(T$E._emptySource.stop(),T$E._emptySource.disconnect(0),!T$N$._tryCleanFailed))try{T$E._emptySource.buffer=null}catch(T$$){T$N$._tryCleanFailed=!0}var T$$=T$E.ctx.createBufferSource();T$$.buffer=T$E._miniBuffer,T$$.connect(T$E.ctx.destination),T$$.start(0,0,0),T$E._emptySource=T$$}},T$E._unlock=function(){T$E._unlocked||(T$E._playEmptySound(),"running"==T$E.ctx.state?(T$s.document.removeEventListener("mousedown",T$E._unlock,!0),T$s.document.removeEventListener("touchend",T$E._unlock,!0),T$s.document.removeEventListener("touchstart",T$E._unlock,!0),T$E._unlocked=!0):"suspended"==T$E.ctx.state&&T$K._recoverWebAudio())},T$E.initWebAudio=function(){"running"!=T$E.ctx.state&&(T$E._unlock(),T$s.document.addEventListener("mousedown",T$E._unlock,!0),T$s.document.addEventListener("touchend",T$E._unlock,!0),T$s.document.addEventListener("touchstart",T$E._unlock,!0))},T$E._emptySource=null,T$E._dataCache={},T$E.buffs=[],T$E.isDecoding=!1,T$E._unlocked=!1,T$E.tInfo=null,T$E.__loadingSound={},T$g(T$E,["window",function(){return this.window=T$s.window},"webAudioEnabled",function(){return this.webAudioEnabled=T$E.window.AudioContext||T$E.window.webkitAudioContext||T$E.window.mozAudioContext},"ctx",function(){return this.ctx=T$E.webAudioEnabled?new(T$E.window.AudioContext||T$E.window.webkitAudioContext||T$E.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=T$E.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new T$H}]),T$E}(),T$F$=function(T$$){function T$b(){this._responseType=null,this._data=null,T$b.__super.call(this),this._http=new T$s.window.XMLHttpRequest}T$w(T$b,"laya.net.HttpRequest",T$H);var T$u=T$b.prototype;return T$u.send=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$u&&(T$u="get"),void 0===T$Z&&(T$Z="text"),this._responseType=T$Z,this._data=null;var T$r=this,T$F=this._http;if(T$F.open(T$u,T$$,!0),T$E)for(var T$x=0;T$x<T$E.length;T$x++)T$F.setRequestHeader(T$E[T$x++],T$E[T$x]);else T$Y.isConchApp||(T$b&&"string"!=typeof T$b?T$F.setRequestHeader("Content-Type","application/json"):T$F.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));T$F.responseType="arraybuffer"!==T$Z?"text":"arraybuffer",T$F.onerror=function(T$$){T$r._onError(T$$)},T$F.onabort=function(T$$){T$r._onAbort(T$$)},T$F.onprogress=function(T$$){T$r._onProgress(T$$)},T$F.onload=function(T$$){T$r._onLoad(T$$)},T$F.send(T$b)},T$u._onProgress=function(T$$){T$$&&T$$.lengthComputable&&this.event("progress",T$$.loaded/T$$.total)},T$u._onAbort=function(T$$){this.error("Request was aborted by user")},T$u._onError=function(T$$){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},T$u._onLoad=function(T$$){var T$b=this._http,T$u=void 0!==T$b.status?T$b.status:200;200===T$u||204===T$u||0===T$u?this.complete():this.error("["+T$b.status+"]"+T$b.statusText+":"+T$b.responseURL)},T$u.error=function(T$$){this.clear(),this.event("error",T$$)},T$u.complete=function(){this.clear();var T$b=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=T$d.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(T$$){T$b=!1,this.error(T$$.message)}T$b&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},T$u.clear=function(){var T$$=this._http;T$$.onerror=T$$.onabort=T$$.onprogress=T$$.onload=null},T$D(0,T$u,"url",function(){return this._http.responseURL}),T$D(0,T$u,"http",function(){return this._http}),T$D(0,T$u,"data",function(){return this._data}),T$b}(),T$x$=function(T$$){function T$t(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,T$t.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}T$w(T$t,"laya.net.Loader",T$H);var T$b=T$t.prototype;return T$b.load=function(T$$,T$b,T$u,T$Z,T$E){if(T$$&&""!=T$$||console.error("Loader 加载的url不合法 "+T$$),void 0===T$u&&(T$u=!0),void 0===T$E&&(T$E=!1),0===(this._url=T$$).indexOf("data:image")?this._type=T$b="image":this._type=T$b||(T$b=this.getTypeFromUrl(T$$)),this._cache=T$u,this._data=null,!T$E&&T$t.loadedMap[T$$])return this._data=T$t.loadedMap[T$$],this.event("progress",1),void this.event("complete",this._data);if(T$Z&&T$t.setGroup(T$$,T$Z),null!=T$t.parserMap[T$b])return this._customParse=!0,void(T$t.parserMap[T$b]instanceof laya.utils.Handler?T$t.parserMap[T$b].runWith(this):T$t.parserMap[T$b].call(null,this));if("image"===T$b||"htmlimage"===T$b||"nativeimage"===T$b)return this._loadImage(T$$);if("ttf"===T$b)return this._loadTTF(T$$);switch(T$b){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:T$b}T$t.preLoadedMap[T$$]?this.onLoaded(T$t.preLoadedMap[T$$]):T$F.resMgrLoad(T$$,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},T$b.getTypeFromUrl=function(T$$){var T$b=T$d.getFileExtension(T$$);return T$b?T$t.typeMap[T$b]:(console.warn("Not recognize the resources suffix",T$$),"text")},T$b._loadTTF=function(T$$){T$$=T$p.formatURL(T$$);var T$b=new T$v;T$b.complete=T$_.create(this,this.onLoaded),T$b.load(T$$)},T$b._loadImage=function(T$$){T$F.imgMgrLoad(T$$,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},T$b._loadImageComplete=function(T$$,T$b,T$u){if(null!=T$u)if(T$u instanceof ArrayBuffer){var T$Z=new DataView(T$u),T$E=new laya.webgl.resource.WebGLImage(new Uint8Array(T$u,8),T$$,0,!1,T$Z.getUint32(0),T$Z.getUint32(4));this.onLoaded(T$E)}else if(T$u instanceof T$w$)T$t.imgMgrSet[T$$]=T$b,T$F.imgMgrLock(T$$,T$t.imgMgrSet[T$$]),this._url=T$$,this.complete(T$u);else{var T$r=-1!=T$$.indexOf(".png",T$$.length-4)?6408:6407;T$E=new laya.webgl.resource.WebGLImage(T$u,T$$,T$r,!1,T$u.width,T$u.height);this.onLoaded(T$E)}else this.event("error","Load image failed")},T$b.imageCancel=function(T$$,T$b,T$u){T$F.imgMgrCancel(T$$,this._onImageCallback)},T$b._loadSound=function(T$$){var T$b=new T$K._soundClass,T$u=this;function T$Z(){T$b.offAll()}T$b.on("complete",this,function(){T$Z(),T$u.onLoaded(T$b)}),T$b.on("error",this,function(){T$Z(),T$b.dispose(),T$u.event("error","Load sound failed")}),T$b.load(T$$)},T$b.onProgress=function(T$$){"atlas"===this._type?this.event("progress",.3*T$$):this.event("progress",T$$)},T$b.onError=function(T$$){this.event("error",T$$)},T$b._loadedComplete=function(T$$,T$b,T$u){if(null!=T$u)switch(this._type){case"atlas":case"plf":case"json":var T$Z=new T$m(T$u);this.onLoaded(JSON.parse(T$Z.readUTFBytes()));break;case"font":T$Z=new T$m(T$u);this.onLoaded(T$d.parseXMLFromString(T$Z.readUTFBytes()));break;default:this.onLoaded(T$u)}else this.event("error",T$$)},T$b.onLoaded=function(T$$){var T$b=this._type;if("plf"==T$b)this.parsePLFData(T$$),this.complete(T$$);else if("image"===T$b){var T$u=new T$w$(T$$);T$u.url=this._url,this.complete(T$u)}else if("sound"===T$b||"htmlimage"===T$b||"nativeimage"===T$b)this.complete(T$$);else if("atlas"===T$b){if(!T$$.src&&!T$$._setContext){if(!this._data){if((this._data=T$$).meta&&T$$.meta.image)for(var T$Z=T$$.meta.image.split(","),T$E=0<=this._url.indexOf("/")?"/":"\\",T$r=this._url.lastIndexOf(T$E),T$F=0<=T$r?this._url.substr(0,T$r+1):"",T$x=0,T$g=T$Z.length;T$x<T$g;T$x++)T$Z[T$x]=T$F+T$Z[T$x];else T$Z=[this._url.replace(".json",".png")];T$Z.reverse(),T$$.toLoads=T$Z,T$$.pics=[]}return this.event("progress",.3+1/T$Z.length*.6),this._loadImage(T$Z.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(T$$),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var T$H=this._data.frames,T$w=this._url.split("?")[0],T$I=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:T$w.substring(0,T$w.lastIndexOf("."))+"/",T$o=this._data.pics,T$N=T$p.formatURL(this._url),T$D=T$t.atlasMap[T$N]||(T$t.atlasMap[T$N]=[]);T$D.dir=T$I;var T$e=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var T$L in T$e=parseFloat(this._data.meta.scale),T$H){var T$T,T$_=T$H[T$L],T$y=T$o[T$_.frame.idx?T$_.frame.idx:0],T$S=T$p.formatURL(T$I+T$L);T$y.scaleRate=T$e,T$T=T$w$.create(T$y,T$_.frame.x,T$_.frame.y,T$_.frame.w,T$_.frame.h,T$_.spriteSourceSize.x,T$_.spriteSourceSize.y,T$_.sourceSize.w,T$_.sourceSize.h),T$t.cacheRes(T$S,T$T),T$t.keepCache(this._url,T$I+T$L),T$T.url=T$S,T$D.push(T$S)}else for(T$L in T$H)T$y=T$o[(T$_=T$H[T$L]).frame.idx?T$_.frame.idx:0],T$S=T$p.formatURL(T$I+T$L),T$t.cacheRes(T$S,T$w$.create(T$y,T$_.frame.x,T$_.frame.y,T$_.frame.w,T$_.frame.h,T$_.spriteSourceSize.x,T$_.spriteSourceSize.y,T$_.sourceSize.w,T$_.sourceSize.h)),T$t.loadedMap[T$S].url=T$S,T$t.keepCache(this._url,T$I+T$L),T$D.push(T$S);delete this._data.pics,this.complete(this._data)}else if("font"==T$b){if(!T$$.src)return this._data=T$$,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var T$P=new T$C;T$P.parseFont(this._data,T$$);var T$i=this._url.split(".fnt")[0].split("/"),T$z=T$i[T$i.length-1];T$L$.registerBitmapFont(T$z,T$P),this._data=T$P,this.complete(this._data)}else if("pkm"==T$b){var T$q=T$i$.create(T$$,this._url),T$a=new T$w$(T$q);T$a.url=this._url,this.complete(T$a)}else this.complete(T$$)},T$b.parsePLFData=function(T$$){var T$b,T$u,T$Z;for(T$b in T$$)switch(T$Z=T$$[T$b],T$b){case"json":case"text":for(T$u in T$Z)T$t.preLoadedMap[T$p.formatURL(T$u)]=T$Z[T$u];break;default:for(T$u in T$Z)T$t.preLoadedMap[T$p.formatURL(T$u)]=T$Z[T$u]}},T$b.complete=function(T$$){this._data=T$$,this._customParse?this.event("loaded",T$$ instanceof Array?[T$$]:T$$):(T$t._loaders.push(this),T$t._isWorking||T$t.checkNext())},T$b.endLoad=function(T$$){T$$&&(this._data=T$$),this._cache&&T$t.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},T$D(0,T$b,"url",function(){return this._url}),T$D(0,T$b,"data",function(){return this._data}),T$D(0,T$b,"cache",function(){return this._cache}),T$D(0,T$b,"type",function(){return this._type}),T$t.checkNext=function(){T$t._isWorking=!0;for(var T$$=T$s.now();T$t._startIndex<T$t._loaders.length;)if(T$s.now(),T$t._loaders[T$t._startIndex].endLoad(),T$t._startIndex++,T$s.now()-T$$>T$t.maxTimeOut)return console.warn("loader callback cost a long time:"+(T$s.now()-T$$)+" url="+T$t._loaders[T$t._startIndex-1].url),void T$z.timer.frameOnce(1,null,T$t.checkNext);T$t._loaders.length=0,T$t._startIndex=0,T$t._isWorking=!1},T$t.clearRes=function(T$$,T$b){if(null!=T$$){void 0===T$b&&(T$b=!1),T$$=T$p.formatURL(T$$);var T$u=T$t.getAtlas(T$$);if(T$u){for(var T$Z=0,T$E=T$u.length;T$Z<T$E;T$Z++){var T$r=T$u[T$Z],T$F=T$t.getRes(T$r);delete T$t.loadedMap[T$r],T$t.clearCache(T$$.substring(T$p.basePath.length),T$r.substring(T$p.basePath.length)),T$F&&T$F.destroy(T$b)}T$u.length=0,delete T$t.atlasMap[T$$],delete T$t.loadedMap[T$$]}else{var T$x=T$t.loadedMap[T$$];T$x&&(delete T$t.loadedMap[T$$],T$x instanceof laya.resource.Texture&&T$x.bitmap&&T$x.destroy(T$b))}}},T$t.clearTextureRes=function(T$$){T$$=T$p.formatURL(T$$);var T$b=laya.net.Loader.getAtlas(T$$),T$u=T$b&&0<T$b.length?laya.net.Loader.getRes(T$b[0]):laya.net.Loader.getRes(T$$);T$u&&T$u.bitmap&&(T$Y.isConchApp&&!T$Y.isConchWebGL?T$u.bitmap.source.releaseTexture&&T$u.bitmap.source.releaseTexture():null==T$u.bitmap._atlaser&&T$u.bitmap.releaseResource(!0))},T$t.getRes=function(T$$){return T$t.loadedMap[T$p.formatURL(T$$)]},T$t.getAtlas=function(T$$){return T$t.atlasMap[T$p.formatURL(T$$)]},T$t.cacheRes=function(T$$,T$b){T$$=T$p.formatURL(T$$),null!=T$t.loadedMap[T$$]?console.warn("Resources already exist,is repeated loading:",T$$):T$t.loadedMap[T$$]=T$b},T$t.setGroup=function(T$$,T$b){T$t.groupMap[T$b]||(T$t.groupMap[T$b]=[]),T$t.groupMap[T$b].push(T$$)},T$t.clearResByGroup=function(T$$){if(T$t.groupMap[T$$]){var T$b=T$t.groupMap[T$$],T$u=0,T$Z=T$b.length;for(T$u=0;T$u<T$Z;T$u++)T$t.clearRes(T$b[T$u]);T$b.length=0}},T$t.keepCache=function(T$$,T$b){if(T$$&&T$b){var T$u=T$t.cacheSet[T$b];T$u?-1==T$u.indexOf(T$$)&&T$u.push(T$$):T$t.cacheSet[T$b]=[T$$]}},T$t.clearCache=function(T$$,T$b){if(T$$&&T$b){var T$u=T$t.cacheSet[T$b];if(T$u){var T$Z=T$u.indexOf(T$$);if(-1!==T$Z){var T$E=T$u.length-1;0==T$E?(delete T$t.cacheSet[T$b],0<T$t.imgMgrSet[T$b]?T$F.imgMgrFree(T$b,T$t.imgMgrSet[T$b]):T$t.clearRes(T$b,!0)):(T$u[T$Z]=T$u[T$E],T$u.length=T$E)}}}},T$t.saveObject=function(T$$,T$b,T$u){if(T$b&&T$$){var T$Z=T$t.objectSet[T$$];T$Z?(console.warn("Loader.saveObject: "+T$$),T$Z[0]=T$b,T$Z[1]=T$u):T$t.objectSet[T$$]=[T$b,T$u,[]]}},T$t.findObject=function(T$$){if(T$$){var T$b=T$t.objectSet[T$$];if(T$b)return T$b[0]}return null},T$t.keepObject=function(T$$,T$b){if(T$$&&T$b){var T$u=T$t.objectSet[T$b];T$u&&-1===T$u[2].indexOf(T$$)&&T$u[2].push(T$$)}},T$t.clearObject=function(T$$,T$b){if(T$$&&T$b){var T$u=T$t.objectSet[T$b];if(T$u){var T$Z=T$u[2],T$E=T$Z.indexOf(T$$);if(-1!==T$E){var T$r=T$Z.length-1;0==T$r?(delete T$t.objectSet[T$b],T$u[1]&&T$u[1].call(null,T$u[0])):(T$Z[T$E]=T$Z[T$r],T$Z.length=T$r)}}}},T$t.TEXT="text",T$t.JSON="json",T$t.XML="xml",T$t.BUFFER="arraybuffer",T$t.IMAGE="image",T$t.SOUND="sound",T$t.ATLAS="atlas",T$t.FONT="font",T$t.TTF="ttf",T$t.PLF="plf",T$t.PKM="pkm",T$t.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},T$t.parserMap={},T$t.groupMap={},T$t.maxTimeOut=100,T$t.loadedMap={},T$t.preLoadedMap={},T$t.atlasMap={},T$t._loaders=[],T$t._isWorking=!1,T$t._startIndex=0,T$t.imgCache={},T$t.cacheSet={},T$t.objectSet={},T$t.imgMgrSet={},T$t}(),T$g$=function(T$$){var T$o;function T$N(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},T$N.__super.call(this);for(var T$$=0;T$$<this._maxPriority;T$$++)this._resInfos[T$$]=[]}T$w(T$N,"laya.net.LoaderManager",T$H);var T$b=T$N.prototype;return T$b.create=function(T$$,T$u,T$b,T$Z,T$E,T$r,T$F,T$x){if(null==T$r&&(T$r=2),null==T$F&&(T$F=!0),T$$ instanceof Array){var T$g=T$$,T$H=T$g.length,T$w=0;if(T$b)var T$I=T$_.create(T$b.caller,T$b.method,T$b.args,!1);for(var T$o=0;T$o<T$H;T$o++){var T$N=T$g[T$o];"string"==typeof T$N&&(T$N=T$g[T$o]={url:T$N}),T$N.progress=0}for(T$o=0;T$o<T$H;T$o++){T$N=T$g[T$o];var T$D=T$b?T$_.create(null,T$T,[T$N],!1):null,T$e=T$b||T$u?T$_.create(null,T$L,[T$N]):null;this._create(T$N.url,T$e,T$D,T$N.clas||T$Z,T$N.params||T$E,null!=T$N.priority&&0<=T$N.priority?T$N.priority:T$r,T$F,T$N.group||T$x)}function T$L(T$$,T$b){T$w++,T$$.progress=1,T$w===T$H&&T$u&&T$u.run()}function T$T(T$$,T$b){T$$.progress=T$b;for(var T$u=0,T$Z=0;T$Z<T$H;T$Z++){T$u+=T$g[T$Z].progress}var T$E=T$u/T$H;T$I.runWith(T$E)}return!0}return this._create(T$$,T$u,T$b,T$Z,T$E,T$r,T$F,T$x)},T$b._create=function(T$b,T$u,T$$,T$Z,T$E,T$r,T$F,T$x){T$b&&""!=T$b||console.error("加载的url不合法 "+T$b),null==T$r&&(T$r=2),null==T$F&&(T$F=!0);var T$g=T$p.formatURL(T$b),T$H=this.getRes(T$g);if(T$H)!T$H.hasOwnProperty("loaded")||T$H.loaded?(T$$&&T$$.runWith(1),T$u&&T$u.run()):T$u&&T$z.loader._createListener(T$b,T$u.caller,T$u.method,T$u.args,!0,!1);else{var T$w=T$d.getFileExtension(T$b),T$I=T$N.createMap[T$w];if(!T$I)throw new Error("LoaderManager:unknown file("+T$b+") extension with: "+T$w+".");T$Z||(T$Z=T$I[0]);var T$o=T$I[1];if("atlas"==T$w)this.load(T$b,T$u,T$$,T$o,T$r,T$F);else{T$Z===T$w$&&(T$o="htmlimage"),(T$H=T$Z?new T$Z:null).hasOwnProperty("_loaded")&&(T$H._loaded=!1),T$H._setUrl(T$b),T$x&&T$H._setGroup(T$x),this._createLoad(T$H,T$b,T$_.create(null,function(T$$){T$H&&!T$H.destroyed&&T$$&&T$H.onAsynLoaded.call(T$H,T$b,T$$,T$E),T$u&&T$u.run();T$z.loader.event(T$b)}),T$$,T$o,T$r,!1,T$x,!0),T$F&&this.cacheRes(T$g,T$H)}}return T$H},T$b.load=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){T$$&&""!=T$$||console.error("加载的url不合法 "+T$$);var T$g=this;if(null==T$E&&(T$E=2),null==T$r&&(T$r=!0),void 0===T$x&&(T$x=!1),T$$ instanceof Array)return this._loadAssets(T$$,T$b,T$u,T$Z,T$E,T$r,T$F);var T$H=T$x$.getRes(T$$);if(null!=T$H)T$z.timer.frameOnce(1,null,function(){T$u&&T$u.runWith(1),T$b&&T$b.runWith(T$H),T$g._loaderCount||T$g.event("complete")});else{var T$w=T$N._resMap[T$$];T$w?(T$b&&T$w._createListener("complete",T$b.caller,T$b.method,T$b.args,!1,!1),T$u&&T$w._createListener("progress",T$u.caller,T$u.method,T$u.args,!1,!1)):((T$w=this._infoPool.length?this._infoPool.pop():new T$o).url=T$$,T$w.clas=null,T$w.type=T$Z,T$w.cache=T$r,T$w.group=T$F,T$w.ignoreCache=T$x,T$w.priority=T$E,T$b&&T$w.on("complete",T$b.caller,T$b.method,T$b.args),T$u&&T$w.on("progress",T$u.caller,T$u.method,T$u.args),T$N._resMap[T$$]=T$w,T$E=T$E<this._maxPriority?0<=T$E?T$E:0:this._maxPriority-1,this._resInfos[T$E].push(T$w),this._next())}return this},T$b.cancel=function(T$$,T$b,T$u){if(T$H=T$N._resMap[T$$]){T$b&&T$H.off("complete",T$b.caller,T$b.method,!1),T$u&&T$H.off("progress",T$u.caller,T$u.method,!1);var T$Z=T$H.getListener("complete"),T$E=T$H.getListener("progress");if(!(T$Z&&T$Z.head||T$E&&T$E.head)){if(T$H.loader){var T$r=T$H.loader;T$r.imageCancel(T$$),T$r.offAll(),T$r._data=null,T$r._customParse=!1,T$r._url=null,T$r._class=null,T$r._type=null,this._loaders.push(T$r),this._loaderCount--,delete this._loaderMap[T$H.url]}for(var T$F=0;T$F<this._maxPriority;T$F++)for(var T$x=this._resInfos[T$F],T$g=T$x.length-1;-1<T$g;T$g--){var T$H;(T$H=T$x[T$g])&&T$H.url===T$$&&(T$x[T$g]=null,T$H.destroy(),T$H.offAll(),this._infoPool.push(T$H))}delete T$N._resMap[T$$],this._next()}}},T$b._createLoad=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){var T$H=this;if(null==T$r&&(T$r=2),null==T$F&&(T$F=!0),void 0===T$g&&(T$g=!1),T$b instanceof Array)return this._loadAssets(T$b,T$u,T$Z,T$E,T$r,T$F,T$x);var T$w=T$x$.getRes(T$b);if(null!=T$w)T$z.timer.frameOnce(1,null,function(){T$Z&&T$Z.runWith(1),T$u&&T$u.runWith(T$w),T$H._loaderCount||T$H.event("complete")});else{var T$I=T$N._resMap[T$b];T$I?(T$u&&T$I._createListener("complete",T$u.caller,T$u.method,T$u.args,!1,!1),T$Z&&T$I._createListener("progress",T$Z.caller,T$Z.method,T$Z.args,!1,!1)):((T$I=this._infoPool.length?this._infoPool.pop():new T$o).url=T$b,T$I.clas=T$$,T$I.type=T$E,T$I.cache=T$F,T$I.group=T$x,T$I.ignoreCache=T$g,T$I.priority=T$r,T$u&&T$I.on("complete",T$u.caller,T$u.method,T$u.args),T$Z&&T$I.on("progress",T$Z.caller,T$Z.method,T$Z.args),T$N._resMap[T$b]=T$I,T$r=T$r<this._maxPriority?0<=T$r?T$r:0:this._maxPriority-1,this._resInfos[T$r].push(T$I),this._next())}return this},T$b._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var T$$=0;T$$<this._maxPriority;T$$++)for(var T$b=this._resInfos[T$$];0<T$b.length;){var T$u=T$b.shift();if(T$u)return this._doLoad(T$u)}this._loaderCount||this.event("complete")}},T$b._doLoad=function(T$b){var T$u=this._loaders.length?this._loaders.pop():new T$x$;this._loaderCount++,(this._loaderMap[T$b.url]=T$u).on("complete",null,T$E),T$u.on("progress",null,function(T$$){T$b.event("progress",T$$)}),T$u.on("error",null,function(T$$){T$E(null)}),T$b.loader=T$u;var T$Z=this;function T$E(T$$){T$u.offAll(),T$u._data=null,T$u._customParse=!1,T$u._url=null,T$u._class=null,T$u._type=null,T$Z._loaders.push(T$u),T$Z._loaderCount--,delete T$Z._loaderMap[T$b.url],T$Z._endLoad(T$b,T$$ instanceof Array?[T$$]:T$$),T$Z._next()}T$u._class=T$b.clas,1<=T$b.priority?(T$u.priority=T$b.priority,T$u.realTime=!1):(T$u.priority=0,T$u.realTime=!0),T$u.load(T$b.url,T$b.type,T$b.cache,T$b.group,T$b.ignoreCache)},T$b._endLoad=function(T$$,T$b){var T$u=T$$.url;if(null==T$b){var T$Z=this._failRes[T$u]||0;if(T$Z<this.retryNum)return console.warn("[warn]Retry to load:",T$u),this._failRes[T$u]=T$Z+1,void T$z.timer.once(this.retryDelay,this,this._addReTry,[T$$],!1);console.warn("[error]Failed to load:",T$u),this.event("error",T$u)}this._failRes[T$u]&&(this._failRes[T$u]=0),delete T$N._resMap[T$u],T$$.event("complete",T$b),T$$.destroy(),T$$.offAll(),this._infoPool.push(T$$)},T$b._addReTry=function(T$$){this._resInfos[this._maxPriority-1].push(T$$),this._next()},T$b.clearRes=function(T$$,T$b){void 0===T$b&&(T$b=!1),T$x$.clearRes(T$$,T$b)},T$b.getRes=function(T$$){return T$x$.getRes(T$$)},T$b.cacheRes=function(T$$,T$b){T$x$.cacheRes(T$$,T$b)},T$b.clearTextureRes=function(T$$){T$x$.clearTextureRes(T$$)},T$b.setGroup=function(T$$,T$b){T$x$.setGroup(T$$,T$b)},T$b.clearResByGroup=function(T$$){T$x$.clearResByGroup(T$$)},T$b.clearUnLoaded=function(){for(var T$$=0;T$$<this._maxPriority;T$$++){for(var T$b=this._resInfos[T$$],T$u=T$b.length-1;-1<T$u;T$u--){var T$Z=T$b[T$u];T$Z&&(T$Z.destroy(),T$Z.offAll(),this._infoPool.push(T$Z))}T$b.length=0}this._loaderCount=0,T$N._resMap={}},T$b.cancelLoadByUrls=function(T$$){if(T$$)for(var T$b=0,T$u=T$$.length;T$b<T$u;T$b++)this.cancelLoadByUrl(T$$[T$b])},T$b.cancelLoadByUrl=function(T$$){for(var T$b=0;T$b<this._maxPriority;T$b++)for(var T$u=this._resInfos[T$b],T$Z=T$u.length-1;-1<T$Z;T$Z--){var T$E=T$u[T$Z];T$E&&T$E.url===T$$&&(T$u[T$Z]=null,T$E.destroy(),T$E.offAll(),this._infoPool.push(T$E))}T$N._resMap[T$$]&&delete T$N._resMap[T$$]},T$b._loadAssets=function(T$$,T$u,T$F,T$b,T$Z,T$E,T$r){null==T$Z&&(T$Z=2),null==T$E&&(T$E=!0);for(var T$x=T$$.length,T$g=0,T$H=0,T$w=[],T$I=!0,T$o=0;T$o<T$x;T$o++){var T$N=T$$[T$o];if(!T$N)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+T$$);"string"==typeof T$N&&(T$N={url:T$N,type:T$b,size:1,priority:T$Z}),T$N.size||(T$N.size=1),T$N.progress=0,T$H+=T$N.size,T$w.push(T$N);var T$D=T$F?T$_.create(null,T$T,[T$N],!1):null,T$e=T$u||T$F?T$_.create(null,T$L,[T$N]):null;this.load(T$N.url,T$e,T$D,T$N.type,null!=T$N.priority&&0<=T$N.priority?T$N.priority:2,T$E,T$N.group||T$r)}function T$L(T$$,T$b){T$g++,T$$.progress=1,T$b||(T$I=!1),T$g===T$x&&T$u&&T$u.runWith(T$I)}function T$T(T$$,T$b){if(null!=T$F){T$$.progress=T$b;for(var T$u=0,T$Z=0;T$Z<T$w.length;T$Z++){var T$E=T$w[T$Z];T$u+=T$E.size*T$E.progress}var T$r=T$u/T$H;T$F.runWith(T$r)}}return this},T$N.cacheRes=function(T$$,T$b){T$x$.cacheRes(T$$,T$b)},T$N._resMap={},T$g(T$N,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),T$N.__init$=function(){T$o=function(T$$){function T$b(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,T$b.__super.call(this)}return T$w(T$b,"",T$H),T$b.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},T$b}()},T$N}(),T$H$=(function(T$$){function T$E(T$$){T$E.__super.call(this),T$$||(T$$=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var T$b=0,T$u=0,T$Z=0;T$Z<20;T$Z++)T$Z%5!=4?this._mat[T$b++]=T$$[T$Z]:this._alpha[T$u++]=T$$[T$Z];this._action=T$O.createFilterAction(32),this._action.data=this}T$w(T$E,"laya.filters.ColorFilter",T$T);var T$b=T$E.prototype;T$z.imps(T$b,{"laya.filters.IFilter":!0}),T$b.callNative=function(T$$){T$$._$P.cf=this;T$$.conchModel&&T$$.conchModel.setFilterMatrix&&T$$.conchModel.setFilterMatrix(this._mat,this._alpha)},T$D(0,T$b,"type",function(){return 32}),T$D(0,T$b,"action",function(){return this._action})}(),function(T$$){function T$Z(T$$,T$b,T$u){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===T$b&&(T$b=0),T$Z.__super.call(this),this._byteClass=T$u||T$m,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,T$$&&0<T$b&&T$b<65535&&this.connect(T$$,T$b)}T$w(T$Z,"laya.net.Socket",T$H);var T$b=T$Z.prototype;T$b.connect=function(T$$,T$b){var T$u="ws://"+T$$+":"+T$b;T$u="https:"==T$s.window.location.protocol?"wss://"+T$$+":"+T$b:"ws://"+T$$+":"+T$b,this.connectByUrl(T$u)},T$b.connectByUrl=function(T$$){var T$b=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new T$s.window.WebSocket(T$$,this.protocols):this._socket=new T$s.window.WebSocket(T$$),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(T$$){T$b._onOpen(T$$)},this._socket.onmessage=function(T$$){T$b._onMessage(T$$)},this._socket.onclose=function(T$$){T$b._onClose(T$$)},this._socket.onerror=function(T$$){T$b._onError(T$$)}},T$b.cleanSocket=function(){try{this._socket.close()}catch(T$$){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},T$b.close=function(){if(null!=this._socket)try{this._socket.close()}catch(T$$){}},T$b._onOpen=function(T$$){this._connected=!0,this.event("open",T$$)},T$b._onMessage=function(T$$){if(T$$&&T$$.data){var T$b=T$$.data;if(this.disableInput&&T$b)this.event("message",T$b);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var T$u=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,T$b&&("string"==typeof T$b?this._input.writeUTFBytes(T$b):this._input.writeArrayBuffer(T$b),this._addInputPosition=this._input.pos,this._input.pos=T$u),this.event("message",T$b)}}},T$b._onClose=function(T$$){this._connected=!1,this.event("close",T$$)},T$b._onError=function(T$$){this.event("error",T$$)},T$b.send=function(T$$){this._socket.send(T$$)},T$b.flush=function(){if(this._output&&0<this._output.length){var T$b;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(T$$){T$b=T$$}this._output.endian=this.endian,this._output.clear(),T$b&&this.event("error",T$b)}},T$D(0,T$b,"input",function(){return this._input}),T$D(0,T$b,"output",function(){return this._output}),T$D(0,T$b,"connected",function(){return this._connected}),T$D(0,T$b,"endian",function(){return this._endian},function(T$$){this._endian=T$$,null!=this._input&&(this._input.endian=T$$),null!=this._output&&(this._output.endian=T$$)}),T$Z.LITTLE_ENDIAN="littleEndian",T$Z.BIG_ENDIAN="bigEndian"}(),function(T$$){function T$x(){T$x.__super.call(this),this._$1__id=++T$x._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(T$x._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,T$X.currentResourceManager&&T$X.currentResourceManager.addResource(this)}T$w(T$x,"laya.resource.Resource",T$H);var T$b=T$x.prototype;return T$z.imps(T$b,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),T$b._setUrl=function(T$$){var T$b;this._url!==T$$&&(this._url&&((T$b=T$x._urlResourcesMap[this._url]).splice(T$b.indexOf(this),1),0===T$b.length&&delete T$x._urlResourcesMap[this._url]),T$$&&((T$b=T$x._urlResourcesMap[T$$])||(T$x._urlResourcesMap[T$$]=T$b=[]),T$b.push(this)),this._url=T$$)},T$b._getGroup=function(){return this._group},T$b._setGroup=function(T$$){var T$b;this._group!==T$$&&(this._group&&((T$b=T$x._groupResourcesMap[this._group]).splice(T$b.indexOf(this),1),0===T$b.length&&delete T$x._groupResourcesMap[this._group]),T$$&&((T$b=T$x._groupResourcesMap[T$$])||(T$x._groupResourcesMap[T$$]=T$b=[]),T$b.push(this)),this._group=T$$)},T$b._addReference=function(){this._referenceCount++},T$b._removeReference=function(){this._referenceCount--},T$b._clearReference=function(){this._referenceCount=0},T$b._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},T$b.recreateResource=function(){this.completeCreate()},T$b.disposeResource=function(){},T$b.activeResource=function(T$$){void 0===T$$&&(T$$=!1),this._lastUseFrameCount=T$A.loopCount,!this._destroyed&&this.__loaded&&(this._released||T$$)&&this.recreateResource()},T$b.releaseResource=function(T$$){return void 0===T$$&&(T$$=!0),!(!T$$&&this.lock)&&(!(this._released&&!T$$)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},T$b.onAsynLoaded=function(T$$,T$b,T$u){throw new Error("Resource: must override this function!")},T$b.destroy=function(){var T$$;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete T$x._idResourcesMap[this.id],this._url&&((T$$=T$x._urlResourcesMap[this._url])&&(T$$.splice(T$$.indexOf(this),1),0===T$$.length&&delete T$x._urlResourcesMap[this.url]),T$x$.clearRes(this._url),this.__loaded||T$O.cancelLoadByUrl(this._url)),this._group&&((T$$=T$x._groupResourcesMap[this._group]).splice(T$$.indexOf(this),1),0===T$$.length&&delete T$x._groupResourcesMap[this.url]))},T$b.completeCreate=function(){this._released=!1,this.event("recovered",this)},T$b.dispose=function(){this.destroy()},T$D(0,T$b,"memorySize",function(){return this._memorySize},function(T$$){var T$b=T$$-this._memorySize;this._memorySize=T$$,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,T$b),this.resourceManager&&this.resourceManager.addSize(T$b)}),T$D(0,T$b,"_loaded",null,function(T$$){this.__loaded=T$$}),T$D(0,T$b,"loaded",function(){return this.__loaded}),T$D(0,T$b,"id",function(){return this._$1__id}),T$D(0,T$b,"destroyed",function(){return this._destroyed}),T$D(0,T$b,"group",function(){return this._getGroup()},function(T$$){this._setGroup(T$$)}),T$D(0,T$b,"resourceManager",function(){return this._resourceManager}),T$D(0,T$b,"url",function(){return this._url}),T$D(0,T$b,"released",function(){return this._released}),T$D(0,T$b,"referenceCount",function(){return this._referenceCount}),T$x.getResourceByID=function(T$$){return T$x._idResourcesMap[T$$]},T$x.getResourceByURL=function(T$$,T$b){return void 0===T$b&&(T$b=0),null==T$x._urlResourcesMap[T$$]?null:T$x._urlResourcesMap[T$$][T$b]},T$x.getResourceCountByURL=function(T$$){return T$x._urlResourcesMap[T$$].length},T$x.destroyUnusedResources=function(T$$){var T$b;if(T$$){var T$u=T$x._groupResourcesMap[T$$];if(T$u)for(var T$Z=T$u.slice(),T$E=0,T$r=T$Z.length;T$E<T$r;T$E++)(T$b=T$Z[T$E]).lock||0!==T$b._referenceCount||T$b.destroy()}else for(var T$F in T$x._idResourcesMap)(T$b=T$x._idResourcesMap[T$F]).lock||0!==T$b._referenceCount||T$b.destroy()},T$x._uniqueIDCounter=0,T$x._idResourcesMap={},T$x._urlResourcesMap={},T$x._groupResourcesMap={},T$x}()),T$w$=function(T$$){function T$t(T$$,T$b){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,T$t.__super.call(this),T$$&&null!=T$$._addReference&&T$$._addReference(),this.setTo(T$$,T$b)}T$w(T$t,"laya.resource.Texture",T$H);var T$b=T$t.prototype;return T$b._setUrl=function(T$$){this.url=T$$},T$b.setTo=function(T$$,T$b){if(T$$ instanceof T$F.HTMLElement){var T$u=T$y$.create("2D",T$$);this.bitmap=T$u}else this.bitmap=T$$;if(this.uv=T$b||T$t.DEF_UV,T$$){this._w=T$$.width,this._h=T$$.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var T$Z=this;if(this._loaded)T$O.addToAtlas&&T$O.addToAtlas(T$Z);else{var T$E=T$$;T$E instanceof laya.resource.HTMLImage&&T$E.image&&T$E.image.addEventListener("load",function(T$$){T$O.addToAtlas&&T$O.addToAtlas(T$Z)},!1)}}},T$b.active=function(){this.bitmap&&this.bitmap.activeResource()},T$b.destroy=function(T$$){if(void 0===T$$&&(T$$=!1),this.alphaTexture&&(this.alphaTexture.destroy(T$$),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var T$b=this.bitmap;T$$?(T$Y.isConchApp&&T$b.source&&T$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,T$b.dispose(),T$b._clearReference()):(T$b._removeReference(),0==T$b.referenceCount&&(T$Y.isConchApp&&T$b.source&&T$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,T$b.dispose())),this.url&&this===T$z.loader.getRes(this.url)&&T$z.loader.clearRes(this.url,T$$),this._loaded=!1}},T$b.load=function(T$$){var T$b=this;this._loaded=!1,T$$=T$p.customFormat(T$$);var T$u=this.bitmap||(this.bitmap=T$i$.create(T$$));T$u.uri=T$$,T$u&&T$u._addReference();var T$Z=this;T$u.onload=function(){T$u.onload=null,T$Z._loaded=!0,T$b.sourceWidth=T$b._w=T$u.width,T$b.sourceHeight=T$b._h=T$u.height,T$Z.event("loaded",this),T$O.addToAtlas&&T$O.addToAtlas(T$Z)}},T$b.addTextureToAtlas=function(T$$){T$O.addTextureToAtlas(this)},T$b.getPixels=function(T$$,T$b,T$u,T$Z){if(T$Y.isConchApp){var T$E=this.bitmap;if(T$E.source&&T$E.source.getImageData){var T$r=T$E.source.getImageData(T$$,T$b,T$u,T$Z),T$F=new Uint8Array(T$r);return Array.from(T$F)}return null}return T$Y.isWebGL?T$O.getTexturePixels(this,T$$,T$b,T$u,T$Z):(T$s.canvas.size(T$u,T$Z),T$s.canvas.clear(),T$s.context.drawTexture(this,-T$$,-T$b,this.width,this.height,0,0),T$s.context.getImageData(0,0,T$u,T$Z).data)},T$b.onAsynLoaded=function(T$$,T$b){if(T$b){if("function"!=typeof T$b._addReference)throw new Error("bitmap._addReference is not a function. "+T$b.className+" "+typeof T$b._addReference+" "+T$b.constructor);T$b._addReference()}this.setTo(T$b,this.uv),this._loaded&&this.event("loaded",this)},T$D(0,T$b,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),T$D(0,T$b,"loaded",function(){return this._loaded}),T$D(0,T$b,"released",function(){return!this.bitmap||this.bitmap.released}),T$D(0,T$b,"width",function(){return this._w?this._w:this.uv&&this.uv!==T$t.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(T$$){this._w=T$$,this.sourceWidth||(this.sourceWidth=T$$)}),T$D(0,T$b,"repeat",function(){return!T$Y.isWebGL||!this.bitmap||this.bitmap.repeat},function(T$$){T$$&&T$Y.isWebGL&&this.bitmap&&(this.bitmap.repeat=T$$)&&(this.bitmap.enableMerageInAtlas=!1)}),T$D(0,T$b,"height",function(){return this._h?this._h:this.uv&&this.uv!==T$t.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(T$$){this._h=T$$,this.sourceHeight||(this.sourceHeight=T$$)}),T$D(0,T$b,"isLinearSampling",function(){return!T$Y.isWebGL||9728!=this.bitmap.minFifter},function(T$$){!T$$&&T$Y.isWebGL&&(T$$||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),T$t.moveUV=function(T$$,T$b,T$u){for(var T$Z=0;T$Z<8;T$Z+=2)T$u[T$Z]+=T$$,T$u[T$Z+1]+=T$b;return T$u},T$t.create=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){void 0===T$r&&(T$r=0),void 0===T$F&&(T$F=0),void 0===T$x&&(T$x=0),void 0===T$g&&(T$g=0);var T$H=T$$ instanceof laya.resource.Texture,T$w=T$H?T$$.uv:T$t.DEF_UV,T$I=T$H?T$$.bitmap:T$$,T$o=T$O.isAtlas(T$I);if(T$o){var T$N=T$I._atlaser,T$D=T$$._atlasID;if(-1==T$D)throw new Error("create texture error");T$I=T$N._inAtlasTextureBitmapValue[T$D],T$w=T$N._inAtlasTextureOriUVValue[T$D]}var T$e=new T$t(T$I,null);T$I.width&&T$b+T$Z>T$I.width&&(T$Z=T$I.width-T$b),T$I.height&&T$u+T$E>T$I.height&&(T$E=T$I.height-T$u),T$e.width=T$Z,T$e.height=T$E,T$e.offsetX=T$r,T$e.offsetY=T$F,T$e.sourceWidth=T$x||T$Z,T$e.sourceHeight=T$g||T$E;var T$L=1/T$I.width,T$T=1/T$I.height;T$b*=T$L,T$u*=T$T,T$Z*=T$L,T$E*=T$T;var T$_=T$e.uv[0],T$y=T$e.uv[1],T$S=T$e.uv[4],T$P=T$e.uv[5],T$i=T$S-T$_,T$z=T$P-T$y,T$q=T$t.moveUV(T$w[0],T$w[1],[T$b,T$u,T$b+T$Z,T$u,T$b+T$Z,T$u+T$E,T$b,T$u+T$E]);T$e.uv=[T$_+T$q[0]*T$i,T$y+T$q[1]*T$z,T$S-(1-T$q[2])*T$i,T$y+T$q[3]*T$z,T$S-(1-T$q[4])*T$i,T$P-(1-T$q[5])*T$z,T$_+T$q[6]*T$i,T$P-(1-T$q[7])*T$z],T$o&&T$e.addTextureToAtlas();var T$a=T$I.scaleRate;return T$a&&1!=T$a?(T$e.sourceWidth/=T$a,T$e.sourceHeight/=T$a,T$e.width/=T$a,T$e.height/=T$a,T$e.scaleRate=T$a,T$e.offsetX/=T$a,T$e.offsetY/=T$a):T$e.scaleRate=1,T$e},T$t.createFromTexture=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$$.scaleRate;1!=T$r&&(T$b*=T$r,T$u*=T$r,T$Z*=T$r,T$E*=T$r);var T$F=T$a.TEMP.setTo(T$b-T$$.offsetX,T$u-T$$.offsetY,T$Z,T$E),T$x=T$F.intersection(T$t._rect1.setTo(0,0,T$$.width,T$$.height),T$t._rect2);if(!T$x)return null;var T$g=T$t.create(T$$,T$x.x,T$x.y,T$x.width,T$x.height,T$x.x-T$F.x,T$x.y-T$F.y,T$Z,T$E);if(T$g.bitmap&&T$g.bitmap._removeReference)return T$g.bitmap._removeReference(),T$g;var T$H="bitmap:"+(T$g.bitmap?T$g.bitmap.constructor?T$g.bitmap.constructor.name:T$g.bitmap.__className:"")+", url:"+(T$$.url+" | "+(T$g.bitmap?T$g.bitmap.url:T$$.url))+", x="+T$b+",y="+T$u+",width="+T$Z+",height="+T$E+", result="+(T$x?T$x.x+","+T$x.y+","+T$x.width+","+T$x.height:"null")+", rect="+T$F.x+","+T$F.y+","+T$F.width+","+T$F.height;throw new Error("报错：bitmap._removeReference is not a function  "+T$H)},T$t.DEF_UV=[0,0,1,0,1,1,0,1],T$t.INV_UV=[0,1,1,1,1,0,0,0],T$t._rect1=new T$a,T$t._rect2=new T$a,T$t}(),T$$=function(T$$){var T$x;function T$r(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,T$r.__super.call(this)}T$w(T$r,"laya.utils.TimeLine",T$H);var T$b=T$r.prototype;return T$b.to=function(T$$,T$b,T$u,T$Z,T$E){return void 0===T$E&&(T$E=0),this._create(T$$,T$b,T$u,T$Z,T$E,!0)},T$b.from=function(T$$,T$b,T$u,T$Z,T$E){return void 0===T$E&&(T$E=0),this._create(T$$,T$b,T$u,T$Z,T$E,!1)},T$b._create=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=T$G.getItemByClass("tweenData",T$x);return T$F.isTo=T$r,T$F.type=0,T$F.target=T$$,T$F.duration=T$u,T$F.data=T$b,T$F.startTime=this._startTime+T$E,T$F.endTime=T$F.startTime+T$F.duration,T$F.ease=T$Z,this._startTime=Math.max(T$F.endTime,this._startTime),this._tweenDataList.push(T$F),this._startTimeSort=!0,this._endTimeSort=!0,this},T$b.addLabel=function(T$$,T$b){var T$u=T$G.getItemByClass("tweenData",T$x);return T$u.type=1,T$u.data=T$$,T$u.endTime=T$u.startTime=this._startTime+T$b,this._labelDic||(this._labelDic={}),this._labelDic[T$$]=T$u,this._tweenDataList.push(T$u),this},T$b.removeLabel=function(T$$){if(this._labelDic&&this._labelDic[T$$]){var T$b=this._labelDic[T$$];if(T$b){var T$u=this._tweenDataList.indexOf(T$b);-1<T$u&&this._tweenDataList.splice(T$u,1)}delete this._labelDic[T$$]}},T$b.gotoTime=function(T$$){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var T$b,T$u,T$Z,T$E;for(var T$r in this._firstTweenDic)if(T$u=this._firstTweenDic[T$r])for(var T$F in T$u)T$u.diyTarget.hasOwnProperty(T$F)&&(T$u.diyTarget[T$F]=T$u[T$F]);for(T$r in this._tweenDic)(T$b=this._tweenDic[T$r]).clear(),delete this._tweenDic[T$r];if(this._index=0,this._gidIndex=0,this._currTime=T$$,this._lastTime=T$s.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=T$Z=this._tweenDataList.concat(),T$Z.sort(function(T$$,T$b){return T$$.endTime>T$b.endTime?1:T$$.endTime<T$b.endTime?-1:0})}else T$Z=this._endTweenDataList;for(var T$x=0,T$g=T$Z.length;T$x<T$g;T$x++)if(0==(T$E=T$Z[T$x]).type){if(!(T$$>=T$E.endTime))break;this._index=Math.max(this._index,T$x+1);var T$H=T$E.data;if(T$E.isTo)for(var T$w in T$H)T$E.target[T$w]=T$H[T$w]}for(T$x=0,T$g=this._tweenDataList.length;T$x<T$g;T$x++)0==(T$E=this._tweenDataList[T$x]).type&&T$$>=T$E.startTime&&T$$<T$E.endTime&&(this._index=Math.max(this._index,T$x+1),this._gidIndex++,(T$b=T$G.getItemByClass("tween",T$h))._create(T$E.target,T$E.data,T$E.duration,T$E.ease,T$_.create(this,this._animComplete,[this._gidIndex]),0,!1,T$E.isTo,!0,!1),T$b.setStartTime(this._currTime-(T$$-T$E.startTime)),T$b._updateEase(this._currTime),T$b.gid=this._gidIndex,this._tweenDic[this._gidIndex]=T$b)}},T$b.gotoLabel=function(T$$){if(null!=this._labelDic){var T$b=this._labelDic[T$$];T$b&&this.gotoTime(T$b.startTime)}},T$b.pause=function(){T$z.timer.clear(this,this._update)},T$b.resume=function(){this.play(this._currTime,this._loopKey)},T$b.play=function(T$$,T$b){if(void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(T$$,T$b){return T$$.startTime>T$b.startTime?1:T$$.startTime<T$b.startTime?-1:0});for(var T$u=0,T$Z=this._tweenDataList.length;T$u<T$Z;T$u++){var T$E=this._tweenDataList[T$u];if(null!=T$E&&0==T$E.type){var T$r=T$E.target,T$F=T$r.$_GID||(T$r.$_GID=T$d.getGID()),T$x=null;for(var T$g in null==this._firstTweenDic[T$F]?((T$x={}).diyTarget=T$r,this._firstTweenDic[T$F]=T$x):T$x=this._firstTweenDic[T$F],T$E.data)null==T$x[T$g]&&(T$x[T$g]=T$r[T$g])}}}"string"==typeof T$$?this.gotoLabel(T$$):this.gotoTime(T$$),this._loopKey=T$b,this._lastTime=T$s.now(),T$z.timer.frameLoop(1,this,this._update)}},T$b._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var T$$ in this._tweenDic)(T$b=this._tweenDic[T$$]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var T$b,T$u=T$s.now(),T$Z=T$u-this._lastTime,T$E=this._currTime+=T$Z*this.scale;for(T$$ in this._lastTime=T$u,this._tweenDic)(T$b=this._tweenDic[T$$])._updateEase(T$E);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var T$r=this._tweenDataList[this._index];T$E>=T$r.startTime&&(this._index++,0==T$r.type?(this._gidIndex++,(T$b=T$G.getItemByClass("tween",T$h))._create(T$r.target,T$r.data,T$r.duration,T$r.ease,T$_.create(this,this._animComplete,[this._gidIndex]),0,!1,T$r.isTo,!0,!1),T$b.setStartTime(T$E),T$b.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=T$b)._updateEase(T$E)):this.event("label",T$r.data))}},T$b._animComplete=function(T$$){this._tweenDic[T$$]&&delete this._tweenDic[T$$]},T$b._complete=function(){this.event("complete")},T$b.reset=function(){var T$$;if(this._labelDic)for(T$$ in this._labelDic)delete this._labelDic[T$$];for(T$$ in this._tweenDic)this._tweenDic[T$$].clear(),delete this._tweenDic[T$$];for(T$$ in this._firstTweenDic)delete this._firstTweenDic[T$$];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var T$b,T$u=0;for(T$b=this._tweenDataList.length,T$u=0;T$u<T$b;T$u++)this._tweenDataList[T$u]&&this._tweenDataList[T$u].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,T$z.timer.clear(this,this._update)},T$b.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},T$D(0,T$b,"index",function(){return this._frameIndex},function(T$$){this._frameIndex=T$$,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),T$D(0,T$b,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),T$r.to=function(T$$,T$b,T$u,T$Z,T$E){return void 0===T$E&&(T$E=0),(new T$r).to(T$$,T$b,T$u,T$Z,T$E)},T$r.from=function(T$$,T$b,T$u,T$Z,T$E){return void 0===T$E&&(T$E=0),(new T$r).from(T$$,T$b,T$u,T$Z,T$E)},T$r.__init$=function(){T$x=function(){function T$$(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return T$w(T$$,""),T$$.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,T$G.recover("tweenData",this)},T$$}()},T$r}(),T$I$=function(T$E){function T$u(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,T$u.__super.call(this),this._style=T$x.EMPTY}T$w(T$u,"laya.display.Sprite",T$E);var T$$=T$u.prototype;return T$z.imps(T$$,{"laya.display.ILayout":!0}),T$$.createConchModel=function(){return new ConchNode},T$$.destroy=function(T$$){if(void 0===T$$&&(T$$=!0),this._releaseMem(),!this._destroyed){this.filters=null;var T$b=this.mask;T$b&&(this.mask=null,T$b.destroy(T$$))}T$E.prototype.destroy.call(this,T$$),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},T$$.updateZOrder=function(){T$d.updateOrder(this._childs)&&this.repaint()},T$$.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},T$$.setBounds=function(T$$){this._set$P("uBounds",T$$)},T$$.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new T$a),T$a._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},T$$.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new T$a),T$a._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},T$$._boundPointsToParent=function(T$$){void 0===T$$&&(T$$=!1);var T$b=0,T$u=0;this._style&&(T$b=this._style._tf.translateX,T$u=this._style._tf.translateY,T$$=T$$||0!==this._style._tf.rotate,this._style.scrollRect&&(T$b+=this._style.scrollRect.x,T$u+=this._style.scrollRect.y));var T$Z=this._getBoundPointsM(T$$);if(!T$Z||T$Z.length<1)return T$Z;if(8!=T$Z.length&&(T$Z=T$$?T$P.scanPList(T$Z):T$a._getWrapRec(T$Z,T$a.TEMP)._getBoundPoints()),!this.transform)return T$d.transPointList(T$Z,this._x-T$b,this._y-T$u),T$Z;var T$E=T$q.TEMP,T$r=0,T$F=T$Z.length;for(T$r=0;T$r<T$F;T$r+=2)T$E.x=T$Z[T$r],T$E.y=T$Z[T$r+1],this.toParentPoint(T$E),T$Z[T$r]=T$E.x,T$Z[T$r+1]=T$E.y;return T$Z},T$$.getGraphicBounds=function(T$$){return void 0===T$$&&(T$$=!1),this._graphics?this._graphics.getBounds(T$$):T$a.TEMP.setTo(0,0,0,0)},T$$._getBoundPointsM=function(T$$){if(void 0===T$$&&(T$$=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var T$b=T$d.clearArray(this._$P.temBM),T$u=T$a.TEMP;return T$u.copyFrom(this.scrollRect),T$d.concatArray(T$b,T$u._getBoundPoints()),T$b}for(var T$Z,T$E,T$r,T$F=this._graphics?this._graphics.getBoundPoints():T$d.clearArray(this._$P.temBM),T$x=0,T$g=(T$r=this._childs).length;T$x<T$g;T$x++)(T$Z=T$r[T$x])instanceof laya.display.Sprite&&1==T$Z.visible&&(T$E=T$Z._boundPointsToParent(T$$))&&(T$F=T$F?T$d.concatArray(T$F,T$E):T$E);return T$F},T$$.getStyle=function(){return this._style===T$x.EMPTY&&(this._style=new T$x),this._style},T$$.setStyle=function(T$$){this._style=T$$},T$$._adjustTransform=function(){this._tfChanged=!1;var T$$,T$b=this._style._tf,T$u=T$b.scaleX,T$Z=T$b.scaleY;if(T$b.rotate||1!==T$u||1!==T$Z||T$b.skewX||T$b.skewY){(T$$=this._transform||(this._transform=T$V.create())).bTransform=!0;var T$E=.0174532922222222*(T$b.rotate-T$b.skewX),T$r=.0174532922222222*(T$b.rotate+T$b.skewY),T$F=Math.cos(T$r),T$x=Math.sin(T$r),T$g=Math.sin(T$E),T$H=Math.cos(T$E);return T$$.a=T$u*T$F,T$$.b=T$u*T$x,T$$.c=-T$Z*T$g,T$$.d=T$Z*T$H,T$$.tx=T$$.ty=0,T$$}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,T$$},T$$.pos=function(T$$,T$b,T$u){if(void 0===T$u&&(T$u=!1),this._x!==T$$||this._y!==T$b){if(this.destroyed)return this;if(T$u){this._x=T$$,this._y=T$b,this.conchModel&&this.conchModel.pos(this._x,this._y);var T$Z=this._parent;T$Z&&0===T$Z._repaint&&(T$Z._repaint=1,T$Z.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=T$$,this.y=T$b}return this},T$$.pivot=function(T$$,T$b){return this.pivotX=T$$,this.pivotY=T$b,this},T$$.size=function(T$$,T$b){return this.width=T$$,this.height=T$b,this},T$$.scale=function(T$$,T$b,T$u){void 0===T$u&&(T$u=!1);var T$Z=this.getStyle(),T$E=T$Z._tf;if(T$E.scaleX!=T$$||T$E.scaleY!=T$b){if(this.destroyed)return this;if(T$u){T$Z.setScale(T$$,T$b),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$$,T$b),this._renderType|=4;var T$r=this._parent;T$r&&0===T$r._repaint&&(T$r._repaint=1,T$r.parentRepaint())}else this.scaleX=T$$,this.scaleY=T$b}return this},T$$.skew=function(T$$,T$b){return this.skewX=T$$,this.skewY=T$b,this},T$$.render=function(T$$,T$b,T$u){T$A.spriteCount++,T$M.renders[this._renderType]._fun(this,T$$,T$b+this._x,T$u+this._y),this._repaint=0},T$$.drawToCanvas=function(T$$,T$b,T$u,T$Z){if(T$Y.isConchNode){var T$E=T$y$.create("2D");return new T$k(T$$,T$b,T$E).ctx.setCanvasType(1),this.conchModel.drawToCanvas(T$E.source,T$u,T$Z),T$E}return T$O.drawToCanvas(this,this._renderType,T$$,T$b,T$u,T$Z)},T$$.customRender=function(T$$,T$b,T$u){this._renderType|=1024},T$$._applyFilters=function(){var T$$;if(!T$Y.isWebGL&&((T$$=this._$P.filters)&&!(T$$.length<1)))for(var T$b=0,T$u=T$$.length;T$b<T$u;T$b++)T$$[T$b].action.apply(this._$P.cacheCanvas)},T$$._isHaveGlowFilter=function(){var T$$,T$b=0;if(this.filters)for(T$b=0;T$b<this.filters.length;T$b++)if(8==this.filters[T$b].type)return!0;for(T$b=0,T$$=this._childs.length;T$b<T$$;T$b++)if(this._childs[T$b]._isHaveGlowFilter())return!0;return!1},T$$.localToGlobal=function(T$$,T$b){void 0===T$b&&(T$b=!1),!0===T$b&&(T$$=new T$q(T$$.x,T$$.y));for(var T$u=this;T$u&&T$u!=T$z.stage;)T$$=T$u.toParentPoint(T$$),T$u=T$u.parent;return T$$},T$$.globalToLocal=function(T$$,T$b){void 0===T$b&&(T$b=!1),T$b&&(T$$=new T$q(T$$.x,T$$.y));for(var T$u=this,T$Z=[];T$u&&T$u!=T$z.stage;)T$Z.push(T$u),T$u=T$u.parent;for(var T$E=T$Z.length-1;0<=T$E;)T$$=(T$u=T$Z[T$E]).fromParentPoint(T$$),T$E--;return T$$},T$$.toParentPoint=function(T$$){if(!T$$)return T$$;T$$.x-=this.pivotX,T$$.y-=this.pivotY,this.transform&&this._transform.transformPoint(T$$),T$$.x+=this._x,T$$.y+=this._y;var T$b=this._style.scrollRect;return T$b&&(T$$.x-=T$b.x,T$$.y-=T$b.y),T$$},T$$.fromParentPoint=function(T$$){if(!T$$)return T$$;T$$.x-=this._x,T$$.y-=this._y;var T$b=this._style.scrollRect;return T$b&&(T$$.x+=T$b.x,T$$.y+=T$b.y),this.transform&&this._transform.invertTransformPoint(T$$),T$$.x+=this.pivotX,T$$.y+=this.pivotY,T$$},T$$.on=function(T$$,T$b,T$u,T$Z){return 1!==this._mouseEnableState&&this.isMouseEvent(T$$)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(T$$,T$b,T$u,T$Z,!1)):T$E.prototype.on.call(this,T$$,T$b,T$u,T$Z)},T$$.once=function(T$$,T$b,T$u,T$Z){return 1!==this._mouseEnableState&&this.isMouseEvent(T$$)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(T$$,T$b,T$u,T$Z,!0)):T$E.prototype.once.call(this,T$$,T$b,T$u,T$Z)},T$$._$2__onDisplay=function(){if(1!==this._mouseEnableState){var T$$=this;for(T$$=T$$.parent;T$$&&1!==T$$._mouseEnableState&&!T$$._getBit(2);)T$$.mouseEnabled=!0,T$$._setBit(2,!0),T$$=T$$.parent}},T$$.loadImage=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=this;return void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0),this.graphics.loadImage(T$$,T$b,T$u,T$Z,T$E,function(T$$){T$F.destroyed||(T$F.size(T$b+(T$Z||T$$.width),T$u+(T$E||T$$.height)),T$F.repaint(),T$r&&T$r.runWith(T$$))}),this},T$$.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},T$$._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},T$$._childChanged=function(T$$){this._childs.length?this._renderType|=2048:this._renderType&=-2049,T$$&&this._get$P("hasZorder")&&T$z.timer.callLater(this,this.updateZOrder),this.repaint()},T$$.parentRepaint=function(){var T$$=this._parent;T$$&&0===T$$._repaint&&(T$$._repaint=1,T$$.parentRepaint())},T$$.startDrag=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){void 0===T$b&&(T$b=!1),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=300),void 0===T$r&&(T$r=!1),void 0===T$F&&(T$F=.92),this._$P.dragging||this._set$P("dragging",new T$f),this._$P.dragging.start(this,T$$,T$b,T$u,T$Z,T$E,T$r,T$F)},T$$.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},T$$._releaseMem=function(){if(this._$P){var T$$=this._$P.cacheCanvas;T$$&&T$$.ctx&&(T$G.recover("RenderContext",T$$.ctx),T$$.ctx.canvas.size(0,0),T$$.ctx=null);var T$b=this._$P._filterCache;T$b&&(T$b.destroy(),T$b.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},T$$._setDisplay=function(T$$){T$$||this._releaseMem(),T$E.prototype._setDisplay.call(this,T$$)},T$$.hitTestPoint=function(T$$,T$b){var T$u=this.globalToLocal(T$q.TEMP.setTo(T$$,T$b));return T$$=T$u.x,T$b=T$u.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?T$a.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(T$$,T$b)},T$$.getMousePoint=function(){return this.globalToLocal(T$q.TEMP.setTo(T$z.stage.mouseX,T$z.stage.mouseY))},T$$._getWords=function(){return null},T$$._addChildsToLayout=function(T$$){var T$b=this._getWords();if(null==T$b&&0==this._childs.length)return!1;if(T$b)for(var T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++)T$$.push(T$b[T$u]);T$u=0;for(var T$E=this._childs.length;T$u<T$E;++T$u){var T$r=this._childs[T$u];T$r._style._enableLayout()&&T$r._addToLayout(T$$)}return!0},T$$._addToLayout=function(T$$){this._style.absolute||(this._style.block?T$$.push(this):this._addChildsToLayout(T$$)&&(this.x=this.y=0))},T$$._isChar=function(){return!1},T$$._getCSSStyle=function(){return this._style.getCSSStyle()},T$$._setAttributes=function(T$$,T$b){switch(T$$){case"x":this.x=parseFloat(T$b);break;case"y":this.y=parseFloat(T$b);break;case"width":this.width=parseFloat(T$b);break;case"height":this.height=parseFloat(T$b);break;default:this[T$$]=T$b}},T$$._layoutLater=function(){this.parent&&this.parent._layoutLater()},T$D(0,T$$,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(T$$){this._optimizeScrollRect!=T$$&&(this._optimizeScrollRect=T$$,this.conchModel&&this.conchModel.optimizeScrollRect(T$$))}),T$D(0,T$$,"customRenderEnable",null,function(T$$){if(T$$&&(this._renderType|=1024,T$Y.isConchNode)){T$u.CustomList.push(this);var T$b=new T$y$("2d");T$b._setContext(new CanvasRenderingContext2D),this.customContext=new T$k(0,0,T$b),T$b.context.setCanvasType&&T$b.context.setCanvasType(2),this.conchModel.custom(T$b.context)}}),T$D(0,T$$,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(T$$){this.cacheAs=T$$?this._$P.hasFilter?"none":"normal":"none"}),T$D(0,T$$,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(T$$){var T$b=this._$P.cacheCanvas;if(T$$!==(T$b?T$b.type:"none")){if("none"!==T$$)this._getBit(1)||this._setUpNoticeType(1),T$b||(T$b=this._set$P("cacheCanvas",T$G.getItemByClass("cacheCanvas",Object))),T$b.type=T$$,T$b.reCache=!0,this._renderType|=16,"bitmap"==T$$&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(T$b){var T$u=T$b;T$u&&T$u.ctx&&(T$G.recover("RenderContext",T$u.ctx),T$u.ctx.canvas.size(0,0),T$u.ctx=null),T$G.recover("cacheCanvas",T$b)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),T$D(0,T$$,"zOrder",function(){return this._zOrder},function(T$$){this._zOrder!=T$$&&(this._zOrder=T$$,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(T$$),this._parent&&(T$$&&this._parent._set$P("hasZorder",!0),T$z.timer.callLater(this._parent,this.updateZOrder)))}),T$D(0,T$$,"rotation",function(){return this._style._tf.rotate},function(T$$){var T$b=this.getStyle();if(T$b._tf.rotate!==T$$){T$b.setRotate(T$$),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(T$$),this._renderType|=4;var T$u=this._parent;T$u&&0===T$u._repaint&&(T$u._repaint=1,T$u.parentRepaint())}}),T$D(0,T$$,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(T$$){this._width!==T$$&&(this._width=T$$,this.conchModel&&this.conchModel.size(T$$,this._height),this.repaint())}),T$D(0,T$$,"x",function(){return this._x},function(T$$){if(this._x!==T$$){if(this.destroyed)return;this._x=T$$,this.conchModel&&this.conchModel.pos(T$$,this._y);var T$b=this._parent;T$b&&0===T$b._repaint&&(T$b._repaint=1,T$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),T$D(0,T$$,"globalScaleY",function(){for(var T$$=1,T$b=this;T$b&&T$b!==T$z.stage;)T$$*=T$b.scaleY,T$b=T$b.parent;return T$$}),T$D(0,T$$,"hitArea",function(){return this._$P.hitArea},function(T$$){this._set$P("hitArea",T$$)}),T$D(0,T$$,"staticCache",function(){return this._$P.staticCache},function(T$$){this._set$P("staticCache",T$$),T$$||this.reCache()}),T$D(0,T$$,"texture",function(){return this._texture},function(T$$){this._texture!=T$$&&(this._texture=T$$,this.graphics.cleanByTexture(T$$,0,0))}),T$D(0,T$$,"y",function(){return this._y},function(T$$){if(this._y!==T$$){if(this.destroyed)return;this._y=T$$,this.conchModel&&this.conchModel.pos(this._x,T$$);var T$b=this._parent;T$b&&0===T$b._repaint&&(T$b._repaint=1,T$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),T$D(0,T$$,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(T$$){this._height!==T$$&&(this._height=T$$,this.conchModel&&this.conchModel.size(this._width,T$$),this.repaint())}),T$D(0,T$$,"blendMode",function(){return this._style.blendMode},function(T$$){this.getStyle().blendMode=T$$,this.conchModel&&this.conchModel.blendMode(T$$),T$$&&"source-over"!=T$$?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),T$D(0,T$$,"scaleX",function(){return this._style._tf.scaleX},function(T$$){var T$b=this.getStyle();if(T$b._tf.scaleX!==T$$){T$b.setScaleX(T$$),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$$,T$b._tf.scaleY),this._renderType|=4;var T$u=this._parent;T$u&&0===T$u._repaint&&(T$u._repaint=1,T$u.parentRepaint())}}),T$D(0,T$$,"scaleY",function(){return this._style._tf.scaleY},function(T$$){var T$b=this.getStyle();if(T$b._tf.scaleY!==T$$){T$b.setScaleY(T$$),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(T$b._tf.scaleX,T$$),this._renderType|=4;var T$u=this._parent;T$u&&0===T$u._repaint&&(T$u._repaint=1,T$u.parentRepaint())}}),T$D(0,T$$,"stage",function(){return T$z.stage}),T$D(0,T$$,"skewX",function(){return this._style._tf.skewX},function(T$$){var T$b=this.getStyle();if(T$b._tf.skewX!==T$$){T$b.setSkewX(T$$),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(T$$,T$b._tf.skewY),this._renderType|=4;var T$u=this._parent;T$u&&0===T$u._repaint&&(T$u._repaint=1,T$u.parentRepaint())}}),T$D(0,T$$,"scrollRect",function(){return this._style.scrollRect},function(T$$){this.getStyle().scrollRect=T$$,this.repaint(),T$$?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(T$$.x,T$$.y,T$$.width,T$$.height)):(this._renderType&=-129,this.conchModel&&(T$u.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),T$D(0,T$$,"skewY",function(){return this._style._tf.skewY},function(T$$){var T$b=this.getStyle();if(T$b._tf.skewY!==T$$){T$b.setSkewY(T$$),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(T$b._tf.skewX,T$$),this._renderType|=4;var T$u=this._parent;T$u&&0===T$u._repaint&&(T$u._repaint=1,T$u.parentRepaint())}}),T$D(0,T$$,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(T$$){this._tfChanged=!1,(this._transform=T$$)&&(this._x=T$$.tx,this._y=T$$.ty,T$$.tx=T$$.ty=0,this.conchModel&&this.conchModel.transform(T$$.a,T$$.b,T$$.c,T$$.d,this._x,this._y)),T$$?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),T$D(0,T$$,"pivotX",function(){return this._style._tf.translateX},function(T$$){this.getStyle().setTranslateX(T$$),this.conchModel&&this.conchModel.pivot(T$$,this._style._tf.translateY),this.repaint()}),T$D(0,T$$,"pivotY",function(){return this._style._tf.translateY},function(T$$){this.getStyle().setTranslateY(T$$),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,T$$),this.repaint()}),T$D(0,T$$,"alpha",function(){return this._style.alpha},function(T$$){this._style&&this._style.alpha!==T$$&&(T$$=T$$<0?0:1<T$$?1:T$$,this.getStyle().alpha=T$$,this.conchModel&&this.conchModel.alpha(T$$),1!==T$$?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),T$D(0,T$$,"visible",function(){return this._style.visible},function(T$$){this._style&&this._style.visible!==T$$&&(this.getStyle().visible=T$$,this.conchModel&&this.conchModel.visible(T$$),this.parentRepaint())}),T$D(0,T$$,"graphics",function(){return this._graphics||(this.graphics=T$O.createGraphics())},function(T$$){this._graphics&&(this._graphics._sp=null),(this._graphics=T$$)?(this._renderType&=-2,this._renderType|=512,(T$$._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(T$u.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),T$D(0,T$$,"filters",function(){return this._$P.filters},function(T$$){T$$&&0===T$$.length&&(T$$=null),this._$P.filters!=T$$&&(this._set$P("filters",T$$?T$$.slice():null),T$Y.isConchApp&&(this.conchModel&&(T$u.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),T$Y.isWebGL&&(T$$&&T$$.length?this._renderType|=32:this._renderType&=-33),T$$&&0<T$$.length?(this._getBit(1)||this._setUpNoticeType(1),T$Y.isWebGL&&1==T$$.length&&T$$[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(T$Y.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),T$D(0,T$$,"parent",T$E.prototype._$get_parent,function(T$$){T$z.superSet(T$$$,this,"parent",T$$),T$$&&this._getBit(2)&&this._$2__onDisplay()}),T$D(0,T$$,"mask",function(){return this._$P._mask},function(T$$){T$$&&this.mask&&this.mask._$P.maskParent||(T$$?(this.cacheAs="bitmap",this._set$P("_mask",T$$),T$$._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",T$$),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(T$$?T$$.conchModel:null),this._renderType|=64,this.parentRepaint())}),T$D(0,T$$,"mouseEnabled",function(){return 1<this._mouseEnableState},function(T$$){this._mouseEnableState=T$$?2:1}),T$D(0,T$$,"globalScaleX",function(){for(var T$$=1,T$b=this;T$b&&T$b!==T$z.stage;)T$$*=T$b.scaleX,T$b=T$b.parent;return T$$}),T$D(0,T$$,"mouseX",function(){return this.getMousePoint().x}),T$D(0,T$$,"mouseY",function(){return this.getMousePoint().y}),T$u.fromImage=function(T$$){return(new T$u).loadImage(T$$)},T$u._cachePool=[],T$u.CustomList=[],T$g(T$u,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=T$F.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),T$u}(T$$$),T$o$=function(T$$){function T$b(T$$){this._audio=null,this._onEnd=null,this._resumePlay=null,T$b.__super.call(this),this._onEnd=T$d.bind(this.__onEnd,this),this._resumePlay=T$d.bind(this.__resumePlay,this),T$$.addEventListener("ended",this._onEnd),this._audio=T$$}T$w(T$b,"laya.media.h5audio.AudioSoundChannel",T$Z$);var T$u=T$b.prototype;return T$u.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(T$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},T$u.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,T$s.container.appendChild(this._audio),this._audio.play()}catch(T$$){this.event("error")}},T$u.play=function(T$$){this.isStopped=!1;try{this._audio.playbackRate=T$K.playbackRate,this._audio.currentTime=this.startTime}catch(T$$){return void this._audio.addEventListener("canplay",this._resumePlay)}T$K.addChannel(this),T$s.container.appendChild(this._audio),!T$$&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},T$u.stop=function(){this.isStopped=!0,T$K.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&T$Y.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),T$s.onIE||this._audio!=T$u$._musicAudio&&T$G.recover("audio:"+this.url,this._audio),T$s.removeElement(this._audio),this._audio=null)},T$u.pause=function(){this.isStopped=!0,T$K.removeChannel(this),"pause"in this._audio&&this._audio.pause()},T$u.resume=function(){this._audio&&(this.isStopped=!1,T$K.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},T$D(0,T$u,"position",function(){return this._audio?this._audio.currentTime:0}),T$D(0,T$u,"duration",function(){return this._audio?this._audio.duration:0}),T$D(0,T$u,"volume",function(){return this._audio?this._audio.volume:1},function(T$$){this._audio&&(this._audio.volume=T$$)}),T$b}(),T$N$=function(T$$){function T$b(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=T$r$.ctx,T$b.__super.call(this),this._onPlayEnd=T$d.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}T$w(T$b,"laya.media.webaudio.WebAudioSoundChannel",T$Z$);var T$u=T$b.prototype;return T$u.play=function(T$$){if(T$K.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var T$b=this.context,T$u=this.gain,T$Z=T$b.createBufferSource();(this.bufferSource=T$Z).buffer=this.audioBuffer,T$Z.connect(T$u),T$u&&T$u.disconnect(),T$u.connect(T$b.destination),T$Z.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=T$s.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(T$Z.loop=!0),T$Z.playbackRate.setTargetAtTime?T$Z.playbackRate.setTargetAtTime(T$K.playbackRate,this.context.currentTime,.1):T$Z.playbackRate.value=T$K.playbackRate,T$Z.start(0,this.startTime),!T$$&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},T$u.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(T$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},T$u._clearBufferSource=function(){if(this.bufferSource){var T$$=this.bufferSource;T$$.stop?T$$.stop(0):T$$.noteOff(0),T$$.disconnect(0),T$$.onended=null,T$b._tryCleanFailed||this._tryClearBuffer(T$$),this.bufferSource=null}},T$u._tryClearBuffer=function(T$$){try{T$$.buffer=null}catch(T$$){T$b._tryCleanFailed=!0}},T$u.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,T$K.removeChannel(this),this.startHandler=null,this.completeHandler=null},T$u.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,T$K.removeChannel(this)},T$u.resume=function(){this.startTime=this._pauseTime,this.play(!1)},T$D(0,T$u,"position",function(){return this.bufferSource?(T$s.now()-this._startTime)/1e3+this.startTime:0}),T$D(0,T$u,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),T$D(0,T$u,"volume",function(){return this._volume},function(T$$){this.isStopped||(this._volume=T$$,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(T$$,this.context.currentTime,.1):this.gain.gain.value=T$$)}),T$b._tryCleanFailed=!1,T$b}(),T$D$=function(T$$){function T$b(){T$b.__super.call(this),this._w=0,this._h=0}T$w(T$b,"laya.resource.Bitmap",T$H$);var T$u=T$b.prototype;return T$D(0,T$u,"width",function(){return this._w}),T$D(0,T$u,"height",function(){return this._h}),T$D(0,T$u,"source",function(){return this._source}),T$b}(),T$e$=function(T$b){function T$$(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,T$$.__super.call(this),this._interval=T$Z.animationInterval,this._setUpNoticeType(1)}T$w(T$$,"laya.display.AnimationPlayerBase",T$b);var T$u=T$$.prototype;return T$u.play=function(T$$,T$b,T$u,T$Z){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=!0),void 0===T$u&&(T$u=""),void 0===T$Z&&(T$Z=!0),this._isPlaying=!0,this.index="string"==typeof T$$?this._getFrameByLabel(T$$):T$$,this.loop=T$b,this._actionName=T$u,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},T$u._getFrameByLabel=function(T$$){var T$b=0;for(T$b=0;T$b<this._count;T$b++)if(this._labels[T$b]&&0<=this._labels[T$b].indexOf(T$$))return T$b;return 0},T$u._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},T$u._setControlNode=function(T$$){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=T$$)&&T$$!=this&&(T$$.on("display",this,this._checkResumePlaying),T$$.on("undisplay",this,this._checkResumePlaying))},T$u._setDisplay=function(T$$){T$b.prototype._setDisplay.call(this,T$$),this._checkResumePlaying()},T$u._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},T$u.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},T$u.addLabel=function(T$$,T$b){this._labels||(this._labels={}),this._labels[T$b]||(this._labels[T$b]=[]),this._labels[T$b].push(T$$)},T$u.removeLabel=function(T$$){if(T$$){if(this._labels)for(var T$b in this._labels)this._removeLabelFromLabelList(this._labels[T$b],T$$)}else this._labels=null},T$u._removeLabelFromLabelList=function(T$$,T$b){if(T$$)for(var T$u=T$$.length-1;0<=T$u;T$u--)T$$[T$u]==T$b&&T$$.splice(T$u,1)},T$u.gotoAndStop=function(T$$){this.index="string"==typeof T$$?this._getFrameByLabel(T$$):T$$,this.stop()},T$u._displayToIndex=function(T$$){},T$u.clear=function(){this.stop(),this._labels=null},T$D(0,T$u,"interval",function(){return this._interval},function(T$$){this._interval!=T$$&&(this._frameRateChanged=!0,this._interval=T$$,this._isPlaying&&0<T$$&&this.timerLoop(T$$,this,this._frameLoop,null,!0,!0))}),T$D(0,T$u,"isPlaying",function(){return this._isPlaying}),T$D(0,T$u,"index",function(){return this._index},function(T$$){if(this._index=T$$,this._displayToIndex(T$$),this._labels&&this._labels[T$$])for(var T$b=this._labels[T$$],T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++)this.event("label",T$b[T$u])}),T$D(0,T$u,"count",function(){return this._count}),T$$.WRAP_POSITIVE=0,T$$.WRAP_REVERSE=1,T$$.WRAP_PINGPONG=2,T$$}(T$I$),T$L$=function(T$b){function T$N(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,T$N.__super.call(this),this.overflow=T$N.VISIBLE,this._style=new T$b$(this),this._style.wordWrap=!1}T$w(T$N,"laya.display.Text",T$b);var T$$=T$N.prototype;return T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._lines=null,this._words&&(this._words.length=0,this._words=null)},T$$._getBoundPointsM=function(T$$){void 0===T$$&&(T$$=!1);var T$b=T$a.TEMP;return T$b.setTo(0,0,this.width,this.height),T$b._getBoundPoints()},T$$.getGraphicBounds=function(T$$){void 0===T$$&&(T$$=!1);var T$b=T$a.TEMP;return T$b.setTo(0,0,this.width,this.height),T$b},T$$._getCSSStyle=function(){return this._style},T$$.lang=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w){if(T$$=T$N.langPacks&&T$N.langPacks[T$$]?T$N.langPacks[T$$]:T$$,arguments.length<2)this._text=T$$;else{for(var T$I=0,T$o=arguments.length;T$I<T$o;T$I++)T$$=T$$.replace("{"+T$I+"}",arguments[T$I+1]);this._text=T$$}},T$$._isPassWordMode=function(){var T$$=this._style.password;return"prompt"in this&&this.prompt==this._text&&(T$$=!1),T$$},T$$._getPassWordTxt=function(T$$){var T$b;T$b="";for(var T$u=T$$.length;0<T$u;T$u--)T$b+="●";return T$b},T$$.renderText=function(T$$,T$b){var T$u=this.graphics;T$u.clear(!0);var T$Z=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(T$s.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);T$s.context.font=T$Z;var T$E=this.padding,T$r=T$E[3],T$F="left",T$x=this._lines,T$g=this.leading+this._charSize.height,T$H=this._currBitmapFont;T$H&&(T$g=this.leading+T$H.getMaxHeight());var T$w=T$E[0];if(!T$H&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(T$F="right",T$r=this._width-T$E[1]):"center"==this.align&&(T$F="center",T$r=.5*this._width+T$E[3]-T$E[1])),0<this._height){var T$I=this._textHeight>this._height?"top":this.valign;"middle"===T$I?T$w=.5*(this._height-T$b*T$g)+T$E[0]-T$E[2]:"bottom"===T$I&&(T$w=this._height-T$b*T$g-T$E[2])}var T$o=this._style;if(T$H&&T$H.autoScaleSize)var T$N=T$H.fontSize/this.fontSize;if(this._clipPoint)if(T$u.save(),T$H&&T$H.autoScaleSize){var T$D=0,T$e=0;T$D=this._width?this._width-T$E[3]-T$E[1]:this._textWidth,T$e=this._height?this._height-T$E[0]-T$E[2]:this._textHeight,T$D*=T$N,T$e*=T$N,T$u.clipRect(T$E[3],T$E[0],T$D,T$e)}else T$u.clipRect(T$E[3],T$E[0],this._width?this._width-T$E[3]-T$E[1]:this._textWidth,this._height?this._height-T$E[0]-T$E[2]:this._textHeight);var T$L=T$o.password;"prompt"in this&&this.prompt==this._text&&(T$L=!1);for(var T$T=0,T$_=0,T$y=Math.min(this._lines.length,T$b+T$$)||1,T$S=T$$;T$S<T$y;T$S++){var T$P,T$i=T$x[T$S];if(T$L){var T$z=T$i.length;T$i="";for(var T$q=T$z;0<T$q;T$q--)T$i+="●"}if(T$T=T$r-(this._clipPoint?this._clipPoint.x:0),T$_=T$w+T$g*T$S-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(T$F,T$T,T$_,T$S),T$H){var T$a=this.width;T$H.autoScaleSize&&(T$a=this.width*T$N),T$H.drawText(T$i,this,T$T,T$_,this.align,T$a)}else T$Y.isWebGL?(this._words||(this._words=[]),(T$P=this._words.length>T$S-T$$?this._words[T$S-T$$]:new T$R).setText(T$i)):T$P=T$i,T$o.stroke?T$u.fillBorderText(T$P,T$T,T$_,T$Z,this.color,T$o.strokeColor,T$o.stroke,T$F):T$u.fillText(T$P,T$T,T$_,T$Z,this.color,T$F)}if(T$H&&T$H.autoScaleSize){var T$t=1/T$N;this.scale(T$t,T$t)}this._clipPoint&&T$u.restore(),this._startX=T$r,this._startY=T$w},T$$.drawUnderline=function(T$$,T$b,T$u,T$Z){var T$E=this._lineWidths[T$Z];switch(T$$){case"center":T$b-=T$E/2;break;case"right":T$b-=T$E}T$u+=this._charSize.height,this._graphics.drawLine(T$b,T$u,T$b+T$E,T$u,this.underlineColor||this.color,1)},T$$.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);T$s.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new T$q(0,0)):this._clipPoint=null;var T$$=this._lines.length;if(this.overflow!=T$N.VISIBLE){var T$b=this.overflow==T$N.HIDDEN?Math.floor:Math.ceil;T$$=Math.min(T$$,T$b((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var T$u=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(T$u,T$$),this.repaint()},T$$.evalTextSize=function(){var T$$,T$b=NaN;T$$=Math.max.apply(this,this._lineWidths),T$b=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],T$$==this._textWidth&&T$b==this._textHeight||(this._textWidth=T$$,this._textHeight=T$b,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},T$$.checkEnabledViewportOrNot=function(){return this.overflow==T$N.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},T$$.changeText=function(T$$){this._text!==T$$&&(this.lang(T$$+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},T$$.parseLines=function(T$$){var T$b=this.wordWrap||this.overflow==T$N.HIDDEN;if(T$b)var T$u=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var T$Z=T$d.contextMeasureText(T$N._testWord);T$Y.isConchApp&&0===T$Z.width&&0===T$Z.height&&(T$Z=T$d.contextMeasureText("W")),this._charSize.width=T$Z.width,this._charSize.height=T$Z.height||this.fontSize}for(var T$E=T$$.replace(/\r\n/g,"\n").split("\n"),T$r=0,T$F=T$E.length;T$r<T$F;T$r++){var T$x=T$E[T$r];T$b?this.parseLine(T$x,T$u):(this._lineWidths.push(this.getTextWidth(T$x)),this._lines.push(T$x))}},T$$.parseLine=function(T$$,T$b){T$s.context;var T$u,T$Z=this._lines,T$E=0,T$r=NaN,T$F=NaN,T$x=0;if((T$r=this.getTextWidth(T$$))<=T$b)return T$Z.push(T$$),void this._lineWidths.push(T$r);T$r=this._charSize.width,0==(T$E=Math.floor(T$b/T$r))&&(T$E=1),T$F=T$r=this.getTextWidth(T$$.substring(0,T$E));for(var T$g=T$E,T$H=T$$.length;T$g<T$H;T$g++)if(T$b<(T$F+=T$r=this.getTextWidth(T$$.charAt(T$g))))if(this.wordWrap){var T$w=T$$.substring(T$x,T$g);if(T$w.charCodeAt(T$w.length-1)<255?(T$u=/(?:\w|-)+$/.exec(T$w))&&(T$g=T$u.index+T$x,0==T$u.index?T$g+=T$w.length:T$w=T$$.substring(T$x,T$g)):T$N.RightToLeft&&(T$u=/([\u0600-\u06FF])+$/.exec(T$w))&&(T$g=T$u.index+T$x,0==T$u.index?T$g+=T$w.length:T$w=T$$.substring(T$x,T$g)),T$Z.push(T$w),this._lineWidths.push(T$F-T$r),!((T$x=T$g)+T$E<T$H)){T$Z.push(T$$.substring(T$x,T$H)),this._lineWidths.push(this.getTextWidth(T$Z[T$Z.length-1])),T$x=-1;break}T$g+=T$E,T$F=T$r=this.getTextWidth(T$$.substring(T$x,T$g)),T$g--}else if(this.overflow==T$N.HIDDEN)return T$Z.push(T$$.substring(0,T$g)),void this._lineWidths.push(this.getTextWidth(T$Z[T$Z.length-1]));this.wordWrap&&-1!=T$x&&(T$Z.push(T$$.substring(T$x,T$H)),this._lineWidths.push(this.getTextWidth(T$Z[T$Z.length-1])))},T$$.getTextWidth=function(T$$){return this._currBitmapFont?this._currBitmapFont.getTextWidth(T$$):T$d.contextMeasureText(T$$).width},T$$.getWordWrapWidth=function(){var T$$=this.padding,T$b=NaN;return(T$b=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(T$b=this.wordWrap?100:T$s.width),T$b<=0&&(T$b=100),T$b-T$$[3]-T$$[1]},T$$.getCharPoint=function(T$$,T$b){this._isChanged&&T$z.timer.runCallLater(this,this.typeset);for(var T$u=0,T$Z=this._lines,T$E=0,T$r=0,T$F=T$Z.length;T$r<T$F;T$r++){if(T$$<(T$u+=T$Z[T$r].length)){var T$x=T$r;break}T$E=T$u}var T$g=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;T$s.context.font=T$g;var T$H=this.getTextWidth(this._text.substring(T$E,T$$));return(T$b||new T$q).setTo(this._startX+T$H-(this._clipPoint?this._clipPoint.x:0),this._startY+T$x*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},T$D(0,T$$,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(T$$){T$$!=this._width&&(T$z.superSet(T$I$,this,"width",T$$),this.isChanged=!0)}),T$D(0,T$$,"textWidth",function(){return this._isChanged&&T$z.timer.runCallLater(this,this.typeset),this._textWidth}),T$D(0,T$$,"height",function(){return this._height?this._height:this.textHeight},function(T$$){T$$!=this._height&&(T$z.superSet(T$I$,this,"height",T$$),this.isChanged=!0)}),T$D(0,T$$,"textHeight",function(){return this._isChanged&&T$z.timer.runCallLater(this,this.typeset),this._textHeight}),T$D(0,T$$,"padding",function(){return this._getCSSStyle().padding},function(T$$){this._getCSSStyle().padding=T$$,this.isChanged=!0}),T$D(0,T$$,"bold",function(){return this._getCSSStyle().bold},function(T$$){this._getCSSStyle().bold=T$$,this.isChanged=!0}),T$D(0,T$$,"text",function(){return this._text||""},function(T$$){this._text!==T$$&&(this.lang(T$$+""),this.isChanged=!0,this.event("change"))}),T$D(0,T$$,"color",function(){return this._getCSSStyle().color},function(T$$){this._getCSSStyle().color!=T$$&&(this._getCSSStyle().color=T$$,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),T$D(0,T$$,"font",function(){return this._getCSSStyle().fontFamily},function(T$$){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),T$N._bitmapFonts&&T$N._bitmapFonts[T$$]&&(this._currBitmapFont=T$N._bitmapFonts[T$$]),this._getCSSStyle().fontFamily=T$$,this.isChanged=!0}),T$D(0,T$$,"fontSize",function(){return this._getCSSStyle().fontSize},function(T$$){this._getCSSStyle().fontSize=T$$,this.isChanged=!0}),T$D(0,T$$,"italic",function(){return this._getCSSStyle().italic},function(T$$){this._getCSSStyle().italic=T$$,this.isChanged=!0}),T$D(0,T$$,"align",function(){return this._getCSSStyle().align},function(T$$){this._getCSSStyle().align=T$$,this.isChanged=!0}),T$D(0,T$$,"valign",function(){return this._getCSSStyle().valign},function(T$$){this._getCSSStyle().valign=T$$,this.isChanged=!0}),T$D(0,T$$,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(T$$){this._getCSSStyle().wordWrap=T$$,this.isChanged=!0}),T$D(0,T$$,"leading",function(){return this._getCSSStyle().leading},function(T$$){this._getCSSStyle().leading=T$$,this.isChanged=!0}),T$D(0,T$$,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(T$$){this._getCSSStyle().backgroundColor=T$$,this.isChanged=!0}),T$D(0,T$$,"borderColor",function(){return this._getCSSStyle().borderColor},function(T$$){this._getCSSStyle().borderColor=T$$,this.isChanged=!0}),T$D(0,T$$,"stroke",function(){return this._getCSSStyle().stroke},function(T$$){this._getCSSStyle().stroke=T$$,this.isChanged=!0}),T$D(0,T$$,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(T$$){this._getCSSStyle().strokeColor=T$$,this.isChanged=!0}),T$D(0,T$$,"isChanged",null,function(T$$){this._isChanged!==T$$&&(this._isChanged=T$$)&&T$z.timer.callLater(this,this.typeset)}),T$D(0,T$$,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(T$$){if(!(this.overflow!=T$N.SCROLL||this.textWidth<this._width)&&this._clipPoint){T$$=T$$<this.padding[3]?this.padding[3]:T$$;var T$b=this._textWidth-this._width;T$$=T$b<T$$?T$b:T$$;var T$u=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=T$$,this.renderText(this._lastVisibleLineIndex,T$u)}}),T$D(0,T$$,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(T$$){if(!(this.overflow!=T$N.SCROLL||this.textHeight<this._height)&&this._clipPoint){T$$=T$$<this.padding[0]?this.padding[0]:T$$;var T$b=this._textHeight-this._height,T$u=(T$$=T$b<T$$?T$b:T$$)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=T$u;var T$Z=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=T$$,this.renderText(T$u,T$Z)}}),T$D(0,T$$,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),T$D(0,T$$,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),T$D(0,T$$,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),T$D(0,T$$,"underlineColor",function(){return this._underlineColor},function(T$$){this._underlineColor=T$$,this._isChanged=!0,this.typeset()}),T$N.registerBitmapFont=function(T$$,T$b){T$N._bitmapFonts||(T$N._bitmapFonts={}),T$N._bitmapFonts[T$$]=T$b},T$N.unregisterBitmapFont=function(T$$,T$b){if(void 0===T$b&&(T$b=!0),T$N._bitmapFonts&&T$N._bitmapFonts[T$$]){var T$u=T$N._bitmapFonts[T$$];T$b&&T$u.destroy(),delete T$N._bitmapFonts[T$$]}},T$N.setTextRightToLeft=function(){var T$$;(T$$=T$s.canvas.source.style).display="none",T$$.position="absolute",T$$.direction="rtl",T$Y._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,T$s.document.body.appendChild(T$s.canvas.source)},T$N.supportFont=function(T$$){T$s.context.font="10px sans-serif";var T$b=T$d.contextMeasureText("abcji").width;T$s.context.font="10px "+T$$;var T$u=T$d.contextMeasureText("abcji").width;return console.log(T$b,T$u),T$b!==T$u},T$N._testWord="游",T$N.langPacks=null,T$N.VISIBLE="visible",T$N.SCROLL="scroll",T$N.HIDDEN="hidden",T$N.CharacterCache=!0,T$N.RightToLeft=!1,T$N._bitmapFonts=null,T$g(T$N,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),T$N}(T$I$),T$T$=function(T$I){function T$F(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",T$F.__super.call(this),this.offset=new T$q,this._canvasTransform=new T$V,this._previousOrientation=T$s.window.orientation;var T$b=this;this.transform=T$V.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var T$$=T$s.window,T$u=this;T$$.addEventListener("focus",function(){T$b._isFocused=!0,T$u.event("focus"),T$u.event("focuschange")}),T$$.addEventListener("blur",function(){T$b._isFocused=!1,T$u.event("blur"),T$u.event("focuschange"),T$u._isInputting()&&(T$P$.inputElement.target.focus=!1)});var T$Z="visibilityState",T$E="visibilitychange",T$r=T$$.document;void 0!==T$r.hidden?(T$E="visibilitychange",T$Z="visibilityState"):void 0!==T$r.mozHidden?(T$E="mozvisibilitychange",T$Z="mozVisibilityState"):void 0!==T$r.msHidden?(T$E="msvisibilitychange",T$Z="msVisibilityState"):void 0!==T$r.webkitHidden&&(T$E="webkitvisibilitychange",T$Z="webkitVisibilityState"),T$$.document.addEventListener(T$E,function(){"hidden"==T$s.document[T$Z]?T$u._setStageVisible(!1):T$u._setStageVisible(!0)}),T$$.document.addEventListener("qbrowserVisibilityChange",function(T$$){T$u._setStageVisible(!T$$.hidden)}),T$$.addEventListener("resize",function(){var T$$=T$s.window.orientation;null!=T$$&&T$$!=T$b._previousOrientation&&T$u._isInputting()&&(T$P$.inputElement.target.focus=!1),T$b._previousOrientation=T$$,T$u._isInputting()||T$u._resetCanvas()}),T$$.addEventListener("orientationchange",function(T$$){T$u._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),T$s.onMobile&&this.on("mousedown",this,this._onmouseMove)}T$w(T$F,"laya.display.Stage",T$I);var T$$=T$F.prototype;return T$$._setStageVisible=function(T$$){this._isVisibility!=T$$&&(this._isVisibility=T$$,this._isVisibility||this._isInputting()&&(T$P$.inputElement.target.focus=!1),this.event("visibilitychange"))},T$$._isInputting=function(){return T$s.onMobile&&T$P$.isInputting},T$$._changeCanvasSize=function(){this.setScreenSize(T$s.clientWidth*T$s.pixelRatio,T$s.clientHeight*T$s.pixelRatio)},T$$._resetCanvas=function(){if(this.screenAdaptationEnabled){var T$$=T$Y._mainCanvas;T$$.source.style;T$$.size(1,1),T$z.timer.once(100,this,this._changeCanvasSize)}},T$$.setScreenSize=function(T$$,T$b){var T$u=!1;if("none"!==this._screenMode&&(T$u=(T$$/T$b<1?"vertical":"horizontal")!==this._screenMode)){var T$Z=T$b;T$b=T$$,T$$=T$Z}this.canvasRotation=T$u;var T$E=T$Y._mainCanvas,T$r=T$E.source.style,T$F=this._canvasTransform.identity(),T$x=this._scaleMode,T$g=T$$/this.designWidth,T$H=T$b/this.designHeight,T$w=this.designWidth,T$I=this.designHeight,T$o=T$$,T$N=T$b,T$D=T$s.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,T$x){case"noscale":T$g=T$H=1,T$o=this.designWidth,T$N=this.designHeight;break;case"showall":T$g=T$H=Math.min(T$g,T$H),T$w=T$o=Math.round(this.designWidth*T$g),T$I=T$N=Math.round(this.designHeight*T$H);break;case"noborder":T$g=T$H=Math.max(T$g,T$H),T$o=Math.round(this.designWidth*T$g),T$N=Math.round(this.designHeight*T$H);break;case"full":T$g=T$H=1,this._width=T$w=T$$,this._height=T$I=T$b;break;case"fixedwidth":T$H=T$g,this._height=T$I=Math.round(T$b/T$g);break;case"fixedheight":T$g=T$H,this._width=T$w=Math.round(T$$/T$H);break;case"fixedauto":T$$/T$b<this.designWidth/this.designHeight?(T$H=T$g,this._height=T$I=Math.round(T$b/T$g)):(T$g=T$H,this._width=T$w=Math.round(T$$/T$H))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,T$w=T$w+1&2147483646,T$I=T$I+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),T$g*=this.scaleX,T$H*=this.scaleY,1===T$g&&1===T$H?this.transform.identity():(this.transform.a=this._formatData(T$g/(T$o/T$w)),this.transform.d=this._formatData(T$H/(T$N/T$I)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),T$E.size(T$w,T$I),T$O.changeWebGLSize(T$w,T$I),T$F.scale(T$o/T$w/T$D,T$N/T$I/T$D),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(T$$-T$o)/T$D:this.offset.x=.5*(T$$-T$o)/T$D,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(T$b-T$N)/T$D:this.offset.y=.5*(T$b-T$N)/T$D,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),T$F.translate(this.offset.x,this.offset.y),this.canvasDegree=0,T$u&&("horizontal"===this._screenMode?(T$F.rotate(Math.PI/2),T$F.translate(T$b/T$D,0),this.canvasDegree=90):(T$F.rotate(-Math.PI/2),T$F.translate(0,T$$/T$D),this.canvasDegree=-90)),T$F.a=this._formatData(T$F.a),T$F.d=this._formatData(T$F.d),T$F.tx=this._formatData(T$F.tx),T$F.ty=this._formatData(T$F.ty),T$r.transformOrigin=T$r.webkitTransformOrigin=T$r.msTransformOrigin=T$r.mozTransformOrigin=T$r.oTransformOrigin="0px 0px 0px",T$r.transform=T$r.webkitTransform=T$r.msTransform=T$r.mozTransform=T$r.oTransform="matrix("+T$F.toString()+")",T$F.translate(parseInt(T$r.left)||0,parseInt(T$r.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},T$$._formatData=function(T$$){return Math.abs(T$$)<1e-6?0:Math.abs(1-T$$)<.001?0<T$$?1:-1:T$$},T$$.getMousePoint=function(){return T$q.TEMP.setTo(this.mouseX,this.mouseY)},T$$.repaint=function(){this._repaint=1},T$$.parentRepaint=function(){},T$$._loop=function(){return this.render(T$Y.context,0,0),!0},T$$._onmouseMove=function(T$$){this._mouseMoveTime=T$s.now()},T$$.getTimeFromFrameStart=function(){return T$s.now()-this._frameStartTime},T$$.render=function(T$$,T$b,T$u){if("sleep"===this._frameRate&&!T$Y.isConchApp){var T$Z=T$s.now();if(!(1e3<=T$Z-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(T$A.loopCount++,T$e.instance.runEvent(),T$z.timer._update()));this._frameStartTime=T$Z}if(this._renderCount++,T$Y.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=T$s.now();var T$E="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),T$r=this._renderCount%2==0;if(T$A.renderSlow=!T$E,T$E||T$r||T$Y.isConchApp){var T$F;T$A.loopCount++,T$e.instance.runEvent(),T$z.timer._update(),T$O.update3DLoop();var T$x=0,T$g=0;if(T$Y.isConchNode)for(T$x=0,T$g=this._scenes.length;T$x<T$g;T$x++)(T$F=this._scenes[T$x])&&T$F._updateSceneConch();else for(T$x=0,T$g=this._scenes.length;T$x<T$g;T$x++)(T$F=this._scenes[T$x])&&T$F._updateScene();if(T$Y.isConchNode){var T$H=T$I$.CustomList;for(T$x=0,T$g=T$H.length;T$x<T$g;T$x++){var T$w=T$H[T$x];T$w.customRender(T$w.customContext,0,0)}return}}T$Y.isConchNode||this.renderingEnabled&&(T$E||!T$r||T$Y.isConchWebGL)&&(T$Y.isWebGL?T$Y.WebGL.mainContext&&!T$Y.WebGL.mainContext.isContextLost()&&(T$$.clear(),T$I.prototype.render.call(this,T$$,T$b,T$u),T$A._show&&T$A._sp&&T$A._sp.render(T$$,T$b,T$u),T$O.clear(this._bgColor),T$O.beginFlush(),T$$.flush(),T$O.endFinish(),T$U.instance&&T$U.getInstance().endDispose()):(T$O.clear(this._bgColor),T$I.prototype.render.call(this,T$$,T$b,T$u),T$A._show&&T$A._sp&&T$A._sp.render(T$$,T$b,T$u)))}else this._renderCount%5==0&&(T$A.loopCount++,T$e.instance.runEvent(),T$z.timer._update())},T$$._requestFullscreen=function(){var T$$=T$s.document.documentElement;T$$.requestFullscreen?T$$.requestFullscreen():T$$.mozRequestFullScreen?T$$.mozRequestFullScreen():T$$.webkitRequestFullscreen?T$$.webkitRequestFullscreen():T$$.msRequestFullscreen&&T$$.msRequestFullscreen()},T$$._fullScreenChanged=function(){T$z.stage.event("fullscreenchange")},T$$.exitFullscreen=function(){var T$$=T$s.document;T$$.exitFullscreen?T$$.exitFullscreen():T$$.mozCancelFullScreen?T$$.mozCancelFullScreen():T$$.webkitExitFullscreen&&T$$.webkitExitFullscreen()},T$D(0,T$$,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),T$D(0,T$$,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),T$D(0,T$$,"frameRate",function(){return this._frameRate},function(T$$){if(this._frameRate=T$$,T$Y.isConchApp)switch(this._frameRate){case"slow":T$s.window.conch&&T$s.window.conchConfig.setSlowFrame&&T$s.window.conchConfig.setSlowFrame(!0);break;case"fast":T$s.window.conch&&T$s.window.conchConfig.setSlowFrame&&T$s.window.conchConfig.setSlowFrame(!1);break;case"mouse":T$s.window.conch&&T$s.window.conchConfig.setMouseFrame&&T$s.window.conchConfig.setMouseFrame(2e3);break;case"sleep":T$s.window.conch&&T$s.window.conchConfig.setLimitFPS&&T$s.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),T$D(0,T$$,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),T$D(0,T$$,"width",T$I.prototype._$get_width,function(T$$){this.designWidth=T$$,T$z.superSet(T$I$,this,"width",T$$),T$z.timer.callLater(this,this._changeCanvasSize)}),T$D(0,T$$,"alignH",function(){return this._alignH},function(T$$){this._alignH=T$$,T$z.timer.callLater(this,this._changeCanvasSize)}),T$D(0,T$$,"isFocused",function(){return this._isFocused}),T$D(0,T$$,"height",T$I.prototype._$get_height,function(T$$){this.designHeight=T$$,T$z.superSet(T$I$,this,"height",T$$),T$z.timer.callLater(this,this._changeCanvasSize)}),T$D(0,T$$,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||T$V.create()},T$I.prototype._$set_transform),T$D(0,T$$,"isVisibility",function(){return this._isVisibility}),T$D(0,T$$,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),T$D(0,T$$,"scaleMode",function(){return this._scaleMode},function(T$$){this._scaleMode=T$$,T$z.timer.callLater(this,this._changeCanvasSize)}),T$D(0,T$$,"alignV",function(){return this._alignV},function(T$$){this._alignV=T$$,T$z.timer.callLater(this,this._changeCanvasSize)}),T$D(0,T$$,"bgColor",function(){return this._bgColor},function(T$$){this._bgColor=T$$,this.conchModel&&this.conchModel.bgColor(T$$),T$Y.isWebGL&&(T$$?T$F._wgColor=T$J.create(T$$)._color:T$s.onMiniGame||(T$F._wgColor=null)),T$s.onLimixiu?T$F._wgColor=T$J.create(T$$)._color:T$Y.canvas.style.background=T$$||"none"}),T$D(0,T$$,"mouseX",function(){return Math.round(T$e.instance.mouseX/this.clientScaleX)}),T$D(0,T$$,"mouseY",function(){return Math.round(T$e.instance.mouseY/this.clientScaleY)}),T$D(0,T$$,"screenMode",function(){return this._screenMode},function(T$$){this._screenMode=T$$}),T$D(0,T$$,"visible",T$I.prototype._$get_visible,function(T$$){this.visible!==T$$&&(T$z.superSet(T$I$,this,"visible",T$$),T$Y._mainCanvas.source.style.visibility=T$$?"visible":"hidden")}),T$D(0,T$$,"fullScreenEnabled",null,function(T$$){var T$b=T$s.document,T$u=T$Y.canvas;T$$?(T$u.addEventListener("mousedown",this._requestFullscreen),T$u.addEventListener("touchstart",this._requestFullscreen),T$b.addEventListener("fullscreenchange",this._fullScreenChanged),T$b.addEventListener("mozfullscreenchange",this._fullScreenChanged),T$b.addEventListener("webkitfullscreenchange",this._fullScreenChanged),T$b.addEventListener("msfullscreenchange",this._fullScreenChanged)):(T$u.removeEventListener("mousedown",this._requestFullscreen),T$u.removeEventListener("touchstart",this._requestFullscreen),T$b.removeEventListener("fullscreenchange",this._fullScreenChanged),T$b.removeEventListener("mozfullscreenchange",this._fullScreenChanged),T$b.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),T$b.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),T$F.SCALE_NOSCALE="noscale",T$F.SCALE_EXACTFIT="exactfit",T$F.SCALE_SHOWALL="showall",T$F.SCALE_NOBORDER="noborder",T$F.SCALE_FULL="full",T$F.SCALE_FIXED_WIDTH="fixedwidth",T$F.SCALE_FIXED_HEIGHT="fixedheight",T$F.SCALE_FIXED_AUTO="fixedauto",T$F.ALIGN_LEFT="left",T$F.ALIGN_RIGHT="right",T$F.ALIGN_CENTER="center",T$F.ALIGN_TOP="top",T$F.ALIGN_MIDDLE="middle",T$F.ALIGN_BOTTOM="bottom",T$F.SCREEN_NONE="none",T$F.SCREEN_HORIZONTAL="horizontal",T$F.SCREEN_VERTICAL="vertical",T$F.FRAME_FAST="fast",T$F.FRAME_SLOW="slow",T$F.FRAME_MOUSE="mouse",T$F.FRAME_SLEEP="sleep",T$F.FRAME_MOUSE_THREDHOLD=2e3,T$g(T$F,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),T$F}(T$I$),T$_$=(function(T$$){function T$b(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,T$b.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}T$w(T$b,"laya.media.SoundNode",T$I$);var T$u=T$b.prototype;T$u._onParentChange=function(){this.target=this.parent},T$u.play=function(T$$,T$b){void 0===T$$&&(T$$=1),isNaN(T$$)&&(T$$=1),this.url&&(this.stop(),this._channel=T$K.playSound(this.url,T$$,null,T$b))},T$u.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},T$u._setPlayAction=function(T$$,T$b,T$u,T$Z){void 0===T$Z&&(T$Z=!0),this[T$u]&&T$$&&(T$Z?T$$.on(T$b,this,this[T$u]):T$$.off(T$b,this,this[T$u]))},T$u._setPlayActions=function(T$$,T$b,T$u,T$Z){if(void 0===T$Z&&(T$Z=!0),T$$&&T$b){var T$E,T$r=T$b.split(","),T$F=0;for(T$E=T$r.length,T$F=0;T$F<T$E;T$F++)this._setPlayAction(T$$,T$r[T$F],T$u,T$Z)}},T$D(0,T$u,"playEvent",null,function(T$$){(this._playEvents=T$$)&&this._tar&&this._setPlayActions(this._tar,T$$,"play")}),T$D(0,T$u,"target",null,function(T$$){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=T$$,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),T$D(0,T$u,"stopEvent",null,function(T$$){(this._stopEvents=T$$)&&this._tar&&this._setPlayActions(this._tar,T$$,"stop")})}(),function(T$$){function T$b(){this._src=null,this._onload=null,this._onerror=null,T$b.__super.call(this)}T$w(T$b,"laya.resource.FileBitmap",T$D$);var T$u=T$b.prototype;return T$D(0,T$u,"src",function(){return this._src},function(T$$){this._src=T$$}),T$D(0,T$u,"onload",null,function(T$$){}),T$D(0,T$u,"onerror",null,function(T$$){}),T$b}()),T$y$=function(T$$){function T$u(T$$,T$b){this._is2D=!1,T$u.__super.call(this);var T$Z=this;if(this._source=this,"2D"===T$$||"AUTO"===T$$&&!T$Y.isWebGL){this._is2D=!0,this._source=T$b||T$s.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var T$E=this;T$E.getContext=function(T$$,T$b){if(T$Z._ctx)return T$Z._ctx;var T$u=T$Z._ctx=T$Z._source.getContext(T$$,T$b);return T$u&&(T$u._canvas=T$E,T$Y.isFlash||T$s.onLimixiu||(T$u.size=function(T$$,T$b){})),T$u}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}T$w(T$u,"laya.resource.HTMLCanvas",T$D$);var T$b=T$u.prototype;return T$b.clear=function(){this._ctx&&this._ctx.clear()},T$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},T$b.release=function(){},T$b._setContext=function(T$$){this._ctx=T$$},T$b.getContext=function(T$$,T$b){return this._ctx?this._ctx:this._ctx=T$u._createContext(this)},T$b.getMemSize=function(){return 0},T$b.size=function(T$$,T$b){(this._w!=T$$||this._h!=T$b||this._source&&(this._source.width!=T$$||this._source.height!=T$b))&&(this._w=T$$,this._h=T$b,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(T$$,T$b),this._source&&(this._source.height=T$b,this._source.width=T$$))},T$b.getCanvas=function(){return this._source},T$b.toBase64=function(T$$,T$b,T$u){if(this._source)if(T$Y.isConchApp&&this._source.toBase64)this._source.toBase64(T$$,T$b,T$u);else{var T$Z=this._source.toDataURL(T$$,T$b);T$u.call(this,T$Z)}},T$D(0,T$b,"context",function(){return this._ctx}),T$D(0,T$b,"asBitmap",null,function(T$$){}),T$u.create=function(T$$,T$b){return new T$u(T$$,T$b)},T$u.TYPE2D="2D",T$u.TYPE3D="3D",T$u.TYPEAUTO="AUTO",T$u._createContext=null,T$u}(),T$S$=(function(T$$){function T$g(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){throw T$g.__super.call(this),new Error("不允许new！")}T$w(T$g,"laya.resource.HTMLSubImage",T$D$),T$g.create=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){return void 0===T$x&&(T$x=!1),new T$g(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x)}}(),function(T$$){function T$I(){this._frames=null,this._url=null,T$I.__super.call(this),this._setControlNode(this)}T$w(T$I,"laya.display.Animation",T$$);var T$b=T$I.prototype;T$b.destroy=function(T$$){void 0===T$$&&(T$$=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,T$$),this._frames=null,this._labels=null},T$b.play=function(T$$,T$b,T$u,T$Z){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=!0),void 0===T$u&&(T$u=""),void 0===T$Z&&(T$Z=!0),T$u&&this._setFramesFromCache(T$u,T$Z),this._isPlaying=!0,this.index="string"==typeof T$$?this._getFrameByLabel(T$$):T$$,this.loop=T$b,this._actionName=T$u,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},T$b._setFramesFromCache=function(T$$,T$b){var T$u;return void 0===T$b&&(T$b=!1),this._url&&(T$$=this._url+"#"+T$$),T$$&&T$I.framesMap[T$$]?((T$u=T$I.framesMap[T$$])instanceof Array?(this._frames=T$I.framesMap[T$$],this._count=this._frames.length):(T$u.nodeRoot&&(T$I.framesMap[T$$]=this._parseGraphicAnimationByData(T$u),T$u=T$I.framesMap[T$$]),this._frames=T$u.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=T$u.interval),this._labels=this._copyLabels(T$u.labels)),!0):(T$b&&console.log("ani not found:",T$$),!1)},T$b._copyLabels=function(T$$){if(!T$$)return null;var T$b,T$u;for(T$u in T$b={},T$$)T$b[T$u]=T$d.copyArray([],T$$[T$u]);return T$b},T$b._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&T$$.prototype._frameLoop.call(this)},T$b._displayToIndex=function(T$$){this._frames&&(this.graphics=this._frames[T$$])},T$b.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},T$b.loadImages=function(T$$,T$b){return void 0===T$b&&(T$b=""),this._url="",this._setFramesFromCache(T$b)||(this.frames=T$I.framesMap[T$b]?T$I.framesMap[T$b]:T$I.createFrames(T$$,T$b)),this},T$b.loadAtlas=function(T$b,T$u,T$Z){void 0===T$Z&&(T$Z=""),this._url="";var T$E=this;function T$$(T$$){T$b===T$$&&(T$E.frames=T$I.framesMap[T$Z]?T$I.framesMap[T$Z]:T$I.createFrames(T$b,T$Z),T$u&&T$u.run())}return T$E._setFramesFromCache(T$Z)||(T$x$.getAtlas(T$b)?T$$(T$b):T$z.loader.load(T$b,T$_.create(null,T$$,[T$b]),null,"atlas")),this},T$b.loadAnimation=function(T$$,T$b,T$u){this._url=T$$;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,T$b&&T$b.run()):!T$u||T$x$.getAtlas(T$u)?this._loadAnimationData(T$$,T$b,T$u):T$z.loader.load(T$u,T$_.create(this,this._loadAnimationData,[T$$,T$b,T$u]),null,"atlas"),this},T$b._loadAnimationData=function(T$x,T$g,T$$){var T$H=this;if(!T$$||T$x$.getAtlas(T$$)){var T$w=this;T$x$.getRes(T$x)?T$b(T$x):T$z.loader.load(T$x,T$_.create(null,T$b,[T$x]),null,"json"),T$x$.clearRes(T$x)}else console.warn("atlas load fail:"+T$$);function T$b(T$$){if(T$x$.getRes(T$$)&&T$x===T$$){var T$b;if(T$I.framesMap[T$x+"#"])T$w._setFramesFromCache(T$H._actionName,!0),T$H.index=0,T$H._checkResumePlaying();else{var T$u=T$w._parseGraphicAnimation(T$x$.getRes(T$x));if(!T$u)return;var T$Z,T$E=T$u.animationList,T$r=0,T$F=T$E.length;for(T$r=0;T$r<T$F;T$r++)T$b=T$E[T$r],T$I.framesMap[T$x+"#"+T$b.name]=T$b,T$Z||(T$Z=T$b);T$Z&&(T$I.framesMap[T$x+"#"]=T$Z,T$w._setFramesFromCache(T$H._actionName,!0),T$H.index=0),T$H._checkResumePlaying()}T$g&&T$g.run()}}},T$b._parseGraphicAnimation=function(T$$){return T$z$.parseAnimationData(T$$)},T$b._parseGraphicAnimationByData=function(T$$){return T$z$.parseAnimationByData(T$$)},T$D(0,T$b,"frames",function(){return this._frames},function(T$$){(this._frames=T$$)&&(this._count=T$$.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),T$D(0,T$b,"autoPlay",null,function(T$$){T$$?this.play():this.stop()}),T$D(0,T$b,"source",null,function(T$$){-1<T$$.indexOf(".ani")?this.loadAnimation(T$$):-1<T$$.indexOf(".json")||-1<T$$.indexOf("als")||-1<T$$.indexOf("atlas")?this.loadAtlas(T$$):this.loadImages(T$$.split(","))}),T$D(0,T$b,"autoAnimation",null,function(T$$){this.play(0,!0,T$$,!1)}),T$I.createFrames=function(T$$,T$b){var T$u,T$Z,T$E=0,T$r=0;if("string"==typeof T$$){var T$F=T$x$.getAtlas(T$$);if(T$F&&T$F.length)for(T$u=[],T$E=0,T$r=T$F.length;T$E<T$r;T$E++)(T$Z=new T$O.createGraphics).drawTexture(T$x$.getRes(T$F[T$E]),0,0),T$u.push(T$Z)}else if(T$$ instanceof Array)for(T$u=[],T$E=0,T$r=T$$.length;T$E<T$r;T$E++)(T$Z=new T$O.createGraphics).loadImage(T$$[T$E],0,0),T$u.push(T$Z);return T$b&&(T$I.framesMap[T$b]=T$u),T$u},T$I.clearCache=function(T$$){var T$b,T$u=T$I.framesMap,T$Z=T$$+"#";for(T$b in T$u)T$b!==T$$&&0!=T$b.indexOf(T$Z)||delete T$I.framesMap[T$b]},T$I.framesMap={}}(T$e$),function(T$$){function T$r(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,T$r.__super.call(this),null==T$r._sortIndexFun&&(T$r._sortIndexFun=T$i.sortByKey("index",!1,!0))}T$w(T$r,"laya.display.FrameAnimation",T$$);var T$b=T$r.prototype;return T$b._setUp=function(T$$,T$b){this._labels=null,this._animationNewFrames=null,this._targetDic=T$$,this._animationData=T$b,this.interval=1e3/T$b.frameRate,T$b.parsed?(this._count=T$b.count,this._labels=T$b.labels,this._animationNewFrames=T$b.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),T$b.parsed=!0,T$b.labels=this._labels,T$b.count=this._count,T$b.animationNewFrames=this._animationNewFrames},T$b.clear=function(){T$$.prototype.clear.call(this),this._targetDic=null,this._animationData=null},T$b._displayToIndex=function(T$$){if(this._animationData){T$$<0&&(T$$=0),T$$>this._count&&(T$$=this._count);var T$b=this._animationData.nodes,T$u=0,T$Z=T$b.length;for(T$u=0;T$u<T$Z;T$u++)this._displayNodeToFrame(T$b[T$u],T$$)}},T$b._displayNodeToFrame=function(T$$,T$b,T$u){T$u||(T$u=this._targetDic);var T$Z=T$u[T$$.target];if(T$Z){var T$E,T$r,T$F,T$x=T$$.frames,T$g=T$$.keys,T$H=0,T$w=T$g.length;for(T$H=0;T$H<T$w;T$H++)T$F=(T$r=T$x[T$E=T$g[T$H]]).length>T$b?T$r[T$b]:T$r[T$r.length-1],T$Z[T$E]=T$F}},T$b._calculateDatas=function(){if(this._animationData){var T$$,T$b=this._animationData.nodes,T$u=0,T$Z=T$b.length;for(T$u=this._count=0;T$u<T$Z;T$u++)T$$=T$b[T$u],this._calculateNodeKeyFrames(T$$);this._count+=1}},T$b._calculateNodeKeyFrames=function(T$$){var T$b,T$u,T$Z=T$$.keyframes,T$E=T$$.target;for(T$b in T$$.frames||(T$$.frames={}),T$$.keys?T$$.keys.length=0:T$$.keys=[],T$$.initValues||(T$$.initValues={}),T$Z)T$u=T$Z[T$b],T$$.frames[T$b]||(T$$.frames[T$b]=[]),this._targetDic&&this._targetDic[T$E]&&(T$$.initValues[T$b]=this._targetDic[T$E][T$b]),T$u.sort(T$r._sortIndexFun),T$$.keys.push(T$b),this._calculateNodePropFrames(T$u,T$$.frames[T$b],T$b,T$E)},T$b.resetToInitState=function(){if(this._targetDic&&this._animationData){var T$$,T$b,T$u=this._animationData.nodes,T$Z=0,T$E=T$u.length;for(T$Z=0;T$Z<T$E;T$Z++)if(T$b=(T$$=T$u[T$Z]).initValues){var T$r,T$F=this._targetDic[T$$.target];if(T$F)for(T$r in T$b)T$F[T$r]=T$b[T$r]}}},T$b._calculateNodePropFrames=function(T$$,T$b,T$u,T$Z){var T$E=0,T$r=T$$.length-1;if(0<T$r){for(T$b.length=T$$[T$r].index+1,T$E=0;T$E<T$r;T$E++)this._dealKeyFrame(T$$[T$E]),this._calculateFrameValues(T$$[T$E],T$$[T$E+1],T$b);this._dealKeyFrame(T$$[T$E])}0==T$r&&(T$b[T$$[0].index]=T$$[0].value,this._animationNewFrames&&(this._animationNewFrames[T$$[0].index]=!0))},T$b._dealKeyFrame=function(T$$){T$$.label&&""!=T$$.label&&this.addLabel(T$$.label,T$$.index)},T$b._calculateFrameValues=function(T$$,T$b,T$u){var T$Z,T$E=0,T$r=T$$.index,T$F=T$b.index,T$x=T$$.value,T$g=T$b.value-T$$.value,T$H=T$F-T$r;if(T$F>this._count&&(this._count=T$F),T$$.tween)for(null==(T$Z=T$Q[T$$.tweenMethod])&&(T$Z=T$Q.linearNone),T$E=T$r;T$E<T$F;T$E++)T$u[T$E]=T$Z(T$E-T$r,T$x,T$g,T$H),this._animationNewFrames&&(this._animationNewFrames[T$E]=!0);else for(T$E=T$r;T$E<T$F;T$E++)T$u[T$E]=T$x;this._animationNewFrames&&(this._animationNewFrames[T$$.index]=!0,this._animationNewFrames[T$b.index]=!0),T$u[T$b.index]=T$b.value},T$r._sortIndexFun=null,T$r}(T$e$)),T$P$=function(T$b){function T$E(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",T$E.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=T$L$.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}T$w(T$E,"laya.display.Input",T$b);var T$$=T$E.prototype;return T$$.setSelection=function(T$$,T$b){this.focus=!0,laya.display.Input.inputElement.selectionStart=T$$,laya.display.Input.inputElement.selectionEnd=T$b},T$$._onUnDisplay=function(T$$){this.focus=!1},T$$._onMouseDown=function(T$$){this.focus=!0},T$$._syncInputTransform=function(){var T$$=this.nativeInput,T$b=T$d.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),T$u=this._width-this.padding[1]-this.padding[3],T$Z=this._height-this.padding[0]-this.padding[2];T$Y.isConchApp?(T$$.setScale(T$b.scaleX,T$b.scaleY),T$$.setSize(T$u,T$Z),T$$.setPos(T$b.x,T$b.y)):(T$E.inputContainer.style.transform=T$E.inputContainer.style.webkitTransform="scale("+T$b.scaleX+","+T$b.scaleY+") rotate("+T$z.stage.canvasDegree+"deg)",T$$.style.width=T$u+"px",T$$.style.height=T$Z+"px",T$E.inputContainer.style.left=T$b.x+"px",T$E.inputContainer.style.top=T$b.y+"px")},T$$.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},T$$._setInputMethod=function(){T$E.input.parentElement&&T$E.inputContainer.removeChild(T$E.input),T$E.area.parentElement&&T$E.inputContainer.removeChild(T$E.area),T$E.inputElement=this._multiline?T$E.area:T$E.input,T$E.inputContainer.appendChild(T$E.inputElement),T$L$.RightToLeft&&(T$E.inputElement.style.direction="rtl")},T$$._focusIn=function(){laya.display.Input.isInputting=!0;var T$$=this.nativeInput;this._focus=!0;var T$b=T$$.style;T$b.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),T$$.readOnly=!this._editable,T$Y.isConchApp&&(T$$.setType(this._type),T$$.setForbidEdit(!this._editable)),T$$.maxLength=this._maxChars;this.padding;if(T$$.type=this._type,T$$.value=this._content,T$$.placeholder=this._prompt,T$z.stage.off("keydown",this,this._onKeyDown),T$z.stage.on("keydown",this,this._onKeyDown),(T$z.stage.focus=this).event("focus"),T$s.onPC&&T$$.focus(),!T$s.onMiniGame){this._text;this._text=null}this.typeset(),T$$.setColor(this._originColor),T$$.setFontSize(this.fontSize),T$$.setFontFace(T$s.onIPhone&&T$L$._fontFamilyMap[this.font]||this.font),T$Y.isConchApp&&T$$.setMultiAble&&T$$.setMultiAble(this._multiline),T$b.lineHeight=this.leading+this.fontSize+"px",T$b.fontStyle=this.italic?"italic":"normal",T$b.fontWeight=this.bold?"bold":"normal",T$b.textAlign=this.align,T$b.padding="0 0",this._syncInputTransform(),!T$Y.isConchApp&&T$s.onPC&&T$z.timer.frameLoop(1,this,this._syncInputTransform)},T$$._setPromptColor=function(){(T$E.promptStyleDOM=T$s.getElementById("promptStyle"))||((T$E.promptStyleDOM=T$s.createElement("style")).setAttribute("id","promptStyle"),T$s.document.head.appendChild(T$E.promptStyleDOM)),T$E.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},T$$._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(T$z.superSet(T$L$,this,"text",this._content),T$z.superSet(T$L$,this,"color",this._originColor)):(T$z.superSet(T$L$,this,"text",this._prompt),T$z.superSet(T$L$,this,"color",this._promptColor)),T$z.stage.off("keydown",this,this._onKeyDown),T$z.stage.focus=null,this.event("blur"),T$Y.isConchApp&&this.nativeInput.blur(),T$s.onPC&&T$z.timer.clear(this,this._syncInputTransform)},T$$._onKeyDown=function(T$$){13===T$$.keyCode&&(T$s.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},T$$.changeText=function(T$$){this._content=T$$,this._focus?(this.nativeInput.value=T$$||"",this.event("change")):T$b.prototype.changeText.call(this,T$$)},T$D(0,T$$,"color",T$b.prototype._$get_color,function(T$$){this._focus&&this.nativeInput.setColor(T$$),T$z.superSet(T$L$,this,"color",this._content?T$$:this._promptColor),this._originColor=T$$}),T$D(0,T$$,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(T$$){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),T$D(0,T$$,"multiline",function(){return this._multiline},function(T$$){this._multiline=T$$,this.valign=T$$?"top":"middle"}),T$D(0,T$$,"maxChars",function(){return this._maxChars},function(T$$){T$$<=0&&(T$$=1e5),this._maxChars=T$$}),T$D(0,T$$,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(T$$){T$z.superSet(T$L$,this,"color",this._originColor),T$$+="",this._focus?(this.nativeInput.value=T$$||"",this.event("change")):(this._multiline||(T$$=T$$.replace(/\r?\n/g,"")),(this._content=T$$)?T$z.superSet(T$L$,this,"text",T$$):(T$z.superSet(T$L$,this,"text",this._prompt),T$z.superSet(T$L$,this,"color",this.promptColor)))}),T$D(0,T$$,"nativeInput",function(){return this._multiline?T$E.area:T$E.input}),T$D(0,T$$,"prompt",function(){return this._prompt},function(T$$){!this._text&&T$$&&T$z.superSet(T$L$,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?T$z.superSet(T$L$,this,"text",this._text==this._prompt?T$$:this._text):T$z.superSet(T$L$,this,"text",T$$),this._prompt=T$L$.langPacks&&T$L$.langPacks[T$$]?T$L$.langPacks[T$$]:T$$}),T$D(0,T$$,"focus",function(){return this._focus},function(T$$){var T$b=this.nativeInput;this._focus!==T$$&&(T$$?(T$b.target?T$b.target._focusOut():this._setInputMethod(),(T$b.target=this)._focusIn()):(T$b.target=null,this._focusOut(),T$s.document.body.scrollTop=0,T$b.blur(),T$Y.isConchApp?T$b.setPos(-1e4,-1e4):T$E.inputContainer.contains(T$b)&&T$E.inputContainer.removeChild(T$b)))}),T$D(0,T$$,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(T$$){T$$?(-1<(T$$="[^"+T$$+"]").indexOf("^^")&&(T$$=T$$.replace("^^","")),this._restrictPattern=new RegExp(T$$,"g")):this._restrictPattern=null}),T$D(0,T$$,"editable",function(){return this._editable},function(T$$){this._editable=T$$,T$Y.isConchApp&&T$E.input.setForbidEdit(!T$$)}),T$D(0,T$$,"promptColor",function(){return this._promptColor},function(T$$){this._promptColor=T$$,this._content||T$z.superSet(T$L$,this,"color",T$$)}),T$D(0,T$$,"type",function(){return this._type},function(T$$){this._getCSSStyle().password="password"==T$$,this._type=T$$,T$Y.isConchApp&&this.nativeInput.setType(T$$)}),T$D(0,T$$,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(T$$){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),T$D(0,T$$,"asPassword",function(){return this._getCSSStyle().password},function(T$$){this._getCSSStyle().password=T$$,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),T$E.__init__=function(){T$E._createInputElement(),T$s.onMobile&&T$Y.canvas.addEventListener(T$E.IOS_IFRAME?T$s.onMiniGame?"touchend":"click":"touchend",T$E._popupInputMethod)},T$E._popupInputMethod=function(T$$){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},T$E._createInputElement=function(){T$E._initInput(T$E.area=T$s.createElement("textarea")),T$E._initInput(T$E.input=T$s.createElement("input")),(T$E.inputContainer=T$s.createElement("div")).style.position="absolute",T$E.inputContainer.style.zIndex=1e5,T$s.container.appendChild(T$E.inputContainer),T$E.inputContainer.setPos=function(T$$,T$b){T$E.inputContainer.style.left=T$$+"px",T$E.inputContainer.style.top=T$b+"px"}},T$E._initInput=function(T$b){var T$$=T$b.style;T$$.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",T$$.resize="none",T$$.backgroundColor="transparent",T$$.border="none",T$$.outline="none",T$$.zIndex=1,T$b.addEventListener("input",T$E._processInputting),T$b.addEventListener("mousemove",T$E._stopEvent),T$b.addEventListener("mousedown",T$E._stopEvent),T$b.addEventListener("touchmove",T$E._stopEvent),T$b.setFontFace=function(T$$){T$b.style.fontFamily=T$$},T$Y.isConchApp||(T$b.setColor=function(T$$){T$b.style.color=T$$},T$b.setFontSize=function(T$$){T$b.style.fontSize=T$$+"px"})},T$E._processInputting=function(T$$){var T$b=laya.display.Input.inputElement.target;if(T$b){var T$u=laya.display.Input.inputElement.value;T$b._restrictPattern&&(T$u=T$u.replace(/\u2006|\x27/g,""),T$b._restrictPattern.test(T$u)&&(T$u=T$u.replace(T$b._restrictPattern,""),laya.display.Input.inputElement.value=T$u)),T$b._text=T$u,T$b.event("input")}},T$E._stopEvent=function(T$$){"touchmove"==T$$.type&&T$$.preventDefault(),T$$.stopPropagation&&T$$.stopPropagation()},T$E.TYPE_TEXT="text",T$E.TYPE_PASSWORD="password",T$E.TYPE_EMAIL="email",T$E.TYPE_URL="url",T$E.TYPE_NUMBER="number",T$E.TYPE_RANGE="range",T$E.TYPE_DATE="date",T$E.TYPE_MONTH="month",T$E.TYPE_WEEK="week",T$E.TYPE_TIME="time",T$E.TYPE_DATE_TIME="datetime",T$E.TYPE_DATE_TIME_LOCAL="datetime-local",T$E.TYPE_SEARCH="search",T$E.input=null,T$E.area=null,T$E.inputElement=null,T$E.inputContainer=null,T$E.confirmButton=null,T$E.promptStyleDOM=null,T$E.inputHeight=45,T$E.isInputting=!1,T$E.stageMatrix=null,T$g(T$E,["IOS_IFRAME",function(){return this.IOS_IFRAME=T$s.onIOS&&T$s.window.top!=T$s.window.self}]),T$E}(T$L$),T$i$=function(T$$){function T$u(T$$,T$b){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,T$u.__super.call(this),T$$&&this._init_(T$$,T$b)}T$w(T$u,"laya.resource.HTMLImage",T$_$);var T$b=T$u.prototype;return T$b._init_=function(T$$,T$b){this._src=T$$,this._source=new T$s.window.Image,T$b&&(T$b.onload&&(this.onload=T$b.onload),T$b.onerror&&(this.onerror=T$b.onerror),T$b.onCreate&&T$b.onCreate(this)),0!=T$$.indexOf("data:image")&&(this._source.crossOrigin=""),T$$&&(this._source.src=T$$)},T$b.recreateResource=function(){var T$$=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var T$b=this;this._source=new T$s.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(T$b._needReleaseAgain)return T$b._needReleaseAgain=!1,T$b._source.onload=null,void(T$b._source=null);T$b._source.onload=null,T$b.memorySize=T$$._w*T$$._h*4,T$b._recreateLock=!1,T$b.completeCreate()},this._source.src=this._src}},T$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},T$b.onresize=function(){this._w=this._source.width,this._h=this._source.height},T$D(0,T$b,"onload",null,function(T$$){var T$b=this;this._onload=T$$,this._source&&(this._source.onload=null!=this._onload?function(){T$b.onresize(),T$b._onload()}:null)}),T$D(0,T$b,"onerror",null,function(T$$){var T$b=this;this._onerror=T$$,this._source&&(this._source.onerror=null!=this._onerror?function(){T$b._onerror()}:null)}),T$D(0,T$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(T$$){this._enableMerageInAtlas=T$$,T$Y.isConchApp&&this._source&&(this._source.enableMerageInAtlas=T$$)}),T$u.create=function(T$$,T$b){return new T$u(T$$,T$b)},T$u}(),T$z$=(function(T$r){function T$$(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,T$$.__super.call(this)}T$w(T$$,"laya.display.EffectAnimation",T$r);var T$b=T$$.prototype;T$b._onOtherBegin=function(T$$){T$$!=this&&this.stop()},T$b.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},T$b._onPlayAction=function(){this.play(0,!1)},T$b.play=function(T$$,T$b,T$u,T$Z){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=!0),void 0===T$u&&(T$u=""),void 0===T$Z&&(T$Z=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,T$$,T$b,T$u,T$Z))},T$b._recordInitData=function(){if(this._aniKeys){var T$$,T$b,T$u=0;for(T$$=this._aniKeys.length,T$u=0;T$u<T$$;T$u++)T$b=this._aniKeys[T$u],this._initData[T$b]=this._target[T$b]}},T$b._displayToIndex=function(T$$){if(this._animationData){T$$<0&&(T$$=0),T$$>this._count&&(T$$=this._count);var T$b=this._animationData.nodes,T$u=0,T$Z=T$b.length;for(T$Z=1<T$Z?1:T$Z,T$u=0;T$u<T$Z;T$u++)this._displayNodeToFrame(T$b[T$u],T$$)}},T$b._displayNodeToFrame=function(T$$,T$b,T$u){if(this._target){var T$Z;T$Z=this._target;var T$E,T$r,T$F,T$x,T$g=T$$.frames,T$H=T$$.keys,T$w=0,T$I=T$H.length;T$x=T$$.secondFrames;var T$o,T$N,T$D,T$e,T$L=0;for(T$w=0;T$w<T$I;T$w++)T$r=T$g[T$E=T$H[T$w]],T$F=-1==(T$L=T$x[T$E])?this._initData[T$E]:T$b<T$L?(T$D=(T$N=T$$.keyframes[T$E])[0]).tween?(null==(T$o=T$Q[T$D.tweenMethod])&&(T$o=T$Q.linearNone),T$e=T$N[1],T$o(T$b,this._initData[T$E],T$e.value-this._initData[T$E],T$e.index)):this._initData[T$E]:T$r.length>T$b?T$r[T$b]:T$r[T$r.length-1],T$Z[T$E]=T$F}},T$b._calculateNodeKeyFrames=function(T$$){T$r.prototype._calculateNodeKeyFrames.call(this,T$$);var T$b,T$u,T$Z,T$E=T$$.keyframes;T$$.target;for(T$b in T$Z={},T$$.secondFrames=T$Z,T$E)(T$u=T$E[T$b]).length<=1?T$Z[T$b]=-1:T$Z[T$b]=T$u[1].index},T$D(0,T$b,"target",function(){return this._target},function(T$$){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=T$$,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),T$D(0,T$b,"playEvent",null,function(T$$){(this._playEvents=T$$)&&this.addEvent()}),T$D(0,T$b,"effectData",null,function(T$$){var T$b;T$$&&((T$b=T$$.animations)&&T$b[0]&&(this._setUp({},T$b[0]),T$b[0].nodes&&T$b[0].nodes[0]&&(this._aniKeys=T$b[0].nodes[0].keys)))}),T$D(0,T$b,"effectClass",null,function(T$$){var T$b,T$u;(this._effectClass=T$c.getClass(T$$),this._effectClass)&&((T$b=this._effectClass.uiView)&&(T$u=T$b.animations)&&T$u[0]&&(this._setUp({},T$u[0]),T$u[0].nodes&&T$u[0].nodes[0]&&(this._aniKeys=T$u[0].nodes[0].keys)))}),T$$.EffectAnimationBegin="effectanimationbegin"}(T$S$),function(T$b){var T$C;function T$K(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,T$K.__super.call(this)}T$w(T$K,"laya.utils.GraphicAnimation",T$b);var T$$=T$K.prototype;return T$$._parseNodeList=function(T$$){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[T$$.compId]=T$$.props,T$$.compId&&this._nodeList.push(T$$.compId);var T$b=T$$.child;if(T$b){var T$u=0,T$Z=T$b.length;for(T$u=0;T$u<T$Z;T$u++)this._parseNodeList(T$b[T$u])}},T$$._calGraphicData=function(T$$){var T$b;if(this._setUp(null,T$$),this._createGraphicData(),this._nodeIDAniDic)for(T$b in this._nodeIDAniDic)this._nodeIDAniDic[T$b]=null},T$$._createGraphicData=function(){var T$$,T$b=[],T$u=0,T$Z=this.count,T$E=this._animationNewFrames;for(T$E||(T$E=[]),T$u=0;T$u<T$Z;T$u++)!T$E[T$u]&&T$$||(T$$=this._createFrameGraphic(T$u)),T$b.push(T$$);this._gList=T$b},T$$._createFrameGraphic=function(T$$){var T$b=T$O.createGraphics();return T$K._rootMatrix||(T$K._rootMatrix=new T$V),this._updateNodeGraphic(this._rootNode,T$$,T$K._rootMatrix,T$b),T$b},T$$._updateNodeGraphic=function(T$$,T$b,T$u,T$Z,T$E){var T$r;void 0===T$E&&(T$E=1);var T$F,T$x,T$g,T$H=(T$r=this._nodeGDic[T$$.compId]=this._getNodeGraphicData(T$$.compId,T$b,this._nodeGDic[T$$.compId])).alpha*T$E;if(!(T$H<.01)&&(T$r.resultTransform||(T$r.resultTransform=T$V.create()),T$F=T$r.resultTransform,T$V.mul(T$r.transform,T$u,T$F),T$r.skin&&(T$x=this._getTextureByUrl(T$r.skin))&&(T$F._checkTransform()?(T$Z.drawTexture(T$x,0,0,T$r.width,T$r.height,T$F,T$H),T$r.resultTransform=null):T$Z.drawTexture(T$x,T$F.tx,T$F.ty,T$r.width,T$r.height,null,T$H)),T$g=T$$.child)){var T$w,T$I=0;for(T$w=T$g.length,T$I=0;T$I<T$w;T$I++)this._updateNodeGraphic(T$g[T$I],T$b,T$F,T$Z,T$H)}},T$$._updateNoChilds=function(T$$,T$b){if(T$$.skin){var T$u=this._getTextureByUrl(T$$.skin);if(T$u){var T$Z=T$$.transform;T$Z._checkTransform();!T$Z.bTransform?T$b.drawTexture(T$u,T$Z.tx,T$Z.ty,T$$.width,T$$.height,null,T$$.alpha):T$b.drawTexture(T$u,0,0,T$$.width,T$$.height,T$Z.clone(),T$$.alpha)}}},T$$._updateNodeGraphic2=function(T$$,T$b,T$u){var T$Z;if(T$Z=this._nodeGDic[T$$.compId]=this._getNodeGraphicData(T$$.compId,T$b,this._nodeGDic[T$$.compId]),T$$.child){var T$E=T$Z.transform;T$E._checkTransform();var T$r,T$F;T$F=(T$r=!T$E.bTransform)&&(0!=T$E.tx||0!=T$E.ty);var T$x,T$g,T$H;if((T$x=T$E.bTransform||1!=T$Z.alpha)&&T$u.save(),1!=T$Z.alpha&&T$u.alpha(T$Z.alpha),T$r?T$F&&T$u.translate(T$E.tx,T$E.ty):T$u.transform(T$E.clone()),T$g=T$$.child,T$Z.skin&&(T$H=this._getTextureByUrl(T$Z.skin))&&T$u.drawTexture(T$H,0,0,T$Z.width,T$Z.height),T$g){var T$w,T$I=0;for(T$w=T$g.length,T$I=0;T$I<T$w;T$I++)this._updateNodeGraphic2(T$g[T$I],T$b,T$u)}T$x?T$u.restore():T$r?T$F&&T$u.translate(-T$E.tx,-T$E.ty):T$u.transform(T$E.clone().invert())}else this._updateNoChilds(T$Z,T$u)},T$$._calculateNodeKeyFrames=function(T$$){T$b.prototype._calculateNodeKeyFrames.call(this,T$$),this._nodeIDAniDic[T$$.target]=T$$},T$$.getNodeDataByID=function(T$$){return this._nodeIDAniDic[T$$]},T$$._getParams=function(T$$,T$b,T$u,T$Z){var T$E=T$K._temParam;T$E.length=T$b.length;var T$r=0,T$F=T$b.length;for(T$r=0;T$r<T$F;T$r++)T$E[T$r]=this._getObjVar(T$$,T$b[T$r][0],T$u,T$b[T$r][1],T$Z);return T$E},T$$._getObjVar=function(T$$,T$b,T$u,T$Z,T$E){if(T$$.hasOwnProperty(T$b)){var T$r=T$$[T$b];if(T$u>=T$r.length&&(T$u=T$r.length-1),null!=T$$[T$b][T$u])return T$$[T$b][T$u]}return T$E.hasOwnProperty(T$b)?T$E[T$b]:T$Z},T$$._getNodeGraphicData=function(T$$,T$b,T$u){T$u||(T$u=T$C.create()),T$u.transform?T$u.transform.identity():T$u.transform=T$V.create();var T$Z=this.getNodeDataByID(T$$);if(!T$Z)return T$u;var T$E,T$r,T$F=T$Z.frames,T$x=this._getParams(T$F,T$K._drawTextureCmd,T$b,this._nodeDefaultProps[T$$]),T$g=T$x[0],T$H=NaN,T$w=NaN,T$I=T$x[5],T$o=T$x[6],T$N=T$x[13],T$D=T$x[14],T$e=T$x[7],T$L=T$x[8],T$T=T$x[9],T$_=T$x[11],T$y=T$x[12];T$H=T$x[3],T$w=T$x[4],0!=T$H&&0!=T$w||(T$g=null),-1==T$H&&(T$H=0),-1==T$w&&(T$w=0),T$u.skin=T$g,T$u.width=T$H,T$u.height=T$w,T$g&&((T$E=this._getTextureByUrl(T$g))?(T$H||(T$H=T$E.sourceWidth),T$w||(T$w=T$E.sourceHeight)):console.warn("lost skin:",T$g,",you may load pics first")),T$u.alpha=T$x[10],T$r=T$u.transform,0!=T$N&&(T$I=T$N*T$H),0!=T$D&&(T$o=T$D*T$w),0==T$I&&0==T$o||T$r.translate(-T$I,-T$o);var T$S=null;if(T$T||1!==T$e||1!==T$L||T$_||T$y){(T$S=T$K._tempMt).identity(),T$S.bTransform=!0;var T$P=.0174532922222222*(T$T-T$_),T$i=.0174532922222222*(T$T+T$y),T$z=Math.cos(T$i),T$q=Math.sin(T$i),T$a=Math.sin(T$P),T$t=Math.cos(T$P);T$S.a=T$e*T$z,T$S.b=T$e*T$q,T$S.c=-T$L*T$a,T$S.d=T$L*T$t,T$S.tx=T$S.ty=0}return T$S&&(T$r=T$V.mul(T$r,T$S,T$r)),T$r.translate(T$x[1],T$x[2]),T$u},T$$._getTextureByUrl=function(T$$){return T$x$.getRes(T$$)},T$$.setAniData=function(T$$,T$b){if(T$$.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=T$$,this._parseNodeList(T$$);var T$u,T$Z={},T$E=[],T$r=T$$.animations,T$F=0,T$x=T$r.length;for(T$F=0;T$F<T$x;T$F++)if(T$u=T$r[T$F],this._labels=null,(!T$b||T$b==T$u.name)&&T$u){try{this._calGraphicData(T$u)}catch(T$$){console.warn("parse animation fail:"+T$u.name+",empty animation created"),this._gList=[]}var T$g={};T$g.interval=1e3/T$u.frameRate,T$g.frames=this._gList,T$g.labels=this._labels,T$g.name=T$u.name,T$E.push(T$g),T$Z[T$u.name]=T$g}this.animationList=T$E,this.animationDic=T$Z}T$K._temParam.length=0},T$$.parseByData=function(T$$){var T$b,T$u;T$b=T$$.nodeRoot,T$u=T$$.aniO,delete T$$.nodeRoot,delete T$$.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=T$b,this._parseNodeList(T$b),this._labels=null;try{this._calGraphicData(T$u)}catch(T$$){console.warn("parse animation fail:"+T$u.name+",empty animation created"),this._gList=[]}var T$Z=T$$;return T$Z.interval=1e3/T$u.frameRate,T$Z.frames=this._gList,T$Z.labels=this._labels,T$Z.name=T$u.name,T$Z},T$$.setUpAniData=function(T$$){if(T$$.animations){var T$b,T$u={},T$Z=[],T$E=T$$.animations,T$r=0,T$F=T$E.length;for(T$r=0;T$r<T$F;T$r++)if(T$b=T$E[T$r]){var T$x={};T$x.name=T$b.name,T$x.aniO=T$b,T$x.nodeRoot=T$$,T$Z.push(T$x),T$u[T$b.name]=T$x}this.animationList=T$Z,this.animationDic=T$u}},T$$._clear=function(){var T$$,T$b;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(T$$ in this._nodeGDic)(T$b=this._nodeGDic[T$$])&&T$b.recover();this._nodeGDic=null},T$K.parseAnimationByData=function(T$$){var T$b;return T$K._I||(T$K._I=new T$K),T$b=T$K._I.parseByData(T$$),T$K._I._clear(),T$b},T$K.parseAnimationData=function(T$$){var T$b;return T$K._I||(T$K._I=new T$K),T$K._I.setUpAniData(T$$),(T$b={}).animationList=T$K._I.animationList,T$b.animationDic=T$K._I.animationDic,T$K._I._clear(),T$b},T$K._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],T$K._temParam=[],T$K._I=null,T$K._rootMatrix=null,T$g(T$K,["_tempMt",function(){return this._tempMt=new T$V}]),T$K.__init$=function(){T$C=function(){function T$$(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return T$w(T$$,""),T$$.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),T$G.recover("GraphicNode",this)},T$$.create=function(){return T$G.getItemByClass("GraphicNode",T$$)},T$$}()},T$K}(T$S$));T$z.__init([T$H,T$g$,T$Y,T$s,T$j,T$t,T$$,T$z$])}(window,document,Laya),function(T$$,T$b,T$u){T$u.un,T$u.uns,T$u.static;var T$Z=T$u.class;T$u.getset,T$u.__newvec;new(function(){function T$$(){}return T$Z(T$$,"LayaMain"),T$$}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$$,T$b){"use strict";for(var T$u in Object.defineProperty(T$b,"__esModule",{value:!0}),Laya){var T$Z=Laya[T$u];T$Z&&T$Z.__isclass&&(T$b[T$u]=T$Z)}}),function(T$$,T$b,T$i){T$i.un,T$i.uns;var T$F=T$i.static,T$o=T$i.class,T$Z=T$i.getset,T$r=T$i.__newvec,T$w=laya.maths.Arith,T$I=laya.maths.Bezier,T$u=laya.resource.Bitmap,T$N=laya.utils.Browser,T$g=laya.utils.Byte,T$D=laya.utils.Color,T$z=(laya.filters.ColorFilter,T$i.Config),T$E=laya.resource.Context,T$q=(laya.events.Event,laya.filters.Filter),T$x=laya.display.Graphics,T$H=laya.resource.HTMLCanvas,T$e=(laya.utils.HTMLChar,laya.resource.HTMLImage),T$L=laya.resource.HTMLSubImage,T$a=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),T$t=laya.maths.Point,T$C=laya.maths.Rectangle,T$T=laya.renders.Render,T$_=(laya.renders.RenderContext,laya.renders.RenderSprite),T$y=laya.resource.Resource,T$S=laya.resource.ResourceManager,T$P=laya.utils.RunDriver,T$K=laya.display.Sprite,T$O=laya.display.Stage,T$V=laya.utils.Stat,T$v=laya.utils.StringKey,T$p=(laya.display.css.Style,laya.system.System),T$Y=laya.display.Text,T$k=laya.resource.Texture,T$M=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),T$l=laya.utils.VectorGraphManager;laya.utils.WordText;T$i.interface("laya.webgl.shapes.IShape"),T$i.interface("laya.webgl.submit.ISubmit"),T$i.interface("laya.webgl.text.ICharSegment"),T$i.interface("laya.webgl.canvas.save.ISaveData"),T$i.interface("laya.webgl.resource.IMergeAtlasBitmap"),T$i.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var T$X=function(){function T$$(){}T$o(T$$,"laya.filters.webgl.FilterActionGL");var T$b=T$$.prototype;return T$i.imps(T$b,{"laya.filters.IFilterActionGL":!0}),T$b.setValue=function(T$$){},T$b.setValueMix=function(T$$){},T$b.apply3d=function(T$$,T$b,T$u,T$Z,T$E){return null},T$b.apply=function(T$$){return null},T$Z(0,T$b,"typeMix",function(){return 0}),T$$}(),T$s=function(){function T$$(){}return T$o(T$$,"laya.webgl.shader.ShaderValue"),T$$}(),T$m=function(){var T$Z,T$E;function T$$(T$$,T$b,T$u){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new T$E,void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),this._cells=null,this._rowInfo=null,this._init(T$$,T$b),this._atlasID=T$u}T$o(T$$,"laya.webgl.atlas.AtlasGrid");var T$b=T$$.prototype;return T$b.getAltasID=function(){return this._atlasID},T$b.setAltasID=function(T$$){0<=T$$&&(this._atlasID=T$$)},T$b.addTex=function(T$$,T$b,T$u){var T$Z=this._get(T$b,T$u);return 0==T$Z.ret||(this._fill(T$Z.x,T$Z.y,T$b,T$u,T$$),this._texCount++),T$Z},T$b._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},T$b._init=function(T$$,T$b){if(this._width=T$$,this._height=T$b,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=T$r(this._height);for(var T$u=0;T$u<this._height;T$u++)this._rowInfo[T$u]=new T$Z;return this._clear(),!0},T$b._get=function(T$$,T$b){var T$u=new T$c;if(T$$>=this._failSize.width&&T$b>=this._failSize.height)return T$u;for(var T$Z=-1,T$E=-1,T$r=this._width,T$F=this._height,T$x=this._cells,T$g=0;T$g<T$F;T$g++)if(!(this._rowInfo[T$g].spaceCount<T$$))for(var T$H=0;T$H<T$r;){var T$w=3*(T$g*T$r+T$H);if(0!=T$x[T$w]||T$x[1+T$w]<T$$||T$x[2+T$w]<T$b)T$H+=T$x[1+T$w];else{T$Z=T$H,T$E=T$g;for(var T$I=0;T$I<T$$;T$I++)if(T$x[3*T$I+T$w+2]<T$b){T$Z=-1;break}if(!(T$Z<0))return T$u.ret=!0,T$u.x=T$Z,T$u.y=T$E,T$u;T$H+=T$x[1+T$w]}}return T$u},T$b._fill=function(T$$,T$b,T$u,T$Z,T$E){var T$r=this._width,T$F=this._height;this._check(T$$+T$u<=T$r&&T$b+T$Z<=T$F);for(var T$x=T$b;T$x<T$Z+T$b;++T$x){this._check(this._rowInfo[T$x].spaceCount>=T$u),this._rowInfo[T$x].spaceCount-=T$u;for(var T$g=0;T$g<T$u;T$g++){var T$H=3*(T$$+T$x*T$r+T$g);this._check(0==this._cells[T$H]),this._cells[T$H]=T$E,this._cells[1+T$H]=T$u,this._cells[2+T$H]=T$Z}}if(0<T$$)for(T$x=0;T$x<T$Z;++T$x){var T$w=0;for(T$g=T$$-1;0<=T$g&&0==this._cells[3*((T$b+T$x)*T$r+T$g)];--T$g,++T$w);for(T$g=T$w;0<T$g;--T$g)this._cells[3*((T$b+T$x)*T$r+T$$-T$g)+1]=T$g,this._check(0<T$g)}if(0<T$b)for(T$g=T$$;T$g<T$$+T$u;++T$g){for(T$w=0,T$x=T$b-1;0<=T$x&&0==this._cells[3*(T$g+T$x*T$r)];--T$x,T$w++);for(T$x=T$w;0<T$x;--T$x)this._cells[3*(T$g+(T$b-T$x)*T$r)+2]=T$x,this._check(0<T$x)}},T$b._check=function(T$$){0==T$$&&console.log("xtexMerger 错误啦")},T$b._clear=function(){for(var T$$=this._texCount=0;T$$<this._height;T$$++)this._rowInfo[T$$].spaceCount=this._width;for(var T$b=0;T$b<this._height;T$b++)for(var T$u=0;T$u<this._width;T$u++){var T$Z=3*(T$b*this._width+T$u);this._cells[T$Z]=0,this._cells[1+T$Z]=this._width-T$u,this._cells[2+T$Z]=this._width-T$b}this._failSize.width=this._width+1,this._failSize.height=this._height+1},T$$.__init$=function(){T$Z=function(){function T$$(){this.spaceCount=0}return T$o(T$$,""),T$$}(),T$E=function(){function T$$(){this.width=0,this.height=0}return T$o(T$$,""),T$$}()},T$$}(),T$n=function(){function T$T(T$$,T$b,T$u,T$Z){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=T$$,this._height=T$b,this._gridSize=T$u,this._maxAtlaserCount=T$Z,this._gridNumX=T$$/T$u,this._gridNumY=T$b/T$u,this._curAtlasIndex=0,this._atlaserArray=[]}T$o(T$T,"laya.webgl.atlas.AtlasResourceManager");var T$$=T$T.prototype;return T$$.setAtlasParam=function(T$$,T$b,T$u,T$Z){if(1==this._setAtlasParam)return T$T._sid_=0,this._width=T$$,this._height=T$b,this._gridSize=T$u,this._maxAtlaserCount=T$Z,this._gridNumX=T$$/T$u,this._gridNumY=T$b/T$u,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},T$$.pushData=function(T$$){var T$b,T$u=T$$.bitmap,T$Z=-1,T$E=null,T$r=0,T$F=0;for(T$r=0,T$b=this._atlaserArray.length;T$r<T$b&&(T$F=(this._curAtlasIndex+T$r)%T$b,-1==(T$Z=(T$E=this._atlaserArray[T$F]).findBitmapIsExist(T$u)));T$r++);if(-1!=T$Z){var T$x=T$E.InAtlasWebGLImagesOffsetValue[T$Z];return T$D=T$x[0],T$e=T$x[1],T$E.addToAtlas(T$$,T$D,T$e),!0}this._setAtlasParam=!1;for(var T$g=Math.ceil((T$$.bitmap.width+2)/this._gridSize),T$H=Math.ceil((T$$.bitmap.height+2)/this._gridSize),T$w=!1,T$I=0;T$I<2;T$I++){var T$o=this._maxAtlaserCount;for(T$r=0;T$r<T$o;T$r++){T$F=(this._curAtlasIndex+T$r)%T$o,this._atlaserArray.length-1>=T$F||this._atlaserArray.push(new T$C$(this._gridNumX,this._gridNumY,this._width,this._height,T$T._sid_++));var T$N=this._atlaserArray[T$F],T$D=0,T$e=0,T$L=T$N.addTex(1,T$g,T$H);if(T$L.ret){T$D=T$L.x*this._gridSize+1,T$e=T$L.y*this._gridSize+1,T$u.lock=!0,T$N.addToAtlasTexture(T$u,T$D,T$e),T$N.addToAtlas(T$$,T$D,T$e),T$w=!0,this._curAtlasIndex=T$F;break}}if(T$w)break;this._atlaserArray.push(new T$C$(this._gridNumX,this._gridNumY,this._width,this._height,T$T._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return T$w||console.log(">>>AtlasManager pushData error"),T$w},T$$.addToAtlas=function(T$$){laya.webgl.atlas.AtlasResourceManager.instance.pushData(T$$)},T$$.garbageCollection=function(){if(!0===this._needGC){for(var T$$=this._atlaserArray.length-this._maxAtlaserCount,T$b=0;T$b<T$$;T$b++)this._atlaserArray[T$b].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+T$$),this._atlaserArray.splice(0,T$$),this._needGC=!1}return!0},T$$.freeAll=function(){for(var T$$=0,T$b=this._atlaserArray.length;T$$<T$b;T$$++)this._atlaserArray[T$$].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},T$$.getAtlaserCount=function(){return this._atlaserArray.length},T$$.getAtlaserByIndex=function(T$$){return this._atlaserArray[T$$]},T$Z(1,T$T,"instance",function(){return T$T._Instance||(T$T._Instance=new T$T(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),T$T._Instance}),T$Z(1,T$T,"enabled",function(){return T$z.atlasEnable}),T$Z(1,T$T,"atlasLimitWidth",function(){return T$T._atlasLimitWidth},function(T$$){T$T._atlasLimitWidth=T$$}),T$Z(1,T$T,"atlasLimitHeight",function(){return T$T._atlasLimitHeight},function(T$$){T$T._atlasLimitHeight=T$$}),T$T._enable=function(){T$z.atlasEnable=!0},T$T._disable=function(){T$z.atlasEnable=!1},T$T.__init__=function(){T$T.atlasTextureWidth=2048,T$T.atlasTextureHeight=2048,T$T.maxTextureCount=6,T$T.atlasLimitWidth=512,T$T.atlasLimitHeight=512},T$T._atlasLimitWidth=0,T$T._atlasLimitHeight=0,T$T.gridSize=16,T$T.atlasTextureWidth=0,T$T.atlasTextureHeight=0,T$T.maxTextureCount=0,T$T._atlasRestore=0,T$T.BOARDER_TYPE_NO=0,T$T.BOARDER_TYPE_RIGHT=1,T$T.BOARDER_TYPE_LEFT=2,T$T.BOARDER_TYPE_BOTTOM=4,T$T.BOARDER_TYPE_TOP=8,T$T.BOARDER_TYPE_ALL=15,T$T._sid_=0,T$T._Instance=null,T$T}(),T$c=function(){function T$$(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return T$o(T$$,"laya.webgl.atlas.MergeFillInfo"),T$$}(),T$J=function(){function T$b(){}return T$o(T$b,"laya.webgl.canvas.BlendMode"),T$b._init_=function(T$$){T$b.fns=[T$b.BlendNormal,T$b.BlendAdd,T$b.BlendMultiply,T$b.BlendScreen,T$b.BlendOverlay,T$b.BlendLight,T$b.BlendMask,T$b.BlendDestinationOut],T$b.targetFns=[T$b.BlendNormalTarget,T$b.BlendAddTarget,T$b.BlendMultiplyTarget,T$b.BlendScreenTarget,T$b.BlendOverlayTarget,T$b.BlendLightTarget,T$b.BlendMask,T$b.BlendDestinationOut]},T$b.BlendNormal=function(T$$){T$$.blendFunc(1,771)},T$b.BlendAdd=function(T$$){T$$.blendFunc(1,772)},T$b.BlendMultiply=function(T$$){T$$.blendFunc(774,771)},T$b.BlendScreen=function(T$$){T$$.blendFunc(1,1)},T$b.BlendOverlay=function(T$$){T$$.blendFunc(1,769)},T$b.BlendLight=function(T$$){T$$.blendFunc(1,1)},T$b.BlendNormalTarget=function(T$$){T$$.blendFunc(1,771)},T$b.BlendAddTarget=function(T$$){T$$.blendFunc(1,772)},T$b.BlendMultiplyTarget=function(T$$){T$$.blendFunc(774,771)},T$b.BlendScreenTarget=function(T$$){T$$.blendFunc(1,1)},T$b.BlendOverlayTarget=function(T$$){T$$.blendFunc(1,769)},T$b.BlendLightTarget=function(T$$){T$$.blendFunc(1,1)},T$b.BlendMask=function(T$$){T$$.blendFunc(0,770)},T$b.BlendDestinationOut=function(T$$){T$$.blendFunc(0,0)},T$b.activeBlendFunction=null,T$b.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],T$b.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},T$b.NORMAL="normal",T$b.ADD="add",T$b.MULTIPLY="multiply",T$b.SCREEN="screen",T$b.LIGHT="light",T$b.OVERLAY="overlay",T$b.DESTINATIONOUT="destination-out",T$b.fns=[],T$b.targetFns=[],T$b}(),T$f=function(){function T$u(T$$){this._color=T$D.create("black"),this.setValue(T$$)}T$o(T$u,"laya.webgl.canvas.DrawStyle");var T$$=T$u.prototype;return T$$.setValue=function(T$$){if(T$$){if("string"==typeof T$$)return void(this._color=T$D.create(T$$));if(T$$ instanceof laya.utils.Color)return void(this._color=T$$)}},T$$.reset=function(){this._color=T$D.create("black")},T$$.equal=function(T$$){return"string"==typeof T$$?this._color.strColor===T$$:T$$ instanceof laya.utils.Color&&this._color.numColor===T$$.numColor},T$$.toColorStr=function(){return this._color.strColor},T$u.create=function(T$$){var T$b;if(T$$&&("string"==typeof T$$?T$b=T$D.create(T$$):T$$ instanceof laya.utils.Color&&(T$b=T$$),T$b))return T$b._drawStyle||(T$b._drawStyle=new T$u(T$$));return laya.webgl.canvas.DrawStyle.DEFAULT},T$F(T$u,["DEFAULT",function(){return this.DEFAULT=new T$u("#000000")}]),T$u}(),T$Q=function(){function T$$(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];T$S$.mainContext;this.ib=T$B$.create(35048),this.vb=T$R$.create(5)}T$o(T$$,"laya.webgl.canvas.Path");var T$b=T$$.prototype;return T$b.addPoint=function(T$$,T$b){this.tempArray.push(T$$,T$b)},T$b.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},T$b.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},T$b.polygon=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F;return this.geomatrys.push(this._curGeomatry=T$F=new T$v$(T$$,T$b,T$u,T$Z,T$E,T$r)),T$Z||(T$F.fill=!1),null==T$r&&(T$F.borderWidth=0),T$F},T$b.setGeomtry=function(T$$){this.geomatrys.push(this._curGeomatry=T$$)},T$b.drawLine=function(T$$,T$b,T$u,T$Z,T$E){var T$r;return this.closePath?this.geomatrys.push(this._curGeomatry=T$r=new T$V$(T$$,T$b,T$u,T$Z,T$E)):this.geomatrys.push(this._curGeomatry=T$r=new T$O$(T$$,T$b,T$u,T$Z,T$E)),T$r.fill=!1,T$r},T$b.update=function(){var T$$=this.ib._byteLength,T$b=this.geomatrys.length;this.offset=T$$;for(var T$u=this.geoStart;T$u<T$b;T$u++)this.geomatrys[T$u].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=T$b,this.count=(this.ib._byteLength-T$$)/T$e$.BYTES_PIDX},T$b.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},T$b.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},T$$}(),T$W=function(){function T$x(){}T$o(T$x,"laya.webgl.canvas.save.SaveBase");var T$$=T$x.prototype;return T$i.imps(T$$,{"laya.webgl.canvas.save.ISaveData":!0}),T$$.isSaveMark=function(){return!1},T$$.restore=function(T$$){this._dataObj[this._valueName]=this._value,(T$x._cache[T$x._cache._length++]=this)._newSubmit&&(T$$._curSubmit=T$r$.RENDERBASE,T$$._renderKey=0)},T$x._createArray=function(){var T$$=[];return T$$._length=0,T$$},T$x._init=function(){var T$$=T$x._namemap={};return T$$[1]="ALPHA",T$$[2]="fillStyle",T$$[8]="font",T$$[256]="lineWidth",T$$[512]="strokeStyle",T$$[8192]="_mergeID",T$$[1024]=T$$[2048]=T$$[4096]=[],T$$[16384]="textBaseline",T$$[32768]="textAlign",T$$[65536]="_nBlendType",T$$[1048576]="shader",T$$[2097152]="filters",T$$},T$x.save=function(T$$,T$b,T$u,T$Z){if((T$$._saveMark._saveuse&T$b)!==T$b){T$$._saveMark._saveuse|=T$b;var T$E=T$x._cache,T$r=0<T$E._length?T$E[--T$E._length]:new T$x;T$r._value=T$u[T$r._valueName=T$x._namemap[T$b]],T$r._dataObj=T$u,T$r._newSubmit=T$Z;var T$F=T$$._save;T$F[T$F._length++]=T$r}},T$x._cache=laya.webgl.canvas.save.SaveBase._createArray(),T$x._namemap=T$x._init(),T$x}(),T$G=function(){function T$r(){this._clipRect=new T$C}T$o(T$r,"laya.webgl.canvas.save.SaveClipRect");var T$$=T$r.prototype;return T$i.imps(T$$,{"laya.webgl.canvas.save.ISaveData":!0}),T$$.isSaveMark=function(){return!1},T$$.restore=function(T$$){T$$._clipRect=this._clipSaveRect,(T$r._cache[T$r._cache._length++]=this)._submitScissor.submitLength=T$$._submits._length-this._submitScissor.submitIndex,T$$._curSubmit=T$r$.RENDERBASE,T$$._renderKey=0},T$r.save=function(T$$,T$b){if(131072!=(131072&T$$._saveMark._saveuse)){T$$._saveMark._saveuse|=131072;var T$u=T$r._cache,T$Z=0<T$u._length?T$u[--T$u._length]:new T$r;T$Z._clipSaveRect=T$$._clipRect,T$$._clipRect=T$Z._clipRect.copyFrom(T$$._clipRect),T$Z._submitScissor=T$b;var T$E=T$$._save;T$E[T$E._length++]=T$Z}},T$F(T$r,["_cache",function(){return this._cache=T$W._createArray()}]),T$r}(),T$A=function(){function T$N(){this._contextX=0,this._contextY=0,this._clipRect=new T$C,this._rect=new T$C,this._matrix=new T$a}T$o(T$N,"laya.webgl.canvas.save.SaveClipRectStencil");var T$$=T$N.prototype;return T$i.imps(T$$,{"laya.webgl.canvas.save.ISaveData":!0}),T$$.isSaveMark=function(){return!1},T$$.restore=function(T$$){T$w$.restore(T$$,this._rect,this._saveMatrix,this._contextX,this._contextY),T$$._clipRect=this._clipSaveRect,T$$._curMat=this._saveMatrix,T$$._x=this._contextX,T$$._y=this._contextY,T$N._cache[T$N._cache._length++]=this,T$$._curSubmit=T$r$.RENDERBASE},T$N.save=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){if(262144!=(262144&T$$._saveMark._saveuse)){T$$._saveMark._saveuse|=262144;var T$w=T$N._cache,T$I=0<T$w._length?T$w[--T$w._length]:new T$N;T$I._clipSaveRect=T$$._clipRect,T$I._clipRect.setTo(T$F,T$x,T$g,T$H),T$$._clipRect=T$I._clipRect,T$I._rect.x=T$u,T$I._rect.y=T$Z,T$I._rect.width=T$E,T$I._rect.height=T$r,T$I._contextX=T$$._x,T$I._contextY=T$$._y,T$I._saveMatrix=T$$._curMat,T$$._curMat.copyTo(T$I._matrix),T$$._curMat=T$I._matrix,T$I._submitStencil=T$b;var T$o=T$$._save;T$o[T$o._length++]=T$I}},T$F(T$N,["_cache",function(){return this._cache=T$W._createArray()}]),T$N}(),T$j=function(){function T$Z(){this._saveuse=0}T$o(T$Z,"laya.webgl.canvas.save.SaveMark");var T$$=T$Z.prototype;return T$i.imps(T$$,{"laya.webgl.canvas.save.ISaveData":!0}),T$$.isSaveMark=function(){return!0},T$$.restore=function(T$$){T$$._saveMark=this._preSaveMark,T$Z._no[T$Z._no._length++]=this},T$Z.Create=function(T$$){var T$b=T$Z._no,T$u=0<T$b._length?T$b[--T$b._length]:new T$Z;return T$u._saveuse=0,T$u._preSaveMark=T$$._saveMark,T$$._saveMark=T$u},T$F(T$Z,["_no",function(){return this._no=T$W._createArray()}]),T$Z}(),T$h=function(){function T$r(){this._matrix=new T$a}T$o(T$r,"laya.webgl.canvas.save.SaveTransform");var T$$=T$r.prototype;return T$i.imps(T$$,{"laya.webgl.canvas.save.ISaveData":!0}),T$$.isSaveMark=function(){return!1},T$$.restore=function(T$$){T$$._curMat=this._savematrix,T$r._no[T$r._no._length++]=this},T$r.save=function(T$$){var T$b=T$$._saveMark;if(2048!=(2048&T$b._saveuse)){T$b._saveuse|=2048;var T$u=T$r._no,T$Z=0<T$u._length?T$u[--T$u._length]:new T$r;T$Z._savematrix=T$$._curMat,T$$._curMat=T$$._curMat.copyTo(T$Z._matrix);var T$E=T$$._save;T$E[T$E._length++]=T$Z}},T$F(T$r,["_no",function(){return this._no=T$W._createArray()}]),T$r}(),T$d=function(){function T$E(){}T$o(T$E,"laya.webgl.canvas.save.SaveTranslate");var T$$=T$E.prototype;return T$i.imps(T$$,{"laya.webgl.canvas.save.ISaveData":!0}),T$$.isSaveMark=function(){return!1},T$$.restore=function(T$$){T$$._curMat;T$$._x=this._x,T$$._y=this._y,T$E._no[T$E._no._length++]=this},T$E.save=function(T$$){var T$b=T$E._no,T$u=0<T$b._length?T$b[--T$b._length]:new T$E;T$u._x=T$$._x,T$u._y=T$$._y;var T$Z=T$$._save;T$Z[T$Z._length++]=T$u},T$F(T$E,["_no",function(){return this._no=T$W._createArray()}]),T$E}(),T$U=function(){function T$$(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new T$C}T$o(T$$,"laya.webgl.resource.RenderTargetMAX");var T$b=T$$.prototype;return T$b.setSP=function(T$$){this._sp=T$$},T$b.size=function(T$$,T$b){var T$u=this;this._width!==T$$||this._height!==T$b?(this.repaint=!0,this._width=T$$,this._height=T$b,this.target?this.target.size(T$$,T$b):this.target=T$l$.create(T$$,T$b),this.target.hasListener("recovered")||this.target.on("recovered",this,function(T$$){T$i.timer.callLater(T$u._sp,T$u._sp.repaint)})):this.target.size(T$$,T$b)},T$b._flushToTarget=function(T$$,T$b){if(!T$b._destroy){var T$u=T$_$.worldScissorTest,T$Z=T$_$.worldClipRect;T$_$.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,T$_$.worldScissorTest=!1,T$S$.mainContext.disable(3089);var T$E=T$_$.worldAlpha,T$r=T$_$.worldMatrix4,T$F=T$_$.worldMatrix,T$x=T$_$.worldFilters,T$g=T$_$.worldShaderDefines;if(T$_$.worldMatrix=T$a.EMPTY,T$_$.restoreTempArray(),T$_$.worldMatrix4=T$_$.TEMPMAT4_ARRAY,T$_$.worldAlpha=1,T$_$.worldFilters=null,T$_$.worldShaderDefines=null,T$M$.activeShader=null,T$b.start(),T$z.showCanvasMark?T$b.clear(0,1,0,.3):T$b.clear(0,0,0,0),T$$.flush(),T$b.end(),T$M$.activeShader=null,T$_$.worldAlpha=T$E,T$_$.worldMatrix4=T$r,T$_$.worldMatrix=T$F,T$_$.worldFilters=T$x,T$_$.worldShaderDefines=T$g,T$_$.worldScissorTest=T$u){var T$H=T$_$.height-T$Z.y-T$Z.height;T$S$.mainContext.scissor(T$Z.x,T$H,T$Z.width,T$Z.height),T$S$.mainContext.enable(3089)}T$_$.worldClipRect=T$Z}},T$b.flush=function(T$$){this.repaint&&(this._flushToTarget(T$$,this.target),this.repaint=!1)},T$b.drawTo=function(T$$,T$b,T$u,T$Z,T$E){T$$.drawTexture(this.target.getTexture(),T$b,T$u,T$Z,T$E,0,0)},T$b.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},T$$}(),T$B=function(){function T$$(){this.ALPHA=1,this.shaderType=0,this.defines=new T$K$}return T$o(T$$,"laya.webgl.shader.d2.Shader2D"),T$$.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},T$$.__init__=function(){var T$$,T$b;T$j$.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),T$j$.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),T$j$.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),T$j$.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),T$j$.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),T$j$.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),T$j$.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),T$j$.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),T$$="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",T$b='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',T$j$.preCompile2D(0,1,T$$,T$b,null),T$$="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",T$b='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',T$j$.preCompile2D(0,2,T$$,T$b,null),T$$="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",T$b="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",T$j$.preCompile2D(0,4,T$$,T$b,null),T$$="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",T$b='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',T$j$.preCompile2D(0,256,T$$,T$b,null),T$$="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",T$b="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",T$j$.preCompile2D(0,512,T$$,T$b,null)},T$$}(),T$R=function(){function T$b(T$$,T$b,T$u){this._value=0,this._name2int=T$$,this._int2name=T$b,this._int2nameMap=T$u}T$o(T$b,"laya.webgl.shader.ShaderDefines");var T$$=T$b.prototype;return T$$.add=function(T$$){return"string"==typeof T$$&&(T$$=this._name2int[T$$]),this._value|=T$$,this._value},T$$.addInt=function(T$$){return this._value|=T$$,this._value},T$$.remove=function(T$$){return"string"==typeof T$$&&(T$$=this._name2int[T$$]),this._value&=~T$$,this._value},T$$.isDefine=function(T$$){return(this._value&T$$)===T$$},T$$.getValue=function(){return this._value},T$$.setValue=function(T$$){this._value=T$$},T$$.toNameDic=function(){var T$$=this._int2nameMap[this._value];return T$$||T$b._toText(this._value,this._int2name,this._int2nameMap)},T$b._reg=function(T$$,T$b,T$u,T$Z){T$Z[T$u[T$$]=T$b]=T$$},T$b._toText=function(T$$,T$b,T$u){var T$Z=T$u[T$$];if(T$Z)return T$Z;for(var T$E={},T$r=1,T$F=0;T$F<32&&!(T$$<(T$r=1<<T$F));T$F++)if(T$$&T$r){var T$x=T$b[T$r];T$x&&(T$E[T$x]="")}return T$u[T$$]=T$E},T$b._toInt=function(T$$,T$b){for(var T$u=T$$.split("."),T$Z=0,T$E=0,T$r=T$u.length;T$E<T$r;T$E++){var T$F=T$b[T$u[T$E]];if(!T$F)throw new Error("Defines to int err:"+T$$+"/"+T$u[T$E]);T$Z|=T$F}return T$Z},T$b}(),T$$$=function(){function T$F(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new T$a}T$o(T$F,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var T$$=T$F.prototype;return T$$.init=function(T$$,T$b,T$u){if(T$b)this._vs=T$b;else{this._vs=[];var T$Z=T$$.width,T$E=T$$.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(T$Z,0,1,0,1,1,1,1),this._vs.push(T$Z,T$E,1,1,1,1,1,1),this._vs.push(0,T$E,0,1,1,1,1,1)}T$u?this._ps=T$u:(T$F._defaultPS||(T$F._defaultPS=[]).push(0,1,3,3,1,2),this._ps=T$F._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=T$$},T$$.init2=function(T$$,T$b,T$u,T$Z,T$E){this.transform&&(this.transform=null),T$u?this._ps=T$u:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=T$Z,this._uvs=T$E,this.mEleNum=this._ps.length,this.mTexture=T$$,(T$T.isConchNode||T$T.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},T$$._initMyData=function(){var T$$=0,T$b=0,T$u=4*this._verticles.length;this._vs=T$F._tempVS;var T$Z=!1;if(T$T.isConchNode||T$T.isConchApp?(this._vs.length=T$u,T$Z=!0):this._vs.length<T$u&&(this._vs.length=T$u,T$Z=!0),T$F._tVSLen=T$u,T$Z)for(;T$$<T$u;)this._vs[T$$]=this._verticles[T$b],this._vs[T$$+1]=this._verticles[T$b+1],this._vs[T$$+2]=this._uvs[T$b],this._vs[T$$+3]=this._uvs[T$b+1],this._vs[T$$+4]=1,this._vs[T$$+5]=1,this._vs[T$$+6]=1,this._vs[T$$+7]=1,T$$+=8,T$b+=2;else for(;T$$<T$u;)this._vs[T$$]=this._verticles[T$b],this._vs[T$$+1]=this._verticles[T$b+1],this._vs[T$$+2]=this._uvs[T$b],this._vs[T$$+3]=this._uvs[T$b+1],T$$+=8,T$b+=2},T$$.getData2=function(T$$,T$b,T$u){var T$Z;this.mVBBuffer=T$$,this.mIBBuffer=T$b,this._initMyData(),T$$.appendEx2(this._vs,Float32Array,T$F._tVSLen,4),this._indexStart=T$b._byteLength,(T$Z=T$F._tempIB).length<this._ps.length&&(T$Z.length=this._ps.length);for(var T$E=0,T$r=this._ps.length;T$E<T$r;T$E++)T$Z[T$E]=this._ps[T$E]+T$u;T$b.appendEx2(T$Z,Uint16Array,this._ps.length,2)},T$$.getData=function(T$$,T$b,T$u){if(this.mVBBuffer=T$$,this.mIBBuffer=T$b,T$$.append(this.mVBData),this._indexStart=T$b._byteLength,this.mIBData.start!=T$u){for(var T$Z=0,T$E=this._ps.length;T$Z<T$E;T$Z++)this.mIBData[T$Z]=this._ps[T$Z]+T$u;this.mIBData.start=T$u}T$b.append(this.mIBData)},T$$.render=function(T$$,T$b,T$u){if(T$T.isWebGL&&this.mTexture){T$$._renderKey=0,T$$._shader2D.glTexture=null,T$b$.getInstance().addSkinMesh(this);var T$Z=T$r$.createShape(T$$,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,T$q$.create(512,0));this.transform||(this.transform=T$a.EMPTY),this.transform.translate(T$b,T$u),T$a.mul(this.transform,T$$._curMat,this._tempMatrix),this.transform.translate(-T$b,-T$u);var T$E=T$Z.shaderValue,T$r=T$E.u_mmat2||T$_$.getMatrArray();T$_$.mat2MatArray(this._tempMatrix,T$r),T$E.textureHost=this.mTexture,T$E.offsetX=0,T$E.offsetY=0,T$E.u_mmat2=T$r,T$E.ALPHA=T$$._shader2D.ALPHA,T$$._submits[T$$._submits._length++]=T$Z}else T$T.isConchApp&&this.mTexture&&(this.transform||(this.transform=T$a.EMPTY),T$$.setSkinMesh&&T$$.setSkinMesh(T$b,T$u,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},T$F._tempVS=[],T$F._tempIB=[],T$F._defaultPS=null,T$F._tVSLen=0,T$F}(),T$b$=function(){function T$$(){this.ib=null,this.vb=null;T$S$.mainContext;this.ib=T$B$.create(35048),this.vb=T$R$.create(8)}T$o(T$$,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var T$b=T$$.prototype;return T$b.addSkinMesh=function(T$$){T$$.getData2(this.vb,this.ib,this.vb._byteLength/32)},T$b.reset=function(){this.vb.clear(),this.ib.clear()},T$$.getInstance=function(){return T$$.instance=T$$.instance||new T$$},T$$.instance=null,T$$}(),T$u$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===T$g&&(T$g=0),this.x=T$$,this.y=T$b,this.width=T$u,this.height=T$Z,this.edges=T$E,this.color=T$r,this.borderWidth=T$F,this.borderColor=T$x}T$o(T$$,"laya.webgl.shapes.BasePoly");var T$b=T$$.prototype;return T$i.imps(T$b,{"laya.webgl.shapes.IShape":!0}),T$b.getData=function(T$$,T$b,T$u){},T$b.rebuild=function(T$$){},T$b.setMatrix=function(T$$){},T$b.needUpdate=function(T$$){return!0},T$b.sector=function(T$$,T$b,T$u){var T$Z=this.x,T$E=this.y,T$r=this.edges,T$F=(this.r1-this.r0)/T$r,T$x=this.width,T$g=this.height,T$H=this.color,T$w=(T$H>>16&255)/255,T$I=(T$H>>8&255)/255,T$o=(255&T$H)/255;T$$.push(T$Z,T$E,T$w,T$I,T$o);for(var T$N=0;T$N<T$r+1;T$N++)T$$.push(T$Z+Math.sin(T$F*T$N+this.r0)*T$x,T$E+Math.cos(T$F*T$N+this.r0)*T$g),T$$.push(T$w,T$I,T$o);for(T$N=0;T$N<T$r;T$N++)T$b.push(T$u,T$u+T$N+1,T$u+T$N+2)},T$b.createLine2=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F,T$x,T$g,T$H,T$w,T$I,T$o,T$N,T$D,T$e,T$L,T$T,T$_,T$y,T$S,T$P,T$i,T$z,T$q,T$a,T$t=T$$.concat(),T$C=T$E,T$K=this.borderColor,T$O=(T$K>>16&255)/255,T$V=(T$K>>8&255)/255,T$v=(255&T$K)/255,T$p=T$t.length/2,T$Y=T$Z,T$k=T$u/2;T$g=T$t[0],T$H=T$t[1],T$e=T$g-(T$w=T$t[2]),T$D=(T$D=-(T$H-(T$I=T$t[3])))/(T$a=Math.sqrt(T$D*T$D+T$e*T$e))*T$k,T$e=T$e/T$a*T$k,T$C.push(T$g-T$D+this.x,T$H-T$e+this.y,T$O,T$V,T$v,T$g+T$D+this.x,T$H+T$e+this.y,T$O,T$V,T$v);for(var T$M=1;T$M<T$p-1;T$M++)T$g=T$t[2*(T$M-1)],T$H=T$t[2*(T$M-1)+1],T$w=T$t[2*T$M],T$I=T$t[2*T$M+1],T$o=T$t[2*(T$M+1)],T$N=T$t[2*(T$M+1)+1],T$e=T$g-T$w,T$T=T$w-T$o,T$S=(-(T$D=(T$D=-(T$H-T$I))/(T$a=Math.sqrt(T$D*T$D+T$e*T$e))*T$k)+T$g)*(-(T$e=T$e/T$a*T$k)+T$I)-(-T$D+T$w)*(-T$e+T$H),T$z=(-(T$L=(T$L=-(T$I-T$N))/(T$a=Math.sqrt(T$L*T$L+T$T*T$T))*T$k)+T$o)*(-(T$T=T$T/T$a*T$k)+T$I)-(-T$L+T$w)*(-T$T+T$N),T$q=(T$_=-T$e+T$H-(-T$e+T$I))*(T$i=-T$L+T$w-(-T$L+T$o))-(T$P=-T$T+T$N-(-T$T+T$I))*(T$y=-T$D+T$w-(-T$D+T$g)),Math.abs(T$q)<.1?(T$q+=10.1,T$C.push(T$w-T$D+this.x,T$I-T$e+this.y,T$O,T$V,T$v,T$w+T$D+this.x,T$I+T$e+this.y,T$O,T$V,T$v)):(((T$F=(T$y*T$z-T$i*T$S)/T$q)-T$w)*(T$F-T$w)+((T$x=(T$P*T$S-T$_*T$z)/T$q)-T$I)+(T$x-T$I),T$C.push(T$F+this.x,T$x+this.y,T$O,T$V,T$v,T$w-(T$F-T$w)+this.x,T$I-(T$x-T$I)+this.y,T$O,T$V,T$v));T$g=T$t[T$t.length-4],T$H=T$t[T$t.length-3],T$e=T$g-(T$w=T$t[T$t.length-2]),T$D=(T$D=-(T$H-(T$I=T$t[T$t.length-1])))/(T$a=Math.sqrt(T$D*T$D+T$e*T$e))*T$k,T$e=T$e/T$a*T$k,T$C.push(T$w-T$D+this.x,T$I-T$e+this.y,T$O,T$V,T$v,T$w+T$D+this.x,T$I+T$e+this.y,T$O,T$V,T$v);var T$l=T$r;for(T$M=1;T$M<T$l;T$M++)T$b.push(T$Y+2*(T$M-1),T$Y+2*(T$M-1)+1,T$Y+2*T$M+1,T$Y+2*T$M+1,T$Y+2*T$M,T$Y+2*(T$M-1));return T$C},T$b.createLine=function(T$$,T$b,T$u,T$Z){var T$E=T$$.concat(),T$r=T$$,T$F=this.borderColor,T$x=(T$F>>16&255)/255,T$g=(T$F>>8&255)/255,T$H=(255&T$F)/255;T$E.splice(0,5);var T$w,T$I,T$o,T$N,T$D,T$e,T$L,T$T,T$_,T$y,T$S,T$P,T$i,T$z,T$q,T$a,T$t,T$C,T$K,T$O,T$V=T$E.length/5,T$v=T$Z,T$p=T$u/2;T$o=T$E[0],T$N=T$E[1],T$y=T$o-(T$D=T$E[5]),T$_=(T$_=-(T$N-(T$e=T$E[6])))/(T$O=Math.sqrt(T$_*T$_+T$y*T$y))*T$p,T$y=T$y/T$O*T$p,T$r.push(T$o-T$_,T$N-T$y,T$x,T$g,T$H,T$o+T$_,T$N+T$y,T$x,T$g,T$H);for(var T$Y=1;T$Y<T$V-1;T$Y++)T$o=T$E[5*(T$Y-1)],T$N=T$E[5*(T$Y-1)+1],T$D=T$E[5*T$Y],T$e=T$E[5*T$Y+1],T$L=T$E[5*(T$Y+1)],T$T=T$E[5*(T$Y+1)+1],T$y=T$o-T$D,T$P=T$D-T$L,T$q=(-(T$_=(T$_=-(T$N-T$e))/(T$O=Math.sqrt(T$_*T$_+T$y*T$y))*T$p)+T$o)*(-(T$y=T$y/T$O*T$p)+T$e)-(-T$_+T$D)*(-T$y+T$N),T$C=(-(T$S=(T$S=-(T$e-T$T))/(T$O=Math.sqrt(T$S*T$S+T$P*T$P))*T$p)+T$L)*(-(T$P=T$P/T$O*T$p)+T$e)-(-T$S+T$D)*(-T$P+T$T),T$K=(T$i=-T$y+T$N-(-T$y+T$e))*(T$t=-T$S+T$D-(-T$S+T$L))-(T$a=-T$P+T$T-(-T$P+T$e))*(T$z=-T$_+T$D-(-T$_+T$o)),Math.abs(T$K)<.1?(T$K+=10.1,T$r.push(T$D-T$_,T$e-T$y,T$x,T$g,T$H,T$D+T$_,T$e+T$y,T$x,T$g,T$H)):(((T$w=(T$z*T$C-T$t*T$q)/T$K)-T$D)*(T$w-T$D)+((T$I=(T$a*T$q-T$i*T$C)/T$K)-T$e)+(T$I-T$e),T$r.push(T$w,T$I,T$x,T$g,T$H,T$D-(T$w-T$D),T$e-(T$I-T$e),T$x,T$g,T$H));T$o=T$E[T$E.length-10],T$N=T$E[T$E.length-9],T$y=T$o-(T$D=T$E[T$E.length-5]),T$_=(T$_=-(T$N-(T$e=T$E[T$E.length-4])))/(T$O=Math.sqrt(T$_*T$_+T$y*T$y))*T$p,T$y=T$y/T$O*T$p,T$r.push(T$D-T$_,T$e-T$y,T$x,T$g,T$H,T$D+T$_,T$e+T$y,T$x,T$g,T$H);var T$k=this.edges+1;for(T$Y=1;T$Y<T$k;T$Y++)T$b.push(T$v+2*(T$Y-1),T$v+2*(T$Y-1)+1,T$v+2*T$Y+1,T$v+2*T$Y+1,T$v+2*T$Y,T$v+2*(T$Y-1));return T$r},T$b.createLoopLine=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=T$$.concat(),T$x=T$E||T$$,T$g=this.borderColor,T$H=(T$g>>16&255)/255,T$w=(T$g>>8&255)/255,T$I=(255&T$g)/255;T$F.splice(0,5);var T$o=[T$F[0],T$F[1]],T$N=[T$F[T$F.length-5],T$F[T$F.length-4]],T$D=T$N[0]+.5*(T$o[0]-T$N[0]),T$e=T$N[1]+.5*(T$o[1]-T$N[1]);T$F.unshift(T$D,T$e,0,0,0),T$F.push(T$D,T$e,0,0,0);var T$L,T$T,T$_,T$y,T$S,T$P,T$i,T$z,T$q,T$a,T$t,T$C,T$K,T$O,T$V,T$v,T$p,T$Y,T$k,T$M,T$l=T$F.length/5,T$X=T$Z,T$s=T$u/2;T$_=T$F[0],T$y=T$F[1],T$a=T$_-(T$S=T$F[5]),T$q=(T$q=-(T$y-(T$P=T$F[6])))/(T$M=Math.sqrt(T$q*T$q+T$a*T$a))*T$s,T$a=T$a/T$M*T$s,T$x.push(T$_-T$q,T$y-T$a,T$H,T$w,T$I,T$_+T$q,T$y+T$a,T$H,T$w,T$I);for(var T$m=1;T$m<T$l-1;T$m++)T$_=T$F[5*(T$m-1)],T$y=T$F[5*(T$m-1)+1],T$S=T$F[5*T$m],T$P=T$F[5*T$m+1],T$i=T$F[5*(T$m+1)],T$z=T$F[5*(T$m+1)+1],T$a=T$_-T$S,T$C=T$S-T$i,T$V=(-(T$q=(T$q=-(T$y-T$P))/(T$M=Math.sqrt(T$q*T$q+T$a*T$a))*T$s)+T$_)*(-(T$a=T$a/T$M*T$s)+T$P)-(-T$q+T$S)*(-T$a+T$y),T$Y=(-(T$t=(T$t=-(T$P-T$z))/(T$M=Math.sqrt(T$t*T$t+T$C*T$C))*T$s)+T$i)*(-(T$C=T$C/T$M*T$s)+T$P)-(-T$t+T$S)*(-T$C+T$z),T$k=(T$K=-T$a+T$y-(-T$a+T$P))*(T$p=-T$t+T$S-(-T$t+T$i))-(T$v=-T$C+T$z-(-T$C+T$P))*(T$O=-T$q+T$S-(-T$q+T$_)),Math.abs(T$k)<.1?(T$k+=10.1,T$x.push(T$S-T$q,T$P-T$a,T$H,T$w,T$I,T$S+T$q,T$P+T$a,T$H,T$w,T$I)):(((T$L=(T$O*T$Y-T$p*T$V)/T$k)-T$S)*(T$L-T$S)+((T$T=(T$v*T$V-T$K*T$Y)/T$k)-T$P)+(T$T-T$P),T$x.push(T$L,T$T,T$H,T$w,T$I,T$S-(T$L-T$S),T$P-(T$T-T$P),T$H,T$w,T$I));T$r&&(T$b=T$r);var T$n=this.edges+1;for(T$m=1;T$m<T$n;T$m++)T$b.push(T$X+2*(T$m-1),T$X+2*(T$m-1)+1,T$X+2*T$m+1,T$X+2*T$m+1,T$X+2*T$m,T$X+2*(T$m-1));return T$b.push(T$X+2*(T$m-1),T$X+2*(T$m-1)+1,T$X+1,T$X+1,T$X,T$X+2*(T$m-1)),T$x},T$$}(),T$Z$=function(){function T$e(){}return T$o(T$e,"laya.webgl.shapes.Earcut"),T$e.earcut=function(T$$,T$b,T$u){T$u=T$u||2;var T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w=T$b&&T$b.length,T$I=T$w?T$b[0]*T$u:T$$.length,T$o=T$e.linkedList(T$$,0,T$I,T$u,!0),T$N=[];if(!T$o)return T$N;if(T$w&&(T$o=T$e.eliminateHoles(T$$,T$b,T$o,T$u)),T$$.length>80*T$u){T$Z=T$r=T$$[0],T$E=T$F=T$$[1];for(var T$D=T$u;T$D<T$I;T$D+=T$u)(T$x=T$$[T$D])<T$Z&&(T$Z=T$x),(T$g=T$$[T$D+1])<T$E&&(T$E=T$g),T$r<T$x&&(T$r=T$x),T$F<T$g&&(T$F=T$g);T$H=0!==(T$H=Math.max(T$r-T$Z,T$F-T$E))?1/T$H:0}return T$e.earcutLinked(T$o,T$N,T$u,T$Z,T$E,T$H),T$N},T$e.linkedList=function(T$$,T$b,T$u,T$Z,T$E){var T$r,T$F;if(T$E===0<T$e.signedArea(T$$,T$b,T$u,T$Z))for(T$r=T$b;T$r<T$u;T$r+=T$Z)T$F=T$e.insertNode(T$r,T$$[T$r],T$$[T$r+1],T$F);else for(T$r=T$u-T$Z;T$b<=T$r;T$r-=T$Z)T$F=T$e.insertNode(T$r,T$$[T$r],T$$[T$r+1],T$F);return T$F&&T$e.equals(T$F,T$F.next)&&(T$e.removeNode(T$F),T$F=T$F.next),T$F},T$e.filterPoints=function(T$$,T$b){if(!T$$)return T$$;T$b||(T$b=T$$);var T$u,T$Z=T$$;do{if(T$u=!1,T$Z.steiner||!T$e.equals(T$Z,T$Z.next)&&0!==T$e.area(T$Z.prev,T$Z,T$Z.next))T$Z=T$Z.next;else{if(T$e.removeNode(T$Z),(T$Z=T$b=T$Z.prev)===T$Z.next)break;T$u=!0}}while(T$u||T$Z!==T$b);return T$b},T$e.earcutLinked=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){if(T$$){!T$F&&T$r&&T$e.indexCurve(T$$,T$Z,T$E,T$r);for(var T$x,T$g,T$H=T$$;T$$.prev!==T$$.next;)if(T$x=T$$.prev,T$g=T$$.next,T$r?T$e.isEarHashed(T$$,T$Z,T$E,T$r):T$e.isEar(T$$))T$b.push(T$x.i/T$u),T$b.push(T$$.i/T$u),T$b.push(T$g.i/T$u),T$e.removeNode(T$$),T$$=T$g.next,T$H=T$g.next;else if((T$$=T$g)===T$H){T$F?1===T$F?(T$$=T$e.cureLocalIntersections(T$$,T$b,T$u),T$e.earcutLinked(T$$,T$b,T$u,T$Z,T$E,T$r,2)):2===T$F&&T$e.splitEarcut(T$$,T$b,T$u,T$Z,T$E,T$r):T$e.earcutLinked(T$e.filterPoints(T$$,null),T$b,T$u,T$Z,T$E,T$r,1);break}}},T$e.isEar=function(T$$){var T$b=T$$.prev,T$u=T$$,T$Z=T$$.next;if(0<=T$e.area(T$b,T$u,T$Z))return!1;for(var T$E=T$$.next.next;T$E!==T$$.prev;){if(T$e.pointInTriangle(T$b.x,T$b.y,T$u.x,T$u.y,T$Z.x,T$Z.y,T$E.x,T$E.y)&&0<=T$e.area(T$E.prev,T$E,T$E.next))return!1;T$E=T$E.next}return!0},T$e.isEarHashed=function(T$$,T$b,T$u,T$Z){var T$E=T$$.prev,T$r=T$$,T$F=T$$.next;if(0<=T$e.area(T$E,T$r,T$F))return!1;for(var T$x=T$E.x<T$r.x?T$E.x<T$F.x?T$E.x:T$F.x:T$r.x<T$F.x?T$r.x:T$F.x,T$g=T$E.y<T$r.y?T$E.y<T$F.y?T$E.y:T$F.y:T$r.y<T$F.y?T$r.y:T$F.y,T$H=T$E.x>T$r.x?T$E.x>T$F.x?T$E.x:T$F.x:T$r.x>T$F.x?T$r.x:T$F.x,T$w=T$E.y>T$r.y?T$E.y>T$F.y?T$E.y:T$F.y:T$r.y>T$F.y?T$r.y:T$F.y,T$I=T$e.zOrder(T$x,T$g,T$b,T$u,T$Z),T$o=T$e.zOrder(T$H,T$w,T$b,T$u,T$Z),T$N=T$$.nextZ;T$N&&T$N.z<=T$o;){if(T$N!==T$$.prev&&T$N!==T$$.next&&T$e.pointInTriangle(T$E.x,T$E.y,T$r.x,T$r.y,T$F.x,T$F.y,T$N.x,T$N.y)&&0<=T$e.area(T$N.prev,T$N,T$N.next))return!1;T$N=T$N.nextZ}for(T$N=T$$.prevZ;T$N&&T$N.z>=T$I;){if(T$N!==T$$.prev&&T$N!==T$$.next&&T$e.pointInTriangle(T$E.x,T$E.y,T$r.x,T$r.y,T$F.x,T$F.y,T$N.x,T$N.y)&&0<=T$e.area(T$N.prev,T$N,T$N.next))return!1;T$N=T$N.prevZ}return!0},T$e.cureLocalIntersections=function(T$$,T$b,T$u){var T$Z=T$$;do{var T$E=T$Z.prev,T$r=T$Z.next.next;!T$e.equals(T$E,T$r)&&T$e.intersects(T$E,T$Z,T$Z.next,T$r)&&T$e.locallyInside(T$E,T$r)&&T$e.locallyInside(T$r,T$E)&&(T$b.push(T$E.i/T$u),T$b.push(T$Z.i/T$u),T$b.push(T$r.i/T$u),T$e.removeNode(T$Z),T$e.removeNode(T$Z.next),T$Z=T$$=T$r),T$Z=T$Z.next}while(T$Z!==T$$);return T$Z},T$e.splitEarcut=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=T$$;do{for(var T$x=T$F.next.next;T$x!==T$F.prev;){if(T$F.i!==T$x.i&&T$e.isValidDiagonal(T$F,T$x)){var T$g=T$e.splitPolygon(T$F,T$x);return T$F=T$e.filterPoints(T$F,T$F.next),T$g=T$e.filterPoints(T$g,T$g.next),T$e.earcutLinked(T$F,T$b,T$u,T$Z,T$E,T$r),void T$e.earcutLinked(T$g,T$b,T$u,T$Z,T$E,T$r)}T$x=T$x.next}T$F=T$F.next}while(T$F!==T$$)},T$e.eliminateHoles=function(T$$,T$b,T$u,T$Z){var T$E,T$r,T$F,T$x,T$g,T$H=[];for(T$E=0,T$r=T$b.length;T$E<T$r;T$E++)T$F=T$b[T$E]*T$Z,T$x=T$E<T$r-1?T$b[T$E+1]*T$Z:T$$.length,(T$g=T$e.linkedList(T$$,T$F,T$x,T$Z,!1))===T$g.next&&(T$g.steiner=!0),T$H.push(T$e.getLeftmost(T$g));for(T$H.sort(T$e.compareX),T$E=0;T$E<T$H.length;T$E++)T$e.eliminateHole(T$H[T$E],T$u),T$u=T$e.filterPoints(T$u,T$u.next);return T$u},T$e.compareX=function(T$$,T$b){return T$$.x-T$b.x},T$e.eliminateHole=function(T$$,T$b){if(T$b=T$e.findHoleBridge(T$$,T$b)){var T$u=T$e.splitPolygon(T$b,T$$);T$e.filterPoints(T$u,T$u.next)}},T$e.findHoleBridge=function(T$$,T$b){var T$u,T$Z=T$b,T$E=T$$.x,T$r=T$$.y,T$F=-1/0;do{if(T$r<=T$Z.y&&T$r>=T$Z.next.y&&T$Z.next.y!==T$Z.y){var T$x=T$Z.x+(T$r-T$Z.y)*(T$Z.next.x-T$Z.x)/(T$Z.next.y-T$Z.y);if(T$x<=T$E&&T$F<T$x){if((T$F=T$x)===T$E){if(T$r===T$Z.y)return T$Z;if(T$r===T$Z.next.y)return T$Z.next}T$u=T$Z.x<T$Z.next.x?T$Z:T$Z.next}}T$Z=T$Z.next}while(T$Z!==T$b);if(!T$u)return null;if(T$E===T$F)return T$u.prev;var T$g,T$H=T$u,T$w=T$u.x,T$I=T$u.y,T$o=1/0;for(T$Z=T$u.next;T$Z!==T$H;)T$E>=T$Z.x&&T$Z.x>=T$w&&T$E!==T$Z.x&&T$e.pointInTriangle(T$r<T$I?T$E:T$F,T$r,T$w,T$I,T$r<T$I?T$F:T$E,T$r,T$Z.x,T$Z.y)&&((T$g=Math.abs(T$r-T$Z.y)/(T$E-T$Z.x))<T$o||T$g===T$o&&T$Z.x>T$u.x)&&T$e.locallyInside(T$Z,T$$)&&(T$u=T$Z,T$o=T$g),T$Z=T$Z.next;return T$u},T$e.indexCurve=function(T$$,T$b,T$u,T$Z){for(var T$E=T$$;null===T$E.z&&(T$E.z=T$e.zOrder(T$E.x,T$E.y,T$b,T$u,T$Z)),T$E.prevZ=T$E.prev,T$E.nextZ=T$E.next,(T$E=T$E.next)!==T$$;);T$E.prevZ.nextZ=null,T$E.prevZ=null,T$e.sortLinked(T$E)},T$e.sortLinked=function(T$$){var T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H=1;do{for(T$u=T$$,T$r=T$$=null,T$F=0;T$u;){for(T$F++,T$Z=T$u,T$b=T$x=0;T$b<T$H&&(T$x++,T$Z=T$Z.nextZ);T$b++);for(T$g=T$H;0<T$x||0<T$g&&T$Z;)0!==T$x&&(0===T$g||!T$Z||T$u.z<=T$Z.z)?(T$u=(T$E=T$u).nextZ,T$x--):(T$Z=(T$E=T$Z).nextZ,T$g--),T$r?T$r.nextZ=T$E:T$$=T$E,T$E.prevZ=T$r,T$r=T$E;T$u=T$Z}T$r.nextZ=null,T$H*=2}while(1<T$F);return T$$},T$e.zOrder=function(T$$,T$b,T$u,T$Z,T$E){return(T$$=1431655765&((T$$=858993459&((T$$=252645135&((T$$=16711935&((T$$=32767*(T$$-T$u)*T$E)|T$$<<8))|T$$<<4))|T$$<<2))|T$$<<1))|(T$b=1431655765&((T$b=858993459&((T$b=252645135&((T$b=16711935&((T$b=32767*(T$b-T$Z)*T$E)|T$b<<8))|T$b<<4))|T$b<<2))|T$b<<1))<<1},T$e.getLeftmost=function(T$$){for(var T$b=T$$,T$u=T$$;T$b.x<T$u.x&&(T$u=T$b),(T$b=T$b.next)!==T$$;);return T$u},T$e.pointInTriangle=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){return 0<=(T$E-T$F)*(T$b-T$x)-(T$$-T$F)*(T$r-T$x)&&0<=(T$$-T$F)*(T$Z-T$x)-(T$u-T$F)*(T$b-T$x)&&0<=(T$u-T$F)*(T$r-T$x)-(T$E-T$F)*(T$Z-T$x)},T$e.isValidDiagonal=function(T$$,T$b){return T$$.next.i!==T$b.i&&T$$.prev.i!==T$b.i&&!T$e.intersectsPolygon(T$$,T$b)&&T$e.locallyInside(T$$,T$b)&&T$e.locallyInside(T$b,T$$)&&T$e.middleInside(T$$,T$b)},T$e.area=function(T$$,T$b,T$u){return(T$b.y-T$$.y)*(T$u.x-T$b.x)-(T$b.x-T$$.x)*(T$u.y-T$b.y)},T$e.equals=function(T$$,T$b){return T$$.x===T$b.x&&T$$.y===T$b.y},T$e.intersects=function(T$$,T$b,T$u,T$Z){return!!(T$e.equals(T$$,T$b)&&T$e.equals(T$u,T$Z)||T$e.equals(T$$,T$Z)&&T$e.equals(T$u,T$b))||0<T$e.area(T$$,T$b,T$u)!=0<T$e.area(T$$,T$b,T$Z)&&0<T$e.area(T$u,T$Z,T$$)!=0<T$e.area(T$u,T$Z,T$b)},T$e.intersectsPolygon=function(T$$,T$b){var T$u=T$$;do{if(T$u.i!==T$$.i&&T$u.next.i!==T$$.i&&T$u.i!==T$b.i&&T$u.next.i!==T$b.i&&T$e.intersects(T$u,T$u.next,T$$,T$b))return!0;T$u=T$u.next}while(T$u!==T$$);return!1},T$e.locallyInside=function(T$$,T$b){return T$e.area(T$$.prev,T$$,T$$.next)<0?0<=T$e.area(T$$,T$b,T$$.next)&&0<=T$e.area(T$$,T$$.prev,T$b):T$e.area(T$$,T$b,T$$.prev)<0||T$e.area(T$$,T$$.next,T$b)<0},T$e.middleInside=function(T$$,T$b){for(var T$u=T$$,T$Z=!1,T$E=(T$$.x+T$b.x)/2,T$r=(T$$.y+T$b.y)/2;T$u.y>T$r!=T$u.next.y>T$r&&T$u.next.y!==T$u.y&&T$E<(T$u.next.x-T$u.x)*(T$r-T$u.y)/(T$u.next.y-T$u.y)+T$u.x&&(T$Z=!T$Z),(T$u=T$u.next)!==T$$;);return T$Z},T$e.splitPolygon=function(T$$,T$b){var T$u=new T$E$(T$$.i,T$$.x,T$$.y),T$Z=new T$E$(T$b.i,T$b.x,T$b.y),T$E=T$$.next,T$r=T$b.prev;return(T$$.next=T$b).prev=T$$,(T$u.next=T$E).prev=T$u,(T$Z.next=T$u).prev=T$Z,(T$r.next=T$Z).prev=T$r,T$Z},T$e.insertNode=function(T$$,T$b,T$u,T$Z){var T$E=new T$E$(T$$,T$b,T$u);return T$Z?(T$E.next=T$Z.next,(T$E.prev=T$Z).next.prev=T$E,T$Z.next=T$E):(T$E.prev=T$E).next=T$E,T$E},T$e.removeNode=function(T$$){T$$.next.prev=T$$.prev,T$$.prev.next=T$$.next,T$$.prevZ&&(T$$.prevZ.nextZ=T$$.nextZ),T$$.nextZ&&(T$$.nextZ.prevZ=T$$.prevZ)},T$e.signedArea=function(T$$,T$b,T$u,T$Z){for(var T$E=0,T$r=T$b,T$F=T$u-T$Z;T$r<T$u;T$r+=T$Z)T$E+=(T$$[T$F]-T$$[T$r])*(T$$[T$r+1]+T$$[T$F+1]),T$F=T$r;return T$E},T$e}(),T$E$=function(){function T$$(T$$,T$b,T$u){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=T$$,this.x=T$b,this.y=T$u,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return T$o(T$$,"laya.webgl.shapes.EarcutNode"),T$$}(),T$r$=(function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this.lineWidth=T$$,this.lineColor=T$b,this.lineAlpha=T$u,this.fillColor=T$Z,this.fillAlpha=T$E,this.shape=T$F,this.fill=T$r}T$o(T$$,"laya.webgl.shapes.GeometryData");var T$b=T$$.prototype;T$b.clone=function(){return new T$$(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},T$b.getIndexData=function(){return null},T$b.getVertexData=function(){return null},T$b.destroy=function(){this.shape=null}}(),function(){function T$$(T$$){if(T$$ instanceof Float32Array)this.points=T$$;else if(T$$ instanceof Array){T$$.length;this.points=new Float32Array(T$$)}}T$o(T$$,"laya.webgl.shapes.Vertex");var T$b=T$$.prototype;T$i.imps(T$b,{"laya.webgl.shapes.IShape":!0}),T$b.getData=function(T$$,T$b,T$u){},T$b.needUpdate=function(T$$){return!1},T$b.rebuild=function(T$$){},T$b.setMatrix=function(T$$){}}(),function(){function T$g(T$$){void 0===T$$&&(T$$=1e4),this._renderType=T$$}T$o(T$g,"laya.webgl.submit.Submit");var T$$=T$g.prototype;return T$i.imps(T$$,{"laya.webgl.submit.ISubmit":!0}),T$$.releaseRender=function(){var T$$=T$g._cache;(T$$[T$$._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},T$$.getRenderType=function(){return this._renderType},T$$.renderSubmit=function(){if(0===this._numEle)return 1;var T$$=this.shaderValue.textureHost;if(T$$){var T$b=T$$.source;if(!T$$.bitmap||!T$b)return 1;this.shaderValue.texture=T$b,T$$.alphaTexture&&T$$.alphaTexture.source&&(this.shaderValue.texture1=T$$.alphaTexture.source)}this._vb.bind_upload(this._ib);var T$u=T$S$.mainContext;return this.shaderValue.upload(),T$J.activeBlendFunction!==this._blendFn&&(T$u.enable(3042),this._blendFn(T$u),T$J.activeBlendFunction=this._blendFn),T$V.drawCall++,T$V.trianglesFaces+=this._numEle/3,T$u.drawElements(4,this._numEle,5123,this._startIdx),1},T$g.__init__=function(){var T$$=T$g.RENDERBASE=new T$g(-1);T$$.shaderValue=new T$q$(0,0),T$$.shaderValue.ALPHA=-1234},T$g.createSubmit=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$g._cache._length?T$g._cache[--T$g._cache._length]:new T$g;null==T$u&&((T$u=T$r._selfVb||(T$r._selfVb=T$R$.create(-1))).clear(),T$Z=0),T$r._ib=T$b,T$r._vb=T$u,T$r._startIdx=T$Z*T$e$.BYTES_PIDX,T$r._numEle=0;var T$F=T$$._nBlendType;T$r._blendFn=T$$._targets?T$J.targetFns[T$F]:T$J.fns[T$F],T$r.shaderValue=T$E,T$r.shaderValue.setValue(T$$._shader2D);var T$x=T$$._shader2D.filters;return T$x&&T$r.shaderValue.setFilters(T$x),T$r},T$g.createShape=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=T$g._cache._length?T$g._cache[--T$g._cache._length]:new T$g;T$F._ib=T$b,T$F._vb=T$u,T$F._numEle=T$Z,T$F._startIdx=T$E,T$F.shaderValue=T$r,T$F.shaderValue.setValue(T$$._shader2D);var T$x=T$$._nBlendType;return T$F._blendFn=T$$._targets?T$J.targetFns[T$x]:T$J.fns[T$x],T$F},T$g.TYPE_2D=1e4,T$g.TYPE_CANVAS=10003,T$g.TYPE_CMDSETRT=10004,T$g.TYPE_CUSTOM=10005,T$g.TYPE_BLURRT=10006,T$g.TYPE_CMDDESTORYPRERT=10007,T$g.TYPE_DISABLESTENCIL=10008,T$g.TYPE_OTHERIBVB=10009,T$g.TYPE_PRIMITIVE=10010,T$g.TYPE_RT=10011,T$g.TYPE_BLUR_RT=10012,T$g.TYPE_TARGET=10013,T$g.TYPE_CHANGE_VALUE=10014,T$g.TYPE_SHAPE=10015,T$g.TYPE_TEXTURE=10016,T$g.TYPE_FILLTEXTURE=10017,T$g.RENDERBASE=null,T$g._cache=((T$g._cache=[])._length=0,T$g._cache),T$g}()),T$F$=function(){function T$Z(){this.fun=null,this.args=null}T$o(T$Z,"laya.webgl.submit.SubmitCMD");var T$$=T$Z.prototype;return T$i.imps(T$$,{"laya.webgl.submit.ISubmit":!0}),T$$.renderSubmit=function(){return this.fun.apply(null,this.args),1},T$$.getRenderType=function(){return 0},T$$.releaseRender=function(){var T$$=T$Z._cache;T$$[T$$._length++]=this},T$Z.create=function(T$$,T$b){var T$u=T$Z._cache._length?T$Z._cache[--T$Z._cache._length]:new T$Z;return T$u.fun=T$b,T$u.args=T$$,T$u},T$Z._cache=((T$Z._cache=[])._length=0,T$Z._cache),T$Z}(),T$x$=function(){function T$b(){this.variables={}}T$o(T$b,"laya.webgl.submit.SubmitCMDScope");var T$$=T$b.prototype;return T$$.getValue=function(T$$){return this.variables[T$$]},T$$.addValue=function(T$$,T$b){return this.variables[T$$]=T$b},T$$.setValue=function(T$$,T$b){return this.variables.hasOwnProperty(T$$)?this.variables[T$$]=T$b:null},T$$.clear=function(){for(var T$$ in this.variables)delete this.variables[T$$]},T$$.recycle=function(){this.clear(),T$b.POOL.push(this)},T$b.create=function(){var T$$=T$b.POOL.pop();return T$$||(T$$=new T$b),T$$},T$b.POOL=[],T$b}(),T$g$=function(){function T$I(){this.offset=0,this.startIndex=0,this._mat=T$a.create()}T$o(T$I,"laya.webgl.submit.SubmitOtherIBVB");var T$$=T$I.prototype;return T$i.imps(T$$,{"laya.webgl.submit.ISubmit":!0}),T$$.releaseRender=function(){var T$$=T$I._cache;(T$$[T$$._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},T$$.getRenderType=function(){return 10009},T$$.renderSubmit=function(){var T$$=this._shaderValue.textureHost;if(T$$){var T$b=T$$.source;if(!T$$.bitmap||!T$b)return 1;this._shaderValue.texture=T$b}this._vb.bind_upload(this._ib);var T$u=T$_$.worldMatrix4,T$Z=T$a.TEMP;T$a.mulPre(this._mat,T$u[0],T$u[1],T$u[4],T$u[5],T$u[12],T$u[13],T$Z);var T$E=T$_$.worldMatrix4=T$I.tempMatrix4;T$E[0]=T$Z.a,T$E[1]=T$Z.b,T$E[4]=T$Z.c,T$E[5]=T$Z.d,T$E[12]=T$Z.tx,T$E[13]=T$Z.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var T$r=T$S$.mainContext;return T$J.activeBlendFunction!==this._blendFn&&(T$r.enable(3042),this._blendFn(T$r),T$J.activeBlendFunction=this._blendFn),T$V.drawCall++,T$V.trianglesFaces+=this._numEle/3,T$r.drawElements(4,this._numEle,5123,this.startIndex),T$_$.worldMatrix4=T$u,T$M$.activeShader=null,1},T$I.create=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){void 0===T$g&&(T$g=0);var T$H=T$I._cache._length?T$I._cache[--T$I._cache._length]:new T$I;T$H._ib=T$u,T$H._vb=T$b,T$H._numEle=T$Z,T$H._shader=T$E,T$H._shaderValue=T$r;var T$w=T$$._nBlendType;switch(T$H._blendFn=T$$._targets?T$J.targetFns[T$w]:T$J.fns[T$w],T$g){case 0:T$H.offset=0,T$H.startIndex=T$x/(T$e$.BYTES_PE*T$b.vertexStride)*1.5,T$H.startIndex*=T$e$.BYTES_PIDX;break;case 1:T$H.startIndex=T$F,T$H.offset=T$x}return T$H},T$I._cache=((T$I._cache=[])._length=0,T$I._cache),T$I.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$I}(),T$H$=function(){function T$u(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new T$C,this.screenRect=new T$C}T$o(T$u,"laya.webgl.submit.SubmitScissor");var T$$=T$u.prototype;return T$i.imps(T$$,{"laya.webgl.submit.ISubmit":!0}),T$$._scissor=function(T$$,T$b,T$u,T$Z){var T$E=T$_$.worldMatrix4,T$r=T$E[0],T$F=T$E[5],T$x=T$E[12],T$g=T$E[13];if(T$Z*=T$F,(T$u*=T$r)<1||T$Z<1)return!1;var T$H=(T$$=T$$*T$r+T$x)+T$u,T$w=(T$b=T$b*T$F+T$g)+T$Z;T$$<0&&(T$u=T$H-(T$$=0)),T$b<0&&(T$Z=T$w-(T$b=0));var T$I=T$_$.worldClipRect;if(T$$=Math.max(T$$,T$I.x),T$b=Math.max(T$b,T$I.y),T$u=Math.min(T$H,T$I.right)-T$$,T$Z=Math.min(T$w,T$I.bottom)-T$b,T$u<1||T$Z<1)return!1;var T$o=T$_$.worldScissorTest;return this.screenRect.copyFrom(T$I),T$I.x=T$$,T$I.y=T$b,T$I.width=T$u,T$I.height=T$Z,T$_$.worldScissorTest=!0,T$b=T$_$.height-T$b-T$Z,T$S$.mainContext.scissor(T$$,T$b,T$u,T$Z),T$S$.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),T$o?(T$b=T$_$.height-this.screenRect.y-this.screenRect.height,T$S$.mainContext.scissor(this.screenRect.x,T$b,this.screenRect.width,this.screenRect.height),T$S$.mainContext.enable(3089)):(T$S$.mainContext.disable(3089),T$_$.worldScissorTest=!1),T$I.copyFrom(this.screenRect),!0},T$$._scissorWithTagart=function(T$$,T$b,T$u,T$Z){if(T$u<1||T$Z<1)return!1;var T$E=T$$+T$u,T$r=T$b+T$Z;T$$<0&&(T$u=T$E-(T$$=0)),T$b<0&&(T$Z=T$r-(T$b=0));var T$F=T$_$.worldClipRect;if(T$$=Math.max(T$$,T$F.x),T$b=Math.max(T$b,T$F.y),T$u=Math.min(T$E,T$F.right)-T$$,T$Z=Math.min(T$r,T$F.bottom)-T$b,T$u<1||T$Z<1)return!1;var T$x=T$_$.worldScissorTest;return this.screenRect.copyFrom(T$F),T$_$.worldScissorTest=!0,T$F.x=T$$,T$F.y=T$b,T$F.width=T$u,T$F.height=T$Z,T$b=T$_$.height-T$b-T$Z,T$S$.mainContext.scissor(T$$,T$b,T$u,T$Z),T$S$.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),T$x?(T$b=T$_$.height-this.screenRect.y-this.screenRect.height,T$S$.mainContext.scissor(this.screenRect.x,T$b,this.screenRect.width,this.screenRect.height),T$S$.mainContext.enable(3089)):(T$S$.mainContext.disable(3089),T$_$.worldScissorTest=!1),T$F.copyFrom(this.screenRect),!0},T$$.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},T$$.getRenderType=function(){return 0},T$$.releaseRender=function(){var T$$=T$u._cache;(T$$[T$$._length++]=this).context=null},T$u.create=function(T$$){var T$b=T$u._cache._length?T$u._cache[--T$u._cache._length]:new T$u;return T$b.context=T$$,T$b},T$u._cache=((T$u._cache=[])._length=0,T$u._cache),T$u}(),T$w$=function(){function T$g(){this.step=0,this.blendMode=null,this.level=0}T$o(T$g,"laya.webgl.submit.SubmitStencil");var T$$=T$g.prototype;return T$i.imps(T$$,{"laya.webgl.submit.ISubmit":!0}),T$$.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},T$$.getRenderType=function(){return 0},T$$.releaseRender=function(){var T$$=T$g._cache;T$$[T$$._length++]=this},T$$.do1=function(){var T$$=T$S$.mainContext;T$$.enable(2960),T$$.clear(1024),T$$.colorMask(!1,!1,!1,!1),T$$.stencilFunc(514,this.level,255),T$$.stencilOp(7680,7680,7682)},T$$.do2=function(){var T$$=T$S$.mainContext;T$$.stencilFunc(514,this.level+1,255),T$$.colorMask(!0,!0,!0,!0),T$$.stencilOp(7680,7680,7680)},T$$.do3=function(){var T$$=T$S$.mainContext;T$$.colorMask(!0,!0,!0,!0),T$$.stencilOp(7680,7680,7680),T$$.clear(1024),T$$.disable(2960)},T$$.do4=function(){var T$$=T$S$.mainContext;0==this.level&&(T$$.enable(2960),T$$.clear(1024)),T$$.colorMask(!1,!1,!1,!1),T$$.stencilFunc(519,0,255),T$$.stencilOp(7680,7680,7682)},T$$.do5=function(){var T$$=T$S$.mainContext;T$$.stencilFunc(514,this.level,255),T$$.colorMask(!0,!0,!0,!0),T$$.stencilOp(7680,7680,7680)},T$$.do6=function(){var T$$=T$S$.mainContext;T$J.targetFns[T$J.TOINT[this.blendMode]](T$$)},T$$.do7=function(){var T$$=T$S$.mainContext;T$$.colorMask(!1,!1,!1,!1),T$$.stencilOp(7680,7680,7683)},T$$.do8=function(){var T$$=T$S$.mainContext;T$$.colorMask(!0,!0,!0,!0),T$$.stencilFunc(514,this.level,255),T$$.stencilOp(7680,7680,7680)},T$g.restore=function(T$$,T$b,T$u,T$Z,T$E){var T$r;if((T$$._renderKey=0)<T$g._mask&&T$g._mask--,0==T$g._mask)T$r=laya.webgl.submit.SubmitStencil.create(3),T$$.addRenderObject(T$r),T$$._curSubmit=T$r$.RENDERBASE;else{T$r=laya.webgl.submit.SubmitStencil.create(7),T$$.addRenderObject(T$r);var T$F=T$$._vb;T$F._byteLength;if(T$L$.fillRectImgVb(T$F,null,T$b.x,T$b.y,T$b.width,T$b.height,T$k.DEF_UV,T$u,T$Z,T$E,0,0)){T$$._shader2D.glTexture=null;var T$x=T$$._curSubmit=T$r$.createSubmit(T$$,T$$._ib,T$F,(T$F._byteLength-64)/32*3,T$q$.create(2,0));T$x.shaderValue.ALPHA=1,T$$._submits[T$$._submits._length++]=T$x,T$$._curSubmit._numEle+=6,T$$._curSubmit=T$r$.RENDERBASE}else alert("clipRect calc stencil rect error");T$r=laya.webgl.submit.SubmitStencil.create(8),T$$.addRenderObject(T$r)}},T$g.restore2=function(T$$,T$b){var T$u;(T$$._renderKey=0)<T$g._mask&&T$g._mask--,0==T$g._mask?(T$u=laya.webgl.submit.SubmitStencil.create(3),T$$.addRenderObject(T$u),T$$._curSubmit=T$r$.RENDERBASE):(T$u=laya.webgl.submit.SubmitStencil.create(7),T$$.addRenderObject(T$u),T$$._submits[T$$._submits._length++]=T$b,T$u=laya.webgl.submit.SubmitStencil.create(8),T$$.addRenderObject(T$u))},T$g.create=function(T$$){var T$b=T$g._cache._length?T$g._cache[--T$g._cache._length]:new T$g;return 5==(T$b.step=T$$)&&++T$g._mask,T$b.level=T$g._mask,T$b},T$g._cache=((T$g._cache=[])._length=0,T$g._cache),T$g._mask=0,T$g}(),T$I$=function(){function T$x(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}T$o(T$x,"laya.webgl.submit.SubmitTarget");var T$$=T$x.prototype;return T$i.imps(T$$,{"laya.webgl.submit.ISubmit":!0}),T$$.renderSubmit=function(){this._vb.bind_upload(this._ib);var T$$=this.scope.getValue(this.proName);return T$$&&(this.shaderValue.texture=T$$.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[T$$.width,T$$.height]),this.shaderValue.upload(),this.blend(),T$V.drawCall++,T$V.trianglesFaces+=this._numEle/3,T$S$.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},T$$.blend=function(){if(T$J.activeBlendFunction!==T$J.fns[this.blendType]){var T$$=T$S$.mainContext;T$$.enable(3042),T$J.fns[this.blendType](T$$),T$J.activeBlendFunction=T$J.fns[this.blendType]}},T$$.getRenderType=function(){return 0},T$$.releaseRender=function(){var T$$=T$x._cache;(T$$[T$$._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},T$x.create=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=T$x._cache._length?T$x._cache[--T$x._cache._length]:new T$x;return T$F._ib=T$b,T$F._vb=T$u,T$F.proName=T$r,T$F._startIdx=T$Z*T$e$.BYTES_PIDX,T$F._numEle=0,T$F.blendType=T$$._nBlendType,T$F.shaderValue=T$E,T$F.shaderValue.setValue(T$$._shader2D),T$F},T$x._cache=((T$x._cache=[])._length=0,T$x._cache),T$x}(),T$o$=function(){function T$$(){this._sourceStr=null}T$o(T$$,"laya.webgl.text.CharSegment");var T$b=T$$.prototype;return T$i.imps(T$b,{"laya.webgl.text.ICharSegment":!0}),T$b.textToSpit=function(T$$){this._sourceStr=T$$},T$b.getChar=function(T$$){return this._sourceStr.charAt(T$$)},T$b.getCharCode=function(T$$){return this._sourceStr.charCodeAt(T$$)},T$b.length=function(){return this._sourceStr.length},T$$}(),T$N$=function(){var T$$;function T$V(){}return T$o(T$V,"laya.webgl.text.DrawText"),T$V.__init__=function(){T$V._charsTemp=new Array,T$V._drawValue=new T$$,T$V._charSeg=new T$o$},T$V.customCharSeg=function(T$$){T$V._charSeg=T$$},T$V.getChar=function(T$$,T$b,T$u){var T$Z=T$W$.createOneChar(T$$,T$u);return-1!=T$b&&(T$V._charsCache[T$b]=T$Z),T$Z},T$V._drawSlow=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$I,T$o,T$N,T$D){var T$e,T$L,T$T=T$V._drawValue.value(T$r,T$x,T$g,T$H,T$o,T$N,T$D),T$_=0,T$y=0,T$S=T$V._charsTemp,T$P=0,T$i=NaN;if(T$Z)for(T$S.length=T$Z.length,T$_=0,T$y=T$Z.length;T$_<T$y;T$_++)(T$L=T$Z[T$_])&&(T$i=T$L.charNum+T$T.txtID,T$S[T$_]=T$e=T$V._charsCache[T$i]||T$V.getChar(T$L.char,T$i,T$T),T$e.active());else{var T$z=T$u instanceof laya.utils.WordText?T$u.toString():T$u;if(T$Y.CharacterCache){T$V._charSeg.textToSpit(T$z);var T$q=T$V._charSeg.length();for(T$_=0,T$y=T$S.length=T$q;T$_<T$y;T$_++)T$i=T$V._charSeg.getCharCode(T$_)+T$T.txtID,T$S[T$_]=T$e=T$V._charsCache[T$i]||T$V.getChar(T$V._charSeg.getChar(T$_),T$i,T$T),T$e.active(),T$P+=T$e.cw}else T$S.length=0,(T$e=T$V.getChar(T$z,-1,T$T)).active(),T$P+=T$e.cw,T$S[0]=T$e}var T$a=0;null!==T$F&&"left"!==T$F&&(T$a=-("center"==T$F?T$P/2:T$P));var T$t,T$C,T$K=NaN,T$O=0;if(T$Z)for(T$_=0,T$y=T$S.length;T$_<T$y;T$_++)T$e=T$S[T$_],T$L=T$Z[T$_],T$e&&T$L&&!T$e.isSpace&&(T$K=T$e.borderSize,T$t=T$e.texture,T$b._drawText(T$t,T$w+T$a+T$L.x*T$o-T$K,T$I+T$L.y*T$N-T$K,T$t.width,T$t.height,T$E,0,0,0,0));else{for(T$_=0,T$y=T$S.length;T$_<T$y;T$_++)(T$e=T$S[T$_])&&!T$e.isSpace&&(T$K=T$e.borderSize,T$t=T$e.texture,T$b._drawText(T$t,T$w+T$a-T$K,T$I-T$K,T$t.width,T$t.height,T$E,0,0,0,0),T$$&&((T$C=T$$[T$O++])||(T$C=T$$[T$O-1]=[]),T$C[0]=T$t,T$C[1]=T$a-T$K,T$C[2]=-T$K)),T$a+=T$e.cw;T$$&&(T$$.length=T$O)}},T$V._drawFast=function(T$$,T$b,T$u,T$Z,T$E){for(var T$r,T$F,T$x=0,T$g=T$$.length;T$x<T$g;T$x++)(T$r=(T$F=T$$[T$x])[0]).active(),T$b._drawText(T$r,T$Z+T$F[1],T$E+T$F[2],T$r.width,T$r.height,T$u,0,0,0,0)},T$V.drawText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$I){if(void 0===T$I&&(T$I=0),!(T$b&&0===T$b.length||T$u&&0===T$u.length)){var T$o=T$Z.a,T$N=T$Z.d;(0!==T$Z.b||0!==T$Z.c)&&(T$o=T$N=1);var T$D=1!==T$o||1!==T$N;if(T$D&&T$i.stage.transform){var T$e=T$i.stage.transform;T$D=T$e.a===T$o&&T$e.d===T$N}else T$D=!1;if(T$D){var T$L=(T$Z=T$Z.copyTo(T$z$._tmpMatrix)).tx,T$T=T$Z.ty;T$Z.scale(1/T$o,1/T$N),T$Z._checkTransform(),T$H*=T$o,T$w*=T$N,T$H+=T$L-T$Z.tx,T$w+=T$T-T$Z.ty}else T$o=T$N=1;if(T$u)T$V._drawSlow(null,T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$o,T$N,T$I);else{if(null===T$b.toUpperCase){var T$_=T$o+1e5*T$N,T$y=T$b;return void(T$y.changed||T$y.id!==T$_?(T$y.id=T$_,T$y.changed=!1,T$V._drawSlow(T$y.save,T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$o,T$N,T$I)):T$V._drawFast(T$y.save,T$$,T$Z,T$H,T$w))}var T$S=T$b+T$E.toString()+T$F+T$x+T$g+T$o+T$N+T$r,T$P=T$V._textsCache[T$S];T$Y.CharacterCache?T$P?T$V._drawFast(T$P,T$$,T$Z,T$H,T$w):(T$V._textsCache.__length||(T$V._textsCache.__length=0),T$V._textsCache.__length>T$z.WebGLTextCacheCount&&((T$V._textsCache={}).__length=0,T$V._curPoolIndex=0),T$V._textCachesPool[T$V._curPoolIndex]?(T$P=T$V._textsCache[T$S]=T$V._textCachesPool[T$V._curPoolIndex]).length=0:T$V._textCachesPool[T$V._curPoolIndex]=T$P=T$V._textsCache[T$S]=[],T$V._textsCache.__length++,T$V._curPoolIndex++,T$V._drawSlow(T$P,T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$o,T$N,T$I)):T$V._drawSlow(T$P,T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$o,T$N,T$I)}}},T$V._charsTemp=null,T$V._textCachesPool=[],T$V._curPoolIndex=0,T$V._charsCache={},T$V._textsCache={},T$V._drawValue=null,T$V.d=[],T$V._charSeg=null,T$V.__init$=function(){T$$=function(){function T$g(){}return T$o(T$g,""),T$g.prototype.value=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this.font=T$$,this.fillColor=T$b,this.borderColor=T$u,this.lineWidth=T$Z,this.scaleX=T$E,this.scaleY=T$r,this.underLine=T$F;var T$x=T$$.toString()+T$E+T$r+T$Z+(T$b?T$b.toLowerCase():" ")+(T$u?T$u.toLowerCase():" ")+T$F;return this.txtID=T$g._keymap[T$x],this.txtID||(this.txtID=1e-7*++T$g._keymapCount,T$g._keymap[T$x]=this.txtID),this},T$g.clear=function(){T$g._keymap={},T$g._keymapCount=1},T$g._keymap={},T$g._keymapCount=1,T$g}()},T$V}(),T$D$=function(){function T$E(T$$){this._index=0,this._size=14,this._italic=-2,T$E._cache2=T$E._cache2||[],this.setFont(T$$||"14px Arial")}T$o(T$E,"laya.webgl.text.FontInContext");var T$$=T$E.prototype;return T$$.setFont=function(T$$){var T$b=T$E._cache2[T$$];if(T$b)this._words=T$b[0],this._size=T$b[1];else{this._words=T$$.split(" ");for(var T$u=0,T$Z=this._words.length;T$u<T$Z;T$u++)if(0<this._words[T$u].indexOf("px")){this._index=T$u;break}this._size=parseInt(this._words[this._index]),T$E._cache2[T$$]=[this._words,this._size]}this._text=null,this._italic=-2},T$$.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},T$$.hasType=function(T$$){for(var T$b=0,T$u=this._words.length;T$b<T$u;T$b++)if(this._words[T$b]===T$$)return T$b;return-1},T$$.removeType=function(T$$){for(var T$b=0,T$u=this._words.length;T$b<T$u;T$b++)if(this._words[T$b]===T$$){this._words.splice(T$b,1),this._index>T$b&&this._index--;break}this._text=null,this._italic=-2},T$$.copyTo=function(T$$){return T$$._text=this._text,T$$._size=this._size,T$$._index=this._index,T$$._words=this._words.slice(),T$$._italic=-2,T$$},T$$.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},T$Z(0,T$$,"size",function(){return this._size},function(T$$){this._size=T$$,this._words[this._index]=T$$+"px",this._text=null}),T$E.create=function(T$$){var T$b=T$E._cache[T$$];return T$b||(T$b=T$E._cache[T$$]=new T$E(T$$))},T$E.EMPTY=new T$E,T$E._cache={},T$E._cache2=null,T$E}(),T$e$=function(){function T$$(){}return T$o(T$$,"laya.webgl.utils.CONST3D2D"),T$$.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$$.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],T$$.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],T$$._TMPARRAY=[],T$$._OFFSETX=0,T$$._OFFSETY=0,T$F(T$$,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),T$$}(),T$L$=function(){function T$D(){}return T$o(T$D,"laya.webgl.utils.GlUtils"),T$D.make2DProjection=function(T$$,T$b,T$u){return[2/T$$,0,0,0,0,-2/T$b,0,0,0,0,2/T$u,0,-1,1,0,1]},T$D.fillIBQuadrangle=function(T$$,T$b){if(65535/4<T$b)throw Error("IBQuadrangle count:"+T$b+" must<:"+Math.floor(65535/4));T$b=Math.floor(T$b),T$$._resizeBuffer(6*(T$b+1)*2,!1),T$$.byteLength=T$$.bufferLength;for(var T$u=T$$.getUint16Array(),T$Z=0,T$E=0;T$E<T$b;T$E++)T$u[T$Z++]=4*T$E,T$u[T$Z++]=4*T$E+2,T$u[T$Z++]=4*T$E+1,T$u[T$Z++]=4*T$E,T$u[T$Z++]=4*T$E+3,T$u[T$Z++]=4*T$E+2;return T$$.setNeedUpload(),!0},T$D.expandIBQuadrangle=function(T$$,T$b){T$$.bufferLength>=6*T$b*2||T$D.fillIBQuadrangle(T$$,T$b)},T$D.mathCeilPowerOfTwo=function(T$$){return T$$--,T$$|=T$$>>1,T$$|=T$$>>2,T$$|=T$$>>4,T$$|=T$$>>8,T$$|=T$$>>16,++T$$},T$D.fillQuadrangleImgVb=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){var T$g=16+(T$$._byteLength>>2);T$$.byteLength=T$g<<2;var T$H=T$$.getFloat32Array();T$H[(T$g-=16)+2]=T$E[0],T$H[T$g+3]=T$E[1],T$H[T$g+6]=T$E[2],T$H[T$g+7]=T$E[3],T$H[T$g+10]=T$E[4],T$H[T$g+11]=T$E[5],T$H[T$g+14]=T$E[6],T$H[T$g+15]=T$E[7];var T$w=T$r.a,T$I=T$r.b,T$o=T$r.c,T$N=T$r.d;if(1!==T$w||0!==T$I||0!==T$o||1!==T$N){T$r.bTransform=!0;var T$D=T$r.tx+T$F,T$e=T$r.ty+T$x;T$H[T$g]=(T$Z[0]+T$b)*T$w+(T$Z[1]+T$u)*T$o+T$D,T$H[T$g+1]=(T$Z[0]+T$b)*T$I+(T$Z[1]+T$u)*T$N+T$e,T$H[T$g+4]=(T$Z[2]+T$b)*T$w+(T$Z[3]+T$u)*T$o+T$D,T$H[T$g+5]=(T$Z[2]+T$b)*T$I+(T$Z[3]+T$u)*T$N+T$e,T$H[T$g+8]=(T$Z[4]+T$b)*T$w+(T$Z[5]+T$u)*T$o+T$D,T$H[T$g+9]=(T$Z[4]+T$b)*T$I+(T$Z[5]+T$u)*T$N+T$e,T$H[T$g+12]=(T$Z[6]+T$b)*T$w+(T$Z[7]+T$u)*T$o+T$D,T$H[T$g+13]=(T$Z[6]+T$b)*T$I+(T$Z[7]+T$u)*T$N+T$e}else T$r.bTransform=!1,T$b+=T$r.tx+T$F,T$u+=T$r.ty+T$x,T$H[T$g]=T$b+T$Z[0],T$H[T$g+1]=T$u+T$Z[1],T$H[T$g+4]=T$b+T$Z[2],T$H[T$g+5]=T$u+T$Z[3],T$H[T$g+8]=T$b+T$Z[4],T$H[T$g+9]=T$u+T$Z[5],T$H[T$g+12]=T$b+T$Z[6],T$H[T$g+13]=T$u+T$Z[7];return T$$._upload=!0},T$D.fillTranglesVB=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){var T$x=(T$$._byteLength>>2)+T$Z.length;T$$.byteLength=T$x<<2;var T$g=T$$.getFloat32Array();T$x-=T$Z.length;for(var T$H=T$Z.length,T$w=T$E.a,T$I=T$E.b,T$o=T$E.c,T$N=T$E.d,T$D=0;T$D<T$H;T$D+=4)if(T$g[T$x+T$D+2]=T$Z[T$D+2],T$g[T$x+T$D+3]=T$Z[T$D+3],1!==T$w||0!==T$I||0!==T$o||1!==T$N){T$E.bTransform=!0;var T$e=T$E.tx+T$r,T$L=T$E.ty+T$F;T$g[T$x+T$D]=(T$Z[T$D]+T$b)*T$w+(T$Z[T$D+1]+T$u)*T$o+T$e,T$g[T$x+T$D+1]=(T$Z[T$D]+T$b)*T$I+(T$Z[T$D+1]+T$u)*T$N+T$L}else T$E.bTransform=!1,T$b+=T$E.tx+T$r,T$u+=T$E.ty+T$F,T$g[T$x+T$D]=T$b+T$Z[T$D],T$g[T$x+T$D+1]=T$u+T$Z[T$D+1];return T$$._upload=!0},T$D.copyPreImgVb=function(T$$,T$b,T$u){var T$Z=T$$._byteLength>>2;T$$.byteLength=T$Z+16<<2;for(var T$E=T$$.getFloat32Array(),T$r=0,T$F=T$Z-16;T$r<4;T$r++)T$E[T$Z]=T$E[T$F]+T$b,++T$F,T$E[++T$Z]=T$E[T$F]+T$u,++T$F,T$E[++T$Z]=T$E[T$F],++T$F,T$E[++T$Z]=T$E[T$F],++T$Z,++T$F;T$$._upload=!0},T$D.fillRectImgVb=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$I,T$o){void 0===T$o&&(T$o=!1);var T$N,T$D,T$e,T$L,T$T,T$_,T$y,T$S,T$P,T$i,T$z,T$q,T$a,T$t,T$C,T$K,T$O=1,T$V=T$x.a,T$v=T$x.b,T$p=T$x.c,T$Y=T$x.d,T$k=T$b&&T$b.width<99999999;if(1!==T$V||0!==T$v||0!==T$p||1!==T$Y?(T$x.bTransform=!0,0===T$v&&0===T$p&&(T$O=23,T$P=T$E+T$u,T$i=T$r+T$Z,T$N=T$V*T$u+(T$z=T$x.tx+T$g),T$e=T$V*T$P+T$z,T$D=T$Y*T$Z+(T$q=T$x.ty+T$H),T$L=T$Y*T$i+T$q)):(T$O=23,T$x.bTransform=!1,T$e=(T$N=T$u+T$x.tx+T$g)+T$E,T$L=(T$D=T$Z+T$x.ty+T$H)+T$r),T$k&&(T$T=T$b.x,T$_=T$b.y,T$y=T$b.width+T$T,T$S=T$b.height+T$_),1!==T$O){if(Math.min(T$N,T$e)>=T$y)return!1;if(Math.min(T$D,T$L)>=T$S)return!1;if(Math.max(T$e,T$N)<=T$T)return!1;if(Math.max(T$L,T$D)<=T$_)return!1}var T$M=T$$._byteLength>>2;T$$.byteLength=16+T$M<<2;var T$l=T$$.getFloat32Array();switch(T$l[2+T$M]=T$F[0],T$l[3+T$M]=T$F[1],T$l[6+T$M]=T$F[2],T$l[7+T$M]=T$F[3],T$l[10+T$M]=T$F[4],T$l[11+T$M]=T$F[5],T$l[14+T$M]=T$F[6],T$l[15+T$M]=T$F[7],T$O){case 1:T$z=T$x.tx+T$g,T$q=T$x.ty+T$H;var T$X=T$V*T$u,T$s=T$p*T$Z,T$m=T$Y*T$Z,T$n=T$v*T$u,T$c=T$V*(T$P=T$E+T$u),T$J=T$p*(T$i=T$r+T$Z),T$f=T$Y*T$i,T$Q=T$v*T$P;T$o?(T$a=T$X+T$s+T$z,T$C=Math.round(T$a)-T$a,T$t=T$m+T$n+T$q,T$K=Math.round(T$t)-T$t,T$l[T$M]=T$a+T$C,T$l[1+T$M]=T$t+T$K,T$l[4+T$M]=T$c+T$s+T$z+T$C,T$l[5+T$M]=T$m+T$Q+T$q+T$K,T$l[8+T$M]=T$c+T$J+T$z+T$C,T$l[9+T$M]=T$f+T$Q+T$q+T$K,T$l[12+T$M]=T$X+T$J+T$z+T$C,T$l[13+T$M]=T$f+T$n+T$q+T$K):(T$l[T$M]=T$X+T$s+T$z,T$l[1+T$M]=T$m+T$n+T$q,T$l[4+T$M]=T$c+T$s+T$z,T$l[5+T$M]=T$m+T$Q+T$q,T$l[8+T$M]=T$c+T$J+T$z,T$l[9+T$M]=T$f+T$Q+T$q,T$l[12+T$M]=T$X+T$J+T$z,T$l[13+T$M]=T$f+T$n+T$q);break;case 23:T$o?(T$a=T$N+T$w,T$C=Math.round(T$a)-T$a,T$t=T$D,T$K=Math.round(T$t)-T$t,T$l[T$M]=T$a+T$C,T$l[1+T$M]=T$t+T$K,T$l[4+T$M]=T$e+T$w+T$C,T$l[5+T$M]=T$D+T$K,T$l[8+T$M]=T$e+T$C,T$l[9+T$M]=T$L+T$K,T$l[12+T$M]=T$N+T$C,T$l[13+T$M]=T$L+T$K):(T$l[T$M]=T$N+T$w,T$l[1+T$M]=T$D,T$l[4+T$M]=T$e+T$w,T$l[5+T$M]=T$D,T$l[8+T$M]=T$e,T$l[9+T$M]=T$L,T$l[12+T$M]=T$N,T$l[13+T$M]=T$L)}return T$$._upload=!0},T$D.fillLineVb=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){var T$g=.5*T$F,T$H=T$D._fillLineArray,T$w=-(T$Z-T$r),T$I=T$u-T$E,T$o=Math.sqrt(T$w*T$w+T$I*T$I);T$w/=T$o,T$I/=T$o,T$w*=T$g,T$I*=T$g,T$H[0]=T$u-T$w,T$H[1]=T$Z-T$I,T$H[4]=T$u+T$w,T$H[5]=T$Z+T$I,T$H[8]=T$E+T$w,T$H[9]=T$r+T$I,T$H[12]=T$E-T$w,T$H[13]=T$r-T$I,T$x&&T$x.transformPointArray(T$H,T$H);var T$N=16+(T$$._byteLength>>2);return T$$.byteLength=T$N<<2,T$$.insertData(T$H,T$N-16),!0},T$D._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T$D}(),T$T$=(function(){function T$g(){}T$o(T$g,"laya.webgl.utils.MatirxArray"),T$g.ArrayMul=function(T$$,T$b,T$u){if(T$$)if(T$b)for(var T$Z=NaN,T$E=NaN,T$r=NaN,T$F=NaN,T$x=0;T$x<4;T$x++)T$Z=T$$[T$x],T$E=T$$[T$x+4],T$r=T$$[T$x+8],T$F=T$$[T$x+12],T$u[T$x]=T$Z*T$b[0]+T$E*T$b[1]+T$r*T$b[2]+T$F*T$b[3],T$u[T$x+4]=T$Z*T$b[4]+T$E*T$b[5]+T$r*T$b[6]+T$F*T$b[7],T$u[T$x+8]=T$Z*T$b[8]+T$E*T$b[9]+T$r*T$b[10]+T$F*T$b[11],T$u[T$x+12]=T$Z*T$b[12]+T$E*T$b[13]+T$r*T$b[14]+T$F*T$b[15];else T$g.copyArray(T$$,T$u);else T$g.copyArray(T$b,T$u)},T$g.copyArray=function(T$$,T$b){if(T$$&&T$b)for(var T$u=0;T$u<T$$.length;T$u++)T$b[T$u]=T$$[T$u]}}(),function(){function T$b(T$$,T$b,T$u){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=T$$,this._vb=new T$R$(T$$,35048),T$b&&this._vb._resizeBuffer(T$b,!1),this._ib=new T$B$,T$u&&this._ib._resizeBuffer(T$u,!1)}T$o(T$b,"laya.webgl.utils.Mesh2D");var T$$=T$b.prototype;return T$$.cloneWithNewVB=function(){var T$$=new T$b(this._stride,0,0);return T$$._ib=this._ib,T$$._quadNum=this._quadNum,T$$._attribInfo=this._attribInfo,T$$},T$$.cloneWithNewVBIB=function(){var T$$=new T$b(this._stride,0,0);return T$$._attribInfo=this._attribInfo,T$$},T$$.getVBW=function(){return this._vb.setNeedUpload(),this._vb},T$$.getVBR=function(){return this._vb},T$$.getIBR=function(){return this._ib},T$$.getIBW=function(){return this._ib.setNeedUpload(),this._ib},T$$.createQuadIB=function(T$$){this._quadNum=T$$,this._ib._resizeBuffer(6*T$$*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var T$b=this._ib.getUint16Array(),T$u=0,T$Z=0,T$E=0;T$E<T$$;T$E++)T$b[T$u++]=T$Z,T$b[T$u++]=T$Z+2,T$b[T$u++]=T$Z+1,T$b[T$u++]=T$Z,T$b[T$u++]=T$Z+3,T$b[T$u++]=T$Z+2,T$Z+=4;this._ib.setNeedUpload()},T$$.setAttributes=function(T$$){if(this._attribInfo=T$$,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},T$$.getEleNum=function(){return this._ib.getBuffer().byteLength/2},T$$.releaseMesh=function(){},T$$.destroy=function(){},T$$.clearVB=function(){this._vb.clear()},T$b._gvaoid=0,T$b}()),T$_$=function(){function T$E(){}return T$o(T$E,"laya.webgl.utils.RenderState2D"),T$E.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},T$E.mat2MatArray=function(T$$,T$b){var T$u=T$$,T$Z=T$b;return T$Z[0]=T$u.a,T$Z[1]=T$u.b,T$Z[2]=T$E.EMPTYMAT4_ARRAY[2],T$Z[3]=T$E.EMPTYMAT4_ARRAY[3],T$Z[4]=T$u.c,T$Z[5]=T$u.d,T$Z[6]=T$E.EMPTYMAT4_ARRAY[6],T$Z[7]=T$E.EMPTYMAT4_ARRAY[7],T$Z[8]=T$E.EMPTYMAT4_ARRAY[8],T$Z[9]=T$E.EMPTYMAT4_ARRAY[9],T$Z[10]=T$E.EMPTYMAT4_ARRAY[10],T$Z[11]=T$E.EMPTYMAT4_ARRAY[11],T$Z[12]=T$u.tx,T$Z[13]=T$u.ty,T$Z[14]=T$E.EMPTYMAT4_ARRAY[14],T$Z[15]=T$E.EMPTYMAT4_ARRAY[15],T$b},T$E.restoreTempArray=function(){T$E.TEMPMAT4_ARRAY[0]=1,T$E.TEMPMAT4_ARRAY[1]=0,T$E.TEMPMAT4_ARRAY[4]=0,T$E.TEMPMAT4_ARRAY[5]=1,T$E.TEMPMAT4_ARRAY[12]=0,T$E.TEMPMAT4_ARRAY[13]=0},T$E.clear=function(){T$E.worldScissorTest=!1,T$E.worldShaderDefines=null,T$E.worldFilters=null,T$E.worldAlpha=1,T$E.worldClipRect.x=T$E.worldClipRect.y=0,T$E.worldClipRect.width=T$E.width,T$E.worldClipRect.height=T$E.height,T$E.curRenderTarget=null},T$E._MAXSIZE=99999999,T$E.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$E.worldMatrix4=T$E.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$E.worldAlpha=1,T$E.worldScissorTest=!1,T$E.worldFilters=null,T$E.worldShaderDefines=null,T$E.curRenderTarget=null,T$E.width=0,T$E.height=0,T$F(T$E,["worldMatrix",function(){return this.worldMatrix=new T$a},"worldClipRect",function(){return this.worldClipRect=new T$C(0,0,99999999,99999999)}]),T$E}(),T$y$=function(){var T$_,T$u;function T$y(T$$,T$b,T$u,T$Z,T$E){var T$r=this;function T$F(T$$){var T$b=[],T$u=new T$_(T$b);return T$r._compileToTree(T$u,T$$.split("\n"),0,T$b,T$E),T$u}var T$x=T$N.now();this._VS=T$F(T$b),this._PS=T$F(T$u),this._nameMap=T$Z,2<T$N.now()-T$x&&console.log("ShaderCompile use time:"+(T$N.now()-T$x)+"  size:"+T$b.length+"/"+T$u.length)}T$o(T$y,"laya.webgl.utils.ShaderCompile");var T$$=T$y.prototype;return T$$._compileToTree=function(T$$,T$b,T$u,T$Z,T$E){var T$r,T$F,T$x,T$g,T$H,T$w,T$I,T$o=0,T$N=0,T$D=0,T$e=0;for(T$N=T$u;T$N<T$b.length;T$N++)if(!((T$x=T$b[T$N]).length<1)&&0!==(T$o=T$x.indexOf("//"))){if(0<=T$o&&(T$x=T$x.substr(0,T$o)),T$r=T$I||new T$_(T$Z),T$I=null,T$r.text=T$x,T$r.noCompile=!0,0<=(T$o=T$x.indexOf("#"))){for(T$g="#",T$e=T$o+1,T$D=T$x.length;T$e<T$D;T$e++){var T$L=T$x.charAt(T$e);if(" "===T$L||"\t"===T$L||"\r"===T$L||"\n"===T$L||"?"===T$L)break;T$g+=T$L}switch(T$r.name=T$g){case"#ifdef":case"#ifndef":if(T$r.src=T$x,T$r.noCompile=null!=T$x.match(/[!&|()=<>]/),T$r.noCompile?console.log("function():Boolean{return "+T$x.substr(T$o+T$r.name.length)+"}"):(T$w=T$x.replace(/^\s*/,"").split(/\s+/),T$r.setCondition(T$w[1],"#ifdef"===T$g?1:2),T$r.text="//"+T$r.text),T$r.setParent(T$$),T$$=T$r,T$E)for(T$w=T$x.substr(T$e).split(T$y._splitToWordExps3),T$e=0;T$e<T$w.length;T$e++)(T$x=T$w[T$e]).length&&(T$E[T$x]=!0);continue;case"#if":if(T$r.src=T$x,T$r.noCompile=!0,T$r.setParent(T$$),T$$=T$r,T$E)for(T$w=T$x.substr(T$e).split(T$y._splitToWordExps3),T$e=0;T$e<T$w.length;T$e++)(T$x=T$w[T$e]).length&&"defined"!=T$x&&(T$E[T$x]=!0);continue;case"#else":T$r.src=T$x,T$F=(T$$=T$$.parent).childs[T$$.childs.length-1],T$r.noCompile=T$F.noCompile,T$r.noCompile||(T$r.condition=T$F.condition,T$r.conditionType=1==T$F.conditionType?2:1,T$r.text="//"+T$r.text+" "+T$F.text+" "+T$r.conditionType),T$r.setParent(T$$),T$$=T$r;continue;case"#endif":T$F=(T$$=T$$.parent).childs[T$$.childs.length-1],T$r.noCompile=T$F.noCompile,T$r.noCompile||(T$r.text="//"+T$r.text),T$r.setParent(T$$);continue;case"#include":T$w=T$y.splitToWords(T$x,null);var T$T=T$y.includes[T$w[1]];if(!T$T)throw"ShaderCompile error no this include file:"+T$w[1];if((T$o=T$w[0].indexOf("?"))<0){T$r.setParent(T$$),T$x=T$T.getWith("with"==T$w[2]?T$w[3]:null),this._compileToTree(T$r,T$x.split("\n"),0,T$Z,T$E),T$r.text="";continue}T$r.setCondition(T$w[0].substr(T$o+1),1),T$r.text=T$T.getWith("with"==T$w[2]?T$w[3]:null);break;case"#import":T$H=(T$w=T$y.splitToWords(T$x,null))[1],T$Z.push({node:T$r,file:T$y.includes[T$H],ofs:T$r.text.length});continue}}else{if((T$F=T$$.childs[T$$.childs.length-1])&&!T$F.name){0<T$Z.length&&T$y.splitToWords(T$x,T$F),T$I=T$r,T$F.text+="\n"+T$x;continue}0<T$Z.length&&T$y.splitToWords(T$x,T$r)}T$r.setParent(T$$)}},T$$.createShader=function(T$$,T$b,T$u){var T$Z={},T$E="";if(T$$)for(var T$r in T$$)T$E+="#define "+T$r+"\n",T$Z[T$r]=!0;var T$F=this._VS.toscript(T$Z,[]),T$x=this._PS.toscript(T$Z,[]);return(T$u||T$j$.create)(T$E+T$F.join("\n"),T$E+T$x.join("\n"),T$b,this._nameMap)},T$y._parseOne=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F={type:T$y.shaderParamsMap[T$u[T$Z+1]],name:T$u[T$Z+2],size:isNaN(parseInt(T$u[T$Z+3]))?1:parseInt(T$u[T$Z+3])};return T$r&&("attribute"==T$E?T$$.push(T$F):T$b.push(T$F)),":"==T$u[T$Z+3]&&(T$F.type=T$u[T$Z+4],T$Z+=2),T$Z+=2},T$y.addInclude=function(T$$,T$b){if(!T$b||0===T$b.length)throw new Error("add shader include file err:"+T$$);if(T$y.includes[T$$])throw new Error("add shader include file err, has add:"+T$$);T$y.includes[T$$]=new T$u(T$b)},T$y.preGetParams=function(T$$,T$b){var T$u=[T$$,T$b],T$Z={},T$E=[],T$r=[],T$F={},T$x=[];T$Z.attributes=T$E,T$Z.uniforms=T$r,T$Z.defines=T$F;for(var T$g=0,T$H=0,T$w=0;T$w<2;T$w++){T$u[T$w]=T$u[T$w].replace(T$y._removeAnnotation,"");var T$I,T$o=T$u[T$w].match(T$y._reg);for(T$g=0,T$H=T$o.length;T$g<T$H;T$g++){var T$N=T$o[T$g];if("attribute"==T$N||"uniform"==T$N)T$g=T$y._parseOne(T$E,T$r,T$o,T$g,T$N,!0);else{if("#define"==T$N){T$x[T$N=T$o[++T$g]]=1;continue}if("#ifdef"==T$N){T$F[T$I=T$o[++T$g]]=T$F[T$I]||[];for(T$g++;T$g<T$H;T$g++)if("attribute"==(T$N=T$o[T$g])||"uniform"==T$N)T$g=T$y._parseOne(T$E,T$r,T$o,T$g,T$N,T$x[T$I]);else if("#else"==T$N)for(T$g++;T$g<T$H;T$g++)if("attribute"==(T$N=T$o[T$g])||"uniform"==T$N)T$g=T$y._parseOne(T$E,T$r,T$o,T$g,T$N,!T$x[T$I]);else if("#endif"==T$N)break}}}}return T$Z},T$y.splitToWords=function(T$$,T$b){for(var T$u,T$Z,T$E=[],T$r=-1,T$F=0,T$x=T$$.length;T$F<T$x;T$F++)if(T$u=T$$.charAt(T$F),0<=" \t=+-*/&%!<>()'\",;".indexOf(T$u)){if(0<=T$r&&1<T$F-T$r&&(T$Z=T$$.substr(T$r,T$F-T$r),T$E.push(T$Z)),'"'==T$u||"'"==T$u){var T$g=T$$.indexOf(T$u,T$F+1);if(T$g<0)throw"Sharder err:"+T$$;T$E.push(T$$.substr(T$F+1,T$g-T$F-1)),T$F=T$g,T$r=-1;continue}"("==T$u&&T$b&&0<T$E.length&&(T$Z=T$E[T$E.length-1]+";","vec4;main;".indexOf(T$Z)<0&&(T$b.useFuns+=T$Z)),T$r=-1}else T$r<0&&(T$r=T$F);return T$r<T$x&&1<T$x-T$r&&(T$Z=T$$.substr(T$r,T$x-T$r),T$E.push(T$Z)),T$E},T$y.IFDEF_NO=0,T$y.IFDEF_YES=1,T$y.IFDEF_ELSE=2,T$y.IFDEF_PARENT=3,T$y._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),T$y._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),T$y._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),T$y.includes={},T$F(T$y,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),T$y.__init$=function(){T$_=function(){function T$u(T$$){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=T$$}T$o(T$u,"");var T$$=T$u.prototype;return T$$.setParent=function(T$$){T$$.childs.push(this),this.z=T$$.z+1,this.parent=T$$},T$$.setCondition=function(T$$,T$b){T$$&&(this.conditionType=T$b,T$$=T$$.replace(/(\s*$)/g,""),this.condition=function(){return this[T$$]},this.condition.__condition=T$$)},T$$.toscript=function(T$$,T$b){return this._toscript(T$$,T$b,++T$u.__id)},T$$._toscript=function(T$Z,T$E,T$r){if(this.childs.length<1&&!this.text)return T$E;T$E.length;if(this.condition){var T$$=!!this.condition.call(T$Z);if(2===this.conditionType&&(T$$=!T$$),!T$$)return T$E}if(this.text&&T$E.push(this.text),0<this.childs.length&&this.childs.forEach(function(T$$,T$b,T$u){T$$._toscript(T$Z,T$E,T$r)}),0<this.includefiles.length&&0<this.useFuns.length)for(var T$b,T$u=0,T$F=this.includefiles.length;T$u<T$F;T$u++)this.includefiles[T$u].curUseID!=T$r&&0<(T$b=this.includefiles[T$u].file.getFunsScript(this.useFuns)).length&&(this.includefiles[T$u].curUseID=T$r,T$E[0]=T$b+T$E[0]);return T$E},T$u.__id=1,T$u}(),T$u=function(){function T$$(T$$){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=T$$;for(var T$b=0,T$u=0,T$Z=0;!((T$b=T$$.indexOf("#begin",T$b))<0);){for(T$Z=T$b+5;!((T$Z=T$$.indexOf("#end",T$Z))<0)&&"i"===T$$.charAt(T$Z+4);)T$Z+=5;if(T$Z<0)throw"add include err,no #end:"+T$$;T$u=T$$.indexOf("\n",T$b);var T$E=T$y.splitToWords(T$$.substr(T$b,T$u-T$b),null);"code"==T$E[1]?this.codes[T$E[2]]=T$$.substr(T$u+1,T$Z-T$u-1):"function"==T$E[1]&&(T$u=T$$.indexOf("function",T$b),T$u+="function".length,this.funs[T$E[3]]=T$$.substr(T$u+1,T$Z-T$u-1),this.funnames+=T$E[3]+";"),T$b=T$Z+1}}T$o(T$$,"");var T$b=T$$.prototype;return T$b.getWith=function(T$$){var T$b=T$$?this.codes[T$$]:this.script;if(!T$b)throw"get with error:"+T$$;return T$b},T$b.getFunsScript=function(T$$){var T$b="";for(var T$u in this.funs)0<=T$$.indexOf(T$u+";")&&(T$b+=this.funs[T$u]);return T$b},T$$}()},T$y}(),T$S$=function(){function T$F(){}return T$o(T$F,"laya.webgl.WebGL"),T$F._uint8ArraySlice=function(){for(var T$$=this.length,T$b=new Uint8Array(this.length),T$u=0;T$u<T$$;T$u++)T$b[T$u]=this[T$u];return T$b},T$F._float32ArraySlice=function(){for(var T$$=this.length,T$b=new Float32Array(this.length),T$u=0;T$u<T$$;T$u++)T$b[T$u]=this[T$u];return T$b},T$F._uint16ArraySlice=function(T$$){var T$b,T$u=arguments,T$Z=0,T$E=0;if(0===T$u.length)for(T$Z=this.length,T$b=new Uint16Array(T$Z),T$E=0;T$E<T$Z;T$E++)T$b[T$E]=this[T$E];else if(2===T$u.length){var T$r=T$u[0],T$F=T$u[1];if(T$r<T$F)for(T$Z=T$F-T$r,T$b=new Uint16Array(T$Z),T$E=T$r;T$E<T$F;T$E++)T$b[T$E-T$r]=this[T$E];else T$b=new Uint16Array(0)}return T$b},T$F.expandContext=function(){var T$$=T$E.prototype,T$b=CanvasRenderingContext2D.prototype;T$b.fillTrangles=T$$.fillTrangles,T$h$.__int__(null),T$b.setIBVB=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){void 0===T$g&&(T$g=0),void 0===T$H&&(T$H=0),null===T$u&&(this._ib=this._ib||T$B$.QuadrangleIB,T$u=this._ib,T$L$.expandIBQuadrangle(T$u,T$Z._byteLength/64+8)),this._setIBVB(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H)},T$b.fillTrangles=function(T$$,T$b,T$u,T$Z,T$E){this._curMat=this._curMat||T$a.create(),this._vb=this._vb||T$R$.create(),this._ib||(this._ib=T$B$.create(),T$L$.fillIBQuadrangle(this._ib,T$F/4));var T$r=this._vb,T$F=T$Z.length>>4;T$L$.fillTranglesVB(T$r,T$b,T$u,T$Z,T$E||this._curMat,0,0),T$L$.expandIBQuadrangle(this._ib,T$r._byteLength/64+8);var T$x=new T$q$(1,0);T$x.textureHost=T$$;var T$g=new T$U$("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");T$r._vertType=3,this._setIBVB(T$b,T$u,this._ib,T$r,6*T$F,T$E,T$g,T$x,0,0)}},T$F.enable=function(){if(T$N.__init__(),T$T.isConchApp&&!T$T.isConchWebGL)return T$P.skinAniSprite=function(){return new T$$$},T$F.expandContext(),!1;if(T$P.getWebGLContext=function(T$$){for(var T$b,T$u=["webgl","experimental-webgl","webkit-3d","moz-webgl"],T$Z=0;T$Z<T$u.length;T$Z++){try{T$b=T$$.getContext(T$u[T$Z],{stencil:T$z.isStencil,alpha:T$z.isAlpha,antialias:T$z.isAntialias,premultipliedAlpha:T$z.premultipliedAlpha,preserveDrawingBuffer:T$z.preserveDrawingBuffer})}catch(T$$){}if(T$b)return T$b}return null},null==(T$F.mainContext=T$F.mainContext||T$P.getWebGLContext(T$T._mainCanvas)))return!1;if(T$T.isWebGL)return!0;T$e.create=function(T$$,T$b){return new T$$b(T$$,T$b)},T$L.create=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){return new T$A$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F)},T$T.WebGL=T$F,T$T.isWebGL=!0,T$N$.__init__(),T$P.createRenderSprite=function(T$$,T$b){return new T$a$(T$$,T$b)},T$P.createWebGLContext2D=function(T$$){return new T$z$(T$$)},T$P.changeWebGLSize=function(T$$,T$b){laya.webgl.WebGL.onStageResize(T$$,T$b)},T$P.createGraphics=function(){return new T$i$};var T$$=T$P.createFilterAction;return T$P.createFilterAction=T$$||function(T$$){return new T$t$},T$P.clear=function(T$$){T$_$.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var T$b=T$T.context.ctx,T$u=0==T$b._submits._length||T$z.preserveDrawingBuffer?T$D.create(T$$)._color:T$O._wgColor;T$u&&T$b.clearBG(T$u[0],T$u[1],T$u[2],T$u[3]),T$_$.clear()},T$P.addToAtlas=function(T$$,T$b){void 0===T$b&&(T$b=!1);var T$u=T$$.bitmap;T$T.optimizeTextureMemory(T$$.url,T$$)?T$i.__typeof(T$u,"laya.webgl.resource.IMergeAtlasBitmap")&&T$u.allowMerageInAtlas&&T$u.on("recovered",T$$,T$$.addTextureToAtlas):T$u.enableMerageInAtlas=!1},T$P.isAtlas=function(T$$){return T$$ instanceof laya.webgl.atlas.AtlasWebGLCanvas},T$n._enable(),T$P.beginFlush=function(){for(var T$$=T$n.instance,T$b=T$$.getAtlaserCount(),T$u=0;T$u<T$b;T$u++){var T$Z=T$$.getAtlaserByIndex(T$u).texture;T$Z._flashCacheImageNeedFlush&&T$P.flashFlushImage(T$Z)}},T$P.drawToCanvas=function(T$$,T$b,T$u,T$Z,T$E,T$r){(T$u<=0||T$Z<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),T$u|=0,T$Z|=0,T$E|=0,T$r|=0;var T$F=T$l$.create(T$u,T$Z,6408,5121,0,!1);T$F.start(),T$F.clear(0,0,0,0),T$T.context.clear(),T$_.renders[T$b]._fun(T$$,T$T.context,T$E,T$_$.height-T$Z+T$r),T$T.context.flush(),T$F.end();var T$x=T$F.getData(0,0,T$u,T$Z);if(T$F.recycle(),T$x.byteLength==T$u*T$Z*4){var T$g=new T$Q$;T$g._canvas=T$N.createElement("canvas"),T$g.size(T$u,T$Z);var T$H=T$g._canvas.getContext("2d");T$N.canvas.size(T$u,T$Z);var T$w=T$N.context,T$I=T$w.createImageData(T$u,T$Z);return T$I.data.set(new Uint8ClampedArray(T$x.buffer)),T$g._imgData=T$I,T$w.putImageData(T$I,0,0),T$H.save(),T$H.translate(0,T$Z),T$H.scale(1,-1),T$H.drawImage(T$N.canvas.source,0,0),T$H.restore(),T$g}console.log("drawToCanvas error: w:"+T$u+",h:"+T$Z+",datalen:"+T$x.byteLength)},T$P.createFilterAction=function(T$$){var T$b;switch(T$$){case 32:T$b=new T$t$}return T$b},T$P.addTextureToAtlas=function(T$$){T$$._uvID++,T$n._atlasRestore++,T$$.bitmap.enableMerageInAtlas&&T$n.instance.addToAtlas(T$$)},T$P.getTexturePixels=function(T$$,T$b,T$u,T$Z,T$E){T$T.context.ctx.clear();var T$r=new T$K;T$r.graphics.drawTexture(T$$,-T$b,-T$u);var T$F=T$l$.create(T$Z,T$E);T$F.start(),T$F.clear(0,0,0,0),T$r.render(T$T.context,0,0),T$T.context.ctx.flush(),T$F.end();for(var T$x=T$F.getData(0,0,T$Z,T$E),T$g=[],T$H=0,T$w=T$E-1;0<=T$w;T$w--)for(var T$I=0;T$I<T$Z;T$I++)T$H=4*(T$w*T$Z+T$I),T$g.push(T$x[T$H]),T$g.push(T$x[T$H+1]),T$g.push(T$x[T$H+2]),T$g.push(T$x[T$H+3]);return T$g},T$P.skinAniSprite=function(){return new T$$$},T$H.create=function(T$$,T$b){var T$u=new T$Q$;return T$u._imgData=T$b,T$u.flipY=!1,T$u},T$q._filterStart=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$$.getValue("bounds"),T$F=T$l$.create(T$r.width,T$r.height);if(T$F.start(),T$F.clear(0,0,0,0),T$$.addValue("src",T$F),T$$.addValue("ScissorTest",T$_$.worldScissorTest),T$_$.worldScissorTest){var T$x=new T$C;T$x.copyFrom(T$u.ctx._clipRect),T$$.addValue("clipRect",T$x),T$_$.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},T$q._filterEnd=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$$.getValue("bounds");T$$.getValue("src").end();var T$F=T$l$.create(T$r.width,T$r.height);T$F.start(),T$F.clear(0,0,0,0),T$$.addValue("out",T$F),T$b._set$P("_filterCache",T$F),T$b._set$P("_isHaveGlowFilter",T$$.getValue("_isHaveGlowFilter"))},T$q._EndTarget=function(T$$,T$b){if(T$$.getValue("src").recycle(),T$$.getValue("out").end(),T$$.getValue("ScissorTest")){T$_$.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),T$b.ctx.save();var T$u=T$$.getValue("clipRect");T$b.ctx.clipRect(T$u.x,T$u.y,T$u.width,T$u.height)}},T$q._useSrc=function(T$$){var T$b=T$$.getValue("out");T$b.end(),(T$b=T$$.getValue("src")).start(),T$b.clear(0,0,0,0)},T$q._endSrc=function(T$$){T$$.getValue("src").end()},T$q._useOut=function(T$$){var T$b=T$$.getValue("src");T$b.end(),(T$b=T$$.getValue("out")).start(),T$b.clear(0,0,0,0)},T$q._endOut=function(T$$){T$$.getValue("out").end()},T$q._recycleScope=function(T$$){T$$.recycle()},T$q._filter=function(T$$,T$b,T$u,T$Z){var T$E=this._next;if(T$E){var T$r,T$F,T$x=T$$.filters,T$g=T$x.length;if(1==T$g&&32==T$x[0].type)return T$b.ctx.save(),T$b.ctx.setFilters([T$x[0]]),T$E._fun.call(T$E,T$$,T$b,T$u,T$Z),void T$b.ctx.restore();var T$H=T$x$.create(),T$w=T$t.TEMP,T$I=T$b.ctx._getTransformMatrix(),T$o=T$a.create();T$I.copyTo(T$o);var T$N=0,T$D=0,T$e=!1,T$L=T$$._$P._filterCache?T$$._$P._filterCache:null;if(!T$L||T$$._repaint){T$e=T$$._isHaveGlowFilter(),T$H.addValue("_isHaveGlowFilter",T$e),T$e&&(T$N=50,T$D=25),(T$F=new T$C).copyFrom(T$$.getSelfBounds()),T$F.x+=T$$.x,T$F.y+=T$$.y,T$F.x-=T$$.pivotX+4,T$F.y-=T$$.pivotY+4;var T$T=T$F.x,T$_=T$F.y;if(T$F.width+=T$N+8,T$F.height+=T$N+8,T$w.x=T$F.x*T$o.a+T$F.y*T$o.c,T$w.y=T$F.y*T$o.d+T$F.x*T$o.b,T$F.x=T$w.x,T$F.y=T$w.y,T$w.x=T$F.width*T$o.a+T$F.height*T$o.c,T$w.y=T$F.height*T$o.d+T$F.width*T$o.b,T$F.width=T$w.x,T$F.height=T$w.y,T$F.width<=0||T$F.height<=0)return;T$L&&T$L.recycle(),T$H.addValue("bounds",T$F);var T$y=T$F$.create([T$H,T$$,T$b,0,0],T$q._filterStart);T$b.addRenderObject(T$y),T$b.ctx._renderKey=0,T$b.ctx._shader2D.glTexture=null;var T$S=T$$.x-T$T+T$D,T$P=T$$.y-T$_+T$D;T$E._fun.call(T$E,T$$,T$b,T$S,T$P),T$y=T$F$.create([T$H,T$$,T$b,0,0],T$q._filterEnd),T$b.addRenderObject(T$y);for(var T$i=0;T$i<T$g;T$i++){0!=T$i&&(T$y=T$F$.create([T$H],T$q._useSrc),T$b.addRenderObject(T$y),T$r=T$q$.create(1,0),T$a.TEMP.identity(),T$b.ctx.drawTarget(T$H,0,0,T$F.width,T$F.height,T$a.TEMP,"out",T$r,null,T$J.TOINT.overlay),T$y=T$F$.create([T$H],T$q._useOut),T$b.addRenderObject(T$y)),T$x[T$i].action.apply3d(T$H,T$$,T$b,0,0)}T$y=T$F$.create([T$H,T$b],T$q._EndTarget),T$b.addRenderObject(T$y)}else{if((T$e=!!T$$._$P._isHaveGlowFilter&&T$$._$P._isHaveGlowFilter)&&(T$N=50,T$D=25),(T$F=T$$.getBounds()).width<=0||T$F.height<=0)return;T$F.width+=T$N,T$F.height+=T$N,T$w.x=T$F.x*T$o.a+T$F.y*T$o.c,T$w.y=T$F.y*T$o.d+T$F.x*T$o.b,T$F.x=T$w.x,T$F.y=T$w.y,T$w.x=T$F.width*T$o.a+T$F.height*T$o.c,T$w.y=T$F.height*T$o.d+T$F.width*T$o.b,T$F.width=T$w.x,T$F.height=T$w.y,T$H.addValue("out",T$L)}T$u=T$u-T$D-T$$.x,T$Z=T$Z-T$D-T$$.y,T$w.setTo(T$u,T$Z),T$o.transformPoint(T$w),T$u=T$w.x+T$F.x,T$Z=T$w.y+T$F.y,T$r=T$q$.create(1,0),T$a.TEMP.identity(),T$b.ctx.drawTarget(T$H,T$u,T$Z,T$F.width,T$F.height,T$a.TEMP,"out",T$r,null,T$J.TOINT.overlay),T$y=T$F$.create([T$H],T$q._recycleScope),T$b.addRenderObject(T$y),T$o.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=T$F._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=T$F._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=T$F._uint8ArraySlice),!0},T$F.onStageResize=function(T$$,T$b){null!=T$F.mainContext&&(T$F.mainContext.viewport(0,0,T$$,T$b),T$_$.width=T$$,T$_$.height=T$b)},T$F.onInvalidGLRes=function(){T$n.instance.freeAll(),T$S.releaseContentManagers(!0),T$F.doNodeRepaint(T$i.stage),T$F.mainContext.viewport(0,0,T$_$.width,T$_$.height),T$i.stage.event("devicelost")},T$F.doNodeRepaint=function(T$$){0==T$$.numChildren&&T$$.repaint();for(var T$b=0;T$b<T$$.numChildren;T$b++)T$F.doNodeRepaint(T$$.getChildAt(T$b))},T$F.init=function(T$$,T$b,T$u){T$F.mainCanvas=T$$,T$H._createContext=function(T$$){return new T$z$(T$$)},T$Q$._createContext=function(T$$){return new T$z$(T$$)};var T$Z=laya.webgl.WebGL.mainContext;if(null!=T$Z.getShaderPrecisionFormat){var T$E=T$Z.getShaderPrecisionFormat(35633,36338),T$r=T$Z.getShaderPrecisionFormat(35632,36338);T$F.shaderHighPrecision=!(!T$E.precision||!T$r.precision)}else T$F.shaderHighPrecision=!1;if(T$F.compressAstc=T$Z.getExtension("WEBGL_compressed_texture_astc"),T$F.compressAtc=T$Z.getExtension("WEBGL_compressed_texture_atc"),T$F.compressEtc=T$Z.getExtension("WEBGL_compressed_texture_etc"),T$F.compressEtc1=T$Z.getExtension("WEBGL_compressed_texture_etc1"),T$F.compressPvrtc=T$Z.getExtension("WEBGL_compressed_texture_pvrtc"),T$F.compressS3tc=T$Z.getExtension("WEBGL_compressed_texture_s3tc"),T$F.compressS3tc_srgb=T$Z.getExtension("WEBGL_compressed_texture_s3tc_srgb"),T$F.compressAstc=T$F.compressAstc?T$F.compressAstc:{},T$F.compressAtc=T$F.compressAtc?T$F.compressAtc:{},T$F.compressEtc=T$F.compressEtc?T$F.compressEtc:{},T$F.compressEtc1=T$F.compressEtc1?T$F.compressEtc1:{},T$F.compressPvrtc=T$F.compressPvrtc?T$F.compressPvrtc:{},T$F.compressS3tc=T$F.compressS3tc?T$F.compressS3tc:{},T$F.compressS3tc_srgb=T$F.compressS3tc_srgb?T$F.compressS3tc_srgb:{},T$Z.deleteTexture1=T$Z.deleteTexture,T$Z.deleteTexture=function(T$$){T$$==T$P$.curBindTexValue&&(T$P$.curBindTexValue=null),T$Z.deleteTexture1(T$$)},T$F.onStageResize(T$b,T$u),null==T$F.mainContext)throw new Error("webGL getContext err!");T$p.__init__(),T$n.__init__(),T$K$.__init__(),T$r$.__init__(),T$z$.__init__(),T$q$.__init__(),T$B.__init__(),T$h$.__int__(T$Z),T$J._init_(T$Z),T$T.isConchApp&&conch.setOnInvalidGLRes(T$F.onInvalidGLRes)},T$F.mainCanvas=null,T$F.antialias=!0,T$F.shaderHighPrecision=!1,T$F._bg_null=[0,0,0,0],T$F}(),T$P$=function(){function T$Z(){}return T$o(T$Z,"laya.webgl.WebGLContext"),T$Z.UseProgram=function(T$$){return T$Z._useProgram!==T$$&&(T$S$.mainContext.useProgram(T$$),T$Z._useProgram=T$$,!0)},T$Z.setDepthTest=function(T$$,T$b){T$b!==T$Z._depthTest&&((T$Z._depthTest=T$b)?T$$.enable(2929):T$$.disable(2929))},T$Z.setDepthMask=function(T$$,T$b){T$b!==T$Z._depthMask&&(T$Z._depthMask=T$b,T$$.depthMask(T$b))},T$Z.setDepthFunc=function(T$$,T$b){T$b!==T$Z._depthFunc&&(T$Z._depthFunc=T$b,T$$.depthFunc(T$b))},T$Z.setBlend=function(T$$,T$b){T$b!==T$Z._blend&&((T$Z._blend=T$b)?T$$.enable(3042):T$$.disable(3042))},T$Z.setBlendFunc=function(T$$,T$b,T$u){(T$b!==T$Z._sFactor||T$u!==T$Z._dFactor)&&(T$Z._sFactor=T$b,T$Z._dFactor=T$u,T$$.blendFunc(T$b,T$u))},T$Z.setCullFace=function(T$$,T$b){T$b!==T$Z._cullFace&&((T$Z._cullFace=T$b)?T$$.enable(2884):T$$.disable(2884))},T$Z.setFrontFace=function(T$$,T$b){T$b!==T$Z._frontFace&&(T$Z._frontFace=T$b,T$$.frontFace(T$b))},T$Z.bindTexture=function(T$$,T$b,T$u){T$$.bindTexture(T$b,T$u),T$Z.curBindTexTarget=T$b,T$Z.curBindTexValue=T$u},T$Z.DEPTH_BUFFER_BIT=256,T$Z.STENCIL_BUFFER_BIT=1024,T$Z.COLOR_BUFFER_BIT=16384,T$Z.POINTS=0,T$Z.LINES=1,T$Z.LINE_LOOP=2,T$Z.LINE_STRIP=3,T$Z.TRIANGLES=4,T$Z.TRIANGLE_STRIP=5,T$Z.TRIANGLE_FAN=6,T$Z.ZERO=0,T$Z.ONE=1,T$Z.SRC_COLOR=768,T$Z.ONE_MINUS_SRC_COLOR=769,T$Z.SRC_ALPHA=770,T$Z.ONE_MINUS_SRC_ALPHA=771,T$Z.DST_ALPHA=772,T$Z.ONE_MINUS_DST_ALPHA=773,T$Z.DST_COLOR=774,T$Z.ONE_MINUS_DST_COLOR=775,T$Z.SRC_ALPHA_SATURATE=776,T$Z.FUNC_ADD=32774,T$Z.BLEND_EQUATION=32777,T$Z.BLEND_EQUATION_RGB=32777,T$Z.BLEND_EQUATION_ALPHA=34877,T$Z.FUNC_SUBTRACT=32778,T$Z.FUNC_REVERSE_SUBTRACT=32779,T$Z.BLEND_DST_RGB=32968,T$Z.BLEND_SRC_RGB=32969,T$Z.BLEND_DST_ALPHA=32970,T$Z.BLEND_SRC_ALPHA=32971,T$Z.CONSTANT_COLOR=32769,T$Z.ONE_MINUS_CONSTANT_COLOR=32770,T$Z.CONSTANT_ALPHA=32771,T$Z.ONE_MINUS_CONSTANT_ALPHA=32772,T$Z.BLEND_COLOR=32773,T$Z.ARRAY_BUFFER=34962,T$Z.ELEMENT_ARRAY_BUFFER=34963,T$Z.ARRAY_BUFFER_BINDING=34964,T$Z.ELEMENT_ARRAY_BUFFER_BINDING=34965,T$Z.STREAM_DRAW=35040,T$Z.STATIC_DRAW=35044,T$Z.DYNAMIC_DRAW=35048,T$Z.BUFFER_SIZE=34660,T$Z.BUFFER_USAGE=34661,T$Z.CURRENT_VERTEX_ATTRIB=34342,T$Z.FRONT=1028,T$Z.BACK=1029,T$Z.CULL_FACE=2884,T$Z.FRONT_AND_BACK=1032,T$Z.BLEND=3042,T$Z.DITHER=3024,T$Z.STENCIL_TEST=2960,T$Z.DEPTH_TEST=2929,T$Z.SCISSOR_TEST=3089,T$Z.POLYGON_OFFSET_FILL=32823,T$Z.SAMPLE_ALPHA_TO_COVERAGE=32926,T$Z.SAMPLE_COVERAGE=32928,T$Z.NO_ERROR=0,T$Z.INVALID_ENUM=1280,T$Z.INVALID_VALUE=1281,T$Z.INVALID_OPERATION=1282,T$Z.OUT_OF_MEMORY=1285,T$Z.CW=2304,T$Z.CCW=2305,T$Z.LINE_WIDTH=2849,T$Z.ALIASED_POINT_SIZE_RANGE=33901,T$Z.ALIASED_LINE_WIDTH_RANGE=33902,T$Z.CULL_FACE_MODE=2885,T$Z.FRONT_FACE=2886,T$Z.DEPTH_RANGE=2928,T$Z.DEPTH_WRITEMASK=2930,T$Z.DEPTH_CLEAR_VALUE=2931,T$Z.DEPTH_FUNC=2932,T$Z.STENCIL_CLEAR_VALUE=2961,T$Z.STENCIL_FUNC=2962,T$Z.STENCIL_FAIL=2964,T$Z.STENCIL_PASS_DEPTH_FAIL=2965,T$Z.STENCIL_PASS_DEPTH_PASS=2966,T$Z.STENCIL_REF=2967,T$Z.STENCIL_VALUE_MASK=2963,T$Z.STENCIL_WRITEMASK=2968,T$Z.STENCIL_BACK_FUNC=34816,T$Z.STENCIL_BACK_FAIL=34817,T$Z.STENCIL_BACK_PASS_DEPTH_FAIL=34818,T$Z.STENCIL_BACK_PASS_DEPTH_PASS=34819,T$Z.STENCIL_BACK_REF=36003,T$Z.STENCIL_BACK_VALUE_MASK=36004,T$Z.STENCIL_BACK_WRITEMASK=36005,T$Z.VIEWPORT=2978,T$Z.SCISSOR_BOX=3088,T$Z.COLOR_CLEAR_VALUE=3106,T$Z.COLOR_WRITEMASK=3107,T$Z.UNPACK_ALIGNMENT=3317,T$Z.PACK_ALIGNMENT=3333,T$Z.MAX_TEXTURE_SIZE=3379,T$Z.MAX_VIEWPORT_DIMS=3386,T$Z.SUBPIXEL_BITS=3408,T$Z.RED_BITS=3410,T$Z.GREEN_BITS=3411,T$Z.BLUE_BITS=3412,T$Z.ALPHA_BITS=3413,T$Z.DEPTH_BITS=3414,T$Z.STENCIL_BITS=3415,T$Z.POLYGON_OFFSET_UNITS=10752,T$Z.POLYGON_OFFSET_FACTOR=32824,T$Z.TEXTURE_BINDING_2D=32873,T$Z.SAMPLE_BUFFERS=32936,T$Z.SAMPLES=32937,T$Z.SAMPLE_COVERAGE_VALUE=32938,T$Z.SAMPLE_COVERAGE_INVERT=32939,T$Z.NUM_COMPRESSED_TEXTURE_FORMATS=34466,T$Z.COMPRESSED_TEXTURE_FORMATS=34467,T$Z.DONT_CARE=4352,T$Z.FASTEST=4353,T$Z.NICEST=4354,T$Z.GENERATE_MIPMAP_HINT=33170,T$Z.BYTE=5120,T$Z.UNSIGNED_BYTE=5121,T$Z.SHORT=5122,T$Z.UNSIGNED_SHORT=5123,T$Z.INT=5124,T$Z.UNSIGNED_INT=5125,T$Z.FLOAT=5126,T$Z.DEPTH_COMPONENT=6402,T$Z.ALPHA=6406,T$Z.RGB=6407,T$Z.RGBA=6408,T$Z.LUMINANCE=6409,T$Z.LUMINANCE_ALPHA=6410,T$Z.UNSIGNED_SHORT_4_4_4_4=32819,T$Z.UNSIGNED_SHORT_5_5_5_1=32820,T$Z.UNSIGNED_SHORT_5_6_5=33635,T$Z.FRAGMENT_SHADER=35632,T$Z.VERTEX_SHADER=35633,T$Z.MAX_VERTEX_ATTRIBS=34921,T$Z.MAX_VERTEX_UNIFORM_VECTORS=36347,T$Z.MAX_VARYING_VECTORS=36348,T$Z.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,T$Z.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,T$Z.MAX_TEXTURE_IMAGE_UNITS=34930,T$Z.MAX_FRAGMENT_UNIFORM_VECTORS=36349,T$Z.SHADER_TYPE=35663,T$Z.DELETE_STATUS=35712,T$Z.LINK_STATUS=35714,T$Z.VALIDATE_STATUS=35715,T$Z.ATTACHED_SHADERS=35717,T$Z.ACTIVE_UNIFORMS=35718,T$Z.ACTIVE_ATTRIBUTES=35721,T$Z.SHADING_LANGUAGE_VERSION=35724,T$Z.CURRENT_PROGRAM=35725,T$Z.NEVER=512,T$Z.LESS=513,T$Z.EQUAL=514,T$Z.LEQUAL=515,T$Z.GREATER=516,T$Z.NOTEQUAL=517,T$Z.GEQUAL=518,T$Z.ALWAYS=519,T$Z.KEEP=7680,T$Z.REPLACE=7681,T$Z.INCR=7682,T$Z.DECR=7683,T$Z.INVERT=5386,T$Z.INCR_WRAP=34055,T$Z.DECR_WRAP=34056,T$Z.VENDOR=7936,T$Z.RENDERER=7937,T$Z.VERSION=7938,T$Z.NEAREST=9728,T$Z.LINEAR=9729,T$Z.NEAREST_MIPMAP_NEAREST=9984,T$Z.LINEAR_MIPMAP_NEAREST=9985,T$Z.NEAREST_MIPMAP_LINEAR=9986,T$Z.LINEAR_MIPMAP_LINEAR=9987,T$Z.TEXTURE_MAG_FILTER=10240,T$Z.TEXTURE_MIN_FILTER=10241,T$Z.TEXTURE_WRAP_S=10242,T$Z.TEXTURE_WRAP_T=10243,T$Z.TEXTURE_2D=3553,T$Z.TEXTURE=5890,T$Z.TEXTURE_CUBE_MAP=34067,T$Z.TEXTURE_BINDING_CUBE_MAP=34068,T$Z.TEXTURE_CUBE_MAP_POSITIVE_X=34069,T$Z.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,T$Z.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,T$Z.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,T$Z.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,T$Z.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,T$Z.MAX_CUBE_MAP_TEXTURE_SIZE=34076,T$Z.TEXTURE0=33984,T$Z.TEXTURE1=33985,T$Z.TEXTURE2=33986,T$Z.TEXTURE3=33987,T$Z.TEXTURE4=33988,T$Z.TEXTURE5=33989,T$Z.TEXTURE6=33990,T$Z.TEXTURE7=33991,T$Z.TEXTURE8=33992,T$Z.TEXTURE9=33993,T$Z.TEXTURE10=33994,T$Z.TEXTURE11=33995,T$Z.TEXTURE12=33996,T$Z.TEXTURE13=33997,T$Z.TEXTURE14=33998,T$Z.TEXTURE15=33999,T$Z.TEXTURE16=34e3,T$Z.TEXTURE17=34001,T$Z.TEXTURE18=34002,T$Z.TEXTURE19=34003,T$Z.TEXTURE20=34004,T$Z.TEXTURE21=34005,T$Z.TEXTURE22=34006,T$Z.TEXTURE23=34007,T$Z.TEXTURE24=34008,T$Z.TEXTURE25=34009,T$Z.TEXTURE26=34010,T$Z.TEXTURE27=34011,T$Z.TEXTURE28=34012,T$Z.TEXTURE29=34013,T$Z.TEXTURE30=34014,T$Z.TEXTURE31=34015,T$Z.ACTIVE_TEXTURE=34016,T$Z.REPEAT=10497,T$Z.CLAMP_TO_EDGE=33071,T$Z.MIRRORED_REPEAT=33648,T$Z.FLOAT_VEC2=35664,T$Z.FLOAT_VEC3=35665,T$Z.FLOAT_VEC4=35666,T$Z.INT_VEC2=35667,T$Z.INT_VEC3=35668,T$Z.INT_VEC4=35669,T$Z.BOOL=35670,T$Z.BOOL_VEC2=35671,T$Z.BOOL_VEC3=35672,T$Z.BOOL_VEC4=35673,T$Z.FLOAT_MAT2=35674,T$Z.FLOAT_MAT3=35675,T$Z.FLOAT_MAT4=35676,T$Z.SAMPLER_2D=35678,T$Z.SAMPLER_CUBE=35680,T$Z.VERTEX_ATTRIB_ARRAY_ENABLED=34338,T$Z.VERTEX_ATTRIB_ARRAY_SIZE=34339,T$Z.VERTEX_ATTRIB_ARRAY_STRIDE=34340,T$Z.VERTEX_ATTRIB_ARRAY_TYPE=34341,T$Z.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,T$Z.VERTEX_ATTRIB_ARRAY_POINTER=34373,T$Z.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,T$Z.COMPILE_STATUS=35713,T$Z.LOW_FLOAT=36336,T$Z.MEDIUM_FLOAT=36337,T$Z.HIGH_FLOAT=36338,T$Z.LOW_INT=36339,T$Z.MEDIUM_INT=36340,T$Z.HIGH_INT=36341,T$Z.FRAMEBUFFER=36160,T$Z.RENDERBUFFER=36161,T$Z.RGBA4=32854,T$Z.RGB5_A1=32855,T$Z.RGB565=36194,T$Z.DEPTH_COMPONENT16=33189,T$Z.STENCIL_INDEX=6401,T$Z.STENCIL_INDEX8=36168,T$Z.DEPTH_STENCIL=34041,T$Z.RENDERBUFFER_WIDTH=36162,T$Z.RENDERBUFFER_HEIGHT=36163,T$Z.RENDERBUFFER_INTERNAL_FORMAT=36164,T$Z.RENDERBUFFER_RED_SIZE=36176,T$Z.RENDERBUFFER_GREEN_SIZE=36177,T$Z.RENDERBUFFER_BLUE_SIZE=36178,T$Z.RENDERBUFFER_ALPHA_SIZE=36179,T$Z.RENDERBUFFER_DEPTH_SIZE=36180,T$Z.RENDERBUFFER_STENCIL_SIZE=36181,T$Z.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,T$Z.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,T$Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,T$Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,T$Z.COLOR_ATTACHMENT0=36064,T$Z.DEPTH_ATTACHMENT=36096,T$Z.STENCIL_ATTACHMENT=36128,T$Z.DEPTH_STENCIL_ATTACHMENT=33306,T$Z.NONE=0,T$Z.FRAMEBUFFER_COMPLETE=36053,T$Z.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,T$Z.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,T$Z.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,T$Z.FRAMEBUFFER_UNSUPPORTED=36061,T$Z.FRAMEBUFFER_BINDING=36006,T$Z.RENDERBUFFER_BINDING=36007,T$Z.MAX_RENDERBUFFER_SIZE=34024,T$Z.INVALID_FRAMEBUFFER_OPERATION=1286,T$Z.UNPACK_FLIP_Y_WEBGL=37440,T$Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,T$Z.CONTEXT_LOST_WEBGL=37442,T$Z.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,T$Z.BROWSER_DEFAULT_WEBGL=37444,T$Z._useProgram=null,T$Z._depthTest=!0,T$Z._depthMask=!0,T$Z._blend=!1,T$Z._cullFace=!1,T$Z.curBindTexTarget=null,T$Z.curBindTexValue=null,T$F(T$Z,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),T$Z}(),T$i$=function(T$$){function T$b(){T$b.__super.call(this)}T$o(T$b,"laya.webgl.display.GraphicsGL",T$x);var T$u=T$b.prototype;return T$u.setShader=function(T$$){this._saveToCmd(T$T.context._setShader,[T$$])},T$u.setIBVB=function(T$$,T$b,T$u,T$Z,T$E,T$r){this._saveToCmd(T$T.context._setIBVB,[T$$,T$b,T$u,T$Z,T$E,T$r])},T$u.drawParticle=function(T$$,T$b,T$u){var T$Z=T$P.createParticleTemplate2D(T$u);T$Z.x=T$$,T$Z.y=T$b,this._saveToCmd(T$T.context._drawParticle,[T$Z])},T$b}(),T$z$=function(T$$){var T$u;function T$m(T$$){this._x=0,this._y=0,this._id=++T$m._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,T$m.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=T$m.MAXCLIPRECT,this.mOutPoint,this._canvas=T$$,this._canvas._addReference(),T$m._contextcount++,T$T.isFlash?(this._ib=T$B$.create(35044),T$L$.fillIBQuadrangle(this._ib,16)):this._ib=T$B$.QuadrangleIB,this.clear()}T$o(T$m,"laya.webgl.canvas.WebGLContext2D",T$E);var T$b=T$m.prototype;return T$b.setIsMainContext=function(){this._isMain=!0},T$b.clearBG=function(T$$,T$b,T$u,T$Z){var T$E=T$S$.mainContext;T$E.clearColor(T$$,T$b,T$u,T$Z),T$E.clear(16384)},T$b._getSubmits=function(){return this._submits},T$b._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var T$$=0,T$b=this._submits._length;T$$<T$b;T$$++)this._submits[T$$].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},T$b.destroy=function(){--T$m._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=T$B$.QuadrangleIB&&this._ib.releaseResource()},T$b.clear=function(){this._submits||(this._other=T$u.DEFAULT,this._curMat=T$a.create(),this._vb=T$R$.create(-1),this._submits=[],this._save=[T$j.Create(this)],this._save.length=10,this._shader2D=new T$B,this._triangleMesh=T$k$.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=T$u.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=T$m.MAXCLIPRECT,this._curSubmit=T$r$.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=T$f.DEFAULT;for(var T$$=0,T$b=this._submits._length;T$$<T$b;T$$++)this._submits[T$$].releaseRender(),this._submits[T$$]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},T$b.size=function(T$$,T$b){if(this._width!=T$$||this._height!=T$b)if(0==T$$||0==T$b){0!=this._vb._byteLength&&(this._width=T$$,this._height=T$b,this._vb.clear(),this._vb.upload());for(var T$u=0,T$Z=this._submits._length;T$u<T$Z;T$u++)this._submits[T$u].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=T$$,this._height=T$b,this._targets&&this._targets.size(T$$,T$b),this._canvas.memorySize-=this._canvas.memorySize;0===T$$&&0===T$b&&this._releaseMem()},T$b._getTransformMatrix=function(){return this._curMat},T$b.translate=function(T$$,T$b){0===T$$&&0===T$b||(T$d.save(this),this._curMat.bTransform&&(T$h.save(this),this._curMat.transformPointN(T$t.TEMP.setTo(T$$,T$b)),T$$=T$t.TEMP.x,T$b=T$t.TEMP.y),this._x+=T$$,this._y+=T$b)},T$b.save=function(){this._save[this._save._length++]=T$j.Create(this)},T$b.restore=function(){var T$$=this._save._length;if(!(T$$<1))for(var T$b=T$$-1;0<=T$b;T$b--){var T$u=this._save[T$b];if(T$u.restore(this),T$u.isSaveMark())return void(this._save._length=T$b)}},T$b._fillText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){void 0===T$H&&(T$H=0);var T$w=this._shader2D,T$I=this._curSubmit.shaderValue,T$o=T$E?T$D$.create(T$E):this._other.font;if(T$n.enabled)T$w.ALPHA!==T$I.ALPHA&&(T$w.glTexture=null),T$N$.drawText(this,T$$,T$b,this._curMat,T$o,T$g||this._other.textAlign,T$r,T$F,T$x,T$u,T$Z,T$H);else{this._shader2D.defines.getValue();var T$N=T$r?T$D.create(T$r)._color:T$w.colorAdd;T$w.ALPHA===T$I.ALPHA&&T$N===T$w.colorAdd&&T$I.colorAdd===T$w.colorAdd||(T$w.glTexture=null,T$w.colorAdd=T$N),T$N$.drawText(this,T$$,T$b,this._curMat,T$o,T$g||this._other.textAlign,T$r,T$F,T$x,T$u,T$Z,T$H)}},T$b.fillWords=function(T$$,T$b,T$u,T$Z,T$E,T$r){this._fillText(null,T$$,T$b,T$u,T$Z,T$E,null,-1,null,T$r)},T$b.fillBorderWords=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this._fillBorderText(null,T$$,T$b,T$u,T$Z,T$E,T$r,T$F,null)},T$b.fillText=function(T$$,T$b,T$u,T$Z,T$E,T$r){this._fillText(T$$,null,T$b,T$u,T$Z,T$E,null,-1,T$r)},T$b.strokeText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this._fillText(T$$,null,T$b,T$u,T$Z,null,T$E,T$r||1,T$F)},T$b.fillBorderText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){this._fillBorderText(T$$,null,T$b,T$u,T$Z,T$E,T$r,T$F,T$x)},T$b._fillBorderText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){if(!T$n.enabled)return this._fillText(T$$,T$b,T$u,T$Z,T$E,null,T$F,T$x||1,T$g),void this._fillText(T$$,T$b,T$u,T$Z,T$E,T$r,null,-1,T$g);var T$H=this._shader2D,T$w=this._curSubmit.shaderValue;T$H.ALPHA!==T$w.ALPHA&&(T$H.glTexture=null);var T$I=T$E?(T$m._fontTemp.setFont(T$E),T$m._fontTemp):this._other.font;T$N$.drawText(this,T$$,T$b,this._curMat,T$I,T$g||this._other.textAlign,T$r,T$F,T$x||1,T$u,T$Z,0)},T$b.fillRect=function(T$$,T$b,T$u,T$Z,T$E){var T$r=this._vb;if(T$L$.fillRectImgVb(T$r,this._clipRect,T$$,T$b,T$u,T$Z,T$k.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var T$F=this._shader2D.fillStyle;T$E&&(this._shader2D.fillStyle=T$f.create(T$E));var T$x=this._shader2D,T$g=this._curSubmit.shaderValue;if(T$x.fillStyle!==T$g.fillStyle||T$x.ALPHA!==T$g.ALPHA){T$x.glTexture=null;var T$H=this._curSubmit=T$r$.createSubmit(this,this._ib,T$r,(T$r._byteLength-64)/32*3,T$q$.create(2,0));T$H.shaderValue.color=T$x.fillStyle._color._color,T$H.shaderValue.ALPHA=T$x.ALPHA,this._submits[this._submits._length++]=T$H}this._curSubmit._numEle+=6,this._shader2D.fillStyle=T$F}},T$b.fillTexture=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){if(T$$.loaded&&T$$.bitmap&&T$$.source){var T$g=this._vb,T$H=T$$.bitmap.width,T$w=T$$.bitmap.height,T$I=T$$.uv,T$o=T$F.x%T$$.width,T$N=T$F.y%T$$.height;if(T$H!=T$x.w||T$w!=T$x.h){if(!T$x.w&&!T$x.h)switch(T$x.oy=T$x.ox=0,T$r){case"repeat":T$x.width=T$Z,T$x.height=T$E;break;case"repeat-x":T$x.width=T$Z,T$N<0?T$$.height+T$N>T$E?T$x.height=T$E:T$x.height=T$$.height+T$N:(T$x.oy=T$N,T$$.height+T$N>T$E?T$x.height=T$E-T$N:T$x.height=T$$.height);break;case"repeat-y":T$o<0?T$$.width+T$o>T$Z?T$x.width=T$Z:T$x.width=T$$.width+T$o:(T$x.ox=T$o,T$$.width+T$o>T$Z?T$x.width=T$Z-T$o:T$x.width=T$$.width),T$x.height=T$E;break;case"no-repeat":T$o<0?T$$.width+T$o>T$Z?T$x.width=T$Z:T$x.width=T$$.width+T$o:(T$x.ox=T$o,T$$.width+T$o>T$Z?T$x.width=T$Z-T$o:T$x.width=T$$.width),T$N<0?T$$.height+T$N>T$E?T$x.height=T$E:T$x.height=T$$.height+T$N:(T$x.oy=T$N,T$$.height+T$N>T$E?T$x.height=T$E-T$N:T$x.height=T$$.height);break;default:T$x.width=T$Z,T$x.height=T$E}T$x.w=T$H,T$x.h=T$w,T$x.uv=[0,0,T$x.width/T$H,0,T$x.width/T$H,T$x.height/T$w,0,T$x.height/T$w]}if(T$b+=T$x.ox,T$u+=T$x.oy,T$o-=T$x.ox,T$N-=T$x.oy,T$L$.fillRectImgVb(T$g,this._clipRect,T$b,T$u,T$x.width,T$x.height,T$x.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var T$D=T$Y$.create(this,this._ib,T$g,(T$g._byteLength-64)/32*3,T$q$.create(256,0)),T$e=(this._submits[this._submits._length++]=T$D).shaderValue;T$e.textureHost=T$$;var T$L=T$I[0]*T$H,T$T=T$I[1]*T$w,T$_=(T$I[2]-T$I[0])*T$H,T$y=(T$I[5]-T$I[3])*T$w,T$S=-T$o/T$H,T$P=-T$N/T$w;T$e.u_TexRange[0]=T$L/T$H,T$e.u_TexRange[1]=T$_/T$H,T$e.u_TexRange[2]=T$T/T$w,T$e.u_TexRange[3]=T$y/T$w,T$e.u_offset[0]=T$S,T$e.u_offset[1]=T$P,T$n.enabled&&!this._isMain&&T$D.addTexture(T$$,(T$g._byteLength>>2)-16),(this._curSubmit=T$D)._renderType=10017,T$D._numEle+=6}}else this.sprite&&T$i.timer.callLater(this,this._repaintSprite)},T$b.setShader=function(T$$){T$W.save(this,1048576,this._shader2D,!0),this._shader2D.shader=T$$},T$b.setFilters=function(T$$){T$W.save(this,2097152,this._shader2D,!0),this._shader2D.filters=T$$,this._curSubmit=T$r$.RENDERBASE,this._renderKey=0,this._drawCount++},T$b.drawTexture=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this._drawTextureM(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,null,1)},T$b.addTextureVb=function(T$$,T$b,T$u){var T$Z=this._curSubmit._vb||this._vb,T$E=T$Z._byteLength>>2;T$Z.byteLength=T$E+16<<2;for(var T$r=T$Z.getFloat32Array(),T$F=0;T$F<16;T$F+=4)T$r[T$E++]=T$$[T$F]+T$b,T$r[T$E++]=T$$[T$F+1]+T$u,T$r[T$E++]=T$$[T$F+2],T$r[T$E++]=T$$[T$F+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),T$Z._upload=!0},T$b.willDrawTexture=function(T$$,T$b){if(!(T$$.loaded&&T$$.bitmap&&T$$.source))return this.sprite&&T$i.timer.callLater(this,this._repaintSprite),0;var T$u=T$$.bitmap,T$Z=T$u.id+this._shader2D.ALPHA*T$b+10016;if(T$Z==this._renderKey)return T$Z;var T$E=this._shader2D,T$r=T$E.ALPHA,T$F=this._curSubmit.shaderValue;T$E.ALPHA*=T$b,this._renderKey=T$Z,this._drawCount++,T$E.glTexture=T$u;var T$x=this._vb,T$g=null,T$H=T$x._byteLength/32*3,T$w=T$F.textureHost&&T$F.textureHost==T$$&&T$F.textureHost.alphaTexture==T$$.alphaTexture;return T$g=T$Y$.create(this,this._ib,T$x,T$H,T$q$.create(1,0)),(this._submits[this._submits._length++]=T$g).shaderValue.textureHost=T$$,T$g._renderType=10016,T$g._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$E.ALPHA===T$F.ALPHA&&T$w,this._curSubmit=T$g,T$E.ALPHA=T$r,T$Z},T$b.drawTextures=function(T$$,T$b,T$u,T$Z){if(T$$.loaded&&T$$.bitmap&&T$$.source){var T$E=this._clipRect;if(this._clipRect=T$m.MAXCLIPRECT,this._drawTextureM(T$$,T$b[0],T$b[1],T$$.width,T$$.height,T$u,T$Z,null,1)){if(this._clipRect=T$E,T$V.drawCall++,!(T$b.length<4)){for(var T$r=this._curSubmit._vb||this._vb,T$F=this._curMat.a,T$x=this._curMat.d,T$g=2,T$H=T$b.length;T$g<T$H;T$g+=2)T$L$.copyPreImgVb(T$r,(T$b[T$g]-T$b[T$g-2])*T$F,(T$b[T$g+1]-T$b[T$g-1])*T$x),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&T$i.timer.callLater(this,this._repaintSprite)},T$b._drawTextureM=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){if(!T$$.loaded||!T$$.source)return this.sprite&&T$i.timer.callLater(this,this._repaintSprite),!1;var T$H=this._curSubmit._vb||this._vb,T$w=T$$.bitmap;T$b+=T$r,T$u+=T$F,this._drawCount++;var T$I=T$w.id+this._shader2D.ALPHA*T$g+10016;if(T$I!=this._renderKey){this._renderKey=T$I;var T$o=this._curSubmit.shaderValue,T$N=this._shader2D,T$D=T$N.ALPHA;T$N.ALPHA*=T$g,T$N.glTexture=T$w;var T$e=this._vb,T$L=null,T$T=T$e._byteLength/32*3,T$_=T$o.textureHost&&T$o.textureHost==T$$&&T$o.textureHost.alphaTexture==T$$.alphaTexture;T$L=T$Y$.create(this,this._ib,T$e,T$T,T$q$.create(1,0)),(this._submits[this._submits._length++]=T$L).shaderValue.textureHost=T$$,T$L._renderType=10016,T$L._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$N.ALPHA===T$o.ALPHA&&T$_,this._curSubmit=T$L,T$H=this._curSubmit._vb||this._vb,T$N.ALPHA=T$D}return!!T$L$.fillRectImgVb(T$H,this._clipRect,T$b,T$u,T$Z||T$$.width,T$E||T$$.height,T$$.uv,T$x||this._curMat,this._x,this._y,0,0)&&(T$n.enabled&&!this._isMain&&this._curSubmit.addTexture(T$$,(T$H._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},T$b._repaintSprite=function(){this.sprite&&this.sprite.repaint()},T$b._drawText=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){var T$w=T$$.bitmap;this._drawCount++;var T$I=T$w.id+this._shader2D.ALPHA+10016;if(T$I!=this._renderKey){this._renderKey=T$I;var T$o=this._curSubmit.shaderValue,T$N=this._shader2D;T$N.glTexture=T$w;var T$D=this._vb,T$e=null,T$L=T$D._byteLength/32*3,T$T=T$o.textureHost&&T$o.textureHost==T$$&&T$o.textureHost.alphaTexture==T$$.alphaTexture;(T$e=T$n.enabled?T$Y$.create(this,this._ib,T$D,T$L,T$q$.create(1,0)):T$Y$.create(this,this._ib,T$D,T$L,T$d$.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&T$N.ALPHA===T$o.ALPHA&&T$T,(this._submits[this._submits._length++]=T$e).shaderValue.textureHost=T$$,T$e._renderType=10016,this._curSubmit=T$e}T$$.active();var T$_=this._curSubmit._vb||this._vb;T$L$.fillRectImgVb(T$_,this._clipRect,T$b+T$F,T$u+T$x,T$Z||T$$.width,T$E||T$$.height,T$$.uv,T$r||this._curMat,this._x,this._y,T$g,T$H,!0)&&(T$n.enabled&&!this._isMain&&this._curSubmit.addTexture(T$$,(T$_._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},T$b.drawTextureWithTransform=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){if(T$r){var T$H=this._curMat,T$w=this._x,T$I=this._y;(0!==T$F||0!==T$x)&&(this._x=T$F*T$H.a+T$x*T$H.c,this._y=T$x*T$H.d+T$F*T$H.b),T$r&&T$H.bTransform?(T$a.mul(T$r,T$H,T$m._tmpMatrix),(T$r=T$m._tmpMatrix)._checkTransform()):(this._x+=T$H.tx,this._y+=T$H.ty),this._drawTextureM(T$$,T$b,T$u,T$Z,T$E,0,0,T$r,T$g),this._x=T$w,this._y=T$I}else this._drawTextureM(T$$,T$b,T$u,T$Z,T$E,T$F,T$x,null,T$g)},T$b.fillQuadrangle=function(T$$,T$b,T$u,T$Z,T$E){var T$r=this._curSubmit,T$F=this._vb,T$x=this._shader2D,T$g=T$r.shaderValue;if(this._renderKey=0,T$$.bitmap){var T$H=T$$.bitmap;T$x.glTexture==T$H&&T$x.ALPHA===T$g.ALPHA||(T$x.glTexture=T$H,(T$r=this._curSubmit=T$r$.createSubmit(this,this._ib,T$F,T$F._byteLength/32*3,T$q$.create(1,0))).shaderValue.glTexture=T$H,this._submits[this._submits._length++]=T$r),T$L$.fillQuadrangleImgVb(T$F,T$b,T$u,T$Z,T$$.uv,T$E||this._curMat,this._x,this._y)}else T$r.shaderValue.fillStyle&&T$r.shaderValue.fillStyle.equal(T$$)&&T$x.ALPHA===T$g.ALPHA||(T$x.glTexture=null,(T$r=this._curSubmit=T$r$.createSubmit(this,this._ib,T$F,T$F._byteLength/32*3,T$q$.create(2,0))).shaderValue.defines.add(2),T$r.shaderValue.fillStyle=T$f.create(T$$),this._submits[this._submits._length++]=T$r),T$L$.fillQuadrangleImgVb(T$F,T$b,T$u,T$Z,T$k.DEF_UV,T$E||this._curMat,this._x,this._y);T$r._numEle+=6},T$b.drawTexture2=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){if(0!=T$r){var T$g=this._curMat;if(this._x=T$$*T$g.a+T$b*T$g.c,this._y=T$b*T$g.d+T$$*T$g.b,T$E&&(T$E=T$g.bTransform||T$E.bTransform?(T$a.mul(T$E,T$g,T$m._tmpMatrix),T$m._tmpMatrix):(this._x+=T$E.tx+T$g.tx,this._y+=T$E.ty+T$g.ty,T$a.EMPTY)),1!==T$r||T$F){var T$H=this._shader2D.ALPHA,T$w=this._nBlendType;this._shader2D.ALPHA=T$r,T$F&&(this._nBlendType=T$J.TOINT(T$F)),this._drawTextureM(T$x[0],T$x[1]-T$u,T$x[2]-T$Z,T$x[3],T$x[4],0,0,T$E,1),this._shader2D.ALPHA=T$H,this._nBlendType=T$w}else this._drawTextureM(T$x[0],T$x[1]-T$u,T$x[2]-T$Z,T$x[3],T$x[4],0,0,T$E,1);this._x=this._y=0}},T$b.drawCanvas=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$$.context;if(this._renderKey=0,T$r._targets)this._submits[this._submits._length++]=T$p$.create(T$r,0,null),this._curSubmit=T$r$.RENDERBASE,T$r._targets.drawTo(this,T$b,T$u,T$Z,T$E);else{var T$F=this._submits[this._submits._length++]=T$p$.create(T$r,this._shader2D.ALPHA,this._shader2D.filters),T$x=T$Z/T$$.width,T$g=T$E/T$$.height,T$H=T$F._matrix;this._curMat.copyTo(T$H),1!=T$x&&1!=T$g&&T$H.scale(T$x,T$g);var T$w=T$H.tx,T$I=T$H.ty;T$H.tx=T$H.ty=0,T$H.transformPoint(T$t.TEMP.setTo(T$b,T$u)),T$H.translate(T$t.TEMP.x+T$w,T$t.TEMP.y+T$I),this._curSubmit=T$r$.RENDERBASE}T$z.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=T$r._targets?"yellow":"green",this.strokeRect(T$b-1,T$u-1,T$Z+2,T$E+2,1),this.strokeRect(T$b,T$u,T$Z,T$E,1),this.restore())},T$b.drawTarget=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){void 0===T$H&&(T$H=-1);var T$w=this._vb;if(T$L$.fillRectImgVb(T$w,this._clipRect,T$b,T$u,T$Z,T$E,T$g||T$k.DEF_UV,T$r||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var T$I=this._curSubmit=T$I$.create(this,this._ib,T$w,(T$w._byteLength-64)/32*3,T$x,T$F);T$I.blendType=-1==T$H?this._nBlendType:T$H,T$I.scope=T$$,this._submits[this._submits._length++]=T$I,this._curSubmit._numEle+=6}},T$b.mixRGBandAlpha=function(T$$){return this._mixRGBandAlpha(T$$,this._shader2D.ALPHA)},T$b._mixRGBandAlpha=function(T$$,T$b){var T$u=(4278190080&T$$)>>>24;return 0!=T$u?T$u*=T$b:T$u=255*T$b,16777215&T$$|T$u<<24},T$b.drawTriangles=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){if(!T$$.loaded||!T$$.source)return this.sprite&&T$i.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;T$$.bitmap;var T$w=this._mixRGBandAlpha(4294967295,T$x),T$I=(T$Z.length,T$r.length);this._renderKey=-1;var T$o=this._curSubmit=T$Y$.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,T$q$.create(1,0));return T$o.shaderValue.textureHost=T$$,T$o._renderType=10016,this._submits[this._submits._length++]=T$o,T$F?(T$m._tmpMatrix.a=T$F.a,T$m._tmpMatrix.b=T$F.b,T$m._tmpMatrix.c=T$F.c,T$m._tmpMatrix.d=T$F.d,T$m._tmpMatrix.tx=T$F.tx+T$b,T$m._tmpMatrix.ty=T$F.ty+T$u,T$a.mul(T$m._tmpMatrix,this._curMat,T$m._tmpMatrix)):(T$m._tmpMatrix.a=this._curMat.a,T$m._tmpMatrix.b=this._curMat.b,T$m._tmpMatrix.c=this._curMat.c,T$m._tmpMatrix.d=this._curMat.d,T$m._tmpMatrix.tx=this._curMat.tx+T$b,T$m._tmpMatrix.ty=this._curMat.ty+T$u),this._triangleMesh.addData(T$Z,T$E,T$r,T$m._tmpMatrix,T$w,this),this._curSubmit._numEle+=T$I,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},T$b.transform=function(T$$,T$b,T$u,T$Z,T$E,T$r){T$h.save(this),T$a.mul(T$a.TEMP.setTo(T$$,T$b,T$u,T$Z,T$E,T$r),this._curMat,this._curMat),this._curMat._checkTransform()},T$b.setTransformByMatrix=function(T$$){T$$.copyTo(this._curMat)},T$b.transformByMatrix=function(T$$){T$h.save(this),T$a.mul(T$$,this._curMat,this._curMat),this._curMat._checkTransform()},T$b.rotate=function(T$$){T$h.save(this),this._curMat.rotateEx(T$$)},T$b.scale=function(T$$,T$b){T$h.save(this),this._curMat.scaleEx(T$$,T$b)},T$b.clipRect=function(T$$,T$b,T$u,T$Z){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var T$E=T$w$.create(4);this.addRenderObject(T$E);var T$r=this._vb,T$F=T$r._byteLength>>2;if(T$L$.fillRectImgVb(T$r,null,T$$,T$b,T$u,T$Z,T$k.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var T$x=this._curSubmit=T$r$.createSubmit(this,this._ib,T$r,(T$r._byteLength-64)/32*3,T$q$.create(2,0));T$x.shaderValue.ALPHA=1,this._submits[this._submits._length++]=T$x,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var T$g=T$w$.create(5);this.addRenderObject(T$g);var T$H=T$r.getFloat32Array(),T$w=Math.min(Math.min(Math.min(T$H[0+T$F],T$H[4+T$F]),T$H[8+T$F]),T$H[12+T$F]),T$I=Math.max(Math.max(Math.max(T$H[0+T$F],T$H[4+T$F]),T$H[8+T$F]),T$H[12+T$F]),T$o=Math.min(Math.min(Math.min(T$H[1+T$F],T$H[5+T$F]),T$H[9+T$F]),T$H[13+T$F]),T$N=Math.max(Math.max(Math.max(T$H[1+T$F],T$H[5+T$F]),T$H[9+T$F]),T$H[13+T$F]);T$A.save(this,T$g,T$$,T$b,T$u,T$Z,T$w,T$o,T$I-T$w,T$N-T$o),this._curSubmit=T$r$.RENDERBASE}else{T$u*=this._curMat.a,T$Z*=this._curMat.d;var T$D=T$t.TEMP;this._curMat.transformPoint(T$D.setTo(T$$,T$b)),T$u<0&&(T$D.x=T$D.x+T$u,T$u=-T$u),T$Z<0&&(T$D.y=T$D.y+T$Z,T$Z=-T$Z),this._renderKey=0;var T$e=this._curSubmit=T$H$.create(this);(this._submits[this._submits._length++]=T$e).submitIndex=this._submits._length,T$e.submitLength=9999999,T$G.save(this,T$e);var T$L=this._clipRect,T$T=T$L.x,T$_=T$L.y,T$y=T$D.x+T$u,T$S=T$D.y+T$Z;T$T<T$D.x&&(T$L.x=T$D.x),T$_<T$D.y&&(T$L.y=T$D.y),T$L.width=Math.min(T$y,T$T+T$L.width)-T$L.x,T$L.height=Math.min(T$S,T$_+T$L.height)-T$L.y,this._shader2D.glTexture=null,T$e.clipRect.copyFrom(T$L),this._curSubmit=T$r$.RENDERBASE}},T$b.setIBVB=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w){if(void 0===T$g&&(T$g=0),void 0===T$H&&(T$H=0),void 0===T$w&&(T$w=0),null===T$u){if(T$T.isFlash){var T$I=T$Z;T$I._selfIB||(T$I._selfIB=T$B$.create(35044)),T$I._selfIB.clear(),T$u=T$I._selfIB}else T$u=this._ib;T$L$.expandIBQuadrangle(T$u,T$Z._byteLength/(4*T$Z.vertexStride*4))}if(!T$x||!T$F)throw Error("setIBVB must input:shader shaderValues");var T$o=T$g$.create(this,T$Z,T$u,T$E,T$F,T$x,T$g,T$H,T$w);T$r||(T$r=T$a.EMPTY),T$r.translate(T$$,T$b),T$a.mul(T$r,this._curMat,T$o._mat),T$r.translate(-T$$,-T$b),this._submits[this._submits._length++]=T$o,this._curSubmit=T$r$.RENDERBASE,this._renderKey=0},T$b.addRenderObject=function(T$$){this._submits[this._submits._length++]=T$$},T$b.fillTrangles=function(T$$,T$b,T$u,T$Z,T$E){var T$r=this._curSubmit,T$F=this._vb,T$x=this._shader2D,T$g=T$r.shaderValue,T$H=T$Z.length>>4,T$w=T$$.bitmap;this._renderKey=0,T$x.glTexture==T$w&&T$x.ALPHA===T$g.ALPHA||((T$r=this._curSubmit=T$r$.createSubmit(this,this._ib,T$F,T$F._byteLength/32*3,T$q$.create(1,0))).shaderValue.textureHost=T$$,this._submits[this._submits._length++]=T$r),T$L$.fillTranglesVB(T$F,T$b,T$u,T$Z,T$E||this._curMat,this._x,this._y),T$r._numEle+=6*T$H},T$b.submitElement=function(T$$,T$b){var T$u=this._submits;for(T$b<0&&(T$b=T$u._length);T$$<T$b;)T$$+=T$u[T$$].renderSubmit()},T$b.finish=function(){T$S$.mainContext.finish()},T$b.flush=function(){var T$$=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(T$$>this._ib.bufferLength/12&&T$L$.expandIBQuadrangle(this._ib,T$$),!this._isMain&&T$n.enabled&&T$n._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=T$n._atlasRestore;for(var T$b=this._submits,T$u=0,T$Z=T$b._length;T$u<T$Z;T$u++){var T$E=T$b[T$u];10016===T$E.getRenderType()&&T$E.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),T$b$.instance&&T$b$.getInstance().reset();var T$r;for(T$u=0,T$r=this.meshlist.length;T$u<T$r;T$u++){var T$F=this.meshlist[T$u];T$F.canReuse?T$F.releaseMesh():T$F.destroy()}return this.meshlist.length=0,this._curSubmit=T$r$.RENDERBASE,this._renderKey=0,this._triangleMesh=T$k$.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},T$b.setPathId=function(T$$){if(this.mId=T$$,-1!=this.mId){this.mHaveKey=!1;var T$b=T$l.getInstance();T$b.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,T$b.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},T$b.movePath=function(T$$,T$b){var T$u=T$$,T$Z=T$b;T$$=this._curMat.a*T$u+this._curMat.c*T$Z+this._curMat.tx,T$b=this._curMat.b*T$u+this._curMat.d*T$Z+this._curMat.ty,this.mX+=T$$,this.mY+=T$b},T$b.beginPath=function(){var T$$=this._getPath();T$$.tempArray.length=0,T$$.closePath=!1,this.mX=0,this.mY=0},T$b.closePath=function(){this._path.closePath=!0},T$b.fill=function(T$$){void 0===T$$&&(T$$=!1);var T$b=this._getPath();this.drawPoly(0,0,T$b.tempArray,this.fillStyle._color.numColor,0,0,T$$)},T$b.stroke=function(){var T$$=this._getPath();if(0<this.lineWidth){if(-1==this.mId)T$$.drawLine(0,0,T$$.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var T$b=T$l.getInstance().shapeLineDic[this.mId];T$b.rebuild(T$$.tempArray),T$$.setGeomtry(T$b)}else T$l.getInstance().addLine(this.mId,T$$.drawLine(0,0,T$$.tempArray,this.lineWidth,this.strokeStyle._color.numColor));T$$.update();var T$u=[this.mX,this.mY],T$Z=T$r$.createShape(this,T$$.ib,T$$.vb,T$$.count,T$$.offset,T$q$.create(4,0));T$Z.shaderValue.ALPHA=this._shader2D.ALPHA,T$Z.shaderValue.u_pos=T$u,T$Z.shaderValue.u_mmat2=T$_$.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=T$Z,this._renderKey=-1}},T$b.line=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=this._curSubmit,T$x=this._vb;if(T$L$.fillLineVb(T$x,this._clipRect,T$$,T$b,T$u,T$Z,T$E,T$r)){this._renderKey=0;var T$g=this._shader2D,T$H=T$F.shaderValue;T$g.strokeStyle===T$H.strokeStyle&&T$g.ALPHA===T$H.ALPHA||(T$g.glTexture=null,(T$F=this._curSubmit=T$r$.createSubmit(this,this._ib,T$x,(T$x._byteLength-64)/32*3,T$q$.create(2,0))).shaderValue.strokeStyle=T$g.strokeStyle,T$F.shaderValue.mainID=2,T$F.shaderValue.ALPHA=T$g.ALPHA,this._submits[this._submits._length++]=T$F),T$F._numEle+=6}},T$b.moveTo=function(T$$,T$b,T$u){void 0===T$u&&(T$u=!0);var T$Z=this._getPath();if(T$u){var T$E=T$$,T$r=T$b;T$$=this._curMat.a*T$E+this._curMat.c*T$r,T$b=this._curMat.b*T$E+this._curMat.d*T$r}T$Z.addPoint(T$$,T$b)},T$b.lineTo=function(T$$,T$b,T$u){void 0===T$u&&(T$u=!0);var T$Z=this._getPath();if(T$u){var T$E=T$$,T$r=T$b;T$$=this._curMat.a*T$E+this._curMat.c*T$r,T$b=this._curMat.b*T$E+this._curMat.d*T$r}T$Z.addPoint(T$$,T$b)},T$b.drawCurves=function(T$$,T$b,T$u){this.setPathId(-1),this.beginPath(),this.strokeStyle=T$u[3],this.lineWidth=T$u[4];var T$Z=T$u[2];T$$+=T$u[0],T$b+=T$u[1],this.movePath(T$$,T$b),this.moveTo(T$Z[0],T$Z[1]);for(var T$E=2,T$r=T$Z.length;T$E<T$r;)this.quadraticCurveTo(T$Z[T$E++],T$Z[T$E++],T$Z[T$E++],T$Z[T$E++]);this.stroke()},T$b.arcTo=function(T$$,T$b,T$u,T$Z,T$E){if(-1==this.mId||!this.mHaveKey){var T$r=0,T$F=0,T$x=0,T$g=this._getPath();this._curMat.copyTo(T$m._tmpMatrix),T$m._tmpMatrix.tx=T$m._tmpMatrix.ty=0,T$m._tempPoint.setTo(T$g.getEndPointX(),T$g.getEndPointY()),T$m._tmpMatrix.invertTransformPoint(T$m._tempPoint);var T$H=T$m._tempPoint.x-T$$,T$w=T$m._tempPoint.y-T$b,T$I=Math.sqrt(T$H*T$H+T$w*T$w);if(!(T$I<=1e-6)){var T$o=T$H/T$I,T$N=T$w/T$I,T$D=T$u-T$$,T$e=T$Z-T$b,T$L=T$D*T$D+T$e*T$e,T$T=Math.sqrt(T$L);if(!(T$T<=1e-6)){var T$_=T$D/T$T,T$y=T$e/T$T,T$S=T$o+T$_,T$P=T$N+T$y,T$i=Math.sqrt(T$S*T$S+T$P*T$P);if(!(T$i<=1e-6)){var T$z=T$S/T$i,T$q=T$P/T$i,T$a=Math.acos(T$z*T$o+T$q*T$N),T$t=Math.PI/2-T$a,T$C=(T$I=T$E/Math.tan(T$t))*T$o+T$$,T$K=T$I*T$N+T$b,T$O=Math.sqrt(T$I*T$I+T$E*T$E),T$V=T$$+T$z*T$O,T$v=T$b+T$q*T$O,T$p=0,T$Y=0;if(0<=T$o*T$y-T$N*T$_){var T$k=2*T$t/T$m.SEGNUM;T$p=Math.sin(T$k),T$Y=Math.cos(T$k)}else T$k=2*-T$t/T$m.SEGNUM,T$p=Math.sin(T$k),T$Y=Math.cos(T$k);T$F=this._curMat.a*T$C+this._curMat.c*T$K,T$x=this._curMat.b*T$C+this._curMat.d*T$K,T$F==this._path.getEndPointX()&&T$x==this._path.getEndPointY()||T$g.addPoint(T$F,T$x);var T$M=T$C-T$V,T$l=T$K-T$v;for(T$r=0;T$r<T$m.SEGNUM;T$r++){var T$X=T$M*T$Y+T$l*T$p,T$s=-T$M*T$p+T$l*T$Y;T$F=T$X+T$V,T$x=T$s+T$v,T$$=this._curMat.a*T$F+this._curMat.c*T$x,T$x=T$b=this._curMat.b*T$F+this._curMat.d*T$x,(T$F=T$$)==this._path.getEndPointX()&&T$x==this._path.getEndPointY()||T$g.addPoint(T$F,T$x),T$M=T$X,T$l=T$s}}}}}},T$b.arc=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){if(void 0===T$r&&(T$r=!1),void 0===T$F&&(T$F=!0),-1!=this.mId){var T$x=T$l.getInstance().shapeDic[this.mId];if(T$x&&this.mHaveKey&&!T$x.needUpdate(this._curMat))return;T$b=T$$=0}var T$g,T$H=0,T$w=0,T$I=0,T$o=0,T$N=0,T$D=0,T$e=0;if(T$w=T$E-T$Z,T$r)if(Math.abs(T$w)>=2*Math.PI)T$w=2*-Math.PI;else for(;0<T$w;)T$w-=2*Math.PI;else if(Math.abs(T$w)>=2*Math.PI)T$w=2*Math.PI;else for(;T$w<0;)T$w+=2*Math.PI;T$g=T$w/(T$e=T$u<101?Math.max(10,T$w*T$u/5):T$u<201?Math.max(10,T$w*T$u/20):Math.max(10,T$w*T$u/40))/2,T$I=Math.abs(4/3*(1-Math.cos(T$g))/Math.sin(T$g)),T$r&&(T$I=-T$I);var T$L=this._getPath(),T$T=NaN,T$_=NaN;for(T$D=0;T$D<=T$e;T$D++)T$H=T$Z+T$w*(T$D/T$e),T$o=T$$+Math.cos(T$H)*T$u,T$N=T$b+Math.sin(T$H)*T$u,T$F&&(T$T=T$o,T$_=T$N,T$o=this._curMat.a*T$T+this._curMat.c*T$_,T$N=this._curMat.b*T$T+this._curMat.d*T$_),T$o==this._path.getEndPointX()&&T$N==this._path.getEndPointY()||T$L.addPoint(T$o,T$N);T$o=T$$+Math.cos(T$E)*T$u,T$N=T$b+Math.sin(T$E)*T$u,T$F&&(T$T=T$o,T$_=T$N,T$o=this._curMat.a*T$T+this._curMat.c*T$_,T$N=this._curMat.b*T$T+this._curMat.d*T$_),T$o==this._path.getEndPointX()&&T$N==this._path.getEndPointY()||T$L.addPoint(T$o,T$N)},T$b.quadraticCurveTo=function(T$$,T$b,T$u,T$Z){var T$E=T$I.I,T$r=T$u,T$F=T$Z;T$u=this._curMat.a*T$r+this._curMat.c*T$F,T$Z=this._curMat.b*T$r+this._curMat.d*T$F,T$r=T$$,T$F=T$b,T$$=this._curMat.a*T$r+this._curMat.c*T$F,T$b=this._curMat.b*T$r+this._curMat.d*T$F;for(var T$x=T$E.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),T$$,T$b,T$u,T$Z],30,2),T$g=0,T$H=T$x.length/2;T$g<T$H;T$g++)this.lineTo(T$x[2*T$g],T$x[2*T$g+1],!1);this.lineTo(T$u,T$Z,!1)},T$b.rect=function(T$$,T$b,T$u,T$Z){this._other=this._other.make(),this._other.path||(this._other.path=new T$Q),this._other.path.rect(T$$,T$b,T$u,T$Z)},T$b.strokeRect=function(T$$,T$b,T$u,T$Z,T$E){var T$r=.5*T$E;this.line(T$$-T$r,T$b,T$$+T$u+T$r,T$b,T$E,this._curMat),this.line(T$$+T$u,T$b,T$$+T$u,T$b+T$Z,T$E,this._curMat),this.line(T$$,T$b,T$$,T$b+T$Z,T$E,this._curMat),this.line(T$$-T$r,T$b+T$Z,T$$+T$u+T$r,T$b+T$Z,T$E,this._curMat)},T$b.clip=function(){},T$b.drawPoly=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){void 0===T$F&&(T$F=!1),this._renderKey=0,this._shader2D.glTexture=null;var T$x=this._getPath();if(-1==this.mId)T$x.polygon(T$$,T$b,T$u,T$Z,T$E||1,T$r);else if(this.mHaveKey){var T$g=T$l.getInstance().shapeDic[this.mId];T$g.setMatrix(this._curMat),T$g.rebuild(T$x.tempArray),T$x.setGeomtry(T$g)}else{var T$H=T$x.polygon(T$$,T$b,T$u,T$Z,T$E||1,T$r);T$l.getInstance().addShape(this.mId,T$H),T$H.setMatrix(this._curMat)}T$x.update();var T$w,T$I=[this.mX,this.mY];if((T$w=T$r$.createShape(this,T$x.ib,T$x.vb,T$x.count,T$x.offset,T$q$.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,T$w.shaderValue.u_pos=T$I,T$w.shaderValue.u_mmat2=T$_$.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=T$w,0<T$E){if(this.mHaveLineKey){var T$o=T$l.getInstance().shapeLineDic[this.mId];T$o.rebuild(T$x.tempArray),T$x.setGeomtry(T$o)}else T$l.getInstance().addShape(this.mId,T$x.drawLine(T$$,T$b,T$u,T$E,T$r));T$x.update(),(T$w=T$r$.createShape(this,T$x.ib,T$x.vb,T$x.count,T$x.offset,T$q$.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,T$w.shaderValue.u_mmat2=T$_$.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=T$w}},T$b.drawParticle=function(T$$,T$b,T$u){T$u.x=T$$,T$u.y=T$b,this._submits[this._submits._length++]=T$u},T$b._getPath=function(){return this._path||(this._path=new T$Q)},T$Z(0,T$b,"globalCompositeOperation",function(){return T$J.NAMES[this._nBlendType]},function(T$$){var T$b=T$J.TOINT[T$$];null==T$b||this._nBlendType===T$b||(T$W.save(this,65536,this,!0),this._curSubmit=T$r$.RENDERBASE,this._renderKey=0,this._nBlendType=T$b)}),T$Z(0,T$b,"strokeStyle",function(){return this._shader2D.strokeStyle},function(T$$){this._shader2D.strokeStyle.equal(T$$)||(T$W.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=T$f.create(T$$))}),T$Z(0,T$b,"globalAlpha",function(){return this._shader2D.ALPHA},function(T$$){(T$$=Math.floor(1e3*T$$)/1e3)!=this._shader2D.ALPHA&&(T$W.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=T$$)}),T$Z(0,T$b,"asBitmap",null,function(T$$){if(T$$){if(this._targets||(this._targets=new T$U),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),T$Z(0,T$b,"fillStyle",function(){return this._shader2D.fillStyle},function(T$$){this._shader2D.fillStyle.equal(T$$)||(T$W.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=T$f.create(T$$))}),T$Z(0,T$b,"textAlign",function(){return this._other.textAlign},function(T$$){this._other.textAlign===T$$||(this._other=this._other.make(),T$W.save(this,32768,this._other,!1),this._other.textAlign=T$$)}),T$Z(0,T$b,"lineWidth",function(){return this._other.lineWidth},function(T$$){this._other.lineWidth===T$$||(this._other=this._other.make(),T$W.save(this,256,this._other,!1),this._other.lineWidth=T$$)}),T$Z(0,T$b,"textBaseline",function(){return this._other.textBaseline},function(T$$){this._other.textBaseline===T$$||(this._other=this._other.make(),T$W.save(this,16384,this._other,!1),this._other.textBaseline=T$$)}),T$Z(0,T$b,"font",null,function(T$$){T$$!=this._other.font.toString()&&(this._other=this._other.make(),T$W.save(this,8,this._other,!1),this._other.font===T$D$.EMPTY?this._other.font=new T$D$(T$$):this._other.font.setFont(T$$))}),T$m.__init__=function(){T$u.DEFAULT=new T$u},T$m._tempPoint=new T$t,T$m._SUBMITVBSIZE=32e3,T$m._MAXSIZE=99999999,T$m._RECTVBSIZE=16,T$m.MAXCLIPRECT=new T$C(0,0,99999999,99999999),T$m._COUNT=0,T$m._tmpMatrix=new T$a,T$m.SEGNUM=32,T$m._contextcount=0,T$F(T$m,["_fontTemp",function(){return this._fontTemp=new T$D$},"_drawStyleTemp",function(){return this._drawStyleTemp=new T$f(null)}]),T$m.__init$=function(){T$u=function(){function T$$(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=T$D$.EMPTY}T$o(T$$,"");var T$b=T$$.prototype;return T$b.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=T$D$.EMPTY},T$b.make=function(){return this===T$$.DEFAULT?new T$$:this},T$$.DEFAULT=null,T$$}()},T$m}(),T$q$=function(T$$){function T$Z(T$$,T$b){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,T$Z.__super.call(this),this.defines=new T$K$,this.position=T$Z._POSITION,this.mainID=T$$,this.subID=T$b,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=T$$|T$b,this._inClassCache=T$Z._cache[this._cacheID],0<T$$&&!this._inClassCache&&(this._inClassCache=T$Z._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}T$o(T$Z,"laya.webgl.shader.d2.value.Value2D",T$s);var T$b=T$Z.prototype;return T$b.setValue=function(T$$){},T$b.refresh=function(){var T$$=this.size;return T$$[0]=T$_$.width,T$$[1]=T$_$.height,this.alpha=this.ALPHA*T$_$.worldAlpha,this.mmat=T$_$.worldMatrix4,this},T$b._ShaderWithCompile=function(){return T$j$.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,T$U$.create)},T$b._withWorldShaderDefines=function(){var T$$=T$_$.worldShaderDefines,T$b=T$j$.sharders[this.mainID|this.defines._value|T$$.getValue()];if(!T$b){var T$u,T$Z={};for(T$u in this.defines.toNameDic())T$Z[T$u]="";for(T$u in T$$.toNameDic())T$Z[T$u]="";T$b=T$j$.withCompile2D(0,this.mainID,T$Z,this.mainID|this.defines._value|T$$.getValue(),T$U$.create)}var T$E=T$_$.worldFilters;if(!T$E)return T$b;for(var T$r,T$F=T$E.length,T$x=0;T$x<T$F;T$x++)(T$r=T$E[T$x])&&T$r.action.setValue(this);return T$b},T$b.upload=function(){var T$$=T$_$;this.alpha=this.ALPHA*T$$.worldAlpha,T$_$.worldMatrix4!==T$_$.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),T$S$.shaderHighPrecision&&this.defines.add(1024);var T$b,T$u=T$$.worldShaderDefines?this._withWorldShaderDefines():T$j$.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=T$$.width,this.size[1]=T$$.height,this.mmat=T$$.worldMatrix4,T$M$.activeShader!==T$u?T$u._shaderValueWidth!==T$$.width||T$u._shaderValueHeight!==T$$.height?(T$u._shaderValueWidth=T$$.width,T$u._shaderValueHeight=T$$.height):T$b=T$u._params2dQuick2||T$u._make2dQuick2():T$u._shaderValueWidth!==T$$.width||T$u._shaderValueHeight!==T$$.height?(T$u._shaderValueWidth=T$$.width,T$u._shaderValueHeight=T$$.height):T$b=T$u._params2dQuick1||T$u._make2dQuick1(),T$u.upload(this,T$b)},T$b.setFilters=function(T$$){if(this.filters=T$$)for(var T$b,T$u=T$$.length,T$Z=0;T$Z<T$u;T$Z++)(T$b=T$$[T$Z])&&(this.defines.add(T$b.type),T$b.action.setValue(this))},T$b.clear=function(){this.defines.setValue(this.subID)},T$b.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},T$Z._initone=function(T$$,T$b){T$Z._typeClass[T$$]=T$b,T$Z._cache[T$$]=[],T$Z._cache[T$$]._length=0},T$Z.__init__=function(){T$Z._POSITION=[2,5126,!1,4*T$e$.BYTES_PE,0],T$Z._TEXCOORD=[2,5126,!1,4*T$e$.BYTES_PE,2*T$e$.BYTES_PE],T$Z._initone(2,T$m$),T$Z._initone(4,T$J$),T$Z._initone(256,T$n$),T$Z._initone(512,T$s$),T$Z._initone(1,T$c$),T$Z._initone(65,T$d$),T$Z._initone(9,T$c$)},T$Z.create=function(T$$,T$b){var T$u=T$Z._cache[T$$|T$b];return T$u._length?T$u[--T$u._length]:new T$Z._typeClass[T$$|T$b](T$b)},T$Z._POSITION=null,T$Z._TEXCOORD=null,T$Z._cache=[],T$Z._typeClass=[],T$Z.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T$Z}(),T$a$=function(T$$){function T$L(T$$,T$b){T$L.__super.call(this,T$$,T$b)}T$o(T$L,"laya.webgl.utils.RenderSprite3D",T$_);var T$b=T$L.prototype;return T$b.onCreate=function(T$$){switch(T$$){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},T$b._mask=function(T$$,T$b,T$u,T$Z){var T$E,T$r,T$F=this._next,T$x=T$$.mask;if(T$x){T$b.ctx.save();var T$g=T$b.ctx.globalCompositeOperation,T$H=new T$C;if(T$H.copyFrom(T$x.getBounds()),T$H.width=Math.round(T$H.width),T$H.height=Math.round(T$H.height),T$H.x=Math.round(T$H.x),T$H.y=Math.round(T$H.y),0<T$H.width&&0<T$H.height){var T$w=T$$._style._tf,T$I=T$x$.create();T$I.addValue("bounds",T$H),T$E=T$F$.create([T$I,T$b],laya.webgl.utils.RenderSprite3D.tmpTarget),T$b.addRenderObject(T$E),T$x.render(T$b,-T$H.x,-T$H.y),T$E=T$F$.create([T$I],laya.webgl.utils.RenderSprite3D.endTmpTarget),T$b.addRenderObject(T$E),T$b.ctx.save(),T$b.clipRect(T$u-T$w.translateX+T$H.x,T$Z-T$w.translateY+T$H.y,T$H.width,T$H.height),T$F._fun.call(T$F,T$$,T$b,T$u,T$Z),T$b.ctx.restore(),T$r=T$w$.create(6),T$g=T$b.ctx.globalCompositeOperation,T$r.blendMode="mask",T$b.addRenderObject(T$r),T$a.TEMP.identity();var T$o=T$q$.create(1,0),T$N=T$k.INV_UV,T$D=T$H.width,T$e=T$H.height;(T$H.width<32||T$H.height<32)&&((T$N=T$L.tempUV)[0]=0,T$N[1]=0,T$N[2]=32<=T$H.width?1:T$H.width/32,T$N[3]=0,T$N[4]=32<=T$H.width?1:T$H.width/32,T$N[5]=32<=T$H.height?1:T$H.height/32,T$N[6]=0,T$N[7]=32<=T$H.height?1:T$H.height/32,T$H.width=32<=T$H.width?T$H.width:32,T$H.height=32<=T$H.height?T$H.height:32,T$N[1]*=-1,T$N[3]*=-1,T$N[5]*=-1,T$N[7]*=-1,T$N[1]+=1,T$N[3]+=1,T$N[5]+=1,T$N[7]+=1),T$b.ctx.drawTarget(T$I,T$u+T$H.x-T$w.translateX,T$Z+T$H.y-T$w.translateY,T$D,T$e,T$a.TEMP,"tmpTarget",T$o,T$N,6),T$E=T$F$.create([T$I],laya.webgl.utils.RenderSprite3D.recycleTarget),T$b.addRenderObject(T$E),(T$r=T$w$.create(6)).blendMode=T$g,T$b.addRenderObject(T$r)}T$b.ctx.restore()}else T$F._fun.call(T$F,T$$,T$b,T$u,T$Z)},T$b._blend=function(T$$,T$b,T$u,T$Z){var T$E=T$$._style,T$r=this._next;T$E.blendMode?(T$b.ctx.save(),T$b.ctx.globalCompositeOperation=T$E.blendMode,T$r._fun.call(T$r,T$$,T$b,T$u,T$Z),T$b.ctx.restore()):T$r._fun.call(T$r,T$$,T$b,T$u,T$Z)},T$b._transform=function(T$$,T$b,T$u,T$Z){var T$E=T$$.transform,T$r=this._next;if(T$E&&T$r!=T$_.NORENDER){var T$F=T$b.ctx;T$$._style;T$E.tx=T$u,T$E.ty=T$Z;var T$x=T$F._getTransformMatrix(),T$g=T$x.clone();T$a.mul(T$E,T$x,T$x),T$x._checkTransform(),T$E.tx=T$E.ty=0,T$r._fun.call(T$r,T$$,T$b,0,0),T$g.copyTo(T$x),T$g.destroy()}else T$r._fun.call(T$r,T$$,T$b,T$u,T$Z)},T$L.tmpTarget=function(T$$,T$b){var T$u=T$$.getValue("bounds"),T$Z=T$l$.create(T$u.width,T$u.height);T$Z.start(),T$Z.clear(0,0,0,0),T$$.addValue("tmpTarget",T$Z)},T$L.endTmpTarget=function(T$$){T$$.getValue("tmpTarget").end()},T$L.recycleTarget=function(T$$){T$$.getValue("tmpTarget").recycle(),T$$.recycle()},T$F(T$L,["tempUV",function(){return this.tempUV=new Array(8)}]),T$L}(),T$t$=function(T$$){function T$b(){this.data=null,T$b.__super.call(this)}T$o(T$b,"laya.filters.webgl.ColorFilterActionGL",T$X);var T$u=T$b.prototype;return T$i.imps(T$u,{"laya.filters.IFilterActionGL":!0}),T$u.setValue=function(T$$){T$$.colorMat=this.data._mat,T$$.colorAlpha=this.data._alpha},T$u.apply3d=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$$.getValue("bounds"),T$F=T$q$.create(1,0);T$F.setFilters([this.data]);var T$x=T$a.TEMP;T$x.identity(),T$u.ctx.drawTarget(T$$,0,0,T$r.width,T$r.height,T$x,"src",T$F)},T$b}(),T$C$=function(T$$){function T$r(T$$,T$b,T$u,T$Z,T$E){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,T$r.__super.call(this,T$$,T$b,T$E),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new T$f$,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=T$u,this._atlasCanvas.height=T$Z,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}T$o(T$r,"laya.webgl.atlas.Atlaser",T$m);var T$b=T$r.prototype;return T$b.computeUVinAtlasTexture=function(T$$,T$b,T$u,T$Z){var T$E=T$n.atlasTextureWidth,T$r=T$n.atlasTextureHeight,T$F=T$u/T$E,T$x=T$Z/T$r,T$g=(T$u+T$$.bitmap.width)/T$E,T$H=(T$Z+T$$.bitmap.height)/T$r,T$w=T$$.bitmap.width/T$E,T$I=T$$.bitmap.height/T$r;T$$.uv=[T$F+T$b[0]*T$w,T$x+T$b[1]*T$I,T$g-(1-T$b[2])*T$w,T$x+T$b[3]*T$I,T$g-(1-T$b[4])*T$w,T$H-(1-T$b[5])*T$I,T$F+T$b[6]*T$w,T$H-(1-T$b[7])*T$I]},T$b.findBitmapIsExist=function(T$$){if(T$$ instanceof laya.webgl.resource.WebGLImage){var T$b=T$$,T$u=T$b.url,T$Z=this._InAtlasWebGLImagesKey[T$u||T$b.id];if(T$Z)return T$Z.offsetInfoID}return-1},T$b.addToAtlasTexture=function(T$$,T$b,T$u){if(T$$ instanceof laya.webgl.resource.WebGLImage){var T$Z=T$$,T$E=T$Z.url;this._InAtlasWebGLImagesKey[T$E||T$Z.id]={bitmap:T$$,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([T$b,T$u])}this._atlasCanvas.texSubImage2D(T$b,T$u,T$$.atlasSource),T$$.clearAtlasSource()},T$b.addToAtlas=function(T$$,T$b,T$u){T$$._atlasID=this._inAtlasTextureKey.length;var T$Z=T$$.uv.slice(),T$E=T$$.bitmap;this._inAtlasTextureKey.push(T$$),this._inAtlasTextureOriUVValue.push(T$Z),this._inAtlasTextureBitmapValue.push(T$E),this.computeUVinAtlasTexture(T$$,T$Z,T$b,T$u),T$$.bitmap=this._atlasCanvas},T$b.clear=function(){for(var T$$=0,T$b=this._inAtlasTextureKey.length;T$$<T$b;T$$++)this._inAtlasTextureKey[T$$].bitmap=this._inAtlasTextureBitmapValue[T$$],this._inAtlasTextureKey[T$$].uv=this._inAtlasTextureOriUVValue[T$$],this._inAtlasTextureKey[T$$]._atlasID=-1,this._inAtlasTextureKey[T$$].bitmap.lock=!1,this._inAtlasTextureKey[T$$].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},T$b.dispose=function(){this.clear(),this._atlasCanvas.destroy()},T$Z(0,T$b,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),T$Z(0,T$b,"texture",function(){return this._atlasCanvas}),T$Z(0,T$b,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),T$r}(),T$K$=function(T$$){function T$u(){T$u.__super.call(this,T$u.__name2int,T$u.__int2name,T$u.__int2nameMap)}return T$o(T$u,"laya.webgl.shader.d2.ShaderDefines2D",T$R),T$u.__init__=function(){T$u.reg("TEXTURE2D",1),T$u.reg("COLOR2D",2),T$u.reg("PRIMITIVE",4),T$u.reg("GLOW_FILTER",8),T$u.reg("BLUR_FILTER",16),T$u.reg("COLOR_FILTER",32),T$u.reg("COLOR_ADD",64),T$u.reg("WORLDMAT",128),T$u.reg("FILLTEXTURE",256),T$u.reg("FSHIGHPRECISION",1024),T$u.reg("TXTALPHA",2048),T$u.reg("TXTCOMPRESS",4096)},T$u.reg=function(T$$,T$b){T$R._reg(T$$,T$b,T$u.__name2int,T$u.__int2name)},T$u.toText=function(T$$,T$b,T$u){return T$R._toText(T$$,T$b,T$u)},T$u.toInt=function(T$$){return T$R._toInt(T$$,T$u.__name2int)},T$u.TEXTURE2D=1,T$u.COLOR2D=2,T$u.PRIMITIVE=4,T$u.FILTERGLOW=8,T$u.FILTERBLUR=16,T$u.FILTERCOLOR=32,T$u.COLORADD=64,T$u.WORLDMAT=128,T$u.FILLTEXTURE=256,T$u.SKINMESH=512,T$u.SHADERDEFINE_FSHIGHPRECISION=1024,T$u.TXTALPHA=2048,T$u.TXTCOMPRESS=4096,T$u.__name2int={},T$u.__int2name=[],T$u.__int2nameMap=[],T$u}(),T$O$=(function(T$$){function T$x(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){T$x.__super.call(this,T$$,T$b,T$u,T$Z,40,T$E,T$r,T$F)}T$o(T$x,"laya.webgl.shapes.Ellipse",T$u$)}(),function(T$$){function T$r(T$$,T$b,T$u,T$Z,T$E){this._points=[],this.rebuild(T$u),T$r.__super.call(this,T$$,T$b,0,0,0,T$E,T$Z,T$E,0)}T$o(T$r,"laya.webgl.shapes.Line",T$u$);var T$b=T$r.prototype;return T$b.rebuild=function(T$$){var T$b=T$$.length;T$b!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(T$b/2-1)),this.mFloat32Array=new Float32Array(5*T$b)),this._points.length=0;for(var T$u=NaN,T$Z=NaN,T$E=-1,T$r=-1,T$F=T$$.length/2,T$x=0;T$x<T$F;T$x++)T$u=T$$[2*T$x],T$Z=T$$[2*T$x+1],(.01<Math.abs(T$E-T$u)||.01<Math.abs(T$r-T$Z))&&this._points.push(T$u,T$Z),T$E=T$u,T$r=T$Z},T$b.getData=function(T$$,T$b,T$u){var T$Z=[],T$E=[];0<this.borderWidth&&this.createLine2(this._points,T$Z,this.borderWidth,T$u,T$E,this._points.length/2),this.mUint16Array.set(T$Z,0),this.mFloat32Array.set(T$E,0),T$$.append(this.mUint16Array),T$b.append(this.mFloat32Array)},T$r}()),T$V$=function(T$$){function T$I(T$$,T$b,T$u,T$Z,T$E){this._points=[];for(var T$r=NaN,T$F=NaN,T$x=-1,T$g=-1,T$H=T$u.length/2-1,T$w=0;T$w<T$H;T$w++)T$r=T$u[2*T$w],T$F=T$u[2*T$w+1],(.01<Math.abs(T$x-T$r)||.01<Math.abs(T$g-T$F))&&this._points.push(T$r,T$F),T$x=T$r,T$g=T$F;T$r=T$u[2*T$H],T$F=T$u[2*T$H+1],T$x=this._points[0],T$g=this._points[1],(.01<Math.abs(T$x-T$r)||.01<Math.abs(T$g-T$F))&&this._points.push(T$r,T$F),T$I.__super.call(this,T$$,T$b,0,0,this._points.length/2,0,T$Z,T$E)}T$o(T$I,"laya.webgl.shapes.LoopLine",T$u$);var T$b=T$I.prototype;return T$b.getData=function(T$$,T$b,T$u){if(0<this.borderWidth){for(var T$Z=this.color,T$E=(T$Z>>16&255)/255,T$r=(T$Z>>8&255)/255,T$F=(255&T$Z)/255,T$x=[],T$g=0,T$H=0,T$w=[],T$I=Math.floor(this._points.length/2),T$o=0;T$o<T$I;T$o++)T$g=this._points[2*T$o],T$H=this._points[2*T$o+1],T$x.push(this.x+T$g,this.y+T$H,T$E,T$r,T$F);this.createLoopLine(T$x,T$w,this.borderWidth,T$u+T$x.length/5),T$$.append(new Uint16Array(T$w)),T$b.append(new Float32Array(T$x))}},T$b.createLoopLine=function(T$$,T$b,T$u,T$Z,T$E,T$r){T$$.length;var T$F=T$$.concat(),T$x=T$E||T$$,T$g=this.borderColor,T$H=(T$g>>16&255)/255,T$w=(T$g>>8&255)/255,T$I=(255&T$g)/255,T$o=[T$F[0],T$F[1]],T$N=[T$F[T$F.length-5],T$F[T$F.length-4]],T$D=T$N[0]+.5*(T$o[0]-T$N[0]),T$e=T$N[1]+.5*(T$o[1]-T$N[1]);T$F.unshift(T$D,T$e,0,0,0),T$F.push(T$D,T$e,0,0,0);var T$L,T$T,T$_,T$y,T$S,T$P,T$i,T$z,T$q,T$a,T$t,T$C,T$K,T$O,T$V,T$v,T$p,T$Y,T$k,T$M,T$l=T$F.length/5,T$X=T$Z,T$s=T$u/2;T$_=T$F[0],T$y=T$F[1],T$a=T$_-(T$S=T$F[5]),T$q=(T$q=-(T$y-(T$P=T$F[6])))/(T$M=Math.sqrt(T$q*T$q+T$a*T$a))*T$s,T$a=T$a/T$M*T$s,T$x.push(T$_-T$q,T$y-T$a,T$H,T$w,T$I,T$_+T$q,T$y+T$a,T$H,T$w,T$I);for(var T$m=1;T$m<T$l-1;T$m++)T$_=T$F[5*(T$m-1)],T$y=T$F[5*(T$m-1)+1],T$S=T$F[5*T$m],T$P=T$F[5*T$m+1],T$i=T$F[5*(T$m+1)],T$z=T$F[5*(T$m+1)+1],T$a=T$_-T$S,T$C=T$S-T$i,T$V=(-(T$q=(T$q=-(T$y-T$P))/(T$M=Math.sqrt(T$q*T$q+T$a*T$a))*T$s)+T$_)*(-(T$a=T$a/T$M*T$s)+T$P)-(-T$q+T$S)*(-T$a+T$y),T$Y=(-(T$t=(T$t=-(T$P-T$z))/(T$M=Math.sqrt(T$t*T$t+T$C*T$C))*T$s)+T$i)*(-(T$C=T$C/T$M*T$s)+T$P)-(-T$t+T$S)*(-T$C+T$z),T$k=(T$K=-T$a+T$y-(-T$a+T$P))*(T$p=-T$t+T$S-(-T$t+T$i))-(T$v=-T$C+T$z-(-T$C+T$P))*(T$O=-T$q+T$S-(-T$q+T$_)),Math.abs(T$k)<.1?(T$k+=10.1,T$x.push(T$S-T$q,T$P-T$a,T$H,T$w,T$I,T$S+T$q,T$P+T$a,T$H,T$w,T$I)):(((T$L=(T$O*T$Y-T$p*T$V)/T$k)-T$S)*(T$L-T$S)+((T$T=(T$v*T$V-T$K*T$Y)/T$k)-T$P)+(T$T-T$P),T$x.push(T$L,T$T,T$H,T$w,T$I,T$S-(T$L-T$S),T$P-(T$T-T$P),T$H,T$w,T$I));T$r&&(T$b=T$r);var T$n=this.edges+1;for(T$m=1;T$m<T$n;T$m++)T$b.push(T$X+2*(T$m-1),T$X+2*(T$m-1)+1,T$X+2*T$m+1,T$X+2*T$m+1,T$X+2*T$m,T$X+2*(T$m-1));return T$b.push(T$X+2*(T$m-1),T$X+2*(T$m-1)+1,T$X+1,T$X+1,T$X,T$X+2*(T$m-1)),T$x},T$I}(),T$v$=function(T$$){function T$F(T$$,T$b,T$u,T$Z,T$E,T$r){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=T$a.create(),this._points=T$u.slice(0,T$u.length),T$F.__super.call(this,T$$,T$b,0,0,this._points.length/2,T$Z,T$E,T$r)}T$o(T$F,"laya.webgl.shapes.Polygon",T$u$);var T$b=T$F.prototype;return T$b.rebuild=function(T$$){this._repaint||(this._points.length=0,this._points=this._points.concat(T$$))},T$b.setMatrix=function(T$$){T$$.copyTo(this._mat)},T$b.needUpdate=function(T$$){return this._repaint=this._mat.a==T$$.a&&this._mat.b==T$$.b&&this._mat.c==T$$.c&&this._mat.d==T$$.d&&this._mat.tx==T$$.tx&&this._mat.ty==T$$.ty,!this._repaint},T$b.getData=function(T$$,T$b,T$u){var T$Z,T$E=0,T$r=this._points,T$F=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=T$u){for(this._start=T$u,T$Z=[],T$F=this.earcutTriangles.length,T$E=0;T$E<T$F;T$E++)T$Z.push(this.earcutTriangles[T$E]+T$u);this.mUint16Array=new Uint16Array(T$Z)}}else{this._start=T$u,T$Z=[];var T$x=[],T$g=[],T$H=this.color,T$w=(T$H>>16&255)/255,T$I=(T$H>>8&255)/255,T$o=(255&T$H)/255;for(T$F=Math.floor(T$r.length/2),T$E=0;T$E<T$F;T$E++)T$x.push(this.x+T$r[2*T$E],this.y+T$r[2*T$E+1],T$w,T$I,T$o),T$g.push(this.x+T$r[2*T$E],this.y+T$r[2*T$E+1]);for(this.earcutTriangles=T$Z$.earcut(T$g,null,2),T$F=this.earcutTriangles.length,T$E=0;T$E<T$F;T$E++)T$Z.push(this.earcutTriangles[T$E]+T$u);this.mUint16Array=new Uint16Array(T$Z),this.mFloat32Array=new Float32Array(T$x)}T$$.append(this.mUint16Array),T$b.append(this.mFloat32Array)},T$F}(),T$p$=function(T$$){function T$r(){this._matrix=new T$a,this._matrix4=T$e$.defaultMatrix4.concat(),T$r.__super.call(this,1e4),this.shaderValue=new T$q$(0,0)}T$o(T$r,"laya.webgl.submit.SubmitCanvas",T$r$);var T$b=T$r.prototype;return T$b.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var T$$=T$_$.worldAlpha,T$b=T$_$.worldMatrix4,T$u=T$_$.worldMatrix,T$Z=T$_$.worldFilters,T$E=T$_$.worldShaderDefines,T$r=this.shaderValue,T$F=this._matrix,T$x=this._matrix4,T$g=T$a.TEMP;return T$a.mul(T$F,T$u,T$g),T$x[0]=T$g.a,T$x[1]=T$g.b,T$x[4]=T$g.c,T$x[5]=T$g.d,T$x[12]=T$g.tx,T$x[13]=T$g.ty,T$_$.worldMatrix=T$g.clone(),T$_$.worldMatrix4=T$x,T$_$.worldAlpha=T$_$.worldAlpha*T$r.alpha,T$r.filters&&T$r.filters.length&&(T$_$.worldFilters=T$r.filters,T$_$.worldShaderDefines=T$r.defines),this._ctx_src.flush(),T$_$.worldAlpha=T$$,T$_$.worldMatrix4=T$b,T$_$.worldMatrix.destroy(),T$_$.worldMatrix=T$u,T$_$.worldFilters=T$Z,T$_$.worldShaderDefines=T$E,1},T$b.releaseRender=function(){var T$$=T$r._cache;this._ctx_src=null,T$$[T$$._length++]=this},T$b.getRenderType=function(){return 10003},T$r.create=function(T$$,T$b,T$u){var T$Z=T$r._cache._length?T$r._cache[--T$r._cache._length]:new T$r;T$Z._ctx_src=T$$;var T$E=T$Z.shaderValue;return T$E.alpha=T$b,T$E.defines.setValue(0),T$u&&T$u.length&&T$E.setFilters(T$u),T$Z},T$r._cache=((T$r._cache=[])._length=0,T$r._cache),T$r}(),T$Y$=function(T$$){function T$H(T$$){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===T$$&&(T$$=1e4),T$H.__super.call(this,T$$)}T$o(T$H,"laya.webgl.submit.SubmitTexture",T$r$);var T$b=T$H.prototype;return T$b.releaseRender=function(){var T$$=T$H._cache;(T$$[T$$._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},T$b.addTexture=function(T$$,T$b){this._texsID[this._texs.length]=T$$._uvID,this._texs.push(T$$),this._vbPos.push(T$b)},T$b.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var T$$=this.shaderValue.textureHost.bitmap;if(null!==T$$)for(var T$b=this._vb.getFloat32Array(),T$u=0,T$Z=this._texs.length;T$u<T$Z;T$u++){var T$E=this._texs[T$u];T$E.active();var T$r=T$E.uv;if(this._texsID[T$u]!==T$E._uvID){this._texsID[T$u]=T$E._uvID;var T$F=this._vbPos[T$u];T$b[T$F+2]=T$r[0],T$b[T$F+3]=T$r[1],T$b[T$F+6]=T$r[2],T$b[T$F+7]=T$r[3],T$b[T$F+10]=T$r[4],T$b[T$F+11]=T$r[5],T$b[T$F+14]=T$r[6],T$b[T$F+15]=T$r[7],this._vb.setNeedUpload()}T$E.bitmap!==T$$&&(this._isSameTexture=!1)}}},T$b.renderSubmit=function(){if(0===this._numEle)return T$H._shaderSet=!1,1;var T$$=this.shaderValue.textureHost;if(T$$){var T$b=T$$.source;if(!T$$.bitmap||!T$b)return T$H._shaderSet=!1,1;this.shaderValue.texture=T$b,T$$.alphaTexture&&T$$.alphaTexture.source&&(this.shaderValue.texture1=T$$.alphaTexture.source)}this._vb.bind_upload(this._ib);var T$u=T$S$.mainContext;if(T$J.activeBlendFunction!==this._blendFn&&(T$u.enable(3042),this._blendFn(T$u),T$J.activeBlendFunction=this._blendFn),T$V.drawCall++,T$V.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&T$M$.activeShader&&T$H._shaderSet?(T$M$.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&T$M$.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),T$H._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var T$Z=T$$.bitmap,T$E=0,T$r=T$M$.activeShader,T$F=0,T$x=this._texs.length;T$F<T$x;T$F++){var T$g=this._texs[T$F];T$g.bitmap===T$Z&&T$F+1!==T$x||(T$r.uploadTexture2D(T$g.source),T$u.drawElements(4,6*(T$F-T$E+1),5123,this._startIdx+6*T$E*T$e$.BYTES_PIDX),T$Z=T$g.bitmap,T$E=T$F)}else T$u.drawElements(4,this._numEle,5123,this._startIdx);return 1},T$H.create=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$H._cache._length?T$H._cache[--T$H._cache._length]:new T$H;null==T$u&&((T$u=T$r._selfVb||(T$r._selfVb=T$R$.create(-1))).clear(),T$Z=0),T$r._ib=T$b,T$r._vb=T$u,T$r._startIdx=T$Z*T$e$.BYTES_PIDX,T$r._numEle=0;var T$F=T$$._nBlendType;T$r._blendFn=T$$._targets?T$J.targetFns[T$F]:T$J.fns[T$F],T$r.shaderValue=T$E,T$r.shaderValue.setValue(T$$._shader2D);var T$x=T$$._shader2D.filters;return T$x&&T$r.shaderValue.setFilters(T$x),T$r},T$H._cache=((T$H._cache=[])._length=0,T$H._cache),T$H._shaderSet=!0,T$H}(),T$k$=function(T$$){function T$T(){T$T.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}T$o(T$T,"laya.webgl.utils.MeshTexture",T$T$);var T$b=T$T.prototype;return T$b.addData=function(T$$,T$b,T$u,T$Z,T$E,T$r){for(var T$F=T$$.length/2,T$x=this._vb.needSize(T$F*T$T.const_stride)>>2,T$g=this._vb.getFloat32Array(),T$H=0,T$w=0;T$w<T$F;T$w++){var T$I=T$$[T$H],T$o=T$$[T$H+1],T$N=T$I*T$Z.a+T$o*T$Z.c+T$Z.tx,T$D=T$I*T$Z.b+T$o*T$Z.d+T$Z.ty;T$g[T$x++]=T$N,T$g[T$x++]=T$D,T$g[T$x++]=T$b[T$H],T$g[T$x++]=T$b[T$H+1],T$H+=2}this._vb.setNeedUpload();var T$e=this.vertNum;if(0<T$e){(T$F=T$u.length)>T$T.tmpIdx.length&&(T$T.tmpIdx=new Uint16Array(T$F));for(var T$L=0;T$L<T$F;T$L++)T$T.tmpIdx[T$L]=T$u[T$L]+T$e;this._ib.appendU16Array(T$T.tmpIdx,T$u.length)}else this._ib.append(T$u);this._ib.setNeedUpload(),this.vertNum+=T$F,this.indexNum+=T$u.length},T$b.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},T$b.destroy=function(){this._ib.destroy(),this._vb.destroy()},T$T.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new T$T},T$T.const_stride=16,T$T._POOL=[],T$F(T$T,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),T$T}(),T$M$=function(T$$){function T$b(){T$b.__super.call(this),this.lock=!0}return T$o(T$b,"laya.webgl.shader.BaseShader",T$y),T$b.activeShader=null,T$b.bindShader=null,T$b}(),T$l$=function(T$b){function T$w(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===T$u&&(T$u=6408),void 0===T$Z&&(T$Z=5121),void 0===T$E&&(T$E=34041),void 0===T$r&&(T$r=!1),void 0===T$F&&(T$F=!1),void 0===T$x&&(T$x=-1),void 0===T$g&&(T$g=-1),this._type=1,this._w=T$$,this._h=T$b,this._surfaceFormat=T$u,this._surfaceType=T$Z,this._depthStencilFormat=T$E,T$T.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=T$r,this._repeat=T$F,this._minFifter=T$x,this._magFifter=T$g,this._createWebGLRenderTarget(),this.bitmap.lock=!0,T$w.__super.call(this,this.bitmap,T$k.INV_UV)}T$o(T$w,"laya.webgl.resource.RenderTarget2D",T$b);var T$$=T$w.prototype;return T$i.imps(T$$,{"laya.resource.IDispose":!0}),T$$.getType=function(){return this._type},T$$.getTexture=function(){return this},T$$.size=function(T$$,T$b){this._w==T$$&&this._h==T$b||(this._w=T$$,this._h=T$b,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},T$$.release=function(){this.destroy()},T$$.recycle=function(){T$w.POOL.push(this)},T$$.start=function(){var T$$=T$S$.mainContext;return this._preRenderTarget=T$_$.curRenderTarget,T$_$.curRenderTarget=this,T$$.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(T$$.viewport(0,0,this._w,this._h),this._svWidth=T$_$.width,this._svHeight=T$_$.height,T$_$.width=this._w,T$_$.height=this._h,T$M$.activeShader=null),this},T$$.clear=function(T$$,T$b,T$u,T$Z){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=1);var T$E=T$S$.mainContext;T$E.clearColor(T$$,T$b,T$u,T$Z);var T$r=16384;switch(this._depthStencilFormat){case 33189:T$r|=256;break;case 36168:T$r|=1024;break;case 34041:T$r|=256,T$r|=1024}T$E.clear(T$r)},T$$.end=function(){var T$$=T$S$.mainContext;T$$.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,T$_$.curRenderTarget=this._preRenderTarget,1==this._type?(T$$.viewport(0,0,this._svWidth,this._svHeight),T$_$.width=this._svWidth,T$_$.height=this._svHeight,T$M$.activeShader=null):T$$.viewport(0,0,T$i.stage.width,T$i.stage.height)},T$$.getData=function(T$$,T$b,T$u,T$Z){var T$E=T$S$.mainContext;if(T$E.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===T$E.checkFramebufferStatus(36160)))return T$E.bindFramebuffer(36160,null),null;var T$r=new Uint8Array(this._w*this._h*4);return T$E.readPixels(T$$,T$b,T$u,T$Z,this._surfaceFormat,this._surfaceType,T$r),T$E.bindFramebuffer(36160,null),T$r},T$$.destroy=function(T$$){void 0===T$$&&(T$$=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,T$b.prototype.destroy.call(this))},T$$.dispose=function(){},T$$._createWebGLRenderTarget=function(){this.bitmap=new T$G$(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(T$$){this.event("recovered")})},T$Z(0,T$$,"surfaceFormat",function(){return this._surfaceFormat}),T$Z(0,T$$,"magFifter",function(){return this._magFifter}),T$Z(0,T$$,"surfaceType",function(){return this._surfaceType}),T$Z(0,T$$,"mipMap",function(){return this._mipMap}),T$Z(0,T$$,"depthStencilFormat",function(){return this._depthStencilFormat}),T$Z(0,T$$,"minFifter",function(){return this._minFifter}),T$Z(0,T$$,"source",function(){return this._alreadyResolved?T$i.superGet(T$k,this,"source"):null}),T$w.create=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){void 0===T$u&&(T$u=6408),void 0===T$Z&&(T$Z=5121),void 0===T$E&&(T$E=34041),void 0===T$r&&(T$r=!1),void 0===T$F&&(T$F=!1),void 0===T$x&&(T$x=-1),void 0===T$g&&(T$g=-1);var T$H=T$w.POOL.pop();return T$H||(T$H=new T$w(T$$,T$b)),T$H.bitmap&&T$H._w==T$$&&T$H._h==T$b&&T$H._surfaceFormat==T$u&&T$H._surfaceType==T$Z&&T$H._depthStencilFormat==T$E&&T$H._mipMap==T$r&&T$H._repeat==T$F&&T$H._minFifter==T$x&&T$H._magFifter==T$g||(T$H._w=T$$,T$H._h=T$b,T$H._surfaceFormat=T$u,T$H._surfaceType=T$Z,T$H._depthStencilFormat=T$E,T$T.isConchWebGL&&34041===T$H._depthStencilFormat&&(T$H._depthStencilFormat=33189),T$H._mipMap=T$r,T$H._repeat=T$F,T$H._minFifter=T$x,T$H._magFifter=T$g,T$H.release(),T$H._createWebGLRenderTarget()),T$H},T$w.TYPE2D=1,T$w.TYPE3D=2,T$w.POOL=[],T$w}(T$k),T$X$=function(T$$){function T$b(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,T$b.__super.call(this),T$b._gl=T$S$.mainContext}T$o(T$b,"laya.webgl.utils.Buffer",T$y);var T$u=T$b.prototype;return T$u._bind=function(){this.activeResource(),T$b._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(T$b._bindVertexBuffer=this._glBuffer),T$b._gl.bindBuffer(this._bufferType,T$b._bindActive[this._bufferType]=this._glBuffer),T$M$.activeShader=null)},T$u.recreateResource=function(){this._glBuffer||(this._glBuffer=T$b._gl.createBuffer()),this.completeCreate()},T$u.disposeResource=function(){this._glBuffer&&(T$S$.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},T$Z(0,T$u,"bufferUsage",function(){return this._bufferUsage}),T$b._gl=null,T$b._bindActive={},T$b._bindVertexBuffer=null,T$b._enableAtributes=[],T$b}(),T$s$=function(T$$){function T$u(T$$){this.texcoord=null,this.offsetX=300,this.offsetY=0,T$u.__super.call(this,512,0);var T$b=8*T$e$.BYTES_PE;this.position=[2,5126,!1,T$b,0],this.texcoord=[2,5126,!1,T$b,2*T$e$.BYTES_PE],this.color=[4,5126,!1,T$b,4*T$e$.BYTES_PE]}return T$o(T$u,"laya.webgl.shader.d2.skinAnishader.SkinSV",T$q$),T$u}(),T$m$=function(T$$){function T$b(T$$){T$b.__super.call(this,2,0),this.color=[]}return T$o(T$b,"laya.webgl.shader.d2.value.Color2dSV",T$q$),T$b.prototype.setValue=function(T$$){T$$.fillStyle&&(this.color=T$$.fillStyle._color._color),T$$.strokeStyle&&(this.color=T$$.strokeStyle._color._color)},T$b}(),T$n$=function(T$$){function T$b(T$$){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=T$q$._TEXCOORD,T$b.__super.call(this,256,0)}T$o(T$b,"laya.webgl.shader.d2.value.FillTextureSV",T$q$);var T$u=T$b.prototype;return T$u.setValue=function(T$$){this.ALPHA=T$$.ALPHA,T$$.filters&&this.setFilters(T$$.filters)},T$u.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},T$b}(),T$c$=function(T$$){function T$b(T$$){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=T$q$._TEXCOORD,void 0===T$$&&(T$$=0),T$b.__super.call(this,1,T$$)}T$o(T$b,"laya.webgl.shader.d2.value.TextureSV",T$q$);var T$u=T$b.prototype;return T$u.setValue=function(T$$){this.ALPHA=T$$.ALPHA,T$$.filters&&this.setFilters(T$$.filters)},T$u.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},T$b}(),T$J$=function(T$$){function T$b(T$$){this.a_color=null,this.u_pos=[0,0],T$b.__super.call(this,4,0),this.position=[2,5126,!1,5*T$e$.BYTES_PE,0],this.a_color=[3,5126,!1,5*T$e$.BYTES_PE,2*T$e$.BYTES_PE]}return T$o(T$b,"laya.webgl.shader.d2.value.PrimitiveSV",T$q$),T$b}(),T$f$=function(T$$){function T$b(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,T$b.__super.call(this)}T$o(T$b,"laya.webgl.atlas.AtlasWebGLCanvas",T$$);var T$u=T$b.prototype;return T$u.recreateResource=function(){var T$$=T$S$.mainContext,T$b=this._source=T$$.createTexture(),T$u=T$P$.curBindTexTarget,T$Z=T$P$.curBindTexValue;T$P$.bindTexture(T$$,3553,T$b),T$$.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),T$$.texParameteri(3553,10241,9729),T$$.texParameteri(3553,10240,9729),T$$.texParameteri(3553,10242,33071),T$$.texParameteri(3553,10243,33071),T$u&&T$Z&&T$P$.bindTexture(T$$,T$u,T$Z),this.memorySize=this._w*this._h*4,this.completeCreate()},T$u.disposeResource=function(){this._source&&(T$S$.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},T$u.texSubImage2D=function(T$$,T$b,T$u){if(T$T.isFlash){this._flashCacheImage||(this._flashCacheImage=T$e.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var T$Z=T$u.bitmapdata;this._flashCacheImage._image.copyPixels(T$Z,0,0,T$Z.width,T$Z.height,T$$,T$b),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var T$E=T$S$.mainContext,T$r=T$P$.curBindTexTarget,T$F=T$P$.curBindTexValue;T$P$.bindTexture(T$E,3553,this._source),T$E.pixelStorei(37441,!0),0<=T$$-1&&T$E.texSubImage2D(3553,0,T$$-1,T$b,6408,5121,T$u),T$$+1<=this._w&&T$E.texSubImage2D(3553,0,T$$+1,T$b,6408,5121,T$u),0<=T$b-1&&T$E.texSubImage2D(3553,0,T$$,T$b-1,6408,5121,T$u),T$b+1<=this._h&&T$E.texSubImage2D(3553,0,T$$,T$b+1,6408,5121,T$u),T$E.texSubImage2D(3553,0,T$$,T$b,6408,5121,T$u),T$E.pixelStorei(37441,!1),T$r&&T$F&&T$P$.bindTexture(T$E,T$r,T$F)}},T$u.texSubImage2DPixel=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$S$.mainContext,T$F=T$P$.curBindTexTarget,T$x=T$P$.curBindTexValue;T$P$.bindTexture(T$r,3553,this._source);var T$g=new Uint8Array(T$E.data);T$r.pixelStorei(37441,!0),T$r.texSubImage2D(3553,0,T$$,T$b,T$u,T$Z,6408,5121,T$g),T$r.pixelStorei(37441,!1),T$F&&T$x&&T$P$.bindTexture(T$r,T$F,T$x)},T$Z(0,T$u,"width",T$$.prototype._$get_width,function(T$$){this._w=T$$}),T$Z(0,T$u,"height",T$$.prototype._$get_height,function(T$$){this._h=T$$}),T$b}(T$u),T$Q$=function(T$$){function T$E(){this.flipY=!0,this.alwaysChange=!1,T$E.__super.call(this)}T$o(T$E,"laya.webgl.resource.WebGLCanvas",T$u);var T$b=T$E.prototype;return T$b.getCanvas=function(){return this._canvas},T$b.clear=function(){this._ctx&&this._ctx.clear()},T$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},T$b._setContext=function(T$$){this._ctx=T$$},T$b.getContext=function(T$$,T$b){return this._ctx?this._ctx:this._ctx=T$E._createContext(this)},T$b.size=function(T$$,T$b){this._w==T$$&&this._h==T$b||(this._w=T$$,this._h=T$b,this._ctx&&this._ctx.size(T$$,T$b),this._canvas&&(this._canvas.height=T$b,this._canvas.width=T$$))},T$b.activeResource=function(T$$){void 0===T$$&&(T$$=!1),this._source||this.recreateResource()},T$b.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},T$b.disposeResource=function(){this._source&&!this.iscpuSource&&(T$S$.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},T$b.createWebGlTexture=function(){var T$$=T$S$.mainContext;this._canvas;var T$b=this._source=T$$.createTexture();this.iscpuSource=!1;var T$u=T$P$.curBindTexTarget,T$Z=T$P$.curBindTexValue;T$P$.bindTexture(T$$,3553,T$b),T$$.pixelStorei(37440,this.flipY?1:0),T$E.premulAlpha&&T$$.pixelStorei(37441,!0),T$$.texImage2D(3553,0,6408,6408,5121,this._imgData),T$E.premulAlpha&&T$$.pixelStorei(37441,!1),T$$.texParameteri(3553,10240,9729),T$$.texParameteri(3553,10241,9729),T$$.texParameteri(3553,10242,33071),T$$.texParameteri(3553,10243,33071),T$$.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,T$u&&T$Z&&T$P$.bindTexture(T$$,T$u,T$Z)},T$b.reloadCanvasData=function(){var T$$=T$S$.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var T$b=T$P$.curBindTexTarget,T$u=T$P$.curBindTexValue;T$P$.bindTexture(T$$,3553,this._source),T$E.premulAlpha&&T$$.pixelStorei(37441,!0),T$$.texImage2D(3553,0,6408,6408,5121,this._imgData),T$E.premulAlpha&&T$$.pixelStorei(37441,!1),T$$.pixelStorei(37440,0),T$b&&T$u&&T$P$.bindTexture(T$$,T$b,T$u)},T$b.texSubImage2D=function(T$$,T$b,T$u){var T$Z=T$S$.mainContext,T$E=T$P$.curBindTexTarget,T$r=T$P$.curBindTexValue;T$P$.bindTexture(T$Z,3553,this._source),T$Z.pixelStorei(37441,!0),T$Z.texSubImage2D(3553,0,T$b,T$u,6408,5121,T$$._source),T$Z.pixelStorei(37441,!1),T$E&&T$r&&T$P$.bindTexture(T$Z,T$E,T$r)},T$b.toBase64=function(T$$,T$b,T$u){var T$Z=null;this._canvas&&(T$Z=this._canvas.toDataURL(T$$,T$b)),T$u.call(this,T$Z)},T$Z(0,T$b,"context",function(){return this._ctx}),T$Z(0,T$b,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),T$Z(0,T$b,"asBitmap",null,function(T$$){this._ctx&&(this._ctx.asBitmap=T$$)}),T$E._createContext=null,T$E.premulAlpha=!1,T$E}(),T$W$=function(T$$){function T$r(T$$,T$b){this.CborderSize=12,T$r.__super.call(this),this.char=T$$,this.isSpace=" "===T$$,this.xs=T$b.scaleX,this.ys=T$b.scaleY,this.font=T$b.font.toString(),this.fontSize=T$b.font.size,this.fillColor=T$b.fillColor,this.borderColor=T$b.borderColor,this.lineWidth=T$b.lineWidth,this.underLine=T$b.underLine;var T$u,T$Z=T$T.isConchApp;T$Z?((T$u=ConchTextCanvas)._source=ConchTextCanvas,T$u._source.canvas=ConchTextCanvas):T$u=T$N.canvas.source,this.canvas=T$u,this._enableMerageInAtlas=!0,this._ctx=T$Z?T$u:this.canvas.getContext("2d",void 0);var T$E=T$M.measureText(this.char,this.font);this.cw=T$E.width*this.xs,this.ch=(T$E.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new T$k(this)}T$o(T$r,"laya.webgl.resource.WebGLCharImage",T$u);var T$b=T$r.prototype;return T$i.imps(T$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$b.active=function(){this.texture.active()},T$b.recreateResource=function(){var T$$=T$T.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),T$$){var T$b=this.fontSize;1==this.xs&&1==this.ys||(T$b=parseInt(T$b*(this.xs>this.ys?this.xs:this.ys)+""));var T$u="normal 100 "+this.font;T$u=T$u.replace(T$r._fontSizeReg,T$b),this.borderColor&&(T$u+=" 1 "+this.borderColor),this._ctx.font=T$u,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,T$Y.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var T$Z=this._ctx.measureText(this.char);T$Z||(T$Z={width:16});var T$E=T$Z.width+1;this._ctx.lineTo(T$E,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},T$b.onresize=function(T$$,T$b){this._w=T$$,this._h=T$b,this._allowMerageInAtlas=!0},T$b.clearAtlasSource=function(){},T$Z(0,T$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),T$Z(0,T$b,"atlasSource",function(){return this.canvas}),T$Z(0,T$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(T$$){this._enableMerageInAtlas=T$$}),T$r.createOneChar=function(T$$,T$b){return new T$r(T$$,T$b)},T$r._fontSizeReg=new RegExp("\\d+(?=px)","g"),T$r}(),T$G$=function(T$$){function T$H(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){void 0===T$u&&(T$u=6408),void 0===T$Z&&(T$Z=5121),void 0===T$E&&(T$E=34041),void 0===T$r&&(T$r=!1),void 0===T$F&&(T$F=!1),void 0===T$x&&(T$x=-1),void 0===T$g&&(T$g=1),T$H.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=T$$,this._h=T$b,this._surfaceFormat=T$u,this._surfaceType=T$Z,this._depthStencilFormat=T$E,this._mipMap=T$r,this._repeat=T$F,this._minFifter=T$x,this._magFifter=T$g}T$o(T$H,"laya.webgl.resource.WebGLRenderTarget",T$u);var T$b=T$H.prototype;return T$b.recreateResource=function(){var T$$=T$S$.mainContext;this._frameBuffer||(this._frameBuffer=T$$.createFramebuffer()),this._source||(this._source=T$$.createTexture());var T$b=T$P$.curBindTexTarget,T$u=T$P$.curBindTexValue;T$P$.bindTexture(T$$,3553,this._source),T$$.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var T$Z=this._minFifter,T$E=this._magFifter,T$r=this._repeat?10497:33071,T$F=T$w.isPOT(this._w,this._h);if(T$F?(this._mipMap?-1!==T$Z||(T$Z=9987):-1!==T$Z||(T$Z=9729),-1!==T$E||(T$E=9729),T$$.texParameteri(3553,10241,T$Z),T$$.texParameteri(3553,10240,T$E),T$$.texParameteri(3553,10242,T$r),T$$.texParameteri(3553,10243,T$r),this._mipMap&&T$$.generateMipmap(3553)):(-1!==T$Z||(T$Z=9729),-1!==T$E||(T$E=9729),T$$.texParameteri(3553,10241,T$Z),T$$.texParameteri(3553,10240,T$E),T$$.texParameteri(3553,10242,33071),T$$.texParameteri(3553,10243,33071)),T$$.bindFramebuffer(36160,this._frameBuffer),T$$.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=T$$.createRenderbuffer()),T$$.bindRenderbuffer(36161,this._depthStencilBuffer),T$$.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:T$$.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:T$$.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:T$$.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}T$$.bindFramebuffer(36160,null),T$b&&T$u&&T$P$.bindTexture(T$$,T$b,T$u),T$$.bindRenderbuffer(36161,null),T$F&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},T$b.disposeResource=function(){this._frameBuffer&&(T$S$.mainContext.deleteTexture(this._source),T$S$.mainContext.deleteFramebuffer(this._frameBuffer),T$S$.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},T$Z(0,T$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),T$Z(0,T$b,"frameBuffer",function(){return this._frameBuffer}),T$H}(),T$A$=function(T$$){function T$x(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this.offsetX=0,this.offsetY=0,T$x.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=T$r,this.canvas=T$$,this._ctx=T$$.getContext("2d",void 0),this._w=T$Z,this._h=T$E,this.offsetX=T$b,this.offsetY=T$u,this.src=T$F,this._enableMerageInAtlas=!0,T$n.enabled&&this._w<T$n.atlasLimitWidth&&this._h<T$n.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}T$o(T$x,"laya.webgl.resource.WebGLSubImage",T$u);var T$b=T$x.prototype;return T$i.imps(T$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$b.size=function(T$$,T$b){this._w=T$$,this._h=T$b,this._ctx&&this._ctx.size(T$$,T$b),this.canvas&&(this.canvas.height=T$b,this.canvas.width=T$$)},T$b.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},T$b.createWebGlTexture=function(){var T$$=T$S$.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var T$b=this._source=T$$.createTexture(),T$u=T$P$.curBindTexTarget,T$Z=T$P$.curBindTexValue;T$P$.bindTexture(T$$,3553,T$b),T$$.pixelStorei(37441,!0),T$$.texImage2D(3553,0,6408,6408,5121,this.canvas),T$$.pixelStorei(37441,!1);var T$E=this.minFifter,T$r=this.magFifter,T$F=this.repeat?10497:33071,T$x=T$w.isPOT(this.width,this.height);T$x?(this.mipmap?-1!==T$E||(T$E=9987):-1!==T$E||(T$E=9729),-1!==T$r||(T$r=9729),T$$.texParameteri(3553,10240,T$r),T$$.texParameteri(3553,10241,T$E),T$$.texParameteri(3553,10242,T$F),T$$.texParameteri(3553,10243,T$F),this.mipmap&&T$$.generateMipmap(3553)):(-1!==T$E||(T$E=9729),-1!==T$r||(T$r=9729),T$$.texParameteri(3553,10241,T$E),T$$.texParameteri(3553,10240,T$r),T$$.texParameteri(3553,10242,33071),T$$.texParameteri(3553,10243,33071)),T$u&&T$Z&&T$P$.bindTexture(T$$,T$u,T$Z),this.canvas=null,T$x&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},T$b.disposeResource=function(){T$n.enabled&&this._allowMerageInAtlas||!this._source||(T$S$.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},T$b.clearAtlasSource=function(){},T$Z(0,T$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),T$Z(0,T$b,"atlasSource",function(){return this.canvas}),T$Z(0,T$b,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(T$$){this._allowMerageInAtlas=T$$}),T$x}(),T$j$=function(T$$){function T$H(T$$,T$b,T$u,T$Z){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,T$H.__super.call(this),!T$$||!T$b)throw"Shader Error";this._id=++T$H._count,this._vs=T$$,this._ps=T$b,this._nameMap=T$Z||{},null!=T$u&&(T$H.sharders[T$u]=this)}T$o(T$H,"laya.webgl.shader.Shader",T$M$);var T$b=T$H.prototype;return T$b.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},T$b.disposeResource=function(){T$S$.mainContext.deleteShader(this._vshader),T$S$.mainContext.deleteShader(this._pshader),T$S$.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},T$b._compile=function(){if(!T$S$.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var T$$=[this._vs,this._ps],T$b=T$S$.mainContext;if(this._program=T$b.createProgram(),this._vshader=T$H._createShader(T$b,T$$[0],35633),this._pshader=T$H._createShader(T$b,T$$[1],35632),T$b.attachShader(this._program,this._vshader),T$b.attachShader(this._program,this._pshader),T$b.linkProgram(this._program),!T$T.isConchApp&&!T$b.getProgramParameter(this._program,35714))throw T$b.getProgramInfoLog(this._program);var T$u,T$Z,T$E=0,T$r=0;for(T$r=T$T.isConchApp?T$b.getProgramParameterEx(this._vs,this._ps,"",35721):T$b.getProgramParameter(this._program,35721),T$E=0;T$E<T$r;T$E++){var T$F=null;T$u={vartype:"attribute",glfun:null,ivartype:0,attrib:T$F=T$T.isConchApp?T$b.getActiveAttribEx(this._vs,this._ps,"",T$E):T$b.getActiveAttrib(this._program,T$E),location:T$b.getAttribLocation(this._program,T$F.name),name:T$F.name,type:T$F.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(T$u)}var T$x=0;for(T$x=T$T.isConchApp?T$b.getProgramParameterEx(this._vs,this._ps,"",35718):T$b.getProgramParameter(this._program,35718),T$E=0;T$E<T$x;T$E++){var T$g=null;T$g=T$T.isConchApp?T$b.getActiveUniformEx(this._vs,this._ps,"",T$E):T$b.getActiveUniform(this._program,T$E),0<(T$u={vartype:"uniform",glfun:null,ivartype:1,attrib:T$F,location:T$b.getUniformLocation(this._program,T$g.name),name:T$g.name,type:T$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(T$u.name=T$u.name.substr(0,T$u.name.length-3),T$u.isArray=!0,T$u.location=T$b.getUniformLocation(this._program,T$u.name)),this._params.push(T$u)}for(T$E=0,T$Z=this._params.length;T$E<T$Z;T$E++)if((T$u=this._params[T$E]).indexOfParams=T$E,T$u.index=1,T$u.value=[T$u.location,null],T$u.codename=T$u.name,T$u.name=this._nameMap[T$u.codename]?this._nameMap[T$u.codename]:T$u.codename,(this._paramsMap[T$u.name]=T$u)._this=this,T$u.uploadedValue=[],"attribute"!==T$u.vartype)switch(T$u.type){case 5124:T$u.fun=T$u.isArray?this._uniform1iv:this._uniform1i;break;case 5126:T$u.fun=T$u.isArray?this._uniform1fv:this._uniform1f;break;case 35664:T$u.fun=T$u.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:T$u.fun=T$u.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:T$u.fun=T$u.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:T$u.fun=this._uniform_sampler2D;break;case 35680:T$u.fun=this._uniform_samplerCube;break;case 35676:T$u.glfun=T$b.uniformMatrix4fv,T$u.fun=this._uniformMatrix4fv;break;case 35670:T$u.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else T$u.fun=this._attribute}},T$b.getUniform=function(T$$){return this._paramsMap[T$$]},T$b._attribute=function(T$$,T$b){var T$u=T$S$.mainContext,T$Z=T$X$._enableAtributes,T$E=T$$.location;return T$Z[T$E]||T$u.enableVertexAttribArray(T$E),T$u.vertexAttribPointer(T$E,T$b[0],T$b[1],T$b[2],T$b[3],T$b[4]+this._offset),T$Z[T$E]=T$X$._bindVertexBuffer,1},T$b._uniform1f=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b?(T$S$.mainContext.uniform1f(T$$.location,T$u[0]=T$b),1):0},T$b._uniform1fv=function(T$$,T$b){if(T$b.length<4){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]||T$u[3]!==T$b[3]?(T$S$.mainContext.uniform1fv(T$$.location,T$b),T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2],T$u[3]=T$b[3],1):0}return T$S$.mainContext.uniform1fv(T$$.location,T$b),1},T$b._uniform_vec2=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]?(T$S$.mainContext.uniform2f(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1]),1):0},T$b._uniform_vec2v=function(T$$,T$b){if(T$b.length<2){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]||T$u[3]!==T$b[3]?(T$S$.mainContext.uniform2fv(T$$.location,T$b),T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2],T$u[3]=T$b[3],1):0}return T$S$.mainContext.uniform2fv(T$$.location,T$b),1},T$b._uniform_vec3=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]?(T$S$.mainContext.uniform3f(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2]),1):0},T$b._uniform_vec3v=function(T$$,T$b){return T$S$.mainContext.uniform3fv(T$$.location,T$b),1},T$b._uniform_vec4=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]||T$u[3]!==T$b[3]?(T$S$.mainContext.uniform4f(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2],T$u[3]=T$b[3]),1):0},T$b._uniform_vec4v=function(T$$,T$b){return T$S$.mainContext.uniform4fv(T$$.location,T$b),1},T$b._uniformMatrix2fv=function(T$$,T$b){return T$S$.mainContext.uniformMatrix2fv(T$$.location,!1,T$b),1},T$b._uniformMatrix3fv=function(T$$,T$b){return T$S$.mainContext.uniformMatrix3fv(T$$.location,!1,T$b),1},T$b._uniformMatrix4fv=function(T$$,T$b){return T$S$.mainContext.uniformMatrix4fv(T$$.location,!1,T$b),1},T$b._uniform1i=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b?(T$S$.mainContext.uniform1i(T$$.location,T$u[0]=T$b),1):0},T$b._uniform1iv=function(T$$,T$b){return T$S$.mainContext.uniform1iv(T$$.location,T$b),1},T$b._uniform_ivec2=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]?(T$S$.mainContext.uniform2i(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1]),1):0},T$b._uniform_ivec2v=function(T$$,T$b){return T$S$.mainContext.uniform2iv(T$$.location,T$b),1},T$b._uniform_vec3i=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]?(T$S$.mainContext.uniform3i(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2]),1):0},T$b._uniform_vec3vi=function(T$$,T$b){return T$S$.mainContext.uniform3iv(T$$.location,T$b),1},T$b._uniform_vec4i=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]||T$u[3]!==T$b[3]?(T$S$.mainContext.uniform4i(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2],T$u[3]=T$b[3]),1):0},T$b._uniform_vec4vi=function(T$$,T$b){return T$S$.mainContext.uniform4iv(T$$.location,T$b),1},T$b._uniform_sampler2D=function(T$$,T$b){var T$u=T$S$.mainContext,T$Z=T$$.uploadedValue;return null==T$Z[0]?(T$Z[0]=this._curActTexIndex,T$u.uniform1i(T$$.location,this._curActTexIndex),T$u.activeTexture(T$H._TEXTURES[this._curActTexIndex]),T$P$.bindTexture(T$u,3553,T$b),this._curActTexIndex++,1):(T$u.activeTexture(T$H._TEXTURES[T$Z[0]]),T$P$.bindTexture(T$u,3553,T$b),0)},T$b._uniform_samplerCube=function(T$$,T$b){var T$u=T$S$.mainContext,T$Z=T$$.uploadedValue;return null==T$Z[0]?(T$Z[0]=this._curActTexIndex,T$u.uniform1i(T$$.location,this._curActTexIndex),T$u.activeTexture(T$H._TEXTURES[this._curActTexIndex]),T$P$.bindTexture(T$u,34067,T$b),this._curActTexIndex++,1):(T$u.activeTexture(T$H._TEXTURES[T$Z[0]]),T$P$.bindTexture(T$u,34067,T$b),0)},T$b._noSetValue=function(T$$){console.log("no....:"+T$$.name)},T$b.uploadOne=function(T$$,T$b){this.activeResource(),T$P$.UseProgram(this._program);var T$u=this._paramsMap[T$$];T$u.fun.call(this,T$u,T$b)},T$b.uploadTexture2D=function(T$$){T$V.shaderCall++;var T$b=T$S$.mainContext;T$b.activeTexture(33984),T$P$.bindTexture(T$b,3553,T$$)},T$b.uploadTexture2D1=function(T$$){T$V.shaderCall++;var T$b=T$S$.mainContext;T$b.activeTexture(33985),T$P$.bindTexture(T$b,3553,T$$)},T$b.upload=function(T$$,T$b){T$M$.activeShader=T$M$.bindShader=this,this._lastUseFrameCount===T$V.loopCount||this.activeResource(),T$P$.UseProgram(this._program),this._reCompile?(T$b=this._params,this._reCompile=!1):T$b=T$b||this._params;T$S$.mainContext;for(var T$u,T$Z,T$E=T$b.length,T$r=0,T$F=0;T$F<T$E;T$F++)null!==(T$Z=T$$[(T$u=T$b[T$F]).name])&&(T$r+=T$u.fun.call(this,T$u,T$Z));T$V.shaderCall+=T$r},T$b.uploadArray=function(T$$,T$b,T$u){T$M$.activeShader=this,(T$M$.bindShader=this).activeResource(),T$P$.UseProgram(this._program);this._params;for(var T$Z,T$E,T$r=0,T$F=T$b-2;0<=T$F;T$F-=2)(T$E=this._paramsMap[T$$[T$F]])&&null!=(T$Z=T$$[T$F+1])&&(T$u&&T$u[T$E.name]&&T$u[T$E.name].bind(),T$r+=T$E.fun.call(this,T$E,T$Z));T$V.shaderCall+=T$r},T$b.getParams=function(){return this._params},T$H.getShader=function(T$$){return T$H.sharders[T$$]},T$H.create=function(T$$,T$b,T$u,T$Z){return new T$H(T$$,T$b,T$u,T$Z)},T$H.withCompile=function(T$$,T$b,T$u,T$Z){if(T$u&&T$H.sharders[T$u])return T$H.sharders[T$u];var T$E=T$H._preCompileShader[2e-4*T$$];if(!T$E)throw new Error("withCompile shader err!"+T$$);return T$E.createShader(T$b,T$u,T$Z)},T$H.withCompile2D=function(T$$,T$b,T$u,T$Z,T$E){if(T$Z&&T$H.sharders[T$Z])return T$H.sharders[T$Z];var T$r=T$H._preCompileShader[2e-4*T$$+T$b];if(!T$r)throw new Error("withCompile shader err!"+T$$+" "+T$b);return T$r.createShader(T$u,T$Z,T$E)},T$H.addInclude=function(T$$,T$b){T$y$.addInclude(T$$,T$b)},T$H.preCompile=function(T$$,T$b,T$u,T$Z){var T$E=2e-4*T$$;T$H._preCompileShader[T$E]=new T$y$(T$E,T$b,T$u,T$Z)},T$H.preCompile2D=function(T$$,T$b,T$u,T$Z,T$E){var T$r=2e-4*T$$+T$b;T$H._preCompileShader[T$r]=new T$y$(T$r,T$u,T$Z,T$E)},T$H._createShader=function(T$$,T$b,T$u){var T$Z=T$$.createShader(T$u);return T$$.shaderSource(T$Z,T$b),T$$.compileShader(T$Z),T$Z},T$H._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],T$H._count=0,T$H._preCompileShader={},T$H.SHADERNAME2ID=2e-4,T$H.sharders=((T$H.sharders=[]).length=32,T$H.sharders),T$F(T$H,["nameKey",function(){return this.nameKey=new T$v}]),T$H}(),T$h$=function(T$$){function T$b(){this._maxsize=0,this._upload=!0,this._uploadSize=0,T$b.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}T$o(T$b,"laya.webgl.utils.Buffer2D",T$$);var T$u=T$b.prototype;return T$u.needSize=function(T$$){var T$b=this._byteLength;if(T$$){var T$u=this._byteLength+T$$;T$u<=this._buffer.byteLength||this._resizeBuffer(T$u<<1,!0),this._byteLength=T$u}return T$b},T$u._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),T$V.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,T$X$._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),T$X$._gl.bufferSubData(this._bufferType,0,this._buffer)},T$u._bufferSubData=function(T$$,T$b,T$u){if(void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),this._maxsize=Math.max(this._maxsize,this._byteLength),T$V.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,T$X$._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),T$b||T$u){var T$Z=this._buffer.slice(T$b,T$u);T$X$._gl.bufferSubData(this._bufferType,T$$,T$Z)}else T$X$._gl.bufferSubData(this._bufferType,T$$,this._buffer)},T$u._checkArrayUse=function(){},T$u._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},T$u._bind_subUpload=function(T$$,T$b,T$u){return void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(T$$,T$b,T$u),!0)},T$u._resizeBuffer=function(T$$,T$b){if(T$$<this._buffer.byteLength)return this;if(this.memorySize=T$$,T$b&&this._buffer&&0<this._buffer.byteLength){var T$u=new ArrayBuffer(T$$);new Uint8Array(T$u).set(new Uint8Array(this._buffer),0),this._buffer=T$u}else this._buffer=new ArrayBuffer(T$$);return this._checkArrayUse(),this._upload=!0,this},T$u.append=function(T$$){this._upload=!0;var T$b,T$u;T$b=T$$.byteLength,T$$ instanceof Uint8Array?(this._resizeBuffer(this._byteLength+T$b,!0),T$u=new Uint8Array(this._buffer,this._byteLength)):T$$ instanceof Uint16Array?(this._resizeBuffer(this._byteLength+T$b,!0),T$u=new Uint16Array(this._buffer,this._byteLength)):T$$ instanceof Float32Array&&(this._resizeBuffer(this._byteLength+T$b,!0),T$u=new Float32Array(this._buffer,this._byteLength)),T$u.set(T$$,0),this._byteLength+=T$b,this._checkArrayUse()},T$u.appendU16Array=function(T$$,T$b){this._resizeBuffer(this._byteLength+2*T$b,!0);for(var T$u=new Uint16Array(this._buffer,this._byteLength,T$b),T$Z=0;T$Z<T$b;T$Z++)T$u[T$Z]=T$$[T$Z];this._byteLength+=2*T$b,this._checkArrayUse()},T$u.appendEx=function(T$$,T$b){this._upload=!0;var T$u;T$u=T$$.byteLength,this._resizeBuffer(this._byteLength+T$u,!0),new T$b(this._buffer,this._byteLength).set(T$$,0),this._byteLength+=T$u,this._checkArrayUse()},T$u.appendEx2=function(T$$,T$b,T$u,T$Z){void 0===T$Z&&(T$Z=1),this._upload=!0;var T$E,T$r;T$E=T$u*T$Z,this._resizeBuffer(this._byteLength+T$E,!0),T$r=new T$b(this._buffer,this._byteLength);var T$F=0;for(T$F=0;T$F<T$u;T$F++)T$r[T$F]=T$$[T$F];this._byteLength+=T$E,this._checkArrayUse()},T$u.getBuffer=function(){return this._buffer},T$u.setNeedUpload=function(){this._upload=!0},T$u.getNeedUpload=function(){return this._upload},T$u.upload=function(){var T$$=this._bind_upload();return T$X$._gl.bindBuffer(this._bufferType,null),T$X$._bindActive[this._bufferType]=null,T$M$.activeShader=null,T$$},T$u.subUpload=function(T$$,T$b,T$u){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0);var T$Z=this._bind_subUpload();return T$X$._gl.bindBuffer(this._bufferType,null),T$X$._bindActive[this._bufferType]=null,T$M$.activeShader=null,T$Z},T$u.disposeResource=function(){T$$.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},T$u.clear=function(){this._byteLength=0,this._upload=!0},T$Z(0,T$u,"bufferLength",function(){return this._buffer.byteLength}),T$Z(0,T$u,"byteLength",null,function(T$$){this._byteLength!==T$$&&(T$$<=this._buffer.byteLength||this._resizeBuffer(2*T$$+256,!0),this._byteLength=T$$)}),T$b.__int__=function(T$$){T$B$.QuadrangleIB=T$B$.create(35044),T$L$.fillIBQuadrangle(T$B$.QuadrangleIB,16)},T$b.FLOAT32=4,T$b.SHORT=2,T$b}(T$X$),T$d$=(function(T$b){function T$u(T$$){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,T$u.__super.call(this,9)}T$o(T$u,"laya.webgl.shader.d2.value.GlowSV",T$b);var T$$=T$u.prototype;T$$.setValue=function(T$$){T$b.prototype.setValue.call(this,T$$)},T$$.clear=function(){T$b.prototype.clear.call(this)}}(T$c$),function(T$$){function T$b(T$$){T$b.__super.call(this,64),this.defines.add(64)}T$o(T$b,"laya.webgl.shader.d2.value.TextSV",T$$);var T$u=T$b.prototype;return T$u.release=function(){(T$b.pool[T$b._length++]=this).clear()},T$u.clear=function(){T$$.prototype.clear.call(this)},T$b.create=function(){return T$b._length?T$b.pool[--T$b._length]:new T$b(null)},T$b.pool=[],T$b._length=0,T$b}(T$c$)),T$U$=function(T$$){function T$E(T$$,T$b,T$u,T$Z){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,T$E.__super.call(this,T$$,T$b,T$u,T$Z)}T$o(T$E,"laya.webgl.shader.d2.Shader2X",T$$);var T$b=T$E.prototype;return T$b.upload2dQuick1=function(T$$){this.upload(T$$,this._params2dQuick1||this._make2dQuick1())},T$b._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var T$$,T$b=this._params,T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++)T$$=T$b[T$u],(T$T.isFlash||"size"!==T$$.name&&"position"!==T$$.name&&"texcoord"!==T$$.name)&&this._params2dQuick1.push(T$$)}return this._params2dQuick1},T$b.disposeResource=function(){T$$.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},T$b.upload2dQuick2=function(T$$){this.upload(T$$,this._params2dQuick2||this._make2dQuick2())},T$b._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var T$$,T$b=this._params,T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++)T$$=T$b[T$u],(T$T.isFlash||"size"!==T$$.name)&&this._params2dQuick2.push(T$$)}return this._params2dQuick2},T$E.create=function(T$$,T$b,T$u,T$Z){return new T$E(T$$,T$b,T$u,T$Z)},T$E}(T$j$),T$B$=function(T$$){function T$b(T$$){this._uint8Array=null,this._uint16Array=null,void 0===T$$&&(T$$=35044),T$b.__super.call(this),this._bufferUsage=T$$,this._bufferType=34963,T$T.isFlash||(this._buffer=new ArrayBuffer(8))}T$o(T$b,"laya.webgl.utils.IndexBuffer2D",T$h$);var T$u=T$b.prototype;return T$u._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},T$u.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},T$u.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},T$u.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},T$b.QuadrangleIB=null,T$b.create=function(T$$){return void 0===T$$&&(T$$=35044),new T$b(T$$)},T$b}(),T$R$=function(T$$){function T$u(T$$,T$b){this._floatArray32=null,this._vertexStride=0,T$u.__super.call(this),this._vertexStride=T$$,this._bufferUsage=T$b,this._bufferType=34962,T$T.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}T$o(T$u,"laya.webgl.utils.VertexBuffer2D",T$$);var T$b=T$u.prototype;return T$b.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},T$b.bind=function(T$$){T$$&&T$$._bind(),this._bind()},T$b.insertData=function(T$$,T$b){this.getFloat32Array().set(T$$,T$b),this._upload=!0},T$b.bind_upload=function(T$$){T$$._bind_upload()||T$$._bind(),this._bind_upload()||this._bind()},T$b._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},T$b.disposeResource=function(){T$$.prototype.disposeResource.call(this)},T$b.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},T$Z(0,T$b,"vertexStride",function(){return this._vertexStride}),T$u.create=function(T$$,T$b){return void 0===T$b&&(T$b=35048),new T$u(T$$,T$b)},T$u}(T$h$),T$$b=function(T$$){function T$x(T$$,T$b,T$u,T$Z,T$E,T$r){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===T$u&&(T$u=6408),void 0===T$Z&&(T$Z=!0),T$x.__super.call(this,T$$,T$b),T$$){if(this._format=T$u,this._mipmap=T$Z,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof T$$)this._url=T$$,this._src=T$$,this._image=new T$N.window.Image,T$b&&(T$b.onload&&(this.onload=T$b.onload),T$b.onerror&&(this.onerror=T$b.onerror),T$b.onCreate&&T$b.onCreate(this)),this._image.crossOrigin=T$$&&0==T$$.indexOf("data:")?null:"",T$$&&(this._image.src=T$$);else if(T$$ instanceof ArrayBuffer){this._src=T$b,this._url=this._src;var T$F=new T$g(T$$);T$F.readUTFBytes(4),T$F.readUTFBytes(2),T$F.getInt16();T$F.endian="bigEndian",this._w=T$F.getInt16(),this._h=T$F.getInt16();T$F.getInt16(),T$F.getInt16();this._image=new Uint8Array(T$$,T$F.pos),this._format=T$S$.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,T$n.enabled&&this._w<T$n.atlasLimitWidth&&this._h<T$n.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(T$$ instanceof Uint8Array))return this._src=T$b,this._url=this._src,this._image=T$$.source||T$$,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=T$b,this._url=this._src,this._w=T$E,this._h=T$r,this._image=T$$,this._format=0===T$u?T$$.byteLength/(T$E*T$r)==4?6408:6407:T$u}this._$5__enableMerageInAtlas=!0}}T$o(T$x,"laya.webgl.resource.WebGLImage",T$e);var T$b=T$x.prototype;return T$i.imps(T$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),T$b._init_=function(T$$,T$b){},T$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var T$$=T$S$.mainContext,T$b=this._source=T$$.createTexture(),T$u=T$P$.curBindTexTarget,T$Z=T$P$.curBindTexValue;T$P$.bindTexture(T$$,3553,T$b);var T$E=this.minFifter,T$r=this.magFifter,T$F=this.repeat?10497:33071,T$x=T$w.isPOT(this._w,this._h),T$g=!1;switch(T$x?(this.mipmap?-1!==T$E||(T$E=9987):-1!==T$E||(T$E=9729),-1!==T$r||(T$r=9729),T$$.texParameteri(3553,10241,T$E),T$$.texParameteri(3553,10240,T$r),T$$.texParameteri(3553,10242,T$F),T$$.texParameteri(3553,10243,T$F),this.mipmap&&T$$.generateMipmap(3553)):(-1!==T$E||(T$E=9729),-1!==T$r||(T$r=9729),T$$.texParameteri(3553,10241,T$E),T$$.texParameteri(3553,10240,T$r),T$$.texParameteri(3553,10242,33071),T$$.texParameteri(3553,10243,33071)),T$$.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&T$$.pixelStorei(T$$.UNPACK_ALIGNMENT,1),T$$.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&T$$.pixelStorei(T$$.UNPACK_ALIGNMENT,1),T$$.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:T$g=!0,T$$.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case T$S$.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:T$g=!0,T$$.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}T$$.pixelStorei(37441,!1),T$u&&T$Z&&T$P$.bindTexture(T$$,T$u,T$Z),this.uri||(this.uri=this._url),T$g?this.memorySize=this._image.length:T$x&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},T$b.recreateResource=function(){var T$$=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var T$b=this;this._image=new T$N.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(T$b._needReleaseAgain)return T$b._needReleaseAgain=!1,T$b._image.onload=null,void(T$b._image=null);T$b._allowMerageInAtlas&&T$b._enableMerageInAtlas?(T$$.memorySize=0,T$$._recreateLock=!1):T$b._createWebGlTexture(),T$b.completeCreate()},this._image.src=this._src}},T$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&T$S$.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},T$b.onresize=function(){this._w=this._image.width,this._h=this._image.height,T$n.enabled&&this._w<T$n.atlasLimitWidth&&this._h<T$n.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},T$b.clearAtlasSource=function(){this._image=null},T$Z(0,T$b,"format",function(){return this._format}),T$Z(0,T$b,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(T$$){this._$5__enableMerageInAtlas=T$$}),T$Z(0,T$b,"mipmap",function(){return this._mipmap}),T$Z(0,T$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),T$Z(0,T$b,"atlasSource",function(){return this._image}),T$Z(0,T$b,"onload",null,function(T$$){var T$b=this;this._onload=T$$,this._image&&(this._image.onload=null!=this._onload?function(){T$b.onresize(),T$b._onload()}:null)}),T$Z(0,T$b,"onerror",null,function(T$$){var T$b=this;this._onerror=T$$,this._image&&(this._image.onerror=null!=this._onerror?function(){T$b._onerror()}:null)}),T$x}();T$i.__init([T$N$,T$m,T$z$,T$y$])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$$,T$b){"use strict";for(var T$u in Object.defineProperty(T$b,"__esModule",{value:!0}),Laya){var T$Z=Laya[T$u];T$Z&&T$Z.__isclass&&(T$b[T$u]=T$Z)}}),function(T$r,T$$,T$Z){T$Z.un,T$Z.uns;var T$E=T$Z.static,T$F=T$Z.class,T$x=T$Z.getset,T$g=(T$Z.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),T$D=laya.utils.ClassUtils,T$I=(laya.events.Event,laya.utils.HTMLChar),T$H=laya.net.Loader,T$w=(laya.display.Node,laya.maths.Rectangle),T$o=laya.renders.Render,T$N=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),T$e=laya.utils.Stat,T$M=laya.display.Text,T$L=laya.resource.Texture,T$T=laya.net.URL,T$_=laya.utils.Utils,T$y=function(){function T$N(){}return T$F(T$N,"laya.html.utils.HTMLParse"),T$N.parse=function(T$$,T$b,T$u){T$b=(T$b="<root>"+(T$b=T$b.replace(/<br>/g,"<br/>"))+"</root>").replace(T$N.spacePattern,T$N.char255);var T$Z=T$_.parseXMLFromString(T$b);T$N._parseXML(T$$,T$Z.childNodes[0].childNodes,T$u)},T$N._parseXML=function(T$$,T$b,T$u,T$Z){var T$E=0,T$r=0;if(T$b.join||T$b.item)for(T$E=0,T$r=T$b.length;T$E<T$r;++T$E)T$N._parseXML(T$$,T$b[T$E],T$u,T$Z);else{var T$F,T$x,T$g;if(3==T$b.nodeType)return void(T$$ instanceof laya.html.dom.HTMLDivElement?(null==T$b.nodeName&&(T$b.nodeName="#text"),T$x=T$b.nodeName.toLowerCase(),0<(T$g=T$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(T$F=T$D.getInstance(T$x))&&(T$$.addChild(T$F),T$F.innerTEXT=T$g.replace(T$N.char255AndOneSpacePattern," "))):0<(T$g=T$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(T$$.innerTEXT=T$g.replace(T$N.char255AndOneSpacePattern," ")));if("#comment"==(T$x=T$b.nodeName.toLowerCase()))return;if(T$F=T$D.getInstance(T$x)){(T$F=T$$.addChild(T$F)).URI=T$u,T$F.href=T$Z;var T$H=T$b.attributes;if(T$H&&0<T$H.length)for(T$E=0,T$r=T$H.length;T$E<T$r;++T$E){var T$w=T$H[T$E],T$I=T$w.nodeName,T$o=T$w.value;T$F._setAttributes(T$I,T$o)}T$N._parseXML(T$F,T$b.childNodes,T$u,T$F.href)}else T$N._parseXML(T$$,T$b.childNodes,T$u,T$Z)}},T$N.char255=String.fromCharCode(255),T$N.spacePattern=/&nbsp;|&#160;/g,T$N.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),T$N}(),T$S=function(){function T$k(){}return T$F(T$k,"laya.html.utils.Layout"),T$k.later=function(T$$){null==T$k._will&&(T$k._will=[],T$Z.stage.frameLoop(1,null,function(){if(!(T$k._will.length<1)){for(var T$$=0;T$$<T$k._will.length;T$$++)laya.html.utils.Layout.layout(T$k._will[T$$]);T$k._will.length=0}})),T$k._will.push(T$$)},T$k.layout=function(T$$){if(!T$$||!T$$._style)return null;if(0==(512&T$$._style._type))return null;T$$.getStyle()._type&=-513;var T$b=T$k._multiLineLayout(T$$);return T$o.isConchApp&&T$$.layaoutCallNative&&T$$.layaoutCallNative(),T$b},T$k._multiLineLayout=function(T$$){if(T$M.RightToLeft)return T$k._multiLineLayout2(T$$);var T$b=new Array;T$$._addChildsToLayout(T$b);var T$u,T$Z,T$E,T$r,T$F,T$x=0,T$g=T$b.length,T$H=T$$._getCSSStyle(),T$w=T$H.letterSpacing,T$I=T$H.leading,T$o=T$H.lineHeight,T$N=T$H._widthAuto()||!T$H.wordWrap,T$D=T$N?999999:T$$.width,T$e=(T$$.height,0),T$L=T$H.italic?T$H.fontSize/3:0,T$T=T$H._getAlign(),T$_=T$H._getValign(),T$y=0!==T$_||0!==T$T||0!=T$o,T$S=0,T$P=0,T$i=0,T$z=0,T$q=new Array,T$a=T$q[0]=new T$l,T$t=!1,T$C=!1;T$a.h=0,T$H.italic&&(T$D-=T$H.fontSize/3);var T$K=0,T$O=!0;function T$V(){T$a.y=T$P,T$P+=T$a.h+T$I,0==T$a.h&&(T$P+=T$o),T$a.mWidth=T$K,T$K=0,T$a=new T$l,T$q.push(T$a),T$a.h=0,T$t=!(T$O=!(T$S=0))}for(T$x=0;T$x<T$g;T$x++)if(null!=(T$u=T$b[T$x]))if(T$O=!1,T$u instanceof laya.html.dom.HTMLBrElement)T$V(),T$a.y=T$P;else{if(T$u._isChar()){if((T$r=T$u).isWord)T$t=T$C||"\n"===T$r.char,T$a.wordStartIndex=T$a.elements.length;else{if(T$i=T$r.width+T$r.style.letterSpacin,0<T$q.length&&T$D<T$S+T$i&&0<T$a.wordStartIndex){var T$v;T$v=T$a.elements.length-T$a.wordStartIndex+1,T$a.elements.length=T$a.wordStartIndex,T$x-=T$v,T$V();continue}T$t=!1,T$K+=T$r.width}T$i=T$r.width+T$w,T$z=T$r.height,T$C=!1,(T$t=T$t||T$D<T$S+T$i)&&T$V(),T$a.minTextHeight=Math.min(T$a.minTextHeight,T$u.height)}else T$Z=T$u._getCSSStyle(),T$F=T$u,T$E=T$Z.padding,0===T$Z._getCssFloat()||(T$y=!0),T$t=T$C||T$Z.lineElement,T$i=T$F.width*T$F._style._tf.scaleX+T$E[1]+T$E[3]+T$w,T$z=T$F.height*T$F._style._tf.scaleY+T$E[0]+T$E[2],T$C=T$Z.lineElement,(T$t=T$t||T$D<T$S+T$i&&T$Z.wordWrap)&&T$V();T$a.elements.push(T$u),T$a.h=Math.max(T$a.h,T$z),T$u.x=T$S,T$u.y=T$P,T$S+=T$i,T$a.w=T$S-T$w,T$a.y=T$P,T$e=Math.max(T$S+T$L,T$e)}else T$O||(T$S+=T$k.DIV_ELEMENT_PADDING),T$a.wordStartIndex=T$a.elements.length;if(T$P=T$a.y+T$a.h,T$y){var T$p=0,T$Y=T$D;for(T$N&&0<T$$.width&&(T$Y=T$$.width),T$x=0,T$g=T$q.length;T$x<T$g;T$x++)T$q[T$x].updatePos(0,T$Y,T$x,T$p,T$T,T$_,T$o),T$p+=Math.max(T$o,T$q[T$x].h+T$I);T$P=T$p}return T$N&&(T$$.width=T$e),T$P>T$$.height&&(T$$.height=T$P),[T$e,T$P]},T$k._multiLineLayout2=function(T$$){var T$b=new Array;T$$._addChildsToLayout(T$b);var T$u,T$Z,T$E,T$r,T$F,T$x=0,T$g=T$b.length,T$H=T$$._getCSSStyle(),T$w=T$H.letterSpacing,T$I=T$H.leading,T$o=T$H.lineHeight,T$N=T$H._widthAuto()||!T$H.wordWrap,T$D=T$N?999999:T$$.width,T$e=(T$$.height,0),T$L=T$H.italic?T$H.fontSize/3:0,T$T=2-T$H._getAlign(),T$_=T$H._getValign(),T$y=0!==T$_||0!=T$T||0!=T$o,T$S=0,T$P=0,T$i=0,T$z=0,T$q=new Array,T$a=T$q[0]=new T$l,T$t=!1,T$C=!1;T$a.h=0,T$H.italic&&(T$D-=T$H.fontSize/3);var T$K=0,T$O=!0;function T$V(){T$a.y=T$P,T$P+=T$a.h+T$I,0==T$a.h&&(T$P+=T$o),T$a.mWidth=T$K,T$K=0,T$a=new T$l,T$q.push(T$a),T$a.h=0,T$t=!(T$O=!(T$S=0))}for(T$x=0;T$x<T$g;T$x++)if(null!=(T$u=T$b[T$x]))if(T$O=!1,T$u instanceof laya.html.dom.HTMLBrElement)T$V(),T$a.y=T$P;else{if(T$u._isChar()){if((T$r=T$u).isWord)T$t=T$C||"\n"===T$r.char,T$a.wordStartIndex=T$a.elements.length;else{if(0<T$q.length&&T$D<T$S+T$i&&0<T$a.wordStartIndex){var T$v;T$v=T$a.elements.length-T$a.wordStartIndex+1,T$a.elements.length=T$a.wordStartIndex,T$x-=T$v,T$V();continue}T$t=!1,T$K+=T$r.width}T$i=T$r.width+T$w,T$z=T$r.height,T$C=!1,(T$t=T$t||T$D<T$S+T$i)&&T$V(),T$a.minTextHeight=Math.min(T$a.minTextHeight,T$u.height)}else T$Z=T$u._getCSSStyle(),T$F=T$u,T$E=T$Z.padding,0===T$Z._getCssFloat()||(T$y=!0),T$t=T$C||T$Z.lineElement,T$i=T$F.width*T$F._style._tf.scaleX+T$E[1]+T$E[3]+T$w,T$z=T$F.height*T$F._style._tf.scaleY+T$E[0]+T$E[2],T$C=T$Z.lineElement,(T$t=T$t||T$D<T$S+T$i&&T$Z.wordWrap)&&T$V();T$a.elements.push(T$u),T$a.h=Math.max(T$a.h,T$z),T$u.x=T$S,T$u.y=T$P,T$S+=T$i,T$a.w=T$S-T$w,T$a.y=T$P,T$e=Math.max(T$S+T$L,T$e)}else T$O||(T$S+=T$k.DIV_ELEMENT_PADDING),T$a.wordStartIndex=T$a.elements.length;if(T$P=T$a.y+T$a.h,T$y){var T$p=0,T$Y=T$D;for(T$x=0,T$g=T$q.length;T$x<T$g;T$x++)T$q[T$x].updatePos(0,T$Y,T$x,T$p,T$T,T$_,T$o),T$p+=Math.max(T$o,T$q[T$x].h+T$I);T$P=T$p}for(T$N&&(T$$.width=T$e),T$P>T$$.height&&(T$$.height=T$P),T$x=0,T$g=T$q.length;T$x<T$g;T$x++)T$q[T$x].revertOrder(T$D);return[T$e,T$P]},T$k._will=null,T$k.DIV_ELEMENT_PADDING=0,T$k}(),T$l=function(){function T$$(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}T$F(T$$,"laya.html.utils.LayoutLine");var T$b=T$$.prototype;return T$b.updatePos=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){var T$x,T$g=0;0<this.elements.length&&(T$g=(T$x=this.elements[this.elements.length-1]).x+T$x.width-this.elements[0].x);var T$H=0,T$w=NaN;1===T$E&&(T$H=(T$b-T$g)/2),2===T$E&&(T$H=T$b-T$g),0===T$F||0!=T$r||(T$r=1);for(var T$I=0,T$o=this.elements.length;T$I<T$o;T$I++){var T$N=(T$x=this.elements[T$I])._getCSSStyle();switch(0!==T$H&&(T$x.x+=T$H),T$N._getValign()){case 0:T$x.y=T$Z;break;case 1:var T$D=0;99999!=this.minTextHeight&&(T$D=this.minTextHeight);var T$e=(T$D+T$F)/2;T$e=Math.max(T$e,this.h),T$w=(laya.html.dom.HTMLImageElement,T$Z+T$e-T$x.height),T$x.y=T$w;break;case 2:T$x.y=T$Z+(T$F-T$x.height)}}},T$b.revertOrder=function(T$$){var T$b;if(0<this.elements.length){var T$u,T$Z=0;for(T$u=this.elements.length,T$Z=0;T$Z<T$u;T$Z++)(T$b=this.elements[T$Z]).x=T$$-T$b.x-T$b.width}},T$$}(),T$P=function(T$u){function T$b(){this.URI=null,this._href=null,T$b.__super.call(this),this._text=T$b._EMPTYTEXT,this.setStyle(new T$g(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}T$F(T$b,"laya.html.dom.HTMLElement",T$u);var T$$=T$b.prototype;return T$$.layaoutCallNative=function(){var T$$=0;if(this._childs&&0<(T$$=this._childs.length))for(var T$b=0;T$b<T$$;T$b++)this._childs[T$b].layaoutCallNative&&this._childs[T$b].layaoutCallNative();var T$u=this._getWords();T$u?laya.html.dom.HTMLElement.fillWords(this,T$u,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},T$$.appendChild=function(T$$){return this.addChild(T$$)},T$$._getWords2=function(){var T$$=this._text.text;if(!T$$||0===T$$.length)return null;var T$b,T$u,T$Z=0,T$E=0;if(this._text.drawWords)T$u=this._text.drawWords;else{for(T$E=(T$b=T$$.split(" ")).length-1,T$u=[],T$Z=0;T$Z<T$E;T$Z++)T$u.push(T$b[T$Z]," ");0<=T$E&&T$u.push(T$b[T$E]),this._text.drawWords=T$u}var T$r,T$F=this._text.words;if(T$F&&T$F.length===T$u.length)return T$F;null===T$F&&(this._text.words=T$F=[]),T$F.length=T$u.length;var T$x=this.style,T$g=T$x.font;for(T$Z=0,T$E=T$u.length;T$Z<T$E;T$Z++){T$r=T$_.measureText(T$u[T$Z],T$g);var T$H=T$F[T$Z]=new T$I(T$u[T$Z],T$r.width,T$r.height||T$x.fontSize,T$x);if(1<T$H.char.length&&(T$H.charNum=T$H.char),this.href){var T$w=new T$N;this.addChild(T$w),T$H.setSprite(T$w)}}return T$F},T$$._getWords=function(){if(!T$M.CharacterCache)return this._getWords2();var T$$=this._text.text;if(!T$$||0===T$$.length)return null;var T$b,T$u=this._text.words;if(T$u&&T$u.length===T$$.length)return T$u;null===T$u&&(this._text.words=T$u=[]),T$u.length=T$$.length;for(var T$Z=this.style,T$E=T$Z.font,T$r=0,T$F=T$$.length;T$r<T$F;T$r++)if(T$b=T$_.measureText(T$$.charAt(T$r),T$E)){var T$x=T$u[T$r]=new T$I(T$$.charAt(T$r),T$b.width,T$b.height||T$Z.fontSize,T$Z);if(this.href){var T$g=new T$N;this.addChild(T$g),T$x.setSprite(T$g)}}else console.warn("_getWords size is null"+T$$.charAt(T$r),T$E);return T$u},T$$.showLinkSprite=function(){var T$$=this._text.words;if(T$$)for(var T$b,T$u,T$Z=[],T$E=0;T$E<T$$.length;T$E++)T$u=T$$[T$E],(T$b=new T$N).graphics.drawRect(0,0,T$u.width,T$u.height,"#ff0000"),T$b.width=T$u.width,T$b.height=T$u.height,this.addChild(T$b),T$Z.push(T$b)},T$$._layoutLater=function(){var T$$=this.style;512&T$$._type||(T$$.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&T$$.block?(T$S.later(this),T$$._type|=512):this.parent&&this.parent._layoutLater())},T$$._setAttributes=function(T$$,T$b){switch(T$$){case"style":return void this.style.cssText(T$b);case"class":return void(this.className=T$b)}T$u.prototype._setAttributes.call(this,T$$,T$b)},T$$.updateHref=function(){if(null!=this._href){var T$$=this._getWords();if(T$$)for(var T$b,T$u,T$Z=0;T$Z<T$$.length;T$Z++)(T$u=(T$b=T$$[T$Z]).getSprite())&&(T$u.size(T$b.width,T$b.height),T$u.on("click",this,this.onLinkHandler))}},T$$.onLinkHandler=function(T$$){switch(T$$.type){case"click":for(var T$b=this;T$b;)T$b.event("link",[this.href]),T$b=T$b.parent}},T$$.formatURL=function(T$$){return this.URI?T$T.formatURL(T$$,this.URI?this.URI.path:null):T$$},T$x(0,T$$,"href",function(){return this._href},function(T$$){null!=(this._href=T$$)&&(this._getCSSStyle().underLine=1,this.updateHref())}),T$x(0,T$$,"color",null,function(T$$){this.style.color=T$$}),T$x(0,T$$,"onClick",null,function(T$$){T$Z._runScript("fn=function(event){"+T$$+";}"),this.on("click",this,void 0)}),T$x(0,T$$,"id",null,function(T$$){T$i.document.setElementById(T$$,this)}),T$x(0,T$$,"innerTEXT",function(){return this._text.text},function(T$$){this.text=T$$}),T$x(0,T$$,"style",function(){return this._style}),T$x(0,T$$,"text",function(){return this._text.text},function(T$$){this._text==T$b._EMPTYTEXT?this._text={text:T$$,words:null}:(this._text.text=T$$,this._text.words&&(this._text.words.length=0)),T$o.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),T$x(0,T$$,"parent",T$u.prototype._$get_parent,function(T$$){if(T$$ instanceof laya.html.dom.HTMLElement){var T$b=T$$;this.URI||(this.URI=T$b.URI),this.style.inherit(T$b.style)}T$Z.superSet(T$N,this,"parent",T$$)}),T$x(0,T$$,"className",null,function(T$$){this.style.attrs(T$i.document.styleSheets["."+T$$])}),T$b.fillWords=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){T$$.graphics.clear();for(var T$x=0,T$g=T$b.length;T$x<T$g;T$x++){var T$H=T$b[T$x];T$$.graphics.fillText(T$H.char,T$H.x+T$u,T$H.y+T$Z,T$E,T$r,"left",T$F)}},T$b._EMPTYTEXT={text:null,words:null},T$b}(T$N),T$b=(function(T$$){function T$b(){T$b.__super.call(this),this.style.lineElement=!0,this.style.block=!0}T$F(T$b,"laya.html.dom.HTMLBrElement",T$P)}(),function(T$$){function T$b(){this.contextHeight=NaN,this.contextWidth=NaN,T$b.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}T$F(T$b,"laya.html.dom.HTMLDivElement",T$$);var T$u=T$b.prototype;return T$u.appendHTML=function(T$$){T$y.parse(this,T$$,this.URI),this.layout()},T$u._addChildsToLayout=function(T$b){var T$$=this._getWords();if(null==T$$&&0==this._childs.length)return!1;T$$&&T$$.forEach(function(T$$){T$b.push(T$$)});for(var T$u=!0,T$Z=0,T$E=this._childs.length;T$Z<T$E;T$Z++){var T$r=this._childs[T$Z];T$u?T$u=!1:T$b.push(null),T$r._addToLayout(T$b)}return!0},T$u._addToLayout=function(T$$){this.layout()},T$u.layout=function(){if(this.style){this.style._type|=512;var T$$=T$S.layout(this);if(T$$){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new T$w);var T$b=this._$P.mHtmlBounds;T$b.x=T$b.y=0,T$b.width=this.contextWidth=T$$[0],T$b.height=this.contextHeight=T$$[1],this.setBounds(T$b)}}},T$x(0,T$u,"height",function(){return this._height?this._height:this.contextHeight},T$$.prototype._$set_height),T$x(0,T$u,"innerHTML",null,function(T$$){this.destroyChildren(),this.appendHTML(T$$)}),T$x(0,T$u,"width",function(){return this._width?this._width:this.contextWidth},function(T$$){var T$b=!1;T$b=0===T$$?T$$!=this._width:T$$!=this.width,T$Z.superSet(T$P,this,"width",T$$),T$b&&this.layout()}),T$b}(T$P)),T$i=function(T$$){function T$b(){this.all=new Array,this.styleSheets=T$g.styleSheets,T$b.__super.call(this)}T$F(T$b,"laya.html.dom.HTMLDocument",T$P);var T$u=T$b.prototype;return T$u.getElementById=function(T$$){return this.all[T$$]},T$u.setElementById=function(T$$,T$b){this.all[T$$]=T$b},T$E(T$b,["document",function(){return this.document=new T$b}]),T$b}();(function(T$$){function T$b(){this._tex=null,this._url=null,this._renderArgs=[],T$b.__super.call(this),this.style.block=!0}T$F(T$b,"laya.html.dom.HTMLImageElement",T$P);var T$u=T$b.prototype;T$u._addToLayout=function(T$$){!this._style.absolute&&T$$.push(this)},T$u.render=function(T$$,T$b,T$u){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(T$e.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,T$$.ctx.drawTexture2(T$b,T$u,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},T$u.layaoutCallNative=function(){var T$$=0;if(this._childs&&0<(T$$=this._childs.length))for(var T$b=0;T$b<T$$;T$b++)this._childs[T$b].layaoutCallNative&&this._childs[T$b].layaoutCallNative()},T$x(0,T$u,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(T$$){this._width!==T$$&&(this._width=T$$,this._style.width=T$$,this.repaint())}),T$x(0,T$u,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(T$$){this._height!==T$$&&(this._height=T$$,this._style.height=T$$,this.repaint())}),T$u.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),T$H.clearCache(this,this._url),this._tex=null),T$P.prototype.destroy.call(this)},T$u.onloaded=function(){var T$$=this._style;T$$&&!T$$.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),T$$&&!T$$.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),T$o.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},T$u._loadImageComplete=function(T$$,T$b,T$u){if(!this._destroyed)if(null!=T$u)if(T$u instanceof ArrayBuffer){var T$Z=new DataView(T$u);new laya.webgl.resource.WebGLImage(new Uint8Array(T$u,8),T$$,0,!1,T$Z.getUint32(0),T$Z.getUint32(4));this.onloaded()}else if(T$u instanceof T$L)T$H.imgMgrSet[T$$]=T$b,T$r.imgMgrLock(T$$,T$H.imgMgrSet[T$$]),this._url=T$$,this._tex=T$u,T$H.keepCache(this,T$$),T$H.cacheRes(T$$,this._tex),this.onloaded();else{var T$E=-1!=T$$.indexOf(".png",T$$.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(T$u,T$$,T$E,!1,T$u.width,T$u.height);this.onloaded()}else this.event("error","Load image failed")},T$x(0,T$u,"src",null,function(T$$){(T$$=this.formatURL(T$$),this._url!=T$$)&&(null!=this._tex&&(T$H.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=T$$,(this._tex=T$H.getRes(T$$))?(T$H.keepCache(this,T$$),this.onloaded()):T$r.imgMgrLoad(T$$,this._loadImageComplete.bind(this),2,!1))})})(),function(T$$){function T$b(){this.type=null,T$b.__super.call(this),this.visible=!1}T$F(T$b,"laya.html.dom.HTMLLinkElement",T$$);var T$u=T$b.prototype;T$u._onload=function(T$$){switch(this.type){case"text/css":T$g.parseCSS(T$$,this.URI)}},T$x(0,T$u,"href",T$$.prototype._$get_href,function(T$$){var T$b=this;T$$=this.formatURL(T$$),this.URI=new T$T(T$$);var T$u=new T$H;T$u.once("complete",null,function(T$$){T$b._onload(T$$)}),T$u.load(T$$,"text")}),T$b._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(T$P),function(T$$){function T$b(){T$b.__super.call(this),this.visible=!1}T$F(T$b,"laya.html.dom.HTMLStyleElement",T$$),T$x(0,T$b.prototype,"text",T$$.prototype._$get_text,function(T$$){T$g.parseCSS(T$$,null)})}(T$P),function(T$$){function T$b(){T$b.__super.call(this),this._getCSSStyle().valign="middle"}T$F(T$b,"laya.html.dom.HTMLIframeElement",T$$),T$x(0,T$b.prototype,"href",T$$.prototype._$get_href,function(T$u){var T$Z=this;T$u=this.formatURL(T$u);var T$$=new T$H;T$$.once("complete",null,function(T$$){var T$b=T$Z.URI;T$Z.URI=new T$T(T$u),T$Z.innerHTML=T$$,!T$b||(T$Z.URI=T$b)}),T$$.load(T$u,"text")})}(T$b)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$$,T$b){"use strict";for(var T$u in Object.defineProperty(T$b,"__esModule",{value:!0}),Laya){var T$Z=Laya[T$u];T$Z&&T$Z.__isclass&&(T$b[T$u]=T$Z)}}),function(T$E,T$$,T$e){T$e.un,T$e.uns;var T$Z=T$e.static,T$r=T$e.class,T$F=T$e.getset,T$u=(T$e.__newvec,laya.display.Animation),T$L=(laya.utils.Browser,laya.utils.ClassUtils),T$x=laya.filters.ColorFilter,T$g=laya.utils.Ease,T$H=laya.events.Event,T$w=(laya.events.EventDispatcher,laya.display.css.Font),T$I=laya.display.FrameAnimation,T$b=laya.display.Graphics,T$o=laya.utils.Handler,T$N=laya.display.Input,T$_=laya.net.Loader,T$D=(laya.display.Node,laya.maths.Point),T$T=laya.maths.Rectangle,T$y=laya.renders.Render,T$S=laya.display.Sprite,T$P=laya.display.Text,T$i=laya.resource.Texture,T$z=laya.utils.Tween,T$q=laya.utils.Utils,T$a=laya.utils.WeakObject;T$e.interface("laya.ui.IItem"),T$e.interface("laya.ui.ISelect"),T$e.interface("laya.ui.IRender"),T$e.interface("laya.ui.IComponent"),T$e.interface("laya.ui.IBox","IComponent");var T$t=function(){function T$$(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return T$r(T$$,"laya.ui.LayoutStyle"),T$Z(T$$,["EMPTY",function(){return this.EMPTY=new T$$}]),T$$}(),T$C=function(){function T$$(){}return T$r(T$$,"laya.ui.Styles"),T$$.labelColor="#000000",T$$.buttonStateNum=3,T$$.scrollBarMinNum=15,T$$.scrollBarDelayTime=500,T$Z(T$$,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),T$$}(),T$K=function(){function T$E(){}return T$r(T$E,"laya.ui.UIUtils"),T$E.fillArray=function(T$$,T$b,T$u){var T$Z=T$$.concat();if(T$b)for(var T$E=T$b.split(","),T$r=0,T$F=Math.min(T$Z.length,T$E.length);T$r<T$F;T$r++){var T$x=T$E[T$r];T$Z[T$r]="true"==T$x||"false"!=T$x&&T$x,null!=T$u&&(T$Z[T$r]=T$u(T$x))}return T$Z},T$E.toColor=function(T$$){return T$q.toHexColor(T$$)},T$E.gray=function(T$$,T$b){void 0===T$b&&(T$b=!0),T$b?T$E.addFilter(T$$,T$E.grayFilter):T$E.clearFilter(T$$,T$x)},T$E.addFilter=function(T$$,T$b){var T$u=T$$.filters||[];T$u.push(T$b),T$$.filters=T$u},T$E.clearFilter=function(T$$,T$b){var T$u=T$$.filters;if(null!=T$u&&0<T$u.length){for(var T$Z=T$u.length-1;-1<T$Z;T$Z--){var T$E=T$u[T$Z];T$e.__typeof(T$E,T$b)&&T$u.splice(T$Z,1)}T$$.filters=T$u}},T$E._getReplaceStr=function(T$$){return T$E.escapeSequence[T$$]},T$E.adptString=function(T$$){return T$$.replace(/\\(\w)/g,T$E._getReplaceStr)},T$E.getBindFun=function(T$$){var T$b=T$E._funMap.get(T$$);if(null==T$b){var T$u='"'+T$$+'"',T$Z="(function(data){if(data==null)return;with(data){try{\nreturn "+(T$u=T$u.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";T$b=T$e._runScript(T$Z),T$E._funMap.set(T$$,T$b)}return T$b},T$Z(T$E,["grayFilter",function(){return this.grayFilter=new T$x([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new T$a}]),T$E}(),T$O=function(){function T$$(){}return T$r(T$$,"UIConfig"),T$$.touchScrollEnable=!0,T$$.mouseWheelEnable=!0,T$$.showButtons=!0,T$$.popupBgColor="#000000",T$$.popupBgAlpha=.5,T$$.closeDialogOnSide=!0,T$$}(),T$V=function(T$u){function T$T(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,T$T.__super.call(this),this._weakKeys=[]}T$r(T$T,"laya.ui.AutoBitmap",T$u);var T$$=T$T.prototype;return T$$.destroy=function(){if(T$_.clearObject(this,this._weakKey),this._weakKeys){for(var T$$=0,T$b=this._weakKeys.length;T$$<T$b;++T$$)T$_.clearObject(this,this._weakKeys[T$$]);this._weakKeys=null}T$u.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},T$$._setChanged=function(){this._isChanged||(this._isChanged=!0,T$e.timer.callLater(this,this.changeSource))},T$$.changeSource=function(){this._isChanged=!1;var T$$=this._source;if(T$$&&T$$.bitmap){var T$b=this.width,T$u=this.height,T$Z=this._sizeGrid,T$E=T$$.sourceWidth,T$r=T$$.sourceHeight;if(!T$Z||T$E===T$b&&T$r===T$u)this.cleanByTexture(T$$,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,T$b,T$u);else{T$_.clearObject(this,this._weakKey),T$$.$_GID||(T$$.$_GID=T$q.getGID());var T$F=T$$.$_GID+"."+T$b+"."+T$u+"."+T$Z.join("."),T$x=T$_.findObject(T$F);if(T$q.isOKCmdList(T$x))return this._weakKey=T$F,T$_.keepObject(this,this._weakKey),void(this.cmds=T$x);this.clear();var T$g,T$H,T$w=T$Z[0],T$I=T$Z[1],T$o=T$Z[2],T$N=T$Z[3],T$D=T$Z[4],T$e=!1;if(T$b==T$E&&(T$N=T$I=0),T$u==T$r&&(T$w=T$o=0),T$b<T$N+T$I){var T$L=T$b;T$e=!0,T$b=T$N+T$I,this.save(),this.clipRect(0,0,T$L,T$u)}T$N&&T$w&&(T$g=T$T.getTexture(T$$,0,0,T$N,T$w),T$H=this._weakKeys[0],T$g?(T$H!=T$g.weakKey&&(T$_.clearObject(this,T$H),T$_.keepObject(this,T$g.weakKey),this._weakKeys[0]=T$g.weakKey),this.drawTexture(T$g,0,0,T$N,T$w)):(T$_.clearObject(this,T$H),this._weakKeys[0]="")),T$I&&T$w&&(T$g=T$T.getTexture(T$$,T$E-T$I,0,T$I,T$w),T$H=this._weakKeys[1],T$g?(T$H!=T$g.weakKey&&(T$_.clearObject(this,T$H),T$_.keepObject(this,T$g.weakKey),this._weakKeys[1]=T$g.weakKey),this.drawTexture(T$g,T$b-T$I,0,T$I,T$w)):(T$_.clearObject(this,T$H),this._weakKeys[1]="")),T$N&&T$o&&(T$g=T$T.getTexture(T$$,0,T$r-T$o,T$N,T$o),T$H=this._weakKeys[2],T$g?(T$H!=T$g.weakKey&&(T$_.clearObject(this,T$H),T$_.keepObject(this,T$g.weakKey),this._weakKeys[2]=T$g.weakKey),this.drawTexture(T$g,0,T$u-T$o,T$N,T$o)):(T$_.clearObject(this,T$H),this._weakKeys[2]="")),T$I&&T$o&&(T$g=T$T.getTexture(T$$,T$E-T$I,T$r-T$o,T$I,T$o),T$H=this._weakKeys[3],T$g?(T$H!=T$g.weakKey&&(T$_.clearObject(this,T$H),T$_.keepObject(this,T$g.weakKey),this._weakKeys[3]=T$g.weakKey),this.drawTexture(T$g,T$b-T$I,T$u-T$o,T$I,T$o)):(T$_.clearObject(this,T$H),this._weakKeys[3]="")),T$w&&(T$g=T$T.getTexture(T$$,T$N,0,T$E-T$N-T$I,T$w),T$H=this._weakKeys[4],T$g?(T$H!=T$g.weakKey&&(T$_.clearObject(this,T$H),T$_.keepObject(this,T$g.weakKey),this._weakKeys[4]=T$g.weakKey),this.drawBitmap(T$D,T$g,T$N,0,T$b-T$N-T$I,T$w)):(T$_.clearObject(this,T$H),this._weakKeys[4]="")),T$o&&(T$g=T$T.getTexture(T$$,T$N,T$r-T$o,T$E-T$N-T$I,T$o),T$H=this._weakKeys[5],T$g?(T$H!=T$g.weakKey&&(T$_.clearObject(this,T$H),T$_.keepObject(this,T$g.weakKey),this._weakKeys[5]=T$g.weakKey),this.drawBitmap(T$D,T$g,T$N,T$u-T$o,T$b-T$N-T$I,T$o)):(T$_.clearObject(this,T$H),this._weakKeys[5]="")),T$N&&(T$g=T$T.getTexture(T$$,0,T$w,T$N,T$r-T$w-T$o),T$H=this._weakKeys[6],T$g?(T$H!=T$g.weakKey&&(T$_.clearObject(this,T$H),T$_.keepObject(this,T$g.weakKey),this._weakKeys[6]=T$g.weakKey),this.drawBitmap(T$D,T$g,0,T$w,T$N,T$u-T$w-T$o)):(T$_.clearObject(this,T$H),this._weakKeys[6]="")),T$I&&(T$g=T$T.getTexture(T$$,T$E-T$I,T$w,T$I,T$r-T$w-T$o),T$H=this._weakKeys[7],T$g?(T$H!=T$g.weakKey&&(T$_.clearObject(this,T$H),T$_.keepObject(this,T$g.weakKey),this._weakKeys[7]=T$g.weakKey),this.drawBitmap(T$D,T$g,T$b-T$I,T$w,T$I,T$u-T$w-T$o)):(T$_.clearObject(this,T$H),this._weakKeys[7]="")),T$g=T$T.getTexture(T$$,T$N,T$w,T$E-T$N-T$I,T$r-T$w-T$o),T$H=this._weakKeys[8],T$g?(T$H!=T$g.weakKey&&(T$_.clearObject(this,T$H),T$_.keepObject(this,T$g.weakKey),this._weakKeys[8]=T$g.weakKey),this.drawBitmap(T$D,T$g,T$N,T$w,T$b-T$N-T$I,T$u-T$w-T$o)):(T$_.clearObject(this,T$H),this._weakKeys[8]=""),T$e&&this.restore(),this.autoCacheCmd&&!T$y.isConchApp&&(T$_.saveObject(T$F,this.cmds,null),this._weakKey=T$F,T$_.keepObject(this,this._weakKey))}this._repaint()}},T$$.drawBitmap=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$E&&(T$E=0),void 0===T$r&&(T$r=0),T$E<.1||T$r<.1||(!T$$||T$b.width==T$E&&T$b.height==T$r?this.drawTexture(T$b,T$u,T$Z,T$E,T$r):this.fillTexture(T$b,T$u,T$Z,T$E,T$r))},T$$.clear=function(T$$){void 0===T$$&&(T$$=!0),T$u.prototype.clear.call(this,!1)},T$F(0,T$$,"sizeGrid",function(){return this._sizeGrid},function(T$$){this._sizeGrid=T$$,this._setChanged()}),T$F(0,T$$,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(T$$){this._width!=T$$&&(this._width=T$$,this._setChanged())}),T$F(0,T$$,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(T$$){this._height!=T$$&&(this._height=T$$,this._setChanged())}),T$F(0,T$$,"source",function(){return this._source},function(T$$){T$$?(this._source=T$$,this._setChanged()):(this._source=null,this.clear())}),T$T.getTexture=function(T$$,T$b,T$u,T$Z,T$E){T$Z<=0&&(T$Z=1),T$E<=0&&(T$E=1),T$$.$_GID||(T$$.$_GID=T$q.getGID());var T$r=T$$.$_GID+"."+T$b+"."+T$u+"."+T$Z+"."+T$E,T$F=T$_.findObject(T$r);if((!T$F||!T$F.source)&&(T$F=T$i.createFromTexture(T$$,T$b,T$u,T$Z,T$E))){if(T$$.alphaTexture){var T$x=T$$.width/T$$.alphaTexture.width;T$F.alphaTexture=T$i.createFromTexture(T$$.alphaTexture,T$b/T$x,T$u/T$x,T$Z/T$x,T$E/T$x)}T$_.saveObject(T$r,T$F),T$F.weakKey=T$r}return T$F},T$T}(T$b),T$v=(function(T$$){function T$b(){T$b.__super.call(this)}T$r(T$b,"laya.ui.UIEvent",T$H),T$b.SHOW_TIP="showtip",T$b.HIDE_TIP="hidetip"}(),function(T$b){function T$$(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,T$$.__super.call(this),this._layout=T$t.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}T$r(T$$,"laya.ui.Component",T$b);var T$u=T$$.prototype;return T$e.imps(T$u,{"laya.ui.IComponent":!0}),T$u.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},T$u.preinitialize=function(){},T$u.createChildren=function(){},T$u.initialize=function(){},T$u.callLater=function(T$$,T$b){T$e.timer.callLater(this,T$$,T$b)},T$u.runCallLater=function(T$$){T$e.timer.runCallLater(this,T$$)},T$u.commitMeasure=function(){},T$u.changeSize=function(){this.event("resize")},T$u.getLayout=function(){return this._layout===T$t.EMPTY&&(this._layout=new T$t),this._layout},T$u._setLayoutEnabled=function(T$$){this._layout&&this._layout.enable!=T$$&&(this._layout.enable=T$$,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},T$u.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},T$u.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},T$u.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},T$u.resetLayoutX=function(){var T$$=this._layout;if(isNaN(T$$.anchorX)||(this.pivotX=T$$.anchorX*this.width),this.layoutEnabled){var T$b=this.parent;T$b&&(isNaN(T$$.centerX)?isNaN(T$$.left)?isNaN(T$$.right)||(this.x=Math.round(T$b.width-this.displayWidth-T$$.right+this.pivotX*this.scaleX)):(this.x=Math.round(T$$.left+this.pivotX*this.scaleX),isNaN(T$$.right)||(this.width=(T$b._width-T$$.left-T$$.right)/(this.scaleX||.01))):this.x=Math.round(.5*(T$b.width-this.displayWidth)+T$$.centerX+this.pivotX*this.scaleX))}},T$u.resetLayoutY=function(){var T$$=this._layout;if(isNaN(T$$.anchorY)||(this.pivotY=T$$.anchorY*this.height),this.layoutEnabled){var T$b=this.parent;T$b&&(isNaN(T$$.centerY)?isNaN(T$$.top)?isNaN(T$$.bottom)||(this.y=Math.round(T$b.height-this.displayHeight-T$$.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(T$$.top+this.pivotY*this.scaleY),isNaN(T$$.bottom)||(this.height=(T$b._height-T$$.top-T$$.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(T$b.height-this.displayHeight)+T$$.centerY+this.pivotY*this.scaleY))}},T$u.onMouseOver=function(T$$){T$e.stage.event("showtip",this._toolTip)},T$u.onMouseOut=function(T$$){T$e.stage.event("hidetip",this._toolTip)},T$F(0,T$u,"displayWidth",function(){return this.width*this.scaleX}),T$F(0,T$u,"width",function(){return this._width?this._width:this.measureWidth},function(T$$){this._width!=T$$&&(this._width=T$$,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),T$F(0,T$u,"measureWidth",function(){var T$$=0;this.commitMeasure();for(var T$b=this.numChildren-1;-1<T$b;T$b--){var T$u=this.getChildAt(T$b);T$u.visible&&(T$$=Math.max(T$u.x+T$u.width*T$u.scaleX,T$$))}return T$$}),T$F(0,T$u,"displayHeight",function(){return this.height*this.scaleY}),T$F(0,T$u,"height",function(){return this._height?this._height:this.measureHeight},function(T$$){this._height!=T$$&&(this._height=T$$,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),T$F(0,T$u,"dataSource",function(){return this._dataSource},function(T$$){for(var T$b in this._dataSource=T$$,this._dataSource)this.hasOwnProperty(T$b)&&"function"!=typeof this[T$b]&&(this[T$b]=this._dataSource[T$b])}),T$F(0,T$u,"scaleY",T$b.prototype._$get_scaleY,function(T$$){T$e.superGet(T$S,this,"scaleY")!=T$$&&(T$e.superSet(T$S,this,"scaleY",T$$),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),T$F(0,T$u,"measureHeight",function(){var T$$=0;this.commitMeasure();for(var T$b=this.numChildren-1;-1<T$b;T$b--){var T$u=this.getChildAt(T$b);T$u.visible&&(T$$=Math.max(T$u.y+T$u.height*T$u.scaleY,T$$))}return T$$}),T$F(0,T$u,"scaleX",T$b.prototype._$get_scaleX,function(T$$){T$e.superGet(T$S,this,"scaleX")!=T$$&&(T$e.superSet(T$S,this,"scaleX",T$$),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),T$F(0,T$u,"top",function(){return this._layout.top},function(T$$){T$$!=this._layout.top&&(this.getLayout().top=T$$,this._setLayoutEnabled(!0)),this.resetLayoutY()}),T$F(0,T$u,"bottom",function(){return this._layout.bottom},function(T$$){T$$!=this._layout.bottom&&(this.getLayout().bottom=T$$,this._setLayoutEnabled(!0)),this.resetLayoutY()}),T$F(0,T$u,"left",function(){return this._layout.left},function(T$$){T$$!=this._layout.left&&(this.getLayout().left=T$$,this._setLayoutEnabled(!0)),this.resetLayoutX()}),T$F(0,T$u,"right",function(){return this._layout.right},function(T$$){T$$!=this._layout.right&&(this.getLayout().right=T$$,this._setLayoutEnabled(!0)),this.resetLayoutX()}),T$F(0,T$u,"centerX",function(){return this._layout.centerX},function(T$$){T$$!=this._layout.centerX&&(this.getLayout().centerX=T$$,this._setLayoutEnabled(!0)),this.resetLayoutX()}),T$F(0,T$u,"centerY",function(){return this._layout.centerY},function(T$$){T$$!=this._layout.centerY&&(this.getLayout().centerY=T$$,this._setLayoutEnabled(!0)),this.resetLayoutY()}),T$F(0,T$u,"anchorX",function(){return this._layout.anchorX},function(T$$){T$$!=this._layout.anchorX&&(this.getLayout().anchorX=T$$,this._setLayoutEnabled(!0)),this.resetLayoutX()}),T$F(0,T$u,"anchorY",function(){return this._layout.anchorY},function(T$$){T$$!=this._layout.anchorY&&(this.getLayout().anchorY=T$$,this._setLayoutEnabled(!0)),this.resetLayoutY()}),T$F(0,T$u,"tag",function(){return this._tag},function(T$$){this._tag=T$$}),T$F(0,T$u,"toolTip",function(){return this._toolTip},function(T$$){this._toolTip!=T$$&&(null!=(this._toolTip=T$$)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),T$F(0,T$u,"comXml",function(){return this._comXml},function(T$$){this._comXml=T$$}),T$F(0,T$u,"gray",function(){return this._gray},function(T$$){T$$!==this._gray&&(this._gray=T$$,T$K.gray(this,T$$))}),T$F(0,T$u,"disabled",function(){return this._disabled},function(T$$){T$$!==this._disabled&&(this.gray=this._disabled=T$$,this.mouseEnabled=!T$$)}),T$$}(T$S)),T$p=function(T$$){function T$b(){this.lockLayer=null,this.popupEffect=function(T$$){T$$.scale(1,1),T$z.from(T$$,{x:T$e.stage.width/2,y:T$e.stage.height/2,scaleX:0,scaleY:0},300,T$g.backOut,T$o.create(this,this.doOpen,[T$$]))},this.closeEffect=function(T$$,T$b){T$z.to(T$$,{x:T$e.stage.width/2,y:T$e.stage.height/2,scaleX:0,scaleY:0},300,T$g.strongOut,T$o.create(this,this.doClose,[T$$,T$b]))},T$b.__super.call(this),this.maskLayer=new T$S,this.popupEffectHandler=T$o.create(this,this.popupEffect,null,!1),this.closeEffectHandler=T$o.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,T$e.stage.addChild(this),T$e.stage.on("resize",this,this._onResize),T$O.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}T$r(T$b,"laya.ui.DialogManager",T$S);var T$u=T$b.prototype;return T$u._closeOnSide=function(){var T$$=this.getChildAt(this.numChildren-1);T$$ instanceof laya.ui.Dialog&&T$$.close("side")},T$u.setLockView=function(T$$){this.lockLayer||(this.lockLayer=new T$Y,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(T$e.stage.width,T$e.stage.height)),this.lockLayer.removeChildren(),T$$&&(T$$.centerX=T$$.centerY=0,this.lockLayer.addChild(T$$))},T$u._onResize=function(T$$){var T$b=this.maskLayer.width=T$e.stage.width,T$u=this.maskLayer.height=T$e.stage.height;this.lockLayer&&this.lockLayer.size(T$b,T$u),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,T$b,T$u,T$O.popupBgColor),this.maskLayer.alpha=T$O.popupBgAlpha;for(var T$Z=this.numChildren-1;-1<T$Z;T$Z--){var T$E=this.getChildAt(T$Z);T$E.popupCenter&&this._centerDialog(T$E)}},T$u._centerDialog=function(T$$){T$$.x=Math.round((T$e.stage.width-T$$.width>>1)+T$$.pivotX),T$$.y=Math.round((T$e.stage.height-T$$.height>>1)+T$$.pivotY)},T$u.open=function(T$$,T$b,T$u){void 0===T$b&&(T$b=!1),void 0===T$u&&(T$u=!1),T$b&&this._closeAll(),T$$.popupCenter&&this._centerDialog(T$$),this.addChild(T$$),(T$$.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),T$u&&null!=T$$.popupEffect?T$$.popupEffect.runWith(T$$):this.doOpen(T$$),this.event("open")},T$u.doOpen=function(T$$){T$$.onOpened()},T$u.lock=function(T$$){this.lockLayer&&(T$$?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},T$u.close=function(T$$,T$b,T$u){void 0===T$u&&(T$u=!1),T$u&&null!=T$$.closeEffect?T$$.closeEffect.runWith([T$$,T$b]):this.doClose(T$$,T$b),this.event("close")},T$u.doClose=function(T$$,T$b){T$$.removeSelf(),T$$.isModal&&this._checkMask(),T$$.closeHandler&&T$$.closeHandler.runWith(T$b),T$$.onClosed(T$b)},T$u.closeAll=function(){this._closeAll(),this.event("close")},T$u._closeAll=function(){for(var T$$=this.numChildren-1;-1<T$$;T$$--){var T$b=this.getChildAt(T$$);T$b&&null!=T$b.close&&this.doClose(T$b)}},T$u.getDialogsByGroup=function(T$$){for(var T$b=[],T$u=this.numChildren-1;-1<T$u;T$u--){var T$Z=this.getChildAt(T$u);T$Z&&T$Z.group===T$$&&T$b.push(T$Z)}return T$b},T$u.closeByGroup=function(T$$){for(var T$b=[],T$u=this.numChildren-1;-1<T$u;T$u--){var T$Z=this.getChildAt(T$u);T$Z&&T$Z.group===T$$&&(T$Z.close(),T$b.push(T$Z))}return T$b},T$u._checkMask=function(){this.maskLayer.removeSelf();for(var T$$=this.numChildren-1;-1<T$$;T$$--){var T$b=this.getChildAt(T$$);if(T$b&&T$b.isModal)return void this.addChildAt(this.maskLayer,T$$)}},T$b}(),T$Y=function(T$$){function T$b(){T$b.__super.call(this)}T$r(T$b,"laya.ui.Box",T$$);var T$u=T$b.prototype;return T$e.imps(T$u,{"laya.ui.IBox":!0}),T$F(0,T$u,"dataSource",T$$.prototype._$get_dataSource,function(T$$){for(var T$b in this._dataSource=T$$){var T$u=this.getChildByName(T$b);T$u?T$u.dataSource=T$$[T$b]:this.hasOwnProperty(T$b)&&"function"!=typeof this[T$b]&&(this[T$b]=T$$[T$b])}}),T$b}(T$v),T$k=function(T$b){function T$u(T$$,T$b){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,T$u.__super.call(this),this._labelColors=T$C.buttonLabelColors,this._stateNum=T$C.buttonStateNum,void 0===T$b&&(T$b=""),this.skin=T$$,this.label=T$b}T$r(T$u,"laya.ui.Button",T$b);var T$$=T$u.prototype;return T$e.imps(T$$,{"laya.ui.ISelect":!0}),T$$.destroy=function(T$$){this.clearEvent(),T$_.clearCache(this,this._skin),T$_.clearObject(this,this._weakKey),void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(T$$),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},T$$.clearEvent=function(){this._skin&&T$E.atalsNotify&&T$E.atalsNotify.off(this._skin,this,this._setBtnSource)},T$$.createChildren=function(){this.graphics=this._bitmap=new T$V},T$$.createText=function(){this._text||(this._text=new T$P,this._text.overflow=T$P.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},T$$.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},T$$.onMouse=function(T$$){if(!1!==this.toggle||!this._selected)return"click"===T$$.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=T$u.stateMap[T$$.type]))},T$$.changeClips=function(){var T$$=T$_.getRes(this._skin);if(T$$)if(this._skin&&""!=this._skin){T$_.clearObject(this,this._weakKey);var T$b=T$$.sourceWidth,T$u=T$$.sourceHeight/this._stateNum;T$$.$_GID||(T$$.$_GID=T$q.getGID());var T$Z=T$$.$_GID+"-"+this._stateNum,T$E=T$_.findObject(T$Z);if(T$q.isOkTextureList(T$E)||(T$E=null),T$E)this._weakKey=T$Z,T$_.keepObject(this,this._weakKey),this._sources=T$E;else{if(this._sources=[],1===this._stateNum)this._sources.push(T$$);else for(var T$r=0;T$r<this._stateNum;T$r++){var T$F=T$i.createFromTexture(T$$,0,T$u*T$r,T$b,T$u);if(T$$.alphaTexture){var T$x=T$$.width/T$$.alphaTexture.width;T$F.alphaTexture=T$i.createFromTexture(T$$.alphaTexture,0/T$x,T$u*T$r/T$x,T$b/T$x,T$u/T$x)}this._sources.push(T$F)}T$_.saveObject(T$Z,this._sources),this._weakKey=T$Z,T$_.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||T$b,this._bitmap.height=this._height||T$u,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=T$b)}else console.warn("lose skin ",this._skin,this.name,this.__className)},T$$.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var T$$=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[T$$]),this.label&&(this._text.color=this._labelColors[T$$],this._strokeColors&&(this._text.strokeColor=this._strokeColors[T$$]))},T$$._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},T$F(0,T$$,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(T$$){this.createText(),this._text.strokeColor=T$$}),T$F(0,T$$,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),T$F(0,T$$,"skin",function(){return this._skin},function(T$$){if(this._skin!=T$$)if(this.clearEvent(),T$_.clearCache(this,this._skin),this._skin=T$$,T$_.keepCache(this,this._skin),T$_.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var T$b=T$E.resAtalsObj&&T$E.resAtalsObj[this._skin];T$b?(T$E.atalsNotify&&T$E.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=T$b.sourceW),0==this.height&&(this.height=T$b.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),T$$._setBtnSource=function(T$$,T$b){T$$===this._skin&&T$b&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},T$F(0,T$$,"state",function(){return this._state},function(T$$){this._state!=T$$&&(this._state=T$$,this._setStateChanged())}),T$F(0,T$$,"text",function(){return this.createText(),this._text}),T$F(0,T$$,"stateNum",function(){return this._stateNum},function(T$$){"string"==typeof T$$&&(T$$=parseInt(T$$)),this._stateNum!=T$$&&(this._stateNum=T$$<1?1:3<T$$?3:T$$,this.callLater(this.changeClips))}),T$F(0,T$$,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(T$$){this._strokeColors=T$K.fillArray(T$C.buttonLabelColors,T$$,String),this._setStateChanged()}),T$F(0,T$$,"labelColors",function(){return this._labelColors.join(",")},function(T$$){this._labelColors=T$K.fillArray(T$C.buttonLabelColors,T$$,String),this._setStateChanged()}),T$F(0,T$$,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),T$F(0,T$$,"label",function(){return this._text?this._text.text:null},function(T$$){(this._text||T$$)&&(this.createText(),this._text.text!=T$$&&(T$$&&!this._text.parent&&this.addChild(this._text),this._text.text=(T$$+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),T$F(0,T$$,"selected",function(){return this._selected},function(T$$){this._selected!=T$$&&(this._selected=T$$,this.state=this._selected?2:0,this.event("change"))}),T$F(0,T$$,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(T$$){this.createText(),this._text.padding=T$K.fillArray(T$C.labelPadding,T$$,Number)}),T$F(0,T$$,"labelSize",function(){return this.createText(),this._text.fontSize},function(T$$){this.createText(),this._text.fontSize=T$$}),T$F(0,T$$,"labelStroke",function(){return this.createText(),this._text.stroke},function(T$$){this.createText(),this._text.stroke=T$$}),T$F(0,T$$,"labelBold",function(){return this.createText(),this._text.bold},function(T$$){this.createText(),this._text.bold=T$$}),T$F(0,T$$,"labelFont",function(){return this.createText(),this._text.font},function(T$$){this.createText(),this._text.font=T$$}),T$F(0,T$$,"labelAlign",function(){return this.createText(),this._text.align},function(T$$){this.createText(),this._text.align=T$$}),T$F(0,T$$,"clickHandler",function(){return this._clickHandler},function(T$$){this._clickHandler=T$$}),T$F(0,T$$,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(T$$){this._bitmap.sizeGrid=T$K.fillArray(T$C.defaultSizeGrid,T$$,Number)}),T$F(0,T$$,"width",T$b.prototype._$get_width,function(T$$){T$e.superSet(T$v,this,"width",T$$),this._autoSize&&(this._bitmap.width=T$$,this._text&&(this._text.width=T$$))}),T$F(0,T$$,"height",T$b.prototype._$get_height,function(T$$){T$e.superSet(T$v,this,"height",T$$),this._autoSize&&(this._bitmap.height=T$$,this._text&&(this._text.height=T$$))}),T$F(0,T$$,"dataSource",T$b.prototype._$get_dataSource,function(T$$){"number"==typeof(this._dataSource=T$$)||"string"==typeof T$$?this.label=T$$+"":T$e.superSet(T$v,this,"dataSource",T$$)}),T$F(0,T$$,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(T$$){this._bitmap._offset=T$$?T$K.fillArray([1,1],T$$,Number):[]}),T$Z(T$u,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),T$u}(T$v),T$M=function(T$b){function T$Z(T$$,T$b,T$u){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,T$Z.__super.call(this),void 0===T$b&&(T$b=1),void 0===T$u&&(T$u=1),this._clipX=T$b,this._clipY=T$u,this.skin=T$$}T$r(T$Z,"laya.ui.Clip",T$b);var T$$=T$Z.prototype;return T$$.destroy=function(T$$){this.clearEvent(),this.clearLoad(),T$_.clearCache(this,this._skin),T$_.clearObject(this,this._weakKey),void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},T$$.dispose=function(){this.destroy(!0),T$e.loader.clearRes(this._skin)},T$$.createChildren=function(){this.graphics=this._bitmap=new T$V},T$$._onDisplay=function(T$$){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},T$$.changeClip=function(){if(this._clipChanged=!1,this._skin){var T$$=T$_.getRes(this._skin);if(T$$)this.loadComplete(this._skin,T$$);else{if(T$E.resAtalsObj&&T$E.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=T$o.create(this,this.loadComplete,[this._skin]),this._progress=null,T$e.loader.load(this._skin,this._complete,this._progress)}}},T$$.loadComplete=function(T$$,T$b){if(T$$===this._skin&&T$b){T$_.clearObject(this,this._weakKey);var T$u=this._clipWidth||Math.ceil(T$b.sourceWidth/this._clipX),T$Z=this._clipHeight||Math.ceil(T$b.sourceHeight/this._clipY),T$E=this._skin+T$u+T$Z,T$r=T$_.findObject(T$E);if(T$q.isOkTextureList(T$r)||(T$r=null),T$r)this._weakKey=T$E,T$_.keepObject(this,this._weakKey),this._sources=T$r;else{this._sources=[];for(var T$F=0;T$F<this._clipY;T$F++)for(var T$x=0;T$x<this._clipX;T$x++){var T$g=T$i.createFromTexture(T$b,T$u*T$x,T$Z*T$F,T$u,T$Z);if(T$b.alphaTexture){var T$H=T$b.width/T$b.alphaTexture.width;T$g.alphaTexture=T$i.createFromTexture(T$b.alphaTexture,T$u*T$x/T$H,T$Z*T$F/T$H,T$u/T$H,T$Z/T$H)}this._sources.push(T$g)}T$_.saveObject(T$E,this._sources),this._weakKey=T$E,T$_.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},T$$.play=function(T$$,T$b){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=-1),this._isPlaying=!0,this.index=T$$,this._toIndex=T$b,this._index++,T$e.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},T$$._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},T$$.stop=function(){this._isPlaying=!1,T$e.timer.clear(this,this._loop),this.event("complete")},T$$._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},T$F(0,T$$,"interval",function(){return this._interval},function(T$$){this._interval!=T$$&&(this._interval=T$$,this._isPlaying&&this.play())}),T$$.clearEvent=function(){this._skin&&T$E.atalsNotify&&T$E.atalsNotify.off(this._skin,this,this._setBtnSource)},T$$.clearLoad=function(){this._skin&&((this._complete||this._progress)&&T$e.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},T$F(0,T$$,"skin",function(){return this._skin},function(T$$){if(this._skin!=T$$)if(this.clearLoad(),this.clearEvent(),T$_.clearCache(this,this._skin),this._skin=T$$){T$_.keepCache(this,this._skin);var T$b=T$_.getRes(T$$),T$u=T$E.resAtalsObj&&T$E.resAtalsObj[this._skin];!T$b&&T$u?T$E.atalsNotify&&T$E.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),T$$._setBtnSource=function(T$$,T$b){T$$===this._skin&&T$b&&(this.loadComplete(T$$,T$b),this.clearEvent())},T$F(0,T$$,"sources",function(){return this._sources},function(T$$){this._sources=T$$,this.index=this._index,this.event("loaded")}),T$F(0,T$$,"clipX",function(){return this._clipX},function(T$$){this._clipX=T$$||1,this._setClipChanged()}),T$F(0,T$$,"clipY",function(){return this._clipY},function(T$$){this._clipY=T$$||1,this._setClipChanged()}),T$F(0,T$$,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),T$F(0,T$$,"clipWidth",function(){return this._clipWidth},function(T$$){this._clipWidth=T$$,this._setClipChanged()}),T$F(0,T$$,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(T$$){this._bitmap.sizeGrid=T$K.fillArray(T$C.defaultSizeGrid,T$$,Number)}),T$F(0,T$$,"group",function(){return this._group},function(T$$){T$$&&this._skin&&T$_.setGroup(this._skin,T$$),this._group=T$$}),T$F(0,T$$,"clipHeight",function(){return this._clipHeight},function(T$$){this._clipHeight=T$$,this._setClipChanged()}),T$F(0,T$$,"width",T$b.prototype._$get_width,function(T$$){T$e.superSet(T$v,this,"width",T$$),this._bitmap.width=T$$}),T$F(0,T$$,"height",T$b.prototype._$get_height,function(T$$){T$e.superSet(T$v,this,"height",T$$),this._bitmap.height=T$$}),T$F(0,T$$,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),T$F(0,T$$,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),T$F(0,T$$,"index",function(){return this._index},function(T$$){this._index=T$$,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[T$$]),this.event("change")}),T$F(0,T$$,"autoPlay",function(){return this._autoPlay},function(T$$){this._autoPlay!=T$$&&((this._autoPlay=T$$)?this.play():this.stop())}),T$F(0,T$$,"isPlaying",function(){return this._isPlaying},function(T$$){this._isPlaying=T$$}),T$F(0,T$$,"dataSource",T$b.prototype._$get_dataSource,function(T$$){"number"==typeof(this._dataSource=T$$)&&Math.floor(T$$)==T$$||"string"==typeof T$$?this.index=parseInt(T$$):T$e.superSet(T$v,this,"dataSource",T$$)}),T$F(0,T$$,"bitmap",function(){return this._bitmap}),T$Z}(T$v),T$l=function(T$b){function T$$(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,T$$.__super.call(this)}T$r(T$$,"laya.ui.ColorPicker",T$b);var T$u=T$$.prototype;return T$u.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._colorPanel&&this._colorPanel.destroy(T$$),this._colorButton&&this._colorButton.destroy(T$$),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},T$u.createChildren=function(){this.addChild(this._colorButton=new T$k),this._colorPanel=new T$Y,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new T$S),this._colorPanel.addChild(this._colorBlock=new T$S),this._colorPanel.addChild(this._colorInput=new T$N)},T$u.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},T$u.onPanelMouseDown=function(T$$){T$$.stopPropagation()},T$u.changePanel=function(){this._panelChanged=!1;var T$$=this._colorPanel.graphics;T$$.clear(),T$$.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(T$$=this._colorTiles.graphics).clear();for(var T$b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],T$u=0;T$u<12;T$u++)for(var T$Z=0;T$Z<20;T$Z++){var T$E=0;T$E=0===T$Z?T$b[T$u]:1===T$Z?0:51*(((3*T$u+T$Z/6)%3<<0)+3*(T$u/6<<0))<<16|T$Z%6*51<<8|(T$u<<0)%6*51;var T$r=T$K.toColor(T$E);this._colors.push(T$r);var T$F=T$Z*this._gridSize,T$x=T$u*this._gridSize;T$$.drawRect(T$F,T$x,this._gridSize,this._gridSize,T$r,"#000000")}},T$u.onColorButtonClick=function(T$$){this._colorPanel.parent?this.close():this.open()},T$u.open=function(){var T$$=this.localToGlobal(new T$D),T$b=T$$.x+this._colorPanel.width<=T$e.stage.width?T$$.x:T$e.stage.width-this._colorPanel.width,T$u=T$$.y+this._colorButton.height;T$u=T$u+this._colorPanel.height<=T$e.stage.height?T$u:T$$.y-this._colorPanel.height,this._colorPanel.pos(T$b,T$u),this._colorPanel.zOrder=1001,T$e._currentStage.addChild(this._colorPanel),T$e.stage.on("mousedown",this,this.removeColorBox)},T$u.close=function(){T$e.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},T$u.removeColorBox=function(T$$){this.close()},T$u.onColorFieldKeyDown=function(T$$){13==T$$.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),T$$.stopPropagation())},T$u.onColorInputChange=function(T$$){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},T$u.onColorTilesClick=function(T$$){this.selectedColor=this.getColorByMouse(),this.close()},T$u.onColorTilesMouseMove=function(T$$){this._colorInput.focus=!1;var T$b=this.getColorByMouse();this._colorInput.text=T$b,this.drawBlock(T$b)},T$u.getColorByMouse=function(){var T$$=this._colorTiles.getMousePoint(),T$b=Math.floor(T$$.x/this._gridSize),T$u=Math.floor(T$$.y/this._gridSize);return this._colors[20*T$u+T$b]},T$u.drawBlock=function(T$$){var T$b=this._colorBlock.graphics;T$b.clear();var T$u=T$$||"#ffffff";T$b.drawRect(0,0,50,20,T$u,this._borderColor),T$$||T$b.drawLine(0,0,50,20,"#ff0000")},T$u.changeColor=function(){var T$$=this.graphics;T$$.clear();var T$b=this._selectedColor||"#000000";T$$.drawRect(0,0,this._colorButton.width,this._colorButton.height,T$b)},T$u._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},T$F(0,T$u,"inputBgColor",function(){return this._inputBgColor},function(T$$){this._inputBgColor=T$$,this._setPanelChanged()}),T$F(0,T$u,"selectedColor",function(){return this._selectedColor},function(T$$){this._selectedColor!=T$$&&(this._selectedColor=this._colorInput.text=T$$,this.drawBlock(T$$),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",T$H.EMPTY.setTo("change",this,this)))}),T$F(0,T$u,"skin",function(){return this._colorButton.skin},function(T$$){this._colorButton.skin=T$$,this.changeColor()}),T$F(0,T$u,"bgColor",function(){return this._bgColor},function(T$$){this._bgColor=T$$,this._setPanelChanged()}),T$F(0,T$u,"borderColor",function(){return this._borderColor},function(T$$){this._borderColor=T$$,this._setPanelChanged()}),T$F(0,T$u,"inputColor",function(){return this._inputColor},function(T$$){this._inputColor=T$$,this._setPanelChanged()}),T$$}(T$v),T$X=function(T$b){function T$u(T$$,T$b){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,T$u.__super.call(this),this._itemColors=T$C.comboBoxItemColors,this.skin=T$$,this.labels=T$b}T$r(T$u,"laya.ui.ComboBox",T$b);var T$$=T$u.prototype;return T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._button&&this._button.destroy(T$$),this._list&&this._list.destroy(T$$),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},T$$.createChildren=function(){this.addChild(this._button=new T$k),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},T$$._createList=function(){this._list=new T$A,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},T$$._setListEvent=function(T$$){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=T$o.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},T$$.onListDown=function(T$$){T$$.stopPropagation()},T$$.onScrollBarDown=function(T$$){T$$.stopPropagation()},T$$.onButtonMouseDown=function(T$$){this.callLater(this.switchTo,[!this._isOpen])},T$$.changeList=function(){this._listChanged=!1;var T$$=this.width-2,T$b=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:T$$,height:this._itemHeight,fontSize:this._itemSize,color:T$b}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},T$$.onlistItemMouse=function(T$$,T$b){var T$u=T$$.type;if("mouseover"===T$u||"mouseout"===T$u){if(this._isCustomList)return;var T$Z=this._list.getCell(T$b);if(!T$Z)return;var T$E=T$Z.getChildByName("label");T$E&&("mouseover"===T$u?(T$E.bgColor=this._itemColors[0],T$E.color=this._itemColors[1]):(T$E.bgColor=null,T$E.color=this._itemColors[2]))}else"click"===T$u&&(this.selectedIndex=T$b,this.isOpen=!1)},T$$.switchTo=function(T$$){this.isOpen=T$$},T$$.changeOpen=function(){this.isOpen=!this._isOpen},T$$.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var T$$=this._list.graphics;T$$.clear(),T$$.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var T$b=this._list.array||[],T$u=T$b.length=0,T$Z=this._labels.length;T$u<T$Z;T$u++)T$b.push({label:this._labels[T$u]});this._list.height=this._listHeight,this._list.array=T$b},T$$.changeSelected=function(){this._button.label=this.selectedLabel},T$$._onStageMouseWheel=function(T$$){this._list&&!this._list.contains(T$$.target)&&this.removeList(null)},T$$.removeList=function(T$$){T$e.stage.off("mousedown",this,this.removeList),T$e.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},T$F(0,T$$,"selectedIndex",function(){return this._selectedIndex},function(T$$){this._selectedIndex!=T$$&&(this._selectedIndex=T$$,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[T$H.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),T$F(0,T$$,"measureHeight",function(){return this._button.height}),T$F(0,T$$,"skin",function(){return this._button.skin},function(T$$){this._button.skin!=T$$&&(this._button.skin=T$$,this._listChanged=!0)}),T$F(0,T$$,"measureWidth",function(){return this._button.width}),T$F(0,T$$,"width",T$b.prototype._$get_width,function(T$$){T$e.superSet(T$v,this,"width",T$$),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),T$F(0,T$$,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(T$$){this.selectedIndex=this._labels.indexOf(T$$)}),T$F(0,T$$,"labels",function(){return this._labels.join(",")},function(T$$){0<this._labels.length&&(this.selectedIndex=-1),T$$?this._labels=T$$.split(","):this._labels.length=0,this._itemChanged=!0}),T$F(0,T$$,"height",T$b.prototype._$get_height,function(T$$){T$e.superSet(T$v,this,"height",T$$),this._button.height=this._height}),T$F(0,T$$,"selectHandler",function(){return this._selectHandler},function(T$$){this._selectHandler=T$$}),T$F(0,T$$,"visibleNum",function(){return this._visibleNum},function(T$$){this._visibleNum=T$$,this._listChanged=!0}),T$F(0,T$$,"labelBold",function(){return this._button.text.bold},function(T$$){this._button.text.bold=T$$}),T$F(0,T$$,"itemColors",function(){return String(this._itemColors)},function(T$$){this._itemColors=T$K.fillArray(this._itemColors,T$$,String),this._listChanged=!0}),T$F(0,T$$,"itemSize",function(){return this._itemSize},function(T$$){this._itemSize=T$$,this._listChanged=!0}),T$F(0,T$$,"scrollBar",function(){return this.list.scrollBar}),T$F(0,T$$,"isOpen",function(){return this._isOpen},function(T$$){if(this._isOpen!=T$$)if(this._isOpen=T$$,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var T$b=this.localToGlobal(T$D.TEMP.setTo(0,0)),T$u=T$b.y+this._button.height;T$u=T$u+this._listHeight<=T$e.stage.height?T$u:T$b.y-this._listHeight,this._list.pos(T$b.x,T$u),this._list.zOrder=1001,T$e._currentStage.addChild(this._list),T$e.stage.once("mousedown",this,this.removeList),T$e.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),T$F(0,T$$,"scrollBarSkin",function(){return this._scrollBarSkin},function(T$$){this._scrollBarSkin=T$$}),T$F(0,T$$,"sizeGrid",function(){return this._button.sizeGrid},function(T$$){this._button.sizeGrid=T$$}),T$F(0,T$$,"button",function(){return this._button}),T$F(0,T$$,"list",function(){return this._list||this._createList(),this._list},function(T$$){T$$&&(T$$.removeSelf(),this._isCustomList=!0,this._list=T$$,this._setListEvent(T$$),this._itemHeight=T$$.getCell(0).height+T$$.spaceY)}),T$F(0,T$$,"dataSource",T$b.prototype._$get_dataSource,function(T$$){"number"==typeof(this._dataSource=T$$)&&Math.floor(T$$)==T$$||"string"==typeof T$$?this.selectedIndex=parseInt(T$$):T$$ instanceof Array?this.labels=T$$.join(","):T$e.superSet(T$v,this,"dataSource",T$$)}),T$F(0,T$$,"labelColors",function(){return this._button.labelColors},function(T$$){this._button.labelColors!=T$$&&(this._button.labelColors=T$$)}),T$F(0,T$$,"labelPadding",function(){return this._button.text.padding.join(",")},function(T$$){this._button.text.padding=T$K.fillArray(T$C.labelPadding,T$$,Number)}),T$F(0,T$$,"labelSize",function(){return this._button.text.fontSize},function(T$$){this._button.text.fontSize=T$$}),T$F(0,T$$,"labelFont",function(){return this._button.text.font},function(T$$){this._button.text.font=T$$}),T$F(0,T$$,"stateNum",function(){return this._button.stateNum},function(T$$){this._button.stateNum=T$$}),T$u}(T$v),T$s=function(T$b){function T$u(T$$){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,T$u.__super.call(this),this._showButtons=T$O.showButtons,this._touchScrollEnable=T$O.touchScrollEnable,this._mouseWheelEnable=T$O.mouseWheelEnable,this.skin=T$$,this.max=1}T$r(T$u,"laya.ui.ScrollBar",T$b);var T$$=T$u.prototype;return T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),this.stopScroll(),this.target=null,T$b.prototype.destroy.call(this,T$$),this.upButton&&this.upButton.destroy(T$$),this.downButton&&this.downButton.destroy(T$$),this.slider&&this.slider.destroy(T$$),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},T$$.createChildren=function(){this.addChild(this.slider=new T$m),this.addChild(this.upButton=new T$k),this.addChild(this.downButton=new T$k)},T$$.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},T$$.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},T$$.onButtonMouseDown=function(T$$){var T$b=T$$.currentTarget===this.upButton;this.slide(T$b),T$e.timer.once(T$C.scrollBarDelayTime,this,this.startLoop,[T$b]),T$e.stage.once("mouseup",this,this.onStageMouseUp)},T$$.startLoop=function(T$$){T$e.timer.frameLoop(1,this,this.slide,[T$$])},T$$.slide=function(T$$){T$$?this.value-=this._scrollSize:this.value+=this._scrollSize},T$$.onStageMouseUp=function(T$$){T$e.timer.clear(this,this.startLoop),T$e.timer.clear(this,this.slide)},T$$.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},T$$.changeSize=function(){T$b.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},T$$.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},T$$.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},T$$.setScroll=function(T$$,T$b,T$u){this.runCallLater(this.changeSize),this.slider.setSlider(T$$,T$b,T$u),this.slider.bar.visible=0<T$b,!this._hide&&this.autoHide&&(this.visible=!1)},T$$.onTargetMouseWheel=function(T$$){this.value-=T$$.delta*this._scrollSize,this.target=this._target},T$$.onTargetMouseDown=function(T$$){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new T$D),this._lastPoint.setTo(T$e.stage.mouseX,T$e.stage.mouseY),T$e.timer.clear(this,this.tweenMove),T$z.clearTween(this),T$e.stage.once("mouseup",this,this.onStageMouseUp2),T$e.stage.once("mouseout",this,this.onStageMouseUp2),T$e.timer.frameLoop(1,this,this.loop)},T$$.loop=function(){var T$$=T$e.stage.mouseY,T$b=T$e.stage.mouseX;if(this._lastOffset=this.isVertical?T$$-this._lastPoint.y:T$b-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?T$e.stage._canvasTransform.getScaleY():T$e.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=T$b,this._lastPoint.y=T$$,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},T$$.onStageMouseUp2=function(T$$){if(T$e.stage.off("mouseup",this,this.onStageMouseUp2),T$e.stage.off("mouseout",this,this.onStageMouseUp2),T$e.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?T$z.to(this,{value:this.min},this.elasticBackTime,T$g.sineOut,T$o.create(this,this.elasticOver)):this._value>this.max&&T$z.to(this,{value:this.max},this.elasticBackTime,T$g.sineOut,T$o.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?T$e.stage.mouseY-this._lastPoint.y:T$e.stage.mouseX-this._lastPoint.x);for(var T$b=0,T$u=Math.min(this._offsets.length,3),T$Z=0;T$Z<T$u;T$Z++)T$b+=this._offsets[this._offsets.length-1-T$Z];if(this._lastOffset=T$b/T$u,(T$b=Math.abs(this._lastOffset))<2)return void this.event("end");60<T$b&&(this._lastOffset=0<this._lastOffset?60:-60);var T$E=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));T$e.timer.frameLoop(1,this,this.tweenMove,[T$E])}},T$$.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&T$z.to(this,{alpha:0},500),this.event("end")},T$$.tweenMove=function(T$$){this._lastOffset*=this.rollRatio;var T$b=NaN;if(0<T$$&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,T$b=.5*-(this.min-T$$-this.value),this._lastOffset>T$b&&(this._lastOffset=T$b)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,T$b=.5*-(this.max+T$$-this.value),this._lastOffset<T$b&&(this._lastOffset=T$b))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(T$e.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?T$z.to(this,{value:this.min},this.elasticBackTime,T$g.sineOut,T$o.create(this,this.elasticOver)):this._value>this.max?T$z.to(this,{value:this.max},this.elasticBackTime,T$g.sineOut,T$o.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&T$z.to(this,{alpha:0},500)}},T$$.stopScroll=function(){this.onStageMouseUp2(null),T$e.timer.clear(this,this.tweenMove),T$z.clearTween(this)},T$F(0,T$$,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),T$F(0,T$$,"skin",function(){return this._skin},function(T$$){this._skin!=T$$&&(this._skin=T$$,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),T$F(0,T$$,"max",function(){return this.slider.max},function(T$$){this.slider.max=T$$}),T$F(0,T$$,"showButtons",function(){return this._showButtons},function(T$$){this._showButtons=T$$,this.callLater(this.changeScrollBar)}),T$F(0,T$$,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),T$F(0,T$$,"min",function(){return this.slider.min},function(T$$){this.slider.min=T$$}),T$F(0,T$$,"value",function(){return this._value},function(T$$){T$$!==this._value&&(this._value=T$$,this._isElastic||(this.slider._value!=T$$&&(this.slider._value=T$$,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),T$F(0,T$$,"isVertical",function(){return this.slider.isVertical},function(T$$){this.slider.isVertical=T$$}),T$F(0,T$$,"sizeGrid",function(){return this.slider.sizeGrid},function(T$$){this.slider.sizeGrid=T$$}),T$F(0,T$$,"scrollSize",function(){return this._scrollSize},function(T$$){this._scrollSize=T$$}),T$F(0,T$$,"dataSource",T$b.prototype._$get_dataSource,function(T$$){"number"==typeof(this._dataSource=T$$)||"string"==typeof T$$?this.value=Number(T$$):T$e.superSet(T$v,this,"dataSource",T$$)}),T$F(0,T$$,"thumbPercent",function(){return this._thumbPercent},function(T$$){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),T$$=1<=T$$?.99:T$$,this._thumbPercent=T$$,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*T$$,T$C.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*T$$,T$C.scrollBarMinNum))}),T$F(0,T$$,"target",function(){return this._target},function(T$$){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=T$$)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),T$F(0,T$$,"hide",function(){return this._hide},function(T$$){this._hide=T$$,this.visible=!T$$}),T$F(0,T$$,"touchScrollEnable",function(){return this._touchScrollEnable},function(T$$){this._touchScrollEnable=T$$,this.target=this._target}),T$F(0,T$$,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(T$$){this._mouseWheelEnable=T$$,this.target=this._target}),T$F(0,T$$,"tick",function(){return this.slider.tick},function(T$$){this.slider.tick=T$$}),T$u}(T$v),T$m=function(T$b){function T$u(T$$){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,T$u.__super.call(this),this.skin=T$$}T$r(T$u,"laya.ui.Slider",T$b);var T$$=T$u.prototype;return T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._bg&&this._bg.destroy(T$$),this._bar&&this._bar.destroy(T$$),this._progress&&this._progress.destroy(T$$),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},T$$.createChildren=function(){this.addChild(this._bg=new T$n),this.addChild(this._bar=new T$k)},T$$.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},T$$.onBarMouseDown=function(T$$){this._globalSacle||(this._globalSacle=new T$D),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=T$e.stage.mouseX,this._ty=T$e.stage.mouseY,T$e.stage.on("mousemove",this,this.mouseMove),T$e.stage.once("mouseup",this,this.mouseUp),T$e.stage.once("mouseout",this,this.mouseUp),this.showValueText()},T$$.showValueText=function(){if(this.showLabel){var T$$=laya.ui.Slider.label;this.addChild(T$$),T$$.textField.changeText(this._value+""),this.isVertical?(T$$.x=this._bar.x+20,T$$.y=.5*(this._bar.height-T$$.height)+this._bar.y):(T$$.y=this._bar.y-20,T$$.x=.5*(this._bar.width-T$$.width)+this._bar.x)}},T$$.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},T$$.mouseUp=function(T$$){T$e.stage.off("mousemove",this,this.mouseMove),T$e.stage.off("mouseup",this,this.mouseUp),T$e.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},T$$.mouseMove=function(T$$){var T$b=this._value;this.isVertical?(this._bar.y+=(T$e.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(T$e.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=T$e.stage.mouseX,this._ty=T$e.stage.mouseY;var T$u=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*T$u)/T$u,this._value!=T$b&&this.sendChangeEvent(),this.showValueText()},T$$.sendChangeEvent=function(T$$){void 0===T$$&&(T$$="change"),this.event(T$$),this.changeHandler&&this.changeHandler.runWith(this._value)},T$$.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},T$$.changeSize=function(){T$b.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},T$$.setSlider=function(T$$,T$b,T$u){this._value=-1,this._min=T$$,this._max=T$$<T$b?T$b:T$$,this.value=T$u<T$$?T$$:T$b<T$u?T$b:T$u},T$$.changeValue=function(){var T$$=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*T$$)/T$$,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var T$b=this._max-this._min;0===T$b&&(T$b=1),this.isVertical?(this._bar.y=(this._value-this._min)/T$b*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/T$b*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},T$$.onBgMouseDown=function(T$$){var T$b=this._bg.getMousePoint();this.isVertical?this.value=T$b.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=T$b.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},T$F(0,T$$,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),T$F(0,T$$,"skin",function(){return this._skin},function(T$$){if(this._skin!=T$$){this._skin=T$$,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var T$b=this._skin.replace(".png","$progress.png");T$_.getRes(T$b)&&(this._progress||(this.addChild(this._progress=new T$n),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=T$b),this.setBarPoint(),this.callLater(this.changeValue)}}),T$F(0,T$$,"allowClickBack",function(){return this._allowClickBack},function(T$$){this._allowClickBack!=T$$&&((this._allowClickBack=T$$)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),T$F(0,T$$,"max",function(){return this._max},function(T$$){this._max!=T$$&&(this._max=T$$,this.callLater(this.changeValue))}),T$F(0,T$$,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),T$F(0,T$$,"tick",function(){return this._tick},function(T$$){this._tick!=T$$&&(this._tick=T$$,this.callLater(this.changeValue))}),T$F(0,T$$,"sizeGrid",function(){return this._bg.sizeGrid},function(T$$){this._bg.sizeGrid=T$$,this._bar.sizeGrid=T$$,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),T$F(0,T$$,"min",function(){return this._min},function(T$$){this._min!=T$$&&(this._min=T$$,this.callLater(this.changeValue))}),T$F(0,T$$,"value",function(){return this._value},function(T$$){if(this._value!=T$$){var T$b=this._value;this._value=T$$,this.changeValue(),this._value!=T$b&&this.sendChangeEvent()}}),T$F(0,T$$,"dataSource",T$b.prototype._$get_dataSource,function(T$$){"number"==typeof(this._dataSource=T$$)||"string"==typeof T$$?this.value=Number(T$$):T$e.superSet(T$v,this,"dataSource",T$$)}),T$F(0,T$$,"bar",function(){return this._bar}),T$Z(T$u,["label",function(){return this.label=new T$c}]),T$u}(T$v),T$n=function(T$b){function T$u(T$$){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,T$u.__super.call(this),this.skin=T$$}T$r(T$u,"laya.ui.Image",T$b);var T$$=T$u.prototype;return T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,T$_.clearCache(this,this._skin)},T$$.dispose=function(){this.destroy(!0),T$_.clearCache(this,this._skin),this.clearEvent()},T$$.createChildren=function(){this.graphics=this._bitmap=new T$V},T$$.setSource=function(T$$,T$b){T$$===this._skin&&T$b&&(this.source=T$b,this.onCompResize(),this.clearEvent())},T$$.clearEvent=function(){this._skin&&T$E.atalsNotify&&T$E.atalsNotify.off(this._skin,this,this.setSource)},T$$.clearLoad=function(){this._skin&&((this._complete||this._progress)&&T$e.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},T$F(0,T$$,"source",function(){return this._bitmap.source},function(T$$){this._bitmap&&(this._bitmap.source=T$$,this.event("loaded"),this.repaint())}),T$F(0,T$$,"dataSource",T$b.prototype._$get_dataSource,function(T$$){"string"==typeof(this._dataSource=T$$)?this.skin=T$$:T$e.superSet(T$v,this,"dataSource",T$$)}),T$F(0,T$$,"measureHeight",function(){return this._bitmap.height}),T$F(0,T$$,"skin",function(){return this._skin},function(T$$){if(this._skin!=T$$)if(T$_.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=T$$){T$_.keepCache(this,this._skin);var T$b=T$_.getRes(T$$),T$u=T$E.resAtalsObj&&T$E.resAtalsObj[this._skin];T$b?(this.source=T$b,this.onCompResize()):T$u?(T$E.atalsNotify&&T$E.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=T$u.sourceW),0==this.height&&(this.height=T$u.sourceH)):(this._complete=T$o.create(this,this.setSource,[this._skin]),this._progress=null,T$e.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),T$F(0,T$$,"group",function(){return this._group},function(T$$){T$$&&this._skin&&T$_.setGroup(this._skin,T$$),this._group=T$$}),T$F(0,T$$,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(T$$){this._bitmap.sizeGrid=T$K.fillArray(T$C.defaultSizeGrid,T$$,Number)}),T$F(0,T$$,"measureWidth",function(){return this._bitmap.width}),T$F(0,T$$,"width",T$b.prototype._$get_width,function(T$$){T$e.superSet(T$v,this,"width",T$$),this._bitmap.width=0==T$$?1e-7:T$$}),T$F(0,T$$,"height",T$b.prototype._$get_height,function(T$$){T$e.superSet(T$v,this,"height",T$$),this._bitmap.height=0==T$$?1e-7:T$$}),T$u}(T$v),T$c=function(T$b){function T$u(T$$){this._tf=null,T$u.__super.call(this),void 0===T$$&&(T$$=""),T$w.defaultColor=T$C.labelColor,this.text=T$$}T$r(T$u,"laya.ui.Label",T$b);var T$$=T$u.prototype;return T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._tf=null},T$$.createChildren=function(){this.addChild(this._tf=new T$P)},T$$.changeText=function(T$$){this._tf.changeText(T$$)},T$F(0,T$$,"padding",function(){return this._tf.padding.join(",")},function(T$$){this._tf.padding=T$K.fillArray(T$C.labelPadding,T$$,Number)}),T$F(0,T$$,"bold",function(){return this._tf.bold},function(T$$){this._tf.bold=T$$}),T$F(0,T$$,"align",function(){return this._tf.align},function(T$$){this._tf.align=T$$}),T$F(0,T$$,"text",function(){return this._tf.text},function(T$$){this._tf.text!=T$$&&(T$$&&(T$$=T$K.adptString(T$$+"")),this._tf.text=T$$,this.event("change"),this._width&&this._height||this.onCompResize())}),T$F(0,T$$,"italic",function(){return this._tf.italic},function(T$$){this._tf.italic=T$$}),T$F(0,T$$,"wordWrap",function(){return this._tf.wordWrap},function(T$$){this._tf.wordWrap=T$$}),T$F(0,T$$,"font",function(){return this._tf.font},function(T$$){this._tf.font=T$$}),T$F(0,T$$,"dataSource",T$b.prototype._$get_dataSource,function(T$$){"number"==typeof(this._dataSource=T$$)||"string"==typeof T$$?this.text=T$$+"":T$e.superSet(T$v,this,"dataSource",T$$)}),T$F(0,T$$,"color",function(){return this._tf.color},function(T$$){this._tf.color=T$$}),T$F(0,T$$,"valign",function(){return this._tf.valign},function(T$$){this._tf.valign=T$$}),T$F(0,T$$,"leading",function(){return this._tf.leading},function(T$$){this._tf.leading=T$$}),T$F(0,T$$,"fontSize",function(){return this._tf.fontSize},function(T$$){this._tf.fontSize=T$$}),T$F(0,T$$,"bgColor",function(){return this._tf.bgColor},function(T$$){this._tf.bgColor=T$$}),T$F(0,T$$,"borderColor",function(){return this._tf.borderColor},function(T$$){this._tf.borderColor=T$$}),T$F(0,T$$,"stroke",function(){return this._tf.stroke},function(T$$){this._tf.stroke=T$$}),T$F(0,T$$,"strokeColor",function(){return this._tf.strokeColor},function(T$$){this._tf.strokeColor=T$$}),T$F(0,T$$,"textField",function(){return this._tf}),T$F(0,T$$,"measureWidth",function(){return this._tf.width}),T$F(0,T$$,"measureHeight",function(){return this._tf.height}),T$F(0,T$$,"width",function(){return this._width||this._tf.text?T$e.superGet(T$v,this,"width"):0},function(T$$){T$e.superSet(T$v,this,"width",T$$),this._tf.width=T$$}),T$F(0,T$$,"height",function(){return this._height||this._tf.text?T$e.superGet(T$v,this,"height"):0},function(T$$){T$e.superSet(T$v,this,"height",T$$),this._tf.height=T$$}),T$F(0,T$$,"overflow",function(){return this._tf.overflow},function(T$$){this._tf.overflow=T$$}),T$F(0,T$$,"underline",function(){return this._tf.underline},function(T$$){this._tf.underline=T$$}),T$F(0,T$$,"underlineColor",function(){return this._tf.underlineColor},function(T$$){this._tf.underlineColor=T$$}),T$u}(T$v),T$J=function(T$b){function T$u(T$$){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,T$u.__super.call(this),this.skin=T$$}T$r(T$u,"laya.ui.ProgressBar",T$b);var T$$=T$u.prototype;return T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._bg&&this._bg.destroy(T$$),this._bar&&this._bar.destroy(T$$),this._bg=this._bar=null,this.changeHandler=null},T$$.createChildren=function(){this.addChild(this._bg=new T$n),this.addChild(this._bar=new T$n)},T$$.changeValue=function(){if(this.sizeGrid){var T$$=this.sizeGrid.split(","),T$b=Number(T$$[3]),T$u=Number(T$$[1]),T$Z=(this.width-T$b-T$u)*this._value;this._bar.width=T$b+T$u+T$Z,this._bar.visible=this._bar.width>T$b+T$u}else this._bar.width=this.width*this._value},T$F(0,T$$,"measureHeight",function(){return this._bg.height}),T$F(0,T$$,"skin",function(){return this._skin},function(T$$){this._skin!=T$$&&(this._skin=T$$,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),T$F(0,T$$,"measureWidth",function(){return this._bg.width}),T$F(0,T$$,"height",T$b.prototype._$get_height,function(T$$){T$e.superSet(T$v,this,"height",T$$),this._bg.height=this._height,this._bar.height=this._height}),T$F(0,T$$,"bar",function(){return this._bar}),T$F(0,T$$,"value",function(){return this._value},function(T$$){this._value!=T$$&&(T$$=1<T$$?1:T$$<0?0:T$$,this._value=T$$,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(T$$))}),T$F(0,T$$,"bg",function(){return this._bg}),T$F(0,T$$,"sizeGrid",function(){return this._bg.sizeGrid},function(T$$){this._bg.sizeGrid=this._bar.sizeGrid=T$$}),T$F(0,T$$,"width",T$b.prototype._$get_width,function(T$$){T$e.superSet(T$v,this,"width",T$$),this._bg.width=this._width,this.callLater(this.changeValue)}),T$F(0,T$$,"dataSource",T$b.prototype._$get_dataSource,function(T$$){"number"==typeof(this._dataSource=T$$)||"string"==typeof T$$?this.value=Number(T$$):T$e.superSet(T$v,this,"dataSource",T$$)}),T$u}(T$v),T$f=(function(T$$){function T$u(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,T$u.__super.call(this),this._tipBox=new T$v,this._tipBox.addChild(this._tipText=new T$P),this._tipText.x=this._tipText.y=5,this._tipText.color=T$u.tipTextColor,this._defaultTipHandler=this._showDefaultTip,T$e.stage.on("showtip",this,this._onStageShowTip),T$e.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}T$r(T$u,"laya.ui.TipManager",T$v);var T$b=T$u.prototype;T$b._onStageHideTip=function(T$$){T$e.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},T$b._onStageShowTip=function(T$$){T$e.timer.once(T$u.tipDelay,this,this._showTip,[T$$],!0)},T$b._showTip=function(T$$){if("string"==typeof T$$){var T$b=String(T$$);Boolean(T$b)&&this._defaultTipHandler(T$b)}else T$$ instanceof laya.utils.Handler?T$$.run():"function"==typeof T$$&&T$$.apply();T$e.stage.on("mousemove",this,this._onStageMouseMove),T$e.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},T$b._onStageMouseDown=function(T$$){this.closeAll()},T$b._onStageMouseMove=function(T$$){this._showToStage(this,T$u.offsetX,T$u.offsetY)},T$b._showToStage=function(T$$,T$b,T$u){void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0);var T$Z=T$$.getBounds();T$$.x=T$e.stage.mouseX+T$b,T$$.y=T$e.stage.mouseY+T$u,T$$.x+T$Z.width>T$e.stage.width&&(T$$.x-=T$Z.width+T$b),T$$.y+T$Z.height>T$e.stage.height&&(T$$.y-=T$Z.height+T$u)},T$b.closeAll=function(){T$e.timer.clear(this,this._showTip),T$e.stage.off("mousemove",this,this._onStageMouseMove),T$e.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},T$b.showDislayTip=function(T$$){this.addChild(T$$),this._showToStage(this),T$e._currentStage.addChild(this)},T$b._showDefaultTip=function(T$$){this._tipText.text=T$$;var T$b=this._tipBox.graphics;T$b.clear(),T$b.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,T$u.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),T$e._currentStage.addChild(this)},T$F(0,T$b,"defaultTipHandler",function(){return this._defaultTipHandler},function(T$$){this._defaultTipHandler=T$$}),T$u.offsetX=10,T$u.offsetY=15,T$u.tipTextColor="#ffffff",T$u.tipBackColor="#111111",T$u.tipDelay=200}(),function(T$$){var T$N;function T$D(){this._idMap=null,this._aniList=null,this._watchMap={},T$D.__super.call(this)}T$r(T$D,"laya.ui.View",T$Y);var T$b=T$D.prototype;return T$b.createView=function(T$$){if(T$$.animations&&!this._idMap&&(this._idMap={}),T$D.createComp(T$$,this,this),T$$.animations){var T$b,T$u,T$Z=[],T$E=T$$.animations,T$r=0,T$F=T$E.length;for(T$r=0;T$r<T$F;T$r++){switch(T$b=new T$I,T$u=T$E[T$r],T$b._setUp(this._idMap,T$u),(this[T$u.name]=T$b)._setControlNode(this),T$u.action){case 1:T$b.play(0,!1);break;case 2:T$b.play(0,!0)}T$Z.push(T$b)}this._aniList=T$Z}0<this._width&&null==T$$.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},T$b.onEvent=function(T$$,T$b){},T$b.loadUI=function(T$$){var T$b=T$D.uiMap[T$$];T$b&&this.createView(T$b)},T$b.destroy=function(T$$){void 0===T$$&&(T$$=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,T$$)},T$b.changeData=function(T$$){var T$b=this._watchMap[T$$];if(T$b){console.log("change",T$$);for(var T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++){T$b[T$u].exe(this)}}},T$D._regs=function(){for(var T$$ in T$D.uiClassMap)T$L.regClass(T$$,T$D.uiClassMap[T$$])},T$D.createComp=function(T$$,T$b,T$u,T$Z){if(!(T$b=T$b||T$D.getCompInstance(T$$)))return console.warn("can not create:"+T$$.type),null;var T$E=T$$.child;if(T$E)for(var T$r=T$b instanceof laya.ui.List,T$F=0,T$x=T$E.length;T$F<T$x;T$F++){var T$g=T$E[T$F];if(!T$b.hasOwnProperty("itemRender")||"render"!=T$g.props.name&&"render"!==T$g.props.renderType)if("Graphic"==T$g.type)T$L.addGraphicsToSprite(T$g,T$b);else if(T$L.isDrawType(T$g.type))T$L.addGraphicToSprite(T$g,T$b,!0);else{if(T$r){var T$H=[],T$w=T$D.createComp(T$g,null,T$u,T$H);T$H.length&&(T$w._$bindData=T$H)}else T$w=T$D.createComp(T$g,null,T$u,T$Z);"Script"==T$g.type?"owner"in T$w?T$w.owner=T$b:"target"in T$w&&(T$w.target=T$b):"mask"==T$g.props.renderType||"mask"==T$g.props.name?T$b.mask=T$w:T$w instanceof laya.display.Sprite&&T$b.addChild(T$w)}else T$b.itemRender=T$g}var T$I=T$$.props;for(var T$o in T$I){var T$N=T$I[T$o];T$D.eventDic[T$o]?T$N&&T$u&&T$b.on(T$o,T$u,T$u.onEvent,[T$N]):T$D.setCompValue(T$b,T$o,T$N,T$u,T$Z)}return T$e.__typeof(T$b,"laya.ui.IItem")&&T$b.initItems(),T$$.compId&&T$u&&T$u._idMap&&(T$u._idMap[T$$.compId]=T$b),T$b},T$D.setCompValue=function(T$$,T$b,T$u,T$Z,T$E){if("string"==typeof T$u&&-1<T$u.indexOf("${")){if(T$D._sheet||(T$D._sheet=T$L.getClass("laya.data.Table")),!T$D._sheet)return void console.warn("Can not find class Sheet");if(T$E)T$E.push(T$$,T$b,T$u);else if(T$Z){-1==T$u.indexOf("].")&&(T$u=T$u.replace(".","[0]."));var T$r,T$F,T$x=new T$N(T$$,T$b,T$u);T$x.exe(T$Z);for(var T$g=T$u.replace(/\[.*?\]\./g,".");null!=(T$r=T$D._parseWatchData.exec(T$g));){for(var T$H=T$r[1];null!=(T$F=T$D._parseKeyWord.exec(T$H));){var T$w=T$F[0],T$I=T$Z._watchMap[T$w]||(T$Z._watchMap[T$w]=[]);T$I.push(T$x),T$D._sheet.I.notifer.on(T$w,T$Z,T$Z.changeData,[T$w])}(T$I=T$Z._watchMap[T$H]||(T$Z._watchMap[T$H]=[])).push(T$x),T$D._sheet.I.notifer.on(T$H,T$Z,T$Z.changeData,[T$H])}}}else if("var"===T$b&&T$Z)T$Z[T$u]=T$$;else if("onClick"==T$b){var T$o=T$e._runScript("(function(){"+T$u+"})");T$$.on("click",T$Z,T$o)}else T$$[T$b]="true"===T$u||"false"!==T$u&&T$u},T$D.getCompInstance=function(T$$){var T$b,T$u=T$$.props?T$$.props.runtime:null;return T$b=T$u?T$D.viewClassMap[T$u]||T$D.uiClassMap[T$u]||T$e.__classmap[T$u]:T$D.uiClassMap[T$$.type],T$$.props&&T$$.props.hasOwnProperty("renderType")&&"instance"==T$$.props.renderType?T$b.instance:T$b?new T$b:null},T$D.regComponent=function(T$$,T$b){T$D.uiClassMap[T$$]=T$b,T$L.regClass(T$$,T$b)},T$D.regViewRuntime=function(T$$,T$b){T$D.viewClassMap[T$$]=T$b},T$D.uiMap={},T$D.viewClassMap={},T$D._sheet=null,T$Z(T$D,["uiClassMap",function(){return this.uiClassMap={ViewStack:T$$$,LinkButton:T$k,TextArea:T$H$,ColorPicker:T$l,Box:T$Y,Button:T$k,CheckBox:T$Q,Clip:T$M,ComboBox:T$X,Component:T$v,HScrollBar:T$j,HSlider:T$d,Image:T$n,Label:T$c,List:T$A,Panel:T$h,ProgressBar:T$J,Radio:T$B,RadioGroup:T$x$,ScrollBar:T$s,Slider:T$m,Tab:T$g$,TextInput:T$u$,View:T$D,VScrollBar:T$b$,VSlider:T$Z$,Tree:T$R,HBox:T$r$,VBox:T$F$,Sprite:T$S,Animation:T$u,Text:T$P,FontClip:T$G}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),T$D.__init$=function(){T$D._regs(),T$N=function(){function T$$(T$$,T$b,T$u){this.comp=null,this.prop=null,this.value=null,this.comp=T$$,this.prop=T$b,this.value=T$u}return T$r(T$$,""),T$$.prototype.exe=function(T$$){var T$b=T$K.getBindFun(this.value);this.comp[this.prop]=T$b.call(this,T$$)},T$$}()},T$D}()),T$Q=function(T$$){function T$u(T$$,T$b){void 0===T$b&&(T$b=""),T$u.__super.call(this,T$$,T$b)}T$r(T$u,"laya.ui.CheckBox",T$$);var T$b=T$u.prototype;return T$b.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},T$b.initialize=function(){T$$.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},T$F(0,T$b,"dataSource",T$$.prototype._$get_dataSource,function(T$$){"boolean"==typeof(this._dataSource=T$$)?this.selected=T$$:"string"==typeof T$$?this.selected="true"===T$$:T$e.superSet(T$k,this,"dataSource",T$$)}),T$u}(T$k),T$W=function(T$$){function T$b(){this._space=0,this._align="none",this._itemChanged=!1,T$b.__super.call(this)}T$r(T$b,"laya.ui.LayoutBox",T$Y);var T$u=T$b.prototype;return T$u.addChild=function(T$$){return T$$.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,T$$)},T$u.onResize=function(T$$){this._setItemChanged()},T$u.addChildAt=function(T$$,T$b){return T$$.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,T$$,T$b)},T$u.removeChild=function(T$$){return T$$.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,T$$)},T$u.removeChildAt=function(T$$){return this.getChildAt(T$$).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,T$$)},T$u.refresh=function(){this._setItemChanged()},T$u.changeItems=function(){this._itemChanged=!1},T$u.sortItem=function(T$$){T$$&&T$$.sort(function(T$$,T$b){return T$$.y-T$b.y})},T$u._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},T$F(0,T$u,"space",function(){return this._space},function(T$$){this._space=T$$,this._setItemChanged()}),T$F(0,T$u,"align",function(){return this._align},function(T$$){this._align=T$$,this._setItemChanged()}),T$b}(),T$G=function(T$b){function T$u(T$$,T$b){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,T$u.__super.call(this),T$$&&(this.skin=T$$),T$b&&(this.sheet=T$b)}T$r(T$u,"laya.ui.FontClip",T$b);var T$$=T$u.prototype;return T$$.createChildren=function(){this._bitmap=new T$V,this.on("loaded",this,this._onClipLoaded)},T$$._onClipLoaded=function(){this.callLater(this.changeValue)},T$$.changeValue=function(){var T$$;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),T$$=this._sources[0]))){var T$b="horizontal"===this._direction;T$b?(this._wordsW=this._valueArr.length*(T$$.sourceWidth+this.spaceX),this._wordsH=T$$.sourceHeight):(this._wordsW=T$$.sourceWidth,this._wordsH=(T$$.sourceHeight+this.spaceY)*this._valueArr.length);var T$u=0;if(this._width)switch(this._align){case"center":T$u=.5*(this._width-this._wordsW);break;case"right":T$u=this._width-this._wordsW;break;default:T$u=0}for(var T$Z=0,T$E=this._valueArr.length;T$Z<T$E;T$Z++){var T$r=this._indexMap[this._valueArr.charAt(T$Z)];this.sources[T$r]&&(T$$=this.sources[T$r],T$b?this.graphics.drawTexture(T$$,T$u+T$Z*(T$$.sourceWidth+this.spaceX),0,T$$.sourceWidth,T$$.sourceHeight):this.graphics.drawTexture(T$$,0+T$u,T$Z*(T$$.sourceHeight+this.spaceY),T$$.sourceWidth,T$$.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),T$b.prototype.destroy.call(this,T$$)},T$F(0,T$$,"sheet",function(){return this._sheet},function(T$$){T$$+="";var T$b=(this._sheet=T$$).split(" ");this._clipX=String(T$b[0]).length,this.clipY=T$b.length,this._indexMap={};for(var T$u=0;T$u<this._clipY;T$u++)for(var T$Z=T$b[T$u].split(""),T$E=0,T$r=T$Z.length;T$E<T$r;T$E++)this._indexMap[T$Z[T$E]]=T$u*this._clipX+T$E}),T$F(0,T$$,"height",T$b.prototype._$get_height,function(T$$){T$e.superSet(T$M,this,"height",T$$),this.callLater(this.changeValue)}),T$F(0,T$$,"direction",function(){return this._direction},function(T$$){this._direction=T$$,this.callLater(this.changeValue)}),T$F(0,T$$,"value",function(){return this._valueArr?this._valueArr:""},function(T$$){T$$+="",this._valueArr=T$$,this.callLater(this.changeValue)}),T$F(0,T$$,"width",T$b.prototype._$get_width,function(T$$){T$e.superSet(T$M,this,"width",T$$),this.callLater(this.changeValue)}),T$F(0,T$$,"spaceX",function(){return this._spaceX},function(T$$){this._spaceX=T$$,"horizontal"===this._direction&&this.callLater(this.changeValue)}),T$F(0,T$$,"spaceY",function(){return this._spaceY},function(T$$){this._spaceY=T$$,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),T$F(0,T$$,"align",function(){return this._align},function(T$$){this._align=T$$,this.callLater(this.changeValue)}),T$F(0,T$$,"measureWidth",function(){return this._wordsW}),T$F(0,T$$,"measureHeight",function(){return this._wordsH}),T$u}(T$M),T$A=function(T$$){function T$b(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new T$D,T$b.__super.call(this)}T$r(T$b,"laya.ui.List",T$$);var T$u=T$b.prototype;return T$e.imps(T$u,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),T$u.destroy=function(T$$){void 0===T$$&&(T$$=!0),this._content&&this._content.destroy(T$$),this._scrollBar&&this._scrollBar.destroy(T$$),laya.ui.Component.prototype.destroy.call(this,T$$),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},T$u.createChildren=function(){this.addChild(this._content=new T$Y)},T$u.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=T$e.superGet(T$Y,this,"cacheAs")),T$e.superSet(T$Y,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},T$u.onScrollEnd=function(){T$e.superSet(T$Y,this,"cacheAs",this._$P.cacheAs)},T$u._removePreScrollBar=function(){var T$$=this.removeChildByName("scrollBar");T$$&&T$$.destroy(!0)},T$u.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var T$$=this._getOneCell(),T$b=T$$.width+this._spaceX||1,T$u=T$$.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/T$b):Math.ceil(this._width/T$b)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/T$u):Math.round(this._height/T$u));var T$Z=this._width?this._width:T$b*this.repeatX-this._spaceX,T$E=this._height?this._height:T$u*this.repeatY-this._spaceY;this._cellSize=this._isVertical?T$u:T$b,this._cellOffset=this._isVertical?T$u*Math.max(this._repeatY2,this._repeatY)-T$E-this._spaceY:T$b*Math.max(this._repeatX2,this._repeatX)-T$Z-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=T$E:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=T$Z),this.setContentSize(T$Z,T$E);var T$r=this._isVertical?this.repeatX:this.repeatY,T$F=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,T$r,T$F),this._createdLine=T$F,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},T$u._getOneCell=function(){if(0===this._cells.length){var T$$=this.createItem();if(this._offset.setTo(T$$.x,T$$.y),this.cacheContent)return T$$;this._cells.push(T$$)}return this._cells[0]},T$u._createItems=function(T$$,T$b,T$u){var T$Z=this._content,T$E=this._getOneCell(),T$r=T$E.width+this._spaceX,T$F=T$E.height+this._spaceY;if(this.cacheContent){var T$x=new T$Y;T$x.cacheAsBitmap=!0,T$x.pos((this._isVertical?0:T$$)*T$r,(this._isVertical?T$$:0)*T$F),this._content.addChild(T$x),this._content.optimizeScrollRect=!0,T$Z=T$x}else{for(var T$g=[],T$H=this._cells.length-1;-1<T$H;T$H--){var T$w=this._cells[T$H];T$w.removeSelf(),T$g.push(T$w)}this._cells.length=0}for(var T$I=T$$;T$I<T$u;T$I++)for(var T$o=0;T$o<T$b;T$o++)(T$E=T$g&&T$g.length?T$g.pop():this.createItem()).x=(this._isVertical?T$o:T$I)*T$r-T$Z.x,T$E.y=(this._isVertical?T$I:T$o)*T$F-T$Z.y,T$E.name="item"+(T$I*T$b+T$o),T$Z.addChild(T$E),this.addCell(T$E)},T$u.createItem=function(){var T$$=[];if("function"==typeof this._itemRender)var T$b=new this._itemRender;else T$b=T$f.createComp(this._itemRender,null,null,T$$);if(0==T$$.length&&T$b._watchMap){var T$u=T$b._watchMap;for(var T$Z in T$u)for(var T$E=T$u[T$Z],T$r=0;T$r<T$E.length;T$r++){var T$F=T$E[T$r];T$$.push(T$F.comp,T$F.prop,T$F.value)}}return T$$.length&&(T$b._$bindData=T$$),T$b},T$u.addCell=function(T$$){T$$.on("click",this,this.onCellMouse),T$$.on("rightclick",this,this.onCellMouse),T$$.on("mouseover",this,this.onCellMouse),T$$.on("mouseout",this,this.onCellMouse),T$$.on("mousedown",this,this.onCellMouse),T$$.on("mouseup",this,this.onCellMouse),this._cells.push(T$$)},T$u.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var T$$=0,T$b=T$$=0;T$b<1e4;T$b++){var T$u=this.getChildByName("item"+T$b);if(!T$u)break;this.addCell(T$u),T$$++}this.repeatY=T$$}},T$u.setContentSize=function(T$$,T$b){this._content.width=T$$,this._content.height=T$b,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new T$T),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,T$$,T$b),this._content.scrollRect=this._content.scrollRect),this.event("resize")},T$u.onCellMouse=function(T$$){"mousedown"===T$$.type&&(this._isMoved=!1);var T$b=T$$.currentTarget,T$u=this._startIndex+this._cells.indexOf(T$b);T$u<0||("click"===T$$.type||"rightclick"===T$$.type?this.selectEnable&&!this._isMoved?this.selectedIndex=T$u:this.changeCellState(T$b,!0,0):"mouseover"!==T$$.type&&"mouseout"!==T$$.type||this._selectedIndex===T$u||this.changeCellState(T$b,"mouseover"===T$$.type,0),this.mouseHandler&&this.mouseHandler.runWith([T$$,T$u]))},T$u.changeCellState=function(T$$,T$b,T$u){var T$Z=T$$.getChildByName("selectBox");T$Z&&(this.selectEnable=!0,T$Z.visible=T$b,T$Z.index=T$u)},T$u.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},T$u.onScrollBarChange=function(T$$){this.runCallLater(this.changeCells);var T$b=this._scrollBar.value,T$u=this._isVertical?this.repeatX:this.repeatY,T$Z=this._isVertical?this.repeatY:this.repeatX,T$E=Math.floor(T$b/this._cellSize);if(this.cacheContent)T$F=T$Z+1,this._createdLine-T$E<T$F&&(this._createItems(this._createdLine,T$u,this._createdLine+T$F),this.renderItems(this._createdLine*T$u,0),this._createdLine+=T$F);else{var T$r=T$E*T$u,T$F=0;if(T$r>this._startIndex){T$F=T$r-this._startIndex;var T$x=!0,T$g=this._startIndex+T$u*(T$Z+1);this._isMoved=!0}else T$r<this._startIndex&&(T$F=this._startIndex-T$r,T$x=!1,T$g=this._startIndex-1,this._isMoved=!0);for(var T$H=0;T$H<T$F;T$H++){if(T$x){var T$w=this._cells.shift();this._cells[this._cells.length]=T$w;var T$I=T$g+T$H}else T$w=this._cells.pop(),this._cells.unshift(T$w),T$I=T$g-T$H;var T$o=Math.floor(T$I/T$u)*this._cellSize;this._isVertical?T$w.y=T$o:T$w.x=T$o,this.renderItem(T$w,T$I)}this._startIndex=T$r,this.changeSelectStatus()}var T$N=this._content.scrollRect;this._isVertical?(T$N.y=T$b-this._offset.y,T$N.x=-this._offset.x):(T$N.y=-this._offset.y,T$N.x=T$b-this._offset.x),this._content.scrollRect=T$N},T$u.posCell=function(T$$,T$b){if(this._scrollBar){var T$u=this._isVertical?this.repeatX:this.repeatY,T$Z=(this._isVertical?this.repeatY:this.repeatX,Math.floor(T$b/T$u)*this._cellSize);this._isVertical?T$$.y=T$Z:T$$.x=T$Z}},T$u.changeSelectStatus=function(){for(var T$$=0,T$b=this._cells.length;T$$<T$b;T$$++)this.changeCellState(this._cells[T$$],this._selectedIndex===this._startIndex+T$$,1)},T$u.renderItems=function(T$$,T$b){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0);for(var T$u=T$$,T$Z=T$b||this._cells.length;T$u<T$Z;T$u++)this.renderItem(this._cells[T$u],this._startIndex+T$u);this.changeSelectStatus()},T$u.renderItem=function(T$$,T$b){this._array&&0<=T$b&&T$b<this._array.length?(T$$.visible=!0,T$$._$bindData?(T$$._dataSource=this._array[T$b],this._bindData(T$$,this._array[T$b])):T$$.dataSource=this._array[T$b],this.cacheContent||this.posCell(T$$,T$b),this.hasListener("render")&&this.event("render",[T$$,T$b]),this.renderHandler&&this.renderHandler.runWith([T$$,T$b])):(T$$.visible=!1,T$$.dataSource=null)},T$u._bindData=function(T$$,T$b){for(var T$u=T$$._$bindData,T$Z=0,T$E=T$u.length;T$Z<T$E;T$Z++){var T$r=T$u[T$Z++],T$F=T$u[T$Z++],T$x=T$u[T$Z],T$g=T$K.getBindFun(T$x);T$r[T$F]=T$g.call(this,T$b)}},T$u.refresh=function(){this.array=this._array},T$u.getItem=function(T$$){return-1<T$$&&T$$<this._array.length?this._array[T$$]:null},T$u.changeItem=function(T$$,T$b){-1<T$$&&T$$<this._array.length&&(this._array[T$$]=T$b,T$$>=this._startIndex&&T$$<this._startIndex+this._cells.length&&this.renderItem(this.getCell(T$$),T$$))},T$u.setItem=function(T$$,T$b){this.changeItem(T$$,T$b)},T$u.addItem=function(T$$){this._array.push(T$$),this.array=this._array},T$u.addItemAt=function(T$$,T$b){this._array.splice(T$b,0,T$$),this.array=this._array},T$u.deleteItem=function(T$$){this._array.splice(T$$,1),this.array=this._array},T$u.getCell=function(T$$){return this.runCallLater(this.changeCells),-1<T$$&&this._cells?this._cells[(T$$-this._startIndex)%this._cells.length]:null},T$u.scrollTo=function(T$$){if(this._scrollBar){var T$b=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(T$$/T$b)*this._cellSize}else this.startIndex=T$$},T$u.tweenTo=function(T$$,T$b,T$u){if(void 0===T$b&&(T$b=200),this._scrollBar){var T$Z=this._isVertical?this.repeatX:this.repeatY;T$z.to(this._scrollBar,{value:Math.floor(T$$/T$Z)*this._cellSize},T$b,null,T$u,0,!0)}else this.startIndex=T$$,T$u&&T$u.run()},T$u._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},T$u.commitMeasure=function(){this.runCallLater(this.changeCells)},T$F(0,T$u,"cacheAs",T$$.prototype._$get_cacheAs,function(T$$){T$e.superSet(T$Y,this,"cacheAs",T$$),this._scrollBar&&(this._$P.cacheAs=null,"none"!==T$$?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),T$F(0,T$u,"content",function(){return this._content}),T$F(0,T$u,"height",T$$.prototype._$get_height,function(T$$){T$$!=this._height&&(T$e.superSet(T$Y,this,"height",T$$),this._setCellChanged())}),T$F(0,T$u,"itemRender",function(){return this._itemRender},function(T$$){if(this._itemRender!=T$$){this._itemRender=T$$;for(var T$b=this._cells.length-1;-1<T$b;T$b--)this._cells[T$b].destroy();this._cells.length=0,this._setCellChanged()}}),T$F(0,T$u,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(T$$){this._removePreScrollBar();var T$b=new T$b$;T$b.name="scrollBar",T$b.right=0,T$$&&" "!=T$$&&(T$b.skin=T$$),this.scrollBar=T$b,this.addChild(T$b),this._setCellChanged()}),T$F(0,T$u,"page",function(){return this._page},function(T$$){this._page=T$$,this._array&&(this._page=0<T$$?T$$:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),T$F(0,T$u,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(T$$){this._removePreScrollBar();var T$b=new T$j;T$b.name="scrollBar",T$b.bottom=0,T$$&&" "!=T$$&&(T$b.skin=T$$),this.scrollBar=T$b,this.addChild(T$b),this._setCellChanged()}),T$F(0,T$u,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(T$$){this._repeatX=T$$,this._setCellChanged()}),T$F(0,T$u,"scrollBar",function(){return this._scrollBar},function(T$$){this._scrollBar!=T$$&&(this._scrollBar=T$$)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),T$F(0,T$u,"width",T$$.prototype._$get_width,function(T$$){T$$!=this._width&&(T$e.superSet(T$Y,this,"width",T$$),this._setCellChanged())}),T$F(0,T$u,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(T$$){this._repeatY=T$$,this._setCellChanged()}),T$F(0,T$u,"spaceX",function(){return this._spaceX},function(T$$){this._spaceX=T$$,this._setCellChanged()}),T$F(0,T$u,"spaceY",function(){return this._spaceY},function(T$$){this._spaceY=T$$,this._setCellChanged()}),T$F(0,T$u,"selectedIndex",function(){return this._selectedIndex},function(T$$){this._selectedIndex!=T$$&&(this._selectedIndex=T$$,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(T$$),this.startIndex=this._startIndex)}),T$F(0,T$u,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(T$$){this.selectedIndex=this._array.indexOf(T$$)}),T$F(0,T$u,"length",function(){return this._array?this._array.length:0}),T$F(0,T$u,"selection",function(){return this.getCell(this._selectedIndex)},function(T$$){this.selectedIndex=this._startIndex+this._cells.indexOf(T$$)}),T$F(0,T$u,"startIndex",function(){return this._startIndex},function(T$$){this._startIndex=0<T$$?T$$:0,this.callLater(this.renderItems)}),T$F(0,T$u,"array",function(){return this._array},function(T$$){this.runCallLater(this.changeCells),this._array=T$$||[];var T$b=this._array.length;if(this.totalPage=Math.ceil(T$b/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<T$b?this._selectedIndex:T$b-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var T$u=this._isVertical?this.repeatX:this.repeatY,T$Z=this._isVertical?this.repeatY:this.repeatX,T$E=Math.ceil(T$b/T$u);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=T$Z/T$E,this._scrollBar.setScroll(0,(T$E-T$Z)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),T$F(0,T$u,"dataSource",T$$.prototype._$get_dataSource,function(T$$){"number"==typeof(this._dataSource=T$$)&&Math.floor(T$$)==T$$||"string"==typeof T$$?this.selectedIndex=parseInt(T$$):T$$ instanceof Array?this.array=T$$:T$e.superSet(T$Y,this,"dataSource",T$$)}),T$F(0,T$u,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),T$b}(T$Y),T$j=function(T$$){function T$b(){T$b.__super.call(this)}return T$r(T$b,"laya.ui.HScrollBar",T$$),T$b.prototype.initialize=function(){T$$.prototype.initialize.call(this),this.slider.isVertical=!1},T$b}(T$s),T$h=function(T$$){function T$b(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,T$b.__super.call(this),this.width=this.height=100}T$r(T$b,"laya.ui.Panel",T$$);var T$u=T$b.prototype;return T$u.destroy=function(T$$){void 0===T$$&&(T$$=!0),laya.ui.Component.prototype.destroy.call(this,T$$),this._content&&this._content.destroy(T$$),this._vScrollBar&&this._vScrollBar.destroy(T$$),this._hScrollBar&&this._hScrollBar.destroy(T$$),this._vScrollBar=null,this._hScrollBar=null,this._content=null},T$u.destroyChildren=function(){this._content.destroyChildren()},T$u.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new T$Y)},T$u.addChild=function(T$$){return T$$.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(T$$)},T$u.onResize=function(){this._setScrollChanged()},T$u.addChildAt=function(T$$,T$b){return T$$.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(T$$,T$b)},T$u.removeChild=function(T$$){return T$$.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(T$$)},T$u.removeChildAt=function(T$$){return this.getChildAt(T$$).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(T$$)},T$u.removeChildren=function(T$$,T$b){return void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=2147483647),this._content.removeChildren(T$$,T$b),this._setScrollChanged(),this},T$u.getChildAt=function(T$$){return this._content.getChildAt(T$$)},T$u.getChildByName=function(T$$){return this._content.getChildByName(T$$)},T$u.getChildIndex=function(T$$){return this._content.getChildIndex(T$$)},T$u.changeScroll=function(){this._scrollChanged=!1;var T$$=this.contentWidth||1,T$b=this.contentHeight||1,T$u=this._vScrollBar,T$Z=this._hScrollBar,T$E=T$u&&T$b>this._height,T$r=T$Z&&T$$>this._width,T$F=T$E?this._width-T$u.width:this._width,T$x=T$r?this._height-T$Z.height:this._height;T$u&&(T$u.x=this._width-T$u.width,T$u.y=0,T$u.height=this._height-(T$r?T$Z.height:0),T$u.scrollSize=Math.max(.033*this._height,1),T$u.thumbPercent=T$x/T$b,T$u.setScroll(0,T$b-T$x,T$u.value)),T$Z&&(T$Z.x=0,T$Z.y=this._height-T$Z.height,T$Z.width=this._width-(T$E?T$u.width:0),T$Z.scrollSize=Math.max(.033*this._width,1),T$Z.thumbPercent=T$F/T$$,T$Z.setScroll(0,T$$-T$F,T$Z.value))},T$u.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},T$u.setContentSize=function(T$$,T$b){var T$u=this._content;T$u.width=T$$,T$u.height=T$b,T$u.scrollRect||(T$u.scrollRect=new T$T),T$u.scrollRect.setTo(0,0,T$$,T$b),T$u.scrollRect=T$u.scrollRect},T$u.onScrollBarChange=function(T$$){var T$b=this._content.scrollRect;if(T$b){var T$u=Math.round(T$$.value);T$$.isVertical?T$b.y=T$u:T$b.x=T$u,this._content.scrollRect=T$b}},T$u.scrollTo=function(T$$,T$b){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),this.vScrollBar&&(this.vScrollBar.value=T$b),this.hScrollBar&&(this.hScrollBar.value=T$$)},T$u.refresh=function(){this.changeScroll()},T$u.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=T$e.superGet(T$Y,this,"cacheAs")),T$e.superSet(T$Y,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},T$u.onScrollEnd=function(){T$e.superSet(T$Y,this,"cacheAs",this._$P.cacheAs)},T$u._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},T$F(0,T$u,"numChildren",function(){return this._content.numChildren}),T$F(0,T$u,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(T$$){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new T$j),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=T$$}),T$F(0,T$u,"contentWidth",function(){for(var T$$=0,T$b=this._content.numChildren-1;-1<T$b;T$b--){var T$u=this._content.getChildAt(T$b);T$$=Math.max(T$u.x+T$u.width*T$u.scaleX,T$$)}return T$$}),T$F(0,T$u,"contentHeight",function(){for(var T$$=0,T$b=this._content.numChildren-1;-1<T$b;T$b--){var T$u=this._content.getChildAt(T$b);T$$=Math.max(T$u.y+T$u.height*T$u.scaleY,T$$)}return T$$}),T$F(0,T$u,"width",T$$.prototype._$get_width,function(T$$){T$e.superSet(T$Y,this,"width",T$$),this._setScrollChanged()}),T$F(0,T$u,"hScrollBar",function(){return this._hScrollBar}),T$F(0,T$u,"content",function(){return this._content}),T$F(0,T$u,"height",T$$.prototype._$get_height,function(T$$){T$e.superSet(T$Y,this,"height",T$$),this._setScrollChanged()}),T$F(0,T$u,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(T$$){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new T$b$),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=T$$}),T$F(0,T$u,"vScrollBar",function(){return this._vScrollBar}),T$F(0,T$u,"cacheAs",T$$.prototype._$get_cacheAs,function(T$$){T$e.superSet(T$Y,this,"cacheAs",T$$),this._$P.cacheAs=null,"none"!==T$$?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),T$b}(T$Y),T$d=function(T$$){function T$b(T$$){T$b.__super.call(this,T$$),this.isVertical=!1}return T$r(T$b,"laya.ui.HSlider",T$m),T$b}(),T$U=function(T$$){function T$u(T$$,T$b){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,T$u.__super.call(this),this.skin=T$b,this.labels=T$$}T$r(T$u,"laya.ui.UIGroup",T$$);var T$b=T$u.prototype;return T$e.imps(T$b,{"laya.ui.IItem":!0}),T$b.preinitialize=function(){this.mouseEnabled=!0},T$b.destroy=function(T$$){void 0===T$$&&(T$$=!0),laya.ui.Component.prototype.destroy.call(this,T$$),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},T$b.addItem=function(T$$,T$b){void 0===T$b&&(T$b=!0);var T$u=T$$,T$Z=this._items.length;if(T$u.name="item"+T$Z,this.addChild(T$u),this.initItems(),T$b&&0<T$Z){var T$E=this._items[T$Z-1];"horizontal"==this._direction?T$u.x=T$E.x+T$E.width+this._space:T$u.y=T$E.y+T$E.height+this._space}else T$b&&(T$u.x=0,T$u.y=0);return T$Z},T$b.delItem=function(T$$,T$b){void 0===T$b&&(T$b=!0);var T$u=this._items.indexOf(T$$);if(-1!=T$u){var T$Z=T$$;this.removeChild(T$Z);for(var T$E=T$u+1,T$r=this._items.length;T$E<T$r;T$E++){var T$F=this._items[T$E];T$F.name="item"+(T$E-1),T$b&&("horizontal"==this._direction?T$F.x-=T$Z.width+this._space:T$F.y-=T$Z.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var T$x;T$x=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=T$x}}},T$b.initItems=function(){this._items||(this._items=[]);for(var T$$=this._items.length=0;T$$<1e4;T$$++){var T$b=this.getChildByName("item"+T$$);if(null==T$b)break;this._items.push(T$b),T$b.selected=T$$===this._selectedIndex,T$b.clickHandler=T$o.create(this,this.itemClick,[T$$],!1)}},T$b.itemClick=function(T$$){this.selectedIndex=T$$},T$b.setSelect=function(T$$,T$b){this._items&&-1<T$$&&T$$<this._items.length&&(this._items[T$$].selected=T$b)},T$b.createItem=function(T$$,T$b){return null},T$b.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var T$$=0,T$b=0,T$u=this._items.length;T$b<T$u;T$b++){var T$Z=this._items[T$b];this._skin&&(T$Z.skin=this._skin),this._labelColors&&(T$Z.labelColors=this._labelColors),this._labelSize&&(T$Z.labelSize=this._labelSize),this._labelStroke&&(T$Z.labelStroke=this._labelStroke),this._labelStrokeColor&&(T$Z.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(T$Z.strokeColors=this._strokeColors),this._labelBold&&(T$Z.labelBold=this._labelBold),this._labelPadding&&(T$Z.labelPadding=this._labelPadding),this._labelAlign&&(T$Z.labelAlign=this._labelAlign),this._stateNum&&(T$Z.stateNum=this._stateNum),this._labelFont&&(T$Z.labelFont=this._labelFont),"horizontal"===this._direction?(T$Z.y=0,T$Z.x=T$$,T$$+=T$Z.width+this._space):(T$Z.x=0,T$Z.y=T$$,T$$+=T$Z.height+this._space)}this.changeSize()},T$b.commitMeasure=function(){this.runCallLater(this.changeLabels)},T$b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},T$F(0,T$b,"labelStrokeColor",function(){return this._labelStrokeColor},function(T$$){this._labelStrokeColor!=T$$&&(this._labelStrokeColor=T$$,this._setLabelChanged())}),T$F(0,T$b,"skin",function(){return this._skin},function(T$$){this._skin!=T$$&&(this._skin=T$$,this._setLabelChanged())}),T$F(0,T$b,"selectedIndex",function(){return this._selectedIndex},function(T$$){this._selectedIndex!=T$$&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=T$$,this.setSelect(T$$,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),T$F(0,T$b,"labels",function(){return this._labels},function(T$$){if(this._labels!=T$$){if(this._labels=T$$,this.removeChildren(),this._setLabelChanged(),this._labels)for(var T$b=this._labels.split(","),T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++){var T$E=this.createItem(this._skin,T$b[T$u]);T$E.name="item"+T$u,this.addChild(T$E)}this.initItems()}}),T$F(0,T$b,"strokeColors",function(){return this._strokeColors},function(T$$){this._strokeColors!=T$$&&(this._strokeColors=T$$,this._setLabelChanged())}),T$F(0,T$b,"labelColors",function(){return this._labelColors},function(T$$){this._labelColors!=T$$&&(this._labelColors=T$$,this._setLabelChanged())}),T$F(0,T$b,"labelStroke",function(){return this._labelStroke},function(T$$){this._labelStroke!=T$$&&(this._labelStroke=T$$,this._setLabelChanged())}),T$F(0,T$b,"labelSize",function(){return this._labelSize},function(T$$){this._labelSize!=T$$&&(this._labelSize=T$$,this._setLabelChanged())}),T$F(0,T$b,"stateNum",function(){return this._stateNum},function(T$$){this._stateNum!=T$$&&(this._stateNum=T$$,this._setLabelChanged())}),T$F(0,T$b,"labelBold",function(){return this._labelBold},function(T$$){this._labelBold!=T$$&&(this._labelBold=T$$,this._setLabelChanged())}),T$F(0,T$b,"labelFont",function(){return this._labelFont},function(T$$){this._labelFont!=T$$&&(this._labelFont=T$$,this._setLabelChanged())}),T$F(0,T$b,"labelPadding",function(){return this._labelPadding},function(T$$){this._labelPadding!=T$$&&(this._labelPadding=T$$,this._setLabelChanged())}),T$F(0,T$b,"direction",function(){return this._direction},function(T$$){this._direction=T$$,this._setLabelChanged()}),T$F(0,T$b,"space",function(){return this._space},function(T$$){this._space=T$$,this._setLabelChanged()}),T$F(0,T$b,"items",function(){return this._items}),T$F(0,T$b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(T$$){this.selectedIndex=this._items.indexOf(T$$)}),T$F(0,T$b,"dataSource",T$$.prototype._$get_dataSource,function(T$$){"number"==typeof(this._dataSource=T$$)&&Math.floor(T$$)==T$$||"string"==typeof T$$?this.selectedIndex=parseInt(T$$):T$$ instanceof Array?this.labels=T$$.join(","):T$e.superSet(T$Y,this,"dataSource",T$$)}),T$u}(T$Y),T$B=function(T$b){function T$u(T$$,T$b){this._value=null,void 0===T$b&&(T$b=""),T$u.__super.call(this,T$$,T$b)}T$r(T$u,"laya.ui.Radio",T$b);var T$$=T$u.prototype;return T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._value=null},T$$.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},T$$.initialize=function(){T$b.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},T$$.onClick=function(T$$){this.selected=!0},T$F(0,T$$,"value",function(){return null!=this._value?this._value:this.label},function(T$$){this._value=T$$}),T$u}(T$k),T$R=function(T$$){function T$b(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,T$b.__super.call(this),this.width=this.height=200}T$r(T$b,"laya.ui.Tree",T$$);var T$u=T$b.prototype;return T$e.imps(T$u,{"laya.ui.IRender":!0}),T$u.destroy=function(T$$){void 0===T$$&&(T$$=!0),laya.ui.Component.prototype.destroy.call(this,T$$),this._list&&this._list.destroy(T$$),this._list=null,this._source=null,this._renderHandler=null},T$u.createChildren=function(){this.addChild(this._list=new T$A),this._list.renderHandler=T$o.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},T$u.onListChange=function(T$$){this.event("change")},T$u.getArray=function(){var T$$,T$b=[];for(var T$u in this._source)T$$=this._source[T$u],this.getParentOpenStatus(T$$)&&(T$$.x=this._spaceLeft*this.getDepth(T$$),T$b.push(T$$));return T$b},T$u.getDepth=function(T$$,T$b){return void 0===T$b&&(T$b=0),null==T$$.nodeParent?T$b:this.getDepth(T$$.nodeParent,T$b+1)},T$u.getParentOpenStatus=function(T$$){var T$b=T$$.nodeParent;return null==T$b||!!T$b.isOpen&&(null==T$b.nodeParent||this.getParentOpenStatus(T$b))},T$u.renderItem=function(T$$,T$b){var T$u=T$$.dataSource;if(T$u){T$$.left=T$u.x;var T$Z=T$$.getChildByName("arrow");T$Z&&(T$u.hasChild?(T$Z.visible=!0,T$Z.index=T$u.isOpen?1:0,T$Z.tag=T$b,T$Z.off("click",this,this.onArrowClick),T$Z.on("click",this,this.onArrowClick)):T$Z.visible=!1);var T$E=T$$.getChildByName("folder");T$E&&(2==T$E.clipY?T$E.index=T$u.isDirectory?0:1:T$E.index=T$u.isDirectory?T$u.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([T$$,T$b])}},T$u.onArrowClick=function(T$$){var T$b=T$$.currentTarget.tag;this._list.array[T$b].isOpen=!this._list.array[T$b].isOpen,this.event("open"),this._list.array=this.getArray()},T$u.setItemState=function(T$$,T$b){this._list.array[T$$]&&(this._list.array[T$$].isOpen=T$b,this._list.array=this.getArray())},T$u.fresh=function(){this._list.array=this.getArray(),this.repaint()},T$u.parseXml=function(T$$,T$b,T$u,T$Z){var T$E,T$r=T$$.childNodes,T$F=T$r.length;if(!T$Z){T$E={};var T$x,T$g=T$$.attributes;for(var T$H in T$g){var T$w=(T$x=T$g[T$H]).nodeName,T$I=T$x.nodeValue;T$E[T$w]="true"==T$I||"false"!=T$I&&T$I}T$E.nodeParent=T$u,0<T$F&&(T$E.isDirectory=!0),T$E.hasChild=0<T$F,T$b.push(T$E)}for(var T$o=0;T$o<T$F;T$o++){var T$N=T$r[T$o];this.parseXml(T$N,T$b,T$E,!1)}},T$u.parseOpenStatus=function(T$$,T$b){for(var T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++){var T$E=T$b[T$u];if(T$E.isDirectory)for(var T$r=0,T$F=T$$.length;T$r<T$F;T$r++){var T$x=T$$[T$r];if(T$x.isDirectory&&this.isSameParent(T$x,T$E)&&T$E.label==T$x.label){T$E.isOpen=T$x.isOpen;break}}}},T$u.isSameParent=function(T$$,T$b){return null==T$$.nodeParent&&null==T$b.nodeParent||null!=T$$.nodeParent&&null!=T$b.nodeParent&&(T$$.nodeParent.label==T$b.nodeParent.label&&this.isSameParent(T$$.nodeParent,T$b.nodeParent))},T$u.filter=function(T$$){if(Boolean(T$$)){var T$b=[];this.getFilterSource(this._source,T$b,T$$),this._list.array=T$b}else this._list.array=this.getArray()},T$u.getFilterSource=function(T$$,T$b,T$u){var T$Z;for(var T$E in T$u=T$u.toLocaleLowerCase(),T$$)!(T$Z=T$$[T$E]).isDirectory&&-1<String(T$Z.label).toLowerCase().indexOf(T$u)&&(T$Z.x=0,T$b.push(T$Z)),T$Z.child&&0<T$Z.child.length&&this.getFilterSource(T$Z.child,T$b,T$u)},T$F(0,T$u,"spaceBottom",function(){return this._list.spaceY},function(T$$){this._list.spaceY=T$$}),T$F(0,T$u,"keepStatus",function(){return this._keepStatus},function(T$$){this._keepStatus=T$$}),T$F(0,T$u,"itemRender",function(){return this._list.itemRender},function(T$$){this._list.itemRender=T$$}),T$F(0,T$u,"array",function(){return this._list.array},function(T$$){this._keepStatus&&this._list.array&&T$$&&this.parseOpenStatus(this._list.array,T$$),this._source=T$$,this._list.array=this.getArray()}),T$F(0,T$u,"mouseHandler",function(){return this._list.mouseHandler},function(T$$){this._list.mouseHandler=T$$}),T$F(0,T$u,"dataSource",T$$.prototype._$get_dataSource,function(T$$){this._dataSource=T$$,T$e.superSet(T$Y,this,"dataSource",T$$)}),T$F(0,T$u,"source",function(){return this._source}),T$F(0,T$u,"scrollBar",function(){return this._list.scrollBar}),T$F(0,T$u,"list",function(){return this._list}),T$F(0,T$u,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(T$$){this._list.vScrollBarSkin=T$$}),T$F(0,T$u,"renderHandler",function(){return this._renderHandler},function(T$$){this._renderHandler=T$$}),T$F(0,T$u,"selectedIndex",function(){return this._list.selectedIndex},function(T$$){this._list.selectedIndex=T$$}),T$F(0,T$u,"spaceLeft",function(){return this._spaceLeft},function(T$$){this._spaceLeft=T$$}),T$F(0,T$u,"selectedItem",function(){return this._list.selectedItem},function(T$$){this._list.selectedItem=T$$}),T$F(0,T$u,"width",T$$.prototype._$get_width,function(T$$){T$e.superSet(T$Y,this,"width",T$$),this._list.width=T$$}),T$F(0,T$u,"height",T$$.prototype._$get_height,function(T$$){T$e.superSet(T$Y,this,"height",T$$),this._list.height=T$$}),T$F(0,T$u,"xml",null,function(T$$){var T$b=[];this.parseXml(T$$.childNodes[0],T$b,null,!0),this.array=T$b}),T$F(0,T$u,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),T$b}(T$Y),T$$$=function(T$$){function T$b(){this._items=null,this._selectedIndex=0,T$b.__super.call(this),this._setIndexHandler=T$o.create(this,this.setIndex,null,!1)}T$r(T$b,"laya.ui.ViewStack",T$$);var T$u=T$b.prototype;return T$e.imps(T$u,{"laya.ui.IItem":!0}),T$u.setItems=function(T$$){this.removeChildren();for(var T$b=0,T$u=0,T$Z=T$$.length;T$u<T$Z;T$u++){var T$E=T$$[T$u];T$E&&(T$E.name="item"+T$b,this.addChild(T$E),T$b++)}this.initItems()},T$u.addItem=function(T$$){T$$.name="item"+this._items.length,this.addChild(T$$),this.initItems()},T$u.initItems=function(){this._items=[];for(var T$$=0;T$$<1e4;T$$++){var T$b=this.getChildByName("item"+T$$);if(null==T$b)break;this._items.push(T$b),T$b.visible=T$$==this._selectedIndex}},T$u.setSelect=function(T$$,T$b){this._items&&-1<T$$&&T$$<this._items.length&&(this._items[T$$].visible=T$b)},T$u.setIndex=function(T$$){this.selectedIndex=T$$},T$F(0,T$u,"dataSource",T$$.prototype._$get_dataSource,function(T$$){if("number"==typeof(this._dataSource=T$$)&&Math.floor(T$$)==T$$||"string"==typeof T$$)this.selectedIndex=parseInt(T$$);else for(var T$b in this._dataSource)this.hasOwnProperty(T$b)&&(this[T$b]=this._dataSource[T$b])}),T$F(0,T$u,"selectedIndex",function(){return this._selectedIndex},function(T$$){this._selectedIndex!=T$$&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=T$$,this.setSelect(this._selectedIndex,!0))}),T$F(0,T$u,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(T$$){this.selectedIndex=this._items.indexOf(T$$)}),T$F(0,T$u,"items",function(){return this._items}),T$F(0,T$u,"setIndexHandler",function(){return this._setIndexHandler},function(T$$){this._setIndexHandler=T$$}),T$b}(T$Y),T$b$=function(T$$){function T$b(){T$b.__super.call(this)}return T$r(T$b,"laya.ui.VScrollBar",T$s),T$b}(),T$u$=function(T$b){function T$u(T$$){this._bg=null,this._skin=null,T$u.__super.call(this),void 0===T$$&&(T$$=""),this.text=T$$,this.skin=this.skin}T$r(T$u,"laya.ui.TextInput",T$b);var T$$=T$u.prototype;return T$$.preinitialize=function(){this.mouseEnabled=!0},T$$.destroy=function(T$$){T$_.clearCache(this,this._skin),void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._bg&&this._bg.destroy(),this._bg=null},T$$.createChildren=function(){this.addChild(this._tf=new T$N),this._tf.padding=T$C.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},T$$._onFocus=function(){this.event("focus",this)},T$$._onBlur=function(){this.event("blur",this)},T$$._onInput=function(){this.event("input",this)},T$$._onEnter=function(){this.event("enter",this)},T$$.initialize=function(){this.width=128,this.height=22},T$$.select=function(){this._tf.select()},T$$.setSelection=function(T$$,T$b){this._tf.setSelection(T$$,T$b)},T$F(0,T$$,"text",T$b.prototype._$get_text,function(T$$){this._tf.text!=T$$&&(T$$+="",this._tf.text=T$$,this.event("change"))}),T$F(0,T$$,"bg",function(){return this._bg},function(T$$){this.graphics=this._bg=T$$}),T$F(0,T$$,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(T$$){this._tf.inputElementYAdjuster=T$$}),T$F(0,T$$,"multiline",function(){return this._tf.multiline},function(T$$){this._tf.multiline=T$$}),T$F(0,T$$,"skin",function(){return this._skin},function(T$$){this._skin!=T$$&&(T$_.clearCache(this,this._skin),this._skin=T$$,this._bg||(this.graphics=this._bg=new T$V),T$_.keepCache(this,this._skin),this._bg.source=T$_.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),T$F(0,T$$,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(T$$){this._bg||(this.graphics=this._bg=new T$V),this._bg.sizeGrid=T$K.fillArray(T$C.defaultSizeGrid,T$$,Number)}),T$F(0,T$$,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(T$$){this._tf.inputElementXAdjuster=T$$}),T$F(0,T$$,"width",T$b.prototype._$get_width,function(T$$){T$e.superSet(T$c,this,"width",T$$),this._bg&&(this._bg.width=T$$)}),T$F(0,T$$,"height",T$b.prototype._$get_height,function(T$$){T$e.superSet(T$c,this,"height",T$$),this._bg&&(this._bg.height=T$$)}),T$F(0,T$$,"editable",function(){return this._tf.editable},function(T$$){this._tf.editable=T$$}),T$F(0,T$$,"restrict",function(){return this._tf.restrict},function(T$$){this._tf.restrict=T$$}),T$F(0,T$$,"prompt",function(){return this._tf.prompt},function(T$$){this._tf.prompt=T$$}),T$F(0,T$$,"promptColor",function(){return this._tf.promptColor},function(T$$){this._tf.promptColor=T$$}),T$F(0,T$$,"maxChars",function(){return this._tf.maxChars},function(T$$){this._tf.maxChars=T$$}),T$F(0,T$$,"focus",function(){return this._tf.focus},function(T$$){this._tf.focus=T$$}),T$F(0,T$$,"type",function(){return this._tf.type},function(T$$){this._tf.type=T$$}),T$F(0,T$$,"asPassword",function(){return this._tf.asPassword},function(T$$){this._tf.asPassword=T$$}),T$u}(T$c),T$Z$=function(T$$){function T$b(){T$b.__super.call(this)}return T$r(T$b,"laya.ui.VSlider",T$m),T$b}(),T$E$=function(T$$){function T$Z(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,T$Z.__super.call(this)}T$r(T$Z,"laya.ui.Dialog",T$$);var T$b=T$Z.prototype;return T$b.initialize=function(){this.popupEffect=T$Z.manager.popupEffectHandler,this.closeEffect=T$Z.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},T$b._dealDragArea=function(){var T$$=this.getChildByName("drag");T$$&&(this.dragArea=T$$.x+","+T$$.y+","+T$$.width+","+T$$.height,T$$.removeSelf())},T$b._onClick=function(T$$){var T$b=T$$.target;if(T$b)switch(T$b.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(T$b.name)}},T$b.show=function(T$$,T$b){void 0===T$$&&(T$$=!1),void 0===T$b&&(T$b=!0),this._open(!1,T$$,T$b)},T$b.popup=function(T$$,T$b){void 0===T$$&&(T$$=!1),void 0===T$b&&(T$b=!0),this._open(!0,T$$,T$b)},T$b._open=function(T$$,T$b,T$u){T$Z.manager.lock(!1),this.isModal=T$$,T$Z.manager.open(this,T$b,T$u)},T$b.onOpened=function(){},T$b.close=function(T$$,T$b){void 0===T$b&&(T$b=!0),T$Z.manager.close(this,T$$,T$b)},T$b.onClosed=function(T$$){},T$b._onMouseDown=function(T$$){var T$b=this.getMousePoint();this._dragArea.contains(T$b.x,T$b.y)?this.startDrag():this.stopDrag()},T$F(0,T$b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(T$$){if(T$$){var T$b=T$K.fillArray([0,0,0,0],T$$,Number);this._dragArea=new T$T(T$b[0],T$b[1],T$b[2],T$b[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),T$F(0,T$b,"isPopup",function(){return null!=this.parent}),T$F(0,T$b,"zOrder",T$$.prototype._$get_zOrder,function(T$$){T$e.superSet(T$f,this,"zOrder",T$$),T$Z.manager._checkMask()}),T$F(1,T$Z,"manager",function(){return T$Z._manager=T$Z._manager||new T$p},function(T$$){T$Z._manager=T$$}),T$Z.setLockView=function(T$$){T$Z.manager.setLockView(T$$)},T$Z.lock=function(T$$){T$Z.manager.lock(T$$)},T$Z.closeAll=function(){T$Z.manager.closeAll()},T$Z.getDialogsByGroup=function(T$$){return T$Z.manager.getDialogsByGroup(T$$)},T$Z.closeByGroup=function(T$$){return T$Z.manager.closeByGroup(T$$)},T$Z.CLOSE="close",T$Z.CANCEL="cancel",T$Z.SURE="sure",T$Z.NO="no",T$Z.OK="ok",T$Z.YES="yes",T$Z._manager=null,T$Z}(T$f),T$r$=function(T$$){function T$b(){T$b.__super.call(this)}T$r(T$b,"laya.ui.HBox",T$$);var T$u=T$b.prototype;return T$u.sortItem=function(T$$){T$$&&T$$.sort(function(T$$,T$b){return T$$.x-T$b.x})},T$u.changeItems=function(){this._itemChanged=!1;for(var T$$=[],T$b=0,T$u=0,T$Z=this.numChildren;T$u<T$Z;T$u++){var T$E=this.getChildAt(T$u);T$E&&T$E.layoutEnabled&&(T$$.push(T$E),T$b=this._height?this._height:Math.max(T$b,T$E.height*T$E.scaleY))}this.sortItem(T$$);var T$r=0;for(T$u=0,T$Z=T$$.length;T$u<T$Z;T$u++)(T$E=T$$[T$u]).x=T$r,T$r+=T$E.width*T$E.scaleX+this._space,"top"==this._align?T$E.y=0:"middle"==this._align?T$E.y=.5*(T$b-T$E.height*T$E.scaleY):"bottom"==this._align&&(T$E.y=T$b-T$E.height*T$E.scaleY);this.changeSize()},T$F(0,T$u,"height",T$$.prototype._$get_height,function(T$$){this._height!=T$$&&(T$e.superSet(T$W,this,"height",T$$),this.callLater(this.changeItems))}),T$b.NONE="none",T$b.TOP="top",T$b.MIDDLE="middle",T$b.BOTTOM="bottom",T$b}(T$W),T$F$=function(T$$){function T$b(){T$b.__super.call(this)}T$r(T$b,"laya.ui.VBox",T$$);var T$u=T$b.prototype;return T$u.changeItems=function(){this._itemChanged=!1;for(var T$$=[],T$b=0,T$u=0,T$Z=this.numChildren;T$u<T$Z;T$u++){var T$E=this.getChildAt(T$u);T$E&&T$E.layoutEnabled&&(T$$.push(T$E),T$b=this._width?this._width:Math.max(T$b,T$E.width*T$E.scaleX))}this.sortItem(T$$);var T$r=0;for(T$u=0,T$Z=T$$.length;T$u<T$Z;T$u++)(T$E=T$$[T$u]).y=T$r,T$r+=T$E.height*T$E.scaleY+this._space,"left"==this._align?T$E.x=0:"center"==this._align?T$E.x=.5*(T$b-T$E.width*T$E.scaleX):"right"==this._align&&(T$E.x=T$b-T$E.width*T$E.scaleX);this.changeSize()},T$F(0,T$u,"width",T$$.prototype._$get_width,function(T$$){this._width!=T$$&&(T$e.superSet(T$W,this,"width",T$$),this.callLater(this.changeItems))}),T$b.NONE="none",T$b.LEFT="left",T$b.CENTER="center",T$b.RIGHT="right",T$b}(T$W),T$x$=function(T$$){function T$b(){T$b.__super.call(this)}return T$r(T$b,"laya.ui.RadioGroup",T$U),T$b.prototype.createItem=function(T$$,T$b){return new T$B(T$$,T$b)},T$b}(),T$g$=function(T$$){function T$b(){T$b.__super.call(this)}return T$r(T$b,"laya.ui.Tab",T$U),T$b.prototype.createItem=function(T$$,T$b){return new T$k(T$$,T$b)},T$b}(),T$H$=function(T$b){function T$u(T$$){this._vScrollBar=null,this._hScrollBar=null,void 0===T$$&&(T$$=""),T$u.__super.call(this,T$$)}T$r(T$u,"laya.ui.TextArea",T$b);var T$$=T$u.prototype;return T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},T$$.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},T$$.onVBarChanged=function(T$$){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},T$$.onHBarChanged=function(T$$){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},T$$.changeScroll=function(){var T$$=this._vScrollBar&&0<this._tf.maxScrollY,T$b=this._hScrollBar&&0<this._tf.maxScrollX,T$u=T$$?this._width-this._vScrollBar.width:this._width,T$Z=T$b?this._height-this._hScrollBar.height:this._height,T$E=this._tf.padding||T$C.labelPadding;this._tf.width=T$u,this._tf.height=T$Z,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-T$E[2],this._vScrollBar.y=T$E[1],this._vScrollBar.height=this._height-(T$b?this._hScrollBar.height:0)-T$E[1]-T$E[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=T$Z/Math.max(this._tf.textHeight,T$Z),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=T$$),this._hScrollBar&&(this._hScrollBar.x=T$E[0],this._hScrollBar.y=this._height-this._hScrollBar.height-T$E[3],this._hScrollBar.width=this._width-(T$$?this._vScrollBar.width:0)-T$E[0]-T$E[2],this._hScrollBar.scrollSize=Math.max(.033*T$u,1),this._hScrollBar.thumbPercent=T$u/Math.max(this._tf.textWidth,T$u),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=T$b)},T$$.scrollTo=function(T$$){this.commitMeasure(),this._tf.scrollY=T$$},T$F(0,T$$,"scrollY",function(){return this._tf.scrollY}),T$F(0,T$$,"width",T$b.prototype._$get_width,function(T$$){T$e.superSet(T$u$,this,"width",T$$),this.callLater(this.changeScroll)}),T$F(0,T$$,"hScrollBar",function(){return this._hScrollBar}),T$F(0,T$$,"height",T$b.prototype._$get_height,function(T$$){T$e.superSet(T$u$,this,"height",T$$),this.callLater(this.changeScroll)}),T$F(0,T$$,"maxScrollX",function(){return this._tf.maxScrollX}),T$F(0,T$$,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(T$$){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new T$b$),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=T$$}),T$F(0,T$$,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(T$$){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new T$j),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=T$$}),T$F(0,T$$,"vScrollBar",function(){return this._vScrollBar}),T$F(0,T$$,"maxScrollY",function(){return this._tf.maxScrollY}),T$F(0,T$$,"scrollX",function(){return this._tf.scrollX}),T$u}(T$u$);!function(T$$){function T$b(){this._uiView=null,this.isCloseOther=!1,T$b.__super.call(this)}T$r(T$b,"laya.ui.AsynDialog",T$E$);var T$u=T$b.prototype;T$u.createView=function(T$$){this._uiView=T$$},T$u._open=function(T$$,T$b,T$u){this.isModal=T$$,this.isCloseOther=T$b,T$E$.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},T$u.onCreated=function(){this.createUI(),this.onOpen()},T$u.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},T$u.onOpen=function(){T$E$.manager.open(this,this.isCloseOther),T$E$.manager.lock(!1)},T$u.close=function(T$$,T$b){void 0===T$b&&(T$b=!0),T$E$.manager.close(this),this.onClose()},T$u.onClose=function(){},T$u.destroy=function(T$$){void 0===T$$&&(T$$=!0),laya.ui.View.prototype.destroy.call(this,T$$),this._uiView=null,this.onDestroy()},T$u.onDestroy=function(){}}();T$e.__init([T$f])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$$,T$b){"use strict";for(var T$u in Object.defineProperty(T$b,"__esModule",{value:!0}),Laya){var T$Z=Laya[T$u];T$Z&&T$Z.__isclass&&(T$b[T$u]=T$Z)}}),function(T$o,T$$,T$P){T$P.un,T$P.uns;var T$I=T$P.static,T$N=T$P.class,T$D=T$P.getset,T$Z=T$P.__newvec,T$S=laya.maths.Arith,T$F=laya.webgl.atlas.AtlasResourceManager,T$u=laya.webgl.shader.BaseShader,T$v=laya.utils.Browser,T$x=laya.webgl.utils.Buffer,T$i=laya.utils.Byte,T$E=laya.utils.ClassUtils,T$g=T$P.Config,T$r=(laya.events.Event,laya.events.EventDispatcher),T$C=laya.utils.Handler,T$T=laya.net.Loader,T$b=laya.net.LoaderManager,T$H=(laya.maths.MathUtil,laya.display.Node),T$e=laya.renders.Render,T$w=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),T$L=laya.resource.Resource,T$_=laya.utils.RunDriver,T$y=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),T$z=laya.display.Sprite,T$q=laya.utils.Stat,T$a=laya.utils.StringKey,T$K=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),T$t=laya.utils.Utils,T$O=laya.webgl.WebGL,T$V=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;T$P.interface("laya.d3.core.IClone"),T$P.interface("laya.d3.graphics.IVertex"),T$P.interface("laya.d3.core.render.IUpdate"),T$P.interface("laya.d3.core.scene.ITreeNode"),T$P.interface("laya.d3.core.render.IRenderable");(function(){function T$k(){}T$N(T$k,"laya.d3.animation.AnimationClipParser01"),T$k.READ_DATA=function(){T$k._DATA.offset=T$k._reader.getUint32(),T$k._DATA.size=T$k._reader.getUint32()},T$k.READ_BLOCK=function(){for(var T$$=T$k._BLOCK.count=T$k._reader.getUint16(),T$b=T$k._BLOCK.blockStarts=[],T$u=T$k._BLOCK.blockLengths=[],T$Z=0;T$Z<T$$;T$Z++)T$b.push(T$k._reader.getUint32()),T$u.push(T$k._reader.getUint32())},T$k.READ_STRINGS=function(){var T$$=T$k._reader.getUint32(),T$b=T$k._reader.getUint16(),T$u=T$k._reader.pos;T$k._reader.pos=T$$+T$k._DATA.offset;for(var T$Z=0;T$Z<T$b;T$Z++)T$k._strings[T$Z]=T$k._reader.readUTFString();T$k._reader.pos=T$u},T$k.parse=function(T$$,T$b){T$k._animationClip=T$$;(T$k._reader=T$b).__getBuffer();T$k.READ_DATA(),T$k.READ_BLOCK(),T$k.READ_STRINGS();for(var T$u=0,T$Z=T$k._BLOCK.count;T$u<T$Z;T$u++){var T$E=T$b.getUint16(),T$r=T$k._strings[T$E],T$F=T$k["READ_"+T$r];if(null==T$F)throw new Error("model file err,no this function:"+T$E+" "+T$r);T$F.call()}},T$k.READ_ANIMATIONS=function(){var T$$,T$b=0,T$u=0,T$Z=T$k._reader,T$E=T$Z.__getBuffer(),T$r=[],T$F=T$Z.getUint8();for(T$r.length=T$F,T$b=0;T$b<T$F;T$b++)T$r[T$b]=T$Z.getUint16();var T$x=[],T$g=T$Z.getUint16();for(T$x.length=T$g,T$b=0;T$b<T$g;T$b++)T$x[T$b]=T$Z.getFloat32();var T$H=T$k._animationClip;T$H.name=T$k._strings[T$Z.getUint16()];var T$w=T$H._duration=T$Z.getFloat32();T$H.islooping=!!T$Z.getByte(),T$H._frameRate=T$Z.getInt16();var T$I=T$Z.getInt16(),T$o=T$H._nodes=new Array;T$o.length=T$I,(T$H._publicClipDatas=[]).length=T$I;var T$N=T$H._nodesMap={},T$D=0,T$e=0;for(T$b=0;T$b<T$I;T$b++){T$$=T$o[T$b]=new T$J;var T$L=T$Z.getUint16(),T$T=T$$.path=[];for(T$T.length=T$L,T$u=0;T$u<T$L;T$u++)T$T[T$u]=T$k._strings[T$Z.getUint16()];var T$_=T$T.join("/"),T$y=T$N[T$_];T$y||(T$N[T$_]=T$y=[]),T$y.push(T$$);var T$S=T$Z.getInt16();-1!==T$S&&(T$$.componentType=T$k._strings[T$S]);var T$P=T$n._propertyIndexDic[T$k._strings[T$Z.getUint16()]];if(null==T$P)throw new Error("AnimationClipParser01:unknown property name.");var T$i=T$P<4,T$z=!T$i||T$i&&""===T$T[0];(T$$._cacheProperty=T$z)?T$D++:T$e++,T$$.propertyNameID=T$P;var T$q=T$r[T$Z.getUint8()];T$$.keyFrameWidth=T$q/4;var T$a=T$$.keyFrames=[],T$t=T$a.length=T$Z.getUint16(),T$C=null,T$K=NaN;for(T$u=0;T$u<T$t;T$u++){var T$O=T$a[T$u]=new T$c;T$K=T$O.startTime=T$x[T$Z.getUint16()];var T$V=T$Z.pos;T$O.inTangent=new Float32Array(T$E.slice(T$V,T$V+T$q)),T$Z.pos+=T$q,T$V=T$Z.pos,T$O.outTangent=new Float32Array(T$E.slice(T$V,T$V+T$q)),T$Z.pos+=T$q,T$V=T$Z.pos,T$O.data=new Float32Array(T$E.slice(T$V,T$V+T$q)),T$Z.pos+=T$q,T$C&&(T$C.next=T$O,T$C.duration=T$K-T$C.startTime),T$C=T$O}T$O.next=null,T$O.duration=T$w-T$K}var T$v=T$H._nodeToCachePropertyMap=new Int32Array(T$I),T$p=T$H._cachePropertyMap=new Int32Array(T$D),T$Y=T$H._unCachePropertyMap=new Int32Array(T$e);for(T$D=T$e=0,T$b=0;T$b<T$I;T$b++)(T$$=T$o[T$b])._cacheProperty?(T$v[T$b]=T$D,T$p[T$D++]=T$b):T$Y[T$e++]=T$b},T$k._animationClip=null,T$k._reader=null,T$k._strings=[],T$I(T$k,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function T$s(){}T$N(T$s,"laya.d3.animation.AnimationClipParser02"),T$s.READ_DATA=function(){T$s._DATA.offset=T$s._reader.getUint32(),T$s._DATA.size=T$s._reader.getUint32()},T$s.READ_BLOCK=function(){for(var T$$=T$s._BLOCK.count=T$s._reader.getUint16(),T$b=T$s._BLOCK.blockStarts=[],T$u=T$s._BLOCK.blockLengths=[],T$Z=0;T$Z<T$$;T$Z++)T$b.push(T$s._reader.getUint32()),T$u.push(T$s._reader.getUint32())},T$s.READ_STRINGS=function(){var T$$=T$s._reader.getUint32(),T$b=T$s._reader.getUint16(),T$u=T$s._reader.pos;T$s._reader.pos=T$$+T$s._DATA.offset;for(var T$Z=0;T$Z<T$b;T$Z++)T$s._strings[T$Z]=T$s._reader.readUTFString();T$s._reader.pos=T$u},T$s.parse=function(T$$,T$b){T$s._animationClip=T$$;(T$s._reader=T$b).__getBuffer();T$s.READ_DATA(),T$s.READ_BLOCK(),T$s.READ_STRINGS();for(var T$u=0,T$Z=T$s._BLOCK.count;T$u<T$Z;T$u++){var T$E=T$b.getUint16(),T$r=T$s._strings[T$E],T$F=T$s["READ_"+T$r];if(null==T$F)throw new Error("model file err,no this function:"+T$E+" "+T$r);T$F.call()}},T$s.READ_ANIMATIONS=function(){var T$$,T$b=0,T$u=0,T$Z=T$s._reader,T$E=T$Z.__getBuffer(),T$r=[],T$F=T$Z.getUint8();for(T$r.length=T$F,T$b=0;T$b<T$F;T$b++)T$r[T$b]=T$Z.getUint16();var T$x=[],T$g=T$Z.getUint16();for(T$x.length=T$g,T$b=0;T$b<T$g;T$b++)T$x[T$b]=T$Z.getFloat32();var T$H=T$s._animationClip;T$H.name=T$s._strings[T$Z.getUint16()];var T$w=T$H._duration=T$Z.getFloat32();T$H.islooping=!!T$Z.getByte(),T$H._frameRate=T$Z.getInt16();var T$I=T$Z.getInt16(),T$o=T$H._nodes=new Array;T$o.length=T$I,(T$H._publicClipDatas=[]).length=T$I;var T$N=T$H._nodesMap={},T$D=0,T$e=0;for(T$b=0;T$b<T$I;T$b++){T$$=T$o[T$b]=new T$J;var T$L=T$Z.getUint16(),T$T=T$$.path=[];for(T$T.length=T$L,T$u=0;T$u<T$L;T$u++)T$T[T$u]=T$s._strings[T$Z.getUint16()];var T$_=T$T.join("/"),T$y=T$N[T$_];T$y||(T$N[T$_]=T$y=[]),T$y.push(T$$);var T$S=T$Z.getInt16();-1!==T$S&&(T$$.componentType=T$s._strings[T$S]);var T$P=T$n._propertyIndexDic[T$s._strings[T$Z.getUint16()]];if(null==T$P)throw new Error("AnimationClipParser02:unknown property name.");var T$i=T$P<4,T$z=!T$i||T$i&&""===T$T[0];(T$$._cacheProperty=T$z)?T$D++:T$e++,T$$.propertyNameID=T$P;var T$q=T$r[T$Z.getUint8()];T$$.keyFrameWidth=T$q/4;var T$a=T$$.keyFrames=[],T$t=T$a.length=T$Z.getUint16(),T$C=null,T$K=NaN;for(T$u=0;T$u<T$t;T$u++){var T$O=T$a[T$u]=new T$c;T$K=T$O.startTime=T$x[T$Z.getUint16()];var T$V=T$Z.pos;T$O.inTangent=new Float32Array(T$E.slice(T$V,T$V+T$q)),T$Z.pos+=T$q,T$V=T$Z.pos,T$O.outTangent=new Float32Array(T$E.slice(T$V,T$V+T$q)),T$Z.pos+=T$q,T$V=T$Z.pos,T$O.data=new Float32Array(T$E.slice(T$V,T$V+T$q)),T$Z.pos+=T$q,T$C&&(T$C.next=T$O,T$C.duration=T$K-T$C.startTime),T$C=T$O}T$O.next=null,T$O.duration=T$w-T$K}var T$v=T$Z.getUint16();for(T$b=0;T$b<T$v;T$b++){var T$p,T$Y=new T$m;T$Y.time=T$Z.getFloat32(),T$Y.eventName=T$s._strings[T$Z.getUint16()];var T$k=T$Z.getUint16();for(0<T$k&&(T$Y.params=T$p=[]),T$u=0;T$u<T$k;T$u++){switch(T$Z.getByte()){case 0:T$p.push(!!T$Z.getByte());break;case 1:T$p.push(T$Z.getInt32());break;case 2:T$p.push(T$Z.getFloat32());break;case 3:T$p.push(T$s._strings[T$Z.getUint16()]);break;default:throw new Error("unknown type.")}}T$H.addEvent(T$Y)}var T$M=T$H._nodeToCachePropertyMap=new Int32Array(T$I),T$l=T$H._cachePropertyMap=new Int32Array(T$D),T$X=T$H._unCachePropertyMap=new Int32Array(T$e);for(T$D=T$e=0,T$b=0;T$b<T$I;T$b++)(T$$=T$o[T$b])._cacheProperty?(T$M[T$b]=T$D,T$l[T$D++]=T$b):T$X[T$e++]=T$b},T$s._animationClip=null,T$s._reader=null,T$s._strings=[],T$I(T$s,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var T$m=function(){function T$$(){this.time=NaN,this.eventName=null,this.params=null}return T$N(T$$,"laya.d3.animation.AnimationEvent"),T$$}(),T$n=function(){function T$Z(){this._childs=[],this.transform=new T$_b(this)}T$N(T$Z,"laya.d3.animation.AnimationNode");var T$$=T$Z.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.addChild=function(T$$){T$$._parent=this,T$$.transform.setParent(this.transform),this._childs.push(T$$)},T$$.removeChild=function(T$$){var T$b=this._childs.indexOf(T$$);-1!==T$b&&this._childs.splice(T$b,1)},T$$.getChildByName=function(T$$){for(var T$b=0,T$u=this._childs.length;T$b<T$u;T$b++){var T$Z=this._childs[T$b];if(T$Z.name===T$$)return T$Z}return null},T$$.getChildByIndex=function(T$$){return this._childs[T$$]},T$$.getChildCount=function(){return this._childs.length},T$$.cloneTo=function(T$$){var T$b=T$$;T$b.name=this.name;for(var T$u=0,T$Z=this._childs.length;T$u<T$Z;T$u++){var T$E=this._childs[T$u],T$r=T$E.clone();T$b.addChild(T$r);var T$F=T$E.transform,T$x=T$r.transform;T$x.setLocalPosition(T$F.getLocalPosition()),T$x.setLocalRotation(T$F.getLocalRotation()),T$x.setLocalScale(T$F.getLocalScale()),T$x._localRotationEuler=T$F._localRotationEuler,T$x._setWorldMatrixIgnoreUpdate(T$F.getWorldMatrix())}},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$Z.__init__=function(){T$Z.registerAnimationNodeProperty("localPosition",T$Z._getLocalPosition,T$Z._setLocalPosition),T$Z.registerAnimationNodeProperty("localRotation",T$Z._getLocalRotation,T$Z._setLocalRotation),T$Z.registerAnimationNodeProperty("localScale",T$Z._getLocalScale,T$Z._setLocalScale),T$Z.registerAnimationNodeProperty("localRotationEuler",T$Z._getLocalRotationEuler,T$Z._setLocalRotationEuler),T$Z.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",T$Z._getParticleRenderSharedMaterialTintColor,T$Z._setParticleRenderSharedMaterialTintColor),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",T$Z._getMeshRenderSharedMaterialTilingOffset,T$Z._setMeshRenderSharedMaterialTilingOffset),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",T$Z._getMeshRenderSharedMaterialAlbedo,T$Z._setMeshRenderSharedMaterialAlbedo),T$Z.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",T$Z._getSkinnedMeshRenderSharedMaterialTilingOffset,T$Z._setSkinnedMeshRenderSharedMaterialTilingOffset),T$Z.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",T$Z._getSkinnedMeshRenderSharedMaterialAlbedo,T$Z._setSkinnedMeshRenderSharedMaterialAlbedo),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",T$Z._getMeshRenderSharedMaterialAlbedo,T$Z._setMeshRenderSharedMaterialAlbedo),T$Z.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",T$Z._getSkinnedMeshRenderSharedMaterialAlbedo,T$Z._setSkinnedMeshRenderSharedMaterialAlbedo),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",T$Z._getMeshRenderSharedMaterialIntensity,T$Z._setMeshRenderSharedMaterialIntensity),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",T$Z._getMeshRenderSharedMaterialAlpha,T$Z._setMeshRenderSharedMaterialAlpha),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",T$Z._getMeshRenderSharedMaterialAlphaColor,T$Z._setMeshRenderSharedMaterialAlphaColor),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",T$Z._getMeshRenderSharedMaterialBaseColor,T$Z._setMeshRenderSharedMaterialBaseColor),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",T$Z._getMeshRenderSharedMaterialDissolve,T$Z._setMeshRenderSharedMaterialDissolve),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",T$Z._getMeshRenderSharedMaterialDissolveSpeed,T$Z._setMeshRenderSharedMaterialDissolveSpeed),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",T$Z._getMeshRenderSharedMaterialMMultiplier,T$Z._setMeshRenderSharedMaterialMMultiplier),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",T$Z._getMeshRenderSharedMaterialBaseScrollSpeedX,T$Z._setMeshRenderSharedMaterialBaseScrollSpeedX),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",T$Z._getMeshRenderSharedMaterialBaseScrollSpeedY,T$Z._setMeshRenderSharedMaterialBaseScrollSpeedY),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",T$Z._getMeshRenderSharedMaterialSecondScrollSpeedX,T$Z._setMeshRenderSharedMaterialSecondScrollSpeedX),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",T$Z._getMeshRenderSharedMaterialSecondScrollSpeedY,T$Z._setMeshRenderSharedMaterialSecondScrollSpeedY),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",T$Z._getMeshRenderSharedMaterialDetailTilingOffset,T$Z._setMeshRenderSharedMaterialDetailTilingOffset),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",T$Z._getMeshRenderSharedMaterialDissolveTilingOffset,T$Z._setMeshRenderSharedMaterialDissolveTilingOffset),T$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",T$Z._getMeshRenderSharedMaterialMaskTilingOffset,T$Z._setMeshRenderSharedMaterialMaskTilingOffset)},T$Z.registerAnimationNodeProperty=function(T$$,T$b,T$u){if(T$Z._propertyIndexDic[T$$])throw new Error("AnimationNode: this propertyName has registered.");T$Z._propertyIndexDic[T$$]=T$Z._propertyIDCounter,T$Z._propertyGetFuncs[T$Z._propertyIDCounter]=T$b,T$Z._propertySetFuncs[T$Z._propertyIDCounter]=T$u,T$Z._propertyIDCounter++},T$Z._getLocalPosition=function(T$$,T$b){return T$$?T$$.transform.getLocalPosition():T$b._transform.localPosition.elements},T$Z._setLocalPosition=function(T$$,T$b,T$u){if(T$$)T$$.transform.setLocalPosition(T$u);else{var T$Z=T$b._transform,T$E=T$Z.localPosition;T$E.elements=T$u,T$Z.localPosition=T$E}},T$Z._getLocalRotation=function(T$$,T$b){return T$$?T$$.transform.getLocalRotation():T$b._transform.localRotation.elements},T$Z._setLocalRotation=function(T$$,T$b,T$u){if(T$$)T$$.transform.setLocalRotation(T$u);else{var T$Z=T$b._transform,T$E=T$Z.localRotation;T$E.elements=T$u,T$Z.localRotation=T$E}},T$Z._getLocalScale=function(T$$,T$b){return T$$?T$$.transform.getLocalScale():T$b._transform.localScale.elements},T$Z._setLocalScale=function(T$$,T$b,T$u){if(T$$)T$$.transform.setLocalScale(T$u);else{var T$Z=T$b._transform,T$E=T$Z.localScale;T$E.elements=T$u,T$Z.localScale=T$E}},T$Z._getLocalRotationEuler=function(T$$,T$b){return T$$?T$$.transform.getLocalRotationEuler():T$b._transform.localRotationEuler.elements},T$Z._setLocalRotationEuler=function(T$$,T$b,T$u){if(T$$)T$$.transform.setLocalRotationEuler(T$u);else{var T$Z=T$b._transform,T$E=T$Z.localRotationEuler;T$E.elements=T$u,T$Z.localRotationEuler=T$E}},T$Z._getMeshRenderSharedMaterialTilingOffset=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return T$b.meshRender.sharedMaterial.tilingOffset.elements},T$Z._setMeshRenderSharedMaterialTilingOffset=function(T$$,T$b,T$u){var T$Z,T$E;if(T$$){var T$r=T$$.transform._entity;T$r&&((T$E=(T$Z=T$r.owner.meshRender.material).tilingOffset).elements=T$u,T$Z.tilingOffset=T$E)}else(T$E=(T$Z=T$b.meshRender.material).tilingOffset).elements=T$u,T$Z.tilingOffset=T$E},T$Z._getMeshRenderSharedMaterialAlbedo=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.albedoColor.elements:null}return T$b.meshRender.sharedMaterial.albedoColor.elements},T$Z._setMeshRenderSharedMaterialAlbedo=function(T$$,T$b,T$u){var T$Z,T$E;if(T$$){var T$r=T$$.transform._entity;T$r&&((T$E=(T$Z=T$r.owner.meshRender.material).albedoColor).elements=T$u,T$Z.albedoColor=T$E)}else(T$E=(T$Z=T$b.meshRender.material).albedoColor).elements=T$u,T$Z.albedoColor=T$E},T$Z._getSkinnedMeshRenderSharedMaterialTilingOffset=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return T$b.skinnedMeshRender.sharedMaterial.tilingOffset.elements},T$Z._setSkinnedMeshRenderSharedMaterialTilingOffset=function(T$$,T$b,T$u){var T$Z,T$E;if(T$$){var T$r=T$$.transform._entity;T$r&&((T$E=(T$Z=T$r.owner.skinnedMeshRender.material).tilingOffset).elements=T$u,T$Z.tilingOffset=T$E)}else(T$E=(T$Z=T$b.skinnedMeshRender.material).tilingOffset).elements=T$u,T$Z.tilingOffset=T$E},T$Z._getSkinnedMeshRenderSharedMaterialAlbedo=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return T$b.skinnedMeshRender.sharedMaterial.albedoColor.elements},T$Z._setSkinnedMeshRenderSharedMaterialAlbedo=function(T$$,T$b,T$u){var T$Z,T$E;if(T$$){var T$r=T$$.transform._entity;T$r&&((T$E=(T$Z=T$r.owner.skinnedMeshRender.material).albedoColor).elements=T$u,T$Z.albedoColor=T$E)}else(T$E=(T$Z=T$b.skinnedMeshRender.material).albedoColor).elements=T$u,T$Z.albedoColor=T$E},T$Z._getParticleRenderSharedMaterialTintColor=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.particleRender.sharedMaterial.tintColor.elements:null}return T$b.particleRender.sharedMaterial.tintColor.elements},T$Z._setParticleRenderSharedMaterialTintColor=function(T$$,T$b,T$u){var T$Z,T$E;if(T$$){var T$r=T$$.transform._entity;T$r&&((T$E=(T$Z=T$r.owner.particleRender.material).tintColor).elements=T$u,T$Z.tintColor=T$E)}else(T$E=(T$Z=T$b.particleRender.material).tintColor).elements=T$u,T$Z.tintColor=T$E},T$Z._getMeshRenderSharedMaterialAlphaColor=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.alphaColor.elements:null}return T$b.meshRender.sharedMaterial.alphaColor.elements},T$Z._setMeshRenderSharedMaterialAlphaColor=function(T$$,T$b,T$u){var T$Z,T$E;if(T$$){var T$r=T$$.transform._entity;T$r&&((T$E=(T$Z=T$r.owner.meshRender.material).alphaColor).elements=T$u,T$Z.alphaColor=T$E)}else(T$E=(T$Z=T$b.meshRender.material).alphaColor).elements=T$u,T$Z.alphaColor=T$E},T$Z._getMeshRenderSharedMaterialBaseColor=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.baseColor.elements:null}return T$b.meshRender.sharedMaterial.baseColor.elements},T$Z._setMeshRenderSharedMaterialBaseColor=function(T$$,T$b,T$u){var T$Z,T$E;if(T$$){var T$r=T$$.transform._entity;T$r&&((T$E=(T$Z=T$r.owner.meshRender.material).baseColor).elements=T$u,T$Z.baseColor=T$E)}else(T$E=(T$Z=T$b.meshRender.material).baseColor).elements=T$u,T$Z.baseColor=T$E},T$Z._getMeshRenderSharedMaterialDissolve=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.dissolve:0}return T$b.meshRender.sharedMaterial.dissolve},T$Z._setMeshRenderSharedMaterialDissolve=function(T$$,T$b,T$u){if(T$$){var T$Z=T$$.transform._entity;T$Z&&(T$Z.owner.meshRender.material.dissolve=T$u[0])}else T$b.meshRender.material.dissolve=T$u[0]},T$Z._getMeshRenderSharedMaterialDissolveSpeed=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.dissolveSpeed:0}return T$b.meshRender.sharedMaterial.dissolveSpeed},T$Z._setMeshRenderSharedMaterialDissolveSpeed=function(T$$,T$b,T$u){if(T$$){var T$Z=T$$.transform._entity;T$Z&&(T$Z.owner.meshRender.material.dissolveSpeed=T$u[0])}else T$b.meshRender.material.dissolveSpeed=T$u[0]},T$Z._getMeshRenderSharedMaterialMMultiplier=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.mMultiplier:0}return T$b.meshRender.sharedMaterial.mMultiplier},T$Z._setMeshRenderSharedMaterialMMultiplier=function(T$$,T$b,T$u){if(T$$){var T$Z=T$$.transform._entity;T$Z&&(T$Z.owner.meshRender.material.mMultiplier=T$u[0])}else T$b.meshRender.material.mMultiplier=T$u[0]},T$Z._getMeshRenderSharedMaterialBaseScrollSpeedX=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return T$b.meshRender.sharedMaterial.baseScrollSpeedX},T$Z._setMeshRenderSharedMaterialBaseScrollSpeedX=function(T$$,T$b,T$u){if(T$$){var T$Z=T$$.transform._entity;T$Z&&(T$Z.owner.meshRender.material.baseScrollSpeedX=T$u[0])}else T$b.meshRender.material.baseScrollSpeedX=T$u[0]},T$Z._getMeshRenderSharedMaterialBaseScrollSpeedY=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return T$b.meshRender.sharedMaterial.baseScrollSpeedY},T$Z._setMeshRenderSharedMaterialBaseScrollSpeedY=function(T$$,T$b,T$u){if(T$$){var T$Z=T$$.transform._entity;T$Z&&(T$Z.owner.meshRender.material.baseScrollSpeedY=T$u[0])}else T$b.meshRender.material.baseScrollSpeedY=T$u[0]},T$Z._getMeshRenderSharedMaterialSecondScrollSpeedX=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return T$b.meshRender.sharedMaterial.secondScrollSpeedX},T$Z._setMeshRenderSharedMaterialSecondScrollSpeedX=function(T$$,T$b,T$u){if(T$$){var T$Z=T$$.transform._entity;T$Z&&(T$Z.owner.meshRender.material.secondScrollSpeedX=T$u[0])}else T$b.meshRender.material.secondScrollSpeedX=T$u[0]},T$Z._getMeshRenderSharedMaterialSecondScrollSpeedY=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return T$b.meshRender.sharedMaterial.secondScrollSpeedY},T$Z._setMeshRenderSharedMaterialSecondScrollSpeedY=function(T$$,T$b,T$u){if(T$$){var T$Z=T$$.transform._entity;T$Z&&(T$Z.owner.meshRender.material.secondScrollSpeedY=T$u[0])}else T$b.meshRender.material.secondScrollSpeedY=T$u[0]},T$Z._getMeshRenderSharedMaterialAlpha=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.alpha:0}return T$b.meshRender.sharedMaterial.alpha},T$Z._setMeshRenderSharedMaterialAlpha=function(T$$,T$b,T$u){if(T$$){var T$Z=T$$.transform._entity;T$Z&&(T$Z.owner.meshRender.material.alpha=T$u[0])}else T$b.meshRender.material.alpha=T$u[0]},T$Z._getMeshRenderSharedMaterialIntensity=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.intensity:0}return T$b.meshRender.sharedMaterial.intensity},T$Z._setMeshRenderSharedMaterialIntensity=function(T$$,T$b,T$u){if(T$$){var T$Z=T$$.transform._entity;T$Z&&(T$Z.owner.meshRender.material.intensity=T$u[0])}else T$b.meshRender.material.intensity=T$u[0]},T$Z._getMeshRenderSharedMaterialDetailTilingOffset=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return T$b.meshRender.sharedMaterial.detailTilingOffset.elements},T$Z._setMeshRenderSharedMaterialDetailTilingOffset=function(T$$,T$b,T$u){var T$Z,T$E;if(T$$){var T$r=T$$.transform._entity;T$r&&((T$E=(T$Z=T$r.owner.meshRender.material).detailTilingOffset).elements=T$u,T$Z.detailTilingOffset=T$E)}else(T$E=(T$Z=T$b.meshRender.material).detailTilingOffset).elements=T$u,T$Z.detailTilingOffset=T$E},T$Z._getMeshRenderSharedMaterialDissolveTilingOffset=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return T$b.meshRender.sharedMaterial.dissolveTilingOffset.elements},T$Z._setMeshRenderSharedMaterialDissolveTilingOffset=function(T$$,T$b,T$u){var T$Z,T$E;if(T$$){var T$r=T$$.transform._entity;T$r&&((T$E=(T$Z=T$r.owner.meshRender.material).dissolveTilingOffset).elements=T$u,T$Z.dissolveTilingOffset=T$E)}else(T$E=(T$Z=T$b.meshRender.material).dissolveTilingOffset).elements=T$u,T$Z.dissolveTilingOffset=T$E},T$Z._getMeshRenderSharedMaterialMaskTilingOffset=function(T$$,T$b){if(T$$){var T$u=T$$.transform._entity;return T$u?T$u.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return T$b.meshRender.sharedMaterial.maskTilingOffset.elements},T$Z._setMeshRenderSharedMaterialMaskTilingOffset=function(T$$,T$b,T$u){var T$Z,T$E;if(T$$){var T$r=T$$.transform._entity;T$r&&((T$E=(T$Z=T$r.owner.meshRender.material).maskTilingOffset).elements=T$u,T$Z.maskTilingOffset=T$E)}else(T$E=(T$Z=T$b.meshRender.material).maskTilingOffset).elements=T$u,T$Z.maskTilingOffset=T$E},T$Z._propertyIDCounter=0,T$Z._propertyIndexDic={},T$Z._propertySetFuncs=[],T$Z._propertyGetFuncs=[],T$Z}(),T$c=function(){function T$$(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return T$N(T$$,"laya.d3.animation.Keyframe"),T$$}(),T$J=function(){function T$$(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return T$N(T$$,"laya.d3.animation.KeyframeNode"),T$$}(),T$p=(function(){function T$$(){this._tempVector30=new T$Fb,this._tempVector31=new T$Fb,this._tempVector32=new T$Fb,this._a=new T$Fb,this._b=new T$Fb,this._c=new T$Fb,this._d=new T$Fb}T$N(T$$,"laya.d3.core.glitter.SplineCurvePositionVelocity");var T$b=T$$.prototype;T$b.Init=function(T$$,T$b,T$u,T$Z){T$$.cloneTo(this._d),T$b.cloneTo(this._c),T$Fb.scale(T$$,2,this._a),T$Fb.scale(T$u,2,this._tempVector30),T$Fb.subtract(this._a,this._tempVector30,this._a),T$Fb.add(this._a,T$b,this._a),T$Fb.add(this._a,T$Z,this._a),T$Fb.scale(T$u,3,this._b),T$Fb.scale(T$$,3,this._tempVector30),T$Fb.subtract(this._b,this._tempVector30,this._b),T$Fb.subtract(this._b,T$Z,this._b),T$Fb.scale(T$b,2,this._tempVector30),T$Fb.subtract(this._b,this._tempVector30,this._b)},T$b.Slerp=function(T$$,T$b){T$Fb.scale(this._a,T$$*T$$*T$$,this._tempVector30),T$Fb.scale(this._b,T$$*T$$,this._tempVector31),T$Fb.scale(this._c,T$$,this._tempVector32),T$Fb.add(this._tempVector30,this._tempVector31,T$b),T$Fb.add(T$b,this._tempVector32,T$b),T$Fb.add(T$b,this._d,T$b)}}(),function(){function T$l(T$$,T$b,T$u,T$Z){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=T$$,this._h=T$b,this._minHeight=T$u,this._maxHeight=T$Z}T$N(T$l,"laya.d3.core.HeightMap");var T$$=T$l.prototype;T$$._inBounds=function(T$$,T$b){return 0<=T$$&&T$$<this._h&&0<=T$b&&T$b<this._w},T$$.getHeight=function(T$$,T$b){return this._inBounds(T$$,T$b)?this._datas[T$$][T$b]:NaN},T$D(0,T$$,"width",function(){return this._w}),T$D(0,T$$,"height",function(){return this._h}),T$D(0,T$$,"maxHeight",function(){return this._maxHeight}),T$D(0,T$$,"minHeight",function(){return this._minHeight}),T$l.creatFromMesh=function(T$$,T$b,T$u,T$Z){for(var T$E=[],T$r=[],T$F=T$$.getSubMeshCount(),T$x=0;T$x<T$F;T$x++){for(var T$g=T$$.getSubMesh(T$x),T$H=T$g._getVertexBuffer(),T$w=T$H.getData(),T$I=[],T$o=0;T$o<T$w.length;T$o+=T$H.vertexDeclaration.vertexStride/4){var T$N=new T$Fb(T$w[T$o+0],T$w[T$o+1],T$w[T$o+2]);T$I.push(T$N)}T$E.push(T$I);var T$D=T$g._getIndexBuffer();T$r.push(T$D.getData())}var T$e=T$$.boundingBox,T$L=T$e.min.x,T$T=T$e.min.z,T$_=T$e.max.x,T$y=T$e.max.z,T$S=T$e.min.y,T$P=T$e.max.y,T$i=T$_-T$L,T$z=T$y-T$T,T$q=T$Z.elements[0]=T$i/(T$b-1),T$a=T$Z.elements[1]=T$z/(T$u-1),T$t=new T$l(T$b,T$u,T$S,T$P),T$C=T$l._tempRay,T$K=T$C.direction.elements;T$K[0]=0,T$K[1]=-1,T$K[2]=0;var T$O=T$P+.1;T$C.origin.elements[1]=T$O;for(var T$V=0;T$V<T$u;T$V++){var T$v=T$T+T$V*T$a;T$t._datas[T$V]=[];for(var T$p=0;T$p<T$b;T$p++){var T$Y=T$L+T$p*T$q,T$k=T$C.origin.elements;T$k[0]=T$Y,T$k[2]=T$v;var T$M=T$l._getPosition(T$C,T$E,T$r);T$t._datas[T$V][T$p]=T$M===Number.MAX_VALUE?NaN:T$O-T$M}}return T$t},T$l.createFromImage=function(T$$,T$b,T$u){for(var T$Z=T$$.width,T$E=T$$.height,T$r=new T$l(T$Z,T$E,T$b,T$u),T$F=(T$u-T$b)/254,T$x=T$$.getPixels(),T$g=0,T$H=0;T$H<T$E;T$H++)for(var T$w=T$r._datas[T$H]=[],T$I=0;T$I<T$Z;T$I++){var T$o=T$x[T$g++],T$N=T$x[T$g++],T$D=T$x[T$g++],T$e=T$x[T$g++];T$w[T$I]=255==T$o&&255==T$N&&255==T$D&&255==T$e?NaN:(T$o+T$N+T$D)/3*T$F+T$b}return T$r},T$l._getPosition=function(T$$,T$b,T$u){for(var T$Z=Number.MAX_VALUE,T$E=0;T$E<T$b.length;T$E++)for(var T$r=T$b[T$E],T$F=T$u[T$E],T$x=0;T$x<T$F.length;T$x+=3){var T$g=T$r[T$F[T$x+0]],T$H=T$r[T$F[T$x+1]],T$w=T$r[T$F[T$x+2]],T$I=T$Db.rayIntersectsTriangle(T$$,T$g,T$H,T$w);!isNaN(T$I)&&T$I<T$Z&&(T$Z=T$I)}return T$Z},T$I(T$l,["_tempRay",function(){return this._tempRay=new T$Eb(new T$Fb,new T$Fb)}])}(),function(){function T$E(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}T$N(T$E,"laya.d3.core.Layer");var T$$=T$E.prototype;return T$$._binarySearchIndex=function(){for(var T$$=0,T$b=T$E._collsionTestList.length-1,T$u=0;T$$<=T$b;){T$u=Math.floor((T$$+T$b)/2);var T$Z=T$E._collsionTestList[T$u];if(T$Z==this._number)return T$u;T$Z>this._number?T$b=T$u-1:T$$=T$u+1}return T$$},T$$._addCollider=function(T$$){0===this._colliders.length&&T$E._collsionTestList.splice(this._binarySearchIndex(),0,this._number),T$$._isRigidbody?(this._colliders.unshift(T$$),this._nonRigidbodyOffset++):this._colliders.push(T$$)},T$$._removeCollider=function(T$$){var T$b=this._colliders.indexOf(T$$);T$b<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(T$b,1),0===this._colliders.length&&T$E._collsionTestList.splice(T$E._collsionTestList.indexOf(this._number),1)},T$D(0,T$$,"number",function(){return this._number}),T$D(0,T$$,"visible",function(){return this._visible},function(T$$){this._visible=T$$,T$E._visibleLayers=T$$?T$E._visibleLayers|this.mask:T$E._visibleLayers&~this.mask}),T$D(0,T$$,"mask",function(){return this._mask}),T$D(1,T$E,"visibleLayers",function(){return T$E._visibleLayers},function(T$$){T$E._visibleLayers=T$$;for(var T$b=0,T$u=T$E._layerList.length;T$b<T$u;T$b++){var T$Z=T$E._layerList[T$b];T$Z._visible=0!=(T$Z._mask&T$E._visibleLayers)}}),T$E.__init__=function(){T$E._layerList.length=31;for(var T$$=0;T$$<31;T$$++){var T$b=new T$E;T$E._layerList[T$$]=T$b,0===T$$?(T$b.name="Default Layer",T$b.visible=!0):(T$b.name="Layer-"+T$$,T$b.visible=!1),T$b._number=T$$,T$b._mask=Math.pow(2,T$$)}T$E.currentCreationLayer=T$E._layerList[0]},T$E.getLayerByNumber=function(T$$){if(T$$<0||30<T$$)throw new Error("无法返回指定Layer，该number超出范围！");return T$E._layerList[T$$]},T$E.getLayerByName=function(T$$){for(var T$b=0;T$b<31;T$b++)if(T$E._layerList[T$b].name===T$$)return T$E._layerList[T$b];throw new Error("无法返回指定Layer,该name不存在")},T$E.isVisible=function(T$$){return 0!=(T$$&T$E._currentCameraCullingMask&T$E._visibleLayers)},T$E._layerList=[],T$E._visibleLayers=2147483647,T$E._collsionTestList=[],T$E._currentCameraCullingMask=2147483647,T$E.maxCount=31,T$E.currentCreationLayer=null,T$E}()),T$Y=(function(){function T$$(T$$,T$b,T$u){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=T$$,this._minCount=T$b,this._maxCount=T$u}T$N(T$$,"laya.d3.core.particleShuriKen.module.Burst");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.cloneTo=function(T$$){var T$b=T$$;T$b._time=this._time,T$b._minCount=this._minCount,T$b._maxCount=this._maxCount},T$b.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$b,"time",function(){return this._time}),T$D(0,T$b,"minCount",function(){return this._minCount}),T$D(0,T$b,"maxCount",function(){return this._maxCount})}(),function(){function T$$(T$$){this._color=null,this.enbale=!1,this._color=T$$}T$N(T$$,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var T$b=T$$.prototype;T$b.cloneTo=function(T$$){var T$b=T$$;this._color.cloneTo(T$b._color),T$b.enbale=this.enbale},T$b.clone=function(){var T$$;switch(this._color.type){case 0:T$$=T$M.createByConstant(this._color.constant.clone());break;case 1:T$$=T$M.createByGradient(this._color.gradient.clone());break;case 2:T$$=T$M.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:T$$=T$M.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var T$b=new this.constructor(T$$);return T$b.enbale=this.enbale,T$b},T$D(0,T$b,"color",function(){return this._color})}(),function(){function T$$(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}T$N(T$$,"laya.d3.core.particleShuriKen.module.Emission");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),T$b._destroy=function(){this._bursts=null,this._destroyed=!0},T$b.getBurstsCount=function(){return this._bursts.length},T$b.getBurstByIndex=function(T$$){return this._bursts[T$$]},T$b.addBurst=function(T$$){var T$b=this._bursts.length;if(0<T$b)for(var T$u=0;T$u<T$b;T$u++)this._bursts[T$u].time>T$$.time&&this._bursts.splice(T$u,0,T$$);this._bursts.push(T$$)},T$b.removeBurst=function(T$$){var T$b=this._bursts.indexOf(T$$);-1!==T$b&&this._bursts.splice(T$b,1)},T$b.removeBurstByIndex=function(T$$){this._bursts.splice(T$$,1)},T$b.clearBurst=function(){this._bursts.length=0},T$b.cloneTo=function(T$$){var T$b=T$$,T$u=T$b._bursts;T$u.length=this._bursts.length;for(var T$Z=0,T$E=this._bursts.length;T$Z<T$E;T$Z++){var T$r=T$u[T$Z];T$r?this._bursts[T$Z].cloneTo(T$r):T$u[T$Z]=this._bursts[T$Z].clone()}T$b._emissionRate=this._emissionRate,T$b.enbale=this.enbale},T$b.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$b,"destroyed",function(){return this._destroyed}),T$D(0,T$b,"emissionRate",function(){return this._emissionRate},function(T$$){if(T$$<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=T$$})}(),function(){function T$Z(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}T$N(T$Z,"laya.d3.core.particleShuriKen.module.FrameOverTime");var T$$=T$Z.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.cloneTo=function(T$$){var T$b=T$$;T$b._type=this._type,T$b._constant=this._constant,this._overTime.cloneTo(T$b._overTime),T$b._constantMin=this._constantMin,T$b._constantMax=this._constantMax,this._overTimeMin.cloneTo(T$b._overTimeMin),this._overTimeMax.cloneTo(T$b._overTimeMax)},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$$,"frameOverTimeData",function(){return this._overTime}),T$D(0,T$$,"constant",function(){return this._constant}),T$D(0,T$$,"type",function(){return this._type}),T$D(0,T$$,"frameOverTimeDataMin",function(){return this._overTimeMin}),T$D(0,T$$,"constantMin",function(){return this._constantMin}),T$D(0,T$$,"frameOverTimeDataMax",function(){return this._overTimeMax}),T$D(0,T$$,"constantMax",function(){return this._constantMax}),T$Z.createByConstant=function(T$$){var T$b=new T$Z;return T$b._type=0,T$b._constant=T$$,T$b},T$Z.createByOverTime=function(T$$){var T$b=new T$Z;return T$b._type=1,T$b._overTime=T$$,T$b},T$Z.createByRandomTwoConstant=function(T$$,T$b){var T$u=new T$Z;return T$u._type=2,T$u._constantMin=T$$,T$u._constantMax=T$b,T$u},T$Z.createByRandomTwoOverTime=function(T$$,T$b){var T$u=new T$Z;return T$u._type=3,T$u._overTimeMin=T$$,T$u._overTimeMax=T$b,T$u},T$Z}()),T$k=function(){function T$H(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}T$N(T$H,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var T$$=T$H.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.cloneTo=function(T$$){var T$b=T$$;T$b._type=this._type,T$b._separateAxes=this._separateAxes,T$b._constant=this._constant,this._constantSeparate.cloneTo(T$b._constantSeparate),this._gradient.cloneTo(T$b._gradient),this._gradientX.cloneTo(T$b._gradientX),this._gradientY.cloneTo(T$b._gradientY),this._gradientZ.cloneTo(T$b._gradientZ),T$b._constantMin=this._constantMin,T$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(T$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(T$b._constantMaxSeparate),this._gradientMin.cloneTo(T$b._gradientMin),this._gradientMax.cloneTo(T$b._gradientMax),this._gradientXMin.cloneTo(T$b._gradientXMin),this._gradientXMax.cloneTo(T$b._gradientXMax),this._gradientYMin.cloneTo(T$b._gradientYMin),this._gradientYMax.cloneTo(T$b._gradientYMax),this._gradientZMin.cloneTo(T$b._gradientZMin),this._gradientZMax.cloneTo(T$b._gradientZMax)},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$$,"gradientZ",function(){return this._gradientZ}),T$D(0,T$$,"constant",function(){return this._constant}),T$D(0,T$$,"gradient",function(){return this._gradient}),T$D(0,T$$,"separateAxes",function(){return this._separateAxes}),T$D(0,T$$,"type",function(){return this._type}),T$D(0,T$$,"constantSeparate",function(){return this._constantSeparate}),T$D(0,T$$,"gradientX",function(){return this._gradientX}),T$D(0,T$$,"gradientY",function(){return this._gradientY}),T$D(0,T$$,"gradientW",function(){return this._gradientW}),T$D(0,T$$,"gradientMin",function(){return this._gradientMin}),T$D(0,T$$,"constantMin",function(){return this._constantMin}),T$D(0,T$$,"gradientMax",function(){return this._gradientMax}),T$D(0,T$$,"constantMax",function(){return this._constantMax}),T$D(0,T$$,"gradientWMin",function(){return this._gradientWMin}),T$D(0,T$$,"constantMinSeparate",function(){return this._constantMinSeparate}),T$D(0,T$$,"constantMaxSeparate",function(){return this._constantMaxSeparate}),T$D(0,T$$,"gradientXMin",function(){return this._gradientXMin}),T$D(0,T$$,"gradientXMax",function(){return this._gradientXMax}),T$D(0,T$$,"gradientWMax",function(){return this._gradientWMax}),T$D(0,T$$,"gradientYMin",function(){return this._gradientYMin}),T$D(0,T$$,"gradientYMax",function(){return this._gradientYMax}),T$D(0,T$$,"gradientZMin",function(){return this._gradientZMin}),T$D(0,T$$,"gradientZMax",function(){return this._gradientZMax}),T$H.createByConstant=function(T$$){var T$b=new T$H;return T$b._type=0,T$b._separateAxes=!1,T$b._constant=T$$,T$b},T$H.createByConstantSeparate=function(T$$){var T$b=new T$H;return T$b._type=0,T$b._separateAxes=!0,T$b._constantSeparate=T$$,T$b},T$H.createByGradient=function(T$$){var T$b=new T$H;return T$b._type=1,T$b._separateAxes=!1,T$b._gradient=T$$,T$b},T$H.createByGradientSeparate=function(T$$,T$b,T$u,T$Z){var T$E=new T$H;return T$E._type=1,T$E._separateAxes=!0,T$E._gradientX=T$$,T$E._gradientY=T$b,T$E._gradientZ=T$u,T$E._gradientW=T$Z,T$E},T$H.createByRandomTwoConstant=function(T$$,T$b){var T$u=new T$H;return T$u._type=2,T$u._separateAxes=!1,T$u._constantMin=T$$,T$u._constantMax=T$b,T$u},T$H.createByRandomTwoConstantSeparate=function(T$$,T$b){var T$u=new T$H;return T$u._type=2,T$u._separateAxes=!0,T$u._constantMinSeparate=T$$,T$u._constantMaxSeparate=T$b,T$u},T$H.createByRandomTwoGradient=function(T$$,T$b){var T$u=new T$H;return T$u._type=3,T$u._separateAxes=!1,T$u._gradientMin=T$$,T$u._gradientMax=T$b,T$u},T$H.createByRandomTwoGradientSeparate=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){var T$g=new T$H;return T$g._type=3,T$g._separateAxes=!0,T$g._gradientXMin=T$$,T$g._gradientXMax=T$b,T$g._gradientYMin=T$u,T$g._gradientYMax=T$Z,T$g._gradientZMin=T$E,T$g._gradientZMax=T$r,T$g._gradientWMin=T$F,T$g._gradientWMax=T$x,T$g},T$H}(),T$M=function(){function T$Z(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}T$N(T$Z,"laya.d3.core.particleShuriKen.module.GradientColor");var T$$=T$Z.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.cloneTo=function(T$$){var T$b=T$$;T$b._type=this._type,this._constant.cloneTo(T$b._constant),this._constantMin.cloneTo(T$b._constantMin),this._constantMax.cloneTo(T$b._constantMax),this._gradient.cloneTo(T$b._gradient),this._gradientMin.cloneTo(T$b._gradientMin),this._gradientMax.cloneTo(T$b._gradientMax)},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$$,"gradient",function(){return this._gradient}),T$D(0,T$$,"constant",function(){return this._constant}),T$D(0,T$$,"type",function(){return this._type}),T$D(0,T$$,"gradientMin",function(){return this._gradientMin}),T$D(0,T$$,"constantMin",function(){return this._constantMin}),T$D(0,T$$,"gradientMax",function(){return this._gradientMax}),T$D(0,T$$,"constantMax",function(){return this._constantMax}),T$Z.createByConstant=function(T$$){var T$b=new T$Z;return T$b._type=0,T$b._constant=T$$,T$b},T$Z.createByGradient=function(T$$){var T$b=new T$Z;return T$b._type=1,T$b._gradient=T$$,T$b},T$Z.createByRandomTwoConstant=function(T$$,T$b){var T$u=new T$Z;return T$u._type=2,T$u._constantMin=T$$,T$u._constantMax=T$b,T$u},T$Z.createByRandomTwoGradient=function(T$$,T$b){var T$u=new T$Z;return T$u._type=3,T$u._gradientMin=T$$,T$u._gradientMax=T$b,T$u},T$Z}(),T$l=(function(){function T$$(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}T$N(T$$,"laya.d3.core.particleShuriKen.module.GradientDataColor");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.addAlpha=function(T$$,T$b){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==T$$&&(T$$=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=T$$,this._alphaElements[this._alphaCurrentLength++]=T$b):DEBUG},T$b.addRGB=function(T$$,T$b){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==T$$&&(T$$=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=T$$,this._rgbElements[this._rgbCurrentLength++]=T$b.x,this._rgbElements[this._rgbCurrentLength++]=T$b.y,this._rgbElements[this._rgbCurrentLength++]=T$b.z):DEBUG},T$b.cloneTo=function(T$$){var T$b=T$$,T$u=0,T$Z=0;T$b._alphaCurrentLength=this._alphaCurrentLength;var T$E=T$b._alphaElements;for(T$E.length=this._alphaElements.length,T$u=0,T$Z=this._alphaElements.length;T$u<T$Z;T$u++)T$E[T$u]=this._alphaElements[T$u];T$b._rgbCurrentLength=this._rgbCurrentLength;var T$r=T$b._rgbElements;for(T$r.length=this._rgbElements.length,T$u=0,T$Z=this._rgbElements.length;T$u<T$Z;T$u++)T$r[T$u]=this._rgbElements[T$u]},T$b.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$b,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),T$D(0,T$b,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function T$$(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}T$N(T$$,"laya.d3.core.particleShuriKen.module.GradientDataInt");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.add=function(T$$,T$b){this._currentLength<8?(6===this._currentLength&&1!==T$$&&(T$$=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=T$$,this._elements[this._currentLength++]=T$b):console.log("Warning:data count must lessEqual than 4")},T$b.cloneTo=function(T$$){var T$b=T$$;T$b._currentLength=this._currentLength;var T$u=T$b._elements;T$u.length=this._elements.length;for(var T$Z=0,T$E=this._elements.length;T$Z<T$E;T$Z++)T$u[T$Z]=this._elements[T$Z]},T$b.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function T$$(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}T$N(T$$,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.add=function(T$$,T$b){this._currentLength<8?(6===this._currentLength&&1!==T$$&&(T$$=1,DEBUG),this._elements[this._currentLength++]=T$$,this._elements[this._currentLength++]=T$b):DEBUG},T$b.getKeyByIndex=function(T$$){return this._elements[2*T$$]},T$b.getValueByIndex=function(T$$){return this._elements[2*T$$+1]},T$b.getAverageValue=function(){for(var T$$=0,T$b=this._currentLength-2;T$$<T$b;T$$+=2){this._elements[T$$+1];this._elements[T$$+3],this._elements[T$$+2]-this._elements[T$$]}return 0},T$b.cloneTo=function(T$$){var T$b=T$$;T$b._currentLength=this._currentLength;var T$u=T$b._elements;T$u.length=this._elements.length;for(var T$Z=0,T$E=this._elements.length;T$Z<T$E;T$Z++)T$u[T$Z]=this._elements[T$Z]},T$b.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function T$$(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}T$N(T$$,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.add=function(T$$,T$b){this._currentLength<8?(6===this._currentLength&&1!==T$$&&(T$$=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=T$$,this._elements[this._currentLength++]=T$b.x,this._elements[this._currentLength++]=T$b.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},T$b.cloneTo=function(T$$){var T$b=T$$;T$b._currentLength=this._currentLength;var T$u=T$b._elements;T$u.length=this._elements.length;for(var T$Z=0,T$E=this._elements.length;T$Z<T$E;T$Z++)T$u[T$Z]=this._elements[T$Z]},T$b.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$b,"gradientCount",function(){return this._currentLength/3})}(),function(){function T$x(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}T$N(T$x,"laya.d3.core.particleShuriKen.module.GradientSize");var T$$=T$x.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.getMaxSizeInGradient=function(){var T$$=0,T$b=0,T$u=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(T$$=0,T$b=this._gradientX.gradientCount;T$$<T$b;T$$++)T$u=Math.max(T$u,this._gradientX.getValueByIndex(T$$));for(T$$=0,T$b=this._gradientY.gradientCount;T$$<T$b;T$$++)T$u=Math.max(T$u,this._gradientY.getValueByIndex(T$$))}else for(T$$=0,T$b=this._gradient.gradientCount;T$$<T$b;T$$++)T$u=Math.max(T$u,this._gradient.getValueByIndex(T$$));break;case 1:T$u=this._separateAxes?(T$u=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),T$u=Math.max(T$u,this._constantMinSeparate.y),Math.max(T$u,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(T$$=0,T$b=this._gradientXMin.gradientCount;T$$<T$b;T$$++)T$u=Math.max(T$u,this._gradientXMin.getValueByIndex(T$$));for(T$$=0,T$b=this._gradientXMax.gradientCount;T$$<T$b;T$$++)T$u=Math.max(T$u,this._gradientXMax.getValueByIndex(T$$));for(T$$=0,T$b=this._gradientYMin.gradientCount;T$$<T$b;T$$++)T$u=Math.max(T$u,this._gradientYMin.getValueByIndex(T$$));for(T$$=0,T$b=this._gradientZMax.gradientCount;T$$<T$b;T$$++)T$u=Math.max(T$u,this._gradientZMax.getValueByIndex(T$$))}else{for(T$$=0,T$b=this._gradientMin.gradientCount;T$$<T$b;T$$++)T$u=Math.max(T$u,this._gradientMin.getValueByIndex(T$$));for(T$$=0,T$b=this._gradientMax.gradientCount;T$$<T$b;T$$++)T$u=Math.max(T$u,this._gradientMax.getValueByIndex(T$$))}}return T$u},T$$.cloneTo=function(T$$){var T$b=T$$;T$b._type=this._type,T$b._separateAxes=this._separateAxes,this._gradient.cloneTo(T$b._gradient),this._gradientX.cloneTo(T$b._gradientX),this._gradientY.cloneTo(T$b._gradientY),this._gradientZ.cloneTo(T$b._gradientZ),T$b._constantMin=this._constantMin,T$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(T$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(T$b._constantMaxSeparate),this._gradientMin.cloneTo(T$b._gradientMin),this._gradientMax.cloneTo(T$b._gradientMax),this._gradientXMin.cloneTo(T$b._gradientXMin),this._gradientXMax.cloneTo(T$b._gradientXMax),this._gradientYMin.cloneTo(T$b._gradientYMin),this._gradientYMax.cloneTo(T$b._gradientYMax),this._gradientZMin.cloneTo(T$b._gradientZMin),this._gradientZMax.cloneTo(T$b._gradientZMax)},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$$,"gradientZ",function(){return this._gradientZ}),T$D(0,T$$,"gradient",function(){return this._gradient}),T$D(0,T$$,"separateAxes",function(){return this._separateAxes}),T$D(0,T$$,"type",function(){return this._type}),T$D(0,T$$,"gradientMin",function(){return this._gradientMin}),T$D(0,T$$,"constantMin",function(){return this._constantMin}),T$D(0,T$$,"gradientX",function(){return this._gradientX}),T$D(0,T$$,"gradientY",function(){return this._gradientY}),T$D(0,T$$,"gradientMax",function(){return this._gradientMax}),T$D(0,T$$,"constantMax",function(){return this._constantMax}),T$D(0,T$$,"constantMinSeparate",function(){return this._constantMinSeparate}),T$D(0,T$$,"constantMaxSeparate",function(){return this._constantMaxSeparate}),T$D(0,T$$,"gradientXMin",function(){return this._gradientXMin}),T$D(0,T$$,"gradientXMax",function(){return this._gradientXMax}),T$D(0,T$$,"gradientYMin",function(){return this._gradientYMin}),T$D(0,T$$,"gradientYMax",function(){return this._gradientYMax}),T$D(0,T$$,"gradientZMin",function(){return this._gradientZMin}),T$D(0,T$$,"gradientZMax",function(){return this._gradientZMax}),T$x.createByGradient=function(T$$){var T$b=new T$x;return T$b._type=0,T$b._separateAxes=!1,T$b._gradient=T$$,T$b},T$x.createByGradientSeparate=function(T$$,T$b,T$u){var T$Z=new T$x;return T$Z._type=0,T$Z._separateAxes=!0,T$Z._gradientX=T$$,T$Z._gradientY=T$b,T$Z._gradientZ=T$u,T$Z},T$x.createByRandomTwoConstant=function(T$$,T$b){var T$u=new T$x;return T$u._type=1,T$u._separateAxes=!1,T$u._constantMin=T$$,T$u._constantMax=T$b,T$u},T$x.createByRandomTwoConstantSeparate=function(T$$,T$b){var T$u=new T$x;return T$u._type=1,T$u._separateAxes=!0,T$u._constantMinSeparate=T$$,T$u._constantMaxSeparate=T$b,T$u},T$x.createByRandomTwoGradient=function(T$$,T$b){var T$u=new T$x;return T$u._type=2,T$u._separateAxes=!1,T$u._gradientMin=T$$,T$u._gradientMax=T$b,T$u},T$x.createByRandomTwoGradientSeparate=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=new T$x;return T$F._type=2,T$F._separateAxes=!0,T$F._gradientXMin=T$$,T$F._gradientXMax=T$b,T$F._gradientYMin=T$u,T$F._gradientYMax=T$Z,T$F._gradientZMin=T$E,T$F._gradientZMax=T$r,T$F},T$x}()),T$X=function(){function T$x(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}T$N(T$x,"laya.d3.core.particleShuriKen.module.GradientVelocity");var T$$=T$x.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.cloneTo=function(T$$){var T$b=T$$;T$b._type=this._type,this._constant.cloneTo(T$b._constant),this._gradientX.cloneTo(T$b._gradientX),this._gradientY.cloneTo(T$b._gradientY),this._gradientZ.cloneTo(T$b._gradientZ),this._constantMin.cloneTo(T$b._constantMin),this._constantMax.cloneTo(T$b._constantMax),this._gradientXMin.cloneTo(T$b._gradientXMin),this._gradientXMax.cloneTo(T$b._gradientXMax),this._gradientYMin.cloneTo(T$b._gradientYMin),this._gradientYMax.cloneTo(T$b._gradientYMax),this._gradientZMin.cloneTo(T$b._gradientZMin),this._gradientZMax.cloneTo(T$b._gradientZMax)},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$$,"gradientZ",function(){return this._gradientZ}),T$D(0,T$$,"constant",function(){return this._constant}),T$D(0,T$$,"type",function(){return this._type}),T$D(0,T$$,"gradientXMax",function(){return this._gradientXMax}),T$D(0,T$$,"constantMin",function(){return this._constantMin}),T$D(0,T$$,"gradientX",function(){return this._gradientX}),T$D(0,T$$,"gradientY",function(){return this._gradientY}),T$D(0,T$$,"gradientXMin",function(){return this._gradientXMin}),T$D(0,T$$,"constantMax",function(){return this._constantMax}),T$D(0,T$$,"gradientYMin",function(){return this._gradientYMin}),T$D(0,T$$,"gradientYMax",function(){return this._gradientYMax}),T$D(0,T$$,"gradientZMin",function(){return this._gradientZMin}),T$D(0,T$$,"gradientZMax",function(){return this._gradientZMax}),T$x.createByConstant=function(T$$){var T$b=new T$x;return T$b._type=0,T$b._constant=T$$,T$b},T$x.createByGradient=function(T$$,T$b,T$u){var T$Z=new T$x;return T$Z._type=1,T$Z._gradientX=T$$,T$Z._gradientY=T$b,T$Z._gradientZ=T$u,T$Z},T$x.createByRandomTwoConstant=function(T$$,T$b){var T$u=new T$x;return T$u._type=2,T$u._constantMin=T$$,T$u._constantMax=T$b,T$u},T$x.createByRandomTwoGradient=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=new T$x;return T$F._type=3,T$F._gradientXMin=T$$,T$F._gradientXMax=T$b,T$F._gradientYMin=T$u,T$F._gradientYMax=T$Z,T$F._gradientZMin=T$E,T$F._gradientZMax=T$r,T$F},T$x}(),T$s=(function(){function T$$(T$$){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=T$$}T$N(T$$,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.cloneTo=function(T$$){var T$b=T$$;this._angularVelocity.cloneTo(T$b._angularVelocity),T$b.enbale=this.enbale},T$b.clone=function(){var T$$;switch(this._angularVelocity.type){case 0:T$$=this._angularVelocity.separateAxes?T$k.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):T$k.createByConstant(this._angularVelocity.constant);break;case 1:T$$=this._angularVelocity.separateAxes?T$k.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):T$k.createByGradient(this._angularVelocity.gradient.clone());break;case 2:T$$=this._angularVelocity.separateAxes?T$k.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):T$k.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:T$$=this._angularVelocity.separateAxes?T$k.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):T$k.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var T$b=new this.constructor(T$$);return T$b.enbale=this.enbale,T$b},T$D(0,T$b,"angularVelocity",function(){return this._angularVelocity})}(),function(){function T$$(){this.enable=!1,this.randomDirection=!1}T$N(T$$,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b._getShapeBoundBox=function(T$$){throw new Error("BaseShape: must override it.")},T$b._getSpeedBoundBox=function(T$$){throw new Error("BaseShape: must override it.")},T$b.generatePositionAndDirection=function(T$$,T$b,T$u,T$Z){throw new Error("BaseShape: must override it.")},T$b._calculateProceduralBounds=function(T$$,T$b,T$u){this._getShapeBoundBox(T$$);var T$Z=T$$.min,T$E=T$$.max;T$Fb.multiply(T$Z,T$b,T$Z),T$Fb.multiply(T$E,T$b,T$E);var T$r=new T$h$(new T$Fb,new T$Fb);this.randomDirection?(T$r.min=new T$Fb(-1,-1,-1),T$r.max=new T$Fb(1,1,1)):this._getSpeedBoundBox(T$r);var T$F=new T$h$(new T$Fb,new T$Fb),T$x=T$F.min,T$g=T$F.max;T$Fb.scale(T$r.min,T$u.y,T$x),T$Fb.scale(T$r.max,T$u.y,T$g),T$Fb.add(T$$.min,T$x,T$x),T$Fb.add(T$$.max,T$g,T$g),T$Fb.min(T$$.min,T$x,T$$.min),T$Fb.max(T$$.max,T$x,T$$.max);var T$H=new T$h$(new T$Fb,new T$Fb),T$w=T$H.min,T$I=T$H.max;T$Fb.scale(T$r.min,T$u.x,T$w),T$Fb.scale(T$r.max,T$u.x,T$I),T$Fb.min(T$H.min,T$I,T$x),T$Fb.max(T$H.min,T$I,T$g),T$Fb.min(T$$.min,T$x,T$$.min),T$Fb.max(T$$.max,T$x,T$$.max)},T$b.cloneTo=function(T$$){T$$.enable=this.enable},T$b.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$$}()),T$f=function(){function T$r(){}return T$N(T$r,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),T$r._randomPointUnitArcCircle=function(T$$,T$b,T$u){var T$Z=T$b.elements,T$E=NaN;T$E=T$u?T$u.getFloat()*T$$:Math.random()*T$$,T$Z[0]=Math.cos(T$E),T$Z[1]=Math.sin(T$E)},T$r._randomPointInsideUnitArcCircle=function(T$$,T$b,T$u){var T$Z=T$b.elements;T$r._randomPointUnitArcCircle(T$$,T$b,T$u);var T$E=NaN;T$E=T$u?Math.pow(T$u.getFloat(),.5):Math.pow(Math.random(),.5),T$Z[0]=T$Z[0]*T$E,T$Z[1]=T$Z[1]*T$E},T$r._randomPointUnitCircle=function(T$$,T$b){var T$u=T$$.elements,T$Z=NaN;T$Z=T$b?T$b.getFloat()*Math.PI*2:Math.random()*Math.PI*2,T$u[0]=Math.cos(T$Z),T$u[1]=Math.sin(T$Z)},T$r._randomPointInsideUnitCircle=function(T$$,T$b){var T$u=T$$.elements;T$r._randomPointUnitCircle(T$$);var T$Z=NaN;T$Z=T$b?Math.pow(T$b.getFloat(),.5):Math.pow(Math.random(),.5),T$u[0]=T$u[0]*T$Z,T$u[1]=T$u[1]*T$Z},T$r._randomPointUnitSphere=function(T$$,T$b){var T$u=T$$.elements,T$Z=NaN,T$E=NaN;T$E=T$b?(T$Z=T$u[2]=2*T$b.getFloat()-1,T$b.getFloat()*Math.PI*2):(T$Z=T$u[2]=2*Math.random()-1,Math.random()*Math.PI*2);var T$r=Math.sqrt(1-T$Z*T$Z);T$u[0]=T$r*Math.cos(T$E),T$u[1]=T$r*Math.sin(T$E)},T$r._randomPointInsideUnitSphere=function(T$$,T$b){var T$u=T$$.elements;T$r._randomPointUnitSphere(T$$);var T$Z=NaN;T$Z=T$b?Math.pow(T$b.getFloat(),1/3):Math.pow(Math.random(),1/3),T$u[0]=T$u[0]*T$Z,T$u[1]=T$u[1]*T$Z,T$u[2]=T$u[2]*T$Z},T$r._randomPointInsideHalfUnitBox=function(T$$,T$b){var T$u=T$$.elements;T$b?(T$u[0]=T$b.getFloat()-.5,T$u[1]=T$b.getFloat()-.5,T$u[2]=T$b.getFloat()-.5):(T$u[0]=Math.random()-.5,T$u[1]=Math.random()-.5,T$u[2]=Math.random()-.5)},T$r}(),T$Q=(function(){function T$$(T$$){this._size=null,this.enbale=!1,this._size=T$$}T$N(T$$,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.cloneTo=function(T$$){var T$b=T$$;this._size.cloneTo(T$b._size),T$b.enbale=this.enbale},T$b.clone=function(){var T$$;switch(this._size.type){case 0:T$$=this._size.separateAxes?T$l.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):T$l.createByGradient(this._size.gradient.clone());break;case 1:T$$=this._size.separateAxes?T$l.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):T$l.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:T$$=this._size.separateAxes?T$l.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):T$l.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var T$b=new this.constructor(T$$);return T$b.enbale=this.enbale,T$b},T$D(0,T$b,"size",function(){return this._size})}(),function(){function T$Z(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}T$N(T$Z,"laya.d3.core.particleShuriKen.module.StartFrame");var T$$=T$Z.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.cloneTo=function(T$$){var T$b=T$$;T$b._type=this._type,T$b._constant=this._constant,T$b._constantMin=this._constantMin,T$b._constantMax=this._constantMax},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$$,"constant",function(){return this._constant}),T$D(0,T$$,"type",function(){return this._type}),T$D(0,T$$,"constantMin",function(){return this._constantMin}),T$D(0,T$$,"constantMax",function(){return this._constantMax}),T$Z.createByConstant=function(T$$){var T$b=new T$Z;return T$b._type=0,T$b._constant=T$$,T$b},T$Z.createByRandomTwoConstant=function(T$$,T$b){var T$u=new T$Z;return T$u._type=1,T$u._constantMin=T$$,T$u._constantMax=T$b,T$u},T$Z}()),T$W=(function(){function T$$(T$$,T$b){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new T$rb(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=T$$,this._startFrame=T$b}T$N(T$$,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.cloneTo=function(T$$){var T$b=T$$;this.tiles.cloneTo(T$b.tiles),T$b.type=this.type,T$b.randomRow=this.randomRow,this._frame.cloneTo(T$b._frame),this._startFrame.cloneTo(T$b._startFrame),T$b.cycles=this.cycles,T$b.enableUVChannels=this.enableUVChannels,T$b.enable=this.enable},T$b.clone=function(){var T$$,T$b;switch(this._frame.type){case 0:T$$=T$Y.createByConstant(this._frame.constant);break;case 1:T$$=T$Y.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:T$$=T$Y.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:T$$=T$Y.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:T$b=T$Q.createByConstant(this._startFrame.constant);break;case 1:T$b=T$Q.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var T$u=new this.constructor(T$$,T$b);return this.tiles.cloneTo(T$u.tiles),T$u.type=this.type,T$u.randomRow=this.randomRow,T$u.cycles=this.cycles,T$u.enableUVChannels=this.enableUVChannels,T$u.enable=this.enable,T$u},T$D(0,T$b,"frame",function(){return this._frame}),T$D(0,T$b,"startFrame",function(){return this._startFrame})}(),function(){function T$$(T$$){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=T$$}T$N(T$$,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.cloneTo=function(T$$){var T$b=T$$;this._velocity.cloneTo(T$b._velocity),T$b.enbale=this.enbale,T$b.space=this.space},T$b.clone=function(){var T$$;switch(this._velocity.type){case 0:T$$=T$X.createByConstant(this._velocity.constant.clone());break;case 1:T$$=T$X.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:T$$=T$X.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:T$$=T$X.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var T$b=new this.constructor(T$$);return T$b.enbale=this.enbale,T$b.space=this.space,T$b},T$D(0,T$b,"velocity",function(){return this._velocity})}(),function(){function T$$(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new T$ob,this._vb=T$sb.create(T$$._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=T$Xb.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=T$Mb.nameKey.getID("LINE"),this._shaderCompile=T$qb._preCompileShader[this._sharderNameID]}T$N(T$$,"laya.d3.core.PhasorSpriter3D");var T$b=T$$.prototype;return T$b.line=function(T$$,T$b,T$u,T$Z){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$$.x,T$$.y,T$$.z,T$b.x,T$b.y,T$b.z,T$b.w),this.addVertex(T$u.x,T$u.y,T$u.z,T$Z.x,T$Z.y,T$Z.z,T$Z.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},T$b.circle=function(T$$,T$b,T$u,T$Z,T$E,T$r){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*T$b,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/T$b,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*T$$,Math.cos(this._tempNumver0)*T$$,0,T$u,T$Z,T$E,T$r),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},T$b.plane=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=T$Z/2,this._tempNumver1=T$E/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$$-this._tempNumver0,T$b+this._tempNumver1,T$u,T$r,T$F,T$x,T$g),this.addVertex(T$$+this._tempNumver0,T$b+this._tempNumver1,T$u,T$r,T$F,T$x,T$g),this.addVertex(T$$-this._tempNumver0,T$b-this._tempNumver1,T$u,T$r,T$F,T$x,T$g),this.addVertex(T$$+this._tempNumver0,T$b-this._tempNumver1,T$u,T$r,T$F,T$x,T$g),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},T$b.box=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=T$Z/2,this._tempNumver1=T$E/2,this._tempNumver2=T$r/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$$-this._tempNumver0,T$b+this._tempNumver1,T$u+this._tempNumver2,T$F,T$x,T$g,T$H),this.addVertex(T$$+this._tempNumver0,T$b+this._tempNumver1,T$u+this._tempNumver2,T$F,T$x,T$g,T$H),this.addVertex(T$$-this._tempNumver0,T$b-this._tempNumver1,T$u+this._tempNumver2,T$F,T$x,T$g,T$H),this.addVertex(T$$+this._tempNumver0,T$b-this._tempNumver1,T$u+this._tempNumver2,T$F,T$x,T$g,T$H),this.addVertex(T$$+this._tempNumver0,T$b+this._tempNumver1,T$u-this._tempNumver2,T$F,T$x,T$g,T$H),this.addVertex(T$$-this._tempNumver0,T$b+this._tempNumver1,T$u-this._tempNumver2,T$F,T$x,T$g,T$H),this.addVertex(T$$+this._tempNumver0,T$b-this._tempNumver1,T$u-this._tempNumver2,T$F,T$x,T$g,T$H),this.addVertex(T$$-this._tempNumver0,T$b-this._tempNumver1,T$u-this._tempNumver2,T$F,T$x,T$g,T$H),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},T$b.cone=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*T$u+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*T$u>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/T$u,this.addVertexIndex(0,T$b,0,T$Z,T$E,T$r,T$F,this._tempUint0),this.addVertexIndex(0,0,0,T$Z,T$E,T$r,T$F,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<T$u;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(T$$*this._tempNumver2,0,T$$*this._tempNumver3,T$Z,T$E,T$r,T$F,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==T$u-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(T$$*this._tempNumver2,0,T$$*this._tempNumver3,T$Z,T$E,T$r,T$F,this._tempUint0+(this._tempInt0+T$u)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==T$u-1?this.addIndexes(this._tempUint1+T$u+2):this.addIndexes(this._tempUint1+this._tempInt0+T$u+1),this.addIndexes(this._tempUint1+this._tempInt0+T$u),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},T$b.boundingBoxLine=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(T$$,T$E,T$r,T$F,T$x,T$g,T$H),this.addVertex(T$Z,T$E,T$r,T$F,T$x,T$g,T$H),this.addVertex(T$$,T$b,T$r,T$F,T$x,T$g,T$H),this.addVertex(T$Z,T$b,T$r,T$F,T$x,T$g,T$H),this.addVertex(T$Z,T$E,T$u,T$F,T$x,T$g,T$H),this.addVertex(T$$,T$E,T$u,T$F,T$x,T$g,T$H),this.addVertex(T$Z,T$b,T$u,T$F,T$x,T$g,T$H),this.addVertex(T$$,T$b,T$u,T$F,T$x,T$g,T$H),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},T$b.addVertex=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=T$$,this._vbData[this._posInVBData+1]=T$b,this._vbData[this._posInVBData+2]=T$u,this._vbData[this._posInVBData+3]=T$Z,this._vbData[this._posInVBData+4]=T$E,this._vbData[this._posInVBData+5]=T$r,this._vbData[this._posInVBData+6]=T$F,this._posInVBData+=this._floatSizePerVer,this},T$b.addVertexIndex=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){return this._hasBegun||this.addVertexIndexException(),this._vbData[T$x]=T$$,this._vbData[T$x+1]=T$b,this._vbData[T$x+2]=T$u,this._vbData[T$x+3]=T$Z,this._vbData[T$x+4]=T$E,this._vbData[T$x+5]=T$r,this._vbData[T$x+6]=T$F,(T$x+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=T$x),this},T$b.addIndexes=function(T$$){var T$b=arguments;this._hasBegun||this.addVertexIndexException();for(var T$u=0;T$u<T$b.length;T$u++)this._ibData[this._posInIBData]=T$b[T$u],this._posInIBData++;return this},T$b.begin=function(T$$,T$b){return this._hasBegun&&this.beginException0(),1!==T$$&&4!==T$$&&this.beginException1(),this._primitiveType=T$$,this._camera=T$b,this._hasBegun=!0,this},T$b.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},T$b.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(T$$._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),T$q.drawCall++,T$O.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},T$b.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},T$b.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},T$b.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},T$b.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},T$b.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},T$b.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(28,[new T$F$(0,"vector3",0),new T$F$(12,"vector4",1)])}]),T$$}()),T$G=function(){function T$$(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++T$$._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new T$ob}T$N(T$$,"laya.d3.core.render.RenderElement");var T$b=T$$.prototype;return T$b.getDynamicBatchBakedVertexs=function(T$$){for(var T$b=this._renderObj._getVertexBuffer(T$$),T$u=T$b.getData().slice(),T$Z=T$b.vertexDeclaration,T$E=T$Z.getVertexElementByUsage(0).offset/4,T$r=T$Z.getVertexElementByUsage(3).offset/4,T$F=this._sprite3D.transform,T$x=T$F.worldMatrix,T$g=T$F.rotation,T$H=T$Z.vertexStride/4,T$w=0,T$I=T$u.length;T$w<T$I;T$w+=T$H){var T$o=T$w+T$E,T$N=T$w+T$r;T$Lb.transformVector3ArrayToVector3ArrayCoordinate(T$u,T$o,T$x,T$u,T$o),T$Lb.transformVector3ArrayByQuat(T$u,T$N,T$g,T$u,T$N)}return T$u},T$b.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},T$b._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},T$D(0,T$b,"id",function(){return this._id}),T$D(0,T$b,"renderObj",function(){return this._renderObj},function(T$$){this._renderObj!==T$$&&(this._renderObj=T$$)}),T$$._uniqueIDCounter=0,T$$}(),T$A=function(){function T$b(T$$){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++T$b._uniqueIDCounter,this._needSort=!1,this._scene=T$$,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}T$N(T$b,"laya.d3.core.render.RenderQueue");var T$$=T$b.prototype;return T$$._sortOpaqueFunc=function(T$$,T$b){if(T$$._render&&T$b._render){var T$u=T$$._material.renderQueue-T$b._material.renderQueue;return 0==T$u?T$$._render._distanceForSort-T$b._render._distanceForSort:T$u}return 0},T$$._sortAlphaFunc=function(T$$,T$b){if(T$$._render&&T$b._render){var T$u=T$$._material.renderQueue-T$b._material.renderQueue;return 0==T$u?T$b._render._distanceForSort-T$$._render._distanceForSort:T$u}return 0},T$$._begainRenderElement=function(T$$,T$b,T$u){return!!T$b._beforeRender(T$$)},T$$._sortAlpha=function(T$$){T$b._cameraPosition=T$$,this._finalElements.sort(this._sortAlphaFunc)},T$$._sortOpaque=function(T$$){T$b._cameraPosition=T$$,this._finalElements.sort(this._sortOpaqueFunc)},T$$._preRender=function(T$$){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},T$$._render=function(T$$,T$b){for(var T$u,T$Z,T$E,T$r,T$F,T$x,T$g=T$q.loopCount,T$H=this._scene,T$w=T$$.camera,T$I=(T$w.id,!1),T$o=0,T$N=this._finalElements.length;T$o<T$N;T$o++){var T$D,T$e,T$L,T$T=this._finalElements[T$o];if(null!=T$T._onPreRenderFunction&&T$T._onPreRenderFunction.call(T$T._sprite3D,T$$),0===T$T._type){if(T$$.owner=T$L=T$T._sprite3D,T$$.renderElement=T$T,T$L._preRenderUpdateComponents(T$$),T$D=T$T.renderObj,T$e=T$T._material,this._begainRenderElement(T$$,T$D,T$e)){if(T$u=T$D._getVertexBuffers(),!(T$E=(T$Z=T$D._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[T$Z.id]){this._errorRecord[T$Z.id]=1;var T$_="vertexBuffer:"+("("+T$Z._destroyed+","+T$Z._released+","+T$Z._referenceCount+","+T$Z._buffer+")")+", material:"+(T$e?T$e.__className+"("+T$e._destroyed+","+T$e._released+")":"null")+", owner:"+(T$L?T$L.__className+"("+T$L._destroyed+","+T$L._activeInHierarchy+","+T$L._displayedInStage+")":"null")+", renderObj:"+(T$D?T$D.__className+"("+T$D._destroyed+","+T$D._released+","+T$D._referenceCount+")":"")+", parent:, url:"+(T$L?T$L.url:"")+", disposeStack:"+T$Z.disposeStack;T$P.recordError("报错：unknown vertexDeclaration  "+T$_)}continue}if(T$I=(T$r=T$$._shader=T$e._getShader(T$H._shaderDefineValue,T$E.shaderDefineValue,T$L._shaderDefineValue)).bind()||T$g!==T$r._uploadLoopCount,T$u){if(T$r._uploadVertexBuffer!==T$u||T$I){for(var T$y=0;T$y<T$u.length;T$y++){var T$S=T$u[T$y];T$r.uploadAttributesX(T$S.vertexDeclaration.shaderValues.data,T$S)}T$r._uploadVertexBuffer=T$u}}else(T$r._uploadVertexBuffer!==T$Z||T$I)&&(T$r.uploadAttributes(T$E.shaderValues.data,null),T$r._uploadVertexBuffer=T$Z);(T$r._uploadScene!==T$H||T$I)&&(T$r.uploadSceneUniforms(T$H._shaderValues.data),T$r._uploadScene=T$H),(T$w!==T$r._uploadCamera||T$r._uploadSprite3D!==T$L||T$I)&&(T$r.uploadSpriteUniforms(T$L._shaderValues.data),T$r._uploadSprite3D=T$L),(T$w!==T$r._uploadCamera||T$I)&&(T$r.uploadCameraUniforms(T$w._shaderValues.data),T$r._uploadCamera=T$w),(T$r._uploadMaterial!==T$e||T$I)&&(T$e._upload(),T$r._uploadMaterial=T$e),T$F!==T$e?(T$e._setRenderStateBlendDepth(),T$e._setRenderStateFrontFace(T$b,T$L.transform),T$F=T$e,T$x=T$L):T$x!==T$L&&(T$e._setRenderStateFrontFace(T$b,T$L.transform),T$x=T$L),T$D._render(T$$),T$r._uploadLoopCount=T$g}T$L._postRenderUpdateComponents(T$$)}else if(2===T$T._type){T$T.renderObj;T$$.owner=T$L=T$T._sprite3D,T$$.renderElement=T$T,T$$._batchIndexStart=T$T._tempBatchIndexStart,T$$._batchIndexEnd=T$T._tempBatchIndexEnd,T$D=T$T.renderObj,T$e=T$T._material,this._begainRenderElement(T$$,T$D,T$e)&&(T$E=(T$Z=T$D._getVertexBuffer(0)).vertexDeclaration,T$I=(T$r=T$$._shader=T$e._getShader(T$H._shaderDefineValue,T$E.shaderDefineValue,T$L._shaderDefineValue)).bind()||T$g!==T$r._uploadLoopCount,(T$r._uploadVertexBuffer!==T$Z||T$I)&&(T$r.uploadAttributes(T$E.shaderValues.data,null),T$r._uploadVertexBuffer=T$Z),(T$r._uploadScene!==T$H||T$I)&&(T$r.uploadSceneUniforms(T$H._shaderValues.data),T$r._uploadScene=T$H),(T$w!==T$r._uploadCamera||T$r._uploadSprite3D!==T$L||T$I)&&(T$r.uploadSpriteUniforms(T$L._shaderValues.data),T$r._uploadSprite3D=T$L),(T$w!==T$r._uploadCamera||T$I)&&(T$r.uploadCameraUniforms(T$w._shaderValues.data),T$r._uploadCamera=T$w),(T$r._uploadMaterial!==T$e||T$I)&&(T$e._upload(),T$r._uploadMaterial=T$e),T$F!==T$e?(T$e._setRenderStateBlendDepth(),T$e._setRenderStateFrontFace(T$b,T$L.transform),T$F=T$e,T$x=T$L):T$x!==T$L&&(T$e._setRenderStateFrontFace(T$b,T$L.transform),T$x=T$L),T$D._render(T$$),T$r._uploadLoopCount=T$g)}}},T$$._renderShadow=function(T$$,T$b){for(var T$u,T$Z,T$E,T$r,T$F,T$x=T$q.loopCount,T$g=this._scene,T$H=T$$.camera,T$w=!1,T$I=0,T$o=this._finalElements.length;T$I<T$o;T$I++){var T$N,T$D,T$e,T$L=this._finalElements[T$I];0===T$L._type&&(T$$.owner=T$e=T$L._sprite3D,T$b||T$e._projectionViewWorldUpdateCamera===T$H&&T$e._projectionViewWorldUpdateLoopCount===T$q.loopCount||(T$e._render._renderUpdate(T$$._projectionViewMatrix),T$e._projectionViewWorldUpdateLoopCount=T$q.loopCount,T$e._projectionViewWorldUpdateCamera=T$H),T$$.renderElement=T$L,T$e._preRenderUpdateComponents(T$$),T$N=T$L.renderObj,T$D=T$L._material,this._begainRenderElement(T$$,T$N,null)&&(T$Z=(T$u=T$N._getVertexBuffer(0)).vertexDeclaration,T$w=(T$E=T$$._shader=T$D._getShader(T$g._shaderDefineValue,T$Z.shaderDefineValue,T$e._shaderDefineValue)).bind()||T$x!==T$E._uploadLoopCount,(T$E._uploadVertexBuffer!==T$u||T$w)&&(T$E.uploadAttributes(T$Z.shaderValues.data,null),T$E._uploadVertexBuffer=T$u),(T$H!==T$E._uploadCamera||T$E._uploadSprite3D!==T$e||T$w)&&(T$E.uploadSpriteUniforms(T$e._shaderValues.data),T$E._uploadSprite3D=T$e),(T$H!==T$E._uploadCamera||T$w)&&(T$E.uploadCameraUniforms(T$H._shaderValues.data),T$E._uploadCamera=T$H),(T$E._uploadMaterial!==T$D||T$w)&&(T$D._upload(),T$E._uploadMaterial=T$D),T$E._uploadRenderElement,T$r!==T$D?(T$D._setRenderStateFrontFace(!1,T$e.transform),T$r=T$D,T$F=T$e):T$F!==T$e&&(T$D._setRenderStateFrontFace(!1,T$e.transform),T$F=T$e),T$N._render(T$$),T$E._uploadLoopCount=T$x),T$e._postRenderUpdateComponents(T$$))}},T$$._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},T$$._addRenderElement=function(T$$){this._renderElements.push(T$$),this._needSort=!0},T$$._addDynamicBatchElement=function(T$$){this._dynamicBatchCombineRenderElements.push(T$$)},T$D(0,T$$,"id",function(){return this._id}),T$b._uniqueIDCounter=0,T$b._cameraPosition=null,T$b}(),T$j=function(){function T$$(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return T$N(T$$,"laya.d3.core.render.RenderState"),T$$.clientWidth=0,T$$.clientHeight=0,T$$}(),T$h=function(){function T$F(T$$,T$b){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new T$U$(new T$Fb,0),this._corners=[new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb],this._boundingBoxCenter=new T$Fb,this._children=T$Z(8),this._objects=[],this._tempBoundBoxCorners=[new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb],this._scene=T$$,this._currentDepth=T$b}T$N(T$F,"laya.d3.core.scene.OctreeNode");var T$$=T$F.prototype;return T$P.imps(T$$,{"laya.d3.core.scene.ITreeNode":!0}),T$$.init=function(T$$,T$b){var T$u=new T$Fb,T$Z=new T$Fb;T$Fb.scale(T$b,-.5,T$u),T$Fb.scale(T$b,.5,T$Z),T$Fb.add(T$u,T$$,T$u),T$Fb.add(T$Z,T$$,T$Z),this.exactBox=new T$h$(T$u,T$Z),this.relaxBox=new T$h$(T$u,T$Z)},T$$.addTreeNode=function(T$$){1===Collision.boxContainsBox(this._relaxBox,T$$.boundingBox)?this.addNodeDown(T$$,0):this.addObject(T$$)},T$$.addChild=function(T$$){var T$b=this._children[T$$];if(null==T$b){T$b=new T$F(this._scene,this._currentDepth+1),(this._children[T$$]=T$b)._parent=this,T$Fb.subtract(this._exactBox.max,this._exactBox.min,T$F.tempSize),T$Fb.multiply(T$F.tempSize,T$F._octreeSplit[T$$],T$F.tempCenter),T$Fb.add(this._exactBox.min,T$F.tempCenter,T$F.tempCenter),T$Fb.scale(T$F.tempSize,.25,T$F.tempSize);var T$u=new T$Fb,T$Z=new T$Fb;T$Fb.subtract(T$F.tempCenter,T$F.tempSize,T$u),T$Fb.add(T$F.tempCenter,T$F.tempSize,T$Z),T$b.exactBox=new T$h$(T$u,T$Z),T$Fb.scale(T$F.tempSize,T$F.relax,T$F.tempSize);var T$E=new T$Fb,T$r=new T$Fb;T$Fb.subtract(T$F.tempCenter,T$F.tempSize,T$E),T$Fb.add(T$F.tempCenter,T$F.tempSize,T$r),T$b.relaxBox=new T$h$(T$E,T$r)}return T$b},T$$.addObject=function(T$$){(T$$._treeNode=this)._objects.push(T$$)},T$$.removeObject=function(T$$){if(T$$._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var T$b=this._objects.indexOf(T$$);return-1!==T$b&&(this._objects.splice(T$b,1),!0)},T$$.clearObject=function(){this._objects.length=0},T$$.addNodeUp=function(T$$,T$b){this._parent&&1!==Collision.boxContainsBox(this._exactBox,T$$.boundingBox)?this._parent.addNodeUp(T$$,T$b-1):this.addNodeDown(T$$,T$b)},T$$.addNodeDown=function(T$$,T$b){if(T$b<this._scene.treeLevel){var T$u=this.inChildIndex(T$$.boundingBoxCenter),T$Z=this.addChild(T$u);1===Collision.boxContainsBox(T$Z._relaxBox,T$$.boundingBox)?T$Z.addNodeDown(T$$,++T$b):this.addObject(T$$)}else this.addObject(T$$)},T$$.inChildIndex=function(T$$){return 4*(T$$.z<this._boundingBoxCenter.z?0:1)+2*(T$$.y<this._boundingBoxCenter.y?0:1)+(T$$.x<this._boundingBoxCenter.x?0:1)},T$$.updateObject=function(T$$){1===Collision.boxContainsBox(this._relaxBox,T$$.boundingBox)?(this.removeObject(T$$),T$$._treeNode=null,this.addNodeDown(T$$,this._currentDepth)):this._parent&&(this.removeObject(T$$),T$$._treeNode=null,this._parent.addNodeUp(T$$,this._currentDepth-1))},T$$.cullingObjects=function(T$$,T$b,T$u,T$Z,T$E){var T$r,T$F=0,T$x=0,T$g=0,T$H=this._scene._dynamicBatchManager;for(T$F=0,T$r=this._objects.length;T$F<T$r;T$F++){var T$w=this._objects[T$F];if(T$p.isVisible(T$w._owner.layer.mask)&&T$w.enable){if(T$b&&(T$q.treeSpriteCollision+=1,0===T$$.containsBoundSphere(T$w.boundingSphere)))continue;T$w._renderUpdate(T$E),T$w._distanceForSort=T$Fb.distance(T$w.boundingSphere.center,T$Z)+T$w.sortingFudge;var T$I=T$w._renderElements;for(T$x=0,T$g=T$I.length;T$x<T$g;T$x++){var T$o=T$I[T$x],T$N=T$o._staticBatch;if(T$N&&T$N._material===T$o._material)T$N._addBatchRenderElement(T$o);else{var T$D=T$o.renderObj;T$D.triangleCount<10&&1===T$D._vertexBufferCount&&T$D._getIndexBuffer()&&T$o._material.renderQueue<2&&T$o._canDynamicBatch&&!T$w._owner.isStatic?T$H._addPrepareRenderElement(T$o):this._scene.getRenderQueue(T$o._material.renderQueue)._addRenderElement(T$o)}}}}for(T$F=0;T$F<8;T$F++){var T$e=this._children[T$F];if(null!=T$e){var T$L=T$b;if(T$b){var T$T=T$$.containsBoundBox(T$e._relaxBox);if(T$q.treeNodeCollision+=1,0===T$T)continue;T$L=2===T$T}T$e.cullingObjects(T$$,T$L,T$u,T$Z,T$E)}}},T$$.cullingShadowObjects=function(T$$,T$b,T$u,T$Z,T$E){var T$r,T$F=0,T$x=0,T$g=0;this._scene._dynamicBatchManager;for(T$F=0,T$r=this._objects.length;T$F<T$r;T$F++){var T$H=this._objects[T$F];if(T$H.castShadow&&T$p.isVisible(T$H._owner.layer.mask)&&T$H.enable){if(T$u&&0===T$$[0].containsBoundSphere(T$H.boundingSphere))continue;for(var T$w=1,T$I=T$$.length;T$w<T$I;T$w++){var T$o=T$b[T$w-1];if(0!==T$$[T$w].containsBoundSphere(T$H.boundingSphere)){var T$N=T$H._renderElements;for(T$x=0,T$g=T$N.length;T$x<T$g;T$x++)T$o._addRenderElement(T$N[T$x])}}}}for(T$F=0;T$F<8;T$F++){var T$D=this._children[T$F];if(null!=T$D){var T$e=T$u;if(T$u){var T$L=T$$[0].containsBoundBox(T$D._relaxBox);if(0===T$L)continue;T$e=2===T$L}T$D.cullingShadowObjects(T$$,T$b,T$e,T$Z,T$E)}}},T$$.cullingShadowObjectsOnePSSM=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F,T$x=T$b[0],T$g=0,T$H=0,T$w=0;for(T$g=0,T$F=this._objects.length;T$g<T$F;T$g++){var T$I=this._objects[T$g];if(T$I.castShadow&&T$p.isVisible(T$I._owner.layer.mask)&&T$I.enable){if(T$Z&&0===T$$.containsBoundSphere(T$I.boundingSphere))continue;T$I._renderUpdate(T$u);var T$o=T$I._renderElements;for(T$H=0,T$w=T$o.length;T$H<T$w;T$H++)T$x._addRenderElement(T$o[T$H])}}for(T$g=0;T$g<8;T$g++){var T$N=this._children[T$g];if(null!=T$N){var T$D=T$Z;if(T$Z){var T$e=T$$.containsBoundBox(T$N._relaxBox);if(0===T$e)continue;T$D=2===T$e}T$N.cullingShadowObjectsOnePSSM(T$$,T$b,T$u,T$D,T$E,T$r)}}},T$$.renderBoudingBox=function(T$$){this._renderBoudingBox(T$$);for(var T$b=0;T$b<8;++T$b){var T$u=this._children[T$b];T$u&&T$u.renderBoudingBox(T$$)}},T$$.buildAllChild=function(T$$){if(T$$<this._scene.treeLevel)for(var T$b=0;T$b<8;T$b++){this.addChild(T$b).buildAllChild(T$$+1)}},T$$._renderBoudingBox=function(T$$){},T$D(0,T$$,"exactBox",function(){return this._exactBox},function(T$$){this._exactBox=T$$,T$Fb.add(T$$.min,T$$.max,this._boundingBoxCenter),T$Fb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),T$D(0,T$$,"relaxBox",function(){return this._relaxBox},function(T$$){(this._relaxBox=T$$).getCorners(this._corners),T$U$.createfromPoints(this._corners,this._boundingSphere)}),T$F.debugMode=!1,T$F.relax=1.15,T$F.CHILDNUM=8,T$I(T$F,["tempVector0",function(){return this.tempVector0=new T$Fb},"tempSize",function(){return this.tempSize=new T$Fb},"tempCenter",function(){return this.tempCenter=new T$Fb},"_octreeSplit",function(){return this._octreeSplit=[new T$Fb(.25,.25,.25),new T$Fb(.75,.25,.25),new T$Fb(.25,.75,.25),new T$Fb(.75,.75,.25),new T$Fb(.25,.25,.75),new T$Fb(.75,.25,.75),new T$Fb(.25,.75,.75),new T$Fb(.75,.75,.75)]}]),T$F}(),T$d=(function(){function T$$(){}T$N(T$$,"laya.d3.core.scene.SceneManager")}(),function(){function T$$(T$$,T$b,T$u,T$Z){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===T$$&&(T$$=1),void 0===T$b&&(T$b=1),void 0===T$u&&(T$u=1),void 0===T$Z&&(T$Z=1),this._r=T$$,this._g=T$b,this._b=T$u,this._a=T$Z}return T$N(T$$,"laya.d3.core.trail.module.Color",null,"Color$1"),T$$.prototype.cloneTo=function(T$$){T$$._r=this._r,T$$._g=this._g,T$$._b=this._b,T$$._a=this._a},T$I(T$$,["RED",function(){return this.RED=new T$$(1,0,0,1)},"GREEN",function(){return this.GREEN=new T$$(0,1,0,1)},"BLUE",function(){return this.BLUE=new T$$(0,0,1,1)},"CYAN",function(){return this.CYAN=new T$$(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new T$$(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new T$$(1,0,1,1)},"GRAY",function(){return this.GRAY=new T$$(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new T$$(1,1,1,1)},"BLACK",function(){return this.BLACK=new T$$(0,0,0,1)}]),T$$}()),T$U=(function(){function T$$(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}T$N(T$$,"laya.d3.core.trail.module.Gradient");var T$b=T$$.prototype;T$b.setKeys=function(T$$,T$b){var T$u,T$Z;this._colorKeys=T$$;for(var T$E=this.index=0;T$E<T$$.length;T$E++){var T$r=(T$u=T$$[T$E]).color;this._colorKeyData[this.index++]=T$r._r,this._colorKeyData[this.index++]=T$r._g,this._colorKeyData[this.index++]=T$r._b,this._colorKeyData[this.index++]=T$u.time}this._alphaKeys=T$b;for(var T$F=this.index=0;T$F<T$b.length;T$F++)T$Z=T$b[T$F],this._alphaKeyData[this.index++]=T$Z.alpha,this._alphaKeyData[this.index++]=T$Z.time},T$b.cloneTo=function(T$$){var T$b=0,T$u=0,T$Z=this.colorKeys,T$E=[];for(T$b=0,T$u=T$Z.length;T$b<T$u;T$b++){var T$r=new T$B;T$Z[T$b].cloneTo(T$r),T$E.push(T$r)}var T$F=this.alphaKeys,T$x=[];for(T$b=0,T$u=T$F.length;T$b<T$u;T$b++){var T$g=new T$U;T$F[T$b].cloneTo(T$g),T$x.push(T$g)}T$$.setKeys(T$E,T$x)},T$D(0,T$b,"mode",function(){return this._mode},function(T$$){this._mode=T$$}),T$D(0,T$b,"colorKeys",function(){return this._colorKeys},function(T$$){this._colorKeys=T$$;for(var T$b=this.index=0;T$b<T$$.length;T$b++){var T$u=T$$[T$b],T$Z=T$u.color;this._colorKeyData[this.index++]=T$Z._r,this._colorKeyData[this.index++]=T$Z._g,this._colorKeyData[this.index++]=T$Z._b,this._colorKeyData[this.index++]=T$u.time}}),T$D(0,T$b,"alphaKeys",function(){return this._alphaKeys},function(T$$){this._alphaKeys=T$$;for(var T$b=this.index=0;T$b<T$$.length;T$b++){var T$u=T$$[T$b];this._alphaKeyData[this.index++]=T$u.alpha,this._alphaKeyData[this.index++]=T$u.time}})}(),function(){function T$$(T$$,T$b){this._alpha=NaN,this._time=NaN,void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),this._alpha=T$$,this._time=T$b}T$N(T$$,"laya.d3.core.trail.module.GradientAlphaKey");var T$b=T$$.prototype;return T$b.cloneTo=function(T$$){T$$.alpha=this.alpha,T$$.time=this.time},T$D(0,T$b,"alpha",function(){return this._alpha},function(T$$){this._alpha=T$$}),T$D(0,T$b,"time",function(){return this._time},function(T$$){this._time=T$$}),T$$}()),T$B=function(){function T$$(T$$,T$b){this._color=null,this._time=NaN,void 0===T$b&&(T$b=0),this._color=T$$||new T$d,this._time=T$b}T$N(T$$,"laya.d3.core.trail.module.GradientColorKey");var T$b=T$$.prototype;return T$b.cloneTo=function(T$$){this.color.cloneTo(T$$.color),T$$.time=this.time},T$D(0,T$b,"color",function(){return this._color},function(T$$){this._color=T$$}),T$D(0,T$b,"time",function(){return this._time},function(T$$){this._time=T$$}),T$$}(),T$R=(function(){function T$$(){}T$N(T$$,"laya.d3.core.trail.module.GradientMode"),T$$.Blend=0,T$$.Fixed=1}(),function(){function T$$(){}T$N(T$$,"laya.d3.core.trail.module.TextureMode"),T$$.Stretch=0,T$$.Tile=1}(),function(){function T$$(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}T$N(T$$,"laya.d3.core.trail.module.TrailKeyFrame"),T$$.prototype.cloneTo=function(T$$){T$$.time=this.time,T$$.inTangent=this.inTangent,T$$.outTangent=this.outTangent,T$$.value=this.value}}(),function(){function T$b(T$$){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new T$Fb,this._curPosition=new T$Fb,this._delVector3=new T$Fb,this._lastFixedVertexPosition=new T$Fb,this._pointAtoBVector3=new T$Fb,this._pointA=new T$Fb,this._pointB=new T$Fb,this._owner=T$$,this._id=T$b.renderElementCount++,0==this._id?T$$._owner.transform.position.cloneTo(this._lastPosition):T$$._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new T$sb(T$R.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new T$sb(T$R.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}T$N(T$b,"laya.d3.core.trail.TrailRenderElement");var T$$=T$b.prototype;T$P.imps(T$$,{"laya.d3.core.render.IRenderable":!0}),T$$._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},T$$._addTrailByFirstPosition=function(T$$,T$b){T$Fb.subtract(T$b,T$$,this._delVector3),T$Fb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),T$Fb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),T$Fb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(T$$),T$$.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},T$$._addTrailByNextPosition=function(T$$){T$Fb.subtract(T$$,this._lastFixedVertexPosition,this._delVector3),T$Fb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),T$Fb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),T$Fb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=T$Fb.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=T$B$.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(T$$),T$$.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(T$$),this._virtualVerticesCount=2)},T$$._updateVerticesByPosition=function(T$$){this._pointe=T$$.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},T$$._updateVertexBuffer2=function(){var T$$,T$b=0,T$u=0,T$Z=0;for(T$Z=0,T$$=(this._verticesCount+this._virtualVerticesCount)/2;T$Z<T$$;T$Z++)T$u=0==this._owner.textureMode?(this._VerticesToTailLength[T$Z]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[T$Z],this._vertices2[T$b++]=1-T$u,this._vertices2[T$b++]=1-T$u;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},T$$._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},T$$._updateDisappear=function(){var T$$,T$b=0;for(T$b=this._curDisappearIndex,T$$=(this._verticesCount+this._virtualVerticesCount)/2;T$b<T$$;T$b++)this._owner._curtime-this._everyGroupVertexBirthTime[T$b]>=this._owner.time+T$B$.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},T$$._beforeRender=function(T$$){return this._camera=T$$.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),T$Fb.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},T$$._render=function(T$$){this._isDead||(T$O.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),T$q.drawCall++,T$q.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},T$$._getVertexBuffer=function(T$$){return void 0===T$$&&(T$$=0),0===T$$?this._vertexBuffer1:1===T$$?this._vertexBuffer2:null},T$$._getVertexBuffers=function(){return this._vertexBuffers},T$$._getIndexBuffer=function(){return null},T$$.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},T$$._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},T$D(0,T$$,"_vertexBufferCount",function(){return this._vertexBuffers.length}),T$D(0,T$$,"triangleCount",function(){return 0}),T$b.renderElementCount=0}(),function(){function T$$(){}T$N(T$$,"laya.d3.core.trail.VertexTrail");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration1}),T$D(1,T$$,"vertexDeclaration1",function(){return T$$._vertexDeclaration1}),T$D(1,T$$,"vertexDeclaration2",function(){return T$$._vertexDeclaration2}),T$I(T$$,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new T$r$(32,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",41),new T$F$(24,"single",33),new T$F$(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new T$r$(4,[new T$F$(0,"single",38)])}]),T$$}()),T$$$=function(){function T$S(T$$){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=T$$}T$N(T$S,"laya.d3.graphics.DynamicBatch");var T$$=T$S.prototype;return T$P.imps(T$$,{"laya.d3.core.render.IRenderable":!0}),T$$._getVertexBuffer=function(T$$){return void 0===T$$&&(T$$=0),0===T$$?this._vertexBuffer:null},T$$._getIndexBuffer=function(){return this._indexBuffer},T$$._getCombineRenderElementFromPool=function(T$$,T$b,T$u){var T$Z=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return T$Z||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=T$Z=new T$G,T$Z._sprite3D=new T$Ab),T$Z._sprite3D._render._renderUpdate(T$u),T$Z},T$$._getRenderElement=function(T$$,T$b,T$u){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*T$S.maxVertexCount),this._indexDatas=new Uint16Array(T$S.maxIndexCount),this._vertexBuffer=T$sb.create(this._vertexDeclaration,T$S.maxVertexCount,35048),this._indexBuffer=T$Xb.create("ushort",T$S.maxIndexCount,35048));for(var T$Z=this._merageElements.length=0,T$E=0,T$r=0,T$F=this._combineRenderElements.length;T$r<T$F;T$r++){var T$x=this._combineRenderElements[T$r],T$g=T$x.getDynamicBatchBakedVertexs(0),T$H=T$x.getBakedIndices(),T$w=T$x._sprite3D.transform._isFrontFaceInvert,T$I=T$Z/(this._vertexDeclaration.vertexStride/4),T$o=T$E,T$N=T$o+T$H.length;T$x._tempBatchIndexStart=T$o,T$x._tempBatchIndexEnd=T$N,this._indexDatas.set(T$H,T$E);var T$D=0;if(T$w)for(T$D=T$o;T$D<T$N;T$D+=3){this._indexDatas[T$D]=T$I+this._indexDatas[T$D];var T$e=this._indexDatas[T$D+1],T$L=this._indexDatas[T$D+2];this._indexDatas[T$D+1]=T$I+T$L,this._indexDatas[T$D+2]=T$I+T$e}else for(T$D=T$o;T$D<T$N;T$D+=3)this._indexDatas[T$D]=T$I+this._indexDatas[T$D],this._indexDatas[T$D+1]=T$I+this._indexDatas[T$D+1],this._indexDatas[T$D+2]=T$I+this._indexDatas[T$D+2];T$E+=T$H.length,this._vertexDatas.set(T$g,T$Z),T$Z+=T$g.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),T$r=this._combineRenderElementPoolIndex=0,T$F=this._materials.length;T$r<T$F;T$r++){var T$T=this._getCombineRenderElementFromPool(T$$,T$b,T$u);T$T._type=2,T$T._staticBatch=null;var T$_=(T$T.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[T$r]]._tempBatchIndexStart,T$y=T$r+1===this._materialToRenderElementsOffsets.length?T$E:this._combineRenderElements[this._materialToRenderElementsOffsets[T$r+1]]._tempBatchIndexStart;T$T._tempBatchIndexStart=T$_,T$T._tempBatchIndexEnd=T$y,T$T._material=this._materials[T$r],this._merageElements.push(T$T)}},T$$._addCombineRenderObjTest=function(T$$){var T$b=T$$.renderObj,T$u=this._currentCombineIndexCount+T$b._getIndexBuffer().indexCount,T$Z=this._currentCombineVertexCount+T$b._getVertexBuffer().vertexCount;return!(T$S.maxVertexCount<T$Z||T$S.maxIndexCount<T$u)},T$$._addCombineRenderObj=function(T$$){var T$b=T$$.renderObj;this._combineRenderElements.push(T$$),this._currentCombineIndexCount=this._currentCombineIndexCount+T$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+T$b._getVertexBuffer().vertexCount},T$$._addCombineMaterial=function(T$$){this._materials.push(T$$)},T$$._addMaterialToRenderElementOffset=function(T$$){this._materialToRenderElementsOffsets.push(T$$)},T$$._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},T$$._addToRenderQueue=function(T$$,T$b,T$u,T$Z){this._getRenderElement(T$b,T$u,T$Z);for(var T$E=0,T$r=this._materials.length;T$E<T$r;T$E++)T$$.getRenderQueue(this._materials[T$E].renderQueue)._addDynamicBatchElement(this._merageElements[T$E])},T$$._beforeRender=function(T$$){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},T$$._render=function(T$$){var T$b=T$$._batchIndexEnd-T$$._batchIndexStart;T$O.mainContext.drawElements(4,T$b,5123,2*T$$._batchIndexStart),T$q.drawCall++,T$q.trianglesFaces+=T$b/3},T$$._getVertexBuffers=function(){return null},T$D(0,T$$,"_vertexBufferCount",function(){return 1}),T$D(0,T$$,"triangleCount",function(){return this._indexBuffer.indexCount/3}),T$D(0,T$$,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),T$S.maxVertexCount=2e4,T$S.maxIndexCount=4e4,T$S.maxCombineTriangleCount=10,T$S}(),T$b$=function(){function T$S(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}T$N(T$S,"laya.d3.graphics.DynamicBatchManager");var T$$=T$S.prototype;return T$$.getDynamicBatch=function(T$$,T$b){var T$u,T$Z=T$$.id.toString()+T$b;return this._dynamicBatches[T$Z]?T$u=this._dynamicBatches[T$Z]:this._dynamicBatches[T$Z]=T$u=new T$$$(T$$),T$u},T$$._garbageCollection=function(){for(var T$$ in this._dynamicBatches)0===this._dynamicBatches[T$$].combineRenderElementsCount&&delete this._dynamicBatches[T$$]},T$$._addPrepareRenderElement=function(T$$){this._prepareDynamicBatchCombineElements.push(T$$)},T$$._finishCombineDynamicBatch=function(T$$){var T$b,T$u,T$Z;this._prepareDynamicBatchCombineElements.sort(T$S._sortPrepareDynamicBatch);for(var T$E,T$r,T$F,T$x,T$g,T$H=-1,T$w=!0,T$I=0,T$o=-1,T$N=0,T$D=this._prepareDynamicBatchCombineElements.length;T$N<T$D;T$N++){var T$e=(T$r=this._prepareDynamicBatchCombineElements[T$N]).renderObj._getVertexBuffer(0).vertexDeclaration,T$L=T$u!==T$e;T$L&&(T$I=0,T$u=T$e);var T$T=T$I!==T$H;if(T$T&&(T$H=T$I),(T$L||T$T)&&(T$F=this.getDynamicBatch(T$e,T$I),T$b=null),T$w)if(T$F._addCombineRenderObjTest(T$r)){if(T$b!==(T$E=T$r._material))T$x&&(T$$.getRenderQueue(T$g._material.renderQueue)._addRenderElement(T$g),T$g=T$x=null,T$o=-1),T$x=T$E,T$o=T$F.combineRenderElementsCount,T$g=T$r,T$b=T$E;else if(T$x){var T$_=T$g.renderObj,T$y=T$r.renderObj;T$_._getVertexBuffer().vertexCount+T$y._getVertexBuffer().vertexCount>T$$$.maxVertexCount||T$_._getIndexBuffer().indexCount+T$y._getIndexBuffer().indexCount>T$$$.maxIndexCount?(T$$.getRenderQueue(T$g._material.renderQueue)._addRenderElement(T$g),T$x=T$E,T$o=T$F.combineRenderElementsCount,T$g=T$r):(T$F._addCombineMaterial(T$x),T$F._addMaterialToRenderElementOffset(T$o),T$F._addCombineRenderObj(T$g),T$g=T$x=null,T$o=-1,T$F._addCombineRenderObj(T$r))}else T$F._addCombineRenderObj(T$r);T$w=!0}else T$x&&(T$$.getRenderQueue(T$g._material.renderQueue)._addRenderElement(T$g),T$g=T$x=null,T$o=-1),T$I++,T$w=!1;else T$Z=this._prepareDynamicBatchCombineElements[T$N-1],T$F._addMaterialToRenderElementOffset(T$F.combineRenderElementsCount),T$b=T$Z._material,T$F._addCombineMaterial(T$b),T$F._addCombineRenderObj(T$Z),T$w=!0,T$b!==(T$E=T$r._material)?(T$x=T$E,T$o=T$F.combineRenderElementsCount,T$g=T$r):T$F._addCombineRenderObj(T$r),T$b=T$E}T$x&&(T$$.getRenderQueue(T$g._material.renderQueue)._addRenderElement(T$g),T$g=T$x=null,T$o=-1),this._prepareDynamicBatchCombineElements.length=0},T$$._clearRenderElements=function(){for(var T$$ in this._dynamicBatches)this._dynamicBatches[T$$]._clearRenderElements()},T$$._addToRenderQueue=function(T$$,T$b,T$u,T$Z){for(var T$E in this._dynamicBatches){var T$r=this._dynamicBatches[T$E];0<T$r.combineRenderElementsCount&&T$r._addToRenderQueue(T$$,T$b,T$u,T$Z)}},T$$.dispose=function(){this._dynamicBatches=null},T$S._sortPrepareDynamicBatch=function(T$$,T$b){return T$$._mainSortID-T$b._mainSortID},T$S}(),T$u$=function(){function T$$(){}return T$N(T$$,"laya.d3.graphics.FrustumCulling"),T$$.renderShadowObjectCulling=function(T$$,T$b,T$u,T$Z,T$E){var T$r=0,T$F=0,T$x=0,T$g=0;for(T$r=0,T$x=T$u.length;T$r<T$x;T$r++){var T$H=T$u[T$r];T$H&&T$H._clearRenderElements()}var T$w,T$I,T$o,T$N=T$$._cullingRenders;if(1<T$E){for(T$r=0,T$x=T$$._cullingRendersLength;T$r<T$x;T$r++)if((T$w=T$N[T$r]).castShadow&&T$p.isVisible(T$w._owner.layer.mask)&&T$w.enable)for(var T$D=1,T$e=T$b.length;T$D<T$e;T$D++)if(T$I=T$u[T$D-1],0!==T$b[T$D].containsBoundSphere(T$w.boundingSphere))for(T$F=0,T$g=(T$o=T$w._renderElements).length;T$F<T$g;T$F++)T$I._addRenderElement(T$o[T$F])}else for(T$r=0,T$x=T$$._cullingRendersLength;T$r<T$x;T$r++)if((T$w=T$N[T$r]).castShadow&&T$p.isVisible(T$w._owner.layer.mask)&&T$w.enable&&0!==T$b[0].containsBoundSphere(T$w.boundingSphere))for(T$w._renderUpdate(T$Z),T$I=T$u[0],T$F=0,T$g=(T$o=T$w._renderElements).length;T$F<T$g;T$F++)T$I._addRenderElement(T$o[T$F])},T$$.renderShadowObjectCullingOctree=function(T$$,T$b,T$u,T$Z,T$E){for(var T$r=0,T$F=T$u.length;T$r<T$F;T$r++){var T$x=T$u[T$r];T$x&&T$x._clearRenderElements()}1<T$E?T$$.treeRoot.cullingShadowObjects(T$b,T$u,!0,0,T$$):T$$.treeRoot.cullingShadowObjectsOnePSSM(T$b[0],T$u,T$Z,!0,0,T$$)},T$$.renderObjectCulling=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=0,T$x=0,T$g=0,T$H=0,T$w=T$b._quenes,T$I=T$b._dynamicBatchManager,T$o=T$b._cullingRenders;for(T$F=0,T$x=T$w.length;T$F<T$x;T$F++){var T$N=T$w[T$F];T$N&&T$N._clearRenderElements()}var T$D=T$Z$._staticBatchManagers;for(T$F=0,T$x=T$D.length;T$F<T$x;T$F++)T$D[T$F]._clearRenderElements();T$I._clearRenderElements();var T$e=T$u.transform.position;for(T$F=0,T$x=T$b._cullingRendersLength;T$F<T$x;T$F++){var T$L=T$o[T$F];if(T$p.isVisible(T$L._owner.layer.mask)&&T$L.enable&&0!==T$$.containsBoundSphere(T$L.boundingSphere)&&T$L._renderUpdate(T$r)){T$L._distanceForSort=T$Fb.distance(T$L.boundingSphere.center,T$e)+T$L.sortingFudge;var T$T=T$L._renderElements;for(T$g=0,T$H=T$T.length;T$g<T$H;T$g++){var T$_=T$T[T$g],T$y=T$_._staticBatch;if(T$y&&T$y._material===T$_._material)T$y._addBatchRenderElement(T$_);else{var T$S=T$_.renderObj;T$S.triangleCount<10&&1===T$S._vertexBufferCount&&T$S._getIndexBuffer()&&T$_._material.renderQueue<2&&T$_._canDynamicBatch&&!T$L._owner.isStatic?T$I._addPrepareRenderElement(T$_):T$b.getRenderQueue(T$_._material.renderQueue)._addRenderElement(T$_)}}}}for(T$F=0,T$x=T$D.length;T$F<T$x;T$F++)T$D[T$F]._addToRenderQueue(T$b,T$Z,T$E,T$r);T$I._finishCombineDynamicBatch(T$b),T$I._addToRenderQueue(T$b,T$Z,T$E,T$r)},T$$.renderObjectCullingOctree=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=0,T$x=0,T$g=T$b._quenes,T$H=T$b._dynamicBatchManager;for(T$F=0,T$x=T$g.length;T$F<T$x;T$F++){var T$w=T$g[T$F];T$w&&T$w._clearRenderElements()}var T$I=T$Z$._staticBatchManagers;for(T$F=0,T$x=T$I.length;T$F<T$x;T$F++)T$I[T$F]._clearRenderElements();for(T$H._clearRenderElements(),T$b._cullingRenders.length=0,T$b.treeRoot.cullingObjects(T$$,!0,0,T$u.transform.position,T$r),T$F=0,T$x=T$I.length;T$F<T$x;T$F++)T$I[T$F]._addToRenderQueue(T$b,T$Z,T$E,T$r);T$H._finishCombineDynamicBatch(T$b),T$H._addToRenderQueue(T$b,T$Z,T$E,T$r)},T$$.renderObjectCullingNoBoundFrustum=function(T$$,T$b,T$u,T$Z,T$E){var T$r=0,T$F=0,T$x=0,T$g=0,T$H=T$$._quenes,T$w=T$$._dynamicBatchManager,T$I=T$$._cullingRenders;for(T$r=0,T$F=T$H.length;T$r<T$F;T$r++){var T$o=T$H[T$r];T$o&&T$o._clearRenderElements()}var T$N=T$Z$._staticBatchManagers;for(T$r=0,T$F=T$N.length;T$r<T$F;T$r++)T$N[T$r]._clearRenderElements();T$w._clearRenderElements();var T$D=T$b.transform.position;for(T$r=0,T$F=T$$._cullingRendersLength;T$r<T$F;T$r++){var T$e=T$I[T$r];if(T$p.isVisible(T$e._owner.layer.mask)&&T$e.enable){T$e._renderUpdate(T$E),T$e._distanceForSort=T$Fb.distance(T$e.boundingSphere.center,T$D)+T$e.sortingFudge;var T$L=T$e._renderElements;for(T$x=0,T$g=T$L.length;T$x<T$g;T$x++){var T$T=T$L[T$x],T$_=T$T._staticBatch;if(T$_&&T$_._material===T$T._material)T$_._addBatchRenderElement(T$T);else{var T$y=T$T.renderObj;T$y.triangleCount<10&&1===T$y._vertexBufferCount&&T$y._getIndexBuffer()&&T$T._material.renderQueue<2&&T$T._canDynamicBatch&&!T$e._owner.isStatic?T$w._addPrepareRenderElement(T$T):T$$.getRenderQueue(T$T._material.renderQueue)._addRenderElement(T$T)}}}}for(T$r=0,T$F=T$N.length;T$r<T$F;T$r++)T$N[T$r]._addToRenderQueue(T$$,T$u,T$Z,T$E);T$w._finishCombineDynamicBatch(T$$),T$w._addToRenderQueue(T$$,T$u,T$Z,T$E)},T$$}(),T$Z$=function(){function T$r(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}T$N(T$r,"laya.d3.graphics.StaticBatchManager");var T$$=T$r.prototype;return T$$._finishInit=function(){for(var T$$ in this._staticBatches)this._staticBatches[T$$]._finishInit();this._initBatchRenderElements.length=0},T$$._initStaticBatchs=function(T$$){throw new Error("StaticBatchManager:must override this function.")},T$$._addInitBatchSprite=function(T$$){for(var T$b=T$$._render._renderElements,T$u=0,T$Z=T$b.length;T$u<T$Z;T$u++)this._initBatchRenderElements.push(T$b[T$u])},T$$._clearRenderElements=function(){for(var T$$ in this._staticBatches)this._staticBatches[T$$]._clearRenderElements()},T$$._garbageCollection=function(T$$){var T$b=T$$._staticBatch,T$u=T$b._initBatchRenderElements,T$Z=T$u.indexOf(T$$);T$u.splice(T$Z,1),0===T$u.length&&(T$b.dispose(),delete this._staticBatches[T$b._key])},T$$._addToRenderQueue=function(T$$,T$b,T$u,T$Z){for(var T$E in this._staticBatches){var T$r=this._staticBatches[T$E];0<T$r._batchRenderElements.length&&T$r._updateToRenderQueue(T$$,T$Z)}},T$$.dispose=function(){this._staticBatches=null},T$r._addToStaticBatchQueue=function(T$$){T$$ instanceof laya.d3.core.RenderableSprite3D&&T$$._addToInitStaticBatchManager();for(var T$b=0,T$u=T$$.numChildren;T$b<T$u;T$b++)T$r._addToStaticBatchQueue(T$$._childs[T$b])},T$r.combine=function(T$$,T$b){var T$u,T$Z=0,T$E=0;if(T$b)for(T$Z=0,T$E=T$b.length;T$Z<T$E;T$Z++){T$b[T$Z]._addToInitStaticBatchManager()}else T$$&&T$r._addToStaticBatchQueue(T$$);for(T$Z=0,T$E=T$r._staticBatchManagers.length;T$Z<T$E;T$Z++)(T$u=T$r._staticBatchManagers[T$Z])._initStaticBatchs(T$$),T$u._finishInit()},T$r._staticBatchManagers=[],T$r}(),T$E$=function(){function T$$(T$$,T$b,T$u){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=T$$,this._manager=T$b,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=T$u}T$N(T$$,"laya.d3.graphics.StaticBatch");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),T$b._binarySearch=function(T$$){for(var T$b=0,T$u=this._batchRenderElements.length-1,T$Z=0;T$b<=T$u;)T$Z=Math.floor((T$b+T$u)/2),this._compareBatchRenderElement(this._batchRenderElements[T$Z],T$$)?T$u=T$Z-1:T$b=T$Z+1;return T$b},T$b._compareBatchRenderElement=function(T$$,T$b){throw new Error("StaticBatch:must override this function.")},T$b._getVertexDecLightMap=function(T$$){return T$$===T$X$.vertexDeclaration?T$p$.vertexDeclaration:T$$===T$l$.vertexDeclaration?T$v$.vertexDeclaration:T$$===T$a$.vertexDeclaration?T$S$.vertexDeclaration:T$$===T$c$.vertexDeclaration?null:T$$===T$e$.vertexDeclaration?T$L$.vertexDeclaration:T$$===T$m$.vertexDeclaration?T$k$.vertexDeclaration:T$$===T$O$.vertexDeclaration?T$V$.vertexDeclaration:T$$===T$s$.vertexDeclaration?T$Y$.vertexDeclaration:T$$===T$l$.vertexDeclaration?T$v$.vertexDeclaration:T$$===T$t$.vertexDeclaration?T$P$.vertexDeclaration:T$$===T$c$.vertexDeclaration?null:T$$===T$e$.vertexDeclaration?T$L$.vertexDeclaration:T$$===T$n$.vertexDeclaration?T$M$.vertexDeclaration:T$$===T$O$.vertexDeclaration?T$V$.vertexDeclaration:T$$},T$b._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},T$b._addBatchRenderElement=function(T$$){this._batchRenderElements.splice(this._binarySearch(T$$),0,T$$)},T$b._updateToRenderQueue=function(T$$,T$b){this._combineRenderElementPoolIndex=0,this._getRenderElement(T$$.getRenderQueue(this._material.renderQueue)._renderElements,T$$,T$b)},T$b._getRenderElement=function(T$$,T$b,T$u){throw new Error("StaticBatch:must override this function.")},T$b._finishInit=function(){throw new Error("StaticBatch:must override this function.")},T$b._clearRenderElements=function(){this._batchRenderElements.length=0},T$b.dispose=function(){},T$b._getVertexBuffer=function(T$$){return void 0===T$$&&(T$$=0),null},T$b._getIndexBuffer=function(){return null},T$b._beforeRender=function(T$$){return!0},T$b._render=function(T$$){},T$b._getVertexBuffers=function(){return null},T$D(0,T$b,"_vertexBufferCount",function(){return 1}),T$D(0,T$b,"triangleCount",function(){return 0}),T$$.combine=function(T$$){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),T$Z$.combine(T$$)},T$$.maxBatchVertexCount=65535,T$$}(),T$r$=function(){function T$F(T$$,T$b){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++T$F._uniqueIDCounter,this._id>T$F.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",T$F.maxVertexDeclaration);this._shaderValues=new T$ob,this._vertexElementsDic={},this._vertexStride=T$$,this._vertexElements=T$b;for(var T$u=0;T$u<T$b.length;T$u++){var T$Z=T$b[T$u],T$E=T$Z.elementUsage;this._vertexElementsDic[T$E]=T$Z;var T$r=[T$F._getTypeSize(T$Z.elementFormat)/4,5126,!1,this._vertexStride,T$Z.offset];switch(this._shaderValues.setValue(T$E,T$r),T$E){case 1:this._addShaderDefine(T$qb.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(T$qb.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(T$qb.SHADERDEFINE_UV1)}}}T$N(T$F,"laya.d3.graphics.VertexDeclaration");var T$$=T$F.prototype;return T$$._addShaderDefine=function(T$$){this._shaderDefineValue|=T$$},T$$._removeShaderDefine=function(T$$){this._shaderDefineValue&=~T$$},T$$.getVertexElements=function(){return this._vertexElements.slice()},T$$.getVertexElementByUsage=function(T$$){return this._vertexElementsDic[T$$]},T$$.unBinding=function(){},T$D(0,T$$,"shaderDefineValue",function(){return this._shaderDefineValue}),T$D(0,T$$,"id",function(){return this._id}),T$D(0,T$$,"vertexStride",function(){return this._vertexStride}),T$D(0,T$$,"shaderValues",function(){return this._shaderValues}),T$F._getTypeSize=function(T$$){switch(T$$){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},T$F.getVertexStride=function(T$$){for(var T$b=0,T$u=0;T$u<T$$.Length;T$u++){var T$Z=T$$[T$u],T$E=T$Z.offset+T$F._getTypeSize(T$Z.elementFormat);T$b<T$E&&(T$b=T$E)}return T$b},T$F._maxVertexDeclarationBit=1e3,T$F._uniqueIDCounter=1,T$I(T$F,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),T$F}(),T$F$=function(){function T$$(T$$,T$b,T$u){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=T$$,this.elementFormat=T$b,this.elementUsage=T$u}return T$N(T$$,"laya.d3.graphics.VertexElement"),T$$}(),T$x$=(function(){function T$$(){}T$N(T$$,"laya.d3.graphics.VertexElementFormat"),T$$.Single="single",T$$.Vector2="vector2",T$$.Vector3="vector3",T$$.Vector4="vector4",T$$.Color="color",T$$.Byte4="byte4",T$$.Short2="short2",T$$.Short4="short4",T$$.NormalizedShort2="normalizedshort2",T$$.NormalizedShort4="normalizedshort4",T$$.HalfVector2="halfvector2",T$$.HalfVector4="halfvector4"}(),function(){function T$$(){}T$N(T$$,"laya.d3.graphics.VertexElementUsage"),T$$.POSITION0=0,T$$.COLOR0=1,T$$.TEXTURECOORDINATE0=2,T$$.NORMAL0=3,T$$.BINORMAL0=4,T$$.TANGENT0=5,T$$.BLENDINDICES0=6,T$$.BLENDWEIGHT0=7,T$$.DEPTH0=8,T$$.FOG0=9,T$$.POINTSIZE0=10,T$$.SAMPLE0=11,T$$.TESSELLATEFACTOR0=12,T$$.COLOR1=13,T$$.NEXTTEXTURECOORDINATE0=14,T$$.TEXTURECOORDINATE1=15,T$$.NEXTTEXTURECOORDINATE1=16,T$$.CORNERTEXTURECOORDINATE0=17,T$$.VELOCITY0=18,T$$.STARTCOLOR0=19,T$$.STARTSIZE=20,T$$.AGEADDSCALE0=21,T$$.STARTROTATION=22,T$$.ENDCOLOR0=23,T$$.STARTLIFETIME=24,T$$.TIME0=33,T$$.SHAPEPOSITIONSTARTLIFETIME=30,T$$.DIRECTIONTIME=32,T$$.SIZEROTATION0=27,T$$.RADIUS0=28,T$$.RADIAN0=29,T$$.STARTSPEED=31,T$$.RANDOM0=34,T$$.RANDOM1=35,T$$.SIMULATIONWORLDPOSTION=36,T$$.SIMULATIONWORLDROTATION=37,T$$.TEXTURECOORDINATE0X=38,T$$.TEXTURECOORDINATE0X1=39,T$$.TEXTURECOORDINATE0Y=40,T$$.OFFSETVECTOR=41}(),function(){function T$$(T$$,T$b,T$u){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=T$$,this._textureCoordinate0=T$b,this._time=T$u}T$N(T$$,"laya.d3.graphics.VertexGlitter");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate0}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"time",function(){return this._time}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(24,[new T$F$(0,"vector3",0),new T$F$(12,"vector2",2),new T$F$(20,"single",33)])}])}(),function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=T$$,this._position=T$b,this._velocity=T$u,this._startColor=T$Z,this._endColor=T$E,this._sizeRotation=T$r,this._radius=T$F,this._radian=T$x,this._ageAddScale=T$g,this._time=T$H}T$N(T$$,"laya.d3.graphics.VertexParticle");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"endColor",function(){return this._endColor}),T$D(0,T$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),T$D(0,T$b,"sizeRotation",function(){return this._sizeRotation}),T$D(0,T$b,"velocity",function(){return this._velocity}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"startColor",function(){return this._startColor}),T$D(0,T$b,"radius",function(){return this._radius}),T$D(0,T$b,"radian",function(){return this._radian}),T$D(0,T$b,"ageAddScale",function(){return this._ageAddScale}),T$D(0,T$b,"time",function(){return this._time}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(116,[new T$F$(0,"vector4",17),new T$F$(16,"vector3",0),new T$F$(28,"vector3",18),new T$F$(40,"vector4",19),new T$F$(56,"vector4",23),new T$F$(72,"vector3",27),new T$F$(84,"vector2",28),new T$F$(92,"vector4",29),new T$F$(108,"single",24),new T$F$(112,"single",33)])}])}(),function(){function T$$(T$$){this._position=null,this._position=T$$}T$N(T$$,"laya.d3.graphics.VertexPosition");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(12,[new T$F$(0,"vector3",0)])}]),T$$}()),T$g$=function(){function T$$(T$$,T$b){this._position=null,this._normal=null,this._position=T$$,this._normal=T$b}T$N(T$$,"laya.d3.graphics.VertexPositionNormal");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(24,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3)])}]),T$$}(),T$H$=function(){function T$$(T$$,T$b,T$u){this._position=null,this._normal=null,this._color=null,this._position=T$$,this._normal=T$b,this._color=T$u}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColor");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(40,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1)])}]),T$$}(),T$w$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._blendIndex=T$Z,this._blendWeight=T$E}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorSkin");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(72,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector4",7),new T$F$(56,"vector4",6)])}]),T$$}(),T$I$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._tangent=T$Z,this._blendIndex=T$E,this._blendWeight=T$r}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(88,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector4",7),new T$F$(56,"vector4",6),new T$F$(72,"vector4",5)])}]),T$$}(),T$o$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._tangent=T$Z,this._blendIndex=T$E,this._blendWeight=T$r}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(84,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector4",7),new T$F$(56,"vector4",6),new T$F$(72,"vector3",5)])}]),T$$}(),T$N$=function(){function T$$(T$$,T$b,T$u,T$Z){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._tangent=T$Z}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorSTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(56,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector4",5)])}]),T$$}(),T$D$=function(){function T$$(T$$,T$b,T$u,T$Z){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._tangent=T$Z}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(52,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector3",5)])}]),T$$}(),T$e$=function(){function T$$(T$$,T$b,T$u,T$Z){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate=T$Z}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTexture");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(48,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2)])}]),T$$}(),T$L$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate0=T$Z,this._textureCoordinate1=T$E}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(56,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector2",15)])}]),T$$}(),T$T$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate0=T$Z,this._textureCoordinate1=T$E,this._blendIndex=T$r,this._blendWeight=T$F}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(88,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector2",15),new T$F$(56,"vector4",7),new T$F$(72,"vector4",6)])}]),T$$}(),T$_$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate0=T$Z,this._textureCoordinate1=T$E,this._tangent=T$r,this._blendIndex=T$F,this._blendWeight=T$x}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(104,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector2",15),new T$F$(56,"vector4",7),new T$F$(72,"vector4",6),new T$F$(88,"vector4",5)])}]),T$$}(),T$y$=function(){function T$$(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$b.VertexPositionNormalColorTexture0SkinTangent=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate0=T$Z,this._textureCoordinate1=T$E,this._tangent=T$r,this._blendIndex=T$F,this._blendWeight=T$x},T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(100,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector2",15),new T$F$(56,"vector4",7),new T$F$(72,"vector4",6),new T$F$(88,"vector3",5)])}]),T$$}(),T$S$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate0=T$Z,this._textureCoordinate1=T$E,this._tangent=T$r}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(72,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector2",15),new T$F$(56,"vector4",5)])}]),T$$}(),T$P$=function(){function T$$(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$b.VertexPositionNormalColorTexture0Tangent=function(T$$,T$b,T$u,T$Z,T$E,T$r){this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate0=T$Z,this._textureCoordinate1=T$E,this._tangent=T$r},T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(68,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector2",15),new T$F$(56,"vector3",5)])}]),T$$}(),T$i$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate=T$Z,this._blendIndex=T$E,this._blendWeight=T$r}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(80,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector4",7),new T$F$(64,"vector4",6)])}]),T$$}(),T$z$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate=T$Z,this._tangent=T$E,this._blendIndex=T$r,this._blendWeight=T$F}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(96,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector4",7),new T$F$(64,"vector4",6),new T$F$(80,"vector4",5)])}]),T$$}(),T$q$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate=T$Z,this._tangent=T$E,this._blendIndex=T$r,this._blendWeight=T$F}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(92,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector4",7),new T$F$(64,"vector4",6),new T$F$(80,"vector3",5)])}]),T$$}(),T$a$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate=T$Z,this._tangent=T$E}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(64,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector4",5)])}]),T$$}(),T$t$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._color=T$u,this._textureCoordinate=T$Z,this._tangent=T$E}T$N(T$$,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"color",function(){return this._color}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(60,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",1),new T$F$(40,"vector2",2),new T$F$(48,"vector3",5)])}]),T$$}(),T$C$=function(){function T$$(T$$,T$b,T$u){this._position=null,this._normal=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._tangent=T$u}T$N(T$$,"laya.d3.graphics.VertexPositionNormalSTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(40,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector4",5)])}]),T$$}(),T$K$=function(){function T$$(T$$,T$b,T$u){this._position=null,this._normal=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._tangent=T$u}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(36,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector3",5)])}]),T$$}(),T$O$=function(){function T$$(T$$,T$b,T$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$$,this._normal=T$b,this._textureCoordinate=T$u}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTexture");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(32,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2)])}]),T$$}(),T$V$=function(){function T$$(T$$,T$b,T$u,T$Z){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=T$$,this._normal=T$b,this._textureCoordinate0=T$u,this._textureCoordinate1=T$Z}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(40,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector2",15)])}]),T$$}(),T$v$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=T$$,this._normal=T$b,this._textureCoordinate0=T$u,this._textureCoordinate1=T$Z,this._blendIndex=T$E,this._blendWeight=T$r}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(72,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector2",15),new T$F$(40,"vector4",7),new T$F$(56,"vector4",6)])}]),T$$}(),T$p$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._textureCoordinate0=T$u,this._textureCoordinate1=T$Z,this._tangent=T$E,this._blendIndex=T$r,this._blendWeight=T$F}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(88,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector2",15),new T$F$(40,"vector4",7),new T$F$(56,"vector4",6),new T$F$(72,"vector4",5)])}]),T$$}(),T$Y$=function(){function T$$(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$b.VertexPositionNormalTexture0SkinTangent=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){this._position=T$$,this._normal=T$b,this._textureCoordinate0=T$u,this._textureCoordinate1=T$Z,this._tangent=T$E,this._blendIndex=T$r,this._blendWeight=T$F},T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(84,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector2",15),new T$F$(40,"vector4",7),new T$F$(56,"vector4",6),new T$F$(72,"vector3",5)])}]),T$$}(),T$k$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._textureCoordinate0=T$u,this._textureCoordinate1=T$Z,this._tangent=T$E}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(56,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector2",15),new T$F$(40,"vector4",5)])}]),T$$}(),T$M$=function(){function T$$(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$b.VertexPositionNormalTexture0Tangent=function(T$$,T$b,T$u,T$Z,T$E){this._position=T$$,this._normal=T$b,this._textureCoordinate0=T$u,this._textureCoordinate1=T$Z,this._tangent=T$E},T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(52,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector2",15),new T$F$(40,"vector3",5)])}]),T$$}(),T$l$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=T$$,this._normal=T$b,this._textureCoordinate=T$u,this._blendIndex=T$Z,this._blendWeight=T$E}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTextureSkin");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(64,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector4",7),new T$F$(48,"vector4",6)])}]),T$$}(),T$X$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._textureCoordinate=T$u,this._tangent=T$Z,this._blendIndex=T$E,this._blendWeight=T$r}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(80,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector4",7),new T$F$(48,"vector4",6),new T$F$(64,"vector4",5)])}]),T$$}(),T$s$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._textureCoordinate=T$u,this._tangent=T$Z,this._blendIndex=T$E,this._blendWeight=T$r}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(76,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector4",7),new T$F$(48,"vector4",6),new T$F$(64,"vector3",5)])}]),T$$}(),T$m$=function(){function T$$(T$$,T$b,T$u,T$Z){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._textureCoordinate=T$u,this._tangent=T$Z}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(48,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector4",5)])}]),T$$}(),T$n$=function(){function T$$(T$$,T$b,T$u,T$Z){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=T$$,this._normal=T$b,this._textureCoordinate=T$u,this._tangent=T$Z}T$N(T$$,"laya.d3.graphics.VertexPositionNormalTextureTangent");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(44,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector3",5)])}]),T$$}(),T$c$=function(){function T$$(T$$,T$b,T$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$$,this._normal=T$b,this._textureCoordinate=T$u}T$N(T$$,"laya.d3.graphics.VertexPositionNTBTexture");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(56,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector3",5),new T$F$(36,"vector3",4),new T$F$(48,"vector2",2)])}]),T$$}(),T$J$=function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=T$$,this._normal=T$b,this._textureCoordinate0=T$Z,this._textureCoordinate1=T$E,this._tangent=T$r,T$u=T$u,this._blendIndex=T$F,this._blendWeight=T$x}T$N(T$$,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"tangent",function(){return this._tangent}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(0,T$b,"textureCoordinate1",function(){return this._textureCoordinate1}),T$D(0,T$b,"blendIndex",function(){return this._blendIndex}),T$D(0,T$b,"blendWeight",function(){return this._blendWeight}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(96,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector3",5),new T$F$(36,"vector3",4),new T$F$(48,"vector2",2),new T$F$(56,"vector2",15),new T$F$(64,"vector4",7),new T$F$(80,"vector4",6)])}]),T$$}(),T$f$=function(){function T$$(T$$,T$b,T$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=T$$,this._normal=T$b,this._textureCoordinate=T$u}T$N(T$$,"laya.d3.graphics.VertexPositionNTBTextureSkin");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"textureCoordinate",function(){return this._textureCoordinate}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(88,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector3",5),new T$F$(36,"vector3",4),new T$F$(48,"vector2",2),new T$F$(56,"vector4",7),new T$F$(72,"vector4",6)])}]),T$$}(),T$Q$=(function(){function T$$(T$$,T$b,T$u,T$Z){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=T$$,this._normal=T$b,this._textureCoord0=T$u,this._textureCoord1=T$Z}T$N(T$$,"laya.d3.graphics.VertexPositionTerrain");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"normal",function(){return this._normal}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"textureCoord0",function(){return this._textureCoord0}),T$D(0,T$b,"textureCoord1",function(){return this._textureCoord1}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(40,[new T$F$(0,"vector3",0),new T$F$(12,"vector3",3),new T$F$(24,"vector2",2),new T$F$(32,"vector2",15)])}])}(),function(){function T$$(T$$,T$b){this._position=null,this._textureCoordinate0=null,this._position=T$$,this._textureCoordinate0=T$b}T$N(T$$,"laya.d3.graphics.VertexPositionTexture0");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"position",function(){return this._position}),T$D(0,T$b,"textureCoordinate0",function(){return this._textureCoordinate0}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(20,[new T$F$(0,"vector3",0),new T$F$(12,"vector2",2)])}]),T$$}()),T$W$=(function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$I,T$o,T$N){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=T$$,this._positionStartLifeTime=T$b,this._velocity=T$u,this._startColor=T$Z,this._startSize=T$E,this._startRotation0=T$r,this._startRotation1=T$F,this._startRotation2=T$x,this._startLifeTime=T$g,this._time=T$H,this._startSpeed=T$w,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=T$N}T$N(T$$,"laya.d3.graphics.VertexShurikenParticleBillboard");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),T$D(0,T$b,"random1",function(){return this._randoms1}),T$D(0,T$b,"startRotation2",function(){return this._startRotation2}),T$D(0,T$b,"positionStartLifeTime",function(){return this._positionStartLifeTime}),T$D(0,T$b,"velocity",function(){return this._velocity}),T$D(0,T$b,"random0",function(){return this._randoms0}),T$D(0,T$b,"startSize",function(){return this._startSize}),T$D(0,T$b,"startColor",function(){return this._startColor}),T$D(0,T$b,"startRotation0",function(){return this._startRotation0}),T$D(0,T$b,"startRotation1",function(){return this._startRotation1}),T$D(0,T$b,"startLifeTime",function(){return this._startLifeTime}),T$D(0,T$b,"time",function(){return this._time}),T$D(0,T$b,"startSpeed",function(){return this._startSpeed}),T$D(0,T$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(152,[new T$F$(0,"vector4",17),new T$F$(16,"vector4",30),new T$F$(32,"vector4",32),new T$F$(48,"vector4",19),new T$F$(64,"vector3",20),new T$F$(76,"vector3",22),new T$F$(88,"single",31),new T$F$(92,"vector4",34),new T$F$(108,"vector4",35),new T$F$(124,"vector3",36),new T$F$(136,"vector4",37)])}])}(),function(){function T$$(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$I,T$o,T$N){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=T$$,this._positionStartLifeTime=T$b,this._velocity=T$u,this._startColor=T$Z,this._startSize=T$E,this._startRotation0=T$r,this._startRotation1=T$F,this._startRotation2=T$x,this._startLifeTime=T$g,this._time=T$H,this._startSpeed=T$w,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=T$N}T$N(T$$,"laya.d3.graphics.VertexShurikenParticleMesh");var T$b=T$$.prototype;T$P.imps(T$b,{"laya.d3.graphics.IVertex":!0}),T$D(0,T$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),T$D(0,T$b,"velocity",function(){return this._velocity}),T$D(0,T$b,"position",function(){return this._positionStartLifeTime}),T$D(0,T$b,"random0",function(){return this._randoms0}),T$D(0,T$b,"startSize",function(){return this._startSize}),T$D(0,T$b,"startColor",function(){return this._startColor}),T$D(0,T$b,"startRotation0",function(){return this._startRotation0}),T$D(0,T$b,"startRotation1",function(){return this._startRotation1}),T$D(0,T$b,"random1",function(){return this._randoms1}),T$D(0,T$b,"startRotation2",function(){return this._startRotation2}),T$D(0,T$b,"startLifeTime",function(){return this._startLifeTime}),T$D(0,T$b,"time",function(){return this._time}),T$D(0,T$b,"startSpeed",function(){return this._startSpeed}),T$D(0,T$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),T$D(0,T$b,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$D(1,T$$,"vertexDeclaration",function(){return T$$._vertexDeclaration}),T$I(T$$,["_vertexDeclaration",function(){return this._vertexDeclaration=new T$r$(172,[new T$F$(0,"vector3",0),new T$F$(12,"vector4",1),new T$F$(28,"vector2",2),new T$F$(36,"vector4",30),new T$F$(52,"vector4",32),new T$F$(68,"vector4",19),new T$F$(84,"vector3",20),new T$F$(96,"vector3",22),new T$F$(108,"single",31),new T$F$(112,"vector4",34),new T$F$(128,"vector4",35),new T$F$(144,"vector3",36),new T$F$(156,"vector4",37)])}])}(),function(){function T$y(T$$,T$b,T$u,T$Z,T$E,T$r){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=T$u,this._materials=T$Z,this._subMeshes=T$E,this._materialMap=T$r,this._version=T$b,this._onLoaded(T$$)}T$N(T$y,"laya.d3.loaders.LoadModelV01");var T$$=T$y.prototype;return T$$._onLoaded=function(T$$){this._readData=T$$,this.READ_BLOCK();for(var T$b=0;T$b<this._BLOCK.count;T$b++){var T$u=this._readData.getUint16(),T$Z=this._strings[T$u],T$E=this["READ_"+T$Z];if(null==T$E)throw new Error("model file err,no this function:"+T$u+" "+T$Z);if(!T$E.call(this))break}return this._mesh},T$$.onError=function(){},T$$._readString=function(){return this._strings[this._readData.getUint16()]},T$$.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},T$$.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},T$$.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var T$$=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var T$b=0;T$b<this._STRINGS.size;T$b++)this._strings[T$b]=this._readData.readUTFString();return this._readData.pos=T$$,!0},T$$.READ_MATERIAL=function(){var T$$=this._readData.getUint16(),T$b=(this._readString(),this._readString());return this._materials[T$$]="null"!==T$b?T$T.getRes(this._materialMap[T$b]):new T$Kb,!0},T$$.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var T$$,T$b=this._readData.__getBuffer(),T$u=0,T$Z=this._readData.getUint32(),T$E=this._readData.getUint32(),T$r=(new Float32Array(T$b.slice(T$Z+this._DATA.offset,T$Z+this._DATA.offset+T$E)),this._readData.getUint32()),T$F=this._readData.getUint32(),T$x=new Float32Array(T$b.slice(T$r+this._DATA.offset,T$r+this._DATA.offset+T$F));for(this.mesh._inverseBindPoses=[],T$u=0,T$$=T$x.length;T$u<T$$;T$u+=16){var T$g=new T$$b(T$x[T$u+0],T$x[T$u+1],T$x[T$u+2],T$x[T$u+3],T$x[T$u+4],T$x[T$u+5],T$x[T$u+6],T$x[T$u+7],T$x[T$u+8],T$x[T$u+9],T$x[T$u+10],T$x[T$u+11],T$x[T$u+12],T$x[T$u+13],T$x[T$u+14],T$x[T$u+15]);this.mesh._inverseBindPoses.push(T$g)}break;default:throw new Error("LoadModel:unknown version.")}return!0},T$$.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var T$$=this._readString();this._shaderAttributes=T$$.match(T$y._attrReg);var T$b=this._readData.getUint32(),T$u=this._readData.getUint32(),T$Z=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),T$E=this._readData.getUint32(),T$r=this._readData.getUint32(),T$F=this._readData.getUint32(),T$x=this._readData.__getBuffer(),T$g=new T$Hb(this._mesh),T$H=this._getVertexDeclaration(),T$w=T$sb.create(T$H,T$E/T$H.vertexStride,35044,!0),T$I=T$Z+this._DATA.offset,T$o=T$x.slice(T$I,T$I+T$E);T$w.setData(new Float32Array(T$o));for(var T$N=(T$g._vertexBuffer=T$w).vertexDeclaration.getVertexElements(),T$D=0;T$D<T$N.length;T$D++)T$g._bufferUsage[T$N[T$D].elementUsage]=T$w;var T$e=T$Xb.create("ushort",T$u/2,35044,!0),T$L=T$b+this._DATA.offset,T$T=T$x.slice(T$L,T$L+T$u);T$e.setData(new Uint16Array(T$T)),T$g._indexBuffer=T$e;var T$_=T$x.slice(T$r+this._DATA.offset,T$r+this._DATA.offset+T$F);return T$g._boneIndicesList[0]=new Uint8Array(T$_),this._subMeshes.push(T$g),!0},T$$.READ_DATAAREA=function(){return!1},T$$._getVertexDeclaration=function(){for(var T$$,T$b=!1,T$u=!1,T$Z=!1,T$E=!1,T$r=!1,T$F=!1,T$x=!1,T$g=!1,T$H=!1,T$w=0;T$w<this._shaderAttributes.length;T$w+=8)switch(this._shaderAttributes[T$w]){case"POSITION":T$b=!0;break;case"NORMAL":T$u=!0;break;case"COLOR":T$Z=!0;break;case"UV":T$E=!0;break;case"UV1":T$r=!0;break;case"BLENDWEIGHT":T$x=!0;break;case"BLENDINDICES":T$g=!0;break;case"TANGENT":T$F=!0;break;case"BINORMAL":T$H=!0}return T$b&&T$u&&T$Z&&T$E&&T$r&&T$x&&T$g&&T$F?T$$=T$y$.vertexDeclaration:T$b&&T$u&&T$Z&&T$E&&T$r&&T$x&&T$g?T$$=T$T$.vertexDeclaration:T$b&&T$u&&T$E&&T$r&&T$x&&T$g&&T$F?T$$=T$Y$.vertexDeclaration:T$b&&T$u&&T$E&&T$r&&T$x&&T$g?T$$=T$v$.vertexDeclaration:T$b&&T$u&&T$Z&&T$E&&T$x&&T$g&&T$F?T$$=T$q$.vertexDeclaration:T$b&&T$u&&T$Z&&T$E&&T$x&&T$g?T$$=T$i$.vertexDeclaration:T$b&&T$u&&T$F&&T$H&&T$E&&T$x&&T$g?T$$=T$f$.vertexDeclaration:T$b&&T$u&&T$E&&T$x&&T$g&&T$F?T$$=T$s$.vertexDeclaration:T$b&&T$u&&T$E&&T$x&&T$g?T$$=T$l$.vertexDeclaration:T$b&&T$u&&T$Z&&T$x&&T$g&&T$F?T$$=T$o$.vertexDeclaration:T$b&&T$u&&T$Z&&T$x&&T$g?T$$=T$w$.vertexDeclaration:T$b&&T$u&&T$Z&&T$E&&T$r&&T$F?T$$=T$P$.vertexDeclaration:T$b&&T$u&&T$Z&&T$E&&T$r?T$$=T$L$.vertexDeclaration:T$b&&T$u&&T$E&&T$r&&T$F?T$$=T$M$.vertexDeclaration:T$b&&T$u&&T$E&&T$r?T$$=T$V$.vertexDeclaration:T$b&&T$u&&T$Z&&T$E&&T$F?T$$=T$t$.vertexDeclaration:T$b&&T$u&&T$E&&T$F&&T$H?T$$=T$c$.vertexDeclaration:T$b&&T$u&&T$Z&&T$E?T$$=T$e$.vertexDeclaration:T$b&&T$u&&T$E&&T$F?T$$=T$n$.vertexDeclaration:T$b&&T$u&&T$E?T$$=T$O$.vertexDeclaration:T$b&&T$u&&T$Z&&T$F?T$$=T$D$.vertexDeclaration:T$b&&T$u&&T$Z&&(T$$=T$H$.vertexDeclaration),T$$},T$D(0,T$$,"mesh",function(){return this._mesh}),T$y._attrReg=new RegExp("(\\w+)|([:,;])","g"),T$y}()),T$G$=function(){function T$z(){}return T$N(T$z,"laya.d3.loaders.LoadModelV02"),T$z.parse=function(T$$,T$b,T$u,T$Z,T$E,T$r){T$z._mesh=T$u,T$z._materials=T$Z,T$z._subMeshes=T$E,T$z._materialMap=T$r,T$z._version=T$b,T$z._readData=T$$,T$z.READ_DATA(),T$z.READ_BLOCK(),T$z.READ_STRINGS();for(var T$F=0,T$x=T$z._BLOCK.count;T$F<T$x;T$F++){T$z._readData.pos=T$z._BLOCK.blockStarts[T$F];var T$g=T$z._readData.getUint16(),T$H=T$z._strings[T$g],T$w=T$z["READ_"+T$H];if(null==T$w)throw new Error("model file err,no this function:"+T$g+" "+T$H);T$w.call()}T$z._strings.length=0,T$z._readData=null,T$z._version=null,T$z._mesh=null,T$z._materials=null,T$z._subMeshes=null,T$z._materialMap=null},T$z._readString=function(){return T$z._strings[T$z._readData.getUint16()]},T$z.READ_DATA=function(){T$z._DATA.offset=T$z._readData.getUint32(),T$z._DATA.size=T$z._readData.getUint32()},T$z.READ_BLOCK=function(){for(var T$$=T$z._BLOCK.count=T$z._readData.getUint16(),T$b=T$z._BLOCK.blockStarts=[],T$u=T$z._BLOCK.blockLengths=[],T$Z=0;T$Z<T$$;T$Z++)T$b.push(T$z._readData.getUint32()),T$u.push(T$z._readData.getUint32())},T$z.READ_STRINGS=function(){var T$$=T$z._readData.getUint32(),T$b=T$z._readData.getUint16(),T$u=T$z._readData.pos;T$z._readData.pos=T$$+T$z._DATA.offset;for(var T$Z=0;T$Z<T$b;T$Z++)T$z._strings[T$Z]=T$z._readData.readUTFString();T$z._readData.pos=T$u},T$z.READ_MATERIAL=function(){T$z._readString(),T$z._readString();var T$$=T$z._readString();return""!==T$$&&T$z._materials.push(T$T.getRes(T$z._materialMap[T$$])),!0},T$z.READ_MESH=function(){T$z._readString();var T$$,T$b=T$z._readData.__getBuffer(),T$u=0,T$Z=T$z._readData.getInt16(),T$E=T$z._DATA.offset;for(T$u=0;T$u<T$Z;T$u++){var T$r=T$E+T$z._readData.getUint32(),T$F=T$z._readData.getUint32(),T$x=new Float32Array(T$b.slice(T$r,T$r+T$F)),T$g=T$z._readString().match(T$z._attrReg),T$H=T$z._getVertexDeclaration(T$g),T$w=T$sb.create(T$H,4*T$x.length/T$H.vertexStride,35044,!0);T$w.setData(T$x),T$z._mesh._vertexBuffers.push(T$w)}var T$I=T$E+T$z._readData.getUint32(),T$o=T$z._readData.getUint32(),T$N=new Uint16Array(T$b.slice(T$I,T$I+T$o)),T$D=T$Xb.create("ushort",T$o/2,35044,!0);T$D.setData(T$N),T$z._mesh._indexBuffer=T$D;var T$e=T$z._mesh._boneNames=[],T$L=T$z._readData.getUint16();for(T$e.length=T$L,T$u=0;T$u<T$L;T$u++)T$e[T$u]=T$z._strings[T$z._readData.getUint16()];var T$T=T$z._readData.getUint32(),T$_=T$z._readData.getUint32(),T$y=(new Float32Array(T$b.slice(T$E+T$T,T$E+T$T+T$_)),T$z._readData.getUint32()),T$S=T$z._readData.getUint32(),T$P=new Float32Array(T$b.slice(T$E+T$y,T$E+T$y+T$S));for(T$z._mesh._inverseBindPoses=[],T$u=0,T$$=T$P.length;T$u<T$$;T$u+=16){var T$i=new T$$b(T$P[T$u+0],T$P[T$u+1],T$P[T$u+2],T$P[T$u+3],T$P[T$u+4],T$P[T$u+5],T$P[T$u+6],T$P[T$u+7],T$P[T$u+8],T$P[T$u+9],T$P[T$u+10],T$P[T$u+11],T$P[T$u+12],T$P[T$u+13],T$P[T$u+14],T$P[T$u+15]);T$z._mesh._inverseBindPoses.push(T$i)}return T$z._mesh._skinnedDatas=new Float32Array(16*T$P.length),!0},T$z.READ_SUBMESH=function(){var T$$=T$z._readData.__getBuffer(),T$b=new T$Hb(T$z._mesh),T$u=T$z._readData.getInt16(),T$Z=T$z._readData.getUint32(),T$E=T$z._readData.getUint32();T$b._vertexBuffer=T$z._mesh._vertexBuffers[T$u],T$b._vertexStart=T$Z,T$b._vertexCount=T$E;var T$r=T$z._readData.getUint32(),T$F=T$z._readData.getUint32(),T$x=T$z._mesh._indexBuffer;T$b._indexBuffer=T$x,T$b._indexStart=T$r,T$b._indexCount=T$F,T$b._indices=new Uint16Array(T$x.getData().buffer,2*T$r,T$F);var T$g=T$z._DATA.offset,T$H=T$b._subIndexBufferStart,T$w=T$b._subIndexBufferCount,T$I=T$b._boneIndicesList,T$o=T$z._readData.getUint16();T$H.length=T$o,T$w.length=T$o,T$I.length=T$o;for(var T$N=0;T$N<T$o;T$N++){T$H[T$N]=T$z._readData.getUint32(),T$w[T$N]=T$z._readData.getUint32();var T$D=T$z._readData.getUint32(),T$e=T$z._readData.getUint32();T$b._boneIndicesList[T$N]=new Uint8Array(T$$.slice(T$g+T$D,T$g+T$D+T$e))}return T$z._subMeshes.push(T$b),!0},T$z._getVertexDeclaration=function(T$$){for(var T$b,T$u=!1,T$Z=!1,T$E=!1,T$r=!1,T$F=!1,T$x=!1,T$g=!1,T$H=!1,T$w=!1,T$I=0;T$I<T$$.length;T$I++)switch(T$$[T$I]){case"POSITION":T$u=!0;break;case"NORMAL":T$Z=!0;break;case"COLOR":T$E=!0;break;case"UV":T$r=!0;break;case"UV1":T$F=!0;break;case"BLENDWEIGHT":T$g=!0;break;case"BLENDINDICES":T$H=!0;break;case"TANGENT":T$x=!0;break;case"BINORMAL":T$w=!0}return T$u&&T$Z&&T$E&&T$r&&T$F&&T$g&&T$H&&T$x?T$b=T$y$.vertexDeclaration:T$u&&T$Z&&T$E&&T$r&&T$F&&T$g&&T$H?T$b=T$T$.vertexDeclaration:T$u&&T$Z&&T$r&&T$F&&T$g&&T$H&&T$x?T$b=T$Y$.vertexDeclaration:T$u&&T$Z&&T$r&&T$F&&T$g&&T$H?T$b=T$v$.vertexDeclaration:T$u&&T$Z&&T$E&&T$r&&T$g&&T$H&&T$x?T$b=T$q$.vertexDeclaration:T$u&&T$Z&&T$E&&T$r&&T$g&&T$H?T$b=T$i$.vertexDeclaration:T$u&&T$Z&&T$r&&T$g&&T$H&&T$x?T$b=T$s$.vertexDeclaration:T$u&&T$Z&&T$r&&T$g&&T$H?T$b=T$l$.vertexDeclaration:T$u&&T$Z&&T$E&&T$g&&T$H&&T$x?T$b=T$o$.vertexDeclaration:T$u&&T$Z&&T$E&&T$g&&T$H?T$b=T$w$.vertexDeclaration:T$u&&T$Z&&T$E&&T$r&&T$F&&T$x?T$b=T$P$.vertexDeclaration:T$u&&T$Z&&T$E&&T$r&&T$F?T$b=T$L$.vertexDeclaration:T$u&&T$Z&&T$r&&T$F&&T$x?T$b=T$M$.vertexDeclaration:T$u&&T$Z&&T$r&&T$F?T$b=T$V$.vertexDeclaration:T$u&&T$Z&&T$E&&T$r&&T$x?T$b=T$t$.vertexDeclaration:T$u&&T$Z&&T$r&&T$x&&T$w?T$b=T$c$.vertexDeclaration:T$u&&T$Z&&T$E&&T$r?T$b=T$e$.vertexDeclaration:T$u&&T$Z&&T$r&&T$x?T$b=T$n$.vertexDeclaration:T$u&&T$Z&&T$r?T$b=T$O$.vertexDeclaration:T$u&&T$Z&&T$E&&T$x?T$b=T$D$.vertexDeclaration:T$u&&T$Z&&T$E&&(T$b=T$H$.vertexDeclaration),T$b},T$z._attrReg=new RegExp("(\\w+)|([:,;])","g"),T$z._strings=[],T$z._readData=null,T$z._version=null,T$z._mesh=null,T$z._materials=null,T$z._subMeshes=null,T$z._materialMap=null,T$I(T$z,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),T$z}(),T$A$=function(){function T$i(){}return T$N(T$i,"laya.d3.loaders.LoadModelV03"),T$i.parse=function(T$$,T$b,T$u,T$Z,T$E){T$i._mesh=T$u,T$i._subMeshes=T$Z,T$i._materialMap=T$E,T$i._version=T$b,T$i._readData=T$$,T$i.READ_DATA(),T$i.READ_BLOCK(),T$i.READ_STRINGS();for(var T$r=0,T$F=T$i._BLOCK.count;T$r<T$F;T$r++){T$i._readData.pos=T$i._BLOCK.blockStarts[T$r];var T$x=T$i._readData.getUint16(),T$g=T$i._strings[T$x],T$H=T$i["READ_"+T$g];if(null==T$H)throw new Error("model file err,no this function:"+T$x+" "+T$g);T$H.call()}T$i._strings.length=0,T$i._readData=null,T$i._version=null,T$i._mesh=null,T$i._subMeshes=null,T$i._materialMap=null},T$i._readString=function(){return T$i._strings[T$i._readData.getUint16()]},T$i.READ_DATA=function(){T$i._DATA.offset=T$i._readData.getUint32(),T$i._DATA.size=T$i._readData.getUint32()},T$i.READ_BLOCK=function(){for(var T$$=T$i._BLOCK.count=T$i._readData.getUint16(),T$b=T$i._BLOCK.blockStarts=[],T$u=T$i._BLOCK.blockLengths=[],T$Z=0;T$Z<T$$;T$Z++)T$b.push(T$i._readData.getUint32()),T$u.push(T$i._readData.getUint32())},T$i.READ_STRINGS=function(){var T$$=T$i._readData.getUint32(),T$b=T$i._readData.getUint16(),T$u=T$i._readData.pos;T$i._readData.pos=T$$+T$i._DATA.offset;for(var T$Z=0;T$Z<T$b;T$Z++)T$i._strings[T$Z]=T$i._readData.readUTFString();T$i._readData.pos=T$u},T$i.READ_MESH=function(){var T$$,T$b=T$i._readString(),T$u=T$i._readData.__getBuffer(),T$Z=0,T$E=T$i._readData.getInt16(),T$r=T$i._DATA.offset;for(T$Z=0;T$Z<T$E;T$Z++){var T$F,T$x=T$r+T$i._readData.getUint32(),T$g=T$i._readData.getUint32(),T$H=new Float32Array(T$u.slice(T$x,T$x+T$g)),T$w=T$i._readString();switch(T$i._version){case"LAYAMODEL:03":T$F=T$i._vertexDeclarationMap_Discard[T$w];break;case"LAYAMODEL:0301":T$F=T$i._vertexDeclarationMap[T$w];break;default:throw new Error("LoadModelV03: unknown version.")}if(!T$F)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+T$i._version+"  bufferAttribute="+T$w+"  name="+T$b+"  url="+(T$i._mesh?T$i._mesh.url:"null"));var T$I=T$sb.create(T$F,4*T$H.length/T$F.vertexStride,35044,!0,T$i._mesh._url+"_"+T$Z);T$I.setData(T$H),T$i._mesh._vertexBuffers.push(T$I)}var T$o=T$r+T$i._readData.getUint32(),T$N=T$i._readData.getUint32(),T$D=new Uint16Array(T$u.slice(T$o,T$o+T$N)),T$e=T$Xb.create("ushort",T$N/2,35044,!0,T$i._mesh._url);T$e.setData(T$D),T$i._mesh._indexBuffer=T$e;var T$L=T$i._mesh._boneNames=[],T$T=T$i._readData.getUint16();for(T$L.length=T$T,T$Z=0;T$Z<T$T;T$Z++)T$L[T$Z]=T$i._strings[T$i._readData.getUint16()];T$i._readData.pos+=8;var T$_=T$i._readData.getUint32(),T$y=T$i._readData.getUint32(),T$S=new Float32Array(T$u.slice(T$r+T$_,T$r+T$_+T$y));for(T$i._mesh._inverseBindPoses=[],T$Z=0,T$$=T$S.length;T$Z<T$$;T$Z+=16){var T$P=new T$$b(T$S[T$Z+0],T$S[T$Z+1],T$S[T$Z+2],T$S[T$Z+3],T$S[T$Z+4],T$S[T$Z+5],T$S[T$Z+6],T$S[T$Z+7],T$S[T$Z+8],T$S[T$Z+9],T$S[T$Z+10],T$S[T$Z+11],T$S[T$Z+12],T$S[T$Z+13],T$S[T$Z+14],T$S[T$Z+15]);T$i._mesh._inverseBindPoses.push(T$P)}return T$i._mesh._skinnedDatas=new Float32Array(16*T$S.length),!0},T$i.READ_SUBMESH=function(){var T$$=T$i._readData.__getBuffer(),T$b=new T$Hb(T$i._mesh),T$u=T$i._readData.getInt16(),T$Z=T$i._readData.getUint32(),T$E=T$i._readData.getUint32();T$b._vertexBuffer=T$i._mesh._vertexBuffers[T$u],T$b._vertexStart=T$Z,T$b._vertexCount=T$E;var T$r=T$i._readData.getUint32(),T$F=T$i._readData.getUint32(),T$x=T$i._mesh._indexBuffer;T$b._indexBuffer=T$x,T$b._indexStart=T$r,T$b._indexCount=T$F,T$b._indices=new Uint16Array(T$x.getData().buffer,2*T$r,T$F);var T$g=T$i._DATA.offset,T$H=T$b._subIndexBufferStart,T$w=T$b._subIndexBufferCount,T$I=T$b._boneIndicesList,T$o=T$i._readData.getUint16();T$H.length=T$o,T$w.length=T$o,T$I.length=T$o;for(var T$N=0;T$N<T$o;T$N++){T$H[T$N]=T$i._readData.getUint32(),T$w[T$N]=T$i._readData.getUint32();var T$D=T$i._readData.getUint32(),T$e=T$i._readData.getUint32();T$I[T$N]=new Uint8Array(T$$.slice(T$g+T$D,T$g+T$D+T$e))}return T$i._subMeshes.push(T$b),!0},T$i._strings=[],T$i._readData=null,T$i._version=null,T$i._mesh=null,T$i._subMeshes=null,T$i._materialMap=null,T$I(T$i,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$y$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$T$.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":T$J$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$Y$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$v$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$q$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":T$i$.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$s$.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":T$l$.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":T$o$.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":T$w$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":T$P$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":T$L$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":T$M$.vertexDeclaration,"POSITION,NORMAL,UV,UV1":T$V$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":T$t$.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":T$c$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":T$e$.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":T$n$.vertexDeclaration,"POSITION,NORMAL,UV":T$O$.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":T$D$.vertexDeclaration,"POSITION,NORMAL,COLOR":T$H$.vertexDeclaration,"POSITION,NORMAL,TANGENT":T$K$.vertexDeclaration,"POSITION,NORMAL":T$g$.vertexDeclaration,"POSITION,UV":T$Q$.vertexDeclaration,POSITION:T$x$.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$_$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$T$.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":T$J$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":T$p$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":T$v$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$z$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":T$i$.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":T$X$.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":T$l$.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":T$I$.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":T$w$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":T$S$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":T$L$.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":T$k$.vertexDeclaration,"POSITION,NORMAL,UV,UV1":T$V$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":T$a$.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":T$c$.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":T$e$.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":T$m$.vertexDeclaration,"POSITION,NORMAL,UV":T$O$.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":T$N$.vertexDeclaration,"POSITION,NORMAL,COLOR":T$H$.vertexDeclaration,"POSITION,NORMAL,TANGENT":T$C$.vertexDeclaration,"POSITION,NORMAL":T$g$.vertexDeclaration,"POSITION,UV":T$Q$.vertexDeclaration,POSITION:T$x$.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),T$i}(),T$j$=function(){function T$x(){}return T$N(T$x,"laya.d3.loaders.MeshReader"),T$x.read=function(T$$,T$b,T$u,T$Z,T$E){var T$r=new T$i(T$$);T$r.pos=0;var T$F=T$r.readUTFString();switch(T$F){case"LAYAMODEL:01":case"LAYASKINANI:01":T$x._readVersion01(T$r,T$F,T$b,T$u,T$Z,T$E);break;case"LAYAMODEL:02":T$G$.parse(T$r,T$F,T$b,T$u,T$Z,T$E);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":T$A$.parse(T$r,T$F,T$b,T$Z,T$E);break;default:throw new Error("MeshReader: unknown mesh version.")}T$b._setSubMeshes(T$Z)},T$x._readVersion01=function(T$$,T$b,T$u,T$Z,T$E,T$r){new T$W$(T$$,T$b,T$u,T$Z,T$E,T$r)},T$x}(),T$h$=function(){function T$$(T$$,T$b){this.min=null,this.max=null,this.min=T$$,this.max=T$b}T$N(T$$,"laya.d3.math.BoundBox");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.getCorners=function(T$$){T$$.length=8;var T$b=this.min.elements,T$u=this.max.elements,T$Z=T$b[0],T$E=T$b[1],T$r=T$b[2],T$F=T$u[0],T$x=T$u[1],T$g=T$u[2];T$$[0]=new T$Fb(T$Z,T$x,T$g),T$$[1]=new T$Fb(T$F,T$x,T$g),T$$[2]=new T$Fb(T$F,T$E,T$g),T$$[3]=new T$Fb(T$Z,T$E,T$g),T$$[4]=new T$Fb(T$Z,T$x,T$r),T$$[5]=new T$Fb(T$F,T$x,T$r),T$$[6]=new T$Fb(T$F,T$E,T$r),T$$[7]=new T$Fb(T$Z,T$E,T$r)},T$b.toDefault=function(){this.min.toDefault(),this.max.toDefault()},T$b.cloneTo=function(T$$){var T$b=T$$;this.min.cloneTo(T$b.min),this.max.cloneTo(T$b.max)},T$b.clone=function(){var T$$=new this.constructor(new T$Fb,new T$Fb);return this.cloneTo(T$$),T$$},T$$.createfromPoints=function(T$$,T$b){if(null==T$$)throw new Error("points");var T$u=T$b.min,T$Z=T$b.max,T$E=T$u.elements;T$E[0]=Number.MAX_VALUE,T$E[1]=Number.MAX_VALUE,T$E[2]=Number.MAX_VALUE;var T$r=T$Z.elements;T$r[0]=-Number.MAX_VALUE,T$r[1]=-Number.MAX_VALUE,T$r[2]=-Number.MAX_VALUE;for(var T$F=0,T$x=T$$.length;T$F<T$x;++T$F)T$Fb.min(T$u,T$$[T$F],T$u),T$Fb.max(T$Z,T$$[T$F],T$Z)},T$$.merge=function(T$$,T$b,T$u){T$Fb.min(T$$.min,T$b.min,T$u.min),T$Fb.max(T$$.max,T$b.max,T$u.max)},T$$}(),T$d$=function(){function T$H(T$$){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=T$$,this._near=new T$bb(new T$Fb),this._far=new T$bb(new T$Fb),this._left=new T$bb(new T$Fb),this._right=new T$bb(new T$Fb),this._top=new T$bb(new T$Fb),this._bottom=new T$bb(new T$Fb),T$H._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}T$N(T$H,"laya.d3.math.BoundFrustum");var T$$=T$H.prototype;return T$$.equalsBoundFrustum=function(T$$){return this._matrix.equalsOtherMatrix(T$$.matrix)},T$$.equalsObj=function(T$$){if(T$$ instanceof laya.d3.math.BoundFrustum){var T$b=T$$;return this.equalsBoundFrustum(T$b)}return!1},T$$.getPlane=function(T$$){switch(T$$){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},T$$.getCorners=function(T$$){T$H._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(T$$[0]),T$H._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(T$$[1]),T$H._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(T$$[2]),T$H._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(T$$[3]),T$H._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(T$$[4]),T$H._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(T$$[5]),T$H._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(T$$[6]),T$H._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(T$$[7])},T$$.containsPoint=function(T$$){for(var T$b=T$bb.PlaneIntersectionType_Front,T$u=T$bb.PlaneIntersectionType_Front,T$Z=0;T$Z<6;T$Z++){switch(T$Z){case 0:T$u=Collision.intersectsPlaneAndPoint(this._near,T$$);break;case 1:T$u=Collision.intersectsPlaneAndPoint(this._far,T$$);break;case 2:T$u=Collision.intersectsPlaneAndPoint(this._left,T$$);break;case 3:T$u=Collision.intersectsPlaneAndPoint(this._right,T$$);break;case 4:T$u=Collision.intersectsPlaneAndPoint(this._top,T$$);break;case 5:T$u=Collision.intersectsPlaneAndPoint(this._bottom,T$$)}switch(T$u){case T$bb.PlaneIntersectionType_Back:return 0;case T$bb.PlaneIntersectionType_Intersecting:T$b=T$bb.PlaneIntersectionType_Intersecting}}switch(T$b){case T$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},T$$.containsBoundBox=function(T$$){for(var T$b,T$u=T$H._tempV30,T$Z=T$H._tempV31,T$E=1,T$r=0;T$r<6;T$r++){if(T$b=this.getPlane(T$r),this._getBoxToPlanePVertexNVertex(T$$,T$b.normal,T$u,T$Z),Collision.intersectsPlaneAndPoint(T$b,T$u)===T$bb.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(T$b,T$Z)===T$bb.PlaneIntersectionType_Back&&(T$E=2)}return T$E},T$$.containsBoundSphere=function(T$$){for(var T$b=T$bb.PlaneIntersectionType_Front,T$u=T$bb.PlaneIntersectionType_Front,T$Z=0;T$Z<6;T$Z++){switch(T$Z){case 0:T$u=Collision.intersectsPlaneAndSphere(this._near,T$$);break;case 1:T$u=Collision.intersectsPlaneAndSphere(this._far,T$$);break;case 2:T$u=Collision.intersectsPlaneAndSphere(this._left,T$$);break;case 3:T$u=Collision.intersectsPlaneAndSphere(this._right,T$$);break;case 4:T$u=Collision.intersectsPlaneAndSphere(this._top,T$$);break;case 5:T$u=Collision.intersectsPlaneAndSphere(this._bottom,T$$)}switch(T$u){case T$bb.PlaneIntersectionType_Back:return 0;case T$bb.PlaneIntersectionType_Intersecting:T$b=T$bb.PlaneIntersectionType_Intersecting}}switch(T$b){case T$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},T$$._getBoxToPlanePVertexNVertex=function(T$$,T$b,T$u,T$Z){var T$E=T$$.min,T$r=T$E.elements,T$F=T$$.max,T$x=T$F.elements,T$g=T$b.elements,T$H=T$g[0],T$w=T$g[1],T$I=T$g[2];T$E.cloneTo(T$u);var T$o=T$u.elements;0<=T$H&&(T$o[0]=T$x[0]),0<=T$w&&(T$o[1]=T$x[1]),0<=T$I&&(T$o[2]=T$x[2]),T$F.cloneTo(T$Z);var T$N=T$Z.elements;0<=T$H&&(T$N[0]=T$r[0]),0<=T$w&&(T$N[1]=T$r[1]),0<=T$I&&(T$N[2]=T$r[2])},T$D(0,T$$,"top",function(){return this._top}),T$D(0,T$$,"matrix",function(){return this._matrix},function(T$$){this._matrix=T$$,T$H._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),T$D(0,T$$,"near",function(){return this._near}),T$D(0,T$$,"far",function(){return this._far}),T$D(0,T$$,"left",function(){return this._left}),T$D(0,T$$,"right",function(){return this._right}),T$D(0,T$$,"bottom",function(){return this._bottom}),T$H._getPlanesFromMatrix=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){var T$x=T$$.elements,T$g=T$x[0],T$H=T$x[1],T$w=T$x[2],T$I=T$x[3],T$o=T$x[4],T$N=T$x[5],T$D=T$x[6],T$e=T$x[7],T$L=T$x[8],T$T=T$x[9],T$_=T$x[10],T$y=T$x[11],T$S=T$x[12],T$P=T$x[13],T$i=T$x[14],T$z=T$x[15],T$q=T$b.normal.elements;T$q[0]=T$I+T$w,T$q[1]=T$e+T$D,T$q[2]=T$y+T$_,T$b.distance=T$z+T$i,T$b.normalize();var T$a=T$u.normal.elements;T$a[0]=T$I-T$w,T$a[1]=T$e-T$D,T$a[2]=T$y-T$_,T$u.distance=T$z-T$i,T$u.normalize();var T$t=T$Z.normal.elements;T$t[0]=T$I+T$g,T$t[1]=T$e+T$o,T$t[2]=T$y+T$L,T$Z.distance=T$z+T$S,T$Z.normalize();var T$C=T$E.normal.elements;T$C[0]=T$I-T$g,T$C[1]=T$e-T$o,T$C[2]=T$y-T$L,T$E.distance=T$z-T$S,T$E.normalize();var T$K=T$r.normal.elements;T$K[0]=T$I-T$H,T$K[1]=T$e-T$N,T$K[2]=T$y-T$T,T$r.distance=T$z-T$P,T$r.normalize();var T$O=T$F.normal.elements;T$O[0]=T$I+T$H,T$O[1]=T$e+T$N,T$O[2]=T$y+T$T,T$F.distance=T$z+T$P,T$F.normalize()},T$H._get3PlaneInterPoint=function(T$$,T$b,T$u){var T$Z=T$$.normal,T$E=T$b.normal,T$r=T$u.normal;T$Fb.cross(T$E,T$r,T$H._tempV30),T$Fb.cross(T$r,T$Z,T$H._tempV31),T$Fb.cross(T$Z,T$E,T$H._tempV32);var T$F=T$Fb.dot(T$Z,T$H._tempV30),T$x=T$Fb.dot(T$E,T$H._tempV31),T$g=T$Fb.dot(T$r,T$H._tempV32);return T$Fb.scale(T$H._tempV30,-T$$.distance/T$F,T$H._tempV33),T$Fb.scale(T$H._tempV31,-T$b.distance/T$x,T$H._tempV34),T$Fb.scale(T$H._tempV32,-T$u.distance/T$g,T$H._tempV35),T$Fb.add(T$H._tempV33,T$H._tempV34,T$H._tempV36),T$Fb.add(T$H._tempV35,T$H._tempV36,T$H._tempV37),T$H._tempV37},T$I(T$H,["_tempV30",function(){return this._tempV30=new T$Fb},"_tempV31",function(){return this._tempV31=new T$Fb},"_tempV32",function(){return this._tempV32=new T$Fb},"_tempV33",function(){return this._tempV33=new T$Fb},"_tempV34",function(){return this._tempV34=new T$Fb},"_tempV35",function(){return this._tempV35=new T$Fb},"_tempV36",function(){return this._tempV36=new T$Fb},"_tempV37",function(){return this._tempV37=new T$Fb}]),T$H}(),T$U$=function(){function T$w(T$$,T$b){this.center=null,this.radius=NaN,this.center=T$$,this.radius=T$b}T$N(T$w,"laya.d3.math.BoundSphere");var T$$=T$w.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.toDefault=function(){this.center.toDefault(),this.radius=0},T$$.intersectsRayDistance=function(T$$){return Collision.intersectsRayAndSphereRD(T$$,this)},T$$.intersectsRayPoint=function(T$$,T$b){return Collision.intersectsRayAndSphereRP(T$$,this,T$b)},T$$.cloneTo=function(T$$){var T$b=T$$;this.center.cloneTo(T$b.center),T$b.radius=this.radius},T$$.clone=function(){var T$$=new this.constructor(new T$Fb,new T$Fb);return this.cloneTo(T$$),T$$},T$w.createFromSubPoints=function(T$$,T$b,T$u,T$Z){if(null==T$$)throw new Error("points");if(T$b<0||T$b>=T$$.length)throw new Error("start"+T$b+"Must be in the range [0, "+(T$$.length-1)+"]");if(T$u<0||T$b+T$u>T$$.length)throw new Error("count"+T$u+"Must be in the range <= "+T$$.length+"}");var T$E=T$b+T$u,T$r=T$w._tempVector3;T$r.elements[0]=0,T$r.elements[1]=0,T$r.elements[2]=0;for(var T$F=T$b;T$F<T$E;++T$F)T$Fb.add(T$$[T$F],T$r,T$r);var T$x=T$Z.center;T$Fb.scale(T$r,1/T$u,T$x);var T$g=0;for(T$F=T$b;T$F<T$E;++T$F){var T$H=T$Fb.distanceSquared(T$x,T$$[T$F]);T$g<T$H&&(T$g=T$H)}T$Z.radius=Math.sqrt(T$g)},T$w.createfromPoints=function(T$$,T$b){if(null==T$$)throw new Error("points");T$w.createFromSubPoints(T$$,0,T$$.length,T$b)},T$I(T$w,["_tempVector3",function(){return this._tempVector3=new T$Fb}]),T$w}(),T$B$=(function(){function T$$(){}T$N(T$$,"laya.d3.math.ContainmentType"),T$$.Disjoint=0,T$$.Contains=1,T$$.Intersects=2}(),function(){function T$u(){}return T$N(T$u,"laya.d3.math.MathUtils3D"),T$u.isZero=function(T$$){return Math.abs(T$$)<T$u.zeroTolerance},T$u.nearEqual=function(T$$,T$b){return!!T$u.isZero(T$$-T$b)},T$u.fastInvSqrt=function(T$$){return T$u.isZero(T$$)?T$$:1/Math.sqrt(T$$)},T$I(T$u,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),T$u}()),T$R$=function(){function T$g(){var T$$=this.elements=new Float32Array(9);T$$[0]=1,T$$[1]=0,T$$[2]=0,T$$[3]=0,T$$[4]=1,T$$[5]=0,T$$[6]=0,T$$[7]=0,T$$[8]=1}T$N(T$g,"laya.d3.math.Matrix3x3");var T$$=T$g.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.determinant=function(){var T$$=this.elements,T$b=T$$[0],T$u=T$$[1],T$Z=T$$[2],T$E=T$$[3],T$r=T$$[4],T$F=T$$[5],T$x=T$$[6],T$g=T$$[7],T$H=T$$[8];return T$b*(T$H*T$r-T$F*T$g)+T$u*(-T$H*T$E+T$F*T$x)+T$Z*(T$g*T$E-T$r*T$x)},T$$.translate=function(T$$,T$b){var T$u=T$b.elements,T$Z=this.elements,T$E=T$$.elements,T$r=T$Z[0],T$F=T$Z[1],T$x=T$Z[2],T$g=T$Z[3],T$H=T$Z[4],T$w=T$Z[5],T$I=T$Z[6],T$o=T$Z[7],T$N=T$Z[8],T$D=T$E[0],T$e=T$E[1];T$u[0]=T$r,T$u[1]=T$F,T$u[2]=T$x,T$u[3]=T$g,T$u[4]=T$H,T$u[5]=T$w,T$u[6]=T$D*T$r+T$e*T$g+T$I,T$u[7]=T$D*T$F+T$e*T$H+T$o,T$u[8]=T$D*T$x+T$e*T$w+T$N},T$$.rotate=function(T$$,T$b){var T$u=T$b.elements,T$Z=this.elements,T$E=T$Z[0],T$r=T$Z[1],T$F=T$Z[2],T$x=T$Z[3],T$g=T$Z[4],T$H=T$Z[5],T$w=T$Z[6],T$I=T$Z[7],T$o=T$Z[8],T$N=Math.sin(T$$),T$D=Math.cos(T$$);T$u[0]=T$D*T$E+T$N*T$x,T$u[1]=T$D*T$r+T$N*T$g,T$u[2]=T$D*T$F+T$N*T$H,T$u[3]=T$D*T$x-T$N*T$E,T$u[4]=T$D*T$g-T$N*T$r,T$u[5]=T$D*T$H-T$N*T$F,T$u[6]=T$w,T$u[7]=T$I,T$u[8]=T$o},T$$.scale=function(T$$,T$b){var T$u=T$b.elements,T$Z=this.elements,T$E=T$$.elements,T$r=T$E[0],T$F=T$E[1];T$u[0]=T$r*T$Z[0],T$u[1]=T$r*T$Z[1],T$u[2]=T$r*T$Z[2],T$u[3]=T$F*T$Z[3],T$u[4]=T$F*T$Z[4],T$u[5]=T$F*T$Z[5],T$u[6]=T$Z[6],T$u[7]=T$Z[7],T$u[8]=T$Z[8]},T$$.invert=function(T$$){var T$b=T$$.elements,T$u=this.elements,T$Z=T$u[0],T$E=T$u[1],T$r=T$u[2],T$F=T$u[3],T$x=T$u[4],T$g=T$u[5],T$H=T$u[6],T$w=T$u[7],T$I=T$u[8],T$o=T$I*T$x-T$g*T$w,T$N=-T$I*T$F+T$g*T$H,T$D=T$w*T$F-T$x*T$H,T$e=T$Z*T$o+T$E*T$N+T$r*T$D;T$e||(T$$=null),T$e=1/T$e,T$b[0]=T$o*T$e,T$b[1]=(-T$I*T$E+T$r*T$w)*T$e,T$b[2]=(T$g*T$E-T$r*T$x)*T$e,T$b[3]=T$N*T$e,T$b[4]=(T$I*T$Z-T$r*T$H)*T$e,T$b[5]=(-T$g*T$Z+T$r*T$F)*T$e,T$b[6]=T$D*T$e,T$b[7]=(-T$w*T$Z+T$E*T$H)*T$e,T$b[8]=(T$x*T$Z-T$E*T$F)*T$e},T$$.transpose=function(T$$){var T$b=T$$.elements,T$u=this.elements;if(T$$===this){var T$Z=T$u[1],T$E=T$u[2],T$r=T$u[5];T$b[1]=T$u[3],T$b[2]=T$u[6],T$b[3]=T$Z,T$b[5]=T$u[7],T$b[6]=T$E,T$b[7]=T$r}else T$b[0]=T$u[0],T$b[1]=T$u[3],T$b[2]=T$u[6],T$b[3]=T$u[1],T$b[4]=T$u[4],T$b[5]=T$u[7],T$b[6]=T$u[2],T$b[7]=T$u[5],T$b[8]=T$u[8]},T$$.identity=function(){var T$$=this.elements;T$$[0]=1,T$$[1]=0,T$$[2]=0,T$$[3]=0,T$$[4]=1,T$$[5]=0,T$$[6]=0,T$$[7]=0,T$$[8]=1},T$$.cloneTo=function(T$$){var T$b,T$u,T$Z;if((T$u=this.elements)!==(T$Z=T$$.elements))for(T$b=0;T$b<9;++T$b)T$Z[T$b]=T$u[T$b]},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$g.createFromTranslation=function(T$$,T$b){T$b.elements;var T$u=T$$.elements;T$b[0]=1,T$b[1]=0,T$b[2]=0,T$b[3]=0,T$b[4]=1,T$b[5]=0,T$b[6]=T$u[0],T$b[7]=T$u[1],T$b[8]=1},T$g.createFromRotation=function(T$$,T$b){var T$u=T$b.elements,T$Z=Math.sin(T$$),T$E=Math.cos(T$$);T$u[0]=T$E,T$u[1]=T$Z,T$u[2]=0,T$u[3]=-T$Z,T$u[4]=T$E,T$u[5]=0,T$u[6]=0,T$u[7]=0,T$u[8]=1},T$g.createFromScaling=function(T$$,T$b){var T$u=T$b.elements,T$Z=T$$.elements;T$u[0]=T$Z[0],T$u[1]=0,T$u[2]=0,T$u[3]=0,T$u[4]=T$Z[1],T$u[5]=0,T$u[6]=0,T$u[7]=0,T$u[8]=1},T$g.createFromMatrix4x4=function(T$$,T$b){T$b[0]=T$$[0],T$b[1]=T$$[1],T$b[2]=T$$[2],T$b[3]=T$$[4],T$b[4]=T$$[5],T$b[5]=T$$[6],T$b[6]=T$$[8],T$b[7]=T$$[9],T$b[8]=T$$[10]},T$g.multiply=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements,T$F=T$E[0],T$x=T$E[1],T$g=T$E[2],T$H=T$E[3],T$w=T$E[4],T$I=T$E[5],T$o=T$E[6],T$N=T$E[7],T$D=T$E[8],T$e=T$r[0],T$L=T$r[1],T$T=T$r[2],T$_=T$r[3],T$y=T$r[4],T$S=T$r[5],T$P=T$r[6],T$i=T$r[7],T$z=T$r[8];T$Z[0]=T$e*T$F+T$L*T$H+T$T*T$o,T$Z[1]=T$e*T$x+T$L*T$w+T$T*T$N,T$Z[2]=T$e*T$g+T$L*T$I+T$T*T$D,T$Z[3]=T$_*T$F+T$y*T$H+T$S*T$o,T$Z[4]=T$_*T$x+T$y*T$w+T$S*T$N,T$Z[5]=T$_*T$g+T$y*T$I+T$S*T$D,T$Z[6]=T$P*T$F+T$i*T$H+T$z*T$o,T$Z[7]=T$P*T$x+T$i*T$w+T$z*T$N,T$Z[8]=T$P*T$g+T$i*T$I+T$z*T$D},T$g.lookAt=function(T$$,T$b,T$u,T$Z){T$Fb.subtract(T$$,T$b,T$g._tempV30),T$Fb.normalize(T$g._tempV30,T$g._tempV30),T$Fb.cross(T$u,T$g._tempV30,T$g._tempV31),T$Fb.normalize(T$g._tempV31,T$g._tempV31),T$Fb.cross(T$g._tempV30,T$g._tempV31,T$g._tempV32);var T$E=T$g._tempV30.elements,T$r=T$g._tempV31.elements,T$F=T$g._tempV32.elements,T$x=T$Z.elements;T$x[0]=T$r[0],T$x[3]=T$r[1],T$x[6]=T$r[2],T$x[1]=T$F[0],T$x[4]=T$F[1],T$x[7]=T$F[2],T$x[2]=T$E[0],T$x[5]=T$E[1],T$x[8]=T$E[2]},T$g.DEFAULT=new T$g,T$I(T$g,["_tempV30",function(){return this._tempV30=new T$Fb},"_tempV31",function(){return this._tempV31=new T$Fb},"_tempV32",function(){return this._tempV32=new T$Fb}]),T$g}(),T$$b=function(){function T$a(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$I,T$o,T$N,T$D,T$e){void 0===T$$&&(T$$=1),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0),void 0===T$r&&(T$r=1),void 0===T$F&&(T$F=0),void 0===T$x&&(T$x=0),void 0===T$g&&(T$g=0),void 0===T$H&&(T$H=0),void 0===T$w&&(T$w=1),void 0===T$I&&(T$I=0),void 0===T$o&&(T$o=0),void 0===T$N&&(T$N=0),void 0===T$D&&(T$D=0),void 0===T$e&&(T$e=1);var T$L=this.elements=new Float32Array(16);T$L[0]=T$$,T$L[1]=T$b,T$L[2]=T$u,T$L[3]=T$Z,T$L[4]=T$E,T$L[5]=T$r,T$L[6]=T$F,T$L[7]=T$x,T$L[8]=T$g,T$L[9]=T$H,T$L[10]=T$w,T$L[11]=T$I,T$L[12]=T$o,T$L[13]=T$N,T$L[14]=T$D,T$L[15]=T$e}T$N(T$a,"laya.d3.math.Matrix4x4");var T$$=T$a.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.getElementByRowColumn=function(T$$,T$b){if(T$$<0||3<T$$)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(T$b<0||3<T$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*T$$+T$b]},T$$.setElementByRowColumn=function(T$$,T$b,T$u){if(T$$<0||3<T$$)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(T$b<0||3<T$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*T$$+T$b]=T$u},T$$.equalsOtherMatrix=function(T$$){var T$b=this.elements,T$u=T$$.elements;return T$B$.nearEqual(T$b[0],T$u[0])&&T$B$.nearEqual(T$b[1],T$u[1])&&T$B$.nearEqual(T$b[2],T$u[2])&&T$B$.nearEqual(T$b[3],T$u[3])&&T$B$.nearEqual(T$b[4],T$u[4])&&T$B$.nearEqual(T$b[5],T$u[5])&&T$B$.nearEqual(T$b[6],T$u[6])&&T$B$.nearEqual(T$b[7],T$u[7])&&T$B$.nearEqual(T$b[8],T$u[8])&&T$B$.nearEqual(T$b[9],T$u[9])&&T$B$.nearEqual(T$b[10],T$u[10])&&T$B$.nearEqual(T$b[11],T$u[11])&&T$B$.nearEqual(T$b[12],T$u[12])&&T$B$.nearEqual(T$b[13],T$u[13])&&T$B$.nearEqual(T$b[14],T$u[14])&&T$B$.nearEqual(T$b[15],T$u[15])},T$$.decomposeTransRotScale=function(T$$,T$b,T$u){var T$Z=T$a._tempMatrix4x4;return this.decomposeTransRotMatScale(T$$,T$Z,T$u)?(T$ub.createFromMatrix4x4(T$Z,T$b),!0):(T$b.identity(),!1)},T$$.decomposeTransRotMatScale=function(T$$,T$b,T$u){var T$Z=this.elements,T$E=T$$.elements,T$r=T$b.elements,T$F=T$u.elements;T$E[0]=T$Z[12],T$E[1]=T$Z[13],T$E[2]=T$Z[14];var T$x=T$Z[0],T$g=T$Z[1],T$H=T$Z[2],T$w=T$Z[4],T$I=T$Z[5],T$o=T$Z[6],T$N=T$Z[8],T$D=T$Z[9],T$e=T$Z[10],T$L=T$F[0]=Math.sqrt(T$x*T$x+T$g*T$g+T$H*T$H),T$T=T$F[1]=Math.sqrt(T$w*T$w+T$I*T$I+T$o*T$o),T$_=T$F[2]=Math.sqrt(T$N*T$N+T$D*T$D+T$e*T$e);if(T$B$.isZero(T$L)||T$B$.isZero(T$T)||T$B$.isZero(T$_))return T$r[1]=T$r[2]=T$r[3]=T$r[4]=T$r[6]=T$r[7]=T$r[8]=T$r[9]=T$r[11]=T$r[12]=T$r[13]=T$r[14]=0,T$r[0]=T$r[5]=T$r[10]=T$r[15]=1,!1;var T$y=T$a._tempVector0,T$S=T$y.elements;T$S[0]=T$N/T$_,T$S[1]=T$D/T$_,T$S[2]=T$e/T$_;var T$P=T$a._tempVector1,T$i=T$P.elements;T$i[0]=T$x/T$L,T$i[1]=T$g/T$L,T$i[2]=T$H/T$L;var T$z=T$a._tempVector2;T$Fb.cross(T$y,T$P,T$z);var T$q=T$a._tempVector1;return T$Fb.cross(T$z,T$y,T$q),T$r[3]=T$r[7]=T$r[11]=T$r[12]=T$r[13]=T$r[14]=0,T$r[15]=1,T$r[0]=T$q.x,T$r[1]=T$q.y,T$r[2]=T$q.z,T$r[4]=T$z.x,T$r[5]=T$z.y,T$r[6]=T$z.z,T$r[8]=T$y.x,T$r[9]=T$y.y,T$r[10]=T$y.z,T$r[0]*T$x+T$r[1]*T$g+T$r[2]*T$H<0&&(T$F[0]=-T$L),T$r[4]*T$w+T$r[5]*T$I+T$r[6]*T$o<0&&(T$F[1]=-T$T),T$r[8]*T$N+T$r[9]*T$D+T$r[10]*T$e<0&&(T$F[2]=-T$_),!0},T$$.decomposeYawPitchRoll=function(T$$){var T$b=T$$.elements,T$u=Math.asin(-this.elements[9]);T$b[1]=T$u,Math.cos(T$u)>T$B$.zeroTolerance?(T$b[2]=Math.atan2(this.elements[1],this.elements[5]),T$b[0]=Math.atan2(this.elements[8],this.elements[10])):(T$b[2]=Math.atan2(-this.elements[4],this.elements[0]),T$b[0]=0)},T$$.normalize=function(){var T$$=this.elements,T$b=T$$[0],T$u=T$$[1],T$Z=T$$[2],T$E=Math.sqrt(T$b*T$b+T$u*T$u+T$Z*T$Z);if(!T$E)return T$$[0]=0,T$$[1]=0,void(T$$[2]=0);1!=T$E&&(T$E=1/T$E,T$$[0]=T$b*T$E,T$$[1]=T$u*T$E,T$$[2]=T$Z*T$E)},T$$.transpose=function(){var T$$,T$b;return T$b=(T$$=this.elements)[1],T$$[1]=T$$[4],T$$[4]=T$b,T$b=T$$[2],T$$[2]=T$$[8],T$$[8]=T$b,T$b=T$$[3],T$$[3]=T$$[12],T$$[12]=T$b,T$b=T$$[6],T$$[6]=T$$[9],T$$[9]=T$b,T$b=T$$[7],T$$[7]=T$$[13],T$$[13]=T$b,T$b=T$$[11],T$$[11]=T$$[14],T$$[14]=T$b,this},T$$.invert=function(T$$){var T$b=this.elements,T$u=T$$.elements,T$Z=T$b[0],T$E=T$b[1],T$r=T$b[2],T$F=T$b[3],T$x=T$b[4],T$g=T$b[5],T$H=T$b[6],T$w=T$b[7],T$I=T$b[8],T$o=T$b[9],T$N=T$b[10],T$D=T$b[11],T$e=T$b[12],T$L=T$b[13],T$T=T$b[14],T$_=T$b[15],T$y=T$Z*T$g-T$E*T$x,T$S=T$Z*T$H-T$r*T$x,T$P=T$Z*T$w-T$F*T$x,T$i=T$E*T$H-T$r*T$g,T$z=T$E*T$w-T$F*T$g,T$q=T$r*T$w-T$F*T$H,T$a=T$I*T$L-T$o*T$e,T$t=T$I*T$T-T$N*T$e,T$C=T$I*T$_-T$D*T$e,T$K=T$o*T$T-T$N*T$L,T$O=T$o*T$_-T$D*T$L,T$V=T$N*T$_-T$D*T$T,T$v=T$y*T$V-T$S*T$O+T$P*T$K+T$i*T$C-T$z*T$t+T$q*T$a;0!==Math.abs(T$v)&&(T$v=1/T$v,T$u[0]=(T$g*T$V-T$H*T$O+T$w*T$K)*T$v,T$u[1]=(T$r*T$O-T$E*T$V-T$F*T$K)*T$v,T$u[2]=(T$L*T$q-T$T*T$z+T$_*T$i)*T$v,T$u[3]=(T$N*T$z-T$o*T$q-T$D*T$i)*T$v,T$u[4]=(T$H*T$C-T$x*T$V-T$w*T$t)*T$v,T$u[5]=(T$Z*T$V-T$r*T$C+T$F*T$t)*T$v,T$u[6]=(T$T*T$P-T$e*T$q-T$_*T$S)*T$v,T$u[7]=(T$I*T$q-T$N*T$P+T$D*T$S)*T$v,T$u[8]=(T$x*T$O-T$g*T$C+T$w*T$a)*T$v,T$u[9]=(T$E*T$C-T$Z*T$O-T$F*T$a)*T$v,T$u[10]=(T$e*T$z-T$L*T$P+T$_*T$y)*T$v,T$u[11]=(T$o*T$P-T$I*T$z-T$D*T$y)*T$v,T$u[12]=(T$g*T$t-T$x*T$K-T$H*T$a)*T$v,T$u[13]=(T$Z*T$K-T$E*T$t+T$r*T$a)*T$v,T$u[14]=(T$L*T$S-T$e*T$i-T$T*T$y)*T$v,T$u[15]=(T$I*T$i-T$o*T$S+T$N*T$y)*T$v)},T$$.identity=function(){var T$$=this.elements;T$$[1]=T$$[2]=T$$[3]=T$$[4]=T$$[6]=T$$[7]=T$$[8]=T$$[9]=T$$[11]=T$$[12]=T$$[13]=T$$[14]=0,T$$[0]=T$$[5]=T$$[10]=T$$[15]=1},T$$.cloneTo=function(T$$){var T$b,T$u,T$Z;if((T$u=this.elements)!==(T$Z=T$$.elements))for(T$b=0;T$b<16;++T$b)T$Z[T$b]=T$u[T$b]},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$$.getTranslationVector=function(T$$){var T$b=this.elements,T$u=T$$.elements;T$u[0]=T$b[12],T$u[1]=T$b[13],T$u[2]=T$b[14]},T$$.setTranslationVector=function(T$$){var T$b=this.elements,T$u=T$$.elements;T$b[12]=T$u[0],T$b[13]=T$u[1],T$b[14]=T$u[2]},T$$.getForward=function(T$$){var T$b=this.elements,T$u=T$$.elements;T$u[0]=-T$b[8],T$u[1]=-T$b[9],T$u[2]=-T$b[10]},T$$.setForward=function(T$$){var T$b=this.elements,T$u=T$$.elements;T$b[8]=-T$u[0],T$b[9]=-T$u[1],T$b[10]=-T$u[2]},T$a.createRotationX=function(T$$,T$b){var T$u=T$b.elements,T$Z=Math.sin(T$$),T$E=Math.cos(T$$);T$u[1]=T$u[2]=T$u[3]=T$u[4]=T$u[7]=T$u[8]=T$u[11]=T$u[12]=T$u[13]=T$u[14]=0,T$u[0]=T$u[15]=1,T$u[5]=T$u[10]=T$E,T$u[6]=T$Z,T$u[9]=-T$Z},T$a.createRotationY=function(T$$,T$b){var T$u=T$b.elements,T$Z=Math.sin(T$$),T$E=Math.cos(T$$);T$u[1]=T$u[3]=T$u[4]=T$u[6]=T$u[7]=T$u[9]=T$u[11]=T$u[12]=T$u[13]=T$u[14]=0,T$u[5]=T$u[15]=1,T$u[0]=T$u[10]=T$E,T$u[2]=-T$Z,T$u[8]=T$Z},T$a.createRotationZ=function(T$$,T$b){var T$u=T$b.elements,T$Z=Math.sin(T$$),T$E=Math.cos(T$$);T$u[2]=T$u[3]=T$u[6]=T$u[7]=T$u[8]=T$u[9]=T$u[11]=T$u[12]=T$u[13]=T$u[14]=0,T$u[10]=T$u[15]=1,T$u[0]=T$u[5]=T$E,T$u[1]=T$Z,T$u[4]=-T$Z},T$a.createRotationYawPitchRoll=function(T$$,T$b,T$u,T$Z){T$ub.createFromYawPitchRoll(T$$,T$b,T$u,T$a._tempQuaternion),T$a.createRotationQuaternion(T$a._tempQuaternion,T$Z)},T$a.createRotationAxis=function(T$$,T$b,T$u){var T$Z=T$$.elements,T$E=T$Z[0],T$r=T$Z[1],T$F=T$Z[2],T$x=Math.cos(T$b),T$g=Math.sin(T$b),T$H=T$E*T$E,T$w=T$r*T$r,T$I=T$F*T$F,T$o=T$E*T$r,T$N=T$E*T$F,T$D=T$r*T$F,T$e=T$u.elements;T$e[3]=T$e[7]=T$e[11]=T$e[12]=T$e[13]=T$e[14]=0,T$e[15]=1,T$e[0]=T$H+T$x*(1-T$H),T$e[1]=T$o-T$x*T$o+T$g*T$F,T$e[2]=T$N-T$x*T$N-T$g*T$r,T$e[4]=T$o-T$x*T$o-T$g*T$F,T$e[5]=T$w+T$x*(1-T$w),T$e[6]=T$D-T$x*T$D+T$g*T$E,T$e[8]=T$N-T$x*T$N+T$g*T$r,T$e[9]=T$D-T$x*T$D-T$g*T$E,T$e[10]=T$I+T$x*(1-T$I)},T$a.createRotationQuaternion=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements,T$E=T$u[0],T$r=T$u[1],T$F=T$u[2],T$x=T$u[3],T$g=T$E*T$E,T$H=T$r*T$r,T$w=T$F*T$F,T$I=T$E*T$r,T$o=T$F*T$x,T$N=T$F*T$E,T$D=T$r*T$x,T$e=T$r*T$F,T$L=T$E*T$x;T$Z[3]=T$Z[7]=T$Z[11]=T$Z[12]=T$Z[13]=T$Z[14]=0,T$Z[15]=1,T$Z[0]=1-2*(T$H+T$w),T$Z[1]=2*(T$I+T$o),T$Z[2]=2*(T$N-T$D),T$Z[4]=2*(T$I-T$o),T$Z[5]=1-2*(T$w+T$g),T$Z[6]=2*(T$e+T$L),T$Z[8]=2*(T$N+T$D),T$Z[9]=2*(T$e-T$L),T$Z[10]=1-2*(T$H+T$g)},T$a.createTranslate=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements;T$Z[4]=T$Z[8]=T$Z[1]=T$Z[9]=T$Z[2]=T$Z[6]=T$Z[3]=T$Z[7]=T$Z[11]=0,T$Z[0]=T$Z[5]=T$Z[10]=T$Z[15]=1,T$Z[12]=T$u[0],T$Z[13]=T$u[1],T$Z[14]=T$u[2]},T$a.createScaling=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements;T$Z[0]=T$u[0],T$Z[5]=T$u[1],T$Z[10]=T$u[2],T$Z[1]=T$Z[4]=T$Z[8]=T$Z[12]=T$Z[9]=T$Z[13]=T$Z[2]=T$Z[6]=T$Z[14]=T$Z[3]=T$Z[7]=T$Z[11]=0,T$Z[15]=1},T$a.multiply=function(T$$,T$b,T$u){var T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w;for(T$E=T$u.elements,T$r=T$$.elements,T$E===(T$F=T$b.elements)&&(T$F=T$F.slice()),T$Z=0;T$Z<4;T$Z++)T$x=T$r[T$Z],T$g=T$r[T$Z+4],T$H=T$r[T$Z+8],T$w=T$r[T$Z+12],T$E[T$Z]=T$x*T$F[0]+T$g*T$F[1]+T$H*T$F[2]+T$w*T$F[3],T$E[T$Z+4]=T$x*T$F[4]+T$g*T$F[5]+T$H*T$F[6]+T$w*T$F[7],T$E[T$Z+8]=T$x*T$F[8]+T$g*T$F[9]+T$H*T$F[10]+T$w*T$F[11],T$E[T$Z+12]=T$x*T$F[12]+T$g*T$F[13]+T$H*T$F[14]+T$w*T$F[15]},T$a.createFromQuaternion=function(T$$,T$b){var T$u=T$b.elements,T$Z=T$$.elements,T$E=T$Z[0],T$r=T$Z[1],T$F=T$Z[2],T$x=T$Z[3],T$g=T$E+T$E,T$H=T$r+T$r,T$w=T$F+T$F,T$I=T$E*T$g,T$o=T$r*T$g,T$N=T$r*T$H,T$D=T$F*T$g,T$e=T$F*T$H,T$L=T$F*T$w,T$T=T$x*T$g,T$_=T$x*T$H,T$y=T$x*T$w;T$u[0]=1-T$N-T$L,T$u[1]=T$o+T$y,T$u[2]=T$D-T$_,T$u[3]=0,T$u[4]=T$o-T$y,T$u[5]=1-T$I-T$L,T$u[6]=T$e+T$T,T$u[7]=0,T$u[8]=T$D+T$_,T$u[9]=T$e-T$T,T$u[10]=1-T$I-T$N,T$u[11]=0,T$u[12]=0,T$u[13]=0,T$u[14]=0,T$u[15]=1},T$a.createAffineTransformation=function(T$$,T$b,T$u,T$Z){var T$E=T$$.elements,T$r=T$b.elements,T$F=T$u.elements,T$x=T$Z.elements,T$g=T$r[0],T$H=T$r[1],T$w=T$r[2],T$I=T$r[3],T$o=T$g+T$g,T$N=T$H+T$H,T$D=T$w+T$w,T$e=T$g*T$o,T$L=T$g*T$N,T$T=T$g*T$D,T$_=T$H*T$N,T$y=T$H*T$D,T$S=T$w*T$D,T$P=T$I*T$o,T$i=T$I*T$N,T$z=T$I*T$D,T$q=T$F[0],T$a=T$F[1],T$t=T$F[2];T$x[0]=(1-(T$_+T$S))*T$q,T$x[1]=(T$L+T$z)*T$q,T$x[2]=(T$T-T$i)*T$q,T$x[3]=0,T$x[4]=(T$L-T$z)*T$a,T$x[5]=(1-(T$e+T$S))*T$a,T$x[6]=(T$y+T$P)*T$a,T$x[7]=0,T$x[8]=(T$T+T$i)*T$t,T$x[9]=(T$y-T$P)*T$t,T$x[10]=(1-(T$e+T$_))*T$t,T$x[11]=0,T$x[12]=T$E[0],T$x[13]=T$E[1],T$x[14]=T$E[2],T$x[15]=1},T$a.createLookAt=function(T$$,T$b,T$u,T$Z){var T$E=T$Z.elements,T$r=T$a._tempVector0,T$F=T$a._tempVector1,T$x=T$a._tempVector2;T$Fb.subtract(T$$,T$b,T$x),T$Fb.normalize(T$x,T$x),T$Fb.cross(T$u,T$x,T$r),T$Fb.normalize(T$r,T$r),T$Fb.cross(T$x,T$r,T$F),T$Z.identity(),T$E[0]=T$r.x,T$E[4]=T$r.y,T$E[8]=T$r.z,T$E[1]=T$F.x,T$E[5]=T$F.y,T$E[9]=T$F.z,T$E[2]=T$x.x,T$E[6]=T$x.y,T$E[10]=T$x.z,T$E[12]=-T$Fb.dot(T$r,T$$),T$E[13]=-T$Fb.dot(T$F,T$$),T$E[14]=-T$Fb.dot(T$x,T$$)},T$a.createPerspective=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$E.elements,T$F=1/Math.tan(T$$/2),T$x=1/(T$u-T$Z);T$r[0]=T$F/T$b,T$r[5]=T$F,T$r[10]=(T$Z+T$u)*T$x,T$r[11]=-1,T$r[14]=2*T$Z*T$u*T$x,T$r[1]=T$r[2]=T$r[3]=T$r[4]=T$r[6]=T$r[7]=T$r[8]=T$r[9]=T$r[12]=T$r[13]=T$r[15]=0},T$a.createOrthoOffCenterRH=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){var T$x=T$F.elements,T$g=1/(T$$-T$b),T$H=1/(T$u-T$Z),T$w=1/(T$E-T$r);T$x[1]=T$x[2]=T$x[3]=T$x[4]=T$x[6]=T$x[7]=T$x[8]=T$x[9]=T$x[11]=0,T$x[15]=1,T$x[0]=-2*T$g,T$x[5]=-2*T$H,T$x[10]=2*T$w,T$x[12]=(T$$+T$b)*T$g,T$x[13]=(T$Z+T$u)*T$H,T$x[14]=(T$r+T$E)*T$w},T$a.translation=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements;T$Z[0]=T$Z[5]=T$Z[10]=T$Z[15]=1,T$Z[12]=T$u[0],T$Z[13]=T$u[1],T$Z[14]=T$u[2]},T$I(T$a,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new T$a},"_tempVector0",function(){return this._tempVector0=new T$Fb},"_tempVector1",function(){return this._tempVector1=new T$Fb},"_tempVector2",function(){return this._tempVector2=new T$Fb},"_tempQuaternion",function(){return this._tempQuaternion=new T$ub},"DEFAULT",function(){return this.DEFAULT=new T$a},"ZERO",function(){return this.ZERO=new T$a(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),T$a}(),T$bb=(function(){function T$y(T$$,T$b){this.extents=null,this.transformation=null,this.extents=T$$,this.transformation=T$b}T$N(T$y,"laya.d3.math.OrientedBoundBox");var T$$=T$y.prototype;T$$.getCorners=function(T$$){var T$b=T$y._tempV30.elements,T$u=T$y._tempV31.elements,T$Z=T$y._tempV32.elements,T$E=this.extents.elements;T$b[0]=T$E[0],T$b[1]=T$b[2]=0,T$u[1]=T$E[1],T$u[0]=T$u[2]=0,T$Z[2]=T$E[2],T$Z[0]=T$Z[1]=0,T$Fb.TransformNormal(T$y._tempV30,this.transformation,T$y._tempV30),T$Fb.TransformNormal(T$y._tempV31,this.transformation,T$y._tempV31),T$Fb.TransformNormal(T$y._tempV32,this.transformation,T$y._tempV32);var T$r=T$y._tempV33;this.transformation.getTranslationVector(T$r),T$$.length=8,T$Fb.add(T$r,T$y._tempV30,T$y._tempV34),T$Fb.add(T$y._tempV34,T$y._tempV31,T$y._tempV34),T$Fb.add(T$y._tempV34,T$y._tempV32,T$$[0]),T$Fb.add(T$r,T$y._tempV30,T$y._tempV34),T$Fb.add(T$y._tempV34,T$y._tempV31,T$y._tempV34),T$Fb.subtract(T$y._tempV34,T$y._tempV32,T$$[1]),T$Fb.subtract(T$r,T$y._tempV30,T$y._tempV34),T$Fb.add(T$y._tempV34,T$y._tempV31,T$y._tempV34),T$Fb.subtract(T$y._tempV34,T$y._tempV32,T$$[2]),T$Fb.subtract(T$r,T$y._tempV30,T$y._tempV34),T$Fb.add(T$y._tempV34,T$y._tempV31,T$y._tempV34),T$Fb.add(T$y._tempV34,T$y._tempV32,T$$[3]),T$Fb.add(T$r,T$y._tempV30,T$y._tempV34),T$Fb.subtract(T$y._tempV34,T$y._tempV31,T$y._tempV34),T$Fb.add(T$y._tempV34,T$y._tempV32,T$$[4]),T$Fb.add(T$r,T$y._tempV30,T$y._tempV34),T$Fb.subtract(T$y._tempV34,T$y._tempV31,T$y._tempV34),T$Fb.subtract(T$y._tempV34,T$y._tempV32,T$$[5]),T$Fb.subtract(T$r,T$y._tempV30,T$y._tempV34),T$Fb.subtract(T$y._tempV34,T$y._tempV31,T$y._tempV34),T$Fb.subtract(T$y._tempV34,T$y._tempV32,T$$[6]),T$Fb.subtract(T$r,T$y._tempV30,T$y._tempV34),T$Fb.subtract(T$y._tempV34,T$y._tempV31,T$y._tempV34),T$Fb.add(T$y._tempV34,T$y._tempV32,T$$[7])},T$$.transform=function(T$$){T$$b.multiply(this.transformation,T$$,this.transformation)},T$$.scale=function(T$$){T$Fb.multiply(this.extents,T$$,this.extents)},T$$.translate=function(T$$){this.transformation.getTranslationVector(T$y._tempV30),T$Fb.add(T$y._tempV30,T$$,T$y._tempV31),this.transformation.setTranslationVector(T$y._tempV31)},T$$.Size=function(T$$){T$Fb.scale(this.extents,2,T$$)},T$$.getSize=function(T$$){var T$b=this.extents.elements;T$y._tempV30.x=T$b[0],T$y._tempV31.y=T$b[1],T$y._tempV32.z=T$b[2],T$Fb.TransformNormal(T$y._tempV30,this.transformation,T$y._tempV30),T$Fb.TransformNormal(T$y._tempV31,this.transformation,T$y._tempV31),T$Fb.TransformNormal(T$y._tempV31,this.transformation,T$y._tempV32);var T$u=T$$.elements;T$u[0]=T$Fb.scalarLength(T$y._tempV30),T$u[1]=T$Fb.scalarLength(T$y._tempV31),T$u[2]=T$Fb.scalarLength(T$y._tempV32)},T$$.getSizeSquared=function(T$$){var T$b=this.extents.elements;T$y._tempV30.x=T$b[0],T$y._tempV31.y=T$b[1],T$y._tempV32.z=T$b[2],T$Fb.TransformNormal(T$y._tempV30,this.transformation,T$y._tempV30),T$Fb.TransformNormal(T$y._tempV31,this.transformation,T$y._tempV31),T$Fb.TransformNormal(T$y._tempV31,this.transformation,T$y._tempV32);var T$u=T$$.elements;T$u[0]=T$Fb.scalarLengthSquared(T$y._tempV30),T$u[1]=T$Fb.scalarLengthSquared(T$y._tempV31),T$u[2]=T$Fb.scalarLengthSquared(T$y._tempV32)},T$$.getCenter=function(T$$){this.transformation.getTranslationVector(T$$)},T$$.containsPoint=function(T$$){var T$b=this.extents.elements,T$u=T$b[0],T$Z=T$b[1],T$E=T$b[2];this.transformation.invert(T$y._tempM0),T$Fb.transformCoordinate(T$$,T$y._tempM0,T$y._tempV30);var T$r=T$y._tempV30.elements,T$F=Math.abs(T$r[0]),T$x=Math.abs(T$r[1]),T$g=Math.abs(T$r[2]);return T$B$.nearEqual(T$F,T$u)&&T$B$.nearEqual(T$x,T$Z)&&T$B$.nearEqual(T$g,T$E)?2:T$F<T$u&&T$x<T$Z&&T$g<T$E?1:0},T$$.containsPoints=function(T$$){var T$b=this.extents.elements,T$u=T$b[0],T$Z=T$b[1],T$E=T$b[2];this.transformation.invert(T$y._tempM0);for(var T$r=!0,T$F=!1,T$x=0;T$x<T$$.length;T$x++){T$Fb.transformCoordinate(T$$[T$x],T$y._tempM0,T$y._tempV30);var T$g=T$y._tempV30.elements,T$H=Math.abs(T$g[0]),T$w=Math.abs(T$g[1]),T$I=Math.abs(T$g[2]);T$B$.nearEqual(T$H,T$u)&&T$B$.nearEqual(T$w,T$Z)&&T$B$.nearEqual(T$I,T$E)&&(T$F=!0),T$H<T$u&&T$w<T$Z&&T$I<T$E?T$F=!0:T$r=!1}return T$r?1:T$F?2:0},T$$.containsSphere=function(T$$,T$b){void 0===T$b&&(T$b=!1);var T$u=this.extents.elements,T$Z=T$u[0],T$E=T$u[1],T$r=T$u[2],T$F=T$$.radius;this.transformation.invert(T$y._tempM0),T$Fb.transformCoordinate(T$$.center,T$y._tempM0,T$y._tempV30);var T$x=NaN;if(T$x=T$b?T$F:(T$Fb.scale(T$Fb.UnitX,T$F,T$y._tempV31),T$Fb.TransformNormal(T$y._tempV31,T$y._tempM0,T$y._tempV31),T$Fb.scalarLength(T$y._tempV31)),T$Fb.scale(this.extents,-1,T$y._tempV32),T$Fb.Clamp(T$y._tempV30,T$y._tempV32,this.extents,T$y._tempV33),T$x*T$x<T$Fb.distanceSquared(T$y._tempV30,T$y._tempV33))return 0;var T$g=T$y._tempV30.elements,T$H=T$g[0],T$w=T$g[1],T$I=T$g[2],T$o=T$y._tempV32.elements,T$N=T$o[0],T$D=T$o[1],T$e=T$o[2];return T$N+T$x<=T$H&&T$H<=T$Z-T$x&&T$x<T$Z-T$N&&T$D+T$x<=T$w&&T$w<=T$E-T$x&&T$x<T$E-T$D&&T$e+T$x<=T$I&&T$I<=T$r-T$x&&T$x<T$r-T$e?1:2},T$$.containsOrientedBoundBox=function(T$$){var T$b=0,T$u=0;T$$.getCorners(T$y._corners);var T$Z=this.containsPoints(T$y._corners);if(0!=T$Z)return T$Z;var T$E=this.extents.elements;T$$.extents.cloneTo(T$y._tempV35);var T$r=T$y._tempV35.elements;T$y._getRows(this.transformation,T$y._rows1),T$y._getRows(T$$.transformation,T$y._rows2);var T$F=NaN;for(T$b=0;T$b<4;T$b++)for(T$u=0;T$u<4;T$u++)3==T$b||3==T$u?(T$y._tempM0.setElementByRowColumn(T$b,T$u,0),T$y._tempM1.setElementByRowColumn(T$b,T$u,0)):(T$F=T$Fb.dot(T$y._rows1[T$b],T$y._rows2[T$u]),T$y._tempM0.setElementByRowColumn(T$b,T$u,T$F),T$y._tempM1.setElementByRowColumn(T$b,T$u,Math.abs(T$F)));T$$.getCenter(T$y._tempV34),this.getCenter(T$y._tempV36),T$Fb.subtract(T$y._tempV34,T$y._tempV36,T$y._tempV30);var T$x=T$y._tempV31.elements;T$x[0]=T$Fb.dot(T$y._tempV30,T$y._rows1[0]),T$x[1]=T$Fb.dot(T$y._tempV30,T$y._rows1[1]),T$x[2]=T$Fb.dot(T$y._tempV30,T$y._rows1[2]);var T$g=T$y._tempV32.elements,T$H=T$y._tempV33.elements;for(T$b=0;T$b<3;T$b++)if(T$g[0]=T$y._tempM1.getElementByRowColumn(T$b,0),T$g[1]=T$y._tempM1.getElementByRowColumn(T$b,1),T$g[2]=T$y._tempM1.getElementByRowColumn(T$b,2),T$E[T$b]+T$Fb.dot(T$y._tempV35,T$y._tempV32)<Math.abs(T$x[T$b]))return 0;for(T$u=0;T$u<3;T$u++)if(T$g[0]=T$y._tempM1.getElementByRowColumn(0,T$u),T$g[1]=T$y._tempM1.getElementByRowColumn(1,T$u),T$g[2]=T$y._tempM1.getElementByRowColumn(2,T$u),T$H[0]=T$y._tempM0.getElementByRowColumn(0,T$u),T$H[1]=T$y._tempM0.getElementByRowColumn(1,T$u),T$H[2]=T$y._tempM0.getElementByRowColumn(2,T$u),T$Fb.dot(this.extents,T$y._tempV32)+T$r[T$u]<Math.abs(T$Fb.dot(T$y._tempV31,T$y._tempV33)))return 0;for(T$b=0;T$b<3;T$b++)for(T$u=0;T$u<3;T$u++){var T$w=(T$b+1)%3,T$I=(T$b+2)%3,T$o=(T$u+1)%3,T$N=(T$u+2)%3;if(T$E[T$w]*T$y._tempM1.getElementByRowColumn(T$I,T$u)+T$E[T$I]*T$y._tempM1.getElementByRowColumn(T$w,T$u)+(T$r[T$o]*T$y._tempM1.getElementByRowColumn(T$b,T$N)+T$r[T$N]*T$y._tempM1.getElementByRowColumn(T$b,T$o))<Math.abs(T$x[T$I]*T$y._tempM0.getElementByRowColumn(T$w,T$u)-T$x[T$w]*T$y._tempM0.getElementByRowColumn(T$I,T$u)))return 0}return 2},T$$.containsLine=function(T$$,T$b){T$y._corners[0]=T$$,T$y._corners[1]=T$b;var T$u=this.containsPoints(T$y._corners);if(0!=T$u)return T$u;var T$Z=this.extents.elements,T$E=T$Z[0],T$r=T$Z[1],T$F=T$Z[2];this.transformation.invert(T$y._tempM0),T$Fb.transformCoordinate(T$$,T$y._tempM0,T$y._tempV30),T$Fb.transformCoordinate(T$b,T$y._tempM0,T$y._tempV31),T$Fb.add(T$y._tempV30,T$y._tempV31,T$y._tempV32),T$Fb.scale(T$y._tempV32,.5,T$y._tempV32),T$Fb.subtract(T$y._tempV30,T$y._tempV32,T$y._tempV33);var T$x=T$y._tempV33.elements,T$g=T$x[0],T$H=T$x[1],T$w=T$x[2],T$I=T$y._tempV34.elements,T$o=T$I[0]=Math.abs(T$x[0]),T$N=T$I[1]=Math.abs(T$x[1]),T$D=T$I[2]=Math.abs(T$x[2]),T$e=T$y._tempV32.elements,T$L=T$e[0],T$T=T$e[1],T$_=T$e[2];return Math.abs(T$L)>T$E+T$o?0:Math.abs(T$T)>T$r+T$N?0:Math.abs(T$_)>T$F+T$D?0:Math.abs(T$T*T$w-T$_*T$H)>T$r*T$D+T$F*T$N?0:Math.abs(T$L*T$w-T$_*T$g)>T$E*T$D+T$F*T$o?0:Math.abs(T$L*T$H-T$T*T$g)>T$E*T$N+T$r*T$o?0:2},T$$.containsBoundBox=function(T$$){var T$b=0,T$u=0,T$Z=T$$.min,T$E=T$$.max;T$$.getCorners(T$y._corners);var T$r=this.containsPoints(T$y._corners);if(0!=T$r)return T$r;T$Fb.subtract(T$E,T$Z,T$y._tempV30),T$Fb.scale(T$y._tempV30,.5,T$y._tempV30),T$Fb.add(T$Z,T$y._tempV30,T$y._tempV30),T$Fb.subtract(T$E,T$y._tempV30,T$y._tempV31);var T$F=this.extents.elements,T$x=T$y._tempV31.elements;T$y._getRows(this.transformation,T$y._rows1),this.transformation.invert(T$y._tempM0);for(T$b=0;T$b<3;T$b++)for(T$u=0;T$u<3;T$u++)T$y._tempM1.setElementByRowColumn(T$b,T$u,Math.abs(T$y._tempM0.getElementByRowColumn(T$b,T$u)));this.getCenter(T$y._tempV35),T$Fb.subtract(T$y._tempV30,T$y._tempV35,T$y._tempV32);var T$g=T$y._tempV31.elements;T$g[0]=T$Fb.dot(T$y._tempV32,T$y._rows1[0]),T$g[1]=T$Fb.dot(T$y._tempV32,T$y._rows1[1]),T$g[2]=T$Fb.dot(T$y._tempV32,T$y._rows1[2]);var T$H=T$y._tempV33.elements,T$w=T$y._tempV34.elements;for(T$b=0;T$b<3;T$b++)if(T$H[0]=T$y._tempM1.getElementByRowColumn(T$b,0),T$H[1]=T$y._tempM1.getElementByRowColumn(T$b,1),T$H[2]=T$y._tempM1.getElementByRowColumn(T$b,2),T$F[T$b]+T$Fb.dot(T$y._tempV31,T$y._tempV33)<Math.abs(T$g[T$b]))return 0;for(T$u=0;T$u<3;T$u++)if(T$H[0]=T$y._tempM1.getElementByRowColumn(0,T$u),T$H[1]=T$y._tempM1.getElementByRowColumn(1,T$u),T$H[2]=T$y._tempM1.getElementByRowColumn(2,T$u),T$w[0]=T$y._tempM0.getElementByRowColumn(0,T$u),T$w[1]=T$y._tempM0.getElementByRowColumn(1,T$u),T$w[2]=T$y._tempM0.getElementByRowColumn(2,T$u),T$Fb.dot(this.extents,T$y._tempV33)+T$x[T$u]<Math.abs(T$Fb.dot(T$y._tempV31,T$y._tempV34)))return 0;for(T$b=0;T$b<3;T$b++)for(T$u=0;T$u<3;T$u++){var T$I=(T$b+1)%3,T$o=(T$b+2)%3,T$N=(T$u+1)%3,T$D=(T$u+2)%3;if(T$F[T$I]*T$y._tempM1.getElementByRowColumn(T$o,T$u)+T$F[T$o]*T$y._tempM1.getElementByRowColumn(T$I,T$u)+(T$x[T$N]*T$y._tempM1.getElementByRowColumn(T$b,T$D)+T$x[T$D]*T$y._tempM1.getElementByRowColumn(T$b,T$N))<Math.abs(T$g[T$o]*T$y._tempM0.getElementByRowColumn(T$I,T$u)-T$g[T$I]*T$y._tempM0.getElementByRowColumn(T$o,T$u)))return 0}return 2},T$$.intersectsRay=function(T$$,T$b){T$Fb.scale(this.extents,-1,T$y._tempV30),this.transformation.invert(T$y._tempM0),T$Fb.TransformNormal(T$$.direction,T$y._tempM0,T$y._ray.direction),T$Fb.transformCoordinate(T$$.origin,T$y._tempM0,T$y._ray.origin),T$y._boxBound1.min=T$y._tempV30,T$y._boxBound1.max=this.extents;var T$u=Collision.intersectsRayAndBoxRP(T$y._ray,T$y._boxBound1,T$b);return-1!==T$u&&T$Fb.transformCoordinate(T$b,this.transformation,T$b),T$u},T$$._getLocalCorners=function(T$$){T$$.length=8;var T$b=this.extents.elements;T$y._tempV30.x=T$b[0],T$y._tempV31.y=T$b[1],T$y._tempV32.z=T$b[2],T$Fb.add(T$y._tempV30,T$y._tempV31,T$y._tempV33),T$Fb.add(T$y._tempV33,T$y._tempV32,T$$[0]),T$Fb.add(T$y._tempV30,T$y._tempV31,T$y._tempV33),T$Fb.subtract(T$y._tempV33,T$y._tempV32,T$$[1]),T$Fb.subtract(T$y._tempV31,T$y._tempV30,T$y._tempV33),T$Fb.subtract(T$y._tempV33,T$y._tempV30,T$$[2]),T$Fb.subtract(T$y._tempV31,T$y._tempV30,T$y._tempV33),T$Fb.add(T$y._tempV33,T$y._tempV32,T$$[3]),T$Fb.subtract(T$y._tempV30,T$y._tempV31,T$y._tempV33),T$Fb.add(T$y._tempV33,T$y._tempV32,T$$[4]),T$Fb.subtract(T$y._tempV30,T$y._tempV31,T$y._tempV33),T$Fb.subtract(T$y._tempV33,T$y._tempV32,T$$[5]),T$Fb.scale(T$$[0],-1,T$$[6]),T$Fb.subtract(T$y._tempV32,T$y._tempV30,T$y._tempV33),T$Fb.subtract(T$y._tempV33,T$y._tempV31,T$$[7])},T$$.equals=function(T$$){return this.extents==T$$.extents&&this.transformation==T$$.transformation},T$$.cloneTo=function(T$$){var T$b=T$$;this.extents.cloneTo(T$b.extents),this.transformation.cloneTo(T$b.transformation)},T$y.createByBoundBox=function(T$$,T$b){var T$u=T$$.min,T$Z=T$$.max;T$Fb.subtract(T$Z,T$u,T$y._tempV30),T$Fb.scale(T$y._tempV30,.5,T$y._tempV30),T$Fb.add(T$u,T$y._tempV30,T$y._tempV31),T$Fb.subtract(T$Z,T$y._tempV31,T$y._tempV32),T$$b.translation(T$y._tempV31,T$y._tempM0);var T$E=T$y._tempV32.clone(),T$r=T$y._tempM0.clone();T$b.extents=T$E,T$b.transformation=T$r},T$y.createByMinAndMaxVertex=function(T$$,T$b){return T$Fb.subtract(T$b,T$$,T$y._tempV30),T$Fb.scale(T$y._tempV30,.5,T$y._tempV30),T$Fb.add(T$$,T$y._tempV30,T$y._tempV31),T$Fb.subtract(T$b,T$y._tempV31,T$y._tempV32),T$$b.translation(T$y._tempV31,T$y._tempM0),new T$y(T$y._tempV32,T$y._tempM0)},T$y._getRows=function(T$$,T$b){T$b.length=3;var T$u=T$$.elements,T$Z=T$b[0].elements;T$Z[0]=T$u[0],T$Z[1]=T$u[1],T$Z[2]=T$u[2];var T$E=T$b[1].elements;T$E[0]=T$u[4],T$E[1]=T$u[5],T$E[2]=T$u[6];var T$r=T$b[2].elements;T$r[0]=T$u[8],T$r[1]=T$u[9],T$r[2]=T$u[10]},T$y.getObbtoObbMatrix4x4=function(T$$,T$b,T$u,T$Z){var T$E=T$$.transformation,T$r=T$b.transformation;if(T$u){T$y._getRows(T$E,T$y._rows1),T$y._getRows(T$r,T$y._rows2);for(var T$F=0;T$F<3;T$F++)for(var T$x=0;T$x<3;T$x++)T$Z.setElementByRowColumn(T$F,T$x,T$Fb.dot(T$y._rows2[T$F],T$y._rows1[T$x]));T$b.getCenter(T$y._tempV30),T$$.getCenter(T$y._tempV31),T$Fb.subtract(T$y._tempV30,T$y._tempV31,T$y._tempV32);var T$g=T$Z.elements;T$g[12]=T$Fb.dot(T$y._tempV32,T$y._rows1[0]),T$g[13]=T$Fb.dot(T$y._tempV32,T$y._rows1[1]),T$g[14]=T$Fb.dot(T$y._tempV32,T$y._rows1[2]),T$g[15]=1}else T$E.invert(T$y._tempM0),T$$b.multiply(T$r,T$y._tempM0,T$Z)},T$y.merge=function(T$$,T$b,T$u){var T$Z=T$$.extents,T$E=T$$.transformation;T$y.getObbtoObbMatrix4x4(T$$,T$b,T$u,T$y._tempM0),T$b._getLocalCorners(T$y._corners),T$Fb.transformCoordinate(T$y._corners[0],T$y._tempM0,T$y._corners[0]),T$Fb.transformCoordinate(T$y._corners[1],T$y._tempM0,T$y._corners[1]),T$Fb.transformCoordinate(T$y._corners[2],T$y._tempM0,T$y._corners[2]),T$Fb.transformCoordinate(T$y._corners[3],T$y._tempM0,T$y._corners[3]),T$Fb.transformCoordinate(T$y._corners[4],T$y._tempM0,T$y._corners[4]),T$Fb.transformCoordinate(T$y._corners[5],T$y._tempM0,T$y._corners[5]),T$Fb.transformCoordinate(T$y._corners[6],T$y._tempM0,T$y._corners[6]),T$Fb.transformCoordinate(T$y._corners[7],T$y._tempM0,T$y._corners[7]),T$Fb.scale(T$Z,-1,T$y._boxBound1.min),T$Z.cloneTo(T$y._boxBound1.max),T$h$.createfromPoints(T$y._corners,T$y._boxBound2),T$h$.merge(T$y._boxBound2,T$y._boxBound1,T$y._boxBound3);var T$r=T$y._boxBound3.min,T$F=T$y._boxBound3.max;T$Fb.subtract(T$F,T$r,T$y._tempV30),T$Fb.scale(T$y._tempV30,.5,T$y._tempV30),T$Fb.add(T$r,T$y._tempV30,T$y._tempV32),T$Fb.subtract(T$F,T$y._tempV32,T$Z),T$Fb.transformCoordinate(T$y._tempV32,T$E,T$y._tempV33)},T$I(T$y,["_tempV30",function(){return this._tempV30=new T$Fb},"_tempV31",function(){return this._tempV31=new T$Fb},"_tempV32",function(){return this._tempV32=new T$Fb},"_tempV33",function(){return this._tempV33=new T$Fb},"_tempV34",function(){return this._tempV34=new T$Fb},"_tempV35",function(){return this._tempV35=new T$Fb},"_tempV36",function(){return this._tempV36=new T$Fb},"_tempM0",function(){return this._tempM0=new T$$b},"_tempM1",function(){return this._tempM1=new T$$b},"_corners",function(){return this._corners=[new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb]},"_rows1",function(){return this._rows1=[new T$Fb,new T$Fb,new T$Fb]},"_rows2",function(){return this._rows2=[new T$Fb,new T$Fb,new T$Fb]},"_ray",function(){return this._ray=new T$Eb(new T$Fb,new T$Fb)},"_boxBound1",function(){return this._boxBound1=new T$h$(new T$Fb,new T$Fb)},"_boxBound2",function(){return this._boxBound2=new T$h$(new T$Fb,new T$Fb)},"_boxBound3",function(){return this._boxBound3=new T$h$(new T$Fb,new T$Fb)}])}(),function(){function T$P(T$$,T$b){this.normal=null,this.distance=NaN,void 0===T$b&&(T$b=0),this.normal=T$$,this.distance=T$b}return T$N(T$P,"laya.d3.math.Plane"),T$P.prototype.normalize=function(){var T$$=this.normal.elements,T$b=T$$[0],T$u=T$$[1],T$Z=T$$[2],T$E=1/Math.sqrt(T$b*T$b+T$u*T$u+T$Z*T$Z);T$$[0]=T$b*T$E,T$$[1]=T$u*T$E,T$$[2]=T$Z*T$E,this.distance*=T$E},T$P.createPlaneBy3P=function(T$$,T$b,T$u){var T$Z=T$$.elements,T$E=T$b.elements,T$r=T$u.elements,T$F=T$E[0]-T$Z[0],T$x=T$E[1]-T$Z[1],T$g=T$E[2]-T$Z[2],T$H=T$r[0]-T$Z[0],T$w=T$r[1]-T$Z[1],T$I=T$r[2]-T$Z[2],T$o=T$x*T$I-T$g*T$w,T$N=T$g*T$H-T$F*T$I,T$D=T$F*T$w-T$x*T$H,T$e=1/Math.sqrt(T$o*T$o+T$N*T$N+T$D*T$D),T$L=T$o*T$e,T$T=T$N*T$e,T$_=T$D*T$e,T$y=T$P._TEMPVec3.elements;T$y[0]=T$L,T$y[1]=T$T,T$y[2]=T$_;var T$S=-(T$L*T$Z[0]+T$T*T$Z[1]+T$_*T$Z[2]);return new T$P(T$P._TEMPVec3,T$S)},T$P.PlaneIntersectionType_Back=0,T$P.PlaneIntersectionType_Front=1,T$P.PlaneIntersectionType_Intersecting=2,T$I(T$P,["_TEMPVec3",function(){return this._TEMPVec3=new T$Fb}]),T$P}()),T$ub=function(){function T$E(T$$,T$b,T$u,T$Z){this.elements=new Float32Array(4),void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=1),this.elements[0]=T$$,this.elements[1]=T$b,this.elements[2]=T$u,this.elements[3]=T$Z}T$N(T$E,"laya.d3.math.Quaternion");var T$$=T$E.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.scaling=function(T$$,T$b){var T$u=T$b.elements,T$Z=this.elements;T$u[0]=T$Z[0]*T$$,T$u[1]=T$Z[1]*T$$,T$u[2]=T$Z[2]*T$$,T$u[3]=T$Z[3]*T$$},T$$.normalize=function(T$$){var T$b=T$$.elements,T$u=this.elements,T$Z=T$u[0],T$E=T$u[1],T$r=T$u[2],T$F=T$u[3],T$x=T$Z*T$Z+T$E*T$E+T$r*T$r+T$F*T$F;0<T$x&&(T$x=1/Math.sqrt(T$x),T$b[0]=T$Z*T$x,T$b[1]=T$E*T$x,T$b[2]=T$r*T$x,T$b[3]=T$F*T$x)},T$$.length=function(){var T$$=this.elements,T$b=T$$[0],T$u=T$$[1],T$Z=T$$[2],T$E=T$$[3];return Math.sqrt(T$b*T$b+T$u*T$u+T$Z*T$Z+T$E*T$E)},T$$.rotateX=function(T$$,T$b){var T$u=T$b.elements,T$Z=this.elements;T$$*=.5;var T$E=T$Z[0],T$r=T$Z[1],T$F=T$Z[2],T$x=T$Z[3],T$g=Math.sin(T$$),T$H=Math.cos(T$$);T$u[0]=T$E*T$H+T$x*T$g,T$u[1]=T$r*T$H+T$F*T$g,T$u[2]=T$F*T$H-T$r*T$g,T$u[3]=T$x*T$H-T$E*T$g},T$$.rotateY=function(T$$,T$b){var T$u=T$b.elements,T$Z=this.elements;T$$*=.5;var T$E=T$Z[0],T$r=T$Z[1],T$F=T$Z[2],T$x=T$Z[3],T$g=Math.sin(T$$),T$H=Math.cos(T$$);T$u[0]=T$E*T$H-T$F*T$g,T$u[1]=T$r*T$H+T$x*T$g,T$u[2]=T$F*T$H+T$E*T$g,T$u[3]=T$x*T$H-T$r*T$g},T$$.rotateZ=function(T$$,T$b){var T$u=T$b.elements,T$Z=this.elements;T$$*=.5;var T$E=T$Z[0],T$r=T$Z[1],T$F=T$Z[2],T$x=T$Z[3],T$g=Math.sin(T$$),T$H=Math.cos(T$$);T$u[0]=T$E*T$H+T$r*T$g,T$u[1]=T$r*T$H-T$E*T$g,T$u[2]=T$F*T$H+T$x*T$g,T$u[3]=T$x*T$H-T$F*T$g},T$$.getYawPitchRoll=function(T$$){T$Fb.transformQuat(T$Fb.ForwardRH,this,T$E.TEMPVector31),T$Fb.transformQuat(T$Fb.Up,this,T$E.TEMPVector32);var T$b=T$E.TEMPVector32.elements;T$E.angleTo(T$Fb.ZERO,T$E.TEMPVector31,T$E.TEMPVector33);var T$u=T$E.TEMPVector33.elements;T$u[0]==Math.PI/2?(T$u[1]=T$E.arcTanAngle(T$b[2],T$b[0]),T$u[2]=0):T$u[0]==-Math.PI/2?(T$u[1]=T$E.arcTanAngle(-T$b[2],-T$b[0]),T$u[2]=0):(T$$b.createRotationY(-T$u[1],T$E.TEMPMatrix0),T$$b.createRotationX(-T$u[0],T$E.TEMPMatrix1),T$Fb.transformCoordinate(T$E.TEMPVector32,T$E.TEMPMatrix0,T$E.TEMPVector32),T$Fb.transformCoordinate(T$E.TEMPVector32,T$E.TEMPMatrix1,T$E.TEMPVector32),T$u[2]=T$E.arcTanAngle(T$b[1],-T$b[0])),T$u[1]<=-Math.PI&&(T$u[1]=Math.PI),T$u[2]<=-Math.PI&&(T$u[2]=Math.PI),T$u[1]>=Math.PI&&T$u[2]>=Math.PI&&(T$u[1]=0,T$u[2]=0,T$u[0]=Math.PI-T$u[0]);var T$Z=T$$.elements;T$Z[0]=T$u[1],T$Z[1]=T$u[0],T$Z[2]=T$u[2]},T$$.invert=function(T$$){var T$b=T$$.elements,T$u=this.elements,T$Z=T$u[0],T$E=T$u[1],T$r=T$u[2],T$F=T$u[3],T$x=T$Z*T$Z+T$E*T$E+T$r*T$r+T$F*T$F,T$g=T$x?1/T$x:0;T$b[0]=-T$Z*T$g,T$b[1]=-T$E*T$g,T$b[2]=-T$r*T$g,T$b[3]=T$F*T$g},T$$.identity=function(){var T$$=this.elements;T$$[0]=0,T$$[1]=0,T$$[2]=0,T$$[3]=1},T$$.fromArray=function(T$$,T$b){void 0===T$b&&(T$b=0),this.elements[0]=T$$[T$b+0],this.elements[1]=T$$[T$b+1],this.elements[2]=T$$[T$b+2],this.elements[3]=T$$[T$b+3]},T$$.cloneTo=function(T$$){var T$b,T$u,T$Z;if((T$u=this.elements)!==(T$Z=T$$.elements))for(T$b=0;T$b<4;++T$b)T$Z[T$b]=T$u[T$b]},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$$.equals=function(T$$){var T$b=this.elements,T$u=T$$.elements;return T$B$.nearEqual(T$b[0],T$u[0])&&T$B$.nearEqual(T$b[1],T$u[1])&&T$B$.nearEqual(T$b[2],T$u[2])&&T$B$.nearEqual(T$b[3],T$u[3])},T$$.lengthSquared=function(){var T$$=this.elements[0],T$b=this.elements[1],T$u=this.elements[2],T$Z=this.elements[3];return T$$*T$$+T$b*T$b+T$u*T$u+T$Z*T$Z},T$D(0,T$$,"x",function(){return this.elements[0]}),T$D(0,T$$,"y",function(){return this.elements[1]}),T$D(0,T$$,"z",function(){return this.elements[2]}),T$D(0,T$$,"w",function(){return this.elements[3]}),T$E.createFromYawPitchRoll=function(T$$,T$b,T$u,T$Z){var T$E=.5*T$u,T$r=.5*T$b,T$F=.5*T$$,T$x=Math.sin(T$E),T$g=Math.cos(T$E),T$H=Math.sin(T$r),T$w=Math.cos(T$r),T$I=Math.sin(T$F),T$o=Math.cos(T$F),T$N=T$Z.elements;T$N[0]=T$o*T$H*T$g+T$I*T$w*T$x,T$N[1]=T$I*T$w*T$g-T$o*T$H*T$x,T$N[2]=T$o*T$w*T$x-T$I*T$H*T$g,T$N[3]=T$o*T$w*T$g+T$I*T$H*T$x},T$E.multiply=function(T$$,T$b,T$u){var T$Z=T$$.elements,T$E=T$b.elements,T$r=T$u.elements,T$F=T$Z[0],T$x=T$Z[1],T$g=T$Z[2],T$H=T$Z[3],T$w=T$E[0],T$I=T$E[1],T$o=T$E[2],T$N=T$E[3],T$D=T$x*T$o-T$g*T$I,T$e=T$g*T$w-T$F*T$o,T$L=T$F*T$I-T$x*T$w,T$T=T$F*T$w+T$x*T$I+T$g*T$o;T$r[0]=T$F*T$N+T$w*T$H+T$D,T$r[1]=T$x*T$N+T$I*T$H+T$e,T$r[2]=T$g*T$N+T$o*T$H+T$L,T$r[3]=T$H*T$N-T$T},T$E.arcTanAngle=function(T$$,T$b){return 0==T$$?1==T$b?Math.PI/2:-Math.PI/2:0<T$$?Math.atan(T$b/T$$):T$$<0?0<T$b?Math.atan(T$b/T$$)+Math.PI:Math.atan(T$b/T$$)-Math.PI:0},T$E.angleTo=function(T$$,T$b,T$u){T$Fb.subtract(T$b,T$$,T$E.TEMPVector30),T$Fb.normalize(T$E.TEMPVector30,T$E.TEMPVector30),T$u.elements[0]=Math.asin(T$E.TEMPVector30.y),T$u.elements[1]=T$E.arcTanAngle(-T$E.TEMPVector30.z,-T$E.TEMPVector30.x)},T$E.createFromAxisAngle=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements;T$b*=.5;var T$r=Math.sin(T$b);T$Z[0]=T$r*T$E[0],T$Z[1]=T$r*T$E[1],T$Z[2]=T$r*T$E[2],T$Z[3]=Math.cos(T$b)},T$E.createFromMatrix3x3=function(T$$,T$b){var T$u,T$Z=T$b.elements,T$E=T$$.elements,T$r=T$E[0]+T$E[4]+T$E[8];if(0<T$r)T$u=Math.sqrt(T$r+1),T$Z[3]=.5*T$u,T$u=.5/T$u,T$Z[0]=(T$E[5]-T$E[7])*T$u,T$Z[1]=(T$E[6]-T$E[2])*T$u,T$Z[2]=(T$E[1]-T$E[3])*T$u;else{var T$F=0;T$E[4]>T$E[0]&&(T$F=1),T$E[8]>T$E[3*T$F+T$F]&&(T$F=2);var T$x=(T$F+1)%3,T$g=(T$F+2)%3;T$u=Math.sqrt(T$E[3*T$F+T$F]-T$E[3*T$x+T$x]-T$E[3*T$g+T$g]+1),T$Z[T$F]=.5*T$u,T$u=.5/T$u,T$Z[3]=(T$E[3*T$x+T$g]-T$E[3*T$g+T$x])*T$u,T$Z[T$x]=(T$E[3*T$x+T$F]+T$E[3*T$F+T$x])*T$u,T$Z[T$g]=(T$E[3*T$g+T$F]+T$E[3*T$F+T$g])*T$u}},T$E.createFromMatrix4x4=function(T$$,T$b){var T$u,T$Z,T$E=T$$.elements,T$r=T$b.elements,T$F=T$E[0]+T$E[5]+T$E[10];0<T$F?(T$u=Math.sqrt(T$F+1),T$r[3]=.5*T$u,T$u=.5/T$u,T$r[0]=(T$E[6]-T$E[9])*T$u,T$r[1]=(T$E[8]-T$E[2])*T$u,T$r[2]=(T$E[1]-T$E[4])*T$u):T$E[0]>=T$E[5]&&T$E[0]>=T$E[10]?(T$Z=.5/(T$u=Math.sqrt(1+T$E[0]-T$E[5]-T$E[10])),T$r[0]=.5*T$u,T$r[1]=(T$E[1]+T$E[4])*T$Z,T$r[2]=(T$E[2]+T$E[8])*T$Z,T$r[3]=(T$E[6]-T$E[9])*T$Z):T$E[5]>T$E[10]?(T$Z=.5/(T$u=Math.sqrt(1+T$E[5]-T$E[0]-T$E[10])),T$r[0]=(T$E[4]+T$E[1])*T$Z,T$r[1]=.5*T$u,T$r[2]=(T$E[9]+T$E[6])*T$Z,T$r[3]=(T$E[8]-T$E[2])*T$Z):(T$Z=.5/(T$u=Math.sqrt(1+T$E[10]-T$E[0]-T$E[5])),T$r[0]=(T$E[8]+T$E[2])*T$Z,T$r[1]=(T$E[9]+T$E[6])*T$Z,T$r[2]=.5*T$u,T$r[3]=(T$E[1]-T$E[4])*T$Z)},T$E.slerp=function(T$$,T$b,T$u,T$Z){var T$E,T$r,T$F,T$x,T$g,T$H=T$$.elements,T$w=T$b.elements,T$I=T$Z.elements,T$o=T$H[0],T$N=T$H[1],T$D=T$H[2],T$e=T$H[3],T$L=T$w[0],T$T=T$w[1],T$_=T$w[2],T$y=T$w[3];return(T$r=T$o*T$L+T$N*T$T+T$D*T$_+T$e*T$y)<0&&(T$r=-T$r,T$L=-T$L,T$T=-T$T,T$_=-T$_,T$y=-T$y),T$g=1e-6<1-T$r?(T$E=Math.acos(T$r),T$F=Math.sin(T$E),T$x=Math.sin((1-T$u)*T$E)/T$F,Math.sin(T$u*T$E)/T$F):(T$x=1-T$u,T$u),T$I[0]=T$x*T$o+T$g*T$L,T$I[1]=T$x*T$N+T$g*T$T,T$I[2]=T$x*T$D+T$g*T$_,T$I[3]=T$x*T$e+T$g*T$y,T$I},T$E.lerp=function(T$$,T$b,T$u,T$Z){var T$E=T$Z.elements,T$r=T$$.elements,T$F=T$b.elements,T$x=T$r[0],T$g=T$r[1],T$H=T$r[2],T$w=T$r[3];T$E[0]=T$x+T$u*(T$F[0]-T$x),T$E[1]=T$g+T$u*(T$F[1]-T$g),T$E[2]=T$H+T$u*(T$F[2]-T$H),T$E[3]=T$w+T$u*(T$F[3]-T$w)},T$E.add=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=T$E[0]+T$r[0],T$Z[1]=T$E[1]+T$r[1],T$Z[2]=T$E[2]+T$r[2],T$Z[3]=T$E[3]+T$r[3]},T$E.dot=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements;return T$u[0]*T$Z[0]+T$u[1]*T$Z[1]+T$u[2]*T$Z[2]+T$u[3]*T$Z[3]},T$E.rotationLookAt=function(T$$,T$b,T$u){T$E.lookAt(T$Fb.ZERO,T$$,T$b,T$u)},T$E.lookAt=function(T$$,T$b,T$u,T$Z){T$R$.lookAt(T$$,T$b,T$u,T$E._tempMatrix3x3),T$E.rotationMatrix(T$E._tempMatrix3x3,T$Z)},T$E.invert=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements,T$E=T$$.lengthSquared();T$B$.isZero(T$E)||(T$E=1/T$E,T$Z[0]=-T$u[0]*T$E,T$Z[1]=-T$u[1]*T$E,T$Z[2]=-T$u[2]*T$E,T$Z[3]=T$u[3]*T$E)},T$E.rotationMatrix=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$u[0],T$E=T$u[1],T$r=T$u[2],T$F=T$u[3],T$x=T$u[4],T$g=T$u[5],T$H=T$u[6],T$w=T$u[7],T$I=T$u[8],T$o=T$b.elements,T$N=NaN,T$D=NaN,T$e=T$Z+T$x+T$I;0<T$e?(T$N=Math.sqrt(T$e+1),T$o[3]=.5*T$N,T$N=.5/T$N,T$o[0]=(T$g-T$w)*T$N,T$o[1]=(T$H-T$r)*T$N,T$o[2]=(T$E-T$F)*T$N):T$x<=T$Z&&T$I<=T$Z?(T$D=.5/(T$N=Math.sqrt(1+T$Z-T$x-T$I)),T$o[0]=.5*T$N,T$o[1]=(T$E+T$F)*T$D,T$o[2]=(T$r+T$H)*T$D,T$o[3]=(T$g-T$w)*T$D):T$I<T$x?(T$D=.5/(T$N=Math.sqrt(1+T$x-T$Z-T$I)),T$o[0]=(T$F+T$E)*T$D,T$o[1]=.5*T$N,T$o[2]=(T$w+T$g)*T$D,T$o[3]=(T$H-T$r)*T$D):(T$D=.5/(T$N=Math.sqrt(1+T$I-T$Z-T$x)),T$o[0]=(T$H+T$r)*T$D,T$o[1]=(T$w+T$g)*T$D,T$o[2]=.5*T$N,T$o[3]=(T$E-T$F)*T$D)},T$E.DEFAULT=new T$E,T$I(T$E,["TEMPVector30",function(){return this.TEMPVector30=new T$Fb},"TEMPVector31",function(){return this.TEMPVector31=new T$Fb},"TEMPVector32",function(){return this.TEMPVector32=new T$Fb},"TEMPVector33",function(){return this.TEMPVector33=new T$Fb},"TEMPMatrix0",function(){return this.TEMPMatrix0=new T$$b},"TEMPMatrix1",function(){return this.TEMPMatrix1=new T$$b},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new T$R$},"NAN",function(){return this.NAN=new T$E(NaN,NaN,NaN,NaN)}]),T$E}(),T$Zb=function(){function T$$(T$$){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=T$$,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}T$N(T$$,"laya.d3.math.Rand");var T$b=T$$.prototype;return T$b.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},T$b.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},T$b.getSignedFloat=function(){return 2*this.getFloat()-1},T$D(0,T$b,"seed",function(){return this.seeds[0]},function(T$$){this.seeds[0]=T$$,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),T$$.getFloatFromInt=function(T$$){return 1/8388607*(8388607&T$$)},T$$.getByteFromInt=function(T$$){return(8388607&T$$)>>>15},T$$}(),T$Eb=(function(){function T$E(T$$){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(T$$ instanceof Array)||4!==T$$.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|T$$[0],this._state0L=0|T$$[1],this._state1U=0|T$$[2],this._state1L=0|T$$[3]}T$N(T$E,"laya.d3.math.RandX");var T$$=T$E.prototype;T$$.randomint=function(){var T$$=this._state0U,T$b=this._state0L,T$u=this._state1U,T$Z=this._state1L,T$E=(T$Z>>>0)+(T$b>>>0),T$r=T$u+T$$+(T$E/2>>>31)>>>0,T$F=T$E>>>0,T$x=0,T$g=0;T$x=(T$$^=T$x=T$$<<23|(-512&T$b)>>>9)^(this._state0U=T$u),T$g=(T$b^=T$g=T$b<<23)^(this._state0L=T$Z);T$x^=T$$>>>18,T$g^=T$b>>>18|(262143&T$$)<<14;return T$x^=T$u>>>5,T$g^=T$Z>>>5|(31&T$u)<<27,this._state1U=T$x,this._state1L=T$g,[T$r,T$F]},T$$.random=function(){var T$$=this.randomint(),T$b=T$$[0],T$u=1023<<20|T$b>>>12,T$Z=0|(T$$[1]>>>12|(4095&T$b)<<20);return T$E._CONVERTION_BUFFER.setUint32(0,T$u,!1),T$E._CONVERTION_BUFFER.setUint32(4,T$Z,!1),T$Zb._CONVERTION_BUFFER.getFloat64(0,!1)-1},T$I(T$E,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new T$Zb([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function T$$(T$$,T$b){this.origin=null,this.direction=null,this.origin=T$$,this.direction=T$b}return T$N(T$$,"laya.d3.math.Ray"),T$$}()),T$rb=function(){function T$$(T$$,T$b){this.elements=new Float32Array(2),void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0);var T$u=this.elements;T$u[0]=T$$,T$u[1]=T$b}T$N(T$$,"laya.d3.math.Vector2");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.fromArray=function(T$$,T$b){void 0===T$b&&(T$b=0),this.elements[0]=T$$[T$b+0],this.elements[1]=T$$[T$b+1]},T$b.cloneTo=function(T$$){var T$b=T$$.elements,T$u=this.elements;T$b[0]=T$u[0],T$b[1]=T$u[1]},T$b.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$b,"x",function(){return this.elements[0]},function(T$$){this.elements[0]=T$$}),T$D(0,T$b,"y",function(){return this.elements[1]},function(T$$){this.elements[1]=T$$}),T$$.scale=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements;T$Z[0]=T$E[0]*T$b,T$Z[1]=T$E[1]*T$b},T$I(T$$,["ZERO",function(){return this.ZERO=new T$$(0,0)},"ONE",function(){return this.ONE=new T$$(1,1)}]),T$$}(),T$Fb=function(){function T$w(T$$,T$b,T$u){this.elements=new Float32Array(3),void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0);var T$Z=this.elements;T$Z[0]=T$$,T$Z[1]=T$b,T$Z[2]=T$u}T$N(T$w,"laya.d3.math.Vector3");var T$$=T$w.prototype;return T$P.imps(T$$,{"laya.d3.core.IClone":!0}),T$$.fromArray=function(T$$,T$b){void 0===T$b&&(T$b=0),this.elements[0]=T$$[T$b+0],this.elements[1]=T$$[T$b+1],this.elements[2]=T$$[T$b+2]},T$$.cloneTo=function(T$$){var T$b=T$$.elements,T$u=this.elements;T$b[0]=T$u[0],T$b[1]=T$u[1],T$b[2]=T$u[2]},T$$.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$$.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},T$$.reset=function(T$$,T$b,T$u){this.elements[0]=T$$,this.elements[1]=T$b,this.elements[2]=T$u},T$D(0,T$$,"x",function(){return this.elements[0]},function(T$$){this.elements[0]=T$$}),T$D(0,T$$,"y",function(){return this.elements[1]},function(T$$){this.elements[1]=T$$}),T$D(0,T$$,"z",function(){return this.elements[2]},function(T$$){this.elements[2]=T$$}),T$w.distanceSquared=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements,T$E=T$u[0]-T$Z[0],T$r=T$u[1]-T$Z[1],T$F=T$u[2]-T$Z[2];return T$E*T$E+T$r*T$r+T$F*T$F},T$w.distance=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements,T$E=T$u[0]-T$Z[0],T$r=T$u[1]-T$Z[1],T$F=T$u[2]-T$Z[2];return Math.sqrt(T$E*T$E+T$r*T$r+T$F*T$F)},T$w.min=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=Math.min(T$E[0],T$r[0]),T$Z[1]=Math.min(T$E[1],T$r[1]),T$Z[2]=Math.min(T$E[2],T$r[2])},T$w.max=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=Math.max(T$E[0],T$r[0]),T$Z[1]=Math.max(T$E[1],T$r[1]),T$Z[2]=Math.max(T$E[2],T$r[2])},T$w.transformQuat=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements,T$F=T$E[0],T$x=T$E[1],T$g=T$E[2],T$H=T$r[0],T$w=T$r[1],T$I=T$r[2],T$o=T$r[3],T$N=T$o*T$F+T$w*T$g-T$I*T$x,T$D=T$o*T$x+T$I*T$F-T$H*T$g,T$e=T$o*T$g+T$H*T$x-T$w*T$F,T$L=-T$H*T$F-T$w*T$x-T$I*T$g;T$Z[0]=T$N*T$o+T$L*-T$H+T$D*-T$I-T$e*-T$w,T$Z[1]=T$D*T$o+T$L*-T$w+T$e*-T$H-T$N*-T$I,T$Z[2]=T$e*T$o+T$L*-T$I+T$N*-T$w-T$D*-T$H},T$w.scalarLength=function(T$$){var T$b=T$$.elements,T$u=T$b[0],T$Z=T$b[1],T$E=T$b[2];return Math.sqrt(T$u*T$u+T$Z*T$Z+T$E*T$E)},T$w.scalarLengthSquared=function(T$$){var T$b=T$$.elements,T$u=T$b[0],T$Z=T$b[1],T$E=T$b[2];return T$u*T$u+T$Z*T$Z+T$E*T$E},T$w.normalize=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements,T$E=T$u[0],T$r=T$u[1],T$F=T$u[2],T$x=T$E*T$E+T$r*T$r+T$F*T$F;0<T$x&&(T$x=1/Math.sqrt(T$x),T$Z[0]=T$u[0]*T$x,T$Z[1]=T$u[1]*T$x,T$Z[2]=T$u[2]*T$x)},T$w.multiply=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=T$E[0]*T$r[0],T$Z[1]=T$E[1]*T$r[1],T$Z[2]=T$E[2]*T$r[2]},T$w.scale=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements;T$Z[0]=T$E[0]*T$b,T$Z[1]=T$E[1]*T$b,T$Z[2]=T$E[2]*T$b},T$w.lerp=function(T$$,T$b,T$u,T$Z){var T$E=T$Z.elements,T$r=T$$.elements,T$F=T$b.elements,T$x=T$r[0],T$g=T$r[1],T$H=T$r[2];T$E[0]=T$x+T$u*(T$F[0]-T$x),T$E[1]=T$g+T$u*(T$F[1]-T$g),T$E[2]=T$H+T$u*(T$F[2]-T$H)},T$w.transformV3ToV3=function(T$$,T$b,T$u){var T$Z=T$w._tempVector4;T$w.transformV3ToV4(T$$,T$b,T$Z);var T$E=T$Z.elements,T$r=T$u.elements;T$r[0]=T$E[0],T$r[1]=T$E[1],T$r[2]=T$E[2]},T$w.transformV3ToV4=function(T$$,T$b,T$u){var T$Z=T$$.elements,T$E=T$Z[0],T$r=T$Z[1],T$F=T$Z[2],T$x=T$b.elements,T$g=T$u.elements;T$g[0]=T$E*T$x[0]+T$r*T$x[4]+T$F*T$x[8]+T$x[12],T$g[1]=T$E*T$x[1]+T$r*T$x[5]+T$F*T$x[9]+T$x[13],T$g[2]=T$E*T$x[2]+T$r*T$x[6]+T$F*T$x[10]+T$x[14],T$g[3]=T$E*T$x[3]+T$r*T$x[7]+T$F*T$x[11]+T$x[15]},T$w.TransformNormal=function(T$$,T$b,T$u){var T$Z=T$$.elements,T$E=T$Z[0],T$r=T$Z[1],T$F=T$Z[2],T$x=T$b.elements,T$g=T$u.elements;T$g[0]=T$E*T$x[0]+T$r*T$x[4]+T$F*T$x[8],T$g[1]=T$E*T$x[1]+T$r*T$x[5]+T$F*T$x[9],T$g[2]=T$E*T$x[2]+T$r*T$x[6]+T$F*T$x[10]},T$w.transformCoordinate=function(T$$,T$b,T$u){var T$Z=T$w._tempVector4.elements,T$E=T$$.elements,T$r=T$E[0],T$F=T$E[1],T$x=T$E[2],T$g=T$b.elements;T$Z[0]=T$r*T$g[0]+T$F*T$g[4]+T$x*T$g[8]+T$g[12],T$Z[1]=T$r*T$g[1]+T$F*T$g[5]+T$x*T$g[9]+T$g[13],T$Z[2]=T$r*T$g[2]+T$F*T$g[6]+T$x*T$g[10]+T$g[14],T$Z[3]=1/(T$r*T$g[3]+T$F*T$g[7]+T$x*T$g[11]+T$g[15]);var T$H=T$u.elements;T$H[0]=T$Z[0]*T$Z[3],T$H[1]=T$Z[1]*T$Z[3],T$H[2]=T$Z[2]*T$Z[3]},T$w.Clamp=function(T$$,T$b,T$u,T$Z){var T$E=T$$.elements,T$r=T$E[0],T$F=T$E[1],T$x=T$E[2],T$g=T$b.elements,T$H=T$g[0],T$w=T$g[1],T$I=T$g[2],T$o=T$u.elements,T$N=T$o[0],T$D=T$o[1],T$e=T$o[2],T$L=T$Z.elements;T$r=(T$r=T$N<T$r?T$N:T$r)<T$H?T$H:T$r,T$F=(T$F=T$D<T$F?T$D:T$F)<T$w?T$w:T$F,T$x=(T$x=T$e<T$x?T$e:T$x)<T$I?T$I:T$x,T$L[0]=T$r,T$L[1]=T$F,T$L[2]=T$x},T$w.add=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=T$E[0]+T$r[0],T$Z[1]=T$E[1]+T$r[1],T$Z[2]=T$E[2]+T$r[2]},T$w.subtract=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=T$E[0]-T$r[0],T$Z[1]=T$E[1]-T$r[1],T$Z[2]=T$E[2]-T$r[2]},T$w.cross=function(T$$,T$b,T$u){var T$Z=T$$.elements,T$E=T$b.elements,T$r=T$u.elements,T$F=T$Z[0],T$x=T$Z[1],T$g=T$Z[2],T$H=T$E[0],T$w=T$E[1],T$I=T$E[2];T$r[0]=T$x*T$I-T$g*T$w,T$r[1]=T$g*T$H-T$F*T$I,T$r[2]=T$F*T$w-T$x*T$H},T$w.dot=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements;return T$u[0]*T$Z[0]+T$u[1]*T$Z[1]+T$u[2]*T$Z[2]},T$w.equals=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements;return T$B$.nearEqual(Math.abs(T$u[0]),Math.abs(T$Z[0]))&&T$B$.nearEqual(Math.abs(T$u[1]),Math.abs(T$Z[1]))&&T$B$.nearEqual(Math.abs(T$u[2]),Math.abs(T$Z[2]))},T$w.ZERO=new T$w(0,0,0),T$w.ONE=new T$w(1,1,1),T$w.NegativeUnitX=new T$w(-1,0,0),T$w.UnitX=new T$w(1,0,0),T$w.UnitY=new T$w(0,1,0),T$w.UnitZ=new T$w(0,0,1),T$w.ForwardRH=new T$w(0,0,-1),T$w.ForwardLH=new T$w(0,0,1),T$w.Up=new T$w(0,1,0),T$w.NAN=new T$w(NaN,NaN,NaN),T$I(T$w,["_tempVector4",function(){return this._tempVector4=new T$xb}]),T$w}(),T$xb=function(){function T$$(T$$,T$b,T$u,T$Z){this.elements=new Float32Array(4),void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=0);var T$E=this.elements;T$E[0]=T$$,T$E[1]=T$b,T$E[2]=T$u,T$E[3]=T$Z}T$N(T$$,"laya.d3.math.Vector4");var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b.fromArray=function(T$$,T$b){void 0===T$b&&(T$b=0),this.elements[0]=T$$[T$b+0],this.elements[1]=T$$[T$b+1],this.elements[2]=T$$[T$b+2],this.elements[3]=T$$[T$b+3]},T$b.cloneTo=function(T$$){var T$b=T$$.elements,T$u=this.elements;T$b[0]=T$u[0],T$b[1]=T$u[1],T$b[2]=T$u[2],T$b[3]=T$u[3]},T$b.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$b.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},T$b.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},T$D(0,T$b,"x",function(){return this.elements[0]},function(T$$){this.elements[0]=T$$}),T$D(0,T$b,"y",function(){return this.elements[1]},function(T$$){this.elements[1]=T$$}),T$D(0,T$b,"z",function(){return this.elements[2]},function(T$$){this.elements[2]=T$$}),T$D(0,T$b,"w",function(){return this.elements[3]},function(T$$){this.elements[3]=T$$}),T$$.lerp=function(T$$,T$b,T$u,T$Z){var T$E=T$Z.elements,T$r=T$$.elements,T$F=T$b.elements,T$x=T$r[0],T$g=T$r[1],T$H=T$r[2],T$w=T$r[3];T$E[0]=T$x+T$u*(T$F[0]-T$x),T$E[1]=T$g+T$u*(T$F[1]-T$g),T$E[2]=T$H+T$u*(T$F[2]-T$H),T$E[3]=T$w+T$u*(T$F[3]-T$w)},T$$.transformByM4x4=function(T$$,T$b,T$u){var T$Z=T$$.elements,T$E=T$Z[0],T$r=T$Z[1],T$F=T$Z[2],T$x=T$Z[3],T$g=T$b.elements,T$H=T$u.elements;T$H[0]=T$E*T$g[0]+T$r*T$g[4]+T$F*T$g[8]+T$x*T$g[12],T$H[1]=T$E*T$g[1]+T$r*T$g[5]+T$F*T$g[9]+T$x*T$g[13],T$H[2]=T$E*T$g[2]+T$r*T$g[6]+T$F*T$g[10]+T$x*T$g[14],T$H[3]=T$E*T$g[3]+T$r*T$g[7]+T$F*T$g[11]+T$x*T$g[15]},T$$.equals=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements;return T$B$.nearEqual(Math.abs(T$u[0]),Math.abs(T$Z[0]))&&T$B$.nearEqual(Math.abs(T$u[1]),Math.abs(T$Z[1]))&&T$B$.nearEqual(Math.abs(T$u[2]),Math.abs(T$Z[2]))&&T$B$.nearEqual(Math.abs(T$u[3]),Math.abs(T$Z[3]))},T$$.normalize=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements,T$E=T$$.length();0<T$E&&(T$Z[0]=T$u[0]*T$E,T$Z[1]=T$u[1]*T$E,T$Z[2]=T$u[2]*T$E,T$Z[3]=T$u[3]*T$E)},T$$.add=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=T$E[0]+T$r[0],T$Z[1]=T$E[1]+T$r[1],T$Z[2]=T$E[2]+T$r[2],T$Z[3]=T$E[3]+T$r[3]},T$$.subtract=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=T$E[0]-T$r[0],T$Z[1]=T$E[1]-T$r[1],T$Z[2]=T$E[2]-T$r[2],T$Z[3]=T$E[3]-T$r[3]},T$$.multiply=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=T$E[0]*T$r[0],T$Z[1]=T$E[1]*T$r[1],T$Z[2]=T$E[2]*T$r[2],T$Z[3]=T$E[3]*T$r[3]},T$$.scale=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements;T$Z[0]=T$E[0]*T$b,T$Z[1]=T$E[1]*T$b,T$Z[2]=T$E[2]*T$b,T$Z[3]=T$E[3]*T$b},T$$.Clamp=function(T$$,T$b,T$u,T$Z){var T$E=T$$.elements,T$r=T$E[0],T$F=T$E[1],T$x=T$E[2],T$g=T$E[3],T$H=T$b.elements,T$w=T$H[0],T$I=T$H[1],T$o=T$H[2],T$N=T$H[3],T$D=T$u.elements,T$e=T$D[0],T$L=T$D[1],T$T=T$D[2],T$_=T$D[3],T$y=T$Z.elements;T$r=(T$r=T$e<T$r?T$e:T$r)<T$w?T$w:T$r,T$F=(T$F=T$L<T$F?T$L:T$F)<T$I?T$I:T$F,T$x=(T$x=T$T<T$x?T$T:T$x)<T$o?T$o:T$x,T$g=(T$g=T$_<T$g?T$_:T$g)<T$N?T$N:T$g,T$y[0]=T$r,T$y[1]=T$F,T$y[2]=T$x,T$y[3]=T$g},T$$.distanceSquared=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements,T$E=T$u[0]-T$Z[0],T$r=T$u[1]-T$Z[1],T$F=T$u[2]-T$Z[2],T$x=T$u[3]-T$Z[3];return T$E*T$E+T$r*T$r+T$F*T$F+T$x*T$x},T$$.distance=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements,T$E=T$u[0]-T$Z[0],T$r=T$u[1]-T$Z[1],T$F=T$u[2]-T$Z[2],T$x=T$u[3]-T$Z[3];return Math.sqrt(T$E*T$E+T$r*T$r+T$F*T$F+T$x*T$x)},T$$.dot=function(T$$,T$b){var T$u=T$$.elements,T$Z=T$b.elements;return T$u[0]*T$Z[0]+T$u[1]*T$Z[1]+T$u[2]*T$Z[2]+T$u[3]*T$Z[3]},T$$.min=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=Math.min(T$E[0],T$r[0]),T$Z[1]=Math.min(T$E[1],T$r[1]),T$Z[2]=Math.min(T$E[2],T$r[2]),T$Z[3]=Math.min(T$E[3],T$r[3])},T$$.max=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b.elements;T$Z[0]=Math.max(T$E[0],T$r[0]),T$Z[1]=Math.max(T$E[1],T$r[1]),T$Z[2]=Math.max(T$E[2],T$r[2]),T$Z[3]=Math.max(T$E[3],T$r[3])},T$I(T$$,["ZERO",function(){return this.ZERO=new T$$},"ONE",function(){return this.ONE=new T$$(1,1,1,1)},"UnitX",function(){return this.UnitX=new T$$(1,0,0,0)},"UnitY",function(){return this.UnitY=new T$$(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new T$$(0,0,1,0)},"UnitW",function(){return this.UnitW=new T$$(0,0,0,1)}]),T$$}(),T$gb=function(){function T$r(T$$,T$b,T$u,T$Z){this.minDepth=0,this.maxDepth=1,this.x=T$$,this.y=T$b,this.width=T$u,this.height=T$Z}T$N(T$r,"laya.d3.math.Viewport");var T$$=T$r.prototype;return T$$.project=function(T$$,T$b,T$u){T$Fb.transformV3ToV3(T$$,T$b,T$u);var T$Z=T$$.elements,T$E=T$b.elements,T$r=T$u.elements,T$F=T$Z[0]*T$E[3]+T$Z[1]*T$E[7]+T$Z[2]*T$E[11]+T$E[15];1!==T$F&&(T$r[0]=T$r[0]/T$F,T$r[1]=T$r[1]/T$F,T$r[2]=T$r[2]/T$F),T$r[0]=.5*(T$r[0]+1)*this.width+this.x,T$r[1]=.5*(1-T$r[1])*this.height+this.y,T$r[2]=T$r[2]*(this.maxDepth-this.minDepth)+this.minDepth},T$$.unprojectFromMat=function(T$$,T$b,T$u){var T$Z=T$$.elements,T$E=T$b.elements,T$r=T$u.elements;T$r[0]=(T$Z[0]-this.x)/this.width*2-1,T$r[1]=-((T$Z[1]-this.y)/this.height*2-1);var T$F=(this.maxDepth-this.minDepth)/2;T$r[2]=(T$Z[2]-this.minDepth-T$F)/T$F;var T$x=T$r[0]*T$E[3]+T$r[1]*T$E[7]+T$r[2]*T$E[11]+T$E[15];T$Fb.transformV3ToV3(T$u,T$b,T$u),1!==T$x&&(T$r[0]=T$r[0]/T$x,T$r[1]=T$r[1]/T$x,T$r[2]=T$r[2]/T$x)},T$$.unprojectFromWVP=function(T$$,T$b,T$u,T$Z,T$E){T$$b.multiply(T$b,T$u,T$r._tempMatrix4x4),T$Z&&T$$b.multiply(T$r._tempMatrix4x4,T$Z,T$r._tempMatrix4x4),T$r._tempMatrix4x4.invert(T$r._tempMatrix4x4),this.unprojectFromMat(T$$,T$r._tempMatrix4x4,T$E)},T$I(T$r,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new T$$b}]),T$r}(),T$Hb=function(){function T$K(T$$){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=T$$,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}T$N(T$K,"laya.d3.resource.models.SubMesh");var T$$=T$K.prototype;return T$P.imps(T$$,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),T$$._getVertexBuffer=function(T$$){return void 0===T$$&&(T$$=0),0===T$$?this._vertexBuffer:null},T$$._getIndexBuffer=function(){return this._indexBuffer},T$$._getStaticBatchBakedVertexs=function(T$$,T$b){var T$u,T$Z,T$E=this._vertexBuffer,T$r=T$E.vertexDeclaration,T$F=T$r.getVertexElementByUsage(0).offset/4,T$x=T$r.getVertexElementByUsage(3).offset/4,T$g=T$b.meshRender.lightmapScaleOffset,T$H=0,T$w=0,T$I=0,T$o=0,T$N=0,T$D=0;if(T$g)if(T$Z=T$r.getVertexElementByUsage(15))T$I=T$r.vertexStride/4,T$u=0<this._vertexCount?T$E.getData().slice(this._vertexStart*T$I,(this._vertexStart+this._vertexCount)*T$I):T$E.getData().slice(),T$o=T$Z.offset/4;else{T$I=(T$D=T$r.vertexStride/4)+2,T$u=this._vertexCount?new Float32Array(this._vertexCount*(T$E.vertexDeclaration.vertexStride/4+2)):new Float32Array(T$E.vertexCount*(T$E.vertexDeclaration.vertexStride/4+2)),T$o=(T$N=T$r.getVertexElementByUsage(2).offset/4)+2;var T$e=T$E.getData();for(T$H=0,T$w=T$e.length/T$D;T$H<T$w;T$H++){var T$L=0;T$L=0<this._vertexCount?(this._vertexStart+T$H)*T$D:T$H*T$D;var T$T=T$H*T$I,T$_=0;for(T$_=0;T$_<T$o;T$_++)T$u[T$T+T$_]=T$e[T$L+T$_];for(T$_=T$o;T$_<T$D;T$_++)T$u[T$T+T$_+2]=T$e[T$L+T$_]}}else T$I=T$r.vertexStride/4,T$u=this._vertexCount?T$E.getData().slice(this._vertexStart*T$I,(this._vertexStart+this._vertexCount)*T$I):T$E.getData().slice();if(T$$){var T$y=T$$.worldMatrix,T$S=T$K._tempMatrix4x40;T$y.invert(T$S);var T$P=T$K._tempMatrix4x41,T$i=T$b.transform.worldMatrix;T$$b.multiply(T$S,T$i,T$P)}else T$P=T$b.transform.worldMatrix;var T$z=T$K._tempQuaternion0;for(T$P.decomposeTransRotScale(T$K._tempVector30,T$z,T$K._tempVector31),T$H=0,T$w=T$u.length/T$I;T$H<T$w;T$H++){var T$q=T$H*T$I+T$F,T$a=T$H*T$I+T$x;if(T$Lb.transformVector3ArrayToVector3ArrayCoordinate(T$u,T$q,T$P,T$u,T$q),T$Lb.transformVector3ArrayByQuat(T$u,T$a,T$z,T$u,T$a),T$g){var T$t=T$H*T$I+T$o;if(T$Z)T$Lb.transformLightingMapTexcoordByUV1Array(T$u,T$t,T$g,T$u,T$t);else{var T$C=T$H*T$D+T$N;T$Lb.transformLightingMapTexcoordByUV0Array(T$e,T$C,T$g,T$u,T$t)}}}return T$u},T$$._getVertexBuffers=function(){return null},T$$._beforeRender=function(T$$){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},T$$._render=function(T$$){var T$b,T$u=0,T$Z=T$$.renderElement;if(1<this._indexCount){var T$E=this._boneIndicesList.length;if(1<T$E){for(var T$r=0;T$r<T$E;T$r++)(T$b=T$Z._skinAnimationDatas||this._skinAnimationDatas)&&(T$Z._shaderValue.setValue(0,T$b[T$r]),T$$._shader.uploadRenderElementUniforms(T$Z._shaderValue.data)),T$O.mainContext.drawElements(4,this._subIndexBufferCount[T$r],5123,2*this._subIndexBufferStart[T$r]);T$q.drawCall+=T$E}else(T$b=T$Z._skinAnimationDatas||this._skinAnimationDatas)&&(T$Z._shaderValue.setValue(0,T$b[0]),T$$._shader.uploadRenderElementUniforms(T$Z._shaderValue.data)),T$O.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),T$q.drawCall++;T$u=this._indexCount}else T$u=this._indexBuffer.indexCount,(T$b=T$Z._skinAnimationDatas||this._skinAnimationDatas)&&(T$Z._shaderValue.setValue(0,T$b[0]),T$$._shader.uploadRenderElementUniforms(T$Z._shaderValue.data)),T$O.mainContext.drawElements(4,T$u,5123,0),T$q.drawCall++;T$q.trianglesFaces+=T$u/3},T$$.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},T$$.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},T$D(0,T$$,"_vertexBufferCount",function(){return 1}),T$D(0,T$$,"triangleCount",function(){return this._indexBuffer.indexCount/3}),T$I(T$K,["_tempVector30",function(){return this._tempVector30=new T$Fb},"_tempVector31",function(){return this._tempVector31=new T$Fb},"_tempQuaternion0",function(){return this._tempQuaternion0=new T$ub},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new T$$b},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new T$$b}]),T$K}(),T$wb=function(){function T$$(T$$){this.defineCounter=0,this.defines=null,T$$?(this.defineCounter=T$$.defineCounter,this.defines=T$$.defines.slice()):(this.defineCounter=0,this.defines=[])}return T$N(T$$,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),T$$.prototype.registerDefine=function(T$$){var T$b=Math.pow(2,this.defineCounter++);return this.defines[T$b]=T$$,T$b},T$$}(),T$Ib=function(){function T$$(){}return T$N(T$$,"laya.d3.shader.ShaderInit3D"),T$$.__init__=function(){var T$$,T$b;T$qb._globalRegDefine("HIGHPRECISION",T$qb.SHADERDEFINE_HIGHPRECISION),T$qb._globalRegDefine("FOG",T$qb.SHADERDEFINE_FOG),T$qb._globalRegDefine("DIRECTIONLIGHT",T$qb.SHADERDEFINE_DIRECTIONLIGHT),T$qb._globalRegDefine("POINTLIGHT",T$qb.SHADERDEFINE_POINTLIGHT),T$qb._globalRegDefine("SPOTLIGHT",T$qb.SHADERDEFINE_SPOTLIGHT),T$qb._globalRegDefine("UV",T$qb.SHADERDEFINE_UV0),T$qb._globalRegDefine("COLOR",T$qb.SHADERDEFINE_COLOR),T$qb._globalRegDefine("UV1",T$qb.SHADERDEFINE_UV1),T$qb._globalRegDefine("CASTSHADOW",T$Nb.SHADERDEFINE_CAST_SHADOW),T$qb._globalRegDefine("SHADOWMAP_PSSM1",T$Nb.SHADERDEFINE_SHADOW_PSSM1),T$qb._globalRegDefine("SHADOWMAP_PSSM2",T$Nb.SHADERDEFINE_SHADOW_PSSM2),T$qb._globalRegDefine("SHADOWMAP_PSSM3",T$Nb.SHADERDEFINE_SHADOW_PSSM3),T$qb._globalRegDefine("SHADOWMAP_PCF_NO",T$Nb.SHADERDEFINE_SHADOW_PCF_NO),T$qb._globalRegDefine("SHADOWMAP_PCF1",T$Nb.SHADERDEFINE_SHADOW_PCF1),T$qb._globalRegDefine("SHADOWMAP_PCF2",T$Nb.SHADERDEFINE_SHADOW_PCF2),T$qb._globalRegDefine("SHADOWMAP_PCF3",T$Nb.SHADERDEFINE_SHADOW_PCF3),T$qb._globalRegDefine("DEPTHFOG",T$qb.SAHDERDEFINE_DEPTHFOG),T$Mb.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),T$Mb.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),T$$={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},T$b={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var T$u=T$Mb.nameKey.add("SIMPLE");shaderCompile=T$qb.add(T$u,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',T$$,T$b),T$lb.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),T$lb.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),T$lb.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),T$lb.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),T$lb.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),T$lb.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),T$lb.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),T$lb.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),T$lb.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},T$$}(),T$ob=function(){function T$$(){this._data=null,this._data=[]}T$N(T$$,"laya.d3.shader.ValusArray");var T$b=T$$.prototype;return T$b.setValue=function(T$$,T$b){this._data[T$$]=T$b},T$D(0,T$b,"data",function(){return this._data}),T$$}(),T$Nb=function(){function T$$(){}return T$$.SHADERDEFINE_RECEIVE_SHADOW=1,T$$.SHADERDEFINE_CAST_SHADOW=512,T$$.SHADERDEFINE_SHADOW_PSSM1=1024,T$$.SHADERDEFINE_SHADOW_PSSM2=2048,T$$.SHADERDEFINE_SHADOW_PSSM3=4096,T$$.SHADERDEFINE_SHADOW_PCF_NO=8192,T$$.SHADERDEFINE_SHADOW_PCF1=16384,T$$.SHADERDEFINE_SHADOW_PCF2=32768,T$$.SHADERDEFINE_SHADOW_PCF3=65536,T$$.MAX_PSSM_COUNT=3,T$$}(),T$Db=function(){function T$A(){}return T$N(T$A,"laya.d3.utils.Picker"),T$A.calculateCursorRay=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=T$$.elements[0],T$x=T$$.elements[1],T$g=T$A._tempVector30,T$H=T$g.elements;T$H[0]=T$F,T$H[1]=T$x,T$H[2]=T$b.minDepth;var T$w=T$A._tempVector31,T$I=T$w.elements;T$I[0]=T$F,T$I[1]=T$x,T$I[2]=T$b.maxDepth;var T$o=T$r.origin,T$N=T$A._tempVector32;T$b.unprojectFromWVP(T$g,T$u,T$Z,T$E,T$o),T$b.unprojectFromWVP(T$w,T$u,T$Z,T$E,T$N);var T$D=T$r.direction.elements;T$D[0]=T$N.x-T$o.x,T$D[1]=T$N.y-T$o.y,T$D[2]=T$N.z-T$o.z,T$Fb.normalize(T$r.direction,T$r.direction)},T$A.rayIntersectsPositionsAndIndices=function(T$$,T$b,T$u,T$Z,T$E){for(var T$r=T$u.vertexStride/4,T$F=T$u.getVertexElementByUsage(0).offset/4,T$x=Number.MAX_VALUE,T$g=-1,T$H=-1,T$w=-1,T$I=0;T$I<T$Z.length;T$I+=3){var T$o=T$A._tempVector35,T$N=T$o.elements,T$D=T$Z[T$I]*T$r,T$e=T$D+T$F;T$N[0]=T$b[T$e],T$N[1]=T$b[1+T$e],T$N[2]=T$b[2+T$e];var T$L=T$A._tempVector36,T$T=T$L.elements,T$_=T$Z[T$I+1]*T$r,T$y=T$_+T$F;T$T[0]=T$b[T$y],T$T[1]=T$b[1+T$y],T$T[2]=T$b[2+T$y];var T$S=T$A._tempVector37,T$P=T$S.elements,T$i=T$Z[T$I+2]*T$r,T$z=T$i+T$F;T$P[0]=T$b[T$z],T$P[1]=T$b[1+T$z],T$P[2]=T$b[2+T$z];var T$q=laya.d3.utils.Picker.rayIntersectsTriangle(T$$,T$o,T$L,T$S);!isNaN(T$q)&&T$q<T$x&&(T$x=T$q,T$g=T$D,T$H=T$_,T$w=T$i)}if(T$x===Number.MAX_VALUE)return T$E.position.toDefault(),T$E.distance=Number.MAX_VALUE,T$E.trianglePositions[0].toDefault(),T$E.trianglePositions[1].toDefault(),T$E.trianglePositions[2].toDefault(),T$E.triangleNormals[0].toDefault(),T$E.triangleNormals[1].toDefault(),T$E.triangleNormals[2].toDefault(),!1;T$E.distance=T$x,T$Fb.scale(T$$.direction,T$x,T$E.position),T$Fb.add(T$$.origin,T$E.position,T$E.position);var T$a=T$E.trianglePositions,T$t=T$a[0],T$C=T$a[1],T$K=T$a[2],T$O=T$t.elements,T$V=T$C.elements,T$v=T$K.elements,T$p=T$g+T$F;T$O[0]=T$b[T$p],T$O[1]=T$b[T$p+1],T$O[2]=T$b[T$p+2];var T$Y=T$H+T$F;T$V[0]=T$b[T$Y],T$V[1]=T$b[T$Y+1],T$V[2]=T$b[T$Y+2];var T$k=T$w+T$F;T$v[0]=T$b[T$k],T$v[1]=T$b[T$k+1],T$v[2]=T$b[T$k+2];var T$M=T$u.getVertexElementByUsage(3);if(T$M){var T$l=T$M.offset/4,T$X=T$E.triangleNormals,T$s=T$X[0],T$m=T$X[1],T$n=T$X[2],T$c=T$s.elements,T$J=T$m.elements,T$f=T$n.elements,T$Q=T$g+T$l;T$c[0]=T$b[T$Q],T$c[1]=T$b[T$Q+1],T$c[2]=T$b[T$Q+2];var T$W=T$H+T$l;T$J[0]=T$b[T$W],T$J[1]=T$b[T$W+1],T$J[2]=T$b[T$W+2];var T$G=T$w+T$l;T$f[0]=T$b[T$G],T$f[1]=T$b[T$G+1],T$f[2]=T$b[T$G+2]}return!0},T$A.rayIntersectsTriangle=function(T$$,T$b,T$u,T$Z){var T$E=T$A._tempVector30,T$r=T$A._tempVector31;T$Fb.subtract(T$u,T$b,T$E),T$Fb.subtract(T$Z,T$b,T$r);var T$F,T$x=T$A._tempVector32;if(T$Fb.cross(T$$.direction,T$r,T$x),(T$F=T$Fb.dot(T$E,T$x))>-Number.MIN_VALUE&&T$F<Number.MIN_VALUE)return Number.NaN;var T$g,T$H=1/T$F,T$w=T$A._tempVector33;if(T$Fb.subtract(T$$.origin,T$b,T$w),T$g=T$Fb.dot(T$w,T$x),(T$g*=T$H)<0||1<T$g)return Number.NaN;var T$I,T$o,T$N=T$A._tempVector34;return T$Fb.cross(T$w,T$E,T$N),T$I=T$Fb.dot(T$$.direction,T$N),(T$I*=T$H)<0||1<T$g+T$I?Number.NaN:(T$o=T$Fb.dot(T$r,T$N),(T$o*=T$H)<0?Number.NaN:T$o)},T$I(T$A,["_tempVector30",function(){return this._tempVector30=new T$Fb},"_tempVector31",function(){return this._tempVector31=new T$Fb},"_tempVector32",function(){return this._tempVector32=new T$Fb},"_tempVector33",function(){return this._tempVector33=new T$Fb},"_tempVector34",function(){return this._tempVector34=new T$Fb},"_tempVector35",function(){return this._tempVector35=new T$Fb},"_tempVector36",function(){return this._tempVector36=new T$Fb},"_tempVector37",function(){return this._tempVector37=new T$Fb}]),T$A}(),T$eb=(function(){function T$$(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new T$Fb,new T$Fb,new T$Fb],this.trianglePositions.length=3,this.triangleNormals=[new T$Fb,new T$Fb,new T$Fb],this.triangleNormals.length=3,this.position=new T$Fb}T$N(T$$,"laya.d3.utils.RaycastHit"),T$$.prototype.cloneTo=function(T$$){T$$.distance=this.distance,this.trianglePositions[0].cloneTo(T$$.trianglePositions[0]),this.trianglePositions[1].cloneTo(T$$.trianglePositions[1]),this.trianglePositions[2].cloneTo(T$$.trianglePositions[2]),this.triangleNormals[0].cloneTo(T$$.triangleNormals[0]),this.triangleNormals[1].cloneTo(T$$.triangleNormals[1]),this.triangleNormals[2].cloneTo(T$$.triangleNormals[2]),this.position.cloneTo(T$$.position),T$$.sprite3D=this.sprite3D}}(),function(){function T$$(T$$,T$b){this._width=0,this._height=0,this._width=T$$,this._height=T$b}T$N(T$$,"laya.d3.utils.Size");var T$b=T$$.prototype;return T$D(0,T$b,"width",function(){return-1===this._width?T$j.clientWidth:this._width}),T$D(0,T$b,"height",function(){return-1===this._height?T$j.clientHeight:this._height}),T$D(1,T$$,"fullScreen",function(){return new T$$(-1,-1)}),T$$}()),T$Lb=function(){function T$p(){}return T$N(T$p,"laya.d3.utils.Utils3D"),T$p._rotationTransformScaleSkinAnimation=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$I){var T$o,T$N,T$D,T$e,T$L,T$T=T$p._tempArray16_0,T$_=T$p._tempArray16_1,T$y=T$p._tempArray16_2,T$S=T$Z+T$Z,T$P=T$E+T$E,T$i=T$r+T$r,T$z=T$Z*T$S,T$q=T$E*T$S,T$a=T$E*T$P,T$t=T$r*T$S,T$C=T$r*T$P,T$K=T$r*T$i,T$O=T$F*T$S,T$V=T$F*T$P,T$v=T$F*T$i;for(T$T[15]=1,T$T[0]=1-T$a-T$K,T$T[1]=T$q+T$v,T$T[2]=T$t-T$V,T$T[4]=T$q-T$v,T$T[5]=1-T$z-T$K,T$T[6]=T$C+T$O,T$T[8]=T$t+T$V,T$T[9]=T$C-T$O,T$T[10]=1-T$z-T$a,T$_[15]=1,T$_[0]=T$x,T$_[5]=T$g,T$_[10]=T$H,T$o=0;T$o<4;T$o++)T$N=T$T[T$o],T$D=T$T[T$o+4],T$e=T$T[T$o+8],T$L=T$T[T$o+12],T$y[T$o]=T$N,T$y[T$o+4]=T$D,T$y[T$o+8]=T$e,T$y[T$o+12]=T$N*T$$+T$D*T$b+T$e*T$u+T$L;for(T$o=0;T$o<4;T$o++)T$N=T$y[T$o],T$D=T$y[T$o+4],T$e=T$y[T$o+8],T$L=T$y[T$o+12],T$w[T$o+T$I]=T$N*T$_[0]+T$D*T$_[1]+T$e*T$_[2]+T$L*T$_[3],T$w[T$o+T$I+4]=T$N*T$_[4]+T$D*T$_[5]+T$e*T$_[6]+T$L*T$_[7],T$w[T$o+T$I+8]=T$N*T$_[8]+T$D*T$_[9]+T$e*T$_[10]+T$L*T$_[11],T$w[T$o+T$I+12]=T$N*T$_[12]+T$D*T$_[13]+T$e*T$_[14]+T$L*T$_[15]},T$p._createNodeByJson=function(T$$,T$b,T$u,T$Z){if(!T$u)switch(T$b.type){case"Sprite3D":T$u=new T$kb;break;case"MeshSprite3D":T$u=new T$Ab;break;case"SkinnedMeshSprite3D":T$u=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":T$u=new ShuriKenParticle3D;break;case"TrailSprite3D":T$u=new TrailSprite3D;break;case"Terrain":T$u=new Terrain;break;case"Camera":T$u=new T$Gb;break;case"DirectionLight":T$u=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var T$E=T$b.props;if(T$E)for(var T$r in T$E)T$u[T$r]=T$E[T$r];var T$F=T$b.customProps;T$F&&(T$u instanceof laya.d3.core.Sprite3D?(T$u._parseBaseCustomProps(T$F),T$u._parseCustomProps(T$$,T$Z,T$F,T$b),T$u._parseCustomComponent(T$$,T$Z,T$b.components)):T$u._parseCustomProps(T$$,T$Z,T$F,T$b));var T$x=T$b.child;if(T$x)for(var T$g=0,T$H=T$x.length;T$g<T$H;T$g++){var T$w=T$p._createNodeByJson(T$$,T$x[T$g],null,T$Z);T$u.addChild(T$w)}return T$u},T$p._computeBoneAndAnimationDatasByBindPoseMatrxix=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F,T$x,T$g=0,T$H=0,T$w=T$$.length;for(T$F=0;T$F<T$w;T$g+=T$$[T$F].keyframeWidth,T$H+=16,T$F++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(T$b[T$g+0],T$b[T$g+1],T$b[T$g+2],T$b[T$g+3],T$b[T$g+4],T$b[T$g+5],T$b[T$g+6],T$b[T$g+7],T$b[T$g+8],T$b[T$g+9],T$Z,T$H),0!=T$F&&(T$x=16*T$$[T$F].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(T$Z,T$x,T$Z,T$H,T$Z,T$H));var T$I=T$u.length;for(T$F=0;T$F<T$I;T$F++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$Z,16*T$r[T$F],T$u[T$F],T$E,16*T$F)},T$p._computeAnimationDatasByArrayAndMatrixFast=function(T$$,T$b,T$u,T$Z){for(var T$E=0,T$r=T$$.length;T$E<T$r;T$E++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$b,16*T$Z[T$E],T$$[T$E],T$u,16*T$E)},T$p._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(T$$,T$b,T$u,T$Z,T$E){var T$r,T$F,T$x=0,T$g=0,T$H=T$$.length;for(T$r=0;T$r<T$H;T$x+=T$$[T$r].keyframeWidth,T$g+=16,T$r++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(T$b[T$x+7],T$b[T$x+8],T$b[T$x+9],T$b[T$x+3],T$b[T$x+4],T$b[T$x+5],T$b[T$x+6],T$b[T$x+0],T$b[T$x+1],T$b[T$x+2],T$Z,T$g),0!=T$r&&(T$F=16*T$$[T$r].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(T$Z,T$F,T$Z,T$g,T$Z,T$g));var T$w=T$u.length;for(T$r=0;T$r<T$w;T$r++){var T$I=16*T$r;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$Z,T$I,T$u[T$r],T$E,T$I)}},T$p._computeAnimationDatasByArrayAndMatrixFastOld=function(T$$,T$b,T$u){for(var T$Z=T$$.length,T$E=0;T$E<T$Z;T$E++){var T$r=16*T$E;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(T$b,T$r,T$$[T$E],T$u,T$r)}},T$p._computeRootAnimationData=function(T$$,T$b,T$u){for(var T$Z=0,T$E=0,T$r=0,T$F=T$$.length;T$Z<T$F;T$E+=T$$[T$Z].keyframeWidth,T$r+=16,T$Z++)laya.d3.utils.Utils3D.createAffineTransformationArray(T$b[T$E+0],T$b[T$E+1],T$b[T$E+2],T$b[T$E+3],T$b[T$E+4],T$b[T$E+5],T$b[T$E+6],T$b[T$E+7],T$b[T$E+8],T$b[T$E+9],T$u,T$r)},T$p.transformVector3ArrayByQuat=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$u.elements,T$F=T$$[T$b],T$x=T$$[T$b+1],T$g=T$$[T$b+2],T$H=T$r[0],T$w=T$r[1],T$I=T$r[2],T$o=T$r[3],T$N=T$o*T$F+T$w*T$g-T$I*T$x,T$D=T$o*T$x+T$I*T$F-T$H*T$g,T$e=T$o*T$g+T$H*T$x-T$w*T$F,T$L=-T$H*T$F-T$w*T$x-T$I*T$g;T$Z[T$E]=T$N*T$o+T$L*-T$H+T$D*-T$I-T$e*-T$w,T$Z[T$E+1]=T$D*T$o+T$L*-T$w+T$e*-T$H-T$N*-T$I,T$Z[T$E+2]=T$e*T$o+T$L*-T$I+T$N*-T$w-T$D*-T$H},T$p.mulMatrixByArray=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F,T$x,T$g,T$H,T$w;if(T$E===T$u){for(T$u=T$p._tempArray16_3,T$F=0;T$F<16;++T$F)T$u[T$F]=T$E[T$r+T$F];T$Z=0}for(T$F=0;T$F<4;T$F++)T$x=T$$[T$b+T$F],T$g=T$$[T$b+T$F+4],T$H=T$$[T$b+T$F+8],T$w=T$$[T$b+T$F+12],T$E[T$r+T$F]=T$x*T$u[T$Z+0]+T$g*T$u[T$Z+1]+T$H*T$u[T$Z+2]+T$w*T$u[T$Z+3],T$E[T$r+T$F+4]=T$x*T$u[T$Z+4]+T$g*T$u[T$Z+5]+T$H*T$u[T$Z+6]+T$w*T$u[T$Z+7],T$E[T$r+T$F+8]=T$x*T$u[T$Z+8]+T$g*T$u[T$Z+9]+T$H*T$u[T$Z+10]+T$w*T$u[T$Z+11],T$E[T$r+T$F+12]=T$x*T$u[T$Z+12]+T$g*T$u[T$Z+13]+T$H*T$u[T$Z+14]+T$w*T$u[T$Z+15]},T$p.mulMatrixByArrayFast=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F,T$x,T$g,T$H,T$w;for(T$F=0;T$F<4;T$F++)T$x=T$$[T$b+T$F],T$g=T$$[T$b+T$F+4],T$H=T$$[T$b+T$F+8],T$w=T$$[T$b+T$F+12],T$E[T$r+T$F]=T$x*T$u[T$Z+0]+T$g*T$u[T$Z+1]+T$H*T$u[T$Z+2]+T$w*T$u[T$Z+3],T$E[T$r+T$F+4]=T$x*T$u[T$Z+4]+T$g*T$u[T$Z+5]+T$H*T$u[T$Z+6]+T$w*T$u[T$Z+7],T$E[T$r+T$F+8]=T$x*T$u[T$Z+8]+T$g*T$u[T$Z+9]+T$H*T$u[T$Z+10]+T$w*T$u[T$Z+11],T$E[T$r+T$F+12]=T$x*T$u[T$Z+12]+T$g*T$u[T$Z+13]+T$H*T$u[T$Z+14]+T$w*T$u[T$Z+15]},T$p.mulMatrixByArrayAndMatrixFast=function(T$$,T$b,T$u,T$Z,T$E){var T$r,T$F,T$x,T$g,T$H,T$w=T$u.elements,T$I=T$w[0],T$o=T$w[1],T$N=T$w[2],T$D=T$w[3],T$e=T$w[4],T$L=T$w[5],T$T=T$w[6],T$_=T$w[7],T$y=T$w[8],T$S=T$w[9],T$P=T$w[10],T$i=T$w[11],T$z=T$w[12],T$q=T$w[13],T$a=T$w[14],T$t=T$w[15],T$C=T$b,T$K=T$b+4,T$O=T$b+8,T$V=T$b+12,T$v=T$E,T$p=T$E+4,T$Y=T$E+8,T$k=T$E+12;for(T$r=0;T$r<4;T$r++)T$F=T$$[T$C+T$r],T$x=T$$[T$K+T$r],T$g=T$$[T$O+T$r],T$H=T$$[T$V+T$r],T$Z[T$v+T$r]=T$F*T$I+T$x*T$o+T$g*T$N+T$H*T$D,T$Z[T$p+T$r]=T$F*T$e+T$x*T$L+T$g*T$T+T$H*T$_,T$Z[T$Y+T$r]=T$F*T$y+T$x*T$S+T$g*T$P+T$H*T$i,T$Z[T$k+T$r]=T$F*T$z+T$x*T$q+T$g*T$a+T$H*T$t},T$p.createAffineTransformationArray=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$I){var T$o=T$Z+T$Z,T$N=T$E+T$E,T$D=T$r+T$r,T$e=T$Z*T$o,T$L=T$Z*T$N,T$T=T$Z*T$D,T$_=T$E*T$N,T$y=T$E*T$D,T$S=T$r*T$D,T$P=T$F*T$o,T$i=T$F*T$N,T$z=T$F*T$D;T$w[T$I+0]=(1-(T$_+T$S))*T$x,T$w[T$I+1]=(T$L+T$z)*T$x,T$w[T$I+2]=(T$T-T$i)*T$x,T$w[T$I+3]=0,T$w[T$I+4]=(T$L-T$z)*T$g,T$w[T$I+5]=(1-(T$e+T$S))*T$g,T$w[T$I+6]=(T$y+T$P)*T$g,T$w[T$I+7]=0,T$w[T$I+8]=(T$T+T$i)*T$H,T$w[T$I+9]=(T$y-T$P)*T$H,T$w[T$I+10]=(1-(T$e+T$_))*T$H,T$w[T$I+11]=0,T$w[T$I+12]=T$$,T$w[T$I+13]=T$b,T$w[T$I+14]=T$u,T$w[T$I+15]=1},T$p.transformVector3ArrayToVector3ArrayCoordinate=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$p._tempArray4_0,T$F=T$$[T$b+0],T$x=T$$[T$b+1],T$g=T$$[T$b+2],T$H=T$u.elements;T$r[0]=T$F*T$H[0]+T$x*T$H[4]+T$g*T$H[8]+T$H[12],T$r[1]=T$F*T$H[1]+T$x*T$H[5]+T$g*T$H[9]+T$H[13],T$r[2]=T$F*T$H[2]+T$x*T$H[6]+T$g*T$H[10]+T$H[14],T$r[3]=1/(T$F*T$H[3]+T$x*T$H[7]+T$g*T$H[11]+T$H[15]),T$Z[T$E+0]=T$r[0]*T$r[3],T$Z[T$E+1]=T$r[1]*T$r[3],T$Z[T$E+2]=T$r[2]*T$r[3]},T$p.transformLightingMapTexcoordByUV0Array=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$u.elements;T$Z[T$E+0]=T$$[T$b+0]*T$r[0]+T$r[2],T$Z[T$E+1]=(T$$[T$b+1]-1)*T$r[1]+T$r[3]},T$p.transformLightingMapTexcoordByUV1Array=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$u.elements;T$Z[T$E+0]=T$$[T$b+0]*T$r[0]+T$r[2],T$Z[T$E+1]=1+T$$[T$b+1]*T$r[1]+T$r[3]},T$p.getURLVerion=function(T$$){var T$b=T$$.indexOf("?");return 0<=T$b?T$$.substr(T$b):null},T$p._quaternionCreateFromYawPitchRollArray=function(T$$,T$b,T$u,T$Z){var T$E=.5*T$u,T$r=.5*T$b,T$F=.5*T$$,T$x=Math.sin(T$E),T$g=Math.cos(T$E),T$H=Math.sin(T$r),T$w=Math.cos(T$r),T$I=Math.sin(T$F),T$o=Math.cos(T$F);T$Z[0]=T$o*T$H*T$g+T$I*T$w*T$x,T$Z[1]=T$I*T$w*T$g-T$o*T$H*T$x,T$Z[2]=T$o*T$w*T$x-T$I*T$H*T$g,T$Z[3]=T$o*T$w*T$g+T$I*T$H*T$x},T$p._createAffineTransformationArray=function(T$$,T$b,T$u,T$Z){var T$E=T$b[0],T$r=T$b[1],T$F=T$b[2],T$x=T$b[3],T$g=T$E+T$E,T$H=T$r+T$r,T$w=T$F+T$F,T$I=T$E*T$g,T$o=T$E*T$H,T$N=T$E*T$w,T$D=T$r*T$H,T$e=T$r*T$w,T$L=T$F*T$w,T$T=T$x*T$g,T$_=T$x*T$H,T$y=T$x*T$w,T$S=T$u[0],T$P=T$u[1],T$i=T$u[2];T$Z[0]=(1-(T$D+T$L))*T$S,T$Z[1]=(T$o+T$y)*T$S,T$Z[2]=(T$N-T$_)*T$S,T$Z[3]=0,T$Z[4]=(T$o-T$y)*T$P,T$Z[5]=(1-(T$I+T$L))*T$P,T$Z[6]=(T$e+T$T)*T$P,T$Z[7]=0,T$Z[8]=(T$N+T$_)*T$i,T$Z[9]=(T$e-T$T)*T$i,T$Z[10]=(1-(T$I+T$D))*T$i,T$Z[11]=0,T$Z[12]=T$$[0],T$Z[13]=T$$[1],T$Z[14]=T$$[2],T$Z[15]=1},T$p._mulMatrixArray=function(T$$,T$b,T$u,T$Z){var T$E,T$r,T$F,T$x,T$g,T$H=T$b.elements,T$w=T$H[0],T$I=T$H[1],T$o=T$H[2],T$N=T$H[3],T$D=T$H[4],T$e=T$H[5],T$L=T$H[6],T$T=T$H[7],T$_=T$H[8],T$y=T$H[9],T$S=T$H[10],T$P=T$H[11],T$i=T$H[12],T$z=T$H[13],T$q=T$H[14],T$a=T$H[15],T$t=T$Z,T$C=T$Z+4,T$K=T$Z+8,T$O=T$Z+12;for(T$E=0;T$E<4;T$E++)T$r=T$$[T$E],T$F=T$$[T$E+4],T$x=T$$[T$E+8],T$g=T$$[T$E+12],T$u[T$t+T$E]=T$r*T$w+T$F*T$I+T$x*T$o+T$g*T$N,T$u[T$C+T$E]=T$r*T$D+T$F*T$e+T$x*T$L+T$g*T$T,T$u[T$K+T$E]=T$r*T$_+T$F*T$y+T$x*T$S+T$g*T$P,T$u[T$O+T$E]=T$r*T$i+T$F*T$z+T$x*T$q+T$g*T$a},T$p.getYawPitchRoll=function(T$$,T$b){T$p.transformQuat(T$Fb.ForwardRH,T$$,T$ub.TEMPVector31),T$p.transformQuat(T$Fb.Up,T$$,T$ub.TEMPVector32);var T$u=T$ub.TEMPVector32.elements;T$p.angleTo(T$Fb.ZERO,T$ub.TEMPVector31,T$ub.TEMPVector33);var T$Z=T$ub.TEMPVector33.elements;T$Z[0]==Math.PI/2?(T$Z[1]=T$p.arcTanAngle(T$u[2],T$u[0]),T$Z[2]=0):T$Z[0]==-Math.PI/2?(T$Z[1]=T$p.arcTanAngle(-T$u[2],-T$u[0]),T$Z[2]=0):(T$$b.createRotationY(-T$Z[1],T$ub.TEMPMatrix0),T$$b.createRotationX(-T$Z[0],T$ub.TEMPMatrix1),T$Fb.transformCoordinate(T$ub.TEMPVector32,T$ub.TEMPMatrix0,T$ub.TEMPVector32),T$Fb.transformCoordinate(T$ub.TEMPVector32,T$ub.TEMPMatrix1,T$ub.TEMPVector32),T$Z[2]=T$p.arcTanAngle(T$u[1],-T$u[0])),T$Z[1]<=-Math.PI&&(T$Z[1]=Math.PI),T$Z[2]<=-Math.PI&&(T$Z[2]=Math.PI),T$Z[1]>=Math.PI&&T$Z[2]>=Math.PI&&(T$Z[1]=0,T$Z[2]=0,T$Z[0]=Math.PI-T$Z[0]),T$b[0]=T$Z[1],T$b[1]=T$Z[0],T$b[2]=T$Z[2]},T$p.arcTanAngle=function(T$$,T$b){return 0==T$$?1==T$b?Math.PI/2:-Math.PI/2:0<T$$?Math.atan(T$b/T$$):T$$<0?0<T$b?Math.atan(T$b/T$$)+Math.PI:Math.atan(T$b/T$$)-Math.PI:0},T$p.angleTo=function(T$$,T$b,T$u){T$Fb.subtract(T$b,T$$,T$ub.TEMPVector30),T$Fb.normalize(T$ub.TEMPVector30,T$ub.TEMPVector30),T$u.elements[0]=Math.asin(T$ub.TEMPVector30.y),T$u.elements[1]=T$p.arcTanAngle(-T$ub.TEMPVector30.z,-T$ub.TEMPVector30.x)},T$p.transformQuat=function(T$$,T$b,T$u){var T$Z=T$u.elements,T$E=T$$.elements,T$r=T$b,T$F=T$E[0],T$x=T$E[1],T$g=T$E[2],T$H=T$r[0],T$w=T$r[1],T$I=T$r[2],T$o=T$r[3],T$N=T$o*T$F+T$w*T$g-T$I*T$x,T$D=T$o*T$x+T$I*T$F-T$H*T$g,T$e=T$o*T$g+T$H*T$x-T$w*T$F,T$L=-T$H*T$F-T$w*T$x-T$I*T$g;T$Z[0]=T$N*T$o+T$L*-T$H+T$D*-T$I-T$e*-T$w,T$Z[1]=T$D*T$o+T$L*-T$w+T$e*-T$H-T$N*-T$I,T$Z[2]=T$e*T$o+T$L*-T$I+T$N*-T$w-T$D*-T$H},T$p.quaterionNormalize=function(T$$,T$b){var T$u=T$$[0],T$Z=T$$[1],T$E=T$$[2],T$r=T$$[3],T$F=T$u*T$u+T$Z*T$Z+T$E*T$E+T$r*T$r;0<T$F&&(T$F=1/Math.sqrt(T$F),T$b[0]=T$u*T$F,T$b[1]=T$Z*T$F,T$b[2]=T$E*T$F,T$b[3]=T$r*T$F)},T$p.matrix4x4MultiplyFFF=function(T$$,T$b,T$u){var T$Z,T$E,T$r,T$F,T$x;if(T$u===T$b)for(T$b=new Float32Array(16),T$Z=0;T$Z<16;++T$Z)T$b[T$Z]=T$u[T$Z];for(T$Z=0;T$Z<4;T$Z++)T$E=T$$[T$Z],T$r=T$$[T$Z+4],T$F=T$$[T$Z+8],T$x=T$$[T$Z+12],T$u[T$Z]=T$E*T$b[0]+T$r*T$b[1]+T$F*T$b[2]+T$x*T$b[3],T$u[T$Z+4]=T$E*T$b[4]+T$r*T$b[5]+T$F*T$b[6]+T$x*T$b[7],T$u[T$Z+8]=T$E*T$b[8]+T$r*T$b[9]+T$F*T$b[10]+T$x*T$b[11],T$u[T$Z+12]=T$E*T$b[12]+T$r*T$b[13]+T$F*T$b[14]+T$x*T$b[15]},T$p.matrix4x4MultiplyMFM=function(T$$,T$b,T$u){T$p.matrix4x4MultiplyFFF(T$$.elements,T$b,T$u.elements)},T$I(T$p,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new T$Fb},"_tempVector3_1",function(){return this._tempVector3_1=new T$Fb},"_tempVector3_2",function(){return this._tempVector3_2=new T$Fb},"_tempVector3_3",function(){return this._tempVector3_3=new T$Fb},"_tempVector3_4",function(){return this._tempVector3_4=new T$Fb},"_tempVector3_5",function(){return this._tempVector3_5=new T$Fb},"_tempVector3_6",function(){return this._tempVector3_6=new T$Fb},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),T$p}(),T$Tb=function(){function T$V(){}return T$N(T$V,"Laya3D"),T$V._cancelLoadByUrl=function(T$$){T$P.loader.cancelLoadByUrl(T$$),T$V._innerFirstLevelLoaderManager.cancelLoadByUrl(T$$),T$V._innerSecondLevelLoaderManager.cancelLoadByUrl(T$$),T$V._innerThirdLevelLoaderManager.cancelLoadByUrl(T$$),T$V._innerFourthLevelLoaderManager.cancelLoadByUrl(T$$)},T$V._changeWebGLSize=function(T$$,T$b){T$O.onStageResize(T$$,T$b),T$j.clientWidth=T$$,T$j.clientHeight=T$b},T$V.__init__=function(){var T$$=T$b.createMap;T$$.lh=[T$kb,"SPRITE3DHIERARCHY"],T$$.ls=[T$Yb,"SPRITE3DHIERARCHY"],T$$.lm=[T$cb,"MESH"],T$$.lmat=[T$lb,"MATERIAL"],T$$.jpg=[T$fb,"nativeimage"],T$$.jpeg=[T$fb,"nativeimage"],T$$.png=[T$fb,"nativeimage"],T$$.pkm=[T$fb,"arraybuffer"],T$$.raw=[T$mb,"arraybuffer"],T$$.mipmaps=[T$mb,"arraybuffer"],T$T.parserMap.SPRITE3DHIERARCHY=T$V._loadHierarchy,T$T.parserMap.MESH=T$V._loadMesh,T$T.parserMap.MATERIAL=T$V._loadMaterial,T$T.parserMap.TEXTURECUBE=T$V._loadTextureCube,T$T.parserMap.TERRAIN=T$V._loadTerrain,T$V._innerFirstLevelLoaderManager.on("error",null,T$V._eventLoadManagerError),T$V._innerSecondLevelLoaderManager.on("error",null,T$V._eventLoadManagerError),T$V._innerThirdLevelLoaderManager.on("error",null,T$V._eventLoadManagerError),T$V._innerFourthLevelLoaderManager.on("error",null,T$V._eventLoadManagerError)},T$V.READ_BLOCK=function(){return T$V._readData.pos+=4,!0},T$V.READ_DATA=function(){return T$V._DATA.offset=T$V._readData.getUint32(),T$V._DATA.size=T$V._readData.getUint32(),!0},T$V.READ_STRINGS=function(){var T$$=[],T$b={offset:0,size:0};T$b.offset=T$V._readData.getUint16(),T$b.size=T$V._readData.getUint16();T$V._readData.pos;T$V._readData.pos=T$b.offset+T$V._DATA.offset;for(var T$u=0;T$u<T$b.size;T$u++){var T$Z=T$V._readData.readUTFString();-1===T$Z.lastIndexOf(".lmat")&&-1===T$Z.lastIndexOf(".lpbr")||T$$.push(T$Z)}return T$$},T$V.formatRelativePath=function(T$$,T$b){var T$u;if("."===T$b.charAt(0)){for(var T$Z=(T$$+T$b).split("/"),T$E=0,T$r=T$Z.length;T$E<T$r;T$E++)if(".."==T$Z[T$E]){var T$F=T$E-1;0<T$F&&".."!==T$Z[T$F]&&(T$Z.splice(T$F,2),T$E-=2)}T$u=T$Z.join("/")}else T$u=T$$+T$b;return null!=T$K.customFormat&&(T$u=T$K.customFormat(T$u,null)),T$u},T$V._eventLoadManagerError=function(T$$){T$P.loader.event("error",T$$)},T$V._addHierarchyInnerUrls=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F=T$V.formatRelativePath(T$Z,T$E);T$u&&(T$F+=T$u),T$$.push({url:T$F,clas:T$r}),T$b[T$E]=T$F},T$V._getSprite3DHierarchyInnerUrls=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){var T$x,T$g=0,T$H=0;switch(T$$.type){case"Scene":var T$w=T$$.customProps.lightmaps;for(T$g=0,T$H=T$w.length;T$g<T$H;T$g++){var T$I=T$w[T$g].replace(".exr",".png");T$V._addHierarchyInnerUrls(T$Z,T$E,T$r,T$F,T$I,T$fb)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var T$o;if(T$$.instanceParams)(T$o=T$$.instanceParams.loadPath)&&T$V._addHierarchyInnerUrls(T$b,T$E,T$r,T$F,T$o,T$cb);else{(T$o=(T$x=T$$.customProps).meshPath)&&T$V._addHierarchyInnerUrls(T$b,T$E,T$r,T$F,T$o,T$cb);var T$N=T$x.materials;if(T$N)for(T$g=0,T$H=T$N.length;T$g<T$H;T$g++){for(var T$D=T$N[T$g],T$e=T$D.type.split("."),T$L=T$v.window,T$T=0,T$_=T$e.length;T$T<T$_;++T$T){T$L=T$L[this.clasPaths[T$T]]}if("function"!=typeof T$L)throw"_getSprite3DHierarchyInnerUrls 错误: "+T$D.type+" 不是类";T$V._addHierarchyInnerUrls(T$u,T$E,T$r,T$F,T$D.path,T$L)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var T$y=(T$x=T$$.customProps).meshPath;T$y&&T$V._addHierarchyInnerUrls(T$b,T$E,T$r,T$F,T$y,T$cb);var T$S=T$x.material;if(T$S){T$e=T$S.type.split("."),T$L=T$v.window;for(T$T=0,T$_=T$e.length;T$T<T$_;++T$T){T$L=T$L[this.clasPaths[T$T]]}T$V._addHierarchyInnerUrls(T$u,T$E,T$r,T$F,T$S.path,T$L)}else{var T$P=T$x.materialPath;if(T$P)T$V._addHierarchyInnerUrls(T$u,T$E,T$r,T$F,T$P,ShurikenParticleMaterial);else{var T$i=T$x.texturePath;T$i&&T$V._addHierarchyInnerUrls(T$Z,T$E,T$r,T$F,T$i,T$fb)}}break;case"Terrain":T$V._addHierarchyInnerUrls(T$Z,T$E,T$r,T$F,T$$.customProps.dataPath,TerrainRes)}var T$z=T$$.components;for(var T$q in T$z){var T$a=T$z[T$q];switch(T$q){case"Animator":var T$t=T$a.avatarPath;if(T$t)T$V._addHierarchyInnerUrls(T$Z,T$E,T$r,T$F,T$t,Avatar);else{var T$C=T$a.avatar;T$C&&T$V._addHierarchyInnerUrls(T$Z,T$E,T$r,T$F,T$C.path,Avatar)}var T$K=T$a.clipPaths;for(T$g=0,T$H=T$K.length;T$g<T$H;T$g++)T$V._addHierarchyInnerUrls(T$Z,T$E,T$r,T$F,T$K[T$g],AnimationClip)}}var T$O=T$$.child;for(T$g=0,T$H=T$O.length;T$g<T$H;T$g++)T$V._getSprite3DHierarchyInnerUrls(T$O[T$g],T$b,T$u,T$Z,T$E,T$r,T$F)},T$V._loadHierarchy=function(T$$){T$$.on("loaded",null,T$V._onHierarchylhLoaded,[T$$,T$$._class._getGroup()]),T$$.load(T$$.url,"json",!1,null,!0)},T$V._onHierarchylhLoaded=function(T$$,T$b,T$u){if(T$$._class.destroyed)T$$.endLoad();else{var T$Z=T$$.url,T$E=T$Lb.getURLVerion(T$Z),T$r=T$K.getPath(T$Z),T$F=[],T$x=[],T$g=[],T$H={};T$V._getSprite3DHierarchyInnerUrls(T$u,T$F,T$x,T$g,T$H,T$E,T$r);var T$w=T$F.length+T$x.length+T$g.length,T$I=T$w+1,T$o=1/T$I;if(T$V._onProcessChange(T$$,0,T$o,1),0<T$g.length){var T$N=T$w/T$I,T$D=T$C.create(null,T$V._onProcessChange,[T$$,T$o,T$N],!1);T$V._innerFourthLevelLoaderManager.create(T$g,T$C.create(null,T$V._onHierarchyInnerForthLevResouLoaded,[T$$,T$b,T$D,T$u,T$H,T$F,T$x,T$o+T$N*T$g.length,T$N]),T$D,null,null,1,!0,T$b)}else T$V._onHierarchyInnerForthLevResouLoaded(T$$,T$b,null,T$u,T$H,T$F,T$x,T$o,T$N)}},T$V._onHierarchyInnerForthLevResouLoaded=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){if(T$$._class.destroyed)T$$.endLoad();else if(T$u&&T$u.recover(),0<T$F.length){var T$H=T$C.create(null,T$V._onProcessChange,[T$$,T$x,T$g],!1);T$V._innerSecondLevelLoaderManager.create(T$F,T$C.create(null,T$V._onHierarchyInnerSecondLevResouLoaded,[T$$,T$b,T$H,T$Z,T$E,T$r,T$x+T$g*T$F.length,T$g]),T$u,null,null,1,!0,T$b)}else T$V._onHierarchyInnerSecondLevResouLoaded(T$$,T$b,null,T$Z,T$E,T$r,T$x,T$g)},T$V._onHierarchyInnerSecondLevResouLoaded=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x){if(T$$._class.destroyed)T$$.endLoad();else if(T$u&&T$u.recover(),0<T$r.length){var T$g=T$C.create(null,T$V._onProcessChange,[T$$,T$F,T$x],!1);T$V._innerFirstLevelLoaderManager.create(T$r,T$C.create(null,T$V._onHierarchyInnerFirstLevResouLoaded,[T$$,T$g,T$Z,T$E]),T$u,null,null,1,!0,T$b)}else T$V._onHierarchyInnerFirstLevResouLoaded(T$$,null,T$Z,T$E)},T$V._onHierarchyInnerFirstLevResouLoaded=function(T$$,T$b,T$u,T$Z){T$b&&T$b.recover(),T$$.endLoad([T$u,T$Z])},T$V._loadTerrain=function(T$$){T$$.on("loaded",null,T$V._onTerrainLtLoaded,[T$$,T$$._class._getGroup()]),T$$.load(T$$.url,"json",!1,null,!0)},T$V._onTerrainLtLoaded=function(T$$,T$b,T$u){if(T$$._class.destroyed)T$$.endLoad();else{var T$Z,T$E,T$r=T$$.url,T$F=T$Lb.getURLVerion(T$r),T$x=T$K.getPath(T$r),T$g=[],T$H={},T$w=0,T$I=0,T$o=T$u.heightData;T$Z=T$o.url,T$E=T$V.formatRelativePath(T$x,T$Z),T$F&&(T$E+=T$F),T$Z=T$H[T$Z]=T$E;var T$N=T$u.detailTexture;for(T$w=0,T$I=T$N.length;T$w<T$I;T$w++)T$g.push({url:T$N[T$w].diffuse});var T$D=T$u.normalMap;for(T$w=0,T$I=T$D.length;T$w<T$I;T$w++)T$g.push({url:T$D[T$w]});var T$e=T$u.alphaMap;for(T$w=0,T$I=T$e.length;T$w<T$I;T$w++)T$g.push({url:T$e[T$w],params:[!1,!1,6408,!0]});for(T$w=0,T$I=T$g.length;T$w<T$I;T$w++){var T$L=T$g[T$w].url;T$E=T$V.formatRelativePath(T$x,T$L),T$F&&(T$E+=T$F),T$g[T$w].url=T$E,T$H[T$L]=T$E}var T$T=T$g.length,T$_=T$T+2,T$y=1/T$_;T$V._onProcessChange(T$$,0,T$y,1);var T$S={heightMapLoaded:!1,texturesLoaded:!1},T$P=T$C.create(null,T$V._onProcessChange,[T$$,T$y,T$y],!1);T$V._innerFourthLevelLoaderManager.create(T$Z,T$C.create(null,T$V._onTerrainHeightMapLoaded,[T$$,T$P,T$u,T$H,T$S]),T$P,null,[T$o.numX,T$o.numZ,T$o.bitType,T$o.value],1,!0,T$b);var T$i=T$C.create(null,T$V._onProcessChange,[T$$,2*T$y,T$T/T$_],!1);T$V._innerFourthLevelLoaderManager.create(T$g,T$C.create(null,T$V._onTerrainTexturesLoaded,[T$$,T$i,T$u,T$H,T$S]),T$i,null,null,1,!0,T$b)}},T$V._onTerrainHeightMapLoaded=function(T$$,T$b,T$u,T$Z,T$E){T$E.heightMapLoaded=!0,T$E.texturesLoaded&&(T$$.endLoad([T$u,T$Z]),T$b.recover())},T$V._onTerrainTexturesLoaded=function(T$$,T$b,T$u,T$Z,T$E){T$E.texturesLoaded=!0,T$E.heightMapLoaded&&(T$$.endLoad([T$u,T$Z]),T$b.recover())},T$V._loadMesh=function(T$$){T$$.on("loaded",null,T$V._onMeshLmLoaded,[T$$,T$$._class._getGroup()]),T$$.load(T$$.url,"arraybuffer",!1,null,!0)},T$V._onMeshLmLoaded=function(T$$,T$b,T$u){if(T$$._class.destroyed)T$$.endLoad();else{var T$Z,T$E,T$r,T$F=T$$.url,T$x=T$Lb.getURLVerion(T$F),T$g=T$K.getPath(T$F),T$H={},T$w=0,T$I=0;switch((T$V._readData=new T$i(T$u)).pos=0,T$V._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var T$o=T$V._readData.getUint32();T$V._readData.pos=T$V._readData.pos+4,T$I=T$V._readData.getUint16(),T$V._readData.pos=T$V._readData.pos+8*T$I;var T$N=T$V._readData.getUint32();for(T$I=T$V._readData.getUint16(),T$V._readData.pos=T$o+T$N,T$Z=[],T$w=0;T$w<T$I;T$w++){var T$D=T$V._readData.readUTFString();-1!==T$D.lastIndexOf(".lmat")&&T$Z.push(T$D)}break;default:for(T$V.READ_BLOCK(),T$w=0;T$w<2;T$w++){var T$e=T$V._readData.getUint16(),T$L=T$V._strings[T$e],T$T=T$V["READ_"+T$L];if(null==T$T)throw new Error("model file err,no this function:"+T$e+" "+T$L);1===T$w?T$Z=T$T.call():T$T.call()}}for(T$w=0,T$r=T$Z.length;T$w<T$r;T$w++){var T$_=T$Z[T$w];T$E=T$V.formatRelativePath(T$g,T$_),T$x&&(T$E+=T$x),T$Z[T$w]=T$E,T$H[T$_]=T$E}if(0<T$Z.length){T$V._onProcessChange(T$$,0,.5,1);var T$y=T$C.create(null,T$V._onProcessChange,[T$$,.5,.5],!1);T$V._innerSecondLevelLoaderManager.create(T$Z,T$C.create(null,T$V._onMeshMateialLoaded,[T$$,T$y,T$u,T$H]),T$y,null,null,1,!0,T$b)}else T$$.endLoad([T$u,T$H])}},T$V._onMeshMateialLoaded=function(T$$,T$b,T$u,T$Z){T$$.endLoad([T$u,T$Z]),T$b.recover()},T$V._getMaterialTexturePath=function(T$$,T$b,T$u){var T$Z=T$$.length-4;return T$$.indexOf(".dds")!=T$Z&&T$$.indexOf(".tga")!=T$Z&&T$$.indexOf(".exr")!=T$Z&&T$$.indexOf(".DDS")!=T$Z&&T$$.indexOf(".TGA")!=T$Z&&T$$.indexOf(".EXR")!=T$Z||(T$$=T$$.substr(0,T$Z)+".png"),T$$=T$V.formatRelativePath(T$u,T$$),T$b&&(T$$+=T$b),T$$},T$V._loadMaterial=function(T$$){T$$.on("loaded",null,T$V._onMaterilLmatLoaded,[T$$,T$$._class._getGroup()]),T$$.load(T$$.url,"json",!1,null,!0)},T$V._onMaterilLmatLoaded=function(T$$,T$b,T$u){if(T$$._class.destroyed)T$$.endLoad();else{var T$Z,T$E=T$$.url,T$r=T$Lb.getURLVerion(T$E),T$F=T$K.getPath(T$E),T$x=[],T$g={},T$H=T$u.customProps,T$w=T$u.version;if(T$w)switch(T$w){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var T$I=T$u.props.textures,T$o=0,T$N=T$I.length;T$o<T$N;T$o++){var T$D=T$I[T$o],T$e=T$D.path;if(T$e){var T$L=T$e.length-4;T$e.indexOf(".exr")!=T$L&&T$e.indexOf(".EXR")!=T$L||(T$e=T$e.substr(0,T$L)+".png"),T$Z=T$V.formatRelativePath(T$F,T$e),T$r&&(T$Z+=T$r),T$x.push({url:T$Z,params:T$D.params}),T$g[T$e]=T$Z}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var T$T=T$H.diffuseTexture.texture2D;if(T$T&&(T$Z=T$V._getMaterialTexturePath(T$T,T$r,T$F),T$x.push(T$Z),T$g[T$T]=T$Z),T$H.normalTexture){var T$_=T$H.normalTexture.texture2D;T$_&&(T$Z=T$V._getMaterialTexturePath(T$_,T$r,T$F),T$x.push(T$Z),T$g[T$_]=T$Z)}if(T$H.specularTexture){var T$y=T$H.specularTexture.texture2D;T$y&&(T$Z=T$V._getMaterialTexturePath(T$y,T$r,T$F),T$x.push(T$Z),T$g[T$y]=T$Z)}if(T$H.emissiveTexture){var T$S=T$H.emissiveTexture.texture2D;T$S&&(T$Z=T$V._getMaterialTexturePath(T$S,T$r,T$F),T$x.push(T$Z),T$g[T$S]=T$Z)}if(T$H.ambientTexture){var T$P=T$H.ambientTexture.texture2D;T$P&&(T$Z=T$V._getMaterialTexturePath(T$P,T$r,T$F),T$x.push(T$Z),T$g[T$P]=T$Z)}if(T$H.reflectTexture){var T$i=T$H.reflectTexture.texture2D;T$i&&(T$Z=T$V._getMaterialTexturePath(T$i,T$r,T$F),T$x.push(T$Z),T$g[T$i]=T$Z)}}var T$z=T$x.length,T$q=T$z+1,T$a=1/T$q;if(T$V._onProcessChange(T$$,0,T$a,1),0<T$z){var T$t=T$C.create(null,T$V._onProcessChange,[T$$,T$a,T$z/T$q],!1);T$V._innerFourthLevelLoaderManager.create(T$x,T$C.create(null,T$V._onMateialTexturesLoaded,[T$$,T$t,T$u,T$g]),T$t,T$fb,null,1,!0,T$b)}else T$V._onMateialTexturesLoaded(T$$,null,T$u,null)}},T$V._onMateialTexturesLoaded=function(T$$,T$b,T$u,T$Z){T$$.endLoad([T$u,T$Z]),T$b&&T$b.recover()},T$V._loadTextureCube=function(T$$){T$$.on("loaded",null,T$V._onTextureCubeLtcLoaded,[T$$]),T$$.load(T$$.url,"json",!1,null,!0)},T$V._onTextureCubeLtcLoaded=function(T$$,T$b){if(T$$._class.destroyed)T$$.endLoad();else{var T$u=T$K.getPath(T$$.url),T$Z=[T$V.formatRelativePath(T$u,T$b.px),T$V.formatRelativePath(T$u,T$b.nx),T$V.formatRelativePath(T$u,T$b.py),T$V.formatRelativePath(T$u,T$b.ny),T$V.formatRelativePath(T$u,T$b.pz),T$V.formatRelativePath(T$u,T$b.nz)];T$V._onProcessChange(T$$,0,1/7,1);var T$E=T$C.create(null,T$V._onProcessChange,[T$$,1/7,6/7],!1);T$V._innerFourthLevelLoaderManager.load(T$Z,T$C.create(null,T$V._onTextureCubeImagesLoaded,[T$$,T$Z,T$E]),T$E,"nativeimage")}},T$V._onTextureCubeImagesLoaded=function(T$$,T$b,T$u){var T$Z=[];T$Z.length=6;for(var T$E=0;T$E<6;T$E++){var T$r=T$b[T$E];T$Z[T$E]=T$T.getRes(T$r),T$T.clearRes(T$r)}T$$.endLoad(T$Z),T$u.recover()},T$V._onProcessChange=function(T$$,T$b,T$u,T$Z){(T$Z=T$b+T$Z*T$u)<1&&T$$.event("progress",T$Z)},T$V.init=function(T$$,T$b,T$u,T$Z,T$E,T$r){if(void 0===T$u&&(T$u=!1),void 0===T$Z&&(T$Z=!1),void 0===T$E&&(T$E=!0),void 0===T$r&&(T$r=!0),T$_.update3DLoop=function(){},T$_.cancelLoadByUrl=function(T$$){T$V._cancelLoadByUrl(T$$)},T$g.isAntialias=T$u,T$g.isAlpha=T$Z,T$g.premultipliedAlpha=T$E,T$g.isStencil=T$r,!T$O.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");T$_.changeWebGLSize=T$V._changeWebGLSize,T$e.is3DMode=!0,T$P.init(T$$,T$b),T$p.__init__(),T$Ib.__init__(),T$Ab.__init__(),T$n.__init__(),T$V.__init__(),T$F.maxTextureCount=2,(T$V.debugMode||T$h.debugMode)&&(T$V._debugPhasorSprite=new T$W)},T$V.HIERARCHY="SPRITE3DHIERARCHY",T$V.MESH="MESH",T$V.MATERIAL="MATERIAL",T$V.PBRMATERIAL="PBRMTL",T$V.TEXTURECUBE="TEXTURECUBE",T$V.TERRAIN="TERRAIN",T$V._readData=null,T$V._debugPhasorSprite=null,T$V.debugMode=!1,T$I(T$V,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new T$b},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new T$b},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new T$b},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new T$b}]),T$V}(),T$_b=function(T$$){function T$E(T$$){T$E.__super.call(this),this._owner=T$$,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}T$N(T$E,"laya.d3.animation.AnimationTransform3D",T$r);var T$b=T$E.prototype;return T$b._getlocalMatrix=function(){return this._localUpdate&&(T$Lb._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},T$b._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var T$$=0,T$b=this._childs.length;T$$<T$b;T$$++)this._childs[T$$]._onWorldTransform()}},T$b._setWorldMatrixAndUpdate=function(T$$){if(this._worldMatrix=T$$,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var T$b=this._getlocalMatrix(),T$u=0;T$u<16;++T$u)this._worldMatrix[T$u]=T$b[T$u];else T$Lb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},T$b._setWorldMatrixNoUpdate=function(T$$){this._worldMatrix=T$$},T$b._setWorldMatrixIgnoreUpdate=function(T$$){this._worldMatrix=T$$,this._worldUpdate=!1},T$b.getLocalPosition=function(){return this._localPosition},T$b.setLocalPosition=function(T$$){if(this._parent)this._localPosition=T$$,this._localUpdate=!0,this._onWorldTransform();else{var T$b=this._entity.owner._transform,T$u=this._entity.localPosition,T$Z=T$u.elements;T$Z[0]=T$$[0],T$Z[1]=T$$[1],T$Z[2]=T$$[2],T$b.localPosition=T$u}},T$b.getLocalRotation=function(){if(this._localQuaternionUpdate){var T$$=this._localRotationEuler;T$Lb._quaternionCreateFromYawPitchRollArray(T$$[1]/T$E._angleToRandin,T$$[0]/T$E._angleToRandin,T$$[2]/T$E._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},T$b.setLocalRotation=function(T$$){if(this._parent)this._localRotation=T$$,T$Lb.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var T$b=this._entity.owner._transform,T$u=this._entity.localRotation,T$Z=T$u.elements;T$Z[0]=T$$[0],T$Z[1]=T$$[1],T$Z[2]=T$$[2],T$Z[3]=T$$[3],T$b.localRotation=T$u}},T$b.getLocalScale=function(){return this._localScale},T$b.setLocalScale=function(T$$){if(this._parent)this._localScale=T$$,this._localUpdate=!0,this._onWorldTransform();else{var T$b=this._entity.owner._transform,T$u=this._entity.localScale,T$Z=T$u.elements;T$Z[0]=T$$[0],T$Z[1]=T$$[1],T$Z[2]=T$$[2],T$b.localScale=T$u}},T$b.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){T$Lb.getYawPitchRoll(this._localRotation,T$E._tempVector3);var T$$=T$E._tempVector3,T$b=this._localRotationEuler;T$b[0]=T$$[1]*T$E._angleToRandin,T$b[1]=T$$[0]*T$E._angleToRandin,T$b[2]=T$$[2]*T$E._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},T$b.setLocalRotationEuler=function(T$$){if(this._parent)T$Lb._quaternionCreateFromYawPitchRollArray(T$$[1]/T$E._angleToRandin,T$$[0]/T$E._angleToRandin,T$$[2]/T$E._angleToRandin,this._localRotation),this._localRotationEuler=T$$,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var T$b=this._entity.owner._transform,T$u=this._entity.localRotationEuler,T$Z=T$u.elements;T$Z[0]=T$$[0],T$Z[1]=T$$[1],T$Z[2]=T$$[2],T$b.localRotationEuler=T$u}},T$b.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)T$Lb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var T$$=this._getlocalMatrix(),T$b=0;T$b<16;++T$b)this._worldMatrix[T$b]=T$$[T$b];this._worldUpdate=!1}return this._worldMatrix},T$b.setParent=function(T$$){if(this._parent!==T$$){if(this._parent){var T$b=this._parent._childs,T$u=T$b.indexOf(this);T$b.splice(T$u,1)}T$$&&(T$$._childs.push(this),T$$&&this._onWorldTransform()),this._parent=T$$}},T$I(T$E,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),T$E}(),T$yb=function(T$$){function T$b(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,T$b.__super.call(this),this._destroyed=!1,this._id=T$b._uniqueIDCounter,T$b._uniqueIDCounter++}T$N(T$b,"laya.d3.component.Component3D",T$r);var T$u=T$b.prototype;return T$P.imps(T$u,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),T$u._initialize=function(T$$){this._owner=T$$,this._enable=!0,this.started=!1,this._load(T$$)},T$u._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},T$u._load=function(T$$){},T$u._start=function(T$$){},T$u._update=function(T$$){},T$u._lateUpdate=function(T$$){},T$u._preRenderUpdate=function(T$$){},T$u._postRenderUpdate=function(T$$){},T$u._unload=function(T$$){this.offAll()},T$u._cloneTo=function(T$$){},T$D(0,T$u,"id",function(){return this._id}),T$D(0,T$u,"destroyed",function(){return this._destroyed}),T$D(0,T$u,"owner",function(){return this._owner}),T$D(0,T$u,"enable",function(){return this._enable},function(T$$){this._enable!==T$$&&(this._enable=T$$,this.event("enablechanged",this._enable))}),T$D(0,T$u,"isSingleton",function(){return T$b._isSingleton}),T$b._isSingleton=!0,T$b._uniqueIDCounter=1,T$b}(),T$Sb=function(T$$){function T$b(){this._destroyed=!1,T$b.__super.call(this),this._destroyed=!1}T$N(T$b,"laya.d3.core.GeometryFilter",T$r);var T$u=T$b.prototype;return T$P.imps(T$u,{"laya.resource.IDestroy":!0}),T$u._destroy=function(){this.offAll(),this._destroyed=!0},T$D(0,T$u,"_isAsyncLoaded",function(){return!0}),T$D(0,T$u,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),T$D(0,T$u,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),T$D(0,T$u,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),T$D(0,T$u,"destroyed",function(){return this._destroyed}),T$b}(),T$Pb=function(T$$){function T$Z(T$$){T$Z.__super.call(this),this._id=++T$Z._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new T$h$(new T$Fb,new T$Fb),this._boundingBoxCenter=new T$Fb,this._boundingSphere=new T$U$(new T$Fb,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=T$$,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}T$N(T$Z,"laya.d3.core.render.BaseRender",T$r);var T$b=T$Z.prototype;return T$P.imps(T$b,{"laya.resource.IDestroy":!0}),T$b._changeMaterialReference=function(T$$,T$b){T$$&&T$$._removeReference(),T$b._addReference()},T$b._getInstanceMaterial=function(T$$,T$b){var T$u=new T$$.constructor;return T$$.cloneTo(T$u),T$u.name=T$u.name+"(Instance)",this._materialsInstance[T$b]=!0,this._changeMaterialReference(this._materials[T$b],T$u),this._materials[T$b]=T$u},T$b._setShaderValuelightMap=function(T$$){this._setShaderValueTexture(3,T$$)},T$b._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},T$b._renderRenderableBoundBox=function(){var T$$=T$Tb._debugPhasorSprite,T$b=this.boundingBox,T$u=T$Z._tempBoundBoxCorners;T$b.getCorners(T$u),T$$.line(T$u[0],T$Z._greenColor,T$u[1],T$Z._greenColor),T$$.line(T$u[2],T$Z._greenColor,T$u[3],T$Z._greenColor),T$$.line(T$u[4],T$Z._greenColor,T$u[5],T$Z._greenColor),T$$.line(T$u[6],T$Z._greenColor,T$u[7],T$Z._greenColor),T$$.line(T$u[0],T$Z._greenColor,T$u[3],T$Z._greenColor),T$$.line(T$u[1],T$Z._greenColor,T$u[2],T$Z._greenColor),T$$.line(T$u[2],T$Z._greenColor,T$u[6],T$Z._greenColor),T$$.line(T$u[3],T$Z._greenColor,T$u[7],T$Z._greenColor),T$$.line(T$u[0],T$Z._greenColor,T$u[4],T$Z._greenColor),T$$.line(T$u[1],T$Z._greenColor,T$u[5],T$Z._greenColor),T$$.line(T$u[4],T$Z._greenColor,T$u[7],T$Z._greenColor),T$$.line(T$u[5],T$Z._greenColor,T$u[6],T$Z._greenColor)},T$b._calculateBoundingSphere=function(){throw"BaseRender: must override it."},T$b._calculateBoundingBox=function(){throw"BaseRender: must override it."},T$b._setShaderValueTexture=function(T$$,T$b){this._owner._shaderValues.setValue(T$$,T$b)},T$b._setShaderValueMatrix4x4=function(T$$,T$b){this._owner._shaderValues.setValue(T$$,T$b?T$b.elements:null)},T$b._setShaderValueColor=function(T$$,T$b){this._owner._shaderValues.setValue(T$$,T$b?T$b.elements:null)},T$b._setShaderValueBuffer=function(T$$,T$b){this._owner._shaderValues.setValue(T$$,T$b)},T$b._setShaderValueInt=function(T$$,T$b){this._owner._shaderValues.setValue(T$$,T$b)},T$b._setShaderValueBool=function(T$$,T$b){this._owner._shaderValues.setValue(T$$,T$b)},T$b._setShaderValueNumber=function(T$$,T$b){this._owner._shaderValues.setValue(T$$,T$b)},T$b._setShaderValueVector2=function(T$$,T$b){this._owner._shaderValues.setValue(T$$,T$b?T$b.elements:null)},T$b._addShaderDefine=function(T$$){this._owner._shaderDefineValue|=T$$},T$b._removeShaderDefine=function(T$$){this._owner._shaderDefineValue&=~T$$},T$b._renderUpdate=function(T$$){return!0},T$b._applyLightMapParams=function(){if(0<=this._lightmapIndex){var T$$=this._owner.scene;if(T$$){var T$b=T$$.getlightmaps()[this._lightmapIndex];T$b?(this._addShaderDefine(T$Wb.SAHDERDEFINE_LIGHTMAP),T$b.loaded?this._setShaderValuelightMap(T$b):T$b.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(T$Wb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(T$Wb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(T$Wb.SAHDERDEFINE_LIGHTMAP)},T$b._updateOctreeNode=function(){var T$$=this._treeNode;T$$&&this._octreeNodeNeedChange&&(T$$.updateObject(this),this._octreeNodeNeedChange=!1)},T$b._destroy=function(){this.offAll();var T$$=0,T$b=0;for(T$$=0,T$b=this._renderElements.length;T$$<T$b;T$$++)this._renderElements[T$$]._destroy();for(T$$=0,T$b=this._materials.length;T$$<T$b;T$$++)this._materials[T$$]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},T$D(0,T$b,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),T$D(0,T$b,"id",function(){return this._id}),T$D(0,T$b,"material",function(){var T$$=this._materials[0];if(T$$&&!this._materialsInstance[0]){var T$b=this._getInstanceMaterial(T$$,0);this.event("materialchanged",[this,0,T$b])}return this._materials[0]},function(T$$){this.sharedMaterial=T$$}),T$D(0,T$b,"sharedMaterial",function(){return this._materials[0]},function(T$$){var T$b=this._materials[0];T$b!==T$$&&(this._materials[0]=T$$,this._materialsInstance[0]=!1,this._changeMaterialReference(T$b,T$$),this.event("materialchanged",[this,0,T$$]))}),T$D(0,T$b,"lightmapIndex",function(){return this._lightmapIndex},function(T$$){this._lightmapIndex=T$$,this._applyLightMapParams()}),T$D(0,T$b,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(T$$){this._lightmapScaleOffset=T$$,this._setShaderValueColor(2,T$$),this._addShaderDefine(T$Wb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),T$D(0,T$b,"enable",function(){return this._enable},function(T$$){this._enable=T$$,this.event("enablechanged",[this,T$$])}),T$D(0,T$b,"materials",function(){for(var T$$=0,T$b=this._materials.length;T$$<T$b;T$$++)if(!this._materialsInstance[T$$]){var T$u=this._getInstanceMaterial(this._materials[T$$],T$$);this.event("materialchanged",[this,T$$,T$u])}return this._materials.slice()},function(T$$){this.sharedMaterials=T$$}),T$D(0,T$b,"sharedMaterials",function(){return this._materials.slice()},function(T$$){if(!T$$)throw new Error("MeshRender: shadredMaterials value can't be null.");var T$b=T$$.length;this._materialsInstance.length=T$b;for(var T$u=0;T$u<T$b;T$u++){var T$Z=this._materials[T$u];T$Z!==T$$[T$u]&&(this._materialsInstance[T$u]=!1,this._changeMaterialReference(T$Z,T$$[T$u]),this.event("materialchanged",[this,T$u,T$$[T$u]]))}this._materials=T$$}),T$D(0,T$b,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),T$D(0,T$b,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var T$$=this.boundingBox;T$Fb.add(T$$.min,T$$.max,this._boundingBoxCenter),T$Fb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),T$D(0,T$b,"receiveShadow",function(){return this._receiveShadow},function(T$$){this._receiveShadow!==T$$&&((this._receiveShadow=T$$)?this._addShaderDefine(T$Nb.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(T$Nb.SHADERDEFINE_RECEIVE_SHADOW))}),T$D(0,T$b,"destroyed",function(){return this._destroyed}),T$Z._uniqueIDCounter=0,T$I(T$Z,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb,new T$Fb]},"_greenColor",function(){return this._greenColor=new T$xb(0,1,0,1)}]),T$Z}(),T$ib=function(T$$){function T$x(T$$){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,T$x.__super.call(this),this._localPosition=new T$Fb,this._localRotation=new T$ub(0,0,0,1),this._localScale=new T$Fb(1,1,1),this._localRotationEuler=new T$Fb,this._localMatrix=new T$$b,this._position=new T$Fb,this._rotation=new T$ub(0,0,0,1),this._scale=new T$Fb(1,1,1),this._worldMatrix=new T$$b,this._forward=new T$Fb,this._up=new T$Fb,this._right=new T$Fb,this._owner=T$$,this._childs=[]}T$N(T$x,"laya.d3.core.Transform3D",T$r);var T$b=T$x.prototype;return T$b._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)T$$b.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var T$$=T$x._tempVector30;T$Fb.multiply(this.pivot,this._localScale,T$$);var T$b=T$x._tempVector31;T$Fb.subtract(T$$,this.pivot,T$b);var T$u=T$x._tempVector32,T$Z=this.localRotation;T$Fb.transformQuat(T$$,T$Z,T$u),T$Fb.subtract(T$u,T$$,T$u);var T$E=T$x._tempVector33;T$Fb.subtract(this._localPosition,T$b,T$E),T$Fb.subtract(T$E,T$u,T$E),T$$b.createAffineTransformation(T$E,T$Z,this._localScale,this._localMatrix)}},T$b._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var T$$=0,T$b=this._childs.length;T$$<T$b;T$$++)this._childs[T$$]._onWorldPositionRotationTransform()}},T$b._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$$=0,T$b=this._childs.length;T$$<T$b;T$$++)this._childs[T$$]._onWorldPositionScaleTransform()}},T$b._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var T$$=0,T$b=this._childs.length;T$$<T$b;T$$++)this._childs[T$$]._onWorldPositionTransform()}},T$b._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var T$$=0,T$b=this._childs.length;T$$<T$b;T$$++)this._childs[T$$]._onWorldPositionRotationTransform()}},T$b._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$$=0,T$b=this._childs.length;T$$<T$b;T$$++)this._childs[T$$]._onWorldPositionScaleTransform()}},T$b._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var T$$=0,T$b=this._childs.length;T$$<T$b;T$$++)this._childs[T$$]._onWorldTransform()}},T$b.translate=function(T$$,T$b){void 0===T$b&&(T$b=!0),T$b?(T$$b.createFromQuaternion(this.localRotation,T$x._tempMatrix0),T$Fb.transformCoordinate(T$$,T$x._tempMatrix0,T$x._tempVector30),T$Fb.add(this.localPosition,T$x._tempVector30,this._localPosition),this.localPosition=this._localPosition):(T$Fb.add(this.position,T$$,this._position),this.position=this._position)},T$b.rotate=function(T$$,T$b,T$u){var T$Z;void 0===T$b&&(T$b=!0),void 0===T$u&&(T$u=!0),T$Z=T$u?T$$:(T$Fb.scale(T$$,Math.PI/180,T$x._tempVector30),T$x._tempVector30),T$ub.createFromYawPitchRoll(T$Z.y,T$Z.x,T$Z.z,T$x._tempQuaternion0),T$b?(T$ub.multiply(this._localRotation,T$x._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(T$ub.multiply(T$x._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},T$b.lookAt=function(T$$,T$b,T$u){void 0===T$u&&(T$u=!1);var T$Z,T$E=T$$.elements;if(T$u){if(T$Z=this._localPosition.elements,Math.abs(T$Z[0]-T$E[0])<T$B$.zeroTolerance&&Math.abs(T$Z[1]-T$E[1])<T$B$.zeroTolerance&&Math.abs(T$Z[2]-T$E[2])<T$B$.zeroTolerance)return;T$ub.lookAt(this._localPosition,T$$,T$b,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var T$r=this.position;if(T$Z=T$r.elements,Math.abs(T$Z[0]-T$E[0])<T$B$.zeroTolerance&&Math.abs(T$Z[1]-T$E[1])<T$B$.zeroTolerance&&Math.abs(T$Z[2]-T$E[2])<T$B$.zeroTolerance)return;T$ub.lookAt(T$r,T$$,T$b,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},T$D(0,T$b,"_isFrontFaceInvert",function(){var T$$=this.scale,T$b=T$$.x<0;return T$$.y<0&&(T$b=!T$b),T$$.z<0&&(T$b=!T$b),T$b}),T$D(0,T$b,"owner",function(){return this._owner}),T$D(0,T$b,"localRotation",function(){if(this._localQuaternionUpdate){var T$$=this._localRotationEuler.elements;T$ub.createFromYawPitchRoll(T$$[1]/T$x._angleToRandin,T$$[0]/T$x._angleToRandin,T$$[2]/T$x._angleToRandin,this._localRotation)}return this._localRotation},function(T$$){this._localRotation=T$$,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),T$D(0,T$b,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?T$$b.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(T$$){null===this._parent?T$$.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),T$$b.multiply(this._localMatrix,T$$,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=T$$,this._worldUpdate=!1}),T$D(0,T$b,"worldNeedUpdate",function(){return this._worldUpdate}),T$D(0,T$b,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(T$$){this._localMatrix=T$$,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),T$D(0,T$b,"dummy",function(){return this._dummy},function(T$$){this._dummy!==T$$&&(this._dummy&&(this._dummy._entity=null),T$$&&(T$$._entity=this),this._dummy=T$$)}),T$D(0,T$b,"localPosition",function(){return this._localPosition},function(T$$){this._localPosition=T$$,this._localUpdate=!0,this._onWorldPositionTransform()}),T$D(0,T$b,"position",function(){if(this._positionUpdate){if(null!=this._parent){var T$$=this._parent.position;T$Fb.multiply(this._localPosition,this._parent.scale,T$x._tempVector30),T$Fb.transformQuat(T$x._tempVector30,this._parent.rotation,T$x._tempVector30),T$Fb.add(T$$,T$x._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(T$$){if(null!=this._parent){T$Fb.subtract(T$$,this._parent.position,this._localPosition);var T$b=this._parent.scale.elements,T$u=T$b[0],T$Z=T$b[1],T$E=T$b[2];if(1!==T$u||1!==T$Z||1!==T$E){var T$r=T$x._tempVector30,T$F=T$r.elements;T$F[0]=1/T$u,T$F[1]=1/T$Z,T$F[2]=1/T$E,T$Fb.multiply(this._localPosition,T$r,this._localPosition)}this._parent.rotation.invert(T$x._tempQuaternion0),T$Fb.transformQuat(this._localPosition,T$x._tempQuaternion0,this._localPosition)}else T$$.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=T$$,this._positionUpdate=!1}),T$D(0,T$b,"localScale",function(){return this._localScale},function(T$$){this._localScale=T$$,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),T$D(0,T$b,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(T$x._tempVector30);var T$$=T$x._tempVector30.elements,T$b=this._localRotationEuler.elements;T$b[0]=T$$[1]*T$x._angleToRandin,T$b[1]=T$$[0]*T$x._angleToRandin,T$b[2]=T$$[2]*T$x._angleToRandin}return this._localRotationEuler},function(T$$){this._localRotationEuler=T$$,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),T$D(0,T$b,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?T$ub.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(T$$){null!=this._parent?(this._parent.rotation.invert(T$x._tempQuaternion0),T$ub.multiply(T$$,T$x._tempQuaternion0,this._localRotation)):T$$.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=T$$,this._rotationUpdate=!1}),T$D(0,T$b,"scale",function(){return this._scaleUpdate&&(null!==this._parent?T$Fb.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(T$$){if(null!==this._parent){var T$b=this._parent.scale.elements,T$u=T$x._tempVector30.elements;T$u[0]=1/T$b[0],T$u[1]=1/T$b[1],T$u[2]=1/T$b[2],T$Fb.multiply(T$$,T$x._tempVector30,this._localScale)}else T$$.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=T$$,this._scaleUpdate=!1}),T$D(0,T$b,"rotationEuler",null,function(T$$){T$ub.createFromYawPitchRoll(T$$.y,T$$.x,T$$.z,this._rotation),this.rotation=this._rotation}),T$D(0,T$b,"forward",function(){var T$$=this.worldMatrix.elements;return this._forward.elements[0]=-T$$[8],this._forward.elements[1]=-T$$[9],this._forward.elements[2]=-T$$[10],this._forward}),T$D(0,T$b,"up",function(){var T$$=this.worldMatrix.elements;return this._up.elements[0]=T$$[4],this._up.elements[1]=T$$[5],this._up.elements[2]=T$$[6],this._up}),T$D(0,T$b,"right",function(){var T$$=this.worldMatrix.elements;return this._right.elements[0]=T$$[0],this._right.elements[1]=T$$[1],this._right.elements[2]=T$$[2],this._right}),T$D(0,T$b,"parent",function(){return this._parent},function(T$$){if(this._parent!==T$$){if(this._parent){var T$b=this._parent._childs,T$u=T$b.indexOf(this);T$b.splice(T$u,1)}T$$&&(T$$._childs.push(this),T$$&&this._onWorldTransform()),this._parent=T$$}}),T$I(T$x,["_tempVector30",function(){return this._tempVector30=new T$Fb},"_tempVector31",function(){return this._tempVector31=new T$Fb},"_tempVector32",function(){return this._tempVector32=new T$Fb},"_tempVector33",function(){return this._tempVector33=new T$Fb},"_tempQuaternion0",function(){return this._tempQuaternion0=new T$ub},"_tempMatrix0",function(){return this._tempMatrix0=new T$$b},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),T$x}(),T$zb=(function(T$$){function T$b(){this._rotation=0,this._matNeedUpdte=!1,T$b.__super.call(this),this._matrix=new T$$b,this._offset=new T$rb,this._tiling=new T$rb(1,1)}T$N(T$b,"laya.d3.core.TransformUV",T$r);var T$u=T$b.prototype;T$P.imps(T$u,{"laya.d3.core.IClone":!0}),T$u._updateMatrix=function(){T$b._tempOffsetV3.elements[0]=this._offset.x,T$b._tempOffsetV3.elements[1]=this._offset.y,T$ub.createFromYawPitchRoll(0,0,this._rotation,T$b._tempRotationQua),T$b._tempTitlingV3.elements[0]=this._tiling.x,T$b._tempTitlingV3.elements[1]=this._tiling.y,T$$b.createAffineTransformation(T$b._tempOffsetV3,T$b._tempRotationQua,T$b._tempTitlingV3,this._matrix)},T$u.cloneTo=function(T$$){T$$._matrix=this._matrix.clone(),T$$._offset=this._offset.clone(),T$$._rotation=this._rotation,T$$._tiling=this._tiling.clone()},T$u.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$u,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),T$D(0,T$u,"tiling",function(){return this._tiling},function(T$$){this._tiling=T$$,this._matNeedUpdte=!0}),T$D(0,T$u,"offset",function(){return this._offset},function(T$$){this._offset=T$$,this._matNeedUpdte=!0}),T$D(0,T$u,"rotation",function(){return this._rotation},function(T$$){this._rotation=T$$,this._matNeedUpdte=!0}),T$I(T$b,["_tempOffsetV3",function(){return this._tempOffsetV3=new T$Fb(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new T$ub},"_tempTitlingV3",function(){return this._tempTitlingV3=new T$Fb(1,1,1)}])}(),function(T$u){function T$$(){this.x=NaN,this.y=NaN,this.z=NaN,T$$.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}T$N(T$$,"laya.d3.core.particleShuriKen.module.shape.BoxShape",T$u);var T$b=T$$.prototype;T$b._getShapeBoundBox=function(T$$){var T$b=T$$.min.elements;T$b[0]=.5*-this.x,T$b[1]=.5*-this.y,T$b[2]=.5*-this.z;var T$u=T$$.max.elements;T$u[0]=.5*this.x,T$u[1]=.5*this.y,T$u[2]=.5*this.z},T$b._getSpeedBoundBox=function(T$$){var T$b=T$$.min.elements;T$b[0]=0,T$b[1]=0,T$b[2]=0;var T$u=T$$.max.elements;T$u[0]=0,T$u[1]=1,T$u[2]=0},T$b.generatePositionAndDirection=function(T$$,T$b,T$u,T$Z){var T$E=T$$.elements,T$r=T$b.elements;T$u?(T$u.seed=T$Z[16],T$f._randomPointInsideHalfUnitBox(T$$,T$u),T$Z[16]=T$u.seed):T$f._randomPointInsideHalfUnitBox(T$$),T$E[0]=this.x*T$E[0],T$E[1]=this.y*T$E[1],T$E[2]=this.z*T$E[2],this.randomDirection?T$u?(T$u.seed=T$Z[17],T$f._randomPointUnitSphere(T$b,T$u),T$Z[17]=T$u.seed):T$f._randomPointUnitSphere(T$b):(T$r[0]=0,T$r[1]=0,T$r[2]=1)},T$b.cloneTo=function(T$$){T$u.prototype.cloneTo.call(this,T$$);var T$b=T$$;T$b.x=this.x,T$b.y=this.y,T$b.z=this.z,T$b.randomDirection=this.randomDirection}}(T$s),function(T$u){function T$F(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,T$F.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}T$N(T$F,"laya.d3.core.particleShuriKen.module.shape.CircleShape",T$u);var T$$=T$F.prototype;T$$._getShapeBoundBox=function(T$$){var T$b=T$$.min.elements;T$b[0]=T$b[2]=-this.radius,T$b[1]=0;var T$u=T$$.max.elements;T$u[0]=T$u[2]=this.radius,T$u[1]=0},T$$._getSpeedBoundBox=function(T$$){var T$b=T$$.min.elements;T$b[0]=T$b[1]=-1,T$b[2]=0;var T$u=T$$.max.elements;T$u[0]=T$u[1]=1,T$u[2]=0},T$$.generatePositionAndDirection=function(T$$,T$b,T$u,T$Z){var T$E=T$$.elements,T$r=T$F._tempPositionPoint.elements;T$u?(T$u.seed=T$Z[16],this.emitFromEdge?T$f._randomPointUnitArcCircle(this.arc,T$F._tempPositionPoint,T$u):T$f._randomPointInsideUnitArcCircle(this.arc,T$F._tempPositionPoint,T$u),T$Z[16]=T$u.seed):this.emitFromEdge?T$f._randomPointUnitArcCircle(this.arc,T$F._tempPositionPoint):T$f._randomPointInsideUnitArcCircle(this.arc,T$F._tempPositionPoint),T$E[0]=-T$r[0],T$E[1]=T$r[1],T$E[2]=0,T$Fb.scale(T$$,this.radius,T$$),this.randomDirection?T$u?(T$u.seed=T$Z[17],T$f._randomPointUnitSphere(T$b,T$u),T$Z[17]=T$u.seed):T$f._randomPointUnitSphere(T$b):T$$.cloneTo(T$b)},T$$.cloneTo=function(T$$){T$u.prototype.cloneTo.call(this,T$$);var T$b=T$$;T$b.radius=this.radius,T$b.arc=this.arc,T$b.emitFromEdge=this.emitFromEdge,T$b.randomDirection=this.randomDirection},T$I(T$F,["_tempPositionPoint",function(){return this._tempPositionPoint=new T$rb}])}(T$s),function(T$u){function T$o(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,T$o.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}T$N(T$o,"laya.d3.core.particleShuriKen.module.shape.ConeShape",T$u);var T$$=T$o.prototype;T$$._getShapeBoundBox=function(T$$){var T$b=this.radius+this.length*Math.sin(this.angle),T$u=this.length*Math.cos(this.angle),T$Z=T$$.min.elements;T$Z[0]=T$Z[1]=-T$b,T$Z[2]=0;var T$E=T$$.max.elements;T$E[0]=T$E[1]=T$b,T$E[2]=T$u},T$$._getSpeedBoundBox=function(T$$){var T$b=Math.sin(this.angle),T$u=T$$.min.elements;T$u[0]=T$u[1]=-T$b,T$u[2]=0;var T$Z=T$$.max.elements;T$Z[0]=T$u[1]=T$b,T$Z[2]=1},T$$.generatePositionAndDirection=function(T$$,T$b,T$u,T$Z){var T$E,T$r=T$$.elements,T$F=T$b.elements,T$x=T$o._tempPositionPoint.elements,T$g=NaN,T$H=NaN,T$w=Math.cos(this.angle),T$I=Math.sin(this.angle);switch(this.emitType){case 0:T$u?(T$u.seed=T$Z[16],T$f._randomPointInsideUnitCircle(T$o._tempPositionPoint,T$u),T$Z[16]=T$u.seed):T$f._randomPointInsideUnitCircle(T$o._tempPositionPoint),T$g=T$x[0],T$H=T$x[1],T$r[0]=T$g*this.radius,T$r[1]=T$H*this.radius,T$r[2]=0,this.randomDirection?(T$u?(T$u.seed=T$Z[17],T$f._randomPointInsideUnitCircle(T$o._tempDirectionPoint,T$u),T$Z[17]=T$u.seed):T$f._randomPointInsideUnitCircle(T$o._tempDirectionPoint),T$E=T$o._tempDirectionPoint.elements,T$F[0]=T$E[0]*T$I,T$F[1]=T$E[1]*T$I):(T$F[0]=T$g*T$I,T$F[1]=T$H*T$I),T$F[2]=T$w;break;case 1:T$u?(T$u.seed=T$Z[16],T$f._randomPointUnitCircle(T$o._tempPositionPoint,T$u),T$Z[16]=T$u.seed):T$f._randomPointUnitCircle(T$o._tempPositionPoint),T$g=T$x[0],T$H=T$x[1],T$r[0]=T$g*this.radius,T$r[1]=T$H*this.radius,T$r[2]=0,this.randomDirection?(T$u?(T$u.seed=T$Z[17],T$f._randomPointInsideUnitCircle(T$o._tempDirectionPoint,T$u),T$Z[17]=T$u.seed):T$f._randomPointInsideUnitCircle(T$o._tempDirectionPoint),T$E=T$o._tempDirectionPoint.elements,T$F[0]=T$E[0]*T$I,T$F[1]=T$E[1]*T$I):(T$F[0]=T$g*T$I,T$F[1]=T$H*T$I),T$F[2]=T$w;break;case 2:T$u?(T$u.seed=T$Z[16],T$f._randomPointInsideUnitCircle(T$o._tempPositionPoint,T$u)):T$f._randomPointInsideUnitCircle(T$o._tempPositionPoint),T$g=T$x[0],T$H=T$x[1],T$r[0]=T$g*this.radius,T$r[1]=T$H*this.radius,T$F[T$r[2]=0]=T$g*T$I,T$F[1]=T$H*T$I,T$F[2]=T$w,T$Fb.normalize(T$b,T$b),T$u?(T$Fb.scale(T$b,this.length*T$u.getFloat(),T$b),T$Z[16]=T$u.seed):T$Fb.scale(T$b,this.length*Math.random(),T$b),T$Fb.add(T$$,T$b,T$$),this.randomDirection&&(T$u?(T$u.seed=T$Z[17],T$f._randomPointUnitSphere(T$b,T$u),T$Z[17]=T$u.seed):T$f._randomPointUnitSphere(T$b));break;case 3:T$u?(T$u.seed=T$Z[16],T$f._randomPointUnitCircle(T$o._tempPositionPoint,T$u)):T$f._randomPointUnitCircle(T$o._tempPositionPoint),T$g=T$x[0],T$H=T$x[1],T$r[0]=T$g*this.radius,T$r[1]=T$H*this.radius,T$F[T$r[2]=0]=T$g*T$I,T$F[1]=T$H*T$I,T$F[2]=T$w,T$Fb.normalize(T$b,T$b),T$u?(T$Fb.scale(T$b,this.length*T$u.getFloat(),T$b),T$Z[16]=T$u.seed):T$Fb.scale(T$b,this.length*Math.random(),T$b),T$Fb.add(T$$,T$b,T$$),this.randomDirection&&(T$u?(T$u.seed=T$Z[17],T$f._randomPointUnitSphere(T$b,T$u),T$Z[17]=T$u.seed):T$f._randomPointUnitSphere(T$b));break;default:throw new Error("ConeShape:emitType is invalid.")}},T$$.cloneTo=function(T$$){T$u.prototype.cloneTo.call(this,T$$);var T$b=T$$;T$b.angle=this.angle,T$b.radius=this.radius,T$b.length=this.length,T$b.emitType=this.emitType,T$b.randomDirection=this.randomDirection},T$I(T$o,["_tempPositionPoint",function(){return this._tempPositionPoint=new T$rb},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new T$rb}])}(T$s),function(T$u){function T$$(){this.radius=NaN,this.emitFromShell=!1,T$$.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}T$N(T$$,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",T$u);var T$b=T$$.prototype;T$b._getShapeBoundBox=function(T$$){var T$b=T$$.min.elements;T$b[0]=T$b[1]=T$b[2]=-this.radius;var T$u=T$$.max.elements;T$u[0]=T$u[1]=this.radius,T$u[2]=0},T$b._getSpeedBoundBox=function(T$$){var T$b=T$$.min.elements;T$b[0]=T$b[1]=-1,T$b[2]=0;var T$u=T$$.max.elements;T$u[0]=T$u[1]=T$u[2]=1},T$b.generatePositionAndDirection=function(T$$,T$b,T$u,T$Z){var T$E=T$$.elements;T$u?(T$u.seed=T$Z[16],this.emitFromShell?T$f._randomPointUnitSphere(T$$,T$u):T$f._randomPointInsideUnitSphere(T$$,T$u),T$Z[16]=T$u.seed):this.emitFromShell?T$f._randomPointUnitSphere(T$$):T$f._randomPointInsideUnitSphere(T$$),T$Fb.scale(T$$,this.radius,T$$);var T$r=T$E[2];T$r<0&&(T$E[2]=-1*T$r),this.randomDirection?T$u?(T$u.seed=T$Z[17],T$f._randomPointUnitSphere(T$b,T$u),T$Z[17]=T$u.seed):T$f._randomPointUnitSphere(T$b):T$$.cloneTo(T$b)},T$b.cloneTo=function(T$$){T$u.prototype.cloneTo.call(this,T$$);var T$b=T$$;T$b.radius=this.radius,T$b.emitFromShell=this.emitFromShell,T$b.randomDirection=this.randomDirection}}(T$s),function(T$u){function T$$(){this.radius=NaN,this.emitFromShell=!1,T$$.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}T$N(T$$,"laya.d3.core.particleShuriKen.module.shape.SphereShape",T$u);var T$b=T$$.prototype;T$b._getShapeBoundBox=function(T$$){var T$b=T$$.min.elements;T$b[0]=T$b[1]=T$b[2]=-this.radius;var T$u=T$$.max.elements;T$u[0]=T$u[1]=T$u[2]=this.radius},T$b._getSpeedBoundBox=function(T$$){var T$b=T$$.min.elements;T$b[0]=T$b[1]=T$b[2]=-1;var T$u=T$$.max.elements;T$u[0]=T$u[1]=T$u[2]=1},T$b.generatePositionAndDirection=function(T$$,T$b,T$u,T$Z){T$u?(T$u.seed=T$Z[16],this.emitFromShell?T$f._randomPointUnitSphere(T$$,T$u):T$f._randomPointInsideUnitSphere(T$$,T$u),T$Z[16]=T$u.seed):this.emitFromShell?T$f._randomPointUnitSphere(T$$):T$f._randomPointInsideUnitSphere(T$$),T$Fb.scale(T$$,this.radius,T$$),this.randomDirection?T$u?(T$u.seed=T$Z[17],T$f._randomPointUnitSphere(T$b,T$u),T$Z[17]=T$u.seed):T$f._randomPointUnitSphere(T$b):T$$.cloneTo(T$b)},T$b.cloneTo=function(T$$){T$u.prototype.cloneTo.call(this,T$$);var T$b=T$$;T$b.radius=this.radius,T$b.emitFromShell=this.emitFromShell,T$b.randomDirection=this.randomDirection}}(T$s),function(T$$){function T$b(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,T$b.__super.call(this)}return T$N(T$b,"laya.d3.core.render.SubMeshRenderElement",T$G),T$b}()),T$qb=function(T$$){function T$L(T$$,T$b,T$u,T$Z,T$E,T$r){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=T$$,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[T$Nb.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[T$Wb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[T$Wb.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[T$Kb.SHADERDEFINE_ALPHATEST]="ALPHATEST";T$L.__super.call(this,T$$,T$b,T$u,null,{}),this._attributeMap=T$Z;var T$F;for(T$F in T$E){var T$x=T$E[T$F];switch(T$x[1]){case 0:this._renderElementUniformMap[T$F]=T$x[0];break;case 1:this._materialUniformMap[T$F]=T$x[0];break;case 2:this._spriteUniformMap[T$F]=T$x[0];break;case 3:this._cameraUniformMap[T$F]=T$x[0];break;case 4:this._sceneUniformMap[T$F]=T$x[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}T$N(T$L,"laya.d3.shader.ShaderCompile3D",T$y);var T$b=T$L.prototype;return T$b._definesToNameDic=function(T$$,T$b){for(var T$u={},T$Z=1,T$E=0;T$E<32&&!(T$$<(T$Z=1<<T$E));T$E++)if(T$$&T$Z){var T$r=T$b[T$Z];T$r&&(T$u[T$r]="")}return T$u},T$b.withCompile=function(T$$,T$b,T$u,T$Z){var T$E,T$r,T$F;if(T$r=this.sharders[T$$])if(T$F=T$r[T$b]){if(T$E=T$F[T$u])return T$E}else T$F=T$r[T$b]=[];else T$F=(T$r=this.sharders[T$$]=[])[T$b]=[];var T$x,T$g=this._definesToNameDic(T$$,T$L._globalInt2name),T$H=this._definesToNameDic(T$b,this._spriteInt2name),T$w=this._definesToNameDic(T$u,this._materialInt2name),T$I={},T$o="";if(T$g)for(T$x in T$g)T$o+="#define "+T$x+"\n",T$I[T$x]=!0;if(T$H)for(T$x in T$H)T$o+="#define "+T$x+"\n",T$I[T$x]=!0;if(T$w)for(T$x in T$w)T$o+="#define "+T$x+"\n",T$I[T$x]=!0;var T$N=T$Mb.nameKey.getName(this._name)+" compile ("+T$$+","+T$b+","+T$u+")",T$D=this._VS.toscript(T$I,[]),T$e=this._PS.toscript(T$I,[]);T$v.now();if(T$E=T$Mb.create(T$o+T$D.join("\n"),T$o+T$e.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,T$Z,T$N),T$F[T$u]=T$E,laya.d3.shader.ShaderCompile3D.debugMode)T$v.now();return T$E},T$b.precompileShaderWithShaderDefine=function(T$$,T$b,T$u){this.withCompile(T$$,T$b,T$u,!0)},T$b.addMaterialDefines=function(T$$){var T$b=T$$.defines;for(var T$u in T$b){var T$Z=T$b[T$u],T$E=parseInt(T$u);this._materialInt2name[T$E]=T$Z,this._materialName2Int[T$Z]=T$E}},T$b.addSpriteDefines=function(T$$){var T$b=T$$.defines;for(var T$u in T$b){var T$Z=T$b[T$u],T$E=parseInt(T$u);this._spriteInt2name[T$E]=T$Z,this._spriteName2Int[T$Z]=T$E}},T$b.getMaterialDefineByName=function(T$$){return this._materialName2Int[T$$]},T$b.registerMaterialDefine=function(T$$){var T$b=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[T$b]=T$$,this._materialName2Int[T$$]=T$b},T$b.registerSpriteDefine=function(T$$){var T$b=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[T$b]=T$$,this._spriteName2Int[T$$]=T$b},T$L._globalRegDefine=function(T$$,T$b){T$L._globalInt2name[T$b]=T$$},T$L.add=function(T$$,T$b,T$u,T$Z,T$E){return laya.d3.shader.ShaderCompile3D._preCompileShader[T$$]=new T$L(T$$,T$b,T$u,T$Z,T$E,T$y.includes)},T$L.get=function(T$$){return laya.d3.shader.ShaderCompile3D._preCompileShader[T$Mb.nameKey.getID(T$$)]},T$L._preCompileShader={},T$L._globalInt2name=[],T$L.debugMode=!1,T$L.SHADERDEFINE_HIGHPRECISION=1,T$L.SHADERDEFINE_FOG=4,T$L.SHADERDEFINE_DIRECTIONLIGHT=8,T$L.SHADERDEFINE_POINTLIGHT=16,T$L.SHADERDEFINE_SPOTLIGHT=32,T$L.SHADERDEFINE_UV0=64,T$L.SHADERDEFINE_COLOR=128,T$L.SHADERDEFINE_UV1=256,T$L.SAHDERDEFINE_DEPTHFOG=131072,T$L}(),T$ab=function(T$$){function T$D(){T$D.__super.call(this)}T$N(T$D,"laya.d3.graphics.MeshSprite3DStaticBatchManager",T$Z$);var T$b=T$D.prototype;return T$b._getStaticBatch=function(T$$,T$b,T$u,T$Z){var T$E,T$r;return T$r=T$$?T$$.id.toString()+T$u.id.toString()+T$b.id.toString()+T$Z.toString():T$u.id.toString()+T$b.id.toString()+T$Z.toString(),this._staticBatches[T$r]?T$E=this._staticBatches[T$r]:this._staticBatches[T$r]=T$E=new T$tb(T$r,this,T$$,T$b,T$u),T$E},T$b._initStaticBatchs=function(T$$){var T$b,T$u;this._initBatchRenderElements.sort(T$D._sortPrepareStaticBatch);for(var T$Z,T$E=!1,T$r=0,T$F=0,T$x=this._initBatchRenderElements.length;T$F<T$x;T$F++){var T$g,T$H=this._initBatchRenderElements[T$F],T$w=T$H.renderObj._getVertexBuffer(0);T$H._sprite3D;if(T$u===T$w.vertexDeclaration&&T$b===T$H._material)if(T$E)T$Z._addCombineBatchRenderObjTest(T$H)?(T$g=T$H._staticBatch)!==T$Z&&(T$g&&T$g._deleteCombineBatchRenderObj(T$H),T$Z._addCombineBatchRenderObj(T$H)):(T$E=!1,T$r++);else{var T$I=this._initBatchRenderElements[T$F-1],T$o=T$I.renderObj,T$N=T$H.renderObj;T$E=!(65535<T$o._getVertexBuffer().vertexCount+T$N._getVertexBuffer().vertexCount)&&(T$Z=this._getStaticBatch(T$$,T$u,T$b,T$r),(T$g=T$I._staticBatch)!==T$Z&&(T$g&&T$g._deleteCombineBatchRenderObj(T$I),T$Z._addCombineBatchRenderObj(T$I)),(T$g=T$H._staticBatch)!==T$Z&&(T$g&&T$g._deleteCombineBatchRenderObj(T$H),T$Z._addCombineBatchRenderObj(T$H)),!0)}else T$E=!1,T$r=0;T$b=T$H._material,T$u=T$w.vertexDeclaration}},T$D._sortPrepareStaticBatch=function(T$$,T$b){var T$u=T$$._render,T$Z=T$b._render,T$E=T$u.lightmapIndex-T$Z.lightmapIndex;if(0!=T$E)return T$E;var T$r=T$u.receiveShadow-T$Z.receiveShadow;if(0!=T$r)return T$r;var T$F=T$$._mainSortID-T$b._mainSortID;return 0==T$F?T$$.renderObj.triangleCount-T$b.renderObj.triangleCount:T$F},T$D}(),T$tb=function(T$$){function T$r(T$$,T$b,T$u,T$Z,T$E){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,T$r.__super.call(this,T$$,T$b,T$u),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=T$Z,this._material=T$E}T$N(T$r,"laya.d3.graphics.SubMeshStaticBatch",T$E$);var T$b=T$r.prototype;return T$b._compareBatchRenderElement=function(T$$,T$b){return T$$._batchIndexStart>T$b._batchIndexStart},T$b._addCombineBatchRenderObjTest=function(T$$){var T$b=T$$.renderObj._vertexCount;return!(65535<(0<T$b?this._currentCombineVertexCount+T$b:this._currentCombineVertexCount+T$$.renderObj._getVertexBuffer().vertexCount))},T$b._addCombineBatchRenderObj=function(T$$){var T$b=T$$.renderObj,T$u=T$b._vertexCount;this._initBatchRenderElements.push(T$$),T$$._staticBatch=this,0<T$u?(this._currentCombineIndexCount+=T$b._indexCount,this._currentCombineVertexCount+=T$u):(this._currentCombineIndexCount=this._currentCombineIndexCount+T$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+T$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0},T$b._deleteCombineBatchRenderObj=function(T$$){var T$b=T$$.renderObj,T$u=this._initBatchRenderElements.indexOf(T$$);if(-1!==T$u){this._initBatchRenderElements.splice(T$u,1),T$$._staticBatch=null;var T$Z=T$b._vertexCount;0<T$Z?(this._currentCombineIndexCount=this._currentCombineIndexCount-T$b._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-T$Z):(this._currentCombineIndexCount=this._currentCombineIndexCount-T$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-T$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},T$b._finishInit=function(){if(this._needFinishCombine){var T$$=0,T$b=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var T$u=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),T$Z=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=T$sb.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=T$Xb.create("ushort",this._currentCombineIndexCount,35044);for(var T$E=0,T$r=this._initBatchRenderElements.length;T$E<T$r;T$E++){var T$F=this._initBatchRenderElements[T$E],T$x=T$F.renderObj,T$g=T$x._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,T$F._sprite3D),T$H=T$x.getIndices(),T$w=T$F._sprite3D.transform._isFrontFaceInvert,T$I=T$$/(this._vertexDeclaration.vertexStride/4)-T$x._vertexStart,T$o=T$b,T$N=T$o+T$H.length;T$F._batchIndexStart=T$o,T$F._batchIndexEnd=T$N,T$Z.set(T$H,T$b);var T$D=0;if(T$w)for(T$D=T$o;T$D<T$N;T$D+=3){T$Z[T$D]=T$I+T$Z[T$D];var T$e=T$Z[T$D+1],T$L=T$Z[T$D+2];T$Z[T$D+1]=T$I+T$L,T$Z[T$D+2]=T$I+T$e}else for(T$D=T$o;T$D<T$N;T$D+=3)T$Z[T$D]=T$I+T$Z[T$D],T$Z[T$D+1]=T$I+T$Z[T$D+1],T$Z[T$D+2]=T$I+T$Z[T$D+2];T$b+=T$H.length,T$u.set(T$g,T$$),T$$+=T$g.length}this._vertexBuffer.setData(T$u),this._indexBuffer.setData(T$Z),this._needFinishCombine=!1}},T$b._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new T$zb)},T$b._getRenderElement=function(T$$,T$b,T$u){for(var T$Z,T$E,T$r=this._batchRenderElements.length,T$F=!0,T$x=0;T$x<T$r;T$x++){var T$g,T$H,T$w=(T$E=this._batchRenderElements[T$x])._sprite3D._render;if(0!==T$x&&(T$F=(T$g=(T$Z=this._batchRenderElements[T$x-1])._sprite3D._render).lightmapIndex!==T$w.lightmapIndex||T$g.receiveShadow!==T$w.receiveShadow||T$Z._batchIndexEnd!==T$E._batchIndexStart),T$F){(T$H=this._getCombineRenderElementFromPool()).renderObj=this,T$H._material=this._material,T$H._batchIndexStart=T$E._batchIndexStart,T$H._batchIndexEnd=T$E._batchIndexEnd;var T$I=T$w.lightmapIndex,T$o=T$I+1,T$N=this._batchOwnerIndices[T$o];T$N||(T$N=this._batchOwnerIndices[T$o]=[]);var T$D,T$e=T$N[T$E._render.receiveShadow?1:0];void 0===T$e?(T$N[T$w.receiveShadow?1:0]=this._batchOwners.length,(T$D=new T$Ab(null,"StaticBatchMeshSprite3D"))._scene=T$b,T$D._transform=this._rootOwner?this._rootOwner._transform:null,T$D._render.lightmapIndex=T$I,T$D._render.receiveShadow=T$E._render.receiveShadow,this._batchOwners.push(T$D)):T$D=this._batchOwners[T$e],T$D._render._renderUpdate(T$u),T$H._sprite3D=T$D,T$$.push(T$H)}else T$H._batchIndexEnd=T$E._batchIndexEnd}},T$b._beforeRender=function(T$$){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},T$b._render=function(T$$){var T$b=T$$.renderElement,T$u=T$b._batchIndexStart,T$Z=T$b._batchIndexEnd-T$u;T$O.mainContext.drawElements(4,T$Z,5123,2*T$u),T$q.drawCall++,T$q.trianglesFaces+=T$Z/3},T$b.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},T$b._getVertexBuffer=function(T$$){return void 0===T$$&&(T$$=0),this._vertexBuffer},T$r}(),T$Cb=function(T$$){function T$b(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,T$b.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}T$N(T$b,"laya.d3.core.ComponentNode",T$H);var T$u=T$b.prototype;return T$u.addComponent=function(T$$){var T$b,T$u=this._componentsMap.indexOf(T$$);if(-1===T$u)T$b=[],this._componentsMap.push(T$$),this._typeComponentsIndices.push(T$b);else if(T$b=this._typeComponentsIndices[T$u],this._components[T$b[0]].isSingleton)throw new Error("无法单实例创建"+T$$+"组件，"+T$$+"组件已存在！");var T$Z=T$E.getInstance(T$$);return T$b.push(this._components.length),this._components.push(T$Z),T$Z instanceof laya.d3.component.Script&&this._scripts.push(T$Z),T$Z._initialize(this),T$Z},T$u._removeComponent=function(T$$,T$b){var T$u=this._typeComponentsIndices[T$$],T$Z=T$u[T$b],T$E=this._components[T$Z];this._components.splice(T$Z,1),T$E instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(T$E),1),T$u.splice(T$b,1),0===T$u.length&&(this._typeComponentsIndices.splice(T$$,1),this._componentsMap.splice(T$$,1));for(var T$r=0,T$F=this._componentsMap.length;T$r<T$F;T$r++)for(var T$x=(T$u=this._typeComponentsIndices[T$r]).length-1;0<=T$x;T$x--){var T$g=T$u[T$x];if(!(T$Z<T$g))break;T$u[T$x]=--T$g}T$E._destroy()},T$u.getComponentByType=function(T$$,T$b){void 0===T$b&&(T$b=0);var T$u=this._componentsMap.indexOf(T$$);return-1===T$u?null:this._components[this._typeComponentsIndices[T$u][T$b]]},T$u.getComponentsByType=function(T$$,T$b){var T$u=this._componentsMap.indexOf(T$$);if(-1!==T$u){var T$Z=this._typeComponentsIndices[T$u],T$E=T$Z.length;T$b.length=T$E;for(var T$r=0;T$r<T$E;T$r++)T$b[T$r]=this._components[T$Z[T$r]]}else T$b.length=0},T$u.getComponentByIndex=function(T$$){return this._components[T$$]},T$u.removeComponentByType=function(T$$,T$b){void 0===T$b&&(T$b=0);var T$u=this._componentsMap.indexOf(T$$);-1!==T$u&&this._removeComponent(T$u,T$b)},T$u.removeComponentsByType=function(T$$){var T$b=this._componentsMap.indexOf(T$$);if(-1!==T$b)for(var T$u=this._typeComponentsIndices[T$b],T$Z=0,T$E=T$u.length;T$Z<T$E;T$u.length<T$E?T$E--:T$Z++)this._removeComponent(T$b,T$Z)},T$u.removeAllComponent=function(){for(var T$$=0,T$b=this._componentsMap.length;T$$<T$b;this._componentsMap.length<T$b?T$b--:T$$++)this.removeComponentsByType(this._componentsMap[T$$])},T$u._updateComponents=function(T$$){for(var T$b=0,T$u=this._components.length;T$b<T$u;T$b++){var T$Z=this._components[T$b];!T$Z.started&&(T$Z._start(T$$),T$Z.started=!0),T$Z.enable&&T$Z._update(T$$)}},T$u._lateUpdateComponents=function(T$$){for(var T$b=0;T$b<this._components.length;T$b++){var T$u=this._components[T$b];!T$u.started&&(T$u._start(T$$),T$u.started=!0),T$u.enable&&T$u._lateUpdate(T$$)}},T$u._preRenderUpdateComponents=function(T$$){for(var T$b=0;T$b<this._components.length;T$b++){var T$u=this._components[T$b];!T$u.started&&(T$u._start(T$$),T$u.started=!0),T$u.enable&&T$u._preRenderUpdate(T$$)}},T$u._postRenderUpdateComponents=function(T$$){for(var T$b=0;T$b<this._components.length;T$b++){var T$u=this._components[T$b];!T$u.started&&(T$u._start(T$$),T$u.started=!0),T$u.enable&&T$u._postRenderUpdate(T$$)}},T$b}(),T$Kb=function(T$Z){function T$$(){T$$.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new T$ob,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new T$xb(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}T$N(T$$,"laya.d3.core.material.BaseMaterial",T$Z);var T$b=T$$.prototype;return T$P.imps(T$b,{"laya.d3.core.IClone":!0}),T$b._addShaderDefine=function(T$$){this._shaderDefineValue|=T$$},T$b._removeShaderDefine=function(T$$){this._shaderDefineValue&=~T$$},T$b._addDisablePublicShaderDefine=function(T$$){this._disablePublicShaderDefine|=T$$},T$b._removeDisablePublicShaderDefine=function(T$$){this._disablePublicShaderDefine&=~T$$},T$b._setBuffer=function(T$$,T$b){this._shaderValues.setValue(T$$,T$b),this._values[T$$]=T$b},T$b._getBuffer=function(T$$){return this._values[T$$]},T$b._setMatrix4x4=function(T$$,T$b){this._shaderValues.setValue(T$$,T$b?T$b.elements:null),this._values[T$$]=T$b},T$b._getMatrix4x4=function(T$$){return this._values[T$$]},T$b._setInt=function(T$$,T$b){this._shaderValues.setValue(T$$,T$b),this._values[T$$]=T$b},T$b._getInt=function(T$$){return this._values[T$$]},T$b._setNumber=function(T$$,T$b){this._shaderValues.setValue(T$$,T$b),this._values[T$$]=T$b},T$b._getNumber=function(T$$){return this._values[T$$]},T$b._setBool=function(T$$,T$b){this._shaderValues.setValue(T$$,T$b),this._values[T$$]=T$b},T$b._getBool=function(T$$){return this._values[T$$]},T$b._setVector2=function(T$$,T$b){this._shaderValues.setValue(T$$,T$b?T$b.elements:null),this._values[T$$]=T$b},T$b._getVector2=function(T$$){return this._values[T$$]},T$b._setColor=function(T$$,T$b){this._shaderValues.setValue(T$$,T$b?T$b.elements:null),this._values[T$$]=T$b},T$b._getColor=function(T$$){return this._values[T$$]},T$b._setTexture=function(T$$,T$b){var T$u=this._values[T$$];this._values[T$$]=T$b,this._shaderValues.setValue(T$$,T$b),0<this.referenceCount&&(T$u&&T$u._removeReference(),T$b&&T$b._addReference())},T$b._getTexture=function(T$$){return this._values[T$$]},T$b._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},T$b._getShader=function(T$$,T$b,T$u){var T$Z=(T$$|T$b)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(T$Z,T$u,this._shaderDefineValue),this._shader},T$b._setRenderStateBlendDepth=function(){var T$$=T$O.mainContext;switch(T$V.setDepthMask(T$$,this.depthWrite),0===this.depthTest?T$V.setDepthTest(T$$,!1):(T$V.setDepthTest(T$$,!0),T$V.setDepthFunc(T$$,this.depthTest)),this.blend){case 0:T$V.setBlend(T$$,!1);break;case 1:T$V.setBlend(T$$,!0),T$V.setBlendFunc(T$$,this.srcBlend,this.dstBlend);break;case 2:T$V.setBlend(T$$,!0)}},T$b._setRenderStateFrontFace=function(T$$,T$b){var T$u=T$O.mainContext,T$Z=0;switch(this.cull){case 0:T$V.setCullFace(T$u,!1);break;case 1:T$V.setCullFace(T$u,!0),T$Z=T$$?T$b&&T$b._isFrontFaceInvert?2305:2304:T$b&&T$b._isFrontFaceInvert?2304:2305,T$V.setFrontFace(T$u,T$Z);break;case 2:T$V.setCullFace(T$u,!0),T$Z=T$$?T$b&&T$b._isFrontFaceInvert?2304:2305:T$b&&T$b._isFrontFaceInvert?2305:2304,T$V.setFrontFace(T$u,T$Z)}},T$b.onAsynLoaded=function(T$$,T$b,T$u){var T$Z=T$b[0],T$E=T$b[1];switch(T$Z.version){case"LAYAMATERIAL:01":var T$r=0,T$F=0,T$x=T$Z.props;for(var T$g in T$x)switch(T$g){case"vectors":var T$H=T$x[T$g];for(T$r=0,T$F=T$H.length;T$r<T$F;T$r++){var T$w=T$H[T$r],T$I=T$w.value;switch(T$I.length){case 2:this[T$w.name]=new T$rb(T$I[0],T$I[1]);break;case 3:this[T$w.name]=new T$Fb(T$I[0],T$I[1],T$I[2]);break;case 4:this[T$w.name]=new T$xb(T$I[0],T$I[1],T$I[2],T$I[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var T$o=T$x[T$g];for(T$r=0,T$F=T$o.length;T$r<T$F;T$r++){var T$N=T$o[T$r],T$D=T$N.path;T$D&&(this[T$N.name]=T$T.getRes(T$E[T$D]))}break;case"defines":var T$e=T$x[T$g];for(T$r=0,T$F=T$e.length;T$r<T$F;T$r++){var T$L=this._shaderCompile.getMaterialDefineByName(T$e[T$r]);this._addShaderDefine(T$L)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[T$g]=T$x[T$g];break;case"renderQueue":switch(T$x[T$g]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[T$g]=T$x[T$g]}break;case"LAYAMATERIAL:02":for(T$g in T$x=T$Z.props)switch(T$g){case"vectors":for(T$r=0,T$F=(T$H=T$x[T$g]).length;T$r<T$F;T$r++)switch((T$I=(T$w=T$H[T$r]).value).length){case 2:this[T$w.name]=new T$rb(T$I[0],T$I[1]);break;case 3:this[T$w.name]=new T$Fb(T$I[0],T$I[1],T$I[2]);break;case 4:this[T$w.name]=new T$xb(T$I[0],T$I[1],T$I[2],T$I[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(T$r=0,T$F=(T$o=T$x[T$g]).length;T$r<T$F;T$r++)(T$D=(T$N=T$o[T$r]).path)&&(this[T$N.name]=T$T.getRes(T$E[T$D]));break;case"defines":for(T$r=0,T$F=(T$e=T$x[T$g]).length;T$r<T$F;T$r++)T$L=this._shaderCompile.getMaterialDefineByName(T$e[T$r]),this._addShaderDefine(T$L);break;default:this[T$g]=T$x[T$g]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},T$b._addReference=function(){T$Z.prototype._addReference.call(this);for(var T$$=0,T$b=this._values.length;T$$<T$b;T$$++){var T$u=this._values[T$$];T$u&&T$u instanceof laya.d3.resource.BaseTexture&&T$u._addReference()}},T$b._removeReference=function(){T$Z.prototype._removeReference.call(this);for(var T$$=0,T$b=this._values.length;T$$<T$b;T$$++){var T$u=this._values[T$$];T$u&&T$u instanceof laya.d3.resource.BaseTexture&&T$u._removeReference()}},T$b.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},T$b.setShaderName=function(T$$){var T$b=T$Mb.nameKey.getID(T$$);if(-1===T$b)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=T$qb._preCompileShader[T$b]},T$b.cloneTo=function(T$$){var T$b=T$$;T$b.name=this.name,T$b.cull=this.cull,T$b.blend=this.blend,T$b.srcBlend=this.srcBlend,T$b.dstBlend=this.dstBlend,T$b.srcBlendRGB=this.srcBlendRGB,T$b.dstBlendRGB=this.dstBlendRGB,T$b.srcBlendAlpha=this.srcBlendAlpha,T$b.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(T$b.blendConstColor),T$b.blendEquation=this.blendEquation,T$b.blendEquationRGB=this.blendEquationRGB,T$b.blendEquationAlpha=this.blendEquationAlpha,T$b.depthTest=this.depthTest,T$b.depthWrite=this.depthWrite,T$b.renderQueue=this.renderQueue,T$b._shader=this._shader,T$b._disablePublicShaderDefine=this._disablePublicShaderDefine,T$b._shaderDefineValue=this._shaderDefineValue;var T$u,T$Z=0,T$E=T$b._shaderValues;T$b._shaderValues.data.length=this._shaderValues.data.length;var T$r=this._values.length,T$F=T$b._values;for(T$Z=0,T$u=T$F.length=T$r;T$Z<T$u;T$Z++){var T$x=this._values[T$Z];if(T$x)if("number"==typeof T$x)T$F[T$Z]=T$x,T$E.data[T$Z]=T$x;else if("number"==typeof T$x&&Math.floor(T$x)==T$x)T$F[T$Z]=T$x,T$E.data[T$Z]=T$x;else if("boolean"==typeof T$x)T$F[T$Z]=T$x,T$E.data[T$Z]=T$x;else if(T$x instanceof laya.d3.math.Vector2){var T$g=T$F[T$Z]||(T$F[T$Z]=new T$rb);T$x.cloneTo(T$g),T$E.data[T$Z]=T$g.elements}else if(T$x instanceof laya.d3.math.Vector3){var T$H=T$F[T$Z]||(T$F[T$Z]=new T$Fb);T$x.cloneTo(T$H),T$E.data[T$Z]=T$H.elements}else if(T$x instanceof laya.d3.math.Vector4){var T$w=T$F[T$Z]||(T$F[T$Z]=new T$xb);T$x.cloneTo(T$w),T$E.data[T$Z]=T$w.elements}else if(T$x instanceof laya.d3.math.Matrix4x4){var T$I=T$F[T$Z]||(T$F[T$Z]=new T$$b);T$x.cloneTo(T$I),T$E.data[T$Z]=T$I.elements}else T$x instanceof laya.d3.resource.BaseTexture&&(T$F[T$Z]=T$x,T$E.data[T$Z]=T$x)}},T$b.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$D(0,T$b,"alphaTestValue",function(){return this._getNumber(0)},function(T$$){this._setNumber(0,T$$)}),T$D(0,T$b,"alphaTest",function(){return this._alphaTest},function(T$$){(this._alphaTest=T$$)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),T$$.__init__=function(){T$$.SHADERDEFINE_ALPHATEST=T$$.shaderDefines.registerDefine("ALPHATEST")},T$$.RENDERQUEUE_OPAQUE=2e3,T$$.RENDERQUEUE_ALPHATEST=2450,T$$.RENDERQUEUE_TRANSPARENT=3e3,T$$.CULL_NONE=0,T$$.CULL_FRONT=1,T$$.CULL_BACK=2,T$$.BLEND_DISABLE=0,T$$.BLEND_ENABLE_ALL=1,T$$.BLEND_ENABLE_SEPERATE=2,T$$.BLENDPARAM_ZERO=0,T$$.BLENDPARAM_ONE=1,T$$.BLENDPARAM_SRC_COLOR=768,T$$.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,T$$.BLENDPARAM_DST_COLOR=774,T$$.BLENDPARAM_ONE_MINUS_DST_COLOR=775,T$$.BLENDPARAM_SRC_ALPHA=770,T$$.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,T$$.BLENDPARAM_DST_ALPHA=772,T$$.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,T$$.BLENDPARAM_SRC_ALPHA_SATURATE=776,T$$.BLENDEQUATION_ADD=0,T$$.BLENDEQUATION_SUBTRACT=1,T$$.BLENDEQUATION_REVERSE_SUBTRACT=2,T$$.DEPTHTEST_OFF=0,T$$.DEPTHTEST_NEVER=512,T$$.DEPTHTEST_LESS=513,T$$.DEPTHTEST_EQUAL=514,T$$.DEPTHTEST_LEQUAL=515,T$$.DEPTHTEST_GREATER=516,T$$.DEPTHTEST_NOTEQUAL=517,T$$.DEPTHTEST_GEQUAL=518,T$$.DEPTHTEST_ALWAYS=519,T$$.SHADERDEFINE_ALPHATEST=1,T$$.ALPHATESTVALUE=0,T$I(T$$,["shaderDefines",function(){return this.shaderDefines=new T$wb}]),T$$}(T$L),T$Ob=function(T$$){function T$b(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,T$b.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}T$N(T$b,"laya.d3.resource.BaseTexture",T$L);var T$u=T$b.prototype;return T$D(0,T$u,"width",function(){return this._width}),T$D(0,T$u,"repeat",function(){return this._repeat},function(T$$){if(this._repeat!==T$$&&(this._repeat=T$$,this._source)){var T$b=T$O.mainContext;T$V.bindTexture(T$b,this._type,this._source),T$S.isPOT(this._width,this._height)&&this._repeat?(T$b.texParameteri(this._type,10242,10497),T$b.texParameteri(this._type,10243,10497)):(T$b.texParameteri(this._type,10242,33071),T$b.texParameteri(this._type,10243,33071))}}),T$D(0,T$u,"height",function(){return this._height}),T$D(0,T$u,"magFifter",function(){return this._magFifter},function(T$$){(this._magFifter=T$$)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(T$$)}),T$D(0,T$u,"wrapModeV",function(){return this._wrapModeV}),T$D(0,T$u,"size",function(){return this._size}),T$D(0,T$u,"wrapModeU",function(){return this._wrapModeU}),T$D(0,T$u,"mipmap",function(){return this._mipmap},function(T$$){this._mipmap=T$$,this._mipmap!=T$$&&this._conchTexture&&this._conchTexture.setMipMap(T$$)}),T$D(0,T$u,"minFifter",function(){return this._minFifter},function(T$$){this._minFifter=T$$,this._minFifter!=T$$&&this._conchTexture&&this._conchTexture.setMinFifter(T$$)}),T$D(0,T$u,"format",function(){return this._format}),T$D(0,T$u,"source",function(){return this.activeResource(),this._source}),T$D(0,T$u,"defaulteTexture",function(){return T$Jb.grayTexture}),T$b.WARPMODE_REPEAT=0,T$b.WARPMODE_CLAMP=1,T$b}(),T$Vb=function(T$$){function T$b(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,T$b.__super.call(this),this._boundingBoxCorners=T$Z(8,null)}T$N(T$b,"laya.d3.resource.models.BaseMesh",T$L);var T$u=T$b.prototype;return T$u._getPositions=function(){throw new Error("未Override,请重载该属性！")},T$u._generateBoundingObject=function(){this._boundingSphere=new T$U$(new T$Fb,0),T$U$.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new T$h$(new T$Fb,new T$Fb),T$h$.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},T$u.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},T$u.getRenderElement=function(T$$){throw new Error("未Override,请重载该属性！")},T$D(0,T$u,"subMeshCount",function(){return this._subMeshCount}),T$D(0,T$u,"boundingBox",function(){return this._boundingBox}),T$D(0,T$u,"boundingBoxCorners",function(){return this._boundingBoxCorners}),T$D(0,T$u,"boundingSphere",function(){return this._boundingSphere}),T$b}(),T$vb=(function(T$$){function T$b(){T$b.__super.call(this)}T$N(T$b,"laya.d3.component.Script",T$yb);var T$u=T$b.prototype;T$u.onTriggerEnter=function(T$$){},T$u.onTriggerExit=function(T$$){},T$u.onTriggerStay=function(T$$){},T$D(0,T$u,"isSingleton",function(){return T$b._isSingleton}),T$b._isSingleton=!1}(),function(T$$){function T$b(T$$){this._owner=null,this._sharedMesh=null,T$b.__super.call(this),this._owner=T$$}T$N(T$b,"laya.d3.core.MeshFilter",T$$);var T$u=T$b.prototype;return T$u._sharedMeshLoaded=function(){this.event("loaded")},T$u._destroy=function(){T$$.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},T$D(0,T$u,"sharedMesh",function(){return this._sharedMesh},function(T$$){var T$b=this._sharedMesh;T$b&&T$b._removeReference(),(this._sharedMesh=T$$)._addReference(),this.event("meshchanged",[this,T$b,T$$]),T$$.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),T$D(0,T$u,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),T$D(0,T$u,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),T$D(0,T$u,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),T$D(0,T$u,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),T$b}(T$Sb)),T$pb=function(T$$){function T$b(T$$){T$b.__super.call(this,T$$),T$$.meshFilter.on("meshchanged",this,this._onMeshChanged)}T$N(T$b,"laya.d3.core.MeshRender",T$Pb);var T$u=T$b.prototype;return T$u._onMeshChanged=function(T$$,T$b,T$u){T$u.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:T$u.once("loaded",this,this._onMeshLoaed)},T$u._onMeshLoaed=function(T$$,T$b){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},T$u._calculateBoundingSphereByInitSphere=function(T$$){var T$b=NaN,T$u=this._owner.transform,T$Z=T$u.scale.elements,T$E=Math.abs(T$Z[0]),T$r=Math.abs(T$Z[1]),T$F=Math.abs(T$Z[2]);T$b=T$r<=T$E&&T$F<=T$E?T$E:T$F<=T$r?T$r:T$F,T$Fb.transformCoordinate(T$$.center,T$u.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=T$$.radius*T$b},T$u._calculateBoundBoxByInitCorners=function(T$$){for(var T$b=this._owner.transform.worldMatrix,T$u=0;T$u<8;T$u++)T$Fb.transformCoordinate(T$$[T$u],T$b,T$Pb._tempBoundBoxCorners[T$u]);T$h$.createfromPoints(T$Pb._tempBoundBoxCorners,this._boundingBox)},T$u._calculateBoundingSphere=function(){var T$$=this._owner.meshFilter.sharedMesh;null==T$$||null==T$$.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(T$$.boundingSphere)},T$u._calculateBoundingBox=function(){var T$$=this._owner.meshFilter.sharedMesh;null==T$$||null==T$$.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(T$$.boundingBoxCorners)},T$u._renderUpdate=function(T$$){var T$b=this._owner.transform;if(T$b){this._setShaderValueMatrix4x4(0,T$b.worldMatrix);var T$u=this._owner.getProjectionViewWorldMatrix(T$$);this._setShaderValueMatrix4x4(1,T$u)}else this._setShaderValueMatrix4x4(0,T$$b.DEFAULT),this._setShaderValueMatrix4x4(1,T$$);return T$Tb.debugMode&&this._renderRenderableBoundBox(),!0},T$b}(),T$Yb=function(T$b){function T$Z(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,T$Z.__super.call(this),this._renderState=new T$j,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new T$ob,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new T$b$,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new T$Fb(.7,.7,.7),this.ambientColor=new T$Fb(.212,.227,.259),T$O.shaderHighPrecision&&this.addShaderDefine(T$qb.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}T$N(T$Z,"laya.d3.core.scene.Scene",T$b);var T$$=T$Z.prototype;return T$P.imps(T$$,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),T$$._setUrl=function(T$$){this._url=T$$},T$$._getGroup=function(){return this._group},T$$._setGroup=function(T$$){this._group=T$$},T$$._display=function(){T$P.stage._scenes.push(this),T$P.stage._scenes.sort(T$Z._sortScenes);for(var T$$=0,T$b=this._childs.length;T$$<T$b;T$$++){var T$u=this._childs[T$$];T$u.active&&T$u._activeHierarchy()}},T$$._unDisplay=function(){var T$$=T$P.stage._scenes;T$$.splice(T$$.indexOf(this),1);for(var T$b=0,T$u=this._childs.length;T$b<T$u;T$b++){var T$Z=this._childs[T$b];T$Z.active&&T$Z._inActiveHierarchy()}},T$$._addChild3D=function(T$$){T$$.transform._onWorldTransform(),T$$._setBelongScene(this),this.displayedInStage&&T$$.active&&T$$._activeHierarchy()},T$$._removeChild3D=function(T$$){T$$.transform.parent=null,this.displayedInStage&&T$$.active&&T$$._inActiveHierarchy(),T$$._setUnBelongScene()},T$$.initOctree=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$E&&(T$E=6),this.treeSize=new T$Fb(T$$,T$b,T$u),this.treeLevel=T$E,this.treeRoot=new T$h(this,0),this.treeRoot.init(T$Z,this.treeSize)},T$$._prepareUpdateToRenderState=function(T$$,T$b){T$b.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,T$b.scene=this},T$$._prepareSceneToRender=function(T$$){var T$b=this._lights.length;if(0<T$b)for(var T$u=0,T$Z=0;T$Z<T$b&&!(this._lights[T$Z]._prepareToScene(T$$)&&++T$u>=this._enableLightCount);T$Z++);},T$$._updateChilds=function(T$$){for(var T$b=0,T$u=this._childs.length;T$b<T$u;++T$b)this._childs[T$b]._update(T$$)},T$$._preRenderScene=function(T$$,T$b,T$u){var T$Z,T$E=T$b._viewMatrix,T$r=T$b._projectionMatrix,T$F=T$b._projectionViewMatrix,T$x=0,T$g=T$b.camera;for(T$g.useOcclusionCulling?this.treeRoot?T$u$.renderObjectCullingOctree(T$u,this,T$g,T$E,T$r,T$F):T$u$.renderObjectCulling(T$u,this,T$g,T$E,T$r,T$F):T$u$.renderObjectCullingNoBoundFrustum(this,T$g,T$E,T$r,T$F),T$x=0,T$Z=this._quenes.length;T$x<T$Z;T$x++)this._quenes[T$x]&&this._quenes[T$x]._preRender(T$b)},T$$._clear=function(T$$,T$b){var T$u=T$b._viewport,T$Z=T$b.camera,T$E=T$u.x,T$r=T$Z.renderTargetSize.height-T$u.y-T$u.height,T$F=T$u.width,T$x=T$u.height;T$$.viewport(T$E,T$r,T$F,T$x);var T$g=256,T$H=T$Z.renderTarget;switch(T$Z.clearFlag){case 0:var T$w=T$Z.clearColor;if(T$w){T$$.enable(3089),T$$.scissor(T$E,T$r,T$F,T$x);var T$I=T$w.elements;T$$.clearColor(T$I[0],T$I[1],T$I[2],T$I[3]),T$g|=16384}if(T$H)switch(T$w||(T$g=16384),T$H.depthStencilFormat){case 33189:T$g|=256;break;case 36168:T$g|=1024;break;case 34041:T$g|=256,T$g|=1024}T$$.clear(T$g),T$w&&T$$.disable(3089);break;case 1:case 2:if(T$H)switch(T$g=16384,T$H.depthStencilFormat){case 33189:T$g|=256;break;case 36168:T$g|=1024;break;case 34041:T$g|=256,T$g|=1024}T$$.clear(T$g);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},T$$._renderScene=function(T$$,T$b){var T$u,T$Z,T$E=T$b.camera,T$r=0;for(T$r=0;T$r<2;T$r++)(T$Z=this._quenes[T$r])&&(T$E.renderTarget?T$Z._render(T$b,!0):T$Z._render(T$b,!1));if(1===T$E.clearFlag){var T$F=T$E.sky;T$F&&(T$V.setCullFace(T$$,!1),T$V.setDepthFunc(T$$,515),T$V.setDepthMask(T$$,!1),T$F._render(T$b),T$V.setDepthFunc(T$$,513),T$V.setDepthMask(T$$,!0))}for(T$r=2,T$u=this._quenes.length;T$r<T$u;T$r++)(T$Z=this._quenes[T$r])&&(T$Z._sortAlpha(T$b.camera.transform.position),T$E.renderTarget?T$Z._render(T$b,!0):T$Z._render(T$b,!1))},T$$._set3DRenderConfig=function(T$$){T$$.disable(3042),T$V._blend=!1,T$$.blendFunc(770,771),T$V._sFactor=770,T$V._dFactor=771,T$$.disable(2929),T$V._depthTest=!1,T$$.enable(2884),T$V._cullFace=!0,T$$.depthMask(1),T$V._depthMask=!0,T$$.frontFace(2304),T$V._frontFace=2304},T$$._set2DRenderConfig=function(T$$){T$V.setBlend(T$$,!0),T$V.setBlendFunc(T$$,1,771),T$V.setDepthTest(T$$,!1),T$V.setCullFace(T$$,!1),T$V.setDepthMask(T$$,!0),T$V.setFrontFace(T$$,2305),T$$.viewport(0,0,T$w.width,T$w.height)},T$$._parseCustomProps=function(T$$,T$b,T$u,T$Z){var T$E=T$Z.customProps.lightmaps,T$r=T$E.length,T$F=this._lightmaps;T$F.length=T$r;for(var T$x=0;T$x<T$r;T$x++)T$F[T$x]=T$T.getRes(T$b[T$E[T$x].replace(".exr",".png")]);this.setlightmaps(T$F);var T$g=T$Z.customProps.ambientColor;T$g&&(this.ambientColor=new T$Fb(T$g[0],T$g[1],T$g[2]));var T$H=T$Z.customProps.fogColor;T$H&&(this.fogColor=new T$Fb(T$H[0],T$H[1],T$H[2]))},T$$._addLight=function(T$$){this._lights.indexOf(T$$)<0&&this._lights.push(T$$)},T$$._removeLight=function(T$$){var T$b=this._lights.indexOf(T$$);0<=T$b&&this._lights.splice(T$b,1)},T$$._updateScene=function(){var T$$=this._renderState;this._prepareUpdateToRenderState(T$O.mainContext,T$$),this._updateComponents(T$$),this._updateChilds(T$$),this._lateUpdateComponents(T$$),this._time+=T$$.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},T$$._updateSceneConch=function(){var T$$=this._renderState;this._prepareUpdateToRenderState(T$O.mainContext,T$$),this._updateComponents(T$$),this._lateUpdateComponents(T$$),this._prepareSceneToRender(T$$);for(var T$b=0,T$u=this._cameraPool.length;T$b<T$u;T$b++){var T$Z=this._cameraPool[T$b];(T$$.camera=T$Z)._prepareCameraToRender()}},T$$._preRenderShadow=function(T$$,T$b,T$u,T$Z,T$E){this.treeRoot?T$u$.renderShadowObjectCullingOctree(this,T$b,T$u,T$Z,T$E):T$u$.renderShadowObjectCulling(this,T$b,T$u,T$Z,T$E);for(var T$r=0,T$F=T$u.length;T$r<T$F;T$r++)T$u[T$r]&&T$u[T$r]._preRender(T$$)},T$$._renderShadowMap=function(T$$,T$b,T$u){var T$Z=this.parallelSplitShadowMaps[0];T$Z._calcAllLightCameraInfo(T$u);var T$E,T$r,T$F,T$x=T$Z.PSSMNum;if(this._preRenderShadow(T$b,T$Z._lightCulling,T$Z._shadowQuenes,T$Z._lightVPMatrix[0],T$x),this.addShaderDefine(T$Nb.SHADERDEFINE_CAST_SHADOW),1<T$x)for(var T$g=0;T$g<T$x;T$g++)T$E=T$Z.getRenderTarget(T$g+1),T$Z.beginRenderTarget(T$g+1),T$$.clearColor(1,1,1,1),T$$.clear(16640),T$$.viewport(0,0,T$E.width,T$E.height),T$b.camera=T$F=T$Z.getLightCamera(T$g),T$F._prepareCameraToRender(),T$F._prepareCameraViewProject(T$F.viewMatrix,T$F.projectionMatrix),T$b._projectionViewMatrix=T$Z._lightVPMatrix[T$g+1],(T$r=T$Z._shadowQuenes[T$g])._preRender(T$b),T$r._renderShadow(T$b,!1),T$Z.endRenderTarget(T$g+1);else T$E=T$Z.getRenderTarget(1),T$Z.beginRenderTarget(1),T$$.clearColor(1,1,1,1),T$$.clear(16640),T$$.viewport(0,0,T$E.width,T$E.height),T$b.camera=T$F=T$Z.getLightCamera(0),T$F._prepareCameraToRender(),T$F._prepareCameraViewProject(T$F.viewMatrix,T$F.projectionMatrix),T$b._projectionViewMatrix=T$Z._lightVPMatrix[0],(T$r=T$Z._shadowQuenes[0])._preRender(T$b),T$r._renderShadow(T$b,!0),T$Z.endRenderTarget(1);this.removeShaderDefine(T$Nb.SHADERDEFINE_CAST_SHADOW)},T$$.addTreeNode=function(T$$){this.treeRoot.addTreeNode(T$$)},T$$.removeTreeNode=function(T$$){this.treeSize&&T$$._treeNode&&T$$._treeNode.removeObject(T$$)},T$$.setlightmaps=function(T$$){this._lightmaps=T$$;for(var T$b=0,T$u=this._renderableSprite3Ds.length;T$b<T$u;T$b++)this._renderableSprite3Ds[T$b]._render._applyLightMapParams()},T$$.getlightmaps=function(){return this._lightmaps},T$$.addChildAt=function(T$$,T$b){if(!(T$$ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(T$$&&T$$.__className));if(!T$$||this.destroyed||T$$===this)return T$$;if(T$$.zOrder&&this._set$P("hasZorder",!0),0<=T$b&&T$b<=this._childs.length){if(T$$._parent===this){var T$u=this.getChildIndex(T$$);this._childs.splice(T$u,1),this._childs.splice(T$b,0,T$$),this.conchModel&&(this.conchModel.removeChild(T$$.conchModel),this.conchModel.addChildAt(T$$.conchModel,T$b)),this._childChanged()}else T$$.parent&&T$$.parent.removeChild(T$$),this._childs===T$H.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$b,0,T$$),this.conchModel&&this.conchModel.addChildAt(T$$.conchModel,T$b),(T$$.parent=this)._addChild3D(T$$);return T$$}throw new Error("appendChildAt:The index is out of bounds")},T$$.addChild=function(T$$){if(!(T$$ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$$||this.destroyed||T$$===this)return T$$;if(T$$.zOrder&&this._set$P("hasZorder",!0),T$$._parent===this){var T$b=this.getChildIndex(T$$);T$b!==this._childs.length-1&&(this._childs.splice(T$b,1),this._childs.push(T$$),this.conchModel&&(this.conchModel.removeChild(T$$.conchModel),this.conchModel.addChildAt(T$$.conchModel,this._childs.length-1)),this._childChanged())}else T$$.parent&&T$$.parent.removeChild(T$$),this._childs===T$H.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$$),this.conchModel&&this.conchModel.addChildAt(T$$.conchModel,this._childs.length-1),(T$$.parent=this)._childChanged(),this._addChild3D(T$$);return T$$},T$$.removeChildAt=function(T$$){var T$b=this.getChildAt(T$$);return T$b&&(this._removeChild3D(T$b),this._childs.splice(T$$,1),this.conchModel&&this.conchModel.removeChild(T$b.conchModel),T$b.parent=null),T$b},T$$.removeChildren=function(T$$,T$b){if(void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=2147483647),this._childs&&0<this._childs.length){var T$u=this._childs;if(0===T$$&&T$r<=T$b){var T$Z=T$u;this._childs=T$H.ARRAY_EMPTY}else T$Z=T$u.splice(T$$,T$b-T$$);for(var T$E=0,T$r=T$Z.length;T$E<T$r;T$E++)this._removeChild3D(T$Z[T$E]),T$Z[T$E].parent=null,this.conchModel&&this.conchModel.removeChild(T$Z[T$E].conchModel)}return this},T$$.addFrustumCullingObject=function(T$$){this.treeRoot?this.addTreeNode(T$$):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(T$$):this._cullingRenders[this._cullingRendersLength]=T$$,T$$._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},T$$.removeFrustumCullingObject=function(T$$){if(this.treeRoot)this.removeTreeNode(T$$);else{this._cullingRendersLength--;var T$b=T$$._indexInSceneFrustumCullingObjects;if(T$b!==this._cullingRendersLength){var T$u=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[T$b]=T$u)._indexInSceneFrustumCullingObjects=T$b,T$$._indexInSceneFrustumCullingObjects=-1}}},T$$.getRenderQueue=function(T$$){return T$$<3e3?this._quenes[1]||(this._quenes[1]=new T$A(this)):this._quenes[2]||(this._quenes[2]=new T$A(this))},T$$.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new T$A(this)},T$$.addShaderDefine=function(T$$){this._shaderDefineValue|=T$$},T$$.removeShaderDefine=function(T$$){this._shaderDefineValue&=~T$$},T$$.addScript=function(T$$){return this._addComponent(T$$)},T$$.getScriptByType=function(T$$,T$b){return void 0===T$b&&(T$b=0),this._getComponentByType(T$$,T$b)},T$$.getScriptsByType=function(T$$,T$b){this._getComponentsByType(T$$,T$b)},T$$.getScriptByIndex=function(T$$){return this._getComponentByIndex(T$$)},T$$.removeScriptByType=function(T$$,T$b){void 0===T$b&&(T$b=0),this._removeComponentByType(T$$,T$b)},T$$.removeScriptsByType=function(T$$){this._removeComponentByType(T$$)},T$$.removeAllScript=function(){this._removeAllComponent()},T$$.render=function(T$$,T$b,T$u){(T$e._context.ctx._renderKey=0)<this._childs.length&&T$$.addRenderObject(this)},T$$.renderSubmit=function(){var T$$=T$O.mainContext,T$b=this._renderState;this._set3DRenderConfig(T$$),this._prepareSceneToRender(this._renderState);var T$u,T$Z=0,T$E=0;if(T$Tb.debugMode||T$h.debugMode)for(T$Z=0,T$E=this._cameraPool.length;T$Z<T$E;T$Z++)T$u=this._cameraPool[T$Z],T$Tb._debugPhasorSprite.begin(1,T$u),T$u.activeInHierarchy&&T$u._renderCamera(T$$,T$b,this),T$Tb._debugPhasorSprite.end();else for(T$Z=0,T$E=this._cameraPool.length;T$Z<T$E;T$Z++)(T$u=this._cameraPool[T$Z]).activeInHierarchy&&T$u._renderCamera(T$$,T$b,this);return this._set2DRenderConfig(T$$),1},T$$.onAsynLoaded=function(T$$,T$b,T$u){var T$Z=T$b[0];if("Scene"!==T$Z.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var T$E=T$b[1];T$Lb._createNodeByJson(this,T$Z,this,T$E),this.event("hierarchyloaded",[this]),this.__loaded=!0},T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),this.destroyed||(T$b.prototype.destroy.call(this,T$$),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,T$T.clearRes(this.url),this.loaded||T$Tb._cancelLoadByUrl(this.url))},T$$.getRenderType=function(){return 0},T$$.releaseRender=function(){},T$$._addComponent=function(T$$){var T$b,T$u=this._componentsMap.indexOf(T$$);if(-1===T$u)T$b=[],this._componentsMap.push(T$$),this._typeComponentsIndices.push(T$b);else if(T$b=this._typeComponentsIndices[T$u],this._components[T$b[0]].isSingleton)throw new Error("无法单实例创建"+T$$+"组件，"+T$$+"组件已存在！");var T$Z=T$E.getInstance(T$$);T$b.push(this._components.length),this._components.push(T$Z);return T$Z._initialize(this),T$Z},T$$._removeComponent=function(T$$,T$b){var T$u=this._typeComponentsIndices[T$$],T$Z=T$u[T$b],T$E=this._components[T$Z];this._components.splice(T$Z,1),T$u.splice(T$b,1),0===T$u.length&&(this._typeComponentsIndices.splice(T$$,1),this._componentsMap.splice(T$$,1));for(var T$r=0,T$F=this._componentsMap.length;T$r<T$F;T$r++)for(var T$x=(T$u=this._typeComponentsIndices[T$r]).length-1;0<=T$x;T$x--){var T$g=T$u[T$x];if(!(T$Z<T$g))break;T$u[T$x]=--T$g}T$E._destroy()},T$$._getComponentByType=function(T$$,T$b){void 0===T$b&&(T$b=0);var T$u=this._componentsMap.indexOf(T$$);return-1===T$u?null:this._components[this._typeComponentsIndices[T$u][T$b]]},T$$._getComponentsByType=function(T$$,T$b){var T$u=this._componentsMap.indexOf(T$$);if(-1!==T$u){var T$Z=this._typeComponentsIndices[T$u],T$E=T$Z.length;T$b.length=T$E;for(var T$r=0;T$r<T$E;T$r++)T$b[T$r]=this._components[T$Z[T$r]]}else T$b.length=0},T$$._getComponentByIndex=function(T$$){return this._components[T$$]},T$$._removeComponentByType=function(T$$,T$b){void 0===T$b&&(T$b=0);var T$u=this._componentsMap.indexOf(T$$);-1!==T$u&&this._removeComponent(T$u,T$b)},T$$._removeComponentsByType=function(T$$){var T$b=this._componentsMap.indexOf(T$$);if(-1!==T$b)for(var T$u=this._typeComponentsIndices[T$b],T$Z=0,T$E=T$u.length;T$Z<T$E;T$u.length<T$E?T$E--:T$Z++)this._removeComponent(T$b,T$Z)},T$$._removeAllComponent=function(){for(var T$$=0,T$b=this._componentsMap.length;T$$<T$b;this._componentsMap.length<T$b?T$b--:T$$++)this._removeComponentsByType(this._componentsMap[T$$])},T$$._updateComponents=function(T$$){for(var T$b=0,T$u=this._components.length;T$b<T$u;T$b++){var T$Z=this._components[T$b];!T$Z.started&&(T$Z._start(T$$),T$Z.started=!0),T$Z.enable&&T$Z._update(T$$)}},T$$._lateUpdateComponents=function(T$$){for(var T$b=0;T$b<this._components.length;T$b++){var T$u=this._components[T$b];!T$u.started&&(T$u._start(T$$),T$u.started=!0),T$u.enable&&T$u._lateUpdate(T$$)}},T$$._preRenderUpdateComponents=function(T$$){for(var T$b=0;T$b<this._components.length;T$b++){var T$u=this._components[T$b];!T$u.started&&(T$u._start(T$$),T$u.started=!0),T$u.enable&&T$u._preRenderUpdate(T$$)}},T$$._postRenderUpdateComponents=function(T$$){for(var T$b=0;T$b<this._components.length;T$b++){var T$u=this._components[T$b];!T$u.started&&(T$u._start(T$$),T$u.started=!0),T$u.enable&&T$u._postRenderUpdate(T$$)}},T$D(0,T$$,"_loaded",null,function(T$$){this.__loaded=T$$}),T$D(0,T$$,"fogColor",function(){return this._fogColor},function(T$$){this._fogColor=T$$,this._shaderValues.setValue(0,T$$.elements)}),T$D(0,T$$,"enableFog",function(){return this._enableFog},function(T$$){this._enableFog!==T$$&&((this._enableFog=T$$)?(this.addShaderDefine(T$qb.SHADERDEFINE_FOG),this.removeShaderDefine(T$qb.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(T$qb.SHADERDEFINE_FOG))}),T$D(0,T$$,"url",function(){return this._url}),T$D(0,T$$,"loaded",function(){return this.__loaded}),T$D(0,T$$,"enableDepthFog",function(){return this._enableDepthFog},function(T$$){this._enableDepthFog!=T$$&&((this._enableDepthFog=T$$)?(this.addShaderDefine(T$qb.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(T$qb.SHADERDEFINE_FOG)):this.removeShaderDefine(T$qb.SAHDERDEFINE_DEPTHFOG))}),T$D(0,T$$,"fogStart",function(){return this._fogStart},function(T$$){this._fogStart=T$$,this._shaderValues.setValue(1,T$$)}),T$D(0,T$$,"fogRange",function(){return this._fogRange},function(T$$){this._fogRange=T$$,this._shaderValues.setValue(2,T$$)}),T$D(0,T$$,"ambientColor",function(){return this._ambientColor},function(T$$){this._ambientColor=T$$,this._shaderValues.setValue(21,T$$.elements)}),T$D(0,T$$,"scene",function(){return this}),T$D(0,T$$,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),T$Z._sortScenes=function(T$$,T$b){if(T$$.parent!==T$P.stage||T$b.parent!==T$P.stage)return T$$.parent!==T$P.stage&&T$b.parent!==T$P.stage?T$Z._sortScenes(T$$.parent,T$b.parent):T$$.parent===T$P.stage?-1:1;var T$u=T$P.stage._childs;return T$u.indexOf(T$$)-T$u.indexOf(T$b)},T$Z.load=function(T$$){return T$P.loader.create(T$$,null,null,T$Z)},T$Z.FOGCOLOR=0,T$Z.FOGSTART=1,T$Z.FOGRANGE=2,T$Z.LIGHTDIRECTION=3,T$Z.LIGHTDIRCOLOR=4,T$Z.POINTLIGHTPOS=5,T$Z.POINTLIGHTRANGE=6,T$Z.POINTLIGHTATTENUATION=7,T$Z.POINTLIGHTCOLOR=8,T$Z.SPOTLIGHTPOS=9,T$Z.SPOTLIGHTDIRECTION=10,T$Z.SPOTLIGHTSPOT=11,T$Z.SPOTLIGHTRANGE=12,T$Z.SPOTLIGHTATTENUATION=13,T$Z.SPOTLIGHTCOLOR=14,T$Z.SHADOWDISTANCE=15,T$Z.SHADOWLIGHTVIEWPROJECT=16,T$Z.SHADOWMAPPCFOFFSET=17,T$Z.SHADOWMAPTEXTURE1=18,T$Z.SHADOWMAPTEXTURE2=19,T$Z.SHADOWMAPTEXTURE3=20,T$Z.AMBIENTCOLOR=21,T$Z.TIME=22,T$Z}(T$z),T$kb=function(T$$){function T$b(T$$){T$b.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new T$$b,this._shaderValues=new T$ob,this._colliders=[],this._id=++T$b._uniqueIDCounter,this._transform=new T$ib(this),this.name=T$$||"Sprite3D-"+T$b._nameNumberCounter++,this.layer=T$p.currentCreationLayer,this.active=!0}T$N(T$b,"laya.d3.core.Sprite3D",T$Cb);var T$u=T$b.prototype;return T$P.imps(T$u,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),T$u._setUrl=function(T$$){this._url=T$$},T$u._getGroup=function(){return this._group},T$u._setGroup=function(T$$){this._group=T$$},T$u._addChild3D=function(T$$){T$$.transform.parent=this.transform,this._hierarchyAnimator&&(!T$$._hierarchyAnimator&&T$$._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(T$$,!0,[T$$.name])),this._scene&&(T$$._setBelongScene(this._scene),this._activeInHierarchy&&T$$._active&&T$$._activeHierarchy())},T$u._removeChild3D=function(T$$){T$$.transform.parent=null,this._scene&&(this._activeInHierarchy&&T$$._active&&T$$._inActiveHierarchy(),T$$._setUnBelongScene()),this._hierarchyAnimator&&(T$$._hierarchyAnimator==this._hierarchyAnimator&&T$$._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(T$$,!1,[T$$.name]))},T$u._parseBaseCustomProps=function(T$$){var T$b=this.transform.localPosition;T$$.translate?(T$b.fromArray(T$$.translate),T$b.x*=100,T$b.y*=100,T$b.z*=100):T$b.elements.fill(0),this.transform.localPosition=T$b;var T$u=this.transform.localRotation;T$$.rotation?T$u.fromArray(T$$.rotation):T$u.fromArray([0,0,0,-1]),this.transform.localRotation=T$u;var T$Z=this.transform.localScale;T$$.scale?T$Z.fromArray(T$$.scale):T$Z.elements.fill(1),this.transform.localScale=T$Z;var T$E=T$$.layer;null!=T$E&&(this.layer=T$p.getLayerByNumber(T$E))},T$u._parseCustomComponent=function(T$$,T$b,T$u){for(var T$Z in T$u){var T$E=T$u[T$Z];switch(T$Z){case"Animator":var T$r=this.addComponent(Animator);if(T$E.avatarPath)T$r.avatar=T$T.getRes(T$b[T$E.avatarPath]);else{var T$F=T$E.avatar;if(T$F){T$r.avatar=T$T.getRes(T$b[T$F.path]);var T$x=T$F.linkSprites;T$x&&T$$.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[T$r,T$x])}}for(var T$g=T$E.clipPaths,T$H=T$g.length,T$w=0;T$w<T$H;T$w++)T$r.addClip(T$T.getRes(T$b[T$g[T$w]]));T$r.clip=T$T.getRes(T$b[T$g[0]]);var T$I=T$E.playOnWake;void 0!==T$I&&(T$r.playOnWake=T$I);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var T$o=this.addComponent(SphereCollider);T$o.isTrigger=T$E.isTrigger;var T$N=T$o.center;T$N.fromArray(T$E.center),T$o.center=T$N,T$o.radius=T$E.radius;break;case"BoxCollider":var T$D=this.addComponent(BoxCollider);T$D.isTrigger=T$E.isTrigger,T$D.center.fromArray(T$E.center);var T$e=T$D.size;T$e.fromArray(T$E.size),T$D.size=T$e;break;case"MeshCollider":this.addComponent(MeshCollider)}}},T$u._onRootNodeHierarchyLoaded=function(T$$,T$b){for(var T$u in T$b){for(var T$Z=this,T$E=T$b[T$u],T$r=0,T$F=T$E.length;T$r<T$F;T$r++){var T$x=T$E[T$r];if(""===T$x)break;if(!(T$Z=T$Z.getChildByName(T$x)))break}T$Z&&T$$.linkSprite3DToAvatarNode(T$u,T$Z)}},T$u._setHierarchyAnimator=function(T$$,T$b){this._changeHierarchyAnimator(T$$);for(var T$u=0,T$Z=this._childs.length;T$u<T$Z;T$u++){var T$E=this._childs[T$u];T$E._hierarchyAnimator==T$b&&T$E._setHierarchyAnimator(T$$,T$b)}},T$u._clearHierarchyAnimator=function(T$$,T$b){this._changeHierarchyAnimator(T$b);for(var T$u=0,T$Z=this._childs.length;T$u<T$Z;T$u++){var T$E=this._childs[T$u];T$E._hierarchyAnimator==T$$&&T$E._clearHierarchyAnimator(T$$,T$b)}},T$u._getAnimatorToLinkSprite3D=function(T$$,T$b,T$u){var T$Z=this.getComponentByType(Animator);if(T$Z&&(T$Z.avatar?T$Z.avatar._version||T$$._setAnimatorToLinkAvatar(T$Z,T$b):T$$._setAnimatorToLinkSprite3DNoAvatar(T$Z,T$b,T$u)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){T$u.unshift(this._parent.name);var T$E=this._parent;T$E._hierarchyAnimator&&T$E._getAnimatorToLinkSprite3D(T$$,T$b,T$u)}},T$u._setAnimatorToLinkSprite3DNoAvatar=function(T$$,T$b,T$u){var T$Z=0,T$E=0;for(T$Z=0,T$E=T$$.getClipCount();T$Z<T$E;T$Z++)T$$._handleSpriteOwnersBySprite(T$Z,T$b,T$u,this);for(T$Z=0,T$E=this._childs.length;T$Z<T$E;T$Z++){var T$r=this._childs[T$Z],T$F=T$u.length;T$u.push(T$r.name),T$r._setAnimatorToLinkSprite3DNoAvatar(T$$,T$b,T$u),T$u.splice(T$F,1)}},T$u._changeHierarchyAnimator=function(T$$){this._hierarchyAnimator=T$$},T$u._isLinkSpriteToAnimationNode=function(T$$,T$b,T$u){var T$Z=T$$._avatarNodes.indexOf(T$b),T$E=T$$._cacheSpriteToNodesMap;if(T$u)this._transform.dummy=T$b.transform,T$$._cacheNodesToSpriteMap[T$Z]=T$E.length,T$E.push(T$Z);else{this._transform.dummy=null;var T$r=T$$._cacheNodesToSpriteMap[T$Z];T$$._cacheNodesToSpriteMap[T$Z]=null,T$E.splice(T$r,1)}},T$u._setBelongScene=function(T$$){this._scene=T$$;for(var T$b=0,T$u=this._childs.length;T$b<T$u;T$b++)this._childs[T$b]._setBelongScene(T$$)},T$u._setUnBelongScene=function(){this._scene=null;for(var T$$=0,T$b=this._childs.length;T$$<T$b;T$$++)this._childs[T$$]._setUnBelongScene()},T$u._activeHierarchy=function(){var T$$=0,T$b=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),T$$=0,T$b=this._colliders.length;T$$<T$b;T$$++)this._layer._addCollider(this._colliders[T$$]);for(this.event("activeinhierarchychanged",!0),T$$=0,T$b=this._childs.length;T$$<T$b;T$$++){var T$u=this._childs[T$$];T$u._active&&T$u._activeHierarchy()}},T$u._inActiveHierarchy=function(){var T$$=0,T$b=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),T$$=0,T$b=this._colliders.length;T$$<T$b;T$$++){var T$u=this._colliders[T$$];T$u._clearCollsionMap(),this._layer._removeCollider(T$u)}for(this.event("activeinhierarchychanged",!1),T$$=0,T$b=this._childs.length;T$$<T$b;T$$++){var T$Z=this._childs[T$$];T$Z._active&&T$Z._inActiveHierarchy()}},T$u.addComponent=function(T$$){var T$b,T$u=this._componentsMap.indexOf(T$$);if(-1===T$u)T$b=[],this._componentsMap.push(T$$),this._typeComponentsIndices.push(T$b);else if(T$b=this._typeComponentsIndices[T$u],this._components[T$b[0]].isSingleton)throw new Error("无法单实例创建"+T$$+"组件，"+T$$+"组件已存在！");var T$Z=T$E.getInstance(T$$);return T$b.push(this._components.length),this._components.push(T$Z),T$Z instanceof laya.d3.component.Script&&this._scripts.push(T$Z),T$Z._initialize(this),T$Z},T$u._removeComponent=function(T$$,T$b){var T$u,T$Z=0,T$E=this._typeComponentsIndices[T$$],T$r=T$E[T$b],T$F=this._components[T$r];for(T$F instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(T$F),1),T$E.splice(T$b,1),0===T$E.length&&(this._typeComponentsIndices.splice(T$$,1),this._componentsMap.splice(T$$,1)),T$Z=0,T$u=this._componentsMap.length;T$Z<T$u;T$Z++)for(var T$x=(T$E=this._typeComponentsIndices[T$Z]).length-1;0<=T$x;T$x--){var T$g=T$E[T$x];if(!(T$r<T$g))break;T$E[T$x]=--T$g}T$F._destroy()},T$u._clearSelfRenderObjects=function(){},T$u._addSelfRenderObjects=function(){},T$u._parseCustomProps=function(T$$,T$b,T$u,T$Z){},T$u._updateChilds=function(T$$){var T$b=this._childs.length;if(0!==T$b)for(var T$u=0;T$u<T$b;++T$u)this._childs[T$u]._update(T$$)},T$u._getSortID=function(T$$,T$b){return 1e3*T$b.id+T$$._getVertexBuffer().vertexDeclaration.id},T$u._update=function(T$$){(T$$.owner=this)._activeInHierarchy&&(this._updateComponents(T$$),this._lateUpdateComponents(T$$),T$q.spriteCount++,this._childs.length&&this._updateChilds(T$$))},T$u.getProjectionViewWorldMatrix=function(T$$){return T$$b.multiply(T$$,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},T$u.loadHierarchy=function(T$$){this.addChild(laya.d3.core.Sprite3D.load(T$$))},T$u.addChildAt=function(T$$,T$b){if(!(T$$ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$$||this.destroyed||T$$===this)return T$$;if(T$$.zOrder&&this._set$P("hasZorder",!0),0<=T$b&&T$b<=this._childs.length){if(T$$._parent===this){var T$u=this.getChildIndex(T$$);this._childs.splice(T$u,1),this._childs.splice(T$b,0,T$$),this.conchModel&&(this.conchModel.removeChild(T$$.conchModel),this.conchModel.addChildAt(T$$.conchModel,T$b)),this._childChanged()}else T$$.parent&&T$$.parent.removeChild(T$$),this._childs===T$H.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(T$b,0,T$$),this.conchModel&&this.conchModel.addChildAt(T$$.conchModel,T$b),(T$$.parent=this)._addChild3D(T$$);return T$$}throw new Error("appendChildAt:The index is out of bounds")},T$u.addChild=function(T$$){if(!(T$$ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!T$$||this.destroyed||T$$===this)return T$$;if(T$$.zOrder&&this._set$P("hasZorder",!0),T$$._parent===this){var T$b=this.getChildIndex(T$$);T$b!==this._childs.length-1&&(this._childs.splice(T$b,1),this._childs.push(T$$),this.conchModel&&(this.conchModel.removeChild(T$$.conchModel),this.conchModel.addChildAt(T$$.conchModel,this._childs.length-1)),this._childChanged())}else T$$.parent&&T$$.parent.removeChild(T$$),this._childs===T$H.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(T$$),this.conchModel&&this.conchModel.addChildAt(T$$.conchModel,this._childs.length-1),(T$$.parent=this)._childChanged(),this._addChild3D(T$$);return T$$},T$u.removeChildAt=function(T$$){var T$b=this.getChildAt(T$$);return T$b&&(this._removeChild3D(T$b),this._childs.splice(T$$,1),this.conchModel&&this.conchModel.removeChild(T$b.conchModel),T$b.parent=null),T$b},T$u.removeChildren=function(T$$,T$b){if(void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=2147483647),this._childs&&0<this._childs.length){var T$u=this._childs;if(0===T$$&&T$r<=T$b){var T$Z=T$u;this._childs=T$H.ARRAY_EMPTY}else T$Z=T$u.splice(T$$,T$b-T$$);for(var T$E=0,T$r=T$Z.length;T$E<T$r;T$E++)this._removeChild3D(T$Z[T$E]),T$Z[T$E].parent=null,this.conchModel&&this.conchModel.removeChild(T$Z[T$E].conchModel)}return this},T$u.onAsynLoaded=function(T$$,T$b,T$u){var T$Z=T$b[0];if("Sprite3D"!==T$Z.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var T$E=T$b[1];T$Lb._createNodeByJson(this,T$Z,this,T$E),this.event("hierarchyloaded",[this]),this.__loaded=!0},T$u.cloneTo=function(T$$){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var T$b=T$$;T$b.name=this.name,T$b._destroyed=this._destroyed,T$b.timer=this.timer,T$b._$P=this._$P,T$b.active=this._active;var T$u=T$b.transform.localPosition;this.transform.localPosition.cloneTo(T$u),T$b.transform.localPosition=T$u;var T$Z=T$b.transform.localRotation;this.transform.localRotation.cloneTo(T$Z),T$b.transform.localRotation=T$Z;var T$E=T$b.transform.localScale;this.transform.localScale.cloneTo(T$E),T$b.transform.localScale=T$E,T$b.isStatic=this.isStatic;var T$r=0,T$F=0;for(T$r=0,T$F=this._componentsMap.length;T$r<T$F;T$r++){var T$x=T$b.addComponent(this._componentsMap[T$r]);this._components[T$r]._cloneTo(T$x)}for(T$r=0,T$F=this._childs.length;T$r<T$F;T$r++)T$b.addChild(this._childs[T$r].clone());var T$g=T$b.getComponentByType(Animator);if(T$g){var T$H=T$g._linkSpritesData;if(T$H)for(var T$w in T$H){for(var T$I=T$H[T$w],T$o=T$b,T$N=0,T$D=T$I.length;T$N<T$D&&(T$o=T$o.getChildByName(T$I[T$N]));T$N++);if(T$o){var T$e=T$g._avatarNodeMap[T$w];T$o._isLinkSpriteToAnimationNode(T$g,T$e,!0)}}}},T$u.clone=function(){var T$$=new this.constructor;return this.cloneTo(T$$),T$$},T$u.destroy=function(T$$){if(void 0===T$$&&(T$$=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,T$$);var T$b,T$u=0;for(T$u=0,T$b=this._components.length;T$u<T$b;T$u++)this._components[T$u]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,T$T.clearRes(this.url),this.loaded||T$Tb._cancelLoadByUrl(this.url)}},T$u._handleSpriteToAvatar=function(T$$,T$b){T$$._avatarNodes;var T$u=T$$._avatarNodeMap[this.name];T$u&&T$u.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(T$$,T$u,T$b)},T$u._setAnimatorToLinkAvatar=function(T$$,T$b){this._handleSpriteToAvatar(T$$,T$b);for(var T$u=0,T$Z=this._childs.length;T$u<T$Z;T$u++){this._childs[T$u]._setAnimatorToLinkAvatar(T$$,T$b)}},T$D(0,T$u,"activeInHierarchy",function(){return this._activeInHierarchy}),T$D(0,T$u,"_loaded",null,function(T$$){this.__loaded=T$$}),T$D(0,T$u,"active",function(){return this._active},function(T$$){this._active!==T$$&&(this._active=T$$,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(T$$?this._activeHierarchy():this._inActiveHierarchy()))}),T$D(0,T$u,"componentsCount",function(){return this._components.length}),T$D(0,T$u,"loaded",function(){return this.__loaded}),T$D(0,T$u,"id",function(){return this._id}),T$D(0,T$u,"url",function(){return this._url}),T$D(0,T$u,"layer",function(){return this._layer},function(T$$){if(this._layer!==T$$){if(!T$$)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var T$b=0,T$u=this._colliders.length;if(this._layer)for(T$b=0;T$b<T$u;T$b++)this._layer._removeCollider(this._colliders[T$b]);for(T$b=0;T$b<T$u;T$b++)T$$._addCollider(this._colliders[T$b])}this._layer=T$$,this.event("layerchanged",T$$)}}),T$D(0,T$u,"scene",function(){return this._scene}),T$D(0,T$u,"transform",function(){return this._transform}),T$b.instantiate=function(T$$,T$b,T$u,T$Z,T$E){void 0===T$u&&(T$u=!0);var T$r=T$$.clone();T$b&&T$b.addChild(T$r);var T$F=T$r.transform;if(T$u){var T$x=T$F.worldMatrix;T$$.transform.worldMatrix.cloneTo(T$x),T$F.worldMatrix=T$x}else T$Z&&(T$F.position=T$Z),T$E&&(T$F.rotation=T$E);return T$r},T$b.load=function(T$$){return T$P.loader.create(T$$,null,null,T$b)},T$b.WORLDMATRIX=0,T$b.MVPMATRIX=1,T$b._uniqueIDCounter=0,T$b._nameNumberCounter=0,T$b}(),T$Mb=function(T$$){function T$w(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],T$w.__super.call(this),!T$$||!T$b)throw"Shader Error";this._id=++T$w._count,this._vs=T$$,this._ps=T$b,this._attributeMap=T$u,this._sceneUniformMap=T$Z,this._cameraUniformMap=T$E,this._spriteUniformMap=T$r,this._materialUniformMap=T$F,this._renderElementUniformMap=T$x,this._precompile=T$g,this._define=T$H,this._precompile&&T$w.extCompileObj&&T$w.extCompileFunc?T$w.extCompileFunc.call(T$w.extCompileObj,T$$,T$b,T$H):this.recreateResource()}T$N(T$w,"laya.d3.shader.Shader3D",T$u);var T$b=T$w.prototype;return T$b.recreateResource=function(){T$v.now();this._compile(),this.completeCreate(),this.memorySize=0},T$b.disposeResource=function(){T$O.mainContext.deleteShader(this._vshader),T$O.mainContext.deleteShader(this._pshader),T$O.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},T$b._compile=function(){if(!T$O.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var T$$=[this._vs,this._ps],T$b=T$O.mainContext;if(this._program=T$b.createProgram(),this._vshader=T$w._createShader(T$b,T$$[0],35633),this._pshader=T$w._createShader(T$b,T$$[1],35632),T$b.attachShader(this._program,this._vshader),T$b.attachShader(this._program,this._pshader),T$b.linkProgram(this._program),!T$e.isConchApp&&T$qb.debugMode&&!T$b.getProgramParameter(this._program,35714))throw T$b.getProgramInfoLog(this._program);var T$u,T$Z=0,T$E=0,T$r=0;for(T$r=T$e.isConchApp?T$b.getProgramParameterEx(this._vs,this._ps,"",35721):T$b.getProgramParameter(this._program,35721),T$Z=0;T$Z<T$r;T$Z++){var T$F=null;T$u={vartype:"attribute",ivartype:0,attrib:T$F=T$e.isConchApp?T$b.getActiveAttribEx(this._vs,this._ps,"",T$Z):T$b.getActiveAttrib(this._program,T$Z),location:T$b.getAttribLocation(this._program,T$F.name),name:T$F.name,type:T$F.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(T$u)}var T$x=0;for(T$x=T$e.isConchApp?T$b.getProgramParameterEx(this._vs,this._ps,"",35718):T$b.getProgramParameter(this._program,35718),T$Z=0;T$Z<T$x;T$Z++){var T$g=null;T$g=T$e.isConchApp?T$b.getActiveUniformEx(this._vs,this._ps,"",T$Z):T$b.getActiveUniform(this._program,T$Z),0<(T$u={vartype:"uniform",ivartype:1,attrib:T$F,location:T$b.getUniformLocation(this._program,T$g.name),name:T$g.name,type:T$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(T$u.name=T$u.name.substr(0,T$u.name.length-3),T$u.isArray=!0,T$u.location=T$b.getUniformLocation(this._program,T$u.name)),this._uniformParams.push(T$u)}for(T$Z=0,T$E=this._attributeParams.length;T$Z<T$E;T$Z++)(T$u=this._attributeParams[T$Z]).indexOfParams=T$Z,T$u.index=1,T$u.value=[T$u.location,null],T$u.codename=T$u.name,T$u.name=null!=this._attributeMap[T$u.codename]?this._attributeMap[T$u.codename]:T$u.codename,this._attributeParamsMap.push(T$u.name),this._attributeParamsMap.push(T$u),T$u._this=this,T$u.uploadedValue=[],T$u.fun=this._attribute;for(T$Z=0,T$E=this._uniformParams.length;T$Z<T$E;T$Z++)switch((T$u=this._uniformParams[T$Z]).indexOfParams=T$Z,T$u.index=1,T$u.value=[T$u.location,null],T$u.codename=T$u.name,null!=this._sceneUniformMap[T$u.codename]?(T$u.name=this._sceneUniformMap[T$u.codename],this._sceneUniformParamsMap.push(T$u.name),this._sceneUniformParamsMap.push(T$u)):null!=this._cameraUniformMap[T$u.codename]?(T$u.name=this._cameraUniformMap[T$u.codename],this._cameraUniformParamsMap.push(T$u.name),this._cameraUniformParamsMap.push(T$u)):null!=this._spriteUniformMap[T$u.codename]?(T$u.name=this._spriteUniformMap[T$u.codename],this._spriteUniformParamsMap.push(T$u.name),this._spriteUniformParamsMap.push(T$u)):null!=this._materialUniformMap[T$u.codename]?(T$u.name=this._materialUniformMap[T$u.codename],this._materialUniformParamsMap.push(T$u.name),this._materialUniformParamsMap.push(T$u)):null!=this._renderElementUniformMap[T$u.codename]?(T$u.name=this._renderElementUniformMap[T$u.codename],this._renderElementUniformParamsMap.push(T$u.name),this._renderElementUniformParamsMap.push(T$u)):console.log("Shader:can't find uinform name:"+T$u.codename+" in shader file."),T$u._this=this,T$u.uploadedValue=[],T$u.type){case 5124:T$u.fun=T$u.isArray?this._uniform1iv:this._uniform1i;break;case 5126:T$u.fun=T$u.isArray?this._uniform1fv:this._uniform1f;break;case 35664:T$u.fun=T$u.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:T$u.fun=T$u.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:T$u.fun=T$u.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:T$u.fun=this._uniform_sampler2D;break;case 35680:T$u.fun=this._uniform_samplerCube;break;case 35676:T$u.fun=this._uniformMatrix4fv;break;case 35670:T$u.fun=this._uniform1i;break;case 35674:T$u.fun=this._uinformMatrix2fv;break;case 35675:T$u.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},T$b._attribute=function(T$$,T$b){var T$u=T$O.mainContext,T$Z=T$x._enableAtributes,T$E=T$$.location;return T$Z[T$E]||T$u.enableVertexAttribArray(T$E),T$u.vertexAttribPointer(T$E,T$b[0],T$b[1],T$b[2],T$b[3],T$b[4]),T$Z[T$E]=T$x._bindVertexBuffer,1},T$b._uniform1f=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b?(T$O.mainContext.uniform1f(T$$.location,T$u[0]=T$b),1):0},T$b._uniform1fv=function(T$$,T$b){if(T$b.length<4){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]||T$u[3]!==T$b[3]?(T$O.mainContext.uniform1fv(T$$.location,T$b),T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2],T$u[3]=T$b[3],1):0}return T$O.mainContext.uniform1fv(T$$.location,T$b),1},T$b._uniform_vec2=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]?(T$O.mainContext.uniform2f(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1]),1):0},T$b._uniform_vec2v=function(T$$,T$b){if(T$b.length<2){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]||T$u[3]!==T$b[3]?(T$O.mainContext.uniform2fv(T$$.location,T$b),T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2],T$u[3]=T$b[3],1):0}return T$O.mainContext.uniform2fv(T$$.location,T$b),1},T$b._uniform_vec3=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]?(T$O.mainContext.uniform3f(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2]),1):0},T$b._uniform_vec3v=function(T$$,T$b){return T$O.mainContext.uniform3fv(T$$.location,T$b),1},T$b._uniform_vec4=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]||T$u[3]!==T$b[3]?(T$O.mainContext.uniform4f(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2],T$u[3]=T$b[3]),1):0},T$b._uniform_vec4v=function(T$$,T$b){return T$O.mainContext.uniform4fv(T$$.location,T$b),1},T$b._uniformMatrix2fv=function(T$$,T$b){return T$O.mainContext.uniformMatrix2fv(T$$.location,!1,T$b),1},T$b._uniformMatrix3fv=function(T$$,T$b){return T$O.mainContext.uniformMatrix3fv(T$$.location,!1,T$b),1},T$b._uniformMatrix4fv=function(T$$,T$b){return T$O.mainContext.uniformMatrix4fv(T$$.location,!1,T$b),1},T$b._uinformMatrix2fv=function(T$$,T$b){return T$O.mainContext.uniformMatrix2fv(T$$.location,!1,T$b),1},T$b._uinformMatrix3fv=function(T$$,T$b){return T$O.mainContext.uniformMatrix3fv(T$$.location,!1,T$b),1},T$b._uniform1i=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b?(T$O.mainContext.uniform1i(T$$.location,T$u[0]=T$b),1):0},T$b._uniform1iv=function(T$$,T$b){return T$O.mainContext.uniform1iv(T$$.location,T$b),1},T$b._uniform_ivec2=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]?(T$O.mainContext.uniform2i(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1]),1):0},T$b._uniform_ivec2v=function(T$$,T$b){return T$O.mainContext.uniform2iv(T$$.location,T$b),1},T$b._uniform_vec3i=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]?(T$O.mainContext.uniform3i(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2]),1):0},T$b._uniform_vec3vi=function(T$$,T$b){return T$O.mainContext.uniform3iv(T$$.location,T$b),1},T$b._uniform_vec4i=function(T$$,T$b){var T$u=T$$.uploadedValue;return T$u[0]!==T$b[0]||T$u[1]!==T$b[1]||T$u[2]!==T$b[2]||T$u[3]!==T$b[3]?(T$O.mainContext.uniform4i(T$$.location,T$u[0]=T$b[0],T$u[1]=T$b[1],T$u[2]=T$b[2],T$u[3]=T$b[3]),1):0},T$b._uniform_vec4vi=function(T$$,T$b){return T$O.mainContext.uniform4iv(T$$.location,T$b),1},T$b._uniform_sampler2D=function(T$$,T$b){var T$u=T$b.source||T$b.defaulteTexture.source,T$Z=T$O.mainContext,T$E=T$$.uploadedValue;if(null!=T$E[0])return T$Z.activeTexture(T$w._TEXTURES[T$E[0]]),T$u&&T$V.bindTexture(T$Z,3553,T$u),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return T$E[0]=this._curActTexIndex,T$Z.uniform1i(T$$.location,this._curActTexIndex),T$Z.activeTexture(T$w._TEXTURES[this._curActTexIndex]),T$u&&T$V.bindTexture(T$Z,3553,T$u),this._curActTexIndex++,1},T$b._uniform_samplerCube=function(T$$,T$b){var T$u=T$b.source||T$b.defaulteTexture.source,T$Z=T$O.mainContext,T$E=T$$.uploadedValue;if(null!=T$E[0])return T$Z.activeTexture(T$w._TEXTURES[T$E[0]]),T$u?T$V.bindTexture(T$Z,34067,T$u):T$V.bindTexture(T$Z,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return T$E[0]=this._curActTexIndex,T$Z.uniform1i(T$$.location,this._curActTexIndex),T$Z.activeTexture(T$w._TEXTURES[this._curActTexIndex]),T$u?T$V.bindTexture(T$Z,34067,T$u):T$V.bindTexture(T$Z,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},T$b._noSetValue=function(T$$){console.log("no....:"+T$$.name)},T$b.bind=function(){return T$u.activeShader=this,(T$u.bindShader=this).activeResource(),T$V.UseProgram(this._program)},T$b.uploadAttributes=function(T$$,T$b){for(var T$u,T$Z,T$E=0,T$r=0,T$F=this._attributeParamsMap.length;T$r<T$F;T$r+=2)T$Z=this._attributeParamsMap[T$r+1],null!=(T$u=T$$[this._attributeParamsMap[T$r]])&&(T$b&&T$b[T$Z.name]&&T$b[T$Z.name].bind(),T$E+=T$Z.fun.call(this,T$Z,T$u));T$q.shaderCall+=T$E},T$b.uploadAttributesX=function(T$$,T$b){for(var T$u,T$Z,T$E=0,T$r=0,T$F=this._attributeParamsMap.length;T$r<T$F;T$r+=2)T$Z=this._attributeParamsMap[T$r+1],null!=(T$u=T$$[this._attributeParamsMap[T$r]])&&(T$b._bind(),T$E+=T$Z.fun.call(this,T$Z,T$u));T$q.shaderCall+=T$E},T$b.uploadSceneUniforms=function(T$$){for(var T$b,T$u,T$Z=0,T$E=0,T$r=this._sceneUniformParamsMap.length;T$E<T$r;T$E+=2)T$u=this._sceneUniformParamsMap[T$E+1],null!=(T$b=T$$[this._sceneUniformParamsMap[T$E]])&&(T$Z+=T$u.fun.call(this,T$u,T$b));T$q.shaderCall+=T$Z},T$b.uploadCameraUniforms=function(T$$){for(var T$b,T$u,T$Z=0,T$E=0,T$r=this._cameraUniformParamsMap.length;T$E<T$r;T$E+=2)T$u=this._cameraUniformParamsMap[T$E+1],null!=(T$b=T$$[this._cameraUniformParamsMap[T$E]])&&(T$Z+=T$u.fun.call(this,T$u,T$b));T$q.shaderCall+=T$Z},T$b.uploadSpriteUniforms=function(T$$){for(var T$b,T$u,T$Z=0,T$E=0,T$r=this._spriteUniformParamsMap.length;T$E<T$r;T$E+=2)T$u=this._spriteUniformParamsMap[T$E+1],null!=(T$b=T$$[this._spriteUniformParamsMap[T$E]])&&(T$Z+=T$u.fun.call(this,T$u,T$b));T$q.shaderCall+=T$Z},T$b.uploadMaterialUniforms=function(T$$){for(var T$b,T$u,T$Z=0,T$E=0,T$r=this._materialUniformParamsMap.length;T$E<T$r;T$E+=2)T$u=this._materialUniformParamsMap[T$E+1],null!=(T$b=T$$[this._materialUniformParamsMap[T$E]])&&(T$Z+=T$u.fun.call(this,T$u,T$b));T$q.shaderCall+=T$Z},T$b.uploadRenderElementUniforms=function(T$$){for(var T$b,T$u,T$Z=0,T$E=0,T$r=this._renderElementUniformParamsMap.length;T$E<T$r;T$E+=2)T$u=this._renderElementUniformParamsMap[T$E+1],null!=(T$b=T$$[this._renderElementUniformParamsMap[T$E]])&&(T$Z+=T$u.fun.call(this,T$u,T$b));T$q.shaderCall+=T$Z},T$w.create=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){return new T$w(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H)},T$w.addInclude=function(T$$,T$b){T$y.addInclude(T$$,T$b)},T$w._createShader=function(T$$,T$b,T$u){var T$Z=T$$.createShader(T$u);if(T$$.shaderSource(T$Z,T$b),T$$.compileShader(T$Z),T$qb.debugMode&&!T$$.getShaderParameter(T$Z,35713))throw T$$.getShaderInfoLog(T$Z);return T$Z},T$w.PERIOD_RENDERELEMENT=0,T$w.PERIOD_MATERIAL=1,T$w.PERIOD_SPRITE=2,T$w.PERIOD_CAMERA=3,T$w.PERIOD_SCENE=4,T$w._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],T$w._count=0,T$w._preCompile=!1,T$w.extCompileFunc=null,T$w.extCompileObj=null,T$I(T$w,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new T$a}]),T$w}(),T$lb=function(T$x){function T$g(){this._transformUV=null,T$g.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new T$Fb(.6,.6,.6)),this._setColor(10,new T$Fb(1,1,1)),this._setColor(11,new T$xb(1,1,1,8)),this._setColor(12,new T$Fb(1,1,1)),this._setColor(7,new T$xb(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new T$xb(1,1,0,0)),this.renderMode=1}T$N(T$g,"laya.d3.core.material.StandardMaterial",T$x);var T$$=T$g.prototype;return T$$.disableLight=function(){this._addDisablePublicShaderDefine(T$qb.SHADERDEFINE_POINTLIGHT|T$qb.SHADERDEFINE_SPOTLIGHT|T$qb.SHADERDEFINE_DIRECTIONLIGHT)},T$$.disableFog=function(){this._addDisablePublicShaderDefine(T$qb.SHADERDEFINE_FOG)},T$$.onAsynLoaded=function(T$$,T$b,T$u){var T$Z=T$b[0];if(T$Z.version)T$x.prototype.onAsynLoaded.call(this,T$$,T$b,T$u);else{var T$E=T$b[1],T$r=T$Z.props;for(var T$F in T$r)this[T$F]=T$r[T$F];T$g._parseStandardMaterial(T$E,this,T$Z),this._endLoaded()}},T$$.cloneTo=function(T$$){T$x.prototype.cloneTo.call(this,T$$);var T$b=T$$;this._transformUV&&(T$b._transformUV=this._transformUV.clone())},T$D(0,T$$,"ambientColor",function(){return this._getColor(9)},function(T$$){this._setColor(9,T$$)}),T$D(0,T$$,"ambientTexture",function(){return this._getTexture(5)},function(T$$){T$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,T$$)}),T$D(0,T$$,"renderMode",null,function(T$$){switch(T$$){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(T$g.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(T$$)}),T$D(0,T$$,"reflectColor",function(){return this._getColor(12)},function(T$$){this._setColor(12,T$$)}),T$D(0,T$$,"tilingOffset",function(){return this._getColor(15)},function(T$$){if(T$$){var T$b=T$$.elements;1!=T$b[0]||1!=T$b[1]||0!=T$b[2]||0!=T$b[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,T$$)}),T$D(0,T$$,"albedo",function(){return this._getColor(7)},function(T$$){this._setColor(7,T$$)}),T$D(0,T$$,"diffuseColor",function(){return this._getColor(10)},function(T$$){this._setColor(10,T$$)}),T$D(0,T$$,"albedoColor",function(){return this._getColor(7)},function(T$$){this._setColor(7,T$$)}),T$D(0,T$$,"specularColor",function(){return this._getColor(11)},function(T$$){this._setColor(11,T$$)}),T$D(0,T$$,"diffuseTexture",function(){return this._getTexture(1)},function(T$$){T$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,T$$)}),T$D(0,T$$,"normalTexture",function(){return this._getTexture(2)},function(T$$){T$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,T$$)}),T$D(0,T$$,"specularTexture",function(){return this._getTexture(3)},function(T$$){T$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,T$$)}),T$D(0,T$$,"emissiveTexture",function(){return this._getTexture(4)},function(T$$){T$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,T$$)}),T$D(0,T$$,"reflectTexture",function(){return this._getTexture(6)},function(T$$){T$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,T$$)}),T$D(0,T$$,"transformUV",function(){return this._transformUV},function(T$$){this._transformUV=T$$,this._setMatrix4x4(13,T$$.matrix),T$$?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,T$$.matrix.elements,0)}),T$g.__init__=function(){T$g.SHADERDEFINE_DIFFUSEMAP=T$g.shaderDefines.registerDefine("DIFFUSEMAP"),T$g.SHADERDEFINE_NORMALMAP=T$g.shaderDefines.registerDefine("NORMALMAP"),T$g.SHADERDEFINE_SPECULARMAP=T$g.shaderDefines.registerDefine("SPECULARMAP"),T$g.SHADERDEFINE_EMISSIVEMAP=T$g.shaderDefines.registerDefine("EMISSIVEMAP"),T$g.SHADERDEFINE_AMBIENTMAP=T$g.shaderDefines.registerDefine("AMBIENTMAP"),T$g.SHADERDEFINE_REFLECTMAP=T$g.shaderDefines.registerDefine("REFLECTMAP"),T$g.SHADERDEFINE_UVTRANSFORM=T$g.shaderDefines.registerDefine("UVTRANSFORM"),T$g.SHADERDEFINE_TILINGOFFSET=T$g.shaderDefines.registerDefine("TILINGOFFSET"),T$g.SHADERDEFINE_ADDTIVEFOG=T$g.shaderDefines.registerDefine("ADDTIVEFOG")},T$g.load=function(T$$){return T$P.loader.create(T$$,null,null,T$g)},T$g._parseStandardMaterial=function(T$$,T$b,T$u){var T$Z=T$u.customProps,T$E=T$Z.ambientColor;T$b.ambientColor=new T$Fb(T$E[0],T$E[1],T$E[2]);var T$r=T$Z.diffuseColor;T$b.diffuseColor=new T$Fb(T$r[0],T$r[1],T$r[2]);var T$F=T$Z.specularColor;T$b.specularColor=new T$xb(T$F[0],T$F[1],T$F[2],T$F[3]);var T$x=T$Z.reflectColor;T$b.reflectColor=new T$Fb(T$x[0],T$x[1],T$x[2]);var T$g=T$Z.albedoColor;T$g&&(T$b.albedo=new T$xb(T$g[0],T$g[1],T$g[2],T$g[3]));var T$H=T$Z.diffuseTexture.texture2D;T$H&&(T$b.diffuseTexture=T$T.getRes(T$$[T$H]));var T$w=T$Z.normalTexture.texture2D;T$w&&(T$b.normalTexture=T$T.getRes(T$$[T$w]));var T$I=T$Z.specularTexture.texture2D;T$I&&(T$b.specularTexture=T$T.getRes(T$$[T$I]));var T$o=T$Z.emissiveTexture.texture2D;T$o&&(T$b.emissiveTexture=T$T.getRes(T$$[T$o]));var T$N=T$Z.ambientTexture.texture2D;T$N&&(T$b.ambientTexture=T$T.getRes(T$$[T$N]));var T$D=T$Z.reflectTexture.texture2D;T$D&&(T$b.reflectTexture=T$T.getRes(T$$[T$D]))},T$g.RENDERMODE_OPAQUE=1,T$g.RENDERMODE_OPAQUEDOUBLEFACE=2,T$g.RENDERMODE_CUTOUT=3,T$g.RENDERMODE_CUTOUTDOUBLEFACE=4,T$g.RENDERMODE_TRANSPARENT=13,T$g.RENDERMODE_TRANSPARENTDOUBLEFACE=14,T$g.RENDERMODE_ADDTIVE=15,T$g.RENDERMODE_ADDTIVEDOUBLEFACE=16,T$g.RENDERMODE_DEPTHREAD_TRANSPARENT=5,T$g.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,T$g.RENDERMODE_DEPTHREAD_ADDTIVE=7,T$g.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,T$g.RENDERMODE_NONDEPTH_TRANSPARENT=9,T$g.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,T$g.RENDERMODE_NONDEPTH_ADDTIVE=11,T$g.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,T$g.SHADERDEFINE_DIFFUSEMAP=0,T$g.SHADERDEFINE_NORMALMAP=0,T$g.SHADERDEFINE_SPECULARMAP=0,T$g.SHADERDEFINE_EMISSIVEMAP=0,T$g.SHADERDEFINE_AMBIENTMAP=0,T$g.SHADERDEFINE_REFLECTMAP=0,T$g.SHADERDEFINE_UVTRANSFORM=0,T$g.SHADERDEFINE_TILINGOFFSET=0,T$g.SHADERDEFINE_ADDTIVEFOG=0,T$g.DIFFUSETEXTURE=1,T$g.NORMALTEXTURE=2,T$g.SPECULARTEXTURE=3,T$g.EMISSIVETEXTURE=4,T$g.AMBIENTTEXTURE=5,T$g.REFLECTTEXTURE=6,T$g.ALBEDO=7,T$g.UVANIAGE=8,T$g.MATERIALAMBIENT=9,T$g.MATERIALDIFFUSE=10,T$g.MATERIALSPECULAR=11,T$g.MATERIALREFLECT=12,T$g.UVMATRIX=13,T$g.UVAGE=14,T$g.TILINGOFFSET=15,T$I(T$g,["defaultMaterial",function(){var T$$=new T$g;return T$$.lock=!0,this.defaultMaterial=T$$},"shaderDefines",function(){return this.shaderDefines=new T$wb(T$Kb.shaderDefines)}]),T$g}(T$Kb),T$Xb=function(T$$){function T$F(T$$,T$b,T$u,T$Z,T$E){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===T$u&&(T$u=35044),void 0===T$Z&&(T$Z=!1),T$F.__super.call(this),this._indexType=T$$,this._indexCount=T$b,this._bufferUsage=T$u,this._bufferType=34963,this._canRead=T$Z;var T$r;if("ushort"==T$$)this._indexTypeByteCount=2;else{if("ubyte"!=T$$)throw new Error("unidentification index type.");this._indexTypeByteCount=1}T$r=this._indexTypeByteCount*T$b,this._byteLength=T$r,this._bind(),T$x._gl.bufferData(this._bufferType,T$r,this._bufferUsage),this.uri=T$E,T$Z?("ushort"==T$$?this._buffer=new Uint16Array(T$b):"ubyte"==T$$&&(this._buffer=new Uint8Array(T$b)),this.memorySize=2*T$r):this.memorySize=T$r}T$N(T$F,"laya.d3.graphics.IndexBuffer3D",T$$);var T$b=T$F.prototype;return T$b.setData=function(T$$,T$b,T$u,T$Z){void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=4294967295);var T$E=0;if("ushort"==this._indexType?(T$E=2,0===T$u&&4294967295===T$Z||(T$$=new Uint16Array(T$$.buffer,T$u*T$E,T$Z))):"ubyte"==this._indexType&&(T$E=1,0===T$u&&4294967295===T$Z||(T$$=new Uint8Array(T$$.buffer,T$u*T$E,T$Z))),this._bind(),T$x._gl.bufferSubData(this._bufferType,T$b*T$E,T$$),this._canRead)if(0!==T$b||0!==T$u||4294967295!==T$Z){var T$r=this._buffer.length-T$b;T$r<T$Z&&(T$Z=T$r);for(var T$F=0;T$F<T$Z;T$F++)this._buffer[T$b+T$F]=T$$[T$F]}else this._buffer=T$$},T$b.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},T$b.disposeResource=function(){T$$.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},T$D(0,T$b,"indexType",function(){return this._indexType}),T$D(0,T$b,"indexTypeByteCount",function(){return this._indexTypeByteCount}),T$D(0,T$b,"indexCount",function(){return this._indexCount}),T$D(0,T$b,"canRead",function(){return this._canRead}),T$F.INDEXTYPE_UBYTE="ubyte",T$F.INDEXTYPE_USHORT="ushort",T$F.create=function(T$$,T$b,T$u,T$Z,T$E){return void 0===T$u&&(T$u=35044),void 0===T$Z&&(T$Z=!1),new T$F(T$$,T$b,T$u,T$Z,T$E)},T$F}(T$x),T$sb=function(T$r){function T$F(T$$,T$b,T$u,T$Z,T$E){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===T$Z&&(T$Z=!1),T$F.__super.call(this),this._vertexDeclaration=T$$,this._vertexCount=T$b,this._bufferUsage=T$u,this._bufferType=34962,this._canRead=T$Z,this.uri=T$E,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*T$b,this._bind(),T$x._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),T$Z&&(this._buffer=new Float32Array(this._byteLength/4))}T$N(T$F,"laya.d3.graphics.VertexBuffer3D",T$r);var T$$=T$F.prototype;return T$$.bindWithIndexBuffer=function(T$$){T$$&&T$$._bind(),this._bind()},T$$.setData=function(T$$,T$b,T$u,T$Z){if(void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=4294967295),0===T$u&&4294967295===T$Z||(T$$=new Float32Array(T$$.buffer,4*T$u,T$Z)),this._bind(),T$x._gl.bufferSubData(this._bufferType,4*T$b,T$$),this._canRead)if(0!==T$b||0!==T$u||4294967295!==T$Z){var T$E=this._buffer.length-T$b;T$E<T$Z&&(T$Z=T$E);for(var T$r=0;T$r<T$Z;T$r++)this._buffer[T$b+T$r]=T$$[T$r]}else this._buffer=T$$},T$$.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},T$$.disposeResource=function(){for(var T$$=T$O.mainContext,T$b=this._vertexDeclaration.getVertexElements(),T$u=T$x._enableAtributes,T$Z=0,T$E=T$b.length;T$Z<T$E;T$Z++)T$u[T$Z]===this._glBuffer&&(T$$.disableVertexAttribArray(T$Z),T$u[T$Z]=null);T$r.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},T$D(0,T$$,"vertexDeclaration",function(){return this._vertexDeclaration}),T$D(0,T$$,"vertexCount",function(){return this._vertexCount}),T$D(0,T$$,"canRead",function(){return this._canRead}),T$F.create=function(T$$,T$b,T$u,T$Z,T$E){return void 0===T$u&&(T$u=35044),void 0===T$Z&&(T$Z=!1),new T$F(T$$,T$b,T$u,T$Z,T$E)},T$F}(T$x),T$mb=function(T$$){function T$y(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,T$y.__super.call(this),this._type=3553}T$N(T$y,"laya.d3.resource.DataTexture2D",T$Ob);var T$b=T$y.prototype;return T$b.genDebugMipmaps=function(){var T$$=[];return T$$.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),T$$.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),T$$.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),T$$.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),T$$.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),T$$.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),T$$.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),T$$.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),T$$.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),T$$.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),T$$},T$b._onTextureLoaded=function(T$$){},T$b._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var T$$=T$O.mainContext,T$b=this._source=T$$.createTexture(),T$u=this._width,T$Z=this._height,T$E=T$V.curBindTexTarget,T$r=T$V.curBindTexValue,T$F=!1;if(T$V.bindTexture(T$$,this._type,T$b),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var T$x=0;T$$.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var T$g=0;T$g<this._mipmaps.length;T$g++){if(this._mipmaps[T$g].byteLength!=T$H*T$w*4)throw"mipmap size error  level:"+T$g;T$$.texSubImage2D(this._type,0,T$y.simLodRect[T$x++],T$y.simLodRect[T$x++],T$y.simLodRect[T$x++],T$y.simLodRect[T$x++],6408,5121,new Uint8Array(this._mipmaps[T$g]))}this.minFifter=9729,this.magFifter=9729}else{var T$H=this._width,T$w=this._height;for(T$x=0,T$$.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),T$g=0;T$g<this._mipmaps.length;T$g++){if(this._mipmaps[T$g].byteLength!=T$H*T$w*4)throw"mipmap size error  level:"+T$g;T$$.texImage2D(this._type,T$g,6408,T$H,T$w,0,6408,5121,new Uint8Array(this._mipmaps[T$g])),(T$H/=2)<1&&(T$H=1),(T$w/=2)<1&&(T$w=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&T$$.pixelStorei(T$$.UNPACK_ALIGNMENT,1),T$$.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var T$I=0,T$o=!1,T$N=!1;this._buffer.byteLength==4*T$u*T$Z?(T$I=6408,T$o=!0):this._buffer.byteLength==3*T$u*T$Z?(T$I=6407,T$N=!0):T$I=this._format,T$o||T$N?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),T$N&&T$$.pixelStorei(T$$.UNPACK_ALIGNMENT,1),T$$.texImage2D(this._type,0,T$I,T$u,T$Z,0,T$I,5121,this._buffer)):T$$&&T$I==T$$.ALPHA?(T$$.texImage2D(3553,0,T$I,T$u,T$Z,0,T$I,T$$.UNSIGNED_BYTE,this._buffer),T$F=!0):0!=T$I&&(T$$.compressedTexImage2D(3553,0,T$I,T$u,T$Z,0,this._buffer),T$F=!0)}var T$D=this._minFifter,T$e=this._magFifter,T$L=0==this._wrapModeU?10497:33071,T$T=0==this._wrapModeV?10497:33071,T$_=T$S.isPOT(T$u,T$Z);T$_?(this._mipmap||this._mipmaps?-1!==T$D||(T$D=9987):-1!==T$D||(T$D=9729),-1!==T$e||(T$e=9729),T$$.texParameteri(this._type,10241,T$D),T$$.texParameteri(this._type,10240,T$e),T$$.texParameteri(this._type,10242,T$L),T$$.texParameteri(this._type,10243,T$T),this._mipmap&&T$$.generateMipmap(this._type)):(-1!==T$D||(T$D=9729),-1!==T$e||(T$e=9729),T$$.texParameteri(this._type,10241,T$D),T$$.texParameteri(this._type,10240,T$e),T$$.texParameteri(this._type,10242,33071),T$$.texParameteri(this._type,10243,33071)),T$E&&T$r&&T$V.bindTexture(T$$,T$E,T$r),this.memorySize=T$F?this._buffer.length:T$_?T$u*T$Z*4*(1+1/3):T$u*T$Z*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},T$b.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},T$b.onAsynLoaded=function(T$$,T$b,T$u){var T$Z;T$u&&(T$Z=T$u[0].call(this,T$b)),T$Z&&(this._width=T$Z.width,this._height=T$Z.height,this._buffer=T$Z.data),this._src=T$$,this._size=new T$eb(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},T$b.getPixels=function(){return new Uint8Array(this._buffer)},T$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(T$O.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},T$D(0,T$b,"src",function(){return this._src}),T$y.create=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){if(void 0===T$Z&&(T$Z=9729),void 0===T$E&&(T$E=9729),void 0===T$r&&(T$r=!0),!T$$||T$$.byteLength<T$b*T$u*4)throw"DataTexture2D create error";var T$x=new T$y;return T$x.uri=T$F,T$x._buffer=T$$,T$x._width=T$b,T$x._height=T$u,T$x._mipmap=T$r,T$x._magFifter=T$Z,T$x._minFifter=T$E,T$x._size=new T$eb(T$x._width,T$x._height),T$x._conchTexture?alert("怎么给runtime传递datatexture数据"):T$x.activeResource(),T$x},T$y.load=function(T$$,T$b,T$u,T$Z,T$E){if(void 0===T$b&&(T$b=0),void 0===T$u&&(T$u=0),void 0===T$Z&&(T$Z=9729),void 0===T$E&&(T$E=9729),"mipmaps"===T$t.getFileExtension(T$$)){var T$r=T$P.loader.create(T$$,null,null,T$y,[function(T$$){this._mipmaps=[];var T$b=new Uint32Array(T$$);this._width=T$b[0];var T$u=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,T$u=1024),this._width!=T$u)throw"现在只支持512x256的环境贴图。当前的是"+T$b[0];this._height=T$b[1];for(var T$Z=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,T$E=this._height,T$r=8;;){var T$F=T$Z*T$E*4;if(T$r+T$F>T$$.byteLength)throw"load mipmaps data size error ";var T$x=new Uint8Array(T$$,T$r,T$F);if(this._mipmaps.push(T$x),T$r+=T$F,1==T$Z&&1==T$E)break;(T$Z/=2)<1&&(T$Z=1),(T$E/=2)<1&&(T$E=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){T$r.simLodInfo=new Float32Array(40);for(var T$F=0;T$F<T$r.simLodInfo.length;)T$r.simLodInfo[T$F]=(T$y.simLodRect[T$F]+.5)/1024,T$F++,T$r.simLodInfo[T$F]=(T$y.simLodRect[T$F]+.5)/256,T$F++,T$r.simLodInfo[T$F]=Math.max(T$y.simLodRect[T$F]-1,.1)/1024,T$F++,T$r.simLodInfo[T$F]=Math.max(T$y.simLodRect[T$F]-1.5,.1)/256,T$F++}return T$r}if("number"==typeof T$b)return T$P.loader.create(T$$,null,null,T$y,[function(T$$){return this._width=T$b,this._height=T$u,this._buffer=T$$,null}]);if("function"==typeof T$b)return T$P.loader.create(T$$,null,null,T$y,[T$b]);throw new Error("unknown params.")},T$y.lodasatlas=!1,T$I(T$y,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),T$y}(),T$nb=function(T$$){function T$b(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,T$b.__super.call(this)}T$N(T$b,"laya.d3.resource.models.PrimitiveMesh",T$Vb);var T$u=T$b.prototype;return T$P.imps(T$u,{"laya.d3.core.render.IRenderable":!0}),T$u._getVertexBuffer=function(T$$){return void 0===T$$&&(T$$=0),0===T$$?this._vertexBuffer:null},T$u._getVertexBuffers=function(){return null},T$u._getIndexBuffer=function(){return this._indexBuffer},T$u._getPositions=function(){var T$$,T$b=[],T$u=this._vertexBuffer.vertexDeclaration.getVertexElements(),T$Z=0;for(T$Z=0;T$Z<T$u.length;T$Z++){var T$E=T$u[T$Z];if("vector3"===T$E.elementFormat&&0===T$E.elementUsage){T$$=T$E;break}}var T$r=this._vertexBuffer.getData();for(T$Z=0;T$Z<T$r.length;T$Z+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var T$F=T$Z+T$$.offset/4,T$x=new T$Fb(T$r[T$F+0],T$r[T$F+1],T$r[T$F+2]);T$b.push(T$x)}return T$b},T$u.getRenderElement=function(T$$){return this},T$u.getRenderElementsCount=function(){return 1},T$u.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},T$u._beforeRender=function(T$$){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},T$u._render=function(T$$){T$O.mainContext.drawElements(4,this._numberIndices,5123,0),T$q.drawCall++,T$q.trianglesFaces+=this._numberIndices/3},T$D(0,T$u,"_vertexBufferCount",function(){return 1}),T$D(0,T$u,"triangleCount",function(){return this._indexBuffer.indexCount/3}),T$b}(),T$cb=function(T$$){function T$b(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,T$b.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}T$N(T$b,"laya.d3.resource.models.Mesh",T$Vb);var T$u=T$b.prototype;return T$u._getPositions=function(){var T$$,T$b,T$u,T$Z,T$E,T$r=[],T$F=0,T$x=0,T$g=0;if(0!==this._vertexBuffers.length){var T$H=this._vertexBuffers.length;for(T$F=0;T$F<T$H;T$F++){for(T$u=(T$$=this._vertexBuffers[T$F]).vertexDeclaration.getVertexElements(),T$x=0;T$x<T$u.length;T$x++)if("vector3"===(T$Z=T$u[T$x]).elementFormat&&0===T$Z.elementUsage){T$b=T$Z;break}for(T$E=T$$.getData(),T$x=0;T$x<T$E.length;T$x+=T$$.vertexDeclaration.vertexStride/4)T$g=T$x+T$b.offset/4,T$r.push(new T$Fb(T$E[T$g+0],T$E[T$g+1],T$E[T$g+2]))}}else{var T$w=this._subMeshes.length;for(T$F=0;T$F<T$w;T$F++){for(T$u=(T$$=this._subMeshes[T$F]._getVertexBuffer()).vertexDeclaration.getVertexElements(),T$x=0;T$x<T$u.length;T$x++)if("vector3"===(T$Z=T$u[T$x]).elementFormat&&0===T$Z.elementUsage){T$b=T$Z;break}for(T$E=T$$.getData(),T$x=0;T$x<T$E.length;T$x+=T$$.vertexDeclaration.vertexStride/4)T$g=T$x+T$b.offset/4,T$r.push(new T$Fb(T$E[T$g+0],T$E[T$g+1],T$E[T$g+2]))}}return T$r},T$u._setSubMeshes=function(T$$){this._subMeshes=T$$,this._subMeshCount=T$$.length;for(var T$b=0;T$b<this._subMeshCount;T$b++)T$$[T$b]._indexInMesh=T$b;this._positions=this._getPositions(),this._generateBoundingObject()},T$u.onAsynLoaded=function(T$$,T$b,T$u){var T$Z=T$b[0],T$E=T$b[1];T$j$.read(T$Z,this,this._materials,this._subMeshes,T$E),this.completeCreate(),this._endLoaded()},T$u.getSubMesh=function(T$$){return this._subMeshes[T$$]},T$u.getSubMeshCount=function(){return this._subMeshes.length},T$u.getRenderElementsCount=function(){return this._subMeshes.length},T$u.getRenderElement=function(T$$){return this._subMeshes[T$$]},T$u.disposeResource=function(){for(var T$$=0;T$$<this._subMeshes.length;T$$++)this._subMeshes[T$$].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},T$D(0,T$u,"materials",function(){return this._materials.slice()}),T$D(0,T$u,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),T$b.load=function(T$$){return T$P.loader.create(T$$,null,null,T$b)},T$b}(),T$Jb=(function(T$$){function T$H(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===T$u&&(T$u=6408),void 0===T$Z&&(T$Z=5121),void 0===T$E&&(T$E=33189),void 0===T$r&&(T$r=!1),void 0===T$F&&(T$F=!1),void 0===T$x&&(T$x=-1),void 0===T$g&&(T$g=-1),T$H.__super.call(this),this._type=3553,this._width=T$$,this._height=T$b,this._size=new T$eb(T$$,T$b),this._surfaceFormat=T$u,this._surfaceType=T$Z,this._depthStencilFormat=T$E,T$e.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=T$r,this._repeat=T$F,this._minFifter=T$x,this._magFifter=T$g,this.activeResource(),this._alreadyResolved=!0}T$N(T$H,"laya.d3.resource.RenderTexture",T$Ob);var T$b=T$H.prototype;T$b.recreateResource=function(){var T$$=T$O.mainContext;this._frameBuffer=T$$.createFramebuffer(),this._source=T$$.createTexture();var T$b=T$V.curBindTexTarget,T$u=T$V.curBindTexValue;T$V.bindTexture(T$$,this._type,this._source),T$$.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var T$Z=this._minFifter,T$E=this._magFifter,T$r=this._repeat?10497:33071;if(T$S.isPOT(this._width,this._height)?(this._mipmap?-1!==T$Z||(T$Z=9987):-1!==T$Z||(T$Z=9729),-1!==T$E||(T$E=9729),T$$.texParameteri(this._type,10241,T$Z),T$$.texParameteri(this._type,10240,T$E),T$$.texParameteri(this._type,10242,T$r),T$$.texParameteri(this._type,10243,T$r),this._mipmap&&T$$.generateMipmap(this._type)):(-1!==T$Z||(T$Z=9729),-1!==T$E||(T$E=9729),T$$.texParameteri(this._type,10241,T$Z),T$$.texParameteri(this._type,10240,T$E),T$$.texParameteri(this._type,10242,33071),T$$.texParameteri(this._type,10243,33071)),T$b&&T$u&&T$V.bindTexture(T$$,T$b,T$u),T$$.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=T$$.createRenderbuffer(),T$$.bindRenderbuffer(36161,this._depthStencilBuffer),T$$.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),T$$.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:T$$.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:T$$.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:T$$.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}T$$.framebufferTexture2D(36160,36064,3553,this._source,0),T$$.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},T$b.start=function(){T$O.mainContext.bindFramebuffer(36160,this.frameBuffer),(T$H._currentRenderTarget=this)._alreadyResolved=!1},T$b.end=function(){T$O.mainContext.bindFramebuffer(36160,null),T$H._currentRenderTarget=null,this._alreadyResolved=!0},T$b.getData=function(T$$,T$b,T$u,T$Z){var T$E=T$O.mainContext;if(T$E.bindFramebuffer(36160,this._frameBuffer),!(36053===T$E.checkFramebufferStatus(36160)))return T$E.bindFramebuffer(36160,null),null;var T$r=new Uint8Array(this._width*this._height*4);return T$E.readPixels(T$$,T$b,T$u,T$Z,this._surfaceFormat,this._surfaceType,T$r),T$E.bindFramebuffer(36160,null),T$r},T$b.disposeResource=function(){if(this._frameBuffer){var T$$=T$O.mainContext;T$$.deleteTexture(this._source),T$$.deleteFramebuffer(this._frameBuffer),T$$.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},T$D(0,T$b,"surfaceFormat",function(){return this._surfaceFormat}),T$D(0,T$b,"surfaceType",function(){return this._surfaceType}),T$D(0,T$b,"depthStencilFormat",function(){return this._depthStencilFormat}),T$D(0,T$b,"source",function(){return this._alreadyResolved?T$P.superGet(T$Ob,this,"source"):null}),T$D(0,T$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),T$D(0,T$b,"frameBuffer",function(){return this._frameBuffer}),T$H._currentRenderTarget=null}(),function(T$$){function T$b(T$$){this._color=null,this._pixels=null,T$b.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new T$eb(this.width,this.height),this._color=T$$,this._pixels=new Uint8Array([255*T$$.x,255*T$$.y,255*T$$.z,255*T$$.w]),this.uri="SolidColorTexture2D_"+this.id}T$N(T$b,"laya.d3.resource.SolidColorTexture2D",T$Ob);var T$u=T$b.prototype;return T$u._createWebGlTexture=function(){var T$$=T$O.mainContext,T$b=this._source=T$$.createTexture(),T$u=this._width,T$Z=this._height,T$E=T$V.curBindTexTarget,T$r=T$V.curBindTexValue;T$V.bindTexture(T$$,this._type,T$b),T$$.texImage2D(this._type,0,6408,T$u,T$Z,0,6408,5121,this._pixels);var T$F=this._minFifter,T$x=this._magFifter,T$g=this._repeat?10497:33071,T$H=T$S.isPOT(T$u,T$Z);T$H?(this._mipmap?-1!==T$F||(T$F=9987):-1!==T$F||(T$F=9729),-1!==T$x||(T$x=9729),T$$.texParameteri(this._type,10241,T$F),T$$.texParameteri(this._type,10240,T$x),T$$.texParameteri(this._type,10242,T$g),T$$.texParameteri(this._type,10243,T$g),this._mipmap&&T$$.generateMipmap(this._type)):(-1!==T$F||(T$F=9729),-1!==T$x||(T$x=9729),T$$.texParameteri(this._type,10241,T$F),T$$.texParameteri(this._type,10240,T$x),T$$.texParameteri(this._type,10242,33071),T$$.texParameteri(this._type,10243,33071)),T$E&&T$r&&T$V.bindTexture(T$$,T$E,T$r),this.memorySize=T$H?T$u*T$Z*4*(1+1/3):T$u*T$Z*4},T$u.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},T$u.disposeResource=function(){this._source&&(T$O.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},T$I(T$b,["magentaTexture",function(){var T$$=new T$b(new T$xb(1,0,1,1));return T$$.lock=!0,this.magentaTexture=T$$},"grayTexture",function(){var T$$=new T$b(new T$xb(.5,.5,.5,1));return T$$.lock=!0,this.grayTexture=T$$}]),T$b}()),T$fb=function(T$$){function T$E(T$$,T$b,T$u,T$Z){this._canRead=!1,this._image=null,this._pixels=null,void 0===T$$&&(T$$=!1),void 0===T$b&&(T$b=!0),void 0===T$u&&(T$u=6408),void 0===T$Z&&(T$Z=!0),T$E.__super.call(this),this._type=3553,this._repeat=T$b,this._canRead=T$$,this._format=T$u,this._mipmap=T$Z}T$N(T$E,"laya.d3.resource.Texture2D",T$Ob);var T$b=T$E.prototype;return T$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var T$$=T$O.mainContext,T$b=this._source=T$$.createTexture(),T$u=this._width,T$Z=this._height,T$E=T$V.curBindTexTarget,T$r=T$V.curBindTexValue;switch(T$V.bindTexture(T$$,this._type,T$b),this._format){case 6407:case 6408:this._canRead?T$$.texImage2D(this._type,0,this._format,T$u,T$Z,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?T$$.texImage2D(this._type,0,this._image._format,T$u,T$Z,0,this._image._format,5121,this._image.atlasSource):T$$.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case T$O.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:T$$.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var T$F=this._minFifter,T$x=this._magFifter,T$g=this._repeat?10497:33071,T$H=0==this._wrapModeU?10497:33071,T$w=0==this._wrapModeV?10497:33071,T$I=T$S.isPOT(T$u,T$Z);T$I?(this._mipmap?-1!==T$F||(T$F=9987):-1!==T$F||(T$F=9729),-1!==T$x||(T$x=9729),T$$.texParameteri(this._type,10241,T$F),T$$.texParameteri(this._type,10240,T$x),T$$.texParameteri(this._type,10242,T$g),T$$.texParameteri(this._type,10243,T$g),T$$.texParameteri(this._type,10242,T$H),T$$.texParameteri(this._type,10243,T$w),this._mipmap&&T$$.generateMipmap(this._type)):(-1!==T$F||(T$F=9729),-1!==T$x||(T$x=9729),T$$.texParameteri(this._type,10241,T$F),T$$.texParameteri(this._type,10240,T$x),T$$.texParameteri(this._type,10242,33071),T$$.texParameteri(this._type,10243,33071)),T$E&&T$r&&T$V.bindTexture(T$$,T$E,T$r),this._image.onload=null,this._image=null,this.memorySize=T$I?T$u*T$Z*4*(1+1/3):T$u*T$Z*4},T$b.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},T$b.onAsynLoaded=function(T$$,T$b,T$u){if(T$u){var T$Z=T$u[0];void 0!==T$Z&&(this._canRead=T$Z);var T$E=T$u[1];void 0!==T$E&&(this._repeat=T$E);var T$r=T$u[2];void 0!==T$r&&(this._format=T$r);var T$F=T$u[3];void 0!==T$F&&(this._mipmap=T$F);var T$x=T$u.wrapModeU;void 0!==T$x&&(this._wrapModeU=T$x);var T$g=T$u.wrapModeV;void 0!==T$g&&(this._wrapModeV=T$g)}switch(this._format){case 6407:case 6408:var T$H=(this._image=T$b).width,T$w=T$b.height;this._width=T$H,this._height=T$w,this._size=new T$eb(T$H,T$w),this._canRead&&(T$e.isConchApp?T$b instanceof T$o.HTMLElement&&(this._pixels=new Uint8Array(T$b.getImageData(0,0,T$H,T$w))):(T$v.canvas.size(T$H,T$w),T$v.canvas.clear(),T$v.context.drawImage(T$b,0,0,T$H,T$w),this._pixels=new Uint8Array(T$v.context.getImageData(0,0,T$H,T$w).data.buffer)));break;case T$O.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var T$I=new T$i(T$b);T$I.readUTFBytes(4),T$I.readUTFBytes(2),T$I.getInt16();T$I.endian="bigEndian",this._width=T$I.getInt16(),this._height=T$I.getInt16(),this._size=new T$eb(this._width,this._height);T$I.getInt16(),T$I.getInt16();this._image=new Uint8Array(T$b,T$I.pos)}this.recreateResource(),this._endLoaded()},T$b.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},T$b.disposeResource=function(){this._source&&(T$O.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},T$D(0,T$b,"_src",function(){return this.url}),T$D(0,T$b,"src",function(){return this.url}),T$E.load=function(T$$){return T$P.loader.create(T$$,null,null,T$E)},T$E}(),T$Qb=function(T$b){function T$u(T$$,T$b){T$u.__super.call(this),void 0===T$$&&(T$$=.3),void 0===T$b&&(T$b=1e3),this._tempVector3=new T$Fb,this._position=new T$Fb,this._up=new T$Fb,this._forward=new T$Fb,this._right=new T$Fb,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=T$eb.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=T$$,this._farPlane=T$b,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),T$P.stage.on("resize",this,this._onScreenSizeChanged)}T$N(T$u,"laya.d3.core.BaseCamera",T$b);var T$$=T$u.prototype;return T$$._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var T$$=this.scene._cameraPool,T$b=T$$.length-1,T$u=0;T$u<T$b;T$u++)if(T$$[T$u].renderingOrder>T$$[T$b].renderingOrder){var T$Z=T$$[T$u];T$$[T$u]=T$$[T$b],T$$[T$b]=T$Z}},T$$._calculateProjectionMatrix=function(){},T$$._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},T$$._prepareCameraToRender=function(){T$p._currentCameraCullingMask=this.cullingMask;var T$$=this._shaderValues;T$$.setValue(0,this.transform.position.elements),T$$.setValue(5,this.forward.elements),T$$.setValue(6,this.up.elements)},T$$._prepareCameraViewProject=function(T$$,T$b){var T$u=this._shaderValues;T$u.setValue(1,T$$.elements),T$u.setValue(2,T$b.elements)},T$$._renderCamera=function(T$$,T$b,T$u){},T$$.addLayer=function(T$$){29!==T$$.number&&30!=T$$.number&&(this.cullingMask=this.cullingMask|T$$.mask)},T$$.removeLayer=function(T$$){29!==T$$.number&&30!=T$$.number&&(this.cullingMask=this.cullingMask&~T$$.mask)},T$$.addAllLayers=function(){this.cullingMask=2147483647},T$$.removeAllLayers=function(){this.cullingMask=0|T$p.getLayerByNumber(29).mask|T$p.getLayerByNumber(30).mask},T$$.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},T$$.moveForward=function(T$$){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=T$$,this.transform.translate(this._tempVector3)},T$$.moveRight=function(T$$){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=T$$,this.transform.translate(this._tempVector3)},T$$.moveVertical=function(T$$){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=T$$,this.transform.translate(this._tempVector3,!1)},T$$._addSelfRenderObjects=function(){var T$$=this.scene._cameraPool,T$b=T$$.length;if(0<T$b){for(var T$u=T$b-1;0<=T$u;T$u--)if(this.renderingOrder<=T$$[T$u].renderingOrder){T$$.splice(T$u+1,0,this);break}}else T$$.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},T$$._clearSelfRenderObjects=function(){var T$$=this.scene._cameraPool;T$$.splice(T$$.indexOf(this),1)},T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,T$P.stage.off("resize",this,this._onScreenSizeChanged),T$b.prototype.destroy.call(this,T$$)},T$D(0,T$$,"sky",function(){return this._sky},function(T$$){(this._sky=T$$)._ownerCamera=this}),T$D(0,T$$,"forward",function(){var T$$=this.transform.worldMatrix.elements,T$b=this._forward.elements;return T$b[0]=-T$$[8],T$b[1]=-T$$[9],T$b[2]=-T$$[10],this._forward}),T$D(0,T$$,"position",function(){var T$$=this.transform.worldMatrix.elements,T$b=this._position.elements;return T$b[0]=T$$[12],T$b[1]=T$$[13],T$b[2]=T$$[14],this._position}),T$D(0,T$$,"renderTarget",function(){return this._renderTarget},function(T$$){null!=(this._renderTarget=T$$)&&(this._renderTargetSize=T$$.size)}),T$D(0,T$$,"up",function(){var T$$=this.transform.worldMatrix.elements,T$b=this._up.elements;return T$b[0]=T$$[4],T$b[1]=T$$[5],T$b[2]=T$$[6],this._up}),T$D(0,T$$,"right",function(){var T$$=this.transform.worldMatrix.elements,T$b=this._right.elements;return T$b[0]=T$$[0],T$b[1]=T$$[1],T$b[2]=T$$[2],this._right}),T$D(0,T$$,"renderTargetSize",function(){return this._renderTargetSize},function(T$$){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=T$$,this._calculateProjectionMatrix()}),T$D(0,T$$,"fieldOfView",function(){return this._fieldOfView},function(T$$){this._fieldOfView=T$$,this._calculateProjectionMatrix()}),T$D(0,T$$,"nearPlane",function(){return this._nearPlane},function(T$$){this._nearPlane=T$$,this._calculateProjectionMatrix()}),T$D(0,T$$,"farPlane",function(){return this._farPlane},function(T$$){this._farPlane=T$$,this._calculateProjectionMatrix()}),T$D(0,T$$,"orthographic",function(){return this._orthographic},function(T$$){this._orthographic=T$$,this._calculateProjectionMatrix()}),T$D(0,T$$,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(T$$){this._orthographicVerticalSize=T$$,this._calculateProjectionMatrix()}),T$D(0,T$$,"renderingOrder",function(){return this._renderingOrder},function(T$$){this._renderingOrder=T$$,this._sortCamerasByRenderingOrder()}),T$u.CAMERAPOS=0,T$u.VIEWMATRIX=1,T$u.PROJECTMATRIX=2,T$u.VPMATRIX=3,T$u.VPMATRIX_NO_TRANSLATE=4,T$u.CAMERADIRECTION=5,T$u.CAMERAUP=6,T$u.ENVIRONMENTDIFFUSE=7,T$u.ENVIRONMENTSPECULAR=8,T$u.SIMLODINFO=9,T$u.DIFFUSEIRRADMATR=10,T$u.DIFFUSEIRRADMATG=11,T$u.DIFFUSEIRRADMATB=12,T$u.HDREXPOSURE=13,T$u.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",T$u.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",T$u.CLEARFLAG_SOLIDCOLOR=0,T$u.CLEARFLAG_SKY=1,T$u.CLEARFLAG_DEPTHONLY=2,T$u.CLEARFLAG_NONE=3,T$I(T$u,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new T$$b(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new T$$b},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new T$$b}]),T$u}(T$kb),T$Wb=function(T$u){function T$b(T$$){this._render=null,this._geometryFilter=null,T$b.__super.call(this,T$$)}T$N(T$b,"laya.d3.core.RenderableSprite3D",T$u);var T$$=T$b.prototype;return T$$._addToInitStaticBatchManager=function(){},T$$._setBelongScene=function(T$$){T$u.prototype._setBelongScene.call(this,T$$),T$$._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},T$$._setUnBelongScene=function(){var T$$=this._scene._renderableSprite3Ds,T$b=T$$.indexOf(this);T$$.splice(T$b,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),T$u.prototype._setUnBelongScene.call(this)},T$$._update=function(T$$){(T$$.owner=this)._activeInHierarchy&&(this._updateComponents(T$$),this._render._updateOctreeNode(),this._lateUpdateComponents(T$$),T$q.spriteCount++,this._childs.length&&this._updateChilds(T$$))},T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$u.prototype.destroy.call(this,T$$),this._render._destroy(),this._render=null},T$b.__init__=function(){T$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=T$b.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),T$b.SAHDERDEFINE_LIGHTMAP=T$b.shaderDefines.registerDefine("LIGHTMAP")},T$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,T$b.SAHDERDEFINE_LIGHTMAP=4,T$b.LIGHTMAPSCALEOFFSET=2,T$b.LIGHTMAP=3,T$I(T$b,["shaderDefines",function(){return this.shaderDefines=new T$wb}]),T$b}(T$kb),T$Gb=(function(T$$){function T$Z(T$$,T$b,T$u){this._long=NaN,this._width=NaN,this._height=NaN,void 0===T$$&&(T$$=1),void 0===T$b&&(T$b=1),void 0===T$u&&(T$u=1),T$Z.__super.call(this),this._long=T$$,this._width=T$b,this._height=T$u,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}T$N(T$Z,"laya.d3.resource.models.BoxMesh",T$nb);var T$b=T$Z.prototype;T$b.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var T$$=T$O$.vertexDeclaration,T$b=(T$$.vertexStride,this._long/2),T$u=this._height/2,T$Z=this._width/2,T$E=new Float32Array([-T$b,T$u,-T$Z,0,1,0,0,0,T$b,T$u,-T$Z,0,1,0,1,0,T$b,T$u,T$Z,0,1,0,1,1,-T$b,T$u,T$Z,0,1,0,0,1,-T$b,-T$u,-T$Z,0,-1,0,0,1,T$b,-T$u,-T$Z,0,-1,0,1,1,T$b,-T$u,T$Z,0,-1,0,1,0,-T$b,-T$u,T$Z,0,-1,0,0,0,-T$b,T$u,-T$Z,-1,0,0,0,0,-T$b,T$u,T$Z,-1,0,0,1,0,-T$b,-T$u,T$Z,-1,0,0,1,1,-T$b,-T$u,-T$Z,-1,0,0,0,1,T$b,T$u,-T$Z,1,0,0,1,0,T$b,T$u,T$Z,1,0,0,0,0,T$b,-T$u,T$Z,1,0,0,0,1,T$b,-T$u,-T$Z,1,0,0,1,1,-T$b,T$u,T$Z,0,0,1,0,0,T$b,T$u,T$Z,0,0,1,1,0,T$b,-T$u,T$Z,0,0,1,1,1,-T$b,-T$u,T$Z,0,0,1,0,1,-T$b,T$u,-T$Z,0,0,-1,1,0,T$b,T$u,-T$Z,0,0,-1,0,0,T$b,-T$u,-T$Z,0,0,-1,0,1,-T$b,-T$u,-T$Z,0,0,-1,1,1]),T$r=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new T$sb(T$$,this._numberVertices,35044,!0),this._indexBuffer=new T$Xb("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(T$E),this._indexBuffer.setData(T$r),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},T$D(0,T$b,"long",function(){return this._long},function(T$$){this._long!==T$$&&(this._long=T$$,this.releaseResource(),this.activeResource())}),T$D(0,T$b,"width",function(){return this._width},function(T$$){this._width!==T$$&&(this._width=T$$,this.releaseResource(),this.activeResource())}),T$D(0,T$b,"height",function(){return this._height},function(T$$){this._height!==T$$&&(this._height=T$$,this.releaseResource(),this.activeResource())})}(),function(T$$){function T$E(T$$,T$b,T$u,T$Z){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===T$$&&(T$$=10),void 0===T$b&&(T$b=10),void 0===T$u&&(T$u=10),void 0===T$Z&&(T$Z=10),T$E.__super.call(this),this._long=T$$,this._width=T$b,this._stacks=T$u,this._slices=T$Z,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}T$N(T$E,"laya.d3.resource.models.PlaneMesh",T$nb);var T$b=T$E.prototype;T$b.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var T$$=new Uint16Array(this._numberIndices),T$b=T$O$.vertexDeclaration,T$u=T$b.vertexStride/4,T$Z=new Float32Array(this._numberVertices*T$u),T$E=this._long/2,T$r=this._width/2,T$F=this._long/this._stacks,T$x=this._width/this._slices,T$g=0,T$H=0;T$H<=this._slices;T$H++)for(var T$w=0;T$w<=this._stacks;T$w++)T$Z[T$g++]=T$w*T$F-T$E,T$Z[T$g++]=0,T$Z[T$g++]=T$H*T$x-T$r,T$Z[T$g++]=0,T$Z[T$g++]=1,T$Z[T$g++]=0,T$Z[T$g++]=1*T$w/this._stacks,T$Z[T$g++]=1*T$H/this._slices;var T$I=0;for(T$H=0;T$H<this._slices;T$H++)for(T$w=0;T$w<this._stacks;T$w++)T$$[T$I++]=(T$H+1)*(this._stacks+1)+T$w,T$$[T$I++]=T$H*(this._stacks+1)+T$w,T$$[T$I++]=(T$H+1)*(this._stacks+1)+T$w+1,T$$[T$I++]=T$H*(this._stacks+1)+T$w,T$$[T$I++]=T$H*(this._stacks+1)+T$w+1,T$$[T$I++]=(T$H+1)*(this._stacks+1)+T$w+1;this._vertexBuffer=new T$sb(T$b,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new T$Xb("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(T$Z),this._indexBuffer.setData(T$$),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},T$D(0,T$b,"long",function(){return this._long},function(T$$){this._long!==T$$&&(this._long=T$$,this.releaseResource(),this.activeResource())}),T$D(0,T$b,"width",function(){return this._width},function(T$$){this._width!==T$$&&(this._width=T$$,this.releaseResource(),this.activeResource())}),T$D(0,T$b,"stacks",function(){return this._stacks},function(T$$){this._stacks!==T$$&&(this._stacks=T$$,this.releaseResource(),this.activeResource())}),T$D(0,T$b,"slices",function(){return this._slices},function(T$$){this._slices!==T$$&&(this._slices=T$$,this.releaseResource(),this.activeResource())})}(),function(T$$){function T$F(T$$,T$b,T$u){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=.3),void 0===T$u&&(T$u=1e3),this._viewMatrix=new T$$b,this._projectionMatrix=new T$$b,this._projectionViewMatrix=new T$$b,this._viewport=new T$gb(0,0,0,0),this._normalizedViewport=new T$gb(0,0,1,1),this._aspectRatio=T$$,this._boundFrustumUpdate=!0,this._boundFrustum=new T$d$(T$$b.DEFAULT),T$F.__super.call(this,T$b,T$u),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}T$N(T$F,"laya.d3.core.Camera",T$Qb);var T$b=T$F.prototype;return T$b._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},T$b._parseCustomProps=function(T$$,T$b,T$u,T$Z){var T$E=T$u.clearColor;this.clearColor=new T$xb(T$E[0],T$E[1],T$E[2],T$E[3]);var T$r=T$u.viewport;this.normalizedViewport=new T$gb(T$r[0],T$r[1],T$r[2],T$r[3])},T$b._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var T$$=this.orthographicVerticalSize*this.aspectRatio*.5,T$b=.5*this.orthographicVerticalSize;T$$b.createOrthoOffCenterRH(-T$$,T$$,-T$b,T$b,this.nearPlane,this.farPlane,this._projectionMatrix)}else T$$b.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},T$b._update=function(T$$){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,T$$)},T$b._renderCamera=function(T$$,T$b,T$u){var T$Z,T$E;T$u.parallelSplitShadowMaps[0]&&T$u._renderShadowMap(T$$,T$b,this),(T$b.camera=this)._prepareCameraToRender(),T$u._preRenderUpdateComponents(T$b),T$Z=T$b._viewMatrix=this.viewMatrix;var T$r=this._renderTarget;T$r?(T$r.start(),T$$b.multiply(T$Qb._invertYScaleMatrix,this._projectionMatrix,T$Qb._invertYProjectionMatrix),T$$b.multiply(T$Qb._invertYScaleMatrix,this.projectionViewMatrix,T$Qb._invertYProjectionViewMatrix),T$E=T$b._projectionMatrix=T$Qb._invertYProjectionMatrix,T$b._projectionViewMatrix=T$Qb._invertYProjectionViewMatrix):(T$E=T$b._projectionMatrix=this._projectionMatrix,T$b._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(T$Z,T$E),T$b._viewport=this.viewport,T$u._preRenderScene(T$$,T$b,this.boundFrustum),T$u._clear(T$$,T$b),T$u._renderScene(T$$,T$b),T$u._postRenderUpdateComponents(T$b),T$r&&T$r.end()},T$b.viewportPointToRay=function(T$$,T$b){T$Db.calculateCursorRay(T$$,this.viewport,this._projectionMatrix,this.viewMatrix,null,T$b)},T$b.normalizedViewportPointToRay=function(T$$,T$b){var T$u=T$F._tempVector20,T$Z=this.viewport,T$E=T$$.elements,T$r=T$u.elements;T$r[0]=T$E[0]*T$Z.width,T$r[1]=T$E[1]*T$Z.height,T$Db.calculateCursorRay(T$u,this.viewport,this._projectionMatrix,this.viewMatrix,null,T$b)},T$b.worldToViewportPoint=function(T$$,T$b){T$$b.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(T$$,this._projectionViewMatrix,T$b);var T$u=T$b.elements;T$u[0]=T$u[0]/T$P.stage.clientScaleX,T$u[1]=T$u[1]/T$P.stage.clientScaleY},T$b.worldToNormalizedViewportPoint=function(T$$,T$b){T$$b.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(T$$,this._projectionViewMatrix,T$b);var T$u=T$b.elements;T$u[0]=T$u[0]/T$P.stage.clientScaleX,T$u[1]=T$u[1]/T$P.stage.clientScaleY},T$b.convertScreenCoordToOrthographicCoord=function(T$$,T$b){if(this._orthographic){var T$u=T$j.clientWidth,T$Z=T$j.clientHeight,T$E=this.orthographicVerticalSize*this.aspectRatio/T$u,T$r=this.orthographicVerticalSize/T$Z,T$F=T$$.elements,T$x=T$b.elements;return T$x[0]=(-T$u/2+T$F[0])*T$E,T$x[1]=(T$Z/2-T$F[1])*T$r,T$x[2]=(this.nearPlane-this.farPlane)*(T$F[2]+1)/2-this.nearPlane,T$Fb.transformCoordinate(T$b,this.transform.worldMatrix,T$b),!0}return!1},T$D(0,T$b,"projectionViewMatrix",function(){return T$$b.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),T$D(0,T$b,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var T$$=this.viewport;return T$$.width/T$$.height},function(T$$){if(T$$<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=T$$,this._calculateProjectionMatrix()}),T$D(0,T$b,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),T$D(0,T$b,"needViewport",function(){var T$$=this.normalizedViewport;return 0===T$$.x&&0===T$$.y&&1===T$$.width&&1===T$$.height}),T$D(0,T$b,"viewport",function(){if(this._viewportExpressedInClipSpace){var T$$=this._normalizedViewport,T$b=this.renderTargetSize,T$u=T$b.width,T$Z=T$b.height;this._viewport.x=T$$.x*T$u,this._viewport.y=T$$.y*T$Z,this._viewport.width=T$$.width*T$u,this._viewport.height=T$$.height*T$Z}return this._viewport},function(T$$){if(null!=this.renderTarget&&(T$$.x<0||T$$.y<0||0==T$$.width||0==T$$.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=T$$,this._calculateProjectionMatrix()}),T$D(0,T$b,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var T$$=this._viewport,T$b=this.renderTargetSize,T$u=T$b.width,T$Z=T$b.height;this._normalizedViewport.x=T$$.x/T$u,this._normalizedViewport.y=T$$.y/T$Z,this._normalizedViewport.width=T$$.width/T$u,this._normalizedViewport.height=T$$.height/T$Z}return this._normalizedViewport},function(T$$){T$$.x<0&&(T$$.x=0,console.warn("Camera: viewport.x must large than 0.0.")),T$$.y<0&&(T$$.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<T$$.x+T$$.width&&(T$$.width=1-T$$.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<T$$.y+T$$.height&&(T$$.height=1-T$$.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=T$$,this._calculateProjectionMatrix()}),T$D(0,T$b,"projectionMatrix",function(){return this._projectionMatrix},function(T$$){this._projectionMatrix=T$$,this._useUserProjectionMatrix=!0}),T$D(0,T$b,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),T$I(T$F,["_tempVector20",function(){return this._tempVector20=new T$rb}]),T$F}()),T$Ab=function(T$u){function T$Z(T$$,T$b){T$Z.__super.call(this,T$b),this._geometryFilter=new T$vb(this),this._render=new T$pb(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),T$$&&(this._geometryFilter.sharedMesh=T$$)instanceof laya.d3.resource.models.Mesh&&(T$$.loaded?this._render.sharedMaterials=T$$.materials:T$$.once("loaded",this,this._applyMeshMaterials))}T$N(T$Z,"laya.d3.core.MeshSprite3D",T$u);var T$$=T$Z.prototype;return T$$._changeRenderObjectByMesh=function(T$$){var T$b=this._render._renderElements,T$u=T$b[T$$];T$u||(T$u=T$b[T$$]=new T$zb),T$u._render=this._render;var T$Z=this._render.sharedMaterials[T$$];T$Z||(T$Z=T$lb.defaultMaterial);var T$E=this._geometryFilter.sharedMesh.getRenderElement(T$$);return T$u._mainSortID=this._getSortID(T$E,T$Z),T$u._sprite3D=this,T$u.renderObj=T$E,T$u._material=T$Z,T$u},T$$._changeRenderObjectByMaterial=function(T$$,T$b){var T$u=this._render._renderElements[T$$];T$b||(T$b=T$lb.defaultMaterial);var T$Z=this._geometryFilter.sharedMesh.getRenderElement(T$$);return T$u._mainSortID=this._getSortID(T$Z,T$b),T$u._sprite3D=this,T$u.renderObj=T$Z,T$u._material=T$b,T$u},T$$._changeRenderObjectsByMesh=function(){var T$$=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=T$$;for(var T$b=0;T$b<T$$;T$b++)this._changeRenderObjectByMesh(T$b)},T$$._onMeshChanged=function(T$$){var T$b=T$$.sharedMesh;T$b.loaded?this._changeRenderObjectsByMesh():T$b.once("loaded",this,this._onMeshLoaded)},T$$._onMeshLoaded=function(T$$){T$$===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},T$$._onMaterialChanged=function(T$$,T$b,T$u){T$b<this._render._renderElements.length&&this._changeRenderObjectByMaterial(T$b,T$u)},T$$._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},T$$._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},T$$._parseCustomProps=function(T$$,T$b,T$u,T$Z){var T$E=this.meshRender,T$r=T$u.lightmapIndex;null!=T$r&&(T$E.lightmapIndex=T$r);var T$F,T$x,T$g=T$u.lightmapScaleOffset;if(T$g&&(T$E.lightmapScaleOffset=new T$xb(T$g[0],T$g[1],T$g[2],T$g[3])),T$Z.instanceParams)(T$F=T$Z.instanceParams.loadPath)&&(T$x=T$T.getRes(T$b[T$F]),(this.meshFilter.sharedMesh=T$x).loaded?T$E.sharedMaterials=T$x.materials:T$x.once("loaded",this,this._applyMeshMaterials));else{(T$F=T$u.meshPath)&&(T$x=T$T.getRes(T$b[T$F]),this.meshFilter.sharedMesh=T$x);var T$H=T$u.materials;if(T$H){var T$w=T$E.sharedMaterials,T$I=T$H.length;T$w.length=T$I;for(var T$o=0;T$o<T$I;T$o++)T$w[T$o]=T$T.getRes(T$b[T$H[T$o].path]);T$E.sharedMaterials=T$w}}},T$$._applyMeshMaterials=function(T$$){for(var T$b=this._render.sharedMaterials,T$u=T$$.materials,T$Z=0,T$E=T$u.length;T$Z<T$E;T$Z++)T$b[T$Z]||(T$b[T$Z]=T$u[T$Z]);this._render.sharedMaterials=T$b},T$$._addToInitStaticBatchManager=function(){T$Z._staticBatchManager._addInitBatchSprite(this)},T$$.cloneTo=function(T$$){var T$b=T$$;T$b._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var T$u=this._render,T$Z=T$b._render;T$Z.enable=T$u.enable,T$Z.sharedMaterials=T$u.sharedMaterials,T$Z.castShadow=T$u.castShadow;var T$E=T$u.lightmapScaleOffset;T$E&&(T$Z.lightmapScaleOffset=T$E.clone()),T$Z.lightmapIndex=T$u.lightmapIndex,T$Z.receiveShadow=T$u.receiveShadow,T$Z.sortingFudge=T$u.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,T$$)},T$$.destroy=function(T$$){if(void 0===T$$&&(T$$=!0),!this.destroyed){var T$b=this.meshFilter.sharedMesh;null!=T$b&&(T$b.loaded||T$b.off("loaded",this,this._applyMeshMaterials)),T$u.prototype.destroy.call(this,T$$),this._geometryFilter._destroy()}},T$D(0,T$$,"meshFilter",function(){return this._geometryFilter}),T$D(0,T$$,"meshRender",function(){return this._render}),T$Z.__init__=function(){T$Z$._staticBatchManagers.push(T$Z._staticBatchManager)},T$Z.load=function(T$$){return T$P.loader.create(T$$,null,null,T$Z)},T$I(T$Z,["_staticBatchManager",function(){return this._staticBatchManager=new T$ab}]),T$Z}(T$Wb)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$$,T$b){"use strict";for(var T$u in Object.defineProperty(T$b,"__esModule",{value:!0}),Laya){var T$Z=Laya[T$u];T$Z&&T$Z.__isclass&&(T$b[T$u]=T$Z)}}),function(T$$,T$b,T$E$){T$E$.un,T$E$.uns;var T$u=T$E$.static,T$Z=T$E$.class,T$r=T$E$.getset,T$e=T$E$.__newvec,T$x=laya.maths.Bezier,T$I=laya.utils.Browser,T$O$=laya.utils.Byte,T$E=(laya.events.Event,laya.events.EventDispatcher),T$F=laya.display.Graphics,T$g=(laya.resource.HTMLCanvas,laya.utils.Handler),T$H=laya.net.Loader,T$o=laya.maths.MathUtil,T$V$=laya.maths.Matrix,T$L=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),T$w=(laya.renders.RenderContext,laya.resource.Resource),T$N=laya.utils.RunDriver,T$r$=laya.display.Sprite,T$D=laya.utils.Stat,T$v$=laya.resource.Texture,T$T=(laya.net.URL,laya.utils.Utils),T$V=function(){function T$$(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return T$Z(T$$,"laya.ani.AnimationContent"),T$$}(),T$v=function(){function T$$(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return T$Z(T$$,"laya.ani.AnimationNodeContent"),T$$}(),T$y=function(){function T$$(){}return T$Z(T$$,"laya.ani.AnimationParser01"),T$$.parse=function(T$$,T$b){var T$u=T$b.__getBuffer(),T$Z=0,T$E=0,T$r=0,T$F=0,T$x=0,T$g=0,T$H=0,T$w=T$b.readUTFString();T$$._aniClassName=T$w;var T$I,T$o=T$b.readUTFString().split("\n"),T$N=T$b.getUint8(),T$D=T$b.getUint32(),T$e=T$b.getUint32();0<T$D&&(T$I=T$u.slice(T$D,T$e));var T$L=new T$O$(T$I);for(0<T$e&&(T$$._publicExtData=T$u.slice(T$e,T$u.byteLength)),T$$._useParent=!!T$b.getUint8(),T$$._anis.length=T$N,T$Z=0;T$Z<T$N;T$Z++){var T$T=T$$._anis[T$Z]=new T$V;T$T.nodes=new Array;var T$_=T$T.name=T$o[T$b.getUint16()];T$$._aniMap[T$_]=T$Z,T$T.bone3DMap={},T$T.playTime=T$b.getFloat32(),T$T.playTime<=0&&console.error("播放时间不能为0  url="+T$$.url+" name="+T$T.name);var T$y=T$T.nodes.length=T$b.getUint8();for(T$E=T$T.totalKeyframeDatasLength=0;T$E<T$y;T$E++){var T$S=T$T.nodes[T$E]=new T$v;T$S.childs=[];var T$P=T$b.getInt16();0<=T$P&&(T$S.name=T$o[T$P],T$T.bone3DMap[T$S.name]=T$E),T$S.keyFrame=new Array,T$S.parentIndex=T$b.getInt16(),-1==T$S.parentIndex?T$S.parent=null:T$S.parent=T$T.nodes[T$S.parentIndex],T$S.lerpType=T$b.getUint8();var T$i=T$b.getUint32();T$L.pos=T$i;var T$z=T$S.keyframeWidth=T$L.getUint16();if(T$T.totalKeyframeDatasLength+=T$z,0===T$S.lerpType||1===T$S.lerpType)for(T$S.interpolationMethod=[],T$S.interpolationMethod.length=T$z,T$r=0;T$r<T$z;T$r++)T$S.interpolationMethod[T$r]=T$k.interpolation[T$L.getUint8()];null!=T$S.parent&&T$S.parent.childs.push(T$S);var T$q=T$b.getUint16();0<T$q&&(T$S.extenData=T$u.slice(T$b.pos,T$b.pos+T$q),T$b.pos+=T$q);var T$a,T$t=T$b.getUint16(),T$C=0;for(T$r=0,T$F=T$S.keyFrame.length=T$t;T$r<T$F;T$r++){if((T$a=T$S.keyFrame[T$r]=new T$p).duration=T$b.getFloat32(),T$a.startTime=T$C,2===T$S.lerpType){T$a.interpolationData=[];var T$K,T$O=T$b.getUint8();switch(T$K=T$b.getFloat32()){case 254:for(T$a.interpolationData.length=T$z,T$H=0;T$H<T$z;T$H++)T$a.interpolationData[T$H]=0;break;case 255:for(T$a.interpolationData.length=T$z,T$H=0;T$H<T$z;T$H++)T$a.interpolationData[T$H]=5;break;default:for(T$a.interpolationData.push(T$K),T$g=1;T$g<T$O;T$g++)T$a.interpolationData.push(T$b.getFloat32())}}for(T$a.data=new Float32Array(T$z),T$x=0;T$x<T$z;T$x++)T$a.data[T$x]=T$b.getFloat32(),-1e-8<T$a.data[T$x]&&T$a.data[T$x]<1e-8&&(T$a.data[T$x]=0);T$C+=T$a.duration}T$a.startTime=T$T.playTime,T$S.playTime=T$T.playTime,T$$._calculateKeyFrame(T$S,T$t,T$z)}}},T$$}(),T$S=function(){function T$P(){}return T$Z(T$P,"laya.ani.AnimationParser02"),T$P.READ_DATA=function(){T$P._DATA.offset=T$P._reader.getUint32(),T$P._DATA.size=T$P._reader.getUint32()},T$P.READ_BLOCK=function(){for(var T$$=T$P._BLOCK.count=T$P._reader.getUint16(),T$b=T$P._BLOCK.blockStarts=[],T$u=T$P._BLOCK.blockLengths=[],T$Z=0;T$Z<T$$;T$Z++)T$b.push(T$P._reader.getUint32()),T$u.push(T$P._reader.getUint32())},T$P.READ_STRINGS=function(){var T$$=T$P._reader.getUint32(),T$b=T$P._reader.getUint16(),T$u=T$P._reader.pos;T$P._reader.pos=T$$+T$P._DATA.offset;for(var T$Z=0;T$Z<T$b;T$Z++)T$P._strings[T$Z]=T$P._reader.readUTFString();T$P._reader.pos=T$u},T$P.parse=function(T$$,T$b){T$P._templet=T$$;(T$P._reader=T$b).__getBuffer();T$P.READ_DATA(),T$P.READ_BLOCK(),T$P.READ_STRINGS();for(var T$u=0,T$Z=T$P._BLOCK.count;T$u<T$Z;T$u++){var T$E=T$b.getUint16(),T$r=T$P._strings[T$E],T$F=T$P["READ_"+T$r];if(null==T$F)throw new Error("model file err,no this function:"+T$E+" "+T$r);T$F.call()}},T$P.READ_ANIMATIONS=function(){var T$$=T$P._reader,T$b=T$$.__getBuffer(),T$u=0,T$Z=0,T$E=0,T$r=0,T$F=T$$.getUint16(),T$x=[];for(T$x.length=T$F,T$u=0;T$u<T$F;T$u++)T$x[T$u]=T$k.interpolation[T$$.getByte()];var T$g=T$$.getUint8();for(T$P._templet._anis.length=T$g,T$u=0;T$u<T$g;T$u++){var T$H=T$P._templet._anis[T$u]={};T$H.nodes=new Array;var T$w=T$H.name=T$P._strings[T$$.getUint16()];T$P._templet._aniMap[T$w]=T$u,T$H.bone3DMap={},T$H.playTime=T$$.getFloat32();var T$I=T$H.nodes.length=T$$.getInt16();for(T$Z=T$H.totalKeyframeDatasLength=0;T$Z<T$I;T$Z++){var T$o=T$H.nodes[T$Z]={};T$o.keyframeWidth=T$F,T$o.childs=[];var T$N=T$$.getUint16();0<=T$N&&(T$o.name=T$P._strings[T$N],T$H.bone3DMap[T$o.name]=T$Z),T$o.keyFrame=new Array,T$o.parentIndex=T$$.getInt16(),-1==T$o.parentIndex?T$o.parent=null:T$o.parent=T$H.nodes[T$o.parentIndex],T$H.totalKeyframeDatasLength+=T$F,T$o.interpolationMethod=T$x,null!=T$o.parent&&T$o.parent.childs.push(T$o);var T$D=T$$.getUint16(),T$e=null,T$L=null;for(T$E=0,T$r=T$o.keyFrame.length=T$D;T$E<T$r;T$E++){(T$e=T$o.keyFrame[T$E]={}).startTime=T$$.getFloat32(),T$L&&(T$L.duration=T$e.startTime-T$L.startTime);var T$T=T$P._DATA.offset,T$_=T$$.getUint32(),T$y=4*T$F,T$S=T$b.slice(T$T+T$_,T$T+T$_+T$y);T$e.data=new Float32Array(T$S),T$L=T$e}T$e.duration=0,T$o.playTime=T$H.playTime,T$P._templet._calculateKeyFrame(T$o,T$D,T$F)}}},T$P._templet=null,T$P._reader=null,T$P._strings=[],T$u(T$P,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),T$P}(),T$p$=(function(){function T$$(){}T$Z(T$$,"laya.ani.AnimationState"),T$$.stopped=0,T$$.paused=1,T$$.playing=2}(),function(){function T$E(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new T$W$,this.resultMatrix=new T$V$,this._children=[]}T$Z(T$E,"laya.ani.bone.Bone");var T$$=T$E.prototype;return T$$.setTempMatrix=function(T$$){this._tempMatrix=T$$;var T$b,T$u=0;for(T$u=0,T$b=this._children.length;T$u<T$b;T$u++)this._children[T$u].setTempMatrix(this._tempMatrix)},T$$.update=function(T$$){var T$b;if(this.rotation=this.transform.skX,T$$)T$b=this.resultTransform.getMatrix(),T$V$.mul(T$b,T$$,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)T$b=this.resultTransform.getMatrix(),T$V$.mul(T$b,this.parentBone.resultMatrix,this.resultMatrix);else{var T$u=this.parentBone,T$Z=NaN,T$E=NaN,T$r=NaN,T$F=this.parentBone.resultMatrix;T$b=this.resultTransform.getMatrix();var T$x=T$F.a*T$b.tx+T$F.c*T$b.ty+T$F.tx,T$g=T$F.b*T$b.tx+T$F.d*T$b.ty+T$F.ty,T$H=new T$V$;this.inheritRotation?(T$Z=Math.atan2(T$u.resultMatrix.b,T$u.resultMatrix.a),T$E=Math.cos(T$Z),T$r=Math.sin(T$Z),T$H.setTo(T$E,T$r,-T$r,T$E,0,0),T$V$.mul(this._tempMatrix,T$H,T$V$.TEMP),T$V$.TEMP.copyTo(T$H),T$b=this.resultTransform.getMatrix(),T$V$.mul(T$b,T$H,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,T$b=this.resultTransform.getMatrix(),T$V$.TEMP.identity(),T$V$.TEMP.d=this.d,T$V$.mul(T$b,T$V$.TEMP,this.resultMatrix)),this.resultMatrix.tx=T$x,this.resultMatrix.ty=T$g}else(T$b=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var T$w,T$I=0;for(T$I=0,T$w=this._children.length;T$I<T$w;T$I++)this._children[T$I].update()},T$$.updateChild=function(){var T$$,T$b=0;for(T$b=0,T$$=this._children.length;T$b<T$$;T$b++)this._children[T$b].update()},T$$.setRotation=function(T$$){this._sprite&&(this._sprite.rotation=180*T$$/Math.PI)},T$$.updateDraw=function(T$$,T$b){T$E.ShowBones&&!T$E.ShowBones[this.name]||(this._sprite||(this._sprite=new T$r$,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),T$E$.stage.addChild(this._sprite)),this._sprite.x=T$$+this.resultMatrix.tx,this._sprite.y=T$b+this.resultMatrix.ty);var T$u,T$Z=0;for(T$Z=0,T$u=this._children.length;T$Z<T$u;T$Z++)this._children[T$Z].updateDraw(T$$,T$b)},T$$.addChild=function(T$$){this._children.push(T$$),T$$.parentBone=this},T$$.findBone=function(T$$){if(this.name==T$$)return this;var T$b,T$u,T$Z=0;for(T$Z=0,T$b=this._children.length;T$Z<T$b;T$Z++)if(T$u=this._children[T$Z].findBone(T$$))return T$u;return null},T$$.localToWorld=function(T$$){var T$b=T$$[0],T$u=T$$[1];T$$[0]=T$b*this.resultMatrix.a+T$u*this.resultMatrix.c+this.resultMatrix.tx,T$$[1]=T$b*this.resultMatrix.b+T$u*this.resultMatrix.d+this.resultMatrix.ty},T$E.ShowBones={},T$E}()),T$Y$=function(){function T$e(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}T$Z(T$e,"laya.ani.bone.BoneSlot");var T$$=T$e.prototype;return T$$.showSlotData=function(T$$,T$b){void 0===T$b&&(T$b=!0),this.currSlotData=T$$,T$b&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},T$$.showDisplayByName=function(T$$){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(T$$))},T$$.replaceDisplayByName=function(T$$,T$b){if(this.currSlotData){var T$u;T$u=this.currSlotData.getDisplayByName(T$$);var T$Z;T$Z=this.currSlotData.getDisplayByName(T$b),this.replaceDisplayByIndex(T$u,T$Z)}},T$$.replaceDisplayByIndex=function(T$$,T$b){this.currSlotData&&(this._replaceDic[T$$]=T$b,this.displayIndex==T$$&&this.showDisplayByIndex(T$$))},T$$.showDisplayByIndex=function(T$$){if(null!=this._replaceDic[T$$]&&(T$$=this._replaceDic[T$$]),this.currSlotData&&-1<T$$&&T$$<this.currSlotData.displayArr.length){if(this.displayIndex=T$$,this.currDisplayData=this.currSlotData.displayArr[T$$],this.currDisplayData){var T$b=this.currDisplayData.name;this.currTexture=this.templet.getTexture(T$b),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!T$L.isConchApp||T$L.isConchApp&&"0.9.15"<T$r$.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},T$$.replaceSkin=function(T$$){this._diyTexture=T$$,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},T$$.setParentMatrix=function(T$$){this._parentMatrix=T$$},T$$.draw=function(T$$,T$b,T$u,T$Z){if(void 0===T$u&&(T$u=!1),void 0===T$Z&&(T$Z=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var T$E,T$r=this.currTexture;switch(this._diyTexture&&(T$r=this._diyTexture),this.currDisplayData.type){case 0:if(T$$){var T$F=this.getDisplayMatrix();if(this._parentMatrix){var T$x=!1;if(T$F){var T$g;if(T$V$.mul(T$F,this._parentMatrix,T$V$.TEMP),T$g=T$u?(null==this._resultMatrix&&(this._resultMatrix=new T$V$),this._resultMatrix):new T$V$,!T$L.isWebGL&&this.currDisplayData.uvs||T$L.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var T$H=T$e._tempMatrix;T$H.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(T$H.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(T$x=!0,T$H.rotate(-Math.PI/2)),T$V$.mul(T$H,T$V$.TEMP,T$g)}else T$V$.TEMP.copyTo(T$g);T$x?T$$.drawTexture(T$r,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,T$g):T$$.drawTexture(T$r,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,T$g)}}}break;case 1:if(null==(T$E=T$u?(null==this._skinSprite&&(this._skinSprite=T$e.createSkinMesh()),this._skinSprite):T$e.createSkinMesh()))return;var T$w;if(null==this.currDisplayData.bones){var T$I,T$o=this.currDisplayData.weights;this.deformData&&(T$o=this.deformData),T$I=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=T$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=T$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=T$o;this.currDisplayData.triangles.length;T$w=this.currDisplayData.triangles,T$E.init2(T$r,null,T$w,this._mVerticleArr,T$I);var T$N,T$D=this.getDisplayMatrix();if(this._parentMatrix)if(T$D)T$V$.mul(T$D,this._parentMatrix,T$V$.TEMP),T$N=T$u?(null==this._resultMatrix&&(this._resultMatrix=new T$V$),this._resultMatrix):new T$V$,T$V$.TEMP.copyTo(T$N),T$E.transform=T$N}else this.skinMesh(T$b,T$E,T$Z);T$$.drawSkin(T$E);break;case 2:if(null==(T$E=T$u?(null==this._skinSprite&&(this._skinSprite=T$e.createSkinMesh()),this._skinSprite):T$e.createSkinMesh()))return;this.skinMesh(T$b,T$E,T$Z),T$$.drawSkin(T$E)}}},T$$.skinMesh=function(T$$,T$b,T$u){var T$Z,T$E=this.currTexture,T$r=this.currDisplayData.bones;T$Z=this._diyTexture?(T$E=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=T$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=T$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var T$F,T$x,T$g=this.currDisplayData.weights,T$H=this.currDisplayData.triangles,T$w=0,T$I=0,T$o=0,T$N=NaN,T$D=NaN,T$e=0,T$L=0,T$T=[],T$_=0,T$y=0;if(this.deformData&&0<this.deformData.length){var T$S=0;for(T$_=0,T$y=T$r.length;T$_<T$y;){for(T$o=T$r[T$_++]+T$_,T$I=T$w=0;T$_<T$o;T$_++)T$x=T$$[T$r[T$_]],T$N=T$g[T$e]+this.deformData[T$S++],T$D=T$g[T$e+1]+this.deformData[T$S++],T$L=T$g[T$e+2],T$w+=(T$N*T$x.a+T$D*T$x.c+T$x.tx)*T$L,T$I+=(T$N*T$x.b+T$D*T$x.d+T$x.ty)*T$L,T$e+=3;T$T.push(T$w,T$I)}}else for(T$_=0,T$y=T$r.length;T$_<T$y;){for(T$o=T$r[T$_++]+T$_,T$I=T$w=0;T$_<T$o;T$_++)T$x=T$$[T$r[T$_]],T$N=T$g[T$e],T$D=T$g[T$e+1],T$L=T$g[T$e+2],T$w+=(T$N*T$x.a+T$D*T$x.c+T$x.tx)*T$L,T$I+=(T$N*T$x.b+T$D*T$x.d+T$x.ty)*T$L,T$e+=3;T$T.push(T$w,T$I)}this._mVerticleArr=T$T,T$F=T$H,T$b.init2(T$E,null,T$F,this._mVerticleArr,T$Z)},T$$.drawBonePoint=function(T$$){T$$&&this._parentMatrix&&T$$.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},T$$.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},T$$.getMatrix=function(){return this._resultMatrix},T$$.copy=function(){var T$$=new T$e;return T$$.type="copy",T$$.name=this.name,T$$.attachmentName=this.attachmentName,T$$.srcDisplayIndex=this.srcDisplayIndex,T$$.parent=this.parent,T$$.displayIndex=this.displayIndex,T$$.templet=this.templet,T$$.currSlotData=this.currSlotData,T$$.currTexture=this.currTexture,T$$.currDisplayData=this.currDisplayData,T$$},T$e.createSkinMesh=function(){return T$L.isWebGL||T$L.isConchApp?T$N.skinAniSprite():(T$L.isWebGL,null)},T$u(T$e,["_tempMatrix",function(){return this._tempMatrix=new T$V$}]),T$e}(),T$k$=function(){function T$$(){this.skinName=null,this.deformSlotDataList=[]}return T$Z(T$$,"laya.ani.bone.DeformAniData"),T$$}(),T$M$=function(){function T$$(){this.deformSlotDisplayList=[]}return T$Z(T$$,"laya.ani.bone.DeformSlotData"),T$$}(),T$l$=function(){function T$$(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}T$Z(T$$,"laya.ani.bone.DeformSlotDisplayData");var T$b=T$$.prototype;return T$b.binarySearch1=function(T$$,T$b){var T$u=0,T$Z=T$$.length-2;if(0==T$Z)return 1;for(var T$E=T$Z>>>1;;){if(T$$[Math.floor(T$E+1)]<=T$b?T$u=T$E+1:T$Z=T$E,T$u==T$Z)return T$u+1;T$E=T$u+T$Z>>>1}return 0},T$b.apply=function(T$$,T$b,T$u){if(void 0===T$u&&(T$u=1),T$$+=.05,!(this.timeList.length<=0)){var T$Z=0;if(!(T$$<this.timeList[0])){var T$E=this.vectices[0].length,T$r=[],T$F=this.binarySearch1(this.timeList,T$$);if(this.frameIndex=T$F,T$$>=this.timeList[this.timeList.length-1]){var T$x=this.vectices[this.vectices.length-1];if(T$u<1)for(T$Z=0;T$Z<T$E;T$Z++)T$r[T$Z]+=(T$x[T$Z]-T$r[T$Z])*T$u;else for(T$Z=0;T$Z<T$E;T$Z++)T$r[T$Z]=T$x[T$Z];this.deformData=T$r}else{this.tweenKeyList[this.frameIndex];var T$g=this.vectices[this.frameIndex-1],T$H=this.vectices[this.frameIndex],T$w=this.timeList[this.frameIndex-1],T$I=this.timeList[this.frameIndex];T$u=this.tweenKeyList[T$F-1]?(T$$-T$w)/(T$I-T$w):0;var T$o=NaN;for(T$Z=0;T$Z<T$E;T$Z++)T$o=T$g[T$Z],T$r[T$Z]=T$o+(T$H[T$Z]-T$o)*T$u;this.deformData=T$r}}}},T$$}(),T$X$=function(){function T$$(){this.time=NaN,this.drawOrder=[]}return T$Z(T$$,"laya.ani.bone.DrawOrderData"),T$$}(),T$s$=function(){function T$$(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return T$Z(T$$,"laya.ani.bone.EventData"),T$$}(),T$_=function(){function T$Z$(T$$,T$b){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=T$$,this._targetBone=T$b[T$$.targetBoneIndex],this.isSpine=T$$.isSpine,null==this._bones&&(this._bones=[]);for(var T$u=this._bones.length=0,T$Z=T$$.boneIndexs.length;T$u<T$Z;T$u++)this._bones.push(T$b[T$$.boneIndexs[T$u]]);this.name=T$$.name,this.mix=T$$.mix,this.bendDirection=T$$.bendDirection}T$Z(T$Z$,"laya.ani.bone.IkConstraint");var T$$=T$Z$.prototype;return T$$.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},T$$._applyIk1=function(T$$,T$b,T$u,T$Z){var T$E=T$$.parentBone,T$r=1/(T$E.resultMatrix.a*T$E.resultMatrix.d-T$E.resultMatrix.b*T$E.resultMatrix.c),T$F=T$b-T$E.resultMatrix.tx,T$x=T$u-T$E.resultMatrix.ty,T$g=(T$F*T$E.resultMatrix.d-T$x*T$E.resultMatrix.c)*T$r-T$$.transform.x,T$H=(T$x*T$E.resultMatrix.a-T$F*T$E.resultMatrix.b)*T$r-T$$.transform.y,T$w=Math.atan2(T$H,T$g)*T$Z$.radDeg-0-T$$.transform.skX;T$$.transform.scX<0&&(T$w+=180),180<T$w?T$w-=360:T$w<-180&&(T$w+=360),T$$.transform.skX=T$$.transform.skY=T$$.transform.skX+T$w*T$Z,T$$.update()},T$$.updatePos=function(T$$,T$b){this._sp&&this._sp.pos(T$$,T$b)},T$$._applyIk2=function(T$$,T$b,T$u,T$Z,T$E,T$r){if(0!=T$r){var T$F=T$$.resultTransform.x,T$x=T$$.resultTransform.y,T$g=T$$.transform.scX,T$H=T$$.transform.scY,T$w=T$b.transform.scX,T$I=0,T$o=0,T$N=0;T$N=T$g<0?(T$g=-T$g,T$I=180,-1):(T$I=0,1),T$H<0&&(T$H=-T$H,T$N=-T$N),T$o=T$w<0?(T$w=-T$w,180):0;var T$D=T$b.resultTransform.x,T$e=NaN,T$L=NaN,T$T=NaN,T$_=T$$.resultMatrix.a,T$y=T$$.resultMatrix.c,T$S=T$$.resultMatrix.b,T$P=T$$.resultMatrix.d,T$i=Math.abs(T$g-T$H)<=1e-4;T$T=T$i?(T$L=T$_*T$D+T$y*(T$e=T$b.resultTransform.y)+T$$.resultMatrix.tx,T$S*T$D+T$P*T$e+T$$.resultMatrix.ty):(T$e=0,T$L=T$_*T$D+T$$.resultMatrix.tx,T$S*T$D+T$$.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new T$r$,T$E$.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(T$u,T$Z,15,"#ffff00"),this._sp.graphics.drawCircle(T$L,T$T,15,"#ff00ff")),T$$.setRotation(Math.atan2(T$T-T$$.resultMatrix.ty,T$L-T$$.resultMatrix.tx));var T$z=T$$.parentBone;T$_=T$z.resultMatrix.a,T$y=T$z.resultMatrix.c,T$S=T$z.resultMatrix.b;var T$q=1/(T$_*(T$P=T$z.resultMatrix.d)-T$y*T$S),T$a=T$u-T$z.resultMatrix.tx,T$t=T$Z-T$z.resultMatrix.ty,T$C=(T$a*T$P-T$t*T$y)*T$q-T$F,T$K=(T$t*T$_-T$a*T$S)*T$q-T$x,T$O=((T$a=T$L-T$z.resultMatrix.tx)*T$P-(T$t=T$T-T$z.resultMatrix.ty)*T$y)*T$q-T$F,T$V=(T$t*T$_-T$a*T$S)*T$q-T$x,T$v=Math.sqrt(T$O*T$O+T$V*T$V),T$p=T$b.length*T$w,T$Y=NaN,T$k=NaN;if(T$i){var T$M=(T$C*T$C+T$K*T$K-T$v*T$v-(T$p*=T$g)*T$p)/(2*T$v*T$p);T$M<-1?T$M=-1:1<T$M&&(T$M=1),T$k=Math.acos(T$M)*T$E,T$_=T$v+T$p*T$M,T$y=T$p*Math.sin(T$k),T$Y=Math.atan2(T$K*T$_-T$C*T$y,T$C*T$_+T$K*T$y)}else{var T$l=(T$_=T$g*T$p)*T$_,T$X=(T$y=T$H*T$p)*T$y,T$s=T$C*T$C+T$K*T$K,T$m=Math.atan2(T$K,T$C),T$n=-2*T$X*T$v,T$c=T$X-T$l;if(0<(T$P=T$n*T$n-4*T$c*(T$S=T$X*T$v*T$v+T$l*T$s-T$l*T$X))){var T$J=Math.sqrt(T$P);T$n<0&&(T$J=-T$J);var T$f=(T$J=-(T$n+T$J)/2)/T$c,T$Q=T$S/T$J,T$W=Math.abs(T$f)<Math.abs(T$Q)?T$f:T$Q;T$W*T$W<=T$s&&(T$t=Math.sqrt(T$s-T$W*T$W)*T$E,T$Y=T$m-Math.atan2(T$t,T$W),T$k=Math.atan2(T$t/T$H,(T$W-T$v)/T$g))}var T$G=0,T$A=Number.MAX_VALUE,T$j=0,T$h=0,T$d=0,T$U=0,T$B=0,T$R=0;T$U<(T$P=(T$a=T$v+T$_)*T$a)&&(T$d=0,T$U=T$P,T$B=T$a),(T$P=(T$a=T$v-T$_)*T$a)<T$A&&(T$G=Math.PI,T$A=T$P,T$j=T$a);var T$$$=Math.acos(-T$_*T$v/(T$l-T$X));(T$P=(T$a=T$_*Math.cos(T$$$)+T$v)*T$a+(T$t=T$y*Math.sin(T$$$))*T$t)<T$A&&(T$G=T$$$,T$A=T$P,T$j=T$a,T$h=T$t),T$U<T$P&&(T$d=T$$$,T$U=T$P,T$B=T$a,T$R=T$t),T$k=T$s<=(T$A+T$U)/2?(T$Y=T$m-Math.atan2(T$h*T$E,T$j),T$G*T$E):(T$Y=T$m-Math.atan2(T$R*T$E,T$B),T$d*T$E)}var T$b$=Math.atan2(T$e,T$D)*T$N,T$u$=T$$.resultTransform.skX;180<(T$Y=(T$Y-T$b$)*T$Z$.radDeg+T$I-T$u$)?T$Y-=360:T$Y<-180&&(T$Y+=360),T$$.resultTransform.x=T$F,T$$.resultTransform.y=T$x,T$$.resultTransform.skX=T$$.resultTransform.skY=T$u$+T$Y*T$r,T$u$=T$b.resultTransform.skX,180<(T$k=((T$k+T$b$)*T$Z$.radDeg-0)*T$N+T$o-(T$u$%=360))?T$k-=360:T$k<-180&&(T$k+=360),T$b.resultTransform.x=T$D,T$b.resultTransform.y=T$e,T$b.resultTransform.skX=T$b.resultTransform.skY=T$b.resultTransform.skY+T$k*T$r,T$$.update()}},T$$._applyIk3=function(T$$,T$b,T$u,T$Z,T$E,T$r){if(0!=T$r){var T$F,T$x,T$g=T$b.resultMatrix.a*T$b.length,T$H=T$b.resultMatrix.b*T$b.length,T$w=T$g*T$g+T$H*T$H,T$I=Math.sqrt(T$w),T$o=T$$.resultMatrix.tx,T$N=T$$.resultMatrix.ty,T$D=T$b.resultMatrix.tx,T$e=T$b.resultMatrix.ty,T$L=T$D-T$o,T$T=T$e-T$N,T$_=T$L*T$L+T$T*T$T,T$y=Math.sqrt(T$_),T$S=(T$L=T$u-T$$.resultMatrix.tx)*T$L+(T$T=T$Z-T$$.resultMatrix.ty)*T$T,T$P=Math.sqrt(T$S);if(T$I+T$y<=T$P||T$P+T$I<=T$y||T$P+T$y<=T$I){var T$i=NaN;T$D=T$o+(T$i=T$I+T$y<=T$P?1:-1)*(T$u-T$o)*T$y/T$P,T$e=T$N+T$i*(T$Z-T$N)*T$y/T$P}else{var T$z=(T$_-T$w+T$S)/(2*T$S),T$q=Math.sqrt(T$_-T$z*T$z*T$S)/T$P,T$a=T$o+T$L*T$z,T$t=T$N+T$T*T$z,T$C=-T$T*T$q,T$K=T$L*T$q;T$e=0<T$E?(T$D=T$a-T$C,T$t-T$K):(T$D=T$a+T$C,T$t+T$K)}T$F=T$D,T$x=T$e,this.isDebug&&(this._sp||(this._sp=new T$r$,T$E$.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(T$o,T$N,15,"#ff00ff"),this._sp.graphics.drawCircle(T$u,T$Z,15,"#ffff00"),this._sp.graphics.drawCircle(T$F,T$x,15,"#ff00ff"));var T$O,T$V;T$O=Math.atan2(T$x-T$$.resultMatrix.ty,T$F-T$$.resultMatrix.tx),T$$.setRotation(T$O),(T$V=T$Z$._tempMatrix).identity(),T$V.rotate(T$O),T$V.scale(T$$.resultMatrix.getScaleX(),T$$.resultMatrix.getScaleY()),T$V.translate(T$$.resultMatrix.tx,T$$.resultMatrix.ty),T$V.copyTo(T$$.resultMatrix),T$$.updateChild();var T$v,T$p;T$v=Math.atan2(T$Z-T$x,T$u-T$F),T$b.setRotation(T$v),(T$p=T$Z$._tempMatrix).identity(),T$p.rotate(T$v),T$p.scale(T$b.resultMatrix.getScaleX(),T$b.resultMatrix.getScaleY()),T$p.translate(T$F,T$x),T$V.copyTo(T$b.resultMatrix),T$b.updateChild()}},T$u(T$Z$,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new T$V$}]),T$Z$}(),T$m$=function(){function T$$(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return T$Z(T$$,"laya.ani.bone.IkConstraintData"),T$$}(),T$P=function(){function T$p(T$$,T$b){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=T$$,this.position=T$$.position,this.spacing=T$$.spacing,this.rotateMix=T$$.rotateMix,this.translateMix=T$$.translateMix,this.bones=[];for(var T$u=this.data.bones,T$Z=0,T$E=T$u.length;T$Z<T$E;T$Z++)this.bones.push(T$b[T$u[T$Z]])}T$Z(T$p,"laya.ani.bone.PathConstraint");var T$$=T$p.prototype;return T$$.apply=function(T$$,T$b){if(this.target){var T$u=this.translateMix,T$Z=this.translateMix,T$E=0<T$Z,T$r=this.data.spacingMode,T$F="length"==T$r,T$x=this.data.rotateMode,T$g="tangent"==T$x,T$H="chainScale"==T$x,T$w=[],T$I=this.bones.length,T$o=T$g?T$I:T$I+1,T$N=[];(this._spaces=T$N)[0]=this.position;var T$D=this.spacing;if(T$H||T$F)for(var T$e=0,T$L=T$o-1;T$e<T$L;){var T$T=this.bones[T$e],T$_=T$T.length,T$y=T$_*T$T.resultMatrix.a,T$S=T$_*T$T.resultMatrix.b;T$_=Math.sqrt(T$y*T$y+T$S*T$S),T$H&&(T$w[T$e]=T$_),T$N[++T$e]=T$F?Math.max(0,T$_+T$D):T$D}else for(T$e=1;T$e<T$o;T$e++)T$N[T$e]=T$D;var T$P=this.computeWorldPositions(this.target,T$$,T$b,T$o,T$g,"percent"==this.data.positionMode,"percent"==T$r);if(this._debugKey){for(T$e=0;T$e<T$P.length;T$e++)T$b.drawCircle(T$P[T$e++],T$P[T$e++],5,"#00ff00");var T$i=[];for(T$e=0;T$e<T$P.length;T$e++)T$i.push(T$P[T$e++],T$P[T$e++]);T$b.drawLines(0,0,T$i,"#ff0000")}var T$z=T$P[0],T$q=T$P[1],T$a=this.data.offsetRotation,T$t="chain"==T$x&&0==T$a,T$C=NaN;for(T$e=0,T$C=3;T$e<T$I;T$e++,T$C+=3){(T$T=this.bones[T$e]).resultMatrix.tx+=(T$z-T$T.resultMatrix.tx)*T$u,T$T.resultMatrix.ty+=(T$q-T$T.resultMatrix.ty)*T$u;var T$K=(T$y=T$P[T$C])-T$z,T$O=(T$S=T$P[T$C+1])-T$q;if(T$H&&0!=(T$_=T$w[T$e])){var T$V=(Math.sqrt(T$K*T$K+T$O*T$O)/T$_-1)*T$Z+1;T$T.resultMatrix.a*=T$V,T$T.resultMatrix.c*=T$V}if(T$z=T$y,T$q=T$S,T$E){var T$v=T$T.resultMatrix.a,T$p=T$T.resultMatrix.c,T$Y=T$T.resultMatrix.b,T$k=T$T.resultMatrix.d,T$M=NaN,T$l=NaN,T$X=NaN;T$M=T$g?T$P[T$C-1]:0==T$N[T$e+1]?T$P[T$C+2]:Math.atan2(T$O,T$K),T$M-=Math.atan2(T$Y,T$v)-T$a/180*Math.PI,T$t&&(T$l=Math.cos(T$M),T$X=Math.sin(T$M),T$z+=((T$_=T$T.length)*(T$l*T$v-T$X*T$Y)-T$K)*T$Z,T$q+=(T$_*(T$X*T$v+T$l*T$Y)-T$O)*T$Z),T$M>Math.PI?T$M-=2*Math.PI:T$M<-Math.PI&&(T$M+=2*Math.PI),T$M*=T$Z,T$l=Math.cos(T$M),T$X=Math.sin(T$M),T$T.resultMatrix.a=T$l*T$v-T$X*T$Y,T$T.resultMatrix.c=T$l*T$p-T$X*T$k,T$T.resultMatrix.b=T$X*T$v+T$l*T$Y,T$T.resultMatrix.d=T$X*T$p+T$l*T$k}}}},T$$.computeWorldVertices2=function(T$$,T$b,T$u,T$Z,T$E,T$r){var T$F,T$x,T$g=T$$.currDisplayData.bones,T$H=T$$.currDisplayData.weights,T$w=T$$.currDisplayData.triangles,T$I=0,T$o=0,T$N=0,T$D=0,T$e=0,T$L=0,T$T=0,T$_=0,T$y=0,T$S=0,T$P=0;if(null!=T$g){for(T$I=0;T$I<T$u;T$I+=2)T$o+=(T$D=T$g[T$o])+1,T$N+=T$D;var T$i=T$b;for(T$e=T$r,T$L=3*T$N;T$e<T$Z;T$e+=2){for(T$_=T$T=0,T$D=T$g[T$o++],T$D+=T$o;T$o<T$D;T$o++,T$L+=3){T$F=T$i[T$g[T$o]].resultMatrix,T$y=T$H[T$L],T$S=T$H[T$L+1];var T$z=T$H[T$L+2];T$T+=(T$y*T$F.a+T$S*T$F.c+T$F.tx)*T$z,T$_+=(T$y*T$F.b+T$S*T$F.d+T$F.ty)*T$z}T$E[T$e]=T$T,T$E[T$e+1]=T$_}}else{var T$q,T$a;if(T$w||(T$w=T$H),T$$.deformData&&(T$w=T$$.deformData),T$q=T$$.parent,T$b)for(T$P=T$b.length,T$I=0;T$I<T$P;T$I++)if(T$b[T$I].name==T$q){T$x=T$b[T$I];break}T$x&&(T$a=T$x.resultMatrix),T$a||(T$a=T$p._tempMt);var T$t=T$a.tx,T$C=T$a.ty,T$K=T$a.a,T$O=T$a.b,T$V=T$a.c,T$v=T$a.d;for(T$x&&(T$v*=T$x.d),T$o=T$u,T$e=T$r;T$e<T$Z;T$o+=2,T$e+=2)T$y=T$w[T$o],T$S=T$w[T$o+1],T$E[T$e]=T$y*T$K+T$S*T$O+T$t,T$E[T$e+1]=-(T$y*T$V+T$S*T$v+T$C)}},T$$.computeWorldPositions=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F){T$$.currDisplayData.bones,T$$.currDisplayData.weights,T$$.currDisplayData.triangles;var T$x=[],T$g=0,T$H=T$$.currDisplayData.verLen,T$w=this.position,T$I=this._spaces,T$o=[],T$N=[],T$D=T$H/6,T$e=-1,T$L=NaN,T$T=0,T$_=0,T$y=NaN,T$S=NaN,T$P=NaN,T$i=NaN;if(T$D--,T$H-=4,this.computeWorldVertices2(T$$,T$b,2,T$H,T$x,0),this._debugKey)for(T$g=0;T$g<T$x.length;)T$u.drawCircle(T$x[T$g++],T$x[T$g++],10,"#ff0000");T$o=T$x,this._curves.length=T$D;var T$z=this._curves,T$q=T$o[T$L=0],T$a=T$o[1],T$t=0,T$C=0,T$K=0,T$O=0,T$V=0,T$v=0,T$p=NaN,T$Y=NaN,T$k=NaN,T$M=NaN,T$l=NaN,T$X=NaN,T$s=NaN,T$m=NaN,T$n=0;for(T$g=0,T$n=2;T$g<T$D;T$g++,T$n+=6)T$t=T$o[T$n],T$C=T$o[T$n+1],T$K=T$o[T$n+2],T$O=T$o[T$n+3],T$l=2*(T$p=.1875*(T$q-2*T$t+T$K))+(T$k=.09375*(3*(T$t-T$K)-T$q+(T$V=T$o[T$n+4]))),T$X=2*(T$Y=.1875*(T$a-2*T$C+T$O))+(T$M=.09375*(3*(T$C-T$O)-T$a+(T$v=T$o[T$n+5]))),T$s=.75*(T$t-T$q)+T$p+.16666667*T$k,T$m=.75*(T$C-T$a)+T$Y+.16666667*T$M,T$L+=Math.sqrt(T$s*T$s+T$m*T$m),T$s+=T$l,T$m+=T$X,T$l+=T$k,T$X+=T$M,T$L+=Math.sqrt(T$s*T$s+T$m*T$m),T$s+=T$l,T$m+=T$X,T$L+=Math.sqrt(T$s*T$s+T$m*T$m),T$s+=T$l+T$k,T$m+=T$X+T$M,T$L+=Math.sqrt(T$s*T$s+T$m*T$m),T$z[T$g]=T$L,T$q=T$V,T$a=T$v;if(T$r&&(T$w*=T$L),T$F)for(T$g=0;T$g<T$Z;T$g++)T$I[T$g]*=T$L;var T$c=this._segments,T$J=0,T$f=0;for(T$f=T$_=T$T=T$g=0;T$g<T$Z;T$g++,T$T+=3)if((T$y=T$w+=T$S=T$I[T$g])<0)this.addBeforePosition(T$y,T$o,0,T$N,T$T);else if(T$L<T$y)this.addAfterPosition(T$y-T$L,T$o,T$H-4,T$N,T$T);else{for(;;T$_++)if(!((T$i=T$z[T$_])<T$y)){0==T$_?T$y/=T$i:T$y=(T$y-(T$P=T$z[T$_-1]))/(T$i-T$P);break}if(T$_!=T$e){var T$Q=6*(T$e=T$_);for(T$q=T$o[T$Q],T$a=T$o[T$Q+1],T$t=T$o[T$Q+2],T$C=T$o[T$Q+3],T$K=T$o[T$Q+4],T$O=T$o[T$Q+5],T$l=2*(T$p=.03*(T$q-2*T$t+T$K))+(T$k=.006*(3*(T$t-T$K)-T$q+(T$V=T$o[T$Q+6]))),T$X=2*(T$Y=.03*(T$a-2*T$C+T$O))+(T$M=.006*(3*(T$C-T$O)-T$a+(T$v=T$o[T$Q+7]))),T$s=.3*(T$t-T$q)+T$p+.16666667*T$k,T$m=.3*(T$C-T$a)+T$Y+.16666667*T$M,T$J=Math.sqrt(T$s*T$s+T$m*T$m),T$c[0]=T$J,T$Q=1;T$Q<8;T$Q++)T$s+=T$l,T$m+=T$X,T$l+=T$k,T$X+=T$M,T$J+=Math.sqrt(T$s*T$s+T$m*T$m),T$c[T$Q]=T$J;T$s+=T$l,T$m+=T$X,T$J+=Math.sqrt(T$s*T$s+T$m*T$m),T$c[8]=T$J,T$s+=T$l+T$k,T$m+=T$X+T$M,T$J+=Math.sqrt(T$s*T$s+T$m*T$m),T$c[9]=T$J,T$f=0}for(T$y*=T$J;;T$f++)if(!((T$i=T$c[T$f])<T$y)){0==T$f?T$y/=T$i:T$y=T$f+(T$y-(T$P=T$c[T$f-1]))/(T$i-T$P);break}this.addCurvePosition(.1*T$y,T$q,T$a,T$t,T$C,T$K,T$O,T$V,T$v,T$N,T$T,T$E||0<T$g&&0==T$S)}return T$N},T$$.addBeforePosition=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$b[T$u],T$F=T$b[T$u+1],T$x=T$b[T$u+2]-T$r,T$g=T$b[T$u+3]-T$F,T$H=Math.atan2(T$g,T$x);T$Z[T$E]=T$r+T$$*Math.cos(T$H),T$Z[T$E+1]=T$F+T$$*Math.sin(T$H),T$Z[T$E+2]=T$H},T$$.addAfterPosition=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$b[T$u+2],T$F=T$b[T$u+3],T$x=T$r-T$b[T$u],T$g=T$F-T$b[T$u+1],T$H=Math.atan2(T$g,T$x);T$Z[T$E]=T$r+T$$*Math.cos(T$H),T$Z[T$E+1]=T$F+T$$*Math.sin(T$H),T$Z[T$E+2]=T$H},T$$.addCurvePosition=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w,T$I){0==T$$&&(T$$=1e-4);var T$o=T$$*T$$,T$N=T$o*T$$,T$D=1-T$$,T$e=T$D*T$D,T$L=T$e*T$D,T$T=T$D*T$$,T$_=3*T$T,T$y=T$D*T$_,T$S=T$_*T$$,T$P=T$b*T$L+T$Z*T$y+T$r*T$S+T$x*T$N,T$i=T$u*T$L+T$E*T$y+T$F*T$S+T$g*T$N;T$H[T$w]=T$P,T$H[T$w+1]=T$i,T$H[T$w+2]=T$I?Math.atan2(T$i-(T$u*T$e+T$E*T$T*2+T$F*T$o),T$P-(T$b*T$e+T$Z*T$T*2+T$r*T$o)):0},T$p.NONE=-1,T$p.BEFORE=-2,T$p.AFTER=-3,T$u(T$p,["_tempMt",function(){return this._tempMt=new T$V$}]),T$p}(),T$n$=function(){function T$$(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return T$Z(T$$,"laya.ani.bone.PathConstraintData"),T$$}(),T$c$=function(){function T$$(){this.name=null,this.slotArr=[]}return T$Z(T$$,"laya.ani.bone.SkinData"),T$$}(),T$J$=function(){function T$$(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}T$Z(T$$,"laya.ani.bone.SkinSlotDisplayData");var T$b=T$$.prototype;return T$b.createTexture=function(T$$){return this.texture||(this.texture=new T$v$(T$$.bitmap,this.uvs),T$$.bitmap.alphaTexture&&(this.texture.alphaTexture=new T$v$(T$$.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=T$$.height,this.texture.height=T$$.width,this.texture.offsetX=-T$$.offsetX,this.texture.offsetY=-T$$.offsetY,this.texture.sourceWidth=T$$.sourceHeight,this.texture.sourceHeight=T$$.sourceWidth):(this.texture.width=T$$.width,this.texture.height=T$$.height,this.texture.offsetX=-T$$.offsetX,this.texture.offsetY=-T$$.offsetY,this.texture.sourceWidth=T$$.sourceWidth,this.texture.sourceHeight=T$$.sourceHeight),T$L.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},T$b.destory=function(){this.texture&&this.texture.destroy()},T$$}(),T$f$=function(){function T$$(){this.name=null,this.displayArr=[]}return T$Z(T$$,"laya.ani.bone.SlotData"),T$$.prototype.getDisplayByName=function(T$$){for(var T$b=0,T$u=this.displayArr.length;T$b<T$u;T$b++)if(this.displayArr[T$b].attachmentName==T$$)return T$b;return-1},T$$}(),T$i=function(){function T$$(T$$,T$b){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=T$e(2,0),this._data=T$$,null==this._bones&&(this._bones=[]),this.target=T$b[T$$.targetIndex];var T$u,T$Z=0;for(T$Z=0,T$u=T$$.boneIndexs.length;T$Z<T$u;T$Z++)this._bones.push(T$b[T$$.boneIndexs[T$Z]]);this.rotateMix=T$$.rotateMix,this.translateMix=T$$.translateMix,this.scaleMix=T$$.scaleMix,this.shearMix=T$$.shearMix}return T$Z(T$$,"laya.ani.bone.TfConstraint"),T$$.prototype.apply=function(){for(var T$$,T$b=this.target.resultMatrix.a,T$u=this.target.resultMatrix.b,T$Z=this.target.resultMatrix.c,T$E=this.target.resultMatrix.d,T$r=0,T$F=this._bones.length;T$r<T$F;T$r++){if(T$$=this._bones[T$r],0<this.rotateMix){var T$x=T$$.resultMatrix.a,T$g=T$$.resultMatrix.b,T$H=T$$.resultMatrix.c,T$w=T$$.resultMatrix.d,T$I=Math.atan2(T$Z,T$b)-Math.atan2(T$H,T$x)+this._data.offsetRotation*Math.PI/180;T$I>Math.PI?T$I-=2*Math.PI:T$I<-Math.PI&&(T$I+=2*Math.PI),T$I*=this.rotateMix;var T$o=Math.cos(T$I),T$N=Math.sin(T$I);T$$.resultMatrix.a=T$o*T$x-T$N*T$H,T$$.resultMatrix.b=T$o*T$g-T$N*T$w,T$$.resultMatrix.c=T$N*T$x+T$o*T$H,T$$.resultMatrix.d=T$N*T$g+T$o*T$w}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),T$$.resultMatrix.tx+=(this._temp[0]-T$$.resultMatrix.tx)*this.translateMix,T$$.resultMatrix.ty+=(this._temp[1]-T$$.resultMatrix.ty)*this.translateMix,T$$.updateChild()),0<this.scaleMix){var T$D=Math.sqrt(T$$.resultMatrix.a*T$$.resultMatrix.a+T$$.resultMatrix.c*T$$.resultMatrix.c),T$e=Math.sqrt(T$b*T$b+T$Z*T$Z),T$L=1e-5<T$D?(T$D+(T$e-T$D+this._data.offsetScaleX)*this.scaleMix)/T$D:0;T$$.resultMatrix.a*=T$L,T$$.resultMatrix.c*=T$L,T$D=Math.sqrt(T$$.resultMatrix.b*T$$.resultMatrix.b+T$$.resultMatrix.d*T$$.resultMatrix.d),T$e=Math.sqrt(T$u*T$u+T$E*T$E),T$L=1e-5<T$D?(T$D+(T$e-T$D+this._data.offsetScaleY)*this.scaleMix)/T$D:0,T$$.resultMatrix.b*=T$L,T$$.resultMatrix.d*=T$L}if(0<this.shearMix){T$g=T$$.resultMatrix.b,T$w=T$$.resultMatrix.d;var T$T=Math.atan2(T$w,T$g);(T$I=Math.atan2(T$E,T$u)-Math.atan2(T$Z,T$b)-(T$T-Math.atan2(T$$.resultMatrix.c,T$$.resultMatrix.a)))>Math.PI?T$I-=2*Math.PI:T$I<-Math.PI&&(T$I+=2*Math.PI),T$I=T$T+(T$I+this._data.offsetShearY*Math.PI/180)*this.shearMix,T$L=Math.sqrt(T$g*T$g+T$w*T$w),T$$.resultMatrix.b=Math.cos(T$I)*T$L,T$$.resultMatrix.d=Math.sin(T$I)*T$L}}},T$$}(),T$Q$=function(){function T$$(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return T$Z(T$$,"laya.ani.bone.TfConstraintData"),T$$}(),T$W$=function(){function T$$(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}T$Z(T$$,"laya.ani.bone.Transform");var T$b=T$$.prototype;return T$b.initData=function(T$$){null!=T$$.x&&(this.x=T$$.x),null!=T$$.y&&(this.y=T$$.y),null!=T$$.skX&&(this.skX=T$$.skX),null!=T$$.skY&&(this.skY=T$$.skY),null!=T$$.scX&&(this.scX=T$$.scX),null!=T$$.scY&&(this.scY=T$$.scY)},T$b.getMatrix=function(){var T$$;return(T$$=this.mMatrix?this.mMatrix:this.mMatrix=new T$V$).identity(),T$$.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(T$$,this.skewX*Math.PI/180,this.skewY*Math.PI/180),T$$.rotate(this.skX*Math.PI/180),T$$.translate(this.x,this.y),T$$},T$b.skew=function(T$$,T$b,T$u){var T$Z=Math.sin(T$u),T$E=Math.cos(T$u),T$r=Math.sin(T$b),T$F=Math.cos(T$b);return T$$.setTo(T$$.a*T$F-T$$.b*T$Z,T$$.a*T$r+T$$.b*T$E,T$$.c*T$F-T$$.d*T$Z,T$$.c*T$r+T$$.d*T$E,T$$.tx*T$F-T$$.ty*T$Z,T$$.tx*T$r+T$$.ty*T$E),T$$},T$$}(),T$z=function(){function T$$(){}return T$Z(T$$,"laya.ani.bone.UVTools"),T$$.getRelativeUV=function(T$$,T$b,T$u){var T$Z=T$$[0],T$E=T$$[2]-T$$[0],T$r=T$$[1],T$F=T$$[5]-T$$[1];T$u||(T$u=[]),T$u.length=T$b.length;var T$x,T$g=0;T$x=T$u.length;var T$H=1/T$E,T$w=1/T$F;for(T$g=0;T$g<T$x;T$g+=2)T$u[T$g]=(T$b[T$g]-T$Z)*T$H,T$u[T$g+1]=(T$b[T$g+1]-T$r)*T$w;return T$u},T$$.getAbsoluteUV=function(T$$,T$b,T$u){if(0==T$$[0]&&0==T$$[1]&&1==T$$[4]&&1==T$$[5])return T$u?(T$T.copyArray(T$u,T$b),T$u):T$b;var T$Z=T$$[0],T$E=T$$[2]-T$$[0],T$r=T$$[1],T$F=T$$[5]-T$$[1];T$u||(T$u=[]),T$u.length=T$b.length;var T$x,T$g=0;for(T$x=T$u.length,T$g=0;T$g<T$x;T$g+=2)T$u[T$g]=T$b[T$g]*T$E+T$Z,T$u[T$g+1]=T$b[T$g+1]*T$F+T$r;return T$u},T$$}(),T$p=function(){function T$$(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return T$Z(T$$,"laya.ani.KeyFramesContent"),T$$}(),T$q=function(){function T$w(){}return T$Z(T$w,"laya.ani.math.BezierLerp"),T$w.getBezierRate=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$w._getBezierParamKey(T$b,T$u,T$Z,T$E),T$F=100*T$r+T$$;if(T$w._bezierResultCache[T$F])return T$w._bezierResultCache[T$F];var T$x,T$g=T$w._getBezierPoints(T$b,T$u,T$Z,T$E,T$r),T$H=0;for(T$x=T$g.length,T$H=0;T$H<T$x;T$H+=2)if(T$$<=T$g[T$H])return T$w._bezierResultCache[T$F]=T$g[T$H+1],T$g[T$H+1];return T$w._bezierResultCache[T$F]=1},T$w._getBezierParamKey=function(T$$,T$b,T$u,T$Z){return 100*(100*(100*(100*T$$+T$b)+T$u)+T$Z)},T$w._getBezierPoints=function(T$$,T$b,T$u,T$Z,T$E){return T$w._bezierPointsCache[T$E]?T$w._bezierPointsCache[T$E]:(T$r=[0,0,T$$,T$b,T$u,T$Z,1,1],T$F=(new T$x).getBezierPoints(T$r,100,3),T$w._bezierPointsCache[T$E]=T$F);var T$r,T$F},T$w._bezierResultCache={},T$w._bezierPointsCache={},T$w}(),T$a=function(T$$){function T$b(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,T$b.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}T$Z(T$b,"laya.ani.AnimationPlayer",T$E);var T$u=T$b.prototype;return T$E$.imps(T$u,{"laya.resource.IDestroy":!0}),T$u._onTempletLoadedComputeFullKeyframeIndices=function(T$$,T$b,T$u){this._templet===T$u&&this._cachePlayRate===T$$&&this._cacheFrameRate===T$b&&this._computeFullKeyframeIndices()},T$u._computeFullKeyframeIndices=function(){for(var T$$=this._fullFrames=[],T$b=this._templet,T$u=this._cacheFrameRateInterval*this._cachePlayRate,T$Z=0,T$E=T$b.getAnimationCount();T$Z<T$E;T$Z++){for(var T$r=[],T$F=0,T$x=T$b.getAnimation(T$Z).nodes.length;T$F<T$x;T$F++){for(var T$g=T$b.getAnimation(T$Z).nodes[T$F],T$H=Math.floor(T$g.playTime/T$u+.01),T$w=new Uint16Array(T$H+1),T$I=-1,T$o=0,T$N=T$g.keyFrame.length;T$o<T$N;T$o++){var T$D=T$g.keyFrame[T$o],T$e=T$D.startTime,T$L=T$e+T$D.duration+T$u;do{for(var T$T=Math.floor(T$e/T$u+.5),T$_=T$I+1;T$_<T$T;T$_++)T$w[T$_]=T$o;T$w[T$I=T$T]=T$o,T$e+=T$u}while(T$e<=T$L)}T$r.push(T$w)}T$$.push(T$r)}},T$u._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},T$u._calculatePlayDuration=function(){if(0!==this.state){var T$$=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=T$$),this._playEnd>T$$&&(this._playEnd=T$$),this._playDuration=this._playEnd-this._playStart}},T$u._setPlayParams=function(T$$,T$b){this._currentTime=T$$,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/T$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*T$b},T$u._setPlayParamsWhenStop=function(T$$,T$b){this._currentTime=T$$,this._currentKeyframeIndex=Math.max(Math.floor(T$$/T$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*T$b,this._currentAnimationClipIndex=-1},T$u._update=function(T$$){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var T$b=this._cacheFrameRateInterval*this._cachePlayRate,T$u=0;this._startUpdateLoopCount!==T$D.loopCount&&(T$u=T$$*this.playbackRate,this._elapsedPlaybackTime+=T$u);var T$Z=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=T$Z)return this._setPlayParamsWhenStop(T$Z,T$b),void this.event("stopped");if(T$u+=this._currentTime,0<T$Z)if(T$Z<=T$u)do{if(T$u-=T$Z,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(T$Z,T$b),this._stopWhenCircleFinish=!1,void this.event("stopped");T$u<T$Z&&(this._setPlayParams(T$u,T$b),this.event("complete"))}while(T$Z<=T$u);else this._setPlayParams(T$u,T$b);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(T$Z,T$b),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},T$u._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},T$u.play=function(T$$,T$b,T$u,T$Z,T$E){if(void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=1),void 0===T$u&&(T$u=2147483647),void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(T$u<0||T$Z<0||T$E<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==T$E&&T$E<T$Z)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=T$b,this._overallDuration=T$u,this._playStart=T$Z,this._playEnd=T$E,this._paused=!1,this._currentAnimationClipIndex=T$$,this._currentKeyframeIndex=0,this._startUpdateLoopCount=T$D.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},T$u.playByFrame=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$$&&(T$$=0),void 0===T$b&&(T$b=1),void 0===T$u&&(T$u=2147483647),void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0),void 0===T$r&&(T$r=30);var T$F=1e3/T$r;this.play(T$$,T$b,T$u,T$Z*T$F,T$E*T$F)},T$u.stop=function(T$$){void 0===T$$&&(T$$=!0),T$$?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},T$r(0,T$u,"playEnd",function(){return this._playEnd}),T$r(0,T$u,"templet",function(){return this._templet},function(T$$){0===!this.state&&this.stop(!0),this._templet!==T$$&&((this._templet=T$$).loaded?this._computeFullKeyframeIndices():T$$.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),T$r(0,T$u,"playStart",function(){return this._playStart}),T$r(0,T$u,"playDuration",function(){return this._playDuration}),T$r(0,T$u,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),T$r(0,T$u,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),T$r(0,T$u,"overallDuration",function(){return this._overallDuration}),T$r(0,T$u,"currentFrameTime",function(){return this._currentFrameTime}),T$r(0,T$u,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),T$r(0,T$u,"currentPlayTime",function(){return this._currentTime+this._playStart}),T$r(0,T$u,"cachePlayRate",function(){return this._cachePlayRate},function(T$$){this._cachePlayRate!==T$$&&(this._cachePlayRate=T$$,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[T$$,this._cacheFrameRate])))}),T$r(0,T$u,"cacheFrameRate",function(){return this._cacheFrameRate},function(T$$){this._cacheFrameRate!==T$$&&(this._cacheFrameRate=T$$,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,T$$])))}),T$r(0,T$u,"currentTime",null,function(T$$){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(T$$<this._playStart||T$$>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=T$D.loopCount;var T$b=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=T$$,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/T$b),0),this._currentFrameTime=this._currentKeyframeIndex*T$b}}),T$r(0,T$u,"paused",function(){return this._paused},function(T$$){(this._paused=T$$)&&this.event("paused")}),T$r(0,T$u,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),T$r(0,T$u,"destroyed",function(){return this._destroyed}),T$b}(),T$Y=function(T$$){function T$b(){T$b.__super.call(this),T$L.isConchNode&&(this.drawSkin=function(T$$){T$$.transform||(T$$.transform=T$V$.EMPTY),this._addCmd([T$$]),this.setSkinMesh&&this.setSkinMesh(T$$._ps,T$$.mVBData,T$$.mEleNum,0,T$$.mTexture,T$$.transform)})}return T$Z(T$b,"laya.ani.GraphicsAni",T$F),T$b.prototype.drawSkin=function(T$$){var T$b=[T$$];this._saveToCmd(T$L._context._drawSkin,T$b)},T$b.create=function(){return T$b._caches.pop()||new T$b},T$b.recycle=function(T$$){T$$.clear(),T$b._caches.push(T$$)},T$b._caches=[],T$b}(),T$k=function(T$$){function T$_(){this._aniMap={},this.unfixedLastAniIndex=-1,T$_.__super.call(this),this._anis=new Array}T$Z(T$_,"laya.ani.AnimationTemplet",T$w);var T$b=T$_.prototype;return T$b.parse=function(T$$){var T$b=new T$O$(T$$);this._aniVersion=T$b.readUTFString(),T$y.parse(this,T$b)},T$b._calculateKeyFrame=function(T$$,T$b,T$u){var T$Z=T$$.keyFrame;T$Z[T$b]=T$Z[0];for(var T$E=0;T$E<T$b;T$E++){var T$r=T$Z[T$E];T$r.nextData=0===T$r.duration?T$r.data:T$Z[T$E+1].data}T$Z.length--},T$b.onAsynLoaded=function(T$$,T$b,T$u){var T$Z=new T$O$(T$b);switch(this._aniVersion=T$Z.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":T$S.parse(this,T$Z);break;default:T$y.parse(this,T$Z)}this._endLoaded()},T$b.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},T$b.getAnimationCount=function(){return this._anis.length},T$b.getAnimation=function(T$$){return this._anis[T$$]},T$b.getAniDuration=function(T$$){return this._anis[T$$].playTime},T$b.getNodes=function(T$$){return this._anis[T$$].nodes},T$b.getNodeIndexWithName=function(T$$,T$b){return this._anis[T$$].bone3DMap[T$b]},T$b.getNodeCount=function(T$$){return this._anis[T$$].nodes.length},T$b.getTotalkeyframesLength=function(T$$){return this._anis[T$$].totalKeyframeDatasLength},T$b.getPublicExtData=function(){return this._publicExtData},T$b.getAnimationDataWithCache=function(T$$,T$b,T$u,T$Z){var T$E=T$b[T$u];if(T$E){var T$r=T$E[T$$];return T$r?T$r[T$Z]:null}return null},T$b.setAnimationDataWithCache=function(T$$,T$b,T$u,T$Z,T$E){var T$r=T$b[T$u]||(T$b[T$u]={});(T$r[T$$]||(T$r[T$$]=[]))[T$Z]=T$E},T$b.getOriginalData=function(T$$,T$b,T$u,T$Z,T$E){for(var T$r=this._anis[T$$].nodes,T$F=0,T$x=0,T$g=T$r.length,T$H=0;T$x<T$g;T$x++){var T$w,T$I=T$r[T$x];T$w=T$I.keyFrame[T$u[T$x][T$Z]],T$I.dataOffset=T$H;var T$o=T$E-T$w.startTime,T$N=T$I.lerpType;if(T$N)switch(T$N){case 0:case 1:for(T$F=0;T$F<T$I.keyframeWidth;)T$F+=T$I.interpolationMethod[T$F](T$I,T$F,T$b,T$H+T$F,T$w.data,T$o,null,T$w.duration,T$w.nextData);break;case 2:var T$D=T$w.interpolationData,T$e=T$D.length,T$L=0;for(T$F=0;T$F<T$e;){var T$T=T$D[T$F];switch(T$T){case 6:case 7:T$F+=T$_.interpolation[T$T](T$I,T$L,T$b,T$H+T$L,T$w.data,T$o,null,T$w.duration,T$w.nextData,T$D,T$F+1);break;default:T$F+=T$_.interpolation[T$T](T$I,T$L,T$b,T$H+T$L,T$w.data,T$o,null,T$w.duration,T$w.nextData)}T$L++}}else for(T$F=0;T$F<T$I.keyframeWidth;)T$F+=T$I.interpolationMethod[T$F](T$I,T$F,T$b,T$H+T$F,T$w.data,T$o,null,T$w.duration,T$w.nextData);T$H+=T$I.keyframeWidth}},T$b.getNodesCurrentFrameIndex=function(T$$,T$b){var T$u=this._anis[T$$].nodes;T$$!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(T$u.length),this.unfixedCurrentTimes=new Float32Array(T$u.length),this.unfixedLastAniIndex=T$$);for(var T$Z=0,T$E=T$u.length;T$Z<T$E;T$Z++){var T$r=T$u[T$Z];for(T$b<this.unfixedCurrentTimes[T$Z]&&(this.unfixedCurrentFrameIndexes[T$Z]=0),this.unfixedCurrentTimes[T$Z]=T$b;this.unfixedCurrentFrameIndexes[T$Z]<T$r.keyFrame.length&&!(T$r.keyFrame[this.unfixedCurrentFrameIndexes[T$Z]].startTime>this.unfixedCurrentTimes[T$Z]);)this.unfixedCurrentFrameIndexes[T$Z]++;this.unfixedCurrentFrameIndexes[T$Z]--}return this.unfixedCurrentFrameIndexes},T$b.getOriginalDataUnfixedRate=function(T$$,T$b,T$u){var T$Z=this._anis[T$$].nodes;T$$!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(T$Z.length),this.unfixedCurrentTimes=new Float32Array(T$Z.length),this.unfixedKeyframes=T$e(T$Z.length),this.unfixedLastAniIndex=T$$);for(var T$E=0,T$r=0,T$F=T$Z.length,T$x=0;T$r<T$F;T$r++){var T$g=T$Z[T$r];for(T$u<this.unfixedCurrentTimes[T$r]&&(this.unfixedCurrentFrameIndexes[T$r]=0),this.unfixedCurrentTimes[T$r]=T$u;this.unfixedCurrentFrameIndexes[T$r]<T$g.keyFrame.length&&!(T$g.keyFrame[this.unfixedCurrentFrameIndexes[T$r]].startTime>this.unfixedCurrentTimes[T$r]);)this.unfixedKeyframes[T$r]=T$g.keyFrame[this.unfixedCurrentFrameIndexes[T$r]],this.unfixedCurrentFrameIndexes[T$r]++;var T$H=this.unfixedKeyframes[T$r];T$g.dataOffset=T$x;var T$w=T$u-T$H.startTime;if(T$g.lerpType)switch(T$g.lerpType){case 0:case 1:for(T$E=0;T$E<T$g.keyframeWidth;)T$E+=T$g.interpolationMethod[T$E](T$g,T$E,T$b,T$x+T$E,T$H.data,T$w,null,T$H.duration,T$H.nextData);break;case 2:var T$I=T$H.interpolationData,T$o=T$I.length,T$N=0;for(T$E=0;T$E<T$o;){var T$D=T$I[T$E];switch(T$D){case 6:case 7:T$E+=T$_.interpolation[T$D](T$g,T$N,T$b,T$x+T$N,T$H.data,T$w,null,T$H.duration,T$H.nextData,T$I,T$E+1);break;default:T$E+=T$_.interpolation[T$D](T$g,T$N,T$b,T$x+T$N,T$H.data,T$w,null,T$H.duration,T$H.nextData)}T$N++}}else for(T$E=0;T$E<T$g.keyframeWidth;)T$E+=T$g.interpolationMethod[T$E](T$g,T$E,T$b,T$x+T$E,T$H.data,T$w,null,T$H.duration,T$H.nextData);T$x+=T$g.keyframeWidth}},T$_._LinearInterpolation_0=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){var T$w=0===T$x?0:T$r/T$x;return T$u[T$Z]=(1-T$w)*T$E[T$b]+T$w*T$g[T$b],1},T$_._QuaternionInterpolation_1=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){var T$w=0===T$x?0:T$r/T$x;return T$o.slerpQuaternionArray(T$E,T$b,T$g,T$b,T$w,T$u,T$Z),4},T$_._AngleInterpolation_2=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){return 0},T$_._RadiansInterpolation_3=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){return 0},T$_._Matrix4x4Interpolation_4=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){for(var T$w=0;T$w<16;T$w++,T$b++)T$u[T$Z+T$w]=T$E[T$b]+T$r*T$F[T$b];return 16},T$_._NoInterpolation_5=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H){return T$u[T$Z]=T$E[T$b],1},T$_._BezierInterpolation_6=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w){return void 0===T$w&&(T$w=0),T$u[T$Z]=T$E[T$b]+(T$g[T$b]-T$E[T$b])*T$q.getBezierRate(T$r/T$x,T$H[T$w],T$H[T$w+1],T$H[T$w+2],T$H[T$w+3]),5},T$_._BezierInterpolation_7=function(T$$,T$b,T$u,T$Z,T$E,T$r,T$F,T$x,T$g,T$H,T$w){return void 0===T$w&&(T$w=0),T$u[T$Z]=T$H[T$w+4]+T$H[T$w+5]*T$q.getBezierRate((.001*T$r+T$H[T$w+6])/T$H[T$w+7],T$H[T$w],T$H[T$w+1],T$H[T$w+2],T$H[T$w+3]),9},T$_.load=function(T$$){return T$E$.loader.create(T$$,null,null,T$_)},T$_.interpolation=[T$_._LinearInterpolation_0,T$_._QuaternionInterpolation_1,T$_._AngleInterpolation_2,T$_._RadiansInterpolation_3,T$_._Matrix4x4Interpolation_4,T$_._NoInterpolation_5,T$_._BezierInterpolation_6,T$_._BezierInterpolation_7],T$_}(),T$t=function(T$b){function T$u(T$$,T$b){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,T$u.__super.call(this),void 0===T$b&&(T$b=0),T$$&&this.init(T$$,T$b)}T$Z(T$u,"laya.ani.bone.Skeleton",T$b);var T$$=T$u.prototype;return T$$.init=function(T$$,T$b){void 0===T$b&&(T$b=0);var T$u,T$Z,T$E,T$r=0,T$F=0;if(1==T$b)for(this._graphicsCache=[],T$r=0,T$F=T$$.getAnimationCount();T$r<T$F;T$r++)this._graphicsCache.push([]);if(this._yReverseMatrix=T$$.yReverseMatrix,this._aniMode=T$b,this._templet=T$$,this._player=new T$a,this._player.cacheFrameRate=T$$.rate,this._player.templet=T$$,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=T$$.mBoneArr,this._rootBone=T$$.mRootBone,this._aniSectionDic=T$$.aniSectionDic,0<T$$.ikArr.length)for(this._ikArr=[],T$r=0,T$F=T$$.ikArr.length;T$r<T$F;T$r++)this._ikArr.push(new T$_(T$$.ikArr[T$r],this._boneList));if(0<T$$.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),T$r=0,T$F=T$$.pathArr.length;T$r<T$F;T$r++)T$u=T$$.pathArr[T$r],T$Z=new T$P(T$u,this._boneList),(T$E=this._boneSlotDic[T$u.name])&&((T$Z=new T$P(T$u,this._boneList)).target=T$E),this._pathDic[T$u.name]=T$Z;if(0<T$$.tfArr.length)for(this._tfArr=[],T$r=0,T$F=T$$.tfArr.length;T$r<T$F;T$r++)this._tfArr.push(new T$i(T$$.tfArr[T$r],this._boneList));if(0<T$$.skinDataArray.length){var T$x=this._templet.skinDataArray[this._skinIndex];this._skinName=T$x.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},T$$.load=function(T$$,T$b,T$u){},T$$._onLoaded=function(){},T$$._parseComplete=function(){var T$$=T$C.TEMPLET_DICTIONARY[this._aniPath];T$$&&(this.init(T$$,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},T$$._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},T$$._onPlay=function(){this.event("played")},T$$._onStop=function(){var T$$,T$b=this._templet.eventAniArr[this._aniClipIndex];if(T$b&&this._eventIndex<T$b.length)for(;this._eventIndex<T$b.length;this._eventIndex++)(T$$=T$b[this._eventIndex]).time>=this._player.playStart&&T$$.time<=this._player.playEnd&&this.event("label",T$$);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},T$$._onPause=function(){this.event("paused")},T$$._parseSrcBoneMatrix=function(){var T$$=0,T$b=0;for(T$b=this._templet.srcBoneMatrixArr.length,T$$=0;T$$<T$b;T$$++)this._boneMatrixArray.push(new T$V$);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var T$u,T$Z,T$E=this._templet.boneSlotArray;for(T$$=0,T$b=T$E.length;T$$<T$b;T$$++)T$u=T$E[T$$],null==(T$Z=this._bindBoneBoneSlotDic[T$u.parent])&&(this._bindBoneBoneSlotDic[T$u.parent]=T$Z=[]),this._boneSlotDic[T$u.name]=T$u=T$u.copy(),T$Z.push(T$u),this._boneSlotArray.push(T$u)}},T$$._emitMissedEvents=function(T$$,T$b,T$u){void 0===T$u&&(T$u=0);var T$Z=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(T$Z){var T$E,T$r,T$F=0;for(T$E=T$Z.length,T$F=T$u;T$F<T$E;T$F++)(T$r=T$Z[T$F]).time>=this._player.playStart&&T$r.time<=this._player.playEnd&&this.event("label",T$r)}},T$$._update=function(T$$){if(void 0===T$$&&(T$$=!0),!(this._pause||T$$&&this._indexControl)){var T$b=this.timer.currTimer,T$u=this._player.currentKeyframeIndex,T$Z=T$b-this._lastTime;if(T$$?this._player._update(T$Z):T$u=-1,this._lastTime=T$b,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<T$Z&&this._clipIndex==T$u&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var T$E;this._lastUpdateAniClipIndex=this._aniClipIndex,T$u>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var T$r,T$F=this._templet.eventAniArr[this._aniClipIndex];if(T$F&&this._eventIndex<T$F.length&&((T$E=T$F[this._eventIndex]).time>=this._player.playStart&&T$E.time<=this._player.playEnd?this._player.currentPlayTime>=T$E.time&&(this.event("label",T$E),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(T$r=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=T$r&&(this.graphics=T$r));var T$x=0,T$g=0;for(T$g=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,T$g-1)&&0<T$g;)T$g--;if(T$g<this._clipIndex)for(T$x=T$g;T$x<this._clipIndex;T$x++)this._createGraphics(T$x)}else if(1==this._aniMode){if(T$r=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=T$r&&(this.graphics=T$r));for(T$g=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,T$g-1)&&0<T$g;)T$g--;if(T$g<this._clipIndex)for(T$x=T$g;T$x<this._clipIndex;T$x++)this._createGraphics(T$x)}this._createGraphics()}}},T$$._createGraphics=function(T$$){void 0===T$$&&(T$$=-1),-1==T$$&&(T$$=this._clipIndex);var T$b,T$u,T$Z=T$$*this._player.cacheFrameRateInterval,T$E=this._templet.drawOrderAniArr[this._aniClipIndex];if(T$E&&0<T$E.length)for(this._drawOrderIndex=0,T$b=T$E[this._drawOrderIndex];T$Z>=T$b.time&&(this._drawOrder=T$b.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=T$E.length));)T$b=T$E[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=T$Y.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=T$Y.create(),T$u=this.graphics;var T$r=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],T$$,T$Z);var T$F,T$x,T$g,T$H,T$w=this._aniSectionDic[this._aniClipIndex],T$I=0,T$o=0,T$N=0,T$D=0,T$e=0,T$L=this._templet.srcBoneMatrixArr.length;for(T$e=T$w[T$o=0];T$o<T$L;T$o++)T$H=this._boneList[T$o],T$g=this._templet.srcBoneMatrixArr[T$o],T$H.resultTransform.scX=T$g.scX*this._curOriginalData[T$I++],T$H.resultTransform.skX=T$g.skX+this._curOriginalData[T$I++],T$H.resultTransform.skY=T$g.skY+this._curOriginalData[T$I++],T$H.resultTransform.scY=T$g.scY*this._curOriginalData[T$I++],T$H.resultTransform.x=T$g.x+this._curOriginalData[T$I++],T$H.resultTransform.y=T$g.y+this._curOriginalData[T$I++],8===this._templet.tMatrixDataLen&&(T$H.resultTransform.skewX=T$g.skewX+this._curOriginalData[T$I++],T$H.resultTransform.skewY=T$g.skewY+this._curOriginalData[T$I++]);var T$T,T$_={},T$y={};for(T$e+=T$w[1];T$o<T$e;T$o++)T$_[(T$T=T$r[T$o]).name]=this._curOriginalData[T$I++],T$y[T$T.name]=this._curOriginalData[T$I++],this._curOriginalData[T$I++],this._curOriginalData[T$I++],this._curOriginalData[T$I++],this._curOriginalData[T$I++];var T$S,T$P,T$i={},T$z={};for(T$e+=T$w[2];T$o<T$e;T$o++)T$i[(T$T=T$r[T$o]).name]=this._curOriginalData[T$I++],T$z[T$T.name]=this._curOriginalData[T$I++],this._curOriginalData[T$I++],this._curOriginalData[T$I++],this._curOriginalData[T$I++],this._curOriginalData[T$I++];if(this._pathDic)for(T$e+=T$w[3];T$o<T$e;T$o++){if(T$T=T$r[T$o],T$S=this._pathDic[T$T.name])switch(new T$O$(T$T.extenData).getByte()){case 1:T$S.position=this._curOriginalData[T$I++];break;case 2:T$S.spacing=this._curOriginalData[T$I++];break;case 3:T$S.rotateMix=this._curOriginalData[T$I++],T$S.translateMix=this._curOriginalData[T$I++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(T$V$.TEMP.identity()),this._ikArr)for(T$o=0,T$e=this._ikArr.length;T$o<T$e;T$o++)T$P=this._ikArr[T$o],T$i.hasOwnProperty(T$P.name)&&(T$P.bendDirection=T$i[T$P.name]),T$z.hasOwnProperty(T$P.name)&&(T$P.mix=T$z[T$P.name]),T$P.apply();if(this._pathDic)for(var T$q in this._pathDic)(T$S=this._pathDic[T$q]).apply(this._boneList,T$u);if(this._tfArr)for(T$o=0,T$D=this._tfArr.length;T$o<T$D;T$o++)this._tfArr[T$o].apply();for(T$o=0,T$D=this._boneList.length;T$o<T$D;T$o++)if(T$H=this._boneList[T$o],T$x=this._bindBoneBoneSlotDic[T$H.name],T$H.resultMatrix.copyTo(this._boneMatrixArray[T$o]),T$x)for(T$N=0,T$e=T$x.length;T$N<T$e;T$N++)(T$F=T$x[T$N])&&T$F.setParentMatrix(T$H.resultMatrix);var T$a,T$t,T$C,T$K,T$O={},T$V=this._templet.deformAniArr;if(T$V&&0<T$V.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,T$o=0,T$e=this._boneSlotArray.length;T$o<T$e;T$o++)(T$F=this._boneSlotArray[T$o]).deformData=null;var T$v,T$p=T$V[this._aniClipIndex];for(T$v in T$a=T$p.default,this._setDeform(T$a,T$O,this._boneSlotArray,T$Z),T$p)"default"!=T$v&&T$v!=this._skinName&&(T$a=T$p[T$v],this._setDeform(T$a,T$O,this._boneSlotArray,T$Z));T$a=T$p[this._skinName],this._setDeform(T$a,T$O,this._boneSlotArray,T$Z)}if(this._drawOrder)for(T$o=0,T$e=this._drawOrder.length;T$o<T$e;T$o++)T$t=T$_[(T$F=this._boneSlotArray[this._drawOrder[T$o]]).name],T$C=T$y[T$F.name],isNaN(T$C)||(T$u.save(),T$u.alpha(T$C)),isNaN(T$t)||-2==T$t||(this._templet.attachmentNames?T$F.showDisplayByName(this._templet.attachmentNames[T$t]):T$F.showDisplayByIndex(T$t)),T$O[this._drawOrder[T$o]]?(T$K=T$O[this._drawOrder[T$o]],T$F.currDisplayData&&T$K[T$F.currDisplayData.attachmentName]?T$F.deformData=T$K[T$F.currDisplayData.attachmentName]:T$F.deformData=null):T$F.deformData=null,isNaN(T$C)?T$F.draw(T$u,this._boneMatrixArray,2==this._aniMode):T$F.draw(T$u,this._boneMatrixArray,2==this._aniMode,T$C),isNaN(T$C)||T$u.restore();else for(T$o=0,T$e=this._boneSlotArray.length;T$o<T$e;T$o++)T$t=T$_[(T$F=this._boneSlotArray[T$o]).name],T$C=T$y[T$F.name],isNaN(T$C)||(T$u.save(),T$u.alpha(T$C)),isNaN(T$t)||-2==T$t||(this._templet.attachmentNames?T$F.showDisplayByName(this._templet.attachmentNames[T$t]):T$F.showDisplayByIndex(T$t)),T$O[T$o]?(T$K=T$O[T$o],T$F.currDisplayData&&T$K[T$F.currDisplayData.attachmentName]?T$F.deformData=T$K[T$F.currDisplayData.attachmentName]:T$F.deformData=null):T$F.deformData=null,isNaN(T$C)?T$F.draw(T$u,this._boneMatrixArray,2==this._aniMode):T$F.draw(T$u,this._boneMatrixArray,2==this._aniMode,T$C),isNaN(T$C)||T$u.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,T$$,T$u):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,T$$,T$u)},T$$._setDeform=function(T$$,T$b,T$u,T$Z){if(T$$){var T$E,T$r,T$F,T$x=0,T$g=0,T$H=0;if(T$$)for(T$x=0,T$g=T$$.deformSlotDataList.length;T$x<T$g;T$x++)for(T$E=T$$.deformSlotDataList[T$x],T$H=0;T$H<T$E.deformSlotDisplayList.length;T$H++)T$F=T$u[(T$r=T$E.deformSlotDisplayList[T$H]).slotIndex],T$r.apply(T$Z,T$F),T$b[T$r.slotIndex]||(T$b[T$r.slotIndex]={}),T$b[T$r.slotIndex][T$r.attachment]=T$r.deformData}},T$$.getAnimNum=function(){return this._templet.getAnimationCount()},T$$.getAniNameByIndex=function(T$$){return this._templet.getAniNameByIndex(T$$)},T$$.getSlotByName=function(T$$){return this._boneSlotDic[T$$]},T$$.showSkinByName=function(T$$,T$b){void 0===T$b&&(T$b=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(T$$),T$b)},T$$.showSkinByIndex=function(T$$,T$b){void 0===T$b&&(T$b=!0);for(var T$u=0;T$u<this._boneSlotArray.length;T$u++)this._boneSlotArray[T$u].showSlotData(null,T$b);if(this._templet.showSkinByIndex(this._boneSlotDic,T$$,T$b)){var T$Z=this._templet.skinDataArray[T$$];this._skinIndex=T$$,this._skinName=T$Z.name}this._clearCache()},T$$.showSlotSkinByIndex=function(T$$,T$b){if(0!=this._aniMode){var T$u=this.getSlotByName(T$$);T$u&&T$u.showDisplayByIndex(T$b),this._clearCache()}},T$$.showSlotSkinByName=function(T$$,T$b){if(0!=this._aniMode){var T$u=this.getSlotByName(T$$);T$u&&T$u.showDisplayByName(T$b),this._clearCache()}},T$$.replaceSlotSkinName=function(T$$,T$b,T$u){if(0!=this._aniMode){var T$Z=this.getSlotByName(T$$);T$Z&&T$Z.replaceDisplayByName(T$b,T$u),this._clearCache()}},T$$.replaceSlotSkinByIndex=function(T$$,T$b,T$u){if(0!=this._aniMode){var T$Z=this.getSlotByName(T$$);T$Z&&T$Z.replaceDisplayByIndex(T$b,T$u),this._clearCache()}},T$$.setSlotSkin=function(T$$,T$b){if(0!=this._aniMode){var T$u=this.getSlotByName(T$$);T$u&&T$u.replaceSkin(T$b),this._clearCache()}},T$$._clearCache=function(){if(1==this._aniMode)for(var T$$=0,T$b=this._graphicsCache.length;T$$<T$b;T$$++){for(var T$u=0,T$Z=this._graphicsCache[T$$].length;T$u<T$Z;T$u++){var T$E=this._graphicsCache[T$$][T$u];T$E!=this.graphics&&T$Y.recycle(T$E)}this._graphicsCache[T$$].length=0}},T$$.play=function(T$$,T$b,T$u,T$Z,T$E,T$r){void 0===T$u&&(T$u=!0),void 0===T$Z&&(T$Z=0),void 0===T$E&&(T$E=0),void 0===T$r&&(T$r=!0),this._indexControl=!1;var T$F=-1,T$x=NaN;if(T$x=T$b?2147483647:0,"string"==typeof T$$)for(var T$g=0,T$H=this._templet.getAnimationCount();T$g<T$H;T$g++){var T$w=this._templet.getAnimation(T$g);if(T$w&&T$$==T$w.name){T$F=T$g;break}}else T$F=T$$;-1<T$F&&T$F<this.getAnimNum()&&(this._aniClipIndex=T$F,(T$u||this._pause||this._currAniIndex!=T$F)&&(this._currAniIndex=T$F,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(T$F)),this._drawOrder=null,this._eventIndex=0,this._player.play(T$F,this._player.playbackRate,T$x,T$Z,T$E),T$r&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=T$I.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},T$$.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},T$$.playbackRate=function(T$$){this._player&&(this._player.playbackRate=T$$)},T$$.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},T$$.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=T$I.now(),this.timer.frameLoop(1,this,this._update,null,!0))},T$$._getGrahicsDataWithCache=function(T$$,T$b){return this._graphicsCache[T$$][T$b]},T$$._setGrahicsDataWithCache=function(T$$,T$b,T$u){this._graphicsCache[T$$][T$b]=T$u},T$$.destroy=function(T$$){void 0===T$$&&(T$$=!0),T$b.prototype.destroy.call(this,T$$),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},T$r(0,T$$,"url",function(){return this._aniPath},function(T$$){this.load(T$$)}),T$r(0,T$$,"index",function(){return this._index},function(T$$){this.player&&(this._index=T$$,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),T$r(0,T$$,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),T$r(0,T$$,"templet",function(){return this._templet}),T$r(0,T$$,"player",function(){return this._player}),T$u.useSimpleMeshInCanvas=!1,T$u}(T$r$),T$C=function(T$b){function T$E(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,T$E.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}T$Z(T$E,"laya.ani.bone.Templet",T$b);var T$$=T$E.prototype;return T$$.getLoadList=function(){return this._loadList},T$$.loadAni=function(T$$){this._skBufferUrl=T$$,T$E$.loader.load(T$$,T$g.create(this,this.onComplete),null,"arraybuffer")},T$$.onComplete=function(T$$){if(this._isDestroyed)this.destroy();else{var T$b=T$H.getRes(this._skBufferUrl);T$b?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,T$b)):this.event("error","load failed:"+this._skBufferUrl)}},T$$.parseData=function(T$$,T$b,T$u){void 0===T$u&&(T$u=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=T$$,this._mainTexture&&T$L.isWebGL&&T$$.bitmap&&(T$$.bitmap.enableMerageInAtlas=!1),this._rate=T$u,this.parse(T$b)},T$$.buildArmature=function(T$$){return void 0===T$$&&(T$$=0),new T$t(this,T$$)},T$$.parse=function(T$$){T$b.prototype.parse.call(this,T$$),this._endLoaded(),this._aniVersion!=T$E.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+T$E.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},T$$._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var T$$=0;this._loadList=[];var T$b,T$u=new T$O$(this.getPublicExtData()),T$Z=0,T$E=0,T$r=0,T$F=T$u.getInt32(),T$x=T$u.readUTFString(),T$g=T$x.split("\n");for(T$$=0;T$$<T$F;T$$++)T$b=this._path+T$g[2*T$$],T$x=T$g[2*T$$+1],T$u.getFloat32(),T$u.getFloat32(),T$Z=T$u.getFloat32(),T$E=T$u.getFloat32(),T$r=T$u.getFloat32(),isNaN(T$r)?0:T$r,T$r=T$u.getFloat32(),isNaN(T$r)?0:T$r,T$r=T$u.getFloat32(),isNaN(T$r)?T$Z:T$r,T$r=T$u.getFloat32(),isNaN(T$r)?T$E:T$r,-1==this._loadList.indexOf(T$b)&&this._loadList.push(T$b);this.event("inited",this)}},T$$._textureComplete=function(){for(var T$$,T$b,T$u=0,T$Z=this._loadList.length;T$u<T$Z;T$u++)T$b=this._loadList[T$u],T$$=this._textureDic[T$b]=T$H.getRes(T$b),T$L.isWebGL&&T$$&&T$$.bitmap&&(T$$.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},T$$._parsePublicExtData=function(){var T$$=0,T$b=0,T$u=0,T$Z=0,T$E=0;for(T$$=0,T$E=this.getAnimationCount();T$$<T$E;T$$++)this._graphicsCache.push([]);var T$r;T$r="Dragon"!=this._aniClassName;var T$F,T$x,T$g=new T$O$(this.getPublicExtData()),T$H=0,T$w=0,T$I=0,T$o=0,T$N=0,T$D=0,T$e=0,T$L=0,T$T=0,T$_=T$g.getInt32(),T$y=T$g.readUTFString(),T$S=T$y.split("\n");for(T$$=0;T$$<T$_;T$$++){if(T$F=this._mainTexture,T$x=this._path+T$S[2*T$$],T$y=T$S[2*T$$+1],null==this._mainTexture&&(T$F=this._textureDic[T$x]),!T$F)return this.event("error",this),void(this.isParseFail=!0);T$H=T$g.getFloat32(),T$w=T$g.getFloat32(),T$I=T$g.getFloat32(),T$o=T$g.getFloat32(),T$T=T$g.getFloat32(),T$N=isNaN(T$T)?0:T$T,T$T=T$g.getFloat32(),T$D=isNaN(T$T)?0:T$T,T$T=T$g.getFloat32(),T$e=isNaN(T$T)?T$I:T$T,T$T=T$g.getFloat32(),T$L=isNaN(T$T)?T$o:T$T,this.subTextureDic[T$y]=T$v$.create(T$F,T$H,T$w,T$I,T$o,-T$N,-T$D,T$e,T$L),T$F.alphaTexture&&(this.subTextureDic[T$y].alphaTexture=T$v$.create(T$F.alphaTexture,T$H,T$w,T$I,T$o,-T$N,-T$D,T$e,T$L))}this._mainTexture=T$F;var T$P,T$i,T$z,T$q,T$a,T$t=T$g.getUint16();for(T$$=0;T$$<T$t;T$$++)(T$P=[]).push(T$g.getUint16()),T$P.push(T$g.getUint16()),T$P.push(T$g.getUint16()),T$P.push(T$g.getUint16()),this.aniSectionDic[T$$]=T$P;var T$C,T$K=T$g.getInt16(),T$O={};for(T$$=0;T$$<T$K;T$$++)T$i=new T$p$,0==T$$?T$C=T$i:T$i.root=T$C,T$i.d=T$r?-1:1,T$q=T$g.readUTFString(),T$a=T$g.readUTFString(),T$i.length=T$g.getFloat32(),1==T$g.getByte()&&(T$i.inheritRotation=!1),1==T$g.getByte()&&(T$i.inheritScale=!1),T$i.name=T$q,T$a&&((T$z=T$O[T$a])?T$z.addChild(T$i):this.mRootBone=T$i),T$O[T$q]=T$i,this.mBoneArr.push(T$i);this.tMatrixDataLen=T$g.getUint16();var T$V,T$v,T$p=T$g.getUint16(),T$Y=Math.floor(T$p/this.tMatrixDataLen),T$k=this.srcBoneMatrixArr;for(T$$=0;T$$<T$Y;T$$++)(T$V=new T$W$).scX=T$g.getFloat32(),T$V.skX=T$g.getFloat32(),T$V.skY=T$g.getFloat32(),T$V.scY=T$g.getFloat32(),T$V.x=T$g.getFloat32(),T$V.y=T$g.getFloat32(),8===this.tMatrixDataLen&&(T$V.skewX=T$g.getFloat32(),T$V.skewY=T$g.getFloat32()),T$k.push(T$V),(T$i=this.mBoneArr[T$$]).transform=T$V;var T$M,T$l=T$g.getUint16(),T$X=0;for(T$$=0;T$$<T$l;T$$++){for(T$v=new T$m$,T$X=T$g.getUint16(),T$b=0;T$b<T$X;T$b++)T$v.boneNames.push(T$g.readUTFString()),T$v.boneIndexs.push(T$g.getInt16());T$v.name=T$g.readUTFString(),T$v.targetBoneName=T$g.readUTFString(),T$v.targetBoneIndex=T$g.getInt16(),T$v.bendDirection=T$g.getFloat32(),T$v.mix=T$g.getFloat32(),T$v.isSpine=T$r,this.ikArr.push(T$v)}var T$s,T$m=T$g.getUint16(),T$n=0;for(T$$=0;T$$<T$m;T$$++){for(T$M=new T$Q$,T$n=T$g.getUint16(),T$b=0;T$b<T$n;T$b++)T$M.boneIndexs.push(T$g.getInt16());T$M.name=T$g.getUTFString(),T$M.targetIndex=T$g.getInt16(),T$M.rotateMix=T$g.getFloat32(),T$M.translateMix=T$g.getFloat32(),T$M.scaleMix=T$g.getFloat32(),T$M.shearMix=T$g.getFloat32(),T$M.offsetRotation=T$g.getFloat32(),T$M.offsetX=T$g.getFloat32(),T$M.offsetY=T$g.getFloat32(),T$M.offsetScaleX=T$g.getFloat32(),T$M.offsetScaleY=T$g.getFloat32(),T$M.offsetShearY=T$g.getFloat32(),this.tfArr.push(T$M)}var T$c=T$g.getUint16(),T$J=0;for(T$$=0;T$$<T$c;T$$++){for((T$s=new T$n$).name=T$g.readUTFString(),T$J=T$g.getUint16(),T$b=0;T$b<T$J;T$b++)T$s.bones.push(T$g.getInt16());T$s.target=T$g.readUTFString(),T$s.positionMode=T$g.readUTFString(),T$s.spacingMode=T$g.readUTFString(),T$s.rotateMode=T$g.readUTFString(),T$s.offsetRotation=T$g.getFloat32(),T$s.position=T$g.getFloat32(),T$s.spacing=T$g.getFloat32(),T$s.rotateMix=T$g.getFloat32(),T$s.translateMix=T$g.getFloat32(),this.pathArr.push(T$s)}var T$f,T$Q,T$W,T$G,T$A,T$j=0,T$h=0,T$d=0,T$U=NaN,T$B=0,T$R=T$g.getInt16();for(T$$=0;T$$<T$R;T$$++){var T$$$=T$g.getUint8(),T$b$={};this.deformAniArr.push(T$b$);for(var T$u$=0;T$u$<T$$$;T$u$++)for((T$f=new T$k$).skinName=T$g.getUTFString(),T$b$[T$f.skinName]=T$f,T$j=T$g.getInt16(),T$b=0;T$b<T$j;T$b++)for(T$Q=new T$M$,T$f.deformSlotDataList.push(T$Q),T$h=T$g.getInt16(),T$u=0;T$u<T$h;T$u++)for(T$W=new T$l$,T$Q.deformSlotDisplayList.push(T$W),T$W.slotIndex=T$g.getInt16(),T$W.attachment=T$g.getUTFString(),T$d=T$g.getInt16(),T$Z=0;T$Z<T$d;T$Z++)for(1==T$g.getByte()?T$W.tweenKeyList.push(!0):T$W.tweenKeyList.push(!1),T$U=T$g.getFloat32(),T$W.timeList.push(T$U),T$G=[],T$W.vectices.push(T$G),T$B=T$g.getInt16(),T$E=0;T$E<T$B;T$E++)T$G.push(T$g.getFloat32())}var T$Z$,T$E$,T$r$=T$g.getInt16(),T$F$=0,T$x$=0;for(T$$=0;T$$<T$r$;T$$++){for(T$F$=T$g.getInt16(),T$A=[],T$b=0;T$b<T$F$;T$b++){for((T$Z$=new T$X$).time=T$g.getFloat32(),T$x$=T$g.getInt16(),T$u=0;T$u<T$x$;T$u++)T$Z$.drawOrder.push(T$g.getInt16());T$A.push(T$Z$)}this.drawOrderAniArr.push(T$A)}var T$g$,T$H$=T$g.getInt16(),T$w$=0;for(T$$=0;T$$<T$H$;T$$++){for(T$w$=T$g.getInt16(),T$E$=[],T$b=0;T$b<T$w$;T$b++)(T$g$=new T$s$).name=T$g.getUTFString(),T$g$.intValue=T$g.getInt32(),T$g$.floatValue=T$g.getFloat32(),T$g$.stringValue=T$g.getUTFString(),T$g$.time=T$g.getFloat32(),T$E$.push(T$g$);this.eventAniArr.push(T$E$)}var T$I$=T$g.getInt16();if(0<T$I$)for(this.attachmentNames=[],T$$=0;T$$<T$I$;T$$++)this.attachmentNames.push(T$g.getUTFString());var T$o$,T$N$,T$D$=T$g.getInt16();for(T$$=0;T$$<T$D$;T$$++)(T$o$=new T$Y$).name=T$g.readUTFString(),T$o$.parent=T$g.readUTFString(),T$o$.attachmentName=T$g.readUTFString(),T$o$.srcDisplayIndex=T$o$.displayIndex=T$g.getInt16(),(T$o$.templet=this).boneSlotDic[T$o$.name]=T$o$,null==(T$N$=this.bindBoneBoneSlotDic[T$o$.parent])&&(this.bindBoneBoneSlotDic[T$o$.parent]=T$N$=[]),T$N$.push(T$o$),this.boneSlotArray.push(T$o$);var T$e$,T$L$,T$T$,T$_$=T$g.readUTFString().split("\n"),T$y$=0,T$S$=T$g.getUint8(),T$P$=0,T$i$=0,T$z$=0,T$q$=0,T$a$=0,T$t$=0,T$C$=0;for(T$$=0;T$$<T$S$;T$$++){for((T$e$=new T$c$).name=T$_$[T$y$++],T$P$=T$g.getUint8(),T$b=0;T$b<T$P$;T$b++){for((T$L$=new T$f$).name=T$_$[T$y$++],T$o$=this.boneSlotDic[T$L$.name],T$i$=T$g.getUint8(),T$u=0;T$u<T$i$;T$u++){if(T$T$=new T$J$,this.skinSlotDisplayDataArr.push(T$T$),T$T$.name=T$_$[T$y$++],T$T$.attachmentName=T$_$[T$y$++],T$T$.transform=new T$W$,T$T$.transform.scX=T$g.getFloat32(),T$T$.transform.skX=T$g.getFloat32(),T$T$.transform.skY=T$g.getFloat32(),T$T$.transform.scY=T$g.getFloat32(),T$T$.transform.x=T$g.getFloat32(),T$T$.transform.y=T$g.getFloat32(),T$L$.displayArr.push(T$T$),T$T$.width=T$g.getFloat32(),T$T$.height=T$g.getFloat32(),T$T$.type=T$g.getUint8(),T$T$.verLen=T$g.getUint16(),0<(T$K=T$g.getUint16()))for(T$T$.bones=[],T$Z=0;T$Z<T$K;T$Z++){var T$K$=T$g.getUint16();T$T$.bones.push(T$K$)}if(0<(T$z$=T$g.getUint16()))for(T$T$.uvs=[],T$Z=0;T$Z<T$z$;T$Z++)T$T$.uvs.push(T$g.getFloat32());if(0<(T$q$=T$g.getUint16()))for(T$T$.weights=[],T$Z=0;T$Z<T$q$;T$Z++)T$T$.weights.push(T$g.getFloat32());if(0<(T$a$=T$g.getUint16()))for(T$T$.triangles=[],T$Z=0;T$Z<T$a$;T$Z++)T$T$.triangles.push(T$g.getUint16());if(0<(T$t$=T$g.getUint16()))for(T$T$.vertices=[],T$Z=0;T$Z<T$t$;T$Z++)T$T$.vertices.push(T$g.getFloat32());if(0<(T$C$=T$g.getUint16()))for(T$T$.lengths=[],T$Z=0;T$Z<T$C$;T$Z++)T$T$.lengths.push(T$g.getFloat32())}T$e$.slotArr.push(T$L$)}this.skinDic[T$e$.name]=T$e$,this.skinDataArray.push(T$e$)}1==T$g.getUint8()?(this.yReverseMatrix=new T$V$(1,0,0,-1,0,0),T$C&&T$C.setTempMatrix(this.yReverseMatrix)):T$C&&T$C.setTempMatrix(new T$V$),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},T$$.getTexture=function(T$$){var T$b=this.subTextureDic[T$$];return T$b||(T$b=this.subTextureDic[T$$.substr(0,T$$.length-1)]),null==T$b?this._mainTexture:T$b},T$$.showSkinByIndex=function(T$$,T$b,T$u){if(void 0===T$u&&(T$u=!0),T$b<0&&T$b>=this.skinDataArray.length)return!1;var T$Z,T$E,T$r=0,T$F=0,T$x=this.skinDataArray[T$b];if(T$x){for(T$r=0,T$F=T$x.slotArr.length;T$r<T$F;T$r++)(T$E=T$x.slotArr[T$r])&&(T$Z=T$$[T$E.name])&&(T$Z.showSlotData(T$E,T$u),T$u&&"undefined"!=T$Z.attachmentName&&"null"!=T$Z.attachmentName?T$Z.showDisplayByName(T$Z.attachmentName):T$Z.showDisplayByIndex(T$Z.displayIndex));return!0}return!1},T$$.getSkinIndexByName=function(T$$){for(var T$b=0,T$u=this.skinDataArray.length;T$b<T$u;T$b++)if(this.skinDataArray[T$b].name==T$$)return T$b;return-1},T$$.getGrahicsDataWithCache=function(T$$,T$b){return this._graphicsCache[T$$][T$b]},T$$.setGrahicsDataWithCache=function(T$$,T$b,T$u){this._graphicsCache[T$$][T$b]=T$u},T$$.destroy=function(){var T$$;for(var T$b in this._isDestroyed=!0,this.subTextureDic)(T$$=this.subTextureDic[T$b])&&T$$.destroy();for(T$b in this._textureDic)(T$$=this._textureDic[T$b])&&T$$.destroy();for(var T$u=0,T$Z=this.skinSlotDisplayDataArr.length;T$u<T$Z;T$u++)this.skinSlotDisplayDataArr[T$u].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete T$E.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},T$$.getAniNameByIndex=function(T$$){var T$b=this.getAnimation(T$$);return T$b?T$b.name:null},T$r(0,T$$,"rate",function(){return this._rate},function(T$$){this._rate=T$$}),T$E.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",T$E.TEMPLET_DICTIONARY=null,T$E}(T$k)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(T$$,T$b){"use strict";for(var T$u in Object.defineProperty(T$b,"__esModule",{value:!0}),Laya){var T$Z=Laya[T$u];T$Z&&T$Z.__isclass&&(T$b[T$u]=T$Z)}});