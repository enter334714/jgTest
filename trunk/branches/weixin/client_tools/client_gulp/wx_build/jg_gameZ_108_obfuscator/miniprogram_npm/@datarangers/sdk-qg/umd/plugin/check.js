!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).$$LOGSDK_PLUGIN_CHECK=n()}(this,(function(){"use strict";function e(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var n=function(){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n)}var a,t,i;return a=n,(t=[{key:"apply",value:function(e,n){var a=this;this.sdk=e,this.options=n;var t=this.sdk.types;this.sdk.on(t.Check,(function(e){var n,t=e.type,i=e.value;if("event"===t){var r=i;if("applog_trace"===r.event)return;var c=0===(null===(n=r.event)||void 0===n?void 0:n.indexOf("__profile_"));c||a.check("name",r.event),a.sdk.isObject(r.params)&&Object.keys(r.params).forEach((function(e){a.check(c?"profile":"param",e,r.params[e])}))}else if("config"===t){var o=i;a.sdk.isObject(o)&&Object.keys(o).forEach((function(e){if("evtParams"===e){var n=o.evtParams;a.sdk.isObject(n)&&Object.keys(n).forEach((function(e){a.check("header",e,n[e])}))}else a.check("header",e,o[e])}))}}))}},{key:"check",value:function(e,n,a){var t=function(e){return/^[a-zA-Z0-9][a-z0-9A-Z_ .-]{0,255}$/.test(e)};switch(e){case"name":t(String(n))||this.warn("event name ".concat(n," illegal"));break;case"param":case"header":case"profile":var i="param"===e?"event params":"header"===e?"config":"profile";"profile"!==n&&["$inactive","$inline","$target_uuid_list","$source_uuid","$is_spider","$source_id","$is_first_time"].includes(n)||t(String(n))||this.warn("".concat(i," name ").concat(n," illegal")),"string"!=typeof a||function(e){return String(e).length<=1024}(a)||this.warn("the value ".concat(a," length more than 1024 in ").concat(i," ").concat(n))}}},{key:"warn",value:function(e){var n,a;null===(a=null===(n=this.sdk.adapter._log)||void 0===n?void 0:n.warn)||void 0===a?void 0:a.call(n,e)}}])&&e(a.prototype,t),i&&e(a,i),a,n}();return n.pluginName="official:check",n}));
