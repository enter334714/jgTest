var Laya=window.Laya=function(v$R,v$n){var v$X={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(v$n,v$a){return 1==arguments.length?v$X.__presubstr.call(this,v$n):v$X.__presubstr.call(this,v$n,0<v$a?v$a:this.length+v$a)},__init:function(v$n){v$n.forEach(function(v$n){v$n.__init$&&v$n.__init$()})},__isClass:function(v$n){return v$n&&(v$n.__isclass||v$n==Object||v$n==String||v$n==Array)},__newvec:function(v$n,v$a){var v$U=[];v$U.length=v$n;for(var v$x=0;v$x<v$n;v$x++)v$U[v$x]=v$a;return v$U},__extend:function(v$n,v$a){for(var v$U in v$a)if(v$a.hasOwnProperty(v$U)){var v$x=Object.getOwnPropertyDescriptor(v$a,v$U),v$D=v$x.get,v$p=v$x.set;v$D||v$p?v$D&&v$p?Object.defineProperty(v$n,v$U,v$x):(v$D&&Object.defineProperty(v$n,v$U,v$D),v$p&&Object.defineProperty(v$n,v$U,v$p)):v$n[v$U]=v$a[v$U]}function v$Q(){v$X.un(this,"constructor",v$n)}v$Q.prototype=v$a.prototype,v$n.prototype=new v$Q,v$X.un(v$n.prototype,"__imps",v$X.__copy({},v$a.prototype.__imps))},__copy:function(v$n,v$a){if(!v$a)return null;for(var v$U in v$n=v$n||{},v$a)v$n[v$U]=v$a[v$U];return v$n},__package:function(v$n,v$a){if(!v$X.__packages[v$n]){v$X.__packages[v$n]=!0;var v$U=v$R,v$x=v$n.split(".");if(1<v$x.length)for(var v$D=0,v$p=v$x.length-1;v$D<v$p;v$D++){var v$Q=v$U[v$x[v$D]];v$U=v$Q||(v$U[v$x[v$D]]={})}v$U[v$x[v$x.length-1]]||(v$U[v$x[v$x.length-1]]=v$a||{})}},__hasOwnProperty:function(v$n,v$a){return v$a=v$a||this,Object.hasOwnProperty.call(v$a,v$n)||function v$n(v$a,v$U){if(Object.hasOwnProperty.call(v$U.prototype,v$a))return!0;var v$x=v$U.prototype.__super;return null==v$x?null:v$n(v$a,v$x)}(v$n,v$a.__class)},__typeof:function(v$n,v$a){if(!v$n||!v$a)return!1;if(v$a===String)return"string"==typeof v$n;if(v$a===Number)return"number"==typeof v$n;if(v$a.__interface__)v$a=v$a.__interface__;else if("string"!=typeof v$a)return v$n instanceof v$a;return v$n.__imps&&v$n.__imps[v$a]||v$n.__class==v$a},__as:function(v$n,v$a){return this.__typeof(v$n,v$a)?v$n:null},__int:function(v$n){return v$n?parseInt(v$n):0},interface:function(v$n,v$a){v$X.__package(v$n,{});var v$U=v$X.__internals,v$x=v$U[v$n]=v$U[v$n]||{self:v$n};if(v$a){var v$D=v$a.split(",");v$x.extend=[];for(var v$p=0;v$p<v$D.length;v$p++){var v$Q=v$D[v$p];v$U[v$Q]=v$U[v$Q]||{self:v$Q},v$x.extend.push(v$U[v$Q])}}var v$V=v$R,v$y=v$n.split(".");for(v$p=0;v$p<v$y.length-1;v$p++)v$V=v$V[v$y[v$p]];v$V[v$y[v$y.length-1]]={__interface__:v$n}},class:function(v$n,v$a,v$U,v$x){if(v$U&&v$X.__extend(v$n,v$U),v$a)if(v$X.__package(v$a,v$n),v$X.__classmap[v$a]=v$n,0<v$a.indexOf(".")){if(0==v$a.indexOf("laya.")){var v$D=v$a.split(".");v$x=v$x||v$D[v$D.length-1],v$X[v$x]&&console.log("Warning!,this class["+v$x+"] already exist:",v$X[v$x]),v$X[v$x]=v$n}}else"Main"==v$a?v$R.Main=v$n:"MainWX"==v$a?v$R.MainWX=v$n:(v$X[v$a]&&console.log("Error!,this class["+v$a+"] already exist:",v$X[v$a]),v$X[v$a]=v$n);var v$p=v$X.un,v$Q=v$n.prototype;v$p(v$Q,"hasOwnProperty",v$X.__hasOwnProperty),v$p(v$Q,"__class",v$n),v$p(v$Q,"__super",v$U),v$p(v$Q,"__className",v$a),v$p(v$n,"__super",v$U),v$p(v$n,"__className",v$a),v$p(v$n,"__isclass",!0),v$p(v$n,"super",function(v$n){this.__super.call(v$n)})},imps:function(v$n,v$a){if(!v$a)return null;var v$D=v$n.__imps||v$X.un(v$n,"__imps",{});function v$p(v$n){var v$a,v$U;if((v$a=v$X.__internals[v$n])&&(v$D[v$n]=!0,v$U=v$a.extend))for(var v$x=0;v$x<v$U.length;v$x++)v$p(v$U[v$x].self)}for(var v$U in v$a)v$p(v$U)},superSet:function(v$n,v$a,v$U,v$x){var v$D=v$n.prototype["_$set_"+v$U];v$D&&v$D.call(v$a,v$x)},superGet:function(v$n,v$a,v$U){var v$x=v$n.prototype["_$get_"+v$U];return v$x?v$x.call(v$a):null},getset:function(v$n,v$a,v$U,v$x,v$D){v$n?(v$x&&(v$a["_$GET_"+v$U]=v$x),v$D&&(v$a["_$SET_"+v$U]=v$D)):(v$x&&v$X.un(v$a,"_$get_"+v$U,v$x),v$D&&v$X.un(v$a,"_$set_"+v$U,v$D)),v$x&&v$D?Object.defineProperty(v$a,v$U,{get:v$x,set:v$D,enumerable:!1,configurable:!0}):(v$x&&Object.defineProperty(v$a,v$U,{get:v$x,enumerable:!1,configurable:!0}),v$D&&Object.defineProperty(v$a,v$U,{set:v$D,enumerable:!1,configurable:!0}))},static:function(v$U,v$x){for(var v$D=0,v$n=v$x.length;v$D<v$n;v$D+=2)if("length"==v$x[v$D])v$U.length=v$x[v$D+1].call(v$U);else{function v$a(){var v$a=v$x[v$D],v$n=v$x[v$D+1];Object.defineProperty(v$U,v$a,{get:function(){return delete this[v$a],this[v$a]=v$n.call(this)},set:function(v$n){delete this[v$a],this[v$a]=v$n},enumerable:!0,configurable:!0})}v$a()}},un:function(v$n,v$a,v$U){return v$U||(v$U=v$n[v$a]),v$X.__propun.value=v$U,Object.defineProperty(v$n,v$a,v$X.__propun),v$U},uns:function(v$a,v$n){v$n.forEach(function(v$n){v$X.un(v$a,v$n)})}};return v$R.console=v$R.console||{log:function(){}},v$R.trace=v$R.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),v$X}(window,document);!function(v$n,v$a,v$U){v$U.un,v$U.uns,v$U.static,v$U.class,v$U.getset,v$U.__newvec}(window,document,Laya),function(v$Q,v$a,v$k){v$k.un,v$k.uns;var v$y=v$k.static,v$X=v$k.class,v$E=v$k.getset;v$k.__newvec;v$k.interface("laya.runtime.IMarket"),v$k.interface("laya.filters.IFilter"),v$k.interface("laya.display.ILayout"),v$k.interface("laya.resource.IDispose"),v$k.interface("laya.runtime.IPlatform"),v$k.interface("laya.resource.IDestroy"),v$k.interface("laya.runtime.IConchNode"),v$k.interface("laya.filters.IFilterAction"),v$k.interface("laya.runtime.ICPlatformClass"),v$k.interface("laya.resource.ICreateResource"),v$k.interface("laya.runtime.IConchRenderObject"),v$k.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var v$u=function(){function v$p(){}return v$X(v$p,"laya.utils.RunDriver"),v$p.FILTER_ACTIONS=[],v$p.pixelRatio=-1,v$p._charSizeTestDiv=null,v$p.now=function(){return Date.now()},v$p.getWindow=function(){return v$Q},v$p.getPixelRatio=function(){if(v$p.pixelRatio<0){var v$n=v$f.context,v$a=v$n.backingStorePixelRatio||v$n.webkitBackingStorePixelRatio||v$n.mozBackingStorePixelRatio||v$n.msBackingStorePixelRatio||v$n.oBackingStorePixelRatio||v$n.backingStorePixelRatio||1;(v$p.pixelRatio=(v$f.window.devicePixelRatio||1)/v$a)<1&&(v$p.pixelRatio=1)}return v$p.pixelRatio},v$p.getIncludeStr=function(v$n){return null},v$p.createShaderCondition=function(v$n){var v$a="(function() {return "+v$n+";})";return v$k._runScript(v$a)},v$p.fontMap=[],v$p.measureText=function(v$n,v$a){var v$U=v$p.hanzi.test(v$n);if(v$U&&v$p.fontMap[v$a])return v$p.fontMap[v$a];var v$x=v$f.context;v$x.font=v$a;var v$D=v$x.measureText(v$n);return v$D||(v$D={width:16,height:16}),v$U&&(v$p.fontMap[v$a]=v$D),v$D},v$p.getWebGLContext=function(v$n){},v$p.beginFlush=function(){},v$p.endFinish=function(){},v$p.addToAtlas=null,v$p.flashFlushImage=function(v$n){},v$p.drawToCanvas=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=v$Tn.create("2D"),v$V=new v$v(v$U,v$x,v$Q);return v$l.renders[v$a]._fun(v$n,v$V,v$D,v$p),v$Q},v$p.createParticleTemplate2D=null,v$p.createGLTextur=null,v$p.createWebGLContext2D=null,v$p.changeWebGLSize=function(v$n,v$a){},v$p.createRenderSprite=function(v$n,v$a){return new v$l(v$n,v$a)},v$p.createFilterAction=function(v$n){return new v$T},v$p.createGraphics=function(){return new v$i},v$p.clear=function(v$n){v$I._context.ctx.clear()},v$p.cancelLoadByUrl=function(v$n){},v$p.clearAtlas=function(v$n){},v$p.isAtlas=function(v$n){return!1},v$p.addTextureToAtlas=function(v$n){},v$p.getTexturePixels=function(v$n,v$a,v$U,v$x,v$D){return null},v$p.skinAniSprite=function(){return null},v$p.update3DLoop=function(){},v$y(v$p,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),v$p}(),v$x=(v$E(1,v$k,"alertGlobalError",null,function(v$n){var v$p=0;v$f.window.onerror=v$n?function(v$n,v$a,v$U,v$x,v$D){v$p++<5&&v$D&&alert(v$D.stack||v$D)}:null}),v$k.init=function(v$n,v$a,v$U){for(var v$x=[],v$D=2,v$p=arguments.length;v$D<v$p;v$D++)v$x.push(arguments[v$D]);if(!v$k._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=v$k._arrayBufferSlice),v$k._isinit=!0,v$f.__init__(),v$j.__init__(),v$i.__init__(),v$k.timer=new v$s,v$k.scaleTimer=new v$s,v$k.loader=new v$yn,v$J.__init__(),v$D=0;for(var v$Q=v$x.length;v$D<v$Q;v$D++)v$x[v$D].enable&&v$x[v$D].enable();return v$q.__init__(),v$V.__init__(),v$h.__init__(),v$g.beginCheck(),v$k._currentStage=v$k.stage=new v$Pn,v$k.stage.conchModel&&v$k.stage.conchModel.setRootNode(),v$k._getUrlPath(),v$k.render=new v$I(0,0),v$k.stage.size(v$n,v$a),v$l.__init__(),v$z.__init__(),v$m.instance.__init__(v$k.stage,v$I.canvas),v$Yn.__init__(),v$Z.autoStopMusic=!0,v$$.__init__(),v$I.canvas}},v$k._getUrlPath=function(){var v$n=v$f.window.location,v$a=v$n.pathname;v$a=v$a&&":"==v$a.charAt(2)?v$a.substring(1):v$a,v$G.rootPath=v$G.basePath=v$G.getPath("file:"==v$n.protocol?v$a:v$n.protocol+"//"+v$n.host+v$n.pathname)},v$k._arrayBufferSlice=function(v$n,v$a){var v$U=new Uint8Array(this,v$n,v$a-v$n),v$x=new Uint8Array(v$U.length);return v$x.set(v$U),v$x.buffer},v$k._runScript=function(v$n){return v$f.window[v$k._evcode](v$n)},v$k.stage=null,v$k.timer=null,v$k.scaleTimer=null,v$k.loader=null,v$k.version="1.8.6",v$k.render=null,v$k._currentStage=null,v$k._isinit=!1,v$k.isDebug=!1,v$k.MiniAdpter={init:function(){v$Q.navigator&&v$Q.navigator.userAgent&&-1<v$Q.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},v$y(v$k,["conchMarket",function(){return this.conchMarket=v$Q.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=v$Q.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function v$n(){}return v$X(v$n,"Config"),v$n.WebGLTextCacheCount=500,v$n.atlasEnable=!1,v$n.showCanvasMark=!1,v$n.animationInterval=50,v$n.isAntialias=!1,v$n.isAlpha=!1,v$n.premultipliedAlpha=!0,v$n.isStencil=!0,v$n.preserveDrawingBuffer=!1,v$n}()),v$R=function(){function v$R(){this._events=null}v$X(v$R,"laya.events.EventDispatcher");var v$n=v$R.prototype;return v$n.hasListener=function(v$n){return!!(this._events&&this._events[v$n])},v$n.getListener=function(v$n){return this._events?this._events[v$n]:null},v$n.event=function(v$n,v$a){if(!this._events||!this._events[v$n])return!1;var v$U=this._events[v$n];if(v$U.lock)v$U.queue||(v$U.queue=[]),v$U.queue.push(v$a);else{var v$x;for(v$U.lock=!0,v$U.cursor=v$U.head;v$U.cursor;)(v$x=v$U.cursor).recover?(v$U.head=v$U.tail=v$U.cursor=null,console.error("node is recover："+v$x.id)):(v$U.cursor=v$x.next,v$x.once&&v$R.delNode(v$U,v$x),v$x.method&&(null!=v$a?v$x.args?v$x.method.apply(v$x.caller,v$x.args.concat(v$a)):v$a instanceof Array?v$x.method.apply(v$x.caller,v$a):v$x.caller?v$x.method.call(v$x.caller,v$a):v$k.recordError("事件派发错误","node.caller:"+v$x.caller+"node.method:"+v$x.method+"data:"+v$a+"node.prev"+v$x.prev):v$x.method.apply(v$x.caller,v$x.args)),v$x.once&&v$R.recoverHandler(v$x));v$U.lock=!1,!v$U.head&&this._events&&this._events[v$n]==v$U&&delete this._events[v$n],v$U.queue&&v$U.queue.length&&this.event(v$n,v$U.queue.shift())}return!0},v$n.on=function(v$n,v$a,v$U,v$x){return this._createListener(v$n,v$a,v$U,v$x,!1)},v$n.once=function(v$n,v$a,v$U,v$x){return this._createListener(v$n,v$a,v$U,v$x,!0)},v$n._createListener=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$p&&(v$p=!0),v$p&&this.off(v$n,v$a,v$U,v$D);var v$Q=v$R.createHandler(v$a||this,v$U,v$x,v$D);this._events||(this._events={});var v$V=this._events,v$y=v$V[v$n];return v$y?v$y.tail?(v$Q.prev=v$y.tail,v$y.tail.next=v$Q,v$y.tail=v$Q):v$y.head=v$y.tail=v$Q:v$V[v$n]={head:v$Q,tail:v$Q,cursor:null,lock:!1},this},v$n.off=function(v$n,v$a,v$U,v$x){if(void 0===v$x&&(v$x=!1),!this._events||!this._events[v$n])return this;for(var v$D=this._events[v$n],v$p=v$D.head;v$p;){if((!v$a||v$p.caller===v$a)&&v$p.method===v$U&&(!v$x||v$p.once)){v$R.delNode(v$D,v$p),v$D.cursor==v$p&&(v$D.cursor=v$p.next),v$R.recoverHandler(v$p);break}v$p=v$p.next}return this},v$n.offAll=function(v$n){var v$a=this._events;if(!v$a)return this;if(v$n)this._recoverHandlers(v$a[v$n]),delete v$a[v$n];else{for(var v$U in v$a)this._recoverHandlers(v$a[v$U]);this._events=null}return this},v$n._recoverHandlers=function(v$n){if(v$n){for(var v$a=v$n.head;v$a;){v$R.delNode(v$n,v$a);var v$U=v$a.next;v$R.recoverHandler(v$a),v$a=v$U}v$n.cursor=null}},v$n.isMouseEvent=function(v$n){return v$R.MOUSE_EVENTS[v$n]},v$R.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},v$R.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},v$R.delNode=function(v$n,v$a){v$a.prev?v$a.prev.next=v$a.next:v$n.head=v$a.next,v$a.next?v$a.next.prev=v$a.prev:v$n.tail=v$a.prev},v$R.createHandler=function(v$n,v$a,v$U,v$x){var v$D=500<v$R._freeHandler.length?v$R._freeHandler.shift():null;if(v$D)if(v$D.recover)v$D.recover=!1,v$D.caller=v$n,v$D.method=v$a,v$D.args=v$U,v$D.once=v$x;else{var v$p="";try{arguments.propertyIsEnumerable.caller}catch(v$n){v$p=v$n.stack}var v$Q=v$D.caller?(v$D.caller.__proto__&&v$D.caller.__proto__.constructor&&v$D.caller.__proto__.constructor.name)+"|"+v$D.caller.__className+"|"+v$D.caller.name:"",v$V=v$D.method?v$D.method.name:"";v$k.recordError("EventDispatcher重复创建","caller="+v$Q+"  method="+v$V+"  stack="+v$p),v$D={id:++v$R._nodeCount,caller:v$n,method:v$a,args:v$U,once:v$x,recover:!1}}else v$D={id:++v$R._nodeCount,caller:v$n,method:v$a,args:v$U,once:v$x,recover:!1};return v$D.prev=v$D.next=null,v$D},v$R.recoverHandler=function(v$n){if(v$n.recover){if(v$R._errorCount<5){v$R._errorCount++;var v$a="";try{arguments.propertyIsEnumerable.caller}catch(v$n){v$a=v$n.stack}var v$U=v$n.caller?(v$n.caller.__proto__&&v$n.caller.__proto__.constructor&&v$n.caller.__proto__.constructor.name)+"|"+v$n.caller.__className+"|"+v$n.caller.name:"",v$x=v$n.method?v$n.method.name:"";v$k.recordError("EventDispatcher重复回收","id="+v$n.id+"  caller="+v$U+"  method="+v$x+"  stack="+v$a)}v$n.caller=v$n.method=v$n.args=v$n.prev=null}else v$n.recover=!0,v$n.caller=v$n.method=v$n.args=v$n.prev=v$n.next=null,v$R._freeHandler&&v$R._freeHandler.length<3e3&&v$R._freeHandler.push(v$n)},v$R._freeHandler=[],v$R._nodeCount=0,v$R._errorCount=0,v$R}(),v$A=function(){function v$D(v$n,v$a,v$U,v$x){this.once=!1,void(this._id=0)===v$x&&(v$x=!1),this.setTo(v$n,v$a,v$U,v$x)}v$X(v$D,"laya.utils.Handler");var v$n=v$D.prototype;return v$n.setTo=function(v$n,v$a,v$U,v$x){return this._id=v$D._gid++,this.caller=v$n,this.method=v$a,this.args=v$U,this.once=v$x,this},v$n.run=function(){if(null==this.method)return null;var v$n=this._id,v$a=this.method.apply(this.caller,this.args);return this._id===v$n&&this.once&&this.recover(),v$a},v$n.runWith=function(v$n){if(null==this.method)return null;var v$a=this._id;if(null==v$n)var v$U=this.method.apply(this.caller,this.args);else v$U=this.args||v$n.unshift?this.args?this.method.apply(this.caller,this.args.concat(v$n)):this.method.apply(this.caller,v$n):this.method.call(this.caller,v$n);return this._id===v$a&&this.once&&this.recover(),v$U},v$n.clear=function(){return this.caller=null,this.method=null,this.args=null,this},v$n.recover=function(){0<this._id&&(this._id=0,this.clear())},v$D.create=function(v$n,v$a,v$U,v$x){return void 0===v$x&&(v$x=!0),new v$D(v$n,v$a,v$U,v$x)},v$D._gid=1,v$D}(),v$M=function(){function v$n(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}v$X(v$n,"laya.display.BitmapFont");var v$a=v$n.prototype;return v$a.loadFont=function(v$n,v$a){this._path=v$n,this._complete=v$a,v$k.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],v$A.create(this,this.onLoaded))},v$a.onLoaded=function(){this.parseFont(v$Vn.getRes(this._path),v$Vn.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},v$a.parseFont=function(v$n,v$a){if(null!=v$n&&null!=v$a){this._texture=v$a;var v$U=v$n.getElementsByTagName("info");if(!v$U[0].getAttributeNode)return this.parseFont2(v$n,v$a);this.fontSize=parseInt(v$U[0].getAttributeNode("size").nodeValue);var v$x,v$D=v$U[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(v$D[0]),parseInt(v$D[1]),parseInt(v$D[2]),parseInt(v$D[3])],v$x=v$n.getElementsByTagName("char");var v$p=0;for(v$p=0;v$p<v$x.length;v$p++){var v$Q=v$x[v$p],v$V=parseInt(v$Q.getAttributeNode("id").nodeValue),v$y=parseInt(v$Q.getAttributeNode("xoffset").nodeValue)/1,v$R=parseInt(v$Q.getAttributeNode("yoffset").nodeValue)/1,v$X=parseInt(v$Q.getAttributeNode("xadvance").nodeValue)/1,v$z=new v$_;v$z.x=parseInt(v$Q.getAttributeNode("x").nodeValue),v$z.y=parseInt(v$Q.getAttributeNode("y").nodeValue),v$z.width=parseInt(v$Q.getAttributeNode("width").nodeValue),v$z.height=parseInt(v$Q.getAttributeNode("height").nodeValue);var v$i=v$Xn.create(v$a,v$z.x,v$z.y,v$z.width,v$z.height,v$y,v$R);this._maxWidth=Math.max(this._maxWidth,v$X+this.letterSpacing),this._fontCharDic[v$V]=v$i,this._fontWidthMap[v$V]=v$X}}},v$a.parseFont2=function(v$n,v$a){if(null!=v$n&&null!=v$a){this._texture=v$a;var v$U=v$n.getElementsByTagName("info");this.fontSize=parseInt(v$U[0].attributes.size.nodeValue);var v$x=v$U[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(v$x[0]),parseInt(v$x[1]),parseInt(v$x[2]),parseInt(v$x[3])];var v$D=v$n.getElementsByTagName("char"),v$p=0;for(v$p=0;v$p<v$D.length;v$p++){var v$Q=v$D[v$p].attributes,v$V=parseInt(v$Q.id.nodeValue),v$y=parseInt(v$Q.xoffset.nodeValue)/1,v$R=parseInt(v$Q.yoffset.nodeValue)/1,v$X=parseInt(v$Q.xadvance.nodeValue)/1,v$z=new v$_;v$z.x=parseInt(v$Q.x.nodeValue),v$z.y=parseInt(v$Q.y.nodeValue),v$z.width=parseInt(v$Q.width.nodeValue),v$z.height=parseInt(v$Q.height.nodeValue);var v$i=v$Xn.create(v$a,v$z.x,v$z.y,v$z.width,v$z.height,v$y,v$R);this._maxWidth=Math.max(this._maxWidth,v$X+this.letterSpacing),this._fontCharDic[v$V]=v$i,this._fontWidthMap[v$V]=v$X}}},v$a.getCharTexture=function(v$n){return this._fontCharDic[v$n.charCodeAt(0)]},v$a.destroy=function(){if(this._texture){for(var v$n in this._fontCharDic){var v$a=this._fontCharDic[v$n];v$a&&v$a.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},v$a.setSpaceWidth=function(v$n){this._spaceWidth=v$n},v$a.getCharWidth=function(v$n){var v$a=v$n.charCodeAt(0);return this._fontWidthMap[v$a]?this._fontWidthMap[v$a]+this.letterSpacing:" "==v$n?this._spaceWidth+this.letterSpacing:0},v$a.getTextWidth=function(v$n){for(var v$a=0,v$U=0,v$x=v$n.length;v$U<v$x;v$U++)v$a+=this.getCharWidth(v$n.charAt(v$U));return v$a},v$a.getMaxWidth=function(){return this._maxWidth},v$a.getMaxHeight=function(){return this.fontSize},v$a.drawText=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q,v$V=this.getTextWidth(v$n),v$y=0;"center"===v$D&&(v$y=(v$p-v$V)/2),"right"===v$D&&(v$y=v$p-v$V);for(var v$R=0,v$X=0,v$z=v$n.length;v$X<v$z;v$X++)(v$Q=this.getCharTexture(v$n.charAt(v$X)))&&(v$a.graphics.drawTexture(v$Q,v$U+v$R+v$y,v$x),v$R+=this.getCharWidth(v$n.charAt(v$X)))},v$n}(),v$V=function(){function v$U(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=v$U._TF_EMPTY}v$X(v$U,"laya.display.css.Style");var v$n=v$U.prototype;return v$n.getTransform=function(){return this._tf},v$n.setTransform=function(v$n){this._tf="none"!==v$n&&v$n?v$n:v$U._TF_EMPTY},v$n.setTranslateX=function(v$n){this._tf===v$U._TF_EMPTY&&(this._tf=new v$D),this._tf.translateX=v$n},v$n.setTranslateY=function(v$n){this._tf===v$U._TF_EMPTY&&(this._tf=new v$D),this._tf.translateY=v$n},v$n.setScaleX=function(v$n){this._tf===v$U._TF_EMPTY&&(this._tf=new v$D),this._tf.scaleX=v$n},v$n.setScale=function(v$n,v$a){this._tf===v$U._TF_EMPTY&&(this._tf=new v$D),this._tf.scaleX=v$n,this._tf.scaleY=v$a},v$n.setScaleY=function(v$n){this._tf===v$U._TF_EMPTY&&(this._tf=new v$D),this._tf.scaleY=v$n},v$n.setRotate=function(v$n){this._tf===v$U._TF_EMPTY&&(this._tf=new v$D),this._tf.rotate=v$n},v$n.setSkewX=function(v$n){this._tf===v$U._TF_EMPTY&&(this._tf=new v$D),this._tf.skewX=v$n},v$n.setSkewY=function(v$n){this._tf===v$U._TF_EMPTY&&(this._tf=new v$D),this._tf.skewY=v$n},v$n.destroy=function(){this.scrollRect=null},v$n.render=function(v$n,v$a,v$U,v$x){},v$n.getCSSStyle=function(){return v$an.EMPTY},v$n._enableLayout=function(){return!1},v$E(0,v$n,"scaleX",function(){return this._tf.scaleX},function(v$n){this.setScaleX(v$n)}),v$E(0,v$n,"transform",function(){return this.getTransform()},function(v$n){this.setTransform(v$n)}),v$E(0,v$n,"translateX",function(){return this._tf.translateX},function(v$n){this.setTranslateX(v$n)}),v$E(0,v$n,"translateY",function(){return this._tf.translateY},function(v$n){this.setTranslateY(v$n)}),v$E(0,v$n,"scaleY",function(){return this._tf.scaleY},function(v$n){this.setScaleY(v$n)}),v$E(0,v$n,"block",function(){return 0!=(1&this._type)}),v$E(0,v$n,"skewY",function(){return this._tf.skewY},function(v$n){this.setSkewY(v$n)}),v$E(0,v$n,"rotate",function(){return this._tf.rotate},function(v$n){this.setRotate(v$n)}),v$E(0,v$n,"skewX",function(){return this._tf.skewX},function(v$n){this.setSkewX(v$n)}),v$E(0,v$n,"paddingLeft",function(){return 0}),v$E(0,v$n,"paddingTop",function(){return 0}),v$E(0,v$n,"absolute",function(){return!0}),v$U.__init__=function(){v$U._TF_EMPTY=new v$D,v$U.EMPTY=new v$U},v$U.EMPTY=null,v$U._TF_EMPTY=null,v$U}(),v$q=function(){function v$a(v$n){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=v$B.create(v$a.defaultColor),this.family=v$a.defaultFamily,this.stroke=v$a._STROKE,this.size=v$a.defaultSize,v$n&&v$n!==v$a.EMPTY&&v$n.copyTo(this)}v$X(v$a,"laya.display.css.Font");var v$n=v$a.prototype;return v$n.set=function(v$n){this._text=null;for(var v$a=v$n.split(" "),v$U=0,v$x=v$a.length;v$U<v$x;v$U++){var v$D=v$a[v$U];switch(v$D){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<v$D.indexOf("px")&&(this.size=parseInt(v$D),this.family=v$a[v$U+1],v$U++)}},v$n.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},v$n.copyTo=function(v$n){v$n._type=this._type,v$n._text=this._text,v$n._weight=this._weight,v$n._color=this._color,v$n.family=this.family,v$n.stroke=this.stroke!=v$a._STROKE?this.stroke.slice():v$a._STROKE,v$n.indent=this.indent,v$n.size=this.size},v$E(0,v$n,"password",function(){return 0!=(1024&this._type)},function(v$n){v$n?this._type|=1024:this._type&=-1025}),v$E(0,v$n,"color",function(){return this._color.strColor},function(v$n){this._color=v$B.create(v$n)}),v$E(0,v$n,"italic",function(){return 0!=(512&this._type)},function(v$n){v$n?this._type|=512:this._type&=-513}),v$E(0,v$n,"bold",function(){return 0!=(2048&this._type)},function(v$n){v$n?this._type|=2048:this._type&=-2049}),v$E(0,v$n,"weight",function(){return""+this._weight},function(v$n){var v$a=0;switch(v$n){case"normal":break;case"bold":this.bold=!0,v$a=700;break;case"bolder":v$a=800;break;case"lighter":v$a=100;break;default:v$a=parseInt(v$n)}this._weight=v$a,this._text=null}),v$E(0,v$n,"decoration",function(){return this._decoration?this._decoration.value:null},function(v$n){var v$a=v$n.split(" ");switch(this._decoration||(this._decoration={}),v$a[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=v$a[0]}v$a[1]&&(this._decoration.color=v$B.create(v$a)),this._decoration.value=v$n}),v$a.__init__=function(){v$a.EMPTY=new v$a(null)},v$a.EMPTY=null,v$a.defaultColor="#000000",v$a.defaultSize=12,v$a.defaultFamily="Arial",v$a.defaultFont="12px Arial",v$a._STROKE=[0,"#000000"],v$a._ITALIC=512,v$a._PASSWORD=1024,v$a._BOLD=2048,v$a}(),v$D=function(){function v$n(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return v$X(v$n,"laya.display.css.TransformInfo"),v$n}(),v$i=function(){function v$z(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,v$I.isConchNode){this._nativeObj=new v$Q._conchGraphics,this.id=this._nativeObj.conchID}}v$X(v$z,"laya.display.Graphics");var v$n=v$z.prototype;return v$n.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},v$n.clear=function(v$n){void 0===v$n&&(v$n=!1);var v$a=0,v$U=0;if(v$n){var v$x=this._one;if(this._cmds){for(v$U=this._cmds.length,v$a=0;v$a<v$U;v$a++)!(v$x=this._cmds[v$a])||v$x.callee!==v$I._context._drawTexture&&v$x.callee!==v$I._context._drawTextureWithTransform||(v$x[0]=null,v$z._cache.push(v$x));this._cmds.length=0}else v$x&&(!v$x||v$x.callee!==v$I._context._drawTexture&&v$x.callee!==v$I._context._drawTextureWithTransform||(v$x[0]=null,v$z._cache.push(v$x)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(v$a=0,v$U=this._vectorgraphArray.length;v$a<v$U;v$a++)v$r.getInstance().deleteShape(this._vectorgraphArray[v$a]);this._vectorgraphArray.length=0}},v$n._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},v$n._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new v$U,this._graphicBounds._graphics=this)},v$n._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},v$n._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},v$n.getBounds=function(v$n){return void 0===v$n&&(v$n=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(v$n)},v$n.getBoundPoints=function(v$n){return void 0===v$n&&(v$n=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(v$n)},v$n._addCmd=function(v$n){this._cmds=this._cmds||[],v$n.callee=v$n.shift(),this._cmds.push(v$n)},v$n.setFilters=function(v$n){this._saveToCmd(v$I._context._setFilters,v$n)},v$n.drawTexture=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){if(void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0),void 0===v$Q&&(v$Q=1),!v$n||v$Q<.01)return null;v$x||(v$x=v$n.sourceWidth),v$D||(v$D=v$n.sourceHeight),v$Q=v$Q<0?0:1<v$Q?1:v$Q;var v$V,v$y=!v$I.isWebGL&&(v$f.onFirefox||v$f.onEdge||v$f.onIE||v$f.onSafari)?.5:0,v$R=v$x/v$n.sourceWidth,v$X=v$D/v$n.sourceHeight;return v$x=v$n.width*v$R,v$D=v$n.height*v$X,v$n.loaded&&(v$x<=0||v$D<=0)?null:(v$a+=v$n.offsetX*v$R,v$U+=v$n.offsetY*v$X,this._sp&&(this._sp._renderType|=512),v$a-=v$y,v$U-=v$y,v$x+=2*v$y,v$D+=2*v$y,v$z._cache.length?((v$V=v$z._cache.pop())[0]=v$n,v$V[1]=v$a,v$V[2]=v$U,v$V[3]=v$x,v$V[4]=v$D,v$V[5]=v$p,v$V[6]=v$Q):v$V=[v$n,v$a,v$U,v$x,v$D,v$p,v$Q],v$V.callee=v$p||1!=v$Q?v$I._context._drawTextureWithTransform:v$I._context._drawTexture,null!=this._one||v$p||1!=v$Q?this._saveToCmd(v$V.callee,v$V):(this._one=v$V,this._render=this._renderOneImg),v$n.loaded||v$n.once("loaded",this,this._textureLoaded,[v$n,v$V]),this._repaint(),v$V)},v$n.cleanByTexture=function(v$n,v$a,v$U,v$x,v$D){if(void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0),!v$n)return this.clear();if(this._one&&this._render===this._renderOneImg){v$x||(v$x=v$n.sourceWidth),v$D||(v$D=v$n.sourceHeight);var v$p=v$x/v$n.sourceWidth,v$Q=v$D/v$n.sourceHeight;v$x=v$n.width*v$p,v$D=v$n.height*v$Q,v$a+=v$n.offsetX*v$p,v$U+=v$n.offsetY*v$Q,this._one[0]=v$n,this._one[1]=v$a,this._one[2]=v$U,this._one[3]=v$x,this._one[4]=v$D,this._repaint()}else this.clear(),v$n&&this.drawTexture(v$n,v$a,v$U,v$x,v$D)},v$n.drawTextures=function(v$n,v$a){v$n&&this._saveToCmd(v$I._context._drawTextures,[v$n,v$a])},v$n.fillTexture=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){if(void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0),void 0===v$p&&(v$p="repeat"),v$n){var v$V=[v$n,v$a,v$U,v$x,v$D,v$p,v$Q||v$N.EMPTY,{}];v$n.loaded||v$n.once("loaded",this,this._textureLoaded,[v$n,v$V]),this._saveToCmd(v$I._context._fillTexture,v$V)}},v$n._textureLoaded=function(v$n,v$a){v$a[3]=v$a[3]||v$n.width,v$a[4]=v$a[4]||v$n.height,this._repaint()},v$n.fillCircle=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){v$U.bitmap.enableMerageInAtlas=!1;var v$V=new Float32Array(2*(v$Q+1)),v$y=new Float32Array(2*(v$Q+1)),v$R=new Uint16Array(3*v$Q),v$X=2*Math.PI/v$Q,v$z=0;v$V[0]=v$x,v$V[1]=v$D,v$y[0]=v$x/v$U.width,v$y[1]=v$D/v$U.height;for(var v$i=2,v$q=0;v$q<v$Q;v$q++){var v$E=v$p*Math.cos(v$z)+v$x,v$m=v$p*Math.sin(v$z)+v$D;v$V[v$i]=v$E,v$V[v$i+1]=v$m,v$y[v$i]=v$E/v$U.width,v$y[v$i+1]=v$m/v$U.height,v$z+=v$X,v$i+=2}for(v$q=v$i=0;v$q<v$Q;v$q++)v$R[v$i++]=0,v$R[v$i++]=v$q+1,v$R[v$i++]=v$Q+1<=v$q+2?1:v$q+2;this.drawTriangles(v$U,v$n,v$a,v$V,v$y,v$R)},v$n.drawTriangles=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){void 0===v$V&&(v$V=1),this._saveToCmd(v$I._context.drawTriangles,[v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R])},v$n._saveToCmd=function(v$n,v$a){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=v$a,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(v$a)),v$a.callee=v$n,this._repaint(),v$a},v$n.clipRect=function(v$n,v$a,v$U,v$x){this._saveToCmd(v$I._context._clipRect,[v$n,v$a,v$U,v$x])},v$n.fillText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){void 0===v$Q&&(v$Q=0),this._saveToCmd(v$I._context._fillText,[v$n,v$a,v$U,v$x||v$q.defaultFont,v$D,v$p])},v$n.fillBorderText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){this._saveToCmd(v$I._context._fillBorderText,[v$n,v$a,v$U,v$x||v$q.defaultFont,v$D,v$p,v$Q,v$V])},v$n.strokeText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this._saveToCmd(v$I._context._strokeText,[v$n,v$a,v$U,v$x||v$q.defaultFont,v$D,v$p,v$Q])},v$n.alpha=function(v$n){v$n=v$n<0?0:1<v$n?1:v$n,this._saveToCmd(v$I._context._alpha,[v$n])},v$n.setAlpha=function(v$n){v$n=v$n<0?0:1<v$n?1:v$n,this._saveToCmd(v$I._context._setAlpha,[v$n])},v$n.transform=function(v$n,v$a,v$U){void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),this._saveToCmd(v$I._context._transform,[v$n,v$a,v$U])},v$n.rotate=function(v$n,v$a,v$U){void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),this._saveToCmd(v$I._context._rotate,[v$n,v$a,v$U])},v$n.scale=function(v$n,v$a,v$U,v$x){void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=0),this._saveToCmd(v$I._context._scale,[v$n,v$a,v$U,v$x])},v$n.translate=function(v$n,v$a){this._saveToCmd(v$I._context._translate,[v$n,v$a])},v$n.save=function(){this._saveToCmd(v$I._context._save,[])},v$n.restore=function(){this._saveToCmd(v$I._context._restore,[])},v$n.replaceText=function(v$n){this._repaint();var v$a=this._cmds;if(v$a){for(var v$U=v$a.length-1;-1<v$U;v$U--)if(this._isTextCmd(v$a[v$U].callee))return v$a[v$U][0].toUpperCase?v$a[v$U][0]=v$n:v$a[v$U][0].setText(v$n),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=v$n:this._one[0].setText(v$n),!0;return!1},v$n._isTextCmd=function(v$n){return v$n===v$I._context._fillText||v$n===v$I._context._fillBorderText||v$n===v$I._context._strokeText},v$n.replaceTextColor=function(v$n){this._repaint();var v$a=this._cmds;if(v$a)for(var v$U=v$a.length-1;-1<v$U;v$U--)this._isTextCmd(v$a[v$U].callee)&&(v$a[v$U][4]=v$n,v$a[v$U][0].toUpperCase||(v$a[v$U][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=v$n,this._one[0].toUpperCase||(this._one[0].changed=!0))},v$n.loadImage=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=this;void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0);var v$V=v$Vn.getRes(v$n);function v$y(v$n){v$n&&(v$Q.drawTexture(v$n,v$a,v$U,v$x,v$D),null!=v$p&&v$p.call(v$Q._sp,v$n))}v$V?v$y(v$V):v$k.loader.load(v$n,v$A.create(null,v$y),null,"image")},v$n._renderEmpty=function(v$n,v$a,v$U,v$x){},v$n._renderAll=function(v$n,v$a,v$U,v$x){for(var v$D,v$p=this._cmds,v$Q=0,v$V=v$p.length;v$Q<v$V;v$Q++)(v$D=v$p[v$Q]).callee.call(v$a,v$U,v$x,v$D)},v$n._renderOne=function(v$n,v$a,v$U,v$x){this._one.callee.call(v$a,v$U,v$x,this._one)},v$n._renderOneImg=function(v$n,v$a,v$U,v$x){this._one.callee.call(v$a,v$U,v$x,this._one),2305!==v$n._renderType&&(v$n._renderType|=1)},v$n.drawLine=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$p&&(v$p=1);var v$Q=0;v$I.isWebGL&&(v$Q=v$r.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(v$Q));var v$V=v$p%2==0?0:.5,v$y=[v$n+v$V,v$a+v$V,v$U+v$V,v$x+v$V,v$D,v$p,v$Q];this._saveToCmd(v$I._context._drawLine,v$y)},v$n.drawLines=function(v$n,v$a,v$U,v$x,v$D){void 0===v$D&&(v$D=1);var v$p=0;if(v$U&&!(v$U.length<4)){v$I.isWebGL&&(v$p=v$r.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(v$p));var v$Q=v$D%2==0?0:.5,v$V=[v$n+v$Q,v$a+v$Q,v$U,v$x,v$D,v$p];this._saveToCmd(v$I._context._drawLines,v$V)}},v$n.drawCurves=function(v$n,v$a,v$U,v$x,v$D){void 0===v$D&&(v$D=1);var v$p=[v$n,v$a,v$U,v$x,v$D];this._saveToCmd(v$I._context._drawCurves,v$p)},v$n.drawRect=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){void 0===v$Q&&(v$Q=1);var v$V=v$p?v$Q/2:0,v$y=v$p?v$Q:0,v$R=[v$n+v$V,v$a+v$V,v$U-v$y,v$x-v$y,v$D,v$p,v$Q];this._saveToCmd(v$I._context._drawRect,v$R)},v$n.drawCircle=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$p&&(v$p=1);var v$Q=v$D?v$p/2:0,v$V=0;v$I.isWebGL&&(v$V=v$r.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(v$V));var v$y=[v$n,v$a,v$U-v$Q,v$x,v$D,v$p,v$V];this._saveToCmd(v$I._context._drawCircle,v$y)},v$n.drawPie=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){void 0===v$V&&(v$V=1);var v$y=v$Q?v$V/2:0,v$R=v$Q?v$V:0,v$X=0;v$I.isWebGL&&(v$X=v$r.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(v$X));var v$z=[v$n+v$y,v$a+v$y,v$U-v$R,v$x,v$D,v$p,v$Q,v$V,v$X];v$z[3]=v$t.toRadian(v$x),v$z[4]=v$t.toRadian(v$D),this._saveToCmd(v$I._context._drawPie,v$z)},v$n.drawPoly=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$p&&(v$p=1);var v$Q=0,v$V=!1;v$I.isWebGL&&(v$Q=v$r.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(v$Q),v$V=!(6<v$U.length));var v$y=v$D?v$p%2==0?0:.5:0,v$R=[v$n+v$y,v$a+v$y,v$U,v$x,v$D,v$p,v$Q,v$V];this._saveToCmd(v$I._context._drawPoly,v$R)},v$n.drawPath=function(v$n,v$a,v$U,v$x,v$D){var v$p=[v$n,v$a,v$U,v$x,v$D];this._saveToCmd(v$I._context._drawPath,v$p)},v$E(0,v$n,"cmds",function(){return this._cmds},function(v$n){this._sp&&(this._sp._renderType|=512),this._cmds=v$n,this._render=this._renderAll,this._repaint()}),v$z.__init__=function(){if(v$I.isConchNode){for(var v$n=laya.display.Graphics.prototype,v$a=v$f.window.ConchGraphics.prototype,v$U=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],v$x=0,v$D=v$U.length;v$x<=v$D;v$x++){var v$p=v$U[v$x];v$n[v$p]=v$a[v$p]}v$n._saveToCmd=null,v$a.drawImageS&&(v$n.drawTextures=function(v$n,v$a){if(v$n&&v$n.loaded&&v$n.bitmap&&v$n.source){var v$U=v$n.uv,v$x=v$n.bitmap.width,v$D=v$n.bitmap.height;this.drawImageS(v$n.bitmap.source,v$U[0]*v$x,v$U[1]*v$D,(v$U[2]-v$U[0])*v$x,(v$U[5]-v$U[3])*v$D,v$n.offsetX,v$n.offsetY,v$n.width,v$n.height,v$a)}}),v$n.drawTexture=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){if(void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0),void 0===v$Q&&(v$Q=1),v$n)if(v$n.loaded){if(v$n.loaded&&v$n.bitmap&&v$n.source&&(v$x||(v$x=v$n.sourceWidth),v$D||(v$D=v$n.sourceHeight),v$Q=v$Q<0?0:1<v$Q?1:v$Q,v$x=v$x-v$n.sourceWidth+v$n.width,v$D=v$D-v$n.sourceHeight+v$n.height,!(v$x<=0||v$D<=0))){v$a+=v$n.offsetX,v$U+=v$n.offsetY;var v$V=v$n.uv,v$y=v$n.bitmap.width,v$R=v$n.bitmap.height;v$V[4]<v$V[0]&&v$V[5]<v$V[1]?this.drawImageM(v$n.bitmap.source,v$V[4]*v$y,v$V[5]*v$R,(v$V[0]-v$V[4])*v$y,(v$V[1]-v$V[5])*v$R,v$a,v$U,v$x,v$D,v$p,v$Q):this.drawImageM(v$n.bitmap.source,v$V[0]*v$y,v$V[1]*v$R,(v$V[2]-v$V[0])*v$y,(v$V[5]-v$V[3])*v$R,v$a,v$U,v$x,v$D,v$p,v$Q),this._repaint()}}else v$n.once("loaded",this,function(){this.drawTexture(v$n,v$a,v$U,v$x,v$D,v$p)})},v$n.fillTexture=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){if(void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0),void 0===v$p&&(v$p="repeat"),v$n&&v$n.loaded){var v$V,v$y=v$I._context.ctx,v$R=v$n.bitmap.width,v$X=v$n.bitmap.height,v$z=v$n.uv;v$V=v$n.uv!=v$Xn.DEF_UV?v$y.createPattern(v$n.bitmap.source,v$p,v$z[0]*v$R,v$z[1]*v$X,(v$z[2]-v$z[0])*v$R,(v$z[5]-v$z[3])*v$X):v$y.createPattern(v$n.bitmap.source,v$p);var v$i=0,v$q=0;v$Q&&(v$a+=v$Q.x%v$n.width,v$U+=v$Q.y%v$n.height,v$i-=v$Q.x%v$n.width,v$q-=v$Q.y%v$n.height),this._fillImage(v$V,v$a,v$U,v$i,v$q,v$x,v$D)}}}},v$z._cache=[],v$z}(),v$U=function(){function v$T(){this._cacheBoundsType=!1}v$X(v$T,"laya.display.GraphicsBounds");var v$n=v$T.prototype;return v$n.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},v$n.reset=function(){this._temp&&(this._temp.length=0)},v$n.getBounds=function(v$n){return void 0===v$n&&(v$n=!1),(!this._bounds||!this._temp||this._temp.length<1||v$n!=this._cacheBoundsType)&&(this._bounds=v$_._getWrapRec(this.getBoundPoints(v$n),this._bounds)),this._cacheBoundsType=v$n,this._bounds},v$n.getBoundPoints=function(v$n){return void 0===v$n&&(v$n=!1),(!this._temp||this._temp.length<1||v$n!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(v$n)),this._cacheBoundsType=v$n,this._rstBoundPoints=v$t.copyArray(this._rstBoundPoints,this._temp)},v$n._getCmdPoints=function(v$n){void 0===v$n&&(v$n=!1);var v$a,v$U,v$x=v$I._context,v$D=this._graphics.cmds;if((v$a=this._temp||(this._temp=[])).length=0,v$D||null==this._graphics._one||(v$T._tempCmds.length=0,v$T._tempCmds.push(this._graphics._one),v$D=v$T._tempCmds),!v$D)return v$a;(v$U=v$T._tempMatrixArrays).length=0;var v$p=v$T._initMatrix;v$p.identity();for(var v$Q,v$V,v$y=v$T._tempMatrix,v$R=NaN,v$X=NaN,v$z=NaN,v$i=NaN,v$q=NaN,v$E=NaN,v$m=0,v$b=v$D.length;v$m<v$b;v$m++)if((v$Q=v$D[v$m]).callee)switch(v$Q.callee){case v$x._save:case 7:v$U.push(v$p),v$p=v$p.clone();break;case v$x._restore:case 8:v$p=v$U.pop();break;case v$x._scale:case 5:v$y.identity(),v$y.translate(-v$Q[2],-v$Q[3]),v$y.scale(v$Q[0],v$Q[1]),v$y.translate(v$Q[2],v$Q[3]),this._switchMatrix(v$p,v$y);break;case v$x._rotate:case 3:v$y.identity(),v$y.translate(-v$Q[1],-v$Q[2]),v$y.rotate(v$Q[0]),v$y.translate(v$Q[1],v$Q[2]),this._switchMatrix(v$p,v$y);break;case v$x._translate:case 6:v$y.identity(),v$y.translate(v$Q[0],v$Q[1]),this._switchMatrix(v$p,v$y);break;case v$x._transform:case 4:v$y.identity(),v$y.translate(-v$Q[1],-v$Q[2]),v$y.concat(v$Q[0]),v$y.translate(v$Q[1],v$Q[2]),this._switchMatrix(v$p,v$y);break;case 16:case 24:v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[0],v$Q[1],v$Q[2],v$Q[3]),v$p);break;case 17:v$p.copyTo(v$y),v$y.concat(v$Q[4]),v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[0],v$Q[1],v$Q[2],v$Q[3]),v$y);break;case v$x._drawTexture:v$V=v$Q[0],v$n?v$Q[3]&&v$Q[4]?v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[1],v$Q[2],v$Q[3],v$Q[4]),v$p):(v$V=v$Q[0],v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[1],v$Q[2],v$V.width,v$V.height),v$p)):(v$R=(v$Q[3]||v$V.sourceWidth)/v$V.width,v$X=(v$Q[4]||v$V.sourceHeight)/v$V.height,v$z=v$R*v$V.sourceWidth,v$i=v$X*v$V.sourceHeight,v$q=0<v$V.offsetX?v$V.offsetX:0,v$E=0<v$V.offsetY?v$V.offsetY:0,v$q*=v$R,v$E*=v$X,v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[1]-v$q,v$Q[2]-v$E,v$z,v$i),v$p));break;case v$x._fillTexture:v$Q[3]&&v$Q[4]?v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[1],v$Q[2],v$Q[3],v$Q[4]),v$p):(v$V=v$Q[0],v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[1],v$Q[2],v$V.width,v$V.height),v$p));break;case v$x._drawTextureWithTransform:var v$P;v$P=v$Q[5]?(v$p.copyTo(v$y),v$y.concat(v$Q[5]),v$y):v$p,v$n?v$Q[3]&&v$Q[4]?v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[1],v$Q[2],v$Q[3],v$Q[4]),v$P):(v$V=v$Q[0],v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[1],v$Q[2],v$V.width,v$V.height),v$P)):(v$V=v$Q[0],v$R=(v$Q[3]||v$V.sourceWidth)/v$V.width,v$X=(v$Q[4]||v$V.sourceHeight)/v$V.height,v$z=v$R*v$V.sourceWidth,v$i=v$X*v$V.sourceHeight,v$q=0<v$V.offsetX?v$V.offsetX:0,v$E=0<v$V.offsetY?v$V.offsetY:0,v$q*=v$R,v$E*=v$X,v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[1]-v$q,v$Q[2]-v$E,v$z,v$i),v$P));break;case v$x._drawRect:case 13:v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[0],v$Q[1],v$Q[2],v$Q[3]),v$p);break;case v$x._drawCircle:case v$x._fillCircle:case 14:v$T._addPointArrToRst(v$a,v$_._getBoundPointS(v$Q[0]-v$Q[2],v$Q[1]-v$Q[2],v$Q[2]+v$Q[2],v$Q[2]+v$Q[2]),v$p);break;case v$x._drawLine:case 20:v$T._tempPoints.length=0;var v$A;v$A=.5*v$Q[5],v$Q[0]==v$Q[2]?v$T._tempPoints.push(v$Q[0]+v$A,v$Q[1],v$Q[2]+v$A,v$Q[3],v$Q[0]-v$A,v$Q[1],v$Q[2]-v$A,v$Q[3]):v$Q[1]==v$Q[3]?v$T._tempPoints.push(v$Q[0],v$Q[1]+v$A,v$Q[2],v$Q[3]+v$A,v$Q[0],v$Q[1]-v$A,v$Q[2],v$Q[3]-v$A):v$T._tempPoints.push(v$Q[0],v$Q[1],v$Q[2],v$Q[3]),v$T._addPointArrToRst(v$a,v$T._tempPoints,v$p);break;case v$x._drawCurves:case 22:v$T._addPointArrToRst(v$a,v$K.I.getBezierPoints(v$Q[2]),v$p,v$Q[0],v$Q[1]);break;case v$x._drawPoly:case v$x._drawLines:case 18:v$T._addPointArrToRst(v$a,v$Q[2],v$p,v$Q[0],v$Q[1]);break;case v$x._drawPath:case 19:v$T._addPointArrToRst(v$a,this._getPathPoints(v$Q[2]),v$p,v$Q[0],v$Q[1]);break;case v$x._drawPie:case 15:v$T._addPointArrToRst(v$a,this._getPiePoints(v$Q[0],v$Q[1],v$Q[2],v$Q[3],v$Q[4]),v$p)}return 200<v$a.length?v$a=v$t.copyArray(v$a,v$_._getWrapRec(v$a)._getBoundPoints()):8<v$a.length&&(v$a=v$Y.scanPList(v$a)),v$a},v$n._switchMatrix=function(v$n,v$a){v$a.concat(v$n),v$a.copyTo(v$n)},v$n._getPiePoints=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$T._tempPoints;v$T._tempPoints.length=0,v$p.push(v$n,v$a);var v$Q=(v$D-v$x)%(2*Math.PI)/10,v$V=NaN,v$y=v$x;for(v$V=0;v$V<=10;v$V++)v$p.push(v$n+v$U*Math.cos(v$y),v$a+v$U*Math.sin(v$y)),v$y+=v$Q;return v$p},v$n._getPathPoints=function(v$n){var v$a,v$U,v$x=0,v$D=v$T._tempPoints;for(v$D.length=0,v$a=v$n.length,v$x=0;v$x<v$a;v$x++)1<(v$U=v$n[v$x]).length&&(v$D.push(v$U[1],v$U[2]),3<v$U.length&&v$D.push(v$U[3],v$U[4]));return v$D},v$T._addPointArrToRst=function(v$n,v$a,v$U,v$x,v$D){void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0);var v$p,v$Q=0;for(v$p=v$a.length,v$Q=0;v$Q<v$p;v$Q+=2)v$T._addPointToRst(v$n,v$a[v$Q]+v$x,v$a[v$Q+1]+v$D,v$U)},v$T._addPointToRst=function(v$n,v$a,v$U,v$x){var v$D=v$N.TEMP;v$D.setTo(v$a||0,v$U||0),v$x.transformPoint(v$D),v$n.push(v$D.x,v$D.y)},v$T._tempPoints=[],v$T._tempMatrixArrays=[],v$T._tempCmds=[],v$y(v$T,["_tempMatrix",function(){return this._tempMatrix=new v$c},"_initMatrix",function(){return this._initMatrix=new v$c}]),v$T}(),v$p=function(){function v$n(){}v$X(v$n,"laya.events.Event");var v$a=v$n.prototype;return v$a.setTo=function(v$n,v$a,v$U){return this.type=v$n,this.currentTarget=v$a,this.target=v$U,this},v$a.stopPropagation=function(){this._stoped=!0},v$E(0,v$a,"stageY",function(){return v$k.stage.mouseY}),v$E(0,v$a,"charCode",function(){return this.nativeEvent.charCode}),v$E(0,v$a,"touches",function(){var v$n=this.nativeEvent.touches;if(v$n)for(var v$a=v$k.stage,v$U=0,v$x=v$n.length;v$U<v$x;v$U++){var v$D=v$n[v$U],v$p=v$N.TEMP;v$p.setTo(v$D.clientX,v$D.clientY),v$a._canvasTransform.invertTransformPoint(v$p),v$a.transform.invertTransformPoint(v$p),v$D.stageX=v$p.x,v$D.stageY=v$p.y}return v$n}),v$E(0,v$a,"keyLocation",function(){return this.nativeEvent.keyLocation}),v$E(0,v$a,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),v$E(0,v$a,"altKey",function(){return this.nativeEvent.altKey}),v$E(0,v$a,"shiftKey",function(){return this.nativeEvent.shiftKey}),v$E(0,v$a,"stageX",function(){return v$k.stage.mouseX}),v$n.EMPTY=new v$n,v$n.MOUSE_DOWN="mousedown",v$n.MOUSE_UP="mouseup",v$n.CLICK="click",v$n.RIGHT_MOUSE_DOWN="rightmousedown",v$n.RIGHT_MOUSE_UP="rightmouseup",v$n.RIGHT_CLICK="rightclick",v$n.MOUSE_MOVE="mousemove",v$n.MOUSE_OVER="mouseover",v$n.MOUSE_OUT="mouseout",v$n.MOUSE_WHEEL="mousewheel",v$n.ROLL_OVER="mouseover",v$n.ROLL_OUT="mouseout",v$n.DOUBLE_CLICK="doubleclick",v$n.CHANGE="change",v$n.CHANGED="changed",v$n.RESIZE="resize",v$n.ADDED="added",v$n.REMOVED="removed",v$n.DISPLAY="display",v$n.UNDISPLAY="undisplay",v$n.ERROR="error",v$n.COMPLETE="complete",v$n.LOADED="loaded",v$n.INITED="inited",v$n.PROGRESS="progress",v$n.INPUT="input",v$n.RENDER="render",v$n.OPEN="open",v$n.MESSAGE="message",v$n.CLOSE="close",v$n.KEY_DOWN="keydown",v$n.KEY_PRESS="keypress",v$n.KEY_UP="keyup",v$n.FRAME="enterframe",v$n.DRAG_START="dragstart",v$n.DRAG_MOVE="dragmove",v$n.DRAG_END="dragend",v$n.ENTER="enter",v$n.SELECT="select",v$n.BLUR="blur",v$n.FOCUS="focus",v$n.VISIBILITY_CHANGE="visibilitychange",v$n.FOCUS_CHANGE="focuschange",v$n.PLAYED="played",v$n.PAUSED="paused",v$n.STOPPED="stopped",v$n.START="start",v$n.END="end",v$n.ENABLE_CHANGED="enablechanged",v$n.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",v$n.COMPONENT_ADDED="componentadded",v$n.COMPONENT_REMOVED="componentremoved",v$n.LAYER_CHANGED="layerchanged",v$n.HIERARCHY_LOADED="hierarchyloaded",v$n.RECOVERED="recovered",v$n.RELEASED="released",v$n.LINK="link",v$n.LABEL="label",v$n.FULL_SCREEN_CHANGE="fullscreenchange",v$n.DEVICE_LOST="devicelost",v$n.MESH_CHANGED="meshchanged",v$n.MATERIAL_CHANGED="materialchanged",v$n.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",v$n.ANIMATION_CHANGED="animationchanged",v$n.TRIGGER_ENTER="triggerenter",v$n.TRIGGER_STAY="triggerstay",v$n.TRIGGER_EXIT="triggerexit",v$n.TRAIL_FILTER_CHANGE="trailfilterchange",v$n.DOMINO_FILTER_CHANGE="dominofilterchange",v$n}(),v$z=(function(){function v$n(){}v$X(v$n,"laya.events.Keyboard"),v$n.NUMBER_0=48,v$n.NUMBER_1=49,v$n.NUMBER_2=50,v$n.NUMBER_3=51,v$n.NUMBER_4=52,v$n.NUMBER_5=53,v$n.NUMBER_6=54,v$n.NUMBER_7=55,v$n.NUMBER_8=56,v$n.NUMBER_9=57,v$n.A=65,v$n.B=66,v$n.C=67,v$n.D=68,v$n.E=69,v$n.F=70,v$n.G=71,v$n.H=72,v$n.I=73,v$n.J=74,v$n.K=75,v$n.L=76,v$n.M=77,v$n.N=78,v$n.O=79,v$n.P=80,v$n.Q=81,v$n.R=82,v$n.S=83,v$n.T=84,v$n.U=85,v$n.V=86,v$n.W=87,v$n.X=88,v$n.Y=89,v$n.Z=90,v$n.F1=112,v$n.F2=113,v$n.F3=114,v$n.F4=115,v$n.F5=116,v$n.F6=117,v$n.F7=118,v$n.F8=119,v$n.F9=120,v$n.F10=121,v$n.F11=122,v$n.F12=123,v$n.F13=124,v$n.F14=125,v$n.F15=126,v$n.NUMPAD=21,v$n.NUMPAD_0=96,v$n.NUMPAD_1=97,v$n.NUMPAD_2=98,v$n.NUMPAD_3=99,v$n.NUMPAD_4=100,v$n.NUMPAD_5=101,v$n.NUMPAD_6=102,v$n.NUMPAD_7=103,v$n.NUMPAD_8=104,v$n.NUMPAD_9=105,v$n.NUMPAD_ADD=107,v$n.NUMPAD_DECIMAL=110,v$n.NUMPAD_DIVIDE=111,v$n.NUMPAD_ENTER=108,v$n.NUMPAD_MULTIPLY=106,v$n.NUMPAD_SUBTRACT=109,v$n.SEMICOLON=186,v$n.EQUAL=187,v$n.COMMA=188,v$n.MINUS=189,v$n.PERIOD=190,v$n.SLASH=191,v$n.BACKQUOTE=192,v$n.LEFTBRACKET=219,v$n.BACKSLASH=220,v$n.RIGHTBRACKET=221,v$n.QUOTE=222,v$n.ALTERNATE=18,v$n.BACKSPACE=8,v$n.CAPS_LOCK=20,v$n.COMMAND=15,v$n.CONTROL=17,v$n.DELETE=46,v$n.ENTER=13,v$n.ESCAPE=27,v$n.PAGE_UP=33,v$n.PAGE_DOWN=34,v$n.END=35,v$n.HOME=36,v$n.LEFT=37,v$n.UP=38,v$n.RIGHT=39,v$n.DOWN=40,v$n.SHIFT=16,v$n.SPACE=32,v$n.TAB=9,v$n.INSERT=45}(),function(){function v$D(){}return v$X(v$D,"laya.events.KeyBoardManager"),v$D.__init__=function(){v$D._addEvent("keydown"),v$D._addEvent("keypress"),v$D._addEvent("keyup")},v$D._addEvent=function(v$a){v$f.document.addEventListener(v$a,function(v$n){laya.events.KeyBoardManager._dispatch(v$n,v$a)},!0)},v$D._dispatch=function(v$n,v$a){if(v$D.enabled){v$D._event._stoped=!1,v$D._event.nativeEvent=v$n,v$D._event.keyCode=v$n.keyCode||v$n.which||v$n.charCode,"keydown"===v$a?v$D._pressKeys[v$D._event.keyCode]=!0:"keyup"===v$a&&(v$D._pressKeys[v$D._event.keyCode]=null);for(var v$U=v$k.stage.focus&&null!=v$k.stage.focus.event&&v$k.stage.focus.displayedInStage?v$k.stage.focus:v$k.stage,v$x=v$U;v$x;)v$x.event(v$a,v$D._event.setTo(v$a,v$x,v$U)),v$x=v$x.parent}},v$D.hasKeyDown=function(v$n){return v$D._pressKeys[v$n]},v$D._pressKeys={},v$D.enabled=!0,v$y(v$D,["_event",function(){return this._event=new v$p}]),v$D}()),v$m=(function(){function v$n(){}v$X(v$n,"laya.events.KeyLocation"),v$n.STANDARD=0,v$n.LEFT=1,v$n.RIGHT=2,v$n.NUM_PAD=3}(),function(){function v$R(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=v$f.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new v$p,this._matrix=new v$c,this._point=new v$N,this._rect=new v$_,this._prePoint=new v$N,this._curTouchID=NaN}v$X(v$R,"laya.events.MouseManager");var v$n=v$R.prototype;return v$n.__init__=function(v$n,v$a){var v$U=this;this._stage=v$n;var v$x=this,v$D=this._eventList;v$a.oncontextmenu=function(v$n){if(v$R.enabled)return!1},v$a.addEventListener("mousedown",function(v$n){v$R.enabled&&(v$f.onIE||v$n.preventDefault(),v$D.push(v$n),v$x.mouseDownTime=v$f.now())}),v$a.addEventListener("mouseup",function(v$n){v$R.enabled&&(v$n.preventDefault(),v$D.push(v$n),v$x.mouseDownTime=-v$f.now())},!0),v$a.addEventListener("mousemove",function(v$n){if(v$R.enabled){v$n.preventDefault();var v$a=v$f.now();if(v$a-v$x._lastMoveTimer<10)return;v$x._lastMoveTimer=v$a,v$D.push(v$n)}},!0),v$a.addEventListener("mouseout",function(v$n){v$R.enabled&&v$D.push(v$n)}),v$a.addEventListener("mouseover",function(v$n){v$R.enabled&&v$D.push(v$n)}),v$a.addEventListener("touchstart",function(v$n){v$R.enabled&&(v$D.push(v$n),v$R._isFirstTouch||v$Yn.isInputting||v$n.preventDefault(),v$x.mouseDownTime=v$f.now())}),v$a.addEventListener("touchend",function(v$n){v$R.enabled?(v$R._isFirstTouch||v$Yn.isInputting||v$n.preventDefault(),v$R._isFirstTouch=!1,v$D.push(v$n),v$x.mouseDownTime=-v$f.now()):v$U._curTouchID=NaN},!0),v$a.addEventListener("touchmove",function(v$n){v$R.enabled&&(v$n.preventDefault(),v$D.push(v$n))},!0),v$a.addEventListener("touchcancel",function(v$n){v$R.enabled?(v$n.preventDefault(),v$D.push(v$n)):v$U._curTouchID=NaN},!0),v$a.addEventListener("mousewheel",function(v$n){v$R.enabled&&v$D.push(v$n)}),v$a.addEventListener("DOMMouseScroll",function(v$n){v$R.enabled&&v$D.push(v$n)})},v$n.initEvent=function(v$n,v$a){var v$U;this._event._stoped=!1,this._event.nativeEvent=v$a||v$n,this._target=null,this._point.setTo(v$n.pageX||v$n.clientX,v$n.pageY||v$n.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=v$n.identifier||0,this._tTouchID=this._event.touchId,(v$U=v$b.I._event)._stoped=!1,v$U.nativeEvent=this._event.nativeEvent,v$U.touchId=this._event.touchId},v$n.checkMouseWheel=function(v$n){this._event.delta=v$n.wheelDelta?.025*v$n.wheelDelta:-v$n.detail;for(var v$a=v$b.I.getLastOvers(),v$U=0,v$x=v$a.length;v$U<v$x;v$U++){var v$D=v$a[v$U];v$D.event("mousewheel",this._event.setTo("mousewheel",v$D,this._target))}},v$n.onMouseMove=function(v$n){v$b.I.onMouseMove(v$n,this._tTouchID)},v$n.onMouseDown=function(v$n){if(v$Yn.isInputting&&v$k.stage.focus&&v$k.stage.focus.focus&&!v$k.stage.focus.contains(this._target)){var v$a=v$k.stage.focus._tf||v$k.stage.focus,v$U=v$n._tf||v$n;v$U instanceof laya.display.Input&&v$U.multiline==v$a.multiline?v$a._focusOut():v$a.focus=!1}v$b.I.onMouseDown(v$n,this._tTouchID,this._isLeftMouse)},v$n.onMouseUp=function(v$n){v$b.I.onMouseUp(v$n,this._tTouchID,this._isLeftMouse)},v$n.check=function(v$n,v$a,v$U,v$x){this._point.setTo(v$a,v$U),v$n.fromParentPoint(this._point),v$a=this._point.x,v$U=this._point.y;var v$D=v$n.scrollRect;if(v$D&&(this._rect.setTo(v$D.x,v$D.y,v$D.width,v$D.height),!this._rect.contains(v$a,v$U)))return!1;if(!this.disableMouseEvent){if(v$n.hitTestPrior&&!v$n.mouseThrough&&!this.hitTest(v$n,v$a,v$U))return!1;for(var v$p=v$n._childs.length-1;-1<v$p;v$p--){var v$Q=v$n._childs[v$p];if(!v$Q.destroyed&&v$Q.mouseEnabled&&v$Q.visible&&this.check(v$Q,v$a,v$U,v$x))return!0}}var v$V=!(!v$n.hitTestPrior||v$n.mouseThrough||this.disableMouseEvent)||this.hitTest(v$n,v$a,v$U);return v$V?(this._target=v$n,v$x.call(this,v$n)):v$x===this.onMouseUp&&v$n===this._stage&&(this._target=this._stage,v$x.call(this,this._target)),v$V},v$n.hitTest=function(v$n,v$a,v$U){var v$x=!1;if(v$n.scrollRect&&(v$a-=v$n.scrollRect.x,v$U-=v$n.scrollRect.y),v$n.hitArea instanceof laya.utils.HitArea)return v$n.hitArea.isHit(v$a,v$U);if(0<v$n.width&&0<v$n.height||v$n.mouseThrough||v$n.hitArea)if(v$n.mouseThrough)v$x=v$n.getGraphicBounds().contains(v$a,v$U);else{var v$D=this._rect;v$n.hitArea?v$D=v$n.hitArea:v$D.setTo(0,0,v$n.width,v$n.height),v$x=v$D.contains(v$a,v$U)}return v$x},v$n.runEvent=function(){var v$n=this._eventList.length;if(v$n){this.mouseEventTime=v$f.now();var v$a,v$U=0,v$x=0,v$D=0;try{for(;v$U<v$n;){var v$p=this._eventList[v$U];switch("mousemove"!==v$p.type&&(this._prePoint.x=this._prePoint.y=-1e6),v$p.type){case"mousedown":this._touchIDs[0]=this._id++,v$R._isTouchRespond?v$R._isTouchRespond=!1:(this._isLeftMouse=0===v$p.button,this.initEvent(v$p),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===v$p.button,this.initEvent(v$p),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-v$p.clientX)+Math.abs(this._prePoint.y-v$p.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=v$p.clientX,this._prePoint.y=v$p.clientY,this.initEvent(v$p),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":v$R._isTouchRespond=!0,this._isLeftMouse=!0;var v$Q=v$p.changedTouches;for(v$x=0,v$D=v$Q.length;v$x<v$D;v$x++)v$a=v$Q[v$x],(v$R.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=v$a.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[v$a.identifier]=this._id++,this.initEvent(v$a,v$p),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":v$R._isTouchRespond=!0,this._isLeftMouse=!0;var v$V=v$p.changedTouches;for(v$x=0,v$D=v$V.length;v$x<v$D;v$x++)if(v$a=v$V[v$x],v$R.multiTouchEnabled||v$a.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(v$a,v$p);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var v$y=v$p.changedTouches;for(v$x=0,v$D=v$y.length;v$x<v$D;v$x++)v$a=v$y[v$x],(v$R.multiTouchEnabled||v$a.identifier==this._curTouchID)&&(this.initEvent(v$a,v$p),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(v$p);break;case"mouseout":v$b.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}v$U++}}catch(v$n){throw this._eventList.length=0,v$n}this._eventList.length=0}},v$R.enabled=!0,v$R.multiTouchEnabled=!0,v$R._isTouchRespond=!1,v$R._isFirstTouch=!0,v$y(v$R,["instance",function(){return this.instance=new v$R}]),v$R}()),v$b=function(){function v$E(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new v$p}v$X(v$E,"laya.events.TouchManager");var v$n=v$E.prototype;return v$n._clearTempArrs=function(){v$E._oldArr.length=0,v$E._newArr.length=0,v$E._tEleArr.length=0},v$n.getTouchFromArr=function(v$n,v$a){var v$U,v$x,v$D=0;for(v$U=v$a.length,v$D=0;v$D<v$U;v$D++)if((v$x=v$a[v$D]).id==v$n)return v$x;return null},v$n.removeTouchFromArr=function(v$n,v$a){var v$U=0;for(v$U=v$a.length-1;0<=v$U;v$U--)v$a[v$U].id==v$n&&v$a.splice(v$U,1)},v$n.createTouchO=function(v$n,v$a){var v$U;return(v$U=v$S.getItem("TouchData")||{}).id=v$a,v$U.tar=v$n,v$U},v$n.onMouseDown=function(v$n,v$a,v$U){var v$x,v$D,v$p,v$Q;(void 0===v$U&&(v$U=!1),this.enable)&&(v$x=this.getTouchFromArr(v$a,this.preOvers),v$p=this.getEles(v$n,null,v$E._tEleArr),v$x?v$x.tar=v$n:(v$D=this.createTouchO(v$n,v$a),this.preOvers.push(v$D)),v$f.onMobile&&this.sendEvents(v$p,"mouseover",v$a),v$Q=v$U?this.preDowns:this.preRightDowns,(v$x=this.getTouchFromArr(v$a,v$Q))?v$x.tar=v$n:(v$D=this.createTouchO(v$n,v$a),v$Q.push(v$D)),this.sendEvents(v$p,v$U?"mousedown":"rightmousedown",v$a),this._clearTempArrs())},v$n.sendEvents=function(v$n,v$a,v$U){void 0===v$U&&(v$U=0);var v$x,v$D,v$p,v$Q=0;for(v$x=v$n.length,this._event._stoped=!1,v$D=v$n[0],v$Q=0;v$Q<v$x;v$Q++){if((v$p=v$n[v$Q]).destroyed)return;if(v$p.event(v$a,this._event.setTo(v$a,v$p,v$D)),this._event._stoped)break}},v$n.getEles=function(v$n,v$a,v$U){for(v$U?v$U.length=0:v$U=[];v$n&&v$n!=v$a;)v$U.push(v$n),v$n=v$n.parent;return v$U},v$n.checkMouseOutAndOverOfMove=function(v$n,v$a,v$U){if(void 0===v$U&&(v$U=0),v$a!=v$n){var v$x,v$D,v$p=0,v$Q=0;if(v$a.contains(v$n))v$D=this.getEles(v$n,v$a,v$E._tEleArr),this.sendEvents(v$D,"mouseover",v$U);else if(v$n.contains(v$a))v$D=this.getEles(v$a,v$n,v$E._tEleArr),this.sendEvents(v$D,"mouseout",v$U);else{var v$V,v$y;(v$D=v$E._tEleArr).length=0,v$V=this.getEles(v$a,null,v$E._oldArr),v$y=this.getEles(v$n,null,v$E._newArr),v$Q=v$V.length;var v$R=0;for(v$p=0;v$p<v$Q;v$p++){if(v$x=v$V[v$p],0<=(v$R=v$y.indexOf(v$x))){v$y.splice(v$R,v$y.length-v$R);break}v$D.push(v$x)}0<v$D.length&&this.sendEvents(v$D,"mouseout",v$U),0<v$y.length&&this.sendEvents(v$y,"mouseover",v$U)}}},v$n.onMouseMove=function(v$n,v$a){var v$U,v$x;this.enable&&((v$U=this.getTouchFromArr(v$a,this.preOvers))?(this.checkMouseOutAndOverOfMove(v$n,v$U.tar),v$U.tar=v$n,v$x=this.getEles(v$n,null,v$E._tEleArr)):(v$x=this.getEles(v$n,null,v$E._tEleArr),this.sendEvents(v$x,"mouseover",v$a),this.preOvers.push(this.createTouchO(v$n,v$a))),this.sendEvents(v$x,"mousemove",v$a),this._clearTempArrs())},v$n.getLastOvers=function(){return(v$E._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,v$E._tEleArr):(v$E._tEleArr.push(v$k.stage),v$E._tEleArr)},v$n.stageMouseOut=function(){var v$n;v$n=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(v$n,"mouseout",0)},v$n.onMouseUp=function(v$n,v$a,v$U){if(void 0===v$U&&(v$U=!1),this.enable){var v$x,v$D,v$p,v$Q,v$V,v$y,v$R=0,v$X=0,v$z=v$f.onMobile;if(v$D=this.getEles(v$n,null,v$E._tEleArr),this.sendEvents(v$D,v$U?"mouseup":"rightmouseup",v$a),v$y=v$U?this.preDowns:this.preRightDowns,v$x=this.getTouchFromArr(v$a,v$y)){var v$i,v$q=v$f.now();if(v$i=v$q-this._lastClickTime<300,this._lastClickTime=v$q,v$n==v$x.tar)v$V=v$D;else for(v$p=this.getEles(v$x.tar,null,v$E._oldArr),(v$V=v$E._newArr).length=0,v$X=v$p.length,v$R=0;v$R<v$X;v$R++)v$Q=v$p[v$R],0<=v$D.indexOf(v$Q)&&v$V.push(v$Q);0<v$V.length&&this.sendEvents(v$V,v$U?"click":"rightclick",v$a),v$U&&v$i&&this.sendEvents(v$V,"doubleclick",v$a),this.removeTouchFromArr(v$a,v$y),v$x.tar=null,v$S.recover("TouchData",v$x)}else;(v$x=this.getTouchFromArr(v$a,this.preOvers))&&v$z&&((v$V=this.getEles(v$x.tar,null,v$V))&&0<v$V.length&&this.sendEvents(v$V,"mouseout",v$a),this.removeTouchFromArr(v$a,this.preOvers),v$x.tar=null,v$S.recover("TouchData",v$x)),this._clearTempArrs()}},v$E._oldArr=[],v$E._newArr=[],v$E._tEleArr=[],v$y(v$E,["I",function(){return this.I=new v$E}]),v$E}(),v$P=function(){function v$n(){this._action=null}v$X(v$n,"laya.filters.Filter");var v$a=v$n.prototype;return v$k.imps(v$a,{"laya.filters.IFilter":!0}),v$a.callNative=function(v$n){},v$E(0,v$a,"type",function(){return-1}),v$E(0,v$a,"action",function(){return this._action}),v$n.BLUR=16,v$n.COLOR=32,v$n.GLOW=8,v$n._filterStart=null,v$n._filterEnd=null,v$n._EndTarget=null,v$n._recycleScope=null,v$n._filter=null,v$n._useSrc=null,v$n._endSrc=null,v$n._useOut=null,v$n._endOut=null,v$n}(),v$T=function(){function v$n(){this.data=null}v$X(v$n,"laya.filters.ColorFilterAction");var v$a=v$n.prototype;return v$k.imps(v$a,{"laya.filters.IFilterAction":!0}),v$a.apply=function(v$n){var v$a=v$n.ctx.ctx,v$U=v$n.ctx.ctx.canvas;if(0==v$U.width||0==v$U.height)return v$U;for(var v$x,v$D=v$a.getImageData(0,0,v$U.width,v$U.height),v$p=v$D.data,v$Q=0,v$V=v$p.length;v$Q<v$V;v$Q+=4)v$x=this.getColor(v$p[v$Q],v$p[v$Q+1],v$p[v$Q+2],v$p[v$Q+3]),0!=v$p[v$Q+3]&&(v$p[v$Q]=v$x[0],v$p[v$Q+1]=v$x[1],v$p[v$Q+2]=v$x[2],v$p[v$Q+3]=v$x[3]);return v$a.putImageData(v$D,0,0),v$n},v$a.getColor=function(v$n,v$a,v$U,v$x){var v$D=[];if(this.data._mat&&this.data._alpha){var v$p=this.data._mat,v$Q=this.data._alpha;v$D[0]=v$p[0]*v$n+v$p[1]*v$a+v$p[2]*v$U+v$p[3]*v$x+v$Q[0],v$D[1]=v$p[4]*v$n+v$p[5]*v$a+v$p[6]*v$U+v$p[7]*v$x+v$Q[1],v$D[2]=v$p[8]*v$n+v$p[9]*v$a+v$p[10]*v$U+v$p[11]*v$x+v$Q[2],v$D[3]=v$p[12]*v$n+v$p[13]*v$a+v$p[14]*v$U+v$p[15]*v$x+v$Q[3]}return v$D},v$n}(),v$K=(function(){function v$n(){}v$X(v$n,"laya.maths.Arith"),v$n.formatR=function(v$n){return v$n>Math.PI&&(v$n-=2*Math.PI),v$n<-Math.PI&&(v$n+=2*Math.PI),v$n},v$n.isPOT=function(v$n,v$a){return 0<v$n&&0==(v$n&v$n-1)&&0<v$a&&0==(v$a&v$a-1)},v$n.setMatToArray=function(v$n,v$a){v$n.a,v$n.b,v$n.c,v$n.d,v$n.tx,v$n.ty,v$a[0]=v$n.a,v$a[1]=v$n.b,v$a[4]=v$n.c,v$a[5]=v$n.d,v$a[12]=v$n.tx,v$a[13]=v$n.ty}}(),function(){function v$n(){this._controlPoints=[new v$N,new v$N,new v$N],this._calFun=this.getPoint2}v$X(v$n,"laya.maths.Bezier");var v$a=v$n.prototype;return v$a._switchPoint=function(v$n,v$a){var v$U=this._controlPoints.shift();v$U.setTo(v$n,v$a),this._controlPoints.push(v$U)},v$a.getPoint2=function(v$n,v$a){var v$U=this._controlPoints[0],v$x=this._controlPoints[1],v$D=this._controlPoints[2],v$p=Math.pow(1-v$n,2)*v$U.x+2*v$n*(1-v$n)*v$x.x+Math.pow(v$n,2)*v$D.x,v$Q=Math.pow(1-v$n,2)*v$U.y+2*v$n*(1-v$n)*v$x.y+Math.pow(v$n,2)*v$D.y;v$a.push(v$p,v$Q)},v$a.getPoint3=function(v$n,v$a){var v$U=this._controlPoints[0],v$x=this._controlPoints[1],v$D=this._controlPoints[2],v$p=this._controlPoints[3],v$Q=Math.pow(1-v$n,3)*v$U.x+3*v$x.x*v$n*(1-v$n)*(1-v$n)+3*v$D.x*v$n*v$n*(1-v$n)+v$p.x*Math.pow(v$n,3),v$V=Math.pow(1-v$n,3)*v$U.y+3*v$x.y*v$n*(1-v$n)*(1-v$n)+3*v$D.y*v$n*v$n*(1-v$n)+v$p.y*Math.pow(v$n,3);v$a.push(v$Q,v$V)},v$a.insertPoints=function(v$n,v$a){var v$U,v$x=NaN;for(v$U=1/(v$n=0<v$n?v$n:5),v$x=0;v$x<=1;v$x+=v$U)this._calFun(v$x,v$a)},v$a.getBezierPoints=function(v$n,v$a,v$U){void 0===v$a&&(v$a=5),void 0===v$U&&(v$U=2);var v$x,v$D,v$p=0;if((v$x=v$n.length)<2*(v$U+1))return[];switch(v$D=[],v$U){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=v$U;)this._controlPoints.push(new v$N);for(v$p=0;v$p<2*v$U;v$p+=2)this._switchPoint(v$n[v$p],v$n[v$p+1]);for(v$p=2*v$U;v$p<v$x;v$p+=2)this._switchPoint(v$n[v$p],v$n[v$p+1]),v$p/2%v$U==0&&this.insertPoints(v$a,v$D);return v$D},v$y(v$n,["I",function(){return this.I=new v$n}]),v$n}()),v$Y=function(){function v$R(){}return v$X(v$R,"laya.maths.GrahamScan"),v$R.multiply=function(v$n,v$a,v$U){return(v$n.x-v$U.x)*(v$a.y-v$U.y)-(v$a.x-v$U.x)*(v$n.y-v$U.y)},v$R.dis=function(v$n,v$a){return(v$n.x-v$a.x)*(v$n.x-v$a.x)+(v$n.y-v$a.y)*(v$n.y-v$a.y)},v$R._getPoints=function(v$n,v$a,v$U){for(void 0===v$a&&(v$a=!1),v$R._mPointList||(v$R._mPointList=[]);v$R._mPointList.length<v$n;)v$R._mPointList.push(new v$N);return v$U||(v$U=[]),v$U.length=0,v$a?v$R.getFrom(v$U,v$R._mPointList,v$n):v$R.getFromR(v$U,v$R._mPointList,v$n),v$U},v$R.getFrom=function(v$n,v$a,v$U){var v$x=0;for(v$x=0;v$x<v$U;v$x++)v$n.push(v$a[v$x]);return v$n},v$R.getFromR=function(v$n,v$a,v$U){var v$x=0;for(v$x=0;v$x<v$U;v$x++)v$n.push(v$a.pop());return v$n},v$R.pListToPointList=function(v$n,v$a){void 0===v$a&&(v$a=!1);var v$U=0,v$x=v$n.length/2,v$D=v$R._getPoints(v$x,v$a,v$R._tempPointList);for(v$U=0;v$U<v$x;v$U++)v$D[v$U].setTo(v$n[v$U+v$U],v$n[v$U+v$U+1]);return v$D},v$R.pointListToPlist=function(v$n){var v$a,v$U=0,v$x=v$n.length,v$D=v$R._temPList;for(v$U=v$D.length=0;v$U<v$x;v$U++)v$a=v$n[v$U],v$D.push(v$a.x,v$a.y);return v$D},v$R.scanPList=function(v$n){return v$t.copyArray(v$n,v$R.pointListToPlist(v$R.scan(v$R.pListToPointList(v$n,!0))))},v$R.scan=function(v$n){var v$a,v$U,v$x,v$D=0,v$p=0,v$Q=0,v$V=v$n.length,v$y={};for((v$U=v$R._temArr).length=0,v$D=(v$V=v$n.length)-1;0<=v$D;v$D--)v$x=(v$a=v$n[v$D]).x+"_"+v$a.y,v$y.hasOwnProperty(v$x)||(v$y[v$x]=!0,v$U.push(v$a));for(v$V=v$U.length,v$t.copyArray(v$n,v$U),v$D=1;v$D<v$V;v$D++)(v$n[v$D].y<v$n[v$Q].y||v$n[v$D].y==v$n[v$Q].y&&v$n[v$D].x<v$n[v$Q].x)&&(v$Q=v$D);for(v$a=v$n[0],v$n[0]=v$n[v$Q],v$n[v$Q]=v$a,v$D=1;v$D<v$V-1;v$D++){for(v$p=(v$Q=v$D)+1;v$p<v$V;v$p++)(0<v$R.multiply(v$n[v$p],v$n[v$Q],v$n[0])||0==v$R.multiply(v$n[v$p],v$n[v$Q],v$n[0])&&v$R.dis(v$n[0],v$n[v$p])<v$R.dis(v$n[0],v$n[v$Q]))&&(v$Q=v$p);v$a=v$n[v$D],v$n[v$D]=v$n[v$Q],v$n[v$Q]=v$a}if((v$U=v$R._temArr).length=0,v$n.length<3)return v$t.copyArray(v$U,v$n);for(v$U.push(v$n[0],v$n[1],v$n[2]),v$D=3;v$D<v$V;v$D++){for(;2<=v$U.length&&0<=v$R.multiply(v$n[v$D],v$U[v$U.length-1],v$U[v$U.length-2]);)v$U.pop();v$n[v$D]&&v$U.push(v$n[v$D])}return v$U},v$R._mPointList=null,v$R._tempPointList=[],v$R._temPList=[],v$R._temArr=[],v$R}(),v$W=function(){function v$D(){}return v$X(v$D,"laya.maths.MathUtil"),v$D.subtractVector3=function(v$n,v$a,v$U){v$U[0]=v$n[0]-v$a[0],v$U[1]=v$n[1]-v$a[1],v$U[2]=v$n[2]-v$a[2]},v$D.lerp=function(v$n,v$a,v$U){return v$n*(1-v$U)+v$a*v$U},v$D.scaleVector3=function(v$n,v$a,v$U){v$U[0]=v$n[0]*v$a,v$U[1]=v$n[1]*v$a,v$U[2]=v$n[2]*v$a},v$D.lerpVector3=function(v$n,v$a,v$U,v$x){var v$D=v$n[0],v$p=v$n[1],v$Q=v$n[2];v$x[0]=v$D+v$U*(v$a[0]-v$D),v$x[1]=v$p+v$U*(v$a[1]-v$p),v$x[2]=v$Q+v$U*(v$a[2]-v$Q)},v$D.lerpVector4=function(v$n,v$a,v$U,v$x){var v$D=v$n[0],v$p=v$n[1],v$Q=v$n[2],v$V=v$n[3];v$x[0]=v$D+v$U*(v$a[0]-v$D),v$x[1]=v$p+v$U*(v$a[1]-v$p),v$x[2]=v$Q+v$U*(v$a[2]-v$Q),v$x[3]=v$V+v$U*(v$a[3]-v$V)},v$D.slerpQuaternionArray=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){var v$V,v$y,v$R,v$X,v$z,v$i=v$n[v$a+0],v$q=v$n[v$a+1],v$E=v$n[v$a+2],v$m=v$n[v$a+3],v$b=v$U[v$x+0],v$P=v$U[v$x+1],v$A=v$U[v$x+2],v$T=v$U[v$x+3];return(v$y=v$i*v$b+v$q*v$P+v$E*v$A+v$m*v$T)<0&&(v$y=-v$y,v$b=-v$b,v$P=-v$P,v$A=-v$A,v$T=-v$T),v$z=1e-6<1-v$y?(v$V=Math.acos(v$y),v$R=Math.sin(v$V),v$X=Math.sin((1-v$D)*v$V)/v$R,Math.sin(v$D*v$V)/v$R):(v$X=1-v$D,v$D),v$p[v$Q+0]=v$X*v$i+v$z*v$b,v$p[v$Q+1]=v$X*v$q+v$z*v$P,v$p[v$Q+2]=v$X*v$E+v$z*v$A,v$p[v$Q+3]=v$X*v$m+v$z*v$T,v$p},v$D.getRotation=function(v$n,v$a,v$U,v$x){return Math.atan2(v$x-v$a,v$U-v$n)/Math.PI*180},v$D.sortBigFirst=function(v$n,v$a){return v$n==v$a?0:v$n<v$a?1:-1},v$D.sortSmallFirst=function(v$n,v$a){return v$n==v$a?0:v$n<v$a?-1:1},v$D.sortNumBigFirst=function(v$n,v$a){return parseFloat(v$a)-parseFloat(v$n)},v$D.sortNumSmallFirst=function(v$n,v$a){return parseFloat(v$n)-parseFloat(v$a)},v$D.sortByKey=function(v$U,v$n,v$a){var v$x;return void 0===v$n&&(v$n=!1),void 0===v$a&&(v$a=!0),v$x=v$n?v$a?v$D.sortNumBigFirst:v$D.sortBigFirst:v$a?v$D.sortNumSmallFirst:v$D.sortSmallFirst,function(v$n,v$a){return v$x(v$n[v$U],v$a[v$U])}},v$D}(),v$c=function(){function v$U(v$n,v$a,v$U,v$x,v$D,v$p){this.inPool=!1,this.bTransform=!1,void 0===v$n&&(v$n=1),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=1),void 0===v$D&&(v$D=0),void 0===v$p&&(v$p=0),this.a=v$n,this.b=v$a,this.c=v$U,this.d=v$x,this.tx=v$D,this.ty=v$p,this._checkTransform()}v$X(v$U,"laya.maths.Matrix");var v$n=v$U.prototype;return v$n.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},v$n._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},v$n.setTranslate=function(v$n,v$a){return this.tx=v$n,this.ty=v$a,this},v$n.translate=function(v$n,v$a){return this.tx+=v$n,this.ty+=v$a,this},v$n.scale=function(v$n,v$a){this.a*=v$n,this.d*=v$a,this.c*=v$n,this.b*=v$a,this.tx*=v$n,this.ty*=v$a,this.bTransform=!0},v$n.rotate=function(v$n){var v$a=Math.cos(v$n),v$U=Math.sin(v$n),v$x=this.a,v$D=this.c,v$p=this.tx;this.a=v$x*v$a-this.b*v$U,this.b=v$x*v$U+this.b*v$a,this.c=v$D*v$a-this.d*v$U,this.d=v$D*v$U+this.d*v$a,this.tx=v$p*v$a-this.ty*v$U,this.ty=v$p*v$U+this.ty*v$a,this.bTransform=!0},v$n.skew=function(v$n,v$a){var v$U=Math.tan(v$n),v$x=Math.tan(v$a),v$D=this.a,v$p=this.b;return this.a+=v$x*this.c,this.b+=v$x*this.d,this.c+=v$U*v$D,this.d+=v$U*v$p,this},v$n.invertTransformPoint=function(v$n){var v$a=this.a,v$U=this.b,v$x=this.c,v$D=this.d,v$p=this.tx,v$Q=v$a*v$D-v$U*v$x,v$V=v$D/v$Q,v$y=-v$U/v$Q,v$R=-v$x/v$Q,v$X=v$a/v$Q,v$z=(v$x*this.ty-v$D*v$p)/v$Q,v$i=-(v$a*this.ty-v$U*v$p)/v$Q;return v$n.setTo(v$V*v$n.x+v$R*v$n.y+v$z,v$y*v$n.x+v$X*v$n.y+v$i)},v$n.transformPoint=function(v$n){return v$n.setTo(this.a*v$n.x+this.c*v$n.y+this.tx,this.b*v$n.x+this.d*v$n.y+this.ty)},v$n.transformPointN=function(v$n){return v$n.setTo(this.a*v$n.x+this.c*v$n.y,this.b*v$n.x+this.d*v$n.y)},v$n.transformPointArray=function(v$n,v$a){for(var v$U=v$n.length,v$x=0;v$x<v$U;v$x+=2){var v$D=v$n[v$x],v$p=v$n[v$x+1];v$a[v$x]=this.a*v$D+this.c*v$p+this.tx,v$a[v$x+1]=this.b*v$D+this.d*v$p+this.ty}return v$a},v$n.transformPointArrayScale=function(v$n,v$a){for(var v$U=v$n.length,v$x=0;v$x<v$U;v$x+=2){var v$D=v$n[v$x],v$p=v$n[v$x+1];v$a[v$x]=this.a*v$D+this.c*v$p,v$a[v$x+1]=this.b*v$D+this.d*v$p}return v$a},v$n.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},v$n.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},v$n.invert=function(){var v$n=this.a,v$a=this.b,v$U=this.c,v$x=this.d,v$D=this.tx,v$p=v$n*v$x-v$a*v$U;return this.a=v$x/v$p,this.b=-v$a/v$p,this.c=-v$U/v$p,this.d=v$n/v$p,this.tx=(v$U*this.ty-v$x*v$D)/v$p,this.ty=-(v$n*this.ty-v$a*v$D)/v$p,this},v$n.setTo=function(v$n,v$a,v$U,v$x,v$D,v$p){return this.a=v$n,this.b=v$a,this.c=v$U,this.d=v$x,this.tx=v$D,this.ty=v$p,this},v$n.concat=function(v$n){var v$a=this.a,v$U=this.c,v$x=this.tx;return this.a=v$a*v$n.a+this.b*v$n.c,this.b=v$a*v$n.b+this.b*v$n.d,this.c=v$U*v$n.a+this.d*v$n.c,this.d=v$U*v$n.b+this.d*v$n.d,this.tx=v$x*v$n.a+this.ty*v$n.c+v$n.tx,this.ty=v$x*v$n.b+this.ty*v$n.d+v$n.ty,this},v$n.scaleEx=function(v$n,v$a){var v$U=this.a,v$x=this.b,v$D=this.c,v$p=this.d;0!==v$x||0!==v$D?(this.a=v$n*v$U,this.b=v$n*v$x,this.c=v$a*v$D):(this.a=v$n*v$U,this.b=0*v$p,this.c=0*v$U),this.d=v$a*v$p,this.bTransform=!0},v$n.rotateEx=function(v$n){var v$a=Math.cos(v$n),v$U=Math.sin(v$n),v$x=this.a,v$D=this.b,v$p=this.c,v$Q=this.d;0!==v$D||0!==v$p?(this.a=v$a*v$x+v$U*v$p,this.b=v$a*v$D+v$U*v$Q,this.c=-v$U*v$x+v$a*v$p,this.d=-v$U*v$D+v$a*v$Q):(this.a=v$a*v$x,this.b=v$U*v$Q,this.c=-v$U*v$x,this.d=v$a*v$Q),this.bTransform=!0},v$n.clone=function(){var v$n=v$U.create();return v$n.a=this.a,v$n.b=this.b,v$n.c=this.c,v$n.d=this.d,v$n.tx=this.tx,v$n.ty=this.ty,v$n.bTransform=this.bTransform,v$n},v$n.copyTo=function(v$n){return v$n.a=this.a,v$n.b=this.b,v$n.c=this.c,v$n.d=this.d,v$n.tx=this.tx,v$n.ty=this.ty,v$n.bTransform=this.bTransform,v$n},v$n.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},v$n.destroy=function(){if(!this.inPool){var v$n=v$U._cache;this.inPool=!0,v$n._length||(v$n._length=0),(v$n[v$n._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},v$U.mul=function(v$n,v$a,v$U){var v$x=v$n.a,v$D=v$n.b,v$p=v$n.c,v$Q=v$n.d,v$V=v$n.tx,v$y=v$n.ty,v$R=v$a.a,v$X=v$a.b,v$z=v$a.c,v$i=v$a.d,v$q=v$a.tx,v$E=v$a.ty;return 0!==v$X||0!==v$z?(v$U.a=v$x*v$R+v$D*v$z,v$U.b=v$x*v$X+v$D*v$i,v$U.c=v$p*v$R+v$Q*v$z,v$U.d=v$p*v$X+v$Q*v$i,v$U.tx=v$R*v$V+v$z*v$y+v$q,v$U.ty=v$X*v$V+v$i*v$y+v$E):(v$U.a=v$x*v$R,v$U.b=v$D*v$i,v$U.c=v$p*v$R,v$U.d=v$Q*v$i,v$U.tx=v$R*v$V+v$q,v$U.ty=v$i*v$y+v$E),v$U},v$U.mul16=function(v$n,v$a,v$U){var v$x=v$n.a,v$D=v$n.b,v$p=v$n.c,v$Q=v$n.d,v$V=v$n.tx,v$y=v$n.ty,v$R=v$a.a,v$X=v$a.b,v$z=v$a.c,v$i=v$a.d,v$q=v$a.tx,v$E=v$a.ty;return 0!==v$X||0!==v$z?(v$U[0]=v$x*v$R+v$D*v$z,v$U[1]=v$x*v$X+v$D*v$i,v$U[4]=v$p*v$R+v$Q*v$z,v$U[5]=v$p*v$X+v$Q*v$i,v$U[12]=v$R*v$V+v$z*v$y+v$q,v$U[13]=v$X*v$V+v$i*v$y+v$E):(v$U[0]=v$x*v$R,v$U[1]=v$D*v$i,v$U[4]=v$p*v$R,v$U[5]=v$Q*v$i,v$U[12]=v$R*v$V+v$q,v$U[13]=v$i*v$y+v$E),v$U},v$U.mulPre=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){var v$y=v$n.a,v$R=v$n.b,v$X=v$n.c,v$z=v$n.d,v$i=v$n.tx,v$q=v$n.ty;return 0!==v$U||0!==v$x?(v$V.a=v$y*v$a+v$R*v$x,v$V.b=v$y*v$U+v$R*v$D,v$V.c=v$X*v$a+v$z*v$x,v$V.d=v$X*v$U+v$z*v$D,v$V.tx=v$a*v$i+v$x*v$q+v$p,v$V.ty=v$U*v$i+v$D*v$q+v$Q):(v$V.a=v$y*v$a,v$V.b=v$R*v$D,v$V.c=v$X*v$a,v$V.d=v$z*v$D,v$V.tx=v$a*v$i+v$p,v$V.ty=v$D*v$q+v$Q),v$V},v$U.mulPos=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){var v$y=v$n.a,v$R=v$n.b,v$X=v$n.c,v$z=v$n.d,v$i=v$n.tx,v$q=v$n.ty;return 0!==v$R||0!==v$X?(v$V.a=v$a*v$y+v$U*v$X,v$V.b=v$a*v$R+v$U*v$z,v$V.c=v$x*v$y+v$D*v$X,v$V.d=v$x*v$R+v$D*v$z,v$V.tx=v$y*v$p+v$X*v$Q+v$i,v$V.ty=v$R*v$p+v$z*v$Q+v$q):(v$V.a=v$a*v$y,v$V.b=v$U*v$z,v$V.c=v$x*v$y,v$V.d=v$D*v$z,v$V.tx=v$y*v$p+v$i,v$V.ty=v$z*v$Q+v$q),v$V},v$U.preMul=function(v$n,v$a,v$U){var v$x=v$n.a,v$D=v$n.b,v$p=v$n.c,v$Q=v$n.d,v$V=v$a.a,v$y=v$a.b,v$R=v$a.c,v$X=v$a.d,v$z=v$a.tx,v$i=v$a.ty;return v$U.a=v$V*v$x,v$U.b=v$U.c=0,v$U.d=v$X*v$Q,v$U.tx=v$z*v$x+v$n.tx,v$U.ty=v$i*v$Q+v$n.ty,0===v$y&&0===v$R&&0===v$D&&0===v$p||(v$U.a+=v$y*v$p,v$U.d+=v$R*v$D,v$U.b+=v$V*v$D+v$y*v$Q,v$U.c+=v$R*v$x+v$X*v$p,v$U.tx+=v$i*v$p,v$U.ty+=v$z*v$D),v$U},v$U.preMulXY=function(v$n,v$a,v$U,v$x){var v$D=v$n.a,v$p=v$n.b,v$Q=v$n.c,v$V=v$n.d;return v$x.a=v$D,v$x.b=v$p,v$x.c=v$Q,v$x.d=v$V,v$x.tx=v$a*v$D+v$n.tx+v$U*v$Q,v$x.ty=v$U*v$V+v$n.ty+v$a*v$p,v$x},v$U.create=function(){var v$n=v$U._cache,v$a=v$n._length?v$n[--v$n._length]:new v$U;return v$a.inPool=!1,v$a},v$U.EMPTY=new v$U,v$U.TEMP=new v$U,v$U._cache=[],v$U}(),v$N=function(){function v$n(v$n,v$a){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),this.x=v$n,this.y=v$a}v$X(v$n,"laya.maths.Point");var v$a=v$n.prototype;return v$a.setTo=function(v$n,v$a){return this.x=v$n,this.y=v$a,this},v$a.distance=function(v$n,v$a){return Math.sqrt((this.x-v$n)*(this.x-v$n)+(this.y-v$a)*(this.y-v$a))},v$a.toString=function(){return this.x+","+this.y},v$a.normalize=function(){var v$n=Math.sqrt(this.x*this.x+this.y*this.y);if(0<v$n){var v$a=1/v$n;this.x*=v$a,this.y*=v$a}},v$n.TEMP=new v$n,v$n.EMPTY=new v$n,v$n}(),v$_=function(){function v$R(v$n,v$a,v$U,v$x){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=0),this.x=v$n,this.y=v$a,this.width=v$U,this.height=v$x}v$X(v$R,"laya.maths.Rectangle");var v$n=v$R.prototype;return v$n.setTo=function(v$n,v$a,v$U,v$x){return this.x=v$n,this.y=v$a,this.width=v$U,this.height=v$x,this},v$n.copyFrom=function(v$n){return this.x=v$n.x,this.y=v$n.y,this.width=v$n.width,this.height=v$n.height,this},v$n.contains=function(v$n,v$a){return!(this.width<=0||this.height<=0)&&(v$n>=this.x&&v$n<this.right&&v$a>=this.y&&v$a<this.bottom)},v$n.intersects=function(v$n){return!(v$n.x>this.x+this.width||v$n.x+v$n.width<this.x||v$n.y>this.y+this.height||v$n.y+v$n.height<this.y)},v$n.intersection=function(v$n,v$a){return this.intersects(v$n)?(v$a||(v$a=new v$R),v$a.x=Math.max(this.x,v$n.x),v$a.y=Math.max(this.y,v$n.y),v$a.width=Math.min(this.right,v$n.right)-v$a.x,v$a.height=Math.min(this.bottom,v$n.bottom)-v$a.y,v$a):null},v$n.union=function(v$n,v$a){return v$a||(v$a=new v$R),this.clone(v$a),v$n.width<=0||v$n.height<=0?v$a:(v$a.addPoint(v$n.x,v$n.y),v$a.addPoint(v$n.right,v$n.bottom),this)},v$n.clone=function(v$n){return v$n||(v$n=new v$R),v$n.x=this.x,v$n.y=this.y,v$n.width=this.width,v$n.height=this.height,v$n},v$n.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},v$n.equals=function(v$n){return!(!v$n||v$n.x!==this.x||v$n.y!==this.y||v$n.width!==this.width||v$n.height!==this.height)},v$n.addPoint=function(v$n,v$a){return this.x>v$n&&(this.width+=this.x-v$n,this.x=v$n),this.y>v$a&&(this.height+=this.y-v$a,this.y=v$a),this.width<v$n-this.x&&(this.width=v$n-this.x),this.height<v$a-this.y&&(this.height=v$a-this.y),this},v$n._getBoundPoints=function(){var v$n=v$R._temB;return(v$n.length=0)==this.width||0==this.height||v$n.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),v$n},v$n.isEmpty=function(){return this.width<=0||this.height<=0},v$E(0,v$n,"right",function(){return this.x+this.width}),v$E(0,v$n,"bottom",function(){return this.y+this.height}),v$R._getBoundPointS=function(v$n,v$a,v$U,v$x){var v$D=v$R._temA;return(v$D.length=0)==v$U||0==v$x||v$D.push(v$n,v$a,v$n+v$U,v$a,v$n,v$a+v$x,v$n+v$U,v$a+v$x),v$D},v$R._getWrapRec=function(v$n,v$a){if(!v$n||v$n.length<1)return v$a?v$a.setTo(0,0,0,0):v$R.TEMP.setTo(0,0,0,0);v$a=v$a||new v$R;var v$U,v$x,v$D,v$p,v$Q,v$V=v$n.length,v$y=v$N.TEMP;for(v$D=v$Q=-(v$x=v$p=99999),v$U=0;v$U<v$V;v$U+=2)v$y.x=v$n[v$U],v$y.y=v$n[v$U+1],v$x=v$x<v$y.x?v$x:v$y.x,v$p=v$p<v$y.y?v$p:v$y.y,v$D=v$D>v$y.x?v$D:v$y.x,v$Q=v$Q>v$y.y?v$Q:v$y.y;return v$a.setTo(v$x,v$p,v$D-v$x,v$Q-v$p)},v$R.EMPTY=new v$R,v$R.TEMP=new v$R,v$R._temB=[],v$R._temA=[],v$R}(),v$Z=function(){function v$y(){}return v$X(v$y,"laya.media.SoundManager"),v$E(1,v$y,"useAudioMusic",function(){return v$y._useAudioMusic},function(v$n){v$y._useAudioMusic=v$n,v$y._musicClass=v$n?v$Un:null}),v$E(1,v$y,"autoStopMusic",function(){return v$y._autoStopMusic},function(v$n){v$k.stage.off("blur",null,v$y._stageOnBlur),v$k.stage.off("focus",null,v$y._stageOnFocus),v$k.stage.off("visibilitychange",null,v$y._visibilityChange),(v$y._autoStopMusic=v$n)&&(v$k.stage.on("blur",null,v$y._stageOnBlur),v$k.stage.on("focus",null,v$y._stageOnFocus),v$k.stage.on("visibilitychange",null,v$y._visibilityChange))}),v$E(1,v$y,"muted",function(){return v$y._muted},function(v$n){v$n!=v$y._muted&&(v$n&&v$y.stopAllSound(),v$y.musicMuted=v$n,v$y._muted=v$n)}),v$E(1,v$y,"musicMuted",function(){return v$y._musicMuted},function(v$n){v$n!=v$y._musicMuted&&(v$n?(v$y._tMusic&&v$y._musicChannel&&!v$y._musicChannel.isStopped?v$y._musicChannel.pause():v$y._musicChannel=null,v$y._musicMuted=v$n):(v$y._musicMuted=v$n,v$y._tMusic&&v$y._musicChannel&&v$y._musicChannel.resume()))}),v$E(1,v$y,"soundMuted",function(){return v$y._soundMuted},function(v$n){v$y._soundMuted=v$n}),v$y.addChannel=function(v$n){0<=v$y._channels.indexOf(v$n)||(v$y._channels.push(v$n),v$y.autoReleaseSound&&0!=v$y._notUsedCount&&v$y._notUsedUrls[v$n.url]&&(delete v$y._notUsedUrls[v$n.url],0==--v$y._notUsedCount&&v$k.timer.clear(v$y,v$y.disposeSoundIfNotUsed)))},v$y.removeChannel=function(v$n){var v$a=v$y._channels,v$U=v$a.indexOf(v$n);if(-1!=v$U&&(v$a.splice(v$U,1),v$y.autoReleaseSound)){var v$x=v$n.url,v$D=v$y.defaultIntervals[v$x]||2e4;if(0<v$D){var v$p=!0;for(v$U=v$a.length-1;0<=v$U;v$U--)if(v$a[v$U].url==v$x){v$p=!1;break}v$p&&(v$y._notUsedUrls[v$x]=Date.now()+v$D,0==v$y._notUsedCount++&&v$k.timer.loop(1e4,v$y,v$y.disposeSoundIfNotUsed))}}},v$y.disposeSoundIfNotUsed=function(){var v$n=v$y._notUsedUrls;if(0!=v$y._notUsedCount){var v$a=Date.now();for(var v$U in v$n)v$a>=v$n[v$U]&&(delete v$n[v$U],--v$y._notUsedCount,v$y.destroySound(v$U));if(0!=v$y._notUsedCount)return}v$k.timer.clear(v$y,v$y.disposeSoundIfNotUsed)},v$y._visibilityChange=function(){v$k.stage.isVisibility?v$y._stageOnFocus():v$y._stageOnBlur()},v$y._stageOnBlur=function(){v$y._isActive=!1,v$y._musicChannel&&(v$y._musicChannel.isStopped||(v$y._blurPaused=!0,v$y._musicChannel.pause())),v$y.stopAllSound(),v$k.stage.once("mousedown",null,v$y._stageOnFocus)},v$y._recoverWebAudio=function(){v$pn.ctx&&"running"!=v$pn.ctx.state&&v$pn.ctx.resume&&v$pn.ctx.resume()},v$y._stageOnFocus=function(){if(v$y._isActive=!0,v$y._recoverWebAudio(),v$k.stage.off("mousedown",null,v$y._stageOnFocus),v$y._blurPaused){var v$n=v$y._musicChannel;v$n&&v$y._music&&v$n.isStopped&&(v$y._blurPaused=!1,v$y._music._disposed?v$y.playMusic(v$n.url,v$n.loops,v$n.startHandler,v$n.completeHandler,v$n.startTime):v$n.audioBuffer?v$n.resume():v$y._music.play(v$n.startTime,v$n.loops,v$n.startHandler,v$n))}},v$y.playSound=function(v$n,v$a,v$U,v$x,v$D,v$p){if(void 0===v$a&&(v$a=1),void 0===v$p&&(v$p=0),!v$n)return null;if(v$y._muted)return null;if(v$y._recoverWebAudio(),v$n==v$y._tMusic){if(v$y._musicMuted)return null}else{if(!v$y._isActive)return null;if(v$y._soundMuted)return null}var v$Q,v$V=v$y._pool[v$n];return v$D||(v$D=v$y._soundClass),v$V||((v$V=new v$D).load(v$n),v$y._pool[v$n]=v$V),(v$Q=v$V.play(v$p,v$a,v$U))?(v$n==v$y._tMusic&&(v$y._music=v$V,v$y._isActive||(v$y._blurPaused=!0,v$Q.pause())),v$Q.url=v$n,v$Q.volume=v$n==v$y._tMusic?v$y.musicVolume:v$y.soundVolume,v$Q.completeHandler=v$x,v$Q):null},v$y.destroySound=function(v$n){var v$a=v$y._pool[v$n];v$a&&(delete v$y._pool[v$n],v$a.dispose())},v$y.playMusic=function(v$n,v$a,v$U,v$x,v$D){return void 0===v$a&&(v$a=0),void 0===v$D&&(v$D=0),v$y._tMusic=v$n,v$y._musicChannel&&v$y._musicChannel.stop(),v$y._musicChannel=v$y.playSound(v$n,v$a,v$U,v$x,null,v$D)},v$y.stopSound=function(v$n){for(var v$a,v$U=v$y._channels.length-1;0<=v$U;v$U--)(v$a=v$y._channels[v$U]).url==v$n&&v$a.stop()},v$y.stopAll=function(){v$y._tMusic=null;var v$n=0;for(v$n=v$y._channels.length-1;0<=v$n;v$n--)v$y._channels[v$n].stop()},v$y.stopAllSound=function(){var v$n,v$a=0;for(v$a=v$y._channels.length-1;0<=v$a;v$a--)(v$n=v$y._channels[v$a]).url!=v$y._tMusic&&v$n.stop()},v$y.stopMusic=function(){v$y._musicChannel&&v$y._musicChannel.stop(),v$y._tMusic=null},v$y.setSoundVolume=function(v$n,v$a){if(v$a)v$y._setVolume(v$a,v$n);else{v$y.soundVolume=v$n;var v$U,v$x=0;for(v$x=v$y._channels.length-1;0<=v$x;v$x--)(v$U=v$y._channels[v$x]).url!=v$y._tMusic&&(v$U.volume=v$n)}},v$y.setMusicVolume=function(v$n){v$y.musicVolume=v$n,v$y._setVolume(v$y._tMusic,v$n)},v$y._setVolume=function(v$n,v$a){for(var v$U,v$x=v$y._channels.length-1;0<=v$x;v$x--)(v$U=v$y._channels[v$x]).url==v$n&&(v$U.volume=v$a)},v$y.musicVolume=1,v$y.soundVolume=1,v$y.playbackRate=1,v$y._useAudioMusic=!0,v$y._muted=!1,v$y._soundMuted=!1,v$y._musicMuted=!1,v$y._tMusic=null,v$y._musicChannel=null,v$y._music=null,v$y._channels=[],v$y._autoStopMusic=!1,v$y._blurPaused=!1,v$y._isActive=!0,v$y._soundClass=null,v$y._musicClass=null,v$y.autoReleaseSound=!0,v$y._pool={},v$y.defaultIntervals={},v$y._notUsedUrls={},v$y._notUsedCount=0,v$y}(),v$$=function(){var v$n;function v$U(){}return v$X(v$U,"laya.net.LocalStorage"),v$U.__init__=function(){v$U._baseClass||(v$U._baseClass=v$n).init(),v$U.items=v$U._baseClass.items,v$U.support=v$U._baseClass.support},v$U.setItem=function(v$n,v$a){v$U._baseClass.setItem(v$n,v$a)},v$U.getItem=function(v$n){return v$U._baseClass.getItem(v$n)},v$U.setJSON=function(v$n,v$a){v$U._baseClass.setJSON(v$n,v$a)},v$U.getJSON=function(v$n){return v$U._baseClass.getJSON(v$n)},v$U.removeItem=function(v$n){v$U._baseClass.removeItem(v$n)},v$U.clear=function(){v$U._baseClass.clear()},v$U._baseClass=null,v$U.items=null,v$U.support=!1,v$U.__init$=function(){v$n=function(){function v$U(){}return v$X(v$U,""),v$U.init=function(){try{v$U.support=!0,v$U.items=v$Q.localStorage,v$U.setItem("laya","1"),v$U.removeItem("laya")}catch(v$n){v$U.support=!1}v$U.support||console.log("LocalStorage is not supprot or browser is private mode.")},v$U.setItem=function(v$n,v$a){try{v$U.support&&v$U.items.setItem(v$n,v$a)}catch(v$n){console.warn("set localStorage failed",v$n)}},v$U.getItem=function(v$n){return v$U.support?v$U.items.getItem(v$n):null},v$U.setJSON=function(v$n,v$a){try{v$U.support&&v$U.items.setItem(v$n,JSON.stringify(v$a))}catch(v$n){console.warn("set localStorage failed",v$n)}},v$U.getJSON=function(v$n){return JSON.parse(v$U.support?v$U.items.getItem(v$n):null)},v$U.removeItem=function(v$n){v$U.support&&v$U.items.removeItem(v$n)},v$U.clear=function(){v$U.support&&v$U.items.clear()},v$U.items=null,v$U.support=!1,v$U}()},v$U}(),v$H=(function(){function v$x(){}v$X(v$x,"laya.net.ResourceVersion"),v$x.enable=function(v$n,v$a,v$U){void 0===v$U&&(v$U=2),laya.net.ResourceVersion.type=v$U,v$k.loader.load(v$n,v$A.create(null,v$x.onManifestLoaded,[v$a]),null,"json"),v$G.customFormat=v$x.addVersionPrefix},v$x.onManifestLoaded=function(v$n,v$a){v$x.manifest=v$a,v$n.run(),v$a||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},v$x.addVersionPrefix=function(v$n){return v$x.manifest&&v$x.manifest[v$n]?2==v$x.type?v$x.manifest[v$n]:v$x.manifest[v$n]+"/"+v$n:v$n},v$x.FOLDER_VERSION=1,v$x.FILENAME_VERSION=2,v$x.manifest=null,v$x.type=1}(),function(){function v$n(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}v$X(v$n,"laya.net.TTFLoader");var v$a=v$n.prototype;return v$a.load=function(v$n){var v$a=(this._url=v$n).split(".ttf")[0].split("/");this.fontName=v$a[v$a.length-1],v$f.window.conch?this._loadConch():v$f.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},v$a._loadConch=function(){this._http=new v$Qn,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},v$a._onHttpLoaded=function(v$n){v$f.window.conch.setFontFaceFromBuffer(this.fontName,v$n),this._clearHttp(),this._complete()},v$a._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},v$a._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},v$a._complete=function(){v$k.timer.clear(this,this._complete),v$k.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},v$a._checkComplete=function(){v$u.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},v$a._loadWithFontFace=function(){var v$n=new v$f.window.FontFace(this.fontName,"url('"+this._url+"')");v$f.window.document.fonts.add(v$n);var v$a=this;v$n.loaded.then(function(){v$a._complete()}),v$n.load()},v$a._createDiv=function(){this._div=v$f.createElement("div"),this._div.innerHTML="laya";var v$n=this._div.style;v$n.fontFamily=this.fontName,v$n.position="absolute",v$n.left="-100px",v$n.top="-100px",v$f.document.body.appendChild(this._div)},v$a._loadWithCSS=function(){var v$n=this,v$a=v$f.createElement("style");v$a.type="text/css",v$f.document.body.appendChild(v$a),v$a.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=v$u.measureText("LayaTTFFont",this._fontTxt).width;var v$U=this;v$a.onload=function(){v$k.timer.once(1e4,v$U,v$n._complete)},v$k.timer.loop(20,this,this._checkComplete),this._createDiv()},v$n._testString="LayaTTFFont",v$n}()),v$G=function(){function v$x(v$n){this._url=null,this._path=null,this._url=v$x.formatURL(v$n),this._path=v$x.getPath(v$n)}v$X(v$x,"laya.net.URL");var v$n=v$x.prototype;return v$E(0,v$n,"path",function(){return this._path}),v$E(0,v$n,"url",function(){return this._url}),v$x.formatURL=function(v$n,v$a){if(!v$n)return"null path";if(0<v$n.indexOf(":"))return v$n;null!=v$x.customFormat&&(v$n=v$x.customFormat(v$n,v$a));var v$U=v$n.charAt(0);if("."===v$U)return v$x.formatRelativePath((v$a||v$x.basePath)+v$n);if("~"===v$U)return v$x.rootPath+v$n.substring(1);if("d"===v$U){if(0===v$n.indexOf("data:image"))return v$n}else if("/"===v$U)return v$n;return(v$a||v$x.basePath)+v$n},v$x.formatRelativePath=function(v$n){for(var v$a=v$n.split("/"),v$U=0,v$x=v$a.length;v$U<v$x;v$U++)".."==v$a[v$U]&&(v$a.splice(v$U-1,2),v$U-=2);return v$a.join("/")},v$x.isAbsolute=function(v$n){return 0<v$n.indexOf(":")||"/"==v$n.charAt(0)},v$x.getPath=function(v$n){var v$a=v$n.lastIndexOf("/");return 0<v$a?v$n.substr(0,v$a+1):""},v$x.getFileName=function(v$n){var v$a=v$n.lastIndexOf("/");return 0<v$a?v$n.substr(v$a+1):v$n},v$x.version={},v$x.basePath="",v$x.rootPath="",v$x.customFormat=function(v$n){var v$a=v$x.version[v$n];return!v$I.isConchApp&&v$a&&(v$n+="?v="+v$a),v$n},v$x}(),v$I=function(){function v$D(v$n,v$a){this._timeId=0;var v$U=v$D._mainCanvas.source.style;v$U.position="absolute",v$U.top=v$U.left="0px",v$U.background="#000000",v$D._mainCanvas.source.id="layaCanvas";var v$x=laya.renders.Render.isWebGL;v$D._mainCanvas.source.width=v$n,v$D._mainCanvas.source.height=v$a,v$x&&v$D.WebGL.init(v$D._mainCanvas,v$n,v$a),v$f.container.appendChild(v$D._mainCanvas.source),(v$D._context=new v$v(v$n,v$a,v$x?null:v$D._mainCanvas)).ctx.setIsMainContext(),v$f.window.requestAnimationFrame(function v$n(v$a){v$f.window.requestAnimationFrame(v$n);v$k.stage._loop()}),v$k.stage.on("visibilitychange",this,this._onVisibilitychange)}v$X(v$D,"laya.renders.Render");var v$n=v$D.prototype;return v$n._onVisibilitychange=function(){v$k.stage.isVisibility?0!=this._timeId&&v$f.window.clearInterval(this._timeId):this._timeId=v$f.window.setInterval(this._enterFrame,1e3)},v$n._enterFrame=function(v$n){v$k.stage._loop()},v$E(1,v$D,"context",function(){return v$D._context}),v$E(1,v$D,"canvas",function(){return v$D._mainCanvas.source}),v$D._context=null,v$D._mainCanvas=null,v$D.WebGL=null,v$D.isConchNode=!1,v$D.isConchApp=!1,v$D.isConchWebGL=!1,v$D.isWebGL=!1,v$D.is3DMode=!1,v$D.optimizeTextureMemory=function(v$n,v$a){return!0},v$D.__init$=function(){v$Q.ConchRenderType=v$Q.ConchRenderType||1,v$Q.ConchRenderType|=v$Q.conch?4:0,v$D.isConchNode=5==(5&v$Q.ConchRenderType),v$D.isConchApp=4==(4&v$Q.ConchRenderType),v$D.isConchWebGL=6==v$Q.ConchRenderType},v$D}(),v$v=function(){function v$Q(v$n,v$a,v$U){this.x=0,this.y=0,this._drawTexture=function(v$n,v$a,v$U){v$U[0].loaded&&this.ctx.drawTexture(v$U[0],v$U[1],v$U[2],v$U[3],v$U[4],v$n,v$a)},this._fillTexture=function(v$n,v$a,v$U){v$U[0].loaded&&this.ctx.fillTexture(v$U[0],v$U[1]+v$n,v$U[2]+v$a,v$U[3],v$U[4],v$U[5],v$U[6],v$U[7])},this._drawTextureWithTransform=function(v$n,v$a,v$U){v$U[0].loaded&&this.ctx.drawTextureWithTransform(v$U[0],v$U[1],v$U[2],v$U[3],v$U[4],v$U[5],v$n,v$a,v$U[6])},this._fillQuadrangle=function(v$n,v$a,v$U){this.ctx.fillQuadrangle(v$U[0],v$U[1],v$U[2],v$U[3],v$U[4])},this._drawRect=function(v$n,v$a,v$U){var v$x=this.ctx;null!=v$U[4]&&(v$x.fillStyle=v$U[4],v$x.fillRect(v$n+v$U[0],v$a+v$U[1],v$U[2],v$U[3],null)),null!=v$U[5]&&(v$x.strokeStyle=v$U[5],v$x.lineWidth=v$U[6],v$x.strokeRect(v$n+v$U[0],v$a+v$U[1],v$U[2],v$U[3],v$U[6]))},this._drawPie=function(v$n,v$a,v$U){var v$x=this.ctx;v$I.isWebGL&&v$x.setPathId(v$U[8]),v$x.beginPath(),v$I.isWebGL?(v$x.movePath(v$U[0]+v$n,v$U[1]+v$a),v$x.moveTo(0,0)):v$x.moveTo(v$n+v$U[0],v$a+v$U[1]),v$x.arc(v$n+v$U[0],v$a+v$U[1],v$U[2],v$U[3],v$U[4]),v$x.closePath(),this._fillAndStroke(v$U[5],v$U[6],v$U[7],!0)},this._clipRect=function(v$n,v$a,v$U){this.ctx.clipRect(v$n+v$U[0],v$a+v$U[1],v$U[2],v$U[3])},this._fillRect=function(v$n,v$a,v$U){this.ctx.fillRect(v$n+v$U[0],v$a+v$U[1],v$U[2],v$U[3],v$U[4])},this._drawCircle=function(v$n,v$a,v$U){var v$x=this.ctx;v$I.isWebGL&&v$x.setPathId(v$U[6]),v$w.drawCall++,v$x.beginPath(),v$I.isWebGL&&v$x.movePath(v$U[0]+v$n,v$U[1]+v$a),v$x.arc(v$U[0]+v$n,v$U[1]+v$a,v$U[2],0,v$Q.PI2),v$x.closePath(),this._fillAndStroke(v$U[3],v$U[4],v$U[5],!0)},this._fillCircle=function(v$n,v$a,v$U){v$w.drawCall++;var v$x=this.ctx;v$x.beginPath(),v$x.fillStyle=v$U[3],v$x.arc(v$U[0]+v$n,v$U[1]+v$a,v$U[2],0,v$Q.PI2),v$x.fill()},this._setShader=function(v$n,v$a,v$U){this.ctx.setShader(v$U[0])},this._drawLine=function(v$n,v$a,v$U){var v$x=this.ctx;v$I.isWebGL&&v$x.setPathId(v$U[6]),v$x.beginPath(),v$x.strokeStyle=v$U[4],v$x.lineWidth=v$U[5],v$I.isWebGL?(v$x.movePath(v$n,v$a),v$x.moveTo(v$U[0],v$U[1]),v$x.lineTo(v$U[2],v$U[3])):(v$x.moveTo(v$n+v$U[0],v$a+v$U[1]),v$x.lineTo(v$n+v$U[2],v$a+v$U[3])),v$x.stroke()},this._drawLines=function(v$n,v$a,v$U){var v$x=this.ctx;v$I.isWebGL&&v$x.setPathId(v$U[5]),v$x.beginPath(),v$n+=v$U[0],v$a+=v$U[1],v$I.isWebGL&&v$x.movePath(v$n,v$a),v$x.strokeStyle=v$U[3],v$x.lineWidth=v$U[4];var v$D=v$U[2],v$p=2,v$Q=v$D.length;if(v$I.isWebGL)for(v$x.moveTo(v$D[0],v$D[1]);v$p<v$Q;)v$x.lineTo(v$D[v$p++],v$D[v$p++]);else for(v$x.moveTo(v$n+v$D[0],v$a+v$D[1]);v$p<v$Q;)v$x.lineTo(v$n+v$D[v$p++],v$a+v$D[v$p++]);v$x.stroke()},this._drawLinesWebGL=function(v$n,v$a,v$U){this.ctx.drawLines(v$n+this.x+v$U[0],v$a+this.y+v$U[1],v$U[2],v$U[3],v$U[4])},this._drawCurves=function(v$n,v$a,v$U){this.ctx.drawCurves(v$n,v$a,v$U)},this._draw=function(v$n,v$a,v$U){v$U[0].call(null,this,v$n,v$a)},this._transformByMatrix=function(v$n,v$a,v$U){this.ctx.transformByMatrix(v$U[0])},this._setTransform=function(v$n,v$a,v$U){this.ctx.setTransform(v$U[0],v$U[1],v$U[2],v$U[3],v$U[4],v$U[5])},this._setTransformByMatrix=function(v$n,v$a,v$U){this.ctx.setTransformByMatrix(v$U[0])},this._save=function(v$n,v$a,v$U){this.ctx.save()},this._restore=function(v$n,v$a,v$U){this.ctx.restore()},this._translate=function(v$n,v$a,v$U){this.ctx.translate(v$U[0],v$U[1])},this._transform=function(v$n,v$a,v$U){this.ctx.translate(v$U[1]+v$n,v$U[2]+v$a);var v$x=v$U[0];this.ctx.transform(v$x.a,v$x.b,v$x.c,v$x.d,v$x.tx,v$x.ty),this.ctx.translate(-v$n-v$U[1],-v$a-v$U[2])},this._rotate=function(v$n,v$a,v$U){this.ctx.translate(v$U[1]+v$n,v$U[2]+v$a),this.ctx.rotate(v$U[0]),this.ctx.translate(-v$n-v$U[1],-v$a-v$U[2])},this._scale=function(v$n,v$a,v$U){this.ctx.translate(v$U[2]+v$n,v$U[3]+v$a),this.ctx.scale(v$U[0],v$U[1]),this.ctx.translate(-v$n-v$U[2],-v$a-v$U[3])},this._alpha=function(v$n,v$a,v$U){this.ctx.globalAlpha*=v$U[0]},this._setAlpha=function(v$n,v$a,v$U){this.ctx.globalAlpha=v$U[0]},this._fillText=function(v$n,v$a,v$U){this.ctx.fillText(v$U[0],v$U[1]+v$n,v$U[2]+v$a,v$U[3],v$U[4],v$U[5])},this._strokeText=function(v$n,v$a,v$U){this.ctx.strokeText(v$U[0],v$U[1]+v$n,v$U[2]+v$a,v$U[3],v$U[4],v$U[5],v$U[6])},this._fillBorderText=function(v$n,v$a,v$U){this.ctx.fillBorderText(v$U[0],v$U[1]+v$n,v$U[2]+v$a,v$U[3],v$U[4],v$U[5],v$U[6],v$U[7])},this._blendMode=function(v$n,v$a,v$U){this.ctx.globalCompositeOperation=v$U[0]},this._beginClip=function(v$n,v$a,v$U){this.ctx.beginClip&&this.ctx.beginClip(v$n+v$U[0],v$a+v$U[1],v$U[2],v$U[3])},this._setIBVB=function(v$n,v$a,v$U){this.ctx.setIBVB(v$U[0]+v$n,v$U[1]+v$a,v$U[2],v$U[3],v$U[4],v$U[5],v$U[6],v$U[7])},this._fillTrangles=function(v$n,v$a,v$U){this.ctx.fillTrangles(v$U[0],v$U[1]+v$n,v$U[2]+v$a,v$U[3],v$U[4])},this._drawPath=function(v$n,v$a,v$U){var v$x=this.ctx;v$I.isWebGL&&v$x.setPathId(-1),v$x.beginPath(),v$n+=v$U[0],v$a+=v$U[1],v$I.isWebGL&&v$x.movePath(v$n,v$a);for(var v$D=v$U[2],v$p=0,v$Q=v$D.length;v$p<v$Q;v$p++){var v$V=v$D[v$p];switch(v$V[0]){case"moveTo":v$I.isWebGL?v$x.moveTo(v$V[1],v$V[2]):v$x.moveTo(v$n+v$V[1],v$a+v$V[2]);break;case"lineTo":v$I.isWebGL?v$x.lineTo(v$V[1],v$V[2]):v$x.lineTo(v$n+v$V[1],v$a+v$V[2]);break;case"arcTo":v$I.isWebGL?v$x.arcTo(v$V[1],v$V[2],v$V[3],v$V[4],v$V[5]):v$x.arcTo(v$n+v$V[1],v$a+v$V[2],v$n+v$V[3],v$a+v$V[4],v$V[5]);break;case"closePath":v$x.closePath()}}var v$y=v$U[3];null!=v$y&&(v$x.fillStyle=v$y.fillStyle,v$x.fill());var v$R=v$U[4];null!=v$R&&(v$x.strokeStyle=v$R.strokeStyle,v$x.lineWidth=v$R.lineWidth||1,v$x.lineJoin=v$R.lineJoin,v$x.lineCap=v$R.lineCap,v$x.miterLimit=v$R.miterLimit,v$x.stroke())},this.drawPoly=function(v$n,v$a,v$U){this.ctx.drawPoly(v$n+this.x+v$U[0],v$a+this.y+v$U[1],v$U[2],v$U[3],v$U[4],v$U[5],v$U[6])},this._drawPoly=function(v$n,v$a,v$U){var v$x=this.ctx,v$D=v$U[2],v$p=2,v$Q=v$D.length;if(v$I.isWebGL)for(v$x.setPathId(v$U[6]),v$x.beginPath(),v$n+=v$U[0],v$a+=v$U[1],v$x.movePath(v$n,v$a),v$x.moveTo(v$D[0],v$D[1]);v$p<v$Q;)v$x.lineTo(v$D[v$p++],v$D[v$p++]);else for(v$x.beginPath(),v$n+=v$U[0],v$a+=v$U[1],v$x.moveTo(v$n+v$D[0],v$a+v$D[1]);v$p<v$Q;)v$x.lineTo(v$n+v$D[v$p++],v$a+v$D[v$p++]);v$x.closePath(),this._fillAndStroke(v$U[3],v$U[4],v$U[5],v$U[7])},this._drawSkin=function(v$n,v$a,v$U){var v$x=v$U[0];if(v$x){var v$D=this.ctx;v$x.render(v$D,v$n,v$a)}},this._drawParticle=function(v$n,v$a,v$U){this.ctx.drawParticle(v$n+this.x,v$a+this.y,v$U[0])},this._setFilters=function(v$n,v$a,v$U){this.ctx.setFilters(v$U)},v$U?this.ctx=v$U.getContext("2d"):(v$U=v$Tn.create("3D"),this.ctx=v$u.createWebGLContext2D(v$U),v$U._setContext(this.ctx)),v$U.size(v$n,v$a),this.canvas=v$U}v$X(v$Q,"laya.renders.RenderContext");var v$n=v$Q.prototype;return v$n.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},v$n.drawTexture=function(v$n,v$a,v$U,v$x,v$D){v$n.loaded&&this.ctx.drawTexture(v$n,v$a,v$U,v$x,v$D,this.x,this.y)},v$n._drawTextures=function(v$n,v$a,v$U){v$U[0].loaded&&this.ctx.drawTextures(v$U[0],v$U[1],v$n+this.x,v$a+this.y)},v$n.drawTextureWithTransform=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){v$n.loaded&&this.ctx.drawTextureWithTransform(v$n,v$a,v$U,v$x,v$D,v$p,this.x,this.y,v$Q)},v$n.fillQuadrangle=function(v$n,v$a,v$U,v$x,v$D){this.ctx.fillQuadrangle(v$n,v$a,v$U,v$x,v$D)},v$n.drawCanvas=function(v$n,v$a,v$U,v$x,v$D){this.ctx.drawCanvas(v$n,v$a+this.x,v$U+this.y,v$x,v$D)},v$n.drawRect=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$p&&(v$p=1);var v$Q=this.ctx;v$Q.strokeStyle=v$D,v$Q.lineWidth=v$p,v$Q.strokeRect(v$n+this.x,v$a+this.y,v$U,v$x,v$p)},v$n._fillAndStroke=function(v$n,v$a,v$U,v$x){void 0===v$x&&(v$x=!1);var v$D=this.ctx;null!=v$n&&(v$D.fillStyle=v$n,v$I.isWebGL?v$D.fill(v$x):v$D.fill()),null!=v$a&&0<v$U&&(v$D.strokeStyle=v$a,v$D.lineWidth=v$U,v$D.stroke())},v$n.clipRect=function(v$n,v$a,v$U,v$x){this.ctx.clipRect(v$n+this.x,v$a+this.y,v$U,v$x)},v$n.fillRect=function(v$n,v$a,v$U,v$x,v$D){this.ctx.fillRect(v$n+this.x,v$a+this.y,v$U,v$x,v$D)},v$n.drawCircle=function(v$n,v$a,v$U,v$x,v$D){void 0===v$D&&(v$D=1),v$w.drawCall++;var v$p=this.ctx;v$p.beginPath(),v$p.strokeStyle=v$x,v$p.lineWidth=v$D,v$p.arc(v$n+this.x,v$a+this.y,v$U,0,v$Q.PI2),v$p.stroke()},v$n.drawTriangles=function(v$n,v$a,v$U){if(v$I.isWebGL)this.ctx.drawTriangles(v$U[0],v$n+v$U[1],v$a+v$U[2],v$U[3],v$U[4],v$U[5],v$U[6],v$U[7],v$U[8],v$U[9]);else{var v$x=v$U[5],v$D=0,v$p=v$x.length,v$Q=this.ctx;for(v$D=0;v$D<v$p;v$D+=3){var v$V=2*v$x[v$D],v$y=2*v$x[v$D+1],v$R=2*v$x[v$D+2];v$Q.drawTriangle(v$U[0],v$U[3],v$U[4],v$V,v$y,v$R,v$U[6],!0)}}},v$n.fillCircle=function(v$n,v$a,v$U,v$x){v$w.drawCall++;var v$D=this.ctx;v$D.beginPath(),v$D.fillStyle=v$x,v$D.arc(v$n+this.x,v$a+this.y,v$U,0,v$Q.PI2),v$D.fill()},v$n.setShader=function(v$n){this.ctx.setShader(v$n)},v$n.drawLine=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$p&&(v$p=1);var v$Q=this.ctx;v$Q.beginPath(),v$Q.strokeStyle=v$D,v$Q.lineWidth=v$p,v$Q.moveTo(this.x+v$n,this.y+v$a),v$Q.lineTo(this.x+v$U,this.y+v$x),v$Q.stroke()},v$n.clear=function(){this.ctx.clear()},v$n.transformByMatrix=function(v$n){this.ctx.transformByMatrix(v$n)},v$n.setTransform=function(v$n,v$a,v$U,v$x,v$D,v$p){this.ctx.setTransform(v$n,v$a,v$U,v$x,v$D,v$p)},v$n.setTransformByMatrix=function(v$n){this.ctx.setTransformByMatrix(v$n)},v$n.save=function(){this.ctx.save()},v$n.restore=function(){this.ctx.restore()},v$n.translate=function(v$n,v$a){this.ctx.translate(v$n,v$a)},v$n.transform=function(v$n,v$a,v$U,v$x,v$D,v$p){this.ctx.transform(v$n,v$a,v$U,v$x,v$D,v$p)},v$n.rotate=function(v$n){this.ctx.rotate(v$n)},v$n.scale=function(v$n,v$a){this.ctx.scale(v$n,v$a)},v$n.alpha=function(v$n){this.ctx.globalAlpha*=v$n},v$n.setAlpha=function(v$n){this.ctx.globalAlpha=v$n},v$n.fillWords=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$p&&(v$p=0),this.ctx.fillWords(v$n,v$a,v$U,v$x,v$D,v$p)},v$n.fillBorderWords=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this.ctx.fillBorderWords(v$n,v$a,v$U,v$x,v$D,v$p,v$Q)},v$n.fillText=function(v$n,v$a,v$U,v$x,v$D,v$p){this.ctx.fillText(v$n,v$a+this.x,v$U+this.y,v$x,v$D,v$p)},v$n.strokeText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this.ctx.strokeText(v$n,v$a+this.x,v$U+this.y,v$x,v$D,v$p,v$Q)},v$n.blendMode=function(v$n){this.ctx.globalCompositeOperation=v$n},v$n.flush=function(){this.ctx.flush&&this.ctx.flush()},v$n.addRenderObject=function(v$n){this.ctx.addRenderObject(v$n)},v$n.beginClip=function(v$n,v$a,v$U,v$x){this.ctx.beginClip&&this.ctx.beginClip(v$n,v$a,v$U,v$x)},v$n.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},v$n.fillTrangles=function(v$n,v$a,v$U){this.ctx.fillTrangles(v$U[0],v$U[1],v$U[2],v$U[3],4<v$U.length?v$U[4]:null)},v$Q.PI2=2*Math.PI,v$Q}(),v$l=function(){function v$Q(v$n,v$a){switch(this._next=v$a||v$Q.NORENDER,v$n){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=v$P._filter);case 69905:return void(this._fun=v$Q._initRenderFun)}this.onCreate(v$n)}v$X(v$Q,"laya.renders.RenderSprite");var v$n=v$Q.prototype;return v$n.onCreate=function(v$n){},v$n._style=function(v$n,v$a,v$U,v$x){v$n._style.render(v$n,v$a,v$U,v$x);var v$D=this._next;v$D._fun.call(v$D,v$n,v$a,v$U,v$x)},v$n._no=function(v$n,v$a,v$U,v$x){},v$n._custom=function(v$n,v$a,v$U,v$x){v$n.customRender(v$a,v$U,v$x);var v$D=v$n._style._tf;this._next._fun.call(this._next,v$n,v$a,v$U-v$D.translateX,v$x-v$D.translateY)},v$n._clip=function(v$n,v$a,v$U,v$x){var v$D=this._next;if(v$D!=v$Q.NORENDER){var v$p=v$n._style.scrollRect;v$a.ctx.save(),v$a.ctx.clipRect(v$U,v$x,v$p.width,v$p.height),v$D._fun.call(v$D,v$n,v$a,v$U-v$p.x,v$x-v$p.y),v$a.ctx.restore()}},v$n._blend=function(v$n,v$a,v$U,v$x){var v$D=v$n._style;v$D.blendMode&&(v$a.ctx.globalCompositeOperation=v$D.blendMode);var v$p=this._next;v$p._fun.call(v$p,v$n,v$a,v$U,v$x),v$a.ctx.globalCompositeOperation="source-over"},v$n._mask=function(v$n,v$a,v$U,v$x){var v$D=this._next;v$D._fun.call(v$D,v$n,v$a,v$U,v$x);var v$p=v$n.mask;v$p&&(v$a.ctx.globalCompositeOperation="destination-in",(0<v$p.numChildren||!v$p.graphics._isOnlyOne())&&(v$p.cacheAsBitmap=!0),v$p.render(v$a,v$U-v$n.pivotX,v$x-v$n.pivotY)),v$a.ctx.globalCompositeOperation="source-over"},v$n._graphics=function(v$n,v$a,v$U,v$x){var v$D=v$n._style._tf;v$n._graphics&&v$n._graphics._render(v$n,v$a,v$U-v$D.translateX,v$x-v$D.translateY);var v$p=this._next;v$p._fun.call(v$p,v$n,v$a,v$U,v$x)},v$n._image=function(v$n,v$a,v$U,v$x){var v$D=v$n._style;v$a.ctx.drawTexture2(v$U,v$x,v$D._tf.translateX,v$D._tf.translateY,v$n.transform,v$D.alpha,v$D.blendMode,v$n._graphics._one)},v$n._image2=function(v$n,v$a,v$U,v$x){var v$D=v$n._style._tf;v$a.ctx.drawTexture2(v$U,v$x,v$D.translateX,v$D.translateY,v$n.transform,1,null,v$n._graphics._one)},v$n._alpha=function(v$n,v$a,v$U,v$x){var v$D;if(.01<(v$D=v$n._style.alpha)||v$n._needRepaint()){var v$p=v$a.ctx.globalAlpha;v$a.ctx.globalAlpha*=v$D;var v$Q=this._next;v$Q._fun.call(v$Q,v$n,v$a,v$U,v$x),v$a.ctx.globalAlpha=v$p}},v$n._transform=function(v$n,v$a,v$U,v$x){var v$D=v$n.transform,v$p=this._next;v$D&&v$p!=v$Q.NORENDER?(v$a.save(),v$a.transform(v$D.a,v$D.b,v$D.c,v$D.d,v$D.tx+v$U,v$D.ty+v$x),v$p._fun.call(v$p,v$n,v$a,0,0),v$a.restore()):v$p._fun.call(v$p,v$n,v$a,v$U,v$x)},v$n._childs=function(v$n,v$a,v$U,v$x){var v$D=v$n._style,v$p=v$D._tf;if(v$U=v$U-v$p.translateX+v$D.paddingLeft,v$x=v$x-v$p.translateY+v$D.paddingTop,v$D._calculation){var v$Q=v$n._getWords();if(v$Q){var v$V=v$D;v$V&&(v$V.stroke?v$a.fillBorderWords(v$Q,v$U,v$x,v$V.font,v$V.color,v$V.strokeColor,v$V.stroke):v$a.fillWords(v$Q,v$U,v$x,v$V.font,v$V.color,"none"!=v$V.textDecoration&&v$V.underLine?1:0))}}var v$y,v$R=v$n._childs,v$X=v$R.length;if(v$n.viewport||v$n.optimizeScrollRect&&v$n._style.scrollRect){var v$z=v$n.viewport||v$n._style.scrollRect,v$i=v$z.x,v$q=v$z.y,v$E=v$z.right,v$m=v$z.bottom,v$b=NaN,v$P=NaN;for(v$A=0;v$A<v$X;++v$A)(v$y=v$R[v$A]).visible&&(v$b=v$y._x)<v$E&&v$b+v$y.width>v$i&&(v$P=v$y._y)<v$m&&v$P+v$y.height>v$q&&v$y.render(v$a,v$U,v$x)}else for(var v$A=0;v$A<v$X;++v$A)(v$y=v$R[v$A])._style.visible&&v$y.render(v$a,v$U,v$x)},v$n._canvas=function(v$n,v$a,v$U,v$x){var v$D=v$n._$P.cacheCanvas;if(v$D){"bitmap"===v$D.type?v$w.canvasBitmap++:v$w.canvasNormal++;var v$p=v$D.ctx;if(v$n._needRepaint()||!v$p)this._canvas_repaint(v$n,v$a,v$U,v$x);else{var v$Q=v$D._cacheRec;v$a.drawCanvas(v$p.canvas,v$U+v$Q.x,v$x+v$Q.y,v$Q.width,v$Q.height)}}else this._next._fun.call(this._next,v$n,v$a,v$U,v$x)},v$n._canvas_repaint=function(v$n,v$a,v$U,v$x){var v$D=v$n._$P.cacheCanvas,v$p=this._next;if(v$D){var v$Q,v$V,v$y,v$R,v$X=v$D.ctx,v$z=v$n._needRepaint()||!v$X,v$i=v$D.type;if("bitmap"===v$i?v$w.canvasBitmap++:v$w.canvasNormal++,v$z){var v$q,v$E;v$D._cacheRec||(v$D._cacheRec=new v$_),v$I.isWebGL&&"bitmap"!==v$i?v$D._cacheRec.setTo(-v$n.pivotX,-v$n.pivotY,1,1):((v$R=v$n.getSelfBounds()).x=v$R.x-v$n.pivotX,v$R.y=v$R.y-v$n.pivotY,v$R.x=v$R.x-16,v$R.y=v$R.y-16,v$R.width=v$R.width+32,v$R.height=v$R.height+32,v$R.x=Math.floor(v$R.x+v$U)-v$U,v$R.y=Math.floor(v$R.y+v$x)-v$x,v$R.width=Math.floor(v$R.width),v$R.height=Math.floor(v$R.height),v$D._cacheRec.copyFrom(v$R)),v$R=v$D._cacheRec;var v$m,v$b=v$I.isWebGL?1:v$f.pixelRatio*v$k.stage.clientScaleX,v$P=v$I.isWebGL?1:v$f.pixelRatio*v$k.stage.clientScaleY;if(!v$I.isWebGL){var v$A,v$T=1,v$K=1;for(v$A=v$n;v$A&&v$A!=v$k.stage;)v$T*=v$A.scaleX,v$K*=v$A.scaleY,v$A=v$A.parent;v$I.isWebGL?(v$T<1&&(v$b*=v$T),v$K<1&&(v$P*=v$K)):(1<v$T&&(v$b*=v$T),1<v$K&&(v$P*=v$K))}if(v$n.scrollRect){var v$Y=v$n.scrollRect;v$R.x-=v$Y.x,v$R.y-=v$Y.y}if(v$q=v$R.width*v$b,v$E=v$R.height*v$P,v$V=v$R.x,v$y=v$R.y,v$I.isWebGL&&"bitmap"===v$i&&(2048<v$q||2048<v$E))return console.warn("cache bitmap size larger than 2048,cache ignored"),v$D.ctx&&(v$S.recover("RenderContext",v$D.ctx),v$D.ctx.canvas.size(0,0),v$D.ctx=null),void v$p._fun.call(v$p,v$n,v$a,v$U,v$x);if(v$X||(v$X=v$D.ctx=v$S.getItem("RenderContext")||new v$v(v$q,v$E,v$Tn.create("AUTO"))),v$X.ctx.sprite=v$n,(v$Q=v$X.canvas).clear(),(v$Q.width!=v$q||v$Q.height!=v$E)&&v$Q.size(v$q,v$E),"bitmap"===v$i?v$Q.context.asBitmap=!0:"normal"===v$i&&(v$Q.context.asBitmap=!1),1!=v$b||1!=v$P){var v$W=v$X.ctx;v$W.save(),v$W.scale(v$b,v$P),!v$I.isConchWebGL&&v$I.isConchApp&&(v$m=v$n._$P.cf)&&v$W.setFilterMatrix&&v$W.setFilterMatrix(v$m._mat,v$m._alpha),v$p._fun.call(v$p,v$n,v$X,-v$V,-v$y),v$W.restore(),v$I.isConchApp&&!v$I.isConchWebGL||v$n._applyFilters()}else v$W=v$X.ctx,!v$I.isConchWebGL&&v$I.isConchApp&&(v$m=v$n._$P.cf)&&v$W.setFilterMatrix&&v$W.setFilterMatrix(v$m._mat,v$m._alpha),v$p._fun.call(v$p,v$n,v$X,-v$V,-v$y),v$I.isConchApp&&!v$I.isConchWebGL||v$n._applyFilters();v$n._$P.staticCache&&(v$D.reCache=!1),v$w.canvasReCache++}else v$V=(v$R=v$D._cacheRec).x,v$y=v$R.y,v$Q=v$X.canvas;v$a.drawCanvas(v$Q,v$U+v$V,v$x+v$y,v$R.width,v$R.height)}else v$p._fun.call(v$p,v$n,v$X,v$U,v$x)},v$Q.__init__=function(){var v$n,v$a,v$U=0;for(v$a=v$u.createRenderSprite(69905,null),v$n=v$Q.renders.length=4096,v$U=0;v$U<v$n;v$U++)v$Q.renders[v$U]=v$a;v$Q.renders[0]=v$u.createRenderSprite(0,null),function(v$n,v$a){for(var v$U=0,v$x=0;v$x<v$n.length;v$x++)v$U|=v$n[v$x],v$Q.renders[v$U]=v$a}([1,512,4,2],new v$Q(1,null)),v$Q.renders[513]=v$u.createRenderSprite(513,null),v$Q.renders[517]=new v$Q(517,null)},v$Q._initRenderFun=function(v$n,v$a,v$U,v$x){var v$D=v$n._renderType;(v$Q.renders[v$D]=v$Q._getTypeRender(v$D))._fun(v$n,v$a,v$U,v$x)},v$Q._getTypeRender=function(v$n){for(var v$a=null,v$U=2048;1<v$U;)v$U&v$n&&(v$a=v$u.createRenderSprite(v$U,v$a)),v$U>>=1;return v$a},v$Q.IMAGE=1,v$Q.ALPHA=2,v$Q.TRANSFORM=4,v$Q.BLEND=8,v$Q.CANVAS=16,v$Q.FILTERS=32,v$Q.MASK=64,v$Q.CLIP=128,v$Q.STYLE=256,v$Q.GRAPHICS=512,v$Q.CUSTOM=1024,v$Q.CHILDS=2048,v$Q.INIT=69905,v$Q.renders=[],v$Q.NORENDER=new v$Q(0,null),v$Q}(),v$j=function(){function v$V(){this._repaint=!1}v$X(v$V,"laya.resource.Context");var v$n=v$V.prototype;return v$n.replaceReset=function(){var v$n,v$a,v$U=0;for(v$n=v$V.replaceKeys.length,v$U=0;v$U<v$n;v$U++)v$a=v$V.replaceKeys[v$U],this[v$V.newKeys[v$U]]=this[v$a]},v$n.replaceResotre=function(){this.__restore(),this.__reset()},v$n.setIsMainContext=function(){},v$n.drawTextures=function(v$n,v$a,v$U,v$x){v$w.drawCall+=v$a.length/2;for(var v$D=v$n.width,v$p=v$n.height,v$Q=0,v$V=v$a.length;v$Q<v$V;v$Q+=2)this.drawTexture(v$n,v$a[v$Q],v$a[v$Q+1],v$D,v$p,v$U,v$x)},v$n.drawCanvas=function(v$n,v$a,v$U,v$x,v$D){v$w.drawCall++,this.drawImage(v$n.source,v$a,v$U,v$x,v$D)},v$n.fillRect=function(v$n,v$a,v$U,v$x,v$D){v$w.drawCall++,v$D&&(this.fillStyle=v$D),this.__fillRect(v$n,v$a,v$U,v$x)},v$n.fillText=function(v$n,v$a,v$U,v$x,v$D,v$p){v$w.drawCall++,3<arguments.length&&null!=v$x&&(this.font=v$x,this.fillStyle=v$D,this.textAlign=v$p,this.textBaseline="top"),this.__fillText(v$n,v$a,v$U)},v$n.fillBorderText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){v$w.drawCall++,this.font=v$x,this.fillStyle=v$D,this.textBaseline="top",this.strokeStyle=v$p,this.lineWidth=v$Q,this.textAlign=v$V,this.__strokeText(v$n,v$a,v$U),this.__fillText(v$n,v$a,v$U)},v$n.strokeText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){v$w.drawCall++,3<arguments.length&&null!=v$x&&(this.font=v$x,this.strokeStyle=v$D,this.lineWidth=v$p,this.textAlign=v$Q,this.textBaseline="top"),this.__strokeText(v$n,v$a,v$U)},v$n.transformByMatrix=function(v$n){this.transform(v$n.a,v$n.b,v$n.c,v$n.d,v$n.tx,v$n.ty)},v$n.setTransformByMatrix=function(v$n){this.setTransform(v$n.a,v$n.b,v$n.c,v$n.d,v$n.tx,v$n.ty)},v$n.clipRect=function(v$n,v$a,v$U,v$x){v$w.drawCall++,this.beginPath(),this.rect(v$n,v$a,v$U,v$x),this.clip()},v$n.drawTexture=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){v$w.drawCall++;var v$V=v$n.uv,v$y=v$n.bitmap.width,v$R=v$n.bitmap.height;this.drawImage(v$n.source,v$V[0]*v$y,v$V[1]*v$R,(v$V[2]-v$V[0])*v$y,(v$V[5]-v$V[3])*v$R,v$a+v$p,v$U+v$Q,v$x,v$D)},v$n.drawTextureWithTransform=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){v$w.drawCall++;var v$R=v$n.uv,v$X=v$n.bitmap.width,v$z=v$n.bitmap.height;this.save(),1!=v$y&&(this.globalAlpha*=v$y),v$p?(this.transform(v$p.a,v$p.b,v$p.c,v$p.d,v$p.tx+v$Q,v$p.ty+v$V),this.drawImage(v$n.source,v$R[0]*v$X,v$R[1]*v$z,(v$R[2]-v$R[0])*v$X,(v$R[5]-v$R[3])*v$z,v$a,v$U,v$x,v$D)):this.drawImage(v$n.source,v$R[0]*v$X,v$R[1]*v$z,(v$R[2]-v$R[0])*v$X,(v$R[5]-v$R[3])*v$z,v$a+v$Q,v$U+v$V,v$x,v$D),this.restore()},v$n.drawTexture2=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){var v$y=v$V[0];if(v$y.loaded&&v$y.bitmap&&v$y.source){v$w.drawCall++;var v$R=1!==v$p;if(v$R){var v$X=this.globalAlpha;this.globalAlpha*=v$p}var v$z=v$y.uv,v$i=v$y.bitmap.width,v$q=v$y.bitmap.height;v$D?(this.save(),this.transform(v$D.a,v$D.b,v$D.c,v$D.d,v$D.tx+v$n,v$D.ty+v$a),this.drawImage(v$y.source,v$z[0]*v$i,v$z[1]*v$q,(v$z[2]-v$z[0])*v$i,(v$z[5]-v$z[3])*v$q,v$V[1]-v$U,v$V[2]-v$x,v$V[3],v$V[4]),this.restore()):this.drawImage(v$y.source,v$z[0]*v$i,v$z[1]*v$q,(v$z[2]-v$z[0])*v$i,(v$z[5]-v$z[3])*v$q,v$V[1]-v$U+v$n,v$V[2]-v$x+v$a,v$V[3],v$V[4]),v$R&&(this.globalAlpha=v$X)}},v$n.fillTexture=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){if(!v$V.pat){if(v$n.uv!=v$Xn.DEF_UV){var v$y=new v$Tn("2D");v$y.getContext("2d"),v$y.size(v$n.width,v$n.height),v$y.context.drawTexture(v$n,0,0,v$n.width,v$n.height,0,0),v$n=new v$Xn(v$y)}v$V.pat=this.createPattern(v$n.bitmap.source,v$p)}var v$R=v$a,v$X=v$U,v$z=0,v$i=0;v$Q&&(v$R+=v$Q.x%v$n.width,v$X+=v$Q.y%v$n.height,v$z-=v$Q.x%v$n.width,v$i-=v$Q.y%v$n.height),this.translate(v$R,v$X),this.fillRect(v$z,v$i,v$x,v$D,v$V.pat),this.translate(-v$R,-v$X)},v$n.drawTriangle=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){var v$y=v$n.bitmap,v$R=v$y.source,v$X=v$n.width,v$z=v$n.height,v$i=v$y.width,v$q=v$y.height,v$E=v$U[v$x]*v$i,v$m=v$U[v$D]*v$i,v$b=v$U[v$p]*v$i,v$P=v$U[v$x+1]*v$q,v$A=v$U[v$D+1]*v$q,v$T=v$U[v$p+1]*v$q,v$K=v$a[v$x],v$Y=v$a[v$D],v$W=v$a[v$p],v$k=v$a[v$x+1],v$N=v$a[v$D+1],v$_=v$a[v$p+1];if(v$V){var v$$=(v$K+v$Y+v$W)/3,v$M=(v$k+v$N+v$_)/3,v$Z=v$K-v$$,v$u=v$k-v$M,v$c=Math.sqrt(v$Z*v$Z+v$u*v$u);v$K=v$$+v$Z/v$c*(v$c+1),v$k=v$M+v$u/v$c*(v$c+1),v$u=v$N-v$M,v$Y=v$$+(v$Z=v$Y-v$$)/(v$c=Math.sqrt(v$Z*v$Z+v$u*v$u))*(v$c+1),v$N=v$M+v$u/v$c*(v$c+1),v$u=v$_-v$M,v$W=v$$+(v$Z=v$W-v$$)/(v$c=Math.sqrt(v$Z*v$Z+v$u*v$u))*(v$c+1),v$_=v$M+v$u/v$c*(v$c+1)}this.save(),v$Q&&this.transform(v$Q.a,v$Q.b,v$Q.c,v$Q.d,v$Q.tx,v$Q.ty),this.beginPath(),this.moveTo(v$K,v$k),this.lineTo(v$Y,v$N),this.lineTo(v$W,v$_),this.closePath(),this.clip();var v$H=1/(v$E*v$A+v$P*v$b+v$m*v$T-v$A*v$b-v$P*v$m-v$E*v$T),v$G=v$K*v$A+v$P*v$W+v$Y*v$T-v$A*v$W-v$P*v$Y-v$K*v$T,v$I=v$E*v$Y+v$K*v$b+v$m*v$W-v$Y*v$b-v$K*v$m-v$E*v$W,v$v=v$E*v$A*v$W+v$P*v$Y*v$b+v$K*v$m*v$T-v$K*v$A*v$b-v$P*v$m*v$W-v$E*v$Y*v$T,v$l=v$k*v$A+v$P*v$_+v$N*v$T-v$A*v$_-v$P*v$N-v$k*v$T,v$j=v$E*v$N+v$k*v$b+v$m*v$_-v$N*v$b-v$k*v$m-v$E*v$_,v$h=v$E*v$A*v$_+v$P*v$N*v$b+v$k*v$m*v$T-v$k*v$A*v$b-v$P*v$m*v$_-v$E*v$N*v$T;this.transform(v$G*v$H,v$l*v$H,v$I*v$H,v$j*v$H,v$v*v$H,v$h*v$H),this.drawImage(v$R,v$n.uv[0]*v$i,v$n.uv[1]*v$q,v$X,v$z,v$n.uv[0]*v$i,v$n.uv[1]*v$q,v$X,v$z),this.restore()},v$n.flush=function(){return 0},v$n.fillWords=function(v$n,v$a,v$U,v$x,v$D,v$p){v$x&&(this.font=v$x),v$D&&(this.fillStyle=v$D);this.textBaseline="top",this.textAlign="left";for(var v$Q=0,v$V=v$n.length;v$Q<v$V;v$Q++){var v$y=v$n[v$Q];if(this.__fillText(v$y.char,v$y.x+v$a,v$y.y+v$U),1===v$p){var v$R=v$y.height,v$X=.5*v$y.style.letterSpacing;v$X||(v$X=0),this.beginPath(),this.strokeStyle=v$D,this.lineWidth=1,this.moveTo(v$a+v$y.x-v$X+.5,v$U+v$y.y+v$R+.5),this.lineTo(v$a+v$y.x+v$y.width+v$X+.5,v$U+v$y.y+v$R+.5),this.stroke()}}},v$n.fillBorderWords=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){v$x&&(this.font=v$x),v$D&&(this.fillStyle=v$D),this.textBaseline="top",this.lineWidth=v$Q,this.textAlign="left",this.strokeStyle=v$p;for(var v$V=0,v$y=v$n.length;v$V<v$y;v$V++){var v$R=v$n[v$V];this.__strokeText(v$R.char,v$R.x+v$a,v$R.y+v$U),this.__fillText(v$R.char,v$R.x+v$a,v$R.y+v$U)}},v$n.destroy=function(){this.canvas.width=this.canvas.height=0},v$n.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},v$n.drawCurves=function(v$n,v$a,v$U){this.beginPath(),this.strokeStyle=v$U[3],this.lineWidth=v$U[4];var v$x=v$U[2];v$n+=v$U[0],v$a+=v$U[1],this.moveTo(v$n+v$x[0],v$a+v$x[1]);for(var v$D=2,v$p=v$x.length;v$D<v$p;)this.quadraticCurveTo(v$n+v$x[v$D++],v$a+v$x[v$D++],v$n+v$x[v$D++],v$a+v$x[v$D++]);this.stroke()},v$V.__init__=function(v$a){var v$U=laya.resource.Context.prototype;if(!(v$a=v$a||CanvasRenderingContext2D.prototype).inited){v$a.inited=!0,v$a.__fillText=v$a.fillText,v$a.__fillRect=v$a.fillRect,v$a.__strokeText=v$a.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(v$n){v$a[v$n]=v$U[v$n]})}},v$V.replaceCanvasGetSet=function(v$n,v$a){var v$U=Object.getOwnPropertyDescriptor(v$n,v$a);if(!v$U||!v$U.configurable)return!1;var v$x,v$D={};for(v$x in v$U)"set"!=v$x&&(v$D[v$x]=v$U[v$x]);var v$p=v$U.set;return v$D.set=function(v$n){v$p.call(this,v$n);var v$a=this.getContext("2d");v$a&&"__reset"in v$a&&v$a.__reset()},Object.defineProperty(v$n,v$a,v$D),!0},v$V.replaceGetSet=function(v$n,v$a){var v$U=Object.getOwnPropertyDescriptor(v$n,v$a);if(!v$U||!v$U.configurable)return!1;var v$x,v$D={};for(v$x in v$U)"set"!=v$x&&(v$D[v$x]=v$U[v$x]);var v$p=v$U.set,v$Q="___"+v$a+"__";return v$V.newKeys.push(v$Q),v$D.set=function(v$n){v$n!=this[v$Q]&&(this[v$Q]=v$n,v$p.call(this,v$n))},Object.defineProperty(v$n,v$a,v$D),!0},v$V._default=new v$V,v$V.newKeys=[],v$y(v$V,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),v$V}(),v$h=function(){function v$p(v$n){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++v$p._uniqueIDCounter,this._name=v$n||"Content Manager",v$p._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,v$p._resourceManagers.push(this),this._resources=[],this._records={}}v$X(v$p,"laya.resource.ResourceManager");var v$n=v$p.prototype;return v$k.imps(v$n,{"laya.resource.IDispose":!0}),v$n.getResourceByIndex=function(v$n){return this._resources[v$n]},v$n.getResourcesLength=function(){return this._resources.length},v$n.addResource=function(v$n){return v$n.resourceManager&&v$n.resourceManager.removeResource(v$n),-1===this._resources.indexOf(v$n)&&((v$n._resourceManager=this)._resources.push(v$n),this.addRecord(v$n.uri,v$n.__className,v$n.memorySize),this.addSize(v$n.memorySize),!0)},v$n.removeResource=function(v$n){var v$a=this._resources.indexOf(v$n);return-1!==v$a&&(this._resources.splice(v$a,1),v$n._resourceManager=null,this._memorySize-=v$n.memorySize,this.addRecord(v$n.uri,v$n.__className,-v$n.memorySize),!0)},v$n.unload=function(){for(var v$n=this._resources.slice(0,this._resources.length),v$a=0;v$a<v$n.length;v$a++){v$n[v$a].destroy()}v$n.length=0},v$n.dispose=function(){if(this===v$p._systemResourceManager)throw new Error("systemResourceManager不能被释放！");v$p._resourceManagers.splice(v$p._resourceManagers.indexOf(this),1),v$p._isResourceManagersSorted=!1;for(var v$n=this._resources.slice(0,this._resources.length),v$a=0;v$a<v$n.length;v$a++){var v$U=v$n[v$a];v$U.resourceManager.removeResource(v$U),v$U.destroy()}v$n.length=0},v$n.addSize=function(v$n){v$n&&(this.autoRelease&&0<v$n&&this._memorySize+v$n>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=v$n)},v$n.addRecord=function(v$n,v$a,v$U){DEBUG&&v$U&&!v$n&&console.error(v$n,v$a,v$U)},v$n.garbageCollection=function(v$n){var v$a=this._resources;(v$a=v$a.slice()).sort(function(v$n,v$a){if(!v$n||!v$a)throw new Error("a或b不能为空！");return v$n.released&&v$a.released?0:v$n.released?1:v$a.released?-1:v$n._lastUseFrameCount-v$a._lastUseFrameCount});for(var v$U=v$w.loopCount,v$x=0,v$D=v$a.length;v$x<v$D;v$x++){var v$p=v$a[v$x];if(!(1<v$U-v$p._lastUseFrameCount))return void(this._memorySize>=v$n&&(this._isOverflow=!0));if(v$p.releaseResource(),this._memorySize<v$n)return void(this._isOverflow=!1)}},v$E(0,v$n,"id",function(){return this._id}),v$E(0,v$n,"name",function(){return this._name},function(v$n){!v$n&&""===v$n||this._name===v$n||(this._name=v$n,v$p._isResourceManagersSorted=!1)}),v$E(0,v$n,"memorySize",function(){return this._memorySize}),v$E(0,v$n,"records",function(){return this._records}),v$E(1,v$p,"systemResourceManager",function(){return v$p._systemResourceManager}),v$p.__init__=function(){v$p.currentResourceManager=v$p.systemResourceManager},v$p.getLoadedResourceManagerByIndex=function(v$n){return v$p._resourceManagers[v$n]},v$p.getLoadedResourceManagersCount=function(){return v$p._resourceManagers.length},v$p.recreateContentManagers=function(v$n){void 0===v$n&&(v$n=!1);for(var v$a=v$p.currentResourceManager,v$U=0;v$U<v$p._resourceManagers.length;v$U++){v$p.currentResourceManager=v$p._resourceManagers[v$U];for(var v$x=0;v$x<v$p.currentResourceManager._resources.length;v$x++)v$p.currentResourceManager._resources[v$x].releaseResource(v$n),v$p.currentResourceManager._resources[v$x].activeResource(v$n)}v$p.currentResourceManager=v$a},v$p.releaseContentManagers=function(v$n){void 0===v$n&&(v$n=!1);for(var v$a=v$p.currentResourceManager,v$U=0;v$U<v$p._resourceManagers.length;v$U++){v$p.currentResourceManager=v$p._resourceManagers[v$U];for(var v$x=0;v$x<v$p.currentResourceManager._resources.length;v$x++){var v$D=v$p.currentResourceManager._resources[v$x];!v$D.released&&v$D.releaseResource(v$n)}}v$p.currentResourceManager=v$a},v$p._uniqueIDCounter=0,v$p._isResourceManagersSorted=!1,v$p._resourceManagers=[],v$y(v$p,["_systemResourceManager",function(){return this._systemResourceManager=new v$p("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=v$p._systemResourceManager}]),v$p}(),v$f=(function(){function v$n(){}v$X(v$n,"laya.system.System"),v$n.changeDefinition=function(v$n,v$a){v$k[v$n]=v$a;var v$U=v$n+"=classObj";v$k._runScript(v$U)},v$n.__init__=function(){v$I.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function v$U(){}return v$X(v$U,"laya.utils.Browser"),v$E(1,v$U,"pixelRatio",function(){return v$U.__init__(),-1<v$U.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:v$u.getPixelRatio()}),v$E(1,v$U,"height",function(){return v$U.__init__(),(v$k.stage&&v$k.stage.canvasRotation?v$U.clientWidth:v$U.clientHeight)*v$U.pixelRatio}),v$E(1,v$U,"clientWidth",function(){return v$U.__init__(),v$U.window.innerWidth||v$U.document.body.clientWidth}),v$E(1,v$U,"window",function(){return v$U.__init__(),v$U._window}),v$E(1,v$U,"clientHeight",function(){return v$U.__init__(),v$U.window.innerHeight||v$U.document.body.clientHeight||v$U.document.documentElement.clientHeight}),v$E(1,v$U,"width",function(){return v$U.__init__(),(v$k.stage&&v$k.stage.canvasRotation?v$U.clientHeight:v$U.clientWidth)*v$U.pixelRatio}),v$E(1,v$U,"container",function(){return v$U.__init__(),v$U._container||((v$U._container=v$U.createElement("div")).id="layaContainer",v$U.document.body.appendChild(v$U._container)),v$U._container},function(v$n){v$U._container=v$n}),v$E(1,v$U,"document",function(){return v$U.__init__(),v$U._document}),v$U.__init__=function(){if(!v$U._window){v$U._window=v$u.getWindow(),v$U._document=v$U.window.document,v$U._window.addEventListener("message",function(v$n){laya.utils.Browser._onMessage(v$n)},!1),v$U.document.__createElement=v$U.document.createElement,v$Q.requestAnimationFrame=v$Q.requestAnimationFrame||v$Q.webkitRequestAnimationFrame||v$Q.mozRequestAnimationFrame||v$Q.oRequestAnimationFrame||v$Q.msRequestAnimationFrame||function(v$n){return v$Q.setTimeout(v$n,1e3/60)};var v$n=v$Q.document.body.style;v$n["-webkit-user-select"]="none",v$n["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",v$U.userAgent=v$U.window.navigator.userAgent,v$U.onIOS=!!(v$U.u=v$U.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),v$U.onMobile=-1<v$U.u.indexOf("Mobile"),v$U.onIPhone=-1<v$U.u.indexOf("iPhone"),v$U.onMac=-1<v$U.u.indexOf("Mac OS X"),v$U.onIPad=-1<v$U.u.indexOf("iPad"),v$U.onAndroid=-1<v$U.u.indexOf("Android")||-1<v$U.u.indexOf("Adr"),v$U.onWP=-1<v$U.u.indexOf("Windows Phone"),v$U.onQQBrowser=-1<v$U.u.indexOf("QQBrowser"),v$U.onMQQBrowser=-1<v$U.u.indexOf("MQQBrowser")||-1<v$U.u.indexOf("Mobile")&&-1<v$U.u.indexOf("QQ"),v$U.onIE=!!v$U.window.ActiveXObject||"ActiveXObject"in v$U.window,v$U.onWeiXin=-1<v$U.u.indexOf("MicroMessenger"),v$U.onPC=!v$U.onMobile,v$U.onSafari=-1<v$U.u.indexOf("Safari"),v$U.onFirefox=-1<v$U.u.indexOf("Firefox"),v$U.onEdge=-1<v$U.u.indexOf("Edge"),v$U.onMiniGame=-1<v$U.u.indexOf("MiniGame"),v$U.onLimixiu=-1<v$U.u.indexOf("limixiu"),v$U.httpProtocol="http:"==v$U.window.location.protocol,v$U.onMiniGame&&null==v$U.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),v$U.webAudioEnabled=!!(v$U.window.AudioContext||v$U.window.webkitAudioContext||v$U.window.mozAudioContext),v$U.soundType=v$U.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",v$Dn=v$U.webAudioEnabled?v$pn:v$Un,v$U.webAudioEnabled&&v$pn.initWebAudio(),v$Un._initMusicAudio(),v$U.enableTouch="ontouchstart"in v$Q||v$Q.DocumentTouch&&v$a instanceof DocumentTouch,v$Q.focus(),v$Z._soundClass=v$Dn,v$Z._musicClass=v$Un,v$I._mainCanvas=v$I._mainCanvas||v$Tn.create("2D"),v$U.canvas||(v$U.canvas=v$Tn.create("2D"),v$U.context=v$U.canvas.getContext("2d"))}},v$U._onMessage=function(v$n){if(v$n.data&&"size"==v$n.data.name){if(v$U.window.innerWidth=v$n.data.width,v$U.window.innerHeight=v$n.data.height,v$U.window.__innerHeight=v$n.data.clientHeight,!v$U.document.createEvent)return void console.warn("no document.createEvent");var v$a=v$U.document.createEvent("HTMLEvents");return v$a.initEvent("resize",!1,!1),void v$U.window.dispatchEvent(v$a)}},v$U.createElement=function(v$n){return v$U.__init__(),v$U.document.__createElement(v$n)},v$U.getElementById=function(v$n){return v$U.__init__(),v$U.document.getElementById(v$n)},v$U.removeElement=function(v$n){v$n&&v$n.parentNode&&v$n.parentNode.removeChild(v$n)},v$U.now=function(){return v$u.now()},v$U._window=null,v$U._document=null,v$U._container=null,v$U.userAgent=null,v$U.u=null,v$U.onIOS=!1,v$U.onMac=!1,v$U.onMobile=!1,v$U.onIPhone=!1,v$U.onIPad=!1,v$U.onAndroid=!1,v$U.onWP=!1,v$U.onQQBrowser=!1,v$U.onMQQBrowser=!1,v$U.onSafari=!1,v$U.onFirefox=!1,v$U.onEdge=!1,v$U.onIE=!1,v$U.onWeiXin=!1,v$U.onMiniGame=!1,v$U.onLimixiu=!1,v$U.onPC=!1,v$U.httpProtocol=!1,v$U.webAudioEnabled=!1,v$U.soundType=null,v$U.enableTouch=!1,v$U.canvas=null,v$U.context=null,v$U.__init$=function(){},v$U}()),v$F=function(){function v$a(v$n){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,v$n?(this._u8d_=new Uint8Array(v$n),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}v$X(v$a,"laya.utils.Byte");var v$n=v$a.prototype;return v$n.___resizeBuffer=function(v$a){try{var v$n=new Uint8Array(v$a);null!=this._u8d_&&(this._u8d_.length<=v$a?v$n.set(this._u8d_):v$n.set(this._u8d_.subarray(0,v$a))),this._u8d_=v$n,this._d_=new DataView(v$n.buffer)}catch(v$n){throw"___resizeBuffer err:"+v$a}},v$n.getString=function(){return this.rUTF(this.getUint16())},v$n.getFloat32Array=function(v$n,v$a){var v$U=v$n+v$a;v$U=v$U>this._length?this._length:v$U;var v$x=new Float32Array(this._d_.buffer.slice(v$n,v$U));return this._pos_=v$U,v$x},v$n.getUint8Array=function(v$n,v$a){var v$U=v$n+v$a;v$U=v$U>this._length?this._length:v$U;var v$x=new Uint8Array(this._d_.buffer.slice(v$n,v$U));return this._pos_=v$U,v$x},v$n.getInt16Array=function(v$n,v$a){var v$U=v$n+v$a;v$U=v$U>this._length?this._length:v$U;var v$x=new Int16Array(this._d_.buffer.slice(v$n,v$U));return this._pos_=v$U,v$x},v$n.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var v$n=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,v$n},v$n.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var v$n=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,v$n},v$n.writeFloat32=function(v$n){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,v$n,this._xd_),this._pos_+=4},v$n.writeFloat64=function(v$n){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,v$n,this._xd_),this._pos_+=8},v$n.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var v$n=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,v$n},v$n.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var v$n=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,v$n},v$n.writeInt32=function(v$n){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,v$n,this._xd_),this._pos_+=4},v$n.writeUint32=function(v$n){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,v$n,this._xd_),this._pos_+=4},v$n.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var v$n=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,v$n},v$n.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var v$n=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,v$n},v$n.writeUint16=function(v$n){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,v$n,this._xd_),this._pos_+=2},v$n.writeInt16=function(v$n){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,v$n,this._xd_),this._pos_+=2},v$n.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},v$n.writeUint8=function(v$n){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,v$n),this._pos_++},v$n._getUInt8=function(v$n){return this._d_.getUint8(v$n)},v$n._getUint16=function(v$n){return this._d_.getUint16(v$n,this._xd_)},v$n._getMatrix=function(){return new v$c(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},v$n.rUTF=function(v$n){for(var v$a=[],v$U=this._pos_+v$n,v$x=0,v$D=0,v$p=0,v$Q=String.fromCharCode,v$V=this._u8d_;this._pos_<v$U;)(v$x=v$V[this._pos_++])<128?0!=v$x&&v$a.push(v$Q(v$x)):v$x<224?v$a.push(v$Q((63&v$x)<<6|127&v$V[this._pos_++])):v$x<240?(v$D=v$V[this._pos_++],v$a.push(v$Q((31&v$x)<<12|(127&v$D)<<6|127&v$V[this._pos_++]))):(v$D=v$V[this._pos_++],v$p=v$V[this._pos_++],v$a.push(v$Q((15&v$x)<<18|(127&v$D)<<12|v$p<<6&127|127&v$V[this._pos_++]))),0;return v$a.join("")},v$n.getCustomString=function(v$n){for(var v$a=[],v$U=0,v$x=0,v$D=0,v$p=String.fromCharCode,v$Q=this._u8d_;0<v$n;)if((v$x=v$Q[this._pos_])<128)v$a.push(v$p(v$x)),this._pos_++,v$n--;else for(v$U=v$x-128,this._pos_++,v$n-=v$U;0<v$U;)v$x=v$Q[this._pos_++],v$D=v$Q[this._pos_++],v$a.push(v$p(v$D<<8|v$x)),v$U--;return v$a.join("")},v$n.clear=function(){this._pos_=0,this.length=0},v$n.__getBuffer=function(){return this._d_.buffer},v$n.writeUTFBytes=function(v$n){for(var v$a=0,v$U=(v$n+="").length;v$a<v$U;v$a++){var v$x=v$n.charCodeAt(v$a);v$x<=127?this.writeByte(v$x):v$x<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|v$x>>6,128|63&v$x],this._pos_),this._pos_+=2):v$x<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|v$x>>12,128|v$x>>6&63,128|63&v$x],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|v$x>>18,128|v$x>>12&63,128|v$x>>6&63,128|63&v$x],this._pos_),this._pos_+=4)}},v$n.writeUTFString=function(v$n){var v$a=this.pos;this.writeUint16(1),this.writeUTFBytes(v$n);var v$U=this.pos-v$a-2;if(65536<=v$U)throw"writeUTFString byte len more than 65536";this._d_.setUint16(v$a,v$U,this._xd_)},v$n.readUTFString=function(){return this.readUTFBytes(this.getUint16())},v$n.getUTFString=function(){return this.readUTFString()},v$n.readUTFBytes=function(v$n){if(void 0===v$n&&(v$n=-1),0==v$n)return"";var v$a=this.bytesAvailable;if(v$a<v$n)throw"readUTFBytes error - Out of bounds";return v$n=0<v$n?v$n:v$a,this.rUTF(v$n)},v$n.getUTFBytes=function(v$n){return void 0===v$n&&(v$n=-1),this.readUTFBytes(v$n)},v$n.writeByte=function(v$n){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,v$n),this._pos_+=1},v$n.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},v$n.getByte=function(){return this.readByte()},v$n.ensureWrite=function(v$n){this._length<v$n&&(this._length=v$n),this._allocated_<v$n&&(this.length=v$n)},v$n.writeArrayBuffer=function(v$n,v$a,v$U){if(void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),v$a<0||v$U<0)throw"writeArrayBuffer error - Out of bounds";0==v$U&&(v$U=v$n.byteLength-v$a),this.ensureWrite(this._pos_+v$U);var v$x=new Uint8Array(v$n);this._u8d_.set(v$x.subarray(v$a,v$a+v$U),this._pos_),this._pos_+=v$U},v$E(0,v$n,"buffer",function(){var v$n=this._d_.buffer;return v$n.byteLength==this.length?v$n:v$n.slice(0,this.length)}),v$E(0,v$n,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(v$n){this._xd_="littleEndian"==v$n}),v$E(0,v$n,"length",function(){return this._length},function(v$n){this._allocated_<v$n?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(v$n,2*this._allocated_))):this._allocated_>v$n&&this.___resizeBuffer(this._allocated_=v$n),this._length=v$n}),v$E(0,v$n,"pos",function(){return this._pos_},function(v$n){this._pos_=v$n}),v$E(0,v$n,"bytesAvailable",function(){return this._length-this._pos_}),v$a.getSystemEndian=function(){if(!v$a._sysEndian){var v$n=new ArrayBuffer(2);new DataView(v$n).setInt16(0,256,!0),v$a._sysEndian=256===new Int16Array(v$n)[0]?"littleEndian":"bigEndian"}return v$a._sysEndian},v$a.BIG_ENDIAN="bigEndian",v$a.LITTLE_ENDIAN="littleEndian",v$a._sysEndian=null,v$a}(),v$g=function(){function v$D(){}return v$X(v$D,"laya.utils.CacheManager"),v$D.regCacheByFunction=function(v$n,v$a){var v$U;v$D.unRegCacheByFunction(v$n,v$a),v$U={tryDispose:v$n,getCacheList:v$a},v$D._cacheList.push(v$U)},v$D.unRegCacheByFunction=function(v$n,v$a){var v$U,v$x=0;for(v$U=v$D._cacheList.length,v$x=0;v$x<v$U;v$x++)if(v$D._cacheList[v$x].tryDispose==v$n&&v$D._cacheList[v$x].getCacheList==v$a)return void v$D._cacheList.splice(v$x,1)},v$D.forceDispose=function(){var v$n=0,v$a=v$D._cacheList.length;for(v$n=0;v$n<v$a;v$n++)v$D._cacheList[v$n].tryDispose(!0)},v$D.beginCheck=function(v$n){void 0===v$n&&(v$n=15e3),v$k.timer.loop(v$n,null,v$D._checkLoop)},v$D.stopCheck=function(){v$k.timer.clear(null,v$D._checkLoop)},v$D._checkLoop=function(){var v$n=v$D._cacheList;if(!(v$n.length<1)){var v$a,v$U=v$f.now(),v$x=0;for(v$a=v$x=v$n.length;0<v$x&&(v$n[v$D._index=++v$D._index%v$a].tryDispose(!1),!(v$f.now()-v$U>v$D.loopTimeLimit));)v$x--}},v$D.loopTimeLimit=2,v$D._cacheList=[],v$D._index=0,v$D}(),v$o=function(){function v$q(){}return v$X(v$q,"laya.utils.ClassUtils"),v$q.regClass=function(v$n,v$a){v$q._classMap[v$n]=v$a},v$q.getRegClass=function(v$n){return v$q._classMap[v$n]},v$q.getInstance=function(v$n){var v$a=v$q.getClass(v$n);return v$a?new v$a:(console.warn("[error] Undefined class:",v$n),null)},v$q.createByJson=function(v$n,v$a,v$U,v$x,v$D){"string"==typeof v$n&&(v$n=JSON.parse(v$n));var v$p=v$n.props;if(!v$a&&!(v$a=v$D?v$D.runWith(v$n):v$q.getInstance(v$p.runtime||v$n.type)))return null;var v$Q=v$n.child;if(v$Q)for(var v$V=0,v$y=v$Q.length;v$V<v$y;v$V++){var v$R=v$Q[v$V];if("render"!==v$R.props.name&&"render"!==v$R.props.renderType||!v$a._$set_itemRender)if("Graphic"==v$R.type)v$q.addGraphicsToSprite(v$R,v$a);else if(v$q.isDrawType(v$R.type))v$q.addGraphicToSprite(v$R,v$a,!0);else{var v$X=v$q.createByJson(v$R,null,v$U,v$x,v$D);"Script"==v$R.type?v$X.hasOwnProperty("owner")?v$X.owner=v$a:v$X.hasOwnProperty("target")&&(v$X.target=v$a):"mask"==v$R.props.renderType?v$a.mask=v$X:v$a.addChild(v$X)}else v$a.itemRender=v$R}if(v$p)for(var v$z in v$p){var v$i=v$p[v$z];"var"===v$z&&v$U?v$U[v$i]=v$a:v$i instanceof Array&&"function"==typeof v$a[v$z]?v$a[v$z].apply(v$a,v$i):v$a[v$z]=v$i}return v$x&&v$n.customProps&&v$x.runWith([v$a,v$n]),v$a.created&&v$a.created(),v$a},v$q.addGraphicsToSprite=function(v$n,v$a){var v$U;if((v$U=v$n.child)&&!(v$U.length<1)){var v$x;v$x=v$q._getGraphicsFromSprite(v$n,v$a);var v$D=0,v$p=0;v$n.props&&(v$D=v$q._getObjVar(v$n.props,"x",0),v$p=v$q._getObjVar(v$n.props,"y",0)),0!=v$D&&0!=v$p&&v$x.translate(v$D,v$p);var v$Q,v$V=0;for(v$Q=v$U.length,v$V=0;v$V<v$Q;v$V++)v$q._addGraphicToGraphics(v$U[v$V],v$x);0!=v$D&&0!=v$p&&v$x.translate(-v$D,-v$p)}},v$q.addGraphicToSprite=function(v$n,v$a,v$U){var v$x;void 0===v$U&&(v$U=!1),v$x=v$U?v$q._getGraphicsFromSprite(v$n,v$a):v$a.graphics,v$q._addGraphicToGraphics(v$n,v$x)},v$q._getGraphicsFromSprite=function(v$n,v$a){var v$U,v$x;if(!v$n||!v$n.props)return v$a.graphics;switch(v$x=v$n.props.renderType){case"hit":case"unHit":var v$D;v$a.hitArea||(v$a.hitArea=new v$d),(v$D=v$a.hitArea)[v$x]||(v$D[v$x]=new v$i),v$U=v$D[v$x]}return v$U||(v$U=v$a.graphics),v$U},v$q._getTransformData=function(v$n){var v$a;(v$n.hasOwnProperty("pivotX")||v$n.hasOwnProperty("pivotY"))&&(v$a=v$a||new v$c).translate(-v$q._getObjVar(v$n,"pivotX",0),-v$q._getObjVar(v$n,"pivotY",0));var v$U=v$q._getObjVar(v$n,"scaleX",1),v$x=v$q._getObjVar(v$n,"scaleY",1),v$D=v$q._getObjVar(v$n,"rotation",0);v$q._getObjVar(v$n,"skewX",0),v$q._getObjVar(v$n,"skewY",0);return 1==v$U&&1==v$x&&0==v$D||((v$a=v$a||new v$c).scale(v$U,v$x),v$a.rotate(.0174532922222222*v$D)),v$a},v$q._addGraphicToGraphics=function(v$n,v$a){var v$U,v$x;if((v$U=v$n.props)&&(v$x=v$q.DrawTypeDic[v$n.type])){var v$D,v$p;v$D=v$a;var v$Q=v$q._getParams(v$U,v$x[1],v$x[2],v$x[3]);((v$p=v$q._tM)||1!=v$q._alpha)&&(v$D.save(),v$p&&v$D.transform(v$p),1!=v$q._alpha&&v$D.alpha(v$q._alpha)),v$D[v$x[0]].apply(v$D,v$Q),(v$p||1!=v$q._alpha)&&v$D.restore()}},v$q._adptLineData=function(v$n){return v$n[2]=parseFloat(v$n[0])+parseFloat(v$n[2]),v$n[3]=parseFloat(v$n[1])+parseFloat(v$n[3]),v$n},v$q._adptTextureData=function(v$n){return v$n[0]=v$Vn.getRes(v$n[0]),v$n},v$q._adptLinesData=function(v$n){return v$n[2]=v$q._getPointListByStr(v$n[2]),v$n},v$q.isDrawType=function(v$n){return"Image"!=v$n&&v$q.DrawTypeDic.hasOwnProperty(v$n)},v$q._getParams=function(v$n,v$a,v$U,v$x){var v$D;void 0===v$U&&(v$U=0),(v$D=v$q._temParam).length=v$a.length;var v$p,v$Q,v$V=0;for(v$p=v$a.length,v$V=0;v$V<v$p;v$V++)v$D[v$V]=v$q._getObjVar(v$n,v$a[v$V][0],v$a[v$V][1]);return v$q._alpha=v$q._getObjVar(v$n,"alpha",1),v$Q=v$q._getTransformData(v$n),v$q._tM=v$Q?(v$U||(v$U=0),v$Q.translate(v$D[v$U],v$D[v$U+1]),v$D[v$U]=v$D[v$U+1]=0,v$Q):null,v$x&&v$q[v$x]&&(v$D=v$q[v$x](v$D)),v$D},v$q._getPointListByStr=function(v$n){var v$a,v$U,v$x=0;for(v$U=(v$a=v$n.split(",")).length,v$x=0;v$x<v$U;v$x++)v$a[v$x]=parseFloat(v$a[v$x]);return v$a},v$q._getObjVar=function(v$n,v$a,v$U){return v$n.hasOwnProperty(v$a)?v$n[v$a]:v$U},v$q._temParam=[],v$q._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},v$q.getClass=function(v$n){var v$a=v$q._classMap[v$n]||v$n;return"string"==typeof v$a?v$k.__classmap[v$a]:v$a},v$q._tM=null,v$q._alpha=NaN,v$y(v$q,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),v$q}(),v$B=function(){function v$p(v$n){if(this._color=[],"string"==typeof v$n){null===(this.strColor=v$n)&&(v$n="#000000"),"#"==v$n.charAt(0)&&(v$n=v$n.substr(1));var v$a=v$n.length;if(3==v$a||4==v$a){for(var v$U="",v$x=0;v$x<v$a;v$x++)v$U+=v$n[v$x]+v$n[v$x];v$n=v$U}var v$D=this.numColor=parseInt(v$n,16);if(8==v$n.length)return void(this._color=[parseInt(v$n.substr(0,2),16)/255,((16711680&v$D)>>16)/255,((65280&v$D)>>8)/255,(255&v$D)/255])}else v$D=this.numColor=v$n,this.strColor=v$t.toHexColor(v$D);this._color=[((16711680&v$D)>>16)/255,((65280&v$D)>>8)/255,(255&v$D)/255,1],this._color.__id=++v$p._COLODID}return v$X(v$p,"laya.utils.Color"),v$p._initDefault=function(){for(var v$n in v$p._DEFAULT={},v$p._COLOR_MAP)v$p._SAVE[v$n]=v$p._DEFAULT[v$n]=new v$p(v$p._COLOR_MAP[v$n]);return v$p._DEFAULT},v$p._initSaveMap=function(){for(var v$n in v$p._SAVE_SIZE=0,v$p._SAVE={},v$p._DEFAULT)v$p._SAVE[v$n]=v$p._DEFAULT[v$n]},v$p.create=function(v$n){var v$a=v$p._SAVE[v$n+""];return null!=v$a?v$a:(v$p._SAVE_SIZE<1e3||v$p._initSaveMap(),v$p._SAVE[v$n+""]=new v$p(v$n))},v$p._SAVE={},v$p._SAVE_SIZE=0,v$p._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},v$p._DEFAULT=v$p._initDefault(),v$p._COLODID=1,v$p}(),v$O=(function(){function v$n(){this._values=[],this._keys=[]}v$X(v$n,"laya.utils.Dictionary");var v$a=v$n.prototype;v$a.set=function(v$n,v$a){var v$U=this.indexOf(v$n);0<=v$U?this._values[v$U]=v$a:(this._keys.push(v$n),this._values.push(v$a))},v$a.indexOf=function(v$n){var v$a=this._keys.indexOf(v$n);return 0<=v$a?v$a:(v$n="string"==typeof v$n?Number(v$n):"number"==typeof v$n?v$n.toString():v$n,this._keys.indexOf(v$n))},v$a.get=function(v$n){var v$a=this.indexOf(v$n);return v$a<0?null:this._values[v$a]},v$a.remove=function(v$n){var v$a=this.indexOf(v$n);return 0<=v$a&&(this._keys.splice(v$a,1),this._values.splice(v$a,1),!0)},v$a.clear=function(){this._values.length=0,this._keys.length=0},v$E(0,v$a,"values",function(){return this._values}),v$E(0,v$a,"keys",function(){return this._keys})}(),function(){function v$n(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}v$X(v$n,"laya.utils.Dragging");var v$a=v$n.prototype;return v$a.start=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){void 0===v$V&&(v$V=.92),this.clearTimer(),this.target=v$n,this.area=v$a,this.hasInertia=v$U,this.elasticDistance=v$a?v$x:0,this.elasticBackTime=v$D,this.data=v$p,this._disableMouseEvent=v$Q,this.ratio=v$V,1!=v$n.globalScaleX||1!=v$n.globalScaleY?this._parent=v$n.parent:this._parent=v$k.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,v$k.stage.on("mouseup",this,this.onStageMouseUp),v$k.stage.on("mouseout",this,this.onStageMouseUp),v$k.timer.frameLoop(1,this,this.loop)},v$a.clearTimer=function(){v$k.timer.clear(this,this.loop),v$k.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},v$a.stop=function(){this._dragging&&(v$m.instance.disableMouseEvent=!1,v$k.stage.off("mouseup",this,this.onStageMouseUp),v$k.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},v$a.loop=function(){var v$n=this._parent.getMousePoint(),v$a=v$n.x,v$U=v$n.y,v$x=v$a-this._lastX,v$D=v$U-this._lastY;if(this._clickOnly){if(!(1<Math.abs(v$x*v$k.stage._canvasTransform.getScaleX())||1<Math.abs(v$D*v$k.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),v$m.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(v$x,v$D);0==v$x&&0==v$D||(this._lastX=v$a,this._lastY=v$U,this.target.x+=v$x*this._elasticRateX,this.target.y+=v$D*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},v$a.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var v$n=this.area.x-this.target.x;else v$n=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-v$n/this.elasticDistance),this.target.y<this.area.y)var v$a=this.area.y-this.target.y;else v$a=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-v$a/this.elasticDistance)}},v$a.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},v$a.onStageMouseUp=function(v$n){if(v$m.instance.disableMouseEvent=!1,v$k.stage.off("mouseup",this,this.onStageMouseUp),v$k.stage.off("mouseout",this,this.onStageMouseUp),v$k.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var v$a=this._offsets.length,v$U=Math.min(v$a,6),v$x=this._offsets.length-v$U,v$D=v$a-1;v$x<v$D;v$D--)this._offsetY+=this._offsets[v$D--],this._offsetX+=this._offsets[v$D];this._offsetX=this._offsetX/v$U*2,this._offsetY=this._offsetY/v$U*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),v$k.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},v$a.checkElastic=function(){var v$n=NaN,v$a=NaN;if(this.target.x<this.area.x?v$n=this.area.x:this.target.x>this.area.x+this.area.width&&(v$n=this.area.x+this.area.width),this.target.y<this.area.y?v$a=this.area.y:this.target.y>this.area.y+this.area.height&&(v$a=this.area.y+this.area.height),isNaN(v$n)&&isNaN(v$a))this.clear();else{var v$U={};isNaN(v$n)||(v$U.x=v$n),isNaN(v$a)||(v$U.y=v$a),this._tween=v$C.to(this.target,v$U,this.elasticBackTime,v$L.sineOut,v$A.create(this,this.clear),0,!1,!1)}},v$a.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(v$k.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},v$a.clear=function(){if(this.target){this.clearTimer();var v$n=this.target;this.target=null,this._parent=null,v$n.event("dragend",this.data)}},v$n}()),v$L=function(){function v$V(){}return v$X(v$V,"laya.utils.Ease"),v$V.linearNone=function(v$n,v$a,v$U,v$x){return v$U*v$n/v$x+v$a},v$V.linearIn=function(v$n,v$a,v$U,v$x){return v$U*v$n/v$x+v$a},v$V.linearInOut=function(v$n,v$a,v$U,v$x){return v$U*v$n/v$x+v$a},v$V.linearOut=function(v$n,v$a,v$U,v$x){return v$U*v$n/v$x+v$a},v$V.bounceIn=function(v$n,v$a,v$U,v$x){return v$U-v$V.bounceOut(v$x-v$n,0,v$U,v$x)+v$a},v$V.bounceInOut=function(v$n,v$a,v$U,v$x){return v$n<.5*v$x?.5*v$V.bounceIn(2*v$n,0,v$U,v$x)+v$a:.5*v$V.bounceOut(2*v$n-v$x,0,v$U,v$x)+.5*v$U+v$a},v$V.bounceOut=function(v$n,v$a,v$U,v$x){return(v$n/=v$x)<1/2.75?v$U*(7.5625*v$n*v$n)+v$a:v$n<2/2.75?v$U*(7.5625*(v$n-=1.5/2.75)*v$n+.75)+v$a:v$n<2.5/2.75?v$U*(7.5625*(v$n-=2.25/2.75)*v$n+.9375)+v$a:v$U*(7.5625*(v$n-=2.625/2.75)*v$n+.984375)+v$a},v$V.backIn=function(v$n,v$a,v$U,v$x,v$D){return void 0===v$D&&(v$D=1.70158),v$U*(v$n/=v$x)*v$n*((v$D+1)*v$n-v$D)+v$a},v$V.backInOut=function(v$n,v$a,v$U,v$x,v$D){return void 0===v$D&&(v$D=1.70158),(v$n/=.5*v$x)<1?.5*v$U*(v$n*v$n*((1+(v$D*=1.525))*v$n-v$D))+v$a:v$U/2*((v$n-=2)*v$n*((1+(v$D*=1.525))*v$n+v$D)+2)+v$a},v$V.backOut=function(v$n,v$a,v$U,v$x,v$D){return void 0===v$D&&(v$D=1.70158),v$U*((v$n=v$n/v$x-1)*v$n*((v$D+1)*v$n+v$D)+1)+v$a},v$V.elasticIn=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q;return void 0===v$D&&(v$D=0),void 0===v$p&&(v$p=0),0==v$n?v$a:1==(v$n/=v$x)?v$a+v$U:(v$p||(v$p=.3*v$x),v$Q=!v$D||0<v$U&&v$D<v$U||v$U<0&&v$D<-v$U?(v$D=v$U,v$p/4):v$p/v$V.PI2*Math.asin(v$U/v$D),-v$D*Math.pow(2,10*(v$n-=1))*Math.sin((v$n*v$x-v$Q)*v$V.PI2/v$p)+v$a)},v$V.elasticInOut=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q;return void 0===v$D&&(v$D=0),void 0===v$p&&(v$p=0),0==v$n?v$a:2==(v$n/=.5*v$x)?v$a+v$U:(v$p||(v$p=v$x*(.3*1.5)),v$Q=!v$D||0<v$U&&v$D<v$U||v$U<0&&v$D<-v$U?(v$D=v$U,v$p/4):v$p/v$V.PI2*Math.asin(v$U/v$D),v$n<1?v$D*Math.pow(2,10*(v$n-=1))*Math.sin((v$n*v$x-v$Q)*v$V.PI2/v$p)*-.5+v$a:v$D*Math.pow(2,-10*(v$n-=1))*Math.sin((v$n*v$x-v$Q)*v$V.PI2/v$p)*.5+v$U+v$a)},v$V.elasticOut=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q;return void 0===v$D&&(v$D=0),void 0===v$p&&(v$p=0),0==v$n?v$a:1==(v$n/=v$x)?v$a+v$U:(v$p||(v$p=.3*v$x),v$Q=!v$D||0<v$U&&v$D<v$U||v$U<0&&v$D<-v$U?(v$D=v$U,v$p/4):v$p/v$V.PI2*Math.asin(v$U/v$D),v$D*Math.pow(2,-10*v$n)*Math.sin((v$n*v$x-v$Q)*v$V.PI2/v$p)+v$U+v$a)},v$V.strongIn=function(v$n,v$a,v$U,v$x){return v$U*(v$n/=v$x)*v$n*v$n*v$n*v$n+v$a},v$V.strongInOut=function(v$n,v$a,v$U,v$x){return(v$n/=.5*v$x)<1?.5*v$U*v$n*v$n*v$n*v$n*v$n+v$a:.5*v$U*((v$n-=2)*v$n*v$n*v$n*v$n+2)+v$a},v$V.strongOut=function(v$n,v$a,v$U,v$x){return v$U*((v$n=v$n/v$x-1)*v$n*v$n*v$n*v$n+1)+v$a},v$V.sineInOut=function(v$n,v$a,v$U,v$x){return.5*-v$U*(Math.cos(Math.PI*v$n/v$x)-1)+v$a},v$V.sineIn=function(v$n,v$a,v$U,v$x){return-v$U*Math.cos(v$n/v$x*v$V.HALF_PI)+v$U+v$a},v$V.sineOut=function(v$n,v$a,v$U,v$x){return v$U*Math.sin(v$n/v$x*v$V.HALF_PI)+v$a},v$V.quintIn=function(v$n,v$a,v$U,v$x){return v$U*(v$n/=v$x)*v$n*v$n*v$n*v$n+v$a},v$V.quintInOut=function(v$n,v$a,v$U,v$x){return(v$n/=.5*v$x)<1?.5*v$U*v$n*v$n*v$n*v$n*v$n+v$a:.5*v$U*((v$n-=2)*v$n*v$n*v$n*v$n+2)+v$a},v$V.quintOut=function(v$n,v$a,v$U,v$x){return v$U*((v$n=v$n/v$x-1)*v$n*v$n*v$n*v$n+1)+v$a},v$V.quartIn=function(v$n,v$a,v$U,v$x){return v$U*(v$n/=v$x)*v$n*v$n*v$n+v$a},v$V.quartInOut=function(v$n,v$a,v$U,v$x){return(v$n/=.5*v$x)<1?.5*v$U*v$n*v$n*v$n*v$n+v$a:.5*-v$U*((v$n-=2)*v$n*v$n*v$n-2)+v$a},v$V.quartOut=function(v$n,v$a,v$U,v$x){return-v$U*((v$n=v$n/v$x-1)*v$n*v$n*v$n-1)+v$a},v$V.cubicIn=function(v$n,v$a,v$U,v$x){return v$U*(v$n/=v$x)*v$n*v$n+v$a},v$V.cubicInOut=function(v$n,v$a,v$U,v$x){return(v$n/=.5*v$x)<1?.5*v$U*v$n*v$n*v$n+v$a:.5*v$U*((v$n-=2)*v$n*v$n+2)+v$a},v$V.cubicOut=function(v$n,v$a,v$U,v$x){return v$U*((v$n=v$n/v$x-1)*v$n*v$n+1)+v$a},v$V.quadIn=function(v$n,v$a,v$U,v$x){return v$U*(v$n/=v$x)*v$n+v$a},v$V.quadInOut=function(v$n,v$a,v$U,v$x){return(v$n/=.5*v$x)<1?.5*v$U*v$n*v$n+v$a:.5*-v$U*(--v$n*(v$n-2)-1)+v$a},v$V.quadOut=function(v$n,v$a,v$U,v$x){return-v$U*(v$n/=v$x)*(v$n-2)+v$a},v$V.expoIn=function(v$n,v$a,v$U,v$x){return 0==v$n?v$a:v$U*Math.pow(2,10*(v$n/v$x-1))+v$a-.001*v$U},v$V.expoInOut=function(v$n,v$a,v$U,v$x){return 0==v$n?v$a:v$n==v$x?v$a+v$U:(v$n/=.5*v$x)<1?.5*v$U*Math.pow(2,10*(v$n-1))+v$a:.5*v$U*(2-Math.pow(2,-10*--v$n))+v$a},v$V.expoOut=function(v$n,v$a,v$U,v$x){return v$n==v$x?v$a+v$U:v$U*(1-Math.pow(2,-10*v$n/v$x))+v$a},v$V.circIn=function(v$n,v$a,v$U,v$x){return-v$U*(Math.sqrt(1-(v$n/=v$x)*v$n)-1)+v$a},v$V.circInOut=function(v$n,v$a,v$U,v$x){return(v$n/=.5*v$x)<1?.5*-v$U*(Math.sqrt(1-v$n*v$n)-1)+v$a:.5*v$U*(Math.sqrt(1-(v$n-=2)*v$n)+1)+v$a},v$V.circOut=function(v$n,v$a,v$U,v$x){return v$U*Math.sqrt(1-(v$n=v$n/v$x-1)*v$n)+v$a},v$V.HALF_PI=.5*Math.PI,v$V.PI2=2*Math.PI,v$V}(),v$d=function(){function v$z(){this._hit=null,this._unHit=null}v$X(v$z,"laya.utils.HitArea");var v$n=v$z.prototype;return v$n.isHit=function(v$n,v$a){return!!v$z.isHitGraphic(v$n,v$a,this.hit)&&!v$z.isHitGraphic(v$n,v$a,this.unHit)},v$n.contains=function(v$n,v$a){return this.isHit(v$n,v$a)},v$E(0,v$n,"hit",function(){return this._hit||(this._hit=new v$i),this._hit},function(v$n){this._hit=v$n}),v$E(0,v$n,"unHit",function(){return this._unHit||(this._unHit=new v$i),this._unHit},function(v$n){this._unHit=v$n}),v$z.isHitGraphic=function(v$n,v$a,v$U){if(!v$U)return!1;var v$x;if(!(v$x=v$U.cmds)&&v$U._one&&((v$x=v$z._cmds).length=1,v$x[0]=v$U._one),!v$x)return!1;var v$D,v$p,v$Q=0;for(v$D=v$x.length,v$Q=0;v$Q<v$D;v$Q++)if(v$p=v$x[v$Q]){var v$V=v$I._context;switch(v$p.callee){case v$V._translate:case 6:v$n-=v$p[0],v$a-=v$p[1]}if(v$z.isHitCmd(v$n,v$a,v$p))return!0}return!1},v$z.isHitCmd=function(v$n,v$a,v$U){if(!v$U)return!1;var v$x=v$I._context,v$D=!1;switch(v$U.callee){case v$x._drawRect:case 13:v$z._rec.setTo(v$U[0],v$U[1],v$U[2],v$U[3]),v$D=v$z._rec.contains(v$n,v$a);break;case v$x._drawCircle:case v$x._fillCircle:case 14:v$D=(v$n-=v$U[0])*v$n+(v$a-=v$U[1])*v$a<v$U[2]*v$U[2];break;case v$x._drawPoly:case 18:v$n-=v$U[0],v$a-=v$U[1],v$D=v$z.ptInPolygon(v$n,v$a,v$U[2])}return v$D},v$z.ptInPolygon=function(v$n,v$a,v$U){var v$x;(v$x=v$z._ptPoint).setTo(v$n,v$a);var v$D,v$p=0,v$Q=NaN,v$V=NaN,v$y=NaN,v$R=NaN;v$D=v$U.length;for(var v$X=0;v$X<v$D;v$X+=2){if(v$Q=v$U[v$X],v$V=v$U[v$X+1],v$y=v$U[(v$X+2)%v$D],v$V!=(v$R=v$U[(v$X+3)%v$D]))if(!(v$x.y<Math.min(v$V,v$R)))if(!(v$x.y>=Math.max(v$V,v$R)))(v$x.y-v$V)*(v$y-v$Q)/(v$R-v$V)+v$Q>v$x.x&&v$p++}return v$p%2==1},v$z._cmds=[],v$y(v$z,["_rec",function(){return this._rec=new v$_},"_ptPoint",function(){return this._ptPoint=new v$N}]),v$z}(),v$S=(function(){function v$D(v$n,v$a,v$U,v$x){this.char=v$n,this.charNum=v$n.charCodeAt(0),this._x=this._y=0,this.width=v$a,this.height=v$U,this.style=v$x,this.isWord=!v$D._isWordRegExp.test(v$n)}v$X(v$D,"laya.utils.HTMLChar");var v$n=v$D.prototype;v$k.imps(v$n,{"laya.display.ILayout":!0}),v$n.setSprite=function(v$n){this._sprite=v$n},v$n.getSprite=function(){return this._sprite},v$n._isChar=function(){return!0},v$n._getCSSStyle=function(){return this.style},v$E(0,v$n,"width",function(){return this._w},function(v$n){this._w=v$n}),v$E(0,v$n,"x",function(){return this._x},function(v$n){this._sprite&&(this._sprite.x=v$n),this._x=v$n}),v$E(0,v$n,"y",function(){return this._y},function(v$n){this._sprite&&(this._sprite.y=v$n),this._y=v$n}),v$E(0,v$n,"height",function(){return this._h},function(v$n){this._h=v$n}),v$D._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function v$a(){}v$X(v$a,"laya.utils.Log"),v$a.enable=function(){v$a._logdiv||(v$a._logdiv=v$f.window.document.createElement("div"),v$f.window.document.body.appendChild(v$a._logdiv),v$a._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},v$a.toggle=function(){var v$n=v$a._logdiv.style;"1px"==v$n.width?v$n.width=v$n.height="50%":v$n.width=v$n.height="1px"},v$a.print=function(v$n){v$a._logdiv&&(v$a.maxCount<=v$a._count&&v$a.clear(),v$a._count++,v$a._logdiv.innerText+=v$n+"\n",v$a._logdiv.scrollTop=v$a._logdiv.scrollHeight)},v$a.clear=function(){v$a._logdiv.innerText="",v$a._count=0},v$a._logdiv=null,v$a._count=0,v$a.maxCount=20}(),function(){function v$a(){}v$X(v$a,"laya.utils.Mouse"),v$E(1,v$a,"cursor",function(){return v$a._style.cursor},function(v$n){v$a._style.cursor=v$n}),v$a.hide=function(){"none"!=v$a.cursor&&(v$a._preCursor=v$a.cursor,v$a.cursor="none")},v$a.show=function(){"none"==v$a.cursor&&(v$a.cursor=v$a._preCursor?v$a._preCursor:"auto")},v$a._preCursor=null,v$y(v$a,["_style",function(){return this._style=v$f.document.body.style}])}(),function(){function v$p(){}return v$X(v$p,"laya.utils.Pool"),v$p.getPoolBySign=function(v$n){return v$p._poolDic[v$n]||(v$p._poolDic[v$n]=[])},v$p.clearBySign=function(v$n){v$p._poolDic[v$n]&&(v$p._poolDic[v$n].length=0)},v$p.recover=function(v$n,v$a){v$a.__InPool||(v$a.__InPool=!0,v$p.getPoolBySign(v$n).push(v$a))},v$p.getItemByClass=function(v$n,v$a){var v$U=v$p.getPoolBySign(v$n),v$x=v$U.length?v$U.pop():new v$a;return v$x.__InPool=!1,v$x},v$p.getItemByCreateFun=function(v$n,v$a,v$U){var v$x=v$p.getPoolBySign(v$n),v$D=v$x.length?v$x.pop():v$a.call(v$U);return v$D.__InPool=!1,v$D},v$p.getItem=function(v$n){var v$a=v$p.getPoolBySign(v$n),v$U=v$a.length?v$a.pop():null;return v$U&&(v$U.__InPool=!1),v$U},v$p._poolDic={},v$p.InPoolSign="__InPool",v$p}()),v$w=function(){function v$y(){}return v$X(v$y,"laya.utils.Stat"),v$E(1,v$y,"onclick",null,function(v$n){v$y._sp&&v$y._sp.on("click",v$y._sp,v$n),v$y._canvas&&(v$y._canvas.source.onclick=v$n,v$y._canvas.source.style.pointerEvents="")}),v$y.show=function(v$n,v$a,v$U){if(void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),!v$I.isConchApp||v$I.isConchWebGL){if(v$I.isConchWebGL||v$f.onMiniGame||v$f.onLimixiu||(v$y._useCanvas=!0),v$y._show=!0,v$y._fpsData.length=60,v$y._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},v$y._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},v$y._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},v$y._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},v$I.isWebGL)if(v$y._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},v$I.is3DMode){if(v$y._view[0].title="FPS(3D)",v$y._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},v$y._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},v$y._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==v$U){var v$x=8;v$y._view[v$x++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},v$y._view[v$x++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},v$y._view[v$x++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},v$y._view[v$x++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},v$y._view[v$x++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},v$y._view[v$x++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},v$y._view[v$x++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},v$y._view[v$x++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},v$y._view[v$x++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==v$U){v$x=8;v$y._view[v$x++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},v$y._view[v$x++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},v$y._view[v$x++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},v$y._view[v$x++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},v$y._view[v$x++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},v$y._view[v$x++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},v$y._view[v$x++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else v$y._view[0].title="FPS(WebGL)",v$y._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else v$y._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};v$y._useCanvas?v$y.createUIPre(v$n,v$a):v$y.createUI(v$n,v$a),v$y.enable()}else v$f.window.conch.showFPS&&v$f.window.conch.showFPS(v$n,v$a)},v$y.createUIPre=function(v$n,v$a){var v$U=v$f.pixelRatio;v$y._width=170*v$U,v$y._vx=75*v$U,v$y._height=v$U*(12*v$y._view.length+3*v$U)+4,v$y._fontSize=12*v$U;for(var v$x=0;v$x<v$y._view.length;v$x++)v$y._view[v$x].x=4,v$y._view[v$x].y=v$x*v$y._fontSize+2*v$U;v$y._canvas||((v$y._canvas=new v$Tn("2D")).size(v$y._width,v$y._height),(v$y._ctx=v$y._canvas.getContext("2d")).textBaseline="top",v$y._ctx.font=v$y._fontSize+"px Sans-serif",v$y._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+v$n+"px;top:"+v$a+"px;width:"+v$y._width/v$U+"px;height:"+v$y._height/v$U+"px;"),v$y._first=!0,v$y.loop(),v$y._first=!1,v$f.container.appendChild(v$y._canvas.source)},v$y.createUI=function(v$n,v$a){var v$U=v$y._sp,v$x=v$f.pixelRatio;v$U||(v$U=new v$zn,(v$y._leftText=new v$bn).pos(5,5),v$y._leftText.color="#ffffff",v$U.addChild(v$y._leftText),(v$y._txt=new v$bn).pos(80*v$x,5),v$y._txt.color="#ffffff",v$U.addChild(v$y._txt),v$y._sp=v$U),v$U.pos(v$n,v$a);for(var v$D="",v$p=0;v$p<v$y._view.length;v$p++){v$D+=v$y._view[v$p].title+"\n"}v$y._leftText.text=v$D;var v$Q=170*v$x,v$V=v$x*(12*v$y._view.length+3*v$x)+4;v$y._txt.fontSize=v$y._fontSize*v$x,v$y._leftText.fontSize=v$y._fontSize*v$x,v$U.size(v$Q,v$V),v$U.graphics.clear(),v$U.graphics.setAlpha(.5),v$U.graphics.drawRect(0,0,v$Q,v$V,"#999999"),v$U.graphics.setAlpha(1),v$y.loop()},v$y.enable=function(){v$k.timer.frameLoop(1,v$y,v$y.loop)},v$y.hide=function(){v$y._show=!1,v$k.timer.clear(v$y,v$y.loop),v$y._canvas&&v$f.removeElement(v$y._canvas.source)},v$y.clear=function(){v$y.trianglesFaces=v$y.drawCall=v$y.shaderCall=v$y.spriteCount=v$y.spriteRenderUseCacheCount=v$y.treeNodeCollision=v$y.treeSpriteCollision=v$y.canvasNormal=v$y.canvasBitmap=v$y.canvasReCache=0},v$y.loop=function(){v$y._count++;var v$n=v$f.now();if(!(v$n-v$y._timer<1e3)){var v$a=v$y._count;if(v$y.FPS=Math.round(1e3*v$a/(v$n-v$y._timer)),v$y._show){v$y.trianglesFaces=Math.round(v$y.trianglesFaces/v$a),v$y.spriteCount=v$y._useCanvas?(v$y.drawCall=Math.round(v$y.drawCall/v$a)-2,v$y.shaderCall=Math.round(v$y.shaderCall/v$a),Math.round(v$y.spriteCount/v$a)-1):(v$y.drawCall=Math.round(v$y.drawCall/v$a)-2,v$y.shaderCall=Math.round(v$y.shaderCall/v$a)-4,Math.round(v$y.spriteCount/v$a)-4),v$y.spriteRenderUseCacheCount=Math.round(v$y.spriteRenderUseCacheCount/v$a),v$y.canvasNormal=Math.round(v$y.canvasNormal/v$a),v$y.canvasBitmap=Math.round(v$y.canvasBitmap/v$a),v$y.canvasReCache=Math.ceil(v$y.canvasReCache/v$a),v$y.treeNodeCollision=Math.round(v$y.treeNodeCollision/v$a),v$y.treeSpriteCollision=Math.round(v$y.treeSpriteCollision/v$a);var v$U=0<v$y.FPS?Math.floor(1e3/v$y.FPS).toString():" ";v$y._fpsStr=v$y.FPS+(v$y.renderSlow?" slow":"")+" "+v$U,v$y._spriteStr=v$y.spriteCount+(v$y.spriteRenderUseCacheCount?"/"+v$y.spriteRenderUseCacheCount:""),v$y._canvasStr=v$y.canvasReCache+"/"+v$y.canvasNormal+"/"+v$y.canvasBitmap,v$y.currentMemorySize=v$h.systemResourceManager.memorySize,v$y._useCanvas?v$y.renderInfoPre():v$y.renderInfo(),v$y.clear()}v$y._count=0,v$y._timer=v$n}},v$y.renderInfoPre=function(){if(v$y._canvas){var v$n=v$y._ctx;v$n.clearRect(v$y._first?0:v$y._vx,0,v$y._width,v$y._height);for(var v$a=v$I.WebGL.mainContext,v$U=0;v$U<v$y._view.length;v$U++){var v$x=v$y._view[v$U];v$y._first&&(v$n.fillStyle="white",v$n.fillText(v$x.title,v$x.x,v$x.y,null,null,null)),v$n.fillStyle=v$x.color;var v$D=-1;if((v$x=v$y._view[v$U]).varying){if(v$a)switch(v$x.varying){case 1:v$D=v$a.getParameter(v$a[v$x.value]);break;case 2:v$D=v$a.getExtension(v$x.value)}}else v$D=v$y[v$x.value];"M"==v$x.units&&(v$D=Math.floor(v$D/1048576*100)/100+" M"),"K"==v$x.units&&(v$D=Math.floor(v$D/1024*100)/100+" K"),"string"==v$x.units&&(v$D=v$D.match(/\d+\.?\d/i)),v$n.fillText(v$D+"",v$x.x+v$y._vx,v$x.y,null,null,null)}}},v$y.renderInfo=function(){for(var v$n="",v$a=v$I.WebGL.mainContext,v$U=0;v$U<v$y._view.length;v$U++){var v$x=v$y._view[v$U],v$D=-1;if(v$x.varying){if(v$a)switch(v$x.varying){case 1:v$D=v$a.getParameter(v$a[v$x.value]);break;case 2:v$D=v$a.getExtension(v$x.value)}}else v$D=v$y[v$x.value];"M"==v$x.units&&(v$D=Math.floor(v$D/1048576*100)/100+" M"),"K"==v$x.units&&(v$D=Math.floor(v$D/1024*100)/100+" K"),"string"==v$x.units&&(v$D=v$D.match(/\d+\.?\d/i)),v$n+=v$D+"\n"}v$y._txt.text=v$n},v$y.FPS=0,v$y.loopCount=0,v$y.shaderCall=0,v$y.drawCall=0,v$y.trianglesFaces=0,v$y.spriteCount=0,v$y.spriteRenderUseCacheCount=0,v$y.treeNodeCollision=0,v$y.treeSpriteCollision=0,v$y.canvasNormal=0,v$y.canvasBitmap=0,v$y.canvasReCache=0,v$y.renderSlow=!1,v$y.currentMemorySize=0,v$y._fpsStr=null,v$y._canvasStr=null,v$y._spriteStr=null,v$y._fpsData=[],v$y._timer=0,v$y._count=0,v$y._view=[],v$y._fontSize=12,v$y._txt=null,v$y._leftText=null,v$y._sp=null,v$y._show=!1,v$y._useCanvas=!1,v$y._canvas=null,v$y._ctx=null,v$y._first=!1,v$y._vx=NaN,v$y._width=0,v$y._height=100,v$y}(),v$s=(function(){function v$n(){this._strsToID={},this._idToStrs=[],this._length=0}v$X(v$n,"laya.utils.StringKey");var v$a=v$n.prototype;v$a.add=function(v$n){var v$a=this._strsToID[v$n];return null!=v$a?v$a:(this._idToStrs[this._length]=v$n,this._strsToID[v$n]=this._length++)},v$a.getID=function(v$n){var v$a=this._strsToID[v$n];return null==v$a?-1:v$a},v$a.getName=function(v$n){var v$a=this._idToStrs[v$n];return null==v$a?void 0:v$a}}(),function(){var v$R;function v$n(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}v$X(v$n,"laya.utils.Timer");var v$a=v$n.prototype;return v$a._init=function(){v$k.timer&&v$k.timer.frameLoop(1,this,this._update)},v$a._now=function(){return Date.now()},v$a._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var v$n=this.currFrame=this.currFrame+this.scale,v$a=this._now();this._delta=(v$a-this._lastTimer)*this.scale;var v$U=this.currTimer=this.currTimer+this._delta;v$k.isDebug&&6e4<Math.abs(v$a-this._lastTimer)&&console.error("系统时间错误！"+(v$a-this._lastTimer)),this._lastTimer=v$a;var v$x=this._handlers;for(v$Q=this._count=0,v$V=v$x.length;v$Q<v$V;v$Q++)if(null!==(v$y=v$x[v$Q]).method){var v$D=v$y.userFrame?v$n:v$U;if(v$D>=v$y.exeTime)if(v$y.repeat)if(v$y.jumpFrame)for(;v$D>=v$y.exeTime;)v$y.exeTime+=v$y.delay,v$y.run(!1);else v$y.exeTime+=v$y.delay,v$y.run(!1),v$D>v$y.exeTime&&(v$y.exeTime+=Math.ceil((v$D-v$y.exeTime)/v$y.delay)*v$y.delay);else v$y.run(!0)}else this._count++;(30<this._count||v$n%200==0)&&this._clearHandlers();for(var v$p=this._laters,v$Q=0,v$V=v$p.length-1;v$Q<=v$V;v$Q++){var v$y=v$p[v$Q];this._isIgnoreRecover(v$y)||(null!==v$y.method&&(delete this._map[v$y.key],v$y.run(!1)),this._recoverHandler(v$y)),v$Q===v$V&&(v$V=v$p.length-1)}v$p.length=0}},v$a._clearHandlers=function(){for(var v$n=this._handlers,v$a=0,v$U=v$n.length;v$a<v$U;v$a++){var v$x=v$n[v$a];null!==v$x.method?this._temp.push(v$x):this._isIgnoreRecover(v$x)?this._temp.push(v$x):this._recoverHandler(v$x)}this._handlers=this._temp,this._temp=v$n,this._temp.length=0},v$a._recoverHandler=function(v$n){this._map[v$n.key]==v$n&&delete this._map[v$n.key],v$n.recover()},v$a._create=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){if(!v$U)return v$D.apply(v$x,v$p),null;if(v$Q){var v$y=this._getHandler(v$x,v$D);if(v$y)return v$y.repeat=v$a,v$y.userFrame=v$n,v$y.delay=v$U,v$y.ignoreRecover=v$V,v$y.caller=v$x,v$y.method=v$D,v$y.args=v$p,v$y.exeTime=v$U+(v$n?this.currFrame:this.currTimer+this._now()-this._lastTimer),v$y}return(v$y=v$R.create()).repeat=v$a,v$y.userFrame=v$n,v$y.delay=v$U,v$y.ignoreRecover=v$V,v$y.caller=v$x,v$y.method=v$D,v$y.args=v$p,v$y.exeTime=v$U+(v$n?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(v$y),this._handlers.push(v$y),v$y},v$a._indexHandler=function(v$n){var v$a=v$n.caller,v$U=v$n.method,v$x=v$a?v$a.$_GID||(v$a.$_GID=v$t.getGID()):0,v$D=v$U.$_TID||(v$U.$_TID=this._mid++);v$n.key=v$x+"_"+v$D,this._map[v$n.key]=v$n},v$a.once=function(v$n,v$a,v$U,v$x,v$D){void 0===v$D&&(v$D=!0),this._create(!1,!1,v$n,v$a,v$U,v$x,v$D,!1)},v$a.loop=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){void 0===v$D&&(v$D=!0),void 0===v$p&&(v$p=!1),void 0===v$Q&&(v$Q=!1);var v$V=this._create(!1,!0,v$n,v$a,v$U,v$x,v$D,v$Q);v$V&&(v$V.jumpFrame=v$p)},v$a.frameOnce=function(v$n,v$a,v$U,v$x,v$D){void 0===v$D&&(v$D=!0),this._create(!0,!1,v$n,v$a,v$U,v$x,v$D,!1)},v$a.frameLoop=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$D&&(v$D=!0),void 0===v$p&&(v$p=!1),this._create(!0,!0,v$n,v$a,v$U,v$x,v$D,v$p)},v$a.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+v$R._freeCount},v$a.clear=function(v$n,v$a){var v$U=this._getHandler(v$n,v$a);return!(!v$U||this._isIgnoreRecover(v$U))&&(delete this._map[v$U.key],v$U.key=null,v$U.clear(),!0)},v$a.clearAll=function(v$n){if(v$n)for(var v$a=0,v$U=this._handlers.length;v$a<v$U;v$a++){var v$x=this._handlers[v$a];v$x.caller===v$n&&(this._isIgnoreRecover(v$x)||(delete this._map[v$x.key],v$x.key=null,v$x.clear()))}},v$a._getHandler=function(v$n,v$a){var v$U=v$n?v$n.$_GID||(v$n.$_GID=v$t.getGID()):0,v$x=v$a.$_TID||(v$a.$_TID=this._mid++);return this._map[v$U+"_"+v$x]},v$a._isIgnoreRecover=function(v$n){if(v$n.ignoreRecover||v$n.caller&&"IgnoreRecover"==v$n.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var v$a="";try{arguments.propertyIsEnumerable.caller}catch(v$n){v$a=v$n.stack}v$k.recordError("报错：核心定时器销毁忽略  "+v$a)}return!0}return!1},v$a.hasHandler=function(v$n,v$a){return this._map[v$n.$_GID+"_"+v$a.$_TID]},v$a.callLater=function(v$n,v$a,v$U){if(null==this._getHandler(v$n,v$a)){var v$x=v$R.create();v$x.caller=v$n,v$x.method=v$a,v$x.args=v$U,this._indexHandler(v$x),this._laters.push(v$x)}},v$a.runCallLater=function(v$n,v$a){var v$U=this._getHandler(v$n,v$a);v$U&&null!=v$U.method&&(this._isIgnoreRecover(v$U)||(delete this._map[v$U.key],v$U.run(!0)))},v$a.runTimer=function(v$n,v$a){this.runCallLater(v$n,v$a)},v$E(0,v$a,"delta",function(){return this._delta}),v$n.__init$=function(){v$R=function(){function v$a(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}v$X(v$a,"");var v$n=v$a.prototype;return v$n.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},v$n.recover=function(){this.clear(),this.args=v$a._freeHandler,v$a._freeHandler=this,v$a._freeCount++},v$n.run=function(v$n){var v$a=this.caller;if(v$a&&v$a.destroyed)return this.clear();var v$U=this.method,v$x=this.args;v$n&&this.clear(),null!=v$U&&(v$x?v$U.apply(v$a,v$x):v$U.call(v$a))},v$a._freeHandler=null,v$a._freeCount=0,v$a.create=function(){var v$n=v$a._freeHandler;return v$n?(v$a._freeHandler=v$n.args,--v$a._freeCount,v$n.args=null,v$n):new v$a},v$a}()},v$n}()),v$C=function(){function v$z(){this.gid=0}v$X(v$z,"laya.utils.Tween");var v$n=v$z.prototype;return v$n.to=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){return void 0===v$p&&(v$p=0),void 0===v$Q&&(v$Q=!1),this._create(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,!0,!1,!0)},v$n.from=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){return void 0===v$p&&(v$p=0),void 0===v$Q&&(v$Q=!1),this._create(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,!1,!1,!0)},v$n._create=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){if(!v$n)throw new Error("Tween:target is null");this._target=v$n,this._duration=v$U,this._ease=v$x||v$a.ease||v$z.easeNone,this._complete=v$D||v$a.complete,this._delay=v$p,this._props=[],this._usedTimer=0,this._startTimer=v$f.now(),this._usedPool=v$y,this._delayParam=null,this.update=v$a.update;var v$X=v$n.$_GID||(v$n.$_GID=v$t.getGID());return v$z.tweenMap[v$X]?(v$Q&&v$z.clearTween(v$n),v$z.tweenMap[v$X].push(this)):v$z.tweenMap[v$X]=[this],v$R?v$p<=0?this.firstStart(v$n,v$a,v$V):(this._delayParam=[v$n,v$a,v$V],v$k.scaleTimer.once(v$p,this,this.firstStart,this._delayParam)):this._initProps(v$n,v$a,v$V),this},v$n.firstStart=function(v$n,v$a,v$U){this._delayParam=null,v$n.destroyed?this.clear():(this._initProps(v$n,v$a,v$U),this._beginLoop())},v$n._initProps=function(v$n,v$a,v$U){for(var v$x in v$a)if("number"==typeof v$n[v$x]){var v$D=v$U?v$n[v$x]:v$a[v$x],v$p=v$U?v$a[v$x]:v$n[v$x];this._props.push([v$x,v$D,v$p-v$D]),v$U||(v$n[v$x]=v$D)}},v$n._beginLoop=function(){v$k.scaleTimer.frameLoop(1,this,this._doEase)},v$n._doEase=function(){this._updateEase(v$f.now())},v$n._updateEase=function(v$n){var v$a=this._target;if(v$a){if(v$a.destroyed)return v$z.clearTween(v$a);var v$U=this._usedTimer=v$n-this._startTimer-this._delay;if(!(v$U<0)){if(v$U>=this._duration)return this.complete();for(var v$x=0<v$U?this._ease(v$U,0,1,this._duration):0,v$D=this._props,v$p=0,v$Q=v$D.length;v$p<v$Q;v$p++){var v$V=v$D[v$p];v$a[v$V[0]]=v$V[1]+v$x*v$V[2]}this.update&&this.update.run()}}},v$n.complete=function(){if(this._target){v$k.scaleTimer.runTimer(this,this.firstStart);for(var v$n=this._target,v$a=this._props,v$U=this._complete,v$x=0,v$D=v$a.length;v$x<v$D;v$x++){var v$p=v$a[v$x];v$n[v$p[0]]=v$p[1]+v$p[2]}this.update&&this.update.run(),this.clear(),v$U&&v$U.run()}},v$n.pause=function(){v$k.scaleTimer.clear(this,this._beginLoop),v$k.scaleTimer.clear(this,this._doEase),v$k.scaleTimer.clear(this,this.firstStart);var v$n;(v$n=v$f.now()-this._startTimer-this._delay)<0&&(this._usedTimer=v$n)},v$n.setStartTime=function(v$n){this._startTimer=v$n},v$n.clear=function(){this._target&&(this._remove(),this._clear())},v$n._clear=function(){this.pause(),v$k.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,v$S.recover("tween",this))},v$n.recover=function(){this._usedPool=!0,this._clear()},v$n._remove=function(){var v$n=v$z.tweenMap[this._target.$_GID];if(v$n)for(var v$a=0,v$U=v$n.length;v$a<v$U;v$a++)if(v$n[v$a]===this){v$n.splice(v$a,1);break}},v$n.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=v$f.now(),this._delayParam)v$k.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var v$n=this._props,v$a=0,v$U=v$n.length;v$a<v$U;v$a++){var v$x=v$n[v$a];this._target[v$x[0]]=v$x[1]}v$k.scaleTimer.once(this._delay,this,this._beginLoop)}},v$n.resume=function(){this._usedTimer>=this._duration||(this._startTimer=v$f.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?v$k.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},v$E(0,v$n,"progress",null,function(v$n){var v$a=v$n*this._duration;this._startTimer=v$f.now()-this._delay-v$a}),v$z.to=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){return void 0===v$p&&(v$p=0),void 0===v$Q&&(v$Q=!1),void 0===v$V&&(v$V=!0),v$S.getItemByClass("tween",v$z)._create(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,!0,v$V,!0)},v$z.from=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){return void 0===v$p&&(v$p=0),void 0===v$Q&&(v$Q=!1),void 0===v$V&&(v$V=!0),v$S.getItemByClass("tween",v$z)._create(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,!1,v$V,!0)},v$z.clearAll=function(v$n){if(v$n&&v$n.$_GID){var v$a=v$z.tweenMap[v$n.$_GID];if(v$a){for(var v$U=0,v$x=v$a.length;v$U<v$x;v$U++)v$a[v$U]._clear();v$a.length=0}}},v$z.clear=function(v$n){v$n.clear()},v$z.clearTween=function(v$n){v$z.clearAll(v$n)},v$z.easeNone=function(v$n,v$a,v$U,v$x){return v$U*v$n/v$x+v$a},v$z.tweenMap={},v$z}(),v$t=function(){function v$V(){}return v$X(v$V,"laya.utils.Utils"),v$V.toRadian=function(v$n){return v$n*v$V._pi2},v$V.toAngle=function(v$n){return v$n*v$V._pi},v$V.toHexColor=function(v$n){if(v$n<0||isNaN(v$n))return null;for(var v$a=v$n.toString(16);v$a.length<6;)v$a="0"+v$a;return"#"+v$a},v$V.getGID=function(){return v$V._gid++},v$V.concatArray=function(v$n,v$a){if(!v$a)return v$n;if(!v$n)return v$a;var v$U=0,v$x=v$a.length;for(v$U=0;v$U<v$x;v$U++)v$n.push(v$a[v$U]);return v$n},v$V.clearArray=function(v$n){return v$n&&(v$n.length=0),v$n},v$V.copyArray=function(v$n,v$a){if(v$n||(v$n=[]),!v$a)return v$n;v$n.length=v$a.length;var v$U=0,v$x=v$a.length;for(v$U=0;v$U<v$x;v$U++)v$n[v$U]=v$a[v$U];return v$n},v$V.getGlobalRecByPoints=function(v$n,v$a,v$U,v$x,v$D){var v$p,v$Q;return v$p=new v$N(v$a,v$U),v$p=v$n.localToGlobal(v$p),v$Q=new v$N(v$x,v$D),v$Q=v$n.localToGlobal(v$Q),v$_._getWrapRec([v$p.x,v$p.y,v$Q.x,v$Q.y])},v$V.getGlobalPosAndScale=function(v$n){return v$V.getGlobalRecByPoints(v$n,0,0,1,1)},v$V.bind=function(v$n,v$a){return v$n.bind(v$a)},v$V.measureText=function(v$n,v$a){return v$u.measureText(v$n,v$a)},v$V.contextMeasureText=function(v$n){var v$a=v$f.context.measureText(v$n);return v$a||(v$a={width:16,height:16}),v$a},v$V.updateOrder=function(v$n){if(!v$n||v$n.length<2)return!1;for(var v$a,v$U=1,v$x=0,v$D=v$n.length,v$p=NaN;v$U<v$D;){for(v$a=v$n[v$x=v$U],v$p=v$n[v$x]._zOrder;-1<--v$x&&v$n[v$x]._zOrder>v$p;)v$n[v$x+1]=v$n[v$x];v$n[v$x+1]=v$a,v$U++}var v$Q=v$a.parent.conchModel;if(v$Q)if(null!=v$Q.updateZOrder)v$Q.updateZOrder();else{for(v$U=0;v$U<v$D;v$U++)v$Q.removeChild(v$n[v$U].conchModel);for(v$U=0;v$U<v$D;v$U++)v$Q.addChildAt(v$n[v$U].conchModel,v$U)}return!0},v$V.transPointList=function(v$n,v$a,v$U){var v$x=0,v$D=v$n.length;for(v$x=0;v$x<v$D;v$x+=2)v$n[v$x]+=v$a,v$n[v$x+1]+=v$U},v$V.parseInt=function(v$n,v$a){void 0===v$a&&(v$a=0);var v$U=v$f.window.parseInt(v$n,v$a);return isNaN(v$U)?0:v$U},v$V.getFileExtension=function(v$n){v$V._extReg.lastIndex=v$n.lastIndexOf(".");var v$a=v$V._extReg.exec(v$n);return v$a&&1<v$a.length?v$a[1].toLowerCase():null},v$V.getTransformRelativeToWindow=function(v$n,v$a,v$U){var v$x=v$k.stage,v$D=laya.utils.Utils.getGlobalPosAndScale(v$n),v$p=v$x._canvasTransform.clone(),v$Q=v$p.tx,v$V=v$p.ty;v$p.rotate(-Math.PI/180*v$k.stage.canvasDegree),v$p.scale(v$k.stage.clientScaleX,v$k.stage.clientScaleY);var v$y=v$k.stage.canvasDegree%180!=0,v$R=NaN,v$X=NaN;v$y?(v$R=v$U+v$D.y,v$X=v$a+v$D.x,v$R*=v$p.d,v$X*=v$p.a,90==v$k.stage.canvasDegree?(v$R=v$Q-v$R,v$X+=v$V):(v$R+=v$Q,v$X=v$V-v$X)):(v$R=v$a+v$D.x,v$X=v$U+v$D.y,v$R*=v$p.a,v$X*=v$p.d,v$R+=v$Q,v$X+=v$V);var v$z=NaN,v$i=NaN;return v$i=v$y?(v$z=v$p.d*v$D.height,v$p.a*v$D.width):(v$z=v$p.a*v$D.width,v$p.d*v$D.height),{x:v$R,y:v$X,scaleX:v$z,scaleY:v$i}},v$V.fitDOMElementInArea=function(v$n,v$a,v$U,v$x,v$D,v$p){v$n._fitLayaAirInitialized||(v$n._fitLayaAirInitialized=!0,v$n.style.transformOrigin=v$n.style.webKittransformOrigin="left top",v$n.style.position="absolute");var v$Q=v$V.getTransformRelativeToWindow(v$a,v$U,v$x);v$n.style.transform=v$n.style.webkitTransform="scale("+v$Q.scaleX+","+v$Q.scaleY+") rotate("+v$k.stage.canvasDegree+"deg)",v$n.style.width=v$D+"px",v$n.style.height=v$p+"px",v$n.style.left=v$Q.x+"px",v$n.style.top=v$Q.y+"px"},v$V.isOkTextureList=function(v$n){if(!v$n)return!1;var v$a,v$U=0,v$x=v$n.length;for(v$U=0;v$U<v$x;v$U++)if(!(v$a=v$n[v$U])||!v$a.source)return!1;return!0},v$V.isOKCmdList=function(v$n){if(!v$n)return!1;var v$a,v$U,v$x=0,v$D=v$n.length,v$p=v$I._context;for(v$x=0;v$x<v$D;v$x++)switch((v$a=v$n[v$x]).callee){case v$p._drawTexture:case v$p._fillTexture:case v$p._drawTextureWithTransform:if(!(v$U=v$a[0])||!v$U.source)return!1}return!0},v$V._gid=1,v$V._pi=180/Math.PI,v$V._pi2=Math.PI/180,v$V._extReg=/\.(\w+)\??/g,v$V.parseXMLFromString=function(v$n){var v$a;if(v$n=v$n.replace(/>\s+</g,"><"),-1<(v$a=(new DOMParser).parseFromString(v$n,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(v$a.firstChild.firstChild.textContent);return v$a},v$V}(),v$r=function(){function v$n(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],v$I.isWebGL&&v$g.regCacheByFunction(v$t.bind(this.startDispose,this),v$t.bind(this.getCacheList,this))}v$X(v$n,"laya.utils.VectorGraphManager");var v$a=v$n.prototype;return v$a.getId=function(){return this._id++},v$a.addShape=function(v$n,v$a){this.shapeDic[v$n]=v$a,this.useDic[v$n]||(this.useDic[v$n]=!0)},v$a.addLine=function(v$n,v$a){this.shapeLineDic[v$n]=v$a,this.shapeLineDic[v$n]||(this.shapeLineDic[v$n]=!0)},v$a.getShape=function(v$n){this._checkKey&&null!=this.useDic[v$n]&&(this.useDic[v$n]=!0)},v$a.deleteShape=function(v$n){this.shapeDic[v$n]&&(this.shapeDic[v$n]=null,delete this.shapeDic[v$n]),this.shapeLineDic[v$n]&&(this.shapeLineDic[v$n]=null,delete this.shapeLineDic[v$n]),null!=this.useDic[v$n]&&delete this.useDic[v$n]},v$a.getCacheList=function(){var v$n,v$a=[];for(v$n in this.shapeDic)v$a.push(this.shapeDic[v$n]);for(v$n in this.shapeLineDic)v$a.push(this.shapeLineDic[v$n]);return v$a},v$a.startDispose=function(v$n){var v$a;for(v$a in this.useDic)this.useDic[v$a]=!1;this._checkKey=!0},v$a.endDispose=function(){if(this._checkKey){var v$n;for(v$n in this.useDic)this.useDic[v$n]||this.deleteShape(v$n);this._checkKey=!1}},v$n.getInstance=function(){return v$n.instance=v$n.instance||new v$n},v$n.instance=null,v$n}(),v$J=function(){function v$x(){this._obj=null,this._obj=v$x.supportWeakMap?new v$f.window.WeakMap:{},v$x.supportWeakMap||v$x._maps.push(this)}v$X(v$x,"laya.utils.WeakObject");var v$n=v$x.prototype;return v$n.set=function(v$n,v$a){if(null!=v$n)if(v$x.supportWeakMap){var v$U=v$n;"string"!=typeof v$n&&"number"!=typeof v$n||(v$U=v$x._keys[v$n])||(v$U=v$x._keys[v$n]={k:v$n}),this._obj.set(v$U,v$a)}else"string"==typeof v$n||"number"==typeof v$n?this._obj[v$n]=v$a:(v$n.$_GID||(v$n.$_GID=v$t.getGID()),this._obj[v$n.$_GID]=v$a)},v$n.get=function(v$n){if(null==v$n)return null;if(v$x.supportWeakMap){var v$a="string"==typeof v$n||"number"==typeof v$n?v$x._keys[v$n]:v$n;return v$a?this._obj.get(v$a):null}return"string"==typeof v$n||"number"==typeof v$n?this._obj[v$n]:this._obj[v$n.$_GID]},v$n.del=function(v$n){if(null!=v$n)if(v$x.supportWeakMap){var v$a="string"==typeof v$n||"number"==typeof v$n?v$x._keys[v$n]:v$n;if(!v$a)return;this._obj.delete(v$a)}else"string"==typeof v$n||"number"==typeof v$n?delete this._obj[v$n]:delete this._obj[this._obj.$_GID]},v$n.has=function(v$n){if(null==v$n)return!1;if(v$x.supportWeakMap){var v$a="string"==typeof v$n||"number"==typeof v$n?v$x._keys[v$n]:v$n;return this._obj.has(v$a)}return"string"==typeof v$n||"number"==typeof v$n?null!=this._obj[v$n]:null!=this._obj[this._obj.$_GID]},v$x.__init__=function(){(v$x.supportWeakMap=null!=v$f.window.WeakMap)||v$k.timer.loop(v$x.delInterval,null,v$x.clearCache)},v$x.clearCache=function(){for(var v$n=0,v$a=v$x._maps.length;v$n<v$a;v$n++){v$x._maps[v$n]._obj={}}},v$x.supportWeakMap=!1,v$x.delInterval=3e5,v$x._keys={},v$x._maps=[],v$y(v$x,["I",function(){return this.I=new v$x}]),v$x}(),v$e=function(){function v$n(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}v$X(v$n,"laya.utils.WordText");var v$a=v$n.prototype;return v$a.setText=function(v$n){this.changed=!0,this._text=v$n},v$a.toString=function(){return this._text},v$a.charCodeAt=function(v$n){return this._text?this._text.charCodeAt(v$n):NaN},v$a.charAt=function(v$n){return this._text?this._text.charAt(v$n):null},v$E(0,v$a,"length",function(){return this._text?this._text.length:0}),v$n}(),v$nn=function(v$n){function v$Q(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,v$Q.__super.call(this),this._childs=v$Q.ARRAY_EMPTY,this._$P=v$Q.PROP_EMPTY,this.timer=v$k.scaleTimer,this.conchModel=v$I.isConchNode?this.createConchModel():null}v$X(v$Q,"laya.display.Node",v$R);var v$a=v$Q.prototype;return v$a._setBit=function(v$n,v$a){1==v$n&&(this._getBit(v$n)!=v$a&&this._updateDisplayedInstage());v$a?this._bits|=v$n:this._bits&=~v$n},v$a._getBit=function(v$n){return 0!=(this._bits&v$n)},v$a._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},v$a._setUpNoticeType=function(v$n){var v$a=this;for(v$a._setBit(v$n,!0),v$a=v$a.parent;v$a;){if(v$a._getBit(v$n))return;v$a._setBit(v$n,!0),v$a=v$a.parent}},v$a.on=function(v$n,v$a,v$U,v$x){return"display"!==v$n&&"undisplay"!==v$n||this._getBit(1)||this._setUpNoticeType(1),this._createListener(v$n,v$a,v$U,v$x,!1)},v$a.once=function(v$n,v$a,v$U,v$x){return"display"!==v$n&&"undisplay"!==v$n||this._getBit(1)||this._setUpNoticeType(1),this._createListener(v$n,v$a,v$U,v$x,!0)},v$a.createConchModel=function(){return null},v$a.destroy=function(v$n){void 0===v$n&&(v$n=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(v$n?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},v$a.destroyChildren=function(){if(this._childs)for(var v$n=this._childs.length-1;-1<v$n;v$n--)this._childs[v$n].destroy(!0)},v$a.addChild=function(v$n){if(!v$n||this.destroyed||v$n===this)return v$n;if(v$n.zOrder&&this._set$P("hasZorder",!0),v$n._parent===this){var v$a=this.getChildIndex(v$n);v$a!==this._childs.length-1&&(this._childs.splice(v$a,1),this._childs.push(v$n),this.conchModel&&(this.conchModel.removeChild(v$n.conchModel),this.conchModel.addChildAt(v$n.conchModel,this._childs.length-1)),this._childChanged())}else v$n.parent&&v$n.parent.removeChild(v$n),this._childs===v$Q.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(v$n),this.conchModel&&this.conchModel.addChildAt(v$n.conchModel,this._childs.length-1),(v$n.parent=this)._childChanged();return v$n},v$a.addChildren=function(v$n){for(var v$a=arguments,v$U=0,v$x=v$a.length;v$U<v$x;)this.addChild(v$a[v$U++])},v$a.addChildAt=function(v$n,v$a){if(!v$n||this.destroyed||v$n===this)return v$n;if(v$n.zOrder&&this._set$P("hasZorder",!0),0<=v$a&&v$a<=this._childs.length){if(v$n._parent===this){var v$U=this.getChildIndex(v$n);this._childs.splice(v$U,1),this._childs.splice(v$a,0,v$n),this.conchModel&&(this.conchModel.removeChild(v$n.conchModel),this.conchModel.addChildAt(v$n.conchModel,v$a)),this._childChanged()}else v$n.parent&&v$n.parent.removeChild(v$n),this._childs===v$Q.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(v$a,0,v$n),this.conchModel&&this.conchModel.addChildAt(v$n.conchModel,v$a),v$n.parent=this;return v$n}throw new Error("appendChildAt:The index is out of bounds")},v$a.getChildIndex=function(v$n){return this._childs.indexOf(v$n)},v$a.getChildByName=function(v$n){var v$a=this._childs;if(v$a)for(var v$U=0,v$x=v$a.length;v$U<v$x;v$U++){var v$D=v$a[v$U];if(v$D.name===v$n)return v$D}return null},v$a._get$P=function(v$n){return this._$P[v$n]},v$a._set$P=function(v$n,v$a){return this.destroyed||(this._$P===v$Q.PROP_EMPTY&&(this._$P={}),this._$P[v$n]=v$a),v$a},v$a.getChildAt=function(v$n){return this._childs[v$n]},v$a.setChildIndex=function(v$n,v$a){var v$U=this._childs;if(v$a<0||v$a>=v$U.length)throw new Error("setChildIndex:The index is out of bounds.");var v$x=this.getChildIndex(v$n);if(v$x<0)throw new Error("setChildIndex:node is must child of this object.");return v$U.splice(v$x,1),v$U.splice(v$a,0,v$n),this.conchModel&&(this.conchModel.removeChild(v$n.conchModel),this.conchModel.addChildAt(v$n.conchModel,v$a)),this._childChanged(),v$n},v$a._childChanged=function(v$n){},v$a.removeChild=function(v$n){if(!this._childs)return v$n;var v$a=this._childs.indexOf(v$n);return this.removeChildAt(v$a)},v$a.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},v$a.removeChildByName=function(v$n){var v$a=this.getChildByName(v$n);return v$a&&this.removeChild(v$a),v$a},v$a.removeChildAt=function(v$n){var v$a=this.getChildAt(v$n);if(v$a){for(var v$U=this._childs.length-1,v$x=v$n;v$x<v$U;++v$x)this._childs[v$x]=this._childs[v$x+1];this._childs.length=v$U,this.conchModel&&this.conchModel.removeChild(v$a.conchModel),v$a.parent=null}return v$a},v$a.removeChildren=function(v$n,v$a){if(void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=2147483647),this._childs&&0<this._childs.length){var v$U=this._childs;if(0===v$n&&v$p<=v$a){var v$x=v$U;this._childs=v$Q.ARRAY_EMPTY}else v$x=v$U.splice(v$n,v$a-v$n);for(var v$D=0,v$p=v$x.length;v$D<v$p;v$D++)v$x[v$D].parent=null,this.conchModel&&this.conchModel.removeChild(v$x[v$D].conchModel)}return this},v$a.replaceChild=function(v$n,v$a){var v$U=this._childs.indexOf(v$a);return-1<v$U?(this._childs.splice(v$U,1,v$n),this.conchModel&&(this.conchModel.removeChild(v$a.conchModel),this.conchModel.addChildAt(v$n.conchModel,v$U)),v$a.parent=null,v$n.parent=this,v$n):null},v$a._updateDisplayedInstage=function(){var v$n;v$n=this;var v$a=v$k.stage;for(this._displayedInStage=!1;v$n;){if(v$n._getBit(1)){this._displayedInStage=v$n._displayedInStage;break}if(v$n==v$a||v$n._displayedInStage){this._displayedInStage=!0;break}v$n=v$n.parent}},v$a._setDisplay=function(v$n){this._displayedInStage!==v$n&&((this._displayedInStage=v$n)?this.event("display"):this.event("undisplay"))},v$a._displayChild=function(v$n,v$a){var v$U=v$n._childs;if(v$U)for(var v$x=0;v$x<v$U.length;v$x++){var v$D=v$U[v$x];v$D&&v$D._getBit(1)&&(0<v$D._childs.length?this._displayChild(v$D,v$a):v$D._setDisplay(v$a))}v$n._setDisplay(v$a)},v$a.contains=function(v$n){if(v$n===this)return!0;for(;v$n;){if(v$n.parent===this)return!0;v$n=v$n.parent}return!1},v$a.timerLoop=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$D&&(v$D=!0),void 0===v$p&&(v$p=!1),this.timer.loop(v$n,v$a,v$U,v$x,v$D,v$p)},v$a.timerOnce=function(v$n,v$a,v$U,v$x,v$D){void 0===v$D&&(v$D=!0),this.timer._create(!1,!1,v$n,v$a,v$U,v$x,v$D)},v$a.frameLoop=function(v$n,v$a,v$U,v$x,v$D){void 0===v$D&&(v$D=!0),this.timer._create(!0,!0,v$n,v$a,v$U,v$x,v$D)},v$a.frameOnce=function(v$n,v$a,v$U,v$x,v$D){void 0===v$D&&(v$D=!0),this.timer._create(!0,!1,v$n,v$a,v$U,v$x,v$D)},v$a.clearTimer=function(v$n,v$a){this.timer.clear(v$n,v$a)},v$E(0,v$a,"numChildren",function(){return this._childs.length}),v$E(0,v$a,"destroyed",function(){return this._destroyed}),v$E(0,v$a,"parent",function(){return this._parent},function(v$n){this._parent!==v$n&&(v$n?(this._parent=v$n,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),v$n.displayedInStage&&this._displayChild(this,!0)),v$n._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=v$n))}),v$E(0,v$a,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),v$Q.ARRAY_EMPTY=[],v$Q.PROP_EMPTY={},v$Q.NOTICE_DISPLAY=1,v$Q.MOUSEENABLE=2,v$Q}(),v$an=function(v$n){function v$i(v$n){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,v$i.__super.call(this),this._padding=v$i._PADDING,this._spacing=v$i._SPACING,this._aligns=v$i._ALIGNS,this._font=v$q.EMPTY,this._ower=v$n}v$X(v$i,"laya.display.css.CSSStyle",v$n);var v$a=v$i.prototype;return v$a.destroy=function(){this._ower=null,this._font=null,this._rect=null},v$a.inherit=function(v$n){this._font=v$n._font,this._spacing=v$n._spacing===v$i._SPACING?v$i._SPACING:v$n._spacing.slice(),this.lineHeight=v$n.lineHeight},v$a._widthAuto=function(){return 0!=(262144&this._type)},v$a.widthed=function(v$n){return 0!=(8&this._type)},v$a._calculation=function(v$n,v$a){if(v$a.indexOf("%")<0)return!1;var v$x=this._ower,v$D=v$x.parent,v$p=this._rect;function v$Q(v$n,v$a,v$U){return v$n*v$U[0]+v$a*v$U[1]+v$U[2]}function v$U(v$n){var v$a=v$D.width,v$U=v$x.width;v$p.width&&(v$x.width=v$Q(v$a,v$U,v$p.width)),v$p.height&&(v$x.height=v$Q(v$a,v$U,v$p.height)),v$p.left&&(v$x.x=v$Q(v$a,v$U,v$p.left)),v$p.top&&(v$x.y=v$Q(v$a,v$U,v$p.top))}null===v$p&&(v$D._getCSSStyle()._type|=524288,v$D.on("resize",this,v$U),this._rect=v$p={input:{}});var v$V=v$a.split(" ");return v$V[0]=parseFloat(v$V[0])/100,1==v$V.length?v$V[1]=v$V[2]=0:(v$V[1]=parseFloat(v$V[1])/100,v$V[2]=parseFloat(v$V[2])),v$p[v$n]=v$V,v$p.input[v$n]=v$a,v$U(),!0},v$a.heighted=function(v$n){return 0!=(8192&this._type)},v$a.size=function(v$n,v$a){var v$U=this._ower,v$x=!1;-1!==v$n&&v$n!=this._ower.width&&(this._type|=8,this._ower.width=v$n,v$x=!0),-1!==v$a&&v$a!=this._ower.height&&(this._type|=8192,this._ower.height=v$a,v$x=!0),v$x&&(v$U._layoutLater(),524288&this._type&&v$U.event("resize",this))},v$a._getAlign=function(){return this._aligns[0]},v$a._getValign=function(){return this._aligns[1]},v$a._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},v$a._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new v$q(this._font))},v$a.render=function(v$n,v$a,v$U,v$x){var v$D=v$n.width,v$p=v$n.height;v$U-=v$n.pivotX,v$x-=v$n.pivotY,this._bgground&&null!=this._bgground.color&&v$a.ctx.fillRect(v$U,v$x,v$D,v$p,this._bgground.color),this._border&&this._border.color&&v$a.drawRect(v$U,v$x,v$D,v$p,this._border.color.strColor,this._border.size)},v$a.getCSSStyle=function(){return this},v$a.cssText=function(v$n){this.attrs(v$i.parseOneCSS(v$n,";"))},v$a.attrs=function(v$n){if(v$n)for(var v$a=0,v$U=v$n.length;v$a<v$U;v$a++){var v$x=v$n[v$a];this[v$x[0]]=v$x[1]}},v$a.setTransform=function(v$n){"none"===v$n?this._tf=v$V._TF_EMPTY:this.attrs(v$i.parseOneCSS(v$n,","))},v$a.translate=function(v$n,v$a){this._tf===v$V._TF_EMPTY&&(this._tf=new v$D),this._tf.translateX=v$n,this._tf.translateY=v$a},v$a.scale=function(v$n,v$a){this._tf===v$V._TF_EMPTY&&(this._tf=new v$D),this._tf.scaleX=v$n,this._tf.scaleY=v$a},v$a._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},v$E(0,v$a,"block",v$n.prototype._$get_block,function(v$n){v$n?this._type|=1:this._type&=-2}),v$E(0,v$a,"valign",function(){return v$i._valigndef[this._aligns[1]]},function(v$n){this._aligns===v$i._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=v$i._valigndef[v$n]}),v$E(0,v$a,"height",null,function(v$n){if(this._type|=8192,"string"==typeof v$n){if(this._calculation("height",v$n))return;v$n=parseInt(v$n)}this.size(-1,v$n)}),v$E(0,v$a,"width",null,function(v$n){if(this._type|=8,"string"==typeof v$n){var v$a=v$n.indexOf("auto");if(0<=v$a&&(this._type|=262144,v$n=v$n.substr(0,v$a)),this._calculation("width",v$n))return;v$n=parseInt(v$n)}this.size(v$n,-1)}),v$E(0,v$a,"fontWeight",function(){return this._font.weight},function(v$n){this._createFont().weight=v$n}),v$E(0,v$a,"left",null,function(v$n){var v$a=this._ower;if("string"==typeof v$n){if("center"===v$n?v$n="50% -50% 0":"right"===v$n&&(v$n="100% -100% 0"),this._calculation("left",v$n))return;v$n=parseInt(v$n)}v$a.x=v$n}),v$E(0,v$a,"_translate",null,function(v$n){this.translate(v$n[0],v$n[1])}),v$E(0,v$a,"absolute",function(){return 0!=(4&this._type)}),v$E(0,v$a,"top",null,function(v$n){var v$a=this._ower;if("string"==typeof v$n){if("middle"===v$n?v$n="50% -50% 0":"bottom"===v$n&&(v$n="100% -100% 0"),this._calculation("top",v$n))return;v$n=parseInt(v$n)}v$a.y=v$n}),v$E(0,v$a,"align",function(){return v$i._aligndef[this._aligns[0]]},function(v$n){this._aligns===v$i._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=v$i._aligndef[v$n]}),v$E(0,v$a,"bold",function(){return this._font.bold},function(v$n){this._createFont().bold=v$n}),v$E(0,v$a,"padding",function(){return this._padding},function(v$n){this._padding=v$n}),v$E(0,v$a,"leading",function(){return this._spacing[1]},function(v$n){"string"==typeof v$n&&(v$n=parseInt(v$n+"")),this._spacing===v$i._SPACING&&(this._spacing=[0,0]),this._spacing[1]=v$n}),v$E(0,v$a,"lineElement",function(){return 0!=(65536&this._type)},function(v$n){v$n?this._type|=65536:this._type&=-65537}),v$E(0,v$a,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(v$n){this.lineElement=!1,"right"===v$n?this._type|=32768:this._type&=-32769}),v$E(0,v$a,"textDecoration",function(){return this._font.decoration},function(v$n){this._createFont().decoration=v$n}),v$E(0,v$a,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(v$n){"nowrap"===v$n&&(this._type|=131072),"none"===v$n&&(this._type&=-131073)}),v$E(0,v$a,"background",null,function(v$n){v$n?(this._bgground||(this._bgground={}),this._bgground.color=v$n,this._ower.conchModel&&this._ower.conchModel.bgColor(v$n),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),v$E(0,v$a,"wordWrap",function(){return 0==(131072&this._type)},function(v$n){v$n?this._type&=-131073:this._type|=131072}),v$E(0,v$a,"color",function(){return this._font.color},function(v$n){this._createFont().color=v$n}),v$E(0,v$a,"password",function(){return this._font.password},function(v$n){this._createFont().password=v$n}),v$E(0,v$a,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(v$n){"none"===v$n?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=v$n),this._ower.conchModel&&this._ower.conchModel.bgColor(v$n),this._ower._renderType|=256}),v$E(0,v$a,"font",function(){return this._font.toString()},function(v$n){this._createFont().set(v$n)}),v$E(0,v$a,"weight",null,function(v$n){this._createFont().weight=v$n}),v$E(0,v$a,"letterSpacing",function(){return this._spacing[0]},function(v$n){"string"==typeof v$n&&(v$n=parseInt(v$n+"")),this._spacing===v$i._SPACING&&(this._spacing=[0,0]),this._spacing[0]=v$n}),v$E(0,v$a,"fontSize",function(){return this._font.size},function(v$n){this._createFont().size=v$n}),v$E(0,v$a,"italic",function(){return this._font.italic},function(v$n){this._createFont().italic=v$n}),v$E(0,v$a,"fontFamily",function(){return this._font.family},function(v$n){this._createFont().family=v$n}),v$E(0,v$a,"stroke",function(){return this._font.stroke[0]},function(v$n){this._createFont().stroke===v$q._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=v$n}),v$E(0,v$a,"strokeColor",function(){return this._font.stroke[1]},function(v$n){this._createFont().stroke===v$q._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=v$n}),v$E(0,v$a,"border",function(){return this._border?this._border.value:""},function(v$n){if("none"!=v$n){this._border||(this._border={});var v$a=(this._border.value=v$n).split(" ");if(this._border.color=v$B.create(v$a[v$a.length-1]),1==v$a.length)return this._border.size=1,void(this._border.type="solid");var v$U=0;0<v$a[0].indexOf("px")?(this._border.size=parseInt(v$a[0]),v$U++):this._border.size=1,this._border.type=v$a[v$U],this._ower._renderType|=256}else this._border=null}),v$E(0,v$a,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(v$n){v$n?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==v$n?null:v$B.create(v$n),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),v$E(0,v$a,"position",function(){return 4&this._type?"absolute":""},function(v$n){"absolute"==v$n?this._type|=4:this._type&=-5}),v$E(0,v$a,"display",null,function(v$n){switch(v$n){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),v$E(0,v$a,"paddingLeft",function(){return this.padding[3]}),v$E(0,v$a,"paddingTop",function(){return this.padding[0]}),v$E(0,v$a,"_scale",null,function(v$n){this._ower.scale(v$n[0],v$n[1])}),v$E(0,v$a,"_rotate",null,function(v$n){this._ower.rotation=v$n}),v$i.parseOneCSS=function(v$n,v$a){for(var v$U,v$x=[],v$D=v$n.split(v$a),v$p=0,v$Q=v$D.length;v$p<v$Q;v$p++){var v$V=v$D[v$p],v$y=v$V.indexOf(":"),v$R=v$V.substr(0,v$y).replace(/^\s+|\s+$/g,"");if(0!=v$R.length){var v$X=v$V.substr(v$y+1).replace(/^\s+|\s+$/g,""),v$z=[v$R,v$X];switch(v$R){case"italic":case"bold":v$z[1]="true"==v$X;break;case"line-height":v$z[0]="lineHeight",v$z[1]=parseInt(v$X);break;case"font-size":v$z[0]="fontSize",v$z[1]=parseInt(v$X);break;case"padding":1<(v$U=v$X.split(" ")).length||(v$U[1]=v$U[2]=v$U[3]=v$U[0]),v$z[1]=[parseInt(v$U[0]),parseInt(v$U[1]),parseInt(v$U[2]),parseInt(v$U[3])];break;case"rotate":v$z[0]="_rotate",v$z[1]=parseFloat(v$X);break;case"scale":v$U=v$X.split(" "),v$z[0]="_scale",v$z[1]=[parseFloat(v$U[0]),parseFloat(v$U[1])];break;case"translate":v$U=v$X.split(" "),v$z[0]="_translate",v$z[1]=[parseInt(v$U[0]),parseInt(v$U[1])];break;default:(v$z[0]=v$i._CSSTOVALUE[v$R])||(v$z[0]=v$R)}v$x.push(v$z)}}return v$x},v$i.parseCSS=function(v$n,v$a){for(var v$U;null!=(v$U=v$i._parseCSSRegExp.exec(v$n));)v$i.styleSheets[v$U[1]]=v$i.parseOneCSS(v$U[2],";")},v$i.EMPTY=new v$i(null),v$i._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},v$i._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),v$i._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},v$i._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},v$i.styleSheets={},v$i.ALIGN_CENTER=1,v$i.ALIGN_RIGHT=2,v$i.VALIGN_MIDDLE=1,v$i.VALIGN_BOTTOM=2,v$i._CSS_BLOCK=1,v$i._DISPLAY_NONE=2,v$i._ABSOLUTE=4,v$i._WIDTH_SET=8,v$i._PADDING=[0,0,0,0],v$i._RECT=[-1,-1,-1,-1],v$i._SPACING=[0,0],v$i._ALIGNS=[0,0,0],v$i.ADDLAYOUTED=512,v$i._NEWFONT=4096,v$i._HEIGHT_SET=8192,v$i._BACKGROUND_SET=16384,v$i._FLOAT_RIGHT=32768,v$i._LINE_ELEMENT=65536,v$i._NOWARP=131072,v$i._WIDTHAUTO=262144,v$i._LISTERRESZIE=524288,v$i}(v$V),v$Un=function(v$n){function v$Q(){this.url=null,this.audio=null,this.loaded=!1,v$Q.__super.call(this)}v$X(v$Q,"laya.media.h5audio.AudioSound",v$R);var v$a=v$Q.prototype;return v$a.dispose=function(){var v$n=v$Q._audioCache[this.url];v$n&&(v$n.src="",delete v$Q._audioCache[this.url])},v$a.load=function(v$n){var v$a;if(v$n=v$G.formatURL(v$n),(this.url=v$n)==v$Z._tMusic?(v$Q._initMusicAudio(),(v$a=v$Q._musicAudio).src!=v$n&&(v$Q._audioCache[v$a.src]=null,v$a=null)):v$a=v$Q._audioCache[v$n],v$a&&2<=v$a.readyState)this.event("complete");else{v$a||(v$a=v$n==v$Z._tMusic?(v$Q._initMusicAudio(),v$Q._musicAudio):v$f.createElement("audio"),(v$Q._audioCache[v$n]=v$a).src=v$n),v$a.addEventListener("canplaythrough",v$x),v$a.addEventListener("error",v$D);var v$U=this;(this.audio=v$a).load?v$a.load():v$D()}function v$x(){v$p(),v$U.loaded=!0,v$U.event("complete")}function v$D(){v$a.load=null,v$p(),v$U.event("error")}function v$p(){v$a.removeEventListener("canplaythrough",v$x),v$a.removeEventListener("error",v$D)}},v$a.play=function(v$n,v$a,v$U){if(void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),!this.url)return null;var v$x,v$D;if(!(v$x=this.url==v$Z._tMusic?v$Q._musicAudio:v$Q._audioCache[this.url]))return null;v$D=v$S.getItem("audio:"+this.url),v$I.isConchApp?v$D||((v$D=v$f.createElement("audio")).src=this.url):this.url==v$Z._tMusic?(v$Q._initMusicAudio(),(v$D=v$Q._musicAudio).src=this.url):v$D=v$D||v$x.cloneNode(!0);var v$p=new v$in(v$D);return v$p.url=this.url,v$p.loops=v$a,v$p.startTime=v$n,v$p.startHandler=v$U,v$p.play(!1),v$Z.addChannel(v$p),v$p},v$E(0,v$a,"duration",function(){var v$n;return(v$n=v$Q._audioCache[this.url])?v$n.duration:0}),v$Q._initMusicAudio=function(){v$Q._musicAudio||(v$Q._musicAudio||(v$Q._musicAudio=v$f.createElement("audio")),v$I.isConchApp||v$f.document.addEventListener("mousedown",v$Q._makeMusicOK))},v$Q._makeMusicOK=function(){v$f.document.removeEventListener("mousedown",v$Q._makeMusicOK),v$Q._musicAudio.src?v$Q._musicAudio.play():(v$Q._musicAudio.src="",v$Q._musicAudio.load())},v$Q._audioCache={},v$Q._musicAudio=null,v$Q}(),v$xn=function(v$n){function v$a(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,v$a.__super.call(this)}v$X(v$a,"laya.media.SoundChannel",v$R);var v$U=v$a.prototype;return v$U.play=function(){},v$U.stop=function(){},v$U.pause=function(){},v$U.resume=function(){},v$U.__runComplete=function(v$n){v$n&&v$n.run()},v$E(0,v$U,"volume",function(){return 1},function(v$n){}),v$E(0,v$U,"position",function(){return 0}),v$E(0,v$U,"duration",function(){return 0}),v$a}(),v$Dn=function(v$n){function v$a(){v$a.__super.call(this)}v$X(v$a,"laya.media.Sound",v$R);var v$U=v$a.prototype;return v$U.load=function(v$n){},v$U.play=function(v$n,v$a,v$U){return void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),null},v$U.dispose=function(){},v$E(0,v$U,"duration",function(){return 0}),v$a}(),v$pn=function(v$n){function v$D(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,v$D.__super.call(this)}v$X(v$D,"laya.media.webaudio.WebAudioSound",v$R);var v$a=v$D.prototype;return v$a.load=function(v$n){this.url=v$n,this.audioBuffer=v$D._dataCache[v$n],this.audioBuffer?this._loaded(this.audioBuffer):(v$D.e.on("loaded:"+v$n,this,this._loaded),v$D.e.on("err:"+v$n,this,this._err),v$D.__loadingSound[v$n]||(v$D.__loadingSound[v$n]=!0,v$k.loader.load(v$n,v$A.create(this,this.onloaded),null,v$Vn.BUFFER,4,!1,null,!0)))},v$a.onloaded=function(v$n){v$n||this._err(),this._disposed?this._removeLoadEvents():(this.data=v$n,v$D.buffs.push({buffer:this.data,url:this.url}),v$D.decode())},v$a._err=function(){if(this._removeLoadEvents(),v$D.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var v$n,v$a,v$U,v$x=0;for(v$n=(v$a=this.__toPlays).length,v$x=0;v$x<v$n;v$x++)(v$U=v$a[v$x])[3]&&!v$U[3].isStopped&&v$U[3].event("error");this.__toPlays.length=0}},v$a._loaded=function(v$n){this._removeLoadEvents(),this._disposed||(this.audioBuffer=v$n,this.loaded=!0,this.event("complete"))},v$a._removeLoadEvents=function(){v$D.e.off("loaded:"+this.url,this,this._loaded),v$D.e.off("err:"+this.url,this,this._err)},v$a.__playAfterLoaded=function(){if(this.__toPlays){var v$n,v$a,v$U,v$x=0;for(v$n=(v$a=this.__toPlays).length,v$x=0;v$x<v$n;v$x++)(v$U=v$a[v$x])[3]&&!v$U[3].isStopped&&this.play(v$U[0],v$U[1],v$U[2],v$U[3]);this.__toPlays.length=0}},v$a.play=function(v$n,v$a,v$U,v$x){return void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),v$x=v$x||new v$qn,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([v$n,v$a,v$U,v$x]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),v$x.url=this.url,v$x.loops=v$a,v$x.audioBuffer=this.audioBuffer,v$x.startTime=v$n,v$x.startHandler=v$U,v$x.play(!1),v$Z.addChannel(v$x),v$x},v$a.dispose=function(){this._disposed=!0,delete v$D._dataCache[this.url],delete v$D.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},v$E(0,v$a,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),v$D.decode=function(){if(!(v$D.buffs.length<=0||v$D.isDecoding))if(v$D.isDecoding=!0,(v$D.tInfo=v$D.buffs.shift())&&v$D.tInfo.buffer&&v$D.tInfo.buffer.byteLength)try{v$D.ctx.decodeAudioData(v$D.tInfo.buffer,v$D._done,v$D._fail)}catch(v$n){console.error("decodeAudioData error  byteLength:"+v$D.tInfo.buffer.byteLength+"  url:"+v$D.tInfo.url)}else v$D._fail()},v$D._done=function(v$n){v$D.e.event("loaded:"+v$D.tInfo.url,v$n),v$D._dataCache[v$D.tInfo.url]=v$n,v$D.isDecoding=!1,v$D.decode()},v$D._fail=function(){v$D.e.event("err:"+v$D.tInfo.url,null),v$D.isDecoding=!1,v$D.decode()},v$D._playEmptySound=function(){if(null!=v$D.ctx){if(v$D._emptySource&&(v$D._emptySource.stop(),v$D._emptySource.disconnect(0),!v$qn._tryCleanFailed))try{v$D._emptySource.buffer=null}catch(v$n){v$qn._tryCleanFailed=!0}var v$n=v$D.ctx.createBufferSource();v$n.buffer=v$D._miniBuffer,v$n.connect(v$D.ctx.destination),v$n.start(0,0,0),v$D._emptySource=v$n}},v$D._unlock=function(){v$D._unlocked||(v$D._playEmptySound(),"running"==v$D.ctx.state?(v$f.document.removeEventListener("mousedown",v$D._unlock,!0),v$f.document.removeEventListener("touchend",v$D._unlock,!0),v$f.document.removeEventListener("touchstart",v$D._unlock,!0),v$D._unlocked=!0):"suspended"==v$D.ctx.state&&v$Z._recoverWebAudio())},v$D.initWebAudio=function(){"running"!=v$D.ctx.state&&(v$D._unlock(),v$f.document.addEventListener("mousedown",v$D._unlock,!0),v$f.document.addEventListener("touchend",v$D._unlock,!0),v$f.document.addEventListener("touchstart",v$D._unlock,!0))},v$D._emptySource=null,v$D._dataCache={},v$D.buffs=[],v$D.isDecoding=!1,v$D._unlocked=!1,v$D.tInfo=null,v$D.__loadingSound={},v$y(v$D,["window",function(){return this.window=v$f.window},"webAudioEnabled",function(){return this.webAudioEnabled=v$D.window.AudioContext||v$D.window.webkitAudioContext||v$D.window.mozAudioContext},"ctx",function(){return this.ctx=v$D.webAudioEnabled?new(v$D.window.AudioContext||v$D.window.webkitAudioContext||v$D.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=v$D.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new v$R}]),v$D}(),v$Qn=function(v$n){function v$a(){this._responseType=null,this._data=null,v$a.__super.call(this),this._http=new v$f.window.XMLHttpRequest}v$X(v$a,"laya.net.HttpRequest",v$R);var v$U=v$a.prototype;return v$U.send=function(v$n,v$a,v$U,v$x,v$D){void 0===v$U&&(v$U="get"),void 0===v$x&&(v$x="text"),this._responseType=v$x,this._data=null;var v$p=this,v$Q=this._http;if(v$Q.open(v$U,v$n,!0),v$D)for(var v$V=0;v$V<v$D.length;v$V++)v$Q.setRequestHeader(v$D[v$V++],v$D[v$V]);else v$I.isConchApp||(v$a&&"string"!=typeof v$a?v$Q.setRequestHeader("Content-Type","application/json"):v$Q.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));v$Q.responseType="arraybuffer"!==v$x?"text":"arraybuffer",v$Q.onerror=function(v$n){v$p._onError(v$n)},v$Q.onabort=function(v$n){v$p._onAbort(v$n)},v$Q.onprogress=function(v$n){v$p._onProgress(v$n)},v$Q.onload=function(v$n){v$p._onLoad(v$n)},v$Q.send(v$a)},v$U._onProgress=function(v$n){v$n&&v$n.lengthComputable&&this.event("progress",v$n.loaded/v$n.total)},v$U._onAbort=function(v$n){this.error("Request was aborted by user")},v$U._onError=function(v$n){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},v$U._onLoad=function(v$n){var v$a=this._http,v$U=void 0!==v$a.status?v$a.status:200;200===v$U||204===v$U||0===v$U?this.complete():this.error("["+v$a.status+"]"+v$a.statusText+":"+v$a.responseURL)},v$U.error=function(v$n){this.clear(),this.event("error",v$n)},v$U.complete=function(){this.clear();var v$a=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=v$t.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(v$n){v$a=!1,this.error(v$n.message)}v$a&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},v$U.clear=function(){var v$n=this._http;v$n.onerror=v$n.onabort=v$n.onprogress=v$n.onload=null},v$E(0,v$U,"url",function(){return this._http.responseURL}),v$E(0,v$U,"http",function(){return this._http}),v$E(0,v$U,"data",function(){return this._data}),v$a}(),v$Vn=function(v$n){function v$$(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,v$$.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}v$X(v$$,"laya.net.Loader",v$R);var v$a=v$$.prototype;return v$a.load=function(v$n,v$a,v$U,v$x,v$D){if(v$n&&""!=v$n||console.error("Loader 加载的url不合法 "+v$n),void 0===v$U&&(v$U=!0),void 0===v$D&&(v$D=!1),0===(this._url=v$n).indexOf("data:image")?this._type=v$a="image":this._type=v$a||(v$a=this.getTypeFromUrl(v$n)),this._cache=v$U,this._data=null,!v$D&&v$$.loadedMap[v$n])return this._data=v$$.loadedMap[v$n],this.event("progress",1),void this.event("complete",this._data);if(v$x&&v$$.setGroup(v$n,v$x),null!=v$$.parserMap[v$a])return this._customParse=!0,void(v$$.parserMap[v$a]instanceof laya.utils.Handler?v$$.parserMap[v$a].runWith(this):v$$.parserMap[v$a].call(null,this));if("image"===v$a||"htmlimage"===v$a||"nativeimage"===v$a)return this._loadImage(v$n);if("ttf"===v$a)return this._loadTTF(v$n);switch(v$a){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:v$a}v$$.preLoadedMap[v$n]?this.onLoaded(v$$.preLoadedMap[v$n]):v$Q.resMgrLoad(v$n,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},v$a.getTypeFromUrl=function(v$n){var v$a=v$t.getFileExtension(v$n);return v$a?v$$.typeMap[v$a]:(console.warn("Not recognize the resources suffix",v$n),"text")},v$a._loadTTF=function(v$n){v$n=v$G.formatURL(v$n);var v$a=new v$H;v$a.complete=v$A.create(this,this.onLoaded),v$a.load(v$n)},v$a._loadImage=function(v$n){v$Q.imgMgrLoad(v$n,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},v$a._loadImageComplete=function(v$n,v$a,v$U){if(null!=v$U)if(v$U instanceof ArrayBuffer){var v$x=new DataView(v$U),v$D=new laya.webgl.resource.WebGLImage(new Uint8Array(v$U,8),v$n,0,!1,v$x.getUint32(0),v$x.getUint32(4));this.onLoaded(v$D)}else if(v$U instanceof v$Xn)v$$.imgMgrSet[v$n]=v$a,v$Q.imgMgrLock(v$n,v$$.imgMgrSet[v$n]),this._url=v$n,this.complete(v$U);else{var v$p=-1!=v$n.indexOf(".png",v$n.length-4)?6408:6407;v$D=new laya.webgl.resource.WebGLImage(v$U,v$n,v$p,!1,v$U.width,v$U.height);this.onLoaded(v$D)}else this.event("error","Load image failed")},v$a.imageCancel=function(v$n,v$a,v$U){v$Q.imgMgrCancel(v$n,this._onImageCallback)},v$a._loadSound=function(v$n){var v$a=new v$Z._soundClass,v$U=this;function v$x(){v$a.offAll()}v$a.on("complete",this,function(){v$x(),v$U.onLoaded(v$a)}),v$a.on("error",this,function(){v$x(),v$a.dispose(),v$U.event("error","Load sound failed")}),v$a.load(v$n)},v$a.onProgress=function(v$n){"atlas"===this._type?this.event("progress",.3*v$n):this.event("progress",v$n)},v$a.onError=function(v$n){this.event("error",v$n)},v$a._loadedComplete=function(v$n,v$a,v$U){if(null!=v$U)switch(this._type){case"atlas":case"plf":case"json":var v$x=new v$F(v$U);this.onLoaded(JSON.parse(v$x.readUTFBytes()));break;case"font":v$x=new v$F(v$U);this.onLoaded(v$t.parseXMLFromString(v$x.readUTFBytes()));break;default:this.onLoaded(v$U)}else this.event("error",v$n)},v$a.onLoaded=function(v$n){var v$a=this._type;if("plf"==v$a)this.parsePLFData(v$n),this.complete(v$n);else if("image"===v$a){var v$U=new v$Xn(v$n);v$U.url=this._url,this.complete(v$U)}else if("sound"===v$a||"htmlimage"===v$a||"nativeimage"===v$a)this.complete(v$n);else if("atlas"===v$a){if(!v$n.src&&!v$n._setContext){if(!this._data){if((this._data=v$n).meta&&v$n.meta.image)for(var v$x=v$n.meta.image.split(","),v$D=0<=this._url.indexOf("/")?"/":"\\",v$p=this._url.lastIndexOf(v$D),v$Q=0<=v$p?this._url.substr(0,v$p+1):"",v$V=0,v$y=v$x.length;v$V<v$y;v$V++)v$x[v$V]=v$Q+v$x[v$V];else v$x=[this._url.replace(".json",".png")];v$x.reverse(),v$n.toLoads=v$x,v$n.pics=[]}return this.event("progress",.3+1/v$x.length*.6),this._loadImage(v$x.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(v$n),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var v$R=this._data.frames,v$X=this._url.split("?")[0],v$z=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:v$X.substring(0,v$X.lastIndexOf("."))+"/",v$i=this._data.pics,v$q=v$G.formatURL(this._url),v$E=v$$.atlasMap[v$q]||(v$$.atlasMap[v$q]=[]);v$E.dir=v$z;var v$m=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var v$b in v$m=parseFloat(this._data.meta.scale),v$R){var v$P,v$A=v$R[v$b],v$T=v$i[v$A.frame.idx?v$A.frame.idx:0],v$K=v$G.formatURL(v$z+v$b);v$T.scaleRate=v$m,v$P=v$Xn.create(v$T,v$A.frame.x,v$A.frame.y,v$A.frame.w,v$A.frame.h,v$A.spriteSourceSize.x,v$A.spriteSourceSize.y,v$A.sourceSize.w,v$A.sourceSize.h),v$$.cacheRes(v$K,v$P),v$$.keepCache(this._url,v$z+v$b),v$P.url=v$K,v$E.push(v$K)}else for(v$b in v$R)v$T=v$i[(v$A=v$R[v$b]).frame.idx?v$A.frame.idx:0],v$K=v$G.formatURL(v$z+v$b),v$$.cacheRes(v$K,v$Xn.create(v$T,v$A.frame.x,v$A.frame.y,v$A.frame.w,v$A.frame.h,v$A.spriteSourceSize.x,v$A.spriteSourceSize.y,v$A.sourceSize.w,v$A.sourceSize.h)),v$$.loadedMap[v$K].url=v$K,v$$.keepCache(this._url,v$z+v$b),v$E.push(v$K);delete this._data.pics,this.complete(this._data)}else if("font"==v$a){if(!v$n.src)return this._data=v$n,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var v$Y=new v$M;v$Y.parseFont(this._data,v$n);var v$W=this._url.split(".fnt")[0].split("/"),v$k=v$W[v$W.length-1];v$bn.registerBitmapFont(v$k,v$Y),this._data=v$Y,this.complete(this._data)}else if("pkm"==v$a){var v$N=v$Wn.create(v$n,this._url),v$_=new v$Xn(v$N);v$_.url=this._url,this.complete(v$_)}else this.complete(v$n)},v$a.parsePLFData=function(v$n){var v$a,v$U,v$x;for(v$a in v$n)switch(v$x=v$n[v$a],v$a){case"json":case"text":for(v$U in v$x)v$$.preLoadedMap[v$G.formatURL(v$U)]=v$x[v$U];break;default:for(v$U in v$x)v$$.preLoadedMap[v$G.formatURL(v$U)]=v$x[v$U]}},v$a.complete=function(v$n){this._data=v$n,this._customParse?this.event("loaded",v$n instanceof Array?[v$n]:v$n):(v$$._loaders.push(this),v$$._isWorking||v$$.checkNext())},v$a.endLoad=function(v$n){v$n&&(this._data=v$n),this._cache&&v$$.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},v$E(0,v$a,"url",function(){return this._url}),v$E(0,v$a,"data",function(){return this._data}),v$E(0,v$a,"cache",function(){return this._cache}),v$E(0,v$a,"type",function(){return this._type}),v$$.checkNext=function(){v$$._isWorking=!0;for(var v$n=v$f.now();v$$._startIndex<v$$._loaders.length;)if(v$f.now(),v$$._loaders[v$$._startIndex].endLoad(),v$$._startIndex++,v$f.now()-v$n>v$$.maxTimeOut)return console.warn("loader callback cost a long time:"+(v$f.now()-v$n)+" url="+v$$._loaders[v$$._startIndex-1].url),void v$k.timer.frameOnce(1,null,v$$.checkNext);v$$._loaders.length=0,v$$._startIndex=0,v$$._isWorking=!1},v$$.clearRes=function(v$n,v$a){if(null!=v$n){void 0===v$a&&(v$a=!1),v$n=v$G.formatURL(v$n);var v$U=v$$.getAtlas(v$n);if(v$U){for(var v$x=0,v$D=v$U.length;v$x<v$D;v$x++){var v$p=v$U[v$x],v$Q=v$$.getRes(v$p);delete v$$.loadedMap[v$p],v$$.clearCache(v$n.substring(v$G.basePath.length),v$p.substring(v$G.basePath.length)),v$Q&&v$Q.destroy(v$a)}v$U.length=0,delete v$$.atlasMap[v$n],delete v$$.loadedMap[v$n]}else{var v$V=v$$.loadedMap[v$n];v$V&&(delete v$$.loadedMap[v$n],v$V instanceof laya.resource.Texture&&v$V.bitmap&&v$V.destroy(v$a))}}},v$$.clearTextureRes=function(v$n){v$n=v$G.formatURL(v$n);var v$a=laya.net.Loader.getAtlas(v$n),v$U=v$a&&0<v$a.length?laya.net.Loader.getRes(v$a[0]):laya.net.Loader.getRes(v$n);v$U&&v$U.bitmap&&(v$I.isConchApp&&!v$I.isConchWebGL?v$U.bitmap.source.releaseTexture&&v$U.bitmap.source.releaseTexture():null==v$U.bitmap._atlaser&&v$U.bitmap.releaseResource(!0))},v$$.getRes=function(v$n){return v$$.loadedMap[v$G.formatURL(v$n)]},v$$.getAtlas=function(v$n){return v$$.atlasMap[v$G.formatURL(v$n)]},v$$.cacheRes=function(v$n,v$a){v$n=v$G.formatURL(v$n),null!=v$$.loadedMap[v$n]?console.warn("Resources already exist,is repeated loading:",v$n):v$$.loadedMap[v$n]=v$a},v$$.setGroup=function(v$n,v$a){v$$.groupMap[v$a]||(v$$.groupMap[v$a]=[]),v$$.groupMap[v$a].push(v$n)},v$$.clearResByGroup=function(v$n){if(v$$.groupMap[v$n]){var v$a=v$$.groupMap[v$n],v$U=0,v$x=v$a.length;for(v$U=0;v$U<v$x;v$U++)v$$.clearRes(v$a[v$U]);v$a.length=0}},v$$.keepCache=function(v$n,v$a){if(v$n&&v$a){var v$U=v$$.cacheSet[v$a];v$U?-1==v$U.indexOf(v$n)&&v$U.push(v$n):v$$.cacheSet[v$a]=[v$n]}},v$$.clearCache=function(v$n,v$a){if(v$n&&v$a){var v$U=v$$.cacheSet[v$a];if(v$U){var v$x=v$U.indexOf(v$n);if(-1!==v$x){var v$D=v$U.length-1;0==v$D?(delete v$$.cacheSet[v$a],0<v$$.imgMgrSet[v$a]?v$Q.imgMgrFree(v$a,v$$.imgMgrSet[v$a]):v$$.clearRes(v$a,!0)):(v$U[v$x]=v$U[v$D],v$U.length=v$D)}}}},v$$.saveObject=function(v$n,v$a,v$U){if(v$a&&v$n){var v$x=v$$.objectSet[v$n];v$x?(console.warn("Loader.saveObject: "+v$n),v$x[0]=v$a,v$x[1]=v$U):v$$.objectSet[v$n]=[v$a,v$U,[]]}},v$$.findObject=function(v$n){if(v$n){var v$a=v$$.objectSet[v$n];if(v$a)return v$a[0]}return null},v$$.keepObject=function(v$n,v$a){if(v$n&&v$a){var v$U=v$$.objectSet[v$a];v$U&&-1===v$U[2].indexOf(v$n)&&v$U[2].push(v$n)}},v$$.clearObject=function(v$n,v$a){if(v$n&&v$a){var v$U=v$$.objectSet[v$a];if(v$U){var v$x=v$U[2],v$D=v$x.indexOf(v$n);if(-1!==v$D){var v$p=v$x.length-1;0==v$p?(delete v$$.objectSet[v$a],v$U[1]&&v$U[1].call(null,v$U[0])):(v$x[v$D]=v$x[v$p],v$x.length=v$p)}}}},v$$.TEXT="text",v$$.JSON="json",v$$.XML="xml",v$$.BUFFER="arraybuffer",v$$.IMAGE="image",v$$.SOUND="sound",v$$.ATLAS="atlas",v$$.FONT="font",v$$.TTF="ttf",v$$.PLF="plf",v$$.PKM="pkm",v$$.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},v$$.parserMap={},v$$.groupMap={},v$$.maxTimeOut=100,v$$.loadedMap={},v$$.preLoadedMap={},v$$.atlasMap={},v$$._loaders=[],v$$._isWorking=!1,v$$._startIndex=0,v$$.imgCache={},v$$.cacheSet={},v$$.objectSet={},v$$.imgMgrSet={},v$$}(),v$yn=function(v$n){var v$i;function v$q(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},v$q.__super.call(this);for(var v$n=0;v$n<this._maxPriority;v$n++)this._resInfos[v$n]=[]}v$X(v$q,"laya.net.LoaderManager",v$R);var v$a=v$q.prototype;return v$a.create=function(v$n,v$U,v$a,v$x,v$D,v$p,v$Q,v$V){if(null==v$p&&(v$p=2),null==v$Q&&(v$Q=!0),v$n instanceof Array){var v$y=v$n,v$R=v$y.length,v$X=0;if(v$a)var v$z=v$A.create(v$a.caller,v$a.method,v$a.args,!1);for(var v$i=0;v$i<v$R;v$i++){var v$q=v$y[v$i];"string"==typeof v$q&&(v$q=v$y[v$i]={url:v$q}),v$q.progress=0}for(v$i=0;v$i<v$R;v$i++){v$q=v$y[v$i];var v$E=v$a?v$A.create(null,v$P,[v$q],!1):null,v$m=v$a||v$U?v$A.create(null,v$b,[v$q]):null;this._create(v$q.url,v$m,v$E,v$q.clas||v$x,v$q.params||v$D,null!=v$q.priority&&0<=v$q.priority?v$q.priority:v$p,v$Q,v$q.group||v$V)}function v$b(v$n,v$a){v$X++,v$n.progress=1,v$X===v$R&&v$U&&v$U.run()}function v$P(v$n,v$a){v$n.progress=v$a;for(var v$U=0,v$x=0;v$x<v$R;v$x++){v$U+=v$y[v$x].progress}var v$D=v$U/v$R;v$z.runWith(v$D)}return!0}return this._create(v$n,v$U,v$a,v$x,v$D,v$p,v$Q,v$V)},v$a._create=function(v$a,v$U,v$n,v$x,v$D,v$p,v$Q,v$V){v$a&&""!=v$a||console.error("加载的url不合法 "+v$a),null==v$p&&(v$p=2),null==v$Q&&(v$Q=!0);var v$y=v$G.formatURL(v$a),v$R=this.getRes(v$y);if(v$R)!v$R.hasOwnProperty("loaded")||v$R.loaded?(v$n&&v$n.runWith(1),v$U&&v$U.run()):v$U&&v$k.loader._createListener(v$a,v$U.caller,v$U.method,v$U.args,!0,!1);else{var v$X=v$t.getFileExtension(v$a),v$z=v$q.createMap[v$X];if(!v$z)throw new Error("LoaderManager:unknown file("+v$a+") extension with: "+v$X+".");v$x||(v$x=v$z[0]);var v$i=v$z[1];if("atlas"==v$X)this.load(v$a,v$U,v$n,v$i,v$p,v$Q);else{v$x===v$Xn&&(v$i="htmlimage"),(v$R=v$x?new v$x:null).hasOwnProperty("_loaded")&&(v$R._loaded=!1),v$R._setUrl(v$a),v$V&&v$R._setGroup(v$V),this._createLoad(v$R,v$a,v$A.create(null,function(v$n){v$R&&!v$R.destroyed&&v$n&&v$R.onAsynLoaded.call(v$R,v$a,v$n,v$D),v$U&&v$U.run();v$k.loader.event(v$a)}),v$n,v$i,v$p,!1,v$V,!0),v$Q&&this.cacheRes(v$y,v$R)}}return v$R},v$a.load=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){v$n&&""!=v$n||console.error("加载的url不合法 "+v$n);var v$y=this;if(null==v$D&&(v$D=2),null==v$p&&(v$p=!0),void 0===v$V&&(v$V=!1),v$n instanceof Array)return this._loadAssets(v$n,v$a,v$U,v$x,v$D,v$p,v$Q);var v$R=v$Vn.getRes(v$n);if(null!=v$R)v$k.timer.frameOnce(1,null,function(){v$U&&v$U.runWith(1),v$a&&v$a.runWith(v$R),v$y._loaderCount||v$y.event("complete")});else{var v$X=v$q._resMap[v$n];v$X?(v$a&&v$X._createListener("complete",v$a.caller,v$a.method,v$a.args,!1,!1),v$U&&v$X._createListener("progress",v$U.caller,v$U.method,v$U.args,!1,!1)):((v$X=this._infoPool.length?this._infoPool.pop():new v$i).url=v$n,v$X.clas=null,v$X.type=v$x,v$X.cache=v$p,v$X.group=v$Q,v$X.ignoreCache=v$V,v$X.priority=v$D,v$a&&v$X.on("complete",v$a.caller,v$a.method,v$a.args),v$U&&v$X.on("progress",v$U.caller,v$U.method,v$U.args),v$q._resMap[v$n]=v$X,v$D=v$D<this._maxPriority?0<=v$D?v$D:0:this._maxPriority-1,this._resInfos[v$D].push(v$X),this._next())}return this},v$a.cancel=function(v$n,v$a,v$U){if(v$R=v$q._resMap[v$n]){v$a&&v$R.off("complete",v$a.caller,v$a.method,!1),v$U&&v$R.off("progress",v$U.caller,v$U.method,!1);var v$x=v$R.getListener("complete"),v$D=v$R.getListener("progress");if(!(v$x&&v$x.head||v$D&&v$D.head)){if(v$R.loader){var v$p=v$R.loader;v$p.imageCancel(v$n),v$p.offAll(),v$p._data=null,v$p._customParse=!1,v$p._url=null,v$p._class=null,v$p._type=null,this._loaders.push(v$p),this._loaderCount--,delete this._loaderMap[v$R.url]}for(var v$Q=0;v$Q<this._maxPriority;v$Q++)for(var v$V=this._resInfos[v$Q],v$y=v$V.length-1;-1<v$y;v$y--){var v$R;(v$R=v$V[v$y])&&v$R.url===v$n&&(v$V[v$y]=null,v$R.destroy(),v$R.offAll(),this._infoPool.push(v$R))}delete v$q._resMap[v$n],this._next()}}},v$a._createLoad=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){var v$R=this;if(null==v$p&&(v$p=2),null==v$Q&&(v$Q=!0),void 0===v$y&&(v$y=!1),v$a instanceof Array)return this._loadAssets(v$a,v$U,v$x,v$D,v$p,v$Q,v$V);var v$X=v$Vn.getRes(v$a);if(null!=v$X)v$k.timer.frameOnce(1,null,function(){v$x&&v$x.runWith(1),v$U&&v$U.runWith(v$X),v$R._loaderCount||v$R.event("complete")});else{var v$z=v$q._resMap[v$a];v$z?(v$U&&v$z._createListener("complete",v$U.caller,v$U.method,v$U.args,!1,!1),v$x&&v$z._createListener("progress",v$x.caller,v$x.method,v$x.args,!1,!1)):((v$z=this._infoPool.length?this._infoPool.pop():new v$i).url=v$a,v$z.clas=v$n,v$z.type=v$D,v$z.cache=v$Q,v$z.group=v$V,v$z.ignoreCache=v$y,v$z.priority=v$p,v$U&&v$z.on("complete",v$U.caller,v$U.method,v$U.args),v$x&&v$z.on("progress",v$x.caller,v$x.method,v$x.args),v$q._resMap[v$a]=v$z,v$p=v$p<this._maxPriority?0<=v$p?v$p:0:this._maxPriority-1,this._resInfos[v$p].push(v$z),this._next())}return this},v$a._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var v$n=0;v$n<this._maxPriority;v$n++)for(var v$a=this._resInfos[v$n];0<v$a.length;){var v$U=v$a.shift();if(v$U)return this._doLoad(v$U)}this._loaderCount||this.event("complete")}},v$a._doLoad=function(v$a){var v$U=this._loaders.length?this._loaders.pop():new v$Vn;this._loaderCount++,(this._loaderMap[v$a.url]=v$U).on("complete",null,v$D),v$U.on("progress",null,function(v$n){v$a.event("progress",v$n)}),v$U.on("error",null,function(v$n){v$D(null)}),v$a.loader=v$U;var v$x=this;function v$D(v$n){v$U.offAll(),v$U._data=null,v$U._customParse=!1,v$U._url=null,v$U._class=null,v$U._type=null,v$x._loaders.push(v$U),v$x._loaderCount--,delete v$x._loaderMap[v$a.url],v$x._endLoad(v$a,v$n instanceof Array?[v$n]:v$n),v$x._next()}v$U._class=v$a.clas,1<=v$a.priority?(v$U.priority=v$a.priority,v$U.realTime=!1):(v$U.priority=0,v$U.realTime=!0),v$U.load(v$a.url,v$a.type,v$a.cache,v$a.group,v$a.ignoreCache)},v$a._endLoad=function(v$n,v$a){var v$U=v$n.url;if(null==v$a){var v$x=this._failRes[v$U]||0;if(v$x<this.retryNum)return console.warn("[warn]Retry to load:",v$U),this._failRes[v$U]=v$x+1,void v$k.timer.once(this.retryDelay,this,this._addReTry,[v$n],!1);console.warn("[error]Failed to load:",v$U),this.event("error",v$U)}this._failRes[v$U]&&(this._failRes[v$U]=0),delete v$q._resMap[v$U],v$n.event("complete",v$a),v$n.destroy(),v$n.offAll(),this._infoPool.push(v$n)},v$a._addReTry=function(v$n){this._resInfos[this._maxPriority-1].push(v$n),this._next()},v$a.clearRes=function(v$n,v$a){void 0===v$a&&(v$a=!1),v$Vn.clearRes(v$n,v$a)},v$a.getRes=function(v$n){return v$Vn.getRes(v$n)},v$a.cacheRes=function(v$n,v$a){v$Vn.cacheRes(v$n,v$a)},v$a.clearTextureRes=function(v$n){v$Vn.clearTextureRes(v$n)},v$a.setGroup=function(v$n,v$a){v$Vn.setGroup(v$n,v$a)},v$a.clearResByGroup=function(v$n){v$Vn.clearResByGroup(v$n)},v$a.clearUnLoaded=function(){for(var v$n=0;v$n<this._maxPriority;v$n++){for(var v$a=this._resInfos[v$n],v$U=v$a.length-1;-1<v$U;v$U--){var v$x=v$a[v$U];v$x&&(v$x.destroy(),v$x.offAll(),this._infoPool.push(v$x))}v$a.length=0}this._loaderCount=0,v$q._resMap={}},v$a.cancelLoadByUrls=function(v$n){if(v$n)for(var v$a=0,v$U=v$n.length;v$a<v$U;v$a++)this.cancelLoadByUrl(v$n[v$a])},v$a.cancelLoadByUrl=function(v$n){for(var v$a=0;v$a<this._maxPriority;v$a++)for(var v$U=this._resInfos[v$a],v$x=v$U.length-1;-1<v$x;v$x--){var v$D=v$U[v$x];v$D&&v$D.url===v$n&&(v$U[v$x]=null,v$D.destroy(),v$D.offAll(),this._infoPool.push(v$D))}v$q._resMap[v$n]&&delete v$q._resMap[v$n]},v$a._loadAssets=function(v$n,v$U,v$Q,v$a,v$x,v$D,v$p){null==v$x&&(v$x=2),null==v$D&&(v$D=!0);for(var v$V=v$n.length,v$y=0,v$R=0,v$X=[],v$z=!0,v$i=0;v$i<v$V;v$i++){var v$q=v$n[v$i];if(!v$q)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+v$n);"string"==typeof v$q&&(v$q={url:v$q,type:v$a,size:1,priority:v$x}),v$q.size||(v$q.size=1),v$q.progress=0,v$R+=v$q.size,v$X.push(v$q);var v$E=v$Q?v$A.create(null,v$P,[v$q],!1):null,v$m=v$U||v$Q?v$A.create(null,v$b,[v$q]):null;this.load(v$q.url,v$m,v$E,v$q.type,null!=v$q.priority&&0<=v$q.priority?v$q.priority:2,v$D,v$q.group||v$p)}function v$b(v$n,v$a){v$y++,v$n.progress=1,v$a||(v$z=!1),v$y===v$V&&v$U&&v$U.runWith(v$z)}function v$P(v$n,v$a){if(null!=v$Q){v$n.progress=v$a;for(var v$U=0,v$x=0;v$x<v$X.length;v$x++){var v$D=v$X[v$x];v$U+=v$D.size*v$D.progress}var v$p=v$U/v$R;v$Q.runWith(v$p)}}return this},v$q.cacheRes=function(v$n,v$a){v$Vn.cacheRes(v$n,v$a)},v$q._resMap={},v$y(v$q,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),v$q.__init$=function(){v$i=function(v$n){function v$a(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,v$a.__super.call(this)}return v$X(v$a,"",v$R),v$a.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},v$a}()},v$q}(),v$Rn=(function(v$n){function v$D(v$n){v$D.__super.call(this),v$n||(v$n=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var v$a=0,v$U=0,v$x=0;v$x<20;v$x++)v$x%5!=4?this._mat[v$a++]=v$n[v$x]:this._alpha[v$U++]=v$n[v$x];this._action=v$u.createFilterAction(32),this._action.data=this}v$X(v$D,"laya.filters.ColorFilter",v$P);var v$a=v$D.prototype;v$k.imps(v$a,{"laya.filters.IFilter":!0}),v$a.callNative=function(v$n){v$n._$P.cf=this;v$n.conchModel&&v$n.conchModel.setFilterMatrix&&v$n.conchModel.setFilterMatrix(this._mat,this._alpha)},v$E(0,v$a,"type",function(){return 32}),v$E(0,v$a,"action",function(){return this._action})}(),function(v$n){function v$x(v$n,v$a,v$U){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===v$a&&(v$a=0),v$x.__super.call(this),this._byteClass=v$U||v$F,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,v$n&&0<v$a&&v$a<65535&&this.connect(v$n,v$a)}v$X(v$x,"laya.net.Socket",v$R);var v$a=v$x.prototype;v$a.connect=function(v$n,v$a){var v$U="ws://"+v$n+":"+v$a;v$U="https:"==v$f.window.location.protocol?"wss://"+v$n+":"+v$a:"ws://"+v$n+":"+v$a,this.connectByUrl(v$U)},v$a.connectByUrl=function(v$n){var v$a=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new v$f.window.WebSocket(v$n,this.protocols):this._socket=new v$f.window.WebSocket(v$n),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(v$n){v$a._onOpen(v$n)},this._socket.onmessage=function(v$n){v$a._onMessage(v$n)},this._socket.onclose=function(v$n){v$a._onClose(v$n)},this._socket.onerror=function(v$n){v$a._onError(v$n)}},v$a.cleanSocket=function(){try{this._socket.close()}catch(v$n){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},v$a.close=function(){if(null!=this._socket)try{this._socket.close()}catch(v$n){}},v$a._onOpen=function(v$n){this._connected=!0,this.event("open",v$n)},v$a._onMessage=function(v$n){if(v$n&&v$n.data){var v$a=v$n.data;if(this.disableInput&&v$a)this.event("message",v$a);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var v$U=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,v$a&&("string"==typeof v$a?this._input.writeUTFBytes(v$a):this._input.writeArrayBuffer(v$a),this._addInputPosition=this._input.pos,this._input.pos=v$U),this.event("message",v$a)}}},v$a._onClose=function(v$n){this._connected=!1,this.event("close",v$n)},v$a._onError=function(v$n){this.event("error",v$n)},v$a.send=function(v$n){this._socket.send(v$n)},v$a.flush=function(){if(this._output&&0<this._output.length){var v$a;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(v$n){v$a=v$n}this._output.endian=this.endian,this._output.clear(),v$a&&this.event("error",v$a)}},v$E(0,v$a,"input",function(){return this._input}),v$E(0,v$a,"output",function(){return this._output}),v$E(0,v$a,"connected",function(){return this._connected}),v$E(0,v$a,"endian",function(){return this._endian},function(v$n){this._endian=v$n,null!=this._input&&(this._input.endian=v$n),null!=this._output&&(this._output.endian=v$n)}),v$x.LITTLE_ENDIAN="littleEndian",v$x.BIG_ENDIAN="bigEndian"}(),function(v$n){function v$V(){v$V.__super.call(this),this._$1__id=++v$V._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(v$V._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,v$h.currentResourceManager&&v$h.currentResourceManager.addResource(this)}v$X(v$V,"laya.resource.Resource",v$R);var v$a=v$V.prototype;return v$k.imps(v$a,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),v$a._setUrl=function(v$n){var v$a;this._url!==v$n&&(this._url&&((v$a=v$V._urlResourcesMap[this._url]).splice(v$a.indexOf(this),1),0===v$a.length&&delete v$V._urlResourcesMap[this._url]),v$n&&((v$a=v$V._urlResourcesMap[v$n])||(v$V._urlResourcesMap[v$n]=v$a=[]),v$a.push(this)),this._url=v$n)},v$a._getGroup=function(){return this._group},v$a._setGroup=function(v$n){var v$a;this._group!==v$n&&(this._group&&((v$a=v$V._groupResourcesMap[this._group]).splice(v$a.indexOf(this),1),0===v$a.length&&delete v$V._groupResourcesMap[this._group]),v$n&&((v$a=v$V._groupResourcesMap[v$n])||(v$V._groupResourcesMap[v$n]=v$a=[]),v$a.push(this)),this._group=v$n)},v$a._addReference=function(){this._referenceCount++},v$a._removeReference=function(){this._referenceCount--},v$a._clearReference=function(){this._referenceCount=0},v$a._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},v$a.recreateResource=function(){this.completeCreate()},v$a.disposeResource=function(){},v$a.activeResource=function(v$n){void 0===v$n&&(v$n=!1),this._lastUseFrameCount=v$w.loopCount,!this._destroyed&&this.__loaded&&(this._released||v$n)&&this.recreateResource()},v$a.releaseResource=function(v$n){return void 0===v$n&&(v$n=!0),!(!v$n&&this.lock)&&(!(this._released&&!v$n)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},v$a.onAsynLoaded=function(v$n,v$a,v$U){throw new Error("Resource: must override this function!")},v$a.destroy=function(){var v$n;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete v$V._idResourcesMap[this.id],this._url&&((v$n=v$V._urlResourcesMap[this._url])&&(v$n.splice(v$n.indexOf(this),1),0===v$n.length&&delete v$V._urlResourcesMap[this.url]),v$Vn.clearRes(this._url),this.__loaded||v$u.cancelLoadByUrl(this._url)),this._group&&((v$n=v$V._groupResourcesMap[this._group]).splice(v$n.indexOf(this),1),0===v$n.length&&delete v$V._groupResourcesMap[this.url]))},v$a.completeCreate=function(){this._released=!1,this.event("recovered",this)},v$a.dispose=function(){this.destroy()},v$E(0,v$a,"memorySize",function(){return this._memorySize},function(v$n){var v$a=v$n-this._memorySize;this._memorySize=v$n,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,v$a),this.resourceManager&&this.resourceManager.addSize(v$a)}),v$E(0,v$a,"_loaded",null,function(v$n){this.__loaded=v$n}),v$E(0,v$a,"loaded",function(){return this.__loaded}),v$E(0,v$a,"id",function(){return this._$1__id}),v$E(0,v$a,"destroyed",function(){return this._destroyed}),v$E(0,v$a,"group",function(){return this._getGroup()},function(v$n){this._setGroup(v$n)}),v$E(0,v$a,"resourceManager",function(){return this._resourceManager}),v$E(0,v$a,"url",function(){return this._url}),v$E(0,v$a,"released",function(){return this._released}),v$E(0,v$a,"referenceCount",function(){return this._referenceCount}),v$V.getResourceByID=function(v$n){return v$V._idResourcesMap[v$n]},v$V.getResourceByURL=function(v$n,v$a){return void 0===v$a&&(v$a=0),null==v$V._urlResourcesMap[v$n]?null:v$V._urlResourcesMap[v$n][v$a]},v$V.getResourceCountByURL=function(v$n){return v$V._urlResourcesMap[v$n].length},v$V.destroyUnusedResources=function(v$n){var v$a;if(v$n){var v$U=v$V._groupResourcesMap[v$n];if(v$U)for(var v$x=v$U.slice(),v$D=0,v$p=v$x.length;v$D<v$p;v$D++)(v$a=v$x[v$D]).lock||0!==v$a._referenceCount||v$a.destroy()}else for(var v$Q in v$V._idResourcesMap)(v$a=v$V._idResourcesMap[v$Q]).lock||0!==v$a._referenceCount||v$a.destroy()},v$V._uniqueIDCounter=0,v$V._idResourcesMap={},v$V._urlResourcesMap={},v$V._groupResourcesMap={},v$V}()),v$Xn=function(v$n){function v$$(v$n,v$a){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,v$$.__super.call(this),v$n&&null!=v$n._addReference&&v$n._addReference(),this.setTo(v$n,v$a)}v$X(v$$,"laya.resource.Texture",v$R);var v$a=v$$.prototype;return v$a._setUrl=function(v$n){this.url=v$n},v$a.setTo=function(v$n,v$a){if(v$n instanceof v$Q.HTMLElement){var v$U=v$Tn.create("2D",v$n);this.bitmap=v$U}else this.bitmap=v$n;if(this.uv=v$a||v$$.DEF_UV,v$n){this._w=v$n.width,this._h=v$n.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var v$x=this;if(this._loaded)v$u.addToAtlas&&v$u.addToAtlas(v$x);else{var v$D=v$n;v$D instanceof laya.resource.HTMLImage&&v$D.image&&v$D.image.addEventListener("load",function(v$n){v$u.addToAtlas&&v$u.addToAtlas(v$x)},!1)}}},v$a.active=function(){this.bitmap&&this.bitmap.activeResource()},v$a.destroy=function(v$n){if(void 0===v$n&&(v$n=!1),this.alphaTexture&&(this.alphaTexture.destroy(v$n),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var v$a=this.bitmap;v$n?(v$I.isConchApp&&v$a.source&&v$a.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,v$a.dispose(),v$a._clearReference()):(v$a._removeReference(),0==v$a.referenceCount&&(v$I.isConchApp&&v$a.source&&v$a.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,v$a.dispose())),this.url&&this===v$k.loader.getRes(this.url)&&v$k.loader.clearRes(this.url,v$n),this._loaded=!1}},v$a.load=function(v$n){var v$a=this;this._loaded=!1,v$n=v$G.customFormat(v$n);var v$U=this.bitmap||(this.bitmap=v$Wn.create(v$n));v$U.uri=v$n,v$U&&v$U._addReference();var v$x=this;v$U.onload=function(){v$U.onload=null,v$x._loaded=!0,v$a.sourceWidth=v$a._w=v$U.width,v$a.sourceHeight=v$a._h=v$U.height,v$x.event("loaded",this),v$u.addToAtlas&&v$u.addToAtlas(v$x)}},v$a.addTextureToAtlas=function(v$n){v$u.addTextureToAtlas(this)},v$a.getPixels=function(v$n,v$a,v$U,v$x){if(v$I.isConchApp){var v$D=this.bitmap;if(v$D.source&&v$D.source.getImageData){var v$p=v$D.source.getImageData(v$n,v$a,v$U,v$x),v$Q=new Uint8Array(v$p);return Array.from(v$Q)}return null}return v$I.isWebGL?v$u.getTexturePixels(this,v$n,v$a,v$U,v$x):(v$f.canvas.size(v$U,v$x),v$f.canvas.clear(),v$f.context.drawTexture(this,-v$n,-v$a,this.width,this.height,0,0),v$f.context.getImageData(0,0,v$U,v$x).data)},v$a.onAsynLoaded=function(v$n,v$a){if(v$a){if("function"!=typeof v$a._addReference)throw new Error("bitmap._addReference is not a function. "+v$a.className+" "+typeof v$a._addReference+" "+v$a.constructor);v$a._addReference()}this.setTo(v$a,this.uv),this._loaded&&this.event("loaded",this)},v$E(0,v$a,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),v$E(0,v$a,"loaded",function(){return this._loaded}),v$E(0,v$a,"released",function(){return!this.bitmap||this.bitmap.released}),v$E(0,v$a,"width",function(){return this._w?this._w:this.uv&&this.uv!==v$$.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(v$n){this._w=v$n,this.sourceWidth||(this.sourceWidth=v$n)}),v$E(0,v$a,"repeat",function(){return!v$I.isWebGL||!this.bitmap||this.bitmap.repeat},function(v$n){v$n&&v$I.isWebGL&&this.bitmap&&(this.bitmap.repeat=v$n)&&(this.bitmap.enableMerageInAtlas=!1)}),v$E(0,v$a,"height",function(){return this._h?this._h:this.uv&&this.uv!==v$$.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(v$n){this._h=v$n,this.sourceHeight||(this.sourceHeight=v$n)}),v$E(0,v$a,"isLinearSampling",function(){return!v$I.isWebGL||9728!=this.bitmap.minFifter},function(v$n){!v$n&&v$I.isWebGL&&(v$n||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),v$$.moveUV=function(v$n,v$a,v$U){for(var v$x=0;v$x<8;v$x+=2)v$U[v$x]+=v$n,v$U[v$x+1]+=v$a;return v$U},v$$.create=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){void 0===v$p&&(v$p=0),void 0===v$Q&&(v$Q=0),void 0===v$V&&(v$V=0),void 0===v$y&&(v$y=0);var v$R=v$n instanceof laya.resource.Texture,v$X=v$R?v$n.uv:v$$.DEF_UV,v$z=v$R?v$n.bitmap:v$n,v$i=v$u.isAtlas(v$z);if(v$i){var v$q=v$z._atlaser,v$E=v$n._atlasID;if(-1==v$E)throw new Error("create texture error");v$z=v$q._inAtlasTextureBitmapValue[v$E],v$X=v$q._inAtlasTextureOriUVValue[v$E]}var v$m=new v$$(v$z,null);v$z.width&&v$a+v$x>v$z.width&&(v$x=v$z.width-v$a),v$z.height&&v$U+v$D>v$z.height&&(v$D=v$z.height-v$U),v$m.width=v$x,v$m.height=v$D,v$m.offsetX=v$p,v$m.offsetY=v$Q,v$m.sourceWidth=v$V||v$x,v$m.sourceHeight=v$y||v$D;var v$b=1/v$z.width,v$P=1/v$z.height;v$a*=v$b,v$U*=v$P,v$x*=v$b,v$D*=v$P;var v$A=v$m.uv[0],v$T=v$m.uv[1],v$K=v$m.uv[4],v$Y=v$m.uv[5],v$W=v$K-v$A,v$k=v$Y-v$T,v$N=v$$.moveUV(v$X[0],v$X[1],[v$a,v$U,v$a+v$x,v$U,v$a+v$x,v$U+v$D,v$a,v$U+v$D]);v$m.uv=[v$A+v$N[0]*v$W,v$T+v$N[1]*v$k,v$K-(1-v$N[2])*v$W,v$T+v$N[3]*v$k,v$K-(1-v$N[4])*v$W,v$Y-(1-v$N[5])*v$k,v$A+v$N[6]*v$W,v$Y-(1-v$N[7])*v$k],v$i&&v$m.addTextureToAtlas();var v$_=v$z.scaleRate;return v$_&&1!=v$_?(v$m.sourceWidth/=v$_,v$m.sourceHeight/=v$_,v$m.width/=v$_,v$m.height/=v$_,v$m.scaleRate=v$_,v$m.offsetX/=v$_,v$m.offsetY/=v$_):v$m.scaleRate=1,v$m},v$$.createFromTexture=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$n.scaleRate;1!=v$p&&(v$a*=v$p,v$U*=v$p,v$x*=v$p,v$D*=v$p);var v$Q=v$_.TEMP.setTo(v$a-v$n.offsetX,v$U-v$n.offsetY,v$x,v$D),v$V=v$Q.intersection(v$$._rect1.setTo(0,0,v$n.width,v$n.height),v$$._rect2);if(!v$V)return null;var v$y=v$$.create(v$n,v$V.x,v$V.y,v$V.width,v$V.height,v$V.x-v$Q.x,v$V.y-v$Q.y,v$x,v$D);if(v$y.bitmap&&v$y.bitmap._removeReference)return v$y.bitmap._removeReference(),v$y;var v$R="bitmap:"+(v$y.bitmap?v$y.bitmap.constructor?v$y.bitmap.constructor.name:v$y.bitmap.__className:"")+", url:"+(v$n.url+" | "+(v$y.bitmap?v$y.bitmap.url:v$n.url))+", x="+v$a+",y="+v$U+",width="+v$x+",height="+v$D+", result="+(v$V?v$V.x+","+v$V.y+","+v$V.width+","+v$V.height:"null")+", rect="+v$Q.x+","+v$Q.y+","+v$Q.width+","+v$Q.height;throw new Error("报错：bitmap._removeReference is not a function  "+v$R)},v$$.DEF_UV=[0,0,1,0,1,1,0,1],v$$.INV_UV=[0,1,1,1,1,0,0,0],v$$._rect1=new v$_,v$$._rect2=new v$_,v$$}(),v$n=function(v$n){var v$V;function v$p(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,v$p.__super.call(this)}v$X(v$p,"laya.utils.TimeLine",v$R);var v$a=v$p.prototype;return v$a.to=function(v$n,v$a,v$U,v$x,v$D){return void 0===v$D&&(v$D=0),this._create(v$n,v$a,v$U,v$x,v$D,!0)},v$a.from=function(v$n,v$a,v$U,v$x,v$D){return void 0===v$D&&(v$D=0),this._create(v$n,v$a,v$U,v$x,v$D,!1)},v$a._create=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=v$S.getItemByClass("tweenData",v$V);return v$Q.isTo=v$p,v$Q.type=0,v$Q.target=v$n,v$Q.duration=v$U,v$Q.data=v$a,v$Q.startTime=this._startTime+v$D,v$Q.endTime=v$Q.startTime+v$Q.duration,v$Q.ease=v$x,this._startTime=Math.max(v$Q.endTime,this._startTime),this._tweenDataList.push(v$Q),this._startTimeSort=!0,this._endTimeSort=!0,this},v$a.addLabel=function(v$n,v$a){var v$U=v$S.getItemByClass("tweenData",v$V);return v$U.type=1,v$U.data=v$n,v$U.endTime=v$U.startTime=this._startTime+v$a,this._labelDic||(this._labelDic={}),this._labelDic[v$n]=v$U,this._tweenDataList.push(v$U),this},v$a.removeLabel=function(v$n){if(this._labelDic&&this._labelDic[v$n]){var v$a=this._labelDic[v$n];if(v$a){var v$U=this._tweenDataList.indexOf(v$a);-1<v$U&&this._tweenDataList.splice(v$U,1)}delete this._labelDic[v$n]}},v$a.gotoTime=function(v$n){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var v$a,v$U,v$x,v$D;for(var v$p in this._firstTweenDic)if(v$U=this._firstTweenDic[v$p])for(var v$Q in v$U)v$U.diyTarget.hasOwnProperty(v$Q)&&(v$U.diyTarget[v$Q]=v$U[v$Q]);for(v$p in this._tweenDic)(v$a=this._tweenDic[v$p]).clear(),delete this._tweenDic[v$p];if(this._index=0,this._gidIndex=0,this._currTime=v$n,this._lastTime=v$f.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=v$x=this._tweenDataList.concat(),v$x.sort(function(v$n,v$a){return v$n.endTime>v$a.endTime?1:v$n.endTime<v$a.endTime?-1:0})}else v$x=this._endTweenDataList;for(var v$V=0,v$y=v$x.length;v$V<v$y;v$V++)if(0==(v$D=v$x[v$V]).type){if(!(v$n>=v$D.endTime))break;this._index=Math.max(this._index,v$V+1);var v$R=v$D.data;if(v$D.isTo)for(var v$X in v$R)v$D.target[v$X]=v$R[v$X]}for(v$V=0,v$y=this._tweenDataList.length;v$V<v$y;v$V++)0==(v$D=this._tweenDataList[v$V]).type&&v$n>=v$D.startTime&&v$n<v$D.endTime&&(this._index=Math.max(this._index,v$V+1),this._gidIndex++,(v$a=v$S.getItemByClass("tween",v$C))._create(v$D.target,v$D.data,v$D.duration,v$D.ease,v$A.create(this,this._animComplete,[this._gidIndex]),0,!1,v$D.isTo,!0,!1),v$a.setStartTime(this._currTime-(v$n-v$D.startTime)),v$a._updateEase(this._currTime),v$a.gid=this._gidIndex,this._tweenDic[this._gidIndex]=v$a)}},v$a.gotoLabel=function(v$n){if(null!=this._labelDic){var v$a=this._labelDic[v$n];v$a&&this.gotoTime(v$a.startTime)}},v$a.pause=function(){v$k.timer.clear(this,this._update)},v$a.resume=function(){this.play(this._currTime,this._loopKey)},v$a.play=function(v$n,v$a){if(void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(v$n,v$a){return v$n.startTime>v$a.startTime?1:v$n.startTime<v$a.startTime?-1:0});for(var v$U=0,v$x=this._tweenDataList.length;v$U<v$x;v$U++){var v$D=this._tweenDataList[v$U];if(null!=v$D&&0==v$D.type){var v$p=v$D.target,v$Q=v$p.$_GID||(v$p.$_GID=v$t.getGID()),v$V=null;for(var v$y in null==this._firstTweenDic[v$Q]?((v$V={}).diyTarget=v$p,this._firstTweenDic[v$Q]=v$V):v$V=this._firstTweenDic[v$Q],v$D.data)null==v$V[v$y]&&(v$V[v$y]=v$p[v$y])}}}"string"==typeof v$n?this.gotoLabel(v$n):this.gotoTime(v$n),this._loopKey=v$a,this._lastTime=v$f.now(),v$k.timer.frameLoop(1,this,this._update)}},v$a._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var v$n in this._tweenDic)(v$a=this._tweenDic[v$n]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var v$a,v$U=v$f.now(),v$x=v$U-this._lastTime,v$D=this._currTime+=v$x*this.scale;for(v$n in this._lastTime=v$U,this._tweenDic)(v$a=this._tweenDic[v$n])._updateEase(v$D);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var v$p=this._tweenDataList[this._index];v$D>=v$p.startTime&&(this._index++,0==v$p.type?(this._gidIndex++,(v$a=v$S.getItemByClass("tween",v$C))._create(v$p.target,v$p.data,v$p.duration,v$p.ease,v$A.create(this,this._animComplete,[this._gidIndex]),0,!1,v$p.isTo,!0,!1),v$a.setStartTime(v$D),v$a.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=v$a)._updateEase(v$D)):this.event("label",v$p.data))}},v$a._animComplete=function(v$n){this._tweenDic[v$n]&&delete this._tweenDic[v$n]},v$a._complete=function(){this.event("complete")},v$a.reset=function(){var v$n;if(this._labelDic)for(v$n in this._labelDic)delete this._labelDic[v$n];for(v$n in this._tweenDic)this._tweenDic[v$n].clear(),delete this._tweenDic[v$n];for(v$n in this._firstTweenDic)delete this._firstTweenDic[v$n];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var v$a,v$U=0;for(v$a=this._tweenDataList.length,v$U=0;v$U<v$a;v$U++)this._tweenDataList[v$U]&&this._tweenDataList[v$U].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,v$k.timer.clear(this,this._update)},v$a.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},v$E(0,v$a,"index",function(){return this._frameIndex},function(v$n){this._frameIndex=v$n,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),v$E(0,v$a,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),v$p.to=function(v$n,v$a,v$U,v$x,v$D){return void 0===v$D&&(v$D=0),(new v$p).to(v$n,v$a,v$U,v$x,v$D)},v$p.from=function(v$n,v$a,v$U,v$x,v$D){return void 0===v$D&&(v$D=0),(new v$p).from(v$n,v$a,v$U,v$x,v$D)},v$p.__init$=function(){v$V=function(){function v$n(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return v$X(v$n,""),v$n.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,v$S.recover("tweenData",this)},v$n}()},v$p}(),v$zn=function(v$D){function v$U(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,v$U.__super.call(this),this._style=v$V.EMPTY}v$X(v$U,"laya.display.Sprite",v$D);var v$n=v$U.prototype;return v$k.imps(v$n,{"laya.display.ILayout":!0}),v$n.createConchModel=function(){return new ConchNode},v$n.destroy=function(v$n){if(void 0===v$n&&(v$n=!0),this._releaseMem(),!this._destroyed){this.filters=null;var v$a=this.mask;v$a&&(this.mask=null,v$a.destroy(v$n))}v$D.prototype.destroy.call(this,v$n),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},v$n.updateZOrder=function(){v$t.updateOrder(this._childs)&&this.repaint()},v$n.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},v$n.setBounds=function(v$n){this._set$P("uBounds",v$n)},v$n.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new v$_),v$_._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},v$n.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new v$_),v$_._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},v$n._boundPointsToParent=function(v$n){void 0===v$n&&(v$n=!1);var v$a=0,v$U=0;this._style&&(v$a=this._style._tf.translateX,v$U=this._style._tf.translateY,v$n=v$n||0!==this._style._tf.rotate,this._style.scrollRect&&(v$a+=this._style.scrollRect.x,v$U+=this._style.scrollRect.y));var v$x=this._getBoundPointsM(v$n);if(!v$x||v$x.length<1)return v$x;if(8!=v$x.length&&(v$x=v$n?v$Y.scanPList(v$x):v$_._getWrapRec(v$x,v$_.TEMP)._getBoundPoints()),!this.transform)return v$t.transPointList(v$x,this._x-v$a,this._y-v$U),v$x;var v$D=v$N.TEMP,v$p=0,v$Q=v$x.length;for(v$p=0;v$p<v$Q;v$p+=2)v$D.x=v$x[v$p],v$D.y=v$x[v$p+1],this.toParentPoint(v$D),v$x[v$p]=v$D.x,v$x[v$p+1]=v$D.y;return v$x},v$n.getGraphicBounds=function(v$n){return void 0===v$n&&(v$n=!1),this._graphics?this._graphics.getBounds(v$n):v$_.TEMP.setTo(0,0,0,0)},v$n._getBoundPointsM=function(v$n){if(void 0===v$n&&(v$n=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var v$a=v$t.clearArray(this._$P.temBM),v$U=v$_.TEMP;return v$U.copyFrom(this.scrollRect),v$t.concatArray(v$a,v$U._getBoundPoints()),v$a}for(var v$x,v$D,v$p,v$Q=this._graphics?this._graphics.getBoundPoints():v$t.clearArray(this._$P.temBM),v$V=0,v$y=(v$p=this._childs).length;v$V<v$y;v$V++)(v$x=v$p[v$V])instanceof laya.display.Sprite&&1==v$x.visible&&(v$D=v$x._boundPointsToParent(v$n))&&(v$Q=v$Q?v$t.concatArray(v$Q,v$D):v$D);return v$Q},v$n.getStyle=function(){return this._style===v$V.EMPTY&&(this._style=new v$V),this._style},v$n.setStyle=function(v$n){this._style=v$n},v$n._adjustTransform=function(){this._tfChanged=!1;var v$n,v$a=this._style._tf,v$U=v$a.scaleX,v$x=v$a.scaleY;if(v$a.rotate||1!==v$U||1!==v$x||v$a.skewX||v$a.skewY){(v$n=this._transform||(this._transform=v$c.create())).bTransform=!0;var v$D=.0174532922222222*(v$a.rotate-v$a.skewX),v$p=.0174532922222222*(v$a.rotate+v$a.skewY),v$Q=Math.cos(v$p),v$V=Math.sin(v$p),v$y=Math.sin(v$D),v$R=Math.cos(v$D);return v$n.a=v$U*v$Q,v$n.b=v$U*v$V,v$n.c=-v$x*v$y,v$n.d=v$x*v$R,v$n.tx=v$n.ty=0,v$n}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,v$n},v$n.pos=function(v$n,v$a,v$U){if(void 0===v$U&&(v$U=!1),this._x!==v$n||this._y!==v$a){if(this.destroyed)return this;if(v$U){this._x=v$n,this._y=v$a,this.conchModel&&this.conchModel.pos(this._x,this._y);var v$x=this._parent;v$x&&0===v$x._repaint&&(v$x._repaint=1,v$x.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=v$n,this.y=v$a}return this},v$n.pivot=function(v$n,v$a){return this.pivotX=v$n,this.pivotY=v$a,this},v$n.size=function(v$n,v$a){return this.width=v$n,this.height=v$a,this},v$n.scale=function(v$n,v$a,v$U){void 0===v$U&&(v$U=!1);var v$x=this.getStyle(),v$D=v$x._tf;if(v$D.scaleX!=v$n||v$D.scaleY!=v$a){if(this.destroyed)return this;if(v$U){v$x.setScale(v$n,v$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(v$n,v$a),this._renderType|=4;var v$p=this._parent;v$p&&0===v$p._repaint&&(v$p._repaint=1,v$p.parentRepaint())}else this.scaleX=v$n,this.scaleY=v$a}return this},v$n.skew=function(v$n,v$a){return this.skewX=v$n,this.skewY=v$a,this},v$n.render=function(v$n,v$a,v$U){v$w.spriteCount++,v$l.renders[this._renderType]._fun(this,v$n,v$a+this._x,v$U+this._y),this._repaint=0},v$n.drawToCanvas=function(v$n,v$a,v$U,v$x){if(v$I.isConchNode){var v$D=v$Tn.create("2D");return new v$v(v$n,v$a,v$D).ctx.setCanvasType(1),this.conchModel.drawToCanvas(v$D.source,v$U,v$x),v$D}return v$u.drawToCanvas(this,this._renderType,v$n,v$a,v$U,v$x)},v$n.customRender=function(v$n,v$a,v$U){this._renderType|=1024},v$n._applyFilters=function(){var v$n;if(!v$I.isWebGL&&((v$n=this._$P.filters)&&!(v$n.length<1)))for(var v$a=0,v$U=v$n.length;v$a<v$U;v$a++)v$n[v$a].action.apply(this._$P.cacheCanvas)},v$n._isHaveGlowFilter=function(){var v$n,v$a=0;if(this.filters)for(v$a=0;v$a<this.filters.length;v$a++)if(8==this.filters[v$a].type)return!0;for(v$a=0,v$n=this._childs.length;v$a<v$n;v$a++)if(this._childs[v$a]._isHaveGlowFilter())return!0;return!1},v$n.localToGlobal=function(v$n,v$a){void 0===v$a&&(v$a=!1),!0===v$a&&(v$n=new v$N(v$n.x,v$n.y));for(var v$U=this;v$U&&v$U!=v$k.stage;)v$n=v$U.toParentPoint(v$n),v$U=v$U.parent;return v$n},v$n.globalToLocal=function(v$n,v$a){void 0===v$a&&(v$a=!1),v$a&&(v$n=new v$N(v$n.x,v$n.y));for(var v$U=this,v$x=[];v$U&&v$U!=v$k.stage;)v$x.push(v$U),v$U=v$U.parent;for(var v$D=v$x.length-1;0<=v$D;)v$n=(v$U=v$x[v$D]).fromParentPoint(v$n),v$D--;return v$n},v$n.toParentPoint=function(v$n){if(!v$n)return v$n;v$n.x-=this.pivotX,v$n.y-=this.pivotY,this.transform&&this._transform.transformPoint(v$n),v$n.x+=this._x,v$n.y+=this._y;var v$a=this._style.scrollRect;return v$a&&(v$n.x-=v$a.x,v$n.y-=v$a.y),v$n},v$n.fromParentPoint=function(v$n){if(!v$n)return v$n;v$n.x-=this._x,v$n.y-=this._y;var v$a=this._style.scrollRect;return v$a&&(v$n.x+=v$a.x,v$n.y+=v$a.y),this.transform&&this._transform.invertTransformPoint(v$n),v$n.x+=this.pivotX,v$n.y+=this.pivotY,v$n},v$n.on=function(v$n,v$a,v$U,v$x){return 1!==this._mouseEnableState&&this.isMouseEvent(v$n)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(v$n,v$a,v$U,v$x,!1)):v$D.prototype.on.call(this,v$n,v$a,v$U,v$x)},v$n.once=function(v$n,v$a,v$U,v$x){return 1!==this._mouseEnableState&&this.isMouseEvent(v$n)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(v$n,v$a,v$U,v$x,!0)):v$D.prototype.once.call(this,v$n,v$a,v$U,v$x)},v$n._$2__onDisplay=function(){if(1!==this._mouseEnableState){var v$n=this;for(v$n=v$n.parent;v$n&&1!==v$n._mouseEnableState&&!v$n._getBit(2);)v$n.mouseEnabled=!0,v$n._setBit(2,!0),v$n=v$n.parent}},v$n.loadImage=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=this;return void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0),this.graphics.loadImage(v$n,v$a,v$U,v$x,v$D,function(v$n){v$Q.destroyed||(v$Q.size(v$a+(v$x||v$n.width),v$U+(v$D||v$n.height)),v$Q.repaint(),v$p&&v$p.runWith(v$n))}),this},v$n.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},v$n._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},v$n._childChanged=function(v$n){this._childs.length?this._renderType|=2048:this._renderType&=-2049,v$n&&this._get$P("hasZorder")&&v$k.timer.callLater(this,this.updateZOrder),this.repaint()},v$n.parentRepaint=function(){var v$n=this._parent;v$n&&0===v$n._repaint&&(v$n._repaint=1,v$n.parentRepaint())},v$n.startDrag=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){void 0===v$a&&(v$a=!1),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=300),void 0===v$p&&(v$p=!1),void 0===v$Q&&(v$Q=.92),this._$P.dragging||this._set$P("dragging",new v$O),this._$P.dragging.start(this,v$n,v$a,v$U,v$x,v$D,v$p,v$Q)},v$n.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},v$n._releaseMem=function(){if(this._$P){var v$n=this._$P.cacheCanvas;v$n&&v$n.ctx&&(v$S.recover("RenderContext",v$n.ctx),v$n.ctx.canvas.size(0,0),v$n.ctx=null);var v$a=this._$P._filterCache;v$a&&(v$a.destroy(),v$a.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},v$n._setDisplay=function(v$n){v$n||this._releaseMem(),v$D.prototype._setDisplay.call(this,v$n)},v$n.hitTestPoint=function(v$n,v$a){var v$U=this.globalToLocal(v$N.TEMP.setTo(v$n,v$a));return v$n=v$U.x,v$a=v$U.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?v$_.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(v$n,v$a)},v$n.getMousePoint=function(){return this.globalToLocal(v$N.TEMP.setTo(v$k.stage.mouseX,v$k.stage.mouseY))},v$n._getWords=function(){return null},v$n._addChildsToLayout=function(v$n){var v$a=this._getWords();if(null==v$a&&0==this._childs.length)return!1;if(v$a)for(var v$U=0,v$x=v$a.length;v$U<v$x;v$U++)v$n.push(v$a[v$U]);v$U=0;for(var v$D=this._childs.length;v$U<v$D;++v$U){var v$p=this._childs[v$U];v$p._style._enableLayout()&&v$p._addToLayout(v$n)}return!0},v$n._addToLayout=function(v$n){this._style.absolute||(this._style.block?v$n.push(this):this._addChildsToLayout(v$n)&&(this.x=this.y=0))},v$n._isChar=function(){return!1},v$n._getCSSStyle=function(){return this._style.getCSSStyle()},v$n._setAttributes=function(v$n,v$a){switch(v$n){case"x":this.x=parseFloat(v$a);break;case"y":this.y=parseFloat(v$a);break;case"width":this.width=parseFloat(v$a);break;case"height":this.height=parseFloat(v$a);break;default:this[v$n]=v$a}},v$n._layoutLater=function(){this.parent&&this.parent._layoutLater()},v$E(0,v$n,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(v$n){this._optimizeScrollRect!=v$n&&(this._optimizeScrollRect=v$n,this.conchModel&&this.conchModel.optimizeScrollRect(v$n))}),v$E(0,v$n,"customRenderEnable",null,function(v$n){if(v$n&&(this._renderType|=1024,v$I.isConchNode)){v$U.CustomList.push(this);var v$a=new v$Tn("2d");v$a._setContext(new CanvasRenderingContext2D),this.customContext=new v$v(0,0,v$a),v$a.context.setCanvasType&&v$a.context.setCanvasType(2),this.conchModel.custom(v$a.context)}}),v$E(0,v$n,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(v$n){this.cacheAs=v$n?this._$P.hasFilter?"none":"normal":"none"}),v$E(0,v$n,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(v$n){var v$a=this._$P.cacheCanvas;if(v$n!==(v$a?v$a.type:"none")){if("none"!==v$n)this._getBit(1)||this._setUpNoticeType(1),v$a||(v$a=this._set$P("cacheCanvas",v$S.getItemByClass("cacheCanvas",Object))),v$a.type=v$n,v$a.reCache=!0,this._renderType|=16,"bitmap"==v$n&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(v$a){var v$U=v$a;v$U&&v$U.ctx&&(v$S.recover("RenderContext",v$U.ctx),v$U.ctx.canvas.size(0,0),v$U.ctx=null),v$S.recover("cacheCanvas",v$a)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),v$E(0,v$n,"zOrder",function(){return this._zOrder},function(v$n){this._zOrder!=v$n&&(this._zOrder=v$n,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(v$n),this._parent&&(v$n&&this._parent._set$P("hasZorder",!0),v$k.timer.callLater(this._parent,this.updateZOrder)))}),v$E(0,v$n,"rotation",function(){return this._style._tf.rotate},function(v$n){var v$a=this.getStyle();if(v$a._tf.rotate!==v$n){v$a.setRotate(v$n),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(v$n),this._renderType|=4;var v$U=this._parent;v$U&&0===v$U._repaint&&(v$U._repaint=1,v$U.parentRepaint())}}),v$E(0,v$n,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(v$n){this._width!==v$n&&(this._width=v$n,this.conchModel&&this.conchModel.size(v$n,this._height),this.repaint())}),v$E(0,v$n,"x",function(){return this._x},function(v$n){if(this._x!==v$n){if(this.destroyed)return;this._x=v$n,this.conchModel&&this.conchModel.pos(v$n,this._y);var v$a=this._parent;v$a&&0===v$a._repaint&&(v$a._repaint=1,v$a.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),v$E(0,v$n,"globalScaleY",function(){for(var v$n=1,v$a=this;v$a&&v$a!==v$k.stage;)v$n*=v$a.scaleY,v$a=v$a.parent;return v$n}),v$E(0,v$n,"hitArea",function(){return this._$P.hitArea},function(v$n){this._set$P("hitArea",v$n)}),v$E(0,v$n,"staticCache",function(){return this._$P.staticCache},function(v$n){this._set$P("staticCache",v$n),v$n||this.reCache()}),v$E(0,v$n,"texture",function(){return this._texture},function(v$n){this._texture!=v$n&&(this._texture=v$n,this.graphics.cleanByTexture(v$n,0,0))}),v$E(0,v$n,"y",function(){return this._y},function(v$n){if(this._y!==v$n){if(this.destroyed)return;this._y=v$n,this.conchModel&&this.conchModel.pos(this._x,v$n);var v$a=this._parent;v$a&&0===v$a._repaint&&(v$a._repaint=1,v$a.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),v$E(0,v$n,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(v$n){this._height!==v$n&&(this._height=v$n,this.conchModel&&this.conchModel.size(this._width,v$n),this.repaint())}),v$E(0,v$n,"blendMode",function(){return this._style.blendMode},function(v$n){this.getStyle().blendMode=v$n,this.conchModel&&this.conchModel.blendMode(v$n),v$n&&"source-over"!=v$n?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),v$E(0,v$n,"scaleX",function(){return this._style._tf.scaleX},function(v$n){var v$a=this.getStyle();if(v$a._tf.scaleX!==v$n){v$a.setScaleX(v$n),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(v$n,v$a._tf.scaleY),this._renderType|=4;var v$U=this._parent;v$U&&0===v$U._repaint&&(v$U._repaint=1,v$U.parentRepaint())}}),v$E(0,v$n,"scaleY",function(){return this._style._tf.scaleY},function(v$n){var v$a=this.getStyle();if(v$a._tf.scaleY!==v$n){v$a.setScaleY(v$n),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(v$a._tf.scaleX,v$n),this._renderType|=4;var v$U=this._parent;v$U&&0===v$U._repaint&&(v$U._repaint=1,v$U.parentRepaint())}}),v$E(0,v$n,"stage",function(){return v$k.stage}),v$E(0,v$n,"skewX",function(){return this._style._tf.skewX},function(v$n){var v$a=this.getStyle();if(v$a._tf.skewX!==v$n){v$a.setSkewX(v$n),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(v$n,v$a._tf.skewY),this._renderType|=4;var v$U=this._parent;v$U&&0===v$U._repaint&&(v$U._repaint=1,v$U.parentRepaint())}}),v$E(0,v$n,"scrollRect",function(){return this._style.scrollRect},function(v$n){this.getStyle().scrollRect=v$n,this.repaint(),v$n?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(v$n.x,v$n.y,v$n.width,v$n.height)):(this._renderType&=-129,this.conchModel&&(v$U.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),v$E(0,v$n,"skewY",function(){return this._style._tf.skewY},function(v$n){var v$a=this.getStyle();if(v$a._tf.skewY!==v$n){v$a.setSkewY(v$n),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(v$a._tf.skewX,v$n),this._renderType|=4;var v$U=this._parent;v$U&&0===v$U._repaint&&(v$U._repaint=1,v$U.parentRepaint())}}),v$E(0,v$n,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(v$n){this._tfChanged=!1,(this._transform=v$n)&&(this._x=v$n.tx,this._y=v$n.ty,v$n.tx=v$n.ty=0,this.conchModel&&this.conchModel.transform(v$n.a,v$n.b,v$n.c,v$n.d,this._x,this._y)),v$n?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),v$E(0,v$n,"pivotX",function(){return this._style._tf.translateX},function(v$n){this.getStyle().setTranslateX(v$n),this.conchModel&&this.conchModel.pivot(v$n,this._style._tf.translateY),this.repaint()}),v$E(0,v$n,"pivotY",function(){return this._style._tf.translateY},function(v$n){this.getStyle().setTranslateY(v$n),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,v$n),this.repaint()}),v$E(0,v$n,"alpha",function(){return this._style.alpha},function(v$n){this._style&&this._style.alpha!==v$n&&(v$n=v$n<0?0:1<v$n?1:v$n,this.getStyle().alpha=v$n,this.conchModel&&this.conchModel.alpha(v$n),1!==v$n?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),v$E(0,v$n,"visible",function(){return this._style.visible},function(v$n){this._style&&this._style.visible!==v$n&&(this.getStyle().visible=v$n,this.conchModel&&this.conchModel.visible(v$n),this.parentRepaint())}),v$E(0,v$n,"graphics",function(){return this._graphics||(this.graphics=v$u.createGraphics())},function(v$n){this._graphics&&(this._graphics._sp=null),(this._graphics=v$n)?(this._renderType&=-2,this._renderType|=512,(v$n._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(v$U.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),v$E(0,v$n,"filters",function(){return this._$P.filters},function(v$n){v$n&&0===v$n.length&&(v$n=null),this._$P.filters!=v$n&&(this._set$P("filters",v$n?v$n.slice():null),v$I.isConchApp&&(this.conchModel&&(v$U.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),v$I.isWebGL&&(v$n&&v$n.length?this._renderType|=32:this._renderType&=-33),v$n&&0<v$n.length?(this._getBit(1)||this._setUpNoticeType(1),v$I.isWebGL&&1==v$n.length&&v$n[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(v$I.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),v$E(0,v$n,"parent",v$D.prototype._$get_parent,function(v$n){v$k.superSet(v$nn,this,"parent",v$n),v$n&&this._getBit(2)&&this._$2__onDisplay()}),v$E(0,v$n,"mask",function(){return this._$P._mask},function(v$n){v$n&&this.mask&&this.mask._$P.maskParent||(v$n?(this.cacheAs="bitmap",this._set$P("_mask",v$n),v$n._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",v$n),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(v$n?v$n.conchModel:null),this._renderType|=64,this.parentRepaint())}),v$E(0,v$n,"mouseEnabled",function(){return 1<this._mouseEnableState},function(v$n){this._mouseEnableState=v$n?2:1}),v$E(0,v$n,"globalScaleX",function(){for(var v$n=1,v$a=this;v$a&&v$a!==v$k.stage;)v$n*=v$a.scaleX,v$a=v$a.parent;return v$n}),v$E(0,v$n,"mouseX",function(){return this.getMousePoint().x}),v$E(0,v$n,"mouseY",function(){return this.getMousePoint().y}),v$U.fromImage=function(v$n){return(new v$U).loadImage(v$n)},v$U._cachePool=[],v$U.CustomList=[],v$y(v$U,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=v$Q.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),v$U}(v$nn),v$in=function(v$n){function v$a(v$n){this._audio=null,this._onEnd=null,this._resumePlay=null,v$a.__super.call(this),this._onEnd=v$t.bind(this.__onEnd,this),this._resumePlay=v$t.bind(this.__resumePlay,this),v$n.addEventListener("ended",this._onEnd),this._audio=v$n}v$X(v$a,"laya.media.h5audio.AudioSoundChannel",v$xn);var v$U=v$a.prototype;return v$U.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(v$k.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},v$U.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,v$f.container.appendChild(this._audio),this._audio.play()}catch(v$n){this.event("error")}},v$U.play=function(v$n){this.isStopped=!1;try{this._audio.playbackRate=v$Z.playbackRate,this._audio.currentTime=this.startTime}catch(v$n){return void this._audio.addEventListener("canplay",this._resumePlay)}v$Z.addChannel(this),v$f.container.appendChild(this._audio),!v$n&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},v$U.stop=function(){this.isStopped=!0,v$Z.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&v$I.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),v$f.onIE||this._audio!=v$Un._musicAudio&&v$S.recover("audio:"+this.url,this._audio),v$f.removeElement(this._audio),this._audio=null)},v$U.pause=function(){this.isStopped=!0,v$Z.removeChannel(this),"pause"in this._audio&&this._audio.pause()},v$U.resume=function(){this._audio&&(this.isStopped=!1,v$Z.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},v$E(0,v$U,"position",function(){return this._audio?this._audio.currentTime:0}),v$E(0,v$U,"duration",function(){return this._audio?this._audio.duration:0}),v$E(0,v$U,"volume",function(){return this._audio?this._audio.volume:1},function(v$n){this._audio&&(this._audio.volume=v$n)}),v$a}(),v$qn=function(v$n){function v$a(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=v$pn.ctx,v$a.__super.call(this),this._onPlayEnd=v$t.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}v$X(v$a,"laya.media.webaudio.WebAudioSoundChannel",v$xn);var v$U=v$a.prototype;return v$U.play=function(v$n){if(v$Z.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var v$a=this.context,v$U=this.gain,v$x=v$a.createBufferSource();(this.bufferSource=v$x).buffer=this.audioBuffer,v$x.connect(v$U),v$U&&v$U.disconnect(),v$U.connect(v$a.destination),v$x.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=v$f.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(v$x.loop=!0),v$x.playbackRate.setTargetAtTime?v$x.playbackRate.setTargetAtTime(v$Z.playbackRate,this.context.currentTime,.1):v$x.playbackRate.value=v$Z.playbackRate,v$x.start(0,this.startTime),!v$n&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},v$U.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(v$k.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},v$U._clearBufferSource=function(){if(this.bufferSource){var v$n=this.bufferSource;v$n.stop?v$n.stop(0):v$n.noteOff(0),v$n.disconnect(0),v$n.onended=null,v$a._tryCleanFailed||this._tryClearBuffer(v$n),this.bufferSource=null}},v$U._tryClearBuffer=function(v$n){try{v$n.buffer=null}catch(v$n){v$a._tryCleanFailed=!0}},v$U.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,v$Z.removeChannel(this),this.startHandler=null,this.completeHandler=null},v$U.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,v$Z.removeChannel(this)},v$U.resume=function(){this.startTime=this._pauseTime,this.play(!1)},v$E(0,v$U,"position",function(){return this.bufferSource?(v$f.now()-this._startTime)/1e3+this.startTime:0}),v$E(0,v$U,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),v$E(0,v$U,"volume",function(){return this._volume},function(v$n){this.isStopped||(this._volume=v$n,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(v$n,this.context.currentTime,.1):this.gain.gain.value=v$n)}),v$a._tryCleanFailed=!1,v$a}(),v$En=function(v$n){function v$a(){v$a.__super.call(this),this._w=0,this._h=0}v$X(v$a,"laya.resource.Bitmap",v$Rn);var v$U=v$a.prototype;return v$E(0,v$U,"width",function(){return this._w}),v$E(0,v$U,"height",function(){return this._h}),v$E(0,v$U,"source",function(){return this._source}),v$a}(),v$mn=function(v$a){function v$n(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,v$n.__super.call(this),this._interval=v$x.animationInterval,this._setUpNoticeType(1)}v$X(v$n,"laya.display.AnimationPlayerBase",v$a);var v$U=v$n.prototype;return v$U.play=function(v$n,v$a,v$U,v$x){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=!0),void 0===v$U&&(v$U=""),void 0===v$x&&(v$x=!0),this._isPlaying=!0,this.index="string"==typeof v$n?this._getFrameByLabel(v$n):v$n,this.loop=v$a,this._actionName=v$U,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},v$U._getFrameByLabel=function(v$n){var v$a=0;for(v$a=0;v$a<this._count;v$a++)if(this._labels[v$a]&&0<=this._labels[v$a].indexOf(v$n))return v$a;return 0},v$U._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},v$U._setControlNode=function(v$n){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=v$n)&&v$n!=this&&(v$n.on("display",this,this._checkResumePlaying),v$n.on("undisplay",this,this._checkResumePlaying))},v$U._setDisplay=function(v$n){v$a.prototype._setDisplay.call(this,v$n),this._checkResumePlaying()},v$U._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},v$U.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},v$U.addLabel=function(v$n,v$a){this._labels||(this._labels={}),this._labels[v$a]||(this._labels[v$a]=[]),this._labels[v$a].push(v$n)},v$U.removeLabel=function(v$n){if(v$n){if(this._labels)for(var v$a in this._labels)this._removeLabelFromLabelList(this._labels[v$a],v$n)}else this._labels=null},v$U._removeLabelFromLabelList=function(v$n,v$a){if(v$n)for(var v$U=v$n.length-1;0<=v$U;v$U--)v$n[v$U]==v$a&&v$n.splice(v$U,1)},v$U.gotoAndStop=function(v$n){this.index="string"==typeof v$n?this._getFrameByLabel(v$n):v$n,this.stop()},v$U._displayToIndex=function(v$n){},v$U.clear=function(){this.stop(),this._labels=null},v$E(0,v$U,"interval",function(){return this._interval},function(v$n){this._interval!=v$n&&(this._frameRateChanged=!0,this._interval=v$n,this._isPlaying&&0<v$n&&this.timerLoop(v$n,this,this._frameLoop,null,!0,!0))}),v$E(0,v$U,"isPlaying",function(){return this._isPlaying}),v$E(0,v$U,"index",function(){return this._index},function(v$n){if(this._index=v$n,this._displayToIndex(v$n),this._labels&&this._labels[v$n])for(var v$a=this._labels[v$n],v$U=0,v$x=v$a.length;v$U<v$x;v$U++)this.event("label",v$a[v$U])}),v$E(0,v$U,"count",function(){return this._count}),v$n.WRAP_POSITIVE=0,v$n.WRAP_REVERSE=1,v$n.WRAP_PINGPONG=2,v$n}(v$zn),v$bn=function(v$a){function v$q(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,v$q.__super.call(this),this.overflow=v$q.VISIBLE,this._style=new v$an(this),this._style.wordWrap=!1}v$X(v$q,"laya.display.Text",v$a);var v$n=v$q.prototype;return v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._lines=null,this._words&&(this._words.length=0,this._words=null)},v$n._getBoundPointsM=function(v$n){void 0===v$n&&(v$n=!1);var v$a=v$_.TEMP;return v$a.setTo(0,0,this.width,this.height),v$a._getBoundPoints()},v$n.getGraphicBounds=function(v$n){void 0===v$n&&(v$n=!1);var v$a=v$_.TEMP;return v$a.setTo(0,0,this.width,this.height),v$a},v$n._getCSSStyle=function(){return this._style},v$n.lang=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X){if(v$n=v$q.langPacks&&v$q.langPacks[v$n]?v$q.langPacks[v$n]:v$n,arguments.length<2)this._text=v$n;else{for(var v$z=0,v$i=arguments.length;v$z<v$i;v$z++)v$n=v$n.replace("{"+v$z+"}",arguments[v$z+1]);this._text=v$n}},v$n._isPassWordMode=function(){var v$n=this._style.password;return"prompt"in this&&this.prompt==this._text&&(v$n=!1),v$n},v$n._getPassWordTxt=function(v$n){var v$a;v$a="";for(var v$U=v$n.length;0<v$U;v$U--)v$a+="●";return v$a},v$n.renderText=function(v$n,v$a){var v$U=this.graphics;v$U.clear(!0);var v$x=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(v$f.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);v$f.context.font=v$x;var v$D=this.padding,v$p=v$D[3],v$Q="left",v$V=this._lines,v$y=this.leading+this._charSize.height,v$R=this._currBitmapFont;v$R&&(v$y=this.leading+v$R.getMaxHeight());var v$X=v$D[0];if(!v$R&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(v$Q="right",v$p=this._width-v$D[1]):"center"==this.align&&(v$Q="center",v$p=.5*this._width+v$D[3]-v$D[1])),0<this._height){var v$z=this._textHeight>this._height?"top":this.valign;"middle"===v$z?v$X=.5*(this._height-v$a*v$y)+v$D[0]-v$D[2]:"bottom"===v$z&&(v$X=this._height-v$a*v$y-v$D[2])}var v$i=this._style;if(v$R&&v$R.autoScaleSize)var v$q=v$R.fontSize/this.fontSize;if(this._clipPoint)if(v$U.save(),v$R&&v$R.autoScaleSize){var v$E=0,v$m=0;v$E=this._width?this._width-v$D[3]-v$D[1]:this._textWidth,v$m=this._height?this._height-v$D[0]-v$D[2]:this._textHeight,v$E*=v$q,v$m*=v$q,v$U.clipRect(v$D[3],v$D[0],v$E,v$m)}else v$U.clipRect(v$D[3],v$D[0],this._width?this._width-v$D[3]-v$D[1]:this._textWidth,this._height?this._height-v$D[0]-v$D[2]:this._textHeight);var v$b=v$i.password;"prompt"in this&&this.prompt==this._text&&(v$b=!1);for(var v$P=0,v$A=0,v$T=Math.min(this._lines.length,v$a+v$n)||1,v$K=v$n;v$K<v$T;v$K++){var v$Y,v$W=v$V[v$K];if(v$b){var v$k=v$W.length;v$W="";for(var v$N=v$k;0<v$N;v$N--)v$W+="●"}if(v$P=v$p-(this._clipPoint?this._clipPoint.x:0),v$A=v$X+v$y*v$K-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(v$Q,v$P,v$A,v$K),v$R){var v$_=this.width;v$R.autoScaleSize&&(v$_=this.width*v$q),v$R.drawText(v$W,this,v$P,v$A,this.align,v$_)}else v$I.isWebGL?(this._words||(this._words=[]),(v$Y=this._words.length>v$K-v$n?this._words[v$K-v$n]:new v$e).setText(v$W)):v$Y=v$W,v$i.stroke?v$U.fillBorderText(v$Y,v$P,v$A,v$x,this.color,v$i.strokeColor,v$i.stroke,v$Q):v$U.fillText(v$Y,v$P,v$A,v$x,this.color,v$Q)}if(v$R&&v$R.autoScaleSize){var v$$=1/v$q;this.scale(v$$,v$$)}this._clipPoint&&v$U.restore(),this._startX=v$p,this._startY=v$X},v$n.drawUnderline=function(v$n,v$a,v$U,v$x){var v$D=this._lineWidths[v$x];switch(v$n){case"center":v$a-=v$D/2;break;case"right":v$a-=v$D}v$U+=this._charSize.height,this._graphics.drawLine(v$a,v$U,v$a+v$D,v$U,this.underlineColor||this.color,1)},v$n.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);v$f.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new v$N(0,0)):this._clipPoint=null;var v$n=this._lines.length;if(this.overflow!=v$q.VISIBLE){var v$a=this.overflow==v$q.HIDDEN?Math.floor:Math.ceil;v$n=Math.min(v$n,v$a((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var v$U=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(v$U,v$n),this.repaint()},v$n.evalTextSize=function(){var v$n,v$a=NaN;v$n=Math.max.apply(this,this._lineWidths),v$a=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],v$n==this._textWidth&&v$a==this._textHeight||(this._textWidth=v$n,this._textHeight=v$a,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},v$n.checkEnabledViewportOrNot=function(){return this.overflow==v$q.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},v$n.changeText=function(v$n){this._text!==v$n&&(this.lang(v$n+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},v$n.parseLines=function(v$n){var v$a=this.wordWrap||this.overflow==v$q.HIDDEN;if(v$a)var v$U=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var v$x=v$t.contextMeasureText(v$q._testWord);v$I.isConchApp&&0===v$x.width&&0===v$x.height&&(v$x=v$t.contextMeasureText("W")),this._charSize.width=v$x.width,this._charSize.height=v$x.height||this.fontSize}for(var v$D=v$n.replace(/\r\n/g,"\n").split("\n"),v$p=0,v$Q=v$D.length;v$p<v$Q;v$p++){var v$V=v$D[v$p];v$a?this.parseLine(v$V,v$U):(this._lineWidths.push(this.getTextWidth(v$V)),this._lines.push(v$V))}},v$n.parseLine=function(v$n,v$a){v$f.context;var v$U,v$x=this._lines,v$D=0,v$p=NaN,v$Q=NaN,v$V=0;if((v$p=this.getTextWidth(v$n))<=v$a)return v$x.push(v$n),void this._lineWidths.push(v$p);v$p=this._charSize.width,0==(v$D=Math.floor(v$a/v$p))&&(v$D=1),v$Q=v$p=this.getTextWidth(v$n.substring(0,v$D));for(var v$y=v$D,v$R=v$n.length;v$y<v$R;v$y++)if(v$a<(v$Q+=v$p=this.getTextWidth(v$n.charAt(v$y))))if(this.wordWrap){var v$X=v$n.substring(v$V,v$y);if(v$X.charCodeAt(v$X.length-1)<255?(v$U=/(?:\w|-)+$/.exec(v$X))&&(v$y=v$U.index+v$V,0==v$U.index?v$y+=v$X.length:v$X=v$n.substring(v$V,v$y)):v$q.RightToLeft&&(v$U=/([\u0600-\u06FF])+$/.exec(v$X))&&(v$y=v$U.index+v$V,0==v$U.index?v$y+=v$X.length:v$X=v$n.substring(v$V,v$y)),v$x.push(v$X),this._lineWidths.push(v$Q-v$p),!((v$V=v$y)+v$D<v$R)){v$x.push(v$n.substring(v$V,v$R)),this._lineWidths.push(this.getTextWidth(v$x[v$x.length-1])),v$V=-1;break}v$y+=v$D,v$Q=v$p=this.getTextWidth(v$n.substring(v$V,v$y)),v$y--}else if(this.overflow==v$q.HIDDEN)return v$x.push(v$n.substring(0,v$y)),void this._lineWidths.push(this.getTextWidth(v$x[v$x.length-1]));this.wordWrap&&-1!=v$V&&(v$x.push(v$n.substring(v$V,v$R)),this._lineWidths.push(this.getTextWidth(v$x[v$x.length-1])))},v$n.getTextWidth=function(v$n){return this._currBitmapFont?this._currBitmapFont.getTextWidth(v$n):v$t.contextMeasureText(v$n).width},v$n.getWordWrapWidth=function(){var v$n=this.padding,v$a=NaN;return(v$a=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(v$a=this.wordWrap?100:v$f.width),v$a<=0&&(v$a=100),v$a-v$n[3]-v$n[1]},v$n.getCharPoint=function(v$n,v$a){this._isChanged&&v$k.timer.runCallLater(this,this.typeset);for(var v$U=0,v$x=this._lines,v$D=0,v$p=0,v$Q=v$x.length;v$p<v$Q;v$p++){if(v$n<(v$U+=v$x[v$p].length)){var v$V=v$p;break}v$D=v$U}var v$y=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;v$f.context.font=v$y;var v$R=this.getTextWidth(this._text.substring(v$D,v$n));return(v$a||new v$N).setTo(this._startX+v$R-(this._clipPoint?this._clipPoint.x:0),this._startY+v$V*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},v$E(0,v$n,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(v$n){v$n!=this._width&&(v$k.superSet(v$zn,this,"width",v$n),this.isChanged=!0)}),v$E(0,v$n,"textWidth",function(){return this._isChanged&&v$k.timer.runCallLater(this,this.typeset),this._textWidth}),v$E(0,v$n,"height",function(){return this._height?this._height:this.textHeight},function(v$n){v$n!=this._height&&(v$k.superSet(v$zn,this,"height",v$n),this.isChanged=!0)}),v$E(0,v$n,"textHeight",function(){return this._isChanged&&v$k.timer.runCallLater(this,this.typeset),this._textHeight}),v$E(0,v$n,"padding",function(){return this._getCSSStyle().padding},function(v$n){this._getCSSStyle().padding=v$n,this.isChanged=!0}),v$E(0,v$n,"bold",function(){return this._getCSSStyle().bold},function(v$n){this._getCSSStyle().bold=v$n,this.isChanged=!0}),v$E(0,v$n,"text",function(){return this._text||""},function(v$n){this._text!==v$n&&(this.lang(v$n+""),this.isChanged=!0,this.event("change"))}),v$E(0,v$n,"color",function(){return this._getCSSStyle().color},function(v$n){this._getCSSStyle().color!=v$n&&(this._getCSSStyle().color=v$n,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),v$E(0,v$n,"font",function(){return this._getCSSStyle().fontFamily},function(v$n){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),v$q._bitmapFonts&&v$q._bitmapFonts[v$n]&&(this._currBitmapFont=v$q._bitmapFonts[v$n]),this._getCSSStyle().fontFamily=v$n,this.isChanged=!0}),v$E(0,v$n,"fontSize",function(){return this._getCSSStyle().fontSize},function(v$n){this._getCSSStyle().fontSize=v$n,this.isChanged=!0}),v$E(0,v$n,"italic",function(){return this._getCSSStyle().italic},function(v$n){this._getCSSStyle().italic=v$n,this.isChanged=!0}),v$E(0,v$n,"align",function(){return this._getCSSStyle().align},function(v$n){this._getCSSStyle().align=v$n,this.isChanged=!0}),v$E(0,v$n,"valign",function(){return this._getCSSStyle().valign},function(v$n){this._getCSSStyle().valign=v$n,this.isChanged=!0}),v$E(0,v$n,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(v$n){this._getCSSStyle().wordWrap=v$n,this.isChanged=!0}),v$E(0,v$n,"leading",function(){return this._getCSSStyle().leading},function(v$n){this._getCSSStyle().leading=v$n,this.isChanged=!0}),v$E(0,v$n,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(v$n){this._getCSSStyle().backgroundColor=v$n,this.isChanged=!0}),v$E(0,v$n,"borderColor",function(){return this._getCSSStyle().borderColor},function(v$n){this._getCSSStyle().borderColor=v$n,this.isChanged=!0}),v$E(0,v$n,"stroke",function(){return this._getCSSStyle().stroke},function(v$n){this._getCSSStyle().stroke=v$n,this.isChanged=!0}),v$E(0,v$n,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(v$n){this._getCSSStyle().strokeColor=v$n,this.isChanged=!0}),v$E(0,v$n,"isChanged",null,function(v$n){this._isChanged!==v$n&&(this._isChanged=v$n)&&v$k.timer.callLater(this,this.typeset)}),v$E(0,v$n,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(v$n){if(!(this.overflow!=v$q.SCROLL||this.textWidth<this._width)&&this._clipPoint){v$n=v$n<this.padding[3]?this.padding[3]:v$n;var v$a=this._textWidth-this._width;v$n=v$a<v$n?v$a:v$n;var v$U=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=v$n,this.renderText(this._lastVisibleLineIndex,v$U)}}),v$E(0,v$n,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(v$n){if(!(this.overflow!=v$q.SCROLL||this.textHeight<this._height)&&this._clipPoint){v$n=v$n<this.padding[0]?this.padding[0]:v$n;var v$a=this._textHeight-this._height,v$U=(v$n=v$a<v$n?v$a:v$n)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=v$U;var v$x=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=v$n,this.renderText(v$U,v$x)}}),v$E(0,v$n,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),v$E(0,v$n,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),v$E(0,v$n,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),v$E(0,v$n,"underlineColor",function(){return this._underlineColor},function(v$n){this._underlineColor=v$n,this._isChanged=!0,this.typeset()}),v$q.registerBitmapFont=function(v$n,v$a){v$q._bitmapFonts||(v$q._bitmapFonts={}),v$q._bitmapFonts[v$n]=v$a},v$q.unregisterBitmapFont=function(v$n,v$a){if(void 0===v$a&&(v$a=!0),v$q._bitmapFonts&&v$q._bitmapFonts[v$n]){var v$U=v$q._bitmapFonts[v$n];v$a&&v$U.destroy(),delete v$q._bitmapFonts[v$n]}},v$q.setTextRightToLeft=function(){var v$n;(v$n=v$f.canvas.source.style).display="none",v$n.position="absolute",v$n.direction="rtl",v$I._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,v$f.document.body.appendChild(v$f.canvas.source)},v$q.supportFont=function(v$n){v$f.context.font="10px sans-serif";var v$a=v$t.contextMeasureText("abcji").width;v$f.context.font="10px "+v$n;var v$U=v$t.contextMeasureText("abcji").width;return console.log(v$a,v$U),v$a!==v$U},v$q._testWord="游",v$q.langPacks=null,v$q.VISIBLE="visible",v$q.SCROLL="scroll",v$q.HIDDEN="hidden",v$q.CharacterCache=!0,v$q.RightToLeft=!1,v$q._bitmapFonts=null,v$y(v$q,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),v$q}(v$zn),v$Pn=function(v$z){function v$Q(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",v$Q.__super.call(this),this.offset=new v$N,this._canvasTransform=new v$c,this._previousOrientation=v$f.window.orientation;var v$a=this;this.transform=v$c.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var v$n=v$f.window,v$U=this;v$n.addEventListener("focus",function(){v$a._isFocused=!0,v$U.event("focus"),v$U.event("focuschange")}),v$n.addEventListener("blur",function(){v$a._isFocused=!1,v$U.event("blur"),v$U.event("focuschange"),v$U._isInputting()&&(v$Yn.inputElement.target.focus=!1)});var v$x="visibilityState",v$D="visibilitychange",v$p=v$n.document;void 0!==v$p.hidden?(v$D="visibilitychange",v$x="visibilityState"):void 0!==v$p.mozHidden?(v$D="mozvisibilitychange",v$x="mozVisibilityState"):void 0!==v$p.msHidden?(v$D="msvisibilitychange",v$x="msVisibilityState"):void 0!==v$p.webkitHidden&&(v$D="webkitvisibilitychange",v$x="webkitVisibilityState"),v$n.document.addEventListener(v$D,function(){"hidden"==v$f.document[v$x]?v$U._setStageVisible(!1):v$U._setStageVisible(!0)}),v$n.document.addEventListener("qbrowserVisibilityChange",function(v$n){v$U._setStageVisible(!v$n.hidden)}),v$n.addEventListener("resize",function(){var v$n=v$f.window.orientation;null!=v$n&&v$n!=v$a._previousOrientation&&v$U._isInputting()&&(v$Yn.inputElement.target.focus=!1),v$a._previousOrientation=v$n,v$U._isInputting()||v$U._resetCanvas()}),v$n.addEventListener("orientationchange",function(v$n){v$U._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),v$f.onMobile&&this.on("mousedown",this,this._onmouseMove)}v$X(v$Q,"laya.display.Stage",v$z);var v$n=v$Q.prototype;return v$n._setStageVisible=function(v$n){this._isVisibility!=v$n&&(this._isVisibility=v$n,this._isVisibility||this._isInputting()&&(v$Yn.inputElement.target.focus=!1),this.event("visibilitychange"))},v$n._isInputting=function(){return v$f.onMobile&&v$Yn.isInputting},v$n._changeCanvasSize=function(){this.setScreenSize(v$f.clientWidth*v$f.pixelRatio,v$f.clientHeight*v$f.pixelRatio)},v$n._resetCanvas=function(){if(this.screenAdaptationEnabled){var v$n=v$I._mainCanvas;v$n.source.style;v$n.size(1,1),v$k.timer.once(100,this,this._changeCanvasSize)}},v$n.setScreenSize=function(v$n,v$a){var v$U=!1;if("none"!==this._screenMode&&(v$U=(v$n/v$a<1?"vertical":"horizontal")!==this._screenMode)){var v$x=v$a;v$a=v$n,v$n=v$x}this.canvasRotation=v$U;var v$D=v$I._mainCanvas,v$p=v$D.source.style,v$Q=this._canvasTransform.identity(),v$V=this._scaleMode,v$y=v$n/this.designWidth,v$R=v$a/this.designHeight,v$X=this.designWidth,v$z=this.designHeight,v$i=v$n,v$q=v$a,v$E=v$f.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,v$V){case"noscale":v$y=v$R=1,v$i=this.designWidth,v$q=this.designHeight;break;case"showall":v$y=v$R=Math.min(v$y,v$R),v$X=v$i=Math.round(this.designWidth*v$y),v$z=v$q=Math.round(this.designHeight*v$R);break;case"noborder":v$y=v$R=Math.max(v$y,v$R),v$i=Math.round(this.designWidth*v$y),v$q=Math.round(this.designHeight*v$R);break;case"full":v$y=v$R=1,this._width=v$X=v$n,this._height=v$z=v$a;break;case"fixedwidth":v$R=v$y,this._height=v$z=Math.round(v$a/v$y);break;case"fixedheight":v$y=v$R,this._width=v$X=Math.round(v$n/v$R);break;case"fixedauto":v$n/v$a<this.designWidth/this.designHeight?(v$R=v$y,this._height=v$z=Math.round(v$a/v$y)):(v$y=v$R,this._width=v$X=Math.round(v$n/v$R))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,v$X=v$X+1&2147483646,v$z=v$z+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),v$y*=this.scaleX,v$R*=this.scaleY,1===v$y&&1===v$R?this.transform.identity():(this.transform.a=this._formatData(v$y/(v$i/v$X)),this.transform.d=this._formatData(v$R/(v$q/v$z)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),v$D.size(v$X,v$z),v$u.changeWebGLSize(v$X,v$z),v$Q.scale(v$i/v$X/v$E,v$q/v$z/v$E),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(v$n-v$i)/v$E:this.offset.x=.5*(v$n-v$i)/v$E,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(v$a-v$q)/v$E:this.offset.y=.5*(v$a-v$q)/v$E,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),v$Q.translate(this.offset.x,this.offset.y),this.canvasDegree=0,v$U&&("horizontal"===this._screenMode?(v$Q.rotate(Math.PI/2),v$Q.translate(v$a/v$E,0),this.canvasDegree=90):(v$Q.rotate(-Math.PI/2),v$Q.translate(0,v$n/v$E),this.canvasDegree=-90)),v$Q.a=this._formatData(v$Q.a),v$Q.d=this._formatData(v$Q.d),v$Q.tx=this._formatData(v$Q.tx),v$Q.ty=this._formatData(v$Q.ty),v$p.transformOrigin=v$p.webkitTransformOrigin=v$p.msTransformOrigin=v$p.mozTransformOrigin=v$p.oTransformOrigin="0px 0px 0px",v$p.transform=v$p.webkitTransform=v$p.msTransform=v$p.mozTransform=v$p.oTransform="matrix("+v$Q.toString()+")",v$Q.translate(parseInt(v$p.left)||0,parseInt(v$p.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},v$n._formatData=function(v$n){return Math.abs(v$n)<1e-6?0:Math.abs(1-v$n)<.001?0<v$n?1:-1:v$n},v$n.getMousePoint=function(){return v$N.TEMP.setTo(this.mouseX,this.mouseY)},v$n.repaint=function(){this._repaint=1},v$n.parentRepaint=function(){},v$n._loop=function(){return this.render(v$I.context,0,0),!0},v$n._onmouseMove=function(v$n){this._mouseMoveTime=v$f.now()},v$n.getTimeFromFrameStart=function(){return v$f.now()-this._frameStartTime},v$n.render=function(v$n,v$a,v$U){if("sleep"===this._frameRate&&!v$I.isConchApp){var v$x=v$f.now();if(!(1e3<=v$x-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(v$w.loopCount++,v$m.instance.runEvent(),v$k.timer._update()));this._frameStartTime=v$x}if(this._renderCount++,v$I.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=v$f.now();var v$D="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),v$p=this._renderCount%2==0;if(v$w.renderSlow=!v$D,v$D||v$p||v$I.isConchApp){var v$Q;v$w.loopCount++,v$m.instance.runEvent(),v$k.timer._update(),v$u.update3DLoop();var v$V=0,v$y=0;if(v$I.isConchNode)for(v$V=0,v$y=this._scenes.length;v$V<v$y;v$V++)(v$Q=this._scenes[v$V])&&v$Q._updateSceneConch();else for(v$V=0,v$y=this._scenes.length;v$V<v$y;v$V++)(v$Q=this._scenes[v$V])&&v$Q._updateScene();if(v$I.isConchNode){var v$R=v$zn.CustomList;for(v$V=0,v$y=v$R.length;v$V<v$y;v$V++){var v$X=v$R[v$V];v$X.customRender(v$X.customContext,0,0)}return}}v$I.isConchNode||this.renderingEnabled&&(v$D||!v$p||v$I.isConchWebGL)&&(v$I.isWebGL?v$I.WebGL.mainContext&&!v$I.WebGL.mainContext.isContextLost()&&(v$n.clear(),v$z.prototype.render.call(this,v$n,v$a,v$U),v$w._show&&v$w._sp&&v$w._sp.render(v$n,v$a,v$U),v$u.clear(this._bgColor),v$u.beginFlush(),v$n.flush(),v$u.endFinish(),v$r.instance&&v$r.getInstance().endDispose()):(v$u.clear(this._bgColor),v$z.prototype.render.call(this,v$n,v$a,v$U),v$w._show&&v$w._sp&&v$w._sp.render(v$n,v$a,v$U)))}else this._renderCount%5==0&&(v$w.loopCount++,v$m.instance.runEvent(),v$k.timer._update())},v$n._requestFullscreen=function(){var v$n=v$f.document.documentElement;v$n.requestFullscreen?v$n.requestFullscreen():v$n.mozRequestFullScreen?v$n.mozRequestFullScreen():v$n.webkitRequestFullscreen?v$n.webkitRequestFullscreen():v$n.msRequestFullscreen&&v$n.msRequestFullscreen()},v$n._fullScreenChanged=function(){v$k.stage.event("fullscreenchange")},v$n.exitFullscreen=function(){var v$n=v$f.document;v$n.exitFullscreen?v$n.exitFullscreen():v$n.mozCancelFullScreen?v$n.mozCancelFullScreen():v$n.webkitExitFullscreen&&v$n.webkitExitFullscreen()},v$E(0,v$n,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),v$E(0,v$n,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),v$E(0,v$n,"frameRate",function(){return this._frameRate},function(v$n){if(this._frameRate=v$n,v$I.isConchApp)switch(this._frameRate){case"slow":v$f.window.conch&&v$f.window.conchConfig.setSlowFrame&&v$f.window.conchConfig.setSlowFrame(!0);break;case"fast":v$f.window.conch&&v$f.window.conchConfig.setSlowFrame&&v$f.window.conchConfig.setSlowFrame(!1);break;case"mouse":v$f.window.conch&&v$f.window.conchConfig.setMouseFrame&&v$f.window.conchConfig.setMouseFrame(2e3);break;case"sleep":v$f.window.conch&&v$f.window.conchConfig.setLimitFPS&&v$f.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),v$E(0,v$n,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),v$E(0,v$n,"width",v$z.prototype._$get_width,function(v$n){this.designWidth=v$n,v$k.superSet(v$zn,this,"width",v$n),v$k.timer.callLater(this,this._changeCanvasSize)}),v$E(0,v$n,"alignH",function(){return this._alignH},function(v$n){this._alignH=v$n,v$k.timer.callLater(this,this._changeCanvasSize)}),v$E(0,v$n,"isFocused",function(){return this._isFocused}),v$E(0,v$n,"height",v$z.prototype._$get_height,function(v$n){this.designHeight=v$n,v$k.superSet(v$zn,this,"height",v$n),v$k.timer.callLater(this,this._changeCanvasSize)}),v$E(0,v$n,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||v$c.create()},v$z.prototype._$set_transform),v$E(0,v$n,"isVisibility",function(){return this._isVisibility}),v$E(0,v$n,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),v$E(0,v$n,"scaleMode",function(){return this._scaleMode},function(v$n){this._scaleMode=v$n,v$k.timer.callLater(this,this._changeCanvasSize)}),v$E(0,v$n,"alignV",function(){return this._alignV},function(v$n){this._alignV=v$n,v$k.timer.callLater(this,this._changeCanvasSize)}),v$E(0,v$n,"bgColor",function(){return this._bgColor},function(v$n){this._bgColor=v$n,this.conchModel&&this.conchModel.bgColor(v$n),v$I.isWebGL&&(v$n?v$Q._wgColor=v$B.create(v$n)._color:v$f.onMiniGame||(v$Q._wgColor=null)),v$f.onLimixiu?v$Q._wgColor=v$B.create(v$n)._color:v$I.canvas.style.background=v$n||"none"}),v$E(0,v$n,"mouseX",function(){return Math.round(v$m.instance.mouseX/this.clientScaleX)}),v$E(0,v$n,"mouseY",function(){return Math.round(v$m.instance.mouseY/this.clientScaleY)}),v$E(0,v$n,"screenMode",function(){return this._screenMode},function(v$n){this._screenMode=v$n}),v$E(0,v$n,"visible",v$z.prototype._$get_visible,function(v$n){this.visible!==v$n&&(v$k.superSet(v$zn,this,"visible",v$n),v$I._mainCanvas.source.style.visibility=v$n?"visible":"hidden")}),v$E(0,v$n,"fullScreenEnabled",null,function(v$n){var v$a=v$f.document,v$U=v$I.canvas;v$n?(v$U.addEventListener("mousedown",this._requestFullscreen),v$U.addEventListener("touchstart",this._requestFullscreen),v$a.addEventListener("fullscreenchange",this._fullScreenChanged),v$a.addEventListener("mozfullscreenchange",this._fullScreenChanged),v$a.addEventListener("webkitfullscreenchange",this._fullScreenChanged),v$a.addEventListener("msfullscreenchange",this._fullScreenChanged)):(v$U.removeEventListener("mousedown",this._requestFullscreen),v$U.removeEventListener("touchstart",this._requestFullscreen),v$a.removeEventListener("fullscreenchange",this._fullScreenChanged),v$a.removeEventListener("mozfullscreenchange",this._fullScreenChanged),v$a.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),v$a.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),v$Q.SCALE_NOSCALE="noscale",v$Q.SCALE_EXACTFIT="exactfit",v$Q.SCALE_SHOWALL="showall",v$Q.SCALE_NOBORDER="noborder",v$Q.SCALE_FULL="full",v$Q.SCALE_FIXED_WIDTH="fixedwidth",v$Q.SCALE_FIXED_HEIGHT="fixedheight",v$Q.SCALE_FIXED_AUTO="fixedauto",v$Q.ALIGN_LEFT="left",v$Q.ALIGN_RIGHT="right",v$Q.ALIGN_CENTER="center",v$Q.ALIGN_TOP="top",v$Q.ALIGN_MIDDLE="middle",v$Q.ALIGN_BOTTOM="bottom",v$Q.SCREEN_NONE="none",v$Q.SCREEN_HORIZONTAL="horizontal",v$Q.SCREEN_VERTICAL="vertical",v$Q.FRAME_FAST="fast",v$Q.FRAME_SLOW="slow",v$Q.FRAME_MOUSE="mouse",v$Q.FRAME_SLEEP="sleep",v$Q.FRAME_MOUSE_THREDHOLD=2e3,v$y(v$Q,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),v$Q}(v$zn),v$An=(function(v$n){function v$a(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,v$a.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}v$X(v$a,"laya.media.SoundNode",v$zn);var v$U=v$a.prototype;v$U._onParentChange=function(){this.target=this.parent},v$U.play=function(v$n,v$a){void 0===v$n&&(v$n=1),isNaN(v$n)&&(v$n=1),this.url&&(this.stop(),this._channel=v$Z.playSound(this.url,v$n,null,v$a))},v$U.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},v$U._setPlayAction=function(v$n,v$a,v$U,v$x){void 0===v$x&&(v$x=!0),this[v$U]&&v$n&&(v$x?v$n.on(v$a,this,this[v$U]):v$n.off(v$a,this,this[v$U]))},v$U._setPlayActions=function(v$n,v$a,v$U,v$x){if(void 0===v$x&&(v$x=!0),v$n&&v$a){var v$D,v$p=v$a.split(","),v$Q=0;for(v$D=v$p.length,v$Q=0;v$Q<v$D;v$Q++)this._setPlayAction(v$n,v$p[v$Q],v$U,v$x)}},v$E(0,v$U,"playEvent",null,function(v$n){(this._playEvents=v$n)&&this._tar&&this._setPlayActions(this._tar,v$n,"play")}),v$E(0,v$U,"target",null,function(v$n){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=v$n,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),v$E(0,v$U,"stopEvent",null,function(v$n){(this._stopEvents=v$n)&&this._tar&&this._setPlayActions(this._tar,v$n,"stop")})}(),function(v$n){function v$a(){this._src=null,this._onload=null,this._onerror=null,v$a.__super.call(this)}v$X(v$a,"laya.resource.FileBitmap",v$En);var v$U=v$a.prototype;return v$E(0,v$U,"src",function(){return this._src},function(v$n){this._src=v$n}),v$E(0,v$U,"onload",null,function(v$n){}),v$E(0,v$U,"onerror",null,function(v$n){}),v$a}()),v$Tn=function(v$n){function v$U(v$n,v$a){this._is2D=!1,v$U.__super.call(this);var v$x=this;if(this._source=this,"2D"===v$n||"AUTO"===v$n&&!v$I.isWebGL){this._is2D=!0,this._source=v$a||v$f.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var v$D=this;v$D.getContext=function(v$n,v$a){if(v$x._ctx)return v$x._ctx;var v$U=v$x._ctx=v$x._source.getContext(v$n,v$a);return v$U&&(v$U._canvas=v$D,v$I.isFlash||v$f.onLimixiu||(v$U.size=function(v$n,v$a){})),v$U}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}v$X(v$U,"laya.resource.HTMLCanvas",v$En);var v$a=v$U.prototype;return v$a.clear=function(){this._ctx&&this._ctx.clear()},v$a.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},v$a.release=function(){},v$a._setContext=function(v$n){this._ctx=v$n},v$a.getContext=function(v$n,v$a){return this._ctx?this._ctx:this._ctx=v$U._createContext(this)},v$a.getMemSize=function(){return 0},v$a.size=function(v$n,v$a){(this._w!=v$n||this._h!=v$a||this._source&&(this._source.width!=v$n||this._source.height!=v$a))&&(this._w=v$n,this._h=v$a,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(v$n,v$a),this._source&&(this._source.height=v$a,this._source.width=v$n))},v$a.getCanvas=function(){return this._source},v$a.toBase64=function(v$n,v$a,v$U){if(this._source)if(v$I.isConchApp&&this._source.toBase64)this._source.toBase64(v$n,v$a,v$U);else{var v$x=this._source.toDataURL(v$n,v$a);v$U.call(this,v$x)}},v$E(0,v$a,"context",function(){return this._ctx}),v$E(0,v$a,"asBitmap",null,function(v$n){}),v$U.create=function(v$n,v$a){return new v$U(v$n,v$a)},v$U.TYPE2D="2D",v$U.TYPE3D="3D",v$U.TYPEAUTO="AUTO",v$U._createContext=null,v$U}(),v$Kn=(function(v$n){function v$y(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){throw v$y.__super.call(this),new Error("不允许new！")}v$X(v$y,"laya.resource.HTMLSubImage",v$En),v$y.create=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){return void 0===v$V&&(v$V=!1),new v$y(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V)}}(),function(v$n){function v$z(){this._frames=null,this._url=null,v$z.__super.call(this),this._setControlNode(this)}v$X(v$z,"laya.display.Animation",v$n);var v$a=v$z.prototype;v$a.destroy=function(v$n){void 0===v$n&&(v$n=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,v$n),this._frames=null,this._labels=null},v$a.play=function(v$n,v$a,v$U,v$x){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=!0),void 0===v$U&&(v$U=""),void 0===v$x&&(v$x=!0),v$U&&this._setFramesFromCache(v$U,v$x),this._isPlaying=!0,this.index="string"==typeof v$n?this._getFrameByLabel(v$n):v$n,this.loop=v$a,this._actionName=v$U,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},v$a._setFramesFromCache=function(v$n,v$a){var v$U;return void 0===v$a&&(v$a=!1),this._url&&(v$n=this._url+"#"+v$n),v$n&&v$z.framesMap[v$n]?((v$U=v$z.framesMap[v$n])instanceof Array?(this._frames=v$z.framesMap[v$n],this._count=this._frames.length):(v$U.nodeRoot&&(v$z.framesMap[v$n]=this._parseGraphicAnimationByData(v$U),v$U=v$z.framesMap[v$n]),this._frames=v$U.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=v$U.interval),this._labels=this._copyLabels(v$U.labels)),!0):(v$a&&console.log("ani not found:",v$n),!1)},v$a._copyLabels=function(v$n){if(!v$n)return null;var v$a,v$U;for(v$U in v$a={},v$n)v$a[v$U]=v$t.copyArray([],v$n[v$U]);return v$a},v$a._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&v$n.prototype._frameLoop.call(this)},v$a._displayToIndex=function(v$n){this._frames&&(this.graphics=this._frames[v$n])},v$a.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},v$a.loadImages=function(v$n,v$a){return void 0===v$a&&(v$a=""),this._url="",this._setFramesFromCache(v$a)||(this.frames=v$z.framesMap[v$a]?v$z.framesMap[v$a]:v$z.createFrames(v$n,v$a)),this},v$a.loadAtlas=function(v$a,v$U,v$x){void 0===v$x&&(v$x=""),this._url="";var v$D=this;function v$n(v$n){v$a===v$n&&(v$D.frames=v$z.framesMap[v$x]?v$z.framesMap[v$x]:v$z.createFrames(v$a,v$x),v$U&&v$U.run())}return v$D._setFramesFromCache(v$x)||(v$Vn.getAtlas(v$a)?v$n(v$a):v$k.loader.load(v$a,v$A.create(null,v$n,[v$a]),null,"atlas")),this},v$a.loadAnimation=function(v$n,v$a,v$U){this._url=v$n;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,v$a&&v$a.run()):!v$U||v$Vn.getAtlas(v$U)?this._loadAnimationData(v$n,v$a,v$U):v$k.loader.load(v$U,v$A.create(this,this._loadAnimationData,[v$n,v$a,v$U]),null,"atlas"),this},v$a._loadAnimationData=function(v$V,v$y,v$n){var v$R=this;if(!v$n||v$Vn.getAtlas(v$n)){var v$X=this;v$Vn.getRes(v$V)?v$a(v$V):v$k.loader.load(v$V,v$A.create(null,v$a,[v$V]),null,"json"),v$Vn.clearRes(v$V)}else console.warn("atlas load fail:"+v$n);function v$a(v$n){if(v$Vn.getRes(v$n)&&v$V===v$n){var v$a;if(v$z.framesMap[v$V+"#"])v$X._setFramesFromCache(v$R._actionName,!0),v$R.index=0,v$R._checkResumePlaying();else{var v$U=v$X._parseGraphicAnimation(v$Vn.getRes(v$V));if(!v$U)return;var v$x,v$D=v$U.animationList,v$p=0,v$Q=v$D.length;for(v$p=0;v$p<v$Q;v$p++)v$a=v$D[v$p],v$z.framesMap[v$V+"#"+v$a.name]=v$a,v$x||(v$x=v$a);v$x&&(v$z.framesMap[v$V+"#"]=v$x,v$X._setFramesFromCache(v$R._actionName,!0),v$R.index=0),v$R._checkResumePlaying()}v$y&&v$y.run()}}},v$a._parseGraphicAnimation=function(v$n){return v$kn.parseAnimationData(v$n)},v$a._parseGraphicAnimationByData=function(v$n){return v$kn.parseAnimationByData(v$n)},v$E(0,v$a,"frames",function(){return this._frames},function(v$n){(this._frames=v$n)&&(this._count=v$n.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),v$E(0,v$a,"autoPlay",null,function(v$n){v$n?this.play():this.stop()}),v$E(0,v$a,"source",null,function(v$n){-1<v$n.indexOf(".ani")?this.loadAnimation(v$n):-1<v$n.indexOf(".json")||-1<v$n.indexOf("als")||-1<v$n.indexOf("atlas")?this.loadAtlas(v$n):this.loadImages(v$n.split(","))}),v$E(0,v$a,"autoAnimation",null,function(v$n){this.play(0,!0,v$n,!1)}),v$z.createFrames=function(v$n,v$a){var v$U,v$x,v$D=0,v$p=0;if("string"==typeof v$n){var v$Q=v$Vn.getAtlas(v$n);if(v$Q&&v$Q.length)for(v$U=[],v$D=0,v$p=v$Q.length;v$D<v$p;v$D++)(v$x=new v$u.createGraphics).drawTexture(v$Vn.getRes(v$Q[v$D]),0,0),v$U.push(v$x)}else if(v$n instanceof Array)for(v$U=[],v$D=0,v$p=v$n.length;v$D<v$p;v$D++)(v$x=new v$u.createGraphics).loadImage(v$n[v$D],0,0),v$U.push(v$x);return v$a&&(v$z.framesMap[v$a]=v$U),v$U},v$z.clearCache=function(v$n){var v$a,v$U=v$z.framesMap,v$x=v$n+"#";for(v$a in v$U)v$a!==v$n&&0!=v$a.indexOf(v$x)||delete v$z.framesMap[v$a]},v$z.framesMap={}}(v$mn),function(v$n){function v$p(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,v$p.__super.call(this),null==v$p._sortIndexFun&&(v$p._sortIndexFun=v$W.sortByKey("index",!1,!0))}v$X(v$p,"laya.display.FrameAnimation",v$n);var v$a=v$p.prototype;return v$a._setUp=function(v$n,v$a){this._labels=null,this._animationNewFrames=null,this._targetDic=v$n,this._animationData=v$a,this.interval=1e3/v$a.frameRate,v$a.parsed?(this._count=v$a.count,this._labels=v$a.labels,this._animationNewFrames=v$a.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),v$a.parsed=!0,v$a.labels=this._labels,v$a.count=this._count,v$a.animationNewFrames=this._animationNewFrames},v$a.clear=function(){v$n.prototype.clear.call(this),this._targetDic=null,this._animationData=null},v$a._displayToIndex=function(v$n){if(this._animationData){v$n<0&&(v$n=0),v$n>this._count&&(v$n=this._count);var v$a=this._animationData.nodes,v$U=0,v$x=v$a.length;for(v$U=0;v$U<v$x;v$U++)this._displayNodeToFrame(v$a[v$U],v$n)}},v$a._displayNodeToFrame=function(v$n,v$a,v$U){v$U||(v$U=this._targetDic);var v$x=v$U[v$n.target];if(v$x){var v$D,v$p,v$Q,v$V=v$n.frames,v$y=v$n.keys,v$R=0,v$X=v$y.length;for(v$R=0;v$R<v$X;v$R++)v$Q=(v$p=v$V[v$D=v$y[v$R]]).length>v$a?v$p[v$a]:v$p[v$p.length-1],v$x[v$D]=v$Q}},v$a._calculateDatas=function(){if(this._animationData){var v$n,v$a=this._animationData.nodes,v$U=0,v$x=v$a.length;for(v$U=this._count=0;v$U<v$x;v$U++)v$n=v$a[v$U],this._calculateNodeKeyFrames(v$n);this._count+=1}},v$a._calculateNodeKeyFrames=function(v$n){var v$a,v$U,v$x=v$n.keyframes,v$D=v$n.target;for(v$a in v$n.frames||(v$n.frames={}),v$n.keys?v$n.keys.length=0:v$n.keys=[],v$n.initValues||(v$n.initValues={}),v$x)v$U=v$x[v$a],v$n.frames[v$a]||(v$n.frames[v$a]=[]),this._targetDic&&this._targetDic[v$D]&&(v$n.initValues[v$a]=this._targetDic[v$D][v$a]),v$U.sort(v$p._sortIndexFun),v$n.keys.push(v$a),this._calculateNodePropFrames(v$U,v$n.frames[v$a],v$a,v$D)},v$a.resetToInitState=function(){if(this._targetDic&&this._animationData){var v$n,v$a,v$U=this._animationData.nodes,v$x=0,v$D=v$U.length;for(v$x=0;v$x<v$D;v$x++)if(v$a=(v$n=v$U[v$x]).initValues){var v$p,v$Q=this._targetDic[v$n.target];if(v$Q)for(v$p in v$a)v$Q[v$p]=v$a[v$p]}}},v$a._calculateNodePropFrames=function(v$n,v$a,v$U,v$x){var v$D=0,v$p=v$n.length-1;if(0<v$p){for(v$a.length=v$n[v$p].index+1,v$D=0;v$D<v$p;v$D++)this._dealKeyFrame(v$n[v$D]),this._calculateFrameValues(v$n[v$D],v$n[v$D+1],v$a);this._dealKeyFrame(v$n[v$D])}0==v$p&&(v$a[v$n[0].index]=v$n[0].value,this._animationNewFrames&&(this._animationNewFrames[v$n[0].index]=!0))},v$a._dealKeyFrame=function(v$n){v$n.label&&""!=v$n.label&&this.addLabel(v$n.label,v$n.index)},v$a._calculateFrameValues=function(v$n,v$a,v$U){var v$x,v$D=0,v$p=v$n.index,v$Q=v$a.index,v$V=v$n.value,v$y=v$a.value-v$n.value,v$R=v$Q-v$p;if(v$Q>this._count&&(this._count=v$Q),v$n.tween)for(null==(v$x=v$L[v$n.tweenMethod])&&(v$x=v$L.linearNone),v$D=v$p;v$D<v$Q;v$D++)v$U[v$D]=v$x(v$D-v$p,v$V,v$y,v$R),this._animationNewFrames&&(this._animationNewFrames[v$D]=!0);else for(v$D=v$p;v$D<v$Q;v$D++)v$U[v$D]=v$V;this._animationNewFrames&&(this._animationNewFrames[v$n.index]=!0,this._animationNewFrames[v$a.index]=!0),v$U[v$a.index]=v$a.value},v$p._sortIndexFun=null,v$p}(v$mn)),v$Yn=function(v$a){function v$D(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",v$D.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=v$bn.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}v$X(v$D,"laya.display.Input",v$a);var v$n=v$D.prototype;return v$n.setSelection=function(v$n,v$a){this.focus=!0,laya.display.Input.inputElement.selectionStart=v$n,laya.display.Input.inputElement.selectionEnd=v$a},v$n._onUnDisplay=function(v$n){this.focus=!1},v$n._onMouseDown=function(v$n){this.focus=!0},v$n._syncInputTransform=function(){var v$n=this.nativeInput,v$a=v$t.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),v$U=this._width-this.padding[1]-this.padding[3],v$x=this._height-this.padding[0]-this.padding[2];v$I.isConchApp?(v$n.setScale(v$a.scaleX,v$a.scaleY),v$n.setSize(v$U,v$x),v$n.setPos(v$a.x,v$a.y)):(v$D.inputContainer.style.transform=v$D.inputContainer.style.webkitTransform="scale("+v$a.scaleX+","+v$a.scaleY+") rotate("+v$k.stage.canvasDegree+"deg)",v$n.style.width=v$U+"px",v$n.style.height=v$x+"px",v$D.inputContainer.style.left=v$a.x+"px",v$D.inputContainer.style.top=v$a.y+"px")},v$n.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},v$n._setInputMethod=function(){v$D.input.parentElement&&v$D.inputContainer.removeChild(v$D.input),v$D.area.parentElement&&v$D.inputContainer.removeChild(v$D.area),v$D.inputElement=this._multiline?v$D.area:v$D.input,v$D.inputContainer.appendChild(v$D.inputElement),v$bn.RightToLeft&&(v$D.inputElement.style.direction="rtl")},v$n._focusIn=function(){laya.display.Input.isInputting=!0;var v$n=this.nativeInput;this._focus=!0;var v$a=v$n.style;v$a.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),v$n.readOnly=!this._editable,v$I.isConchApp&&(v$n.setType(this._type),v$n.setForbidEdit(!this._editable)),v$n.maxLength=this._maxChars;this.padding;if(v$n.type=this._type,v$n.value=this._content,v$n.placeholder=this._prompt,v$k.stage.off("keydown",this,this._onKeyDown),v$k.stage.on("keydown",this,this._onKeyDown),(v$k.stage.focus=this).event("focus"),v$f.onPC&&v$n.focus(),!v$f.onMiniGame){this._text;this._text=null}this.typeset(),v$n.setColor(this._originColor),v$n.setFontSize(this.fontSize),v$n.setFontFace(v$f.onIPhone&&v$bn._fontFamilyMap[this.font]||this.font),v$I.isConchApp&&v$n.setMultiAble&&v$n.setMultiAble(this._multiline),v$a.lineHeight=this.leading+this.fontSize+"px",v$a.fontStyle=this.italic?"italic":"normal",v$a.fontWeight=this.bold?"bold":"normal",v$a.textAlign=this.align,v$a.padding="0 0",this._syncInputTransform(),!v$I.isConchApp&&v$f.onPC&&v$k.timer.frameLoop(1,this,this._syncInputTransform)},v$n._setPromptColor=function(){(v$D.promptStyleDOM=v$f.getElementById("promptStyle"))||((v$D.promptStyleDOM=v$f.createElement("style")).setAttribute("id","promptStyle"),v$f.document.head.appendChild(v$D.promptStyleDOM)),v$D.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},v$n._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(v$k.superSet(v$bn,this,"text",this._content),v$k.superSet(v$bn,this,"color",this._originColor)):(v$k.superSet(v$bn,this,"text",this._prompt),v$k.superSet(v$bn,this,"color",this._promptColor)),v$k.stage.off("keydown",this,this._onKeyDown),v$k.stage.focus=null,this.event("blur"),v$I.isConchApp&&this.nativeInput.blur(),v$f.onPC&&v$k.timer.clear(this,this._syncInputTransform)},v$n._onKeyDown=function(v$n){13===v$n.keyCode&&(v$f.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},v$n.changeText=function(v$n){this._content=v$n,this._focus?(this.nativeInput.value=v$n||"",this.event("change")):v$a.prototype.changeText.call(this,v$n)},v$E(0,v$n,"color",v$a.prototype._$get_color,function(v$n){this._focus&&this.nativeInput.setColor(v$n),v$k.superSet(v$bn,this,"color",this._content?v$n:this._promptColor),this._originColor=v$n}),v$E(0,v$n,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(v$n){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),v$E(0,v$n,"multiline",function(){return this._multiline},function(v$n){this._multiline=v$n,this.valign=v$n?"top":"middle"}),v$E(0,v$n,"maxChars",function(){return this._maxChars},function(v$n){v$n<=0&&(v$n=1e5),this._maxChars=v$n}),v$E(0,v$n,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(v$n){v$k.superSet(v$bn,this,"color",this._originColor),v$n+="",this._focus?(this.nativeInput.value=v$n||"",this.event("change")):(this._multiline||(v$n=v$n.replace(/\r?\n/g,"")),(this._content=v$n)?v$k.superSet(v$bn,this,"text",v$n):(v$k.superSet(v$bn,this,"text",this._prompt),v$k.superSet(v$bn,this,"color",this.promptColor)))}),v$E(0,v$n,"nativeInput",function(){return this._multiline?v$D.area:v$D.input}),v$E(0,v$n,"prompt",function(){return this._prompt},function(v$n){!this._text&&v$n&&v$k.superSet(v$bn,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?v$k.superSet(v$bn,this,"text",this._text==this._prompt?v$n:this._text):v$k.superSet(v$bn,this,"text",v$n),this._prompt=v$bn.langPacks&&v$bn.langPacks[v$n]?v$bn.langPacks[v$n]:v$n}),v$E(0,v$n,"focus",function(){return this._focus},function(v$n){var v$a=this.nativeInput;this._focus!==v$n&&(v$n?(v$a.target?v$a.target._focusOut():this._setInputMethod(),(v$a.target=this)._focusIn()):(v$a.target=null,this._focusOut(),v$f.document.body.scrollTop=0,v$a.blur(),v$I.isConchApp?v$a.setPos(-1e4,-1e4):v$D.inputContainer.contains(v$a)&&v$D.inputContainer.removeChild(v$a)))}),v$E(0,v$n,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(v$n){v$n?(-1<(v$n="[^"+v$n+"]").indexOf("^^")&&(v$n=v$n.replace("^^","")),this._restrictPattern=new RegExp(v$n,"g")):this._restrictPattern=null}),v$E(0,v$n,"editable",function(){return this._editable},function(v$n){this._editable=v$n,v$I.isConchApp&&v$D.input.setForbidEdit(!v$n)}),v$E(0,v$n,"promptColor",function(){return this._promptColor},function(v$n){this._promptColor=v$n,this._content||v$k.superSet(v$bn,this,"color",v$n)}),v$E(0,v$n,"type",function(){return this._type},function(v$n){this._getCSSStyle().password="password"==v$n,this._type=v$n,v$I.isConchApp&&this.nativeInput.setType(v$n)}),v$E(0,v$n,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(v$n){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),v$E(0,v$n,"asPassword",function(){return this._getCSSStyle().password},function(v$n){this._getCSSStyle().password=v$n,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),v$D.__init__=function(){v$D._createInputElement(),v$f.onMobile&&v$I.canvas.addEventListener(v$D.IOS_IFRAME?v$f.onMiniGame?"touchend":"click":"touchend",v$D._popupInputMethod)},v$D._popupInputMethod=function(v$n){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},v$D._createInputElement=function(){v$D._initInput(v$D.area=v$f.createElement("textarea")),v$D._initInput(v$D.input=v$f.createElement("input")),(v$D.inputContainer=v$f.createElement("div")).style.position="absolute",v$D.inputContainer.style.zIndex=1e5,v$f.container.appendChild(v$D.inputContainer),v$D.inputContainer.setPos=function(v$n,v$a){v$D.inputContainer.style.left=v$n+"px",v$D.inputContainer.style.top=v$a+"px"}},v$D._initInput=function(v$a){var v$n=v$a.style;v$n.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",v$n.resize="none",v$n.backgroundColor="transparent",v$n.border="none",v$n.outline="none",v$n.zIndex=1,v$a.addEventListener("input",v$D._processInputting),v$a.addEventListener("mousemove",v$D._stopEvent),v$a.addEventListener("mousedown",v$D._stopEvent),v$a.addEventListener("touchmove",v$D._stopEvent),v$a.setFontFace=function(v$n){v$a.style.fontFamily=v$n},v$I.isConchApp||(v$a.setColor=function(v$n){v$a.style.color=v$n},v$a.setFontSize=function(v$n){v$a.style.fontSize=v$n+"px"})},v$D._processInputting=function(v$n){var v$a=laya.display.Input.inputElement.target;if(v$a){var v$U=laya.display.Input.inputElement.value;v$a._restrictPattern&&(v$U=v$U.replace(/\u2006|\x27/g,""),v$a._restrictPattern.test(v$U)&&(v$U=v$U.replace(v$a._restrictPattern,""),laya.display.Input.inputElement.value=v$U)),v$a._text=v$U,v$a.event("input")}},v$D._stopEvent=function(v$n){"touchmove"==v$n.type&&v$n.preventDefault(),v$n.stopPropagation&&v$n.stopPropagation()},v$D.TYPE_TEXT="text",v$D.TYPE_PASSWORD="password",v$D.TYPE_EMAIL="email",v$D.TYPE_URL="url",v$D.TYPE_NUMBER="number",v$D.TYPE_RANGE="range",v$D.TYPE_DATE="date",v$D.TYPE_MONTH="month",v$D.TYPE_WEEK="week",v$D.TYPE_TIME="time",v$D.TYPE_DATE_TIME="datetime",v$D.TYPE_DATE_TIME_LOCAL="datetime-local",v$D.TYPE_SEARCH="search",v$D.input=null,v$D.area=null,v$D.inputElement=null,v$D.inputContainer=null,v$D.confirmButton=null,v$D.promptStyleDOM=null,v$D.inputHeight=45,v$D.isInputting=!1,v$D.stageMatrix=null,v$y(v$D,["IOS_IFRAME",function(){return this.IOS_IFRAME=v$f.onIOS&&v$f.window.top!=v$f.window.self}]),v$D}(v$bn),v$Wn=function(v$n){function v$U(v$n,v$a){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,v$U.__super.call(this),v$n&&this._init_(v$n,v$a)}v$X(v$U,"laya.resource.HTMLImage",v$An);var v$a=v$U.prototype;return v$a._init_=function(v$n,v$a){this._src=v$n,this._source=new v$f.window.Image,v$a&&(v$a.onload&&(this.onload=v$a.onload),v$a.onerror&&(this.onerror=v$a.onerror),v$a.onCreate&&v$a.onCreate(this)),0!=v$n.indexOf("data:image")&&(this._source.crossOrigin=""),v$n&&(this._source.src=v$n)},v$a.recreateResource=function(){var v$n=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var v$a=this;this._source=new v$f.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(v$a._needReleaseAgain)return v$a._needReleaseAgain=!1,v$a._source.onload=null,void(v$a._source=null);v$a._source.onload=null,v$a.memorySize=v$n._w*v$n._h*4,v$a._recreateLock=!1,v$a.completeCreate()},this._source.src=this._src}},v$a.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},v$a.onresize=function(){this._w=this._source.width,this._h=this._source.height},v$E(0,v$a,"onload",null,function(v$n){var v$a=this;this._onload=v$n,this._source&&(this._source.onload=null!=this._onload?function(){v$a.onresize(),v$a._onload()}:null)}),v$E(0,v$a,"onerror",null,function(v$n){var v$a=this;this._onerror=v$n,this._source&&(this._source.onerror=null!=this._onerror?function(){v$a._onerror()}:null)}),v$E(0,v$a,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(v$n){this._enableMerageInAtlas=v$n,v$I.isConchApp&&this._source&&(this._source.enableMerageInAtlas=v$n)}),v$U.create=function(v$n,v$a){return new v$U(v$n,v$a)},v$U}(),v$kn=(function(v$p){function v$n(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,v$n.__super.call(this)}v$X(v$n,"laya.display.EffectAnimation",v$p);var v$a=v$n.prototype;v$a._onOtherBegin=function(v$n){v$n!=this&&this.stop()},v$a.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},v$a._onPlayAction=function(){this.play(0,!1)},v$a.play=function(v$n,v$a,v$U,v$x){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=!0),void 0===v$U&&(v$U=""),void 0===v$x&&(v$x=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,v$n,v$a,v$U,v$x))},v$a._recordInitData=function(){if(this._aniKeys){var v$n,v$a,v$U=0;for(v$n=this._aniKeys.length,v$U=0;v$U<v$n;v$U++)v$a=this._aniKeys[v$U],this._initData[v$a]=this._target[v$a]}},v$a._displayToIndex=function(v$n){if(this._animationData){v$n<0&&(v$n=0),v$n>this._count&&(v$n=this._count);var v$a=this._animationData.nodes,v$U=0,v$x=v$a.length;for(v$x=1<v$x?1:v$x,v$U=0;v$U<v$x;v$U++)this._displayNodeToFrame(v$a[v$U],v$n)}},v$a._displayNodeToFrame=function(v$n,v$a,v$U){if(this._target){var v$x;v$x=this._target;var v$D,v$p,v$Q,v$V,v$y=v$n.frames,v$R=v$n.keys,v$X=0,v$z=v$R.length;v$V=v$n.secondFrames;var v$i,v$q,v$E,v$m,v$b=0;for(v$X=0;v$X<v$z;v$X++)v$p=v$y[v$D=v$R[v$X]],v$Q=-1==(v$b=v$V[v$D])?this._initData[v$D]:v$a<v$b?(v$E=(v$q=v$n.keyframes[v$D])[0]).tween?(null==(v$i=v$L[v$E.tweenMethod])&&(v$i=v$L.linearNone),v$m=v$q[1],v$i(v$a,this._initData[v$D],v$m.value-this._initData[v$D],v$m.index)):this._initData[v$D]:v$p.length>v$a?v$p[v$a]:v$p[v$p.length-1],v$x[v$D]=v$Q}},v$a._calculateNodeKeyFrames=function(v$n){v$p.prototype._calculateNodeKeyFrames.call(this,v$n);var v$a,v$U,v$x,v$D=v$n.keyframes;v$n.target;for(v$a in v$x={},v$n.secondFrames=v$x,v$D)(v$U=v$D[v$a]).length<=1?v$x[v$a]=-1:v$x[v$a]=v$U[1].index},v$E(0,v$a,"target",function(){return this._target},function(v$n){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=v$n,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),v$E(0,v$a,"playEvent",null,function(v$n){(this._playEvents=v$n)&&this.addEvent()}),v$E(0,v$a,"effectData",null,function(v$n){var v$a;v$n&&((v$a=v$n.animations)&&v$a[0]&&(this._setUp({},v$a[0]),v$a[0].nodes&&v$a[0].nodes[0]&&(this._aniKeys=v$a[0].nodes[0].keys)))}),v$E(0,v$a,"effectClass",null,function(v$n){var v$a,v$U;(this._effectClass=v$o.getClass(v$n),this._effectClass)&&((v$a=this._effectClass.uiView)&&(v$U=v$a.animations)&&v$U[0]&&(this._setUp({},v$U[0]),v$U[0].nodes&&v$U[0].nodes[0]&&(this._aniKeys=v$U[0].nodes[0].keys)))}),v$n.EffectAnimationBegin="effectanimationbegin"}(v$Kn),function(v$a){var v$M;function v$Z(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,v$Z.__super.call(this)}v$X(v$Z,"laya.utils.GraphicAnimation",v$a);var v$n=v$Z.prototype;return v$n._parseNodeList=function(v$n){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[v$n.compId]=v$n.props,v$n.compId&&this._nodeList.push(v$n.compId);var v$a=v$n.child;if(v$a){var v$U=0,v$x=v$a.length;for(v$U=0;v$U<v$x;v$U++)this._parseNodeList(v$a[v$U])}},v$n._calGraphicData=function(v$n){var v$a;if(this._setUp(null,v$n),this._createGraphicData(),this._nodeIDAniDic)for(v$a in this._nodeIDAniDic)this._nodeIDAniDic[v$a]=null},v$n._createGraphicData=function(){var v$n,v$a=[],v$U=0,v$x=this.count,v$D=this._animationNewFrames;for(v$D||(v$D=[]),v$U=0;v$U<v$x;v$U++)!v$D[v$U]&&v$n||(v$n=this._createFrameGraphic(v$U)),v$a.push(v$n);this._gList=v$a},v$n._createFrameGraphic=function(v$n){var v$a=v$u.createGraphics();return v$Z._rootMatrix||(v$Z._rootMatrix=new v$c),this._updateNodeGraphic(this._rootNode,v$n,v$Z._rootMatrix,v$a),v$a},v$n._updateNodeGraphic=function(v$n,v$a,v$U,v$x,v$D){var v$p;void 0===v$D&&(v$D=1);var v$Q,v$V,v$y,v$R=(v$p=this._nodeGDic[v$n.compId]=this._getNodeGraphicData(v$n.compId,v$a,this._nodeGDic[v$n.compId])).alpha*v$D;if(!(v$R<.01)&&(v$p.resultTransform||(v$p.resultTransform=v$c.create()),v$Q=v$p.resultTransform,v$c.mul(v$p.transform,v$U,v$Q),v$p.skin&&(v$V=this._getTextureByUrl(v$p.skin))&&(v$Q._checkTransform()?(v$x.drawTexture(v$V,0,0,v$p.width,v$p.height,v$Q,v$R),v$p.resultTransform=null):v$x.drawTexture(v$V,v$Q.tx,v$Q.ty,v$p.width,v$p.height,null,v$R)),v$y=v$n.child)){var v$X,v$z=0;for(v$X=v$y.length,v$z=0;v$z<v$X;v$z++)this._updateNodeGraphic(v$y[v$z],v$a,v$Q,v$x,v$R)}},v$n._updateNoChilds=function(v$n,v$a){if(v$n.skin){var v$U=this._getTextureByUrl(v$n.skin);if(v$U){var v$x=v$n.transform;v$x._checkTransform();!v$x.bTransform?v$a.drawTexture(v$U,v$x.tx,v$x.ty,v$n.width,v$n.height,null,v$n.alpha):v$a.drawTexture(v$U,0,0,v$n.width,v$n.height,v$x.clone(),v$n.alpha)}}},v$n._updateNodeGraphic2=function(v$n,v$a,v$U){var v$x;if(v$x=this._nodeGDic[v$n.compId]=this._getNodeGraphicData(v$n.compId,v$a,this._nodeGDic[v$n.compId]),v$n.child){var v$D=v$x.transform;v$D._checkTransform();var v$p,v$Q;v$Q=(v$p=!v$D.bTransform)&&(0!=v$D.tx||0!=v$D.ty);var v$V,v$y,v$R;if((v$V=v$D.bTransform||1!=v$x.alpha)&&v$U.save(),1!=v$x.alpha&&v$U.alpha(v$x.alpha),v$p?v$Q&&v$U.translate(v$D.tx,v$D.ty):v$U.transform(v$D.clone()),v$y=v$n.child,v$x.skin&&(v$R=this._getTextureByUrl(v$x.skin))&&v$U.drawTexture(v$R,0,0,v$x.width,v$x.height),v$y){var v$X,v$z=0;for(v$X=v$y.length,v$z=0;v$z<v$X;v$z++)this._updateNodeGraphic2(v$y[v$z],v$a,v$U)}v$V?v$U.restore():v$p?v$Q&&v$U.translate(-v$D.tx,-v$D.ty):v$U.transform(v$D.clone().invert())}else this._updateNoChilds(v$x,v$U)},v$n._calculateNodeKeyFrames=function(v$n){v$a.prototype._calculateNodeKeyFrames.call(this,v$n),this._nodeIDAniDic[v$n.target]=v$n},v$n.getNodeDataByID=function(v$n){return this._nodeIDAniDic[v$n]},v$n._getParams=function(v$n,v$a,v$U,v$x){var v$D=v$Z._temParam;v$D.length=v$a.length;var v$p=0,v$Q=v$a.length;for(v$p=0;v$p<v$Q;v$p++)v$D[v$p]=this._getObjVar(v$n,v$a[v$p][0],v$U,v$a[v$p][1],v$x);return v$D},v$n._getObjVar=function(v$n,v$a,v$U,v$x,v$D){if(v$n.hasOwnProperty(v$a)){var v$p=v$n[v$a];if(v$U>=v$p.length&&(v$U=v$p.length-1),null!=v$n[v$a][v$U])return v$n[v$a][v$U]}return v$D.hasOwnProperty(v$a)?v$D[v$a]:v$x},v$n._getNodeGraphicData=function(v$n,v$a,v$U){v$U||(v$U=v$M.create()),v$U.transform?v$U.transform.identity():v$U.transform=v$c.create();var v$x=this.getNodeDataByID(v$n);if(!v$x)return v$U;var v$D,v$p,v$Q=v$x.frames,v$V=this._getParams(v$Q,v$Z._drawTextureCmd,v$a,this._nodeDefaultProps[v$n]),v$y=v$V[0],v$R=NaN,v$X=NaN,v$z=v$V[5],v$i=v$V[6],v$q=v$V[13],v$E=v$V[14],v$m=v$V[7],v$b=v$V[8],v$P=v$V[9],v$A=v$V[11],v$T=v$V[12];v$R=v$V[3],v$X=v$V[4],0!=v$R&&0!=v$X||(v$y=null),-1==v$R&&(v$R=0),-1==v$X&&(v$X=0),v$U.skin=v$y,v$U.width=v$R,v$U.height=v$X,v$y&&((v$D=this._getTextureByUrl(v$y))?(v$R||(v$R=v$D.sourceWidth),v$X||(v$X=v$D.sourceHeight)):console.warn("lost skin:",v$y,",you may load pics first")),v$U.alpha=v$V[10],v$p=v$U.transform,0!=v$q&&(v$z=v$q*v$R),0!=v$E&&(v$i=v$E*v$X),0==v$z&&0==v$i||v$p.translate(-v$z,-v$i);var v$K=null;if(v$P||1!==v$m||1!==v$b||v$A||v$T){(v$K=v$Z._tempMt).identity(),v$K.bTransform=!0;var v$Y=.0174532922222222*(v$P-v$A),v$W=.0174532922222222*(v$P+v$T),v$k=Math.cos(v$W),v$N=Math.sin(v$W),v$_=Math.sin(v$Y),v$$=Math.cos(v$Y);v$K.a=v$m*v$k,v$K.b=v$m*v$N,v$K.c=-v$b*v$_,v$K.d=v$b*v$$,v$K.tx=v$K.ty=0}return v$K&&(v$p=v$c.mul(v$p,v$K,v$p)),v$p.translate(v$V[1],v$V[2]),v$U},v$n._getTextureByUrl=function(v$n){return v$Vn.getRes(v$n)},v$n.setAniData=function(v$n,v$a){if(v$n.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=v$n,this._parseNodeList(v$n);var v$U,v$x={},v$D=[],v$p=v$n.animations,v$Q=0,v$V=v$p.length;for(v$Q=0;v$Q<v$V;v$Q++)if(v$U=v$p[v$Q],this._labels=null,(!v$a||v$a==v$U.name)&&v$U){try{this._calGraphicData(v$U)}catch(v$n){console.warn("parse animation fail:"+v$U.name+",empty animation created"),this._gList=[]}var v$y={};v$y.interval=1e3/v$U.frameRate,v$y.frames=this._gList,v$y.labels=this._labels,v$y.name=v$U.name,v$D.push(v$y),v$x[v$U.name]=v$y}this.animationList=v$D,this.animationDic=v$x}v$Z._temParam.length=0},v$n.parseByData=function(v$n){var v$a,v$U;v$a=v$n.nodeRoot,v$U=v$n.aniO,delete v$n.nodeRoot,delete v$n.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=v$a,this._parseNodeList(v$a),this._labels=null;try{this._calGraphicData(v$U)}catch(v$n){console.warn("parse animation fail:"+v$U.name+",empty animation created"),this._gList=[]}var v$x=v$n;return v$x.interval=1e3/v$U.frameRate,v$x.frames=this._gList,v$x.labels=this._labels,v$x.name=v$U.name,v$x},v$n.setUpAniData=function(v$n){if(v$n.animations){var v$a,v$U={},v$x=[],v$D=v$n.animations,v$p=0,v$Q=v$D.length;for(v$p=0;v$p<v$Q;v$p++)if(v$a=v$D[v$p]){var v$V={};v$V.name=v$a.name,v$V.aniO=v$a,v$V.nodeRoot=v$n,v$x.push(v$V),v$U[v$a.name]=v$V}this.animationList=v$x,this.animationDic=v$U}},v$n._clear=function(){var v$n,v$a;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(v$n in this._nodeGDic)(v$a=this._nodeGDic[v$n])&&v$a.recover();this._nodeGDic=null},v$Z.parseAnimationByData=function(v$n){var v$a;return v$Z._I||(v$Z._I=new v$Z),v$a=v$Z._I.parseByData(v$n),v$Z._I._clear(),v$a},v$Z.parseAnimationData=function(v$n){var v$a;return v$Z._I||(v$Z._I=new v$Z),v$Z._I.setUpAniData(v$n),(v$a={}).animationList=v$Z._I.animationList,v$a.animationDic=v$Z._I.animationDic,v$Z._I._clear(),v$a},v$Z._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],v$Z._temParam=[],v$Z._I=null,v$Z._rootMatrix=null,v$y(v$Z,["_tempMt",function(){return this._tempMt=new v$c}]),v$Z.__init$=function(){v$M=function(){function v$n(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return v$X(v$n,""),v$n.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),v$S.recover("GraphicNode",this)},v$n.create=function(){return v$S.getItemByClass("GraphicNode",v$n)},v$n}()},v$Z}(v$Kn));v$k.__init([v$R,v$yn,v$I,v$f,v$s,v$$,v$n,v$kn])}(window,document,Laya),function(v$n,v$a,v$U){v$U.un,v$U.uns,v$U.static;var v$x=v$U.class;v$U.getset,v$U.__newvec;new(function(){function v$n(){}return v$x(v$n,"LayaMain"),v$n}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(v$n,v$a){"use strict";for(var v$U in Object.defineProperty(v$a,"__esModule",{value:!0}),Laya){var v$x=Laya[v$U];v$x&&v$x.__isclass&&(v$a[v$U]=v$x)}}),function(v$n,v$a,v$W){v$W.un,v$W.uns;var v$Q=v$W.static,v$i=v$W.class,v$x=v$W.getset,v$p=v$W.__newvec,v$X=laya.maths.Arith,v$z=laya.maths.Bezier,v$U=laya.resource.Bitmap,v$q=laya.utils.Browser,v$y=laya.utils.Byte,v$E=laya.utils.Color,v$k=(laya.filters.ColorFilter,v$W.Config),v$D=laya.resource.Context,v$N=(laya.events.Event,laya.filters.Filter),v$V=laya.display.Graphics,v$R=laya.resource.HTMLCanvas,v$m=(laya.utils.HTMLChar,laya.resource.HTMLImage),v$b=laya.resource.HTMLSubImage,v$_=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),v$$=laya.maths.Point,v$M=laya.maths.Rectangle,v$P=laya.renders.Render,v$A=(laya.renders.RenderContext,laya.renders.RenderSprite),v$T=laya.resource.Resource,v$K=laya.resource.ResourceManager,v$Y=laya.utils.RunDriver,v$Z=laya.display.Sprite,v$u=laya.display.Stage,v$c=laya.utils.Stat,v$H=laya.utils.StringKey,v$G=(laya.display.css.Style,laya.system.System),v$I=laya.display.Text,v$v=laya.resource.Texture,v$l=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),v$j=laya.utils.VectorGraphManager;laya.utils.WordText;v$W.interface("laya.webgl.shapes.IShape"),v$W.interface("laya.webgl.submit.ISubmit"),v$W.interface("laya.webgl.text.ICharSegment"),v$W.interface("laya.webgl.canvas.save.ISaveData"),v$W.interface("laya.webgl.resource.IMergeAtlasBitmap"),v$W.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var v$h=function(){function v$n(){}v$i(v$n,"laya.filters.webgl.FilterActionGL");var v$a=v$n.prototype;return v$W.imps(v$a,{"laya.filters.IFilterActionGL":!0}),v$a.setValue=function(v$n){},v$a.setValueMix=function(v$n){},v$a.apply3d=function(v$n,v$a,v$U,v$x,v$D){return null},v$a.apply=function(v$n){return null},v$x(0,v$a,"typeMix",function(){return 0}),v$n}(),v$f=function(){function v$n(){}return v$i(v$n,"laya.webgl.shader.ShaderValue"),v$n}(),v$F=function(){var v$x,v$D;function v$n(v$n,v$a,v$U){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new v$D,void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),this._cells=null,this._rowInfo=null,this._init(v$n,v$a),this._atlasID=v$U}v$i(v$n,"laya.webgl.atlas.AtlasGrid");var v$a=v$n.prototype;return v$a.getAltasID=function(){return this._atlasID},v$a.setAltasID=function(v$n){0<=v$n&&(this._atlasID=v$n)},v$a.addTex=function(v$n,v$a,v$U){var v$x=this._get(v$a,v$U);return 0==v$x.ret||(this._fill(v$x.x,v$x.y,v$a,v$U,v$n),this._texCount++),v$x},v$a._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},v$a._init=function(v$n,v$a){if(this._width=v$n,this._height=v$a,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=v$p(this._height);for(var v$U=0;v$U<this._height;v$U++)this._rowInfo[v$U]=new v$x;return this._clear(),!0},v$a._get=function(v$n,v$a){var v$U=new v$o;if(v$n>=this._failSize.width&&v$a>=this._failSize.height)return v$U;for(var v$x=-1,v$D=-1,v$p=this._width,v$Q=this._height,v$V=this._cells,v$y=0;v$y<v$Q;v$y++)if(!(this._rowInfo[v$y].spaceCount<v$n))for(var v$R=0;v$R<v$p;){var v$X=3*(v$y*v$p+v$R);if(0!=v$V[v$X]||v$V[1+v$X]<v$n||v$V[2+v$X]<v$a)v$R+=v$V[1+v$X];else{v$x=v$R,v$D=v$y;for(var v$z=0;v$z<v$n;v$z++)if(v$V[3*v$z+v$X+2]<v$a){v$x=-1;break}if(!(v$x<0))return v$U.ret=!0,v$U.x=v$x,v$U.y=v$D,v$U;v$R+=v$V[1+v$X]}}return v$U},v$a._fill=function(v$n,v$a,v$U,v$x,v$D){var v$p=this._width,v$Q=this._height;this._check(v$n+v$U<=v$p&&v$a+v$x<=v$Q);for(var v$V=v$a;v$V<v$x+v$a;++v$V){this._check(this._rowInfo[v$V].spaceCount>=v$U),this._rowInfo[v$V].spaceCount-=v$U;for(var v$y=0;v$y<v$U;v$y++){var v$R=3*(v$n+v$V*v$p+v$y);this._check(0==this._cells[v$R]),this._cells[v$R]=v$D,this._cells[1+v$R]=v$U,this._cells[2+v$R]=v$x}}if(0<v$n)for(v$V=0;v$V<v$x;++v$V){var v$X=0;for(v$y=v$n-1;0<=v$y&&0==this._cells[3*((v$a+v$V)*v$p+v$y)];--v$y,++v$X);for(v$y=v$X;0<v$y;--v$y)this._cells[3*((v$a+v$V)*v$p+v$n-v$y)+1]=v$y,this._check(0<v$y)}if(0<v$a)for(v$y=v$n;v$y<v$n+v$U;++v$y){for(v$X=0,v$V=v$a-1;0<=v$V&&0==this._cells[3*(v$y+v$V*v$p)];--v$V,v$X++);for(v$V=v$X;0<v$V;--v$V)this._cells[3*(v$y+(v$a-v$V)*v$p)+2]=v$V,this._check(0<v$V)}},v$a._check=function(v$n){0==v$n&&console.log("xtexMerger 错误啦")},v$a._clear=function(){for(var v$n=this._texCount=0;v$n<this._height;v$n++)this._rowInfo[v$n].spaceCount=this._width;for(var v$a=0;v$a<this._height;v$a++)for(var v$U=0;v$U<this._width;v$U++){var v$x=3*(v$a*this._width+v$U);this._cells[v$x]=0,this._cells[1+v$x]=this._width-v$U,this._cells[2+v$x]=this._width-v$a}this._failSize.width=this._width+1,this._failSize.height=this._height+1},v$n.__init$=function(){v$x=function(){function v$n(){this.spaceCount=0}return v$i(v$n,""),v$n}(),v$D=function(){function v$n(){this.width=0,this.height=0}return v$i(v$n,""),v$n}()},v$n}(),v$g=function(){function v$P(v$n,v$a,v$U,v$x){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=v$n,this._height=v$a,this._gridSize=v$U,this._maxAtlaserCount=v$x,this._gridNumX=v$n/v$U,this._gridNumY=v$a/v$U,this._curAtlasIndex=0,this._atlaserArray=[]}v$i(v$P,"laya.webgl.atlas.AtlasResourceManager");var v$n=v$P.prototype;return v$n.setAtlasParam=function(v$n,v$a,v$U,v$x){if(1==this._setAtlasParam)return v$P._sid_=0,this._width=v$n,this._height=v$a,this._gridSize=v$U,this._maxAtlaserCount=v$x,this._gridNumX=v$n/v$U,this._gridNumY=v$a/v$U,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},v$n.pushData=function(v$n){var v$a,v$U=v$n.bitmap,v$x=-1,v$D=null,v$p=0,v$Q=0;for(v$p=0,v$a=this._atlaserArray.length;v$p<v$a&&(v$Q=(this._curAtlasIndex+v$p)%v$a,-1==(v$x=(v$D=this._atlaserArray[v$Q]).findBitmapIsExist(v$U)));v$p++);if(-1!=v$x){var v$V=v$D.InAtlasWebGLImagesOffsetValue[v$x];return v$E=v$V[0],v$m=v$V[1],v$D.addToAtlas(v$n,v$E,v$m),!0}this._setAtlasParam=!1;for(var v$y=Math.ceil((v$n.bitmap.width+2)/this._gridSize),v$R=Math.ceil((v$n.bitmap.height+2)/this._gridSize),v$X=!1,v$z=0;v$z<2;v$z++){var v$i=this._maxAtlaserCount;for(v$p=0;v$p<v$i;v$p++){v$Q=(this._curAtlasIndex+v$p)%v$i,this._atlaserArray.length-1>=v$Q||this._atlaserArray.push(new v$Mn(this._gridNumX,this._gridNumY,this._width,this._height,v$P._sid_++));var v$q=this._atlaserArray[v$Q],v$E=0,v$m=0,v$b=v$q.addTex(1,v$y,v$R);if(v$b.ret){v$E=v$b.x*this._gridSize+1,v$m=v$b.y*this._gridSize+1,v$U.lock=!0,v$q.addToAtlasTexture(v$U,v$E,v$m),v$q.addToAtlas(v$n,v$E,v$m),v$X=!0,this._curAtlasIndex=v$Q;break}}if(v$X)break;this._atlaserArray.push(new v$Mn(this._gridNumX,this._gridNumY,this._width,this._height,v$P._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return v$X||console.log(">>>AtlasManager pushData error"),v$X},v$n.addToAtlas=function(v$n){laya.webgl.atlas.AtlasResourceManager.instance.pushData(v$n)},v$n.garbageCollection=function(){if(!0===this._needGC){for(var v$n=this._atlaserArray.length-this._maxAtlaserCount,v$a=0;v$a<v$n;v$a++)this._atlaserArray[v$a].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+v$n),this._atlaserArray.splice(0,v$n),this._needGC=!1}return!0},v$n.freeAll=function(){for(var v$n=0,v$a=this._atlaserArray.length;v$n<v$a;v$n++)this._atlaserArray[v$n].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},v$n.getAtlaserCount=function(){return this._atlaserArray.length},v$n.getAtlaserByIndex=function(v$n){return this._atlaserArray[v$n]},v$x(1,v$P,"instance",function(){return v$P._Instance||(v$P._Instance=new v$P(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),v$P._Instance}),v$x(1,v$P,"enabled",function(){return v$k.atlasEnable}),v$x(1,v$P,"atlasLimitWidth",function(){return v$P._atlasLimitWidth},function(v$n){v$P._atlasLimitWidth=v$n}),v$x(1,v$P,"atlasLimitHeight",function(){return v$P._atlasLimitHeight},function(v$n){v$P._atlasLimitHeight=v$n}),v$P._enable=function(){v$k.atlasEnable=!0},v$P._disable=function(){v$k.atlasEnable=!1},v$P.__init__=function(){v$P.atlasTextureWidth=2048,v$P.atlasTextureHeight=2048,v$P.maxTextureCount=6,v$P.atlasLimitWidth=512,v$P.atlasLimitHeight=512},v$P._atlasLimitWidth=0,v$P._atlasLimitHeight=0,v$P.gridSize=16,v$P.atlasTextureWidth=0,v$P.atlasTextureHeight=0,v$P.maxTextureCount=0,v$P._atlasRestore=0,v$P.BOARDER_TYPE_NO=0,v$P.BOARDER_TYPE_RIGHT=1,v$P.BOARDER_TYPE_LEFT=2,v$P.BOARDER_TYPE_BOTTOM=4,v$P.BOARDER_TYPE_TOP=8,v$P.BOARDER_TYPE_ALL=15,v$P._sid_=0,v$P._Instance=null,v$P}(),v$o=function(){function v$n(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return v$i(v$n,"laya.webgl.atlas.MergeFillInfo"),v$n}(),v$B=function(){function v$a(){}return v$i(v$a,"laya.webgl.canvas.BlendMode"),v$a._init_=function(v$n){v$a.fns=[v$a.BlendNormal,v$a.BlendAdd,v$a.BlendMultiply,v$a.BlendScreen,v$a.BlendOverlay,v$a.BlendLight,v$a.BlendMask,v$a.BlendDestinationOut],v$a.targetFns=[v$a.BlendNormalTarget,v$a.BlendAddTarget,v$a.BlendMultiplyTarget,v$a.BlendScreenTarget,v$a.BlendOverlayTarget,v$a.BlendLightTarget,v$a.BlendMask,v$a.BlendDestinationOut]},v$a.BlendNormal=function(v$n){v$n.blendFunc(1,771)},v$a.BlendAdd=function(v$n){v$n.blendFunc(1,772)},v$a.BlendMultiply=function(v$n){v$n.blendFunc(774,771)},v$a.BlendScreen=function(v$n){v$n.blendFunc(1,1)},v$a.BlendOverlay=function(v$n){v$n.blendFunc(1,769)},v$a.BlendLight=function(v$n){v$n.blendFunc(1,1)},v$a.BlendNormalTarget=function(v$n){v$n.blendFunc(1,771)},v$a.BlendAddTarget=function(v$n){v$n.blendFunc(1,772)},v$a.BlendMultiplyTarget=function(v$n){v$n.blendFunc(774,771)},v$a.BlendScreenTarget=function(v$n){v$n.blendFunc(1,1)},v$a.BlendOverlayTarget=function(v$n){v$n.blendFunc(1,769)},v$a.BlendLightTarget=function(v$n){v$n.blendFunc(1,1)},v$a.BlendMask=function(v$n){v$n.blendFunc(0,770)},v$a.BlendDestinationOut=function(v$n){v$n.blendFunc(0,0)},v$a.activeBlendFunction=null,v$a.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],v$a.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},v$a.NORMAL="normal",v$a.ADD="add",v$a.MULTIPLY="multiply",v$a.SCREEN="screen",v$a.LIGHT="light",v$a.OVERLAY="overlay",v$a.DESTINATIONOUT="destination-out",v$a.fns=[],v$a.targetFns=[],v$a}(),v$O=function(){function v$U(v$n){this._color=v$E.create("black"),this.setValue(v$n)}v$i(v$U,"laya.webgl.canvas.DrawStyle");var v$n=v$U.prototype;return v$n.setValue=function(v$n){if(v$n){if("string"==typeof v$n)return void(this._color=v$E.create(v$n));if(v$n instanceof laya.utils.Color)return void(this._color=v$n)}},v$n.reset=function(){this._color=v$E.create("black")},v$n.equal=function(v$n){return"string"==typeof v$n?this._color.strColor===v$n:v$n instanceof laya.utils.Color&&this._color.numColor===v$n.numColor},v$n.toColorStr=function(){return this._color.strColor},v$U.create=function(v$n){var v$a;if(v$n&&("string"==typeof v$n?v$a=v$E.create(v$n):v$n instanceof laya.utils.Color&&(v$a=v$n),v$a))return v$a._drawStyle||(v$a._drawStyle=new v$U(v$n));return laya.webgl.canvas.DrawStyle.DEFAULT},v$Q(v$U,["DEFAULT",function(){return this.DEFAULT=new v$U("#000000")}]),v$U}(),v$L=function(){function v$n(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];v$Kn.mainContext;this.ib=v$Jn.create(35048),this.vb=v$en.create(5)}v$i(v$n,"laya.webgl.canvas.Path");var v$a=v$n.prototype;return v$a.addPoint=function(v$n,v$a){this.tempArray.push(v$n,v$a)},v$a.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},v$a.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},v$a.polygon=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q;return this.geomatrys.push(this._curGeomatry=v$Q=new v$Hn(v$n,v$a,v$U,v$x,v$D,v$p)),v$x||(v$Q.fill=!1),null==v$p&&(v$Q.borderWidth=0),v$Q},v$a.setGeomtry=function(v$n){this.geomatrys.push(this._curGeomatry=v$n)},v$a.drawLine=function(v$n,v$a,v$U,v$x,v$D){var v$p;return this.closePath?this.geomatrys.push(this._curGeomatry=v$p=new v$cn(v$n,v$a,v$U,v$x,v$D)):this.geomatrys.push(this._curGeomatry=v$p=new v$un(v$n,v$a,v$U,v$x,v$D)),v$p.fill=!1,v$p},v$a.update=function(){var v$n=this.ib._byteLength,v$a=this.geomatrys.length;this.offset=v$n;for(var v$U=this.geoStart;v$U<v$a;v$U++)this.geomatrys[v$U].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=v$a,this.count=(this.ib._byteLength-v$n)/v$mn.BYTES_PIDX},v$a.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},v$a.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},v$n}(),v$d=function(){function v$V(){}v$i(v$V,"laya.webgl.canvas.save.SaveBase");var v$n=v$V.prototype;return v$W.imps(v$n,{"laya.webgl.canvas.save.ISaveData":!0}),v$n.isSaveMark=function(){return!1},v$n.restore=function(v$n){this._dataObj[this._valueName]=this._value,(v$V._cache[v$V._cache._length++]=this)._newSubmit&&(v$n._curSubmit=v$pn.RENDERBASE,v$n._renderKey=0)},v$V._createArray=function(){var v$n=[];return v$n._length=0,v$n},v$V._init=function(){var v$n=v$V._namemap={};return v$n[1]="ALPHA",v$n[2]="fillStyle",v$n[8]="font",v$n[256]="lineWidth",v$n[512]="strokeStyle",v$n[8192]="_mergeID",v$n[1024]=v$n[2048]=v$n[4096]=[],v$n[16384]="textBaseline",v$n[32768]="textAlign",v$n[65536]="_nBlendType",v$n[1048576]="shader",v$n[2097152]="filters",v$n},v$V.save=function(v$n,v$a,v$U,v$x){if((v$n._saveMark._saveuse&v$a)!==v$a){v$n._saveMark._saveuse|=v$a;var v$D=v$V._cache,v$p=0<v$D._length?v$D[--v$D._length]:new v$V;v$p._value=v$U[v$p._valueName=v$V._namemap[v$a]],v$p._dataObj=v$U,v$p._newSubmit=v$x;var v$Q=v$n._save;v$Q[v$Q._length++]=v$p}},v$V._cache=laya.webgl.canvas.save.SaveBase._createArray(),v$V._namemap=v$V._init(),v$V}(),v$S=function(){function v$p(){this._clipRect=new v$M}v$i(v$p,"laya.webgl.canvas.save.SaveClipRect");var v$n=v$p.prototype;return v$W.imps(v$n,{"laya.webgl.canvas.save.ISaveData":!0}),v$n.isSaveMark=function(){return!1},v$n.restore=function(v$n){v$n._clipRect=this._clipSaveRect,(v$p._cache[v$p._cache._length++]=this)._submitScissor.submitLength=v$n._submits._length-this._submitScissor.submitIndex,v$n._curSubmit=v$pn.RENDERBASE,v$n._renderKey=0},v$p.save=function(v$n,v$a){if(131072!=(131072&v$n._saveMark._saveuse)){v$n._saveMark._saveuse|=131072;var v$U=v$p._cache,v$x=0<v$U._length?v$U[--v$U._length]:new v$p;v$x._clipSaveRect=v$n._clipRect,v$n._clipRect=v$x._clipRect.copyFrom(v$n._clipRect),v$x._submitScissor=v$a;var v$D=v$n._save;v$D[v$D._length++]=v$x}},v$Q(v$p,["_cache",function(){return this._cache=v$d._createArray()}]),v$p}(),v$w=function(){function v$q(){this._contextX=0,this._contextY=0,this._clipRect=new v$M,this._rect=new v$M,this._matrix=new v$_}v$i(v$q,"laya.webgl.canvas.save.SaveClipRectStencil");var v$n=v$q.prototype;return v$W.imps(v$n,{"laya.webgl.canvas.save.ISaveData":!0}),v$n.isSaveMark=function(){return!1},v$n.restore=function(v$n){v$Xn.restore(v$n,this._rect,this._saveMatrix,this._contextX,this._contextY),v$n._clipRect=this._clipSaveRect,v$n._curMat=this._saveMatrix,v$n._x=this._contextX,v$n._y=this._contextY,v$q._cache[v$q._cache._length++]=this,v$n._curSubmit=v$pn.RENDERBASE},v$q.save=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){if(262144!=(262144&v$n._saveMark._saveuse)){v$n._saveMark._saveuse|=262144;var v$X=v$q._cache,v$z=0<v$X._length?v$X[--v$X._length]:new v$q;v$z._clipSaveRect=v$n._clipRect,v$z._clipRect.setTo(v$Q,v$V,v$y,v$R),v$n._clipRect=v$z._clipRect,v$z._rect.x=v$U,v$z._rect.y=v$x,v$z._rect.width=v$D,v$z._rect.height=v$p,v$z._contextX=v$n._x,v$z._contextY=v$n._y,v$z._saveMatrix=v$n._curMat,v$n._curMat.copyTo(v$z._matrix),v$n._curMat=v$z._matrix,v$z._submitStencil=v$a;var v$i=v$n._save;v$i[v$i._length++]=v$z}},v$Q(v$q,["_cache",function(){return this._cache=v$d._createArray()}]),v$q}(),v$s=function(){function v$x(){this._saveuse=0}v$i(v$x,"laya.webgl.canvas.save.SaveMark");var v$n=v$x.prototype;return v$W.imps(v$n,{"laya.webgl.canvas.save.ISaveData":!0}),v$n.isSaveMark=function(){return!0},v$n.restore=function(v$n){v$n._saveMark=this._preSaveMark,v$x._no[v$x._no._length++]=this},v$x.Create=function(v$n){var v$a=v$x._no,v$U=0<v$a._length?v$a[--v$a._length]:new v$x;return v$U._saveuse=0,v$U._preSaveMark=v$n._saveMark,v$n._saveMark=v$U},v$Q(v$x,["_no",function(){return this._no=v$d._createArray()}]),v$x}(),v$C=function(){function v$p(){this._matrix=new v$_}v$i(v$p,"laya.webgl.canvas.save.SaveTransform");var v$n=v$p.prototype;return v$W.imps(v$n,{"laya.webgl.canvas.save.ISaveData":!0}),v$n.isSaveMark=function(){return!1},v$n.restore=function(v$n){v$n._curMat=this._savematrix,v$p._no[v$p._no._length++]=this},v$p.save=function(v$n){var v$a=v$n._saveMark;if(2048!=(2048&v$a._saveuse)){v$a._saveuse|=2048;var v$U=v$p._no,v$x=0<v$U._length?v$U[--v$U._length]:new v$p;v$x._savematrix=v$n._curMat,v$n._curMat=v$n._curMat.copyTo(v$x._matrix);var v$D=v$n._save;v$D[v$D._length++]=v$x}},v$Q(v$p,["_no",function(){return this._no=v$d._createArray()}]),v$p}(),v$t=function(){function v$D(){}v$i(v$D,"laya.webgl.canvas.save.SaveTranslate");var v$n=v$D.prototype;return v$W.imps(v$n,{"laya.webgl.canvas.save.ISaveData":!0}),v$n.isSaveMark=function(){return!1},v$n.restore=function(v$n){v$n._curMat;v$n._x=this._x,v$n._y=this._y,v$D._no[v$D._no._length++]=this},v$D.save=function(v$n){var v$a=v$D._no,v$U=0<v$a._length?v$a[--v$a._length]:new v$D;v$U._x=v$n._x,v$U._y=v$n._y;var v$x=v$n._save;v$x[v$x._length++]=v$U},v$Q(v$D,["_no",function(){return this._no=v$d._createArray()}]),v$D}(),v$r=function(){function v$n(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new v$M}v$i(v$n,"laya.webgl.resource.RenderTargetMAX");var v$a=v$n.prototype;return v$a.setSP=function(v$n){this._sp=v$n},v$a.size=function(v$n,v$a){var v$U=this;this._width!==v$n||this._height!==v$a?(this.repaint=!0,this._width=v$n,this._height=v$a,this.target?this.target.size(v$n,v$a):this.target=v$jn.create(v$n,v$a),this.target.hasListener("recovered")||this.target.on("recovered",this,function(v$n){v$W.timer.callLater(v$U._sp,v$U._sp.repaint)})):this.target.size(v$n,v$a)},v$a._flushToTarget=function(v$n,v$a){if(!v$a._destroy){var v$U=v$An.worldScissorTest,v$x=v$An.worldClipRect;v$An.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,v$An.worldScissorTest=!1,v$Kn.mainContext.disable(3089);var v$D=v$An.worldAlpha,v$p=v$An.worldMatrix4,v$Q=v$An.worldMatrix,v$V=v$An.worldFilters,v$y=v$An.worldShaderDefines;if(v$An.worldMatrix=v$_.EMPTY,v$An.restoreTempArray(),v$An.worldMatrix4=v$An.TEMPMAT4_ARRAY,v$An.worldAlpha=1,v$An.worldFilters=null,v$An.worldShaderDefines=null,v$ln.activeShader=null,v$a.start(),v$k.showCanvasMark?v$a.clear(0,1,0,.3):v$a.clear(0,0,0,0),v$n.flush(),v$a.end(),v$ln.activeShader=null,v$An.worldAlpha=v$D,v$An.worldMatrix4=v$p,v$An.worldMatrix=v$Q,v$An.worldFilters=v$V,v$An.worldShaderDefines=v$y,v$An.worldScissorTest=v$U){var v$R=v$An.height-v$x.y-v$x.height;v$Kn.mainContext.scissor(v$x.x,v$R,v$x.width,v$x.height),v$Kn.mainContext.enable(3089)}v$An.worldClipRect=v$x}},v$a.flush=function(v$n){this.repaint&&(this._flushToTarget(v$n,this.target),this.repaint=!1)},v$a.drawTo=function(v$n,v$a,v$U,v$x,v$D){v$n.drawTexture(this.target.getTexture(),v$a,v$U,v$x,v$D,0,0)},v$a.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},v$n}(),v$J=function(){function v$n(){this.ALPHA=1,this.shaderType=0,this.defines=new v$Zn}return v$i(v$n,"laya.webgl.shader.d2.Shader2D"),v$n.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},v$n.__init__=function(){var v$n,v$a;v$sn.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),v$sn.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),v$sn.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),v$sn.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),v$sn.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),v$sn.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),v$sn.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),v$sn.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),v$n="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",v$a='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',v$sn.preCompile2D(0,1,v$n,v$a,null),v$n="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",v$a='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',v$sn.preCompile2D(0,2,v$n,v$a,null),v$n="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",v$a="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",v$sn.preCompile2D(0,4,v$n,v$a,null),v$n="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",v$a='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',v$sn.preCompile2D(0,256,v$n,v$a,null),v$n="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",v$a="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",v$sn.preCompile2D(0,512,v$n,v$a,null)},v$n}(),v$e=function(){function v$a(v$n,v$a,v$U){this._value=0,this._name2int=v$n,this._int2name=v$a,this._int2nameMap=v$U}v$i(v$a,"laya.webgl.shader.ShaderDefines");var v$n=v$a.prototype;return v$n.add=function(v$n){return"string"==typeof v$n&&(v$n=this._name2int[v$n]),this._value|=v$n,this._value},v$n.addInt=function(v$n){return this._value|=v$n,this._value},v$n.remove=function(v$n){return"string"==typeof v$n&&(v$n=this._name2int[v$n]),this._value&=~v$n,this._value},v$n.isDefine=function(v$n){return(this._value&v$n)===v$n},v$n.getValue=function(){return this._value},v$n.setValue=function(v$n){this._value=v$n},v$n.toNameDic=function(){var v$n=this._int2nameMap[this._value];return v$n||v$a._toText(this._value,this._int2name,this._int2nameMap)},v$a._reg=function(v$n,v$a,v$U,v$x){v$x[v$U[v$n]=v$a]=v$n},v$a._toText=function(v$n,v$a,v$U){var v$x=v$U[v$n];if(v$x)return v$x;for(var v$D={},v$p=1,v$Q=0;v$Q<32&&!(v$n<(v$p=1<<v$Q));v$Q++)if(v$n&v$p){var v$V=v$a[v$p];v$V&&(v$D[v$V]="")}return v$U[v$n]=v$D},v$a._toInt=function(v$n,v$a){for(var v$U=v$n.split("."),v$x=0,v$D=0,v$p=v$U.length;v$D<v$p;v$D++){var v$Q=v$a[v$U[v$D]];if(!v$Q)throw new Error("Defines to int err:"+v$n+"/"+v$U[v$D]);v$x|=v$Q}return v$x},v$a}(),v$nn=function(){function v$Q(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new v$_}v$i(v$Q,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var v$n=v$Q.prototype;return v$n.init=function(v$n,v$a,v$U){if(v$a)this._vs=v$a;else{this._vs=[];var v$x=v$n.width,v$D=v$n.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(v$x,0,1,0,1,1,1,1),this._vs.push(v$x,v$D,1,1,1,1,1,1),this._vs.push(0,v$D,0,1,1,1,1,1)}v$U?this._ps=v$U:(v$Q._defaultPS||(v$Q._defaultPS=[]).push(0,1,3,3,1,2),this._ps=v$Q._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=v$n},v$n.init2=function(v$n,v$a,v$U,v$x,v$D){this.transform&&(this.transform=null),v$U?this._ps=v$U:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=v$x,this._uvs=v$D,this.mEleNum=this._ps.length,this.mTexture=v$n,(v$P.isConchNode||v$P.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},v$n._initMyData=function(){var v$n=0,v$a=0,v$U=4*this._verticles.length;this._vs=v$Q._tempVS;var v$x=!1;if(v$P.isConchNode||v$P.isConchApp?(this._vs.length=v$U,v$x=!0):this._vs.length<v$U&&(this._vs.length=v$U,v$x=!0),v$Q._tVSLen=v$U,v$x)for(;v$n<v$U;)this._vs[v$n]=this._verticles[v$a],this._vs[v$n+1]=this._verticles[v$a+1],this._vs[v$n+2]=this._uvs[v$a],this._vs[v$n+3]=this._uvs[v$a+1],this._vs[v$n+4]=1,this._vs[v$n+5]=1,this._vs[v$n+6]=1,this._vs[v$n+7]=1,v$n+=8,v$a+=2;else for(;v$n<v$U;)this._vs[v$n]=this._verticles[v$a],this._vs[v$n+1]=this._verticles[v$a+1],this._vs[v$n+2]=this._uvs[v$a],this._vs[v$n+3]=this._uvs[v$a+1],v$n+=8,v$a+=2},v$n.getData2=function(v$n,v$a,v$U){var v$x;this.mVBBuffer=v$n,this.mIBBuffer=v$a,this._initMyData(),v$n.appendEx2(this._vs,Float32Array,v$Q._tVSLen,4),this._indexStart=v$a._byteLength,(v$x=v$Q._tempIB).length<this._ps.length&&(v$x.length=this._ps.length);for(var v$D=0,v$p=this._ps.length;v$D<v$p;v$D++)v$x[v$D]=this._ps[v$D]+v$U;v$a.appendEx2(v$x,Uint16Array,this._ps.length,2)},v$n.getData=function(v$n,v$a,v$U){if(this.mVBBuffer=v$n,this.mIBBuffer=v$a,v$n.append(this.mVBData),this._indexStart=v$a._byteLength,this.mIBData.start!=v$U){for(var v$x=0,v$D=this._ps.length;v$x<v$D;v$x++)this.mIBData[v$x]=this._ps[v$x]+v$U;this.mIBData.start=v$U}v$a.append(this.mIBData)},v$n.render=function(v$n,v$a,v$U){if(v$P.isWebGL&&this.mTexture){v$n._renderKey=0,v$n._shader2D.glTexture=null,v$an.getInstance().addSkinMesh(this);var v$x=v$pn.createShape(v$n,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,v$Nn.create(512,0));this.transform||(this.transform=v$_.EMPTY),this.transform.translate(v$a,v$U),v$_.mul(this.transform,v$n._curMat,this._tempMatrix),this.transform.translate(-v$a,-v$U);var v$D=v$x.shaderValue,v$p=v$D.u_mmat2||v$An.getMatrArray();v$An.mat2MatArray(this._tempMatrix,v$p),v$D.textureHost=this.mTexture,v$D.offsetX=0,v$D.offsetY=0,v$D.u_mmat2=v$p,v$D.ALPHA=v$n._shader2D.ALPHA,v$n._submits[v$n._submits._length++]=v$x}else v$P.isConchApp&&this.mTexture&&(this.transform||(this.transform=v$_.EMPTY),v$n.setSkinMesh&&v$n.setSkinMesh(v$a,v$U,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},v$Q._tempVS=[],v$Q._tempIB=[],v$Q._defaultPS=null,v$Q._tVSLen=0,v$Q}(),v$an=function(){function v$n(){this.ib=null,this.vb=null;v$Kn.mainContext;this.ib=v$Jn.create(35048),this.vb=v$en.create(8)}v$i(v$n,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var v$a=v$n.prototype;return v$a.addSkinMesh=function(v$n){v$n.getData2(this.vb,this.ib,this.vb._byteLength/32)},v$a.reset=function(){this.vb.clear(),this.ib.clear()},v$n.getInstance=function(){return v$n.instance=v$n.instance||new v$n},v$n.instance=null,v$n}(),v$Un=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===v$y&&(v$y=0),this.x=v$n,this.y=v$a,this.width=v$U,this.height=v$x,this.edges=v$D,this.color=v$p,this.borderWidth=v$Q,this.borderColor=v$V}v$i(v$n,"laya.webgl.shapes.BasePoly");var v$a=v$n.prototype;return v$W.imps(v$a,{"laya.webgl.shapes.IShape":!0}),v$a.getData=function(v$n,v$a,v$U){},v$a.rebuild=function(v$n){},v$a.setMatrix=function(v$n){},v$a.needUpdate=function(v$n){return!0},v$a.sector=function(v$n,v$a,v$U){var v$x=this.x,v$D=this.y,v$p=this.edges,v$Q=(this.r1-this.r0)/v$p,v$V=this.width,v$y=this.height,v$R=this.color,v$X=(v$R>>16&255)/255,v$z=(v$R>>8&255)/255,v$i=(255&v$R)/255;v$n.push(v$x,v$D,v$X,v$z,v$i);for(var v$q=0;v$q<v$p+1;v$q++)v$n.push(v$x+Math.sin(v$Q*v$q+this.r0)*v$V,v$D+Math.cos(v$Q*v$q+this.r0)*v$y),v$n.push(v$X,v$z,v$i);for(v$q=0;v$q<v$p;v$q++)v$a.push(v$U,v$U+v$q+1,v$U+v$q+2)},v$a.createLine2=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q,v$V,v$y,v$R,v$X,v$z,v$i,v$q,v$E,v$m,v$b,v$P,v$A,v$T,v$K,v$Y,v$W,v$k,v$N,v$_,v$$=v$n.concat(),v$M=v$D,v$Z=this.borderColor,v$u=(v$Z>>16&255)/255,v$c=(v$Z>>8&255)/255,v$H=(255&v$Z)/255,v$G=v$$.length/2,v$I=v$x,v$v=v$U/2;v$y=v$$[0],v$R=v$$[1],v$m=v$y-(v$X=v$$[2]),v$E=(v$E=-(v$R-(v$z=v$$[3])))/(v$_=Math.sqrt(v$E*v$E+v$m*v$m))*v$v,v$m=v$m/v$_*v$v,v$M.push(v$y-v$E+this.x,v$R-v$m+this.y,v$u,v$c,v$H,v$y+v$E+this.x,v$R+v$m+this.y,v$u,v$c,v$H);for(var v$l=1;v$l<v$G-1;v$l++)v$y=v$$[2*(v$l-1)],v$R=v$$[2*(v$l-1)+1],v$X=v$$[2*v$l],v$z=v$$[2*v$l+1],v$i=v$$[2*(v$l+1)],v$q=v$$[2*(v$l+1)+1],v$m=v$y-v$X,v$P=v$X-v$i,v$K=(-(v$E=(v$E=-(v$R-v$z))/(v$_=Math.sqrt(v$E*v$E+v$m*v$m))*v$v)+v$y)*(-(v$m=v$m/v$_*v$v)+v$z)-(-v$E+v$X)*(-v$m+v$R),v$k=(-(v$b=(v$b=-(v$z-v$q))/(v$_=Math.sqrt(v$b*v$b+v$P*v$P))*v$v)+v$i)*(-(v$P=v$P/v$_*v$v)+v$z)-(-v$b+v$X)*(-v$P+v$q),v$N=(v$A=-v$m+v$R-(-v$m+v$z))*(v$W=-v$b+v$X-(-v$b+v$i))-(v$Y=-v$P+v$q-(-v$P+v$z))*(v$T=-v$E+v$X-(-v$E+v$y)),Math.abs(v$N)<.1?(v$N+=10.1,v$M.push(v$X-v$E+this.x,v$z-v$m+this.y,v$u,v$c,v$H,v$X+v$E+this.x,v$z+v$m+this.y,v$u,v$c,v$H)):(((v$Q=(v$T*v$k-v$W*v$K)/v$N)-v$X)*(v$Q-v$X)+((v$V=(v$Y*v$K-v$A*v$k)/v$N)-v$z)+(v$V-v$z),v$M.push(v$Q+this.x,v$V+this.y,v$u,v$c,v$H,v$X-(v$Q-v$X)+this.x,v$z-(v$V-v$z)+this.y,v$u,v$c,v$H));v$y=v$$[v$$.length-4],v$R=v$$[v$$.length-3],v$m=v$y-(v$X=v$$[v$$.length-2]),v$E=(v$E=-(v$R-(v$z=v$$[v$$.length-1])))/(v$_=Math.sqrt(v$E*v$E+v$m*v$m))*v$v,v$m=v$m/v$_*v$v,v$M.push(v$X-v$E+this.x,v$z-v$m+this.y,v$u,v$c,v$H,v$X+v$E+this.x,v$z+v$m+this.y,v$u,v$c,v$H);var v$j=v$p;for(v$l=1;v$l<v$j;v$l++)v$a.push(v$I+2*(v$l-1),v$I+2*(v$l-1)+1,v$I+2*v$l+1,v$I+2*v$l+1,v$I+2*v$l,v$I+2*(v$l-1));return v$M},v$a.createLine=function(v$n,v$a,v$U,v$x){var v$D=v$n.concat(),v$p=v$n,v$Q=this.borderColor,v$V=(v$Q>>16&255)/255,v$y=(v$Q>>8&255)/255,v$R=(255&v$Q)/255;v$D.splice(0,5);var v$X,v$z,v$i,v$q,v$E,v$m,v$b,v$P,v$A,v$T,v$K,v$Y,v$W,v$k,v$N,v$_,v$$,v$M,v$Z,v$u,v$c=v$D.length/5,v$H=v$x,v$G=v$U/2;v$i=v$D[0],v$q=v$D[1],v$T=v$i-(v$E=v$D[5]),v$A=(v$A=-(v$q-(v$m=v$D[6])))/(v$u=Math.sqrt(v$A*v$A+v$T*v$T))*v$G,v$T=v$T/v$u*v$G,v$p.push(v$i-v$A,v$q-v$T,v$V,v$y,v$R,v$i+v$A,v$q+v$T,v$V,v$y,v$R);for(var v$I=1;v$I<v$c-1;v$I++)v$i=v$D[5*(v$I-1)],v$q=v$D[5*(v$I-1)+1],v$E=v$D[5*v$I],v$m=v$D[5*v$I+1],v$b=v$D[5*(v$I+1)],v$P=v$D[5*(v$I+1)+1],v$T=v$i-v$E,v$Y=v$E-v$b,v$N=(-(v$A=(v$A=-(v$q-v$m))/(v$u=Math.sqrt(v$A*v$A+v$T*v$T))*v$G)+v$i)*(-(v$T=v$T/v$u*v$G)+v$m)-(-v$A+v$E)*(-v$T+v$q),v$M=(-(v$K=(v$K=-(v$m-v$P))/(v$u=Math.sqrt(v$K*v$K+v$Y*v$Y))*v$G)+v$b)*(-(v$Y=v$Y/v$u*v$G)+v$m)-(-v$K+v$E)*(-v$Y+v$P),v$Z=(v$W=-v$T+v$q-(-v$T+v$m))*(v$$=-v$K+v$E-(-v$K+v$b))-(v$_=-v$Y+v$P-(-v$Y+v$m))*(v$k=-v$A+v$E-(-v$A+v$i)),Math.abs(v$Z)<.1?(v$Z+=10.1,v$p.push(v$E-v$A,v$m-v$T,v$V,v$y,v$R,v$E+v$A,v$m+v$T,v$V,v$y,v$R)):(((v$X=(v$k*v$M-v$$*v$N)/v$Z)-v$E)*(v$X-v$E)+((v$z=(v$_*v$N-v$W*v$M)/v$Z)-v$m)+(v$z-v$m),v$p.push(v$X,v$z,v$V,v$y,v$R,v$E-(v$X-v$E),v$m-(v$z-v$m),v$V,v$y,v$R));v$i=v$D[v$D.length-10],v$q=v$D[v$D.length-9],v$T=v$i-(v$E=v$D[v$D.length-5]),v$A=(v$A=-(v$q-(v$m=v$D[v$D.length-4])))/(v$u=Math.sqrt(v$A*v$A+v$T*v$T))*v$G,v$T=v$T/v$u*v$G,v$p.push(v$E-v$A,v$m-v$T,v$V,v$y,v$R,v$E+v$A,v$m+v$T,v$V,v$y,v$R);var v$v=this.edges+1;for(v$I=1;v$I<v$v;v$I++)v$a.push(v$H+2*(v$I-1),v$H+2*(v$I-1)+1,v$H+2*v$I+1,v$H+2*v$I+1,v$H+2*v$I,v$H+2*(v$I-1));return v$p},v$a.createLoopLine=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=v$n.concat(),v$V=v$D||v$n,v$y=this.borderColor,v$R=(v$y>>16&255)/255,v$X=(v$y>>8&255)/255,v$z=(255&v$y)/255;v$Q.splice(0,5);var v$i=[v$Q[0],v$Q[1]],v$q=[v$Q[v$Q.length-5],v$Q[v$Q.length-4]],v$E=v$q[0]+.5*(v$i[0]-v$q[0]),v$m=v$q[1]+.5*(v$i[1]-v$q[1]);v$Q.unshift(v$E,v$m,0,0,0),v$Q.push(v$E,v$m,0,0,0);var v$b,v$P,v$A,v$T,v$K,v$Y,v$W,v$k,v$N,v$_,v$$,v$M,v$Z,v$u,v$c,v$H,v$G,v$I,v$v,v$l,v$j=v$Q.length/5,v$h=v$x,v$f=v$U/2;v$A=v$Q[0],v$T=v$Q[1],v$_=v$A-(v$K=v$Q[5]),v$N=(v$N=-(v$T-(v$Y=v$Q[6])))/(v$l=Math.sqrt(v$N*v$N+v$_*v$_))*v$f,v$_=v$_/v$l*v$f,v$V.push(v$A-v$N,v$T-v$_,v$R,v$X,v$z,v$A+v$N,v$T+v$_,v$R,v$X,v$z);for(var v$F=1;v$F<v$j-1;v$F++)v$A=v$Q[5*(v$F-1)],v$T=v$Q[5*(v$F-1)+1],v$K=v$Q[5*v$F],v$Y=v$Q[5*v$F+1],v$W=v$Q[5*(v$F+1)],v$k=v$Q[5*(v$F+1)+1],v$_=v$A-v$K,v$M=v$K-v$W,v$c=(-(v$N=(v$N=-(v$T-v$Y))/(v$l=Math.sqrt(v$N*v$N+v$_*v$_))*v$f)+v$A)*(-(v$_=v$_/v$l*v$f)+v$Y)-(-v$N+v$K)*(-v$_+v$T),v$I=(-(v$$=(v$$=-(v$Y-v$k))/(v$l=Math.sqrt(v$$*v$$+v$M*v$M))*v$f)+v$W)*(-(v$M=v$M/v$l*v$f)+v$Y)-(-v$$+v$K)*(-v$M+v$k),v$v=(v$Z=-v$_+v$T-(-v$_+v$Y))*(v$G=-v$$+v$K-(-v$$+v$W))-(v$H=-v$M+v$k-(-v$M+v$Y))*(v$u=-v$N+v$K-(-v$N+v$A)),Math.abs(v$v)<.1?(v$v+=10.1,v$V.push(v$K-v$N,v$Y-v$_,v$R,v$X,v$z,v$K+v$N,v$Y+v$_,v$R,v$X,v$z)):(((v$b=(v$u*v$I-v$G*v$c)/v$v)-v$K)*(v$b-v$K)+((v$P=(v$H*v$c-v$Z*v$I)/v$v)-v$Y)+(v$P-v$Y),v$V.push(v$b,v$P,v$R,v$X,v$z,v$K-(v$b-v$K),v$Y-(v$P-v$Y),v$R,v$X,v$z));v$p&&(v$a=v$p);var v$g=this.edges+1;for(v$F=1;v$F<v$g;v$F++)v$a.push(v$h+2*(v$F-1),v$h+2*(v$F-1)+1,v$h+2*v$F+1,v$h+2*v$F+1,v$h+2*v$F,v$h+2*(v$F-1));return v$a.push(v$h+2*(v$F-1),v$h+2*(v$F-1)+1,v$h+1,v$h+1,v$h,v$h+2*(v$F-1)),v$V},v$n}(),v$xn=function(){function v$m(){}return v$i(v$m,"laya.webgl.shapes.Earcut"),v$m.earcut=function(v$n,v$a,v$U){v$U=v$U||2;var v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X=v$a&&v$a.length,v$z=v$X?v$a[0]*v$U:v$n.length,v$i=v$m.linkedList(v$n,0,v$z,v$U,!0),v$q=[];if(!v$i)return v$q;if(v$X&&(v$i=v$m.eliminateHoles(v$n,v$a,v$i,v$U)),v$n.length>80*v$U){v$x=v$p=v$n[0],v$D=v$Q=v$n[1];for(var v$E=v$U;v$E<v$z;v$E+=v$U)(v$V=v$n[v$E])<v$x&&(v$x=v$V),(v$y=v$n[v$E+1])<v$D&&(v$D=v$y),v$p<v$V&&(v$p=v$V),v$Q<v$y&&(v$Q=v$y);v$R=0!==(v$R=Math.max(v$p-v$x,v$Q-v$D))?1/v$R:0}return v$m.earcutLinked(v$i,v$q,v$U,v$x,v$D,v$R),v$q},v$m.linkedList=function(v$n,v$a,v$U,v$x,v$D){var v$p,v$Q;if(v$D===0<v$m.signedArea(v$n,v$a,v$U,v$x))for(v$p=v$a;v$p<v$U;v$p+=v$x)v$Q=v$m.insertNode(v$p,v$n[v$p],v$n[v$p+1],v$Q);else for(v$p=v$U-v$x;v$a<=v$p;v$p-=v$x)v$Q=v$m.insertNode(v$p,v$n[v$p],v$n[v$p+1],v$Q);return v$Q&&v$m.equals(v$Q,v$Q.next)&&(v$m.removeNode(v$Q),v$Q=v$Q.next),v$Q},v$m.filterPoints=function(v$n,v$a){if(!v$n)return v$n;v$a||(v$a=v$n);var v$U,v$x=v$n;do{if(v$U=!1,v$x.steiner||!v$m.equals(v$x,v$x.next)&&0!==v$m.area(v$x.prev,v$x,v$x.next))v$x=v$x.next;else{if(v$m.removeNode(v$x),(v$x=v$a=v$x.prev)===v$x.next)break;v$U=!0}}while(v$U||v$x!==v$a);return v$a},v$m.earcutLinked=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){if(v$n){!v$Q&&v$p&&v$m.indexCurve(v$n,v$x,v$D,v$p);for(var v$V,v$y,v$R=v$n;v$n.prev!==v$n.next;)if(v$V=v$n.prev,v$y=v$n.next,v$p?v$m.isEarHashed(v$n,v$x,v$D,v$p):v$m.isEar(v$n))v$a.push(v$V.i/v$U),v$a.push(v$n.i/v$U),v$a.push(v$y.i/v$U),v$m.removeNode(v$n),v$n=v$y.next,v$R=v$y.next;else if((v$n=v$y)===v$R){v$Q?1===v$Q?(v$n=v$m.cureLocalIntersections(v$n,v$a,v$U),v$m.earcutLinked(v$n,v$a,v$U,v$x,v$D,v$p,2)):2===v$Q&&v$m.splitEarcut(v$n,v$a,v$U,v$x,v$D,v$p):v$m.earcutLinked(v$m.filterPoints(v$n,null),v$a,v$U,v$x,v$D,v$p,1);break}}},v$m.isEar=function(v$n){var v$a=v$n.prev,v$U=v$n,v$x=v$n.next;if(0<=v$m.area(v$a,v$U,v$x))return!1;for(var v$D=v$n.next.next;v$D!==v$n.prev;){if(v$m.pointInTriangle(v$a.x,v$a.y,v$U.x,v$U.y,v$x.x,v$x.y,v$D.x,v$D.y)&&0<=v$m.area(v$D.prev,v$D,v$D.next))return!1;v$D=v$D.next}return!0},v$m.isEarHashed=function(v$n,v$a,v$U,v$x){var v$D=v$n.prev,v$p=v$n,v$Q=v$n.next;if(0<=v$m.area(v$D,v$p,v$Q))return!1;for(var v$V=v$D.x<v$p.x?v$D.x<v$Q.x?v$D.x:v$Q.x:v$p.x<v$Q.x?v$p.x:v$Q.x,v$y=v$D.y<v$p.y?v$D.y<v$Q.y?v$D.y:v$Q.y:v$p.y<v$Q.y?v$p.y:v$Q.y,v$R=v$D.x>v$p.x?v$D.x>v$Q.x?v$D.x:v$Q.x:v$p.x>v$Q.x?v$p.x:v$Q.x,v$X=v$D.y>v$p.y?v$D.y>v$Q.y?v$D.y:v$Q.y:v$p.y>v$Q.y?v$p.y:v$Q.y,v$z=v$m.zOrder(v$V,v$y,v$a,v$U,v$x),v$i=v$m.zOrder(v$R,v$X,v$a,v$U,v$x),v$q=v$n.nextZ;v$q&&v$q.z<=v$i;){if(v$q!==v$n.prev&&v$q!==v$n.next&&v$m.pointInTriangle(v$D.x,v$D.y,v$p.x,v$p.y,v$Q.x,v$Q.y,v$q.x,v$q.y)&&0<=v$m.area(v$q.prev,v$q,v$q.next))return!1;v$q=v$q.nextZ}for(v$q=v$n.prevZ;v$q&&v$q.z>=v$z;){if(v$q!==v$n.prev&&v$q!==v$n.next&&v$m.pointInTriangle(v$D.x,v$D.y,v$p.x,v$p.y,v$Q.x,v$Q.y,v$q.x,v$q.y)&&0<=v$m.area(v$q.prev,v$q,v$q.next))return!1;v$q=v$q.prevZ}return!0},v$m.cureLocalIntersections=function(v$n,v$a,v$U){var v$x=v$n;do{var v$D=v$x.prev,v$p=v$x.next.next;!v$m.equals(v$D,v$p)&&v$m.intersects(v$D,v$x,v$x.next,v$p)&&v$m.locallyInside(v$D,v$p)&&v$m.locallyInside(v$p,v$D)&&(v$a.push(v$D.i/v$U),v$a.push(v$x.i/v$U),v$a.push(v$p.i/v$U),v$m.removeNode(v$x),v$m.removeNode(v$x.next),v$x=v$n=v$p),v$x=v$x.next}while(v$x!==v$n);return v$x},v$m.splitEarcut=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=v$n;do{for(var v$V=v$Q.next.next;v$V!==v$Q.prev;){if(v$Q.i!==v$V.i&&v$m.isValidDiagonal(v$Q,v$V)){var v$y=v$m.splitPolygon(v$Q,v$V);return v$Q=v$m.filterPoints(v$Q,v$Q.next),v$y=v$m.filterPoints(v$y,v$y.next),v$m.earcutLinked(v$Q,v$a,v$U,v$x,v$D,v$p),void v$m.earcutLinked(v$y,v$a,v$U,v$x,v$D,v$p)}v$V=v$V.next}v$Q=v$Q.next}while(v$Q!==v$n)},v$m.eliminateHoles=function(v$n,v$a,v$U,v$x){var v$D,v$p,v$Q,v$V,v$y,v$R=[];for(v$D=0,v$p=v$a.length;v$D<v$p;v$D++)v$Q=v$a[v$D]*v$x,v$V=v$D<v$p-1?v$a[v$D+1]*v$x:v$n.length,(v$y=v$m.linkedList(v$n,v$Q,v$V,v$x,!1))===v$y.next&&(v$y.steiner=!0),v$R.push(v$m.getLeftmost(v$y));for(v$R.sort(v$m.compareX),v$D=0;v$D<v$R.length;v$D++)v$m.eliminateHole(v$R[v$D],v$U),v$U=v$m.filterPoints(v$U,v$U.next);return v$U},v$m.compareX=function(v$n,v$a){return v$n.x-v$a.x},v$m.eliminateHole=function(v$n,v$a){if(v$a=v$m.findHoleBridge(v$n,v$a)){var v$U=v$m.splitPolygon(v$a,v$n);v$m.filterPoints(v$U,v$U.next)}},v$m.findHoleBridge=function(v$n,v$a){var v$U,v$x=v$a,v$D=v$n.x,v$p=v$n.y,v$Q=-1/0;do{if(v$p<=v$x.y&&v$p>=v$x.next.y&&v$x.next.y!==v$x.y){var v$V=v$x.x+(v$p-v$x.y)*(v$x.next.x-v$x.x)/(v$x.next.y-v$x.y);if(v$V<=v$D&&v$Q<v$V){if((v$Q=v$V)===v$D){if(v$p===v$x.y)return v$x;if(v$p===v$x.next.y)return v$x.next}v$U=v$x.x<v$x.next.x?v$x:v$x.next}}v$x=v$x.next}while(v$x!==v$a);if(!v$U)return null;if(v$D===v$Q)return v$U.prev;var v$y,v$R=v$U,v$X=v$U.x,v$z=v$U.y,v$i=1/0;for(v$x=v$U.next;v$x!==v$R;)v$D>=v$x.x&&v$x.x>=v$X&&v$D!==v$x.x&&v$m.pointInTriangle(v$p<v$z?v$D:v$Q,v$p,v$X,v$z,v$p<v$z?v$Q:v$D,v$p,v$x.x,v$x.y)&&((v$y=Math.abs(v$p-v$x.y)/(v$D-v$x.x))<v$i||v$y===v$i&&v$x.x>v$U.x)&&v$m.locallyInside(v$x,v$n)&&(v$U=v$x,v$i=v$y),v$x=v$x.next;return v$U},v$m.indexCurve=function(v$n,v$a,v$U,v$x){for(var v$D=v$n;null===v$D.z&&(v$D.z=v$m.zOrder(v$D.x,v$D.y,v$a,v$U,v$x)),v$D.prevZ=v$D.prev,v$D.nextZ=v$D.next,(v$D=v$D.next)!==v$n;);v$D.prevZ.nextZ=null,v$D.prevZ=null,v$m.sortLinked(v$D)},v$m.sortLinked=function(v$n){var v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R=1;do{for(v$U=v$n,v$p=v$n=null,v$Q=0;v$U;){for(v$Q++,v$x=v$U,v$a=v$V=0;v$a<v$R&&(v$V++,v$x=v$x.nextZ);v$a++);for(v$y=v$R;0<v$V||0<v$y&&v$x;)0!==v$V&&(0===v$y||!v$x||v$U.z<=v$x.z)?(v$U=(v$D=v$U).nextZ,v$V--):(v$x=(v$D=v$x).nextZ,v$y--),v$p?v$p.nextZ=v$D:v$n=v$D,v$D.prevZ=v$p,v$p=v$D;v$U=v$x}v$p.nextZ=null,v$R*=2}while(1<v$Q);return v$n},v$m.zOrder=function(v$n,v$a,v$U,v$x,v$D){return(v$n=1431655765&((v$n=858993459&((v$n=252645135&((v$n=16711935&((v$n=32767*(v$n-v$U)*v$D)|v$n<<8))|v$n<<4))|v$n<<2))|v$n<<1))|(v$a=1431655765&((v$a=858993459&((v$a=252645135&((v$a=16711935&((v$a=32767*(v$a-v$x)*v$D)|v$a<<8))|v$a<<4))|v$a<<2))|v$a<<1))<<1},v$m.getLeftmost=function(v$n){for(var v$a=v$n,v$U=v$n;v$a.x<v$U.x&&(v$U=v$a),(v$a=v$a.next)!==v$n;);return v$U},v$m.pointInTriangle=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){return 0<=(v$D-v$Q)*(v$a-v$V)-(v$n-v$Q)*(v$p-v$V)&&0<=(v$n-v$Q)*(v$x-v$V)-(v$U-v$Q)*(v$a-v$V)&&0<=(v$U-v$Q)*(v$p-v$V)-(v$D-v$Q)*(v$x-v$V)},v$m.isValidDiagonal=function(v$n,v$a){return v$n.next.i!==v$a.i&&v$n.prev.i!==v$a.i&&!v$m.intersectsPolygon(v$n,v$a)&&v$m.locallyInside(v$n,v$a)&&v$m.locallyInside(v$a,v$n)&&v$m.middleInside(v$n,v$a)},v$m.area=function(v$n,v$a,v$U){return(v$a.y-v$n.y)*(v$U.x-v$a.x)-(v$a.x-v$n.x)*(v$U.y-v$a.y)},v$m.equals=function(v$n,v$a){return v$n.x===v$a.x&&v$n.y===v$a.y},v$m.intersects=function(v$n,v$a,v$U,v$x){return!!(v$m.equals(v$n,v$a)&&v$m.equals(v$U,v$x)||v$m.equals(v$n,v$x)&&v$m.equals(v$U,v$a))||0<v$m.area(v$n,v$a,v$U)!=0<v$m.area(v$n,v$a,v$x)&&0<v$m.area(v$U,v$x,v$n)!=0<v$m.area(v$U,v$x,v$a)},v$m.intersectsPolygon=function(v$n,v$a){var v$U=v$n;do{if(v$U.i!==v$n.i&&v$U.next.i!==v$n.i&&v$U.i!==v$a.i&&v$U.next.i!==v$a.i&&v$m.intersects(v$U,v$U.next,v$n,v$a))return!0;v$U=v$U.next}while(v$U!==v$n);return!1},v$m.locallyInside=function(v$n,v$a){return v$m.area(v$n.prev,v$n,v$n.next)<0?0<=v$m.area(v$n,v$a,v$n.next)&&0<=v$m.area(v$n,v$n.prev,v$a):v$m.area(v$n,v$a,v$n.prev)<0||v$m.area(v$n,v$n.next,v$a)<0},v$m.middleInside=function(v$n,v$a){for(var v$U=v$n,v$x=!1,v$D=(v$n.x+v$a.x)/2,v$p=(v$n.y+v$a.y)/2;v$U.y>v$p!=v$U.next.y>v$p&&v$U.next.y!==v$U.y&&v$D<(v$U.next.x-v$U.x)*(v$p-v$U.y)/(v$U.next.y-v$U.y)+v$U.x&&(v$x=!v$x),(v$U=v$U.next)!==v$n;);return v$x},v$m.splitPolygon=function(v$n,v$a){var v$U=new v$Dn(v$n.i,v$n.x,v$n.y),v$x=new v$Dn(v$a.i,v$a.x,v$a.y),v$D=v$n.next,v$p=v$a.prev;return(v$n.next=v$a).prev=v$n,(v$U.next=v$D).prev=v$U,(v$x.next=v$U).prev=v$x,(v$p.next=v$x).prev=v$p,v$x},v$m.insertNode=function(v$n,v$a,v$U,v$x){var v$D=new v$Dn(v$n,v$a,v$U);return v$x?(v$D.next=v$x.next,(v$D.prev=v$x).next.prev=v$D,v$x.next=v$D):(v$D.prev=v$D).next=v$D,v$D},v$m.removeNode=function(v$n){v$n.next.prev=v$n.prev,v$n.prev.next=v$n.next,v$n.prevZ&&(v$n.prevZ.nextZ=v$n.nextZ),v$n.nextZ&&(v$n.nextZ.prevZ=v$n.prevZ)},v$m.signedArea=function(v$n,v$a,v$U,v$x){for(var v$D=0,v$p=v$a,v$Q=v$U-v$x;v$p<v$U;v$p+=v$x)v$D+=(v$n[v$Q]-v$n[v$p])*(v$n[v$p+1]+v$n[v$Q+1]),v$Q=v$p;return v$D},v$m}(),v$Dn=function(){function v$n(v$n,v$a,v$U){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=v$n,this.x=v$a,this.y=v$U,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return v$i(v$n,"laya.webgl.shapes.EarcutNode"),v$n}(),v$pn=(function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this.lineWidth=v$n,this.lineColor=v$a,this.lineAlpha=v$U,this.fillColor=v$x,this.fillAlpha=v$D,this.shape=v$Q,this.fill=v$p}v$i(v$n,"laya.webgl.shapes.GeometryData");var v$a=v$n.prototype;v$a.clone=function(){return new v$n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},v$a.getIndexData=function(){return null},v$a.getVertexData=function(){return null},v$a.destroy=function(){this.shape=null}}(),function(){function v$n(v$n){if(v$n instanceof Float32Array)this.points=v$n;else if(v$n instanceof Array){v$n.length;this.points=new Float32Array(v$n)}}v$i(v$n,"laya.webgl.shapes.Vertex");var v$a=v$n.prototype;v$W.imps(v$a,{"laya.webgl.shapes.IShape":!0}),v$a.getData=function(v$n,v$a,v$U){},v$a.needUpdate=function(v$n){return!1},v$a.rebuild=function(v$n){},v$a.setMatrix=function(v$n){}}(),function(){function v$y(v$n){void 0===v$n&&(v$n=1e4),this._renderType=v$n}v$i(v$y,"laya.webgl.submit.Submit");var v$n=v$y.prototype;return v$W.imps(v$n,{"laya.webgl.submit.ISubmit":!0}),v$n.releaseRender=function(){var v$n=v$y._cache;(v$n[v$n._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},v$n.getRenderType=function(){return this._renderType},v$n.renderSubmit=function(){if(0===this._numEle)return 1;var v$n=this.shaderValue.textureHost;if(v$n){var v$a=v$n.source;if(!v$n.bitmap||!v$a)return 1;this.shaderValue.texture=v$a,v$n.alphaTexture&&v$n.alphaTexture.source&&(this.shaderValue.texture1=v$n.alphaTexture.source)}this._vb.bind_upload(this._ib);var v$U=v$Kn.mainContext;return this.shaderValue.upload(),v$B.activeBlendFunction!==this._blendFn&&(v$U.enable(3042),this._blendFn(v$U),v$B.activeBlendFunction=this._blendFn),v$c.drawCall++,v$c.trianglesFaces+=this._numEle/3,v$U.drawElements(4,this._numEle,5123,this._startIdx),1},v$y.__init__=function(){var v$n=v$y.RENDERBASE=new v$y(-1);v$n.shaderValue=new v$Nn(0,0),v$n.shaderValue.ALPHA=-1234},v$y.createSubmit=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$y._cache._length?v$y._cache[--v$y._cache._length]:new v$y;null==v$U&&((v$U=v$p._selfVb||(v$p._selfVb=v$en.create(-1))).clear(),v$x=0),v$p._ib=v$a,v$p._vb=v$U,v$p._startIdx=v$x*v$mn.BYTES_PIDX,v$p._numEle=0;var v$Q=v$n._nBlendType;v$p._blendFn=v$n._targets?v$B.targetFns[v$Q]:v$B.fns[v$Q],v$p.shaderValue=v$D,v$p.shaderValue.setValue(v$n._shader2D);var v$V=v$n._shader2D.filters;return v$V&&v$p.shaderValue.setFilters(v$V),v$p},v$y.createShape=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=v$y._cache._length?v$y._cache[--v$y._cache._length]:new v$y;v$Q._ib=v$a,v$Q._vb=v$U,v$Q._numEle=v$x,v$Q._startIdx=v$D,v$Q.shaderValue=v$p,v$Q.shaderValue.setValue(v$n._shader2D);var v$V=v$n._nBlendType;return v$Q._blendFn=v$n._targets?v$B.targetFns[v$V]:v$B.fns[v$V],v$Q},v$y.TYPE_2D=1e4,v$y.TYPE_CANVAS=10003,v$y.TYPE_CMDSETRT=10004,v$y.TYPE_CUSTOM=10005,v$y.TYPE_BLURRT=10006,v$y.TYPE_CMDDESTORYPRERT=10007,v$y.TYPE_DISABLESTENCIL=10008,v$y.TYPE_OTHERIBVB=10009,v$y.TYPE_PRIMITIVE=10010,v$y.TYPE_RT=10011,v$y.TYPE_BLUR_RT=10012,v$y.TYPE_TARGET=10013,v$y.TYPE_CHANGE_VALUE=10014,v$y.TYPE_SHAPE=10015,v$y.TYPE_TEXTURE=10016,v$y.TYPE_FILLTEXTURE=10017,v$y.RENDERBASE=null,v$y._cache=((v$y._cache=[])._length=0,v$y._cache),v$y}()),v$Qn=function(){function v$x(){this.fun=null,this.args=null}v$i(v$x,"laya.webgl.submit.SubmitCMD");var v$n=v$x.prototype;return v$W.imps(v$n,{"laya.webgl.submit.ISubmit":!0}),v$n.renderSubmit=function(){return this.fun.apply(null,this.args),1},v$n.getRenderType=function(){return 0},v$n.releaseRender=function(){var v$n=v$x._cache;v$n[v$n._length++]=this},v$x.create=function(v$n,v$a){var v$U=v$x._cache._length?v$x._cache[--v$x._cache._length]:new v$x;return v$U.fun=v$a,v$U.args=v$n,v$U},v$x._cache=((v$x._cache=[])._length=0,v$x._cache),v$x}(),v$Vn=function(){function v$a(){this.variables={}}v$i(v$a,"laya.webgl.submit.SubmitCMDScope");var v$n=v$a.prototype;return v$n.getValue=function(v$n){return this.variables[v$n]},v$n.addValue=function(v$n,v$a){return this.variables[v$n]=v$a},v$n.setValue=function(v$n,v$a){return this.variables.hasOwnProperty(v$n)?this.variables[v$n]=v$a:null},v$n.clear=function(){for(var v$n in this.variables)delete this.variables[v$n]},v$n.recycle=function(){this.clear(),v$a.POOL.push(this)},v$a.create=function(){var v$n=v$a.POOL.pop();return v$n||(v$n=new v$a),v$n},v$a.POOL=[],v$a}(),v$yn=function(){function v$z(){this.offset=0,this.startIndex=0,this._mat=v$_.create()}v$i(v$z,"laya.webgl.submit.SubmitOtherIBVB");var v$n=v$z.prototype;return v$W.imps(v$n,{"laya.webgl.submit.ISubmit":!0}),v$n.releaseRender=function(){var v$n=v$z._cache;(v$n[v$n._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},v$n.getRenderType=function(){return 10009},v$n.renderSubmit=function(){var v$n=this._shaderValue.textureHost;if(v$n){var v$a=v$n.source;if(!v$n.bitmap||!v$a)return 1;this._shaderValue.texture=v$a}this._vb.bind_upload(this._ib);var v$U=v$An.worldMatrix4,v$x=v$_.TEMP;v$_.mulPre(this._mat,v$U[0],v$U[1],v$U[4],v$U[5],v$U[12],v$U[13],v$x);var v$D=v$An.worldMatrix4=v$z.tempMatrix4;v$D[0]=v$x.a,v$D[1]=v$x.b,v$D[4]=v$x.c,v$D[5]=v$x.d,v$D[12]=v$x.tx,v$D[13]=v$x.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var v$p=v$Kn.mainContext;return v$B.activeBlendFunction!==this._blendFn&&(v$p.enable(3042),this._blendFn(v$p),v$B.activeBlendFunction=this._blendFn),v$c.drawCall++,v$c.trianglesFaces+=this._numEle/3,v$p.drawElements(4,this._numEle,5123,this.startIndex),v$An.worldMatrix4=v$U,v$ln.activeShader=null,1},v$z.create=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){void 0===v$y&&(v$y=0);var v$R=v$z._cache._length?v$z._cache[--v$z._cache._length]:new v$z;v$R._ib=v$U,v$R._vb=v$a,v$R._numEle=v$x,v$R._shader=v$D,v$R._shaderValue=v$p;var v$X=v$n._nBlendType;switch(v$R._blendFn=v$n._targets?v$B.targetFns[v$X]:v$B.fns[v$X],v$y){case 0:v$R.offset=0,v$R.startIndex=v$V/(v$mn.BYTES_PE*v$a.vertexStride)*1.5,v$R.startIndex*=v$mn.BYTES_PIDX;break;case 1:v$R.startIndex=v$Q,v$R.offset=v$V}return v$R},v$z._cache=((v$z._cache=[])._length=0,v$z._cache),v$z.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],v$z}(),v$Rn=function(){function v$U(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new v$M,this.screenRect=new v$M}v$i(v$U,"laya.webgl.submit.SubmitScissor");var v$n=v$U.prototype;return v$W.imps(v$n,{"laya.webgl.submit.ISubmit":!0}),v$n._scissor=function(v$n,v$a,v$U,v$x){var v$D=v$An.worldMatrix4,v$p=v$D[0],v$Q=v$D[5],v$V=v$D[12],v$y=v$D[13];if(v$x*=v$Q,(v$U*=v$p)<1||v$x<1)return!1;var v$R=(v$n=v$n*v$p+v$V)+v$U,v$X=(v$a=v$a*v$Q+v$y)+v$x;v$n<0&&(v$U=v$R-(v$n=0)),v$a<0&&(v$x=v$X-(v$a=0));var v$z=v$An.worldClipRect;if(v$n=Math.max(v$n,v$z.x),v$a=Math.max(v$a,v$z.y),v$U=Math.min(v$R,v$z.right)-v$n,v$x=Math.min(v$X,v$z.bottom)-v$a,v$U<1||v$x<1)return!1;var v$i=v$An.worldScissorTest;return this.screenRect.copyFrom(v$z),v$z.x=v$n,v$z.y=v$a,v$z.width=v$U,v$z.height=v$x,v$An.worldScissorTest=!0,v$a=v$An.height-v$a-v$x,v$Kn.mainContext.scissor(v$n,v$a,v$U,v$x),v$Kn.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),v$i?(v$a=v$An.height-this.screenRect.y-this.screenRect.height,v$Kn.mainContext.scissor(this.screenRect.x,v$a,this.screenRect.width,this.screenRect.height),v$Kn.mainContext.enable(3089)):(v$Kn.mainContext.disable(3089),v$An.worldScissorTest=!1),v$z.copyFrom(this.screenRect),!0},v$n._scissorWithTagart=function(v$n,v$a,v$U,v$x){if(v$U<1||v$x<1)return!1;var v$D=v$n+v$U,v$p=v$a+v$x;v$n<0&&(v$U=v$D-(v$n=0)),v$a<0&&(v$x=v$p-(v$a=0));var v$Q=v$An.worldClipRect;if(v$n=Math.max(v$n,v$Q.x),v$a=Math.max(v$a,v$Q.y),v$U=Math.min(v$D,v$Q.right)-v$n,v$x=Math.min(v$p,v$Q.bottom)-v$a,v$U<1||v$x<1)return!1;var v$V=v$An.worldScissorTest;return this.screenRect.copyFrom(v$Q),v$An.worldScissorTest=!0,v$Q.x=v$n,v$Q.y=v$a,v$Q.width=v$U,v$Q.height=v$x,v$a=v$An.height-v$a-v$x,v$Kn.mainContext.scissor(v$n,v$a,v$U,v$x),v$Kn.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),v$V?(v$a=v$An.height-this.screenRect.y-this.screenRect.height,v$Kn.mainContext.scissor(this.screenRect.x,v$a,this.screenRect.width,this.screenRect.height),v$Kn.mainContext.enable(3089)):(v$Kn.mainContext.disable(3089),v$An.worldScissorTest=!1),v$Q.copyFrom(this.screenRect),!0},v$n.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},v$n.getRenderType=function(){return 0},v$n.releaseRender=function(){var v$n=v$U._cache;(v$n[v$n._length++]=this).context=null},v$U.create=function(v$n){var v$a=v$U._cache._length?v$U._cache[--v$U._cache._length]:new v$U;return v$a.context=v$n,v$a},v$U._cache=((v$U._cache=[])._length=0,v$U._cache),v$U}(),v$Xn=function(){function v$y(){this.step=0,this.blendMode=null,this.level=0}v$i(v$y,"laya.webgl.submit.SubmitStencil");var v$n=v$y.prototype;return v$W.imps(v$n,{"laya.webgl.submit.ISubmit":!0}),v$n.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},v$n.getRenderType=function(){return 0},v$n.releaseRender=function(){var v$n=v$y._cache;v$n[v$n._length++]=this},v$n.do1=function(){var v$n=v$Kn.mainContext;v$n.enable(2960),v$n.clear(1024),v$n.colorMask(!1,!1,!1,!1),v$n.stencilFunc(514,this.level,255),v$n.stencilOp(7680,7680,7682)},v$n.do2=function(){var v$n=v$Kn.mainContext;v$n.stencilFunc(514,this.level+1,255),v$n.colorMask(!0,!0,!0,!0),v$n.stencilOp(7680,7680,7680)},v$n.do3=function(){var v$n=v$Kn.mainContext;v$n.colorMask(!0,!0,!0,!0),v$n.stencilOp(7680,7680,7680),v$n.clear(1024),v$n.disable(2960)},v$n.do4=function(){var v$n=v$Kn.mainContext;0==this.level&&(v$n.enable(2960),v$n.clear(1024)),v$n.colorMask(!1,!1,!1,!1),v$n.stencilFunc(519,0,255),v$n.stencilOp(7680,7680,7682)},v$n.do5=function(){var v$n=v$Kn.mainContext;v$n.stencilFunc(514,this.level,255),v$n.colorMask(!0,!0,!0,!0),v$n.stencilOp(7680,7680,7680)},v$n.do6=function(){var v$n=v$Kn.mainContext;v$B.targetFns[v$B.TOINT[this.blendMode]](v$n)},v$n.do7=function(){var v$n=v$Kn.mainContext;v$n.colorMask(!1,!1,!1,!1),v$n.stencilOp(7680,7680,7683)},v$n.do8=function(){var v$n=v$Kn.mainContext;v$n.colorMask(!0,!0,!0,!0),v$n.stencilFunc(514,this.level,255),v$n.stencilOp(7680,7680,7680)},v$y.restore=function(v$n,v$a,v$U,v$x,v$D){var v$p;if((v$n._renderKey=0)<v$y._mask&&v$y._mask--,0==v$y._mask)v$p=laya.webgl.submit.SubmitStencil.create(3),v$n.addRenderObject(v$p),v$n._curSubmit=v$pn.RENDERBASE;else{v$p=laya.webgl.submit.SubmitStencil.create(7),v$n.addRenderObject(v$p);var v$Q=v$n._vb;v$Q._byteLength;if(v$bn.fillRectImgVb(v$Q,null,v$a.x,v$a.y,v$a.width,v$a.height,v$v.DEF_UV,v$U,v$x,v$D,0,0)){v$n._shader2D.glTexture=null;var v$V=v$n._curSubmit=v$pn.createSubmit(v$n,v$n._ib,v$Q,(v$Q._byteLength-64)/32*3,v$Nn.create(2,0));v$V.shaderValue.ALPHA=1,v$n._submits[v$n._submits._length++]=v$V,v$n._curSubmit._numEle+=6,v$n._curSubmit=v$pn.RENDERBASE}else alert("clipRect calc stencil rect error");v$p=laya.webgl.submit.SubmitStencil.create(8),v$n.addRenderObject(v$p)}},v$y.restore2=function(v$n,v$a){var v$U;(v$n._renderKey=0)<v$y._mask&&v$y._mask--,0==v$y._mask?(v$U=laya.webgl.submit.SubmitStencil.create(3),v$n.addRenderObject(v$U),v$n._curSubmit=v$pn.RENDERBASE):(v$U=laya.webgl.submit.SubmitStencil.create(7),v$n.addRenderObject(v$U),v$n._submits[v$n._submits._length++]=v$a,v$U=laya.webgl.submit.SubmitStencil.create(8),v$n.addRenderObject(v$U))},v$y.create=function(v$n){var v$a=v$y._cache._length?v$y._cache[--v$y._cache._length]:new v$y;return 5==(v$a.step=v$n)&&++v$y._mask,v$a.level=v$y._mask,v$a},v$y._cache=((v$y._cache=[])._length=0,v$y._cache),v$y._mask=0,v$y}(),v$zn=function(){function v$V(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}v$i(v$V,"laya.webgl.submit.SubmitTarget");var v$n=v$V.prototype;return v$W.imps(v$n,{"laya.webgl.submit.ISubmit":!0}),v$n.renderSubmit=function(){this._vb.bind_upload(this._ib);var v$n=this.scope.getValue(this.proName);return v$n&&(this.shaderValue.texture=v$n.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[v$n.width,v$n.height]),this.shaderValue.upload(),this.blend(),v$c.drawCall++,v$c.trianglesFaces+=this._numEle/3,v$Kn.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},v$n.blend=function(){if(v$B.activeBlendFunction!==v$B.fns[this.blendType]){var v$n=v$Kn.mainContext;v$n.enable(3042),v$B.fns[this.blendType](v$n),v$B.activeBlendFunction=v$B.fns[this.blendType]}},v$n.getRenderType=function(){return 0},v$n.releaseRender=function(){var v$n=v$V._cache;(v$n[v$n._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},v$V.create=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=v$V._cache._length?v$V._cache[--v$V._cache._length]:new v$V;return v$Q._ib=v$a,v$Q._vb=v$U,v$Q.proName=v$p,v$Q._startIdx=v$x*v$mn.BYTES_PIDX,v$Q._numEle=0,v$Q.blendType=v$n._nBlendType,v$Q.shaderValue=v$D,v$Q.shaderValue.setValue(v$n._shader2D),v$Q},v$V._cache=((v$V._cache=[])._length=0,v$V._cache),v$V}(),v$in=function(){function v$n(){this._sourceStr=null}v$i(v$n,"laya.webgl.text.CharSegment");var v$a=v$n.prototype;return v$W.imps(v$a,{"laya.webgl.text.ICharSegment":!0}),v$a.textToSpit=function(v$n){this._sourceStr=v$n},v$a.getChar=function(v$n){return this._sourceStr.charAt(v$n)},v$a.getCharCode=function(v$n){return this._sourceStr.charCodeAt(v$n)},v$a.length=function(){return this._sourceStr.length},v$n}(),v$qn=function(){var v$n;function v$c(){}return v$i(v$c,"laya.webgl.text.DrawText"),v$c.__init__=function(){v$c._charsTemp=new Array,v$c._drawValue=new v$n,v$c._charSeg=new v$in},v$c.customCharSeg=function(v$n){v$c._charSeg=v$n},v$c.getChar=function(v$n,v$a,v$U){var v$x=v$dn.createOneChar(v$n,v$U);return-1!=v$a&&(v$c._charsCache[v$a]=v$x),v$x},v$c._drawSlow=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$z,v$i,v$q,v$E){var v$m,v$b,v$P=v$c._drawValue.value(v$p,v$V,v$y,v$R,v$i,v$q,v$E),v$A=0,v$T=0,v$K=v$c._charsTemp,v$Y=0,v$W=NaN;if(v$x)for(v$K.length=v$x.length,v$A=0,v$T=v$x.length;v$A<v$T;v$A++)(v$b=v$x[v$A])&&(v$W=v$b.charNum+v$P.txtID,v$K[v$A]=v$m=v$c._charsCache[v$W]||v$c.getChar(v$b.char,v$W,v$P),v$m.active());else{var v$k=v$U instanceof laya.utils.WordText?v$U.toString():v$U;if(v$I.CharacterCache){v$c._charSeg.textToSpit(v$k);var v$N=v$c._charSeg.length();for(v$A=0,v$T=v$K.length=v$N;v$A<v$T;v$A++)v$W=v$c._charSeg.getCharCode(v$A)+v$P.txtID,v$K[v$A]=v$m=v$c._charsCache[v$W]||v$c.getChar(v$c._charSeg.getChar(v$A),v$W,v$P),v$m.active(),v$Y+=v$m.cw}else v$K.length=0,(v$m=v$c.getChar(v$k,-1,v$P)).active(),v$Y+=v$m.cw,v$K[0]=v$m}var v$_=0;null!==v$Q&&"left"!==v$Q&&(v$_=-("center"==v$Q?v$Y/2:v$Y));var v$$,v$M,v$Z=NaN,v$u=0;if(v$x)for(v$A=0,v$T=v$K.length;v$A<v$T;v$A++)v$m=v$K[v$A],v$b=v$x[v$A],v$m&&v$b&&!v$m.isSpace&&(v$Z=v$m.borderSize,v$$=v$m.texture,v$a._drawText(v$$,v$X+v$_+v$b.x*v$i-v$Z,v$z+v$b.y*v$q-v$Z,v$$.width,v$$.height,v$D,0,0,0,0));else{for(v$A=0,v$T=v$K.length;v$A<v$T;v$A++)(v$m=v$K[v$A])&&!v$m.isSpace&&(v$Z=v$m.borderSize,v$$=v$m.texture,v$a._drawText(v$$,v$X+v$_-v$Z,v$z-v$Z,v$$.width,v$$.height,v$D,0,0,0,0),v$n&&((v$M=v$n[v$u++])||(v$M=v$n[v$u-1]=[]),v$M[0]=v$$,v$M[1]=v$_-v$Z,v$M[2]=-v$Z)),v$_+=v$m.cw;v$n&&(v$n.length=v$u)}},v$c._drawFast=function(v$n,v$a,v$U,v$x,v$D){for(var v$p,v$Q,v$V=0,v$y=v$n.length;v$V<v$y;v$V++)(v$p=(v$Q=v$n[v$V])[0]).active(),v$a._drawText(v$p,v$x+v$Q[1],v$D+v$Q[2],v$p.width,v$p.height,v$U,0,0,0,0)},v$c.drawText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$z){if(void 0===v$z&&(v$z=0),!(v$a&&0===v$a.length||v$U&&0===v$U.length)){var v$i=v$x.a,v$q=v$x.d;(0!==v$x.b||0!==v$x.c)&&(v$i=v$q=1);var v$E=1!==v$i||1!==v$q;if(v$E&&v$W.stage.transform){var v$m=v$W.stage.transform;v$E=v$m.a===v$i&&v$m.d===v$q}else v$E=!1;if(v$E){var v$b=(v$x=v$x.copyTo(v$kn._tmpMatrix)).tx,v$P=v$x.ty;v$x.scale(1/v$i,1/v$q),v$x._checkTransform(),v$R*=v$i,v$X*=v$q,v$R+=v$b-v$x.tx,v$X+=v$P-v$x.ty}else v$i=v$q=1;if(v$U)v$c._drawSlow(null,v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$i,v$q,v$z);else{if(null===v$a.toUpperCase){var v$A=v$i+1e5*v$q,v$T=v$a;return void(v$T.changed||v$T.id!==v$A?(v$T.id=v$A,v$T.changed=!1,v$c._drawSlow(v$T.save,v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$i,v$q,v$z)):v$c._drawFast(v$T.save,v$n,v$x,v$R,v$X))}var v$K=v$a+v$D.toString()+v$Q+v$V+v$y+v$i+v$q+v$p,v$Y=v$c._textsCache[v$K];v$I.CharacterCache?v$Y?v$c._drawFast(v$Y,v$n,v$x,v$R,v$X):(v$c._textsCache.__length||(v$c._textsCache.__length=0),v$c._textsCache.__length>v$k.WebGLTextCacheCount&&((v$c._textsCache={}).__length=0,v$c._curPoolIndex=0),v$c._textCachesPool[v$c._curPoolIndex]?(v$Y=v$c._textsCache[v$K]=v$c._textCachesPool[v$c._curPoolIndex]).length=0:v$c._textCachesPool[v$c._curPoolIndex]=v$Y=v$c._textsCache[v$K]=[],v$c._textsCache.__length++,v$c._curPoolIndex++,v$c._drawSlow(v$Y,v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$i,v$q,v$z)):v$c._drawSlow(v$Y,v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$i,v$q,v$z)}}},v$c._charsTemp=null,v$c._textCachesPool=[],v$c._curPoolIndex=0,v$c._charsCache={},v$c._textsCache={},v$c._drawValue=null,v$c.d=[],v$c._charSeg=null,v$c.__init$=function(){v$n=function(){function v$y(){}return v$i(v$y,""),v$y.prototype.value=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this.font=v$n,this.fillColor=v$a,this.borderColor=v$U,this.lineWidth=v$x,this.scaleX=v$D,this.scaleY=v$p,this.underLine=v$Q;var v$V=v$n.toString()+v$D+v$p+v$x+(v$a?v$a.toLowerCase():" ")+(v$U?v$U.toLowerCase():" ")+v$Q;return this.txtID=v$y._keymap[v$V],this.txtID||(this.txtID=1e-7*++v$y._keymapCount,v$y._keymap[v$V]=this.txtID),this},v$y.clear=function(){v$y._keymap={},v$y._keymapCount=1},v$y._keymap={},v$y._keymapCount=1,v$y}()},v$c}(),v$En=function(){function v$D(v$n){this._index=0,this._size=14,this._italic=-2,v$D._cache2=v$D._cache2||[],this.setFont(v$n||"14px Arial")}v$i(v$D,"laya.webgl.text.FontInContext");var v$n=v$D.prototype;return v$n.setFont=function(v$n){var v$a=v$D._cache2[v$n];if(v$a)this._words=v$a[0],this._size=v$a[1];else{this._words=v$n.split(" ");for(var v$U=0,v$x=this._words.length;v$U<v$x;v$U++)if(0<this._words[v$U].indexOf("px")){this._index=v$U;break}this._size=parseInt(this._words[this._index]),v$D._cache2[v$n]=[this._words,this._size]}this._text=null,this._italic=-2},v$n.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},v$n.hasType=function(v$n){for(var v$a=0,v$U=this._words.length;v$a<v$U;v$a++)if(this._words[v$a]===v$n)return v$a;return-1},v$n.removeType=function(v$n){for(var v$a=0,v$U=this._words.length;v$a<v$U;v$a++)if(this._words[v$a]===v$n){this._words.splice(v$a,1),this._index>v$a&&this._index--;break}this._text=null,this._italic=-2},v$n.copyTo=function(v$n){return v$n._text=this._text,v$n._size=this._size,v$n._index=this._index,v$n._words=this._words.slice(),v$n._italic=-2,v$n},v$n.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},v$x(0,v$n,"size",function(){return this._size},function(v$n){this._size=v$n,this._words[this._index]=v$n+"px",this._text=null}),v$D.create=function(v$n){var v$a=v$D._cache[v$n];return v$a||(v$a=v$D._cache[v$n]=new v$D(v$n))},v$D.EMPTY=new v$D,v$D._cache={},v$D._cache2=null,v$D}(),v$mn=function(){function v$n(){}return v$i(v$n,"laya.webgl.utils.CONST3D2D"),v$n.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],v$n.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],v$n.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],v$n._TMPARRAY=[],v$n._OFFSETX=0,v$n._OFFSETY=0,v$Q(v$n,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),v$n}(),v$bn=function(){function v$E(){}return v$i(v$E,"laya.webgl.utils.GlUtils"),v$E.make2DProjection=function(v$n,v$a,v$U){return[2/v$n,0,0,0,0,-2/v$a,0,0,0,0,2/v$U,0,-1,1,0,1]},v$E.fillIBQuadrangle=function(v$n,v$a){if(65535/4<v$a)throw Error("IBQuadrangle count:"+v$a+" must<:"+Math.floor(65535/4));v$a=Math.floor(v$a),v$n._resizeBuffer(6*(v$a+1)*2,!1),v$n.byteLength=v$n.bufferLength;for(var v$U=v$n.getUint16Array(),v$x=0,v$D=0;v$D<v$a;v$D++)v$U[v$x++]=4*v$D,v$U[v$x++]=4*v$D+2,v$U[v$x++]=4*v$D+1,v$U[v$x++]=4*v$D,v$U[v$x++]=4*v$D+3,v$U[v$x++]=4*v$D+2;return v$n.setNeedUpload(),!0},v$E.expandIBQuadrangle=function(v$n,v$a){v$n.bufferLength>=6*v$a*2||v$E.fillIBQuadrangle(v$n,v$a)},v$E.mathCeilPowerOfTwo=function(v$n){return v$n--,v$n|=v$n>>1,v$n|=v$n>>2,v$n|=v$n>>4,v$n|=v$n>>8,v$n|=v$n>>16,++v$n},v$E.fillQuadrangleImgVb=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){var v$y=16+(v$n._byteLength>>2);v$n.byteLength=v$y<<2;var v$R=v$n.getFloat32Array();v$R[(v$y-=16)+2]=v$D[0],v$R[v$y+3]=v$D[1],v$R[v$y+6]=v$D[2],v$R[v$y+7]=v$D[3],v$R[v$y+10]=v$D[4],v$R[v$y+11]=v$D[5],v$R[v$y+14]=v$D[6],v$R[v$y+15]=v$D[7];var v$X=v$p.a,v$z=v$p.b,v$i=v$p.c,v$q=v$p.d;if(1!==v$X||0!==v$z||0!==v$i||1!==v$q){v$p.bTransform=!0;var v$E=v$p.tx+v$Q,v$m=v$p.ty+v$V;v$R[v$y]=(v$x[0]+v$a)*v$X+(v$x[1]+v$U)*v$i+v$E,v$R[v$y+1]=(v$x[0]+v$a)*v$z+(v$x[1]+v$U)*v$q+v$m,v$R[v$y+4]=(v$x[2]+v$a)*v$X+(v$x[3]+v$U)*v$i+v$E,v$R[v$y+5]=(v$x[2]+v$a)*v$z+(v$x[3]+v$U)*v$q+v$m,v$R[v$y+8]=(v$x[4]+v$a)*v$X+(v$x[5]+v$U)*v$i+v$E,v$R[v$y+9]=(v$x[4]+v$a)*v$z+(v$x[5]+v$U)*v$q+v$m,v$R[v$y+12]=(v$x[6]+v$a)*v$X+(v$x[7]+v$U)*v$i+v$E,v$R[v$y+13]=(v$x[6]+v$a)*v$z+(v$x[7]+v$U)*v$q+v$m}else v$p.bTransform=!1,v$a+=v$p.tx+v$Q,v$U+=v$p.ty+v$V,v$R[v$y]=v$a+v$x[0],v$R[v$y+1]=v$U+v$x[1],v$R[v$y+4]=v$a+v$x[2],v$R[v$y+5]=v$U+v$x[3],v$R[v$y+8]=v$a+v$x[4],v$R[v$y+9]=v$U+v$x[5],v$R[v$y+12]=v$a+v$x[6],v$R[v$y+13]=v$U+v$x[7];return v$n._upload=!0},v$E.fillTranglesVB=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){var v$V=(v$n._byteLength>>2)+v$x.length;v$n.byteLength=v$V<<2;var v$y=v$n.getFloat32Array();v$V-=v$x.length;for(var v$R=v$x.length,v$X=v$D.a,v$z=v$D.b,v$i=v$D.c,v$q=v$D.d,v$E=0;v$E<v$R;v$E+=4)if(v$y[v$V+v$E+2]=v$x[v$E+2],v$y[v$V+v$E+3]=v$x[v$E+3],1!==v$X||0!==v$z||0!==v$i||1!==v$q){v$D.bTransform=!0;var v$m=v$D.tx+v$p,v$b=v$D.ty+v$Q;v$y[v$V+v$E]=(v$x[v$E]+v$a)*v$X+(v$x[v$E+1]+v$U)*v$i+v$m,v$y[v$V+v$E+1]=(v$x[v$E]+v$a)*v$z+(v$x[v$E+1]+v$U)*v$q+v$b}else v$D.bTransform=!1,v$a+=v$D.tx+v$p,v$U+=v$D.ty+v$Q,v$y[v$V+v$E]=v$a+v$x[v$E],v$y[v$V+v$E+1]=v$U+v$x[v$E+1];return v$n._upload=!0},v$E.copyPreImgVb=function(v$n,v$a,v$U){var v$x=v$n._byteLength>>2;v$n.byteLength=v$x+16<<2;for(var v$D=v$n.getFloat32Array(),v$p=0,v$Q=v$x-16;v$p<4;v$p++)v$D[v$x]=v$D[v$Q]+v$a,++v$Q,v$D[++v$x]=v$D[v$Q]+v$U,++v$Q,v$D[++v$x]=v$D[v$Q],++v$Q,v$D[++v$x]=v$D[v$Q],++v$x,++v$Q;v$n._upload=!0},v$E.fillRectImgVb=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$z,v$i){void 0===v$i&&(v$i=!1);var v$q,v$E,v$m,v$b,v$P,v$A,v$T,v$K,v$Y,v$W,v$k,v$N,v$_,v$$,v$M,v$Z,v$u=1,v$c=v$V.a,v$H=v$V.b,v$G=v$V.c,v$I=v$V.d,v$v=v$a&&v$a.width<99999999;if(1!==v$c||0!==v$H||0!==v$G||1!==v$I?(v$V.bTransform=!0,0===v$H&&0===v$G&&(v$u=23,v$Y=v$D+v$U,v$W=v$p+v$x,v$q=v$c*v$U+(v$k=v$V.tx+v$y),v$m=v$c*v$Y+v$k,v$E=v$I*v$x+(v$N=v$V.ty+v$R),v$b=v$I*v$W+v$N)):(v$u=23,v$V.bTransform=!1,v$m=(v$q=v$U+v$V.tx+v$y)+v$D,v$b=(v$E=v$x+v$V.ty+v$R)+v$p),v$v&&(v$P=v$a.x,v$A=v$a.y,v$T=v$a.width+v$P,v$K=v$a.height+v$A),1!==v$u){if(Math.min(v$q,v$m)>=v$T)return!1;if(Math.min(v$E,v$b)>=v$K)return!1;if(Math.max(v$m,v$q)<=v$P)return!1;if(Math.max(v$b,v$E)<=v$A)return!1}var v$l=v$n._byteLength>>2;v$n.byteLength=16+v$l<<2;var v$j=v$n.getFloat32Array();switch(v$j[2+v$l]=v$Q[0],v$j[3+v$l]=v$Q[1],v$j[6+v$l]=v$Q[2],v$j[7+v$l]=v$Q[3],v$j[10+v$l]=v$Q[4],v$j[11+v$l]=v$Q[5],v$j[14+v$l]=v$Q[6],v$j[15+v$l]=v$Q[7],v$u){case 1:v$k=v$V.tx+v$y,v$N=v$V.ty+v$R;var v$h=v$c*v$U,v$f=v$G*v$x,v$F=v$I*v$x,v$g=v$H*v$U,v$o=v$c*(v$Y=v$D+v$U),v$B=v$G*(v$W=v$p+v$x),v$O=v$I*v$W,v$L=v$H*v$Y;v$i?(v$_=v$h+v$f+v$k,v$M=Math.round(v$_)-v$_,v$$=v$F+v$g+v$N,v$Z=Math.round(v$$)-v$$,v$j[v$l]=v$_+v$M,v$j[1+v$l]=v$$+v$Z,v$j[4+v$l]=v$o+v$f+v$k+v$M,v$j[5+v$l]=v$F+v$L+v$N+v$Z,v$j[8+v$l]=v$o+v$B+v$k+v$M,v$j[9+v$l]=v$O+v$L+v$N+v$Z,v$j[12+v$l]=v$h+v$B+v$k+v$M,v$j[13+v$l]=v$O+v$g+v$N+v$Z):(v$j[v$l]=v$h+v$f+v$k,v$j[1+v$l]=v$F+v$g+v$N,v$j[4+v$l]=v$o+v$f+v$k,v$j[5+v$l]=v$F+v$L+v$N,v$j[8+v$l]=v$o+v$B+v$k,v$j[9+v$l]=v$O+v$L+v$N,v$j[12+v$l]=v$h+v$B+v$k,v$j[13+v$l]=v$O+v$g+v$N);break;case 23:v$i?(v$_=v$q+v$X,v$M=Math.round(v$_)-v$_,v$$=v$E,v$Z=Math.round(v$$)-v$$,v$j[v$l]=v$_+v$M,v$j[1+v$l]=v$$+v$Z,v$j[4+v$l]=v$m+v$X+v$M,v$j[5+v$l]=v$E+v$Z,v$j[8+v$l]=v$m+v$M,v$j[9+v$l]=v$b+v$Z,v$j[12+v$l]=v$q+v$M,v$j[13+v$l]=v$b+v$Z):(v$j[v$l]=v$q+v$X,v$j[1+v$l]=v$E,v$j[4+v$l]=v$m+v$X,v$j[5+v$l]=v$E,v$j[8+v$l]=v$m,v$j[9+v$l]=v$b,v$j[12+v$l]=v$q,v$j[13+v$l]=v$b)}return v$n._upload=!0},v$E.fillLineVb=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){var v$y=.5*v$Q,v$R=v$E._fillLineArray,v$X=-(v$x-v$p),v$z=v$U-v$D,v$i=Math.sqrt(v$X*v$X+v$z*v$z);v$X/=v$i,v$z/=v$i,v$X*=v$y,v$z*=v$y,v$R[0]=v$U-v$X,v$R[1]=v$x-v$z,v$R[4]=v$U+v$X,v$R[5]=v$x+v$z,v$R[8]=v$D+v$X,v$R[9]=v$p+v$z,v$R[12]=v$D-v$X,v$R[13]=v$p-v$z,v$V&&v$V.transformPointArray(v$R,v$R);var v$q=16+(v$n._byteLength>>2);return v$n.byteLength=v$q<<2,v$n.insertData(v$R,v$q-16),!0},v$E._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v$E}(),v$Pn=(function(){function v$y(){}v$i(v$y,"laya.webgl.utils.MatirxArray"),v$y.ArrayMul=function(v$n,v$a,v$U){if(v$n)if(v$a)for(var v$x=NaN,v$D=NaN,v$p=NaN,v$Q=NaN,v$V=0;v$V<4;v$V++)v$x=v$n[v$V],v$D=v$n[v$V+4],v$p=v$n[v$V+8],v$Q=v$n[v$V+12],v$U[v$V]=v$x*v$a[0]+v$D*v$a[1]+v$p*v$a[2]+v$Q*v$a[3],v$U[v$V+4]=v$x*v$a[4]+v$D*v$a[5]+v$p*v$a[6]+v$Q*v$a[7],v$U[v$V+8]=v$x*v$a[8]+v$D*v$a[9]+v$p*v$a[10]+v$Q*v$a[11],v$U[v$V+12]=v$x*v$a[12]+v$D*v$a[13]+v$p*v$a[14]+v$Q*v$a[15];else v$y.copyArray(v$n,v$U);else v$y.copyArray(v$a,v$U)},v$y.copyArray=function(v$n,v$a){if(v$n&&v$a)for(var v$U=0;v$U<v$n.length;v$U++)v$a[v$U]=v$n[v$U]}}(),function(){function v$a(v$n,v$a,v$U){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=v$n,this._vb=new v$en(v$n,35048),v$a&&this._vb._resizeBuffer(v$a,!1),this._ib=new v$Jn,v$U&&this._ib._resizeBuffer(v$U,!1)}v$i(v$a,"laya.webgl.utils.Mesh2D");var v$n=v$a.prototype;return v$n.cloneWithNewVB=function(){var v$n=new v$a(this._stride,0,0);return v$n._ib=this._ib,v$n._quadNum=this._quadNum,v$n._attribInfo=this._attribInfo,v$n},v$n.cloneWithNewVBIB=function(){var v$n=new v$a(this._stride,0,0);return v$n._attribInfo=this._attribInfo,v$n},v$n.getVBW=function(){return this._vb.setNeedUpload(),this._vb},v$n.getVBR=function(){return this._vb},v$n.getIBR=function(){return this._ib},v$n.getIBW=function(){return this._ib.setNeedUpload(),this._ib},v$n.createQuadIB=function(v$n){this._quadNum=v$n,this._ib._resizeBuffer(6*v$n*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var v$a=this._ib.getUint16Array(),v$U=0,v$x=0,v$D=0;v$D<v$n;v$D++)v$a[v$U++]=v$x,v$a[v$U++]=v$x+2,v$a[v$U++]=v$x+1,v$a[v$U++]=v$x,v$a[v$U++]=v$x+3,v$a[v$U++]=v$x+2,v$x+=4;this._ib.setNeedUpload()},v$n.setAttributes=function(v$n){if(this._attribInfo=v$n,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},v$n.getEleNum=function(){return this._ib.getBuffer().byteLength/2},v$n.releaseMesh=function(){},v$n.destroy=function(){},v$n.clearVB=function(){this._vb.clear()},v$a._gvaoid=0,v$a}()),v$An=function(){function v$D(){}return v$i(v$D,"laya.webgl.utils.RenderState2D"),v$D.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},v$D.mat2MatArray=function(v$n,v$a){var v$U=v$n,v$x=v$a;return v$x[0]=v$U.a,v$x[1]=v$U.b,v$x[2]=v$D.EMPTYMAT4_ARRAY[2],v$x[3]=v$D.EMPTYMAT4_ARRAY[3],v$x[4]=v$U.c,v$x[5]=v$U.d,v$x[6]=v$D.EMPTYMAT4_ARRAY[6],v$x[7]=v$D.EMPTYMAT4_ARRAY[7],v$x[8]=v$D.EMPTYMAT4_ARRAY[8],v$x[9]=v$D.EMPTYMAT4_ARRAY[9],v$x[10]=v$D.EMPTYMAT4_ARRAY[10],v$x[11]=v$D.EMPTYMAT4_ARRAY[11],v$x[12]=v$U.tx,v$x[13]=v$U.ty,v$x[14]=v$D.EMPTYMAT4_ARRAY[14],v$x[15]=v$D.EMPTYMAT4_ARRAY[15],v$a},v$D.restoreTempArray=function(){v$D.TEMPMAT4_ARRAY[0]=1,v$D.TEMPMAT4_ARRAY[1]=0,v$D.TEMPMAT4_ARRAY[4]=0,v$D.TEMPMAT4_ARRAY[5]=1,v$D.TEMPMAT4_ARRAY[12]=0,v$D.TEMPMAT4_ARRAY[13]=0},v$D.clear=function(){v$D.worldScissorTest=!1,v$D.worldShaderDefines=null,v$D.worldFilters=null,v$D.worldAlpha=1,v$D.worldClipRect.x=v$D.worldClipRect.y=0,v$D.worldClipRect.width=v$D.width,v$D.worldClipRect.height=v$D.height,v$D.curRenderTarget=null},v$D._MAXSIZE=99999999,v$D.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],v$D.worldMatrix4=v$D.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],v$D.worldAlpha=1,v$D.worldScissorTest=!1,v$D.worldFilters=null,v$D.worldShaderDefines=null,v$D.curRenderTarget=null,v$D.width=0,v$D.height=0,v$Q(v$D,["worldMatrix",function(){return this.worldMatrix=new v$_},"worldClipRect",function(){return this.worldClipRect=new v$M(0,0,99999999,99999999)}]),v$D}(),v$Tn=function(){var v$A,v$U;function v$T(v$n,v$a,v$U,v$x,v$D){var v$p=this;function v$Q(v$n){var v$a=[],v$U=new v$A(v$a);return v$p._compileToTree(v$U,v$n.split("\n"),0,v$a,v$D),v$U}var v$V=v$q.now();this._VS=v$Q(v$a),this._PS=v$Q(v$U),this._nameMap=v$x,2<v$q.now()-v$V&&console.log("ShaderCompile use time:"+(v$q.now()-v$V)+"  size:"+v$a.length+"/"+v$U.length)}v$i(v$T,"laya.webgl.utils.ShaderCompile");var v$n=v$T.prototype;return v$n._compileToTree=function(v$n,v$a,v$U,v$x,v$D){var v$p,v$Q,v$V,v$y,v$R,v$X,v$z,v$i=0,v$q=0,v$E=0,v$m=0;for(v$q=v$U;v$q<v$a.length;v$q++)if(!((v$V=v$a[v$q]).length<1)&&0!==(v$i=v$V.indexOf("//"))){if(0<=v$i&&(v$V=v$V.substr(0,v$i)),v$p=v$z||new v$A(v$x),v$z=null,v$p.text=v$V,v$p.noCompile=!0,0<=(v$i=v$V.indexOf("#"))){for(v$y="#",v$m=v$i+1,v$E=v$V.length;v$m<v$E;v$m++){var v$b=v$V.charAt(v$m);if(" "===v$b||"\t"===v$b||"\r"===v$b||"\n"===v$b||"?"===v$b)break;v$y+=v$b}switch(v$p.name=v$y){case"#ifdef":case"#ifndef":if(v$p.src=v$V,v$p.noCompile=null!=v$V.match(/[!&|()=<>]/),v$p.noCompile?console.log("function():Boolean{return "+v$V.substr(v$i+v$p.name.length)+"}"):(v$X=v$V.replace(/^\s*/,"").split(/\s+/),v$p.setCondition(v$X[1],"#ifdef"===v$y?1:2),v$p.text="//"+v$p.text),v$p.setParent(v$n),v$n=v$p,v$D)for(v$X=v$V.substr(v$m).split(v$T._splitToWordExps3),v$m=0;v$m<v$X.length;v$m++)(v$V=v$X[v$m]).length&&(v$D[v$V]=!0);continue;case"#if":if(v$p.src=v$V,v$p.noCompile=!0,v$p.setParent(v$n),v$n=v$p,v$D)for(v$X=v$V.substr(v$m).split(v$T._splitToWordExps3),v$m=0;v$m<v$X.length;v$m++)(v$V=v$X[v$m]).length&&"defined"!=v$V&&(v$D[v$V]=!0);continue;case"#else":v$p.src=v$V,v$Q=(v$n=v$n.parent).childs[v$n.childs.length-1],v$p.noCompile=v$Q.noCompile,v$p.noCompile||(v$p.condition=v$Q.condition,v$p.conditionType=1==v$Q.conditionType?2:1,v$p.text="//"+v$p.text+" "+v$Q.text+" "+v$p.conditionType),v$p.setParent(v$n),v$n=v$p;continue;case"#endif":v$Q=(v$n=v$n.parent).childs[v$n.childs.length-1],v$p.noCompile=v$Q.noCompile,v$p.noCompile||(v$p.text="//"+v$p.text),v$p.setParent(v$n);continue;case"#include":v$X=v$T.splitToWords(v$V,null);var v$P=v$T.includes[v$X[1]];if(!v$P)throw"ShaderCompile error no this include file:"+v$X[1];if((v$i=v$X[0].indexOf("?"))<0){v$p.setParent(v$n),v$V=v$P.getWith("with"==v$X[2]?v$X[3]:null),this._compileToTree(v$p,v$V.split("\n"),0,v$x,v$D),v$p.text="";continue}v$p.setCondition(v$X[0].substr(v$i+1),1),v$p.text=v$P.getWith("with"==v$X[2]?v$X[3]:null);break;case"#import":v$R=(v$X=v$T.splitToWords(v$V,null))[1],v$x.push({node:v$p,file:v$T.includes[v$R],ofs:v$p.text.length});continue}}else{if((v$Q=v$n.childs[v$n.childs.length-1])&&!v$Q.name){0<v$x.length&&v$T.splitToWords(v$V,v$Q),v$z=v$p,v$Q.text+="\n"+v$V;continue}0<v$x.length&&v$T.splitToWords(v$V,v$p)}v$p.setParent(v$n)}},v$n.createShader=function(v$n,v$a,v$U){var v$x={},v$D="";if(v$n)for(var v$p in v$n)v$D+="#define "+v$p+"\n",v$x[v$p]=!0;var v$Q=this._VS.toscript(v$x,[]),v$V=this._PS.toscript(v$x,[]);return(v$U||v$sn.create)(v$D+v$Q.join("\n"),v$D+v$V.join("\n"),v$a,this._nameMap)},v$T._parseOne=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q={type:v$T.shaderParamsMap[v$U[v$x+1]],name:v$U[v$x+2],size:isNaN(parseInt(v$U[v$x+3]))?1:parseInt(v$U[v$x+3])};return v$p&&("attribute"==v$D?v$n.push(v$Q):v$a.push(v$Q)),":"==v$U[v$x+3]&&(v$Q.type=v$U[v$x+4],v$x+=2),v$x+=2},v$T.addInclude=function(v$n,v$a){if(!v$a||0===v$a.length)throw new Error("add shader include file err:"+v$n);if(v$T.includes[v$n])throw new Error("add shader include file err, has add:"+v$n);v$T.includes[v$n]=new v$U(v$a)},v$T.preGetParams=function(v$n,v$a){var v$U=[v$n,v$a],v$x={},v$D=[],v$p=[],v$Q={},v$V=[];v$x.attributes=v$D,v$x.uniforms=v$p,v$x.defines=v$Q;for(var v$y=0,v$R=0,v$X=0;v$X<2;v$X++){v$U[v$X]=v$U[v$X].replace(v$T._removeAnnotation,"");var v$z,v$i=v$U[v$X].match(v$T._reg);for(v$y=0,v$R=v$i.length;v$y<v$R;v$y++){var v$q=v$i[v$y];if("attribute"==v$q||"uniform"==v$q)v$y=v$T._parseOne(v$D,v$p,v$i,v$y,v$q,!0);else{if("#define"==v$q){v$V[v$q=v$i[++v$y]]=1;continue}if("#ifdef"==v$q){v$Q[v$z=v$i[++v$y]]=v$Q[v$z]||[];for(v$y++;v$y<v$R;v$y++)if("attribute"==(v$q=v$i[v$y])||"uniform"==v$q)v$y=v$T._parseOne(v$D,v$p,v$i,v$y,v$q,v$V[v$z]);else if("#else"==v$q)for(v$y++;v$y<v$R;v$y++)if("attribute"==(v$q=v$i[v$y])||"uniform"==v$q)v$y=v$T._parseOne(v$D,v$p,v$i,v$y,v$q,!v$V[v$z]);else if("#endif"==v$q)break}}}}return v$x},v$T.splitToWords=function(v$n,v$a){for(var v$U,v$x,v$D=[],v$p=-1,v$Q=0,v$V=v$n.length;v$Q<v$V;v$Q++)if(v$U=v$n.charAt(v$Q),0<=" \t=+-*/&%!<>()'\",;".indexOf(v$U)){if(0<=v$p&&1<v$Q-v$p&&(v$x=v$n.substr(v$p,v$Q-v$p),v$D.push(v$x)),'"'==v$U||"'"==v$U){var v$y=v$n.indexOf(v$U,v$Q+1);if(v$y<0)throw"Sharder err:"+v$n;v$D.push(v$n.substr(v$Q+1,v$y-v$Q-1)),v$Q=v$y,v$p=-1;continue}"("==v$U&&v$a&&0<v$D.length&&(v$x=v$D[v$D.length-1]+";","vec4;main;".indexOf(v$x)<0&&(v$a.useFuns+=v$x)),v$p=-1}else v$p<0&&(v$p=v$Q);return v$p<v$V&&1<v$V-v$p&&(v$x=v$n.substr(v$p,v$V-v$p),v$D.push(v$x)),v$D},v$T.IFDEF_NO=0,v$T.IFDEF_YES=1,v$T.IFDEF_ELSE=2,v$T.IFDEF_PARENT=3,v$T._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),v$T._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),v$T._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),v$T.includes={},v$Q(v$T,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),v$T.__init$=function(){v$A=function(){function v$U(v$n){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=v$n}v$i(v$U,"");var v$n=v$U.prototype;return v$n.setParent=function(v$n){v$n.childs.push(this),this.z=v$n.z+1,this.parent=v$n},v$n.setCondition=function(v$n,v$a){v$n&&(this.conditionType=v$a,v$n=v$n.replace(/(\s*$)/g,""),this.condition=function(){return this[v$n]},this.condition.__condition=v$n)},v$n.toscript=function(v$n,v$a){return this._toscript(v$n,v$a,++v$U.__id)},v$n._toscript=function(v$x,v$D,v$p){if(this.childs.length<1&&!this.text)return v$D;v$D.length;if(this.condition){var v$n=!!this.condition.call(v$x);if(2===this.conditionType&&(v$n=!v$n),!v$n)return v$D}if(this.text&&v$D.push(this.text),0<this.childs.length&&this.childs.forEach(function(v$n,v$a,v$U){v$n._toscript(v$x,v$D,v$p)}),0<this.includefiles.length&&0<this.useFuns.length)for(var v$a,v$U=0,v$Q=this.includefiles.length;v$U<v$Q;v$U++)this.includefiles[v$U].curUseID!=v$p&&0<(v$a=this.includefiles[v$U].file.getFunsScript(this.useFuns)).length&&(this.includefiles[v$U].curUseID=v$p,v$D[0]=v$a+v$D[0]);return v$D},v$U.__id=1,v$U}(),v$U=function(){function v$n(v$n){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=v$n;for(var v$a=0,v$U=0,v$x=0;!((v$a=v$n.indexOf("#begin",v$a))<0);){for(v$x=v$a+5;!((v$x=v$n.indexOf("#end",v$x))<0)&&"i"===v$n.charAt(v$x+4);)v$x+=5;if(v$x<0)throw"add include err,no #end:"+v$n;v$U=v$n.indexOf("\n",v$a);var v$D=v$T.splitToWords(v$n.substr(v$a,v$U-v$a),null);"code"==v$D[1]?this.codes[v$D[2]]=v$n.substr(v$U+1,v$x-v$U-1):"function"==v$D[1]&&(v$U=v$n.indexOf("function",v$a),v$U+="function".length,this.funs[v$D[3]]=v$n.substr(v$U+1,v$x-v$U-1),this.funnames+=v$D[3]+";"),v$a=v$x+1}}v$i(v$n,"");var v$a=v$n.prototype;return v$a.getWith=function(v$n){var v$a=v$n?this.codes[v$n]:this.script;if(!v$a)throw"get with error:"+v$n;return v$a},v$a.getFunsScript=function(v$n){var v$a="";for(var v$U in this.funs)0<=v$n.indexOf(v$U+";")&&(v$a+=this.funs[v$U]);return v$a},v$n}()},v$T}(),v$Kn=function(){function v$Q(){}return v$i(v$Q,"laya.webgl.WebGL"),v$Q._uint8ArraySlice=function(){for(var v$n=this.length,v$a=new Uint8Array(this.length),v$U=0;v$U<v$n;v$U++)v$a[v$U]=this[v$U];return v$a},v$Q._float32ArraySlice=function(){for(var v$n=this.length,v$a=new Float32Array(this.length),v$U=0;v$U<v$n;v$U++)v$a[v$U]=this[v$U];return v$a},v$Q._uint16ArraySlice=function(v$n){var v$a,v$U=arguments,v$x=0,v$D=0;if(0===v$U.length)for(v$x=this.length,v$a=new Uint16Array(v$x),v$D=0;v$D<v$x;v$D++)v$a[v$D]=this[v$D];else if(2===v$U.length){var v$p=v$U[0],v$Q=v$U[1];if(v$p<v$Q)for(v$x=v$Q-v$p,v$a=new Uint16Array(v$x),v$D=v$p;v$D<v$Q;v$D++)v$a[v$D-v$p]=this[v$D];else v$a=new Uint16Array(0)}return v$a},v$Q.expandContext=function(){var v$n=v$D.prototype,v$a=CanvasRenderingContext2D.prototype;v$a.fillTrangles=v$n.fillTrangles,v$Cn.__int__(null),v$a.setIBVB=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){void 0===v$y&&(v$y=0),void 0===v$R&&(v$R=0),null===v$U&&(this._ib=this._ib||v$Jn.QuadrangleIB,v$U=this._ib,v$bn.expandIBQuadrangle(v$U,v$x._byteLength/64+8)),this._setIBVB(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R)},v$a.fillTrangles=function(v$n,v$a,v$U,v$x,v$D){this._curMat=this._curMat||v$_.create(),this._vb=this._vb||v$en.create(),this._ib||(this._ib=v$Jn.create(),v$bn.fillIBQuadrangle(this._ib,v$Q/4));var v$p=this._vb,v$Q=v$x.length>>4;v$bn.fillTranglesVB(v$p,v$a,v$U,v$x,v$D||this._curMat,0,0),v$bn.expandIBQuadrangle(this._ib,v$p._byteLength/64+8);var v$V=new v$Nn(1,0);v$V.textureHost=v$n;var v$y=new v$rn("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");v$p._vertType=3,this._setIBVB(v$a,v$U,this._ib,v$p,6*v$Q,v$D,v$y,v$V,0,0)}},v$Q.enable=function(){if(v$q.__init__(),v$P.isConchApp&&!v$P.isConchWebGL)return v$Y.skinAniSprite=function(){return new v$nn},v$Q.expandContext(),!1;if(v$Y.getWebGLContext=function(v$n){for(var v$a,v$U=["webgl","experimental-webgl","webkit-3d","moz-webgl"],v$x=0;v$x<v$U.length;v$x++){try{v$a=v$n.getContext(v$U[v$x],{stencil:v$k.isStencil,alpha:v$k.isAlpha,antialias:v$k.isAntialias,premultipliedAlpha:v$k.premultipliedAlpha,preserveDrawingBuffer:v$k.preserveDrawingBuffer})}catch(v$n){}if(v$a)return v$a}return null},null==(v$Q.mainContext=v$Q.mainContext||v$Y.getWebGLContext(v$P._mainCanvas)))return!1;if(v$P.isWebGL)return!0;v$m.create=function(v$n,v$a){return new v$na(v$n,v$a)},v$b.create=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){return new v$wn(v$n,v$a,v$U,v$x,v$D,v$p,v$Q)},v$P.WebGL=v$Q,v$P.isWebGL=!0,v$qn.__init__(),v$Y.createRenderSprite=function(v$n,v$a){return new v$_n(v$n,v$a)},v$Y.createWebGLContext2D=function(v$n){return new v$kn(v$n)},v$Y.changeWebGLSize=function(v$n,v$a){laya.webgl.WebGL.onStageResize(v$n,v$a)},v$Y.createGraphics=function(){return new v$Wn};var v$n=v$Y.createFilterAction;return v$Y.createFilterAction=v$n||function(v$n){return new v$$n},v$Y.clear=function(v$n){v$An.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var v$a=v$P.context.ctx,v$U=0==v$a._submits._length||v$k.preserveDrawingBuffer?v$E.create(v$n)._color:v$u._wgColor;v$U&&v$a.clearBG(v$U[0],v$U[1],v$U[2],v$U[3]),v$An.clear()},v$Y.addToAtlas=function(v$n,v$a){void 0===v$a&&(v$a=!1);var v$U=v$n.bitmap;v$P.optimizeTextureMemory(v$n.url,v$n)?v$W.__typeof(v$U,"laya.webgl.resource.IMergeAtlasBitmap")&&v$U.allowMerageInAtlas&&v$U.on("recovered",v$n,v$n.addTextureToAtlas):v$U.enableMerageInAtlas=!1},v$Y.isAtlas=function(v$n){return v$n instanceof laya.webgl.atlas.AtlasWebGLCanvas},v$g._enable(),v$Y.beginFlush=function(){for(var v$n=v$g.instance,v$a=v$n.getAtlaserCount(),v$U=0;v$U<v$a;v$U++){var v$x=v$n.getAtlaserByIndex(v$U).texture;v$x._flashCacheImageNeedFlush&&v$Y.flashFlushImage(v$x)}},v$Y.drawToCanvas=function(v$n,v$a,v$U,v$x,v$D,v$p){(v$U<=0||v$x<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),v$U|=0,v$x|=0,v$D|=0,v$p|=0;var v$Q=v$jn.create(v$U,v$x,6408,5121,0,!1);v$Q.start(),v$Q.clear(0,0,0,0),v$P.context.clear(),v$A.renders[v$a]._fun(v$n,v$P.context,v$D,v$An.height-v$x+v$p),v$P.context.flush(),v$Q.end();var v$V=v$Q.getData(0,0,v$U,v$x);if(v$Q.recycle(),v$V.byteLength==v$U*v$x*4){var v$y=new v$Ln;v$y._canvas=v$q.createElement("canvas"),v$y.size(v$U,v$x);var v$R=v$y._canvas.getContext("2d");v$q.canvas.size(v$U,v$x);var v$X=v$q.context,v$z=v$X.createImageData(v$U,v$x);return v$z.data.set(new Uint8ClampedArray(v$V.buffer)),v$y._imgData=v$z,v$X.putImageData(v$z,0,0),v$R.save(),v$R.translate(0,v$x),v$R.scale(1,-1),v$R.drawImage(v$q.canvas.source,0,0),v$R.restore(),v$y}console.log("drawToCanvas error: w:"+v$U+",h:"+v$x+",datalen:"+v$V.byteLength)},v$Y.createFilterAction=function(v$n){var v$a;switch(v$n){case 32:v$a=new v$$n}return v$a},v$Y.addTextureToAtlas=function(v$n){v$n._uvID++,v$g._atlasRestore++,v$n.bitmap.enableMerageInAtlas&&v$g.instance.addToAtlas(v$n)},v$Y.getTexturePixels=function(v$n,v$a,v$U,v$x,v$D){v$P.context.ctx.clear();var v$p=new v$Z;v$p.graphics.drawTexture(v$n,-v$a,-v$U);var v$Q=v$jn.create(v$x,v$D);v$Q.start(),v$Q.clear(0,0,0,0),v$p.render(v$P.context,0,0),v$P.context.ctx.flush(),v$Q.end();for(var v$V=v$Q.getData(0,0,v$x,v$D),v$y=[],v$R=0,v$X=v$D-1;0<=v$X;v$X--)for(var v$z=0;v$z<v$x;v$z++)v$R=4*(v$X*v$x+v$z),v$y.push(v$V[v$R]),v$y.push(v$V[v$R+1]),v$y.push(v$V[v$R+2]),v$y.push(v$V[v$R+3]);return v$y},v$Y.skinAniSprite=function(){return new v$nn},v$R.create=function(v$n,v$a){var v$U=new v$Ln;return v$U._imgData=v$a,v$U.flipY=!1,v$U},v$N._filterStart=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$n.getValue("bounds"),v$Q=v$jn.create(v$p.width,v$p.height);if(v$Q.start(),v$Q.clear(0,0,0,0),v$n.addValue("src",v$Q),v$n.addValue("ScissorTest",v$An.worldScissorTest),v$An.worldScissorTest){var v$V=new v$M;v$V.copyFrom(v$U.ctx._clipRect),v$n.addValue("clipRect",v$V),v$An.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},v$N._filterEnd=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$n.getValue("bounds");v$n.getValue("src").end();var v$Q=v$jn.create(v$p.width,v$p.height);v$Q.start(),v$Q.clear(0,0,0,0),v$n.addValue("out",v$Q),v$a._set$P("_filterCache",v$Q),v$a._set$P("_isHaveGlowFilter",v$n.getValue("_isHaveGlowFilter"))},v$N._EndTarget=function(v$n,v$a){if(v$n.getValue("src").recycle(),v$n.getValue("out").end(),v$n.getValue("ScissorTest")){v$An.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),v$a.ctx.save();var v$U=v$n.getValue("clipRect");v$a.ctx.clipRect(v$U.x,v$U.y,v$U.width,v$U.height)}},v$N._useSrc=function(v$n){var v$a=v$n.getValue("out");v$a.end(),(v$a=v$n.getValue("src")).start(),v$a.clear(0,0,0,0)},v$N._endSrc=function(v$n){v$n.getValue("src").end()},v$N._useOut=function(v$n){var v$a=v$n.getValue("src");v$a.end(),(v$a=v$n.getValue("out")).start(),v$a.clear(0,0,0,0)},v$N._endOut=function(v$n){v$n.getValue("out").end()},v$N._recycleScope=function(v$n){v$n.recycle()},v$N._filter=function(v$n,v$a,v$U,v$x){var v$D=this._next;if(v$D){var v$p,v$Q,v$V=v$n.filters,v$y=v$V.length;if(1==v$y&&32==v$V[0].type)return v$a.ctx.save(),v$a.ctx.setFilters([v$V[0]]),v$D._fun.call(v$D,v$n,v$a,v$U,v$x),void v$a.ctx.restore();var v$R=v$Vn.create(),v$X=v$$.TEMP,v$z=v$a.ctx._getTransformMatrix(),v$i=v$_.create();v$z.copyTo(v$i);var v$q=0,v$E=0,v$m=!1,v$b=v$n._$P._filterCache?v$n._$P._filterCache:null;if(!v$b||v$n._repaint){v$m=v$n._isHaveGlowFilter(),v$R.addValue("_isHaveGlowFilter",v$m),v$m&&(v$q=50,v$E=25),(v$Q=new v$M).copyFrom(v$n.getSelfBounds()),v$Q.x+=v$n.x,v$Q.y+=v$n.y,v$Q.x-=v$n.pivotX+4,v$Q.y-=v$n.pivotY+4;var v$P=v$Q.x,v$A=v$Q.y;if(v$Q.width+=v$q+8,v$Q.height+=v$q+8,v$X.x=v$Q.x*v$i.a+v$Q.y*v$i.c,v$X.y=v$Q.y*v$i.d+v$Q.x*v$i.b,v$Q.x=v$X.x,v$Q.y=v$X.y,v$X.x=v$Q.width*v$i.a+v$Q.height*v$i.c,v$X.y=v$Q.height*v$i.d+v$Q.width*v$i.b,v$Q.width=v$X.x,v$Q.height=v$X.y,v$Q.width<=0||v$Q.height<=0)return;v$b&&v$b.recycle(),v$R.addValue("bounds",v$Q);var v$T=v$Qn.create([v$R,v$n,v$a,0,0],v$N._filterStart);v$a.addRenderObject(v$T),v$a.ctx._renderKey=0,v$a.ctx._shader2D.glTexture=null;var v$K=v$n.x-v$P+v$E,v$Y=v$n.y-v$A+v$E;v$D._fun.call(v$D,v$n,v$a,v$K,v$Y),v$T=v$Qn.create([v$R,v$n,v$a,0,0],v$N._filterEnd),v$a.addRenderObject(v$T);for(var v$W=0;v$W<v$y;v$W++){0!=v$W&&(v$T=v$Qn.create([v$R],v$N._useSrc),v$a.addRenderObject(v$T),v$p=v$Nn.create(1,0),v$_.TEMP.identity(),v$a.ctx.drawTarget(v$R,0,0,v$Q.width,v$Q.height,v$_.TEMP,"out",v$p,null,v$B.TOINT.overlay),v$T=v$Qn.create([v$R],v$N._useOut),v$a.addRenderObject(v$T)),v$V[v$W].action.apply3d(v$R,v$n,v$a,0,0)}v$T=v$Qn.create([v$R,v$a],v$N._EndTarget),v$a.addRenderObject(v$T)}else{if((v$m=!!v$n._$P._isHaveGlowFilter&&v$n._$P._isHaveGlowFilter)&&(v$q=50,v$E=25),(v$Q=v$n.getBounds()).width<=0||v$Q.height<=0)return;v$Q.width+=v$q,v$Q.height+=v$q,v$X.x=v$Q.x*v$i.a+v$Q.y*v$i.c,v$X.y=v$Q.y*v$i.d+v$Q.x*v$i.b,v$Q.x=v$X.x,v$Q.y=v$X.y,v$X.x=v$Q.width*v$i.a+v$Q.height*v$i.c,v$X.y=v$Q.height*v$i.d+v$Q.width*v$i.b,v$Q.width=v$X.x,v$Q.height=v$X.y,v$R.addValue("out",v$b)}v$U=v$U-v$E-v$n.x,v$x=v$x-v$E-v$n.y,v$X.setTo(v$U,v$x),v$i.transformPoint(v$X),v$U=v$X.x+v$Q.x,v$x=v$X.y+v$Q.y,v$p=v$Nn.create(1,0),v$_.TEMP.identity(),v$a.ctx.drawTarget(v$R,v$U,v$x,v$Q.width,v$Q.height,v$_.TEMP,"out",v$p,null,v$B.TOINT.overlay),v$T=v$Qn.create([v$R],v$N._recycleScope),v$a.addRenderObject(v$T),v$i.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=v$Q._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=v$Q._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=v$Q._uint8ArraySlice),!0},v$Q.onStageResize=function(v$n,v$a){null!=v$Q.mainContext&&(v$Q.mainContext.viewport(0,0,v$n,v$a),v$An.width=v$n,v$An.height=v$a)},v$Q.onInvalidGLRes=function(){v$g.instance.freeAll(),v$K.releaseContentManagers(!0),v$Q.doNodeRepaint(v$W.stage),v$Q.mainContext.viewport(0,0,v$An.width,v$An.height),v$W.stage.event("devicelost")},v$Q.doNodeRepaint=function(v$n){0==v$n.numChildren&&v$n.repaint();for(var v$a=0;v$a<v$n.numChildren;v$a++)v$Q.doNodeRepaint(v$n.getChildAt(v$a))},v$Q.init=function(v$n,v$a,v$U){v$Q.mainCanvas=v$n,v$R._createContext=function(v$n){return new v$kn(v$n)},v$Ln._createContext=function(v$n){return new v$kn(v$n)};var v$x=laya.webgl.WebGL.mainContext;if(null!=v$x.getShaderPrecisionFormat){var v$D=v$x.getShaderPrecisionFormat(35633,36338),v$p=v$x.getShaderPrecisionFormat(35632,36338);v$Q.shaderHighPrecision=!(!v$D.precision||!v$p.precision)}else v$Q.shaderHighPrecision=!1;if(v$Q.compressAstc=v$x.getExtension("WEBGL_compressed_texture_astc"),v$Q.compressAtc=v$x.getExtension("WEBGL_compressed_texture_atc"),v$Q.compressEtc=v$x.getExtension("WEBGL_compressed_texture_etc"),v$Q.compressEtc1=v$x.getExtension("WEBGL_compressed_texture_etc1"),v$Q.compressPvrtc=v$x.getExtension("WEBGL_compressed_texture_pvrtc"),v$Q.compressS3tc=v$x.getExtension("WEBGL_compressed_texture_s3tc"),v$Q.compressS3tc_srgb=v$x.getExtension("WEBGL_compressed_texture_s3tc_srgb"),v$Q.compressAstc=v$Q.compressAstc?v$Q.compressAstc:{},v$Q.compressAtc=v$Q.compressAtc?v$Q.compressAtc:{},v$Q.compressEtc=v$Q.compressEtc?v$Q.compressEtc:{},v$Q.compressEtc1=v$Q.compressEtc1?v$Q.compressEtc1:{},v$Q.compressPvrtc=v$Q.compressPvrtc?v$Q.compressPvrtc:{},v$Q.compressS3tc=v$Q.compressS3tc?v$Q.compressS3tc:{},v$Q.compressS3tc_srgb=v$Q.compressS3tc_srgb?v$Q.compressS3tc_srgb:{},v$x.deleteTexture1=v$x.deleteTexture,v$x.deleteTexture=function(v$n){v$n==v$Yn.curBindTexValue&&(v$Yn.curBindTexValue=null),v$x.deleteTexture1(v$n)},v$Q.onStageResize(v$a,v$U),null==v$Q.mainContext)throw new Error("webGL getContext err!");v$G.__init__(),v$g.__init__(),v$Zn.__init__(),v$pn.__init__(),v$kn.__init__(),v$Nn.__init__(),v$J.__init__(),v$Cn.__int__(v$x),v$B._init_(v$x),v$P.isConchApp&&conch.setOnInvalidGLRes(v$Q.onInvalidGLRes)},v$Q.mainCanvas=null,v$Q.antialias=!0,v$Q.shaderHighPrecision=!1,v$Q._bg_null=[0,0,0,0],v$Q}(),v$Yn=function(){function v$x(){}return v$i(v$x,"laya.webgl.WebGLContext"),v$x.UseProgram=function(v$n){return v$x._useProgram!==v$n&&(v$Kn.mainContext.useProgram(v$n),v$x._useProgram=v$n,!0)},v$x.setDepthTest=function(v$n,v$a){v$a!==v$x._depthTest&&((v$x._depthTest=v$a)?v$n.enable(2929):v$n.disable(2929))},v$x.setDepthMask=function(v$n,v$a){v$a!==v$x._depthMask&&(v$x._depthMask=v$a,v$n.depthMask(v$a))},v$x.setDepthFunc=function(v$n,v$a){v$a!==v$x._depthFunc&&(v$x._depthFunc=v$a,v$n.depthFunc(v$a))},v$x.setBlend=function(v$n,v$a){v$a!==v$x._blend&&((v$x._blend=v$a)?v$n.enable(3042):v$n.disable(3042))},v$x.setBlendFunc=function(v$n,v$a,v$U){(v$a!==v$x._sFactor||v$U!==v$x._dFactor)&&(v$x._sFactor=v$a,v$x._dFactor=v$U,v$n.blendFunc(v$a,v$U))},v$x.setCullFace=function(v$n,v$a){v$a!==v$x._cullFace&&((v$x._cullFace=v$a)?v$n.enable(2884):v$n.disable(2884))},v$x.setFrontFace=function(v$n,v$a){v$a!==v$x._frontFace&&(v$x._frontFace=v$a,v$n.frontFace(v$a))},v$x.bindTexture=function(v$n,v$a,v$U){v$n.bindTexture(v$a,v$U),v$x.curBindTexTarget=v$a,v$x.curBindTexValue=v$U},v$x.DEPTH_BUFFER_BIT=256,v$x.STENCIL_BUFFER_BIT=1024,v$x.COLOR_BUFFER_BIT=16384,v$x.POINTS=0,v$x.LINES=1,v$x.LINE_LOOP=2,v$x.LINE_STRIP=3,v$x.TRIANGLES=4,v$x.TRIANGLE_STRIP=5,v$x.TRIANGLE_FAN=6,v$x.ZERO=0,v$x.ONE=1,v$x.SRC_COLOR=768,v$x.ONE_MINUS_SRC_COLOR=769,v$x.SRC_ALPHA=770,v$x.ONE_MINUS_SRC_ALPHA=771,v$x.DST_ALPHA=772,v$x.ONE_MINUS_DST_ALPHA=773,v$x.DST_COLOR=774,v$x.ONE_MINUS_DST_COLOR=775,v$x.SRC_ALPHA_SATURATE=776,v$x.FUNC_ADD=32774,v$x.BLEND_EQUATION=32777,v$x.BLEND_EQUATION_RGB=32777,v$x.BLEND_EQUATION_ALPHA=34877,v$x.FUNC_SUBTRACT=32778,v$x.FUNC_REVERSE_SUBTRACT=32779,v$x.BLEND_DST_RGB=32968,v$x.BLEND_SRC_RGB=32969,v$x.BLEND_DST_ALPHA=32970,v$x.BLEND_SRC_ALPHA=32971,v$x.CONSTANT_COLOR=32769,v$x.ONE_MINUS_CONSTANT_COLOR=32770,v$x.CONSTANT_ALPHA=32771,v$x.ONE_MINUS_CONSTANT_ALPHA=32772,v$x.BLEND_COLOR=32773,v$x.ARRAY_BUFFER=34962,v$x.ELEMENT_ARRAY_BUFFER=34963,v$x.ARRAY_BUFFER_BINDING=34964,v$x.ELEMENT_ARRAY_BUFFER_BINDING=34965,v$x.STREAM_DRAW=35040,v$x.STATIC_DRAW=35044,v$x.DYNAMIC_DRAW=35048,v$x.BUFFER_SIZE=34660,v$x.BUFFER_USAGE=34661,v$x.CURRENT_VERTEX_ATTRIB=34342,v$x.FRONT=1028,v$x.BACK=1029,v$x.CULL_FACE=2884,v$x.FRONT_AND_BACK=1032,v$x.BLEND=3042,v$x.DITHER=3024,v$x.STENCIL_TEST=2960,v$x.DEPTH_TEST=2929,v$x.SCISSOR_TEST=3089,v$x.POLYGON_OFFSET_FILL=32823,v$x.SAMPLE_ALPHA_TO_COVERAGE=32926,v$x.SAMPLE_COVERAGE=32928,v$x.NO_ERROR=0,v$x.INVALID_ENUM=1280,v$x.INVALID_VALUE=1281,v$x.INVALID_OPERATION=1282,v$x.OUT_OF_MEMORY=1285,v$x.CW=2304,v$x.CCW=2305,v$x.LINE_WIDTH=2849,v$x.ALIASED_POINT_SIZE_RANGE=33901,v$x.ALIASED_LINE_WIDTH_RANGE=33902,v$x.CULL_FACE_MODE=2885,v$x.FRONT_FACE=2886,v$x.DEPTH_RANGE=2928,v$x.DEPTH_WRITEMASK=2930,v$x.DEPTH_CLEAR_VALUE=2931,v$x.DEPTH_FUNC=2932,v$x.STENCIL_CLEAR_VALUE=2961,v$x.STENCIL_FUNC=2962,v$x.STENCIL_FAIL=2964,v$x.STENCIL_PASS_DEPTH_FAIL=2965,v$x.STENCIL_PASS_DEPTH_PASS=2966,v$x.STENCIL_REF=2967,v$x.STENCIL_VALUE_MASK=2963,v$x.STENCIL_WRITEMASK=2968,v$x.STENCIL_BACK_FUNC=34816,v$x.STENCIL_BACK_FAIL=34817,v$x.STENCIL_BACK_PASS_DEPTH_FAIL=34818,v$x.STENCIL_BACK_PASS_DEPTH_PASS=34819,v$x.STENCIL_BACK_REF=36003,v$x.STENCIL_BACK_VALUE_MASK=36004,v$x.STENCIL_BACK_WRITEMASK=36005,v$x.VIEWPORT=2978,v$x.SCISSOR_BOX=3088,v$x.COLOR_CLEAR_VALUE=3106,v$x.COLOR_WRITEMASK=3107,v$x.UNPACK_ALIGNMENT=3317,v$x.PACK_ALIGNMENT=3333,v$x.MAX_TEXTURE_SIZE=3379,v$x.MAX_VIEWPORT_DIMS=3386,v$x.SUBPIXEL_BITS=3408,v$x.RED_BITS=3410,v$x.GREEN_BITS=3411,v$x.BLUE_BITS=3412,v$x.ALPHA_BITS=3413,v$x.DEPTH_BITS=3414,v$x.STENCIL_BITS=3415,v$x.POLYGON_OFFSET_UNITS=10752,v$x.POLYGON_OFFSET_FACTOR=32824,v$x.TEXTURE_BINDING_2D=32873,v$x.SAMPLE_BUFFERS=32936,v$x.SAMPLES=32937,v$x.SAMPLE_COVERAGE_VALUE=32938,v$x.SAMPLE_COVERAGE_INVERT=32939,v$x.NUM_COMPRESSED_TEXTURE_FORMATS=34466,v$x.COMPRESSED_TEXTURE_FORMATS=34467,v$x.DONT_CARE=4352,v$x.FASTEST=4353,v$x.NICEST=4354,v$x.GENERATE_MIPMAP_HINT=33170,v$x.BYTE=5120,v$x.UNSIGNED_BYTE=5121,v$x.SHORT=5122,v$x.UNSIGNED_SHORT=5123,v$x.INT=5124,v$x.UNSIGNED_INT=5125,v$x.FLOAT=5126,v$x.DEPTH_COMPONENT=6402,v$x.ALPHA=6406,v$x.RGB=6407,v$x.RGBA=6408,v$x.LUMINANCE=6409,v$x.LUMINANCE_ALPHA=6410,v$x.UNSIGNED_SHORT_4_4_4_4=32819,v$x.UNSIGNED_SHORT_5_5_5_1=32820,v$x.UNSIGNED_SHORT_5_6_5=33635,v$x.FRAGMENT_SHADER=35632,v$x.VERTEX_SHADER=35633,v$x.MAX_VERTEX_ATTRIBS=34921,v$x.MAX_VERTEX_UNIFORM_VECTORS=36347,v$x.MAX_VARYING_VECTORS=36348,v$x.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,v$x.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,v$x.MAX_TEXTURE_IMAGE_UNITS=34930,v$x.MAX_FRAGMENT_UNIFORM_VECTORS=36349,v$x.SHADER_TYPE=35663,v$x.DELETE_STATUS=35712,v$x.LINK_STATUS=35714,v$x.VALIDATE_STATUS=35715,v$x.ATTACHED_SHADERS=35717,v$x.ACTIVE_UNIFORMS=35718,v$x.ACTIVE_ATTRIBUTES=35721,v$x.SHADING_LANGUAGE_VERSION=35724,v$x.CURRENT_PROGRAM=35725,v$x.NEVER=512,v$x.LESS=513,v$x.EQUAL=514,v$x.LEQUAL=515,v$x.GREATER=516,v$x.NOTEQUAL=517,v$x.GEQUAL=518,v$x.ALWAYS=519,v$x.KEEP=7680,v$x.REPLACE=7681,v$x.INCR=7682,v$x.DECR=7683,v$x.INVERT=5386,v$x.INCR_WRAP=34055,v$x.DECR_WRAP=34056,v$x.VENDOR=7936,v$x.RENDERER=7937,v$x.VERSION=7938,v$x.NEAREST=9728,v$x.LINEAR=9729,v$x.NEAREST_MIPMAP_NEAREST=9984,v$x.LINEAR_MIPMAP_NEAREST=9985,v$x.NEAREST_MIPMAP_LINEAR=9986,v$x.LINEAR_MIPMAP_LINEAR=9987,v$x.TEXTURE_MAG_FILTER=10240,v$x.TEXTURE_MIN_FILTER=10241,v$x.TEXTURE_WRAP_S=10242,v$x.TEXTURE_WRAP_T=10243,v$x.TEXTURE_2D=3553,v$x.TEXTURE=5890,v$x.TEXTURE_CUBE_MAP=34067,v$x.TEXTURE_BINDING_CUBE_MAP=34068,v$x.TEXTURE_CUBE_MAP_POSITIVE_X=34069,v$x.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,v$x.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,v$x.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,v$x.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,v$x.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,v$x.MAX_CUBE_MAP_TEXTURE_SIZE=34076,v$x.TEXTURE0=33984,v$x.TEXTURE1=33985,v$x.TEXTURE2=33986,v$x.TEXTURE3=33987,v$x.TEXTURE4=33988,v$x.TEXTURE5=33989,v$x.TEXTURE6=33990,v$x.TEXTURE7=33991,v$x.TEXTURE8=33992,v$x.TEXTURE9=33993,v$x.TEXTURE10=33994,v$x.TEXTURE11=33995,v$x.TEXTURE12=33996,v$x.TEXTURE13=33997,v$x.TEXTURE14=33998,v$x.TEXTURE15=33999,v$x.TEXTURE16=34e3,v$x.TEXTURE17=34001,v$x.TEXTURE18=34002,v$x.TEXTURE19=34003,v$x.TEXTURE20=34004,v$x.TEXTURE21=34005,v$x.TEXTURE22=34006,v$x.TEXTURE23=34007,v$x.TEXTURE24=34008,v$x.TEXTURE25=34009,v$x.TEXTURE26=34010,v$x.TEXTURE27=34011,v$x.TEXTURE28=34012,v$x.TEXTURE29=34013,v$x.TEXTURE30=34014,v$x.TEXTURE31=34015,v$x.ACTIVE_TEXTURE=34016,v$x.REPEAT=10497,v$x.CLAMP_TO_EDGE=33071,v$x.MIRRORED_REPEAT=33648,v$x.FLOAT_VEC2=35664,v$x.FLOAT_VEC3=35665,v$x.FLOAT_VEC4=35666,v$x.INT_VEC2=35667,v$x.INT_VEC3=35668,v$x.INT_VEC4=35669,v$x.BOOL=35670,v$x.BOOL_VEC2=35671,v$x.BOOL_VEC3=35672,v$x.BOOL_VEC4=35673,v$x.FLOAT_MAT2=35674,v$x.FLOAT_MAT3=35675,v$x.FLOAT_MAT4=35676,v$x.SAMPLER_2D=35678,v$x.SAMPLER_CUBE=35680,v$x.VERTEX_ATTRIB_ARRAY_ENABLED=34338,v$x.VERTEX_ATTRIB_ARRAY_SIZE=34339,v$x.VERTEX_ATTRIB_ARRAY_STRIDE=34340,v$x.VERTEX_ATTRIB_ARRAY_TYPE=34341,v$x.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,v$x.VERTEX_ATTRIB_ARRAY_POINTER=34373,v$x.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,v$x.COMPILE_STATUS=35713,v$x.LOW_FLOAT=36336,v$x.MEDIUM_FLOAT=36337,v$x.HIGH_FLOAT=36338,v$x.LOW_INT=36339,v$x.MEDIUM_INT=36340,v$x.HIGH_INT=36341,v$x.FRAMEBUFFER=36160,v$x.RENDERBUFFER=36161,v$x.RGBA4=32854,v$x.RGB5_A1=32855,v$x.RGB565=36194,v$x.DEPTH_COMPONENT16=33189,v$x.STENCIL_INDEX=6401,v$x.STENCIL_INDEX8=36168,v$x.DEPTH_STENCIL=34041,v$x.RENDERBUFFER_WIDTH=36162,v$x.RENDERBUFFER_HEIGHT=36163,v$x.RENDERBUFFER_INTERNAL_FORMAT=36164,v$x.RENDERBUFFER_RED_SIZE=36176,v$x.RENDERBUFFER_GREEN_SIZE=36177,v$x.RENDERBUFFER_BLUE_SIZE=36178,v$x.RENDERBUFFER_ALPHA_SIZE=36179,v$x.RENDERBUFFER_DEPTH_SIZE=36180,v$x.RENDERBUFFER_STENCIL_SIZE=36181,v$x.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,v$x.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,v$x.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,v$x.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,v$x.COLOR_ATTACHMENT0=36064,v$x.DEPTH_ATTACHMENT=36096,v$x.STENCIL_ATTACHMENT=36128,v$x.DEPTH_STENCIL_ATTACHMENT=33306,v$x.NONE=0,v$x.FRAMEBUFFER_COMPLETE=36053,v$x.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,v$x.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,v$x.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,v$x.FRAMEBUFFER_UNSUPPORTED=36061,v$x.FRAMEBUFFER_BINDING=36006,v$x.RENDERBUFFER_BINDING=36007,v$x.MAX_RENDERBUFFER_SIZE=34024,v$x.INVALID_FRAMEBUFFER_OPERATION=1286,v$x.UNPACK_FLIP_Y_WEBGL=37440,v$x.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,v$x.CONTEXT_LOST_WEBGL=37442,v$x.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,v$x.BROWSER_DEFAULT_WEBGL=37444,v$x._useProgram=null,v$x._depthTest=!0,v$x._depthMask=!0,v$x._blend=!1,v$x._cullFace=!1,v$x.curBindTexTarget=null,v$x.curBindTexValue=null,v$Q(v$x,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),v$x}(),v$Wn=function(v$n){function v$a(){v$a.__super.call(this)}v$i(v$a,"laya.webgl.display.GraphicsGL",v$V);var v$U=v$a.prototype;return v$U.setShader=function(v$n){this._saveToCmd(v$P.context._setShader,[v$n])},v$U.setIBVB=function(v$n,v$a,v$U,v$x,v$D,v$p){this._saveToCmd(v$P.context._setIBVB,[v$n,v$a,v$U,v$x,v$D,v$p])},v$U.drawParticle=function(v$n,v$a,v$U){var v$x=v$Y.createParticleTemplate2D(v$U);v$x.x=v$n,v$x.y=v$a,this._saveToCmd(v$P.context._drawParticle,[v$x])},v$a}(),v$kn=function(v$n){var v$U;function v$F(v$n){this._x=0,this._y=0,this._id=++v$F._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,v$F.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=v$F.MAXCLIPRECT,this.mOutPoint,this._canvas=v$n,this._canvas._addReference(),v$F._contextcount++,v$P.isFlash?(this._ib=v$Jn.create(35044),v$bn.fillIBQuadrangle(this._ib,16)):this._ib=v$Jn.QuadrangleIB,this.clear()}v$i(v$F,"laya.webgl.canvas.WebGLContext2D",v$D);var v$a=v$F.prototype;return v$a.setIsMainContext=function(){this._isMain=!0},v$a.clearBG=function(v$n,v$a,v$U,v$x){var v$D=v$Kn.mainContext;v$D.clearColor(v$n,v$a,v$U,v$x),v$D.clear(16384)},v$a._getSubmits=function(){return this._submits},v$a._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var v$n=0,v$a=this._submits._length;v$n<v$a;v$n++)this._submits[v$n].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},v$a.destroy=function(){--v$F._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=v$Jn.QuadrangleIB&&this._ib.releaseResource()},v$a.clear=function(){this._submits||(this._other=v$U.DEFAULT,this._curMat=v$_.create(),this._vb=v$en.create(-1),this._submits=[],this._save=[v$s.Create(this)],this._save.length=10,this._shader2D=new v$J,this._triangleMesh=v$vn.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=v$U.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=v$F.MAXCLIPRECT,this._curSubmit=v$pn.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=v$O.DEFAULT;for(var v$n=0,v$a=this._submits._length;v$n<v$a;v$n++)this._submits[v$n].releaseRender(),this._submits[v$n]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},v$a.size=function(v$n,v$a){if(this._width!=v$n||this._height!=v$a)if(0==v$n||0==v$a){0!=this._vb._byteLength&&(this._width=v$n,this._height=v$a,this._vb.clear(),this._vb.upload());for(var v$U=0,v$x=this._submits._length;v$U<v$x;v$U++)this._submits[v$U].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=v$n,this._height=v$a,this._targets&&this._targets.size(v$n,v$a),this._canvas.memorySize-=this._canvas.memorySize;0===v$n&&0===v$a&&this._releaseMem()},v$a._getTransformMatrix=function(){return this._curMat},v$a.translate=function(v$n,v$a){0===v$n&&0===v$a||(v$t.save(this),this._curMat.bTransform&&(v$C.save(this),this._curMat.transformPointN(v$$.TEMP.setTo(v$n,v$a)),v$n=v$$.TEMP.x,v$a=v$$.TEMP.y),this._x+=v$n,this._y+=v$a)},v$a.save=function(){this._save[this._save._length++]=v$s.Create(this)},v$a.restore=function(){var v$n=this._save._length;if(!(v$n<1))for(var v$a=v$n-1;0<=v$a;v$a--){var v$U=this._save[v$a];if(v$U.restore(this),v$U.isSaveMark())return void(this._save._length=v$a)}},v$a._fillText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){void 0===v$R&&(v$R=0);var v$X=this._shader2D,v$z=this._curSubmit.shaderValue,v$i=v$D?v$En.create(v$D):this._other.font;if(v$g.enabled)v$X.ALPHA!==v$z.ALPHA&&(v$X.glTexture=null),v$qn.drawText(this,v$n,v$a,this._curMat,v$i,v$y||this._other.textAlign,v$p,v$Q,v$V,v$U,v$x,v$R);else{this._shader2D.defines.getValue();var v$q=v$p?v$E.create(v$p)._color:v$X.colorAdd;v$X.ALPHA===v$z.ALPHA&&v$q===v$X.colorAdd&&v$z.colorAdd===v$X.colorAdd||(v$X.glTexture=null,v$X.colorAdd=v$q),v$qn.drawText(this,v$n,v$a,this._curMat,v$i,v$y||this._other.textAlign,v$p,v$Q,v$V,v$U,v$x,v$R)}},v$a.fillWords=function(v$n,v$a,v$U,v$x,v$D,v$p){this._fillText(null,v$n,v$a,v$U,v$x,v$D,null,-1,null,v$p)},v$a.fillBorderWords=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this._fillBorderText(null,v$n,v$a,v$U,v$x,v$D,v$p,v$Q,null)},v$a.fillText=function(v$n,v$a,v$U,v$x,v$D,v$p){this._fillText(v$n,null,v$a,v$U,v$x,v$D,null,-1,v$p)},v$a.strokeText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this._fillText(v$n,null,v$a,v$U,v$x,null,v$D,v$p||1,v$Q)},v$a.fillBorderText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){this._fillBorderText(v$n,null,v$a,v$U,v$x,v$D,v$p,v$Q,v$V)},v$a._fillBorderText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){if(!v$g.enabled)return this._fillText(v$n,v$a,v$U,v$x,v$D,null,v$Q,v$V||1,v$y),void this._fillText(v$n,v$a,v$U,v$x,v$D,v$p,null,-1,v$y);var v$R=this._shader2D,v$X=this._curSubmit.shaderValue;v$R.ALPHA!==v$X.ALPHA&&(v$R.glTexture=null);var v$z=v$D?(v$F._fontTemp.setFont(v$D),v$F._fontTemp):this._other.font;v$qn.drawText(this,v$n,v$a,this._curMat,v$z,v$y||this._other.textAlign,v$p,v$Q,v$V||1,v$U,v$x,0)},v$a.fillRect=function(v$n,v$a,v$U,v$x,v$D){var v$p=this._vb;if(v$bn.fillRectImgVb(v$p,this._clipRect,v$n,v$a,v$U,v$x,v$v.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var v$Q=this._shader2D.fillStyle;v$D&&(this._shader2D.fillStyle=v$O.create(v$D));var v$V=this._shader2D,v$y=this._curSubmit.shaderValue;if(v$V.fillStyle!==v$y.fillStyle||v$V.ALPHA!==v$y.ALPHA){v$V.glTexture=null;var v$R=this._curSubmit=v$pn.createSubmit(this,this._ib,v$p,(v$p._byteLength-64)/32*3,v$Nn.create(2,0));v$R.shaderValue.color=v$V.fillStyle._color._color,v$R.shaderValue.ALPHA=v$V.ALPHA,this._submits[this._submits._length++]=v$R}this._curSubmit._numEle+=6,this._shader2D.fillStyle=v$Q}},v$a.fillTexture=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){if(v$n.loaded&&v$n.bitmap&&v$n.source){var v$y=this._vb,v$R=v$n.bitmap.width,v$X=v$n.bitmap.height,v$z=v$n.uv,v$i=v$Q.x%v$n.width,v$q=v$Q.y%v$n.height;if(v$R!=v$V.w||v$X!=v$V.h){if(!v$V.w&&!v$V.h)switch(v$V.oy=v$V.ox=0,v$p){case"repeat":v$V.width=v$x,v$V.height=v$D;break;case"repeat-x":v$V.width=v$x,v$q<0?v$n.height+v$q>v$D?v$V.height=v$D:v$V.height=v$n.height+v$q:(v$V.oy=v$q,v$n.height+v$q>v$D?v$V.height=v$D-v$q:v$V.height=v$n.height);break;case"repeat-y":v$i<0?v$n.width+v$i>v$x?v$V.width=v$x:v$V.width=v$n.width+v$i:(v$V.ox=v$i,v$n.width+v$i>v$x?v$V.width=v$x-v$i:v$V.width=v$n.width),v$V.height=v$D;break;case"no-repeat":v$i<0?v$n.width+v$i>v$x?v$V.width=v$x:v$V.width=v$n.width+v$i:(v$V.ox=v$i,v$n.width+v$i>v$x?v$V.width=v$x-v$i:v$V.width=v$n.width),v$q<0?v$n.height+v$q>v$D?v$V.height=v$D:v$V.height=v$n.height+v$q:(v$V.oy=v$q,v$n.height+v$q>v$D?v$V.height=v$D-v$q:v$V.height=v$n.height);break;default:v$V.width=v$x,v$V.height=v$D}v$V.w=v$R,v$V.h=v$X,v$V.uv=[0,0,v$V.width/v$R,0,v$V.width/v$R,v$V.height/v$X,0,v$V.height/v$X]}if(v$a+=v$V.ox,v$U+=v$V.oy,v$i-=v$V.ox,v$q-=v$V.oy,v$bn.fillRectImgVb(v$y,this._clipRect,v$a,v$U,v$V.width,v$V.height,v$V.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var v$E=v$In.create(this,this._ib,v$y,(v$y._byteLength-64)/32*3,v$Nn.create(256,0)),v$m=(this._submits[this._submits._length++]=v$E).shaderValue;v$m.textureHost=v$n;var v$b=v$z[0]*v$R,v$P=v$z[1]*v$X,v$A=(v$z[2]-v$z[0])*v$R,v$T=(v$z[5]-v$z[3])*v$X,v$K=-v$i/v$R,v$Y=-v$q/v$X;v$m.u_TexRange[0]=v$b/v$R,v$m.u_TexRange[1]=v$A/v$R,v$m.u_TexRange[2]=v$P/v$X,v$m.u_TexRange[3]=v$T/v$X,v$m.u_offset[0]=v$K,v$m.u_offset[1]=v$Y,v$g.enabled&&!this._isMain&&v$E.addTexture(v$n,(v$y._byteLength>>2)-16),(this._curSubmit=v$E)._renderType=10017,v$E._numEle+=6}}else this.sprite&&v$W.timer.callLater(this,this._repaintSprite)},v$a.setShader=function(v$n){v$d.save(this,1048576,this._shader2D,!0),this._shader2D.shader=v$n},v$a.setFilters=function(v$n){v$d.save(this,2097152,this._shader2D,!0),this._shader2D.filters=v$n,this._curSubmit=v$pn.RENDERBASE,this._renderKey=0,this._drawCount++},v$a.drawTexture=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this._drawTextureM(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,null,1)},v$a.addTextureVb=function(v$n,v$a,v$U){var v$x=this._curSubmit._vb||this._vb,v$D=v$x._byteLength>>2;v$x.byteLength=v$D+16<<2;for(var v$p=v$x.getFloat32Array(),v$Q=0;v$Q<16;v$Q+=4)v$p[v$D++]=v$n[v$Q]+v$a,v$p[v$D++]=v$n[v$Q+1]+v$U,v$p[v$D++]=v$n[v$Q+2],v$p[v$D++]=v$n[v$Q+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),v$x._upload=!0},v$a.willDrawTexture=function(v$n,v$a){if(!(v$n.loaded&&v$n.bitmap&&v$n.source))return this.sprite&&v$W.timer.callLater(this,this._repaintSprite),0;var v$U=v$n.bitmap,v$x=v$U.id+this._shader2D.ALPHA*v$a+10016;if(v$x==this._renderKey)return v$x;var v$D=this._shader2D,v$p=v$D.ALPHA,v$Q=this._curSubmit.shaderValue;v$D.ALPHA*=v$a,this._renderKey=v$x,this._drawCount++,v$D.glTexture=v$U;var v$V=this._vb,v$y=null,v$R=v$V._byteLength/32*3,v$X=v$Q.textureHost&&v$Q.textureHost==v$n&&v$Q.textureHost.alphaTexture==v$n.alphaTexture;return v$y=v$In.create(this,this._ib,v$V,v$R,v$Nn.create(1,0)),(this._submits[this._submits._length++]=v$y).shaderValue.textureHost=v$n,v$y._renderType=10016,v$y._preIsSameTextureShader=10016===this._curSubmit._renderType&&v$D.ALPHA===v$Q.ALPHA&&v$X,this._curSubmit=v$y,v$D.ALPHA=v$p,v$x},v$a.drawTextures=function(v$n,v$a,v$U,v$x){if(v$n.loaded&&v$n.bitmap&&v$n.source){var v$D=this._clipRect;if(this._clipRect=v$F.MAXCLIPRECT,this._drawTextureM(v$n,v$a[0],v$a[1],v$n.width,v$n.height,v$U,v$x,null,1)){if(this._clipRect=v$D,v$c.drawCall++,!(v$a.length<4)){for(var v$p=this._curSubmit._vb||this._vb,v$Q=this._curMat.a,v$V=this._curMat.d,v$y=2,v$R=v$a.length;v$y<v$R;v$y+=2)v$bn.copyPreImgVb(v$p,(v$a[v$y]-v$a[v$y-2])*v$Q,(v$a[v$y+1]-v$a[v$y-1])*v$V),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&v$W.timer.callLater(this,this._repaintSprite)},v$a._drawTextureM=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){if(!v$n.loaded||!v$n.source)return this.sprite&&v$W.timer.callLater(this,this._repaintSprite),!1;var v$R=this._curSubmit._vb||this._vb,v$X=v$n.bitmap;v$a+=v$p,v$U+=v$Q,this._drawCount++;var v$z=v$X.id+this._shader2D.ALPHA*v$y+10016;if(v$z!=this._renderKey){this._renderKey=v$z;var v$i=this._curSubmit.shaderValue,v$q=this._shader2D,v$E=v$q.ALPHA;v$q.ALPHA*=v$y,v$q.glTexture=v$X;var v$m=this._vb,v$b=null,v$P=v$m._byteLength/32*3,v$A=v$i.textureHost&&v$i.textureHost==v$n&&v$i.textureHost.alphaTexture==v$n.alphaTexture;v$b=v$In.create(this,this._ib,v$m,v$P,v$Nn.create(1,0)),(this._submits[this._submits._length++]=v$b).shaderValue.textureHost=v$n,v$b._renderType=10016,v$b._preIsSameTextureShader=10016===this._curSubmit._renderType&&v$q.ALPHA===v$i.ALPHA&&v$A,this._curSubmit=v$b,v$R=this._curSubmit._vb||this._vb,v$q.ALPHA=v$E}return!!v$bn.fillRectImgVb(v$R,this._clipRect,v$a,v$U,v$x||v$n.width,v$D||v$n.height,v$n.uv,v$V||this._curMat,this._x,this._y,0,0)&&(v$g.enabled&&!this._isMain&&this._curSubmit.addTexture(v$n,(v$R._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},v$a._repaintSprite=function(){this.sprite&&this.sprite.repaint()},v$a._drawText=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){var v$X=v$n.bitmap;this._drawCount++;var v$z=v$X.id+this._shader2D.ALPHA+10016;if(v$z!=this._renderKey){this._renderKey=v$z;var v$i=this._curSubmit.shaderValue,v$q=this._shader2D;v$q.glTexture=v$X;var v$E=this._vb,v$m=null,v$b=v$E._byteLength/32*3,v$P=v$i.textureHost&&v$i.textureHost==v$n&&v$i.textureHost.alphaTexture==v$n.alphaTexture;(v$m=v$g.enabled?v$In.create(this,this._ib,v$E,v$b,v$Nn.create(1,0)):v$In.create(this,this._ib,v$E,v$b,v$tn.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&v$q.ALPHA===v$i.ALPHA&&v$P,(this._submits[this._submits._length++]=v$m).shaderValue.textureHost=v$n,v$m._renderType=10016,this._curSubmit=v$m}v$n.active();var v$A=this._curSubmit._vb||this._vb;v$bn.fillRectImgVb(v$A,this._clipRect,v$a+v$Q,v$U+v$V,v$x||v$n.width,v$D||v$n.height,v$n.uv,v$p||this._curMat,this._x,this._y,v$y,v$R,!0)&&(v$g.enabled&&!this._isMain&&this._curSubmit.addTexture(v$n,(v$A._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},v$a.drawTextureWithTransform=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){if(v$p){var v$R=this._curMat,v$X=this._x,v$z=this._y;(0!==v$Q||0!==v$V)&&(this._x=v$Q*v$R.a+v$V*v$R.c,this._y=v$V*v$R.d+v$Q*v$R.b),v$p&&v$R.bTransform?(v$_.mul(v$p,v$R,v$F._tmpMatrix),(v$p=v$F._tmpMatrix)._checkTransform()):(this._x+=v$R.tx,this._y+=v$R.ty),this._drawTextureM(v$n,v$a,v$U,v$x,v$D,0,0,v$p,v$y),this._x=v$X,this._y=v$z}else this._drawTextureM(v$n,v$a,v$U,v$x,v$D,v$Q,v$V,null,v$y)},v$a.fillQuadrangle=function(v$n,v$a,v$U,v$x,v$D){var v$p=this._curSubmit,v$Q=this._vb,v$V=this._shader2D,v$y=v$p.shaderValue;if(this._renderKey=0,v$n.bitmap){var v$R=v$n.bitmap;v$V.glTexture==v$R&&v$V.ALPHA===v$y.ALPHA||(v$V.glTexture=v$R,(v$p=this._curSubmit=v$pn.createSubmit(this,this._ib,v$Q,v$Q._byteLength/32*3,v$Nn.create(1,0))).shaderValue.glTexture=v$R,this._submits[this._submits._length++]=v$p),v$bn.fillQuadrangleImgVb(v$Q,v$a,v$U,v$x,v$n.uv,v$D||this._curMat,this._x,this._y)}else v$p.shaderValue.fillStyle&&v$p.shaderValue.fillStyle.equal(v$n)&&v$V.ALPHA===v$y.ALPHA||(v$V.glTexture=null,(v$p=this._curSubmit=v$pn.createSubmit(this,this._ib,v$Q,v$Q._byteLength/32*3,v$Nn.create(2,0))).shaderValue.defines.add(2),v$p.shaderValue.fillStyle=v$O.create(v$n),this._submits[this._submits._length++]=v$p),v$bn.fillQuadrangleImgVb(v$Q,v$a,v$U,v$x,v$v.DEF_UV,v$D||this._curMat,this._x,this._y);v$p._numEle+=6},v$a.drawTexture2=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){if(0!=v$p){var v$y=this._curMat;if(this._x=v$n*v$y.a+v$a*v$y.c,this._y=v$a*v$y.d+v$n*v$y.b,v$D&&(v$D=v$y.bTransform||v$D.bTransform?(v$_.mul(v$D,v$y,v$F._tmpMatrix),v$F._tmpMatrix):(this._x+=v$D.tx+v$y.tx,this._y+=v$D.ty+v$y.ty,v$_.EMPTY)),1!==v$p||v$Q){var v$R=this._shader2D.ALPHA,v$X=this._nBlendType;this._shader2D.ALPHA=v$p,v$Q&&(this._nBlendType=v$B.TOINT(v$Q)),this._drawTextureM(v$V[0],v$V[1]-v$U,v$V[2]-v$x,v$V[3],v$V[4],0,0,v$D,1),this._shader2D.ALPHA=v$R,this._nBlendType=v$X}else this._drawTextureM(v$V[0],v$V[1]-v$U,v$V[2]-v$x,v$V[3],v$V[4],0,0,v$D,1);this._x=this._y=0}},v$a.drawCanvas=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$n.context;if(this._renderKey=0,v$p._targets)this._submits[this._submits._length++]=v$Gn.create(v$p,0,null),this._curSubmit=v$pn.RENDERBASE,v$p._targets.drawTo(this,v$a,v$U,v$x,v$D);else{var v$Q=this._submits[this._submits._length++]=v$Gn.create(v$p,this._shader2D.ALPHA,this._shader2D.filters),v$V=v$x/v$n.width,v$y=v$D/v$n.height,v$R=v$Q._matrix;this._curMat.copyTo(v$R),1!=v$V&&1!=v$y&&v$R.scale(v$V,v$y);var v$X=v$R.tx,v$z=v$R.ty;v$R.tx=v$R.ty=0,v$R.transformPoint(v$$.TEMP.setTo(v$a,v$U)),v$R.translate(v$$.TEMP.x+v$X,v$$.TEMP.y+v$z),this._curSubmit=v$pn.RENDERBASE}v$k.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=v$p._targets?"yellow":"green",this.strokeRect(v$a-1,v$U-1,v$x+2,v$D+2,1),this.strokeRect(v$a,v$U,v$x,v$D,1),this.restore())},v$a.drawTarget=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){void 0===v$R&&(v$R=-1);var v$X=this._vb;if(v$bn.fillRectImgVb(v$X,this._clipRect,v$a,v$U,v$x,v$D,v$y||v$v.DEF_UV,v$p||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var v$z=this._curSubmit=v$zn.create(this,this._ib,v$X,(v$X._byteLength-64)/32*3,v$V,v$Q);v$z.blendType=-1==v$R?this._nBlendType:v$R,v$z.scope=v$n,this._submits[this._submits._length++]=v$z,this._curSubmit._numEle+=6}},v$a.mixRGBandAlpha=function(v$n){return this._mixRGBandAlpha(v$n,this._shader2D.ALPHA)},v$a._mixRGBandAlpha=function(v$n,v$a){var v$U=(4278190080&v$n)>>>24;return 0!=v$U?v$U*=v$a:v$U=255*v$a,16777215&v$n|v$U<<24},v$a.drawTriangles=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){if(!v$n.loaded||!v$n.source)return this.sprite&&v$W.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;v$n.bitmap;var v$X=this._mixRGBandAlpha(4294967295,v$V),v$z=(v$x.length,v$p.length);this._renderKey=-1;var v$i=this._curSubmit=v$In.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,v$Nn.create(1,0));return v$i.shaderValue.textureHost=v$n,v$i._renderType=10016,this._submits[this._submits._length++]=v$i,v$Q?(v$F._tmpMatrix.a=v$Q.a,v$F._tmpMatrix.b=v$Q.b,v$F._tmpMatrix.c=v$Q.c,v$F._tmpMatrix.d=v$Q.d,v$F._tmpMatrix.tx=v$Q.tx+v$a,v$F._tmpMatrix.ty=v$Q.ty+v$U,v$_.mul(v$F._tmpMatrix,this._curMat,v$F._tmpMatrix)):(v$F._tmpMatrix.a=this._curMat.a,v$F._tmpMatrix.b=this._curMat.b,v$F._tmpMatrix.c=this._curMat.c,v$F._tmpMatrix.d=this._curMat.d,v$F._tmpMatrix.tx=this._curMat.tx+v$a,v$F._tmpMatrix.ty=this._curMat.ty+v$U),this._triangleMesh.addData(v$x,v$D,v$p,v$F._tmpMatrix,v$X,this),this._curSubmit._numEle+=v$z,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},v$a.transform=function(v$n,v$a,v$U,v$x,v$D,v$p){v$C.save(this),v$_.mul(v$_.TEMP.setTo(v$n,v$a,v$U,v$x,v$D,v$p),this._curMat,this._curMat),this._curMat._checkTransform()},v$a.setTransformByMatrix=function(v$n){v$n.copyTo(this._curMat)},v$a.transformByMatrix=function(v$n){v$C.save(this),v$_.mul(v$n,this._curMat,this._curMat),this._curMat._checkTransform()},v$a.rotate=function(v$n){v$C.save(this),this._curMat.rotateEx(v$n)},v$a.scale=function(v$n,v$a){v$C.save(this),this._curMat.scaleEx(v$n,v$a)},v$a.clipRect=function(v$n,v$a,v$U,v$x){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var v$D=v$Xn.create(4);this.addRenderObject(v$D);var v$p=this._vb,v$Q=v$p._byteLength>>2;if(v$bn.fillRectImgVb(v$p,null,v$n,v$a,v$U,v$x,v$v.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var v$V=this._curSubmit=v$pn.createSubmit(this,this._ib,v$p,(v$p._byteLength-64)/32*3,v$Nn.create(2,0));v$V.shaderValue.ALPHA=1,this._submits[this._submits._length++]=v$V,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var v$y=v$Xn.create(5);this.addRenderObject(v$y);var v$R=v$p.getFloat32Array(),v$X=Math.min(Math.min(Math.min(v$R[0+v$Q],v$R[4+v$Q]),v$R[8+v$Q]),v$R[12+v$Q]),v$z=Math.max(Math.max(Math.max(v$R[0+v$Q],v$R[4+v$Q]),v$R[8+v$Q]),v$R[12+v$Q]),v$i=Math.min(Math.min(Math.min(v$R[1+v$Q],v$R[5+v$Q]),v$R[9+v$Q]),v$R[13+v$Q]),v$q=Math.max(Math.max(Math.max(v$R[1+v$Q],v$R[5+v$Q]),v$R[9+v$Q]),v$R[13+v$Q]);v$w.save(this,v$y,v$n,v$a,v$U,v$x,v$X,v$i,v$z-v$X,v$q-v$i),this._curSubmit=v$pn.RENDERBASE}else{v$U*=this._curMat.a,v$x*=this._curMat.d;var v$E=v$$.TEMP;this._curMat.transformPoint(v$E.setTo(v$n,v$a)),v$U<0&&(v$E.x=v$E.x+v$U,v$U=-v$U),v$x<0&&(v$E.y=v$E.y+v$x,v$x=-v$x),this._renderKey=0;var v$m=this._curSubmit=v$Rn.create(this);(this._submits[this._submits._length++]=v$m).submitIndex=this._submits._length,v$m.submitLength=9999999,v$S.save(this,v$m);var v$b=this._clipRect,v$P=v$b.x,v$A=v$b.y,v$T=v$E.x+v$U,v$K=v$E.y+v$x;v$P<v$E.x&&(v$b.x=v$E.x),v$A<v$E.y&&(v$b.y=v$E.y),v$b.width=Math.min(v$T,v$P+v$b.width)-v$b.x,v$b.height=Math.min(v$K,v$A+v$b.height)-v$b.y,this._shader2D.glTexture=null,v$m.clipRect.copyFrom(v$b),this._curSubmit=v$pn.RENDERBASE}},v$a.setIBVB=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X){if(void 0===v$y&&(v$y=0),void 0===v$R&&(v$R=0),void 0===v$X&&(v$X=0),null===v$U){if(v$P.isFlash){var v$z=v$x;v$z._selfIB||(v$z._selfIB=v$Jn.create(35044)),v$z._selfIB.clear(),v$U=v$z._selfIB}else v$U=this._ib;v$bn.expandIBQuadrangle(v$U,v$x._byteLength/(4*v$x.vertexStride*4))}if(!v$V||!v$Q)throw Error("setIBVB must input:shader shaderValues");var v$i=v$yn.create(this,v$x,v$U,v$D,v$Q,v$V,v$y,v$R,v$X);v$p||(v$p=v$_.EMPTY),v$p.translate(v$n,v$a),v$_.mul(v$p,this._curMat,v$i._mat),v$p.translate(-v$n,-v$a),this._submits[this._submits._length++]=v$i,this._curSubmit=v$pn.RENDERBASE,this._renderKey=0},v$a.addRenderObject=function(v$n){this._submits[this._submits._length++]=v$n},v$a.fillTrangles=function(v$n,v$a,v$U,v$x,v$D){var v$p=this._curSubmit,v$Q=this._vb,v$V=this._shader2D,v$y=v$p.shaderValue,v$R=v$x.length>>4,v$X=v$n.bitmap;this._renderKey=0,v$V.glTexture==v$X&&v$V.ALPHA===v$y.ALPHA||((v$p=this._curSubmit=v$pn.createSubmit(this,this._ib,v$Q,v$Q._byteLength/32*3,v$Nn.create(1,0))).shaderValue.textureHost=v$n,this._submits[this._submits._length++]=v$p),v$bn.fillTranglesVB(v$Q,v$a,v$U,v$x,v$D||this._curMat,this._x,this._y),v$p._numEle+=6*v$R},v$a.submitElement=function(v$n,v$a){var v$U=this._submits;for(v$a<0&&(v$a=v$U._length);v$n<v$a;)v$n+=v$U[v$n].renderSubmit()},v$a.finish=function(){v$Kn.mainContext.finish()},v$a.flush=function(){var v$n=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(v$n>this._ib.bufferLength/12&&v$bn.expandIBQuadrangle(this._ib,v$n),!this._isMain&&v$g.enabled&&v$g._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=v$g._atlasRestore;for(var v$a=this._submits,v$U=0,v$x=v$a._length;v$U<v$x;v$U++){var v$D=v$a[v$U];10016===v$D.getRenderType()&&v$D.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),v$an.instance&&v$an.getInstance().reset();var v$p;for(v$U=0,v$p=this.meshlist.length;v$U<v$p;v$U++){var v$Q=this.meshlist[v$U];v$Q.canReuse?v$Q.releaseMesh():v$Q.destroy()}return this.meshlist.length=0,this._curSubmit=v$pn.RENDERBASE,this._renderKey=0,this._triangleMesh=v$vn.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},v$a.setPathId=function(v$n){if(this.mId=v$n,-1!=this.mId){this.mHaveKey=!1;var v$a=v$j.getInstance();v$a.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,v$a.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},v$a.movePath=function(v$n,v$a){var v$U=v$n,v$x=v$a;v$n=this._curMat.a*v$U+this._curMat.c*v$x+this._curMat.tx,v$a=this._curMat.b*v$U+this._curMat.d*v$x+this._curMat.ty,this.mX+=v$n,this.mY+=v$a},v$a.beginPath=function(){var v$n=this._getPath();v$n.tempArray.length=0,v$n.closePath=!1,this.mX=0,this.mY=0},v$a.closePath=function(){this._path.closePath=!0},v$a.fill=function(v$n){void 0===v$n&&(v$n=!1);var v$a=this._getPath();this.drawPoly(0,0,v$a.tempArray,this.fillStyle._color.numColor,0,0,v$n)},v$a.stroke=function(){var v$n=this._getPath();if(0<this.lineWidth){if(-1==this.mId)v$n.drawLine(0,0,v$n.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var v$a=v$j.getInstance().shapeLineDic[this.mId];v$a.rebuild(v$n.tempArray),v$n.setGeomtry(v$a)}else v$j.getInstance().addLine(this.mId,v$n.drawLine(0,0,v$n.tempArray,this.lineWidth,this.strokeStyle._color.numColor));v$n.update();var v$U=[this.mX,this.mY],v$x=v$pn.createShape(this,v$n.ib,v$n.vb,v$n.count,v$n.offset,v$Nn.create(4,0));v$x.shaderValue.ALPHA=this._shader2D.ALPHA,v$x.shaderValue.u_pos=v$U,v$x.shaderValue.u_mmat2=v$An.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=v$x,this._renderKey=-1}},v$a.line=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=this._curSubmit,v$V=this._vb;if(v$bn.fillLineVb(v$V,this._clipRect,v$n,v$a,v$U,v$x,v$D,v$p)){this._renderKey=0;var v$y=this._shader2D,v$R=v$Q.shaderValue;v$y.strokeStyle===v$R.strokeStyle&&v$y.ALPHA===v$R.ALPHA||(v$y.glTexture=null,(v$Q=this._curSubmit=v$pn.createSubmit(this,this._ib,v$V,(v$V._byteLength-64)/32*3,v$Nn.create(2,0))).shaderValue.strokeStyle=v$y.strokeStyle,v$Q.shaderValue.mainID=2,v$Q.shaderValue.ALPHA=v$y.ALPHA,this._submits[this._submits._length++]=v$Q),v$Q._numEle+=6}},v$a.moveTo=function(v$n,v$a,v$U){void 0===v$U&&(v$U=!0);var v$x=this._getPath();if(v$U){var v$D=v$n,v$p=v$a;v$n=this._curMat.a*v$D+this._curMat.c*v$p,v$a=this._curMat.b*v$D+this._curMat.d*v$p}v$x.addPoint(v$n,v$a)},v$a.lineTo=function(v$n,v$a,v$U){void 0===v$U&&(v$U=!0);var v$x=this._getPath();if(v$U){var v$D=v$n,v$p=v$a;v$n=this._curMat.a*v$D+this._curMat.c*v$p,v$a=this._curMat.b*v$D+this._curMat.d*v$p}v$x.addPoint(v$n,v$a)},v$a.drawCurves=function(v$n,v$a,v$U){this.setPathId(-1),this.beginPath(),this.strokeStyle=v$U[3],this.lineWidth=v$U[4];var v$x=v$U[2];v$n+=v$U[0],v$a+=v$U[1],this.movePath(v$n,v$a),this.moveTo(v$x[0],v$x[1]);for(var v$D=2,v$p=v$x.length;v$D<v$p;)this.quadraticCurveTo(v$x[v$D++],v$x[v$D++],v$x[v$D++],v$x[v$D++]);this.stroke()},v$a.arcTo=function(v$n,v$a,v$U,v$x,v$D){if(-1==this.mId||!this.mHaveKey){var v$p=0,v$Q=0,v$V=0,v$y=this._getPath();this._curMat.copyTo(v$F._tmpMatrix),v$F._tmpMatrix.tx=v$F._tmpMatrix.ty=0,v$F._tempPoint.setTo(v$y.getEndPointX(),v$y.getEndPointY()),v$F._tmpMatrix.invertTransformPoint(v$F._tempPoint);var v$R=v$F._tempPoint.x-v$n,v$X=v$F._tempPoint.y-v$a,v$z=Math.sqrt(v$R*v$R+v$X*v$X);if(!(v$z<=1e-6)){var v$i=v$R/v$z,v$q=v$X/v$z,v$E=v$U-v$n,v$m=v$x-v$a,v$b=v$E*v$E+v$m*v$m,v$P=Math.sqrt(v$b);if(!(v$P<=1e-6)){var v$A=v$E/v$P,v$T=v$m/v$P,v$K=v$i+v$A,v$Y=v$q+v$T,v$W=Math.sqrt(v$K*v$K+v$Y*v$Y);if(!(v$W<=1e-6)){var v$k=v$K/v$W,v$N=v$Y/v$W,v$_=Math.acos(v$k*v$i+v$N*v$q),v$$=Math.PI/2-v$_,v$M=(v$z=v$D/Math.tan(v$$))*v$i+v$n,v$Z=v$z*v$q+v$a,v$u=Math.sqrt(v$z*v$z+v$D*v$D),v$c=v$n+v$k*v$u,v$H=v$a+v$N*v$u,v$G=0,v$I=0;if(0<=v$i*v$T-v$q*v$A){var v$v=2*v$$/v$F.SEGNUM;v$G=Math.sin(v$v),v$I=Math.cos(v$v)}else v$v=2*-v$$/v$F.SEGNUM,v$G=Math.sin(v$v),v$I=Math.cos(v$v);v$Q=this._curMat.a*v$M+this._curMat.c*v$Z,v$V=this._curMat.b*v$M+this._curMat.d*v$Z,v$Q==this._path.getEndPointX()&&v$V==this._path.getEndPointY()||v$y.addPoint(v$Q,v$V);var v$l=v$M-v$c,v$j=v$Z-v$H;for(v$p=0;v$p<v$F.SEGNUM;v$p++){var v$h=v$l*v$I+v$j*v$G,v$f=-v$l*v$G+v$j*v$I;v$Q=v$h+v$c,v$V=v$f+v$H,v$n=this._curMat.a*v$Q+this._curMat.c*v$V,v$V=v$a=this._curMat.b*v$Q+this._curMat.d*v$V,(v$Q=v$n)==this._path.getEndPointX()&&v$V==this._path.getEndPointY()||v$y.addPoint(v$Q,v$V),v$l=v$h,v$j=v$f}}}}}},v$a.arc=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){if(void 0===v$p&&(v$p=!1),void 0===v$Q&&(v$Q=!0),-1!=this.mId){var v$V=v$j.getInstance().shapeDic[this.mId];if(v$V&&this.mHaveKey&&!v$V.needUpdate(this._curMat))return;v$a=v$n=0}var v$y,v$R=0,v$X=0,v$z=0,v$i=0,v$q=0,v$E=0,v$m=0;if(v$X=v$D-v$x,v$p)if(Math.abs(v$X)>=2*Math.PI)v$X=2*-Math.PI;else for(;0<v$X;)v$X-=2*Math.PI;else if(Math.abs(v$X)>=2*Math.PI)v$X=2*Math.PI;else for(;v$X<0;)v$X+=2*Math.PI;v$y=v$X/(v$m=v$U<101?Math.max(10,v$X*v$U/5):v$U<201?Math.max(10,v$X*v$U/20):Math.max(10,v$X*v$U/40))/2,v$z=Math.abs(4/3*(1-Math.cos(v$y))/Math.sin(v$y)),v$p&&(v$z=-v$z);var v$b=this._getPath(),v$P=NaN,v$A=NaN;for(v$E=0;v$E<=v$m;v$E++)v$R=v$x+v$X*(v$E/v$m),v$i=v$n+Math.cos(v$R)*v$U,v$q=v$a+Math.sin(v$R)*v$U,v$Q&&(v$P=v$i,v$A=v$q,v$i=this._curMat.a*v$P+this._curMat.c*v$A,v$q=this._curMat.b*v$P+this._curMat.d*v$A),v$i==this._path.getEndPointX()&&v$q==this._path.getEndPointY()||v$b.addPoint(v$i,v$q);v$i=v$n+Math.cos(v$D)*v$U,v$q=v$a+Math.sin(v$D)*v$U,v$Q&&(v$P=v$i,v$A=v$q,v$i=this._curMat.a*v$P+this._curMat.c*v$A,v$q=this._curMat.b*v$P+this._curMat.d*v$A),v$i==this._path.getEndPointX()&&v$q==this._path.getEndPointY()||v$b.addPoint(v$i,v$q)},v$a.quadraticCurveTo=function(v$n,v$a,v$U,v$x){var v$D=v$z.I,v$p=v$U,v$Q=v$x;v$U=this._curMat.a*v$p+this._curMat.c*v$Q,v$x=this._curMat.b*v$p+this._curMat.d*v$Q,v$p=v$n,v$Q=v$a,v$n=this._curMat.a*v$p+this._curMat.c*v$Q,v$a=this._curMat.b*v$p+this._curMat.d*v$Q;for(var v$V=v$D.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),v$n,v$a,v$U,v$x],30,2),v$y=0,v$R=v$V.length/2;v$y<v$R;v$y++)this.lineTo(v$V[2*v$y],v$V[2*v$y+1],!1);this.lineTo(v$U,v$x,!1)},v$a.rect=function(v$n,v$a,v$U,v$x){this._other=this._other.make(),this._other.path||(this._other.path=new v$L),this._other.path.rect(v$n,v$a,v$U,v$x)},v$a.strokeRect=function(v$n,v$a,v$U,v$x,v$D){var v$p=.5*v$D;this.line(v$n-v$p,v$a,v$n+v$U+v$p,v$a,v$D,this._curMat),this.line(v$n+v$U,v$a,v$n+v$U,v$a+v$x,v$D,this._curMat),this.line(v$n,v$a,v$n,v$a+v$x,v$D,this._curMat),this.line(v$n-v$p,v$a+v$x,v$n+v$U+v$p,v$a+v$x,v$D,this._curMat)},v$a.clip=function(){},v$a.drawPoly=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){void 0===v$Q&&(v$Q=!1),this._renderKey=0,this._shader2D.glTexture=null;var v$V=this._getPath();if(-1==this.mId)v$V.polygon(v$n,v$a,v$U,v$x,v$D||1,v$p);else if(this.mHaveKey){var v$y=v$j.getInstance().shapeDic[this.mId];v$y.setMatrix(this._curMat),v$y.rebuild(v$V.tempArray),v$V.setGeomtry(v$y)}else{var v$R=v$V.polygon(v$n,v$a,v$U,v$x,v$D||1,v$p);v$j.getInstance().addShape(this.mId,v$R),v$R.setMatrix(this._curMat)}v$V.update();var v$X,v$z=[this.mX,this.mY];if((v$X=v$pn.createShape(this,v$V.ib,v$V.vb,v$V.count,v$V.offset,v$Nn.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,v$X.shaderValue.u_pos=v$z,v$X.shaderValue.u_mmat2=v$An.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=v$X,0<v$D){if(this.mHaveLineKey){var v$i=v$j.getInstance().shapeLineDic[this.mId];v$i.rebuild(v$V.tempArray),v$V.setGeomtry(v$i)}else v$j.getInstance().addShape(this.mId,v$V.drawLine(v$n,v$a,v$U,v$D,v$p));v$V.update(),(v$X=v$pn.createShape(this,v$V.ib,v$V.vb,v$V.count,v$V.offset,v$Nn.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,v$X.shaderValue.u_mmat2=v$An.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=v$X}},v$a.drawParticle=function(v$n,v$a,v$U){v$U.x=v$n,v$U.y=v$a,this._submits[this._submits._length++]=v$U},v$a._getPath=function(){return this._path||(this._path=new v$L)},v$x(0,v$a,"globalCompositeOperation",function(){return v$B.NAMES[this._nBlendType]},function(v$n){var v$a=v$B.TOINT[v$n];null==v$a||this._nBlendType===v$a||(v$d.save(this,65536,this,!0),this._curSubmit=v$pn.RENDERBASE,this._renderKey=0,this._nBlendType=v$a)}),v$x(0,v$a,"strokeStyle",function(){return this._shader2D.strokeStyle},function(v$n){this._shader2D.strokeStyle.equal(v$n)||(v$d.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=v$O.create(v$n))}),v$x(0,v$a,"globalAlpha",function(){return this._shader2D.ALPHA},function(v$n){(v$n=Math.floor(1e3*v$n)/1e3)!=this._shader2D.ALPHA&&(v$d.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=v$n)}),v$x(0,v$a,"asBitmap",null,function(v$n){if(v$n){if(this._targets||(this._targets=new v$r),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),v$x(0,v$a,"fillStyle",function(){return this._shader2D.fillStyle},function(v$n){this._shader2D.fillStyle.equal(v$n)||(v$d.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=v$O.create(v$n))}),v$x(0,v$a,"textAlign",function(){return this._other.textAlign},function(v$n){this._other.textAlign===v$n||(this._other=this._other.make(),v$d.save(this,32768,this._other,!1),this._other.textAlign=v$n)}),v$x(0,v$a,"lineWidth",function(){return this._other.lineWidth},function(v$n){this._other.lineWidth===v$n||(this._other=this._other.make(),v$d.save(this,256,this._other,!1),this._other.lineWidth=v$n)}),v$x(0,v$a,"textBaseline",function(){return this._other.textBaseline},function(v$n){this._other.textBaseline===v$n||(this._other=this._other.make(),v$d.save(this,16384,this._other,!1),this._other.textBaseline=v$n)}),v$x(0,v$a,"font",null,function(v$n){v$n!=this._other.font.toString()&&(this._other=this._other.make(),v$d.save(this,8,this._other,!1),this._other.font===v$En.EMPTY?this._other.font=new v$En(v$n):this._other.font.setFont(v$n))}),v$F.__init__=function(){v$U.DEFAULT=new v$U},v$F._tempPoint=new v$$,v$F._SUBMITVBSIZE=32e3,v$F._MAXSIZE=99999999,v$F._RECTVBSIZE=16,v$F.MAXCLIPRECT=new v$M(0,0,99999999,99999999),v$F._COUNT=0,v$F._tmpMatrix=new v$_,v$F.SEGNUM=32,v$F._contextcount=0,v$Q(v$F,["_fontTemp",function(){return this._fontTemp=new v$En},"_drawStyleTemp",function(){return this._drawStyleTemp=new v$O(null)}]),v$F.__init$=function(){v$U=function(){function v$n(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=v$En.EMPTY}v$i(v$n,"");var v$a=v$n.prototype;return v$a.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=v$En.EMPTY},v$a.make=function(){return this===v$n.DEFAULT?new v$n:this},v$n.DEFAULT=null,v$n}()},v$F}(),v$Nn=function(v$n){function v$x(v$n,v$a){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,v$x.__super.call(this),this.defines=new v$Zn,this.position=v$x._POSITION,this.mainID=v$n,this.subID=v$a,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=v$n|v$a,this._inClassCache=v$x._cache[this._cacheID],0<v$n&&!this._inClassCache&&(this._inClassCache=v$x._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}v$i(v$x,"laya.webgl.shader.d2.value.Value2D",v$f);var v$a=v$x.prototype;return v$a.setValue=function(v$n){},v$a.refresh=function(){var v$n=this.size;return v$n[0]=v$An.width,v$n[1]=v$An.height,this.alpha=this.ALPHA*v$An.worldAlpha,this.mmat=v$An.worldMatrix4,this},v$a._ShaderWithCompile=function(){return v$sn.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,v$rn.create)},v$a._withWorldShaderDefines=function(){var v$n=v$An.worldShaderDefines,v$a=v$sn.sharders[this.mainID|this.defines._value|v$n.getValue()];if(!v$a){var v$U,v$x={};for(v$U in this.defines.toNameDic())v$x[v$U]="";for(v$U in v$n.toNameDic())v$x[v$U]="";v$a=v$sn.withCompile2D(0,this.mainID,v$x,this.mainID|this.defines._value|v$n.getValue(),v$rn.create)}var v$D=v$An.worldFilters;if(!v$D)return v$a;for(var v$p,v$Q=v$D.length,v$V=0;v$V<v$Q;v$V++)(v$p=v$D[v$V])&&v$p.action.setValue(this);return v$a},v$a.upload=function(){var v$n=v$An;this.alpha=this.ALPHA*v$n.worldAlpha,v$An.worldMatrix4!==v$An.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),v$Kn.shaderHighPrecision&&this.defines.add(1024);var v$a,v$U=v$n.worldShaderDefines?this._withWorldShaderDefines():v$sn.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=v$n.width,this.size[1]=v$n.height,this.mmat=v$n.worldMatrix4,v$ln.activeShader!==v$U?v$U._shaderValueWidth!==v$n.width||v$U._shaderValueHeight!==v$n.height?(v$U._shaderValueWidth=v$n.width,v$U._shaderValueHeight=v$n.height):v$a=v$U._params2dQuick2||v$U._make2dQuick2():v$U._shaderValueWidth!==v$n.width||v$U._shaderValueHeight!==v$n.height?(v$U._shaderValueWidth=v$n.width,v$U._shaderValueHeight=v$n.height):v$a=v$U._params2dQuick1||v$U._make2dQuick1(),v$U.upload(this,v$a)},v$a.setFilters=function(v$n){if(this.filters=v$n)for(var v$a,v$U=v$n.length,v$x=0;v$x<v$U;v$x++)(v$a=v$n[v$x])&&(this.defines.add(v$a.type),v$a.action.setValue(this))},v$a.clear=function(){this.defines.setValue(this.subID)},v$a.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},v$x._initone=function(v$n,v$a){v$x._typeClass[v$n]=v$a,v$x._cache[v$n]=[],v$x._cache[v$n]._length=0},v$x.__init__=function(){v$x._POSITION=[2,5126,!1,4*v$mn.BYTES_PE,0],v$x._TEXCOORD=[2,5126,!1,4*v$mn.BYTES_PE,2*v$mn.BYTES_PE],v$x._initone(2,v$Fn),v$x._initone(4,v$Bn),v$x._initone(256,v$gn),v$x._initone(512,v$fn),v$x._initone(1,v$on),v$x._initone(65,v$tn),v$x._initone(9,v$on)},v$x.create=function(v$n,v$a){var v$U=v$x._cache[v$n|v$a];return v$U._length?v$U[--v$U._length]:new v$x._typeClass[v$n|v$a](v$a)},v$x._POSITION=null,v$x._TEXCOORD=null,v$x._cache=[],v$x._typeClass=[],v$x.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],v$x}(),v$_n=function(v$n){function v$b(v$n,v$a){v$b.__super.call(this,v$n,v$a)}v$i(v$b,"laya.webgl.utils.RenderSprite3D",v$A);var v$a=v$b.prototype;return v$a.onCreate=function(v$n){switch(v$n){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},v$a._mask=function(v$n,v$a,v$U,v$x){var v$D,v$p,v$Q=this._next,v$V=v$n.mask;if(v$V){v$a.ctx.save();var v$y=v$a.ctx.globalCompositeOperation,v$R=new v$M;if(v$R.copyFrom(v$V.getBounds()),v$R.width=Math.round(v$R.width),v$R.height=Math.round(v$R.height),v$R.x=Math.round(v$R.x),v$R.y=Math.round(v$R.y),0<v$R.width&&0<v$R.height){var v$X=v$n._style._tf,v$z=v$Vn.create();v$z.addValue("bounds",v$R),v$D=v$Qn.create([v$z,v$a],laya.webgl.utils.RenderSprite3D.tmpTarget),v$a.addRenderObject(v$D),v$V.render(v$a,-v$R.x,-v$R.y),v$D=v$Qn.create([v$z],laya.webgl.utils.RenderSprite3D.endTmpTarget),v$a.addRenderObject(v$D),v$a.ctx.save(),v$a.clipRect(v$U-v$X.translateX+v$R.x,v$x-v$X.translateY+v$R.y,v$R.width,v$R.height),v$Q._fun.call(v$Q,v$n,v$a,v$U,v$x),v$a.ctx.restore(),v$p=v$Xn.create(6),v$y=v$a.ctx.globalCompositeOperation,v$p.blendMode="mask",v$a.addRenderObject(v$p),v$_.TEMP.identity();var v$i=v$Nn.create(1,0),v$q=v$v.INV_UV,v$E=v$R.width,v$m=v$R.height;(v$R.width<32||v$R.height<32)&&((v$q=v$b.tempUV)[0]=0,v$q[1]=0,v$q[2]=32<=v$R.width?1:v$R.width/32,v$q[3]=0,v$q[4]=32<=v$R.width?1:v$R.width/32,v$q[5]=32<=v$R.height?1:v$R.height/32,v$q[6]=0,v$q[7]=32<=v$R.height?1:v$R.height/32,v$R.width=32<=v$R.width?v$R.width:32,v$R.height=32<=v$R.height?v$R.height:32,v$q[1]*=-1,v$q[3]*=-1,v$q[5]*=-1,v$q[7]*=-1,v$q[1]+=1,v$q[3]+=1,v$q[5]+=1,v$q[7]+=1),v$a.ctx.drawTarget(v$z,v$U+v$R.x-v$X.translateX,v$x+v$R.y-v$X.translateY,v$E,v$m,v$_.TEMP,"tmpTarget",v$i,v$q,6),v$D=v$Qn.create([v$z],laya.webgl.utils.RenderSprite3D.recycleTarget),v$a.addRenderObject(v$D),(v$p=v$Xn.create(6)).blendMode=v$y,v$a.addRenderObject(v$p)}v$a.ctx.restore()}else v$Q._fun.call(v$Q,v$n,v$a,v$U,v$x)},v$a._blend=function(v$n,v$a,v$U,v$x){var v$D=v$n._style,v$p=this._next;v$D.blendMode?(v$a.ctx.save(),v$a.ctx.globalCompositeOperation=v$D.blendMode,v$p._fun.call(v$p,v$n,v$a,v$U,v$x),v$a.ctx.restore()):v$p._fun.call(v$p,v$n,v$a,v$U,v$x)},v$a._transform=function(v$n,v$a,v$U,v$x){var v$D=v$n.transform,v$p=this._next;if(v$D&&v$p!=v$A.NORENDER){var v$Q=v$a.ctx;v$n._style;v$D.tx=v$U,v$D.ty=v$x;var v$V=v$Q._getTransformMatrix(),v$y=v$V.clone();v$_.mul(v$D,v$V,v$V),v$V._checkTransform(),v$D.tx=v$D.ty=0,v$p._fun.call(v$p,v$n,v$a,0,0),v$y.copyTo(v$V),v$y.destroy()}else v$p._fun.call(v$p,v$n,v$a,v$U,v$x)},v$b.tmpTarget=function(v$n,v$a){var v$U=v$n.getValue("bounds"),v$x=v$jn.create(v$U.width,v$U.height);v$x.start(),v$x.clear(0,0,0,0),v$n.addValue("tmpTarget",v$x)},v$b.endTmpTarget=function(v$n){v$n.getValue("tmpTarget").end()},v$b.recycleTarget=function(v$n){v$n.getValue("tmpTarget").recycle(),v$n.recycle()},v$Q(v$b,["tempUV",function(){return this.tempUV=new Array(8)}]),v$b}(),v$$n=function(v$n){function v$a(){this.data=null,v$a.__super.call(this)}v$i(v$a,"laya.filters.webgl.ColorFilterActionGL",v$h);var v$U=v$a.prototype;return v$W.imps(v$U,{"laya.filters.IFilterActionGL":!0}),v$U.setValue=function(v$n){v$n.colorMat=this.data._mat,v$n.colorAlpha=this.data._alpha},v$U.apply3d=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$n.getValue("bounds"),v$Q=v$Nn.create(1,0);v$Q.setFilters([this.data]);var v$V=v$_.TEMP;v$V.identity(),v$U.ctx.drawTarget(v$n,0,0,v$p.width,v$p.height,v$V,"src",v$Q)},v$a}(),v$Mn=function(v$n){function v$p(v$n,v$a,v$U,v$x,v$D){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,v$p.__super.call(this,v$n,v$a,v$D),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new v$On,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=v$U,this._atlasCanvas.height=v$x,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}v$i(v$p,"laya.webgl.atlas.Atlaser",v$F);var v$a=v$p.prototype;return v$a.computeUVinAtlasTexture=function(v$n,v$a,v$U,v$x){var v$D=v$g.atlasTextureWidth,v$p=v$g.atlasTextureHeight,v$Q=v$U/v$D,v$V=v$x/v$p,v$y=(v$U+v$n.bitmap.width)/v$D,v$R=(v$x+v$n.bitmap.height)/v$p,v$X=v$n.bitmap.width/v$D,v$z=v$n.bitmap.height/v$p;v$n.uv=[v$Q+v$a[0]*v$X,v$V+v$a[1]*v$z,v$y-(1-v$a[2])*v$X,v$V+v$a[3]*v$z,v$y-(1-v$a[4])*v$X,v$R-(1-v$a[5])*v$z,v$Q+v$a[6]*v$X,v$R-(1-v$a[7])*v$z]},v$a.findBitmapIsExist=function(v$n){if(v$n instanceof laya.webgl.resource.WebGLImage){var v$a=v$n,v$U=v$a.url,v$x=this._InAtlasWebGLImagesKey[v$U||v$a.id];if(v$x)return v$x.offsetInfoID}return-1},v$a.addToAtlasTexture=function(v$n,v$a,v$U){if(v$n instanceof laya.webgl.resource.WebGLImage){var v$x=v$n,v$D=v$x.url;this._InAtlasWebGLImagesKey[v$D||v$x.id]={bitmap:v$n,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([v$a,v$U])}this._atlasCanvas.texSubImage2D(v$a,v$U,v$n.atlasSource),v$n.clearAtlasSource()},v$a.addToAtlas=function(v$n,v$a,v$U){v$n._atlasID=this._inAtlasTextureKey.length;var v$x=v$n.uv.slice(),v$D=v$n.bitmap;this._inAtlasTextureKey.push(v$n),this._inAtlasTextureOriUVValue.push(v$x),this._inAtlasTextureBitmapValue.push(v$D),this.computeUVinAtlasTexture(v$n,v$x,v$a,v$U),v$n.bitmap=this._atlasCanvas},v$a.clear=function(){for(var v$n=0,v$a=this._inAtlasTextureKey.length;v$n<v$a;v$n++)this._inAtlasTextureKey[v$n].bitmap=this._inAtlasTextureBitmapValue[v$n],this._inAtlasTextureKey[v$n].uv=this._inAtlasTextureOriUVValue[v$n],this._inAtlasTextureKey[v$n]._atlasID=-1,this._inAtlasTextureKey[v$n].bitmap.lock=!1,this._inAtlasTextureKey[v$n].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},v$a.dispose=function(){this.clear(),this._atlasCanvas.destroy()},v$x(0,v$a,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),v$x(0,v$a,"texture",function(){return this._atlasCanvas}),v$x(0,v$a,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),v$p}(),v$Zn=function(v$n){function v$U(){v$U.__super.call(this,v$U.__name2int,v$U.__int2name,v$U.__int2nameMap)}return v$i(v$U,"laya.webgl.shader.d2.ShaderDefines2D",v$e),v$U.__init__=function(){v$U.reg("TEXTURE2D",1),v$U.reg("COLOR2D",2),v$U.reg("PRIMITIVE",4),v$U.reg("GLOW_FILTER",8),v$U.reg("BLUR_FILTER",16),v$U.reg("COLOR_FILTER",32),v$U.reg("COLOR_ADD",64),v$U.reg("WORLDMAT",128),v$U.reg("FILLTEXTURE",256),v$U.reg("FSHIGHPRECISION",1024),v$U.reg("TXTALPHA",2048),v$U.reg("TXTCOMPRESS",4096)},v$U.reg=function(v$n,v$a){v$e._reg(v$n,v$a,v$U.__name2int,v$U.__int2name)},v$U.toText=function(v$n,v$a,v$U){return v$e._toText(v$n,v$a,v$U)},v$U.toInt=function(v$n){return v$e._toInt(v$n,v$U.__name2int)},v$U.TEXTURE2D=1,v$U.COLOR2D=2,v$U.PRIMITIVE=4,v$U.FILTERGLOW=8,v$U.FILTERBLUR=16,v$U.FILTERCOLOR=32,v$U.COLORADD=64,v$U.WORLDMAT=128,v$U.FILLTEXTURE=256,v$U.SKINMESH=512,v$U.SHADERDEFINE_FSHIGHPRECISION=1024,v$U.TXTALPHA=2048,v$U.TXTCOMPRESS=4096,v$U.__name2int={},v$U.__int2name=[],v$U.__int2nameMap=[],v$U}(),v$un=(function(v$n){function v$V(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){v$V.__super.call(this,v$n,v$a,v$U,v$x,40,v$D,v$p,v$Q)}v$i(v$V,"laya.webgl.shapes.Ellipse",v$Un)}(),function(v$n){function v$p(v$n,v$a,v$U,v$x,v$D){this._points=[],this.rebuild(v$U),v$p.__super.call(this,v$n,v$a,0,0,0,v$D,v$x,v$D,0)}v$i(v$p,"laya.webgl.shapes.Line",v$Un);var v$a=v$p.prototype;return v$a.rebuild=function(v$n){var v$a=v$n.length;v$a!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(v$a/2-1)),this.mFloat32Array=new Float32Array(5*v$a)),this._points.length=0;for(var v$U=NaN,v$x=NaN,v$D=-1,v$p=-1,v$Q=v$n.length/2,v$V=0;v$V<v$Q;v$V++)v$U=v$n[2*v$V],v$x=v$n[2*v$V+1],(.01<Math.abs(v$D-v$U)||.01<Math.abs(v$p-v$x))&&this._points.push(v$U,v$x),v$D=v$U,v$p=v$x},v$a.getData=function(v$n,v$a,v$U){var v$x=[],v$D=[];0<this.borderWidth&&this.createLine2(this._points,v$x,this.borderWidth,v$U,v$D,this._points.length/2),this.mUint16Array.set(v$x,0),this.mFloat32Array.set(v$D,0),v$n.append(this.mUint16Array),v$a.append(this.mFloat32Array)},v$p}()),v$cn=function(v$n){function v$z(v$n,v$a,v$U,v$x,v$D){this._points=[];for(var v$p=NaN,v$Q=NaN,v$V=-1,v$y=-1,v$R=v$U.length/2-1,v$X=0;v$X<v$R;v$X++)v$p=v$U[2*v$X],v$Q=v$U[2*v$X+1],(.01<Math.abs(v$V-v$p)||.01<Math.abs(v$y-v$Q))&&this._points.push(v$p,v$Q),v$V=v$p,v$y=v$Q;v$p=v$U[2*v$R],v$Q=v$U[2*v$R+1],v$V=this._points[0],v$y=this._points[1],(.01<Math.abs(v$V-v$p)||.01<Math.abs(v$y-v$Q))&&this._points.push(v$p,v$Q),v$z.__super.call(this,v$n,v$a,0,0,this._points.length/2,0,v$x,v$D)}v$i(v$z,"laya.webgl.shapes.LoopLine",v$Un);var v$a=v$z.prototype;return v$a.getData=function(v$n,v$a,v$U){if(0<this.borderWidth){for(var v$x=this.color,v$D=(v$x>>16&255)/255,v$p=(v$x>>8&255)/255,v$Q=(255&v$x)/255,v$V=[],v$y=0,v$R=0,v$X=[],v$z=Math.floor(this._points.length/2),v$i=0;v$i<v$z;v$i++)v$y=this._points[2*v$i],v$R=this._points[2*v$i+1],v$V.push(this.x+v$y,this.y+v$R,v$D,v$p,v$Q);this.createLoopLine(v$V,v$X,this.borderWidth,v$U+v$V.length/5),v$n.append(new Uint16Array(v$X)),v$a.append(new Float32Array(v$V))}},v$a.createLoopLine=function(v$n,v$a,v$U,v$x,v$D,v$p){v$n.length;var v$Q=v$n.concat(),v$V=v$D||v$n,v$y=this.borderColor,v$R=(v$y>>16&255)/255,v$X=(v$y>>8&255)/255,v$z=(255&v$y)/255,v$i=[v$Q[0],v$Q[1]],v$q=[v$Q[v$Q.length-5],v$Q[v$Q.length-4]],v$E=v$q[0]+.5*(v$i[0]-v$q[0]),v$m=v$q[1]+.5*(v$i[1]-v$q[1]);v$Q.unshift(v$E,v$m,0,0,0),v$Q.push(v$E,v$m,0,0,0);var v$b,v$P,v$A,v$T,v$K,v$Y,v$W,v$k,v$N,v$_,v$$,v$M,v$Z,v$u,v$c,v$H,v$G,v$I,v$v,v$l,v$j=v$Q.length/5,v$h=v$x,v$f=v$U/2;v$A=v$Q[0],v$T=v$Q[1],v$_=v$A-(v$K=v$Q[5]),v$N=(v$N=-(v$T-(v$Y=v$Q[6])))/(v$l=Math.sqrt(v$N*v$N+v$_*v$_))*v$f,v$_=v$_/v$l*v$f,v$V.push(v$A-v$N,v$T-v$_,v$R,v$X,v$z,v$A+v$N,v$T+v$_,v$R,v$X,v$z);for(var v$F=1;v$F<v$j-1;v$F++)v$A=v$Q[5*(v$F-1)],v$T=v$Q[5*(v$F-1)+1],v$K=v$Q[5*v$F],v$Y=v$Q[5*v$F+1],v$W=v$Q[5*(v$F+1)],v$k=v$Q[5*(v$F+1)+1],v$_=v$A-v$K,v$M=v$K-v$W,v$c=(-(v$N=(v$N=-(v$T-v$Y))/(v$l=Math.sqrt(v$N*v$N+v$_*v$_))*v$f)+v$A)*(-(v$_=v$_/v$l*v$f)+v$Y)-(-v$N+v$K)*(-v$_+v$T),v$I=(-(v$$=(v$$=-(v$Y-v$k))/(v$l=Math.sqrt(v$$*v$$+v$M*v$M))*v$f)+v$W)*(-(v$M=v$M/v$l*v$f)+v$Y)-(-v$$+v$K)*(-v$M+v$k),v$v=(v$Z=-v$_+v$T-(-v$_+v$Y))*(v$G=-v$$+v$K-(-v$$+v$W))-(v$H=-v$M+v$k-(-v$M+v$Y))*(v$u=-v$N+v$K-(-v$N+v$A)),Math.abs(v$v)<.1?(v$v+=10.1,v$V.push(v$K-v$N,v$Y-v$_,v$R,v$X,v$z,v$K+v$N,v$Y+v$_,v$R,v$X,v$z)):(((v$b=(v$u*v$I-v$G*v$c)/v$v)-v$K)*(v$b-v$K)+((v$P=(v$H*v$c-v$Z*v$I)/v$v)-v$Y)+(v$P-v$Y),v$V.push(v$b,v$P,v$R,v$X,v$z,v$K-(v$b-v$K),v$Y-(v$P-v$Y),v$R,v$X,v$z));v$p&&(v$a=v$p);var v$g=this.edges+1;for(v$F=1;v$F<v$g;v$F++)v$a.push(v$h+2*(v$F-1),v$h+2*(v$F-1)+1,v$h+2*v$F+1,v$h+2*v$F+1,v$h+2*v$F,v$h+2*(v$F-1));return v$a.push(v$h+2*(v$F-1),v$h+2*(v$F-1)+1,v$h+1,v$h+1,v$h,v$h+2*(v$F-1)),v$V},v$z}(),v$Hn=function(v$n){function v$Q(v$n,v$a,v$U,v$x,v$D,v$p){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=v$_.create(),this._points=v$U.slice(0,v$U.length),v$Q.__super.call(this,v$n,v$a,0,0,this._points.length/2,v$x,v$D,v$p)}v$i(v$Q,"laya.webgl.shapes.Polygon",v$Un);var v$a=v$Q.prototype;return v$a.rebuild=function(v$n){this._repaint||(this._points.length=0,this._points=this._points.concat(v$n))},v$a.setMatrix=function(v$n){v$n.copyTo(this._mat)},v$a.needUpdate=function(v$n){return this._repaint=this._mat.a==v$n.a&&this._mat.b==v$n.b&&this._mat.c==v$n.c&&this._mat.d==v$n.d&&this._mat.tx==v$n.tx&&this._mat.ty==v$n.ty,!this._repaint},v$a.getData=function(v$n,v$a,v$U){var v$x,v$D=0,v$p=this._points,v$Q=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=v$U){for(this._start=v$U,v$x=[],v$Q=this.earcutTriangles.length,v$D=0;v$D<v$Q;v$D++)v$x.push(this.earcutTriangles[v$D]+v$U);this.mUint16Array=new Uint16Array(v$x)}}else{this._start=v$U,v$x=[];var v$V=[],v$y=[],v$R=this.color,v$X=(v$R>>16&255)/255,v$z=(v$R>>8&255)/255,v$i=(255&v$R)/255;for(v$Q=Math.floor(v$p.length/2),v$D=0;v$D<v$Q;v$D++)v$V.push(this.x+v$p[2*v$D],this.y+v$p[2*v$D+1],v$X,v$z,v$i),v$y.push(this.x+v$p[2*v$D],this.y+v$p[2*v$D+1]);for(this.earcutTriangles=v$xn.earcut(v$y,null,2),v$Q=this.earcutTriangles.length,v$D=0;v$D<v$Q;v$D++)v$x.push(this.earcutTriangles[v$D]+v$U);this.mUint16Array=new Uint16Array(v$x),this.mFloat32Array=new Float32Array(v$V)}v$n.append(this.mUint16Array),v$a.append(this.mFloat32Array)},v$Q}(),v$Gn=function(v$n){function v$p(){this._matrix=new v$_,this._matrix4=v$mn.defaultMatrix4.concat(),v$p.__super.call(this,1e4),this.shaderValue=new v$Nn(0,0)}v$i(v$p,"laya.webgl.submit.SubmitCanvas",v$pn);var v$a=v$p.prototype;return v$a.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var v$n=v$An.worldAlpha,v$a=v$An.worldMatrix4,v$U=v$An.worldMatrix,v$x=v$An.worldFilters,v$D=v$An.worldShaderDefines,v$p=this.shaderValue,v$Q=this._matrix,v$V=this._matrix4,v$y=v$_.TEMP;return v$_.mul(v$Q,v$U,v$y),v$V[0]=v$y.a,v$V[1]=v$y.b,v$V[4]=v$y.c,v$V[5]=v$y.d,v$V[12]=v$y.tx,v$V[13]=v$y.ty,v$An.worldMatrix=v$y.clone(),v$An.worldMatrix4=v$V,v$An.worldAlpha=v$An.worldAlpha*v$p.alpha,v$p.filters&&v$p.filters.length&&(v$An.worldFilters=v$p.filters,v$An.worldShaderDefines=v$p.defines),this._ctx_src.flush(),v$An.worldAlpha=v$n,v$An.worldMatrix4=v$a,v$An.worldMatrix.destroy(),v$An.worldMatrix=v$U,v$An.worldFilters=v$x,v$An.worldShaderDefines=v$D,1},v$a.releaseRender=function(){var v$n=v$p._cache;this._ctx_src=null,v$n[v$n._length++]=this},v$a.getRenderType=function(){return 10003},v$p.create=function(v$n,v$a,v$U){var v$x=v$p._cache._length?v$p._cache[--v$p._cache._length]:new v$p;v$x._ctx_src=v$n;var v$D=v$x.shaderValue;return v$D.alpha=v$a,v$D.defines.setValue(0),v$U&&v$U.length&&v$D.setFilters(v$U),v$x},v$p._cache=((v$p._cache=[])._length=0,v$p._cache),v$p}(),v$In=function(v$n){function v$R(v$n){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===v$n&&(v$n=1e4),v$R.__super.call(this,v$n)}v$i(v$R,"laya.webgl.submit.SubmitTexture",v$pn);var v$a=v$R.prototype;return v$a.releaseRender=function(){var v$n=v$R._cache;(v$n[v$n._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},v$a.addTexture=function(v$n,v$a){this._texsID[this._texs.length]=v$n._uvID,this._texs.push(v$n),this._vbPos.push(v$a)},v$a.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var v$n=this.shaderValue.textureHost.bitmap;if(null!==v$n)for(var v$a=this._vb.getFloat32Array(),v$U=0,v$x=this._texs.length;v$U<v$x;v$U++){var v$D=this._texs[v$U];v$D.active();var v$p=v$D.uv;if(this._texsID[v$U]!==v$D._uvID){this._texsID[v$U]=v$D._uvID;var v$Q=this._vbPos[v$U];v$a[v$Q+2]=v$p[0],v$a[v$Q+3]=v$p[1],v$a[v$Q+6]=v$p[2],v$a[v$Q+7]=v$p[3],v$a[v$Q+10]=v$p[4],v$a[v$Q+11]=v$p[5],v$a[v$Q+14]=v$p[6],v$a[v$Q+15]=v$p[7],this._vb.setNeedUpload()}v$D.bitmap!==v$n&&(this._isSameTexture=!1)}}},v$a.renderSubmit=function(){if(0===this._numEle)return v$R._shaderSet=!1,1;var v$n=this.shaderValue.textureHost;if(v$n){var v$a=v$n.source;if(!v$n.bitmap||!v$a)return v$R._shaderSet=!1,1;this.shaderValue.texture=v$a,v$n.alphaTexture&&v$n.alphaTexture.source&&(this.shaderValue.texture1=v$n.alphaTexture.source)}this._vb.bind_upload(this._ib);var v$U=v$Kn.mainContext;if(v$B.activeBlendFunction!==this._blendFn&&(v$U.enable(3042),this._blendFn(v$U),v$B.activeBlendFunction=this._blendFn),v$c.drawCall++,v$c.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&v$ln.activeShader&&v$R._shaderSet?(v$ln.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&v$ln.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),v$R._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var v$x=v$n.bitmap,v$D=0,v$p=v$ln.activeShader,v$Q=0,v$V=this._texs.length;v$Q<v$V;v$Q++){var v$y=this._texs[v$Q];v$y.bitmap===v$x&&v$Q+1!==v$V||(v$p.uploadTexture2D(v$y.source),v$U.drawElements(4,6*(v$Q-v$D+1),5123,this._startIdx+6*v$D*v$mn.BYTES_PIDX),v$x=v$y.bitmap,v$D=v$Q)}else v$U.drawElements(4,this._numEle,5123,this._startIdx);return 1},v$R.create=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$R._cache._length?v$R._cache[--v$R._cache._length]:new v$R;null==v$U&&((v$U=v$p._selfVb||(v$p._selfVb=v$en.create(-1))).clear(),v$x=0),v$p._ib=v$a,v$p._vb=v$U,v$p._startIdx=v$x*v$mn.BYTES_PIDX,v$p._numEle=0;var v$Q=v$n._nBlendType;v$p._blendFn=v$n._targets?v$B.targetFns[v$Q]:v$B.fns[v$Q],v$p.shaderValue=v$D,v$p.shaderValue.setValue(v$n._shader2D);var v$V=v$n._shader2D.filters;return v$V&&v$p.shaderValue.setFilters(v$V),v$p},v$R._cache=((v$R._cache=[])._length=0,v$R._cache),v$R._shaderSet=!0,v$R}(),v$vn=function(v$n){function v$P(){v$P.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}v$i(v$P,"laya.webgl.utils.MeshTexture",v$Pn);var v$a=v$P.prototype;return v$a.addData=function(v$n,v$a,v$U,v$x,v$D,v$p){for(var v$Q=v$n.length/2,v$V=this._vb.needSize(v$Q*v$P.const_stride)>>2,v$y=this._vb.getFloat32Array(),v$R=0,v$X=0;v$X<v$Q;v$X++){var v$z=v$n[v$R],v$i=v$n[v$R+1],v$q=v$z*v$x.a+v$i*v$x.c+v$x.tx,v$E=v$z*v$x.b+v$i*v$x.d+v$x.ty;v$y[v$V++]=v$q,v$y[v$V++]=v$E,v$y[v$V++]=v$a[v$R],v$y[v$V++]=v$a[v$R+1],v$R+=2}this._vb.setNeedUpload();var v$m=this.vertNum;if(0<v$m){(v$Q=v$U.length)>v$P.tmpIdx.length&&(v$P.tmpIdx=new Uint16Array(v$Q));for(var v$b=0;v$b<v$Q;v$b++)v$P.tmpIdx[v$b]=v$U[v$b]+v$m;this._ib.appendU16Array(v$P.tmpIdx,v$U.length)}else this._ib.append(v$U);this._ib.setNeedUpload(),this.vertNum+=v$Q,this.indexNum+=v$U.length},v$a.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},v$a.destroy=function(){this._ib.destroy(),this._vb.destroy()},v$P.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new v$P},v$P.const_stride=16,v$P._POOL=[],v$Q(v$P,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),v$P}(),v$ln=function(v$n){function v$a(){v$a.__super.call(this),this.lock=!0}return v$i(v$a,"laya.webgl.shader.BaseShader",v$T),v$a.activeShader=null,v$a.bindShader=null,v$a}(),v$jn=function(v$a){function v$X(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===v$U&&(v$U=6408),void 0===v$x&&(v$x=5121),void 0===v$D&&(v$D=34041),void 0===v$p&&(v$p=!1),void 0===v$Q&&(v$Q=!1),void 0===v$V&&(v$V=-1),void 0===v$y&&(v$y=-1),this._type=1,this._w=v$n,this._h=v$a,this._surfaceFormat=v$U,this._surfaceType=v$x,this._depthStencilFormat=v$D,v$P.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=v$p,this._repeat=v$Q,this._minFifter=v$V,this._magFifter=v$y,this._createWebGLRenderTarget(),this.bitmap.lock=!0,v$X.__super.call(this,this.bitmap,v$v.INV_UV)}v$i(v$X,"laya.webgl.resource.RenderTarget2D",v$a);var v$n=v$X.prototype;return v$W.imps(v$n,{"laya.resource.IDispose":!0}),v$n.getType=function(){return this._type},v$n.getTexture=function(){return this},v$n.size=function(v$n,v$a){this._w==v$n&&this._h==v$a||(this._w=v$n,this._h=v$a,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},v$n.release=function(){this.destroy()},v$n.recycle=function(){v$X.POOL.push(this)},v$n.start=function(){var v$n=v$Kn.mainContext;return this._preRenderTarget=v$An.curRenderTarget,v$An.curRenderTarget=this,v$n.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(v$n.viewport(0,0,this._w,this._h),this._svWidth=v$An.width,this._svHeight=v$An.height,v$An.width=this._w,v$An.height=this._h,v$ln.activeShader=null),this},v$n.clear=function(v$n,v$a,v$U,v$x){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=1);var v$D=v$Kn.mainContext;v$D.clearColor(v$n,v$a,v$U,v$x);var v$p=16384;switch(this._depthStencilFormat){case 33189:v$p|=256;break;case 36168:v$p|=1024;break;case 34041:v$p|=256,v$p|=1024}v$D.clear(v$p)},v$n.end=function(){var v$n=v$Kn.mainContext;v$n.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,v$An.curRenderTarget=this._preRenderTarget,1==this._type?(v$n.viewport(0,0,this._svWidth,this._svHeight),v$An.width=this._svWidth,v$An.height=this._svHeight,v$ln.activeShader=null):v$n.viewport(0,0,v$W.stage.width,v$W.stage.height)},v$n.getData=function(v$n,v$a,v$U,v$x){var v$D=v$Kn.mainContext;if(v$D.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===v$D.checkFramebufferStatus(36160)))return v$D.bindFramebuffer(36160,null),null;var v$p=new Uint8Array(this._w*this._h*4);return v$D.readPixels(v$n,v$a,v$U,v$x,this._surfaceFormat,this._surfaceType,v$p),v$D.bindFramebuffer(36160,null),v$p},v$n.destroy=function(v$n){void 0===v$n&&(v$n=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,v$a.prototype.destroy.call(this))},v$n.dispose=function(){},v$n._createWebGLRenderTarget=function(){this.bitmap=new v$Sn(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(v$n){this.event("recovered")})},v$x(0,v$n,"surfaceFormat",function(){return this._surfaceFormat}),v$x(0,v$n,"magFifter",function(){return this._magFifter}),v$x(0,v$n,"surfaceType",function(){return this._surfaceType}),v$x(0,v$n,"mipMap",function(){return this._mipMap}),v$x(0,v$n,"depthStencilFormat",function(){return this._depthStencilFormat}),v$x(0,v$n,"minFifter",function(){return this._minFifter}),v$x(0,v$n,"source",function(){return this._alreadyResolved?v$W.superGet(v$v,this,"source"):null}),v$X.create=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){void 0===v$U&&(v$U=6408),void 0===v$x&&(v$x=5121),void 0===v$D&&(v$D=34041),void 0===v$p&&(v$p=!1),void 0===v$Q&&(v$Q=!1),void 0===v$V&&(v$V=-1),void 0===v$y&&(v$y=-1);var v$R=v$X.POOL.pop();return v$R||(v$R=new v$X(v$n,v$a)),v$R.bitmap&&v$R._w==v$n&&v$R._h==v$a&&v$R._surfaceFormat==v$U&&v$R._surfaceType==v$x&&v$R._depthStencilFormat==v$D&&v$R._mipMap==v$p&&v$R._repeat==v$Q&&v$R._minFifter==v$V&&v$R._magFifter==v$y||(v$R._w=v$n,v$R._h=v$a,v$R._surfaceFormat=v$U,v$R._surfaceType=v$x,v$R._depthStencilFormat=v$D,v$P.isConchWebGL&&34041===v$R._depthStencilFormat&&(v$R._depthStencilFormat=33189),v$R._mipMap=v$p,v$R._repeat=v$Q,v$R._minFifter=v$V,v$R._magFifter=v$y,v$R.release(),v$R._createWebGLRenderTarget()),v$R},v$X.TYPE2D=1,v$X.TYPE3D=2,v$X.POOL=[],v$X}(v$v),v$hn=function(v$n){function v$a(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,v$a.__super.call(this),v$a._gl=v$Kn.mainContext}v$i(v$a,"laya.webgl.utils.Buffer",v$T);var v$U=v$a.prototype;return v$U._bind=function(){this.activeResource(),v$a._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(v$a._bindVertexBuffer=this._glBuffer),v$a._gl.bindBuffer(this._bufferType,v$a._bindActive[this._bufferType]=this._glBuffer),v$ln.activeShader=null)},v$U.recreateResource=function(){this._glBuffer||(this._glBuffer=v$a._gl.createBuffer()),this.completeCreate()},v$U.disposeResource=function(){this._glBuffer&&(v$Kn.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},v$x(0,v$U,"bufferUsage",function(){return this._bufferUsage}),v$a._gl=null,v$a._bindActive={},v$a._bindVertexBuffer=null,v$a._enableAtributes=[],v$a}(),v$fn=function(v$n){function v$U(v$n){this.texcoord=null,this.offsetX=300,this.offsetY=0,v$U.__super.call(this,512,0);var v$a=8*v$mn.BYTES_PE;this.position=[2,5126,!1,v$a,0],this.texcoord=[2,5126,!1,v$a,2*v$mn.BYTES_PE],this.color=[4,5126,!1,v$a,4*v$mn.BYTES_PE]}return v$i(v$U,"laya.webgl.shader.d2.skinAnishader.SkinSV",v$Nn),v$U}(),v$Fn=function(v$n){function v$a(v$n){v$a.__super.call(this,2,0),this.color=[]}return v$i(v$a,"laya.webgl.shader.d2.value.Color2dSV",v$Nn),v$a.prototype.setValue=function(v$n){v$n.fillStyle&&(this.color=v$n.fillStyle._color._color),v$n.strokeStyle&&(this.color=v$n.strokeStyle._color._color)},v$a}(),v$gn=function(v$n){function v$a(v$n){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=v$Nn._TEXCOORD,v$a.__super.call(this,256,0)}v$i(v$a,"laya.webgl.shader.d2.value.FillTextureSV",v$Nn);var v$U=v$a.prototype;return v$U.setValue=function(v$n){this.ALPHA=v$n.ALPHA,v$n.filters&&this.setFilters(v$n.filters)},v$U.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},v$a}(),v$on=function(v$n){function v$a(v$n){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=v$Nn._TEXCOORD,void 0===v$n&&(v$n=0),v$a.__super.call(this,1,v$n)}v$i(v$a,"laya.webgl.shader.d2.value.TextureSV",v$Nn);var v$U=v$a.prototype;return v$U.setValue=function(v$n){this.ALPHA=v$n.ALPHA,v$n.filters&&this.setFilters(v$n.filters)},v$U.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},v$a}(),v$Bn=function(v$n){function v$a(v$n){this.a_color=null,this.u_pos=[0,0],v$a.__super.call(this,4,0),this.position=[2,5126,!1,5*v$mn.BYTES_PE,0],this.a_color=[3,5126,!1,5*v$mn.BYTES_PE,2*v$mn.BYTES_PE]}return v$i(v$a,"laya.webgl.shader.d2.value.PrimitiveSV",v$Nn),v$a}(),v$On=function(v$n){function v$a(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,v$a.__super.call(this)}v$i(v$a,"laya.webgl.atlas.AtlasWebGLCanvas",v$n);var v$U=v$a.prototype;return v$U.recreateResource=function(){var v$n=v$Kn.mainContext,v$a=this._source=v$n.createTexture(),v$U=v$Yn.curBindTexTarget,v$x=v$Yn.curBindTexValue;v$Yn.bindTexture(v$n,3553,v$a),v$n.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),v$n.texParameteri(3553,10241,9729),v$n.texParameteri(3553,10240,9729),v$n.texParameteri(3553,10242,33071),v$n.texParameteri(3553,10243,33071),v$U&&v$x&&v$Yn.bindTexture(v$n,v$U,v$x),this.memorySize=this._w*this._h*4,this.completeCreate()},v$U.disposeResource=function(){this._source&&(v$Kn.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},v$U.texSubImage2D=function(v$n,v$a,v$U){if(v$P.isFlash){this._flashCacheImage||(this._flashCacheImage=v$m.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var v$x=v$U.bitmapdata;this._flashCacheImage._image.copyPixels(v$x,0,0,v$x.width,v$x.height,v$n,v$a),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var v$D=v$Kn.mainContext,v$p=v$Yn.curBindTexTarget,v$Q=v$Yn.curBindTexValue;v$Yn.bindTexture(v$D,3553,this._source),v$D.pixelStorei(37441,!0),0<=v$n-1&&v$D.texSubImage2D(3553,0,v$n-1,v$a,6408,5121,v$U),v$n+1<=this._w&&v$D.texSubImage2D(3553,0,v$n+1,v$a,6408,5121,v$U),0<=v$a-1&&v$D.texSubImage2D(3553,0,v$n,v$a-1,6408,5121,v$U),v$a+1<=this._h&&v$D.texSubImage2D(3553,0,v$n,v$a+1,6408,5121,v$U),v$D.texSubImage2D(3553,0,v$n,v$a,6408,5121,v$U),v$D.pixelStorei(37441,!1),v$p&&v$Q&&v$Yn.bindTexture(v$D,v$p,v$Q)}},v$U.texSubImage2DPixel=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$Kn.mainContext,v$Q=v$Yn.curBindTexTarget,v$V=v$Yn.curBindTexValue;v$Yn.bindTexture(v$p,3553,this._source);var v$y=new Uint8Array(v$D.data);v$p.pixelStorei(37441,!0),v$p.texSubImage2D(3553,0,v$n,v$a,v$U,v$x,6408,5121,v$y),v$p.pixelStorei(37441,!1),v$Q&&v$V&&v$Yn.bindTexture(v$p,v$Q,v$V)},v$x(0,v$U,"width",v$n.prototype._$get_width,function(v$n){this._w=v$n}),v$x(0,v$U,"height",v$n.prototype._$get_height,function(v$n){this._h=v$n}),v$a}(v$U),v$Ln=function(v$n){function v$D(){this.flipY=!0,this.alwaysChange=!1,v$D.__super.call(this)}v$i(v$D,"laya.webgl.resource.WebGLCanvas",v$U);var v$a=v$D.prototype;return v$a.getCanvas=function(){return this._canvas},v$a.clear=function(){this._ctx&&this._ctx.clear()},v$a.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},v$a._setContext=function(v$n){this._ctx=v$n},v$a.getContext=function(v$n,v$a){return this._ctx?this._ctx:this._ctx=v$D._createContext(this)},v$a.size=function(v$n,v$a){this._w==v$n&&this._h==v$a||(this._w=v$n,this._h=v$a,this._ctx&&this._ctx.size(v$n,v$a),this._canvas&&(this._canvas.height=v$a,this._canvas.width=v$n))},v$a.activeResource=function(v$n){void 0===v$n&&(v$n=!1),this._source||this.recreateResource()},v$a.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},v$a.disposeResource=function(){this._source&&!this.iscpuSource&&(v$Kn.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},v$a.createWebGlTexture=function(){var v$n=v$Kn.mainContext;this._canvas;var v$a=this._source=v$n.createTexture();this.iscpuSource=!1;var v$U=v$Yn.curBindTexTarget,v$x=v$Yn.curBindTexValue;v$Yn.bindTexture(v$n,3553,v$a),v$n.pixelStorei(37440,this.flipY?1:0),v$D.premulAlpha&&v$n.pixelStorei(37441,!0),v$n.texImage2D(3553,0,6408,6408,5121,this._imgData),v$D.premulAlpha&&v$n.pixelStorei(37441,!1),v$n.texParameteri(3553,10240,9729),v$n.texParameteri(3553,10241,9729),v$n.texParameteri(3553,10242,33071),v$n.texParameteri(3553,10243,33071),v$n.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,v$U&&v$x&&v$Yn.bindTexture(v$n,v$U,v$x)},v$a.reloadCanvasData=function(){var v$n=v$Kn.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var v$a=v$Yn.curBindTexTarget,v$U=v$Yn.curBindTexValue;v$Yn.bindTexture(v$n,3553,this._source),v$D.premulAlpha&&v$n.pixelStorei(37441,!0),v$n.texImage2D(3553,0,6408,6408,5121,this._imgData),v$D.premulAlpha&&v$n.pixelStorei(37441,!1),v$n.pixelStorei(37440,0),v$a&&v$U&&v$Yn.bindTexture(v$n,v$a,v$U)},v$a.texSubImage2D=function(v$n,v$a,v$U){var v$x=v$Kn.mainContext,v$D=v$Yn.curBindTexTarget,v$p=v$Yn.curBindTexValue;v$Yn.bindTexture(v$x,3553,this._source),v$x.pixelStorei(37441,!0),v$x.texSubImage2D(3553,0,v$a,v$U,6408,5121,v$n._source),v$x.pixelStorei(37441,!1),v$D&&v$p&&v$Yn.bindTexture(v$x,v$D,v$p)},v$a.toBase64=function(v$n,v$a,v$U){var v$x=null;this._canvas&&(v$x=this._canvas.toDataURL(v$n,v$a)),v$U.call(this,v$x)},v$x(0,v$a,"context",function(){return this._ctx}),v$x(0,v$a,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),v$x(0,v$a,"asBitmap",null,function(v$n){this._ctx&&(this._ctx.asBitmap=v$n)}),v$D._createContext=null,v$D.premulAlpha=!1,v$D}(),v$dn=function(v$n){function v$p(v$n,v$a){this.CborderSize=12,v$p.__super.call(this),this.char=v$n,this.isSpace=" "===v$n,this.xs=v$a.scaleX,this.ys=v$a.scaleY,this.font=v$a.font.toString(),this.fontSize=v$a.font.size,this.fillColor=v$a.fillColor,this.borderColor=v$a.borderColor,this.lineWidth=v$a.lineWidth,this.underLine=v$a.underLine;var v$U,v$x=v$P.isConchApp;v$x?((v$U=ConchTextCanvas)._source=ConchTextCanvas,v$U._source.canvas=ConchTextCanvas):v$U=v$q.canvas.source,this.canvas=v$U,this._enableMerageInAtlas=!0,this._ctx=v$x?v$U:this.canvas.getContext("2d",void 0);var v$D=v$l.measureText(this.char,this.font);this.cw=v$D.width*this.xs,this.ch=(v$D.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new v$v(this)}v$i(v$p,"laya.webgl.resource.WebGLCharImage",v$U);var v$a=v$p.prototype;return v$W.imps(v$a,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),v$a.active=function(){this.texture.active()},v$a.recreateResource=function(){var v$n=v$P.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),v$n){var v$a=this.fontSize;1==this.xs&&1==this.ys||(v$a=parseInt(v$a*(this.xs>this.ys?this.xs:this.ys)+""));var v$U="normal 100 "+this.font;v$U=v$U.replace(v$p._fontSizeReg,v$a),this.borderColor&&(v$U+=" 1 "+this.borderColor),this._ctx.font=v$U,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,v$I.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var v$x=this._ctx.measureText(this.char);v$x||(v$x={width:16});var v$D=v$x.width+1;this._ctx.lineTo(v$D,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},v$a.onresize=function(v$n,v$a){this._w=v$n,this._h=v$a,this._allowMerageInAtlas=!0},v$a.clearAtlasSource=function(){},v$x(0,v$a,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),v$x(0,v$a,"atlasSource",function(){return this.canvas}),v$x(0,v$a,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(v$n){this._enableMerageInAtlas=v$n}),v$p.createOneChar=function(v$n,v$a){return new v$p(v$n,v$a)},v$p._fontSizeReg=new RegExp("\\d+(?=px)","g"),v$p}(),v$Sn=function(v$n){function v$R(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){void 0===v$U&&(v$U=6408),void 0===v$x&&(v$x=5121),void 0===v$D&&(v$D=34041),void 0===v$p&&(v$p=!1),void 0===v$Q&&(v$Q=!1),void 0===v$V&&(v$V=-1),void 0===v$y&&(v$y=1),v$R.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=v$n,this._h=v$a,this._surfaceFormat=v$U,this._surfaceType=v$x,this._depthStencilFormat=v$D,this._mipMap=v$p,this._repeat=v$Q,this._minFifter=v$V,this._magFifter=v$y}v$i(v$R,"laya.webgl.resource.WebGLRenderTarget",v$U);var v$a=v$R.prototype;return v$a.recreateResource=function(){var v$n=v$Kn.mainContext;this._frameBuffer||(this._frameBuffer=v$n.createFramebuffer()),this._source||(this._source=v$n.createTexture());var v$a=v$Yn.curBindTexTarget,v$U=v$Yn.curBindTexValue;v$Yn.bindTexture(v$n,3553,this._source),v$n.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var v$x=this._minFifter,v$D=this._magFifter,v$p=this._repeat?10497:33071,v$Q=v$X.isPOT(this._w,this._h);if(v$Q?(this._mipMap?-1!==v$x||(v$x=9987):-1!==v$x||(v$x=9729),-1!==v$D||(v$D=9729),v$n.texParameteri(3553,10241,v$x),v$n.texParameteri(3553,10240,v$D),v$n.texParameteri(3553,10242,v$p),v$n.texParameteri(3553,10243,v$p),this._mipMap&&v$n.generateMipmap(3553)):(-1!==v$x||(v$x=9729),-1!==v$D||(v$D=9729),v$n.texParameteri(3553,10241,v$x),v$n.texParameteri(3553,10240,v$D),v$n.texParameteri(3553,10242,33071),v$n.texParameteri(3553,10243,33071)),v$n.bindFramebuffer(36160,this._frameBuffer),v$n.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=v$n.createRenderbuffer()),v$n.bindRenderbuffer(36161,this._depthStencilBuffer),v$n.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:v$n.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:v$n.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:v$n.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}v$n.bindFramebuffer(36160,null),v$a&&v$U&&v$Yn.bindTexture(v$n,v$a,v$U),v$n.bindRenderbuffer(36161,null),v$Q&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},v$a.disposeResource=function(){this._frameBuffer&&(v$Kn.mainContext.deleteTexture(this._source),v$Kn.mainContext.deleteFramebuffer(this._frameBuffer),v$Kn.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},v$x(0,v$a,"depthStencilBuffer",function(){return this._depthStencilBuffer}),v$x(0,v$a,"frameBuffer",function(){return this._frameBuffer}),v$R}(),v$wn=function(v$n){function v$V(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this.offsetX=0,this.offsetY=0,v$V.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=v$p,this.canvas=v$n,this._ctx=v$n.getContext("2d",void 0),this._w=v$x,this._h=v$D,this.offsetX=v$a,this.offsetY=v$U,this.src=v$Q,this._enableMerageInAtlas=!0,v$g.enabled&&this._w<v$g.atlasLimitWidth&&this._h<v$g.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}v$i(v$V,"laya.webgl.resource.WebGLSubImage",v$U);var v$a=v$V.prototype;return v$W.imps(v$a,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),v$a.size=function(v$n,v$a){this._w=v$n,this._h=v$a,this._ctx&&this._ctx.size(v$n,v$a),this.canvas&&(this.canvas.height=v$a,this.canvas.width=v$n)},v$a.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},v$a.createWebGlTexture=function(){var v$n=v$Kn.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var v$a=this._source=v$n.createTexture(),v$U=v$Yn.curBindTexTarget,v$x=v$Yn.curBindTexValue;v$Yn.bindTexture(v$n,3553,v$a),v$n.pixelStorei(37441,!0),v$n.texImage2D(3553,0,6408,6408,5121,this.canvas),v$n.pixelStorei(37441,!1);var v$D=this.minFifter,v$p=this.magFifter,v$Q=this.repeat?10497:33071,v$V=v$X.isPOT(this.width,this.height);v$V?(this.mipmap?-1!==v$D||(v$D=9987):-1!==v$D||(v$D=9729),-1!==v$p||(v$p=9729),v$n.texParameteri(3553,10240,v$p),v$n.texParameteri(3553,10241,v$D),v$n.texParameteri(3553,10242,v$Q),v$n.texParameteri(3553,10243,v$Q),this.mipmap&&v$n.generateMipmap(3553)):(-1!==v$D||(v$D=9729),-1!==v$p||(v$p=9729),v$n.texParameteri(3553,10241,v$D),v$n.texParameteri(3553,10240,v$p),v$n.texParameteri(3553,10242,33071),v$n.texParameteri(3553,10243,33071)),v$U&&v$x&&v$Yn.bindTexture(v$n,v$U,v$x),this.canvas=null,v$V&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},v$a.disposeResource=function(){v$g.enabled&&this._allowMerageInAtlas||!this._source||(v$Kn.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},v$a.clearAtlasSource=function(){},v$x(0,v$a,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),v$x(0,v$a,"atlasSource",function(){return this.canvas}),v$x(0,v$a,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(v$n){this._allowMerageInAtlas=v$n}),v$V}(),v$sn=function(v$n){function v$R(v$n,v$a,v$U,v$x){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,v$R.__super.call(this),!v$n||!v$a)throw"Shader Error";this._id=++v$R._count,this._vs=v$n,this._ps=v$a,this._nameMap=v$x||{},null!=v$U&&(v$R.sharders[v$U]=this)}v$i(v$R,"laya.webgl.shader.Shader",v$ln);var v$a=v$R.prototype;return v$a.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},v$a.disposeResource=function(){v$Kn.mainContext.deleteShader(this._vshader),v$Kn.mainContext.deleteShader(this._pshader),v$Kn.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},v$a._compile=function(){if(!v$Kn.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var v$n=[this._vs,this._ps],v$a=v$Kn.mainContext;if(this._program=v$a.createProgram(),this._vshader=v$R._createShader(v$a,v$n[0],35633),this._pshader=v$R._createShader(v$a,v$n[1],35632),v$a.attachShader(this._program,this._vshader),v$a.attachShader(this._program,this._pshader),v$a.linkProgram(this._program),!v$P.isConchApp&&!v$a.getProgramParameter(this._program,35714))throw v$a.getProgramInfoLog(this._program);var v$U,v$x,v$D=0,v$p=0;for(v$p=v$P.isConchApp?v$a.getProgramParameterEx(this._vs,this._ps,"",35721):v$a.getProgramParameter(this._program,35721),v$D=0;v$D<v$p;v$D++){var v$Q=null;v$U={vartype:"attribute",glfun:null,ivartype:0,attrib:v$Q=v$P.isConchApp?v$a.getActiveAttribEx(this._vs,this._ps,"",v$D):v$a.getActiveAttrib(this._program,v$D),location:v$a.getAttribLocation(this._program,v$Q.name),name:v$Q.name,type:v$Q.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(v$U)}var v$V=0;for(v$V=v$P.isConchApp?v$a.getProgramParameterEx(this._vs,this._ps,"",35718):v$a.getProgramParameter(this._program,35718),v$D=0;v$D<v$V;v$D++){var v$y=null;v$y=v$P.isConchApp?v$a.getActiveUniformEx(this._vs,this._ps,"",v$D):v$a.getActiveUniform(this._program,v$D),0<(v$U={vartype:"uniform",glfun:null,ivartype:1,attrib:v$Q,location:v$a.getUniformLocation(this._program,v$y.name),name:v$y.name,type:v$y.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(v$U.name=v$U.name.substr(0,v$U.name.length-3),v$U.isArray=!0,v$U.location=v$a.getUniformLocation(this._program,v$U.name)),this._params.push(v$U)}for(v$D=0,v$x=this._params.length;v$D<v$x;v$D++)if((v$U=this._params[v$D]).indexOfParams=v$D,v$U.index=1,v$U.value=[v$U.location,null],v$U.codename=v$U.name,v$U.name=this._nameMap[v$U.codename]?this._nameMap[v$U.codename]:v$U.codename,(this._paramsMap[v$U.name]=v$U)._this=this,v$U.uploadedValue=[],"attribute"!==v$U.vartype)switch(v$U.type){case 5124:v$U.fun=v$U.isArray?this._uniform1iv:this._uniform1i;break;case 5126:v$U.fun=v$U.isArray?this._uniform1fv:this._uniform1f;break;case 35664:v$U.fun=v$U.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:v$U.fun=v$U.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:v$U.fun=v$U.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:v$U.fun=this._uniform_sampler2D;break;case 35680:v$U.fun=this._uniform_samplerCube;break;case 35676:v$U.glfun=v$a.uniformMatrix4fv,v$U.fun=this._uniformMatrix4fv;break;case 35670:v$U.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else v$U.fun=this._attribute}},v$a.getUniform=function(v$n){return this._paramsMap[v$n]},v$a._attribute=function(v$n,v$a){var v$U=v$Kn.mainContext,v$x=v$hn._enableAtributes,v$D=v$n.location;return v$x[v$D]||v$U.enableVertexAttribArray(v$D),v$U.vertexAttribPointer(v$D,v$a[0],v$a[1],v$a[2],v$a[3],v$a[4]+this._offset),v$x[v$D]=v$hn._bindVertexBuffer,1},v$a._uniform1f=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a?(v$Kn.mainContext.uniform1f(v$n.location,v$U[0]=v$a),1):0},v$a._uniform1fv=function(v$n,v$a){if(v$a.length<4){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]||v$U[3]!==v$a[3]?(v$Kn.mainContext.uniform1fv(v$n.location,v$a),v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2],v$U[3]=v$a[3],1):0}return v$Kn.mainContext.uniform1fv(v$n.location,v$a),1},v$a._uniform_vec2=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]?(v$Kn.mainContext.uniform2f(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1]),1):0},v$a._uniform_vec2v=function(v$n,v$a){if(v$a.length<2){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]||v$U[3]!==v$a[3]?(v$Kn.mainContext.uniform2fv(v$n.location,v$a),v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2],v$U[3]=v$a[3],1):0}return v$Kn.mainContext.uniform2fv(v$n.location,v$a),1},v$a._uniform_vec3=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]?(v$Kn.mainContext.uniform3f(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2]),1):0},v$a._uniform_vec3v=function(v$n,v$a){return v$Kn.mainContext.uniform3fv(v$n.location,v$a),1},v$a._uniform_vec4=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]||v$U[3]!==v$a[3]?(v$Kn.mainContext.uniform4f(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2],v$U[3]=v$a[3]),1):0},v$a._uniform_vec4v=function(v$n,v$a){return v$Kn.mainContext.uniform4fv(v$n.location,v$a),1},v$a._uniformMatrix2fv=function(v$n,v$a){return v$Kn.mainContext.uniformMatrix2fv(v$n.location,!1,v$a),1},v$a._uniformMatrix3fv=function(v$n,v$a){return v$Kn.mainContext.uniformMatrix3fv(v$n.location,!1,v$a),1},v$a._uniformMatrix4fv=function(v$n,v$a){return v$Kn.mainContext.uniformMatrix4fv(v$n.location,!1,v$a),1},v$a._uniform1i=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a?(v$Kn.mainContext.uniform1i(v$n.location,v$U[0]=v$a),1):0},v$a._uniform1iv=function(v$n,v$a){return v$Kn.mainContext.uniform1iv(v$n.location,v$a),1},v$a._uniform_ivec2=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]?(v$Kn.mainContext.uniform2i(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1]),1):0},v$a._uniform_ivec2v=function(v$n,v$a){return v$Kn.mainContext.uniform2iv(v$n.location,v$a),1},v$a._uniform_vec3i=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]?(v$Kn.mainContext.uniform3i(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2]),1):0},v$a._uniform_vec3vi=function(v$n,v$a){return v$Kn.mainContext.uniform3iv(v$n.location,v$a),1},v$a._uniform_vec4i=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]||v$U[3]!==v$a[3]?(v$Kn.mainContext.uniform4i(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2],v$U[3]=v$a[3]),1):0},v$a._uniform_vec4vi=function(v$n,v$a){return v$Kn.mainContext.uniform4iv(v$n.location,v$a),1},v$a._uniform_sampler2D=function(v$n,v$a){var v$U=v$Kn.mainContext,v$x=v$n.uploadedValue;return null==v$x[0]?(v$x[0]=this._curActTexIndex,v$U.uniform1i(v$n.location,this._curActTexIndex),v$U.activeTexture(v$R._TEXTURES[this._curActTexIndex]),v$Yn.bindTexture(v$U,3553,v$a),this._curActTexIndex++,1):(v$U.activeTexture(v$R._TEXTURES[v$x[0]]),v$Yn.bindTexture(v$U,3553,v$a),0)},v$a._uniform_samplerCube=function(v$n,v$a){var v$U=v$Kn.mainContext,v$x=v$n.uploadedValue;return null==v$x[0]?(v$x[0]=this._curActTexIndex,v$U.uniform1i(v$n.location,this._curActTexIndex),v$U.activeTexture(v$R._TEXTURES[this._curActTexIndex]),v$Yn.bindTexture(v$U,34067,v$a),this._curActTexIndex++,1):(v$U.activeTexture(v$R._TEXTURES[v$x[0]]),v$Yn.bindTexture(v$U,34067,v$a),0)},v$a._noSetValue=function(v$n){console.log("no....:"+v$n.name)},v$a.uploadOne=function(v$n,v$a){this.activeResource(),v$Yn.UseProgram(this._program);var v$U=this._paramsMap[v$n];v$U.fun.call(this,v$U,v$a)},v$a.uploadTexture2D=function(v$n){v$c.shaderCall++;var v$a=v$Kn.mainContext;v$a.activeTexture(33984),v$Yn.bindTexture(v$a,3553,v$n)},v$a.uploadTexture2D1=function(v$n){v$c.shaderCall++;var v$a=v$Kn.mainContext;v$a.activeTexture(33985),v$Yn.bindTexture(v$a,3553,v$n)},v$a.upload=function(v$n,v$a){v$ln.activeShader=v$ln.bindShader=this,this._lastUseFrameCount===v$c.loopCount||this.activeResource(),v$Yn.UseProgram(this._program),this._reCompile?(v$a=this._params,this._reCompile=!1):v$a=v$a||this._params;v$Kn.mainContext;for(var v$U,v$x,v$D=v$a.length,v$p=0,v$Q=0;v$Q<v$D;v$Q++)null!==(v$x=v$n[(v$U=v$a[v$Q]).name])&&(v$p+=v$U.fun.call(this,v$U,v$x));v$c.shaderCall+=v$p},v$a.uploadArray=function(v$n,v$a,v$U){v$ln.activeShader=this,(v$ln.bindShader=this).activeResource(),v$Yn.UseProgram(this._program);this._params;for(var v$x,v$D,v$p=0,v$Q=v$a-2;0<=v$Q;v$Q-=2)(v$D=this._paramsMap[v$n[v$Q]])&&null!=(v$x=v$n[v$Q+1])&&(v$U&&v$U[v$D.name]&&v$U[v$D.name].bind(),v$p+=v$D.fun.call(this,v$D,v$x));v$c.shaderCall+=v$p},v$a.getParams=function(){return this._params},v$R.getShader=function(v$n){return v$R.sharders[v$n]},v$R.create=function(v$n,v$a,v$U,v$x){return new v$R(v$n,v$a,v$U,v$x)},v$R.withCompile=function(v$n,v$a,v$U,v$x){if(v$U&&v$R.sharders[v$U])return v$R.sharders[v$U];var v$D=v$R._preCompileShader[2e-4*v$n];if(!v$D)throw new Error("withCompile shader err!"+v$n);return v$D.createShader(v$a,v$U,v$x)},v$R.withCompile2D=function(v$n,v$a,v$U,v$x,v$D){if(v$x&&v$R.sharders[v$x])return v$R.sharders[v$x];var v$p=v$R._preCompileShader[2e-4*v$n+v$a];if(!v$p)throw new Error("withCompile shader err!"+v$n+" "+v$a);return v$p.createShader(v$U,v$x,v$D)},v$R.addInclude=function(v$n,v$a){v$Tn.addInclude(v$n,v$a)},v$R.preCompile=function(v$n,v$a,v$U,v$x){var v$D=2e-4*v$n;v$R._preCompileShader[v$D]=new v$Tn(v$D,v$a,v$U,v$x)},v$R.preCompile2D=function(v$n,v$a,v$U,v$x,v$D){var v$p=2e-4*v$n+v$a;v$R._preCompileShader[v$p]=new v$Tn(v$p,v$U,v$x,v$D)},v$R._createShader=function(v$n,v$a,v$U){var v$x=v$n.createShader(v$U);return v$n.shaderSource(v$x,v$a),v$n.compileShader(v$x),v$x},v$R._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],v$R._count=0,v$R._preCompileShader={},v$R.SHADERNAME2ID=2e-4,v$R.sharders=((v$R.sharders=[]).length=32,v$R.sharders),v$Q(v$R,["nameKey",function(){return this.nameKey=new v$H}]),v$R}(),v$Cn=function(v$n){function v$a(){this._maxsize=0,this._upload=!0,this._uploadSize=0,v$a.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}v$i(v$a,"laya.webgl.utils.Buffer2D",v$n);var v$U=v$a.prototype;return v$U.needSize=function(v$n){var v$a=this._byteLength;if(v$n){var v$U=this._byteLength+v$n;v$U<=this._buffer.byteLength||this._resizeBuffer(v$U<<1,!0),this._byteLength=v$U}return v$a},v$U._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),v$c.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,v$hn._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),v$hn._gl.bufferSubData(this._bufferType,0,this._buffer)},v$U._bufferSubData=function(v$n,v$a,v$U){if(void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),this._maxsize=Math.max(this._maxsize,this._byteLength),v$c.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,v$hn._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),v$a||v$U){var v$x=this._buffer.slice(v$a,v$U);v$hn._gl.bufferSubData(this._bufferType,v$n,v$x)}else v$hn._gl.bufferSubData(this._bufferType,v$n,this._buffer)},v$U._checkArrayUse=function(){},v$U._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},v$U._bind_subUpload=function(v$n,v$a,v$U){return void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(v$n,v$a,v$U),!0)},v$U._resizeBuffer=function(v$n,v$a){if(v$n<this._buffer.byteLength)return this;if(this.memorySize=v$n,v$a&&this._buffer&&0<this._buffer.byteLength){var v$U=new ArrayBuffer(v$n);new Uint8Array(v$U).set(new Uint8Array(this._buffer),0),this._buffer=v$U}else this._buffer=new ArrayBuffer(v$n);return this._checkArrayUse(),this._upload=!0,this},v$U.append=function(v$n){this._upload=!0;var v$a,v$U;v$a=v$n.byteLength,v$n instanceof Uint8Array?(this._resizeBuffer(this._byteLength+v$a,!0),v$U=new Uint8Array(this._buffer,this._byteLength)):v$n instanceof Uint16Array?(this._resizeBuffer(this._byteLength+v$a,!0),v$U=new Uint16Array(this._buffer,this._byteLength)):v$n instanceof Float32Array&&(this._resizeBuffer(this._byteLength+v$a,!0),v$U=new Float32Array(this._buffer,this._byteLength)),v$U.set(v$n,0),this._byteLength+=v$a,this._checkArrayUse()},v$U.appendU16Array=function(v$n,v$a){this._resizeBuffer(this._byteLength+2*v$a,!0);for(var v$U=new Uint16Array(this._buffer,this._byteLength,v$a),v$x=0;v$x<v$a;v$x++)v$U[v$x]=v$n[v$x];this._byteLength+=2*v$a,this._checkArrayUse()},v$U.appendEx=function(v$n,v$a){this._upload=!0;var v$U;v$U=v$n.byteLength,this._resizeBuffer(this._byteLength+v$U,!0),new v$a(this._buffer,this._byteLength).set(v$n,0),this._byteLength+=v$U,this._checkArrayUse()},v$U.appendEx2=function(v$n,v$a,v$U,v$x){void 0===v$x&&(v$x=1),this._upload=!0;var v$D,v$p;v$D=v$U*v$x,this._resizeBuffer(this._byteLength+v$D,!0),v$p=new v$a(this._buffer,this._byteLength);var v$Q=0;for(v$Q=0;v$Q<v$U;v$Q++)v$p[v$Q]=v$n[v$Q];this._byteLength+=v$D,this._checkArrayUse()},v$U.getBuffer=function(){return this._buffer},v$U.setNeedUpload=function(){this._upload=!0},v$U.getNeedUpload=function(){return this._upload},v$U.upload=function(){var v$n=this._bind_upload();return v$hn._gl.bindBuffer(this._bufferType,null),v$hn._bindActive[this._bufferType]=null,v$ln.activeShader=null,v$n},v$U.subUpload=function(v$n,v$a,v$U){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0);var v$x=this._bind_subUpload();return v$hn._gl.bindBuffer(this._bufferType,null),v$hn._bindActive[this._bufferType]=null,v$ln.activeShader=null,v$x},v$U.disposeResource=function(){v$n.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},v$U.clear=function(){this._byteLength=0,this._upload=!0},v$x(0,v$U,"bufferLength",function(){return this._buffer.byteLength}),v$x(0,v$U,"byteLength",null,function(v$n){this._byteLength!==v$n&&(v$n<=this._buffer.byteLength||this._resizeBuffer(2*v$n+256,!0),this._byteLength=v$n)}),v$a.__int__=function(v$n){v$Jn.QuadrangleIB=v$Jn.create(35044),v$bn.fillIBQuadrangle(v$Jn.QuadrangleIB,16)},v$a.FLOAT32=4,v$a.SHORT=2,v$a}(v$hn),v$tn=(function(v$a){function v$U(v$n){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,v$U.__super.call(this,9)}v$i(v$U,"laya.webgl.shader.d2.value.GlowSV",v$a);var v$n=v$U.prototype;v$n.setValue=function(v$n){v$a.prototype.setValue.call(this,v$n)},v$n.clear=function(){v$a.prototype.clear.call(this)}}(v$on),function(v$n){function v$a(v$n){v$a.__super.call(this,64),this.defines.add(64)}v$i(v$a,"laya.webgl.shader.d2.value.TextSV",v$n);var v$U=v$a.prototype;return v$U.release=function(){(v$a.pool[v$a._length++]=this).clear()},v$U.clear=function(){v$n.prototype.clear.call(this)},v$a.create=function(){return v$a._length?v$a.pool[--v$a._length]:new v$a(null)},v$a.pool=[],v$a._length=0,v$a}(v$on)),v$rn=function(v$n){function v$D(v$n,v$a,v$U,v$x){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,v$D.__super.call(this,v$n,v$a,v$U,v$x)}v$i(v$D,"laya.webgl.shader.d2.Shader2X",v$n);var v$a=v$D.prototype;return v$a.upload2dQuick1=function(v$n){this.upload(v$n,this._params2dQuick1||this._make2dQuick1())},v$a._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var v$n,v$a=this._params,v$U=0,v$x=v$a.length;v$U<v$x;v$U++)v$n=v$a[v$U],(v$P.isFlash||"size"!==v$n.name&&"position"!==v$n.name&&"texcoord"!==v$n.name)&&this._params2dQuick1.push(v$n)}return this._params2dQuick1},v$a.disposeResource=function(){v$n.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},v$a.upload2dQuick2=function(v$n){this.upload(v$n,this._params2dQuick2||this._make2dQuick2())},v$a._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var v$n,v$a=this._params,v$U=0,v$x=v$a.length;v$U<v$x;v$U++)v$n=v$a[v$U],(v$P.isFlash||"size"!==v$n.name)&&this._params2dQuick2.push(v$n)}return this._params2dQuick2},v$D.create=function(v$n,v$a,v$U,v$x){return new v$D(v$n,v$a,v$U,v$x)},v$D}(v$sn),v$Jn=function(v$n){function v$a(v$n){this._uint8Array=null,this._uint16Array=null,void 0===v$n&&(v$n=35044),v$a.__super.call(this),this._bufferUsage=v$n,this._bufferType=34963,v$P.isFlash||(this._buffer=new ArrayBuffer(8))}v$i(v$a,"laya.webgl.utils.IndexBuffer2D",v$Cn);var v$U=v$a.prototype;return v$U._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},v$U.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},v$U.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},v$U.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},v$a.QuadrangleIB=null,v$a.create=function(v$n){return void 0===v$n&&(v$n=35044),new v$a(v$n)},v$a}(),v$en=function(v$n){function v$U(v$n,v$a){this._floatArray32=null,this._vertexStride=0,v$U.__super.call(this),this._vertexStride=v$n,this._bufferUsage=v$a,this._bufferType=34962,v$P.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}v$i(v$U,"laya.webgl.utils.VertexBuffer2D",v$n);var v$a=v$U.prototype;return v$a.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},v$a.bind=function(v$n){v$n&&v$n._bind(),this._bind()},v$a.insertData=function(v$n,v$a){this.getFloat32Array().set(v$n,v$a),this._upload=!0},v$a.bind_upload=function(v$n){v$n._bind_upload()||v$n._bind(),this._bind_upload()||this._bind()},v$a._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},v$a.disposeResource=function(){v$n.prototype.disposeResource.call(this)},v$a.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},v$x(0,v$a,"vertexStride",function(){return this._vertexStride}),v$U.create=function(v$n,v$a){return void 0===v$a&&(v$a=35048),new v$U(v$n,v$a)},v$U}(v$Cn),v$na=function(v$n){function v$V(v$n,v$a,v$U,v$x,v$D,v$p){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===v$U&&(v$U=6408),void 0===v$x&&(v$x=!0),v$V.__super.call(this,v$n,v$a),v$n){if(this._format=v$U,this._mipmap=v$x,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof v$n)this._url=v$n,this._src=v$n,this._image=new v$q.window.Image,v$a&&(v$a.onload&&(this.onload=v$a.onload),v$a.onerror&&(this.onerror=v$a.onerror),v$a.onCreate&&v$a.onCreate(this)),this._image.crossOrigin=v$n&&0==v$n.indexOf("data:")?null:"",v$n&&(this._image.src=v$n);else if(v$n instanceof ArrayBuffer){this._src=v$a,this._url=this._src;var v$Q=new v$y(v$n);v$Q.readUTFBytes(4),v$Q.readUTFBytes(2),v$Q.getInt16();v$Q.endian="bigEndian",this._w=v$Q.getInt16(),this._h=v$Q.getInt16();v$Q.getInt16(),v$Q.getInt16();this._image=new Uint8Array(v$n,v$Q.pos),this._format=v$Kn.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,v$g.enabled&&this._w<v$g.atlasLimitWidth&&this._h<v$g.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(v$n instanceof Uint8Array))return this._src=v$a,this._url=this._src,this._image=v$n.source||v$n,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=v$a,this._url=this._src,this._w=v$D,this._h=v$p,this._image=v$n,this._format=0===v$U?v$n.byteLength/(v$D*v$p)==4?6408:6407:v$U}this._$5__enableMerageInAtlas=!0}}v$i(v$V,"laya.webgl.resource.WebGLImage",v$m);var v$a=v$V.prototype;return v$W.imps(v$a,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),v$a._init_=function(v$n,v$a){},v$a._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var v$n=v$Kn.mainContext,v$a=this._source=v$n.createTexture(),v$U=v$Yn.curBindTexTarget,v$x=v$Yn.curBindTexValue;v$Yn.bindTexture(v$n,3553,v$a);var v$D=this.minFifter,v$p=this.magFifter,v$Q=this.repeat?10497:33071,v$V=v$X.isPOT(this._w,this._h),v$y=!1;switch(v$V?(this.mipmap?-1!==v$D||(v$D=9987):-1!==v$D||(v$D=9729),-1!==v$p||(v$p=9729),v$n.texParameteri(3553,10241,v$D),v$n.texParameteri(3553,10240,v$p),v$n.texParameteri(3553,10242,v$Q),v$n.texParameteri(3553,10243,v$Q),this.mipmap&&v$n.generateMipmap(3553)):(-1!==v$D||(v$D=9729),-1!==v$p||(v$p=9729),v$n.texParameteri(3553,10241,v$D),v$n.texParameteri(3553,10240,v$p),v$n.texParameteri(3553,10242,33071),v$n.texParameteri(3553,10243,33071)),v$n.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&v$n.pixelStorei(v$n.UNPACK_ALIGNMENT,1),v$n.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&v$n.pixelStorei(v$n.UNPACK_ALIGNMENT,1),v$n.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:v$y=!0,v$n.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case v$Kn.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:v$y=!0,v$n.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}v$n.pixelStorei(37441,!1),v$U&&v$x&&v$Yn.bindTexture(v$n,v$U,v$x),this.uri||(this.uri=this._url),v$y?this.memorySize=this._image.length:v$V&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},v$a.recreateResource=function(){var v$n=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var v$a=this;this._image=new v$q.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(v$a._needReleaseAgain)return v$a._needReleaseAgain=!1,v$a._image.onload=null,void(v$a._image=null);v$a._allowMerageInAtlas&&v$a._enableMerageInAtlas?(v$n.memorySize=0,v$n._recreateLock=!1):v$a._createWebGlTexture(),v$a.completeCreate()},this._image.src=this._src}},v$a.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&v$Kn.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},v$a.onresize=function(){this._w=this._image.width,this._h=this._image.height,v$g.enabled&&this._w<v$g.atlasLimitWidth&&this._h<v$g.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},v$a.clearAtlasSource=function(){this._image=null},v$x(0,v$a,"format",function(){return this._format}),v$x(0,v$a,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(v$n){this._$5__enableMerageInAtlas=v$n}),v$x(0,v$a,"mipmap",function(){return this._mipmap}),v$x(0,v$a,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),v$x(0,v$a,"atlasSource",function(){return this._image}),v$x(0,v$a,"onload",null,function(v$n){var v$a=this;this._onload=v$n,this._image&&(this._image.onload=null!=this._onload?function(){v$a.onresize(),v$a._onload()}:null)}),v$x(0,v$a,"onerror",null,function(v$n){var v$a=this;this._onerror=v$n,this._image&&(this._image.onerror=null!=this._onerror?function(){v$a._onerror()}:null)}),v$V}();v$W.__init([v$qn,v$F,v$kn,v$Tn])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(v$n,v$a){"use strict";for(var v$U in Object.defineProperty(v$a,"__esModule",{value:!0}),Laya){var v$x=Laya[v$U];v$x&&v$x.__isclass&&(v$a[v$U]=v$x)}}),function(v$p,v$n,v$x){v$x.un,v$x.uns;var v$D=v$x.static,v$Q=v$x.class,v$V=v$x.getset,v$y=(v$x.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),v$E=laya.utils.ClassUtils,v$z=(laya.events.Event,laya.utils.HTMLChar),v$R=laya.net.Loader,v$X=(laya.display.Node,laya.maths.Rectangle),v$i=laya.renders.Render,v$q=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),v$m=laya.utils.Stat,v$l=laya.display.Text,v$b=laya.resource.Texture,v$P=laya.net.URL,v$A=laya.utils.Utils,v$T=function(){function v$q(){}return v$Q(v$q,"laya.html.utils.HTMLParse"),v$q.parse=function(v$n,v$a,v$U){v$a=(v$a="<root>"+(v$a=v$a.replace(/<br>/g,"<br/>"))+"</root>").replace(v$q.spacePattern,v$q.char255);var v$x=v$A.parseXMLFromString(v$a);v$q._parseXML(v$n,v$x.childNodes[0].childNodes,v$U)},v$q._parseXML=function(v$n,v$a,v$U,v$x){var v$D=0,v$p=0;if(v$a.join||v$a.item)for(v$D=0,v$p=v$a.length;v$D<v$p;++v$D)v$q._parseXML(v$n,v$a[v$D],v$U,v$x);else{var v$Q,v$V,v$y;if(3==v$a.nodeType)return void(v$n instanceof laya.html.dom.HTMLDivElement?(null==v$a.nodeName&&(v$a.nodeName="#text"),v$V=v$a.nodeName.toLowerCase(),0<(v$y=v$a.textContent.replace(/^\s+|\s+$/g,"")).length&&(v$Q=v$E.getInstance(v$V))&&(v$n.addChild(v$Q),v$Q.innerTEXT=v$y.replace(v$q.char255AndOneSpacePattern," "))):0<(v$y=v$a.textContent.replace(/^\s+|\s+$/g,"")).length&&(v$n.innerTEXT=v$y.replace(v$q.char255AndOneSpacePattern," ")));if("#comment"==(v$V=v$a.nodeName.toLowerCase()))return;if(v$Q=v$E.getInstance(v$V)){(v$Q=v$n.addChild(v$Q)).URI=v$U,v$Q.href=v$x;var v$R=v$a.attributes;if(v$R&&0<v$R.length)for(v$D=0,v$p=v$R.length;v$D<v$p;++v$D){var v$X=v$R[v$D],v$z=v$X.nodeName,v$i=v$X.value;v$Q._setAttributes(v$z,v$i)}v$q._parseXML(v$Q,v$a.childNodes,v$U,v$Q.href)}else v$q._parseXML(v$n,v$a.childNodes,v$U,v$x)}},v$q.char255=String.fromCharCode(255),v$q.spacePattern=/&nbsp;|&#160;/g,v$q.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),v$q}(),v$K=function(){function v$v(){}return v$Q(v$v,"laya.html.utils.Layout"),v$v.later=function(v$n){null==v$v._will&&(v$v._will=[],v$x.stage.frameLoop(1,null,function(){if(!(v$v._will.length<1)){for(var v$n=0;v$n<v$v._will.length;v$n++)laya.html.utils.Layout.layout(v$v._will[v$n]);v$v._will.length=0}})),v$v._will.push(v$n)},v$v.layout=function(v$n){if(!v$n||!v$n._style)return null;if(0==(512&v$n._style._type))return null;v$n.getStyle()._type&=-513;var v$a=v$v._multiLineLayout(v$n);return v$i.isConchApp&&v$n.layaoutCallNative&&v$n.layaoutCallNative(),v$a},v$v._multiLineLayout=function(v$n){if(v$l.RightToLeft)return v$v._multiLineLayout2(v$n);var v$a=new Array;v$n._addChildsToLayout(v$a);var v$U,v$x,v$D,v$p,v$Q,v$V=0,v$y=v$a.length,v$R=v$n._getCSSStyle(),v$X=v$R.letterSpacing,v$z=v$R.leading,v$i=v$R.lineHeight,v$q=v$R._widthAuto()||!v$R.wordWrap,v$E=v$q?999999:v$n.width,v$m=(v$n.height,0),v$b=v$R.italic?v$R.fontSize/3:0,v$P=v$R._getAlign(),v$A=v$R._getValign(),v$T=0!==v$A||0!==v$P||0!=v$i,v$K=0,v$Y=0,v$W=0,v$k=0,v$N=new Array,v$_=v$N[0]=new v$j,v$$=!1,v$M=!1;v$_.h=0,v$R.italic&&(v$E-=v$R.fontSize/3);var v$Z=0,v$u=!0;function v$c(){v$_.y=v$Y,v$Y+=v$_.h+v$z,0==v$_.h&&(v$Y+=v$i),v$_.mWidth=v$Z,v$Z=0,v$_=new v$j,v$N.push(v$_),v$_.h=0,v$$=!(v$u=!(v$K=0))}for(v$V=0;v$V<v$y;v$V++)if(null!=(v$U=v$a[v$V]))if(v$u=!1,v$U instanceof laya.html.dom.HTMLBrElement)v$c(),v$_.y=v$Y;else{if(v$U._isChar()){if((v$p=v$U).isWord)v$$=v$M||"\n"===v$p.char,v$_.wordStartIndex=v$_.elements.length;else{if(v$W=v$p.width+v$p.style.letterSpacin,0<v$N.length&&v$E<v$K+v$W&&0<v$_.wordStartIndex){var v$H;v$H=v$_.elements.length-v$_.wordStartIndex+1,v$_.elements.length=v$_.wordStartIndex,v$V-=v$H,v$c();continue}v$$=!1,v$Z+=v$p.width}v$W=v$p.width+v$X,v$k=v$p.height,v$M=!1,(v$$=v$$||v$E<v$K+v$W)&&v$c(),v$_.minTextHeight=Math.min(v$_.minTextHeight,v$U.height)}else v$x=v$U._getCSSStyle(),v$Q=v$U,v$D=v$x.padding,0===v$x._getCssFloat()||(v$T=!0),v$$=v$M||v$x.lineElement,v$W=v$Q.width*v$Q._style._tf.scaleX+v$D[1]+v$D[3]+v$X,v$k=v$Q.height*v$Q._style._tf.scaleY+v$D[0]+v$D[2],v$M=v$x.lineElement,(v$$=v$$||v$E<v$K+v$W&&v$x.wordWrap)&&v$c();v$_.elements.push(v$U),v$_.h=Math.max(v$_.h,v$k),v$U.x=v$K,v$U.y=v$Y,v$K+=v$W,v$_.w=v$K-v$X,v$_.y=v$Y,v$m=Math.max(v$K+v$b,v$m)}else v$u||(v$K+=v$v.DIV_ELEMENT_PADDING),v$_.wordStartIndex=v$_.elements.length;if(v$Y=v$_.y+v$_.h,v$T){var v$G=0,v$I=v$E;for(v$q&&0<v$n.width&&(v$I=v$n.width),v$V=0,v$y=v$N.length;v$V<v$y;v$V++)v$N[v$V].updatePos(0,v$I,v$V,v$G,v$P,v$A,v$i),v$G+=Math.max(v$i,v$N[v$V].h+v$z);v$Y=v$G}return v$q&&(v$n.width=v$m),v$Y>v$n.height&&(v$n.height=v$Y),[v$m,v$Y]},v$v._multiLineLayout2=function(v$n){var v$a=new Array;v$n._addChildsToLayout(v$a);var v$U,v$x,v$D,v$p,v$Q,v$V=0,v$y=v$a.length,v$R=v$n._getCSSStyle(),v$X=v$R.letterSpacing,v$z=v$R.leading,v$i=v$R.lineHeight,v$q=v$R._widthAuto()||!v$R.wordWrap,v$E=v$q?999999:v$n.width,v$m=(v$n.height,0),v$b=v$R.italic?v$R.fontSize/3:0,v$P=2-v$R._getAlign(),v$A=v$R._getValign(),v$T=0!==v$A||0!=v$P||0!=v$i,v$K=0,v$Y=0,v$W=0,v$k=0,v$N=new Array,v$_=v$N[0]=new v$j,v$$=!1,v$M=!1;v$_.h=0,v$R.italic&&(v$E-=v$R.fontSize/3);var v$Z=0,v$u=!0;function v$c(){v$_.y=v$Y,v$Y+=v$_.h+v$z,0==v$_.h&&(v$Y+=v$i),v$_.mWidth=v$Z,v$Z=0,v$_=new v$j,v$N.push(v$_),v$_.h=0,v$$=!(v$u=!(v$K=0))}for(v$V=0;v$V<v$y;v$V++)if(null!=(v$U=v$a[v$V]))if(v$u=!1,v$U instanceof laya.html.dom.HTMLBrElement)v$c(),v$_.y=v$Y;else{if(v$U._isChar()){if((v$p=v$U).isWord)v$$=v$M||"\n"===v$p.char,v$_.wordStartIndex=v$_.elements.length;else{if(0<v$N.length&&v$E<v$K+v$W&&0<v$_.wordStartIndex){var v$H;v$H=v$_.elements.length-v$_.wordStartIndex+1,v$_.elements.length=v$_.wordStartIndex,v$V-=v$H,v$c();continue}v$$=!1,v$Z+=v$p.width}v$W=v$p.width+v$X,v$k=v$p.height,v$M=!1,(v$$=v$$||v$E<v$K+v$W)&&v$c(),v$_.minTextHeight=Math.min(v$_.minTextHeight,v$U.height)}else v$x=v$U._getCSSStyle(),v$Q=v$U,v$D=v$x.padding,0===v$x._getCssFloat()||(v$T=!0),v$$=v$M||v$x.lineElement,v$W=v$Q.width*v$Q._style._tf.scaleX+v$D[1]+v$D[3]+v$X,v$k=v$Q.height*v$Q._style._tf.scaleY+v$D[0]+v$D[2],v$M=v$x.lineElement,(v$$=v$$||v$E<v$K+v$W&&v$x.wordWrap)&&v$c();v$_.elements.push(v$U),v$_.h=Math.max(v$_.h,v$k),v$U.x=v$K,v$U.y=v$Y,v$K+=v$W,v$_.w=v$K-v$X,v$_.y=v$Y,v$m=Math.max(v$K+v$b,v$m)}else v$u||(v$K+=v$v.DIV_ELEMENT_PADDING),v$_.wordStartIndex=v$_.elements.length;if(v$Y=v$_.y+v$_.h,v$T){var v$G=0,v$I=v$E;for(v$V=0,v$y=v$N.length;v$V<v$y;v$V++)v$N[v$V].updatePos(0,v$I,v$V,v$G,v$P,v$A,v$i),v$G+=Math.max(v$i,v$N[v$V].h+v$z);v$Y=v$G}for(v$q&&(v$n.width=v$m),v$Y>v$n.height&&(v$n.height=v$Y),v$V=0,v$y=v$N.length;v$V<v$y;v$V++)v$N[v$V].revertOrder(v$E);return[v$m,v$Y]},v$v._will=null,v$v.DIV_ELEMENT_PADDING=0,v$v}(),v$j=function(){function v$n(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}v$Q(v$n,"laya.html.utils.LayoutLine");var v$a=v$n.prototype;return v$a.updatePos=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){var v$V,v$y=0;0<this.elements.length&&(v$y=(v$V=this.elements[this.elements.length-1]).x+v$V.width-this.elements[0].x);var v$R=0,v$X=NaN;1===v$D&&(v$R=(v$a-v$y)/2),2===v$D&&(v$R=v$a-v$y),0===v$Q||0!=v$p||(v$p=1);for(var v$z=0,v$i=this.elements.length;v$z<v$i;v$z++){var v$q=(v$V=this.elements[v$z])._getCSSStyle();switch(0!==v$R&&(v$V.x+=v$R),v$q._getValign()){case 0:v$V.y=v$x;break;case 1:var v$E=0;99999!=this.minTextHeight&&(v$E=this.minTextHeight);var v$m=(v$E+v$Q)/2;v$m=Math.max(v$m,this.h),v$X=(laya.html.dom.HTMLImageElement,v$x+v$m-v$V.height),v$V.y=v$X;break;case 2:v$V.y=v$x+(v$Q-v$V.height)}}},v$a.revertOrder=function(v$n){var v$a;if(0<this.elements.length){var v$U,v$x=0;for(v$U=this.elements.length,v$x=0;v$x<v$U;v$x++)(v$a=this.elements[v$x]).x=v$n-v$a.x-v$a.width}},v$n}(),v$Y=function(v$U){function v$a(){this.URI=null,this._href=null,v$a.__super.call(this),this._text=v$a._EMPTYTEXT,this.setStyle(new v$y(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}v$Q(v$a,"laya.html.dom.HTMLElement",v$U);var v$n=v$a.prototype;return v$n.layaoutCallNative=function(){var v$n=0;if(this._childs&&0<(v$n=this._childs.length))for(var v$a=0;v$a<v$n;v$a++)this._childs[v$a].layaoutCallNative&&this._childs[v$a].layaoutCallNative();var v$U=this._getWords();v$U?laya.html.dom.HTMLElement.fillWords(this,v$U,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},v$n.appendChild=function(v$n){return this.addChild(v$n)},v$n._getWords2=function(){var v$n=this._text.text;if(!v$n||0===v$n.length)return null;var v$a,v$U,v$x=0,v$D=0;if(this._text.drawWords)v$U=this._text.drawWords;else{for(v$D=(v$a=v$n.split(" ")).length-1,v$U=[],v$x=0;v$x<v$D;v$x++)v$U.push(v$a[v$x]," ");0<=v$D&&v$U.push(v$a[v$D]),this._text.drawWords=v$U}var v$p,v$Q=this._text.words;if(v$Q&&v$Q.length===v$U.length)return v$Q;null===v$Q&&(this._text.words=v$Q=[]),v$Q.length=v$U.length;var v$V=this.style,v$y=v$V.font;for(v$x=0,v$D=v$U.length;v$x<v$D;v$x++){v$p=v$A.measureText(v$U[v$x],v$y);var v$R=v$Q[v$x]=new v$z(v$U[v$x],v$p.width,v$p.height||v$V.fontSize,v$V);if(1<v$R.char.length&&(v$R.charNum=v$R.char),this.href){var v$X=new v$q;this.addChild(v$X),v$R.setSprite(v$X)}}return v$Q},v$n._getWords=function(){if(!v$l.CharacterCache)return this._getWords2();var v$n=this._text.text;if(!v$n||0===v$n.length)return null;var v$a,v$U=this._text.words;if(v$U&&v$U.length===v$n.length)return v$U;null===v$U&&(this._text.words=v$U=[]),v$U.length=v$n.length;for(var v$x=this.style,v$D=v$x.font,v$p=0,v$Q=v$n.length;v$p<v$Q;v$p++)if(v$a=v$A.measureText(v$n.charAt(v$p),v$D)){var v$V=v$U[v$p]=new v$z(v$n.charAt(v$p),v$a.width,v$a.height||v$x.fontSize,v$x);if(this.href){var v$y=new v$q;this.addChild(v$y),v$V.setSprite(v$y)}}else console.warn("_getWords size is null"+v$n.charAt(v$p),v$D);return v$U},v$n.showLinkSprite=function(){var v$n=this._text.words;if(v$n)for(var v$a,v$U,v$x=[],v$D=0;v$D<v$n.length;v$D++)v$U=v$n[v$D],(v$a=new v$q).graphics.drawRect(0,0,v$U.width,v$U.height,"#ff0000"),v$a.width=v$U.width,v$a.height=v$U.height,this.addChild(v$a),v$x.push(v$a)},v$n._layoutLater=function(){var v$n=this.style;512&v$n._type||(v$n.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&v$n.block?(v$K.later(this),v$n._type|=512):this.parent&&this.parent._layoutLater())},v$n._setAttributes=function(v$n,v$a){switch(v$n){case"style":return void this.style.cssText(v$a);case"class":return void(this.className=v$a)}v$U.prototype._setAttributes.call(this,v$n,v$a)},v$n.updateHref=function(){if(null!=this._href){var v$n=this._getWords();if(v$n)for(var v$a,v$U,v$x=0;v$x<v$n.length;v$x++)(v$U=(v$a=v$n[v$x]).getSprite())&&(v$U.size(v$a.width,v$a.height),v$U.on("click",this,this.onLinkHandler))}},v$n.onLinkHandler=function(v$n){switch(v$n.type){case"click":for(var v$a=this;v$a;)v$a.event("link",[this.href]),v$a=v$a.parent}},v$n.formatURL=function(v$n){return this.URI?v$P.formatURL(v$n,this.URI?this.URI.path:null):v$n},v$V(0,v$n,"href",function(){return this._href},function(v$n){null!=(this._href=v$n)&&(this._getCSSStyle().underLine=1,this.updateHref())}),v$V(0,v$n,"color",null,function(v$n){this.style.color=v$n}),v$V(0,v$n,"onClick",null,function(v$n){v$x._runScript("fn=function(event){"+v$n+";}"),this.on("click",this,void 0)}),v$V(0,v$n,"id",null,function(v$n){v$W.document.setElementById(v$n,this)}),v$V(0,v$n,"innerTEXT",function(){return this._text.text},function(v$n){this.text=v$n}),v$V(0,v$n,"style",function(){return this._style}),v$V(0,v$n,"text",function(){return this._text.text},function(v$n){this._text==v$a._EMPTYTEXT?this._text={text:v$n,words:null}:(this._text.text=v$n,this._text.words&&(this._text.words.length=0)),v$i.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),v$V(0,v$n,"parent",v$U.prototype._$get_parent,function(v$n){if(v$n instanceof laya.html.dom.HTMLElement){var v$a=v$n;this.URI||(this.URI=v$a.URI),this.style.inherit(v$a.style)}v$x.superSet(v$q,this,"parent",v$n)}),v$V(0,v$n,"className",null,function(v$n){this.style.attrs(v$W.document.styleSheets["."+v$n])}),v$a.fillWords=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){v$n.graphics.clear();for(var v$V=0,v$y=v$a.length;v$V<v$y;v$V++){var v$R=v$a[v$V];v$n.graphics.fillText(v$R.char,v$R.x+v$U,v$R.y+v$x,v$D,v$p,"left",v$Q)}},v$a._EMPTYTEXT={text:null,words:null},v$a}(v$q),v$a=(function(v$n){function v$a(){v$a.__super.call(this),this.style.lineElement=!0,this.style.block=!0}v$Q(v$a,"laya.html.dom.HTMLBrElement",v$Y)}(),function(v$n){function v$a(){this.contextHeight=NaN,this.contextWidth=NaN,v$a.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}v$Q(v$a,"laya.html.dom.HTMLDivElement",v$n);var v$U=v$a.prototype;return v$U.appendHTML=function(v$n){v$T.parse(this,v$n,this.URI),this.layout()},v$U._addChildsToLayout=function(v$a){var v$n=this._getWords();if(null==v$n&&0==this._childs.length)return!1;v$n&&v$n.forEach(function(v$n){v$a.push(v$n)});for(var v$U=!0,v$x=0,v$D=this._childs.length;v$x<v$D;v$x++){var v$p=this._childs[v$x];v$U?v$U=!1:v$a.push(null),v$p._addToLayout(v$a)}return!0},v$U._addToLayout=function(v$n){this.layout()},v$U.layout=function(){if(this.style){this.style._type|=512;var v$n=v$K.layout(this);if(v$n){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new v$X);var v$a=this._$P.mHtmlBounds;v$a.x=v$a.y=0,v$a.width=this.contextWidth=v$n[0],v$a.height=this.contextHeight=v$n[1],this.setBounds(v$a)}}},v$V(0,v$U,"height",function(){return this._height?this._height:this.contextHeight},v$n.prototype._$set_height),v$V(0,v$U,"innerHTML",null,function(v$n){this.destroyChildren(),this.appendHTML(v$n)}),v$V(0,v$U,"width",function(){return this._width?this._width:this.contextWidth},function(v$n){var v$a=!1;v$a=0===v$n?v$n!=this._width:v$n!=this.width,v$x.superSet(v$Y,this,"width",v$n),v$a&&this.layout()}),v$a}(v$Y)),v$W=function(v$n){function v$a(){this.all=new Array,this.styleSheets=v$y.styleSheets,v$a.__super.call(this)}v$Q(v$a,"laya.html.dom.HTMLDocument",v$Y);var v$U=v$a.prototype;return v$U.getElementById=function(v$n){return this.all[v$n]},v$U.setElementById=function(v$n,v$a){this.all[v$n]=v$a},v$D(v$a,["document",function(){return this.document=new v$a}]),v$a}();(function(v$n){function v$a(){this._tex=null,this._url=null,this._renderArgs=[],v$a.__super.call(this),this.style.block=!0}v$Q(v$a,"laya.html.dom.HTMLImageElement",v$Y);var v$U=v$a.prototype;v$U._addToLayout=function(v$n){!this._style.absolute&&v$n.push(this)},v$U.render=function(v$n,v$a,v$U){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(v$m.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,v$n.ctx.drawTexture2(v$a,v$U,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},v$U.layaoutCallNative=function(){var v$n=0;if(this._childs&&0<(v$n=this._childs.length))for(var v$a=0;v$a<v$n;v$a++)this._childs[v$a].layaoutCallNative&&this._childs[v$a].layaoutCallNative()},v$V(0,v$U,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(v$n){this._width!==v$n&&(this._width=v$n,this._style.width=v$n,this.repaint())}),v$V(0,v$U,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(v$n){this._height!==v$n&&(this._height=v$n,this._style.height=v$n,this.repaint())}),v$U.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),v$R.clearCache(this,this._url),this._tex=null),v$Y.prototype.destroy.call(this)},v$U.onloaded=function(){var v$n=this._style;v$n&&!v$n.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),v$n&&!v$n.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),v$i.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},v$U._loadImageComplete=function(v$n,v$a,v$U){if(!this._destroyed)if(null!=v$U)if(v$U instanceof ArrayBuffer){var v$x=new DataView(v$U);new laya.webgl.resource.WebGLImage(new Uint8Array(v$U,8),v$n,0,!1,v$x.getUint32(0),v$x.getUint32(4));this.onloaded()}else if(v$U instanceof v$b)v$R.imgMgrSet[v$n]=v$a,v$p.imgMgrLock(v$n,v$R.imgMgrSet[v$n]),this._url=v$n,this._tex=v$U,v$R.keepCache(this,v$n),v$R.cacheRes(v$n,this._tex),this.onloaded();else{var v$D=-1!=v$n.indexOf(".png",v$n.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(v$U,v$n,v$D,!1,v$U.width,v$U.height);this.onloaded()}else this.event("error","Load image failed")},v$V(0,v$U,"src",null,function(v$n){(v$n=this.formatURL(v$n),this._url!=v$n)&&(null!=this._tex&&(v$R.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=v$n,(this._tex=v$R.getRes(v$n))?(v$R.keepCache(this,v$n),this.onloaded()):v$p.imgMgrLoad(v$n,this._loadImageComplete.bind(this),2,!1))})})(),function(v$n){function v$a(){this.type=null,v$a.__super.call(this),this.visible=!1}v$Q(v$a,"laya.html.dom.HTMLLinkElement",v$n);var v$U=v$a.prototype;v$U._onload=function(v$n){switch(this.type){case"text/css":v$y.parseCSS(v$n,this.URI)}},v$V(0,v$U,"href",v$n.prototype._$get_href,function(v$n){var v$a=this;v$n=this.formatURL(v$n),this.URI=new v$P(v$n);var v$U=new v$R;v$U.once("complete",null,function(v$n){v$a._onload(v$n)}),v$U.load(v$n,"text")}),v$a._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(v$Y),function(v$n){function v$a(){v$a.__super.call(this),this.visible=!1}v$Q(v$a,"laya.html.dom.HTMLStyleElement",v$n),v$V(0,v$a.prototype,"text",v$n.prototype._$get_text,function(v$n){v$y.parseCSS(v$n,null)})}(v$Y),function(v$n){function v$a(){v$a.__super.call(this),this._getCSSStyle().valign="middle"}v$Q(v$a,"laya.html.dom.HTMLIframeElement",v$n),v$V(0,v$a.prototype,"href",v$n.prototype._$get_href,function(v$U){var v$x=this;v$U=this.formatURL(v$U);var v$n=new v$R;v$n.once("complete",null,function(v$n){var v$a=v$x.URI;v$x.URI=new v$P(v$U),v$x.innerHTML=v$n,!v$a||(v$x.URI=v$a)}),v$n.load(v$U,"text")})}(v$a)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(v$n,v$a){"use strict";for(var v$U in Object.defineProperty(v$a,"__esModule",{value:!0}),Laya){var v$x=Laya[v$U];v$x&&v$x.__isclass&&(v$a[v$U]=v$x)}}),function(v$D,v$n,v$m){v$m.un,v$m.uns;var v$x=v$m.static,v$p=v$m.class,v$Q=v$m.getset,v$U=(v$m.__newvec,laya.display.Animation),v$b=(laya.utils.Browser,laya.utils.ClassUtils),v$V=laya.filters.ColorFilter,v$y=laya.utils.Ease,v$R=laya.events.Event,v$X=(laya.events.EventDispatcher,laya.display.css.Font),v$z=laya.display.FrameAnimation,v$a=laya.display.Graphics,v$i=laya.utils.Handler,v$q=laya.display.Input,v$A=laya.net.Loader,v$E=(laya.display.Node,laya.maths.Point),v$P=laya.maths.Rectangle,v$T=laya.renders.Render,v$K=laya.display.Sprite,v$Y=laya.display.Text,v$W=laya.resource.Texture,v$k=laya.utils.Tween,v$N=laya.utils.Utils,v$_=laya.utils.WeakObject;v$m.interface("laya.ui.IItem"),v$m.interface("laya.ui.ISelect"),v$m.interface("laya.ui.IRender"),v$m.interface("laya.ui.IComponent"),v$m.interface("laya.ui.IBox","IComponent");var v$$=function(){function v$n(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return v$p(v$n,"laya.ui.LayoutStyle"),v$x(v$n,["EMPTY",function(){return this.EMPTY=new v$n}]),v$n}(),v$M=function(){function v$n(){}return v$p(v$n,"laya.ui.Styles"),v$n.labelColor="#000000",v$n.buttonStateNum=3,v$n.scrollBarMinNum=15,v$n.scrollBarDelayTime=500,v$x(v$n,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),v$n}(),v$Z=function(){function v$D(){}return v$p(v$D,"laya.ui.UIUtils"),v$D.fillArray=function(v$n,v$a,v$U){var v$x=v$n.concat();if(v$a)for(var v$D=v$a.split(","),v$p=0,v$Q=Math.min(v$x.length,v$D.length);v$p<v$Q;v$p++){var v$V=v$D[v$p];v$x[v$p]="true"==v$V||"false"!=v$V&&v$V,null!=v$U&&(v$x[v$p]=v$U(v$V))}return v$x},v$D.toColor=function(v$n){return v$N.toHexColor(v$n)},v$D.gray=function(v$n,v$a){void 0===v$a&&(v$a=!0),v$a?v$D.addFilter(v$n,v$D.grayFilter):v$D.clearFilter(v$n,v$V)},v$D.addFilter=function(v$n,v$a){var v$U=v$n.filters||[];v$U.push(v$a),v$n.filters=v$U},v$D.clearFilter=function(v$n,v$a){var v$U=v$n.filters;if(null!=v$U&&0<v$U.length){for(var v$x=v$U.length-1;-1<v$x;v$x--){var v$D=v$U[v$x];v$m.__typeof(v$D,v$a)&&v$U.splice(v$x,1)}v$n.filters=v$U}},v$D._getReplaceStr=function(v$n){return v$D.escapeSequence[v$n]},v$D.adptString=function(v$n){return v$n.replace(/\\(\w)/g,v$D._getReplaceStr)},v$D.getBindFun=function(v$n){var v$a=v$D._funMap.get(v$n);if(null==v$a){var v$U='"'+v$n+'"',v$x="(function(data){if(data==null)return;with(data){try{\nreturn "+(v$U=v$U.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";v$a=v$m._runScript(v$x),v$D._funMap.set(v$n,v$a)}return v$a},v$x(v$D,["grayFilter",function(){return this.grayFilter=new v$V([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new v$_}]),v$D}(),v$u=function(){function v$n(){}return v$p(v$n,"UIConfig"),v$n.touchScrollEnable=!0,v$n.mouseWheelEnable=!0,v$n.showButtons=!0,v$n.popupBgColor="#000000",v$n.popupBgAlpha=.5,v$n.closeDialogOnSide=!0,v$n}(),v$c=function(v$U){function v$P(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,v$P.__super.call(this),this._weakKeys=[]}v$p(v$P,"laya.ui.AutoBitmap",v$U);var v$n=v$P.prototype;return v$n.destroy=function(){if(v$A.clearObject(this,this._weakKey),this._weakKeys){for(var v$n=0,v$a=this._weakKeys.length;v$n<v$a;++v$n)v$A.clearObject(this,this._weakKeys[v$n]);this._weakKeys=null}v$U.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},v$n._setChanged=function(){this._isChanged||(this._isChanged=!0,v$m.timer.callLater(this,this.changeSource))},v$n.changeSource=function(){this._isChanged=!1;var v$n=this._source;if(v$n&&v$n.bitmap){var v$a=this.width,v$U=this.height,v$x=this._sizeGrid,v$D=v$n.sourceWidth,v$p=v$n.sourceHeight;if(!v$x||v$D===v$a&&v$p===v$U)this.cleanByTexture(v$n,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,v$a,v$U);else{v$A.clearObject(this,this._weakKey),v$n.$_GID||(v$n.$_GID=v$N.getGID());var v$Q=v$n.$_GID+"."+v$a+"."+v$U+"."+v$x.join("."),v$V=v$A.findObject(v$Q);if(v$N.isOKCmdList(v$V))return this._weakKey=v$Q,v$A.keepObject(this,this._weakKey),void(this.cmds=v$V);this.clear();var v$y,v$R,v$X=v$x[0],v$z=v$x[1],v$i=v$x[2],v$q=v$x[3],v$E=v$x[4],v$m=!1;if(v$a==v$D&&(v$q=v$z=0),v$U==v$p&&(v$X=v$i=0),v$a<v$q+v$z){var v$b=v$a;v$m=!0,v$a=v$q+v$z,this.save(),this.clipRect(0,0,v$b,v$U)}v$q&&v$X&&(v$y=v$P.getTexture(v$n,0,0,v$q,v$X),v$R=this._weakKeys[0],v$y?(v$R!=v$y.weakKey&&(v$A.clearObject(this,v$R),v$A.keepObject(this,v$y.weakKey),this._weakKeys[0]=v$y.weakKey),this.drawTexture(v$y,0,0,v$q,v$X)):(v$A.clearObject(this,v$R),this._weakKeys[0]="")),v$z&&v$X&&(v$y=v$P.getTexture(v$n,v$D-v$z,0,v$z,v$X),v$R=this._weakKeys[1],v$y?(v$R!=v$y.weakKey&&(v$A.clearObject(this,v$R),v$A.keepObject(this,v$y.weakKey),this._weakKeys[1]=v$y.weakKey),this.drawTexture(v$y,v$a-v$z,0,v$z,v$X)):(v$A.clearObject(this,v$R),this._weakKeys[1]="")),v$q&&v$i&&(v$y=v$P.getTexture(v$n,0,v$p-v$i,v$q,v$i),v$R=this._weakKeys[2],v$y?(v$R!=v$y.weakKey&&(v$A.clearObject(this,v$R),v$A.keepObject(this,v$y.weakKey),this._weakKeys[2]=v$y.weakKey),this.drawTexture(v$y,0,v$U-v$i,v$q,v$i)):(v$A.clearObject(this,v$R),this._weakKeys[2]="")),v$z&&v$i&&(v$y=v$P.getTexture(v$n,v$D-v$z,v$p-v$i,v$z,v$i),v$R=this._weakKeys[3],v$y?(v$R!=v$y.weakKey&&(v$A.clearObject(this,v$R),v$A.keepObject(this,v$y.weakKey),this._weakKeys[3]=v$y.weakKey),this.drawTexture(v$y,v$a-v$z,v$U-v$i,v$z,v$i)):(v$A.clearObject(this,v$R),this._weakKeys[3]="")),v$X&&(v$y=v$P.getTexture(v$n,v$q,0,v$D-v$q-v$z,v$X),v$R=this._weakKeys[4],v$y?(v$R!=v$y.weakKey&&(v$A.clearObject(this,v$R),v$A.keepObject(this,v$y.weakKey),this._weakKeys[4]=v$y.weakKey),this.drawBitmap(v$E,v$y,v$q,0,v$a-v$q-v$z,v$X)):(v$A.clearObject(this,v$R),this._weakKeys[4]="")),v$i&&(v$y=v$P.getTexture(v$n,v$q,v$p-v$i,v$D-v$q-v$z,v$i),v$R=this._weakKeys[5],v$y?(v$R!=v$y.weakKey&&(v$A.clearObject(this,v$R),v$A.keepObject(this,v$y.weakKey),this._weakKeys[5]=v$y.weakKey),this.drawBitmap(v$E,v$y,v$q,v$U-v$i,v$a-v$q-v$z,v$i)):(v$A.clearObject(this,v$R),this._weakKeys[5]="")),v$q&&(v$y=v$P.getTexture(v$n,0,v$X,v$q,v$p-v$X-v$i),v$R=this._weakKeys[6],v$y?(v$R!=v$y.weakKey&&(v$A.clearObject(this,v$R),v$A.keepObject(this,v$y.weakKey),this._weakKeys[6]=v$y.weakKey),this.drawBitmap(v$E,v$y,0,v$X,v$q,v$U-v$X-v$i)):(v$A.clearObject(this,v$R),this._weakKeys[6]="")),v$z&&(v$y=v$P.getTexture(v$n,v$D-v$z,v$X,v$z,v$p-v$X-v$i),v$R=this._weakKeys[7],v$y?(v$R!=v$y.weakKey&&(v$A.clearObject(this,v$R),v$A.keepObject(this,v$y.weakKey),this._weakKeys[7]=v$y.weakKey),this.drawBitmap(v$E,v$y,v$a-v$z,v$X,v$z,v$U-v$X-v$i)):(v$A.clearObject(this,v$R),this._weakKeys[7]="")),v$y=v$P.getTexture(v$n,v$q,v$X,v$D-v$q-v$z,v$p-v$X-v$i),v$R=this._weakKeys[8],v$y?(v$R!=v$y.weakKey&&(v$A.clearObject(this,v$R),v$A.keepObject(this,v$y.weakKey),this._weakKeys[8]=v$y.weakKey),this.drawBitmap(v$E,v$y,v$q,v$X,v$a-v$q-v$z,v$U-v$X-v$i)):(v$A.clearObject(this,v$R),this._weakKeys[8]=""),v$m&&this.restore(),this.autoCacheCmd&&!v$T.isConchApp&&(v$A.saveObject(v$Q,this.cmds,null),this._weakKey=v$Q,v$A.keepObject(this,this._weakKey))}this._repaint()}},v$n.drawBitmap=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$D&&(v$D=0),void 0===v$p&&(v$p=0),v$D<.1||v$p<.1||(!v$n||v$a.width==v$D&&v$a.height==v$p?this.drawTexture(v$a,v$U,v$x,v$D,v$p):this.fillTexture(v$a,v$U,v$x,v$D,v$p))},v$n.clear=function(v$n){void 0===v$n&&(v$n=!0),v$U.prototype.clear.call(this,!1)},v$Q(0,v$n,"sizeGrid",function(){return this._sizeGrid},function(v$n){this._sizeGrid=v$n,this._setChanged()}),v$Q(0,v$n,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(v$n){this._width!=v$n&&(this._width=v$n,this._setChanged())}),v$Q(0,v$n,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(v$n){this._height!=v$n&&(this._height=v$n,this._setChanged())}),v$Q(0,v$n,"source",function(){return this._source},function(v$n){v$n?(this._source=v$n,this._setChanged()):(this._source=null,this.clear())}),v$P.getTexture=function(v$n,v$a,v$U,v$x,v$D){v$x<=0&&(v$x=1),v$D<=0&&(v$D=1),v$n.$_GID||(v$n.$_GID=v$N.getGID());var v$p=v$n.$_GID+"."+v$a+"."+v$U+"."+v$x+"."+v$D,v$Q=v$A.findObject(v$p);if((!v$Q||!v$Q.source)&&(v$Q=v$W.createFromTexture(v$n,v$a,v$U,v$x,v$D))){if(v$n.alphaTexture){var v$V=v$n.width/v$n.alphaTexture.width;v$Q.alphaTexture=v$W.createFromTexture(v$n.alphaTexture,v$a/v$V,v$U/v$V,v$x/v$V,v$D/v$V)}v$A.saveObject(v$p,v$Q),v$Q.weakKey=v$p}return v$Q},v$P}(v$a),v$H=(function(v$n){function v$a(){v$a.__super.call(this)}v$p(v$a,"laya.ui.UIEvent",v$R),v$a.SHOW_TIP="showtip",v$a.HIDE_TIP="hidetip"}(),function(v$a){function v$n(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,v$n.__super.call(this),this._layout=v$$.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}v$p(v$n,"laya.ui.Component",v$a);var v$U=v$n.prototype;return v$m.imps(v$U,{"laya.ui.IComponent":!0}),v$U.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},v$U.preinitialize=function(){},v$U.createChildren=function(){},v$U.initialize=function(){},v$U.callLater=function(v$n,v$a){v$m.timer.callLater(this,v$n,v$a)},v$U.runCallLater=function(v$n){v$m.timer.runCallLater(this,v$n)},v$U.commitMeasure=function(){},v$U.changeSize=function(){this.event("resize")},v$U.getLayout=function(){return this._layout===v$$.EMPTY&&(this._layout=new v$$),this._layout},v$U._setLayoutEnabled=function(v$n){this._layout&&this._layout.enable!=v$n&&(this._layout.enable=v$n,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},v$U.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},v$U.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},v$U.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},v$U.resetLayoutX=function(){var v$n=this._layout;if(isNaN(v$n.anchorX)||(this.pivotX=v$n.anchorX*this.width),this.layoutEnabled){var v$a=this.parent;v$a&&(isNaN(v$n.centerX)?isNaN(v$n.left)?isNaN(v$n.right)||(this.x=Math.round(v$a.width-this.displayWidth-v$n.right+this.pivotX*this.scaleX)):(this.x=Math.round(v$n.left+this.pivotX*this.scaleX),isNaN(v$n.right)||(this.width=(v$a._width-v$n.left-v$n.right)/(this.scaleX||.01))):this.x=Math.round(.5*(v$a.width-this.displayWidth)+v$n.centerX+this.pivotX*this.scaleX))}},v$U.resetLayoutY=function(){var v$n=this._layout;if(isNaN(v$n.anchorY)||(this.pivotY=v$n.anchorY*this.height),this.layoutEnabled){var v$a=this.parent;v$a&&(isNaN(v$n.centerY)?isNaN(v$n.top)?isNaN(v$n.bottom)||(this.y=Math.round(v$a.height-this.displayHeight-v$n.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(v$n.top+this.pivotY*this.scaleY),isNaN(v$n.bottom)||(this.height=(v$a._height-v$n.top-v$n.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(v$a.height-this.displayHeight)+v$n.centerY+this.pivotY*this.scaleY))}},v$U.onMouseOver=function(v$n){v$m.stage.event("showtip",this._toolTip)},v$U.onMouseOut=function(v$n){v$m.stage.event("hidetip",this._toolTip)},v$Q(0,v$U,"displayWidth",function(){return this.width*this.scaleX}),v$Q(0,v$U,"width",function(){return this._width?this._width:this.measureWidth},function(v$n){this._width!=v$n&&(this._width=v$n,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),v$Q(0,v$U,"measureWidth",function(){var v$n=0;this.commitMeasure();for(var v$a=this.numChildren-1;-1<v$a;v$a--){var v$U=this.getChildAt(v$a);v$U.visible&&(v$n=Math.max(v$U.x+v$U.width*v$U.scaleX,v$n))}return v$n}),v$Q(0,v$U,"displayHeight",function(){return this.height*this.scaleY}),v$Q(0,v$U,"height",function(){return this._height?this._height:this.measureHeight},function(v$n){this._height!=v$n&&(this._height=v$n,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),v$Q(0,v$U,"dataSource",function(){return this._dataSource},function(v$n){for(var v$a in this._dataSource=v$n,this._dataSource)this.hasOwnProperty(v$a)&&"function"!=typeof this[v$a]&&(this[v$a]=this._dataSource[v$a])}),v$Q(0,v$U,"scaleY",v$a.prototype._$get_scaleY,function(v$n){v$m.superGet(v$K,this,"scaleY")!=v$n&&(v$m.superSet(v$K,this,"scaleY",v$n),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),v$Q(0,v$U,"measureHeight",function(){var v$n=0;this.commitMeasure();for(var v$a=this.numChildren-1;-1<v$a;v$a--){var v$U=this.getChildAt(v$a);v$U.visible&&(v$n=Math.max(v$U.y+v$U.height*v$U.scaleY,v$n))}return v$n}),v$Q(0,v$U,"scaleX",v$a.prototype._$get_scaleX,function(v$n){v$m.superGet(v$K,this,"scaleX")!=v$n&&(v$m.superSet(v$K,this,"scaleX",v$n),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),v$Q(0,v$U,"top",function(){return this._layout.top},function(v$n){v$n!=this._layout.top&&(this.getLayout().top=v$n,this._setLayoutEnabled(!0)),this.resetLayoutY()}),v$Q(0,v$U,"bottom",function(){return this._layout.bottom},function(v$n){v$n!=this._layout.bottom&&(this.getLayout().bottom=v$n,this._setLayoutEnabled(!0)),this.resetLayoutY()}),v$Q(0,v$U,"left",function(){return this._layout.left},function(v$n){v$n!=this._layout.left&&(this.getLayout().left=v$n,this._setLayoutEnabled(!0)),this.resetLayoutX()}),v$Q(0,v$U,"right",function(){return this._layout.right},function(v$n){v$n!=this._layout.right&&(this.getLayout().right=v$n,this._setLayoutEnabled(!0)),this.resetLayoutX()}),v$Q(0,v$U,"centerX",function(){return this._layout.centerX},function(v$n){v$n!=this._layout.centerX&&(this.getLayout().centerX=v$n,this._setLayoutEnabled(!0)),this.resetLayoutX()}),v$Q(0,v$U,"centerY",function(){return this._layout.centerY},function(v$n){v$n!=this._layout.centerY&&(this.getLayout().centerY=v$n,this._setLayoutEnabled(!0)),this.resetLayoutY()}),v$Q(0,v$U,"anchorX",function(){return this._layout.anchorX},function(v$n){v$n!=this._layout.anchorX&&(this.getLayout().anchorX=v$n,this._setLayoutEnabled(!0)),this.resetLayoutX()}),v$Q(0,v$U,"anchorY",function(){return this._layout.anchorY},function(v$n){v$n!=this._layout.anchorY&&(this.getLayout().anchorY=v$n,this._setLayoutEnabled(!0)),this.resetLayoutY()}),v$Q(0,v$U,"tag",function(){return this._tag},function(v$n){this._tag=v$n}),v$Q(0,v$U,"toolTip",function(){return this._toolTip},function(v$n){this._toolTip!=v$n&&(null!=(this._toolTip=v$n)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),v$Q(0,v$U,"comXml",function(){return this._comXml},function(v$n){this._comXml=v$n}),v$Q(0,v$U,"gray",function(){return this._gray},function(v$n){v$n!==this._gray&&(this._gray=v$n,v$Z.gray(this,v$n))}),v$Q(0,v$U,"disabled",function(){return this._disabled},function(v$n){v$n!==this._disabled&&(this.gray=this._disabled=v$n,this.mouseEnabled=!v$n)}),v$n}(v$K)),v$G=function(v$n){function v$a(){this.lockLayer=null,this.popupEffect=function(v$n){v$n.scale(1,1),v$k.from(v$n,{x:v$m.stage.width/2,y:v$m.stage.height/2,scaleX:0,scaleY:0},300,v$y.backOut,v$i.create(this,this.doOpen,[v$n]))},this.closeEffect=function(v$n,v$a){v$k.to(v$n,{x:v$m.stage.width/2,y:v$m.stage.height/2,scaleX:0,scaleY:0},300,v$y.strongOut,v$i.create(this,this.doClose,[v$n,v$a]))},v$a.__super.call(this),this.maskLayer=new v$K,this.popupEffectHandler=v$i.create(this,this.popupEffect,null,!1),this.closeEffectHandler=v$i.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,v$m.stage.addChild(this),v$m.stage.on("resize",this,this._onResize),v$u.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}v$p(v$a,"laya.ui.DialogManager",v$K);var v$U=v$a.prototype;return v$U._closeOnSide=function(){var v$n=this.getChildAt(this.numChildren-1);v$n instanceof laya.ui.Dialog&&v$n.close("side")},v$U.setLockView=function(v$n){this.lockLayer||(this.lockLayer=new v$I,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(v$m.stage.width,v$m.stage.height)),this.lockLayer.removeChildren(),v$n&&(v$n.centerX=v$n.centerY=0,this.lockLayer.addChild(v$n))},v$U._onResize=function(v$n){var v$a=this.maskLayer.width=v$m.stage.width,v$U=this.maskLayer.height=v$m.stage.height;this.lockLayer&&this.lockLayer.size(v$a,v$U),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,v$a,v$U,v$u.popupBgColor),this.maskLayer.alpha=v$u.popupBgAlpha;for(var v$x=this.numChildren-1;-1<v$x;v$x--){var v$D=this.getChildAt(v$x);v$D.popupCenter&&this._centerDialog(v$D)}},v$U._centerDialog=function(v$n){v$n.x=Math.round((v$m.stage.width-v$n.width>>1)+v$n.pivotX),v$n.y=Math.round((v$m.stage.height-v$n.height>>1)+v$n.pivotY)},v$U.open=function(v$n,v$a,v$U){void 0===v$a&&(v$a=!1),void 0===v$U&&(v$U=!1),v$a&&this._closeAll(),v$n.popupCenter&&this._centerDialog(v$n),this.addChild(v$n),(v$n.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),v$U&&null!=v$n.popupEffect?v$n.popupEffect.runWith(v$n):this.doOpen(v$n),this.event("open")},v$U.doOpen=function(v$n){v$n.onOpened()},v$U.lock=function(v$n){this.lockLayer&&(v$n?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},v$U.close=function(v$n,v$a,v$U){void 0===v$U&&(v$U=!1),v$U&&null!=v$n.closeEffect?v$n.closeEffect.runWith([v$n,v$a]):this.doClose(v$n,v$a),this.event("close")},v$U.doClose=function(v$n,v$a){v$n.removeSelf(),v$n.isModal&&this._checkMask(),v$n.closeHandler&&v$n.closeHandler.runWith(v$a),v$n.onClosed(v$a)},v$U.closeAll=function(){this._closeAll(),this.event("close")},v$U._closeAll=function(){for(var v$n=this.numChildren-1;-1<v$n;v$n--){var v$a=this.getChildAt(v$n);v$a&&null!=v$a.close&&this.doClose(v$a)}},v$U.getDialogsByGroup=function(v$n){for(var v$a=[],v$U=this.numChildren-1;-1<v$U;v$U--){var v$x=this.getChildAt(v$U);v$x&&v$x.group===v$n&&v$a.push(v$x)}return v$a},v$U.closeByGroup=function(v$n){for(var v$a=[],v$U=this.numChildren-1;-1<v$U;v$U--){var v$x=this.getChildAt(v$U);v$x&&v$x.group===v$n&&(v$x.close(),v$a.push(v$x))}return v$a},v$U._checkMask=function(){this.maskLayer.removeSelf();for(var v$n=this.numChildren-1;-1<v$n;v$n--){var v$a=this.getChildAt(v$n);if(v$a&&v$a.isModal)return void this.addChildAt(this.maskLayer,v$n)}},v$a}(),v$I=function(v$n){function v$a(){v$a.__super.call(this)}v$p(v$a,"laya.ui.Box",v$n);var v$U=v$a.prototype;return v$m.imps(v$U,{"laya.ui.IBox":!0}),v$Q(0,v$U,"dataSource",v$n.prototype._$get_dataSource,function(v$n){for(var v$a in this._dataSource=v$n){var v$U=this.getChildByName(v$a);v$U?v$U.dataSource=v$n[v$a]:this.hasOwnProperty(v$a)&&"function"!=typeof this[v$a]&&(this[v$a]=v$n[v$a])}}),v$a}(v$H),v$v=function(v$a){function v$U(v$n,v$a){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,v$U.__super.call(this),this._labelColors=v$M.buttonLabelColors,this._stateNum=v$M.buttonStateNum,void 0===v$a&&(v$a=""),this.skin=v$n,this.label=v$a}v$p(v$U,"laya.ui.Button",v$a);var v$n=v$U.prototype;return v$m.imps(v$n,{"laya.ui.ISelect":!0}),v$n.destroy=function(v$n){this.clearEvent(),v$A.clearCache(this,this._skin),v$A.clearObject(this,this._weakKey),void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(v$n),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},v$n.clearEvent=function(){this._skin&&v$D.atalsNotify&&v$D.atalsNotify.off(this._skin,this,this._setBtnSource)},v$n.createChildren=function(){this.graphics=this._bitmap=new v$c},v$n.createText=function(){this._text||(this._text=new v$Y,this._text.overflow=v$Y.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},v$n.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},v$n.onMouse=function(v$n){if(!1!==this.toggle||!this._selected)return"click"===v$n.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=v$U.stateMap[v$n.type]))},v$n.changeClips=function(){var v$n=v$A.getRes(this._skin);if(v$n)if(this._skin&&""!=this._skin){v$A.clearObject(this,this._weakKey);var v$a=v$n.sourceWidth,v$U=v$n.sourceHeight/this._stateNum;v$n.$_GID||(v$n.$_GID=v$N.getGID());var v$x=v$n.$_GID+"-"+this._stateNum,v$D=v$A.findObject(v$x);if(v$N.isOkTextureList(v$D)||(v$D=null),v$D)this._weakKey=v$x,v$A.keepObject(this,this._weakKey),this._sources=v$D;else{if(this._sources=[],1===this._stateNum)this._sources.push(v$n);else for(var v$p=0;v$p<this._stateNum;v$p++){var v$Q=v$W.createFromTexture(v$n,0,v$U*v$p,v$a,v$U);if(v$n.alphaTexture){var v$V=v$n.width/v$n.alphaTexture.width;v$Q.alphaTexture=v$W.createFromTexture(v$n.alphaTexture,0/v$V,v$U*v$p/v$V,v$a/v$V,v$U/v$V)}this._sources.push(v$Q)}v$A.saveObject(v$x,this._sources),this._weakKey=v$x,v$A.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||v$a,this._bitmap.height=this._height||v$U,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=v$a)}else console.warn("lose skin ",this._skin,this.name,this.__className)},v$n.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var v$n=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[v$n]),this.label&&(this._text.color=this._labelColors[v$n],this._strokeColors&&(this._text.strokeColor=this._strokeColors[v$n]))},v$n._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},v$Q(0,v$n,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(v$n){this.createText(),this._text.strokeColor=v$n}),v$Q(0,v$n,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),v$Q(0,v$n,"skin",function(){return this._skin},function(v$n){if(this._skin!=v$n)if(this.clearEvent(),v$A.clearCache(this,this._skin),this._skin=v$n,v$A.keepCache(this,this._skin),v$A.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var v$a=v$D.resAtalsObj&&v$D.resAtalsObj[this._skin];v$a?(v$D.atalsNotify&&v$D.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=v$a.sourceW),0==this.height&&(this.height=v$a.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),v$n._setBtnSource=function(v$n,v$a){v$n===this._skin&&v$a&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},v$Q(0,v$n,"state",function(){return this._state},function(v$n){this._state!=v$n&&(this._state=v$n,this._setStateChanged())}),v$Q(0,v$n,"text",function(){return this.createText(),this._text}),v$Q(0,v$n,"stateNum",function(){return this._stateNum},function(v$n){"string"==typeof v$n&&(v$n=parseInt(v$n)),this._stateNum!=v$n&&(this._stateNum=v$n<1?1:3<v$n?3:v$n,this.callLater(this.changeClips))}),v$Q(0,v$n,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(v$n){this._strokeColors=v$Z.fillArray(v$M.buttonLabelColors,v$n,String),this._setStateChanged()}),v$Q(0,v$n,"labelColors",function(){return this._labelColors.join(",")},function(v$n){this._labelColors=v$Z.fillArray(v$M.buttonLabelColors,v$n,String),this._setStateChanged()}),v$Q(0,v$n,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),v$Q(0,v$n,"label",function(){return this._text?this._text.text:null},function(v$n){(this._text||v$n)&&(this.createText(),this._text.text!=v$n&&(v$n&&!this._text.parent&&this.addChild(this._text),this._text.text=(v$n+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),v$Q(0,v$n,"selected",function(){return this._selected},function(v$n){this._selected!=v$n&&(this._selected=v$n,this.state=this._selected?2:0,this.event("change"))}),v$Q(0,v$n,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(v$n){this.createText(),this._text.padding=v$Z.fillArray(v$M.labelPadding,v$n,Number)}),v$Q(0,v$n,"labelSize",function(){return this.createText(),this._text.fontSize},function(v$n){this.createText(),this._text.fontSize=v$n}),v$Q(0,v$n,"labelStroke",function(){return this.createText(),this._text.stroke},function(v$n){this.createText(),this._text.stroke=v$n}),v$Q(0,v$n,"labelBold",function(){return this.createText(),this._text.bold},function(v$n){this.createText(),this._text.bold=v$n}),v$Q(0,v$n,"labelFont",function(){return this.createText(),this._text.font},function(v$n){this.createText(),this._text.font=v$n}),v$Q(0,v$n,"labelAlign",function(){return this.createText(),this._text.align},function(v$n){this.createText(),this._text.align=v$n}),v$Q(0,v$n,"clickHandler",function(){return this._clickHandler},function(v$n){this._clickHandler=v$n}),v$Q(0,v$n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(v$n){this._bitmap.sizeGrid=v$Z.fillArray(v$M.defaultSizeGrid,v$n,Number)}),v$Q(0,v$n,"width",v$a.prototype._$get_width,function(v$n){v$m.superSet(v$H,this,"width",v$n),this._autoSize&&(this._bitmap.width=v$n,this._text&&(this._text.width=v$n))}),v$Q(0,v$n,"height",v$a.prototype._$get_height,function(v$n){v$m.superSet(v$H,this,"height",v$n),this._autoSize&&(this._bitmap.height=v$n,this._text&&(this._text.height=v$n))}),v$Q(0,v$n,"dataSource",v$a.prototype._$get_dataSource,function(v$n){"number"==typeof(this._dataSource=v$n)||"string"==typeof v$n?this.label=v$n+"":v$m.superSet(v$H,this,"dataSource",v$n)}),v$Q(0,v$n,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(v$n){this._bitmap._offset=v$n?v$Z.fillArray([1,1],v$n,Number):[]}),v$x(v$U,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),v$U}(v$H),v$l=function(v$a){function v$x(v$n,v$a,v$U){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,v$x.__super.call(this),void 0===v$a&&(v$a=1),void 0===v$U&&(v$U=1),this._clipX=v$a,this._clipY=v$U,this.skin=v$n}v$p(v$x,"laya.ui.Clip",v$a);var v$n=v$x.prototype;return v$n.destroy=function(v$n){this.clearEvent(),this.clearLoad(),v$A.clearCache(this,this._skin),v$A.clearObject(this,this._weakKey),void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},v$n.dispose=function(){this.destroy(!0),v$m.loader.clearRes(this._skin)},v$n.createChildren=function(){this.graphics=this._bitmap=new v$c},v$n._onDisplay=function(v$n){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},v$n.changeClip=function(){if(this._clipChanged=!1,this._skin){var v$n=v$A.getRes(this._skin);if(v$n)this.loadComplete(this._skin,v$n);else{if(v$D.resAtalsObj&&v$D.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=v$i.create(this,this.loadComplete,[this._skin]),this._progress=null,v$m.loader.load(this._skin,this._complete,this._progress)}}},v$n.loadComplete=function(v$n,v$a){if(v$n===this._skin&&v$a){v$A.clearObject(this,this._weakKey);var v$U=this._clipWidth||Math.ceil(v$a.sourceWidth/this._clipX),v$x=this._clipHeight||Math.ceil(v$a.sourceHeight/this._clipY),v$D=this._skin+v$U+v$x,v$p=v$A.findObject(v$D);if(v$N.isOkTextureList(v$p)||(v$p=null),v$p)this._weakKey=v$D,v$A.keepObject(this,this._weakKey),this._sources=v$p;else{this._sources=[];for(var v$Q=0;v$Q<this._clipY;v$Q++)for(var v$V=0;v$V<this._clipX;v$V++){var v$y=v$W.createFromTexture(v$a,v$U*v$V,v$x*v$Q,v$U,v$x);if(v$a.alphaTexture){var v$R=v$a.width/v$a.alphaTexture.width;v$y.alphaTexture=v$W.createFromTexture(v$a.alphaTexture,v$U*v$V/v$R,v$x*v$Q/v$R,v$U/v$R,v$x/v$R)}this._sources.push(v$y)}v$A.saveObject(v$D,this._sources),this._weakKey=v$D,v$A.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},v$n.play=function(v$n,v$a){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=-1),this._isPlaying=!0,this.index=v$n,this._toIndex=v$a,this._index++,v$m.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},v$n._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},v$n.stop=function(){this._isPlaying=!1,v$m.timer.clear(this,this._loop),this.event("complete")},v$n._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},v$Q(0,v$n,"interval",function(){return this._interval},function(v$n){this._interval!=v$n&&(this._interval=v$n,this._isPlaying&&this.play())}),v$n.clearEvent=function(){this._skin&&v$D.atalsNotify&&v$D.atalsNotify.off(this._skin,this,this._setBtnSource)},v$n.clearLoad=function(){this._skin&&((this._complete||this._progress)&&v$m.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},v$Q(0,v$n,"skin",function(){return this._skin},function(v$n){if(this._skin!=v$n)if(this.clearLoad(),this.clearEvent(),v$A.clearCache(this,this._skin),this._skin=v$n){v$A.keepCache(this,this._skin);var v$a=v$A.getRes(v$n),v$U=v$D.resAtalsObj&&v$D.resAtalsObj[this._skin];!v$a&&v$U?v$D.atalsNotify&&v$D.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),v$n._setBtnSource=function(v$n,v$a){v$n===this._skin&&v$a&&(this.loadComplete(v$n,v$a),this.clearEvent())},v$Q(0,v$n,"sources",function(){return this._sources},function(v$n){this._sources=v$n,this.index=this._index,this.event("loaded")}),v$Q(0,v$n,"clipX",function(){return this._clipX},function(v$n){this._clipX=v$n||1,this._setClipChanged()}),v$Q(0,v$n,"clipY",function(){return this._clipY},function(v$n){this._clipY=v$n||1,this._setClipChanged()}),v$Q(0,v$n,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),v$Q(0,v$n,"clipWidth",function(){return this._clipWidth},function(v$n){this._clipWidth=v$n,this._setClipChanged()}),v$Q(0,v$n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(v$n){this._bitmap.sizeGrid=v$Z.fillArray(v$M.defaultSizeGrid,v$n,Number)}),v$Q(0,v$n,"group",function(){return this._group},function(v$n){v$n&&this._skin&&v$A.setGroup(this._skin,v$n),this._group=v$n}),v$Q(0,v$n,"clipHeight",function(){return this._clipHeight},function(v$n){this._clipHeight=v$n,this._setClipChanged()}),v$Q(0,v$n,"width",v$a.prototype._$get_width,function(v$n){v$m.superSet(v$H,this,"width",v$n),this._bitmap.width=v$n}),v$Q(0,v$n,"height",v$a.prototype._$get_height,function(v$n){v$m.superSet(v$H,this,"height",v$n),this._bitmap.height=v$n}),v$Q(0,v$n,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),v$Q(0,v$n,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),v$Q(0,v$n,"index",function(){return this._index},function(v$n){this._index=v$n,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[v$n]),this.event("change")}),v$Q(0,v$n,"autoPlay",function(){return this._autoPlay},function(v$n){this._autoPlay!=v$n&&((this._autoPlay=v$n)?this.play():this.stop())}),v$Q(0,v$n,"isPlaying",function(){return this._isPlaying},function(v$n){this._isPlaying=v$n}),v$Q(0,v$n,"dataSource",v$a.prototype._$get_dataSource,function(v$n){"number"==typeof(this._dataSource=v$n)&&Math.floor(v$n)==v$n||"string"==typeof v$n?this.index=parseInt(v$n):v$m.superSet(v$H,this,"dataSource",v$n)}),v$Q(0,v$n,"bitmap",function(){return this._bitmap}),v$x}(v$H),v$j=function(v$a){function v$n(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,v$n.__super.call(this)}v$p(v$n,"laya.ui.ColorPicker",v$a);var v$U=v$n.prototype;return v$U.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._colorPanel&&this._colorPanel.destroy(v$n),this._colorButton&&this._colorButton.destroy(v$n),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},v$U.createChildren=function(){this.addChild(this._colorButton=new v$v),this._colorPanel=new v$I,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new v$K),this._colorPanel.addChild(this._colorBlock=new v$K),this._colorPanel.addChild(this._colorInput=new v$q)},v$U.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},v$U.onPanelMouseDown=function(v$n){v$n.stopPropagation()},v$U.changePanel=function(){this._panelChanged=!1;var v$n=this._colorPanel.graphics;v$n.clear(),v$n.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(v$n=this._colorTiles.graphics).clear();for(var v$a=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],v$U=0;v$U<12;v$U++)for(var v$x=0;v$x<20;v$x++){var v$D=0;v$D=0===v$x?v$a[v$U]:1===v$x?0:51*(((3*v$U+v$x/6)%3<<0)+3*(v$U/6<<0))<<16|v$x%6*51<<8|(v$U<<0)%6*51;var v$p=v$Z.toColor(v$D);this._colors.push(v$p);var v$Q=v$x*this._gridSize,v$V=v$U*this._gridSize;v$n.drawRect(v$Q,v$V,this._gridSize,this._gridSize,v$p,"#000000")}},v$U.onColorButtonClick=function(v$n){this._colorPanel.parent?this.close():this.open()},v$U.open=function(){var v$n=this.localToGlobal(new v$E),v$a=v$n.x+this._colorPanel.width<=v$m.stage.width?v$n.x:v$m.stage.width-this._colorPanel.width,v$U=v$n.y+this._colorButton.height;v$U=v$U+this._colorPanel.height<=v$m.stage.height?v$U:v$n.y-this._colorPanel.height,this._colorPanel.pos(v$a,v$U),this._colorPanel.zOrder=1001,v$m._currentStage.addChild(this._colorPanel),v$m.stage.on("mousedown",this,this.removeColorBox)},v$U.close=function(){v$m.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},v$U.removeColorBox=function(v$n){this.close()},v$U.onColorFieldKeyDown=function(v$n){13==v$n.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),v$n.stopPropagation())},v$U.onColorInputChange=function(v$n){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},v$U.onColorTilesClick=function(v$n){this.selectedColor=this.getColorByMouse(),this.close()},v$U.onColorTilesMouseMove=function(v$n){this._colorInput.focus=!1;var v$a=this.getColorByMouse();this._colorInput.text=v$a,this.drawBlock(v$a)},v$U.getColorByMouse=function(){var v$n=this._colorTiles.getMousePoint(),v$a=Math.floor(v$n.x/this._gridSize),v$U=Math.floor(v$n.y/this._gridSize);return this._colors[20*v$U+v$a]},v$U.drawBlock=function(v$n){var v$a=this._colorBlock.graphics;v$a.clear();var v$U=v$n||"#ffffff";v$a.drawRect(0,0,50,20,v$U,this._borderColor),v$n||v$a.drawLine(0,0,50,20,"#ff0000")},v$U.changeColor=function(){var v$n=this.graphics;v$n.clear();var v$a=this._selectedColor||"#000000";v$n.drawRect(0,0,this._colorButton.width,this._colorButton.height,v$a)},v$U._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},v$Q(0,v$U,"inputBgColor",function(){return this._inputBgColor},function(v$n){this._inputBgColor=v$n,this._setPanelChanged()}),v$Q(0,v$U,"selectedColor",function(){return this._selectedColor},function(v$n){this._selectedColor!=v$n&&(this._selectedColor=this._colorInput.text=v$n,this.drawBlock(v$n),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",v$R.EMPTY.setTo("change",this,this)))}),v$Q(0,v$U,"skin",function(){return this._colorButton.skin},function(v$n){this._colorButton.skin=v$n,this.changeColor()}),v$Q(0,v$U,"bgColor",function(){return this._bgColor},function(v$n){this._bgColor=v$n,this._setPanelChanged()}),v$Q(0,v$U,"borderColor",function(){return this._borderColor},function(v$n){this._borderColor=v$n,this._setPanelChanged()}),v$Q(0,v$U,"inputColor",function(){return this._inputColor},function(v$n){this._inputColor=v$n,this._setPanelChanged()}),v$n}(v$H),v$h=function(v$a){function v$U(v$n,v$a){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,v$U.__super.call(this),this._itemColors=v$M.comboBoxItemColors,this.skin=v$n,this.labels=v$a}v$p(v$U,"laya.ui.ComboBox",v$a);var v$n=v$U.prototype;return v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._button&&this._button.destroy(v$n),this._list&&this._list.destroy(v$n),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},v$n.createChildren=function(){this.addChild(this._button=new v$v),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},v$n._createList=function(){this._list=new v$w,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},v$n._setListEvent=function(v$n){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=v$i.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},v$n.onListDown=function(v$n){v$n.stopPropagation()},v$n.onScrollBarDown=function(v$n){v$n.stopPropagation()},v$n.onButtonMouseDown=function(v$n){this.callLater(this.switchTo,[!this._isOpen])},v$n.changeList=function(){this._listChanged=!1;var v$n=this.width-2,v$a=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:v$n,height:this._itemHeight,fontSize:this._itemSize,color:v$a}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},v$n.onlistItemMouse=function(v$n,v$a){var v$U=v$n.type;if("mouseover"===v$U||"mouseout"===v$U){if(this._isCustomList)return;var v$x=this._list.getCell(v$a);if(!v$x)return;var v$D=v$x.getChildByName("label");v$D&&("mouseover"===v$U?(v$D.bgColor=this._itemColors[0],v$D.color=this._itemColors[1]):(v$D.bgColor=null,v$D.color=this._itemColors[2]))}else"click"===v$U&&(this.selectedIndex=v$a,this.isOpen=!1)},v$n.switchTo=function(v$n){this.isOpen=v$n},v$n.changeOpen=function(){this.isOpen=!this._isOpen},v$n.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var v$n=this._list.graphics;v$n.clear(),v$n.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var v$a=this._list.array||[],v$U=v$a.length=0,v$x=this._labels.length;v$U<v$x;v$U++)v$a.push({label:this._labels[v$U]});this._list.height=this._listHeight,this._list.array=v$a},v$n.changeSelected=function(){this._button.label=this.selectedLabel},v$n._onStageMouseWheel=function(v$n){this._list&&!this._list.contains(v$n.target)&&this.removeList(null)},v$n.removeList=function(v$n){v$m.stage.off("mousedown",this,this.removeList),v$m.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},v$Q(0,v$n,"selectedIndex",function(){return this._selectedIndex},function(v$n){this._selectedIndex!=v$n&&(this._selectedIndex=v$n,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[v$R.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),v$Q(0,v$n,"measureHeight",function(){return this._button.height}),v$Q(0,v$n,"skin",function(){return this._button.skin},function(v$n){this._button.skin!=v$n&&(this._button.skin=v$n,this._listChanged=!0)}),v$Q(0,v$n,"measureWidth",function(){return this._button.width}),v$Q(0,v$n,"width",v$a.prototype._$get_width,function(v$n){v$m.superSet(v$H,this,"width",v$n),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),v$Q(0,v$n,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(v$n){this.selectedIndex=this._labels.indexOf(v$n)}),v$Q(0,v$n,"labels",function(){return this._labels.join(",")},function(v$n){0<this._labels.length&&(this.selectedIndex=-1),v$n?this._labels=v$n.split(","):this._labels.length=0,this._itemChanged=!0}),v$Q(0,v$n,"height",v$a.prototype._$get_height,function(v$n){v$m.superSet(v$H,this,"height",v$n),this._button.height=this._height}),v$Q(0,v$n,"selectHandler",function(){return this._selectHandler},function(v$n){this._selectHandler=v$n}),v$Q(0,v$n,"visibleNum",function(){return this._visibleNum},function(v$n){this._visibleNum=v$n,this._listChanged=!0}),v$Q(0,v$n,"labelBold",function(){return this._button.text.bold},function(v$n){this._button.text.bold=v$n}),v$Q(0,v$n,"itemColors",function(){return String(this._itemColors)},function(v$n){this._itemColors=v$Z.fillArray(this._itemColors,v$n,String),this._listChanged=!0}),v$Q(0,v$n,"itemSize",function(){return this._itemSize},function(v$n){this._itemSize=v$n,this._listChanged=!0}),v$Q(0,v$n,"scrollBar",function(){return this.list.scrollBar}),v$Q(0,v$n,"isOpen",function(){return this._isOpen},function(v$n){if(this._isOpen!=v$n)if(this._isOpen=v$n,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var v$a=this.localToGlobal(v$E.TEMP.setTo(0,0)),v$U=v$a.y+this._button.height;v$U=v$U+this._listHeight<=v$m.stage.height?v$U:v$a.y-this._listHeight,this._list.pos(v$a.x,v$U),this._list.zOrder=1001,v$m._currentStage.addChild(this._list),v$m.stage.once("mousedown",this,this.removeList),v$m.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),v$Q(0,v$n,"scrollBarSkin",function(){return this._scrollBarSkin},function(v$n){this._scrollBarSkin=v$n}),v$Q(0,v$n,"sizeGrid",function(){return this._button.sizeGrid},function(v$n){this._button.sizeGrid=v$n}),v$Q(0,v$n,"button",function(){return this._button}),v$Q(0,v$n,"list",function(){return this._list||this._createList(),this._list},function(v$n){v$n&&(v$n.removeSelf(),this._isCustomList=!0,this._list=v$n,this._setListEvent(v$n),this._itemHeight=v$n.getCell(0).height+v$n.spaceY)}),v$Q(0,v$n,"dataSource",v$a.prototype._$get_dataSource,function(v$n){"number"==typeof(this._dataSource=v$n)&&Math.floor(v$n)==v$n||"string"==typeof v$n?this.selectedIndex=parseInt(v$n):v$n instanceof Array?this.labels=v$n.join(","):v$m.superSet(v$H,this,"dataSource",v$n)}),v$Q(0,v$n,"labelColors",function(){return this._button.labelColors},function(v$n){this._button.labelColors!=v$n&&(this._button.labelColors=v$n)}),v$Q(0,v$n,"labelPadding",function(){return this._button.text.padding.join(",")},function(v$n){this._button.text.padding=v$Z.fillArray(v$M.labelPadding,v$n,Number)}),v$Q(0,v$n,"labelSize",function(){return this._button.text.fontSize},function(v$n){this._button.text.fontSize=v$n}),v$Q(0,v$n,"labelFont",function(){return this._button.text.font},function(v$n){this._button.text.font=v$n}),v$Q(0,v$n,"stateNum",function(){return this._button.stateNum},function(v$n){this._button.stateNum=v$n}),v$U}(v$H),v$f=function(v$a){function v$U(v$n){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,v$U.__super.call(this),this._showButtons=v$u.showButtons,this._touchScrollEnable=v$u.touchScrollEnable,this._mouseWheelEnable=v$u.mouseWheelEnable,this.skin=v$n,this.max=1}v$p(v$U,"laya.ui.ScrollBar",v$a);var v$n=v$U.prototype;return v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),this.stopScroll(),this.target=null,v$a.prototype.destroy.call(this,v$n),this.upButton&&this.upButton.destroy(v$n),this.downButton&&this.downButton.destroy(v$n),this.slider&&this.slider.destroy(v$n),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},v$n.createChildren=function(){this.addChild(this.slider=new v$F),this.addChild(this.upButton=new v$v),this.addChild(this.downButton=new v$v)},v$n.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},v$n.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},v$n.onButtonMouseDown=function(v$n){var v$a=v$n.currentTarget===this.upButton;this.slide(v$a),v$m.timer.once(v$M.scrollBarDelayTime,this,this.startLoop,[v$a]),v$m.stage.once("mouseup",this,this.onStageMouseUp)},v$n.startLoop=function(v$n){v$m.timer.frameLoop(1,this,this.slide,[v$n])},v$n.slide=function(v$n){v$n?this.value-=this._scrollSize:this.value+=this._scrollSize},v$n.onStageMouseUp=function(v$n){v$m.timer.clear(this,this.startLoop),v$m.timer.clear(this,this.slide)},v$n.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},v$n.changeSize=function(){v$a.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},v$n.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},v$n.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},v$n.setScroll=function(v$n,v$a,v$U){this.runCallLater(this.changeSize),this.slider.setSlider(v$n,v$a,v$U),this.slider.bar.visible=0<v$a,!this._hide&&this.autoHide&&(this.visible=!1)},v$n.onTargetMouseWheel=function(v$n){this.value-=v$n.delta*this._scrollSize,this.target=this._target},v$n.onTargetMouseDown=function(v$n){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new v$E),this._lastPoint.setTo(v$m.stage.mouseX,v$m.stage.mouseY),v$m.timer.clear(this,this.tweenMove),v$k.clearTween(this),v$m.stage.once("mouseup",this,this.onStageMouseUp2),v$m.stage.once("mouseout",this,this.onStageMouseUp2),v$m.timer.frameLoop(1,this,this.loop)},v$n.loop=function(){var v$n=v$m.stage.mouseY,v$a=v$m.stage.mouseX;if(this._lastOffset=this.isVertical?v$n-this._lastPoint.y:v$a-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?v$m.stage._canvasTransform.getScaleY():v$m.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=v$a,this._lastPoint.y=v$n,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},v$n.onStageMouseUp2=function(v$n){if(v$m.stage.off("mouseup",this,this.onStageMouseUp2),v$m.stage.off("mouseout",this,this.onStageMouseUp2),v$m.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?v$k.to(this,{value:this.min},this.elasticBackTime,v$y.sineOut,v$i.create(this,this.elasticOver)):this._value>this.max&&v$k.to(this,{value:this.max},this.elasticBackTime,v$y.sineOut,v$i.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?v$m.stage.mouseY-this._lastPoint.y:v$m.stage.mouseX-this._lastPoint.x);for(var v$a=0,v$U=Math.min(this._offsets.length,3),v$x=0;v$x<v$U;v$x++)v$a+=this._offsets[this._offsets.length-1-v$x];if(this._lastOffset=v$a/v$U,(v$a=Math.abs(this._lastOffset))<2)return void this.event("end");60<v$a&&(this._lastOffset=0<this._lastOffset?60:-60);var v$D=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));v$m.timer.frameLoop(1,this,this.tweenMove,[v$D])}},v$n.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&v$k.to(this,{alpha:0},500),this.event("end")},v$n.tweenMove=function(v$n){this._lastOffset*=this.rollRatio;var v$a=NaN;if(0<v$n&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,v$a=.5*-(this.min-v$n-this.value),this._lastOffset>v$a&&(this._lastOffset=v$a)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,v$a=.5*-(this.max+v$n-this.value),this._lastOffset<v$a&&(this._lastOffset=v$a))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(v$m.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?v$k.to(this,{value:this.min},this.elasticBackTime,v$y.sineOut,v$i.create(this,this.elasticOver)):this._value>this.max?v$k.to(this,{value:this.max},this.elasticBackTime,v$y.sineOut,v$i.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&v$k.to(this,{alpha:0},500)}},v$n.stopScroll=function(){this.onStageMouseUp2(null),v$m.timer.clear(this,this.tweenMove),v$k.clearTween(this)},v$Q(0,v$n,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),v$Q(0,v$n,"skin",function(){return this._skin},function(v$n){this._skin!=v$n&&(this._skin=v$n,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),v$Q(0,v$n,"max",function(){return this.slider.max},function(v$n){this.slider.max=v$n}),v$Q(0,v$n,"showButtons",function(){return this._showButtons},function(v$n){this._showButtons=v$n,this.callLater(this.changeScrollBar)}),v$Q(0,v$n,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),v$Q(0,v$n,"min",function(){return this.slider.min},function(v$n){this.slider.min=v$n}),v$Q(0,v$n,"value",function(){return this._value},function(v$n){v$n!==this._value&&(this._value=v$n,this._isElastic||(this.slider._value!=v$n&&(this.slider._value=v$n,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),v$Q(0,v$n,"isVertical",function(){return this.slider.isVertical},function(v$n){this.slider.isVertical=v$n}),v$Q(0,v$n,"sizeGrid",function(){return this.slider.sizeGrid},function(v$n){this.slider.sizeGrid=v$n}),v$Q(0,v$n,"scrollSize",function(){return this._scrollSize},function(v$n){this._scrollSize=v$n}),v$Q(0,v$n,"dataSource",v$a.prototype._$get_dataSource,function(v$n){"number"==typeof(this._dataSource=v$n)||"string"==typeof v$n?this.value=Number(v$n):v$m.superSet(v$H,this,"dataSource",v$n)}),v$Q(0,v$n,"thumbPercent",function(){return this._thumbPercent},function(v$n){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),v$n=1<=v$n?.99:v$n,this._thumbPercent=v$n,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*v$n,v$M.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*v$n,v$M.scrollBarMinNum))}),v$Q(0,v$n,"target",function(){return this._target},function(v$n){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=v$n)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),v$Q(0,v$n,"hide",function(){return this._hide},function(v$n){this._hide=v$n,this.visible=!v$n}),v$Q(0,v$n,"touchScrollEnable",function(){return this._touchScrollEnable},function(v$n){this._touchScrollEnable=v$n,this.target=this._target}),v$Q(0,v$n,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(v$n){this._mouseWheelEnable=v$n,this.target=this._target}),v$Q(0,v$n,"tick",function(){return this.slider.tick},function(v$n){this.slider.tick=v$n}),v$U}(v$H),v$F=function(v$a){function v$U(v$n){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,v$U.__super.call(this),this.skin=v$n}v$p(v$U,"laya.ui.Slider",v$a);var v$n=v$U.prototype;return v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._bg&&this._bg.destroy(v$n),this._bar&&this._bar.destroy(v$n),this._progress&&this._progress.destroy(v$n),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},v$n.createChildren=function(){this.addChild(this._bg=new v$g),this.addChild(this._bar=new v$v)},v$n.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},v$n.onBarMouseDown=function(v$n){this._globalSacle||(this._globalSacle=new v$E),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=v$m.stage.mouseX,this._ty=v$m.stage.mouseY,v$m.stage.on("mousemove",this,this.mouseMove),v$m.stage.once("mouseup",this,this.mouseUp),v$m.stage.once("mouseout",this,this.mouseUp),this.showValueText()},v$n.showValueText=function(){if(this.showLabel){var v$n=laya.ui.Slider.label;this.addChild(v$n),v$n.textField.changeText(this._value+""),this.isVertical?(v$n.x=this._bar.x+20,v$n.y=.5*(this._bar.height-v$n.height)+this._bar.y):(v$n.y=this._bar.y-20,v$n.x=.5*(this._bar.width-v$n.width)+this._bar.x)}},v$n.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},v$n.mouseUp=function(v$n){v$m.stage.off("mousemove",this,this.mouseMove),v$m.stage.off("mouseup",this,this.mouseUp),v$m.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},v$n.mouseMove=function(v$n){var v$a=this._value;this.isVertical?(this._bar.y+=(v$m.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(v$m.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=v$m.stage.mouseX,this._ty=v$m.stage.mouseY;var v$U=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*v$U)/v$U,this._value!=v$a&&this.sendChangeEvent(),this.showValueText()},v$n.sendChangeEvent=function(v$n){void 0===v$n&&(v$n="change"),this.event(v$n),this.changeHandler&&this.changeHandler.runWith(this._value)},v$n.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},v$n.changeSize=function(){v$a.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},v$n.setSlider=function(v$n,v$a,v$U){this._value=-1,this._min=v$n,this._max=v$n<v$a?v$a:v$n,this.value=v$U<v$n?v$n:v$a<v$U?v$a:v$U},v$n.changeValue=function(){var v$n=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*v$n)/v$n,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var v$a=this._max-this._min;0===v$a&&(v$a=1),this.isVertical?(this._bar.y=(this._value-this._min)/v$a*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/v$a*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},v$n.onBgMouseDown=function(v$n){var v$a=this._bg.getMousePoint();this.isVertical?this.value=v$a.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=v$a.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},v$Q(0,v$n,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),v$Q(0,v$n,"skin",function(){return this._skin},function(v$n){if(this._skin!=v$n){this._skin=v$n,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var v$a=this._skin.replace(".png","$progress.png");v$A.getRes(v$a)&&(this._progress||(this.addChild(this._progress=new v$g),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=v$a),this.setBarPoint(),this.callLater(this.changeValue)}}),v$Q(0,v$n,"allowClickBack",function(){return this._allowClickBack},function(v$n){this._allowClickBack!=v$n&&((this._allowClickBack=v$n)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),v$Q(0,v$n,"max",function(){return this._max},function(v$n){this._max!=v$n&&(this._max=v$n,this.callLater(this.changeValue))}),v$Q(0,v$n,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),v$Q(0,v$n,"tick",function(){return this._tick},function(v$n){this._tick!=v$n&&(this._tick=v$n,this.callLater(this.changeValue))}),v$Q(0,v$n,"sizeGrid",function(){return this._bg.sizeGrid},function(v$n){this._bg.sizeGrid=v$n,this._bar.sizeGrid=v$n,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),v$Q(0,v$n,"min",function(){return this._min},function(v$n){this._min!=v$n&&(this._min=v$n,this.callLater(this.changeValue))}),v$Q(0,v$n,"value",function(){return this._value},function(v$n){if(this._value!=v$n){var v$a=this._value;this._value=v$n,this.changeValue(),this._value!=v$a&&this.sendChangeEvent()}}),v$Q(0,v$n,"dataSource",v$a.prototype._$get_dataSource,function(v$n){"number"==typeof(this._dataSource=v$n)||"string"==typeof v$n?this.value=Number(v$n):v$m.superSet(v$H,this,"dataSource",v$n)}),v$Q(0,v$n,"bar",function(){return this._bar}),v$x(v$U,["label",function(){return this.label=new v$o}]),v$U}(v$H),v$g=function(v$a){function v$U(v$n){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,v$U.__super.call(this),this.skin=v$n}v$p(v$U,"laya.ui.Image",v$a);var v$n=v$U.prototype;return v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,v$A.clearCache(this,this._skin)},v$n.dispose=function(){this.destroy(!0),v$A.clearCache(this,this._skin),this.clearEvent()},v$n.createChildren=function(){this.graphics=this._bitmap=new v$c},v$n.setSource=function(v$n,v$a){v$n===this._skin&&v$a&&(this.source=v$a,this.onCompResize(),this.clearEvent())},v$n.clearEvent=function(){this._skin&&v$D.atalsNotify&&v$D.atalsNotify.off(this._skin,this,this.setSource)},v$n.clearLoad=function(){this._skin&&((this._complete||this._progress)&&v$m.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},v$Q(0,v$n,"source",function(){return this._bitmap.source},function(v$n){this._bitmap&&(this._bitmap.source=v$n,this.event("loaded"),this.repaint())}),v$Q(0,v$n,"dataSource",v$a.prototype._$get_dataSource,function(v$n){"string"==typeof(this._dataSource=v$n)?this.skin=v$n:v$m.superSet(v$H,this,"dataSource",v$n)}),v$Q(0,v$n,"measureHeight",function(){return this._bitmap.height}),v$Q(0,v$n,"skin",function(){return this._skin},function(v$n){if(this._skin!=v$n)if(v$A.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=v$n){v$A.keepCache(this,this._skin);var v$a=v$A.getRes(v$n),v$U=v$D.resAtalsObj&&v$D.resAtalsObj[this._skin];v$a?(this.source=v$a,this.onCompResize()):v$U?(v$D.atalsNotify&&v$D.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=v$U.sourceW),0==this.height&&(this.height=v$U.sourceH)):(this._complete=v$i.create(this,this.setSource,[this._skin]),this._progress=null,v$m.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),v$Q(0,v$n,"group",function(){return this._group},function(v$n){v$n&&this._skin&&v$A.setGroup(this._skin,v$n),this._group=v$n}),v$Q(0,v$n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(v$n){this._bitmap.sizeGrid=v$Z.fillArray(v$M.defaultSizeGrid,v$n,Number)}),v$Q(0,v$n,"measureWidth",function(){return this._bitmap.width}),v$Q(0,v$n,"width",v$a.prototype._$get_width,function(v$n){v$m.superSet(v$H,this,"width",v$n),this._bitmap.width=0==v$n?1e-7:v$n}),v$Q(0,v$n,"height",v$a.prototype._$get_height,function(v$n){v$m.superSet(v$H,this,"height",v$n),this._bitmap.height=0==v$n?1e-7:v$n}),v$U}(v$H),v$o=function(v$a){function v$U(v$n){this._tf=null,v$U.__super.call(this),void 0===v$n&&(v$n=""),v$X.defaultColor=v$M.labelColor,this.text=v$n}v$p(v$U,"laya.ui.Label",v$a);var v$n=v$U.prototype;return v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._tf=null},v$n.createChildren=function(){this.addChild(this._tf=new v$Y)},v$n.changeText=function(v$n){this._tf.changeText(v$n)},v$Q(0,v$n,"padding",function(){return this._tf.padding.join(",")},function(v$n){this._tf.padding=v$Z.fillArray(v$M.labelPadding,v$n,Number)}),v$Q(0,v$n,"bold",function(){return this._tf.bold},function(v$n){this._tf.bold=v$n}),v$Q(0,v$n,"align",function(){return this._tf.align},function(v$n){this._tf.align=v$n}),v$Q(0,v$n,"text",function(){return this._tf.text},function(v$n){this._tf.text!=v$n&&(v$n&&(v$n=v$Z.adptString(v$n+"")),this._tf.text=v$n,this.event("change"),this._width&&this._height||this.onCompResize())}),v$Q(0,v$n,"italic",function(){return this._tf.italic},function(v$n){this._tf.italic=v$n}),v$Q(0,v$n,"wordWrap",function(){return this._tf.wordWrap},function(v$n){this._tf.wordWrap=v$n}),v$Q(0,v$n,"font",function(){return this._tf.font},function(v$n){this._tf.font=v$n}),v$Q(0,v$n,"dataSource",v$a.prototype._$get_dataSource,function(v$n){"number"==typeof(this._dataSource=v$n)||"string"==typeof v$n?this.text=v$n+"":v$m.superSet(v$H,this,"dataSource",v$n)}),v$Q(0,v$n,"color",function(){return this._tf.color},function(v$n){this._tf.color=v$n}),v$Q(0,v$n,"valign",function(){return this._tf.valign},function(v$n){this._tf.valign=v$n}),v$Q(0,v$n,"leading",function(){return this._tf.leading},function(v$n){this._tf.leading=v$n}),v$Q(0,v$n,"fontSize",function(){return this._tf.fontSize},function(v$n){this._tf.fontSize=v$n}),v$Q(0,v$n,"bgColor",function(){return this._tf.bgColor},function(v$n){this._tf.bgColor=v$n}),v$Q(0,v$n,"borderColor",function(){return this._tf.borderColor},function(v$n){this._tf.borderColor=v$n}),v$Q(0,v$n,"stroke",function(){return this._tf.stroke},function(v$n){this._tf.stroke=v$n}),v$Q(0,v$n,"strokeColor",function(){return this._tf.strokeColor},function(v$n){this._tf.strokeColor=v$n}),v$Q(0,v$n,"textField",function(){return this._tf}),v$Q(0,v$n,"measureWidth",function(){return this._tf.width}),v$Q(0,v$n,"measureHeight",function(){return this._tf.height}),v$Q(0,v$n,"width",function(){return this._width||this._tf.text?v$m.superGet(v$H,this,"width"):0},function(v$n){v$m.superSet(v$H,this,"width",v$n),this._tf.width=v$n}),v$Q(0,v$n,"height",function(){return this._height||this._tf.text?v$m.superGet(v$H,this,"height"):0},function(v$n){v$m.superSet(v$H,this,"height",v$n),this._tf.height=v$n}),v$Q(0,v$n,"overflow",function(){return this._tf.overflow},function(v$n){this._tf.overflow=v$n}),v$Q(0,v$n,"underline",function(){return this._tf.underline},function(v$n){this._tf.underline=v$n}),v$Q(0,v$n,"underlineColor",function(){return this._tf.underlineColor},function(v$n){this._tf.underlineColor=v$n}),v$U}(v$H),v$B=function(v$a){function v$U(v$n){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,v$U.__super.call(this),this.skin=v$n}v$p(v$U,"laya.ui.ProgressBar",v$a);var v$n=v$U.prototype;return v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._bg&&this._bg.destroy(v$n),this._bar&&this._bar.destroy(v$n),this._bg=this._bar=null,this.changeHandler=null},v$n.createChildren=function(){this.addChild(this._bg=new v$g),this.addChild(this._bar=new v$g)},v$n.changeValue=function(){if(this.sizeGrid){var v$n=this.sizeGrid.split(","),v$a=Number(v$n[3]),v$U=Number(v$n[1]),v$x=(this.width-v$a-v$U)*this._value;this._bar.width=v$a+v$U+v$x,this._bar.visible=this._bar.width>v$a+v$U}else this._bar.width=this.width*this._value},v$Q(0,v$n,"measureHeight",function(){return this._bg.height}),v$Q(0,v$n,"skin",function(){return this._skin},function(v$n){this._skin!=v$n&&(this._skin=v$n,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),v$Q(0,v$n,"measureWidth",function(){return this._bg.width}),v$Q(0,v$n,"height",v$a.prototype._$get_height,function(v$n){v$m.superSet(v$H,this,"height",v$n),this._bg.height=this._height,this._bar.height=this._height}),v$Q(0,v$n,"bar",function(){return this._bar}),v$Q(0,v$n,"value",function(){return this._value},function(v$n){this._value!=v$n&&(v$n=1<v$n?1:v$n<0?0:v$n,this._value=v$n,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(v$n))}),v$Q(0,v$n,"bg",function(){return this._bg}),v$Q(0,v$n,"sizeGrid",function(){return this._bg.sizeGrid},function(v$n){this._bg.sizeGrid=this._bar.sizeGrid=v$n}),v$Q(0,v$n,"width",v$a.prototype._$get_width,function(v$n){v$m.superSet(v$H,this,"width",v$n),this._bg.width=this._width,this.callLater(this.changeValue)}),v$Q(0,v$n,"dataSource",v$a.prototype._$get_dataSource,function(v$n){"number"==typeof(this._dataSource=v$n)||"string"==typeof v$n?this.value=Number(v$n):v$m.superSet(v$H,this,"dataSource",v$n)}),v$U}(v$H),v$O=(function(v$n){function v$U(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,v$U.__super.call(this),this._tipBox=new v$H,this._tipBox.addChild(this._tipText=new v$Y),this._tipText.x=this._tipText.y=5,this._tipText.color=v$U.tipTextColor,this._defaultTipHandler=this._showDefaultTip,v$m.stage.on("showtip",this,this._onStageShowTip),v$m.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}v$p(v$U,"laya.ui.TipManager",v$H);var v$a=v$U.prototype;v$a._onStageHideTip=function(v$n){v$m.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},v$a._onStageShowTip=function(v$n){v$m.timer.once(v$U.tipDelay,this,this._showTip,[v$n],!0)},v$a._showTip=function(v$n){if("string"==typeof v$n){var v$a=String(v$n);Boolean(v$a)&&this._defaultTipHandler(v$a)}else v$n instanceof laya.utils.Handler?v$n.run():"function"==typeof v$n&&v$n.apply();v$m.stage.on("mousemove",this,this._onStageMouseMove),v$m.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},v$a._onStageMouseDown=function(v$n){this.closeAll()},v$a._onStageMouseMove=function(v$n){this._showToStage(this,v$U.offsetX,v$U.offsetY)},v$a._showToStage=function(v$n,v$a,v$U){void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0);var v$x=v$n.getBounds();v$n.x=v$m.stage.mouseX+v$a,v$n.y=v$m.stage.mouseY+v$U,v$n.x+v$x.width>v$m.stage.width&&(v$n.x-=v$x.width+v$a),v$n.y+v$x.height>v$m.stage.height&&(v$n.y-=v$x.height+v$U)},v$a.closeAll=function(){v$m.timer.clear(this,this._showTip),v$m.stage.off("mousemove",this,this._onStageMouseMove),v$m.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},v$a.showDislayTip=function(v$n){this.addChild(v$n),this._showToStage(this),v$m._currentStage.addChild(this)},v$a._showDefaultTip=function(v$n){this._tipText.text=v$n;var v$a=this._tipBox.graphics;v$a.clear(),v$a.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,v$U.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),v$m._currentStage.addChild(this)},v$Q(0,v$a,"defaultTipHandler",function(){return this._defaultTipHandler},function(v$n){this._defaultTipHandler=v$n}),v$U.offsetX=10,v$U.offsetY=15,v$U.tipTextColor="#ffffff",v$U.tipBackColor="#111111",v$U.tipDelay=200}(),function(v$n){var v$q;function v$E(){this._idMap=null,this._aniList=null,this._watchMap={},v$E.__super.call(this)}v$p(v$E,"laya.ui.View",v$I);var v$a=v$E.prototype;return v$a.createView=function(v$n){if(v$n.animations&&!this._idMap&&(this._idMap={}),v$E.createComp(v$n,this,this),v$n.animations){var v$a,v$U,v$x=[],v$D=v$n.animations,v$p=0,v$Q=v$D.length;for(v$p=0;v$p<v$Q;v$p++){switch(v$a=new v$z,v$U=v$D[v$p],v$a._setUp(this._idMap,v$U),(this[v$U.name]=v$a)._setControlNode(this),v$U.action){case 1:v$a.play(0,!1);break;case 2:v$a.play(0,!0)}v$x.push(v$a)}this._aniList=v$x}0<this._width&&null==v$n.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},v$a.onEvent=function(v$n,v$a){},v$a.loadUI=function(v$n){var v$a=v$E.uiMap[v$n];v$a&&this.createView(v$a)},v$a.destroy=function(v$n){void 0===v$n&&(v$n=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,v$n)},v$a.changeData=function(v$n){var v$a=this._watchMap[v$n];if(v$a){console.log("change",v$n);for(var v$U=0,v$x=v$a.length;v$U<v$x;v$U++){v$a[v$U].exe(this)}}},v$E._regs=function(){for(var v$n in v$E.uiClassMap)v$b.regClass(v$n,v$E.uiClassMap[v$n])},v$E.createComp=function(v$n,v$a,v$U,v$x){if(!(v$a=v$a||v$E.getCompInstance(v$n)))return console.warn("can not create:"+v$n.type),null;var v$D=v$n.child;if(v$D)for(var v$p=v$a instanceof laya.ui.List,v$Q=0,v$V=v$D.length;v$Q<v$V;v$Q++){var v$y=v$D[v$Q];if(!v$a.hasOwnProperty("itemRender")||"render"!=v$y.props.name&&"render"!==v$y.props.renderType)if("Graphic"==v$y.type)v$b.addGraphicsToSprite(v$y,v$a);else if(v$b.isDrawType(v$y.type))v$b.addGraphicToSprite(v$y,v$a,!0);else{if(v$p){var v$R=[],v$X=v$E.createComp(v$y,null,v$U,v$R);v$R.length&&(v$X._$bindData=v$R)}else v$X=v$E.createComp(v$y,null,v$U,v$x);"Script"==v$y.type?"owner"in v$X?v$X.owner=v$a:"target"in v$X&&(v$X.target=v$a):"mask"==v$y.props.renderType||"mask"==v$y.props.name?v$a.mask=v$X:v$X instanceof laya.display.Sprite&&v$a.addChild(v$X)}else v$a.itemRender=v$y}var v$z=v$n.props;for(var v$i in v$z){var v$q=v$z[v$i];v$E.eventDic[v$i]?v$q&&v$U&&v$a.on(v$i,v$U,v$U.onEvent,[v$q]):v$E.setCompValue(v$a,v$i,v$q,v$U,v$x)}return v$m.__typeof(v$a,"laya.ui.IItem")&&v$a.initItems(),v$n.compId&&v$U&&v$U._idMap&&(v$U._idMap[v$n.compId]=v$a),v$a},v$E.setCompValue=function(v$n,v$a,v$U,v$x,v$D){if("string"==typeof v$U&&-1<v$U.indexOf("${")){if(v$E._sheet||(v$E._sheet=v$b.getClass("laya.data.Table")),!v$E._sheet)return void console.warn("Can not find class Sheet");if(v$D)v$D.push(v$n,v$a,v$U);else if(v$x){-1==v$U.indexOf("].")&&(v$U=v$U.replace(".","[0]."));var v$p,v$Q,v$V=new v$q(v$n,v$a,v$U);v$V.exe(v$x);for(var v$y=v$U.replace(/\[.*?\]\./g,".");null!=(v$p=v$E._parseWatchData.exec(v$y));){for(var v$R=v$p[1];null!=(v$Q=v$E._parseKeyWord.exec(v$R));){var v$X=v$Q[0],v$z=v$x._watchMap[v$X]||(v$x._watchMap[v$X]=[]);v$z.push(v$V),v$E._sheet.I.notifer.on(v$X,v$x,v$x.changeData,[v$X])}(v$z=v$x._watchMap[v$R]||(v$x._watchMap[v$R]=[])).push(v$V),v$E._sheet.I.notifer.on(v$R,v$x,v$x.changeData,[v$R])}}}else if("var"===v$a&&v$x)v$x[v$U]=v$n;else if("onClick"==v$a){var v$i=v$m._runScript("(function(){"+v$U+"})");v$n.on("click",v$x,v$i)}else v$n[v$a]="true"===v$U||"false"!==v$U&&v$U},v$E.getCompInstance=function(v$n){var v$a,v$U=v$n.props?v$n.props.runtime:null;return v$a=v$U?v$E.viewClassMap[v$U]||v$E.uiClassMap[v$U]||v$m.__classmap[v$U]:v$E.uiClassMap[v$n.type],v$n.props&&v$n.props.hasOwnProperty("renderType")&&"instance"==v$n.props.renderType?v$a.instance:v$a?new v$a:null},v$E.regComponent=function(v$n,v$a){v$E.uiClassMap[v$n]=v$a,v$b.regClass(v$n,v$a)},v$E.regViewRuntime=function(v$n,v$a){v$E.viewClassMap[v$n]=v$a},v$E.uiMap={},v$E.viewClassMap={},v$E._sheet=null,v$x(v$E,["uiClassMap",function(){return this.uiClassMap={ViewStack:v$nn,LinkButton:v$v,TextArea:v$Rn,ColorPicker:v$j,Box:v$I,Button:v$v,CheckBox:v$L,Clip:v$l,ComboBox:v$h,Component:v$H,HScrollBar:v$s,HSlider:v$t,Image:v$g,Label:v$o,List:v$w,Panel:v$C,ProgressBar:v$B,Radio:v$J,RadioGroup:v$Vn,ScrollBar:v$f,Slider:v$F,Tab:v$yn,TextInput:v$Un,View:v$E,VScrollBar:v$an,VSlider:v$xn,Tree:v$e,HBox:v$pn,VBox:v$Qn,Sprite:v$K,Animation:v$U,Text:v$Y,FontClip:v$S}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),v$E.__init$=function(){v$E._regs(),v$q=function(){function v$n(v$n,v$a,v$U){this.comp=null,this.prop=null,this.value=null,this.comp=v$n,this.prop=v$a,this.value=v$U}return v$p(v$n,""),v$n.prototype.exe=function(v$n){var v$a=v$Z.getBindFun(this.value);this.comp[this.prop]=v$a.call(this,v$n)},v$n}()},v$E}()),v$L=function(v$n){function v$U(v$n,v$a){void 0===v$a&&(v$a=""),v$U.__super.call(this,v$n,v$a)}v$p(v$U,"laya.ui.CheckBox",v$n);var v$a=v$U.prototype;return v$a.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},v$a.initialize=function(){v$n.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},v$Q(0,v$a,"dataSource",v$n.prototype._$get_dataSource,function(v$n){"boolean"==typeof(this._dataSource=v$n)?this.selected=v$n:"string"==typeof v$n?this.selected="true"===v$n:v$m.superSet(v$v,this,"dataSource",v$n)}),v$U}(v$v),v$d=function(v$n){function v$a(){this._space=0,this._align="none",this._itemChanged=!1,v$a.__super.call(this)}v$p(v$a,"laya.ui.LayoutBox",v$I);var v$U=v$a.prototype;return v$U.addChild=function(v$n){return v$n.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,v$n)},v$U.onResize=function(v$n){this._setItemChanged()},v$U.addChildAt=function(v$n,v$a){return v$n.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,v$n,v$a)},v$U.removeChild=function(v$n){return v$n.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,v$n)},v$U.removeChildAt=function(v$n){return this.getChildAt(v$n).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,v$n)},v$U.refresh=function(){this._setItemChanged()},v$U.changeItems=function(){this._itemChanged=!1},v$U.sortItem=function(v$n){v$n&&v$n.sort(function(v$n,v$a){return v$n.y-v$a.y})},v$U._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},v$Q(0,v$U,"space",function(){return this._space},function(v$n){this._space=v$n,this._setItemChanged()}),v$Q(0,v$U,"align",function(){return this._align},function(v$n){this._align=v$n,this._setItemChanged()}),v$a}(),v$S=function(v$a){function v$U(v$n,v$a){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,v$U.__super.call(this),v$n&&(this.skin=v$n),v$a&&(this.sheet=v$a)}v$p(v$U,"laya.ui.FontClip",v$a);var v$n=v$U.prototype;return v$n.createChildren=function(){this._bitmap=new v$c,this.on("loaded",this,this._onClipLoaded)},v$n._onClipLoaded=function(){this.callLater(this.changeValue)},v$n.changeValue=function(){var v$n;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),v$n=this._sources[0]))){var v$a="horizontal"===this._direction;v$a?(this._wordsW=this._valueArr.length*(v$n.sourceWidth+this.spaceX),this._wordsH=v$n.sourceHeight):(this._wordsW=v$n.sourceWidth,this._wordsH=(v$n.sourceHeight+this.spaceY)*this._valueArr.length);var v$U=0;if(this._width)switch(this._align){case"center":v$U=.5*(this._width-this._wordsW);break;case"right":v$U=this._width-this._wordsW;break;default:v$U=0}for(var v$x=0,v$D=this._valueArr.length;v$x<v$D;v$x++){var v$p=this._indexMap[this._valueArr.charAt(v$x)];this.sources[v$p]&&(v$n=this.sources[v$p],v$a?this.graphics.drawTexture(v$n,v$U+v$x*(v$n.sourceWidth+this.spaceX),0,v$n.sourceWidth,v$n.sourceHeight):this.graphics.drawTexture(v$n,0+v$U,v$x*(v$n.sourceHeight+this.spaceY),v$n.sourceWidth,v$n.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),v$a.prototype.destroy.call(this,v$n)},v$Q(0,v$n,"sheet",function(){return this._sheet},function(v$n){v$n+="";var v$a=(this._sheet=v$n).split(" ");this._clipX=String(v$a[0]).length,this.clipY=v$a.length,this._indexMap={};for(var v$U=0;v$U<this._clipY;v$U++)for(var v$x=v$a[v$U].split(""),v$D=0,v$p=v$x.length;v$D<v$p;v$D++)this._indexMap[v$x[v$D]]=v$U*this._clipX+v$D}),v$Q(0,v$n,"height",v$a.prototype._$get_height,function(v$n){v$m.superSet(v$l,this,"height",v$n),this.callLater(this.changeValue)}),v$Q(0,v$n,"direction",function(){return this._direction},function(v$n){this._direction=v$n,this.callLater(this.changeValue)}),v$Q(0,v$n,"value",function(){return this._valueArr?this._valueArr:""},function(v$n){v$n+="",this._valueArr=v$n,this.callLater(this.changeValue)}),v$Q(0,v$n,"width",v$a.prototype._$get_width,function(v$n){v$m.superSet(v$l,this,"width",v$n),this.callLater(this.changeValue)}),v$Q(0,v$n,"spaceX",function(){return this._spaceX},function(v$n){this._spaceX=v$n,"horizontal"===this._direction&&this.callLater(this.changeValue)}),v$Q(0,v$n,"spaceY",function(){return this._spaceY},function(v$n){this._spaceY=v$n,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),v$Q(0,v$n,"align",function(){return this._align},function(v$n){this._align=v$n,this.callLater(this.changeValue)}),v$Q(0,v$n,"measureWidth",function(){return this._wordsW}),v$Q(0,v$n,"measureHeight",function(){return this._wordsH}),v$U}(v$l),v$w=function(v$n){function v$a(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new v$E,v$a.__super.call(this)}v$p(v$a,"laya.ui.List",v$n);var v$U=v$a.prototype;return v$m.imps(v$U,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),v$U.destroy=function(v$n){void 0===v$n&&(v$n=!0),this._content&&this._content.destroy(v$n),this._scrollBar&&this._scrollBar.destroy(v$n),laya.ui.Component.prototype.destroy.call(this,v$n),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},v$U.createChildren=function(){this.addChild(this._content=new v$I)},v$U.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=v$m.superGet(v$I,this,"cacheAs")),v$m.superSet(v$I,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},v$U.onScrollEnd=function(){v$m.superSet(v$I,this,"cacheAs",this._$P.cacheAs)},v$U._removePreScrollBar=function(){var v$n=this.removeChildByName("scrollBar");v$n&&v$n.destroy(!0)},v$U.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var v$n=this._getOneCell(),v$a=v$n.width+this._spaceX||1,v$U=v$n.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/v$a):Math.ceil(this._width/v$a)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/v$U):Math.round(this._height/v$U));var v$x=this._width?this._width:v$a*this.repeatX-this._spaceX,v$D=this._height?this._height:v$U*this.repeatY-this._spaceY;this._cellSize=this._isVertical?v$U:v$a,this._cellOffset=this._isVertical?v$U*Math.max(this._repeatY2,this._repeatY)-v$D-this._spaceY:v$a*Math.max(this._repeatX2,this._repeatX)-v$x-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=v$D:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=v$x),this.setContentSize(v$x,v$D);var v$p=this._isVertical?this.repeatX:this.repeatY,v$Q=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,v$p,v$Q),this._createdLine=v$Q,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},v$U._getOneCell=function(){if(0===this._cells.length){var v$n=this.createItem();if(this._offset.setTo(v$n.x,v$n.y),this.cacheContent)return v$n;this._cells.push(v$n)}return this._cells[0]},v$U._createItems=function(v$n,v$a,v$U){var v$x=this._content,v$D=this._getOneCell(),v$p=v$D.width+this._spaceX,v$Q=v$D.height+this._spaceY;if(this.cacheContent){var v$V=new v$I;v$V.cacheAsBitmap=!0,v$V.pos((this._isVertical?0:v$n)*v$p,(this._isVertical?v$n:0)*v$Q),this._content.addChild(v$V),this._content.optimizeScrollRect=!0,v$x=v$V}else{for(var v$y=[],v$R=this._cells.length-1;-1<v$R;v$R--){var v$X=this._cells[v$R];v$X.removeSelf(),v$y.push(v$X)}this._cells.length=0}for(var v$z=v$n;v$z<v$U;v$z++)for(var v$i=0;v$i<v$a;v$i++)(v$D=v$y&&v$y.length?v$y.pop():this.createItem()).x=(this._isVertical?v$i:v$z)*v$p-v$x.x,v$D.y=(this._isVertical?v$z:v$i)*v$Q-v$x.y,v$D.name="item"+(v$z*v$a+v$i),v$x.addChild(v$D),this.addCell(v$D)},v$U.createItem=function(){var v$n=[];if("function"==typeof this._itemRender)var v$a=new this._itemRender;else v$a=v$O.createComp(this._itemRender,null,null,v$n);if(0==v$n.length&&v$a._watchMap){var v$U=v$a._watchMap;for(var v$x in v$U)for(var v$D=v$U[v$x],v$p=0;v$p<v$D.length;v$p++){var v$Q=v$D[v$p];v$n.push(v$Q.comp,v$Q.prop,v$Q.value)}}return v$n.length&&(v$a._$bindData=v$n),v$a},v$U.addCell=function(v$n){v$n.on("click",this,this.onCellMouse),v$n.on("rightclick",this,this.onCellMouse),v$n.on("mouseover",this,this.onCellMouse),v$n.on("mouseout",this,this.onCellMouse),v$n.on("mousedown",this,this.onCellMouse),v$n.on("mouseup",this,this.onCellMouse),this._cells.push(v$n)},v$U.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var v$n=0,v$a=v$n=0;v$a<1e4;v$a++){var v$U=this.getChildByName("item"+v$a);if(!v$U)break;this.addCell(v$U),v$n++}this.repeatY=v$n}},v$U.setContentSize=function(v$n,v$a){this._content.width=v$n,this._content.height=v$a,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new v$P),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,v$n,v$a),this._content.scrollRect=this._content.scrollRect),this.event("resize")},v$U.onCellMouse=function(v$n){"mousedown"===v$n.type&&(this._isMoved=!1);var v$a=v$n.currentTarget,v$U=this._startIndex+this._cells.indexOf(v$a);v$U<0||("click"===v$n.type||"rightclick"===v$n.type?this.selectEnable&&!this._isMoved?this.selectedIndex=v$U:this.changeCellState(v$a,!0,0):"mouseover"!==v$n.type&&"mouseout"!==v$n.type||this._selectedIndex===v$U||this.changeCellState(v$a,"mouseover"===v$n.type,0),this.mouseHandler&&this.mouseHandler.runWith([v$n,v$U]))},v$U.changeCellState=function(v$n,v$a,v$U){var v$x=v$n.getChildByName("selectBox");v$x&&(this.selectEnable=!0,v$x.visible=v$a,v$x.index=v$U)},v$U.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},v$U.onScrollBarChange=function(v$n){this.runCallLater(this.changeCells);var v$a=this._scrollBar.value,v$U=this._isVertical?this.repeatX:this.repeatY,v$x=this._isVertical?this.repeatY:this.repeatX,v$D=Math.floor(v$a/this._cellSize);if(this.cacheContent)v$Q=v$x+1,this._createdLine-v$D<v$Q&&(this._createItems(this._createdLine,v$U,this._createdLine+v$Q),this.renderItems(this._createdLine*v$U,0),this._createdLine+=v$Q);else{var v$p=v$D*v$U,v$Q=0;if(v$p>this._startIndex){v$Q=v$p-this._startIndex;var v$V=!0,v$y=this._startIndex+v$U*(v$x+1);this._isMoved=!0}else v$p<this._startIndex&&(v$Q=this._startIndex-v$p,v$V=!1,v$y=this._startIndex-1,this._isMoved=!0);for(var v$R=0;v$R<v$Q;v$R++){if(v$V){var v$X=this._cells.shift();this._cells[this._cells.length]=v$X;var v$z=v$y+v$R}else v$X=this._cells.pop(),this._cells.unshift(v$X),v$z=v$y-v$R;var v$i=Math.floor(v$z/v$U)*this._cellSize;this._isVertical?v$X.y=v$i:v$X.x=v$i,this.renderItem(v$X,v$z)}this._startIndex=v$p,this.changeSelectStatus()}var v$q=this._content.scrollRect;this._isVertical?(v$q.y=v$a-this._offset.y,v$q.x=-this._offset.x):(v$q.y=-this._offset.y,v$q.x=v$a-this._offset.x),this._content.scrollRect=v$q},v$U.posCell=function(v$n,v$a){if(this._scrollBar){var v$U=this._isVertical?this.repeatX:this.repeatY,v$x=(this._isVertical?this.repeatY:this.repeatX,Math.floor(v$a/v$U)*this._cellSize);this._isVertical?v$n.y=v$x:v$n.x=v$x}},v$U.changeSelectStatus=function(){for(var v$n=0,v$a=this._cells.length;v$n<v$a;v$n++)this.changeCellState(this._cells[v$n],this._selectedIndex===this._startIndex+v$n,1)},v$U.renderItems=function(v$n,v$a){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0);for(var v$U=v$n,v$x=v$a||this._cells.length;v$U<v$x;v$U++)this.renderItem(this._cells[v$U],this._startIndex+v$U);this.changeSelectStatus()},v$U.renderItem=function(v$n,v$a){this._array&&0<=v$a&&v$a<this._array.length?(v$n.visible=!0,v$n._$bindData?(v$n._dataSource=this._array[v$a],this._bindData(v$n,this._array[v$a])):v$n.dataSource=this._array[v$a],this.cacheContent||this.posCell(v$n,v$a),this.hasListener("render")&&this.event("render",[v$n,v$a]),this.renderHandler&&this.renderHandler.runWith([v$n,v$a])):(v$n.visible=!1,v$n.dataSource=null)},v$U._bindData=function(v$n,v$a){for(var v$U=v$n._$bindData,v$x=0,v$D=v$U.length;v$x<v$D;v$x++){var v$p=v$U[v$x++],v$Q=v$U[v$x++],v$V=v$U[v$x],v$y=v$Z.getBindFun(v$V);v$p[v$Q]=v$y.call(this,v$a)}},v$U.refresh=function(){this.array=this._array},v$U.getItem=function(v$n){return-1<v$n&&v$n<this._array.length?this._array[v$n]:null},v$U.changeItem=function(v$n,v$a){-1<v$n&&v$n<this._array.length&&(this._array[v$n]=v$a,v$n>=this._startIndex&&v$n<this._startIndex+this._cells.length&&this.renderItem(this.getCell(v$n),v$n))},v$U.setItem=function(v$n,v$a){this.changeItem(v$n,v$a)},v$U.addItem=function(v$n){this._array.push(v$n),this.array=this._array},v$U.addItemAt=function(v$n,v$a){this._array.splice(v$a,0,v$n),this.array=this._array},v$U.deleteItem=function(v$n){this._array.splice(v$n,1),this.array=this._array},v$U.getCell=function(v$n){return this.runCallLater(this.changeCells),-1<v$n&&this._cells?this._cells[(v$n-this._startIndex)%this._cells.length]:null},v$U.scrollTo=function(v$n){if(this._scrollBar){var v$a=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(v$n/v$a)*this._cellSize}else this.startIndex=v$n},v$U.tweenTo=function(v$n,v$a,v$U){if(void 0===v$a&&(v$a=200),this._scrollBar){var v$x=this._isVertical?this.repeatX:this.repeatY;v$k.to(this._scrollBar,{value:Math.floor(v$n/v$x)*this._cellSize},v$a,null,v$U,0,!0)}else this.startIndex=v$n,v$U&&v$U.run()},v$U._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},v$U.commitMeasure=function(){this.runCallLater(this.changeCells)},v$Q(0,v$U,"cacheAs",v$n.prototype._$get_cacheAs,function(v$n){v$m.superSet(v$I,this,"cacheAs",v$n),this._scrollBar&&(this._$P.cacheAs=null,"none"!==v$n?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),v$Q(0,v$U,"content",function(){return this._content}),v$Q(0,v$U,"height",v$n.prototype._$get_height,function(v$n){v$n!=this._height&&(v$m.superSet(v$I,this,"height",v$n),this._setCellChanged())}),v$Q(0,v$U,"itemRender",function(){return this._itemRender},function(v$n){if(this._itemRender!=v$n){this._itemRender=v$n;for(var v$a=this._cells.length-1;-1<v$a;v$a--)this._cells[v$a].destroy();this._cells.length=0,this._setCellChanged()}}),v$Q(0,v$U,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(v$n){this._removePreScrollBar();var v$a=new v$an;v$a.name="scrollBar",v$a.right=0,v$n&&" "!=v$n&&(v$a.skin=v$n),this.scrollBar=v$a,this.addChild(v$a),this._setCellChanged()}),v$Q(0,v$U,"page",function(){return this._page},function(v$n){this._page=v$n,this._array&&(this._page=0<v$n?v$n:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),v$Q(0,v$U,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(v$n){this._removePreScrollBar();var v$a=new v$s;v$a.name="scrollBar",v$a.bottom=0,v$n&&" "!=v$n&&(v$a.skin=v$n),this.scrollBar=v$a,this.addChild(v$a),this._setCellChanged()}),v$Q(0,v$U,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(v$n){this._repeatX=v$n,this._setCellChanged()}),v$Q(0,v$U,"scrollBar",function(){return this._scrollBar},function(v$n){this._scrollBar!=v$n&&(this._scrollBar=v$n)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),v$Q(0,v$U,"width",v$n.prototype._$get_width,function(v$n){v$n!=this._width&&(v$m.superSet(v$I,this,"width",v$n),this._setCellChanged())}),v$Q(0,v$U,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(v$n){this._repeatY=v$n,this._setCellChanged()}),v$Q(0,v$U,"spaceX",function(){return this._spaceX},function(v$n){this._spaceX=v$n,this._setCellChanged()}),v$Q(0,v$U,"spaceY",function(){return this._spaceY},function(v$n){this._spaceY=v$n,this._setCellChanged()}),v$Q(0,v$U,"selectedIndex",function(){return this._selectedIndex},function(v$n){this._selectedIndex!=v$n&&(this._selectedIndex=v$n,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(v$n),this.startIndex=this._startIndex)}),v$Q(0,v$U,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(v$n){this.selectedIndex=this._array.indexOf(v$n)}),v$Q(0,v$U,"length",function(){return this._array?this._array.length:0}),v$Q(0,v$U,"selection",function(){return this.getCell(this._selectedIndex)},function(v$n){this.selectedIndex=this._startIndex+this._cells.indexOf(v$n)}),v$Q(0,v$U,"startIndex",function(){return this._startIndex},function(v$n){this._startIndex=0<v$n?v$n:0,this.callLater(this.renderItems)}),v$Q(0,v$U,"array",function(){return this._array},function(v$n){this.runCallLater(this.changeCells),this._array=v$n||[];var v$a=this._array.length;if(this.totalPage=Math.ceil(v$a/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<v$a?this._selectedIndex:v$a-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var v$U=this._isVertical?this.repeatX:this.repeatY,v$x=this._isVertical?this.repeatY:this.repeatX,v$D=Math.ceil(v$a/v$U);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=v$x/v$D,this._scrollBar.setScroll(0,(v$D-v$x)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),v$Q(0,v$U,"dataSource",v$n.prototype._$get_dataSource,function(v$n){"number"==typeof(this._dataSource=v$n)&&Math.floor(v$n)==v$n||"string"==typeof v$n?this.selectedIndex=parseInt(v$n):v$n instanceof Array?this.array=v$n:v$m.superSet(v$I,this,"dataSource",v$n)}),v$Q(0,v$U,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),v$a}(v$I),v$s=function(v$n){function v$a(){v$a.__super.call(this)}return v$p(v$a,"laya.ui.HScrollBar",v$n),v$a.prototype.initialize=function(){v$n.prototype.initialize.call(this),this.slider.isVertical=!1},v$a}(v$f),v$C=function(v$n){function v$a(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,v$a.__super.call(this),this.width=this.height=100}v$p(v$a,"laya.ui.Panel",v$n);var v$U=v$a.prototype;return v$U.destroy=function(v$n){void 0===v$n&&(v$n=!0),laya.ui.Component.prototype.destroy.call(this,v$n),this._content&&this._content.destroy(v$n),this._vScrollBar&&this._vScrollBar.destroy(v$n),this._hScrollBar&&this._hScrollBar.destroy(v$n),this._vScrollBar=null,this._hScrollBar=null,this._content=null},v$U.destroyChildren=function(){this._content.destroyChildren()},v$U.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new v$I)},v$U.addChild=function(v$n){return v$n.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(v$n)},v$U.onResize=function(){this._setScrollChanged()},v$U.addChildAt=function(v$n,v$a){return v$n.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(v$n,v$a)},v$U.removeChild=function(v$n){return v$n.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(v$n)},v$U.removeChildAt=function(v$n){return this.getChildAt(v$n).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(v$n)},v$U.removeChildren=function(v$n,v$a){return void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=2147483647),this._content.removeChildren(v$n,v$a),this._setScrollChanged(),this},v$U.getChildAt=function(v$n){return this._content.getChildAt(v$n)},v$U.getChildByName=function(v$n){return this._content.getChildByName(v$n)},v$U.getChildIndex=function(v$n){return this._content.getChildIndex(v$n)},v$U.changeScroll=function(){this._scrollChanged=!1;var v$n=this.contentWidth||1,v$a=this.contentHeight||1,v$U=this._vScrollBar,v$x=this._hScrollBar,v$D=v$U&&v$a>this._height,v$p=v$x&&v$n>this._width,v$Q=v$D?this._width-v$U.width:this._width,v$V=v$p?this._height-v$x.height:this._height;v$U&&(v$U.x=this._width-v$U.width,v$U.y=0,v$U.height=this._height-(v$p?v$x.height:0),v$U.scrollSize=Math.max(.033*this._height,1),v$U.thumbPercent=v$V/v$a,v$U.setScroll(0,v$a-v$V,v$U.value)),v$x&&(v$x.x=0,v$x.y=this._height-v$x.height,v$x.width=this._width-(v$D?v$U.width:0),v$x.scrollSize=Math.max(.033*this._width,1),v$x.thumbPercent=v$Q/v$n,v$x.setScroll(0,v$n-v$Q,v$x.value))},v$U.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},v$U.setContentSize=function(v$n,v$a){var v$U=this._content;v$U.width=v$n,v$U.height=v$a,v$U.scrollRect||(v$U.scrollRect=new v$P),v$U.scrollRect.setTo(0,0,v$n,v$a),v$U.scrollRect=v$U.scrollRect},v$U.onScrollBarChange=function(v$n){var v$a=this._content.scrollRect;if(v$a){var v$U=Math.round(v$n.value);v$n.isVertical?v$a.y=v$U:v$a.x=v$U,this._content.scrollRect=v$a}},v$U.scrollTo=function(v$n,v$a){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),this.vScrollBar&&(this.vScrollBar.value=v$a),this.hScrollBar&&(this.hScrollBar.value=v$n)},v$U.refresh=function(){this.changeScroll()},v$U.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=v$m.superGet(v$I,this,"cacheAs")),v$m.superSet(v$I,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},v$U.onScrollEnd=function(){v$m.superSet(v$I,this,"cacheAs",this._$P.cacheAs)},v$U._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},v$Q(0,v$U,"numChildren",function(){return this._content.numChildren}),v$Q(0,v$U,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(v$n){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new v$s),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=v$n}),v$Q(0,v$U,"contentWidth",function(){for(var v$n=0,v$a=this._content.numChildren-1;-1<v$a;v$a--){var v$U=this._content.getChildAt(v$a);v$n=Math.max(v$U.x+v$U.width*v$U.scaleX,v$n)}return v$n}),v$Q(0,v$U,"contentHeight",function(){for(var v$n=0,v$a=this._content.numChildren-1;-1<v$a;v$a--){var v$U=this._content.getChildAt(v$a);v$n=Math.max(v$U.y+v$U.height*v$U.scaleY,v$n)}return v$n}),v$Q(0,v$U,"width",v$n.prototype._$get_width,function(v$n){v$m.superSet(v$I,this,"width",v$n),this._setScrollChanged()}),v$Q(0,v$U,"hScrollBar",function(){return this._hScrollBar}),v$Q(0,v$U,"content",function(){return this._content}),v$Q(0,v$U,"height",v$n.prototype._$get_height,function(v$n){v$m.superSet(v$I,this,"height",v$n),this._setScrollChanged()}),v$Q(0,v$U,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(v$n){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new v$an),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=v$n}),v$Q(0,v$U,"vScrollBar",function(){return this._vScrollBar}),v$Q(0,v$U,"cacheAs",v$n.prototype._$get_cacheAs,function(v$n){v$m.superSet(v$I,this,"cacheAs",v$n),this._$P.cacheAs=null,"none"!==v$n?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),v$a}(v$I),v$t=function(v$n){function v$a(v$n){v$a.__super.call(this,v$n),this.isVertical=!1}return v$p(v$a,"laya.ui.HSlider",v$F),v$a}(),v$r=function(v$n){function v$U(v$n,v$a){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,v$U.__super.call(this),this.skin=v$a,this.labels=v$n}v$p(v$U,"laya.ui.UIGroup",v$n);var v$a=v$U.prototype;return v$m.imps(v$a,{"laya.ui.IItem":!0}),v$a.preinitialize=function(){this.mouseEnabled=!0},v$a.destroy=function(v$n){void 0===v$n&&(v$n=!0),laya.ui.Component.prototype.destroy.call(this,v$n),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},v$a.addItem=function(v$n,v$a){void 0===v$a&&(v$a=!0);var v$U=v$n,v$x=this._items.length;if(v$U.name="item"+v$x,this.addChild(v$U),this.initItems(),v$a&&0<v$x){var v$D=this._items[v$x-1];"horizontal"==this._direction?v$U.x=v$D.x+v$D.width+this._space:v$U.y=v$D.y+v$D.height+this._space}else v$a&&(v$U.x=0,v$U.y=0);return v$x},v$a.delItem=function(v$n,v$a){void 0===v$a&&(v$a=!0);var v$U=this._items.indexOf(v$n);if(-1!=v$U){var v$x=v$n;this.removeChild(v$x);for(var v$D=v$U+1,v$p=this._items.length;v$D<v$p;v$D++){var v$Q=this._items[v$D];v$Q.name="item"+(v$D-1),v$a&&("horizontal"==this._direction?v$Q.x-=v$x.width+this._space:v$Q.y-=v$x.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var v$V;v$V=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=v$V}}},v$a.initItems=function(){this._items||(this._items=[]);for(var v$n=this._items.length=0;v$n<1e4;v$n++){var v$a=this.getChildByName("item"+v$n);if(null==v$a)break;this._items.push(v$a),v$a.selected=v$n===this._selectedIndex,v$a.clickHandler=v$i.create(this,this.itemClick,[v$n],!1)}},v$a.itemClick=function(v$n){this.selectedIndex=v$n},v$a.setSelect=function(v$n,v$a){this._items&&-1<v$n&&v$n<this._items.length&&(this._items[v$n].selected=v$a)},v$a.createItem=function(v$n,v$a){return null},v$a.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var v$n=0,v$a=0,v$U=this._items.length;v$a<v$U;v$a++){var v$x=this._items[v$a];this._skin&&(v$x.skin=this._skin),this._labelColors&&(v$x.labelColors=this._labelColors),this._labelSize&&(v$x.labelSize=this._labelSize),this._labelStroke&&(v$x.labelStroke=this._labelStroke),this._labelStrokeColor&&(v$x.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(v$x.strokeColors=this._strokeColors),this._labelBold&&(v$x.labelBold=this._labelBold),this._labelPadding&&(v$x.labelPadding=this._labelPadding),this._labelAlign&&(v$x.labelAlign=this._labelAlign),this._stateNum&&(v$x.stateNum=this._stateNum),this._labelFont&&(v$x.labelFont=this._labelFont),"horizontal"===this._direction?(v$x.y=0,v$x.x=v$n,v$n+=v$x.width+this._space):(v$x.x=0,v$x.y=v$n,v$n+=v$x.height+this._space)}this.changeSize()},v$a.commitMeasure=function(){this.runCallLater(this.changeLabels)},v$a._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},v$Q(0,v$a,"labelStrokeColor",function(){return this._labelStrokeColor},function(v$n){this._labelStrokeColor!=v$n&&(this._labelStrokeColor=v$n,this._setLabelChanged())}),v$Q(0,v$a,"skin",function(){return this._skin},function(v$n){this._skin!=v$n&&(this._skin=v$n,this._setLabelChanged())}),v$Q(0,v$a,"selectedIndex",function(){return this._selectedIndex},function(v$n){this._selectedIndex!=v$n&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=v$n,this.setSelect(v$n,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),v$Q(0,v$a,"labels",function(){return this._labels},function(v$n){if(this._labels!=v$n){if(this._labels=v$n,this.removeChildren(),this._setLabelChanged(),this._labels)for(var v$a=this._labels.split(","),v$U=0,v$x=v$a.length;v$U<v$x;v$U++){var v$D=this.createItem(this._skin,v$a[v$U]);v$D.name="item"+v$U,this.addChild(v$D)}this.initItems()}}),v$Q(0,v$a,"strokeColors",function(){return this._strokeColors},function(v$n){this._strokeColors!=v$n&&(this._strokeColors=v$n,this._setLabelChanged())}),v$Q(0,v$a,"labelColors",function(){return this._labelColors},function(v$n){this._labelColors!=v$n&&(this._labelColors=v$n,this._setLabelChanged())}),v$Q(0,v$a,"labelStroke",function(){return this._labelStroke},function(v$n){this._labelStroke!=v$n&&(this._labelStroke=v$n,this._setLabelChanged())}),v$Q(0,v$a,"labelSize",function(){return this._labelSize},function(v$n){this._labelSize!=v$n&&(this._labelSize=v$n,this._setLabelChanged())}),v$Q(0,v$a,"stateNum",function(){return this._stateNum},function(v$n){this._stateNum!=v$n&&(this._stateNum=v$n,this._setLabelChanged())}),v$Q(0,v$a,"labelBold",function(){return this._labelBold},function(v$n){this._labelBold!=v$n&&(this._labelBold=v$n,this._setLabelChanged())}),v$Q(0,v$a,"labelFont",function(){return this._labelFont},function(v$n){this._labelFont!=v$n&&(this._labelFont=v$n,this._setLabelChanged())}),v$Q(0,v$a,"labelPadding",function(){return this._labelPadding},function(v$n){this._labelPadding!=v$n&&(this._labelPadding=v$n,this._setLabelChanged())}),v$Q(0,v$a,"direction",function(){return this._direction},function(v$n){this._direction=v$n,this._setLabelChanged()}),v$Q(0,v$a,"space",function(){return this._space},function(v$n){this._space=v$n,this._setLabelChanged()}),v$Q(0,v$a,"items",function(){return this._items}),v$Q(0,v$a,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(v$n){this.selectedIndex=this._items.indexOf(v$n)}),v$Q(0,v$a,"dataSource",v$n.prototype._$get_dataSource,function(v$n){"number"==typeof(this._dataSource=v$n)&&Math.floor(v$n)==v$n||"string"==typeof v$n?this.selectedIndex=parseInt(v$n):v$n instanceof Array?this.labels=v$n.join(","):v$m.superSet(v$I,this,"dataSource",v$n)}),v$U}(v$I),v$J=function(v$a){function v$U(v$n,v$a){this._value=null,void 0===v$a&&(v$a=""),v$U.__super.call(this,v$n,v$a)}v$p(v$U,"laya.ui.Radio",v$a);var v$n=v$U.prototype;return v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._value=null},v$n.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},v$n.initialize=function(){v$a.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},v$n.onClick=function(v$n){this.selected=!0},v$Q(0,v$n,"value",function(){return null!=this._value?this._value:this.label},function(v$n){this._value=v$n}),v$U}(v$v),v$e=function(v$n){function v$a(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,v$a.__super.call(this),this.width=this.height=200}v$p(v$a,"laya.ui.Tree",v$n);var v$U=v$a.prototype;return v$m.imps(v$U,{"laya.ui.IRender":!0}),v$U.destroy=function(v$n){void 0===v$n&&(v$n=!0),laya.ui.Component.prototype.destroy.call(this,v$n),this._list&&this._list.destroy(v$n),this._list=null,this._source=null,this._renderHandler=null},v$U.createChildren=function(){this.addChild(this._list=new v$w),this._list.renderHandler=v$i.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},v$U.onListChange=function(v$n){this.event("change")},v$U.getArray=function(){var v$n,v$a=[];for(var v$U in this._source)v$n=this._source[v$U],this.getParentOpenStatus(v$n)&&(v$n.x=this._spaceLeft*this.getDepth(v$n),v$a.push(v$n));return v$a},v$U.getDepth=function(v$n,v$a){return void 0===v$a&&(v$a=0),null==v$n.nodeParent?v$a:this.getDepth(v$n.nodeParent,v$a+1)},v$U.getParentOpenStatus=function(v$n){var v$a=v$n.nodeParent;return null==v$a||!!v$a.isOpen&&(null==v$a.nodeParent||this.getParentOpenStatus(v$a))},v$U.renderItem=function(v$n,v$a){var v$U=v$n.dataSource;if(v$U){v$n.left=v$U.x;var v$x=v$n.getChildByName("arrow");v$x&&(v$U.hasChild?(v$x.visible=!0,v$x.index=v$U.isOpen?1:0,v$x.tag=v$a,v$x.off("click",this,this.onArrowClick),v$x.on("click",this,this.onArrowClick)):v$x.visible=!1);var v$D=v$n.getChildByName("folder");v$D&&(2==v$D.clipY?v$D.index=v$U.isDirectory?0:1:v$D.index=v$U.isDirectory?v$U.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([v$n,v$a])}},v$U.onArrowClick=function(v$n){var v$a=v$n.currentTarget.tag;this._list.array[v$a].isOpen=!this._list.array[v$a].isOpen,this.event("open"),this._list.array=this.getArray()},v$U.setItemState=function(v$n,v$a){this._list.array[v$n]&&(this._list.array[v$n].isOpen=v$a,this._list.array=this.getArray())},v$U.fresh=function(){this._list.array=this.getArray(),this.repaint()},v$U.parseXml=function(v$n,v$a,v$U,v$x){var v$D,v$p=v$n.childNodes,v$Q=v$p.length;if(!v$x){v$D={};var v$V,v$y=v$n.attributes;for(var v$R in v$y){var v$X=(v$V=v$y[v$R]).nodeName,v$z=v$V.nodeValue;v$D[v$X]="true"==v$z||"false"!=v$z&&v$z}v$D.nodeParent=v$U,0<v$Q&&(v$D.isDirectory=!0),v$D.hasChild=0<v$Q,v$a.push(v$D)}for(var v$i=0;v$i<v$Q;v$i++){var v$q=v$p[v$i];this.parseXml(v$q,v$a,v$D,!1)}},v$U.parseOpenStatus=function(v$n,v$a){for(var v$U=0,v$x=v$a.length;v$U<v$x;v$U++){var v$D=v$a[v$U];if(v$D.isDirectory)for(var v$p=0,v$Q=v$n.length;v$p<v$Q;v$p++){var v$V=v$n[v$p];if(v$V.isDirectory&&this.isSameParent(v$V,v$D)&&v$D.label==v$V.label){v$D.isOpen=v$V.isOpen;break}}}},v$U.isSameParent=function(v$n,v$a){return null==v$n.nodeParent&&null==v$a.nodeParent||null!=v$n.nodeParent&&null!=v$a.nodeParent&&(v$n.nodeParent.label==v$a.nodeParent.label&&this.isSameParent(v$n.nodeParent,v$a.nodeParent))},v$U.filter=function(v$n){if(Boolean(v$n)){var v$a=[];this.getFilterSource(this._source,v$a,v$n),this._list.array=v$a}else this._list.array=this.getArray()},v$U.getFilterSource=function(v$n,v$a,v$U){var v$x;for(var v$D in v$U=v$U.toLocaleLowerCase(),v$n)!(v$x=v$n[v$D]).isDirectory&&-1<String(v$x.label).toLowerCase().indexOf(v$U)&&(v$x.x=0,v$a.push(v$x)),v$x.child&&0<v$x.child.length&&this.getFilterSource(v$x.child,v$a,v$U)},v$Q(0,v$U,"spaceBottom",function(){return this._list.spaceY},function(v$n){this._list.spaceY=v$n}),v$Q(0,v$U,"keepStatus",function(){return this._keepStatus},function(v$n){this._keepStatus=v$n}),v$Q(0,v$U,"itemRender",function(){return this._list.itemRender},function(v$n){this._list.itemRender=v$n}),v$Q(0,v$U,"array",function(){return this._list.array},function(v$n){this._keepStatus&&this._list.array&&v$n&&this.parseOpenStatus(this._list.array,v$n),this._source=v$n,this._list.array=this.getArray()}),v$Q(0,v$U,"mouseHandler",function(){return this._list.mouseHandler},function(v$n){this._list.mouseHandler=v$n}),v$Q(0,v$U,"dataSource",v$n.prototype._$get_dataSource,function(v$n){this._dataSource=v$n,v$m.superSet(v$I,this,"dataSource",v$n)}),v$Q(0,v$U,"source",function(){return this._source}),v$Q(0,v$U,"scrollBar",function(){return this._list.scrollBar}),v$Q(0,v$U,"list",function(){return this._list}),v$Q(0,v$U,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(v$n){this._list.vScrollBarSkin=v$n}),v$Q(0,v$U,"renderHandler",function(){return this._renderHandler},function(v$n){this._renderHandler=v$n}),v$Q(0,v$U,"selectedIndex",function(){return this._list.selectedIndex},function(v$n){this._list.selectedIndex=v$n}),v$Q(0,v$U,"spaceLeft",function(){return this._spaceLeft},function(v$n){this._spaceLeft=v$n}),v$Q(0,v$U,"selectedItem",function(){return this._list.selectedItem},function(v$n){this._list.selectedItem=v$n}),v$Q(0,v$U,"width",v$n.prototype._$get_width,function(v$n){v$m.superSet(v$I,this,"width",v$n),this._list.width=v$n}),v$Q(0,v$U,"height",v$n.prototype._$get_height,function(v$n){v$m.superSet(v$I,this,"height",v$n),this._list.height=v$n}),v$Q(0,v$U,"xml",null,function(v$n){var v$a=[];this.parseXml(v$n.childNodes[0],v$a,null,!0),this.array=v$a}),v$Q(0,v$U,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),v$a}(v$I),v$nn=function(v$n){function v$a(){this._items=null,this._selectedIndex=0,v$a.__super.call(this),this._setIndexHandler=v$i.create(this,this.setIndex,null,!1)}v$p(v$a,"laya.ui.ViewStack",v$n);var v$U=v$a.prototype;return v$m.imps(v$U,{"laya.ui.IItem":!0}),v$U.setItems=function(v$n){this.removeChildren();for(var v$a=0,v$U=0,v$x=v$n.length;v$U<v$x;v$U++){var v$D=v$n[v$U];v$D&&(v$D.name="item"+v$a,this.addChild(v$D),v$a++)}this.initItems()},v$U.addItem=function(v$n){v$n.name="item"+this._items.length,this.addChild(v$n),this.initItems()},v$U.initItems=function(){this._items=[];for(var v$n=0;v$n<1e4;v$n++){var v$a=this.getChildByName("item"+v$n);if(null==v$a)break;this._items.push(v$a),v$a.visible=v$n==this._selectedIndex}},v$U.setSelect=function(v$n,v$a){this._items&&-1<v$n&&v$n<this._items.length&&(this._items[v$n].visible=v$a)},v$U.setIndex=function(v$n){this.selectedIndex=v$n},v$Q(0,v$U,"dataSource",v$n.prototype._$get_dataSource,function(v$n){if("number"==typeof(this._dataSource=v$n)&&Math.floor(v$n)==v$n||"string"==typeof v$n)this.selectedIndex=parseInt(v$n);else for(var v$a in this._dataSource)this.hasOwnProperty(v$a)&&(this[v$a]=this._dataSource[v$a])}),v$Q(0,v$U,"selectedIndex",function(){return this._selectedIndex},function(v$n){this._selectedIndex!=v$n&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=v$n,this.setSelect(this._selectedIndex,!0))}),v$Q(0,v$U,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(v$n){this.selectedIndex=this._items.indexOf(v$n)}),v$Q(0,v$U,"items",function(){return this._items}),v$Q(0,v$U,"setIndexHandler",function(){return this._setIndexHandler},function(v$n){this._setIndexHandler=v$n}),v$a}(v$I),v$an=function(v$n){function v$a(){v$a.__super.call(this)}return v$p(v$a,"laya.ui.VScrollBar",v$f),v$a}(),v$Un=function(v$a){function v$U(v$n){this._bg=null,this._skin=null,v$U.__super.call(this),void 0===v$n&&(v$n=""),this.text=v$n,this.skin=this.skin}v$p(v$U,"laya.ui.TextInput",v$a);var v$n=v$U.prototype;return v$n.preinitialize=function(){this.mouseEnabled=!0},v$n.destroy=function(v$n){v$A.clearCache(this,this._skin),void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._bg&&this._bg.destroy(),this._bg=null},v$n.createChildren=function(){this.addChild(this._tf=new v$q),this._tf.padding=v$M.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},v$n._onFocus=function(){this.event("focus",this)},v$n._onBlur=function(){this.event("blur",this)},v$n._onInput=function(){this.event("input",this)},v$n._onEnter=function(){this.event("enter",this)},v$n.initialize=function(){this.width=128,this.height=22},v$n.select=function(){this._tf.select()},v$n.setSelection=function(v$n,v$a){this._tf.setSelection(v$n,v$a)},v$Q(0,v$n,"text",v$a.prototype._$get_text,function(v$n){this._tf.text!=v$n&&(v$n+="",this._tf.text=v$n,this.event("change"))}),v$Q(0,v$n,"bg",function(){return this._bg},function(v$n){this.graphics=this._bg=v$n}),v$Q(0,v$n,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(v$n){this._tf.inputElementYAdjuster=v$n}),v$Q(0,v$n,"multiline",function(){return this._tf.multiline},function(v$n){this._tf.multiline=v$n}),v$Q(0,v$n,"skin",function(){return this._skin},function(v$n){this._skin!=v$n&&(v$A.clearCache(this,this._skin),this._skin=v$n,this._bg||(this.graphics=this._bg=new v$c),v$A.keepCache(this,this._skin),this._bg.source=v$A.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),v$Q(0,v$n,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(v$n){this._bg||(this.graphics=this._bg=new v$c),this._bg.sizeGrid=v$Z.fillArray(v$M.defaultSizeGrid,v$n,Number)}),v$Q(0,v$n,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(v$n){this._tf.inputElementXAdjuster=v$n}),v$Q(0,v$n,"width",v$a.prototype._$get_width,function(v$n){v$m.superSet(v$o,this,"width",v$n),this._bg&&(this._bg.width=v$n)}),v$Q(0,v$n,"height",v$a.prototype._$get_height,function(v$n){v$m.superSet(v$o,this,"height",v$n),this._bg&&(this._bg.height=v$n)}),v$Q(0,v$n,"editable",function(){return this._tf.editable},function(v$n){this._tf.editable=v$n}),v$Q(0,v$n,"restrict",function(){return this._tf.restrict},function(v$n){this._tf.restrict=v$n}),v$Q(0,v$n,"prompt",function(){return this._tf.prompt},function(v$n){this._tf.prompt=v$n}),v$Q(0,v$n,"promptColor",function(){return this._tf.promptColor},function(v$n){this._tf.promptColor=v$n}),v$Q(0,v$n,"maxChars",function(){return this._tf.maxChars},function(v$n){this._tf.maxChars=v$n}),v$Q(0,v$n,"focus",function(){return this._tf.focus},function(v$n){this._tf.focus=v$n}),v$Q(0,v$n,"type",function(){return this._tf.type},function(v$n){this._tf.type=v$n}),v$Q(0,v$n,"asPassword",function(){return this._tf.asPassword},function(v$n){this._tf.asPassword=v$n}),v$U}(v$o),v$xn=function(v$n){function v$a(){v$a.__super.call(this)}return v$p(v$a,"laya.ui.VSlider",v$F),v$a}(),v$Dn=function(v$n){function v$x(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,v$x.__super.call(this)}v$p(v$x,"laya.ui.Dialog",v$n);var v$a=v$x.prototype;return v$a.initialize=function(){this.popupEffect=v$x.manager.popupEffectHandler,this.closeEffect=v$x.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},v$a._dealDragArea=function(){var v$n=this.getChildByName("drag");v$n&&(this.dragArea=v$n.x+","+v$n.y+","+v$n.width+","+v$n.height,v$n.removeSelf())},v$a._onClick=function(v$n){var v$a=v$n.target;if(v$a)switch(v$a.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(v$a.name)}},v$a.show=function(v$n,v$a){void 0===v$n&&(v$n=!1),void 0===v$a&&(v$a=!0),this._open(!1,v$n,v$a)},v$a.popup=function(v$n,v$a){void 0===v$n&&(v$n=!1),void 0===v$a&&(v$a=!0),this._open(!0,v$n,v$a)},v$a._open=function(v$n,v$a,v$U){v$x.manager.lock(!1),this.isModal=v$n,v$x.manager.open(this,v$a,v$U)},v$a.onOpened=function(){},v$a.close=function(v$n,v$a){void 0===v$a&&(v$a=!0),v$x.manager.close(this,v$n,v$a)},v$a.onClosed=function(v$n){},v$a._onMouseDown=function(v$n){var v$a=this.getMousePoint();this._dragArea.contains(v$a.x,v$a.y)?this.startDrag():this.stopDrag()},v$Q(0,v$a,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(v$n){if(v$n){var v$a=v$Z.fillArray([0,0,0,0],v$n,Number);this._dragArea=new v$P(v$a[0],v$a[1],v$a[2],v$a[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),v$Q(0,v$a,"isPopup",function(){return null!=this.parent}),v$Q(0,v$a,"zOrder",v$n.prototype._$get_zOrder,function(v$n){v$m.superSet(v$O,this,"zOrder",v$n),v$x.manager._checkMask()}),v$Q(1,v$x,"manager",function(){return v$x._manager=v$x._manager||new v$G},function(v$n){v$x._manager=v$n}),v$x.setLockView=function(v$n){v$x.manager.setLockView(v$n)},v$x.lock=function(v$n){v$x.manager.lock(v$n)},v$x.closeAll=function(){v$x.manager.closeAll()},v$x.getDialogsByGroup=function(v$n){return v$x.manager.getDialogsByGroup(v$n)},v$x.closeByGroup=function(v$n){return v$x.manager.closeByGroup(v$n)},v$x.CLOSE="close",v$x.CANCEL="cancel",v$x.SURE="sure",v$x.NO="no",v$x.OK="ok",v$x.YES="yes",v$x._manager=null,v$x}(v$O),v$pn=function(v$n){function v$a(){v$a.__super.call(this)}v$p(v$a,"laya.ui.HBox",v$n);var v$U=v$a.prototype;return v$U.sortItem=function(v$n){v$n&&v$n.sort(function(v$n,v$a){return v$n.x-v$a.x})},v$U.changeItems=function(){this._itemChanged=!1;for(var v$n=[],v$a=0,v$U=0,v$x=this.numChildren;v$U<v$x;v$U++){var v$D=this.getChildAt(v$U);v$D&&v$D.layoutEnabled&&(v$n.push(v$D),v$a=this._height?this._height:Math.max(v$a,v$D.height*v$D.scaleY))}this.sortItem(v$n);var v$p=0;for(v$U=0,v$x=v$n.length;v$U<v$x;v$U++)(v$D=v$n[v$U]).x=v$p,v$p+=v$D.width*v$D.scaleX+this._space,"top"==this._align?v$D.y=0:"middle"==this._align?v$D.y=.5*(v$a-v$D.height*v$D.scaleY):"bottom"==this._align&&(v$D.y=v$a-v$D.height*v$D.scaleY);this.changeSize()},v$Q(0,v$U,"height",v$n.prototype._$get_height,function(v$n){this._height!=v$n&&(v$m.superSet(v$d,this,"height",v$n),this.callLater(this.changeItems))}),v$a.NONE="none",v$a.TOP="top",v$a.MIDDLE="middle",v$a.BOTTOM="bottom",v$a}(v$d),v$Qn=function(v$n){function v$a(){v$a.__super.call(this)}v$p(v$a,"laya.ui.VBox",v$n);var v$U=v$a.prototype;return v$U.changeItems=function(){this._itemChanged=!1;for(var v$n=[],v$a=0,v$U=0,v$x=this.numChildren;v$U<v$x;v$U++){var v$D=this.getChildAt(v$U);v$D&&v$D.layoutEnabled&&(v$n.push(v$D),v$a=this._width?this._width:Math.max(v$a,v$D.width*v$D.scaleX))}this.sortItem(v$n);var v$p=0;for(v$U=0,v$x=v$n.length;v$U<v$x;v$U++)(v$D=v$n[v$U]).y=v$p,v$p+=v$D.height*v$D.scaleY+this._space,"left"==this._align?v$D.x=0:"center"==this._align?v$D.x=.5*(v$a-v$D.width*v$D.scaleX):"right"==this._align&&(v$D.x=v$a-v$D.width*v$D.scaleX);this.changeSize()},v$Q(0,v$U,"width",v$n.prototype._$get_width,function(v$n){this._width!=v$n&&(v$m.superSet(v$d,this,"width",v$n),this.callLater(this.changeItems))}),v$a.NONE="none",v$a.LEFT="left",v$a.CENTER="center",v$a.RIGHT="right",v$a}(v$d),v$Vn=function(v$n){function v$a(){v$a.__super.call(this)}return v$p(v$a,"laya.ui.RadioGroup",v$r),v$a.prototype.createItem=function(v$n,v$a){return new v$J(v$n,v$a)},v$a}(),v$yn=function(v$n){function v$a(){v$a.__super.call(this)}return v$p(v$a,"laya.ui.Tab",v$r),v$a.prototype.createItem=function(v$n,v$a){return new v$v(v$n,v$a)},v$a}(),v$Rn=function(v$a){function v$U(v$n){this._vScrollBar=null,this._hScrollBar=null,void 0===v$n&&(v$n=""),v$U.__super.call(this,v$n)}v$p(v$U,"laya.ui.TextArea",v$a);var v$n=v$U.prototype;return v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},v$n.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},v$n.onVBarChanged=function(v$n){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},v$n.onHBarChanged=function(v$n){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},v$n.changeScroll=function(){var v$n=this._vScrollBar&&0<this._tf.maxScrollY,v$a=this._hScrollBar&&0<this._tf.maxScrollX,v$U=v$n?this._width-this._vScrollBar.width:this._width,v$x=v$a?this._height-this._hScrollBar.height:this._height,v$D=this._tf.padding||v$M.labelPadding;this._tf.width=v$U,this._tf.height=v$x,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-v$D[2],this._vScrollBar.y=v$D[1],this._vScrollBar.height=this._height-(v$a?this._hScrollBar.height:0)-v$D[1]-v$D[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=v$x/Math.max(this._tf.textHeight,v$x),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=v$n),this._hScrollBar&&(this._hScrollBar.x=v$D[0],this._hScrollBar.y=this._height-this._hScrollBar.height-v$D[3],this._hScrollBar.width=this._width-(v$n?this._vScrollBar.width:0)-v$D[0]-v$D[2],this._hScrollBar.scrollSize=Math.max(.033*v$U,1),this._hScrollBar.thumbPercent=v$U/Math.max(this._tf.textWidth,v$U),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=v$a)},v$n.scrollTo=function(v$n){this.commitMeasure(),this._tf.scrollY=v$n},v$Q(0,v$n,"scrollY",function(){return this._tf.scrollY}),v$Q(0,v$n,"width",v$a.prototype._$get_width,function(v$n){v$m.superSet(v$Un,this,"width",v$n),this.callLater(this.changeScroll)}),v$Q(0,v$n,"hScrollBar",function(){return this._hScrollBar}),v$Q(0,v$n,"height",v$a.prototype._$get_height,function(v$n){v$m.superSet(v$Un,this,"height",v$n),this.callLater(this.changeScroll)}),v$Q(0,v$n,"maxScrollX",function(){return this._tf.maxScrollX}),v$Q(0,v$n,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(v$n){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new v$an),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=v$n}),v$Q(0,v$n,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(v$n){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new v$s),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=v$n}),v$Q(0,v$n,"vScrollBar",function(){return this._vScrollBar}),v$Q(0,v$n,"maxScrollY",function(){return this._tf.maxScrollY}),v$Q(0,v$n,"scrollX",function(){return this._tf.scrollX}),v$U}(v$Un);!function(v$n){function v$a(){this._uiView=null,this.isCloseOther=!1,v$a.__super.call(this)}v$p(v$a,"laya.ui.AsynDialog",v$Dn);var v$U=v$a.prototype;v$U.createView=function(v$n){this._uiView=v$n},v$U._open=function(v$n,v$a,v$U){this.isModal=v$n,this.isCloseOther=v$a,v$Dn.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},v$U.onCreated=function(){this.createUI(),this.onOpen()},v$U.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},v$U.onOpen=function(){v$Dn.manager.open(this,this.isCloseOther),v$Dn.manager.lock(!1)},v$U.close=function(v$n,v$a){void 0===v$a&&(v$a=!0),v$Dn.manager.close(this),this.onClose()},v$U.onClose=function(){},v$U.destroy=function(v$n){void 0===v$n&&(v$n=!0),laya.ui.View.prototype.destroy.call(this,v$n),this._uiView=null,this.onDestroy()},v$U.onDestroy=function(){}}();v$m.__init([v$O])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(v$n,v$a){"use strict";for(var v$U in Object.defineProperty(v$a,"__esModule",{value:!0}),Laya){var v$x=Laya[v$U];v$x&&v$x.__isclass&&(v$a[v$U]=v$x)}}),function(v$i,v$n,v$Y){v$Y.un,v$Y.uns;var v$z=v$Y.static,v$q=v$Y.class,v$E=v$Y.getset,v$x=v$Y.__newvec,v$K=laya.maths.Arith,v$Q=laya.webgl.atlas.AtlasResourceManager,v$U=laya.webgl.shader.BaseShader,v$H=laya.utils.Browser,v$V=laya.webgl.utils.Buffer,v$W=laya.utils.Byte,v$D=laya.utils.ClassUtils,v$y=v$Y.Config,v$p=(laya.events.Event,laya.events.EventDispatcher),v$M=laya.utils.Handler,v$P=laya.net.Loader,v$a=laya.net.LoaderManager,v$R=(laya.maths.MathUtil,laya.display.Node),v$m=laya.renders.Render,v$X=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),v$b=laya.resource.Resource,v$A=laya.utils.RunDriver,v$T=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),v$k=laya.display.Sprite,v$N=laya.utils.Stat,v$_=laya.utils.StringKey,v$Z=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),v$$=laya.utils.Utils,v$u=laya.webgl.WebGL,v$c=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;v$Y.interface("laya.d3.core.IClone"),v$Y.interface("laya.d3.graphics.IVertex"),v$Y.interface("laya.d3.core.render.IUpdate"),v$Y.interface("laya.d3.core.scene.ITreeNode"),v$Y.interface("laya.d3.core.render.IRenderable");(function(){function v$v(){}v$q(v$v,"laya.d3.animation.AnimationClipParser01"),v$v.READ_DATA=function(){v$v._DATA.offset=v$v._reader.getUint32(),v$v._DATA.size=v$v._reader.getUint32()},v$v.READ_BLOCK=function(){for(var v$n=v$v._BLOCK.count=v$v._reader.getUint16(),v$a=v$v._BLOCK.blockStarts=[],v$U=v$v._BLOCK.blockLengths=[],v$x=0;v$x<v$n;v$x++)v$a.push(v$v._reader.getUint32()),v$U.push(v$v._reader.getUint32())},v$v.READ_STRINGS=function(){var v$n=v$v._reader.getUint32(),v$a=v$v._reader.getUint16(),v$U=v$v._reader.pos;v$v._reader.pos=v$n+v$v._DATA.offset;for(var v$x=0;v$x<v$a;v$x++)v$v._strings[v$x]=v$v._reader.readUTFString();v$v._reader.pos=v$U},v$v.parse=function(v$n,v$a){v$v._animationClip=v$n;(v$v._reader=v$a).__getBuffer();v$v.READ_DATA(),v$v.READ_BLOCK(),v$v.READ_STRINGS();for(var v$U=0,v$x=v$v._BLOCK.count;v$U<v$x;v$U++){var v$D=v$a.getUint16(),v$p=v$v._strings[v$D],v$Q=v$v["READ_"+v$p];if(null==v$Q)throw new Error("model file err,no this function:"+v$D+" "+v$p);v$Q.call()}},v$v.READ_ANIMATIONS=function(){var v$n,v$a=0,v$U=0,v$x=v$v._reader,v$D=v$x.__getBuffer(),v$p=[],v$Q=v$x.getUint8();for(v$p.length=v$Q,v$a=0;v$a<v$Q;v$a++)v$p[v$a]=v$x.getUint16();var v$V=[],v$y=v$x.getUint16();for(v$V.length=v$y,v$a=0;v$a<v$y;v$a++)v$V[v$a]=v$x.getFloat32();var v$R=v$v._animationClip;v$R.name=v$v._strings[v$x.getUint16()];var v$X=v$R._duration=v$x.getFloat32();v$R.islooping=!!v$x.getByte(),v$R._frameRate=v$x.getInt16();var v$z=v$x.getInt16(),v$i=v$R._nodes=new Array;v$i.length=v$z,(v$R._publicClipDatas=[]).length=v$z;var v$q=v$R._nodesMap={},v$E=0,v$m=0;for(v$a=0;v$a<v$z;v$a++){v$n=v$i[v$a]=new v$B;var v$b=v$x.getUint16(),v$P=v$n.path=[];for(v$P.length=v$b,v$U=0;v$U<v$b;v$U++)v$P[v$U]=v$v._strings[v$x.getUint16()];var v$A=v$P.join("/"),v$T=v$q[v$A];v$T||(v$q[v$A]=v$T=[]),v$T.push(v$n);var v$K=v$x.getInt16();-1!==v$K&&(v$n.componentType=v$v._strings[v$K]);var v$Y=v$g._propertyIndexDic[v$v._strings[v$x.getUint16()]];if(null==v$Y)throw new Error("AnimationClipParser01:unknown property name.");var v$W=v$Y<4,v$k=!v$W||v$W&&""===v$P[0];(v$n._cacheProperty=v$k)?v$E++:v$m++,v$n.propertyNameID=v$Y;var v$N=v$p[v$x.getUint8()];v$n.keyFrameWidth=v$N/4;var v$_=v$n.keyFrames=[],v$$=v$_.length=v$x.getUint16(),v$M=null,v$Z=NaN;for(v$U=0;v$U<v$$;v$U++){var v$u=v$_[v$U]=new v$o;v$Z=v$u.startTime=v$V[v$x.getUint16()];var v$c=v$x.pos;v$u.inTangent=new Float32Array(v$D.slice(v$c,v$c+v$N)),v$x.pos+=v$N,v$c=v$x.pos,v$u.outTangent=new Float32Array(v$D.slice(v$c,v$c+v$N)),v$x.pos+=v$N,v$c=v$x.pos,v$u.data=new Float32Array(v$D.slice(v$c,v$c+v$N)),v$x.pos+=v$N,v$M&&(v$M.next=v$u,v$M.duration=v$Z-v$M.startTime),v$M=v$u}v$u.next=null,v$u.duration=v$X-v$Z}var v$H=v$R._nodeToCachePropertyMap=new Int32Array(v$z),v$G=v$R._cachePropertyMap=new Int32Array(v$E),v$I=v$R._unCachePropertyMap=new Int32Array(v$m);for(v$E=v$m=0,v$a=0;v$a<v$z;v$a++)(v$n=v$i[v$a])._cacheProperty?(v$H[v$a]=v$E,v$G[v$E++]=v$a):v$I[v$m++]=v$a},v$v._animationClip=null,v$v._reader=null,v$v._strings=[],v$z(v$v,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function v$f(){}v$q(v$f,"laya.d3.animation.AnimationClipParser02"),v$f.READ_DATA=function(){v$f._DATA.offset=v$f._reader.getUint32(),v$f._DATA.size=v$f._reader.getUint32()},v$f.READ_BLOCK=function(){for(var v$n=v$f._BLOCK.count=v$f._reader.getUint16(),v$a=v$f._BLOCK.blockStarts=[],v$U=v$f._BLOCK.blockLengths=[],v$x=0;v$x<v$n;v$x++)v$a.push(v$f._reader.getUint32()),v$U.push(v$f._reader.getUint32())},v$f.READ_STRINGS=function(){var v$n=v$f._reader.getUint32(),v$a=v$f._reader.getUint16(),v$U=v$f._reader.pos;v$f._reader.pos=v$n+v$f._DATA.offset;for(var v$x=0;v$x<v$a;v$x++)v$f._strings[v$x]=v$f._reader.readUTFString();v$f._reader.pos=v$U},v$f.parse=function(v$n,v$a){v$f._animationClip=v$n;(v$f._reader=v$a).__getBuffer();v$f.READ_DATA(),v$f.READ_BLOCK(),v$f.READ_STRINGS();for(var v$U=0,v$x=v$f._BLOCK.count;v$U<v$x;v$U++){var v$D=v$a.getUint16(),v$p=v$f._strings[v$D],v$Q=v$f["READ_"+v$p];if(null==v$Q)throw new Error("model file err,no this function:"+v$D+" "+v$p);v$Q.call()}},v$f.READ_ANIMATIONS=function(){var v$n,v$a=0,v$U=0,v$x=v$f._reader,v$D=v$x.__getBuffer(),v$p=[],v$Q=v$x.getUint8();for(v$p.length=v$Q,v$a=0;v$a<v$Q;v$a++)v$p[v$a]=v$x.getUint16();var v$V=[],v$y=v$x.getUint16();for(v$V.length=v$y,v$a=0;v$a<v$y;v$a++)v$V[v$a]=v$x.getFloat32();var v$R=v$f._animationClip;v$R.name=v$f._strings[v$x.getUint16()];var v$X=v$R._duration=v$x.getFloat32();v$R.islooping=!!v$x.getByte(),v$R._frameRate=v$x.getInt16();var v$z=v$x.getInt16(),v$i=v$R._nodes=new Array;v$i.length=v$z,(v$R._publicClipDatas=[]).length=v$z;var v$q=v$R._nodesMap={},v$E=0,v$m=0;for(v$a=0;v$a<v$z;v$a++){v$n=v$i[v$a]=new v$B;var v$b=v$x.getUint16(),v$P=v$n.path=[];for(v$P.length=v$b,v$U=0;v$U<v$b;v$U++)v$P[v$U]=v$f._strings[v$x.getUint16()];var v$A=v$P.join("/"),v$T=v$q[v$A];v$T||(v$q[v$A]=v$T=[]),v$T.push(v$n);var v$K=v$x.getInt16();-1!==v$K&&(v$n.componentType=v$f._strings[v$K]);var v$Y=v$g._propertyIndexDic[v$f._strings[v$x.getUint16()]];if(null==v$Y)throw new Error("AnimationClipParser02:unknown property name.");var v$W=v$Y<4,v$k=!v$W||v$W&&""===v$P[0];(v$n._cacheProperty=v$k)?v$E++:v$m++,v$n.propertyNameID=v$Y;var v$N=v$p[v$x.getUint8()];v$n.keyFrameWidth=v$N/4;var v$_=v$n.keyFrames=[],v$$=v$_.length=v$x.getUint16(),v$M=null,v$Z=NaN;for(v$U=0;v$U<v$$;v$U++){var v$u=v$_[v$U]=new v$o;v$Z=v$u.startTime=v$V[v$x.getUint16()];var v$c=v$x.pos;v$u.inTangent=new Float32Array(v$D.slice(v$c,v$c+v$N)),v$x.pos+=v$N,v$c=v$x.pos,v$u.outTangent=new Float32Array(v$D.slice(v$c,v$c+v$N)),v$x.pos+=v$N,v$c=v$x.pos,v$u.data=new Float32Array(v$D.slice(v$c,v$c+v$N)),v$x.pos+=v$N,v$M&&(v$M.next=v$u,v$M.duration=v$Z-v$M.startTime),v$M=v$u}v$u.next=null,v$u.duration=v$X-v$Z}var v$H=v$x.getUint16();for(v$a=0;v$a<v$H;v$a++){var v$G,v$I=new v$F;v$I.time=v$x.getFloat32(),v$I.eventName=v$f._strings[v$x.getUint16()];var v$v=v$x.getUint16();for(0<v$v&&(v$I.params=v$G=[]),v$U=0;v$U<v$v;v$U++){switch(v$x.getByte()){case 0:v$G.push(!!v$x.getByte());break;case 1:v$G.push(v$x.getInt32());break;case 2:v$G.push(v$x.getFloat32());break;case 3:v$G.push(v$f._strings[v$x.getUint16()]);break;default:throw new Error("unknown type.")}}v$R.addEvent(v$I)}var v$l=v$R._nodeToCachePropertyMap=new Int32Array(v$z),v$j=v$R._cachePropertyMap=new Int32Array(v$E),v$h=v$R._unCachePropertyMap=new Int32Array(v$m);for(v$E=v$m=0,v$a=0;v$a<v$z;v$a++)(v$n=v$i[v$a])._cacheProperty?(v$l[v$a]=v$E,v$j[v$E++]=v$a):v$h[v$m++]=v$a},v$f._animationClip=null,v$f._reader=null,v$f._strings=[],v$z(v$f,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var v$F=function(){function v$n(){this.time=NaN,this.eventName=null,this.params=null}return v$q(v$n,"laya.d3.animation.AnimationEvent"),v$n}(),v$g=function(){function v$x(){this._childs=[],this.transform=new v$Aa(this)}v$q(v$x,"laya.d3.animation.AnimationNode");var v$n=v$x.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.addChild=function(v$n){v$n._parent=this,v$n.transform.setParent(this.transform),this._childs.push(v$n)},v$n.removeChild=function(v$n){var v$a=this._childs.indexOf(v$n);-1!==v$a&&this._childs.splice(v$a,1)},v$n.getChildByName=function(v$n){for(var v$a=0,v$U=this._childs.length;v$a<v$U;v$a++){var v$x=this._childs[v$a];if(v$x.name===v$n)return v$x}return null},v$n.getChildByIndex=function(v$n){return this._childs[v$n]},v$n.getChildCount=function(){return this._childs.length},v$n.cloneTo=function(v$n){var v$a=v$n;v$a.name=this.name;for(var v$U=0,v$x=this._childs.length;v$U<v$x;v$U++){var v$D=this._childs[v$U],v$p=v$D.clone();v$a.addChild(v$p);var v$Q=v$D.transform,v$V=v$p.transform;v$V.setLocalPosition(v$Q.getLocalPosition()),v$V.setLocalRotation(v$Q.getLocalRotation()),v$V.setLocalScale(v$Q.getLocalScale()),v$V._localRotationEuler=v$Q._localRotationEuler,v$V._setWorldMatrixIgnoreUpdate(v$Q.getWorldMatrix())}},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$x.__init__=function(){v$x.registerAnimationNodeProperty("localPosition",v$x._getLocalPosition,v$x._setLocalPosition),v$x.registerAnimationNodeProperty("localRotation",v$x._getLocalRotation,v$x._setLocalRotation),v$x.registerAnimationNodeProperty("localScale",v$x._getLocalScale,v$x._setLocalScale),v$x.registerAnimationNodeProperty("localRotationEuler",v$x._getLocalRotationEuler,v$x._setLocalRotationEuler),v$x.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",v$x._getParticleRenderSharedMaterialTintColor,v$x._setParticleRenderSharedMaterialTintColor),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",v$x._getMeshRenderSharedMaterialTilingOffset,v$x._setMeshRenderSharedMaterialTilingOffset),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",v$x._getMeshRenderSharedMaterialAlbedo,v$x._setMeshRenderSharedMaterialAlbedo),v$x.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",v$x._getSkinnedMeshRenderSharedMaterialTilingOffset,v$x._setSkinnedMeshRenderSharedMaterialTilingOffset),v$x.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",v$x._getSkinnedMeshRenderSharedMaterialAlbedo,v$x._setSkinnedMeshRenderSharedMaterialAlbedo),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",v$x._getMeshRenderSharedMaterialAlbedo,v$x._setMeshRenderSharedMaterialAlbedo),v$x.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",v$x._getSkinnedMeshRenderSharedMaterialAlbedo,v$x._setSkinnedMeshRenderSharedMaterialAlbedo),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",v$x._getMeshRenderSharedMaterialIntensity,v$x._setMeshRenderSharedMaterialIntensity),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",v$x._getMeshRenderSharedMaterialAlpha,v$x._setMeshRenderSharedMaterialAlpha),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",v$x._getMeshRenderSharedMaterialAlphaColor,v$x._setMeshRenderSharedMaterialAlphaColor),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",v$x._getMeshRenderSharedMaterialBaseColor,v$x._setMeshRenderSharedMaterialBaseColor),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",v$x._getMeshRenderSharedMaterialDissolve,v$x._setMeshRenderSharedMaterialDissolve),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",v$x._getMeshRenderSharedMaterialDissolveSpeed,v$x._setMeshRenderSharedMaterialDissolveSpeed),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",v$x._getMeshRenderSharedMaterialMMultiplier,v$x._setMeshRenderSharedMaterialMMultiplier),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",v$x._getMeshRenderSharedMaterialBaseScrollSpeedX,v$x._setMeshRenderSharedMaterialBaseScrollSpeedX),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",v$x._getMeshRenderSharedMaterialBaseScrollSpeedY,v$x._setMeshRenderSharedMaterialBaseScrollSpeedY),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",v$x._getMeshRenderSharedMaterialSecondScrollSpeedX,v$x._setMeshRenderSharedMaterialSecondScrollSpeedX),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",v$x._getMeshRenderSharedMaterialSecondScrollSpeedY,v$x._setMeshRenderSharedMaterialSecondScrollSpeedY),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",v$x._getMeshRenderSharedMaterialDetailTilingOffset,v$x._setMeshRenderSharedMaterialDetailTilingOffset),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",v$x._getMeshRenderSharedMaterialDissolveTilingOffset,v$x._setMeshRenderSharedMaterialDissolveTilingOffset),v$x.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",v$x._getMeshRenderSharedMaterialMaskTilingOffset,v$x._setMeshRenderSharedMaterialMaskTilingOffset)},v$x.registerAnimationNodeProperty=function(v$n,v$a,v$U){if(v$x._propertyIndexDic[v$n])throw new Error("AnimationNode: this propertyName has registered.");v$x._propertyIndexDic[v$n]=v$x._propertyIDCounter,v$x._propertyGetFuncs[v$x._propertyIDCounter]=v$a,v$x._propertySetFuncs[v$x._propertyIDCounter]=v$U,v$x._propertyIDCounter++},v$x._getLocalPosition=function(v$n,v$a){return v$n?v$n.transform.getLocalPosition():v$a._transform.localPosition.elements},v$x._setLocalPosition=function(v$n,v$a,v$U){if(v$n)v$n.transform.setLocalPosition(v$U);else{var v$x=v$a._transform,v$D=v$x.localPosition;v$D.elements=v$U,v$x.localPosition=v$D}},v$x._getLocalRotation=function(v$n,v$a){return v$n?v$n.transform.getLocalRotation():v$a._transform.localRotation.elements},v$x._setLocalRotation=function(v$n,v$a,v$U){if(v$n)v$n.transform.setLocalRotation(v$U);else{var v$x=v$a._transform,v$D=v$x.localRotation;v$D.elements=v$U,v$x.localRotation=v$D}},v$x._getLocalScale=function(v$n,v$a){return v$n?v$n.transform.getLocalScale():v$a._transform.localScale.elements},v$x._setLocalScale=function(v$n,v$a,v$U){if(v$n)v$n.transform.setLocalScale(v$U);else{var v$x=v$a._transform,v$D=v$x.localScale;v$D.elements=v$U,v$x.localScale=v$D}},v$x._getLocalRotationEuler=function(v$n,v$a){return v$n?v$n.transform.getLocalRotationEuler():v$a._transform.localRotationEuler.elements},v$x._setLocalRotationEuler=function(v$n,v$a,v$U){if(v$n)v$n.transform.setLocalRotationEuler(v$U);else{var v$x=v$a._transform,v$D=v$x.localRotationEuler;v$D.elements=v$U,v$x.localRotationEuler=v$D}},v$x._getMeshRenderSharedMaterialTilingOffset=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return v$a.meshRender.sharedMaterial.tilingOffset.elements},v$x._setMeshRenderSharedMaterialTilingOffset=function(v$n,v$a,v$U){var v$x,v$D;if(v$n){var v$p=v$n.transform._entity;v$p&&((v$D=(v$x=v$p.owner.meshRender.material).tilingOffset).elements=v$U,v$x.tilingOffset=v$D)}else(v$D=(v$x=v$a.meshRender.material).tilingOffset).elements=v$U,v$x.tilingOffset=v$D},v$x._getMeshRenderSharedMaterialAlbedo=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.albedoColor.elements:null}return v$a.meshRender.sharedMaterial.albedoColor.elements},v$x._setMeshRenderSharedMaterialAlbedo=function(v$n,v$a,v$U){var v$x,v$D;if(v$n){var v$p=v$n.transform._entity;v$p&&((v$D=(v$x=v$p.owner.meshRender.material).albedoColor).elements=v$U,v$x.albedoColor=v$D)}else(v$D=(v$x=v$a.meshRender.material).albedoColor).elements=v$U,v$x.albedoColor=v$D},v$x._getSkinnedMeshRenderSharedMaterialTilingOffset=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return v$a.skinnedMeshRender.sharedMaterial.tilingOffset.elements},v$x._setSkinnedMeshRenderSharedMaterialTilingOffset=function(v$n,v$a,v$U){var v$x,v$D;if(v$n){var v$p=v$n.transform._entity;v$p&&((v$D=(v$x=v$p.owner.skinnedMeshRender.material).tilingOffset).elements=v$U,v$x.tilingOffset=v$D)}else(v$D=(v$x=v$a.skinnedMeshRender.material).tilingOffset).elements=v$U,v$x.tilingOffset=v$D},v$x._getSkinnedMeshRenderSharedMaterialAlbedo=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return v$a.skinnedMeshRender.sharedMaterial.albedoColor.elements},v$x._setSkinnedMeshRenderSharedMaterialAlbedo=function(v$n,v$a,v$U){var v$x,v$D;if(v$n){var v$p=v$n.transform._entity;v$p&&((v$D=(v$x=v$p.owner.skinnedMeshRender.material).albedoColor).elements=v$U,v$x.albedoColor=v$D)}else(v$D=(v$x=v$a.skinnedMeshRender.material).albedoColor).elements=v$U,v$x.albedoColor=v$D},v$x._getParticleRenderSharedMaterialTintColor=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.particleRender.sharedMaterial.tintColor.elements:null}return v$a.particleRender.sharedMaterial.tintColor.elements},v$x._setParticleRenderSharedMaterialTintColor=function(v$n,v$a,v$U){var v$x,v$D;if(v$n){var v$p=v$n.transform._entity;v$p&&((v$D=(v$x=v$p.owner.particleRender.material).tintColor).elements=v$U,v$x.tintColor=v$D)}else(v$D=(v$x=v$a.particleRender.material).tintColor).elements=v$U,v$x.tintColor=v$D},v$x._getMeshRenderSharedMaterialAlphaColor=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.alphaColor.elements:null}return v$a.meshRender.sharedMaterial.alphaColor.elements},v$x._setMeshRenderSharedMaterialAlphaColor=function(v$n,v$a,v$U){var v$x,v$D;if(v$n){var v$p=v$n.transform._entity;v$p&&((v$D=(v$x=v$p.owner.meshRender.material).alphaColor).elements=v$U,v$x.alphaColor=v$D)}else(v$D=(v$x=v$a.meshRender.material).alphaColor).elements=v$U,v$x.alphaColor=v$D},v$x._getMeshRenderSharedMaterialBaseColor=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.baseColor.elements:null}return v$a.meshRender.sharedMaterial.baseColor.elements},v$x._setMeshRenderSharedMaterialBaseColor=function(v$n,v$a,v$U){var v$x,v$D;if(v$n){var v$p=v$n.transform._entity;v$p&&((v$D=(v$x=v$p.owner.meshRender.material).baseColor).elements=v$U,v$x.baseColor=v$D)}else(v$D=(v$x=v$a.meshRender.material).baseColor).elements=v$U,v$x.baseColor=v$D},v$x._getMeshRenderSharedMaterialDissolve=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.dissolve:0}return v$a.meshRender.sharedMaterial.dissolve},v$x._setMeshRenderSharedMaterialDissolve=function(v$n,v$a,v$U){if(v$n){var v$x=v$n.transform._entity;v$x&&(v$x.owner.meshRender.material.dissolve=v$U[0])}else v$a.meshRender.material.dissolve=v$U[0]},v$x._getMeshRenderSharedMaterialDissolveSpeed=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.dissolveSpeed:0}return v$a.meshRender.sharedMaterial.dissolveSpeed},v$x._setMeshRenderSharedMaterialDissolveSpeed=function(v$n,v$a,v$U){if(v$n){var v$x=v$n.transform._entity;v$x&&(v$x.owner.meshRender.material.dissolveSpeed=v$U[0])}else v$a.meshRender.material.dissolveSpeed=v$U[0]},v$x._getMeshRenderSharedMaterialMMultiplier=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.mMultiplier:0}return v$a.meshRender.sharedMaterial.mMultiplier},v$x._setMeshRenderSharedMaterialMMultiplier=function(v$n,v$a,v$U){if(v$n){var v$x=v$n.transform._entity;v$x&&(v$x.owner.meshRender.material.mMultiplier=v$U[0])}else v$a.meshRender.material.mMultiplier=v$U[0]},v$x._getMeshRenderSharedMaterialBaseScrollSpeedX=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return v$a.meshRender.sharedMaterial.baseScrollSpeedX},v$x._setMeshRenderSharedMaterialBaseScrollSpeedX=function(v$n,v$a,v$U){if(v$n){var v$x=v$n.transform._entity;v$x&&(v$x.owner.meshRender.material.baseScrollSpeedX=v$U[0])}else v$a.meshRender.material.baseScrollSpeedX=v$U[0]},v$x._getMeshRenderSharedMaterialBaseScrollSpeedY=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return v$a.meshRender.sharedMaterial.baseScrollSpeedY},v$x._setMeshRenderSharedMaterialBaseScrollSpeedY=function(v$n,v$a,v$U){if(v$n){var v$x=v$n.transform._entity;v$x&&(v$x.owner.meshRender.material.baseScrollSpeedY=v$U[0])}else v$a.meshRender.material.baseScrollSpeedY=v$U[0]},v$x._getMeshRenderSharedMaterialSecondScrollSpeedX=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return v$a.meshRender.sharedMaterial.secondScrollSpeedX},v$x._setMeshRenderSharedMaterialSecondScrollSpeedX=function(v$n,v$a,v$U){if(v$n){var v$x=v$n.transform._entity;v$x&&(v$x.owner.meshRender.material.secondScrollSpeedX=v$U[0])}else v$a.meshRender.material.secondScrollSpeedX=v$U[0]},v$x._getMeshRenderSharedMaterialSecondScrollSpeedY=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return v$a.meshRender.sharedMaterial.secondScrollSpeedY},v$x._setMeshRenderSharedMaterialSecondScrollSpeedY=function(v$n,v$a,v$U){if(v$n){var v$x=v$n.transform._entity;v$x&&(v$x.owner.meshRender.material.secondScrollSpeedY=v$U[0])}else v$a.meshRender.material.secondScrollSpeedY=v$U[0]},v$x._getMeshRenderSharedMaterialAlpha=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.alpha:0}return v$a.meshRender.sharedMaterial.alpha},v$x._setMeshRenderSharedMaterialAlpha=function(v$n,v$a,v$U){if(v$n){var v$x=v$n.transform._entity;v$x&&(v$x.owner.meshRender.material.alpha=v$U[0])}else v$a.meshRender.material.alpha=v$U[0]},v$x._getMeshRenderSharedMaterialIntensity=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.intensity:0}return v$a.meshRender.sharedMaterial.intensity},v$x._setMeshRenderSharedMaterialIntensity=function(v$n,v$a,v$U){if(v$n){var v$x=v$n.transform._entity;v$x&&(v$x.owner.meshRender.material.intensity=v$U[0])}else v$a.meshRender.material.intensity=v$U[0]},v$x._getMeshRenderSharedMaterialDetailTilingOffset=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return v$a.meshRender.sharedMaterial.detailTilingOffset.elements},v$x._setMeshRenderSharedMaterialDetailTilingOffset=function(v$n,v$a,v$U){var v$x,v$D;if(v$n){var v$p=v$n.transform._entity;v$p&&((v$D=(v$x=v$p.owner.meshRender.material).detailTilingOffset).elements=v$U,v$x.detailTilingOffset=v$D)}else(v$D=(v$x=v$a.meshRender.material).detailTilingOffset).elements=v$U,v$x.detailTilingOffset=v$D},v$x._getMeshRenderSharedMaterialDissolveTilingOffset=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return v$a.meshRender.sharedMaterial.dissolveTilingOffset.elements},v$x._setMeshRenderSharedMaterialDissolveTilingOffset=function(v$n,v$a,v$U){var v$x,v$D;if(v$n){var v$p=v$n.transform._entity;v$p&&((v$D=(v$x=v$p.owner.meshRender.material).dissolveTilingOffset).elements=v$U,v$x.dissolveTilingOffset=v$D)}else(v$D=(v$x=v$a.meshRender.material).dissolveTilingOffset).elements=v$U,v$x.dissolveTilingOffset=v$D},v$x._getMeshRenderSharedMaterialMaskTilingOffset=function(v$n,v$a){if(v$n){var v$U=v$n.transform._entity;return v$U?v$U.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return v$a.meshRender.sharedMaterial.maskTilingOffset.elements},v$x._setMeshRenderSharedMaterialMaskTilingOffset=function(v$n,v$a,v$U){var v$x,v$D;if(v$n){var v$p=v$n.transform._entity;v$p&&((v$D=(v$x=v$p.owner.meshRender.material).maskTilingOffset).elements=v$U,v$x.maskTilingOffset=v$D)}else(v$D=(v$x=v$a.meshRender.material).maskTilingOffset).elements=v$U,v$x.maskTilingOffset=v$D},v$x._propertyIDCounter=0,v$x._propertyIndexDic={},v$x._propertySetFuncs=[],v$x._propertyGetFuncs=[],v$x}(),v$o=function(){function v$n(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return v$q(v$n,"laya.d3.animation.Keyframe"),v$n}(),v$B=function(){function v$n(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return v$q(v$n,"laya.d3.animation.KeyframeNode"),v$n}(),v$G=(function(){function v$n(){this._tempVector30=new v$Qa,this._tempVector31=new v$Qa,this._tempVector32=new v$Qa,this._a=new v$Qa,this._b=new v$Qa,this._c=new v$Qa,this._d=new v$Qa}v$q(v$n,"laya.d3.core.glitter.SplineCurvePositionVelocity");var v$a=v$n.prototype;v$a.Init=function(v$n,v$a,v$U,v$x){v$n.cloneTo(this._d),v$a.cloneTo(this._c),v$Qa.scale(v$n,2,this._a),v$Qa.scale(v$U,2,this._tempVector30),v$Qa.subtract(this._a,this._tempVector30,this._a),v$Qa.add(this._a,v$a,this._a),v$Qa.add(this._a,v$x,this._a),v$Qa.scale(v$U,3,this._b),v$Qa.scale(v$n,3,this._tempVector30),v$Qa.subtract(this._b,this._tempVector30,this._b),v$Qa.subtract(this._b,v$x,this._b),v$Qa.scale(v$a,2,this._tempVector30),v$Qa.subtract(this._b,this._tempVector30,this._b)},v$a.Slerp=function(v$n,v$a){v$Qa.scale(this._a,v$n*v$n*v$n,this._tempVector30),v$Qa.scale(this._b,v$n*v$n,this._tempVector31),v$Qa.scale(this._c,v$n,this._tempVector32),v$Qa.add(this._tempVector30,this._tempVector31,v$a),v$Qa.add(v$a,this._tempVector32,v$a),v$Qa.add(v$a,this._d,v$a)}}(),function(){function v$j(v$n,v$a,v$U,v$x){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=v$n,this._h=v$a,this._minHeight=v$U,this._maxHeight=v$x}v$q(v$j,"laya.d3.core.HeightMap");var v$n=v$j.prototype;v$n._inBounds=function(v$n,v$a){return 0<=v$n&&v$n<this._h&&0<=v$a&&v$a<this._w},v$n.getHeight=function(v$n,v$a){return this._inBounds(v$n,v$a)?this._datas[v$n][v$a]:NaN},v$E(0,v$n,"width",function(){return this._w}),v$E(0,v$n,"height",function(){return this._h}),v$E(0,v$n,"maxHeight",function(){return this._maxHeight}),v$E(0,v$n,"minHeight",function(){return this._minHeight}),v$j.creatFromMesh=function(v$n,v$a,v$U,v$x){for(var v$D=[],v$p=[],v$Q=v$n.getSubMeshCount(),v$V=0;v$V<v$Q;v$V++){for(var v$y=v$n.getSubMesh(v$V),v$R=v$y._getVertexBuffer(),v$X=v$R.getData(),v$z=[],v$i=0;v$i<v$X.length;v$i+=v$R.vertexDeclaration.vertexStride/4){var v$q=new v$Qa(v$X[v$i+0],v$X[v$i+1],v$X[v$i+2]);v$z.push(v$q)}v$D.push(v$z);var v$E=v$y._getIndexBuffer();v$p.push(v$E.getData())}var v$m=v$n.boundingBox,v$b=v$m.min.x,v$P=v$m.min.z,v$A=v$m.max.x,v$T=v$m.max.z,v$K=v$m.min.y,v$Y=v$m.max.y,v$W=v$A-v$b,v$k=v$T-v$P,v$N=v$x.elements[0]=v$W/(v$a-1),v$_=v$x.elements[1]=v$k/(v$U-1),v$$=new v$j(v$a,v$U,v$K,v$Y),v$M=v$j._tempRay,v$Z=v$M.direction.elements;v$Z[0]=0,v$Z[1]=-1,v$Z[2]=0;var v$u=v$Y+.1;v$M.origin.elements[1]=v$u;for(var v$c=0;v$c<v$U;v$c++){var v$H=v$P+v$c*v$_;v$$._datas[v$c]=[];for(var v$G=0;v$G<v$a;v$G++){var v$I=v$b+v$G*v$N,v$v=v$M.origin.elements;v$v[0]=v$I,v$v[2]=v$H;var v$l=v$j._getPosition(v$M,v$D,v$p);v$$._datas[v$c][v$G]=v$l===Number.MAX_VALUE?NaN:v$u-v$l}}return v$$},v$j.createFromImage=function(v$n,v$a,v$U){for(var v$x=v$n.width,v$D=v$n.height,v$p=new v$j(v$x,v$D,v$a,v$U),v$Q=(v$U-v$a)/254,v$V=v$n.getPixels(),v$y=0,v$R=0;v$R<v$D;v$R++)for(var v$X=v$p._datas[v$R]=[],v$z=0;v$z<v$x;v$z++){var v$i=v$V[v$y++],v$q=v$V[v$y++],v$E=v$V[v$y++],v$m=v$V[v$y++];v$X[v$z]=255==v$i&&255==v$q&&255==v$E&&255==v$m?NaN:(v$i+v$q+v$E)/3*v$Q+v$a}return v$p},v$j._getPosition=function(v$n,v$a,v$U){for(var v$x=Number.MAX_VALUE,v$D=0;v$D<v$a.length;v$D++)for(var v$p=v$a[v$D],v$Q=v$U[v$D],v$V=0;v$V<v$Q.length;v$V+=3){var v$y=v$p[v$Q[v$V+0]],v$R=v$p[v$Q[v$V+1]],v$X=v$p[v$Q[v$V+2]],v$z=v$Ea.rayIntersectsTriangle(v$n,v$y,v$R,v$X);!isNaN(v$z)&&v$z<v$x&&(v$x=v$z)}return v$x},v$z(v$j,["_tempRay",function(){return this._tempRay=new v$Da(new v$Qa,new v$Qa)}])}(),function(){function v$D(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}v$q(v$D,"laya.d3.core.Layer");var v$n=v$D.prototype;return v$n._binarySearchIndex=function(){for(var v$n=0,v$a=v$D._collsionTestList.length-1,v$U=0;v$n<=v$a;){v$U=Math.floor((v$n+v$a)/2);var v$x=v$D._collsionTestList[v$U];if(v$x==this._number)return v$U;v$x>this._number?v$a=v$U-1:v$n=v$U+1}return v$n},v$n._addCollider=function(v$n){0===this._colliders.length&&v$D._collsionTestList.splice(this._binarySearchIndex(),0,this._number),v$n._isRigidbody?(this._colliders.unshift(v$n),this._nonRigidbodyOffset++):this._colliders.push(v$n)},v$n._removeCollider=function(v$n){var v$a=this._colliders.indexOf(v$n);v$a<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(v$a,1),0===this._colliders.length&&v$D._collsionTestList.splice(v$D._collsionTestList.indexOf(this._number),1)},v$E(0,v$n,"number",function(){return this._number}),v$E(0,v$n,"visible",function(){return this._visible},function(v$n){this._visible=v$n,v$D._visibleLayers=v$n?v$D._visibleLayers|this.mask:v$D._visibleLayers&~this.mask}),v$E(0,v$n,"mask",function(){return this._mask}),v$E(1,v$D,"visibleLayers",function(){return v$D._visibleLayers},function(v$n){v$D._visibleLayers=v$n;for(var v$a=0,v$U=v$D._layerList.length;v$a<v$U;v$a++){var v$x=v$D._layerList[v$a];v$x._visible=0!=(v$x._mask&v$D._visibleLayers)}}),v$D.__init__=function(){v$D._layerList.length=31;for(var v$n=0;v$n<31;v$n++){var v$a=new v$D;v$D._layerList[v$n]=v$a,0===v$n?(v$a.name="Default Layer",v$a.visible=!0):(v$a.name="Layer-"+v$n,v$a.visible=!1),v$a._number=v$n,v$a._mask=Math.pow(2,v$n)}v$D.currentCreationLayer=v$D._layerList[0]},v$D.getLayerByNumber=function(v$n){if(v$n<0||30<v$n)throw new Error("无法返回指定Layer，该number超出范围！");return v$D._layerList[v$n]},v$D.getLayerByName=function(v$n){for(var v$a=0;v$a<31;v$a++)if(v$D._layerList[v$a].name===v$n)return v$D._layerList[v$a];throw new Error("无法返回指定Layer,该name不存在")},v$D.isVisible=function(v$n){return 0!=(v$n&v$D._currentCameraCullingMask&v$D._visibleLayers)},v$D._layerList=[],v$D._visibleLayers=2147483647,v$D._collsionTestList=[],v$D._currentCameraCullingMask=2147483647,v$D.maxCount=31,v$D.currentCreationLayer=null,v$D}()),v$I=(function(){function v$n(v$n,v$a,v$U){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=v$n,this._minCount=v$a,this._maxCount=v$U}v$q(v$n,"laya.d3.core.particleShuriKen.module.Burst");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.cloneTo=function(v$n){var v$a=v$n;v$a._time=this._time,v$a._minCount=this._minCount,v$a._maxCount=this._maxCount},v$a.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$a,"time",function(){return this._time}),v$E(0,v$a,"minCount",function(){return this._minCount}),v$E(0,v$a,"maxCount",function(){return this._maxCount})}(),function(){function v$n(v$n){this._color=null,this.enbale=!1,this._color=v$n}v$q(v$n,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var v$a=v$n.prototype;v$a.cloneTo=function(v$n){var v$a=v$n;this._color.cloneTo(v$a._color),v$a.enbale=this.enbale},v$a.clone=function(){var v$n;switch(this._color.type){case 0:v$n=v$l.createByConstant(this._color.constant.clone());break;case 1:v$n=v$l.createByGradient(this._color.gradient.clone());break;case 2:v$n=v$l.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:v$n=v$l.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var v$a=new this.constructor(v$n);return v$a.enbale=this.enbale,v$a},v$E(0,v$a,"color",function(){return this._color})}(),function(){function v$n(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}v$q(v$n,"laya.d3.core.particleShuriKen.module.Emission");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),v$a._destroy=function(){this._bursts=null,this._destroyed=!0},v$a.getBurstsCount=function(){return this._bursts.length},v$a.getBurstByIndex=function(v$n){return this._bursts[v$n]},v$a.addBurst=function(v$n){var v$a=this._bursts.length;if(0<v$a)for(var v$U=0;v$U<v$a;v$U++)this._bursts[v$U].time>v$n.time&&this._bursts.splice(v$U,0,v$n);this._bursts.push(v$n)},v$a.removeBurst=function(v$n){var v$a=this._bursts.indexOf(v$n);-1!==v$a&&this._bursts.splice(v$a,1)},v$a.removeBurstByIndex=function(v$n){this._bursts.splice(v$n,1)},v$a.clearBurst=function(){this._bursts.length=0},v$a.cloneTo=function(v$n){var v$a=v$n,v$U=v$a._bursts;v$U.length=this._bursts.length;for(var v$x=0,v$D=this._bursts.length;v$x<v$D;v$x++){var v$p=v$U[v$x];v$p?this._bursts[v$x].cloneTo(v$p):v$U[v$x]=this._bursts[v$x].clone()}v$a._emissionRate=this._emissionRate,v$a.enbale=this.enbale},v$a.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$a,"destroyed",function(){return this._destroyed}),v$E(0,v$a,"emissionRate",function(){return this._emissionRate},function(v$n){if(v$n<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=v$n})}(),function(){function v$x(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}v$q(v$x,"laya.d3.core.particleShuriKen.module.FrameOverTime");var v$n=v$x.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.cloneTo=function(v$n){var v$a=v$n;v$a._type=this._type,v$a._constant=this._constant,this._overTime.cloneTo(v$a._overTime),v$a._constantMin=this._constantMin,v$a._constantMax=this._constantMax,this._overTimeMin.cloneTo(v$a._overTimeMin),this._overTimeMax.cloneTo(v$a._overTimeMax)},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$n,"frameOverTimeData",function(){return this._overTime}),v$E(0,v$n,"constant",function(){return this._constant}),v$E(0,v$n,"type",function(){return this._type}),v$E(0,v$n,"frameOverTimeDataMin",function(){return this._overTimeMin}),v$E(0,v$n,"constantMin",function(){return this._constantMin}),v$E(0,v$n,"frameOverTimeDataMax",function(){return this._overTimeMax}),v$E(0,v$n,"constantMax",function(){return this._constantMax}),v$x.createByConstant=function(v$n){var v$a=new v$x;return v$a._type=0,v$a._constant=v$n,v$a},v$x.createByOverTime=function(v$n){var v$a=new v$x;return v$a._type=1,v$a._overTime=v$n,v$a},v$x.createByRandomTwoConstant=function(v$n,v$a){var v$U=new v$x;return v$U._type=2,v$U._constantMin=v$n,v$U._constantMax=v$a,v$U},v$x.createByRandomTwoOverTime=function(v$n,v$a){var v$U=new v$x;return v$U._type=3,v$U._overTimeMin=v$n,v$U._overTimeMax=v$a,v$U},v$x}()),v$v=function(){function v$R(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}v$q(v$R,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var v$n=v$R.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.cloneTo=function(v$n){var v$a=v$n;v$a._type=this._type,v$a._separateAxes=this._separateAxes,v$a._constant=this._constant,this._constantSeparate.cloneTo(v$a._constantSeparate),this._gradient.cloneTo(v$a._gradient),this._gradientX.cloneTo(v$a._gradientX),this._gradientY.cloneTo(v$a._gradientY),this._gradientZ.cloneTo(v$a._gradientZ),v$a._constantMin=this._constantMin,v$a._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(v$a._constantMinSeparate),this._constantMaxSeparate.cloneTo(v$a._constantMaxSeparate),this._gradientMin.cloneTo(v$a._gradientMin),this._gradientMax.cloneTo(v$a._gradientMax),this._gradientXMin.cloneTo(v$a._gradientXMin),this._gradientXMax.cloneTo(v$a._gradientXMax),this._gradientYMin.cloneTo(v$a._gradientYMin),this._gradientYMax.cloneTo(v$a._gradientYMax),this._gradientZMin.cloneTo(v$a._gradientZMin),this._gradientZMax.cloneTo(v$a._gradientZMax)},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$n,"gradientZ",function(){return this._gradientZ}),v$E(0,v$n,"constant",function(){return this._constant}),v$E(0,v$n,"gradient",function(){return this._gradient}),v$E(0,v$n,"separateAxes",function(){return this._separateAxes}),v$E(0,v$n,"type",function(){return this._type}),v$E(0,v$n,"constantSeparate",function(){return this._constantSeparate}),v$E(0,v$n,"gradientX",function(){return this._gradientX}),v$E(0,v$n,"gradientY",function(){return this._gradientY}),v$E(0,v$n,"gradientW",function(){return this._gradientW}),v$E(0,v$n,"gradientMin",function(){return this._gradientMin}),v$E(0,v$n,"constantMin",function(){return this._constantMin}),v$E(0,v$n,"gradientMax",function(){return this._gradientMax}),v$E(0,v$n,"constantMax",function(){return this._constantMax}),v$E(0,v$n,"gradientWMin",function(){return this._gradientWMin}),v$E(0,v$n,"constantMinSeparate",function(){return this._constantMinSeparate}),v$E(0,v$n,"constantMaxSeparate",function(){return this._constantMaxSeparate}),v$E(0,v$n,"gradientXMin",function(){return this._gradientXMin}),v$E(0,v$n,"gradientXMax",function(){return this._gradientXMax}),v$E(0,v$n,"gradientWMax",function(){return this._gradientWMax}),v$E(0,v$n,"gradientYMin",function(){return this._gradientYMin}),v$E(0,v$n,"gradientYMax",function(){return this._gradientYMax}),v$E(0,v$n,"gradientZMin",function(){return this._gradientZMin}),v$E(0,v$n,"gradientZMax",function(){return this._gradientZMax}),v$R.createByConstant=function(v$n){var v$a=new v$R;return v$a._type=0,v$a._separateAxes=!1,v$a._constant=v$n,v$a},v$R.createByConstantSeparate=function(v$n){var v$a=new v$R;return v$a._type=0,v$a._separateAxes=!0,v$a._constantSeparate=v$n,v$a},v$R.createByGradient=function(v$n){var v$a=new v$R;return v$a._type=1,v$a._separateAxes=!1,v$a._gradient=v$n,v$a},v$R.createByGradientSeparate=function(v$n,v$a,v$U,v$x){var v$D=new v$R;return v$D._type=1,v$D._separateAxes=!0,v$D._gradientX=v$n,v$D._gradientY=v$a,v$D._gradientZ=v$U,v$D._gradientW=v$x,v$D},v$R.createByRandomTwoConstant=function(v$n,v$a){var v$U=new v$R;return v$U._type=2,v$U._separateAxes=!1,v$U._constantMin=v$n,v$U._constantMax=v$a,v$U},v$R.createByRandomTwoConstantSeparate=function(v$n,v$a){var v$U=new v$R;return v$U._type=2,v$U._separateAxes=!0,v$U._constantMinSeparate=v$n,v$U._constantMaxSeparate=v$a,v$U},v$R.createByRandomTwoGradient=function(v$n,v$a){var v$U=new v$R;return v$U._type=3,v$U._separateAxes=!1,v$U._gradientMin=v$n,v$U._gradientMax=v$a,v$U},v$R.createByRandomTwoGradientSeparate=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){var v$y=new v$R;return v$y._type=3,v$y._separateAxes=!0,v$y._gradientXMin=v$n,v$y._gradientXMax=v$a,v$y._gradientYMin=v$U,v$y._gradientYMax=v$x,v$y._gradientZMin=v$D,v$y._gradientZMax=v$p,v$y._gradientWMin=v$Q,v$y._gradientWMax=v$V,v$y},v$R}(),v$l=function(){function v$x(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}v$q(v$x,"laya.d3.core.particleShuriKen.module.GradientColor");var v$n=v$x.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.cloneTo=function(v$n){var v$a=v$n;v$a._type=this._type,this._constant.cloneTo(v$a._constant),this._constantMin.cloneTo(v$a._constantMin),this._constantMax.cloneTo(v$a._constantMax),this._gradient.cloneTo(v$a._gradient),this._gradientMin.cloneTo(v$a._gradientMin),this._gradientMax.cloneTo(v$a._gradientMax)},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$n,"gradient",function(){return this._gradient}),v$E(0,v$n,"constant",function(){return this._constant}),v$E(0,v$n,"type",function(){return this._type}),v$E(0,v$n,"gradientMin",function(){return this._gradientMin}),v$E(0,v$n,"constantMin",function(){return this._constantMin}),v$E(0,v$n,"gradientMax",function(){return this._gradientMax}),v$E(0,v$n,"constantMax",function(){return this._constantMax}),v$x.createByConstant=function(v$n){var v$a=new v$x;return v$a._type=0,v$a._constant=v$n,v$a},v$x.createByGradient=function(v$n){var v$a=new v$x;return v$a._type=1,v$a._gradient=v$n,v$a},v$x.createByRandomTwoConstant=function(v$n,v$a){var v$U=new v$x;return v$U._type=2,v$U._constantMin=v$n,v$U._constantMax=v$a,v$U},v$x.createByRandomTwoGradient=function(v$n,v$a){var v$U=new v$x;return v$U._type=3,v$U._gradientMin=v$n,v$U._gradientMax=v$a,v$U},v$x}(),v$j=(function(){function v$n(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}v$q(v$n,"laya.d3.core.particleShuriKen.module.GradientDataColor");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.addAlpha=function(v$n,v$a){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==v$n&&(v$n=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=v$n,this._alphaElements[this._alphaCurrentLength++]=v$a):DEBUG},v$a.addRGB=function(v$n,v$a){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==v$n&&(v$n=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=v$n,this._rgbElements[this._rgbCurrentLength++]=v$a.x,this._rgbElements[this._rgbCurrentLength++]=v$a.y,this._rgbElements[this._rgbCurrentLength++]=v$a.z):DEBUG},v$a.cloneTo=function(v$n){var v$a=v$n,v$U=0,v$x=0;v$a._alphaCurrentLength=this._alphaCurrentLength;var v$D=v$a._alphaElements;for(v$D.length=this._alphaElements.length,v$U=0,v$x=this._alphaElements.length;v$U<v$x;v$U++)v$D[v$U]=this._alphaElements[v$U];v$a._rgbCurrentLength=this._rgbCurrentLength;var v$p=v$a._rgbElements;for(v$p.length=this._rgbElements.length,v$U=0,v$x=this._rgbElements.length;v$U<v$x;v$U++)v$p[v$U]=this._rgbElements[v$U]},v$a.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$a,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),v$E(0,v$a,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function v$n(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}v$q(v$n,"laya.d3.core.particleShuriKen.module.GradientDataInt");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.add=function(v$n,v$a){this._currentLength<8?(6===this._currentLength&&1!==v$n&&(v$n=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=v$n,this._elements[this._currentLength++]=v$a):console.log("Warning:data count must lessEqual than 4")},v$a.cloneTo=function(v$n){var v$a=v$n;v$a._currentLength=this._currentLength;var v$U=v$a._elements;v$U.length=this._elements.length;for(var v$x=0,v$D=this._elements.length;v$x<v$D;v$x++)v$U[v$x]=this._elements[v$x]},v$a.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$a,"gradientCount",function(){return this._currentLength/2})}(),function(){function v$n(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}v$q(v$n,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.add=function(v$n,v$a){this._currentLength<8?(6===this._currentLength&&1!==v$n&&(v$n=1,DEBUG),this._elements[this._currentLength++]=v$n,this._elements[this._currentLength++]=v$a):DEBUG},v$a.getKeyByIndex=function(v$n){return this._elements[2*v$n]},v$a.getValueByIndex=function(v$n){return this._elements[2*v$n+1]},v$a.getAverageValue=function(){for(var v$n=0,v$a=this._currentLength-2;v$n<v$a;v$n+=2){this._elements[v$n+1];this._elements[v$n+3],this._elements[v$n+2]-this._elements[v$n]}return 0},v$a.cloneTo=function(v$n){var v$a=v$n;v$a._currentLength=this._currentLength;var v$U=v$a._elements;v$U.length=this._elements.length;for(var v$x=0,v$D=this._elements.length;v$x<v$D;v$x++)v$U[v$x]=this._elements[v$x]},v$a.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$a,"gradientCount",function(){return this._currentLength/2})}(),function(){function v$n(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}v$q(v$n,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.add=function(v$n,v$a){this._currentLength<8?(6===this._currentLength&&1!==v$n&&(v$n=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=v$n,this._elements[this._currentLength++]=v$a.x,this._elements[this._currentLength++]=v$a.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},v$a.cloneTo=function(v$n){var v$a=v$n;v$a._currentLength=this._currentLength;var v$U=v$a._elements;v$U.length=this._elements.length;for(var v$x=0,v$D=this._elements.length;v$x<v$D;v$x++)v$U[v$x]=this._elements[v$x]},v$a.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$a,"gradientCount",function(){return this._currentLength/3})}(),function(){function v$V(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}v$q(v$V,"laya.d3.core.particleShuriKen.module.GradientSize");var v$n=v$V.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.getMaxSizeInGradient=function(){var v$n=0,v$a=0,v$U=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(v$n=0,v$a=this._gradientX.gradientCount;v$n<v$a;v$n++)v$U=Math.max(v$U,this._gradientX.getValueByIndex(v$n));for(v$n=0,v$a=this._gradientY.gradientCount;v$n<v$a;v$n++)v$U=Math.max(v$U,this._gradientY.getValueByIndex(v$n))}else for(v$n=0,v$a=this._gradient.gradientCount;v$n<v$a;v$n++)v$U=Math.max(v$U,this._gradient.getValueByIndex(v$n));break;case 1:v$U=this._separateAxes?(v$U=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),v$U=Math.max(v$U,this._constantMinSeparate.y),Math.max(v$U,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(v$n=0,v$a=this._gradientXMin.gradientCount;v$n<v$a;v$n++)v$U=Math.max(v$U,this._gradientXMin.getValueByIndex(v$n));for(v$n=0,v$a=this._gradientXMax.gradientCount;v$n<v$a;v$n++)v$U=Math.max(v$U,this._gradientXMax.getValueByIndex(v$n));for(v$n=0,v$a=this._gradientYMin.gradientCount;v$n<v$a;v$n++)v$U=Math.max(v$U,this._gradientYMin.getValueByIndex(v$n));for(v$n=0,v$a=this._gradientZMax.gradientCount;v$n<v$a;v$n++)v$U=Math.max(v$U,this._gradientZMax.getValueByIndex(v$n))}else{for(v$n=0,v$a=this._gradientMin.gradientCount;v$n<v$a;v$n++)v$U=Math.max(v$U,this._gradientMin.getValueByIndex(v$n));for(v$n=0,v$a=this._gradientMax.gradientCount;v$n<v$a;v$n++)v$U=Math.max(v$U,this._gradientMax.getValueByIndex(v$n))}}return v$U},v$n.cloneTo=function(v$n){var v$a=v$n;v$a._type=this._type,v$a._separateAxes=this._separateAxes,this._gradient.cloneTo(v$a._gradient),this._gradientX.cloneTo(v$a._gradientX),this._gradientY.cloneTo(v$a._gradientY),this._gradientZ.cloneTo(v$a._gradientZ),v$a._constantMin=this._constantMin,v$a._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(v$a._constantMinSeparate),this._constantMaxSeparate.cloneTo(v$a._constantMaxSeparate),this._gradientMin.cloneTo(v$a._gradientMin),this._gradientMax.cloneTo(v$a._gradientMax),this._gradientXMin.cloneTo(v$a._gradientXMin),this._gradientXMax.cloneTo(v$a._gradientXMax),this._gradientYMin.cloneTo(v$a._gradientYMin),this._gradientYMax.cloneTo(v$a._gradientYMax),this._gradientZMin.cloneTo(v$a._gradientZMin),this._gradientZMax.cloneTo(v$a._gradientZMax)},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$n,"gradientZ",function(){return this._gradientZ}),v$E(0,v$n,"gradient",function(){return this._gradient}),v$E(0,v$n,"separateAxes",function(){return this._separateAxes}),v$E(0,v$n,"type",function(){return this._type}),v$E(0,v$n,"gradientMin",function(){return this._gradientMin}),v$E(0,v$n,"constantMin",function(){return this._constantMin}),v$E(0,v$n,"gradientX",function(){return this._gradientX}),v$E(0,v$n,"gradientY",function(){return this._gradientY}),v$E(0,v$n,"gradientMax",function(){return this._gradientMax}),v$E(0,v$n,"constantMax",function(){return this._constantMax}),v$E(0,v$n,"constantMinSeparate",function(){return this._constantMinSeparate}),v$E(0,v$n,"constantMaxSeparate",function(){return this._constantMaxSeparate}),v$E(0,v$n,"gradientXMin",function(){return this._gradientXMin}),v$E(0,v$n,"gradientXMax",function(){return this._gradientXMax}),v$E(0,v$n,"gradientYMin",function(){return this._gradientYMin}),v$E(0,v$n,"gradientYMax",function(){return this._gradientYMax}),v$E(0,v$n,"gradientZMin",function(){return this._gradientZMin}),v$E(0,v$n,"gradientZMax",function(){return this._gradientZMax}),v$V.createByGradient=function(v$n){var v$a=new v$V;return v$a._type=0,v$a._separateAxes=!1,v$a._gradient=v$n,v$a},v$V.createByGradientSeparate=function(v$n,v$a,v$U){var v$x=new v$V;return v$x._type=0,v$x._separateAxes=!0,v$x._gradientX=v$n,v$x._gradientY=v$a,v$x._gradientZ=v$U,v$x},v$V.createByRandomTwoConstant=function(v$n,v$a){var v$U=new v$V;return v$U._type=1,v$U._separateAxes=!1,v$U._constantMin=v$n,v$U._constantMax=v$a,v$U},v$V.createByRandomTwoConstantSeparate=function(v$n,v$a){var v$U=new v$V;return v$U._type=1,v$U._separateAxes=!0,v$U._constantMinSeparate=v$n,v$U._constantMaxSeparate=v$a,v$U},v$V.createByRandomTwoGradient=function(v$n,v$a){var v$U=new v$V;return v$U._type=2,v$U._separateAxes=!1,v$U._gradientMin=v$n,v$U._gradientMax=v$a,v$U},v$V.createByRandomTwoGradientSeparate=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=new v$V;return v$Q._type=2,v$Q._separateAxes=!0,v$Q._gradientXMin=v$n,v$Q._gradientXMax=v$a,v$Q._gradientYMin=v$U,v$Q._gradientYMax=v$x,v$Q._gradientZMin=v$D,v$Q._gradientZMax=v$p,v$Q},v$V}()),v$h=function(){function v$V(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}v$q(v$V,"laya.d3.core.particleShuriKen.module.GradientVelocity");var v$n=v$V.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.cloneTo=function(v$n){var v$a=v$n;v$a._type=this._type,this._constant.cloneTo(v$a._constant),this._gradientX.cloneTo(v$a._gradientX),this._gradientY.cloneTo(v$a._gradientY),this._gradientZ.cloneTo(v$a._gradientZ),this._constantMin.cloneTo(v$a._constantMin),this._constantMax.cloneTo(v$a._constantMax),this._gradientXMin.cloneTo(v$a._gradientXMin),this._gradientXMax.cloneTo(v$a._gradientXMax),this._gradientYMin.cloneTo(v$a._gradientYMin),this._gradientYMax.cloneTo(v$a._gradientYMax),this._gradientZMin.cloneTo(v$a._gradientZMin),this._gradientZMax.cloneTo(v$a._gradientZMax)},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$n,"gradientZ",function(){return this._gradientZ}),v$E(0,v$n,"constant",function(){return this._constant}),v$E(0,v$n,"type",function(){return this._type}),v$E(0,v$n,"gradientXMax",function(){return this._gradientXMax}),v$E(0,v$n,"constantMin",function(){return this._constantMin}),v$E(0,v$n,"gradientX",function(){return this._gradientX}),v$E(0,v$n,"gradientY",function(){return this._gradientY}),v$E(0,v$n,"gradientXMin",function(){return this._gradientXMin}),v$E(0,v$n,"constantMax",function(){return this._constantMax}),v$E(0,v$n,"gradientYMin",function(){return this._gradientYMin}),v$E(0,v$n,"gradientYMax",function(){return this._gradientYMax}),v$E(0,v$n,"gradientZMin",function(){return this._gradientZMin}),v$E(0,v$n,"gradientZMax",function(){return this._gradientZMax}),v$V.createByConstant=function(v$n){var v$a=new v$V;return v$a._type=0,v$a._constant=v$n,v$a},v$V.createByGradient=function(v$n,v$a,v$U){var v$x=new v$V;return v$x._type=1,v$x._gradientX=v$n,v$x._gradientY=v$a,v$x._gradientZ=v$U,v$x},v$V.createByRandomTwoConstant=function(v$n,v$a){var v$U=new v$V;return v$U._type=2,v$U._constantMin=v$n,v$U._constantMax=v$a,v$U},v$V.createByRandomTwoGradient=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=new v$V;return v$Q._type=3,v$Q._gradientXMin=v$n,v$Q._gradientXMax=v$a,v$Q._gradientYMin=v$U,v$Q._gradientYMax=v$x,v$Q._gradientZMin=v$D,v$Q._gradientZMax=v$p,v$Q},v$V}(),v$f=(function(){function v$n(v$n){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=v$n}v$q(v$n,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.cloneTo=function(v$n){var v$a=v$n;this._angularVelocity.cloneTo(v$a._angularVelocity),v$a.enbale=this.enbale},v$a.clone=function(){var v$n;switch(this._angularVelocity.type){case 0:v$n=this._angularVelocity.separateAxes?v$v.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):v$v.createByConstant(this._angularVelocity.constant);break;case 1:v$n=this._angularVelocity.separateAxes?v$v.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):v$v.createByGradient(this._angularVelocity.gradient.clone());break;case 2:v$n=this._angularVelocity.separateAxes?v$v.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):v$v.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:v$n=this._angularVelocity.separateAxes?v$v.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):v$v.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var v$a=new this.constructor(v$n);return v$a.enbale=this.enbale,v$a},v$E(0,v$a,"angularVelocity",function(){return this._angularVelocity})}(),function(){function v$n(){this.enable=!1,this.randomDirection=!1}v$q(v$n,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a._getShapeBoundBox=function(v$n){throw new Error("BaseShape: must override it.")},v$a._getSpeedBoundBox=function(v$n){throw new Error("BaseShape: must override it.")},v$a.generatePositionAndDirection=function(v$n,v$a,v$U,v$x){throw new Error("BaseShape: must override it.")},v$a._calculateProceduralBounds=function(v$n,v$a,v$U){this._getShapeBoundBox(v$n);var v$x=v$n.min,v$D=v$n.max;v$Qa.multiply(v$x,v$a,v$x),v$Qa.multiply(v$D,v$a,v$D);var v$p=new v$Cn(new v$Qa,new v$Qa);this.randomDirection?(v$p.min=new v$Qa(-1,-1,-1),v$p.max=new v$Qa(1,1,1)):this._getSpeedBoundBox(v$p);var v$Q=new v$Cn(new v$Qa,new v$Qa),v$V=v$Q.min,v$y=v$Q.max;v$Qa.scale(v$p.min,v$U.y,v$V),v$Qa.scale(v$p.max,v$U.y,v$y),v$Qa.add(v$n.min,v$V,v$V),v$Qa.add(v$n.max,v$y,v$y),v$Qa.min(v$n.min,v$V,v$n.min),v$Qa.max(v$n.max,v$V,v$n.max);var v$R=new v$Cn(new v$Qa,new v$Qa),v$X=v$R.min,v$z=v$R.max;v$Qa.scale(v$p.min,v$U.x,v$X),v$Qa.scale(v$p.max,v$U.x,v$z),v$Qa.min(v$R.min,v$z,v$V),v$Qa.max(v$R.min,v$z,v$y),v$Qa.min(v$n.min,v$V,v$n.min),v$Qa.max(v$n.max,v$V,v$n.max)},v$a.cloneTo=function(v$n){v$n.enable=this.enable},v$a.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$n}()),v$O=function(){function v$p(){}return v$q(v$p,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),v$p._randomPointUnitArcCircle=function(v$n,v$a,v$U){var v$x=v$a.elements,v$D=NaN;v$D=v$U?v$U.getFloat()*v$n:Math.random()*v$n,v$x[0]=Math.cos(v$D),v$x[1]=Math.sin(v$D)},v$p._randomPointInsideUnitArcCircle=function(v$n,v$a,v$U){var v$x=v$a.elements;v$p._randomPointUnitArcCircle(v$n,v$a,v$U);var v$D=NaN;v$D=v$U?Math.pow(v$U.getFloat(),.5):Math.pow(Math.random(),.5),v$x[0]=v$x[0]*v$D,v$x[1]=v$x[1]*v$D},v$p._randomPointUnitCircle=function(v$n,v$a){var v$U=v$n.elements,v$x=NaN;v$x=v$a?v$a.getFloat()*Math.PI*2:Math.random()*Math.PI*2,v$U[0]=Math.cos(v$x),v$U[1]=Math.sin(v$x)},v$p._randomPointInsideUnitCircle=function(v$n,v$a){var v$U=v$n.elements;v$p._randomPointUnitCircle(v$n);var v$x=NaN;v$x=v$a?Math.pow(v$a.getFloat(),.5):Math.pow(Math.random(),.5),v$U[0]=v$U[0]*v$x,v$U[1]=v$U[1]*v$x},v$p._randomPointUnitSphere=function(v$n,v$a){var v$U=v$n.elements,v$x=NaN,v$D=NaN;v$D=v$a?(v$x=v$U[2]=2*v$a.getFloat()-1,v$a.getFloat()*Math.PI*2):(v$x=v$U[2]=2*Math.random()-1,Math.random()*Math.PI*2);var v$p=Math.sqrt(1-v$x*v$x);v$U[0]=v$p*Math.cos(v$D),v$U[1]=v$p*Math.sin(v$D)},v$p._randomPointInsideUnitSphere=function(v$n,v$a){var v$U=v$n.elements;v$p._randomPointUnitSphere(v$n);var v$x=NaN;v$x=v$a?Math.pow(v$a.getFloat(),1/3):Math.pow(Math.random(),1/3),v$U[0]=v$U[0]*v$x,v$U[1]=v$U[1]*v$x,v$U[2]=v$U[2]*v$x},v$p._randomPointInsideHalfUnitBox=function(v$n,v$a){var v$U=v$n.elements;v$a?(v$U[0]=v$a.getFloat()-.5,v$U[1]=v$a.getFloat()-.5,v$U[2]=v$a.getFloat()-.5):(v$U[0]=Math.random()-.5,v$U[1]=Math.random()-.5,v$U[2]=Math.random()-.5)},v$p}(),v$L=(function(){function v$n(v$n){this._size=null,this.enbale=!1,this._size=v$n}v$q(v$n,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.cloneTo=function(v$n){var v$a=v$n;this._size.cloneTo(v$a._size),v$a.enbale=this.enbale},v$a.clone=function(){var v$n;switch(this._size.type){case 0:v$n=this._size.separateAxes?v$j.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):v$j.createByGradient(this._size.gradient.clone());break;case 1:v$n=this._size.separateAxes?v$j.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):v$j.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:v$n=this._size.separateAxes?v$j.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):v$j.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var v$a=new this.constructor(v$n);return v$a.enbale=this.enbale,v$a},v$E(0,v$a,"size",function(){return this._size})}(),function(){function v$x(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}v$q(v$x,"laya.d3.core.particleShuriKen.module.StartFrame");var v$n=v$x.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.cloneTo=function(v$n){var v$a=v$n;v$a._type=this._type,v$a._constant=this._constant,v$a._constantMin=this._constantMin,v$a._constantMax=this._constantMax},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$n,"constant",function(){return this._constant}),v$E(0,v$n,"type",function(){return this._type}),v$E(0,v$n,"constantMin",function(){return this._constantMin}),v$E(0,v$n,"constantMax",function(){return this._constantMax}),v$x.createByConstant=function(v$n){var v$a=new v$x;return v$a._type=0,v$a._constant=v$n,v$a},v$x.createByRandomTwoConstant=function(v$n,v$a){var v$U=new v$x;return v$U._type=1,v$U._constantMin=v$n,v$U._constantMax=v$a,v$U},v$x}()),v$d=(function(){function v$n(v$n,v$a){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new v$pa(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=v$n,this._startFrame=v$a}v$q(v$n,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.cloneTo=function(v$n){var v$a=v$n;this.tiles.cloneTo(v$a.tiles),v$a.type=this.type,v$a.randomRow=this.randomRow,this._frame.cloneTo(v$a._frame),this._startFrame.cloneTo(v$a._startFrame),v$a.cycles=this.cycles,v$a.enableUVChannels=this.enableUVChannels,v$a.enable=this.enable},v$a.clone=function(){var v$n,v$a;switch(this._frame.type){case 0:v$n=v$I.createByConstant(this._frame.constant);break;case 1:v$n=v$I.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:v$n=v$I.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:v$n=v$I.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:v$a=v$L.createByConstant(this._startFrame.constant);break;case 1:v$a=v$L.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var v$U=new this.constructor(v$n,v$a);return this.tiles.cloneTo(v$U.tiles),v$U.type=this.type,v$U.randomRow=this.randomRow,v$U.cycles=this.cycles,v$U.enableUVChannels=this.enableUVChannels,v$U.enable=this.enable,v$U},v$E(0,v$a,"frame",function(){return this._frame}),v$E(0,v$a,"startFrame",function(){return this._startFrame})}(),function(){function v$n(v$n){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=v$n}v$q(v$n,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.cloneTo=function(v$n){var v$a=v$n;this._velocity.cloneTo(v$a._velocity),v$a.enbale=this.enbale,v$a.space=this.space},v$a.clone=function(){var v$n;switch(this._velocity.type){case 0:v$n=v$h.createByConstant(this._velocity.constant.clone());break;case 1:v$n=v$h.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:v$n=v$h.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:v$n=v$h.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var v$a=new this.constructor(v$n);return v$a.enbale=this.enbale,v$a.space=this.space,v$a},v$E(0,v$a,"velocity",function(){return this._velocity})}(),function(){function v$n(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new v$ia,this._vb=v$fa.create(v$n._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=v$ha.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=v$la.nameKey.getID("LINE"),this._shaderCompile=v$Na._preCompileShader[this._sharderNameID]}v$q(v$n,"laya.d3.core.PhasorSpriter3D");var v$a=v$n.prototype;return v$a.line=function(v$n,v$a,v$U,v$x){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(v$n.x,v$n.y,v$n.z,v$a.x,v$a.y,v$a.z,v$a.w),this.addVertex(v$U.x,v$U.y,v$U.z,v$x.x,v$x.y,v$x.z,v$x.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},v$a.circle=function(v$n,v$a,v$U,v$x,v$D,v$p){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*v$a,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/v$a,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*v$n,Math.cos(this._tempNumver0)*v$n,0,v$U,v$x,v$D,v$p),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},v$a.plane=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=v$x/2,this._tempNumver1=v$D/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(v$n-this._tempNumver0,v$a+this._tempNumver1,v$U,v$p,v$Q,v$V,v$y),this.addVertex(v$n+this._tempNumver0,v$a+this._tempNumver1,v$U,v$p,v$Q,v$V,v$y),this.addVertex(v$n-this._tempNumver0,v$a-this._tempNumver1,v$U,v$p,v$Q,v$V,v$y),this.addVertex(v$n+this._tempNumver0,v$a-this._tempNumver1,v$U,v$p,v$Q,v$V,v$y),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},v$a.box=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=v$x/2,this._tempNumver1=v$D/2,this._tempNumver2=v$p/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(v$n-this._tempNumver0,v$a+this._tempNumver1,v$U+this._tempNumver2,v$Q,v$V,v$y,v$R),this.addVertex(v$n+this._tempNumver0,v$a+this._tempNumver1,v$U+this._tempNumver2,v$Q,v$V,v$y,v$R),this.addVertex(v$n-this._tempNumver0,v$a-this._tempNumver1,v$U+this._tempNumver2,v$Q,v$V,v$y,v$R),this.addVertex(v$n+this._tempNumver0,v$a-this._tempNumver1,v$U+this._tempNumver2,v$Q,v$V,v$y,v$R),this.addVertex(v$n+this._tempNumver0,v$a+this._tempNumver1,v$U-this._tempNumver2,v$Q,v$V,v$y,v$R),this.addVertex(v$n-this._tempNumver0,v$a+this._tempNumver1,v$U-this._tempNumver2,v$Q,v$V,v$y,v$R),this.addVertex(v$n+this._tempNumver0,v$a-this._tempNumver1,v$U-this._tempNumver2,v$Q,v$V,v$y,v$R),this.addVertex(v$n-this._tempNumver0,v$a-this._tempNumver1,v$U-this._tempNumver2,v$Q,v$V,v$y,v$R),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},v$a.cone=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*v$U+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*v$U>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/v$U,this.addVertexIndex(0,v$a,0,v$x,v$D,v$p,v$Q,this._tempUint0),this.addVertexIndex(0,0,0,v$x,v$D,v$p,v$Q,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<v$U;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(v$n*this._tempNumver2,0,v$n*this._tempNumver3,v$x,v$D,v$p,v$Q,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==v$U-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(v$n*this._tempNumver2,0,v$n*this._tempNumver3,v$x,v$D,v$p,v$Q,this._tempUint0+(this._tempInt0+v$U)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==v$U-1?this.addIndexes(this._tempUint1+v$U+2):this.addIndexes(this._tempUint1+this._tempInt0+v$U+1),this.addIndexes(this._tempUint1+this._tempInt0+v$U),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},v$a.boundingBoxLine=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(v$n,v$D,v$p,v$Q,v$V,v$y,v$R),this.addVertex(v$x,v$D,v$p,v$Q,v$V,v$y,v$R),this.addVertex(v$n,v$a,v$p,v$Q,v$V,v$y,v$R),this.addVertex(v$x,v$a,v$p,v$Q,v$V,v$y,v$R),this.addVertex(v$x,v$D,v$U,v$Q,v$V,v$y,v$R),this.addVertex(v$n,v$D,v$U,v$Q,v$V,v$y,v$R),this.addVertex(v$x,v$a,v$U,v$Q,v$V,v$y,v$R),this.addVertex(v$n,v$a,v$U,v$Q,v$V,v$y,v$R),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},v$a.addVertex=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=v$n,this._vbData[this._posInVBData+1]=v$a,this._vbData[this._posInVBData+2]=v$U,this._vbData[this._posInVBData+3]=v$x,this._vbData[this._posInVBData+4]=v$D,this._vbData[this._posInVBData+5]=v$p,this._vbData[this._posInVBData+6]=v$Q,this._posInVBData+=this._floatSizePerVer,this},v$a.addVertexIndex=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){return this._hasBegun||this.addVertexIndexException(),this._vbData[v$V]=v$n,this._vbData[v$V+1]=v$a,this._vbData[v$V+2]=v$U,this._vbData[v$V+3]=v$x,this._vbData[v$V+4]=v$D,this._vbData[v$V+5]=v$p,this._vbData[v$V+6]=v$Q,(v$V+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=v$V),this},v$a.addIndexes=function(v$n){var v$a=arguments;this._hasBegun||this.addVertexIndexException();for(var v$U=0;v$U<v$a.length;v$U++)this._ibData[this._posInIBData]=v$a[v$U],this._posInIBData++;return this},v$a.begin=function(v$n,v$a){return this._hasBegun&&this.beginException0(),1!==v$n&&4!==v$n&&this.beginException1(),this._primitiveType=v$n,this._camera=v$a,this._hasBegun=!0,this},v$a.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},v$a.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(v$n._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),v$N.drawCall++,v$u.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},v$a.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},v$a.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},v$a.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},v$a.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},v$a.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},v$a.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(28,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector4",1)])}]),v$n}()),v$S=function(){function v$n(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++v$n._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new v$ia}v$q(v$n,"laya.d3.core.render.RenderElement");var v$a=v$n.prototype;return v$a.getDynamicBatchBakedVertexs=function(v$n){for(var v$a=this._renderObj._getVertexBuffer(v$n),v$U=v$a.getData().slice(),v$x=v$a.vertexDeclaration,v$D=v$x.getVertexElementByUsage(0).offset/4,v$p=v$x.getVertexElementByUsage(3).offset/4,v$Q=this._sprite3D.transform,v$V=v$Q.worldMatrix,v$y=v$Q.rotation,v$R=v$x.vertexStride/4,v$X=0,v$z=v$U.length;v$X<v$z;v$X+=v$R){var v$i=v$X+v$D,v$q=v$X+v$p;v$ba.transformVector3ArrayToVector3ArrayCoordinate(v$U,v$i,v$V,v$U,v$i),v$ba.transformVector3ArrayByQuat(v$U,v$q,v$y,v$U,v$q)}return v$U},v$a.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},v$a._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},v$E(0,v$a,"id",function(){return this._id}),v$E(0,v$a,"renderObj",function(){return this._renderObj},function(v$n){this._renderObj!==v$n&&(this._renderObj=v$n)}),v$n._uniqueIDCounter=0,v$n}(),v$w=function(){function v$a(v$n){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++v$a._uniqueIDCounter,this._needSort=!1,this._scene=v$n,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}v$q(v$a,"laya.d3.core.render.RenderQueue");var v$n=v$a.prototype;return v$n._sortOpaqueFunc=function(v$n,v$a){if(v$n._render&&v$a._render){var v$U=v$n._material.renderQueue-v$a._material.renderQueue;return 0==v$U?v$n._render._distanceForSort-v$a._render._distanceForSort:v$U}return 0},v$n._sortAlphaFunc=function(v$n,v$a){if(v$n._render&&v$a._render){var v$U=v$n._material.renderQueue-v$a._material.renderQueue;return 0==v$U?v$a._render._distanceForSort-v$n._render._distanceForSort:v$U}return 0},v$n._begainRenderElement=function(v$n,v$a,v$U){return!!v$a._beforeRender(v$n)},v$n._sortAlpha=function(v$n){v$a._cameraPosition=v$n,this._finalElements.sort(this._sortAlphaFunc)},v$n._sortOpaque=function(v$n){v$a._cameraPosition=v$n,this._finalElements.sort(this._sortOpaqueFunc)},v$n._preRender=function(v$n){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},v$n._render=function(v$n,v$a){for(var v$U,v$x,v$D,v$p,v$Q,v$V,v$y=v$N.loopCount,v$R=this._scene,v$X=v$n.camera,v$z=(v$X.id,!1),v$i=0,v$q=this._finalElements.length;v$i<v$q;v$i++){var v$E,v$m,v$b,v$P=this._finalElements[v$i];if(null!=v$P._onPreRenderFunction&&v$P._onPreRenderFunction.call(v$P._sprite3D,v$n),0===v$P._type){if(v$n.owner=v$b=v$P._sprite3D,v$n.renderElement=v$P,v$b._preRenderUpdateComponents(v$n),v$E=v$P.renderObj,v$m=v$P._material,this._begainRenderElement(v$n,v$E,v$m)){if(v$U=v$E._getVertexBuffers(),!(v$D=(v$x=v$E._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[v$x.id]){this._errorRecord[v$x.id]=1;var v$A="vertexBuffer:"+("("+v$x._destroyed+","+v$x._released+","+v$x._referenceCount+","+v$x._buffer+")")+", material:"+(v$m?v$m.__className+"("+v$m._destroyed+","+v$m._released+")":"null")+", owner:"+(v$b?v$b.__className+"("+v$b._destroyed+","+v$b._activeInHierarchy+","+v$b._displayedInStage+")":"null")+", renderObj:"+(v$E?v$E.__className+"("+v$E._destroyed+","+v$E._released+","+v$E._referenceCount+")":"")+", parent:, url:"+(v$b?v$b.url:"")+", disposeStack:"+v$x.disposeStack;v$Y.recordError("报错：unknown vertexDeclaration  "+v$A)}continue}if(v$z=(v$p=v$n._shader=v$m._getShader(v$R._shaderDefineValue,v$D.shaderDefineValue,v$b._shaderDefineValue)).bind()||v$y!==v$p._uploadLoopCount,v$U){if(v$p._uploadVertexBuffer!==v$U||v$z){for(var v$T=0;v$T<v$U.length;v$T++){var v$K=v$U[v$T];v$p.uploadAttributesX(v$K.vertexDeclaration.shaderValues.data,v$K)}v$p._uploadVertexBuffer=v$U}}else(v$p._uploadVertexBuffer!==v$x||v$z)&&(v$p.uploadAttributes(v$D.shaderValues.data,null),v$p._uploadVertexBuffer=v$x);(v$p._uploadScene!==v$R||v$z)&&(v$p.uploadSceneUniforms(v$R._shaderValues.data),v$p._uploadScene=v$R),(v$X!==v$p._uploadCamera||v$p._uploadSprite3D!==v$b||v$z)&&(v$p.uploadSpriteUniforms(v$b._shaderValues.data),v$p._uploadSprite3D=v$b),(v$X!==v$p._uploadCamera||v$z)&&(v$p.uploadCameraUniforms(v$X._shaderValues.data),v$p._uploadCamera=v$X),(v$p._uploadMaterial!==v$m||v$z)&&(v$m._upload(),v$p._uploadMaterial=v$m),v$Q!==v$m?(v$m._setRenderStateBlendDepth(),v$m._setRenderStateFrontFace(v$a,v$b.transform),v$Q=v$m,v$V=v$b):v$V!==v$b&&(v$m._setRenderStateFrontFace(v$a,v$b.transform),v$V=v$b),v$E._render(v$n),v$p._uploadLoopCount=v$y}v$b._postRenderUpdateComponents(v$n)}else if(2===v$P._type){v$P.renderObj;v$n.owner=v$b=v$P._sprite3D,v$n.renderElement=v$P,v$n._batchIndexStart=v$P._tempBatchIndexStart,v$n._batchIndexEnd=v$P._tempBatchIndexEnd,v$E=v$P.renderObj,v$m=v$P._material,this._begainRenderElement(v$n,v$E,v$m)&&(v$D=(v$x=v$E._getVertexBuffer(0)).vertexDeclaration,v$z=(v$p=v$n._shader=v$m._getShader(v$R._shaderDefineValue,v$D.shaderDefineValue,v$b._shaderDefineValue)).bind()||v$y!==v$p._uploadLoopCount,(v$p._uploadVertexBuffer!==v$x||v$z)&&(v$p.uploadAttributes(v$D.shaderValues.data,null),v$p._uploadVertexBuffer=v$x),(v$p._uploadScene!==v$R||v$z)&&(v$p.uploadSceneUniforms(v$R._shaderValues.data),v$p._uploadScene=v$R),(v$X!==v$p._uploadCamera||v$p._uploadSprite3D!==v$b||v$z)&&(v$p.uploadSpriteUniforms(v$b._shaderValues.data),v$p._uploadSprite3D=v$b),(v$X!==v$p._uploadCamera||v$z)&&(v$p.uploadCameraUniforms(v$X._shaderValues.data),v$p._uploadCamera=v$X),(v$p._uploadMaterial!==v$m||v$z)&&(v$m._upload(),v$p._uploadMaterial=v$m),v$Q!==v$m?(v$m._setRenderStateBlendDepth(),v$m._setRenderStateFrontFace(v$a,v$b.transform),v$Q=v$m,v$V=v$b):v$V!==v$b&&(v$m._setRenderStateFrontFace(v$a,v$b.transform),v$V=v$b),v$E._render(v$n),v$p._uploadLoopCount=v$y)}}},v$n._renderShadow=function(v$n,v$a){for(var v$U,v$x,v$D,v$p,v$Q,v$V=v$N.loopCount,v$y=this._scene,v$R=v$n.camera,v$X=!1,v$z=0,v$i=this._finalElements.length;v$z<v$i;v$z++){var v$q,v$E,v$m,v$b=this._finalElements[v$z];0===v$b._type&&(v$n.owner=v$m=v$b._sprite3D,v$a||v$m._projectionViewWorldUpdateCamera===v$R&&v$m._projectionViewWorldUpdateLoopCount===v$N.loopCount||(v$m._render._renderUpdate(v$n._projectionViewMatrix),v$m._projectionViewWorldUpdateLoopCount=v$N.loopCount,v$m._projectionViewWorldUpdateCamera=v$R),v$n.renderElement=v$b,v$m._preRenderUpdateComponents(v$n),v$q=v$b.renderObj,v$E=v$b._material,this._begainRenderElement(v$n,v$q,null)&&(v$x=(v$U=v$q._getVertexBuffer(0)).vertexDeclaration,v$X=(v$D=v$n._shader=v$E._getShader(v$y._shaderDefineValue,v$x.shaderDefineValue,v$m._shaderDefineValue)).bind()||v$V!==v$D._uploadLoopCount,(v$D._uploadVertexBuffer!==v$U||v$X)&&(v$D.uploadAttributes(v$x.shaderValues.data,null),v$D._uploadVertexBuffer=v$U),(v$R!==v$D._uploadCamera||v$D._uploadSprite3D!==v$m||v$X)&&(v$D.uploadSpriteUniforms(v$m._shaderValues.data),v$D._uploadSprite3D=v$m),(v$R!==v$D._uploadCamera||v$X)&&(v$D.uploadCameraUniforms(v$R._shaderValues.data),v$D._uploadCamera=v$R),(v$D._uploadMaterial!==v$E||v$X)&&(v$E._upload(),v$D._uploadMaterial=v$E),v$D._uploadRenderElement,v$p!==v$E?(v$E._setRenderStateFrontFace(!1,v$m.transform),v$p=v$E,v$Q=v$m):v$Q!==v$m&&(v$E._setRenderStateFrontFace(!1,v$m.transform),v$Q=v$m),v$q._render(v$n),v$D._uploadLoopCount=v$V),v$m._postRenderUpdateComponents(v$n))}},v$n._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},v$n._addRenderElement=function(v$n){this._renderElements.push(v$n),this._needSort=!0},v$n._addDynamicBatchElement=function(v$n){this._dynamicBatchCombineRenderElements.push(v$n)},v$E(0,v$n,"id",function(){return this._id}),v$a._uniqueIDCounter=0,v$a._cameraPosition=null,v$a}(),v$s=function(){function v$n(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return v$q(v$n,"laya.d3.core.render.RenderState"),v$n.clientWidth=0,v$n.clientHeight=0,v$n}(),v$C=function(){function v$Q(v$n,v$a){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new v$rn(new v$Qa,0),this._corners=[new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa],this._boundingBoxCenter=new v$Qa,this._children=v$x(8),this._objects=[],this._tempBoundBoxCorners=[new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa],this._scene=v$n,this._currentDepth=v$a}v$q(v$Q,"laya.d3.core.scene.OctreeNode");var v$n=v$Q.prototype;return v$Y.imps(v$n,{"laya.d3.core.scene.ITreeNode":!0}),v$n.init=function(v$n,v$a){var v$U=new v$Qa,v$x=new v$Qa;v$Qa.scale(v$a,-.5,v$U),v$Qa.scale(v$a,.5,v$x),v$Qa.add(v$U,v$n,v$U),v$Qa.add(v$x,v$n,v$x),this.exactBox=new v$Cn(v$U,v$x),this.relaxBox=new v$Cn(v$U,v$x)},v$n.addTreeNode=function(v$n){1===Collision.boxContainsBox(this._relaxBox,v$n.boundingBox)?this.addNodeDown(v$n,0):this.addObject(v$n)},v$n.addChild=function(v$n){var v$a=this._children[v$n];if(null==v$a){v$a=new v$Q(this._scene,this._currentDepth+1),(this._children[v$n]=v$a)._parent=this,v$Qa.subtract(this._exactBox.max,this._exactBox.min,v$Q.tempSize),v$Qa.multiply(v$Q.tempSize,v$Q._octreeSplit[v$n],v$Q.tempCenter),v$Qa.add(this._exactBox.min,v$Q.tempCenter,v$Q.tempCenter),v$Qa.scale(v$Q.tempSize,.25,v$Q.tempSize);var v$U=new v$Qa,v$x=new v$Qa;v$Qa.subtract(v$Q.tempCenter,v$Q.tempSize,v$U),v$Qa.add(v$Q.tempCenter,v$Q.tempSize,v$x),v$a.exactBox=new v$Cn(v$U,v$x),v$Qa.scale(v$Q.tempSize,v$Q.relax,v$Q.tempSize);var v$D=new v$Qa,v$p=new v$Qa;v$Qa.subtract(v$Q.tempCenter,v$Q.tempSize,v$D),v$Qa.add(v$Q.tempCenter,v$Q.tempSize,v$p),v$a.relaxBox=new v$Cn(v$D,v$p)}return v$a},v$n.addObject=function(v$n){(v$n._treeNode=this)._objects.push(v$n)},v$n.removeObject=function(v$n){if(v$n._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var v$a=this._objects.indexOf(v$n);return-1!==v$a&&(this._objects.splice(v$a,1),!0)},v$n.clearObject=function(){this._objects.length=0},v$n.addNodeUp=function(v$n,v$a){this._parent&&1!==Collision.boxContainsBox(this._exactBox,v$n.boundingBox)?this._parent.addNodeUp(v$n,v$a-1):this.addNodeDown(v$n,v$a)},v$n.addNodeDown=function(v$n,v$a){if(v$a<this._scene.treeLevel){var v$U=this.inChildIndex(v$n.boundingBoxCenter),v$x=this.addChild(v$U);1===Collision.boxContainsBox(v$x._relaxBox,v$n.boundingBox)?v$x.addNodeDown(v$n,++v$a):this.addObject(v$n)}else this.addObject(v$n)},v$n.inChildIndex=function(v$n){return 4*(v$n.z<this._boundingBoxCenter.z?0:1)+2*(v$n.y<this._boundingBoxCenter.y?0:1)+(v$n.x<this._boundingBoxCenter.x?0:1)},v$n.updateObject=function(v$n){1===Collision.boxContainsBox(this._relaxBox,v$n.boundingBox)?(this.removeObject(v$n),v$n._treeNode=null,this.addNodeDown(v$n,this._currentDepth)):this._parent&&(this.removeObject(v$n),v$n._treeNode=null,this._parent.addNodeUp(v$n,this._currentDepth-1))},v$n.cullingObjects=function(v$n,v$a,v$U,v$x,v$D){var v$p,v$Q=0,v$V=0,v$y=0,v$R=this._scene._dynamicBatchManager;for(v$Q=0,v$p=this._objects.length;v$Q<v$p;v$Q++){var v$X=this._objects[v$Q];if(v$G.isVisible(v$X._owner.layer.mask)&&v$X.enable){if(v$a&&(v$N.treeSpriteCollision+=1,0===v$n.containsBoundSphere(v$X.boundingSphere)))continue;v$X._renderUpdate(v$D),v$X._distanceForSort=v$Qa.distance(v$X.boundingSphere.center,v$x)+v$X.sortingFudge;var v$z=v$X._renderElements;for(v$V=0,v$y=v$z.length;v$V<v$y;v$V++){var v$i=v$z[v$V],v$q=v$i._staticBatch;if(v$q&&v$q._material===v$i._material)v$q._addBatchRenderElement(v$i);else{var v$E=v$i.renderObj;v$E.triangleCount<10&&1===v$E._vertexBufferCount&&v$E._getIndexBuffer()&&v$i._material.renderQueue<2&&v$i._canDynamicBatch&&!v$X._owner.isStatic?v$R._addPrepareRenderElement(v$i):this._scene.getRenderQueue(v$i._material.renderQueue)._addRenderElement(v$i)}}}}for(v$Q=0;v$Q<8;v$Q++){var v$m=this._children[v$Q];if(null!=v$m){var v$b=v$a;if(v$a){var v$P=v$n.containsBoundBox(v$m._relaxBox);if(v$N.treeNodeCollision+=1,0===v$P)continue;v$b=2===v$P}v$m.cullingObjects(v$n,v$b,v$U,v$x,v$D)}}},v$n.cullingShadowObjects=function(v$n,v$a,v$U,v$x,v$D){var v$p,v$Q=0,v$V=0,v$y=0;this._scene._dynamicBatchManager;for(v$Q=0,v$p=this._objects.length;v$Q<v$p;v$Q++){var v$R=this._objects[v$Q];if(v$R.castShadow&&v$G.isVisible(v$R._owner.layer.mask)&&v$R.enable){if(v$U&&0===v$n[0].containsBoundSphere(v$R.boundingSphere))continue;for(var v$X=1,v$z=v$n.length;v$X<v$z;v$X++){var v$i=v$a[v$X-1];if(0!==v$n[v$X].containsBoundSphere(v$R.boundingSphere)){var v$q=v$R._renderElements;for(v$V=0,v$y=v$q.length;v$V<v$y;v$V++)v$i._addRenderElement(v$q[v$V])}}}}for(v$Q=0;v$Q<8;v$Q++){var v$E=this._children[v$Q];if(null!=v$E){var v$m=v$U;if(v$U){var v$b=v$n[0].containsBoundBox(v$E._relaxBox);if(0===v$b)continue;v$m=2===v$b}v$E.cullingShadowObjects(v$n,v$a,v$m,v$x,v$D)}}},v$n.cullingShadowObjectsOnePSSM=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q,v$V=v$a[0],v$y=0,v$R=0,v$X=0;for(v$y=0,v$Q=this._objects.length;v$y<v$Q;v$y++){var v$z=this._objects[v$y];if(v$z.castShadow&&v$G.isVisible(v$z._owner.layer.mask)&&v$z.enable){if(v$x&&0===v$n.containsBoundSphere(v$z.boundingSphere))continue;v$z._renderUpdate(v$U);var v$i=v$z._renderElements;for(v$R=0,v$X=v$i.length;v$R<v$X;v$R++)v$V._addRenderElement(v$i[v$R])}}for(v$y=0;v$y<8;v$y++){var v$q=this._children[v$y];if(null!=v$q){var v$E=v$x;if(v$x){var v$m=v$n.containsBoundBox(v$q._relaxBox);if(0===v$m)continue;v$E=2===v$m}v$q.cullingShadowObjectsOnePSSM(v$n,v$a,v$U,v$E,v$D,v$p)}}},v$n.renderBoudingBox=function(v$n){this._renderBoudingBox(v$n);for(var v$a=0;v$a<8;++v$a){var v$U=this._children[v$a];v$U&&v$U.renderBoudingBox(v$n)}},v$n.buildAllChild=function(v$n){if(v$n<this._scene.treeLevel)for(var v$a=0;v$a<8;v$a++){this.addChild(v$a).buildAllChild(v$n+1)}},v$n._renderBoudingBox=function(v$n){},v$E(0,v$n,"exactBox",function(){return this._exactBox},function(v$n){this._exactBox=v$n,v$Qa.add(v$n.min,v$n.max,this._boundingBoxCenter),v$Qa.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),v$E(0,v$n,"relaxBox",function(){return this._relaxBox},function(v$n){(this._relaxBox=v$n).getCorners(this._corners),v$rn.createfromPoints(this._corners,this._boundingSphere)}),v$Q.debugMode=!1,v$Q.relax=1.15,v$Q.CHILDNUM=8,v$z(v$Q,["tempVector0",function(){return this.tempVector0=new v$Qa},"tempSize",function(){return this.tempSize=new v$Qa},"tempCenter",function(){return this.tempCenter=new v$Qa},"_octreeSplit",function(){return this._octreeSplit=[new v$Qa(.25,.25,.25),new v$Qa(.75,.25,.25),new v$Qa(.25,.75,.25),new v$Qa(.75,.75,.25),new v$Qa(.25,.25,.75),new v$Qa(.75,.25,.75),new v$Qa(.25,.75,.75),new v$Qa(.75,.75,.75)]}]),v$Q}(),v$t=(function(){function v$n(){}v$q(v$n,"laya.d3.core.scene.SceneManager")}(),function(){function v$n(v$n,v$a,v$U,v$x){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===v$n&&(v$n=1),void 0===v$a&&(v$a=1),void 0===v$U&&(v$U=1),void 0===v$x&&(v$x=1),this._r=v$n,this._g=v$a,this._b=v$U,this._a=v$x}return v$q(v$n,"laya.d3.core.trail.module.Color",null,"Color$1"),v$n.prototype.cloneTo=function(v$n){v$n._r=this._r,v$n._g=this._g,v$n._b=this._b,v$n._a=this._a},v$z(v$n,["RED",function(){return this.RED=new v$n(1,0,0,1)},"GREEN",function(){return this.GREEN=new v$n(0,1,0,1)},"BLUE",function(){return this.BLUE=new v$n(0,0,1,1)},"CYAN",function(){return this.CYAN=new v$n(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new v$n(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new v$n(1,0,1,1)},"GRAY",function(){return this.GRAY=new v$n(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new v$n(1,1,1,1)},"BLACK",function(){return this.BLACK=new v$n(0,0,0,1)}]),v$n}()),v$r=(function(){function v$n(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}v$q(v$n,"laya.d3.core.trail.module.Gradient");var v$a=v$n.prototype;v$a.setKeys=function(v$n,v$a){var v$U,v$x;this._colorKeys=v$n;for(var v$D=this.index=0;v$D<v$n.length;v$D++){var v$p=(v$U=v$n[v$D]).color;this._colorKeyData[this.index++]=v$p._r,this._colorKeyData[this.index++]=v$p._g,this._colorKeyData[this.index++]=v$p._b,this._colorKeyData[this.index++]=v$U.time}this._alphaKeys=v$a;for(var v$Q=this.index=0;v$Q<v$a.length;v$Q++)v$x=v$a[v$Q],this._alphaKeyData[this.index++]=v$x.alpha,this._alphaKeyData[this.index++]=v$x.time},v$a.cloneTo=function(v$n){var v$a=0,v$U=0,v$x=this.colorKeys,v$D=[];for(v$a=0,v$U=v$x.length;v$a<v$U;v$a++){var v$p=new v$J;v$x[v$a].cloneTo(v$p),v$D.push(v$p)}var v$Q=this.alphaKeys,v$V=[];for(v$a=0,v$U=v$Q.length;v$a<v$U;v$a++){var v$y=new v$r;v$Q[v$a].cloneTo(v$y),v$V.push(v$y)}v$n.setKeys(v$D,v$V)},v$E(0,v$a,"mode",function(){return this._mode},function(v$n){this._mode=v$n}),v$E(0,v$a,"colorKeys",function(){return this._colorKeys},function(v$n){this._colorKeys=v$n;for(var v$a=this.index=0;v$a<v$n.length;v$a++){var v$U=v$n[v$a],v$x=v$U.color;this._colorKeyData[this.index++]=v$x._r,this._colorKeyData[this.index++]=v$x._g,this._colorKeyData[this.index++]=v$x._b,this._colorKeyData[this.index++]=v$U.time}}),v$E(0,v$a,"alphaKeys",function(){return this._alphaKeys},function(v$n){this._alphaKeys=v$n;for(var v$a=this.index=0;v$a<v$n.length;v$a++){var v$U=v$n[v$a];this._alphaKeyData[this.index++]=v$U.alpha,this._alphaKeyData[this.index++]=v$U.time}})}(),function(){function v$n(v$n,v$a){this._alpha=NaN,this._time=NaN,void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),this._alpha=v$n,this._time=v$a}v$q(v$n,"laya.d3.core.trail.module.GradientAlphaKey");var v$a=v$n.prototype;return v$a.cloneTo=function(v$n){v$n.alpha=this.alpha,v$n.time=this.time},v$E(0,v$a,"alpha",function(){return this._alpha},function(v$n){this._alpha=v$n}),v$E(0,v$a,"time",function(){return this._time},function(v$n){this._time=v$n}),v$n}()),v$J=function(){function v$n(v$n,v$a){this._color=null,this._time=NaN,void 0===v$a&&(v$a=0),this._color=v$n||new v$t,this._time=v$a}v$q(v$n,"laya.d3.core.trail.module.GradientColorKey");var v$a=v$n.prototype;return v$a.cloneTo=function(v$n){this.color.cloneTo(v$n.color),v$n.time=this.time},v$E(0,v$a,"color",function(){return this._color},function(v$n){this._color=v$n}),v$E(0,v$a,"time",function(){return this._time},function(v$n){this._time=v$n}),v$n}(),v$e=(function(){function v$n(){}v$q(v$n,"laya.d3.core.trail.module.GradientMode"),v$n.Blend=0,v$n.Fixed=1}(),function(){function v$n(){}v$q(v$n,"laya.d3.core.trail.module.TextureMode"),v$n.Stretch=0,v$n.Tile=1}(),function(){function v$n(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}v$q(v$n,"laya.d3.core.trail.module.TrailKeyFrame"),v$n.prototype.cloneTo=function(v$n){v$n.time=this.time,v$n.inTangent=this.inTangent,v$n.outTangent=this.outTangent,v$n.value=this.value}}(),function(){function v$a(v$n){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new v$Qa,this._curPosition=new v$Qa,this._delVector3=new v$Qa,this._lastFixedVertexPosition=new v$Qa,this._pointAtoBVector3=new v$Qa,this._pointA=new v$Qa,this._pointB=new v$Qa,this._owner=v$n,this._id=v$a.renderElementCount++,0==this._id?v$n._owner.transform.position.cloneTo(this._lastPosition):v$n._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new v$fa(v$e.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new v$fa(v$e.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}v$q(v$a,"laya.d3.core.trail.TrailRenderElement");var v$n=v$a.prototype;v$Y.imps(v$n,{"laya.d3.core.render.IRenderable":!0}),v$n._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},v$n._addTrailByFirstPosition=function(v$n,v$a){v$Qa.subtract(v$a,v$n,this._delVector3),v$Qa.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),v$Qa.normalize(this._pointAtoBVector3,this._pointAtoBVector3),v$Qa.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(v$n),v$n.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},v$n._addTrailByNextPosition=function(v$n){v$Qa.subtract(v$n,this._lastFixedVertexPosition,this._delVector3),v$Qa.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),v$Qa.normalize(this._pointAtoBVector3,this._pointAtoBVector3),v$Qa.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=v$Qa.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=v$Jn.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(v$n),v$n.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(v$n),this._virtualVerticesCount=2)},v$n._updateVerticesByPosition=function(v$n){this._pointe=v$n.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},v$n._updateVertexBuffer2=function(){var v$n,v$a=0,v$U=0,v$x=0;for(v$x=0,v$n=(this._verticesCount+this._virtualVerticesCount)/2;v$x<v$n;v$x++)v$U=0==this._owner.textureMode?(this._VerticesToTailLength[v$x]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[v$x],this._vertices2[v$a++]=1-v$U,this._vertices2[v$a++]=1-v$U;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},v$n._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},v$n._updateDisappear=function(){var v$n,v$a=0;for(v$a=this._curDisappearIndex,v$n=(this._verticesCount+this._virtualVerticesCount)/2;v$a<v$n;v$a++)this._owner._curtime-this._everyGroupVertexBirthTime[v$a]>=this._owner.time+v$Jn.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},v$n._beforeRender=function(v$n){return this._camera=v$n.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),v$Qa.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},v$n._render=function(v$n){this._isDead||(v$u.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),v$N.drawCall++,v$N.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},v$n._getVertexBuffer=function(v$n){return void 0===v$n&&(v$n=0),0===v$n?this._vertexBuffer1:1===v$n?this._vertexBuffer2:null},v$n._getVertexBuffers=function(){return this._vertexBuffers},v$n._getIndexBuffer=function(){return null},v$n.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},v$n._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},v$E(0,v$n,"_vertexBufferCount",function(){return this._vertexBuffers.length}),v$E(0,v$n,"triangleCount",function(){return 0}),v$a.renderElementCount=0}(),function(){function v$n(){}v$q(v$n,"laya.d3.core.trail.VertexTrail");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration1}),v$E(1,v$n,"vertexDeclaration1",function(){return v$n._vertexDeclaration1}),v$E(1,v$n,"vertexDeclaration2",function(){return v$n._vertexDeclaration2}),v$z(v$n,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new v$pn(32,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",41),new v$Qn(24,"single",33),new v$Qn(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new v$pn(4,[new v$Qn(0,"single",38)])}]),v$n}()),v$nn=function(){function v$K(v$n){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=v$n}v$q(v$K,"laya.d3.graphics.DynamicBatch");var v$n=v$K.prototype;return v$Y.imps(v$n,{"laya.d3.core.render.IRenderable":!0}),v$n._getVertexBuffer=function(v$n){return void 0===v$n&&(v$n=0),0===v$n?this._vertexBuffer:null},v$n._getIndexBuffer=function(){return this._indexBuffer},v$n._getCombineRenderElementFromPool=function(v$n,v$a,v$U){var v$x=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return v$x||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=v$x=new v$S,v$x._sprite3D=new v$wa),v$x._sprite3D._render._renderUpdate(v$U),v$x},v$n._getRenderElement=function(v$n,v$a,v$U){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*v$K.maxVertexCount),this._indexDatas=new Uint16Array(v$K.maxIndexCount),this._vertexBuffer=v$fa.create(this._vertexDeclaration,v$K.maxVertexCount,35048),this._indexBuffer=v$ha.create("ushort",v$K.maxIndexCount,35048));for(var v$x=this._merageElements.length=0,v$D=0,v$p=0,v$Q=this._combineRenderElements.length;v$p<v$Q;v$p++){var v$V=this._combineRenderElements[v$p],v$y=v$V.getDynamicBatchBakedVertexs(0),v$R=v$V.getBakedIndices(),v$X=v$V._sprite3D.transform._isFrontFaceInvert,v$z=v$x/(this._vertexDeclaration.vertexStride/4),v$i=v$D,v$q=v$i+v$R.length;v$V._tempBatchIndexStart=v$i,v$V._tempBatchIndexEnd=v$q,this._indexDatas.set(v$R,v$D);var v$E=0;if(v$X)for(v$E=v$i;v$E<v$q;v$E+=3){this._indexDatas[v$E]=v$z+this._indexDatas[v$E];var v$m=this._indexDatas[v$E+1],v$b=this._indexDatas[v$E+2];this._indexDatas[v$E+1]=v$z+v$b,this._indexDatas[v$E+2]=v$z+v$m}else for(v$E=v$i;v$E<v$q;v$E+=3)this._indexDatas[v$E]=v$z+this._indexDatas[v$E],this._indexDatas[v$E+1]=v$z+this._indexDatas[v$E+1],this._indexDatas[v$E+2]=v$z+this._indexDatas[v$E+2];v$D+=v$R.length,this._vertexDatas.set(v$y,v$x),v$x+=v$y.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),v$p=this._combineRenderElementPoolIndex=0,v$Q=this._materials.length;v$p<v$Q;v$p++){var v$P=this._getCombineRenderElementFromPool(v$n,v$a,v$U);v$P._type=2,v$P._staticBatch=null;var v$A=(v$P.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[v$p]]._tempBatchIndexStart,v$T=v$p+1===this._materialToRenderElementsOffsets.length?v$D:this._combineRenderElements[this._materialToRenderElementsOffsets[v$p+1]]._tempBatchIndexStart;v$P._tempBatchIndexStart=v$A,v$P._tempBatchIndexEnd=v$T,v$P._material=this._materials[v$p],this._merageElements.push(v$P)}},v$n._addCombineRenderObjTest=function(v$n){var v$a=v$n.renderObj,v$U=this._currentCombineIndexCount+v$a._getIndexBuffer().indexCount,v$x=this._currentCombineVertexCount+v$a._getVertexBuffer().vertexCount;return!(v$K.maxVertexCount<v$x||v$K.maxIndexCount<v$U)},v$n._addCombineRenderObj=function(v$n){var v$a=v$n.renderObj;this._combineRenderElements.push(v$n),this._currentCombineIndexCount=this._currentCombineIndexCount+v$a._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+v$a._getVertexBuffer().vertexCount},v$n._addCombineMaterial=function(v$n){this._materials.push(v$n)},v$n._addMaterialToRenderElementOffset=function(v$n){this._materialToRenderElementsOffsets.push(v$n)},v$n._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},v$n._addToRenderQueue=function(v$n,v$a,v$U,v$x){this._getRenderElement(v$a,v$U,v$x);for(var v$D=0,v$p=this._materials.length;v$D<v$p;v$D++)v$n.getRenderQueue(this._materials[v$D].renderQueue)._addDynamicBatchElement(this._merageElements[v$D])},v$n._beforeRender=function(v$n){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},v$n._render=function(v$n){var v$a=v$n._batchIndexEnd-v$n._batchIndexStart;v$u.mainContext.drawElements(4,v$a,5123,2*v$n._batchIndexStart),v$N.drawCall++,v$N.trianglesFaces+=v$a/3},v$n._getVertexBuffers=function(){return null},v$E(0,v$n,"_vertexBufferCount",function(){return 1}),v$E(0,v$n,"triangleCount",function(){return this._indexBuffer.indexCount/3}),v$E(0,v$n,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),v$K.maxVertexCount=2e4,v$K.maxIndexCount=4e4,v$K.maxCombineTriangleCount=10,v$K}(),v$an=function(){function v$K(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}v$q(v$K,"laya.d3.graphics.DynamicBatchManager");var v$n=v$K.prototype;return v$n.getDynamicBatch=function(v$n,v$a){var v$U,v$x=v$n.id.toString()+v$a;return this._dynamicBatches[v$x]?v$U=this._dynamicBatches[v$x]:this._dynamicBatches[v$x]=v$U=new v$nn(v$n),v$U},v$n._garbageCollection=function(){for(var v$n in this._dynamicBatches)0===this._dynamicBatches[v$n].combineRenderElementsCount&&delete this._dynamicBatches[v$n]},v$n._addPrepareRenderElement=function(v$n){this._prepareDynamicBatchCombineElements.push(v$n)},v$n._finishCombineDynamicBatch=function(v$n){var v$a,v$U,v$x;this._prepareDynamicBatchCombineElements.sort(v$K._sortPrepareDynamicBatch);for(var v$D,v$p,v$Q,v$V,v$y,v$R=-1,v$X=!0,v$z=0,v$i=-1,v$q=0,v$E=this._prepareDynamicBatchCombineElements.length;v$q<v$E;v$q++){var v$m=(v$p=this._prepareDynamicBatchCombineElements[v$q]).renderObj._getVertexBuffer(0).vertexDeclaration,v$b=v$U!==v$m;v$b&&(v$z=0,v$U=v$m);var v$P=v$z!==v$R;if(v$P&&(v$R=v$z),(v$b||v$P)&&(v$Q=this.getDynamicBatch(v$m,v$z),v$a=null),v$X)if(v$Q._addCombineRenderObjTest(v$p)){if(v$a!==(v$D=v$p._material))v$V&&(v$n.getRenderQueue(v$y._material.renderQueue)._addRenderElement(v$y),v$y=v$V=null,v$i=-1),v$V=v$D,v$i=v$Q.combineRenderElementsCount,v$y=v$p,v$a=v$D;else if(v$V){var v$A=v$y.renderObj,v$T=v$p.renderObj;v$A._getVertexBuffer().vertexCount+v$T._getVertexBuffer().vertexCount>v$nn.maxVertexCount||v$A._getIndexBuffer().indexCount+v$T._getIndexBuffer().indexCount>v$nn.maxIndexCount?(v$n.getRenderQueue(v$y._material.renderQueue)._addRenderElement(v$y),v$V=v$D,v$i=v$Q.combineRenderElementsCount,v$y=v$p):(v$Q._addCombineMaterial(v$V),v$Q._addMaterialToRenderElementOffset(v$i),v$Q._addCombineRenderObj(v$y),v$y=v$V=null,v$i=-1,v$Q._addCombineRenderObj(v$p))}else v$Q._addCombineRenderObj(v$p);v$X=!0}else v$V&&(v$n.getRenderQueue(v$y._material.renderQueue)._addRenderElement(v$y),v$y=v$V=null,v$i=-1),v$z++,v$X=!1;else v$x=this._prepareDynamicBatchCombineElements[v$q-1],v$Q._addMaterialToRenderElementOffset(v$Q.combineRenderElementsCount),v$a=v$x._material,v$Q._addCombineMaterial(v$a),v$Q._addCombineRenderObj(v$x),v$X=!0,v$a!==(v$D=v$p._material)?(v$V=v$D,v$i=v$Q.combineRenderElementsCount,v$y=v$p):v$Q._addCombineRenderObj(v$p),v$a=v$D}v$V&&(v$n.getRenderQueue(v$y._material.renderQueue)._addRenderElement(v$y),v$y=v$V=null,v$i=-1),this._prepareDynamicBatchCombineElements.length=0},v$n._clearRenderElements=function(){for(var v$n in this._dynamicBatches)this._dynamicBatches[v$n]._clearRenderElements()},v$n._addToRenderQueue=function(v$n,v$a,v$U,v$x){for(var v$D in this._dynamicBatches){var v$p=this._dynamicBatches[v$D];0<v$p.combineRenderElementsCount&&v$p._addToRenderQueue(v$n,v$a,v$U,v$x)}},v$n.dispose=function(){this._dynamicBatches=null},v$K._sortPrepareDynamicBatch=function(v$n,v$a){return v$n._mainSortID-v$a._mainSortID},v$K}(),v$Un=function(){function v$n(){}return v$q(v$n,"laya.d3.graphics.FrustumCulling"),v$n.renderShadowObjectCulling=function(v$n,v$a,v$U,v$x,v$D){var v$p=0,v$Q=0,v$V=0,v$y=0;for(v$p=0,v$V=v$U.length;v$p<v$V;v$p++){var v$R=v$U[v$p];v$R&&v$R._clearRenderElements()}var v$X,v$z,v$i,v$q=v$n._cullingRenders;if(1<v$D){for(v$p=0,v$V=v$n._cullingRendersLength;v$p<v$V;v$p++)if((v$X=v$q[v$p]).castShadow&&v$G.isVisible(v$X._owner.layer.mask)&&v$X.enable)for(var v$E=1,v$m=v$a.length;v$E<v$m;v$E++)if(v$z=v$U[v$E-1],0!==v$a[v$E].containsBoundSphere(v$X.boundingSphere))for(v$Q=0,v$y=(v$i=v$X._renderElements).length;v$Q<v$y;v$Q++)v$z._addRenderElement(v$i[v$Q])}else for(v$p=0,v$V=v$n._cullingRendersLength;v$p<v$V;v$p++)if((v$X=v$q[v$p]).castShadow&&v$G.isVisible(v$X._owner.layer.mask)&&v$X.enable&&0!==v$a[0].containsBoundSphere(v$X.boundingSphere))for(v$X._renderUpdate(v$x),v$z=v$U[0],v$Q=0,v$y=(v$i=v$X._renderElements).length;v$Q<v$y;v$Q++)v$z._addRenderElement(v$i[v$Q])},v$n.renderShadowObjectCullingOctree=function(v$n,v$a,v$U,v$x,v$D){for(var v$p=0,v$Q=v$U.length;v$p<v$Q;v$p++){var v$V=v$U[v$p];v$V&&v$V._clearRenderElements()}1<v$D?v$n.treeRoot.cullingShadowObjects(v$a,v$U,!0,0,v$n):v$n.treeRoot.cullingShadowObjectsOnePSSM(v$a[0],v$U,v$x,!0,0,v$n)},v$n.renderObjectCulling=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=0,v$V=0,v$y=0,v$R=0,v$X=v$a._quenes,v$z=v$a._dynamicBatchManager,v$i=v$a._cullingRenders;for(v$Q=0,v$V=v$X.length;v$Q<v$V;v$Q++){var v$q=v$X[v$Q];v$q&&v$q._clearRenderElements()}var v$E=v$xn._staticBatchManagers;for(v$Q=0,v$V=v$E.length;v$Q<v$V;v$Q++)v$E[v$Q]._clearRenderElements();v$z._clearRenderElements();var v$m=v$U.transform.position;for(v$Q=0,v$V=v$a._cullingRendersLength;v$Q<v$V;v$Q++){var v$b=v$i[v$Q];if(v$G.isVisible(v$b._owner.layer.mask)&&v$b.enable&&0!==v$n.containsBoundSphere(v$b.boundingSphere)&&v$b._renderUpdate(v$p)){v$b._distanceForSort=v$Qa.distance(v$b.boundingSphere.center,v$m)+v$b.sortingFudge;var v$P=v$b._renderElements;for(v$y=0,v$R=v$P.length;v$y<v$R;v$y++){var v$A=v$P[v$y],v$T=v$A._staticBatch;if(v$T&&v$T._material===v$A._material)v$T._addBatchRenderElement(v$A);else{var v$K=v$A.renderObj;v$K.triangleCount<10&&1===v$K._vertexBufferCount&&v$K._getIndexBuffer()&&v$A._material.renderQueue<2&&v$A._canDynamicBatch&&!v$b._owner.isStatic?v$z._addPrepareRenderElement(v$A):v$a.getRenderQueue(v$A._material.renderQueue)._addRenderElement(v$A)}}}}for(v$Q=0,v$V=v$E.length;v$Q<v$V;v$Q++)v$E[v$Q]._addToRenderQueue(v$a,v$x,v$D,v$p);v$z._finishCombineDynamicBatch(v$a),v$z._addToRenderQueue(v$a,v$x,v$D,v$p)},v$n.renderObjectCullingOctree=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=0,v$V=0,v$y=v$a._quenes,v$R=v$a._dynamicBatchManager;for(v$Q=0,v$V=v$y.length;v$Q<v$V;v$Q++){var v$X=v$y[v$Q];v$X&&v$X._clearRenderElements()}var v$z=v$xn._staticBatchManagers;for(v$Q=0,v$V=v$z.length;v$Q<v$V;v$Q++)v$z[v$Q]._clearRenderElements();for(v$R._clearRenderElements(),v$a._cullingRenders.length=0,v$a.treeRoot.cullingObjects(v$n,!0,0,v$U.transform.position,v$p),v$Q=0,v$V=v$z.length;v$Q<v$V;v$Q++)v$z[v$Q]._addToRenderQueue(v$a,v$x,v$D,v$p);v$R._finishCombineDynamicBatch(v$a),v$R._addToRenderQueue(v$a,v$x,v$D,v$p)},v$n.renderObjectCullingNoBoundFrustum=function(v$n,v$a,v$U,v$x,v$D){var v$p=0,v$Q=0,v$V=0,v$y=0,v$R=v$n._quenes,v$X=v$n._dynamicBatchManager,v$z=v$n._cullingRenders;for(v$p=0,v$Q=v$R.length;v$p<v$Q;v$p++){var v$i=v$R[v$p];v$i&&v$i._clearRenderElements()}var v$q=v$xn._staticBatchManagers;for(v$p=0,v$Q=v$q.length;v$p<v$Q;v$p++)v$q[v$p]._clearRenderElements();v$X._clearRenderElements();var v$E=v$a.transform.position;for(v$p=0,v$Q=v$n._cullingRendersLength;v$p<v$Q;v$p++){var v$m=v$z[v$p];if(v$G.isVisible(v$m._owner.layer.mask)&&v$m.enable){v$m._renderUpdate(v$D),v$m._distanceForSort=v$Qa.distance(v$m.boundingSphere.center,v$E)+v$m.sortingFudge;var v$b=v$m._renderElements;for(v$V=0,v$y=v$b.length;v$V<v$y;v$V++){var v$P=v$b[v$V],v$A=v$P._staticBatch;if(v$A&&v$A._material===v$P._material)v$A._addBatchRenderElement(v$P);else{var v$T=v$P.renderObj;v$T.triangleCount<10&&1===v$T._vertexBufferCount&&v$T._getIndexBuffer()&&v$P._material.renderQueue<2&&v$P._canDynamicBatch&&!v$m._owner.isStatic?v$X._addPrepareRenderElement(v$P):v$n.getRenderQueue(v$P._material.renderQueue)._addRenderElement(v$P)}}}}for(v$p=0,v$Q=v$q.length;v$p<v$Q;v$p++)v$q[v$p]._addToRenderQueue(v$n,v$U,v$x,v$D);v$X._finishCombineDynamicBatch(v$n),v$X._addToRenderQueue(v$n,v$U,v$x,v$D)},v$n}(),v$xn=function(){function v$p(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}v$q(v$p,"laya.d3.graphics.StaticBatchManager");var v$n=v$p.prototype;return v$n._finishInit=function(){for(var v$n in this._staticBatches)this._staticBatches[v$n]._finishInit();this._initBatchRenderElements.length=0},v$n._initStaticBatchs=function(v$n){throw new Error("StaticBatchManager:must override this function.")},v$n._addInitBatchSprite=function(v$n){for(var v$a=v$n._render._renderElements,v$U=0,v$x=v$a.length;v$U<v$x;v$U++)this._initBatchRenderElements.push(v$a[v$U])},v$n._clearRenderElements=function(){for(var v$n in this._staticBatches)this._staticBatches[v$n]._clearRenderElements()},v$n._garbageCollection=function(v$n){var v$a=v$n._staticBatch,v$U=v$a._initBatchRenderElements,v$x=v$U.indexOf(v$n);v$U.splice(v$x,1),0===v$U.length&&(v$a.dispose(),delete this._staticBatches[v$a._key])},v$n._addToRenderQueue=function(v$n,v$a,v$U,v$x){for(var v$D in this._staticBatches){var v$p=this._staticBatches[v$D];0<v$p._batchRenderElements.length&&v$p._updateToRenderQueue(v$n,v$x)}},v$n.dispose=function(){this._staticBatches=null},v$p._addToStaticBatchQueue=function(v$n){v$n instanceof laya.d3.core.RenderableSprite3D&&v$n._addToInitStaticBatchManager();for(var v$a=0,v$U=v$n.numChildren;v$a<v$U;v$a++)v$p._addToStaticBatchQueue(v$n._childs[v$a])},v$p.combine=function(v$n,v$a){var v$U,v$x=0,v$D=0;if(v$a)for(v$x=0,v$D=v$a.length;v$x<v$D;v$x++){v$a[v$x]._addToInitStaticBatchManager()}else v$n&&v$p._addToStaticBatchQueue(v$n);for(v$x=0,v$D=v$p._staticBatchManagers.length;v$x<v$D;v$x++)(v$U=v$p._staticBatchManagers[v$x])._initStaticBatchs(v$n),v$U._finishInit()},v$p._staticBatchManagers=[],v$p}(),v$Dn=function(){function v$n(v$n,v$a,v$U){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=v$n,this._manager=v$a,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=v$U}v$q(v$n,"laya.d3.graphics.StaticBatch");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),v$a._binarySearch=function(v$n){for(var v$a=0,v$U=this._batchRenderElements.length-1,v$x=0;v$a<=v$U;)v$x=Math.floor((v$a+v$U)/2),this._compareBatchRenderElement(this._batchRenderElements[v$x],v$n)?v$U=v$x-1:v$a=v$x+1;return v$a},v$a._compareBatchRenderElement=function(v$n,v$a){throw new Error("StaticBatch:must override this function.")},v$a._getVertexDecLightMap=function(v$n){return v$n===v$hn.vertexDeclaration?v$Gn.vertexDeclaration:v$n===v$jn.vertexDeclaration?v$Hn.vertexDeclaration:v$n===v$_n.vertexDeclaration?v$Kn.vertexDeclaration:v$n===v$on.vertexDeclaration?null:v$n===v$mn.vertexDeclaration?v$bn.vertexDeclaration:v$n===v$Fn.vertexDeclaration?v$vn.vertexDeclaration:v$n===v$un.vertexDeclaration?v$cn.vertexDeclaration:v$n===v$fn.vertexDeclaration?v$In.vertexDeclaration:v$n===v$jn.vertexDeclaration?v$Hn.vertexDeclaration:v$n===v$$n.vertexDeclaration?v$Yn.vertexDeclaration:v$n===v$on.vertexDeclaration?null:v$n===v$mn.vertexDeclaration?v$bn.vertexDeclaration:v$n===v$gn.vertexDeclaration?v$ln.vertexDeclaration:v$n===v$un.vertexDeclaration?v$cn.vertexDeclaration:v$n},v$a._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},v$a._addBatchRenderElement=function(v$n){this._batchRenderElements.splice(this._binarySearch(v$n),0,v$n)},v$a._updateToRenderQueue=function(v$n,v$a){this._combineRenderElementPoolIndex=0,this._getRenderElement(v$n.getRenderQueue(this._material.renderQueue)._renderElements,v$n,v$a)},v$a._getRenderElement=function(v$n,v$a,v$U){throw new Error("StaticBatch:must override this function.")},v$a._finishInit=function(){throw new Error("StaticBatch:must override this function.")},v$a._clearRenderElements=function(){this._batchRenderElements.length=0},v$a.dispose=function(){},v$a._getVertexBuffer=function(v$n){return void 0===v$n&&(v$n=0),null},v$a._getIndexBuffer=function(){return null},v$a._beforeRender=function(v$n){return!0},v$a._render=function(v$n){},v$a._getVertexBuffers=function(){return null},v$E(0,v$a,"_vertexBufferCount",function(){return 1}),v$E(0,v$a,"triangleCount",function(){return 0}),v$n.combine=function(v$n){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),v$xn.combine(v$n)},v$n.maxBatchVertexCount=65535,v$n}(),v$pn=function(){function v$Q(v$n,v$a){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++v$Q._uniqueIDCounter,this._id>v$Q.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",v$Q.maxVertexDeclaration);this._shaderValues=new v$ia,this._vertexElementsDic={},this._vertexStride=v$n,this._vertexElements=v$a;for(var v$U=0;v$U<v$a.length;v$U++){var v$x=v$a[v$U],v$D=v$x.elementUsage;this._vertexElementsDic[v$D]=v$x;var v$p=[v$Q._getTypeSize(v$x.elementFormat)/4,5126,!1,this._vertexStride,v$x.offset];switch(this._shaderValues.setValue(v$D,v$p),v$D){case 1:this._addShaderDefine(v$Na.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(v$Na.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(v$Na.SHADERDEFINE_UV1)}}}v$q(v$Q,"laya.d3.graphics.VertexDeclaration");var v$n=v$Q.prototype;return v$n._addShaderDefine=function(v$n){this._shaderDefineValue|=v$n},v$n._removeShaderDefine=function(v$n){this._shaderDefineValue&=~v$n},v$n.getVertexElements=function(){return this._vertexElements.slice()},v$n.getVertexElementByUsage=function(v$n){return this._vertexElementsDic[v$n]},v$n.unBinding=function(){},v$E(0,v$n,"shaderDefineValue",function(){return this._shaderDefineValue}),v$E(0,v$n,"id",function(){return this._id}),v$E(0,v$n,"vertexStride",function(){return this._vertexStride}),v$E(0,v$n,"shaderValues",function(){return this._shaderValues}),v$Q._getTypeSize=function(v$n){switch(v$n){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},v$Q.getVertexStride=function(v$n){for(var v$a=0,v$U=0;v$U<v$n.Length;v$U++){var v$x=v$n[v$U],v$D=v$x.offset+v$Q._getTypeSize(v$x.elementFormat);v$a<v$D&&(v$a=v$D)}return v$a},v$Q._maxVertexDeclarationBit=1e3,v$Q._uniqueIDCounter=1,v$z(v$Q,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),v$Q}(),v$Qn=function(){function v$n(v$n,v$a,v$U){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=v$n,this.elementFormat=v$a,this.elementUsage=v$U}return v$q(v$n,"laya.d3.graphics.VertexElement"),v$n}(),v$Vn=(function(){function v$n(){}v$q(v$n,"laya.d3.graphics.VertexElementFormat"),v$n.Single="single",v$n.Vector2="vector2",v$n.Vector3="vector3",v$n.Vector4="vector4",v$n.Color="color",v$n.Byte4="byte4",v$n.Short2="short2",v$n.Short4="short4",v$n.NormalizedShort2="normalizedshort2",v$n.NormalizedShort4="normalizedshort4",v$n.HalfVector2="halfvector2",v$n.HalfVector4="halfvector4"}(),function(){function v$n(){}v$q(v$n,"laya.d3.graphics.VertexElementUsage"),v$n.POSITION0=0,v$n.COLOR0=1,v$n.TEXTURECOORDINATE0=2,v$n.NORMAL0=3,v$n.BINORMAL0=4,v$n.TANGENT0=5,v$n.BLENDINDICES0=6,v$n.BLENDWEIGHT0=7,v$n.DEPTH0=8,v$n.FOG0=9,v$n.POINTSIZE0=10,v$n.SAMPLE0=11,v$n.TESSELLATEFACTOR0=12,v$n.COLOR1=13,v$n.NEXTTEXTURECOORDINATE0=14,v$n.TEXTURECOORDINATE1=15,v$n.NEXTTEXTURECOORDINATE1=16,v$n.CORNERTEXTURECOORDINATE0=17,v$n.VELOCITY0=18,v$n.STARTCOLOR0=19,v$n.STARTSIZE=20,v$n.AGEADDSCALE0=21,v$n.STARTROTATION=22,v$n.ENDCOLOR0=23,v$n.STARTLIFETIME=24,v$n.TIME0=33,v$n.SHAPEPOSITIONSTARTLIFETIME=30,v$n.DIRECTIONTIME=32,v$n.SIZEROTATION0=27,v$n.RADIUS0=28,v$n.RADIAN0=29,v$n.STARTSPEED=31,v$n.RANDOM0=34,v$n.RANDOM1=35,v$n.SIMULATIONWORLDPOSTION=36,v$n.SIMULATIONWORLDROTATION=37,v$n.TEXTURECOORDINATE0X=38,v$n.TEXTURECOORDINATE0X1=39,v$n.TEXTURECOORDINATE0Y=40,v$n.OFFSETVECTOR=41}(),function(){function v$n(v$n,v$a,v$U){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=v$n,this._textureCoordinate0=v$a,this._time=v$U}v$q(v$n,"laya.d3.graphics.VertexGlitter");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate0}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"time",function(){return this._time}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(24,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector2",2),new v$Qn(20,"single",33)])}])}(),function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=v$n,this._position=v$a,this._velocity=v$U,this._startColor=v$x,this._endColor=v$D,this._sizeRotation=v$p,this._radius=v$Q,this._radian=v$V,this._ageAddScale=v$y,this._time=v$R}v$q(v$n,"laya.d3.graphics.VertexParticle");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"endColor",function(){return this._endColor}),v$E(0,v$a,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),v$E(0,v$a,"sizeRotation",function(){return this._sizeRotation}),v$E(0,v$a,"velocity",function(){return this._velocity}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"startColor",function(){return this._startColor}),v$E(0,v$a,"radius",function(){return this._radius}),v$E(0,v$a,"radian",function(){return this._radian}),v$E(0,v$a,"ageAddScale",function(){return this._ageAddScale}),v$E(0,v$a,"time",function(){return this._time}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(116,[new v$Qn(0,"vector4",17),new v$Qn(16,"vector3",0),new v$Qn(28,"vector3",18),new v$Qn(40,"vector4",19),new v$Qn(56,"vector4",23),new v$Qn(72,"vector3",27),new v$Qn(84,"vector2",28),new v$Qn(92,"vector4",29),new v$Qn(108,"single",24),new v$Qn(112,"single",33)])}])}(),function(){function v$n(v$n){this._position=null,this._position=v$n}v$q(v$n,"laya.d3.graphics.VertexPosition");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(12,[new v$Qn(0,"vector3",0)])}]),v$n}()),v$yn=function(){function v$n(v$n,v$a){this._position=null,this._normal=null,this._position=v$n,this._normal=v$a}v$q(v$n,"laya.d3.graphics.VertexPositionNormal");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(24,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3)])}]),v$n}(),v$Rn=function(){function v$n(v$n,v$a,v$U){this._position=null,this._normal=null,this._color=null,this._position=v$n,this._normal=v$a,this._color=v$U}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColor");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(40,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1)])}]),v$n}(),v$Xn=function(){function v$n(v$n,v$a,v$U,v$x,v$D){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._blendIndex=v$x,this._blendWeight=v$D}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorSkin");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(72,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector4",7),new v$Qn(56,"vector4",6)])}]),v$n}(),v$zn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._tangent=v$x,this._blendIndex=v$D,this._blendWeight=v$p}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(88,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector4",7),new v$Qn(56,"vector4",6),new v$Qn(72,"vector4",5)])}]),v$n}(),v$in=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._tangent=v$x,this._blendIndex=v$D,this._blendWeight=v$p}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(84,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector4",7),new v$Qn(56,"vector4",6),new v$Qn(72,"vector3",5)])}]),v$n}(),v$qn=function(){function v$n(v$n,v$a,v$U,v$x){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._tangent=v$x}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorSTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(56,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector4",5)])}]),v$n}(),v$En=function(){function v$n(v$n,v$a,v$U,v$x){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._tangent=v$x}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(52,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector3",5)])}]),v$n}(),v$mn=function(){function v$n(v$n,v$a,v$U,v$x){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate=v$x}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTexture");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(48,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2)])}]),v$n}(),v$bn=function(){function v$n(v$n,v$a,v$U,v$x,v$D){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate0=v$x,this._textureCoordinate1=v$D}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(56,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector2",15)])}]),v$n}(),v$Pn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate0=v$x,this._textureCoordinate1=v$D,this._blendIndex=v$p,this._blendWeight=v$Q}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(88,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector2",15),new v$Qn(56,"vector4",7),new v$Qn(72,"vector4",6)])}]),v$n}(),v$An=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate0=v$x,this._textureCoordinate1=v$D,this._tangent=v$p,this._blendIndex=v$Q,this._blendWeight=v$V}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(104,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector2",15),new v$Qn(56,"vector4",7),new v$Qn(72,"vector4",6),new v$Qn(88,"vector4",5)])}]),v$n}(),v$Tn=function(){function v$n(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$a.VertexPositionNormalColorTexture0SkinTangent=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate0=v$x,this._textureCoordinate1=v$D,this._tangent=v$p,this._blendIndex=v$Q,this._blendWeight=v$V},v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(100,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector2",15),new v$Qn(56,"vector4",7),new v$Qn(72,"vector4",6),new v$Qn(88,"vector3",5)])}]),v$n}(),v$Kn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate0=v$x,this._textureCoordinate1=v$D,this._tangent=v$p}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(72,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector2",15),new v$Qn(56,"vector4",5)])}]),v$n}(),v$Yn=function(){function v$n(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$a.VertexPositionNormalColorTexture0Tangent=function(v$n,v$a,v$U,v$x,v$D,v$p){this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate0=v$x,this._textureCoordinate1=v$D,this._tangent=v$p},v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(68,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector2",15),new v$Qn(56,"vector3",5)])}]),v$n}(),v$Wn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate=v$x,this._blendIndex=v$D,this._blendWeight=v$p}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(80,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector4",7),new v$Qn(64,"vector4",6)])}]),v$n}(),v$kn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate=v$x,this._tangent=v$D,this._blendIndex=v$p,this._blendWeight=v$Q}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(96,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector4",7),new v$Qn(64,"vector4",6),new v$Qn(80,"vector4",5)])}]),v$n}(),v$Nn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate=v$x,this._tangent=v$D,this._blendIndex=v$p,this._blendWeight=v$Q}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(92,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector4",7),new v$Qn(64,"vector4",6),new v$Qn(80,"vector3",5)])}]),v$n}(),v$_n=function(){function v$n(v$n,v$a,v$U,v$x,v$D){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate=v$x,this._tangent=v$D}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(64,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector4",5)])}]),v$n}(),v$$n=function(){function v$n(v$n,v$a,v$U,v$x,v$D){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._color=v$U,this._textureCoordinate=v$x,this._tangent=v$D}v$q(v$n,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"color",function(){return this._color}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(60,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",1),new v$Qn(40,"vector2",2),new v$Qn(48,"vector3",5)])}]),v$n}(),v$Mn=function(){function v$n(v$n,v$a,v$U){this._position=null,this._normal=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._tangent=v$U}v$q(v$n,"laya.d3.graphics.VertexPositionNormalSTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(40,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector4",5)])}]),v$n}(),v$Zn=function(){function v$n(v$n,v$a,v$U){this._position=null,this._normal=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._tangent=v$U}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(36,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector3",5)])}]),v$n}(),v$un=function(){function v$n(v$n,v$a,v$U){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=v$n,this._normal=v$a,this._textureCoordinate=v$U}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTexture");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(32,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2)])}]),v$n}(),v$cn=function(){function v$n(v$n,v$a,v$U,v$x){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=v$n,this._normal=v$a,this._textureCoordinate0=v$U,this._textureCoordinate1=v$x}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(40,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector2",15)])}]),v$n}(),v$Hn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=v$n,this._normal=v$a,this._textureCoordinate0=v$U,this._textureCoordinate1=v$x,this._blendIndex=v$D,this._blendWeight=v$p}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(72,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector2",15),new v$Qn(40,"vector4",7),new v$Qn(56,"vector4",6)])}]),v$n}(),v$Gn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._textureCoordinate0=v$U,this._textureCoordinate1=v$x,this._tangent=v$D,this._blendIndex=v$p,this._blendWeight=v$Q}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(88,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector2",15),new v$Qn(40,"vector4",7),new v$Qn(56,"vector4",6),new v$Qn(72,"vector4",5)])}]),v$n}(),v$In=function(){function v$n(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$a.VertexPositionNormalTexture0SkinTangent=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){this._position=v$n,this._normal=v$a,this._textureCoordinate0=v$U,this._textureCoordinate1=v$x,this._tangent=v$D,this._blendIndex=v$p,this._blendWeight=v$Q},v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(84,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector2",15),new v$Qn(40,"vector4",7),new v$Qn(56,"vector4",6),new v$Qn(72,"vector3",5)])}]),v$n}(),v$vn=function(){function v$n(v$n,v$a,v$U,v$x,v$D){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._textureCoordinate0=v$U,this._textureCoordinate1=v$x,this._tangent=v$D}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(56,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector2",15),new v$Qn(40,"vector4",5)])}]),v$n}(),v$ln=function(){function v$n(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$a.VertexPositionNormalTexture0Tangent=function(v$n,v$a,v$U,v$x,v$D){this._position=v$n,this._normal=v$a,this._textureCoordinate0=v$U,this._textureCoordinate1=v$x,this._tangent=v$D},v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(52,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector2",15),new v$Qn(40,"vector3",5)])}]),v$n}(),v$jn=function(){function v$n(v$n,v$a,v$U,v$x,v$D){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=v$n,this._normal=v$a,this._textureCoordinate=v$U,this._blendIndex=v$x,this._blendWeight=v$D}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTextureSkin");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(64,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector4",7),new v$Qn(48,"vector4",6)])}]),v$n}(),v$hn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._textureCoordinate=v$U,this._tangent=v$x,this._blendIndex=v$D,this._blendWeight=v$p}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(80,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector4",7),new v$Qn(48,"vector4",6),new v$Qn(64,"vector4",5)])}]),v$n}(),v$fn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._textureCoordinate=v$U,this._tangent=v$x,this._blendIndex=v$D,this._blendWeight=v$p}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(76,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector4",7),new v$Qn(48,"vector4",6),new v$Qn(64,"vector3",5)])}]),v$n}(),v$Fn=function(){function v$n(v$n,v$a,v$U,v$x){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._textureCoordinate=v$U,this._tangent=v$x}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(48,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector4",5)])}]),v$n}(),v$gn=function(){function v$n(v$n,v$a,v$U,v$x){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=v$n,this._normal=v$a,this._textureCoordinate=v$U,this._tangent=v$x}v$q(v$n,"laya.d3.graphics.VertexPositionNormalTextureTangent");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(44,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector3",5)])}]),v$n}(),v$on=function(){function v$n(v$n,v$a,v$U){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=v$n,this._normal=v$a,this._textureCoordinate=v$U}v$q(v$n,"laya.d3.graphics.VertexPositionNTBTexture");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(56,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector3",5),new v$Qn(36,"vector3",4),new v$Qn(48,"vector2",2)])}]),v$n}(),v$Bn=function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=v$n,this._normal=v$a,this._textureCoordinate0=v$x,this._textureCoordinate1=v$D,this._tangent=v$p,v$U=v$U,this._blendIndex=v$Q,this._blendWeight=v$V}v$q(v$n,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"tangent",function(){return this._tangent}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(0,v$a,"textureCoordinate1",function(){return this._textureCoordinate1}),v$E(0,v$a,"blendIndex",function(){return this._blendIndex}),v$E(0,v$a,"blendWeight",function(){return this._blendWeight}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(96,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector3",5),new v$Qn(36,"vector3",4),new v$Qn(48,"vector2",2),new v$Qn(56,"vector2",15),new v$Qn(64,"vector4",7),new v$Qn(80,"vector4",6)])}]),v$n}(),v$On=function(){function v$n(v$n,v$a,v$U){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=v$n,this._normal=v$a,this._textureCoordinate=v$U}v$q(v$n,"laya.d3.graphics.VertexPositionNTBTextureSkin");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"textureCoordinate",function(){return this._textureCoordinate}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(88,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector3",5),new v$Qn(36,"vector3",4),new v$Qn(48,"vector2",2),new v$Qn(56,"vector4",7),new v$Qn(72,"vector4",6)])}]),v$n}(),v$Ln=(function(){function v$n(v$n,v$a,v$U,v$x){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=v$n,this._normal=v$a,this._textureCoord0=v$U,this._textureCoord1=v$x}v$q(v$n,"laya.d3.graphics.VertexPositionTerrain");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"normal",function(){return this._normal}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"textureCoord0",function(){return this._textureCoord0}),v$E(0,v$a,"textureCoord1",function(){return this._textureCoord1}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(40,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector3",3),new v$Qn(24,"vector2",2),new v$Qn(32,"vector2",15)])}])}(),function(){function v$n(v$n,v$a){this._position=null,this._textureCoordinate0=null,this._position=v$n,this._textureCoordinate0=v$a}v$q(v$n,"laya.d3.graphics.VertexPositionTexture0");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"position",function(){return this._position}),v$E(0,v$a,"textureCoordinate0",function(){return this._textureCoordinate0}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(20,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector2",2)])}]),v$n}()),v$dn=(function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$z,v$i,v$q){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=v$n,this._positionStartLifeTime=v$a,this._velocity=v$U,this._startColor=v$x,this._startSize=v$D,this._startRotation0=v$p,this._startRotation1=v$Q,this._startRotation2=v$V,this._startLifeTime=v$y,this._time=v$R,this._startSpeed=v$X,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=v$q}v$q(v$n,"laya.d3.graphics.VertexShurikenParticleBillboard");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),v$E(0,v$a,"random1",function(){return this._randoms1}),v$E(0,v$a,"startRotation2",function(){return this._startRotation2}),v$E(0,v$a,"positionStartLifeTime",function(){return this._positionStartLifeTime}),v$E(0,v$a,"velocity",function(){return this._velocity}),v$E(0,v$a,"random0",function(){return this._randoms0}),v$E(0,v$a,"startSize",function(){return this._startSize}),v$E(0,v$a,"startColor",function(){return this._startColor}),v$E(0,v$a,"startRotation0",function(){return this._startRotation0}),v$E(0,v$a,"startRotation1",function(){return this._startRotation1}),v$E(0,v$a,"startLifeTime",function(){return this._startLifeTime}),v$E(0,v$a,"time",function(){return this._time}),v$E(0,v$a,"startSpeed",function(){return this._startSpeed}),v$E(0,v$a,"simulationWorldPostion",function(){return this._simulationWorldPostion}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(152,[new v$Qn(0,"vector4",17),new v$Qn(16,"vector4",30),new v$Qn(32,"vector4",32),new v$Qn(48,"vector4",19),new v$Qn(64,"vector3",20),new v$Qn(76,"vector3",22),new v$Qn(88,"single",31),new v$Qn(92,"vector4",34),new v$Qn(108,"vector4",35),new v$Qn(124,"vector3",36),new v$Qn(136,"vector4",37)])}])}(),function(){function v$n(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$z,v$i,v$q){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=v$n,this._positionStartLifeTime=v$a,this._velocity=v$U,this._startColor=v$x,this._startSize=v$D,this._startRotation0=v$p,this._startRotation1=v$Q,this._startRotation2=v$V,this._startLifeTime=v$y,this._time=v$R,this._startSpeed=v$X,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=v$q}v$q(v$n,"laya.d3.graphics.VertexShurikenParticleMesh");var v$a=v$n.prototype;v$Y.imps(v$a,{"laya.d3.graphics.IVertex":!0}),v$E(0,v$a,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),v$E(0,v$a,"velocity",function(){return this._velocity}),v$E(0,v$a,"position",function(){return this._positionStartLifeTime}),v$E(0,v$a,"random0",function(){return this._randoms0}),v$E(0,v$a,"startSize",function(){return this._startSize}),v$E(0,v$a,"startColor",function(){return this._startColor}),v$E(0,v$a,"startRotation0",function(){return this._startRotation0}),v$E(0,v$a,"startRotation1",function(){return this._startRotation1}),v$E(0,v$a,"random1",function(){return this._randoms1}),v$E(0,v$a,"startRotation2",function(){return this._startRotation2}),v$E(0,v$a,"startLifeTime",function(){return this._startLifeTime}),v$E(0,v$a,"time",function(){return this._time}),v$E(0,v$a,"startSpeed",function(){return this._startSpeed}),v$E(0,v$a,"simulationWorldPostion",function(){return this._simulationWorldPostion}),v$E(0,v$a,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$E(1,v$n,"vertexDeclaration",function(){return v$n._vertexDeclaration}),v$z(v$n,["_vertexDeclaration",function(){return this._vertexDeclaration=new v$pn(172,[new v$Qn(0,"vector3",0),new v$Qn(12,"vector4",1),new v$Qn(28,"vector2",2),new v$Qn(36,"vector4",30),new v$Qn(52,"vector4",32),new v$Qn(68,"vector4",19),new v$Qn(84,"vector3",20),new v$Qn(96,"vector3",22),new v$Qn(108,"single",31),new v$Qn(112,"vector4",34),new v$Qn(128,"vector4",35),new v$Qn(144,"vector3",36),new v$Qn(156,"vector4",37)])}])}(),function(){function v$T(v$n,v$a,v$U,v$x,v$D,v$p){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=v$U,this._materials=v$x,this._subMeshes=v$D,this._materialMap=v$p,this._version=v$a,this._onLoaded(v$n)}v$q(v$T,"laya.d3.loaders.LoadModelV01");var v$n=v$T.prototype;return v$n._onLoaded=function(v$n){this._readData=v$n,this.READ_BLOCK();for(var v$a=0;v$a<this._BLOCK.count;v$a++){var v$U=this._readData.getUint16(),v$x=this._strings[v$U],v$D=this["READ_"+v$x];if(null==v$D)throw new Error("model file err,no this function:"+v$U+" "+v$x);if(!v$D.call(this))break}return this._mesh},v$n.onError=function(){},v$n._readString=function(){return this._strings[this._readData.getUint16()]},v$n.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},v$n.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},v$n.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var v$n=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var v$a=0;v$a<this._STRINGS.size;v$a++)this._strings[v$a]=this._readData.readUTFString();return this._readData.pos=v$n,!0},v$n.READ_MATERIAL=function(){var v$n=this._readData.getUint16(),v$a=(this._readString(),this._readString());return this._materials[v$n]="null"!==v$a?v$P.getRes(this._materialMap[v$a]):new v$Za,!0},v$n.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var v$n,v$a=this._readData.__getBuffer(),v$U=0,v$x=this._readData.getUint32(),v$D=this._readData.getUint32(),v$p=(new Float32Array(v$a.slice(v$x+this._DATA.offset,v$x+this._DATA.offset+v$D)),this._readData.getUint32()),v$Q=this._readData.getUint32(),v$V=new Float32Array(v$a.slice(v$p+this._DATA.offset,v$p+this._DATA.offset+v$Q));for(this.mesh._inverseBindPoses=[],v$U=0,v$n=v$V.length;v$U<v$n;v$U+=16){var v$y=new v$na(v$V[v$U+0],v$V[v$U+1],v$V[v$U+2],v$V[v$U+3],v$V[v$U+4],v$V[v$U+5],v$V[v$U+6],v$V[v$U+7],v$V[v$U+8],v$V[v$U+9],v$V[v$U+10],v$V[v$U+11],v$V[v$U+12],v$V[v$U+13],v$V[v$U+14],v$V[v$U+15]);this.mesh._inverseBindPoses.push(v$y)}break;default:throw new Error("LoadModel:unknown version.")}return!0},v$n.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var v$n=this._readString();this._shaderAttributes=v$n.match(v$T._attrReg);var v$a=this._readData.getUint32(),v$U=this._readData.getUint32(),v$x=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),v$D=this._readData.getUint32(),v$p=this._readData.getUint32(),v$Q=this._readData.getUint32(),v$V=this._readData.__getBuffer(),v$y=new v$Ra(this._mesh),v$R=this._getVertexDeclaration(),v$X=v$fa.create(v$R,v$D/v$R.vertexStride,35044,!0),v$z=v$x+this._DATA.offset,v$i=v$V.slice(v$z,v$z+v$D);v$X.setData(new Float32Array(v$i));for(var v$q=(v$y._vertexBuffer=v$X).vertexDeclaration.getVertexElements(),v$E=0;v$E<v$q.length;v$E++)v$y._bufferUsage[v$q[v$E].elementUsage]=v$X;var v$m=v$ha.create("ushort",v$U/2,35044,!0),v$b=v$a+this._DATA.offset,v$P=v$V.slice(v$b,v$b+v$U);v$m.setData(new Uint16Array(v$P)),v$y._indexBuffer=v$m;var v$A=v$V.slice(v$p+this._DATA.offset,v$p+this._DATA.offset+v$Q);return v$y._boneIndicesList[0]=new Uint8Array(v$A),this._subMeshes.push(v$y),!0},v$n.READ_DATAAREA=function(){return!1},v$n._getVertexDeclaration=function(){for(var v$n,v$a=!1,v$U=!1,v$x=!1,v$D=!1,v$p=!1,v$Q=!1,v$V=!1,v$y=!1,v$R=!1,v$X=0;v$X<this._shaderAttributes.length;v$X+=8)switch(this._shaderAttributes[v$X]){case"POSITION":v$a=!0;break;case"NORMAL":v$U=!0;break;case"COLOR":v$x=!0;break;case"UV":v$D=!0;break;case"UV1":v$p=!0;break;case"BLENDWEIGHT":v$V=!0;break;case"BLENDINDICES":v$y=!0;break;case"TANGENT":v$Q=!0;break;case"BINORMAL":v$R=!0}return v$a&&v$U&&v$x&&v$D&&v$p&&v$V&&v$y&&v$Q?v$n=v$Tn.vertexDeclaration:v$a&&v$U&&v$x&&v$D&&v$p&&v$V&&v$y?v$n=v$Pn.vertexDeclaration:v$a&&v$U&&v$D&&v$p&&v$V&&v$y&&v$Q?v$n=v$In.vertexDeclaration:v$a&&v$U&&v$D&&v$p&&v$V&&v$y?v$n=v$Hn.vertexDeclaration:v$a&&v$U&&v$x&&v$D&&v$V&&v$y&&v$Q?v$n=v$Nn.vertexDeclaration:v$a&&v$U&&v$x&&v$D&&v$V&&v$y?v$n=v$Wn.vertexDeclaration:v$a&&v$U&&v$Q&&v$R&&v$D&&v$V&&v$y?v$n=v$On.vertexDeclaration:v$a&&v$U&&v$D&&v$V&&v$y&&v$Q?v$n=v$fn.vertexDeclaration:v$a&&v$U&&v$D&&v$V&&v$y?v$n=v$jn.vertexDeclaration:v$a&&v$U&&v$x&&v$V&&v$y&&v$Q?v$n=v$in.vertexDeclaration:v$a&&v$U&&v$x&&v$V&&v$y?v$n=v$Xn.vertexDeclaration:v$a&&v$U&&v$x&&v$D&&v$p&&v$Q?v$n=v$Yn.vertexDeclaration:v$a&&v$U&&v$x&&v$D&&v$p?v$n=v$bn.vertexDeclaration:v$a&&v$U&&v$D&&v$p&&v$Q?v$n=v$ln.vertexDeclaration:v$a&&v$U&&v$D&&v$p?v$n=v$cn.vertexDeclaration:v$a&&v$U&&v$x&&v$D&&v$Q?v$n=v$$n.vertexDeclaration:v$a&&v$U&&v$D&&v$Q&&v$R?v$n=v$on.vertexDeclaration:v$a&&v$U&&v$x&&v$D?v$n=v$mn.vertexDeclaration:v$a&&v$U&&v$D&&v$Q?v$n=v$gn.vertexDeclaration:v$a&&v$U&&v$D?v$n=v$un.vertexDeclaration:v$a&&v$U&&v$x&&v$Q?v$n=v$En.vertexDeclaration:v$a&&v$U&&v$x&&(v$n=v$Rn.vertexDeclaration),v$n},v$E(0,v$n,"mesh",function(){return this._mesh}),v$T._attrReg=new RegExp("(\\w+)|([:,;])","g"),v$T}()),v$Sn=function(){function v$k(){}return v$q(v$k,"laya.d3.loaders.LoadModelV02"),v$k.parse=function(v$n,v$a,v$U,v$x,v$D,v$p){v$k._mesh=v$U,v$k._materials=v$x,v$k._subMeshes=v$D,v$k._materialMap=v$p,v$k._version=v$a,v$k._readData=v$n,v$k.READ_DATA(),v$k.READ_BLOCK(),v$k.READ_STRINGS();for(var v$Q=0,v$V=v$k._BLOCK.count;v$Q<v$V;v$Q++){v$k._readData.pos=v$k._BLOCK.blockStarts[v$Q];var v$y=v$k._readData.getUint16(),v$R=v$k._strings[v$y],v$X=v$k["READ_"+v$R];if(null==v$X)throw new Error("model file err,no this function:"+v$y+" "+v$R);v$X.call()}v$k._strings.length=0,v$k._readData=null,v$k._version=null,v$k._mesh=null,v$k._materials=null,v$k._subMeshes=null,v$k._materialMap=null},v$k._readString=function(){return v$k._strings[v$k._readData.getUint16()]},v$k.READ_DATA=function(){v$k._DATA.offset=v$k._readData.getUint32(),v$k._DATA.size=v$k._readData.getUint32()},v$k.READ_BLOCK=function(){for(var v$n=v$k._BLOCK.count=v$k._readData.getUint16(),v$a=v$k._BLOCK.blockStarts=[],v$U=v$k._BLOCK.blockLengths=[],v$x=0;v$x<v$n;v$x++)v$a.push(v$k._readData.getUint32()),v$U.push(v$k._readData.getUint32())},v$k.READ_STRINGS=function(){var v$n=v$k._readData.getUint32(),v$a=v$k._readData.getUint16(),v$U=v$k._readData.pos;v$k._readData.pos=v$n+v$k._DATA.offset;for(var v$x=0;v$x<v$a;v$x++)v$k._strings[v$x]=v$k._readData.readUTFString();v$k._readData.pos=v$U},v$k.READ_MATERIAL=function(){v$k._readString(),v$k._readString();var v$n=v$k._readString();return""!==v$n&&v$k._materials.push(v$P.getRes(v$k._materialMap[v$n])),!0},v$k.READ_MESH=function(){v$k._readString();var v$n,v$a=v$k._readData.__getBuffer(),v$U=0,v$x=v$k._readData.getInt16(),v$D=v$k._DATA.offset;for(v$U=0;v$U<v$x;v$U++){var v$p=v$D+v$k._readData.getUint32(),v$Q=v$k._readData.getUint32(),v$V=new Float32Array(v$a.slice(v$p,v$p+v$Q)),v$y=v$k._readString().match(v$k._attrReg),v$R=v$k._getVertexDeclaration(v$y),v$X=v$fa.create(v$R,4*v$V.length/v$R.vertexStride,35044,!0);v$X.setData(v$V),v$k._mesh._vertexBuffers.push(v$X)}var v$z=v$D+v$k._readData.getUint32(),v$i=v$k._readData.getUint32(),v$q=new Uint16Array(v$a.slice(v$z,v$z+v$i)),v$E=v$ha.create("ushort",v$i/2,35044,!0);v$E.setData(v$q),v$k._mesh._indexBuffer=v$E;var v$m=v$k._mesh._boneNames=[],v$b=v$k._readData.getUint16();for(v$m.length=v$b,v$U=0;v$U<v$b;v$U++)v$m[v$U]=v$k._strings[v$k._readData.getUint16()];var v$P=v$k._readData.getUint32(),v$A=v$k._readData.getUint32(),v$T=(new Float32Array(v$a.slice(v$D+v$P,v$D+v$P+v$A)),v$k._readData.getUint32()),v$K=v$k._readData.getUint32(),v$Y=new Float32Array(v$a.slice(v$D+v$T,v$D+v$T+v$K));for(v$k._mesh._inverseBindPoses=[],v$U=0,v$n=v$Y.length;v$U<v$n;v$U+=16){var v$W=new v$na(v$Y[v$U+0],v$Y[v$U+1],v$Y[v$U+2],v$Y[v$U+3],v$Y[v$U+4],v$Y[v$U+5],v$Y[v$U+6],v$Y[v$U+7],v$Y[v$U+8],v$Y[v$U+9],v$Y[v$U+10],v$Y[v$U+11],v$Y[v$U+12],v$Y[v$U+13],v$Y[v$U+14],v$Y[v$U+15]);v$k._mesh._inverseBindPoses.push(v$W)}return v$k._mesh._skinnedDatas=new Float32Array(16*v$Y.length),!0},v$k.READ_SUBMESH=function(){var v$n=v$k._readData.__getBuffer(),v$a=new v$Ra(v$k._mesh),v$U=v$k._readData.getInt16(),v$x=v$k._readData.getUint32(),v$D=v$k._readData.getUint32();v$a._vertexBuffer=v$k._mesh._vertexBuffers[v$U],v$a._vertexStart=v$x,v$a._vertexCount=v$D;var v$p=v$k._readData.getUint32(),v$Q=v$k._readData.getUint32(),v$V=v$k._mesh._indexBuffer;v$a._indexBuffer=v$V,v$a._indexStart=v$p,v$a._indexCount=v$Q,v$a._indices=new Uint16Array(v$V.getData().buffer,2*v$p,v$Q);var v$y=v$k._DATA.offset,v$R=v$a._subIndexBufferStart,v$X=v$a._subIndexBufferCount,v$z=v$a._boneIndicesList,v$i=v$k._readData.getUint16();v$R.length=v$i,v$X.length=v$i,v$z.length=v$i;for(var v$q=0;v$q<v$i;v$q++){v$R[v$q]=v$k._readData.getUint32(),v$X[v$q]=v$k._readData.getUint32();var v$E=v$k._readData.getUint32(),v$m=v$k._readData.getUint32();v$a._boneIndicesList[v$q]=new Uint8Array(v$n.slice(v$y+v$E,v$y+v$E+v$m))}return v$k._subMeshes.push(v$a),!0},v$k._getVertexDeclaration=function(v$n){for(var v$a,v$U=!1,v$x=!1,v$D=!1,v$p=!1,v$Q=!1,v$V=!1,v$y=!1,v$R=!1,v$X=!1,v$z=0;v$z<v$n.length;v$z++)switch(v$n[v$z]){case"POSITION":v$U=!0;break;case"NORMAL":v$x=!0;break;case"COLOR":v$D=!0;break;case"UV":v$p=!0;break;case"UV1":v$Q=!0;break;case"BLENDWEIGHT":v$y=!0;break;case"BLENDINDICES":v$R=!0;break;case"TANGENT":v$V=!0;break;case"BINORMAL":v$X=!0}return v$U&&v$x&&v$D&&v$p&&v$Q&&v$y&&v$R&&v$V?v$a=v$Tn.vertexDeclaration:v$U&&v$x&&v$D&&v$p&&v$Q&&v$y&&v$R?v$a=v$Pn.vertexDeclaration:v$U&&v$x&&v$p&&v$Q&&v$y&&v$R&&v$V?v$a=v$In.vertexDeclaration:v$U&&v$x&&v$p&&v$Q&&v$y&&v$R?v$a=v$Hn.vertexDeclaration:v$U&&v$x&&v$D&&v$p&&v$y&&v$R&&v$V?v$a=v$Nn.vertexDeclaration:v$U&&v$x&&v$D&&v$p&&v$y&&v$R?v$a=v$Wn.vertexDeclaration:v$U&&v$x&&v$p&&v$y&&v$R&&v$V?v$a=v$fn.vertexDeclaration:v$U&&v$x&&v$p&&v$y&&v$R?v$a=v$jn.vertexDeclaration:v$U&&v$x&&v$D&&v$y&&v$R&&v$V?v$a=v$in.vertexDeclaration:v$U&&v$x&&v$D&&v$y&&v$R?v$a=v$Xn.vertexDeclaration:v$U&&v$x&&v$D&&v$p&&v$Q&&v$V?v$a=v$Yn.vertexDeclaration:v$U&&v$x&&v$D&&v$p&&v$Q?v$a=v$bn.vertexDeclaration:v$U&&v$x&&v$p&&v$Q&&v$V?v$a=v$ln.vertexDeclaration:v$U&&v$x&&v$p&&v$Q?v$a=v$cn.vertexDeclaration:v$U&&v$x&&v$D&&v$p&&v$V?v$a=v$$n.vertexDeclaration:v$U&&v$x&&v$p&&v$V&&v$X?v$a=v$on.vertexDeclaration:v$U&&v$x&&v$D&&v$p?v$a=v$mn.vertexDeclaration:v$U&&v$x&&v$p&&v$V?v$a=v$gn.vertexDeclaration:v$U&&v$x&&v$p?v$a=v$un.vertexDeclaration:v$U&&v$x&&v$D&&v$V?v$a=v$En.vertexDeclaration:v$U&&v$x&&v$D&&(v$a=v$Rn.vertexDeclaration),v$a},v$k._attrReg=new RegExp("(\\w+)|([:,;])","g"),v$k._strings=[],v$k._readData=null,v$k._version=null,v$k._mesh=null,v$k._materials=null,v$k._subMeshes=null,v$k._materialMap=null,v$z(v$k,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),v$k}(),v$wn=function(){function v$W(){}return v$q(v$W,"laya.d3.loaders.LoadModelV03"),v$W.parse=function(v$n,v$a,v$U,v$x,v$D){v$W._mesh=v$U,v$W._subMeshes=v$x,v$W._materialMap=v$D,v$W._version=v$a,v$W._readData=v$n,v$W.READ_DATA(),v$W.READ_BLOCK(),v$W.READ_STRINGS();for(var v$p=0,v$Q=v$W._BLOCK.count;v$p<v$Q;v$p++){v$W._readData.pos=v$W._BLOCK.blockStarts[v$p];var v$V=v$W._readData.getUint16(),v$y=v$W._strings[v$V],v$R=v$W["READ_"+v$y];if(null==v$R)throw new Error("model file err,no this function:"+v$V+" "+v$y);v$R.call()}v$W._strings.length=0,v$W._readData=null,v$W._version=null,v$W._mesh=null,v$W._subMeshes=null,v$W._materialMap=null},v$W._readString=function(){return v$W._strings[v$W._readData.getUint16()]},v$W.READ_DATA=function(){v$W._DATA.offset=v$W._readData.getUint32(),v$W._DATA.size=v$W._readData.getUint32()},v$W.READ_BLOCK=function(){for(var v$n=v$W._BLOCK.count=v$W._readData.getUint16(),v$a=v$W._BLOCK.blockStarts=[],v$U=v$W._BLOCK.blockLengths=[],v$x=0;v$x<v$n;v$x++)v$a.push(v$W._readData.getUint32()),v$U.push(v$W._readData.getUint32())},v$W.READ_STRINGS=function(){var v$n=v$W._readData.getUint32(),v$a=v$W._readData.getUint16(),v$U=v$W._readData.pos;v$W._readData.pos=v$n+v$W._DATA.offset;for(var v$x=0;v$x<v$a;v$x++)v$W._strings[v$x]=v$W._readData.readUTFString();v$W._readData.pos=v$U},v$W.READ_MESH=function(){var v$n,v$a=v$W._readString(),v$U=v$W._readData.__getBuffer(),v$x=0,v$D=v$W._readData.getInt16(),v$p=v$W._DATA.offset;for(v$x=0;v$x<v$D;v$x++){var v$Q,v$V=v$p+v$W._readData.getUint32(),v$y=v$W._readData.getUint32(),v$R=new Float32Array(v$U.slice(v$V,v$V+v$y)),v$X=v$W._readString();switch(v$W._version){case"LAYAMODEL:03":v$Q=v$W._vertexDeclarationMap_Discard[v$X];break;case"LAYAMODEL:0301":v$Q=v$W._vertexDeclarationMap[v$X];break;default:throw new Error("LoadModelV03: unknown version.")}if(!v$Q)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+v$W._version+"  bufferAttribute="+v$X+"  name="+v$a+"  url="+(v$W._mesh?v$W._mesh.url:"null"));var v$z=v$fa.create(v$Q,4*v$R.length/v$Q.vertexStride,35044,!0,v$W._mesh._url+"_"+v$x);v$z.setData(v$R),v$W._mesh._vertexBuffers.push(v$z)}var v$i=v$p+v$W._readData.getUint32(),v$q=v$W._readData.getUint32(),v$E=new Uint16Array(v$U.slice(v$i,v$i+v$q)),v$m=v$ha.create("ushort",v$q/2,35044,!0,v$W._mesh._url);v$m.setData(v$E),v$W._mesh._indexBuffer=v$m;var v$b=v$W._mesh._boneNames=[],v$P=v$W._readData.getUint16();for(v$b.length=v$P,v$x=0;v$x<v$P;v$x++)v$b[v$x]=v$W._strings[v$W._readData.getUint16()];v$W._readData.pos+=8;var v$A=v$W._readData.getUint32(),v$T=v$W._readData.getUint32(),v$K=new Float32Array(v$U.slice(v$p+v$A,v$p+v$A+v$T));for(v$W._mesh._inverseBindPoses=[],v$x=0,v$n=v$K.length;v$x<v$n;v$x+=16){var v$Y=new v$na(v$K[v$x+0],v$K[v$x+1],v$K[v$x+2],v$K[v$x+3],v$K[v$x+4],v$K[v$x+5],v$K[v$x+6],v$K[v$x+7],v$K[v$x+8],v$K[v$x+9],v$K[v$x+10],v$K[v$x+11],v$K[v$x+12],v$K[v$x+13],v$K[v$x+14],v$K[v$x+15]);v$W._mesh._inverseBindPoses.push(v$Y)}return v$W._mesh._skinnedDatas=new Float32Array(16*v$K.length),!0},v$W.READ_SUBMESH=function(){var v$n=v$W._readData.__getBuffer(),v$a=new v$Ra(v$W._mesh),v$U=v$W._readData.getInt16(),v$x=v$W._readData.getUint32(),v$D=v$W._readData.getUint32();v$a._vertexBuffer=v$W._mesh._vertexBuffers[v$U],v$a._vertexStart=v$x,v$a._vertexCount=v$D;var v$p=v$W._readData.getUint32(),v$Q=v$W._readData.getUint32(),v$V=v$W._mesh._indexBuffer;v$a._indexBuffer=v$V,v$a._indexStart=v$p,v$a._indexCount=v$Q,v$a._indices=new Uint16Array(v$V.getData().buffer,2*v$p,v$Q);var v$y=v$W._DATA.offset,v$R=v$a._subIndexBufferStart,v$X=v$a._subIndexBufferCount,v$z=v$a._boneIndicesList,v$i=v$W._readData.getUint16();v$R.length=v$i,v$X.length=v$i,v$z.length=v$i;for(var v$q=0;v$q<v$i;v$q++){v$R[v$q]=v$W._readData.getUint32(),v$X[v$q]=v$W._readData.getUint32();var v$E=v$W._readData.getUint32(),v$m=v$W._readData.getUint32();v$z[v$q]=new Uint8Array(v$n.slice(v$y+v$E,v$y+v$E+v$m))}return v$W._subMeshes.push(v$a),!0},v$W._strings=[],v$W._readData=null,v$W._version=null,v$W._mesh=null,v$W._subMeshes=null,v$W._materialMap=null,v$z(v$W,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":v$Tn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":v$Pn.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":v$Bn.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":v$In.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":v$Hn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":v$Nn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":v$Wn.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":v$fn.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":v$jn.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":v$in.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":v$Xn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":v$Yn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":v$bn.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":v$ln.vertexDeclaration,"POSITION,NORMAL,UV,UV1":v$cn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":v$$n.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":v$on.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":v$mn.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":v$gn.vertexDeclaration,"POSITION,NORMAL,UV":v$un.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":v$En.vertexDeclaration,"POSITION,NORMAL,COLOR":v$Rn.vertexDeclaration,"POSITION,NORMAL,TANGENT":v$Zn.vertexDeclaration,"POSITION,NORMAL":v$yn.vertexDeclaration,"POSITION,UV":v$Ln.vertexDeclaration,POSITION:v$Vn.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":v$An.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":v$Pn.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":v$Bn.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":v$Gn.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":v$Hn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":v$kn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":v$Wn.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":v$hn.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":v$jn.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":v$zn.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":v$Xn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":v$Kn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":v$bn.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":v$vn.vertexDeclaration,"POSITION,NORMAL,UV,UV1":v$cn.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":v$_n.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":v$on.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":v$mn.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":v$Fn.vertexDeclaration,"POSITION,NORMAL,UV":v$un.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":v$qn.vertexDeclaration,"POSITION,NORMAL,COLOR":v$Rn.vertexDeclaration,"POSITION,NORMAL,TANGENT":v$Mn.vertexDeclaration,"POSITION,NORMAL":v$yn.vertexDeclaration,"POSITION,UV":v$Ln.vertexDeclaration,POSITION:v$Vn.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),v$W}(),v$sn=function(){function v$V(){}return v$q(v$V,"laya.d3.loaders.MeshReader"),v$V.read=function(v$n,v$a,v$U,v$x,v$D){var v$p=new v$W(v$n);v$p.pos=0;var v$Q=v$p.readUTFString();switch(v$Q){case"LAYAMODEL:01":case"LAYASKINANI:01":v$V._readVersion01(v$p,v$Q,v$a,v$U,v$x,v$D);break;case"LAYAMODEL:02":v$Sn.parse(v$p,v$Q,v$a,v$U,v$x,v$D);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":v$wn.parse(v$p,v$Q,v$a,v$x,v$D);break;default:throw new Error("MeshReader: unknown mesh version.")}v$a._setSubMeshes(v$x)},v$V._readVersion01=function(v$n,v$a,v$U,v$x,v$D,v$p){new v$dn(v$n,v$a,v$U,v$x,v$D,v$p)},v$V}(),v$Cn=function(){function v$n(v$n,v$a){this.min=null,this.max=null,this.min=v$n,this.max=v$a}v$q(v$n,"laya.d3.math.BoundBox");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.getCorners=function(v$n){v$n.length=8;var v$a=this.min.elements,v$U=this.max.elements,v$x=v$a[0],v$D=v$a[1],v$p=v$a[2],v$Q=v$U[0],v$V=v$U[1],v$y=v$U[2];v$n[0]=new v$Qa(v$x,v$V,v$y),v$n[1]=new v$Qa(v$Q,v$V,v$y),v$n[2]=new v$Qa(v$Q,v$D,v$y),v$n[3]=new v$Qa(v$x,v$D,v$y),v$n[4]=new v$Qa(v$x,v$V,v$p),v$n[5]=new v$Qa(v$Q,v$V,v$p),v$n[6]=new v$Qa(v$Q,v$D,v$p),v$n[7]=new v$Qa(v$x,v$D,v$p)},v$a.toDefault=function(){this.min.toDefault(),this.max.toDefault()},v$a.cloneTo=function(v$n){var v$a=v$n;this.min.cloneTo(v$a.min),this.max.cloneTo(v$a.max)},v$a.clone=function(){var v$n=new this.constructor(new v$Qa,new v$Qa);return this.cloneTo(v$n),v$n},v$n.createfromPoints=function(v$n,v$a){if(null==v$n)throw new Error("points");var v$U=v$a.min,v$x=v$a.max,v$D=v$U.elements;v$D[0]=Number.MAX_VALUE,v$D[1]=Number.MAX_VALUE,v$D[2]=Number.MAX_VALUE;var v$p=v$x.elements;v$p[0]=-Number.MAX_VALUE,v$p[1]=-Number.MAX_VALUE,v$p[2]=-Number.MAX_VALUE;for(var v$Q=0,v$V=v$n.length;v$Q<v$V;++v$Q)v$Qa.min(v$U,v$n[v$Q],v$U),v$Qa.max(v$x,v$n[v$Q],v$x)},v$n.merge=function(v$n,v$a,v$U){v$Qa.min(v$n.min,v$a.min,v$U.min),v$Qa.max(v$n.max,v$a.max,v$U.max)},v$n}(),v$tn=function(){function v$R(v$n){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=v$n,this._near=new v$aa(new v$Qa),this._far=new v$aa(new v$Qa),this._left=new v$aa(new v$Qa),this._right=new v$aa(new v$Qa),this._top=new v$aa(new v$Qa),this._bottom=new v$aa(new v$Qa),v$R._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}v$q(v$R,"laya.d3.math.BoundFrustum");var v$n=v$R.prototype;return v$n.equalsBoundFrustum=function(v$n){return this._matrix.equalsOtherMatrix(v$n.matrix)},v$n.equalsObj=function(v$n){if(v$n instanceof laya.d3.math.BoundFrustum){var v$a=v$n;return this.equalsBoundFrustum(v$a)}return!1},v$n.getPlane=function(v$n){switch(v$n){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},v$n.getCorners=function(v$n){v$R._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(v$n[0]),v$R._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(v$n[1]),v$R._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(v$n[2]),v$R._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(v$n[3]),v$R._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(v$n[4]),v$R._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(v$n[5]),v$R._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(v$n[6]),v$R._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(v$n[7])},v$n.containsPoint=function(v$n){for(var v$a=v$aa.PlaneIntersectionType_Front,v$U=v$aa.PlaneIntersectionType_Front,v$x=0;v$x<6;v$x++){switch(v$x){case 0:v$U=Collision.intersectsPlaneAndPoint(this._near,v$n);break;case 1:v$U=Collision.intersectsPlaneAndPoint(this._far,v$n);break;case 2:v$U=Collision.intersectsPlaneAndPoint(this._left,v$n);break;case 3:v$U=Collision.intersectsPlaneAndPoint(this._right,v$n);break;case 4:v$U=Collision.intersectsPlaneAndPoint(this._top,v$n);break;case 5:v$U=Collision.intersectsPlaneAndPoint(this._bottom,v$n)}switch(v$U){case v$aa.PlaneIntersectionType_Back:return 0;case v$aa.PlaneIntersectionType_Intersecting:v$a=v$aa.PlaneIntersectionType_Intersecting}}switch(v$a){case v$aa.PlaneIntersectionType_Intersecting:return 2;default:return 1}},v$n.containsBoundBox=function(v$n){for(var v$a,v$U=v$R._tempV30,v$x=v$R._tempV31,v$D=1,v$p=0;v$p<6;v$p++){if(v$a=this.getPlane(v$p),this._getBoxToPlanePVertexNVertex(v$n,v$a.normal,v$U,v$x),Collision.intersectsPlaneAndPoint(v$a,v$U)===v$aa.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(v$a,v$x)===v$aa.PlaneIntersectionType_Back&&(v$D=2)}return v$D},v$n.containsBoundSphere=function(v$n){for(var v$a=v$aa.PlaneIntersectionType_Front,v$U=v$aa.PlaneIntersectionType_Front,v$x=0;v$x<6;v$x++){switch(v$x){case 0:v$U=Collision.intersectsPlaneAndSphere(this._near,v$n);break;case 1:v$U=Collision.intersectsPlaneAndSphere(this._far,v$n);break;case 2:v$U=Collision.intersectsPlaneAndSphere(this._left,v$n);break;case 3:v$U=Collision.intersectsPlaneAndSphere(this._right,v$n);break;case 4:v$U=Collision.intersectsPlaneAndSphere(this._top,v$n);break;case 5:v$U=Collision.intersectsPlaneAndSphere(this._bottom,v$n)}switch(v$U){case v$aa.PlaneIntersectionType_Back:return 0;case v$aa.PlaneIntersectionType_Intersecting:v$a=v$aa.PlaneIntersectionType_Intersecting}}switch(v$a){case v$aa.PlaneIntersectionType_Intersecting:return 2;default:return 1}},v$n._getBoxToPlanePVertexNVertex=function(v$n,v$a,v$U,v$x){var v$D=v$n.min,v$p=v$D.elements,v$Q=v$n.max,v$V=v$Q.elements,v$y=v$a.elements,v$R=v$y[0],v$X=v$y[1],v$z=v$y[2];v$D.cloneTo(v$U);var v$i=v$U.elements;0<=v$R&&(v$i[0]=v$V[0]),0<=v$X&&(v$i[1]=v$V[1]),0<=v$z&&(v$i[2]=v$V[2]),v$Q.cloneTo(v$x);var v$q=v$x.elements;0<=v$R&&(v$q[0]=v$p[0]),0<=v$X&&(v$q[1]=v$p[1]),0<=v$z&&(v$q[2]=v$p[2])},v$E(0,v$n,"top",function(){return this._top}),v$E(0,v$n,"matrix",function(){return this._matrix},function(v$n){this._matrix=v$n,v$R._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),v$E(0,v$n,"near",function(){return this._near}),v$E(0,v$n,"far",function(){return this._far}),v$E(0,v$n,"left",function(){return this._left}),v$E(0,v$n,"right",function(){return this._right}),v$E(0,v$n,"bottom",function(){return this._bottom}),v$R._getPlanesFromMatrix=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){var v$V=v$n.elements,v$y=v$V[0],v$R=v$V[1],v$X=v$V[2],v$z=v$V[3],v$i=v$V[4],v$q=v$V[5],v$E=v$V[6],v$m=v$V[7],v$b=v$V[8],v$P=v$V[9],v$A=v$V[10],v$T=v$V[11],v$K=v$V[12],v$Y=v$V[13],v$W=v$V[14],v$k=v$V[15],v$N=v$a.normal.elements;v$N[0]=v$z+v$X,v$N[1]=v$m+v$E,v$N[2]=v$T+v$A,v$a.distance=v$k+v$W,v$a.normalize();var v$_=v$U.normal.elements;v$_[0]=v$z-v$X,v$_[1]=v$m-v$E,v$_[2]=v$T-v$A,v$U.distance=v$k-v$W,v$U.normalize();var v$$=v$x.normal.elements;v$$[0]=v$z+v$y,v$$[1]=v$m+v$i,v$$[2]=v$T+v$b,v$x.distance=v$k+v$K,v$x.normalize();var v$M=v$D.normal.elements;v$M[0]=v$z-v$y,v$M[1]=v$m-v$i,v$M[2]=v$T-v$b,v$D.distance=v$k-v$K,v$D.normalize();var v$Z=v$p.normal.elements;v$Z[0]=v$z-v$R,v$Z[1]=v$m-v$q,v$Z[2]=v$T-v$P,v$p.distance=v$k-v$Y,v$p.normalize();var v$u=v$Q.normal.elements;v$u[0]=v$z+v$R,v$u[1]=v$m+v$q,v$u[2]=v$T+v$P,v$Q.distance=v$k+v$Y,v$Q.normalize()},v$R._get3PlaneInterPoint=function(v$n,v$a,v$U){var v$x=v$n.normal,v$D=v$a.normal,v$p=v$U.normal;v$Qa.cross(v$D,v$p,v$R._tempV30),v$Qa.cross(v$p,v$x,v$R._tempV31),v$Qa.cross(v$x,v$D,v$R._tempV32);var v$Q=v$Qa.dot(v$x,v$R._tempV30),v$V=v$Qa.dot(v$D,v$R._tempV31),v$y=v$Qa.dot(v$p,v$R._tempV32);return v$Qa.scale(v$R._tempV30,-v$n.distance/v$Q,v$R._tempV33),v$Qa.scale(v$R._tempV31,-v$a.distance/v$V,v$R._tempV34),v$Qa.scale(v$R._tempV32,-v$U.distance/v$y,v$R._tempV35),v$Qa.add(v$R._tempV33,v$R._tempV34,v$R._tempV36),v$Qa.add(v$R._tempV35,v$R._tempV36,v$R._tempV37),v$R._tempV37},v$z(v$R,["_tempV30",function(){return this._tempV30=new v$Qa},"_tempV31",function(){return this._tempV31=new v$Qa},"_tempV32",function(){return this._tempV32=new v$Qa},"_tempV33",function(){return this._tempV33=new v$Qa},"_tempV34",function(){return this._tempV34=new v$Qa},"_tempV35",function(){return this._tempV35=new v$Qa},"_tempV36",function(){return this._tempV36=new v$Qa},"_tempV37",function(){return this._tempV37=new v$Qa}]),v$R}(),v$rn=function(){function v$X(v$n,v$a){this.center=null,this.radius=NaN,this.center=v$n,this.radius=v$a}v$q(v$X,"laya.d3.math.BoundSphere");var v$n=v$X.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.toDefault=function(){this.center.toDefault(),this.radius=0},v$n.intersectsRayDistance=function(v$n){return Collision.intersectsRayAndSphereRD(v$n,this)},v$n.intersectsRayPoint=function(v$n,v$a){return Collision.intersectsRayAndSphereRP(v$n,this,v$a)},v$n.cloneTo=function(v$n){var v$a=v$n;this.center.cloneTo(v$a.center),v$a.radius=this.radius},v$n.clone=function(){var v$n=new this.constructor(new v$Qa,new v$Qa);return this.cloneTo(v$n),v$n},v$X.createFromSubPoints=function(v$n,v$a,v$U,v$x){if(null==v$n)throw new Error("points");if(v$a<0||v$a>=v$n.length)throw new Error("start"+v$a+"Must be in the range [0, "+(v$n.length-1)+"]");if(v$U<0||v$a+v$U>v$n.length)throw new Error("count"+v$U+"Must be in the range <= "+v$n.length+"}");var v$D=v$a+v$U,v$p=v$X._tempVector3;v$p.elements[0]=0,v$p.elements[1]=0,v$p.elements[2]=0;for(var v$Q=v$a;v$Q<v$D;++v$Q)v$Qa.add(v$n[v$Q],v$p,v$p);var v$V=v$x.center;v$Qa.scale(v$p,1/v$U,v$V);var v$y=0;for(v$Q=v$a;v$Q<v$D;++v$Q){var v$R=v$Qa.distanceSquared(v$V,v$n[v$Q]);v$y<v$R&&(v$y=v$R)}v$x.radius=Math.sqrt(v$y)},v$X.createfromPoints=function(v$n,v$a){if(null==v$n)throw new Error("points");v$X.createFromSubPoints(v$n,0,v$n.length,v$a)},v$z(v$X,["_tempVector3",function(){return this._tempVector3=new v$Qa}]),v$X}(),v$Jn=(function(){function v$n(){}v$q(v$n,"laya.d3.math.ContainmentType"),v$n.Disjoint=0,v$n.Contains=1,v$n.Intersects=2}(),function(){function v$U(){}return v$q(v$U,"laya.d3.math.MathUtils3D"),v$U.isZero=function(v$n){return Math.abs(v$n)<v$U.zeroTolerance},v$U.nearEqual=function(v$n,v$a){return!!v$U.isZero(v$n-v$a)},v$U.fastInvSqrt=function(v$n){return v$U.isZero(v$n)?v$n:1/Math.sqrt(v$n)},v$z(v$U,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),v$U}()),v$en=function(){function v$y(){var v$n=this.elements=new Float32Array(9);v$n[0]=1,v$n[1]=0,v$n[2]=0,v$n[3]=0,v$n[4]=1,v$n[5]=0,v$n[6]=0,v$n[7]=0,v$n[8]=1}v$q(v$y,"laya.d3.math.Matrix3x3");var v$n=v$y.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.determinant=function(){var v$n=this.elements,v$a=v$n[0],v$U=v$n[1],v$x=v$n[2],v$D=v$n[3],v$p=v$n[4],v$Q=v$n[5],v$V=v$n[6],v$y=v$n[7],v$R=v$n[8];return v$a*(v$R*v$p-v$Q*v$y)+v$U*(-v$R*v$D+v$Q*v$V)+v$x*(v$y*v$D-v$p*v$V)},v$n.translate=function(v$n,v$a){var v$U=v$a.elements,v$x=this.elements,v$D=v$n.elements,v$p=v$x[0],v$Q=v$x[1],v$V=v$x[2],v$y=v$x[3],v$R=v$x[4],v$X=v$x[5],v$z=v$x[6],v$i=v$x[7],v$q=v$x[8],v$E=v$D[0],v$m=v$D[1];v$U[0]=v$p,v$U[1]=v$Q,v$U[2]=v$V,v$U[3]=v$y,v$U[4]=v$R,v$U[5]=v$X,v$U[6]=v$E*v$p+v$m*v$y+v$z,v$U[7]=v$E*v$Q+v$m*v$R+v$i,v$U[8]=v$E*v$V+v$m*v$X+v$q},v$n.rotate=function(v$n,v$a){var v$U=v$a.elements,v$x=this.elements,v$D=v$x[0],v$p=v$x[1],v$Q=v$x[2],v$V=v$x[3],v$y=v$x[4],v$R=v$x[5],v$X=v$x[6],v$z=v$x[7],v$i=v$x[8],v$q=Math.sin(v$n),v$E=Math.cos(v$n);v$U[0]=v$E*v$D+v$q*v$V,v$U[1]=v$E*v$p+v$q*v$y,v$U[2]=v$E*v$Q+v$q*v$R,v$U[3]=v$E*v$V-v$q*v$D,v$U[4]=v$E*v$y-v$q*v$p,v$U[5]=v$E*v$R-v$q*v$Q,v$U[6]=v$X,v$U[7]=v$z,v$U[8]=v$i},v$n.scale=function(v$n,v$a){var v$U=v$a.elements,v$x=this.elements,v$D=v$n.elements,v$p=v$D[0],v$Q=v$D[1];v$U[0]=v$p*v$x[0],v$U[1]=v$p*v$x[1],v$U[2]=v$p*v$x[2],v$U[3]=v$Q*v$x[3],v$U[4]=v$Q*v$x[4],v$U[5]=v$Q*v$x[5],v$U[6]=v$x[6],v$U[7]=v$x[7],v$U[8]=v$x[8]},v$n.invert=function(v$n){var v$a=v$n.elements,v$U=this.elements,v$x=v$U[0],v$D=v$U[1],v$p=v$U[2],v$Q=v$U[3],v$V=v$U[4],v$y=v$U[5],v$R=v$U[6],v$X=v$U[7],v$z=v$U[8],v$i=v$z*v$V-v$y*v$X,v$q=-v$z*v$Q+v$y*v$R,v$E=v$X*v$Q-v$V*v$R,v$m=v$x*v$i+v$D*v$q+v$p*v$E;v$m||(v$n=null),v$m=1/v$m,v$a[0]=v$i*v$m,v$a[1]=(-v$z*v$D+v$p*v$X)*v$m,v$a[2]=(v$y*v$D-v$p*v$V)*v$m,v$a[3]=v$q*v$m,v$a[4]=(v$z*v$x-v$p*v$R)*v$m,v$a[5]=(-v$y*v$x+v$p*v$Q)*v$m,v$a[6]=v$E*v$m,v$a[7]=(-v$X*v$x+v$D*v$R)*v$m,v$a[8]=(v$V*v$x-v$D*v$Q)*v$m},v$n.transpose=function(v$n){var v$a=v$n.elements,v$U=this.elements;if(v$n===this){var v$x=v$U[1],v$D=v$U[2],v$p=v$U[5];v$a[1]=v$U[3],v$a[2]=v$U[6],v$a[3]=v$x,v$a[5]=v$U[7],v$a[6]=v$D,v$a[7]=v$p}else v$a[0]=v$U[0],v$a[1]=v$U[3],v$a[2]=v$U[6],v$a[3]=v$U[1],v$a[4]=v$U[4],v$a[5]=v$U[7],v$a[6]=v$U[2],v$a[7]=v$U[5],v$a[8]=v$U[8]},v$n.identity=function(){var v$n=this.elements;v$n[0]=1,v$n[1]=0,v$n[2]=0,v$n[3]=0,v$n[4]=1,v$n[5]=0,v$n[6]=0,v$n[7]=0,v$n[8]=1},v$n.cloneTo=function(v$n){var v$a,v$U,v$x;if((v$U=this.elements)!==(v$x=v$n.elements))for(v$a=0;v$a<9;++v$a)v$x[v$a]=v$U[v$a]},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$y.createFromTranslation=function(v$n,v$a){v$a.elements;var v$U=v$n.elements;v$a[0]=1,v$a[1]=0,v$a[2]=0,v$a[3]=0,v$a[4]=1,v$a[5]=0,v$a[6]=v$U[0],v$a[7]=v$U[1],v$a[8]=1},v$y.createFromRotation=function(v$n,v$a){var v$U=v$a.elements,v$x=Math.sin(v$n),v$D=Math.cos(v$n);v$U[0]=v$D,v$U[1]=v$x,v$U[2]=0,v$U[3]=-v$x,v$U[4]=v$D,v$U[5]=0,v$U[6]=0,v$U[7]=0,v$U[8]=1},v$y.createFromScaling=function(v$n,v$a){var v$U=v$a.elements,v$x=v$n.elements;v$U[0]=v$x[0],v$U[1]=0,v$U[2]=0,v$U[3]=0,v$U[4]=v$x[1],v$U[5]=0,v$U[6]=0,v$U[7]=0,v$U[8]=1},v$y.createFromMatrix4x4=function(v$n,v$a){v$a[0]=v$n[0],v$a[1]=v$n[1],v$a[2]=v$n[2],v$a[3]=v$n[4],v$a[4]=v$n[5],v$a[5]=v$n[6],v$a[6]=v$n[8],v$a[7]=v$n[9],v$a[8]=v$n[10]},v$y.multiply=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements,v$Q=v$D[0],v$V=v$D[1],v$y=v$D[2],v$R=v$D[3],v$X=v$D[4],v$z=v$D[5],v$i=v$D[6],v$q=v$D[7],v$E=v$D[8],v$m=v$p[0],v$b=v$p[1],v$P=v$p[2],v$A=v$p[3],v$T=v$p[4],v$K=v$p[5],v$Y=v$p[6],v$W=v$p[7],v$k=v$p[8];v$x[0]=v$m*v$Q+v$b*v$R+v$P*v$i,v$x[1]=v$m*v$V+v$b*v$X+v$P*v$q,v$x[2]=v$m*v$y+v$b*v$z+v$P*v$E,v$x[3]=v$A*v$Q+v$T*v$R+v$K*v$i,v$x[4]=v$A*v$V+v$T*v$X+v$K*v$q,v$x[5]=v$A*v$y+v$T*v$z+v$K*v$E,v$x[6]=v$Y*v$Q+v$W*v$R+v$k*v$i,v$x[7]=v$Y*v$V+v$W*v$X+v$k*v$q,v$x[8]=v$Y*v$y+v$W*v$z+v$k*v$E},v$y.lookAt=function(v$n,v$a,v$U,v$x){v$Qa.subtract(v$n,v$a,v$y._tempV30),v$Qa.normalize(v$y._tempV30,v$y._tempV30),v$Qa.cross(v$U,v$y._tempV30,v$y._tempV31),v$Qa.normalize(v$y._tempV31,v$y._tempV31),v$Qa.cross(v$y._tempV30,v$y._tempV31,v$y._tempV32);var v$D=v$y._tempV30.elements,v$p=v$y._tempV31.elements,v$Q=v$y._tempV32.elements,v$V=v$x.elements;v$V[0]=v$p[0],v$V[3]=v$p[1],v$V[6]=v$p[2],v$V[1]=v$Q[0],v$V[4]=v$Q[1],v$V[7]=v$Q[2],v$V[2]=v$D[0],v$V[5]=v$D[1],v$V[8]=v$D[2]},v$y.DEFAULT=new v$y,v$z(v$y,["_tempV30",function(){return this._tempV30=new v$Qa},"_tempV31",function(){return this._tempV31=new v$Qa},"_tempV32",function(){return this._tempV32=new v$Qa}]),v$y}(),v$na=function(){function v$_(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$z,v$i,v$q,v$E,v$m){void 0===v$n&&(v$n=1),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0),void 0===v$p&&(v$p=1),void 0===v$Q&&(v$Q=0),void 0===v$V&&(v$V=0),void 0===v$y&&(v$y=0),void 0===v$R&&(v$R=0),void 0===v$X&&(v$X=1),void 0===v$z&&(v$z=0),void 0===v$i&&(v$i=0),void 0===v$q&&(v$q=0),void 0===v$E&&(v$E=0),void 0===v$m&&(v$m=1);var v$b=this.elements=new Float32Array(16);v$b[0]=v$n,v$b[1]=v$a,v$b[2]=v$U,v$b[3]=v$x,v$b[4]=v$D,v$b[5]=v$p,v$b[6]=v$Q,v$b[7]=v$V,v$b[8]=v$y,v$b[9]=v$R,v$b[10]=v$X,v$b[11]=v$z,v$b[12]=v$i,v$b[13]=v$q,v$b[14]=v$E,v$b[15]=v$m}v$q(v$_,"laya.d3.math.Matrix4x4");var v$n=v$_.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.getElementByRowColumn=function(v$n,v$a){if(v$n<0||3<v$n)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(v$a<0||3<v$a)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*v$n+v$a]},v$n.setElementByRowColumn=function(v$n,v$a,v$U){if(v$n<0||3<v$n)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(v$a<0||3<v$a)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*v$n+v$a]=v$U},v$n.equalsOtherMatrix=function(v$n){var v$a=this.elements,v$U=v$n.elements;return v$Jn.nearEqual(v$a[0],v$U[0])&&v$Jn.nearEqual(v$a[1],v$U[1])&&v$Jn.nearEqual(v$a[2],v$U[2])&&v$Jn.nearEqual(v$a[3],v$U[3])&&v$Jn.nearEqual(v$a[4],v$U[4])&&v$Jn.nearEqual(v$a[5],v$U[5])&&v$Jn.nearEqual(v$a[6],v$U[6])&&v$Jn.nearEqual(v$a[7],v$U[7])&&v$Jn.nearEqual(v$a[8],v$U[8])&&v$Jn.nearEqual(v$a[9],v$U[9])&&v$Jn.nearEqual(v$a[10],v$U[10])&&v$Jn.nearEqual(v$a[11],v$U[11])&&v$Jn.nearEqual(v$a[12],v$U[12])&&v$Jn.nearEqual(v$a[13],v$U[13])&&v$Jn.nearEqual(v$a[14],v$U[14])&&v$Jn.nearEqual(v$a[15],v$U[15])},v$n.decomposeTransRotScale=function(v$n,v$a,v$U){var v$x=v$_._tempMatrix4x4;return this.decomposeTransRotMatScale(v$n,v$x,v$U)?(v$Ua.createFromMatrix4x4(v$x,v$a),!0):(v$a.identity(),!1)},v$n.decomposeTransRotMatScale=function(v$n,v$a,v$U){var v$x=this.elements,v$D=v$n.elements,v$p=v$a.elements,v$Q=v$U.elements;v$D[0]=v$x[12],v$D[1]=v$x[13],v$D[2]=v$x[14];var v$V=v$x[0],v$y=v$x[1],v$R=v$x[2],v$X=v$x[4],v$z=v$x[5],v$i=v$x[6],v$q=v$x[8],v$E=v$x[9],v$m=v$x[10],v$b=v$Q[0]=Math.sqrt(v$V*v$V+v$y*v$y+v$R*v$R),v$P=v$Q[1]=Math.sqrt(v$X*v$X+v$z*v$z+v$i*v$i),v$A=v$Q[2]=Math.sqrt(v$q*v$q+v$E*v$E+v$m*v$m);if(v$Jn.isZero(v$b)||v$Jn.isZero(v$P)||v$Jn.isZero(v$A))return v$p[1]=v$p[2]=v$p[3]=v$p[4]=v$p[6]=v$p[7]=v$p[8]=v$p[9]=v$p[11]=v$p[12]=v$p[13]=v$p[14]=0,v$p[0]=v$p[5]=v$p[10]=v$p[15]=1,!1;var v$T=v$_._tempVector0,v$K=v$T.elements;v$K[0]=v$q/v$A,v$K[1]=v$E/v$A,v$K[2]=v$m/v$A;var v$Y=v$_._tempVector1,v$W=v$Y.elements;v$W[0]=v$V/v$b,v$W[1]=v$y/v$b,v$W[2]=v$R/v$b;var v$k=v$_._tempVector2;v$Qa.cross(v$T,v$Y,v$k);var v$N=v$_._tempVector1;return v$Qa.cross(v$k,v$T,v$N),v$p[3]=v$p[7]=v$p[11]=v$p[12]=v$p[13]=v$p[14]=0,v$p[15]=1,v$p[0]=v$N.x,v$p[1]=v$N.y,v$p[2]=v$N.z,v$p[4]=v$k.x,v$p[5]=v$k.y,v$p[6]=v$k.z,v$p[8]=v$T.x,v$p[9]=v$T.y,v$p[10]=v$T.z,v$p[0]*v$V+v$p[1]*v$y+v$p[2]*v$R<0&&(v$Q[0]=-v$b),v$p[4]*v$X+v$p[5]*v$z+v$p[6]*v$i<0&&(v$Q[1]=-v$P),v$p[8]*v$q+v$p[9]*v$E+v$p[10]*v$m<0&&(v$Q[2]=-v$A),!0},v$n.decomposeYawPitchRoll=function(v$n){var v$a=v$n.elements,v$U=Math.asin(-this.elements[9]);v$a[1]=v$U,Math.cos(v$U)>v$Jn.zeroTolerance?(v$a[2]=Math.atan2(this.elements[1],this.elements[5]),v$a[0]=Math.atan2(this.elements[8],this.elements[10])):(v$a[2]=Math.atan2(-this.elements[4],this.elements[0]),v$a[0]=0)},v$n.normalize=function(){var v$n=this.elements,v$a=v$n[0],v$U=v$n[1],v$x=v$n[2],v$D=Math.sqrt(v$a*v$a+v$U*v$U+v$x*v$x);if(!v$D)return v$n[0]=0,v$n[1]=0,void(v$n[2]=0);1!=v$D&&(v$D=1/v$D,v$n[0]=v$a*v$D,v$n[1]=v$U*v$D,v$n[2]=v$x*v$D)},v$n.transpose=function(){var v$n,v$a;return v$a=(v$n=this.elements)[1],v$n[1]=v$n[4],v$n[4]=v$a,v$a=v$n[2],v$n[2]=v$n[8],v$n[8]=v$a,v$a=v$n[3],v$n[3]=v$n[12],v$n[12]=v$a,v$a=v$n[6],v$n[6]=v$n[9],v$n[9]=v$a,v$a=v$n[7],v$n[7]=v$n[13],v$n[13]=v$a,v$a=v$n[11],v$n[11]=v$n[14],v$n[14]=v$a,this},v$n.invert=function(v$n){var v$a=this.elements,v$U=v$n.elements,v$x=v$a[0],v$D=v$a[1],v$p=v$a[2],v$Q=v$a[3],v$V=v$a[4],v$y=v$a[5],v$R=v$a[6],v$X=v$a[7],v$z=v$a[8],v$i=v$a[9],v$q=v$a[10],v$E=v$a[11],v$m=v$a[12],v$b=v$a[13],v$P=v$a[14],v$A=v$a[15],v$T=v$x*v$y-v$D*v$V,v$K=v$x*v$R-v$p*v$V,v$Y=v$x*v$X-v$Q*v$V,v$W=v$D*v$R-v$p*v$y,v$k=v$D*v$X-v$Q*v$y,v$N=v$p*v$X-v$Q*v$R,v$_=v$z*v$b-v$i*v$m,v$$=v$z*v$P-v$q*v$m,v$M=v$z*v$A-v$E*v$m,v$Z=v$i*v$P-v$q*v$b,v$u=v$i*v$A-v$E*v$b,v$c=v$q*v$A-v$E*v$P,v$H=v$T*v$c-v$K*v$u+v$Y*v$Z+v$W*v$M-v$k*v$$+v$N*v$_;0!==Math.abs(v$H)&&(v$H=1/v$H,v$U[0]=(v$y*v$c-v$R*v$u+v$X*v$Z)*v$H,v$U[1]=(v$p*v$u-v$D*v$c-v$Q*v$Z)*v$H,v$U[2]=(v$b*v$N-v$P*v$k+v$A*v$W)*v$H,v$U[3]=(v$q*v$k-v$i*v$N-v$E*v$W)*v$H,v$U[4]=(v$R*v$M-v$V*v$c-v$X*v$$)*v$H,v$U[5]=(v$x*v$c-v$p*v$M+v$Q*v$$)*v$H,v$U[6]=(v$P*v$Y-v$m*v$N-v$A*v$K)*v$H,v$U[7]=(v$z*v$N-v$q*v$Y+v$E*v$K)*v$H,v$U[8]=(v$V*v$u-v$y*v$M+v$X*v$_)*v$H,v$U[9]=(v$D*v$M-v$x*v$u-v$Q*v$_)*v$H,v$U[10]=(v$m*v$k-v$b*v$Y+v$A*v$T)*v$H,v$U[11]=(v$i*v$Y-v$z*v$k-v$E*v$T)*v$H,v$U[12]=(v$y*v$$-v$V*v$Z-v$R*v$_)*v$H,v$U[13]=(v$x*v$Z-v$D*v$$+v$p*v$_)*v$H,v$U[14]=(v$b*v$K-v$m*v$W-v$P*v$T)*v$H,v$U[15]=(v$z*v$W-v$i*v$K+v$q*v$T)*v$H)},v$n.identity=function(){var v$n=this.elements;v$n[1]=v$n[2]=v$n[3]=v$n[4]=v$n[6]=v$n[7]=v$n[8]=v$n[9]=v$n[11]=v$n[12]=v$n[13]=v$n[14]=0,v$n[0]=v$n[5]=v$n[10]=v$n[15]=1},v$n.cloneTo=function(v$n){var v$a,v$U,v$x;if((v$U=this.elements)!==(v$x=v$n.elements))for(v$a=0;v$a<16;++v$a)v$x[v$a]=v$U[v$a]},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$n.getTranslationVector=function(v$n){var v$a=this.elements,v$U=v$n.elements;v$U[0]=v$a[12],v$U[1]=v$a[13],v$U[2]=v$a[14]},v$n.setTranslationVector=function(v$n){var v$a=this.elements,v$U=v$n.elements;v$a[12]=v$U[0],v$a[13]=v$U[1],v$a[14]=v$U[2]},v$n.getForward=function(v$n){var v$a=this.elements,v$U=v$n.elements;v$U[0]=-v$a[8],v$U[1]=-v$a[9],v$U[2]=-v$a[10]},v$n.setForward=function(v$n){var v$a=this.elements,v$U=v$n.elements;v$a[8]=-v$U[0],v$a[9]=-v$U[1],v$a[10]=-v$U[2]},v$_.createRotationX=function(v$n,v$a){var v$U=v$a.elements,v$x=Math.sin(v$n),v$D=Math.cos(v$n);v$U[1]=v$U[2]=v$U[3]=v$U[4]=v$U[7]=v$U[8]=v$U[11]=v$U[12]=v$U[13]=v$U[14]=0,v$U[0]=v$U[15]=1,v$U[5]=v$U[10]=v$D,v$U[6]=v$x,v$U[9]=-v$x},v$_.createRotationY=function(v$n,v$a){var v$U=v$a.elements,v$x=Math.sin(v$n),v$D=Math.cos(v$n);v$U[1]=v$U[3]=v$U[4]=v$U[6]=v$U[7]=v$U[9]=v$U[11]=v$U[12]=v$U[13]=v$U[14]=0,v$U[5]=v$U[15]=1,v$U[0]=v$U[10]=v$D,v$U[2]=-v$x,v$U[8]=v$x},v$_.createRotationZ=function(v$n,v$a){var v$U=v$a.elements,v$x=Math.sin(v$n),v$D=Math.cos(v$n);v$U[2]=v$U[3]=v$U[6]=v$U[7]=v$U[8]=v$U[9]=v$U[11]=v$U[12]=v$U[13]=v$U[14]=0,v$U[10]=v$U[15]=1,v$U[0]=v$U[5]=v$D,v$U[1]=v$x,v$U[4]=-v$x},v$_.createRotationYawPitchRoll=function(v$n,v$a,v$U,v$x){v$Ua.createFromYawPitchRoll(v$n,v$a,v$U,v$_._tempQuaternion),v$_.createRotationQuaternion(v$_._tempQuaternion,v$x)},v$_.createRotationAxis=function(v$n,v$a,v$U){var v$x=v$n.elements,v$D=v$x[0],v$p=v$x[1],v$Q=v$x[2],v$V=Math.cos(v$a),v$y=Math.sin(v$a),v$R=v$D*v$D,v$X=v$p*v$p,v$z=v$Q*v$Q,v$i=v$D*v$p,v$q=v$D*v$Q,v$E=v$p*v$Q,v$m=v$U.elements;v$m[3]=v$m[7]=v$m[11]=v$m[12]=v$m[13]=v$m[14]=0,v$m[15]=1,v$m[0]=v$R+v$V*(1-v$R),v$m[1]=v$i-v$V*v$i+v$y*v$Q,v$m[2]=v$q-v$V*v$q-v$y*v$p,v$m[4]=v$i-v$V*v$i-v$y*v$Q,v$m[5]=v$X+v$V*(1-v$X),v$m[6]=v$E-v$V*v$E+v$y*v$D,v$m[8]=v$q-v$V*v$q+v$y*v$p,v$m[9]=v$E-v$V*v$E-v$y*v$D,v$m[10]=v$z+v$V*(1-v$z)},v$_.createRotationQuaternion=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements,v$D=v$U[0],v$p=v$U[1],v$Q=v$U[2],v$V=v$U[3],v$y=v$D*v$D,v$R=v$p*v$p,v$X=v$Q*v$Q,v$z=v$D*v$p,v$i=v$Q*v$V,v$q=v$Q*v$D,v$E=v$p*v$V,v$m=v$p*v$Q,v$b=v$D*v$V;v$x[3]=v$x[7]=v$x[11]=v$x[12]=v$x[13]=v$x[14]=0,v$x[15]=1,v$x[0]=1-2*(v$R+v$X),v$x[1]=2*(v$z+v$i),v$x[2]=2*(v$q-v$E),v$x[4]=2*(v$z-v$i),v$x[5]=1-2*(v$X+v$y),v$x[6]=2*(v$m+v$b),v$x[8]=2*(v$q+v$E),v$x[9]=2*(v$m-v$b),v$x[10]=1-2*(v$R+v$y)},v$_.createTranslate=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements;v$x[4]=v$x[8]=v$x[1]=v$x[9]=v$x[2]=v$x[6]=v$x[3]=v$x[7]=v$x[11]=0,v$x[0]=v$x[5]=v$x[10]=v$x[15]=1,v$x[12]=v$U[0],v$x[13]=v$U[1],v$x[14]=v$U[2]},v$_.createScaling=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements;v$x[0]=v$U[0],v$x[5]=v$U[1],v$x[10]=v$U[2],v$x[1]=v$x[4]=v$x[8]=v$x[12]=v$x[9]=v$x[13]=v$x[2]=v$x[6]=v$x[14]=v$x[3]=v$x[7]=v$x[11]=0,v$x[15]=1},v$_.multiply=function(v$n,v$a,v$U){var v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X;for(v$D=v$U.elements,v$p=v$n.elements,v$D===(v$Q=v$a.elements)&&(v$Q=v$Q.slice()),v$x=0;v$x<4;v$x++)v$V=v$p[v$x],v$y=v$p[v$x+4],v$R=v$p[v$x+8],v$X=v$p[v$x+12],v$D[v$x]=v$V*v$Q[0]+v$y*v$Q[1]+v$R*v$Q[2]+v$X*v$Q[3],v$D[v$x+4]=v$V*v$Q[4]+v$y*v$Q[5]+v$R*v$Q[6]+v$X*v$Q[7],v$D[v$x+8]=v$V*v$Q[8]+v$y*v$Q[9]+v$R*v$Q[10]+v$X*v$Q[11],v$D[v$x+12]=v$V*v$Q[12]+v$y*v$Q[13]+v$R*v$Q[14]+v$X*v$Q[15]},v$_.createFromQuaternion=function(v$n,v$a){var v$U=v$a.elements,v$x=v$n.elements,v$D=v$x[0],v$p=v$x[1],v$Q=v$x[2],v$V=v$x[3],v$y=v$D+v$D,v$R=v$p+v$p,v$X=v$Q+v$Q,v$z=v$D*v$y,v$i=v$p*v$y,v$q=v$p*v$R,v$E=v$Q*v$y,v$m=v$Q*v$R,v$b=v$Q*v$X,v$P=v$V*v$y,v$A=v$V*v$R,v$T=v$V*v$X;v$U[0]=1-v$q-v$b,v$U[1]=v$i+v$T,v$U[2]=v$E-v$A,v$U[3]=0,v$U[4]=v$i-v$T,v$U[5]=1-v$z-v$b,v$U[6]=v$m+v$P,v$U[7]=0,v$U[8]=v$E+v$A,v$U[9]=v$m-v$P,v$U[10]=1-v$z-v$q,v$U[11]=0,v$U[12]=0,v$U[13]=0,v$U[14]=0,v$U[15]=1},v$_.createAffineTransformation=function(v$n,v$a,v$U,v$x){var v$D=v$n.elements,v$p=v$a.elements,v$Q=v$U.elements,v$V=v$x.elements,v$y=v$p[0],v$R=v$p[1],v$X=v$p[2],v$z=v$p[3],v$i=v$y+v$y,v$q=v$R+v$R,v$E=v$X+v$X,v$m=v$y*v$i,v$b=v$y*v$q,v$P=v$y*v$E,v$A=v$R*v$q,v$T=v$R*v$E,v$K=v$X*v$E,v$Y=v$z*v$i,v$W=v$z*v$q,v$k=v$z*v$E,v$N=v$Q[0],v$_=v$Q[1],v$$=v$Q[2];v$V[0]=(1-(v$A+v$K))*v$N,v$V[1]=(v$b+v$k)*v$N,v$V[2]=(v$P-v$W)*v$N,v$V[3]=0,v$V[4]=(v$b-v$k)*v$_,v$V[5]=(1-(v$m+v$K))*v$_,v$V[6]=(v$T+v$Y)*v$_,v$V[7]=0,v$V[8]=(v$P+v$W)*v$$,v$V[9]=(v$T-v$Y)*v$$,v$V[10]=(1-(v$m+v$A))*v$$,v$V[11]=0,v$V[12]=v$D[0],v$V[13]=v$D[1],v$V[14]=v$D[2],v$V[15]=1},v$_.createLookAt=function(v$n,v$a,v$U,v$x){var v$D=v$x.elements,v$p=v$_._tempVector0,v$Q=v$_._tempVector1,v$V=v$_._tempVector2;v$Qa.subtract(v$n,v$a,v$V),v$Qa.normalize(v$V,v$V),v$Qa.cross(v$U,v$V,v$p),v$Qa.normalize(v$p,v$p),v$Qa.cross(v$V,v$p,v$Q),v$x.identity(),v$D[0]=v$p.x,v$D[4]=v$p.y,v$D[8]=v$p.z,v$D[1]=v$Q.x,v$D[5]=v$Q.y,v$D[9]=v$Q.z,v$D[2]=v$V.x,v$D[6]=v$V.y,v$D[10]=v$V.z,v$D[12]=-v$Qa.dot(v$p,v$n),v$D[13]=-v$Qa.dot(v$Q,v$n),v$D[14]=-v$Qa.dot(v$V,v$n)},v$_.createPerspective=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$D.elements,v$Q=1/Math.tan(v$n/2),v$V=1/(v$U-v$x);v$p[0]=v$Q/v$a,v$p[5]=v$Q,v$p[10]=(v$x+v$U)*v$V,v$p[11]=-1,v$p[14]=2*v$x*v$U*v$V,v$p[1]=v$p[2]=v$p[3]=v$p[4]=v$p[6]=v$p[7]=v$p[8]=v$p[9]=v$p[12]=v$p[13]=v$p[15]=0},v$_.createOrthoOffCenterRH=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){var v$V=v$Q.elements,v$y=1/(v$n-v$a),v$R=1/(v$U-v$x),v$X=1/(v$D-v$p);v$V[1]=v$V[2]=v$V[3]=v$V[4]=v$V[6]=v$V[7]=v$V[8]=v$V[9]=v$V[11]=0,v$V[15]=1,v$V[0]=-2*v$y,v$V[5]=-2*v$R,v$V[10]=2*v$X,v$V[12]=(v$n+v$a)*v$y,v$V[13]=(v$x+v$U)*v$R,v$V[14]=(v$p+v$D)*v$X},v$_.translation=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements;v$x[0]=v$x[5]=v$x[10]=v$x[15]=1,v$x[12]=v$U[0],v$x[13]=v$U[1],v$x[14]=v$U[2]},v$z(v$_,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new v$_},"_tempVector0",function(){return this._tempVector0=new v$Qa},"_tempVector1",function(){return this._tempVector1=new v$Qa},"_tempVector2",function(){return this._tempVector2=new v$Qa},"_tempQuaternion",function(){return this._tempQuaternion=new v$Ua},"DEFAULT",function(){return this.DEFAULT=new v$_},"ZERO",function(){return this.ZERO=new v$_(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),v$_}(),v$aa=(function(){function v$T(v$n,v$a){this.extents=null,this.transformation=null,this.extents=v$n,this.transformation=v$a}v$q(v$T,"laya.d3.math.OrientedBoundBox");var v$n=v$T.prototype;v$n.getCorners=function(v$n){var v$a=v$T._tempV30.elements,v$U=v$T._tempV31.elements,v$x=v$T._tempV32.elements,v$D=this.extents.elements;v$a[0]=v$D[0],v$a[1]=v$a[2]=0,v$U[1]=v$D[1],v$U[0]=v$U[2]=0,v$x[2]=v$D[2],v$x[0]=v$x[1]=0,v$Qa.TransformNormal(v$T._tempV30,this.transformation,v$T._tempV30),v$Qa.TransformNormal(v$T._tempV31,this.transformation,v$T._tempV31),v$Qa.TransformNormal(v$T._tempV32,this.transformation,v$T._tempV32);var v$p=v$T._tempV33;this.transformation.getTranslationVector(v$p),v$n.length=8,v$Qa.add(v$p,v$T._tempV30,v$T._tempV34),v$Qa.add(v$T._tempV34,v$T._tempV31,v$T._tempV34),v$Qa.add(v$T._tempV34,v$T._tempV32,v$n[0]),v$Qa.add(v$p,v$T._tempV30,v$T._tempV34),v$Qa.add(v$T._tempV34,v$T._tempV31,v$T._tempV34),v$Qa.subtract(v$T._tempV34,v$T._tempV32,v$n[1]),v$Qa.subtract(v$p,v$T._tempV30,v$T._tempV34),v$Qa.add(v$T._tempV34,v$T._tempV31,v$T._tempV34),v$Qa.subtract(v$T._tempV34,v$T._tempV32,v$n[2]),v$Qa.subtract(v$p,v$T._tempV30,v$T._tempV34),v$Qa.add(v$T._tempV34,v$T._tempV31,v$T._tempV34),v$Qa.add(v$T._tempV34,v$T._tempV32,v$n[3]),v$Qa.add(v$p,v$T._tempV30,v$T._tempV34),v$Qa.subtract(v$T._tempV34,v$T._tempV31,v$T._tempV34),v$Qa.add(v$T._tempV34,v$T._tempV32,v$n[4]),v$Qa.add(v$p,v$T._tempV30,v$T._tempV34),v$Qa.subtract(v$T._tempV34,v$T._tempV31,v$T._tempV34),v$Qa.subtract(v$T._tempV34,v$T._tempV32,v$n[5]),v$Qa.subtract(v$p,v$T._tempV30,v$T._tempV34),v$Qa.subtract(v$T._tempV34,v$T._tempV31,v$T._tempV34),v$Qa.subtract(v$T._tempV34,v$T._tempV32,v$n[6]),v$Qa.subtract(v$p,v$T._tempV30,v$T._tempV34),v$Qa.subtract(v$T._tempV34,v$T._tempV31,v$T._tempV34),v$Qa.add(v$T._tempV34,v$T._tempV32,v$n[7])},v$n.transform=function(v$n){v$na.multiply(this.transformation,v$n,this.transformation)},v$n.scale=function(v$n){v$Qa.multiply(this.extents,v$n,this.extents)},v$n.translate=function(v$n){this.transformation.getTranslationVector(v$T._tempV30),v$Qa.add(v$T._tempV30,v$n,v$T._tempV31),this.transformation.setTranslationVector(v$T._tempV31)},v$n.Size=function(v$n){v$Qa.scale(this.extents,2,v$n)},v$n.getSize=function(v$n){var v$a=this.extents.elements;v$T._tempV30.x=v$a[0],v$T._tempV31.y=v$a[1],v$T._tempV32.z=v$a[2],v$Qa.TransformNormal(v$T._tempV30,this.transformation,v$T._tempV30),v$Qa.TransformNormal(v$T._tempV31,this.transformation,v$T._tempV31),v$Qa.TransformNormal(v$T._tempV31,this.transformation,v$T._tempV32);var v$U=v$n.elements;v$U[0]=v$Qa.scalarLength(v$T._tempV30),v$U[1]=v$Qa.scalarLength(v$T._tempV31),v$U[2]=v$Qa.scalarLength(v$T._tempV32)},v$n.getSizeSquared=function(v$n){var v$a=this.extents.elements;v$T._tempV30.x=v$a[0],v$T._tempV31.y=v$a[1],v$T._tempV32.z=v$a[2],v$Qa.TransformNormal(v$T._tempV30,this.transformation,v$T._tempV30),v$Qa.TransformNormal(v$T._tempV31,this.transformation,v$T._tempV31),v$Qa.TransformNormal(v$T._tempV31,this.transformation,v$T._tempV32);var v$U=v$n.elements;v$U[0]=v$Qa.scalarLengthSquared(v$T._tempV30),v$U[1]=v$Qa.scalarLengthSquared(v$T._tempV31),v$U[2]=v$Qa.scalarLengthSquared(v$T._tempV32)},v$n.getCenter=function(v$n){this.transformation.getTranslationVector(v$n)},v$n.containsPoint=function(v$n){var v$a=this.extents.elements,v$U=v$a[0],v$x=v$a[1],v$D=v$a[2];this.transformation.invert(v$T._tempM0),v$Qa.transformCoordinate(v$n,v$T._tempM0,v$T._tempV30);var v$p=v$T._tempV30.elements,v$Q=Math.abs(v$p[0]),v$V=Math.abs(v$p[1]),v$y=Math.abs(v$p[2]);return v$Jn.nearEqual(v$Q,v$U)&&v$Jn.nearEqual(v$V,v$x)&&v$Jn.nearEqual(v$y,v$D)?2:v$Q<v$U&&v$V<v$x&&v$y<v$D?1:0},v$n.containsPoints=function(v$n){var v$a=this.extents.elements,v$U=v$a[0],v$x=v$a[1],v$D=v$a[2];this.transformation.invert(v$T._tempM0);for(var v$p=!0,v$Q=!1,v$V=0;v$V<v$n.length;v$V++){v$Qa.transformCoordinate(v$n[v$V],v$T._tempM0,v$T._tempV30);var v$y=v$T._tempV30.elements,v$R=Math.abs(v$y[0]),v$X=Math.abs(v$y[1]),v$z=Math.abs(v$y[2]);v$Jn.nearEqual(v$R,v$U)&&v$Jn.nearEqual(v$X,v$x)&&v$Jn.nearEqual(v$z,v$D)&&(v$Q=!0),v$R<v$U&&v$X<v$x&&v$z<v$D?v$Q=!0:v$p=!1}return v$p?1:v$Q?2:0},v$n.containsSphere=function(v$n,v$a){void 0===v$a&&(v$a=!1);var v$U=this.extents.elements,v$x=v$U[0],v$D=v$U[1],v$p=v$U[2],v$Q=v$n.radius;this.transformation.invert(v$T._tempM0),v$Qa.transformCoordinate(v$n.center,v$T._tempM0,v$T._tempV30);var v$V=NaN;if(v$V=v$a?v$Q:(v$Qa.scale(v$Qa.UnitX,v$Q,v$T._tempV31),v$Qa.TransformNormal(v$T._tempV31,v$T._tempM0,v$T._tempV31),v$Qa.scalarLength(v$T._tempV31)),v$Qa.scale(this.extents,-1,v$T._tempV32),v$Qa.Clamp(v$T._tempV30,v$T._tempV32,this.extents,v$T._tempV33),v$V*v$V<v$Qa.distanceSquared(v$T._tempV30,v$T._tempV33))return 0;var v$y=v$T._tempV30.elements,v$R=v$y[0],v$X=v$y[1],v$z=v$y[2],v$i=v$T._tempV32.elements,v$q=v$i[0],v$E=v$i[1],v$m=v$i[2];return v$q+v$V<=v$R&&v$R<=v$x-v$V&&v$V<v$x-v$q&&v$E+v$V<=v$X&&v$X<=v$D-v$V&&v$V<v$D-v$E&&v$m+v$V<=v$z&&v$z<=v$p-v$V&&v$V<v$p-v$m?1:2},v$n.containsOrientedBoundBox=function(v$n){var v$a=0,v$U=0;v$n.getCorners(v$T._corners);var v$x=this.containsPoints(v$T._corners);if(0!=v$x)return v$x;var v$D=this.extents.elements;v$n.extents.cloneTo(v$T._tempV35);var v$p=v$T._tempV35.elements;v$T._getRows(this.transformation,v$T._rows1),v$T._getRows(v$n.transformation,v$T._rows2);var v$Q=NaN;for(v$a=0;v$a<4;v$a++)for(v$U=0;v$U<4;v$U++)3==v$a||3==v$U?(v$T._tempM0.setElementByRowColumn(v$a,v$U,0),v$T._tempM1.setElementByRowColumn(v$a,v$U,0)):(v$Q=v$Qa.dot(v$T._rows1[v$a],v$T._rows2[v$U]),v$T._tempM0.setElementByRowColumn(v$a,v$U,v$Q),v$T._tempM1.setElementByRowColumn(v$a,v$U,Math.abs(v$Q)));v$n.getCenter(v$T._tempV34),this.getCenter(v$T._tempV36),v$Qa.subtract(v$T._tempV34,v$T._tempV36,v$T._tempV30);var v$V=v$T._tempV31.elements;v$V[0]=v$Qa.dot(v$T._tempV30,v$T._rows1[0]),v$V[1]=v$Qa.dot(v$T._tempV30,v$T._rows1[1]),v$V[2]=v$Qa.dot(v$T._tempV30,v$T._rows1[2]);var v$y=v$T._tempV32.elements,v$R=v$T._tempV33.elements;for(v$a=0;v$a<3;v$a++)if(v$y[0]=v$T._tempM1.getElementByRowColumn(v$a,0),v$y[1]=v$T._tempM1.getElementByRowColumn(v$a,1),v$y[2]=v$T._tempM1.getElementByRowColumn(v$a,2),v$D[v$a]+v$Qa.dot(v$T._tempV35,v$T._tempV32)<Math.abs(v$V[v$a]))return 0;for(v$U=0;v$U<3;v$U++)if(v$y[0]=v$T._tempM1.getElementByRowColumn(0,v$U),v$y[1]=v$T._tempM1.getElementByRowColumn(1,v$U),v$y[2]=v$T._tempM1.getElementByRowColumn(2,v$U),v$R[0]=v$T._tempM0.getElementByRowColumn(0,v$U),v$R[1]=v$T._tempM0.getElementByRowColumn(1,v$U),v$R[2]=v$T._tempM0.getElementByRowColumn(2,v$U),v$Qa.dot(this.extents,v$T._tempV32)+v$p[v$U]<Math.abs(v$Qa.dot(v$T._tempV31,v$T._tempV33)))return 0;for(v$a=0;v$a<3;v$a++)for(v$U=0;v$U<3;v$U++){var v$X=(v$a+1)%3,v$z=(v$a+2)%3,v$i=(v$U+1)%3,v$q=(v$U+2)%3;if(v$D[v$X]*v$T._tempM1.getElementByRowColumn(v$z,v$U)+v$D[v$z]*v$T._tempM1.getElementByRowColumn(v$X,v$U)+(v$p[v$i]*v$T._tempM1.getElementByRowColumn(v$a,v$q)+v$p[v$q]*v$T._tempM1.getElementByRowColumn(v$a,v$i))<Math.abs(v$V[v$z]*v$T._tempM0.getElementByRowColumn(v$X,v$U)-v$V[v$X]*v$T._tempM0.getElementByRowColumn(v$z,v$U)))return 0}return 2},v$n.containsLine=function(v$n,v$a){v$T._corners[0]=v$n,v$T._corners[1]=v$a;var v$U=this.containsPoints(v$T._corners);if(0!=v$U)return v$U;var v$x=this.extents.elements,v$D=v$x[0],v$p=v$x[1],v$Q=v$x[2];this.transformation.invert(v$T._tempM0),v$Qa.transformCoordinate(v$n,v$T._tempM0,v$T._tempV30),v$Qa.transformCoordinate(v$a,v$T._tempM0,v$T._tempV31),v$Qa.add(v$T._tempV30,v$T._tempV31,v$T._tempV32),v$Qa.scale(v$T._tempV32,.5,v$T._tempV32),v$Qa.subtract(v$T._tempV30,v$T._tempV32,v$T._tempV33);var v$V=v$T._tempV33.elements,v$y=v$V[0],v$R=v$V[1],v$X=v$V[2],v$z=v$T._tempV34.elements,v$i=v$z[0]=Math.abs(v$V[0]),v$q=v$z[1]=Math.abs(v$V[1]),v$E=v$z[2]=Math.abs(v$V[2]),v$m=v$T._tempV32.elements,v$b=v$m[0],v$P=v$m[1],v$A=v$m[2];return Math.abs(v$b)>v$D+v$i?0:Math.abs(v$P)>v$p+v$q?0:Math.abs(v$A)>v$Q+v$E?0:Math.abs(v$P*v$X-v$A*v$R)>v$p*v$E+v$Q*v$q?0:Math.abs(v$b*v$X-v$A*v$y)>v$D*v$E+v$Q*v$i?0:Math.abs(v$b*v$R-v$P*v$y)>v$D*v$q+v$p*v$i?0:2},v$n.containsBoundBox=function(v$n){var v$a=0,v$U=0,v$x=v$n.min,v$D=v$n.max;v$n.getCorners(v$T._corners);var v$p=this.containsPoints(v$T._corners);if(0!=v$p)return v$p;v$Qa.subtract(v$D,v$x,v$T._tempV30),v$Qa.scale(v$T._tempV30,.5,v$T._tempV30),v$Qa.add(v$x,v$T._tempV30,v$T._tempV30),v$Qa.subtract(v$D,v$T._tempV30,v$T._tempV31);var v$Q=this.extents.elements,v$V=v$T._tempV31.elements;v$T._getRows(this.transformation,v$T._rows1),this.transformation.invert(v$T._tempM0);for(v$a=0;v$a<3;v$a++)for(v$U=0;v$U<3;v$U++)v$T._tempM1.setElementByRowColumn(v$a,v$U,Math.abs(v$T._tempM0.getElementByRowColumn(v$a,v$U)));this.getCenter(v$T._tempV35),v$Qa.subtract(v$T._tempV30,v$T._tempV35,v$T._tempV32);var v$y=v$T._tempV31.elements;v$y[0]=v$Qa.dot(v$T._tempV32,v$T._rows1[0]),v$y[1]=v$Qa.dot(v$T._tempV32,v$T._rows1[1]),v$y[2]=v$Qa.dot(v$T._tempV32,v$T._rows1[2]);var v$R=v$T._tempV33.elements,v$X=v$T._tempV34.elements;for(v$a=0;v$a<3;v$a++)if(v$R[0]=v$T._tempM1.getElementByRowColumn(v$a,0),v$R[1]=v$T._tempM1.getElementByRowColumn(v$a,1),v$R[2]=v$T._tempM1.getElementByRowColumn(v$a,2),v$Q[v$a]+v$Qa.dot(v$T._tempV31,v$T._tempV33)<Math.abs(v$y[v$a]))return 0;for(v$U=0;v$U<3;v$U++)if(v$R[0]=v$T._tempM1.getElementByRowColumn(0,v$U),v$R[1]=v$T._tempM1.getElementByRowColumn(1,v$U),v$R[2]=v$T._tempM1.getElementByRowColumn(2,v$U),v$X[0]=v$T._tempM0.getElementByRowColumn(0,v$U),v$X[1]=v$T._tempM0.getElementByRowColumn(1,v$U),v$X[2]=v$T._tempM0.getElementByRowColumn(2,v$U),v$Qa.dot(this.extents,v$T._tempV33)+v$V[v$U]<Math.abs(v$Qa.dot(v$T._tempV31,v$T._tempV34)))return 0;for(v$a=0;v$a<3;v$a++)for(v$U=0;v$U<3;v$U++){var v$z=(v$a+1)%3,v$i=(v$a+2)%3,v$q=(v$U+1)%3,v$E=(v$U+2)%3;if(v$Q[v$z]*v$T._tempM1.getElementByRowColumn(v$i,v$U)+v$Q[v$i]*v$T._tempM1.getElementByRowColumn(v$z,v$U)+(v$V[v$q]*v$T._tempM1.getElementByRowColumn(v$a,v$E)+v$V[v$E]*v$T._tempM1.getElementByRowColumn(v$a,v$q))<Math.abs(v$y[v$i]*v$T._tempM0.getElementByRowColumn(v$z,v$U)-v$y[v$z]*v$T._tempM0.getElementByRowColumn(v$i,v$U)))return 0}return 2},v$n.intersectsRay=function(v$n,v$a){v$Qa.scale(this.extents,-1,v$T._tempV30),this.transformation.invert(v$T._tempM0),v$Qa.TransformNormal(v$n.direction,v$T._tempM0,v$T._ray.direction),v$Qa.transformCoordinate(v$n.origin,v$T._tempM0,v$T._ray.origin),v$T._boxBound1.min=v$T._tempV30,v$T._boxBound1.max=this.extents;var v$U=Collision.intersectsRayAndBoxRP(v$T._ray,v$T._boxBound1,v$a);return-1!==v$U&&v$Qa.transformCoordinate(v$a,this.transformation,v$a),v$U},v$n._getLocalCorners=function(v$n){v$n.length=8;var v$a=this.extents.elements;v$T._tempV30.x=v$a[0],v$T._tempV31.y=v$a[1],v$T._tempV32.z=v$a[2],v$Qa.add(v$T._tempV30,v$T._tempV31,v$T._tempV33),v$Qa.add(v$T._tempV33,v$T._tempV32,v$n[0]),v$Qa.add(v$T._tempV30,v$T._tempV31,v$T._tempV33),v$Qa.subtract(v$T._tempV33,v$T._tempV32,v$n[1]),v$Qa.subtract(v$T._tempV31,v$T._tempV30,v$T._tempV33),v$Qa.subtract(v$T._tempV33,v$T._tempV30,v$n[2]),v$Qa.subtract(v$T._tempV31,v$T._tempV30,v$T._tempV33),v$Qa.add(v$T._tempV33,v$T._tempV32,v$n[3]),v$Qa.subtract(v$T._tempV30,v$T._tempV31,v$T._tempV33),v$Qa.add(v$T._tempV33,v$T._tempV32,v$n[4]),v$Qa.subtract(v$T._tempV30,v$T._tempV31,v$T._tempV33),v$Qa.subtract(v$T._tempV33,v$T._tempV32,v$n[5]),v$Qa.scale(v$n[0],-1,v$n[6]),v$Qa.subtract(v$T._tempV32,v$T._tempV30,v$T._tempV33),v$Qa.subtract(v$T._tempV33,v$T._tempV31,v$n[7])},v$n.equals=function(v$n){return this.extents==v$n.extents&&this.transformation==v$n.transformation},v$n.cloneTo=function(v$n){var v$a=v$n;this.extents.cloneTo(v$a.extents),this.transformation.cloneTo(v$a.transformation)},v$T.createByBoundBox=function(v$n,v$a){var v$U=v$n.min,v$x=v$n.max;v$Qa.subtract(v$x,v$U,v$T._tempV30),v$Qa.scale(v$T._tempV30,.5,v$T._tempV30),v$Qa.add(v$U,v$T._tempV30,v$T._tempV31),v$Qa.subtract(v$x,v$T._tempV31,v$T._tempV32),v$na.translation(v$T._tempV31,v$T._tempM0);var v$D=v$T._tempV32.clone(),v$p=v$T._tempM0.clone();v$a.extents=v$D,v$a.transformation=v$p},v$T.createByMinAndMaxVertex=function(v$n,v$a){return v$Qa.subtract(v$a,v$n,v$T._tempV30),v$Qa.scale(v$T._tempV30,.5,v$T._tempV30),v$Qa.add(v$n,v$T._tempV30,v$T._tempV31),v$Qa.subtract(v$a,v$T._tempV31,v$T._tempV32),v$na.translation(v$T._tempV31,v$T._tempM0),new v$T(v$T._tempV32,v$T._tempM0)},v$T._getRows=function(v$n,v$a){v$a.length=3;var v$U=v$n.elements,v$x=v$a[0].elements;v$x[0]=v$U[0],v$x[1]=v$U[1],v$x[2]=v$U[2];var v$D=v$a[1].elements;v$D[0]=v$U[4],v$D[1]=v$U[5],v$D[2]=v$U[6];var v$p=v$a[2].elements;v$p[0]=v$U[8],v$p[1]=v$U[9],v$p[2]=v$U[10]},v$T.getObbtoObbMatrix4x4=function(v$n,v$a,v$U,v$x){var v$D=v$n.transformation,v$p=v$a.transformation;if(v$U){v$T._getRows(v$D,v$T._rows1),v$T._getRows(v$p,v$T._rows2);for(var v$Q=0;v$Q<3;v$Q++)for(var v$V=0;v$V<3;v$V++)v$x.setElementByRowColumn(v$Q,v$V,v$Qa.dot(v$T._rows2[v$Q],v$T._rows1[v$V]));v$a.getCenter(v$T._tempV30),v$n.getCenter(v$T._tempV31),v$Qa.subtract(v$T._tempV30,v$T._tempV31,v$T._tempV32);var v$y=v$x.elements;v$y[12]=v$Qa.dot(v$T._tempV32,v$T._rows1[0]),v$y[13]=v$Qa.dot(v$T._tempV32,v$T._rows1[1]),v$y[14]=v$Qa.dot(v$T._tempV32,v$T._rows1[2]),v$y[15]=1}else v$D.invert(v$T._tempM0),v$na.multiply(v$p,v$T._tempM0,v$x)},v$T.merge=function(v$n,v$a,v$U){var v$x=v$n.extents,v$D=v$n.transformation;v$T.getObbtoObbMatrix4x4(v$n,v$a,v$U,v$T._tempM0),v$a._getLocalCorners(v$T._corners),v$Qa.transformCoordinate(v$T._corners[0],v$T._tempM0,v$T._corners[0]),v$Qa.transformCoordinate(v$T._corners[1],v$T._tempM0,v$T._corners[1]),v$Qa.transformCoordinate(v$T._corners[2],v$T._tempM0,v$T._corners[2]),v$Qa.transformCoordinate(v$T._corners[3],v$T._tempM0,v$T._corners[3]),v$Qa.transformCoordinate(v$T._corners[4],v$T._tempM0,v$T._corners[4]),v$Qa.transformCoordinate(v$T._corners[5],v$T._tempM0,v$T._corners[5]),v$Qa.transformCoordinate(v$T._corners[6],v$T._tempM0,v$T._corners[6]),v$Qa.transformCoordinate(v$T._corners[7],v$T._tempM0,v$T._corners[7]),v$Qa.scale(v$x,-1,v$T._boxBound1.min),v$x.cloneTo(v$T._boxBound1.max),v$Cn.createfromPoints(v$T._corners,v$T._boxBound2),v$Cn.merge(v$T._boxBound2,v$T._boxBound1,v$T._boxBound3);var v$p=v$T._boxBound3.min,v$Q=v$T._boxBound3.max;v$Qa.subtract(v$Q,v$p,v$T._tempV30),v$Qa.scale(v$T._tempV30,.5,v$T._tempV30),v$Qa.add(v$p,v$T._tempV30,v$T._tempV32),v$Qa.subtract(v$Q,v$T._tempV32,v$x),v$Qa.transformCoordinate(v$T._tempV32,v$D,v$T._tempV33)},v$z(v$T,["_tempV30",function(){return this._tempV30=new v$Qa},"_tempV31",function(){return this._tempV31=new v$Qa},"_tempV32",function(){return this._tempV32=new v$Qa},"_tempV33",function(){return this._tempV33=new v$Qa},"_tempV34",function(){return this._tempV34=new v$Qa},"_tempV35",function(){return this._tempV35=new v$Qa},"_tempV36",function(){return this._tempV36=new v$Qa},"_tempM0",function(){return this._tempM0=new v$na},"_tempM1",function(){return this._tempM1=new v$na},"_corners",function(){return this._corners=[new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa]},"_rows1",function(){return this._rows1=[new v$Qa,new v$Qa,new v$Qa]},"_rows2",function(){return this._rows2=[new v$Qa,new v$Qa,new v$Qa]},"_ray",function(){return this._ray=new v$Da(new v$Qa,new v$Qa)},"_boxBound1",function(){return this._boxBound1=new v$Cn(new v$Qa,new v$Qa)},"_boxBound2",function(){return this._boxBound2=new v$Cn(new v$Qa,new v$Qa)},"_boxBound3",function(){return this._boxBound3=new v$Cn(new v$Qa,new v$Qa)}])}(),function(){function v$Y(v$n,v$a){this.normal=null,this.distance=NaN,void 0===v$a&&(v$a=0),this.normal=v$n,this.distance=v$a}return v$q(v$Y,"laya.d3.math.Plane"),v$Y.prototype.normalize=function(){var v$n=this.normal.elements,v$a=v$n[0],v$U=v$n[1],v$x=v$n[2],v$D=1/Math.sqrt(v$a*v$a+v$U*v$U+v$x*v$x);v$n[0]=v$a*v$D,v$n[1]=v$U*v$D,v$n[2]=v$x*v$D,this.distance*=v$D},v$Y.createPlaneBy3P=function(v$n,v$a,v$U){var v$x=v$n.elements,v$D=v$a.elements,v$p=v$U.elements,v$Q=v$D[0]-v$x[0],v$V=v$D[1]-v$x[1],v$y=v$D[2]-v$x[2],v$R=v$p[0]-v$x[0],v$X=v$p[1]-v$x[1],v$z=v$p[2]-v$x[2],v$i=v$V*v$z-v$y*v$X,v$q=v$y*v$R-v$Q*v$z,v$E=v$Q*v$X-v$V*v$R,v$m=1/Math.sqrt(v$i*v$i+v$q*v$q+v$E*v$E),v$b=v$i*v$m,v$P=v$q*v$m,v$A=v$E*v$m,v$T=v$Y._TEMPVec3.elements;v$T[0]=v$b,v$T[1]=v$P,v$T[2]=v$A;var v$K=-(v$b*v$x[0]+v$P*v$x[1]+v$A*v$x[2]);return new v$Y(v$Y._TEMPVec3,v$K)},v$Y.PlaneIntersectionType_Back=0,v$Y.PlaneIntersectionType_Front=1,v$Y.PlaneIntersectionType_Intersecting=2,v$z(v$Y,["_TEMPVec3",function(){return this._TEMPVec3=new v$Qa}]),v$Y}()),v$Ua=function(){function v$D(v$n,v$a,v$U,v$x){this.elements=new Float32Array(4),void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=1),this.elements[0]=v$n,this.elements[1]=v$a,this.elements[2]=v$U,this.elements[3]=v$x}v$q(v$D,"laya.d3.math.Quaternion");var v$n=v$D.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.scaling=function(v$n,v$a){var v$U=v$a.elements,v$x=this.elements;v$U[0]=v$x[0]*v$n,v$U[1]=v$x[1]*v$n,v$U[2]=v$x[2]*v$n,v$U[3]=v$x[3]*v$n},v$n.normalize=function(v$n){var v$a=v$n.elements,v$U=this.elements,v$x=v$U[0],v$D=v$U[1],v$p=v$U[2],v$Q=v$U[3],v$V=v$x*v$x+v$D*v$D+v$p*v$p+v$Q*v$Q;0<v$V&&(v$V=1/Math.sqrt(v$V),v$a[0]=v$x*v$V,v$a[1]=v$D*v$V,v$a[2]=v$p*v$V,v$a[3]=v$Q*v$V)},v$n.length=function(){var v$n=this.elements,v$a=v$n[0],v$U=v$n[1],v$x=v$n[2],v$D=v$n[3];return Math.sqrt(v$a*v$a+v$U*v$U+v$x*v$x+v$D*v$D)},v$n.rotateX=function(v$n,v$a){var v$U=v$a.elements,v$x=this.elements;v$n*=.5;var v$D=v$x[0],v$p=v$x[1],v$Q=v$x[2],v$V=v$x[3],v$y=Math.sin(v$n),v$R=Math.cos(v$n);v$U[0]=v$D*v$R+v$V*v$y,v$U[1]=v$p*v$R+v$Q*v$y,v$U[2]=v$Q*v$R-v$p*v$y,v$U[3]=v$V*v$R-v$D*v$y},v$n.rotateY=function(v$n,v$a){var v$U=v$a.elements,v$x=this.elements;v$n*=.5;var v$D=v$x[0],v$p=v$x[1],v$Q=v$x[2],v$V=v$x[3],v$y=Math.sin(v$n),v$R=Math.cos(v$n);v$U[0]=v$D*v$R-v$Q*v$y,v$U[1]=v$p*v$R+v$V*v$y,v$U[2]=v$Q*v$R+v$D*v$y,v$U[3]=v$V*v$R-v$p*v$y},v$n.rotateZ=function(v$n,v$a){var v$U=v$a.elements,v$x=this.elements;v$n*=.5;var v$D=v$x[0],v$p=v$x[1],v$Q=v$x[2],v$V=v$x[3],v$y=Math.sin(v$n),v$R=Math.cos(v$n);v$U[0]=v$D*v$R+v$p*v$y,v$U[1]=v$p*v$R-v$D*v$y,v$U[2]=v$Q*v$R+v$V*v$y,v$U[3]=v$V*v$R-v$Q*v$y},v$n.getYawPitchRoll=function(v$n){v$Qa.transformQuat(v$Qa.ForwardRH,this,v$D.TEMPVector31),v$Qa.transformQuat(v$Qa.Up,this,v$D.TEMPVector32);var v$a=v$D.TEMPVector32.elements;v$D.angleTo(v$Qa.ZERO,v$D.TEMPVector31,v$D.TEMPVector33);var v$U=v$D.TEMPVector33.elements;v$U[0]==Math.PI/2?(v$U[1]=v$D.arcTanAngle(v$a[2],v$a[0]),v$U[2]=0):v$U[0]==-Math.PI/2?(v$U[1]=v$D.arcTanAngle(-v$a[2],-v$a[0]),v$U[2]=0):(v$na.createRotationY(-v$U[1],v$D.TEMPMatrix0),v$na.createRotationX(-v$U[0],v$D.TEMPMatrix1),v$Qa.transformCoordinate(v$D.TEMPVector32,v$D.TEMPMatrix0,v$D.TEMPVector32),v$Qa.transformCoordinate(v$D.TEMPVector32,v$D.TEMPMatrix1,v$D.TEMPVector32),v$U[2]=v$D.arcTanAngle(v$a[1],-v$a[0])),v$U[1]<=-Math.PI&&(v$U[1]=Math.PI),v$U[2]<=-Math.PI&&(v$U[2]=Math.PI),v$U[1]>=Math.PI&&v$U[2]>=Math.PI&&(v$U[1]=0,v$U[2]=0,v$U[0]=Math.PI-v$U[0]);var v$x=v$n.elements;v$x[0]=v$U[1],v$x[1]=v$U[0],v$x[2]=v$U[2]},v$n.invert=function(v$n){var v$a=v$n.elements,v$U=this.elements,v$x=v$U[0],v$D=v$U[1],v$p=v$U[2],v$Q=v$U[3],v$V=v$x*v$x+v$D*v$D+v$p*v$p+v$Q*v$Q,v$y=v$V?1/v$V:0;v$a[0]=-v$x*v$y,v$a[1]=-v$D*v$y,v$a[2]=-v$p*v$y,v$a[3]=v$Q*v$y},v$n.identity=function(){var v$n=this.elements;v$n[0]=0,v$n[1]=0,v$n[2]=0,v$n[3]=1},v$n.fromArray=function(v$n,v$a){void 0===v$a&&(v$a=0),this.elements[0]=v$n[v$a+0],this.elements[1]=v$n[v$a+1],this.elements[2]=v$n[v$a+2],this.elements[3]=v$n[v$a+3]},v$n.cloneTo=function(v$n){var v$a,v$U,v$x;if((v$U=this.elements)!==(v$x=v$n.elements))for(v$a=0;v$a<4;++v$a)v$x[v$a]=v$U[v$a]},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$n.equals=function(v$n){var v$a=this.elements,v$U=v$n.elements;return v$Jn.nearEqual(v$a[0],v$U[0])&&v$Jn.nearEqual(v$a[1],v$U[1])&&v$Jn.nearEqual(v$a[2],v$U[2])&&v$Jn.nearEqual(v$a[3],v$U[3])},v$n.lengthSquared=function(){var v$n=this.elements[0],v$a=this.elements[1],v$U=this.elements[2],v$x=this.elements[3];return v$n*v$n+v$a*v$a+v$U*v$U+v$x*v$x},v$E(0,v$n,"x",function(){return this.elements[0]}),v$E(0,v$n,"y",function(){return this.elements[1]}),v$E(0,v$n,"z",function(){return this.elements[2]}),v$E(0,v$n,"w",function(){return this.elements[3]}),v$D.createFromYawPitchRoll=function(v$n,v$a,v$U,v$x){var v$D=.5*v$U,v$p=.5*v$a,v$Q=.5*v$n,v$V=Math.sin(v$D),v$y=Math.cos(v$D),v$R=Math.sin(v$p),v$X=Math.cos(v$p),v$z=Math.sin(v$Q),v$i=Math.cos(v$Q),v$q=v$x.elements;v$q[0]=v$i*v$R*v$y+v$z*v$X*v$V,v$q[1]=v$z*v$X*v$y-v$i*v$R*v$V,v$q[2]=v$i*v$X*v$V-v$z*v$R*v$y,v$q[3]=v$i*v$X*v$y+v$z*v$R*v$V},v$D.multiply=function(v$n,v$a,v$U){var v$x=v$n.elements,v$D=v$a.elements,v$p=v$U.elements,v$Q=v$x[0],v$V=v$x[1],v$y=v$x[2],v$R=v$x[3],v$X=v$D[0],v$z=v$D[1],v$i=v$D[2],v$q=v$D[3],v$E=v$V*v$i-v$y*v$z,v$m=v$y*v$X-v$Q*v$i,v$b=v$Q*v$z-v$V*v$X,v$P=v$Q*v$X+v$V*v$z+v$y*v$i;v$p[0]=v$Q*v$q+v$X*v$R+v$E,v$p[1]=v$V*v$q+v$z*v$R+v$m,v$p[2]=v$y*v$q+v$i*v$R+v$b,v$p[3]=v$R*v$q-v$P},v$D.arcTanAngle=function(v$n,v$a){return 0==v$n?1==v$a?Math.PI/2:-Math.PI/2:0<v$n?Math.atan(v$a/v$n):v$n<0?0<v$a?Math.atan(v$a/v$n)+Math.PI:Math.atan(v$a/v$n)-Math.PI:0},v$D.angleTo=function(v$n,v$a,v$U){v$Qa.subtract(v$a,v$n,v$D.TEMPVector30),v$Qa.normalize(v$D.TEMPVector30,v$D.TEMPVector30),v$U.elements[0]=Math.asin(v$D.TEMPVector30.y),v$U.elements[1]=v$D.arcTanAngle(-v$D.TEMPVector30.z,-v$D.TEMPVector30.x)},v$D.createFromAxisAngle=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements;v$a*=.5;var v$p=Math.sin(v$a);v$x[0]=v$p*v$D[0],v$x[1]=v$p*v$D[1],v$x[2]=v$p*v$D[2],v$x[3]=Math.cos(v$a)},v$D.createFromMatrix3x3=function(v$n,v$a){var v$U,v$x=v$a.elements,v$D=v$n.elements,v$p=v$D[0]+v$D[4]+v$D[8];if(0<v$p)v$U=Math.sqrt(v$p+1),v$x[3]=.5*v$U,v$U=.5/v$U,v$x[0]=(v$D[5]-v$D[7])*v$U,v$x[1]=(v$D[6]-v$D[2])*v$U,v$x[2]=(v$D[1]-v$D[3])*v$U;else{var v$Q=0;v$D[4]>v$D[0]&&(v$Q=1),v$D[8]>v$D[3*v$Q+v$Q]&&(v$Q=2);var v$V=(v$Q+1)%3,v$y=(v$Q+2)%3;v$U=Math.sqrt(v$D[3*v$Q+v$Q]-v$D[3*v$V+v$V]-v$D[3*v$y+v$y]+1),v$x[v$Q]=.5*v$U,v$U=.5/v$U,v$x[3]=(v$D[3*v$V+v$y]-v$D[3*v$y+v$V])*v$U,v$x[v$V]=(v$D[3*v$V+v$Q]+v$D[3*v$Q+v$V])*v$U,v$x[v$y]=(v$D[3*v$y+v$Q]+v$D[3*v$Q+v$y])*v$U}},v$D.createFromMatrix4x4=function(v$n,v$a){var v$U,v$x,v$D=v$n.elements,v$p=v$a.elements,v$Q=v$D[0]+v$D[5]+v$D[10];0<v$Q?(v$U=Math.sqrt(v$Q+1),v$p[3]=.5*v$U,v$U=.5/v$U,v$p[0]=(v$D[6]-v$D[9])*v$U,v$p[1]=(v$D[8]-v$D[2])*v$U,v$p[2]=(v$D[1]-v$D[4])*v$U):v$D[0]>=v$D[5]&&v$D[0]>=v$D[10]?(v$x=.5/(v$U=Math.sqrt(1+v$D[0]-v$D[5]-v$D[10])),v$p[0]=.5*v$U,v$p[1]=(v$D[1]+v$D[4])*v$x,v$p[2]=(v$D[2]+v$D[8])*v$x,v$p[3]=(v$D[6]-v$D[9])*v$x):v$D[5]>v$D[10]?(v$x=.5/(v$U=Math.sqrt(1+v$D[5]-v$D[0]-v$D[10])),v$p[0]=(v$D[4]+v$D[1])*v$x,v$p[1]=.5*v$U,v$p[2]=(v$D[9]+v$D[6])*v$x,v$p[3]=(v$D[8]-v$D[2])*v$x):(v$x=.5/(v$U=Math.sqrt(1+v$D[10]-v$D[0]-v$D[5])),v$p[0]=(v$D[8]+v$D[2])*v$x,v$p[1]=(v$D[9]+v$D[6])*v$x,v$p[2]=.5*v$U,v$p[3]=(v$D[1]-v$D[4])*v$x)},v$D.slerp=function(v$n,v$a,v$U,v$x){var v$D,v$p,v$Q,v$V,v$y,v$R=v$n.elements,v$X=v$a.elements,v$z=v$x.elements,v$i=v$R[0],v$q=v$R[1],v$E=v$R[2],v$m=v$R[3],v$b=v$X[0],v$P=v$X[1],v$A=v$X[2],v$T=v$X[3];return(v$p=v$i*v$b+v$q*v$P+v$E*v$A+v$m*v$T)<0&&(v$p=-v$p,v$b=-v$b,v$P=-v$P,v$A=-v$A,v$T=-v$T),v$y=1e-6<1-v$p?(v$D=Math.acos(v$p),v$Q=Math.sin(v$D),v$V=Math.sin((1-v$U)*v$D)/v$Q,Math.sin(v$U*v$D)/v$Q):(v$V=1-v$U,v$U),v$z[0]=v$V*v$i+v$y*v$b,v$z[1]=v$V*v$q+v$y*v$P,v$z[2]=v$V*v$E+v$y*v$A,v$z[3]=v$V*v$m+v$y*v$T,v$z},v$D.lerp=function(v$n,v$a,v$U,v$x){var v$D=v$x.elements,v$p=v$n.elements,v$Q=v$a.elements,v$V=v$p[0],v$y=v$p[1],v$R=v$p[2],v$X=v$p[3];v$D[0]=v$V+v$U*(v$Q[0]-v$V),v$D[1]=v$y+v$U*(v$Q[1]-v$y),v$D[2]=v$R+v$U*(v$Q[2]-v$R),v$D[3]=v$X+v$U*(v$Q[3]-v$X)},v$D.add=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=v$D[0]+v$p[0],v$x[1]=v$D[1]+v$p[1],v$x[2]=v$D[2]+v$p[2],v$x[3]=v$D[3]+v$p[3]},v$D.dot=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements;return v$U[0]*v$x[0]+v$U[1]*v$x[1]+v$U[2]*v$x[2]+v$U[3]*v$x[3]},v$D.rotationLookAt=function(v$n,v$a,v$U){v$D.lookAt(v$Qa.ZERO,v$n,v$a,v$U)},v$D.lookAt=function(v$n,v$a,v$U,v$x){v$en.lookAt(v$n,v$a,v$U,v$D._tempMatrix3x3),v$D.rotationMatrix(v$D._tempMatrix3x3,v$x)},v$D.invert=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements,v$D=v$n.lengthSquared();v$Jn.isZero(v$D)||(v$D=1/v$D,v$x[0]=-v$U[0]*v$D,v$x[1]=-v$U[1]*v$D,v$x[2]=-v$U[2]*v$D,v$x[3]=v$U[3]*v$D)},v$D.rotationMatrix=function(v$n,v$a){var v$U=v$n.elements,v$x=v$U[0],v$D=v$U[1],v$p=v$U[2],v$Q=v$U[3],v$V=v$U[4],v$y=v$U[5],v$R=v$U[6],v$X=v$U[7],v$z=v$U[8],v$i=v$a.elements,v$q=NaN,v$E=NaN,v$m=v$x+v$V+v$z;0<v$m?(v$q=Math.sqrt(v$m+1),v$i[3]=.5*v$q,v$q=.5/v$q,v$i[0]=(v$y-v$X)*v$q,v$i[1]=(v$R-v$p)*v$q,v$i[2]=(v$D-v$Q)*v$q):v$V<=v$x&&v$z<=v$x?(v$E=.5/(v$q=Math.sqrt(1+v$x-v$V-v$z)),v$i[0]=.5*v$q,v$i[1]=(v$D+v$Q)*v$E,v$i[2]=(v$p+v$R)*v$E,v$i[3]=(v$y-v$X)*v$E):v$z<v$V?(v$E=.5/(v$q=Math.sqrt(1+v$V-v$x-v$z)),v$i[0]=(v$Q+v$D)*v$E,v$i[1]=.5*v$q,v$i[2]=(v$X+v$y)*v$E,v$i[3]=(v$R-v$p)*v$E):(v$E=.5/(v$q=Math.sqrt(1+v$z-v$x-v$V)),v$i[0]=(v$R+v$p)*v$E,v$i[1]=(v$X+v$y)*v$E,v$i[2]=.5*v$q,v$i[3]=(v$D-v$Q)*v$E)},v$D.DEFAULT=new v$D,v$z(v$D,["TEMPVector30",function(){return this.TEMPVector30=new v$Qa},"TEMPVector31",function(){return this.TEMPVector31=new v$Qa},"TEMPVector32",function(){return this.TEMPVector32=new v$Qa},"TEMPVector33",function(){return this.TEMPVector33=new v$Qa},"TEMPMatrix0",function(){return this.TEMPMatrix0=new v$na},"TEMPMatrix1",function(){return this.TEMPMatrix1=new v$na},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new v$en},"NAN",function(){return this.NAN=new v$D(NaN,NaN,NaN,NaN)}]),v$D}(),v$xa=function(){function v$n(v$n){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=v$n,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}v$q(v$n,"laya.d3.math.Rand");var v$a=v$n.prototype;return v$a.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},v$a.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},v$a.getSignedFloat=function(){return 2*this.getFloat()-1},v$E(0,v$a,"seed",function(){return this.seeds[0]},function(v$n){this.seeds[0]=v$n,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),v$n.getFloatFromInt=function(v$n){return 1/8388607*(8388607&v$n)},v$n.getByteFromInt=function(v$n){return(8388607&v$n)>>>15},v$n}(),v$Da=(function(){function v$D(v$n){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(v$n instanceof Array)||4!==v$n.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|v$n[0],this._state0L=0|v$n[1],this._state1U=0|v$n[2],this._state1L=0|v$n[3]}v$q(v$D,"laya.d3.math.RandX");var v$n=v$D.prototype;v$n.randomint=function(){var v$n=this._state0U,v$a=this._state0L,v$U=this._state1U,v$x=this._state1L,v$D=(v$x>>>0)+(v$a>>>0),v$p=v$U+v$n+(v$D/2>>>31)>>>0,v$Q=v$D>>>0,v$V=0,v$y=0;v$V=(v$n^=v$V=v$n<<23|(-512&v$a)>>>9)^(this._state0U=v$U),v$y=(v$a^=v$y=v$a<<23)^(this._state0L=v$x);v$V^=v$n>>>18,v$y^=v$a>>>18|(262143&v$n)<<14;return v$V^=v$U>>>5,v$y^=v$x>>>5|(31&v$U)<<27,this._state1U=v$V,this._state1L=v$y,[v$p,v$Q]},v$n.random=function(){var v$n=this.randomint(),v$a=v$n[0],v$U=1023<<20|v$a>>>12,v$x=0|(v$n[1]>>>12|(4095&v$a)<<20);return v$D._CONVERTION_BUFFER.setUint32(0,v$U,!1),v$D._CONVERTION_BUFFER.setUint32(4,v$x,!1),v$xa._CONVERTION_BUFFER.getFloat64(0,!1)-1},v$z(v$D,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new v$xa([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function v$n(v$n,v$a){this.origin=null,this.direction=null,this.origin=v$n,this.direction=v$a}return v$q(v$n,"laya.d3.math.Ray"),v$n}()),v$pa=function(){function v$n(v$n,v$a){this.elements=new Float32Array(2),void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0);var v$U=this.elements;v$U[0]=v$n,v$U[1]=v$a}v$q(v$n,"laya.d3.math.Vector2");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.fromArray=function(v$n,v$a){void 0===v$a&&(v$a=0),this.elements[0]=v$n[v$a+0],this.elements[1]=v$n[v$a+1]},v$a.cloneTo=function(v$n){var v$a=v$n.elements,v$U=this.elements;v$a[0]=v$U[0],v$a[1]=v$U[1]},v$a.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$a,"x",function(){return this.elements[0]},function(v$n){this.elements[0]=v$n}),v$E(0,v$a,"y",function(){return this.elements[1]},function(v$n){this.elements[1]=v$n}),v$n.scale=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements;v$x[0]=v$D[0]*v$a,v$x[1]=v$D[1]*v$a},v$z(v$n,["ZERO",function(){return this.ZERO=new v$n(0,0)},"ONE",function(){return this.ONE=new v$n(1,1)}]),v$n}(),v$Qa=function(){function v$X(v$n,v$a,v$U){this.elements=new Float32Array(3),void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0);var v$x=this.elements;v$x[0]=v$n,v$x[1]=v$a,v$x[2]=v$U}v$q(v$X,"laya.d3.math.Vector3");var v$n=v$X.prototype;return v$Y.imps(v$n,{"laya.d3.core.IClone":!0}),v$n.fromArray=function(v$n,v$a){void 0===v$a&&(v$a=0),this.elements[0]=v$n[v$a+0],this.elements[1]=v$n[v$a+1],this.elements[2]=v$n[v$a+2]},v$n.cloneTo=function(v$n){var v$a=v$n.elements,v$U=this.elements;v$a[0]=v$U[0],v$a[1]=v$U[1],v$a[2]=v$U[2]},v$n.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$n.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},v$n.reset=function(v$n,v$a,v$U){this.elements[0]=v$n,this.elements[1]=v$a,this.elements[2]=v$U},v$E(0,v$n,"x",function(){return this.elements[0]},function(v$n){this.elements[0]=v$n}),v$E(0,v$n,"y",function(){return this.elements[1]},function(v$n){this.elements[1]=v$n}),v$E(0,v$n,"z",function(){return this.elements[2]},function(v$n){this.elements[2]=v$n}),v$X.distanceSquared=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements,v$D=v$U[0]-v$x[0],v$p=v$U[1]-v$x[1],v$Q=v$U[2]-v$x[2];return v$D*v$D+v$p*v$p+v$Q*v$Q},v$X.distance=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements,v$D=v$U[0]-v$x[0],v$p=v$U[1]-v$x[1],v$Q=v$U[2]-v$x[2];return Math.sqrt(v$D*v$D+v$p*v$p+v$Q*v$Q)},v$X.min=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=Math.min(v$D[0],v$p[0]),v$x[1]=Math.min(v$D[1],v$p[1]),v$x[2]=Math.min(v$D[2],v$p[2])},v$X.max=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=Math.max(v$D[0],v$p[0]),v$x[1]=Math.max(v$D[1],v$p[1]),v$x[2]=Math.max(v$D[2],v$p[2])},v$X.transformQuat=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements,v$Q=v$D[0],v$V=v$D[1],v$y=v$D[2],v$R=v$p[0],v$X=v$p[1],v$z=v$p[2],v$i=v$p[3],v$q=v$i*v$Q+v$X*v$y-v$z*v$V,v$E=v$i*v$V+v$z*v$Q-v$R*v$y,v$m=v$i*v$y+v$R*v$V-v$X*v$Q,v$b=-v$R*v$Q-v$X*v$V-v$z*v$y;v$x[0]=v$q*v$i+v$b*-v$R+v$E*-v$z-v$m*-v$X,v$x[1]=v$E*v$i+v$b*-v$X+v$m*-v$R-v$q*-v$z,v$x[2]=v$m*v$i+v$b*-v$z+v$q*-v$X-v$E*-v$R},v$X.scalarLength=function(v$n){var v$a=v$n.elements,v$U=v$a[0],v$x=v$a[1],v$D=v$a[2];return Math.sqrt(v$U*v$U+v$x*v$x+v$D*v$D)},v$X.scalarLengthSquared=function(v$n){var v$a=v$n.elements,v$U=v$a[0],v$x=v$a[1],v$D=v$a[2];return v$U*v$U+v$x*v$x+v$D*v$D},v$X.normalize=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements,v$D=v$U[0],v$p=v$U[1],v$Q=v$U[2],v$V=v$D*v$D+v$p*v$p+v$Q*v$Q;0<v$V&&(v$V=1/Math.sqrt(v$V),v$x[0]=v$U[0]*v$V,v$x[1]=v$U[1]*v$V,v$x[2]=v$U[2]*v$V)},v$X.multiply=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=v$D[0]*v$p[0],v$x[1]=v$D[1]*v$p[1],v$x[2]=v$D[2]*v$p[2]},v$X.scale=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements;v$x[0]=v$D[0]*v$a,v$x[1]=v$D[1]*v$a,v$x[2]=v$D[2]*v$a},v$X.lerp=function(v$n,v$a,v$U,v$x){var v$D=v$x.elements,v$p=v$n.elements,v$Q=v$a.elements,v$V=v$p[0],v$y=v$p[1],v$R=v$p[2];v$D[0]=v$V+v$U*(v$Q[0]-v$V),v$D[1]=v$y+v$U*(v$Q[1]-v$y),v$D[2]=v$R+v$U*(v$Q[2]-v$R)},v$X.transformV3ToV3=function(v$n,v$a,v$U){var v$x=v$X._tempVector4;v$X.transformV3ToV4(v$n,v$a,v$x);var v$D=v$x.elements,v$p=v$U.elements;v$p[0]=v$D[0],v$p[1]=v$D[1],v$p[2]=v$D[2]},v$X.transformV3ToV4=function(v$n,v$a,v$U){var v$x=v$n.elements,v$D=v$x[0],v$p=v$x[1],v$Q=v$x[2],v$V=v$a.elements,v$y=v$U.elements;v$y[0]=v$D*v$V[0]+v$p*v$V[4]+v$Q*v$V[8]+v$V[12],v$y[1]=v$D*v$V[1]+v$p*v$V[5]+v$Q*v$V[9]+v$V[13],v$y[2]=v$D*v$V[2]+v$p*v$V[6]+v$Q*v$V[10]+v$V[14],v$y[3]=v$D*v$V[3]+v$p*v$V[7]+v$Q*v$V[11]+v$V[15]},v$X.TransformNormal=function(v$n,v$a,v$U){var v$x=v$n.elements,v$D=v$x[0],v$p=v$x[1],v$Q=v$x[2],v$V=v$a.elements,v$y=v$U.elements;v$y[0]=v$D*v$V[0]+v$p*v$V[4]+v$Q*v$V[8],v$y[1]=v$D*v$V[1]+v$p*v$V[5]+v$Q*v$V[9],v$y[2]=v$D*v$V[2]+v$p*v$V[6]+v$Q*v$V[10]},v$X.transformCoordinate=function(v$n,v$a,v$U){var v$x=v$X._tempVector4.elements,v$D=v$n.elements,v$p=v$D[0],v$Q=v$D[1],v$V=v$D[2],v$y=v$a.elements;v$x[0]=v$p*v$y[0]+v$Q*v$y[4]+v$V*v$y[8]+v$y[12],v$x[1]=v$p*v$y[1]+v$Q*v$y[5]+v$V*v$y[9]+v$y[13],v$x[2]=v$p*v$y[2]+v$Q*v$y[6]+v$V*v$y[10]+v$y[14],v$x[3]=1/(v$p*v$y[3]+v$Q*v$y[7]+v$V*v$y[11]+v$y[15]);var v$R=v$U.elements;v$R[0]=v$x[0]*v$x[3],v$R[1]=v$x[1]*v$x[3],v$R[2]=v$x[2]*v$x[3]},v$X.Clamp=function(v$n,v$a,v$U,v$x){var v$D=v$n.elements,v$p=v$D[0],v$Q=v$D[1],v$V=v$D[2],v$y=v$a.elements,v$R=v$y[0],v$X=v$y[1],v$z=v$y[2],v$i=v$U.elements,v$q=v$i[0],v$E=v$i[1],v$m=v$i[2],v$b=v$x.elements;v$p=(v$p=v$q<v$p?v$q:v$p)<v$R?v$R:v$p,v$Q=(v$Q=v$E<v$Q?v$E:v$Q)<v$X?v$X:v$Q,v$V=(v$V=v$m<v$V?v$m:v$V)<v$z?v$z:v$V,v$b[0]=v$p,v$b[1]=v$Q,v$b[2]=v$V},v$X.add=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=v$D[0]+v$p[0],v$x[1]=v$D[1]+v$p[1],v$x[2]=v$D[2]+v$p[2]},v$X.subtract=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=v$D[0]-v$p[0],v$x[1]=v$D[1]-v$p[1],v$x[2]=v$D[2]-v$p[2]},v$X.cross=function(v$n,v$a,v$U){var v$x=v$n.elements,v$D=v$a.elements,v$p=v$U.elements,v$Q=v$x[0],v$V=v$x[1],v$y=v$x[2],v$R=v$D[0],v$X=v$D[1],v$z=v$D[2];v$p[0]=v$V*v$z-v$y*v$X,v$p[1]=v$y*v$R-v$Q*v$z,v$p[2]=v$Q*v$X-v$V*v$R},v$X.dot=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements;return v$U[0]*v$x[0]+v$U[1]*v$x[1]+v$U[2]*v$x[2]},v$X.equals=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements;return v$Jn.nearEqual(Math.abs(v$U[0]),Math.abs(v$x[0]))&&v$Jn.nearEqual(Math.abs(v$U[1]),Math.abs(v$x[1]))&&v$Jn.nearEqual(Math.abs(v$U[2]),Math.abs(v$x[2]))},v$X.ZERO=new v$X(0,0,0),v$X.ONE=new v$X(1,1,1),v$X.NegativeUnitX=new v$X(-1,0,0),v$X.UnitX=new v$X(1,0,0),v$X.UnitY=new v$X(0,1,0),v$X.UnitZ=new v$X(0,0,1),v$X.ForwardRH=new v$X(0,0,-1),v$X.ForwardLH=new v$X(0,0,1),v$X.Up=new v$X(0,1,0),v$X.NAN=new v$X(NaN,NaN,NaN),v$z(v$X,["_tempVector4",function(){return this._tempVector4=new v$Va}]),v$X}(),v$Va=function(){function v$n(v$n,v$a,v$U,v$x){this.elements=new Float32Array(4),void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=0);var v$D=this.elements;v$D[0]=v$n,v$D[1]=v$a,v$D[2]=v$U,v$D[3]=v$x}v$q(v$n,"laya.d3.math.Vector4");var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a.fromArray=function(v$n,v$a){void 0===v$a&&(v$a=0),this.elements[0]=v$n[v$a+0],this.elements[1]=v$n[v$a+1],this.elements[2]=v$n[v$a+2],this.elements[3]=v$n[v$a+3]},v$a.cloneTo=function(v$n){var v$a=v$n.elements,v$U=this.elements;v$a[0]=v$U[0],v$a[1]=v$U[1],v$a[2]=v$U[2],v$a[3]=v$U[3]},v$a.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$a.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},v$a.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},v$E(0,v$a,"x",function(){return this.elements[0]},function(v$n){this.elements[0]=v$n}),v$E(0,v$a,"y",function(){return this.elements[1]},function(v$n){this.elements[1]=v$n}),v$E(0,v$a,"z",function(){return this.elements[2]},function(v$n){this.elements[2]=v$n}),v$E(0,v$a,"w",function(){return this.elements[3]},function(v$n){this.elements[3]=v$n}),v$n.lerp=function(v$n,v$a,v$U,v$x){var v$D=v$x.elements,v$p=v$n.elements,v$Q=v$a.elements,v$V=v$p[0],v$y=v$p[1],v$R=v$p[2],v$X=v$p[3];v$D[0]=v$V+v$U*(v$Q[0]-v$V),v$D[1]=v$y+v$U*(v$Q[1]-v$y),v$D[2]=v$R+v$U*(v$Q[2]-v$R),v$D[3]=v$X+v$U*(v$Q[3]-v$X)},v$n.transformByM4x4=function(v$n,v$a,v$U){var v$x=v$n.elements,v$D=v$x[0],v$p=v$x[1],v$Q=v$x[2],v$V=v$x[3],v$y=v$a.elements,v$R=v$U.elements;v$R[0]=v$D*v$y[0]+v$p*v$y[4]+v$Q*v$y[8]+v$V*v$y[12],v$R[1]=v$D*v$y[1]+v$p*v$y[5]+v$Q*v$y[9]+v$V*v$y[13],v$R[2]=v$D*v$y[2]+v$p*v$y[6]+v$Q*v$y[10]+v$V*v$y[14],v$R[3]=v$D*v$y[3]+v$p*v$y[7]+v$Q*v$y[11]+v$V*v$y[15]},v$n.equals=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements;return v$Jn.nearEqual(Math.abs(v$U[0]),Math.abs(v$x[0]))&&v$Jn.nearEqual(Math.abs(v$U[1]),Math.abs(v$x[1]))&&v$Jn.nearEqual(Math.abs(v$U[2]),Math.abs(v$x[2]))&&v$Jn.nearEqual(Math.abs(v$U[3]),Math.abs(v$x[3]))},v$n.normalize=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements,v$D=v$n.length();0<v$D&&(v$x[0]=v$U[0]*v$D,v$x[1]=v$U[1]*v$D,v$x[2]=v$U[2]*v$D,v$x[3]=v$U[3]*v$D)},v$n.add=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=v$D[0]+v$p[0],v$x[1]=v$D[1]+v$p[1],v$x[2]=v$D[2]+v$p[2],v$x[3]=v$D[3]+v$p[3]},v$n.subtract=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=v$D[0]-v$p[0],v$x[1]=v$D[1]-v$p[1],v$x[2]=v$D[2]-v$p[2],v$x[3]=v$D[3]-v$p[3]},v$n.multiply=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=v$D[0]*v$p[0],v$x[1]=v$D[1]*v$p[1],v$x[2]=v$D[2]*v$p[2],v$x[3]=v$D[3]*v$p[3]},v$n.scale=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements;v$x[0]=v$D[0]*v$a,v$x[1]=v$D[1]*v$a,v$x[2]=v$D[2]*v$a,v$x[3]=v$D[3]*v$a},v$n.Clamp=function(v$n,v$a,v$U,v$x){var v$D=v$n.elements,v$p=v$D[0],v$Q=v$D[1],v$V=v$D[2],v$y=v$D[3],v$R=v$a.elements,v$X=v$R[0],v$z=v$R[1],v$i=v$R[2],v$q=v$R[3],v$E=v$U.elements,v$m=v$E[0],v$b=v$E[1],v$P=v$E[2],v$A=v$E[3],v$T=v$x.elements;v$p=(v$p=v$m<v$p?v$m:v$p)<v$X?v$X:v$p,v$Q=(v$Q=v$b<v$Q?v$b:v$Q)<v$z?v$z:v$Q,v$V=(v$V=v$P<v$V?v$P:v$V)<v$i?v$i:v$V,v$y=(v$y=v$A<v$y?v$A:v$y)<v$q?v$q:v$y,v$T[0]=v$p,v$T[1]=v$Q,v$T[2]=v$V,v$T[3]=v$y},v$n.distanceSquared=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements,v$D=v$U[0]-v$x[0],v$p=v$U[1]-v$x[1],v$Q=v$U[2]-v$x[2],v$V=v$U[3]-v$x[3];return v$D*v$D+v$p*v$p+v$Q*v$Q+v$V*v$V},v$n.distance=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements,v$D=v$U[0]-v$x[0],v$p=v$U[1]-v$x[1],v$Q=v$U[2]-v$x[2],v$V=v$U[3]-v$x[3];return Math.sqrt(v$D*v$D+v$p*v$p+v$Q*v$Q+v$V*v$V)},v$n.dot=function(v$n,v$a){var v$U=v$n.elements,v$x=v$a.elements;return v$U[0]*v$x[0]+v$U[1]*v$x[1]+v$U[2]*v$x[2]+v$U[3]*v$x[3]},v$n.min=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=Math.min(v$D[0],v$p[0]),v$x[1]=Math.min(v$D[1],v$p[1]),v$x[2]=Math.min(v$D[2],v$p[2]),v$x[3]=Math.min(v$D[3],v$p[3])},v$n.max=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a.elements;v$x[0]=Math.max(v$D[0],v$p[0]),v$x[1]=Math.max(v$D[1],v$p[1]),v$x[2]=Math.max(v$D[2],v$p[2]),v$x[3]=Math.max(v$D[3],v$p[3])},v$z(v$n,["ZERO",function(){return this.ZERO=new v$n},"ONE",function(){return this.ONE=new v$n(1,1,1,1)},"UnitX",function(){return this.UnitX=new v$n(1,0,0,0)},"UnitY",function(){return this.UnitY=new v$n(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new v$n(0,0,1,0)},"UnitW",function(){return this.UnitW=new v$n(0,0,0,1)}]),v$n}(),v$ya=function(){function v$p(v$n,v$a,v$U,v$x){this.minDepth=0,this.maxDepth=1,this.x=v$n,this.y=v$a,this.width=v$U,this.height=v$x}v$q(v$p,"laya.d3.math.Viewport");var v$n=v$p.prototype;return v$n.project=function(v$n,v$a,v$U){v$Qa.transformV3ToV3(v$n,v$a,v$U);var v$x=v$n.elements,v$D=v$a.elements,v$p=v$U.elements,v$Q=v$x[0]*v$D[3]+v$x[1]*v$D[7]+v$x[2]*v$D[11]+v$D[15];1!==v$Q&&(v$p[0]=v$p[0]/v$Q,v$p[1]=v$p[1]/v$Q,v$p[2]=v$p[2]/v$Q),v$p[0]=.5*(v$p[0]+1)*this.width+this.x,v$p[1]=.5*(1-v$p[1])*this.height+this.y,v$p[2]=v$p[2]*(this.maxDepth-this.minDepth)+this.minDepth},v$n.unprojectFromMat=function(v$n,v$a,v$U){var v$x=v$n.elements,v$D=v$a.elements,v$p=v$U.elements;v$p[0]=(v$x[0]-this.x)/this.width*2-1,v$p[1]=-((v$x[1]-this.y)/this.height*2-1);var v$Q=(this.maxDepth-this.minDepth)/2;v$p[2]=(v$x[2]-this.minDepth-v$Q)/v$Q;var v$V=v$p[0]*v$D[3]+v$p[1]*v$D[7]+v$p[2]*v$D[11]+v$D[15];v$Qa.transformV3ToV3(v$U,v$a,v$U),1!==v$V&&(v$p[0]=v$p[0]/v$V,v$p[1]=v$p[1]/v$V,v$p[2]=v$p[2]/v$V)},v$n.unprojectFromWVP=function(v$n,v$a,v$U,v$x,v$D){v$na.multiply(v$a,v$U,v$p._tempMatrix4x4),v$x&&v$na.multiply(v$p._tempMatrix4x4,v$x,v$p._tempMatrix4x4),v$p._tempMatrix4x4.invert(v$p._tempMatrix4x4),this.unprojectFromMat(v$n,v$p._tempMatrix4x4,v$D)},v$z(v$p,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new v$na}]),v$p}(),v$Ra=function(){function v$Z(v$n){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=v$n,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}v$q(v$Z,"laya.d3.resource.models.SubMesh");var v$n=v$Z.prototype;return v$Y.imps(v$n,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),v$n._getVertexBuffer=function(v$n){return void 0===v$n&&(v$n=0),0===v$n?this._vertexBuffer:null},v$n._getIndexBuffer=function(){return this._indexBuffer},v$n._getStaticBatchBakedVertexs=function(v$n,v$a){var v$U,v$x,v$D=this._vertexBuffer,v$p=v$D.vertexDeclaration,v$Q=v$p.getVertexElementByUsage(0).offset/4,v$V=v$p.getVertexElementByUsage(3).offset/4,v$y=v$a.meshRender.lightmapScaleOffset,v$R=0,v$X=0,v$z=0,v$i=0,v$q=0,v$E=0;if(v$y)if(v$x=v$p.getVertexElementByUsage(15))v$z=v$p.vertexStride/4,v$U=0<this._vertexCount?v$D.getData().slice(this._vertexStart*v$z,(this._vertexStart+this._vertexCount)*v$z):v$D.getData().slice(),v$i=v$x.offset/4;else{v$z=(v$E=v$p.vertexStride/4)+2,v$U=this._vertexCount?new Float32Array(this._vertexCount*(v$D.vertexDeclaration.vertexStride/4+2)):new Float32Array(v$D.vertexCount*(v$D.vertexDeclaration.vertexStride/4+2)),v$i=(v$q=v$p.getVertexElementByUsage(2).offset/4)+2;var v$m=v$D.getData();for(v$R=0,v$X=v$m.length/v$E;v$R<v$X;v$R++){var v$b=0;v$b=0<this._vertexCount?(this._vertexStart+v$R)*v$E:v$R*v$E;var v$P=v$R*v$z,v$A=0;for(v$A=0;v$A<v$i;v$A++)v$U[v$P+v$A]=v$m[v$b+v$A];for(v$A=v$i;v$A<v$E;v$A++)v$U[v$P+v$A+2]=v$m[v$b+v$A]}}else v$z=v$p.vertexStride/4,v$U=this._vertexCount?v$D.getData().slice(this._vertexStart*v$z,(this._vertexStart+this._vertexCount)*v$z):v$D.getData().slice();if(v$n){var v$T=v$n.worldMatrix,v$K=v$Z._tempMatrix4x40;v$T.invert(v$K);var v$Y=v$Z._tempMatrix4x41,v$W=v$a.transform.worldMatrix;v$na.multiply(v$K,v$W,v$Y)}else v$Y=v$a.transform.worldMatrix;var v$k=v$Z._tempQuaternion0;for(v$Y.decomposeTransRotScale(v$Z._tempVector30,v$k,v$Z._tempVector31),v$R=0,v$X=v$U.length/v$z;v$R<v$X;v$R++){var v$N=v$R*v$z+v$Q,v$_=v$R*v$z+v$V;if(v$ba.transformVector3ArrayToVector3ArrayCoordinate(v$U,v$N,v$Y,v$U,v$N),v$ba.transformVector3ArrayByQuat(v$U,v$_,v$k,v$U,v$_),v$y){var v$$=v$R*v$z+v$i;if(v$x)v$ba.transformLightingMapTexcoordByUV1Array(v$U,v$$,v$y,v$U,v$$);else{var v$M=v$R*v$E+v$q;v$ba.transformLightingMapTexcoordByUV0Array(v$m,v$M,v$y,v$U,v$$)}}}return v$U},v$n._getVertexBuffers=function(){return null},v$n._beforeRender=function(v$n){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},v$n._render=function(v$n){var v$a,v$U=0,v$x=v$n.renderElement;if(1<this._indexCount){var v$D=this._boneIndicesList.length;if(1<v$D){for(var v$p=0;v$p<v$D;v$p++)(v$a=v$x._skinAnimationDatas||this._skinAnimationDatas)&&(v$x._shaderValue.setValue(0,v$a[v$p]),v$n._shader.uploadRenderElementUniforms(v$x._shaderValue.data)),v$u.mainContext.drawElements(4,this._subIndexBufferCount[v$p],5123,2*this._subIndexBufferStart[v$p]);v$N.drawCall+=v$D}else(v$a=v$x._skinAnimationDatas||this._skinAnimationDatas)&&(v$x._shaderValue.setValue(0,v$a[0]),v$n._shader.uploadRenderElementUniforms(v$x._shaderValue.data)),v$u.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),v$N.drawCall++;v$U=this._indexCount}else v$U=this._indexBuffer.indexCount,(v$a=v$x._skinAnimationDatas||this._skinAnimationDatas)&&(v$x._shaderValue.setValue(0,v$a[0]),v$n._shader.uploadRenderElementUniforms(v$x._shaderValue.data)),v$u.mainContext.drawElements(4,v$U,5123,0),v$N.drawCall++;v$N.trianglesFaces+=v$U/3},v$n.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},v$n.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},v$E(0,v$n,"_vertexBufferCount",function(){return 1}),v$E(0,v$n,"triangleCount",function(){return this._indexBuffer.indexCount/3}),v$z(v$Z,["_tempVector30",function(){return this._tempVector30=new v$Qa},"_tempVector31",function(){return this._tempVector31=new v$Qa},"_tempQuaternion0",function(){return this._tempQuaternion0=new v$Ua},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new v$na},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new v$na}]),v$Z}(),v$Xa=function(){function v$n(v$n){this.defineCounter=0,this.defines=null,v$n?(this.defineCounter=v$n.defineCounter,this.defines=v$n.defines.slice()):(this.defineCounter=0,this.defines=[])}return v$q(v$n,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),v$n.prototype.registerDefine=function(v$n){var v$a=Math.pow(2,this.defineCounter++);return this.defines[v$a]=v$n,v$a},v$n}(),v$za=function(){function v$n(){}return v$q(v$n,"laya.d3.shader.ShaderInit3D"),v$n.__init__=function(){var v$n,v$a;v$Na._globalRegDefine("HIGHPRECISION",v$Na.SHADERDEFINE_HIGHPRECISION),v$Na._globalRegDefine("FOG",v$Na.SHADERDEFINE_FOG),v$Na._globalRegDefine("DIRECTIONLIGHT",v$Na.SHADERDEFINE_DIRECTIONLIGHT),v$Na._globalRegDefine("POINTLIGHT",v$Na.SHADERDEFINE_POINTLIGHT),v$Na._globalRegDefine("SPOTLIGHT",v$Na.SHADERDEFINE_SPOTLIGHT),v$Na._globalRegDefine("UV",v$Na.SHADERDEFINE_UV0),v$Na._globalRegDefine("COLOR",v$Na.SHADERDEFINE_COLOR),v$Na._globalRegDefine("UV1",v$Na.SHADERDEFINE_UV1),v$Na._globalRegDefine("CASTSHADOW",v$qa.SHADERDEFINE_CAST_SHADOW),v$Na._globalRegDefine("SHADOWMAP_PSSM1",v$qa.SHADERDEFINE_SHADOW_PSSM1),v$Na._globalRegDefine("SHADOWMAP_PSSM2",v$qa.SHADERDEFINE_SHADOW_PSSM2),v$Na._globalRegDefine("SHADOWMAP_PSSM3",v$qa.SHADERDEFINE_SHADOW_PSSM3),v$Na._globalRegDefine("SHADOWMAP_PCF_NO",v$qa.SHADERDEFINE_SHADOW_PCF_NO),v$Na._globalRegDefine("SHADOWMAP_PCF1",v$qa.SHADERDEFINE_SHADOW_PCF1),v$Na._globalRegDefine("SHADOWMAP_PCF2",v$qa.SHADERDEFINE_SHADOW_PCF2),v$Na._globalRegDefine("SHADOWMAP_PCF3",v$qa.SHADERDEFINE_SHADOW_PCF3),v$Na._globalRegDefine("DEPTHFOG",v$Na.SAHDERDEFINE_DEPTHFOG),v$la.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),v$la.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),v$n={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},v$a={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var v$U=v$la.nameKey.add("SIMPLE");shaderCompile=v$Na.add(v$U,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',v$n,v$a),v$ja.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),v$ja.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),v$ja.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),v$ja.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),v$ja.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),v$ja.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),v$ja.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),v$ja.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),v$ja.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},v$n}(),v$ia=function(){function v$n(){this._data=null,this._data=[]}v$q(v$n,"laya.d3.shader.ValusArray");var v$a=v$n.prototype;return v$a.setValue=function(v$n,v$a){this._data[v$n]=v$a},v$E(0,v$a,"data",function(){return this._data}),v$n}(),v$qa=function(){function v$n(){}return v$n.SHADERDEFINE_RECEIVE_SHADOW=1,v$n.SHADERDEFINE_CAST_SHADOW=512,v$n.SHADERDEFINE_SHADOW_PSSM1=1024,v$n.SHADERDEFINE_SHADOW_PSSM2=2048,v$n.SHADERDEFINE_SHADOW_PSSM3=4096,v$n.SHADERDEFINE_SHADOW_PCF_NO=8192,v$n.SHADERDEFINE_SHADOW_PCF1=16384,v$n.SHADERDEFINE_SHADOW_PCF2=32768,v$n.SHADERDEFINE_SHADOW_PCF3=65536,v$n.MAX_PSSM_COUNT=3,v$n}(),v$Ea=function(){function v$w(){}return v$q(v$w,"laya.d3.utils.Picker"),v$w.calculateCursorRay=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=v$n.elements[0],v$V=v$n.elements[1],v$y=v$w._tempVector30,v$R=v$y.elements;v$R[0]=v$Q,v$R[1]=v$V,v$R[2]=v$a.minDepth;var v$X=v$w._tempVector31,v$z=v$X.elements;v$z[0]=v$Q,v$z[1]=v$V,v$z[2]=v$a.maxDepth;var v$i=v$p.origin,v$q=v$w._tempVector32;v$a.unprojectFromWVP(v$y,v$U,v$x,v$D,v$i),v$a.unprojectFromWVP(v$X,v$U,v$x,v$D,v$q);var v$E=v$p.direction.elements;v$E[0]=v$q.x-v$i.x,v$E[1]=v$q.y-v$i.y,v$E[2]=v$q.z-v$i.z,v$Qa.normalize(v$p.direction,v$p.direction)},v$w.rayIntersectsPositionsAndIndices=function(v$n,v$a,v$U,v$x,v$D){for(var v$p=v$U.vertexStride/4,v$Q=v$U.getVertexElementByUsage(0).offset/4,v$V=Number.MAX_VALUE,v$y=-1,v$R=-1,v$X=-1,v$z=0;v$z<v$x.length;v$z+=3){var v$i=v$w._tempVector35,v$q=v$i.elements,v$E=v$x[v$z]*v$p,v$m=v$E+v$Q;v$q[0]=v$a[v$m],v$q[1]=v$a[1+v$m],v$q[2]=v$a[2+v$m];var v$b=v$w._tempVector36,v$P=v$b.elements,v$A=v$x[v$z+1]*v$p,v$T=v$A+v$Q;v$P[0]=v$a[v$T],v$P[1]=v$a[1+v$T],v$P[2]=v$a[2+v$T];var v$K=v$w._tempVector37,v$Y=v$K.elements,v$W=v$x[v$z+2]*v$p,v$k=v$W+v$Q;v$Y[0]=v$a[v$k],v$Y[1]=v$a[1+v$k],v$Y[2]=v$a[2+v$k];var v$N=laya.d3.utils.Picker.rayIntersectsTriangle(v$n,v$i,v$b,v$K);!isNaN(v$N)&&v$N<v$V&&(v$V=v$N,v$y=v$E,v$R=v$A,v$X=v$W)}if(v$V===Number.MAX_VALUE)return v$D.position.toDefault(),v$D.distance=Number.MAX_VALUE,v$D.trianglePositions[0].toDefault(),v$D.trianglePositions[1].toDefault(),v$D.trianglePositions[2].toDefault(),v$D.triangleNormals[0].toDefault(),v$D.triangleNormals[1].toDefault(),v$D.triangleNormals[2].toDefault(),!1;v$D.distance=v$V,v$Qa.scale(v$n.direction,v$V,v$D.position),v$Qa.add(v$n.origin,v$D.position,v$D.position);var v$_=v$D.trianglePositions,v$$=v$_[0],v$M=v$_[1],v$Z=v$_[2],v$u=v$$.elements,v$c=v$M.elements,v$H=v$Z.elements,v$G=v$y+v$Q;v$u[0]=v$a[v$G],v$u[1]=v$a[v$G+1],v$u[2]=v$a[v$G+2];var v$I=v$R+v$Q;v$c[0]=v$a[v$I],v$c[1]=v$a[v$I+1],v$c[2]=v$a[v$I+2];var v$v=v$X+v$Q;v$H[0]=v$a[v$v],v$H[1]=v$a[v$v+1],v$H[2]=v$a[v$v+2];var v$l=v$U.getVertexElementByUsage(3);if(v$l){var v$j=v$l.offset/4,v$h=v$D.triangleNormals,v$f=v$h[0],v$F=v$h[1],v$g=v$h[2],v$o=v$f.elements,v$B=v$F.elements,v$O=v$g.elements,v$L=v$y+v$j;v$o[0]=v$a[v$L],v$o[1]=v$a[v$L+1],v$o[2]=v$a[v$L+2];var v$d=v$R+v$j;v$B[0]=v$a[v$d],v$B[1]=v$a[v$d+1],v$B[2]=v$a[v$d+2];var v$S=v$X+v$j;v$O[0]=v$a[v$S],v$O[1]=v$a[v$S+1],v$O[2]=v$a[v$S+2]}return!0},v$w.rayIntersectsTriangle=function(v$n,v$a,v$U,v$x){var v$D=v$w._tempVector30,v$p=v$w._tempVector31;v$Qa.subtract(v$U,v$a,v$D),v$Qa.subtract(v$x,v$a,v$p);var v$Q,v$V=v$w._tempVector32;if(v$Qa.cross(v$n.direction,v$p,v$V),(v$Q=v$Qa.dot(v$D,v$V))>-Number.MIN_VALUE&&v$Q<Number.MIN_VALUE)return Number.NaN;var v$y,v$R=1/v$Q,v$X=v$w._tempVector33;if(v$Qa.subtract(v$n.origin,v$a,v$X),v$y=v$Qa.dot(v$X,v$V),(v$y*=v$R)<0||1<v$y)return Number.NaN;var v$z,v$i,v$q=v$w._tempVector34;return v$Qa.cross(v$X,v$D,v$q),v$z=v$Qa.dot(v$n.direction,v$q),(v$z*=v$R)<0||1<v$y+v$z?Number.NaN:(v$i=v$Qa.dot(v$p,v$q),(v$i*=v$R)<0?Number.NaN:v$i)},v$z(v$w,["_tempVector30",function(){return this._tempVector30=new v$Qa},"_tempVector31",function(){return this._tempVector31=new v$Qa},"_tempVector32",function(){return this._tempVector32=new v$Qa},"_tempVector33",function(){return this._tempVector33=new v$Qa},"_tempVector34",function(){return this._tempVector34=new v$Qa},"_tempVector35",function(){return this._tempVector35=new v$Qa},"_tempVector36",function(){return this._tempVector36=new v$Qa},"_tempVector37",function(){return this._tempVector37=new v$Qa}]),v$w}(),v$ma=(function(){function v$n(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new v$Qa,new v$Qa,new v$Qa],this.trianglePositions.length=3,this.triangleNormals=[new v$Qa,new v$Qa,new v$Qa],this.triangleNormals.length=3,this.position=new v$Qa}v$q(v$n,"laya.d3.utils.RaycastHit"),v$n.prototype.cloneTo=function(v$n){v$n.distance=this.distance,this.trianglePositions[0].cloneTo(v$n.trianglePositions[0]),this.trianglePositions[1].cloneTo(v$n.trianglePositions[1]),this.trianglePositions[2].cloneTo(v$n.trianglePositions[2]),this.triangleNormals[0].cloneTo(v$n.triangleNormals[0]),this.triangleNormals[1].cloneTo(v$n.triangleNormals[1]),this.triangleNormals[2].cloneTo(v$n.triangleNormals[2]),this.position.cloneTo(v$n.position),v$n.sprite3D=this.sprite3D}}(),function(){function v$n(v$n,v$a){this._width=0,this._height=0,this._width=v$n,this._height=v$a}v$q(v$n,"laya.d3.utils.Size");var v$a=v$n.prototype;return v$E(0,v$a,"width",function(){return-1===this._width?v$s.clientWidth:this._width}),v$E(0,v$a,"height",function(){return-1===this._height?v$s.clientHeight:this._height}),v$E(1,v$n,"fullScreen",function(){return new v$n(-1,-1)}),v$n}()),v$ba=function(){function v$G(){}return v$q(v$G,"laya.d3.utils.Utils3D"),v$G._rotationTransformScaleSkinAnimation=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$z){var v$i,v$q,v$E,v$m,v$b,v$P=v$G._tempArray16_0,v$A=v$G._tempArray16_1,v$T=v$G._tempArray16_2,v$K=v$x+v$x,v$Y=v$D+v$D,v$W=v$p+v$p,v$k=v$x*v$K,v$N=v$D*v$K,v$_=v$D*v$Y,v$$=v$p*v$K,v$M=v$p*v$Y,v$Z=v$p*v$W,v$u=v$Q*v$K,v$c=v$Q*v$Y,v$H=v$Q*v$W;for(v$P[15]=1,v$P[0]=1-v$_-v$Z,v$P[1]=v$N+v$H,v$P[2]=v$$-v$c,v$P[4]=v$N-v$H,v$P[5]=1-v$k-v$Z,v$P[6]=v$M+v$u,v$P[8]=v$$+v$c,v$P[9]=v$M-v$u,v$P[10]=1-v$k-v$_,v$A[15]=1,v$A[0]=v$V,v$A[5]=v$y,v$A[10]=v$R,v$i=0;v$i<4;v$i++)v$q=v$P[v$i],v$E=v$P[v$i+4],v$m=v$P[v$i+8],v$b=v$P[v$i+12],v$T[v$i]=v$q,v$T[v$i+4]=v$E,v$T[v$i+8]=v$m,v$T[v$i+12]=v$q*v$n+v$E*v$a+v$m*v$U+v$b;for(v$i=0;v$i<4;v$i++)v$q=v$T[v$i],v$E=v$T[v$i+4],v$m=v$T[v$i+8],v$b=v$T[v$i+12],v$X[v$i+v$z]=v$q*v$A[0]+v$E*v$A[1]+v$m*v$A[2]+v$b*v$A[3],v$X[v$i+v$z+4]=v$q*v$A[4]+v$E*v$A[5]+v$m*v$A[6]+v$b*v$A[7],v$X[v$i+v$z+8]=v$q*v$A[8]+v$E*v$A[9]+v$m*v$A[10]+v$b*v$A[11],v$X[v$i+v$z+12]=v$q*v$A[12]+v$E*v$A[13]+v$m*v$A[14]+v$b*v$A[15]},v$G._createNodeByJson=function(v$n,v$a,v$U,v$x){if(!v$U)switch(v$a.type){case"Sprite3D":v$U=new v$va;break;case"MeshSprite3D":v$U=new v$wa;break;case"SkinnedMeshSprite3D":v$U=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":v$U=new ShuriKenParticle3D;break;case"TrailSprite3D":v$U=new TrailSprite3D;break;case"Terrain":v$U=new Terrain;break;case"Camera":v$U=new v$Sa;break;case"DirectionLight":v$U=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var v$D=v$a.props;if(v$D)for(var v$p in v$D)v$U[v$p]=v$D[v$p];var v$Q=v$a.customProps;v$Q&&(v$U instanceof laya.d3.core.Sprite3D?(v$U._parseBaseCustomProps(v$Q),v$U._parseCustomProps(v$n,v$x,v$Q,v$a),v$U._parseCustomComponent(v$n,v$x,v$a.components)):v$U._parseCustomProps(v$n,v$x,v$Q,v$a));var v$V=v$a.child;if(v$V)for(var v$y=0,v$R=v$V.length;v$y<v$R;v$y++){var v$X=v$G._createNodeByJson(v$n,v$V[v$y],null,v$x);v$U.addChild(v$X)}return v$U},v$G._computeBoneAndAnimationDatasByBindPoseMatrxix=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q,v$V,v$y=0,v$R=0,v$X=v$n.length;for(v$Q=0;v$Q<v$X;v$y+=v$n[v$Q].keyframeWidth,v$R+=16,v$Q++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(v$a[v$y+0],v$a[v$y+1],v$a[v$y+2],v$a[v$y+3],v$a[v$y+4],v$a[v$y+5],v$a[v$y+6],v$a[v$y+7],v$a[v$y+8],v$a[v$y+9],v$x,v$R),0!=v$Q&&(v$V=16*v$n[v$Q].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(v$x,v$V,v$x,v$R,v$x,v$R));var v$z=v$U.length;for(v$Q=0;v$Q<v$z;v$Q++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(v$x,16*v$p[v$Q],v$U[v$Q],v$D,16*v$Q)},v$G._computeAnimationDatasByArrayAndMatrixFast=function(v$n,v$a,v$U,v$x){for(var v$D=0,v$p=v$n.length;v$D<v$p;v$D++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(v$a,16*v$x[v$D],v$n[v$D],v$U,16*v$D)},v$G._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(v$n,v$a,v$U,v$x,v$D){var v$p,v$Q,v$V=0,v$y=0,v$R=v$n.length;for(v$p=0;v$p<v$R;v$V+=v$n[v$p].keyframeWidth,v$y+=16,v$p++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(v$a[v$V+7],v$a[v$V+8],v$a[v$V+9],v$a[v$V+3],v$a[v$V+4],v$a[v$V+5],v$a[v$V+6],v$a[v$V+0],v$a[v$V+1],v$a[v$V+2],v$x,v$y),0!=v$p&&(v$Q=16*v$n[v$p].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(v$x,v$Q,v$x,v$y,v$x,v$y));var v$X=v$U.length;for(v$p=0;v$p<v$X;v$p++){var v$z=16*v$p;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(v$x,v$z,v$U[v$p],v$D,v$z)}},v$G._computeAnimationDatasByArrayAndMatrixFastOld=function(v$n,v$a,v$U){for(var v$x=v$n.length,v$D=0;v$D<v$x;v$D++){var v$p=16*v$D;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(v$a,v$p,v$n[v$D],v$U,v$p)}},v$G._computeRootAnimationData=function(v$n,v$a,v$U){for(var v$x=0,v$D=0,v$p=0,v$Q=v$n.length;v$x<v$Q;v$D+=v$n[v$x].keyframeWidth,v$p+=16,v$x++)laya.d3.utils.Utils3D.createAffineTransformationArray(v$a[v$D+0],v$a[v$D+1],v$a[v$D+2],v$a[v$D+3],v$a[v$D+4],v$a[v$D+5],v$a[v$D+6],v$a[v$D+7],v$a[v$D+8],v$a[v$D+9],v$U,v$p)},v$G.transformVector3ArrayByQuat=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$U.elements,v$Q=v$n[v$a],v$V=v$n[v$a+1],v$y=v$n[v$a+2],v$R=v$p[0],v$X=v$p[1],v$z=v$p[2],v$i=v$p[3],v$q=v$i*v$Q+v$X*v$y-v$z*v$V,v$E=v$i*v$V+v$z*v$Q-v$R*v$y,v$m=v$i*v$y+v$R*v$V-v$X*v$Q,v$b=-v$R*v$Q-v$X*v$V-v$z*v$y;v$x[v$D]=v$q*v$i+v$b*-v$R+v$E*-v$z-v$m*-v$X,v$x[v$D+1]=v$E*v$i+v$b*-v$X+v$m*-v$R-v$q*-v$z,v$x[v$D+2]=v$m*v$i+v$b*-v$z+v$q*-v$X-v$E*-v$R},v$G.mulMatrixByArray=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q,v$V,v$y,v$R,v$X;if(v$D===v$U){for(v$U=v$G._tempArray16_3,v$Q=0;v$Q<16;++v$Q)v$U[v$Q]=v$D[v$p+v$Q];v$x=0}for(v$Q=0;v$Q<4;v$Q++)v$V=v$n[v$a+v$Q],v$y=v$n[v$a+v$Q+4],v$R=v$n[v$a+v$Q+8],v$X=v$n[v$a+v$Q+12],v$D[v$p+v$Q]=v$V*v$U[v$x+0]+v$y*v$U[v$x+1]+v$R*v$U[v$x+2]+v$X*v$U[v$x+3],v$D[v$p+v$Q+4]=v$V*v$U[v$x+4]+v$y*v$U[v$x+5]+v$R*v$U[v$x+6]+v$X*v$U[v$x+7],v$D[v$p+v$Q+8]=v$V*v$U[v$x+8]+v$y*v$U[v$x+9]+v$R*v$U[v$x+10]+v$X*v$U[v$x+11],v$D[v$p+v$Q+12]=v$V*v$U[v$x+12]+v$y*v$U[v$x+13]+v$R*v$U[v$x+14]+v$X*v$U[v$x+15]},v$G.mulMatrixByArrayFast=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q,v$V,v$y,v$R,v$X;for(v$Q=0;v$Q<4;v$Q++)v$V=v$n[v$a+v$Q],v$y=v$n[v$a+v$Q+4],v$R=v$n[v$a+v$Q+8],v$X=v$n[v$a+v$Q+12],v$D[v$p+v$Q]=v$V*v$U[v$x+0]+v$y*v$U[v$x+1]+v$R*v$U[v$x+2]+v$X*v$U[v$x+3],v$D[v$p+v$Q+4]=v$V*v$U[v$x+4]+v$y*v$U[v$x+5]+v$R*v$U[v$x+6]+v$X*v$U[v$x+7],v$D[v$p+v$Q+8]=v$V*v$U[v$x+8]+v$y*v$U[v$x+9]+v$R*v$U[v$x+10]+v$X*v$U[v$x+11],v$D[v$p+v$Q+12]=v$V*v$U[v$x+12]+v$y*v$U[v$x+13]+v$R*v$U[v$x+14]+v$X*v$U[v$x+15]},v$G.mulMatrixByArrayAndMatrixFast=function(v$n,v$a,v$U,v$x,v$D){var v$p,v$Q,v$V,v$y,v$R,v$X=v$U.elements,v$z=v$X[0],v$i=v$X[1],v$q=v$X[2],v$E=v$X[3],v$m=v$X[4],v$b=v$X[5],v$P=v$X[6],v$A=v$X[7],v$T=v$X[8],v$K=v$X[9],v$Y=v$X[10],v$W=v$X[11],v$k=v$X[12],v$N=v$X[13],v$_=v$X[14],v$$=v$X[15],v$M=v$a,v$Z=v$a+4,v$u=v$a+8,v$c=v$a+12,v$H=v$D,v$G=v$D+4,v$I=v$D+8,v$v=v$D+12;for(v$p=0;v$p<4;v$p++)v$Q=v$n[v$M+v$p],v$V=v$n[v$Z+v$p],v$y=v$n[v$u+v$p],v$R=v$n[v$c+v$p],v$x[v$H+v$p]=v$Q*v$z+v$V*v$i+v$y*v$q+v$R*v$E,v$x[v$G+v$p]=v$Q*v$m+v$V*v$b+v$y*v$P+v$R*v$A,v$x[v$I+v$p]=v$Q*v$T+v$V*v$K+v$y*v$Y+v$R*v$W,v$x[v$v+v$p]=v$Q*v$k+v$V*v$N+v$y*v$_+v$R*v$$},v$G.createAffineTransformationArray=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$z){var v$i=v$x+v$x,v$q=v$D+v$D,v$E=v$p+v$p,v$m=v$x*v$i,v$b=v$x*v$q,v$P=v$x*v$E,v$A=v$D*v$q,v$T=v$D*v$E,v$K=v$p*v$E,v$Y=v$Q*v$i,v$W=v$Q*v$q,v$k=v$Q*v$E;v$X[v$z+0]=(1-(v$A+v$K))*v$V,v$X[v$z+1]=(v$b+v$k)*v$V,v$X[v$z+2]=(v$P-v$W)*v$V,v$X[v$z+3]=0,v$X[v$z+4]=(v$b-v$k)*v$y,v$X[v$z+5]=(1-(v$m+v$K))*v$y,v$X[v$z+6]=(v$T+v$Y)*v$y,v$X[v$z+7]=0,v$X[v$z+8]=(v$P+v$W)*v$R,v$X[v$z+9]=(v$T-v$Y)*v$R,v$X[v$z+10]=(1-(v$m+v$A))*v$R,v$X[v$z+11]=0,v$X[v$z+12]=v$n,v$X[v$z+13]=v$a,v$X[v$z+14]=v$U,v$X[v$z+15]=1},v$G.transformVector3ArrayToVector3ArrayCoordinate=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$G._tempArray4_0,v$Q=v$n[v$a+0],v$V=v$n[v$a+1],v$y=v$n[v$a+2],v$R=v$U.elements;v$p[0]=v$Q*v$R[0]+v$V*v$R[4]+v$y*v$R[8]+v$R[12],v$p[1]=v$Q*v$R[1]+v$V*v$R[5]+v$y*v$R[9]+v$R[13],v$p[2]=v$Q*v$R[2]+v$V*v$R[6]+v$y*v$R[10]+v$R[14],v$p[3]=1/(v$Q*v$R[3]+v$V*v$R[7]+v$y*v$R[11]+v$R[15]),v$x[v$D+0]=v$p[0]*v$p[3],v$x[v$D+1]=v$p[1]*v$p[3],v$x[v$D+2]=v$p[2]*v$p[3]},v$G.transformLightingMapTexcoordByUV0Array=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$U.elements;v$x[v$D+0]=v$n[v$a+0]*v$p[0]+v$p[2],v$x[v$D+1]=(v$n[v$a+1]-1)*v$p[1]+v$p[3]},v$G.transformLightingMapTexcoordByUV1Array=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$U.elements;v$x[v$D+0]=v$n[v$a+0]*v$p[0]+v$p[2],v$x[v$D+1]=1+v$n[v$a+1]*v$p[1]+v$p[3]},v$G.getURLVerion=function(v$n){var v$a=v$n.indexOf("?");return 0<=v$a?v$n.substr(v$a):null},v$G._quaternionCreateFromYawPitchRollArray=function(v$n,v$a,v$U,v$x){var v$D=.5*v$U,v$p=.5*v$a,v$Q=.5*v$n,v$V=Math.sin(v$D),v$y=Math.cos(v$D),v$R=Math.sin(v$p),v$X=Math.cos(v$p),v$z=Math.sin(v$Q),v$i=Math.cos(v$Q);v$x[0]=v$i*v$R*v$y+v$z*v$X*v$V,v$x[1]=v$z*v$X*v$y-v$i*v$R*v$V,v$x[2]=v$i*v$X*v$V-v$z*v$R*v$y,v$x[3]=v$i*v$X*v$y+v$z*v$R*v$V},v$G._createAffineTransformationArray=function(v$n,v$a,v$U,v$x){var v$D=v$a[0],v$p=v$a[1],v$Q=v$a[2],v$V=v$a[3],v$y=v$D+v$D,v$R=v$p+v$p,v$X=v$Q+v$Q,v$z=v$D*v$y,v$i=v$D*v$R,v$q=v$D*v$X,v$E=v$p*v$R,v$m=v$p*v$X,v$b=v$Q*v$X,v$P=v$V*v$y,v$A=v$V*v$R,v$T=v$V*v$X,v$K=v$U[0],v$Y=v$U[1],v$W=v$U[2];v$x[0]=(1-(v$E+v$b))*v$K,v$x[1]=(v$i+v$T)*v$K,v$x[2]=(v$q-v$A)*v$K,v$x[3]=0,v$x[4]=(v$i-v$T)*v$Y,v$x[5]=(1-(v$z+v$b))*v$Y,v$x[6]=(v$m+v$P)*v$Y,v$x[7]=0,v$x[8]=(v$q+v$A)*v$W,v$x[9]=(v$m-v$P)*v$W,v$x[10]=(1-(v$z+v$E))*v$W,v$x[11]=0,v$x[12]=v$n[0],v$x[13]=v$n[1],v$x[14]=v$n[2],v$x[15]=1},v$G._mulMatrixArray=function(v$n,v$a,v$U,v$x){var v$D,v$p,v$Q,v$V,v$y,v$R=v$a.elements,v$X=v$R[0],v$z=v$R[1],v$i=v$R[2],v$q=v$R[3],v$E=v$R[4],v$m=v$R[5],v$b=v$R[6],v$P=v$R[7],v$A=v$R[8],v$T=v$R[9],v$K=v$R[10],v$Y=v$R[11],v$W=v$R[12],v$k=v$R[13],v$N=v$R[14],v$_=v$R[15],v$$=v$x,v$M=v$x+4,v$Z=v$x+8,v$u=v$x+12;for(v$D=0;v$D<4;v$D++)v$p=v$n[v$D],v$Q=v$n[v$D+4],v$V=v$n[v$D+8],v$y=v$n[v$D+12],v$U[v$$+v$D]=v$p*v$X+v$Q*v$z+v$V*v$i+v$y*v$q,v$U[v$M+v$D]=v$p*v$E+v$Q*v$m+v$V*v$b+v$y*v$P,v$U[v$Z+v$D]=v$p*v$A+v$Q*v$T+v$V*v$K+v$y*v$Y,v$U[v$u+v$D]=v$p*v$W+v$Q*v$k+v$V*v$N+v$y*v$_},v$G.getYawPitchRoll=function(v$n,v$a){v$G.transformQuat(v$Qa.ForwardRH,v$n,v$Ua.TEMPVector31),v$G.transformQuat(v$Qa.Up,v$n,v$Ua.TEMPVector32);var v$U=v$Ua.TEMPVector32.elements;v$G.angleTo(v$Qa.ZERO,v$Ua.TEMPVector31,v$Ua.TEMPVector33);var v$x=v$Ua.TEMPVector33.elements;v$x[0]==Math.PI/2?(v$x[1]=v$G.arcTanAngle(v$U[2],v$U[0]),v$x[2]=0):v$x[0]==-Math.PI/2?(v$x[1]=v$G.arcTanAngle(-v$U[2],-v$U[0]),v$x[2]=0):(v$na.createRotationY(-v$x[1],v$Ua.TEMPMatrix0),v$na.createRotationX(-v$x[0],v$Ua.TEMPMatrix1),v$Qa.transformCoordinate(v$Ua.TEMPVector32,v$Ua.TEMPMatrix0,v$Ua.TEMPVector32),v$Qa.transformCoordinate(v$Ua.TEMPVector32,v$Ua.TEMPMatrix1,v$Ua.TEMPVector32),v$x[2]=v$G.arcTanAngle(v$U[1],-v$U[0])),v$x[1]<=-Math.PI&&(v$x[1]=Math.PI),v$x[2]<=-Math.PI&&(v$x[2]=Math.PI),v$x[1]>=Math.PI&&v$x[2]>=Math.PI&&(v$x[1]=0,v$x[2]=0,v$x[0]=Math.PI-v$x[0]),v$a[0]=v$x[1],v$a[1]=v$x[0],v$a[2]=v$x[2]},v$G.arcTanAngle=function(v$n,v$a){return 0==v$n?1==v$a?Math.PI/2:-Math.PI/2:0<v$n?Math.atan(v$a/v$n):v$n<0?0<v$a?Math.atan(v$a/v$n)+Math.PI:Math.atan(v$a/v$n)-Math.PI:0},v$G.angleTo=function(v$n,v$a,v$U){v$Qa.subtract(v$a,v$n,v$Ua.TEMPVector30),v$Qa.normalize(v$Ua.TEMPVector30,v$Ua.TEMPVector30),v$U.elements[0]=Math.asin(v$Ua.TEMPVector30.y),v$U.elements[1]=v$G.arcTanAngle(-v$Ua.TEMPVector30.z,-v$Ua.TEMPVector30.x)},v$G.transformQuat=function(v$n,v$a,v$U){var v$x=v$U.elements,v$D=v$n.elements,v$p=v$a,v$Q=v$D[0],v$V=v$D[1],v$y=v$D[2],v$R=v$p[0],v$X=v$p[1],v$z=v$p[2],v$i=v$p[3],v$q=v$i*v$Q+v$X*v$y-v$z*v$V,v$E=v$i*v$V+v$z*v$Q-v$R*v$y,v$m=v$i*v$y+v$R*v$V-v$X*v$Q,v$b=-v$R*v$Q-v$X*v$V-v$z*v$y;v$x[0]=v$q*v$i+v$b*-v$R+v$E*-v$z-v$m*-v$X,v$x[1]=v$E*v$i+v$b*-v$X+v$m*-v$R-v$q*-v$z,v$x[2]=v$m*v$i+v$b*-v$z+v$q*-v$X-v$E*-v$R},v$G.quaterionNormalize=function(v$n,v$a){var v$U=v$n[0],v$x=v$n[1],v$D=v$n[2],v$p=v$n[3],v$Q=v$U*v$U+v$x*v$x+v$D*v$D+v$p*v$p;0<v$Q&&(v$Q=1/Math.sqrt(v$Q),v$a[0]=v$U*v$Q,v$a[1]=v$x*v$Q,v$a[2]=v$D*v$Q,v$a[3]=v$p*v$Q)},v$G.matrix4x4MultiplyFFF=function(v$n,v$a,v$U){var v$x,v$D,v$p,v$Q,v$V;if(v$U===v$a)for(v$a=new Float32Array(16),v$x=0;v$x<16;++v$x)v$a[v$x]=v$U[v$x];for(v$x=0;v$x<4;v$x++)v$D=v$n[v$x],v$p=v$n[v$x+4],v$Q=v$n[v$x+8],v$V=v$n[v$x+12],v$U[v$x]=v$D*v$a[0]+v$p*v$a[1]+v$Q*v$a[2]+v$V*v$a[3],v$U[v$x+4]=v$D*v$a[4]+v$p*v$a[5]+v$Q*v$a[6]+v$V*v$a[7],v$U[v$x+8]=v$D*v$a[8]+v$p*v$a[9]+v$Q*v$a[10]+v$V*v$a[11],v$U[v$x+12]=v$D*v$a[12]+v$p*v$a[13]+v$Q*v$a[14]+v$V*v$a[15]},v$G.matrix4x4MultiplyMFM=function(v$n,v$a,v$U){v$G.matrix4x4MultiplyFFF(v$n.elements,v$a,v$U.elements)},v$z(v$G,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new v$Qa},"_tempVector3_1",function(){return this._tempVector3_1=new v$Qa},"_tempVector3_2",function(){return this._tempVector3_2=new v$Qa},"_tempVector3_3",function(){return this._tempVector3_3=new v$Qa},"_tempVector3_4",function(){return this._tempVector3_4=new v$Qa},"_tempVector3_5",function(){return this._tempVector3_5=new v$Qa},"_tempVector3_6",function(){return this._tempVector3_6=new v$Qa},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),v$G}(),v$Pa=function(){function v$c(){}return v$q(v$c,"Laya3D"),v$c._cancelLoadByUrl=function(v$n){v$Y.loader.cancelLoadByUrl(v$n),v$c._innerFirstLevelLoaderManager.cancelLoadByUrl(v$n),v$c._innerSecondLevelLoaderManager.cancelLoadByUrl(v$n),v$c._innerThirdLevelLoaderManager.cancelLoadByUrl(v$n),v$c._innerFourthLevelLoaderManager.cancelLoadByUrl(v$n)},v$c._changeWebGLSize=function(v$n,v$a){v$u.onStageResize(v$n,v$a),v$s.clientWidth=v$n,v$s.clientHeight=v$a},v$c.__init__=function(){var v$n=v$a.createMap;v$n.lh=[v$va,"SPRITE3DHIERARCHY"],v$n.ls=[v$Ia,"SPRITE3DHIERARCHY"],v$n.lm=[v$oa,"MESH"],v$n.lmat=[v$ja,"MATERIAL"],v$n.jpg=[v$Oa,"nativeimage"],v$n.jpeg=[v$Oa,"nativeimage"],v$n.png=[v$Oa,"nativeimage"],v$n.pkm=[v$Oa,"arraybuffer"],v$n.raw=[v$Fa,"arraybuffer"],v$n.mipmaps=[v$Fa,"arraybuffer"],v$P.parserMap.SPRITE3DHIERARCHY=v$c._loadHierarchy,v$P.parserMap.MESH=v$c._loadMesh,v$P.parserMap.MATERIAL=v$c._loadMaterial,v$P.parserMap.TEXTURECUBE=v$c._loadTextureCube,v$P.parserMap.TERRAIN=v$c._loadTerrain,v$c._innerFirstLevelLoaderManager.on("error",null,v$c._eventLoadManagerError),v$c._innerSecondLevelLoaderManager.on("error",null,v$c._eventLoadManagerError),v$c._innerThirdLevelLoaderManager.on("error",null,v$c._eventLoadManagerError),v$c._innerFourthLevelLoaderManager.on("error",null,v$c._eventLoadManagerError)},v$c.READ_BLOCK=function(){return v$c._readData.pos+=4,!0},v$c.READ_DATA=function(){return v$c._DATA.offset=v$c._readData.getUint32(),v$c._DATA.size=v$c._readData.getUint32(),!0},v$c.READ_STRINGS=function(){var v$n=[],v$a={offset:0,size:0};v$a.offset=v$c._readData.getUint16(),v$a.size=v$c._readData.getUint16();v$c._readData.pos;v$c._readData.pos=v$a.offset+v$c._DATA.offset;for(var v$U=0;v$U<v$a.size;v$U++){var v$x=v$c._readData.readUTFString();-1===v$x.lastIndexOf(".lmat")&&-1===v$x.lastIndexOf(".lpbr")||v$n.push(v$x)}return v$n},v$c.formatRelativePath=function(v$n,v$a){var v$U;if("."===v$a.charAt(0)){for(var v$x=(v$n+v$a).split("/"),v$D=0,v$p=v$x.length;v$D<v$p;v$D++)if(".."==v$x[v$D]){var v$Q=v$D-1;0<v$Q&&".."!==v$x[v$Q]&&(v$x.splice(v$Q,2),v$D-=2)}v$U=v$x.join("/")}else v$U=v$n+v$a;return null!=v$Z.customFormat&&(v$U=v$Z.customFormat(v$U,null)),v$U},v$c._eventLoadManagerError=function(v$n){v$Y.loader.event("error",v$n)},v$c._addHierarchyInnerUrls=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q=v$c.formatRelativePath(v$x,v$D);v$U&&(v$Q+=v$U),v$n.push({url:v$Q,clas:v$p}),v$a[v$D]=v$Q},v$c._getSprite3DHierarchyInnerUrls=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){var v$V,v$y=0,v$R=0;switch(v$n.type){case"Scene":var v$X=v$n.customProps.lightmaps;for(v$y=0,v$R=v$X.length;v$y<v$R;v$y++){var v$z=v$X[v$y].replace(".exr",".png");v$c._addHierarchyInnerUrls(v$x,v$D,v$p,v$Q,v$z,v$Oa)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var v$i;if(v$n.instanceParams)(v$i=v$n.instanceParams.loadPath)&&v$c._addHierarchyInnerUrls(v$a,v$D,v$p,v$Q,v$i,v$oa);else{(v$i=(v$V=v$n.customProps).meshPath)&&v$c._addHierarchyInnerUrls(v$a,v$D,v$p,v$Q,v$i,v$oa);var v$q=v$V.materials;if(v$q)for(v$y=0,v$R=v$q.length;v$y<v$R;v$y++){for(var v$E=v$q[v$y],v$m=v$E.type.split("."),v$b=v$H.window,v$P=0,v$A=v$m.length;v$P<v$A;++v$P){v$b=v$b[this.clasPaths[v$P]]}if("function"!=typeof v$b)throw"_getSprite3DHierarchyInnerUrls 错误: "+v$E.type+" 不是类";v$c._addHierarchyInnerUrls(v$U,v$D,v$p,v$Q,v$E.path,v$b)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var v$T=(v$V=v$n.customProps).meshPath;v$T&&v$c._addHierarchyInnerUrls(v$a,v$D,v$p,v$Q,v$T,v$oa);var v$K=v$V.material;if(v$K){v$m=v$K.type.split("."),v$b=v$H.window;for(v$P=0,v$A=v$m.length;v$P<v$A;++v$P){v$b=v$b[this.clasPaths[v$P]]}v$c._addHierarchyInnerUrls(v$U,v$D,v$p,v$Q,v$K.path,v$b)}else{var v$Y=v$V.materialPath;if(v$Y)v$c._addHierarchyInnerUrls(v$U,v$D,v$p,v$Q,v$Y,ShurikenParticleMaterial);else{var v$W=v$V.texturePath;v$W&&v$c._addHierarchyInnerUrls(v$x,v$D,v$p,v$Q,v$W,v$Oa)}}break;case"Terrain":v$c._addHierarchyInnerUrls(v$x,v$D,v$p,v$Q,v$n.customProps.dataPath,TerrainRes)}var v$k=v$n.components;for(var v$N in v$k){var v$_=v$k[v$N];switch(v$N){case"Animator":var v$$=v$_.avatarPath;if(v$$)v$c._addHierarchyInnerUrls(v$x,v$D,v$p,v$Q,v$$,Avatar);else{var v$M=v$_.avatar;v$M&&v$c._addHierarchyInnerUrls(v$x,v$D,v$p,v$Q,v$M.path,Avatar)}var v$Z=v$_.clipPaths;for(v$y=0,v$R=v$Z.length;v$y<v$R;v$y++)v$c._addHierarchyInnerUrls(v$x,v$D,v$p,v$Q,v$Z[v$y],AnimationClip)}}var v$u=v$n.child;for(v$y=0,v$R=v$u.length;v$y<v$R;v$y++)v$c._getSprite3DHierarchyInnerUrls(v$u[v$y],v$a,v$U,v$x,v$D,v$p,v$Q)},v$c._loadHierarchy=function(v$n){v$n.on("loaded",null,v$c._onHierarchylhLoaded,[v$n,v$n._class._getGroup()]),v$n.load(v$n.url,"json",!1,null,!0)},v$c._onHierarchylhLoaded=function(v$n,v$a,v$U){if(v$n._class.destroyed)v$n.endLoad();else{var v$x=v$n.url,v$D=v$ba.getURLVerion(v$x),v$p=v$Z.getPath(v$x),v$Q=[],v$V=[],v$y=[],v$R={};v$c._getSprite3DHierarchyInnerUrls(v$U,v$Q,v$V,v$y,v$R,v$D,v$p);var v$X=v$Q.length+v$V.length+v$y.length,v$z=v$X+1,v$i=1/v$z;if(v$c._onProcessChange(v$n,0,v$i,1),0<v$y.length){var v$q=v$X/v$z,v$E=v$M.create(null,v$c._onProcessChange,[v$n,v$i,v$q],!1);v$c._innerFourthLevelLoaderManager.create(v$y,v$M.create(null,v$c._onHierarchyInnerForthLevResouLoaded,[v$n,v$a,v$E,v$U,v$R,v$Q,v$V,v$i+v$q*v$y.length,v$q]),v$E,null,null,1,!0,v$a)}else v$c._onHierarchyInnerForthLevResouLoaded(v$n,v$a,null,v$U,v$R,v$Q,v$V,v$i,v$q)}},v$c._onHierarchyInnerForthLevResouLoaded=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){if(v$n._class.destroyed)v$n.endLoad();else if(v$U&&v$U.recover(),0<v$Q.length){var v$R=v$M.create(null,v$c._onProcessChange,[v$n,v$V,v$y],!1);v$c._innerSecondLevelLoaderManager.create(v$Q,v$M.create(null,v$c._onHierarchyInnerSecondLevResouLoaded,[v$n,v$a,v$R,v$x,v$D,v$p,v$V+v$y*v$Q.length,v$y]),v$U,null,null,1,!0,v$a)}else v$c._onHierarchyInnerSecondLevResouLoaded(v$n,v$a,null,v$x,v$D,v$p,v$V,v$y)},v$c._onHierarchyInnerSecondLevResouLoaded=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V){if(v$n._class.destroyed)v$n.endLoad();else if(v$U&&v$U.recover(),0<v$p.length){var v$y=v$M.create(null,v$c._onProcessChange,[v$n,v$Q,v$V],!1);v$c._innerFirstLevelLoaderManager.create(v$p,v$M.create(null,v$c._onHierarchyInnerFirstLevResouLoaded,[v$n,v$y,v$x,v$D]),v$U,null,null,1,!0,v$a)}else v$c._onHierarchyInnerFirstLevResouLoaded(v$n,null,v$x,v$D)},v$c._onHierarchyInnerFirstLevResouLoaded=function(v$n,v$a,v$U,v$x){v$a&&v$a.recover(),v$n.endLoad([v$U,v$x])},v$c._loadTerrain=function(v$n){v$n.on("loaded",null,v$c._onTerrainLtLoaded,[v$n,v$n._class._getGroup()]),v$n.load(v$n.url,"json",!1,null,!0)},v$c._onTerrainLtLoaded=function(v$n,v$a,v$U){if(v$n._class.destroyed)v$n.endLoad();else{var v$x,v$D,v$p=v$n.url,v$Q=v$ba.getURLVerion(v$p),v$V=v$Z.getPath(v$p),v$y=[],v$R={},v$X=0,v$z=0,v$i=v$U.heightData;v$x=v$i.url,v$D=v$c.formatRelativePath(v$V,v$x),v$Q&&(v$D+=v$Q),v$x=v$R[v$x]=v$D;var v$q=v$U.detailTexture;for(v$X=0,v$z=v$q.length;v$X<v$z;v$X++)v$y.push({url:v$q[v$X].diffuse});var v$E=v$U.normalMap;for(v$X=0,v$z=v$E.length;v$X<v$z;v$X++)v$y.push({url:v$E[v$X]});var v$m=v$U.alphaMap;for(v$X=0,v$z=v$m.length;v$X<v$z;v$X++)v$y.push({url:v$m[v$X],params:[!1,!1,6408,!0]});for(v$X=0,v$z=v$y.length;v$X<v$z;v$X++){var v$b=v$y[v$X].url;v$D=v$c.formatRelativePath(v$V,v$b),v$Q&&(v$D+=v$Q),v$y[v$X].url=v$D,v$R[v$b]=v$D}var v$P=v$y.length,v$A=v$P+2,v$T=1/v$A;v$c._onProcessChange(v$n,0,v$T,1);var v$K={heightMapLoaded:!1,texturesLoaded:!1},v$Y=v$M.create(null,v$c._onProcessChange,[v$n,v$T,v$T],!1);v$c._innerFourthLevelLoaderManager.create(v$x,v$M.create(null,v$c._onTerrainHeightMapLoaded,[v$n,v$Y,v$U,v$R,v$K]),v$Y,null,[v$i.numX,v$i.numZ,v$i.bitType,v$i.value],1,!0,v$a);var v$W=v$M.create(null,v$c._onProcessChange,[v$n,2*v$T,v$P/v$A],!1);v$c._innerFourthLevelLoaderManager.create(v$y,v$M.create(null,v$c._onTerrainTexturesLoaded,[v$n,v$W,v$U,v$R,v$K]),v$W,null,null,1,!0,v$a)}},v$c._onTerrainHeightMapLoaded=function(v$n,v$a,v$U,v$x,v$D){v$D.heightMapLoaded=!0,v$D.texturesLoaded&&(v$n.endLoad([v$U,v$x]),v$a.recover())},v$c._onTerrainTexturesLoaded=function(v$n,v$a,v$U,v$x,v$D){v$D.texturesLoaded=!0,v$D.heightMapLoaded&&(v$n.endLoad([v$U,v$x]),v$a.recover())},v$c._loadMesh=function(v$n){v$n.on("loaded",null,v$c._onMeshLmLoaded,[v$n,v$n._class._getGroup()]),v$n.load(v$n.url,"arraybuffer",!1,null,!0)},v$c._onMeshLmLoaded=function(v$n,v$a,v$U){if(v$n._class.destroyed)v$n.endLoad();else{var v$x,v$D,v$p,v$Q=v$n.url,v$V=v$ba.getURLVerion(v$Q),v$y=v$Z.getPath(v$Q),v$R={},v$X=0,v$z=0;switch((v$c._readData=new v$W(v$U)).pos=0,v$c._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var v$i=v$c._readData.getUint32();v$c._readData.pos=v$c._readData.pos+4,v$z=v$c._readData.getUint16(),v$c._readData.pos=v$c._readData.pos+8*v$z;var v$q=v$c._readData.getUint32();for(v$z=v$c._readData.getUint16(),v$c._readData.pos=v$i+v$q,v$x=[],v$X=0;v$X<v$z;v$X++){var v$E=v$c._readData.readUTFString();-1!==v$E.lastIndexOf(".lmat")&&v$x.push(v$E)}break;default:for(v$c.READ_BLOCK(),v$X=0;v$X<2;v$X++){var v$m=v$c._readData.getUint16(),v$b=v$c._strings[v$m],v$P=v$c["READ_"+v$b];if(null==v$P)throw new Error("model file err,no this function:"+v$m+" "+v$b);1===v$X?v$x=v$P.call():v$P.call()}}for(v$X=0,v$p=v$x.length;v$X<v$p;v$X++){var v$A=v$x[v$X];v$D=v$c.formatRelativePath(v$y,v$A),v$V&&(v$D+=v$V),v$x[v$X]=v$D,v$R[v$A]=v$D}if(0<v$x.length){v$c._onProcessChange(v$n,0,.5,1);var v$T=v$M.create(null,v$c._onProcessChange,[v$n,.5,.5],!1);v$c._innerSecondLevelLoaderManager.create(v$x,v$M.create(null,v$c._onMeshMateialLoaded,[v$n,v$T,v$U,v$R]),v$T,null,null,1,!0,v$a)}else v$n.endLoad([v$U,v$R])}},v$c._onMeshMateialLoaded=function(v$n,v$a,v$U,v$x){v$n.endLoad([v$U,v$x]),v$a.recover()},v$c._getMaterialTexturePath=function(v$n,v$a,v$U){var v$x=v$n.length-4;return v$n.indexOf(".dds")!=v$x&&v$n.indexOf(".tga")!=v$x&&v$n.indexOf(".exr")!=v$x&&v$n.indexOf(".DDS")!=v$x&&v$n.indexOf(".TGA")!=v$x&&v$n.indexOf(".EXR")!=v$x||(v$n=v$n.substr(0,v$x)+".png"),v$n=v$c.formatRelativePath(v$U,v$n),v$a&&(v$n+=v$a),v$n},v$c._loadMaterial=function(v$n){v$n.on("loaded",null,v$c._onMaterilLmatLoaded,[v$n,v$n._class._getGroup()]),v$n.load(v$n.url,"json",!1,null,!0)},v$c._onMaterilLmatLoaded=function(v$n,v$a,v$U){if(v$n._class.destroyed)v$n.endLoad();else{var v$x,v$D=v$n.url,v$p=v$ba.getURLVerion(v$D),v$Q=v$Z.getPath(v$D),v$V=[],v$y={},v$R=v$U.customProps,v$X=v$U.version;if(v$X)switch(v$X){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var v$z=v$U.props.textures,v$i=0,v$q=v$z.length;v$i<v$q;v$i++){var v$E=v$z[v$i],v$m=v$E.path;if(v$m){var v$b=v$m.length-4;v$m.indexOf(".exr")!=v$b&&v$m.indexOf(".EXR")!=v$b||(v$m=v$m.substr(0,v$b)+".png"),v$x=v$c.formatRelativePath(v$Q,v$m),v$p&&(v$x+=v$p),v$V.push({url:v$x,params:v$E.params}),v$y[v$m]=v$x}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var v$P=v$R.diffuseTexture.texture2D;if(v$P&&(v$x=v$c._getMaterialTexturePath(v$P,v$p,v$Q),v$V.push(v$x),v$y[v$P]=v$x),v$R.normalTexture){var v$A=v$R.normalTexture.texture2D;v$A&&(v$x=v$c._getMaterialTexturePath(v$A,v$p,v$Q),v$V.push(v$x),v$y[v$A]=v$x)}if(v$R.specularTexture){var v$T=v$R.specularTexture.texture2D;v$T&&(v$x=v$c._getMaterialTexturePath(v$T,v$p,v$Q),v$V.push(v$x),v$y[v$T]=v$x)}if(v$R.emissiveTexture){var v$K=v$R.emissiveTexture.texture2D;v$K&&(v$x=v$c._getMaterialTexturePath(v$K,v$p,v$Q),v$V.push(v$x),v$y[v$K]=v$x)}if(v$R.ambientTexture){var v$Y=v$R.ambientTexture.texture2D;v$Y&&(v$x=v$c._getMaterialTexturePath(v$Y,v$p,v$Q),v$V.push(v$x),v$y[v$Y]=v$x)}if(v$R.reflectTexture){var v$W=v$R.reflectTexture.texture2D;v$W&&(v$x=v$c._getMaterialTexturePath(v$W,v$p,v$Q),v$V.push(v$x),v$y[v$W]=v$x)}}var v$k=v$V.length,v$N=v$k+1,v$_=1/v$N;if(v$c._onProcessChange(v$n,0,v$_,1),0<v$k){var v$$=v$M.create(null,v$c._onProcessChange,[v$n,v$_,v$k/v$N],!1);v$c._innerFourthLevelLoaderManager.create(v$V,v$M.create(null,v$c._onMateialTexturesLoaded,[v$n,v$$,v$U,v$y]),v$$,v$Oa,null,1,!0,v$a)}else v$c._onMateialTexturesLoaded(v$n,null,v$U,null)}},v$c._onMateialTexturesLoaded=function(v$n,v$a,v$U,v$x){v$n.endLoad([v$U,v$x]),v$a&&v$a.recover()},v$c._loadTextureCube=function(v$n){v$n.on("loaded",null,v$c._onTextureCubeLtcLoaded,[v$n]),v$n.load(v$n.url,"json",!1,null,!0)},v$c._onTextureCubeLtcLoaded=function(v$n,v$a){if(v$n._class.destroyed)v$n.endLoad();else{var v$U=v$Z.getPath(v$n.url),v$x=[v$c.formatRelativePath(v$U,v$a.px),v$c.formatRelativePath(v$U,v$a.nx),v$c.formatRelativePath(v$U,v$a.py),v$c.formatRelativePath(v$U,v$a.ny),v$c.formatRelativePath(v$U,v$a.pz),v$c.formatRelativePath(v$U,v$a.nz)];v$c._onProcessChange(v$n,0,1/7,1);var v$D=v$M.create(null,v$c._onProcessChange,[v$n,1/7,6/7],!1);v$c._innerFourthLevelLoaderManager.load(v$x,v$M.create(null,v$c._onTextureCubeImagesLoaded,[v$n,v$x,v$D]),v$D,"nativeimage")}},v$c._onTextureCubeImagesLoaded=function(v$n,v$a,v$U){var v$x=[];v$x.length=6;for(var v$D=0;v$D<6;v$D++){var v$p=v$a[v$D];v$x[v$D]=v$P.getRes(v$p),v$P.clearRes(v$p)}v$n.endLoad(v$x),v$U.recover()},v$c._onProcessChange=function(v$n,v$a,v$U,v$x){(v$x=v$a+v$x*v$U)<1&&v$n.event("progress",v$x)},v$c.init=function(v$n,v$a,v$U,v$x,v$D,v$p){if(void 0===v$U&&(v$U=!1),void 0===v$x&&(v$x=!1),void 0===v$D&&(v$D=!0),void 0===v$p&&(v$p=!0),v$A.update3DLoop=function(){},v$A.cancelLoadByUrl=function(v$n){v$c._cancelLoadByUrl(v$n)},v$y.isAntialias=v$U,v$y.isAlpha=v$x,v$y.premultipliedAlpha=v$D,v$y.isStencil=v$p,!v$u.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");v$A.changeWebGLSize=v$c._changeWebGLSize,v$m.is3DMode=!0,v$Y.init(v$n,v$a),v$G.__init__(),v$za.__init__(),v$wa.__init__(),v$g.__init__(),v$c.__init__(),v$Q.maxTextureCount=2,(v$c.debugMode||v$C.debugMode)&&(v$c._debugPhasorSprite=new v$d)},v$c.HIERARCHY="SPRITE3DHIERARCHY",v$c.MESH="MESH",v$c.MATERIAL="MATERIAL",v$c.PBRMATERIAL="PBRMTL",v$c.TEXTURECUBE="TEXTURECUBE",v$c.TERRAIN="TERRAIN",v$c._readData=null,v$c._debugPhasorSprite=null,v$c.debugMode=!1,v$z(v$c,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new v$a},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new v$a},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new v$a},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new v$a}]),v$c}(),v$Aa=function(v$n){function v$D(v$n){v$D.__super.call(this),this._owner=v$n,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}v$q(v$D,"laya.d3.animation.AnimationTransform3D",v$p);var v$a=v$D.prototype;return v$a._getlocalMatrix=function(){return this._localUpdate&&(v$ba._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},v$a._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var v$n=0,v$a=this._childs.length;v$n<v$a;v$n++)this._childs[v$n]._onWorldTransform()}},v$a._setWorldMatrixAndUpdate=function(v$n){if(this._worldMatrix=v$n,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var v$a=this._getlocalMatrix(),v$U=0;v$U<16;++v$U)this._worldMatrix[v$U]=v$a[v$U];else v$ba.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},v$a._setWorldMatrixNoUpdate=function(v$n){this._worldMatrix=v$n},v$a._setWorldMatrixIgnoreUpdate=function(v$n){this._worldMatrix=v$n,this._worldUpdate=!1},v$a.getLocalPosition=function(){return this._localPosition},v$a.setLocalPosition=function(v$n){if(this._parent)this._localPosition=v$n,this._localUpdate=!0,this._onWorldTransform();else{var v$a=this._entity.owner._transform,v$U=this._entity.localPosition,v$x=v$U.elements;v$x[0]=v$n[0],v$x[1]=v$n[1],v$x[2]=v$n[2],v$a.localPosition=v$U}},v$a.getLocalRotation=function(){if(this._localQuaternionUpdate){var v$n=this._localRotationEuler;v$ba._quaternionCreateFromYawPitchRollArray(v$n[1]/v$D._angleToRandin,v$n[0]/v$D._angleToRandin,v$n[2]/v$D._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},v$a.setLocalRotation=function(v$n){if(this._parent)this._localRotation=v$n,v$ba.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var v$a=this._entity.owner._transform,v$U=this._entity.localRotation,v$x=v$U.elements;v$x[0]=v$n[0],v$x[1]=v$n[1],v$x[2]=v$n[2],v$x[3]=v$n[3],v$a.localRotation=v$U}},v$a.getLocalScale=function(){return this._localScale},v$a.setLocalScale=function(v$n){if(this._parent)this._localScale=v$n,this._localUpdate=!0,this._onWorldTransform();else{var v$a=this._entity.owner._transform,v$U=this._entity.localScale,v$x=v$U.elements;v$x[0]=v$n[0],v$x[1]=v$n[1],v$x[2]=v$n[2],v$a.localScale=v$U}},v$a.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){v$ba.getYawPitchRoll(this._localRotation,v$D._tempVector3);var v$n=v$D._tempVector3,v$a=this._localRotationEuler;v$a[0]=v$n[1]*v$D._angleToRandin,v$a[1]=v$n[0]*v$D._angleToRandin,v$a[2]=v$n[2]*v$D._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},v$a.setLocalRotationEuler=function(v$n){if(this._parent)v$ba._quaternionCreateFromYawPitchRollArray(v$n[1]/v$D._angleToRandin,v$n[0]/v$D._angleToRandin,v$n[2]/v$D._angleToRandin,this._localRotation),this._localRotationEuler=v$n,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var v$a=this._entity.owner._transform,v$U=this._entity.localRotationEuler,v$x=v$U.elements;v$x[0]=v$n[0],v$x[1]=v$n[1],v$x[2]=v$n[2],v$a.localRotationEuler=v$U}},v$a.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)v$ba.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var v$n=this._getlocalMatrix(),v$a=0;v$a<16;++v$a)this._worldMatrix[v$a]=v$n[v$a];this._worldUpdate=!1}return this._worldMatrix},v$a.setParent=function(v$n){if(this._parent!==v$n){if(this._parent){var v$a=this._parent._childs,v$U=v$a.indexOf(this);v$a.splice(v$U,1)}v$n&&(v$n._childs.push(this),v$n&&this._onWorldTransform()),this._parent=v$n}},v$z(v$D,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),v$D}(),v$Ta=function(v$n){function v$a(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,v$a.__super.call(this),this._destroyed=!1,this._id=v$a._uniqueIDCounter,v$a._uniqueIDCounter++}v$q(v$a,"laya.d3.component.Component3D",v$p);var v$U=v$a.prototype;return v$Y.imps(v$U,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),v$U._initialize=function(v$n){this._owner=v$n,this._enable=!0,this.started=!1,this._load(v$n)},v$U._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},v$U._load=function(v$n){},v$U._start=function(v$n){},v$U._update=function(v$n){},v$U._lateUpdate=function(v$n){},v$U._preRenderUpdate=function(v$n){},v$U._postRenderUpdate=function(v$n){},v$U._unload=function(v$n){this.offAll()},v$U._cloneTo=function(v$n){},v$E(0,v$U,"id",function(){return this._id}),v$E(0,v$U,"destroyed",function(){return this._destroyed}),v$E(0,v$U,"owner",function(){return this._owner}),v$E(0,v$U,"enable",function(){return this._enable},function(v$n){this._enable!==v$n&&(this._enable=v$n,this.event("enablechanged",this._enable))}),v$E(0,v$U,"isSingleton",function(){return v$a._isSingleton}),v$a._isSingleton=!0,v$a._uniqueIDCounter=1,v$a}(),v$Ka=function(v$n){function v$a(){this._destroyed=!1,v$a.__super.call(this),this._destroyed=!1}v$q(v$a,"laya.d3.core.GeometryFilter",v$p);var v$U=v$a.prototype;return v$Y.imps(v$U,{"laya.resource.IDestroy":!0}),v$U._destroy=function(){this.offAll(),this._destroyed=!0},v$E(0,v$U,"_isAsyncLoaded",function(){return!0}),v$E(0,v$U,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),v$E(0,v$U,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),v$E(0,v$U,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),v$E(0,v$U,"destroyed",function(){return this._destroyed}),v$a}(),v$Ya=function(v$n){function v$x(v$n){v$x.__super.call(this),this._id=++v$x._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new v$Cn(new v$Qa,new v$Qa),this._boundingBoxCenter=new v$Qa,this._boundingSphere=new v$rn(new v$Qa,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=v$n,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}v$q(v$x,"laya.d3.core.render.BaseRender",v$p);var v$a=v$x.prototype;return v$Y.imps(v$a,{"laya.resource.IDestroy":!0}),v$a._changeMaterialReference=function(v$n,v$a){v$n&&v$n._removeReference(),v$a._addReference()},v$a._getInstanceMaterial=function(v$n,v$a){var v$U=new v$n.constructor;return v$n.cloneTo(v$U),v$U.name=v$U.name+"(Instance)",this._materialsInstance[v$a]=!0,this._changeMaterialReference(this._materials[v$a],v$U),this._materials[v$a]=v$U},v$a._setShaderValuelightMap=function(v$n){this._setShaderValueTexture(3,v$n)},v$a._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},v$a._renderRenderableBoundBox=function(){var v$n=v$Pa._debugPhasorSprite,v$a=this.boundingBox,v$U=v$x._tempBoundBoxCorners;v$a.getCorners(v$U),v$n.line(v$U[0],v$x._greenColor,v$U[1],v$x._greenColor),v$n.line(v$U[2],v$x._greenColor,v$U[3],v$x._greenColor),v$n.line(v$U[4],v$x._greenColor,v$U[5],v$x._greenColor),v$n.line(v$U[6],v$x._greenColor,v$U[7],v$x._greenColor),v$n.line(v$U[0],v$x._greenColor,v$U[3],v$x._greenColor),v$n.line(v$U[1],v$x._greenColor,v$U[2],v$x._greenColor),v$n.line(v$U[2],v$x._greenColor,v$U[6],v$x._greenColor),v$n.line(v$U[3],v$x._greenColor,v$U[7],v$x._greenColor),v$n.line(v$U[0],v$x._greenColor,v$U[4],v$x._greenColor),v$n.line(v$U[1],v$x._greenColor,v$U[5],v$x._greenColor),v$n.line(v$U[4],v$x._greenColor,v$U[7],v$x._greenColor),v$n.line(v$U[5],v$x._greenColor,v$U[6],v$x._greenColor)},v$a._calculateBoundingSphere=function(){throw"BaseRender: must override it."},v$a._calculateBoundingBox=function(){throw"BaseRender: must override it."},v$a._setShaderValueTexture=function(v$n,v$a){this._owner._shaderValues.setValue(v$n,v$a)},v$a._setShaderValueMatrix4x4=function(v$n,v$a){this._owner._shaderValues.setValue(v$n,v$a?v$a.elements:null)},v$a._setShaderValueColor=function(v$n,v$a){this._owner._shaderValues.setValue(v$n,v$a?v$a.elements:null)},v$a._setShaderValueBuffer=function(v$n,v$a){this._owner._shaderValues.setValue(v$n,v$a)},v$a._setShaderValueInt=function(v$n,v$a){this._owner._shaderValues.setValue(v$n,v$a)},v$a._setShaderValueBool=function(v$n,v$a){this._owner._shaderValues.setValue(v$n,v$a)},v$a._setShaderValueNumber=function(v$n,v$a){this._owner._shaderValues.setValue(v$n,v$a)},v$a._setShaderValueVector2=function(v$n,v$a){this._owner._shaderValues.setValue(v$n,v$a?v$a.elements:null)},v$a._addShaderDefine=function(v$n){this._owner._shaderDefineValue|=v$n},v$a._removeShaderDefine=function(v$n){this._owner._shaderDefineValue&=~v$n},v$a._renderUpdate=function(v$n){return!0},v$a._applyLightMapParams=function(){if(0<=this._lightmapIndex){var v$n=this._owner.scene;if(v$n){var v$a=v$n.getlightmaps()[this._lightmapIndex];v$a?(this._addShaderDefine(v$da.SAHDERDEFINE_LIGHTMAP),v$a.loaded?this._setShaderValuelightMap(v$a):v$a.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(v$da.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(v$da.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(v$da.SAHDERDEFINE_LIGHTMAP)},v$a._updateOctreeNode=function(){var v$n=this._treeNode;v$n&&this._octreeNodeNeedChange&&(v$n.updateObject(this),this._octreeNodeNeedChange=!1)},v$a._destroy=function(){this.offAll();var v$n=0,v$a=0;for(v$n=0,v$a=this._renderElements.length;v$n<v$a;v$n++)this._renderElements[v$n]._destroy();for(v$n=0,v$a=this._materials.length;v$n<v$a;v$n++)this._materials[v$n]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},v$E(0,v$a,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),v$E(0,v$a,"id",function(){return this._id}),v$E(0,v$a,"material",function(){var v$n=this._materials[0];if(v$n&&!this._materialsInstance[0]){var v$a=this._getInstanceMaterial(v$n,0);this.event("materialchanged",[this,0,v$a])}return this._materials[0]},function(v$n){this.sharedMaterial=v$n}),v$E(0,v$a,"sharedMaterial",function(){return this._materials[0]},function(v$n){var v$a=this._materials[0];v$a!==v$n&&(this._materials[0]=v$n,this._materialsInstance[0]=!1,this._changeMaterialReference(v$a,v$n),this.event("materialchanged",[this,0,v$n]))}),v$E(0,v$a,"lightmapIndex",function(){return this._lightmapIndex},function(v$n){this._lightmapIndex=v$n,this._applyLightMapParams()}),v$E(0,v$a,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(v$n){this._lightmapScaleOffset=v$n,this._setShaderValueColor(2,v$n),this._addShaderDefine(v$da.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),v$E(0,v$a,"enable",function(){return this._enable},function(v$n){this._enable=v$n,this.event("enablechanged",[this,v$n])}),v$E(0,v$a,"materials",function(){for(var v$n=0,v$a=this._materials.length;v$n<v$a;v$n++)if(!this._materialsInstance[v$n]){var v$U=this._getInstanceMaterial(this._materials[v$n],v$n);this.event("materialchanged",[this,v$n,v$U])}return this._materials.slice()},function(v$n){this.sharedMaterials=v$n}),v$E(0,v$a,"sharedMaterials",function(){return this._materials.slice()},function(v$n){if(!v$n)throw new Error("MeshRender: shadredMaterials value can't be null.");var v$a=v$n.length;this._materialsInstance.length=v$a;for(var v$U=0;v$U<v$a;v$U++){var v$x=this._materials[v$U];v$x!==v$n[v$U]&&(this._materialsInstance[v$U]=!1,this._changeMaterialReference(v$x,v$n[v$U]),this.event("materialchanged",[this,v$U,v$n[v$U]]))}this._materials=v$n}),v$E(0,v$a,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),v$E(0,v$a,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var v$n=this.boundingBox;v$Qa.add(v$n.min,v$n.max,this._boundingBoxCenter),v$Qa.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),v$E(0,v$a,"receiveShadow",function(){return this._receiveShadow},function(v$n){this._receiveShadow!==v$n&&((this._receiveShadow=v$n)?this._addShaderDefine(v$qa.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(v$qa.SHADERDEFINE_RECEIVE_SHADOW))}),v$E(0,v$a,"destroyed",function(){return this._destroyed}),v$x._uniqueIDCounter=0,v$z(v$x,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa,new v$Qa]},"_greenColor",function(){return this._greenColor=new v$Va(0,1,0,1)}]),v$x}(),v$Wa=function(v$n){function v$V(v$n){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,v$V.__super.call(this),this._localPosition=new v$Qa,this._localRotation=new v$Ua(0,0,0,1),this._localScale=new v$Qa(1,1,1),this._localRotationEuler=new v$Qa,this._localMatrix=new v$na,this._position=new v$Qa,this._rotation=new v$Ua(0,0,0,1),this._scale=new v$Qa(1,1,1),this._worldMatrix=new v$na,this._forward=new v$Qa,this._up=new v$Qa,this._right=new v$Qa,this._owner=v$n,this._childs=[]}v$q(v$V,"laya.d3.core.Transform3D",v$p);var v$a=v$V.prototype;return v$a._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)v$na.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var v$n=v$V._tempVector30;v$Qa.multiply(this.pivot,this._localScale,v$n);var v$a=v$V._tempVector31;v$Qa.subtract(v$n,this.pivot,v$a);var v$U=v$V._tempVector32,v$x=this.localRotation;v$Qa.transformQuat(v$n,v$x,v$U),v$Qa.subtract(v$U,v$n,v$U);var v$D=v$V._tempVector33;v$Qa.subtract(this._localPosition,v$a,v$D),v$Qa.subtract(v$D,v$U,v$D),v$na.createAffineTransformation(v$D,v$x,this._localScale,this._localMatrix)}},v$a._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var v$n=0,v$a=this._childs.length;v$n<v$a;v$n++)this._childs[v$n]._onWorldPositionRotationTransform()}},v$a._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var v$n=0,v$a=this._childs.length;v$n<v$a;v$n++)this._childs[v$n]._onWorldPositionScaleTransform()}},v$a._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var v$n=0,v$a=this._childs.length;v$n<v$a;v$n++)this._childs[v$n]._onWorldPositionTransform()}},v$a._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var v$n=0,v$a=this._childs.length;v$n<v$a;v$n++)this._childs[v$n]._onWorldPositionRotationTransform()}},v$a._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var v$n=0,v$a=this._childs.length;v$n<v$a;v$n++)this._childs[v$n]._onWorldPositionScaleTransform()}},v$a._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var v$n=0,v$a=this._childs.length;v$n<v$a;v$n++)this._childs[v$n]._onWorldTransform()}},v$a.translate=function(v$n,v$a){void 0===v$a&&(v$a=!0),v$a?(v$na.createFromQuaternion(this.localRotation,v$V._tempMatrix0),v$Qa.transformCoordinate(v$n,v$V._tempMatrix0,v$V._tempVector30),v$Qa.add(this.localPosition,v$V._tempVector30,this._localPosition),this.localPosition=this._localPosition):(v$Qa.add(this.position,v$n,this._position),this.position=this._position)},v$a.rotate=function(v$n,v$a,v$U){var v$x;void 0===v$a&&(v$a=!0),void 0===v$U&&(v$U=!0),v$x=v$U?v$n:(v$Qa.scale(v$n,Math.PI/180,v$V._tempVector30),v$V._tempVector30),v$Ua.createFromYawPitchRoll(v$x.y,v$x.x,v$x.z,v$V._tempQuaternion0),v$a?(v$Ua.multiply(this._localRotation,v$V._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(v$Ua.multiply(v$V._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},v$a.lookAt=function(v$n,v$a,v$U){void 0===v$U&&(v$U=!1);var v$x,v$D=v$n.elements;if(v$U){if(v$x=this._localPosition.elements,Math.abs(v$x[0]-v$D[0])<v$Jn.zeroTolerance&&Math.abs(v$x[1]-v$D[1])<v$Jn.zeroTolerance&&Math.abs(v$x[2]-v$D[2])<v$Jn.zeroTolerance)return;v$Ua.lookAt(this._localPosition,v$n,v$a,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var v$p=this.position;if(v$x=v$p.elements,Math.abs(v$x[0]-v$D[0])<v$Jn.zeroTolerance&&Math.abs(v$x[1]-v$D[1])<v$Jn.zeroTolerance&&Math.abs(v$x[2]-v$D[2])<v$Jn.zeroTolerance)return;v$Ua.lookAt(v$p,v$n,v$a,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},v$E(0,v$a,"_isFrontFaceInvert",function(){var v$n=this.scale,v$a=v$n.x<0;return v$n.y<0&&(v$a=!v$a),v$n.z<0&&(v$a=!v$a),v$a}),v$E(0,v$a,"owner",function(){return this._owner}),v$E(0,v$a,"localRotation",function(){if(this._localQuaternionUpdate){var v$n=this._localRotationEuler.elements;v$Ua.createFromYawPitchRoll(v$n[1]/v$V._angleToRandin,v$n[0]/v$V._angleToRandin,v$n[2]/v$V._angleToRandin,this._localRotation)}return this._localRotation},function(v$n){this._localRotation=v$n,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),v$E(0,v$a,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?v$na.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(v$n){null===this._parent?v$n.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),v$na.multiply(this._localMatrix,v$n,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=v$n,this._worldUpdate=!1}),v$E(0,v$a,"worldNeedUpdate",function(){return this._worldUpdate}),v$E(0,v$a,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(v$n){this._localMatrix=v$n,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),v$E(0,v$a,"dummy",function(){return this._dummy},function(v$n){this._dummy!==v$n&&(this._dummy&&(this._dummy._entity=null),v$n&&(v$n._entity=this),this._dummy=v$n)}),v$E(0,v$a,"localPosition",function(){return this._localPosition},function(v$n){this._localPosition=v$n,this._localUpdate=!0,this._onWorldPositionTransform()}),v$E(0,v$a,"position",function(){if(this._positionUpdate){if(null!=this._parent){var v$n=this._parent.position;v$Qa.multiply(this._localPosition,this._parent.scale,v$V._tempVector30),v$Qa.transformQuat(v$V._tempVector30,this._parent.rotation,v$V._tempVector30),v$Qa.add(v$n,v$V._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(v$n){if(null!=this._parent){v$Qa.subtract(v$n,this._parent.position,this._localPosition);var v$a=this._parent.scale.elements,v$U=v$a[0],v$x=v$a[1],v$D=v$a[2];if(1!==v$U||1!==v$x||1!==v$D){var v$p=v$V._tempVector30,v$Q=v$p.elements;v$Q[0]=1/v$U,v$Q[1]=1/v$x,v$Q[2]=1/v$D,v$Qa.multiply(this._localPosition,v$p,this._localPosition)}this._parent.rotation.invert(v$V._tempQuaternion0),v$Qa.transformQuat(this._localPosition,v$V._tempQuaternion0,this._localPosition)}else v$n.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=v$n,this._positionUpdate=!1}),v$E(0,v$a,"localScale",function(){return this._localScale},function(v$n){this._localScale=v$n,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),v$E(0,v$a,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(v$V._tempVector30);var v$n=v$V._tempVector30.elements,v$a=this._localRotationEuler.elements;v$a[0]=v$n[1]*v$V._angleToRandin,v$a[1]=v$n[0]*v$V._angleToRandin,v$a[2]=v$n[2]*v$V._angleToRandin}return this._localRotationEuler},function(v$n){this._localRotationEuler=v$n,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),v$E(0,v$a,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?v$Ua.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(v$n){null!=this._parent?(this._parent.rotation.invert(v$V._tempQuaternion0),v$Ua.multiply(v$n,v$V._tempQuaternion0,this._localRotation)):v$n.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=v$n,this._rotationUpdate=!1}),v$E(0,v$a,"scale",function(){return this._scaleUpdate&&(null!==this._parent?v$Qa.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(v$n){if(null!==this._parent){var v$a=this._parent.scale.elements,v$U=v$V._tempVector30.elements;v$U[0]=1/v$a[0],v$U[1]=1/v$a[1],v$U[2]=1/v$a[2],v$Qa.multiply(v$n,v$V._tempVector30,this._localScale)}else v$n.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=v$n,this._scaleUpdate=!1}),v$E(0,v$a,"rotationEuler",null,function(v$n){v$Ua.createFromYawPitchRoll(v$n.y,v$n.x,v$n.z,this._rotation),this.rotation=this._rotation}),v$E(0,v$a,"forward",function(){var v$n=this.worldMatrix.elements;return this._forward.elements[0]=-v$n[8],this._forward.elements[1]=-v$n[9],this._forward.elements[2]=-v$n[10],this._forward}),v$E(0,v$a,"up",function(){var v$n=this.worldMatrix.elements;return this._up.elements[0]=v$n[4],this._up.elements[1]=v$n[5],this._up.elements[2]=v$n[6],this._up}),v$E(0,v$a,"right",function(){var v$n=this.worldMatrix.elements;return this._right.elements[0]=v$n[0],this._right.elements[1]=v$n[1],this._right.elements[2]=v$n[2],this._right}),v$E(0,v$a,"parent",function(){return this._parent},function(v$n){if(this._parent!==v$n){if(this._parent){var v$a=this._parent._childs,v$U=v$a.indexOf(this);v$a.splice(v$U,1)}v$n&&(v$n._childs.push(this),v$n&&this._onWorldTransform()),this._parent=v$n}}),v$z(v$V,["_tempVector30",function(){return this._tempVector30=new v$Qa},"_tempVector31",function(){return this._tempVector31=new v$Qa},"_tempVector32",function(){return this._tempVector32=new v$Qa},"_tempVector33",function(){return this._tempVector33=new v$Qa},"_tempQuaternion0",function(){return this._tempQuaternion0=new v$Ua},"_tempMatrix0",function(){return this._tempMatrix0=new v$na},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),v$V}(),v$ka=(function(v$n){function v$a(){this._rotation=0,this._matNeedUpdte=!1,v$a.__super.call(this),this._matrix=new v$na,this._offset=new v$pa,this._tiling=new v$pa(1,1)}v$q(v$a,"laya.d3.core.TransformUV",v$p);var v$U=v$a.prototype;v$Y.imps(v$U,{"laya.d3.core.IClone":!0}),v$U._updateMatrix=function(){v$a._tempOffsetV3.elements[0]=this._offset.x,v$a._tempOffsetV3.elements[1]=this._offset.y,v$Ua.createFromYawPitchRoll(0,0,this._rotation,v$a._tempRotationQua),v$a._tempTitlingV3.elements[0]=this._tiling.x,v$a._tempTitlingV3.elements[1]=this._tiling.y,v$na.createAffineTransformation(v$a._tempOffsetV3,v$a._tempRotationQua,v$a._tempTitlingV3,this._matrix)},v$U.cloneTo=function(v$n){v$n._matrix=this._matrix.clone(),v$n._offset=this._offset.clone(),v$n._rotation=this._rotation,v$n._tiling=this._tiling.clone()},v$U.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$U,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),v$E(0,v$U,"tiling",function(){return this._tiling},function(v$n){this._tiling=v$n,this._matNeedUpdte=!0}),v$E(0,v$U,"offset",function(){return this._offset},function(v$n){this._offset=v$n,this._matNeedUpdte=!0}),v$E(0,v$U,"rotation",function(){return this._rotation},function(v$n){this._rotation=v$n,this._matNeedUpdte=!0}),v$z(v$a,["_tempOffsetV3",function(){return this._tempOffsetV3=new v$Qa(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new v$Ua},"_tempTitlingV3",function(){return this._tempTitlingV3=new v$Qa(1,1,1)}])}(),function(v$U){function v$n(){this.x=NaN,this.y=NaN,this.z=NaN,v$n.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}v$q(v$n,"laya.d3.core.particleShuriKen.module.shape.BoxShape",v$U);var v$a=v$n.prototype;v$a._getShapeBoundBox=function(v$n){var v$a=v$n.min.elements;v$a[0]=.5*-this.x,v$a[1]=.5*-this.y,v$a[2]=.5*-this.z;var v$U=v$n.max.elements;v$U[0]=.5*this.x,v$U[1]=.5*this.y,v$U[2]=.5*this.z},v$a._getSpeedBoundBox=function(v$n){var v$a=v$n.min.elements;v$a[0]=0,v$a[1]=0,v$a[2]=0;var v$U=v$n.max.elements;v$U[0]=0,v$U[1]=1,v$U[2]=0},v$a.generatePositionAndDirection=function(v$n,v$a,v$U,v$x){var v$D=v$n.elements,v$p=v$a.elements;v$U?(v$U.seed=v$x[16],v$O._randomPointInsideHalfUnitBox(v$n,v$U),v$x[16]=v$U.seed):v$O._randomPointInsideHalfUnitBox(v$n),v$D[0]=this.x*v$D[0],v$D[1]=this.y*v$D[1],v$D[2]=this.z*v$D[2],this.randomDirection?v$U?(v$U.seed=v$x[17],v$O._randomPointUnitSphere(v$a,v$U),v$x[17]=v$U.seed):v$O._randomPointUnitSphere(v$a):(v$p[0]=0,v$p[1]=0,v$p[2]=1)},v$a.cloneTo=function(v$n){v$U.prototype.cloneTo.call(this,v$n);var v$a=v$n;v$a.x=this.x,v$a.y=this.y,v$a.z=this.z,v$a.randomDirection=this.randomDirection}}(v$f),function(v$U){function v$Q(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,v$Q.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}v$q(v$Q,"laya.d3.core.particleShuriKen.module.shape.CircleShape",v$U);var v$n=v$Q.prototype;v$n._getShapeBoundBox=function(v$n){var v$a=v$n.min.elements;v$a[0]=v$a[2]=-this.radius,v$a[1]=0;var v$U=v$n.max.elements;v$U[0]=v$U[2]=this.radius,v$U[1]=0},v$n._getSpeedBoundBox=function(v$n){var v$a=v$n.min.elements;v$a[0]=v$a[1]=-1,v$a[2]=0;var v$U=v$n.max.elements;v$U[0]=v$U[1]=1,v$U[2]=0},v$n.generatePositionAndDirection=function(v$n,v$a,v$U,v$x){var v$D=v$n.elements,v$p=v$Q._tempPositionPoint.elements;v$U?(v$U.seed=v$x[16],this.emitFromEdge?v$O._randomPointUnitArcCircle(this.arc,v$Q._tempPositionPoint,v$U):v$O._randomPointInsideUnitArcCircle(this.arc,v$Q._tempPositionPoint,v$U),v$x[16]=v$U.seed):this.emitFromEdge?v$O._randomPointUnitArcCircle(this.arc,v$Q._tempPositionPoint):v$O._randomPointInsideUnitArcCircle(this.arc,v$Q._tempPositionPoint),v$D[0]=-v$p[0],v$D[1]=v$p[1],v$D[2]=0,v$Qa.scale(v$n,this.radius,v$n),this.randomDirection?v$U?(v$U.seed=v$x[17],v$O._randomPointUnitSphere(v$a,v$U),v$x[17]=v$U.seed):v$O._randomPointUnitSphere(v$a):v$n.cloneTo(v$a)},v$n.cloneTo=function(v$n){v$U.prototype.cloneTo.call(this,v$n);var v$a=v$n;v$a.radius=this.radius,v$a.arc=this.arc,v$a.emitFromEdge=this.emitFromEdge,v$a.randomDirection=this.randomDirection},v$z(v$Q,["_tempPositionPoint",function(){return this._tempPositionPoint=new v$pa}])}(v$f),function(v$U){function v$i(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,v$i.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}v$q(v$i,"laya.d3.core.particleShuriKen.module.shape.ConeShape",v$U);var v$n=v$i.prototype;v$n._getShapeBoundBox=function(v$n){var v$a=this.radius+this.length*Math.sin(this.angle),v$U=this.length*Math.cos(this.angle),v$x=v$n.min.elements;v$x[0]=v$x[1]=-v$a,v$x[2]=0;var v$D=v$n.max.elements;v$D[0]=v$D[1]=v$a,v$D[2]=v$U},v$n._getSpeedBoundBox=function(v$n){var v$a=Math.sin(this.angle),v$U=v$n.min.elements;v$U[0]=v$U[1]=-v$a,v$U[2]=0;var v$x=v$n.max.elements;v$x[0]=v$U[1]=v$a,v$x[2]=1},v$n.generatePositionAndDirection=function(v$n,v$a,v$U,v$x){var v$D,v$p=v$n.elements,v$Q=v$a.elements,v$V=v$i._tempPositionPoint.elements,v$y=NaN,v$R=NaN,v$X=Math.cos(this.angle),v$z=Math.sin(this.angle);switch(this.emitType){case 0:v$U?(v$U.seed=v$x[16],v$O._randomPointInsideUnitCircle(v$i._tempPositionPoint,v$U),v$x[16]=v$U.seed):v$O._randomPointInsideUnitCircle(v$i._tempPositionPoint),v$y=v$V[0],v$R=v$V[1],v$p[0]=v$y*this.radius,v$p[1]=v$R*this.radius,v$p[2]=0,this.randomDirection?(v$U?(v$U.seed=v$x[17],v$O._randomPointInsideUnitCircle(v$i._tempDirectionPoint,v$U),v$x[17]=v$U.seed):v$O._randomPointInsideUnitCircle(v$i._tempDirectionPoint),v$D=v$i._tempDirectionPoint.elements,v$Q[0]=v$D[0]*v$z,v$Q[1]=v$D[1]*v$z):(v$Q[0]=v$y*v$z,v$Q[1]=v$R*v$z),v$Q[2]=v$X;break;case 1:v$U?(v$U.seed=v$x[16],v$O._randomPointUnitCircle(v$i._tempPositionPoint,v$U),v$x[16]=v$U.seed):v$O._randomPointUnitCircle(v$i._tempPositionPoint),v$y=v$V[0],v$R=v$V[1],v$p[0]=v$y*this.radius,v$p[1]=v$R*this.radius,v$p[2]=0,this.randomDirection?(v$U?(v$U.seed=v$x[17],v$O._randomPointInsideUnitCircle(v$i._tempDirectionPoint,v$U),v$x[17]=v$U.seed):v$O._randomPointInsideUnitCircle(v$i._tempDirectionPoint),v$D=v$i._tempDirectionPoint.elements,v$Q[0]=v$D[0]*v$z,v$Q[1]=v$D[1]*v$z):(v$Q[0]=v$y*v$z,v$Q[1]=v$R*v$z),v$Q[2]=v$X;break;case 2:v$U?(v$U.seed=v$x[16],v$O._randomPointInsideUnitCircle(v$i._tempPositionPoint,v$U)):v$O._randomPointInsideUnitCircle(v$i._tempPositionPoint),v$y=v$V[0],v$R=v$V[1],v$p[0]=v$y*this.radius,v$p[1]=v$R*this.radius,v$Q[v$p[2]=0]=v$y*v$z,v$Q[1]=v$R*v$z,v$Q[2]=v$X,v$Qa.normalize(v$a,v$a),v$U?(v$Qa.scale(v$a,this.length*v$U.getFloat(),v$a),v$x[16]=v$U.seed):v$Qa.scale(v$a,this.length*Math.random(),v$a),v$Qa.add(v$n,v$a,v$n),this.randomDirection&&(v$U?(v$U.seed=v$x[17],v$O._randomPointUnitSphere(v$a,v$U),v$x[17]=v$U.seed):v$O._randomPointUnitSphere(v$a));break;case 3:v$U?(v$U.seed=v$x[16],v$O._randomPointUnitCircle(v$i._tempPositionPoint,v$U)):v$O._randomPointUnitCircle(v$i._tempPositionPoint),v$y=v$V[0],v$R=v$V[1],v$p[0]=v$y*this.radius,v$p[1]=v$R*this.radius,v$Q[v$p[2]=0]=v$y*v$z,v$Q[1]=v$R*v$z,v$Q[2]=v$X,v$Qa.normalize(v$a,v$a),v$U?(v$Qa.scale(v$a,this.length*v$U.getFloat(),v$a),v$x[16]=v$U.seed):v$Qa.scale(v$a,this.length*Math.random(),v$a),v$Qa.add(v$n,v$a,v$n),this.randomDirection&&(v$U?(v$U.seed=v$x[17],v$O._randomPointUnitSphere(v$a,v$U),v$x[17]=v$U.seed):v$O._randomPointUnitSphere(v$a));break;default:throw new Error("ConeShape:emitType is invalid.")}},v$n.cloneTo=function(v$n){v$U.prototype.cloneTo.call(this,v$n);var v$a=v$n;v$a.angle=this.angle,v$a.radius=this.radius,v$a.length=this.length,v$a.emitType=this.emitType,v$a.randomDirection=this.randomDirection},v$z(v$i,["_tempPositionPoint",function(){return this._tempPositionPoint=new v$pa},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new v$pa}])}(v$f),function(v$U){function v$n(){this.radius=NaN,this.emitFromShell=!1,v$n.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}v$q(v$n,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",v$U);var v$a=v$n.prototype;v$a._getShapeBoundBox=function(v$n){var v$a=v$n.min.elements;v$a[0]=v$a[1]=v$a[2]=-this.radius;var v$U=v$n.max.elements;v$U[0]=v$U[1]=this.radius,v$U[2]=0},v$a._getSpeedBoundBox=function(v$n){var v$a=v$n.min.elements;v$a[0]=v$a[1]=-1,v$a[2]=0;var v$U=v$n.max.elements;v$U[0]=v$U[1]=v$U[2]=1},v$a.generatePositionAndDirection=function(v$n,v$a,v$U,v$x){var v$D=v$n.elements;v$U?(v$U.seed=v$x[16],this.emitFromShell?v$O._randomPointUnitSphere(v$n,v$U):v$O._randomPointInsideUnitSphere(v$n,v$U),v$x[16]=v$U.seed):this.emitFromShell?v$O._randomPointUnitSphere(v$n):v$O._randomPointInsideUnitSphere(v$n),v$Qa.scale(v$n,this.radius,v$n);var v$p=v$D[2];v$p<0&&(v$D[2]=-1*v$p),this.randomDirection?v$U?(v$U.seed=v$x[17],v$O._randomPointUnitSphere(v$a,v$U),v$x[17]=v$U.seed):v$O._randomPointUnitSphere(v$a):v$n.cloneTo(v$a)},v$a.cloneTo=function(v$n){v$U.prototype.cloneTo.call(this,v$n);var v$a=v$n;v$a.radius=this.radius,v$a.emitFromShell=this.emitFromShell,v$a.randomDirection=this.randomDirection}}(v$f),function(v$U){function v$n(){this.radius=NaN,this.emitFromShell=!1,v$n.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}v$q(v$n,"laya.d3.core.particleShuriKen.module.shape.SphereShape",v$U);var v$a=v$n.prototype;v$a._getShapeBoundBox=function(v$n){var v$a=v$n.min.elements;v$a[0]=v$a[1]=v$a[2]=-this.radius;var v$U=v$n.max.elements;v$U[0]=v$U[1]=v$U[2]=this.radius},v$a._getSpeedBoundBox=function(v$n){var v$a=v$n.min.elements;v$a[0]=v$a[1]=v$a[2]=-1;var v$U=v$n.max.elements;v$U[0]=v$U[1]=v$U[2]=1},v$a.generatePositionAndDirection=function(v$n,v$a,v$U,v$x){v$U?(v$U.seed=v$x[16],this.emitFromShell?v$O._randomPointUnitSphere(v$n,v$U):v$O._randomPointInsideUnitSphere(v$n,v$U),v$x[16]=v$U.seed):this.emitFromShell?v$O._randomPointUnitSphere(v$n):v$O._randomPointInsideUnitSphere(v$n),v$Qa.scale(v$n,this.radius,v$n),this.randomDirection?v$U?(v$U.seed=v$x[17],v$O._randomPointUnitSphere(v$a,v$U),v$x[17]=v$U.seed):v$O._randomPointUnitSphere(v$a):v$n.cloneTo(v$a)},v$a.cloneTo=function(v$n){v$U.prototype.cloneTo.call(this,v$n);var v$a=v$n;v$a.radius=this.radius,v$a.emitFromShell=this.emitFromShell,v$a.randomDirection=this.randomDirection}}(v$f),function(v$n){function v$a(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,v$a.__super.call(this)}return v$q(v$a,"laya.d3.core.render.SubMeshRenderElement",v$S),v$a}()),v$Na=function(v$n){function v$b(v$n,v$a,v$U,v$x,v$D,v$p){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=v$n,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[v$qa.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[v$da.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[v$da.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[v$Za.SHADERDEFINE_ALPHATEST]="ALPHATEST";v$b.__super.call(this,v$n,v$a,v$U,null,{}),this._attributeMap=v$x;var v$Q;for(v$Q in v$D){var v$V=v$D[v$Q];switch(v$V[1]){case 0:this._renderElementUniformMap[v$Q]=v$V[0];break;case 1:this._materialUniformMap[v$Q]=v$V[0];break;case 2:this._spriteUniformMap[v$Q]=v$V[0];break;case 3:this._cameraUniformMap[v$Q]=v$V[0];break;case 4:this._sceneUniformMap[v$Q]=v$V[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}v$q(v$b,"laya.d3.shader.ShaderCompile3D",v$T);var v$a=v$b.prototype;return v$a._definesToNameDic=function(v$n,v$a){for(var v$U={},v$x=1,v$D=0;v$D<32&&!(v$n<(v$x=1<<v$D));v$D++)if(v$n&v$x){var v$p=v$a[v$x];v$p&&(v$U[v$p]="")}return v$U},v$a.withCompile=function(v$n,v$a,v$U,v$x){var v$D,v$p,v$Q;if(v$p=this.sharders[v$n])if(v$Q=v$p[v$a]){if(v$D=v$Q[v$U])return v$D}else v$Q=v$p[v$a]=[];else v$Q=(v$p=this.sharders[v$n]=[])[v$a]=[];var v$V,v$y=this._definesToNameDic(v$n,v$b._globalInt2name),v$R=this._definesToNameDic(v$a,this._spriteInt2name),v$X=this._definesToNameDic(v$U,this._materialInt2name),v$z={},v$i="";if(v$y)for(v$V in v$y)v$i+="#define "+v$V+"\n",v$z[v$V]=!0;if(v$R)for(v$V in v$R)v$i+="#define "+v$V+"\n",v$z[v$V]=!0;if(v$X)for(v$V in v$X)v$i+="#define "+v$V+"\n",v$z[v$V]=!0;var v$q=v$la.nameKey.getName(this._name)+" compile ("+v$n+","+v$a+","+v$U+")",v$E=this._VS.toscript(v$z,[]),v$m=this._PS.toscript(v$z,[]);v$H.now();if(v$D=v$la.create(v$i+v$E.join("\n"),v$i+v$m.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,v$x,v$q),v$Q[v$U]=v$D,laya.d3.shader.ShaderCompile3D.debugMode)v$H.now();return v$D},v$a.precompileShaderWithShaderDefine=function(v$n,v$a,v$U){this.withCompile(v$n,v$a,v$U,!0)},v$a.addMaterialDefines=function(v$n){var v$a=v$n.defines;for(var v$U in v$a){var v$x=v$a[v$U],v$D=parseInt(v$U);this._materialInt2name[v$D]=v$x,this._materialName2Int[v$x]=v$D}},v$a.addSpriteDefines=function(v$n){var v$a=v$n.defines;for(var v$U in v$a){var v$x=v$a[v$U],v$D=parseInt(v$U);this._spriteInt2name[v$D]=v$x,this._spriteName2Int[v$x]=v$D}},v$a.getMaterialDefineByName=function(v$n){return this._materialName2Int[v$n]},v$a.registerMaterialDefine=function(v$n){var v$a=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[v$a]=v$n,this._materialName2Int[v$n]=v$a},v$a.registerSpriteDefine=function(v$n){var v$a=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[v$a]=v$n,this._spriteName2Int[v$n]=v$a},v$b._globalRegDefine=function(v$n,v$a){v$b._globalInt2name[v$a]=v$n},v$b.add=function(v$n,v$a,v$U,v$x,v$D){return laya.d3.shader.ShaderCompile3D._preCompileShader[v$n]=new v$b(v$n,v$a,v$U,v$x,v$D,v$T.includes)},v$b.get=function(v$n){return laya.d3.shader.ShaderCompile3D._preCompileShader[v$la.nameKey.getID(v$n)]},v$b._preCompileShader={},v$b._globalInt2name=[],v$b.debugMode=!1,v$b.SHADERDEFINE_HIGHPRECISION=1,v$b.SHADERDEFINE_FOG=4,v$b.SHADERDEFINE_DIRECTIONLIGHT=8,v$b.SHADERDEFINE_POINTLIGHT=16,v$b.SHADERDEFINE_SPOTLIGHT=32,v$b.SHADERDEFINE_UV0=64,v$b.SHADERDEFINE_COLOR=128,v$b.SHADERDEFINE_UV1=256,v$b.SAHDERDEFINE_DEPTHFOG=131072,v$b}(),v$_a=function(v$n){function v$E(){v$E.__super.call(this)}v$q(v$E,"laya.d3.graphics.MeshSprite3DStaticBatchManager",v$xn);var v$a=v$E.prototype;return v$a._getStaticBatch=function(v$n,v$a,v$U,v$x){var v$D,v$p;return v$p=v$n?v$n.id.toString()+v$U.id.toString()+v$a.id.toString()+v$x.toString():v$U.id.toString()+v$a.id.toString()+v$x.toString(),this._staticBatches[v$p]?v$D=this._staticBatches[v$p]:this._staticBatches[v$p]=v$D=new v$$a(v$p,this,v$n,v$a,v$U),v$D},v$a._initStaticBatchs=function(v$n){var v$a,v$U;this._initBatchRenderElements.sort(v$E._sortPrepareStaticBatch);for(var v$x,v$D=!1,v$p=0,v$Q=0,v$V=this._initBatchRenderElements.length;v$Q<v$V;v$Q++){var v$y,v$R=this._initBatchRenderElements[v$Q],v$X=v$R.renderObj._getVertexBuffer(0);v$R._sprite3D;if(v$U===v$X.vertexDeclaration&&v$a===v$R._material)if(v$D)v$x._addCombineBatchRenderObjTest(v$R)?(v$y=v$R._staticBatch)!==v$x&&(v$y&&v$y._deleteCombineBatchRenderObj(v$R),v$x._addCombineBatchRenderObj(v$R)):(v$D=!1,v$p++);else{var v$z=this._initBatchRenderElements[v$Q-1],v$i=v$z.renderObj,v$q=v$R.renderObj;v$D=!(65535<v$i._getVertexBuffer().vertexCount+v$q._getVertexBuffer().vertexCount)&&(v$x=this._getStaticBatch(v$n,v$U,v$a,v$p),(v$y=v$z._staticBatch)!==v$x&&(v$y&&v$y._deleteCombineBatchRenderObj(v$z),v$x._addCombineBatchRenderObj(v$z)),(v$y=v$R._staticBatch)!==v$x&&(v$y&&v$y._deleteCombineBatchRenderObj(v$R),v$x._addCombineBatchRenderObj(v$R)),!0)}else v$D=!1,v$p=0;v$a=v$R._material,v$U=v$X.vertexDeclaration}},v$E._sortPrepareStaticBatch=function(v$n,v$a){var v$U=v$n._render,v$x=v$a._render,v$D=v$U.lightmapIndex-v$x.lightmapIndex;if(0!=v$D)return v$D;var v$p=v$U.receiveShadow-v$x.receiveShadow;if(0!=v$p)return v$p;var v$Q=v$n._mainSortID-v$a._mainSortID;return 0==v$Q?v$n.renderObj.triangleCount-v$a.renderObj.triangleCount:v$Q},v$E}(),v$$a=function(v$n){function v$p(v$n,v$a,v$U,v$x,v$D){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,v$p.__super.call(this,v$n,v$a,v$U),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=v$x,this._material=v$D}v$q(v$p,"laya.d3.graphics.SubMeshStaticBatch",v$Dn);var v$a=v$p.prototype;return v$a._compareBatchRenderElement=function(v$n,v$a){return v$n._batchIndexStart>v$a._batchIndexStart},v$a._addCombineBatchRenderObjTest=function(v$n){var v$a=v$n.renderObj._vertexCount;return!(65535<(0<v$a?this._currentCombineVertexCount+v$a:this._currentCombineVertexCount+v$n.renderObj._getVertexBuffer().vertexCount))},v$a._addCombineBatchRenderObj=function(v$n){var v$a=v$n.renderObj,v$U=v$a._vertexCount;this._initBatchRenderElements.push(v$n),v$n._staticBatch=this,0<v$U?(this._currentCombineIndexCount+=v$a._indexCount,this._currentCombineVertexCount+=v$U):(this._currentCombineIndexCount=this._currentCombineIndexCount+v$a._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+v$a._getVertexBuffer().vertexCount),this._needFinishCombine=!0},v$a._deleteCombineBatchRenderObj=function(v$n){var v$a=v$n.renderObj,v$U=this._initBatchRenderElements.indexOf(v$n);if(-1!==v$U){this._initBatchRenderElements.splice(v$U,1),v$n._staticBatch=null;var v$x=v$a._vertexCount;0<v$x?(this._currentCombineIndexCount=this._currentCombineIndexCount-v$a._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-v$x):(this._currentCombineIndexCount=this._currentCombineIndexCount-v$a._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-v$a._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},v$a._finishInit=function(){if(this._needFinishCombine){var v$n=0,v$a=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var v$U=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),v$x=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=v$fa.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=v$ha.create("ushort",this._currentCombineIndexCount,35044);for(var v$D=0,v$p=this._initBatchRenderElements.length;v$D<v$p;v$D++){var v$Q=this._initBatchRenderElements[v$D],v$V=v$Q.renderObj,v$y=v$V._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,v$Q._sprite3D),v$R=v$V.getIndices(),v$X=v$Q._sprite3D.transform._isFrontFaceInvert,v$z=v$n/(this._vertexDeclaration.vertexStride/4)-v$V._vertexStart,v$i=v$a,v$q=v$i+v$R.length;v$Q._batchIndexStart=v$i,v$Q._batchIndexEnd=v$q,v$x.set(v$R,v$a);var v$E=0;if(v$X)for(v$E=v$i;v$E<v$q;v$E+=3){v$x[v$E]=v$z+v$x[v$E];var v$m=v$x[v$E+1],v$b=v$x[v$E+2];v$x[v$E+1]=v$z+v$b,v$x[v$E+2]=v$z+v$m}else for(v$E=v$i;v$E<v$q;v$E+=3)v$x[v$E]=v$z+v$x[v$E],v$x[v$E+1]=v$z+v$x[v$E+1],v$x[v$E+2]=v$z+v$x[v$E+2];v$a+=v$R.length,v$U.set(v$y,v$n),v$n+=v$y.length}this._vertexBuffer.setData(v$U),this._indexBuffer.setData(v$x),this._needFinishCombine=!1}},v$a._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new v$ka)},v$a._getRenderElement=function(v$n,v$a,v$U){for(var v$x,v$D,v$p=this._batchRenderElements.length,v$Q=!0,v$V=0;v$V<v$p;v$V++){var v$y,v$R,v$X=(v$D=this._batchRenderElements[v$V])._sprite3D._render;if(0!==v$V&&(v$Q=(v$y=(v$x=this._batchRenderElements[v$V-1])._sprite3D._render).lightmapIndex!==v$X.lightmapIndex||v$y.receiveShadow!==v$X.receiveShadow||v$x._batchIndexEnd!==v$D._batchIndexStart),v$Q){(v$R=this._getCombineRenderElementFromPool()).renderObj=this,v$R._material=this._material,v$R._batchIndexStart=v$D._batchIndexStart,v$R._batchIndexEnd=v$D._batchIndexEnd;var v$z=v$X.lightmapIndex,v$i=v$z+1,v$q=this._batchOwnerIndices[v$i];v$q||(v$q=this._batchOwnerIndices[v$i]=[]);var v$E,v$m=v$q[v$D._render.receiveShadow?1:0];void 0===v$m?(v$q[v$X.receiveShadow?1:0]=this._batchOwners.length,(v$E=new v$wa(null,"StaticBatchMeshSprite3D"))._scene=v$a,v$E._transform=this._rootOwner?this._rootOwner._transform:null,v$E._render.lightmapIndex=v$z,v$E._render.receiveShadow=v$D._render.receiveShadow,this._batchOwners.push(v$E)):v$E=this._batchOwners[v$m],v$E._render._renderUpdate(v$U),v$R._sprite3D=v$E,v$n.push(v$R)}else v$R._batchIndexEnd=v$D._batchIndexEnd}},v$a._beforeRender=function(v$n){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},v$a._render=function(v$n){var v$a=v$n.renderElement,v$U=v$a._batchIndexStart,v$x=v$a._batchIndexEnd-v$U;v$u.mainContext.drawElements(4,v$x,5123,2*v$U),v$N.drawCall++,v$N.trianglesFaces+=v$x/3},v$a.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},v$a._getVertexBuffer=function(v$n){return void 0===v$n&&(v$n=0),this._vertexBuffer},v$p}(),v$Ma=function(v$n){function v$a(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,v$a.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}v$q(v$a,"laya.d3.core.ComponentNode",v$R);var v$U=v$a.prototype;return v$U.addComponent=function(v$n){var v$a,v$U=this._componentsMap.indexOf(v$n);if(-1===v$U)v$a=[],this._componentsMap.push(v$n),this._typeComponentsIndices.push(v$a);else if(v$a=this._typeComponentsIndices[v$U],this._components[v$a[0]].isSingleton)throw new Error("无法单实例创建"+v$n+"组件，"+v$n+"组件已存在！");var v$x=v$D.getInstance(v$n);return v$a.push(this._components.length),this._components.push(v$x),v$x instanceof laya.d3.component.Script&&this._scripts.push(v$x),v$x._initialize(this),v$x},v$U._removeComponent=function(v$n,v$a){var v$U=this._typeComponentsIndices[v$n],v$x=v$U[v$a],v$D=this._components[v$x];this._components.splice(v$x,1),v$D instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(v$D),1),v$U.splice(v$a,1),0===v$U.length&&(this._typeComponentsIndices.splice(v$n,1),this._componentsMap.splice(v$n,1));for(var v$p=0,v$Q=this._componentsMap.length;v$p<v$Q;v$p++)for(var v$V=(v$U=this._typeComponentsIndices[v$p]).length-1;0<=v$V;v$V--){var v$y=v$U[v$V];if(!(v$x<v$y))break;v$U[v$V]=--v$y}v$D._destroy()},v$U.getComponentByType=function(v$n,v$a){void 0===v$a&&(v$a=0);var v$U=this._componentsMap.indexOf(v$n);return-1===v$U?null:this._components[this._typeComponentsIndices[v$U][v$a]]},v$U.getComponentsByType=function(v$n,v$a){var v$U=this._componentsMap.indexOf(v$n);if(-1!==v$U){var v$x=this._typeComponentsIndices[v$U],v$D=v$x.length;v$a.length=v$D;for(var v$p=0;v$p<v$D;v$p++)v$a[v$p]=this._components[v$x[v$p]]}else v$a.length=0},v$U.getComponentByIndex=function(v$n){return this._components[v$n]},v$U.removeComponentByType=function(v$n,v$a){void 0===v$a&&(v$a=0);var v$U=this._componentsMap.indexOf(v$n);-1!==v$U&&this._removeComponent(v$U,v$a)},v$U.removeComponentsByType=function(v$n){var v$a=this._componentsMap.indexOf(v$n);if(-1!==v$a)for(var v$U=this._typeComponentsIndices[v$a],v$x=0,v$D=v$U.length;v$x<v$D;v$U.length<v$D?v$D--:v$x++)this._removeComponent(v$a,v$x)},v$U.removeAllComponent=function(){for(var v$n=0,v$a=this._componentsMap.length;v$n<v$a;this._componentsMap.length<v$a?v$a--:v$n++)this.removeComponentsByType(this._componentsMap[v$n])},v$U._updateComponents=function(v$n){for(var v$a=0,v$U=this._components.length;v$a<v$U;v$a++){var v$x=this._components[v$a];!v$x.started&&(v$x._start(v$n),v$x.started=!0),v$x.enable&&v$x._update(v$n)}},v$U._lateUpdateComponents=function(v$n){for(var v$a=0;v$a<this._components.length;v$a++){var v$U=this._components[v$a];!v$U.started&&(v$U._start(v$n),v$U.started=!0),v$U.enable&&v$U._lateUpdate(v$n)}},v$U._preRenderUpdateComponents=function(v$n){for(var v$a=0;v$a<this._components.length;v$a++){var v$U=this._components[v$a];!v$U.started&&(v$U._start(v$n),v$U.started=!0),v$U.enable&&v$U._preRenderUpdate(v$n)}},v$U._postRenderUpdateComponents=function(v$n){for(var v$a=0;v$a<this._components.length;v$a++){var v$U=this._components[v$a];!v$U.started&&(v$U._start(v$n),v$U.started=!0),v$U.enable&&v$U._postRenderUpdate(v$n)}},v$a}(),v$Za=function(v$x){function v$n(){v$n.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new v$ia,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new v$Va(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}v$q(v$n,"laya.d3.core.material.BaseMaterial",v$x);var v$a=v$n.prototype;return v$Y.imps(v$a,{"laya.d3.core.IClone":!0}),v$a._addShaderDefine=function(v$n){this._shaderDefineValue|=v$n},v$a._removeShaderDefine=function(v$n){this._shaderDefineValue&=~v$n},v$a._addDisablePublicShaderDefine=function(v$n){this._disablePublicShaderDefine|=v$n},v$a._removeDisablePublicShaderDefine=function(v$n){this._disablePublicShaderDefine&=~v$n},v$a._setBuffer=function(v$n,v$a){this._shaderValues.setValue(v$n,v$a),this._values[v$n]=v$a},v$a._getBuffer=function(v$n){return this._values[v$n]},v$a._setMatrix4x4=function(v$n,v$a){this._shaderValues.setValue(v$n,v$a?v$a.elements:null),this._values[v$n]=v$a},v$a._getMatrix4x4=function(v$n){return this._values[v$n]},v$a._setInt=function(v$n,v$a){this._shaderValues.setValue(v$n,v$a),this._values[v$n]=v$a},v$a._getInt=function(v$n){return this._values[v$n]},v$a._setNumber=function(v$n,v$a){this._shaderValues.setValue(v$n,v$a),this._values[v$n]=v$a},v$a._getNumber=function(v$n){return this._values[v$n]},v$a._setBool=function(v$n,v$a){this._shaderValues.setValue(v$n,v$a),this._values[v$n]=v$a},v$a._getBool=function(v$n){return this._values[v$n]},v$a._setVector2=function(v$n,v$a){this._shaderValues.setValue(v$n,v$a?v$a.elements:null),this._values[v$n]=v$a},v$a._getVector2=function(v$n){return this._values[v$n]},v$a._setColor=function(v$n,v$a){this._shaderValues.setValue(v$n,v$a?v$a.elements:null),this._values[v$n]=v$a},v$a._getColor=function(v$n){return this._values[v$n]},v$a._setTexture=function(v$n,v$a){var v$U=this._values[v$n];this._values[v$n]=v$a,this._shaderValues.setValue(v$n,v$a),0<this.referenceCount&&(v$U&&v$U._removeReference(),v$a&&v$a._addReference())},v$a._getTexture=function(v$n){return this._values[v$n]},v$a._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},v$a._getShader=function(v$n,v$a,v$U){var v$x=(v$n|v$a)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(v$x,v$U,this._shaderDefineValue),this._shader},v$a._setRenderStateBlendDepth=function(){var v$n=v$u.mainContext;switch(v$c.setDepthMask(v$n,this.depthWrite),0===this.depthTest?v$c.setDepthTest(v$n,!1):(v$c.setDepthTest(v$n,!0),v$c.setDepthFunc(v$n,this.depthTest)),this.blend){case 0:v$c.setBlend(v$n,!1);break;case 1:v$c.setBlend(v$n,!0),v$c.setBlendFunc(v$n,this.srcBlend,this.dstBlend);break;case 2:v$c.setBlend(v$n,!0)}},v$a._setRenderStateFrontFace=function(v$n,v$a){var v$U=v$u.mainContext,v$x=0;switch(this.cull){case 0:v$c.setCullFace(v$U,!1);break;case 1:v$c.setCullFace(v$U,!0),v$x=v$n?v$a&&v$a._isFrontFaceInvert?2305:2304:v$a&&v$a._isFrontFaceInvert?2304:2305,v$c.setFrontFace(v$U,v$x);break;case 2:v$c.setCullFace(v$U,!0),v$x=v$n?v$a&&v$a._isFrontFaceInvert?2304:2305:v$a&&v$a._isFrontFaceInvert?2305:2304,v$c.setFrontFace(v$U,v$x)}},v$a.onAsynLoaded=function(v$n,v$a,v$U){var v$x=v$a[0],v$D=v$a[1];switch(v$x.version){case"LAYAMATERIAL:01":var v$p=0,v$Q=0,v$V=v$x.props;for(var v$y in v$V)switch(v$y){case"vectors":var v$R=v$V[v$y];for(v$p=0,v$Q=v$R.length;v$p<v$Q;v$p++){var v$X=v$R[v$p],v$z=v$X.value;switch(v$z.length){case 2:this[v$X.name]=new v$pa(v$z[0],v$z[1]);break;case 3:this[v$X.name]=new v$Qa(v$z[0],v$z[1],v$z[2]);break;case 4:this[v$X.name]=new v$Va(v$z[0],v$z[1],v$z[2],v$z[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var v$i=v$V[v$y];for(v$p=0,v$Q=v$i.length;v$p<v$Q;v$p++){var v$q=v$i[v$p],v$E=v$q.path;v$E&&(this[v$q.name]=v$P.getRes(v$D[v$E]))}break;case"defines":var v$m=v$V[v$y];for(v$p=0,v$Q=v$m.length;v$p<v$Q;v$p++){var v$b=this._shaderCompile.getMaterialDefineByName(v$m[v$p]);this._addShaderDefine(v$b)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[v$y]=v$V[v$y];break;case"renderQueue":switch(v$V[v$y]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[v$y]=v$V[v$y]}break;case"LAYAMATERIAL:02":for(v$y in v$V=v$x.props)switch(v$y){case"vectors":for(v$p=0,v$Q=(v$R=v$V[v$y]).length;v$p<v$Q;v$p++)switch((v$z=(v$X=v$R[v$p]).value).length){case 2:this[v$X.name]=new v$pa(v$z[0],v$z[1]);break;case 3:this[v$X.name]=new v$Qa(v$z[0],v$z[1],v$z[2]);break;case 4:this[v$X.name]=new v$Va(v$z[0],v$z[1],v$z[2],v$z[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(v$p=0,v$Q=(v$i=v$V[v$y]).length;v$p<v$Q;v$p++)(v$E=(v$q=v$i[v$p]).path)&&(this[v$q.name]=v$P.getRes(v$D[v$E]));break;case"defines":for(v$p=0,v$Q=(v$m=v$V[v$y]).length;v$p<v$Q;v$p++)v$b=this._shaderCompile.getMaterialDefineByName(v$m[v$p]),this._addShaderDefine(v$b);break;default:this[v$y]=v$V[v$y]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},v$a._addReference=function(){v$x.prototype._addReference.call(this);for(var v$n=0,v$a=this._values.length;v$n<v$a;v$n++){var v$U=this._values[v$n];v$U&&v$U instanceof laya.d3.resource.BaseTexture&&v$U._addReference()}},v$a._removeReference=function(){v$x.prototype._removeReference.call(this);for(var v$n=0,v$a=this._values.length;v$n<v$a;v$n++){var v$U=this._values[v$n];v$U&&v$U instanceof laya.d3.resource.BaseTexture&&v$U._removeReference()}},v$a.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},v$a.setShaderName=function(v$n){var v$a=v$la.nameKey.getID(v$n);if(-1===v$a)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=v$Na._preCompileShader[v$a]},v$a.cloneTo=function(v$n){var v$a=v$n;v$a.name=this.name,v$a.cull=this.cull,v$a.blend=this.blend,v$a.srcBlend=this.srcBlend,v$a.dstBlend=this.dstBlend,v$a.srcBlendRGB=this.srcBlendRGB,v$a.dstBlendRGB=this.dstBlendRGB,v$a.srcBlendAlpha=this.srcBlendAlpha,v$a.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(v$a.blendConstColor),v$a.blendEquation=this.blendEquation,v$a.blendEquationRGB=this.blendEquationRGB,v$a.blendEquationAlpha=this.blendEquationAlpha,v$a.depthTest=this.depthTest,v$a.depthWrite=this.depthWrite,v$a.renderQueue=this.renderQueue,v$a._shader=this._shader,v$a._disablePublicShaderDefine=this._disablePublicShaderDefine,v$a._shaderDefineValue=this._shaderDefineValue;var v$U,v$x=0,v$D=v$a._shaderValues;v$a._shaderValues.data.length=this._shaderValues.data.length;var v$p=this._values.length,v$Q=v$a._values;for(v$x=0,v$U=v$Q.length=v$p;v$x<v$U;v$x++){var v$V=this._values[v$x];if(v$V)if("number"==typeof v$V)v$Q[v$x]=v$V,v$D.data[v$x]=v$V;else if("number"==typeof v$V&&Math.floor(v$V)==v$V)v$Q[v$x]=v$V,v$D.data[v$x]=v$V;else if("boolean"==typeof v$V)v$Q[v$x]=v$V,v$D.data[v$x]=v$V;else if(v$V instanceof laya.d3.math.Vector2){var v$y=v$Q[v$x]||(v$Q[v$x]=new v$pa);v$V.cloneTo(v$y),v$D.data[v$x]=v$y.elements}else if(v$V instanceof laya.d3.math.Vector3){var v$R=v$Q[v$x]||(v$Q[v$x]=new v$Qa);v$V.cloneTo(v$R),v$D.data[v$x]=v$R.elements}else if(v$V instanceof laya.d3.math.Vector4){var v$X=v$Q[v$x]||(v$Q[v$x]=new v$Va);v$V.cloneTo(v$X),v$D.data[v$x]=v$X.elements}else if(v$V instanceof laya.d3.math.Matrix4x4){var v$z=v$Q[v$x]||(v$Q[v$x]=new v$na);v$V.cloneTo(v$z),v$D.data[v$x]=v$z.elements}else v$V instanceof laya.d3.resource.BaseTexture&&(v$Q[v$x]=v$V,v$D.data[v$x]=v$V)}},v$a.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$E(0,v$a,"alphaTestValue",function(){return this._getNumber(0)},function(v$n){this._setNumber(0,v$n)}),v$E(0,v$a,"alphaTest",function(){return this._alphaTest},function(v$n){(this._alphaTest=v$n)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),v$n.__init__=function(){v$n.SHADERDEFINE_ALPHATEST=v$n.shaderDefines.registerDefine("ALPHATEST")},v$n.RENDERQUEUE_OPAQUE=2e3,v$n.RENDERQUEUE_ALPHATEST=2450,v$n.RENDERQUEUE_TRANSPARENT=3e3,v$n.CULL_NONE=0,v$n.CULL_FRONT=1,v$n.CULL_BACK=2,v$n.BLEND_DISABLE=0,v$n.BLEND_ENABLE_ALL=1,v$n.BLEND_ENABLE_SEPERATE=2,v$n.BLENDPARAM_ZERO=0,v$n.BLENDPARAM_ONE=1,v$n.BLENDPARAM_SRC_COLOR=768,v$n.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,v$n.BLENDPARAM_DST_COLOR=774,v$n.BLENDPARAM_ONE_MINUS_DST_COLOR=775,v$n.BLENDPARAM_SRC_ALPHA=770,v$n.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,v$n.BLENDPARAM_DST_ALPHA=772,v$n.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,v$n.BLENDPARAM_SRC_ALPHA_SATURATE=776,v$n.BLENDEQUATION_ADD=0,v$n.BLENDEQUATION_SUBTRACT=1,v$n.BLENDEQUATION_REVERSE_SUBTRACT=2,v$n.DEPTHTEST_OFF=0,v$n.DEPTHTEST_NEVER=512,v$n.DEPTHTEST_LESS=513,v$n.DEPTHTEST_EQUAL=514,v$n.DEPTHTEST_LEQUAL=515,v$n.DEPTHTEST_GREATER=516,v$n.DEPTHTEST_NOTEQUAL=517,v$n.DEPTHTEST_GEQUAL=518,v$n.DEPTHTEST_ALWAYS=519,v$n.SHADERDEFINE_ALPHATEST=1,v$n.ALPHATESTVALUE=0,v$z(v$n,["shaderDefines",function(){return this.shaderDefines=new v$Xa}]),v$n}(v$b),v$ua=function(v$n){function v$a(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,v$a.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}v$q(v$a,"laya.d3.resource.BaseTexture",v$b);var v$U=v$a.prototype;return v$E(0,v$U,"width",function(){return this._width}),v$E(0,v$U,"repeat",function(){return this._repeat},function(v$n){if(this._repeat!==v$n&&(this._repeat=v$n,this._source)){var v$a=v$u.mainContext;v$c.bindTexture(v$a,this._type,this._source),v$K.isPOT(this._width,this._height)&&this._repeat?(v$a.texParameteri(this._type,10242,10497),v$a.texParameteri(this._type,10243,10497)):(v$a.texParameteri(this._type,10242,33071),v$a.texParameteri(this._type,10243,33071))}}),v$E(0,v$U,"height",function(){return this._height}),v$E(0,v$U,"magFifter",function(){return this._magFifter},function(v$n){(this._magFifter=v$n)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(v$n)}),v$E(0,v$U,"wrapModeV",function(){return this._wrapModeV}),v$E(0,v$U,"size",function(){return this._size}),v$E(0,v$U,"wrapModeU",function(){return this._wrapModeU}),v$E(0,v$U,"mipmap",function(){return this._mipmap},function(v$n){this._mipmap=v$n,this._mipmap!=v$n&&this._conchTexture&&this._conchTexture.setMipMap(v$n)}),v$E(0,v$U,"minFifter",function(){return this._minFifter},function(v$n){this._minFifter=v$n,this._minFifter!=v$n&&this._conchTexture&&this._conchTexture.setMinFifter(v$n)}),v$E(0,v$U,"format",function(){return this._format}),v$E(0,v$U,"source",function(){return this.activeResource(),this._source}),v$E(0,v$U,"defaulteTexture",function(){return v$Ba.grayTexture}),v$a.WARPMODE_REPEAT=0,v$a.WARPMODE_CLAMP=1,v$a}(),v$ca=function(v$n){function v$a(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,v$a.__super.call(this),this._boundingBoxCorners=v$x(8,null)}v$q(v$a,"laya.d3.resource.models.BaseMesh",v$b);var v$U=v$a.prototype;return v$U._getPositions=function(){throw new Error("未Override,请重载该属性！")},v$U._generateBoundingObject=function(){this._boundingSphere=new v$rn(new v$Qa,0),v$rn.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new v$Cn(new v$Qa,new v$Qa),v$Cn.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},v$U.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},v$U.getRenderElement=function(v$n){throw new Error("未Override,请重载该属性！")},v$E(0,v$U,"subMeshCount",function(){return this._subMeshCount}),v$E(0,v$U,"boundingBox",function(){return this._boundingBox}),v$E(0,v$U,"boundingBoxCorners",function(){return this._boundingBoxCorners}),v$E(0,v$U,"boundingSphere",function(){return this._boundingSphere}),v$a}(),v$Ha=(function(v$n){function v$a(){v$a.__super.call(this)}v$q(v$a,"laya.d3.component.Script",v$Ta);var v$U=v$a.prototype;v$U.onTriggerEnter=function(v$n){},v$U.onTriggerExit=function(v$n){},v$U.onTriggerStay=function(v$n){},v$E(0,v$U,"isSingleton",function(){return v$a._isSingleton}),v$a._isSingleton=!1}(),function(v$n){function v$a(v$n){this._owner=null,this._sharedMesh=null,v$a.__super.call(this),this._owner=v$n}v$q(v$a,"laya.d3.core.MeshFilter",v$n);var v$U=v$a.prototype;return v$U._sharedMeshLoaded=function(){this.event("loaded")},v$U._destroy=function(){v$n.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},v$E(0,v$U,"sharedMesh",function(){return this._sharedMesh},function(v$n){var v$a=this._sharedMesh;v$a&&v$a._removeReference(),(this._sharedMesh=v$n)._addReference(),this.event("meshchanged",[this,v$a,v$n]),v$n.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),v$E(0,v$U,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),v$E(0,v$U,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),v$E(0,v$U,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),v$E(0,v$U,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),v$a}(v$Ka)),v$Ga=function(v$n){function v$a(v$n){v$a.__super.call(this,v$n),v$n.meshFilter.on("meshchanged",this,this._onMeshChanged)}v$q(v$a,"laya.d3.core.MeshRender",v$Ya);var v$U=v$a.prototype;return v$U._onMeshChanged=function(v$n,v$a,v$U){v$U.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:v$U.once("loaded",this,this._onMeshLoaed)},v$U._onMeshLoaed=function(v$n,v$a){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},v$U._calculateBoundingSphereByInitSphere=function(v$n){var v$a=NaN,v$U=this._owner.transform,v$x=v$U.scale.elements,v$D=Math.abs(v$x[0]),v$p=Math.abs(v$x[1]),v$Q=Math.abs(v$x[2]);v$a=v$p<=v$D&&v$Q<=v$D?v$D:v$Q<=v$p?v$p:v$Q,v$Qa.transformCoordinate(v$n.center,v$U.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=v$n.radius*v$a},v$U._calculateBoundBoxByInitCorners=function(v$n){for(var v$a=this._owner.transform.worldMatrix,v$U=0;v$U<8;v$U++)v$Qa.transformCoordinate(v$n[v$U],v$a,v$Ya._tempBoundBoxCorners[v$U]);v$Cn.createfromPoints(v$Ya._tempBoundBoxCorners,this._boundingBox)},v$U._calculateBoundingSphere=function(){var v$n=this._owner.meshFilter.sharedMesh;null==v$n||null==v$n.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(v$n.boundingSphere)},v$U._calculateBoundingBox=function(){var v$n=this._owner.meshFilter.sharedMesh;null==v$n||null==v$n.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(v$n.boundingBoxCorners)},v$U._renderUpdate=function(v$n){var v$a=this._owner.transform;if(v$a){this._setShaderValueMatrix4x4(0,v$a.worldMatrix);var v$U=this._owner.getProjectionViewWorldMatrix(v$n);this._setShaderValueMatrix4x4(1,v$U)}else this._setShaderValueMatrix4x4(0,v$na.DEFAULT),this._setShaderValueMatrix4x4(1,v$n);return v$Pa.debugMode&&this._renderRenderableBoundBox(),!0},v$a}(),v$Ia=function(v$a){function v$x(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,v$x.__super.call(this),this._renderState=new v$s,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new v$ia,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new v$an,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new v$Qa(.7,.7,.7),this.ambientColor=new v$Qa(.212,.227,.259),v$u.shaderHighPrecision&&this.addShaderDefine(v$Na.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}v$q(v$x,"laya.d3.core.scene.Scene",v$a);var v$n=v$x.prototype;return v$Y.imps(v$n,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),v$n._setUrl=function(v$n){this._url=v$n},v$n._getGroup=function(){return this._group},v$n._setGroup=function(v$n){this._group=v$n},v$n._display=function(){v$Y.stage._scenes.push(this),v$Y.stage._scenes.sort(v$x._sortScenes);for(var v$n=0,v$a=this._childs.length;v$n<v$a;v$n++){var v$U=this._childs[v$n];v$U.active&&v$U._activeHierarchy()}},v$n._unDisplay=function(){var v$n=v$Y.stage._scenes;v$n.splice(v$n.indexOf(this),1);for(var v$a=0,v$U=this._childs.length;v$a<v$U;v$a++){var v$x=this._childs[v$a];v$x.active&&v$x._inActiveHierarchy()}},v$n._addChild3D=function(v$n){v$n.transform._onWorldTransform(),v$n._setBelongScene(this),this.displayedInStage&&v$n.active&&v$n._activeHierarchy()},v$n._removeChild3D=function(v$n){v$n.transform.parent=null,this.displayedInStage&&v$n.active&&v$n._inActiveHierarchy(),v$n._setUnBelongScene()},v$n.initOctree=function(v$n,v$a,v$U,v$x,v$D){void 0===v$D&&(v$D=6),this.treeSize=new v$Qa(v$n,v$a,v$U),this.treeLevel=v$D,this.treeRoot=new v$C(this,0),this.treeRoot.init(v$x,this.treeSize)},v$n._prepareUpdateToRenderState=function(v$n,v$a){v$a.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,v$a.scene=this},v$n._prepareSceneToRender=function(v$n){var v$a=this._lights.length;if(0<v$a)for(var v$U=0,v$x=0;v$x<v$a&&!(this._lights[v$x]._prepareToScene(v$n)&&++v$U>=this._enableLightCount);v$x++);},v$n._updateChilds=function(v$n){for(var v$a=0,v$U=this._childs.length;v$a<v$U;++v$a)this._childs[v$a]._update(v$n)},v$n._preRenderScene=function(v$n,v$a,v$U){var v$x,v$D=v$a._viewMatrix,v$p=v$a._projectionMatrix,v$Q=v$a._projectionViewMatrix,v$V=0,v$y=v$a.camera;for(v$y.useOcclusionCulling?this.treeRoot?v$Un.renderObjectCullingOctree(v$U,this,v$y,v$D,v$p,v$Q):v$Un.renderObjectCulling(v$U,this,v$y,v$D,v$p,v$Q):v$Un.renderObjectCullingNoBoundFrustum(this,v$y,v$D,v$p,v$Q),v$V=0,v$x=this._quenes.length;v$V<v$x;v$V++)this._quenes[v$V]&&this._quenes[v$V]._preRender(v$a)},v$n._clear=function(v$n,v$a){var v$U=v$a._viewport,v$x=v$a.camera,v$D=v$U.x,v$p=v$x.renderTargetSize.height-v$U.y-v$U.height,v$Q=v$U.width,v$V=v$U.height;v$n.viewport(v$D,v$p,v$Q,v$V);var v$y=256,v$R=v$x.renderTarget;switch(v$x.clearFlag){case 0:var v$X=v$x.clearColor;if(v$X){v$n.enable(3089),v$n.scissor(v$D,v$p,v$Q,v$V);var v$z=v$X.elements;v$n.clearColor(v$z[0],v$z[1],v$z[2],v$z[3]),v$y|=16384}if(v$R)switch(v$X||(v$y=16384),v$R.depthStencilFormat){case 33189:v$y|=256;break;case 36168:v$y|=1024;break;case 34041:v$y|=256,v$y|=1024}v$n.clear(v$y),v$X&&v$n.disable(3089);break;case 1:case 2:if(v$R)switch(v$y=16384,v$R.depthStencilFormat){case 33189:v$y|=256;break;case 36168:v$y|=1024;break;case 34041:v$y|=256,v$y|=1024}v$n.clear(v$y);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},v$n._renderScene=function(v$n,v$a){var v$U,v$x,v$D=v$a.camera,v$p=0;for(v$p=0;v$p<2;v$p++)(v$x=this._quenes[v$p])&&(v$D.renderTarget?v$x._render(v$a,!0):v$x._render(v$a,!1));if(1===v$D.clearFlag){var v$Q=v$D.sky;v$Q&&(v$c.setCullFace(v$n,!1),v$c.setDepthFunc(v$n,515),v$c.setDepthMask(v$n,!1),v$Q._render(v$a),v$c.setDepthFunc(v$n,513),v$c.setDepthMask(v$n,!0))}for(v$p=2,v$U=this._quenes.length;v$p<v$U;v$p++)(v$x=this._quenes[v$p])&&(v$x._sortAlpha(v$a.camera.transform.position),v$D.renderTarget?v$x._render(v$a,!0):v$x._render(v$a,!1))},v$n._set3DRenderConfig=function(v$n){v$n.disable(3042),v$c._blend=!1,v$n.blendFunc(770,771),v$c._sFactor=770,v$c._dFactor=771,v$n.disable(2929),v$c._depthTest=!1,v$n.enable(2884),v$c._cullFace=!0,v$n.depthMask(1),v$c._depthMask=!0,v$n.frontFace(2304),v$c._frontFace=2304},v$n._set2DRenderConfig=function(v$n){v$c.setBlend(v$n,!0),v$c.setBlendFunc(v$n,1,771),v$c.setDepthTest(v$n,!1),v$c.setCullFace(v$n,!1),v$c.setDepthMask(v$n,!0),v$c.setFrontFace(v$n,2305),v$n.viewport(0,0,v$X.width,v$X.height)},v$n._parseCustomProps=function(v$n,v$a,v$U,v$x){var v$D=v$x.customProps.lightmaps,v$p=v$D.length,v$Q=this._lightmaps;v$Q.length=v$p;for(var v$V=0;v$V<v$p;v$V++)v$Q[v$V]=v$P.getRes(v$a[v$D[v$V].replace(".exr",".png")]);this.setlightmaps(v$Q);var v$y=v$x.customProps.ambientColor;v$y&&(this.ambientColor=new v$Qa(v$y[0],v$y[1],v$y[2]));var v$R=v$x.customProps.fogColor;v$R&&(this.fogColor=new v$Qa(v$R[0],v$R[1],v$R[2]))},v$n._addLight=function(v$n){this._lights.indexOf(v$n)<0&&this._lights.push(v$n)},v$n._removeLight=function(v$n){var v$a=this._lights.indexOf(v$n);0<=v$a&&this._lights.splice(v$a,1)},v$n._updateScene=function(){var v$n=this._renderState;this._prepareUpdateToRenderState(v$u.mainContext,v$n),this._updateComponents(v$n),this._updateChilds(v$n),this._lateUpdateComponents(v$n),this._time+=v$n.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},v$n._updateSceneConch=function(){var v$n=this._renderState;this._prepareUpdateToRenderState(v$u.mainContext,v$n),this._updateComponents(v$n),this._lateUpdateComponents(v$n),this._prepareSceneToRender(v$n);for(var v$a=0,v$U=this._cameraPool.length;v$a<v$U;v$a++){var v$x=this._cameraPool[v$a];(v$n.camera=v$x)._prepareCameraToRender()}},v$n._preRenderShadow=function(v$n,v$a,v$U,v$x,v$D){this.treeRoot?v$Un.renderShadowObjectCullingOctree(this,v$a,v$U,v$x,v$D):v$Un.renderShadowObjectCulling(this,v$a,v$U,v$x,v$D);for(var v$p=0,v$Q=v$U.length;v$p<v$Q;v$p++)v$U[v$p]&&v$U[v$p]._preRender(v$n)},v$n._renderShadowMap=function(v$n,v$a,v$U){var v$x=this.parallelSplitShadowMaps[0];v$x._calcAllLightCameraInfo(v$U);var v$D,v$p,v$Q,v$V=v$x.PSSMNum;if(this._preRenderShadow(v$a,v$x._lightCulling,v$x._shadowQuenes,v$x._lightVPMatrix[0],v$V),this.addShaderDefine(v$qa.SHADERDEFINE_CAST_SHADOW),1<v$V)for(var v$y=0;v$y<v$V;v$y++)v$D=v$x.getRenderTarget(v$y+1),v$x.beginRenderTarget(v$y+1),v$n.clearColor(1,1,1,1),v$n.clear(16640),v$n.viewport(0,0,v$D.width,v$D.height),v$a.camera=v$Q=v$x.getLightCamera(v$y),v$Q._prepareCameraToRender(),v$Q._prepareCameraViewProject(v$Q.viewMatrix,v$Q.projectionMatrix),v$a._projectionViewMatrix=v$x._lightVPMatrix[v$y+1],(v$p=v$x._shadowQuenes[v$y])._preRender(v$a),v$p._renderShadow(v$a,!1),v$x.endRenderTarget(v$y+1);else v$D=v$x.getRenderTarget(1),v$x.beginRenderTarget(1),v$n.clearColor(1,1,1,1),v$n.clear(16640),v$n.viewport(0,0,v$D.width,v$D.height),v$a.camera=v$Q=v$x.getLightCamera(0),v$Q._prepareCameraToRender(),v$Q._prepareCameraViewProject(v$Q.viewMatrix,v$Q.projectionMatrix),v$a._projectionViewMatrix=v$x._lightVPMatrix[0],(v$p=v$x._shadowQuenes[0])._preRender(v$a),v$p._renderShadow(v$a,!0),v$x.endRenderTarget(1);this.removeShaderDefine(v$qa.SHADERDEFINE_CAST_SHADOW)},v$n.addTreeNode=function(v$n){this.treeRoot.addTreeNode(v$n)},v$n.removeTreeNode=function(v$n){this.treeSize&&v$n._treeNode&&v$n._treeNode.removeObject(v$n)},v$n.setlightmaps=function(v$n){this._lightmaps=v$n;for(var v$a=0,v$U=this._renderableSprite3Ds.length;v$a<v$U;v$a++)this._renderableSprite3Ds[v$a]._render._applyLightMapParams()},v$n.getlightmaps=function(){return this._lightmaps},v$n.addChildAt=function(v$n,v$a){if(!(v$n instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(v$n&&v$n.__className));if(!v$n||this.destroyed||v$n===this)return v$n;if(v$n.zOrder&&this._set$P("hasZorder",!0),0<=v$a&&v$a<=this._childs.length){if(v$n._parent===this){var v$U=this.getChildIndex(v$n);this._childs.splice(v$U,1),this._childs.splice(v$a,0,v$n),this.conchModel&&(this.conchModel.removeChild(v$n.conchModel),this.conchModel.addChildAt(v$n.conchModel,v$a)),this._childChanged()}else v$n.parent&&v$n.parent.removeChild(v$n),this._childs===v$R.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(v$a,0,v$n),this.conchModel&&this.conchModel.addChildAt(v$n.conchModel,v$a),(v$n.parent=this)._addChild3D(v$n);return v$n}throw new Error("appendChildAt:The index is out of bounds")},v$n.addChild=function(v$n){if(!(v$n instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!v$n||this.destroyed||v$n===this)return v$n;if(v$n.zOrder&&this._set$P("hasZorder",!0),v$n._parent===this){var v$a=this.getChildIndex(v$n);v$a!==this._childs.length-1&&(this._childs.splice(v$a,1),this._childs.push(v$n),this.conchModel&&(this.conchModel.removeChild(v$n.conchModel),this.conchModel.addChildAt(v$n.conchModel,this._childs.length-1)),this._childChanged())}else v$n.parent&&v$n.parent.removeChild(v$n),this._childs===v$R.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(v$n),this.conchModel&&this.conchModel.addChildAt(v$n.conchModel,this._childs.length-1),(v$n.parent=this)._childChanged(),this._addChild3D(v$n);return v$n},v$n.removeChildAt=function(v$n){var v$a=this.getChildAt(v$n);return v$a&&(this._removeChild3D(v$a),this._childs.splice(v$n,1),this.conchModel&&this.conchModel.removeChild(v$a.conchModel),v$a.parent=null),v$a},v$n.removeChildren=function(v$n,v$a){if(void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=2147483647),this._childs&&0<this._childs.length){var v$U=this._childs;if(0===v$n&&v$p<=v$a){var v$x=v$U;this._childs=v$R.ARRAY_EMPTY}else v$x=v$U.splice(v$n,v$a-v$n);for(var v$D=0,v$p=v$x.length;v$D<v$p;v$D++)this._removeChild3D(v$x[v$D]),v$x[v$D].parent=null,this.conchModel&&this.conchModel.removeChild(v$x[v$D].conchModel)}return this},v$n.addFrustumCullingObject=function(v$n){this.treeRoot?this.addTreeNode(v$n):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(v$n):this._cullingRenders[this._cullingRendersLength]=v$n,v$n._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},v$n.removeFrustumCullingObject=function(v$n){if(this.treeRoot)this.removeTreeNode(v$n);else{this._cullingRendersLength--;var v$a=v$n._indexInSceneFrustumCullingObjects;if(v$a!==this._cullingRendersLength){var v$U=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[v$a]=v$U)._indexInSceneFrustumCullingObjects=v$a,v$n._indexInSceneFrustumCullingObjects=-1}}},v$n.getRenderQueue=function(v$n){return v$n<3e3?this._quenes[1]||(this._quenes[1]=new v$w(this)):this._quenes[2]||(this._quenes[2]=new v$w(this))},v$n.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new v$w(this)},v$n.addShaderDefine=function(v$n){this._shaderDefineValue|=v$n},v$n.removeShaderDefine=function(v$n){this._shaderDefineValue&=~v$n},v$n.addScript=function(v$n){return this._addComponent(v$n)},v$n.getScriptByType=function(v$n,v$a){return void 0===v$a&&(v$a=0),this._getComponentByType(v$n,v$a)},v$n.getScriptsByType=function(v$n,v$a){this._getComponentsByType(v$n,v$a)},v$n.getScriptByIndex=function(v$n){return this._getComponentByIndex(v$n)},v$n.removeScriptByType=function(v$n,v$a){void 0===v$a&&(v$a=0),this._removeComponentByType(v$n,v$a)},v$n.removeScriptsByType=function(v$n){this._removeComponentByType(v$n)},v$n.removeAllScript=function(){this._removeAllComponent()},v$n.render=function(v$n,v$a,v$U){(v$m._context.ctx._renderKey=0)<this._childs.length&&v$n.addRenderObject(this)},v$n.renderSubmit=function(){var v$n=v$u.mainContext,v$a=this._renderState;this._set3DRenderConfig(v$n),this._prepareSceneToRender(this._renderState);var v$U,v$x=0,v$D=0;if(v$Pa.debugMode||v$C.debugMode)for(v$x=0,v$D=this._cameraPool.length;v$x<v$D;v$x++)v$U=this._cameraPool[v$x],v$Pa._debugPhasorSprite.begin(1,v$U),v$U.activeInHierarchy&&v$U._renderCamera(v$n,v$a,this),v$Pa._debugPhasorSprite.end();else for(v$x=0,v$D=this._cameraPool.length;v$x<v$D;v$x++)(v$U=this._cameraPool[v$x]).activeInHierarchy&&v$U._renderCamera(v$n,v$a,this);return this._set2DRenderConfig(v$n),1},v$n.onAsynLoaded=function(v$n,v$a,v$U){var v$x=v$a[0];if("Scene"!==v$x.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var v$D=v$a[1];v$ba._createNodeByJson(this,v$x,this,v$D),this.event("hierarchyloaded",[this]),this.__loaded=!0},v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),this.destroyed||(v$a.prototype.destroy.call(this,v$n),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,v$P.clearRes(this.url),this.loaded||v$Pa._cancelLoadByUrl(this.url))},v$n.getRenderType=function(){return 0},v$n.releaseRender=function(){},v$n._addComponent=function(v$n){var v$a,v$U=this._componentsMap.indexOf(v$n);if(-1===v$U)v$a=[],this._componentsMap.push(v$n),this._typeComponentsIndices.push(v$a);else if(v$a=this._typeComponentsIndices[v$U],this._components[v$a[0]].isSingleton)throw new Error("无法单实例创建"+v$n+"组件，"+v$n+"组件已存在！");var v$x=v$D.getInstance(v$n);v$a.push(this._components.length),this._components.push(v$x);return v$x._initialize(this),v$x},v$n._removeComponent=function(v$n,v$a){var v$U=this._typeComponentsIndices[v$n],v$x=v$U[v$a],v$D=this._components[v$x];this._components.splice(v$x,1),v$U.splice(v$a,1),0===v$U.length&&(this._typeComponentsIndices.splice(v$n,1),this._componentsMap.splice(v$n,1));for(var v$p=0,v$Q=this._componentsMap.length;v$p<v$Q;v$p++)for(var v$V=(v$U=this._typeComponentsIndices[v$p]).length-1;0<=v$V;v$V--){var v$y=v$U[v$V];if(!(v$x<v$y))break;v$U[v$V]=--v$y}v$D._destroy()},v$n._getComponentByType=function(v$n,v$a){void 0===v$a&&(v$a=0);var v$U=this._componentsMap.indexOf(v$n);return-1===v$U?null:this._components[this._typeComponentsIndices[v$U][v$a]]},v$n._getComponentsByType=function(v$n,v$a){var v$U=this._componentsMap.indexOf(v$n);if(-1!==v$U){var v$x=this._typeComponentsIndices[v$U],v$D=v$x.length;v$a.length=v$D;for(var v$p=0;v$p<v$D;v$p++)v$a[v$p]=this._components[v$x[v$p]]}else v$a.length=0},v$n._getComponentByIndex=function(v$n){return this._components[v$n]},v$n._removeComponentByType=function(v$n,v$a){void 0===v$a&&(v$a=0);var v$U=this._componentsMap.indexOf(v$n);-1!==v$U&&this._removeComponent(v$U,v$a)},v$n._removeComponentsByType=function(v$n){var v$a=this._componentsMap.indexOf(v$n);if(-1!==v$a)for(var v$U=this._typeComponentsIndices[v$a],v$x=0,v$D=v$U.length;v$x<v$D;v$U.length<v$D?v$D--:v$x++)this._removeComponent(v$a,v$x)},v$n._removeAllComponent=function(){for(var v$n=0,v$a=this._componentsMap.length;v$n<v$a;this._componentsMap.length<v$a?v$a--:v$n++)this._removeComponentsByType(this._componentsMap[v$n])},v$n._updateComponents=function(v$n){for(var v$a=0,v$U=this._components.length;v$a<v$U;v$a++){var v$x=this._components[v$a];!v$x.started&&(v$x._start(v$n),v$x.started=!0),v$x.enable&&v$x._update(v$n)}},v$n._lateUpdateComponents=function(v$n){for(var v$a=0;v$a<this._components.length;v$a++){var v$U=this._components[v$a];!v$U.started&&(v$U._start(v$n),v$U.started=!0),v$U.enable&&v$U._lateUpdate(v$n)}},v$n._preRenderUpdateComponents=function(v$n){for(var v$a=0;v$a<this._components.length;v$a++){var v$U=this._components[v$a];!v$U.started&&(v$U._start(v$n),v$U.started=!0),v$U.enable&&v$U._preRenderUpdate(v$n)}},v$n._postRenderUpdateComponents=function(v$n){for(var v$a=0;v$a<this._components.length;v$a++){var v$U=this._components[v$a];!v$U.started&&(v$U._start(v$n),v$U.started=!0),v$U.enable&&v$U._postRenderUpdate(v$n)}},v$E(0,v$n,"_loaded",null,function(v$n){this.__loaded=v$n}),v$E(0,v$n,"fogColor",function(){return this._fogColor},function(v$n){this._fogColor=v$n,this._shaderValues.setValue(0,v$n.elements)}),v$E(0,v$n,"enableFog",function(){return this._enableFog},function(v$n){this._enableFog!==v$n&&((this._enableFog=v$n)?(this.addShaderDefine(v$Na.SHADERDEFINE_FOG),this.removeShaderDefine(v$Na.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(v$Na.SHADERDEFINE_FOG))}),v$E(0,v$n,"url",function(){return this._url}),v$E(0,v$n,"loaded",function(){return this.__loaded}),v$E(0,v$n,"enableDepthFog",function(){return this._enableDepthFog},function(v$n){this._enableDepthFog!=v$n&&((this._enableDepthFog=v$n)?(this.addShaderDefine(v$Na.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(v$Na.SHADERDEFINE_FOG)):this.removeShaderDefine(v$Na.SAHDERDEFINE_DEPTHFOG))}),v$E(0,v$n,"fogStart",function(){return this._fogStart},function(v$n){this._fogStart=v$n,this._shaderValues.setValue(1,v$n)}),v$E(0,v$n,"fogRange",function(){return this._fogRange},function(v$n){this._fogRange=v$n,this._shaderValues.setValue(2,v$n)}),v$E(0,v$n,"ambientColor",function(){return this._ambientColor},function(v$n){this._ambientColor=v$n,this._shaderValues.setValue(21,v$n.elements)}),v$E(0,v$n,"scene",function(){return this}),v$E(0,v$n,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),v$x._sortScenes=function(v$n,v$a){if(v$n.parent!==v$Y.stage||v$a.parent!==v$Y.stage)return v$n.parent!==v$Y.stage&&v$a.parent!==v$Y.stage?v$x._sortScenes(v$n.parent,v$a.parent):v$n.parent===v$Y.stage?-1:1;var v$U=v$Y.stage._childs;return v$U.indexOf(v$n)-v$U.indexOf(v$a)},v$x.load=function(v$n){return v$Y.loader.create(v$n,null,null,v$x)},v$x.FOGCOLOR=0,v$x.FOGSTART=1,v$x.FOGRANGE=2,v$x.LIGHTDIRECTION=3,v$x.LIGHTDIRCOLOR=4,v$x.POINTLIGHTPOS=5,v$x.POINTLIGHTRANGE=6,v$x.POINTLIGHTATTENUATION=7,v$x.POINTLIGHTCOLOR=8,v$x.SPOTLIGHTPOS=9,v$x.SPOTLIGHTDIRECTION=10,v$x.SPOTLIGHTSPOT=11,v$x.SPOTLIGHTRANGE=12,v$x.SPOTLIGHTATTENUATION=13,v$x.SPOTLIGHTCOLOR=14,v$x.SHADOWDISTANCE=15,v$x.SHADOWLIGHTVIEWPROJECT=16,v$x.SHADOWMAPPCFOFFSET=17,v$x.SHADOWMAPTEXTURE1=18,v$x.SHADOWMAPTEXTURE2=19,v$x.SHADOWMAPTEXTURE3=20,v$x.AMBIENTCOLOR=21,v$x.TIME=22,v$x}(v$k),v$va=function(v$n){function v$a(v$n){v$a.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new v$na,this._shaderValues=new v$ia,this._colliders=[],this._id=++v$a._uniqueIDCounter,this._transform=new v$Wa(this),this.name=v$n||"Sprite3D-"+v$a._nameNumberCounter++,this.layer=v$G.currentCreationLayer,this.active=!0}v$q(v$a,"laya.d3.core.Sprite3D",v$Ma);var v$U=v$a.prototype;return v$Y.imps(v$U,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),v$U._setUrl=function(v$n){this._url=v$n},v$U._getGroup=function(){return this._group},v$U._setGroup=function(v$n){this._group=v$n},v$U._addChild3D=function(v$n){v$n.transform.parent=this.transform,this._hierarchyAnimator&&(!v$n._hierarchyAnimator&&v$n._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(v$n,!0,[v$n.name])),this._scene&&(v$n._setBelongScene(this._scene),this._activeInHierarchy&&v$n._active&&v$n._activeHierarchy())},v$U._removeChild3D=function(v$n){v$n.transform.parent=null,this._scene&&(this._activeInHierarchy&&v$n._active&&v$n._inActiveHierarchy(),v$n._setUnBelongScene()),this._hierarchyAnimator&&(v$n._hierarchyAnimator==this._hierarchyAnimator&&v$n._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(v$n,!1,[v$n.name]))},v$U._parseBaseCustomProps=function(v$n){var v$a=this.transform.localPosition;v$n.translate?(v$a.fromArray(v$n.translate),v$a.x*=100,v$a.y*=100,v$a.z*=100):v$a.elements.fill(0),this.transform.localPosition=v$a;var v$U=this.transform.localRotation;v$n.rotation?v$U.fromArray(v$n.rotation):v$U.fromArray([0,0,0,-1]),this.transform.localRotation=v$U;var v$x=this.transform.localScale;v$n.scale?v$x.fromArray(v$n.scale):v$x.elements.fill(1),this.transform.localScale=v$x;var v$D=v$n.layer;null!=v$D&&(this.layer=v$G.getLayerByNumber(v$D))},v$U._parseCustomComponent=function(v$n,v$a,v$U){for(var v$x in v$U){var v$D=v$U[v$x];switch(v$x){case"Animator":var v$p=this.addComponent(Animator);if(v$D.avatarPath)v$p.avatar=v$P.getRes(v$a[v$D.avatarPath]);else{var v$Q=v$D.avatar;if(v$Q){v$p.avatar=v$P.getRes(v$a[v$Q.path]);var v$V=v$Q.linkSprites;v$V&&v$n.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[v$p,v$V])}}for(var v$y=v$D.clipPaths,v$R=v$y.length,v$X=0;v$X<v$R;v$X++)v$p.addClip(v$P.getRes(v$a[v$y[v$X]]));v$p.clip=v$P.getRes(v$a[v$y[0]]);var v$z=v$D.playOnWake;void 0!==v$z&&(v$p.playOnWake=v$z);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var v$i=this.addComponent(SphereCollider);v$i.isTrigger=v$D.isTrigger;var v$q=v$i.center;v$q.fromArray(v$D.center),v$i.center=v$q,v$i.radius=v$D.radius;break;case"BoxCollider":var v$E=this.addComponent(BoxCollider);v$E.isTrigger=v$D.isTrigger,v$E.center.fromArray(v$D.center);var v$m=v$E.size;v$m.fromArray(v$D.size),v$E.size=v$m;break;case"MeshCollider":this.addComponent(MeshCollider)}}},v$U._onRootNodeHierarchyLoaded=function(v$n,v$a){for(var v$U in v$a){for(var v$x=this,v$D=v$a[v$U],v$p=0,v$Q=v$D.length;v$p<v$Q;v$p++){var v$V=v$D[v$p];if(""===v$V)break;if(!(v$x=v$x.getChildByName(v$V)))break}v$x&&v$n.linkSprite3DToAvatarNode(v$U,v$x)}},v$U._setHierarchyAnimator=function(v$n,v$a){this._changeHierarchyAnimator(v$n);for(var v$U=0,v$x=this._childs.length;v$U<v$x;v$U++){var v$D=this._childs[v$U];v$D._hierarchyAnimator==v$a&&v$D._setHierarchyAnimator(v$n,v$a)}},v$U._clearHierarchyAnimator=function(v$n,v$a){this._changeHierarchyAnimator(v$a);for(var v$U=0,v$x=this._childs.length;v$U<v$x;v$U++){var v$D=this._childs[v$U];v$D._hierarchyAnimator==v$n&&v$D._clearHierarchyAnimator(v$n,v$a)}},v$U._getAnimatorToLinkSprite3D=function(v$n,v$a,v$U){var v$x=this.getComponentByType(Animator);if(v$x&&(v$x.avatar?v$x.avatar._version||v$n._setAnimatorToLinkAvatar(v$x,v$a):v$n._setAnimatorToLinkSprite3DNoAvatar(v$x,v$a,v$U)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){v$U.unshift(this._parent.name);var v$D=this._parent;v$D._hierarchyAnimator&&v$D._getAnimatorToLinkSprite3D(v$n,v$a,v$U)}},v$U._setAnimatorToLinkSprite3DNoAvatar=function(v$n,v$a,v$U){var v$x=0,v$D=0;for(v$x=0,v$D=v$n.getClipCount();v$x<v$D;v$x++)v$n._handleSpriteOwnersBySprite(v$x,v$a,v$U,this);for(v$x=0,v$D=this._childs.length;v$x<v$D;v$x++){var v$p=this._childs[v$x],v$Q=v$U.length;v$U.push(v$p.name),v$p._setAnimatorToLinkSprite3DNoAvatar(v$n,v$a,v$U),v$U.splice(v$Q,1)}},v$U._changeHierarchyAnimator=function(v$n){this._hierarchyAnimator=v$n},v$U._isLinkSpriteToAnimationNode=function(v$n,v$a,v$U){var v$x=v$n._avatarNodes.indexOf(v$a),v$D=v$n._cacheSpriteToNodesMap;if(v$U)this._transform.dummy=v$a.transform,v$n._cacheNodesToSpriteMap[v$x]=v$D.length,v$D.push(v$x);else{this._transform.dummy=null;var v$p=v$n._cacheNodesToSpriteMap[v$x];v$n._cacheNodesToSpriteMap[v$x]=null,v$D.splice(v$p,1)}},v$U._setBelongScene=function(v$n){this._scene=v$n;for(var v$a=0,v$U=this._childs.length;v$a<v$U;v$a++)this._childs[v$a]._setBelongScene(v$n)},v$U._setUnBelongScene=function(){this._scene=null;for(var v$n=0,v$a=this._childs.length;v$n<v$a;v$n++)this._childs[v$n]._setUnBelongScene()},v$U._activeHierarchy=function(){var v$n=0,v$a=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),v$n=0,v$a=this._colliders.length;v$n<v$a;v$n++)this._layer._addCollider(this._colliders[v$n]);for(this.event("activeinhierarchychanged",!0),v$n=0,v$a=this._childs.length;v$n<v$a;v$n++){var v$U=this._childs[v$n];v$U._active&&v$U._activeHierarchy()}},v$U._inActiveHierarchy=function(){var v$n=0,v$a=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),v$n=0,v$a=this._colliders.length;v$n<v$a;v$n++){var v$U=this._colliders[v$n];v$U._clearCollsionMap(),this._layer._removeCollider(v$U)}for(this.event("activeinhierarchychanged",!1),v$n=0,v$a=this._childs.length;v$n<v$a;v$n++){var v$x=this._childs[v$n];v$x._active&&v$x._inActiveHierarchy()}},v$U.addComponent=function(v$n){var v$a,v$U=this._componentsMap.indexOf(v$n);if(-1===v$U)v$a=[],this._componentsMap.push(v$n),this._typeComponentsIndices.push(v$a);else if(v$a=this._typeComponentsIndices[v$U],this._components[v$a[0]].isSingleton)throw new Error("无法单实例创建"+v$n+"组件，"+v$n+"组件已存在！");var v$x=v$D.getInstance(v$n);return v$a.push(this._components.length),this._components.push(v$x),v$x instanceof laya.d3.component.Script&&this._scripts.push(v$x),v$x._initialize(this),v$x},v$U._removeComponent=function(v$n,v$a){var v$U,v$x=0,v$D=this._typeComponentsIndices[v$n],v$p=v$D[v$a],v$Q=this._components[v$p];for(v$Q instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(v$Q),1),v$D.splice(v$a,1),0===v$D.length&&(this._typeComponentsIndices.splice(v$n,1),this._componentsMap.splice(v$n,1)),v$x=0,v$U=this._componentsMap.length;v$x<v$U;v$x++)for(var v$V=(v$D=this._typeComponentsIndices[v$x]).length-1;0<=v$V;v$V--){var v$y=v$D[v$V];if(!(v$p<v$y))break;v$D[v$V]=--v$y}v$Q._destroy()},v$U._clearSelfRenderObjects=function(){},v$U._addSelfRenderObjects=function(){},v$U._parseCustomProps=function(v$n,v$a,v$U,v$x){},v$U._updateChilds=function(v$n){var v$a=this._childs.length;if(0!==v$a)for(var v$U=0;v$U<v$a;++v$U)this._childs[v$U]._update(v$n)},v$U._getSortID=function(v$n,v$a){return 1e3*v$a.id+v$n._getVertexBuffer().vertexDeclaration.id},v$U._update=function(v$n){(v$n.owner=this)._activeInHierarchy&&(this._updateComponents(v$n),this._lateUpdateComponents(v$n),v$N.spriteCount++,this._childs.length&&this._updateChilds(v$n))},v$U.getProjectionViewWorldMatrix=function(v$n){return v$na.multiply(v$n,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},v$U.loadHierarchy=function(v$n){this.addChild(laya.d3.core.Sprite3D.load(v$n))},v$U.addChildAt=function(v$n,v$a){if(!(v$n instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!v$n||this.destroyed||v$n===this)return v$n;if(v$n.zOrder&&this._set$P("hasZorder",!0),0<=v$a&&v$a<=this._childs.length){if(v$n._parent===this){var v$U=this.getChildIndex(v$n);this._childs.splice(v$U,1),this._childs.splice(v$a,0,v$n),this.conchModel&&(this.conchModel.removeChild(v$n.conchModel),this.conchModel.addChildAt(v$n.conchModel,v$a)),this._childChanged()}else v$n.parent&&v$n.parent.removeChild(v$n),this._childs===v$R.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(v$a,0,v$n),this.conchModel&&this.conchModel.addChildAt(v$n.conchModel,v$a),(v$n.parent=this)._addChild3D(v$n);return v$n}throw new Error("appendChildAt:The index is out of bounds")},v$U.addChild=function(v$n){if(!(v$n instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!v$n||this.destroyed||v$n===this)return v$n;if(v$n.zOrder&&this._set$P("hasZorder",!0),v$n._parent===this){var v$a=this.getChildIndex(v$n);v$a!==this._childs.length-1&&(this._childs.splice(v$a,1),this._childs.push(v$n),this.conchModel&&(this.conchModel.removeChild(v$n.conchModel),this.conchModel.addChildAt(v$n.conchModel,this._childs.length-1)),this._childChanged())}else v$n.parent&&v$n.parent.removeChild(v$n),this._childs===v$R.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(v$n),this.conchModel&&this.conchModel.addChildAt(v$n.conchModel,this._childs.length-1),(v$n.parent=this)._childChanged(),this._addChild3D(v$n);return v$n},v$U.removeChildAt=function(v$n){var v$a=this.getChildAt(v$n);return v$a&&(this._removeChild3D(v$a),this._childs.splice(v$n,1),this.conchModel&&this.conchModel.removeChild(v$a.conchModel),v$a.parent=null),v$a},v$U.removeChildren=function(v$n,v$a){if(void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=2147483647),this._childs&&0<this._childs.length){var v$U=this._childs;if(0===v$n&&v$p<=v$a){var v$x=v$U;this._childs=v$R.ARRAY_EMPTY}else v$x=v$U.splice(v$n,v$a-v$n);for(var v$D=0,v$p=v$x.length;v$D<v$p;v$D++)this._removeChild3D(v$x[v$D]),v$x[v$D].parent=null,this.conchModel&&this.conchModel.removeChild(v$x[v$D].conchModel)}return this},v$U.onAsynLoaded=function(v$n,v$a,v$U){var v$x=v$a[0];if("Sprite3D"!==v$x.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var v$D=v$a[1];v$ba._createNodeByJson(this,v$x,this,v$D),this.event("hierarchyloaded",[this]),this.__loaded=!0},v$U.cloneTo=function(v$n){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var v$a=v$n;v$a.name=this.name,v$a._destroyed=this._destroyed,v$a.timer=this.timer,v$a._$P=this._$P,v$a.active=this._active;var v$U=v$a.transform.localPosition;this.transform.localPosition.cloneTo(v$U),v$a.transform.localPosition=v$U;var v$x=v$a.transform.localRotation;this.transform.localRotation.cloneTo(v$x),v$a.transform.localRotation=v$x;var v$D=v$a.transform.localScale;this.transform.localScale.cloneTo(v$D),v$a.transform.localScale=v$D,v$a.isStatic=this.isStatic;var v$p=0,v$Q=0;for(v$p=0,v$Q=this._componentsMap.length;v$p<v$Q;v$p++){var v$V=v$a.addComponent(this._componentsMap[v$p]);this._components[v$p]._cloneTo(v$V)}for(v$p=0,v$Q=this._childs.length;v$p<v$Q;v$p++)v$a.addChild(this._childs[v$p].clone());var v$y=v$a.getComponentByType(Animator);if(v$y){var v$R=v$y._linkSpritesData;if(v$R)for(var v$X in v$R){for(var v$z=v$R[v$X],v$i=v$a,v$q=0,v$E=v$z.length;v$q<v$E&&(v$i=v$i.getChildByName(v$z[v$q]));v$q++);if(v$i){var v$m=v$y._avatarNodeMap[v$X];v$i._isLinkSpriteToAnimationNode(v$y,v$m,!0)}}}},v$U.clone=function(){var v$n=new this.constructor;return this.cloneTo(v$n),v$n},v$U.destroy=function(v$n){if(void 0===v$n&&(v$n=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,v$n);var v$a,v$U=0;for(v$U=0,v$a=this._components.length;v$U<v$a;v$U++)this._components[v$U]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,v$P.clearRes(this.url),this.loaded||v$Pa._cancelLoadByUrl(this.url)}},v$U._handleSpriteToAvatar=function(v$n,v$a){v$n._avatarNodes;var v$U=v$n._avatarNodeMap[this.name];v$U&&v$U.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(v$n,v$U,v$a)},v$U._setAnimatorToLinkAvatar=function(v$n,v$a){this._handleSpriteToAvatar(v$n,v$a);for(var v$U=0,v$x=this._childs.length;v$U<v$x;v$U++){this._childs[v$U]._setAnimatorToLinkAvatar(v$n,v$a)}},v$E(0,v$U,"activeInHierarchy",function(){return this._activeInHierarchy}),v$E(0,v$U,"_loaded",null,function(v$n){this.__loaded=v$n}),v$E(0,v$U,"active",function(){return this._active},function(v$n){this._active!==v$n&&(this._active=v$n,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(v$n?this._activeHierarchy():this._inActiveHierarchy()))}),v$E(0,v$U,"componentsCount",function(){return this._components.length}),v$E(0,v$U,"loaded",function(){return this.__loaded}),v$E(0,v$U,"id",function(){return this._id}),v$E(0,v$U,"url",function(){return this._url}),v$E(0,v$U,"layer",function(){return this._layer},function(v$n){if(this._layer!==v$n){if(!v$n)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var v$a=0,v$U=this._colliders.length;if(this._layer)for(v$a=0;v$a<v$U;v$a++)this._layer._removeCollider(this._colliders[v$a]);for(v$a=0;v$a<v$U;v$a++)v$n._addCollider(this._colliders[v$a])}this._layer=v$n,this.event("layerchanged",v$n)}}),v$E(0,v$U,"scene",function(){return this._scene}),v$E(0,v$U,"transform",function(){return this._transform}),v$a.instantiate=function(v$n,v$a,v$U,v$x,v$D){void 0===v$U&&(v$U=!0);var v$p=v$n.clone();v$a&&v$a.addChild(v$p);var v$Q=v$p.transform;if(v$U){var v$V=v$Q.worldMatrix;v$n.transform.worldMatrix.cloneTo(v$V),v$Q.worldMatrix=v$V}else v$x&&(v$Q.position=v$x),v$D&&(v$Q.rotation=v$D);return v$p},v$a.load=function(v$n){return v$Y.loader.create(v$n,null,null,v$a)},v$a.WORLDMATRIX=0,v$a.MVPMATRIX=1,v$a._uniqueIDCounter=0,v$a._nameNumberCounter=0,v$a}(),v$la=function(v$n){function v$X(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],v$X.__super.call(this),!v$n||!v$a)throw"Shader Error";this._id=++v$X._count,this._vs=v$n,this._ps=v$a,this._attributeMap=v$U,this._sceneUniformMap=v$x,this._cameraUniformMap=v$D,this._spriteUniformMap=v$p,this._materialUniformMap=v$Q,this._renderElementUniformMap=v$V,this._precompile=v$y,this._define=v$R,this._precompile&&v$X.extCompileObj&&v$X.extCompileFunc?v$X.extCompileFunc.call(v$X.extCompileObj,v$n,v$a,v$R):this.recreateResource()}v$q(v$X,"laya.d3.shader.Shader3D",v$U);var v$a=v$X.prototype;return v$a.recreateResource=function(){v$H.now();this._compile(),this.completeCreate(),this.memorySize=0},v$a.disposeResource=function(){v$u.mainContext.deleteShader(this._vshader),v$u.mainContext.deleteShader(this._pshader),v$u.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},v$a._compile=function(){if(!v$u.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var v$n=[this._vs,this._ps],v$a=v$u.mainContext;if(this._program=v$a.createProgram(),this._vshader=v$X._createShader(v$a,v$n[0],35633),this._pshader=v$X._createShader(v$a,v$n[1],35632),v$a.attachShader(this._program,this._vshader),v$a.attachShader(this._program,this._pshader),v$a.linkProgram(this._program),!v$m.isConchApp&&v$Na.debugMode&&!v$a.getProgramParameter(this._program,35714))throw v$a.getProgramInfoLog(this._program);var v$U,v$x=0,v$D=0,v$p=0;for(v$p=v$m.isConchApp?v$a.getProgramParameterEx(this._vs,this._ps,"",35721):v$a.getProgramParameter(this._program,35721),v$x=0;v$x<v$p;v$x++){var v$Q=null;v$U={vartype:"attribute",ivartype:0,attrib:v$Q=v$m.isConchApp?v$a.getActiveAttribEx(this._vs,this._ps,"",v$x):v$a.getActiveAttrib(this._program,v$x),location:v$a.getAttribLocation(this._program,v$Q.name),name:v$Q.name,type:v$Q.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(v$U)}var v$V=0;for(v$V=v$m.isConchApp?v$a.getProgramParameterEx(this._vs,this._ps,"",35718):v$a.getProgramParameter(this._program,35718),v$x=0;v$x<v$V;v$x++){var v$y=null;v$y=v$m.isConchApp?v$a.getActiveUniformEx(this._vs,this._ps,"",v$x):v$a.getActiveUniform(this._program,v$x),0<(v$U={vartype:"uniform",ivartype:1,attrib:v$Q,location:v$a.getUniformLocation(this._program,v$y.name),name:v$y.name,type:v$y.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(v$U.name=v$U.name.substr(0,v$U.name.length-3),v$U.isArray=!0,v$U.location=v$a.getUniformLocation(this._program,v$U.name)),this._uniformParams.push(v$U)}for(v$x=0,v$D=this._attributeParams.length;v$x<v$D;v$x++)(v$U=this._attributeParams[v$x]).indexOfParams=v$x,v$U.index=1,v$U.value=[v$U.location,null],v$U.codename=v$U.name,v$U.name=null!=this._attributeMap[v$U.codename]?this._attributeMap[v$U.codename]:v$U.codename,this._attributeParamsMap.push(v$U.name),this._attributeParamsMap.push(v$U),v$U._this=this,v$U.uploadedValue=[],v$U.fun=this._attribute;for(v$x=0,v$D=this._uniformParams.length;v$x<v$D;v$x++)switch((v$U=this._uniformParams[v$x]).indexOfParams=v$x,v$U.index=1,v$U.value=[v$U.location,null],v$U.codename=v$U.name,null!=this._sceneUniformMap[v$U.codename]?(v$U.name=this._sceneUniformMap[v$U.codename],this._sceneUniformParamsMap.push(v$U.name),this._sceneUniformParamsMap.push(v$U)):null!=this._cameraUniformMap[v$U.codename]?(v$U.name=this._cameraUniformMap[v$U.codename],this._cameraUniformParamsMap.push(v$U.name),this._cameraUniformParamsMap.push(v$U)):null!=this._spriteUniformMap[v$U.codename]?(v$U.name=this._spriteUniformMap[v$U.codename],this._spriteUniformParamsMap.push(v$U.name),this._spriteUniformParamsMap.push(v$U)):null!=this._materialUniformMap[v$U.codename]?(v$U.name=this._materialUniformMap[v$U.codename],this._materialUniformParamsMap.push(v$U.name),this._materialUniformParamsMap.push(v$U)):null!=this._renderElementUniformMap[v$U.codename]?(v$U.name=this._renderElementUniformMap[v$U.codename],this._renderElementUniformParamsMap.push(v$U.name),this._renderElementUniformParamsMap.push(v$U)):console.log("Shader:can't find uinform name:"+v$U.codename+" in shader file."),v$U._this=this,v$U.uploadedValue=[],v$U.type){case 5124:v$U.fun=v$U.isArray?this._uniform1iv:this._uniform1i;break;case 5126:v$U.fun=v$U.isArray?this._uniform1fv:this._uniform1f;break;case 35664:v$U.fun=v$U.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:v$U.fun=v$U.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:v$U.fun=v$U.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:v$U.fun=this._uniform_sampler2D;break;case 35680:v$U.fun=this._uniform_samplerCube;break;case 35676:v$U.fun=this._uniformMatrix4fv;break;case 35670:v$U.fun=this._uniform1i;break;case 35674:v$U.fun=this._uinformMatrix2fv;break;case 35675:v$U.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},v$a._attribute=function(v$n,v$a){var v$U=v$u.mainContext,v$x=v$V._enableAtributes,v$D=v$n.location;return v$x[v$D]||v$U.enableVertexAttribArray(v$D),v$U.vertexAttribPointer(v$D,v$a[0],v$a[1],v$a[2],v$a[3],v$a[4]),v$x[v$D]=v$V._bindVertexBuffer,1},v$a._uniform1f=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a?(v$u.mainContext.uniform1f(v$n.location,v$U[0]=v$a),1):0},v$a._uniform1fv=function(v$n,v$a){if(v$a.length<4){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]||v$U[3]!==v$a[3]?(v$u.mainContext.uniform1fv(v$n.location,v$a),v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2],v$U[3]=v$a[3],1):0}return v$u.mainContext.uniform1fv(v$n.location,v$a),1},v$a._uniform_vec2=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]?(v$u.mainContext.uniform2f(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1]),1):0},v$a._uniform_vec2v=function(v$n,v$a){if(v$a.length<2){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]||v$U[3]!==v$a[3]?(v$u.mainContext.uniform2fv(v$n.location,v$a),v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2],v$U[3]=v$a[3],1):0}return v$u.mainContext.uniform2fv(v$n.location,v$a),1},v$a._uniform_vec3=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]?(v$u.mainContext.uniform3f(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2]),1):0},v$a._uniform_vec3v=function(v$n,v$a){return v$u.mainContext.uniform3fv(v$n.location,v$a),1},v$a._uniform_vec4=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]||v$U[3]!==v$a[3]?(v$u.mainContext.uniform4f(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2],v$U[3]=v$a[3]),1):0},v$a._uniform_vec4v=function(v$n,v$a){return v$u.mainContext.uniform4fv(v$n.location,v$a),1},v$a._uniformMatrix2fv=function(v$n,v$a){return v$u.mainContext.uniformMatrix2fv(v$n.location,!1,v$a),1},v$a._uniformMatrix3fv=function(v$n,v$a){return v$u.mainContext.uniformMatrix3fv(v$n.location,!1,v$a),1},v$a._uniformMatrix4fv=function(v$n,v$a){return v$u.mainContext.uniformMatrix4fv(v$n.location,!1,v$a),1},v$a._uinformMatrix2fv=function(v$n,v$a){return v$u.mainContext.uniformMatrix2fv(v$n.location,!1,v$a),1},v$a._uinformMatrix3fv=function(v$n,v$a){return v$u.mainContext.uniformMatrix3fv(v$n.location,!1,v$a),1},v$a._uniform1i=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a?(v$u.mainContext.uniform1i(v$n.location,v$U[0]=v$a),1):0},v$a._uniform1iv=function(v$n,v$a){return v$u.mainContext.uniform1iv(v$n.location,v$a),1},v$a._uniform_ivec2=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]?(v$u.mainContext.uniform2i(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1]),1):0},v$a._uniform_ivec2v=function(v$n,v$a){return v$u.mainContext.uniform2iv(v$n.location,v$a),1},v$a._uniform_vec3i=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]?(v$u.mainContext.uniform3i(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2]),1):0},v$a._uniform_vec3vi=function(v$n,v$a){return v$u.mainContext.uniform3iv(v$n.location,v$a),1},v$a._uniform_vec4i=function(v$n,v$a){var v$U=v$n.uploadedValue;return v$U[0]!==v$a[0]||v$U[1]!==v$a[1]||v$U[2]!==v$a[2]||v$U[3]!==v$a[3]?(v$u.mainContext.uniform4i(v$n.location,v$U[0]=v$a[0],v$U[1]=v$a[1],v$U[2]=v$a[2],v$U[3]=v$a[3]),1):0},v$a._uniform_vec4vi=function(v$n,v$a){return v$u.mainContext.uniform4iv(v$n.location,v$a),1},v$a._uniform_sampler2D=function(v$n,v$a){var v$U=v$a.source||v$a.defaulteTexture.source,v$x=v$u.mainContext,v$D=v$n.uploadedValue;if(null!=v$D[0])return v$x.activeTexture(v$X._TEXTURES[v$D[0]]),v$U&&v$c.bindTexture(v$x,3553,v$U),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return v$D[0]=this._curActTexIndex,v$x.uniform1i(v$n.location,this._curActTexIndex),v$x.activeTexture(v$X._TEXTURES[this._curActTexIndex]),v$U&&v$c.bindTexture(v$x,3553,v$U),this._curActTexIndex++,1},v$a._uniform_samplerCube=function(v$n,v$a){var v$U=v$a.source||v$a.defaulteTexture.source,v$x=v$u.mainContext,v$D=v$n.uploadedValue;if(null!=v$D[0])return v$x.activeTexture(v$X._TEXTURES[v$D[0]]),v$U?v$c.bindTexture(v$x,34067,v$U):v$c.bindTexture(v$x,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return v$D[0]=this._curActTexIndex,v$x.uniform1i(v$n.location,this._curActTexIndex),v$x.activeTexture(v$X._TEXTURES[this._curActTexIndex]),v$U?v$c.bindTexture(v$x,34067,v$U):v$c.bindTexture(v$x,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},v$a._noSetValue=function(v$n){console.log("no....:"+v$n.name)},v$a.bind=function(){return v$U.activeShader=this,(v$U.bindShader=this).activeResource(),v$c.UseProgram(this._program)},v$a.uploadAttributes=function(v$n,v$a){for(var v$U,v$x,v$D=0,v$p=0,v$Q=this._attributeParamsMap.length;v$p<v$Q;v$p+=2)v$x=this._attributeParamsMap[v$p+1],null!=(v$U=v$n[this._attributeParamsMap[v$p]])&&(v$a&&v$a[v$x.name]&&v$a[v$x.name].bind(),v$D+=v$x.fun.call(this,v$x,v$U));v$N.shaderCall+=v$D},v$a.uploadAttributesX=function(v$n,v$a){for(var v$U,v$x,v$D=0,v$p=0,v$Q=this._attributeParamsMap.length;v$p<v$Q;v$p+=2)v$x=this._attributeParamsMap[v$p+1],null!=(v$U=v$n[this._attributeParamsMap[v$p]])&&(v$a._bind(),v$D+=v$x.fun.call(this,v$x,v$U));v$N.shaderCall+=v$D},v$a.uploadSceneUniforms=function(v$n){for(var v$a,v$U,v$x=0,v$D=0,v$p=this._sceneUniformParamsMap.length;v$D<v$p;v$D+=2)v$U=this._sceneUniformParamsMap[v$D+1],null!=(v$a=v$n[this._sceneUniformParamsMap[v$D]])&&(v$x+=v$U.fun.call(this,v$U,v$a));v$N.shaderCall+=v$x},v$a.uploadCameraUniforms=function(v$n){for(var v$a,v$U,v$x=0,v$D=0,v$p=this._cameraUniformParamsMap.length;v$D<v$p;v$D+=2)v$U=this._cameraUniformParamsMap[v$D+1],null!=(v$a=v$n[this._cameraUniformParamsMap[v$D]])&&(v$x+=v$U.fun.call(this,v$U,v$a));v$N.shaderCall+=v$x},v$a.uploadSpriteUniforms=function(v$n){for(var v$a,v$U,v$x=0,v$D=0,v$p=this._spriteUniformParamsMap.length;v$D<v$p;v$D+=2)v$U=this._spriteUniformParamsMap[v$D+1],null!=(v$a=v$n[this._spriteUniformParamsMap[v$D]])&&(v$x+=v$U.fun.call(this,v$U,v$a));v$N.shaderCall+=v$x},v$a.uploadMaterialUniforms=function(v$n){for(var v$a,v$U,v$x=0,v$D=0,v$p=this._materialUniformParamsMap.length;v$D<v$p;v$D+=2)v$U=this._materialUniformParamsMap[v$D+1],null!=(v$a=v$n[this._materialUniformParamsMap[v$D]])&&(v$x+=v$U.fun.call(this,v$U,v$a));v$N.shaderCall+=v$x},v$a.uploadRenderElementUniforms=function(v$n){for(var v$a,v$U,v$x=0,v$D=0,v$p=this._renderElementUniformParamsMap.length;v$D<v$p;v$D+=2)v$U=this._renderElementUniformParamsMap[v$D+1],null!=(v$a=v$n[this._renderElementUniformParamsMap[v$D]])&&(v$x+=v$U.fun.call(this,v$U,v$a));v$N.shaderCall+=v$x},v$X.create=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){return new v$X(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R)},v$X.addInclude=function(v$n,v$a){v$T.addInclude(v$n,v$a)},v$X._createShader=function(v$n,v$a,v$U){var v$x=v$n.createShader(v$U);if(v$n.shaderSource(v$x,v$a),v$n.compileShader(v$x),v$Na.debugMode&&!v$n.getShaderParameter(v$x,35713))throw v$n.getShaderInfoLog(v$x);return v$x},v$X.PERIOD_RENDERELEMENT=0,v$X.PERIOD_MATERIAL=1,v$X.PERIOD_SPRITE=2,v$X.PERIOD_CAMERA=3,v$X.PERIOD_SCENE=4,v$X._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],v$X._count=0,v$X._preCompile=!1,v$X.extCompileFunc=null,v$X.extCompileObj=null,v$z(v$X,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new v$_}]),v$X}(),v$ja=function(v$V){function v$y(){this._transformUV=null,v$y.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new v$Qa(.6,.6,.6)),this._setColor(10,new v$Qa(1,1,1)),this._setColor(11,new v$Va(1,1,1,8)),this._setColor(12,new v$Qa(1,1,1)),this._setColor(7,new v$Va(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new v$Va(1,1,0,0)),this.renderMode=1}v$q(v$y,"laya.d3.core.material.StandardMaterial",v$V);var v$n=v$y.prototype;return v$n.disableLight=function(){this._addDisablePublicShaderDefine(v$Na.SHADERDEFINE_POINTLIGHT|v$Na.SHADERDEFINE_SPOTLIGHT|v$Na.SHADERDEFINE_DIRECTIONLIGHT)},v$n.disableFog=function(){this._addDisablePublicShaderDefine(v$Na.SHADERDEFINE_FOG)},v$n.onAsynLoaded=function(v$n,v$a,v$U){var v$x=v$a[0];if(v$x.version)v$V.prototype.onAsynLoaded.call(this,v$n,v$a,v$U);else{var v$D=v$a[1],v$p=v$x.props;for(var v$Q in v$p)this[v$Q]=v$p[v$Q];v$y._parseStandardMaterial(v$D,this,v$x),this._endLoaded()}},v$n.cloneTo=function(v$n){v$V.prototype.cloneTo.call(this,v$n);var v$a=v$n;this._transformUV&&(v$a._transformUV=this._transformUV.clone())},v$E(0,v$n,"ambientColor",function(){return this._getColor(9)},function(v$n){this._setColor(9,v$n)}),v$E(0,v$n,"ambientTexture",function(){return this._getTexture(5)},function(v$n){v$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,v$n)}),v$E(0,v$n,"renderMode",null,function(v$n){switch(v$n){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(v$y.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(v$n)}),v$E(0,v$n,"reflectColor",function(){return this._getColor(12)},function(v$n){this._setColor(12,v$n)}),v$E(0,v$n,"tilingOffset",function(){return this._getColor(15)},function(v$n){if(v$n){var v$a=v$n.elements;1!=v$a[0]||1!=v$a[1]||0!=v$a[2]||0!=v$a[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,v$n)}),v$E(0,v$n,"albedo",function(){return this._getColor(7)},function(v$n){this._setColor(7,v$n)}),v$E(0,v$n,"diffuseColor",function(){return this._getColor(10)},function(v$n){this._setColor(10,v$n)}),v$E(0,v$n,"albedoColor",function(){return this._getColor(7)},function(v$n){this._setColor(7,v$n)}),v$E(0,v$n,"specularColor",function(){return this._getColor(11)},function(v$n){this._setColor(11,v$n)}),v$E(0,v$n,"diffuseTexture",function(){return this._getTexture(1)},function(v$n){v$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,v$n)}),v$E(0,v$n,"normalTexture",function(){return this._getTexture(2)},function(v$n){v$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,v$n)}),v$E(0,v$n,"specularTexture",function(){return this._getTexture(3)},function(v$n){v$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,v$n)}),v$E(0,v$n,"emissiveTexture",function(){return this._getTexture(4)},function(v$n){v$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,v$n)}),v$E(0,v$n,"reflectTexture",function(){return this._getTexture(6)},function(v$n){v$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,v$n)}),v$E(0,v$n,"transformUV",function(){return this._transformUV},function(v$n){this._transformUV=v$n,this._setMatrix4x4(13,v$n.matrix),v$n?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,v$n.matrix.elements,0)}),v$y.__init__=function(){v$y.SHADERDEFINE_DIFFUSEMAP=v$y.shaderDefines.registerDefine("DIFFUSEMAP"),v$y.SHADERDEFINE_NORMALMAP=v$y.shaderDefines.registerDefine("NORMALMAP"),v$y.SHADERDEFINE_SPECULARMAP=v$y.shaderDefines.registerDefine("SPECULARMAP"),v$y.SHADERDEFINE_EMISSIVEMAP=v$y.shaderDefines.registerDefine("EMISSIVEMAP"),v$y.SHADERDEFINE_AMBIENTMAP=v$y.shaderDefines.registerDefine("AMBIENTMAP"),v$y.SHADERDEFINE_REFLECTMAP=v$y.shaderDefines.registerDefine("REFLECTMAP"),v$y.SHADERDEFINE_UVTRANSFORM=v$y.shaderDefines.registerDefine("UVTRANSFORM"),v$y.SHADERDEFINE_TILINGOFFSET=v$y.shaderDefines.registerDefine("TILINGOFFSET"),v$y.SHADERDEFINE_ADDTIVEFOG=v$y.shaderDefines.registerDefine("ADDTIVEFOG")},v$y.load=function(v$n){return v$Y.loader.create(v$n,null,null,v$y)},v$y._parseStandardMaterial=function(v$n,v$a,v$U){var v$x=v$U.customProps,v$D=v$x.ambientColor;v$a.ambientColor=new v$Qa(v$D[0],v$D[1],v$D[2]);var v$p=v$x.diffuseColor;v$a.diffuseColor=new v$Qa(v$p[0],v$p[1],v$p[2]);var v$Q=v$x.specularColor;v$a.specularColor=new v$Va(v$Q[0],v$Q[1],v$Q[2],v$Q[3]);var v$V=v$x.reflectColor;v$a.reflectColor=new v$Qa(v$V[0],v$V[1],v$V[2]);var v$y=v$x.albedoColor;v$y&&(v$a.albedo=new v$Va(v$y[0],v$y[1],v$y[2],v$y[3]));var v$R=v$x.diffuseTexture.texture2D;v$R&&(v$a.diffuseTexture=v$P.getRes(v$n[v$R]));var v$X=v$x.normalTexture.texture2D;v$X&&(v$a.normalTexture=v$P.getRes(v$n[v$X]));var v$z=v$x.specularTexture.texture2D;v$z&&(v$a.specularTexture=v$P.getRes(v$n[v$z]));var v$i=v$x.emissiveTexture.texture2D;v$i&&(v$a.emissiveTexture=v$P.getRes(v$n[v$i]));var v$q=v$x.ambientTexture.texture2D;v$q&&(v$a.ambientTexture=v$P.getRes(v$n[v$q]));var v$E=v$x.reflectTexture.texture2D;v$E&&(v$a.reflectTexture=v$P.getRes(v$n[v$E]))},v$y.RENDERMODE_OPAQUE=1,v$y.RENDERMODE_OPAQUEDOUBLEFACE=2,v$y.RENDERMODE_CUTOUT=3,v$y.RENDERMODE_CUTOUTDOUBLEFACE=4,v$y.RENDERMODE_TRANSPARENT=13,v$y.RENDERMODE_TRANSPARENTDOUBLEFACE=14,v$y.RENDERMODE_ADDTIVE=15,v$y.RENDERMODE_ADDTIVEDOUBLEFACE=16,v$y.RENDERMODE_DEPTHREAD_TRANSPARENT=5,v$y.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,v$y.RENDERMODE_DEPTHREAD_ADDTIVE=7,v$y.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,v$y.RENDERMODE_NONDEPTH_TRANSPARENT=9,v$y.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,v$y.RENDERMODE_NONDEPTH_ADDTIVE=11,v$y.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,v$y.SHADERDEFINE_DIFFUSEMAP=0,v$y.SHADERDEFINE_NORMALMAP=0,v$y.SHADERDEFINE_SPECULARMAP=0,v$y.SHADERDEFINE_EMISSIVEMAP=0,v$y.SHADERDEFINE_AMBIENTMAP=0,v$y.SHADERDEFINE_REFLECTMAP=0,v$y.SHADERDEFINE_UVTRANSFORM=0,v$y.SHADERDEFINE_TILINGOFFSET=0,v$y.SHADERDEFINE_ADDTIVEFOG=0,v$y.DIFFUSETEXTURE=1,v$y.NORMALTEXTURE=2,v$y.SPECULARTEXTURE=3,v$y.EMISSIVETEXTURE=4,v$y.AMBIENTTEXTURE=5,v$y.REFLECTTEXTURE=6,v$y.ALBEDO=7,v$y.UVANIAGE=8,v$y.MATERIALAMBIENT=9,v$y.MATERIALDIFFUSE=10,v$y.MATERIALSPECULAR=11,v$y.MATERIALREFLECT=12,v$y.UVMATRIX=13,v$y.UVAGE=14,v$y.TILINGOFFSET=15,v$z(v$y,["defaultMaterial",function(){var v$n=new v$y;return v$n.lock=!0,this.defaultMaterial=v$n},"shaderDefines",function(){return this.shaderDefines=new v$Xa(v$Za.shaderDefines)}]),v$y}(v$Za),v$ha=function(v$n){function v$Q(v$n,v$a,v$U,v$x,v$D){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===v$U&&(v$U=35044),void 0===v$x&&(v$x=!1),v$Q.__super.call(this),this._indexType=v$n,this._indexCount=v$a,this._bufferUsage=v$U,this._bufferType=34963,this._canRead=v$x;var v$p;if("ushort"==v$n)this._indexTypeByteCount=2;else{if("ubyte"!=v$n)throw new Error("unidentification index type.");this._indexTypeByteCount=1}v$p=this._indexTypeByteCount*v$a,this._byteLength=v$p,this._bind(),v$V._gl.bufferData(this._bufferType,v$p,this._bufferUsage),this.uri=v$D,v$x?("ushort"==v$n?this._buffer=new Uint16Array(v$a):"ubyte"==v$n&&(this._buffer=new Uint8Array(v$a)),this.memorySize=2*v$p):this.memorySize=v$p}v$q(v$Q,"laya.d3.graphics.IndexBuffer3D",v$n);var v$a=v$Q.prototype;return v$a.setData=function(v$n,v$a,v$U,v$x){void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=4294967295);var v$D=0;if("ushort"==this._indexType?(v$D=2,0===v$U&&4294967295===v$x||(v$n=new Uint16Array(v$n.buffer,v$U*v$D,v$x))):"ubyte"==this._indexType&&(v$D=1,0===v$U&&4294967295===v$x||(v$n=new Uint8Array(v$n.buffer,v$U*v$D,v$x))),this._bind(),v$V._gl.bufferSubData(this._bufferType,v$a*v$D,v$n),this._canRead)if(0!==v$a||0!==v$U||4294967295!==v$x){var v$p=this._buffer.length-v$a;v$p<v$x&&(v$x=v$p);for(var v$Q=0;v$Q<v$x;v$Q++)this._buffer[v$a+v$Q]=v$n[v$Q]}else this._buffer=v$n},v$a.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},v$a.disposeResource=function(){v$n.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},v$E(0,v$a,"indexType",function(){return this._indexType}),v$E(0,v$a,"indexTypeByteCount",function(){return this._indexTypeByteCount}),v$E(0,v$a,"indexCount",function(){return this._indexCount}),v$E(0,v$a,"canRead",function(){return this._canRead}),v$Q.INDEXTYPE_UBYTE="ubyte",v$Q.INDEXTYPE_USHORT="ushort",v$Q.create=function(v$n,v$a,v$U,v$x,v$D){return void 0===v$U&&(v$U=35044),void 0===v$x&&(v$x=!1),new v$Q(v$n,v$a,v$U,v$x,v$D)},v$Q}(v$V),v$fa=function(v$p){function v$Q(v$n,v$a,v$U,v$x,v$D){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===v$x&&(v$x=!1),v$Q.__super.call(this),this._vertexDeclaration=v$n,this._vertexCount=v$a,this._bufferUsage=v$U,this._bufferType=34962,this._canRead=v$x,this.uri=v$D,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*v$a,this._bind(),v$V._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),v$x&&(this._buffer=new Float32Array(this._byteLength/4))}v$q(v$Q,"laya.d3.graphics.VertexBuffer3D",v$p);var v$n=v$Q.prototype;return v$n.bindWithIndexBuffer=function(v$n){v$n&&v$n._bind(),this._bind()},v$n.setData=function(v$n,v$a,v$U,v$x){if(void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=4294967295),0===v$U&&4294967295===v$x||(v$n=new Float32Array(v$n.buffer,4*v$U,v$x)),this._bind(),v$V._gl.bufferSubData(this._bufferType,4*v$a,v$n),this._canRead)if(0!==v$a||0!==v$U||4294967295!==v$x){var v$D=this._buffer.length-v$a;v$D<v$x&&(v$x=v$D);for(var v$p=0;v$p<v$x;v$p++)this._buffer[v$a+v$p]=v$n[v$p]}else this._buffer=v$n},v$n.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},v$n.disposeResource=function(){for(var v$n=v$u.mainContext,v$a=this._vertexDeclaration.getVertexElements(),v$U=v$V._enableAtributes,v$x=0,v$D=v$a.length;v$x<v$D;v$x++)v$U[v$x]===this._glBuffer&&(v$n.disableVertexAttribArray(v$x),v$U[v$x]=null);v$p.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},v$E(0,v$n,"vertexDeclaration",function(){return this._vertexDeclaration}),v$E(0,v$n,"vertexCount",function(){return this._vertexCount}),v$E(0,v$n,"canRead",function(){return this._canRead}),v$Q.create=function(v$n,v$a,v$U,v$x,v$D){return void 0===v$U&&(v$U=35044),void 0===v$x&&(v$x=!1),new v$Q(v$n,v$a,v$U,v$x,v$D)},v$Q}(v$V),v$Fa=function(v$n){function v$T(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,v$T.__super.call(this),this._type=3553}v$q(v$T,"laya.d3.resource.DataTexture2D",v$ua);var v$a=v$T.prototype;return v$a.genDebugMipmaps=function(){var v$n=[];return v$n.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),v$n.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),v$n.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),v$n.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),v$n.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),v$n.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),v$n.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),v$n.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),v$n.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),v$n.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),v$n},v$a._onTextureLoaded=function(v$n){},v$a._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var v$n=v$u.mainContext,v$a=this._source=v$n.createTexture(),v$U=this._width,v$x=this._height,v$D=v$c.curBindTexTarget,v$p=v$c.curBindTexValue,v$Q=!1;if(v$c.bindTexture(v$n,this._type,v$a),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var v$V=0;v$n.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var v$y=0;v$y<this._mipmaps.length;v$y++){if(this._mipmaps[v$y].byteLength!=v$R*v$X*4)throw"mipmap size error  level:"+v$y;v$n.texSubImage2D(this._type,0,v$T.simLodRect[v$V++],v$T.simLodRect[v$V++],v$T.simLodRect[v$V++],v$T.simLodRect[v$V++],6408,5121,new Uint8Array(this._mipmaps[v$y]))}this.minFifter=9729,this.magFifter=9729}else{var v$R=this._width,v$X=this._height;for(v$V=0,v$n.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),v$y=0;v$y<this._mipmaps.length;v$y++){if(this._mipmaps[v$y].byteLength!=v$R*v$X*4)throw"mipmap size error  level:"+v$y;v$n.texImage2D(this._type,v$y,6408,v$R,v$X,0,6408,5121,new Uint8Array(this._mipmaps[v$y])),(v$R/=2)<1&&(v$R=1),(v$X/=2)<1&&(v$X=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&v$n.pixelStorei(v$n.UNPACK_ALIGNMENT,1),v$n.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var v$z=0,v$i=!1,v$q=!1;this._buffer.byteLength==4*v$U*v$x?(v$z=6408,v$i=!0):this._buffer.byteLength==3*v$U*v$x?(v$z=6407,v$q=!0):v$z=this._format,v$i||v$q?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),v$q&&v$n.pixelStorei(v$n.UNPACK_ALIGNMENT,1),v$n.texImage2D(this._type,0,v$z,v$U,v$x,0,v$z,5121,this._buffer)):v$n&&v$z==v$n.ALPHA?(v$n.texImage2D(3553,0,v$z,v$U,v$x,0,v$z,v$n.UNSIGNED_BYTE,this._buffer),v$Q=!0):0!=v$z&&(v$n.compressedTexImage2D(3553,0,v$z,v$U,v$x,0,this._buffer),v$Q=!0)}var v$E=this._minFifter,v$m=this._magFifter,v$b=0==this._wrapModeU?10497:33071,v$P=0==this._wrapModeV?10497:33071,v$A=v$K.isPOT(v$U,v$x);v$A?(this._mipmap||this._mipmaps?-1!==v$E||(v$E=9987):-1!==v$E||(v$E=9729),-1!==v$m||(v$m=9729),v$n.texParameteri(this._type,10241,v$E),v$n.texParameteri(this._type,10240,v$m),v$n.texParameteri(this._type,10242,v$b),v$n.texParameteri(this._type,10243,v$P),this._mipmap&&v$n.generateMipmap(this._type)):(-1!==v$E||(v$E=9729),-1!==v$m||(v$m=9729),v$n.texParameteri(this._type,10241,v$E),v$n.texParameteri(this._type,10240,v$m),v$n.texParameteri(this._type,10242,33071),v$n.texParameteri(this._type,10243,33071)),v$D&&v$p&&v$c.bindTexture(v$n,v$D,v$p),this.memorySize=v$Q?this._buffer.length:v$A?v$U*v$x*4*(1+1/3):v$U*v$x*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},v$a.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},v$a.onAsynLoaded=function(v$n,v$a,v$U){var v$x;v$U&&(v$x=v$U[0].call(this,v$a)),v$x&&(this._width=v$x.width,this._height=v$x.height,this._buffer=v$x.data),this._src=v$n,this._size=new v$ma(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},v$a.getPixels=function(){return new Uint8Array(this._buffer)},v$a.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(v$u.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},v$E(0,v$a,"src",function(){return this._src}),v$T.create=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){if(void 0===v$x&&(v$x=9729),void 0===v$D&&(v$D=9729),void 0===v$p&&(v$p=!0),!v$n||v$n.byteLength<v$a*v$U*4)throw"DataTexture2D create error";var v$V=new v$T;return v$V.uri=v$Q,v$V._buffer=v$n,v$V._width=v$a,v$V._height=v$U,v$V._mipmap=v$p,v$V._magFifter=v$x,v$V._minFifter=v$D,v$V._size=new v$ma(v$V._width,v$V._height),v$V._conchTexture?alert("怎么给runtime传递datatexture数据"):v$V.activeResource(),v$V},v$T.load=function(v$n,v$a,v$U,v$x,v$D){if(void 0===v$a&&(v$a=0),void 0===v$U&&(v$U=0),void 0===v$x&&(v$x=9729),void 0===v$D&&(v$D=9729),"mipmaps"===v$$.getFileExtension(v$n)){var v$p=v$Y.loader.create(v$n,null,null,v$T,[function(v$n){this._mipmaps=[];var v$a=new Uint32Array(v$n);this._width=v$a[0];var v$U=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,v$U=1024),this._width!=v$U)throw"现在只支持512x256的环境贴图。当前的是"+v$a[0];this._height=v$a[1];for(var v$x=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,v$D=this._height,v$p=8;;){var v$Q=v$x*v$D*4;if(v$p+v$Q>v$n.byteLength)throw"load mipmaps data size error ";var v$V=new Uint8Array(v$n,v$p,v$Q);if(this._mipmaps.push(v$V),v$p+=v$Q,1==v$x&&1==v$D)break;(v$x/=2)<1&&(v$x=1),(v$D/=2)<1&&(v$D=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){v$p.simLodInfo=new Float32Array(40);for(var v$Q=0;v$Q<v$p.simLodInfo.length;)v$p.simLodInfo[v$Q]=(v$T.simLodRect[v$Q]+.5)/1024,v$Q++,v$p.simLodInfo[v$Q]=(v$T.simLodRect[v$Q]+.5)/256,v$Q++,v$p.simLodInfo[v$Q]=Math.max(v$T.simLodRect[v$Q]-1,.1)/1024,v$Q++,v$p.simLodInfo[v$Q]=Math.max(v$T.simLodRect[v$Q]-1.5,.1)/256,v$Q++}return v$p}if("number"==typeof v$a)return v$Y.loader.create(v$n,null,null,v$T,[function(v$n){return this._width=v$a,this._height=v$U,this._buffer=v$n,null}]);if("function"==typeof v$a)return v$Y.loader.create(v$n,null,null,v$T,[v$a]);throw new Error("unknown params.")},v$T.lodasatlas=!1,v$z(v$T,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),v$T}(),v$ga=function(v$n){function v$a(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,v$a.__super.call(this)}v$q(v$a,"laya.d3.resource.models.PrimitiveMesh",v$ca);var v$U=v$a.prototype;return v$Y.imps(v$U,{"laya.d3.core.render.IRenderable":!0}),v$U._getVertexBuffer=function(v$n){return void 0===v$n&&(v$n=0),0===v$n?this._vertexBuffer:null},v$U._getVertexBuffers=function(){return null},v$U._getIndexBuffer=function(){return this._indexBuffer},v$U._getPositions=function(){var v$n,v$a=[],v$U=this._vertexBuffer.vertexDeclaration.getVertexElements(),v$x=0;for(v$x=0;v$x<v$U.length;v$x++){var v$D=v$U[v$x];if("vector3"===v$D.elementFormat&&0===v$D.elementUsage){v$n=v$D;break}}var v$p=this._vertexBuffer.getData();for(v$x=0;v$x<v$p.length;v$x+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var v$Q=v$x+v$n.offset/4,v$V=new v$Qa(v$p[v$Q+0],v$p[v$Q+1],v$p[v$Q+2]);v$a.push(v$V)}return v$a},v$U.getRenderElement=function(v$n){return this},v$U.getRenderElementsCount=function(){return 1},v$U.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},v$U._beforeRender=function(v$n){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},v$U._render=function(v$n){v$u.mainContext.drawElements(4,this._numberIndices,5123,0),v$N.drawCall++,v$N.trianglesFaces+=this._numberIndices/3},v$E(0,v$U,"_vertexBufferCount",function(){return 1}),v$E(0,v$U,"triangleCount",function(){return this._indexBuffer.indexCount/3}),v$a}(),v$oa=function(v$n){function v$a(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,v$a.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}v$q(v$a,"laya.d3.resource.models.Mesh",v$ca);var v$U=v$a.prototype;return v$U._getPositions=function(){var v$n,v$a,v$U,v$x,v$D,v$p=[],v$Q=0,v$V=0,v$y=0;if(0!==this._vertexBuffers.length){var v$R=this._vertexBuffers.length;for(v$Q=0;v$Q<v$R;v$Q++){for(v$U=(v$n=this._vertexBuffers[v$Q]).vertexDeclaration.getVertexElements(),v$V=0;v$V<v$U.length;v$V++)if("vector3"===(v$x=v$U[v$V]).elementFormat&&0===v$x.elementUsage){v$a=v$x;break}for(v$D=v$n.getData(),v$V=0;v$V<v$D.length;v$V+=v$n.vertexDeclaration.vertexStride/4)v$y=v$V+v$a.offset/4,v$p.push(new v$Qa(v$D[v$y+0],v$D[v$y+1],v$D[v$y+2]))}}else{var v$X=this._subMeshes.length;for(v$Q=0;v$Q<v$X;v$Q++){for(v$U=(v$n=this._subMeshes[v$Q]._getVertexBuffer()).vertexDeclaration.getVertexElements(),v$V=0;v$V<v$U.length;v$V++)if("vector3"===(v$x=v$U[v$V]).elementFormat&&0===v$x.elementUsage){v$a=v$x;break}for(v$D=v$n.getData(),v$V=0;v$V<v$D.length;v$V+=v$n.vertexDeclaration.vertexStride/4)v$y=v$V+v$a.offset/4,v$p.push(new v$Qa(v$D[v$y+0],v$D[v$y+1],v$D[v$y+2]))}}return v$p},v$U._setSubMeshes=function(v$n){this._subMeshes=v$n,this._subMeshCount=v$n.length;for(var v$a=0;v$a<this._subMeshCount;v$a++)v$n[v$a]._indexInMesh=v$a;this._positions=this._getPositions(),this._generateBoundingObject()},v$U.onAsynLoaded=function(v$n,v$a,v$U){var v$x=v$a[0],v$D=v$a[1];v$sn.read(v$x,this,this._materials,this._subMeshes,v$D),this.completeCreate(),this._endLoaded()},v$U.getSubMesh=function(v$n){return this._subMeshes[v$n]},v$U.getSubMeshCount=function(){return this._subMeshes.length},v$U.getRenderElementsCount=function(){return this._subMeshes.length},v$U.getRenderElement=function(v$n){return this._subMeshes[v$n]},v$U.disposeResource=function(){for(var v$n=0;v$n<this._subMeshes.length;v$n++)this._subMeshes[v$n].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},v$E(0,v$U,"materials",function(){return this._materials.slice()}),v$E(0,v$U,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),v$a.load=function(v$n){return v$Y.loader.create(v$n,null,null,v$a)},v$a}(),v$Ba=(function(v$n){function v$R(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===v$U&&(v$U=6408),void 0===v$x&&(v$x=5121),void 0===v$D&&(v$D=33189),void 0===v$p&&(v$p=!1),void 0===v$Q&&(v$Q=!1),void 0===v$V&&(v$V=-1),void 0===v$y&&(v$y=-1),v$R.__super.call(this),this._type=3553,this._width=v$n,this._height=v$a,this._size=new v$ma(v$n,v$a),this._surfaceFormat=v$U,this._surfaceType=v$x,this._depthStencilFormat=v$D,v$m.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=v$p,this._repeat=v$Q,this._minFifter=v$V,this._magFifter=v$y,this.activeResource(),this._alreadyResolved=!0}v$q(v$R,"laya.d3.resource.RenderTexture",v$ua);var v$a=v$R.prototype;v$a.recreateResource=function(){var v$n=v$u.mainContext;this._frameBuffer=v$n.createFramebuffer(),this._source=v$n.createTexture();var v$a=v$c.curBindTexTarget,v$U=v$c.curBindTexValue;v$c.bindTexture(v$n,this._type,this._source),v$n.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var v$x=this._minFifter,v$D=this._magFifter,v$p=this._repeat?10497:33071;if(v$K.isPOT(this._width,this._height)?(this._mipmap?-1!==v$x||(v$x=9987):-1!==v$x||(v$x=9729),-1!==v$D||(v$D=9729),v$n.texParameteri(this._type,10241,v$x),v$n.texParameteri(this._type,10240,v$D),v$n.texParameteri(this._type,10242,v$p),v$n.texParameteri(this._type,10243,v$p),this._mipmap&&v$n.generateMipmap(this._type)):(-1!==v$x||(v$x=9729),-1!==v$D||(v$D=9729),v$n.texParameteri(this._type,10241,v$x),v$n.texParameteri(this._type,10240,v$D),v$n.texParameteri(this._type,10242,33071),v$n.texParameteri(this._type,10243,33071)),v$a&&v$U&&v$c.bindTexture(v$n,v$a,v$U),v$n.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=v$n.createRenderbuffer(),v$n.bindRenderbuffer(36161,this._depthStencilBuffer),v$n.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),v$n.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:v$n.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:v$n.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:v$n.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}v$n.framebufferTexture2D(36160,36064,3553,this._source,0),v$n.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},v$a.start=function(){v$u.mainContext.bindFramebuffer(36160,this.frameBuffer),(v$R._currentRenderTarget=this)._alreadyResolved=!1},v$a.end=function(){v$u.mainContext.bindFramebuffer(36160,null),v$R._currentRenderTarget=null,this._alreadyResolved=!0},v$a.getData=function(v$n,v$a,v$U,v$x){var v$D=v$u.mainContext;if(v$D.bindFramebuffer(36160,this._frameBuffer),!(36053===v$D.checkFramebufferStatus(36160)))return v$D.bindFramebuffer(36160,null),null;var v$p=new Uint8Array(this._width*this._height*4);return v$D.readPixels(v$n,v$a,v$U,v$x,this._surfaceFormat,this._surfaceType,v$p),v$D.bindFramebuffer(36160,null),v$p},v$a.disposeResource=function(){if(this._frameBuffer){var v$n=v$u.mainContext;v$n.deleteTexture(this._source),v$n.deleteFramebuffer(this._frameBuffer),v$n.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},v$E(0,v$a,"surfaceFormat",function(){return this._surfaceFormat}),v$E(0,v$a,"surfaceType",function(){return this._surfaceType}),v$E(0,v$a,"depthStencilFormat",function(){return this._depthStencilFormat}),v$E(0,v$a,"source",function(){return this._alreadyResolved?v$Y.superGet(v$ua,this,"source"):null}),v$E(0,v$a,"depthStencilBuffer",function(){return this._depthStencilBuffer}),v$E(0,v$a,"frameBuffer",function(){return this._frameBuffer}),v$R._currentRenderTarget=null}(),function(v$n){function v$a(v$n){this._color=null,this._pixels=null,v$a.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new v$ma(this.width,this.height),this._color=v$n,this._pixels=new Uint8Array([255*v$n.x,255*v$n.y,255*v$n.z,255*v$n.w]),this.uri="SolidColorTexture2D_"+this.id}v$q(v$a,"laya.d3.resource.SolidColorTexture2D",v$ua);var v$U=v$a.prototype;return v$U._createWebGlTexture=function(){var v$n=v$u.mainContext,v$a=this._source=v$n.createTexture(),v$U=this._width,v$x=this._height,v$D=v$c.curBindTexTarget,v$p=v$c.curBindTexValue;v$c.bindTexture(v$n,this._type,v$a),v$n.texImage2D(this._type,0,6408,v$U,v$x,0,6408,5121,this._pixels);var v$Q=this._minFifter,v$V=this._magFifter,v$y=this._repeat?10497:33071,v$R=v$K.isPOT(v$U,v$x);v$R?(this._mipmap?-1!==v$Q||(v$Q=9987):-1!==v$Q||(v$Q=9729),-1!==v$V||(v$V=9729),v$n.texParameteri(this._type,10241,v$Q),v$n.texParameteri(this._type,10240,v$V),v$n.texParameteri(this._type,10242,v$y),v$n.texParameteri(this._type,10243,v$y),this._mipmap&&v$n.generateMipmap(this._type)):(-1!==v$Q||(v$Q=9729),-1!==v$V||(v$V=9729),v$n.texParameteri(this._type,10241,v$Q),v$n.texParameteri(this._type,10240,v$V),v$n.texParameteri(this._type,10242,33071),v$n.texParameteri(this._type,10243,33071)),v$D&&v$p&&v$c.bindTexture(v$n,v$D,v$p),this.memorySize=v$R?v$U*v$x*4*(1+1/3):v$U*v$x*4},v$U.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},v$U.disposeResource=function(){this._source&&(v$u.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},v$z(v$a,["magentaTexture",function(){var v$n=new v$a(new v$Va(1,0,1,1));return v$n.lock=!0,this.magentaTexture=v$n},"grayTexture",function(){var v$n=new v$a(new v$Va(.5,.5,.5,1));return v$n.lock=!0,this.grayTexture=v$n}]),v$a}()),v$Oa=function(v$n){function v$D(v$n,v$a,v$U,v$x){this._canRead=!1,this._image=null,this._pixels=null,void 0===v$n&&(v$n=!1),void 0===v$a&&(v$a=!0),void 0===v$U&&(v$U=6408),void 0===v$x&&(v$x=!0),v$D.__super.call(this),this._type=3553,this._repeat=v$a,this._canRead=v$n,this._format=v$U,this._mipmap=v$x}v$q(v$D,"laya.d3.resource.Texture2D",v$ua);var v$a=v$D.prototype;return v$a._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var v$n=v$u.mainContext,v$a=this._source=v$n.createTexture(),v$U=this._width,v$x=this._height,v$D=v$c.curBindTexTarget,v$p=v$c.curBindTexValue;switch(v$c.bindTexture(v$n,this._type,v$a),this._format){case 6407:case 6408:this._canRead?v$n.texImage2D(this._type,0,this._format,v$U,v$x,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?v$n.texImage2D(this._type,0,this._image._format,v$U,v$x,0,this._image._format,5121,this._image.atlasSource):v$n.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case v$u.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:v$n.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var v$Q=this._minFifter,v$V=this._magFifter,v$y=this._repeat?10497:33071,v$R=0==this._wrapModeU?10497:33071,v$X=0==this._wrapModeV?10497:33071,v$z=v$K.isPOT(v$U,v$x);v$z?(this._mipmap?-1!==v$Q||(v$Q=9987):-1!==v$Q||(v$Q=9729),-1!==v$V||(v$V=9729),v$n.texParameteri(this._type,10241,v$Q),v$n.texParameteri(this._type,10240,v$V),v$n.texParameteri(this._type,10242,v$y),v$n.texParameteri(this._type,10243,v$y),v$n.texParameteri(this._type,10242,v$R),v$n.texParameteri(this._type,10243,v$X),this._mipmap&&v$n.generateMipmap(this._type)):(-1!==v$Q||(v$Q=9729),-1!==v$V||(v$V=9729),v$n.texParameteri(this._type,10241,v$Q),v$n.texParameteri(this._type,10240,v$V),v$n.texParameteri(this._type,10242,33071),v$n.texParameteri(this._type,10243,33071)),v$D&&v$p&&v$c.bindTexture(v$n,v$D,v$p),this._image.onload=null,this._image=null,this.memorySize=v$z?v$U*v$x*4*(1+1/3):v$U*v$x*4},v$a.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},v$a.onAsynLoaded=function(v$n,v$a,v$U){if(v$U){var v$x=v$U[0];void 0!==v$x&&(this._canRead=v$x);var v$D=v$U[1];void 0!==v$D&&(this._repeat=v$D);var v$p=v$U[2];void 0!==v$p&&(this._format=v$p);var v$Q=v$U[3];void 0!==v$Q&&(this._mipmap=v$Q);var v$V=v$U.wrapModeU;void 0!==v$V&&(this._wrapModeU=v$V);var v$y=v$U.wrapModeV;void 0!==v$y&&(this._wrapModeV=v$y)}switch(this._format){case 6407:case 6408:var v$R=(this._image=v$a).width,v$X=v$a.height;this._width=v$R,this._height=v$X,this._size=new v$ma(v$R,v$X),this._canRead&&(v$m.isConchApp?v$a instanceof v$i.HTMLElement&&(this._pixels=new Uint8Array(v$a.getImageData(0,0,v$R,v$X))):(v$H.canvas.size(v$R,v$X),v$H.canvas.clear(),v$H.context.drawImage(v$a,0,0,v$R,v$X),this._pixels=new Uint8Array(v$H.context.getImageData(0,0,v$R,v$X).data.buffer)));break;case v$u.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var v$z=new v$W(v$a);v$z.readUTFBytes(4),v$z.readUTFBytes(2),v$z.getInt16();v$z.endian="bigEndian",this._width=v$z.getInt16(),this._height=v$z.getInt16(),this._size=new v$ma(this._width,this._height);v$z.getInt16(),v$z.getInt16();this._image=new Uint8Array(v$a,v$z.pos)}this.recreateResource(),this._endLoaded()},v$a.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},v$a.disposeResource=function(){this._source&&(v$u.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},v$E(0,v$a,"_src",function(){return this.url}),v$E(0,v$a,"src",function(){return this.url}),v$D.load=function(v$n){return v$Y.loader.create(v$n,null,null,v$D)},v$D}(),v$La=function(v$a){function v$U(v$n,v$a){v$U.__super.call(this),void 0===v$n&&(v$n=.3),void 0===v$a&&(v$a=1e3),this._tempVector3=new v$Qa,this._position=new v$Qa,this._up=new v$Qa,this._forward=new v$Qa,this._right=new v$Qa,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=v$ma.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=v$n,this._farPlane=v$a,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),v$Y.stage.on("resize",this,this._onScreenSizeChanged)}v$q(v$U,"laya.d3.core.BaseCamera",v$a);var v$n=v$U.prototype;return v$n._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var v$n=this.scene._cameraPool,v$a=v$n.length-1,v$U=0;v$U<v$a;v$U++)if(v$n[v$U].renderingOrder>v$n[v$a].renderingOrder){var v$x=v$n[v$U];v$n[v$U]=v$n[v$a],v$n[v$a]=v$x}},v$n._calculateProjectionMatrix=function(){},v$n._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},v$n._prepareCameraToRender=function(){v$G._currentCameraCullingMask=this.cullingMask;var v$n=this._shaderValues;v$n.setValue(0,this.transform.position.elements),v$n.setValue(5,this.forward.elements),v$n.setValue(6,this.up.elements)},v$n._prepareCameraViewProject=function(v$n,v$a){var v$U=this._shaderValues;v$U.setValue(1,v$n.elements),v$U.setValue(2,v$a.elements)},v$n._renderCamera=function(v$n,v$a,v$U){},v$n.addLayer=function(v$n){29!==v$n.number&&30!=v$n.number&&(this.cullingMask=this.cullingMask|v$n.mask)},v$n.removeLayer=function(v$n){29!==v$n.number&&30!=v$n.number&&(this.cullingMask=this.cullingMask&~v$n.mask)},v$n.addAllLayers=function(){this.cullingMask=2147483647},v$n.removeAllLayers=function(){this.cullingMask=0|v$G.getLayerByNumber(29).mask|v$G.getLayerByNumber(30).mask},v$n.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},v$n.moveForward=function(v$n){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=v$n,this.transform.translate(this._tempVector3)},v$n.moveRight=function(v$n){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=v$n,this.transform.translate(this._tempVector3)},v$n.moveVertical=function(v$n){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=v$n,this.transform.translate(this._tempVector3,!1)},v$n._addSelfRenderObjects=function(){var v$n=this.scene._cameraPool,v$a=v$n.length;if(0<v$a){for(var v$U=v$a-1;0<=v$U;v$U--)if(this.renderingOrder<=v$n[v$U].renderingOrder){v$n.splice(v$U+1,0,this);break}}else v$n.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},v$n._clearSelfRenderObjects=function(){var v$n=this.scene._cameraPool;v$n.splice(v$n.indexOf(this),1)},v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,v$Y.stage.off("resize",this,this._onScreenSizeChanged),v$a.prototype.destroy.call(this,v$n)},v$E(0,v$n,"sky",function(){return this._sky},function(v$n){(this._sky=v$n)._ownerCamera=this}),v$E(0,v$n,"forward",function(){var v$n=this.transform.worldMatrix.elements,v$a=this._forward.elements;return v$a[0]=-v$n[8],v$a[1]=-v$n[9],v$a[2]=-v$n[10],this._forward}),v$E(0,v$n,"position",function(){var v$n=this.transform.worldMatrix.elements,v$a=this._position.elements;return v$a[0]=v$n[12],v$a[1]=v$n[13],v$a[2]=v$n[14],this._position}),v$E(0,v$n,"renderTarget",function(){return this._renderTarget},function(v$n){null!=(this._renderTarget=v$n)&&(this._renderTargetSize=v$n.size)}),v$E(0,v$n,"up",function(){var v$n=this.transform.worldMatrix.elements,v$a=this._up.elements;return v$a[0]=v$n[4],v$a[1]=v$n[5],v$a[2]=v$n[6],this._up}),v$E(0,v$n,"right",function(){var v$n=this.transform.worldMatrix.elements,v$a=this._right.elements;return v$a[0]=v$n[0],v$a[1]=v$n[1],v$a[2]=v$n[2],this._right}),v$E(0,v$n,"renderTargetSize",function(){return this._renderTargetSize},function(v$n){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=v$n,this._calculateProjectionMatrix()}),v$E(0,v$n,"fieldOfView",function(){return this._fieldOfView},function(v$n){this._fieldOfView=v$n,this._calculateProjectionMatrix()}),v$E(0,v$n,"nearPlane",function(){return this._nearPlane},function(v$n){this._nearPlane=v$n,this._calculateProjectionMatrix()}),v$E(0,v$n,"farPlane",function(){return this._farPlane},function(v$n){this._farPlane=v$n,this._calculateProjectionMatrix()}),v$E(0,v$n,"orthographic",function(){return this._orthographic},function(v$n){this._orthographic=v$n,this._calculateProjectionMatrix()}),v$E(0,v$n,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(v$n){this._orthographicVerticalSize=v$n,this._calculateProjectionMatrix()}),v$E(0,v$n,"renderingOrder",function(){return this._renderingOrder},function(v$n){this._renderingOrder=v$n,this._sortCamerasByRenderingOrder()}),v$U.CAMERAPOS=0,v$U.VIEWMATRIX=1,v$U.PROJECTMATRIX=2,v$U.VPMATRIX=3,v$U.VPMATRIX_NO_TRANSLATE=4,v$U.CAMERADIRECTION=5,v$U.CAMERAUP=6,v$U.ENVIRONMENTDIFFUSE=7,v$U.ENVIRONMENTSPECULAR=8,v$U.SIMLODINFO=9,v$U.DIFFUSEIRRADMATR=10,v$U.DIFFUSEIRRADMATG=11,v$U.DIFFUSEIRRADMATB=12,v$U.HDREXPOSURE=13,v$U.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",v$U.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",v$U.CLEARFLAG_SOLIDCOLOR=0,v$U.CLEARFLAG_SKY=1,v$U.CLEARFLAG_DEPTHONLY=2,v$U.CLEARFLAG_NONE=3,v$z(v$U,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new v$na(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new v$na},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new v$na}]),v$U}(v$va),v$da=function(v$U){function v$a(v$n){this._render=null,this._geometryFilter=null,v$a.__super.call(this,v$n)}v$q(v$a,"laya.d3.core.RenderableSprite3D",v$U);var v$n=v$a.prototype;return v$n._addToInitStaticBatchManager=function(){},v$n._setBelongScene=function(v$n){v$U.prototype._setBelongScene.call(this,v$n),v$n._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},v$n._setUnBelongScene=function(){var v$n=this._scene._renderableSprite3Ds,v$a=v$n.indexOf(this);v$n.splice(v$a,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),v$U.prototype._setUnBelongScene.call(this)},v$n._update=function(v$n){(v$n.owner=this)._activeInHierarchy&&(this._updateComponents(v$n),this._render._updateOctreeNode(),this._lateUpdateComponents(v$n),v$N.spriteCount++,this._childs.length&&this._updateChilds(v$n))},v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$U.prototype.destroy.call(this,v$n),this._render._destroy(),this._render=null},v$a.__init__=function(){v$a.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=v$a.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),v$a.SAHDERDEFINE_LIGHTMAP=v$a.shaderDefines.registerDefine("LIGHTMAP")},v$a.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,v$a.SAHDERDEFINE_LIGHTMAP=4,v$a.LIGHTMAPSCALEOFFSET=2,v$a.LIGHTMAP=3,v$z(v$a,["shaderDefines",function(){return this.shaderDefines=new v$Xa}]),v$a}(v$va),v$Sa=(function(v$n){function v$x(v$n,v$a,v$U){this._long=NaN,this._width=NaN,this._height=NaN,void 0===v$n&&(v$n=1),void 0===v$a&&(v$a=1),void 0===v$U&&(v$U=1),v$x.__super.call(this),this._long=v$n,this._width=v$a,this._height=v$U,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}v$q(v$x,"laya.d3.resource.models.BoxMesh",v$ga);var v$a=v$x.prototype;v$a.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var v$n=v$un.vertexDeclaration,v$a=(v$n.vertexStride,this._long/2),v$U=this._height/2,v$x=this._width/2,v$D=new Float32Array([-v$a,v$U,-v$x,0,1,0,0,0,v$a,v$U,-v$x,0,1,0,1,0,v$a,v$U,v$x,0,1,0,1,1,-v$a,v$U,v$x,0,1,0,0,1,-v$a,-v$U,-v$x,0,-1,0,0,1,v$a,-v$U,-v$x,0,-1,0,1,1,v$a,-v$U,v$x,0,-1,0,1,0,-v$a,-v$U,v$x,0,-1,0,0,0,-v$a,v$U,-v$x,-1,0,0,0,0,-v$a,v$U,v$x,-1,0,0,1,0,-v$a,-v$U,v$x,-1,0,0,1,1,-v$a,-v$U,-v$x,-1,0,0,0,1,v$a,v$U,-v$x,1,0,0,1,0,v$a,v$U,v$x,1,0,0,0,0,v$a,-v$U,v$x,1,0,0,0,1,v$a,-v$U,-v$x,1,0,0,1,1,-v$a,v$U,v$x,0,0,1,0,0,v$a,v$U,v$x,0,0,1,1,0,v$a,-v$U,v$x,0,0,1,1,1,-v$a,-v$U,v$x,0,0,1,0,1,-v$a,v$U,-v$x,0,0,-1,1,0,v$a,v$U,-v$x,0,0,-1,0,0,v$a,-v$U,-v$x,0,0,-1,0,1,-v$a,-v$U,-v$x,0,0,-1,1,1]),v$p=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new v$fa(v$n,this._numberVertices,35044,!0),this._indexBuffer=new v$ha("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(v$D),this._indexBuffer.setData(v$p),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},v$E(0,v$a,"long",function(){return this._long},function(v$n){this._long!==v$n&&(this._long=v$n,this.releaseResource(),this.activeResource())}),v$E(0,v$a,"width",function(){return this._width},function(v$n){this._width!==v$n&&(this._width=v$n,this.releaseResource(),this.activeResource())}),v$E(0,v$a,"height",function(){return this._height},function(v$n){this._height!==v$n&&(this._height=v$n,this.releaseResource(),this.activeResource())})}(),function(v$n){function v$D(v$n,v$a,v$U,v$x){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===v$n&&(v$n=10),void 0===v$a&&(v$a=10),void 0===v$U&&(v$U=10),void 0===v$x&&(v$x=10),v$D.__super.call(this),this._long=v$n,this._width=v$a,this._stacks=v$U,this._slices=v$x,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}v$q(v$D,"laya.d3.resource.models.PlaneMesh",v$ga);var v$a=v$D.prototype;v$a.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var v$n=new Uint16Array(this._numberIndices),v$a=v$un.vertexDeclaration,v$U=v$a.vertexStride/4,v$x=new Float32Array(this._numberVertices*v$U),v$D=this._long/2,v$p=this._width/2,v$Q=this._long/this._stacks,v$V=this._width/this._slices,v$y=0,v$R=0;v$R<=this._slices;v$R++)for(var v$X=0;v$X<=this._stacks;v$X++)v$x[v$y++]=v$X*v$Q-v$D,v$x[v$y++]=0,v$x[v$y++]=v$R*v$V-v$p,v$x[v$y++]=0,v$x[v$y++]=1,v$x[v$y++]=0,v$x[v$y++]=1*v$X/this._stacks,v$x[v$y++]=1*v$R/this._slices;var v$z=0;for(v$R=0;v$R<this._slices;v$R++)for(v$X=0;v$X<this._stacks;v$X++)v$n[v$z++]=(v$R+1)*(this._stacks+1)+v$X,v$n[v$z++]=v$R*(this._stacks+1)+v$X,v$n[v$z++]=(v$R+1)*(this._stacks+1)+v$X+1,v$n[v$z++]=v$R*(this._stacks+1)+v$X,v$n[v$z++]=v$R*(this._stacks+1)+v$X+1,v$n[v$z++]=(v$R+1)*(this._stacks+1)+v$X+1;this._vertexBuffer=new v$fa(v$a,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new v$ha("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(v$x),this._indexBuffer.setData(v$n),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},v$E(0,v$a,"long",function(){return this._long},function(v$n){this._long!==v$n&&(this._long=v$n,this.releaseResource(),this.activeResource())}),v$E(0,v$a,"width",function(){return this._width},function(v$n){this._width!==v$n&&(this._width=v$n,this.releaseResource(),this.activeResource())}),v$E(0,v$a,"stacks",function(){return this._stacks},function(v$n){this._stacks!==v$n&&(this._stacks=v$n,this.releaseResource(),this.activeResource())}),v$E(0,v$a,"slices",function(){return this._slices},function(v$n){this._slices!==v$n&&(this._slices=v$n,this.releaseResource(),this.activeResource())})}(),function(v$n){function v$Q(v$n,v$a,v$U){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=.3),void 0===v$U&&(v$U=1e3),this._viewMatrix=new v$na,this._projectionMatrix=new v$na,this._projectionViewMatrix=new v$na,this._viewport=new v$ya(0,0,0,0),this._normalizedViewport=new v$ya(0,0,1,1),this._aspectRatio=v$n,this._boundFrustumUpdate=!0,this._boundFrustum=new v$tn(v$na.DEFAULT),v$Q.__super.call(this,v$a,v$U),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}v$q(v$Q,"laya.d3.core.Camera",v$La);var v$a=v$Q.prototype;return v$a._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},v$a._parseCustomProps=function(v$n,v$a,v$U,v$x){var v$D=v$U.clearColor;this.clearColor=new v$Va(v$D[0],v$D[1],v$D[2],v$D[3]);var v$p=v$U.viewport;this.normalizedViewport=new v$ya(v$p[0],v$p[1],v$p[2],v$p[3])},v$a._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var v$n=this.orthographicVerticalSize*this.aspectRatio*.5,v$a=.5*this.orthographicVerticalSize;v$na.createOrthoOffCenterRH(-v$n,v$n,-v$a,v$a,this.nearPlane,this.farPlane,this._projectionMatrix)}else v$na.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},v$a._update=function(v$n){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,v$n)},v$a._renderCamera=function(v$n,v$a,v$U){var v$x,v$D;v$U.parallelSplitShadowMaps[0]&&v$U._renderShadowMap(v$n,v$a,this),(v$a.camera=this)._prepareCameraToRender(),v$U._preRenderUpdateComponents(v$a),v$x=v$a._viewMatrix=this.viewMatrix;var v$p=this._renderTarget;v$p?(v$p.start(),v$na.multiply(v$La._invertYScaleMatrix,this._projectionMatrix,v$La._invertYProjectionMatrix),v$na.multiply(v$La._invertYScaleMatrix,this.projectionViewMatrix,v$La._invertYProjectionViewMatrix),v$D=v$a._projectionMatrix=v$La._invertYProjectionMatrix,v$a._projectionViewMatrix=v$La._invertYProjectionViewMatrix):(v$D=v$a._projectionMatrix=this._projectionMatrix,v$a._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(v$x,v$D),v$a._viewport=this.viewport,v$U._preRenderScene(v$n,v$a,this.boundFrustum),v$U._clear(v$n,v$a),v$U._renderScene(v$n,v$a),v$U._postRenderUpdateComponents(v$a),v$p&&v$p.end()},v$a.viewportPointToRay=function(v$n,v$a){v$Ea.calculateCursorRay(v$n,this.viewport,this._projectionMatrix,this.viewMatrix,null,v$a)},v$a.normalizedViewportPointToRay=function(v$n,v$a){var v$U=v$Q._tempVector20,v$x=this.viewport,v$D=v$n.elements,v$p=v$U.elements;v$p[0]=v$D[0]*v$x.width,v$p[1]=v$D[1]*v$x.height,v$Ea.calculateCursorRay(v$U,this.viewport,this._projectionMatrix,this.viewMatrix,null,v$a)},v$a.worldToViewportPoint=function(v$n,v$a){v$na.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(v$n,this._projectionViewMatrix,v$a);var v$U=v$a.elements;v$U[0]=v$U[0]/v$Y.stage.clientScaleX,v$U[1]=v$U[1]/v$Y.stage.clientScaleY},v$a.worldToNormalizedViewportPoint=function(v$n,v$a){v$na.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(v$n,this._projectionViewMatrix,v$a);var v$U=v$a.elements;v$U[0]=v$U[0]/v$Y.stage.clientScaleX,v$U[1]=v$U[1]/v$Y.stage.clientScaleY},v$a.convertScreenCoordToOrthographicCoord=function(v$n,v$a){if(this._orthographic){var v$U=v$s.clientWidth,v$x=v$s.clientHeight,v$D=this.orthographicVerticalSize*this.aspectRatio/v$U,v$p=this.orthographicVerticalSize/v$x,v$Q=v$n.elements,v$V=v$a.elements;return v$V[0]=(-v$U/2+v$Q[0])*v$D,v$V[1]=(v$x/2-v$Q[1])*v$p,v$V[2]=(this.nearPlane-this.farPlane)*(v$Q[2]+1)/2-this.nearPlane,v$Qa.transformCoordinate(v$a,this.transform.worldMatrix,v$a),!0}return!1},v$E(0,v$a,"projectionViewMatrix",function(){return v$na.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),v$E(0,v$a,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var v$n=this.viewport;return v$n.width/v$n.height},function(v$n){if(v$n<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=v$n,this._calculateProjectionMatrix()}),v$E(0,v$a,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),v$E(0,v$a,"needViewport",function(){var v$n=this.normalizedViewport;return 0===v$n.x&&0===v$n.y&&1===v$n.width&&1===v$n.height}),v$E(0,v$a,"viewport",function(){if(this._viewportExpressedInClipSpace){var v$n=this._normalizedViewport,v$a=this.renderTargetSize,v$U=v$a.width,v$x=v$a.height;this._viewport.x=v$n.x*v$U,this._viewport.y=v$n.y*v$x,this._viewport.width=v$n.width*v$U,this._viewport.height=v$n.height*v$x}return this._viewport},function(v$n){if(null!=this.renderTarget&&(v$n.x<0||v$n.y<0||0==v$n.width||0==v$n.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=v$n,this._calculateProjectionMatrix()}),v$E(0,v$a,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var v$n=this._viewport,v$a=this.renderTargetSize,v$U=v$a.width,v$x=v$a.height;this._normalizedViewport.x=v$n.x/v$U,this._normalizedViewport.y=v$n.y/v$x,this._normalizedViewport.width=v$n.width/v$U,this._normalizedViewport.height=v$n.height/v$x}return this._normalizedViewport},function(v$n){v$n.x<0&&(v$n.x=0,console.warn("Camera: viewport.x must large than 0.0.")),v$n.y<0&&(v$n.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<v$n.x+v$n.width&&(v$n.width=1-v$n.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<v$n.y+v$n.height&&(v$n.height=1-v$n.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=v$n,this._calculateProjectionMatrix()}),v$E(0,v$a,"projectionMatrix",function(){return this._projectionMatrix},function(v$n){this._projectionMatrix=v$n,this._useUserProjectionMatrix=!0}),v$E(0,v$a,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),v$z(v$Q,["_tempVector20",function(){return this._tempVector20=new v$pa}]),v$Q}()),v$wa=function(v$U){function v$x(v$n,v$a){v$x.__super.call(this,v$a),this._geometryFilter=new v$Ha(this),this._render=new v$Ga(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),v$n&&(this._geometryFilter.sharedMesh=v$n)instanceof laya.d3.resource.models.Mesh&&(v$n.loaded?this._render.sharedMaterials=v$n.materials:v$n.once("loaded",this,this._applyMeshMaterials))}v$q(v$x,"laya.d3.core.MeshSprite3D",v$U);var v$n=v$x.prototype;return v$n._changeRenderObjectByMesh=function(v$n){var v$a=this._render._renderElements,v$U=v$a[v$n];v$U||(v$U=v$a[v$n]=new v$ka),v$U._render=this._render;var v$x=this._render.sharedMaterials[v$n];v$x||(v$x=v$ja.defaultMaterial);var v$D=this._geometryFilter.sharedMesh.getRenderElement(v$n);return v$U._mainSortID=this._getSortID(v$D,v$x),v$U._sprite3D=this,v$U.renderObj=v$D,v$U._material=v$x,v$U},v$n._changeRenderObjectByMaterial=function(v$n,v$a){var v$U=this._render._renderElements[v$n];v$a||(v$a=v$ja.defaultMaterial);var v$x=this._geometryFilter.sharedMesh.getRenderElement(v$n);return v$U._mainSortID=this._getSortID(v$x,v$a),v$U._sprite3D=this,v$U.renderObj=v$x,v$U._material=v$a,v$U},v$n._changeRenderObjectsByMesh=function(){var v$n=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=v$n;for(var v$a=0;v$a<v$n;v$a++)this._changeRenderObjectByMesh(v$a)},v$n._onMeshChanged=function(v$n){var v$a=v$n.sharedMesh;v$a.loaded?this._changeRenderObjectsByMesh():v$a.once("loaded",this,this._onMeshLoaded)},v$n._onMeshLoaded=function(v$n){v$n===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},v$n._onMaterialChanged=function(v$n,v$a,v$U){v$a<this._render._renderElements.length&&this._changeRenderObjectByMaterial(v$a,v$U)},v$n._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},v$n._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},v$n._parseCustomProps=function(v$n,v$a,v$U,v$x){var v$D=this.meshRender,v$p=v$U.lightmapIndex;null!=v$p&&(v$D.lightmapIndex=v$p);var v$Q,v$V,v$y=v$U.lightmapScaleOffset;if(v$y&&(v$D.lightmapScaleOffset=new v$Va(v$y[0],v$y[1],v$y[2],v$y[3])),v$x.instanceParams)(v$Q=v$x.instanceParams.loadPath)&&(v$V=v$P.getRes(v$a[v$Q]),(this.meshFilter.sharedMesh=v$V).loaded?v$D.sharedMaterials=v$V.materials:v$V.once("loaded",this,this._applyMeshMaterials));else{(v$Q=v$U.meshPath)&&(v$V=v$P.getRes(v$a[v$Q]),this.meshFilter.sharedMesh=v$V);var v$R=v$U.materials;if(v$R){var v$X=v$D.sharedMaterials,v$z=v$R.length;v$X.length=v$z;for(var v$i=0;v$i<v$z;v$i++)v$X[v$i]=v$P.getRes(v$a[v$R[v$i].path]);v$D.sharedMaterials=v$X}}},v$n._applyMeshMaterials=function(v$n){for(var v$a=this._render.sharedMaterials,v$U=v$n.materials,v$x=0,v$D=v$U.length;v$x<v$D;v$x++)v$a[v$x]||(v$a[v$x]=v$U[v$x]);this._render.sharedMaterials=v$a},v$n._addToInitStaticBatchManager=function(){v$x._staticBatchManager._addInitBatchSprite(this)},v$n.cloneTo=function(v$n){var v$a=v$n;v$a._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var v$U=this._render,v$x=v$a._render;v$x.enable=v$U.enable,v$x.sharedMaterials=v$U.sharedMaterials,v$x.castShadow=v$U.castShadow;var v$D=v$U.lightmapScaleOffset;v$D&&(v$x.lightmapScaleOffset=v$D.clone()),v$x.lightmapIndex=v$U.lightmapIndex,v$x.receiveShadow=v$U.receiveShadow,v$x.sortingFudge=v$U.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,v$n)},v$n.destroy=function(v$n){if(void 0===v$n&&(v$n=!0),!this.destroyed){var v$a=this.meshFilter.sharedMesh;null!=v$a&&(v$a.loaded||v$a.off("loaded",this,this._applyMeshMaterials)),v$U.prototype.destroy.call(this,v$n),this._geometryFilter._destroy()}},v$E(0,v$n,"meshFilter",function(){return this._geometryFilter}),v$E(0,v$n,"meshRender",function(){return this._render}),v$x.__init__=function(){v$xn._staticBatchManagers.push(v$x._staticBatchManager)},v$x.load=function(v$n){return v$Y.loader.create(v$n,null,null,v$x)},v$z(v$x,["_staticBatchManager",function(){return this._staticBatchManager=new v$_a}]),v$x}(v$da)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(v$n,v$a){"use strict";for(var v$U in Object.defineProperty(v$a,"__esModule",{value:!0}),Laya){var v$x=Laya[v$U];v$x&&v$x.__isclass&&(v$a[v$U]=v$x)}}),function(v$n,v$a,v$Dn){v$Dn.un,v$Dn.uns;var v$U=v$Dn.static,v$x=v$Dn.class,v$p=v$Dn.getset,v$m=v$Dn.__newvec,v$V=laya.maths.Bezier,v$z=laya.utils.Browser,v$un=laya.utils.Byte,v$D=(laya.events.Event,laya.events.EventDispatcher),v$Q=laya.display.Graphics,v$y=(laya.resource.HTMLCanvas,laya.utils.Handler),v$R=laya.net.Loader,v$i=laya.maths.MathUtil,v$cn=laya.maths.Matrix,v$b=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),v$X=(laya.renders.RenderContext,laya.resource.Resource),v$q=laya.utils.RunDriver,v$pn=laya.display.Sprite,v$E=laya.utils.Stat,v$Hn=laya.resource.Texture,v$P=(laya.net.URL,laya.utils.Utils),v$c=function(){function v$n(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return v$x(v$n,"laya.ani.AnimationContent"),v$n}(),v$H=function(){function v$n(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return v$x(v$n,"laya.ani.AnimationNodeContent"),v$n}(),v$T=function(){function v$n(){}return v$x(v$n,"laya.ani.AnimationParser01"),v$n.parse=function(v$n,v$a){var v$U=v$a.__getBuffer(),v$x=0,v$D=0,v$p=0,v$Q=0,v$V=0,v$y=0,v$R=0,v$X=v$a.readUTFString();v$n._aniClassName=v$X;var v$z,v$i=v$a.readUTFString().split("\n"),v$q=v$a.getUint8(),v$E=v$a.getUint32(),v$m=v$a.getUint32();0<v$E&&(v$z=v$U.slice(v$E,v$m));var v$b=new v$un(v$z);for(0<v$m&&(v$n._publicExtData=v$U.slice(v$m,v$U.byteLength)),v$n._useParent=!!v$a.getUint8(),v$n._anis.length=v$q,v$x=0;v$x<v$q;v$x++){var v$P=v$n._anis[v$x]=new v$c;v$P.nodes=new Array;var v$A=v$P.name=v$i[v$a.getUint16()];v$n._aniMap[v$A]=v$x,v$P.bone3DMap={},v$P.playTime=v$a.getFloat32(),v$P.playTime<=0&&console.error("播放时间不能为0  url="+v$n.url+" name="+v$P.name);var v$T=v$P.nodes.length=v$a.getUint8();for(v$D=v$P.totalKeyframeDatasLength=0;v$D<v$T;v$D++){var v$K=v$P.nodes[v$D]=new v$H;v$K.childs=[];var v$Y=v$a.getInt16();0<=v$Y&&(v$K.name=v$i[v$Y],v$P.bone3DMap[v$K.name]=v$D),v$K.keyFrame=new Array,v$K.parentIndex=v$a.getInt16(),-1==v$K.parentIndex?v$K.parent=null:v$K.parent=v$P.nodes[v$K.parentIndex],v$K.lerpType=v$a.getUint8();var v$W=v$a.getUint32();v$b.pos=v$W;var v$k=v$K.keyframeWidth=v$b.getUint16();if(v$P.totalKeyframeDatasLength+=v$k,0===v$K.lerpType||1===v$K.lerpType)for(v$K.interpolationMethod=[],v$K.interpolationMethod.length=v$k,v$p=0;v$p<v$k;v$p++)v$K.interpolationMethod[v$p]=v$v.interpolation[v$b.getUint8()];null!=v$K.parent&&v$K.parent.childs.push(v$K);var v$N=v$a.getUint16();0<v$N&&(v$K.extenData=v$U.slice(v$a.pos,v$a.pos+v$N),v$a.pos+=v$N);var v$_,v$$=v$a.getUint16(),v$M=0;for(v$p=0,v$Q=v$K.keyFrame.length=v$$;v$p<v$Q;v$p++){if((v$_=v$K.keyFrame[v$p]=new v$G).duration=v$a.getFloat32(),v$_.startTime=v$M,2===v$K.lerpType){v$_.interpolationData=[];var v$Z,v$u=v$a.getUint8();switch(v$Z=v$a.getFloat32()){case 254:for(v$_.interpolationData.length=v$k,v$R=0;v$R<v$k;v$R++)v$_.interpolationData[v$R]=0;break;case 255:for(v$_.interpolationData.length=v$k,v$R=0;v$R<v$k;v$R++)v$_.interpolationData[v$R]=5;break;default:for(v$_.interpolationData.push(v$Z),v$y=1;v$y<v$u;v$y++)v$_.interpolationData.push(v$a.getFloat32())}}for(v$_.data=new Float32Array(v$k),v$V=0;v$V<v$k;v$V++)v$_.data[v$V]=v$a.getFloat32(),-1e-8<v$_.data[v$V]&&v$_.data[v$V]<1e-8&&(v$_.data[v$V]=0);v$M+=v$_.duration}v$_.startTime=v$P.playTime,v$K.playTime=v$P.playTime,v$n._calculateKeyFrame(v$K,v$$,v$k)}}},v$n}(),v$K=function(){function v$Y(){}return v$x(v$Y,"laya.ani.AnimationParser02"),v$Y.READ_DATA=function(){v$Y._DATA.offset=v$Y._reader.getUint32(),v$Y._DATA.size=v$Y._reader.getUint32()},v$Y.READ_BLOCK=function(){for(var v$n=v$Y._BLOCK.count=v$Y._reader.getUint16(),v$a=v$Y._BLOCK.blockStarts=[],v$U=v$Y._BLOCK.blockLengths=[],v$x=0;v$x<v$n;v$x++)v$a.push(v$Y._reader.getUint32()),v$U.push(v$Y._reader.getUint32())},v$Y.READ_STRINGS=function(){var v$n=v$Y._reader.getUint32(),v$a=v$Y._reader.getUint16(),v$U=v$Y._reader.pos;v$Y._reader.pos=v$n+v$Y._DATA.offset;for(var v$x=0;v$x<v$a;v$x++)v$Y._strings[v$x]=v$Y._reader.readUTFString();v$Y._reader.pos=v$U},v$Y.parse=function(v$n,v$a){v$Y._templet=v$n;(v$Y._reader=v$a).__getBuffer();v$Y.READ_DATA(),v$Y.READ_BLOCK(),v$Y.READ_STRINGS();for(var v$U=0,v$x=v$Y._BLOCK.count;v$U<v$x;v$U++){var v$D=v$a.getUint16(),v$p=v$Y._strings[v$D],v$Q=v$Y["READ_"+v$p];if(null==v$Q)throw new Error("model file err,no this function:"+v$D+" "+v$p);v$Q.call()}},v$Y.READ_ANIMATIONS=function(){var v$n=v$Y._reader,v$a=v$n.__getBuffer(),v$U=0,v$x=0,v$D=0,v$p=0,v$Q=v$n.getUint16(),v$V=[];for(v$V.length=v$Q,v$U=0;v$U<v$Q;v$U++)v$V[v$U]=v$v.interpolation[v$n.getByte()];var v$y=v$n.getUint8();for(v$Y._templet._anis.length=v$y,v$U=0;v$U<v$y;v$U++){var v$R=v$Y._templet._anis[v$U]={};v$R.nodes=new Array;var v$X=v$R.name=v$Y._strings[v$n.getUint16()];v$Y._templet._aniMap[v$X]=v$U,v$R.bone3DMap={},v$R.playTime=v$n.getFloat32();var v$z=v$R.nodes.length=v$n.getInt16();for(v$x=v$R.totalKeyframeDatasLength=0;v$x<v$z;v$x++){var v$i=v$R.nodes[v$x]={};v$i.keyframeWidth=v$Q,v$i.childs=[];var v$q=v$n.getUint16();0<=v$q&&(v$i.name=v$Y._strings[v$q],v$R.bone3DMap[v$i.name]=v$x),v$i.keyFrame=new Array,v$i.parentIndex=v$n.getInt16(),-1==v$i.parentIndex?v$i.parent=null:v$i.parent=v$R.nodes[v$i.parentIndex],v$R.totalKeyframeDatasLength+=v$Q,v$i.interpolationMethod=v$V,null!=v$i.parent&&v$i.parent.childs.push(v$i);var v$E=v$n.getUint16(),v$m=null,v$b=null;for(v$D=0,v$p=v$i.keyFrame.length=v$E;v$D<v$p;v$D++){(v$m=v$i.keyFrame[v$D]={}).startTime=v$n.getFloat32(),v$b&&(v$b.duration=v$m.startTime-v$b.startTime);var v$P=v$Y._DATA.offset,v$A=v$n.getUint32(),v$T=4*v$Q,v$K=v$a.slice(v$P+v$A,v$P+v$A+v$T);v$m.data=new Float32Array(v$K),v$b=v$m}v$m.duration=0,v$i.playTime=v$R.playTime,v$Y._templet._calculateKeyFrame(v$i,v$E,v$Q)}}},v$Y._templet=null,v$Y._reader=null,v$Y._strings=[],v$U(v$Y,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),v$Y}(),v$Gn=(function(){function v$n(){}v$x(v$n,"laya.ani.AnimationState"),v$n.stopped=0,v$n.paused=1,v$n.playing=2}(),function(){function v$D(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new v$dn,this.resultMatrix=new v$cn,this._children=[]}v$x(v$D,"laya.ani.bone.Bone");var v$n=v$D.prototype;return v$n.setTempMatrix=function(v$n){this._tempMatrix=v$n;var v$a,v$U=0;for(v$U=0,v$a=this._children.length;v$U<v$a;v$U++)this._children[v$U].setTempMatrix(this._tempMatrix)},v$n.update=function(v$n){var v$a;if(this.rotation=this.transform.skX,v$n)v$a=this.resultTransform.getMatrix(),v$cn.mul(v$a,v$n,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)v$a=this.resultTransform.getMatrix(),v$cn.mul(v$a,this.parentBone.resultMatrix,this.resultMatrix);else{var v$U=this.parentBone,v$x=NaN,v$D=NaN,v$p=NaN,v$Q=this.parentBone.resultMatrix;v$a=this.resultTransform.getMatrix();var v$V=v$Q.a*v$a.tx+v$Q.c*v$a.ty+v$Q.tx,v$y=v$Q.b*v$a.tx+v$Q.d*v$a.ty+v$Q.ty,v$R=new v$cn;this.inheritRotation?(v$x=Math.atan2(v$U.resultMatrix.b,v$U.resultMatrix.a),v$D=Math.cos(v$x),v$p=Math.sin(v$x),v$R.setTo(v$D,v$p,-v$p,v$D,0,0),v$cn.mul(this._tempMatrix,v$R,v$cn.TEMP),v$cn.TEMP.copyTo(v$R),v$a=this.resultTransform.getMatrix(),v$cn.mul(v$a,v$R,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,v$a=this.resultTransform.getMatrix(),v$cn.TEMP.identity(),v$cn.TEMP.d=this.d,v$cn.mul(v$a,v$cn.TEMP,this.resultMatrix)),this.resultMatrix.tx=v$V,this.resultMatrix.ty=v$y}else(v$a=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var v$X,v$z=0;for(v$z=0,v$X=this._children.length;v$z<v$X;v$z++)this._children[v$z].update()},v$n.updateChild=function(){var v$n,v$a=0;for(v$a=0,v$n=this._children.length;v$a<v$n;v$a++)this._children[v$a].update()},v$n.setRotation=function(v$n){this._sprite&&(this._sprite.rotation=180*v$n/Math.PI)},v$n.updateDraw=function(v$n,v$a){v$D.ShowBones&&!v$D.ShowBones[this.name]||(this._sprite||(this._sprite=new v$pn,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),v$Dn.stage.addChild(this._sprite)),this._sprite.x=v$n+this.resultMatrix.tx,this._sprite.y=v$a+this.resultMatrix.ty);var v$U,v$x=0;for(v$x=0,v$U=this._children.length;v$x<v$U;v$x++)this._children[v$x].updateDraw(v$n,v$a)},v$n.addChild=function(v$n){this._children.push(v$n),v$n.parentBone=this},v$n.findBone=function(v$n){if(this.name==v$n)return this;var v$a,v$U,v$x=0;for(v$x=0,v$a=this._children.length;v$x<v$a;v$x++)if(v$U=this._children[v$x].findBone(v$n))return v$U;return null},v$n.localToWorld=function(v$n){var v$a=v$n[0],v$U=v$n[1];v$n[0]=v$a*this.resultMatrix.a+v$U*this.resultMatrix.c+this.resultMatrix.tx,v$n[1]=v$a*this.resultMatrix.b+v$U*this.resultMatrix.d+this.resultMatrix.ty},v$D.ShowBones={},v$D}()),v$In=function(){function v$m(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}v$x(v$m,"laya.ani.bone.BoneSlot");var v$n=v$m.prototype;return v$n.showSlotData=function(v$n,v$a){void 0===v$a&&(v$a=!0),this.currSlotData=v$n,v$a&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},v$n.showDisplayByName=function(v$n){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(v$n))},v$n.replaceDisplayByName=function(v$n,v$a){if(this.currSlotData){var v$U;v$U=this.currSlotData.getDisplayByName(v$n);var v$x;v$x=this.currSlotData.getDisplayByName(v$a),this.replaceDisplayByIndex(v$U,v$x)}},v$n.replaceDisplayByIndex=function(v$n,v$a){this.currSlotData&&(this._replaceDic[v$n]=v$a,this.displayIndex==v$n&&this.showDisplayByIndex(v$n))},v$n.showDisplayByIndex=function(v$n){if(null!=this._replaceDic[v$n]&&(v$n=this._replaceDic[v$n]),this.currSlotData&&-1<v$n&&v$n<this.currSlotData.displayArr.length){if(this.displayIndex=v$n,this.currDisplayData=this.currSlotData.displayArr[v$n],this.currDisplayData){var v$a=this.currDisplayData.name;this.currTexture=this.templet.getTexture(v$a),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!v$b.isConchApp||v$b.isConchApp&&"0.9.15"<v$pn.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},v$n.replaceSkin=function(v$n){this._diyTexture=v$n,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},v$n.setParentMatrix=function(v$n){this._parentMatrix=v$n},v$n.draw=function(v$n,v$a,v$U,v$x){if(void 0===v$U&&(v$U=!1),void 0===v$x&&(v$x=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var v$D,v$p=this.currTexture;switch(this._diyTexture&&(v$p=this._diyTexture),this.currDisplayData.type){case 0:if(v$n){var v$Q=this.getDisplayMatrix();if(this._parentMatrix){var v$V=!1;if(v$Q){var v$y;if(v$cn.mul(v$Q,this._parentMatrix,v$cn.TEMP),v$y=v$U?(null==this._resultMatrix&&(this._resultMatrix=new v$cn),this._resultMatrix):new v$cn,!v$b.isWebGL&&this.currDisplayData.uvs||v$b.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var v$R=v$m._tempMatrix;v$R.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(v$R.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(v$V=!0,v$R.rotate(-Math.PI/2)),v$cn.mul(v$R,v$cn.TEMP,v$y)}else v$cn.TEMP.copyTo(v$y);v$V?v$n.drawTexture(v$p,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,v$y):v$n.drawTexture(v$p,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,v$y)}}}break;case 1:if(null==(v$D=v$U?(null==this._skinSprite&&(this._skinSprite=v$m.createSkinMesh()),this._skinSprite):v$m.createSkinMesh()))return;var v$X;if(null==this.currDisplayData.bones){var v$z,v$i=this.currDisplayData.weights;this.deformData&&(v$i=this.deformData),v$z=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=v$k.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=v$k.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=v$i;this.currDisplayData.triangles.length;v$X=this.currDisplayData.triangles,v$D.init2(v$p,null,v$X,this._mVerticleArr,v$z);var v$q,v$E=this.getDisplayMatrix();if(this._parentMatrix)if(v$E)v$cn.mul(v$E,this._parentMatrix,v$cn.TEMP),v$q=v$U?(null==this._resultMatrix&&(this._resultMatrix=new v$cn),this._resultMatrix):new v$cn,v$cn.TEMP.copyTo(v$q),v$D.transform=v$q}else this.skinMesh(v$a,v$D,v$x);v$n.drawSkin(v$D);break;case 2:if(null==(v$D=v$U?(null==this._skinSprite&&(this._skinSprite=v$m.createSkinMesh()),this._skinSprite):v$m.createSkinMesh()))return;this.skinMesh(v$a,v$D,v$x),v$n.drawSkin(v$D)}}},v$n.skinMesh=function(v$n,v$a,v$U){var v$x,v$D=this.currTexture,v$p=this.currDisplayData.bones;v$x=this._diyTexture?(v$D=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=v$k.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=v$k.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var v$Q,v$V,v$y=this.currDisplayData.weights,v$R=this.currDisplayData.triangles,v$X=0,v$z=0,v$i=0,v$q=NaN,v$E=NaN,v$m=0,v$b=0,v$P=[],v$A=0,v$T=0;if(this.deformData&&0<this.deformData.length){var v$K=0;for(v$A=0,v$T=v$p.length;v$A<v$T;){for(v$i=v$p[v$A++]+v$A,v$z=v$X=0;v$A<v$i;v$A++)v$V=v$n[v$p[v$A]],v$q=v$y[v$m]+this.deformData[v$K++],v$E=v$y[v$m+1]+this.deformData[v$K++],v$b=v$y[v$m+2],v$X+=(v$q*v$V.a+v$E*v$V.c+v$V.tx)*v$b,v$z+=(v$q*v$V.b+v$E*v$V.d+v$V.ty)*v$b,v$m+=3;v$P.push(v$X,v$z)}}else for(v$A=0,v$T=v$p.length;v$A<v$T;){for(v$i=v$p[v$A++]+v$A,v$z=v$X=0;v$A<v$i;v$A++)v$V=v$n[v$p[v$A]],v$q=v$y[v$m],v$E=v$y[v$m+1],v$b=v$y[v$m+2],v$X+=(v$q*v$V.a+v$E*v$V.c+v$V.tx)*v$b,v$z+=(v$q*v$V.b+v$E*v$V.d+v$V.ty)*v$b,v$m+=3;v$P.push(v$X,v$z)}this._mVerticleArr=v$P,v$Q=v$R,v$a.init2(v$D,null,v$Q,this._mVerticleArr,v$x)},v$n.drawBonePoint=function(v$n){v$n&&this._parentMatrix&&v$n.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},v$n.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},v$n.getMatrix=function(){return this._resultMatrix},v$n.copy=function(){var v$n=new v$m;return v$n.type="copy",v$n.name=this.name,v$n.attachmentName=this.attachmentName,v$n.srcDisplayIndex=this.srcDisplayIndex,v$n.parent=this.parent,v$n.displayIndex=this.displayIndex,v$n.templet=this.templet,v$n.currSlotData=this.currSlotData,v$n.currTexture=this.currTexture,v$n.currDisplayData=this.currDisplayData,v$n},v$m.createSkinMesh=function(){return v$b.isWebGL||v$b.isConchApp?v$q.skinAniSprite():(v$b.isWebGL,null)},v$U(v$m,["_tempMatrix",function(){return this._tempMatrix=new v$cn}]),v$m}(),v$vn=function(){function v$n(){this.skinName=null,this.deformSlotDataList=[]}return v$x(v$n,"laya.ani.bone.DeformAniData"),v$n}(),v$ln=function(){function v$n(){this.deformSlotDisplayList=[]}return v$x(v$n,"laya.ani.bone.DeformSlotData"),v$n}(),v$jn=function(){function v$n(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}v$x(v$n,"laya.ani.bone.DeformSlotDisplayData");var v$a=v$n.prototype;return v$a.binarySearch1=function(v$n,v$a){var v$U=0,v$x=v$n.length-2;if(0==v$x)return 1;for(var v$D=v$x>>>1;;){if(v$n[Math.floor(v$D+1)]<=v$a?v$U=v$D+1:v$x=v$D,v$U==v$x)return v$U+1;v$D=v$U+v$x>>>1}return 0},v$a.apply=function(v$n,v$a,v$U){if(void 0===v$U&&(v$U=1),v$n+=.05,!(this.timeList.length<=0)){var v$x=0;if(!(v$n<this.timeList[0])){var v$D=this.vectices[0].length,v$p=[],v$Q=this.binarySearch1(this.timeList,v$n);if(this.frameIndex=v$Q,v$n>=this.timeList[this.timeList.length-1]){var v$V=this.vectices[this.vectices.length-1];if(v$U<1)for(v$x=0;v$x<v$D;v$x++)v$p[v$x]+=(v$V[v$x]-v$p[v$x])*v$U;else for(v$x=0;v$x<v$D;v$x++)v$p[v$x]=v$V[v$x];this.deformData=v$p}else{this.tweenKeyList[this.frameIndex];var v$y=this.vectices[this.frameIndex-1],v$R=this.vectices[this.frameIndex],v$X=this.timeList[this.frameIndex-1],v$z=this.timeList[this.frameIndex];v$U=this.tweenKeyList[v$Q-1]?(v$n-v$X)/(v$z-v$X):0;var v$i=NaN;for(v$x=0;v$x<v$D;v$x++)v$i=v$y[v$x],v$p[v$x]=v$i+(v$R[v$x]-v$i)*v$U;this.deformData=v$p}}}},v$n}(),v$hn=function(){function v$n(){this.time=NaN,this.drawOrder=[]}return v$x(v$n,"laya.ani.bone.DrawOrderData"),v$n}(),v$fn=function(){function v$n(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return v$x(v$n,"laya.ani.bone.EventData"),v$n}(),v$A=function(){function v$xn(v$n,v$a){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=v$n,this._targetBone=v$a[v$n.targetBoneIndex],this.isSpine=v$n.isSpine,null==this._bones&&(this._bones=[]);for(var v$U=this._bones.length=0,v$x=v$n.boneIndexs.length;v$U<v$x;v$U++)this._bones.push(v$a[v$n.boneIndexs[v$U]]);this.name=v$n.name,this.mix=v$n.mix,this.bendDirection=v$n.bendDirection}v$x(v$xn,"laya.ani.bone.IkConstraint");var v$n=v$xn.prototype;return v$n.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},v$n._applyIk1=function(v$n,v$a,v$U,v$x){var v$D=v$n.parentBone,v$p=1/(v$D.resultMatrix.a*v$D.resultMatrix.d-v$D.resultMatrix.b*v$D.resultMatrix.c),v$Q=v$a-v$D.resultMatrix.tx,v$V=v$U-v$D.resultMatrix.ty,v$y=(v$Q*v$D.resultMatrix.d-v$V*v$D.resultMatrix.c)*v$p-v$n.transform.x,v$R=(v$V*v$D.resultMatrix.a-v$Q*v$D.resultMatrix.b)*v$p-v$n.transform.y,v$X=Math.atan2(v$R,v$y)*v$xn.radDeg-0-v$n.transform.skX;v$n.transform.scX<0&&(v$X+=180),180<v$X?v$X-=360:v$X<-180&&(v$X+=360),v$n.transform.skX=v$n.transform.skY=v$n.transform.skX+v$X*v$x,v$n.update()},v$n.updatePos=function(v$n,v$a){this._sp&&this._sp.pos(v$n,v$a)},v$n._applyIk2=function(v$n,v$a,v$U,v$x,v$D,v$p){if(0!=v$p){var v$Q=v$n.resultTransform.x,v$V=v$n.resultTransform.y,v$y=v$n.transform.scX,v$R=v$n.transform.scY,v$X=v$a.transform.scX,v$z=0,v$i=0,v$q=0;v$q=v$y<0?(v$y=-v$y,v$z=180,-1):(v$z=0,1),v$R<0&&(v$R=-v$R,v$q=-v$q),v$i=v$X<0?(v$X=-v$X,180):0;var v$E=v$a.resultTransform.x,v$m=NaN,v$b=NaN,v$P=NaN,v$A=v$n.resultMatrix.a,v$T=v$n.resultMatrix.c,v$K=v$n.resultMatrix.b,v$Y=v$n.resultMatrix.d,v$W=Math.abs(v$y-v$R)<=1e-4;v$P=v$W?(v$b=v$A*v$E+v$T*(v$m=v$a.resultTransform.y)+v$n.resultMatrix.tx,v$K*v$E+v$Y*v$m+v$n.resultMatrix.ty):(v$m=0,v$b=v$A*v$E+v$n.resultMatrix.tx,v$K*v$E+v$n.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new v$pn,v$Dn.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(v$U,v$x,15,"#ffff00"),this._sp.graphics.drawCircle(v$b,v$P,15,"#ff00ff")),v$n.setRotation(Math.atan2(v$P-v$n.resultMatrix.ty,v$b-v$n.resultMatrix.tx));var v$k=v$n.parentBone;v$A=v$k.resultMatrix.a,v$T=v$k.resultMatrix.c,v$K=v$k.resultMatrix.b;var v$N=1/(v$A*(v$Y=v$k.resultMatrix.d)-v$T*v$K),v$_=v$U-v$k.resultMatrix.tx,v$$=v$x-v$k.resultMatrix.ty,v$M=(v$_*v$Y-v$$*v$T)*v$N-v$Q,v$Z=(v$$*v$A-v$_*v$K)*v$N-v$V,v$u=((v$_=v$b-v$k.resultMatrix.tx)*v$Y-(v$$=v$P-v$k.resultMatrix.ty)*v$T)*v$N-v$Q,v$c=(v$$*v$A-v$_*v$K)*v$N-v$V,v$H=Math.sqrt(v$u*v$u+v$c*v$c),v$G=v$a.length*v$X,v$I=NaN,v$v=NaN;if(v$W){var v$l=(v$M*v$M+v$Z*v$Z-v$H*v$H-(v$G*=v$y)*v$G)/(2*v$H*v$G);v$l<-1?v$l=-1:1<v$l&&(v$l=1),v$v=Math.acos(v$l)*v$D,v$A=v$H+v$G*v$l,v$T=v$G*Math.sin(v$v),v$I=Math.atan2(v$Z*v$A-v$M*v$T,v$M*v$A+v$Z*v$T)}else{var v$j=(v$A=v$y*v$G)*v$A,v$h=(v$T=v$R*v$G)*v$T,v$f=v$M*v$M+v$Z*v$Z,v$F=Math.atan2(v$Z,v$M),v$g=-2*v$h*v$H,v$o=v$h-v$j;if(0<(v$Y=v$g*v$g-4*v$o*(v$K=v$h*v$H*v$H+v$j*v$f-v$j*v$h))){var v$B=Math.sqrt(v$Y);v$g<0&&(v$B=-v$B);var v$O=(v$B=-(v$g+v$B)/2)/v$o,v$L=v$K/v$B,v$d=Math.abs(v$O)<Math.abs(v$L)?v$O:v$L;v$d*v$d<=v$f&&(v$$=Math.sqrt(v$f-v$d*v$d)*v$D,v$I=v$F-Math.atan2(v$$,v$d),v$v=Math.atan2(v$$/v$R,(v$d-v$H)/v$y))}var v$S=0,v$w=Number.MAX_VALUE,v$s=0,v$C=0,v$t=0,v$r=0,v$J=0,v$e=0;v$r<(v$Y=(v$_=v$H+v$A)*v$_)&&(v$t=0,v$r=v$Y,v$J=v$_),(v$Y=(v$_=v$H-v$A)*v$_)<v$w&&(v$S=Math.PI,v$w=v$Y,v$s=v$_);var v$nn=Math.acos(-v$A*v$H/(v$j-v$h));(v$Y=(v$_=v$A*Math.cos(v$nn)+v$H)*v$_+(v$$=v$T*Math.sin(v$nn))*v$$)<v$w&&(v$S=v$nn,v$w=v$Y,v$s=v$_,v$C=v$$),v$r<v$Y&&(v$t=v$nn,v$r=v$Y,v$J=v$_,v$e=v$$),v$v=v$f<=(v$w+v$r)/2?(v$I=v$F-Math.atan2(v$C*v$D,v$s),v$S*v$D):(v$I=v$F-Math.atan2(v$e*v$D,v$J),v$t*v$D)}var v$an=Math.atan2(v$m,v$E)*v$q,v$Un=v$n.resultTransform.skX;180<(v$I=(v$I-v$an)*v$xn.radDeg+v$z-v$Un)?v$I-=360:v$I<-180&&(v$I+=360),v$n.resultTransform.x=v$Q,v$n.resultTransform.y=v$V,v$n.resultTransform.skX=v$n.resultTransform.skY=v$Un+v$I*v$p,v$Un=v$a.resultTransform.skX,180<(v$v=((v$v+v$an)*v$xn.radDeg-0)*v$q+v$i-(v$Un%=360))?v$v-=360:v$v<-180&&(v$v+=360),v$a.resultTransform.x=v$E,v$a.resultTransform.y=v$m,v$a.resultTransform.skX=v$a.resultTransform.skY=v$a.resultTransform.skY+v$v*v$p,v$n.update()}},v$n._applyIk3=function(v$n,v$a,v$U,v$x,v$D,v$p){if(0!=v$p){var v$Q,v$V,v$y=v$a.resultMatrix.a*v$a.length,v$R=v$a.resultMatrix.b*v$a.length,v$X=v$y*v$y+v$R*v$R,v$z=Math.sqrt(v$X),v$i=v$n.resultMatrix.tx,v$q=v$n.resultMatrix.ty,v$E=v$a.resultMatrix.tx,v$m=v$a.resultMatrix.ty,v$b=v$E-v$i,v$P=v$m-v$q,v$A=v$b*v$b+v$P*v$P,v$T=Math.sqrt(v$A),v$K=(v$b=v$U-v$n.resultMatrix.tx)*v$b+(v$P=v$x-v$n.resultMatrix.ty)*v$P,v$Y=Math.sqrt(v$K);if(v$z+v$T<=v$Y||v$Y+v$z<=v$T||v$Y+v$T<=v$z){var v$W=NaN;v$E=v$i+(v$W=v$z+v$T<=v$Y?1:-1)*(v$U-v$i)*v$T/v$Y,v$m=v$q+v$W*(v$x-v$q)*v$T/v$Y}else{var v$k=(v$A-v$X+v$K)/(2*v$K),v$N=Math.sqrt(v$A-v$k*v$k*v$K)/v$Y,v$_=v$i+v$b*v$k,v$$=v$q+v$P*v$k,v$M=-v$P*v$N,v$Z=v$b*v$N;v$m=0<v$D?(v$E=v$_-v$M,v$$-v$Z):(v$E=v$_+v$M,v$$+v$Z)}v$Q=v$E,v$V=v$m,this.isDebug&&(this._sp||(this._sp=new v$pn,v$Dn.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(v$i,v$q,15,"#ff00ff"),this._sp.graphics.drawCircle(v$U,v$x,15,"#ffff00"),this._sp.graphics.drawCircle(v$Q,v$V,15,"#ff00ff"));var v$u,v$c;v$u=Math.atan2(v$V-v$n.resultMatrix.ty,v$Q-v$n.resultMatrix.tx),v$n.setRotation(v$u),(v$c=v$xn._tempMatrix).identity(),v$c.rotate(v$u),v$c.scale(v$n.resultMatrix.getScaleX(),v$n.resultMatrix.getScaleY()),v$c.translate(v$n.resultMatrix.tx,v$n.resultMatrix.ty),v$c.copyTo(v$n.resultMatrix),v$n.updateChild();var v$H,v$G;v$H=Math.atan2(v$x-v$V,v$U-v$Q),v$a.setRotation(v$H),(v$G=v$xn._tempMatrix).identity(),v$G.rotate(v$H),v$G.scale(v$a.resultMatrix.getScaleX(),v$a.resultMatrix.getScaleY()),v$G.translate(v$Q,v$V),v$c.copyTo(v$a.resultMatrix),v$a.updateChild()}},v$U(v$xn,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new v$cn}]),v$xn}(),v$Fn=function(){function v$n(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return v$x(v$n,"laya.ani.bone.IkConstraintData"),v$n}(),v$Y=function(){function v$G(v$n,v$a){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=v$n,this.position=v$n.position,this.spacing=v$n.spacing,this.rotateMix=v$n.rotateMix,this.translateMix=v$n.translateMix,this.bones=[];for(var v$U=this.data.bones,v$x=0,v$D=v$U.length;v$x<v$D;v$x++)this.bones.push(v$a[v$U[v$x]])}v$x(v$G,"laya.ani.bone.PathConstraint");var v$n=v$G.prototype;return v$n.apply=function(v$n,v$a){if(this.target){var v$U=this.translateMix,v$x=this.translateMix,v$D=0<v$x,v$p=this.data.spacingMode,v$Q="length"==v$p,v$V=this.data.rotateMode,v$y="tangent"==v$V,v$R="chainScale"==v$V,v$X=[],v$z=this.bones.length,v$i=v$y?v$z:v$z+1,v$q=[];(this._spaces=v$q)[0]=this.position;var v$E=this.spacing;if(v$R||v$Q)for(var v$m=0,v$b=v$i-1;v$m<v$b;){var v$P=this.bones[v$m],v$A=v$P.length,v$T=v$A*v$P.resultMatrix.a,v$K=v$A*v$P.resultMatrix.b;v$A=Math.sqrt(v$T*v$T+v$K*v$K),v$R&&(v$X[v$m]=v$A),v$q[++v$m]=v$Q?Math.max(0,v$A+v$E):v$E}else for(v$m=1;v$m<v$i;v$m++)v$q[v$m]=v$E;var v$Y=this.computeWorldPositions(this.target,v$n,v$a,v$i,v$y,"percent"==this.data.positionMode,"percent"==v$p);if(this._debugKey){for(v$m=0;v$m<v$Y.length;v$m++)v$a.drawCircle(v$Y[v$m++],v$Y[v$m++],5,"#00ff00");var v$W=[];for(v$m=0;v$m<v$Y.length;v$m++)v$W.push(v$Y[v$m++],v$Y[v$m++]);v$a.drawLines(0,0,v$W,"#ff0000")}var v$k=v$Y[0],v$N=v$Y[1],v$_=this.data.offsetRotation,v$$="chain"==v$V&&0==v$_,v$M=NaN;for(v$m=0,v$M=3;v$m<v$z;v$m++,v$M+=3){(v$P=this.bones[v$m]).resultMatrix.tx+=(v$k-v$P.resultMatrix.tx)*v$U,v$P.resultMatrix.ty+=(v$N-v$P.resultMatrix.ty)*v$U;var v$Z=(v$T=v$Y[v$M])-v$k,v$u=(v$K=v$Y[v$M+1])-v$N;if(v$R&&0!=(v$A=v$X[v$m])){var v$c=(Math.sqrt(v$Z*v$Z+v$u*v$u)/v$A-1)*v$x+1;v$P.resultMatrix.a*=v$c,v$P.resultMatrix.c*=v$c}if(v$k=v$T,v$N=v$K,v$D){var v$H=v$P.resultMatrix.a,v$G=v$P.resultMatrix.c,v$I=v$P.resultMatrix.b,v$v=v$P.resultMatrix.d,v$l=NaN,v$j=NaN,v$h=NaN;v$l=v$y?v$Y[v$M-1]:0==v$q[v$m+1]?v$Y[v$M+2]:Math.atan2(v$u,v$Z),v$l-=Math.atan2(v$I,v$H)-v$_/180*Math.PI,v$$&&(v$j=Math.cos(v$l),v$h=Math.sin(v$l),v$k+=((v$A=v$P.length)*(v$j*v$H-v$h*v$I)-v$Z)*v$x,v$N+=(v$A*(v$h*v$H+v$j*v$I)-v$u)*v$x),v$l>Math.PI?v$l-=2*Math.PI:v$l<-Math.PI&&(v$l+=2*Math.PI),v$l*=v$x,v$j=Math.cos(v$l),v$h=Math.sin(v$l),v$P.resultMatrix.a=v$j*v$H-v$h*v$I,v$P.resultMatrix.c=v$j*v$G-v$h*v$v,v$P.resultMatrix.b=v$h*v$H+v$j*v$I,v$P.resultMatrix.d=v$h*v$G+v$j*v$v}}}},v$n.computeWorldVertices2=function(v$n,v$a,v$U,v$x,v$D,v$p){var v$Q,v$V,v$y=v$n.currDisplayData.bones,v$R=v$n.currDisplayData.weights,v$X=v$n.currDisplayData.triangles,v$z=0,v$i=0,v$q=0,v$E=0,v$m=0,v$b=0,v$P=0,v$A=0,v$T=0,v$K=0,v$Y=0;if(null!=v$y){for(v$z=0;v$z<v$U;v$z+=2)v$i+=(v$E=v$y[v$i])+1,v$q+=v$E;var v$W=v$a;for(v$m=v$p,v$b=3*v$q;v$m<v$x;v$m+=2){for(v$A=v$P=0,v$E=v$y[v$i++],v$E+=v$i;v$i<v$E;v$i++,v$b+=3){v$Q=v$W[v$y[v$i]].resultMatrix,v$T=v$R[v$b],v$K=v$R[v$b+1];var v$k=v$R[v$b+2];v$P+=(v$T*v$Q.a+v$K*v$Q.c+v$Q.tx)*v$k,v$A+=(v$T*v$Q.b+v$K*v$Q.d+v$Q.ty)*v$k}v$D[v$m]=v$P,v$D[v$m+1]=v$A}}else{var v$N,v$_;if(v$X||(v$X=v$R),v$n.deformData&&(v$X=v$n.deformData),v$N=v$n.parent,v$a)for(v$Y=v$a.length,v$z=0;v$z<v$Y;v$z++)if(v$a[v$z].name==v$N){v$V=v$a[v$z];break}v$V&&(v$_=v$V.resultMatrix),v$_||(v$_=v$G._tempMt);var v$$=v$_.tx,v$M=v$_.ty,v$Z=v$_.a,v$u=v$_.b,v$c=v$_.c,v$H=v$_.d;for(v$V&&(v$H*=v$V.d),v$i=v$U,v$m=v$p;v$m<v$x;v$i+=2,v$m+=2)v$T=v$X[v$i],v$K=v$X[v$i+1],v$D[v$m]=v$T*v$Z+v$K*v$u+v$$,v$D[v$m+1]=-(v$T*v$c+v$K*v$H+v$M)}},v$n.computeWorldPositions=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q){v$n.currDisplayData.bones,v$n.currDisplayData.weights,v$n.currDisplayData.triangles;var v$V=[],v$y=0,v$R=v$n.currDisplayData.verLen,v$X=this.position,v$z=this._spaces,v$i=[],v$q=[],v$E=v$R/6,v$m=-1,v$b=NaN,v$P=0,v$A=0,v$T=NaN,v$K=NaN,v$Y=NaN,v$W=NaN;if(v$E--,v$R-=4,this.computeWorldVertices2(v$n,v$a,2,v$R,v$V,0),this._debugKey)for(v$y=0;v$y<v$V.length;)v$U.drawCircle(v$V[v$y++],v$V[v$y++],10,"#ff0000");v$i=v$V,this._curves.length=v$E;var v$k=this._curves,v$N=v$i[v$b=0],v$_=v$i[1],v$$=0,v$M=0,v$Z=0,v$u=0,v$c=0,v$H=0,v$G=NaN,v$I=NaN,v$v=NaN,v$l=NaN,v$j=NaN,v$h=NaN,v$f=NaN,v$F=NaN,v$g=0;for(v$y=0,v$g=2;v$y<v$E;v$y++,v$g+=6)v$$=v$i[v$g],v$M=v$i[v$g+1],v$Z=v$i[v$g+2],v$u=v$i[v$g+3],v$j=2*(v$G=.1875*(v$N-2*v$$+v$Z))+(v$v=.09375*(3*(v$$-v$Z)-v$N+(v$c=v$i[v$g+4]))),v$h=2*(v$I=.1875*(v$_-2*v$M+v$u))+(v$l=.09375*(3*(v$M-v$u)-v$_+(v$H=v$i[v$g+5]))),v$f=.75*(v$$-v$N)+v$G+.16666667*v$v,v$F=.75*(v$M-v$_)+v$I+.16666667*v$l,v$b+=Math.sqrt(v$f*v$f+v$F*v$F),v$f+=v$j,v$F+=v$h,v$j+=v$v,v$h+=v$l,v$b+=Math.sqrt(v$f*v$f+v$F*v$F),v$f+=v$j,v$F+=v$h,v$b+=Math.sqrt(v$f*v$f+v$F*v$F),v$f+=v$j+v$v,v$F+=v$h+v$l,v$b+=Math.sqrt(v$f*v$f+v$F*v$F),v$k[v$y]=v$b,v$N=v$c,v$_=v$H;if(v$p&&(v$X*=v$b),v$Q)for(v$y=0;v$y<v$x;v$y++)v$z[v$y]*=v$b;var v$o=this._segments,v$B=0,v$O=0;for(v$O=v$A=v$P=v$y=0;v$y<v$x;v$y++,v$P+=3)if((v$T=v$X+=v$K=v$z[v$y])<0)this.addBeforePosition(v$T,v$i,0,v$q,v$P);else if(v$b<v$T)this.addAfterPosition(v$T-v$b,v$i,v$R-4,v$q,v$P);else{for(;;v$A++)if(!((v$W=v$k[v$A])<v$T)){0==v$A?v$T/=v$W:v$T=(v$T-(v$Y=v$k[v$A-1]))/(v$W-v$Y);break}if(v$A!=v$m){var v$L=6*(v$m=v$A);for(v$N=v$i[v$L],v$_=v$i[v$L+1],v$$=v$i[v$L+2],v$M=v$i[v$L+3],v$Z=v$i[v$L+4],v$u=v$i[v$L+5],v$j=2*(v$G=.03*(v$N-2*v$$+v$Z))+(v$v=.006*(3*(v$$-v$Z)-v$N+(v$c=v$i[v$L+6]))),v$h=2*(v$I=.03*(v$_-2*v$M+v$u))+(v$l=.006*(3*(v$M-v$u)-v$_+(v$H=v$i[v$L+7]))),v$f=.3*(v$$-v$N)+v$G+.16666667*v$v,v$F=.3*(v$M-v$_)+v$I+.16666667*v$l,v$B=Math.sqrt(v$f*v$f+v$F*v$F),v$o[0]=v$B,v$L=1;v$L<8;v$L++)v$f+=v$j,v$F+=v$h,v$j+=v$v,v$h+=v$l,v$B+=Math.sqrt(v$f*v$f+v$F*v$F),v$o[v$L]=v$B;v$f+=v$j,v$F+=v$h,v$B+=Math.sqrt(v$f*v$f+v$F*v$F),v$o[8]=v$B,v$f+=v$j+v$v,v$F+=v$h+v$l,v$B+=Math.sqrt(v$f*v$f+v$F*v$F),v$o[9]=v$B,v$O=0}for(v$T*=v$B;;v$O++)if(!((v$W=v$o[v$O])<v$T)){0==v$O?v$T/=v$W:v$T=v$O+(v$T-(v$Y=v$o[v$O-1]))/(v$W-v$Y);break}this.addCurvePosition(.1*v$T,v$N,v$_,v$$,v$M,v$Z,v$u,v$c,v$H,v$q,v$P,v$D||0<v$y&&0==v$K)}return v$q},v$n.addBeforePosition=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$a[v$U],v$Q=v$a[v$U+1],v$V=v$a[v$U+2]-v$p,v$y=v$a[v$U+3]-v$Q,v$R=Math.atan2(v$y,v$V);v$x[v$D]=v$p+v$n*Math.cos(v$R),v$x[v$D+1]=v$Q+v$n*Math.sin(v$R),v$x[v$D+2]=v$R},v$n.addAfterPosition=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$a[v$U+2],v$Q=v$a[v$U+3],v$V=v$p-v$a[v$U],v$y=v$Q-v$a[v$U+1],v$R=Math.atan2(v$y,v$V);v$x[v$D]=v$p+v$n*Math.cos(v$R),v$x[v$D+1]=v$Q+v$n*Math.sin(v$R),v$x[v$D+2]=v$R},v$n.addCurvePosition=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X,v$z){0==v$n&&(v$n=1e-4);var v$i=v$n*v$n,v$q=v$i*v$n,v$E=1-v$n,v$m=v$E*v$E,v$b=v$m*v$E,v$P=v$E*v$n,v$A=3*v$P,v$T=v$E*v$A,v$K=v$A*v$n,v$Y=v$a*v$b+v$x*v$T+v$p*v$K+v$V*v$q,v$W=v$U*v$b+v$D*v$T+v$Q*v$K+v$y*v$q;v$R[v$X]=v$Y,v$R[v$X+1]=v$W,v$R[v$X+2]=v$z?Math.atan2(v$W-(v$U*v$m+v$D*v$P*2+v$Q*v$i),v$Y-(v$a*v$m+v$x*v$P*2+v$p*v$i)):0},v$G.NONE=-1,v$G.BEFORE=-2,v$G.AFTER=-3,v$U(v$G,["_tempMt",function(){return this._tempMt=new v$cn}]),v$G}(),v$gn=function(){function v$n(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return v$x(v$n,"laya.ani.bone.PathConstraintData"),v$n}(),v$on=function(){function v$n(){this.name=null,this.slotArr=[]}return v$x(v$n,"laya.ani.bone.SkinData"),v$n}(),v$Bn=function(){function v$n(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}v$x(v$n,"laya.ani.bone.SkinSlotDisplayData");var v$a=v$n.prototype;return v$a.createTexture=function(v$n){return this.texture||(this.texture=new v$Hn(v$n.bitmap,this.uvs),v$n.bitmap.alphaTexture&&(this.texture.alphaTexture=new v$Hn(v$n.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=v$n.height,this.texture.height=v$n.width,this.texture.offsetX=-v$n.offsetX,this.texture.offsetY=-v$n.offsetY,this.texture.sourceWidth=v$n.sourceHeight,this.texture.sourceHeight=v$n.sourceWidth):(this.texture.width=v$n.width,this.texture.height=v$n.height,this.texture.offsetX=-v$n.offsetX,this.texture.offsetY=-v$n.offsetY,this.texture.sourceWidth=v$n.sourceWidth,this.texture.sourceHeight=v$n.sourceHeight),v$b.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},v$a.destory=function(){this.texture&&this.texture.destroy()},v$n}(),v$On=function(){function v$n(){this.name=null,this.displayArr=[]}return v$x(v$n,"laya.ani.bone.SlotData"),v$n.prototype.getDisplayByName=function(v$n){for(var v$a=0,v$U=this.displayArr.length;v$a<v$U;v$a++)if(this.displayArr[v$a].attachmentName==v$n)return v$a;return-1},v$n}(),v$W=function(){function v$n(v$n,v$a){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=v$m(2,0),this._data=v$n,null==this._bones&&(this._bones=[]),this.target=v$a[v$n.targetIndex];var v$U,v$x=0;for(v$x=0,v$U=v$n.boneIndexs.length;v$x<v$U;v$x++)this._bones.push(v$a[v$n.boneIndexs[v$x]]);this.rotateMix=v$n.rotateMix,this.translateMix=v$n.translateMix,this.scaleMix=v$n.scaleMix,this.shearMix=v$n.shearMix}return v$x(v$n,"laya.ani.bone.TfConstraint"),v$n.prototype.apply=function(){for(var v$n,v$a=this.target.resultMatrix.a,v$U=this.target.resultMatrix.b,v$x=this.target.resultMatrix.c,v$D=this.target.resultMatrix.d,v$p=0,v$Q=this._bones.length;v$p<v$Q;v$p++){if(v$n=this._bones[v$p],0<this.rotateMix){var v$V=v$n.resultMatrix.a,v$y=v$n.resultMatrix.b,v$R=v$n.resultMatrix.c,v$X=v$n.resultMatrix.d,v$z=Math.atan2(v$x,v$a)-Math.atan2(v$R,v$V)+this._data.offsetRotation*Math.PI/180;v$z>Math.PI?v$z-=2*Math.PI:v$z<-Math.PI&&(v$z+=2*Math.PI),v$z*=this.rotateMix;var v$i=Math.cos(v$z),v$q=Math.sin(v$z);v$n.resultMatrix.a=v$i*v$V-v$q*v$R,v$n.resultMatrix.b=v$i*v$y-v$q*v$X,v$n.resultMatrix.c=v$q*v$V+v$i*v$R,v$n.resultMatrix.d=v$q*v$y+v$i*v$X}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),v$n.resultMatrix.tx+=(this._temp[0]-v$n.resultMatrix.tx)*this.translateMix,v$n.resultMatrix.ty+=(this._temp[1]-v$n.resultMatrix.ty)*this.translateMix,v$n.updateChild()),0<this.scaleMix){var v$E=Math.sqrt(v$n.resultMatrix.a*v$n.resultMatrix.a+v$n.resultMatrix.c*v$n.resultMatrix.c),v$m=Math.sqrt(v$a*v$a+v$x*v$x),v$b=1e-5<v$E?(v$E+(v$m-v$E+this._data.offsetScaleX)*this.scaleMix)/v$E:0;v$n.resultMatrix.a*=v$b,v$n.resultMatrix.c*=v$b,v$E=Math.sqrt(v$n.resultMatrix.b*v$n.resultMatrix.b+v$n.resultMatrix.d*v$n.resultMatrix.d),v$m=Math.sqrt(v$U*v$U+v$D*v$D),v$b=1e-5<v$E?(v$E+(v$m-v$E+this._data.offsetScaleY)*this.scaleMix)/v$E:0,v$n.resultMatrix.b*=v$b,v$n.resultMatrix.d*=v$b}if(0<this.shearMix){v$y=v$n.resultMatrix.b,v$X=v$n.resultMatrix.d;var v$P=Math.atan2(v$X,v$y);(v$z=Math.atan2(v$D,v$U)-Math.atan2(v$x,v$a)-(v$P-Math.atan2(v$n.resultMatrix.c,v$n.resultMatrix.a)))>Math.PI?v$z-=2*Math.PI:v$z<-Math.PI&&(v$z+=2*Math.PI),v$z=v$P+(v$z+this._data.offsetShearY*Math.PI/180)*this.shearMix,v$b=Math.sqrt(v$y*v$y+v$X*v$X),v$n.resultMatrix.b=Math.cos(v$z)*v$b,v$n.resultMatrix.d=Math.sin(v$z)*v$b}}},v$n}(),v$Ln=function(){function v$n(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return v$x(v$n,"laya.ani.bone.TfConstraintData"),v$n}(),v$dn=function(){function v$n(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}v$x(v$n,"laya.ani.bone.Transform");var v$a=v$n.prototype;return v$a.initData=function(v$n){null!=v$n.x&&(this.x=v$n.x),null!=v$n.y&&(this.y=v$n.y),null!=v$n.skX&&(this.skX=v$n.skX),null!=v$n.skY&&(this.skY=v$n.skY),null!=v$n.scX&&(this.scX=v$n.scX),null!=v$n.scY&&(this.scY=v$n.scY)},v$a.getMatrix=function(){var v$n;return(v$n=this.mMatrix?this.mMatrix:this.mMatrix=new v$cn).identity(),v$n.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(v$n,this.skewX*Math.PI/180,this.skewY*Math.PI/180),v$n.rotate(this.skX*Math.PI/180),v$n.translate(this.x,this.y),v$n},v$a.skew=function(v$n,v$a,v$U){var v$x=Math.sin(v$U),v$D=Math.cos(v$U),v$p=Math.sin(v$a),v$Q=Math.cos(v$a);return v$n.setTo(v$n.a*v$Q-v$n.b*v$x,v$n.a*v$p+v$n.b*v$D,v$n.c*v$Q-v$n.d*v$x,v$n.c*v$p+v$n.d*v$D,v$n.tx*v$Q-v$n.ty*v$x,v$n.tx*v$p+v$n.ty*v$D),v$n},v$n}(),v$k=function(){function v$n(){}return v$x(v$n,"laya.ani.bone.UVTools"),v$n.getRelativeUV=function(v$n,v$a,v$U){var v$x=v$n[0],v$D=v$n[2]-v$n[0],v$p=v$n[1],v$Q=v$n[5]-v$n[1];v$U||(v$U=[]),v$U.length=v$a.length;var v$V,v$y=0;v$V=v$U.length;var v$R=1/v$D,v$X=1/v$Q;for(v$y=0;v$y<v$V;v$y+=2)v$U[v$y]=(v$a[v$y]-v$x)*v$R,v$U[v$y+1]=(v$a[v$y+1]-v$p)*v$X;return v$U},v$n.getAbsoluteUV=function(v$n,v$a,v$U){if(0==v$n[0]&&0==v$n[1]&&1==v$n[4]&&1==v$n[5])return v$U?(v$P.copyArray(v$U,v$a),v$U):v$a;var v$x=v$n[0],v$D=v$n[2]-v$n[0],v$p=v$n[1],v$Q=v$n[5]-v$n[1];v$U||(v$U=[]),v$U.length=v$a.length;var v$V,v$y=0;for(v$V=v$U.length,v$y=0;v$y<v$V;v$y+=2)v$U[v$y]=v$a[v$y]*v$D+v$x,v$U[v$y+1]=v$a[v$y+1]*v$Q+v$p;return v$U},v$n}(),v$G=function(){function v$n(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return v$x(v$n,"laya.ani.KeyFramesContent"),v$n}(),v$N=function(){function v$X(){}return v$x(v$X,"laya.ani.math.BezierLerp"),v$X.getBezierRate=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$X._getBezierParamKey(v$a,v$U,v$x,v$D),v$Q=100*v$p+v$n;if(v$X._bezierResultCache[v$Q])return v$X._bezierResultCache[v$Q];var v$V,v$y=v$X._getBezierPoints(v$a,v$U,v$x,v$D,v$p),v$R=0;for(v$V=v$y.length,v$R=0;v$R<v$V;v$R+=2)if(v$n<=v$y[v$R])return v$X._bezierResultCache[v$Q]=v$y[v$R+1],v$y[v$R+1];return v$X._bezierResultCache[v$Q]=1},v$X._getBezierParamKey=function(v$n,v$a,v$U,v$x){return 100*(100*(100*(100*v$n+v$a)+v$U)+v$x)},v$X._getBezierPoints=function(v$n,v$a,v$U,v$x,v$D){return v$X._bezierPointsCache[v$D]?v$X._bezierPointsCache[v$D]:(v$p=[0,0,v$n,v$a,v$U,v$x,1,1],v$Q=(new v$V).getBezierPoints(v$p,100,3),v$X._bezierPointsCache[v$D]=v$Q);var v$p,v$Q},v$X._bezierResultCache={},v$X._bezierPointsCache={},v$X}(),v$_=function(v$n){function v$a(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,v$a.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}v$x(v$a,"laya.ani.AnimationPlayer",v$D);var v$U=v$a.prototype;return v$Dn.imps(v$U,{"laya.resource.IDestroy":!0}),v$U._onTempletLoadedComputeFullKeyframeIndices=function(v$n,v$a,v$U){this._templet===v$U&&this._cachePlayRate===v$n&&this._cacheFrameRate===v$a&&this._computeFullKeyframeIndices()},v$U._computeFullKeyframeIndices=function(){for(var v$n=this._fullFrames=[],v$a=this._templet,v$U=this._cacheFrameRateInterval*this._cachePlayRate,v$x=0,v$D=v$a.getAnimationCount();v$x<v$D;v$x++){for(var v$p=[],v$Q=0,v$V=v$a.getAnimation(v$x).nodes.length;v$Q<v$V;v$Q++){for(var v$y=v$a.getAnimation(v$x).nodes[v$Q],v$R=Math.floor(v$y.playTime/v$U+.01),v$X=new Uint16Array(v$R+1),v$z=-1,v$i=0,v$q=v$y.keyFrame.length;v$i<v$q;v$i++){var v$E=v$y.keyFrame[v$i],v$m=v$E.startTime,v$b=v$m+v$E.duration+v$U;do{for(var v$P=Math.floor(v$m/v$U+.5),v$A=v$z+1;v$A<v$P;v$A++)v$X[v$A]=v$i;v$X[v$z=v$P]=v$i,v$m+=v$U}while(v$m<=v$b)}v$p.push(v$X)}v$n.push(v$p)}},v$U._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},v$U._calculatePlayDuration=function(){if(0!==this.state){var v$n=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=v$n),this._playEnd>v$n&&(this._playEnd=v$n),this._playDuration=this._playEnd-this._playStart}},v$U._setPlayParams=function(v$n,v$a){this._currentTime=v$n,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/v$a+.01),0),this._currentFrameTime=this._currentKeyframeIndex*v$a},v$U._setPlayParamsWhenStop=function(v$n,v$a){this._currentTime=v$n,this._currentKeyframeIndex=Math.max(Math.floor(v$n/v$a+.01),0),this._currentFrameTime=this._currentKeyframeIndex*v$a,this._currentAnimationClipIndex=-1},v$U._update=function(v$n){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var v$a=this._cacheFrameRateInterval*this._cachePlayRate,v$U=0;this._startUpdateLoopCount!==v$E.loopCount&&(v$U=v$n*this.playbackRate,this._elapsedPlaybackTime+=v$U);var v$x=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=v$x)return this._setPlayParamsWhenStop(v$x,v$a),void this.event("stopped");if(v$U+=this._currentTime,0<v$x)if(v$x<=v$U)do{if(v$U-=v$x,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(v$x,v$a),this._stopWhenCircleFinish=!1,void this.event("stopped");v$U<v$x&&(this._setPlayParams(v$U,v$a),this.event("complete"))}while(v$x<=v$U);else this._setPlayParams(v$U,v$a);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(v$x,v$a),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},v$U._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},v$U.play=function(v$n,v$a,v$U,v$x,v$D){if(void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=1),void 0===v$U&&(v$U=2147483647),void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(v$U<0||v$x<0||v$D<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==v$D&&v$D<v$x)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=v$a,this._overallDuration=v$U,this._playStart=v$x,this._playEnd=v$D,this._paused=!1,this._currentAnimationClipIndex=v$n,this._currentKeyframeIndex=0,this._startUpdateLoopCount=v$E.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},v$U.playByFrame=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$n&&(v$n=0),void 0===v$a&&(v$a=1),void 0===v$U&&(v$U=2147483647),void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0),void 0===v$p&&(v$p=30);var v$Q=1e3/v$p;this.play(v$n,v$a,v$U,v$x*v$Q,v$D*v$Q)},v$U.stop=function(v$n){void 0===v$n&&(v$n=!0),v$n?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},v$p(0,v$U,"playEnd",function(){return this._playEnd}),v$p(0,v$U,"templet",function(){return this._templet},function(v$n){0===!this.state&&this.stop(!0),this._templet!==v$n&&((this._templet=v$n).loaded?this._computeFullKeyframeIndices():v$n.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),v$p(0,v$U,"playStart",function(){return this._playStart}),v$p(0,v$U,"playDuration",function(){return this._playDuration}),v$p(0,v$U,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),v$p(0,v$U,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),v$p(0,v$U,"overallDuration",function(){return this._overallDuration}),v$p(0,v$U,"currentFrameTime",function(){return this._currentFrameTime}),v$p(0,v$U,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),v$p(0,v$U,"currentPlayTime",function(){return this._currentTime+this._playStart}),v$p(0,v$U,"cachePlayRate",function(){return this._cachePlayRate},function(v$n){this._cachePlayRate!==v$n&&(this._cachePlayRate=v$n,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[v$n,this._cacheFrameRate])))}),v$p(0,v$U,"cacheFrameRate",function(){return this._cacheFrameRate},function(v$n){this._cacheFrameRate!==v$n&&(this._cacheFrameRate=v$n,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,v$n])))}),v$p(0,v$U,"currentTime",null,function(v$n){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(v$n<this._playStart||v$n>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=v$E.loopCount;var v$a=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=v$n,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/v$a),0),this._currentFrameTime=this._currentKeyframeIndex*v$a}}),v$p(0,v$U,"paused",function(){return this._paused},function(v$n){(this._paused=v$n)&&this.event("paused")}),v$p(0,v$U,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),v$p(0,v$U,"destroyed",function(){return this._destroyed}),v$a}(),v$I=function(v$n){function v$a(){v$a.__super.call(this),v$b.isConchNode&&(this.drawSkin=function(v$n){v$n.transform||(v$n.transform=v$cn.EMPTY),this._addCmd([v$n]),this.setSkinMesh&&this.setSkinMesh(v$n._ps,v$n.mVBData,v$n.mEleNum,0,v$n.mTexture,v$n.transform)})}return v$x(v$a,"laya.ani.GraphicsAni",v$Q),v$a.prototype.drawSkin=function(v$n){var v$a=[v$n];this._saveToCmd(v$b._context._drawSkin,v$a)},v$a.create=function(){return v$a._caches.pop()||new v$a},v$a.recycle=function(v$n){v$n.clear(),v$a._caches.push(v$n)},v$a._caches=[],v$a}(),v$v=function(v$n){function v$A(){this._aniMap={},this.unfixedLastAniIndex=-1,v$A.__super.call(this),this._anis=new Array}v$x(v$A,"laya.ani.AnimationTemplet",v$X);var v$a=v$A.prototype;return v$a.parse=function(v$n){var v$a=new v$un(v$n);this._aniVersion=v$a.readUTFString(),v$T.parse(this,v$a)},v$a._calculateKeyFrame=function(v$n,v$a,v$U){var v$x=v$n.keyFrame;v$x[v$a]=v$x[0];for(var v$D=0;v$D<v$a;v$D++){var v$p=v$x[v$D];v$p.nextData=0===v$p.duration?v$p.data:v$x[v$D+1].data}v$x.length--},v$a.onAsynLoaded=function(v$n,v$a,v$U){var v$x=new v$un(v$a);switch(this._aniVersion=v$x.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":v$K.parse(this,v$x);break;default:v$T.parse(this,v$x)}this._endLoaded()},v$a.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},v$a.getAnimationCount=function(){return this._anis.length},v$a.getAnimation=function(v$n){return this._anis[v$n]},v$a.getAniDuration=function(v$n){return this._anis[v$n].playTime},v$a.getNodes=function(v$n){return this._anis[v$n].nodes},v$a.getNodeIndexWithName=function(v$n,v$a){return this._anis[v$n].bone3DMap[v$a]},v$a.getNodeCount=function(v$n){return this._anis[v$n].nodes.length},v$a.getTotalkeyframesLength=function(v$n){return this._anis[v$n].totalKeyframeDatasLength},v$a.getPublicExtData=function(){return this._publicExtData},v$a.getAnimationDataWithCache=function(v$n,v$a,v$U,v$x){var v$D=v$a[v$U];if(v$D){var v$p=v$D[v$n];return v$p?v$p[v$x]:null}return null},v$a.setAnimationDataWithCache=function(v$n,v$a,v$U,v$x,v$D){var v$p=v$a[v$U]||(v$a[v$U]={});(v$p[v$n]||(v$p[v$n]=[]))[v$x]=v$D},v$a.getOriginalData=function(v$n,v$a,v$U,v$x,v$D){for(var v$p=this._anis[v$n].nodes,v$Q=0,v$V=0,v$y=v$p.length,v$R=0;v$V<v$y;v$V++){var v$X,v$z=v$p[v$V];v$X=v$z.keyFrame[v$U[v$V][v$x]],v$z.dataOffset=v$R;var v$i=v$D-v$X.startTime,v$q=v$z.lerpType;if(v$q)switch(v$q){case 0:case 1:for(v$Q=0;v$Q<v$z.keyframeWidth;)v$Q+=v$z.interpolationMethod[v$Q](v$z,v$Q,v$a,v$R+v$Q,v$X.data,v$i,null,v$X.duration,v$X.nextData);break;case 2:var v$E=v$X.interpolationData,v$m=v$E.length,v$b=0;for(v$Q=0;v$Q<v$m;){var v$P=v$E[v$Q];switch(v$P){case 6:case 7:v$Q+=v$A.interpolation[v$P](v$z,v$b,v$a,v$R+v$b,v$X.data,v$i,null,v$X.duration,v$X.nextData,v$E,v$Q+1);break;default:v$Q+=v$A.interpolation[v$P](v$z,v$b,v$a,v$R+v$b,v$X.data,v$i,null,v$X.duration,v$X.nextData)}v$b++}}else for(v$Q=0;v$Q<v$z.keyframeWidth;)v$Q+=v$z.interpolationMethod[v$Q](v$z,v$Q,v$a,v$R+v$Q,v$X.data,v$i,null,v$X.duration,v$X.nextData);v$R+=v$z.keyframeWidth}},v$a.getNodesCurrentFrameIndex=function(v$n,v$a){var v$U=this._anis[v$n].nodes;v$n!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(v$U.length),this.unfixedCurrentTimes=new Float32Array(v$U.length),this.unfixedLastAniIndex=v$n);for(var v$x=0,v$D=v$U.length;v$x<v$D;v$x++){var v$p=v$U[v$x];for(v$a<this.unfixedCurrentTimes[v$x]&&(this.unfixedCurrentFrameIndexes[v$x]=0),this.unfixedCurrentTimes[v$x]=v$a;this.unfixedCurrentFrameIndexes[v$x]<v$p.keyFrame.length&&!(v$p.keyFrame[this.unfixedCurrentFrameIndexes[v$x]].startTime>this.unfixedCurrentTimes[v$x]);)this.unfixedCurrentFrameIndexes[v$x]++;this.unfixedCurrentFrameIndexes[v$x]--}return this.unfixedCurrentFrameIndexes},v$a.getOriginalDataUnfixedRate=function(v$n,v$a,v$U){var v$x=this._anis[v$n].nodes;v$n!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(v$x.length),this.unfixedCurrentTimes=new Float32Array(v$x.length),this.unfixedKeyframes=v$m(v$x.length),this.unfixedLastAniIndex=v$n);for(var v$D=0,v$p=0,v$Q=v$x.length,v$V=0;v$p<v$Q;v$p++){var v$y=v$x[v$p];for(v$U<this.unfixedCurrentTimes[v$p]&&(this.unfixedCurrentFrameIndexes[v$p]=0),this.unfixedCurrentTimes[v$p]=v$U;this.unfixedCurrentFrameIndexes[v$p]<v$y.keyFrame.length&&!(v$y.keyFrame[this.unfixedCurrentFrameIndexes[v$p]].startTime>this.unfixedCurrentTimes[v$p]);)this.unfixedKeyframes[v$p]=v$y.keyFrame[this.unfixedCurrentFrameIndexes[v$p]],this.unfixedCurrentFrameIndexes[v$p]++;var v$R=this.unfixedKeyframes[v$p];v$y.dataOffset=v$V;var v$X=v$U-v$R.startTime;if(v$y.lerpType)switch(v$y.lerpType){case 0:case 1:for(v$D=0;v$D<v$y.keyframeWidth;)v$D+=v$y.interpolationMethod[v$D](v$y,v$D,v$a,v$V+v$D,v$R.data,v$X,null,v$R.duration,v$R.nextData);break;case 2:var v$z=v$R.interpolationData,v$i=v$z.length,v$q=0;for(v$D=0;v$D<v$i;){var v$E=v$z[v$D];switch(v$E){case 6:case 7:v$D+=v$A.interpolation[v$E](v$y,v$q,v$a,v$V+v$q,v$R.data,v$X,null,v$R.duration,v$R.nextData,v$z,v$D+1);break;default:v$D+=v$A.interpolation[v$E](v$y,v$q,v$a,v$V+v$q,v$R.data,v$X,null,v$R.duration,v$R.nextData)}v$q++}}else for(v$D=0;v$D<v$y.keyframeWidth;)v$D+=v$y.interpolationMethod[v$D](v$y,v$D,v$a,v$V+v$D,v$R.data,v$X,null,v$R.duration,v$R.nextData);v$V+=v$y.keyframeWidth}},v$A._LinearInterpolation_0=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){var v$X=0===v$V?0:v$p/v$V;return v$U[v$x]=(1-v$X)*v$D[v$a]+v$X*v$y[v$a],1},v$A._QuaternionInterpolation_1=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){var v$X=0===v$V?0:v$p/v$V;return v$i.slerpQuaternionArray(v$D,v$a,v$y,v$a,v$X,v$U,v$x),4},v$A._AngleInterpolation_2=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){return 0},v$A._RadiansInterpolation_3=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){return 0},v$A._Matrix4x4Interpolation_4=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){for(var v$X=0;v$X<16;v$X++,v$a++)v$U[v$x+v$X]=v$D[v$a]+v$p*v$Q[v$a];return 16},v$A._NoInterpolation_5=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R){return v$U[v$x]=v$D[v$a],1},v$A._BezierInterpolation_6=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X){return void 0===v$X&&(v$X=0),v$U[v$x]=v$D[v$a]+(v$y[v$a]-v$D[v$a])*v$N.getBezierRate(v$p/v$V,v$R[v$X],v$R[v$X+1],v$R[v$X+2],v$R[v$X+3]),5},v$A._BezierInterpolation_7=function(v$n,v$a,v$U,v$x,v$D,v$p,v$Q,v$V,v$y,v$R,v$X){return void 0===v$X&&(v$X=0),v$U[v$x]=v$R[v$X+4]+v$R[v$X+5]*v$N.getBezierRate((.001*v$p+v$R[v$X+6])/v$R[v$X+7],v$R[v$X],v$R[v$X+1],v$R[v$X+2],v$R[v$X+3]),9},v$A.load=function(v$n){return v$Dn.loader.create(v$n,null,null,v$A)},v$A.interpolation=[v$A._LinearInterpolation_0,v$A._QuaternionInterpolation_1,v$A._AngleInterpolation_2,v$A._RadiansInterpolation_3,v$A._Matrix4x4Interpolation_4,v$A._NoInterpolation_5,v$A._BezierInterpolation_6,v$A._BezierInterpolation_7],v$A}(),v$$=function(v$a){function v$U(v$n,v$a){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,v$U.__super.call(this),void 0===v$a&&(v$a=0),v$n&&this.init(v$n,v$a)}v$x(v$U,"laya.ani.bone.Skeleton",v$a);var v$n=v$U.prototype;return v$n.init=function(v$n,v$a){void 0===v$a&&(v$a=0);var v$U,v$x,v$D,v$p=0,v$Q=0;if(1==v$a)for(this._graphicsCache=[],v$p=0,v$Q=v$n.getAnimationCount();v$p<v$Q;v$p++)this._graphicsCache.push([]);if(this._yReverseMatrix=v$n.yReverseMatrix,this._aniMode=v$a,this._templet=v$n,this._player=new v$_,this._player.cacheFrameRate=v$n.rate,this._player.templet=v$n,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=v$n.mBoneArr,this._rootBone=v$n.mRootBone,this._aniSectionDic=v$n.aniSectionDic,0<v$n.ikArr.length)for(this._ikArr=[],v$p=0,v$Q=v$n.ikArr.length;v$p<v$Q;v$p++)this._ikArr.push(new v$A(v$n.ikArr[v$p],this._boneList));if(0<v$n.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),v$p=0,v$Q=v$n.pathArr.length;v$p<v$Q;v$p++)v$U=v$n.pathArr[v$p],v$x=new v$Y(v$U,this._boneList),(v$D=this._boneSlotDic[v$U.name])&&((v$x=new v$Y(v$U,this._boneList)).target=v$D),this._pathDic[v$U.name]=v$x;if(0<v$n.tfArr.length)for(this._tfArr=[],v$p=0,v$Q=v$n.tfArr.length;v$p<v$Q;v$p++)this._tfArr.push(new v$W(v$n.tfArr[v$p],this._boneList));if(0<v$n.skinDataArray.length){var v$V=this._templet.skinDataArray[this._skinIndex];this._skinName=v$V.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},v$n.load=function(v$n,v$a,v$U){},v$n._onLoaded=function(){},v$n._parseComplete=function(){var v$n=v$M.TEMPLET_DICTIONARY[this._aniPath];v$n&&(this.init(v$n,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},v$n._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},v$n._onPlay=function(){this.event("played")},v$n._onStop=function(){var v$n,v$a=this._templet.eventAniArr[this._aniClipIndex];if(v$a&&this._eventIndex<v$a.length)for(;this._eventIndex<v$a.length;this._eventIndex++)(v$n=v$a[this._eventIndex]).time>=this._player.playStart&&v$n.time<=this._player.playEnd&&this.event("label",v$n);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},v$n._onPause=function(){this.event("paused")},v$n._parseSrcBoneMatrix=function(){var v$n=0,v$a=0;for(v$a=this._templet.srcBoneMatrixArr.length,v$n=0;v$n<v$a;v$n++)this._boneMatrixArray.push(new v$cn);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var v$U,v$x,v$D=this._templet.boneSlotArray;for(v$n=0,v$a=v$D.length;v$n<v$a;v$n++)v$U=v$D[v$n],null==(v$x=this._bindBoneBoneSlotDic[v$U.parent])&&(this._bindBoneBoneSlotDic[v$U.parent]=v$x=[]),this._boneSlotDic[v$U.name]=v$U=v$U.copy(),v$x.push(v$U),this._boneSlotArray.push(v$U)}},v$n._emitMissedEvents=function(v$n,v$a,v$U){void 0===v$U&&(v$U=0);var v$x=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(v$x){var v$D,v$p,v$Q=0;for(v$D=v$x.length,v$Q=v$U;v$Q<v$D;v$Q++)(v$p=v$x[v$Q]).time>=this._player.playStart&&v$p.time<=this._player.playEnd&&this.event("label",v$p)}},v$n._update=function(v$n){if(void 0===v$n&&(v$n=!0),!(this._pause||v$n&&this._indexControl)){var v$a=this.timer.currTimer,v$U=this._player.currentKeyframeIndex,v$x=v$a-this._lastTime;if(v$n?this._player._update(v$x):v$U=-1,this._lastTime=v$a,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<v$x&&this._clipIndex==v$U&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var v$D;this._lastUpdateAniClipIndex=this._aniClipIndex,v$U>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var v$p,v$Q=this._templet.eventAniArr[this._aniClipIndex];if(v$Q&&this._eventIndex<v$Q.length&&((v$D=v$Q[this._eventIndex]).time>=this._player.playStart&&v$D.time<=this._player.playEnd?this._player.currentPlayTime>=v$D.time&&(this.event("label",v$D),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(v$p=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=v$p&&(this.graphics=v$p));var v$V=0,v$y=0;for(v$y=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,v$y-1)&&0<v$y;)v$y--;if(v$y<this._clipIndex)for(v$V=v$y;v$V<this._clipIndex;v$V++)this._createGraphics(v$V)}else if(1==this._aniMode){if(v$p=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=v$p&&(this.graphics=v$p));for(v$y=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,v$y-1)&&0<v$y;)v$y--;if(v$y<this._clipIndex)for(v$V=v$y;v$V<this._clipIndex;v$V++)this._createGraphics(v$V)}this._createGraphics()}}},v$n._createGraphics=function(v$n){void 0===v$n&&(v$n=-1),-1==v$n&&(v$n=this._clipIndex);var v$a,v$U,v$x=v$n*this._player.cacheFrameRateInterval,v$D=this._templet.drawOrderAniArr[this._aniClipIndex];if(v$D&&0<v$D.length)for(this._drawOrderIndex=0,v$a=v$D[this._drawOrderIndex];v$x>=v$a.time&&(this._drawOrder=v$a.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=v$D.length));)v$a=v$D[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=v$I.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=v$I.create(),v$U=this.graphics;var v$p=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],v$n,v$x);var v$Q,v$V,v$y,v$R,v$X=this._aniSectionDic[this._aniClipIndex],v$z=0,v$i=0,v$q=0,v$E=0,v$m=0,v$b=this._templet.srcBoneMatrixArr.length;for(v$m=v$X[v$i=0];v$i<v$b;v$i++)v$R=this._boneList[v$i],v$y=this._templet.srcBoneMatrixArr[v$i],v$R.resultTransform.scX=v$y.scX*this._curOriginalData[v$z++],v$R.resultTransform.skX=v$y.skX+this._curOriginalData[v$z++],v$R.resultTransform.skY=v$y.skY+this._curOriginalData[v$z++],v$R.resultTransform.scY=v$y.scY*this._curOriginalData[v$z++],v$R.resultTransform.x=v$y.x+this._curOriginalData[v$z++],v$R.resultTransform.y=v$y.y+this._curOriginalData[v$z++],8===this._templet.tMatrixDataLen&&(v$R.resultTransform.skewX=v$y.skewX+this._curOriginalData[v$z++],v$R.resultTransform.skewY=v$y.skewY+this._curOriginalData[v$z++]);var v$P,v$A={},v$T={};for(v$m+=v$X[1];v$i<v$m;v$i++)v$A[(v$P=v$p[v$i]).name]=this._curOriginalData[v$z++],v$T[v$P.name]=this._curOriginalData[v$z++],this._curOriginalData[v$z++],this._curOriginalData[v$z++],this._curOriginalData[v$z++],this._curOriginalData[v$z++];var v$K,v$Y,v$W={},v$k={};for(v$m+=v$X[2];v$i<v$m;v$i++)v$W[(v$P=v$p[v$i]).name]=this._curOriginalData[v$z++],v$k[v$P.name]=this._curOriginalData[v$z++],this._curOriginalData[v$z++],this._curOriginalData[v$z++],this._curOriginalData[v$z++],this._curOriginalData[v$z++];if(this._pathDic)for(v$m+=v$X[3];v$i<v$m;v$i++){if(v$P=v$p[v$i],v$K=this._pathDic[v$P.name])switch(new v$un(v$P.extenData).getByte()){case 1:v$K.position=this._curOriginalData[v$z++];break;case 2:v$K.spacing=this._curOriginalData[v$z++];break;case 3:v$K.rotateMix=this._curOriginalData[v$z++],v$K.translateMix=this._curOriginalData[v$z++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(v$cn.TEMP.identity()),this._ikArr)for(v$i=0,v$m=this._ikArr.length;v$i<v$m;v$i++)v$Y=this._ikArr[v$i],v$W.hasOwnProperty(v$Y.name)&&(v$Y.bendDirection=v$W[v$Y.name]),v$k.hasOwnProperty(v$Y.name)&&(v$Y.mix=v$k[v$Y.name]),v$Y.apply();if(this._pathDic)for(var v$N in this._pathDic)(v$K=this._pathDic[v$N]).apply(this._boneList,v$U);if(this._tfArr)for(v$i=0,v$E=this._tfArr.length;v$i<v$E;v$i++)this._tfArr[v$i].apply();for(v$i=0,v$E=this._boneList.length;v$i<v$E;v$i++)if(v$R=this._boneList[v$i],v$V=this._bindBoneBoneSlotDic[v$R.name],v$R.resultMatrix.copyTo(this._boneMatrixArray[v$i]),v$V)for(v$q=0,v$m=v$V.length;v$q<v$m;v$q++)(v$Q=v$V[v$q])&&v$Q.setParentMatrix(v$R.resultMatrix);var v$_,v$$,v$M,v$Z,v$u={},v$c=this._templet.deformAniArr;if(v$c&&0<v$c.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,v$i=0,v$m=this._boneSlotArray.length;v$i<v$m;v$i++)(v$Q=this._boneSlotArray[v$i]).deformData=null;var v$H,v$G=v$c[this._aniClipIndex];for(v$H in v$_=v$G.default,this._setDeform(v$_,v$u,this._boneSlotArray,v$x),v$G)"default"!=v$H&&v$H!=this._skinName&&(v$_=v$G[v$H],this._setDeform(v$_,v$u,this._boneSlotArray,v$x));v$_=v$G[this._skinName],this._setDeform(v$_,v$u,this._boneSlotArray,v$x)}if(this._drawOrder)for(v$i=0,v$m=this._drawOrder.length;v$i<v$m;v$i++)v$$=v$A[(v$Q=this._boneSlotArray[this._drawOrder[v$i]]).name],v$M=v$T[v$Q.name],isNaN(v$M)||(v$U.save(),v$U.alpha(v$M)),isNaN(v$$)||-2==v$$||(this._templet.attachmentNames?v$Q.showDisplayByName(this._templet.attachmentNames[v$$]):v$Q.showDisplayByIndex(v$$)),v$u[this._drawOrder[v$i]]?(v$Z=v$u[this._drawOrder[v$i]],v$Q.currDisplayData&&v$Z[v$Q.currDisplayData.attachmentName]?v$Q.deformData=v$Z[v$Q.currDisplayData.attachmentName]:v$Q.deformData=null):v$Q.deformData=null,isNaN(v$M)?v$Q.draw(v$U,this._boneMatrixArray,2==this._aniMode):v$Q.draw(v$U,this._boneMatrixArray,2==this._aniMode,v$M),isNaN(v$M)||v$U.restore();else for(v$i=0,v$m=this._boneSlotArray.length;v$i<v$m;v$i++)v$$=v$A[(v$Q=this._boneSlotArray[v$i]).name],v$M=v$T[v$Q.name],isNaN(v$M)||(v$U.save(),v$U.alpha(v$M)),isNaN(v$$)||-2==v$$||(this._templet.attachmentNames?v$Q.showDisplayByName(this._templet.attachmentNames[v$$]):v$Q.showDisplayByIndex(v$$)),v$u[v$i]?(v$Z=v$u[v$i],v$Q.currDisplayData&&v$Z[v$Q.currDisplayData.attachmentName]?v$Q.deformData=v$Z[v$Q.currDisplayData.attachmentName]:v$Q.deformData=null):v$Q.deformData=null,isNaN(v$M)?v$Q.draw(v$U,this._boneMatrixArray,2==this._aniMode):v$Q.draw(v$U,this._boneMatrixArray,2==this._aniMode,v$M),isNaN(v$M)||v$U.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,v$n,v$U):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,v$n,v$U)},v$n._setDeform=function(v$n,v$a,v$U,v$x){if(v$n){var v$D,v$p,v$Q,v$V=0,v$y=0,v$R=0;if(v$n)for(v$V=0,v$y=v$n.deformSlotDataList.length;v$V<v$y;v$V++)for(v$D=v$n.deformSlotDataList[v$V],v$R=0;v$R<v$D.deformSlotDisplayList.length;v$R++)v$Q=v$U[(v$p=v$D.deformSlotDisplayList[v$R]).slotIndex],v$p.apply(v$x,v$Q),v$a[v$p.slotIndex]||(v$a[v$p.slotIndex]={}),v$a[v$p.slotIndex][v$p.attachment]=v$p.deformData}},v$n.getAnimNum=function(){return this._templet.getAnimationCount()},v$n.getAniNameByIndex=function(v$n){return this._templet.getAniNameByIndex(v$n)},v$n.getSlotByName=function(v$n){return this._boneSlotDic[v$n]},v$n.showSkinByName=function(v$n,v$a){void 0===v$a&&(v$a=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(v$n),v$a)},v$n.showSkinByIndex=function(v$n,v$a){void 0===v$a&&(v$a=!0);for(var v$U=0;v$U<this._boneSlotArray.length;v$U++)this._boneSlotArray[v$U].showSlotData(null,v$a);if(this._templet.showSkinByIndex(this._boneSlotDic,v$n,v$a)){var v$x=this._templet.skinDataArray[v$n];this._skinIndex=v$n,this._skinName=v$x.name}this._clearCache()},v$n.showSlotSkinByIndex=function(v$n,v$a){if(0!=this._aniMode){var v$U=this.getSlotByName(v$n);v$U&&v$U.showDisplayByIndex(v$a),this._clearCache()}},v$n.showSlotSkinByName=function(v$n,v$a){if(0!=this._aniMode){var v$U=this.getSlotByName(v$n);v$U&&v$U.showDisplayByName(v$a),this._clearCache()}},v$n.replaceSlotSkinName=function(v$n,v$a,v$U){if(0!=this._aniMode){var v$x=this.getSlotByName(v$n);v$x&&v$x.replaceDisplayByName(v$a,v$U),this._clearCache()}},v$n.replaceSlotSkinByIndex=function(v$n,v$a,v$U){if(0!=this._aniMode){var v$x=this.getSlotByName(v$n);v$x&&v$x.replaceDisplayByIndex(v$a,v$U),this._clearCache()}},v$n.setSlotSkin=function(v$n,v$a){if(0!=this._aniMode){var v$U=this.getSlotByName(v$n);v$U&&v$U.replaceSkin(v$a),this._clearCache()}},v$n._clearCache=function(){if(1==this._aniMode)for(var v$n=0,v$a=this._graphicsCache.length;v$n<v$a;v$n++){for(var v$U=0,v$x=this._graphicsCache[v$n].length;v$U<v$x;v$U++){var v$D=this._graphicsCache[v$n][v$U];v$D!=this.graphics&&v$I.recycle(v$D)}this._graphicsCache[v$n].length=0}},v$n.play=function(v$n,v$a,v$U,v$x,v$D,v$p){void 0===v$U&&(v$U=!0),void 0===v$x&&(v$x=0),void 0===v$D&&(v$D=0),void 0===v$p&&(v$p=!0),this._indexControl=!1;var v$Q=-1,v$V=NaN;if(v$V=v$a?2147483647:0,"string"==typeof v$n)for(var v$y=0,v$R=this._templet.getAnimationCount();v$y<v$R;v$y++){var v$X=this._templet.getAnimation(v$y);if(v$X&&v$n==v$X.name){v$Q=v$y;break}}else v$Q=v$n;-1<v$Q&&v$Q<this.getAnimNum()&&(this._aniClipIndex=v$Q,(v$U||this._pause||this._currAniIndex!=v$Q)&&(this._currAniIndex=v$Q,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(v$Q)),this._drawOrder=null,this._eventIndex=0,this._player.play(v$Q,this._player.playbackRate,v$V,v$x,v$D),v$p&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=v$z.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},v$n.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},v$n.playbackRate=function(v$n){this._player&&(this._player.playbackRate=v$n)},v$n.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},v$n.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=v$z.now(),this.timer.frameLoop(1,this,this._update,null,!0))},v$n._getGrahicsDataWithCache=function(v$n,v$a){return this._graphicsCache[v$n][v$a]},v$n._setGrahicsDataWithCache=function(v$n,v$a,v$U){this._graphicsCache[v$n][v$a]=v$U},v$n.destroy=function(v$n){void 0===v$n&&(v$n=!0),v$a.prototype.destroy.call(this,v$n),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},v$p(0,v$n,"url",function(){return this._aniPath},function(v$n){this.load(v$n)}),v$p(0,v$n,"index",function(){return this._index},function(v$n){this.player&&(this._index=v$n,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),v$p(0,v$n,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),v$p(0,v$n,"templet",function(){return this._templet}),v$p(0,v$n,"player",function(){return this._player}),v$U.useSimpleMeshInCanvas=!1,v$U}(v$pn),v$M=function(v$a){function v$D(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,v$D.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}v$x(v$D,"laya.ani.bone.Templet",v$a);var v$n=v$D.prototype;return v$n.getLoadList=function(){return this._loadList},v$n.loadAni=function(v$n){this._skBufferUrl=v$n,v$Dn.loader.load(v$n,v$y.create(this,this.onComplete),null,"arraybuffer")},v$n.onComplete=function(v$n){if(this._isDestroyed)this.destroy();else{var v$a=v$R.getRes(this._skBufferUrl);v$a?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,v$a)):this.event("error","load failed:"+this._skBufferUrl)}},v$n.parseData=function(v$n,v$a,v$U){void 0===v$U&&(v$U=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=v$n,this._mainTexture&&v$b.isWebGL&&v$n.bitmap&&(v$n.bitmap.enableMerageInAtlas=!1),this._rate=v$U,this.parse(v$a)},v$n.buildArmature=function(v$n){return void 0===v$n&&(v$n=0),new v$$(this,v$n)},v$n.parse=function(v$n){v$a.prototype.parse.call(this,v$n),this._endLoaded(),this._aniVersion!=v$D.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+v$D.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},v$n._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var v$n=0;this._loadList=[];var v$a,v$U=new v$un(this.getPublicExtData()),v$x=0,v$D=0,v$p=0,v$Q=v$U.getInt32(),v$V=v$U.readUTFString(),v$y=v$V.split("\n");for(v$n=0;v$n<v$Q;v$n++)v$a=this._path+v$y[2*v$n],v$V=v$y[2*v$n+1],v$U.getFloat32(),v$U.getFloat32(),v$x=v$U.getFloat32(),v$D=v$U.getFloat32(),v$p=v$U.getFloat32(),isNaN(v$p)?0:v$p,v$p=v$U.getFloat32(),isNaN(v$p)?0:v$p,v$p=v$U.getFloat32(),isNaN(v$p)?v$x:v$p,v$p=v$U.getFloat32(),isNaN(v$p)?v$D:v$p,-1==this._loadList.indexOf(v$a)&&this._loadList.push(v$a);this.event("inited",this)}},v$n._textureComplete=function(){for(var v$n,v$a,v$U=0,v$x=this._loadList.length;v$U<v$x;v$U++)v$a=this._loadList[v$U],v$n=this._textureDic[v$a]=v$R.getRes(v$a),v$b.isWebGL&&v$n&&v$n.bitmap&&(v$n.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},v$n._parsePublicExtData=function(){var v$n=0,v$a=0,v$U=0,v$x=0,v$D=0;for(v$n=0,v$D=this.getAnimationCount();v$n<v$D;v$n++)this._graphicsCache.push([]);var v$p;v$p="Dragon"!=this._aniClassName;var v$Q,v$V,v$y=new v$un(this.getPublicExtData()),v$R=0,v$X=0,v$z=0,v$i=0,v$q=0,v$E=0,v$m=0,v$b=0,v$P=0,v$A=v$y.getInt32(),v$T=v$y.readUTFString(),v$K=v$T.split("\n");for(v$n=0;v$n<v$A;v$n++){if(v$Q=this._mainTexture,v$V=this._path+v$K[2*v$n],v$T=v$K[2*v$n+1],null==this._mainTexture&&(v$Q=this._textureDic[v$V]),!v$Q)return this.event("error",this),void(this.isParseFail=!0);v$R=v$y.getFloat32(),v$X=v$y.getFloat32(),v$z=v$y.getFloat32(),v$i=v$y.getFloat32(),v$P=v$y.getFloat32(),v$q=isNaN(v$P)?0:v$P,v$P=v$y.getFloat32(),v$E=isNaN(v$P)?0:v$P,v$P=v$y.getFloat32(),v$m=isNaN(v$P)?v$z:v$P,v$P=v$y.getFloat32(),v$b=isNaN(v$P)?v$i:v$P,this.subTextureDic[v$T]=v$Hn.create(v$Q,v$R,v$X,v$z,v$i,-v$q,-v$E,v$m,v$b),v$Q.alphaTexture&&(this.subTextureDic[v$T].alphaTexture=v$Hn.create(v$Q.alphaTexture,v$R,v$X,v$z,v$i,-v$q,-v$E,v$m,v$b))}this._mainTexture=v$Q;var v$Y,v$W,v$k,v$N,v$_,v$$=v$y.getUint16();for(v$n=0;v$n<v$$;v$n++)(v$Y=[]).push(v$y.getUint16()),v$Y.push(v$y.getUint16()),v$Y.push(v$y.getUint16()),v$Y.push(v$y.getUint16()),this.aniSectionDic[v$n]=v$Y;var v$M,v$Z=v$y.getInt16(),v$u={};for(v$n=0;v$n<v$Z;v$n++)v$W=new v$Gn,0==v$n?v$M=v$W:v$W.root=v$M,v$W.d=v$p?-1:1,v$N=v$y.readUTFString(),v$_=v$y.readUTFString(),v$W.length=v$y.getFloat32(),1==v$y.getByte()&&(v$W.inheritRotation=!1),1==v$y.getByte()&&(v$W.inheritScale=!1),v$W.name=v$N,v$_&&((v$k=v$u[v$_])?v$k.addChild(v$W):this.mRootBone=v$W),v$u[v$N]=v$W,this.mBoneArr.push(v$W);this.tMatrixDataLen=v$y.getUint16();var v$c,v$H,v$G=v$y.getUint16(),v$I=Math.floor(v$G/this.tMatrixDataLen),v$v=this.srcBoneMatrixArr;for(v$n=0;v$n<v$I;v$n++)(v$c=new v$dn).scX=v$y.getFloat32(),v$c.skX=v$y.getFloat32(),v$c.skY=v$y.getFloat32(),v$c.scY=v$y.getFloat32(),v$c.x=v$y.getFloat32(),v$c.y=v$y.getFloat32(),8===this.tMatrixDataLen&&(v$c.skewX=v$y.getFloat32(),v$c.skewY=v$y.getFloat32()),v$v.push(v$c),(v$W=this.mBoneArr[v$n]).transform=v$c;var v$l,v$j=v$y.getUint16(),v$h=0;for(v$n=0;v$n<v$j;v$n++){for(v$H=new v$Fn,v$h=v$y.getUint16(),v$a=0;v$a<v$h;v$a++)v$H.boneNames.push(v$y.readUTFString()),v$H.boneIndexs.push(v$y.getInt16());v$H.name=v$y.readUTFString(),v$H.targetBoneName=v$y.readUTFString(),v$H.targetBoneIndex=v$y.getInt16(),v$H.bendDirection=v$y.getFloat32(),v$H.mix=v$y.getFloat32(),v$H.isSpine=v$p,this.ikArr.push(v$H)}var v$f,v$F=v$y.getUint16(),v$g=0;for(v$n=0;v$n<v$F;v$n++){for(v$l=new v$Ln,v$g=v$y.getUint16(),v$a=0;v$a<v$g;v$a++)v$l.boneIndexs.push(v$y.getInt16());v$l.name=v$y.getUTFString(),v$l.targetIndex=v$y.getInt16(),v$l.rotateMix=v$y.getFloat32(),v$l.translateMix=v$y.getFloat32(),v$l.scaleMix=v$y.getFloat32(),v$l.shearMix=v$y.getFloat32(),v$l.offsetRotation=v$y.getFloat32(),v$l.offsetX=v$y.getFloat32(),v$l.offsetY=v$y.getFloat32(),v$l.offsetScaleX=v$y.getFloat32(),v$l.offsetScaleY=v$y.getFloat32(),v$l.offsetShearY=v$y.getFloat32(),this.tfArr.push(v$l)}var v$o=v$y.getUint16(),v$B=0;for(v$n=0;v$n<v$o;v$n++){for((v$f=new v$gn).name=v$y.readUTFString(),v$B=v$y.getUint16(),v$a=0;v$a<v$B;v$a++)v$f.bones.push(v$y.getInt16());v$f.target=v$y.readUTFString(),v$f.positionMode=v$y.readUTFString(),v$f.spacingMode=v$y.readUTFString(),v$f.rotateMode=v$y.readUTFString(),v$f.offsetRotation=v$y.getFloat32(),v$f.position=v$y.getFloat32(),v$f.spacing=v$y.getFloat32(),v$f.rotateMix=v$y.getFloat32(),v$f.translateMix=v$y.getFloat32(),this.pathArr.push(v$f)}var v$O,v$L,v$d,v$S,v$w,v$s=0,v$C=0,v$t=0,v$r=NaN,v$J=0,v$e=v$y.getInt16();for(v$n=0;v$n<v$e;v$n++){var v$nn=v$y.getUint8(),v$an={};this.deformAniArr.push(v$an);for(var v$Un=0;v$Un<v$nn;v$Un++)for((v$O=new v$vn).skinName=v$y.getUTFString(),v$an[v$O.skinName]=v$O,v$s=v$y.getInt16(),v$a=0;v$a<v$s;v$a++)for(v$L=new v$ln,v$O.deformSlotDataList.push(v$L),v$C=v$y.getInt16(),v$U=0;v$U<v$C;v$U++)for(v$d=new v$jn,v$L.deformSlotDisplayList.push(v$d),v$d.slotIndex=v$y.getInt16(),v$d.attachment=v$y.getUTFString(),v$t=v$y.getInt16(),v$x=0;v$x<v$t;v$x++)for(1==v$y.getByte()?v$d.tweenKeyList.push(!0):v$d.tweenKeyList.push(!1),v$r=v$y.getFloat32(),v$d.timeList.push(v$r),v$S=[],v$d.vectices.push(v$S),v$J=v$y.getInt16(),v$D=0;v$D<v$J;v$D++)v$S.push(v$y.getFloat32())}var v$xn,v$Dn,v$pn=v$y.getInt16(),v$Qn=0,v$Vn=0;for(v$n=0;v$n<v$pn;v$n++){for(v$Qn=v$y.getInt16(),v$w=[],v$a=0;v$a<v$Qn;v$a++){for((v$xn=new v$hn).time=v$y.getFloat32(),v$Vn=v$y.getInt16(),v$U=0;v$U<v$Vn;v$U++)v$xn.drawOrder.push(v$y.getInt16());v$w.push(v$xn)}this.drawOrderAniArr.push(v$w)}var v$yn,v$Rn=v$y.getInt16(),v$Xn=0;for(v$n=0;v$n<v$Rn;v$n++){for(v$Xn=v$y.getInt16(),v$Dn=[],v$a=0;v$a<v$Xn;v$a++)(v$yn=new v$fn).name=v$y.getUTFString(),v$yn.intValue=v$y.getInt32(),v$yn.floatValue=v$y.getFloat32(),v$yn.stringValue=v$y.getUTFString(),v$yn.time=v$y.getFloat32(),v$Dn.push(v$yn);this.eventAniArr.push(v$Dn)}var v$zn=v$y.getInt16();if(0<v$zn)for(this.attachmentNames=[],v$n=0;v$n<v$zn;v$n++)this.attachmentNames.push(v$y.getUTFString());var v$in,v$qn,v$En=v$y.getInt16();for(v$n=0;v$n<v$En;v$n++)(v$in=new v$In).name=v$y.readUTFString(),v$in.parent=v$y.readUTFString(),v$in.attachmentName=v$y.readUTFString(),v$in.srcDisplayIndex=v$in.displayIndex=v$y.getInt16(),(v$in.templet=this).boneSlotDic[v$in.name]=v$in,null==(v$qn=this.bindBoneBoneSlotDic[v$in.parent])&&(this.bindBoneBoneSlotDic[v$in.parent]=v$qn=[]),v$qn.push(v$in),this.boneSlotArray.push(v$in);var v$mn,v$bn,v$Pn,v$An=v$y.readUTFString().split("\n"),v$Tn=0,v$Kn=v$y.getUint8(),v$Yn=0,v$Wn=0,v$kn=0,v$Nn=0,v$_n=0,v$$n=0,v$Mn=0;for(v$n=0;v$n<v$Kn;v$n++){for((v$mn=new v$on).name=v$An[v$Tn++],v$Yn=v$y.getUint8(),v$a=0;v$a<v$Yn;v$a++){for((v$bn=new v$On).name=v$An[v$Tn++],v$in=this.boneSlotDic[v$bn.name],v$Wn=v$y.getUint8(),v$U=0;v$U<v$Wn;v$U++){if(v$Pn=new v$Bn,this.skinSlotDisplayDataArr.push(v$Pn),v$Pn.name=v$An[v$Tn++],v$Pn.attachmentName=v$An[v$Tn++],v$Pn.transform=new v$dn,v$Pn.transform.scX=v$y.getFloat32(),v$Pn.transform.skX=v$y.getFloat32(),v$Pn.transform.skY=v$y.getFloat32(),v$Pn.transform.scY=v$y.getFloat32(),v$Pn.transform.x=v$y.getFloat32(),v$Pn.transform.y=v$y.getFloat32(),v$bn.displayArr.push(v$Pn),v$Pn.width=v$y.getFloat32(),v$Pn.height=v$y.getFloat32(),v$Pn.type=v$y.getUint8(),v$Pn.verLen=v$y.getUint16(),0<(v$Z=v$y.getUint16()))for(v$Pn.bones=[],v$x=0;v$x<v$Z;v$x++){var v$Zn=v$y.getUint16();v$Pn.bones.push(v$Zn)}if(0<(v$kn=v$y.getUint16()))for(v$Pn.uvs=[],v$x=0;v$x<v$kn;v$x++)v$Pn.uvs.push(v$y.getFloat32());if(0<(v$Nn=v$y.getUint16()))for(v$Pn.weights=[],v$x=0;v$x<v$Nn;v$x++)v$Pn.weights.push(v$y.getFloat32());if(0<(v$_n=v$y.getUint16()))for(v$Pn.triangles=[],v$x=0;v$x<v$_n;v$x++)v$Pn.triangles.push(v$y.getUint16());if(0<(v$$n=v$y.getUint16()))for(v$Pn.vertices=[],v$x=0;v$x<v$$n;v$x++)v$Pn.vertices.push(v$y.getFloat32());if(0<(v$Mn=v$y.getUint16()))for(v$Pn.lengths=[],v$x=0;v$x<v$Mn;v$x++)v$Pn.lengths.push(v$y.getFloat32())}v$mn.slotArr.push(v$bn)}this.skinDic[v$mn.name]=v$mn,this.skinDataArray.push(v$mn)}1==v$y.getUint8()?(this.yReverseMatrix=new v$cn(1,0,0,-1,0,0),v$M&&v$M.setTempMatrix(this.yReverseMatrix)):v$M&&v$M.setTempMatrix(new v$cn),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},v$n.getTexture=function(v$n){var v$a=this.subTextureDic[v$n];return v$a||(v$a=this.subTextureDic[v$n.substr(0,v$n.length-1)]),null==v$a?this._mainTexture:v$a},v$n.showSkinByIndex=function(v$n,v$a,v$U){if(void 0===v$U&&(v$U=!0),v$a<0&&v$a>=this.skinDataArray.length)return!1;var v$x,v$D,v$p=0,v$Q=0,v$V=this.skinDataArray[v$a];if(v$V){for(v$p=0,v$Q=v$V.slotArr.length;v$p<v$Q;v$p++)(v$D=v$V.slotArr[v$p])&&(v$x=v$n[v$D.name])&&(v$x.showSlotData(v$D,v$U),v$U&&"undefined"!=v$x.attachmentName&&"null"!=v$x.attachmentName?v$x.showDisplayByName(v$x.attachmentName):v$x.showDisplayByIndex(v$x.displayIndex));return!0}return!1},v$n.getSkinIndexByName=function(v$n){for(var v$a=0,v$U=this.skinDataArray.length;v$a<v$U;v$a++)if(this.skinDataArray[v$a].name==v$n)return v$a;return-1},v$n.getGrahicsDataWithCache=function(v$n,v$a){return this._graphicsCache[v$n][v$a]},v$n.setGrahicsDataWithCache=function(v$n,v$a,v$U){this._graphicsCache[v$n][v$a]=v$U},v$n.destroy=function(){var v$n;for(var v$a in this._isDestroyed=!0,this.subTextureDic)(v$n=this.subTextureDic[v$a])&&v$n.destroy();for(v$a in this._textureDic)(v$n=this._textureDic[v$a])&&v$n.destroy();for(var v$U=0,v$x=this.skinSlotDisplayDataArr.length;v$U<v$x;v$U++)this.skinSlotDisplayDataArr[v$U].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete v$D.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},v$n.getAniNameByIndex=function(v$n){var v$a=this.getAnimation(v$n);return v$a?v$a.name:null},v$p(0,v$n,"rate",function(){return this._rate},function(v$n){this._rate=v$n}),v$D.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",v$D.TEMPLET_DICTIONARY=null,v$D}(v$v)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(v$n,v$a){"use strict";for(var v$U in Object.defineProperty(v$a,"__esModule",{value:!0}),Laya){var v$x=Laya[v$U];v$x&&v$x.__isclass&&(v$a[v$U]=v$x)}});