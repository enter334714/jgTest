var _=wx.y$;window.pjsdk={initSdk:function(n,o,d,i){window.pjsdk.channelGameId=n,window.pjsdk.channel=o,window.pjsdk.appVersion=d,window.pjsdk.platformType=i,window.pjsdk.sdkVersion="PjMiniGameSdk1.1",window.pjsdk.publicParam={},window.pjsdk.publicParam.channelGameId=window.pjsdk.channelGameId,window.pjsdk.publicParam.channel=window.pjsdk.channel,window.pjsdk.publicParam.appVersion=window.pjsdk.appVersion,window.pjsdk.publicParam.platformType=window.pjsdk.platformType,window.pjsdk.publicParam.sdkVersion=window.pjsdk.sdkVersion,window.pjsdk.publicParam.udid=window.pjsdk.getUdid(),window.pjsdk.publicParam.imei=window.pjsdk.getUdid(),window.pjsdk.apiHost="https://h5.paojiao.cn",o=(n=wx.getLaunchOptionsSync()).query,console.log("\u5c0f\u6e38\u620f obj \u53c2\u6570:",JSON.stringify(n)),console.log("\u5c0f\u6e38\u620f query \u53c2\u6570:",JSON.stringify(o)),d=window.pjsdk.getItem(window.pjsdk.channelGameId+"_channel"),console.log("\u5c0f\u6e38\u620f localPjChannel \u53c2\u6570:"+d),null==d||""==d?null!=o.pjChannel&&""!=o.pjChannel&&(window.pjsdk.channel=o.pjChannel,window.pjsdk.setItem(window.pjsdk.channelGameId+"_channel",o.pjChannel)):window.pjsdk.channel=d,window.pjsdk.publicParam.channel=window.pjsdk.channel,i=window.pjsdk.getItem(window.pjsdk.channelGameId+"_gdt_vid"),console.log("\u5c0f\u6e38\u620f loclaGdtVid \u53c2\u6570:"+i),null==i||""==i?null!=o.gdt_vid&&""!=o.gdt_vid&&(window.pjsdk.setItem(window.pjsdk.channelGameId+"_gdt_vid",o.gdt_vid),window.pjsdk.publicParam.gdt_vid=o.gdt_vid):window.pjsdk.publicParam.gdt_vid=i,n=window.pjsdk.getItem(window.pjsdk.channelGameId+"_pjClickId"),console.log("\u5c0f\u6e38\u620f localPjClickId \u53c2\u6570:"+n),null==n||""==n?null!=o.pjClickId&&""!=o.pjClickId&&(window.pjsdk.setItem(window.pjsdk.channelGameId+"_pjClickId",o.pjClickId),window.pjsdk.publicParam.pjClickId=o.pjClickId):window.pjsdk.publicParam.pjClickId=n,console.info("\u5c0f\u6e38\u620f\u516c\u5171\u53c2\u6570:"+JSON.stringify(window.pjsdk.publicParam)),window.pjsdk.api(window.pjsdk.publicParam,"/api/initWxGame",function(n){console.info("\u5c0f\u6e38\u620f\u521d\u59cb\u5316\u8fd4\u56de:"+JSON.stringify(n)),1==n.code?(window.pjsdk.imageUrl=n.data.imgUrl,window.pjsdk.ucAppid=n.data.ucAppid,window.pjsdk.logoUrl=n.data.logoUrl,wx.showShareMenu(),wx.onShareAppMessage(function(){return{imageUrlId:n.data.imgId,imageUrl:n.data.imgUrl}}),console.info("\u5c0f\u6e38\u620f\u521d\u59cb\u5316\u6210\u529f")):console.info("\u5c0f\u6e38\u620f\u521d\u59cb\u5316\u5931\u8d25")})},login:function(d){var i=window.pjsdk.platformType;console.log("PJ:SDK\u5f00\u59cb\u767b\u5f55:"+i),wx.login({success(n){var o;n.code?(console.log("PJ:"+i+"\u767b\u5f55\u6210\u529f:"+JSON.stringify(n)),(o=window.pjsdk.publicParam).sdkToken=encodeURIComponent(JSON.stringify({js_code:n.code})),window.pjsdk.getToken(o,function(n){if(1!=n.code)return console.log("PJ:"+i+"\u767b\u5f55\u5931\u8d25:"+n.msg),void wx.showToast({title:"\u767b\u5f55\u5931\u8d25:"+n.msg});window.pjsdk.uid=n.data.userInfo.uid,window.pjsdk.token=n.data.userInfo.token,window.pjsdk.suid=n.data.userInfo.suid,d(n)})):wx.showToast({title:"\u767b\u5f55\u5931\u8d25:"+n.errMsg})}})},pay:function(n){var o=window.pjsdk.publicParam;for(var d in n)o[d]=n[d];o.uid=window.pjsdk.uid,o.sdkUserId=window.pjsdk.sdkToken,console.log("PJ:\u62c9\u8d77\u652f\u4ed8:"+JSON.stringify(o)),window.pjsdk.api(o,"/api/getOrderNo",function(d){var n;console.info("getOrderNo\u8fd4\u56de\uff1a"+JSON.stringify(d)),1==d.code?2==d.data.orderInfo.ptype?((n=window.pjsdk.publicParam).orderPirce=d.data.orderInfo.money,n.uid=d.data.orderInfo.uid,n.orderNumber=d.data.orderInfo.orderNumber,console.info("wx\u62c9\u8d77\u652f\u4ed8\u8ba2\u5355:"+JSON.stringify(n)),window.pjsdk.api(n,"/pay/getWxPayUrl",function(n){console.info("wx\u652f\u4ed8\u62c9\u8d77\u8fd4\u56de\uff1a"+JSON.stringify(n));var o=n.data.title;var d=n.data.content;const i=n.data.wxPayUrl;wx.showModal({title:o,showCancel:!1,content:d,confirmText:"\u524d\u5f80\u7c98\u8d34",success:n=>{var o;n.confirm?(wx.setClipboardData({data:i,success:n=>{wx.showToast({title:"\u5185\u5bb9\u5df2\u590d\u5236"})}}),o={showMessageCard:!0,sendMessageImg:window.pjsdk.imageUrl},wx.openCustomerServiceConversation(o)):n.cancel&&console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88")}})})):(n=d.data.envStats,wx.requestMidasPayment({mode:"game",env:0==n?1:0,offerId:d.data.extension,currencyType:"CNY",platform:"android",zoneId:"1",buyQuantity:d.data.orderInfo.money,success:function(){var n=window.pjsdk.publicParam;n.openid=window.pjsdk.suid,n.amt=d.data.orderInfo.money,n.bill_no=d.data.orderInfo.orderNumber,console.info("\u8bf7\u6c42payCallBack\u53c2\u6570\uff1a"+JSON.stringify(n));var o="/api/payCallBack/"+d.data.orderInfo.channelGameId;window.pjsdk.api(n,o,function(n){console.info("wx\u652f\u4ed8\u56de\u8c03\u8fd4\u56de\uff1a"+JSON.stringify(n)),"success"==n.code?wx.showToast({title:"\u652f\u4ed8\u6210\u529f",icon:"success"}):wx.showToast({title:"\u652f\u4ed8\u5931\u8d25",icon:"error"})})},fail:function(n){console.info("wx\u62c9\u8d77\u652f\u4ed8\u8fd4\u56de\u53c2\u6570:"+JSON.stringify(n)),wx.showToast({title:n.errMsg,icon:"error"})}})):console.log("PJ:\u751f\u6210\u8ba2\u5355\u5931\u8d25:"+d.msg)})},reportRoleinfo:function(n){var o=window.pjsdk.publicParam;for(var d in o.uid=window.pjsdk.uid,o.token=window.pjsdk.token,n.sdkVersion=window.pjsdk.sdkVersion,n.openid=window.pjsdk.suid,n)o[d]=n[d];console.log("PJ:\u4e0a\u62a5\u89d2\u8272\u4fe1\u606f:"+JSON.stringify(o)),window.pjsdk.api(o,"/api/reportRoleInfo")},getToken:function(n,o){n.channelGameId=window.pjsdk.channelGameId,n.appVersion=window.pjsdk.appVersion,n.channel=window.pjsdk.channel,n.sdkVersion=window.pjsdk.sdkVersion,console.log("PJ:token\u9a8c\u8bc1:"+JSON.stringify(n)),window.pjsdk.api(n,"/api/getToken",o)},msgSecCheck:function(n,o){n={sdkVersion:window.pjsdk.sdkVersion,channel:window.pjsdk.channel,channelGameId:window.pjsdk.channelGameId,uid:window.pjsdk.uid,content:n,appVersion:window.pjsdk.appVersion,openid:window.pjsdk.suid,platformType:window.pjsdk.platformType},window.pjsdk.api(n,"/api/msgSecCheck",function(n){console.info("\u5c0f\u6e38\u620f\u6587\u5b57\u5185\u5bb9\u6821\u9a8c\u7ed3\u679c:"+JSON.stringify(n)),n.code,o(n)})},initFloat:function(n){try{window.Laya?window.pjsdk.initLayaFloat(n):(window.egret,console.log("\u6682\u4e0d\u652f\u6301\u5f53\u524d\u5f15\u64ce\u60ac\u6d6e\u7403"))}catch(n){console.log(n)}},initLayaFloat:function(n){if(console.log("\u521d\u59cb\u5316laya\u60ac\u6d6e\u7403"),window.pjsdk.logoUrl){var i=new Laya.Sprite;var e=90;var a=new Laya.Rectangle(0,0,n.width,n.height);i.loadImage(window.pjsdk.logoUrl,0,0,0,0,Laya.Handler.create(this,function(){i.zOder=999999,i.pos(0,100),n.addChild(i),hideFloat(-(e=i.width)/2,100)}));let o=!1;let d=null;function hideFloat(n,o){setTimeout(function(){i.alpha=.5,updateFloat(n,o)},1500)}function updateFloat(n,o){i.pos(n,o)}i.on(Laya.Event.MOUSE_DOWN,this,function(n){i.alpha=1,updateFloat(0,i.y),i.startDrag(a),d=n.target,o=!1}),i.on(Laya.Event.MOUSE_MOVE,this,function(n){i.alpha=1,d&&(o=!0)}),i.on(Laya.Event.MOUSE_UP,this,function(n){updateFloat(0,i.y),hideFloat(-e/2,i.y),o||(d=null,window.pjsdk.openUc())})}},openUc:function(){wx.navigateToMiniProgram({appId:window.pjsdk.ucAppid,path:"pages/login/login?fromChannel="+window.pjsdk.channel+"&fromGameId="+window.pjsdk.channelGameId+"&fromUid="+window.pjsdk.uid+"&fromOpenid="+window.pjsdk.suid+"&fromToken="+window.pjsdk.token,success(n){},fail(n){},complete(n){}})},openZd:function(){wx.navigateToMiniProgram({appId:window.pjsdk.ucAppid,path:"pages/login/zd?fromChannel="+window.pjsdk.channel+"&fromGameId="+window.pjsdk.channelGameId+"&fromUid="+window.pjsdk.uid+"&fromOpenid="+window.pjsdk.suid+"&fromToken="+window.pjsdk.token,success(n){},fail(n){},complete(n){}})},api:function(n,o,d){o=window.pjsdk.buildURL(window.pjsdk.apiHost+o,n),window.pjsdk.httpGet(o,function(n){d&&d(n)})},getUdid:function(){var n=window.pjsdk.getItem("udid");return null!=n&&""!=n?n:window.pjsdk.getItem("udid")||(n=window.pjsdk.genUdid(),window.pjsdk.setItem("udid",n),n)},s4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},genUdid:function(){return window.pjsdk.s4()+window.pjsdk.s4()+window.pjsdk.s4()+window.pjsdk.s4()+window.pjsdk.s4()+window.pjsdk.s4()+window.pjsdk.s4()+window.pjsdk.s4()},getItem:function(n){return window.localStorage?window.localStorage.getItem("pj_"+n):null!=(n=document.cookie.match(new RegExp("(^| )pj_"+n+"=([^;]*)(;|$)")))?unescape(n[2]):null},setItem:function(n,o){if(window.localStorage)try{window.localStorage.setItem("pj_"+n,o)}catch(n){}else{var d=new Date;d.setTime(d.getTime()+31536e6),document.cookie="pj_"+n+"="+escape(o)+";expires="+d.toGMTString()}},buildURL:function(n,o){if(n){var d={};var i=(n=n.split("#"))[0].split("?")[1];var e=n[0].split("?")[0]+"?";if(i)for(var a in i=i.split("&")){var s=i[a].split("=");d[s[0]]=s[1]}for(var a in o)void 0!==o[a]&&null!==o[a]&&(d[a]=o[a]);var t=!0;for(var a in d)e+=(t?"":"&")+a+"="+(d[a]||""),t=!1;return e+(n[1]?"#"+n[1]:"")}return""},httpGet:function(n,o){var d=new XMLHttpRequest;d.open("GET",n),d.onreadystatechange=function(){var n;4===d.readyState&&200===d.status&&(n=d.responseText,console.log(n),o&&o(JSON.parse(n))),d.onerror=function(n){console.log(n)},d.ontimeout=function(n){console.log(n)}},d.send(null)}};