var B=wx.$z;import SDKyyw from"./zzsshz";var config={game_id:B[441805],game_pkg:B[441806],partner_id:B[441807],game_ver:B[441808],is_auth:!1,from:null,tmpId:{}};window.config=config;var partner_config={app_id:1000220,app_key:B[441809]};var partner_swtich_info=null;var z0RJD0Y=z0RDY0J();var HOST=B[441810];var z0RJDY0=null;var z0RD0YJ=null;var z0RD0JY=null;var partner_user_info=null;function z0RDY0J(){var o={};return{order_data:{},init:function(e,t){e=e&&e.game_ver?e.game_ver:0;console.log(B[441811]);var r=this;var n;n=wx.getStorageSync(B[441812])?0:(n=r.uuid(16,32),wx.setStorageSync(B[441812],n),1),wx.getStorageSync(B[441813])||(o=r.uuid(16,32),wx.setStorageSync(B[441813],o));var o=wx.getLaunchOptionsSync();var a=o.scene||"";n&&o.query&&o.query.ad_code&&wx.setStorageSync(B[441814],o.query.ad_code),r.log(B[441815],{install:n,scene:a}),wx.showShareMenu();r=o.query&&o.query.invite?o.query.invite:"";o=o.query&&o.query.invite_type?o.query.invite_type:"";r&&(z0RD0YJ={invite:r,invite_type:o,is_new:n,scene:a}),e&&this.checkGameVersion(e,function(e){t&&t(e)})},login:function(e,t){console.log(B[441816]);var r=this;o[B[440140]]=typeof t==B[441017]?t:null,SDKyyw.initLoginCallback=e=>{if(console.log(B[441817]+JSON.stringify(e)),0==e.status)return console.log(B[441818]),void t(1,{errMsg:B[441819]});partner_swtich_info={showSwitchOn:e.data.showSwitchOn,switchApp:e.data.switchApp,switchContent:e.data.switchContent},partner_user_info=e.data,r.do_login(partner_user_info)},SDKyyw.init(partner_config.app_id,partner_config.app_key)},do_login:function(e){var r=this;var t=r.getPublicData();if(t[B[441820]]=e?e.nick_name:"",t[B[441821]]=e?e.head_img:"",z0RD0YJ&&typeof z0RD0YJ==B[440917])for(var n in z0RD0YJ)t[n]=z0RD0YJ[n];t[B[441822]]=e.uid,wx.request({url:B[441823]+HOST+B[441824],method:B[440105],dataType:B[441262],header:{"content-type":B[440310]},data:t,success:function(e){if(console.log(B[441825]+JSON.stringify(e)),200==e.statusCode){e=e.data;if(e.state){var t={userid:e.data.user_id,account:e.data.nick_name,token:e.data.token,invite_uid:e.data.invite_uid||"",invite_nickname:e.data.invite_nickname||"",invite_head_img:e.data.invite_head_img||"",head_img:e.data.head_img||"",is_client:e.data.is_client||"0",ios_pay:e.data.ios_pay||"0"};try{wx.setStorageSync(B[441826],e.data.sdk_token),wx.setStorageSync(B[441827],e.data.user_id),wx.setStorageSync(B[441828],e.data.username),e.data.ext&&wx.setStorageSync(B[441829],e.data.ext)}catch(e){}o[B[440140]]&&o[B[440140]](0,t)}else o[B[440140]]&&o[B[440140]](1,{errMsg:e.msg});r.getShareInfo(B[441830],function(e){console.log(B[441831]),wx.onShareAppMessage(function(){return r.logStartShare(B[441830]),{title:e.title,imageUrl:e.img,query:e.query}})})}else o[B[440140]]&&o[B[440140]](1,{errMsg:B[441832]})}})},share:function(e){o[B[440257]]=typeof callback==B[441017]?callback:null;var t=e.type||B[440257];console.log(B[441833]+t);var r=this;this.getShareInfo(t,function(e){r.logStartShare(t),wx.shareAppMessage({title:e.title,imageUrl:e.img,query:e.query})})},logStartShare:function(e){var t=wx.getStorageSync(B[441826]);wx.request({url:B[441823]+HOST+B[441834],method:B[440105],dataType:B[441262],header:{"content-type":B[440310]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:t,server_id:z0RJDY0?z0RJDY0.server_id:"",role_id:z0RJDY0?z0RJDY0.role_id:"",type:e},success:function(e){}})},openService:function(){wx.openCustomerServiceConversation()},checkGameVersion:function(e,r){console.log(B[441835]);wx.getStorageSync(B[441826]);wx.request({url:B[441823]+HOST+B[441836],method:B[440105],dataType:B[441262],header:{"content-type":B[440310]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,game_ver:e},success:function(e){var t;console.log(B[441837]),console.log(e),200==e.statusCode&&(t=e.data).state?r&&r(t.data):r&&r({develop:0})}})},getShareInfo:function(e,t){console.log(B[441838]);var r=wx.getStorageSync(B[441826]);wx.request({url:B[441823]+HOST+B[441839],method:B[440105],dataType:B[441262],header:{"content-type":B[440310]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:r,type:e,server_id:z0RJDY0?z0RJDY0.server_id:"",role_id:z0RJDY0?z0RJDY0.role_id:"",no_log:1},success:function(e){console.log(B[441840]),console.log(e),200==e.statusCode?(e=e.data).state?t&&t(e.data):o[B[440257]]&&o[B[440257]](1,{errMsg:B[441841]+e.msg}):o[B[440257]]&&o[B[440257]](1,{errMsg:B[441842]})}})},updateShare:function(e,t,r,n,o,a){console.log(B[441843]);var i=wx.getStorageSync(B[441826]);wx.request({url:B[441823]+HOST+B[441844],method:B[440105],dataType:B[441262],header:{"content-type":B[440310]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:i,invite:e,invite_type:t,is_new:r,role_id:n,sever_id:o,scene:a},success:function(e){console.log(B[441845]),console.log(e)}})},pay:function(e,t){var r=this;wx.checkSession({success:function(){r.startPay(e,t)},fail:function(){console.log(B[441846]),r.login({},function(){r.startPay(e,t)})}})},startPay:function(e,t){console.log(B[441847]),console.log(e);o[B[440239]]=typeof t==B[441017]?t:null;t=wx.getStorageSync(B[441826]);var r=wx.getStorageSync(B[441829]);var n;t||r?(n=wx.getSystemInfoSync(),e={cpbill:e.cpbill,productid:e.productid,productname:e.productname,productdesc:e.productdesc,serverid:e.serverid,servername:e.servername,roleid:e.roleid,rolename:e.rolename,rolelevel:e.rolelevel,price:e.price,extension:e.extension,sdk_token:t,session_key:r,platform:n.platform},this.order_data=e,(t=this.getPublicData())[B[441849]]=JSON.stringify(e),wx.request({url:B[441823]+HOST+B[441850],method:B[440105],dataType:B[441262],header:{"content-type":B[440310]},data:t,success:function(t){if(console.log(B[441851]+JSON.stringify(t)),200==t.statusCode){t=t.data;if(t.state){SDKyyw.onPayCallback=e=>{};let e={};e.serverId=t.data.pay_data.serverId,e.serverName=t.data.pay_data.serverName,e.roleId=t.data.pay_data.roleId,e.roleName=t.data.pay_data.roleName,e.roleLevel=t.data.pay_data.roleLevel,e.gameOrderid=t.data.pay_data.orderId,e.pext=t.data.pay_data.orderId,e.money=t.data.pay_data.amount,e.productName=t.data.pay_data.productName,e.productId=t.data.pay_data.productId,console.log(B[441852]+JSON.stringify(e)),SDKyyw.pay(e)}else o[B[440239]]&&o[B[440239]](1,{errMsg:t.msg})}else o[B[440140]]&&o[B[440140]](1,{errMsg:B[441832]})}})):o[B[440239]]&&o[B[440239]](1,{errMsg:B[441848]})},logCreateRole:function(e){var t=wx.getStorageSync(B[441827]);var r=wx.getStorageSync(B[441828]);var n={};n[B[441853]]=t,n[B[441854]]=r,n[B[441855]]=e.roleid,n[B[441856]]=e.rolelevel,n[B[441857]]=e.rolename,n[B[440088]]=e.serverid,e.roleid&&e.serverid&&(z0RJDY0={role_id:e.roleid,server_id:e.serverid}),this.log(B[440497],n);let o={};o.type=2,o.roleId=e.roleid,o.roleName=e.rolename,o.serverId=e.serverid,SDKyyw.pushData(o)},logEnterGame:function(e){var t=wx.getStorageSync(B[441827]);var r=wx.getStorageSync(B[441828]);var n={};n[B[441853]]=t,n[B[441854]]=r,n[B[441855]]=e.roleid,n[B[441856]]=e.rolelevel,n[B[441857]]=e.rolename,n[B[440088]]=e.serverid,e.roleid&&e.serverid&&(z0RJDY0={role_id:e.roleid,server_id:e.serverid}),this.log(B[441858],n),z0RD0YJ&&this.updateShare(z0RD0YJ.invite,z0RD0YJ.invite_type,z0RD0YJ.is_new,e.roleid,e.serverid,z0RD0YJ.scene);let o={};o.type=1,o.roleId=e.roleid,o.roleName=e.rolename,o.serverId=e.serverid,SDKyyw.pushData(o);let a={};a.type=5,a.roleId=e.roleid,a.roleName=e.rolename,a.serverId=e.serverid,SDKyyw.pushData(a)},logRoleUpLevel:function(e){var t=wx.getStorageSync(B[441827]);var r=wx.getStorageSync(B[441828]);var n={};n[B[441853]]=t,n[B[441854]]=r,n[B[441855]]=e.roleid,n[B[441856]]=e.rolelevel,n[B[441857]]=e.rolename,n[B[440088]]=e.serverid,e.roleid&&e.serverid&&(z0RJDY0={role_id:e.roleid,server_id:e.serverid}),this.log(B[441859],n);let o={};o.type=4,o.roleId=e.roleid,o.roleName=e.rolename,o.serverId=e.serverid,o.level=e.rolelevel,SDKyyw.pushData(o)},switchEnv:function(e){e(partner_swtich_info)},switchGame:function(t){SDKyyw.cutGameCallback=e=>{t(e)},1==partner_swtich_info.showSwitchOn?SDKyyw.cutGame():t({status:0,msg:B[441860]})},uuid:function(e,t){var r=B[441861].split("");var n,o=[];var a;if(e=e||r.length,t)for(n=0;n<t;n++)o[n]=r[0|Math.random()*e];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(a=0|16*Math.random(),o[n]=r[19==n?3&a|8:a]);return o.join("")},getPublicData:function(){var e=wx.getSystemInfoSync();var t=wx.getStorageSync(B[441812]);var r=wx.getStorageSync(B[441813]);var n=wx.getStorageSync(B[441814]);return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id,is_from_min:1,ad_code:n,uuid:t,idfv:r,dname:e.model,mac:B[441862],net_type:0==e.wifiSignal?"4G":B[441863],os_ver:e.system,sdk_ver:e.version,game_ver:config.game_ver,device:e.platform==B[440467]?1:2}},log:function(e,t){var r=this.getPublicData();for(var n in t)r[n]=t[n];console.log(B[441864]+e),console.log(r),wx.request({url:B[441823]+HOST+B[441865]+e+B[441866]+encodeURIComponent(JSON.stringify(r))})},getDate:function(){var e=new Date;return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},downloadClient:function(){wx.openCustomerServiceConversation()},getLaunchOptionsSync:function(e){var t=SDKyyw.getLaunchOptionsSync();e(t),console.log(B[441867]+JSON.stringify(t))},msgCheck:function(e,r){SDKyyw.msgSecCheck(e,function(e){console.log(B[441868]+JSON.stringify(e));let t={data:{}};1==e.status?(t.statusCode=200,t.data.state=1):(t.statusCode=0,t.data.state=0),r&&r(t)})},sendCode:function(e,t){console.log(B[441869],e.phone),SDKyyw.getCaptchaCallback=e=>{console.log(e),1==e.status?t&&t(0,e):t&&t(1,e)},SDKyyw.getCaptcha({telephone:e.phone})},bindPhone:function(e,t){console.log(B[441870],e.phone,e.code),SDKyyw.bindTelephoneCallback=e=>{console.log(B[441871],e),1==e.status?t&&t(0,e):t&&t(1,e)},SDKyyw.bindTelephone({telephone:e.phone,captcha:e.code})}}}function run(e,t,r){e in z0RJD0Y&&z0RJD0Y[e](t,r)}exports.init=function(e,t){run(B[440118],e,t)},exports.login=function(e){run(B[440140],"",e)},exports.login=function(e){run(B[440140],"",e)},exports.pay=function(e,t){run(B[440239],e,t)},exports.openService=function(){run(B[440258])},exports.logCreateRole=function(e,t,r,n,o){run(B[440252],{serverid:e,servername:t,roleid:r,rolename:n,rolelevel:o})},exports.logEnterGame=function(e,t,r,n,o){run(B[440254],{serverid:e,servername:t,roleid:r,rolename:n,rolelevel:o})},exports.logRoleUpLevel=function(e,t,r,n,o){run(B[440256],{serverid:e,servername:t,roleid:r,rolename:n,rolelevel:o})},exports.share=function(e){run(B[440257],{type:e})},exports.downloadClient=function(){run(B[441872])},exports.getConfig=function(){return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id}},exports.getLaunchOptionsSync=function(e){run(B[440365],e)},exports.msgCheck=function(e,t){run(B[440069],e,t)},exports.switchEnv=function(e){run(B[440202],e)},exports.switchGame=function(e){run(B[440217],e)},exports.sendCode=function(e,t){run(B[441873],e,t)},exports.bindPhone=function(e,t){run(B[441874],e,t)};