var J=wx.h$;import sdk6kw from"../utils/sdkFrom6kw.com-v1.0.9";var config={game_id:J[971],game_pkg:J[972],partner_label:J[973],partner_id:J[974],game_ver:'55.0.1',is_auth:!0};window.config=config;var J1GQ45J=J1G4J5Q();var HOST=J[976];var J1GQ4J5=null;var J1G45JQ=null;function J1G4J5Q(){var C$n={};return{order_data:{},init:function(C$e,C$t){C$e=C$e&&C$e.game_ver?C$e.game_ver:0;console.log(J[977]);var C$r;C$r=wx.getStorageSync(J[978])?0:(C$r=this.uuid(16,32),wx.setStorageSync(J[978],C$r),1),wx.getStorageSync(J[979])||(C$a=this.uuid(16,32),wx.setStorageSync(J[979],C$a));var C$a=wx.getLaunchOptionsSync();var C$o=C$a.scene||"";C$r&&C$a.query&&C$a.query.ad_code&&wx.setStorageSync(J[980],C$a.query.ad_code),this.log(J[981],{install:C$r,scene:C$o}),sdk6kw.init(function(C$e,C$t){console.log(J[982],C$e,C$t)});var C$n=C$a.query&&C$a.query.invite?C$a.query.invite:"";C$a=C$a.query&&C$a.query.invite_type?C$a.query.invite_type:"";C$n&&(J1G45JQ={invite:C$n,invite_type:C$a,is_new:C$r,scene:C$o}),C$e&&this.checkGameVersion(C$e,function(C$e){C$t&&C$t(C$e)})},login:function(C$e,C$r){console.log(J[983]);var C$a=this;C$n[J[300]]=typeof C$r==J[984]?C$r:null,sdk6kw.login(function(C$e,C$t){console.log(J[985]),1===C$e?C$a.do_login(C$t):C$r(1,{errMsg:J[986]})})},do_login:function(C$e){var C$a=this;var C$t=C$a.getPublicData();if(C$t[J[325]]=C$e.userId,C$t[J[987]]=C$e.nickName,C$t[J[302]]=C$e.token,C$t[J[988]]=1,J1G45JQ&&typeof J1G45JQ==J[989])for(var C$r in J1G45JQ)C$t[C$r]=J1G45JQ[C$r];wx.request({url:J[990]+HOST+J[991],method:J[263],dataType:J[992],header:{"content-type":J[460]},data:C$t,success:function(C$e){if(console.log(J[993]),console.log(C$e),200===C$e.statusCode){C$e=C$e.data;if(C$e.state){try{wx.setStorageSync(J[994],C$e.data.sdk_token),wx.setStorageSync(J[995],C$e.data.user_id),wx.setStorageSync(J[996],C$e.data.username),C$e.data.ext&&wx.setStorageSync(J[997],C$e.data.ext)}catch(C$e){}var C$t={userid:C$e.data.user_id,account:C$e.data.nick_name,token:C$e.data.token,invite_uid:C$e.data.invite_uid||"",invite_nickname:C$e.data.invite_nickname||"",invite_head_img:C$e.data.invite_head_img||"",head_img:C$e.data.head_img||"",is_client:C$e.data.is_client||"0",ios_pay:C$e.data.ios_pay||"0"};C$n[J[300]]&&C$n[J[300]](0,C$t)}else C$n[J[300]]&&C$n[J[300]](1,{errMsg:C$e.msg});C$a.getShareInfo(J[998],function(C$r){console.log(J[999],C$r),C$a.logStartShare(J[998]),sdk6kw.shareLog(function(C$e,C$t){wx.onShareAppMessage(function(){return{title:C$r.title,imageUrl:C$r.img,query:C$r.query+"&"+C$t.query}})})})}else C$n[J[300]]&&C$n[J[300]](1,{errMsg:J[1e3]})}})},share:function(C$e){C$n[J[413]]=typeof callback==J[984]?callback:null;var C$t=C$e.type||J[413];console.log(J[1001]+C$t);var C$r=this;this.getShareInfo(C$t,function(C$e){C$r.logStartShare(C$t);C$e={title:C$e.title,imageUrl:C$e.img,query:C$e.query};sdk6kw.share(C$e,function(C$e,C$t){console.log(J[1002],C$e,C$t)})})},logStartShare:function(C$e){var C$t=wx.getStorageSync(J[994]);wx.request({url:J[990]+HOST+J[1003],method:J[263],dataType:J[992],header:{"content-type":J[460]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:C$t,server_id:J1GQ4J5?J1GQ4J5.server_id:"",role_id:J1GQ4J5?J1GQ4J5.role_id:"",type:C$e},success:function(C$e){}})},openService:function(){wx.openCustomerServiceConversation()},checkGameVersion:function(C$e,C$r){console.log(J[1004]);wx.getStorageSync(J[994]);wx.request({url:J[990]+HOST+J[1005],method:J[263],dataType:J[992],header:{"content-type":J[460]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,game_ver:C$e},success:function(C$e){var C$t;console.log(J[1006]),console.log(C$e),200==C$e.statusCode&&(C$t=C$e.data).state?C$r&&C$r(C$t.data):C$r&&C$r({develop:0})}})},getShareInfo:function(C$e,C$t){console.log(J[1007]);var C$r=wx.getStorageSync(J[994]);wx.request({url:J[990]+HOST+J[1008],method:J[263],dataType:J[992],header:{"content-type":J[460]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:C$r,type:C$e,server_id:J1GQ4J5?J1GQ4J5.server_id:"",role_id:J1GQ4J5?J1GQ4J5.role_id:"",no_log:1},success:function(C$e){console.log(J[1009]),console.log(C$e),200==C$e.statusCode?(C$e=C$e.data).state?C$t&&C$t(C$e.data):C$n[J[413]]&&C$n[J[413]](1,{errMsg:J[1010]+C$e.msg}):C$n[J[413]]&&C$n[J[413]](1,{errMsg:J[1011]})}})},updateShare:function(C$e,C$t,C$r,C$a,C$o,C$n){console.log(J[1012]);var C$i=wx.getStorageSync(J[994]);wx.request({url:J[990]+HOST+J[1013],method:J[263],dataType:J[992],header:{"content-type":J[460]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:C$i,invite:C$e,invite_type:C$t,is_new:C$r,role_id:C$a,sever_id:C$o,scene:C$n},success:function(C$e){console.log(J[1014]),console.log(C$e)}})},msgCheck:function(C$e,C$a){console.log(J[1015]);wx.getStorageSync(J[994]);sdk6kw.msgSecCheck({content:C$e,callback:(C$e,C$t)=>{console.log(J[1016],C$e);let C$r={data:{}};C$t.data.result.suggest==J[1017]?(C$r.statusCode=200,C$r.data.state=1):(C$r.statusCode=200,C$r.data.state=0),C$a&&C$a(C$r)}})},pay:function(C$e,C$t){this.startPay(C$e,C$t)},startPay:function(C$e,C$t){console.log(J[1018]),console.log(C$e);var C$a=this;C$n[J[389]]=typeof C$t==J[984]?C$t:null;C$t=wx.getStorageSync(J[994]);var C$r=wx.getStorageSync(J[997]);var C$o;C$t||C$r?(C$o=wx.getSystemInfoSync(),C$e={cpbill:C$e.cpbill,productid:C$e.productid,productname:C$e.productname,productdesc:C$e.productdesc,serverid:C$e.serverid,servername:C$e.servername,roleid:C$e.roleid,rolename:C$e.rolename,rolelevel:C$e.rolelevel,price:C$e.price,extension:C$e.extension,sdk_token:C$t,session_key:C$r,platform:C$o.platform},C$a.order_data=C$e,(C$t=C$a.getPublicData())[J[1020]]=JSON.stringify(C$e),C$t[J[988]]=1,wx.request({url:J[990]+HOST+J[1021],method:J[263],dataType:J[992],header:{"content-type":J[460]},data:C$t,success:function(C$e){var C$r;console.log(J[1022]),console.log(C$e),200==C$e.statusCode?(C$r=C$e.data).state&&C$r.data.pay_data?(console.log(J[1023]+JSON.stringify(C$r.data.pay_data)),C$e={cpOrder:C$r.data.pay_data.cpOrder,serverId:C$r.data.pay_data.serverId,serverName:C$r.data.pay_data.serverName,productId:C$r.data.pay_data.productId,productName:C$r.data.pay_data.productName,roleId:C$r.data.pay_data.roleId,roleName:C$r.data.pay_data.roleName,roleLevel:C$r.data.pay_data.roleLevel,notifyUrl:C$r.data.pay_data.notifyUrl,price:C$r.data.pay_data.price,extension:C$r.data.pay_data.extension},""==C$r.data.ext?sdk6kw.pay(C$e,function(C$e,C$t){console.log(J[1024],C$e,C$t),0===C$e&&C$n[J[389]]&&C$n[J[389]](1,{errMsg:C$r.errMsg})}):C$a.extDo({ext1:C$r.data.ext,ext2:C$r.data.pay_data})):C$n[J[389]]&&C$n[J[389]](1,{errMsg:C$r.errMsg}):C$n[J[300]]&&C$n[J[300]](1,{errMsg:J[1e3]})}})):C$n[J[389]]&&C$n[J[389]](1,{errMsg:J[1019]})},extDo:function(C$e){wx.navigateToMiniProgram({appId:C$e.ext1,path:J[1025]+C$e.ext2.extension+J[1026]+C$e.ext2.price/100,extraData:{},envVersion:J[1027],success(C$e){}})},logCreateRole:function(C$e){var C$t=wx.getStorageSync(J[995]);var C$r=wx.getStorageSync(J[996]);var C$a={};C$a[J[1028]]=C$t,C$a[J[1029]]=C$r,C$a[J[1030]]=C$e.roleid,C$a[J[1031]]=C$e.rolelevel,C$a[J[1032]]=C$e.rolename,C$a[J[25]]=C$e.serverid,C$e.roleid&&C$e.serverid&&(J1GQ4J5={role_id:C$e.roleid,server_id:C$e.serverid}),this.log(J[556],C$a);C$t={roleId:C$e.roleid,roleName:C$e.rolename,serverName:C$e.servername,serverId:C$e.serverid,roleLevel:C$e.rolelevel,payLevel:0,createTime:Date.parse(new Date)/1e3};sdk6kw.logRole(C$t.createTime,C$t.serverId,C$t.serverName,C$t.roleId,C$t.roleName,C$t.roleLevel,C$t.payLevel)},logEnterGame:function(C$e,C$t){var C$r=wx.getStorageSync(J[995]);var C$a=wx.getStorageSync(J[996]);C$n[J[1033]]=typeof C$t==J[984]?C$t:null,this.upLogAndCheckPay(J[1033],C$e);C$t={};C$t[J[1028]]=C$r,C$t[J[1029]]=C$a,C$t[J[1030]]=C$e.roleid,C$t[J[1031]]=C$e.rolelevel,C$t[J[1032]]=C$e.rolename,C$t[J[25]]=C$e.serverid,C$e.roleid&&C$e.serverid&&(J1GQ4J5={role_id:C$e.roleid,server_id:C$e.serverid}),this.log(J[1033],C$t),J1G45JQ&&this.updateShare(J1G45JQ.invite,J1G45JQ.invite_type,J1G45JQ.is_new,C$e.roleid,C$e.serverid,J1G45JQ.scene)},logRoleUpLevel:function(C$e,C$t){var C$r=wx.getStorageSync(J[995]);var C$a=wx.getStorageSync(J[996]);C$n[J[1034]]=typeof C$t==J[984]?C$t:null,this.log(J[1034],C$e);C$t={};C$t[J[1028]]=C$r,C$t[J[1029]]=C$a,C$t[J[1030]]=C$e.roleid,C$t[J[1031]]=C$e.rolelevel,C$t[J[1032]]=C$e.rolename,C$t[J[25]]=C$e.serverid,C$e.roleid&&C$e.serverid&&(J1GQ4J5={role_id:C$e.roleid,server_id:C$e.serverid}),this.upLogAndCheckPay(J[1034],C$e)},upLogAndCheckPay:function(C$r,C$e){C$e={roleId:C$e.roleid,roleName:C$e.rolename,serverName:C$e.servername,serverId:C$e.serverid,roleLevel:C$e.rolelevel,payLevel:0,createTime:C$e.rolecreatetime};sdk6kw.logRole(C$e.createTime,C$e.serverId,C$e.serverName,C$e.roleId,C$e.roleName,C$e.roleLevel,C$e.payLevel),sdk6kw.getPayState(C$e,function(C$e,C$t){console.log(J[1035],C$t),1!==C$e||1===C$t.switch?C$n[C$r]&&C$n[C$r](0):1===C$t.gamePayLimitSwitch?C$n[C$r]&&C$n[C$r](2):C$n[C$r]&&C$n[C$r](1)})},uuid:function(C$e,C$t){var C$r=J[1036].split("");var C$a,C$o=[];var C$n;if(C$e=C$e||C$r.length,C$t)for(C$a=0;C$a<C$t;C$a++)C$o[C$a]=C$r[0|Math.random()*C$e];else for(C$o[8]=C$o[13]=C$o[18]=C$o[23]="-",C$o[14]="4",C$a=0;C$a<36;C$a++)C$o[C$a]||(C$n=0|16*Math.random(),C$o[C$a]=C$r[19==C$a?3&C$n|8:C$n]);return C$o.join("")},getPublicData:function(){var C$e=wx.getSystemInfoSync();var C$t=wx.getStorageSync(J[978]);var C$r=wx.getStorageSync(J[979]);var C$a=wx.getStorageSync(J[980]);return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id,partner_label:config.partner_label,ad_code:C$a,uuid:C$t,idfv:C$r,dname:C$e.model,mac:J[1037],net_type:0==C$e.wifiSignal?"4G":J[1038],os_ver:C$e.system,sdk_ver:C$e.version,game_ver:config.game_ver,device:C$e.platform==J[124]?1:2}},log:function(C$e,C$t){var C$r=this.getPublicData();for(var C$a in C$t)C$r[C$a]=C$t[C$a];console.log(J[1039]+C$e),console.log(C$r),wx.request({url:J[990]+HOST+J[1040]+C$e+J[1041]+encodeURIComponent(JSON.stringify(C$r))})},getDate:function(){var C$e=new Date;return C$e.getFullYear()+"-"+C$e.getMonth()+"-"+C$e.getDate()},downloadClient:function(){wx.openCustomerServiceConversation()},subscribeMessage:function(C$e,C$t){console.log(J[1042]+C$e),C$n[J[426]]=typeof C$t==J[984]?C$t:null,wx.requestSubscribeMessage({tmplIds:C$e,success(C$e){console.log(J[1043]),console.log(C$e),C$n[J[426]]&&C$n[J[426]](C$e)},fail(C$e){console.log(J[1044]),console.log(C$e),C$n[J[426]]&&C$n[J[426]](C$e)}})}}}function run(C$e,C$t,C$r){C$e in J1GQ45J&&J1GQ45J[C$e](C$t,C$r)}exports.init=function(C$e,C$t){run(J[276],C$e,C$t)},exports.login=function(C$e){run(J[300],"",C$e)},exports.login=function(C$e){run(J[300],"",C$e)},exports.pay=function(C$e,C$t){run(J[389],C$e,C$t)},exports.openService=function(){run(J[414])},exports.logCreateRole=function(C$e,C$t,C$r,C$a,C$o){run(J[404],{serverid:C$e,servername:C$t,roleid:C$r,rolename:C$a,rolelevel:C$o})},exports.logEnterGame=function(C$e,C$t,C$r,C$a,C$o,C$n,C$i){run(J[407],{serverid:C$e,servername:C$t,roleid:C$r,rolename:C$a,rolelevel:C$o,rolecreatetime:C$n},C$i)},exports.logRoleUpLevel=function(C$e,C$t,C$r,C$a,C$o,C$n,C$i){run(J[410],{serverid:C$e,servername:C$t,roleid:C$r,rolename:C$a,rolelevel:C$o,rolecreatetime:C$n},C$i)},exports.share=function(C$e){run(J[413],{type:C$e})},exports.msgCheck=function(C$e,C$t){run(J[233],C$e,C$t)},exports.downloadClient=function(){run(J[1045])},exports.getConfig=function(){return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id}},exports.getPublicData=function(){run(J[1046])},exports.subscribeMessage=function(C$e,C$t){run(J[426],C$e,C$t)};