var Laya=window.Laya=function(G$q,G$T){var G$M={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(G$T,G$l){return 1==arguments.length?G$M.__presubstr.call(this,G$T):G$M.__presubstr.call(this,G$T,0<G$l?G$l:this.length+G$l)},__init:function(G$T){G$T.forEach(function(G$T){G$T.__init$&&G$T.__init$()})},__isClass:function(G$T){return G$T&&(G$T.__isclass||G$T==Object||G$T==String||G$T==Array)},__newvec:function(G$T,G$l){var G$w=[];G$w.length=G$T;for(var G$u=0;G$u<G$T;G$u++)G$w[G$u]=G$l;return G$w},__extend:function(G$T,G$l){for(var G$w in G$l)if(G$l.hasOwnProperty(G$w)){var G$u=Object.getOwnPropertyDescriptor(G$l,G$w),G$p=G$u.get,G$D=G$u.set;G$p||G$D?G$p&&G$D?Object.defineProperty(G$T,G$w,G$u):(G$p&&Object.defineProperty(G$T,G$w,G$p),G$D&&Object.defineProperty(G$T,G$w,G$D)):G$T[G$w]=G$l[G$w]}function G$P(){G$M.un(this,"constructor",G$T)}G$P.prototype=G$l.prototype,G$T.prototype=new G$P,G$M.un(G$T.prototype,"__imps",G$M.__copy({},G$l.prototype.__imps))},__copy:function(G$T,G$l){if(!G$l)return null;for(var G$w in G$T=G$T||{},G$l)G$T[G$w]=G$l[G$w];return G$T},__package:function(G$T,G$l){if(!G$M.__packages[G$T]){G$M.__packages[G$T]=!0;var G$w=G$q,G$u=G$T.split(".");if(1<G$u.length)for(var G$p=0,G$D=G$u.length-1;G$p<G$D;G$p++){var G$P=G$w[G$u[G$p]];G$w=G$P||(G$w[G$u[G$p]]={})}G$w[G$u[G$u.length-1]]||(G$w[G$u[G$u.length-1]]=G$l||{})}},__hasOwnProperty:function(G$T,G$l){return G$l=G$l||this,Object.hasOwnProperty.call(G$l,G$T)||function G$T(G$l,G$w){if(Object.hasOwnProperty.call(G$w.prototype,G$l))return!0;var G$u=G$w.prototype.__super;return null==G$u?null:G$T(G$l,G$u)}(G$T,G$l.__class)},__typeof:function(G$T,G$l){if(!G$T||!G$l)return!1;if(G$l===String)return"string"==typeof G$T;if(G$l===Number)return"number"==typeof G$T;if(G$l.__interface__)G$l=G$l.__interface__;else if("string"!=typeof G$l)return G$T instanceof G$l;return G$T.__imps&&G$T.__imps[G$l]||G$T.__class==G$l},__as:function(G$T,G$l){return this.__typeof(G$T,G$l)?G$T:null},__int:function(G$T){return G$T?parseInt(G$T):0},interface:function(G$T,G$l){G$M.__package(G$T,{});var G$w=G$M.__internals,G$u=G$w[G$T]=G$w[G$T]||{self:G$T};if(G$l){var G$p=G$l.split(",");G$u.extend=[];for(var G$D=0;G$D<G$p.length;G$D++){var G$P=G$p[G$D];G$w[G$P]=G$w[G$P]||{self:G$P},G$u.extend.push(G$w[G$P])}}var G$j=G$q,G$J=G$T.split(".");for(G$D=0;G$D<G$J.length-1;G$D++)G$j=G$j[G$J[G$D]];G$j[G$J[G$J.length-1]]={__interface__:G$T}},class:function(G$T,G$l,G$w,G$u){if(G$w&&G$M.__extend(G$T,G$w),G$l)if(G$M.__package(G$l,G$T),G$M.__classmap[G$l]=G$T,0<G$l.indexOf(".")){if(0==G$l.indexOf("laya.")){var G$p=G$l.split(".");G$u=G$u||G$p[G$p.length-1],G$M[G$u]&&console.log("Warning!,this class["+G$u+"] already exist:",G$M[G$u]),G$M[G$u]=G$T}}else"Main"==G$l?G$q.Main=G$T:"MainWX"==G$l?G$q.MainWX=G$T:(G$M[G$l]&&console.log("Error!,this class["+G$l+"] already exist:",G$M[G$l]),G$M[G$l]=G$T);var G$D=G$M.un,G$P=G$T.prototype;G$D(G$P,"hasOwnProperty",G$M.__hasOwnProperty),G$D(G$P,"__class",G$T),G$D(G$P,"__super",G$w),G$D(G$P,"__className",G$l),G$D(G$T,"__super",G$w),G$D(G$T,"__className",G$l),G$D(G$T,"__isclass",!0),G$D(G$T,"super",function(G$T){this.__super.call(G$T)})},imps:function(G$T,G$l){if(!G$l)return null;var G$p=G$T.__imps||G$M.un(G$T,"__imps",{});function G$D(G$T){var G$l,G$w;if((G$l=G$M.__internals[G$T])&&(G$p[G$T]=!0,G$w=G$l.extend))for(var G$u=0;G$u<G$w.length;G$u++)G$D(G$w[G$u].self)}for(var G$w in G$l)G$D(G$w)},superSet:function(G$T,G$l,G$w,G$u){var G$p=G$T.prototype["_$set_"+G$w];G$p&&G$p.call(G$l,G$u)},superGet:function(G$T,G$l,G$w){var G$u=G$T.prototype["_$get_"+G$w];return G$u?G$u.call(G$l):null},getset:function(G$T,G$l,G$w,G$u,G$p){G$T?(G$u&&(G$l["_$GET_"+G$w]=G$u),G$p&&(G$l["_$SET_"+G$w]=G$p)):(G$u&&G$M.un(G$l,"_$get_"+G$w,G$u),G$p&&G$M.un(G$l,"_$set_"+G$w,G$p)),G$u&&G$p?Object.defineProperty(G$l,G$w,{get:G$u,set:G$p,enumerable:!1,configurable:!0}):(G$u&&Object.defineProperty(G$l,G$w,{get:G$u,enumerable:!1,configurable:!0}),G$p&&Object.defineProperty(G$l,G$w,{set:G$p,enumerable:!1,configurable:!0}))},static:function(G$w,G$u){for(var G$p=0,G$T=G$u.length;G$p<G$T;G$p+=2)if("length"==G$u[G$p])G$w.length=G$u[G$p+1].call(G$w);else{function G$l(){var G$l=G$u[G$p],G$T=G$u[G$p+1];Object.defineProperty(G$w,G$l,{get:function(){return delete this[G$l],this[G$l]=G$T.call(this)},set:function(G$T){delete this[G$l],this[G$l]=G$T},enumerable:!0,configurable:!0})}G$l()}},un:function(G$T,G$l,G$w){return G$w||(G$w=G$T[G$l]),G$M.__propun.value=G$w,Object.defineProperty(G$T,G$l,G$M.__propun),G$w},uns:function(G$l,G$T){G$T.forEach(function(G$T){G$M.un(G$l,G$T)})}};return G$q.console=G$q.console||{log:function(){}},G$q.trace=G$q.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),G$M}(window,document);!function(G$T,G$l,G$w){G$w.un,G$w.uns,G$w.static,G$w.class,G$w.getset,G$w.__newvec}(window,document,Laya),function(G$P,G$l,G$B){G$B.un,G$B.uns;var G$J=G$B.static,G$M=G$B.class,G$Y=G$B.getset;G$B.__newvec;G$B.interface("laya.runtime.IMarket"),G$B.interface("laya.filters.IFilter"),G$B.interface("laya.display.ILayout"),G$B.interface("laya.resource.IDispose"),G$B.interface("laya.runtime.IPlatform"),G$B.interface("laya.resource.IDestroy"),G$B.interface("laya.runtime.IConchNode"),G$B.interface("laya.filters.IFilterAction"),G$B.interface("laya.runtime.ICPlatformClass"),G$B.interface("laya.resource.ICreateResource"),G$B.interface("laya.runtime.IConchRenderObject"),G$B.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var G$e=function(){function G$D(){}return G$M(G$D,"laya.utils.RunDriver"),G$D.FILTER_ACTIONS=[],G$D.pixelRatio=-1,G$D._charSizeTestDiv=null,G$D.now=function(){return Date.now()},G$D.getWindow=function(){return G$P},G$D.getPixelRatio=function(){if(G$D.pixelRatio<0){var G$T=G$H.context,G$l=G$T.backingStorePixelRatio||G$T.webkitBackingStorePixelRatio||G$T.mozBackingStorePixelRatio||G$T.msBackingStorePixelRatio||G$T.oBackingStorePixelRatio||G$T.backingStorePixelRatio||1;(G$D.pixelRatio=(G$H.window.devicePixelRatio||1)/G$l)<1&&(G$D.pixelRatio=1)}return G$D.pixelRatio},G$D.getIncludeStr=function(G$T){return null},G$D.createShaderCondition=function(G$T){var G$l="(function() {return "+G$T+";})";return G$B._runScript(G$l)},G$D.fontMap=[],G$D.measureText=function(G$T,G$l){var G$w=G$D.hanzi.test(G$T);if(G$w&&G$D.fontMap[G$l])return G$D.fontMap[G$l];var G$u=G$H.context;G$u.font=G$l;var G$p=G$u.measureText(G$T);return G$p||(G$p={width:16,height:16}),G$w&&(G$D.fontMap[G$l]=G$p),G$p},G$D.getWebGLContext=function(G$T){},G$D.beginFlush=function(){},G$D.endFinish=function(){},G$D.addToAtlas=null,G$D.flashFlushImage=function(G$T){},G$D.drawToCanvas=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=G$WT.create("2D"),G$j=new G$F(G$w,G$u,G$P);return G$O.renders[G$l]._fun(G$T,G$j,G$p,G$D),G$P},G$D.createParticleTemplate2D=null,G$D.createGLTextur=null,G$D.createWebGLContext2D=null,G$D.changeWebGLSize=function(G$T,G$l){},G$D.createRenderSprite=function(G$T,G$l){return new G$O(G$T,G$l)},G$D.createFilterAction=function(G$T){return new G$W},G$D.createGraphics=function(){return new G$b},G$D.clear=function(G$T){G$R._context.ctx.clear()},G$D.cancelLoadByUrl=function(G$T){},G$D.clearAtlas=function(G$T){},G$D.isAtlas=function(G$T){return!1},G$D.addTextureToAtlas=function(G$T){},G$D.getTexturePixels=function(G$T,G$l,G$w,G$u,G$p){return null},G$D.skinAniSprite=function(){return null},G$D.update3DLoop=function(){},G$J(G$D,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),G$D}(),G$u=(G$Y(1,G$B,"alertGlobalError",null,function(G$T){var G$D=0;G$H.window.onerror=G$T?function(G$T,G$l,G$w,G$u,G$p){G$D++<5&&G$p&&alert(G$p.stack||G$p)}:null}),G$B.init=function(G$T,G$l,G$w){for(var G$u=[],G$p=2,G$D=arguments.length;G$p<G$D;G$p++)G$u.push(arguments[G$p]);if(!G$B._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=G$B._arrayBufferSlice),G$B._isinit=!0,G$H.__init__(),G$$.__init__(),G$b.__init__(),G$B.timer=new G$U,G$B.scaleTimer=new G$U,G$B.loader=new G$JT,G$S.__init__(),G$p=0;for(var G$P=G$u.length;G$p<G$P;G$p++)G$u[G$p].enable&&G$u[G$p].enable();return G$K.__init__(),G$j.__init__(),G$Z.__init__(),G$k.beginCheck(),G$B._currentStage=G$B.stage=new G$LT,G$B.stage.conchModel&&G$B.stage.conchModel.setRootNode(),G$B._getUrlPath(),G$B.render=new G$R(0,0),G$B.stage.size(G$T,G$l),G$O.__init__(),G$z.__init__(),G$t.instance.__init__(G$B.stage,G$R.canvas),G$cT.__init__(),G$o.autoStopMusic=!0,G$I.__init__(),G$R.canvas}},G$B._getUrlPath=function(){var G$T=G$H.window.location,G$l=G$T.pathname;G$l=G$l&&":"==G$l.charAt(2)?G$l.substring(1):G$l,G$x.rootPath=G$x.basePath=G$x.getPath("file:"==G$T.protocol?G$l:G$T.protocol+"//"+G$T.host+G$T.pathname)},G$B._arrayBufferSlice=function(G$T,G$l){var G$w=new Uint8Array(this,G$T,G$l-G$T),G$u=new Uint8Array(G$w.length);return G$u.set(G$w),G$u.buffer},G$B._runScript=function(G$T){return G$H.window[G$B._evcode](G$T)},G$B.stage=null,G$B.timer=null,G$B.scaleTimer=null,G$B.loader=null,G$B.version="1.8.6",G$B.render=null,G$B._currentStage=null,G$B._isinit=!1,G$B.isDebug=!1,G$B.MiniAdpter={init:function(){G$P.navigator&&G$P.navigator.userAgent&&-1<G$P.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},G$J(G$B,["conchMarket",function(){return this.conchMarket=G$P.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=G$P.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function G$T(){}return G$M(G$T,"Config"),G$T.WebGLTextCacheCount=500,G$T.atlasEnable=!1,G$T.showCanvasMark=!1,G$T.animationInterval=50,G$T.isAntialias=!1,G$T.isAlpha=!1,G$T.premultipliedAlpha=!0,G$T.isStencil=!0,G$T.preserveDrawingBuffer=!1,G$T}()),G$q=function(){function G$q(){this._events=null}G$M(G$q,"laya.events.EventDispatcher");var G$T=G$q.prototype;return G$T.hasListener=function(G$T){return!!(this._events&&this._events[G$T])},G$T.getListener=function(G$T){return this._events?this._events[G$T]:null},G$T.event=function(G$T,G$l){if(!this._events||!this._events[G$T])return!1;var G$w=this._events[G$T];if(G$w.lock)G$w.queue||(G$w.queue=[]),G$w.queue.push(G$l);else{var G$u;for(G$w.lock=!0,G$w.cursor=G$w.head;G$w.cursor;)(G$u=G$w.cursor).recover?(G$w.head=G$w.tail=G$w.cursor=null,console.error("node is recover："+G$u.id)):(G$w.cursor=G$u.next,G$u.once&&G$q.delNode(G$w,G$u),G$u.method&&(null!=G$l?G$u.args?G$u.method.apply(G$u.caller,G$u.args.concat(G$l)):G$l instanceof Array?G$u.method.apply(G$u.caller,G$l):G$u.caller?G$u.method.call(G$u.caller,G$l):G$B.recordError("事件派发错误","node.caller:"+G$u.caller+"node.method:"+G$u.method+"data:"+G$l+"node.prev"+G$u.prev):G$u.method.apply(G$u.caller,G$u.args)),G$u.once&&G$q.recoverHandler(G$u));G$w.lock=!1,!G$w.head&&this._events&&this._events[G$T]==G$w&&delete this._events[G$T],G$w.queue&&G$w.queue.length&&this.event(G$T,G$w.queue.shift())}return!0},G$T.on=function(G$T,G$l,G$w,G$u){return this._createListener(G$T,G$l,G$w,G$u,!1)},G$T.once=function(G$T,G$l,G$w,G$u){return this._createListener(G$T,G$l,G$w,G$u,!0)},G$T._createListener=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$D&&(G$D=!0),G$D&&this.off(G$T,G$l,G$w,G$p);var G$P=G$q.createHandler(G$l||this,G$w,G$u,G$p);this._events||(this._events={});var G$j=this._events,G$J=G$j[G$T];return G$J?G$J.tail?(G$P.prev=G$J.tail,G$J.tail.next=G$P,G$J.tail=G$P):G$J.head=G$J.tail=G$P:G$j[G$T]={head:G$P,tail:G$P,cursor:null,lock:!1},this},G$T.off=function(G$T,G$l,G$w,G$u){if(void 0===G$u&&(G$u=!1),!this._events||!this._events[G$T])return this;for(var G$p=this._events[G$T],G$D=G$p.head;G$D;){if((!G$l||G$D.caller===G$l)&&G$D.method===G$w&&(!G$u||G$D.once)){G$q.delNode(G$p,G$D),G$p.cursor==G$D&&(G$p.cursor=G$D.next),G$q.recoverHandler(G$D);break}G$D=G$D.next}return this},G$T.offAll=function(G$T){var G$l=this._events;if(!G$l)return this;if(G$T)this._recoverHandlers(G$l[G$T]),delete G$l[G$T];else{for(var G$w in G$l)this._recoverHandlers(G$l[G$w]);this._events=null}return this},G$T._recoverHandlers=function(G$T){if(G$T){for(var G$l=G$T.head;G$l;){G$q.delNode(G$T,G$l);var G$w=G$l.next;G$q.recoverHandler(G$l),G$l=G$w}G$T.cursor=null}},G$T.isMouseEvent=function(G$T){return G$q.MOUSE_EVENTS[G$T]},G$q.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},G$q.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},G$q.delNode=function(G$T,G$l){G$l.prev?G$l.prev.next=G$l.next:G$T.head=G$l.next,G$l.next?G$l.next.prev=G$l.prev:G$T.tail=G$l.prev},G$q.createHandler=function(G$T,G$l,G$w,G$u){var G$p=500<G$q._freeHandler.length?G$q._freeHandler.shift():null;if(G$p)if(G$p.recover)G$p.recover=!1,G$p.caller=G$T,G$p.method=G$l,G$p.args=G$w,G$p.once=G$u;else{var G$D="";try{arguments.propertyIsEnumerable.caller}catch(G$T){G$D=G$T.stack}var G$P=G$p.caller?(G$p.caller.__proto__&&G$p.caller.__proto__.constructor&&G$p.caller.__proto__.constructor.name)+"|"+G$p.caller.__className+"|"+G$p.caller.name:"",G$j=G$p.method?G$p.method.name:"";G$B.recordError("EventDispatcher重复创建","caller="+G$P+"  method="+G$j+"  stack="+G$D),G$p={id:++G$q._nodeCount,caller:G$T,method:G$l,args:G$w,once:G$u,recover:!1}}else G$p={id:++G$q._nodeCount,caller:G$T,method:G$l,args:G$w,once:G$u,recover:!1};return G$p.prev=G$p.next=null,G$p},G$q.recoverHandler=function(G$T){if(G$T.recover){if(G$q._errorCount<5){G$q._errorCount++;var G$l="";try{arguments.propertyIsEnumerable.caller}catch(G$T){G$l=G$T.stack}var G$w=G$T.caller?(G$T.caller.__proto__&&G$T.caller.__proto__.constructor&&G$T.caller.__proto__.constructor.name)+"|"+G$T.caller.__className+"|"+G$T.caller.name:"",G$u=G$T.method?G$T.method.name:"";G$B.recordError("EventDispatcher重复回收","id="+G$T.id+"  caller="+G$w+"  method="+G$u+"  stack="+G$l)}G$T.caller=G$T.method=G$T.args=G$T.prev=null}else G$T.recover=!0,G$T.caller=G$T.method=G$T.args=G$T.prev=G$T.next=null,G$q._freeHandler.push(G$T)},G$q._freeHandler=[],G$q._nodeCount=0,G$q._errorCount=0,G$q}(),G$i=function(){function G$p(G$T,G$l,G$w,G$u){this.once=!1,void(this._id=0)===G$u&&(G$u=!1),this.setTo(G$T,G$l,G$w,G$u)}G$M(G$p,"laya.utils.Handler");var G$T=G$p.prototype;return G$T.setTo=function(G$T,G$l,G$w,G$u){return this._id=G$p._gid++,this.caller=G$T,this.method=G$l,this.args=G$w,this.once=G$u,this},G$T.run=function(){if(null==this.method)return null;var G$T=this._id,G$l=this.method.apply(this.caller,this.args);return this._id===G$T&&this.once&&this.recover(),G$l},G$T.runWith=function(G$T){if(null==this.method)return null;var G$l=this._id;if(null==G$T)var G$w=this.method.apply(this.caller,this.args);else G$w=this.args||G$T.unshift?this.args?this.method.apply(this.caller,this.args.concat(G$T)):this.method.apply(this.caller,G$T):this.method.call(this.caller,G$T);return this._id===G$l&&this.once&&this.recover(),G$w},G$T.clear=function(){return this.caller=null,this.method=null,this.args=null,this},G$T.recover=function(){0<this._id&&(this._id=0,this.clear())},G$p.create=function(G$T,G$l,G$w,G$u){return void 0===G$u&&(G$u=!0),new G$p(G$T,G$l,G$w,G$u)},G$p._gid=1,G$p}(),G$Q=function(){function G$T(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}G$M(G$T,"laya.display.BitmapFont");var G$l=G$T.prototype;return G$l.loadFont=function(G$T,G$l){this._path=G$T,this._complete=G$l,G$B.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],G$i.create(this,this.onLoaded))},G$l.onLoaded=function(){this.parseFont(G$jT.getRes(this._path),G$jT.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},G$l.parseFont=function(G$T,G$l){if(null!=G$T&&null!=G$l){this._texture=G$l;var G$w=G$T.getElementsByTagName("info");if(!G$w[0].getAttributeNode)return this.parseFont2(G$T,G$l);this.fontSize=parseInt(G$w[0].getAttributeNode("size").nodeValue);var G$u,G$p=G$w[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(G$p[0]),parseInt(G$p[1]),parseInt(G$p[2]),parseInt(G$p[3])],G$u=G$T.getElementsByTagName("char");var G$D=0;for(G$D=0;G$D<G$u.length;G$D++){var G$P=G$u[G$D],G$j=parseInt(G$P.getAttributeNode("id").nodeValue),G$J=parseInt(G$P.getAttributeNode("xoffset").nodeValue)/1,G$q=parseInt(G$P.getAttributeNode("yoffset").nodeValue)/1,G$M=parseInt(G$P.getAttributeNode("xadvance").nodeValue)/1,G$z=new G$r;G$z.x=parseInt(G$P.getAttributeNode("x").nodeValue),G$z.y=parseInt(G$P.getAttributeNode("y").nodeValue),G$z.width=parseInt(G$P.getAttributeNode("width").nodeValue),G$z.height=parseInt(G$P.getAttributeNode("height").nodeValue);var G$b=G$MT.create(G$l,G$z.x,G$z.y,G$z.width,G$z.height,G$J,G$q);this._maxWidth=Math.max(this._maxWidth,G$M+this.letterSpacing),this._fontCharDic[G$j]=G$b,this._fontWidthMap[G$j]=G$M}}},G$l.parseFont2=function(G$T,G$l){if(null!=G$T&&null!=G$l){this._texture=G$l;var G$w=G$T.getElementsByTagName("info");this.fontSize=parseInt(G$w[0].attributes.size.nodeValue);var G$u=G$w[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(G$u[0]),parseInt(G$u[1]),parseInt(G$u[2]),parseInt(G$u[3])];var G$p=G$T.getElementsByTagName("char"),G$D=0;for(G$D=0;G$D<G$p.length;G$D++){var G$P=G$p[G$D].attributes,G$j=parseInt(G$P.id.nodeValue),G$J=parseInt(G$P.xoffset.nodeValue)/1,G$q=parseInt(G$P.yoffset.nodeValue)/1,G$M=parseInt(G$P.xadvance.nodeValue)/1,G$z=new G$r;G$z.x=parseInt(G$P.x.nodeValue),G$z.y=parseInt(G$P.y.nodeValue),G$z.width=parseInt(G$P.width.nodeValue),G$z.height=parseInt(G$P.height.nodeValue);var G$b=G$MT.create(G$l,G$z.x,G$z.y,G$z.width,G$z.height,G$J,G$q);this._maxWidth=Math.max(this._maxWidth,G$M+this.letterSpacing),this._fontCharDic[G$j]=G$b,this._fontWidthMap[G$j]=G$M}}},G$l.getCharTexture=function(G$T){return this._fontCharDic[G$T.charCodeAt(0)]},G$l.destroy=function(){if(this._texture){for(var G$T in this._fontCharDic){var G$l=this._fontCharDic[G$T];G$l&&G$l.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},G$l.setSpaceWidth=function(G$T){this._spaceWidth=G$T},G$l.getCharWidth=function(G$T){var G$l=G$T.charCodeAt(0);return this._fontWidthMap[G$l]?this._fontWidthMap[G$l]+this.letterSpacing:" "==G$T?this._spaceWidth+this.letterSpacing:0},G$l.getTextWidth=function(G$T){for(var G$l=0,G$w=0,G$u=G$T.length;G$w<G$u;G$w++)G$l+=this.getCharWidth(G$T.charAt(G$w));return G$l},G$l.getMaxWidth=function(){return this._maxWidth},G$l.getMaxHeight=function(){return this.fontSize},G$l.drawText=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P,G$j=this.getTextWidth(G$T),G$J=0;"center"===G$p&&(G$J=(G$D-G$j)/2),"right"===G$p&&(G$J=G$D-G$j);for(var G$q=0,G$M=0,G$z=G$T.length;G$M<G$z;G$M++)(G$P=this.getCharTexture(G$T.charAt(G$M)))&&(G$l.graphics.drawTexture(G$P,G$w+G$q+G$J,G$u),G$q+=this.getCharWidth(G$T.charAt(G$M)))},G$T}(),G$j=function(){function G$w(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=G$w._TF_EMPTY}G$M(G$w,"laya.display.css.Style");var G$T=G$w.prototype;return G$T.getTransform=function(){return this._tf},G$T.setTransform=function(G$T){this._tf="none"!==G$T&&G$T?G$T:G$w._TF_EMPTY},G$T.setTranslateX=function(G$T){this._tf===G$w._TF_EMPTY&&(this._tf=new G$p),this._tf.translateX=G$T},G$T.setTranslateY=function(G$T){this._tf===G$w._TF_EMPTY&&(this._tf=new G$p),this._tf.translateY=G$T},G$T.setScaleX=function(G$T){this._tf===G$w._TF_EMPTY&&(this._tf=new G$p),this._tf.scaleX=G$T},G$T.setScale=function(G$T,G$l){this._tf===G$w._TF_EMPTY&&(this._tf=new G$p),this._tf.scaleX=G$T,this._tf.scaleY=G$l},G$T.setScaleY=function(G$T){this._tf===G$w._TF_EMPTY&&(this._tf=new G$p),this._tf.scaleY=G$T},G$T.setRotate=function(G$T){this._tf===G$w._TF_EMPTY&&(this._tf=new G$p),this._tf.rotate=G$T},G$T.setSkewX=function(G$T){this._tf===G$w._TF_EMPTY&&(this._tf=new G$p),this._tf.skewX=G$T},G$T.setSkewY=function(G$T){this._tf===G$w._TF_EMPTY&&(this._tf=new G$p),this._tf.skewY=G$T},G$T.destroy=function(){this.scrollRect=null},G$T.render=function(G$T,G$l,G$w,G$u){},G$T.getCSSStyle=function(){return G$lT.EMPTY},G$T._enableLayout=function(){return!1},G$Y(0,G$T,"scaleX",function(){return this._tf.scaleX},function(G$T){this.setScaleX(G$T)}),G$Y(0,G$T,"transform",function(){return this.getTransform()},function(G$T){this.setTransform(G$T)}),G$Y(0,G$T,"translateX",function(){return this._tf.translateX},function(G$T){this.setTranslateX(G$T)}),G$Y(0,G$T,"translateY",function(){return this._tf.translateY},function(G$T){this.setTranslateY(G$T)}),G$Y(0,G$T,"scaleY",function(){return this._tf.scaleY},function(G$T){this.setScaleY(G$T)}),G$Y(0,G$T,"block",function(){return 0!=(1&this._type)}),G$Y(0,G$T,"skewY",function(){return this._tf.skewY},function(G$T){this.setSkewY(G$T)}),G$Y(0,G$T,"rotate",function(){return this._tf.rotate},function(G$T){this.setRotate(G$T)}),G$Y(0,G$T,"skewX",function(){return this._tf.skewX},function(G$T){this.setSkewX(G$T)}),G$Y(0,G$T,"paddingLeft",function(){return 0}),G$Y(0,G$T,"paddingTop",function(){return 0}),G$Y(0,G$T,"absolute",function(){return!0}),G$w.__init__=function(){G$w._TF_EMPTY=new G$p,G$w.EMPTY=new G$w},G$w.EMPTY=null,G$w._TF_EMPTY=null,G$w}(),G$K=function(){function G$l(G$T){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=G$d.create(G$l.defaultColor),this.family=G$l.defaultFamily,this.stroke=G$l._STROKE,this.size=G$l.defaultSize,G$T&&G$T!==G$l.EMPTY&&G$T.copyTo(this)}G$M(G$l,"laya.display.css.Font");var G$T=G$l.prototype;return G$T.set=function(G$T){this._text=null;for(var G$l=G$T.split(" "),G$w=0,G$u=G$l.length;G$w<G$u;G$w++){var G$p=G$l[G$w];switch(G$p){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<G$p.indexOf("px")&&(this.size=parseInt(G$p),this.family=G$l[G$w+1],G$w++)}},G$T.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},G$T.copyTo=function(G$T){G$T._type=this._type,G$T._text=this._text,G$T._weight=this._weight,G$T._color=this._color,G$T.family=this.family,G$T.stroke=this.stroke!=G$l._STROKE?this.stroke.slice():G$l._STROKE,G$T.indent=this.indent,G$T.size=this.size},G$Y(0,G$T,"password",function(){return 0!=(1024&this._type)},function(G$T){G$T?this._type|=1024:this._type&=-1025}),G$Y(0,G$T,"color",function(){return this._color.strColor},function(G$T){this._color=G$d.create(G$T)}),G$Y(0,G$T,"italic",function(){return 0!=(512&this._type)},function(G$T){G$T?this._type|=512:this._type&=-513}),G$Y(0,G$T,"bold",function(){return 0!=(2048&this._type)},function(G$T){G$T?this._type|=2048:this._type&=-2049}),G$Y(0,G$T,"weight",function(){return""+this._weight},function(G$T){var G$l=0;switch(G$T){case"normal":break;case"bold":this.bold=!0,G$l=700;break;case"bolder":G$l=800;break;case"lighter":G$l=100;break;default:G$l=parseInt(G$T)}this._weight=G$l,this._text=null}),G$Y(0,G$T,"decoration",function(){return this._decoration?this._decoration.value:null},function(G$T){var G$l=G$T.split(" ");switch(this._decoration||(this._decoration={}),G$l[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=G$l[0]}G$l[1]&&(this._decoration.color=G$d.create(G$l)),this._decoration.value=G$T}),G$l.__init__=function(){G$l.EMPTY=new G$l(null)},G$l.EMPTY=null,G$l.defaultColor="#000000",G$l.defaultSize=12,G$l.defaultFamily="Arial",G$l.defaultFont="12px Arial",G$l._STROKE=[0,"#000000"],G$l._ITALIC=512,G$l._PASSWORD=1024,G$l._BOLD=2048,G$l}(),G$p=function(){function G$T(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return G$M(G$T,"laya.display.css.TransformInfo"),G$T}(),G$b=function(){function G$z(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,G$R.isConchNode){this._nativeObj=new G$P._conchGraphics,this.id=this._nativeObj.conchID}}G$M(G$z,"laya.display.Graphics");var G$T=G$z.prototype;return G$T.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},G$T.clear=function(G$T){void 0===G$T&&(G$T=!1);var G$l=0,G$w=0;if(G$T){var G$u=this._one;if(this._cmds){for(G$w=this._cmds.length,G$l=0;G$l<G$w;G$l++)!(G$u=this._cmds[G$l])||G$u.callee!==G$R._context._drawTexture&&G$u.callee!==G$R._context._drawTextureWithTransform||(G$u[0]=null,G$z._cache.push(G$u));this._cmds.length=0}else G$u&&(!G$u||G$u.callee!==G$R._context._drawTexture&&G$u.callee!==G$R._context._drawTextureWithTransform||(G$u[0]=null,G$z._cache.push(G$u)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(G$l=0,G$w=this._vectorgraphArray.length;G$l<G$w;G$l++)G$C.getInstance().deleteShape(this._vectorgraphArray[G$l]);this._vectorgraphArray.length=0}},G$T._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},G$T._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new G$w,this._graphicBounds._graphics=this)},G$T._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},G$T._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},G$T.getBounds=function(G$T){return void 0===G$T&&(G$T=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(G$T)},G$T.getBoundPoints=function(G$T){return void 0===G$T&&(G$T=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(G$T)},G$T._addCmd=function(G$T){this._cmds=this._cmds||[],G$T.callee=G$T.shift(),this._cmds.push(G$T)},G$T.setFilters=function(G$T){this._saveToCmd(G$R._context._setFilters,G$T)},G$T.drawTexture=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){if(void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0),void 0===G$P&&(G$P=1),!G$T||G$P<.01)return null;G$u||(G$u=G$T.sourceWidth),G$p||(G$p=G$T.sourceHeight),G$P=G$P<0?0:1<G$P?1:G$P;var G$j,G$J=!G$R.isWebGL&&(G$H.onFirefox||G$H.onEdge||G$H.onIE||G$H.onSafari)?.5:0,G$q=G$u/G$T.sourceWidth,G$M=G$p/G$T.sourceHeight;return G$u=G$T.width*G$q,G$p=G$T.height*G$M,G$T.loaded&&(G$u<=0||G$p<=0)?null:(G$l+=G$T.offsetX*G$q,G$w+=G$T.offsetY*G$M,this._sp&&(this._sp._renderType|=512),G$l-=G$J,G$w-=G$J,G$u+=2*G$J,G$p+=2*G$J,G$z._cache.length?((G$j=G$z._cache.pop())[0]=G$T,G$j[1]=G$l,G$j[2]=G$w,G$j[3]=G$u,G$j[4]=G$p,G$j[5]=G$D,G$j[6]=G$P):G$j=[G$T,G$l,G$w,G$u,G$p,G$D,G$P],G$j.callee=G$D||1!=G$P?G$R._context._drawTextureWithTransform:G$R._context._drawTexture,null!=this._one||G$D||1!=G$P?this._saveToCmd(G$j.callee,G$j):(this._one=G$j,this._render=this._renderOneImg),G$T.loaded||G$T.once("loaded",this,this._textureLoaded,[G$T,G$j]),this._repaint(),G$j)},G$T.cleanByTexture=function(G$T,G$l,G$w,G$u,G$p){if(void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0),!G$T)return this.clear();if(this._one&&this._render===this._renderOneImg){G$u||(G$u=G$T.sourceWidth),G$p||(G$p=G$T.sourceHeight);var G$D=G$u/G$T.sourceWidth,G$P=G$p/G$T.sourceHeight;G$u=G$T.width*G$D,G$p=G$T.height*G$P,G$l+=G$T.offsetX*G$D,G$w+=G$T.offsetY*G$P,this._one[0]=G$T,this._one[1]=G$l,this._one[2]=G$w,this._one[3]=G$u,this._one[4]=G$p,this._repaint()}else this.clear(),G$T&&this.drawTexture(G$T,G$l,G$w,G$u,G$p)},G$T.drawTextures=function(G$T,G$l){G$T&&this._saveToCmd(G$R._context._drawTextures,[G$T,G$l])},G$T.fillTexture=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){if(void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0),void 0===G$D&&(G$D="repeat"),G$T){var G$j=[G$T,G$l,G$w,G$u,G$p,G$D,G$P||G$s.EMPTY,{}];G$T.loaded||G$T.once("loaded",this,this._textureLoaded,[G$T,G$j]),this._saveToCmd(G$R._context._fillTexture,G$j)}},G$T._textureLoaded=function(G$T,G$l){G$l[3]=G$l[3]||G$T.width,G$l[4]=G$l[4]||G$T.height,this._repaint()},G$T.fillCircle=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){G$w.bitmap.enableMerageInAtlas=!1;var G$j=new Float32Array(2*(G$P+1)),G$J=new Float32Array(2*(G$P+1)),G$q=new Uint16Array(3*G$P),G$M=2*Math.PI/G$P,G$z=0;G$j[0]=G$u,G$j[1]=G$p,G$J[0]=G$u/G$w.width,G$J[1]=G$p/G$w.height;for(var G$b=2,G$K=0;G$K<G$P;G$K++){var G$Y=G$D*Math.cos(G$z)+G$u,G$t=G$D*Math.sin(G$z)+G$p;G$j[G$b]=G$Y,G$j[G$b+1]=G$t,G$J[G$b]=G$Y/G$w.width,G$J[G$b+1]=G$t/G$w.height,G$z+=G$M,G$b+=2}for(G$K=G$b=0;G$K<G$P;G$K++)G$q[G$b++]=0,G$q[G$b++]=G$K+1,G$q[G$b++]=G$P+1<=G$K+2?1:G$K+2;this.drawTriangles(G$w,G$T,G$l,G$j,G$J,G$q)},G$T.drawTriangles=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){void 0===G$j&&(G$j=1),this._saveToCmd(G$R._context.drawTriangles,[G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q])},G$T._saveToCmd=function(G$T,G$l){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=G$l,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(G$l)),G$l.callee=G$T,this._repaint(),G$l},G$T.clipRect=function(G$T,G$l,G$w,G$u){this._saveToCmd(G$R._context._clipRect,[G$T,G$l,G$w,G$u])},G$T.fillText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){void 0===G$P&&(G$P=0),this._saveToCmd(G$R._context._fillText,[G$T,G$l,G$w,G$u||G$K.defaultFont,G$p,G$D])},G$T.fillBorderText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){this._saveToCmd(G$R._context._fillBorderText,[G$T,G$l,G$w,G$u||G$K.defaultFont,G$p,G$D,G$P,G$j])},G$T.strokeText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this._saveToCmd(G$R._context._strokeText,[G$T,G$l,G$w,G$u||G$K.defaultFont,G$p,G$D,G$P])},G$T.alpha=function(G$T){G$T=G$T<0?0:1<G$T?1:G$T,this._saveToCmd(G$R._context._alpha,[G$T])},G$T.setAlpha=function(G$T){G$T=G$T<0?0:1<G$T?1:G$T,this._saveToCmd(G$R._context._setAlpha,[G$T])},G$T.transform=function(G$T,G$l,G$w){void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),this._saveToCmd(G$R._context._transform,[G$T,G$l,G$w])},G$T.rotate=function(G$T,G$l,G$w){void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),this._saveToCmd(G$R._context._rotate,[G$T,G$l,G$w])},G$T.scale=function(G$T,G$l,G$w,G$u){void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=0),this._saveToCmd(G$R._context._scale,[G$T,G$l,G$w,G$u])},G$T.translate=function(G$T,G$l){this._saveToCmd(G$R._context._translate,[G$T,G$l])},G$T.save=function(){this._saveToCmd(G$R._context._save,[])},G$T.restore=function(){this._saveToCmd(G$R._context._restore,[])},G$T.replaceText=function(G$T){this._repaint();var G$l=this._cmds;if(G$l){for(var G$w=G$l.length-1;-1<G$w;G$w--)if(this._isTextCmd(G$l[G$w].callee))return G$l[G$w][0].toUpperCase?G$l[G$w][0]=G$T:G$l[G$w][0].setText(G$T),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=G$T:this._one[0].setText(G$T),!0;return!1},G$T._isTextCmd=function(G$T){return G$T===G$R._context._fillText||G$T===G$R._context._fillBorderText||G$T===G$R._context._strokeText},G$T.replaceTextColor=function(G$T){this._repaint();var G$l=this._cmds;if(G$l)for(var G$w=G$l.length-1;-1<G$w;G$w--)this._isTextCmd(G$l[G$w].callee)&&(G$l[G$w][4]=G$T,G$l[G$w][0].toUpperCase||(G$l[G$w][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=G$T,this._one[0].toUpperCase||(this._one[0].changed=!0))},G$T.loadImage=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=this;void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0);var G$j=G$jT.getRes(G$T);function G$J(G$T){G$T&&(G$P.drawTexture(G$T,G$l,G$w,G$u,G$p),null!=G$D&&G$D.call(G$P._sp,G$T))}G$j?G$J(G$j):G$B.loader.load(G$T,G$i.create(null,G$J),null,"image")},G$T._renderEmpty=function(G$T,G$l,G$w,G$u){},G$T._renderAll=function(G$T,G$l,G$w,G$u){for(var G$p,G$D=this._cmds,G$P=0,G$j=G$D.length;G$P<G$j;G$P++)(G$p=G$D[G$P]).callee.call(G$l,G$w,G$u,G$p)},G$T._renderOne=function(G$T,G$l,G$w,G$u){this._one.callee.call(G$l,G$w,G$u,this._one)},G$T._renderOneImg=function(G$T,G$l,G$w,G$u){this._one.callee.call(G$l,G$w,G$u,this._one),2305!==G$T._renderType&&(G$T._renderType|=1)},G$T.drawLine=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$D&&(G$D=1);var G$P=0;G$R.isWebGL&&(G$P=G$C.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(G$P));var G$j=G$D%2==0?0:.5,G$J=[G$T+G$j,G$l+G$j,G$w+G$j,G$u+G$j,G$p,G$D,G$P];this._saveToCmd(G$R._context._drawLine,G$J)},G$T.drawLines=function(G$T,G$l,G$w,G$u,G$p){void 0===G$p&&(G$p=1);var G$D=0;if(G$w&&!(G$w.length<4)){G$R.isWebGL&&(G$D=G$C.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(G$D));var G$P=G$p%2==0?0:.5,G$j=[G$T+G$P,G$l+G$P,G$w,G$u,G$p,G$D];this._saveToCmd(G$R._context._drawLines,G$j)}},G$T.drawCurves=function(G$T,G$l,G$w,G$u,G$p){void 0===G$p&&(G$p=1);var G$D=[G$T,G$l,G$w,G$u,G$p];this._saveToCmd(G$R._context._drawCurves,G$D)},G$T.drawRect=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){void 0===G$P&&(G$P=1);var G$j=G$D?G$P/2:0,G$J=G$D?G$P:0,G$q=[G$T+G$j,G$l+G$j,G$w-G$J,G$u-G$J,G$p,G$D,G$P];this._saveToCmd(G$R._context._drawRect,G$q)},G$T.drawCircle=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$D&&(G$D=1);var G$P=G$p?G$D/2:0,G$j=0;G$R.isWebGL&&(G$j=G$C.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(G$j));var G$J=[G$T,G$l,G$w-G$P,G$u,G$p,G$D,G$j];this._saveToCmd(G$R._context._drawCircle,G$J)},G$T.drawPie=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){void 0===G$j&&(G$j=1);var G$J=G$P?G$j/2:0,G$q=G$P?G$j:0,G$M=0;G$R.isWebGL&&(G$M=G$C.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(G$M));var G$z=[G$T+G$J,G$l+G$J,G$w-G$q,G$u,G$p,G$D,G$P,G$j,G$M];G$z[3]=G$V.toRadian(G$u),G$z[4]=G$V.toRadian(G$p),this._saveToCmd(G$R._context._drawPie,G$z)},G$T.drawPoly=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$D&&(G$D=1);var G$P=0,G$j=!1;G$R.isWebGL&&(G$P=G$C.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(G$P),G$j=!(6<G$w.length));var G$J=G$p?G$D%2==0?0:.5:0,G$q=[G$T+G$J,G$l+G$J,G$w,G$u,G$p,G$D,G$P,G$j];this._saveToCmd(G$R._context._drawPoly,G$q)},G$T.drawPath=function(G$T,G$l,G$w,G$u,G$p){var G$D=[G$T,G$l,G$w,G$u,G$p];this._saveToCmd(G$R._context._drawPath,G$D)},G$Y(0,G$T,"cmds",function(){return this._cmds},function(G$T){this._sp&&(this._sp._renderType|=512),this._cmds=G$T,this._render=this._renderAll,this._repaint()}),G$z.__init__=function(){if(G$R.isConchNode){for(var G$T=laya.display.Graphics.prototype,G$l=G$H.window.ConchGraphics.prototype,G$w=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],G$u=0,G$p=G$w.length;G$u<=G$p;G$u++){var G$D=G$w[G$u];G$T[G$D]=G$l[G$D]}G$T._saveToCmd=null,G$l.drawImageS&&(G$T.drawTextures=function(G$T,G$l){if(G$T&&G$T.loaded&&G$T.bitmap&&G$T.source){var G$w=G$T.uv,G$u=G$T.bitmap.width,G$p=G$T.bitmap.height;this.drawImageS(G$T.bitmap.source,G$w[0]*G$u,G$w[1]*G$p,(G$w[2]-G$w[0])*G$u,(G$w[5]-G$w[3])*G$p,G$T.offsetX,G$T.offsetY,G$T.width,G$T.height,G$l)}}),G$T.drawTexture=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){if(void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0),void 0===G$P&&(G$P=1),G$T)if(G$T.loaded){if(G$T.loaded&&G$T.bitmap&&G$T.source&&(G$u||(G$u=G$T.sourceWidth),G$p||(G$p=G$T.sourceHeight),G$P=G$P<0?0:1<G$P?1:G$P,G$u=G$u-G$T.sourceWidth+G$T.width,G$p=G$p-G$T.sourceHeight+G$T.height,!(G$u<=0||G$p<=0))){G$l+=G$T.offsetX,G$w+=G$T.offsetY;var G$j=G$T.uv,G$J=G$T.bitmap.width,G$q=G$T.bitmap.height;G$j[4]<G$j[0]&&G$j[5]<G$j[1]?this.drawImageM(G$T.bitmap.source,G$j[4]*G$J,G$j[5]*G$q,(G$j[0]-G$j[4])*G$J,(G$j[1]-G$j[5])*G$q,G$l,G$w,G$u,G$p,G$D,G$P):this.drawImageM(G$T.bitmap.source,G$j[0]*G$J,G$j[1]*G$q,(G$j[2]-G$j[0])*G$J,(G$j[5]-G$j[3])*G$q,G$l,G$w,G$u,G$p,G$D,G$P),this._repaint()}}else G$T.once("loaded",this,function(){this.drawTexture(G$T,G$l,G$w,G$u,G$p,G$D)})},G$T.fillTexture=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){if(void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0),void 0===G$D&&(G$D="repeat"),G$T&&G$T.loaded){var G$j,G$J=G$R._context.ctx,G$q=G$T.bitmap.width,G$M=G$T.bitmap.height,G$z=G$T.uv;G$j=G$T.uv!=G$MT.DEF_UV?G$J.createPattern(G$T.bitmap.source,G$D,G$z[0]*G$q,G$z[1]*G$M,(G$z[2]-G$z[0])*G$q,(G$z[5]-G$z[3])*G$M):G$J.createPattern(G$T.bitmap.source,G$D);var G$b=0,G$K=0;G$P&&(G$l+=G$P.x%G$T.width,G$w+=G$P.y%G$T.height,G$b-=G$P.x%G$T.width,G$K-=G$P.y%G$T.height),this._fillImage(G$j,G$l,G$w,G$b,G$K,G$u,G$p)}}}},G$z._cache=[],G$z}(),G$w=function(){function G$W(){this._cacheBoundsType=!1}G$M(G$W,"laya.display.GraphicsBounds");var G$T=G$W.prototype;return G$T.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},G$T.reset=function(){this._temp&&(this._temp.length=0)},G$T.getBounds=function(G$T){return void 0===G$T&&(G$T=!1),(!this._bounds||!this._temp||this._temp.length<1||G$T!=this._cacheBoundsType)&&(this._bounds=G$r._getWrapRec(this.getBoundPoints(G$T),this._bounds)),this._cacheBoundsType=G$T,this._bounds},G$T.getBoundPoints=function(G$T){return void 0===G$T&&(G$T=!1),(!this._temp||this._temp.length<1||G$T!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(G$T)),this._cacheBoundsType=G$T,this._rstBoundPoints=G$V.copyArray(this._rstBoundPoints,this._temp)},G$T._getCmdPoints=function(G$T){void 0===G$T&&(G$T=!1);var G$l,G$w,G$u=G$R._context,G$p=this._graphics.cmds;if((G$l=this._temp||(this._temp=[])).length=0,G$p||null==this._graphics._one||(G$W._tempCmds.length=0,G$W._tempCmds.push(this._graphics._one),G$p=G$W._tempCmds),!G$p)return G$l;(G$w=G$W._tempMatrixArrays).length=0;var G$D=G$W._initMatrix;G$D.identity();for(var G$P,G$j,G$J=G$W._tempMatrix,G$q=NaN,G$M=NaN,G$z=NaN,G$b=NaN,G$K=NaN,G$Y=NaN,G$t=0,G$A=G$p.length;G$t<G$A;G$t++)if((G$P=G$p[G$t]).callee)switch(G$P.callee){case G$u._save:case 7:G$w.push(G$D),G$D=G$D.clone();break;case G$u._restore:case 8:G$D=G$w.pop();break;case G$u._scale:case 5:G$J.identity(),G$J.translate(-G$P[2],-G$P[3]),G$J.scale(G$P[0],G$P[1]),G$J.translate(G$P[2],G$P[3]),this._switchMatrix(G$D,G$J);break;case G$u._rotate:case 3:G$J.identity(),G$J.translate(-G$P[1],-G$P[2]),G$J.rotate(G$P[0]),G$J.translate(G$P[1],G$P[2]),this._switchMatrix(G$D,G$J);break;case G$u._translate:case 6:G$J.identity(),G$J.translate(G$P[0],G$P[1]),this._switchMatrix(G$D,G$J);break;case G$u._transform:case 4:G$J.identity(),G$J.translate(-G$P[1],-G$P[2]),G$J.concat(G$P[0]),G$J.translate(G$P[1],G$P[2]),this._switchMatrix(G$D,G$J);break;case 16:case 24:G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[0],G$P[1],G$P[2],G$P[3]),G$D);break;case 17:G$D.copyTo(G$J),G$J.concat(G$P[4]),G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[0],G$P[1],G$P[2],G$P[3]),G$J);break;case G$u._drawTexture:G$j=G$P[0],G$T?G$P[3]&&G$P[4]?G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[1],G$P[2],G$P[3],G$P[4]),G$D):(G$j=G$P[0],G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[1],G$P[2],G$j.width,G$j.height),G$D)):(G$q=(G$P[3]||G$j.sourceWidth)/G$j.width,G$M=(G$P[4]||G$j.sourceHeight)/G$j.height,G$z=G$q*G$j.sourceWidth,G$b=G$M*G$j.sourceHeight,G$K=0<G$j.offsetX?G$j.offsetX:0,G$Y=0<G$j.offsetY?G$j.offsetY:0,G$K*=G$q,G$Y*=G$M,G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[1]-G$K,G$P[2]-G$Y,G$z,G$b),G$D));break;case G$u._fillTexture:G$P[3]&&G$P[4]?G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[1],G$P[2],G$P[3],G$P[4]),G$D):(G$j=G$P[0],G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[1],G$P[2],G$j.width,G$j.height),G$D));break;case G$u._drawTextureWithTransform:var G$L;G$L=G$P[5]?(G$D.copyTo(G$J),G$J.concat(G$P[5]),G$J):G$D,G$T?G$P[3]&&G$P[4]?G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[1],G$P[2],G$P[3],G$P[4]),G$L):(G$j=G$P[0],G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[1],G$P[2],G$j.width,G$j.height),G$L)):(G$j=G$P[0],G$q=(G$P[3]||G$j.sourceWidth)/G$j.width,G$M=(G$P[4]||G$j.sourceHeight)/G$j.height,G$z=G$q*G$j.sourceWidth,G$b=G$M*G$j.sourceHeight,G$K=0<G$j.offsetX?G$j.offsetX:0,G$Y=0<G$j.offsetY?G$j.offsetY:0,G$K*=G$q,G$Y*=G$M,G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[1]-G$K,G$P[2]-G$Y,G$z,G$b),G$L));break;case G$u._drawRect:case 13:G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[0],G$P[1],G$P[2],G$P[3]),G$D);break;case G$u._drawCircle:case G$u._fillCircle:case 14:G$W._addPointArrToRst(G$l,G$r._getBoundPointS(G$P[0]-G$P[2],G$P[1]-G$P[2],G$P[2]+G$P[2],G$P[2]+G$P[2]),G$D);break;case G$u._drawLine:case 20:G$W._tempPoints.length=0;var G$i;G$i=.5*G$P[5],G$P[0]==G$P[2]?G$W._tempPoints.push(G$P[0]+G$i,G$P[1],G$P[2]+G$i,G$P[3],G$P[0]-G$i,G$P[1],G$P[2]-G$i,G$P[3]):G$P[1]==G$P[3]?G$W._tempPoints.push(G$P[0],G$P[1]+G$i,G$P[2],G$P[3]+G$i,G$P[0],G$P[1]-G$i,G$P[2],G$P[3]-G$i):G$W._tempPoints.push(G$P[0],G$P[1],G$P[2],G$P[3]),G$W._addPointArrToRst(G$l,G$W._tempPoints,G$D);break;case G$u._drawCurves:case 22:G$W._addPointArrToRst(G$l,G$m.I.getBezierPoints(G$P[2]),G$D,G$P[0],G$P[1]);break;case G$u._drawPoly:case G$u._drawLines:case 18:G$W._addPointArrToRst(G$l,G$P[2],G$D,G$P[0],G$P[1]);break;case G$u._drawPath:case 19:G$W._addPointArrToRst(G$l,this._getPathPoints(G$P[2]),G$D,G$P[0],G$P[1]);break;case G$u._drawPie:case 15:G$W._addPointArrToRst(G$l,this._getPiePoints(G$P[0],G$P[1],G$P[2],G$P[3],G$P[4]),G$D)}return 200<G$l.length?G$l=G$V.copyArray(G$l,G$r._getWrapRec(G$l)._getBoundPoints()):8<G$l.length&&(G$l=G$c.scanPList(G$l)),G$l},G$T._switchMatrix=function(G$T,G$l){G$l.concat(G$T),G$l.copyTo(G$T)},G$T._getPiePoints=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$W._tempPoints;G$W._tempPoints.length=0,G$D.push(G$T,G$l);var G$P=(G$p-G$u)%(2*Math.PI)/10,G$j=NaN,G$J=G$u;for(G$j=0;G$j<=10;G$j++)G$D.push(G$T+G$w*Math.cos(G$J),G$l+G$w*Math.sin(G$J)),G$J+=G$P;return G$D},G$T._getPathPoints=function(G$T){var G$l,G$w,G$u=0,G$p=G$W._tempPoints;for(G$p.length=0,G$l=G$T.length,G$u=0;G$u<G$l;G$u++)1<(G$w=G$T[G$u]).length&&(G$p.push(G$w[1],G$w[2]),3<G$w.length&&G$p.push(G$w[3],G$w[4]));return G$p},G$W._addPointArrToRst=function(G$T,G$l,G$w,G$u,G$p){void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0);var G$D,G$P=0;for(G$D=G$l.length,G$P=0;G$P<G$D;G$P+=2)G$W._addPointToRst(G$T,G$l[G$P]+G$u,G$l[G$P+1]+G$p,G$w)},G$W._addPointToRst=function(G$T,G$l,G$w,G$u){var G$p=G$s.TEMP;G$p.setTo(G$l||0,G$w||0),G$u.transformPoint(G$p),G$T.push(G$p.x,G$p.y)},G$W._tempPoints=[],G$W._tempMatrixArrays=[],G$W._tempCmds=[],G$J(G$W,["_tempMatrix",function(){return this._tempMatrix=new G$y},"_initMatrix",function(){return this._initMatrix=new G$y}]),G$W}(),G$D=function(){function G$T(){}G$M(G$T,"laya.events.Event");var G$l=G$T.prototype;return G$l.setTo=function(G$T,G$l,G$w){return this.type=G$T,this.currentTarget=G$l,this.target=G$w,this},G$l.stopPropagation=function(){this._stoped=!0},G$Y(0,G$l,"stageY",function(){return G$B.stage.mouseY}),G$Y(0,G$l,"charCode",function(){return this.nativeEvent.charCode}),G$Y(0,G$l,"touches",function(){var G$T=this.nativeEvent.touches;if(G$T)for(var G$l=G$B.stage,G$w=0,G$u=G$T.length;G$w<G$u;G$w++){var G$p=G$T[G$w],G$D=G$s.TEMP;G$D.setTo(G$p.clientX,G$p.clientY),G$l._canvasTransform.invertTransformPoint(G$D),G$l.transform.invertTransformPoint(G$D),G$p.stageX=G$D.x,G$p.stageY=G$D.y}return G$T}),G$Y(0,G$l,"keyLocation",function(){return this.nativeEvent.keyLocation}),G$Y(0,G$l,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),G$Y(0,G$l,"altKey",function(){return this.nativeEvent.altKey}),G$Y(0,G$l,"shiftKey",function(){return this.nativeEvent.shiftKey}),G$Y(0,G$l,"stageX",function(){return G$B.stage.mouseX}),G$T.EMPTY=new G$T,G$T.MOUSE_DOWN="mousedown",G$T.MOUSE_UP="mouseup",G$T.CLICK="click",G$T.RIGHT_MOUSE_DOWN="rightmousedown",G$T.RIGHT_MOUSE_UP="rightmouseup",G$T.RIGHT_CLICK="rightclick",G$T.MOUSE_MOVE="mousemove",G$T.MOUSE_OVER="mouseover",G$T.MOUSE_OUT="mouseout",G$T.MOUSE_WHEEL="mousewheel",G$T.ROLL_OVER="mouseover",G$T.ROLL_OUT="mouseout",G$T.DOUBLE_CLICK="doubleclick",G$T.CHANGE="change",G$T.CHANGED="changed",G$T.RESIZE="resize",G$T.ADDED="added",G$T.REMOVED="removed",G$T.DISPLAY="display",G$T.UNDISPLAY="undisplay",G$T.ERROR="error",G$T.COMPLETE="complete",G$T.LOADED="loaded",G$T.INITED="inited",G$T.PROGRESS="progress",G$T.INPUT="input",G$T.RENDER="render",G$T.OPEN="open",G$T.MESSAGE="message",G$T.CLOSE="close",G$T.KEY_DOWN="keydown",G$T.KEY_PRESS="keypress",G$T.KEY_UP="keyup",G$T.FRAME="enterframe",G$T.DRAG_START="dragstart",G$T.DRAG_MOVE="dragmove",G$T.DRAG_END="dragend",G$T.ENTER="enter",G$T.SELECT="select",G$T.BLUR="blur",G$T.FOCUS="focus",G$T.VISIBILITY_CHANGE="visibilitychange",G$T.FOCUS_CHANGE="focuschange",G$T.PLAYED="played",G$T.PAUSED="paused",G$T.STOPPED="stopped",G$T.START="start",G$T.END="end",G$T.ENABLE_CHANGED="enablechanged",G$T.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",G$T.COMPONENT_ADDED="componentadded",G$T.COMPONENT_REMOVED="componentremoved",G$T.LAYER_CHANGED="layerchanged",G$T.HIERARCHY_LOADED="hierarchyloaded",G$T.RECOVERED="recovered",G$T.RELEASED="released",G$T.LINK="link",G$T.LABEL="label",G$T.FULL_SCREEN_CHANGE="fullscreenchange",G$T.DEVICE_LOST="devicelost",G$T.MESH_CHANGED="meshchanged",G$T.MATERIAL_CHANGED="materialchanged",G$T.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",G$T.ANIMATION_CHANGED="animationchanged",G$T.TRIGGER_ENTER="triggerenter",G$T.TRIGGER_STAY="triggerstay",G$T.TRIGGER_EXIT="triggerexit",G$T.TRAIL_FILTER_CHANGE="trailfilterchange",G$T.DOMINO_FILTER_CHANGE="dominofilterchange",G$T}(),G$z=(function(){function G$T(){}G$M(G$T,"laya.events.Keyboard"),G$T.NUMBER_0=48,G$T.NUMBER_1=49,G$T.NUMBER_2=50,G$T.NUMBER_3=51,G$T.NUMBER_4=52,G$T.NUMBER_5=53,G$T.NUMBER_6=54,G$T.NUMBER_7=55,G$T.NUMBER_8=56,G$T.NUMBER_9=57,G$T.A=65,G$T.B=66,G$T.C=67,G$T.D=68,G$T.E=69,G$T.F=70,G$T.G=71,G$T.H=72,G$T.I=73,G$T.J=74,G$T.K=75,G$T.L=76,G$T.M=77,G$T.N=78,G$T.O=79,G$T.P=80,G$T.Q=81,G$T.R=82,G$T.S=83,G$T.T=84,G$T.U=85,G$T.V=86,G$T.W=87,G$T.X=88,G$T.Y=89,G$T.Z=90,G$T.F1=112,G$T.F2=113,G$T.F3=114,G$T.F4=115,G$T.F5=116,G$T.F6=117,G$T.F7=118,G$T.F8=119,G$T.F9=120,G$T.F10=121,G$T.F11=122,G$T.F12=123,G$T.F13=124,G$T.F14=125,G$T.F15=126,G$T.NUMPAD=21,G$T.NUMPAD_0=96,G$T.NUMPAD_1=97,G$T.NUMPAD_2=98,G$T.NUMPAD_3=99,G$T.NUMPAD_4=100,G$T.NUMPAD_5=101,G$T.NUMPAD_6=102,G$T.NUMPAD_7=103,G$T.NUMPAD_8=104,G$T.NUMPAD_9=105,G$T.NUMPAD_ADD=107,G$T.NUMPAD_DECIMAL=110,G$T.NUMPAD_DIVIDE=111,G$T.NUMPAD_ENTER=108,G$T.NUMPAD_MULTIPLY=106,G$T.NUMPAD_SUBTRACT=109,G$T.SEMICOLON=186,G$T.EQUAL=187,G$T.COMMA=188,G$T.MINUS=189,G$T.PERIOD=190,G$T.SLASH=191,G$T.BACKQUOTE=192,G$T.LEFTBRACKET=219,G$T.BACKSLASH=220,G$T.RIGHTBRACKET=221,G$T.QUOTE=222,G$T.ALTERNATE=18,G$T.BACKSPACE=8,G$T.CAPS_LOCK=20,G$T.COMMAND=15,G$T.CONTROL=17,G$T.DELETE=46,G$T.ENTER=13,G$T.ESCAPE=27,G$T.PAGE_UP=33,G$T.PAGE_DOWN=34,G$T.END=35,G$T.HOME=36,G$T.LEFT=37,G$T.UP=38,G$T.RIGHT=39,G$T.DOWN=40,G$T.SHIFT=16,G$T.SPACE=32,G$T.TAB=9,G$T.INSERT=45}(),function(){function G$p(){}return G$M(G$p,"laya.events.KeyBoardManager"),G$p.__init__=function(){G$p._addEvent("keydown"),G$p._addEvent("keypress"),G$p._addEvent("keyup")},G$p._addEvent=function(G$l){G$H.document.addEventListener(G$l,function(G$T){laya.events.KeyBoardManager._dispatch(G$T,G$l)},!0)},G$p._dispatch=function(G$T,G$l){if(G$p.enabled){G$p._event._stoped=!1,G$p._event.nativeEvent=G$T,G$p._event.keyCode=G$T.keyCode||G$T.which||G$T.charCode,"keydown"===G$l?G$p._pressKeys[G$p._event.keyCode]=!0:"keyup"===G$l&&(G$p._pressKeys[G$p._event.keyCode]=null);for(var G$w=G$B.stage.focus&&null!=G$B.stage.focus.event&&G$B.stage.focus.displayedInStage?G$B.stage.focus:G$B.stage,G$u=G$w;G$u;)G$u.event(G$l,G$p._event.setTo(G$l,G$u,G$w)),G$u=G$u.parent}},G$p.hasKeyDown=function(G$T){return G$p._pressKeys[G$T]},G$p._pressKeys={},G$p.enabled=!0,G$J(G$p,["_event",function(){return this._event=new G$D}]),G$p}()),G$t=(function(){function G$T(){}G$M(G$T,"laya.events.KeyLocation"),G$T.STANDARD=0,G$T.LEFT=1,G$T.RIGHT=2,G$T.NUM_PAD=3}(),function(){function G$q(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=G$H.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new G$D,this._matrix=new G$y,this._point=new G$s,this._rect=new G$r,this._prePoint=new G$s,this._curTouchID=NaN}G$M(G$q,"laya.events.MouseManager");var G$T=G$q.prototype;return G$T.__init__=function(G$T,G$l){var G$w=this;this._stage=G$T;var G$u=this,G$p=this._eventList;G$l.oncontextmenu=function(G$T){if(G$q.enabled)return!1},G$l.addEventListener("mousedown",function(G$T){G$q.enabled&&(G$H.onIE||G$T.preventDefault(),G$p.push(G$T),G$u.mouseDownTime=G$H.now())}),G$l.addEventListener("mouseup",function(G$T){G$q.enabled&&(G$T.preventDefault(),G$p.push(G$T),G$u.mouseDownTime=-G$H.now())},!0),G$l.addEventListener("mousemove",function(G$T){if(G$q.enabled){G$T.preventDefault();var G$l=G$H.now();if(G$l-G$u._lastMoveTimer<10)return;G$u._lastMoveTimer=G$l,G$p.push(G$T)}},!0),G$l.addEventListener("mouseout",function(G$T){G$q.enabled&&G$p.push(G$T)}),G$l.addEventListener("mouseover",function(G$T){G$q.enabled&&G$p.push(G$T)}),G$l.addEventListener("touchstart",function(G$T){G$q.enabled&&(G$p.push(G$T),G$q._isFirstTouch||G$cT.isInputting||G$T.preventDefault(),G$u.mouseDownTime=G$H.now())}),G$l.addEventListener("touchend",function(G$T){G$q.enabled?(G$q._isFirstTouch||G$cT.isInputting||G$T.preventDefault(),G$q._isFirstTouch=!1,G$p.push(G$T),G$u.mouseDownTime=-G$H.now()):G$w._curTouchID=NaN},!0),G$l.addEventListener("touchmove",function(G$T){G$q.enabled&&(G$T.preventDefault(),G$p.push(G$T))},!0),G$l.addEventListener("touchcancel",function(G$T){G$q.enabled?(G$T.preventDefault(),G$p.push(G$T)):G$w._curTouchID=NaN},!0),G$l.addEventListener("mousewheel",function(G$T){G$q.enabled&&G$p.push(G$T)}),G$l.addEventListener("DOMMouseScroll",function(G$T){G$q.enabled&&G$p.push(G$T)})},G$T.initEvent=function(G$T,G$l){var G$w;this._event._stoped=!1,this._event.nativeEvent=G$l||G$T,this._target=null,this._point.setTo(G$T.pageX||G$T.clientX,G$T.pageY||G$T.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=G$T.identifier||0,this._tTouchID=this._event.touchId,(G$w=G$A.I._event)._stoped=!1,G$w.nativeEvent=this._event.nativeEvent,G$w.touchId=this._event.touchId},G$T.checkMouseWheel=function(G$T){this._event.delta=G$T.wheelDelta?.025*G$T.wheelDelta:-G$T.detail;for(var G$l=G$A.I.getLastOvers(),G$w=0,G$u=G$l.length;G$w<G$u;G$w++){var G$p=G$l[G$w];G$p.event("mousewheel",this._event.setTo("mousewheel",G$p,this._target))}},G$T.onMouseMove=function(G$T){G$A.I.onMouseMove(G$T,this._tTouchID)},G$T.onMouseDown=function(G$T){if(G$cT.isInputting&&G$B.stage.focus&&G$B.stage.focus.focus&&!G$B.stage.focus.contains(this._target)){var G$l=G$B.stage.focus._tf||G$B.stage.focus,G$w=G$T._tf||G$T;G$w instanceof laya.display.Input&&G$w.multiline==G$l.multiline?G$l._focusOut():G$l.focus=!1}G$A.I.onMouseDown(G$T,this._tTouchID,this._isLeftMouse)},G$T.onMouseUp=function(G$T){G$A.I.onMouseUp(G$T,this._tTouchID,this._isLeftMouse)},G$T.check=function(G$T,G$l,G$w,G$u){this._point.setTo(G$l,G$w),G$T.fromParentPoint(this._point),G$l=this._point.x,G$w=this._point.y;var G$p=G$T.scrollRect;if(G$p&&(this._rect.setTo(G$p.x,G$p.y,G$p.width,G$p.height),!this._rect.contains(G$l,G$w)))return!1;if(!this.disableMouseEvent){if(G$T.hitTestPrior&&!G$T.mouseThrough&&!this.hitTest(G$T,G$l,G$w))return!1;for(var G$D=G$T._childs.length-1;-1<G$D;G$D--){var G$P=G$T._childs[G$D];if(!G$P.destroyed&&G$P.mouseEnabled&&G$P.visible&&this.check(G$P,G$l,G$w,G$u))return!0}}var G$j=!(!G$T.hitTestPrior||G$T.mouseThrough||this.disableMouseEvent)||this.hitTest(G$T,G$l,G$w);return G$j?(this._target=G$T,G$u.call(this,G$T)):G$u===this.onMouseUp&&G$T===this._stage&&(this._target=this._stage,G$u.call(this,this._target)),G$j},G$T.hitTest=function(G$T,G$l,G$w){var G$u=!1;if(G$T.scrollRect&&(G$l-=G$T.scrollRect.x,G$w-=G$T.scrollRect.y),G$T.hitArea instanceof laya.utils.HitArea)return G$T.hitArea.isHit(G$l,G$w);if(0<G$T.width&&0<G$T.height||G$T.mouseThrough||G$T.hitArea)if(G$T.mouseThrough)G$u=G$T.getGraphicBounds().contains(G$l,G$w);else{var G$p=this._rect;G$T.hitArea?G$p=G$T.hitArea:G$p.setTo(0,0,G$T.width,G$T.height),G$u=G$p.contains(G$l,G$w)}return G$u},G$T.runEvent=function(){var G$T=this._eventList.length;if(G$T){this.mouseEventTime=G$H.now();var G$l,G$w=0,G$u=0,G$p=0;try{for(;G$w<G$T;){var G$D=this._eventList[G$w];switch("mousemove"!==G$D.type&&(this._prePoint.x=this._prePoint.y=-1e6),G$D.type){case"mousedown":this._touchIDs[0]=this._id++,G$q._isTouchRespond?G$q._isTouchRespond=!1:(this._isLeftMouse=0===G$D.button,this.initEvent(G$D),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===G$D.button,this.initEvent(G$D),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-G$D.clientX)+Math.abs(this._prePoint.y-G$D.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=G$D.clientX,this._prePoint.y=G$D.clientY,this.initEvent(G$D),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":G$q._isTouchRespond=!0,this._isLeftMouse=!0;var G$P=G$D.changedTouches;for(G$u=0,G$p=G$P.length;G$u<G$p;G$u++)G$l=G$P[G$u],(G$q.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=G$l.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[G$l.identifier]=this._id++,this.initEvent(G$l,G$D),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":G$q._isTouchRespond=!0,this._isLeftMouse=!0;var G$j=G$D.changedTouches;for(G$u=0,G$p=G$j.length;G$u<G$p;G$u++)if(G$l=G$j[G$u],G$q.multiTouchEnabled||G$l.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(G$l,G$D);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var G$J=G$D.changedTouches;for(G$u=0,G$p=G$J.length;G$u<G$p;G$u++)G$l=G$J[G$u],(G$q.multiTouchEnabled||G$l.identifier==this._curTouchID)&&(this.initEvent(G$l,G$D),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(G$D);break;case"mouseout":G$A.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}G$w++}}catch(G$T){throw this._eventList.length=0,G$T}this._eventList.length=0}},G$q.enabled=!0,G$q.multiTouchEnabled=!0,G$q._isTouchRespond=!1,G$q._isFirstTouch=!0,G$J(G$q,["instance",function(){return this.instance=new G$q}]),G$q}()),G$A=function(){function G$Y(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new G$D}G$M(G$Y,"laya.events.TouchManager");var G$T=G$Y.prototype;return G$T._clearTempArrs=function(){G$Y._oldArr.length=0,G$Y._newArr.length=0,G$Y._tEleArr.length=0},G$T.getTouchFromArr=function(G$T,G$l){var G$w,G$u,G$p=0;for(G$w=G$l.length,G$p=0;G$p<G$w;G$p++)if((G$u=G$l[G$p]).id==G$T)return G$u;return null},G$T.removeTouchFromArr=function(G$T,G$l){var G$w=0;for(G$w=G$l.length-1;0<=G$w;G$w--)G$l[G$w].id==G$T&&G$l.splice(G$w,1)},G$T.createTouchO=function(G$T,G$l){var G$w;return(G$w=G$g.getItem("TouchData")||{}).id=G$l,G$w.tar=G$T,G$w},G$T.onMouseDown=function(G$T,G$l,G$w){var G$u,G$p,G$D,G$P;(void 0===G$w&&(G$w=!1),this.enable)&&(G$u=this.getTouchFromArr(G$l,this.preOvers),G$D=this.getEles(G$T,null,G$Y._tEleArr),G$u?G$u.tar=G$T:(G$p=this.createTouchO(G$T,G$l),this.preOvers.push(G$p)),G$H.onMobile&&this.sendEvents(G$D,"mouseover",G$l),G$P=G$w?this.preDowns:this.preRightDowns,(G$u=this.getTouchFromArr(G$l,G$P))?G$u.tar=G$T:(G$p=this.createTouchO(G$T,G$l),G$P.push(G$p)),this.sendEvents(G$D,G$w?"mousedown":"rightmousedown",G$l),this._clearTempArrs())},G$T.sendEvents=function(G$T,G$l,G$w){void 0===G$w&&(G$w=0);var G$u,G$p,G$D,G$P=0;for(G$u=G$T.length,this._event._stoped=!1,G$p=G$T[0],G$P=0;G$P<G$u;G$P++){if((G$D=G$T[G$P]).destroyed)return;if(G$D.event(G$l,this._event.setTo(G$l,G$D,G$p)),this._event._stoped)break}},G$T.getEles=function(G$T,G$l,G$w){for(G$w?G$w.length=0:G$w=[];G$T&&G$T!=G$l;)G$w.push(G$T),G$T=G$T.parent;return G$w},G$T.checkMouseOutAndOverOfMove=function(G$T,G$l,G$w){if(void 0===G$w&&(G$w=0),G$l!=G$T){var G$u,G$p,G$D=0,G$P=0;if(G$l.contains(G$T))G$p=this.getEles(G$T,G$l,G$Y._tEleArr),this.sendEvents(G$p,"mouseover",G$w);else if(G$T.contains(G$l))G$p=this.getEles(G$l,G$T,G$Y._tEleArr),this.sendEvents(G$p,"mouseout",G$w);else{var G$j,G$J;(G$p=G$Y._tEleArr).length=0,G$j=this.getEles(G$l,null,G$Y._oldArr),G$J=this.getEles(G$T,null,G$Y._newArr),G$P=G$j.length;var G$q=0;for(G$D=0;G$D<G$P;G$D++){if(G$u=G$j[G$D],0<=(G$q=G$J.indexOf(G$u))){G$J.splice(G$q,G$J.length-G$q);break}G$p.push(G$u)}0<G$p.length&&this.sendEvents(G$p,"mouseout",G$w),0<G$J.length&&this.sendEvents(G$J,"mouseover",G$w)}}},G$T.onMouseMove=function(G$T,G$l){var G$w,G$u;this.enable&&((G$w=this.getTouchFromArr(G$l,this.preOvers))?(this.checkMouseOutAndOverOfMove(G$T,G$w.tar),G$w.tar=G$T,G$u=this.getEles(G$T,null,G$Y._tEleArr)):(G$u=this.getEles(G$T,null,G$Y._tEleArr),this.sendEvents(G$u,"mouseover",G$l),this.preOvers.push(this.createTouchO(G$T,G$l))),this.sendEvents(G$u,"mousemove",G$l),this._clearTempArrs())},G$T.getLastOvers=function(){return(G$Y._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,G$Y._tEleArr):(G$Y._tEleArr.push(G$B.stage),G$Y._tEleArr)},G$T.stageMouseOut=function(){var G$T;G$T=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(G$T,"mouseout",0)},G$T.onMouseUp=function(G$T,G$l,G$w){if(void 0===G$w&&(G$w=!1),this.enable){var G$u,G$p,G$D,G$P,G$j,G$J,G$q=0,G$M=0,G$z=G$H.onMobile;if(G$p=this.getEles(G$T,null,G$Y._tEleArr),this.sendEvents(G$p,G$w?"mouseup":"rightmouseup",G$l),G$J=G$w?this.preDowns:this.preRightDowns,G$u=this.getTouchFromArr(G$l,G$J)){var G$b,G$K=G$H.now();if(G$b=G$K-this._lastClickTime<300,this._lastClickTime=G$K,G$T==G$u.tar)G$j=G$p;else for(G$D=this.getEles(G$u.tar,null,G$Y._oldArr),(G$j=G$Y._newArr).length=0,G$M=G$D.length,G$q=0;G$q<G$M;G$q++)G$P=G$D[G$q],0<=G$p.indexOf(G$P)&&G$j.push(G$P);0<G$j.length&&this.sendEvents(G$j,G$w?"click":"rightclick",G$l),G$w&&G$b&&this.sendEvents(G$j,"doubleclick",G$l),this.removeTouchFromArr(G$l,G$J),G$u.tar=null,G$g.recover("TouchData",G$u)}else;(G$u=this.getTouchFromArr(G$l,this.preOvers))&&G$z&&((G$j=this.getEles(G$u.tar,null,G$j))&&0<G$j.length&&this.sendEvents(G$j,"mouseout",G$l),this.removeTouchFromArr(G$l,this.preOvers),G$u.tar=null,G$g.recover("TouchData",G$u)),this._clearTempArrs()}},G$Y._oldArr=[],G$Y._newArr=[],G$Y._tEleArr=[],G$J(G$Y,["I",function(){return this.I=new G$Y}]),G$Y}(),G$L=function(){function G$T(){this._action=null}G$M(G$T,"laya.filters.Filter");var G$l=G$T.prototype;return G$B.imps(G$l,{"laya.filters.IFilter":!0}),G$l.callNative=function(G$T){},G$Y(0,G$l,"type",function(){return-1}),G$Y(0,G$l,"action",function(){return this._action}),G$T.BLUR=16,G$T.COLOR=32,G$T.GLOW=8,G$T._filterStart=null,G$T._filterEnd=null,G$T._EndTarget=null,G$T._recycleScope=null,G$T._filter=null,G$T._useSrc=null,G$T._endSrc=null,G$T._useOut=null,G$T._endOut=null,G$T}(),G$W=function(){function G$T(){this.data=null}G$M(G$T,"laya.filters.ColorFilterAction");var G$l=G$T.prototype;return G$B.imps(G$l,{"laya.filters.IFilterAction":!0}),G$l.apply=function(G$T){var G$l=G$T.ctx.ctx,G$w=G$T.ctx.ctx.canvas;if(0==G$w.width||0==G$w.height)return G$w;for(var G$u,G$p=G$l.getImageData(0,0,G$w.width,G$w.height),G$D=G$p.data,G$P=0,G$j=G$D.length;G$P<G$j;G$P+=4)G$u=this.getColor(G$D[G$P],G$D[G$P+1],G$D[G$P+2],G$D[G$P+3]),0!=G$D[G$P+3]&&(G$D[G$P]=G$u[0],G$D[G$P+1]=G$u[1],G$D[G$P+2]=G$u[2],G$D[G$P+3]=G$u[3]);return G$l.putImageData(G$p,0,0),G$T},G$l.getColor=function(G$T,G$l,G$w,G$u){var G$p=[];if(this.data._mat&&this.data._alpha){var G$D=this.data._mat,G$P=this.data._alpha;G$p[0]=G$D[0]*G$T+G$D[1]*G$l+G$D[2]*G$w+G$D[3]*G$u+G$P[0],G$p[1]=G$D[4]*G$T+G$D[5]*G$l+G$D[6]*G$w+G$D[7]*G$u+G$P[1],G$p[2]=G$D[8]*G$T+G$D[9]*G$l+G$D[10]*G$w+G$D[11]*G$u+G$P[2],G$p[3]=G$D[12]*G$T+G$D[13]*G$l+G$D[14]*G$w+G$D[15]*G$u+G$P[3]}return G$p},G$T}(),G$m=(function(){function G$T(){}G$M(G$T,"laya.maths.Arith"),G$T.formatR=function(G$T){return G$T>Math.PI&&(G$T-=2*Math.PI),G$T<-Math.PI&&(G$T+=2*Math.PI),G$T},G$T.isPOT=function(G$T,G$l){return 0<G$T&&0==(G$T&G$T-1)&&0<G$l&&0==(G$l&G$l-1)},G$T.setMatToArray=function(G$T,G$l){G$T.a,G$T.b,G$T.c,G$T.d,G$T.tx,G$T.ty,G$l[0]=G$T.a,G$l[1]=G$T.b,G$l[4]=G$T.c,G$l[5]=G$T.d,G$l[12]=G$T.tx,G$l[13]=G$T.ty}}(),function(){function G$T(){this._controlPoints=[new G$s,new G$s,new G$s],this._calFun=this.getPoint2}G$M(G$T,"laya.maths.Bezier");var G$l=G$T.prototype;return G$l._switchPoint=function(G$T,G$l){var G$w=this._controlPoints.shift();G$w.setTo(G$T,G$l),this._controlPoints.push(G$w)},G$l.getPoint2=function(G$T,G$l){var G$w=this._controlPoints[0],G$u=this._controlPoints[1],G$p=this._controlPoints[2],G$D=Math.pow(1-G$T,2)*G$w.x+2*G$T*(1-G$T)*G$u.x+Math.pow(G$T,2)*G$p.x,G$P=Math.pow(1-G$T,2)*G$w.y+2*G$T*(1-G$T)*G$u.y+Math.pow(G$T,2)*G$p.y;G$l.push(G$D,G$P)},G$l.getPoint3=function(G$T,G$l){var G$w=this._controlPoints[0],G$u=this._controlPoints[1],G$p=this._controlPoints[2],G$D=this._controlPoints[3],G$P=Math.pow(1-G$T,3)*G$w.x+3*G$u.x*G$T*(1-G$T)*(1-G$T)+3*G$p.x*G$T*G$T*(1-G$T)+G$D.x*Math.pow(G$T,3),G$j=Math.pow(1-G$T,3)*G$w.y+3*G$u.y*G$T*(1-G$T)*(1-G$T)+3*G$p.y*G$T*G$T*(1-G$T)+G$D.y*Math.pow(G$T,3);G$l.push(G$P,G$j)},G$l.insertPoints=function(G$T,G$l){var G$w,G$u=NaN;for(G$w=1/(G$T=0<G$T?G$T:5),G$u=0;G$u<=1;G$u+=G$w)this._calFun(G$u,G$l)},G$l.getBezierPoints=function(G$T,G$l,G$w){void 0===G$l&&(G$l=5),void 0===G$w&&(G$w=2);var G$u,G$p,G$D=0;if((G$u=G$T.length)<2*(G$w+1))return[];switch(G$p=[],G$w){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=G$w;)this._controlPoints.push(new G$s);for(G$D=0;G$D<2*G$w;G$D+=2)this._switchPoint(G$T[G$D],G$T[G$D+1]);for(G$D=2*G$w;G$D<G$u;G$D+=2)this._switchPoint(G$T[G$D],G$T[G$D+1]),G$D/2%G$w==0&&this.insertPoints(G$l,G$p);return G$p},G$J(G$T,["I",function(){return this.I=new G$T}]),G$T}()),G$c=function(){function G$q(){}return G$M(G$q,"laya.maths.GrahamScan"),G$q.multiply=function(G$T,G$l,G$w){return(G$T.x-G$w.x)*(G$l.y-G$w.y)-(G$l.x-G$w.x)*(G$T.y-G$w.y)},G$q.dis=function(G$T,G$l){return(G$T.x-G$l.x)*(G$T.x-G$l.x)+(G$T.y-G$l.y)*(G$T.y-G$l.y)},G$q._getPoints=function(G$T,G$l,G$w){for(void 0===G$l&&(G$l=!1),G$q._mPointList||(G$q._mPointList=[]);G$q._mPointList.length<G$T;)G$q._mPointList.push(new G$s);return G$w||(G$w=[]),G$w.length=0,G$l?G$q.getFrom(G$w,G$q._mPointList,G$T):G$q.getFromR(G$w,G$q._mPointList,G$T),G$w},G$q.getFrom=function(G$T,G$l,G$w){var G$u=0;for(G$u=0;G$u<G$w;G$u++)G$T.push(G$l[G$u]);return G$T},G$q.getFromR=function(G$T,G$l,G$w){var G$u=0;for(G$u=0;G$u<G$w;G$u++)G$T.push(G$l.pop());return G$T},G$q.pListToPointList=function(G$T,G$l){void 0===G$l&&(G$l=!1);var G$w=0,G$u=G$T.length/2,G$p=G$q._getPoints(G$u,G$l,G$q._tempPointList);for(G$w=0;G$w<G$u;G$w++)G$p[G$w].setTo(G$T[G$w+G$w],G$T[G$w+G$w+1]);return G$p},G$q.pointListToPlist=function(G$T){var G$l,G$w=0,G$u=G$T.length,G$p=G$q._temPList;for(G$w=G$p.length=0;G$w<G$u;G$w++)G$l=G$T[G$w],G$p.push(G$l.x,G$l.y);return G$p},G$q.scanPList=function(G$T){return G$V.copyArray(G$T,G$q.pointListToPlist(G$q.scan(G$q.pListToPointList(G$T,!0))))},G$q.scan=function(G$T){var G$l,G$w,G$u,G$p=0,G$D=0,G$P=0,G$j=G$T.length,G$J={};for((G$w=G$q._temArr).length=0,G$p=(G$j=G$T.length)-1;0<=G$p;G$p--)G$u=(G$l=G$T[G$p]).x+"_"+G$l.y,G$J.hasOwnProperty(G$u)||(G$J[G$u]=!0,G$w.push(G$l));for(G$j=G$w.length,G$V.copyArray(G$T,G$w),G$p=1;G$p<G$j;G$p++)(G$T[G$p].y<G$T[G$P].y||G$T[G$p].y==G$T[G$P].y&&G$T[G$p].x<G$T[G$P].x)&&(G$P=G$p);for(G$l=G$T[0],G$T[0]=G$T[G$P],G$T[G$P]=G$l,G$p=1;G$p<G$j-1;G$p++){for(G$D=(G$P=G$p)+1;G$D<G$j;G$D++)(0<G$q.multiply(G$T[G$D],G$T[G$P],G$T[0])||0==G$q.multiply(G$T[G$D],G$T[G$P],G$T[0])&&G$q.dis(G$T[0],G$T[G$D])<G$q.dis(G$T[0],G$T[G$P]))&&(G$P=G$D);G$l=G$T[G$p],G$T[G$p]=G$T[G$P],G$T[G$P]=G$l}if((G$w=G$q._temArr).length=0,G$T.length<3)return G$V.copyArray(G$w,G$T);for(G$w.push(G$T[0],G$T[1],G$T[2]),G$p=3;G$p<G$j;G$p++){for(;2<=G$w.length&&0<=G$q.multiply(G$T[G$p],G$w[G$w.length-1],G$w[G$w.length-2]);)G$w.pop();G$T[G$p]&&G$w.push(G$T[G$p])}return G$w},G$q._mPointList=null,G$q._tempPointList=[],G$q._temPList=[],G$q._temArr=[],G$q}(),G$a=function(){function G$p(){}return G$M(G$p,"laya.maths.MathUtil"),G$p.subtractVector3=function(G$T,G$l,G$w){G$w[0]=G$T[0]-G$l[0],G$w[1]=G$T[1]-G$l[1],G$w[2]=G$T[2]-G$l[2]},G$p.lerp=function(G$T,G$l,G$w){return G$T*(1-G$w)+G$l*G$w},G$p.scaleVector3=function(G$T,G$l,G$w){G$w[0]=G$T[0]*G$l,G$w[1]=G$T[1]*G$l,G$w[2]=G$T[2]*G$l},G$p.lerpVector3=function(G$T,G$l,G$w,G$u){var G$p=G$T[0],G$D=G$T[1],G$P=G$T[2];G$u[0]=G$p+G$w*(G$l[0]-G$p),G$u[1]=G$D+G$w*(G$l[1]-G$D),G$u[2]=G$P+G$w*(G$l[2]-G$P)},G$p.lerpVector4=function(G$T,G$l,G$w,G$u){var G$p=G$T[0],G$D=G$T[1],G$P=G$T[2],G$j=G$T[3];G$u[0]=G$p+G$w*(G$l[0]-G$p),G$u[1]=G$D+G$w*(G$l[1]-G$D),G$u[2]=G$P+G$w*(G$l[2]-G$P),G$u[3]=G$j+G$w*(G$l[3]-G$j)},G$p.slerpQuaternionArray=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){var G$j,G$J,G$q,G$M,G$z,G$b=G$T[G$l+0],G$K=G$T[G$l+1],G$Y=G$T[G$l+2],G$t=G$T[G$l+3],G$A=G$w[G$u+0],G$L=G$w[G$u+1],G$i=G$w[G$u+2],G$W=G$w[G$u+3];return(G$J=G$b*G$A+G$K*G$L+G$Y*G$i+G$t*G$W)<0&&(G$J=-G$J,G$A=-G$A,G$L=-G$L,G$i=-G$i,G$W=-G$W),G$z=1e-6<1-G$J?(G$j=Math.acos(G$J),G$q=Math.sin(G$j),G$M=Math.sin((1-G$p)*G$j)/G$q,Math.sin(G$p*G$j)/G$q):(G$M=1-G$p,G$p),G$D[G$P+0]=G$M*G$b+G$z*G$A,G$D[G$P+1]=G$M*G$K+G$z*G$L,G$D[G$P+2]=G$M*G$Y+G$z*G$i,G$D[G$P+3]=G$M*G$t+G$z*G$W,G$D},G$p.getRotation=function(G$T,G$l,G$w,G$u){return Math.atan2(G$u-G$l,G$w-G$T)/Math.PI*180},G$p.sortBigFirst=function(G$T,G$l){return G$T==G$l?0:G$T<G$l?1:-1},G$p.sortSmallFirst=function(G$T,G$l){return G$T==G$l?0:G$T<G$l?-1:1},G$p.sortNumBigFirst=function(G$T,G$l){return parseFloat(G$l)-parseFloat(G$T)},G$p.sortNumSmallFirst=function(G$T,G$l){return parseFloat(G$T)-parseFloat(G$l)},G$p.sortByKey=function(G$w,G$T,G$l){var G$u;return void 0===G$T&&(G$T=!1),void 0===G$l&&(G$l=!0),G$u=G$T?G$l?G$p.sortNumBigFirst:G$p.sortBigFirst:G$l?G$p.sortNumSmallFirst:G$p.sortSmallFirst,function(G$T,G$l){return G$u(G$T[G$w],G$l[G$w])}},G$p}(),G$y=function(){function G$w(G$T,G$l,G$w,G$u,G$p,G$D){this.inPool=!1,this.bTransform=!1,void 0===G$T&&(G$T=1),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=1),void 0===G$p&&(G$p=0),void 0===G$D&&(G$D=0),this.a=G$T,this.b=G$l,this.c=G$w,this.d=G$u,this.tx=G$p,this.ty=G$D,this._checkTransform()}G$M(G$w,"laya.maths.Matrix");var G$T=G$w.prototype;return G$T.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},G$T._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},G$T.setTranslate=function(G$T,G$l){return this.tx=G$T,this.ty=G$l,this},G$T.translate=function(G$T,G$l){return this.tx+=G$T,this.ty+=G$l,this},G$T.scale=function(G$T,G$l){this.a*=G$T,this.d*=G$l,this.c*=G$T,this.b*=G$l,this.tx*=G$T,this.ty*=G$l,this.bTransform=!0},G$T.rotate=function(G$T){var G$l=Math.cos(G$T),G$w=Math.sin(G$T),G$u=this.a,G$p=this.c,G$D=this.tx;this.a=G$u*G$l-this.b*G$w,this.b=G$u*G$w+this.b*G$l,this.c=G$p*G$l-this.d*G$w,this.d=G$p*G$w+this.d*G$l,this.tx=G$D*G$l-this.ty*G$w,this.ty=G$D*G$w+this.ty*G$l,this.bTransform=!0},G$T.skew=function(G$T,G$l){var G$w=Math.tan(G$T),G$u=Math.tan(G$l),G$p=this.a,G$D=this.b;return this.a+=G$u*this.c,this.b+=G$u*this.d,this.c+=G$w*G$p,this.d+=G$w*G$D,this},G$T.invertTransformPoint=function(G$T){var G$l=this.a,G$w=this.b,G$u=this.c,G$p=this.d,G$D=this.tx,G$P=G$l*G$p-G$w*G$u,G$j=G$p/G$P,G$J=-G$w/G$P,G$q=-G$u/G$P,G$M=G$l/G$P,G$z=(G$u*this.ty-G$p*G$D)/G$P,G$b=-(G$l*this.ty-G$w*G$D)/G$P;return G$T.setTo(G$j*G$T.x+G$q*G$T.y+G$z,G$J*G$T.x+G$M*G$T.y+G$b)},G$T.transformPoint=function(G$T){return G$T.setTo(this.a*G$T.x+this.c*G$T.y+this.tx,this.b*G$T.x+this.d*G$T.y+this.ty)},G$T.transformPointN=function(G$T){return G$T.setTo(this.a*G$T.x+this.c*G$T.y,this.b*G$T.x+this.d*G$T.y)},G$T.transformPointArray=function(G$T,G$l){for(var G$w=G$T.length,G$u=0;G$u<G$w;G$u+=2){var G$p=G$T[G$u],G$D=G$T[G$u+1];G$l[G$u]=this.a*G$p+this.c*G$D+this.tx,G$l[G$u+1]=this.b*G$p+this.d*G$D+this.ty}return G$l},G$T.transformPointArrayScale=function(G$T,G$l){for(var G$w=G$T.length,G$u=0;G$u<G$w;G$u+=2){var G$p=G$T[G$u],G$D=G$T[G$u+1];G$l[G$u]=this.a*G$p+this.c*G$D,G$l[G$u+1]=this.b*G$p+this.d*G$D}return G$l},G$T.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},G$T.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},G$T.invert=function(){var G$T=this.a,G$l=this.b,G$w=this.c,G$u=this.d,G$p=this.tx,G$D=G$T*G$u-G$l*G$w;return this.a=G$u/G$D,this.b=-G$l/G$D,this.c=-G$w/G$D,this.d=G$T/G$D,this.tx=(G$w*this.ty-G$u*G$p)/G$D,this.ty=-(G$T*this.ty-G$l*G$p)/G$D,this},G$T.setTo=function(G$T,G$l,G$w,G$u,G$p,G$D){return this.a=G$T,this.b=G$l,this.c=G$w,this.d=G$u,this.tx=G$p,this.ty=G$D,this},G$T.concat=function(G$T){var G$l=this.a,G$w=this.c,G$u=this.tx;return this.a=G$l*G$T.a+this.b*G$T.c,this.b=G$l*G$T.b+this.b*G$T.d,this.c=G$w*G$T.a+this.d*G$T.c,this.d=G$w*G$T.b+this.d*G$T.d,this.tx=G$u*G$T.a+this.ty*G$T.c+G$T.tx,this.ty=G$u*G$T.b+this.ty*G$T.d+G$T.ty,this},G$T.scaleEx=function(G$T,G$l){var G$w=this.a,G$u=this.b,G$p=this.c,G$D=this.d;0!==G$u||0!==G$p?(this.a=G$T*G$w,this.b=G$T*G$u,this.c=G$l*G$p):(this.a=G$T*G$w,this.b=0*G$D,this.c=0*G$w),this.d=G$l*G$D,this.bTransform=!0},G$T.rotateEx=function(G$T){var G$l=Math.cos(G$T),G$w=Math.sin(G$T),G$u=this.a,G$p=this.b,G$D=this.c,G$P=this.d;0!==G$p||0!==G$D?(this.a=G$l*G$u+G$w*G$D,this.b=G$l*G$p+G$w*G$P,this.c=-G$w*G$u+G$l*G$D,this.d=-G$w*G$p+G$l*G$P):(this.a=G$l*G$u,this.b=G$w*G$P,this.c=-G$w*G$u,this.d=G$l*G$P),this.bTransform=!0},G$T.clone=function(){var G$T=G$w.create();return G$T.a=this.a,G$T.b=this.b,G$T.c=this.c,G$T.d=this.d,G$T.tx=this.tx,G$T.ty=this.ty,G$T.bTransform=this.bTransform,G$T},G$T.copyTo=function(G$T){return G$T.a=this.a,G$T.b=this.b,G$T.c=this.c,G$T.d=this.d,G$T.tx=this.tx,G$T.ty=this.ty,G$T.bTransform=this.bTransform,G$T},G$T.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},G$T.destroy=function(){if(!this.inPool){var G$T=G$w._cache;this.inPool=!0,G$T._length||(G$T._length=0),(G$T[G$T._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},G$w.mul=function(G$T,G$l,G$w){var G$u=G$T.a,G$p=G$T.b,G$D=G$T.c,G$P=G$T.d,G$j=G$T.tx,G$J=G$T.ty,G$q=G$l.a,G$M=G$l.b,G$z=G$l.c,G$b=G$l.d,G$K=G$l.tx,G$Y=G$l.ty;return 0!==G$M||0!==G$z?(G$w.a=G$u*G$q+G$p*G$z,G$w.b=G$u*G$M+G$p*G$b,G$w.c=G$D*G$q+G$P*G$z,G$w.d=G$D*G$M+G$P*G$b,G$w.tx=G$q*G$j+G$z*G$J+G$K,G$w.ty=G$M*G$j+G$b*G$J+G$Y):(G$w.a=G$u*G$q,G$w.b=G$p*G$b,G$w.c=G$D*G$q,G$w.d=G$P*G$b,G$w.tx=G$q*G$j+G$K,G$w.ty=G$b*G$J+G$Y),G$w},G$w.mul16=function(G$T,G$l,G$w){var G$u=G$T.a,G$p=G$T.b,G$D=G$T.c,G$P=G$T.d,G$j=G$T.tx,G$J=G$T.ty,G$q=G$l.a,G$M=G$l.b,G$z=G$l.c,G$b=G$l.d,G$K=G$l.tx,G$Y=G$l.ty;return 0!==G$M||0!==G$z?(G$w[0]=G$u*G$q+G$p*G$z,G$w[1]=G$u*G$M+G$p*G$b,G$w[4]=G$D*G$q+G$P*G$z,G$w[5]=G$D*G$M+G$P*G$b,G$w[12]=G$q*G$j+G$z*G$J+G$K,G$w[13]=G$M*G$j+G$b*G$J+G$Y):(G$w[0]=G$u*G$q,G$w[1]=G$p*G$b,G$w[4]=G$D*G$q,G$w[5]=G$P*G$b,G$w[12]=G$q*G$j+G$K,G$w[13]=G$b*G$J+G$Y),G$w},G$w.mulPre=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){var G$J=G$T.a,G$q=G$T.b,G$M=G$T.c,G$z=G$T.d,G$b=G$T.tx,G$K=G$T.ty;return 0!==G$w||0!==G$u?(G$j.a=G$J*G$l+G$q*G$u,G$j.b=G$J*G$w+G$q*G$p,G$j.c=G$M*G$l+G$z*G$u,G$j.d=G$M*G$w+G$z*G$p,G$j.tx=G$l*G$b+G$u*G$K+G$D,G$j.ty=G$w*G$b+G$p*G$K+G$P):(G$j.a=G$J*G$l,G$j.b=G$q*G$p,G$j.c=G$M*G$l,G$j.d=G$z*G$p,G$j.tx=G$l*G$b+G$D,G$j.ty=G$p*G$K+G$P),G$j},G$w.mulPos=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){var G$J=G$T.a,G$q=G$T.b,G$M=G$T.c,G$z=G$T.d,G$b=G$T.tx,G$K=G$T.ty;return 0!==G$q||0!==G$M?(G$j.a=G$l*G$J+G$w*G$M,G$j.b=G$l*G$q+G$w*G$z,G$j.c=G$u*G$J+G$p*G$M,G$j.d=G$u*G$q+G$p*G$z,G$j.tx=G$J*G$D+G$M*G$P+G$b,G$j.ty=G$q*G$D+G$z*G$P+G$K):(G$j.a=G$l*G$J,G$j.b=G$w*G$z,G$j.c=G$u*G$J,G$j.d=G$p*G$z,G$j.tx=G$J*G$D+G$b,G$j.ty=G$z*G$P+G$K),G$j},G$w.preMul=function(G$T,G$l,G$w){var G$u=G$T.a,G$p=G$T.b,G$D=G$T.c,G$P=G$T.d,G$j=G$l.a,G$J=G$l.b,G$q=G$l.c,G$M=G$l.d,G$z=G$l.tx,G$b=G$l.ty;return G$w.a=G$j*G$u,G$w.b=G$w.c=0,G$w.d=G$M*G$P,G$w.tx=G$z*G$u+G$T.tx,G$w.ty=G$b*G$P+G$T.ty,0===G$J&&0===G$q&&0===G$p&&0===G$D||(G$w.a+=G$J*G$D,G$w.d+=G$q*G$p,G$w.b+=G$j*G$p+G$J*G$P,G$w.c+=G$q*G$u+G$M*G$D,G$w.tx+=G$b*G$D,G$w.ty+=G$z*G$p),G$w},G$w.preMulXY=function(G$T,G$l,G$w,G$u){var G$p=G$T.a,G$D=G$T.b,G$P=G$T.c,G$j=G$T.d;return G$u.a=G$p,G$u.b=G$D,G$u.c=G$P,G$u.d=G$j,G$u.tx=G$l*G$p+G$T.tx+G$w*G$P,G$u.ty=G$w*G$j+G$T.ty+G$l*G$D,G$u},G$w.create=function(){var G$T=G$w._cache,G$l=G$T._length?G$T[--G$T._length]:new G$w;return G$l.inPool=!1,G$l},G$w.EMPTY=new G$w,G$w.TEMP=new G$w,G$w._cache=[],G$w}(),G$s=function(){function G$T(G$T,G$l){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),this.x=G$T,this.y=G$l}G$M(G$T,"laya.maths.Point");var G$l=G$T.prototype;return G$l.setTo=function(G$T,G$l){return this.x=G$T,this.y=G$l,this},G$l.distance=function(G$T,G$l){return Math.sqrt((this.x-G$T)*(this.x-G$T)+(this.y-G$l)*(this.y-G$l))},G$l.toString=function(){return this.x+","+this.y},G$l.normalize=function(){var G$T=Math.sqrt(this.x*this.x+this.y*this.y);if(0<G$T){var G$l=1/G$T;this.x*=G$l,this.y*=G$l}},G$T.TEMP=new G$T,G$T.EMPTY=new G$T,G$T}(),G$r=function(){function G$q(G$T,G$l,G$w,G$u){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=0),this.x=G$T,this.y=G$l,this.width=G$w,this.height=G$u}G$M(G$q,"laya.maths.Rectangle");var G$T=G$q.prototype;return G$T.setTo=function(G$T,G$l,G$w,G$u){return this.x=G$T,this.y=G$l,this.width=G$w,this.height=G$u,this},G$T.copyFrom=function(G$T){return this.x=G$T.x,this.y=G$T.y,this.width=G$T.width,this.height=G$T.height,this},G$T.contains=function(G$T,G$l){return!(this.width<=0||this.height<=0)&&(G$T>=this.x&&G$T<this.right&&G$l>=this.y&&G$l<this.bottom)},G$T.intersects=function(G$T){return!(G$T.x>this.x+this.width||G$T.x+G$T.width<this.x||G$T.y>this.y+this.height||G$T.y+G$T.height<this.y)},G$T.intersection=function(G$T,G$l){return this.intersects(G$T)?(G$l||(G$l=new G$q),G$l.x=Math.max(this.x,G$T.x),G$l.y=Math.max(this.y,G$T.y),G$l.width=Math.min(this.right,G$T.right)-G$l.x,G$l.height=Math.min(this.bottom,G$T.bottom)-G$l.y,G$l):null},G$T.union=function(G$T,G$l){return G$l||(G$l=new G$q),this.clone(G$l),G$T.width<=0||G$T.height<=0?G$l:(G$l.addPoint(G$T.x,G$T.y),G$l.addPoint(G$T.right,G$T.bottom),this)},G$T.clone=function(G$T){return G$T||(G$T=new G$q),G$T.x=this.x,G$T.y=this.y,G$T.width=this.width,G$T.height=this.height,G$T},G$T.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},G$T.equals=function(G$T){return!(!G$T||G$T.x!==this.x||G$T.y!==this.y||G$T.width!==this.width||G$T.height!==this.height)},G$T.addPoint=function(G$T,G$l){return this.x>G$T&&(this.width+=this.x-G$T,this.x=G$T),this.y>G$l&&(this.height+=this.y-G$l,this.y=G$l),this.width<G$T-this.x&&(this.width=G$T-this.x),this.height<G$l-this.y&&(this.height=G$l-this.y),this},G$T._getBoundPoints=function(){var G$T=G$q._temB;return(G$T.length=0)==this.width||0==this.height||G$T.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),G$T},G$T.isEmpty=function(){return this.width<=0||this.height<=0},G$Y(0,G$T,"right",function(){return this.x+this.width}),G$Y(0,G$T,"bottom",function(){return this.y+this.height}),G$q._getBoundPointS=function(G$T,G$l,G$w,G$u){var G$p=G$q._temA;return(G$p.length=0)==G$w||0==G$u||G$p.push(G$T,G$l,G$T+G$w,G$l,G$T,G$l+G$u,G$T+G$w,G$l+G$u),G$p},G$q._getWrapRec=function(G$T,G$l){if(!G$T||G$T.length<1)return G$l?G$l.setTo(0,0,0,0):G$q.TEMP.setTo(0,0,0,0);G$l=G$l||new G$q;var G$w,G$u,G$p,G$D,G$P,G$j=G$T.length,G$J=G$s.TEMP;for(G$p=G$P=-(G$u=G$D=99999),G$w=0;G$w<G$j;G$w+=2)G$J.x=G$T[G$w],G$J.y=G$T[G$w+1],G$u=G$u<G$J.x?G$u:G$J.x,G$D=G$D<G$J.y?G$D:G$J.y,G$p=G$p>G$J.x?G$p:G$J.x,G$P=G$P>G$J.y?G$P:G$J.y;return G$l.setTo(G$u,G$D,G$p-G$u,G$P-G$D)},G$q.EMPTY=new G$q,G$q.TEMP=new G$q,G$q._temB=[],G$q._temA=[],G$q}(),G$o=function(){function G$J(){}return G$M(G$J,"laya.media.SoundManager"),G$Y(1,G$J,"useAudioMusic",function(){return G$J._useAudioMusic},function(G$T){G$J._useAudioMusic=G$T,G$J._musicClass=G$T?G$wT:null}),G$Y(1,G$J,"autoStopMusic",function(){return G$J._autoStopMusic},function(G$T){G$B.stage.off("blur",null,G$J._stageOnBlur),G$B.stage.off("focus",null,G$J._stageOnFocus),G$B.stage.off("visibilitychange",null,G$J._visibilityChange),(G$J._autoStopMusic=G$T)&&(G$B.stage.on("blur",null,G$J._stageOnBlur),G$B.stage.on("focus",null,G$J._stageOnFocus),G$B.stage.on("visibilitychange",null,G$J._visibilityChange))}),G$Y(1,G$J,"muted",function(){return G$J._muted},function(G$T){G$T!=G$J._muted&&(G$T&&G$J.stopAllSound(),G$J.musicMuted=G$T,G$J._muted=G$T)}),G$Y(1,G$J,"musicMuted",function(){return G$J._musicMuted},function(G$T){G$T!=G$J._musicMuted&&(G$T?(G$J._tMusic&&G$J._musicChannel&&!G$J._musicChannel.isStopped?G$J._musicChannel.pause():G$J._musicChannel=null,G$J._musicMuted=G$T):(G$J._musicMuted=G$T,G$J._tMusic&&G$J._musicChannel&&G$J._musicChannel.resume()))}),G$Y(1,G$J,"soundMuted",function(){return G$J._soundMuted},function(G$T){G$J._soundMuted=G$T}),G$J.addChannel=function(G$T){0<=G$J._channels.indexOf(G$T)||(G$J._channels.push(G$T),G$J.autoReleaseSound&&0!=G$J._notUsedCount&&G$J._notUsedUrls[G$T.url]&&(delete G$J._notUsedUrls[G$T.url],0==--G$J._notUsedCount&&G$B.timer.clear(G$J,G$J.disposeSoundIfNotUsed)))},G$J.removeChannel=function(G$T){var G$l=G$J._channels,G$w=G$l.indexOf(G$T);if(-1!=G$w&&(G$l.splice(G$w,1),G$J.autoReleaseSound)){var G$u=G$T.url,G$p=G$J.defaultIntervals[G$u]||2e4;if(0<G$p){var G$D=!0;for(G$w=G$l.length-1;0<=G$w;G$w--)if(G$l[G$w].url==G$u){G$D=!1;break}G$D&&(G$J._notUsedUrls[G$u]=Date.now()+G$p,0==G$J._notUsedCount++&&G$B.timer.loop(1e4,G$J,G$J.disposeSoundIfNotUsed))}}},G$J.disposeSoundIfNotUsed=function(){var G$T=G$J._notUsedUrls;if(0!=G$J._notUsedCount){var G$l=Date.now();for(var G$w in G$T)G$l>=G$T[G$w]&&(delete G$T[G$w],--G$J._notUsedCount,G$J.destroySound(G$w));if(0!=G$J._notUsedCount)return}G$B.timer.clear(G$J,G$J.disposeSoundIfNotUsed)},G$J._visibilityChange=function(){G$B.stage.isVisibility?G$J._stageOnFocus():G$J._stageOnBlur()},G$J._stageOnBlur=function(){G$J._isActive=!1,G$J._musicChannel&&(G$J._musicChannel.isStopped||(G$J._blurPaused=!0,G$J._musicChannel.pause())),G$J.stopAllSound(),G$B.stage.once("mousedown",null,G$J._stageOnFocus)},G$J._recoverWebAudio=function(){G$DT.ctx&&"running"!=G$DT.ctx.state&&G$DT.ctx.resume&&G$DT.ctx.resume()},G$J._stageOnFocus=function(){if(G$J._isActive=!0,G$J._recoverWebAudio(),G$B.stage.off("mousedown",null,G$J._stageOnFocus),G$J._blurPaused){var G$T=G$J._musicChannel;G$T&&G$J._music&&G$T.isStopped&&(G$J._blurPaused=!1,G$J._music._disposed?G$J.playMusic(G$T.url,G$T.loops,G$T.startHandler,G$T.completeHandler,G$T.startTime):G$T.audioBuffer?G$T.resume():G$J._music.play(G$T.startTime,G$T.loops,G$T.startHandler,G$T))}},G$J.playSound=function(G$T,G$l,G$w,G$u,G$p,G$D){if(void 0===G$l&&(G$l=1),void 0===G$D&&(G$D=0),!G$T)return null;if(G$J._muted)return null;if(G$J._recoverWebAudio(),G$T==G$J._tMusic){if(G$J._musicMuted)return null}else{if(!G$J._isActive)return null;if(G$J._soundMuted)return null}var G$P,G$j=G$J._pool[G$T];return G$p||(G$p=G$J._soundClass),G$j||((G$j=new G$p).load(G$T),G$J._pool[G$T]=G$j),(G$P=G$j.play(G$D,G$l,G$w))?(G$T==G$J._tMusic&&(G$J._music=G$j,G$J._isActive||(G$J._blurPaused=!0,G$P.pause())),G$P.url=G$T,G$P.volume=G$T==G$J._tMusic?G$J.musicVolume:G$J.soundVolume,G$P.completeHandler=G$u,G$P):null},G$J.destroySound=function(G$T){var G$l=G$J._pool[G$T];G$l&&(delete G$J._pool[G$T],G$l.dispose())},G$J.playMusic=function(G$T,G$l,G$w,G$u,G$p){return void 0===G$l&&(G$l=0),void 0===G$p&&(G$p=0),G$J._tMusic=G$T,G$J._musicChannel&&G$J._musicChannel.stop(),G$J._musicChannel=G$J.playSound(G$T,G$l,G$w,G$u,null,G$p)},G$J.stopSound=function(G$T){for(var G$l,G$w=G$J._channels.length-1;0<=G$w;G$w--)(G$l=G$J._channels[G$w]).url==G$T&&G$l.stop()},G$J.stopAll=function(){G$J._tMusic=null;var G$T=0;for(G$T=G$J._channels.length-1;0<=G$T;G$T--)G$J._channels[G$T].stop()},G$J.stopAllSound=function(){var G$T,G$l=0;for(G$l=G$J._channels.length-1;0<=G$l;G$l--)(G$T=G$J._channels[G$l]).url!=G$J._tMusic&&G$T.stop()},G$J.stopMusic=function(){G$J._musicChannel&&G$J._musicChannel.stop(),G$J._tMusic=null},G$J.setSoundVolume=function(G$T,G$l){if(G$l)G$J._setVolume(G$l,G$T);else{G$J.soundVolume=G$T;var G$w,G$u=0;for(G$u=G$J._channels.length-1;0<=G$u;G$u--)(G$w=G$J._channels[G$u]).url!=G$J._tMusic&&(G$w.volume=G$T)}},G$J.setMusicVolume=function(G$T){G$J.musicVolume=G$T,G$J._setVolume(G$J._tMusic,G$T)},G$J._setVolume=function(G$T,G$l){for(var G$w,G$u=G$J._channels.length-1;0<=G$u;G$u--)(G$w=G$J._channels[G$u]).url==G$T&&(G$w.volume=G$l)},G$J.musicVolume=1,G$J.soundVolume=1,G$J.playbackRate=1,G$J._useAudioMusic=!0,G$J._muted=!1,G$J._soundMuted=!1,G$J._musicMuted=!1,G$J._tMusic=null,G$J._musicChannel=null,G$J._music=null,G$J._channels=[],G$J._autoStopMusic=!1,G$J._blurPaused=!1,G$J._isActive=!0,G$J._soundClass=null,G$J._musicClass=null,G$J.autoReleaseSound=!0,G$J._pool={},G$J.defaultIntervals={},G$J._notUsedUrls={},G$J._notUsedCount=0,G$J}(),G$I=function(){var G$T;function G$w(){}return G$M(G$w,"laya.net.LocalStorage"),G$w.__init__=function(){G$w._baseClass||(G$w._baseClass=G$T).init(),G$w.items=G$w._baseClass.items,G$w.support=G$w._baseClass.support},G$w.setItem=function(G$T,G$l){G$w._baseClass.setItem(G$T,G$l)},G$w.getItem=function(G$T){return G$w._baseClass.getItem(G$T)},G$w.setJSON=function(G$T,G$l){G$w._baseClass.setJSON(G$T,G$l)},G$w.getJSON=function(G$T){return G$w._baseClass.getJSON(G$T)},G$w.removeItem=function(G$T){G$w._baseClass.removeItem(G$T)},G$w.clear=function(){G$w._baseClass.clear()},G$w._baseClass=null,G$w.items=null,G$w.support=!1,G$w.__init$=function(){G$T=function(){function G$w(){}return G$M(G$w,""),G$w.init=function(){try{G$w.support=!0,G$w.items=G$P.localStorage,G$w.setItem("laya","1"),G$w.removeItem("laya")}catch(G$T){G$w.support=!1}G$w.support||console.log("LocalStorage is not supprot or browser is private mode.")},G$w.setItem=function(G$T,G$l){try{G$w.support&&G$w.items.setItem(G$T,G$l)}catch(G$T){console.warn("set localStorage failed",G$T)}},G$w.getItem=function(G$T){return G$w.support?G$w.items.getItem(G$T):null},G$w.setJSON=function(G$T,G$l){try{G$w.support&&G$w.items.setItem(G$T,JSON.stringify(G$l))}catch(G$T){console.warn("set localStorage failed",G$T)}},G$w.getJSON=function(G$T){return JSON.parse(G$w.support?G$w.items.getItem(G$T):null)},G$w.removeItem=function(G$T){G$w.support&&G$w.items.removeItem(G$T)},G$w.clear=function(){G$w.support&&G$w.items.clear()},G$w.items=null,G$w.support=!1,G$w}()},G$w}(),G$v=(function(){function G$u(){}G$M(G$u,"laya.net.ResourceVersion"),G$u.enable=function(G$T,G$l,G$w){void 0===G$w&&(G$w=2),laya.net.ResourceVersion.type=G$w,G$B.loader.load(G$T,G$i.create(null,G$u.onManifestLoaded,[G$l]),null,"json"),G$x.customFormat=G$u.addVersionPrefix},G$u.onManifestLoaded=function(G$T,G$l){G$u.manifest=G$l,G$T.run(),G$l||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},G$u.addVersionPrefix=function(G$T){return G$u.manifest&&G$u.manifest[G$T]?2==G$u.type?G$u.manifest[G$T]:G$u.manifest[G$T]+"/"+G$T:G$T},G$u.FOLDER_VERSION=1,G$u.FILENAME_VERSION=2,G$u.manifest=null,G$u.type=1}(),function(){function G$T(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}G$M(G$T,"laya.net.TTFLoader");var G$l=G$T.prototype;return G$l.load=function(G$T){var G$l=(this._url=G$T).split(".ttf")[0].split("/");this.fontName=G$l[G$l.length-1],G$H.window.conch?this._loadConch():G$H.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},G$l._loadConch=function(){this._http=new G$PT,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},G$l._onHttpLoaded=function(G$T){G$H.window.conch.setFontFaceFromBuffer(this.fontName,G$T),this._clearHttp(),this._complete()},G$l._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},G$l._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},G$l._complete=function(){G$B.timer.clear(this,this._complete),G$B.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},G$l._checkComplete=function(){G$e.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},G$l._loadWithFontFace=function(){var G$T=new G$H.window.FontFace(this.fontName,"url('"+this._url+"')");G$H.window.document.fonts.add(G$T);var G$l=this;G$T.loaded.then(function(){G$l._complete()}),G$T.load()},G$l._createDiv=function(){this._div=G$H.createElement("div"),this._div.innerHTML="laya";var G$T=this._div.style;G$T.fontFamily=this.fontName,G$T.position="absolute",G$T.left="-100px",G$T.top="-100px",G$H.document.body.appendChild(this._div)},G$l._loadWithCSS=function(){var G$T=this,G$l=G$H.createElement("style");G$l.type="text/css",G$H.document.body.appendChild(G$l),G$l.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=G$e.measureText("LayaTTFFont",this._fontTxt).width;var G$w=this;G$l.onload=function(){G$B.timer.once(1e4,G$w,G$T._complete)},G$B.timer.loop(20,this,this._checkComplete),this._createDiv()},G$T._testString="LayaTTFFont",G$T}()),G$x=function(){function G$u(G$T){this._url=null,this._path=null,this._url=G$u.formatURL(G$T),this._path=G$u.getPath(G$T)}G$M(G$u,"laya.net.URL");var G$T=G$u.prototype;return G$Y(0,G$T,"path",function(){return this._path}),G$Y(0,G$T,"url",function(){return this._url}),G$u.formatURL=function(G$T,G$l){if(!G$T)return"null path";if(0<G$T.indexOf(":"))return G$T;null!=G$u.customFormat&&(G$T=G$u.customFormat(G$T,G$l));var G$w=G$T.charAt(0);if("."===G$w)return G$u.formatRelativePath((G$l||G$u.basePath)+G$T);if("~"===G$w)return G$u.rootPath+G$T.substring(1);if("d"===G$w){if(0===G$T.indexOf("data:image"))return G$T}else if("/"===G$w)return G$T;return(G$l||G$u.basePath)+G$T},G$u.formatRelativePath=function(G$T){for(var G$l=G$T.split("/"),G$w=0,G$u=G$l.length;G$w<G$u;G$w++)".."==G$l[G$w]&&(G$l.splice(G$w-1,2),G$w-=2);return G$l.join("/")},G$u.isAbsolute=function(G$T){return 0<G$T.indexOf(":")||"/"==G$T.charAt(0)},G$u.getPath=function(G$T){var G$l=G$T.lastIndexOf("/");return 0<G$l?G$T.substr(0,G$l+1):""},G$u.getFileName=function(G$T){var G$l=G$T.lastIndexOf("/");return 0<G$l?G$T.substr(G$l+1):G$T},G$u.version={},G$u.basePath="",G$u.rootPath="",G$u.customFormat=function(G$T){var G$l=G$u.version[G$T];return!G$R.isConchApp&&G$l&&(G$T+="?v="+G$l),G$T},G$u}(),G$R=function(){function G$p(G$T,G$l){this._timeId=0;var G$w=G$p._mainCanvas.source.style;G$w.position="absolute",G$w.top=G$w.left="0px",G$w.background="#000000",G$p._mainCanvas.source.id="layaCanvas";var G$u=laya.renders.Render.isWebGL;G$p._mainCanvas.source.width=G$T,G$p._mainCanvas.source.height=G$l,G$u&&G$p.WebGL.init(G$p._mainCanvas,G$T,G$l),G$H.container.appendChild(G$p._mainCanvas.source),(G$p._context=new G$F(G$T,G$l,G$u?null:G$p._mainCanvas)).ctx.setIsMainContext(),G$H.window.requestAnimationFrame(function G$T(G$l){G$H.window.requestAnimationFrame(G$T);G$B.stage._loop()}),G$B.stage.on("visibilitychange",this,this._onVisibilitychange)}G$M(G$p,"laya.renders.Render");var G$T=G$p.prototype;return G$T._onVisibilitychange=function(){G$B.stage.isVisibility?0!=this._timeId&&G$H.window.clearInterval(this._timeId):this._timeId=G$H.window.setInterval(this._enterFrame,1e3)},G$T._enterFrame=function(G$T){G$B.stage._loop()},G$Y(1,G$p,"context",function(){return G$p._context}),G$Y(1,G$p,"canvas",function(){return G$p._mainCanvas.source}),G$p._context=null,G$p._mainCanvas=null,G$p.WebGL=null,G$p.isConchNode=!1,G$p.isConchApp=!1,G$p.isConchWebGL=!1,G$p.isWebGL=!1,G$p.is3DMode=!1,G$p.optimizeTextureMemory=function(G$T,G$l){return!0},G$p.__init$=function(){G$P.ConchRenderType=G$P.ConchRenderType||1,G$P.ConchRenderType|=G$P.conch?4:0,G$p.isConchNode=5==(5&G$P.ConchRenderType),G$p.isConchApp=4==(4&G$P.ConchRenderType),G$p.isConchWebGL=6==G$P.ConchRenderType},G$p}(),G$F=function(){function G$P(G$T,G$l,G$w){this.x=0,this.y=0,this._drawTexture=function(G$T,G$l,G$w){G$w[0].loaded&&this.ctx.drawTexture(G$w[0],G$w[1],G$w[2],G$w[3],G$w[4],G$T,G$l)},this._fillTexture=function(G$T,G$l,G$w){G$w[0].loaded&&this.ctx.fillTexture(G$w[0],G$w[1]+G$T,G$w[2]+G$l,G$w[3],G$w[4],G$w[5],G$w[6],G$w[7])},this._drawTextureWithTransform=function(G$T,G$l,G$w){G$w[0].loaded&&this.ctx.drawTextureWithTransform(G$w[0],G$w[1],G$w[2],G$w[3],G$w[4],G$w[5],G$T,G$l,G$w[6])},this._fillQuadrangle=function(G$T,G$l,G$w){this.ctx.fillQuadrangle(G$w[0],G$w[1],G$w[2],G$w[3],G$w[4])},this._drawRect=function(G$T,G$l,G$w){var G$u=this.ctx;null!=G$w[4]&&(G$u.fillStyle=G$w[4],G$u.fillRect(G$T+G$w[0],G$l+G$w[1],G$w[2],G$w[3],null)),null!=G$w[5]&&(G$u.strokeStyle=G$w[5],G$u.lineWidth=G$w[6],G$u.strokeRect(G$T+G$w[0],G$l+G$w[1],G$w[2],G$w[3],G$w[6]))},this._drawPie=function(G$T,G$l,G$w){var G$u=this.ctx;G$R.isWebGL&&G$u.setPathId(G$w[8]),G$u.beginPath(),G$R.isWebGL?(G$u.movePath(G$w[0]+G$T,G$w[1]+G$l),G$u.moveTo(0,0)):G$u.moveTo(G$T+G$w[0],G$l+G$w[1]),G$u.arc(G$T+G$w[0],G$l+G$w[1],G$w[2],G$w[3],G$w[4]),G$u.closePath(),this._fillAndStroke(G$w[5],G$w[6],G$w[7],!0)},this._clipRect=function(G$T,G$l,G$w){this.ctx.clipRect(G$T+G$w[0],G$l+G$w[1],G$w[2],G$w[3])},this._fillRect=function(G$T,G$l,G$w){this.ctx.fillRect(G$T+G$w[0],G$l+G$w[1],G$w[2],G$w[3],G$w[4])},this._drawCircle=function(G$T,G$l,G$w){var G$u=this.ctx;G$R.isWebGL&&G$u.setPathId(G$w[6]),G$f.drawCall++,G$u.beginPath(),G$R.isWebGL&&G$u.movePath(G$w[0]+G$T,G$w[1]+G$l),G$u.arc(G$w[0]+G$T,G$w[1]+G$l,G$w[2],0,G$P.PI2),G$u.closePath(),this._fillAndStroke(G$w[3],G$w[4],G$w[5],!0)},this._fillCircle=function(G$T,G$l,G$w){G$f.drawCall++;var G$u=this.ctx;G$u.beginPath(),G$u.fillStyle=G$w[3],G$u.arc(G$w[0]+G$T,G$w[1]+G$l,G$w[2],0,G$P.PI2),G$u.fill()},this._setShader=function(G$T,G$l,G$w){this.ctx.setShader(G$w[0])},this._drawLine=function(G$T,G$l,G$w){var G$u=this.ctx;G$R.isWebGL&&G$u.setPathId(G$w[6]),G$u.beginPath(),G$u.strokeStyle=G$w[4],G$u.lineWidth=G$w[5],G$R.isWebGL?(G$u.movePath(G$T,G$l),G$u.moveTo(G$w[0],G$w[1]),G$u.lineTo(G$w[2],G$w[3])):(G$u.moveTo(G$T+G$w[0],G$l+G$w[1]),G$u.lineTo(G$T+G$w[2],G$l+G$w[3])),G$u.stroke()},this._drawLines=function(G$T,G$l,G$w){var G$u=this.ctx;G$R.isWebGL&&G$u.setPathId(G$w[5]),G$u.beginPath(),G$T+=G$w[0],G$l+=G$w[1],G$R.isWebGL&&G$u.movePath(G$T,G$l),G$u.strokeStyle=G$w[3],G$u.lineWidth=G$w[4];var G$p=G$w[2],G$D=2,G$P=G$p.length;if(G$R.isWebGL)for(G$u.moveTo(G$p[0],G$p[1]);G$D<G$P;)G$u.lineTo(G$p[G$D++],G$p[G$D++]);else for(G$u.moveTo(G$T+G$p[0],G$l+G$p[1]);G$D<G$P;)G$u.lineTo(G$T+G$p[G$D++],G$l+G$p[G$D++]);G$u.stroke()},this._drawLinesWebGL=function(G$T,G$l,G$w){this.ctx.drawLines(G$T+this.x+G$w[0],G$l+this.y+G$w[1],G$w[2],G$w[3],G$w[4])},this._drawCurves=function(G$T,G$l,G$w){this.ctx.drawCurves(G$T,G$l,G$w)},this._draw=function(G$T,G$l,G$w){G$w[0].call(null,this,G$T,G$l)},this._transformByMatrix=function(G$T,G$l,G$w){this.ctx.transformByMatrix(G$w[0])},this._setTransform=function(G$T,G$l,G$w){this.ctx.setTransform(G$w[0],G$w[1],G$w[2],G$w[3],G$w[4],G$w[5])},this._setTransformByMatrix=function(G$T,G$l,G$w){this.ctx.setTransformByMatrix(G$w[0])},this._save=function(G$T,G$l,G$w){this.ctx.save()},this._restore=function(G$T,G$l,G$w){this.ctx.restore()},this._translate=function(G$T,G$l,G$w){this.ctx.translate(G$w[0],G$w[1])},this._transform=function(G$T,G$l,G$w){this.ctx.translate(G$w[1]+G$T,G$w[2]+G$l);var G$u=G$w[0];this.ctx.transform(G$u.a,G$u.b,G$u.c,G$u.d,G$u.tx,G$u.ty),this.ctx.translate(-G$T-G$w[1],-G$l-G$w[2])},this._rotate=function(G$T,G$l,G$w){this.ctx.translate(G$w[1]+G$T,G$w[2]+G$l),this.ctx.rotate(G$w[0]),this.ctx.translate(-G$T-G$w[1],-G$l-G$w[2])},this._scale=function(G$T,G$l,G$w){this.ctx.translate(G$w[2]+G$T,G$w[3]+G$l),this.ctx.scale(G$w[0],G$w[1]),this.ctx.translate(-G$T-G$w[2],-G$l-G$w[3])},this._alpha=function(G$T,G$l,G$w){this.ctx.globalAlpha*=G$w[0]},this._setAlpha=function(G$T,G$l,G$w){this.ctx.globalAlpha=G$w[0]},this._fillText=function(G$T,G$l,G$w){this.ctx.fillText(G$w[0],G$w[1]+G$T,G$w[2]+G$l,G$w[3],G$w[4],G$w[5])},this._strokeText=function(G$T,G$l,G$w){this.ctx.strokeText(G$w[0],G$w[1]+G$T,G$w[2]+G$l,G$w[3],G$w[4],G$w[5],G$w[6])},this._fillBorderText=function(G$T,G$l,G$w){this.ctx.fillBorderText(G$w[0],G$w[1]+G$T,G$w[2]+G$l,G$w[3],G$w[4],G$w[5],G$w[6],G$w[7])},this._blendMode=function(G$T,G$l,G$w){this.ctx.globalCompositeOperation=G$w[0]},this._beginClip=function(G$T,G$l,G$w){this.ctx.beginClip&&this.ctx.beginClip(G$T+G$w[0],G$l+G$w[1],G$w[2],G$w[3])},this._setIBVB=function(G$T,G$l,G$w){this.ctx.setIBVB(G$w[0]+G$T,G$w[1]+G$l,G$w[2],G$w[3],G$w[4],G$w[5],G$w[6],G$w[7])},this._fillTrangles=function(G$T,G$l,G$w){this.ctx.fillTrangles(G$w[0],G$w[1]+G$T,G$w[2]+G$l,G$w[3],G$w[4])},this._drawPath=function(G$T,G$l,G$w){var G$u=this.ctx;G$R.isWebGL&&G$u.setPathId(-1),G$u.beginPath(),G$T+=G$w[0],G$l+=G$w[1],G$R.isWebGL&&G$u.movePath(G$T,G$l);for(var G$p=G$w[2],G$D=0,G$P=G$p.length;G$D<G$P;G$D++){var G$j=G$p[G$D];switch(G$j[0]){case"moveTo":G$R.isWebGL?G$u.moveTo(G$j[1],G$j[2]):G$u.moveTo(G$T+G$j[1],G$l+G$j[2]);break;case"lineTo":G$R.isWebGL?G$u.lineTo(G$j[1],G$j[2]):G$u.lineTo(G$T+G$j[1],G$l+G$j[2]);break;case"arcTo":G$R.isWebGL?G$u.arcTo(G$j[1],G$j[2],G$j[3],G$j[4],G$j[5]):G$u.arcTo(G$T+G$j[1],G$l+G$j[2],G$T+G$j[3],G$l+G$j[4],G$j[5]);break;case"closePath":G$u.closePath()}}var G$J=G$w[3];null!=G$J&&(G$u.fillStyle=G$J.fillStyle,G$u.fill());var G$q=G$w[4];null!=G$q&&(G$u.strokeStyle=G$q.strokeStyle,G$u.lineWidth=G$q.lineWidth||1,G$u.lineJoin=G$q.lineJoin,G$u.lineCap=G$q.lineCap,G$u.miterLimit=G$q.miterLimit,G$u.stroke())},this.drawPoly=function(G$T,G$l,G$w){this.ctx.drawPoly(G$T+this.x+G$w[0],G$l+this.y+G$w[1],G$w[2],G$w[3],G$w[4],G$w[5],G$w[6])},this._drawPoly=function(G$T,G$l,G$w){var G$u=this.ctx,G$p=G$w[2],G$D=2,G$P=G$p.length;if(G$R.isWebGL)for(G$u.setPathId(G$w[6]),G$u.beginPath(),G$T+=G$w[0],G$l+=G$w[1],G$u.movePath(G$T,G$l),G$u.moveTo(G$p[0],G$p[1]);G$D<G$P;)G$u.lineTo(G$p[G$D++],G$p[G$D++]);else for(G$u.beginPath(),G$T+=G$w[0],G$l+=G$w[1],G$u.moveTo(G$T+G$p[0],G$l+G$p[1]);G$D<G$P;)G$u.lineTo(G$T+G$p[G$D++],G$l+G$p[G$D++]);G$u.closePath(),this._fillAndStroke(G$w[3],G$w[4],G$w[5],G$w[7])},this._drawSkin=function(G$T,G$l,G$w){var G$u=G$w[0];if(G$u){var G$p=this.ctx;G$u.render(G$p,G$T,G$l)}},this._drawParticle=function(G$T,G$l,G$w){this.ctx.drawParticle(G$T+this.x,G$l+this.y,G$w[0])},this._setFilters=function(G$T,G$l,G$w){this.ctx.setFilters(G$w)},G$w?this.ctx=G$w.getContext("2d"):(G$w=G$WT.create("3D"),this.ctx=G$e.createWebGLContext2D(G$w),G$w._setContext(this.ctx)),G$w.size(G$T,G$l),this.canvas=G$w}G$M(G$P,"laya.renders.RenderContext");var G$T=G$P.prototype;return G$T.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},G$T.drawTexture=function(G$T,G$l,G$w,G$u,G$p){G$T.loaded&&this.ctx.drawTexture(G$T,G$l,G$w,G$u,G$p,this.x,this.y)},G$T._drawTextures=function(G$T,G$l,G$w){G$w[0].loaded&&this.ctx.drawTextures(G$w[0],G$w[1],G$T+this.x,G$l+this.y)},G$T.drawTextureWithTransform=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){G$T.loaded&&this.ctx.drawTextureWithTransform(G$T,G$l,G$w,G$u,G$p,G$D,this.x,this.y,G$P)},G$T.fillQuadrangle=function(G$T,G$l,G$w,G$u,G$p){this.ctx.fillQuadrangle(G$T,G$l,G$w,G$u,G$p)},G$T.drawCanvas=function(G$T,G$l,G$w,G$u,G$p){this.ctx.drawCanvas(G$T,G$l+this.x,G$w+this.y,G$u,G$p)},G$T.drawRect=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$D&&(G$D=1);var G$P=this.ctx;G$P.strokeStyle=G$p,G$P.lineWidth=G$D,G$P.strokeRect(G$T+this.x,G$l+this.y,G$w,G$u,G$D)},G$T._fillAndStroke=function(G$T,G$l,G$w,G$u){void 0===G$u&&(G$u=!1);var G$p=this.ctx;null!=G$T&&(G$p.fillStyle=G$T,G$R.isWebGL?G$p.fill(G$u):G$p.fill()),null!=G$l&&0<G$w&&(G$p.strokeStyle=G$l,G$p.lineWidth=G$w,G$p.stroke())},G$T.clipRect=function(G$T,G$l,G$w,G$u){this.ctx.clipRect(G$T+this.x,G$l+this.y,G$w,G$u)},G$T.fillRect=function(G$T,G$l,G$w,G$u,G$p){this.ctx.fillRect(G$T+this.x,G$l+this.y,G$w,G$u,G$p)},G$T.drawCircle=function(G$T,G$l,G$w,G$u,G$p){void 0===G$p&&(G$p=1),G$f.drawCall++;var G$D=this.ctx;G$D.beginPath(),G$D.strokeStyle=G$u,G$D.lineWidth=G$p,G$D.arc(G$T+this.x,G$l+this.y,G$w,0,G$P.PI2),G$D.stroke()},G$T.drawTriangles=function(G$T,G$l,G$w){if(G$R.isWebGL)this.ctx.drawTriangles(G$w[0],G$T+G$w[1],G$l+G$w[2],G$w[3],G$w[4],G$w[5],G$w[6],G$w[7],G$w[8],G$w[9]);else{var G$u=G$w[5],G$p=0,G$D=G$u.length,G$P=this.ctx;for(G$p=0;G$p<G$D;G$p+=3){var G$j=2*G$u[G$p],G$J=2*G$u[G$p+1],G$q=2*G$u[G$p+2];G$P.drawTriangle(G$w[0],G$w[3],G$w[4],G$j,G$J,G$q,G$w[6],!0)}}},G$T.fillCircle=function(G$T,G$l,G$w,G$u){G$f.drawCall++;var G$p=this.ctx;G$p.beginPath(),G$p.fillStyle=G$u,G$p.arc(G$T+this.x,G$l+this.y,G$w,0,G$P.PI2),G$p.fill()},G$T.setShader=function(G$T){this.ctx.setShader(G$T)},G$T.drawLine=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$D&&(G$D=1);var G$P=this.ctx;G$P.beginPath(),G$P.strokeStyle=G$p,G$P.lineWidth=G$D,G$P.moveTo(this.x+G$T,this.y+G$l),G$P.lineTo(this.x+G$w,this.y+G$u),G$P.stroke()},G$T.clear=function(){this.ctx.clear()},G$T.transformByMatrix=function(G$T){this.ctx.transformByMatrix(G$T)},G$T.setTransform=function(G$T,G$l,G$w,G$u,G$p,G$D){this.ctx.setTransform(G$T,G$l,G$w,G$u,G$p,G$D)},G$T.setTransformByMatrix=function(G$T){this.ctx.setTransformByMatrix(G$T)},G$T.save=function(){this.ctx.save()},G$T.restore=function(){this.ctx.restore()},G$T.translate=function(G$T,G$l){this.ctx.translate(G$T,G$l)},G$T.transform=function(G$T,G$l,G$w,G$u,G$p,G$D){this.ctx.transform(G$T,G$l,G$w,G$u,G$p,G$D)},G$T.rotate=function(G$T){this.ctx.rotate(G$T)},G$T.scale=function(G$T,G$l){this.ctx.scale(G$T,G$l)},G$T.alpha=function(G$T){this.ctx.globalAlpha*=G$T},G$T.setAlpha=function(G$T){this.ctx.globalAlpha=G$T},G$T.fillWords=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$D&&(G$D=0),this.ctx.fillWords(G$T,G$l,G$w,G$u,G$p,G$D)},G$T.fillBorderWords=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this.ctx.fillBorderWords(G$T,G$l,G$w,G$u,G$p,G$D,G$P)},G$T.fillText=function(G$T,G$l,G$w,G$u,G$p,G$D){this.ctx.fillText(G$T,G$l+this.x,G$w+this.y,G$u,G$p,G$D)},G$T.strokeText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this.ctx.strokeText(G$T,G$l+this.x,G$w+this.y,G$u,G$p,G$D,G$P)},G$T.blendMode=function(G$T){this.ctx.globalCompositeOperation=G$T},G$T.flush=function(){this.ctx.flush&&this.ctx.flush()},G$T.addRenderObject=function(G$T){this.ctx.addRenderObject(G$T)},G$T.beginClip=function(G$T,G$l,G$w,G$u){this.ctx.beginClip&&this.ctx.beginClip(G$T,G$l,G$w,G$u)},G$T.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},G$T.fillTrangles=function(G$T,G$l,G$w){this.ctx.fillTrangles(G$w[0],G$w[1],G$w[2],G$w[3],4<G$w.length?G$w[4]:null)},G$P.PI2=2*Math.PI,G$P}(),G$O=function(){function G$P(G$T,G$l){switch(this._next=G$l||G$P.NORENDER,G$T){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=G$L._filter);case 69905:return void(this._fun=G$P._initRenderFun)}this.onCreate(G$T)}G$M(G$P,"laya.renders.RenderSprite");var G$T=G$P.prototype;return G$T.onCreate=function(G$T){},G$T._style=function(G$T,G$l,G$w,G$u){G$T._style.render(G$T,G$l,G$w,G$u);var G$p=this._next;G$p._fun.call(G$p,G$T,G$l,G$w,G$u)},G$T._no=function(G$T,G$l,G$w,G$u){},G$T._custom=function(G$T,G$l,G$w,G$u){G$T.customRender(G$l,G$w,G$u);var G$p=G$T._style._tf;this._next._fun.call(this._next,G$T,G$l,G$w-G$p.translateX,G$u-G$p.translateY)},G$T._clip=function(G$T,G$l,G$w,G$u){var G$p=this._next;if(G$p!=G$P.NORENDER){var G$D=G$T._style.scrollRect;G$l.ctx.save(),G$l.ctx.clipRect(G$w,G$u,G$D.width,G$D.height),G$p._fun.call(G$p,G$T,G$l,G$w-G$D.x,G$u-G$D.y),G$l.ctx.restore()}},G$T._blend=function(G$T,G$l,G$w,G$u){var G$p=G$T._style;G$p.blendMode&&(G$l.ctx.globalCompositeOperation=G$p.blendMode);var G$D=this._next;G$D._fun.call(G$D,G$T,G$l,G$w,G$u),G$l.ctx.globalCompositeOperation="source-over"},G$T._mask=function(G$T,G$l,G$w,G$u){var G$p=this._next;G$p._fun.call(G$p,G$T,G$l,G$w,G$u);var G$D=G$T.mask;G$D&&(G$l.ctx.globalCompositeOperation="destination-in",(0<G$D.numChildren||!G$D.graphics._isOnlyOne())&&(G$D.cacheAsBitmap=!0),G$D.render(G$l,G$w-G$T.pivotX,G$u-G$T.pivotY)),G$l.ctx.globalCompositeOperation="source-over"},G$T._graphics=function(G$T,G$l,G$w,G$u){var G$p=G$T._style._tf;G$T._graphics&&G$T._graphics._render(G$T,G$l,G$w-G$p.translateX,G$u-G$p.translateY);var G$D=this._next;G$D._fun.call(G$D,G$T,G$l,G$w,G$u)},G$T._image=function(G$T,G$l,G$w,G$u){var G$p=G$T._style;G$l.ctx.drawTexture2(G$w,G$u,G$p._tf.translateX,G$p._tf.translateY,G$T.transform,G$p.alpha,G$p.blendMode,G$T._graphics._one)},G$T._image2=function(G$T,G$l,G$w,G$u){var G$p=G$T._style._tf;G$l.ctx.drawTexture2(G$w,G$u,G$p.translateX,G$p.translateY,G$T.transform,1,null,G$T._graphics._one)},G$T._alpha=function(G$T,G$l,G$w,G$u){var G$p;if(.01<(G$p=G$T._style.alpha)||G$T._needRepaint()){var G$D=G$l.ctx.globalAlpha;G$l.ctx.globalAlpha*=G$p;var G$P=this._next;G$P._fun.call(G$P,G$T,G$l,G$w,G$u),G$l.ctx.globalAlpha=G$D}},G$T._transform=function(G$T,G$l,G$w,G$u){var G$p=G$T.transform,G$D=this._next;G$p&&G$D!=G$P.NORENDER?(G$l.save(),G$l.transform(G$p.a,G$p.b,G$p.c,G$p.d,G$p.tx+G$w,G$p.ty+G$u),G$D._fun.call(G$D,G$T,G$l,0,0),G$l.restore()):G$D._fun.call(G$D,G$T,G$l,G$w,G$u)},G$T._childs=function(G$T,G$l,G$w,G$u){var G$p=G$T._style,G$D=G$p._tf;if(G$w=G$w-G$D.translateX+G$p.paddingLeft,G$u=G$u-G$D.translateY+G$p.paddingTop,G$p._calculation){var G$P=G$T._getWords();if(G$P){var G$j=G$p;G$j&&(G$j.stroke?G$l.fillBorderWords(G$P,G$w,G$u,G$j.font,G$j.color,G$j.strokeColor,G$j.stroke):G$l.fillWords(G$P,G$w,G$u,G$j.font,G$j.color,"none"!=G$j.textDecoration&&G$j.underLine?1:0))}}var G$J,G$q=G$T._childs,G$M=G$q.length;if(G$T.viewport||G$T.optimizeScrollRect&&G$T._style.scrollRect){var G$z=G$T.viewport||G$T._style.scrollRect,G$b=G$z.x,G$K=G$z.y,G$Y=G$z.right,G$t=G$z.bottom,G$A=NaN,G$L=NaN;for(G$i=0;G$i<G$M;++G$i)(G$J=G$q[G$i]).visible&&(G$A=G$J._x)<G$Y&&G$A+G$J.width>G$b&&(G$L=G$J._y)<G$t&&G$L+G$J.height>G$K&&G$J.render(G$l,G$w,G$u)}else for(var G$i=0;G$i<G$M;++G$i)(G$J=G$q[G$i])._style.visible&&G$J.render(G$l,G$w,G$u)},G$T._canvas=function(G$T,G$l,G$w,G$u){var G$p=G$T._$P.cacheCanvas;if(G$p){"bitmap"===G$p.type?G$f.canvasBitmap++:G$f.canvasNormal++;var G$D=G$p.ctx;if(G$T._needRepaint()||!G$D)this._canvas_repaint(G$T,G$l,G$w,G$u);else{var G$P=G$p._cacheRec;G$l.drawCanvas(G$D.canvas,G$w+G$P.x,G$u+G$P.y,G$P.width,G$P.height)}}else this._next._fun.call(this._next,G$T,G$l,G$w,G$u)},G$T._canvas_repaint=function(G$T,G$l,G$w,G$u){var G$p=G$T._$P.cacheCanvas,G$D=this._next;if(G$p){var G$P,G$j,G$J,G$q,G$M=G$p.ctx,G$z=G$T._needRepaint()||!G$M,G$b=G$p.type;if("bitmap"===G$b?G$f.canvasBitmap++:G$f.canvasNormal++,G$z){var G$K,G$Y;G$p._cacheRec||(G$p._cacheRec=new G$r),G$R.isWebGL&&"bitmap"!==G$b?G$p._cacheRec.setTo(-G$T.pivotX,-G$T.pivotY,1,1):((G$q=G$T.getSelfBounds()).x=G$q.x-G$T.pivotX,G$q.y=G$q.y-G$T.pivotY,G$q.x=G$q.x-16,G$q.y=G$q.y-16,G$q.width=G$q.width+32,G$q.height=G$q.height+32,G$q.x=Math.floor(G$q.x+G$w)-G$w,G$q.y=Math.floor(G$q.y+G$u)-G$u,G$q.width=Math.floor(G$q.width),G$q.height=Math.floor(G$q.height),G$p._cacheRec.copyFrom(G$q)),G$q=G$p._cacheRec;var G$t,G$A=G$R.isWebGL?1:G$H.pixelRatio*G$B.stage.clientScaleX,G$L=G$R.isWebGL?1:G$H.pixelRatio*G$B.stage.clientScaleY;if(!G$R.isWebGL){var G$i,G$W=1,G$m=1;for(G$i=G$T;G$i&&G$i!=G$B.stage;)G$W*=G$i.scaleX,G$m*=G$i.scaleY,G$i=G$i.parent;G$R.isWebGL?(G$W<1&&(G$A*=G$W),G$m<1&&(G$L*=G$m)):(1<G$W&&(G$A*=G$W),1<G$m&&(G$L*=G$m))}if(G$T.scrollRect){var G$c=G$T.scrollRect;G$q.x-=G$c.x,G$q.y-=G$c.y}if(G$K=G$q.width*G$A,G$Y=G$q.height*G$L,G$j=G$q.x,G$J=G$q.y,G$R.isWebGL&&"bitmap"===G$b&&(2048<G$K||2048<G$Y))return console.warn("cache bitmap size larger than 2048,cache ignored"),G$p.ctx&&(G$g.recover("RenderContext",G$p.ctx),G$p.ctx.canvas.size(0,0),G$p.ctx=null),void G$D._fun.call(G$D,G$T,G$l,G$w,G$u);if(G$M||(G$M=G$p.ctx=G$g.getItem("RenderContext")||new G$F(G$K,G$Y,G$WT.create("AUTO"))),G$M.ctx.sprite=G$T,(G$P=G$M.canvas).clear(),(G$P.width!=G$K||G$P.height!=G$Y)&&G$P.size(G$K,G$Y),"bitmap"===G$b?G$P.context.asBitmap=!0:"normal"===G$b&&(G$P.context.asBitmap=!1),1!=G$A||1!=G$L){var G$a=G$M.ctx;G$a.save(),G$a.scale(G$A,G$L),!G$R.isConchWebGL&&G$R.isConchApp&&(G$t=G$T._$P.cf)&&G$a.setFilterMatrix&&G$a.setFilterMatrix(G$t._mat,G$t._alpha),G$D._fun.call(G$D,G$T,G$M,-G$j,-G$J),G$a.restore(),G$R.isConchApp&&!G$R.isConchWebGL||G$T._applyFilters()}else G$a=G$M.ctx,!G$R.isConchWebGL&&G$R.isConchApp&&(G$t=G$T._$P.cf)&&G$a.setFilterMatrix&&G$a.setFilterMatrix(G$t._mat,G$t._alpha),G$D._fun.call(G$D,G$T,G$M,-G$j,-G$J),G$R.isConchApp&&!G$R.isConchWebGL||G$T._applyFilters();G$T._$P.staticCache&&(G$p.reCache=!1),G$f.canvasReCache++}else G$j=(G$q=G$p._cacheRec).x,G$J=G$q.y,G$P=G$M.canvas;G$l.drawCanvas(G$P,G$w+G$j,G$u+G$J,G$q.width,G$q.height)}else G$D._fun.call(G$D,G$T,G$M,G$w,G$u)},G$P.__init__=function(){var G$T,G$l,G$w=0;for(G$l=G$e.createRenderSprite(69905,null),G$T=G$P.renders.length=4096,G$w=0;G$w<G$T;G$w++)G$P.renders[G$w]=G$l;G$P.renders[0]=G$e.createRenderSprite(0,null),function(G$T,G$l){for(var G$w=0,G$u=0;G$u<G$T.length;G$u++)G$w|=G$T[G$u],G$P.renders[G$w]=G$l}([1,512,4,2],new G$P(1,null)),G$P.renders[513]=G$e.createRenderSprite(513,null),G$P.renders[517]=new G$P(517,null)},G$P._initRenderFun=function(G$T,G$l,G$w,G$u){var G$p=G$T._renderType;(G$P.renders[G$p]=G$P._getTypeRender(G$p))._fun(G$T,G$l,G$w,G$u)},G$P._getTypeRender=function(G$T){for(var G$l=null,G$w=2048;1<G$w;)G$w&G$T&&(G$l=G$e.createRenderSprite(G$w,G$l)),G$w>>=1;return G$l},G$P.IMAGE=1,G$P.ALPHA=2,G$P.TRANSFORM=4,G$P.BLEND=8,G$P.CANVAS=16,G$P.FILTERS=32,G$P.MASK=64,G$P.CLIP=128,G$P.STYLE=256,G$P.GRAPHICS=512,G$P.CUSTOM=1024,G$P.CHILDS=2048,G$P.INIT=69905,G$P.renders=[],G$P.NORENDER=new G$P(0,null),G$P}(),G$$=function(){function G$j(){this._repaint=!1}G$M(G$j,"laya.resource.Context");var G$T=G$j.prototype;return G$T.replaceReset=function(){var G$T,G$l,G$w=0;for(G$T=G$j.replaceKeys.length,G$w=0;G$w<G$T;G$w++)G$l=G$j.replaceKeys[G$w],this[G$j.newKeys[G$w]]=this[G$l]},G$T.replaceResotre=function(){this.__restore(),this.__reset()},G$T.setIsMainContext=function(){},G$T.drawTextures=function(G$T,G$l,G$w,G$u){G$f.drawCall+=G$l.length/2;for(var G$p=G$T.width,G$D=G$T.height,G$P=0,G$j=G$l.length;G$P<G$j;G$P+=2)this.drawTexture(G$T,G$l[G$P],G$l[G$P+1],G$p,G$D,G$w,G$u)},G$T.drawCanvas=function(G$T,G$l,G$w,G$u,G$p){G$f.drawCall++,this.drawImage(G$T.source,G$l,G$w,G$u,G$p)},G$T.fillRect=function(G$T,G$l,G$w,G$u,G$p){G$f.drawCall++,G$p&&(this.fillStyle=G$p),this.__fillRect(G$T,G$l,G$w,G$u)},G$T.fillText=function(G$T,G$l,G$w,G$u,G$p,G$D){G$f.drawCall++,3<arguments.length&&null!=G$u&&(this.font=G$u,this.fillStyle=G$p,this.textAlign=G$D,this.textBaseline="top"),this.__fillText(G$T,G$l,G$w)},G$T.fillBorderText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){G$f.drawCall++,this.font=G$u,this.fillStyle=G$p,this.textBaseline="top",this.strokeStyle=G$D,this.lineWidth=G$P,this.textAlign=G$j,this.__strokeText(G$T,G$l,G$w),this.__fillText(G$T,G$l,G$w)},G$T.strokeText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){G$f.drawCall++,3<arguments.length&&null!=G$u&&(this.font=G$u,this.strokeStyle=G$p,this.lineWidth=G$D,this.textAlign=G$P,this.textBaseline="top"),this.__strokeText(G$T,G$l,G$w)},G$T.transformByMatrix=function(G$T){this.transform(G$T.a,G$T.b,G$T.c,G$T.d,G$T.tx,G$T.ty)},G$T.setTransformByMatrix=function(G$T){this.setTransform(G$T.a,G$T.b,G$T.c,G$T.d,G$T.tx,G$T.ty)},G$T.clipRect=function(G$T,G$l,G$w,G$u){G$f.drawCall++,this.beginPath(),this.rect(G$T,G$l,G$w,G$u),this.clip()},G$T.drawTexture=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){G$f.drawCall++;var G$j=G$T.uv,G$J=G$T.bitmap.width,G$q=G$T.bitmap.height;this.drawImage(G$T.source,G$j[0]*G$J,G$j[1]*G$q,(G$j[2]-G$j[0])*G$J,(G$j[5]-G$j[3])*G$q,G$l+G$D,G$w+G$P,G$u,G$p)},G$T.drawTextureWithTransform=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){G$f.drawCall++;var G$q=G$T.uv,G$M=G$T.bitmap.width,G$z=G$T.bitmap.height;this.save(),1!=G$J&&(this.globalAlpha*=G$J),G$D?(this.transform(G$D.a,G$D.b,G$D.c,G$D.d,G$D.tx+G$P,G$D.ty+G$j),this.drawImage(G$T.source,G$q[0]*G$M,G$q[1]*G$z,(G$q[2]-G$q[0])*G$M,(G$q[5]-G$q[3])*G$z,G$l,G$w,G$u,G$p)):this.drawImage(G$T.source,G$q[0]*G$M,G$q[1]*G$z,(G$q[2]-G$q[0])*G$M,(G$q[5]-G$q[3])*G$z,G$l+G$P,G$w+G$j,G$u,G$p),this.restore()},G$T.drawTexture2=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){var G$J=G$j[0];if(G$J.loaded&&G$J.bitmap&&G$J.source){G$f.drawCall++;var G$q=1!==G$D;if(G$q){var G$M=this.globalAlpha;this.globalAlpha*=G$D}var G$z=G$J.uv,G$b=G$J.bitmap.width,G$K=G$J.bitmap.height;G$p?(this.save(),this.transform(G$p.a,G$p.b,G$p.c,G$p.d,G$p.tx+G$T,G$p.ty+G$l),this.drawImage(G$J.source,G$z[0]*G$b,G$z[1]*G$K,(G$z[2]-G$z[0])*G$b,(G$z[5]-G$z[3])*G$K,G$j[1]-G$w,G$j[2]-G$u,G$j[3],G$j[4]),this.restore()):this.drawImage(G$J.source,G$z[0]*G$b,G$z[1]*G$K,(G$z[2]-G$z[0])*G$b,(G$z[5]-G$z[3])*G$K,G$j[1]-G$w+G$T,G$j[2]-G$u+G$l,G$j[3],G$j[4]),G$q&&(this.globalAlpha=G$M)}},G$T.fillTexture=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){if(!G$j.pat){if(G$T.uv!=G$MT.DEF_UV){var G$J=new G$WT("2D");G$J.getContext("2d"),G$J.size(G$T.width,G$T.height),G$J.context.drawTexture(G$T,0,0,G$T.width,G$T.height,0,0),G$T=new G$MT(G$J)}G$j.pat=this.createPattern(G$T.bitmap.source,G$D)}var G$q=G$l,G$M=G$w,G$z=0,G$b=0;G$P&&(G$q+=G$P.x%G$T.width,G$M+=G$P.y%G$T.height,G$z-=G$P.x%G$T.width,G$b-=G$P.y%G$T.height),this.translate(G$q,G$M),this.fillRect(G$z,G$b,G$u,G$p,G$j.pat),this.translate(-G$q,-G$M)},G$T.drawTriangle=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){var G$J=G$T.bitmap,G$q=G$J.source,G$M=G$T.width,G$z=G$T.height,G$b=G$J.width,G$K=G$J.height,G$Y=G$w[G$u]*G$b,G$t=G$w[G$p]*G$b,G$A=G$w[G$D]*G$b,G$L=G$w[G$u+1]*G$K,G$i=G$w[G$p+1]*G$K,G$W=G$w[G$D+1]*G$K,G$m=G$l[G$u],G$c=G$l[G$p],G$a=G$l[G$D],G$B=G$l[G$u+1],G$s=G$l[G$p+1],G$r=G$l[G$D+1];if(G$j){var G$I=(G$m+G$c+G$a)/3,G$Q=(G$B+G$s+G$r)/3,G$o=G$m-G$I,G$e=G$B-G$Q,G$y=Math.sqrt(G$o*G$o+G$e*G$e);G$m=G$I+G$o/G$y*(G$y+1),G$B=G$Q+G$e/G$y*(G$y+1),G$e=G$s-G$Q,G$c=G$I+(G$o=G$c-G$I)/(G$y=Math.sqrt(G$o*G$o+G$e*G$e))*(G$y+1),G$s=G$Q+G$e/G$y*(G$y+1),G$e=G$r-G$Q,G$a=G$I+(G$o=G$a-G$I)/(G$y=Math.sqrt(G$o*G$o+G$e*G$e))*(G$y+1),G$r=G$Q+G$e/G$y*(G$y+1)}this.save(),G$P&&this.transform(G$P.a,G$P.b,G$P.c,G$P.d,G$P.tx,G$P.ty),this.beginPath(),this.moveTo(G$m,G$B),this.lineTo(G$c,G$s),this.lineTo(G$a,G$r),this.closePath(),this.clip();var G$v=1/(G$Y*G$i+G$L*G$A+G$t*G$W-G$i*G$A-G$L*G$t-G$Y*G$W),G$x=G$m*G$i+G$L*G$a+G$c*G$W-G$i*G$a-G$L*G$c-G$m*G$W,G$R=G$Y*G$c+G$m*G$A+G$t*G$a-G$c*G$A-G$m*G$t-G$Y*G$a,G$F=G$Y*G$i*G$a+G$L*G$c*G$A+G$m*G$t*G$W-G$m*G$i*G$A-G$L*G$t*G$a-G$Y*G$c*G$W,G$O=G$B*G$i+G$L*G$r+G$s*G$W-G$i*G$r-G$L*G$s-G$B*G$W,G$$=G$Y*G$s+G$B*G$A+G$t*G$r-G$s*G$A-G$B*G$t-G$Y*G$r,G$Z=G$Y*G$i*G$r+G$L*G$s*G$A+G$B*G$t*G$W-G$B*G$i*G$A-G$L*G$t*G$r-G$Y*G$s*G$W;this.transform(G$x*G$v,G$O*G$v,G$R*G$v,G$$*G$v,G$F*G$v,G$Z*G$v),this.drawImage(G$q,G$T.uv[0]*G$b,G$T.uv[1]*G$K,G$M,G$z,G$T.uv[0]*G$b,G$T.uv[1]*G$K,G$M,G$z),this.restore()},G$T.flush=function(){return 0},G$T.fillWords=function(G$T,G$l,G$w,G$u,G$p,G$D){G$u&&(this.font=G$u),G$p&&(this.fillStyle=G$p);this.textBaseline="top",this.textAlign="left";for(var G$P=0,G$j=G$T.length;G$P<G$j;G$P++){var G$J=G$T[G$P];if(this.__fillText(G$J.char,G$J.x+G$l,G$J.y+G$w),1===G$D){var G$q=G$J.height,G$M=.5*G$J.style.letterSpacing;G$M||(G$M=0),this.beginPath(),this.strokeStyle=G$p,this.lineWidth=1,this.moveTo(G$l+G$J.x-G$M+.5,G$w+G$J.y+G$q+.5),this.lineTo(G$l+G$J.x+G$J.width+G$M+.5,G$w+G$J.y+G$q+.5),this.stroke()}}},G$T.fillBorderWords=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){G$u&&(this.font=G$u),G$p&&(this.fillStyle=G$p),this.textBaseline="top",this.lineWidth=G$P,this.textAlign="left",this.strokeStyle=G$D;for(var G$j=0,G$J=G$T.length;G$j<G$J;G$j++){var G$q=G$T[G$j];this.__strokeText(G$q.char,G$q.x+G$l,G$q.y+G$w),this.__fillText(G$q.char,G$q.x+G$l,G$q.y+G$w)}},G$T.destroy=function(){this.canvas.width=this.canvas.height=0},G$T.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},G$T.drawCurves=function(G$T,G$l,G$w){this.beginPath(),this.strokeStyle=G$w[3],this.lineWidth=G$w[4];var G$u=G$w[2];G$T+=G$w[0],G$l+=G$w[1],this.moveTo(G$T+G$u[0],G$l+G$u[1]);for(var G$p=2,G$D=G$u.length;G$p<G$D;)this.quadraticCurveTo(G$T+G$u[G$p++],G$l+G$u[G$p++],G$T+G$u[G$p++],G$l+G$u[G$p++]);this.stroke()},G$j.__init__=function(G$l){var G$w=laya.resource.Context.prototype;if(!(G$l=G$l||CanvasRenderingContext2D.prototype).inited){G$l.inited=!0,G$l.__fillText=G$l.fillText,G$l.__fillRect=G$l.fillRect,G$l.__strokeText=G$l.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(G$T){G$l[G$T]=G$w[G$T]})}},G$j.replaceCanvasGetSet=function(G$T,G$l){var G$w=Object.getOwnPropertyDescriptor(G$T,G$l);if(!G$w||!G$w.configurable)return!1;var G$u,G$p={};for(G$u in G$w)"set"!=G$u&&(G$p[G$u]=G$w[G$u]);var G$D=G$w.set;return G$p.set=function(G$T){G$D.call(this,G$T);var G$l=this.getContext("2d");G$l&&"__reset"in G$l&&G$l.__reset()},Object.defineProperty(G$T,G$l,G$p),!0},G$j.replaceGetSet=function(G$T,G$l){var G$w=Object.getOwnPropertyDescriptor(G$T,G$l);if(!G$w||!G$w.configurable)return!1;var G$u,G$p={};for(G$u in G$w)"set"!=G$u&&(G$p[G$u]=G$w[G$u]);var G$D=G$w.set,G$P="___"+G$l+"__";return G$j.newKeys.push(G$P),G$p.set=function(G$T){G$T!=this[G$P]&&(this[G$P]=G$T,G$D.call(this,G$T))},Object.defineProperty(G$T,G$l,G$p),!0},G$j._default=new G$j,G$j.newKeys=[],G$J(G$j,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),G$j}(),G$Z=function(){function G$D(G$T){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++G$D._uniqueIDCounter,this._name=G$T||"Content Manager",G$D._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,G$D._resourceManagers.push(this),this._resources=[],this._records={}}G$M(G$D,"laya.resource.ResourceManager");var G$T=G$D.prototype;return G$B.imps(G$T,{"laya.resource.IDispose":!0}),G$T.getResourceByIndex=function(G$T){return this._resources[G$T]},G$T.getResourcesLength=function(){return this._resources.length},G$T.addResource=function(G$T){return G$T.resourceManager&&G$T.resourceManager.removeResource(G$T),-1===this._resources.indexOf(G$T)&&((G$T._resourceManager=this)._resources.push(G$T),this.addRecord(G$T.uri,G$T.__className,G$T.memorySize),this.addSize(G$T.memorySize),!0)},G$T.removeResource=function(G$T){var G$l=this._resources.indexOf(G$T);return-1!==G$l&&(this._resources.splice(G$l,1),G$T._resourceManager=null,this._memorySize-=G$T.memorySize,this.addRecord(G$T.uri,G$T.__className,-G$T.memorySize),!0)},G$T.unload=function(){for(var G$T=this._resources.slice(0,this._resources.length),G$l=0;G$l<G$T.length;G$l++){G$T[G$l].destroy()}G$T.length=0},G$T.dispose=function(){if(this===G$D._systemResourceManager)throw new Error("systemResourceManager不能被释放！");G$D._resourceManagers.splice(G$D._resourceManagers.indexOf(this),1),G$D._isResourceManagersSorted=!1;for(var G$T=this._resources.slice(0,this._resources.length),G$l=0;G$l<G$T.length;G$l++){var G$w=G$T[G$l];G$w.resourceManager.removeResource(G$w),G$w.destroy()}G$T.length=0},G$T.addSize=function(G$T){G$T&&(this.autoRelease&&0<G$T&&this._memorySize+G$T>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=G$T)},G$T.addRecord=function(G$T,G$l,G$w){DEBUG&&G$w&&!G$T&&console.error(G$T,G$l,G$w),G$T&&(this._records.hasOwnProperty(G$l+"|"+G$T)||(this._records[G$l+"|"+G$T]=0),this._records[G$l+"|"+G$T]+=G$w,DEBUG&&this._records[G$l+"|"+G$T]<0&&console.error(G$T,G$l,this._records[G$l+"|"+G$T]))},G$T.garbageCollection=function(G$T){var G$l=this._resources;(G$l=G$l.slice()).sort(function(G$T,G$l){if(!G$T||!G$l)throw new Error("a或b不能为空！");return G$T.released&&G$l.released?0:G$T.released?1:G$l.released?-1:G$T._lastUseFrameCount-G$l._lastUseFrameCount});for(var G$w=G$f.loopCount,G$u=0,G$p=G$l.length;G$u<G$p;G$u++){var G$D=G$l[G$u];if(!(1<G$w-G$D._lastUseFrameCount))return void(this._memorySize>=G$T&&(this._isOverflow=!0));if(G$D.releaseResource(),this._memorySize<G$T)return void(this._isOverflow=!1)}},G$Y(0,G$T,"id",function(){return this._id}),G$Y(0,G$T,"name",function(){return this._name},function(G$T){!G$T&&""===G$T||this._name===G$T||(this._name=G$T,G$D._isResourceManagersSorted=!1)}),G$Y(0,G$T,"memorySize",function(){return this._memorySize}),G$Y(0,G$T,"records",function(){return this._records}),G$Y(1,G$D,"systemResourceManager",function(){return G$D._systemResourceManager}),G$D.__init__=function(){G$D.currentResourceManager=G$D.systemResourceManager},G$D.getLoadedResourceManagerByIndex=function(G$T){return G$D._resourceManagers[G$T]},G$D.getLoadedResourceManagersCount=function(){return G$D._resourceManagers.length},G$D.recreateContentManagers=function(G$T){void 0===G$T&&(G$T=!1);for(var G$l=G$D.currentResourceManager,G$w=0;G$w<G$D._resourceManagers.length;G$w++){G$D.currentResourceManager=G$D._resourceManagers[G$w];for(var G$u=0;G$u<G$D.currentResourceManager._resources.length;G$u++)G$D.currentResourceManager._resources[G$u].releaseResource(G$T),G$D.currentResourceManager._resources[G$u].activeResource(G$T)}G$D.currentResourceManager=G$l},G$D.releaseContentManagers=function(G$T){void 0===G$T&&(G$T=!1);for(var G$l=G$D.currentResourceManager,G$w=0;G$w<G$D._resourceManagers.length;G$w++){G$D.currentResourceManager=G$D._resourceManagers[G$w];for(var G$u=0;G$u<G$D.currentResourceManager._resources.length;G$u++){var G$p=G$D.currentResourceManager._resources[G$u];!G$p.released&&G$p.releaseResource(G$T)}}G$D.currentResourceManager=G$l},G$D._uniqueIDCounter=0,G$D._isResourceManagersSorted=!1,G$D._resourceManagers=[],G$J(G$D,["_systemResourceManager",function(){return this._systemResourceManager=new G$D("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=G$D._systemResourceManager}]),G$D}(),G$H=(function(){function G$T(){}G$M(G$T,"laya.system.System"),G$T.changeDefinition=function(G$T,G$l){G$B[G$T]=G$l;var G$w=G$T+"=classObj";G$B._runScript(G$w)},G$T.__init__=function(){G$R.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function G$w(){}return G$M(G$w,"laya.utils.Browser"),G$Y(1,G$w,"pixelRatio",function(){return G$w.__init__(),-1<G$w.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:G$e.getPixelRatio()}),G$Y(1,G$w,"height",function(){return G$w.__init__(),(G$B.stage&&G$B.stage.canvasRotation?G$w.clientWidth:G$w.clientHeight)*G$w.pixelRatio}),G$Y(1,G$w,"clientWidth",function(){return G$w.__init__(),G$w.window.innerWidth||G$w.document.body.clientWidth}),G$Y(1,G$w,"window",function(){return G$w.__init__(),G$w._window}),G$Y(1,G$w,"clientHeight",function(){return G$w.__init__(),G$w.window.innerHeight||G$w.document.body.clientHeight||G$w.document.documentElement.clientHeight}),G$Y(1,G$w,"width",function(){return G$w.__init__(),(G$B.stage&&G$B.stage.canvasRotation?G$w.clientHeight:G$w.clientWidth)*G$w.pixelRatio}),G$Y(1,G$w,"container",function(){return G$w.__init__(),G$w._container||((G$w._container=G$w.createElement("div")).id="layaContainer",G$w.document.body.appendChild(G$w._container)),G$w._container},function(G$T){G$w._container=G$T}),G$Y(1,G$w,"document",function(){return G$w.__init__(),G$w._document}),G$w.__init__=function(){if(!G$w._window){G$w._window=G$e.getWindow(),G$w._document=G$w.window.document,G$w._window.addEventListener("message",function(G$T){laya.utils.Browser._onMessage(G$T)},!1),G$w.document.__createElement=G$w.document.createElement,G$P.requestAnimationFrame=G$P.requestAnimationFrame||G$P.webkitRequestAnimationFrame||G$P.mozRequestAnimationFrame||G$P.oRequestAnimationFrame||G$P.msRequestAnimationFrame||function(G$T){return G$P.setTimeout(G$T,1e3/60)};var G$T=G$P.document.body.style;G$T["-webkit-user-select"]="none",G$T["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",G$w.userAgent=G$w.window.navigator.userAgent,G$w.onIOS=!!(G$w.u=G$w.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),G$w.onMobile=-1<G$w.u.indexOf("Mobile"),G$w.onIPhone=-1<G$w.u.indexOf("iPhone"),G$w.onMac=-1<G$w.u.indexOf("Mac OS X"),G$w.onIPad=-1<G$w.u.indexOf("iPad"),G$w.onAndroid=-1<G$w.u.indexOf("Android")||-1<G$w.u.indexOf("Adr"),G$w.onWP=-1<G$w.u.indexOf("Windows Phone"),G$w.onQQBrowser=-1<G$w.u.indexOf("QQBrowser"),G$w.onMQQBrowser=-1<G$w.u.indexOf("MQQBrowser")||-1<G$w.u.indexOf("Mobile")&&-1<G$w.u.indexOf("QQ"),G$w.onIE=!!G$w.window.ActiveXObject||"ActiveXObject"in G$w.window,G$w.onWeiXin=-1<G$w.u.indexOf("MicroMessenger"),G$w.onPC=!G$w.onMobile,G$w.onSafari=-1<G$w.u.indexOf("Safari"),G$w.onFirefox=-1<G$w.u.indexOf("Firefox"),G$w.onEdge=-1<G$w.u.indexOf("Edge"),G$w.onMiniGame=-1<G$w.u.indexOf("MiniGame"),G$w.onLimixiu=-1<G$w.u.indexOf("limixiu"),G$w.httpProtocol="http:"==G$w.window.location.protocol,G$w.onMiniGame&&null==G$w.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),G$w.webAudioEnabled=!!(G$w.window.AudioContext||G$w.window.webkitAudioContext||G$w.window.mozAudioContext),G$w.soundType=G$w.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",G$pT=G$w.webAudioEnabled?G$DT:G$wT,G$w.webAudioEnabled&&G$DT.initWebAudio(),G$wT._initMusicAudio(),G$w.enableTouch="ontouchstart"in G$P||G$P.DocumentTouch&&G$l instanceof DocumentTouch,G$P.focus(),G$o._soundClass=G$pT,G$o._musicClass=G$wT,G$R._mainCanvas=G$R._mainCanvas||G$WT.create("2D"),G$w.canvas||(G$w.canvas=G$WT.create("2D"),G$w.context=G$w.canvas.getContext("2d"))}},G$w._onMessage=function(G$T){if(G$T.data&&"size"==G$T.data.name){if(G$w.window.innerWidth=G$T.data.width,G$w.window.innerHeight=G$T.data.height,G$w.window.__innerHeight=G$T.data.clientHeight,!G$w.document.createEvent)return void console.warn("no document.createEvent");var G$l=G$w.document.createEvent("HTMLEvents");return G$l.initEvent("resize",!1,!1),void G$w.window.dispatchEvent(G$l)}},G$w.createElement=function(G$T){return G$w.__init__(),G$w.document.__createElement(G$T)},G$w.getElementById=function(G$T){return G$w.__init__(),G$w.document.getElementById(G$T)},G$w.removeElement=function(G$T){G$T&&G$T.parentNode&&G$T.parentNode.removeChild(G$T)},G$w.now=function(){return G$e.now()},G$w._window=null,G$w._document=null,G$w._container=null,G$w.userAgent=null,G$w.u=null,G$w.onIOS=!1,G$w.onMac=!1,G$w.onMobile=!1,G$w.onIPhone=!1,G$w.onIPad=!1,G$w.onAndroid=!1,G$w.onWP=!1,G$w.onQQBrowser=!1,G$w.onMQQBrowser=!1,G$w.onSafari=!1,G$w.onFirefox=!1,G$w.onEdge=!1,G$w.onIE=!1,G$w.onWeiXin=!1,G$w.onMiniGame=!1,G$w.onLimixiu=!1,G$w.onPC=!1,G$w.httpProtocol=!1,G$w.webAudioEnabled=!1,G$w.soundType=null,G$w.enableTouch=!1,G$w.canvas=null,G$w.context=null,G$w.__init$=function(){},G$w}()),G$X=function(){function G$l(G$T){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,G$T?(this._u8d_=new Uint8Array(G$T),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}G$M(G$l,"laya.utils.Byte");var G$T=G$l.prototype;return G$T.___resizeBuffer=function(G$l){try{var G$T=new Uint8Array(G$l);null!=this._u8d_&&(this._u8d_.length<=G$l?G$T.set(this._u8d_):G$T.set(this._u8d_.subarray(0,G$l))),this._u8d_=G$T,this._d_=new DataView(G$T.buffer)}catch(G$T){throw"___resizeBuffer err:"+G$l}},G$T.getString=function(){return this.rUTF(this.getUint16())},G$T.getFloat32Array=function(G$T,G$l){var G$w=G$T+G$l;G$w=G$w>this._length?this._length:G$w;var G$u=new Float32Array(this._d_.buffer.slice(G$T,G$w));return this._pos_=G$w,G$u},G$T.getUint8Array=function(G$T,G$l){var G$w=G$T+G$l;G$w=G$w>this._length?this._length:G$w;var G$u=new Uint8Array(this._d_.buffer.slice(G$T,G$w));return this._pos_=G$w,G$u},G$T.getInt16Array=function(G$T,G$l){var G$w=G$T+G$l;G$w=G$w>this._length?this._length:G$w;var G$u=new Int16Array(this._d_.buffer.slice(G$T,G$w));return this._pos_=G$w,G$u},G$T.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var G$T=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,G$T},G$T.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var G$T=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,G$T},G$T.writeFloat32=function(G$T){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,G$T,this._xd_),this._pos_+=4},G$T.writeFloat64=function(G$T){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,G$T,this._xd_),this._pos_+=8},G$T.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var G$T=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,G$T},G$T.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var G$T=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,G$T},G$T.writeInt32=function(G$T){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,G$T,this._xd_),this._pos_+=4},G$T.writeUint32=function(G$T){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,G$T,this._xd_),this._pos_+=4},G$T.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var G$T=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,G$T},G$T.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var G$T=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,G$T},G$T.writeUint16=function(G$T){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,G$T,this._xd_),this._pos_+=2},G$T.writeInt16=function(G$T){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,G$T,this._xd_),this._pos_+=2},G$T.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},G$T.writeUint8=function(G$T){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,G$T),this._pos_++},G$T._getUInt8=function(G$T){return this._d_.getUint8(G$T)},G$T._getUint16=function(G$T){return this._d_.getUint16(G$T,this._xd_)},G$T._getMatrix=function(){return new G$y(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},G$T.rUTF=function(G$T){for(var G$l=[],G$w=this._pos_+G$T,G$u=0,G$p=0,G$D=0,G$P=String.fromCharCode,G$j=this._u8d_;this._pos_<G$w;)(G$u=G$j[this._pos_++])<128?0!=G$u&&G$l.push(G$P(G$u)):G$u<224?G$l.push(G$P((63&G$u)<<6|127&G$j[this._pos_++])):G$u<240?(G$p=G$j[this._pos_++],G$l.push(G$P((31&G$u)<<12|(127&G$p)<<6|127&G$j[this._pos_++]))):(G$p=G$j[this._pos_++],G$D=G$j[this._pos_++],G$l.push(G$P((15&G$u)<<18|(127&G$p)<<12|G$D<<6&127|127&G$j[this._pos_++]))),0;return G$l.join("")},G$T.getCustomString=function(G$T){for(var G$l=[],G$w=0,G$u=0,G$p=0,G$D=String.fromCharCode,G$P=this._u8d_;0<G$T;)if((G$u=G$P[this._pos_])<128)G$l.push(G$D(G$u)),this._pos_++,G$T--;else for(G$w=G$u-128,this._pos_++,G$T-=G$w;0<G$w;)G$u=G$P[this._pos_++],G$p=G$P[this._pos_++],G$l.push(G$D(G$p<<8|G$u)),G$w--;return G$l.join("")},G$T.clear=function(){this._pos_=0,this.length=0},G$T.__getBuffer=function(){return this._d_.buffer},G$T.writeUTFBytes=function(G$T){for(var G$l=0,G$w=(G$T+="").length;G$l<G$w;G$l++){var G$u=G$T.charCodeAt(G$l);G$u<=127?this.writeByte(G$u):G$u<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|G$u>>6,128|63&G$u],this._pos_),this._pos_+=2):G$u<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|G$u>>12,128|G$u>>6&63,128|63&G$u],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|G$u>>18,128|G$u>>12&63,128|G$u>>6&63,128|63&G$u],this._pos_),this._pos_+=4)}},G$T.writeUTFString=function(G$T){var G$l=this.pos;this.writeUint16(1),this.writeUTFBytes(G$T);var G$w=this.pos-G$l-2;if(65536<=G$w)throw"writeUTFString byte len more than 65536";this._d_.setUint16(G$l,G$w,this._xd_)},G$T.readUTFString=function(){return this.readUTFBytes(this.getUint16())},G$T.getUTFString=function(){return this.readUTFString()},G$T.readUTFBytes=function(G$T){if(void 0===G$T&&(G$T=-1),0==G$T)return"";var G$l=this.bytesAvailable;if(G$l<G$T)throw"readUTFBytes error - Out of bounds";return G$T=0<G$T?G$T:G$l,this.rUTF(G$T)},G$T.getUTFBytes=function(G$T){return void 0===G$T&&(G$T=-1),this.readUTFBytes(G$T)},G$T.writeByte=function(G$T){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,G$T),this._pos_+=1},G$T.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},G$T.getByte=function(){return this.readByte()},G$T.ensureWrite=function(G$T){this._length<G$T&&(this._length=G$T),this._allocated_<G$T&&(this.length=G$T)},G$T.writeArrayBuffer=function(G$T,G$l,G$w){if(void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),G$l<0||G$w<0)throw"writeArrayBuffer error - Out of bounds";0==G$w&&(G$w=G$T.byteLength-G$l),this.ensureWrite(this._pos_+G$w);var G$u=new Uint8Array(G$T);this._u8d_.set(G$u.subarray(G$l,G$l+G$w),this._pos_),this._pos_+=G$w},G$Y(0,G$T,"buffer",function(){var G$T=this._d_.buffer;return G$T.byteLength==this.length?G$T:G$T.slice(0,this.length)}),G$Y(0,G$T,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(G$T){this._xd_="littleEndian"==G$T}),G$Y(0,G$T,"length",function(){return this._length},function(G$T){this._allocated_<G$T?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(G$T,2*this._allocated_))):this._allocated_>G$T&&this.___resizeBuffer(this._allocated_=G$T),this._length=G$T}),G$Y(0,G$T,"pos",function(){return this._pos_},function(G$T){this._pos_=G$T}),G$Y(0,G$T,"bytesAvailable",function(){return this._length-this._pos_}),G$l.getSystemEndian=function(){if(!G$l._sysEndian){var G$T=new ArrayBuffer(2);new DataView(G$T).setInt16(0,256,!0),G$l._sysEndian=256===new Int16Array(G$T)[0]?"littleEndian":"bigEndian"}return G$l._sysEndian},G$l.BIG_ENDIAN="bigEndian",G$l.LITTLE_ENDIAN="littleEndian",G$l._sysEndian=null,G$l}(),G$k=function(){function G$p(){}return G$M(G$p,"laya.utils.CacheManager"),G$p.regCacheByFunction=function(G$T,G$l){var G$w;G$p.unRegCacheByFunction(G$T,G$l),G$w={tryDispose:G$T,getCacheList:G$l},G$p._cacheList.push(G$w)},G$p.unRegCacheByFunction=function(G$T,G$l){var G$w,G$u=0;for(G$w=G$p._cacheList.length,G$u=0;G$u<G$w;G$u++)if(G$p._cacheList[G$u].tryDispose==G$T&&G$p._cacheList[G$u].getCacheList==G$l)return void G$p._cacheList.splice(G$u,1)},G$p.forceDispose=function(){var G$T=0,G$l=G$p._cacheList.length;for(G$T=0;G$T<G$l;G$T++)G$p._cacheList[G$T].tryDispose(!0)},G$p.beginCheck=function(G$T){void 0===G$T&&(G$T=15e3),G$B.timer.loop(G$T,null,G$p._checkLoop)},G$p.stopCheck=function(){G$B.timer.clear(null,G$p._checkLoop)},G$p._checkLoop=function(){var G$T=G$p._cacheList;if(!(G$T.length<1)){var G$l,G$w=G$H.now(),G$u=0;for(G$l=G$u=G$T.length;0<G$u&&(G$T[G$p._index=++G$p._index%G$l].tryDispose(!1),!(G$H.now()-G$w>G$p.loopTimeLimit));)G$u--}},G$p.loopTimeLimit=2,G$p._cacheList=[],G$p._index=0,G$p}(),G$n=function(){function G$K(){}return G$M(G$K,"laya.utils.ClassUtils"),G$K.regClass=function(G$T,G$l){G$K._classMap[G$T]=G$l},G$K.getRegClass=function(G$T){return G$K._classMap[G$T]},G$K.getInstance=function(G$T){var G$l=G$K.getClass(G$T);return G$l?new G$l:(console.warn("[error] Undefined class:",G$T),null)},G$K.createByJson=function(G$T,G$l,G$w,G$u,G$p){"string"==typeof G$T&&(G$T=JSON.parse(G$T));var G$D=G$T.props;if(!G$l&&!(G$l=G$p?G$p.runWith(G$T):G$K.getInstance(G$D.runtime||G$T.type)))return null;var G$P=G$T.child;if(G$P)for(var G$j=0,G$J=G$P.length;G$j<G$J;G$j++){var G$q=G$P[G$j];if("render"!==G$q.props.name&&"render"!==G$q.props.renderType||!G$l._$set_itemRender)if("Graphic"==G$q.type)G$K.addGraphicsToSprite(G$q,G$l);else if(G$K.isDrawType(G$q.type))G$K.addGraphicToSprite(G$q,G$l,!0);else{var G$M=G$K.createByJson(G$q,null,G$w,G$u,G$p);"Script"==G$q.type?G$M.hasOwnProperty("owner")?G$M.owner=G$l:G$M.hasOwnProperty("target")&&(G$M.target=G$l):"mask"==G$q.props.renderType?G$l.mask=G$M:G$l.addChild(G$M)}else G$l.itemRender=G$q}if(G$D)for(var G$z in G$D){var G$b=G$D[G$z];"var"===G$z&&G$w?G$w[G$b]=G$l:G$b instanceof Array&&"function"==typeof G$l[G$z]?G$l[G$z].apply(G$l,G$b):G$l[G$z]=G$b}return G$u&&G$T.customProps&&G$u.runWith([G$l,G$T]),G$l.created&&G$l.created(),G$l},G$K.addGraphicsToSprite=function(G$T,G$l){var G$w;if((G$w=G$T.child)&&!(G$w.length<1)){var G$u;G$u=G$K._getGraphicsFromSprite(G$T,G$l);var G$p=0,G$D=0;G$T.props&&(G$p=G$K._getObjVar(G$T.props,"x",0),G$D=G$K._getObjVar(G$T.props,"y",0)),0!=G$p&&0!=G$D&&G$u.translate(G$p,G$D);var G$P,G$j=0;for(G$P=G$w.length,G$j=0;G$j<G$P;G$j++)G$K._addGraphicToGraphics(G$w[G$j],G$u);0!=G$p&&0!=G$D&&G$u.translate(-G$p,-G$D)}},G$K.addGraphicToSprite=function(G$T,G$l,G$w){var G$u;void 0===G$w&&(G$w=!1),G$u=G$w?G$K._getGraphicsFromSprite(G$T,G$l):G$l.graphics,G$K._addGraphicToGraphics(G$T,G$u)},G$K._getGraphicsFromSprite=function(G$T,G$l){var G$w,G$u;if(!G$T||!G$T.props)return G$l.graphics;switch(G$u=G$T.props.renderType){case"hit":case"unHit":var G$p;G$l.hitArea||(G$l.hitArea=new G$h),(G$p=G$l.hitArea)[G$u]||(G$p[G$u]=new G$b),G$w=G$p[G$u]}return G$w||(G$w=G$l.graphics),G$w},G$K._getTransformData=function(G$T){var G$l;(G$T.hasOwnProperty("pivotX")||G$T.hasOwnProperty("pivotY"))&&(G$l=G$l||new G$y).translate(-G$K._getObjVar(G$T,"pivotX",0),-G$K._getObjVar(G$T,"pivotY",0));var G$w=G$K._getObjVar(G$T,"scaleX",1),G$u=G$K._getObjVar(G$T,"scaleY",1),G$p=G$K._getObjVar(G$T,"rotation",0);G$K._getObjVar(G$T,"skewX",0),G$K._getObjVar(G$T,"skewY",0);return 1==G$w&&1==G$u&&0==G$p||((G$l=G$l||new G$y).scale(G$w,G$u),G$l.rotate(.0174532922222222*G$p)),G$l},G$K._addGraphicToGraphics=function(G$T,G$l){var G$w,G$u;if((G$w=G$T.props)&&(G$u=G$K.DrawTypeDic[G$T.type])){var G$p,G$D;G$p=G$l;var G$P=G$K._getParams(G$w,G$u[1],G$u[2],G$u[3]);((G$D=G$K._tM)||1!=G$K._alpha)&&(G$p.save(),G$D&&G$p.transform(G$D),1!=G$K._alpha&&G$p.alpha(G$K._alpha)),G$p[G$u[0]].apply(G$p,G$P),(G$D||1!=G$K._alpha)&&G$p.restore()}},G$K._adptLineData=function(G$T){return G$T[2]=parseFloat(G$T[0])+parseFloat(G$T[2]),G$T[3]=parseFloat(G$T[1])+parseFloat(G$T[3]),G$T},G$K._adptTextureData=function(G$T){return G$T[0]=G$jT.getRes(G$T[0]),G$T},G$K._adptLinesData=function(G$T){return G$T[2]=G$K._getPointListByStr(G$T[2]),G$T},G$K.isDrawType=function(G$T){return"Image"!=G$T&&G$K.DrawTypeDic.hasOwnProperty(G$T)},G$K._getParams=function(G$T,G$l,G$w,G$u){var G$p;void 0===G$w&&(G$w=0),(G$p=G$K._temParam).length=G$l.length;var G$D,G$P,G$j=0;for(G$D=G$l.length,G$j=0;G$j<G$D;G$j++)G$p[G$j]=G$K._getObjVar(G$T,G$l[G$j][0],G$l[G$j][1]);return G$K._alpha=G$K._getObjVar(G$T,"alpha",1),G$P=G$K._getTransformData(G$T),G$K._tM=G$P?(G$w||(G$w=0),G$P.translate(G$p[G$w],G$p[G$w+1]),G$p[G$w]=G$p[G$w+1]=0,G$P):null,G$u&&G$K[G$u]&&(G$p=G$K[G$u](G$p)),G$p},G$K._getPointListByStr=function(G$T){var G$l,G$w,G$u=0;for(G$w=(G$l=G$T.split(",")).length,G$u=0;G$u<G$w;G$u++)G$l[G$u]=parseFloat(G$l[G$u]);return G$l},G$K._getObjVar=function(G$T,G$l,G$w){return G$T.hasOwnProperty(G$l)?G$T[G$l]:G$w},G$K._temParam=[],G$K._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},G$K.getClass=function(G$T){var G$l=G$K._classMap[G$T]||G$T;return"string"==typeof G$l?G$B.__classmap[G$l]:G$l},G$K._tM=null,G$K._alpha=NaN,G$J(G$K,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),G$K}(),G$d=function(){function G$D(G$T){if(this._color=[],"string"==typeof G$T){null===(this.strColor=G$T)&&(G$T="#000000"),"#"==G$T.charAt(0)&&(G$T=G$T.substr(1));var G$l=G$T.length;if(3==G$l||4==G$l){for(var G$w="",G$u=0;G$u<G$l;G$u++)G$w+=G$T[G$u]+G$T[G$u];G$T=G$w}var G$p=this.numColor=parseInt(G$T,16);if(8==G$T.length)return void(this._color=[parseInt(G$T.substr(0,2),16)/255,((16711680&G$p)>>16)/255,((65280&G$p)>>8)/255,(255&G$p)/255])}else G$p=this.numColor=G$T,this.strColor=G$V.toHexColor(G$p);this._color=[((16711680&G$p)>>16)/255,((65280&G$p)>>8)/255,(255&G$p)/255,1],this._color.__id=++G$D._COLODID}return G$M(G$D,"laya.utils.Color"),G$D._initDefault=function(){for(var G$T in G$D._DEFAULT={},G$D._COLOR_MAP)G$D._SAVE[G$T]=G$D._DEFAULT[G$T]=new G$D(G$D._COLOR_MAP[G$T]);return G$D._DEFAULT},G$D._initSaveMap=function(){for(var G$T in G$D._SAVE_SIZE=0,G$D._SAVE={},G$D._DEFAULT)G$D._SAVE[G$T]=G$D._DEFAULT[G$T]},G$D.create=function(G$T){var G$l=G$D._SAVE[G$T+""];return null!=G$l?G$l:(G$D._SAVE_SIZE<1e3||G$D._initSaveMap(),G$D._SAVE[G$T+""]=new G$D(G$T))},G$D._SAVE={},G$D._SAVE_SIZE=0,G$D._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},G$D._DEFAULT=G$D._initDefault(),G$D._COLODID=1,G$D}(),G$G=(function(){function G$T(){this._values=[],this._keys=[]}G$M(G$T,"laya.utils.Dictionary");var G$l=G$T.prototype;G$l.set=function(G$T,G$l){var G$w=this.indexOf(G$T);0<=G$w?this._values[G$w]=G$l:(this._keys.push(G$T),this._values.push(G$l))},G$l.indexOf=function(G$T){var G$l=this._keys.indexOf(G$T);return 0<=G$l?G$l:(G$T="string"==typeof G$T?Number(G$T):"number"==typeof G$T?G$T.toString():G$T,this._keys.indexOf(G$T))},G$l.get=function(G$T){var G$l=this.indexOf(G$T);return G$l<0?null:this._values[G$l]},G$l.remove=function(G$T){var G$l=this.indexOf(G$T);return 0<=G$l&&(this._keys.splice(G$l,1),this._values.splice(G$l,1),!0)},G$l.clear=function(){this._values.length=0,this._keys.length=0},G$Y(0,G$l,"values",function(){return this._values}),G$Y(0,G$l,"keys",function(){return this._keys})}(),function(){function G$T(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}G$M(G$T,"laya.utils.Dragging");var G$l=G$T.prototype;return G$l.start=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){void 0===G$j&&(G$j=.92),this.clearTimer(),this.target=G$T,this.area=G$l,this.hasInertia=G$w,this.elasticDistance=G$l?G$u:0,this.elasticBackTime=G$p,this.data=G$D,this._disableMouseEvent=G$P,this.ratio=G$j,1!=G$T.globalScaleX||1!=G$T.globalScaleY?this._parent=G$T.parent:this._parent=G$B.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,G$B.stage.on("mouseup",this,this.onStageMouseUp),G$B.stage.on("mouseout",this,this.onStageMouseUp),G$B.timer.frameLoop(1,this,this.loop)},G$l.clearTimer=function(){G$B.timer.clear(this,this.loop),G$B.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},G$l.stop=function(){this._dragging&&(G$t.instance.disableMouseEvent=!1,G$B.stage.off("mouseup",this,this.onStageMouseUp),G$B.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},G$l.loop=function(){var G$T=this._parent.getMousePoint(),G$l=G$T.x,G$w=G$T.y,G$u=G$l-this._lastX,G$p=G$w-this._lastY;if(this._clickOnly){if(!(1<Math.abs(G$u*G$B.stage._canvasTransform.getScaleX())||1<Math.abs(G$p*G$B.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),G$t.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(G$u,G$p);0==G$u&&0==G$p||(this._lastX=G$l,this._lastY=G$w,this.target.x+=G$u*this._elasticRateX,this.target.y+=G$p*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},G$l.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var G$T=this.area.x-this.target.x;else G$T=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-G$T/this.elasticDistance),this.target.y<this.area.y)var G$l=this.area.y-this.target.y;else G$l=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-G$l/this.elasticDistance)}},G$l.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},G$l.onStageMouseUp=function(G$T){if(G$t.instance.disableMouseEvent=!1,G$B.stage.off("mouseup",this,this.onStageMouseUp),G$B.stage.off("mouseout",this,this.onStageMouseUp),G$B.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var G$l=this._offsets.length,G$w=Math.min(G$l,6),G$u=this._offsets.length-G$w,G$p=G$l-1;G$u<G$p;G$p--)this._offsetY+=this._offsets[G$p--],this._offsetX+=this._offsets[G$p];this._offsetX=this._offsetX/G$w*2,this._offsetY=this._offsetY/G$w*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),G$B.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},G$l.checkElastic=function(){var G$T=NaN,G$l=NaN;if(this.target.x<this.area.x?G$T=this.area.x:this.target.x>this.area.x+this.area.width&&(G$T=this.area.x+this.area.width),this.target.y<this.area.y?G$l=this.area.y:this.target.y>this.area.y+this.area.height&&(G$l=this.area.y+this.area.height),isNaN(G$T)&&isNaN(G$l))this.clear();else{var G$w={};isNaN(G$T)||(G$w.x=G$T),isNaN(G$l)||(G$w.y=G$l),this._tween=G$E.to(this.target,G$w,this.elasticBackTime,G$N.sineOut,G$i.create(this,this.clear),0,!1,!1)}},G$l.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(G$B.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},G$l.clear=function(){if(this.target){this.clearTimer();var G$T=this.target;this.target=null,this._parent=null,G$T.event("dragend",this.data)}},G$T}()),G$N=function(){function G$j(){}return G$M(G$j,"laya.utils.Ease"),G$j.linearNone=function(G$T,G$l,G$w,G$u){return G$w*G$T/G$u+G$l},G$j.linearIn=function(G$T,G$l,G$w,G$u){return G$w*G$T/G$u+G$l},G$j.linearInOut=function(G$T,G$l,G$w,G$u){return G$w*G$T/G$u+G$l},G$j.linearOut=function(G$T,G$l,G$w,G$u){return G$w*G$T/G$u+G$l},G$j.bounceIn=function(G$T,G$l,G$w,G$u){return G$w-G$j.bounceOut(G$u-G$T,0,G$w,G$u)+G$l},G$j.bounceInOut=function(G$T,G$l,G$w,G$u){return G$T<.5*G$u?.5*G$j.bounceIn(2*G$T,0,G$w,G$u)+G$l:.5*G$j.bounceOut(2*G$T-G$u,0,G$w,G$u)+.5*G$w+G$l},G$j.bounceOut=function(G$T,G$l,G$w,G$u){return(G$T/=G$u)<1/2.75?G$w*(7.5625*G$T*G$T)+G$l:G$T<2/2.75?G$w*(7.5625*(G$T-=1.5/2.75)*G$T+.75)+G$l:G$T<2.5/2.75?G$w*(7.5625*(G$T-=2.25/2.75)*G$T+.9375)+G$l:G$w*(7.5625*(G$T-=2.625/2.75)*G$T+.984375)+G$l},G$j.backIn=function(G$T,G$l,G$w,G$u,G$p){return void 0===G$p&&(G$p=1.70158),G$w*(G$T/=G$u)*G$T*((G$p+1)*G$T-G$p)+G$l},G$j.backInOut=function(G$T,G$l,G$w,G$u,G$p){return void 0===G$p&&(G$p=1.70158),(G$T/=.5*G$u)<1?.5*G$w*(G$T*G$T*((1+(G$p*=1.525))*G$T-G$p))+G$l:G$w/2*((G$T-=2)*G$T*((1+(G$p*=1.525))*G$T+G$p)+2)+G$l},G$j.backOut=function(G$T,G$l,G$w,G$u,G$p){return void 0===G$p&&(G$p=1.70158),G$w*((G$T=G$T/G$u-1)*G$T*((G$p+1)*G$T+G$p)+1)+G$l},G$j.elasticIn=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P;return void 0===G$p&&(G$p=0),void 0===G$D&&(G$D=0),0==G$T?G$l:1==(G$T/=G$u)?G$l+G$w:(G$D||(G$D=.3*G$u),G$P=!G$p||0<G$w&&G$p<G$w||G$w<0&&G$p<-G$w?(G$p=G$w,G$D/4):G$D/G$j.PI2*Math.asin(G$w/G$p),-G$p*Math.pow(2,10*(G$T-=1))*Math.sin((G$T*G$u-G$P)*G$j.PI2/G$D)+G$l)},G$j.elasticInOut=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P;return void 0===G$p&&(G$p=0),void 0===G$D&&(G$D=0),0==G$T?G$l:2==(G$T/=.5*G$u)?G$l+G$w:(G$D||(G$D=G$u*(.3*1.5)),G$P=!G$p||0<G$w&&G$p<G$w||G$w<0&&G$p<-G$w?(G$p=G$w,G$D/4):G$D/G$j.PI2*Math.asin(G$w/G$p),G$T<1?G$p*Math.pow(2,10*(G$T-=1))*Math.sin((G$T*G$u-G$P)*G$j.PI2/G$D)*-.5+G$l:G$p*Math.pow(2,-10*(G$T-=1))*Math.sin((G$T*G$u-G$P)*G$j.PI2/G$D)*.5+G$w+G$l)},G$j.elasticOut=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P;return void 0===G$p&&(G$p=0),void 0===G$D&&(G$D=0),0==G$T?G$l:1==(G$T/=G$u)?G$l+G$w:(G$D||(G$D=.3*G$u),G$P=!G$p||0<G$w&&G$p<G$w||G$w<0&&G$p<-G$w?(G$p=G$w,G$D/4):G$D/G$j.PI2*Math.asin(G$w/G$p),G$p*Math.pow(2,-10*G$T)*Math.sin((G$T*G$u-G$P)*G$j.PI2/G$D)+G$w+G$l)},G$j.strongIn=function(G$T,G$l,G$w,G$u){return G$w*(G$T/=G$u)*G$T*G$T*G$T*G$T+G$l},G$j.strongInOut=function(G$T,G$l,G$w,G$u){return(G$T/=.5*G$u)<1?.5*G$w*G$T*G$T*G$T*G$T*G$T+G$l:.5*G$w*((G$T-=2)*G$T*G$T*G$T*G$T+2)+G$l},G$j.strongOut=function(G$T,G$l,G$w,G$u){return G$w*((G$T=G$T/G$u-1)*G$T*G$T*G$T*G$T+1)+G$l},G$j.sineInOut=function(G$T,G$l,G$w,G$u){return.5*-G$w*(Math.cos(Math.PI*G$T/G$u)-1)+G$l},G$j.sineIn=function(G$T,G$l,G$w,G$u){return-G$w*Math.cos(G$T/G$u*G$j.HALF_PI)+G$w+G$l},G$j.sineOut=function(G$T,G$l,G$w,G$u){return G$w*Math.sin(G$T/G$u*G$j.HALF_PI)+G$l},G$j.quintIn=function(G$T,G$l,G$w,G$u){return G$w*(G$T/=G$u)*G$T*G$T*G$T*G$T+G$l},G$j.quintInOut=function(G$T,G$l,G$w,G$u){return(G$T/=.5*G$u)<1?.5*G$w*G$T*G$T*G$T*G$T*G$T+G$l:.5*G$w*((G$T-=2)*G$T*G$T*G$T*G$T+2)+G$l},G$j.quintOut=function(G$T,G$l,G$w,G$u){return G$w*((G$T=G$T/G$u-1)*G$T*G$T*G$T*G$T+1)+G$l},G$j.quartIn=function(G$T,G$l,G$w,G$u){return G$w*(G$T/=G$u)*G$T*G$T*G$T+G$l},G$j.quartInOut=function(G$T,G$l,G$w,G$u){return(G$T/=.5*G$u)<1?.5*G$w*G$T*G$T*G$T*G$T+G$l:.5*-G$w*((G$T-=2)*G$T*G$T*G$T-2)+G$l},G$j.quartOut=function(G$T,G$l,G$w,G$u){return-G$w*((G$T=G$T/G$u-1)*G$T*G$T*G$T-1)+G$l},G$j.cubicIn=function(G$T,G$l,G$w,G$u){return G$w*(G$T/=G$u)*G$T*G$T+G$l},G$j.cubicInOut=function(G$T,G$l,G$w,G$u){return(G$T/=.5*G$u)<1?.5*G$w*G$T*G$T*G$T+G$l:.5*G$w*((G$T-=2)*G$T*G$T+2)+G$l},G$j.cubicOut=function(G$T,G$l,G$w,G$u){return G$w*((G$T=G$T/G$u-1)*G$T*G$T+1)+G$l},G$j.quadIn=function(G$T,G$l,G$w,G$u){return G$w*(G$T/=G$u)*G$T+G$l},G$j.quadInOut=function(G$T,G$l,G$w,G$u){return(G$T/=.5*G$u)<1?.5*G$w*G$T*G$T+G$l:.5*-G$w*(--G$T*(G$T-2)-1)+G$l},G$j.quadOut=function(G$T,G$l,G$w,G$u){return-G$w*(G$T/=G$u)*(G$T-2)+G$l},G$j.expoIn=function(G$T,G$l,G$w,G$u){return 0==G$T?G$l:G$w*Math.pow(2,10*(G$T/G$u-1))+G$l-.001*G$w},G$j.expoInOut=function(G$T,G$l,G$w,G$u){return 0==G$T?G$l:G$T==G$u?G$l+G$w:(G$T/=.5*G$u)<1?.5*G$w*Math.pow(2,10*(G$T-1))+G$l:.5*G$w*(2-Math.pow(2,-10*--G$T))+G$l},G$j.expoOut=function(G$T,G$l,G$w,G$u){return G$T==G$u?G$l+G$w:G$w*(1-Math.pow(2,-10*G$T/G$u))+G$l},G$j.circIn=function(G$T,G$l,G$w,G$u){return-G$w*(Math.sqrt(1-(G$T/=G$u)*G$T)-1)+G$l},G$j.circInOut=function(G$T,G$l,G$w,G$u){return(G$T/=.5*G$u)<1?.5*-G$w*(Math.sqrt(1-G$T*G$T)-1)+G$l:.5*G$w*(Math.sqrt(1-(G$T-=2)*G$T)+1)+G$l},G$j.circOut=function(G$T,G$l,G$w,G$u){return G$w*Math.sqrt(1-(G$T=G$T/G$u-1)*G$T)+G$l},G$j.HALF_PI=.5*Math.PI,G$j.PI2=2*Math.PI,G$j}(),G$h=function(){function G$z(){this._hit=null,this._unHit=null}G$M(G$z,"laya.utils.HitArea");var G$T=G$z.prototype;return G$T.isHit=function(G$T,G$l){return!!G$z.isHitGraphic(G$T,G$l,this.hit)&&!G$z.isHitGraphic(G$T,G$l,this.unHit)},G$T.contains=function(G$T,G$l){return this.isHit(G$T,G$l)},G$Y(0,G$T,"hit",function(){return this._hit||(this._hit=new G$b),this._hit},function(G$T){this._hit=G$T}),G$Y(0,G$T,"unHit",function(){return this._unHit||(this._unHit=new G$b),this._unHit},function(G$T){this._unHit=G$T}),G$z.isHitGraphic=function(G$T,G$l,G$w){if(!G$w)return!1;var G$u;if(!(G$u=G$w.cmds)&&G$w._one&&((G$u=G$z._cmds).length=1,G$u[0]=G$w._one),!G$u)return!1;var G$p,G$D,G$P=0;for(G$p=G$u.length,G$P=0;G$P<G$p;G$P++)if(G$D=G$u[G$P]){var G$j=G$R._context;switch(G$D.callee){case G$j._translate:case 6:G$T-=G$D[0],G$l-=G$D[1]}if(G$z.isHitCmd(G$T,G$l,G$D))return!0}return!1},G$z.isHitCmd=function(G$T,G$l,G$w){if(!G$w)return!1;var G$u=G$R._context,G$p=!1;switch(G$w.callee){case G$u._drawRect:case 13:G$z._rec.setTo(G$w[0],G$w[1],G$w[2],G$w[3]),G$p=G$z._rec.contains(G$T,G$l);break;case G$u._drawCircle:case G$u._fillCircle:case 14:G$p=(G$T-=G$w[0])*G$T+(G$l-=G$w[1])*G$l<G$w[2]*G$w[2];break;case G$u._drawPoly:case 18:G$T-=G$w[0],G$l-=G$w[1],G$p=G$z.ptInPolygon(G$T,G$l,G$w[2])}return G$p},G$z.ptInPolygon=function(G$T,G$l,G$w){var G$u;(G$u=G$z._ptPoint).setTo(G$T,G$l);var G$p,G$D=0,G$P=NaN,G$j=NaN,G$J=NaN,G$q=NaN;G$p=G$w.length;for(var G$M=0;G$M<G$p;G$M+=2){if(G$P=G$w[G$M],G$j=G$w[G$M+1],G$J=G$w[(G$M+2)%G$p],G$j!=(G$q=G$w[(G$M+3)%G$p]))if(!(G$u.y<Math.min(G$j,G$q)))if(!(G$u.y>=Math.max(G$j,G$q)))(G$u.y-G$j)*(G$J-G$P)/(G$q-G$j)+G$P>G$u.x&&G$D++}return G$D%2==1},G$z._cmds=[],G$J(G$z,["_rec",function(){return this._rec=new G$r},"_ptPoint",function(){return this._ptPoint=new G$s}]),G$z}(),G$g=(function(){function G$p(G$T,G$l,G$w,G$u){this.char=G$T,this.charNum=G$T.charCodeAt(0),this._x=this._y=0,this.width=G$l,this.height=G$w,this.style=G$u,this.isWord=!G$p._isWordRegExp.test(G$T)}G$M(G$p,"laya.utils.HTMLChar");var G$T=G$p.prototype;G$B.imps(G$T,{"laya.display.ILayout":!0}),G$T.setSprite=function(G$T){this._sprite=G$T},G$T.getSprite=function(){return this._sprite},G$T._isChar=function(){return!0},G$T._getCSSStyle=function(){return this.style},G$Y(0,G$T,"width",function(){return this._w},function(G$T){this._w=G$T}),G$Y(0,G$T,"x",function(){return this._x},function(G$T){this._sprite&&(this._sprite.x=G$T),this._x=G$T}),G$Y(0,G$T,"y",function(){return this._y},function(G$T){this._sprite&&(this._sprite.y=G$T),this._y=G$T}),G$Y(0,G$T,"height",function(){return this._h},function(G$T){this._h=G$T}),G$p._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function G$l(){}G$M(G$l,"laya.utils.Log"),G$l.enable=function(){G$l._logdiv||(G$l._logdiv=G$H.window.document.createElement("div"),G$H.window.document.body.appendChild(G$l._logdiv),G$l._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},G$l.toggle=function(){var G$T=G$l._logdiv.style;"1px"==G$T.width?G$T.width=G$T.height="50%":G$T.width=G$T.height="1px"},G$l.print=function(G$T){G$l._logdiv&&(G$l.maxCount<=G$l._count&&G$l.clear(),G$l._count++,G$l._logdiv.innerText+=G$T+"\n",G$l._logdiv.scrollTop=G$l._logdiv.scrollHeight)},G$l.clear=function(){G$l._logdiv.innerText="",G$l._count=0},G$l._logdiv=null,G$l._count=0,G$l.maxCount=20}(),function(){function G$l(){}G$M(G$l,"laya.utils.Mouse"),G$Y(1,G$l,"cursor",function(){return G$l._style.cursor},function(G$T){G$l._style.cursor=G$T}),G$l.hide=function(){"none"!=G$l.cursor&&(G$l._preCursor=G$l.cursor,G$l.cursor="none")},G$l.show=function(){"none"==G$l.cursor&&(G$l.cursor=G$l._preCursor?G$l._preCursor:"auto")},G$l._preCursor=null,G$J(G$l,["_style",function(){return this._style=G$H.document.body.style}])}(),function(){function G$D(){}return G$M(G$D,"laya.utils.Pool"),G$D.getPoolBySign=function(G$T){return G$D._poolDic[G$T]||(G$D._poolDic[G$T]=[])},G$D.clearBySign=function(G$T){G$D._poolDic[G$T]&&(G$D._poolDic[G$T].length=0)},G$D.recover=function(G$T,G$l){G$l.__InPool||(G$l.__InPool=!0,G$D.getPoolBySign(G$T).push(G$l))},G$D.getItemByClass=function(G$T,G$l){var G$w=G$D.getPoolBySign(G$T),G$u=G$w.length?G$w.pop():new G$l;return G$u.__InPool=!1,G$u},G$D.getItemByCreateFun=function(G$T,G$l,G$w){var G$u=G$D.getPoolBySign(G$T),G$p=G$u.length?G$u.pop():G$l.call(G$w);return G$p.__InPool=!1,G$p},G$D.getItem=function(G$T){var G$l=G$D.getPoolBySign(G$T),G$w=G$l.length?G$l.pop():null;return G$w&&(G$w.__InPool=!1),G$w},G$D._poolDic={},G$D.InPoolSign="__InPool",G$D}()),G$f=function(){function G$J(){}return G$M(G$J,"laya.utils.Stat"),G$Y(1,G$J,"onclick",null,function(G$T){G$J._sp&&G$J._sp.on("click",G$J._sp,G$T),G$J._canvas&&(G$J._canvas.source.onclick=G$T,G$J._canvas.source.style.pointerEvents="")}),G$J.show=function(G$T,G$l,G$w){if(void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),!G$R.isConchApp||G$R.isConchWebGL){if(G$R.isConchWebGL||G$H.onMiniGame||G$H.onLimixiu||(G$J._useCanvas=!0),G$J._show=!0,G$J._fpsData.length=60,G$J._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},G$J._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},G$J._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},G$J._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},G$R.isWebGL)if(G$J._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},G$R.is3DMode){if(G$J._view[0].title="FPS(3D)",G$J._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},G$J._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},G$J._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==G$w){var G$u=8;G$J._view[G$u++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},G$J._view[G$u++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},G$J._view[G$u++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},G$J._view[G$u++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},G$J._view[G$u++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},G$J._view[G$u++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},G$J._view[G$u++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},G$J._view[G$u++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},G$J._view[G$u++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==G$w){G$u=8;G$J._view[G$u++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},G$J._view[G$u++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},G$J._view[G$u++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},G$J._view[G$u++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},G$J._view[G$u++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},G$J._view[G$u++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},G$J._view[G$u++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else G$J._view[0].title="FPS(WebGL)",G$J._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else G$J._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};G$J._useCanvas?G$J.createUIPre(G$T,G$l):G$J.createUI(G$T,G$l),G$J.enable()}else G$H.window.conch.showFPS&&G$H.window.conch.showFPS(G$T,G$l)},G$J.createUIPre=function(G$T,G$l){var G$w=G$H.pixelRatio;G$J._width=170*G$w,G$J._vx=75*G$w,G$J._height=G$w*(12*G$J._view.length+3*G$w)+4,G$J._fontSize=12*G$w;for(var G$u=0;G$u<G$J._view.length;G$u++)G$J._view[G$u].x=4,G$J._view[G$u].y=G$u*G$J._fontSize+2*G$w;G$J._canvas||((G$J._canvas=new G$WT("2D")).size(G$J._width,G$J._height),(G$J._ctx=G$J._canvas.getContext("2d")).textBaseline="top",G$J._ctx.font=G$J._fontSize+"px Sans-serif",G$J._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+G$T+"px;top:"+G$l+"px;width:"+G$J._width/G$w+"px;height:"+G$J._height/G$w+"px;"),G$J._first=!0,G$J.loop(),G$J._first=!1,G$H.container.appendChild(G$J._canvas.source)},G$J.createUI=function(G$T,G$l){var G$w=G$J._sp,G$u=G$H.pixelRatio;G$w||(G$w=new G$zT,(G$J._leftText=new G$AT).pos(5,5),G$J._leftText.color="#ffffff",G$w.addChild(G$J._leftText),(G$J._txt=new G$AT).pos(80*G$u,5),G$J._txt.color="#ffffff",G$w.addChild(G$J._txt),G$J._sp=G$w),G$w.pos(G$T,G$l);for(var G$p="",G$D=0;G$D<G$J._view.length;G$D++){G$p+=G$J._view[G$D].title+"\n"}G$J._leftText.text=G$p;var G$P=170*G$u,G$j=G$u*(12*G$J._view.length+3*G$u)+4;G$J._txt.fontSize=G$J._fontSize*G$u,G$J._leftText.fontSize=G$J._fontSize*G$u,G$w.size(G$P,G$j),G$w.graphics.clear(),G$w.graphics.setAlpha(.5),G$w.graphics.drawRect(0,0,G$P,G$j,"#999999"),G$w.graphics.setAlpha(1),G$J.loop()},G$J.enable=function(){G$B.timer.frameLoop(1,G$J,G$J.loop)},G$J.hide=function(){G$J._show=!1,G$B.timer.clear(G$J,G$J.loop),G$J._canvas&&G$H.removeElement(G$J._canvas.source)},G$J.clear=function(){G$J.trianglesFaces=G$J.drawCall=G$J.shaderCall=G$J.spriteCount=G$J.spriteRenderUseCacheCount=G$J.treeNodeCollision=G$J.treeSpriteCollision=G$J.canvasNormal=G$J.canvasBitmap=G$J.canvasReCache=0},G$J.loop=function(){G$J._count++;var G$T=G$H.now();if(!(G$T-G$J._timer<1e3)){var G$l=G$J._count;if(G$J.FPS=Math.round(1e3*G$l/(G$T-G$J._timer)),G$J._show){G$J.trianglesFaces=Math.round(G$J.trianglesFaces/G$l),G$J.spriteCount=G$J._useCanvas?(G$J.drawCall=Math.round(G$J.drawCall/G$l)-2,G$J.shaderCall=Math.round(G$J.shaderCall/G$l),Math.round(G$J.spriteCount/G$l)-1):(G$J.drawCall=Math.round(G$J.drawCall/G$l)-2,G$J.shaderCall=Math.round(G$J.shaderCall/G$l)-4,Math.round(G$J.spriteCount/G$l)-4),G$J.spriteRenderUseCacheCount=Math.round(G$J.spriteRenderUseCacheCount/G$l),G$J.canvasNormal=Math.round(G$J.canvasNormal/G$l),G$J.canvasBitmap=Math.round(G$J.canvasBitmap/G$l),G$J.canvasReCache=Math.ceil(G$J.canvasReCache/G$l),G$J.treeNodeCollision=Math.round(G$J.treeNodeCollision/G$l),G$J.treeSpriteCollision=Math.round(G$J.treeSpriteCollision/G$l);var G$w=0<G$J.FPS?Math.floor(1e3/G$J.FPS).toString():" ";G$J._fpsStr=G$J.FPS+(G$J.renderSlow?" slow":"")+" "+G$w,G$J._spriteStr=G$J.spriteCount+(G$J.spriteRenderUseCacheCount?"/"+G$J.spriteRenderUseCacheCount:""),G$J._canvasStr=G$J.canvasReCache+"/"+G$J.canvasNormal+"/"+G$J.canvasBitmap,G$J.currentMemorySize=G$Z.systemResourceManager.memorySize,G$J._useCanvas?G$J.renderInfoPre():G$J.renderInfo(),G$J.clear()}G$J._count=0,G$J._timer=G$T}},G$J.renderInfoPre=function(){if(G$J._canvas){var G$T=G$J._ctx;G$T.clearRect(G$J._first?0:G$J._vx,0,G$J._width,G$J._height);for(var G$l=G$R.WebGL.mainContext,G$w=0;G$w<G$J._view.length;G$w++){var G$u=G$J._view[G$w];G$J._first&&(G$T.fillStyle="white",G$T.fillText(G$u.title,G$u.x,G$u.y,null,null,null)),G$T.fillStyle=G$u.color;var G$p=-1;if((G$u=G$J._view[G$w]).varying){if(G$l)switch(G$u.varying){case 1:G$p=G$l.getParameter(G$l[G$u.value]);break;case 2:G$p=G$l.getExtension(G$u.value)}}else G$p=G$J[G$u.value];"M"==G$u.units&&(G$p=Math.floor(G$p/1048576*100)/100+" M"),"K"==G$u.units&&(G$p=Math.floor(G$p/1024*100)/100+" K"),"string"==G$u.units&&(G$p=G$p.match(/\d+\.?\d/i)),G$T.fillText(G$p+"",G$u.x+G$J._vx,G$u.y,null,null,null)}}},G$J.renderInfo=function(){for(var G$T="",G$l=G$R.WebGL.mainContext,G$w=0;G$w<G$J._view.length;G$w++){var G$u=G$J._view[G$w],G$p=-1;if(G$u.varying){if(G$l)switch(G$u.varying){case 1:G$p=G$l.getParameter(G$l[G$u.value]);break;case 2:G$p=G$l.getExtension(G$u.value)}}else G$p=G$J[G$u.value];"M"==G$u.units&&(G$p=Math.floor(G$p/1048576*100)/100+" M"),"K"==G$u.units&&(G$p=Math.floor(G$p/1024*100)/100+" K"),"string"==G$u.units&&(G$p=G$p.match(/\d+\.?\d/i)),G$T+=G$p+"\n"}G$J._txt.text=G$T},G$J.FPS=0,G$J.loopCount=0,G$J.shaderCall=0,G$J.drawCall=0,G$J.trianglesFaces=0,G$J.spriteCount=0,G$J.spriteRenderUseCacheCount=0,G$J.treeNodeCollision=0,G$J.treeSpriteCollision=0,G$J.canvasNormal=0,G$J.canvasBitmap=0,G$J.canvasReCache=0,G$J.renderSlow=!1,G$J.currentMemorySize=0,G$J._fpsStr=null,G$J._canvasStr=null,G$J._spriteStr=null,G$J._fpsData=[],G$J._timer=0,G$J._count=0,G$J._view=[],G$J._fontSize=12,G$J._txt=null,G$J._leftText=null,G$J._sp=null,G$J._show=!1,G$J._useCanvas=!1,G$J._canvas=null,G$J._ctx=null,G$J._first=!1,G$J._vx=NaN,G$J._width=0,G$J._height=100,G$J}(),G$U=(function(){function G$T(){this._strsToID={},this._idToStrs=[],this._length=0}G$M(G$T,"laya.utils.StringKey");var G$l=G$T.prototype;G$l.add=function(G$T){var G$l=this._strsToID[G$T];return null!=G$l?G$l:(this._idToStrs[this._length]=G$T,this._strsToID[G$T]=this._length++)},G$l.getID=function(G$T){var G$l=this._strsToID[G$T];return null==G$l?-1:G$l},G$l.getName=function(G$T){var G$l=this._idToStrs[G$T];return null==G$l?void 0:G$l}}(),function(){var G$q;function G$T(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}G$M(G$T,"laya.utils.Timer");var G$l=G$T.prototype;return G$l._init=function(){G$B.timer&&G$B.timer.frameLoop(1,this,this._update)},G$l._now=function(){return Date.now()},G$l._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var G$T=this.currFrame=this.currFrame+this.scale,G$l=this._now();this._delta=(G$l-this._lastTimer)*this.scale;var G$w=this.currTimer=this.currTimer+this._delta;G$B.isDebug&&6e4<Math.abs(G$l-this._lastTimer)&&console.error("系统时间错误！"+(G$l-this._lastTimer)),this._lastTimer=G$l;var G$u=this._handlers;for(G$P=this._count=0,G$j=G$u.length;G$P<G$j;G$P++)if(null!==(G$J=G$u[G$P]).method){var G$p=G$J.userFrame?G$T:G$w;if(G$p>=G$J.exeTime)if(G$J.repeat)if(G$J.jumpFrame)for(;G$p>=G$J.exeTime;)G$J.exeTime+=G$J.delay,G$J.run(!1);else G$J.exeTime+=G$J.delay,G$J.run(!1),G$p>G$J.exeTime&&(G$J.exeTime+=Math.ceil((G$p-G$J.exeTime)/G$J.delay)*G$J.delay);else G$J.run(!0)}else this._count++;(30<this._count||G$T%200==0)&&this._clearHandlers();for(var G$D=this._laters,G$P=0,G$j=G$D.length-1;G$P<=G$j;G$P++){var G$J=G$D[G$P];this._isIgnoreRecover(G$J)||(null!==G$J.method&&(delete this._map[G$J.key],G$J.run(!1)),this._recoverHandler(G$J)),G$P===G$j&&(G$j=G$D.length-1)}G$D.length=0}},G$l._clearHandlers=function(){for(var G$T=this._handlers,G$l=0,G$w=G$T.length;G$l<G$w;G$l++){var G$u=G$T[G$l];null!==G$u.method?this._temp.push(G$u):this._isIgnoreRecover(G$u)?this._temp.push(G$u):this._recoverHandler(G$u)}this._handlers=this._temp,this._temp=G$T,this._temp.length=0},G$l._recoverHandler=function(G$T){this._map[G$T.key]==G$T&&delete this._map[G$T.key],G$T.recover()},G$l._create=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){if(!G$w)return G$p.apply(G$u,G$D),null;if(G$P){var G$J=this._getHandler(G$u,G$p);if(G$J)return G$J.repeat=G$l,G$J.userFrame=G$T,G$J.delay=G$w,G$J.ignoreRecover=G$j,G$J.caller=G$u,G$J.method=G$p,G$J.args=G$D,G$J.exeTime=G$w+(G$T?this.currFrame:this.currTimer+this._now()-this._lastTimer),G$J}return(G$J=G$q.create()).repeat=G$l,G$J.userFrame=G$T,G$J.delay=G$w,G$J.ignoreRecover=G$j,G$J.caller=G$u,G$J.method=G$p,G$J.args=G$D,G$J.exeTime=G$w+(G$T?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(G$J),this._handlers.push(G$J),G$J},G$l._indexHandler=function(G$T){var G$l=G$T.caller,G$w=G$T.method,G$u=G$l?G$l.$_GID||(G$l.$_GID=G$V.getGID()):0,G$p=G$w.$_TID||(G$w.$_TID=this._mid++);G$T.key=G$u+"_"+G$p,this._map[G$T.key]=G$T},G$l.once=function(G$T,G$l,G$w,G$u,G$p){void 0===G$p&&(G$p=!0),this._create(!1,!1,G$T,G$l,G$w,G$u,G$p,!1)},G$l.loop=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){void 0===G$p&&(G$p=!0),void 0===G$D&&(G$D=!1),void 0===G$P&&(G$P=!1);var G$j=this._create(!1,!0,G$T,G$l,G$w,G$u,G$p,G$P);G$j&&(G$j.jumpFrame=G$D)},G$l.frameOnce=function(G$T,G$l,G$w,G$u,G$p){void 0===G$p&&(G$p=!0),this._create(!0,!1,G$T,G$l,G$w,G$u,G$p,!1)},G$l.frameLoop=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$p&&(G$p=!0),void 0===G$D&&(G$D=!1),this._create(!0,!0,G$T,G$l,G$w,G$u,G$p,G$D)},G$l.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+G$q._freeCount},G$l.clear=function(G$T,G$l){var G$w=this._getHandler(G$T,G$l);return!(!G$w||this._isIgnoreRecover(G$w))&&(delete this._map[G$w.key],G$w.key=null,G$w.clear(),!0)},G$l.clearAll=function(G$T){if(G$T)for(var G$l=0,G$w=this._handlers.length;G$l<G$w;G$l++){var G$u=this._handlers[G$l];G$u.caller===G$T&&(this._isIgnoreRecover(G$u)||(delete this._map[G$u.key],G$u.key=null,G$u.clear()))}},G$l._getHandler=function(G$T,G$l){var G$w=G$T?G$T.$_GID||(G$T.$_GID=G$V.getGID()):0,G$u=G$l.$_TID||(G$l.$_TID=this._mid++);return this._map[G$w+"_"+G$u]},G$l._isIgnoreRecover=function(G$T){if(G$T.ignoreRecover||G$T.caller&&"IgnoreRecover"==G$T.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var G$l="";try{arguments.propertyIsEnumerable.caller}catch(G$T){G$l=G$T.stack}G$B.recordError("报错：核心定时器销毁忽略  "+G$l)}return!0}return!1},G$l.hasHandler=function(G$T,G$l){return this._map[G$T.$_GID+"_"+G$l.$_TID]},G$l.callLater=function(G$T,G$l,G$w){if(null==this._getHandler(G$T,G$l)){var G$u=G$q.create();G$u.caller=G$T,G$u.method=G$l,G$u.args=G$w,this._indexHandler(G$u),this._laters.push(G$u)}},G$l.runCallLater=function(G$T,G$l){var G$w=this._getHandler(G$T,G$l);G$w&&null!=G$w.method&&(this._isIgnoreRecover(G$w)||(delete this._map[G$w.key],G$w.run(!0)))},G$l.runTimer=function(G$T,G$l){this.runCallLater(G$T,G$l)},G$Y(0,G$l,"delta",function(){return this._delta}),G$T.__init$=function(){G$q=function(){function G$l(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}G$M(G$l,"");var G$T=G$l.prototype;return G$T.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},G$T.recover=function(){this.clear(),this.args=G$l._freeHandler,G$l._freeHandler=this,G$l._freeCount++},G$T.run=function(G$T){var G$l=this.caller;if(G$l&&G$l.destroyed)return this.clear();var G$w=this.method,G$u=this.args;G$T&&this.clear(),null!=G$w&&(G$u?G$w.apply(G$l,G$u):G$w.call(G$l))},G$l._freeHandler=null,G$l._freeCount=0,G$l.create=function(){var G$T=G$l._freeHandler;return G$T?(G$l._freeHandler=G$T.args,--G$l._freeCount,G$T.args=null,G$T):new G$l},G$l}()},G$T}()),G$E=function(){function G$z(){this.gid=0}G$M(G$z,"laya.utils.Tween");var G$T=G$z.prototype;return G$T.to=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){return void 0===G$D&&(G$D=0),void 0===G$P&&(G$P=!1),this._create(G$T,G$l,G$w,G$u,G$p,G$D,G$P,!0,!1,!0)},G$T.from=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){return void 0===G$D&&(G$D=0),void 0===G$P&&(G$P=!1),this._create(G$T,G$l,G$w,G$u,G$p,G$D,G$P,!1,!1,!0)},G$T._create=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){if(!G$T)throw new Error("Tween:target is null");this._target=G$T,this._duration=G$w,this._ease=G$u||G$l.ease||G$z.easeNone,this._complete=G$p||G$l.complete,this._delay=G$D,this._props=[],this._usedTimer=0,this._startTimer=G$H.now(),this._usedPool=G$J,this._delayParam=null,this.update=G$l.update;var G$M=G$T.$_GID||(G$T.$_GID=G$V.getGID());return G$z.tweenMap[G$M]?(G$P&&G$z.clearTween(G$T),G$z.tweenMap[G$M].push(this)):G$z.tweenMap[G$M]=[this],G$q?G$D<=0?this.firstStart(G$T,G$l,G$j):(this._delayParam=[G$T,G$l,G$j],G$B.scaleTimer.once(G$D,this,this.firstStart,this._delayParam)):this._initProps(G$T,G$l,G$j),this},G$T.firstStart=function(G$T,G$l,G$w){this._delayParam=null,G$T.destroyed?this.clear():(this._initProps(G$T,G$l,G$w),this._beginLoop())},G$T._initProps=function(G$T,G$l,G$w){for(var G$u in G$l)if("number"==typeof G$T[G$u]){var G$p=G$w?G$T[G$u]:G$l[G$u],G$D=G$w?G$l[G$u]:G$T[G$u];this._props.push([G$u,G$p,G$D-G$p]),G$w||(G$T[G$u]=G$p)}},G$T._beginLoop=function(){G$B.scaleTimer.frameLoop(1,this,this._doEase)},G$T._doEase=function(){this._updateEase(G$H.now())},G$T._updateEase=function(G$T){var G$l=this._target;if(G$l){if(G$l.destroyed)return G$z.clearTween(G$l);var G$w=this._usedTimer=G$T-this._startTimer-this._delay;if(!(G$w<0)){if(G$w>=this._duration)return this.complete();for(var G$u=0<G$w?this._ease(G$w,0,1,this._duration):0,G$p=this._props,G$D=0,G$P=G$p.length;G$D<G$P;G$D++){var G$j=G$p[G$D];G$l[G$j[0]]=G$j[1]+G$u*G$j[2]}this.update&&this.update.run()}}},G$T.complete=function(){if(this._target){G$B.scaleTimer.runTimer(this,this.firstStart);for(var G$T=this._target,G$l=this._props,G$w=this._complete,G$u=0,G$p=G$l.length;G$u<G$p;G$u++){var G$D=G$l[G$u];G$T[G$D[0]]=G$D[1]+G$D[2]}this.update&&this.update.run(),this.clear(),G$w&&G$w.run()}},G$T.pause=function(){G$B.scaleTimer.clear(this,this._beginLoop),G$B.scaleTimer.clear(this,this._doEase),G$B.scaleTimer.clear(this,this.firstStart);var G$T;(G$T=G$H.now()-this._startTimer-this._delay)<0&&(this._usedTimer=G$T)},G$T.setStartTime=function(G$T){this._startTimer=G$T},G$T.clear=function(){this._target&&(this._remove(),this._clear())},G$T._clear=function(){this.pause(),G$B.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,G$g.recover("tween",this))},G$T.recover=function(){this._usedPool=!0,this._clear()},G$T._remove=function(){var G$T=G$z.tweenMap[this._target.$_GID];if(G$T)for(var G$l=0,G$w=G$T.length;G$l<G$w;G$l++)if(G$T[G$l]===this){G$T.splice(G$l,1);break}},G$T.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=G$H.now(),this._delayParam)G$B.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var G$T=this._props,G$l=0,G$w=G$T.length;G$l<G$w;G$l++){var G$u=G$T[G$l];this._target[G$u[0]]=G$u[1]}G$B.scaleTimer.once(this._delay,this,this._beginLoop)}},G$T.resume=function(){this._usedTimer>=this._duration||(this._startTimer=G$H.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?G$B.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},G$Y(0,G$T,"progress",null,function(G$T){var G$l=G$T*this._duration;this._startTimer=G$H.now()-this._delay-G$l}),G$z.to=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){return void 0===G$D&&(G$D=0),void 0===G$P&&(G$P=!1),void 0===G$j&&(G$j=!0),G$g.getItemByClass("tween",G$z)._create(G$T,G$l,G$w,G$u,G$p,G$D,G$P,!0,G$j,!0)},G$z.from=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){return void 0===G$D&&(G$D=0),void 0===G$P&&(G$P=!1),void 0===G$j&&(G$j=!0),G$g.getItemByClass("tween",G$z)._create(G$T,G$l,G$w,G$u,G$p,G$D,G$P,!1,G$j,!0)},G$z.clearAll=function(G$T){if(G$T&&G$T.$_GID){var G$l=G$z.tweenMap[G$T.$_GID];if(G$l){for(var G$w=0,G$u=G$l.length;G$w<G$u;G$w++)G$l[G$w]._clear();G$l.length=0}}},G$z.clear=function(G$T){G$T.clear()},G$z.clearTween=function(G$T){G$z.clearAll(G$T)},G$z.easeNone=function(G$T,G$l,G$w,G$u){return G$w*G$T/G$u+G$l},G$z.tweenMap={},G$z}(),G$V=function(){function G$j(){}return G$M(G$j,"laya.utils.Utils"),G$j.toRadian=function(G$T){return G$T*G$j._pi2},G$j.toAngle=function(G$T){return G$T*G$j._pi},G$j.toHexColor=function(G$T){if(G$T<0||isNaN(G$T))return null;for(var G$l=G$T.toString(16);G$l.length<6;)G$l="0"+G$l;return"#"+G$l},G$j.getGID=function(){return G$j._gid++},G$j.concatArray=function(G$T,G$l){if(!G$l)return G$T;if(!G$T)return G$l;var G$w=0,G$u=G$l.length;for(G$w=0;G$w<G$u;G$w++)G$T.push(G$l[G$w]);return G$T},G$j.clearArray=function(G$T){return G$T&&(G$T.length=0),G$T},G$j.copyArray=function(G$T,G$l){if(G$T||(G$T=[]),!G$l)return G$T;G$T.length=G$l.length;var G$w=0,G$u=G$l.length;for(G$w=0;G$w<G$u;G$w++)G$T[G$w]=G$l[G$w];return G$T},G$j.getGlobalRecByPoints=function(G$T,G$l,G$w,G$u,G$p){var G$D,G$P;return G$D=new G$s(G$l,G$w),G$D=G$T.localToGlobal(G$D),G$P=new G$s(G$u,G$p),G$P=G$T.localToGlobal(G$P),G$r._getWrapRec([G$D.x,G$D.y,G$P.x,G$P.y])},G$j.getGlobalPosAndScale=function(G$T){return G$j.getGlobalRecByPoints(G$T,0,0,1,1)},G$j.bind=function(G$T,G$l){return G$T.bind(G$l)},G$j.measureText=function(G$T,G$l){return G$e.measureText(G$T,G$l)},G$j.contextMeasureText=function(G$T){var G$l=G$H.context.measureText(G$T);return G$l||(G$l={width:16,height:16}),G$l},G$j.updateOrder=function(G$T){if(!G$T||G$T.length<2)return!1;for(var G$l,G$w=1,G$u=0,G$p=G$T.length,G$D=NaN;G$w<G$p;){for(G$l=G$T[G$u=G$w],G$D=G$T[G$u]._zOrder;-1<--G$u&&G$T[G$u]._zOrder>G$D;)G$T[G$u+1]=G$T[G$u];G$T[G$u+1]=G$l,G$w++}var G$P=G$l.parent.conchModel;if(G$P)if(null!=G$P.updateZOrder)G$P.updateZOrder();else{for(G$w=0;G$w<G$p;G$w++)G$P.removeChild(G$T[G$w].conchModel);for(G$w=0;G$w<G$p;G$w++)G$P.addChildAt(G$T[G$w].conchModel,G$w)}return!0},G$j.transPointList=function(G$T,G$l,G$w){var G$u=0,G$p=G$T.length;for(G$u=0;G$u<G$p;G$u+=2)G$T[G$u]+=G$l,G$T[G$u+1]+=G$w},G$j.parseInt=function(G$T,G$l){void 0===G$l&&(G$l=0);var G$w=G$H.window.parseInt(G$T,G$l);return isNaN(G$w)?0:G$w},G$j.getFileExtension=function(G$T){G$j._extReg.lastIndex=G$T.lastIndexOf(".");var G$l=G$j._extReg.exec(G$T);return G$l&&1<G$l.length?G$l[1].toLowerCase():null},G$j.getTransformRelativeToWindow=function(G$T,G$l,G$w){var G$u=G$B.stage,G$p=laya.utils.Utils.getGlobalPosAndScale(G$T),G$D=G$u._canvasTransform.clone(),G$P=G$D.tx,G$j=G$D.ty;G$D.rotate(-Math.PI/180*G$B.stage.canvasDegree),G$D.scale(G$B.stage.clientScaleX,G$B.stage.clientScaleY);var G$J=G$B.stage.canvasDegree%180!=0,G$q=NaN,G$M=NaN;G$J?(G$q=G$w+G$p.y,G$M=G$l+G$p.x,G$q*=G$D.d,G$M*=G$D.a,90==G$B.stage.canvasDegree?(G$q=G$P-G$q,G$M+=G$j):(G$q+=G$P,G$M=G$j-G$M)):(G$q=G$l+G$p.x,G$M=G$w+G$p.y,G$q*=G$D.a,G$M*=G$D.d,G$q+=G$P,G$M+=G$j);var G$z=NaN,G$b=NaN;return G$b=G$J?(G$z=G$D.d*G$p.height,G$D.a*G$p.width):(G$z=G$D.a*G$p.width,G$D.d*G$p.height),{x:G$q,y:G$M,scaleX:G$z,scaleY:G$b}},G$j.fitDOMElementInArea=function(G$T,G$l,G$w,G$u,G$p,G$D){G$T._fitLayaAirInitialized||(G$T._fitLayaAirInitialized=!0,G$T.style.transformOrigin=G$T.style.webKittransformOrigin="left top",G$T.style.position="absolute");var G$P=G$j.getTransformRelativeToWindow(G$l,G$w,G$u);G$T.style.transform=G$T.style.webkitTransform="scale("+G$P.scaleX+","+G$P.scaleY+") rotate("+G$B.stage.canvasDegree+"deg)",G$T.style.width=G$p+"px",G$T.style.height=G$D+"px",G$T.style.left=G$P.x+"px",G$T.style.top=G$P.y+"px"},G$j.isOkTextureList=function(G$T){if(!G$T)return!1;var G$l,G$w=0,G$u=G$T.length;for(G$w=0;G$w<G$u;G$w++)if(!(G$l=G$T[G$w])||!G$l.source)return!1;return!0},G$j.isOKCmdList=function(G$T){if(!G$T)return!1;var G$l,G$w,G$u=0,G$p=G$T.length,G$D=G$R._context;for(G$u=0;G$u<G$p;G$u++)switch((G$l=G$T[G$u]).callee){case G$D._drawTexture:case G$D._fillTexture:case G$D._drawTextureWithTransform:if(!(G$w=G$l[0])||!G$w.source)return!1}return!0},G$j._gid=1,G$j._pi=180/Math.PI,G$j._pi2=Math.PI/180,G$j._extReg=/\.(\w+)\??/g,G$j.parseXMLFromString=function(G$T){var G$l;if(G$T=G$T.replace(/>\s+</g,"><"),-1<(G$l=(new DOMParser).parseFromString(G$T,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(G$l.firstChild.firstChild.textContent);return G$l},G$j}(),G$C=function(){function G$T(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],G$R.isWebGL&&G$k.regCacheByFunction(G$V.bind(this.startDispose,this),G$V.bind(this.getCacheList,this))}G$M(G$T,"laya.utils.VectorGraphManager");var G$l=G$T.prototype;return G$l.getId=function(){return this._id++},G$l.addShape=function(G$T,G$l){this.shapeDic[G$T]=G$l,this.useDic[G$T]||(this.useDic[G$T]=!0)},G$l.addLine=function(G$T,G$l){this.shapeLineDic[G$T]=G$l,this.shapeLineDic[G$T]||(this.shapeLineDic[G$T]=!0)},G$l.getShape=function(G$T){this._checkKey&&null!=this.useDic[G$T]&&(this.useDic[G$T]=!0)},G$l.deleteShape=function(G$T){this.shapeDic[G$T]&&(this.shapeDic[G$T]=null,delete this.shapeDic[G$T]),this.shapeLineDic[G$T]&&(this.shapeLineDic[G$T]=null,delete this.shapeLineDic[G$T]),null!=this.useDic[G$T]&&delete this.useDic[G$T]},G$l.getCacheList=function(){var G$T,G$l=[];for(G$T in this.shapeDic)G$l.push(this.shapeDic[G$T]);for(G$T in this.shapeLineDic)G$l.push(this.shapeLineDic[G$T]);return G$l},G$l.startDispose=function(G$T){var G$l;for(G$l in this.useDic)this.useDic[G$l]=!1;this._checkKey=!0},G$l.endDispose=function(){if(this._checkKey){var G$T;for(G$T in this.useDic)this.useDic[G$T]||this.deleteShape(G$T);this._checkKey=!1}},G$T.getInstance=function(){return G$T.instance=G$T.instance||new G$T},G$T.instance=null,G$T}(),G$S=function(){function G$u(){this._obj=null,this._obj=G$u.supportWeakMap?new G$H.window.WeakMap:{},G$u.supportWeakMap||G$u._maps.push(this)}G$M(G$u,"laya.utils.WeakObject");var G$T=G$u.prototype;return G$T.set=function(G$T,G$l){if(null!=G$T)if(G$u.supportWeakMap){var G$w=G$T;"string"!=typeof G$T&&"number"!=typeof G$T||(G$w=G$u._keys[G$T])||(G$w=G$u._keys[G$T]={k:G$T}),this._obj.set(G$w,G$l)}else"string"==typeof G$T||"number"==typeof G$T?this._obj[G$T]=G$l:(G$T.$_GID||(G$T.$_GID=G$V.getGID()),this._obj[G$T.$_GID]=G$l)},G$T.get=function(G$T){if(null==G$T)return null;if(G$u.supportWeakMap){var G$l="string"==typeof G$T||"number"==typeof G$T?G$u._keys[G$T]:G$T;return G$l?this._obj.get(G$l):null}return"string"==typeof G$T||"number"==typeof G$T?this._obj[G$T]:this._obj[G$T.$_GID]},G$T.del=function(G$T){if(null!=G$T)if(G$u.supportWeakMap){var G$l="string"==typeof G$T||"number"==typeof G$T?G$u._keys[G$T]:G$T;if(!G$l)return;this._obj.delete(G$l)}else"string"==typeof G$T||"number"==typeof G$T?delete this._obj[G$T]:delete this._obj[this._obj.$_GID]},G$T.has=function(G$T){if(null==G$T)return!1;if(G$u.supportWeakMap){var G$l="string"==typeof G$T||"number"==typeof G$T?G$u._keys[G$T]:G$T;return this._obj.has(G$l)}return"string"==typeof G$T||"number"==typeof G$T?null!=this._obj[G$T]:null!=this._obj[this._obj.$_GID]},G$u.__init__=function(){(G$u.supportWeakMap=null!=G$H.window.WeakMap)||G$B.timer.loop(G$u.delInterval,null,G$u.clearCache)},G$u.clearCache=function(){for(var G$T=0,G$l=G$u._maps.length;G$T<G$l;G$T++){G$u._maps[G$T]._obj={}}},G$u.supportWeakMap=!1,G$u.delInterval=3e5,G$u._keys={},G$u._maps=[],G$J(G$u,["I",function(){return this.I=new G$u}]),G$u}(),G$_=function(){function G$T(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}G$M(G$T,"laya.utils.WordText");var G$l=G$T.prototype;return G$l.setText=function(G$T){this.changed=!0,this._text=G$T},G$l.toString=function(){return this._text},G$l.charCodeAt=function(G$T){return this._text?this._text.charCodeAt(G$T):NaN},G$l.charAt=function(G$T){return this._text?this._text.charAt(G$T):null},G$Y(0,G$l,"length",function(){return this._text?this._text.length:0}),G$T}(),G$TT=function(G$T){function G$P(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,G$P.__super.call(this),this._childs=G$P.ARRAY_EMPTY,this._$P=G$P.PROP_EMPTY,this.timer=G$B.scaleTimer,this.conchModel=G$R.isConchNode?this.createConchModel():null}G$M(G$P,"laya.display.Node",G$q);var G$l=G$P.prototype;return G$l._setBit=function(G$T,G$l){1==G$T&&(this._getBit(G$T)!=G$l&&this._updateDisplayedInstage());G$l?this._bits|=G$T:this._bits&=~G$T},G$l._getBit=function(G$T){return 0!=(this._bits&G$T)},G$l._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},G$l._setUpNoticeType=function(G$T){var G$l=this;for(G$l._setBit(G$T,!0),G$l=G$l.parent;G$l;){if(G$l._getBit(G$T))return;G$l._setBit(G$T,!0),G$l=G$l.parent}},G$l.on=function(G$T,G$l,G$w,G$u){return"display"!==G$T&&"undisplay"!==G$T||this._getBit(1)||this._setUpNoticeType(1),this._createListener(G$T,G$l,G$w,G$u,!1)},G$l.once=function(G$T,G$l,G$w,G$u){return"display"!==G$T&&"undisplay"!==G$T||this._getBit(1)||this._setUpNoticeType(1),this._createListener(G$T,G$l,G$w,G$u,!0)},G$l.createConchModel=function(){return null},G$l.destroy=function(G$T){void 0===G$T&&(G$T=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(G$T?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},G$l.destroyChildren=function(){if(this._childs)for(var G$T=this._childs.length-1;-1<G$T;G$T--)this._childs[G$T].destroy(!0)},G$l.addChild=function(G$T){if(!G$T||this.destroyed||G$T===this)return G$T;if(G$T.zOrder&&this._set$P("hasZorder",!0),G$T._parent===this){var G$l=this.getChildIndex(G$T);G$l!==this._childs.length-1&&(this._childs.splice(G$l,1),this._childs.push(G$T),this.conchModel&&(this.conchModel.removeChild(G$T.conchModel),this.conchModel.addChildAt(G$T.conchModel,this._childs.length-1)),this._childChanged())}else G$T.parent&&G$T.parent.removeChild(G$T),this._childs===G$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(G$T),this.conchModel&&this.conchModel.addChildAt(G$T.conchModel,this._childs.length-1),(G$T.parent=this)._childChanged();return G$T},G$l.addChildren=function(G$T){for(var G$l=arguments,G$w=0,G$u=G$l.length;G$w<G$u;)this.addChild(G$l[G$w++])},G$l.addChildAt=function(G$T,G$l){if(!G$T||this.destroyed||G$T===this)return G$T;if(G$T.zOrder&&this._set$P("hasZorder",!0),0<=G$l&&G$l<=this._childs.length){if(G$T._parent===this){var G$w=this.getChildIndex(G$T);this._childs.splice(G$w,1),this._childs.splice(G$l,0,G$T),this.conchModel&&(this.conchModel.removeChild(G$T.conchModel),this.conchModel.addChildAt(G$T.conchModel,G$l)),this._childChanged()}else G$T.parent&&G$T.parent.removeChild(G$T),this._childs===G$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(G$l,0,G$T),this.conchModel&&this.conchModel.addChildAt(G$T.conchModel,G$l),G$T.parent=this;return G$T}throw new Error("appendChildAt:The index is out of bounds")},G$l.getChildIndex=function(G$T){return this._childs.indexOf(G$T)},G$l.getChildByName=function(G$T){var G$l=this._childs;if(G$l)for(var G$w=0,G$u=G$l.length;G$w<G$u;G$w++){var G$p=G$l[G$w];if(G$p.name===G$T)return G$p}return null},G$l._get$P=function(G$T){return this._$P[G$T]},G$l._set$P=function(G$T,G$l){return this.destroyed||(this._$P===G$P.PROP_EMPTY&&(this._$P={}),this._$P[G$T]=G$l),G$l},G$l.getChildAt=function(G$T){return this._childs[G$T]},G$l.setChildIndex=function(G$T,G$l){var G$w=this._childs;if(G$l<0||G$l>=G$w.length)throw new Error("setChildIndex:The index is out of bounds.");var G$u=this.getChildIndex(G$T);if(G$u<0)throw new Error("setChildIndex:node is must child of this object.");return G$w.splice(G$u,1),G$w.splice(G$l,0,G$T),this.conchModel&&(this.conchModel.removeChild(G$T.conchModel),this.conchModel.addChildAt(G$T.conchModel,G$l)),this._childChanged(),G$T},G$l._childChanged=function(G$T){},G$l.removeChild=function(G$T){if(!this._childs)return G$T;var G$l=this._childs.indexOf(G$T);return this.removeChildAt(G$l)},G$l.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},G$l.removeChildByName=function(G$T){var G$l=this.getChildByName(G$T);return G$l&&this.removeChild(G$l),G$l},G$l.removeChildAt=function(G$T){var G$l=this.getChildAt(G$T);if(G$l){for(var G$w=this._childs.length-1,G$u=G$T;G$u<G$w;++G$u)this._childs[G$u]=this._childs[G$u+1];this._childs.length=G$w,this.conchModel&&this.conchModel.removeChild(G$l.conchModel),G$l.parent=null}return G$l},G$l.removeChildren=function(G$T,G$l){if(void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=2147483647),this._childs&&0<this._childs.length){var G$w=this._childs;if(0===G$T&&G$D<=G$l){var G$u=G$w;this._childs=G$P.ARRAY_EMPTY}else G$u=G$w.splice(G$T,G$l-G$T);for(var G$p=0,G$D=G$u.length;G$p<G$D;G$p++)G$u[G$p].parent=null,this.conchModel&&this.conchModel.removeChild(G$u[G$p].conchModel)}return this},G$l.replaceChild=function(G$T,G$l){var G$w=this._childs.indexOf(G$l);return-1<G$w?(this._childs.splice(G$w,1,G$T),this.conchModel&&(this.conchModel.removeChild(G$l.conchModel),this.conchModel.addChildAt(G$T.conchModel,G$w)),G$l.parent=null,G$T.parent=this,G$T):null},G$l._updateDisplayedInstage=function(){var G$T;G$T=this;var G$l=G$B.stage;for(this._displayedInStage=!1;G$T;){if(G$T._getBit(1)){this._displayedInStage=G$T._displayedInStage;break}if(G$T==G$l||G$T._displayedInStage){this._displayedInStage=!0;break}G$T=G$T.parent}},G$l._setDisplay=function(G$T){this._displayedInStage!==G$T&&((this._displayedInStage=G$T)?this.event("display"):this.event("undisplay"))},G$l._displayChild=function(G$T,G$l){var G$w=G$T._childs;if(G$w)for(var G$u=0;G$u<G$w.length;G$u++){var G$p=G$w[G$u];G$p&&G$p._getBit(1)&&(0<G$p._childs.length?this._displayChild(G$p,G$l):G$p._setDisplay(G$l))}G$T._setDisplay(G$l)},G$l.contains=function(G$T){if(G$T===this)return!0;for(;G$T;){if(G$T.parent===this)return!0;G$T=G$T.parent}return!1},G$l.timerLoop=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$p&&(G$p=!0),void 0===G$D&&(G$D=!1),this.timer.loop(G$T,G$l,G$w,G$u,G$p,G$D)},G$l.timerOnce=function(G$T,G$l,G$w,G$u,G$p){void 0===G$p&&(G$p=!0),this.timer._create(!1,!1,G$T,G$l,G$w,G$u,G$p)},G$l.frameLoop=function(G$T,G$l,G$w,G$u,G$p){void 0===G$p&&(G$p=!0),this.timer._create(!0,!0,G$T,G$l,G$w,G$u,G$p)},G$l.frameOnce=function(G$T,G$l,G$w,G$u,G$p){void 0===G$p&&(G$p=!0),this.timer._create(!0,!1,G$T,G$l,G$w,G$u,G$p)},G$l.clearTimer=function(G$T,G$l){this.timer.clear(G$T,G$l)},G$Y(0,G$l,"numChildren",function(){return this._childs.length}),G$Y(0,G$l,"destroyed",function(){return this._destroyed}),G$Y(0,G$l,"parent",function(){return this._parent},function(G$T){this._parent!==G$T&&(G$T?(this._parent=G$T,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),G$T.displayedInStage&&this._displayChild(this,!0)),G$T._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=G$T))}),G$Y(0,G$l,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),G$P.ARRAY_EMPTY=[],G$P.PROP_EMPTY={},G$P.NOTICE_DISPLAY=1,G$P.MOUSEENABLE=2,G$P}(),G$lT=function(G$T){function G$b(G$T){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,G$b.__super.call(this),this._padding=G$b._PADDING,this._spacing=G$b._SPACING,this._aligns=G$b._ALIGNS,this._font=G$K.EMPTY,this._ower=G$T}G$M(G$b,"laya.display.css.CSSStyle",G$T);var G$l=G$b.prototype;return G$l.destroy=function(){this._ower=null,this._font=null,this._rect=null},G$l.inherit=function(G$T){this._font=G$T._font,this._spacing=G$T._spacing===G$b._SPACING?G$b._SPACING:G$T._spacing.slice(),this.lineHeight=G$T.lineHeight},G$l._widthAuto=function(){return 0!=(262144&this._type)},G$l.widthed=function(G$T){return 0!=(8&this._type)},G$l._calculation=function(G$T,G$l){if(G$l.indexOf("%")<0)return!1;var G$u=this._ower,G$p=G$u.parent,G$D=this._rect;function G$P(G$T,G$l,G$w){return G$T*G$w[0]+G$l*G$w[1]+G$w[2]}function G$w(G$T){var G$l=G$p.width,G$w=G$u.width;G$D.width&&(G$u.width=G$P(G$l,G$w,G$D.width)),G$D.height&&(G$u.height=G$P(G$l,G$w,G$D.height)),G$D.left&&(G$u.x=G$P(G$l,G$w,G$D.left)),G$D.top&&(G$u.y=G$P(G$l,G$w,G$D.top))}null===G$D&&(G$p._getCSSStyle()._type|=524288,G$p.on("resize",this,G$w),this._rect=G$D={input:{}});var G$j=G$l.split(" ");return G$j[0]=parseFloat(G$j[0])/100,1==G$j.length?G$j[1]=G$j[2]=0:(G$j[1]=parseFloat(G$j[1])/100,G$j[2]=parseFloat(G$j[2])),G$D[G$T]=G$j,G$D.input[G$T]=G$l,G$w(),!0},G$l.heighted=function(G$T){return 0!=(8192&this._type)},G$l.size=function(G$T,G$l){var G$w=this._ower,G$u=!1;-1!==G$T&&G$T!=this._ower.width&&(this._type|=8,this._ower.width=G$T,G$u=!0),-1!==G$l&&G$l!=this._ower.height&&(this._type|=8192,this._ower.height=G$l,G$u=!0),G$u&&(G$w._layoutLater(),524288&this._type&&G$w.event("resize",this))},G$l._getAlign=function(){return this._aligns[0]},G$l._getValign=function(){return this._aligns[1]},G$l._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},G$l._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new G$K(this._font))},G$l.render=function(G$T,G$l,G$w,G$u){var G$p=G$T.width,G$D=G$T.height;G$w-=G$T.pivotX,G$u-=G$T.pivotY,this._bgground&&null!=this._bgground.color&&G$l.ctx.fillRect(G$w,G$u,G$p,G$D,this._bgground.color),this._border&&this._border.color&&G$l.drawRect(G$w,G$u,G$p,G$D,this._border.color.strColor,this._border.size)},G$l.getCSSStyle=function(){return this},G$l.cssText=function(G$T){this.attrs(G$b.parseOneCSS(G$T,";"))},G$l.attrs=function(G$T){if(G$T)for(var G$l=0,G$w=G$T.length;G$l<G$w;G$l++){var G$u=G$T[G$l];this[G$u[0]]=G$u[1]}},G$l.setTransform=function(G$T){"none"===G$T?this._tf=G$j._TF_EMPTY:this.attrs(G$b.parseOneCSS(G$T,","))},G$l.translate=function(G$T,G$l){this._tf===G$j._TF_EMPTY&&(this._tf=new G$p),this._tf.translateX=G$T,this._tf.translateY=G$l},G$l.scale=function(G$T,G$l){this._tf===G$j._TF_EMPTY&&(this._tf=new G$p),this._tf.scaleX=G$T,this._tf.scaleY=G$l},G$l._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},G$Y(0,G$l,"block",G$T.prototype._$get_block,function(G$T){G$T?this._type|=1:this._type&=-2}),G$Y(0,G$l,"valign",function(){return G$b._valigndef[this._aligns[1]]},function(G$T){this._aligns===G$b._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=G$b._valigndef[G$T]}),G$Y(0,G$l,"height",null,function(G$T){if(this._type|=8192,"string"==typeof G$T){if(this._calculation("height",G$T))return;G$T=parseInt(G$T)}this.size(-1,G$T)}),G$Y(0,G$l,"width",null,function(G$T){if(this._type|=8,"string"==typeof G$T){var G$l=G$T.indexOf("auto");if(0<=G$l&&(this._type|=262144,G$T=G$T.substr(0,G$l)),this._calculation("width",G$T))return;G$T=parseInt(G$T)}this.size(G$T,-1)}),G$Y(0,G$l,"fontWeight",function(){return this._font.weight},function(G$T){this._createFont().weight=G$T}),G$Y(0,G$l,"left",null,function(G$T){var G$l=this._ower;if("string"==typeof G$T){if("center"===G$T?G$T="50% -50% 0":"right"===G$T&&(G$T="100% -100% 0"),this._calculation("left",G$T))return;G$T=parseInt(G$T)}G$l.x=G$T}),G$Y(0,G$l,"_translate",null,function(G$T){this.translate(G$T[0],G$T[1])}),G$Y(0,G$l,"absolute",function(){return 0!=(4&this._type)}),G$Y(0,G$l,"top",null,function(G$T){var G$l=this._ower;if("string"==typeof G$T){if("middle"===G$T?G$T="50% -50% 0":"bottom"===G$T&&(G$T="100% -100% 0"),this._calculation("top",G$T))return;G$T=parseInt(G$T)}G$l.y=G$T}),G$Y(0,G$l,"align",function(){return G$b._aligndef[this._aligns[0]]},function(G$T){this._aligns===G$b._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=G$b._aligndef[G$T]}),G$Y(0,G$l,"bold",function(){return this._font.bold},function(G$T){this._createFont().bold=G$T}),G$Y(0,G$l,"padding",function(){return this._padding},function(G$T){this._padding=G$T}),G$Y(0,G$l,"leading",function(){return this._spacing[1]},function(G$T){"string"==typeof G$T&&(G$T=parseInt(G$T+"")),this._spacing===G$b._SPACING&&(this._spacing=[0,0]),this._spacing[1]=G$T}),G$Y(0,G$l,"lineElement",function(){return 0!=(65536&this._type)},function(G$T){G$T?this._type|=65536:this._type&=-65537}),G$Y(0,G$l,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(G$T){this.lineElement=!1,"right"===G$T?this._type|=32768:this._type&=-32769}),G$Y(0,G$l,"textDecoration",function(){return this._font.decoration},function(G$T){this._createFont().decoration=G$T}),G$Y(0,G$l,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(G$T){"nowrap"===G$T&&(this._type|=131072),"none"===G$T&&(this._type&=-131073)}),G$Y(0,G$l,"background",null,function(G$T){G$T?(this._bgground||(this._bgground={}),this._bgground.color=G$T,this._ower.conchModel&&this._ower.conchModel.bgColor(G$T),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),G$Y(0,G$l,"wordWrap",function(){return 0==(131072&this._type)},function(G$T){G$T?this._type&=-131073:this._type|=131072}),G$Y(0,G$l,"color",function(){return this._font.color},function(G$T){this._createFont().color=G$T}),G$Y(0,G$l,"password",function(){return this._font.password},function(G$T){this._createFont().password=G$T}),G$Y(0,G$l,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(G$T){"none"===G$T?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=G$T),this._ower.conchModel&&this._ower.conchModel.bgColor(G$T),this._ower._renderType|=256}),G$Y(0,G$l,"font",function(){return this._font.toString()},function(G$T){this._createFont().set(G$T)}),G$Y(0,G$l,"weight",null,function(G$T){this._createFont().weight=G$T}),G$Y(0,G$l,"letterSpacing",function(){return this._spacing[0]},function(G$T){"string"==typeof G$T&&(G$T=parseInt(G$T+"")),this._spacing===G$b._SPACING&&(this._spacing=[0,0]),this._spacing[0]=G$T}),G$Y(0,G$l,"fontSize",function(){return this._font.size},function(G$T){this._createFont().size=G$T}),G$Y(0,G$l,"italic",function(){return this._font.italic},function(G$T){this._createFont().italic=G$T}),G$Y(0,G$l,"fontFamily",function(){return this._font.family},function(G$T){this._createFont().family=G$T}),G$Y(0,G$l,"stroke",function(){return this._font.stroke[0]},function(G$T){this._createFont().stroke===G$K._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=G$T}),G$Y(0,G$l,"strokeColor",function(){return this._font.stroke[1]},function(G$T){this._createFont().stroke===G$K._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=G$T}),G$Y(0,G$l,"border",function(){return this._border?this._border.value:""},function(G$T){if("none"!=G$T){this._border||(this._border={});var G$l=(this._border.value=G$T).split(" ");if(this._border.color=G$d.create(G$l[G$l.length-1]),1==G$l.length)return this._border.size=1,void(this._border.type="solid");var G$w=0;0<G$l[0].indexOf("px")?(this._border.size=parseInt(G$l[0]),G$w++):this._border.size=1,this._border.type=G$l[G$w],this._ower._renderType|=256}else this._border=null}),G$Y(0,G$l,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(G$T){G$T?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==G$T?null:G$d.create(G$T),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),G$Y(0,G$l,"position",function(){return 4&this._type?"absolute":""},function(G$T){"absolute"==G$T?this._type|=4:this._type&=-5}),G$Y(0,G$l,"display",null,function(G$T){switch(G$T){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),G$Y(0,G$l,"paddingLeft",function(){return this.padding[3]}),G$Y(0,G$l,"paddingTop",function(){return this.padding[0]}),G$Y(0,G$l,"_scale",null,function(G$T){this._ower.scale(G$T[0],G$T[1])}),G$Y(0,G$l,"_rotate",null,function(G$T){this._ower.rotation=G$T}),G$b.parseOneCSS=function(G$T,G$l){for(var G$w,G$u=[],G$p=G$T.split(G$l),G$D=0,G$P=G$p.length;G$D<G$P;G$D++){var G$j=G$p[G$D],G$J=G$j.indexOf(":"),G$q=G$j.substr(0,G$J).replace(/^\s+|\s+$/g,"");if(0!=G$q.length){var G$M=G$j.substr(G$J+1).replace(/^\s+|\s+$/g,""),G$z=[G$q,G$M];switch(G$q){case"italic":case"bold":G$z[1]="true"==G$M;break;case"line-height":G$z[0]="lineHeight",G$z[1]=parseInt(G$M);break;case"font-size":G$z[0]="fontSize",G$z[1]=parseInt(G$M);break;case"padding":1<(G$w=G$M.split(" ")).length||(G$w[1]=G$w[2]=G$w[3]=G$w[0]),G$z[1]=[parseInt(G$w[0]),parseInt(G$w[1]),parseInt(G$w[2]),parseInt(G$w[3])];break;case"rotate":G$z[0]="_rotate",G$z[1]=parseFloat(G$M);break;case"scale":G$w=G$M.split(" "),G$z[0]="_scale",G$z[1]=[parseFloat(G$w[0]),parseFloat(G$w[1])];break;case"translate":G$w=G$M.split(" "),G$z[0]="_translate",G$z[1]=[parseInt(G$w[0]),parseInt(G$w[1])];break;default:(G$z[0]=G$b._CSSTOVALUE[G$q])||(G$z[0]=G$q)}G$u.push(G$z)}}return G$u},G$b.parseCSS=function(G$T,G$l){for(var G$w;null!=(G$w=G$b._parseCSSRegExp.exec(G$T));)G$b.styleSheets[G$w[1]]=G$b.parseOneCSS(G$w[2],";")},G$b.EMPTY=new G$b(null),G$b._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},G$b._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),G$b._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},G$b._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},G$b.styleSheets={},G$b.ALIGN_CENTER=1,G$b.ALIGN_RIGHT=2,G$b.VALIGN_MIDDLE=1,G$b.VALIGN_BOTTOM=2,G$b._CSS_BLOCK=1,G$b._DISPLAY_NONE=2,G$b._ABSOLUTE=4,G$b._WIDTH_SET=8,G$b._PADDING=[0,0,0,0],G$b._RECT=[-1,-1,-1,-1],G$b._SPACING=[0,0],G$b._ALIGNS=[0,0,0],G$b.ADDLAYOUTED=512,G$b._NEWFONT=4096,G$b._HEIGHT_SET=8192,G$b._BACKGROUND_SET=16384,G$b._FLOAT_RIGHT=32768,G$b._LINE_ELEMENT=65536,G$b._NOWARP=131072,G$b._WIDTHAUTO=262144,G$b._LISTERRESZIE=524288,G$b}(G$j),G$wT=function(G$T){function G$P(){this.url=null,this.audio=null,this.loaded=!1,G$P.__super.call(this)}G$M(G$P,"laya.media.h5audio.AudioSound",G$q);var G$l=G$P.prototype;return G$l.dispose=function(){var G$T=G$P._audioCache[this.url];G$T&&(G$T.src="",delete G$P._audioCache[this.url])},G$l.load=function(G$T){var G$l;if(G$T=G$x.formatURL(G$T),(this.url=G$T)==G$o._tMusic?(G$P._initMusicAudio(),(G$l=G$P._musicAudio).src!=G$T&&(G$P._audioCache[G$l.src]=null,G$l=null)):G$l=G$P._audioCache[G$T],G$l&&2<=G$l.readyState)this.event("complete");else{G$l||(G$l=G$T==G$o._tMusic?(G$P._initMusicAudio(),G$P._musicAudio):G$H.createElement("audio"),(G$P._audioCache[G$T]=G$l).src=G$T),G$l.addEventListener("canplaythrough",G$u),G$l.addEventListener("error",G$p);var G$w=this;(this.audio=G$l).load?G$l.load():G$p()}function G$u(){G$D(),G$w.loaded=!0,G$w.event("complete")}function G$p(){G$l.load=null,G$D(),G$w.event("error")}function G$D(){G$l.removeEventListener("canplaythrough",G$u),G$l.removeEventListener("error",G$p)}},G$l.play=function(G$T,G$l,G$w){if(void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),!this.url)return null;var G$u,G$p;if(!(G$u=this.url==G$o._tMusic?G$P._musicAudio:G$P._audioCache[this.url]))return null;G$p=G$g.getItem("audio:"+this.url),G$R.isConchApp?G$p||((G$p=G$H.createElement("audio")).src=this.url):this.url==G$o._tMusic?(G$P._initMusicAudio(),(G$p=G$P._musicAudio).src=this.url):G$p=G$p||G$u.cloneNode(!0);var G$D=new G$bT(G$p);return G$D.url=this.url,G$D.loops=G$l,G$D.startTime=G$T,G$D.startHandler=G$w,G$D.play(!1),G$o.addChannel(G$D),G$D},G$Y(0,G$l,"duration",function(){var G$T;return(G$T=G$P._audioCache[this.url])?G$T.duration:0}),G$P._initMusicAudio=function(){G$P._musicAudio||(G$P._musicAudio||(G$P._musicAudio=G$H.createElement("audio")),G$R.isConchApp||G$H.document.addEventListener("mousedown",G$P._makeMusicOK))},G$P._makeMusicOK=function(){G$H.document.removeEventListener("mousedown",G$P._makeMusicOK),G$P._musicAudio.src?G$P._musicAudio.play():(G$P._musicAudio.src="",G$P._musicAudio.load())},G$P._audioCache={},G$P._musicAudio=null,G$P}(),G$uT=function(G$T){function G$l(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,G$l.__super.call(this)}G$M(G$l,"laya.media.SoundChannel",G$q);var G$w=G$l.prototype;return G$w.play=function(){},G$w.stop=function(){},G$w.pause=function(){},G$w.resume=function(){},G$w.__runComplete=function(G$T){G$T&&G$T.run()},G$Y(0,G$w,"volume",function(){return 1},function(G$T){}),G$Y(0,G$w,"position",function(){return 0}),G$Y(0,G$w,"duration",function(){return 0}),G$l}(),G$pT=function(G$T){function G$l(){G$l.__super.call(this)}G$M(G$l,"laya.media.Sound",G$q);var G$w=G$l.prototype;return G$w.load=function(G$T){},G$w.play=function(G$T,G$l,G$w){return void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),null},G$w.dispose=function(){},G$Y(0,G$w,"duration",function(){return 0}),G$l}(),G$DT=function(G$T){function G$p(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,G$p.__super.call(this)}G$M(G$p,"laya.media.webaudio.WebAudioSound",G$q);var G$l=G$p.prototype;return G$l.load=function(G$T){this.url=G$T,this.audioBuffer=G$p._dataCache[G$T],this.audioBuffer?this._loaded(this.audioBuffer):(G$p.e.on("loaded:"+G$T,this,this._loaded),G$p.e.on("err:"+G$T,this,this._err),G$p.__loadingSound[G$T]||(G$p.__loadingSound[G$T]=!0,G$B.loader.load(G$T,G$i.create(this,this.onloaded),null,G$jT.BUFFER,4,!1,null,!0)))},G$l.onloaded=function(G$T){G$T||this._err(),this._disposed?this._removeLoadEvents():(this.data=G$T,G$p.buffs.push({buffer:this.data,url:this.url}),G$p.decode())},G$l._err=function(){if(this._removeLoadEvents(),G$p.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var G$T,G$l,G$w,G$u=0;for(G$T=(G$l=this.__toPlays).length,G$u=0;G$u<G$T;G$u++)(G$w=G$l[G$u])[3]&&!G$w[3].isStopped&&G$w[3].event("error");this.__toPlays.length=0}},G$l._loaded=function(G$T){this._removeLoadEvents(),this._disposed||(this.audioBuffer=G$T,this.loaded=!0,this.event("complete"))},G$l._removeLoadEvents=function(){G$p.e.off("loaded:"+this.url,this,this._loaded),G$p.e.off("err:"+this.url,this,this._err)},G$l.__playAfterLoaded=function(){if(this.__toPlays){var G$T,G$l,G$w,G$u=0;for(G$T=(G$l=this.__toPlays).length,G$u=0;G$u<G$T;G$u++)(G$w=G$l[G$u])[3]&&!G$w[3].isStopped&&this.play(G$w[0],G$w[1],G$w[2],G$w[3]);this.__toPlays.length=0}},G$l.play=function(G$T,G$l,G$w,G$u){return void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),G$u=G$u||new G$KT,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([G$T,G$l,G$w,G$u]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),G$u.url=this.url,G$u.loops=G$l,G$u.audioBuffer=this.audioBuffer,G$u.startTime=G$T,G$u.startHandler=G$w,G$u.play(!1),G$o.addChannel(G$u),G$u},G$l.dispose=function(){this._disposed=!0,delete G$p._dataCache[this.url],delete G$p.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},G$Y(0,G$l,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),G$p.decode=function(){if(!(G$p.buffs.length<=0||G$p.isDecoding))if(G$p.isDecoding=!0,(G$p.tInfo=G$p.buffs.shift())&&G$p.tInfo.buffer&&G$p.tInfo.buffer.byteLength)try{G$p.ctx.decodeAudioData(G$p.tInfo.buffer,G$p._done,G$p._fail)}catch(G$T){console.error("decodeAudioData error  byteLength:"+G$p.tInfo.buffer.byteLength+"  url:"+G$p.tInfo.url)}else G$p._fail()},G$p._done=function(G$T){G$p.e.event("loaded:"+G$p.tInfo.url,G$T),G$p._dataCache[G$p.tInfo.url]=G$T,G$p.isDecoding=!1,G$p.decode()},G$p._fail=function(){G$p.e.event("err:"+G$p.tInfo.url,null),G$p.isDecoding=!1,G$p.decode()},G$p._playEmptySound=function(){if(null!=G$p.ctx){if(G$p._emptySource&&(G$p._emptySource.stop(),G$p._emptySource.disconnect(0),!G$KT._tryCleanFailed))try{G$p._emptySource.buffer=null}catch(G$T){G$KT._tryCleanFailed=!0}var G$T=G$p.ctx.createBufferSource();G$T.buffer=G$p._miniBuffer,G$T.connect(G$p.ctx.destination),G$T.start(0,0,0),G$p._emptySource=G$T}},G$p._unlock=function(){G$p._unlocked||(G$p._playEmptySound(),"running"==G$p.ctx.state?(G$H.document.removeEventListener("mousedown",G$p._unlock,!0),G$H.document.removeEventListener("touchend",G$p._unlock,!0),G$H.document.removeEventListener("touchstart",G$p._unlock,!0),G$p._unlocked=!0):"suspended"==G$p.ctx.state&&G$o._recoverWebAudio())},G$p.initWebAudio=function(){"running"!=G$p.ctx.state&&(G$p._unlock(),G$H.document.addEventListener("mousedown",G$p._unlock,!0),G$H.document.addEventListener("touchend",G$p._unlock,!0),G$H.document.addEventListener("touchstart",G$p._unlock,!0))},G$p._emptySource=null,G$p._dataCache={},G$p.buffs=[],G$p.isDecoding=!1,G$p._unlocked=!1,G$p.tInfo=null,G$p.__loadingSound={},G$J(G$p,["window",function(){return this.window=G$H.window},"webAudioEnabled",function(){return this.webAudioEnabled=G$p.window.AudioContext||G$p.window.webkitAudioContext||G$p.window.mozAudioContext},"ctx",function(){return this.ctx=G$p.webAudioEnabled?new(G$p.window.AudioContext||G$p.window.webkitAudioContext||G$p.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=G$p.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new G$q}]),G$p}(),G$PT=function(G$T){function G$l(){this._responseType=null,this._data=null,G$l.__super.call(this),this._http=new G$H.window.XMLHttpRequest}G$M(G$l,"laya.net.HttpRequest",G$q);var G$w=G$l.prototype;return G$w.send=function(G$T,G$l,G$w,G$u,G$p){void 0===G$w&&(G$w="get"),void 0===G$u&&(G$u="text"),this._responseType=G$u,this._data=null;var G$D=this,G$P=this._http;if(G$P.open(G$w,G$T,!0),G$p)for(var G$j=0;G$j<G$p.length;G$j++)G$P.setRequestHeader(G$p[G$j++],G$p[G$j]);else G$R.isConchApp||(G$l&&"string"!=typeof G$l?G$P.setRequestHeader("Content-Type","application/json"):G$P.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));G$P.responseType="arraybuffer"!==G$u?"text":"arraybuffer",G$P.onerror=function(G$T){G$D._onError(G$T)},G$P.onabort=function(G$T){G$D._onAbort(G$T)},G$P.onprogress=function(G$T){G$D._onProgress(G$T)},G$P.onload=function(G$T){G$D._onLoad(G$T)},G$P.send(G$l)},G$w._onProgress=function(G$T){G$T&&G$T.lengthComputable&&this.event("progress",G$T.loaded/G$T.total)},G$w._onAbort=function(G$T){this.error("Request was aborted by user")},G$w._onError=function(G$T){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},G$w._onLoad=function(G$T){var G$l=this._http,G$w=void 0!==G$l.status?G$l.status:200;200===G$w||204===G$w||0===G$w?this.complete():this.error("["+G$l.status+"]"+G$l.statusText+":"+G$l.responseURL)},G$w.error=function(G$T){this.clear(),this.event("error",G$T)},G$w.complete=function(){this.clear();var G$l=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=G$V.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(G$T){G$l=!1,this.error(G$T.message)}G$l&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},G$w.clear=function(){var G$T=this._http;G$T.onerror=G$T.onabort=G$T.onprogress=G$T.onload=null},G$Y(0,G$w,"url",function(){return this._http.responseURL}),G$Y(0,G$w,"http",function(){return this._http}),G$Y(0,G$w,"data",function(){return this._data}),G$l}(),G$jT=function(G$T){function G$I(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,G$I.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}G$M(G$I,"laya.net.Loader",G$q);var G$l=G$I.prototype;return G$l.load=function(G$T,G$l,G$w,G$u,G$p){if(G$T&&""!=G$T||console.error("Loader 加载的url不合法 "+G$T),void 0===G$w&&(G$w=!0),void 0===G$p&&(G$p=!1),0===(this._url=G$T).indexOf("data:image")?this._type=G$l="image":this._type=G$l||(G$l=this.getTypeFromUrl(G$T)),this._cache=G$w,this._data=null,!G$p&&G$I.loadedMap[G$T])return this._data=G$I.loadedMap[G$T],this.event("progress",1),void this.event("complete",this._data);if(G$u&&G$I.setGroup(G$T,G$u),null!=G$I.parserMap[G$l])return this._customParse=!0,void(G$I.parserMap[G$l]instanceof laya.utils.Handler?G$I.parserMap[G$l].runWith(this):G$I.parserMap[G$l].call(null,this));if("image"===G$l||"htmlimage"===G$l||"nativeimage"===G$l)return this._loadImage(G$T);if("ttf"===G$l)return this._loadTTF(G$T);switch(G$l){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:G$l}G$I.preLoadedMap[G$T]?this.onLoaded(G$I.preLoadedMap[G$T]):G$P.resMgrLoad(G$T,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},G$l.getTypeFromUrl=function(G$T){var G$l=G$V.getFileExtension(G$T);return G$l?G$I.typeMap[G$l]:(console.warn("Not recognize the resources suffix",G$T),"text")},G$l._loadTTF=function(G$T){G$T=G$x.formatURL(G$T);var G$l=new G$v;G$l.complete=G$i.create(this,this.onLoaded),G$l.load(G$T)},G$l._loadImage=function(G$T){G$P.imgMgrLoad(G$T,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},G$l._loadImageComplete=function(G$T,G$l,G$w){if(null!=G$w)if(G$w instanceof ArrayBuffer){var G$u=new DataView(G$w),G$p=new laya.webgl.resource.WebGLImage(new Uint8Array(G$w,8),G$T,0,!1,G$u.getUint32(0),G$u.getUint32(4));this.onLoaded(G$p)}else if(G$w instanceof G$MT)G$I.imgMgrSet[G$T]=G$l,G$P.imgMgrLock(G$T,G$I.imgMgrSet[G$T]),this._url=G$T,this.complete(G$w);else{var G$D=-1!=G$T.indexOf(".png",G$T.length-4)?6408:6407;G$p=new laya.webgl.resource.WebGLImage(G$w,G$T,G$D,!1,G$w.width,G$w.height);this.onLoaded(G$p)}else this.event("error","Load image failed")},G$l.imageCancel=function(G$T,G$l,G$w){G$P.imgMgrCancel(G$T,this._onImageCallback)},G$l._loadSound=function(G$T){var G$l=new G$o._soundClass,G$w=this;function G$u(){G$l.offAll()}G$l.on("complete",this,function(){G$u(),G$w.onLoaded(G$l)}),G$l.on("error",this,function(){G$u(),G$l.dispose(),G$w.event("error","Load sound failed")}),G$l.load(G$T)},G$l.onProgress=function(G$T){"atlas"===this._type?this.event("progress",.3*G$T):this.event("progress",G$T)},G$l.onError=function(G$T){this.event("error",G$T)},G$l._loadedComplete=function(G$T,G$l,G$w){if(null!=G$w)switch(this._type){case"atlas":case"plf":case"json":var G$u=new G$X(G$w);this.onLoaded(JSON.parse(G$u.readUTFBytes()));break;case"font":G$u=new G$X(G$w);this.onLoaded(G$V.parseXMLFromString(G$u.readUTFBytes()));break;default:this.onLoaded(G$w)}else this.event("error",G$T)},G$l.onLoaded=function(G$T){var G$l=this._type;if("plf"==G$l)this.parsePLFData(G$T),this.complete(G$T);else if("image"===G$l){var G$w=new G$MT(G$T);G$w.url=this._url,this.complete(G$w)}else if("sound"===G$l||"htmlimage"===G$l||"nativeimage"===G$l)this.complete(G$T);else if("atlas"===G$l){if(!G$T.src&&!G$T._setContext){if(!this._data){if((this._data=G$T).meta&&G$T.meta.image)for(var G$u=G$T.meta.image.split(","),G$p=0<=this._url.indexOf("/")?"/":"\\",G$D=this._url.lastIndexOf(G$p),G$P=0<=G$D?this._url.substr(0,G$D+1):"",G$j=0,G$J=G$u.length;G$j<G$J;G$j++)G$u[G$j]=G$P+G$u[G$j];else G$u=[this._url.replace(".json",".png")];G$u.reverse(),G$T.toLoads=G$u,G$T.pics=[]}return this.event("progress",.3+1/G$u.length*.6),this._loadImage(G$u.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(G$T),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var G$q=this._data.frames,G$M=this._url.split("?")[0],G$z=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:G$M.substring(0,G$M.lastIndexOf("."))+"/",G$b=this._data.pics,G$K=G$x.formatURL(this._url),G$Y=G$I.atlasMap[G$K]||(G$I.atlasMap[G$K]=[]);G$Y.dir=G$z;var G$t=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var G$A in G$t=parseFloat(this._data.meta.scale),G$q){var G$L,G$i=G$q[G$A],G$W=G$b[G$i.frame.idx?G$i.frame.idx:0],G$m=G$x.formatURL(G$z+G$A);G$W.scaleRate=G$t,G$L=G$MT.create(G$W,G$i.frame.x,G$i.frame.y,G$i.frame.w,G$i.frame.h,G$i.spriteSourceSize.x,G$i.spriteSourceSize.y,G$i.sourceSize.w,G$i.sourceSize.h),G$I.cacheRes(G$m,G$L),G$I.keepCache(this._url,G$z+G$A),G$L.url=G$m,G$Y.push(G$m)}else for(G$A in G$q)G$W=G$b[(G$i=G$q[G$A]).frame.idx?G$i.frame.idx:0],G$m=G$x.formatURL(G$z+G$A),G$I.cacheRes(G$m,G$MT.create(G$W,G$i.frame.x,G$i.frame.y,G$i.frame.w,G$i.frame.h,G$i.spriteSourceSize.x,G$i.spriteSourceSize.y,G$i.sourceSize.w,G$i.sourceSize.h)),G$I.loadedMap[G$m].url=G$m,G$I.keepCache(this._url,G$z+G$A),G$Y.push(G$m);delete this._data.pics,this.complete(this._data)}else if("font"==G$l){if(!G$T.src)return this._data=G$T,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var G$c=new G$Q;G$c.parseFont(this._data,G$T);var G$a=this._url.split(".fnt")[0].split("/"),G$B=G$a[G$a.length-1];G$AT.registerBitmapFont(G$B,G$c),this._data=G$c,this.complete(this._data)}else if("pkm"==G$l){var G$s=G$aT.create(G$T,this._url),G$r=new G$MT(G$s);G$r.url=this._url,this.complete(G$r)}else this.complete(G$T)},G$l.parsePLFData=function(G$T){var G$l,G$w,G$u;for(G$l in G$T)switch(G$u=G$T[G$l],G$l){case"json":case"text":for(G$w in G$u)G$I.preLoadedMap[G$x.formatURL(G$w)]=G$u[G$w];break;default:for(G$w in G$u)G$I.preLoadedMap[G$x.formatURL(G$w)]=G$u[G$w]}},G$l.complete=function(G$T){this._data=G$T,this._customParse?this.event("loaded",G$T instanceof Array?[G$T]:G$T):(G$I._loaders.push(this),G$I._isWorking||G$I.checkNext())},G$l.endLoad=function(G$T){G$T&&(this._data=G$T),this._cache&&G$I.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},G$Y(0,G$l,"url",function(){return this._url}),G$Y(0,G$l,"data",function(){return this._data}),G$Y(0,G$l,"cache",function(){return this._cache}),G$Y(0,G$l,"type",function(){return this._type}),G$I.checkNext=function(){G$I._isWorking=!0;for(var G$T=G$H.now();G$I._startIndex<G$I._loaders.length;)if(G$H.now(),G$I._loaders[G$I._startIndex].endLoad(),G$I._startIndex++,G$H.now()-G$T>G$I.maxTimeOut)return console.warn("loader callback cost a long time:"+(G$H.now()-G$T)+" url="+G$I._loaders[G$I._startIndex-1].url),void G$B.timer.frameOnce(1,null,G$I.checkNext);G$I._loaders.length=0,G$I._startIndex=0,G$I._isWorking=!1},G$I.clearRes=function(G$T,G$l){if(null!=G$T){void 0===G$l&&(G$l=!1),G$T=G$x.formatURL(G$T);var G$w=G$I.getAtlas(G$T);if(G$w){for(var G$u=0,G$p=G$w.length;G$u<G$p;G$u++){var G$D=G$w[G$u],G$P=G$I.getRes(G$D);delete G$I.loadedMap[G$D],G$I.clearCache(G$T.substring(G$x.basePath.length),G$D.substring(G$x.basePath.length)),G$P&&G$P.destroy(G$l)}G$w.length=0,delete G$I.atlasMap[G$T],delete G$I.loadedMap[G$T]}else{var G$j=G$I.loadedMap[G$T];G$j&&(delete G$I.loadedMap[G$T],G$j instanceof laya.resource.Texture&&G$j.bitmap&&G$j.destroy(G$l))}}},G$I.clearTextureRes=function(G$T){G$T=G$x.formatURL(G$T);var G$l=laya.net.Loader.getAtlas(G$T),G$w=G$l&&0<G$l.length?laya.net.Loader.getRes(G$l[0]):laya.net.Loader.getRes(G$T);G$w&&G$w.bitmap&&(G$R.isConchApp&&!G$R.isConchWebGL?G$w.bitmap.source.releaseTexture&&G$w.bitmap.source.releaseTexture():null==G$w.bitmap._atlaser&&G$w.bitmap.releaseResource(!0))},G$I.getRes=function(G$T){return G$I.loadedMap[G$x.formatURL(G$T)]},G$I.getAtlas=function(G$T){return G$I.atlasMap[G$x.formatURL(G$T)]},G$I.cacheRes=function(G$T,G$l){G$T=G$x.formatURL(G$T),null!=G$I.loadedMap[G$T]?console.warn("Resources already exist,is repeated loading:",G$T):G$I.loadedMap[G$T]=G$l},G$I.setGroup=function(G$T,G$l){G$I.groupMap[G$l]||(G$I.groupMap[G$l]=[]),G$I.groupMap[G$l].push(G$T)},G$I.clearResByGroup=function(G$T){if(G$I.groupMap[G$T]){var G$l=G$I.groupMap[G$T],G$w=0,G$u=G$l.length;for(G$w=0;G$w<G$u;G$w++)G$I.clearRes(G$l[G$w]);G$l.length=0}},G$I.keepCache=function(G$T,G$l){if(G$T&&G$l){var G$w=G$I.cacheSet[G$l];G$w?-1==G$w.indexOf(G$T)&&G$w.push(G$T):G$I.cacheSet[G$l]=[G$T]}},G$I.clearCache=function(G$T,G$l){if(G$T&&G$l){var G$w=G$I.cacheSet[G$l];if(G$w){var G$u=G$w.indexOf(G$T);if(-1!==G$u){var G$p=G$w.length-1;0==G$p?(delete G$I.cacheSet[G$l],0<G$I.imgMgrSet[G$l]?G$P.imgMgrFree(G$l,G$I.imgMgrSet[G$l]):G$I.clearRes(G$l,!0)):(G$w[G$u]=G$w[G$p],G$w.length=G$p)}}}},G$I.saveObject=function(G$T,G$l,G$w){if(G$l&&G$T){var G$u=G$I.objectSet[G$T];G$u?(console.warn("Loader.saveObject: "+G$T),G$u[0]=G$l,G$u[1]=G$w):G$I.objectSet[G$T]=[G$l,G$w,[]]}},G$I.findObject=function(G$T){if(G$T){var G$l=G$I.objectSet[G$T];if(G$l)return G$l[0]}return null},G$I.keepObject=function(G$T,G$l){if(G$T&&G$l){var G$w=G$I.objectSet[G$l];G$w&&-1===G$w[2].indexOf(G$T)&&G$w[2].push(G$T)}},G$I.clearObject=function(G$T,G$l){if(G$T&&G$l){var G$w=G$I.objectSet[G$l];if(G$w){var G$u=G$w[2],G$p=G$u.indexOf(G$T);if(-1!==G$p){var G$D=G$u.length-1;0==G$D?(delete G$I.objectSet[G$l],G$w[1]&&G$w[1].call(null,G$w[0])):(G$u[G$p]=G$u[G$D],G$u.length=G$D)}}}},G$I.TEXT="text",G$I.JSON="json",G$I.XML="xml",G$I.BUFFER="arraybuffer",G$I.IMAGE="image",G$I.SOUND="sound",G$I.ATLAS="atlas",G$I.FONT="font",G$I.TTF="ttf",G$I.PLF="plf",G$I.PKM="pkm",G$I.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},G$I.parserMap={},G$I.groupMap={},G$I.maxTimeOut=100,G$I.loadedMap={},G$I.preLoadedMap={},G$I.atlasMap={},G$I._loaders=[],G$I._isWorking=!1,G$I._startIndex=0,G$I.imgCache={},G$I.cacheSet={},G$I.objectSet={},G$I.imgMgrSet={},G$I}(),G$JT=function(G$T){var G$b;function G$K(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},G$K.__super.call(this);for(var G$T=0;G$T<this._maxPriority;G$T++)this._resInfos[G$T]=[]}G$M(G$K,"laya.net.LoaderManager",G$q);var G$l=G$K.prototype;return G$l.create=function(G$T,G$w,G$l,G$u,G$p,G$D,G$P,G$j){if(null==G$D&&(G$D=2),null==G$P&&(G$P=!0),G$T instanceof Array){var G$J=G$T,G$q=G$J.length,G$M=0;if(G$l)var G$z=G$i.create(G$l.caller,G$l.method,G$l.args,!1);for(var G$b=0;G$b<G$q;G$b++){var G$K=G$J[G$b];"string"==typeof G$K&&(G$K=G$J[G$b]={url:G$K}),G$K.progress=0}for(G$b=0;G$b<G$q;G$b++){G$K=G$J[G$b];var G$Y=G$l?G$i.create(null,G$L,[G$K],!1):null,G$t=G$l||G$w?G$i.create(null,G$A,[G$K]):null;this._create(G$K.url,G$t,G$Y,G$K.clas||G$u,G$K.params||G$p,null!=G$K.priority&&0<=G$K.priority?G$K.priority:G$D,G$P,G$K.group||G$j)}function G$A(G$T,G$l){G$M++,G$T.progress=1,G$M===G$q&&G$w&&G$w.run()}function G$L(G$T,G$l){G$T.progress=G$l;for(var G$w=0,G$u=0;G$u<G$q;G$u++){G$w+=G$J[G$u].progress}var G$p=G$w/G$q;G$z.runWith(G$p)}return!0}return this._create(G$T,G$w,G$l,G$u,G$p,G$D,G$P,G$j)},G$l._create=function(G$l,G$w,G$T,G$u,G$p,G$D,G$P,G$j){G$l&&""!=G$l||console.error("加载的url不合法 "+G$l),null==G$D&&(G$D=2),null==G$P&&(G$P=!0);var G$J=G$x.formatURL(G$l),G$q=this.getRes(G$J);if(G$q)!G$q.hasOwnProperty("loaded")||G$q.loaded?(G$T&&G$T.runWith(1),G$w&&G$w.run()):G$w&&G$B.loader._createListener(G$l,G$w.caller,G$w.method,G$w.args,!0,!1);else{var G$M=G$V.getFileExtension(G$l),G$z=G$K.createMap[G$M];if(!G$z)throw new Error("LoaderManager:unknown file("+G$l+") extension with: "+G$M+".");G$u||(G$u=G$z[0]);var G$b=G$z[1];if("atlas"==G$M)this.load(G$l,G$w,G$T,G$b,G$D,G$P);else{G$u===G$MT&&(G$b="htmlimage"),(G$q=G$u?new G$u:null).hasOwnProperty("_loaded")&&(G$q._loaded=!1),G$q._setUrl(G$l),G$j&&G$q._setGroup(G$j),this._createLoad(G$q,G$l,G$i.create(null,function(G$T){G$q&&!G$q.destroyed&&G$T&&G$q.onAsynLoaded.call(G$q,G$l,G$T,G$p),G$w&&G$w.run();G$B.loader.event(G$l)}),G$T,G$b,G$D,!1,G$j,!0),G$P&&this.cacheRes(G$J,G$q)}}return G$q},G$l.load=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){G$T&&""!=G$T||console.error("加载的url不合法 "+G$T);var G$J=this;if(null==G$p&&(G$p=2),null==G$D&&(G$D=!0),void 0===G$j&&(G$j=!1),G$T instanceof Array)return this._loadAssets(G$T,G$l,G$w,G$u,G$p,G$D,G$P);var G$q=G$jT.getRes(G$T);if(null!=G$q)G$B.timer.frameOnce(1,null,function(){G$w&&G$w.runWith(1),G$l&&G$l.runWith(G$q),G$J._loaderCount||G$J.event("complete")});else{var G$M=G$K._resMap[G$T];G$M?(G$l&&G$M._createListener("complete",G$l.caller,G$l.method,G$l.args,!1,!1),G$w&&G$M._createListener("progress",G$w.caller,G$w.method,G$w.args,!1,!1)):((G$M=this._infoPool.length?this._infoPool.pop():new G$b).url=G$T,G$M.clas=null,G$M.type=G$u,G$M.cache=G$D,G$M.group=G$P,G$M.ignoreCache=G$j,G$M.priority=G$p,G$l&&G$M.on("complete",G$l.caller,G$l.method,G$l.args),G$w&&G$M.on("progress",G$w.caller,G$w.method,G$w.args),G$K._resMap[G$T]=G$M,G$p=G$p<this._maxPriority?0<=G$p?G$p:0:this._maxPriority-1,this._resInfos[G$p].push(G$M),this._next())}return this},G$l.cancel=function(G$T,G$l,G$w){if(G$q=G$K._resMap[G$T]){G$l&&G$q.off("complete",G$l.caller,G$l.method,!1),G$w&&G$q.off("progress",G$w.caller,G$w.method,!1);var G$u=G$q.getListener("complete"),G$p=G$q.getListener("progress");if(!(G$u&&G$u.head||G$p&&G$p.head)){if(G$q.loader){var G$D=G$q.loader;G$D.imageCancel(G$T),G$D.offAll(),G$D._data=null,G$D._customParse=!1,this._loaders.push(G$D),this._loaderCount--,delete this._loaderMap[G$q.url]}for(var G$P=0;G$P<this._maxPriority;G$P++)for(var G$j=this._resInfos[G$P],G$J=G$j.length-1;-1<G$J;G$J--){var G$q;(G$q=G$j[G$J])&&G$q.url===G$T&&(G$j[G$J]=null,G$q.destroy(),G$q.offAll(),this._infoPool.push(G$q))}delete G$K._resMap[G$T],this._next()}}},G$l._createLoad=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){var G$q=this;if(null==G$D&&(G$D=2),null==G$P&&(G$P=!0),void 0===G$J&&(G$J=!1),G$l instanceof Array)return this._loadAssets(G$l,G$w,G$u,G$p,G$D,G$P,G$j);var G$M=G$jT.getRes(G$l);if(null!=G$M)G$B.timer.frameOnce(1,null,function(){G$u&&G$u.runWith(1),G$w&&G$w.runWith(G$M),G$q._loaderCount||G$q.event("complete")});else{var G$z=G$K._resMap[G$l];G$z?(G$w&&G$z._createListener("complete",G$w.caller,G$w.method,G$w.args,!1,!1),G$u&&G$z._createListener("progress",G$u.caller,G$u.method,G$u.args,!1,!1)):((G$z=this._infoPool.length?this._infoPool.pop():new G$b).url=G$l,G$z.clas=G$T,G$z.type=G$p,G$z.cache=G$P,G$z.group=G$j,G$z.ignoreCache=G$J,G$z.priority=G$D,G$w&&G$z.on("complete",G$w.caller,G$w.method,G$w.args),G$u&&G$z.on("progress",G$u.caller,G$u.method,G$u.args),G$K._resMap[G$l]=G$z,G$D=G$D<this._maxPriority?0<=G$D?G$D:0:this._maxPriority-1,this._resInfos[G$D].push(G$z),this._next())}return this},G$l._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var G$T=0;G$T<this._maxPriority;G$T++)for(var G$l=this._resInfos[G$T];0<G$l.length;){var G$w=G$l.shift();if(G$w)return this._doLoad(G$w)}this._loaderCount||this.event("complete")}},G$l._doLoad=function(G$l){var G$w=this._loaders.length?this._loaders.pop():new G$jT;this._loaderCount++,(this._loaderMap[G$l.url]=G$w).on("complete",null,G$p),G$w.on("progress",null,function(G$T){G$l.event("progress",G$T)}),G$w.on("error",null,function(G$T){G$p(null)}),G$l.loader=G$w;var G$u=this;function G$p(G$T){G$w.offAll(),G$w._data=null,G$w._customParse=!1,G$u._endLoad(G$l,G$T instanceof Array?[G$T]:G$T),G$u._loaders.push(G$w),G$u._loaderCount--,delete G$u._loaderMap[G$l.url],G$u._next()}G$w._class=G$l.clas,1<=G$l.priority?(G$w.priority=G$l.priority,G$w.realTime=!1):(G$w.priority=0,G$w.realTime=!0),G$w.load(G$l.url,G$l.type,G$l.cache,G$l.group,G$l.ignoreCache)},G$l._endLoad=function(G$T,G$l){var G$w=G$T.url;if(null==G$l){var G$u=this._failRes[G$w]||0;if(G$u<this.retryNum)return console.warn("[warn]Retry to load:",G$w),this._failRes[G$w]=G$u+1,void G$B.timer.once(this.retryDelay,this,this._addReTry,[G$T],!1);console.warn("[error]Failed to load:",G$w),this.event("error",G$w)}this._failRes[G$w]&&(this._failRes[G$w]=0),delete G$K._resMap[G$w],G$T.event("complete",G$l),G$T.destroy(),G$T.offAll(),this._infoPool.push(G$T)},G$l._addReTry=function(G$T){this._resInfos[this._maxPriority-1].push(G$T),this._next()},G$l.clearRes=function(G$T,G$l){void 0===G$l&&(G$l=!1),G$jT.clearRes(G$T,G$l)},G$l.getRes=function(G$T){return G$jT.getRes(G$T)},G$l.cacheRes=function(G$T,G$l){G$jT.cacheRes(G$T,G$l)},G$l.clearTextureRes=function(G$T){G$jT.clearTextureRes(G$T)},G$l.setGroup=function(G$T,G$l){G$jT.setGroup(G$T,G$l)},G$l.clearResByGroup=function(G$T){G$jT.clearResByGroup(G$T)},G$l.clearUnLoaded=function(){for(var G$T=0;G$T<this._maxPriority;G$T++){for(var G$l=this._resInfos[G$T],G$w=G$l.length-1;-1<G$w;G$w--){var G$u=G$l[G$w];G$u&&(G$u.destroy(),G$u.offAll(),this._infoPool.push(G$u))}G$l.length=0}this._loaderCount=0,G$K._resMap={}},G$l.cancelLoadByUrls=function(G$T){if(G$T)for(var G$l=0,G$w=G$T.length;G$l<G$w;G$l++)this.cancelLoadByUrl(G$T[G$l])},G$l.cancelLoadByUrl=function(G$T){for(var G$l=0;G$l<this._maxPriority;G$l++)for(var G$w=this._resInfos[G$l],G$u=G$w.length-1;-1<G$u;G$u--){var G$p=G$w[G$u];G$p&&G$p.url===G$T&&(G$w[G$u]=null,G$p.destroy(),G$p.offAll(),this._infoPool.push(G$p))}G$K._resMap[G$T]&&delete G$K._resMap[G$T]},G$l._loadAssets=function(G$T,G$w,G$P,G$l,G$u,G$p,G$D){null==G$u&&(G$u=2),null==G$p&&(G$p=!0);for(var G$j=G$T.length,G$J=0,G$q=0,G$M=[],G$z=!0,G$b=0;G$b<G$j;G$b++){var G$K=G$T[G$b];if(!G$K)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+G$T);"string"==typeof G$K&&(G$K={url:G$K,type:G$l,size:1,priority:G$u}),G$K.size||(G$K.size=1),G$K.progress=0,G$q+=G$K.size,G$M.push(G$K);var G$Y=G$P?G$i.create(null,G$L,[G$K],!1):null,G$t=G$w||G$P?G$i.create(null,G$A,[G$K]):null;this.load(G$K.url,G$t,G$Y,G$K.type,null!=G$K.priority&&0<=G$K.priority?G$K.priority:2,G$p,G$K.group||G$D)}function G$A(G$T,G$l){G$J++,G$T.progress=1,G$l||(G$z=!1),G$J===G$j&&G$w&&G$w.runWith(G$z)}function G$L(G$T,G$l){if(null!=G$P){G$T.progress=G$l;for(var G$w=0,G$u=0;G$u<G$M.length;G$u++){var G$p=G$M[G$u];G$w+=G$p.size*G$p.progress}var G$D=G$w/G$q;G$P.runWith(G$D)}}return this},G$K.cacheRes=function(G$T,G$l){G$jT.cacheRes(G$T,G$l)},G$K._resMap={},G$J(G$K,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),G$K.__init$=function(){G$b=function(G$T){function G$l(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,G$l.__super.call(this)}return G$M(G$l,"",G$q),G$l.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},G$l}()},G$K}(),G$qT=(function(G$T){function G$p(G$T){G$p.__super.call(this),G$T||(G$T=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var G$l=0,G$w=0,G$u=0;G$u<20;G$u++)G$u%5!=4?this._mat[G$l++]=G$T[G$u]:this._alpha[G$w++]=G$T[G$u];this._action=G$e.createFilterAction(32),this._action.data=this}G$M(G$p,"laya.filters.ColorFilter",G$L);var G$l=G$p.prototype;G$B.imps(G$l,{"laya.filters.IFilter":!0}),G$l.callNative=function(G$T){G$T._$P.cf=this;G$T.conchModel&&G$T.conchModel.setFilterMatrix&&G$T.conchModel.setFilterMatrix(this._mat,this._alpha)},G$Y(0,G$l,"type",function(){return 32}),G$Y(0,G$l,"action",function(){return this._action})}(),function(G$T){function G$u(G$T,G$l,G$w){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===G$l&&(G$l=0),G$u.__super.call(this),this._byteClass=G$w||G$X,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,G$T&&0<G$l&&G$l<65535&&this.connect(G$T,G$l)}G$M(G$u,"laya.net.Socket",G$q);var G$l=G$u.prototype;G$l.connect=function(G$T,G$l){var G$w="ws://"+G$T+":"+G$l;G$w="https:"==G$H.window.location.protocol?"wss://"+G$T+":"+G$l:"ws://"+G$T+":"+G$l,this.connectByUrl(G$w)},G$l.connectByUrl=function(G$T){var G$l=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new G$H.window.WebSocket(G$T,this.protocols):this._socket=new G$H.window.WebSocket(G$T),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(G$T){G$l._onOpen(G$T)},this._socket.onmessage=function(G$T){G$l._onMessage(G$T)},this._socket.onclose=function(G$T){G$l._onClose(G$T)},this._socket.onerror=function(G$T){G$l._onError(G$T)}},G$l.cleanSocket=function(){try{this._socket.close()}catch(G$T){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},G$l.close=function(){if(null!=this._socket)try{this._socket.close()}catch(G$T){}},G$l._onOpen=function(G$T){this._connected=!0,this.event("open",G$T)},G$l._onMessage=function(G$T){if(G$T&&G$T.data){var G$l=G$T.data;if(this.disableInput&&G$l)this.event("message",G$l);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var G$w=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,G$l&&("string"==typeof G$l?this._input.writeUTFBytes(G$l):this._input.writeArrayBuffer(G$l),this._addInputPosition=this._input.pos,this._input.pos=G$w),this.event("message",G$l)}}},G$l._onClose=function(G$T){this._connected=!1,this.event("close",G$T)},G$l._onError=function(G$T){this.event("error",G$T)},G$l.send=function(G$T){this._socket.send(G$T)},G$l.flush=function(){if(this._output&&0<this._output.length){var G$l;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(G$T){G$l=G$T}this._output.endian=this.endian,this._output.clear(),G$l&&this.event("error",G$l)}},G$Y(0,G$l,"input",function(){return this._input}),G$Y(0,G$l,"output",function(){return this._output}),G$Y(0,G$l,"connected",function(){return this._connected}),G$Y(0,G$l,"endian",function(){return this._endian},function(G$T){this._endian=G$T,null!=this._input&&(this._input.endian=G$T),null!=this._output&&(this._output.endian=G$T)}),G$u.LITTLE_ENDIAN="littleEndian",G$u.BIG_ENDIAN="bigEndian"}(),function(G$T){function G$j(){G$j.__super.call(this),this._$1__id=++G$j._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(G$j._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,G$Z.currentResourceManager&&G$Z.currentResourceManager.addResource(this)}G$M(G$j,"laya.resource.Resource",G$q);var G$l=G$j.prototype;return G$B.imps(G$l,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),G$l._setUrl=function(G$T){var G$l;this._url!==G$T&&(this._url&&((G$l=G$j._urlResourcesMap[this._url]).splice(G$l.indexOf(this),1),0===G$l.length&&delete G$j._urlResourcesMap[this._url]),G$T&&((G$l=G$j._urlResourcesMap[G$T])||(G$j._urlResourcesMap[G$T]=G$l=[]),G$l.push(this)),this._url=G$T)},G$l._getGroup=function(){return this._group},G$l._setGroup=function(G$T){var G$l;this._group!==G$T&&(this._group&&((G$l=G$j._groupResourcesMap[this._group]).splice(G$l.indexOf(this),1),0===G$l.length&&delete G$j._groupResourcesMap[this._group]),G$T&&((G$l=G$j._groupResourcesMap[G$T])||(G$j._groupResourcesMap[G$T]=G$l=[]),G$l.push(this)),this._group=G$T)},G$l._addReference=function(){this._referenceCount++},G$l._removeReference=function(){this._referenceCount--},G$l._clearReference=function(){this._referenceCount=0},G$l._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},G$l.recreateResource=function(){this.completeCreate()},G$l.disposeResource=function(){},G$l.activeResource=function(G$T){void 0===G$T&&(G$T=!1),this._lastUseFrameCount=G$f.loopCount,!this._destroyed&&this.__loaded&&(this._released||G$T)&&this.recreateResource()},G$l.releaseResource=function(G$T){return void 0===G$T&&(G$T=!0),!(!G$T&&this.lock)&&(!(this._released&&!G$T)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},G$l.onAsynLoaded=function(G$T,G$l,G$w){throw new Error("Resource: must override this function!")},G$l.destroy=function(){var G$T;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete G$j._idResourcesMap[this.id],this._url&&((G$T=G$j._urlResourcesMap[this._url])&&(G$T.splice(G$T.indexOf(this),1),0===G$T.length&&delete G$j._urlResourcesMap[this.url]),G$jT.clearRes(this._url),this.__loaded||G$e.cancelLoadByUrl(this._url)),this._group&&((G$T=G$j._groupResourcesMap[this._group]).splice(G$T.indexOf(this),1),0===G$T.length&&delete G$j._groupResourcesMap[this.url]))},G$l.completeCreate=function(){this._released=!1,this.event("recovered",this)},G$l.dispose=function(){this.destroy()},G$Y(0,G$l,"memorySize",function(){return this._memorySize},function(G$T){var G$l=G$T-this._memorySize;this._memorySize=G$T,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,G$l),this.resourceManager&&this.resourceManager.addSize(G$l)}),G$Y(0,G$l,"_loaded",null,function(G$T){this.__loaded=G$T}),G$Y(0,G$l,"loaded",function(){return this.__loaded}),G$Y(0,G$l,"id",function(){return this._$1__id}),G$Y(0,G$l,"destroyed",function(){return this._destroyed}),G$Y(0,G$l,"group",function(){return this._getGroup()},function(G$T){this._setGroup(G$T)}),G$Y(0,G$l,"resourceManager",function(){return this._resourceManager}),G$Y(0,G$l,"url",function(){return this._url}),G$Y(0,G$l,"released",function(){return this._released}),G$Y(0,G$l,"referenceCount",function(){return this._referenceCount}),G$j.getResourceByID=function(G$T){return G$j._idResourcesMap[G$T]},G$j.getResourceByURL=function(G$T,G$l){return void 0===G$l&&(G$l=0),null==G$j._urlResourcesMap[G$T]?null:G$j._urlResourcesMap[G$T][G$l]},G$j.getResourceCountByURL=function(G$T){return G$j._urlResourcesMap[G$T].length},G$j.destroyUnusedResources=function(G$T){var G$l;if(G$T){var G$w=G$j._groupResourcesMap[G$T];if(G$w)for(var G$u=G$w.slice(),G$p=0,G$D=G$u.length;G$p<G$D;G$p++)(G$l=G$u[G$p]).lock||0!==G$l._referenceCount||G$l.destroy()}else for(var G$P in G$j._idResourcesMap)(G$l=G$j._idResourcesMap[G$P]).lock||0!==G$l._referenceCount||G$l.destroy()},G$j._uniqueIDCounter=0,G$j._idResourcesMap={},G$j._urlResourcesMap={},G$j._groupResourcesMap={},G$j}()),G$MT=function(G$T){function G$I(G$T,G$l){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,G$I.__super.call(this),G$T&&null!=G$T._addReference&&G$T._addReference(),this.setTo(G$T,G$l)}G$M(G$I,"laya.resource.Texture",G$q);var G$l=G$I.prototype;return G$l._setUrl=function(G$T){this.url=G$T},G$l.setTo=function(G$T,G$l){if(G$T instanceof G$P.HTMLElement){var G$w=G$WT.create("2D",G$T);this.bitmap=G$w}else this.bitmap=G$T;if(this.uv=G$l||G$I.DEF_UV,G$T){this._w=G$T.width,this._h=G$T.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var G$u=this;if(this._loaded)G$e.addToAtlas&&G$e.addToAtlas(G$u);else{var G$p=G$T;G$p instanceof laya.resource.HTMLImage&&G$p.image&&G$p.image.addEventListener("load",function(G$T){G$e.addToAtlas&&G$e.addToAtlas(G$u)},!1)}}},G$l.active=function(){this.bitmap&&this.bitmap.activeResource()},G$l.destroy=function(G$T){if(void 0===G$T&&(G$T=!1),this.alphaTexture&&(this.alphaTexture.destroy(G$T),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var G$l=this.bitmap;G$T?(G$R.isConchApp&&G$l.source&&G$l.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,G$l.dispose(),G$l._clearReference()):(G$l._removeReference(),0==G$l.referenceCount&&(G$R.isConchApp&&G$l.source&&G$l.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,G$l.dispose())),this.url&&this===G$B.loader.getRes(this.url)&&G$B.loader.clearRes(this.url,G$T),this._loaded=!1}},G$l.load=function(G$T){var G$l=this;this._loaded=!1,G$T=G$x.customFormat(G$T);var G$w=this.bitmap||(this.bitmap=G$aT.create(G$T));G$w.uri=G$T,G$w&&G$w._addReference();var G$u=this;G$w.onload=function(){G$w.onload=null,G$u._loaded=!0,G$l.sourceWidth=G$l._w=G$w.width,G$l.sourceHeight=G$l._h=G$w.height,G$u.event("loaded",this),G$e.addToAtlas&&G$e.addToAtlas(G$u)}},G$l.addTextureToAtlas=function(G$T){G$e.addTextureToAtlas(this)},G$l.getPixels=function(G$T,G$l,G$w,G$u){if(G$R.isConchApp){var G$p=this.bitmap;if(G$p.source&&G$p.source.getImageData){var G$D=G$p.source.getImageData(G$T,G$l,G$w,G$u),G$P=new Uint8Array(G$D);return Array.from(G$P)}return null}return G$R.isWebGL?G$e.getTexturePixels(this,G$T,G$l,G$w,G$u):(G$H.canvas.size(G$w,G$u),G$H.canvas.clear(),G$H.context.drawTexture(this,-G$T,-G$l,this.width,this.height,0,0),G$H.context.getImageData(0,0,G$w,G$u).data)},G$l.onAsynLoaded=function(G$T,G$l){if(G$l){if("function"!=typeof G$l._addReference)throw new Error("bitmap._addReference is not a function. "+G$l.className+" "+typeof G$l._addReference+" "+G$l.constructor);G$l._addReference()}this.setTo(G$l,this.uv),this._loaded&&this.event("loaded",this)},G$Y(0,G$l,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),G$Y(0,G$l,"loaded",function(){return this._loaded}),G$Y(0,G$l,"released",function(){return!this.bitmap||this.bitmap.released}),G$Y(0,G$l,"width",function(){return this._w?this._w:this.uv&&this.uv!==G$I.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(G$T){this._w=G$T,this.sourceWidth||(this.sourceWidth=G$T)}),G$Y(0,G$l,"repeat",function(){return!G$R.isWebGL||!this.bitmap||this.bitmap.repeat},function(G$T){G$T&&G$R.isWebGL&&this.bitmap&&(this.bitmap.repeat=G$T)&&(this.bitmap.enableMerageInAtlas=!1)}),G$Y(0,G$l,"height",function(){return this._h?this._h:this.uv&&this.uv!==G$I.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(G$T){this._h=G$T,this.sourceHeight||(this.sourceHeight=G$T)}),G$Y(0,G$l,"isLinearSampling",function(){return!G$R.isWebGL||9728!=this.bitmap.minFifter},function(G$T){!G$T&&G$R.isWebGL&&(G$T||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),G$I.moveUV=function(G$T,G$l,G$w){for(var G$u=0;G$u<8;G$u+=2)G$w[G$u]+=G$T,G$w[G$u+1]+=G$l;return G$w},G$I.create=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){void 0===G$D&&(G$D=0),void 0===G$P&&(G$P=0),void 0===G$j&&(G$j=0),void 0===G$J&&(G$J=0);var G$q=G$T instanceof laya.resource.Texture,G$M=G$q?G$T.uv:G$I.DEF_UV,G$z=G$q?G$T.bitmap:G$T,G$b=G$e.isAtlas(G$z);if(G$b){var G$K=G$z._atlaser,G$Y=G$T._atlasID;if(-1==G$Y)throw new Error("create texture error");G$z=G$K._inAtlasTextureBitmapValue[G$Y],G$M=G$K._inAtlasTextureOriUVValue[G$Y]}var G$t=new G$I(G$z,null);G$z.width&&G$l+G$u>G$z.width&&(G$u=G$z.width-G$l),G$z.height&&G$w+G$p>G$z.height&&(G$p=G$z.height-G$w),G$t.width=G$u,G$t.height=G$p,G$t.offsetX=G$D,G$t.offsetY=G$P,G$t.sourceWidth=G$j||G$u,G$t.sourceHeight=G$J||G$p;var G$A=1/G$z.width,G$L=1/G$z.height;G$l*=G$A,G$w*=G$L,G$u*=G$A,G$p*=G$L;var G$i=G$t.uv[0],G$W=G$t.uv[1],G$m=G$t.uv[4],G$c=G$t.uv[5],G$a=G$m-G$i,G$B=G$c-G$W,G$s=G$I.moveUV(G$M[0],G$M[1],[G$l,G$w,G$l+G$u,G$w,G$l+G$u,G$w+G$p,G$l,G$w+G$p]);G$t.uv=[G$i+G$s[0]*G$a,G$W+G$s[1]*G$B,G$m-(1-G$s[2])*G$a,G$W+G$s[3]*G$B,G$m-(1-G$s[4])*G$a,G$c-(1-G$s[5])*G$B,G$i+G$s[6]*G$a,G$c-(1-G$s[7])*G$B],G$b&&G$t.addTextureToAtlas();var G$r=G$z.scaleRate;return G$r&&1!=G$r?(G$t.sourceWidth/=G$r,G$t.sourceHeight/=G$r,G$t.width/=G$r,G$t.height/=G$r,G$t.scaleRate=G$r,G$t.offsetX/=G$r,G$t.offsetY/=G$r):G$t.scaleRate=1,G$t},G$I.createFromTexture=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$T.scaleRate;1!=G$D&&(G$l*=G$D,G$w*=G$D,G$u*=G$D,G$p*=G$D);var G$P=G$r.TEMP.setTo(G$l-G$T.offsetX,G$w-G$T.offsetY,G$u,G$p),G$j=G$P.intersection(G$I._rect1.setTo(0,0,G$T.width,G$T.height),G$I._rect2);if(!G$j)return null;var G$J=G$I.create(G$T,G$j.x,G$j.y,G$j.width,G$j.height,G$j.x-G$P.x,G$j.y-G$P.y,G$u,G$p);if(G$J.bitmap&&G$J.bitmap._removeReference)return G$J.bitmap._removeReference(),G$J;var G$q="bitmap:"+(G$J.bitmap?G$J.bitmap.constructor?G$J.bitmap.constructor.name:G$J.bitmap.__className:"")+", url:"+(G$T.url+" | "+(G$J.bitmap?G$J.bitmap.url:G$T.url))+", x="+G$l+",y="+G$w+",width="+G$u+",height="+G$p+", result="+(G$j?G$j.x+","+G$j.y+","+G$j.width+","+G$j.height:"null")+", rect="+G$P.x+","+G$P.y+","+G$P.width+","+G$P.height;throw new Error("报错：bitmap._removeReference is not a function  "+G$q)},G$I.DEF_UV=[0,0,1,0,1,1,0,1],G$I.INV_UV=[0,1,1,1,1,0,0,0],G$I._rect1=new G$r,G$I._rect2=new G$r,G$I}(),G$T=function(G$T){var G$j;function G$D(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,G$D.__super.call(this)}G$M(G$D,"laya.utils.TimeLine",G$q);var G$l=G$D.prototype;return G$l.to=function(G$T,G$l,G$w,G$u,G$p){return void 0===G$p&&(G$p=0),this._create(G$T,G$l,G$w,G$u,G$p,!0)},G$l.from=function(G$T,G$l,G$w,G$u,G$p){return void 0===G$p&&(G$p=0),this._create(G$T,G$l,G$w,G$u,G$p,!1)},G$l._create=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=G$g.getItemByClass("tweenData",G$j);return G$P.isTo=G$D,G$P.type=0,G$P.target=G$T,G$P.duration=G$w,G$P.data=G$l,G$P.startTime=this._startTime+G$p,G$P.endTime=G$P.startTime+G$P.duration,G$P.ease=G$u,this._startTime=Math.max(G$P.endTime,this._startTime),this._tweenDataList.push(G$P),this._startTimeSort=!0,this._endTimeSort=!0,this},G$l.addLabel=function(G$T,G$l){var G$w=G$g.getItemByClass("tweenData",G$j);return G$w.type=1,G$w.data=G$T,G$w.endTime=G$w.startTime=this._startTime+G$l,this._labelDic||(this._labelDic={}),this._labelDic[G$T]=G$w,this._tweenDataList.push(G$w),this},G$l.removeLabel=function(G$T){if(this._labelDic&&this._labelDic[G$T]){var G$l=this._labelDic[G$T];if(G$l){var G$w=this._tweenDataList.indexOf(G$l);-1<G$w&&this._tweenDataList.splice(G$w,1)}delete this._labelDic[G$T]}},G$l.gotoTime=function(G$T){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var G$l,G$w,G$u,G$p;for(var G$D in this._firstTweenDic)if(G$w=this._firstTweenDic[G$D])for(var G$P in G$w)G$w.diyTarget.hasOwnProperty(G$P)&&(G$w.diyTarget[G$P]=G$w[G$P]);for(G$D in this._tweenDic)(G$l=this._tweenDic[G$D]).clear(),delete this._tweenDic[G$D];if(this._index=0,this._gidIndex=0,this._currTime=G$T,this._lastTime=G$H.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=G$u=this._tweenDataList.concat(),G$u.sort(function(G$T,G$l){return G$T.endTime>G$l.endTime?1:G$T.endTime<G$l.endTime?-1:0})}else G$u=this._endTweenDataList;for(var G$j=0,G$J=G$u.length;G$j<G$J;G$j++)if(0==(G$p=G$u[G$j]).type){if(!(G$T>=G$p.endTime))break;this._index=Math.max(this._index,G$j+1);var G$q=G$p.data;if(G$p.isTo)for(var G$M in G$q)G$p.target[G$M]=G$q[G$M]}for(G$j=0,G$J=this._tweenDataList.length;G$j<G$J;G$j++)0==(G$p=this._tweenDataList[G$j]).type&&G$T>=G$p.startTime&&G$T<G$p.endTime&&(this._index=Math.max(this._index,G$j+1),this._gidIndex++,(G$l=G$g.getItemByClass("tween",G$E))._create(G$p.target,G$p.data,G$p.duration,G$p.ease,G$i.create(this,this._animComplete,[this._gidIndex]),0,!1,G$p.isTo,!0,!1),G$l.setStartTime(this._currTime-(G$T-G$p.startTime)),G$l._updateEase(this._currTime),G$l.gid=this._gidIndex,this._tweenDic[this._gidIndex]=G$l)}},G$l.gotoLabel=function(G$T){if(null!=this._labelDic){var G$l=this._labelDic[G$T];G$l&&this.gotoTime(G$l.startTime)}},G$l.pause=function(){G$B.timer.clear(this,this._update)},G$l.resume=function(){this.play(this._currTime,this._loopKey)},G$l.play=function(G$T,G$l){if(void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(G$T,G$l){return G$T.startTime>G$l.startTime?1:G$T.startTime<G$l.startTime?-1:0});for(var G$w=0,G$u=this._tweenDataList.length;G$w<G$u;G$w++){var G$p=this._tweenDataList[G$w];if(null!=G$p&&0==G$p.type){var G$D=G$p.target,G$P=G$D.$_GID||(G$D.$_GID=G$V.getGID()),G$j=null;for(var G$J in null==this._firstTweenDic[G$P]?((G$j={}).diyTarget=G$D,this._firstTweenDic[G$P]=G$j):G$j=this._firstTweenDic[G$P],G$p.data)null==G$j[G$J]&&(G$j[G$J]=G$D[G$J])}}}"string"==typeof G$T?this.gotoLabel(G$T):this.gotoTime(G$T),this._loopKey=G$l,this._lastTime=G$H.now(),G$B.timer.frameLoop(1,this,this._update)}},G$l._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var G$T in this._tweenDic)(G$l=this._tweenDic[G$T]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var G$l,G$w=G$H.now(),G$u=G$w-this._lastTime,G$p=this._currTime+=G$u*this.scale;for(G$T in this._lastTime=G$w,this._tweenDic)(G$l=this._tweenDic[G$T])._updateEase(G$p);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var G$D=this._tweenDataList[this._index];G$p>=G$D.startTime&&(this._index++,0==G$D.type?(this._gidIndex++,(G$l=G$g.getItemByClass("tween",G$E))._create(G$D.target,G$D.data,G$D.duration,G$D.ease,G$i.create(this,this._animComplete,[this._gidIndex]),0,!1,G$D.isTo,!0,!1),G$l.setStartTime(G$p),G$l.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=G$l)._updateEase(G$p)):this.event("label",G$D.data))}},G$l._animComplete=function(G$T){this._tweenDic[G$T]&&delete this._tweenDic[G$T]},G$l._complete=function(){this.event("complete")},G$l.reset=function(){var G$T;if(this._labelDic)for(G$T in this._labelDic)delete this._labelDic[G$T];for(G$T in this._tweenDic)this._tweenDic[G$T].clear(),delete this._tweenDic[G$T];for(G$T in this._firstTweenDic)delete this._firstTweenDic[G$T];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var G$l,G$w=0;for(G$l=this._tweenDataList.length,G$w=0;G$w<G$l;G$w++)this._tweenDataList[G$w]&&this._tweenDataList[G$w].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,G$B.timer.clear(this,this._update)},G$l.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},G$Y(0,G$l,"index",function(){return this._frameIndex},function(G$T){this._frameIndex=G$T,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),G$Y(0,G$l,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),G$D.to=function(G$T,G$l,G$w,G$u,G$p){return void 0===G$p&&(G$p=0),(new G$D).to(G$T,G$l,G$w,G$u,G$p)},G$D.from=function(G$T,G$l,G$w,G$u,G$p){return void 0===G$p&&(G$p=0),(new G$D).from(G$T,G$l,G$w,G$u,G$p)},G$D.__init$=function(){G$j=function(){function G$T(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return G$M(G$T,""),G$T.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,G$g.recover("tweenData",this)},G$T}()},G$D}(),G$zT=function(G$p){function G$w(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,G$w.__super.call(this),this._style=G$j.EMPTY}G$M(G$w,"laya.display.Sprite",G$p);var G$T=G$w.prototype;return G$B.imps(G$T,{"laya.display.ILayout":!0}),G$T.createConchModel=function(){return new ConchNode},G$T.destroy=function(G$T){if(void 0===G$T&&(G$T=!0),this._releaseMem(),!this._destroyed){this.filters=null;var G$l=this.mask;G$l&&(this.mask=null,G$l.destroy(G$T))}G$p.prototype.destroy.call(this,G$T),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},G$T.updateZOrder=function(){G$V.updateOrder(this._childs)&&this.repaint()},G$T.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},G$T.setBounds=function(G$T){this._set$P("uBounds",G$T)},G$T.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new G$r),G$r._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},G$T.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new G$r),G$r._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},G$T._boundPointsToParent=function(G$T){void 0===G$T&&(G$T=!1);var G$l=0,G$w=0;this._style&&(G$l=this._style._tf.translateX,G$w=this._style._tf.translateY,G$T=G$T||0!==this._style._tf.rotate,this._style.scrollRect&&(G$l+=this._style.scrollRect.x,G$w+=this._style.scrollRect.y));var G$u=this._getBoundPointsM(G$T);if(!G$u||G$u.length<1)return G$u;if(8!=G$u.length&&(G$u=G$T?G$c.scanPList(G$u):G$r._getWrapRec(G$u,G$r.TEMP)._getBoundPoints()),!this.transform)return G$V.transPointList(G$u,this._x-G$l,this._y-G$w),G$u;var G$p=G$s.TEMP,G$D=0,G$P=G$u.length;for(G$D=0;G$D<G$P;G$D+=2)G$p.x=G$u[G$D],G$p.y=G$u[G$D+1],this.toParentPoint(G$p),G$u[G$D]=G$p.x,G$u[G$D+1]=G$p.y;return G$u},G$T.getGraphicBounds=function(G$T){return void 0===G$T&&(G$T=!1),this._graphics?this._graphics.getBounds(G$T):G$r.TEMP.setTo(0,0,0,0)},G$T._getBoundPointsM=function(G$T){if(void 0===G$T&&(G$T=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var G$l=G$V.clearArray(this._$P.temBM),G$w=G$r.TEMP;return G$w.copyFrom(this.scrollRect),G$V.concatArray(G$l,G$w._getBoundPoints()),G$l}for(var G$u,G$p,G$D,G$P=this._graphics?this._graphics.getBoundPoints():G$V.clearArray(this._$P.temBM),G$j=0,G$J=(G$D=this._childs).length;G$j<G$J;G$j++)(G$u=G$D[G$j])instanceof laya.display.Sprite&&1==G$u.visible&&(G$p=G$u._boundPointsToParent(G$T))&&(G$P=G$P?G$V.concatArray(G$P,G$p):G$p);return G$P},G$T.getStyle=function(){return this._style===G$j.EMPTY&&(this._style=new G$j),this._style},G$T.setStyle=function(G$T){this._style=G$T},G$T._adjustTransform=function(){this._tfChanged=!1;var G$T,G$l=this._style._tf,G$w=G$l.scaleX,G$u=G$l.scaleY;if(G$l.rotate||1!==G$w||1!==G$u||G$l.skewX||G$l.skewY){(G$T=this._transform||(this._transform=G$y.create())).bTransform=!0;var G$p=.0174532922222222*(G$l.rotate-G$l.skewX),G$D=.0174532922222222*(G$l.rotate+G$l.skewY),G$P=Math.cos(G$D),G$j=Math.sin(G$D),G$J=Math.sin(G$p),G$q=Math.cos(G$p);return G$T.a=G$w*G$P,G$T.b=G$w*G$j,G$T.c=-G$u*G$J,G$T.d=G$u*G$q,G$T.tx=G$T.ty=0,G$T}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,G$T},G$T.pos=function(G$T,G$l,G$w){if(void 0===G$w&&(G$w=!1),this._x!==G$T||this._y!==G$l){if(this.destroyed)return this;if(G$w){this._x=G$T,this._y=G$l,this.conchModel&&this.conchModel.pos(this._x,this._y);var G$u=this._parent;G$u&&0===G$u._repaint&&(G$u._repaint=1,G$u.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=G$T,this.y=G$l}return this},G$T.pivot=function(G$T,G$l){return this.pivotX=G$T,this.pivotY=G$l,this},G$T.size=function(G$T,G$l){return this.width=G$T,this.height=G$l,this},G$T.scale=function(G$T,G$l,G$w){void 0===G$w&&(G$w=!1);var G$u=this.getStyle(),G$p=G$u._tf;if(G$p.scaleX!=G$T||G$p.scaleY!=G$l){if(this.destroyed)return this;if(G$w){G$u.setScale(G$T,G$l),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(G$T,G$l),this._renderType|=4;var G$D=this._parent;G$D&&0===G$D._repaint&&(G$D._repaint=1,G$D.parentRepaint())}else this.scaleX=G$T,this.scaleY=G$l}return this},G$T.skew=function(G$T,G$l){return this.skewX=G$T,this.skewY=G$l,this},G$T.render=function(G$T,G$l,G$w){G$f.spriteCount++,G$O.renders[this._renderType]._fun(this,G$T,G$l+this._x,G$w+this._y),this._repaint=0},G$T.drawToCanvas=function(G$T,G$l,G$w,G$u){if(G$R.isConchNode){var G$p=G$WT.create("2D");return new G$F(G$T,G$l,G$p).ctx.setCanvasType(1),this.conchModel.drawToCanvas(G$p.source,G$w,G$u),G$p}return G$e.drawToCanvas(this,this._renderType,G$T,G$l,G$w,G$u)},G$T.customRender=function(G$T,G$l,G$w){this._renderType|=1024},G$T._applyFilters=function(){var G$T;if(!G$R.isWebGL&&((G$T=this._$P.filters)&&!(G$T.length<1)))for(var G$l=0,G$w=G$T.length;G$l<G$w;G$l++)G$T[G$l].action.apply(this._$P.cacheCanvas)},G$T._isHaveGlowFilter=function(){var G$T,G$l=0;if(this.filters)for(G$l=0;G$l<this.filters.length;G$l++)if(8==this.filters[G$l].type)return!0;for(G$l=0,G$T=this._childs.length;G$l<G$T;G$l++)if(this._childs[G$l]._isHaveGlowFilter())return!0;return!1},G$T.localToGlobal=function(G$T,G$l){void 0===G$l&&(G$l=!1),!0===G$l&&(G$T=new G$s(G$T.x,G$T.y));for(var G$w=this;G$w&&G$w!=G$B.stage;)G$T=G$w.toParentPoint(G$T),G$w=G$w.parent;return G$T},G$T.globalToLocal=function(G$T,G$l){void 0===G$l&&(G$l=!1),G$l&&(G$T=new G$s(G$T.x,G$T.y));for(var G$w=this,G$u=[];G$w&&G$w!=G$B.stage;)G$u.push(G$w),G$w=G$w.parent;for(var G$p=G$u.length-1;0<=G$p;)G$T=(G$w=G$u[G$p]).fromParentPoint(G$T),G$p--;return G$T},G$T.toParentPoint=function(G$T){if(!G$T)return G$T;G$T.x-=this.pivotX,G$T.y-=this.pivotY,this.transform&&this._transform.transformPoint(G$T),G$T.x+=this._x,G$T.y+=this._y;var G$l=this._style.scrollRect;return G$l&&(G$T.x-=G$l.x,G$T.y-=G$l.y),G$T},G$T.fromParentPoint=function(G$T){if(!G$T)return G$T;G$T.x-=this._x,G$T.y-=this._y;var G$l=this._style.scrollRect;return G$l&&(G$T.x+=G$l.x,G$T.y+=G$l.y),this.transform&&this._transform.invertTransformPoint(G$T),G$T.x+=this.pivotX,G$T.y+=this.pivotY,G$T},G$T.on=function(G$T,G$l,G$w,G$u){return 1!==this._mouseEnableState&&this.isMouseEvent(G$T)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(G$T,G$l,G$w,G$u,!1)):G$p.prototype.on.call(this,G$T,G$l,G$w,G$u)},G$T.once=function(G$T,G$l,G$w,G$u){return 1!==this._mouseEnableState&&this.isMouseEvent(G$T)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(G$T,G$l,G$w,G$u,!0)):G$p.prototype.once.call(this,G$T,G$l,G$w,G$u)},G$T._$2__onDisplay=function(){if(1!==this._mouseEnableState){var G$T=this;for(G$T=G$T.parent;G$T&&1!==G$T._mouseEnableState&&!G$T._getBit(2);)G$T.mouseEnabled=!0,G$T._setBit(2,!0),G$T=G$T.parent}},G$T.loadImage=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=this;return void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0),this.graphics.loadImage(G$T,G$l,G$w,G$u,G$p,function(G$T){G$P.destroyed||(G$P.size(G$l+(G$u||G$T.width),G$w+(G$p||G$T.height)),G$P.repaint(),G$D&&G$D.runWith(G$T))}),this},G$T.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},G$T._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},G$T._childChanged=function(G$T){this._childs.length?this._renderType|=2048:this._renderType&=-2049,G$T&&this._get$P("hasZorder")&&G$B.timer.callLater(this,this.updateZOrder),this.repaint()},G$T.parentRepaint=function(){var G$T=this._parent;G$T&&0===G$T._repaint&&(G$T._repaint=1,G$T.parentRepaint())},G$T.startDrag=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){void 0===G$l&&(G$l=!1),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=300),void 0===G$D&&(G$D=!1),void 0===G$P&&(G$P=.92),this._$P.dragging||this._set$P("dragging",new G$G),this._$P.dragging.start(this,G$T,G$l,G$w,G$u,G$p,G$D,G$P)},G$T.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},G$T._releaseMem=function(){if(this._$P){var G$T=this._$P.cacheCanvas;G$T&&G$T.ctx&&(G$g.recover("RenderContext",G$T.ctx),G$T.ctx.canvas.size(0,0),G$T.ctx=null);var G$l=this._$P._filterCache;G$l&&(G$l.destroy(),G$l.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},G$T._setDisplay=function(G$T){G$T||this._releaseMem(),G$p.prototype._setDisplay.call(this,G$T)},G$T.hitTestPoint=function(G$T,G$l){var G$w=this.globalToLocal(G$s.TEMP.setTo(G$T,G$l));return G$T=G$w.x,G$l=G$w.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?G$r.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(G$T,G$l)},G$T.getMousePoint=function(){return this.globalToLocal(G$s.TEMP.setTo(G$B.stage.mouseX,G$B.stage.mouseY))},G$T._getWords=function(){return null},G$T._addChildsToLayout=function(G$T){var G$l=this._getWords();if(null==G$l&&0==this._childs.length)return!1;if(G$l)for(var G$w=0,G$u=G$l.length;G$w<G$u;G$w++)G$T.push(G$l[G$w]);G$w=0;for(var G$p=this._childs.length;G$w<G$p;++G$w){var G$D=this._childs[G$w];G$D._style._enableLayout()&&G$D._addToLayout(G$T)}return!0},G$T._addToLayout=function(G$T){this._style.absolute||(this._style.block?G$T.push(this):this._addChildsToLayout(G$T)&&(this.x=this.y=0))},G$T._isChar=function(){return!1},G$T._getCSSStyle=function(){return this._style.getCSSStyle()},G$T._setAttributes=function(G$T,G$l){switch(G$T){case"x":this.x=parseFloat(G$l);break;case"y":this.y=parseFloat(G$l);break;case"width":this.width=parseFloat(G$l);break;case"height":this.height=parseFloat(G$l);break;default:this[G$T]=G$l}},G$T._layoutLater=function(){this.parent&&this.parent._layoutLater()},G$Y(0,G$T,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(G$T){this._optimizeScrollRect!=G$T&&(this._optimizeScrollRect=G$T,this.conchModel&&this.conchModel.optimizeScrollRect(G$T))}),G$Y(0,G$T,"customRenderEnable",null,function(G$T){if(G$T&&(this._renderType|=1024,G$R.isConchNode)){G$w.CustomList.push(this);var G$l=new G$WT("2d");G$l._setContext(new CanvasRenderingContext2D),this.customContext=new G$F(0,0,G$l),G$l.context.setCanvasType&&G$l.context.setCanvasType(2),this.conchModel.custom(G$l.context)}}),G$Y(0,G$T,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(G$T){this.cacheAs=G$T?this._$P.hasFilter?"none":"normal":"none"}),G$Y(0,G$T,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(G$T){var G$l=this._$P.cacheCanvas;if(G$T!==(G$l?G$l.type:"none")){if("none"!==G$T)this._getBit(1)||this._setUpNoticeType(1),G$l||(G$l=this._set$P("cacheCanvas",G$g.getItemByClass("cacheCanvas",Object))),G$l.type=G$T,G$l.reCache=!0,this._renderType|=16,"bitmap"==G$T&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(G$l){var G$w=G$l;G$w&&G$w.ctx&&(G$g.recover("RenderContext",G$w.ctx),G$w.ctx.canvas.size(0,0),G$w.ctx=null),G$g.recover("cacheCanvas",G$l)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),G$Y(0,G$T,"zOrder",function(){return this._zOrder},function(G$T){this._zOrder!=G$T&&(this._zOrder=G$T,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(G$T),this._parent&&(G$T&&this._parent._set$P("hasZorder",!0),G$B.timer.callLater(this._parent,this.updateZOrder)))}),G$Y(0,G$T,"rotation",function(){return this._style._tf.rotate},function(G$T){var G$l=this.getStyle();if(G$l._tf.rotate!==G$T){G$l.setRotate(G$T),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(G$T),this._renderType|=4;var G$w=this._parent;G$w&&0===G$w._repaint&&(G$w._repaint=1,G$w.parentRepaint())}}),G$Y(0,G$T,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(G$T){this._width!==G$T&&(this._width=G$T,this.conchModel&&this.conchModel.size(G$T,this._height),this.repaint())}),G$Y(0,G$T,"x",function(){return this._x},function(G$T){if(this._x!==G$T){if(this.destroyed)return;this._x=G$T,this.conchModel&&this.conchModel.pos(G$T,this._y);var G$l=this._parent;G$l&&0===G$l._repaint&&(G$l._repaint=1,G$l.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),G$Y(0,G$T,"globalScaleY",function(){for(var G$T=1,G$l=this;G$l&&G$l!==G$B.stage;)G$T*=G$l.scaleY,G$l=G$l.parent;return G$T}),G$Y(0,G$T,"hitArea",function(){return this._$P.hitArea},function(G$T){this._set$P("hitArea",G$T)}),G$Y(0,G$T,"staticCache",function(){return this._$P.staticCache},function(G$T){this._set$P("staticCache",G$T),G$T||this.reCache()}),G$Y(0,G$T,"texture",function(){return this._texture},function(G$T){this._texture!=G$T&&(this._texture=G$T,this.graphics.cleanByTexture(G$T,0,0))}),G$Y(0,G$T,"y",function(){return this._y},function(G$T){if(this._y!==G$T){if(this.destroyed)return;this._y=G$T,this.conchModel&&this.conchModel.pos(this._x,G$T);var G$l=this._parent;G$l&&0===G$l._repaint&&(G$l._repaint=1,G$l.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),G$Y(0,G$T,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(G$T){this._height!==G$T&&(this._height=G$T,this.conchModel&&this.conchModel.size(this._width,G$T),this.repaint())}),G$Y(0,G$T,"blendMode",function(){return this._style.blendMode},function(G$T){this.getStyle().blendMode=G$T,this.conchModel&&this.conchModel.blendMode(G$T),G$T&&"source-over"!=G$T?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),G$Y(0,G$T,"scaleX",function(){return this._style._tf.scaleX},function(G$T){var G$l=this.getStyle();if(G$l._tf.scaleX!==G$T){G$l.setScaleX(G$T),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(G$T,G$l._tf.scaleY),this._renderType|=4;var G$w=this._parent;G$w&&0===G$w._repaint&&(G$w._repaint=1,G$w.parentRepaint())}}),G$Y(0,G$T,"scaleY",function(){return this._style._tf.scaleY},function(G$T){var G$l=this.getStyle();if(G$l._tf.scaleY!==G$T){G$l.setScaleY(G$T),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(G$l._tf.scaleX,G$T),this._renderType|=4;var G$w=this._parent;G$w&&0===G$w._repaint&&(G$w._repaint=1,G$w.parentRepaint())}}),G$Y(0,G$T,"stage",function(){return G$B.stage}),G$Y(0,G$T,"skewX",function(){return this._style._tf.skewX},function(G$T){var G$l=this.getStyle();if(G$l._tf.skewX!==G$T){G$l.setSkewX(G$T),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(G$T,G$l._tf.skewY),this._renderType|=4;var G$w=this._parent;G$w&&0===G$w._repaint&&(G$w._repaint=1,G$w.parentRepaint())}}),G$Y(0,G$T,"scrollRect",function(){return this._style.scrollRect},function(G$T){this.getStyle().scrollRect=G$T,this.repaint(),G$T?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(G$T.x,G$T.y,G$T.width,G$T.height)):(this._renderType&=-129,this.conchModel&&(G$w.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),G$Y(0,G$T,"skewY",function(){return this._style._tf.skewY},function(G$T){var G$l=this.getStyle();if(G$l._tf.skewY!==G$T){G$l.setSkewY(G$T),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(G$l._tf.skewX,G$T),this._renderType|=4;var G$w=this._parent;G$w&&0===G$w._repaint&&(G$w._repaint=1,G$w.parentRepaint())}}),G$Y(0,G$T,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(G$T){this._tfChanged=!1,(this._transform=G$T)&&(this._x=G$T.tx,this._y=G$T.ty,G$T.tx=G$T.ty=0,this.conchModel&&this.conchModel.transform(G$T.a,G$T.b,G$T.c,G$T.d,this._x,this._y)),G$T?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),G$Y(0,G$T,"pivotX",function(){return this._style._tf.translateX},function(G$T){this.getStyle().setTranslateX(G$T),this.conchModel&&this.conchModel.pivot(G$T,this._style._tf.translateY),this.repaint()}),G$Y(0,G$T,"pivotY",function(){return this._style._tf.translateY},function(G$T){this.getStyle().setTranslateY(G$T),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,G$T),this.repaint()}),G$Y(0,G$T,"alpha",function(){return this._style.alpha},function(G$T){this._style&&this._style.alpha!==G$T&&(G$T=G$T<0?0:1<G$T?1:G$T,this.getStyle().alpha=G$T,this.conchModel&&this.conchModel.alpha(G$T),1!==G$T?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),G$Y(0,G$T,"visible",function(){return this._style.visible},function(G$T){this._style&&this._style.visible!==G$T&&(this.getStyle().visible=G$T,this.conchModel&&this.conchModel.visible(G$T),this.parentRepaint())}),G$Y(0,G$T,"graphics",function(){return this._graphics||(this.graphics=G$e.createGraphics())},function(G$T){this._graphics&&(this._graphics._sp=null),(this._graphics=G$T)?(this._renderType&=-2,this._renderType|=512,(G$T._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(G$w.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),G$Y(0,G$T,"filters",function(){return this._$P.filters},function(G$T){G$T&&0===G$T.length&&(G$T=null),this._$P.filters!=G$T&&(this._set$P("filters",G$T?G$T.slice():null),G$R.isConchApp&&(this.conchModel&&(G$w.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),G$R.isWebGL&&(G$T&&G$T.length?this._renderType|=32:this._renderType&=-33),G$T&&0<G$T.length?(this._getBit(1)||this._setUpNoticeType(1),G$R.isWebGL&&1==G$T.length&&G$T[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(G$R.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),G$Y(0,G$T,"parent",G$p.prototype._$get_parent,function(G$T){G$B.superSet(G$TT,this,"parent",G$T),G$T&&this._getBit(2)&&this._$2__onDisplay()}),G$Y(0,G$T,"mask",function(){return this._$P._mask},function(G$T){G$T&&this.mask&&this.mask._$P.maskParent||(G$T?(this.cacheAs="bitmap",this._set$P("_mask",G$T),G$T._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",G$T),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(G$T?G$T.conchModel:null),this._renderType|=64,this.parentRepaint())}),G$Y(0,G$T,"mouseEnabled",function(){return 1<this._mouseEnableState},function(G$T){this._mouseEnableState=G$T?2:1}),G$Y(0,G$T,"globalScaleX",function(){for(var G$T=1,G$l=this;G$l&&G$l!==G$B.stage;)G$T*=G$l.scaleX,G$l=G$l.parent;return G$T}),G$Y(0,G$T,"mouseX",function(){return this.getMousePoint().x}),G$Y(0,G$T,"mouseY",function(){return this.getMousePoint().y}),G$w.fromImage=function(G$T){return(new G$w).loadImage(G$T)},G$w._cachePool=[],G$w.CustomList=[],G$J(G$w,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=G$P.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),G$w}(G$TT),G$bT=function(G$T){function G$l(G$T){this._audio=null,this._onEnd=null,this._resumePlay=null,G$l.__super.call(this),this._onEnd=G$V.bind(this.__onEnd,this),this._resumePlay=G$V.bind(this.__resumePlay,this),G$T.addEventListener("ended",this._onEnd),this._audio=G$T}G$M(G$l,"laya.media.h5audio.AudioSoundChannel",G$uT);var G$w=G$l.prototype;return G$w.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(G$B.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},G$w.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,G$H.container.appendChild(this._audio),this._audio.play()}catch(G$T){this.event("error")}},G$w.play=function(G$T){this.isStopped=!1;try{this._audio.playbackRate=G$o.playbackRate,this._audio.currentTime=this.startTime}catch(G$T){return void this._audio.addEventListener("canplay",this._resumePlay)}G$o.addChannel(this),G$H.container.appendChild(this._audio),!G$T&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},G$w.stop=function(){this.isStopped=!0,G$o.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&G$R.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),G$H.onIE||this._audio!=G$wT._musicAudio&&G$g.recover("audio:"+this.url,this._audio),G$H.removeElement(this._audio),this._audio=null)},G$w.pause=function(){this.isStopped=!0,G$o.removeChannel(this),"pause"in this._audio&&this._audio.pause()},G$w.resume=function(){this._audio&&(this.isStopped=!1,G$o.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},G$Y(0,G$w,"position",function(){return this._audio?this._audio.currentTime:0}),G$Y(0,G$w,"duration",function(){return this._audio?this._audio.duration:0}),G$Y(0,G$w,"volume",function(){return this._audio?this._audio.volume:1},function(G$T){this._audio&&(this._audio.volume=G$T)}),G$l}(),G$KT=function(G$T){function G$l(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=G$DT.ctx,G$l.__super.call(this),this._onPlayEnd=G$V.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}G$M(G$l,"laya.media.webaudio.WebAudioSoundChannel",G$uT);var G$w=G$l.prototype;return G$w.play=function(G$T){if(G$o.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var G$l=this.context,G$w=this.gain,G$u=G$l.createBufferSource();(this.bufferSource=G$u).buffer=this.audioBuffer,G$u.connect(G$w),G$w&&G$w.disconnect(),G$w.connect(G$l.destination),G$u.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=G$H.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(G$u.loop=!0),G$u.playbackRate.setTargetAtTime?G$u.playbackRate.setTargetAtTime(G$o.playbackRate,this.context.currentTime,.1):G$u.playbackRate.value=G$o.playbackRate,G$u.start(0,this.startTime),!G$T&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},G$w.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(G$B.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},G$w._clearBufferSource=function(){if(this.bufferSource){var G$T=this.bufferSource;G$T.stop?G$T.stop(0):G$T.noteOff(0),G$T.disconnect(0),G$T.onended=null,G$l._tryCleanFailed||this._tryClearBuffer(G$T),this.bufferSource=null}},G$w._tryClearBuffer=function(G$T){try{G$T.buffer=null}catch(G$T){G$l._tryCleanFailed=!0}},G$w.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,G$o.removeChannel(this),this.startHandler=null,this.completeHandler=null},G$w.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,G$o.removeChannel(this)},G$w.resume=function(){this.startTime=this._pauseTime,this.play(!1)},G$Y(0,G$w,"position",function(){return this.bufferSource?(G$H.now()-this._startTime)/1e3+this.startTime:0}),G$Y(0,G$w,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),G$Y(0,G$w,"volume",function(){return this._volume},function(G$T){this.isStopped||(this._volume=G$T,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(G$T,this.context.currentTime,.1):this.gain.gain.value=G$T)}),G$l._tryCleanFailed=!1,G$l}(),G$YT=function(G$T){function G$l(){G$l.__super.call(this),this._w=0,this._h=0}G$M(G$l,"laya.resource.Bitmap",G$qT);var G$w=G$l.prototype;return G$Y(0,G$w,"width",function(){return this._w}),G$Y(0,G$w,"height",function(){return this._h}),G$Y(0,G$w,"source",function(){return this._source}),G$l}(),G$tT=function(G$l){function G$T(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,G$T.__super.call(this),this._interval=G$u.animationInterval,this._setUpNoticeType(1)}G$M(G$T,"laya.display.AnimationPlayerBase",G$l);var G$w=G$T.prototype;return G$w.play=function(G$T,G$l,G$w,G$u){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=!0),void 0===G$w&&(G$w=""),void 0===G$u&&(G$u=!0),this._isPlaying=!0,this.index="string"==typeof G$T?this._getFrameByLabel(G$T):G$T,this.loop=G$l,this._actionName=G$w,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},G$w._getFrameByLabel=function(G$T){var G$l=0;for(G$l=0;G$l<this._count;G$l++)if(this._labels[G$l]&&0<=this._labels[G$l].indexOf(G$T))return G$l;return 0},G$w._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},G$w._setControlNode=function(G$T){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=G$T)&&G$T!=this&&(G$T.on("display",this,this._checkResumePlaying),G$T.on("undisplay",this,this._checkResumePlaying))},G$w._setDisplay=function(G$T){G$l.prototype._setDisplay.call(this,G$T),this._checkResumePlaying()},G$w._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},G$w.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},G$w.addLabel=function(G$T,G$l){this._labels||(this._labels={}),this._labels[G$l]||(this._labels[G$l]=[]),this._labels[G$l].push(G$T)},G$w.removeLabel=function(G$T){if(G$T){if(this._labels)for(var G$l in this._labels)this._removeLabelFromLabelList(this._labels[G$l],G$T)}else this._labels=null},G$w._removeLabelFromLabelList=function(G$T,G$l){if(G$T)for(var G$w=G$T.length-1;0<=G$w;G$w--)G$T[G$w]==G$l&&G$T.splice(G$w,1)},G$w.gotoAndStop=function(G$T){this.index="string"==typeof G$T?this._getFrameByLabel(G$T):G$T,this.stop()},G$w._displayToIndex=function(G$T){},G$w.clear=function(){this.stop(),this._labels=null},G$Y(0,G$w,"interval",function(){return this._interval},function(G$T){this._interval!=G$T&&(this._frameRateChanged=!0,this._interval=G$T,this._isPlaying&&0<G$T&&this.timerLoop(G$T,this,this._frameLoop,null,!0,!0))}),G$Y(0,G$w,"isPlaying",function(){return this._isPlaying}),G$Y(0,G$w,"index",function(){return this._index},function(G$T){if(this._index=G$T,this._displayToIndex(G$T),this._labels&&this._labels[G$T])for(var G$l=this._labels[G$T],G$w=0,G$u=G$l.length;G$w<G$u;G$w++)this.event("label",G$l[G$w])}),G$Y(0,G$w,"count",function(){return this._count}),G$T.WRAP_POSITIVE=0,G$T.WRAP_REVERSE=1,G$T.WRAP_PINGPONG=2,G$T}(G$zT),G$AT=function(G$l){function G$K(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,G$K.__super.call(this),this.overflow=G$K.VISIBLE,this._style=new G$lT(this),this._style.wordWrap=!1}G$M(G$K,"laya.display.Text",G$l);var G$T=G$K.prototype;return G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._lines=null,this._words&&(this._words.length=0,this._words=null)},G$T._getBoundPointsM=function(G$T){void 0===G$T&&(G$T=!1);var G$l=G$r.TEMP;return G$l.setTo(0,0,this.width,this.height),G$l._getBoundPoints()},G$T.getGraphicBounds=function(G$T){void 0===G$T&&(G$T=!1);var G$l=G$r.TEMP;return G$l.setTo(0,0,this.width,this.height),G$l},G$T._getCSSStyle=function(){return this._style},G$T.lang=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M){if(G$T=G$K.langPacks&&G$K.langPacks[G$T]?G$K.langPacks[G$T]:G$T,arguments.length<2)this._text=G$T;else{for(var G$z=0,G$b=arguments.length;G$z<G$b;G$z++)G$T=G$T.replace("{"+G$z+"}",arguments[G$z+1]);this._text=G$T}},G$T._isPassWordMode=function(){var G$T=this._style.password;return"prompt"in this&&this.prompt==this._text&&(G$T=!1),G$T},G$T._getPassWordTxt=function(G$T){var G$l;G$l="";for(var G$w=G$T.length;0<G$w;G$w--)G$l+="●";return G$l},G$T.renderText=function(G$T,G$l){var G$w=this.graphics;G$w.clear(!0);var G$u=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(G$H.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);G$H.context.font=G$u;var G$p=this.padding,G$D=G$p[3],G$P="left",G$j=this._lines,G$J=this.leading+this._charSize.height,G$q=this._currBitmapFont;G$q&&(G$J=this.leading+G$q.getMaxHeight());var G$M=G$p[0];if(!G$q&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(G$P="right",G$D=this._width-G$p[1]):"center"==this.align&&(G$P="center",G$D=.5*this._width+G$p[3]-G$p[1])),0<this._height){var G$z=this._textHeight>this._height?"top":this.valign;"middle"===G$z?G$M=.5*(this._height-G$l*G$J)+G$p[0]-G$p[2]:"bottom"===G$z&&(G$M=this._height-G$l*G$J-G$p[2])}var G$b=this._style;if(G$q&&G$q.autoScaleSize)var G$K=G$q.fontSize/this.fontSize;if(this._clipPoint)if(G$w.save(),G$q&&G$q.autoScaleSize){var G$Y=0,G$t=0;G$Y=this._width?this._width-G$p[3]-G$p[1]:this._textWidth,G$t=this._height?this._height-G$p[0]-G$p[2]:this._textHeight,G$Y*=G$K,G$t*=G$K,G$w.clipRect(G$p[3],G$p[0],G$Y,G$t)}else G$w.clipRect(G$p[3],G$p[0],this._width?this._width-G$p[3]-G$p[1]:this._textWidth,this._height?this._height-G$p[0]-G$p[2]:this._textHeight);var G$A=G$b.password;"prompt"in this&&this.prompt==this._text&&(G$A=!1);for(var G$L=0,G$i=0,G$W=Math.min(this._lines.length,G$l+G$T)||1,G$m=G$T;G$m<G$W;G$m++){var G$c,G$a=G$j[G$m];if(G$A){var G$B=G$a.length;G$a="";for(var G$s=G$B;0<G$s;G$s--)G$a+="●"}if(G$L=G$D-(this._clipPoint?this._clipPoint.x:0),G$i=G$M+G$J*G$m-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(G$P,G$L,G$i,G$m),G$q){var G$r=this.width;G$q.autoScaleSize&&(G$r=this.width*G$K),G$q.drawText(G$a,this,G$L,G$i,this.align,G$r)}else G$R.isWebGL?(this._words||(this._words=[]),(G$c=this._words.length>G$m-G$T?this._words[G$m-G$T]:new G$_).setText(G$a)):G$c=G$a,G$b.stroke?G$w.fillBorderText(G$c,G$L,G$i,G$u,this.color,G$b.strokeColor,G$b.stroke,G$P):G$w.fillText(G$c,G$L,G$i,G$u,this.color,G$P)}if(G$q&&G$q.autoScaleSize){var G$I=1/G$K;this.scale(G$I,G$I)}this._clipPoint&&G$w.restore(),this._startX=G$D,this._startY=G$M},G$T.drawUnderline=function(G$T,G$l,G$w,G$u){var G$p=this._lineWidths[G$u];switch(G$T){case"center":G$l-=G$p/2;break;case"right":G$l-=G$p}G$w+=this._charSize.height,this._graphics.drawLine(G$l,G$w,G$l+G$p,G$w,this.underlineColor||this.color,1)},G$T.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);G$H.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new G$s(0,0)):this._clipPoint=null;var G$T=this._lines.length;if(this.overflow!=G$K.VISIBLE){var G$l=this.overflow==G$K.HIDDEN?Math.floor:Math.ceil;G$T=Math.min(G$T,G$l((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var G$w=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(G$w,G$T),this.repaint()},G$T.evalTextSize=function(){var G$T,G$l=NaN;G$T=Math.max.apply(this,this._lineWidths),G$l=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],G$T==this._textWidth&&G$l==this._textHeight||(this._textWidth=G$T,this._textHeight=G$l,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},G$T.checkEnabledViewportOrNot=function(){return this.overflow==G$K.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},G$T.changeText=function(G$T){this._text!==G$T&&(this.lang(G$T+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},G$T.parseLines=function(G$T){var G$l=this.wordWrap||this.overflow==G$K.HIDDEN;if(G$l)var G$w=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var G$u=G$V.contextMeasureText(G$K._testWord);G$R.isConchApp&&0===G$u.width&&0===G$u.height&&(G$u=G$V.contextMeasureText("W")),this._charSize.width=G$u.width,this._charSize.height=G$u.height||this.fontSize}for(var G$p=G$T.replace(/\r\n/g,"\n").split("\n"),G$D=0,G$P=G$p.length;G$D<G$P;G$D++){var G$j=G$p[G$D];G$l?this.parseLine(G$j,G$w):(this._lineWidths.push(this.getTextWidth(G$j)),this._lines.push(G$j))}},G$T.parseLine=function(G$T,G$l){G$H.context;var G$w,G$u=this._lines,G$p=0,G$D=NaN,G$P=NaN,G$j=0;if((G$D=this.getTextWidth(G$T))<=G$l)return G$u.push(G$T),void this._lineWidths.push(G$D);G$D=this._charSize.width,0==(G$p=Math.floor(G$l/G$D))&&(G$p=1),G$P=G$D=this.getTextWidth(G$T.substring(0,G$p));for(var G$J=G$p,G$q=G$T.length;G$J<G$q;G$J++)if(G$l<(G$P+=G$D=this.getTextWidth(G$T.charAt(G$J))))if(this.wordWrap){var G$M=G$T.substring(G$j,G$J);if(G$M.charCodeAt(G$M.length-1)<255?(G$w=/(?:\w|-)+$/.exec(G$M))&&(G$J=G$w.index+G$j,0==G$w.index?G$J+=G$M.length:G$M=G$T.substring(G$j,G$J)):G$K.RightToLeft&&(G$w=/([\u0600-\u06FF])+$/.exec(G$M))&&(G$J=G$w.index+G$j,0==G$w.index?G$J+=G$M.length:G$M=G$T.substring(G$j,G$J)),G$u.push(G$M),this._lineWidths.push(G$P-G$D),!((G$j=G$J)+G$p<G$q)){G$u.push(G$T.substring(G$j,G$q)),this._lineWidths.push(this.getTextWidth(G$u[G$u.length-1])),G$j=-1;break}G$J+=G$p,G$P=G$D=this.getTextWidth(G$T.substring(G$j,G$J)),G$J--}else if(this.overflow==G$K.HIDDEN)return G$u.push(G$T.substring(0,G$J)),void this._lineWidths.push(this.getTextWidth(G$u[G$u.length-1]));this.wordWrap&&-1!=G$j&&(G$u.push(G$T.substring(G$j,G$q)),this._lineWidths.push(this.getTextWidth(G$u[G$u.length-1])))},G$T.getTextWidth=function(G$T){return this._currBitmapFont?this._currBitmapFont.getTextWidth(G$T):G$V.contextMeasureText(G$T).width},G$T.getWordWrapWidth=function(){var G$T=this.padding,G$l=NaN;return(G$l=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(G$l=this.wordWrap?100:G$H.width),G$l<=0&&(G$l=100),G$l-G$T[3]-G$T[1]},G$T.getCharPoint=function(G$T,G$l){this._isChanged&&G$B.timer.runCallLater(this,this.typeset);for(var G$w=0,G$u=this._lines,G$p=0,G$D=0,G$P=G$u.length;G$D<G$P;G$D++){if(G$T<(G$w+=G$u[G$D].length)){var G$j=G$D;break}G$p=G$w}var G$J=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;G$H.context.font=G$J;var G$q=this.getTextWidth(this._text.substring(G$p,G$T));return(G$l||new G$s).setTo(this._startX+G$q-(this._clipPoint?this._clipPoint.x:0),this._startY+G$j*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},G$Y(0,G$T,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(G$T){G$T!=this._width&&(G$B.superSet(G$zT,this,"width",G$T),this.isChanged=!0)}),G$Y(0,G$T,"textWidth",function(){return this._isChanged&&G$B.timer.runCallLater(this,this.typeset),this._textWidth}),G$Y(0,G$T,"height",function(){return this._height?this._height:this.textHeight},function(G$T){G$T!=this._height&&(G$B.superSet(G$zT,this,"height",G$T),this.isChanged=!0)}),G$Y(0,G$T,"textHeight",function(){return this._isChanged&&G$B.timer.runCallLater(this,this.typeset),this._textHeight}),G$Y(0,G$T,"padding",function(){return this._getCSSStyle().padding},function(G$T){this._getCSSStyle().padding=G$T,this.isChanged=!0}),G$Y(0,G$T,"bold",function(){return this._getCSSStyle().bold},function(G$T){this._getCSSStyle().bold=G$T,this.isChanged=!0}),G$Y(0,G$T,"text",function(){return this._text||""},function(G$T){this._text!==G$T&&(this.lang(G$T+""),this.isChanged=!0,this.event("change"))}),G$Y(0,G$T,"color",function(){return this._getCSSStyle().color},function(G$T){this._getCSSStyle().color!=G$T&&(this._getCSSStyle().color=G$T,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),G$Y(0,G$T,"font",function(){return this._getCSSStyle().fontFamily},function(G$T){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),G$K._bitmapFonts&&G$K._bitmapFonts[G$T]&&(this._currBitmapFont=G$K._bitmapFonts[G$T]),this._getCSSStyle().fontFamily=G$T,this.isChanged=!0}),G$Y(0,G$T,"fontSize",function(){return this._getCSSStyle().fontSize},function(G$T){this._getCSSStyle().fontSize=G$T,this.isChanged=!0}),G$Y(0,G$T,"italic",function(){return this._getCSSStyle().italic},function(G$T){this._getCSSStyle().italic=G$T,this.isChanged=!0}),G$Y(0,G$T,"align",function(){return this._getCSSStyle().align},function(G$T){this._getCSSStyle().align=G$T,this.isChanged=!0}),G$Y(0,G$T,"valign",function(){return this._getCSSStyle().valign},function(G$T){this._getCSSStyle().valign=G$T,this.isChanged=!0}),G$Y(0,G$T,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(G$T){this._getCSSStyle().wordWrap=G$T,this.isChanged=!0}),G$Y(0,G$T,"leading",function(){return this._getCSSStyle().leading},function(G$T){this._getCSSStyle().leading=G$T,this.isChanged=!0}),G$Y(0,G$T,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(G$T){this._getCSSStyle().backgroundColor=G$T,this.isChanged=!0}),G$Y(0,G$T,"borderColor",function(){return this._getCSSStyle().borderColor},function(G$T){this._getCSSStyle().borderColor=G$T,this.isChanged=!0}),G$Y(0,G$T,"stroke",function(){return this._getCSSStyle().stroke},function(G$T){this._getCSSStyle().stroke=G$T,this.isChanged=!0}),G$Y(0,G$T,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(G$T){this._getCSSStyle().strokeColor=G$T,this.isChanged=!0}),G$Y(0,G$T,"isChanged",null,function(G$T){this._isChanged!==G$T&&(this._isChanged=G$T)&&G$B.timer.callLater(this,this.typeset)}),G$Y(0,G$T,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(G$T){if(!(this.overflow!=G$K.SCROLL||this.textWidth<this._width)&&this._clipPoint){G$T=G$T<this.padding[3]?this.padding[3]:G$T;var G$l=this._textWidth-this._width;G$T=G$l<G$T?G$l:G$T;var G$w=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=G$T,this.renderText(this._lastVisibleLineIndex,G$w)}}),G$Y(0,G$T,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(G$T){if(!(this.overflow!=G$K.SCROLL||this.textHeight<this._height)&&this._clipPoint){G$T=G$T<this.padding[0]?this.padding[0]:G$T;var G$l=this._textHeight-this._height,G$w=(G$T=G$l<G$T?G$l:G$T)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=G$w;var G$u=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=G$T,this.renderText(G$w,G$u)}}),G$Y(0,G$T,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),G$Y(0,G$T,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),G$Y(0,G$T,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),G$Y(0,G$T,"underlineColor",function(){return this._underlineColor},function(G$T){this._underlineColor=G$T,this._isChanged=!0,this.typeset()}),G$K.registerBitmapFont=function(G$T,G$l){G$K._bitmapFonts||(G$K._bitmapFonts={}),G$K._bitmapFonts[G$T]=G$l},G$K.unregisterBitmapFont=function(G$T,G$l){if(void 0===G$l&&(G$l=!0),G$K._bitmapFonts&&G$K._bitmapFonts[G$T]){var G$w=G$K._bitmapFonts[G$T];G$l&&G$w.destroy(),delete G$K._bitmapFonts[G$T]}},G$K.setTextRightToLeft=function(){var G$T;(G$T=G$H.canvas.source.style).display="none",G$T.position="absolute",G$T.direction="rtl",G$R._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,G$H.document.body.appendChild(G$H.canvas.source)},G$K.supportFont=function(G$T){G$H.context.font="10px sans-serif";var G$l=G$V.contextMeasureText("abcji").width;G$H.context.font="10px "+G$T;var G$w=G$V.contextMeasureText("abcji").width;return console.log(G$l,G$w),G$l!==G$w},G$K._testWord="游",G$K.langPacks=null,G$K.VISIBLE="visible",G$K.SCROLL="scroll",G$K.HIDDEN="hidden",G$K.CharacterCache=!0,G$K.RightToLeft=!1,G$K._bitmapFonts=null,G$J(G$K,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),G$K}(G$zT),G$LT=function(G$z){function G$P(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",G$P.__super.call(this),this.offset=new G$s,this._canvasTransform=new G$y,this._previousOrientation=G$H.window.orientation;var G$l=this;this.transform=G$y.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var G$T=G$H.window,G$w=this;G$T.addEventListener("focus",function(){G$l._isFocused=!0,G$w.event("focus"),G$w.event("focuschange")}),G$T.addEventListener("blur",function(){G$l._isFocused=!1,G$w.event("blur"),G$w.event("focuschange"),G$w._isInputting()&&(G$cT.inputElement.target.focus=!1)});var G$u="visibilityState",G$p="visibilitychange",G$D=G$T.document;void 0!==G$D.hidden?(G$p="visibilitychange",G$u="visibilityState"):void 0!==G$D.mozHidden?(G$p="mozvisibilitychange",G$u="mozVisibilityState"):void 0!==G$D.msHidden?(G$p="msvisibilitychange",G$u="msVisibilityState"):void 0!==G$D.webkitHidden&&(G$p="webkitvisibilitychange",G$u="webkitVisibilityState"),G$T.document.addEventListener(G$p,function(){"hidden"==G$H.document[G$u]?G$w._setStageVisible(!1):G$w._setStageVisible(!0)}),G$T.document.addEventListener("qbrowserVisibilityChange",function(G$T){G$w._setStageVisible(!G$T.hidden)}),G$T.addEventListener("resize",function(){var G$T=G$H.window.orientation;null!=G$T&&G$T!=G$l._previousOrientation&&G$w._isInputting()&&(G$cT.inputElement.target.focus=!1),G$l._previousOrientation=G$T,G$w._isInputting()||G$w._resetCanvas()}),G$T.addEventListener("orientationchange",function(G$T){G$w._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),G$H.onMobile&&this.on("mousedown",this,this._onmouseMove)}G$M(G$P,"laya.display.Stage",G$z);var G$T=G$P.prototype;return G$T._setStageVisible=function(G$T){this._isVisibility!=G$T&&(this._isVisibility=G$T,this._isVisibility||this._isInputting()&&(G$cT.inputElement.target.focus=!1),this.event("visibilitychange"))},G$T._isInputting=function(){return G$H.onMobile&&G$cT.isInputting},G$T._changeCanvasSize=function(){this.setScreenSize(G$H.clientWidth*G$H.pixelRatio,G$H.clientHeight*G$H.pixelRatio)},G$T._resetCanvas=function(){if(this.screenAdaptationEnabled){var G$T=G$R._mainCanvas;G$T.source.style;G$T.size(1,1),G$B.timer.once(100,this,this._changeCanvasSize)}},G$T.setScreenSize=function(G$T,G$l){var G$w=!1;if("none"!==this._screenMode&&(G$w=(G$T/G$l<1?"vertical":"horizontal")!==this._screenMode)){var G$u=G$l;G$l=G$T,G$T=G$u}this.canvasRotation=G$w;var G$p=G$R._mainCanvas,G$D=G$p.source.style,G$P=this._canvasTransform.identity(),G$j=this._scaleMode,G$J=G$T/this.designWidth,G$q=G$l/this.designHeight,G$M=this.designWidth,G$z=this.designHeight,G$b=G$T,G$K=G$l,G$Y=G$H.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,G$j){case"noscale":G$J=G$q=1,G$b=this.designWidth,G$K=this.designHeight;break;case"showall":G$J=G$q=Math.min(G$J,G$q),G$M=G$b=Math.round(this.designWidth*G$J),G$z=G$K=Math.round(this.designHeight*G$q);break;case"noborder":G$J=G$q=Math.max(G$J,G$q),G$b=Math.round(this.designWidth*G$J),G$K=Math.round(this.designHeight*G$q);break;case"full":G$J=G$q=1,this._width=G$M=G$T,this._height=G$z=G$l;break;case"fixedwidth":G$q=G$J,this._height=G$z=Math.round(G$l/G$J);break;case"fixedheight":G$J=G$q,this._width=G$M=Math.round(G$T/G$q);break;case"fixedauto":G$T/G$l<this.designWidth/this.designHeight?(G$q=G$J,this._height=G$z=Math.round(G$l/G$J)):(G$J=G$q,this._width=G$M=Math.round(G$T/G$q))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,G$M=G$M+1&2147483646,G$z=G$z+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),G$J*=this.scaleX,G$q*=this.scaleY,1===G$J&&1===G$q?this.transform.identity():(this.transform.a=this._formatData(G$J/(G$b/G$M)),this.transform.d=this._formatData(G$q/(G$K/G$z)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),G$p.size(G$M,G$z),G$e.changeWebGLSize(G$M,G$z),G$P.scale(G$b/G$M/G$Y,G$K/G$z/G$Y),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(G$T-G$b)/G$Y:this.offset.x=.5*(G$T-G$b)/G$Y,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(G$l-G$K)/G$Y:this.offset.y=.5*(G$l-G$K)/G$Y,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),G$P.translate(this.offset.x,this.offset.y),this.canvasDegree=0,G$w&&("horizontal"===this._screenMode?(G$P.rotate(Math.PI/2),G$P.translate(G$l/G$Y,0),this.canvasDegree=90):(G$P.rotate(-Math.PI/2),G$P.translate(0,G$T/G$Y),this.canvasDegree=-90)),G$P.a=this._formatData(G$P.a),G$P.d=this._formatData(G$P.d),G$P.tx=this._formatData(G$P.tx),G$P.ty=this._formatData(G$P.ty),G$D.transformOrigin=G$D.webkitTransformOrigin=G$D.msTransformOrigin=G$D.mozTransformOrigin=G$D.oTransformOrigin="0px 0px 0px",G$D.transform=G$D.webkitTransform=G$D.msTransform=G$D.mozTransform=G$D.oTransform="matrix("+G$P.toString()+")",G$P.translate(parseInt(G$D.left)||0,parseInt(G$D.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},G$T._formatData=function(G$T){return Math.abs(G$T)<1e-6?0:Math.abs(1-G$T)<.001?0<G$T?1:-1:G$T},G$T.getMousePoint=function(){return G$s.TEMP.setTo(this.mouseX,this.mouseY)},G$T.repaint=function(){this._repaint=1},G$T.parentRepaint=function(){},G$T._loop=function(){return this.render(G$R.context,0,0),!0},G$T._onmouseMove=function(G$T){this._mouseMoveTime=G$H.now()},G$T.getTimeFromFrameStart=function(){return G$H.now()-this._frameStartTime},G$T.render=function(G$T,G$l,G$w){if("sleep"===this._frameRate&&!G$R.isConchApp){var G$u=G$H.now();if(!(1e3<=G$u-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(G$f.loopCount++,G$t.instance.runEvent(),G$B.timer._update()));this._frameStartTime=G$u}if(this._renderCount++,G$R.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=G$H.now();var G$p="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),G$D=this._renderCount%2==0;if(G$f.renderSlow=!G$p,G$p||G$D||G$R.isConchApp){var G$P;G$f.loopCount++,G$t.instance.runEvent(),G$B.timer._update(),G$e.update3DLoop();var G$j=0,G$J=0;if(G$R.isConchNode)for(G$j=0,G$J=this._scenes.length;G$j<G$J;G$j++)(G$P=this._scenes[G$j])&&G$P._updateSceneConch();else for(G$j=0,G$J=this._scenes.length;G$j<G$J;G$j++)(G$P=this._scenes[G$j])&&G$P._updateScene();if(G$R.isConchNode){var G$q=G$zT.CustomList;for(G$j=0,G$J=G$q.length;G$j<G$J;G$j++){var G$M=G$q[G$j];G$M.customRender(G$M.customContext,0,0)}return}}G$R.isConchNode||this.renderingEnabled&&(G$p||!G$D||G$R.isConchWebGL)&&(G$R.isWebGL?G$R.WebGL.mainContext&&!G$R.WebGL.mainContext.isContextLost()&&(G$T.clear(),G$z.prototype.render.call(this,G$T,G$l,G$w),G$f._show&&G$f._sp&&G$f._sp.render(G$T,G$l,G$w),G$e.clear(this._bgColor),G$e.beginFlush(),G$T.flush(),G$e.endFinish(),G$C.instance&&G$C.getInstance().endDispose()):(G$e.clear(this._bgColor),G$z.prototype.render.call(this,G$T,G$l,G$w),G$f._show&&G$f._sp&&G$f._sp.render(G$T,G$l,G$w)))}else this._renderCount%5==0&&(G$f.loopCount++,G$t.instance.runEvent(),G$B.timer._update())},G$T._requestFullscreen=function(){var G$T=G$H.document.documentElement;G$T.requestFullscreen?G$T.requestFullscreen():G$T.mozRequestFullScreen?G$T.mozRequestFullScreen():G$T.webkitRequestFullscreen?G$T.webkitRequestFullscreen():G$T.msRequestFullscreen&&G$T.msRequestFullscreen()},G$T._fullScreenChanged=function(){G$B.stage.event("fullscreenchange")},G$T.exitFullscreen=function(){var G$T=G$H.document;G$T.exitFullscreen?G$T.exitFullscreen():G$T.mozCancelFullScreen?G$T.mozCancelFullScreen():G$T.webkitExitFullscreen&&G$T.webkitExitFullscreen()},G$Y(0,G$T,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),G$Y(0,G$T,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),G$Y(0,G$T,"frameRate",function(){return this._frameRate},function(G$T){if(this._frameRate=G$T,G$R.isConchApp)switch(this._frameRate){case"slow":G$H.window.conch&&G$H.window.conchConfig.setSlowFrame&&G$H.window.conchConfig.setSlowFrame(!0);break;case"fast":G$H.window.conch&&G$H.window.conchConfig.setSlowFrame&&G$H.window.conchConfig.setSlowFrame(!1);break;case"mouse":G$H.window.conch&&G$H.window.conchConfig.setMouseFrame&&G$H.window.conchConfig.setMouseFrame(2e3);break;case"sleep":G$H.window.conch&&G$H.window.conchConfig.setLimitFPS&&G$H.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),G$Y(0,G$T,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),G$Y(0,G$T,"width",G$z.prototype._$get_width,function(G$T){this.designWidth=G$T,G$B.superSet(G$zT,this,"width",G$T),G$B.timer.callLater(this,this._changeCanvasSize)}),G$Y(0,G$T,"alignH",function(){return this._alignH},function(G$T){this._alignH=G$T,G$B.timer.callLater(this,this._changeCanvasSize)}),G$Y(0,G$T,"isFocused",function(){return this._isFocused}),G$Y(0,G$T,"height",G$z.prototype._$get_height,function(G$T){this.designHeight=G$T,G$B.superSet(G$zT,this,"height",G$T),G$B.timer.callLater(this,this._changeCanvasSize)}),G$Y(0,G$T,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||G$y.create()},G$z.prototype._$set_transform),G$Y(0,G$T,"isVisibility",function(){return this._isVisibility}),G$Y(0,G$T,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),G$Y(0,G$T,"scaleMode",function(){return this._scaleMode},function(G$T){this._scaleMode=G$T,G$B.timer.callLater(this,this._changeCanvasSize)}),G$Y(0,G$T,"alignV",function(){return this._alignV},function(G$T){this._alignV=G$T,G$B.timer.callLater(this,this._changeCanvasSize)}),G$Y(0,G$T,"bgColor",function(){return this._bgColor},function(G$T){this._bgColor=G$T,this.conchModel&&this.conchModel.bgColor(G$T),G$R.isWebGL&&(G$T?G$P._wgColor=G$d.create(G$T)._color:G$H.onMiniGame||(G$P._wgColor=null)),G$H.onLimixiu?G$P._wgColor=G$d.create(G$T)._color:G$R.canvas.style.background=G$T||"none"}),G$Y(0,G$T,"mouseX",function(){return Math.round(G$t.instance.mouseX/this.clientScaleX)}),G$Y(0,G$T,"mouseY",function(){return Math.round(G$t.instance.mouseY/this.clientScaleY)}),G$Y(0,G$T,"screenMode",function(){return this._screenMode},function(G$T){this._screenMode=G$T}),G$Y(0,G$T,"visible",G$z.prototype._$get_visible,function(G$T){this.visible!==G$T&&(G$B.superSet(G$zT,this,"visible",G$T),G$R._mainCanvas.source.style.visibility=G$T?"visible":"hidden")}),G$Y(0,G$T,"fullScreenEnabled",null,function(G$T){var G$l=G$H.document,G$w=G$R.canvas;G$T?(G$w.addEventListener("mousedown",this._requestFullscreen),G$w.addEventListener("touchstart",this._requestFullscreen),G$l.addEventListener("fullscreenchange",this._fullScreenChanged),G$l.addEventListener("mozfullscreenchange",this._fullScreenChanged),G$l.addEventListener("webkitfullscreenchange",this._fullScreenChanged),G$l.addEventListener("msfullscreenchange",this._fullScreenChanged)):(G$w.removeEventListener("mousedown",this._requestFullscreen),G$w.removeEventListener("touchstart",this._requestFullscreen),G$l.removeEventListener("fullscreenchange",this._fullScreenChanged),G$l.removeEventListener("mozfullscreenchange",this._fullScreenChanged),G$l.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),G$l.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),G$P.SCALE_NOSCALE="noscale",G$P.SCALE_EXACTFIT="exactfit",G$P.SCALE_SHOWALL="showall",G$P.SCALE_NOBORDER="noborder",G$P.SCALE_FULL="full",G$P.SCALE_FIXED_WIDTH="fixedwidth",G$P.SCALE_FIXED_HEIGHT="fixedheight",G$P.SCALE_FIXED_AUTO="fixedauto",G$P.ALIGN_LEFT="left",G$P.ALIGN_RIGHT="right",G$P.ALIGN_CENTER="center",G$P.ALIGN_TOP="top",G$P.ALIGN_MIDDLE="middle",G$P.ALIGN_BOTTOM="bottom",G$P.SCREEN_NONE="none",G$P.SCREEN_HORIZONTAL="horizontal",G$P.SCREEN_VERTICAL="vertical",G$P.FRAME_FAST="fast",G$P.FRAME_SLOW="slow",G$P.FRAME_MOUSE="mouse",G$P.FRAME_SLEEP="sleep",G$P.FRAME_MOUSE_THREDHOLD=2e3,G$J(G$P,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),G$P}(G$zT),G$iT=(function(G$T){function G$l(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,G$l.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}G$M(G$l,"laya.media.SoundNode",G$zT);var G$w=G$l.prototype;G$w._onParentChange=function(){this.target=this.parent},G$w.play=function(G$T,G$l){void 0===G$T&&(G$T=1),isNaN(G$T)&&(G$T=1),this.url&&(this.stop(),this._channel=G$o.playSound(this.url,G$T,null,G$l))},G$w.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},G$w._setPlayAction=function(G$T,G$l,G$w,G$u){void 0===G$u&&(G$u=!0),this[G$w]&&G$T&&(G$u?G$T.on(G$l,this,this[G$w]):G$T.off(G$l,this,this[G$w]))},G$w._setPlayActions=function(G$T,G$l,G$w,G$u){if(void 0===G$u&&(G$u=!0),G$T&&G$l){var G$p,G$D=G$l.split(","),G$P=0;for(G$p=G$D.length,G$P=0;G$P<G$p;G$P++)this._setPlayAction(G$T,G$D[G$P],G$w,G$u)}},G$Y(0,G$w,"playEvent",null,function(G$T){(this._playEvents=G$T)&&this._tar&&this._setPlayActions(this._tar,G$T,"play")}),G$Y(0,G$w,"target",null,function(G$T){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=G$T,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),G$Y(0,G$w,"stopEvent",null,function(G$T){(this._stopEvents=G$T)&&this._tar&&this._setPlayActions(this._tar,G$T,"stop")})}(),function(G$T){function G$l(){this._src=null,this._onload=null,this._onerror=null,G$l.__super.call(this)}G$M(G$l,"laya.resource.FileBitmap",G$YT);var G$w=G$l.prototype;return G$Y(0,G$w,"src",function(){return this._src},function(G$T){this._src=G$T}),G$Y(0,G$w,"onload",null,function(G$T){}),G$Y(0,G$w,"onerror",null,function(G$T){}),G$l}()),G$WT=function(G$T){function G$w(G$T,G$l){this._is2D=!1,G$w.__super.call(this);var G$u=this;if(this._source=this,"2D"===G$T||"AUTO"===G$T&&!G$R.isWebGL){this._is2D=!0,this._source=G$l||G$H.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var G$p=this;G$p.getContext=function(G$T,G$l){if(G$u._ctx)return G$u._ctx;var G$w=G$u._ctx=G$u._source.getContext(G$T,G$l);return G$w&&(G$w._canvas=G$p,G$R.isFlash||G$H.onLimixiu||(G$w.size=function(G$T,G$l){})),G$w}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}G$M(G$w,"laya.resource.HTMLCanvas",G$YT);var G$l=G$w.prototype;return G$l.clear=function(){this._ctx&&this._ctx.clear()},G$l.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},G$l.release=function(){},G$l._setContext=function(G$T){this._ctx=G$T},G$l.getContext=function(G$T,G$l){return this._ctx?this._ctx:this._ctx=G$w._createContext(this)},G$l.getMemSize=function(){return 0},G$l.size=function(G$T,G$l){(this._w!=G$T||this._h!=G$l||this._source&&(this._source.width!=G$T||this._source.height!=G$l))&&(this._w=G$T,this._h=G$l,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(G$T,G$l),this._source&&(this._source.height=G$l,this._source.width=G$T))},G$l.getCanvas=function(){return this._source},G$l.toBase64=function(G$T,G$l,G$w){if(this._source)if(G$R.isConchApp&&this._source.toBase64)this._source.toBase64(G$T,G$l,G$w);else{var G$u=this._source.toDataURL(G$T,G$l);G$w.call(this,G$u)}},G$Y(0,G$l,"context",function(){return this._ctx}),G$Y(0,G$l,"asBitmap",null,function(G$T){}),G$w.create=function(G$T,G$l){return new G$w(G$T,G$l)},G$w.TYPE2D="2D",G$w.TYPE3D="3D",G$w.TYPEAUTO="AUTO",G$w._createContext=null,G$w}(),G$mT=(function(G$T){function G$J(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){throw G$J.__super.call(this),new Error("不允许new！")}G$M(G$J,"laya.resource.HTMLSubImage",G$YT),G$J.create=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){return void 0===G$j&&(G$j=!1),new G$J(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j)}}(),function(G$T){function G$z(){this._frames=null,this._url=null,G$z.__super.call(this),this._setControlNode(this)}G$M(G$z,"laya.display.Animation",G$T);var G$l=G$z.prototype;G$l.destroy=function(G$T){void 0===G$T&&(G$T=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,G$T),this._frames=null,this._labels=null},G$l.play=function(G$T,G$l,G$w,G$u){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=!0),void 0===G$w&&(G$w=""),void 0===G$u&&(G$u=!0),G$w&&this._setFramesFromCache(G$w,G$u),this._isPlaying=!0,this.index="string"==typeof G$T?this._getFrameByLabel(G$T):G$T,this.loop=G$l,this._actionName=G$w,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},G$l._setFramesFromCache=function(G$T,G$l){var G$w;return void 0===G$l&&(G$l=!1),this._url&&(G$T=this._url+"#"+G$T),G$T&&G$z.framesMap[G$T]?((G$w=G$z.framesMap[G$T])instanceof Array?(this._frames=G$z.framesMap[G$T],this._count=this._frames.length):(G$w.nodeRoot&&(G$z.framesMap[G$T]=this._parseGraphicAnimationByData(G$w),G$w=G$z.framesMap[G$T]),this._frames=G$w.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=G$w.interval),this._labels=this._copyLabels(G$w.labels)),!0):(G$l&&console.log("ani not found:",G$T),!1)},G$l._copyLabels=function(G$T){if(!G$T)return null;var G$l,G$w;for(G$w in G$l={},G$T)G$l[G$w]=G$V.copyArray([],G$T[G$w]);return G$l},G$l._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&G$T.prototype._frameLoop.call(this)},G$l._displayToIndex=function(G$T){this._frames&&(this.graphics=this._frames[G$T])},G$l.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},G$l.loadImages=function(G$T,G$l){return void 0===G$l&&(G$l=""),this._url="",this._setFramesFromCache(G$l)||(this.frames=G$z.framesMap[G$l]?G$z.framesMap[G$l]:G$z.createFrames(G$T,G$l)),this},G$l.loadAtlas=function(G$l,G$w,G$u){void 0===G$u&&(G$u=""),this._url="";var G$p=this;function G$T(G$T){G$l===G$T&&(G$p.frames=G$z.framesMap[G$u]?G$z.framesMap[G$u]:G$z.createFrames(G$l,G$u),G$w&&G$w.run())}return G$p._setFramesFromCache(G$u)||(G$jT.getAtlas(G$l)?G$T(G$l):G$B.loader.load(G$l,G$i.create(null,G$T,[G$l]),null,"atlas")),this},G$l.loadAnimation=function(G$T,G$l,G$w){this._url=G$T;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,G$l&&G$l.run()):!G$w||G$jT.getAtlas(G$w)?this._loadAnimationData(G$T,G$l,G$w):G$B.loader.load(G$w,G$i.create(this,this._loadAnimationData,[G$T,G$l,G$w]),null,"atlas"),this},G$l._loadAnimationData=function(G$j,G$J,G$T){var G$q=this;if(!G$T||G$jT.getAtlas(G$T)){var G$M=this;G$jT.getRes(G$j)?G$l(G$j):G$B.loader.load(G$j,G$i.create(null,G$l,[G$j]),null,"json"),G$jT.clearRes(G$j)}else console.warn("atlas load fail:"+G$T);function G$l(G$T){if(G$jT.getRes(G$T)&&G$j===G$T){var G$l;if(G$z.framesMap[G$j+"#"])G$M._setFramesFromCache(G$q._actionName,!0),G$q.index=0,G$q._checkResumePlaying();else{var G$w=G$M._parseGraphicAnimation(G$jT.getRes(G$j));if(!G$w)return;var G$u,G$p=G$w.animationList,G$D=0,G$P=G$p.length;for(G$D=0;G$D<G$P;G$D++)G$l=G$p[G$D],G$z.framesMap[G$j+"#"+G$l.name]=G$l,G$u||(G$u=G$l);G$u&&(G$z.framesMap[G$j+"#"]=G$u,G$M._setFramesFromCache(G$q._actionName,!0),G$q.index=0),G$q._checkResumePlaying()}G$J&&G$J.run()}}},G$l._parseGraphicAnimation=function(G$T){return G$BT.parseAnimationData(G$T)},G$l._parseGraphicAnimationByData=function(G$T){return G$BT.parseAnimationByData(G$T)},G$Y(0,G$l,"frames",function(){return this._frames},function(G$T){(this._frames=G$T)&&(this._count=G$T.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),G$Y(0,G$l,"autoPlay",null,function(G$T){G$T?this.play():this.stop()}),G$Y(0,G$l,"source",null,function(G$T){-1<G$T.indexOf(".ani")?this.loadAnimation(G$T):-1<G$T.indexOf(".json")||-1<G$T.indexOf("als")||-1<G$T.indexOf("atlas")?this.loadAtlas(G$T):this.loadImages(G$T.split(","))}),G$Y(0,G$l,"autoAnimation",null,function(G$T){this.play(0,!0,G$T,!1)}),G$z.createFrames=function(G$T,G$l){var G$w,G$u,G$p=0,G$D=0;if("string"==typeof G$T){var G$P=G$jT.getAtlas(G$T);if(G$P&&G$P.length)for(G$w=[],G$p=0,G$D=G$P.length;G$p<G$D;G$p++)(G$u=new G$e.createGraphics).drawTexture(G$jT.getRes(G$P[G$p]),0,0),G$w.push(G$u)}else if(G$T instanceof Array)for(G$w=[],G$p=0,G$D=G$T.length;G$p<G$D;G$p++)(G$u=new G$e.createGraphics).loadImage(G$T[G$p],0,0),G$w.push(G$u);return G$l&&(G$z.framesMap[G$l]=G$w),G$w},G$z.clearCache=function(G$T){var G$l,G$w=G$z.framesMap,G$u=G$T+"#";for(G$l in G$w)G$l!==G$T&&0!=G$l.indexOf(G$u)||delete G$z.framesMap[G$l]},G$z.framesMap={}}(G$tT),function(G$T){function G$D(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,G$D.__super.call(this),null==G$D._sortIndexFun&&(G$D._sortIndexFun=G$a.sortByKey("index",!1,!0))}G$M(G$D,"laya.display.FrameAnimation",G$T);var G$l=G$D.prototype;return G$l._setUp=function(G$T,G$l){this._labels=null,this._animationNewFrames=null,this._targetDic=G$T,this._animationData=G$l,this.interval=1e3/G$l.frameRate,G$l.parsed?(this._count=G$l.count,this._labels=G$l.labels,this._animationNewFrames=G$l.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),G$l.parsed=!0,G$l.labels=this._labels,G$l.count=this._count,G$l.animationNewFrames=this._animationNewFrames},G$l.clear=function(){G$T.prototype.clear.call(this),this._targetDic=null,this._animationData=null},G$l._displayToIndex=function(G$T){if(this._animationData){G$T<0&&(G$T=0),G$T>this._count&&(G$T=this._count);var G$l=this._animationData.nodes,G$w=0,G$u=G$l.length;for(G$w=0;G$w<G$u;G$w++)this._displayNodeToFrame(G$l[G$w],G$T)}},G$l._displayNodeToFrame=function(G$T,G$l,G$w){G$w||(G$w=this._targetDic);var G$u=G$w[G$T.target];if(G$u){var G$p,G$D,G$P,G$j=G$T.frames,G$J=G$T.keys,G$q=0,G$M=G$J.length;for(G$q=0;G$q<G$M;G$q++)G$P=(G$D=G$j[G$p=G$J[G$q]]).length>G$l?G$D[G$l]:G$D[G$D.length-1],G$u[G$p]=G$P}},G$l._calculateDatas=function(){if(this._animationData){var G$T,G$l=this._animationData.nodes,G$w=0,G$u=G$l.length;for(G$w=this._count=0;G$w<G$u;G$w++)G$T=G$l[G$w],this._calculateNodeKeyFrames(G$T);this._count+=1}},G$l._calculateNodeKeyFrames=function(G$T){var G$l,G$w,G$u=G$T.keyframes,G$p=G$T.target;for(G$l in G$T.frames||(G$T.frames={}),G$T.keys?G$T.keys.length=0:G$T.keys=[],G$T.initValues||(G$T.initValues={}),G$u)G$w=G$u[G$l],G$T.frames[G$l]||(G$T.frames[G$l]=[]),this._targetDic&&this._targetDic[G$p]&&(G$T.initValues[G$l]=this._targetDic[G$p][G$l]),G$w.sort(G$D._sortIndexFun),G$T.keys.push(G$l),this._calculateNodePropFrames(G$w,G$T.frames[G$l],G$l,G$p)},G$l.resetToInitState=function(){if(this._targetDic&&this._animationData){var G$T,G$l,G$w=this._animationData.nodes,G$u=0,G$p=G$w.length;for(G$u=0;G$u<G$p;G$u++)if(G$l=(G$T=G$w[G$u]).initValues){var G$D,G$P=this._targetDic[G$T.target];if(G$P)for(G$D in G$l)G$P[G$D]=G$l[G$D]}}},G$l._calculateNodePropFrames=function(G$T,G$l,G$w,G$u){var G$p=0,G$D=G$T.length-1;if(0<G$D){for(G$l.length=G$T[G$D].index+1,G$p=0;G$p<G$D;G$p++)this._dealKeyFrame(G$T[G$p]),this._calculateFrameValues(G$T[G$p],G$T[G$p+1],G$l);this._dealKeyFrame(G$T[G$p])}0==G$D&&(G$l[G$T[0].index]=G$T[0].value,this._animationNewFrames&&(this._animationNewFrames[G$T[0].index]=!0))},G$l._dealKeyFrame=function(G$T){G$T.label&&""!=G$T.label&&this.addLabel(G$T.label,G$T.index)},G$l._calculateFrameValues=function(G$T,G$l,G$w){var G$u,G$p=0,G$D=G$T.index,G$P=G$l.index,G$j=G$T.value,G$J=G$l.value-G$T.value,G$q=G$P-G$D;if(G$P>this._count&&(this._count=G$P),G$T.tween)for(null==(G$u=G$N[G$T.tweenMethod])&&(G$u=G$N.linearNone),G$p=G$D;G$p<G$P;G$p++)G$w[G$p]=G$u(G$p-G$D,G$j,G$J,G$q),this._animationNewFrames&&(this._animationNewFrames[G$p]=!0);else for(G$p=G$D;G$p<G$P;G$p++)G$w[G$p]=G$j;this._animationNewFrames&&(this._animationNewFrames[G$T.index]=!0,this._animationNewFrames[G$l.index]=!0),G$w[G$l.index]=G$l.value},G$D._sortIndexFun=null,G$D}(G$tT)),G$cT=function(G$l){function G$p(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",G$p.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=G$AT.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}G$M(G$p,"laya.display.Input",G$l);var G$T=G$p.prototype;return G$T.setSelection=function(G$T,G$l){this.focus=!0,laya.display.Input.inputElement.selectionStart=G$T,laya.display.Input.inputElement.selectionEnd=G$l},G$T._onUnDisplay=function(G$T){this.focus=!1},G$T._onMouseDown=function(G$T){this.focus=!0},G$T._syncInputTransform=function(){var G$T=this.nativeInput,G$l=G$V.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),G$w=this._width-this.padding[1]-this.padding[3],G$u=this._height-this.padding[0]-this.padding[2];G$R.isConchApp?(G$T.setScale(G$l.scaleX,G$l.scaleY),G$T.setSize(G$w,G$u),G$T.setPos(G$l.x,G$l.y)):(G$p.inputContainer.style.transform=G$p.inputContainer.style.webkitTransform="scale("+G$l.scaleX+","+G$l.scaleY+") rotate("+G$B.stage.canvasDegree+"deg)",G$T.style.width=G$w+"px",G$T.style.height=G$u+"px",G$p.inputContainer.style.left=G$l.x+"px",G$p.inputContainer.style.top=G$l.y+"px")},G$T.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},G$T._setInputMethod=function(){G$p.input.parentElement&&G$p.inputContainer.removeChild(G$p.input),G$p.area.parentElement&&G$p.inputContainer.removeChild(G$p.area),G$p.inputElement=this._multiline?G$p.area:G$p.input,G$p.inputContainer.appendChild(G$p.inputElement),G$AT.RightToLeft&&(G$p.inputElement.style.direction="rtl")},G$T._focusIn=function(){laya.display.Input.isInputting=!0;var G$T=this.nativeInput;this._focus=!0;var G$l=G$T.style;G$l.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),G$T.readOnly=!this._editable,G$R.isConchApp&&(G$T.setType(this._type),G$T.setForbidEdit(!this._editable)),G$T.maxLength=this._maxChars;this.padding;if(G$T.type=this._type,G$T.value=this._content,G$T.placeholder=this._prompt,G$B.stage.off("keydown",this,this._onKeyDown),G$B.stage.on("keydown",this,this._onKeyDown),(G$B.stage.focus=this).event("focus"),G$H.onPC&&G$T.focus(),!G$H.onMiniGame){this._text;this._text=null}this.typeset(),G$T.setColor(this._originColor),G$T.setFontSize(this.fontSize),G$T.setFontFace(G$H.onIPhone&&G$AT._fontFamilyMap[this.font]||this.font),G$R.isConchApp&&G$T.setMultiAble&&G$T.setMultiAble(this._multiline),G$l.lineHeight=this.leading+this.fontSize+"px",G$l.fontStyle=this.italic?"italic":"normal",G$l.fontWeight=this.bold?"bold":"normal",G$l.textAlign=this.align,G$l.padding="0 0",this._syncInputTransform(),!G$R.isConchApp&&G$H.onPC&&G$B.timer.frameLoop(1,this,this._syncInputTransform)},G$T._setPromptColor=function(){(G$p.promptStyleDOM=G$H.getElementById("promptStyle"))||((G$p.promptStyleDOM=G$H.createElement("style")).setAttribute("id","promptStyle"),G$H.document.head.appendChild(G$p.promptStyleDOM)),G$p.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},G$T._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(G$B.superSet(G$AT,this,"text",this._content),G$B.superSet(G$AT,this,"color",this._originColor)):(G$B.superSet(G$AT,this,"text",this._prompt),G$B.superSet(G$AT,this,"color",this._promptColor)),G$B.stage.off("keydown",this,this._onKeyDown),G$B.stage.focus=null,this.event("blur"),G$R.isConchApp&&this.nativeInput.blur(),G$H.onPC&&G$B.timer.clear(this,this._syncInputTransform)},G$T._onKeyDown=function(G$T){13===G$T.keyCode&&(G$H.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},G$T.changeText=function(G$T){this._content=G$T,this._focus?(this.nativeInput.value=G$T||"",this.event("change")):G$l.prototype.changeText.call(this,G$T)},G$Y(0,G$T,"color",G$l.prototype._$get_color,function(G$T){this._focus&&this.nativeInput.setColor(G$T),G$B.superSet(G$AT,this,"color",this._content?G$T:this._promptColor),this._originColor=G$T}),G$Y(0,G$T,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(G$T){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),G$Y(0,G$T,"multiline",function(){return this._multiline},function(G$T){this._multiline=G$T,this.valign=G$T?"top":"middle"}),G$Y(0,G$T,"maxChars",function(){return this._maxChars},function(G$T){G$T<=0&&(G$T=1e5),this._maxChars=G$T}),G$Y(0,G$T,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(G$T){G$B.superSet(G$AT,this,"color",this._originColor),G$T+="",this._focus?(this.nativeInput.value=G$T||"",this.event("change")):(this._multiline||(G$T=G$T.replace(/\r?\n/g,"")),(this._content=G$T)?G$B.superSet(G$AT,this,"text",G$T):(G$B.superSet(G$AT,this,"text",this._prompt),G$B.superSet(G$AT,this,"color",this.promptColor)))}),G$Y(0,G$T,"nativeInput",function(){return this._multiline?G$p.area:G$p.input}),G$Y(0,G$T,"prompt",function(){return this._prompt},function(G$T){!this._text&&G$T&&G$B.superSet(G$AT,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?G$B.superSet(G$AT,this,"text",this._text==this._prompt?G$T:this._text):G$B.superSet(G$AT,this,"text",G$T),this._prompt=G$AT.langPacks&&G$AT.langPacks[G$T]?G$AT.langPacks[G$T]:G$T}),G$Y(0,G$T,"focus",function(){return this._focus},function(G$T){var G$l=this.nativeInput;this._focus!==G$T&&(G$T?(G$l.target?G$l.target._focusOut():this._setInputMethod(),(G$l.target=this)._focusIn()):(G$l.target=null,this._focusOut(),G$H.document.body.scrollTop=0,G$l.blur(),G$R.isConchApp?G$l.setPos(-1e4,-1e4):G$p.inputContainer.contains(G$l)&&G$p.inputContainer.removeChild(G$l)))}),G$Y(0,G$T,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(G$T){G$T?(-1<(G$T="[^"+G$T+"]").indexOf("^^")&&(G$T=G$T.replace("^^","")),this._restrictPattern=new RegExp(G$T,"g")):this._restrictPattern=null}),G$Y(0,G$T,"editable",function(){return this._editable},function(G$T){this._editable=G$T,G$R.isConchApp&&G$p.input.setForbidEdit(!G$T)}),G$Y(0,G$T,"promptColor",function(){return this._promptColor},function(G$T){this._promptColor=G$T,this._content||G$B.superSet(G$AT,this,"color",G$T)}),G$Y(0,G$T,"type",function(){return this._type},function(G$T){this._getCSSStyle().password="password"==G$T,this._type=G$T,G$R.isConchApp&&this.nativeInput.setType(G$T)}),G$Y(0,G$T,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(G$T){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),G$Y(0,G$T,"asPassword",function(){return this._getCSSStyle().password},function(G$T){this._getCSSStyle().password=G$T,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),G$p.__init__=function(){G$p._createInputElement(),G$H.onMobile&&G$R.canvas.addEventListener(G$p.IOS_IFRAME?G$H.onMiniGame?"touchend":"click":"touchend",G$p._popupInputMethod)},G$p._popupInputMethod=function(G$T){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},G$p._createInputElement=function(){G$p._initInput(G$p.area=G$H.createElement("textarea")),G$p._initInput(G$p.input=G$H.createElement("input")),(G$p.inputContainer=G$H.createElement("div")).style.position="absolute",G$p.inputContainer.style.zIndex=1e5,G$H.container.appendChild(G$p.inputContainer),G$p.inputContainer.setPos=function(G$T,G$l){G$p.inputContainer.style.left=G$T+"px",G$p.inputContainer.style.top=G$l+"px"}},G$p._initInput=function(G$l){var G$T=G$l.style;G$T.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",G$T.resize="none",G$T.backgroundColor="transparent",G$T.border="none",G$T.outline="none",G$T.zIndex=1,G$l.addEventListener("input",G$p._processInputting),G$l.addEventListener("mousemove",G$p._stopEvent),G$l.addEventListener("mousedown",G$p._stopEvent),G$l.addEventListener("touchmove",G$p._stopEvent),G$l.setFontFace=function(G$T){G$l.style.fontFamily=G$T},G$R.isConchApp||(G$l.setColor=function(G$T){G$l.style.color=G$T},G$l.setFontSize=function(G$T){G$l.style.fontSize=G$T+"px"})},G$p._processInputting=function(G$T){var G$l=laya.display.Input.inputElement.target;if(G$l){var G$w=laya.display.Input.inputElement.value;G$l._restrictPattern&&(G$w=G$w.replace(/\u2006|\x27/g,""),G$l._restrictPattern.test(G$w)&&(G$w=G$w.replace(G$l._restrictPattern,""),laya.display.Input.inputElement.value=G$w)),G$l._text=G$w,G$l.event("input")}},G$p._stopEvent=function(G$T){"touchmove"==G$T.type&&G$T.preventDefault(),G$T.stopPropagation&&G$T.stopPropagation()},G$p.TYPE_TEXT="text",G$p.TYPE_PASSWORD="password",G$p.TYPE_EMAIL="email",G$p.TYPE_URL="url",G$p.TYPE_NUMBER="number",G$p.TYPE_RANGE="range",G$p.TYPE_DATE="date",G$p.TYPE_MONTH="month",G$p.TYPE_WEEK="week",G$p.TYPE_TIME="time",G$p.TYPE_DATE_TIME="datetime",G$p.TYPE_DATE_TIME_LOCAL="datetime-local",G$p.TYPE_SEARCH="search",G$p.input=null,G$p.area=null,G$p.inputElement=null,G$p.inputContainer=null,G$p.confirmButton=null,G$p.promptStyleDOM=null,G$p.inputHeight=45,G$p.isInputting=!1,G$p.stageMatrix=null,G$J(G$p,["IOS_IFRAME",function(){return this.IOS_IFRAME=G$H.onIOS&&G$H.window.top!=G$H.window.self}]),G$p}(G$AT),G$aT=function(G$T){function G$w(G$T,G$l){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,G$w.__super.call(this),G$T&&this._init_(G$T,G$l)}G$M(G$w,"laya.resource.HTMLImage",G$iT);var G$l=G$w.prototype;return G$l._init_=function(G$T,G$l){this._src=G$T,this._source=new G$H.window.Image,G$l&&(G$l.onload&&(this.onload=G$l.onload),G$l.onerror&&(this.onerror=G$l.onerror),G$l.onCreate&&G$l.onCreate(this)),0!=G$T.indexOf("data:image")&&(this._source.crossOrigin=""),G$T&&(this._source.src=G$T)},G$l.recreateResource=function(){var G$T=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var G$l=this;this._source=new G$H.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(G$l._needReleaseAgain)return G$l._needReleaseAgain=!1,G$l._source.onload=null,void(G$l._source=null);G$l._source.onload=null,G$l.memorySize=G$T._w*G$T._h*4,G$l._recreateLock=!1,G$l.completeCreate()},this._source.src=this._src}},G$l.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},G$l.onresize=function(){this._w=this._source.width,this._h=this._source.height},G$Y(0,G$l,"onload",null,function(G$T){var G$l=this;this._onload=G$T,this._source&&(this._source.onload=null!=this._onload?function(){G$l.onresize(),G$l._onload()}:null)}),G$Y(0,G$l,"onerror",null,function(G$T){var G$l=this;this._onerror=G$T,this._source&&(this._source.onerror=null!=this._onerror?function(){G$l._onerror()}:null)}),G$Y(0,G$l,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(G$T){this._enableMerageInAtlas=G$T,G$R.isConchApp&&this._source&&(this._source.enableMerageInAtlas=G$T)}),G$w.create=function(G$T,G$l){return new G$w(G$T,G$l)},G$w}(),G$BT=(function(G$D){function G$T(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,G$T.__super.call(this)}G$M(G$T,"laya.display.EffectAnimation",G$D);var G$l=G$T.prototype;G$l._onOtherBegin=function(G$T){G$T!=this&&this.stop()},G$l.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},G$l._onPlayAction=function(){this.play(0,!1)},G$l.play=function(G$T,G$l,G$w,G$u){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=!0),void 0===G$w&&(G$w=""),void 0===G$u&&(G$u=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,G$T,G$l,G$w,G$u))},G$l._recordInitData=function(){if(this._aniKeys){var G$T,G$l,G$w=0;for(G$T=this._aniKeys.length,G$w=0;G$w<G$T;G$w++)G$l=this._aniKeys[G$w],this._initData[G$l]=this._target[G$l]}},G$l._displayToIndex=function(G$T){if(this._animationData){G$T<0&&(G$T=0),G$T>this._count&&(G$T=this._count);var G$l=this._animationData.nodes,G$w=0,G$u=G$l.length;for(G$u=1<G$u?1:G$u,G$w=0;G$w<G$u;G$w++)this._displayNodeToFrame(G$l[G$w],G$T)}},G$l._displayNodeToFrame=function(G$T,G$l,G$w){if(this._target){var G$u;G$u=this._target;var G$p,G$D,G$P,G$j,G$J=G$T.frames,G$q=G$T.keys,G$M=0,G$z=G$q.length;G$j=G$T.secondFrames;var G$b,G$K,G$Y,G$t,G$A=0;for(G$M=0;G$M<G$z;G$M++)G$D=G$J[G$p=G$q[G$M]],G$P=-1==(G$A=G$j[G$p])?this._initData[G$p]:G$l<G$A?(G$Y=(G$K=G$T.keyframes[G$p])[0]).tween?(null==(G$b=G$N[G$Y.tweenMethod])&&(G$b=G$N.linearNone),G$t=G$K[1],G$b(G$l,this._initData[G$p],G$t.value-this._initData[G$p],G$t.index)):this._initData[G$p]:G$D.length>G$l?G$D[G$l]:G$D[G$D.length-1],G$u[G$p]=G$P}},G$l._calculateNodeKeyFrames=function(G$T){G$D.prototype._calculateNodeKeyFrames.call(this,G$T);var G$l,G$w,G$u,G$p=G$T.keyframes;G$T.target;for(G$l in G$u={},G$T.secondFrames=G$u,G$p)(G$w=G$p[G$l]).length<=1?G$u[G$l]=-1:G$u[G$l]=G$w[1].index},G$Y(0,G$l,"target",function(){return this._target},function(G$T){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=G$T,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),G$Y(0,G$l,"playEvent",null,function(G$T){(this._playEvents=G$T)&&this.addEvent()}),G$Y(0,G$l,"effectData",null,function(G$T){var G$l;G$T&&((G$l=G$T.animations)&&G$l[0]&&(this._setUp({},G$l[0]),G$l[0].nodes&&G$l[0].nodes[0]&&(this._aniKeys=G$l[0].nodes[0].keys)))}),G$Y(0,G$l,"effectClass",null,function(G$T){var G$l,G$w;(this._effectClass=G$n.getClass(G$T),this._effectClass)&&((G$l=this._effectClass.uiView)&&(G$w=G$l.animations)&&G$w[0]&&(this._setUp({},G$w[0]),G$w[0].nodes&&G$w[0].nodes[0]&&(this._aniKeys=G$w[0].nodes[0].keys)))}),G$T.EffectAnimationBegin="effectanimationbegin"}(G$mT),function(G$l){var G$Q;function G$o(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,G$o.__super.call(this)}G$M(G$o,"laya.utils.GraphicAnimation",G$l);var G$T=G$o.prototype;return G$T._parseNodeList=function(G$T){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[G$T.compId]=G$T.props,G$T.compId&&this._nodeList.push(G$T.compId);var G$l=G$T.child;if(G$l){var G$w=0,G$u=G$l.length;for(G$w=0;G$w<G$u;G$w++)this._parseNodeList(G$l[G$w])}},G$T._calGraphicData=function(G$T){var G$l;if(this._setUp(null,G$T),this._createGraphicData(),this._nodeIDAniDic)for(G$l in this._nodeIDAniDic)this._nodeIDAniDic[G$l]=null},G$T._createGraphicData=function(){var G$T,G$l=[],G$w=0,G$u=this.count,G$p=this._animationNewFrames;for(G$p||(G$p=[]),G$w=0;G$w<G$u;G$w++)!G$p[G$w]&&G$T||(G$T=this._createFrameGraphic(G$w)),G$l.push(G$T);this._gList=G$l},G$T._createFrameGraphic=function(G$T){var G$l=G$e.createGraphics();return G$o._rootMatrix||(G$o._rootMatrix=new G$y),this._updateNodeGraphic(this._rootNode,G$T,G$o._rootMatrix,G$l),G$l},G$T._updateNodeGraphic=function(G$T,G$l,G$w,G$u,G$p){var G$D;void 0===G$p&&(G$p=1);var G$P,G$j,G$J,G$q=(G$D=this._nodeGDic[G$T.compId]=this._getNodeGraphicData(G$T.compId,G$l,this._nodeGDic[G$T.compId])).alpha*G$p;if(!(G$q<.01)&&(G$D.resultTransform||(G$D.resultTransform=G$y.create()),G$P=G$D.resultTransform,G$y.mul(G$D.transform,G$w,G$P),G$D.skin&&(G$j=this._getTextureByUrl(G$D.skin))&&(G$P._checkTransform()?(G$u.drawTexture(G$j,0,0,G$D.width,G$D.height,G$P,G$q),G$D.resultTransform=null):G$u.drawTexture(G$j,G$P.tx,G$P.ty,G$D.width,G$D.height,null,G$q)),G$J=G$T.child)){var G$M,G$z=0;for(G$M=G$J.length,G$z=0;G$z<G$M;G$z++)this._updateNodeGraphic(G$J[G$z],G$l,G$P,G$u,G$q)}},G$T._updateNoChilds=function(G$T,G$l){if(G$T.skin){var G$w=this._getTextureByUrl(G$T.skin);if(G$w){var G$u=G$T.transform;G$u._checkTransform();!G$u.bTransform?G$l.drawTexture(G$w,G$u.tx,G$u.ty,G$T.width,G$T.height,null,G$T.alpha):G$l.drawTexture(G$w,0,0,G$T.width,G$T.height,G$u.clone(),G$T.alpha)}}},G$T._updateNodeGraphic2=function(G$T,G$l,G$w){var G$u;if(G$u=this._nodeGDic[G$T.compId]=this._getNodeGraphicData(G$T.compId,G$l,this._nodeGDic[G$T.compId]),G$T.child){var G$p=G$u.transform;G$p._checkTransform();var G$D,G$P;G$P=(G$D=!G$p.bTransform)&&(0!=G$p.tx||0!=G$p.ty);var G$j,G$J,G$q;if((G$j=G$p.bTransform||1!=G$u.alpha)&&G$w.save(),1!=G$u.alpha&&G$w.alpha(G$u.alpha),G$D?G$P&&G$w.translate(G$p.tx,G$p.ty):G$w.transform(G$p.clone()),G$J=G$T.child,G$u.skin&&(G$q=this._getTextureByUrl(G$u.skin))&&G$w.drawTexture(G$q,0,0,G$u.width,G$u.height),G$J){var G$M,G$z=0;for(G$M=G$J.length,G$z=0;G$z<G$M;G$z++)this._updateNodeGraphic2(G$J[G$z],G$l,G$w)}G$j?G$w.restore():G$D?G$P&&G$w.translate(-G$p.tx,-G$p.ty):G$w.transform(G$p.clone().invert())}else this._updateNoChilds(G$u,G$w)},G$T._calculateNodeKeyFrames=function(G$T){G$l.prototype._calculateNodeKeyFrames.call(this,G$T),this._nodeIDAniDic[G$T.target]=G$T},G$T.getNodeDataByID=function(G$T){return this._nodeIDAniDic[G$T]},G$T._getParams=function(G$T,G$l,G$w,G$u){var G$p=G$o._temParam;G$p.length=G$l.length;var G$D=0,G$P=G$l.length;for(G$D=0;G$D<G$P;G$D++)G$p[G$D]=this._getObjVar(G$T,G$l[G$D][0],G$w,G$l[G$D][1],G$u);return G$p},G$T._getObjVar=function(G$T,G$l,G$w,G$u,G$p){if(G$T.hasOwnProperty(G$l)){var G$D=G$T[G$l];if(G$w>=G$D.length&&(G$w=G$D.length-1),null!=G$T[G$l][G$w])return G$T[G$l][G$w]}return G$p.hasOwnProperty(G$l)?G$p[G$l]:G$u},G$T._getNodeGraphicData=function(G$T,G$l,G$w){G$w||(G$w=G$Q.create()),G$w.transform?G$w.transform.identity():G$w.transform=G$y.create();var G$u=this.getNodeDataByID(G$T);if(!G$u)return G$w;var G$p,G$D,G$P=G$u.frames,G$j=this._getParams(G$P,G$o._drawTextureCmd,G$l,this._nodeDefaultProps[G$T]),G$J=G$j[0],G$q=NaN,G$M=NaN,G$z=G$j[5],G$b=G$j[6],G$K=G$j[13],G$Y=G$j[14],G$t=G$j[7],G$A=G$j[8],G$L=G$j[9],G$i=G$j[11],G$W=G$j[12];G$q=G$j[3],G$M=G$j[4],0!=G$q&&0!=G$M||(G$J=null),-1==G$q&&(G$q=0),-1==G$M&&(G$M=0),G$w.skin=G$J,G$w.width=G$q,G$w.height=G$M,G$J&&((G$p=this._getTextureByUrl(G$J))?(G$q||(G$q=G$p.sourceWidth),G$M||(G$M=G$p.sourceHeight)):console.warn("lost skin:",G$J,",you may load pics first")),G$w.alpha=G$j[10],G$D=G$w.transform,0!=G$K&&(G$z=G$K*G$q),0!=G$Y&&(G$b=G$Y*G$M),0==G$z&&0==G$b||G$D.translate(-G$z,-G$b);var G$m=null;if(G$L||1!==G$t||1!==G$A||G$i||G$W){(G$m=G$o._tempMt).identity(),G$m.bTransform=!0;var G$c=.0174532922222222*(G$L-G$i),G$a=.0174532922222222*(G$L+G$W),G$B=Math.cos(G$a),G$s=Math.sin(G$a),G$r=Math.sin(G$c),G$I=Math.cos(G$c);G$m.a=G$t*G$B,G$m.b=G$t*G$s,G$m.c=-G$A*G$r,G$m.d=G$A*G$I,G$m.tx=G$m.ty=0}return G$m&&(G$D=G$y.mul(G$D,G$m,G$D)),G$D.translate(G$j[1],G$j[2]),G$w},G$T._getTextureByUrl=function(G$T){return G$jT.getRes(G$T)},G$T.setAniData=function(G$T,G$l){if(G$T.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=G$T,this._parseNodeList(G$T);var G$w,G$u={},G$p=[],G$D=G$T.animations,G$P=0,G$j=G$D.length;for(G$P=0;G$P<G$j;G$P++)if(G$w=G$D[G$P],this._labels=null,(!G$l||G$l==G$w.name)&&G$w){try{this._calGraphicData(G$w)}catch(G$T){console.warn("parse animation fail:"+G$w.name+",empty animation created"),this._gList=[]}var G$J={};G$J.interval=1e3/G$w.frameRate,G$J.frames=this._gList,G$J.labels=this._labels,G$J.name=G$w.name,G$p.push(G$J),G$u[G$w.name]=G$J}this.animationList=G$p,this.animationDic=G$u}G$o._temParam.length=0},G$T.parseByData=function(G$T){var G$l,G$w;G$l=G$T.nodeRoot,G$w=G$T.aniO,delete G$T.nodeRoot,delete G$T.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=G$l,this._parseNodeList(G$l),this._labels=null;try{this._calGraphicData(G$w)}catch(G$T){console.warn("parse animation fail:"+G$w.name+",empty animation created"),this._gList=[]}var G$u=G$T;return G$u.interval=1e3/G$w.frameRate,G$u.frames=this._gList,G$u.labels=this._labels,G$u.name=G$w.name,G$u},G$T.setUpAniData=function(G$T){if(G$T.animations){var G$l,G$w={},G$u=[],G$p=G$T.animations,G$D=0,G$P=G$p.length;for(G$D=0;G$D<G$P;G$D++)if(G$l=G$p[G$D]){var G$j={};G$j.name=G$l.name,G$j.aniO=G$l,G$j.nodeRoot=G$T,G$u.push(G$j),G$w[G$l.name]=G$j}this.animationList=G$u,this.animationDic=G$w}},G$T._clear=function(){var G$T,G$l;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(G$T in this._nodeGDic)(G$l=this._nodeGDic[G$T])&&G$l.recover();this._nodeGDic=null},G$o.parseAnimationByData=function(G$T){var G$l;return G$o._I||(G$o._I=new G$o),G$l=G$o._I.parseByData(G$T),G$o._I._clear(),G$l},G$o.parseAnimationData=function(G$T){var G$l;return G$o._I||(G$o._I=new G$o),G$o._I.setUpAniData(G$T),(G$l={}).animationList=G$o._I.animationList,G$l.animationDic=G$o._I.animationDic,G$o._I._clear(),G$l},G$o._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],G$o._temParam=[],G$o._I=null,G$o._rootMatrix=null,G$J(G$o,["_tempMt",function(){return this._tempMt=new G$y}]),G$o.__init$=function(){G$Q=function(){function G$T(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return G$M(G$T,""),G$T.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),G$g.recover("GraphicNode",this)},G$T.create=function(){return G$g.getItemByClass("GraphicNode",G$T)},G$T}()},G$o}(G$mT));G$B.__init([G$q,G$JT,G$R,G$H,G$U,G$I,G$T,G$BT])}(window,document,Laya),function(G$T,G$l,G$w){G$w.un,G$w.uns,G$w.static;var G$u=G$w.class;G$w.getset,G$w.__newvec;new(function(){function G$T(){}return G$u(G$T,"LayaMain"),G$T}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$T,G$l){"use strict";for(var G$w in Object.defineProperty(G$l,"__esModule",{value:!0}),Laya){var G$u=Laya[G$w];G$u&&G$u.__isclass&&(G$l[G$w]=G$u)}}),function(G$T,G$l,G$a){G$a.un,G$a.uns;var G$P=G$a.static,G$b=G$a.class,G$u=G$a.getset,G$D=G$a.__newvec,G$M=laya.maths.Arith,G$z=laya.maths.Bezier,G$w=laya.resource.Bitmap,G$K=laya.utils.Browser,G$J=laya.utils.Byte,G$Y=laya.utils.Color,G$B=(laya.filters.ColorFilter,G$a.Config),G$p=laya.resource.Context,G$s=(laya.events.Event,laya.filters.Filter),G$j=laya.display.Graphics,G$q=laya.resource.HTMLCanvas,G$t=(laya.utils.HTMLChar,laya.resource.HTMLImage),G$A=laya.resource.HTMLSubImage,G$r=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),G$I=laya.maths.Point,G$Q=laya.maths.Rectangle,G$L=laya.renders.Render,G$i=(laya.renders.RenderContext,laya.renders.RenderSprite),G$W=laya.resource.Resource,G$m=laya.resource.ResourceManager,G$c=laya.utils.RunDriver,G$o=laya.display.Sprite,G$e=laya.display.Stage,G$y=laya.utils.Stat,G$v=laya.utils.StringKey,G$x=(laya.display.css.Style,laya.system.System),G$R=laya.display.Text,G$F=laya.resource.Texture,G$O=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),G$$=laya.utils.VectorGraphManager;laya.utils.WordText;G$a.interface("laya.webgl.shapes.IShape"),G$a.interface("laya.webgl.submit.ISubmit"),G$a.interface("laya.webgl.text.ICharSegment"),G$a.interface("laya.webgl.canvas.save.ISaveData"),G$a.interface("laya.webgl.resource.IMergeAtlasBitmap"),G$a.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var G$Z=function(){function G$T(){}G$b(G$T,"laya.filters.webgl.FilterActionGL");var G$l=G$T.prototype;return G$a.imps(G$l,{"laya.filters.IFilterActionGL":!0}),G$l.setValue=function(G$T){},G$l.setValueMix=function(G$T){},G$l.apply3d=function(G$T,G$l,G$w,G$u,G$p){return null},G$l.apply=function(G$T){return null},G$u(0,G$l,"typeMix",function(){return 0}),G$T}(),G$H=function(){function G$T(){}return G$b(G$T,"laya.webgl.shader.ShaderValue"),G$T}(),G$X=function(){var G$u,G$p;function G$T(G$T,G$l,G$w){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new G$p,void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),this._cells=null,this._rowInfo=null,this._init(G$T,G$l),this._atlasID=G$w}G$b(G$T,"laya.webgl.atlas.AtlasGrid");var G$l=G$T.prototype;return G$l.getAltasID=function(){return this._atlasID},G$l.setAltasID=function(G$T){0<=G$T&&(this._atlasID=G$T)},G$l.addTex=function(G$T,G$l,G$w){var G$u=this._get(G$l,G$w);return 0==G$u.ret||(this._fill(G$u.x,G$u.y,G$l,G$w,G$T),this._texCount++),G$u},G$l._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},G$l._init=function(G$T,G$l){if(this._width=G$T,this._height=G$l,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=G$D(this._height);for(var G$w=0;G$w<this._height;G$w++)this._rowInfo[G$w]=new G$u;return this._clear(),!0},G$l._get=function(G$T,G$l){var G$w=new G$n;if(G$T>=this._failSize.width&&G$l>=this._failSize.height)return G$w;for(var G$u=-1,G$p=-1,G$D=this._width,G$P=this._height,G$j=this._cells,G$J=0;G$J<G$P;G$J++)if(!(this._rowInfo[G$J].spaceCount<G$T))for(var G$q=0;G$q<G$D;){var G$M=3*(G$J*G$D+G$q);if(0!=G$j[G$M]||G$j[1+G$M]<G$T||G$j[2+G$M]<G$l)G$q+=G$j[1+G$M];else{G$u=G$q,G$p=G$J;for(var G$z=0;G$z<G$T;G$z++)if(G$j[3*G$z+G$M+2]<G$l){G$u=-1;break}if(!(G$u<0))return G$w.ret=!0,G$w.x=G$u,G$w.y=G$p,G$w;G$q+=G$j[1+G$M]}}return G$w},G$l._fill=function(G$T,G$l,G$w,G$u,G$p){var G$D=this._width,G$P=this._height;this._check(G$T+G$w<=G$D&&G$l+G$u<=G$P);for(var G$j=G$l;G$j<G$u+G$l;++G$j){this._check(this._rowInfo[G$j].spaceCount>=G$w),this._rowInfo[G$j].spaceCount-=G$w;for(var G$J=0;G$J<G$w;G$J++){var G$q=3*(G$T+G$j*G$D+G$J);this._check(0==this._cells[G$q]),this._cells[G$q]=G$p,this._cells[1+G$q]=G$w,this._cells[2+G$q]=G$u}}if(0<G$T)for(G$j=0;G$j<G$u;++G$j){var G$M=0;for(G$J=G$T-1;0<=G$J&&0==this._cells[3*((G$l+G$j)*G$D+G$J)];--G$J,++G$M);for(G$J=G$M;0<G$J;--G$J)this._cells[3*((G$l+G$j)*G$D+G$T-G$J)+1]=G$J,this._check(0<G$J)}if(0<G$l)for(G$J=G$T;G$J<G$T+G$w;++G$J){for(G$M=0,G$j=G$l-1;0<=G$j&&0==this._cells[3*(G$J+G$j*G$D)];--G$j,G$M++);for(G$j=G$M;0<G$j;--G$j)this._cells[3*(G$J+(G$l-G$j)*G$D)+2]=G$j,this._check(0<G$j)}},G$l._check=function(G$T){0==G$T&&console.log("xtexMerger 错误啦")},G$l._clear=function(){for(var G$T=this._texCount=0;G$T<this._height;G$T++)this._rowInfo[G$T].spaceCount=this._width;for(var G$l=0;G$l<this._height;G$l++)for(var G$w=0;G$w<this._width;G$w++){var G$u=3*(G$l*this._width+G$w);this._cells[G$u]=0,this._cells[1+G$u]=this._width-G$w,this._cells[2+G$u]=this._width-G$l}this._failSize.width=this._width+1,this._failSize.height=this._height+1},G$T.__init$=function(){G$u=function(){function G$T(){this.spaceCount=0}return G$b(G$T,""),G$T}(),G$p=function(){function G$T(){this.width=0,this.height=0}return G$b(G$T,""),G$T}()},G$T}(),G$k=function(){function G$L(G$T,G$l,G$w,G$u){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=G$T,this._height=G$l,this._gridSize=G$w,this._maxAtlaserCount=G$u,this._gridNumX=G$T/G$w,this._gridNumY=G$l/G$w,this._curAtlasIndex=0,this._atlaserArray=[]}G$b(G$L,"laya.webgl.atlas.AtlasResourceManager");var G$T=G$L.prototype;return G$T.setAtlasParam=function(G$T,G$l,G$w,G$u){if(1==this._setAtlasParam)return G$L._sid_=0,this._width=G$T,this._height=G$l,this._gridSize=G$w,this._maxAtlaserCount=G$u,this._gridNumX=G$T/G$w,this._gridNumY=G$l/G$w,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},G$T.pushData=function(G$T){var G$l,G$w=G$T.bitmap,G$u=-1,G$p=null,G$D=0,G$P=0;for(G$D=0,G$l=this._atlaserArray.length;G$D<G$l&&(G$P=(this._curAtlasIndex+G$D)%G$l,-1==(G$u=(G$p=this._atlaserArray[G$P]).findBitmapIsExist(G$w)));G$D++);if(-1!=G$u){var G$j=G$p.InAtlasWebGLImagesOffsetValue[G$u];return G$Y=G$j[0],G$t=G$j[1],G$p.addToAtlas(G$T,G$Y,G$t),!0}this._setAtlasParam=!1;for(var G$J=Math.ceil((G$T.bitmap.width+2)/this._gridSize),G$q=Math.ceil((G$T.bitmap.height+2)/this._gridSize),G$M=!1,G$z=0;G$z<2;G$z++){var G$b=this._maxAtlaserCount;for(G$D=0;G$D<G$b;G$D++){G$P=(this._curAtlasIndex+G$D)%G$b,this._atlaserArray.length-1>=G$P||this._atlaserArray.push(new G$QT(this._gridNumX,this._gridNumY,this._width,this._height,G$L._sid_++));var G$K=this._atlaserArray[G$P],G$Y=0,G$t=0,G$A=G$K.addTex(1,G$J,G$q);if(G$A.ret){G$Y=G$A.x*this._gridSize+1,G$t=G$A.y*this._gridSize+1,G$w.lock=!0,G$K.addToAtlasTexture(G$w,G$Y,G$t),G$K.addToAtlas(G$T,G$Y,G$t),G$M=!0,this._curAtlasIndex=G$P;break}}if(G$M)break;this._atlaserArray.push(new G$QT(this._gridNumX,this._gridNumY,this._width,this._height,G$L._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return G$M||console.log(">>>AtlasManager pushData error"),G$M},G$T.addToAtlas=function(G$T){laya.webgl.atlas.AtlasResourceManager.instance.pushData(G$T)},G$T.garbageCollection=function(){if(!0===this._needGC){for(var G$T=this._atlaserArray.length-this._maxAtlaserCount,G$l=0;G$l<G$T;G$l++)this._atlaserArray[G$l].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+G$T),this._atlaserArray.splice(0,G$T),this._needGC=!1}return!0},G$T.freeAll=function(){for(var G$T=0,G$l=this._atlaserArray.length;G$T<G$l;G$T++)this._atlaserArray[G$T].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},G$T.getAtlaserCount=function(){return this._atlaserArray.length},G$T.getAtlaserByIndex=function(G$T){return this._atlaserArray[G$T]},G$u(1,G$L,"instance",function(){return G$L._Instance||(G$L._Instance=new G$L(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),G$L._Instance}),G$u(1,G$L,"enabled",function(){return G$B.atlasEnable}),G$u(1,G$L,"atlasLimitWidth",function(){return G$L._atlasLimitWidth},function(G$T){G$L._atlasLimitWidth=G$T}),G$u(1,G$L,"atlasLimitHeight",function(){return G$L._atlasLimitHeight},function(G$T){G$L._atlasLimitHeight=G$T}),G$L._enable=function(){G$B.atlasEnable=!0},G$L._disable=function(){G$B.atlasEnable=!1},G$L.__init__=function(){G$L.atlasTextureWidth=2048,G$L.atlasTextureHeight=2048,G$L.maxTextureCount=6,G$L.atlasLimitWidth=512,G$L.atlasLimitHeight=512},G$L._atlasLimitWidth=0,G$L._atlasLimitHeight=0,G$L.gridSize=16,G$L.atlasTextureWidth=0,G$L.atlasTextureHeight=0,G$L.maxTextureCount=0,G$L._atlasRestore=0,G$L.BOARDER_TYPE_NO=0,G$L.BOARDER_TYPE_RIGHT=1,G$L.BOARDER_TYPE_LEFT=2,G$L.BOARDER_TYPE_BOTTOM=4,G$L.BOARDER_TYPE_TOP=8,G$L.BOARDER_TYPE_ALL=15,G$L._sid_=0,G$L._Instance=null,G$L}(),G$n=function(){function G$T(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return G$b(G$T,"laya.webgl.atlas.MergeFillInfo"),G$T}(),G$d=function(){function G$l(){}return G$b(G$l,"laya.webgl.canvas.BlendMode"),G$l._init_=function(G$T){G$l.fns=[G$l.BlendNormal,G$l.BlendAdd,G$l.BlendMultiply,G$l.BlendScreen,G$l.BlendOverlay,G$l.BlendLight,G$l.BlendMask,G$l.BlendDestinationOut],G$l.targetFns=[G$l.BlendNormalTarget,G$l.BlendAddTarget,G$l.BlendMultiplyTarget,G$l.BlendScreenTarget,G$l.BlendOverlayTarget,G$l.BlendLightTarget,G$l.BlendMask,G$l.BlendDestinationOut]},G$l.BlendNormal=function(G$T){G$T.blendFunc(1,771)},G$l.BlendAdd=function(G$T){G$T.blendFunc(1,772)},G$l.BlendMultiply=function(G$T){G$T.blendFunc(774,771)},G$l.BlendScreen=function(G$T){G$T.blendFunc(1,1)},G$l.BlendOverlay=function(G$T){G$T.blendFunc(1,769)},G$l.BlendLight=function(G$T){G$T.blendFunc(1,1)},G$l.BlendNormalTarget=function(G$T){G$T.blendFunc(1,771)},G$l.BlendAddTarget=function(G$T){G$T.blendFunc(1,772)},G$l.BlendMultiplyTarget=function(G$T){G$T.blendFunc(774,771)},G$l.BlendScreenTarget=function(G$T){G$T.blendFunc(1,1)},G$l.BlendOverlayTarget=function(G$T){G$T.blendFunc(1,769)},G$l.BlendLightTarget=function(G$T){G$T.blendFunc(1,1)},G$l.BlendMask=function(G$T){G$T.blendFunc(0,770)},G$l.BlendDestinationOut=function(G$T){G$T.blendFunc(0,0)},G$l.activeBlendFunction=null,G$l.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],G$l.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},G$l.NORMAL="normal",G$l.ADD="add",G$l.MULTIPLY="multiply",G$l.SCREEN="screen",G$l.LIGHT="light",G$l.OVERLAY="overlay",G$l.DESTINATIONOUT="destination-out",G$l.fns=[],G$l.targetFns=[],G$l}(),G$G=function(){function G$w(G$T){this._color=G$Y.create("black"),this.setValue(G$T)}G$b(G$w,"laya.webgl.canvas.DrawStyle");var G$T=G$w.prototype;return G$T.setValue=function(G$T){if(G$T){if("string"==typeof G$T)return void(this._color=G$Y.create(G$T));if(G$T instanceof laya.utils.Color)return void(this._color=G$T)}},G$T.reset=function(){this._color=G$Y.create("black")},G$T.equal=function(G$T){return"string"==typeof G$T?this._color.strColor===G$T:G$T instanceof laya.utils.Color&&this._color.numColor===G$T.numColor},G$T.toColorStr=function(){return this._color.strColor},G$w.create=function(G$T){var G$l;if(G$T&&("string"==typeof G$T?G$l=G$Y.create(G$T):G$T instanceof laya.utils.Color&&(G$l=G$T),G$l))return G$l._drawStyle||(G$l._drawStyle=new G$w(G$T));return laya.webgl.canvas.DrawStyle.DEFAULT},G$P(G$w,["DEFAULT",function(){return this.DEFAULT=new G$w("#000000")}]),G$w}(),G$N=function(){function G$T(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];G$mT.mainContext;this.ib=G$ST.create(35048),this.vb=G$_T.create(5)}G$b(G$T,"laya.webgl.canvas.Path");var G$l=G$T.prototype;return G$l.addPoint=function(G$T,G$l){this.tempArray.push(G$T,G$l)},G$l.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},G$l.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},G$l.polygon=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P;return this.geomatrys.push(this._curGeomatry=G$P=new G$vT(G$T,G$l,G$w,G$u,G$p,G$D)),G$u||(G$P.fill=!1),null==G$D&&(G$P.borderWidth=0),G$P},G$l.setGeomtry=function(G$T){this.geomatrys.push(this._curGeomatry=G$T)},G$l.drawLine=function(G$T,G$l,G$w,G$u,G$p){var G$D;return this.closePath?this.geomatrys.push(this._curGeomatry=G$D=new G$yT(G$T,G$l,G$w,G$u,G$p)):this.geomatrys.push(this._curGeomatry=G$D=new G$eT(G$T,G$l,G$w,G$u,G$p)),G$D.fill=!1,G$D},G$l.update=function(){var G$T=this.ib._byteLength,G$l=this.geomatrys.length;this.offset=G$T;for(var G$w=this.geoStart;G$w<G$l;G$w++)this.geomatrys[G$w].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=G$l,this.count=(this.ib._byteLength-G$T)/G$tT.BYTES_PIDX},G$l.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},G$l.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},G$T}(),G$h=function(){function G$j(){}G$b(G$j,"laya.webgl.canvas.save.SaveBase");var G$T=G$j.prototype;return G$a.imps(G$T,{"laya.webgl.canvas.save.ISaveData":!0}),G$T.isSaveMark=function(){return!1},G$T.restore=function(G$T){this._dataObj[this._valueName]=this._value,(G$j._cache[G$j._cache._length++]=this)._newSubmit&&(G$T._curSubmit=G$DT.RENDERBASE,G$T._renderKey=0)},G$j._createArray=function(){var G$T=[];return G$T._length=0,G$T},G$j._init=function(){var G$T=G$j._namemap={};return G$T[1]="ALPHA",G$T[2]="fillStyle",G$T[8]="font",G$T[256]="lineWidth",G$T[512]="strokeStyle",G$T[8192]="_mergeID",G$T[1024]=G$T[2048]=G$T[4096]=[],G$T[16384]="textBaseline",G$T[32768]="textAlign",G$T[65536]="_nBlendType",G$T[1048576]="shader",G$T[2097152]="filters",G$T},G$j.save=function(G$T,G$l,G$w,G$u){if((G$T._saveMark._saveuse&G$l)!==G$l){G$T._saveMark._saveuse|=G$l;var G$p=G$j._cache,G$D=0<G$p._length?G$p[--G$p._length]:new G$j;G$D._value=G$w[G$D._valueName=G$j._namemap[G$l]],G$D._dataObj=G$w,G$D._newSubmit=G$u;var G$P=G$T._save;G$P[G$P._length++]=G$D}},G$j._cache=laya.webgl.canvas.save.SaveBase._createArray(),G$j._namemap=G$j._init(),G$j}(),G$g=function(){function G$D(){this._clipRect=new G$Q}G$b(G$D,"laya.webgl.canvas.save.SaveClipRect");var G$T=G$D.prototype;return G$a.imps(G$T,{"laya.webgl.canvas.save.ISaveData":!0}),G$T.isSaveMark=function(){return!1},G$T.restore=function(G$T){G$T._clipRect=this._clipSaveRect,(G$D._cache[G$D._cache._length++]=this)._submitScissor.submitLength=G$T._submits._length-this._submitScissor.submitIndex,G$T._curSubmit=G$DT.RENDERBASE,G$T._renderKey=0},G$D.save=function(G$T,G$l){if(131072!=(131072&G$T._saveMark._saveuse)){G$T._saveMark._saveuse|=131072;var G$w=G$D._cache,G$u=0<G$w._length?G$w[--G$w._length]:new G$D;G$u._clipSaveRect=G$T._clipRect,G$T._clipRect=G$u._clipRect.copyFrom(G$T._clipRect),G$u._submitScissor=G$l;var G$p=G$T._save;G$p[G$p._length++]=G$u}},G$P(G$D,["_cache",function(){return this._cache=G$h._createArray()}]),G$D}(),G$f=function(){function G$K(){this._contextX=0,this._contextY=0,this._clipRect=new G$Q,this._rect=new G$Q,this._matrix=new G$r}G$b(G$K,"laya.webgl.canvas.save.SaveClipRectStencil");var G$T=G$K.prototype;return G$a.imps(G$T,{"laya.webgl.canvas.save.ISaveData":!0}),G$T.isSaveMark=function(){return!1},G$T.restore=function(G$T){G$MT.restore(G$T,this._rect,this._saveMatrix,this._contextX,this._contextY),G$T._clipRect=this._clipSaveRect,G$T._curMat=this._saveMatrix,G$T._x=this._contextX,G$T._y=this._contextY,G$K._cache[G$K._cache._length++]=this,G$T._curSubmit=G$DT.RENDERBASE},G$K.save=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){if(262144!=(262144&G$T._saveMark._saveuse)){G$T._saveMark._saveuse|=262144;var G$M=G$K._cache,G$z=0<G$M._length?G$M[--G$M._length]:new G$K;G$z._clipSaveRect=G$T._clipRect,G$z._clipRect.setTo(G$P,G$j,G$J,G$q),G$T._clipRect=G$z._clipRect,G$z._rect.x=G$w,G$z._rect.y=G$u,G$z._rect.width=G$p,G$z._rect.height=G$D,G$z._contextX=G$T._x,G$z._contextY=G$T._y,G$z._saveMatrix=G$T._curMat,G$T._curMat.copyTo(G$z._matrix),G$T._curMat=G$z._matrix,G$z._submitStencil=G$l;var G$b=G$T._save;G$b[G$b._length++]=G$z}},G$P(G$K,["_cache",function(){return this._cache=G$h._createArray()}]),G$K}(),G$U=function(){function G$u(){this._saveuse=0}G$b(G$u,"laya.webgl.canvas.save.SaveMark");var G$T=G$u.prototype;return G$a.imps(G$T,{"laya.webgl.canvas.save.ISaveData":!0}),G$T.isSaveMark=function(){return!0},G$T.restore=function(G$T){G$T._saveMark=this._preSaveMark,G$u._no[G$u._no._length++]=this},G$u.Create=function(G$T){var G$l=G$u._no,G$w=0<G$l._length?G$l[--G$l._length]:new G$u;return G$w._saveuse=0,G$w._preSaveMark=G$T._saveMark,G$T._saveMark=G$w},G$P(G$u,["_no",function(){return this._no=G$h._createArray()}]),G$u}(),G$E=function(){function G$D(){this._matrix=new G$r}G$b(G$D,"laya.webgl.canvas.save.SaveTransform");var G$T=G$D.prototype;return G$a.imps(G$T,{"laya.webgl.canvas.save.ISaveData":!0}),G$T.isSaveMark=function(){return!1},G$T.restore=function(G$T){G$T._curMat=this._savematrix,G$D._no[G$D._no._length++]=this},G$D.save=function(G$T){var G$l=G$T._saveMark;if(2048!=(2048&G$l._saveuse)){G$l._saveuse|=2048;var G$w=G$D._no,G$u=0<G$w._length?G$w[--G$w._length]:new G$D;G$u._savematrix=G$T._curMat,G$T._curMat=G$T._curMat.copyTo(G$u._matrix);var G$p=G$T._save;G$p[G$p._length++]=G$u}},G$P(G$D,["_no",function(){return this._no=G$h._createArray()}]),G$D}(),G$V=function(){function G$p(){}G$b(G$p,"laya.webgl.canvas.save.SaveTranslate");var G$T=G$p.prototype;return G$a.imps(G$T,{"laya.webgl.canvas.save.ISaveData":!0}),G$T.isSaveMark=function(){return!1},G$T.restore=function(G$T){G$T._curMat;G$T._x=this._x,G$T._y=this._y,G$p._no[G$p._no._length++]=this},G$p.save=function(G$T){var G$l=G$p._no,G$w=0<G$l._length?G$l[--G$l._length]:new G$p;G$w._x=G$T._x,G$w._y=G$T._y;var G$u=G$T._save;G$u[G$u._length++]=G$w},G$P(G$p,["_no",function(){return this._no=G$h._createArray()}]),G$p}(),G$C=function(){function G$T(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new G$Q}G$b(G$T,"laya.webgl.resource.RenderTargetMAX");var G$l=G$T.prototype;return G$l.setSP=function(G$T){this._sp=G$T},G$l.size=function(G$T,G$l){var G$w=this;this._width!==G$T||this._height!==G$l?(this.repaint=!0,this._width=G$T,this._height=G$l,this.target?this.target.size(G$T,G$l):this.target=G$$T.create(G$T,G$l),this.target.hasListener("recovered")||this.target.on("recovered",this,function(G$T){G$a.timer.callLater(G$w._sp,G$w._sp.repaint)})):this.target.size(G$T,G$l)},G$l._flushToTarget=function(G$T,G$l){if(!G$l._destroy){var G$w=G$iT.worldScissorTest,G$u=G$iT.worldClipRect;G$iT.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,G$iT.worldScissorTest=!1,G$mT.mainContext.disable(3089);var G$p=G$iT.worldAlpha,G$D=G$iT.worldMatrix4,G$P=G$iT.worldMatrix,G$j=G$iT.worldFilters,G$J=G$iT.worldShaderDefines;if(G$iT.worldMatrix=G$r.EMPTY,G$iT.restoreTempArray(),G$iT.worldMatrix4=G$iT.TEMPMAT4_ARRAY,G$iT.worldAlpha=1,G$iT.worldFilters=null,G$iT.worldShaderDefines=null,G$OT.activeShader=null,G$l.start(),G$B.showCanvasMark?G$l.clear(0,1,0,.3):G$l.clear(0,0,0,0),G$T.flush(),G$l.end(),G$OT.activeShader=null,G$iT.worldAlpha=G$p,G$iT.worldMatrix4=G$D,G$iT.worldMatrix=G$P,G$iT.worldFilters=G$j,G$iT.worldShaderDefines=G$J,G$iT.worldScissorTest=G$w){var G$q=G$iT.height-G$u.y-G$u.height;G$mT.mainContext.scissor(G$u.x,G$q,G$u.width,G$u.height),G$mT.mainContext.enable(3089)}G$iT.worldClipRect=G$u}},G$l.flush=function(G$T){this.repaint&&(this._flushToTarget(G$T,this.target),this.repaint=!1)},G$l.drawTo=function(G$T,G$l,G$w,G$u,G$p){G$T.drawTexture(this.target.getTexture(),G$l,G$w,G$u,G$p,0,0)},G$l.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},G$T}(),G$S=function(){function G$T(){this.ALPHA=1,this.shaderType=0,this.defines=new G$oT}return G$b(G$T,"laya.webgl.shader.d2.Shader2D"),G$T.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},G$T.__init__=function(){var G$T,G$l;G$UT.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),G$UT.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),G$UT.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),G$UT.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),G$UT.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),G$UT.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),G$UT.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),G$UT.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),G$T="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",G$l='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',G$UT.preCompile2D(0,1,G$T,G$l,null),G$T="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",G$l='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',G$UT.preCompile2D(0,2,G$T,G$l,null),G$T="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",G$l="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",G$UT.preCompile2D(0,4,G$T,G$l,null),G$T="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",G$l='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',G$UT.preCompile2D(0,256,G$T,G$l,null),G$T="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",G$l="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",G$UT.preCompile2D(0,512,G$T,G$l,null)},G$T}(),G$_=function(){function G$l(G$T,G$l,G$w){this._value=0,this._name2int=G$T,this._int2name=G$l,this._int2nameMap=G$w}G$b(G$l,"laya.webgl.shader.ShaderDefines");var G$T=G$l.prototype;return G$T.add=function(G$T){return"string"==typeof G$T&&(G$T=this._name2int[G$T]),this._value|=G$T,this._value},G$T.addInt=function(G$T){return this._value|=G$T,this._value},G$T.remove=function(G$T){return"string"==typeof G$T&&(G$T=this._name2int[G$T]),this._value&=~G$T,this._value},G$T.isDefine=function(G$T){return(this._value&G$T)===G$T},G$T.getValue=function(){return this._value},G$T.setValue=function(G$T){this._value=G$T},G$T.toNameDic=function(){var G$T=this._int2nameMap[this._value];return G$T||G$l._toText(this._value,this._int2name,this._int2nameMap)},G$l._reg=function(G$T,G$l,G$w,G$u){G$u[G$w[G$T]=G$l]=G$T},G$l._toText=function(G$T,G$l,G$w){var G$u=G$w[G$T];if(G$u)return G$u;for(var G$p={},G$D=1,G$P=0;G$P<32&&!(G$T<(G$D=1<<G$P));G$P++)if(G$T&G$D){var G$j=G$l[G$D];G$j&&(G$p[G$j]="")}return G$w[G$T]=G$p},G$l._toInt=function(G$T,G$l){for(var G$w=G$T.split("."),G$u=0,G$p=0,G$D=G$w.length;G$p<G$D;G$p++){var G$P=G$l[G$w[G$p]];if(!G$P)throw new Error("Defines to int err:"+G$T+"/"+G$w[G$p]);G$u|=G$P}return G$u},G$l}(),G$TT=function(){function G$P(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new G$r}G$b(G$P,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var G$T=G$P.prototype;return G$T.init=function(G$T,G$l,G$w){if(G$l)this._vs=G$l;else{this._vs=[];var G$u=G$T.width,G$p=G$T.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(G$u,0,1,0,1,1,1,1),this._vs.push(G$u,G$p,1,1,1,1,1,1),this._vs.push(0,G$p,0,1,1,1,1,1)}G$w?this._ps=G$w:(G$P._defaultPS||(G$P._defaultPS=[]).push(0,1,3,3,1,2),this._ps=G$P._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=G$T},G$T.init2=function(G$T,G$l,G$w,G$u,G$p){this.transform&&(this.transform=null),G$w?this._ps=G$w:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=G$u,this._uvs=G$p,this.mEleNum=this._ps.length,this.mTexture=G$T,(G$L.isConchNode||G$L.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},G$T._initMyData=function(){var G$T=0,G$l=0,G$w=4*this._verticles.length;this._vs=G$P._tempVS;var G$u=!1;if(G$L.isConchNode||G$L.isConchApp?(this._vs.length=G$w,G$u=!0):this._vs.length<G$w&&(this._vs.length=G$w,G$u=!0),G$P._tVSLen=G$w,G$u)for(;G$T<G$w;)this._vs[G$T]=this._verticles[G$l],this._vs[G$T+1]=this._verticles[G$l+1],this._vs[G$T+2]=this._uvs[G$l],this._vs[G$T+3]=this._uvs[G$l+1],this._vs[G$T+4]=1,this._vs[G$T+5]=1,this._vs[G$T+6]=1,this._vs[G$T+7]=1,G$T+=8,G$l+=2;else for(;G$T<G$w;)this._vs[G$T]=this._verticles[G$l],this._vs[G$T+1]=this._verticles[G$l+1],this._vs[G$T+2]=this._uvs[G$l],this._vs[G$T+3]=this._uvs[G$l+1],G$T+=8,G$l+=2},G$T.getData2=function(G$T,G$l,G$w){var G$u;this.mVBBuffer=G$T,this.mIBBuffer=G$l,this._initMyData(),G$T.appendEx2(this._vs,Float32Array,G$P._tVSLen,4),this._indexStart=G$l._byteLength,(G$u=G$P._tempIB).length<this._ps.length&&(G$u.length=this._ps.length);for(var G$p=0,G$D=this._ps.length;G$p<G$D;G$p++)G$u[G$p]=this._ps[G$p]+G$w;G$l.appendEx2(G$u,Uint16Array,this._ps.length,2)},G$T.getData=function(G$T,G$l,G$w){if(this.mVBBuffer=G$T,this.mIBBuffer=G$l,G$T.append(this.mVBData),this._indexStart=G$l._byteLength,this.mIBData.start!=G$w){for(var G$u=0,G$p=this._ps.length;G$u<G$p;G$u++)this.mIBData[G$u]=this._ps[G$u]+G$w;this.mIBData.start=G$w}G$l.append(this.mIBData)},G$T.render=function(G$T,G$l,G$w){if(G$L.isWebGL&&this.mTexture){G$T._renderKey=0,G$T._shader2D.glTexture=null,G$lT.getInstance().addSkinMesh(this);var G$u=G$DT.createShape(G$T,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,G$sT.create(512,0));this.transform||(this.transform=G$r.EMPTY),this.transform.translate(G$l,G$w),G$r.mul(this.transform,G$T._curMat,this._tempMatrix),this.transform.translate(-G$l,-G$w);var G$p=G$u.shaderValue,G$D=G$p.u_mmat2||G$iT.getMatrArray();G$iT.mat2MatArray(this._tempMatrix,G$D),G$p.textureHost=this.mTexture,G$p.offsetX=0,G$p.offsetY=0,G$p.u_mmat2=G$D,G$p.ALPHA=G$T._shader2D.ALPHA,G$T._submits[G$T._submits._length++]=G$u}else G$L.isConchApp&&this.mTexture&&(this.transform||(this.transform=G$r.EMPTY),G$T.setSkinMesh&&G$T.setSkinMesh(G$l,G$w,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},G$P._tempVS=[],G$P._tempIB=[],G$P._defaultPS=null,G$P._tVSLen=0,G$P}(),G$lT=function(){function G$T(){this.ib=null,this.vb=null;G$mT.mainContext;this.ib=G$ST.create(35048),this.vb=G$_T.create(8)}G$b(G$T,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var G$l=G$T.prototype;return G$l.addSkinMesh=function(G$T){G$T.getData2(this.vb,this.ib,this.vb._byteLength/32)},G$l.reset=function(){this.vb.clear(),this.ib.clear()},G$T.getInstance=function(){return G$T.instance=G$T.instance||new G$T},G$T.instance=null,G$T}(),G$wT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===G$J&&(G$J=0),this.x=G$T,this.y=G$l,this.width=G$w,this.height=G$u,this.edges=G$p,this.color=G$D,this.borderWidth=G$P,this.borderColor=G$j}G$b(G$T,"laya.webgl.shapes.BasePoly");var G$l=G$T.prototype;return G$a.imps(G$l,{"laya.webgl.shapes.IShape":!0}),G$l.getData=function(G$T,G$l,G$w){},G$l.rebuild=function(G$T){},G$l.setMatrix=function(G$T){},G$l.needUpdate=function(G$T){return!0},G$l.sector=function(G$T,G$l,G$w){var G$u=this.x,G$p=this.y,G$D=this.edges,G$P=(this.r1-this.r0)/G$D,G$j=this.width,G$J=this.height,G$q=this.color,G$M=(G$q>>16&255)/255,G$z=(G$q>>8&255)/255,G$b=(255&G$q)/255;G$T.push(G$u,G$p,G$M,G$z,G$b);for(var G$K=0;G$K<G$D+1;G$K++)G$T.push(G$u+Math.sin(G$P*G$K+this.r0)*G$j,G$p+Math.cos(G$P*G$K+this.r0)*G$J),G$T.push(G$M,G$z,G$b);for(G$K=0;G$K<G$D;G$K++)G$l.push(G$w,G$w+G$K+1,G$w+G$K+2)},G$l.createLine2=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P,G$j,G$J,G$q,G$M,G$z,G$b,G$K,G$Y,G$t,G$A,G$L,G$i,G$W,G$m,G$c,G$a,G$B,G$s,G$r,G$I=G$T.concat(),G$Q=G$p,G$o=this.borderColor,G$e=(G$o>>16&255)/255,G$y=(G$o>>8&255)/255,G$v=(255&G$o)/255,G$x=G$I.length/2,G$R=G$u,G$F=G$w/2;G$J=G$I[0],G$q=G$I[1],G$t=G$J-(G$M=G$I[2]),G$Y=(G$Y=-(G$q-(G$z=G$I[3])))/(G$r=Math.sqrt(G$Y*G$Y+G$t*G$t))*G$F,G$t=G$t/G$r*G$F,G$Q.push(G$J-G$Y+this.x,G$q-G$t+this.y,G$e,G$y,G$v,G$J+G$Y+this.x,G$q+G$t+this.y,G$e,G$y,G$v);for(var G$O=1;G$O<G$x-1;G$O++)G$J=G$I[2*(G$O-1)],G$q=G$I[2*(G$O-1)+1],G$M=G$I[2*G$O],G$z=G$I[2*G$O+1],G$b=G$I[2*(G$O+1)],G$K=G$I[2*(G$O+1)+1],G$t=G$J-G$M,G$L=G$M-G$b,G$m=(-(G$Y=(G$Y=-(G$q-G$z))/(G$r=Math.sqrt(G$Y*G$Y+G$t*G$t))*G$F)+G$J)*(-(G$t=G$t/G$r*G$F)+G$z)-(-G$Y+G$M)*(-G$t+G$q),G$B=(-(G$A=(G$A=-(G$z-G$K))/(G$r=Math.sqrt(G$A*G$A+G$L*G$L))*G$F)+G$b)*(-(G$L=G$L/G$r*G$F)+G$z)-(-G$A+G$M)*(-G$L+G$K),G$s=(G$i=-G$t+G$q-(-G$t+G$z))*(G$a=-G$A+G$M-(-G$A+G$b))-(G$c=-G$L+G$K-(-G$L+G$z))*(G$W=-G$Y+G$M-(-G$Y+G$J)),Math.abs(G$s)<.1?(G$s+=10.1,G$Q.push(G$M-G$Y+this.x,G$z-G$t+this.y,G$e,G$y,G$v,G$M+G$Y+this.x,G$z+G$t+this.y,G$e,G$y,G$v)):(((G$P=(G$W*G$B-G$a*G$m)/G$s)-G$M)*(G$P-G$M)+((G$j=(G$c*G$m-G$i*G$B)/G$s)-G$z)+(G$j-G$z),G$Q.push(G$P+this.x,G$j+this.y,G$e,G$y,G$v,G$M-(G$P-G$M)+this.x,G$z-(G$j-G$z)+this.y,G$e,G$y,G$v));G$J=G$I[G$I.length-4],G$q=G$I[G$I.length-3],G$t=G$J-(G$M=G$I[G$I.length-2]),G$Y=(G$Y=-(G$q-(G$z=G$I[G$I.length-1])))/(G$r=Math.sqrt(G$Y*G$Y+G$t*G$t))*G$F,G$t=G$t/G$r*G$F,G$Q.push(G$M-G$Y+this.x,G$z-G$t+this.y,G$e,G$y,G$v,G$M+G$Y+this.x,G$z+G$t+this.y,G$e,G$y,G$v);var G$$=G$D;for(G$O=1;G$O<G$$;G$O++)G$l.push(G$R+2*(G$O-1),G$R+2*(G$O-1)+1,G$R+2*G$O+1,G$R+2*G$O+1,G$R+2*G$O,G$R+2*(G$O-1));return G$Q},G$l.createLine=function(G$T,G$l,G$w,G$u){var G$p=G$T.concat(),G$D=G$T,G$P=this.borderColor,G$j=(G$P>>16&255)/255,G$J=(G$P>>8&255)/255,G$q=(255&G$P)/255;G$p.splice(0,5);var G$M,G$z,G$b,G$K,G$Y,G$t,G$A,G$L,G$i,G$W,G$m,G$c,G$a,G$B,G$s,G$r,G$I,G$Q,G$o,G$e,G$y=G$p.length/5,G$v=G$u,G$x=G$w/2;G$b=G$p[0],G$K=G$p[1],G$W=G$b-(G$Y=G$p[5]),G$i=(G$i=-(G$K-(G$t=G$p[6])))/(G$e=Math.sqrt(G$i*G$i+G$W*G$W))*G$x,G$W=G$W/G$e*G$x,G$D.push(G$b-G$i,G$K-G$W,G$j,G$J,G$q,G$b+G$i,G$K+G$W,G$j,G$J,G$q);for(var G$R=1;G$R<G$y-1;G$R++)G$b=G$p[5*(G$R-1)],G$K=G$p[5*(G$R-1)+1],G$Y=G$p[5*G$R],G$t=G$p[5*G$R+1],G$A=G$p[5*(G$R+1)],G$L=G$p[5*(G$R+1)+1],G$W=G$b-G$Y,G$c=G$Y-G$A,G$s=(-(G$i=(G$i=-(G$K-G$t))/(G$e=Math.sqrt(G$i*G$i+G$W*G$W))*G$x)+G$b)*(-(G$W=G$W/G$e*G$x)+G$t)-(-G$i+G$Y)*(-G$W+G$K),G$Q=(-(G$m=(G$m=-(G$t-G$L))/(G$e=Math.sqrt(G$m*G$m+G$c*G$c))*G$x)+G$A)*(-(G$c=G$c/G$e*G$x)+G$t)-(-G$m+G$Y)*(-G$c+G$L),G$o=(G$a=-G$W+G$K-(-G$W+G$t))*(G$I=-G$m+G$Y-(-G$m+G$A))-(G$r=-G$c+G$L-(-G$c+G$t))*(G$B=-G$i+G$Y-(-G$i+G$b)),Math.abs(G$o)<.1?(G$o+=10.1,G$D.push(G$Y-G$i,G$t-G$W,G$j,G$J,G$q,G$Y+G$i,G$t+G$W,G$j,G$J,G$q)):(((G$M=(G$B*G$Q-G$I*G$s)/G$o)-G$Y)*(G$M-G$Y)+((G$z=(G$r*G$s-G$a*G$Q)/G$o)-G$t)+(G$z-G$t),G$D.push(G$M,G$z,G$j,G$J,G$q,G$Y-(G$M-G$Y),G$t-(G$z-G$t),G$j,G$J,G$q));G$b=G$p[G$p.length-10],G$K=G$p[G$p.length-9],G$W=G$b-(G$Y=G$p[G$p.length-5]),G$i=(G$i=-(G$K-(G$t=G$p[G$p.length-4])))/(G$e=Math.sqrt(G$i*G$i+G$W*G$W))*G$x,G$W=G$W/G$e*G$x,G$D.push(G$Y-G$i,G$t-G$W,G$j,G$J,G$q,G$Y+G$i,G$t+G$W,G$j,G$J,G$q);var G$F=this.edges+1;for(G$R=1;G$R<G$F;G$R++)G$l.push(G$v+2*(G$R-1),G$v+2*(G$R-1)+1,G$v+2*G$R+1,G$v+2*G$R+1,G$v+2*G$R,G$v+2*(G$R-1));return G$D},G$l.createLoopLine=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=G$T.concat(),G$j=G$p||G$T,G$J=this.borderColor,G$q=(G$J>>16&255)/255,G$M=(G$J>>8&255)/255,G$z=(255&G$J)/255;G$P.splice(0,5);var G$b=[G$P[0],G$P[1]],G$K=[G$P[G$P.length-5],G$P[G$P.length-4]],G$Y=G$K[0]+.5*(G$b[0]-G$K[0]),G$t=G$K[1]+.5*(G$b[1]-G$K[1]);G$P.unshift(G$Y,G$t,0,0,0),G$P.push(G$Y,G$t,0,0,0);var G$A,G$L,G$i,G$W,G$m,G$c,G$a,G$B,G$s,G$r,G$I,G$Q,G$o,G$e,G$y,G$v,G$x,G$R,G$F,G$O,G$$=G$P.length/5,G$Z=G$u,G$H=G$w/2;G$i=G$P[0],G$W=G$P[1],G$r=G$i-(G$m=G$P[5]),G$s=(G$s=-(G$W-(G$c=G$P[6])))/(G$O=Math.sqrt(G$s*G$s+G$r*G$r))*G$H,G$r=G$r/G$O*G$H,G$j.push(G$i-G$s,G$W-G$r,G$q,G$M,G$z,G$i+G$s,G$W+G$r,G$q,G$M,G$z);for(var G$X=1;G$X<G$$-1;G$X++)G$i=G$P[5*(G$X-1)],G$W=G$P[5*(G$X-1)+1],G$m=G$P[5*G$X],G$c=G$P[5*G$X+1],G$a=G$P[5*(G$X+1)],G$B=G$P[5*(G$X+1)+1],G$r=G$i-G$m,G$Q=G$m-G$a,G$y=(-(G$s=(G$s=-(G$W-G$c))/(G$O=Math.sqrt(G$s*G$s+G$r*G$r))*G$H)+G$i)*(-(G$r=G$r/G$O*G$H)+G$c)-(-G$s+G$m)*(-G$r+G$W),G$R=(-(G$I=(G$I=-(G$c-G$B))/(G$O=Math.sqrt(G$I*G$I+G$Q*G$Q))*G$H)+G$a)*(-(G$Q=G$Q/G$O*G$H)+G$c)-(-G$I+G$m)*(-G$Q+G$B),G$F=(G$o=-G$r+G$W-(-G$r+G$c))*(G$x=-G$I+G$m-(-G$I+G$a))-(G$v=-G$Q+G$B-(-G$Q+G$c))*(G$e=-G$s+G$m-(-G$s+G$i)),Math.abs(G$F)<.1?(G$F+=10.1,G$j.push(G$m-G$s,G$c-G$r,G$q,G$M,G$z,G$m+G$s,G$c+G$r,G$q,G$M,G$z)):(((G$A=(G$e*G$R-G$x*G$y)/G$F)-G$m)*(G$A-G$m)+((G$L=(G$v*G$y-G$o*G$R)/G$F)-G$c)+(G$L-G$c),G$j.push(G$A,G$L,G$q,G$M,G$z,G$m-(G$A-G$m),G$c-(G$L-G$c),G$q,G$M,G$z));G$D&&(G$l=G$D);var G$k=this.edges+1;for(G$X=1;G$X<G$k;G$X++)G$l.push(G$Z+2*(G$X-1),G$Z+2*(G$X-1)+1,G$Z+2*G$X+1,G$Z+2*G$X+1,G$Z+2*G$X,G$Z+2*(G$X-1));return G$l.push(G$Z+2*(G$X-1),G$Z+2*(G$X-1)+1,G$Z+1,G$Z+1,G$Z,G$Z+2*(G$X-1)),G$j},G$T}(),G$uT=function(){function G$t(){}return G$b(G$t,"laya.webgl.shapes.Earcut"),G$t.earcut=function(G$T,G$l,G$w){G$w=G$w||2;var G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M=G$l&&G$l.length,G$z=G$M?G$l[0]*G$w:G$T.length,G$b=G$t.linkedList(G$T,0,G$z,G$w,!0),G$K=[];if(!G$b)return G$K;if(G$M&&(G$b=G$t.eliminateHoles(G$T,G$l,G$b,G$w)),G$T.length>80*G$w){G$u=G$D=G$T[0],G$p=G$P=G$T[1];for(var G$Y=G$w;G$Y<G$z;G$Y+=G$w)(G$j=G$T[G$Y])<G$u&&(G$u=G$j),(G$J=G$T[G$Y+1])<G$p&&(G$p=G$J),G$D<G$j&&(G$D=G$j),G$P<G$J&&(G$P=G$J);G$q=0!==(G$q=Math.max(G$D-G$u,G$P-G$p))?1/G$q:0}return G$t.earcutLinked(G$b,G$K,G$w,G$u,G$p,G$q),G$K},G$t.linkedList=function(G$T,G$l,G$w,G$u,G$p){var G$D,G$P;if(G$p===0<G$t.signedArea(G$T,G$l,G$w,G$u))for(G$D=G$l;G$D<G$w;G$D+=G$u)G$P=G$t.insertNode(G$D,G$T[G$D],G$T[G$D+1],G$P);else for(G$D=G$w-G$u;G$l<=G$D;G$D-=G$u)G$P=G$t.insertNode(G$D,G$T[G$D],G$T[G$D+1],G$P);return G$P&&G$t.equals(G$P,G$P.next)&&(G$t.removeNode(G$P),G$P=G$P.next),G$P},G$t.filterPoints=function(G$T,G$l){if(!G$T)return G$T;G$l||(G$l=G$T);var G$w,G$u=G$T;do{if(G$w=!1,G$u.steiner||!G$t.equals(G$u,G$u.next)&&0!==G$t.area(G$u.prev,G$u,G$u.next))G$u=G$u.next;else{if(G$t.removeNode(G$u),(G$u=G$l=G$u.prev)===G$u.next)break;G$w=!0}}while(G$w||G$u!==G$l);return G$l},G$t.earcutLinked=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){if(G$T){!G$P&&G$D&&G$t.indexCurve(G$T,G$u,G$p,G$D);for(var G$j,G$J,G$q=G$T;G$T.prev!==G$T.next;)if(G$j=G$T.prev,G$J=G$T.next,G$D?G$t.isEarHashed(G$T,G$u,G$p,G$D):G$t.isEar(G$T))G$l.push(G$j.i/G$w),G$l.push(G$T.i/G$w),G$l.push(G$J.i/G$w),G$t.removeNode(G$T),G$T=G$J.next,G$q=G$J.next;else if((G$T=G$J)===G$q){G$P?1===G$P?(G$T=G$t.cureLocalIntersections(G$T,G$l,G$w),G$t.earcutLinked(G$T,G$l,G$w,G$u,G$p,G$D,2)):2===G$P&&G$t.splitEarcut(G$T,G$l,G$w,G$u,G$p,G$D):G$t.earcutLinked(G$t.filterPoints(G$T,null),G$l,G$w,G$u,G$p,G$D,1);break}}},G$t.isEar=function(G$T){var G$l=G$T.prev,G$w=G$T,G$u=G$T.next;if(0<=G$t.area(G$l,G$w,G$u))return!1;for(var G$p=G$T.next.next;G$p!==G$T.prev;){if(G$t.pointInTriangle(G$l.x,G$l.y,G$w.x,G$w.y,G$u.x,G$u.y,G$p.x,G$p.y)&&0<=G$t.area(G$p.prev,G$p,G$p.next))return!1;G$p=G$p.next}return!0},G$t.isEarHashed=function(G$T,G$l,G$w,G$u){var G$p=G$T.prev,G$D=G$T,G$P=G$T.next;if(0<=G$t.area(G$p,G$D,G$P))return!1;for(var G$j=G$p.x<G$D.x?G$p.x<G$P.x?G$p.x:G$P.x:G$D.x<G$P.x?G$D.x:G$P.x,G$J=G$p.y<G$D.y?G$p.y<G$P.y?G$p.y:G$P.y:G$D.y<G$P.y?G$D.y:G$P.y,G$q=G$p.x>G$D.x?G$p.x>G$P.x?G$p.x:G$P.x:G$D.x>G$P.x?G$D.x:G$P.x,G$M=G$p.y>G$D.y?G$p.y>G$P.y?G$p.y:G$P.y:G$D.y>G$P.y?G$D.y:G$P.y,G$z=G$t.zOrder(G$j,G$J,G$l,G$w,G$u),G$b=G$t.zOrder(G$q,G$M,G$l,G$w,G$u),G$K=G$T.nextZ;G$K&&G$K.z<=G$b;){if(G$K!==G$T.prev&&G$K!==G$T.next&&G$t.pointInTriangle(G$p.x,G$p.y,G$D.x,G$D.y,G$P.x,G$P.y,G$K.x,G$K.y)&&0<=G$t.area(G$K.prev,G$K,G$K.next))return!1;G$K=G$K.nextZ}for(G$K=G$T.prevZ;G$K&&G$K.z>=G$z;){if(G$K!==G$T.prev&&G$K!==G$T.next&&G$t.pointInTriangle(G$p.x,G$p.y,G$D.x,G$D.y,G$P.x,G$P.y,G$K.x,G$K.y)&&0<=G$t.area(G$K.prev,G$K,G$K.next))return!1;G$K=G$K.prevZ}return!0},G$t.cureLocalIntersections=function(G$T,G$l,G$w){var G$u=G$T;do{var G$p=G$u.prev,G$D=G$u.next.next;!G$t.equals(G$p,G$D)&&G$t.intersects(G$p,G$u,G$u.next,G$D)&&G$t.locallyInside(G$p,G$D)&&G$t.locallyInside(G$D,G$p)&&(G$l.push(G$p.i/G$w),G$l.push(G$u.i/G$w),G$l.push(G$D.i/G$w),G$t.removeNode(G$u),G$t.removeNode(G$u.next),G$u=G$T=G$D),G$u=G$u.next}while(G$u!==G$T);return G$u},G$t.splitEarcut=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=G$T;do{for(var G$j=G$P.next.next;G$j!==G$P.prev;){if(G$P.i!==G$j.i&&G$t.isValidDiagonal(G$P,G$j)){var G$J=G$t.splitPolygon(G$P,G$j);return G$P=G$t.filterPoints(G$P,G$P.next),G$J=G$t.filterPoints(G$J,G$J.next),G$t.earcutLinked(G$P,G$l,G$w,G$u,G$p,G$D),void G$t.earcutLinked(G$J,G$l,G$w,G$u,G$p,G$D)}G$j=G$j.next}G$P=G$P.next}while(G$P!==G$T)},G$t.eliminateHoles=function(G$T,G$l,G$w,G$u){var G$p,G$D,G$P,G$j,G$J,G$q=[];for(G$p=0,G$D=G$l.length;G$p<G$D;G$p++)G$P=G$l[G$p]*G$u,G$j=G$p<G$D-1?G$l[G$p+1]*G$u:G$T.length,(G$J=G$t.linkedList(G$T,G$P,G$j,G$u,!1))===G$J.next&&(G$J.steiner=!0),G$q.push(G$t.getLeftmost(G$J));for(G$q.sort(G$t.compareX),G$p=0;G$p<G$q.length;G$p++)G$t.eliminateHole(G$q[G$p],G$w),G$w=G$t.filterPoints(G$w,G$w.next);return G$w},G$t.compareX=function(G$T,G$l){return G$T.x-G$l.x},G$t.eliminateHole=function(G$T,G$l){if(G$l=G$t.findHoleBridge(G$T,G$l)){var G$w=G$t.splitPolygon(G$l,G$T);G$t.filterPoints(G$w,G$w.next)}},G$t.findHoleBridge=function(G$T,G$l){var G$w,G$u=G$l,G$p=G$T.x,G$D=G$T.y,G$P=-1/0;do{if(G$D<=G$u.y&&G$D>=G$u.next.y&&G$u.next.y!==G$u.y){var G$j=G$u.x+(G$D-G$u.y)*(G$u.next.x-G$u.x)/(G$u.next.y-G$u.y);if(G$j<=G$p&&G$P<G$j){if((G$P=G$j)===G$p){if(G$D===G$u.y)return G$u;if(G$D===G$u.next.y)return G$u.next}G$w=G$u.x<G$u.next.x?G$u:G$u.next}}G$u=G$u.next}while(G$u!==G$l);if(!G$w)return null;if(G$p===G$P)return G$w.prev;var G$J,G$q=G$w,G$M=G$w.x,G$z=G$w.y,G$b=1/0;for(G$u=G$w.next;G$u!==G$q;)G$p>=G$u.x&&G$u.x>=G$M&&G$p!==G$u.x&&G$t.pointInTriangle(G$D<G$z?G$p:G$P,G$D,G$M,G$z,G$D<G$z?G$P:G$p,G$D,G$u.x,G$u.y)&&((G$J=Math.abs(G$D-G$u.y)/(G$p-G$u.x))<G$b||G$J===G$b&&G$u.x>G$w.x)&&G$t.locallyInside(G$u,G$T)&&(G$w=G$u,G$b=G$J),G$u=G$u.next;return G$w},G$t.indexCurve=function(G$T,G$l,G$w,G$u){for(var G$p=G$T;null===G$p.z&&(G$p.z=G$t.zOrder(G$p.x,G$p.y,G$l,G$w,G$u)),G$p.prevZ=G$p.prev,G$p.nextZ=G$p.next,(G$p=G$p.next)!==G$T;);G$p.prevZ.nextZ=null,G$p.prevZ=null,G$t.sortLinked(G$p)},G$t.sortLinked=function(G$T){var G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q=1;do{for(G$w=G$T,G$D=G$T=null,G$P=0;G$w;){for(G$P++,G$u=G$w,G$l=G$j=0;G$l<G$q&&(G$j++,G$u=G$u.nextZ);G$l++);for(G$J=G$q;0<G$j||0<G$J&&G$u;)0!==G$j&&(0===G$J||!G$u||G$w.z<=G$u.z)?(G$w=(G$p=G$w).nextZ,G$j--):(G$u=(G$p=G$u).nextZ,G$J--),G$D?G$D.nextZ=G$p:G$T=G$p,G$p.prevZ=G$D,G$D=G$p;G$w=G$u}G$D.nextZ=null,G$q*=2}while(1<G$P);return G$T},G$t.zOrder=function(G$T,G$l,G$w,G$u,G$p){return(G$T=1431655765&((G$T=858993459&((G$T=252645135&((G$T=16711935&((G$T=32767*(G$T-G$w)*G$p)|G$T<<8))|G$T<<4))|G$T<<2))|G$T<<1))|(G$l=1431655765&((G$l=858993459&((G$l=252645135&((G$l=16711935&((G$l=32767*(G$l-G$u)*G$p)|G$l<<8))|G$l<<4))|G$l<<2))|G$l<<1))<<1},G$t.getLeftmost=function(G$T){for(var G$l=G$T,G$w=G$T;G$l.x<G$w.x&&(G$w=G$l),(G$l=G$l.next)!==G$T;);return G$w},G$t.pointInTriangle=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){return 0<=(G$p-G$P)*(G$l-G$j)-(G$T-G$P)*(G$D-G$j)&&0<=(G$T-G$P)*(G$u-G$j)-(G$w-G$P)*(G$l-G$j)&&0<=(G$w-G$P)*(G$D-G$j)-(G$p-G$P)*(G$u-G$j)},G$t.isValidDiagonal=function(G$T,G$l){return G$T.next.i!==G$l.i&&G$T.prev.i!==G$l.i&&!G$t.intersectsPolygon(G$T,G$l)&&G$t.locallyInside(G$T,G$l)&&G$t.locallyInside(G$l,G$T)&&G$t.middleInside(G$T,G$l)},G$t.area=function(G$T,G$l,G$w){return(G$l.y-G$T.y)*(G$w.x-G$l.x)-(G$l.x-G$T.x)*(G$w.y-G$l.y)},G$t.equals=function(G$T,G$l){return G$T.x===G$l.x&&G$T.y===G$l.y},G$t.intersects=function(G$T,G$l,G$w,G$u){return!!(G$t.equals(G$T,G$l)&&G$t.equals(G$w,G$u)||G$t.equals(G$T,G$u)&&G$t.equals(G$w,G$l))||0<G$t.area(G$T,G$l,G$w)!=0<G$t.area(G$T,G$l,G$u)&&0<G$t.area(G$w,G$u,G$T)!=0<G$t.area(G$w,G$u,G$l)},G$t.intersectsPolygon=function(G$T,G$l){var G$w=G$T;do{if(G$w.i!==G$T.i&&G$w.next.i!==G$T.i&&G$w.i!==G$l.i&&G$w.next.i!==G$l.i&&G$t.intersects(G$w,G$w.next,G$T,G$l))return!0;G$w=G$w.next}while(G$w!==G$T);return!1},G$t.locallyInside=function(G$T,G$l){return G$t.area(G$T.prev,G$T,G$T.next)<0?0<=G$t.area(G$T,G$l,G$T.next)&&0<=G$t.area(G$T,G$T.prev,G$l):G$t.area(G$T,G$l,G$T.prev)<0||G$t.area(G$T,G$T.next,G$l)<0},G$t.middleInside=function(G$T,G$l){for(var G$w=G$T,G$u=!1,G$p=(G$T.x+G$l.x)/2,G$D=(G$T.y+G$l.y)/2;G$w.y>G$D!=G$w.next.y>G$D&&G$w.next.y!==G$w.y&&G$p<(G$w.next.x-G$w.x)*(G$D-G$w.y)/(G$w.next.y-G$w.y)+G$w.x&&(G$u=!G$u),(G$w=G$w.next)!==G$T;);return G$u},G$t.splitPolygon=function(G$T,G$l){var G$w=new G$pT(G$T.i,G$T.x,G$T.y),G$u=new G$pT(G$l.i,G$l.x,G$l.y),G$p=G$T.next,G$D=G$l.prev;return(G$T.next=G$l).prev=G$T,(G$w.next=G$p).prev=G$w,(G$u.next=G$w).prev=G$u,(G$D.next=G$u).prev=G$D,G$u},G$t.insertNode=function(G$T,G$l,G$w,G$u){var G$p=new G$pT(G$T,G$l,G$w);return G$u?(G$p.next=G$u.next,(G$p.prev=G$u).next.prev=G$p,G$u.next=G$p):(G$p.prev=G$p).next=G$p,G$p},G$t.removeNode=function(G$T){G$T.next.prev=G$T.prev,G$T.prev.next=G$T.next,G$T.prevZ&&(G$T.prevZ.nextZ=G$T.nextZ),G$T.nextZ&&(G$T.nextZ.prevZ=G$T.prevZ)},G$t.signedArea=function(G$T,G$l,G$w,G$u){for(var G$p=0,G$D=G$l,G$P=G$w-G$u;G$D<G$w;G$D+=G$u)G$p+=(G$T[G$P]-G$T[G$D])*(G$T[G$D+1]+G$T[G$P+1]),G$P=G$D;return G$p},G$t}(),G$pT=function(){function G$T(G$T,G$l,G$w){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=G$T,this.x=G$l,this.y=G$w,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return G$b(G$T,"laya.webgl.shapes.EarcutNode"),G$T}(),G$DT=(function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this.lineWidth=G$T,this.lineColor=G$l,this.lineAlpha=G$w,this.fillColor=G$u,this.fillAlpha=G$p,this.shape=G$P,this.fill=G$D}G$b(G$T,"laya.webgl.shapes.GeometryData");var G$l=G$T.prototype;G$l.clone=function(){return new G$T(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},G$l.getIndexData=function(){return null},G$l.getVertexData=function(){return null},G$l.destroy=function(){this.shape=null}}(),function(){function G$T(G$T){if(G$T instanceof Float32Array)this.points=G$T;else if(G$T instanceof Array){G$T.length;this.points=new Float32Array(G$T)}}G$b(G$T,"laya.webgl.shapes.Vertex");var G$l=G$T.prototype;G$a.imps(G$l,{"laya.webgl.shapes.IShape":!0}),G$l.getData=function(G$T,G$l,G$w){},G$l.needUpdate=function(G$T){return!1},G$l.rebuild=function(G$T){},G$l.setMatrix=function(G$T){}}(),function(){function G$J(G$T){void 0===G$T&&(G$T=1e4),this._renderType=G$T}G$b(G$J,"laya.webgl.submit.Submit");var G$T=G$J.prototype;return G$a.imps(G$T,{"laya.webgl.submit.ISubmit":!0}),G$T.releaseRender=function(){var G$T=G$J._cache;(G$T[G$T._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},G$T.getRenderType=function(){return this._renderType},G$T.renderSubmit=function(){if(0===this._numEle)return 1;var G$T=this.shaderValue.textureHost;if(G$T){var G$l=G$T.source;if(!G$T.bitmap||!G$l)return 1;this.shaderValue.texture=G$l,G$T.alphaTexture&&G$T.alphaTexture.source&&(this.shaderValue.texture1=G$T.alphaTexture.source)}this._vb.bind_upload(this._ib);var G$w=G$mT.mainContext;return this.shaderValue.upload(),G$d.activeBlendFunction!==this._blendFn&&(G$w.enable(3042),this._blendFn(G$w),G$d.activeBlendFunction=this._blendFn),G$y.drawCall++,G$y.trianglesFaces+=this._numEle/3,G$w.drawElements(4,this._numEle,5123,this._startIdx),1},G$J.__init__=function(){var G$T=G$J.RENDERBASE=new G$J(-1);G$T.shaderValue=new G$sT(0,0),G$T.shaderValue.ALPHA=-1234},G$J.createSubmit=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$J._cache._length?G$J._cache[--G$J._cache._length]:new G$J;null==G$w&&((G$w=G$D._selfVb||(G$D._selfVb=G$_T.create(-1))).clear(),G$u=0),G$D._ib=G$l,G$D._vb=G$w,G$D._startIdx=G$u*G$tT.BYTES_PIDX,G$D._numEle=0;var G$P=G$T._nBlendType;G$D._blendFn=G$T._targets?G$d.targetFns[G$P]:G$d.fns[G$P],G$D.shaderValue=G$p,G$D.shaderValue.setValue(G$T._shader2D);var G$j=G$T._shader2D.filters;return G$j&&G$D.shaderValue.setFilters(G$j),G$D},G$J.createShape=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=G$J._cache._length?G$J._cache[--G$J._cache._length]:new G$J;G$P._ib=G$l,G$P._vb=G$w,G$P._numEle=G$u,G$P._startIdx=G$p,G$P.shaderValue=G$D,G$P.shaderValue.setValue(G$T._shader2D);var G$j=G$T._nBlendType;return G$P._blendFn=G$T._targets?G$d.targetFns[G$j]:G$d.fns[G$j],G$P},G$J.TYPE_2D=1e4,G$J.TYPE_CANVAS=10003,G$J.TYPE_CMDSETRT=10004,G$J.TYPE_CUSTOM=10005,G$J.TYPE_BLURRT=10006,G$J.TYPE_CMDDESTORYPRERT=10007,G$J.TYPE_DISABLESTENCIL=10008,G$J.TYPE_OTHERIBVB=10009,G$J.TYPE_PRIMITIVE=10010,G$J.TYPE_RT=10011,G$J.TYPE_BLUR_RT=10012,G$J.TYPE_TARGET=10013,G$J.TYPE_CHANGE_VALUE=10014,G$J.TYPE_SHAPE=10015,G$J.TYPE_TEXTURE=10016,G$J.TYPE_FILLTEXTURE=10017,G$J.RENDERBASE=null,G$J._cache=((G$J._cache=[])._length=0,G$J._cache),G$J}()),G$PT=function(){function G$u(){this.fun=null,this.args=null}G$b(G$u,"laya.webgl.submit.SubmitCMD");var G$T=G$u.prototype;return G$a.imps(G$T,{"laya.webgl.submit.ISubmit":!0}),G$T.renderSubmit=function(){return this.fun.apply(null,this.args),1},G$T.getRenderType=function(){return 0},G$T.releaseRender=function(){var G$T=G$u._cache;G$T[G$T._length++]=this},G$u.create=function(G$T,G$l){var G$w=G$u._cache._length?G$u._cache[--G$u._cache._length]:new G$u;return G$w.fun=G$l,G$w.args=G$T,G$w},G$u._cache=((G$u._cache=[])._length=0,G$u._cache),G$u}(),G$jT=function(){function G$l(){this.variables={}}G$b(G$l,"laya.webgl.submit.SubmitCMDScope");var G$T=G$l.prototype;return G$T.getValue=function(G$T){return this.variables[G$T]},G$T.addValue=function(G$T,G$l){return this.variables[G$T]=G$l},G$T.setValue=function(G$T,G$l){return this.variables.hasOwnProperty(G$T)?this.variables[G$T]=G$l:null},G$T.clear=function(){for(var G$T in this.variables)delete this.variables[G$T]},G$T.recycle=function(){this.clear(),G$l.POOL.push(this)},G$l.create=function(){var G$T=G$l.POOL.pop();return G$T||(G$T=new G$l),G$T},G$l.POOL=[],G$l}(),G$JT=function(){function G$z(){this.offset=0,this.startIndex=0,this._mat=G$r.create()}G$b(G$z,"laya.webgl.submit.SubmitOtherIBVB");var G$T=G$z.prototype;return G$a.imps(G$T,{"laya.webgl.submit.ISubmit":!0}),G$T.releaseRender=function(){var G$T=G$z._cache;(G$T[G$T._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},G$T.getRenderType=function(){return 10009},G$T.renderSubmit=function(){var G$T=this._shaderValue.textureHost;if(G$T){var G$l=G$T.source;if(!G$T.bitmap||!G$l)return 1;this._shaderValue.texture=G$l}this._vb.bind_upload(this._ib);var G$w=G$iT.worldMatrix4,G$u=G$r.TEMP;G$r.mulPre(this._mat,G$w[0],G$w[1],G$w[4],G$w[5],G$w[12],G$w[13],G$u);var G$p=G$iT.worldMatrix4=G$z.tempMatrix4;G$p[0]=G$u.a,G$p[1]=G$u.b,G$p[4]=G$u.c,G$p[5]=G$u.d,G$p[12]=G$u.tx,G$p[13]=G$u.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var G$D=G$mT.mainContext;return G$d.activeBlendFunction!==this._blendFn&&(G$D.enable(3042),this._blendFn(G$D),G$d.activeBlendFunction=this._blendFn),G$y.drawCall++,G$y.trianglesFaces+=this._numEle/3,G$D.drawElements(4,this._numEle,5123,this.startIndex),G$iT.worldMatrix4=G$w,G$OT.activeShader=null,1},G$z.create=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){void 0===G$J&&(G$J=0);var G$q=G$z._cache._length?G$z._cache[--G$z._cache._length]:new G$z;G$q._ib=G$w,G$q._vb=G$l,G$q._numEle=G$u,G$q._shader=G$p,G$q._shaderValue=G$D;var G$M=G$T._nBlendType;switch(G$q._blendFn=G$T._targets?G$d.targetFns[G$M]:G$d.fns[G$M],G$J){case 0:G$q.offset=0,G$q.startIndex=G$j/(G$tT.BYTES_PE*G$l.vertexStride)*1.5,G$q.startIndex*=G$tT.BYTES_PIDX;break;case 1:G$q.startIndex=G$P,G$q.offset=G$j}return G$q},G$z._cache=((G$z._cache=[])._length=0,G$z._cache),G$z.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G$z}(),G$qT=function(){function G$w(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new G$Q,this.screenRect=new G$Q}G$b(G$w,"laya.webgl.submit.SubmitScissor");var G$T=G$w.prototype;return G$a.imps(G$T,{"laya.webgl.submit.ISubmit":!0}),G$T._scissor=function(G$T,G$l,G$w,G$u){var G$p=G$iT.worldMatrix4,G$D=G$p[0],G$P=G$p[5],G$j=G$p[12],G$J=G$p[13];if(G$u*=G$P,(G$w*=G$D)<1||G$u<1)return!1;var G$q=(G$T=G$T*G$D+G$j)+G$w,G$M=(G$l=G$l*G$P+G$J)+G$u;G$T<0&&(G$w=G$q-(G$T=0)),G$l<0&&(G$u=G$M-(G$l=0));var G$z=G$iT.worldClipRect;if(G$T=Math.max(G$T,G$z.x),G$l=Math.max(G$l,G$z.y),G$w=Math.min(G$q,G$z.right)-G$T,G$u=Math.min(G$M,G$z.bottom)-G$l,G$w<1||G$u<1)return!1;var G$b=G$iT.worldScissorTest;return this.screenRect.copyFrom(G$z),G$z.x=G$T,G$z.y=G$l,G$z.width=G$w,G$z.height=G$u,G$iT.worldScissorTest=!0,G$l=G$iT.height-G$l-G$u,G$mT.mainContext.scissor(G$T,G$l,G$w,G$u),G$mT.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),G$b?(G$l=G$iT.height-this.screenRect.y-this.screenRect.height,G$mT.mainContext.scissor(this.screenRect.x,G$l,this.screenRect.width,this.screenRect.height),G$mT.mainContext.enable(3089)):(G$mT.mainContext.disable(3089),G$iT.worldScissorTest=!1),G$z.copyFrom(this.screenRect),!0},G$T._scissorWithTagart=function(G$T,G$l,G$w,G$u){if(G$w<1||G$u<1)return!1;var G$p=G$T+G$w,G$D=G$l+G$u;G$T<0&&(G$w=G$p-(G$T=0)),G$l<0&&(G$u=G$D-(G$l=0));var G$P=G$iT.worldClipRect;if(G$T=Math.max(G$T,G$P.x),G$l=Math.max(G$l,G$P.y),G$w=Math.min(G$p,G$P.right)-G$T,G$u=Math.min(G$D,G$P.bottom)-G$l,G$w<1||G$u<1)return!1;var G$j=G$iT.worldScissorTest;return this.screenRect.copyFrom(G$P),G$iT.worldScissorTest=!0,G$P.x=G$T,G$P.y=G$l,G$P.width=G$w,G$P.height=G$u,G$l=G$iT.height-G$l-G$u,G$mT.mainContext.scissor(G$T,G$l,G$w,G$u),G$mT.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),G$j?(G$l=G$iT.height-this.screenRect.y-this.screenRect.height,G$mT.mainContext.scissor(this.screenRect.x,G$l,this.screenRect.width,this.screenRect.height),G$mT.mainContext.enable(3089)):(G$mT.mainContext.disable(3089),G$iT.worldScissorTest=!1),G$P.copyFrom(this.screenRect),!0},G$T.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},G$T.getRenderType=function(){return 0},G$T.releaseRender=function(){var G$T=G$w._cache;(G$T[G$T._length++]=this).context=null},G$w.create=function(G$T){var G$l=G$w._cache._length?G$w._cache[--G$w._cache._length]:new G$w;return G$l.context=G$T,G$l},G$w._cache=((G$w._cache=[])._length=0,G$w._cache),G$w}(),G$MT=function(){function G$J(){this.step=0,this.blendMode=null,this.level=0}G$b(G$J,"laya.webgl.submit.SubmitStencil");var G$T=G$J.prototype;return G$a.imps(G$T,{"laya.webgl.submit.ISubmit":!0}),G$T.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},G$T.getRenderType=function(){return 0},G$T.releaseRender=function(){var G$T=G$J._cache;G$T[G$T._length++]=this},G$T.do1=function(){var G$T=G$mT.mainContext;G$T.enable(2960),G$T.clear(1024),G$T.colorMask(!1,!1,!1,!1),G$T.stencilFunc(514,this.level,255),G$T.stencilOp(7680,7680,7682)},G$T.do2=function(){var G$T=G$mT.mainContext;G$T.stencilFunc(514,this.level+1,255),G$T.colorMask(!0,!0,!0,!0),G$T.stencilOp(7680,7680,7680)},G$T.do3=function(){var G$T=G$mT.mainContext;G$T.colorMask(!0,!0,!0,!0),G$T.stencilOp(7680,7680,7680),G$T.clear(1024),G$T.disable(2960)},G$T.do4=function(){var G$T=G$mT.mainContext;0==this.level&&(G$T.enable(2960),G$T.clear(1024)),G$T.colorMask(!1,!1,!1,!1),G$T.stencilFunc(519,0,255),G$T.stencilOp(7680,7680,7682)},G$T.do5=function(){var G$T=G$mT.mainContext;G$T.stencilFunc(514,this.level,255),G$T.colorMask(!0,!0,!0,!0),G$T.stencilOp(7680,7680,7680)},G$T.do6=function(){var G$T=G$mT.mainContext;G$d.targetFns[G$d.TOINT[this.blendMode]](G$T)},G$T.do7=function(){var G$T=G$mT.mainContext;G$T.colorMask(!1,!1,!1,!1),G$T.stencilOp(7680,7680,7683)},G$T.do8=function(){var G$T=G$mT.mainContext;G$T.colorMask(!0,!0,!0,!0),G$T.stencilFunc(514,this.level,255),G$T.stencilOp(7680,7680,7680)},G$J.restore=function(G$T,G$l,G$w,G$u,G$p){var G$D;if((G$T._renderKey=0)<G$J._mask&&G$J._mask--,0==G$J._mask)G$D=laya.webgl.submit.SubmitStencil.create(3),G$T.addRenderObject(G$D),G$T._curSubmit=G$DT.RENDERBASE;else{G$D=laya.webgl.submit.SubmitStencil.create(7),G$T.addRenderObject(G$D);var G$P=G$T._vb;G$P._byteLength;if(G$AT.fillRectImgVb(G$P,null,G$l.x,G$l.y,G$l.width,G$l.height,G$F.DEF_UV,G$w,G$u,G$p,0,0)){G$T._shader2D.glTexture=null;var G$j=G$T._curSubmit=G$DT.createSubmit(G$T,G$T._ib,G$P,(G$P._byteLength-64)/32*3,G$sT.create(2,0));G$j.shaderValue.ALPHA=1,G$T._submits[G$T._submits._length++]=G$j,G$T._curSubmit._numEle+=6,G$T._curSubmit=G$DT.RENDERBASE}else alert("clipRect calc stencil rect error");G$D=laya.webgl.submit.SubmitStencil.create(8),G$T.addRenderObject(G$D)}},G$J.restore2=function(G$T,G$l){var G$w;(G$T._renderKey=0)<G$J._mask&&G$J._mask--,0==G$J._mask?(G$w=laya.webgl.submit.SubmitStencil.create(3),G$T.addRenderObject(G$w),G$T._curSubmit=G$DT.RENDERBASE):(G$w=laya.webgl.submit.SubmitStencil.create(7),G$T.addRenderObject(G$w),G$T._submits[G$T._submits._length++]=G$l,G$w=laya.webgl.submit.SubmitStencil.create(8),G$T.addRenderObject(G$w))},G$J.create=function(G$T){var G$l=G$J._cache._length?G$J._cache[--G$J._cache._length]:new G$J;return 5==(G$l.step=G$T)&&++G$J._mask,G$l.level=G$J._mask,G$l},G$J._cache=((G$J._cache=[])._length=0,G$J._cache),G$J._mask=0,G$J}(),G$zT=function(){function G$j(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}G$b(G$j,"laya.webgl.submit.SubmitTarget");var G$T=G$j.prototype;return G$a.imps(G$T,{"laya.webgl.submit.ISubmit":!0}),G$T.renderSubmit=function(){this._vb.bind_upload(this._ib);var G$T=this.scope.getValue(this.proName);return G$T&&(this.shaderValue.texture=G$T.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[G$T.width,G$T.height]),this.shaderValue.upload(),this.blend(),G$y.drawCall++,G$y.trianglesFaces+=this._numEle/3,G$mT.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},G$T.blend=function(){if(G$d.activeBlendFunction!==G$d.fns[this.blendType]){var G$T=G$mT.mainContext;G$T.enable(3042),G$d.fns[this.blendType](G$T),G$d.activeBlendFunction=G$d.fns[this.blendType]}},G$T.getRenderType=function(){return 0},G$T.releaseRender=function(){var G$T=G$j._cache;(G$T[G$T._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},G$j.create=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=G$j._cache._length?G$j._cache[--G$j._cache._length]:new G$j;return G$P._ib=G$l,G$P._vb=G$w,G$P.proName=G$D,G$P._startIdx=G$u*G$tT.BYTES_PIDX,G$P._numEle=0,G$P.blendType=G$T._nBlendType,G$P.shaderValue=G$p,G$P.shaderValue.setValue(G$T._shader2D),G$P},G$j._cache=((G$j._cache=[])._length=0,G$j._cache),G$j}(),G$bT=function(){function G$T(){this._sourceStr=null}G$b(G$T,"laya.webgl.text.CharSegment");var G$l=G$T.prototype;return G$a.imps(G$l,{"laya.webgl.text.ICharSegment":!0}),G$l.textToSpit=function(G$T){this._sourceStr=G$T},G$l.getChar=function(G$T){return this._sourceStr.charAt(G$T)},G$l.getCharCode=function(G$T){return this._sourceStr.charCodeAt(G$T)},G$l.length=function(){return this._sourceStr.length},G$T}(),G$KT=function(){var G$T;function G$y(){}return G$b(G$y,"laya.webgl.text.DrawText"),G$y.__init__=function(){G$y._charsTemp=new Array,G$y._drawValue=new G$T,G$y._charSeg=new G$bT},G$y.customCharSeg=function(G$T){G$y._charSeg=G$T},G$y.getChar=function(G$T,G$l,G$w){var G$u=G$hT.createOneChar(G$T,G$w);return-1!=G$l&&(G$y._charsCache[G$l]=G$u),G$u},G$y._drawSlow=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$z,G$b,G$K,G$Y){var G$t,G$A,G$L=G$y._drawValue.value(G$D,G$j,G$J,G$q,G$b,G$K,G$Y),G$i=0,G$W=0,G$m=G$y._charsTemp,G$c=0,G$a=NaN;if(G$u)for(G$m.length=G$u.length,G$i=0,G$W=G$u.length;G$i<G$W;G$i++)(G$A=G$u[G$i])&&(G$a=G$A.charNum+G$L.txtID,G$m[G$i]=G$t=G$y._charsCache[G$a]||G$y.getChar(G$A.char,G$a,G$L),G$t.active());else{var G$B=G$w instanceof laya.utils.WordText?G$w.toString():G$w;if(G$R.CharacterCache){G$y._charSeg.textToSpit(G$B);var G$s=G$y._charSeg.length();for(G$i=0,G$W=G$m.length=G$s;G$i<G$W;G$i++)G$a=G$y._charSeg.getCharCode(G$i)+G$L.txtID,G$m[G$i]=G$t=G$y._charsCache[G$a]||G$y.getChar(G$y._charSeg.getChar(G$i),G$a,G$L),G$t.active(),G$c+=G$t.cw}else G$m.length=0,(G$t=G$y.getChar(G$B,-1,G$L)).active(),G$c+=G$t.cw,G$m[0]=G$t}var G$r=0;null!==G$P&&"left"!==G$P&&(G$r=-("center"==G$P?G$c/2:G$c));var G$I,G$Q,G$o=NaN,G$e=0;if(G$u)for(G$i=0,G$W=G$m.length;G$i<G$W;G$i++)G$t=G$m[G$i],G$A=G$u[G$i],G$t&&G$A&&!G$t.isSpace&&(G$o=G$t.borderSize,G$I=G$t.texture,G$l._drawText(G$I,G$M+G$r+G$A.x*G$b-G$o,G$z+G$A.y*G$K-G$o,G$I.width,G$I.height,G$p,0,0,0,0));else{for(G$i=0,G$W=G$m.length;G$i<G$W;G$i++)(G$t=G$m[G$i])&&!G$t.isSpace&&(G$o=G$t.borderSize,G$I=G$t.texture,G$l._drawText(G$I,G$M+G$r-G$o,G$z-G$o,G$I.width,G$I.height,G$p,0,0,0,0),G$T&&((G$Q=G$T[G$e++])||(G$Q=G$T[G$e-1]=[]),G$Q[0]=G$I,G$Q[1]=G$r-G$o,G$Q[2]=-G$o)),G$r+=G$t.cw;G$T&&(G$T.length=G$e)}},G$y._drawFast=function(G$T,G$l,G$w,G$u,G$p){for(var G$D,G$P,G$j=0,G$J=G$T.length;G$j<G$J;G$j++)(G$D=(G$P=G$T[G$j])[0]).active(),G$l._drawText(G$D,G$u+G$P[1],G$p+G$P[2],G$D.width,G$D.height,G$w,0,0,0,0)},G$y.drawText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$z){if(void 0===G$z&&(G$z=0),!(G$l&&0===G$l.length||G$w&&0===G$w.length)){var G$b=G$u.a,G$K=G$u.d;(0!==G$u.b||0!==G$u.c)&&(G$b=G$K=1);var G$Y=1!==G$b||1!==G$K;if(G$Y&&G$a.stage.transform){var G$t=G$a.stage.transform;G$Y=G$t.a===G$b&&G$t.d===G$K}else G$Y=!1;if(G$Y){var G$A=(G$u=G$u.copyTo(G$BT._tmpMatrix)).tx,G$L=G$u.ty;G$u.scale(1/G$b,1/G$K),G$u._checkTransform(),G$q*=G$b,G$M*=G$K,G$q+=G$A-G$u.tx,G$M+=G$L-G$u.ty}else G$b=G$K=1;if(G$w)G$y._drawSlow(null,G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$b,G$K,G$z);else{if(null===G$l.toUpperCase){var G$i=G$b+1e5*G$K,G$W=G$l;return void(G$W.changed||G$W.id!==G$i?(G$W.id=G$i,G$W.changed=!1,G$y._drawSlow(G$W.save,G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$b,G$K,G$z)):G$y._drawFast(G$W.save,G$T,G$u,G$q,G$M))}var G$m=G$l+G$p.toString()+G$P+G$j+G$J+G$b+G$K+G$D,G$c=G$y._textsCache[G$m];G$R.CharacterCache?G$c?G$y._drawFast(G$c,G$T,G$u,G$q,G$M):(G$y._textsCache.__length||(G$y._textsCache.__length=0),G$y._textsCache.__length>G$B.WebGLTextCacheCount&&((G$y._textsCache={}).__length=0,G$y._curPoolIndex=0),G$y._textCachesPool[G$y._curPoolIndex]?(G$c=G$y._textsCache[G$m]=G$y._textCachesPool[G$y._curPoolIndex]).length=0:G$y._textCachesPool[G$y._curPoolIndex]=G$c=G$y._textsCache[G$m]=[],G$y._textsCache.__length++,G$y._curPoolIndex++,G$y._drawSlow(G$c,G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$b,G$K,G$z)):G$y._drawSlow(G$c,G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$b,G$K,G$z)}}},G$y._charsTemp=null,G$y._textCachesPool=[],G$y._curPoolIndex=0,G$y._charsCache={},G$y._textsCache={},G$y._drawValue=null,G$y.d=[],G$y._charSeg=null,G$y.__init$=function(){G$T=function(){function G$J(){}return G$b(G$J,""),G$J.prototype.value=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this.font=G$T,this.fillColor=G$l,this.borderColor=G$w,this.lineWidth=G$u,this.scaleX=G$p,this.scaleY=G$D,this.underLine=G$P;var G$j=G$T.toString()+G$p+G$D+G$u+(G$l?G$l.toLowerCase():" ")+(G$w?G$w.toLowerCase():" ")+G$P;return this.txtID=G$J._keymap[G$j],this.txtID||(this.txtID=1e-7*++G$J._keymapCount,G$J._keymap[G$j]=this.txtID),this},G$J.clear=function(){G$J._keymap={},G$J._keymapCount=1},G$J._keymap={},G$J._keymapCount=1,G$J}()},G$y}(),G$YT=function(){function G$p(G$T){this._index=0,this._size=14,this._italic=-2,G$p._cache2=G$p._cache2||[],this.setFont(G$T||"14px Arial")}G$b(G$p,"laya.webgl.text.FontInContext");var G$T=G$p.prototype;return G$T.setFont=function(G$T){var G$l=G$p._cache2[G$T];if(G$l)this._words=G$l[0],this._size=G$l[1];else{this._words=G$T.split(" ");for(var G$w=0,G$u=this._words.length;G$w<G$u;G$w++)if(0<this._words[G$w].indexOf("px")){this._index=G$w;break}this._size=parseInt(this._words[this._index]),G$p._cache2[G$T]=[this._words,this._size]}this._text=null,this._italic=-2},G$T.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},G$T.hasType=function(G$T){for(var G$l=0,G$w=this._words.length;G$l<G$w;G$l++)if(this._words[G$l]===G$T)return G$l;return-1},G$T.removeType=function(G$T){for(var G$l=0,G$w=this._words.length;G$l<G$w;G$l++)if(this._words[G$l]===G$T){this._words.splice(G$l,1),this._index>G$l&&this._index--;break}this._text=null,this._italic=-2},G$T.copyTo=function(G$T){return G$T._text=this._text,G$T._size=this._size,G$T._index=this._index,G$T._words=this._words.slice(),G$T._italic=-2,G$T},G$T.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},G$u(0,G$T,"size",function(){return this._size},function(G$T){this._size=G$T,this._words[this._index]=G$T+"px",this._text=null}),G$p.create=function(G$T){var G$l=G$p._cache[G$T];return G$l||(G$l=G$p._cache[G$T]=new G$p(G$T))},G$p.EMPTY=new G$p,G$p._cache={},G$p._cache2=null,G$p}(),G$tT=function(){function G$T(){}return G$b(G$T,"laya.webgl.utils.CONST3D2D"),G$T.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G$T.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],G$T.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],G$T._TMPARRAY=[],G$T._OFFSETX=0,G$T._OFFSETY=0,G$P(G$T,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),G$T}(),G$AT=function(){function G$Y(){}return G$b(G$Y,"laya.webgl.utils.GlUtils"),G$Y.make2DProjection=function(G$T,G$l,G$w){return[2/G$T,0,0,0,0,-2/G$l,0,0,0,0,2/G$w,0,-1,1,0,1]},G$Y.fillIBQuadrangle=function(G$T,G$l){if(65535/4<G$l)throw Error("IBQuadrangle count:"+G$l+" must<:"+Math.floor(65535/4));G$l=Math.floor(G$l),G$T._resizeBuffer(6*(G$l+1)*2,!1),G$T.byteLength=G$T.bufferLength;for(var G$w=G$T.getUint16Array(),G$u=0,G$p=0;G$p<G$l;G$p++)G$w[G$u++]=4*G$p,G$w[G$u++]=4*G$p+2,G$w[G$u++]=4*G$p+1,G$w[G$u++]=4*G$p,G$w[G$u++]=4*G$p+3,G$w[G$u++]=4*G$p+2;return G$T.setNeedUpload(),!0},G$Y.expandIBQuadrangle=function(G$T,G$l){G$T.bufferLength>=6*G$l*2||G$Y.fillIBQuadrangle(G$T,G$l)},G$Y.mathCeilPowerOfTwo=function(G$T){return G$T--,G$T|=G$T>>1,G$T|=G$T>>2,G$T|=G$T>>4,G$T|=G$T>>8,G$T|=G$T>>16,++G$T},G$Y.fillQuadrangleImgVb=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){var G$J=16+(G$T._byteLength>>2);G$T.byteLength=G$J<<2;var G$q=G$T.getFloat32Array();G$q[(G$J-=16)+2]=G$p[0],G$q[G$J+3]=G$p[1],G$q[G$J+6]=G$p[2],G$q[G$J+7]=G$p[3],G$q[G$J+10]=G$p[4],G$q[G$J+11]=G$p[5],G$q[G$J+14]=G$p[6],G$q[G$J+15]=G$p[7];var G$M=G$D.a,G$z=G$D.b,G$b=G$D.c,G$K=G$D.d;if(1!==G$M||0!==G$z||0!==G$b||1!==G$K){G$D.bTransform=!0;var G$Y=G$D.tx+G$P,G$t=G$D.ty+G$j;G$q[G$J]=(G$u[0]+G$l)*G$M+(G$u[1]+G$w)*G$b+G$Y,G$q[G$J+1]=(G$u[0]+G$l)*G$z+(G$u[1]+G$w)*G$K+G$t,G$q[G$J+4]=(G$u[2]+G$l)*G$M+(G$u[3]+G$w)*G$b+G$Y,G$q[G$J+5]=(G$u[2]+G$l)*G$z+(G$u[3]+G$w)*G$K+G$t,G$q[G$J+8]=(G$u[4]+G$l)*G$M+(G$u[5]+G$w)*G$b+G$Y,G$q[G$J+9]=(G$u[4]+G$l)*G$z+(G$u[5]+G$w)*G$K+G$t,G$q[G$J+12]=(G$u[6]+G$l)*G$M+(G$u[7]+G$w)*G$b+G$Y,G$q[G$J+13]=(G$u[6]+G$l)*G$z+(G$u[7]+G$w)*G$K+G$t}else G$D.bTransform=!1,G$l+=G$D.tx+G$P,G$w+=G$D.ty+G$j,G$q[G$J]=G$l+G$u[0],G$q[G$J+1]=G$w+G$u[1],G$q[G$J+4]=G$l+G$u[2],G$q[G$J+5]=G$w+G$u[3],G$q[G$J+8]=G$l+G$u[4],G$q[G$J+9]=G$w+G$u[5],G$q[G$J+12]=G$l+G$u[6],G$q[G$J+13]=G$w+G$u[7];return G$T._upload=!0},G$Y.fillTranglesVB=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){var G$j=(G$T._byteLength>>2)+G$u.length;G$T.byteLength=G$j<<2;var G$J=G$T.getFloat32Array();G$j-=G$u.length;for(var G$q=G$u.length,G$M=G$p.a,G$z=G$p.b,G$b=G$p.c,G$K=G$p.d,G$Y=0;G$Y<G$q;G$Y+=4)if(G$J[G$j+G$Y+2]=G$u[G$Y+2],G$J[G$j+G$Y+3]=G$u[G$Y+3],1!==G$M||0!==G$z||0!==G$b||1!==G$K){G$p.bTransform=!0;var G$t=G$p.tx+G$D,G$A=G$p.ty+G$P;G$J[G$j+G$Y]=(G$u[G$Y]+G$l)*G$M+(G$u[G$Y+1]+G$w)*G$b+G$t,G$J[G$j+G$Y+1]=(G$u[G$Y]+G$l)*G$z+(G$u[G$Y+1]+G$w)*G$K+G$A}else G$p.bTransform=!1,G$l+=G$p.tx+G$D,G$w+=G$p.ty+G$P,G$J[G$j+G$Y]=G$l+G$u[G$Y],G$J[G$j+G$Y+1]=G$w+G$u[G$Y+1];return G$T._upload=!0},G$Y.copyPreImgVb=function(G$T,G$l,G$w){var G$u=G$T._byteLength>>2;G$T.byteLength=G$u+16<<2;for(var G$p=G$T.getFloat32Array(),G$D=0,G$P=G$u-16;G$D<4;G$D++)G$p[G$u]=G$p[G$P]+G$l,++G$P,G$p[++G$u]=G$p[G$P]+G$w,++G$P,G$p[++G$u]=G$p[G$P],++G$P,G$p[++G$u]=G$p[G$P],++G$u,++G$P;G$T._upload=!0},G$Y.fillRectImgVb=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$z,G$b){void 0===G$b&&(G$b=!1);var G$K,G$Y,G$t,G$A,G$L,G$i,G$W,G$m,G$c,G$a,G$B,G$s,G$r,G$I,G$Q,G$o,G$e=1,G$y=G$j.a,G$v=G$j.b,G$x=G$j.c,G$R=G$j.d,G$F=G$l&&G$l.width<99999999;if(1!==G$y||0!==G$v||0!==G$x||1!==G$R?(G$j.bTransform=!0,0===G$v&&0===G$x&&(G$e=23,G$c=G$p+G$w,G$a=G$D+G$u,G$K=G$y*G$w+(G$B=G$j.tx+G$J),G$t=G$y*G$c+G$B,G$Y=G$R*G$u+(G$s=G$j.ty+G$q),G$A=G$R*G$a+G$s)):(G$e=23,G$j.bTransform=!1,G$t=(G$K=G$w+G$j.tx+G$J)+G$p,G$A=(G$Y=G$u+G$j.ty+G$q)+G$D),G$F&&(G$L=G$l.x,G$i=G$l.y,G$W=G$l.width+G$L,G$m=G$l.height+G$i),1!==G$e){if(Math.min(G$K,G$t)>=G$W)return!1;if(Math.min(G$Y,G$A)>=G$m)return!1;if(Math.max(G$t,G$K)<=G$L)return!1;if(Math.max(G$A,G$Y)<=G$i)return!1}var G$O=G$T._byteLength>>2;G$T.byteLength=16+G$O<<2;var G$$=G$T.getFloat32Array();switch(G$$[2+G$O]=G$P[0],G$$[3+G$O]=G$P[1],G$$[6+G$O]=G$P[2],G$$[7+G$O]=G$P[3],G$$[10+G$O]=G$P[4],G$$[11+G$O]=G$P[5],G$$[14+G$O]=G$P[6],G$$[15+G$O]=G$P[7],G$e){case 1:G$B=G$j.tx+G$J,G$s=G$j.ty+G$q;var G$Z=G$y*G$w,G$H=G$x*G$u,G$X=G$R*G$u,G$k=G$v*G$w,G$n=G$y*(G$c=G$p+G$w),G$d=G$x*(G$a=G$D+G$u),G$G=G$R*G$a,G$N=G$v*G$c;G$b?(G$r=G$Z+G$H+G$B,G$Q=Math.round(G$r)-G$r,G$I=G$X+G$k+G$s,G$o=Math.round(G$I)-G$I,G$$[G$O]=G$r+G$Q,G$$[1+G$O]=G$I+G$o,G$$[4+G$O]=G$n+G$H+G$B+G$Q,G$$[5+G$O]=G$X+G$N+G$s+G$o,G$$[8+G$O]=G$n+G$d+G$B+G$Q,G$$[9+G$O]=G$G+G$N+G$s+G$o,G$$[12+G$O]=G$Z+G$d+G$B+G$Q,G$$[13+G$O]=G$G+G$k+G$s+G$o):(G$$[G$O]=G$Z+G$H+G$B,G$$[1+G$O]=G$X+G$k+G$s,G$$[4+G$O]=G$n+G$H+G$B,G$$[5+G$O]=G$X+G$N+G$s,G$$[8+G$O]=G$n+G$d+G$B,G$$[9+G$O]=G$G+G$N+G$s,G$$[12+G$O]=G$Z+G$d+G$B,G$$[13+G$O]=G$G+G$k+G$s);break;case 23:G$b?(G$r=G$K+G$M,G$Q=Math.round(G$r)-G$r,G$I=G$Y,G$o=Math.round(G$I)-G$I,G$$[G$O]=G$r+G$Q,G$$[1+G$O]=G$I+G$o,G$$[4+G$O]=G$t+G$M+G$Q,G$$[5+G$O]=G$Y+G$o,G$$[8+G$O]=G$t+G$Q,G$$[9+G$O]=G$A+G$o,G$$[12+G$O]=G$K+G$Q,G$$[13+G$O]=G$A+G$o):(G$$[G$O]=G$K+G$M,G$$[1+G$O]=G$Y,G$$[4+G$O]=G$t+G$M,G$$[5+G$O]=G$Y,G$$[8+G$O]=G$t,G$$[9+G$O]=G$A,G$$[12+G$O]=G$K,G$$[13+G$O]=G$A)}return G$T._upload=!0},G$Y.fillLineVb=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){var G$J=.5*G$P,G$q=G$Y._fillLineArray,G$M=-(G$u-G$D),G$z=G$w-G$p,G$b=Math.sqrt(G$M*G$M+G$z*G$z);G$M/=G$b,G$z/=G$b,G$M*=G$J,G$z*=G$J,G$q[0]=G$w-G$M,G$q[1]=G$u-G$z,G$q[4]=G$w+G$M,G$q[5]=G$u+G$z,G$q[8]=G$p+G$M,G$q[9]=G$D+G$z,G$q[12]=G$p-G$M,G$q[13]=G$D-G$z,G$j&&G$j.transformPointArray(G$q,G$q);var G$K=16+(G$T._byteLength>>2);return G$T.byteLength=G$K<<2,G$T.insertData(G$q,G$K-16),!0},G$Y._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G$Y}(),G$LT=(function(){function G$J(){}G$b(G$J,"laya.webgl.utils.MatirxArray"),G$J.ArrayMul=function(G$T,G$l,G$w){if(G$T)if(G$l)for(var G$u=NaN,G$p=NaN,G$D=NaN,G$P=NaN,G$j=0;G$j<4;G$j++)G$u=G$T[G$j],G$p=G$T[G$j+4],G$D=G$T[G$j+8],G$P=G$T[G$j+12],G$w[G$j]=G$u*G$l[0]+G$p*G$l[1]+G$D*G$l[2]+G$P*G$l[3],G$w[G$j+4]=G$u*G$l[4]+G$p*G$l[5]+G$D*G$l[6]+G$P*G$l[7],G$w[G$j+8]=G$u*G$l[8]+G$p*G$l[9]+G$D*G$l[10]+G$P*G$l[11],G$w[G$j+12]=G$u*G$l[12]+G$p*G$l[13]+G$D*G$l[14]+G$P*G$l[15];else G$J.copyArray(G$T,G$w);else G$J.copyArray(G$l,G$w)},G$J.copyArray=function(G$T,G$l){if(G$T&&G$l)for(var G$w=0;G$w<G$T.length;G$w++)G$l[G$w]=G$T[G$w]}}(),function(){function G$l(G$T,G$l,G$w){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=G$T,this._vb=new G$_T(G$T,35048),G$l&&this._vb._resizeBuffer(G$l,!1),this._ib=new G$ST,G$w&&this._ib._resizeBuffer(G$w,!1)}G$b(G$l,"laya.webgl.utils.Mesh2D");var G$T=G$l.prototype;return G$T.cloneWithNewVB=function(){var G$T=new G$l(this._stride,0,0);return G$T._ib=this._ib,G$T._quadNum=this._quadNum,G$T._attribInfo=this._attribInfo,G$T},G$T.cloneWithNewVBIB=function(){var G$T=new G$l(this._stride,0,0);return G$T._attribInfo=this._attribInfo,G$T},G$T.getVBW=function(){return this._vb.setNeedUpload(),this._vb},G$T.getVBR=function(){return this._vb},G$T.getIBR=function(){return this._ib},G$T.getIBW=function(){return this._ib.setNeedUpload(),this._ib},G$T.createQuadIB=function(G$T){this._quadNum=G$T,this._ib._resizeBuffer(6*G$T*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var G$l=this._ib.getUint16Array(),G$w=0,G$u=0,G$p=0;G$p<G$T;G$p++)G$l[G$w++]=G$u,G$l[G$w++]=G$u+2,G$l[G$w++]=G$u+1,G$l[G$w++]=G$u,G$l[G$w++]=G$u+3,G$l[G$w++]=G$u+2,G$u+=4;this._ib.setNeedUpload()},G$T.setAttributes=function(G$T){if(this._attribInfo=G$T,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},G$T.getEleNum=function(){return this._ib.getBuffer().byteLength/2},G$T.releaseMesh=function(){},G$T.destroy=function(){},G$T.clearVB=function(){this._vb.clear()},G$l._gvaoid=0,G$l}()),G$iT=function(){function G$p(){}return G$b(G$p,"laya.webgl.utils.RenderState2D"),G$p.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},G$p.mat2MatArray=function(G$T,G$l){var G$w=G$T,G$u=G$l;return G$u[0]=G$w.a,G$u[1]=G$w.b,G$u[2]=G$p.EMPTYMAT4_ARRAY[2],G$u[3]=G$p.EMPTYMAT4_ARRAY[3],G$u[4]=G$w.c,G$u[5]=G$w.d,G$u[6]=G$p.EMPTYMAT4_ARRAY[6],G$u[7]=G$p.EMPTYMAT4_ARRAY[7],G$u[8]=G$p.EMPTYMAT4_ARRAY[8],G$u[9]=G$p.EMPTYMAT4_ARRAY[9],G$u[10]=G$p.EMPTYMAT4_ARRAY[10],G$u[11]=G$p.EMPTYMAT4_ARRAY[11],G$u[12]=G$w.tx,G$u[13]=G$w.ty,G$u[14]=G$p.EMPTYMAT4_ARRAY[14],G$u[15]=G$p.EMPTYMAT4_ARRAY[15],G$l},G$p.restoreTempArray=function(){G$p.TEMPMAT4_ARRAY[0]=1,G$p.TEMPMAT4_ARRAY[1]=0,G$p.TEMPMAT4_ARRAY[4]=0,G$p.TEMPMAT4_ARRAY[5]=1,G$p.TEMPMAT4_ARRAY[12]=0,G$p.TEMPMAT4_ARRAY[13]=0},G$p.clear=function(){G$p.worldScissorTest=!1,G$p.worldShaderDefines=null,G$p.worldFilters=null,G$p.worldAlpha=1,G$p.worldClipRect.x=G$p.worldClipRect.y=0,G$p.worldClipRect.width=G$p.width,G$p.worldClipRect.height=G$p.height,G$p.curRenderTarget=null},G$p._MAXSIZE=99999999,G$p.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G$p.worldMatrix4=G$p.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G$p.worldAlpha=1,G$p.worldScissorTest=!1,G$p.worldFilters=null,G$p.worldShaderDefines=null,G$p.curRenderTarget=null,G$p.width=0,G$p.height=0,G$P(G$p,["worldMatrix",function(){return this.worldMatrix=new G$r},"worldClipRect",function(){return this.worldClipRect=new G$Q(0,0,99999999,99999999)}]),G$p}(),G$WT=function(){var G$i,G$w;function G$W(G$T,G$l,G$w,G$u,G$p){var G$D=this;function G$P(G$T){var G$l=[],G$w=new G$i(G$l);return G$D._compileToTree(G$w,G$T.split("\n"),0,G$l,G$p),G$w}var G$j=G$K.now();this._VS=G$P(G$l),this._PS=G$P(G$w),this._nameMap=G$u,2<G$K.now()-G$j&&console.log("ShaderCompile use time:"+(G$K.now()-G$j)+"  size:"+G$l.length+"/"+G$w.length)}G$b(G$W,"laya.webgl.utils.ShaderCompile");var G$T=G$W.prototype;return G$T._compileToTree=function(G$T,G$l,G$w,G$u,G$p){var G$D,G$P,G$j,G$J,G$q,G$M,G$z,G$b=0,G$K=0,G$Y=0,G$t=0;for(G$K=G$w;G$K<G$l.length;G$K++)if(!((G$j=G$l[G$K]).length<1)&&0!==(G$b=G$j.indexOf("//"))){if(0<=G$b&&(G$j=G$j.substr(0,G$b)),G$D=G$z||new G$i(G$u),G$z=null,G$D.text=G$j,G$D.noCompile=!0,0<=(G$b=G$j.indexOf("#"))){for(G$J="#",G$t=G$b+1,G$Y=G$j.length;G$t<G$Y;G$t++){var G$A=G$j.charAt(G$t);if(" "===G$A||"\t"===G$A||"\r"===G$A||"\n"===G$A||"?"===G$A)break;G$J+=G$A}switch(G$D.name=G$J){case"#ifdef":case"#ifndef":if(G$D.src=G$j,G$D.noCompile=null!=G$j.match(/[!&|()=<>]/),G$D.noCompile?console.log("function():Boolean{return "+G$j.substr(G$b+G$D.name.length)+"}"):(G$M=G$j.replace(/^\s*/,"").split(/\s+/),G$D.setCondition(G$M[1],"#ifdef"===G$J?1:2),G$D.text="//"+G$D.text),G$D.setParent(G$T),G$T=G$D,G$p)for(G$M=G$j.substr(G$t).split(G$W._splitToWordExps3),G$t=0;G$t<G$M.length;G$t++)(G$j=G$M[G$t]).length&&(G$p[G$j]=!0);continue;case"#if":if(G$D.src=G$j,G$D.noCompile=!0,G$D.setParent(G$T),G$T=G$D,G$p)for(G$M=G$j.substr(G$t).split(G$W._splitToWordExps3),G$t=0;G$t<G$M.length;G$t++)(G$j=G$M[G$t]).length&&"defined"!=G$j&&(G$p[G$j]=!0);continue;case"#else":G$D.src=G$j,G$P=(G$T=G$T.parent).childs[G$T.childs.length-1],G$D.noCompile=G$P.noCompile,G$D.noCompile||(G$D.condition=G$P.condition,G$D.conditionType=1==G$P.conditionType?2:1,G$D.text="//"+G$D.text+" "+G$P.text+" "+G$D.conditionType),G$D.setParent(G$T),G$T=G$D;continue;case"#endif":G$P=(G$T=G$T.parent).childs[G$T.childs.length-1],G$D.noCompile=G$P.noCompile,G$D.noCompile||(G$D.text="//"+G$D.text),G$D.setParent(G$T);continue;case"#include":G$M=G$W.splitToWords(G$j,null);var G$L=G$W.includes[G$M[1]];if(!G$L)throw"ShaderCompile error no this include file:"+G$M[1];if((G$b=G$M[0].indexOf("?"))<0){G$D.setParent(G$T),G$j=G$L.getWith("with"==G$M[2]?G$M[3]:null),this._compileToTree(G$D,G$j.split("\n"),0,G$u,G$p),G$D.text="";continue}G$D.setCondition(G$M[0].substr(G$b+1),1),G$D.text=G$L.getWith("with"==G$M[2]?G$M[3]:null);break;case"#import":G$q=(G$M=G$W.splitToWords(G$j,null))[1],G$u.push({node:G$D,file:G$W.includes[G$q],ofs:G$D.text.length});continue}}else{if((G$P=G$T.childs[G$T.childs.length-1])&&!G$P.name){0<G$u.length&&G$W.splitToWords(G$j,G$P),G$z=G$D,G$P.text+="\n"+G$j;continue}0<G$u.length&&G$W.splitToWords(G$j,G$D)}G$D.setParent(G$T)}},G$T.createShader=function(G$T,G$l,G$w){var G$u={},G$p="";if(G$T)for(var G$D in G$T)G$p+="#define "+G$D+"\n",G$u[G$D]=!0;var G$P=this._VS.toscript(G$u,[]),G$j=this._PS.toscript(G$u,[]);return(G$w||G$UT.create)(G$p+G$P.join("\n"),G$p+G$j.join("\n"),G$l,this._nameMap)},G$W._parseOne=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P={type:G$W.shaderParamsMap[G$w[G$u+1]],name:G$w[G$u+2],size:isNaN(parseInt(G$w[G$u+3]))?1:parseInt(G$w[G$u+3])};return G$D&&("attribute"==G$p?G$T.push(G$P):G$l.push(G$P)),":"==G$w[G$u+3]&&(G$P.type=G$w[G$u+4],G$u+=2),G$u+=2},G$W.addInclude=function(G$T,G$l){if(!G$l||0===G$l.length)throw new Error("add shader include file err:"+G$T);if(G$W.includes[G$T])throw new Error("add shader include file err, has add:"+G$T);G$W.includes[G$T]=new G$w(G$l)},G$W.preGetParams=function(G$T,G$l){var G$w=[G$T,G$l],G$u={},G$p=[],G$D=[],G$P={},G$j=[];G$u.attributes=G$p,G$u.uniforms=G$D,G$u.defines=G$P;for(var G$J=0,G$q=0,G$M=0;G$M<2;G$M++){G$w[G$M]=G$w[G$M].replace(G$W._removeAnnotation,"");var G$z,G$b=G$w[G$M].match(G$W._reg);for(G$J=0,G$q=G$b.length;G$J<G$q;G$J++){var G$K=G$b[G$J];if("attribute"==G$K||"uniform"==G$K)G$J=G$W._parseOne(G$p,G$D,G$b,G$J,G$K,!0);else{if("#define"==G$K){G$j[G$K=G$b[++G$J]]=1;continue}if("#ifdef"==G$K){G$P[G$z=G$b[++G$J]]=G$P[G$z]||[];for(G$J++;G$J<G$q;G$J++)if("attribute"==(G$K=G$b[G$J])||"uniform"==G$K)G$J=G$W._parseOne(G$p,G$D,G$b,G$J,G$K,G$j[G$z]);else if("#else"==G$K)for(G$J++;G$J<G$q;G$J++)if("attribute"==(G$K=G$b[G$J])||"uniform"==G$K)G$J=G$W._parseOne(G$p,G$D,G$b,G$J,G$K,!G$j[G$z]);else if("#endif"==G$K)break}}}}return G$u},G$W.splitToWords=function(G$T,G$l){for(var G$w,G$u,G$p=[],G$D=-1,G$P=0,G$j=G$T.length;G$P<G$j;G$P++)if(G$w=G$T.charAt(G$P),0<=" \t=+-*/&%!<>()'\",;".indexOf(G$w)){if(0<=G$D&&1<G$P-G$D&&(G$u=G$T.substr(G$D,G$P-G$D),G$p.push(G$u)),'"'==G$w||"'"==G$w){var G$J=G$T.indexOf(G$w,G$P+1);if(G$J<0)throw"Sharder err:"+G$T;G$p.push(G$T.substr(G$P+1,G$J-G$P-1)),G$P=G$J,G$D=-1;continue}"("==G$w&&G$l&&0<G$p.length&&(G$u=G$p[G$p.length-1]+";","vec4;main;".indexOf(G$u)<0&&(G$l.useFuns+=G$u)),G$D=-1}else G$D<0&&(G$D=G$P);return G$D<G$j&&1<G$j-G$D&&(G$u=G$T.substr(G$D,G$j-G$D),G$p.push(G$u)),G$p},G$W.IFDEF_NO=0,G$W.IFDEF_YES=1,G$W.IFDEF_ELSE=2,G$W.IFDEF_PARENT=3,G$W._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),G$W._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),G$W._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),G$W.includes={},G$P(G$W,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),G$W.__init$=function(){G$i=function(){function G$w(G$T){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=G$T}G$b(G$w,"");var G$T=G$w.prototype;return G$T.setParent=function(G$T){G$T.childs.push(this),this.z=G$T.z+1,this.parent=G$T},G$T.setCondition=function(G$T,G$l){G$T&&(this.conditionType=G$l,G$T=G$T.replace(/(\s*$)/g,""),this.condition=function(){return this[G$T]},this.condition.__condition=G$T)},G$T.toscript=function(G$T,G$l){return this._toscript(G$T,G$l,++G$w.__id)},G$T._toscript=function(G$u,G$p,G$D){if(this.childs.length<1&&!this.text)return G$p;G$p.length;if(this.condition){var G$T=!!this.condition.call(G$u);if(2===this.conditionType&&(G$T=!G$T),!G$T)return G$p}if(this.text&&G$p.push(this.text),0<this.childs.length&&this.childs.forEach(function(G$T,G$l,G$w){G$T._toscript(G$u,G$p,G$D)}),0<this.includefiles.length&&0<this.useFuns.length)for(var G$l,G$w=0,G$P=this.includefiles.length;G$w<G$P;G$w++)this.includefiles[G$w].curUseID!=G$D&&0<(G$l=this.includefiles[G$w].file.getFunsScript(this.useFuns)).length&&(this.includefiles[G$w].curUseID=G$D,G$p[0]=G$l+G$p[0]);return G$p},G$w.__id=1,G$w}(),G$w=function(){function G$T(G$T){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=G$T;for(var G$l=0,G$w=0,G$u=0;!((G$l=G$T.indexOf("#begin",G$l))<0);){for(G$u=G$l+5;!((G$u=G$T.indexOf("#end",G$u))<0)&&"i"===G$T.charAt(G$u+4);)G$u+=5;if(G$u<0)throw"add include err,no #end:"+G$T;G$w=G$T.indexOf("\n",G$l);var G$p=G$W.splitToWords(G$T.substr(G$l,G$w-G$l),null);"code"==G$p[1]?this.codes[G$p[2]]=G$T.substr(G$w+1,G$u-G$w-1):"function"==G$p[1]&&(G$w=G$T.indexOf("function",G$l),G$w+="function".length,this.funs[G$p[3]]=G$T.substr(G$w+1,G$u-G$w-1),this.funnames+=G$p[3]+";"),G$l=G$u+1}}G$b(G$T,"");var G$l=G$T.prototype;return G$l.getWith=function(G$T){var G$l=G$T?this.codes[G$T]:this.script;if(!G$l)throw"get with error:"+G$T;return G$l},G$l.getFunsScript=function(G$T){var G$l="";for(var G$w in this.funs)0<=G$T.indexOf(G$w+";")&&(G$l+=this.funs[G$w]);return G$l},G$T}()},G$W}(),G$mT=function(){function G$P(){}return G$b(G$P,"laya.webgl.WebGL"),G$P._uint8ArraySlice=function(){for(var G$T=this.length,G$l=new Uint8Array(this.length),G$w=0;G$w<G$T;G$w++)G$l[G$w]=this[G$w];return G$l},G$P._float32ArraySlice=function(){for(var G$T=this.length,G$l=new Float32Array(this.length),G$w=0;G$w<G$T;G$w++)G$l[G$w]=this[G$w];return G$l},G$P._uint16ArraySlice=function(G$T){var G$l,G$w=arguments,G$u=0,G$p=0;if(0===G$w.length)for(G$u=this.length,G$l=new Uint16Array(G$u),G$p=0;G$p<G$u;G$p++)G$l[G$p]=this[G$p];else if(2===G$w.length){var G$D=G$w[0],G$P=G$w[1];if(G$D<G$P)for(G$u=G$P-G$D,G$l=new Uint16Array(G$u),G$p=G$D;G$p<G$P;G$p++)G$l[G$p-G$D]=this[G$p];else G$l=new Uint16Array(0)}return G$l},G$P.expandContext=function(){var G$T=G$p.prototype,G$l=CanvasRenderingContext2D.prototype;G$l.fillTrangles=G$T.fillTrangles,G$ET.__int__(null),G$l.setIBVB=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){void 0===G$J&&(G$J=0),void 0===G$q&&(G$q=0),null===G$w&&(this._ib=this._ib||G$ST.QuadrangleIB,G$w=this._ib,G$AT.expandIBQuadrangle(G$w,G$u._byteLength/64+8)),this._setIBVB(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q)},G$l.fillTrangles=function(G$T,G$l,G$w,G$u,G$p){this._curMat=this._curMat||G$r.create(),this._vb=this._vb||G$_T.create(),this._ib||(this._ib=G$ST.create(),G$AT.fillIBQuadrangle(this._ib,G$P/4));var G$D=this._vb,G$P=G$u.length>>4;G$AT.fillTranglesVB(G$D,G$l,G$w,G$u,G$p||this._curMat,0,0),G$AT.expandIBQuadrangle(this._ib,G$D._byteLength/64+8);var G$j=new G$sT(1,0);G$j.textureHost=G$T;var G$J=new G$CT("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");G$D._vertType=3,this._setIBVB(G$l,G$w,this._ib,G$D,6*G$P,G$p,G$J,G$j,0,0)}},G$P.enable=function(){if(G$K.__init__(),G$L.isConchApp&&!G$L.isConchWebGL)return G$c.skinAniSprite=function(){return new G$TT},G$P.expandContext(),!1;if(G$c.getWebGLContext=function(G$T){for(var G$l,G$w=["webgl","experimental-webgl","webkit-3d","moz-webgl"],G$u=0;G$u<G$w.length;G$u++){try{G$l=G$T.getContext(G$w[G$u],{stencil:G$B.isStencil,alpha:G$B.isAlpha,antialias:G$B.isAntialias,premultipliedAlpha:G$B.premultipliedAlpha,preserveDrawingBuffer:G$B.preserveDrawingBuffer})}catch(G$T){}if(G$l)return G$l}return null},null==(G$P.mainContext=G$P.mainContext||G$c.getWebGLContext(G$L._mainCanvas)))return!1;if(G$L.isWebGL)return!0;G$t.create=function(G$T,G$l){return new G$Tl(G$T,G$l)},G$A.create=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){return new G$fT(G$T,G$l,G$w,G$u,G$p,G$D,G$P)},G$L.WebGL=G$P,G$L.isWebGL=!0,G$KT.__init__(),G$c.createRenderSprite=function(G$T,G$l){return new G$rT(G$T,G$l)},G$c.createWebGLContext2D=function(G$T){return new G$BT(G$T)},G$c.changeWebGLSize=function(G$T,G$l){laya.webgl.WebGL.onStageResize(G$T,G$l)},G$c.createGraphics=function(){return new G$aT};var G$T=G$c.createFilterAction;return G$c.createFilterAction=G$T||function(G$T){return new G$IT},G$c.clear=function(G$T){G$iT.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var G$l=G$L.context.ctx,G$w=0==G$l._submits._length||G$B.preserveDrawingBuffer?G$Y.create(G$T)._color:G$e._wgColor;G$w&&G$l.clearBG(G$w[0],G$w[1],G$w[2],G$w[3]),G$iT.clear()},G$c.addToAtlas=function(G$T,G$l){void 0===G$l&&(G$l=!1);var G$w=G$T.bitmap;G$L.optimizeTextureMemory(G$T.url,G$T)?G$a.__typeof(G$w,"laya.webgl.resource.IMergeAtlasBitmap")&&G$w.allowMerageInAtlas&&G$w.on("recovered",G$T,G$T.addTextureToAtlas):G$w.enableMerageInAtlas=!1},G$c.isAtlas=function(G$T){return G$T instanceof laya.webgl.atlas.AtlasWebGLCanvas},G$k._enable(),G$c.beginFlush=function(){for(var G$T=G$k.instance,G$l=G$T.getAtlaserCount(),G$w=0;G$w<G$l;G$w++){var G$u=G$T.getAtlaserByIndex(G$w).texture;G$u._flashCacheImageNeedFlush&&G$c.flashFlushImage(G$u)}},G$c.drawToCanvas=function(G$T,G$l,G$w,G$u,G$p,G$D){(G$w<=0||G$u<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),G$w|=0,G$u|=0,G$p|=0,G$D|=0;var G$P=G$$T.create(G$w,G$u,6408,5121,0,!1);G$P.start(),G$P.clear(0,0,0,0),G$L.context.clear(),G$i.renders[G$l]._fun(G$T,G$L.context,G$p,G$iT.height-G$u+G$D),G$L.context.flush(),G$P.end();var G$j=G$P.getData(0,0,G$w,G$u);if(G$P.recycle(),G$j.byteLength==G$w*G$u*4){var G$J=new G$NT;G$J._canvas=G$K.createElement("canvas"),G$J.size(G$w,G$u);var G$q=G$J._canvas.getContext("2d");G$K.canvas.size(G$w,G$u);var G$M=G$K.context,G$z=G$M.createImageData(G$w,G$u);return G$z.data.set(new Uint8ClampedArray(G$j.buffer)),G$J._imgData=G$z,G$M.putImageData(G$z,0,0),G$q.save(),G$q.translate(0,G$u),G$q.scale(1,-1),G$q.drawImage(G$K.canvas.source,0,0),G$q.restore(),G$J}console.log("drawToCanvas error: w:"+G$w+",h:"+G$u+",datalen:"+G$j.byteLength)},G$c.createFilterAction=function(G$T){var G$l;switch(G$T){case 32:G$l=new G$IT}return G$l},G$c.addTextureToAtlas=function(G$T){G$T._uvID++,G$k._atlasRestore++,G$T.bitmap.enableMerageInAtlas&&G$k.instance.addToAtlas(G$T)},G$c.getTexturePixels=function(G$T,G$l,G$w,G$u,G$p){G$L.context.ctx.clear();var G$D=new G$o;G$D.graphics.drawTexture(G$T,-G$l,-G$w);var G$P=G$$T.create(G$u,G$p);G$P.start(),G$P.clear(0,0,0,0),G$D.render(G$L.context,0,0),G$L.context.ctx.flush(),G$P.end();for(var G$j=G$P.getData(0,0,G$u,G$p),G$J=[],G$q=0,G$M=G$p-1;0<=G$M;G$M--)for(var G$z=0;G$z<G$u;G$z++)G$q=4*(G$M*G$u+G$z),G$J.push(G$j[G$q]),G$J.push(G$j[G$q+1]),G$J.push(G$j[G$q+2]),G$J.push(G$j[G$q+3]);return G$J},G$c.skinAniSprite=function(){return new G$TT},G$q.create=function(G$T,G$l){var G$w=new G$NT;return G$w._imgData=G$l,G$w.flipY=!1,G$w},G$s._filterStart=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$T.getValue("bounds"),G$P=G$$T.create(G$D.width,G$D.height);if(G$P.start(),G$P.clear(0,0,0,0),G$T.addValue("src",G$P),G$T.addValue("ScissorTest",G$iT.worldScissorTest),G$iT.worldScissorTest){var G$j=new G$Q;G$j.copyFrom(G$w.ctx._clipRect),G$T.addValue("clipRect",G$j),G$iT.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},G$s._filterEnd=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$T.getValue("bounds");G$T.getValue("src").end();var G$P=G$$T.create(G$D.width,G$D.height);G$P.start(),G$P.clear(0,0,0,0),G$T.addValue("out",G$P),G$l._set$P("_filterCache",G$P),G$l._set$P("_isHaveGlowFilter",G$T.getValue("_isHaveGlowFilter"))},G$s._EndTarget=function(G$T,G$l){if(G$T.getValue("src").recycle(),G$T.getValue("out").end(),G$T.getValue("ScissorTest")){G$iT.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),G$l.ctx.save();var G$w=G$T.getValue("clipRect");G$l.ctx.clipRect(G$w.x,G$w.y,G$w.width,G$w.height)}},G$s._useSrc=function(G$T){var G$l=G$T.getValue("out");G$l.end(),(G$l=G$T.getValue("src")).start(),G$l.clear(0,0,0,0)},G$s._endSrc=function(G$T){G$T.getValue("src").end()},G$s._useOut=function(G$T){var G$l=G$T.getValue("src");G$l.end(),(G$l=G$T.getValue("out")).start(),G$l.clear(0,0,0,0)},G$s._endOut=function(G$T){G$T.getValue("out").end()},G$s._recycleScope=function(G$T){G$T.recycle()},G$s._filter=function(G$T,G$l,G$w,G$u){var G$p=this._next;if(G$p){var G$D,G$P,G$j=G$T.filters,G$J=G$j.length;if(1==G$J&&32==G$j[0].type)return G$l.ctx.save(),G$l.ctx.setFilters([G$j[0]]),G$p._fun.call(G$p,G$T,G$l,G$w,G$u),void G$l.ctx.restore();var G$q=G$jT.create(),G$M=G$I.TEMP,G$z=G$l.ctx._getTransformMatrix(),G$b=G$r.create();G$z.copyTo(G$b);var G$K=0,G$Y=0,G$t=!1,G$A=G$T._$P._filterCache?G$T._$P._filterCache:null;if(!G$A||G$T._repaint){G$t=G$T._isHaveGlowFilter(),G$q.addValue("_isHaveGlowFilter",G$t),G$t&&(G$K=50,G$Y=25),(G$P=new G$Q).copyFrom(G$T.getSelfBounds()),G$P.x+=G$T.x,G$P.y+=G$T.y,G$P.x-=G$T.pivotX+4,G$P.y-=G$T.pivotY+4;var G$L=G$P.x,G$i=G$P.y;if(G$P.width+=G$K+8,G$P.height+=G$K+8,G$M.x=G$P.x*G$b.a+G$P.y*G$b.c,G$M.y=G$P.y*G$b.d+G$P.x*G$b.b,G$P.x=G$M.x,G$P.y=G$M.y,G$M.x=G$P.width*G$b.a+G$P.height*G$b.c,G$M.y=G$P.height*G$b.d+G$P.width*G$b.b,G$P.width=G$M.x,G$P.height=G$M.y,G$P.width<=0||G$P.height<=0)return;G$A&&G$A.recycle(),G$q.addValue("bounds",G$P);var G$W=G$PT.create([G$q,G$T,G$l,0,0],G$s._filterStart);G$l.addRenderObject(G$W),G$l.ctx._renderKey=0,G$l.ctx._shader2D.glTexture=null;var G$m=G$T.x-G$L+G$Y,G$c=G$T.y-G$i+G$Y;G$p._fun.call(G$p,G$T,G$l,G$m,G$c),G$W=G$PT.create([G$q,G$T,G$l,0,0],G$s._filterEnd),G$l.addRenderObject(G$W);for(var G$a=0;G$a<G$J;G$a++){0!=G$a&&(G$W=G$PT.create([G$q],G$s._useSrc),G$l.addRenderObject(G$W),G$D=G$sT.create(1,0),G$r.TEMP.identity(),G$l.ctx.drawTarget(G$q,0,0,G$P.width,G$P.height,G$r.TEMP,"out",G$D,null,G$d.TOINT.overlay),G$W=G$PT.create([G$q],G$s._useOut),G$l.addRenderObject(G$W)),G$j[G$a].action.apply3d(G$q,G$T,G$l,0,0)}G$W=G$PT.create([G$q,G$l],G$s._EndTarget),G$l.addRenderObject(G$W)}else{if((G$t=!!G$T._$P._isHaveGlowFilter&&G$T._$P._isHaveGlowFilter)&&(G$K=50,G$Y=25),(G$P=G$T.getBounds()).width<=0||G$P.height<=0)return;G$P.width+=G$K,G$P.height+=G$K,G$M.x=G$P.x*G$b.a+G$P.y*G$b.c,G$M.y=G$P.y*G$b.d+G$P.x*G$b.b,G$P.x=G$M.x,G$P.y=G$M.y,G$M.x=G$P.width*G$b.a+G$P.height*G$b.c,G$M.y=G$P.height*G$b.d+G$P.width*G$b.b,G$P.width=G$M.x,G$P.height=G$M.y,G$q.addValue("out",G$A)}G$w=G$w-G$Y-G$T.x,G$u=G$u-G$Y-G$T.y,G$M.setTo(G$w,G$u),G$b.transformPoint(G$M),G$w=G$M.x+G$P.x,G$u=G$M.y+G$P.y,G$D=G$sT.create(1,0),G$r.TEMP.identity(),G$l.ctx.drawTarget(G$q,G$w,G$u,G$P.width,G$P.height,G$r.TEMP,"out",G$D,null,G$d.TOINT.overlay),G$W=G$PT.create([G$q],G$s._recycleScope),G$l.addRenderObject(G$W),G$b.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=G$P._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=G$P._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=G$P._uint8ArraySlice),!0},G$P.onStageResize=function(G$T,G$l){null!=G$P.mainContext&&(G$P.mainContext.viewport(0,0,G$T,G$l),G$iT.width=G$T,G$iT.height=G$l)},G$P.onInvalidGLRes=function(){G$k.instance.freeAll(),G$m.releaseContentManagers(!0),G$P.doNodeRepaint(G$a.stage),G$P.mainContext.viewport(0,0,G$iT.width,G$iT.height),G$a.stage.event("devicelost")},G$P.doNodeRepaint=function(G$T){0==G$T.numChildren&&G$T.repaint();for(var G$l=0;G$l<G$T.numChildren;G$l++)G$P.doNodeRepaint(G$T.getChildAt(G$l))},G$P.init=function(G$T,G$l,G$w){G$P.mainCanvas=G$T,G$q._createContext=function(G$T){return new G$BT(G$T)},G$NT._createContext=function(G$T){return new G$BT(G$T)};var G$u=laya.webgl.WebGL.mainContext;if(null!=G$u.getShaderPrecisionFormat){var G$p=G$u.getShaderPrecisionFormat(35633,36338),G$D=G$u.getShaderPrecisionFormat(35632,36338);G$P.shaderHighPrecision=!(!G$p.precision||!G$D.precision)}else G$P.shaderHighPrecision=!1;if(G$P.compressAstc=G$u.getExtension("WEBGL_compressed_texture_astc"),G$P.compressAtc=G$u.getExtension("WEBGL_compressed_texture_atc"),G$P.compressEtc=G$u.getExtension("WEBGL_compressed_texture_etc"),G$P.compressEtc1=G$u.getExtension("WEBGL_compressed_texture_etc1"),G$P.compressPvrtc=G$u.getExtension("WEBGL_compressed_texture_pvrtc"),G$P.compressS3tc=G$u.getExtension("WEBGL_compressed_texture_s3tc"),G$P.compressS3tc_srgb=G$u.getExtension("WEBGL_compressed_texture_s3tc_srgb"),G$P.compressAstc=G$P.compressAstc?G$P.compressAstc:{},G$P.compressAtc=G$P.compressAtc?G$P.compressAtc:{},G$P.compressEtc=G$P.compressEtc?G$P.compressEtc:{},G$P.compressEtc1=G$P.compressEtc1?G$P.compressEtc1:{},G$P.compressPvrtc=G$P.compressPvrtc?G$P.compressPvrtc:{},G$P.compressS3tc=G$P.compressS3tc?G$P.compressS3tc:{},G$P.compressS3tc_srgb=G$P.compressS3tc_srgb?G$P.compressS3tc_srgb:{},G$u.deleteTexture1=G$u.deleteTexture,G$u.deleteTexture=function(G$T){G$T==G$cT.curBindTexValue&&(G$cT.curBindTexValue=null),G$u.deleteTexture1(G$T)},G$P.onStageResize(G$l,G$w),null==G$P.mainContext)throw new Error("webGL getContext err!");G$x.__init__(),G$k.__init__(),G$oT.__init__(),G$DT.__init__(),G$BT.__init__(),G$sT.__init__(),G$S.__init__(),G$ET.__int__(G$u),G$d._init_(G$u),G$L.isConchApp&&conch.setOnInvalidGLRes(G$P.onInvalidGLRes)},G$P.mainCanvas=null,G$P.antialias=!0,G$P.shaderHighPrecision=!1,G$P._bg_null=[0,0,0,0],G$P}(),G$cT=function(){function G$u(){}return G$b(G$u,"laya.webgl.WebGLContext"),G$u.UseProgram=function(G$T){return G$u._useProgram!==G$T&&(G$mT.mainContext.useProgram(G$T),G$u._useProgram=G$T,!0)},G$u.setDepthTest=function(G$T,G$l){G$l!==G$u._depthTest&&((G$u._depthTest=G$l)?G$T.enable(2929):G$T.disable(2929))},G$u.setDepthMask=function(G$T,G$l){G$l!==G$u._depthMask&&(G$u._depthMask=G$l,G$T.depthMask(G$l))},G$u.setDepthFunc=function(G$T,G$l){G$l!==G$u._depthFunc&&(G$u._depthFunc=G$l,G$T.depthFunc(G$l))},G$u.setBlend=function(G$T,G$l){G$l!==G$u._blend&&((G$u._blend=G$l)?G$T.enable(3042):G$T.disable(3042))},G$u.setBlendFunc=function(G$T,G$l,G$w){(G$l!==G$u._sFactor||G$w!==G$u._dFactor)&&(G$u._sFactor=G$l,G$u._dFactor=G$w,G$T.blendFunc(G$l,G$w))},G$u.setCullFace=function(G$T,G$l){G$l!==G$u._cullFace&&((G$u._cullFace=G$l)?G$T.enable(2884):G$T.disable(2884))},G$u.setFrontFace=function(G$T,G$l){G$l!==G$u._frontFace&&(G$u._frontFace=G$l,G$T.frontFace(G$l))},G$u.bindTexture=function(G$T,G$l,G$w){G$T.bindTexture(G$l,G$w),G$u.curBindTexTarget=G$l,G$u.curBindTexValue=G$w},G$u.DEPTH_BUFFER_BIT=256,G$u.STENCIL_BUFFER_BIT=1024,G$u.COLOR_BUFFER_BIT=16384,G$u.POINTS=0,G$u.LINES=1,G$u.LINE_LOOP=2,G$u.LINE_STRIP=3,G$u.TRIANGLES=4,G$u.TRIANGLE_STRIP=5,G$u.TRIANGLE_FAN=6,G$u.ZERO=0,G$u.ONE=1,G$u.SRC_COLOR=768,G$u.ONE_MINUS_SRC_COLOR=769,G$u.SRC_ALPHA=770,G$u.ONE_MINUS_SRC_ALPHA=771,G$u.DST_ALPHA=772,G$u.ONE_MINUS_DST_ALPHA=773,G$u.DST_COLOR=774,G$u.ONE_MINUS_DST_COLOR=775,G$u.SRC_ALPHA_SATURATE=776,G$u.FUNC_ADD=32774,G$u.BLEND_EQUATION=32777,G$u.BLEND_EQUATION_RGB=32777,G$u.BLEND_EQUATION_ALPHA=34877,G$u.FUNC_SUBTRACT=32778,G$u.FUNC_REVERSE_SUBTRACT=32779,G$u.BLEND_DST_RGB=32968,G$u.BLEND_SRC_RGB=32969,G$u.BLEND_DST_ALPHA=32970,G$u.BLEND_SRC_ALPHA=32971,G$u.CONSTANT_COLOR=32769,G$u.ONE_MINUS_CONSTANT_COLOR=32770,G$u.CONSTANT_ALPHA=32771,G$u.ONE_MINUS_CONSTANT_ALPHA=32772,G$u.BLEND_COLOR=32773,G$u.ARRAY_BUFFER=34962,G$u.ELEMENT_ARRAY_BUFFER=34963,G$u.ARRAY_BUFFER_BINDING=34964,G$u.ELEMENT_ARRAY_BUFFER_BINDING=34965,G$u.STREAM_DRAW=35040,G$u.STATIC_DRAW=35044,G$u.DYNAMIC_DRAW=35048,G$u.BUFFER_SIZE=34660,G$u.BUFFER_USAGE=34661,G$u.CURRENT_VERTEX_ATTRIB=34342,G$u.FRONT=1028,G$u.BACK=1029,G$u.CULL_FACE=2884,G$u.FRONT_AND_BACK=1032,G$u.BLEND=3042,G$u.DITHER=3024,G$u.STENCIL_TEST=2960,G$u.DEPTH_TEST=2929,G$u.SCISSOR_TEST=3089,G$u.POLYGON_OFFSET_FILL=32823,G$u.SAMPLE_ALPHA_TO_COVERAGE=32926,G$u.SAMPLE_COVERAGE=32928,G$u.NO_ERROR=0,G$u.INVALID_ENUM=1280,G$u.INVALID_VALUE=1281,G$u.INVALID_OPERATION=1282,G$u.OUT_OF_MEMORY=1285,G$u.CW=2304,G$u.CCW=2305,G$u.LINE_WIDTH=2849,G$u.ALIASED_POINT_SIZE_RANGE=33901,G$u.ALIASED_LINE_WIDTH_RANGE=33902,G$u.CULL_FACE_MODE=2885,G$u.FRONT_FACE=2886,G$u.DEPTH_RANGE=2928,G$u.DEPTH_WRITEMASK=2930,G$u.DEPTH_CLEAR_VALUE=2931,G$u.DEPTH_FUNC=2932,G$u.STENCIL_CLEAR_VALUE=2961,G$u.STENCIL_FUNC=2962,G$u.STENCIL_FAIL=2964,G$u.STENCIL_PASS_DEPTH_FAIL=2965,G$u.STENCIL_PASS_DEPTH_PASS=2966,G$u.STENCIL_REF=2967,G$u.STENCIL_VALUE_MASK=2963,G$u.STENCIL_WRITEMASK=2968,G$u.STENCIL_BACK_FUNC=34816,G$u.STENCIL_BACK_FAIL=34817,G$u.STENCIL_BACK_PASS_DEPTH_FAIL=34818,G$u.STENCIL_BACK_PASS_DEPTH_PASS=34819,G$u.STENCIL_BACK_REF=36003,G$u.STENCIL_BACK_VALUE_MASK=36004,G$u.STENCIL_BACK_WRITEMASK=36005,G$u.VIEWPORT=2978,G$u.SCISSOR_BOX=3088,G$u.COLOR_CLEAR_VALUE=3106,G$u.COLOR_WRITEMASK=3107,G$u.UNPACK_ALIGNMENT=3317,G$u.PACK_ALIGNMENT=3333,G$u.MAX_TEXTURE_SIZE=3379,G$u.MAX_VIEWPORT_DIMS=3386,G$u.SUBPIXEL_BITS=3408,G$u.RED_BITS=3410,G$u.GREEN_BITS=3411,G$u.BLUE_BITS=3412,G$u.ALPHA_BITS=3413,G$u.DEPTH_BITS=3414,G$u.STENCIL_BITS=3415,G$u.POLYGON_OFFSET_UNITS=10752,G$u.POLYGON_OFFSET_FACTOR=32824,G$u.TEXTURE_BINDING_2D=32873,G$u.SAMPLE_BUFFERS=32936,G$u.SAMPLES=32937,G$u.SAMPLE_COVERAGE_VALUE=32938,G$u.SAMPLE_COVERAGE_INVERT=32939,G$u.NUM_COMPRESSED_TEXTURE_FORMATS=34466,G$u.COMPRESSED_TEXTURE_FORMATS=34467,G$u.DONT_CARE=4352,G$u.FASTEST=4353,G$u.NICEST=4354,G$u.GENERATE_MIPMAP_HINT=33170,G$u.BYTE=5120,G$u.UNSIGNED_BYTE=5121,G$u.SHORT=5122,G$u.UNSIGNED_SHORT=5123,G$u.INT=5124,G$u.UNSIGNED_INT=5125,G$u.FLOAT=5126,G$u.DEPTH_COMPONENT=6402,G$u.ALPHA=6406,G$u.RGB=6407,G$u.RGBA=6408,G$u.LUMINANCE=6409,G$u.LUMINANCE_ALPHA=6410,G$u.UNSIGNED_SHORT_4_4_4_4=32819,G$u.UNSIGNED_SHORT_5_5_5_1=32820,G$u.UNSIGNED_SHORT_5_6_5=33635,G$u.FRAGMENT_SHADER=35632,G$u.VERTEX_SHADER=35633,G$u.MAX_VERTEX_ATTRIBS=34921,G$u.MAX_VERTEX_UNIFORM_VECTORS=36347,G$u.MAX_VARYING_VECTORS=36348,G$u.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,G$u.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,G$u.MAX_TEXTURE_IMAGE_UNITS=34930,G$u.MAX_FRAGMENT_UNIFORM_VECTORS=36349,G$u.SHADER_TYPE=35663,G$u.DELETE_STATUS=35712,G$u.LINK_STATUS=35714,G$u.VALIDATE_STATUS=35715,G$u.ATTACHED_SHADERS=35717,G$u.ACTIVE_UNIFORMS=35718,G$u.ACTIVE_ATTRIBUTES=35721,G$u.SHADING_LANGUAGE_VERSION=35724,G$u.CURRENT_PROGRAM=35725,G$u.NEVER=512,G$u.LESS=513,G$u.EQUAL=514,G$u.LEQUAL=515,G$u.GREATER=516,G$u.NOTEQUAL=517,G$u.GEQUAL=518,G$u.ALWAYS=519,G$u.KEEP=7680,G$u.REPLACE=7681,G$u.INCR=7682,G$u.DECR=7683,G$u.INVERT=5386,G$u.INCR_WRAP=34055,G$u.DECR_WRAP=34056,G$u.VENDOR=7936,G$u.RENDERER=7937,G$u.VERSION=7938,G$u.NEAREST=9728,G$u.LINEAR=9729,G$u.NEAREST_MIPMAP_NEAREST=9984,G$u.LINEAR_MIPMAP_NEAREST=9985,G$u.NEAREST_MIPMAP_LINEAR=9986,G$u.LINEAR_MIPMAP_LINEAR=9987,G$u.TEXTURE_MAG_FILTER=10240,G$u.TEXTURE_MIN_FILTER=10241,G$u.TEXTURE_WRAP_S=10242,G$u.TEXTURE_WRAP_T=10243,G$u.TEXTURE_2D=3553,G$u.TEXTURE=5890,G$u.TEXTURE_CUBE_MAP=34067,G$u.TEXTURE_BINDING_CUBE_MAP=34068,G$u.TEXTURE_CUBE_MAP_POSITIVE_X=34069,G$u.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,G$u.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,G$u.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,G$u.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,G$u.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,G$u.MAX_CUBE_MAP_TEXTURE_SIZE=34076,G$u.TEXTURE0=33984,G$u.TEXTURE1=33985,G$u.TEXTURE2=33986,G$u.TEXTURE3=33987,G$u.TEXTURE4=33988,G$u.TEXTURE5=33989,G$u.TEXTURE6=33990,G$u.TEXTURE7=33991,G$u.TEXTURE8=33992,G$u.TEXTURE9=33993,G$u.TEXTURE10=33994,G$u.TEXTURE11=33995,G$u.TEXTURE12=33996,G$u.TEXTURE13=33997,G$u.TEXTURE14=33998,G$u.TEXTURE15=33999,G$u.TEXTURE16=34e3,G$u.TEXTURE17=34001,G$u.TEXTURE18=34002,G$u.TEXTURE19=34003,G$u.TEXTURE20=34004,G$u.TEXTURE21=34005,G$u.TEXTURE22=34006,G$u.TEXTURE23=34007,G$u.TEXTURE24=34008,G$u.TEXTURE25=34009,G$u.TEXTURE26=34010,G$u.TEXTURE27=34011,G$u.TEXTURE28=34012,G$u.TEXTURE29=34013,G$u.TEXTURE30=34014,G$u.TEXTURE31=34015,G$u.ACTIVE_TEXTURE=34016,G$u.REPEAT=10497,G$u.CLAMP_TO_EDGE=33071,G$u.MIRRORED_REPEAT=33648,G$u.FLOAT_VEC2=35664,G$u.FLOAT_VEC3=35665,G$u.FLOAT_VEC4=35666,G$u.INT_VEC2=35667,G$u.INT_VEC3=35668,G$u.INT_VEC4=35669,G$u.BOOL=35670,G$u.BOOL_VEC2=35671,G$u.BOOL_VEC3=35672,G$u.BOOL_VEC4=35673,G$u.FLOAT_MAT2=35674,G$u.FLOAT_MAT3=35675,G$u.FLOAT_MAT4=35676,G$u.SAMPLER_2D=35678,G$u.SAMPLER_CUBE=35680,G$u.VERTEX_ATTRIB_ARRAY_ENABLED=34338,G$u.VERTEX_ATTRIB_ARRAY_SIZE=34339,G$u.VERTEX_ATTRIB_ARRAY_STRIDE=34340,G$u.VERTEX_ATTRIB_ARRAY_TYPE=34341,G$u.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,G$u.VERTEX_ATTRIB_ARRAY_POINTER=34373,G$u.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,G$u.COMPILE_STATUS=35713,G$u.LOW_FLOAT=36336,G$u.MEDIUM_FLOAT=36337,G$u.HIGH_FLOAT=36338,G$u.LOW_INT=36339,G$u.MEDIUM_INT=36340,G$u.HIGH_INT=36341,G$u.FRAMEBUFFER=36160,G$u.RENDERBUFFER=36161,G$u.RGBA4=32854,G$u.RGB5_A1=32855,G$u.RGB565=36194,G$u.DEPTH_COMPONENT16=33189,G$u.STENCIL_INDEX=6401,G$u.STENCIL_INDEX8=36168,G$u.DEPTH_STENCIL=34041,G$u.RENDERBUFFER_WIDTH=36162,G$u.RENDERBUFFER_HEIGHT=36163,G$u.RENDERBUFFER_INTERNAL_FORMAT=36164,G$u.RENDERBUFFER_RED_SIZE=36176,G$u.RENDERBUFFER_GREEN_SIZE=36177,G$u.RENDERBUFFER_BLUE_SIZE=36178,G$u.RENDERBUFFER_ALPHA_SIZE=36179,G$u.RENDERBUFFER_DEPTH_SIZE=36180,G$u.RENDERBUFFER_STENCIL_SIZE=36181,G$u.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,G$u.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,G$u.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,G$u.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,G$u.COLOR_ATTACHMENT0=36064,G$u.DEPTH_ATTACHMENT=36096,G$u.STENCIL_ATTACHMENT=36128,G$u.DEPTH_STENCIL_ATTACHMENT=33306,G$u.NONE=0,G$u.FRAMEBUFFER_COMPLETE=36053,G$u.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,G$u.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,G$u.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,G$u.FRAMEBUFFER_UNSUPPORTED=36061,G$u.FRAMEBUFFER_BINDING=36006,G$u.RENDERBUFFER_BINDING=36007,G$u.MAX_RENDERBUFFER_SIZE=34024,G$u.INVALID_FRAMEBUFFER_OPERATION=1286,G$u.UNPACK_FLIP_Y_WEBGL=37440,G$u.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,G$u.CONTEXT_LOST_WEBGL=37442,G$u.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,G$u.BROWSER_DEFAULT_WEBGL=37444,G$u._useProgram=null,G$u._depthTest=!0,G$u._depthMask=!0,G$u._blend=!1,G$u._cullFace=!1,G$u.curBindTexTarget=null,G$u.curBindTexValue=null,G$P(G$u,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),G$u}(),G$aT=function(G$T){function G$l(){G$l.__super.call(this)}G$b(G$l,"laya.webgl.display.GraphicsGL",G$j);var G$w=G$l.prototype;return G$w.setShader=function(G$T){this._saveToCmd(G$L.context._setShader,[G$T])},G$w.setIBVB=function(G$T,G$l,G$w,G$u,G$p,G$D){this._saveToCmd(G$L.context._setIBVB,[G$T,G$l,G$w,G$u,G$p,G$D])},G$w.drawParticle=function(G$T,G$l,G$w){var G$u=G$c.createParticleTemplate2D(G$w);G$u.x=G$T,G$u.y=G$l,this._saveToCmd(G$L.context._drawParticle,[G$u])},G$l}(),G$BT=function(G$T){var G$w;function G$X(G$T){this._x=0,this._y=0,this._id=++G$X._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,G$X.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=G$X.MAXCLIPRECT,this.mOutPoint,this._canvas=G$T,this._canvas._addReference(),G$X._contextcount++,G$L.isFlash?(this._ib=G$ST.create(35044),G$AT.fillIBQuadrangle(this._ib,16)):this._ib=G$ST.QuadrangleIB,this.clear()}G$b(G$X,"laya.webgl.canvas.WebGLContext2D",G$p);var G$l=G$X.prototype;return G$l.setIsMainContext=function(){this._isMain=!0},G$l.clearBG=function(G$T,G$l,G$w,G$u){var G$p=G$mT.mainContext;G$p.clearColor(G$T,G$l,G$w,G$u),G$p.clear(16384)},G$l._getSubmits=function(){return this._submits},G$l._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var G$T=0,G$l=this._submits._length;G$T<G$l;G$T++)this._submits[G$T].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},G$l.destroy=function(){--G$X._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=G$ST.QuadrangleIB&&this._ib.releaseResource()},G$l.clear=function(){this._submits||(this._other=G$w.DEFAULT,this._curMat=G$r.create(),this._vb=G$_T.create(-1),this._submits=[],this._save=[G$U.Create(this)],this._save.length=10,this._shader2D=new G$S,this._triangleMesh=G$FT.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=G$w.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=G$X.MAXCLIPRECT,this._curSubmit=G$DT.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=G$G.DEFAULT;for(var G$T=0,G$l=this._submits._length;G$T<G$l;G$T++)this._submits[G$T].releaseRender(),this._submits[G$T]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},G$l.size=function(G$T,G$l){if(this._width!=G$T||this._height!=G$l)if(0==G$T||0==G$l){0!=this._vb._byteLength&&(this._width=G$T,this._height=G$l,this._vb.clear(),this._vb.upload());for(var G$w=0,G$u=this._submits._length;G$w<G$u;G$w++)this._submits[G$w].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=G$T,this._height=G$l,this._targets&&this._targets.size(G$T,G$l),this._canvas.memorySize-=this._canvas.memorySize;0===G$T&&0===G$l&&this._releaseMem()},G$l._getTransformMatrix=function(){return this._curMat},G$l.translate=function(G$T,G$l){0===G$T&&0===G$l||(G$V.save(this),this._curMat.bTransform&&(G$E.save(this),this._curMat.transformPointN(G$I.TEMP.setTo(G$T,G$l)),G$T=G$I.TEMP.x,G$l=G$I.TEMP.y),this._x+=G$T,this._y+=G$l)},G$l.save=function(){this._save[this._save._length++]=G$U.Create(this)},G$l.restore=function(){var G$T=this._save._length;if(!(G$T<1))for(var G$l=G$T-1;0<=G$l;G$l--){var G$w=this._save[G$l];if(G$w.restore(this),G$w.isSaveMark())return void(this._save._length=G$l)}},G$l._fillText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){void 0===G$q&&(G$q=0);var G$M=this._shader2D,G$z=this._curSubmit.shaderValue,G$b=G$p?G$YT.create(G$p):this._other.font;if(G$k.enabled)G$M.ALPHA!==G$z.ALPHA&&(G$M.glTexture=null),G$KT.drawText(this,G$T,G$l,this._curMat,G$b,G$J||this._other.textAlign,G$D,G$P,G$j,G$w,G$u,G$q);else{this._shader2D.defines.getValue();var G$K=G$D?G$Y.create(G$D)._color:G$M.colorAdd;G$M.ALPHA===G$z.ALPHA&&G$K===G$M.colorAdd&&G$z.colorAdd===G$M.colorAdd||(G$M.glTexture=null,G$M.colorAdd=G$K),G$KT.drawText(this,G$T,G$l,this._curMat,G$b,G$J||this._other.textAlign,G$D,G$P,G$j,G$w,G$u,G$q)}},G$l.fillWords=function(G$T,G$l,G$w,G$u,G$p,G$D){this._fillText(null,G$T,G$l,G$w,G$u,G$p,null,-1,null,G$D)},G$l.fillBorderWords=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this._fillBorderText(null,G$T,G$l,G$w,G$u,G$p,G$D,G$P,null)},G$l.fillText=function(G$T,G$l,G$w,G$u,G$p,G$D){this._fillText(G$T,null,G$l,G$w,G$u,G$p,null,-1,G$D)},G$l.strokeText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this._fillText(G$T,null,G$l,G$w,G$u,null,G$p,G$D||1,G$P)},G$l.fillBorderText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){this._fillBorderText(G$T,null,G$l,G$w,G$u,G$p,G$D,G$P,G$j)},G$l._fillBorderText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){if(!G$k.enabled)return this._fillText(G$T,G$l,G$w,G$u,G$p,null,G$P,G$j||1,G$J),void this._fillText(G$T,G$l,G$w,G$u,G$p,G$D,null,-1,G$J);var G$q=this._shader2D,G$M=this._curSubmit.shaderValue;G$q.ALPHA!==G$M.ALPHA&&(G$q.glTexture=null);var G$z=G$p?(G$X._fontTemp.setFont(G$p),G$X._fontTemp):this._other.font;G$KT.drawText(this,G$T,G$l,this._curMat,G$z,G$J||this._other.textAlign,G$D,G$P,G$j||1,G$w,G$u,0)},G$l.fillRect=function(G$T,G$l,G$w,G$u,G$p){var G$D=this._vb;if(G$AT.fillRectImgVb(G$D,this._clipRect,G$T,G$l,G$w,G$u,G$F.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var G$P=this._shader2D.fillStyle;G$p&&(this._shader2D.fillStyle=G$G.create(G$p));var G$j=this._shader2D,G$J=this._curSubmit.shaderValue;if(G$j.fillStyle!==G$J.fillStyle||G$j.ALPHA!==G$J.ALPHA){G$j.glTexture=null;var G$q=this._curSubmit=G$DT.createSubmit(this,this._ib,G$D,(G$D._byteLength-64)/32*3,G$sT.create(2,0));G$q.shaderValue.color=G$j.fillStyle._color._color,G$q.shaderValue.ALPHA=G$j.ALPHA,this._submits[this._submits._length++]=G$q}this._curSubmit._numEle+=6,this._shader2D.fillStyle=G$P}},G$l.fillTexture=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){if(G$T.loaded&&G$T.bitmap&&G$T.source){var G$J=this._vb,G$q=G$T.bitmap.width,G$M=G$T.bitmap.height,G$z=G$T.uv,G$b=G$P.x%G$T.width,G$K=G$P.y%G$T.height;if(G$q!=G$j.w||G$M!=G$j.h){if(!G$j.w&&!G$j.h)switch(G$j.oy=G$j.ox=0,G$D){case"repeat":G$j.width=G$u,G$j.height=G$p;break;case"repeat-x":G$j.width=G$u,G$K<0?G$T.height+G$K>G$p?G$j.height=G$p:G$j.height=G$T.height+G$K:(G$j.oy=G$K,G$T.height+G$K>G$p?G$j.height=G$p-G$K:G$j.height=G$T.height);break;case"repeat-y":G$b<0?G$T.width+G$b>G$u?G$j.width=G$u:G$j.width=G$T.width+G$b:(G$j.ox=G$b,G$T.width+G$b>G$u?G$j.width=G$u-G$b:G$j.width=G$T.width),G$j.height=G$p;break;case"no-repeat":G$b<0?G$T.width+G$b>G$u?G$j.width=G$u:G$j.width=G$T.width+G$b:(G$j.ox=G$b,G$T.width+G$b>G$u?G$j.width=G$u-G$b:G$j.width=G$T.width),G$K<0?G$T.height+G$K>G$p?G$j.height=G$p:G$j.height=G$T.height+G$K:(G$j.oy=G$K,G$T.height+G$K>G$p?G$j.height=G$p-G$K:G$j.height=G$T.height);break;default:G$j.width=G$u,G$j.height=G$p}G$j.w=G$q,G$j.h=G$M,G$j.uv=[0,0,G$j.width/G$q,0,G$j.width/G$q,G$j.height/G$M,0,G$j.height/G$M]}if(G$l+=G$j.ox,G$w+=G$j.oy,G$b-=G$j.ox,G$K-=G$j.oy,G$AT.fillRectImgVb(G$J,this._clipRect,G$l,G$w,G$j.width,G$j.height,G$j.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var G$Y=G$RT.create(this,this._ib,G$J,(G$J._byteLength-64)/32*3,G$sT.create(256,0)),G$t=(this._submits[this._submits._length++]=G$Y).shaderValue;G$t.textureHost=G$T;var G$A=G$z[0]*G$q,G$L=G$z[1]*G$M,G$i=(G$z[2]-G$z[0])*G$q,G$W=(G$z[5]-G$z[3])*G$M,G$m=-G$b/G$q,G$c=-G$K/G$M;G$t.u_TexRange[0]=G$A/G$q,G$t.u_TexRange[1]=G$i/G$q,G$t.u_TexRange[2]=G$L/G$M,G$t.u_TexRange[3]=G$W/G$M,G$t.u_offset[0]=G$m,G$t.u_offset[1]=G$c,G$k.enabled&&!this._isMain&&G$Y.addTexture(G$T,(G$J._byteLength>>2)-16),(this._curSubmit=G$Y)._renderType=10017,G$Y._numEle+=6}}else this.sprite&&G$a.timer.callLater(this,this._repaintSprite)},G$l.setShader=function(G$T){G$h.save(this,1048576,this._shader2D,!0),this._shader2D.shader=G$T},G$l.setFilters=function(G$T){G$h.save(this,2097152,this._shader2D,!0),this._shader2D.filters=G$T,this._curSubmit=G$DT.RENDERBASE,this._renderKey=0,this._drawCount++},G$l.drawTexture=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this._drawTextureM(G$T,G$l,G$w,G$u,G$p,G$D,G$P,null,1)},G$l.addTextureVb=function(G$T,G$l,G$w){var G$u=this._curSubmit._vb||this._vb,G$p=G$u._byteLength>>2;G$u.byteLength=G$p+16<<2;for(var G$D=G$u.getFloat32Array(),G$P=0;G$P<16;G$P+=4)G$D[G$p++]=G$T[G$P]+G$l,G$D[G$p++]=G$T[G$P+1]+G$w,G$D[G$p++]=G$T[G$P+2],G$D[G$p++]=G$T[G$P+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),G$u._upload=!0},G$l.willDrawTexture=function(G$T,G$l){if(!(G$T.loaded&&G$T.bitmap&&G$T.source))return this.sprite&&G$a.timer.callLater(this,this._repaintSprite),0;var G$w=G$T.bitmap,G$u=G$w.id+this._shader2D.ALPHA*G$l+10016;if(G$u==this._renderKey)return G$u;var G$p=this._shader2D,G$D=G$p.ALPHA,G$P=this._curSubmit.shaderValue;G$p.ALPHA*=G$l,this._renderKey=G$u,this._drawCount++,G$p.glTexture=G$w;var G$j=this._vb,G$J=null,G$q=G$j._byteLength/32*3,G$M=G$P.textureHost&&G$P.textureHost==G$T&&G$P.textureHost.alphaTexture==G$T.alphaTexture;return G$J=G$RT.create(this,this._ib,G$j,G$q,G$sT.create(1,0)),(this._submits[this._submits._length++]=G$J).shaderValue.textureHost=G$T,G$J._renderType=10016,G$J._preIsSameTextureShader=10016===this._curSubmit._renderType&&G$p.ALPHA===G$P.ALPHA&&G$M,this._curSubmit=G$J,G$p.ALPHA=G$D,G$u},G$l.drawTextures=function(G$T,G$l,G$w,G$u){if(G$T.loaded&&G$T.bitmap&&G$T.source){var G$p=this._clipRect;if(this._clipRect=G$X.MAXCLIPRECT,this._drawTextureM(G$T,G$l[0],G$l[1],G$T.width,G$T.height,G$w,G$u,null,1)){if(this._clipRect=G$p,G$y.drawCall++,!(G$l.length<4)){for(var G$D=this._curSubmit._vb||this._vb,G$P=this._curMat.a,G$j=this._curMat.d,G$J=2,G$q=G$l.length;G$J<G$q;G$J+=2)G$AT.copyPreImgVb(G$D,(G$l[G$J]-G$l[G$J-2])*G$P,(G$l[G$J+1]-G$l[G$J-1])*G$j),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&G$a.timer.callLater(this,this._repaintSprite)},G$l._drawTextureM=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){if(!G$T.loaded||!G$T.source)return this.sprite&&G$a.timer.callLater(this,this._repaintSprite),!1;var G$q=this._curSubmit._vb||this._vb,G$M=G$T.bitmap;G$l+=G$D,G$w+=G$P,this._drawCount++;var G$z=G$M.id+this._shader2D.ALPHA*G$J+10016;if(G$z!=this._renderKey){this._renderKey=G$z;var G$b=this._curSubmit.shaderValue,G$K=this._shader2D,G$Y=G$K.ALPHA;G$K.ALPHA*=G$J,G$K.glTexture=G$M;var G$t=this._vb,G$A=null,G$L=G$t._byteLength/32*3,G$i=G$b.textureHost&&G$b.textureHost==G$T&&G$b.textureHost.alphaTexture==G$T.alphaTexture;G$A=G$RT.create(this,this._ib,G$t,G$L,G$sT.create(1,0)),(this._submits[this._submits._length++]=G$A).shaderValue.textureHost=G$T,G$A._renderType=10016,G$A._preIsSameTextureShader=10016===this._curSubmit._renderType&&G$K.ALPHA===G$b.ALPHA&&G$i,this._curSubmit=G$A,G$q=this._curSubmit._vb||this._vb,G$K.ALPHA=G$Y}return!!G$AT.fillRectImgVb(G$q,this._clipRect,G$l,G$w,G$u||G$T.width,G$p||G$T.height,G$T.uv,G$j||this._curMat,this._x,this._y,0,0)&&(G$k.enabled&&!this._isMain&&this._curSubmit.addTexture(G$T,(G$q._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},G$l._repaintSprite=function(){this.sprite&&this.sprite.repaint()},G$l._drawText=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){var G$M=G$T.bitmap;this._drawCount++;var G$z=G$M.id+this._shader2D.ALPHA+10016;if(G$z!=this._renderKey){this._renderKey=G$z;var G$b=this._curSubmit.shaderValue,G$K=this._shader2D;G$K.glTexture=G$M;var G$Y=this._vb,G$t=null,G$A=G$Y._byteLength/32*3,G$L=G$b.textureHost&&G$b.textureHost==G$T&&G$b.textureHost.alphaTexture==G$T.alphaTexture;(G$t=G$k.enabled?G$RT.create(this,this._ib,G$Y,G$A,G$sT.create(1,0)):G$RT.create(this,this._ib,G$Y,G$A,G$VT.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&G$K.ALPHA===G$b.ALPHA&&G$L,(this._submits[this._submits._length++]=G$t).shaderValue.textureHost=G$T,G$t._renderType=10016,this._curSubmit=G$t}G$T.active();var G$i=this._curSubmit._vb||this._vb;G$AT.fillRectImgVb(G$i,this._clipRect,G$l+G$P,G$w+G$j,G$u||G$T.width,G$p||G$T.height,G$T.uv,G$D||this._curMat,this._x,this._y,G$J,G$q,!0)&&(G$k.enabled&&!this._isMain&&this._curSubmit.addTexture(G$T,(G$i._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},G$l.drawTextureWithTransform=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){if(G$D){var G$q=this._curMat,G$M=this._x,G$z=this._y;(0!==G$P||0!==G$j)&&(this._x=G$P*G$q.a+G$j*G$q.c,this._y=G$j*G$q.d+G$P*G$q.b),G$D&&G$q.bTransform?(G$r.mul(G$D,G$q,G$X._tmpMatrix),(G$D=G$X._tmpMatrix)._checkTransform()):(this._x+=G$q.tx,this._y+=G$q.ty),this._drawTextureM(G$T,G$l,G$w,G$u,G$p,0,0,G$D,G$J),this._x=G$M,this._y=G$z}else this._drawTextureM(G$T,G$l,G$w,G$u,G$p,G$P,G$j,null,G$J)},G$l.fillQuadrangle=function(G$T,G$l,G$w,G$u,G$p){var G$D=this._curSubmit,G$P=this._vb,G$j=this._shader2D,G$J=G$D.shaderValue;if(this._renderKey=0,G$T.bitmap){var G$q=G$T.bitmap;G$j.glTexture==G$q&&G$j.ALPHA===G$J.ALPHA||(G$j.glTexture=G$q,(G$D=this._curSubmit=G$DT.createSubmit(this,this._ib,G$P,G$P._byteLength/32*3,G$sT.create(1,0))).shaderValue.glTexture=G$q,this._submits[this._submits._length++]=G$D),G$AT.fillQuadrangleImgVb(G$P,G$l,G$w,G$u,G$T.uv,G$p||this._curMat,this._x,this._y)}else G$D.shaderValue.fillStyle&&G$D.shaderValue.fillStyle.equal(G$T)&&G$j.ALPHA===G$J.ALPHA||(G$j.glTexture=null,(G$D=this._curSubmit=G$DT.createSubmit(this,this._ib,G$P,G$P._byteLength/32*3,G$sT.create(2,0))).shaderValue.defines.add(2),G$D.shaderValue.fillStyle=G$G.create(G$T),this._submits[this._submits._length++]=G$D),G$AT.fillQuadrangleImgVb(G$P,G$l,G$w,G$u,G$F.DEF_UV,G$p||this._curMat,this._x,this._y);G$D._numEle+=6},G$l.drawTexture2=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){if(0!=G$D){var G$J=this._curMat;if(this._x=G$T*G$J.a+G$l*G$J.c,this._y=G$l*G$J.d+G$T*G$J.b,G$p&&(G$p=G$J.bTransform||G$p.bTransform?(G$r.mul(G$p,G$J,G$X._tmpMatrix),G$X._tmpMatrix):(this._x+=G$p.tx+G$J.tx,this._y+=G$p.ty+G$J.ty,G$r.EMPTY)),1!==G$D||G$P){var G$q=this._shader2D.ALPHA,G$M=this._nBlendType;this._shader2D.ALPHA=G$D,G$P&&(this._nBlendType=G$d.TOINT(G$P)),this._drawTextureM(G$j[0],G$j[1]-G$w,G$j[2]-G$u,G$j[3],G$j[4],0,0,G$p,1),this._shader2D.ALPHA=G$q,this._nBlendType=G$M}else this._drawTextureM(G$j[0],G$j[1]-G$w,G$j[2]-G$u,G$j[3],G$j[4],0,0,G$p,1);this._x=this._y=0}},G$l.drawCanvas=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$T.context;if(this._renderKey=0,G$D._targets)this._submits[this._submits._length++]=G$xT.create(G$D,0,null),this._curSubmit=G$DT.RENDERBASE,G$D._targets.drawTo(this,G$l,G$w,G$u,G$p);else{var G$P=this._submits[this._submits._length++]=G$xT.create(G$D,this._shader2D.ALPHA,this._shader2D.filters),G$j=G$u/G$T.width,G$J=G$p/G$T.height,G$q=G$P._matrix;this._curMat.copyTo(G$q),1!=G$j&&1!=G$J&&G$q.scale(G$j,G$J);var G$M=G$q.tx,G$z=G$q.ty;G$q.tx=G$q.ty=0,G$q.transformPoint(G$I.TEMP.setTo(G$l,G$w)),G$q.translate(G$I.TEMP.x+G$M,G$I.TEMP.y+G$z),this._curSubmit=G$DT.RENDERBASE}G$B.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=G$D._targets?"yellow":"green",this.strokeRect(G$l-1,G$w-1,G$u+2,G$p+2,1),this.strokeRect(G$l,G$w,G$u,G$p,1),this.restore())},G$l.drawTarget=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){void 0===G$q&&(G$q=-1);var G$M=this._vb;if(G$AT.fillRectImgVb(G$M,this._clipRect,G$l,G$w,G$u,G$p,G$J||G$F.DEF_UV,G$D||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var G$z=this._curSubmit=G$zT.create(this,this._ib,G$M,(G$M._byteLength-64)/32*3,G$j,G$P);G$z.blendType=-1==G$q?this._nBlendType:G$q,G$z.scope=G$T,this._submits[this._submits._length++]=G$z,this._curSubmit._numEle+=6}},G$l.mixRGBandAlpha=function(G$T){return this._mixRGBandAlpha(G$T,this._shader2D.ALPHA)},G$l._mixRGBandAlpha=function(G$T,G$l){var G$w=(4278190080&G$T)>>>24;return 0!=G$w?G$w*=G$l:G$w=255*G$l,16777215&G$T|G$w<<24},G$l.drawTriangles=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){if(!G$T.loaded||!G$T.source)return this.sprite&&G$a.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;G$T.bitmap;var G$M=this._mixRGBandAlpha(4294967295,G$j),G$z=(G$u.length,G$D.length);this._renderKey=-1;var G$b=this._curSubmit=G$RT.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,G$sT.create(1,0));return G$b.shaderValue.textureHost=G$T,G$b._renderType=10016,this._submits[this._submits._length++]=G$b,G$P?(G$X._tmpMatrix.a=G$P.a,G$X._tmpMatrix.b=G$P.b,G$X._tmpMatrix.c=G$P.c,G$X._tmpMatrix.d=G$P.d,G$X._tmpMatrix.tx=G$P.tx+G$l,G$X._tmpMatrix.ty=G$P.ty+G$w,G$r.mul(G$X._tmpMatrix,this._curMat,G$X._tmpMatrix)):(G$X._tmpMatrix.a=this._curMat.a,G$X._tmpMatrix.b=this._curMat.b,G$X._tmpMatrix.c=this._curMat.c,G$X._tmpMatrix.d=this._curMat.d,G$X._tmpMatrix.tx=this._curMat.tx+G$l,G$X._tmpMatrix.ty=this._curMat.ty+G$w),this._triangleMesh.addData(G$u,G$p,G$D,G$X._tmpMatrix,G$M,this),this._curSubmit._numEle+=G$z,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},G$l.transform=function(G$T,G$l,G$w,G$u,G$p,G$D){G$E.save(this),G$r.mul(G$r.TEMP.setTo(G$T,G$l,G$w,G$u,G$p,G$D),this._curMat,this._curMat),this._curMat._checkTransform()},G$l.setTransformByMatrix=function(G$T){G$T.copyTo(this._curMat)},G$l.transformByMatrix=function(G$T){G$E.save(this),G$r.mul(G$T,this._curMat,this._curMat),this._curMat._checkTransform()},G$l.rotate=function(G$T){G$E.save(this),this._curMat.rotateEx(G$T)},G$l.scale=function(G$T,G$l){G$E.save(this),this._curMat.scaleEx(G$T,G$l)},G$l.clipRect=function(G$T,G$l,G$w,G$u){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var G$p=G$MT.create(4);this.addRenderObject(G$p);var G$D=this._vb,G$P=G$D._byteLength>>2;if(G$AT.fillRectImgVb(G$D,null,G$T,G$l,G$w,G$u,G$F.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var G$j=this._curSubmit=G$DT.createSubmit(this,this._ib,G$D,(G$D._byteLength-64)/32*3,G$sT.create(2,0));G$j.shaderValue.ALPHA=1,this._submits[this._submits._length++]=G$j,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var G$J=G$MT.create(5);this.addRenderObject(G$J);var G$q=G$D.getFloat32Array(),G$M=Math.min(Math.min(Math.min(G$q[0+G$P],G$q[4+G$P]),G$q[8+G$P]),G$q[12+G$P]),G$z=Math.max(Math.max(Math.max(G$q[0+G$P],G$q[4+G$P]),G$q[8+G$P]),G$q[12+G$P]),G$b=Math.min(Math.min(Math.min(G$q[1+G$P],G$q[5+G$P]),G$q[9+G$P]),G$q[13+G$P]),G$K=Math.max(Math.max(Math.max(G$q[1+G$P],G$q[5+G$P]),G$q[9+G$P]),G$q[13+G$P]);G$f.save(this,G$J,G$T,G$l,G$w,G$u,G$M,G$b,G$z-G$M,G$K-G$b),this._curSubmit=G$DT.RENDERBASE}else{G$w*=this._curMat.a,G$u*=this._curMat.d;var G$Y=G$I.TEMP;this._curMat.transformPoint(G$Y.setTo(G$T,G$l)),G$w<0&&(G$Y.x=G$Y.x+G$w,G$w=-G$w),G$u<0&&(G$Y.y=G$Y.y+G$u,G$u=-G$u),this._renderKey=0;var G$t=this._curSubmit=G$qT.create(this);(this._submits[this._submits._length++]=G$t).submitIndex=this._submits._length,G$t.submitLength=9999999,G$g.save(this,G$t);var G$A=this._clipRect,G$L=G$A.x,G$i=G$A.y,G$W=G$Y.x+G$w,G$m=G$Y.y+G$u;G$L<G$Y.x&&(G$A.x=G$Y.x),G$i<G$Y.y&&(G$A.y=G$Y.y),G$A.width=Math.min(G$W,G$L+G$A.width)-G$A.x,G$A.height=Math.min(G$m,G$i+G$A.height)-G$A.y,this._shader2D.glTexture=null,G$t.clipRect.copyFrom(G$A),this._curSubmit=G$DT.RENDERBASE}},G$l.setIBVB=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M){if(void 0===G$J&&(G$J=0),void 0===G$q&&(G$q=0),void 0===G$M&&(G$M=0),null===G$w){if(G$L.isFlash){var G$z=G$u;G$z._selfIB||(G$z._selfIB=G$ST.create(35044)),G$z._selfIB.clear(),G$w=G$z._selfIB}else G$w=this._ib;G$AT.expandIBQuadrangle(G$w,G$u._byteLength/(4*G$u.vertexStride*4))}if(!G$j||!G$P)throw Error("setIBVB must input:shader shaderValues");var G$b=G$JT.create(this,G$u,G$w,G$p,G$P,G$j,G$J,G$q,G$M);G$D||(G$D=G$r.EMPTY),G$D.translate(G$T,G$l),G$r.mul(G$D,this._curMat,G$b._mat),G$D.translate(-G$T,-G$l),this._submits[this._submits._length++]=G$b,this._curSubmit=G$DT.RENDERBASE,this._renderKey=0},G$l.addRenderObject=function(G$T){this._submits[this._submits._length++]=G$T},G$l.fillTrangles=function(G$T,G$l,G$w,G$u,G$p){var G$D=this._curSubmit,G$P=this._vb,G$j=this._shader2D,G$J=G$D.shaderValue,G$q=G$u.length>>4,G$M=G$T.bitmap;this._renderKey=0,G$j.glTexture==G$M&&G$j.ALPHA===G$J.ALPHA||((G$D=this._curSubmit=G$DT.createSubmit(this,this._ib,G$P,G$P._byteLength/32*3,G$sT.create(1,0))).shaderValue.textureHost=G$T,this._submits[this._submits._length++]=G$D),G$AT.fillTranglesVB(G$P,G$l,G$w,G$u,G$p||this._curMat,this._x,this._y),G$D._numEle+=6*G$q},G$l.submitElement=function(G$T,G$l){var G$w=this._submits;for(G$l<0&&(G$l=G$w._length);G$T<G$l;)G$T+=G$w[G$T].renderSubmit()},G$l.finish=function(){G$mT.mainContext.finish()},G$l.flush=function(){var G$T=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(G$T>this._ib.bufferLength/12&&G$AT.expandIBQuadrangle(this._ib,G$T),!this._isMain&&G$k.enabled&&G$k._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=G$k._atlasRestore;for(var G$l=this._submits,G$w=0,G$u=G$l._length;G$w<G$u;G$w++){var G$p=G$l[G$w];10016===G$p.getRenderType()&&G$p.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),G$lT.instance&&G$lT.getInstance().reset();var G$D;for(G$w=0,G$D=this.meshlist.length;G$w<G$D;G$w++){var G$P=this.meshlist[G$w];G$P.canReuse?G$P.releaseMesh():G$P.destroy()}return this.meshlist.length=0,this._curSubmit=G$DT.RENDERBASE,this._renderKey=0,this._triangleMesh=G$FT.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},G$l.setPathId=function(G$T){if(this.mId=G$T,-1!=this.mId){this.mHaveKey=!1;var G$l=G$$.getInstance();G$l.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,G$l.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},G$l.movePath=function(G$T,G$l){var G$w=G$T,G$u=G$l;G$T=this._curMat.a*G$w+this._curMat.c*G$u+this._curMat.tx,G$l=this._curMat.b*G$w+this._curMat.d*G$u+this._curMat.ty,this.mX+=G$T,this.mY+=G$l},G$l.beginPath=function(){var G$T=this._getPath();G$T.tempArray.length=0,G$T.closePath=!1,this.mX=0,this.mY=0},G$l.closePath=function(){this._path.closePath=!0},G$l.fill=function(G$T){void 0===G$T&&(G$T=!1);var G$l=this._getPath();this.drawPoly(0,0,G$l.tempArray,this.fillStyle._color.numColor,0,0,G$T)},G$l.stroke=function(){var G$T=this._getPath();if(0<this.lineWidth){if(-1==this.mId)G$T.drawLine(0,0,G$T.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var G$l=G$$.getInstance().shapeLineDic[this.mId];G$l.rebuild(G$T.tempArray),G$T.setGeomtry(G$l)}else G$$.getInstance().addLine(this.mId,G$T.drawLine(0,0,G$T.tempArray,this.lineWidth,this.strokeStyle._color.numColor));G$T.update();var G$w=[this.mX,this.mY],G$u=G$DT.createShape(this,G$T.ib,G$T.vb,G$T.count,G$T.offset,G$sT.create(4,0));G$u.shaderValue.ALPHA=this._shader2D.ALPHA,G$u.shaderValue.u_pos=G$w,G$u.shaderValue.u_mmat2=G$iT.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=G$u,this._renderKey=-1}},G$l.line=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=this._curSubmit,G$j=this._vb;if(G$AT.fillLineVb(G$j,this._clipRect,G$T,G$l,G$w,G$u,G$p,G$D)){this._renderKey=0;var G$J=this._shader2D,G$q=G$P.shaderValue;G$J.strokeStyle===G$q.strokeStyle&&G$J.ALPHA===G$q.ALPHA||(G$J.glTexture=null,(G$P=this._curSubmit=G$DT.createSubmit(this,this._ib,G$j,(G$j._byteLength-64)/32*3,G$sT.create(2,0))).shaderValue.strokeStyle=G$J.strokeStyle,G$P.shaderValue.mainID=2,G$P.shaderValue.ALPHA=G$J.ALPHA,this._submits[this._submits._length++]=G$P),G$P._numEle+=6}},G$l.moveTo=function(G$T,G$l,G$w){void 0===G$w&&(G$w=!0);var G$u=this._getPath();if(G$w){var G$p=G$T,G$D=G$l;G$T=this._curMat.a*G$p+this._curMat.c*G$D,G$l=this._curMat.b*G$p+this._curMat.d*G$D}G$u.addPoint(G$T,G$l)},G$l.lineTo=function(G$T,G$l,G$w){void 0===G$w&&(G$w=!0);var G$u=this._getPath();if(G$w){var G$p=G$T,G$D=G$l;G$T=this._curMat.a*G$p+this._curMat.c*G$D,G$l=this._curMat.b*G$p+this._curMat.d*G$D}G$u.addPoint(G$T,G$l)},G$l.drawCurves=function(G$T,G$l,G$w){this.setPathId(-1),this.beginPath(),this.strokeStyle=G$w[3],this.lineWidth=G$w[4];var G$u=G$w[2];G$T+=G$w[0],G$l+=G$w[1],this.movePath(G$T,G$l),this.moveTo(G$u[0],G$u[1]);for(var G$p=2,G$D=G$u.length;G$p<G$D;)this.quadraticCurveTo(G$u[G$p++],G$u[G$p++],G$u[G$p++],G$u[G$p++]);this.stroke()},G$l.arcTo=function(G$T,G$l,G$w,G$u,G$p){if(-1==this.mId||!this.mHaveKey){var G$D=0,G$P=0,G$j=0,G$J=this._getPath();this._curMat.copyTo(G$X._tmpMatrix),G$X._tmpMatrix.tx=G$X._tmpMatrix.ty=0,G$X._tempPoint.setTo(G$J.getEndPointX(),G$J.getEndPointY()),G$X._tmpMatrix.invertTransformPoint(G$X._tempPoint);var G$q=G$X._tempPoint.x-G$T,G$M=G$X._tempPoint.y-G$l,G$z=Math.sqrt(G$q*G$q+G$M*G$M);if(!(G$z<=1e-6)){var G$b=G$q/G$z,G$K=G$M/G$z,G$Y=G$w-G$T,G$t=G$u-G$l,G$A=G$Y*G$Y+G$t*G$t,G$L=Math.sqrt(G$A);if(!(G$L<=1e-6)){var G$i=G$Y/G$L,G$W=G$t/G$L,G$m=G$b+G$i,G$c=G$K+G$W,G$a=Math.sqrt(G$m*G$m+G$c*G$c);if(!(G$a<=1e-6)){var G$B=G$m/G$a,G$s=G$c/G$a,G$r=Math.acos(G$B*G$b+G$s*G$K),G$I=Math.PI/2-G$r,G$Q=(G$z=G$p/Math.tan(G$I))*G$b+G$T,G$o=G$z*G$K+G$l,G$e=Math.sqrt(G$z*G$z+G$p*G$p),G$y=G$T+G$B*G$e,G$v=G$l+G$s*G$e,G$x=0,G$R=0;if(0<=G$b*G$W-G$K*G$i){var G$F=2*G$I/G$X.SEGNUM;G$x=Math.sin(G$F),G$R=Math.cos(G$F)}else G$F=2*-G$I/G$X.SEGNUM,G$x=Math.sin(G$F),G$R=Math.cos(G$F);G$P=this._curMat.a*G$Q+this._curMat.c*G$o,G$j=this._curMat.b*G$Q+this._curMat.d*G$o,G$P==this._path.getEndPointX()&&G$j==this._path.getEndPointY()||G$J.addPoint(G$P,G$j);var G$O=G$Q-G$y,G$$=G$o-G$v;for(G$D=0;G$D<G$X.SEGNUM;G$D++){var G$Z=G$O*G$R+G$$*G$x,G$H=-G$O*G$x+G$$*G$R;G$P=G$Z+G$y,G$j=G$H+G$v,G$T=this._curMat.a*G$P+this._curMat.c*G$j,G$j=G$l=this._curMat.b*G$P+this._curMat.d*G$j,(G$P=G$T)==this._path.getEndPointX()&&G$j==this._path.getEndPointY()||G$J.addPoint(G$P,G$j),G$O=G$Z,G$$=G$H}}}}}},G$l.arc=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){if(void 0===G$D&&(G$D=!1),void 0===G$P&&(G$P=!0),-1!=this.mId){var G$j=G$$.getInstance().shapeDic[this.mId];if(G$j&&this.mHaveKey&&!G$j.needUpdate(this._curMat))return;G$l=G$T=0}var G$J,G$q=0,G$M=0,G$z=0,G$b=0,G$K=0,G$Y=0,G$t=0;if(G$M=G$p-G$u,G$D)if(Math.abs(G$M)>=2*Math.PI)G$M=2*-Math.PI;else for(;0<G$M;)G$M-=2*Math.PI;else if(Math.abs(G$M)>=2*Math.PI)G$M=2*Math.PI;else for(;G$M<0;)G$M+=2*Math.PI;G$J=G$M/(G$t=G$w<101?Math.max(10,G$M*G$w/5):G$w<201?Math.max(10,G$M*G$w/20):Math.max(10,G$M*G$w/40))/2,G$z=Math.abs(4/3*(1-Math.cos(G$J))/Math.sin(G$J)),G$D&&(G$z=-G$z);var G$A=this._getPath(),G$L=NaN,G$i=NaN;for(G$Y=0;G$Y<=G$t;G$Y++)G$q=G$u+G$M*(G$Y/G$t),G$b=G$T+Math.cos(G$q)*G$w,G$K=G$l+Math.sin(G$q)*G$w,G$P&&(G$L=G$b,G$i=G$K,G$b=this._curMat.a*G$L+this._curMat.c*G$i,G$K=this._curMat.b*G$L+this._curMat.d*G$i),G$b==this._path.getEndPointX()&&G$K==this._path.getEndPointY()||G$A.addPoint(G$b,G$K);G$b=G$T+Math.cos(G$p)*G$w,G$K=G$l+Math.sin(G$p)*G$w,G$P&&(G$L=G$b,G$i=G$K,G$b=this._curMat.a*G$L+this._curMat.c*G$i,G$K=this._curMat.b*G$L+this._curMat.d*G$i),G$b==this._path.getEndPointX()&&G$K==this._path.getEndPointY()||G$A.addPoint(G$b,G$K)},G$l.quadraticCurveTo=function(G$T,G$l,G$w,G$u){var G$p=G$z.I,G$D=G$w,G$P=G$u;G$w=this._curMat.a*G$D+this._curMat.c*G$P,G$u=this._curMat.b*G$D+this._curMat.d*G$P,G$D=G$T,G$P=G$l,G$T=this._curMat.a*G$D+this._curMat.c*G$P,G$l=this._curMat.b*G$D+this._curMat.d*G$P;for(var G$j=G$p.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),G$T,G$l,G$w,G$u],30,2),G$J=0,G$q=G$j.length/2;G$J<G$q;G$J++)this.lineTo(G$j[2*G$J],G$j[2*G$J+1],!1);this.lineTo(G$w,G$u,!1)},G$l.rect=function(G$T,G$l,G$w,G$u){this._other=this._other.make(),this._other.path||(this._other.path=new G$N),this._other.path.rect(G$T,G$l,G$w,G$u)},G$l.strokeRect=function(G$T,G$l,G$w,G$u,G$p){var G$D=.5*G$p;this.line(G$T-G$D,G$l,G$T+G$w+G$D,G$l,G$p,this._curMat),this.line(G$T+G$w,G$l,G$T+G$w,G$l+G$u,G$p,this._curMat),this.line(G$T,G$l,G$T,G$l+G$u,G$p,this._curMat),this.line(G$T-G$D,G$l+G$u,G$T+G$w+G$D,G$l+G$u,G$p,this._curMat)},G$l.clip=function(){},G$l.drawPoly=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){void 0===G$P&&(G$P=!1),this._renderKey=0,this._shader2D.glTexture=null;var G$j=this._getPath();if(-1==this.mId)G$j.polygon(G$T,G$l,G$w,G$u,G$p||1,G$D);else if(this.mHaveKey){var G$J=G$$.getInstance().shapeDic[this.mId];G$J.setMatrix(this._curMat),G$J.rebuild(G$j.tempArray),G$j.setGeomtry(G$J)}else{var G$q=G$j.polygon(G$T,G$l,G$w,G$u,G$p||1,G$D);G$$.getInstance().addShape(this.mId,G$q),G$q.setMatrix(this._curMat)}G$j.update();var G$M,G$z=[this.mX,this.mY];if((G$M=G$DT.createShape(this,G$j.ib,G$j.vb,G$j.count,G$j.offset,G$sT.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,G$M.shaderValue.u_pos=G$z,G$M.shaderValue.u_mmat2=G$iT.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=G$M,0<G$p){if(this.mHaveLineKey){var G$b=G$$.getInstance().shapeLineDic[this.mId];G$b.rebuild(G$j.tempArray),G$j.setGeomtry(G$b)}else G$$.getInstance().addShape(this.mId,G$j.drawLine(G$T,G$l,G$w,G$p,G$D));G$j.update(),(G$M=G$DT.createShape(this,G$j.ib,G$j.vb,G$j.count,G$j.offset,G$sT.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,G$M.shaderValue.u_mmat2=G$iT.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=G$M}},G$l.drawParticle=function(G$T,G$l,G$w){G$w.x=G$T,G$w.y=G$l,this._submits[this._submits._length++]=G$w},G$l._getPath=function(){return this._path||(this._path=new G$N)},G$u(0,G$l,"globalCompositeOperation",function(){return G$d.NAMES[this._nBlendType]},function(G$T){var G$l=G$d.TOINT[G$T];null==G$l||this._nBlendType===G$l||(G$h.save(this,65536,this,!0),this._curSubmit=G$DT.RENDERBASE,this._renderKey=0,this._nBlendType=G$l)}),G$u(0,G$l,"strokeStyle",function(){return this._shader2D.strokeStyle},function(G$T){this._shader2D.strokeStyle.equal(G$T)||(G$h.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=G$G.create(G$T))}),G$u(0,G$l,"globalAlpha",function(){return this._shader2D.ALPHA},function(G$T){(G$T=Math.floor(1e3*G$T)/1e3)!=this._shader2D.ALPHA&&(G$h.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=G$T)}),G$u(0,G$l,"asBitmap",null,function(G$T){if(G$T){if(this._targets||(this._targets=new G$C),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),G$u(0,G$l,"fillStyle",function(){return this._shader2D.fillStyle},function(G$T){this._shader2D.fillStyle.equal(G$T)||(G$h.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=G$G.create(G$T))}),G$u(0,G$l,"textAlign",function(){return this._other.textAlign},function(G$T){this._other.textAlign===G$T||(this._other=this._other.make(),G$h.save(this,32768,this._other,!1),this._other.textAlign=G$T)}),G$u(0,G$l,"lineWidth",function(){return this._other.lineWidth},function(G$T){this._other.lineWidth===G$T||(this._other=this._other.make(),G$h.save(this,256,this._other,!1),this._other.lineWidth=G$T)}),G$u(0,G$l,"textBaseline",function(){return this._other.textBaseline},function(G$T){this._other.textBaseline===G$T||(this._other=this._other.make(),G$h.save(this,16384,this._other,!1),this._other.textBaseline=G$T)}),G$u(0,G$l,"font",null,function(G$T){G$T!=this._other.font.toString()&&(this._other=this._other.make(),G$h.save(this,8,this._other,!1),this._other.font===G$YT.EMPTY?this._other.font=new G$YT(G$T):this._other.font.setFont(G$T))}),G$X.__init__=function(){G$w.DEFAULT=new G$w},G$X._tempPoint=new G$I,G$X._SUBMITVBSIZE=32e3,G$X._MAXSIZE=99999999,G$X._RECTVBSIZE=16,G$X.MAXCLIPRECT=new G$Q(0,0,99999999,99999999),G$X._COUNT=0,G$X._tmpMatrix=new G$r,G$X.SEGNUM=32,G$X._contextcount=0,G$P(G$X,["_fontTemp",function(){return this._fontTemp=new G$YT},"_drawStyleTemp",function(){return this._drawStyleTemp=new G$G(null)}]),G$X.__init$=function(){G$w=function(){function G$T(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=G$YT.EMPTY}G$b(G$T,"");var G$l=G$T.prototype;return G$l.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=G$YT.EMPTY},G$l.make=function(){return this===G$T.DEFAULT?new G$T:this},G$T.DEFAULT=null,G$T}()},G$X}(),G$sT=function(G$T){function G$u(G$T,G$l){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,G$u.__super.call(this),this.defines=new G$oT,this.position=G$u._POSITION,this.mainID=G$T,this.subID=G$l,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=G$T|G$l,this._inClassCache=G$u._cache[this._cacheID],0<G$T&&!this._inClassCache&&(this._inClassCache=G$u._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}G$b(G$u,"laya.webgl.shader.d2.value.Value2D",G$H);var G$l=G$u.prototype;return G$l.setValue=function(G$T){},G$l.refresh=function(){var G$T=this.size;return G$T[0]=G$iT.width,G$T[1]=G$iT.height,this.alpha=this.ALPHA*G$iT.worldAlpha,this.mmat=G$iT.worldMatrix4,this},G$l._ShaderWithCompile=function(){return G$UT.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,G$CT.create)},G$l._withWorldShaderDefines=function(){var G$T=G$iT.worldShaderDefines,G$l=G$UT.sharders[this.mainID|this.defines._value|G$T.getValue()];if(!G$l){var G$w,G$u={};for(G$w in this.defines.toNameDic())G$u[G$w]="";for(G$w in G$T.toNameDic())G$u[G$w]="";G$l=G$UT.withCompile2D(0,this.mainID,G$u,this.mainID|this.defines._value|G$T.getValue(),G$CT.create)}var G$p=G$iT.worldFilters;if(!G$p)return G$l;for(var G$D,G$P=G$p.length,G$j=0;G$j<G$P;G$j++)(G$D=G$p[G$j])&&G$D.action.setValue(this);return G$l},G$l.upload=function(){var G$T=G$iT;this.alpha=this.ALPHA*G$T.worldAlpha,G$iT.worldMatrix4!==G$iT.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),G$mT.shaderHighPrecision&&this.defines.add(1024);var G$l,G$w=G$T.worldShaderDefines?this._withWorldShaderDefines():G$UT.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=G$T.width,this.size[1]=G$T.height,this.mmat=G$T.worldMatrix4,G$OT.activeShader!==G$w?G$w._shaderValueWidth!==G$T.width||G$w._shaderValueHeight!==G$T.height?(G$w._shaderValueWidth=G$T.width,G$w._shaderValueHeight=G$T.height):G$l=G$w._params2dQuick2||G$w._make2dQuick2():G$w._shaderValueWidth!==G$T.width||G$w._shaderValueHeight!==G$T.height?(G$w._shaderValueWidth=G$T.width,G$w._shaderValueHeight=G$T.height):G$l=G$w._params2dQuick1||G$w._make2dQuick1(),G$w.upload(this,G$l)},G$l.setFilters=function(G$T){if(this.filters=G$T)for(var G$l,G$w=G$T.length,G$u=0;G$u<G$w;G$u++)(G$l=G$T[G$u])&&(this.defines.add(G$l.type),G$l.action.setValue(this))},G$l.clear=function(){this.defines.setValue(this.subID)},G$l.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},G$u._initone=function(G$T,G$l){G$u._typeClass[G$T]=G$l,G$u._cache[G$T]=[],G$u._cache[G$T]._length=0},G$u.__init__=function(){G$u._POSITION=[2,5126,!1,4*G$tT.BYTES_PE,0],G$u._TEXCOORD=[2,5126,!1,4*G$tT.BYTES_PE,2*G$tT.BYTES_PE],G$u._initone(2,G$XT),G$u._initone(4,G$dT),G$u._initone(256,G$kT),G$u._initone(512,G$HT),G$u._initone(1,G$nT),G$u._initone(65,G$VT),G$u._initone(9,G$nT)},G$u.create=function(G$T,G$l){var G$w=G$u._cache[G$T|G$l];return G$w._length?G$w[--G$w._length]:new G$u._typeClass[G$T|G$l](G$l)},G$u._POSITION=null,G$u._TEXCOORD=null,G$u._cache=[],G$u._typeClass=[],G$u.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G$u}(),G$rT=function(G$T){function G$A(G$T,G$l){G$A.__super.call(this,G$T,G$l)}G$b(G$A,"laya.webgl.utils.RenderSprite3D",G$i);var G$l=G$A.prototype;return G$l.onCreate=function(G$T){switch(G$T){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},G$l._mask=function(G$T,G$l,G$w,G$u){var G$p,G$D,G$P=this._next,G$j=G$T.mask;if(G$j){G$l.ctx.save();var G$J=G$l.ctx.globalCompositeOperation,G$q=new G$Q;if(G$q.copyFrom(G$j.getBounds()),G$q.width=Math.round(G$q.width),G$q.height=Math.round(G$q.height),G$q.x=Math.round(G$q.x),G$q.y=Math.round(G$q.y),0<G$q.width&&0<G$q.height){var G$M=G$T._style._tf,G$z=G$jT.create();G$z.addValue("bounds",G$q),G$p=G$PT.create([G$z,G$l],laya.webgl.utils.RenderSprite3D.tmpTarget),G$l.addRenderObject(G$p),G$j.render(G$l,-G$q.x,-G$q.y),G$p=G$PT.create([G$z],laya.webgl.utils.RenderSprite3D.endTmpTarget),G$l.addRenderObject(G$p),G$l.ctx.save(),G$l.clipRect(G$w-G$M.translateX+G$q.x,G$u-G$M.translateY+G$q.y,G$q.width,G$q.height),G$P._fun.call(G$P,G$T,G$l,G$w,G$u),G$l.ctx.restore(),G$D=G$MT.create(6),G$J=G$l.ctx.globalCompositeOperation,G$D.blendMode="mask",G$l.addRenderObject(G$D),G$r.TEMP.identity();var G$b=G$sT.create(1,0),G$K=G$F.INV_UV,G$Y=G$q.width,G$t=G$q.height;(G$q.width<32||G$q.height<32)&&((G$K=G$A.tempUV)[0]=0,G$K[1]=0,G$K[2]=32<=G$q.width?1:G$q.width/32,G$K[3]=0,G$K[4]=32<=G$q.width?1:G$q.width/32,G$K[5]=32<=G$q.height?1:G$q.height/32,G$K[6]=0,G$K[7]=32<=G$q.height?1:G$q.height/32,G$q.width=32<=G$q.width?G$q.width:32,G$q.height=32<=G$q.height?G$q.height:32,G$K[1]*=-1,G$K[3]*=-1,G$K[5]*=-1,G$K[7]*=-1,G$K[1]+=1,G$K[3]+=1,G$K[5]+=1,G$K[7]+=1),G$l.ctx.drawTarget(G$z,G$w+G$q.x-G$M.translateX,G$u+G$q.y-G$M.translateY,G$Y,G$t,G$r.TEMP,"tmpTarget",G$b,G$K,6),G$p=G$PT.create([G$z],laya.webgl.utils.RenderSprite3D.recycleTarget),G$l.addRenderObject(G$p),(G$D=G$MT.create(6)).blendMode=G$J,G$l.addRenderObject(G$D)}G$l.ctx.restore()}else G$P._fun.call(G$P,G$T,G$l,G$w,G$u)},G$l._blend=function(G$T,G$l,G$w,G$u){var G$p=G$T._style,G$D=this._next;G$p.blendMode?(G$l.ctx.save(),G$l.ctx.globalCompositeOperation=G$p.blendMode,G$D._fun.call(G$D,G$T,G$l,G$w,G$u),G$l.ctx.restore()):G$D._fun.call(G$D,G$T,G$l,G$w,G$u)},G$l._transform=function(G$T,G$l,G$w,G$u){var G$p=G$T.transform,G$D=this._next;if(G$p&&G$D!=G$i.NORENDER){var G$P=G$l.ctx;G$T._style;G$p.tx=G$w,G$p.ty=G$u;var G$j=G$P._getTransformMatrix(),G$J=G$j.clone();G$r.mul(G$p,G$j,G$j),G$j._checkTransform(),G$p.tx=G$p.ty=0,G$D._fun.call(G$D,G$T,G$l,0,0),G$J.copyTo(G$j),G$J.destroy()}else G$D._fun.call(G$D,G$T,G$l,G$w,G$u)},G$A.tmpTarget=function(G$T,G$l){var G$w=G$T.getValue("bounds"),G$u=G$$T.create(G$w.width,G$w.height);G$u.start(),G$u.clear(0,0,0,0),G$T.addValue("tmpTarget",G$u)},G$A.endTmpTarget=function(G$T){G$T.getValue("tmpTarget").end()},G$A.recycleTarget=function(G$T){G$T.getValue("tmpTarget").recycle(),G$T.recycle()},G$P(G$A,["tempUV",function(){return this.tempUV=new Array(8)}]),G$A}(),G$IT=function(G$T){function G$l(){this.data=null,G$l.__super.call(this)}G$b(G$l,"laya.filters.webgl.ColorFilterActionGL",G$Z);var G$w=G$l.prototype;return G$a.imps(G$w,{"laya.filters.IFilterActionGL":!0}),G$w.setValue=function(G$T){G$T.colorMat=this.data._mat,G$T.colorAlpha=this.data._alpha},G$w.apply3d=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$T.getValue("bounds"),G$P=G$sT.create(1,0);G$P.setFilters([this.data]);var G$j=G$r.TEMP;G$j.identity(),G$w.ctx.drawTarget(G$T,0,0,G$D.width,G$D.height,G$j,"src",G$P)},G$l}(),G$QT=function(G$T){function G$D(G$T,G$l,G$w,G$u,G$p){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,G$D.__super.call(this,G$T,G$l,G$p),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new G$GT,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=G$w,this._atlasCanvas.height=G$u,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}G$b(G$D,"laya.webgl.atlas.Atlaser",G$X);var G$l=G$D.prototype;return G$l.computeUVinAtlasTexture=function(G$T,G$l,G$w,G$u){var G$p=G$k.atlasTextureWidth,G$D=G$k.atlasTextureHeight,G$P=G$w/G$p,G$j=G$u/G$D,G$J=(G$w+G$T.bitmap.width)/G$p,G$q=(G$u+G$T.bitmap.height)/G$D,G$M=G$T.bitmap.width/G$p,G$z=G$T.bitmap.height/G$D;G$T.uv=[G$P+G$l[0]*G$M,G$j+G$l[1]*G$z,G$J-(1-G$l[2])*G$M,G$j+G$l[3]*G$z,G$J-(1-G$l[4])*G$M,G$q-(1-G$l[5])*G$z,G$P+G$l[6]*G$M,G$q-(1-G$l[7])*G$z]},G$l.findBitmapIsExist=function(G$T){if(G$T instanceof laya.webgl.resource.WebGLImage){var G$l=G$T,G$w=G$l.url,G$u=this._InAtlasWebGLImagesKey[G$w||G$l.id];if(G$u)return G$u.offsetInfoID}return-1},G$l.addToAtlasTexture=function(G$T,G$l,G$w){if(G$T instanceof laya.webgl.resource.WebGLImage){var G$u=G$T,G$p=G$u.url;this._InAtlasWebGLImagesKey[G$p||G$u.id]={bitmap:G$T,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([G$l,G$w])}this._atlasCanvas.texSubImage2D(G$l,G$w,G$T.atlasSource),G$T.clearAtlasSource()},G$l.addToAtlas=function(G$T,G$l,G$w){G$T._atlasID=this._inAtlasTextureKey.length;var G$u=G$T.uv.slice(),G$p=G$T.bitmap;this._inAtlasTextureKey.push(G$T),this._inAtlasTextureOriUVValue.push(G$u),this._inAtlasTextureBitmapValue.push(G$p),this.computeUVinAtlasTexture(G$T,G$u,G$l,G$w),G$T.bitmap=this._atlasCanvas},G$l.clear=function(){for(var G$T=0,G$l=this._inAtlasTextureKey.length;G$T<G$l;G$T++)this._inAtlasTextureKey[G$T].bitmap=this._inAtlasTextureBitmapValue[G$T],this._inAtlasTextureKey[G$T].uv=this._inAtlasTextureOriUVValue[G$T],this._inAtlasTextureKey[G$T]._atlasID=-1,this._inAtlasTextureKey[G$T].bitmap.lock=!1,this._inAtlasTextureKey[G$T].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},G$l.dispose=function(){this.clear(),this._atlasCanvas.destroy()},G$u(0,G$l,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),G$u(0,G$l,"texture",function(){return this._atlasCanvas}),G$u(0,G$l,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),G$D}(),G$oT=function(G$T){function G$w(){G$w.__super.call(this,G$w.__name2int,G$w.__int2name,G$w.__int2nameMap)}return G$b(G$w,"laya.webgl.shader.d2.ShaderDefines2D",G$_),G$w.__init__=function(){G$w.reg("TEXTURE2D",1),G$w.reg("COLOR2D",2),G$w.reg("PRIMITIVE",4),G$w.reg("GLOW_FILTER",8),G$w.reg("BLUR_FILTER",16),G$w.reg("COLOR_FILTER",32),G$w.reg("COLOR_ADD",64),G$w.reg("WORLDMAT",128),G$w.reg("FILLTEXTURE",256),G$w.reg("FSHIGHPRECISION",1024),G$w.reg("TXTALPHA",2048),G$w.reg("TXTCOMPRESS",4096)},G$w.reg=function(G$T,G$l){G$_._reg(G$T,G$l,G$w.__name2int,G$w.__int2name)},G$w.toText=function(G$T,G$l,G$w){return G$_._toText(G$T,G$l,G$w)},G$w.toInt=function(G$T){return G$_._toInt(G$T,G$w.__name2int)},G$w.TEXTURE2D=1,G$w.COLOR2D=2,G$w.PRIMITIVE=4,G$w.FILTERGLOW=8,G$w.FILTERBLUR=16,G$w.FILTERCOLOR=32,G$w.COLORADD=64,G$w.WORLDMAT=128,G$w.FILLTEXTURE=256,G$w.SKINMESH=512,G$w.SHADERDEFINE_FSHIGHPRECISION=1024,G$w.TXTALPHA=2048,G$w.TXTCOMPRESS=4096,G$w.__name2int={},G$w.__int2name=[],G$w.__int2nameMap=[],G$w}(),G$eT=(function(G$T){function G$j(G$T,G$l,G$w,G$u,G$p,G$D,G$P){G$j.__super.call(this,G$T,G$l,G$w,G$u,40,G$p,G$D,G$P)}G$b(G$j,"laya.webgl.shapes.Ellipse",G$wT)}(),function(G$T){function G$D(G$T,G$l,G$w,G$u,G$p){this._points=[],this.rebuild(G$w),G$D.__super.call(this,G$T,G$l,0,0,0,G$p,G$u,G$p,0)}G$b(G$D,"laya.webgl.shapes.Line",G$wT);var G$l=G$D.prototype;return G$l.rebuild=function(G$T){var G$l=G$T.length;G$l!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(G$l/2-1)),this.mFloat32Array=new Float32Array(5*G$l)),this._points.length=0;for(var G$w=NaN,G$u=NaN,G$p=-1,G$D=-1,G$P=G$T.length/2,G$j=0;G$j<G$P;G$j++)G$w=G$T[2*G$j],G$u=G$T[2*G$j+1],(.01<Math.abs(G$p-G$w)||.01<Math.abs(G$D-G$u))&&this._points.push(G$w,G$u),G$p=G$w,G$D=G$u},G$l.getData=function(G$T,G$l,G$w){var G$u=[],G$p=[];0<this.borderWidth&&this.createLine2(this._points,G$u,this.borderWidth,G$w,G$p,this._points.length/2),this.mUint16Array.set(G$u,0),this.mFloat32Array.set(G$p,0),G$T.append(this.mUint16Array),G$l.append(this.mFloat32Array)},G$D}()),G$yT=function(G$T){function G$z(G$T,G$l,G$w,G$u,G$p){this._points=[];for(var G$D=NaN,G$P=NaN,G$j=-1,G$J=-1,G$q=G$w.length/2-1,G$M=0;G$M<G$q;G$M++)G$D=G$w[2*G$M],G$P=G$w[2*G$M+1],(.01<Math.abs(G$j-G$D)||.01<Math.abs(G$J-G$P))&&this._points.push(G$D,G$P),G$j=G$D,G$J=G$P;G$D=G$w[2*G$q],G$P=G$w[2*G$q+1],G$j=this._points[0],G$J=this._points[1],(.01<Math.abs(G$j-G$D)||.01<Math.abs(G$J-G$P))&&this._points.push(G$D,G$P),G$z.__super.call(this,G$T,G$l,0,0,this._points.length/2,0,G$u,G$p)}G$b(G$z,"laya.webgl.shapes.LoopLine",G$wT);var G$l=G$z.prototype;return G$l.getData=function(G$T,G$l,G$w){if(0<this.borderWidth){for(var G$u=this.color,G$p=(G$u>>16&255)/255,G$D=(G$u>>8&255)/255,G$P=(255&G$u)/255,G$j=[],G$J=0,G$q=0,G$M=[],G$z=Math.floor(this._points.length/2),G$b=0;G$b<G$z;G$b++)G$J=this._points[2*G$b],G$q=this._points[2*G$b+1],G$j.push(this.x+G$J,this.y+G$q,G$p,G$D,G$P);this.createLoopLine(G$j,G$M,this.borderWidth,G$w+G$j.length/5),G$T.append(new Uint16Array(G$M)),G$l.append(new Float32Array(G$j))}},G$l.createLoopLine=function(G$T,G$l,G$w,G$u,G$p,G$D){G$T.length;var G$P=G$T.concat(),G$j=G$p||G$T,G$J=this.borderColor,G$q=(G$J>>16&255)/255,G$M=(G$J>>8&255)/255,G$z=(255&G$J)/255,G$b=[G$P[0],G$P[1]],G$K=[G$P[G$P.length-5],G$P[G$P.length-4]],G$Y=G$K[0]+.5*(G$b[0]-G$K[0]),G$t=G$K[1]+.5*(G$b[1]-G$K[1]);G$P.unshift(G$Y,G$t,0,0,0),G$P.push(G$Y,G$t,0,0,0);var G$A,G$L,G$i,G$W,G$m,G$c,G$a,G$B,G$s,G$r,G$I,G$Q,G$o,G$e,G$y,G$v,G$x,G$R,G$F,G$O,G$$=G$P.length/5,G$Z=G$u,G$H=G$w/2;G$i=G$P[0],G$W=G$P[1],G$r=G$i-(G$m=G$P[5]),G$s=(G$s=-(G$W-(G$c=G$P[6])))/(G$O=Math.sqrt(G$s*G$s+G$r*G$r))*G$H,G$r=G$r/G$O*G$H,G$j.push(G$i-G$s,G$W-G$r,G$q,G$M,G$z,G$i+G$s,G$W+G$r,G$q,G$M,G$z);for(var G$X=1;G$X<G$$-1;G$X++)G$i=G$P[5*(G$X-1)],G$W=G$P[5*(G$X-1)+1],G$m=G$P[5*G$X],G$c=G$P[5*G$X+1],G$a=G$P[5*(G$X+1)],G$B=G$P[5*(G$X+1)+1],G$r=G$i-G$m,G$Q=G$m-G$a,G$y=(-(G$s=(G$s=-(G$W-G$c))/(G$O=Math.sqrt(G$s*G$s+G$r*G$r))*G$H)+G$i)*(-(G$r=G$r/G$O*G$H)+G$c)-(-G$s+G$m)*(-G$r+G$W),G$R=(-(G$I=(G$I=-(G$c-G$B))/(G$O=Math.sqrt(G$I*G$I+G$Q*G$Q))*G$H)+G$a)*(-(G$Q=G$Q/G$O*G$H)+G$c)-(-G$I+G$m)*(-G$Q+G$B),G$F=(G$o=-G$r+G$W-(-G$r+G$c))*(G$x=-G$I+G$m-(-G$I+G$a))-(G$v=-G$Q+G$B-(-G$Q+G$c))*(G$e=-G$s+G$m-(-G$s+G$i)),Math.abs(G$F)<.1?(G$F+=10.1,G$j.push(G$m-G$s,G$c-G$r,G$q,G$M,G$z,G$m+G$s,G$c+G$r,G$q,G$M,G$z)):(((G$A=(G$e*G$R-G$x*G$y)/G$F)-G$m)*(G$A-G$m)+((G$L=(G$v*G$y-G$o*G$R)/G$F)-G$c)+(G$L-G$c),G$j.push(G$A,G$L,G$q,G$M,G$z,G$m-(G$A-G$m),G$c-(G$L-G$c),G$q,G$M,G$z));G$D&&(G$l=G$D);var G$k=this.edges+1;for(G$X=1;G$X<G$k;G$X++)G$l.push(G$Z+2*(G$X-1),G$Z+2*(G$X-1)+1,G$Z+2*G$X+1,G$Z+2*G$X+1,G$Z+2*G$X,G$Z+2*(G$X-1));return G$l.push(G$Z+2*(G$X-1),G$Z+2*(G$X-1)+1,G$Z+1,G$Z+1,G$Z,G$Z+2*(G$X-1)),G$j},G$z}(),G$vT=function(G$T){function G$P(G$T,G$l,G$w,G$u,G$p,G$D){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=G$r.create(),this._points=G$w.slice(0,G$w.length),G$P.__super.call(this,G$T,G$l,0,0,this._points.length/2,G$u,G$p,G$D)}G$b(G$P,"laya.webgl.shapes.Polygon",G$wT);var G$l=G$P.prototype;return G$l.rebuild=function(G$T){this._repaint||(this._points.length=0,this._points=this._points.concat(G$T))},G$l.setMatrix=function(G$T){G$T.copyTo(this._mat)},G$l.needUpdate=function(G$T){return this._repaint=this._mat.a==G$T.a&&this._mat.b==G$T.b&&this._mat.c==G$T.c&&this._mat.d==G$T.d&&this._mat.tx==G$T.tx&&this._mat.ty==G$T.ty,!this._repaint},G$l.getData=function(G$T,G$l,G$w){var G$u,G$p=0,G$D=this._points,G$P=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=G$w){for(this._start=G$w,G$u=[],G$P=this.earcutTriangles.length,G$p=0;G$p<G$P;G$p++)G$u.push(this.earcutTriangles[G$p]+G$w);this.mUint16Array=new Uint16Array(G$u)}}else{this._start=G$w,G$u=[];var G$j=[],G$J=[],G$q=this.color,G$M=(G$q>>16&255)/255,G$z=(G$q>>8&255)/255,G$b=(255&G$q)/255;for(G$P=Math.floor(G$D.length/2),G$p=0;G$p<G$P;G$p++)G$j.push(this.x+G$D[2*G$p],this.y+G$D[2*G$p+1],G$M,G$z,G$b),G$J.push(this.x+G$D[2*G$p],this.y+G$D[2*G$p+1]);for(this.earcutTriangles=G$uT.earcut(G$J,null,2),G$P=this.earcutTriangles.length,G$p=0;G$p<G$P;G$p++)G$u.push(this.earcutTriangles[G$p]+G$w);this.mUint16Array=new Uint16Array(G$u),this.mFloat32Array=new Float32Array(G$j)}G$T.append(this.mUint16Array),G$l.append(this.mFloat32Array)},G$P}(),G$xT=function(G$T){function G$D(){this._matrix=new G$r,this._matrix4=G$tT.defaultMatrix4.concat(),G$D.__super.call(this,1e4),this.shaderValue=new G$sT(0,0)}G$b(G$D,"laya.webgl.submit.SubmitCanvas",G$DT);var G$l=G$D.prototype;return G$l.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var G$T=G$iT.worldAlpha,G$l=G$iT.worldMatrix4,G$w=G$iT.worldMatrix,G$u=G$iT.worldFilters,G$p=G$iT.worldShaderDefines,G$D=this.shaderValue,G$P=this._matrix,G$j=this._matrix4,G$J=G$r.TEMP;return G$r.mul(G$P,G$w,G$J),G$j[0]=G$J.a,G$j[1]=G$J.b,G$j[4]=G$J.c,G$j[5]=G$J.d,G$j[12]=G$J.tx,G$j[13]=G$J.ty,G$iT.worldMatrix=G$J.clone(),G$iT.worldMatrix4=G$j,G$iT.worldAlpha=G$iT.worldAlpha*G$D.alpha,G$D.filters&&G$D.filters.length&&(G$iT.worldFilters=G$D.filters,G$iT.worldShaderDefines=G$D.defines),this._ctx_src.flush(),G$iT.worldAlpha=G$T,G$iT.worldMatrix4=G$l,G$iT.worldMatrix.destroy(),G$iT.worldMatrix=G$w,G$iT.worldFilters=G$u,G$iT.worldShaderDefines=G$p,1},G$l.releaseRender=function(){var G$T=G$D._cache;this._ctx_src=null,G$T[G$T._length++]=this},G$l.getRenderType=function(){return 10003},G$D.create=function(G$T,G$l,G$w){var G$u=G$D._cache._length?G$D._cache[--G$D._cache._length]:new G$D;G$u._ctx_src=G$T;var G$p=G$u.shaderValue;return G$p.alpha=G$l,G$p.defines.setValue(0),G$w&&G$w.length&&G$p.setFilters(G$w),G$u},G$D._cache=((G$D._cache=[])._length=0,G$D._cache),G$D}(),G$RT=function(G$T){function G$q(G$T){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===G$T&&(G$T=1e4),G$q.__super.call(this,G$T)}G$b(G$q,"laya.webgl.submit.SubmitTexture",G$DT);var G$l=G$q.prototype;return G$l.releaseRender=function(){var G$T=G$q._cache;(G$T[G$T._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},G$l.addTexture=function(G$T,G$l){this._texsID[this._texs.length]=G$T._uvID,this._texs.push(G$T),this._vbPos.push(G$l)},G$l.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var G$T=this.shaderValue.textureHost.bitmap;if(null!==G$T)for(var G$l=this._vb.getFloat32Array(),G$w=0,G$u=this._texs.length;G$w<G$u;G$w++){var G$p=this._texs[G$w];G$p.active();var G$D=G$p.uv;if(this._texsID[G$w]!==G$p._uvID){this._texsID[G$w]=G$p._uvID;var G$P=this._vbPos[G$w];G$l[G$P+2]=G$D[0],G$l[G$P+3]=G$D[1],G$l[G$P+6]=G$D[2],G$l[G$P+7]=G$D[3],G$l[G$P+10]=G$D[4],G$l[G$P+11]=G$D[5],G$l[G$P+14]=G$D[6],G$l[G$P+15]=G$D[7],this._vb.setNeedUpload()}G$p.bitmap!==G$T&&(this._isSameTexture=!1)}}},G$l.renderSubmit=function(){if(0===this._numEle)return G$q._shaderSet=!1,1;var G$T=this.shaderValue.textureHost;if(G$T){var G$l=G$T.source;if(!G$T.bitmap||!G$l)return G$q._shaderSet=!1,1;this.shaderValue.texture=G$l,G$T.alphaTexture&&G$T.alphaTexture.source&&(this.shaderValue.texture1=G$T.alphaTexture.source)}this._vb.bind_upload(this._ib);var G$w=G$mT.mainContext;if(G$d.activeBlendFunction!==this._blendFn&&(G$w.enable(3042),this._blendFn(G$w),G$d.activeBlendFunction=this._blendFn),G$y.drawCall++,G$y.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&G$OT.activeShader&&G$q._shaderSet?(G$OT.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&G$OT.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),G$q._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var G$u=G$T.bitmap,G$p=0,G$D=G$OT.activeShader,G$P=0,G$j=this._texs.length;G$P<G$j;G$P++){var G$J=this._texs[G$P];G$J.bitmap===G$u&&G$P+1!==G$j||(G$D.uploadTexture2D(G$J.source),G$w.drawElements(4,6*(G$P-G$p+1),5123,this._startIdx+6*G$p*G$tT.BYTES_PIDX),G$u=G$J.bitmap,G$p=G$P)}else G$w.drawElements(4,this._numEle,5123,this._startIdx);return 1},G$q.create=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$q._cache._length?G$q._cache[--G$q._cache._length]:new G$q;null==G$w&&((G$w=G$D._selfVb||(G$D._selfVb=G$_T.create(-1))).clear(),G$u=0),G$D._ib=G$l,G$D._vb=G$w,G$D._startIdx=G$u*G$tT.BYTES_PIDX,G$D._numEle=0;var G$P=G$T._nBlendType;G$D._blendFn=G$T._targets?G$d.targetFns[G$P]:G$d.fns[G$P],G$D.shaderValue=G$p,G$D.shaderValue.setValue(G$T._shader2D);var G$j=G$T._shader2D.filters;return G$j&&G$D.shaderValue.setFilters(G$j),G$D},G$q._cache=((G$q._cache=[])._length=0,G$q._cache),G$q._shaderSet=!0,G$q}(),G$FT=function(G$T){function G$L(){G$L.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}G$b(G$L,"laya.webgl.utils.MeshTexture",G$LT);var G$l=G$L.prototype;return G$l.addData=function(G$T,G$l,G$w,G$u,G$p,G$D){for(var G$P=G$T.length/2,G$j=this._vb.needSize(G$P*G$L.const_stride)>>2,G$J=this._vb.getFloat32Array(),G$q=0,G$M=0;G$M<G$P;G$M++){var G$z=G$T[G$q],G$b=G$T[G$q+1],G$K=G$z*G$u.a+G$b*G$u.c+G$u.tx,G$Y=G$z*G$u.b+G$b*G$u.d+G$u.ty;G$J[G$j++]=G$K,G$J[G$j++]=G$Y,G$J[G$j++]=G$l[G$q],G$J[G$j++]=G$l[G$q+1],G$q+=2}this._vb.setNeedUpload();var G$t=this.vertNum;if(0<G$t){(G$P=G$w.length)>G$L.tmpIdx.length&&(G$L.tmpIdx=new Uint16Array(G$P));for(var G$A=0;G$A<G$P;G$A++)G$L.tmpIdx[G$A]=G$w[G$A]+G$t;this._ib.appendU16Array(G$L.tmpIdx,G$w.length)}else this._ib.append(G$w);this._ib.setNeedUpload(),this.vertNum+=G$P,this.indexNum+=G$w.length},G$l.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},G$l.destroy=function(){this._ib.destroy(),this._vb.destroy()},G$L.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new G$L},G$L.const_stride=16,G$L._POOL=[],G$P(G$L,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),G$L}(),G$OT=function(G$T){function G$l(){G$l.__super.call(this),this.lock=!0}return G$b(G$l,"laya.webgl.shader.BaseShader",G$W),G$l.activeShader=null,G$l.bindShader=null,G$l}(),G$$T=function(G$l){function G$M(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===G$w&&(G$w=6408),void 0===G$u&&(G$u=5121),void 0===G$p&&(G$p=34041),void 0===G$D&&(G$D=!1),void 0===G$P&&(G$P=!1),void 0===G$j&&(G$j=-1),void 0===G$J&&(G$J=-1),this._type=1,this._w=G$T,this._h=G$l,this._surfaceFormat=G$w,this._surfaceType=G$u,this._depthStencilFormat=G$p,G$L.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=G$D,this._repeat=G$P,this._minFifter=G$j,this._magFifter=G$J,this._createWebGLRenderTarget(),this.bitmap.lock=!0,G$M.__super.call(this,this.bitmap,G$F.INV_UV)}G$b(G$M,"laya.webgl.resource.RenderTarget2D",G$l);var G$T=G$M.prototype;return G$a.imps(G$T,{"laya.resource.IDispose":!0}),G$T.getType=function(){return this._type},G$T.getTexture=function(){return this},G$T.size=function(G$T,G$l){this._w==G$T&&this._h==G$l||(this._w=G$T,this._h=G$l,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},G$T.release=function(){this.destroy()},G$T.recycle=function(){G$M.POOL.push(this)},G$T.start=function(){var G$T=G$mT.mainContext;return this._preRenderTarget=G$iT.curRenderTarget,G$iT.curRenderTarget=this,G$T.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(G$T.viewport(0,0,this._w,this._h),this._svWidth=G$iT.width,this._svHeight=G$iT.height,G$iT.width=this._w,G$iT.height=this._h,G$OT.activeShader=null),this},G$T.clear=function(G$T,G$l,G$w,G$u){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=1);var G$p=G$mT.mainContext;G$p.clearColor(G$T,G$l,G$w,G$u);var G$D=16384;switch(this._depthStencilFormat){case 33189:G$D|=256;break;case 36168:G$D|=1024;break;case 34041:G$D|=256,G$D|=1024}G$p.clear(G$D)},G$T.end=function(){var G$T=G$mT.mainContext;G$T.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,G$iT.curRenderTarget=this._preRenderTarget,1==this._type?(G$T.viewport(0,0,this._svWidth,this._svHeight),G$iT.width=this._svWidth,G$iT.height=this._svHeight,G$OT.activeShader=null):G$T.viewport(0,0,G$a.stage.width,G$a.stage.height)},G$T.getData=function(G$T,G$l,G$w,G$u){var G$p=G$mT.mainContext;if(G$p.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===G$p.checkFramebufferStatus(36160)))return G$p.bindFramebuffer(36160,null),null;var G$D=new Uint8Array(this._w*this._h*4);return G$p.readPixels(G$T,G$l,G$w,G$u,this._surfaceFormat,this._surfaceType,G$D),G$p.bindFramebuffer(36160,null),G$D},G$T.destroy=function(G$T){void 0===G$T&&(G$T=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,G$l.prototype.destroy.call(this))},G$T.dispose=function(){},G$T._createWebGLRenderTarget=function(){this.bitmap=new G$gT(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(G$T){this.event("recovered")})},G$u(0,G$T,"surfaceFormat",function(){return this._surfaceFormat}),G$u(0,G$T,"magFifter",function(){return this._magFifter}),G$u(0,G$T,"surfaceType",function(){return this._surfaceType}),G$u(0,G$T,"mipMap",function(){return this._mipMap}),G$u(0,G$T,"depthStencilFormat",function(){return this._depthStencilFormat}),G$u(0,G$T,"minFifter",function(){return this._minFifter}),G$u(0,G$T,"source",function(){return this._alreadyResolved?G$a.superGet(G$F,this,"source"):null}),G$M.create=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){void 0===G$w&&(G$w=6408),void 0===G$u&&(G$u=5121),void 0===G$p&&(G$p=34041),void 0===G$D&&(G$D=!1),void 0===G$P&&(G$P=!1),void 0===G$j&&(G$j=-1),void 0===G$J&&(G$J=-1);var G$q=G$M.POOL.pop();return G$q||(G$q=new G$M(G$T,G$l)),G$q.bitmap&&G$q._w==G$T&&G$q._h==G$l&&G$q._surfaceFormat==G$w&&G$q._surfaceType==G$u&&G$q._depthStencilFormat==G$p&&G$q._mipMap==G$D&&G$q._repeat==G$P&&G$q._minFifter==G$j&&G$q._magFifter==G$J||(G$q._w=G$T,G$q._h=G$l,G$q._surfaceFormat=G$w,G$q._surfaceType=G$u,G$q._depthStencilFormat=G$p,G$L.isConchWebGL&&34041===G$q._depthStencilFormat&&(G$q._depthStencilFormat=33189),G$q._mipMap=G$D,G$q._repeat=G$P,G$q._minFifter=G$j,G$q._magFifter=G$J,G$q.release(),G$q._createWebGLRenderTarget()),G$q},G$M.TYPE2D=1,G$M.TYPE3D=2,G$M.POOL=[],G$M}(G$F),G$ZT=function(G$T){function G$l(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,G$l.__super.call(this),G$l._gl=G$mT.mainContext}G$b(G$l,"laya.webgl.utils.Buffer",G$W);var G$w=G$l.prototype;return G$w._bind=function(){this.activeResource(),G$l._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(G$l._bindVertexBuffer=this._glBuffer),G$l._gl.bindBuffer(this._bufferType,G$l._bindActive[this._bufferType]=this._glBuffer),G$OT.activeShader=null)},G$w.recreateResource=function(){this._glBuffer||(this._glBuffer=G$l._gl.createBuffer()),this.completeCreate()},G$w.disposeResource=function(){this._glBuffer&&(G$mT.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},G$u(0,G$w,"bufferUsage",function(){return this._bufferUsage}),G$l._gl=null,G$l._bindActive={},G$l._bindVertexBuffer=null,G$l._enableAtributes=[],G$l}(),G$HT=function(G$T){function G$w(G$T){this.texcoord=null,this.offsetX=300,this.offsetY=0,G$w.__super.call(this,512,0);var G$l=8*G$tT.BYTES_PE;this.position=[2,5126,!1,G$l,0],this.texcoord=[2,5126,!1,G$l,2*G$tT.BYTES_PE],this.color=[4,5126,!1,G$l,4*G$tT.BYTES_PE]}return G$b(G$w,"laya.webgl.shader.d2.skinAnishader.SkinSV",G$sT),G$w}(),G$XT=function(G$T){function G$l(G$T){G$l.__super.call(this,2,0),this.color=[]}return G$b(G$l,"laya.webgl.shader.d2.value.Color2dSV",G$sT),G$l.prototype.setValue=function(G$T){G$T.fillStyle&&(this.color=G$T.fillStyle._color._color),G$T.strokeStyle&&(this.color=G$T.strokeStyle._color._color)},G$l}(),G$kT=function(G$T){function G$l(G$T){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=G$sT._TEXCOORD,G$l.__super.call(this,256,0)}G$b(G$l,"laya.webgl.shader.d2.value.FillTextureSV",G$sT);var G$w=G$l.prototype;return G$w.setValue=function(G$T){this.ALPHA=G$T.ALPHA,G$T.filters&&this.setFilters(G$T.filters)},G$w.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},G$l}(),G$nT=function(G$T){function G$l(G$T){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=G$sT._TEXCOORD,void 0===G$T&&(G$T=0),G$l.__super.call(this,1,G$T)}G$b(G$l,"laya.webgl.shader.d2.value.TextureSV",G$sT);var G$w=G$l.prototype;return G$w.setValue=function(G$T){this.ALPHA=G$T.ALPHA,G$T.filters&&this.setFilters(G$T.filters)},G$w.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},G$l}(),G$dT=function(G$T){function G$l(G$T){this.a_color=null,this.u_pos=[0,0],G$l.__super.call(this,4,0),this.position=[2,5126,!1,5*G$tT.BYTES_PE,0],this.a_color=[3,5126,!1,5*G$tT.BYTES_PE,2*G$tT.BYTES_PE]}return G$b(G$l,"laya.webgl.shader.d2.value.PrimitiveSV",G$sT),G$l}(),G$GT=function(G$T){function G$l(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,G$l.__super.call(this)}G$b(G$l,"laya.webgl.atlas.AtlasWebGLCanvas",G$T);var G$w=G$l.prototype;return G$w.recreateResource=function(){var G$T=G$mT.mainContext,G$l=this._source=G$T.createTexture(),G$w=G$cT.curBindTexTarget,G$u=G$cT.curBindTexValue;G$cT.bindTexture(G$T,3553,G$l),G$T.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),G$T.texParameteri(3553,10241,9729),G$T.texParameteri(3553,10240,9729),G$T.texParameteri(3553,10242,33071),G$T.texParameteri(3553,10243,33071),G$w&&G$u&&G$cT.bindTexture(G$T,G$w,G$u),this.memorySize=this._w*this._h*4,this.completeCreate()},G$w.disposeResource=function(){this._source&&(G$mT.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},G$w.texSubImage2D=function(G$T,G$l,G$w){if(G$L.isFlash){this._flashCacheImage||(this._flashCacheImage=G$t.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var G$u=G$w.bitmapdata;this._flashCacheImage._image.copyPixels(G$u,0,0,G$u.width,G$u.height,G$T,G$l),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var G$p=G$mT.mainContext,G$D=G$cT.curBindTexTarget,G$P=G$cT.curBindTexValue;G$cT.bindTexture(G$p,3553,this._source),G$p.pixelStorei(37441,!0),0<=G$T-1&&G$p.texSubImage2D(3553,0,G$T-1,G$l,6408,5121,G$w),G$T+1<=this._w&&G$p.texSubImage2D(3553,0,G$T+1,G$l,6408,5121,G$w),0<=G$l-1&&G$p.texSubImage2D(3553,0,G$T,G$l-1,6408,5121,G$w),G$l+1<=this._h&&G$p.texSubImage2D(3553,0,G$T,G$l+1,6408,5121,G$w),G$p.texSubImage2D(3553,0,G$T,G$l,6408,5121,G$w),G$p.pixelStorei(37441,!1),G$D&&G$P&&G$cT.bindTexture(G$p,G$D,G$P)}},G$w.texSubImage2DPixel=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$mT.mainContext,G$P=G$cT.curBindTexTarget,G$j=G$cT.curBindTexValue;G$cT.bindTexture(G$D,3553,this._source);var G$J=new Uint8Array(G$p.data);G$D.pixelStorei(37441,!0),G$D.texSubImage2D(3553,0,G$T,G$l,G$w,G$u,6408,5121,G$J),G$D.pixelStorei(37441,!1),G$P&&G$j&&G$cT.bindTexture(G$D,G$P,G$j)},G$u(0,G$w,"width",G$T.prototype._$get_width,function(G$T){this._w=G$T}),G$u(0,G$w,"height",G$T.prototype._$get_height,function(G$T){this._h=G$T}),G$l}(G$w),G$NT=function(G$T){function G$p(){this.flipY=!0,this.alwaysChange=!1,G$p.__super.call(this)}G$b(G$p,"laya.webgl.resource.WebGLCanvas",G$w);var G$l=G$p.prototype;return G$l.getCanvas=function(){return this._canvas},G$l.clear=function(){this._ctx&&this._ctx.clear()},G$l.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},G$l._setContext=function(G$T){this._ctx=G$T},G$l.getContext=function(G$T,G$l){return this._ctx?this._ctx:this._ctx=G$p._createContext(this)},G$l.size=function(G$T,G$l){this._w==G$T&&this._h==G$l||(this._w=G$T,this._h=G$l,this._ctx&&this._ctx.size(G$T,G$l),this._canvas&&(this._canvas.height=G$l,this._canvas.width=G$T))},G$l.activeResource=function(G$T){void 0===G$T&&(G$T=!1),this._source||this.recreateResource()},G$l.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},G$l.disposeResource=function(){this._source&&!this.iscpuSource&&(G$mT.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},G$l.createWebGlTexture=function(){var G$T=G$mT.mainContext;this._canvas;var G$l=this._source=G$T.createTexture();this.iscpuSource=!1;var G$w=G$cT.curBindTexTarget,G$u=G$cT.curBindTexValue;G$cT.bindTexture(G$T,3553,G$l),G$T.pixelStorei(37440,this.flipY?1:0),G$p.premulAlpha&&G$T.pixelStorei(37441,!0),G$T.texImage2D(3553,0,6408,6408,5121,this._imgData),G$p.premulAlpha&&G$T.pixelStorei(37441,!1),G$T.texParameteri(3553,10240,9729),G$T.texParameteri(3553,10241,9729),G$T.texParameteri(3553,10242,33071),G$T.texParameteri(3553,10243,33071),G$T.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,G$w&&G$u&&G$cT.bindTexture(G$T,G$w,G$u)},G$l.reloadCanvasData=function(){var G$T=G$mT.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var G$l=G$cT.curBindTexTarget,G$w=G$cT.curBindTexValue;G$cT.bindTexture(G$T,3553,this._source),G$p.premulAlpha&&G$T.pixelStorei(37441,!0),G$T.texImage2D(3553,0,6408,6408,5121,this._imgData),G$p.premulAlpha&&G$T.pixelStorei(37441,!1),G$T.pixelStorei(37440,0),G$l&&G$w&&G$cT.bindTexture(G$T,G$l,G$w)},G$l.texSubImage2D=function(G$T,G$l,G$w){var G$u=G$mT.mainContext,G$p=G$cT.curBindTexTarget,G$D=G$cT.curBindTexValue;G$cT.bindTexture(G$u,3553,this._source),G$u.pixelStorei(37441,!0),G$u.texSubImage2D(3553,0,G$l,G$w,6408,5121,G$T._source),G$u.pixelStorei(37441,!1),G$p&&G$D&&G$cT.bindTexture(G$u,G$p,G$D)},G$l.toBase64=function(G$T,G$l,G$w){var G$u=null;this._canvas&&(G$u=this._canvas.toDataURL(G$T,G$l)),G$w.call(this,G$u)},G$u(0,G$l,"context",function(){return this._ctx}),G$u(0,G$l,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),G$u(0,G$l,"asBitmap",null,function(G$T){this._ctx&&(this._ctx.asBitmap=G$T)}),G$p._createContext=null,G$p.premulAlpha=!1,G$p}(),G$hT=function(G$T){function G$D(G$T,G$l){this.CborderSize=12,G$D.__super.call(this),this.char=G$T,this.isSpace=" "===G$T,this.xs=G$l.scaleX,this.ys=G$l.scaleY,this.font=G$l.font.toString(),this.fontSize=G$l.font.size,this.fillColor=G$l.fillColor,this.borderColor=G$l.borderColor,this.lineWidth=G$l.lineWidth,this.underLine=G$l.underLine;var G$w,G$u=G$L.isConchApp;G$u?((G$w=ConchTextCanvas)._source=ConchTextCanvas,G$w._source.canvas=ConchTextCanvas):G$w=G$K.canvas.source,this.canvas=G$w,this._enableMerageInAtlas=!0,this._ctx=G$u?G$w:this.canvas.getContext("2d",void 0);var G$p=G$O.measureText(this.char,this.font);this.cw=G$p.width*this.xs,this.ch=(G$p.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new G$F(this)}G$b(G$D,"laya.webgl.resource.WebGLCharImage",G$w);var G$l=G$D.prototype;return G$a.imps(G$l,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),G$l.active=function(){this.texture.active()},G$l.recreateResource=function(){var G$T=G$L.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),G$T){var G$l=this.fontSize;1==this.xs&&1==this.ys||(G$l=parseInt(G$l*(this.xs>this.ys?this.xs:this.ys)+""));var G$w="normal 100 "+this.font;G$w=G$w.replace(G$D._fontSizeReg,G$l),this.borderColor&&(G$w+=" 1 "+this.borderColor),this._ctx.font=G$w,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,G$R.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var G$u=this._ctx.measureText(this.char);G$u||(G$u={width:16});var G$p=G$u.width+1;this._ctx.lineTo(G$p,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},G$l.onresize=function(G$T,G$l){this._w=G$T,this._h=G$l,this._allowMerageInAtlas=!0},G$l.clearAtlasSource=function(){},G$u(0,G$l,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),G$u(0,G$l,"atlasSource",function(){return this.canvas}),G$u(0,G$l,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(G$T){this._enableMerageInAtlas=G$T}),G$D.createOneChar=function(G$T,G$l){return new G$D(G$T,G$l)},G$D._fontSizeReg=new RegExp("\\d+(?=px)","g"),G$D}(),G$gT=function(G$T){function G$q(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){void 0===G$w&&(G$w=6408),void 0===G$u&&(G$u=5121),void 0===G$p&&(G$p=34041),void 0===G$D&&(G$D=!1),void 0===G$P&&(G$P=!1),void 0===G$j&&(G$j=-1),void 0===G$J&&(G$J=1),G$q.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=G$T,this._h=G$l,this._surfaceFormat=G$w,this._surfaceType=G$u,this._depthStencilFormat=G$p,this._mipMap=G$D,this._repeat=G$P,this._minFifter=G$j,this._magFifter=G$J}G$b(G$q,"laya.webgl.resource.WebGLRenderTarget",G$w);var G$l=G$q.prototype;return G$l.recreateResource=function(){var G$T=G$mT.mainContext;this._frameBuffer||(this._frameBuffer=G$T.createFramebuffer()),this._source||(this._source=G$T.createTexture());var G$l=G$cT.curBindTexTarget,G$w=G$cT.curBindTexValue;G$cT.bindTexture(G$T,3553,this._source),G$T.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var G$u=this._minFifter,G$p=this._magFifter,G$D=this._repeat?10497:33071,G$P=G$M.isPOT(this._w,this._h);if(G$P?(this._mipMap?-1!==G$u||(G$u=9987):-1!==G$u||(G$u=9729),-1!==G$p||(G$p=9729),G$T.texParameteri(3553,10241,G$u),G$T.texParameteri(3553,10240,G$p),G$T.texParameteri(3553,10242,G$D),G$T.texParameteri(3553,10243,G$D),this._mipMap&&G$T.generateMipmap(3553)):(-1!==G$u||(G$u=9729),-1!==G$p||(G$p=9729),G$T.texParameteri(3553,10241,G$u),G$T.texParameteri(3553,10240,G$p),G$T.texParameteri(3553,10242,33071),G$T.texParameteri(3553,10243,33071)),G$T.bindFramebuffer(36160,this._frameBuffer),G$T.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=G$T.createRenderbuffer()),G$T.bindRenderbuffer(36161,this._depthStencilBuffer),G$T.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:G$T.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:G$T.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:G$T.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}G$T.bindFramebuffer(36160,null),G$l&&G$w&&G$cT.bindTexture(G$T,G$l,G$w),G$T.bindRenderbuffer(36161,null),G$P&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},G$l.disposeResource=function(){this._frameBuffer&&(G$mT.mainContext.deleteTexture(this._source),G$mT.mainContext.deleteFramebuffer(this._frameBuffer),G$mT.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},G$u(0,G$l,"depthStencilBuffer",function(){return this._depthStencilBuffer}),G$u(0,G$l,"frameBuffer",function(){return this._frameBuffer}),G$q}(),G$fT=function(G$T){function G$j(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this.offsetX=0,this.offsetY=0,G$j.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=G$D,this.canvas=G$T,this._ctx=G$T.getContext("2d",void 0),this._w=G$u,this._h=G$p,this.offsetX=G$l,this.offsetY=G$w,this.src=G$P,this._enableMerageInAtlas=!0,G$k.enabled&&this._w<G$k.atlasLimitWidth&&this._h<G$k.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}G$b(G$j,"laya.webgl.resource.WebGLSubImage",G$w);var G$l=G$j.prototype;return G$a.imps(G$l,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),G$l.size=function(G$T,G$l){this._w=G$T,this._h=G$l,this._ctx&&this._ctx.size(G$T,G$l),this.canvas&&(this.canvas.height=G$l,this.canvas.width=G$T)},G$l.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},G$l.createWebGlTexture=function(){var G$T=G$mT.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var G$l=this._source=G$T.createTexture(),G$w=G$cT.curBindTexTarget,G$u=G$cT.curBindTexValue;G$cT.bindTexture(G$T,3553,G$l),G$T.pixelStorei(37441,!0),G$T.texImage2D(3553,0,6408,6408,5121,this.canvas),G$T.pixelStorei(37441,!1);var G$p=this.minFifter,G$D=this.magFifter,G$P=this.repeat?10497:33071,G$j=G$M.isPOT(this.width,this.height);G$j?(this.mipmap?-1!==G$p||(G$p=9987):-1!==G$p||(G$p=9729),-1!==G$D||(G$D=9729),G$T.texParameteri(3553,10240,G$D),G$T.texParameteri(3553,10241,G$p),G$T.texParameteri(3553,10242,G$P),G$T.texParameteri(3553,10243,G$P),this.mipmap&&G$T.generateMipmap(3553)):(-1!==G$p||(G$p=9729),-1!==G$D||(G$D=9729),G$T.texParameteri(3553,10241,G$p),G$T.texParameteri(3553,10240,G$D),G$T.texParameteri(3553,10242,33071),G$T.texParameteri(3553,10243,33071)),G$w&&G$u&&G$cT.bindTexture(G$T,G$w,G$u),this.canvas=null,G$j&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},G$l.disposeResource=function(){G$k.enabled&&this._allowMerageInAtlas||!this._source||(G$mT.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},G$l.clearAtlasSource=function(){},G$u(0,G$l,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),G$u(0,G$l,"atlasSource",function(){return this.canvas}),G$u(0,G$l,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(G$T){this._allowMerageInAtlas=G$T}),G$j}(),G$UT=function(G$T){function G$q(G$T,G$l,G$w,G$u){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,G$q.__super.call(this),!G$T||!G$l)throw"Shader Error";this._id=++G$q._count,this._vs=G$T,this._ps=G$l,this._nameMap=G$u||{},null!=G$w&&(G$q.sharders[G$w]=this)}G$b(G$q,"laya.webgl.shader.Shader",G$OT);var G$l=G$q.prototype;return G$l.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},G$l.disposeResource=function(){G$mT.mainContext.deleteShader(this._vshader),G$mT.mainContext.deleteShader(this._pshader),G$mT.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},G$l._compile=function(){if(!G$mT.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var G$T=[this._vs,this._ps],G$l=G$mT.mainContext;if(this._program=G$l.createProgram(),this._vshader=G$q._createShader(G$l,G$T[0],35633),this._pshader=G$q._createShader(G$l,G$T[1],35632),G$l.attachShader(this._program,this._vshader),G$l.attachShader(this._program,this._pshader),G$l.linkProgram(this._program),!G$L.isConchApp&&!G$l.getProgramParameter(this._program,35714))throw G$l.getProgramInfoLog(this._program);var G$w,G$u,G$p=0,G$D=0;for(G$D=G$L.isConchApp?G$l.getProgramParameterEx(this._vs,this._ps,"",35721):G$l.getProgramParameter(this._program,35721),G$p=0;G$p<G$D;G$p++){var G$P=null;G$w={vartype:"attribute",glfun:null,ivartype:0,attrib:G$P=G$L.isConchApp?G$l.getActiveAttribEx(this._vs,this._ps,"",G$p):G$l.getActiveAttrib(this._program,G$p),location:G$l.getAttribLocation(this._program,G$P.name),name:G$P.name,type:G$P.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(G$w)}var G$j=0;for(G$j=G$L.isConchApp?G$l.getProgramParameterEx(this._vs,this._ps,"",35718):G$l.getProgramParameter(this._program,35718),G$p=0;G$p<G$j;G$p++){var G$J=null;G$J=G$L.isConchApp?G$l.getActiveUniformEx(this._vs,this._ps,"",G$p):G$l.getActiveUniform(this._program,G$p),0<(G$w={vartype:"uniform",glfun:null,ivartype:1,attrib:G$P,location:G$l.getUniformLocation(this._program,G$J.name),name:G$J.name,type:G$J.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(G$w.name=G$w.name.substr(0,G$w.name.length-3),G$w.isArray=!0,G$w.location=G$l.getUniformLocation(this._program,G$w.name)),this._params.push(G$w)}for(G$p=0,G$u=this._params.length;G$p<G$u;G$p++)if((G$w=this._params[G$p]).indexOfParams=G$p,G$w.index=1,G$w.value=[G$w.location,null],G$w.codename=G$w.name,G$w.name=this._nameMap[G$w.codename]?this._nameMap[G$w.codename]:G$w.codename,(this._paramsMap[G$w.name]=G$w)._this=this,G$w.uploadedValue=[],"attribute"!==G$w.vartype)switch(G$w.type){case 5124:G$w.fun=G$w.isArray?this._uniform1iv:this._uniform1i;break;case 5126:G$w.fun=G$w.isArray?this._uniform1fv:this._uniform1f;break;case 35664:G$w.fun=G$w.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:G$w.fun=G$w.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:G$w.fun=G$w.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:G$w.fun=this._uniform_sampler2D;break;case 35680:G$w.fun=this._uniform_samplerCube;break;case 35676:G$w.glfun=G$l.uniformMatrix4fv,G$w.fun=this._uniformMatrix4fv;break;case 35670:G$w.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else G$w.fun=this._attribute}},G$l.getUniform=function(G$T){return this._paramsMap[G$T]},G$l._attribute=function(G$T,G$l){var G$w=G$mT.mainContext,G$u=G$ZT._enableAtributes,G$p=G$T.location;return G$u[G$p]||G$w.enableVertexAttribArray(G$p),G$w.vertexAttribPointer(G$p,G$l[0],G$l[1],G$l[2],G$l[3],G$l[4]+this._offset),G$u[G$p]=G$ZT._bindVertexBuffer,1},G$l._uniform1f=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l?(G$mT.mainContext.uniform1f(G$T.location,G$w[0]=G$l),1):0},G$l._uniform1fv=function(G$T,G$l){if(G$l.length<4){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]||G$w[3]!==G$l[3]?(G$mT.mainContext.uniform1fv(G$T.location,G$l),G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2],G$w[3]=G$l[3],1):0}return G$mT.mainContext.uniform1fv(G$T.location,G$l),1},G$l._uniform_vec2=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]?(G$mT.mainContext.uniform2f(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1]),1):0},G$l._uniform_vec2v=function(G$T,G$l){if(G$l.length<2){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]||G$w[3]!==G$l[3]?(G$mT.mainContext.uniform2fv(G$T.location,G$l),G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2],G$w[3]=G$l[3],1):0}return G$mT.mainContext.uniform2fv(G$T.location,G$l),1},G$l._uniform_vec3=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]?(G$mT.mainContext.uniform3f(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2]),1):0},G$l._uniform_vec3v=function(G$T,G$l){return G$mT.mainContext.uniform3fv(G$T.location,G$l),1},G$l._uniform_vec4=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]||G$w[3]!==G$l[3]?(G$mT.mainContext.uniform4f(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2],G$w[3]=G$l[3]),1):0},G$l._uniform_vec4v=function(G$T,G$l){return G$mT.mainContext.uniform4fv(G$T.location,G$l),1},G$l._uniformMatrix2fv=function(G$T,G$l){return G$mT.mainContext.uniformMatrix2fv(G$T.location,!1,G$l),1},G$l._uniformMatrix3fv=function(G$T,G$l){return G$mT.mainContext.uniformMatrix3fv(G$T.location,!1,G$l),1},G$l._uniformMatrix4fv=function(G$T,G$l){return G$mT.mainContext.uniformMatrix4fv(G$T.location,!1,G$l),1},G$l._uniform1i=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l?(G$mT.mainContext.uniform1i(G$T.location,G$w[0]=G$l),1):0},G$l._uniform1iv=function(G$T,G$l){return G$mT.mainContext.uniform1iv(G$T.location,G$l),1},G$l._uniform_ivec2=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]?(G$mT.mainContext.uniform2i(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1]),1):0},G$l._uniform_ivec2v=function(G$T,G$l){return G$mT.mainContext.uniform2iv(G$T.location,G$l),1},G$l._uniform_vec3i=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]?(G$mT.mainContext.uniform3i(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2]),1):0},G$l._uniform_vec3vi=function(G$T,G$l){return G$mT.mainContext.uniform3iv(G$T.location,G$l),1},G$l._uniform_vec4i=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]||G$w[3]!==G$l[3]?(G$mT.mainContext.uniform4i(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2],G$w[3]=G$l[3]),1):0},G$l._uniform_vec4vi=function(G$T,G$l){return G$mT.mainContext.uniform4iv(G$T.location,G$l),1},G$l._uniform_sampler2D=function(G$T,G$l){var G$w=G$mT.mainContext,G$u=G$T.uploadedValue;return null==G$u[0]?(G$u[0]=this._curActTexIndex,G$w.uniform1i(G$T.location,this._curActTexIndex),G$w.activeTexture(G$q._TEXTURES[this._curActTexIndex]),G$cT.bindTexture(G$w,3553,G$l),this._curActTexIndex++,1):(G$w.activeTexture(G$q._TEXTURES[G$u[0]]),G$cT.bindTexture(G$w,3553,G$l),0)},G$l._uniform_samplerCube=function(G$T,G$l){var G$w=G$mT.mainContext,G$u=G$T.uploadedValue;return null==G$u[0]?(G$u[0]=this._curActTexIndex,G$w.uniform1i(G$T.location,this._curActTexIndex),G$w.activeTexture(G$q._TEXTURES[this._curActTexIndex]),G$cT.bindTexture(G$w,34067,G$l),this._curActTexIndex++,1):(G$w.activeTexture(G$q._TEXTURES[G$u[0]]),G$cT.bindTexture(G$w,34067,G$l),0)},G$l._noSetValue=function(G$T){console.log("no....:"+G$T.name)},G$l.uploadOne=function(G$T,G$l){this.activeResource(),G$cT.UseProgram(this._program);var G$w=this._paramsMap[G$T];G$w.fun.call(this,G$w,G$l)},G$l.uploadTexture2D=function(G$T){G$y.shaderCall++;var G$l=G$mT.mainContext;G$l.activeTexture(33984),G$cT.bindTexture(G$l,3553,G$T)},G$l.uploadTexture2D1=function(G$T){G$y.shaderCall++;var G$l=G$mT.mainContext;G$l.activeTexture(33985),G$cT.bindTexture(G$l,3553,G$T)},G$l.upload=function(G$T,G$l){G$OT.activeShader=G$OT.bindShader=this,this._lastUseFrameCount===G$y.loopCount||this.activeResource(),G$cT.UseProgram(this._program),this._reCompile?(G$l=this._params,this._reCompile=!1):G$l=G$l||this._params;G$mT.mainContext;for(var G$w,G$u,G$p=G$l.length,G$D=0,G$P=0;G$P<G$p;G$P++)null!==(G$u=G$T[(G$w=G$l[G$P]).name])&&(G$D+=G$w.fun.call(this,G$w,G$u));G$y.shaderCall+=G$D},G$l.uploadArray=function(G$T,G$l,G$w){G$OT.activeShader=this,(G$OT.bindShader=this).activeResource(),G$cT.UseProgram(this._program);this._params;for(var G$u,G$p,G$D=0,G$P=G$l-2;0<=G$P;G$P-=2)(G$p=this._paramsMap[G$T[G$P]])&&null!=(G$u=G$T[G$P+1])&&(G$w&&G$w[G$p.name]&&G$w[G$p.name].bind(),G$D+=G$p.fun.call(this,G$p,G$u));G$y.shaderCall+=G$D},G$l.getParams=function(){return this._params},G$q.getShader=function(G$T){return G$q.sharders[G$T]},G$q.create=function(G$T,G$l,G$w,G$u){return new G$q(G$T,G$l,G$w,G$u)},G$q.withCompile=function(G$T,G$l,G$w,G$u){if(G$w&&G$q.sharders[G$w])return G$q.sharders[G$w];var G$p=G$q._preCompileShader[2e-4*G$T];if(!G$p)throw new Error("withCompile shader err!"+G$T);return G$p.createShader(G$l,G$w,G$u)},G$q.withCompile2D=function(G$T,G$l,G$w,G$u,G$p){if(G$u&&G$q.sharders[G$u])return G$q.sharders[G$u];var G$D=G$q._preCompileShader[2e-4*G$T+G$l];if(!G$D)throw new Error("withCompile shader err!"+G$T+" "+G$l);return G$D.createShader(G$w,G$u,G$p)},G$q.addInclude=function(G$T,G$l){G$WT.addInclude(G$T,G$l)},G$q.preCompile=function(G$T,G$l,G$w,G$u){var G$p=2e-4*G$T;G$q._preCompileShader[G$p]=new G$WT(G$p,G$l,G$w,G$u)},G$q.preCompile2D=function(G$T,G$l,G$w,G$u,G$p){var G$D=2e-4*G$T+G$l;G$q._preCompileShader[G$D]=new G$WT(G$D,G$w,G$u,G$p)},G$q._createShader=function(G$T,G$l,G$w){var G$u=G$T.createShader(G$w);return G$T.shaderSource(G$u,G$l),G$T.compileShader(G$u),G$u},G$q._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],G$q._count=0,G$q._preCompileShader={},G$q.SHADERNAME2ID=2e-4,G$q.sharders=((G$q.sharders=[]).length=32,G$q.sharders),G$P(G$q,["nameKey",function(){return this.nameKey=new G$v}]),G$q}(),G$ET=function(G$T){function G$l(){this._maxsize=0,this._upload=!0,this._uploadSize=0,G$l.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}G$b(G$l,"laya.webgl.utils.Buffer2D",G$T);var G$w=G$l.prototype;return G$w.needSize=function(G$T){var G$l=this._byteLength;if(G$T){var G$w=this._byteLength+G$T;G$w<=this._buffer.byteLength||this._resizeBuffer(G$w<<1,!0),this._byteLength=G$w}return G$l},G$w._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),G$y.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,G$ZT._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),G$ZT._gl.bufferSubData(this._bufferType,0,this._buffer)},G$w._bufferSubData=function(G$T,G$l,G$w){if(void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),this._maxsize=Math.max(this._maxsize,this._byteLength),G$y.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,G$ZT._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),G$l||G$w){var G$u=this._buffer.slice(G$l,G$w);G$ZT._gl.bufferSubData(this._bufferType,G$T,G$u)}else G$ZT._gl.bufferSubData(this._bufferType,G$T,this._buffer)},G$w._checkArrayUse=function(){},G$w._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},G$w._bind_subUpload=function(G$T,G$l,G$w){return void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(G$T,G$l,G$w),!0)},G$w._resizeBuffer=function(G$T,G$l){if(G$T<this._buffer.byteLength)return this;if(this.memorySize=G$T,G$l&&this._buffer&&0<this._buffer.byteLength){var G$w=new ArrayBuffer(G$T);new Uint8Array(G$w).set(new Uint8Array(this._buffer),0),this._buffer=G$w}else this._buffer=new ArrayBuffer(G$T);return this._checkArrayUse(),this._upload=!0,this},G$w.append=function(G$T){this._upload=!0;var G$l,G$w;G$l=G$T.byteLength,G$T instanceof Uint8Array?(this._resizeBuffer(this._byteLength+G$l,!0),G$w=new Uint8Array(this._buffer,this._byteLength)):G$T instanceof Uint16Array?(this._resizeBuffer(this._byteLength+G$l,!0),G$w=new Uint16Array(this._buffer,this._byteLength)):G$T instanceof Float32Array&&(this._resizeBuffer(this._byteLength+G$l,!0),G$w=new Float32Array(this._buffer,this._byteLength)),G$w.set(G$T,0),this._byteLength+=G$l,this._checkArrayUse()},G$w.appendU16Array=function(G$T,G$l){this._resizeBuffer(this._byteLength+2*G$l,!0);for(var G$w=new Uint16Array(this._buffer,this._byteLength,G$l),G$u=0;G$u<G$l;G$u++)G$w[G$u]=G$T[G$u];this._byteLength+=2*G$l,this._checkArrayUse()},G$w.appendEx=function(G$T,G$l){this._upload=!0;var G$w;G$w=G$T.byteLength,this._resizeBuffer(this._byteLength+G$w,!0),new G$l(this._buffer,this._byteLength).set(G$T,0),this._byteLength+=G$w,this._checkArrayUse()},G$w.appendEx2=function(G$T,G$l,G$w,G$u){void 0===G$u&&(G$u=1),this._upload=!0;var G$p,G$D;G$p=G$w*G$u,this._resizeBuffer(this._byteLength+G$p,!0),G$D=new G$l(this._buffer,this._byteLength);var G$P=0;for(G$P=0;G$P<G$w;G$P++)G$D[G$P]=G$T[G$P];this._byteLength+=G$p,this._checkArrayUse()},G$w.getBuffer=function(){return this._buffer},G$w.setNeedUpload=function(){this._upload=!0},G$w.getNeedUpload=function(){return this._upload},G$w.upload=function(){var G$T=this._bind_upload();return G$ZT._gl.bindBuffer(this._bufferType,null),G$ZT._bindActive[this._bufferType]=null,G$OT.activeShader=null,G$T},G$w.subUpload=function(G$T,G$l,G$w){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0);var G$u=this._bind_subUpload();return G$ZT._gl.bindBuffer(this._bufferType,null),G$ZT._bindActive[this._bufferType]=null,G$OT.activeShader=null,G$u},G$w.disposeResource=function(){G$T.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},G$w.clear=function(){this._byteLength=0,this._upload=!0},G$u(0,G$w,"bufferLength",function(){return this._buffer.byteLength}),G$u(0,G$w,"byteLength",null,function(G$T){this._byteLength!==G$T&&(G$T<=this._buffer.byteLength||this._resizeBuffer(2*G$T+256,!0),this._byteLength=G$T)}),G$l.__int__=function(G$T){G$ST.QuadrangleIB=G$ST.create(35044),G$AT.fillIBQuadrangle(G$ST.QuadrangleIB,16)},G$l.FLOAT32=4,G$l.SHORT=2,G$l}(G$ZT),G$VT=(function(G$l){function G$w(G$T){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,G$w.__super.call(this,9)}G$b(G$w,"laya.webgl.shader.d2.value.GlowSV",G$l);var G$T=G$w.prototype;G$T.setValue=function(G$T){G$l.prototype.setValue.call(this,G$T)},G$T.clear=function(){G$l.prototype.clear.call(this)}}(G$nT),function(G$T){function G$l(G$T){G$l.__super.call(this,64),this.defines.add(64)}G$b(G$l,"laya.webgl.shader.d2.value.TextSV",G$T);var G$w=G$l.prototype;return G$w.release=function(){(G$l.pool[G$l._length++]=this).clear()},G$w.clear=function(){G$T.prototype.clear.call(this)},G$l.create=function(){return G$l._length?G$l.pool[--G$l._length]:new G$l(null)},G$l.pool=[],G$l._length=0,G$l}(G$nT)),G$CT=function(G$T){function G$p(G$T,G$l,G$w,G$u){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,G$p.__super.call(this,G$T,G$l,G$w,G$u)}G$b(G$p,"laya.webgl.shader.d2.Shader2X",G$T);var G$l=G$p.prototype;return G$l.upload2dQuick1=function(G$T){this.upload(G$T,this._params2dQuick1||this._make2dQuick1())},G$l._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var G$T,G$l=this._params,G$w=0,G$u=G$l.length;G$w<G$u;G$w++)G$T=G$l[G$w],(G$L.isFlash||"size"!==G$T.name&&"position"!==G$T.name&&"texcoord"!==G$T.name)&&this._params2dQuick1.push(G$T)}return this._params2dQuick1},G$l.disposeResource=function(){G$T.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},G$l.upload2dQuick2=function(G$T){this.upload(G$T,this._params2dQuick2||this._make2dQuick2())},G$l._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var G$T,G$l=this._params,G$w=0,G$u=G$l.length;G$w<G$u;G$w++)G$T=G$l[G$w],(G$L.isFlash||"size"!==G$T.name)&&this._params2dQuick2.push(G$T)}return this._params2dQuick2},G$p.create=function(G$T,G$l,G$w,G$u){return new G$p(G$T,G$l,G$w,G$u)},G$p}(G$UT),G$ST=function(G$T){function G$l(G$T){this._uint8Array=null,this._uint16Array=null,void 0===G$T&&(G$T=35044),G$l.__super.call(this),this._bufferUsage=G$T,this._bufferType=34963,G$L.isFlash||(this._buffer=new ArrayBuffer(8))}G$b(G$l,"laya.webgl.utils.IndexBuffer2D",G$ET);var G$w=G$l.prototype;return G$w._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},G$w.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},G$w.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},G$w.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},G$l.QuadrangleIB=null,G$l.create=function(G$T){return void 0===G$T&&(G$T=35044),new G$l(G$T)},G$l}(),G$_T=function(G$T){function G$w(G$T,G$l){this._floatArray32=null,this._vertexStride=0,G$w.__super.call(this),this._vertexStride=G$T,this._bufferUsage=G$l,this._bufferType=34962,G$L.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}G$b(G$w,"laya.webgl.utils.VertexBuffer2D",G$T);var G$l=G$w.prototype;return G$l.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},G$l.bind=function(G$T){G$T&&G$T._bind(),this._bind()},G$l.insertData=function(G$T,G$l){this.getFloat32Array().set(G$T,G$l),this._upload=!0},G$l.bind_upload=function(G$T){G$T._bind_upload()||G$T._bind(),this._bind_upload()||this._bind()},G$l._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},G$l.disposeResource=function(){G$T.prototype.disposeResource.call(this)},G$l.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},G$u(0,G$l,"vertexStride",function(){return this._vertexStride}),G$w.create=function(G$T,G$l){return void 0===G$l&&(G$l=35048),new G$w(G$T,G$l)},G$w}(G$ET),G$Tl=function(G$T){function G$j(G$T,G$l,G$w,G$u,G$p,G$D){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===G$w&&(G$w=6408),void 0===G$u&&(G$u=!0),G$j.__super.call(this,G$T,G$l),G$T){if(this._format=G$w,this._mipmap=G$u,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof G$T)this._url=G$T,this._src=G$T,this._image=new G$K.window.Image,G$l&&(G$l.onload&&(this.onload=G$l.onload),G$l.onerror&&(this.onerror=G$l.onerror),G$l.onCreate&&G$l.onCreate(this)),this._image.crossOrigin=G$T&&0==G$T.indexOf("data:")?null:"",G$T&&(this._image.src=G$T);else if(G$T instanceof ArrayBuffer){this._src=G$l,this._url=this._src;var G$P=new G$J(G$T);G$P.readUTFBytes(4),G$P.readUTFBytes(2),G$P.getInt16();G$P.endian="bigEndian",this._w=G$P.getInt16(),this._h=G$P.getInt16();G$P.getInt16(),G$P.getInt16();this._image=new Uint8Array(G$T,G$P.pos),this._format=G$mT.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,G$k.enabled&&this._w<G$k.atlasLimitWidth&&this._h<G$k.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(G$T instanceof Uint8Array))return this._src=G$l,this._url=this._src,this._image=G$T.source||G$T,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=G$l,this._url=this._src,this._w=G$p,this._h=G$D,this._image=G$T,this._format=0===G$w?G$T.byteLength/(G$p*G$D)==4?6408:6407:G$w}this._$5__enableMerageInAtlas=!0}}G$b(G$j,"laya.webgl.resource.WebGLImage",G$t);var G$l=G$j.prototype;return G$a.imps(G$l,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),G$l._init_=function(G$T,G$l){},G$l._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var G$T=G$mT.mainContext,G$l=this._source=G$T.createTexture(),G$w=G$cT.curBindTexTarget,G$u=G$cT.curBindTexValue;G$cT.bindTexture(G$T,3553,G$l);var G$p=this.minFifter,G$D=this.magFifter,G$P=this.repeat?10497:33071,G$j=G$M.isPOT(this._w,this._h),G$J=!1;switch(G$j?(this.mipmap?-1!==G$p||(G$p=9987):-1!==G$p||(G$p=9729),-1!==G$D||(G$D=9729),G$T.texParameteri(3553,10241,G$p),G$T.texParameteri(3553,10240,G$D),G$T.texParameteri(3553,10242,G$P),G$T.texParameteri(3553,10243,G$P),this.mipmap&&G$T.generateMipmap(3553)):(-1!==G$p||(G$p=9729),-1!==G$D||(G$D=9729),G$T.texParameteri(3553,10241,G$p),G$T.texParameteri(3553,10240,G$D),G$T.texParameteri(3553,10242,33071),G$T.texParameteri(3553,10243,33071)),G$T.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&G$T.pixelStorei(G$T.UNPACK_ALIGNMENT,1),G$T.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&G$T.pixelStorei(G$T.UNPACK_ALIGNMENT,1),G$T.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:G$J=!0,G$T.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case G$mT.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:G$J=!0,G$T.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}G$T.pixelStorei(37441,!1),G$w&&G$u&&G$cT.bindTexture(G$T,G$w,G$u),this.uri||(this.uri=this._url),G$J?this.memorySize=this._image.length:G$j&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},G$l.recreateResource=function(){var G$T=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var G$l=this;this._image=new G$K.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(G$l._needReleaseAgain)return G$l._needReleaseAgain=!1,G$l._image.onload=null,void(G$l._image=null);G$l._allowMerageInAtlas&&G$l._enableMerageInAtlas?(G$T.memorySize=0,G$T._recreateLock=!1):G$l._createWebGlTexture(),G$l.completeCreate()},this._image.src=this._src}},G$l.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&G$mT.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},G$l.onresize=function(){this._w=this._image.width,this._h=this._image.height,G$k.enabled&&this._w<G$k.atlasLimitWidth&&this._h<G$k.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},G$l.clearAtlasSource=function(){this._image=null},G$u(0,G$l,"format",function(){return this._format}),G$u(0,G$l,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(G$T){this._$5__enableMerageInAtlas=G$T}),G$u(0,G$l,"mipmap",function(){return this._mipmap}),G$u(0,G$l,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),G$u(0,G$l,"atlasSource",function(){return this._image}),G$u(0,G$l,"onload",null,function(G$T){var G$l=this;this._onload=G$T,this._image&&(this._image.onload=null!=this._onload?function(){G$l.onresize(),G$l._onload()}:null)}),G$u(0,G$l,"onerror",null,function(G$T){var G$l=this;this._onerror=G$T,this._image&&(this._image.onerror=null!=this._onerror?function(){G$l._onerror()}:null)}),G$j}();G$a.__init([G$KT,G$X,G$BT,G$WT])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$T,G$l){"use strict";for(var G$w in Object.defineProperty(G$l,"__esModule",{value:!0}),Laya){var G$u=Laya[G$w];G$u&&G$u.__isclass&&(G$l[G$w]=G$u)}}),function(G$D,G$T,G$u){G$u.un,G$u.uns;var G$p=G$u.static,G$P=G$u.class,G$j=G$u.getset,G$J=(G$u.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),G$Y=laya.utils.ClassUtils,G$z=(laya.events.Event,laya.utils.HTMLChar),G$q=laya.net.Loader,G$M=(laya.display.Node,laya.maths.Rectangle),G$b=laya.renders.Render,G$K=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),G$t=laya.utils.Stat,G$O=laya.display.Text,G$A=laya.resource.Texture,G$L=laya.net.URL,G$i=laya.utils.Utils,G$W=function(){function G$K(){}return G$P(G$K,"laya.html.utils.HTMLParse"),G$K.parse=function(G$T,G$l,G$w){G$l=(G$l="<root>"+(G$l=G$l.replace(/<br>/g,"<br/>"))+"</root>").replace(G$K.spacePattern,G$K.char255);var G$u=G$i.parseXMLFromString(G$l);G$K._parseXML(G$T,G$u.childNodes[0].childNodes,G$w)},G$K._parseXML=function(G$T,G$l,G$w,G$u){var G$p=0,G$D=0;if(G$l.join||G$l.item)for(G$p=0,G$D=G$l.length;G$p<G$D;++G$p)G$K._parseXML(G$T,G$l[G$p],G$w,G$u);else{var G$P,G$j,G$J;if(3==G$l.nodeType)return void(G$T instanceof laya.html.dom.HTMLDivElement?(null==G$l.nodeName&&(G$l.nodeName="#text"),G$j=G$l.nodeName.toLowerCase(),0<(G$J=G$l.textContent.replace(/^\s+|\s+$/g,"")).length&&(G$P=G$Y.getInstance(G$j))&&(G$T.addChild(G$P),G$P.innerTEXT=G$J.replace(G$K.char255AndOneSpacePattern," "))):0<(G$J=G$l.textContent.replace(/^\s+|\s+$/g,"")).length&&(G$T.innerTEXT=G$J.replace(G$K.char255AndOneSpacePattern," ")));if("#comment"==(G$j=G$l.nodeName.toLowerCase()))return;if(G$P=G$Y.getInstance(G$j)){(G$P=G$T.addChild(G$P)).URI=G$w,G$P.href=G$u;var G$q=G$l.attributes;if(G$q&&0<G$q.length)for(G$p=0,G$D=G$q.length;G$p<G$D;++G$p){var G$M=G$q[G$p],G$z=G$M.nodeName,G$b=G$M.value;G$P._setAttributes(G$z,G$b)}G$K._parseXML(G$P,G$l.childNodes,G$w,G$P.href)}else G$K._parseXML(G$T,G$l.childNodes,G$w,G$u)}},G$K.char255=String.fromCharCode(255),G$K.spacePattern=/&nbsp;|&#160;/g,G$K.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),G$K}(),G$m=function(){function G$F(){}return G$P(G$F,"laya.html.utils.Layout"),G$F.later=function(G$T){null==G$F._will&&(G$F._will=[],G$u.stage.frameLoop(1,null,function(){if(!(G$F._will.length<1)){for(var G$T=0;G$T<G$F._will.length;G$T++)laya.html.utils.Layout.layout(G$F._will[G$T]);G$F._will.length=0}})),G$F._will.push(G$T)},G$F.layout=function(G$T){if(!G$T||!G$T._style)return null;if(0==(512&G$T._style._type))return null;G$T.getStyle()._type&=-513;var G$l=G$F._multiLineLayout(G$T);return G$b.isConchApp&&G$T.layaoutCallNative&&G$T.layaoutCallNative(),G$l},G$F._multiLineLayout=function(G$T){if(G$O.RightToLeft)return G$F._multiLineLayout2(G$T);var G$l=new Array;G$T._addChildsToLayout(G$l);var G$w,G$u,G$p,G$D,G$P,G$j=0,G$J=G$l.length,G$q=G$T._getCSSStyle(),G$M=G$q.letterSpacing,G$z=G$q.leading,G$b=G$q.lineHeight,G$K=G$q._widthAuto()||!G$q.wordWrap,G$Y=G$K?999999:G$T.width,G$t=(G$T.height,0),G$A=G$q.italic?G$q.fontSize/3:0,G$L=G$q._getAlign(),G$i=G$q._getValign(),G$W=0!==G$i||0!==G$L||0!=G$b,G$m=0,G$c=0,G$a=0,G$B=0,G$s=new Array,G$r=G$s[0]=new G$$,G$I=!1,G$Q=!1;G$r.h=0,G$q.italic&&(G$Y-=G$q.fontSize/3);var G$o=0,G$e=!0;function G$y(){G$r.y=G$c,G$c+=G$r.h+G$z,0==G$r.h&&(G$c+=G$b),G$r.mWidth=G$o,G$o=0,G$r=new G$$,G$s.push(G$r),G$r.h=0,G$I=!(G$e=!(G$m=0))}for(G$j=0;G$j<G$J;G$j++)if(null!=(G$w=G$l[G$j]))if(G$e=!1,G$w instanceof laya.html.dom.HTMLBrElement)G$y(),G$r.y=G$c;else{if(G$w._isChar()){if((G$D=G$w).isWord)G$I=G$Q||"\n"===G$D.char,G$r.wordStartIndex=G$r.elements.length;else{if(G$a=G$D.width+G$D.style.letterSpacin,0<G$s.length&&G$Y<G$m+G$a&&0<G$r.wordStartIndex){var G$v;G$v=G$r.elements.length-G$r.wordStartIndex+1,G$r.elements.length=G$r.wordStartIndex,G$j-=G$v,G$y();continue}G$I=!1,G$o+=G$D.width}G$a=G$D.width+G$M,G$B=G$D.height,G$Q=!1,(G$I=G$I||G$Y<G$m+G$a)&&G$y(),G$r.minTextHeight=Math.min(G$r.minTextHeight,G$w.height)}else G$u=G$w._getCSSStyle(),G$P=G$w,G$p=G$u.padding,0===G$u._getCssFloat()||(G$W=!0),G$I=G$Q||G$u.lineElement,G$a=G$P.width*G$P._style._tf.scaleX+G$p[1]+G$p[3]+G$M,G$B=G$P.height*G$P._style._tf.scaleY+G$p[0]+G$p[2],G$Q=G$u.lineElement,(G$I=G$I||G$Y<G$m+G$a&&G$u.wordWrap)&&G$y();G$r.elements.push(G$w),G$r.h=Math.max(G$r.h,G$B),G$w.x=G$m,G$w.y=G$c,G$m+=G$a,G$r.w=G$m-G$M,G$r.y=G$c,G$t=Math.max(G$m+G$A,G$t)}else G$e||(G$m+=G$F.DIV_ELEMENT_PADDING),G$r.wordStartIndex=G$r.elements.length;if(G$c=G$r.y+G$r.h,G$W){var G$x=0,G$R=G$Y;for(G$K&&0<G$T.width&&(G$R=G$T.width),G$j=0,G$J=G$s.length;G$j<G$J;G$j++)G$s[G$j].updatePos(0,G$R,G$j,G$x,G$L,G$i,G$b),G$x+=Math.max(G$b,G$s[G$j].h+G$z);G$c=G$x}return G$K&&(G$T.width=G$t),G$c>G$T.height&&(G$T.height=G$c),[G$t,G$c]},G$F._multiLineLayout2=function(G$T){var G$l=new Array;G$T._addChildsToLayout(G$l);var G$w,G$u,G$p,G$D,G$P,G$j=0,G$J=G$l.length,G$q=G$T._getCSSStyle(),G$M=G$q.letterSpacing,G$z=G$q.leading,G$b=G$q.lineHeight,G$K=G$q._widthAuto()||!G$q.wordWrap,G$Y=G$K?999999:G$T.width,G$t=(G$T.height,0),G$A=G$q.italic?G$q.fontSize/3:0,G$L=2-G$q._getAlign(),G$i=G$q._getValign(),G$W=0!==G$i||0!=G$L||0!=G$b,G$m=0,G$c=0,G$a=0,G$B=0,G$s=new Array,G$r=G$s[0]=new G$$,G$I=!1,G$Q=!1;G$r.h=0,G$q.italic&&(G$Y-=G$q.fontSize/3);var G$o=0,G$e=!0;function G$y(){G$r.y=G$c,G$c+=G$r.h+G$z,0==G$r.h&&(G$c+=G$b),G$r.mWidth=G$o,G$o=0,G$r=new G$$,G$s.push(G$r),G$r.h=0,G$I=!(G$e=!(G$m=0))}for(G$j=0;G$j<G$J;G$j++)if(null!=(G$w=G$l[G$j]))if(G$e=!1,G$w instanceof laya.html.dom.HTMLBrElement)G$y(),G$r.y=G$c;else{if(G$w._isChar()){if((G$D=G$w).isWord)G$I=G$Q||"\n"===G$D.char,G$r.wordStartIndex=G$r.elements.length;else{if(0<G$s.length&&G$Y<G$m+G$a&&0<G$r.wordStartIndex){var G$v;G$v=G$r.elements.length-G$r.wordStartIndex+1,G$r.elements.length=G$r.wordStartIndex,G$j-=G$v,G$y();continue}G$I=!1,G$o+=G$D.width}G$a=G$D.width+G$M,G$B=G$D.height,G$Q=!1,(G$I=G$I||G$Y<G$m+G$a)&&G$y(),G$r.minTextHeight=Math.min(G$r.minTextHeight,G$w.height)}else G$u=G$w._getCSSStyle(),G$P=G$w,G$p=G$u.padding,0===G$u._getCssFloat()||(G$W=!0),G$I=G$Q||G$u.lineElement,G$a=G$P.width*G$P._style._tf.scaleX+G$p[1]+G$p[3]+G$M,G$B=G$P.height*G$P._style._tf.scaleY+G$p[0]+G$p[2],G$Q=G$u.lineElement,(G$I=G$I||G$Y<G$m+G$a&&G$u.wordWrap)&&G$y();G$r.elements.push(G$w),G$r.h=Math.max(G$r.h,G$B),G$w.x=G$m,G$w.y=G$c,G$m+=G$a,G$r.w=G$m-G$M,G$r.y=G$c,G$t=Math.max(G$m+G$A,G$t)}else G$e||(G$m+=G$F.DIV_ELEMENT_PADDING),G$r.wordStartIndex=G$r.elements.length;if(G$c=G$r.y+G$r.h,G$W){var G$x=0,G$R=G$Y;for(G$j=0,G$J=G$s.length;G$j<G$J;G$j++)G$s[G$j].updatePos(0,G$R,G$j,G$x,G$L,G$i,G$b),G$x+=Math.max(G$b,G$s[G$j].h+G$z);G$c=G$x}for(G$K&&(G$T.width=G$t),G$c>G$T.height&&(G$T.height=G$c),G$j=0,G$J=G$s.length;G$j<G$J;G$j++)G$s[G$j].revertOrder(G$Y);return[G$t,G$c]},G$F._will=null,G$F.DIV_ELEMENT_PADDING=0,G$F}(),G$$=function(){function G$T(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}G$P(G$T,"laya.html.utils.LayoutLine");var G$l=G$T.prototype;return G$l.updatePos=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){var G$j,G$J=0;0<this.elements.length&&(G$J=(G$j=this.elements[this.elements.length-1]).x+G$j.width-this.elements[0].x);var G$q=0,G$M=NaN;1===G$p&&(G$q=(G$l-G$J)/2),2===G$p&&(G$q=G$l-G$J),0===G$P||0!=G$D||(G$D=1);for(var G$z=0,G$b=this.elements.length;G$z<G$b;G$z++){var G$K=(G$j=this.elements[G$z])._getCSSStyle();switch(0!==G$q&&(G$j.x+=G$q),G$K._getValign()){case 0:G$j.y=G$u;break;case 1:var G$Y=0;99999!=this.minTextHeight&&(G$Y=this.minTextHeight);var G$t=(G$Y+G$P)/2;G$t=Math.max(G$t,this.h),G$M=(laya.html.dom.HTMLImageElement,G$u+G$t-G$j.height),G$j.y=G$M;break;case 2:G$j.y=G$u+(G$P-G$j.height)}}},G$l.revertOrder=function(G$T){var G$l;if(0<this.elements.length){var G$w,G$u=0;for(G$w=this.elements.length,G$u=0;G$u<G$w;G$u++)(G$l=this.elements[G$u]).x=G$T-G$l.x-G$l.width}},G$T}(),G$c=function(G$w){function G$l(){this.URI=null,this._href=null,G$l.__super.call(this),this._text=G$l._EMPTYTEXT,this.setStyle(new G$J(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}G$P(G$l,"laya.html.dom.HTMLElement",G$w);var G$T=G$l.prototype;return G$T.layaoutCallNative=function(){var G$T=0;if(this._childs&&0<(G$T=this._childs.length))for(var G$l=0;G$l<G$T;G$l++)this._childs[G$l].layaoutCallNative&&this._childs[G$l].layaoutCallNative();var G$w=this._getWords();G$w?laya.html.dom.HTMLElement.fillWords(this,G$w,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},G$T.appendChild=function(G$T){return this.addChild(G$T)},G$T._getWords2=function(){var G$T=this._text.text;if(!G$T||0===G$T.length)return null;var G$l,G$w,G$u=0,G$p=0;if(this._text.drawWords)G$w=this._text.drawWords;else{for(G$p=(G$l=G$T.split(" ")).length-1,G$w=[],G$u=0;G$u<G$p;G$u++)G$w.push(G$l[G$u]," ");0<=G$p&&G$w.push(G$l[G$p]),this._text.drawWords=G$w}var G$D,G$P=this._text.words;if(G$P&&G$P.length===G$w.length)return G$P;null===G$P&&(this._text.words=G$P=[]),G$P.length=G$w.length;var G$j=this.style,G$J=G$j.font;for(G$u=0,G$p=G$w.length;G$u<G$p;G$u++){G$D=G$i.measureText(G$w[G$u],G$J);var G$q=G$P[G$u]=new G$z(G$w[G$u],G$D.width,G$D.height||G$j.fontSize,G$j);if(1<G$q.char.length&&(G$q.charNum=G$q.char),this.href){var G$M=new G$K;this.addChild(G$M),G$q.setSprite(G$M)}}return G$P},G$T._getWords=function(){if(!G$O.CharacterCache)return this._getWords2();var G$T=this._text.text;if(!G$T||0===G$T.length)return null;var G$l,G$w=this._text.words;if(G$w&&G$w.length===G$T.length)return G$w;null===G$w&&(this._text.words=G$w=[]),G$w.length=G$T.length;for(var G$u=this.style,G$p=G$u.font,G$D=0,G$P=G$T.length;G$D<G$P;G$D++)if(G$l=G$i.measureText(G$T.charAt(G$D),G$p)){var G$j=G$w[G$D]=new G$z(G$T.charAt(G$D),G$l.width,G$l.height||G$u.fontSize,G$u);if(this.href){var G$J=new G$K;this.addChild(G$J),G$j.setSprite(G$J)}}else console.warn("_getWords size is null"+G$T.charAt(G$D),G$p);return G$w},G$T.showLinkSprite=function(){var G$T=this._text.words;if(G$T)for(var G$l,G$w,G$u=[],G$p=0;G$p<G$T.length;G$p++)G$w=G$T[G$p],(G$l=new G$K).graphics.drawRect(0,0,G$w.width,G$w.height,"#ff0000"),G$l.width=G$w.width,G$l.height=G$w.height,this.addChild(G$l),G$u.push(G$l)},G$T._layoutLater=function(){var G$T=this.style;512&G$T._type||(G$T.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&G$T.block?(G$m.later(this),G$T._type|=512):this.parent&&this.parent._layoutLater())},G$T._setAttributes=function(G$T,G$l){switch(G$T){case"style":return void this.style.cssText(G$l);case"class":return void(this.className=G$l)}G$w.prototype._setAttributes.call(this,G$T,G$l)},G$T.updateHref=function(){if(null!=this._href){var G$T=this._getWords();if(G$T)for(var G$l,G$w,G$u=0;G$u<G$T.length;G$u++)(G$w=(G$l=G$T[G$u]).getSprite())&&(G$w.size(G$l.width,G$l.height),G$w.on("click",this,this.onLinkHandler))}},G$T.onLinkHandler=function(G$T){switch(G$T.type){case"click":for(var G$l=this;G$l;)G$l.event("link",[this.href]),G$l=G$l.parent}},G$T.formatURL=function(G$T){return this.URI?G$L.formatURL(G$T,this.URI?this.URI.path:null):G$T},G$j(0,G$T,"href",function(){return this._href},function(G$T){null!=(this._href=G$T)&&(this._getCSSStyle().underLine=1,this.updateHref())}),G$j(0,G$T,"color",null,function(G$T){this.style.color=G$T}),G$j(0,G$T,"onClick",null,function(G$T){G$u._runScript("fn=function(event){"+G$T+";}"),this.on("click",this,void 0)}),G$j(0,G$T,"id",null,function(G$T){G$a.document.setElementById(G$T,this)}),G$j(0,G$T,"innerTEXT",function(){return this._text.text},function(G$T){this.text=G$T}),G$j(0,G$T,"style",function(){return this._style}),G$j(0,G$T,"text",function(){return this._text.text},function(G$T){this._text==G$l._EMPTYTEXT?this._text={text:G$T,words:null}:(this._text.text=G$T,this._text.words&&(this._text.words.length=0)),G$b.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),G$j(0,G$T,"parent",G$w.prototype._$get_parent,function(G$T){if(G$T instanceof laya.html.dom.HTMLElement){var G$l=G$T;this.URI||(this.URI=G$l.URI),this.style.inherit(G$l.style)}G$u.superSet(G$K,this,"parent",G$T)}),G$j(0,G$T,"className",null,function(G$T){this.style.attrs(G$a.document.styleSheets["."+G$T])}),G$l.fillWords=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){G$T.graphics.clear();for(var G$j=0,G$J=G$l.length;G$j<G$J;G$j++){var G$q=G$l[G$j];G$T.graphics.fillText(G$q.char,G$q.x+G$w,G$q.y+G$u,G$p,G$D,"left",G$P)}},G$l._EMPTYTEXT={text:null,words:null},G$l}(G$K),G$l=(function(G$T){function G$l(){G$l.__super.call(this),this.style.lineElement=!0,this.style.block=!0}G$P(G$l,"laya.html.dom.HTMLBrElement",G$c)}(),function(G$T){function G$l(){this.contextHeight=NaN,this.contextWidth=NaN,G$l.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}G$P(G$l,"laya.html.dom.HTMLDivElement",G$T);var G$w=G$l.prototype;return G$w.appendHTML=function(G$T){G$W.parse(this,G$T,this.URI),this.layout()},G$w._addChildsToLayout=function(G$l){var G$T=this._getWords();if(null==G$T&&0==this._childs.length)return!1;G$T&&G$T.forEach(function(G$T){G$l.push(G$T)});for(var G$w=!0,G$u=0,G$p=this._childs.length;G$u<G$p;G$u++){var G$D=this._childs[G$u];G$w?G$w=!1:G$l.push(null),G$D._addToLayout(G$l)}return!0},G$w._addToLayout=function(G$T){this.layout()},G$w.layout=function(){if(this.style){this.style._type|=512;var G$T=G$m.layout(this);if(G$T){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new G$M);var G$l=this._$P.mHtmlBounds;G$l.x=G$l.y=0,G$l.width=this.contextWidth=G$T[0],G$l.height=this.contextHeight=G$T[1],this.setBounds(G$l)}}},G$j(0,G$w,"height",function(){return this._height?this._height:this.contextHeight},G$T.prototype._$set_height),G$j(0,G$w,"innerHTML",null,function(G$T){this.destroyChildren(),this.appendHTML(G$T)}),G$j(0,G$w,"width",function(){return this._width?this._width:this.contextWidth},function(G$T){var G$l=!1;G$l=0===G$T?G$T!=this._width:G$T!=this.width,G$u.superSet(G$c,this,"width",G$T),G$l&&this.layout()}),G$l}(G$c)),G$a=function(G$T){function G$l(){this.all=new Array,this.styleSheets=G$J.styleSheets,G$l.__super.call(this)}G$P(G$l,"laya.html.dom.HTMLDocument",G$c);var G$w=G$l.prototype;return G$w.getElementById=function(G$T){return this.all[G$T]},G$w.setElementById=function(G$T,G$l){this.all[G$T]=G$l},G$p(G$l,["document",function(){return this.document=new G$l}]),G$l}();(function(G$T){function G$l(){this._tex=null,this._url=null,this._renderArgs=[],G$l.__super.call(this),this.style.block=!0}G$P(G$l,"laya.html.dom.HTMLImageElement",G$c);var G$w=G$l.prototype;G$w._addToLayout=function(G$T){!this._style.absolute&&G$T.push(this)},G$w.render=function(G$T,G$l,G$w){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(G$t.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,G$T.ctx.drawTexture2(G$l,G$w,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},G$w.layaoutCallNative=function(){var G$T=0;if(this._childs&&0<(G$T=this._childs.length))for(var G$l=0;G$l<G$T;G$l++)this._childs[G$l].layaoutCallNative&&this._childs[G$l].layaoutCallNative()},G$j(0,G$w,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(G$T){this._width!==G$T&&(this._width=G$T,this._style.width=G$T,this.repaint())}),G$j(0,G$w,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(G$T){this._height!==G$T&&(this._height=G$T,this._style.height=G$T,this.repaint())}),G$w.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),G$q.clearCache(this,this._url),this._tex=null),G$c.prototype.destroy.call(this)},G$w.onloaded=function(){var G$T=this._style;G$T&&!G$T.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),G$T&&!G$T.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),G$b.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},G$w._loadImageComplete=function(G$T,G$l,G$w){if(!this._destroyed)if(null!=G$w)if(G$w instanceof ArrayBuffer){var G$u=new DataView(G$w);new laya.webgl.resource.WebGLImage(new Uint8Array(G$w,8),G$T,0,!1,G$u.getUint32(0),G$u.getUint32(4));this.onloaded()}else if(G$w instanceof G$A)G$q.imgMgrSet[G$T]=G$l,G$D.imgMgrLock(G$T,G$q.imgMgrSet[G$T]),this._url=G$T,this._tex=G$w,G$q.keepCache(this,G$T),G$q.cacheRes(G$T,this._tex),this.onloaded();else{var G$p=-1!=G$T.indexOf(".png",G$T.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(G$w,G$T,G$p,!1,G$w.width,G$w.height);this.onloaded()}else this.event("error","Load image failed")},G$j(0,G$w,"src",null,function(G$T){(G$T=this.formatURL(G$T),this._url!=G$T)&&(null!=this._tex&&(G$q.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=G$T,(this._tex=G$q.getRes(G$T))?(G$q.keepCache(this,G$T),this.onloaded()):G$D.imgMgrLoad(G$T,this._loadImageComplete.bind(this),2,!1))})})(),function(G$T){function G$l(){this.type=null,G$l.__super.call(this),this.visible=!1}G$P(G$l,"laya.html.dom.HTMLLinkElement",G$T);var G$w=G$l.prototype;G$w._onload=function(G$T){switch(this.type){case"text/css":G$J.parseCSS(G$T,this.URI)}},G$j(0,G$w,"href",G$T.prototype._$get_href,function(G$T){var G$l=this;G$T=this.formatURL(G$T),this.URI=new G$L(G$T);var G$w=new G$q;G$w.once("complete",null,function(G$T){G$l._onload(G$T)}),G$w.load(G$T,"text")}),G$l._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(G$c),function(G$T){function G$l(){G$l.__super.call(this),this.visible=!1}G$P(G$l,"laya.html.dom.HTMLStyleElement",G$T),G$j(0,G$l.prototype,"text",G$T.prototype._$get_text,function(G$T){G$J.parseCSS(G$T,null)})}(G$c),function(G$T){function G$l(){G$l.__super.call(this),this._getCSSStyle().valign="middle"}G$P(G$l,"laya.html.dom.HTMLIframeElement",G$T),G$j(0,G$l.prototype,"href",G$T.prototype._$get_href,function(G$w){var G$u=this;G$w=this.formatURL(G$w);var G$T=new G$q;G$T.once("complete",null,function(G$T){var G$l=G$u.URI;G$u.URI=new G$L(G$w),G$u.innerHTML=G$T,!G$l||(G$u.URI=G$l)}),G$T.load(G$w,"text")})}(G$l)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$T,G$l){"use strict";for(var G$w in Object.defineProperty(G$l,"__esModule",{value:!0}),Laya){var G$u=Laya[G$w];G$u&&G$u.__isclass&&(G$l[G$w]=G$u)}}),function(G$p,G$T,G$t){G$t.un,G$t.uns;var G$u=G$t.static,G$D=G$t.class,G$P=G$t.getset,G$w=(G$t.__newvec,laya.display.Animation),G$A=(laya.utils.Browser,laya.utils.ClassUtils),G$j=laya.filters.ColorFilter,G$J=laya.utils.Ease,G$q=laya.events.Event,G$M=(laya.events.EventDispatcher,laya.display.css.Font),G$z=laya.display.FrameAnimation,G$l=laya.display.Graphics,G$b=laya.utils.Handler,G$K=laya.display.Input,G$i=laya.net.Loader,G$Y=(laya.display.Node,laya.maths.Point),G$L=laya.maths.Rectangle,G$W=laya.renders.Render,G$m=laya.display.Sprite,G$c=laya.display.Text,G$a=laya.resource.Texture,G$B=laya.utils.Tween,G$s=laya.utils.Utils,G$r=laya.utils.WeakObject;G$t.interface("laya.ui.IItem"),G$t.interface("laya.ui.ISelect"),G$t.interface("laya.ui.IRender"),G$t.interface("laya.ui.IComponent"),G$t.interface("laya.ui.IBox","IComponent");var G$I=function(){function G$T(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return G$D(G$T,"laya.ui.LayoutStyle"),G$u(G$T,["EMPTY",function(){return this.EMPTY=new G$T}]),G$T}(),G$Q=function(){function G$T(){}return G$D(G$T,"laya.ui.Styles"),G$T.labelColor="#000000",G$T.buttonStateNum=3,G$T.scrollBarMinNum=15,G$T.scrollBarDelayTime=500,G$u(G$T,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),G$T}(),G$o=function(){function G$p(){}return G$D(G$p,"laya.ui.UIUtils"),G$p.fillArray=function(G$T,G$l,G$w){var G$u=G$T.concat();if(G$l)for(var G$p=G$l.split(","),G$D=0,G$P=Math.min(G$u.length,G$p.length);G$D<G$P;G$D++){var G$j=G$p[G$D];G$u[G$D]="true"==G$j||"false"!=G$j&&G$j,null!=G$w&&(G$u[G$D]=G$w(G$j))}return G$u},G$p.toColor=function(G$T){return G$s.toHexColor(G$T)},G$p.gray=function(G$T,G$l){void 0===G$l&&(G$l=!0),G$l?G$p.addFilter(G$T,G$p.grayFilter):G$p.clearFilter(G$T,G$j)},G$p.addFilter=function(G$T,G$l){var G$w=G$T.filters||[];G$w.push(G$l),G$T.filters=G$w},G$p.clearFilter=function(G$T,G$l){var G$w=G$T.filters;if(null!=G$w&&0<G$w.length){for(var G$u=G$w.length-1;-1<G$u;G$u--){var G$p=G$w[G$u];G$t.__typeof(G$p,G$l)&&G$w.splice(G$u,1)}G$T.filters=G$w}},G$p._getReplaceStr=function(G$T){return G$p.escapeSequence[G$T]},G$p.adptString=function(G$T){return G$T.replace(/\\(\w)/g,G$p._getReplaceStr)},G$p.getBindFun=function(G$T){var G$l=G$p._funMap.get(G$T);if(null==G$l){var G$w='"'+G$T+'"',G$u="(function(data){if(data==null)return;with(data){try{\nreturn "+(G$w=G$w.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";G$l=G$t._runScript(G$u),G$p._funMap.set(G$T,G$l)}return G$l},G$u(G$p,["grayFilter",function(){return this.grayFilter=new G$j([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new G$r}]),G$p}(),G$e=function(){function G$T(){}return G$D(G$T,"UIConfig"),G$T.touchScrollEnable=!0,G$T.mouseWheelEnable=!0,G$T.showButtons=!0,G$T.popupBgColor="#000000",G$T.popupBgAlpha=.5,G$T.closeDialogOnSide=!0,G$T}(),G$y=function(G$w){function G$L(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,G$L.__super.call(this),this._weakKeys=[]}G$D(G$L,"laya.ui.AutoBitmap",G$w);var G$T=G$L.prototype;return G$T.destroy=function(){if(G$i.clearObject(this,this._weakKey),this._weakKeys){for(var G$T=0,G$l=this._weakKeys.length;G$T<G$l;++G$T)G$i.clearObject(this,this._weakKeys[G$T]);this._weakKeys=null}G$w.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},G$T._setChanged=function(){this._isChanged||(this._isChanged=!0,G$t.timer.callLater(this,this.changeSource))},G$T.changeSource=function(){this._isChanged=!1;var G$T=this._source;if(G$T&&G$T.bitmap){var G$l=this.width,G$w=this.height,G$u=this._sizeGrid,G$p=G$T.sourceWidth,G$D=G$T.sourceHeight;if(!G$u||G$p===G$l&&G$D===G$w)this.cleanByTexture(G$T,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,G$l,G$w);else{G$i.clearObject(this,this._weakKey),G$T.$_GID||(G$T.$_GID=G$s.getGID());var G$P=G$T.$_GID+"."+G$l+"."+G$w+"."+G$u.join("."),G$j=G$i.findObject(G$P);if(G$s.isOKCmdList(G$j))return this._weakKey=G$P,G$i.keepObject(this,this._weakKey),void(this.cmds=G$j);this.clear();var G$J,G$q,G$M=G$u[0],G$z=G$u[1],G$b=G$u[2],G$K=G$u[3],G$Y=G$u[4],G$t=!1;if(G$l==G$p&&(G$K=G$z=0),G$w==G$D&&(G$M=G$b=0),G$l<G$K+G$z){var G$A=G$l;G$t=!0,G$l=G$K+G$z,this.save(),this.clipRect(0,0,G$A,G$w)}G$K&&G$M&&(G$J=G$L.getTexture(G$T,0,0,G$K,G$M),G$q=this._weakKeys[0],G$J?(G$q!=G$J.weakKey&&(G$i.clearObject(this,G$q),G$i.keepObject(this,G$J.weakKey),this._weakKeys[0]=G$J.weakKey),this.drawTexture(G$J,0,0,G$K,G$M)):(G$i.clearObject(this,G$q),this._weakKeys[0]="")),G$z&&G$M&&(G$J=G$L.getTexture(G$T,G$p-G$z,0,G$z,G$M),G$q=this._weakKeys[1],G$J?(G$q!=G$J.weakKey&&(G$i.clearObject(this,G$q),G$i.keepObject(this,G$J.weakKey),this._weakKeys[1]=G$J.weakKey),this.drawTexture(G$J,G$l-G$z,0,G$z,G$M)):(G$i.clearObject(this,G$q),this._weakKeys[1]="")),G$K&&G$b&&(G$J=G$L.getTexture(G$T,0,G$D-G$b,G$K,G$b),G$q=this._weakKeys[2],G$J?(G$q!=G$J.weakKey&&(G$i.clearObject(this,G$q),G$i.keepObject(this,G$J.weakKey),this._weakKeys[2]=G$J.weakKey),this.drawTexture(G$J,0,G$w-G$b,G$K,G$b)):(G$i.clearObject(this,G$q),this._weakKeys[2]="")),G$z&&G$b&&(G$J=G$L.getTexture(G$T,G$p-G$z,G$D-G$b,G$z,G$b),G$q=this._weakKeys[3],G$J?(G$q!=G$J.weakKey&&(G$i.clearObject(this,G$q),G$i.keepObject(this,G$J.weakKey),this._weakKeys[3]=G$J.weakKey),this.drawTexture(G$J,G$l-G$z,G$w-G$b,G$z,G$b)):(G$i.clearObject(this,G$q),this._weakKeys[3]="")),G$M&&(G$J=G$L.getTexture(G$T,G$K,0,G$p-G$K-G$z,G$M),G$q=this._weakKeys[4],G$J?(G$q!=G$J.weakKey&&(G$i.clearObject(this,G$q),G$i.keepObject(this,G$J.weakKey),this._weakKeys[4]=G$J.weakKey),this.drawBitmap(G$Y,G$J,G$K,0,G$l-G$K-G$z,G$M)):(G$i.clearObject(this,G$q),this._weakKeys[4]="")),G$b&&(G$J=G$L.getTexture(G$T,G$K,G$D-G$b,G$p-G$K-G$z,G$b),G$q=this._weakKeys[5],G$J?(G$q!=G$J.weakKey&&(G$i.clearObject(this,G$q),G$i.keepObject(this,G$J.weakKey),this._weakKeys[5]=G$J.weakKey),this.drawBitmap(G$Y,G$J,G$K,G$w-G$b,G$l-G$K-G$z,G$b)):(G$i.clearObject(this,G$q),this._weakKeys[5]="")),G$K&&(G$J=G$L.getTexture(G$T,0,G$M,G$K,G$D-G$M-G$b),G$q=this._weakKeys[6],G$J?(G$q!=G$J.weakKey&&(G$i.clearObject(this,G$q),G$i.keepObject(this,G$J.weakKey),this._weakKeys[6]=G$J.weakKey),this.drawBitmap(G$Y,G$J,0,G$M,G$K,G$w-G$M-G$b)):(G$i.clearObject(this,G$q),this._weakKeys[6]="")),G$z&&(G$J=G$L.getTexture(G$T,G$p-G$z,G$M,G$z,G$D-G$M-G$b),G$q=this._weakKeys[7],G$J?(G$q!=G$J.weakKey&&(G$i.clearObject(this,G$q),G$i.keepObject(this,G$J.weakKey),this._weakKeys[7]=G$J.weakKey),this.drawBitmap(G$Y,G$J,G$l-G$z,G$M,G$z,G$w-G$M-G$b)):(G$i.clearObject(this,G$q),this._weakKeys[7]="")),G$J=G$L.getTexture(G$T,G$K,G$M,G$p-G$K-G$z,G$D-G$M-G$b),G$q=this._weakKeys[8],G$J?(G$q!=G$J.weakKey&&(G$i.clearObject(this,G$q),G$i.keepObject(this,G$J.weakKey),this._weakKeys[8]=G$J.weakKey),this.drawBitmap(G$Y,G$J,G$K,G$M,G$l-G$K-G$z,G$w-G$M-G$b)):(G$i.clearObject(this,G$q),this._weakKeys[8]=""),G$t&&this.restore(),this.autoCacheCmd&&!G$W.isConchApp&&(G$i.saveObject(G$P,this.cmds,null),this._weakKey=G$P,G$i.keepObject(this,this._weakKey))}this._repaint()}},G$T.drawBitmap=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$p&&(G$p=0),void 0===G$D&&(G$D=0),G$p<.1||G$D<.1||(!G$T||G$l.width==G$p&&G$l.height==G$D?this.drawTexture(G$l,G$w,G$u,G$p,G$D):this.fillTexture(G$l,G$w,G$u,G$p,G$D))},G$T.clear=function(G$T){void 0===G$T&&(G$T=!0),G$w.prototype.clear.call(this,!1)},G$P(0,G$T,"sizeGrid",function(){return this._sizeGrid},function(G$T){this._sizeGrid=G$T,this._setChanged()}),G$P(0,G$T,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(G$T){this._width!=G$T&&(this._width=G$T,this._setChanged())}),G$P(0,G$T,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(G$T){this._height!=G$T&&(this._height=G$T,this._setChanged())}),G$P(0,G$T,"source",function(){return this._source},function(G$T){G$T?(this._source=G$T,this._setChanged()):(this._source=null,this.clear())}),G$L.getTexture=function(G$T,G$l,G$w,G$u,G$p){G$u<=0&&(G$u=1),G$p<=0&&(G$p=1),G$T.$_GID||(G$T.$_GID=G$s.getGID());var G$D=G$T.$_GID+"."+G$l+"."+G$w+"."+G$u+"."+G$p,G$P=G$i.findObject(G$D);if((!G$P||!G$P.source)&&(G$P=G$a.createFromTexture(G$T,G$l,G$w,G$u,G$p))){if(G$T.alphaTexture){var G$j=G$T.width/G$T.alphaTexture.width;G$P.alphaTexture=G$a.createFromTexture(G$T.alphaTexture,G$l/G$j,G$w/G$j,G$u/G$j,G$p/G$j)}G$i.saveObject(G$D,G$P),G$P.weakKey=G$D}return G$P},G$L}(G$l),G$v=(function(G$T){function G$l(){G$l.__super.call(this)}G$D(G$l,"laya.ui.UIEvent",G$q),G$l.SHOW_TIP="showtip",G$l.HIDE_TIP="hidetip"}(),function(G$l){function G$T(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,G$T.__super.call(this),this._layout=G$I.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}G$D(G$T,"laya.ui.Component",G$l);var G$w=G$T.prototype;return G$t.imps(G$w,{"laya.ui.IComponent":!0}),G$w.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},G$w.preinitialize=function(){},G$w.createChildren=function(){},G$w.initialize=function(){},G$w.callLater=function(G$T,G$l){G$t.timer.callLater(this,G$T,G$l)},G$w.runCallLater=function(G$T){G$t.timer.runCallLater(this,G$T)},G$w.commitMeasure=function(){},G$w.changeSize=function(){this.event("resize")},G$w.getLayout=function(){return this._layout===G$I.EMPTY&&(this._layout=new G$I),this._layout},G$w._setLayoutEnabled=function(G$T){this._layout&&this._layout.enable!=G$T&&(this._layout.enable=G$T,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},G$w.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},G$w.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},G$w.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},G$w.resetLayoutX=function(){var G$T=this._layout;if(isNaN(G$T.anchorX)||(this.pivotX=G$T.anchorX*this.width),this.layoutEnabled){var G$l=this.parent;G$l&&(isNaN(G$T.centerX)?isNaN(G$T.left)?isNaN(G$T.right)||(this.x=Math.round(G$l.width-this.displayWidth-G$T.right+this.pivotX*this.scaleX)):(this.x=Math.round(G$T.left+this.pivotX*this.scaleX),isNaN(G$T.right)||(this.width=(G$l._width-G$T.left-G$T.right)/(this.scaleX||.01))):this.x=Math.round(.5*(G$l.width-this.displayWidth)+G$T.centerX+this.pivotX*this.scaleX))}},G$w.resetLayoutY=function(){var G$T=this._layout;if(isNaN(G$T.anchorY)||(this.pivotY=G$T.anchorY*this.height),this.layoutEnabled){var G$l=this.parent;G$l&&(isNaN(G$T.centerY)?isNaN(G$T.top)?isNaN(G$T.bottom)||(this.y=Math.round(G$l.height-this.displayHeight-G$T.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(G$T.top+this.pivotY*this.scaleY),isNaN(G$T.bottom)||(this.height=(G$l._height-G$T.top-G$T.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(G$l.height-this.displayHeight)+G$T.centerY+this.pivotY*this.scaleY))}},G$w.onMouseOver=function(G$T){G$t.stage.event("showtip",this._toolTip)},G$w.onMouseOut=function(G$T){G$t.stage.event("hidetip",this._toolTip)},G$P(0,G$w,"displayWidth",function(){return this.width*this.scaleX}),G$P(0,G$w,"width",function(){return this._width?this._width:this.measureWidth},function(G$T){this._width!=G$T&&(this._width=G$T,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),G$P(0,G$w,"measureWidth",function(){var G$T=0;this.commitMeasure();for(var G$l=this.numChildren-1;-1<G$l;G$l--){var G$w=this.getChildAt(G$l);G$w.visible&&(G$T=Math.max(G$w.x+G$w.width*G$w.scaleX,G$T))}return G$T}),G$P(0,G$w,"displayHeight",function(){return this.height*this.scaleY}),G$P(0,G$w,"height",function(){return this._height?this._height:this.measureHeight},function(G$T){this._height!=G$T&&(this._height=G$T,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),G$P(0,G$w,"dataSource",function(){return this._dataSource},function(G$T){for(var G$l in this._dataSource=G$T,this._dataSource)this.hasOwnProperty(G$l)&&"function"!=typeof this[G$l]&&(this[G$l]=this._dataSource[G$l])}),G$P(0,G$w,"scaleY",G$l.prototype._$get_scaleY,function(G$T){G$t.superGet(G$m,this,"scaleY")!=G$T&&(G$t.superSet(G$m,this,"scaleY",G$T),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),G$P(0,G$w,"measureHeight",function(){var G$T=0;this.commitMeasure();for(var G$l=this.numChildren-1;-1<G$l;G$l--){var G$w=this.getChildAt(G$l);G$w.visible&&(G$T=Math.max(G$w.y+G$w.height*G$w.scaleY,G$T))}return G$T}),G$P(0,G$w,"scaleX",G$l.prototype._$get_scaleX,function(G$T){G$t.superGet(G$m,this,"scaleX")!=G$T&&(G$t.superSet(G$m,this,"scaleX",G$T),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),G$P(0,G$w,"top",function(){return this._layout.top},function(G$T){G$T!=this._layout.top&&(this.getLayout().top=G$T,this._setLayoutEnabled(!0)),this.resetLayoutY()}),G$P(0,G$w,"bottom",function(){return this._layout.bottom},function(G$T){G$T!=this._layout.bottom&&(this.getLayout().bottom=G$T,this._setLayoutEnabled(!0)),this.resetLayoutY()}),G$P(0,G$w,"left",function(){return this._layout.left},function(G$T){G$T!=this._layout.left&&(this.getLayout().left=G$T,this._setLayoutEnabled(!0)),this.resetLayoutX()}),G$P(0,G$w,"right",function(){return this._layout.right},function(G$T){G$T!=this._layout.right&&(this.getLayout().right=G$T,this._setLayoutEnabled(!0)),this.resetLayoutX()}),G$P(0,G$w,"centerX",function(){return this._layout.centerX},function(G$T){G$T!=this._layout.centerX&&(this.getLayout().centerX=G$T,this._setLayoutEnabled(!0)),this.resetLayoutX()}),G$P(0,G$w,"centerY",function(){return this._layout.centerY},function(G$T){G$T!=this._layout.centerY&&(this.getLayout().centerY=G$T,this._setLayoutEnabled(!0)),this.resetLayoutY()}),G$P(0,G$w,"anchorX",function(){return this._layout.anchorX},function(G$T){G$T!=this._layout.anchorX&&(this.getLayout().anchorX=G$T,this._setLayoutEnabled(!0)),this.resetLayoutX()}),G$P(0,G$w,"anchorY",function(){return this._layout.anchorY},function(G$T){G$T!=this._layout.anchorY&&(this.getLayout().anchorY=G$T,this._setLayoutEnabled(!0)),this.resetLayoutY()}),G$P(0,G$w,"tag",function(){return this._tag},function(G$T){this._tag=G$T}),G$P(0,G$w,"toolTip",function(){return this._toolTip},function(G$T){this._toolTip!=G$T&&(null!=(this._toolTip=G$T)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),G$P(0,G$w,"comXml",function(){return this._comXml},function(G$T){this._comXml=G$T}),G$P(0,G$w,"gray",function(){return this._gray},function(G$T){G$T!==this._gray&&(this._gray=G$T,G$o.gray(this,G$T))}),G$P(0,G$w,"disabled",function(){return this._disabled},function(G$T){G$T!==this._disabled&&(this.gray=this._disabled=G$T,this.mouseEnabled=!G$T)}),G$T}(G$m)),G$x=function(G$T){function G$l(){this.lockLayer=null,this.popupEffect=function(G$T){G$T.scale(1,1),G$B.from(G$T,{x:G$t.stage.width/2,y:G$t.stage.height/2,scaleX:0,scaleY:0},300,G$J.backOut,G$b.create(this,this.doOpen,[G$T]))},this.closeEffect=function(G$T,G$l){G$B.to(G$T,{x:G$t.stage.width/2,y:G$t.stage.height/2,scaleX:0,scaleY:0},300,G$J.strongOut,G$b.create(this,this.doClose,[G$T,G$l]))},G$l.__super.call(this),this.maskLayer=new G$m,this.popupEffectHandler=G$b.create(this,this.popupEffect,null,!1),this.closeEffectHandler=G$b.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,G$t.stage.addChild(this),G$t.stage.on("resize",this,this._onResize),G$e.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}G$D(G$l,"laya.ui.DialogManager",G$m);var G$w=G$l.prototype;return G$w._closeOnSide=function(){var G$T=this.getChildAt(this.numChildren-1);G$T instanceof laya.ui.Dialog&&G$T.close("side")},G$w.setLockView=function(G$T){this.lockLayer||(this.lockLayer=new G$R,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(G$t.stage.width,G$t.stage.height)),this.lockLayer.removeChildren(),G$T&&(G$T.centerX=G$T.centerY=0,this.lockLayer.addChild(G$T))},G$w._onResize=function(G$T){var G$l=this.maskLayer.width=G$t.stage.width,G$w=this.maskLayer.height=G$t.stage.height;this.lockLayer&&this.lockLayer.size(G$l,G$w),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,G$l,G$w,G$e.popupBgColor),this.maskLayer.alpha=G$e.popupBgAlpha;for(var G$u=this.numChildren-1;-1<G$u;G$u--){var G$p=this.getChildAt(G$u);G$p.popupCenter&&this._centerDialog(G$p)}},G$w._centerDialog=function(G$T){G$T.x=Math.round((G$t.stage.width-G$T.width>>1)+G$T.pivotX),G$T.y=Math.round((G$t.stage.height-G$T.height>>1)+G$T.pivotY)},G$w.open=function(G$T,G$l,G$w){void 0===G$l&&(G$l=!1),void 0===G$w&&(G$w=!1),G$l&&this._closeAll(),G$T.popupCenter&&this._centerDialog(G$T),this.addChild(G$T),(G$T.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),G$w&&null!=G$T.popupEffect?G$T.popupEffect.runWith(G$T):this.doOpen(G$T),this.event("open")},G$w.doOpen=function(G$T){G$T.onOpened()},G$w.lock=function(G$T){this.lockLayer&&(G$T?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},G$w.close=function(G$T,G$l,G$w){void 0===G$w&&(G$w=!1),G$w&&null!=G$T.closeEffect?G$T.closeEffect.runWith([G$T,G$l]):this.doClose(G$T,G$l),this.event("close")},G$w.doClose=function(G$T,G$l){G$T.removeSelf(),G$T.isModal&&this._checkMask(),G$T.closeHandler&&G$T.closeHandler.runWith(G$l),G$T.onClosed(G$l)},G$w.closeAll=function(){this._closeAll(),this.event("close")},G$w._closeAll=function(){for(var G$T=this.numChildren-1;-1<G$T;G$T--){var G$l=this.getChildAt(G$T);G$l&&null!=G$l.close&&this.doClose(G$l)}},G$w.getDialogsByGroup=function(G$T){for(var G$l=[],G$w=this.numChildren-1;-1<G$w;G$w--){var G$u=this.getChildAt(G$w);G$u&&G$u.group===G$T&&G$l.push(G$u)}return G$l},G$w.closeByGroup=function(G$T){for(var G$l=[],G$w=this.numChildren-1;-1<G$w;G$w--){var G$u=this.getChildAt(G$w);G$u&&G$u.group===G$T&&(G$u.close(),G$l.push(G$u))}return G$l},G$w._checkMask=function(){this.maskLayer.removeSelf();for(var G$T=this.numChildren-1;-1<G$T;G$T--){var G$l=this.getChildAt(G$T);if(G$l&&G$l.isModal)return void this.addChildAt(this.maskLayer,G$T)}},G$l}(),G$R=function(G$T){function G$l(){G$l.__super.call(this)}G$D(G$l,"laya.ui.Box",G$T);var G$w=G$l.prototype;return G$t.imps(G$w,{"laya.ui.IBox":!0}),G$P(0,G$w,"dataSource",G$T.prototype._$get_dataSource,function(G$T){for(var G$l in this._dataSource=G$T){var G$w=this.getChildByName(G$l);G$w?G$w.dataSource=G$T[G$l]:this.hasOwnProperty(G$l)&&"function"!=typeof this[G$l]&&(this[G$l]=G$T[G$l])}}),G$l}(G$v),G$F=function(G$l){function G$w(G$T,G$l){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,G$w.__super.call(this),this._labelColors=G$Q.buttonLabelColors,this._stateNum=G$Q.buttonStateNum,void 0===G$l&&(G$l=""),this.skin=G$T,this.label=G$l}G$D(G$w,"laya.ui.Button",G$l);var G$T=G$w.prototype;return G$t.imps(G$T,{"laya.ui.ISelect":!0}),G$T.destroy=function(G$T){this.clearEvent(),G$i.clearCache(this,this._skin),G$i.clearObject(this,this._weakKey),void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(G$T),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},G$T.clearEvent=function(){this._skin&&G$p.atalsNotify&&G$p.atalsNotify.off(this._skin,this,this._setBtnSource)},G$T.createChildren=function(){this.graphics=this._bitmap=new G$y},G$T.createText=function(){this._text||(this._text=new G$c,this._text.overflow=G$c.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},G$T.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},G$T.onMouse=function(G$T){if(!1!==this.toggle||!this._selected)return"click"===G$T.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=G$w.stateMap[G$T.type]))},G$T.changeClips=function(){var G$T=G$i.getRes(this._skin);if(G$T)if(this._skin&&""!=this._skin){G$i.clearObject(this,this._weakKey);var G$l=G$T.sourceWidth,G$w=G$T.sourceHeight/this._stateNum;G$T.$_GID||(G$T.$_GID=G$s.getGID());var G$u=G$T.$_GID+"-"+this._stateNum,G$p=G$i.findObject(G$u);if(G$s.isOkTextureList(G$p)||(G$p=null),G$p)this._weakKey=G$u,G$i.keepObject(this,this._weakKey),this._sources=G$p;else{if(this._sources=[],1===this._stateNum)this._sources.push(G$T);else for(var G$D=0;G$D<this._stateNum;G$D++){var G$P=G$a.createFromTexture(G$T,0,G$w*G$D,G$l,G$w);if(G$T.alphaTexture){var G$j=G$T.width/G$T.alphaTexture.width;G$P.alphaTexture=G$a.createFromTexture(G$T.alphaTexture,0/G$j,G$w*G$D/G$j,G$l/G$j,G$w/G$j)}this._sources.push(G$P)}G$i.saveObject(G$u,this._sources),this._weakKey=G$u,G$i.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||G$l,this._bitmap.height=this._height||G$w,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=G$l)}else console.warn("lose skin ",this._skin,this.name,this.__className)},G$T.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var G$T=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[G$T]),this.label&&(this._text.color=this._labelColors[G$T],this._strokeColors&&(this._text.strokeColor=this._strokeColors[G$T]))},G$T._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},G$P(0,G$T,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(G$T){this.createText(),this._text.strokeColor=G$T}),G$P(0,G$T,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),G$P(0,G$T,"skin",function(){return this._skin},function(G$T){if(this._skin!=G$T)if(this.clearEvent(),G$i.clearCache(this,this._skin),this._skin=G$T,G$i.keepCache(this,this._skin),G$i.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var G$l=G$p.resAtalsObj&&G$p.resAtalsObj[this._skin];G$l?(G$p.atalsNotify&&G$p.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=G$l.sourceW),0==this.height&&(this.height=G$l.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),G$T._setBtnSource=function(G$T,G$l){G$T===this._skin&&G$l&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},G$P(0,G$T,"state",function(){return this._state},function(G$T){this._state!=G$T&&(this._state=G$T,this._setStateChanged())}),G$P(0,G$T,"text",function(){return this.createText(),this._text}),G$P(0,G$T,"stateNum",function(){return this._stateNum},function(G$T){"string"==typeof G$T&&(G$T=parseInt(G$T)),this._stateNum!=G$T&&(this._stateNum=G$T<1?1:3<G$T?3:G$T,this.callLater(this.changeClips))}),G$P(0,G$T,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(G$T){this._strokeColors=G$o.fillArray(G$Q.buttonLabelColors,G$T,String),this._setStateChanged()}),G$P(0,G$T,"labelColors",function(){return this._labelColors.join(",")},function(G$T){this._labelColors=G$o.fillArray(G$Q.buttonLabelColors,G$T,String),this._setStateChanged()}),G$P(0,G$T,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),G$P(0,G$T,"label",function(){return this._text?this._text.text:null},function(G$T){(this._text||G$T)&&(this.createText(),this._text.text!=G$T&&(G$T&&!this._text.parent&&this.addChild(this._text),this._text.text=(G$T+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),G$P(0,G$T,"selected",function(){return this._selected},function(G$T){this._selected!=G$T&&(this._selected=G$T,this.state=this._selected?2:0,this.event("change"))}),G$P(0,G$T,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(G$T){this.createText(),this._text.padding=G$o.fillArray(G$Q.labelPadding,G$T,Number)}),G$P(0,G$T,"labelSize",function(){return this.createText(),this._text.fontSize},function(G$T){this.createText(),this._text.fontSize=G$T}),G$P(0,G$T,"labelStroke",function(){return this.createText(),this._text.stroke},function(G$T){this.createText(),this._text.stroke=G$T}),G$P(0,G$T,"labelBold",function(){return this.createText(),this._text.bold},function(G$T){this.createText(),this._text.bold=G$T}),G$P(0,G$T,"labelFont",function(){return this.createText(),this._text.font},function(G$T){this.createText(),this._text.font=G$T}),G$P(0,G$T,"labelAlign",function(){return this.createText(),this._text.align},function(G$T){this.createText(),this._text.align=G$T}),G$P(0,G$T,"clickHandler",function(){return this._clickHandler},function(G$T){this._clickHandler=G$T}),G$P(0,G$T,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(G$T){this._bitmap.sizeGrid=G$o.fillArray(G$Q.defaultSizeGrid,G$T,Number)}),G$P(0,G$T,"width",G$l.prototype._$get_width,function(G$T){G$t.superSet(G$v,this,"width",G$T),this._autoSize&&(this._bitmap.width=G$T,this._text&&(this._text.width=G$T))}),G$P(0,G$T,"height",G$l.prototype._$get_height,function(G$T){G$t.superSet(G$v,this,"height",G$T),this._autoSize&&(this._bitmap.height=G$T,this._text&&(this._text.height=G$T))}),G$P(0,G$T,"dataSource",G$l.prototype._$get_dataSource,function(G$T){"number"==typeof(this._dataSource=G$T)||"string"==typeof G$T?this.label=G$T+"":G$t.superSet(G$v,this,"dataSource",G$T)}),G$P(0,G$T,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(G$T){this._bitmap._offset=G$T?G$o.fillArray([1,1],G$T,Number):[]}),G$u(G$w,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),G$w}(G$v),G$O=function(G$l){function G$u(G$T,G$l,G$w){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,G$u.__super.call(this),void 0===G$l&&(G$l=1),void 0===G$w&&(G$w=1),this._clipX=G$l,this._clipY=G$w,this.skin=G$T}G$D(G$u,"laya.ui.Clip",G$l);var G$T=G$u.prototype;return G$T.destroy=function(G$T){this.clearEvent(),this.clearLoad(),G$i.clearCache(this,this._skin),G$i.clearObject(this,this._weakKey),void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},G$T.dispose=function(){this.destroy(!0),G$t.loader.clearRes(this._skin)},G$T.createChildren=function(){this.graphics=this._bitmap=new G$y},G$T._onDisplay=function(G$T){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},G$T.changeClip=function(){if(this._clipChanged=!1,this._skin){var G$T=G$i.getRes(this._skin);if(G$T)this.loadComplete(this._skin,G$T);else{if(G$p.resAtalsObj&&G$p.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=G$b.create(this,this.loadComplete,[this._skin]),this._progress=null,G$t.loader.load(this._skin,this._complete,this._progress)}}},G$T.loadComplete=function(G$T,G$l){if(G$T===this._skin&&G$l){G$i.clearObject(this,this._weakKey);var G$w=this._clipWidth||Math.ceil(G$l.sourceWidth/this._clipX),G$u=this._clipHeight||Math.ceil(G$l.sourceHeight/this._clipY),G$p=this._skin+G$w+G$u,G$D=G$i.findObject(G$p);if(G$s.isOkTextureList(G$D)||(G$D=null),G$D)this._weakKey=G$p,G$i.keepObject(this,this._weakKey),this._sources=G$D;else{this._sources=[];for(var G$P=0;G$P<this._clipY;G$P++)for(var G$j=0;G$j<this._clipX;G$j++){var G$J=G$a.createFromTexture(G$l,G$w*G$j,G$u*G$P,G$w,G$u);if(G$l.alphaTexture){var G$q=G$l.width/G$l.alphaTexture.width;G$J.alphaTexture=G$a.createFromTexture(G$l.alphaTexture,G$w*G$j/G$q,G$u*G$P/G$q,G$w/G$q,G$u/G$q)}this._sources.push(G$J)}G$i.saveObject(G$p,this._sources),this._weakKey=G$p,G$i.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},G$T.play=function(G$T,G$l){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=-1),this._isPlaying=!0,this.index=G$T,this._toIndex=G$l,this._index++,G$t.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},G$T._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},G$T.stop=function(){this._isPlaying=!1,G$t.timer.clear(this,this._loop),this.event("complete")},G$T._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},G$P(0,G$T,"interval",function(){return this._interval},function(G$T){this._interval!=G$T&&(this._interval=G$T,this._isPlaying&&this.play())}),G$T.clearEvent=function(){this._skin&&G$p.atalsNotify&&G$p.atalsNotify.off(this._skin,this,this._setBtnSource)},G$T.clearLoad=function(){this._skin&&((this._complete||this._progress)&&G$t.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},G$P(0,G$T,"skin",function(){return this._skin},function(G$T){if(this._skin!=G$T)if(this.clearLoad(),this.clearEvent(),G$i.clearCache(this,this._skin),this._skin=G$T){G$i.keepCache(this,this._skin);var G$l=G$i.getRes(G$T),G$w=G$p.resAtalsObj&&G$p.resAtalsObj[this._skin];!G$l&&G$w?G$p.atalsNotify&&G$p.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),G$T._setBtnSource=function(G$T,G$l){G$T===this._skin&&G$l&&(this.loadComplete(G$T,G$l),this.clearEvent())},G$P(0,G$T,"sources",function(){return this._sources},function(G$T){this._sources=G$T,this.index=this._index,this.event("loaded")}),G$P(0,G$T,"clipX",function(){return this._clipX},function(G$T){this._clipX=G$T||1,this._setClipChanged()}),G$P(0,G$T,"clipY",function(){return this._clipY},function(G$T){this._clipY=G$T||1,this._setClipChanged()}),G$P(0,G$T,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),G$P(0,G$T,"clipWidth",function(){return this._clipWidth},function(G$T){this._clipWidth=G$T,this._setClipChanged()}),G$P(0,G$T,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(G$T){this._bitmap.sizeGrid=G$o.fillArray(G$Q.defaultSizeGrid,G$T,Number)}),G$P(0,G$T,"group",function(){return this._group},function(G$T){G$T&&this._skin&&G$i.setGroup(this._skin,G$T),this._group=G$T}),G$P(0,G$T,"clipHeight",function(){return this._clipHeight},function(G$T){this._clipHeight=G$T,this._setClipChanged()}),G$P(0,G$T,"width",G$l.prototype._$get_width,function(G$T){G$t.superSet(G$v,this,"width",G$T),this._bitmap.width=G$T}),G$P(0,G$T,"height",G$l.prototype._$get_height,function(G$T){G$t.superSet(G$v,this,"height",G$T),this._bitmap.height=G$T}),G$P(0,G$T,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),G$P(0,G$T,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),G$P(0,G$T,"index",function(){return this._index},function(G$T){this._index=G$T,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[G$T]),this.event("change")}),G$P(0,G$T,"autoPlay",function(){return this._autoPlay},function(G$T){this._autoPlay!=G$T&&((this._autoPlay=G$T)?this.play():this.stop())}),G$P(0,G$T,"isPlaying",function(){return this._isPlaying},function(G$T){this._isPlaying=G$T}),G$P(0,G$T,"dataSource",G$l.prototype._$get_dataSource,function(G$T){"number"==typeof(this._dataSource=G$T)&&Math.floor(G$T)==G$T||"string"==typeof G$T?this.index=parseInt(G$T):G$t.superSet(G$v,this,"dataSource",G$T)}),G$P(0,G$T,"bitmap",function(){return this._bitmap}),G$u}(G$v),G$$=function(G$l){function G$T(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,G$T.__super.call(this)}G$D(G$T,"laya.ui.ColorPicker",G$l);var G$w=G$T.prototype;return G$w.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._colorPanel&&this._colorPanel.destroy(G$T),this._colorButton&&this._colorButton.destroy(G$T),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},G$w.createChildren=function(){this.addChild(this._colorButton=new G$F),this._colorPanel=new G$R,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new G$m),this._colorPanel.addChild(this._colorBlock=new G$m),this._colorPanel.addChild(this._colorInput=new G$K)},G$w.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},G$w.onPanelMouseDown=function(G$T){G$T.stopPropagation()},G$w.changePanel=function(){this._panelChanged=!1;var G$T=this._colorPanel.graphics;G$T.clear(),G$T.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(G$T=this._colorTiles.graphics).clear();for(var G$l=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],G$w=0;G$w<12;G$w++)for(var G$u=0;G$u<20;G$u++){var G$p=0;G$p=0===G$u?G$l[G$w]:1===G$u?0:51*(((3*G$w+G$u/6)%3<<0)+3*(G$w/6<<0))<<16|G$u%6*51<<8|(G$w<<0)%6*51;var G$D=G$o.toColor(G$p);this._colors.push(G$D);var G$P=G$u*this._gridSize,G$j=G$w*this._gridSize;G$T.drawRect(G$P,G$j,this._gridSize,this._gridSize,G$D,"#000000")}},G$w.onColorButtonClick=function(G$T){this._colorPanel.parent?this.close():this.open()},G$w.open=function(){var G$T=this.localToGlobal(new G$Y),G$l=G$T.x+this._colorPanel.width<=G$t.stage.width?G$T.x:G$t.stage.width-this._colorPanel.width,G$w=G$T.y+this._colorButton.height;G$w=G$w+this._colorPanel.height<=G$t.stage.height?G$w:G$T.y-this._colorPanel.height,this._colorPanel.pos(G$l,G$w),this._colorPanel.zOrder=1001,G$t._currentStage.addChild(this._colorPanel),G$t.stage.on("mousedown",this,this.removeColorBox)},G$w.close=function(){G$t.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},G$w.removeColorBox=function(G$T){this.close()},G$w.onColorFieldKeyDown=function(G$T){13==G$T.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),G$T.stopPropagation())},G$w.onColorInputChange=function(G$T){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},G$w.onColorTilesClick=function(G$T){this.selectedColor=this.getColorByMouse(),this.close()},G$w.onColorTilesMouseMove=function(G$T){this._colorInput.focus=!1;var G$l=this.getColorByMouse();this._colorInput.text=G$l,this.drawBlock(G$l)},G$w.getColorByMouse=function(){var G$T=this._colorTiles.getMousePoint(),G$l=Math.floor(G$T.x/this._gridSize),G$w=Math.floor(G$T.y/this._gridSize);return this._colors[20*G$w+G$l]},G$w.drawBlock=function(G$T){var G$l=this._colorBlock.graphics;G$l.clear();var G$w=G$T||"#ffffff";G$l.drawRect(0,0,50,20,G$w,this._borderColor),G$T||G$l.drawLine(0,0,50,20,"#ff0000")},G$w.changeColor=function(){var G$T=this.graphics;G$T.clear();var G$l=this._selectedColor||"#000000";G$T.drawRect(0,0,this._colorButton.width,this._colorButton.height,G$l)},G$w._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},G$P(0,G$w,"inputBgColor",function(){return this._inputBgColor},function(G$T){this._inputBgColor=G$T,this._setPanelChanged()}),G$P(0,G$w,"selectedColor",function(){return this._selectedColor},function(G$T){this._selectedColor!=G$T&&(this._selectedColor=this._colorInput.text=G$T,this.drawBlock(G$T),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",G$q.EMPTY.setTo("change",this,this)))}),G$P(0,G$w,"skin",function(){return this._colorButton.skin},function(G$T){this._colorButton.skin=G$T,this.changeColor()}),G$P(0,G$w,"bgColor",function(){return this._bgColor},function(G$T){this._bgColor=G$T,this._setPanelChanged()}),G$P(0,G$w,"borderColor",function(){return this._borderColor},function(G$T){this._borderColor=G$T,this._setPanelChanged()}),G$P(0,G$w,"inputColor",function(){return this._inputColor},function(G$T){this._inputColor=G$T,this._setPanelChanged()}),G$T}(G$v),G$Z=function(G$l){function G$w(G$T,G$l){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,G$w.__super.call(this),this._itemColors=G$Q.comboBoxItemColors,this.skin=G$T,this.labels=G$l}G$D(G$w,"laya.ui.ComboBox",G$l);var G$T=G$w.prototype;return G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._button&&this._button.destroy(G$T),this._list&&this._list.destroy(G$T),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},G$T.createChildren=function(){this.addChild(this._button=new G$F),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},G$T._createList=function(){this._list=new G$f,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},G$T._setListEvent=function(G$T){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=G$b.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},G$T.onListDown=function(G$T){G$T.stopPropagation()},G$T.onScrollBarDown=function(G$T){G$T.stopPropagation()},G$T.onButtonMouseDown=function(G$T){this.callLater(this.switchTo,[!this._isOpen])},G$T.changeList=function(){this._listChanged=!1;var G$T=this.width-2,G$l=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:G$T,height:this._itemHeight,fontSize:this._itemSize,color:G$l}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},G$T.onlistItemMouse=function(G$T,G$l){var G$w=G$T.type;if("mouseover"===G$w||"mouseout"===G$w){if(this._isCustomList)return;var G$u=this._list.getCell(G$l);if(!G$u)return;var G$p=G$u.getChildByName("label");G$p&&("mouseover"===G$w?(G$p.bgColor=this._itemColors[0],G$p.color=this._itemColors[1]):(G$p.bgColor=null,G$p.color=this._itemColors[2]))}else"click"===G$w&&(this.selectedIndex=G$l,this.isOpen=!1)},G$T.switchTo=function(G$T){this.isOpen=G$T},G$T.changeOpen=function(){this.isOpen=!this._isOpen},G$T.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var G$T=this._list.graphics;G$T.clear(),G$T.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var G$l=this._list.array||[],G$w=G$l.length=0,G$u=this._labels.length;G$w<G$u;G$w++)G$l.push({label:this._labels[G$w]});this._list.height=this._listHeight,this._list.array=G$l},G$T.changeSelected=function(){this._button.label=this.selectedLabel},G$T._onStageMouseWheel=function(G$T){this._list&&!this._list.contains(G$T.target)&&this.removeList(null)},G$T.removeList=function(G$T){G$t.stage.off("mousedown",this,this.removeList),G$t.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},G$P(0,G$T,"selectedIndex",function(){return this._selectedIndex},function(G$T){this._selectedIndex!=G$T&&(this._selectedIndex=G$T,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[G$q.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),G$P(0,G$T,"measureHeight",function(){return this._button.height}),G$P(0,G$T,"skin",function(){return this._button.skin},function(G$T){this._button.skin!=G$T&&(this._button.skin=G$T,this._listChanged=!0)}),G$P(0,G$T,"measureWidth",function(){return this._button.width}),G$P(0,G$T,"width",G$l.prototype._$get_width,function(G$T){G$t.superSet(G$v,this,"width",G$T),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),G$P(0,G$T,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(G$T){this.selectedIndex=this._labels.indexOf(G$T)}),G$P(0,G$T,"labels",function(){return this._labels.join(",")},function(G$T){0<this._labels.length&&(this.selectedIndex=-1),G$T?this._labels=G$T.split(","):this._labels.length=0,this._itemChanged=!0}),G$P(0,G$T,"height",G$l.prototype._$get_height,function(G$T){G$t.superSet(G$v,this,"height",G$T),this._button.height=this._height}),G$P(0,G$T,"selectHandler",function(){return this._selectHandler},function(G$T){this._selectHandler=G$T}),G$P(0,G$T,"visibleNum",function(){return this._visibleNum},function(G$T){this._visibleNum=G$T,this._listChanged=!0}),G$P(0,G$T,"labelBold",function(){return this._button.text.bold},function(G$T){this._button.text.bold=G$T}),G$P(0,G$T,"itemColors",function(){return String(this._itemColors)},function(G$T){this._itemColors=G$o.fillArray(this._itemColors,G$T,String),this._listChanged=!0}),G$P(0,G$T,"itemSize",function(){return this._itemSize},function(G$T){this._itemSize=G$T,this._listChanged=!0}),G$P(0,G$T,"scrollBar",function(){return this.list.scrollBar}),G$P(0,G$T,"isOpen",function(){return this._isOpen},function(G$T){if(this._isOpen!=G$T)if(this._isOpen=G$T,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var G$l=this.localToGlobal(G$Y.TEMP.setTo(0,0)),G$w=G$l.y+this._button.height;G$w=G$w+this._listHeight<=G$t.stage.height?G$w:G$l.y-this._listHeight,this._list.pos(G$l.x,G$w),this._list.zOrder=1001,G$t._currentStage.addChild(this._list),G$t.stage.once("mousedown",this,this.removeList),G$t.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),G$P(0,G$T,"scrollBarSkin",function(){return this._scrollBarSkin},function(G$T){this._scrollBarSkin=G$T}),G$P(0,G$T,"sizeGrid",function(){return this._button.sizeGrid},function(G$T){this._button.sizeGrid=G$T}),G$P(0,G$T,"button",function(){return this._button}),G$P(0,G$T,"list",function(){return this._list||this._createList(),this._list},function(G$T){G$T&&(G$T.removeSelf(),this._isCustomList=!0,this._list=G$T,this._setListEvent(G$T),this._itemHeight=G$T.getCell(0).height+G$T.spaceY)}),G$P(0,G$T,"dataSource",G$l.prototype._$get_dataSource,function(G$T){"number"==typeof(this._dataSource=G$T)&&Math.floor(G$T)==G$T||"string"==typeof G$T?this.selectedIndex=parseInt(G$T):G$T instanceof Array?this.labels=G$T.join(","):G$t.superSet(G$v,this,"dataSource",G$T)}),G$P(0,G$T,"labelColors",function(){return this._button.labelColors},function(G$T){this._button.labelColors!=G$T&&(this._button.labelColors=G$T)}),G$P(0,G$T,"labelPadding",function(){return this._button.text.padding.join(",")},function(G$T){this._button.text.padding=G$o.fillArray(G$Q.labelPadding,G$T,Number)}),G$P(0,G$T,"labelSize",function(){return this._button.text.fontSize},function(G$T){this._button.text.fontSize=G$T}),G$P(0,G$T,"labelFont",function(){return this._button.text.font},function(G$T){this._button.text.font=G$T}),G$P(0,G$T,"stateNum",function(){return this._button.stateNum},function(G$T){this._button.stateNum=G$T}),G$w}(G$v),G$H=function(G$l){function G$w(G$T){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,G$w.__super.call(this),this._showButtons=G$e.showButtons,this._touchScrollEnable=G$e.touchScrollEnable,this._mouseWheelEnable=G$e.mouseWheelEnable,this.skin=G$T,this.max=1}G$D(G$w,"laya.ui.ScrollBar",G$l);var G$T=G$w.prototype;return G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),this.stopScroll(),this.target=null,G$l.prototype.destroy.call(this,G$T),this.upButton&&this.upButton.destroy(G$T),this.downButton&&this.downButton.destroy(G$T),this.slider&&this.slider.destroy(G$T),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},G$T.createChildren=function(){this.addChild(this.slider=new G$X),this.addChild(this.upButton=new G$F),this.addChild(this.downButton=new G$F)},G$T.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},G$T.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},G$T.onButtonMouseDown=function(G$T){var G$l=G$T.currentTarget===this.upButton;this.slide(G$l),G$t.timer.once(G$Q.scrollBarDelayTime,this,this.startLoop,[G$l]),G$t.stage.once("mouseup",this,this.onStageMouseUp)},G$T.startLoop=function(G$T){G$t.timer.frameLoop(1,this,this.slide,[G$T])},G$T.slide=function(G$T){G$T?this.value-=this._scrollSize:this.value+=this._scrollSize},G$T.onStageMouseUp=function(G$T){G$t.timer.clear(this,this.startLoop),G$t.timer.clear(this,this.slide)},G$T.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},G$T.changeSize=function(){G$l.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},G$T.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},G$T.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},G$T.setScroll=function(G$T,G$l,G$w){this.runCallLater(this.changeSize),this.slider.setSlider(G$T,G$l,G$w),this.slider.bar.visible=0<G$l,!this._hide&&this.autoHide&&(this.visible=!1)},G$T.onTargetMouseWheel=function(G$T){this.value-=G$T.delta*this._scrollSize,this.target=this._target},G$T.onTargetMouseDown=function(G$T){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new G$Y),this._lastPoint.setTo(G$t.stage.mouseX,G$t.stage.mouseY),G$t.timer.clear(this,this.tweenMove),G$B.clearTween(this),G$t.stage.once("mouseup",this,this.onStageMouseUp2),G$t.stage.once("mouseout",this,this.onStageMouseUp2),G$t.timer.frameLoop(1,this,this.loop)},G$T.loop=function(){var G$T=G$t.stage.mouseY,G$l=G$t.stage.mouseX;if(this._lastOffset=this.isVertical?G$T-this._lastPoint.y:G$l-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?G$t.stage._canvasTransform.getScaleY():G$t.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=G$l,this._lastPoint.y=G$T,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},G$T.onStageMouseUp2=function(G$T){if(G$t.stage.off("mouseup",this,this.onStageMouseUp2),G$t.stage.off("mouseout",this,this.onStageMouseUp2),G$t.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?G$B.to(this,{value:this.min},this.elasticBackTime,G$J.sineOut,G$b.create(this,this.elasticOver)):this._value>this.max&&G$B.to(this,{value:this.max},this.elasticBackTime,G$J.sineOut,G$b.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?G$t.stage.mouseY-this._lastPoint.y:G$t.stage.mouseX-this._lastPoint.x);for(var G$l=0,G$w=Math.min(this._offsets.length,3),G$u=0;G$u<G$w;G$u++)G$l+=this._offsets[this._offsets.length-1-G$u];if(this._lastOffset=G$l/G$w,(G$l=Math.abs(this._lastOffset))<2)return void this.event("end");60<G$l&&(this._lastOffset=0<this._lastOffset?60:-60);var G$p=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));G$t.timer.frameLoop(1,this,this.tweenMove,[G$p])}},G$T.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&G$B.to(this,{alpha:0},500),this.event("end")},G$T.tweenMove=function(G$T){this._lastOffset*=this.rollRatio;var G$l=NaN;if(0<G$T&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,G$l=.5*-(this.min-G$T-this.value),this._lastOffset>G$l&&(this._lastOffset=G$l)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,G$l=.5*-(this.max+G$T-this.value),this._lastOffset<G$l&&(this._lastOffset=G$l))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(G$t.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?G$B.to(this,{value:this.min},this.elasticBackTime,G$J.sineOut,G$b.create(this,this.elasticOver)):this._value>this.max?G$B.to(this,{value:this.max},this.elasticBackTime,G$J.sineOut,G$b.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&G$B.to(this,{alpha:0},500)}},G$T.stopScroll=function(){this.onStageMouseUp2(null),G$t.timer.clear(this,this.tweenMove),G$B.clearTween(this)},G$P(0,G$T,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),G$P(0,G$T,"skin",function(){return this._skin},function(G$T){this._skin!=G$T&&(this._skin=G$T,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),G$P(0,G$T,"max",function(){return this.slider.max},function(G$T){this.slider.max=G$T}),G$P(0,G$T,"showButtons",function(){return this._showButtons},function(G$T){this._showButtons=G$T,this.callLater(this.changeScrollBar)}),G$P(0,G$T,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),G$P(0,G$T,"min",function(){return this.slider.min},function(G$T){this.slider.min=G$T}),G$P(0,G$T,"value",function(){return this._value},function(G$T){G$T!==this._value&&(this._value=G$T,this._isElastic||(this.slider._value!=G$T&&(this.slider._value=G$T,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),G$P(0,G$T,"isVertical",function(){return this.slider.isVertical},function(G$T){this.slider.isVertical=G$T}),G$P(0,G$T,"sizeGrid",function(){return this.slider.sizeGrid},function(G$T){this.slider.sizeGrid=G$T}),G$P(0,G$T,"scrollSize",function(){return this._scrollSize},function(G$T){this._scrollSize=G$T}),G$P(0,G$T,"dataSource",G$l.prototype._$get_dataSource,function(G$T){"number"==typeof(this._dataSource=G$T)||"string"==typeof G$T?this.value=Number(G$T):G$t.superSet(G$v,this,"dataSource",G$T)}),G$P(0,G$T,"thumbPercent",function(){return this._thumbPercent},function(G$T){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),G$T=1<=G$T?.99:G$T,this._thumbPercent=G$T,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*G$T,G$Q.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*G$T,G$Q.scrollBarMinNum))}),G$P(0,G$T,"target",function(){return this._target},function(G$T){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=G$T)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),G$P(0,G$T,"hide",function(){return this._hide},function(G$T){this._hide=G$T,this.visible=!G$T}),G$P(0,G$T,"touchScrollEnable",function(){return this._touchScrollEnable},function(G$T){this._touchScrollEnable=G$T,this.target=this._target}),G$P(0,G$T,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(G$T){this._mouseWheelEnable=G$T,this.target=this._target}),G$P(0,G$T,"tick",function(){return this.slider.tick},function(G$T){this.slider.tick=G$T}),G$w}(G$v),G$X=function(G$l){function G$w(G$T){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,G$w.__super.call(this),this.skin=G$T}G$D(G$w,"laya.ui.Slider",G$l);var G$T=G$w.prototype;return G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._bg&&this._bg.destroy(G$T),this._bar&&this._bar.destroy(G$T),this._progress&&this._progress.destroy(G$T),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},G$T.createChildren=function(){this.addChild(this._bg=new G$k),this.addChild(this._bar=new G$F)},G$T.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},G$T.onBarMouseDown=function(G$T){this._globalSacle||(this._globalSacle=new G$Y),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=G$t.stage.mouseX,this._ty=G$t.stage.mouseY,G$t.stage.on("mousemove",this,this.mouseMove),G$t.stage.once("mouseup",this,this.mouseUp),G$t.stage.once("mouseout",this,this.mouseUp),this.showValueText()},G$T.showValueText=function(){if(this.showLabel){var G$T=laya.ui.Slider.label;this.addChild(G$T),G$T.textField.changeText(this._value+""),this.isVertical?(G$T.x=this._bar.x+20,G$T.y=.5*(this._bar.height-G$T.height)+this._bar.y):(G$T.y=this._bar.y-20,G$T.x=.5*(this._bar.width-G$T.width)+this._bar.x)}},G$T.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},G$T.mouseUp=function(G$T){G$t.stage.off("mousemove",this,this.mouseMove),G$t.stage.off("mouseup",this,this.mouseUp),G$t.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},G$T.mouseMove=function(G$T){var G$l=this._value;this.isVertical?(this._bar.y+=(G$t.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(G$t.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=G$t.stage.mouseX,this._ty=G$t.stage.mouseY;var G$w=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*G$w)/G$w,this._value!=G$l&&this.sendChangeEvent(),this.showValueText()},G$T.sendChangeEvent=function(G$T){void 0===G$T&&(G$T="change"),this.event(G$T),this.changeHandler&&this.changeHandler.runWith(this._value)},G$T.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},G$T.changeSize=function(){G$l.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},G$T.setSlider=function(G$T,G$l,G$w){this._value=-1,this._min=G$T,this._max=G$T<G$l?G$l:G$T,this.value=G$w<G$T?G$T:G$l<G$w?G$l:G$w},G$T.changeValue=function(){var G$T=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*G$T)/G$T,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var G$l=this._max-this._min;0===G$l&&(G$l=1),this.isVertical?(this._bar.y=(this._value-this._min)/G$l*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/G$l*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},G$T.onBgMouseDown=function(G$T){var G$l=this._bg.getMousePoint();this.isVertical?this.value=G$l.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=G$l.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},G$P(0,G$T,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),G$P(0,G$T,"skin",function(){return this._skin},function(G$T){if(this._skin!=G$T){this._skin=G$T,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var G$l=this._skin.replace(".png","$progress.png");G$i.getRes(G$l)&&(this._progress||(this.addChild(this._progress=new G$k),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=G$l),this.setBarPoint(),this.callLater(this.changeValue)}}),G$P(0,G$T,"allowClickBack",function(){return this._allowClickBack},function(G$T){this._allowClickBack!=G$T&&((this._allowClickBack=G$T)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),G$P(0,G$T,"max",function(){return this._max},function(G$T){this._max!=G$T&&(this._max=G$T,this.callLater(this.changeValue))}),G$P(0,G$T,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),G$P(0,G$T,"tick",function(){return this._tick},function(G$T){this._tick!=G$T&&(this._tick=G$T,this.callLater(this.changeValue))}),G$P(0,G$T,"sizeGrid",function(){return this._bg.sizeGrid},function(G$T){this._bg.sizeGrid=G$T,this._bar.sizeGrid=G$T,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),G$P(0,G$T,"min",function(){return this._min},function(G$T){this._min!=G$T&&(this._min=G$T,this.callLater(this.changeValue))}),G$P(0,G$T,"value",function(){return this._value},function(G$T){if(this._value!=G$T){var G$l=this._value;this._value=G$T,this.changeValue(),this._value!=G$l&&this.sendChangeEvent()}}),G$P(0,G$T,"dataSource",G$l.prototype._$get_dataSource,function(G$T){"number"==typeof(this._dataSource=G$T)||"string"==typeof G$T?this.value=Number(G$T):G$t.superSet(G$v,this,"dataSource",G$T)}),G$P(0,G$T,"bar",function(){return this._bar}),G$u(G$w,["label",function(){return this.label=new G$n}]),G$w}(G$v),G$k=function(G$l){function G$w(G$T){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,G$w.__super.call(this),this.skin=G$T}G$D(G$w,"laya.ui.Image",G$l);var G$T=G$w.prototype;return G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,G$i.clearCache(this,this._skin)},G$T.dispose=function(){this.destroy(!0),G$i.clearCache(this,this._skin),this.clearEvent()},G$T.createChildren=function(){this.graphics=this._bitmap=new G$y},G$T.setSource=function(G$T,G$l){G$T===this._skin&&G$l&&(this.source=G$l,this.onCompResize(),this.clearEvent())},G$T.clearEvent=function(){this._skin&&G$p.atalsNotify&&G$p.atalsNotify.off(this._skin,this,this.setSource)},G$T.clearLoad=function(){this._skin&&((this._complete||this._progress)&&G$t.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},G$P(0,G$T,"source",function(){return this._bitmap.source},function(G$T){this._bitmap&&(this._bitmap.source=G$T,this.event("loaded"),this.repaint())}),G$P(0,G$T,"dataSource",G$l.prototype._$get_dataSource,function(G$T){"string"==typeof(this._dataSource=G$T)?this.skin=G$T:G$t.superSet(G$v,this,"dataSource",G$T)}),G$P(0,G$T,"measureHeight",function(){return this._bitmap.height}),G$P(0,G$T,"skin",function(){return this._skin},function(G$T){if(this._skin!=G$T)if(G$i.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=G$T){G$i.keepCache(this,this._skin);var G$l=G$i.getRes(G$T),G$w=G$p.resAtalsObj&&G$p.resAtalsObj[this._skin];G$l?(this.source=G$l,this.onCompResize()):G$w?(G$p.atalsNotify&&G$p.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=G$w.sourceW),0==this.height&&(this.height=G$w.sourceH)):(this._complete=G$b.create(this,this.setSource,[this._skin]),this._progress=null,G$t.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),G$P(0,G$T,"group",function(){return this._group},function(G$T){G$T&&this._skin&&G$i.setGroup(this._skin,G$T),this._group=G$T}),G$P(0,G$T,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(G$T){this._bitmap.sizeGrid=G$o.fillArray(G$Q.defaultSizeGrid,G$T,Number)}),G$P(0,G$T,"measureWidth",function(){return this._bitmap.width}),G$P(0,G$T,"width",G$l.prototype._$get_width,function(G$T){G$t.superSet(G$v,this,"width",G$T),this._bitmap.width=0==G$T?1e-7:G$T}),G$P(0,G$T,"height",G$l.prototype._$get_height,function(G$T){G$t.superSet(G$v,this,"height",G$T),this._bitmap.height=0==G$T?1e-7:G$T}),G$w}(G$v),G$n=function(G$l){function G$w(G$T){this._tf=null,G$w.__super.call(this),void 0===G$T&&(G$T=""),G$M.defaultColor=G$Q.labelColor,this.text=G$T}G$D(G$w,"laya.ui.Label",G$l);var G$T=G$w.prototype;return G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._tf=null},G$T.createChildren=function(){this.addChild(this._tf=new G$c)},G$T.changeText=function(G$T){this._tf.changeText(G$T)},G$P(0,G$T,"padding",function(){return this._tf.padding.join(",")},function(G$T){this._tf.padding=G$o.fillArray(G$Q.labelPadding,G$T,Number)}),G$P(0,G$T,"bold",function(){return this._tf.bold},function(G$T){this._tf.bold=G$T}),G$P(0,G$T,"align",function(){return this._tf.align},function(G$T){this._tf.align=G$T}),G$P(0,G$T,"text",function(){return this._tf.text},function(G$T){this._tf.text!=G$T&&(G$T&&(G$T=G$o.adptString(G$T+"")),this._tf.text=G$T,this.event("change"),this._width&&this._height||this.onCompResize())}),G$P(0,G$T,"italic",function(){return this._tf.italic},function(G$T){this._tf.italic=G$T}),G$P(0,G$T,"wordWrap",function(){return this._tf.wordWrap},function(G$T){this._tf.wordWrap=G$T}),G$P(0,G$T,"font",function(){return this._tf.font},function(G$T){this._tf.font=G$T}),G$P(0,G$T,"dataSource",G$l.prototype._$get_dataSource,function(G$T){"number"==typeof(this._dataSource=G$T)||"string"==typeof G$T?this.text=G$T+"":G$t.superSet(G$v,this,"dataSource",G$T)}),G$P(0,G$T,"color",function(){return this._tf.color},function(G$T){this._tf.color=G$T}),G$P(0,G$T,"valign",function(){return this._tf.valign},function(G$T){this._tf.valign=G$T}),G$P(0,G$T,"leading",function(){return this._tf.leading},function(G$T){this._tf.leading=G$T}),G$P(0,G$T,"fontSize",function(){return this._tf.fontSize},function(G$T){this._tf.fontSize=G$T}),G$P(0,G$T,"bgColor",function(){return this._tf.bgColor},function(G$T){this._tf.bgColor=G$T}),G$P(0,G$T,"borderColor",function(){return this._tf.borderColor},function(G$T){this._tf.borderColor=G$T}),G$P(0,G$T,"stroke",function(){return this._tf.stroke},function(G$T){this._tf.stroke=G$T}),G$P(0,G$T,"strokeColor",function(){return this._tf.strokeColor},function(G$T){this._tf.strokeColor=G$T}),G$P(0,G$T,"textField",function(){return this._tf}),G$P(0,G$T,"measureWidth",function(){return this._tf.width}),G$P(0,G$T,"measureHeight",function(){return this._tf.height}),G$P(0,G$T,"width",function(){return this._width||this._tf.text?G$t.superGet(G$v,this,"width"):0},function(G$T){G$t.superSet(G$v,this,"width",G$T),this._tf.width=G$T}),G$P(0,G$T,"height",function(){return this._height||this._tf.text?G$t.superGet(G$v,this,"height"):0},function(G$T){G$t.superSet(G$v,this,"height",G$T),this._tf.height=G$T}),G$P(0,G$T,"overflow",function(){return this._tf.overflow},function(G$T){this._tf.overflow=G$T}),G$P(0,G$T,"underline",function(){return this._tf.underline},function(G$T){this._tf.underline=G$T}),G$P(0,G$T,"underlineColor",function(){return this._tf.underlineColor},function(G$T){this._tf.underlineColor=G$T}),G$w}(G$v),G$d=function(G$l){function G$w(G$T){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,G$w.__super.call(this),this.skin=G$T}G$D(G$w,"laya.ui.ProgressBar",G$l);var G$T=G$w.prototype;return G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._bg&&this._bg.destroy(G$T),this._bar&&this._bar.destroy(G$T),this._bg=this._bar=null,this.changeHandler=null},G$T.createChildren=function(){this.addChild(this._bg=new G$k),this.addChild(this._bar=new G$k)},G$T.changeValue=function(){if(this.sizeGrid){var G$T=this.sizeGrid.split(","),G$l=Number(G$T[3]),G$w=Number(G$T[1]),G$u=(this.width-G$l-G$w)*this._value;this._bar.width=G$l+G$w+G$u,this._bar.visible=this._bar.width>G$l+G$w}else this._bar.width=this.width*this._value},G$P(0,G$T,"measureHeight",function(){return this._bg.height}),G$P(0,G$T,"skin",function(){return this._skin},function(G$T){this._skin!=G$T&&(this._skin=G$T,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),G$P(0,G$T,"measureWidth",function(){return this._bg.width}),G$P(0,G$T,"height",G$l.prototype._$get_height,function(G$T){G$t.superSet(G$v,this,"height",G$T),this._bg.height=this._height,this._bar.height=this._height}),G$P(0,G$T,"bar",function(){return this._bar}),G$P(0,G$T,"value",function(){return this._value},function(G$T){this._value!=G$T&&(G$T=1<G$T?1:G$T<0?0:G$T,this._value=G$T,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(G$T))}),G$P(0,G$T,"bg",function(){return this._bg}),G$P(0,G$T,"sizeGrid",function(){return this._bg.sizeGrid},function(G$T){this._bg.sizeGrid=this._bar.sizeGrid=G$T}),G$P(0,G$T,"width",G$l.prototype._$get_width,function(G$T){G$t.superSet(G$v,this,"width",G$T),this._bg.width=this._width,this.callLater(this.changeValue)}),G$P(0,G$T,"dataSource",G$l.prototype._$get_dataSource,function(G$T){"number"==typeof(this._dataSource=G$T)||"string"==typeof G$T?this.value=Number(G$T):G$t.superSet(G$v,this,"dataSource",G$T)}),G$w}(G$v),G$G=(function(G$T){function G$w(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,G$w.__super.call(this),this._tipBox=new G$v,this._tipBox.addChild(this._tipText=new G$c),this._tipText.x=this._tipText.y=5,this._tipText.color=G$w.tipTextColor,this._defaultTipHandler=this._showDefaultTip,G$t.stage.on("showtip",this,this._onStageShowTip),G$t.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}G$D(G$w,"laya.ui.TipManager",G$v);var G$l=G$w.prototype;G$l._onStageHideTip=function(G$T){G$t.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},G$l._onStageShowTip=function(G$T){G$t.timer.once(G$w.tipDelay,this,this._showTip,[G$T],!0)},G$l._showTip=function(G$T){if("string"==typeof G$T){var G$l=String(G$T);Boolean(G$l)&&this._defaultTipHandler(G$l)}else G$T instanceof laya.utils.Handler?G$T.run():"function"==typeof G$T&&G$T.apply();G$t.stage.on("mousemove",this,this._onStageMouseMove),G$t.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},G$l._onStageMouseDown=function(G$T){this.closeAll()},G$l._onStageMouseMove=function(G$T){this._showToStage(this,G$w.offsetX,G$w.offsetY)},G$l._showToStage=function(G$T,G$l,G$w){void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0);var G$u=G$T.getBounds();G$T.x=G$t.stage.mouseX+G$l,G$T.y=G$t.stage.mouseY+G$w,G$T.x+G$u.width>G$t.stage.width&&(G$T.x-=G$u.width+G$l),G$T.y+G$u.height>G$t.stage.height&&(G$T.y-=G$u.height+G$w)},G$l.closeAll=function(){G$t.timer.clear(this,this._showTip),G$t.stage.off("mousemove",this,this._onStageMouseMove),G$t.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},G$l.showDislayTip=function(G$T){this.addChild(G$T),this._showToStage(this),G$t._currentStage.addChild(this)},G$l._showDefaultTip=function(G$T){this._tipText.text=G$T;var G$l=this._tipBox.graphics;G$l.clear(),G$l.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,G$w.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),G$t._currentStage.addChild(this)},G$P(0,G$l,"defaultTipHandler",function(){return this._defaultTipHandler},function(G$T){this._defaultTipHandler=G$T}),G$w.offsetX=10,G$w.offsetY=15,G$w.tipTextColor="#ffffff",G$w.tipBackColor="#111111",G$w.tipDelay=200}(),function(G$T){var G$K;function G$Y(){this._idMap=null,this._aniList=null,this._watchMap={},G$Y.__super.call(this)}G$D(G$Y,"laya.ui.View",G$R);var G$l=G$Y.prototype;return G$l.createView=function(G$T){if(G$T.animations&&!this._idMap&&(this._idMap={}),G$Y.createComp(G$T,this,this),G$T.animations){var G$l,G$w,G$u=[],G$p=G$T.animations,G$D=0,G$P=G$p.length;for(G$D=0;G$D<G$P;G$D++){switch(G$l=new G$z,G$w=G$p[G$D],G$l._setUp(this._idMap,G$w),(this[G$w.name]=G$l)._setControlNode(this),G$w.action){case 1:G$l.play(0,!1);break;case 2:G$l.play(0,!0)}G$u.push(G$l)}this._aniList=G$u}0<this._width&&null==G$T.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},G$l.onEvent=function(G$T,G$l){},G$l.loadUI=function(G$T){var G$l=G$Y.uiMap[G$T];G$l&&this.createView(G$l)},G$l.destroy=function(G$T){void 0===G$T&&(G$T=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,G$T)},G$l.changeData=function(G$T){var G$l=this._watchMap[G$T];if(G$l){console.log("change",G$T);for(var G$w=0,G$u=G$l.length;G$w<G$u;G$w++){G$l[G$w].exe(this)}}},G$Y._regs=function(){for(var G$T in G$Y.uiClassMap)G$A.regClass(G$T,G$Y.uiClassMap[G$T])},G$Y.createComp=function(G$T,G$l,G$w,G$u){if(!(G$l=G$l||G$Y.getCompInstance(G$T)))return console.warn("can not create:"+G$T.type),null;var G$p=G$T.child;if(G$p)for(var G$D=G$l instanceof laya.ui.List,G$P=0,G$j=G$p.length;G$P<G$j;G$P++){var G$J=G$p[G$P];if(!G$l.hasOwnProperty("itemRender")||"render"!=G$J.props.name&&"render"!==G$J.props.renderType)if("Graphic"==G$J.type)G$A.addGraphicsToSprite(G$J,G$l);else if(G$A.isDrawType(G$J.type))G$A.addGraphicToSprite(G$J,G$l,!0);else{if(G$D){var G$q=[],G$M=G$Y.createComp(G$J,null,G$w,G$q);G$q.length&&(G$M._$bindData=G$q)}else G$M=G$Y.createComp(G$J,null,G$w,G$u);"Script"==G$J.type?"owner"in G$M?G$M.owner=G$l:"target"in G$M&&(G$M.target=G$l):"mask"==G$J.props.renderType||"mask"==G$J.props.name?G$l.mask=G$M:G$M instanceof laya.display.Sprite&&G$l.addChild(G$M)}else G$l.itemRender=G$J}var G$z=G$T.props;for(var G$b in G$z){var G$K=G$z[G$b];G$Y.eventDic[G$b]?G$K&&G$w&&G$l.on(G$b,G$w,G$w.onEvent,[G$K]):G$Y.setCompValue(G$l,G$b,G$K,G$w,G$u)}return G$t.__typeof(G$l,"laya.ui.IItem")&&G$l.initItems(),G$T.compId&&G$w&&G$w._idMap&&(G$w._idMap[G$T.compId]=G$l),G$l},G$Y.setCompValue=function(G$T,G$l,G$w,G$u,G$p){if("string"==typeof G$w&&-1<G$w.indexOf("${")){if(G$Y._sheet||(G$Y._sheet=G$A.getClass("laya.data.Table")),!G$Y._sheet)return void console.warn("Can not find class Sheet");if(G$p)G$p.push(G$T,G$l,G$w);else if(G$u){-1==G$w.indexOf("].")&&(G$w=G$w.replace(".","[0]."));var G$D,G$P,G$j=new G$K(G$T,G$l,G$w);G$j.exe(G$u);for(var G$J=G$w.replace(/\[.*?\]\./g,".");null!=(G$D=G$Y._parseWatchData.exec(G$J));){for(var G$q=G$D[1];null!=(G$P=G$Y._parseKeyWord.exec(G$q));){var G$M=G$P[0],G$z=G$u._watchMap[G$M]||(G$u._watchMap[G$M]=[]);G$z.push(G$j),G$Y._sheet.I.notifer.on(G$M,G$u,G$u.changeData,[G$M])}(G$z=G$u._watchMap[G$q]||(G$u._watchMap[G$q]=[])).push(G$j),G$Y._sheet.I.notifer.on(G$q,G$u,G$u.changeData,[G$q])}}}else if("var"===G$l&&G$u)G$u[G$w]=G$T;else if("onClick"==G$l){var G$b=G$t._runScript("(function(){"+G$w+"})");G$T.on("click",G$u,G$b)}else G$T[G$l]="true"===G$w||"false"!==G$w&&G$w},G$Y.getCompInstance=function(G$T){var G$l,G$w=G$T.props?G$T.props.runtime:null;return G$l=G$w?G$Y.viewClassMap[G$w]||G$Y.uiClassMap[G$w]||G$t.__classmap[G$w]:G$Y.uiClassMap[G$T.type],G$T.props&&G$T.props.hasOwnProperty("renderType")&&"instance"==G$T.props.renderType?G$l.instance:G$l?new G$l:null},G$Y.regComponent=function(G$T,G$l){G$Y.uiClassMap[G$T]=G$l,G$A.regClass(G$T,G$l)},G$Y.regViewRuntime=function(G$T,G$l){G$Y.viewClassMap[G$T]=G$l},G$Y.uiMap={},G$Y.viewClassMap={},G$Y._sheet=null,G$u(G$Y,["uiClassMap",function(){return this.uiClassMap={ViewStack:G$TT,LinkButton:G$F,TextArea:G$qT,ColorPicker:G$$,Box:G$R,Button:G$F,CheckBox:G$N,Clip:G$O,ComboBox:G$Z,Component:G$v,HScrollBar:G$U,HSlider:G$V,Image:G$k,Label:G$n,List:G$f,Panel:G$E,ProgressBar:G$d,Radio:G$S,RadioGroup:G$jT,ScrollBar:G$H,Slider:G$X,Tab:G$JT,TextInput:G$wT,View:G$Y,VScrollBar:G$lT,VSlider:G$uT,Tree:G$_,HBox:G$DT,VBox:G$PT,Sprite:G$m,Animation:G$w,Text:G$c,FontClip:G$g}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),G$Y.__init$=function(){G$Y._regs(),G$K=function(){function G$T(G$T,G$l,G$w){this.comp=null,this.prop=null,this.value=null,this.comp=G$T,this.prop=G$l,this.value=G$w}return G$D(G$T,""),G$T.prototype.exe=function(G$T){var G$l=G$o.getBindFun(this.value);this.comp[this.prop]=G$l.call(this,G$T)},G$T}()},G$Y}()),G$N=function(G$T){function G$w(G$T,G$l){void 0===G$l&&(G$l=""),G$w.__super.call(this,G$T,G$l)}G$D(G$w,"laya.ui.CheckBox",G$T);var G$l=G$w.prototype;return G$l.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},G$l.initialize=function(){G$T.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},G$P(0,G$l,"dataSource",G$T.prototype._$get_dataSource,function(G$T){"boolean"==typeof(this._dataSource=G$T)?this.selected=G$T:"string"==typeof G$T?this.selected="true"===G$T:G$t.superSet(G$F,this,"dataSource",G$T)}),G$w}(G$F),G$h=function(G$T){function G$l(){this._space=0,this._align="none",this._itemChanged=!1,G$l.__super.call(this)}G$D(G$l,"laya.ui.LayoutBox",G$R);var G$w=G$l.prototype;return G$w.addChild=function(G$T){return G$T.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,G$T)},G$w.onResize=function(G$T){this._setItemChanged()},G$w.addChildAt=function(G$T,G$l){return G$T.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,G$T,G$l)},G$w.removeChild=function(G$T){return G$T.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,G$T)},G$w.removeChildAt=function(G$T){return this.getChildAt(G$T).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,G$T)},G$w.refresh=function(){this._setItemChanged()},G$w.changeItems=function(){this._itemChanged=!1},G$w.sortItem=function(G$T){G$T&&G$T.sort(function(G$T,G$l){return G$T.y-G$l.y})},G$w._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},G$P(0,G$w,"space",function(){return this._space},function(G$T){this._space=G$T,this._setItemChanged()}),G$P(0,G$w,"align",function(){return this._align},function(G$T){this._align=G$T,this._setItemChanged()}),G$l}(),G$g=function(G$l){function G$w(G$T,G$l){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,G$w.__super.call(this),G$T&&(this.skin=G$T),G$l&&(this.sheet=G$l)}G$D(G$w,"laya.ui.FontClip",G$l);var G$T=G$w.prototype;return G$T.createChildren=function(){this._bitmap=new G$y,this.on("loaded",this,this._onClipLoaded)},G$T._onClipLoaded=function(){this.callLater(this.changeValue)},G$T.changeValue=function(){var G$T;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),G$T=this._sources[0]))){var G$l="horizontal"===this._direction;G$l?(this._wordsW=this._valueArr.length*(G$T.sourceWidth+this.spaceX),this._wordsH=G$T.sourceHeight):(this._wordsW=G$T.sourceWidth,this._wordsH=(G$T.sourceHeight+this.spaceY)*this._valueArr.length);var G$w=0;if(this._width)switch(this._align){case"center":G$w=.5*(this._width-this._wordsW);break;case"right":G$w=this._width-this._wordsW;break;default:G$w=0}for(var G$u=0,G$p=this._valueArr.length;G$u<G$p;G$u++){var G$D=this._indexMap[this._valueArr.charAt(G$u)];this.sources[G$D]&&(G$T=this.sources[G$D],G$l?this.graphics.drawTexture(G$T,G$w+G$u*(G$T.sourceWidth+this.spaceX),0,G$T.sourceWidth,G$T.sourceHeight):this.graphics.drawTexture(G$T,0+G$w,G$u*(G$T.sourceHeight+this.spaceY),G$T.sourceWidth,G$T.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),G$l.prototype.destroy.call(this,G$T)},G$P(0,G$T,"sheet",function(){return this._sheet},function(G$T){G$T+="";var G$l=(this._sheet=G$T).split(" ");this._clipX=String(G$l[0]).length,this.clipY=G$l.length,this._indexMap={};for(var G$w=0;G$w<this._clipY;G$w++)for(var G$u=G$l[G$w].split(""),G$p=0,G$D=G$u.length;G$p<G$D;G$p++)this._indexMap[G$u[G$p]]=G$w*this._clipX+G$p}),G$P(0,G$T,"height",G$l.prototype._$get_height,function(G$T){G$t.superSet(G$O,this,"height",G$T),this.callLater(this.changeValue)}),G$P(0,G$T,"direction",function(){return this._direction},function(G$T){this._direction=G$T,this.callLater(this.changeValue)}),G$P(0,G$T,"value",function(){return this._valueArr?this._valueArr:""},function(G$T){G$T+="",this._valueArr=G$T,this.callLater(this.changeValue)}),G$P(0,G$T,"width",G$l.prototype._$get_width,function(G$T){G$t.superSet(G$O,this,"width",G$T),this.callLater(this.changeValue)}),G$P(0,G$T,"spaceX",function(){return this._spaceX},function(G$T){this._spaceX=G$T,"horizontal"===this._direction&&this.callLater(this.changeValue)}),G$P(0,G$T,"spaceY",function(){return this._spaceY},function(G$T){this._spaceY=G$T,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),G$P(0,G$T,"align",function(){return this._align},function(G$T){this._align=G$T,this.callLater(this.changeValue)}),G$P(0,G$T,"measureWidth",function(){return this._wordsW}),G$P(0,G$T,"measureHeight",function(){return this._wordsH}),G$w}(G$O),G$f=function(G$T){function G$l(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new G$Y,G$l.__super.call(this)}G$D(G$l,"laya.ui.List",G$T);var G$w=G$l.prototype;return G$t.imps(G$w,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),G$w.destroy=function(G$T){void 0===G$T&&(G$T=!0),this._content&&this._content.destroy(G$T),this._scrollBar&&this._scrollBar.destroy(G$T),laya.ui.Component.prototype.destroy.call(this,G$T),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},G$w.createChildren=function(){this.addChild(this._content=new G$R)},G$w.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=G$t.superGet(G$R,this,"cacheAs")),G$t.superSet(G$R,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},G$w.onScrollEnd=function(){G$t.superSet(G$R,this,"cacheAs",this._$P.cacheAs)},G$w._removePreScrollBar=function(){var G$T=this.removeChildByName("scrollBar");G$T&&G$T.destroy(!0)},G$w.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var G$T=this._getOneCell(),G$l=G$T.width+this._spaceX||1,G$w=G$T.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/G$l):Math.ceil(this._width/G$l)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/G$w):Math.round(this._height/G$w));var G$u=this._width?this._width:G$l*this.repeatX-this._spaceX,G$p=this._height?this._height:G$w*this.repeatY-this._spaceY;this._cellSize=this._isVertical?G$w:G$l,this._cellOffset=this._isVertical?G$w*Math.max(this._repeatY2,this._repeatY)-G$p-this._spaceY:G$l*Math.max(this._repeatX2,this._repeatX)-G$u-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=G$p:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=G$u),this.setContentSize(G$u,G$p);var G$D=this._isVertical?this.repeatX:this.repeatY,G$P=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,G$D,G$P),this._createdLine=G$P,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},G$w._getOneCell=function(){if(0===this._cells.length){var G$T=this.createItem();if(this._offset.setTo(G$T.x,G$T.y),this.cacheContent)return G$T;this._cells.push(G$T)}return this._cells[0]},G$w._createItems=function(G$T,G$l,G$w){var G$u=this._content,G$p=this._getOneCell(),G$D=G$p.width+this._spaceX,G$P=G$p.height+this._spaceY;if(this.cacheContent){var G$j=new G$R;G$j.cacheAsBitmap=!0,G$j.pos((this._isVertical?0:G$T)*G$D,(this._isVertical?G$T:0)*G$P),this._content.addChild(G$j),this._content.optimizeScrollRect=!0,G$u=G$j}else{for(var G$J=[],G$q=this._cells.length-1;-1<G$q;G$q--){var G$M=this._cells[G$q];G$M.removeSelf(),G$J.push(G$M)}this._cells.length=0}for(var G$z=G$T;G$z<G$w;G$z++)for(var G$b=0;G$b<G$l;G$b++)(G$p=G$J&&G$J.length?G$J.pop():this.createItem()).x=(this._isVertical?G$b:G$z)*G$D-G$u.x,G$p.y=(this._isVertical?G$z:G$b)*G$P-G$u.y,G$p.name="item"+(G$z*G$l+G$b),G$u.addChild(G$p),this.addCell(G$p)},G$w.createItem=function(){var G$T=[];if("function"==typeof this._itemRender)var G$l=new this._itemRender;else G$l=G$G.createComp(this._itemRender,null,null,G$T);if(0==G$T.length&&G$l._watchMap){var G$w=G$l._watchMap;for(var G$u in G$w)for(var G$p=G$w[G$u],G$D=0;G$D<G$p.length;G$D++){var G$P=G$p[G$D];G$T.push(G$P.comp,G$P.prop,G$P.value)}}return G$T.length&&(G$l._$bindData=G$T),G$l},G$w.addCell=function(G$T){G$T.on("click",this,this.onCellMouse),G$T.on("rightclick",this,this.onCellMouse),G$T.on("mouseover",this,this.onCellMouse),G$T.on("mouseout",this,this.onCellMouse),G$T.on("mousedown",this,this.onCellMouse),G$T.on("mouseup",this,this.onCellMouse),this._cells.push(G$T)},G$w.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var G$T=0,G$l=G$T=0;G$l<1e4;G$l++){var G$w=this.getChildByName("item"+G$l);if(!G$w)break;this.addCell(G$w),G$T++}this.repeatY=G$T}},G$w.setContentSize=function(G$T,G$l){this._content.width=G$T,this._content.height=G$l,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new G$L),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,G$T,G$l),this._content.scrollRect=this._content.scrollRect),this.event("resize")},G$w.onCellMouse=function(G$T){"mousedown"===G$T.type&&(this._isMoved=!1);var G$l=G$T.currentTarget,G$w=this._startIndex+this._cells.indexOf(G$l);G$w<0||("click"===G$T.type||"rightclick"===G$T.type?this.selectEnable&&!this._isMoved?this.selectedIndex=G$w:this.changeCellState(G$l,!0,0):"mouseover"!==G$T.type&&"mouseout"!==G$T.type||this._selectedIndex===G$w||this.changeCellState(G$l,"mouseover"===G$T.type,0),this.mouseHandler&&this.mouseHandler.runWith([G$T,G$w]))},G$w.changeCellState=function(G$T,G$l,G$w){var G$u=G$T.getChildByName("selectBox");G$u&&(this.selectEnable=!0,G$u.visible=G$l,G$u.index=G$w)},G$w.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},G$w.onScrollBarChange=function(G$T){this.runCallLater(this.changeCells);var G$l=this._scrollBar.value,G$w=this._isVertical?this.repeatX:this.repeatY,G$u=this._isVertical?this.repeatY:this.repeatX,G$p=Math.floor(G$l/this._cellSize);if(this.cacheContent)G$P=G$u+1,this._createdLine-G$p<G$P&&(this._createItems(this._createdLine,G$w,this._createdLine+G$P),this.renderItems(this._createdLine*G$w,0),this._createdLine+=G$P);else{var G$D=G$p*G$w,G$P=0;if(G$D>this._startIndex){G$P=G$D-this._startIndex;var G$j=!0,G$J=this._startIndex+G$w*(G$u+1);this._isMoved=!0}else G$D<this._startIndex&&(G$P=this._startIndex-G$D,G$j=!1,G$J=this._startIndex-1,this._isMoved=!0);for(var G$q=0;G$q<G$P;G$q++){if(G$j){var G$M=this._cells.shift();this._cells[this._cells.length]=G$M;var G$z=G$J+G$q}else G$M=this._cells.pop(),this._cells.unshift(G$M),G$z=G$J-G$q;var G$b=Math.floor(G$z/G$w)*this._cellSize;this._isVertical?G$M.y=G$b:G$M.x=G$b,this.renderItem(G$M,G$z)}this._startIndex=G$D,this.changeSelectStatus()}var G$K=this._content.scrollRect;this._isVertical?(G$K.y=G$l-this._offset.y,G$K.x=-this._offset.x):(G$K.y=-this._offset.y,G$K.x=G$l-this._offset.x),this._content.scrollRect=G$K},G$w.posCell=function(G$T,G$l){if(this._scrollBar){var G$w=this._isVertical?this.repeatX:this.repeatY,G$u=(this._isVertical?this.repeatY:this.repeatX,Math.floor(G$l/G$w)*this._cellSize);this._isVertical?G$T.y=G$u:G$T.x=G$u}},G$w.changeSelectStatus=function(){for(var G$T=0,G$l=this._cells.length;G$T<G$l;G$T++)this.changeCellState(this._cells[G$T],this._selectedIndex===this._startIndex+G$T,1)},G$w.renderItems=function(G$T,G$l){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0);for(var G$w=G$T,G$u=G$l||this._cells.length;G$w<G$u;G$w++)this.renderItem(this._cells[G$w],this._startIndex+G$w);this.changeSelectStatus()},G$w.renderItem=function(G$T,G$l){this._array&&0<=G$l&&G$l<this._array.length?(G$T.visible=!0,G$T._$bindData?(G$T._dataSource=this._array[G$l],this._bindData(G$T,this._array[G$l])):G$T.dataSource=this._array[G$l],this.cacheContent||this.posCell(G$T,G$l),this.hasListener("render")&&this.event("render",[G$T,G$l]),this.renderHandler&&this.renderHandler.runWith([G$T,G$l])):(G$T.visible=!1,G$T.dataSource=null)},G$w._bindData=function(G$T,G$l){for(var G$w=G$T._$bindData,G$u=0,G$p=G$w.length;G$u<G$p;G$u++){var G$D=G$w[G$u++],G$P=G$w[G$u++],G$j=G$w[G$u],G$J=G$o.getBindFun(G$j);G$D[G$P]=G$J.call(this,G$l)}},G$w.refresh=function(){this.array=this._array},G$w.getItem=function(G$T){return-1<G$T&&G$T<this._array.length?this._array[G$T]:null},G$w.changeItem=function(G$T,G$l){-1<G$T&&G$T<this._array.length&&(this._array[G$T]=G$l,G$T>=this._startIndex&&G$T<this._startIndex+this._cells.length&&this.renderItem(this.getCell(G$T),G$T))},G$w.setItem=function(G$T,G$l){this.changeItem(G$T,G$l)},G$w.addItem=function(G$T){this._array.push(G$T),this.array=this._array},G$w.addItemAt=function(G$T,G$l){this._array.splice(G$l,0,G$T),this.array=this._array},G$w.deleteItem=function(G$T){this._array.splice(G$T,1),this.array=this._array},G$w.getCell=function(G$T){return this.runCallLater(this.changeCells),-1<G$T&&this._cells?this._cells[(G$T-this._startIndex)%this._cells.length]:null},G$w.scrollTo=function(G$T){if(this._scrollBar){var G$l=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(G$T/G$l)*this._cellSize}else this.startIndex=G$T},G$w.tweenTo=function(G$T,G$l,G$w){if(void 0===G$l&&(G$l=200),this._scrollBar){var G$u=this._isVertical?this.repeatX:this.repeatY;G$B.to(this._scrollBar,{value:Math.floor(G$T/G$u)*this._cellSize},G$l,null,G$w,0,!0)}else this.startIndex=G$T,G$w&&G$w.run()},G$w._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},G$w.commitMeasure=function(){this.runCallLater(this.changeCells)},G$P(0,G$w,"cacheAs",G$T.prototype._$get_cacheAs,function(G$T){G$t.superSet(G$R,this,"cacheAs",G$T),this._scrollBar&&(this._$P.cacheAs=null,"none"!==G$T?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),G$P(0,G$w,"content",function(){return this._content}),G$P(0,G$w,"height",G$T.prototype._$get_height,function(G$T){G$T!=this._height&&(G$t.superSet(G$R,this,"height",G$T),this._setCellChanged())}),G$P(0,G$w,"itemRender",function(){return this._itemRender},function(G$T){if(this._itemRender!=G$T){this._itemRender=G$T;for(var G$l=this._cells.length-1;-1<G$l;G$l--)this._cells[G$l].destroy();this._cells.length=0,this._setCellChanged()}}),G$P(0,G$w,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(G$T){this._removePreScrollBar();var G$l=new G$lT;G$l.name="scrollBar",G$l.right=0,G$T&&" "!=G$T&&(G$l.skin=G$T),this.scrollBar=G$l,this.addChild(G$l),this._setCellChanged()}),G$P(0,G$w,"page",function(){return this._page},function(G$T){this._page=G$T,this._array&&(this._page=0<G$T?G$T:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),G$P(0,G$w,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(G$T){this._removePreScrollBar();var G$l=new G$U;G$l.name="scrollBar",G$l.bottom=0,G$T&&" "!=G$T&&(G$l.skin=G$T),this.scrollBar=G$l,this.addChild(G$l),this._setCellChanged()}),G$P(0,G$w,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(G$T){this._repeatX=G$T,this._setCellChanged()}),G$P(0,G$w,"scrollBar",function(){return this._scrollBar},function(G$T){this._scrollBar!=G$T&&(this._scrollBar=G$T)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),G$P(0,G$w,"width",G$T.prototype._$get_width,function(G$T){G$T!=this._width&&(G$t.superSet(G$R,this,"width",G$T),this._setCellChanged())}),G$P(0,G$w,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(G$T){this._repeatY=G$T,this._setCellChanged()}),G$P(0,G$w,"spaceX",function(){return this._spaceX},function(G$T){this._spaceX=G$T,this._setCellChanged()}),G$P(0,G$w,"spaceY",function(){return this._spaceY},function(G$T){this._spaceY=G$T,this._setCellChanged()}),G$P(0,G$w,"selectedIndex",function(){return this._selectedIndex},function(G$T){this._selectedIndex!=G$T&&(this._selectedIndex=G$T,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(G$T),this.startIndex=this._startIndex)}),G$P(0,G$w,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(G$T){this.selectedIndex=this._array.indexOf(G$T)}),G$P(0,G$w,"length",function(){return this._array?this._array.length:0}),G$P(0,G$w,"selection",function(){return this.getCell(this._selectedIndex)},function(G$T){this.selectedIndex=this._startIndex+this._cells.indexOf(G$T)}),G$P(0,G$w,"startIndex",function(){return this._startIndex},function(G$T){this._startIndex=0<G$T?G$T:0,this.callLater(this.renderItems)}),G$P(0,G$w,"array",function(){return this._array},function(G$T){this.runCallLater(this.changeCells),this._array=G$T||[];var G$l=this._array.length;if(this.totalPage=Math.ceil(G$l/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<G$l?this._selectedIndex:G$l-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var G$w=this._isVertical?this.repeatX:this.repeatY,G$u=this._isVertical?this.repeatY:this.repeatX,G$p=Math.ceil(G$l/G$w);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=G$u/G$p,this._scrollBar.setScroll(0,(G$p-G$u)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),G$P(0,G$w,"dataSource",G$T.prototype._$get_dataSource,function(G$T){"number"==typeof(this._dataSource=G$T)&&Math.floor(G$T)==G$T||"string"==typeof G$T?this.selectedIndex=parseInt(G$T):G$T instanceof Array?this.array=G$T:G$t.superSet(G$R,this,"dataSource",G$T)}),G$P(0,G$w,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),G$l}(G$R),G$U=function(G$T){function G$l(){G$l.__super.call(this)}return G$D(G$l,"laya.ui.HScrollBar",G$T),G$l.prototype.initialize=function(){G$T.prototype.initialize.call(this),this.slider.isVertical=!1},G$l}(G$H),G$E=function(G$T){function G$l(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,G$l.__super.call(this),this.width=this.height=100}G$D(G$l,"laya.ui.Panel",G$T);var G$w=G$l.prototype;return G$w.destroy=function(G$T){void 0===G$T&&(G$T=!0),laya.ui.Component.prototype.destroy.call(this,G$T),this._content&&this._content.destroy(G$T),this._vScrollBar&&this._vScrollBar.destroy(G$T),this._hScrollBar&&this._hScrollBar.destroy(G$T),this._vScrollBar=null,this._hScrollBar=null,this._content=null},G$w.destroyChildren=function(){this._content.destroyChildren()},G$w.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new G$R)},G$w.addChild=function(G$T){return G$T.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(G$T)},G$w.onResize=function(){this._setScrollChanged()},G$w.addChildAt=function(G$T,G$l){return G$T.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(G$T,G$l)},G$w.removeChild=function(G$T){return G$T.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(G$T)},G$w.removeChildAt=function(G$T){return this.getChildAt(G$T).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(G$T)},G$w.removeChildren=function(G$T,G$l){return void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=2147483647),this._content.removeChildren(G$T,G$l),this._setScrollChanged(),this},G$w.getChildAt=function(G$T){return this._content.getChildAt(G$T)},G$w.getChildByName=function(G$T){return this._content.getChildByName(G$T)},G$w.getChildIndex=function(G$T){return this._content.getChildIndex(G$T)},G$w.changeScroll=function(){this._scrollChanged=!1;var G$T=this.contentWidth||1,G$l=this.contentHeight||1,G$w=this._vScrollBar,G$u=this._hScrollBar,G$p=G$w&&G$l>this._height,G$D=G$u&&G$T>this._width,G$P=G$p?this._width-G$w.width:this._width,G$j=G$D?this._height-G$u.height:this._height;G$w&&(G$w.x=this._width-G$w.width,G$w.y=0,G$w.height=this._height-(G$D?G$u.height:0),G$w.scrollSize=Math.max(.033*this._height,1),G$w.thumbPercent=G$j/G$l,G$w.setScroll(0,G$l-G$j,G$w.value)),G$u&&(G$u.x=0,G$u.y=this._height-G$u.height,G$u.width=this._width-(G$p?G$w.width:0),G$u.scrollSize=Math.max(.033*this._width,1),G$u.thumbPercent=G$P/G$T,G$u.setScroll(0,G$T-G$P,G$u.value))},G$w.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},G$w.setContentSize=function(G$T,G$l){var G$w=this._content;G$w.width=G$T,G$w.height=G$l,G$w.scrollRect||(G$w.scrollRect=new G$L),G$w.scrollRect.setTo(0,0,G$T,G$l),G$w.scrollRect=G$w.scrollRect},G$w.onScrollBarChange=function(G$T){var G$l=this._content.scrollRect;if(G$l){var G$w=Math.round(G$T.value);G$T.isVertical?G$l.y=G$w:G$l.x=G$w,this._content.scrollRect=G$l}},G$w.scrollTo=function(G$T,G$l){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),this.vScrollBar&&(this.vScrollBar.value=G$l),this.hScrollBar&&(this.hScrollBar.value=G$T)},G$w.refresh=function(){this.changeScroll()},G$w.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=G$t.superGet(G$R,this,"cacheAs")),G$t.superSet(G$R,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},G$w.onScrollEnd=function(){G$t.superSet(G$R,this,"cacheAs",this._$P.cacheAs)},G$w._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},G$P(0,G$w,"numChildren",function(){return this._content.numChildren}),G$P(0,G$w,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(G$T){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new G$U),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=G$T}),G$P(0,G$w,"contentWidth",function(){for(var G$T=0,G$l=this._content.numChildren-1;-1<G$l;G$l--){var G$w=this._content.getChildAt(G$l);G$T=Math.max(G$w.x+G$w.width*G$w.scaleX,G$T)}return G$T}),G$P(0,G$w,"contentHeight",function(){for(var G$T=0,G$l=this._content.numChildren-1;-1<G$l;G$l--){var G$w=this._content.getChildAt(G$l);G$T=Math.max(G$w.y+G$w.height*G$w.scaleY,G$T)}return G$T}),G$P(0,G$w,"width",G$T.prototype._$get_width,function(G$T){G$t.superSet(G$R,this,"width",G$T),this._setScrollChanged()}),G$P(0,G$w,"hScrollBar",function(){return this._hScrollBar}),G$P(0,G$w,"content",function(){return this._content}),G$P(0,G$w,"height",G$T.prototype._$get_height,function(G$T){G$t.superSet(G$R,this,"height",G$T),this._setScrollChanged()}),G$P(0,G$w,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(G$T){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new G$lT),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=G$T}),G$P(0,G$w,"vScrollBar",function(){return this._vScrollBar}),G$P(0,G$w,"cacheAs",G$T.prototype._$get_cacheAs,function(G$T){G$t.superSet(G$R,this,"cacheAs",G$T),this._$P.cacheAs=null,"none"!==G$T?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),G$l}(G$R),G$V=function(G$T){function G$l(G$T){G$l.__super.call(this,G$T),this.isVertical=!1}return G$D(G$l,"laya.ui.HSlider",G$X),G$l}(),G$C=function(G$T){function G$w(G$T,G$l){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,G$w.__super.call(this),this.skin=G$l,this.labels=G$T}G$D(G$w,"laya.ui.UIGroup",G$T);var G$l=G$w.prototype;return G$t.imps(G$l,{"laya.ui.IItem":!0}),G$l.preinitialize=function(){this.mouseEnabled=!0},G$l.destroy=function(G$T){void 0===G$T&&(G$T=!0),laya.ui.Component.prototype.destroy.call(this,G$T),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},G$l.addItem=function(G$T,G$l){void 0===G$l&&(G$l=!0);var G$w=G$T,G$u=this._items.length;if(G$w.name="item"+G$u,this.addChild(G$w),this.initItems(),G$l&&0<G$u){var G$p=this._items[G$u-1];"horizontal"==this._direction?G$w.x=G$p.x+G$p.width+this._space:G$w.y=G$p.y+G$p.height+this._space}else G$l&&(G$w.x=0,G$w.y=0);return G$u},G$l.delItem=function(G$T,G$l){void 0===G$l&&(G$l=!0);var G$w=this._items.indexOf(G$T);if(-1!=G$w){var G$u=G$T;this.removeChild(G$u);for(var G$p=G$w+1,G$D=this._items.length;G$p<G$D;G$p++){var G$P=this._items[G$p];G$P.name="item"+(G$p-1),G$l&&("horizontal"==this._direction?G$P.x-=G$u.width+this._space:G$P.y-=G$u.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var G$j;G$j=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=G$j}}},G$l.initItems=function(){this._items||(this._items=[]);for(var G$T=this._items.length=0;G$T<1e4;G$T++){var G$l=this.getChildByName("item"+G$T);if(null==G$l)break;this._items.push(G$l),G$l.selected=G$T===this._selectedIndex,G$l.clickHandler=G$b.create(this,this.itemClick,[G$T],!1)}},G$l.itemClick=function(G$T){this.selectedIndex=G$T},G$l.setSelect=function(G$T,G$l){this._items&&-1<G$T&&G$T<this._items.length&&(this._items[G$T].selected=G$l)},G$l.createItem=function(G$T,G$l){return null},G$l.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var G$T=0,G$l=0,G$w=this._items.length;G$l<G$w;G$l++){var G$u=this._items[G$l];this._skin&&(G$u.skin=this._skin),this._labelColors&&(G$u.labelColors=this._labelColors),this._labelSize&&(G$u.labelSize=this._labelSize),this._labelStroke&&(G$u.labelStroke=this._labelStroke),this._labelStrokeColor&&(G$u.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(G$u.strokeColors=this._strokeColors),this._labelBold&&(G$u.labelBold=this._labelBold),this._labelPadding&&(G$u.labelPadding=this._labelPadding),this._labelAlign&&(G$u.labelAlign=this._labelAlign),this._stateNum&&(G$u.stateNum=this._stateNum),this._labelFont&&(G$u.labelFont=this._labelFont),"horizontal"===this._direction?(G$u.y=0,G$u.x=G$T,G$T+=G$u.width+this._space):(G$u.x=0,G$u.y=G$T,G$T+=G$u.height+this._space)}this.changeSize()},G$l.commitMeasure=function(){this.runCallLater(this.changeLabels)},G$l._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},G$P(0,G$l,"labelStrokeColor",function(){return this._labelStrokeColor},function(G$T){this._labelStrokeColor!=G$T&&(this._labelStrokeColor=G$T,this._setLabelChanged())}),G$P(0,G$l,"skin",function(){return this._skin},function(G$T){this._skin!=G$T&&(this._skin=G$T,this._setLabelChanged())}),G$P(0,G$l,"selectedIndex",function(){return this._selectedIndex},function(G$T){this._selectedIndex!=G$T&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=G$T,this.setSelect(G$T,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),G$P(0,G$l,"labels",function(){return this._labels},function(G$T){if(this._labels!=G$T){if(this._labels=G$T,this.removeChildren(),this._setLabelChanged(),this._labels)for(var G$l=this._labels.split(","),G$w=0,G$u=G$l.length;G$w<G$u;G$w++){var G$p=this.createItem(this._skin,G$l[G$w]);G$p.name="item"+G$w,this.addChild(G$p)}this.initItems()}}),G$P(0,G$l,"strokeColors",function(){return this._strokeColors},function(G$T){this._strokeColors!=G$T&&(this._strokeColors=G$T,this._setLabelChanged())}),G$P(0,G$l,"labelColors",function(){return this._labelColors},function(G$T){this._labelColors!=G$T&&(this._labelColors=G$T,this._setLabelChanged())}),G$P(0,G$l,"labelStroke",function(){return this._labelStroke},function(G$T){this._labelStroke!=G$T&&(this._labelStroke=G$T,this._setLabelChanged())}),G$P(0,G$l,"labelSize",function(){return this._labelSize},function(G$T){this._labelSize!=G$T&&(this._labelSize=G$T,this._setLabelChanged())}),G$P(0,G$l,"stateNum",function(){return this._stateNum},function(G$T){this._stateNum!=G$T&&(this._stateNum=G$T,this._setLabelChanged())}),G$P(0,G$l,"labelBold",function(){return this._labelBold},function(G$T){this._labelBold!=G$T&&(this._labelBold=G$T,this._setLabelChanged())}),G$P(0,G$l,"labelFont",function(){return this._labelFont},function(G$T){this._labelFont!=G$T&&(this._labelFont=G$T,this._setLabelChanged())}),G$P(0,G$l,"labelPadding",function(){return this._labelPadding},function(G$T){this._labelPadding!=G$T&&(this._labelPadding=G$T,this._setLabelChanged())}),G$P(0,G$l,"direction",function(){return this._direction},function(G$T){this._direction=G$T,this._setLabelChanged()}),G$P(0,G$l,"space",function(){return this._space},function(G$T){this._space=G$T,this._setLabelChanged()}),G$P(0,G$l,"items",function(){return this._items}),G$P(0,G$l,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(G$T){this.selectedIndex=this._items.indexOf(G$T)}),G$P(0,G$l,"dataSource",G$T.prototype._$get_dataSource,function(G$T){"number"==typeof(this._dataSource=G$T)&&Math.floor(G$T)==G$T||"string"==typeof G$T?this.selectedIndex=parseInt(G$T):G$T instanceof Array?this.labels=G$T.join(","):G$t.superSet(G$R,this,"dataSource",G$T)}),G$w}(G$R),G$S=function(G$l){function G$w(G$T,G$l){this._value=null,void 0===G$l&&(G$l=""),G$w.__super.call(this,G$T,G$l)}G$D(G$w,"laya.ui.Radio",G$l);var G$T=G$w.prototype;return G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._value=null},G$T.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},G$T.initialize=function(){G$l.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},G$T.onClick=function(G$T){this.selected=!0},G$P(0,G$T,"value",function(){return null!=this._value?this._value:this.label},function(G$T){this._value=G$T}),G$w}(G$F),G$_=function(G$T){function G$l(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,G$l.__super.call(this),this.width=this.height=200}G$D(G$l,"laya.ui.Tree",G$T);var G$w=G$l.prototype;return G$t.imps(G$w,{"laya.ui.IRender":!0}),G$w.destroy=function(G$T){void 0===G$T&&(G$T=!0),laya.ui.Component.prototype.destroy.call(this,G$T),this._list&&this._list.destroy(G$T),this._list=null,this._source=null,this._renderHandler=null},G$w.createChildren=function(){this.addChild(this._list=new G$f),this._list.renderHandler=G$b.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},G$w.onListChange=function(G$T){this.event("change")},G$w.getArray=function(){var G$T,G$l=[];for(var G$w in this._source)G$T=this._source[G$w],this.getParentOpenStatus(G$T)&&(G$T.x=this._spaceLeft*this.getDepth(G$T),G$l.push(G$T));return G$l},G$w.getDepth=function(G$T,G$l){return void 0===G$l&&(G$l=0),null==G$T.nodeParent?G$l:this.getDepth(G$T.nodeParent,G$l+1)},G$w.getParentOpenStatus=function(G$T){var G$l=G$T.nodeParent;return null==G$l||!!G$l.isOpen&&(null==G$l.nodeParent||this.getParentOpenStatus(G$l))},G$w.renderItem=function(G$T,G$l){var G$w=G$T.dataSource;if(G$w){G$T.left=G$w.x;var G$u=G$T.getChildByName("arrow");G$u&&(G$w.hasChild?(G$u.visible=!0,G$u.index=G$w.isOpen?1:0,G$u.tag=G$l,G$u.off("click",this,this.onArrowClick),G$u.on("click",this,this.onArrowClick)):G$u.visible=!1);var G$p=G$T.getChildByName("folder");G$p&&(2==G$p.clipY?G$p.index=G$w.isDirectory?0:1:G$p.index=G$w.isDirectory?G$w.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([G$T,G$l])}},G$w.onArrowClick=function(G$T){var G$l=G$T.currentTarget.tag;this._list.array[G$l].isOpen=!this._list.array[G$l].isOpen,this.event("open"),this._list.array=this.getArray()},G$w.setItemState=function(G$T,G$l){this._list.array[G$T]&&(this._list.array[G$T].isOpen=G$l,this._list.array=this.getArray())},G$w.fresh=function(){this._list.array=this.getArray(),this.repaint()},G$w.parseXml=function(G$T,G$l,G$w,G$u){var G$p,G$D=G$T.childNodes,G$P=G$D.length;if(!G$u){G$p={};var G$j,G$J=G$T.attributes;for(var G$q in G$J){var G$M=(G$j=G$J[G$q]).nodeName,G$z=G$j.nodeValue;G$p[G$M]="true"==G$z||"false"!=G$z&&G$z}G$p.nodeParent=G$w,0<G$P&&(G$p.isDirectory=!0),G$p.hasChild=0<G$P,G$l.push(G$p)}for(var G$b=0;G$b<G$P;G$b++){var G$K=G$D[G$b];this.parseXml(G$K,G$l,G$p,!1)}},G$w.parseOpenStatus=function(G$T,G$l){for(var G$w=0,G$u=G$l.length;G$w<G$u;G$w++){var G$p=G$l[G$w];if(G$p.isDirectory)for(var G$D=0,G$P=G$T.length;G$D<G$P;G$D++){var G$j=G$T[G$D];if(G$j.isDirectory&&this.isSameParent(G$j,G$p)&&G$p.label==G$j.label){G$p.isOpen=G$j.isOpen;break}}}},G$w.isSameParent=function(G$T,G$l){return null==G$T.nodeParent&&null==G$l.nodeParent||null!=G$T.nodeParent&&null!=G$l.nodeParent&&(G$T.nodeParent.label==G$l.nodeParent.label&&this.isSameParent(G$T.nodeParent,G$l.nodeParent))},G$w.filter=function(G$T){if(Boolean(G$T)){var G$l=[];this.getFilterSource(this._source,G$l,G$T),this._list.array=G$l}else this._list.array=this.getArray()},G$w.getFilterSource=function(G$T,G$l,G$w){var G$u;for(var G$p in G$w=G$w.toLocaleLowerCase(),G$T)!(G$u=G$T[G$p]).isDirectory&&-1<String(G$u.label).toLowerCase().indexOf(G$w)&&(G$u.x=0,G$l.push(G$u)),G$u.child&&0<G$u.child.length&&this.getFilterSource(G$u.child,G$l,G$w)},G$P(0,G$w,"spaceBottom",function(){return this._list.spaceY},function(G$T){this._list.spaceY=G$T}),G$P(0,G$w,"keepStatus",function(){return this._keepStatus},function(G$T){this._keepStatus=G$T}),G$P(0,G$w,"itemRender",function(){return this._list.itemRender},function(G$T){this._list.itemRender=G$T}),G$P(0,G$w,"array",function(){return this._list.array},function(G$T){this._keepStatus&&this._list.array&&G$T&&this.parseOpenStatus(this._list.array,G$T),this._source=G$T,this._list.array=this.getArray()}),G$P(0,G$w,"mouseHandler",function(){return this._list.mouseHandler},function(G$T){this._list.mouseHandler=G$T}),G$P(0,G$w,"dataSource",G$T.prototype._$get_dataSource,function(G$T){this._dataSource=G$T,G$t.superSet(G$R,this,"dataSource",G$T)}),G$P(0,G$w,"source",function(){return this._source}),G$P(0,G$w,"scrollBar",function(){return this._list.scrollBar}),G$P(0,G$w,"list",function(){return this._list}),G$P(0,G$w,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(G$T){this._list.vScrollBarSkin=G$T}),G$P(0,G$w,"renderHandler",function(){return this._renderHandler},function(G$T){this._renderHandler=G$T}),G$P(0,G$w,"selectedIndex",function(){return this._list.selectedIndex},function(G$T){this._list.selectedIndex=G$T}),G$P(0,G$w,"spaceLeft",function(){return this._spaceLeft},function(G$T){this._spaceLeft=G$T}),G$P(0,G$w,"selectedItem",function(){return this._list.selectedItem},function(G$T){this._list.selectedItem=G$T}),G$P(0,G$w,"width",G$T.prototype._$get_width,function(G$T){G$t.superSet(G$R,this,"width",G$T),this._list.width=G$T}),G$P(0,G$w,"height",G$T.prototype._$get_height,function(G$T){G$t.superSet(G$R,this,"height",G$T),this._list.height=G$T}),G$P(0,G$w,"xml",null,function(G$T){var G$l=[];this.parseXml(G$T.childNodes[0],G$l,null,!0),this.array=G$l}),G$P(0,G$w,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),G$l}(G$R),G$TT=function(G$T){function G$l(){this._items=null,this._selectedIndex=0,G$l.__super.call(this),this._setIndexHandler=G$b.create(this,this.setIndex,null,!1)}G$D(G$l,"laya.ui.ViewStack",G$T);var G$w=G$l.prototype;return G$t.imps(G$w,{"laya.ui.IItem":!0}),G$w.setItems=function(G$T){this.removeChildren();for(var G$l=0,G$w=0,G$u=G$T.length;G$w<G$u;G$w++){var G$p=G$T[G$w];G$p&&(G$p.name="item"+G$l,this.addChild(G$p),G$l++)}this.initItems()},G$w.addItem=function(G$T){G$T.name="item"+this._items.length,this.addChild(G$T),this.initItems()},G$w.initItems=function(){this._items=[];for(var G$T=0;G$T<1e4;G$T++){var G$l=this.getChildByName("item"+G$T);if(null==G$l)break;this._items.push(G$l),G$l.visible=G$T==this._selectedIndex}},G$w.setSelect=function(G$T,G$l){this._items&&-1<G$T&&G$T<this._items.length&&(this._items[G$T].visible=G$l)},G$w.setIndex=function(G$T){this.selectedIndex=G$T},G$P(0,G$w,"dataSource",G$T.prototype._$get_dataSource,function(G$T){if("number"==typeof(this._dataSource=G$T)&&Math.floor(G$T)==G$T||"string"==typeof G$T)this.selectedIndex=parseInt(G$T);else for(var G$l in this._dataSource)this.hasOwnProperty(G$l)&&(this[G$l]=this._dataSource[G$l])}),G$P(0,G$w,"selectedIndex",function(){return this._selectedIndex},function(G$T){this._selectedIndex!=G$T&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=G$T,this.setSelect(this._selectedIndex,!0))}),G$P(0,G$w,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(G$T){this.selectedIndex=this._items.indexOf(G$T)}),G$P(0,G$w,"items",function(){return this._items}),G$P(0,G$w,"setIndexHandler",function(){return this._setIndexHandler},function(G$T){this._setIndexHandler=G$T}),G$l}(G$R),G$lT=function(G$T){function G$l(){G$l.__super.call(this)}return G$D(G$l,"laya.ui.VScrollBar",G$H),G$l}(),G$wT=function(G$l){function G$w(G$T){this._bg=null,this._skin=null,G$w.__super.call(this),void 0===G$T&&(G$T=""),this.text=G$T,this.skin=this.skin}G$D(G$w,"laya.ui.TextInput",G$l);var G$T=G$w.prototype;return G$T.preinitialize=function(){this.mouseEnabled=!0},G$T.destroy=function(G$T){G$i.clearCache(this,this._skin),void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._bg&&this._bg.destroy(),this._bg=null},G$T.createChildren=function(){this.addChild(this._tf=new G$K),this._tf.padding=G$Q.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},G$T._onFocus=function(){this.event("focus",this)},G$T._onBlur=function(){this.event("blur",this)},G$T._onInput=function(){this.event("input",this)},G$T._onEnter=function(){this.event("enter",this)},G$T.initialize=function(){this.width=128,this.height=22},G$T.select=function(){this._tf.select()},G$T.setSelection=function(G$T,G$l){this._tf.setSelection(G$T,G$l)},G$P(0,G$T,"text",G$l.prototype._$get_text,function(G$T){this._tf.text!=G$T&&(G$T+="",this._tf.text=G$T,this.event("change"))}),G$P(0,G$T,"bg",function(){return this._bg},function(G$T){this.graphics=this._bg=G$T}),G$P(0,G$T,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(G$T){this._tf.inputElementYAdjuster=G$T}),G$P(0,G$T,"multiline",function(){return this._tf.multiline},function(G$T){this._tf.multiline=G$T}),G$P(0,G$T,"skin",function(){return this._skin},function(G$T){this._skin!=G$T&&(G$i.clearCache(this,this._skin),this._skin=G$T,this._bg||(this.graphics=this._bg=new G$y),G$i.keepCache(this,this._skin),this._bg.source=G$i.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),G$P(0,G$T,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(G$T){this._bg||(this.graphics=this._bg=new G$y),this._bg.sizeGrid=G$o.fillArray(G$Q.defaultSizeGrid,G$T,Number)}),G$P(0,G$T,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(G$T){this._tf.inputElementXAdjuster=G$T}),G$P(0,G$T,"width",G$l.prototype._$get_width,function(G$T){G$t.superSet(G$n,this,"width",G$T),this._bg&&(this._bg.width=G$T)}),G$P(0,G$T,"height",G$l.prototype._$get_height,function(G$T){G$t.superSet(G$n,this,"height",G$T),this._bg&&(this._bg.height=G$T)}),G$P(0,G$T,"editable",function(){return this._tf.editable},function(G$T){this._tf.editable=G$T}),G$P(0,G$T,"restrict",function(){return this._tf.restrict},function(G$T){this._tf.restrict=G$T}),G$P(0,G$T,"prompt",function(){return this._tf.prompt},function(G$T){this._tf.prompt=G$T}),G$P(0,G$T,"promptColor",function(){return this._tf.promptColor},function(G$T){this._tf.promptColor=G$T}),G$P(0,G$T,"maxChars",function(){return this._tf.maxChars},function(G$T){this._tf.maxChars=G$T}),G$P(0,G$T,"focus",function(){return this._tf.focus},function(G$T){this._tf.focus=G$T}),G$P(0,G$T,"type",function(){return this._tf.type},function(G$T){this._tf.type=G$T}),G$P(0,G$T,"asPassword",function(){return this._tf.asPassword},function(G$T){this._tf.asPassword=G$T}),G$w}(G$n),G$uT=function(G$T){function G$l(){G$l.__super.call(this)}return G$D(G$l,"laya.ui.VSlider",G$X),G$l}(),G$pT=function(G$T){function G$u(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,G$u.__super.call(this)}G$D(G$u,"laya.ui.Dialog",G$T);var G$l=G$u.prototype;return G$l.initialize=function(){this.popupEffect=G$u.manager.popupEffectHandler,this.closeEffect=G$u.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},G$l._dealDragArea=function(){var G$T=this.getChildByName("drag");G$T&&(this.dragArea=G$T.x+","+G$T.y+","+G$T.width+","+G$T.height,G$T.removeSelf())},G$l._onClick=function(G$T){var G$l=G$T.target;if(G$l)switch(G$l.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(G$l.name)}},G$l.show=function(G$T,G$l){void 0===G$T&&(G$T=!1),void 0===G$l&&(G$l=!0),this._open(!1,G$T,G$l)},G$l.popup=function(G$T,G$l){void 0===G$T&&(G$T=!1),void 0===G$l&&(G$l=!0),this._open(!0,G$T,G$l)},G$l._open=function(G$T,G$l,G$w){G$u.manager.lock(!1),this.isModal=G$T,G$u.manager.open(this,G$l,G$w)},G$l.onOpened=function(){},G$l.close=function(G$T,G$l){void 0===G$l&&(G$l=!0),G$u.manager.close(this,G$T,G$l)},G$l.onClosed=function(G$T){},G$l._onMouseDown=function(G$T){var G$l=this.getMousePoint();this._dragArea.contains(G$l.x,G$l.y)?this.startDrag():this.stopDrag()},G$P(0,G$l,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(G$T){if(G$T){var G$l=G$o.fillArray([0,0,0,0],G$T,Number);this._dragArea=new G$L(G$l[0],G$l[1],G$l[2],G$l[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),G$P(0,G$l,"isPopup",function(){return null!=this.parent}),G$P(0,G$l,"zOrder",G$T.prototype._$get_zOrder,function(G$T){G$t.superSet(G$G,this,"zOrder",G$T),G$u.manager._checkMask()}),G$P(1,G$u,"manager",function(){return G$u._manager=G$u._manager||new G$x},function(G$T){G$u._manager=G$T}),G$u.setLockView=function(G$T){G$u.manager.setLockView(G$T)},G$u.lock=function(G$T){G$u.manager.lock(G$T)},G$u.closeAll=function(){G$u.manager.closeAll()},G$u.getDialogsByGroup=function(G$T){return G$u.manager.getDialogsByGroup(G$T)},G$u.closeByGroup=function(G$T){return G$u.manager.closeByGroup(G$T)},G$u.CLOSE="close",G$u.CANCEL="cancel",G$u.SURE="sure",G$u.NO="no",G$u.OK="ok",G$u.YES="yes",G$u._manager=null,G$u}(G$G),G$DT=function(G$T){function G$l(){G$l.__super.call(this)}G$D(G$l,"laya.ui.HBox",G$T);var G$w=G$l.prototype;return G$w.sortItem=function(G$T){G$T&&G$T.sort(function(G$T,G$l){return G$T.x-G$l.x})},G$w.changeItems=function(){this._itemChanged=!1;for(var G$T=[],G$l=0,G$w=0,G$u=this.numChildren;G$w<G$u;G$w++){var G$p=this.getChildAt(G$w);G$p&&G$p.layoutEnabled&&(G$T.push(G$p),G$l=this._height?this._height:Math.max(G$l,G$p.height*G$p.scaleY))}this.sortItem(G$T);var G$D=0;for(G$w=0,G$u=G$T.length;G$w<G$u;G$w++)(G$p=G$T[G$w]).x=G$D,G$D+=G$p.width*G$p.scaleX+this._space,"top"==this._align?G$p.y=0:"middle"==this._align?G$p.y=.5*(G$l-G$p.height*G$p.scaleY):"bottom"==this._align&&(G$p.y=G$l-G$p.height*G$p.scaleY);this.changeSize()},G$P(0,G$w,"height",G$T.prototype._$get_height,function(G$T){this._height!=G$T&&(G$t.superSet(G$h,this,"height",G$T),this.callLater(this.changeItems))}),G$l.NONE="none",G$l.TOP="top",G$l.MIDDLE="middle",G$l.BOTTOM="bottom",G$l}(G$h),G$PT=function(G$T){function G$l(){G$l.__super.call(this)}G$D(G$l,"laya.ui.VBox",G$T);var G$w=G$l.prototype;return G$w.changeItems=function(){this._itemChanged=!1;for(var G$T=[],G$l=0,G$w=0,G$u=this.numChildren;G$w<G$u;G$w++){var G$p=this.getChildAt(G$w);G$p&&G$p.layoutEnabled&&(G$T.push(G$p),G$l=this._width?this._width:Math.max(G$l,G$p.width*G$p.scaleX))}this.sortItem(G$T);var G$D=0;for(G$w=0,G$u=G$T.length;G$w<G$u;G$w++)(G$p=G$T[G$w]).y=G$D,G$D+=G$p.height*G$p.scaleY+this._space,"left"==this._align?G$p.x=0:"center"==this._align?G$p.x=.5*(G$l-G$p.width*G$p.scaleX):"right"==this._align&&(G$p.x=G$l-G$p.width*G$p.scaleX);this.changeSize()},G$P(0,G$w,"width",G$T.prototype._$get_width,function(G$T){this._width!=G$T&&(G$t.superSet(G$h,this,"width",G$T),this.callLater(this.changeItems))}),G$l.NONE="none",G$l.LEFT="left",G$l.CENTER="center",G$l.RIGHT="right",G$l}(G$h),G$jT=function(G$T){function G$l(){G$l.__super.call(this)}return G$D(G$l,"laya.ui.RadioGroup",G$C),G$l.prototype.createItem=function(G$T,G$l){return new G$S(G$T,G$l)},G$l}(),G$JT=function(G$T){function G$l(){G$l.__super.call(this)}return G$D(G$l,"laya.ui.Tab",G$C),G$l.prototype.createItem=function(G$T,G$l){return new G$F(G$T,G$l)},G$l}(),G$qT=function(G$l){function G$w(G$T){this._vScrollBar=null,this._hScrollBar=null,void 0===G$T&&(G$T=""),G$w.__super.call(this,G$T)}G$D(G$w,"laya.ui.TextArea",G$l);var G$T=G$w.prototype;return G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},G$T.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},G$T.onVBarChanged=function(G$T){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},G$T.onHBarChanged=function(G$T){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},G$T.changeScroll=function(){var G$T=this._vScrollBar&&0<this._tf.maxScrollY,G$l=this._hScrollBar&&0<this._tf.maxScrollX,G$w=G$T?this._width-this._vScrollBar.width:this._width,G$u=G$l?this._height-this._hScrollBar.height:this._height,G$p=this._tf.padding||G$Q.labelPadding;this._tf.width=G$w,this._tf.height=G$u,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-G$p[2],this._vScrollBar.y=G$p[1],this._vScrollBar.height=this._height-(G$l?this._hScrollBar.height:0)-G$p[1]-G$p[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=G$u/Math.max(this._tf.textHeight,G$u),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=G$T),this._hScrollBar&&(this._hScrollBar.x=G$p[0],this._hScrollBar.y=this._height-this._hScrollBar.height-G$p[3],this._hScrollBar.width=this._width-(G$T?this._vScrollBar.width:0)-G$p[0]-G$p[2],this._hScrollBar.scrollSize=Math.max(.033*G$w,1),this._hScrollBar.thumbPercent=G$w/Math.max(this._tf.textWidth,G$w),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=G$l)},G$T.scrollTo=function(G$T){this.commitMeasure(),this._tf.scrollY=G$T},G$P(0,G$T,"scrollY",function(){return this._tf.scrollY}),G$P(0,G$T,"width",G$l.prototype._$get_width,function(G$T){G$t.superSet(G$wT,this,"width",G$T),this.callLater(this.changeScroll)}),G$P(0,G$T,"hScrollBar",function(){return this._hScrollBar}),G$P(0,G$T,"height",G$l.prototype._$get_height,function(G$T){G$t.superSet(G$wT,this,"height",G$T),this.callLater(this.changeScroll)}),G$P(0,G$T,"maxScrollX",function(){return this._tf.maxScrollX}),G$P(0,G$T,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(G$T){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new G$lT),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=G$T}),G$P(0,G$T,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(G$T){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new G$U),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=G$T}),G$P(0,G$T,"vScrollBar",function(){return this._vScrollBar}),G$P(0,G$T,"maxScrollY",function(){return this._tf.maxScrollY}),G$P(0,G$T,"scrollX",function(){return this._tf.scrollX}),G$w}(G$wT);!function(G$T){function G$l(){this._uiView=null,this.isCloseOther=!1,G$l.__super.call(this)}G$D(G$l,"laya.ui.AsynDialog",G$pT);var G$w=G$l.prototype;G$w.createView=function(G$T){this._uiView=G$T},G$w._open=function(G$T,G$l,G$w){this.isModal=G$T,this.isCloseOther=G$l,G$pT.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},G$w.onCreated=function(){this.createUI(),this.onOpen()},G$w.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},G$w.onOpen=function(){G$pT.manager.open(this,this.isCloseOther),G$pT.manager.lock(!1)},G$w.close=function(G$T,G$l){void 0===G$l&&(G$l=!0),G$pT.manager.close(this),this.onClose()},G$w.onClose=function(){},G$w.destroy=function(G$T){void 0===G$T&&(G$T=!0),laya.ui.View.prototype.destroy.call(this,G$T),this._uiView=null,this.onDestroy()},G$w.onDestroy=function(){}}();G$t.__init([G$G])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$T,G$l){"use strict";for(var G$w in Object.defineProperty(G$l,"__esModule",{value:!0}),Laya){var G$u=Laya[G$w];G$u&&G$u.__isclass&&(G$l[G$w]=G$u)}}),function(G$b,G$T,G$c){G$c.un,G$c.uns;var G$z=G$c.static,G$K=G$c.class,G$Y=G$c.getset,G$u=G$c.__newvec,G$m=laya.maths.Arith,G$P=laya.webgl.atlas.AtlasResourceManager,G$w=laya.webgl.shader.BaseShader,G$v=laya.utils.Browser,G$j=laya.webgl.utils.Buffer,G$a=laya.utils.Byte,G$p=laya.utils.ClassUtils,G$J=G$c.Config,G$D=(laya.events.Event,laya.events.EventDispatcher),G$Q=laya.utils.Handler,G$L=laya.net.Loader,G$l=laya.net.LoaderManager,G$q=(laya.maths.MathUtil,laya.display.Node),G$t=laya.renders.Render,G$M=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),G$A=laya.resource.Resource,G$i=laya.utils.RunDriver,G$W=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),G$B=laya.display.Sprite,G$s=laya.utils.Stat,G$r=laya.utils.StringKey,G$o=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),G$I=laya.utils.Utils,G$e=laya.webgl.WebGL,G$y=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;G$c.interface("laya.d3.core.IClone"),G$c.interface("laya.d3.graphics.IVertex"),G$c.interface("laya.d3.core.render.IUpdate"),G$c.interface("laya.d3.core.scene.ITreeNode"),G$c.interface("laya.d3.core.render.IRenderable");(function(){function G$F(){}G$K(G$F,"laya.d3.animation.AnimationClipParser01"),G$F.READ_DATA=function(){G$F._DATA.offset=G$F._reader.getUint32(),G$F._DATA.size=G$F._reader.getUint32()},G$F.READ_BLOCK=function(){for(var G$T=G$F._BLOCK.count=G$F._reader.getUint16(),G$l=G$F._BLOCK.blockStarts=[],G$w=G$F._BLOCK.blockLengths=[],G$u=0;G$u<G$T;G$u++)G$l.push(G$F._reader.getUint32()),G$w.push(G$F._reader.getUint32())},G$F.READ_STRINGS=function(){var G$T=G$F._reader.getUint32(),G$l=G$F._reader.getUint16(),G$w=G$F._reader.pos;G$F._reader.pos=G$T+G$F._DATA.offset;for(var G$u=0;G$u<G$l;G$u++)G$F._strings[G$u]=G$F._reader.readUTFString();G$F._reader.pos=G$w},G$F.parse=function(G$T,G$l){G$F._animationClip=G$T;(G$F._reader=G$l).__getBuffer();G$F.READ_DATA(),G$F.READ_BLOCK(),G$F.READ_STRINGS();for(var G$w=0,G$u=G$F._BLOCK.count;G$w<G$u;G$w++){var G$p=G$l.getUint16(),G$D=G$F._strings[G$p],G$P=G$F["READ_"+G$D];if(null==G$P)throw new Error("model file err,no this function:"+G$p+" "+G$D);G$P.call()}},G$F.READ_ANIMATIONS=function(){var G$T,G$l=0,G$w=0,G$u=G$F._reader,G$p=G$u.__getBuffer(),G$D=[],G$P=G$u.getUint8();for(G$D.length=G$P,G$l=0;G$l<G$P;G$l++)G$D[G$l]=G$u.getUint16();var G$j=[],G$J=G$u.getUint16();for(G$j.length=G$J,G$l=0;G$l<G$J;G$l++)G$j[G$l]=G$u.getFloat32();var G$q=G$F._animationClip;G$q.name=G$F._strings[G$u.getUint16()];var G$M=G$q._duration=G$u.getFloat32();G$q.islooping=!!G$u.getByte(),G$q._frameRate=G$u.getInt16();var G$z=G$u.getInt16(),G$b=G$q._nodes=new Array;G$b.length=G$z,(G$q._publicClipDatas=[]).length=G$z;var G$K=G$q._nodesMap={},G$Y=0,G$t=0;for(G$l=0;G$l<G$z;G$l++){G$T=G$b[G$l]=new G$d;var G$A=G$u.getUint16(),G$L=G$T.path=[];for(G$L.length=G$A,G$w=0;G$w<G$A;G$w++)G$L[G$w]=G$F._strings[G$u.getUint16()];var G$i=G$L.join("/"),G$W=G$K[G$i];G$W||(G$K[G$i]=G$W=[]),G$W.push(G$T);var G$m=G$u.getInt16();-1!==G$m&&(G$T.componentType=G$F._strings[G$m]);var G$c=G$k._propertyIndexDic[G$F._strings[G$u.getUint16()]];if(null==G$c)throw new Error("AnimationClipParser01:unknown property name.");var G$a=G$c<4,G$B=!G$a||G$a&&""===G$L[0];(G$T._cacheProperty=G$B)?G$Y++:G$t++,G$T.propertyNameID=G$c;var G$s=G$D[G$u.getUint8()];G$T.keyFrameWidth=G$s/4;var G$r=G$T.keyFrames=[],G$I=G$r.length=G$u.getUint16(),G$Q=null,G$o=NaN;for(G$w=0;G$w<G$I;G$w++){var G$e=G$r[G$w]=new G$n;G$o=G$e.startTime=G$j[G$u.getUint16()];var G$y=G$u.pos;G$e.inTangent=new Float32Array(G$p.slice(G$y,G$y+G$s)),G$u.pos+=G$s,G$y=G$u.pos,G$e.outTangent=new Float32Array(G$p.slice(G$y,G$y+G$s)),G$u.pos+=G$s,G$y=G$u.pos,G$e.data=new Float32Array(G$p.slice(G$y,G$y+G$s)),G$u.pos+=G$s,G$Q&&(G$Q.next=G$e,G$Q.duration=G$o-G$Q.startTime),G$Q=G$e}G$e.next=null,G$e.duration=G$M-G$o}var G$v=G$q._nodeToCachePropertyMap=new Int32Array(G$z),G$x=G$q._cachePropertyMap=new Int32Array(G$Y),G$R=G$q._unCachePropertyMap=new Int32Array(G$t);for(G$Y=G$t=0,G$l=0;G$l<G$z;G$l++)(G$T=G$b[G$l])._cacheProperty?(G$v[G$l]=G$Y,G$x[G$Y++]=G$l):G$R[G$t++]=G$l},G$F._animationClip=null,G$F._reader=null,G$F._strings=[],G$z(G$F,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function G$H(){}G$K(G$H,"laya.d3.animation.AnimationClipParser02"),G$H.READ_DATA=function(){G$H._DATA.offset=G$H._reader.getUint32(),G$H._DATA.size=G$H._reader.getUint32()},G$H.READ_BLOCK=function(){for(var G$T=G$H._BLOCK.count=G$H._reader.getUint16(),G$l=G$H._BLOCK.blockStarts=[],G$w=G$H._BLOCK.blockLengths=[],G$u=0;G$u<G$T;G$u++)G$l.push(G$H._reader.getUint32()),G$w.push(G$H._reader.getUint32())},G$H.READ_STRINGS=function(){var G$T=G$H._reader.getUint32(),G$l=G$H._reader.getUint16(),G$w=G$H._reader.pos;G$H._reader.pos=G$T+G$H._DATA.offset;for(var G$u=0;G$u<G$l;G$u++)G$H._strings[G$u]=G$H._reader.readUTFString();G$H._reader.pos=G$w},G$H.parse=function(G$T,G$l){G$H._animationClip=G$T;(G$H._reader=G$l).__getBuffer();G$H.READ_DATA(),G$H.READ_BLOCK(),G$H.READ_STRINGS();for(var G$w=0,G$u=G$H._BLOCK.count;G$w<G$u;G$w++){var G$p=G$l.getUint16(),G$D=G$H._strings[G$p],G$P=G$H["READ_"+G$D];if(null==G$P)throw new Error("model file err,no this function:"+G$p+" "+G$D);G$P.call()}},G$H.READ_ANIMATIONS=function(){var G$T,G$l=0,G$w=0,G$u=G$H._reader,G$p=G$u.__getBuffer(),G$D=[],G$P=G$u.getUint8();for(G$D.length=G$P,G$l=0;G$l<G$P;G$l++)G$D[G$l]=G$u.getUint16();var G$j=[],G$J=G$u.getUint16();for(G$j.length=G$J,G$l=0;G$l<G$J;G$l++)G$j[G$l]=G$u.getFloat32();var G$q=G$H._animationClip;G$q.name=G$H._strings[G$u.getUint16()];var G$M=G$q._duration=G$u.getFloat32();G$q.islooping=!!G$u.getByte(),G$q._frameRate=G$u.getInt16();var G$z=G$u.getInt16(),G$b=G$q._nodes=new Array;G$b.length=G$z,(G$q._publicClipDatas=[]).length=G$z;var G$K=G$q._nodesMap={},G$Y=0,G$t=0;for(G$l=0;G$l<G$z;G$l++){G$T=G$b[G$l]=new G$d;var G$A=G$u.getUint16(),G$L=G$T.path=[];for(G$L.length=G$A,G$w=0;G$w<G$A;G$w++)G$L[G$w]=G$H._strings[G$u.getUint16()];var G$i=G$L.join("/"),G$W=G$K[G$i];G$W||(G$K[G$i]=G$W=[]),G$W.push(G$T);var G$m=G$u.getInt16();-1!==G$m&&(G$T.componentType=G$H._strings[G$m]);var G$c=G$k._propertyIndexDic[G$H._strings[G$u.getUint16()]];if(null==G$c)throw new Error("AnimationClipParser02:unknown property name.");var G$a=G$c<4,G$B=!G$a||G$a&&""===G$L[0];(G$T._cacheProperty=G$B)?G$Y++:G$t++,G$T.propertyNameID=G$c;var G$s=G$D[G$u.getUint8()];G$T.keyFrameWidth=G$s/4;var G$r=G$T.keyFrames=[],G$I=G$r.length=G$u.getUint16(),G$Q=null,G$o=NaN;for(G$w=0;G$w<G$I;G$w++){var G$e=G$r[G$w]=new G$n;G$o=G$e.startTime=G$j[G$u.getUint16()];var G$y=G$u.pos;G$e.inTangent=new Float32Array(G$p.slice(G$y,G$y+G$s)),G$u.pos+=G$s,G$y=G$u.pos,G$e.outTangent=new Float32Array(G$p.slice(G$y,G$y+G$s)),G$u.pos+=G$s,G$y=G$u.pos,G$e.data=new Float32Array(G$p.slice(G$y,G$y+G$s)),G$u.pos+=G$s,G$Q&&(G$Q.next=G$e,G$Q.duration=G$o-G$Q.startTime),G$Q=G$e}G$e.next=null,G$e.duration=G$M-G$o}var G$v=G$u.getUint16();for(G$l=0;G$l<G$v;G$l++){var G$x,G$R=new G$X;G$R.time=G$u.getFloat32(),G$R.eventName=G$H._strings[G$u.getUint16()];var G$F=G$u.getUint16();for(0<G$F&&(G$R.params=G$x=[]),G$w=0;G$w<G$F;G$w++){switch(G$u.getByte()){case 0:G$x.push(!!G$u.getByte());break;case 1:G$x.push(G$u.getInt32());break;case 2:G$x.push(G$u.getFloat32());break;case 3:G$x.push(G$H._strings[G$u.getUint16()]);break;default:throw new Error("unknown type.")}}G$q.addEvent(G$R)}var G$O=G$q._nodeToCachePropertyMap=new Int32Array(G$z),G$$=G$q._cachePropertyMap=new Int32Array(G$Y),G$Z=G$q._unCachePropertyMap=new Int32Array(G$t);for(G$Y=G$t=0,G$l=0;G$l<G$z;G$l++)(G$T=G$b[G$l])._cacheProperty?(G$O[G$l]=G$Y,G$$[G$Y++]=G$l):G$Z[G$t++]=G$l},G$H._animationClip=null,G$H._reader=null,G$H._strings=[],G$z(G$H,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var G$X=function(){function G$T(){this.time=NaN,this.eventName=null,this.params=null}return G$K(G$T,"laya.d3.animation.AnimationEvent"),G$T}(),G$k=function(){function G$u(){this._childs=[],this.transform=new G$il(this)}G$K(G$u,"laya.d3.animation.AnimationNode");var G$T=G$u.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.addChild=function(G$T){G$T._parent=this,G$T.transform.setParent(this.transform),this._childs.push(G$T)},G$T.removeChild=function(G$T){var G$l=this._childs.indexOf(G$T);-1!==G$l&&this._childs.splice(G$l,1)},G$T.getChildByName=function(G$T){for(var G$l=0,G$w=this._childs.length;G$l<G$w;G$l++){var G$u=this._childs[G$l];if(G$u.name===G$T)return G$u}return null},G$T.getChildByIndex=function(G$T){return this._childs[G$T]},G$T.getChildCount=function(){return this._childs.length},G$T.cloneTo=function(G$T){var G$l=G$T;G$l.name=this.name;for(var G$w=0,G$u=this._childs.length;G$w<G$u;G$w++){var G$p=this._childs[G$w],G$D=G$p.clone();G$l.addChild(G$D);var G$P=G$p.transform,G$j=G$D.transform;G$j.setLocalPosition(G$P.getLocalPosition()),G$j.setLocalRotation(G$P.getLocalRotation()),G$j.setLocalScale(G$P.getLocalScale()),G$j._localRotationEuler=G$P._localRotationEuler,G$j._setWorldMatrixIgnoreUpdate(G$P.getWorldMatrix())}},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$u.__init__=function(){G$u.registerAnimationNodeProperty("localPosition",G$u._getLocalPosition,G$u._setLocalPosition),G$u.registerAnimationNodeProperty("localRotation",G$u._getLocalRotation,G$u._setLocalRotation),G$u.registerAnimationNodeProperty("localScale",G$u._getLocalScale,G$u._setLocalScale),G$u.registerAnimationNodeProperty("localRotationEuler",G$u._getLocalRotationEuler,G$u._setLocalRotationEuler),G$u.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",G$u._getParticleRenderSharedMaterialTintColor,G$u._setParticleRenderSharedMaterialTintColor),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",G$u._getMeshRenderSharedMaterialTilingOffset,G$u._setMeshRenderSharedMaterialTilingOffset),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",G$u._getMeshRenderSharedMaterialAlbedo,G$u._setMeshRenderSharedMaterialAlbedo),G$u.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",G$u._getSkinnedMeshRenderSharedMaterialTilingOffset,G$u._setSkinnedMeshRenderSharedMaterialTilingOffset),G$u.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",G$u._getSkinnedMeshRenderSharedMaterialAlbedo,G$u._setSkinnedMeshRenderSharedMaterialAlbedo),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",G$u._getMeshRenderSharedMaterialAlbedo,G$u._setMeshRenderSharedMaterialAlbedo),G$u.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",G$u._getSkinnedMeshRenderSharedMaterialAlbedo,G$u._setSkinnedMeshRenderSharedMaterialAlbedo),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",G$u._getMeshRenderSharedMaterialIntensity,G$u._setMeshRenderSharedMaterialIntensity),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",G$u._getMeshRenderSharedMaterialAlpha,G$u._setMeshRenderSharedMaterialAlpha),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",G$u._getMeshRenderSharedMaterialAlphaColor,G$u._setMeshRenderSharedMaterialAlphaColor),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",G$u._getMeshRenderSharedMaterialBaseColor,G$u._setMeshRenderSharedMaterialBaseColor),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",G$u._getMeshRenderSharedMaterialDissolve,G$u._setMeshRenderSharedMaterialDissolve),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",G$u._getMeshRenderSharedMaterialDissolveSpeed,G$u._setMeshRenderSharedMaterialDissolveSpeed),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",G$u._getMeshRenderSharedMaterialMMultiplier,G$u._setMeshRenderSharedMaterialMMultiplier),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",G$u._getMeshRenderSharedMaterialBaseScrollSpeedX,G$u._setMeshRenderSharedMaterialBaseScrollSpeedX),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",G$u._getMeshRenderSharedMaterialBaseScrollSpeedY,G$u._setMeshRenderSharedMaterialBaseScrollSpeedY),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",G$u._getMeshRenderSharedMaterialSecondScrollSpeedX,G$u._setMeshRenderSharedMaterialSecondScrollSpeedX),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",G$u._getMeshRenderSharedMaterialSecondScrollSpeedY,G$u._setMeshRenderSharedMaterialSecondScrollSpeedY),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",G$u._getMeshRenderSharedMaterialDetailTilingOffset,G$u._setMeshRenderSharedMaterialDetailTilingOffset),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",G$u._getMeshRenderSharedMaterialDissolveTilingOffset,G$u._setMeshRenderSharedMaterialDissolveTilingOffset),G$u.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",G$u._getMeshRenderSharedMaterialMaskTilingOffset,G$u._setMeshRenderSharedMaterialMaskTilingOffset)},G$u.registerAnimationNodeProperty=function(G$T,G$l,G$w){if(G$u._propertyIndexDic[G$T])throw new Error("AnimationNode: this propertyName has registered.");G$u._propertyIndexDic[G$T]=G$u._propertyIDCounter,G$u._propertyGetFuncs[G$u._propertyIDCounter]=G$l,G$u._propertySetFuncs[G$u._propertyIDCounter]=G$w,G$u._propertyIDCounter++},G$u._getLocalPosition=function(G$T,G$l){return G$T?G$T.transform.getLocalPosition():G$l._transform.localPosition.elements},G$u._setLocalPosition=function(G$T,G$l,G$w){if(G$T)G$T.transform.setLocalPosition(G$w);else{var G$u=G$l._transform,G$p=G$u.localPosition;G$p.elements=G$w,G$u.localPosition=G$p}},G$u._getLocalRotation=function(G$T,G$l){return G$T?G$T.transform.getLocalRotation():G$l._transform.localRotation.elements},G$u._setLocalRotation=function(G$T,G$l,G$w){if(G$T)G$T.transform.setLocalRotation(G$w);else{var G$u=G$l._transform,G$p=G$u.localRotation;G$p.elements=G$w,G$u.localRotation=G$p}},G$u._getLocalScale=function(G$T,G$l){return G$T?G$T.transform.getLocalScale():G$l._transform.localScale.elements},G$u._setLocalScale=function(G$T,G$l,G$w){if(G$T)G$T.transform.setLocalScale(G$w);else{var G$u=G$l._transform,G$p=G$u.localScale;G$p.elements=G$w,G$u.localScale=G$p}},G$u._getLocalRotationEuler=function(G$T,G$l){return G$T?G$T.transform.getLocalRotationEuler():G$l._transform.localRotationEuler.elements},G$u._setLocalRotationEuler=function(G$T,G$l,G$w){if(G$T)G$T.transform.setLocalRotationEuler(G$w);else{var G$u=G$l._transform,G$p=G$u.localRotationEuler;G$p.elements=G$w,G$u.localRotationEuler=G$p}},G$u._getMeshRenderSharedMaterialTilingOffset=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return G$l.meshRender.sharedMaterial.tilingOffset.elements},G$u._setMeshRenderSharedMaterialTilingOffset=function(G$T,G$l,G$w){var G$u,G$p;if(G$T){var G$D=G$T.transform._entity;G$D&&((G$p=(G$u=G$D.owner.meshRender.material).tilingOffset).elements=G$w,G$u.tilingOffset=G$p)}else(G$p=(G$u=G$l.meshRender.material).tilingOffset).elements=G$w,G$u.tilingOffset=G$p},G$u._getMeshRenderSharedMaterialAlbedo=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.albedoColor.elements:null}return G$l.meshRender.sharedMaterial.albedoColor.elements},G$u._setMeshRenderSharedMaterialAlbedo=function(G$T,G$l,G$w){var G$u,G$p;if(G$T){var G$D=G$T.transform._entity;G$D&&((G$p=(G$u=G$D.owner.meshRender.material).albedoColor).elements=G$w,G$u.albedoColor=G$p)}else(G$p=(G$u=G$l.meshRender.material).albedoColor).elements=G$w,G$u.albedoColor=G$p},G$u._getSkinnedMeshRenderSharedMaterialTilingOffset=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return G$l.skinnedMeshRender.sharedMaterial.tilingOffset.elements},G$u._setSkinnedMeshRenderSharedMaterialTilingOffset=function(G$T,G$l,G$w){var G$u,G$p;if(G$T){var G$D=G$T.transform._entity;G$D&&((G$p=(G$u=G$D.owner.skinnedMeshRender.material).tilingOffset).elements=G$w,G$u.tilingOffset=G$p)}else(G$p=(G$u=G$l.skinnedMeshRender.material).tilingOffset).elements=G$w,G$u.tilingOffset=G$p},G$u._getSkinnedMeshRenderSharedMaterialAlbedo=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return G$l.skinnedMeshRender.sharedMaterial.albedoColor.elements},G$u._setSkinnedMeshRenderSharedMaterialAlbedo=function(G$T,G$l,G$w){var G$u,G$p;if(G$T){var G$D=G$T.transform._entity;G$D&&((G$p=(G$u=G$D.owner.skinnedMeshRender.material).albedoColor).elements=G$w,G$u.albedoColor=G$p)}else(G$p=(G$u=G$l.skinnedMeshRender.material).albedoColor).elements=G$w,G$u.albedoColor=G$p},G$u._getParticleRenderSharedMaterialTintColor=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.particleRender.sharedMaterial.tintColor.elements:null}return G$l.particleRender.sharedMaterial.tintColor.elements},G$u._setParticleRenderSharedMaterialTintColor=function(G$T,G$l,G$w){var G$u,G$p;if(G$T){var G$D=G$T.transform._entity;G$D&&((G$p=(G$u=G$D.owner.particleRender.material).tintColor).elements=G$w,G$u.tintColor=G$p)}else(G$p=(G$u=G$l.particleRender.material).tintColor).elements=G$w,G$u.tintColor=G$p},G$u._getMeshRenderSharedMaterialAlphaColor=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.alphaColor.elements:null}return G$l.meshRender.sharedMaterial.alphaColor.elements},G$u._setMeshRenderSharedMaterialAlphaColor=function(G$T,G$l,G$w){var G$u,G$p;if(G$T){var G$D=G$T.transform._entity;G$D&&((G$p=(G$u=G$D.owner.meshRender.material).alphaColor).elements=G$w,G$u.alphaColor=G$p)}else(G$p=(G$u=G$l.meshRender.material).alphaColor).elements=G$w,G$u.alphaColor=G$p},G$u._getMeshRenderSharedMaterialBaseColor=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.baseColor.elements:null}return G$l.meshRender.sharedMaterial.baseColor.elements},G$u._setMeshRenderSharedMaterialBaseColor=function(G$T,G$l,G$w){var G$u,G$p;if(G$T){var G$D=G$T.transform._entity;G$D&&((G$p=(G$u=G$D.owner.meshRender.material).baseColor).elements=G$w,G$u.baseColor=G$p)}else(G$p=(G$u=G$l.meshRender.material).baseColor).elements=G$w,G$u.baseColor=G$p},G$u._getMeshRenderSharedMaterialDissolve=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.dissolve:0}return G$l.meshRender.sharedMaterial.dissolve},G$u._setMeshRenderSharedMaterialDissolve=function(G$T,G$l,G$w){if(G$T){var G$u=G$T.transform._entity;G$u&&(G$u.owner.meshRender.material.dissolve=G$w[0])}else G$l.meshRender.material.dissolve=G$w[0]},G$u._getMeshRenderSharedMaterialDissolveSpeed=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.dissolveSpeed:0}return G$l.meshRender.sharedMaterial.dissolveSpeed},G$u._setMeshRenderSharedMaterialDissolveSpeed=function(G$T,G$l,G$w){if(G$T){var G$u=G$T.transform._entity;G$u&&(G$u.owner.meshRender.material.dissolveSpeed=G$w[0])}else G$l.meshRender.material.dissolveSpeed=G$w[0]},G$u._getMeshRenderSharedMaterialMMultiplier=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.mMultiplier:0}return G$l.meshRender.sharedMaterial.mMultiplier},G$u._setMeshRenderSharedMaterialMMultiplier=function(G$T,G$l,G$w){if(G$T){var G$u=G$T.transform._entity;G$u&&(G$u.owner.meshRender.material.mMultiplier=G$w[0])}else G$l.meshRender.material.mMultiplier=G$w[0]},G$u._getMeshRenderSharedMaterialBaseScrollSpeedX=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return G$l.meshRender.sharedMaterial.baseScrollSpeedX},G$u._setMeshRenderSharedMaterialBaseScrollSpeedX=function(G$T,G$l,G$w){if(G$T){var G$u=G$T.transform._entity;G$u&&(G$u.owner.meshRender.material.baseScrollSpeedX=G$w[0])}else G$l.meshRender.material.baseScrollSpeedX=G$w[0]},G$u._getMeshRenderSharedMaterialBaseScrollSpeedY=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return G$l.meshRender.sharedMaterial.baseScrollSpeedY},G$u._setMeshRenderSharedMaterialBaseScrollSpeedY=function(G$T,G$l,G$w){if(G$T){var G$u=G$T.transform._entity;G$u&&(G$u.owner.meshRender.material.baseScrollSpeedY=G$w[0])}else G$l.meshRender.material.baseScrollSpeedY=G$w[0]},G$u._getMeshRenderSharedMaterialSecondScrollSpeedX=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return G$l.meshRender.sharedMaterial.secondScrollSpeedX},G$u._setMeshRenderSharedMaterialSecondScrollSpeedX=function(G$T,G$l,G$w){if(G$T){var G$u=G$T.transform._entity;G$u&&(G$u.owner.meshRender.material.secondScrollSpeedX=G$w[0])}else G$l.meshRender.material.secondScrollSpeedX=G$w[0]},G$u._getMeshRenderSharedMaterialSecondScrollSpeedY=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return G$l.meshRender.sharedMaterial.secondScrollSpeedY},G$u._setMeshRenderSharedMaterialSecondScrollSpeedY=function(G$T,G$l,G$w){if(G$T){var G$u=G$T.transform._entity;G$u&&(G$u.owner.meshRender.material.secondScrollSpeedY=G$w[0])}else G$l.meshRender.material.secondScrollSpeedY=G$w[0]},G$u._getMeshRenderSharedMaterialAlpha=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.alpha:0}return G$l.meshRender.sharedMaterial.alpha},G$u._setMeshRenderSharedMaterialAlpha=function(G$T,G$l,G$w){if(G$T){var G$u=G$T.transform._entity;G$u&&(G$u.owner.meshRender.material.alpha=G$w[0])}else G$l.meshRender.material.alpha=G$w[0]},G$u._getMeshRenderSharedMaterialIntensity=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.intensity:0}return G$l.meshRender.sharedMaterial.intensity},G$u._setMeshRenderSharedMaterialIntensity=function(G$T,G$l,G$w){if(G$T){var G$u=G$T.transform._entity;G$u&&(G$u.owner.meshRender.material.intensity=G$w[0])}else G$l.meshRender.material.intensity=G$w[0]},G$u._getMeshRenderSharedMaterialDetailTilingOffset=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return G$l.meshRender.sharedMaterial.detailTilingOffset.elements},G$u._setMeshRenderSharedMaterialDetailTilingOffset=function(G$T,G$l,G$w){var G$u,G$p;if(G$T){var G$D=G$T.transform._entity;G$D&&((G$p=(G$u=G$D.owner.meshRender.material).detailTilingOffset).elements=G$w,G$u.detailTilingOffset=G$p)}else(G$p=(G$u=G$l.meshRender.material).detailTilingOffset).elements=G$w,G$u.detailTilingOffset=G$p},G$u._getMeshRenderSharedMaterialDissolveTilingOffset=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return G$l.meshRender.sharedMaterial.dissolveTilingOffset.elements},G$u._setMeshRenderSharedMaterialDissolveTilingOffset=function(G$T,G$l,G$w){var G$u,G$p;if(G$T){var G$D=G$T.transform._entity;G$D&&((G$p=(G$u=G$D.owner.meshRender.material).dissolveTilingOffset).elements=G$w,G$u.dissolveTilingOffset=G$p)}else(G$p=(G$u=G$l.meshRender.material).dissolveTilingOffset).elements=G$w,G$u.dissolveTilingOffset=G$p},G$u._getMeshRenderSharedMaterialMaskTilingOffset=function(G$T,G$l){if(G$T){var G$w=G$T.transform._entity;return G$w?G$w.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return G$l.meshRender.sharedMaterial.maskTilingOffset.elements},G$u._setMeshRenderSharedMaterialMaskTilingOffset=function(G$T,G$l,G$w){var G$u,G$p;if(G$T){var G$D=G$T.transform._entity;G$D&&((G$p=(G$u=G$D.owner.meshRender.material).maskTilingOffset).elements=G$w,G$u.maskTilingOffset=G$p)}else(G$p=(G$u=G$l.meshRender.material).maskTilingOffset).elements=G$w,G$u.maskTilingOffset=G$p},G$u._propertyIDCounter=0,G$u._propertyIndexDic={},G$u._propertySetFuncs=[],G$u._propertyGetFuncs=[],G$u}(),G$n=function(){function G$T(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return G$K(G$T,"laya.d3.animation.Keyframe"),G$T}(),G$d=function(){function G$T(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return G$K(G$T,"laya.d3.animation.KeyframeNode"),G$T}(),G$x=(function(){function G$T(){this._tempVector30=new G$Pl,this._tempVector31=new G$Pl,this._tempVector32=new G$Pl,this._a=new G$Pl,this._b=new G$Pl,this._c=new G$Pl,this._d=new G$Pl}G$K(G$T,"laya.d3.core.glitter.SplineCurvePositionVelocity");var G$l=G$T.prototype;G$l.Init=function(G$T,G$l,G$w,G$u){G$T.cloneTo(this._d),G$l.cloneTo(this._c),G$Pl.scale(G$T,2,this._a),G$Pl.scale(G$w,2,this._tempVector30),G$Pl.subtract(this._a,this._tempVector30,this._a),G$Pl.add(this._a,G$l,this._a),G$Pl.add(this._a,G$u,this._a),G$Pl.scale(G$w,3,this._b),G$Pl.scale(G$T,3,this._tempVector30),G$Pl.subtract(this._b,this._tempVector30,this._b),G$Pl.subtract(this._b,G$u,this._b),G$Pl.scale(G$l,2,this._tempVector30),G$Pl.subtract(this._b,this._tempVector30,this._b)},G$l.Slerp=function(G$T,G$l){G$Pl.scale(this._a,G$T*G$T*G$T,this._tempVector30),G$Pl.scale(this._b,G$T*G$T,this._tempVector31),G$Pl.scale(this._c,G$T,this._tempVector32),G$Pl.add(this._tempVector30,this._tempVector31,G$l),G$Pl.add(G$l,this._tempVector32,G$l),G$Pl.add(G$l,this._d,G$l)}}(),function(){function G$$(G$T,G$l,G$w,G$u){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=G$T,this._h=G$l,this._minHeight=G$w,this._maxHeight=G$u}G$K(G$$,"laya.d3.core.HeightMap");var G$T=G$$.prototype;G$T._inBounds=function(G$T,G$l){return 0<=G$T&&G$T<this._h&&0<=G$l&&G$l<this._w},G$T.getHeight=function(G$T,G$l){return this._inBounds(G$T,G$l)?this._datas[G$T][G$l]:NaN},G$Y(0,G$T,"width",function(){return this._w}),G$Y(0,G$T,"height",function(){return this._h}),G$Y(0,G$T,"maxHeight",function(){return this._maxHeight}),G$Y(0,G$T,"minHeight",function(){return this._minHeight}),G$$.creatFromMesh=function(G$T,G$l,G$w,G$u){for(var G$p=[],G$D=[],G$P=G$T.getSubMeshCount(),G$j=0;G$j<G$P;G$j++){for(var G$J=G$T.getSubMesh(G$j),G$q=G$J._getVertexBuffer(),G$M=G$q.getData(),G$z=[],G$b=0;G$b<G$M.length;G$b+=G$q.vertexDeclaration.vertexStride/4){var G$K=new G$Pl(G$M[G$b+0],G$M[G$b+1],G$M[G$b+2]);G$z.push(G$K)}G$p.push(G$z);var G$Y=G$J._getIndexBuffer();G$D.push(G$Y.getData())}var G$t=G$T.boundingBox,G$A=G$t.min.x,G$L=G$t.min.z,G$i=G$t.max.x,G$W=G$t.max.z,G$m=G$t.min.y,G$c=G$t.max.y,G$a=G$i-G$A,G$B=G$W-G$L,G$s=G$u.elements[0]=G$a/(G$l-1),G$r=G$u.elements[1]=G$B/(G$w-1),G$I=new G$$(G$l,G$w,G$m,G$c),G$Q=G$$._tempRay,G$o=G$Q.direction.elements;G$o[0]=0,G$o[1]=-1,G$o[2]=0;var G$e=G$c+.1;G$Q.origin.elements[1]=G$e;for(var G$y=0;G$y<G$w;G$y++){var G$v=G$L+G$y*G$r;G$I._datas[G$y]=[];for(var G$x=0;G$x<G$l;G$x++){var G$R=G$A+G$x*G$s,G$F=G$Q.origin.elements;G$F[0]=G$R,G$F[2]=G$v;var G$O=G$$._getPosition(G$Q,G$p,G$D);G$I._datas[G$y][G$x]=G$O===Number.MAX_VALUE?NaN:G$e-G$O}}return G$I},G$$.createFromImage=function(G$T,G$l,G$w){for(var G$u=G$T.width,G$p=G$T.height,G$D=new G$$(G$u,G$p,G$l,G$w),G$P=(G$w-G$l)/254,G$j=G$T.getPixels(),G$J=0,G$q=0;G$q<G$p;G$q++)for(var G$M=G$D._datas[G$q]=[],G$z=0;G$z<G$u;G$z++){var G$b=G$j[G$J++],G$K=G$j[G$J++],G$Y=G$j[G$J++],G$t=G$j[G$J++];G$M[G$z]=255==G$b&&255==G$K&&255==G$Y&&255==G$t?NaN:(G$b+G$K+G$Y)/3*G$P+G$l}return G$D},G$$._getPosition=function(G$T,G$l,G$w){for(var G$u=Number.MAX_VALUE,G$p=0;G$p<G$l.length;G$p++)for(var G$D=G$l[G$p],G$P=G$w[G$p],G$j=0;G$j<G$P.length;G$j+=3){var G$J=G$D[G$P[G$j+0]],G$q=G$D[G$P[G$j+1]],G$M=G$D[G$P[G$j+2]],G$z=G$Yl.rayIntersectsTriangle(G$T,G$J,G$q,G$M);!isNaN(G$z)&&G$z<G$u&&(G$u=G$z)}return G$u},G$z(G$$,["_tempRay",function(){return this._tempRay=new G$pl(new G$Pl,new G$Pl)}])}(),function(){function G$p(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}G$K(G$p,"laya.d3.core.Layer");var G$T=G$p.prototype;return G$T._binarySearchIndex=function(){for(var G$T=0,G$l=G$p._collsionTestList.length-1,G$w=0;G$T<=G$l;){G$w=Math.floor((G$T+G$l)/2);var G$u=G$p._collsionTestList[G$w];if(G$u==this._number)return G$w;G$u>this._number?G$l=G$w-1:G$T=G$w+1}return G$T},G$T._addCollider=function(G$T){0===this._colliders.length&&G$p._collsionTestList.splice(this._binarySearchIndex(),0,this._number),G$T._isRigidbody?(this._colliders.unshift(G$T),this._nonRigidbodyOffset++):this._colliders.push(G$T)},G$T._removeCollider=function(G$T){var G$l=this._colliders.indexOf(G$T);G$l<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(G$l,1),0===this._colliders.length&&G$p._collsionTestList.splice(G$p._collsionTestList.indexOf(this._number),1)},G$Y(0,G$T,"number",function(){return this._number}),G$Y(0,G$T,"visible",function(){return this._visible},function(G$T){this._visible=G$T,G$p._visibleLayers=G$T?G$p._visibleLayers|this.mask:G$p._visibleLayers&~this.mask}),G$Y(0,G$T,"mask",function(){return this._mask}),G$Y(1,G$p,"visibleLayers",function(){return G$p._visibleLayers},function(G$T){G$p._visibleLayers=G$T;for(var G$l=0,G$w=G$p._layerList.length;G$l<G$w;G$l++){var G$u=G$p._layerList[G$l];G$u._visible=0!=(G$u._mask&G$p._visibleLayers)}}),G$p.__init__=function(){G$p._layerList.length=31;for(var G$T=0;G$T<31;G$T++){var G$l=new G$p;G$p._layerList[G$T]=G$l,0===G$T?(G$l.name="Default Layer",G$l.visible=!0):(G$l.name="Layer-"+G$T,G$l.visible=!1),G$l._number=G$T,G$l._mask=Math.pow(2,G$T)}G$p.currentCreationLayer=G$p._layerList[0]},G$p.getLayerByNumber=function(G$T){if(G$T<0||30<G$T)throw new Error("无法返回指定Layer，该number超出范围！");return G$p._layerList[G$T]},G$p.getLayerByName=function(G$T){for(var G$l=0;G$l<31;G$l++)if(G$p._layerList[G$l].name===G$T)return G$p._layerList[G$l];throw new Error("无法返回指定Layer,该name不存在")},G$p.isVisible=function(G$T){return 0!=(G$T&G$p._currentCameraCullingMask&G$p._visibleLayers)},G$p._layerList=[],G$p._visibleLayers=2147483647,G$p._collsionTestList=[],G$p._currentCameraCullingMask=2147483647,G$p.maxCount=31,G$p.currentCreationLayer=null,G$p}()),G$R=(function(){function G$T(G$T,G$l,G$w){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=G$T,this._minCount=G$l,this._maxCount=G$w}G$K(G$T,"laya.d3.core.particleShuriKen.module.Burst");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.cloneTo=function(G$T){var G$l=G$T;G$l._time=this._time,G$l._minCount=this._minCount,G$l._maxCount=this._maxCount},G$l.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$l,"time",function(){return this._time}),G$Y(0,G$l,"minCount",function(){return this._minCount}),G$Y(0,G$l,"maxCount",function(){return this._maxCount})}(),function(){function G$T(G$T){this._color=null,this.enbale=!1,this._color=G$T}G$K(G$T,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var G$l=G$T.prototype;G$l.cloneTo=function(G$T){var G$l=G$T;this._color.cloneTo(G$l._color),G$l.enbale=this.enbale},G$l.clone=function(){var G$T;switch(this._color.type){case 0:G$T=G$O.createByConstant(this._color.constant.clone());break;case 1:G$T=G$O.createByGradient(this._color.gradient.clone());break;case 2:G$T=G$O.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:G$T=G$O.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var G$l=new this.constructor(G$T);return G$l.enbale=this.enbale,G$l},G$Y(0,G$l,"color",function(){return this._color})}(),function(){function G$T(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}G$K(G$T,"laya.d3.core.particleShuriKen.module.Emission");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),G$l._destroy=function(){this._bursts=null,this._destroyed=!0},G$l.getBurstsCount=function(){return this._bursts.length},G$l.getBurstByIndex=function(G$T){return this._bursts[G$T]},G$l.addBurst=function(G$T){var G$l=this._bursts.length;if(0<G$l)for(var G$w=0;G$w<G$l;G$w++)this._bursts[G$w].time>G$T.time&&this._bursts.splice(G$w,0,G$T);this._bursts.push(G$T)},G$l.removeBurst=function(G$T){var G$l=this._bursts.indexOf(G$T);-1!==G$l&&this._bursts.splice(G$l,1)},G$l.removeBurstByIndex=function(G$T){this._bursts.splice(G$T,1)},G$l.clearBurst=function(){this._bursts.length=0},G$l.cloneTo=function(G$T){var G$l=G$T,G$w=G$l._bursts;G$w.length=this._bursts.length;for(var G$u=0,G$p=this._bursts.length;G$u<G$p;G$u++){var G$D=G$w[G$u];G$D?this._bursts[G$u].cloneTo(G$D):G$w[G$u]=this._bursts[G$u].clone()}G$l._emissionRate=this._emissionRate,G$l.enbale=this.enbale},G$l.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$l,"destroyed",function(){return this._destroyed}),G$Y(0,G$l,"emissionRate",function(){return this._emissionRate},function(G$T){if(G$T<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=G$T})}(),function(){function G$u(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}G$K(G$u,"laya.d3.core.particleShuriKen.module.FrameOverTime");var G$T=G$u.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.cloneTo=function(G$T){var G$l=G$T;G$l._type=this._type,G$l._constant=this._constant,this._overTime.cloneTo(G$l._overTime),G$l._constantMin=this._constantMin,G$l._constantMax=this._constantMax,this._overTimeMin.cloneTo(G$l._overTimeMin),this._overTimeMax.cloneTo(G$l._overTimeMax)},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$T,"frameOverTimeData",function(){return this._overTime}),G$Y(0,G$T,"constant",function(){return this._constant}),G$Y(0,G$T,"type",function(){return this._type}),G$Y(0,G$T,"frameOverTimeDataMin",function(){return this._overTimeMin}),G$Y(0,G$T,"constantMin",function(){return this._constantMin}),G$Y(0,G$T,"frameOverTimeDataMax",function(){return this._overTimeMax}),G$Y(0,G$T,"constantMax",function(){return this._constantMax}),G$u.createByConstant=function(G$T){var G$l=new G$u;return G$l._type=0,G$l._constant=G$T,G$l},G$u.createByOverTime=function(G$T){var G$l=new G$u;return G$l._type=1,G$l._overTime=G$T,G$l},G$u.createByRandomTwoConstant=function(G$T,G$l){var G$w=new G$u;return G$w._type=2,G$w._constantMin=G$T,G$w._constantMax=G$l,G$w},G$u.createByRandomTwoOverTime=function(G$T,G$l){var G$w=new G$u;return G$w._type=3,G$w._overTimeMin=G$T,G$w._overTimeMax=G$l,G$w},G$u}()),G$F=function(){function G$q(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}G$K(G$q,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var G$T=G$q.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.cloneTo=function(G$T){var G$l=G$T;G$l._type=this._type,G$l._separateAxes=this._separateAxes,G$l._constant=this._constant,this._constantSeparate.cloneTo(G$l._constantSeparate),this._gradient.cloneTo(G$l._gradient),this._gradientX.cloneTo(G$l._gradientX),this._gradientY.cloneTo(G$l._gradientY),this._gradientZ.cloneTo(G$l._gradientZ),G$l._constantMin=this._constantMin,G$l._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(G$l._constantMinSeparate),this._constantMaxSeparate.cloneTo(G$l._constantMaxSeparate),this._gradientMin.cloneTo(G$l._gradientMin),this._gradientMax.cloneTo(G$l._gradientMax),this._gradientXMin.cloneTo(G$l._gradientXMin),this._gradientXMax.cloneTo(G$l._gradientXMax),this._gradientYMin.cloneTo(G$l._gradientYMin),this._gradientYMax.cloneTo(G$l._gradientYMax),this._gradientZMin.cloneTo(G$l._gradientZMin),this._gradientZMax.cloneTo(G$l._gradientZMax)},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$T,"gradientZ",function(){return this._gradientZ}),G$Y(0,G$T,"constant",function(){return this._constant}),G$Y(0,G$T,"gradient",function(){return this._gradient}),G$Y(0,G$T,"separateAxes",function(){return this._separateAxes}),G$Y(0,G$T,"type",function(){return this._type}),G$Y(0,G$T,"constantSeparate",function(){return this._constantSeparate}),G$Y(0,G$T,"gradientX",function(){return this._gradientX}),G$Y(0,G$T,"gradientY",function(){return this._gradientY}),G$Y(0,G$T,"gradientW",function(){return this._gradientW}),G$Y(0,G$T,"gradientMin",function(){return this._gradientMin}),G$Y(0,G$T,"constantMin",function(){return this._constantMin}),G$Y(0,G$T,"gradientMax",function(){return this._gradientMax}),G$Y(0,G$T,"constantMax",function(){return this._constantMax}),G$Y(0,G$T,"gradientWMin",function(){return this._gradientWMin}),G$Y(0,G$T,"constantMinSeparate",function(){return this._constantMinSeparate}),G$Y(0,G$T,"constantMaxSeparate",function(){return this._constantMaxSeparate}),G$Y(0,G$T,"gradientXMin",function(){return this._gradientXMin}),G$Y(0,G$T,"gradientXMax",function(){return this._gradientXMax}),G$Y(0,G$T,"gradientWMax",function(){return this._gradientWMax}),G$Y(0,G$T,"gradientYMin",function(){return this._gradientYMin}),G$Y(0,G$T,"gradientYMax",function(){return this._gradientYMax}),G$Y(0,G$T,"gradientZMin",function(){return this._gradientZMin}),G$Y(0,G$T,"gradientZMax",function(){return this._gradientZMax}),G$q.createByConstant=function(G$T){var G$l=new G$q;return G$l._type=0,G$l._separateAxes=!1,G$l._constant=G$T,G$l},G$q.createByConstantSeparate=function(G$T){var G$l=new G$q;return G$l._type=0,G$l._separateAxes=!0,G$l._constantSeparate=G$T,G$l},G$q.createByGradient=function(G$T){var G$l=new G$q;return G$l._type=1,G$l._separateAxes=!1,G$l._gradient=G$T,G$l},G$q.createByGradientSeparate=function(G$T,G$l,G$w,G$u){var G$p=new G$q;return G$p._type=1,G$p._separateAxes=!0,G$p._gradientX=G$T,G$p._gradientY=G$l,G$p._gradientZ=G$w,G$p._gradientW=G$u,G$p},G$q.createByRandomTwoConstant=function(G$T,G$l){var G$w=new G$q;return G$w._type=2,G$w._separateAxes=!1,G$w._constantMin=G$T,G$w._constantMax=G$l,G$w},G$q.createByRandomTwoConstantSeparate=function(G$T,G$l){var G$w=new G$q;return G$w._type=2,G$w._separateAxes=!0,G$w._constantMinSeparate=G$T,G$w._constantMaxSeparate=G$l,G$w},G$q.createByRandomTwoGradient=function(G$T,G$l){var G$w=new G$q;return G$w._type=3,G$w._separateAxes=!1,G$w._gradientMin=G$T,G$w._gradientMax=G$l,G$w},G$q.createByRandomTwoGradientSeparate=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){var G$J=new G$q;return G$J._type=3,G$J._separateAxes=!0,G$J._gradientXMin=G$T,G$J._gradientXMax=G$l,G$J._gradientYMin=G$w,G$J._gradientYMax=G$u,G$J._gradientZMin=G$p,G$J._gradientZMax=G$D,G$J._gradientWMin=G$P,G$J._gradientWMax=G$j,G$J},G$q}(),G$O=function(){function G$u(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}G$K(G$u,"laya.d3.core.particleShuriKen.module.GradientColor");var G$T=G$u.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.cloneTo=function(G$T){var G$l=G$T;G$l._type=this._type,this._constant.cloneTo(G$l._constant),this._constantMin.cloneTo(G$l._constantMin),this._constantMax.cloneTo(G$l._constantMax),this._gradient.cloneTo(G$l._gradient),this._gradientMin.cloneTo(G$l._gradientMin),this._gradientMax.cloneTo(G$l._gradientMax)},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$T,"gradient",function(){return this._gradient}),G$Y(0,G$T,"constant",function(){return this._constant}),G$Y(0,G$T,"type",function(){return this._type}),G$Y(0,G$T,"gradientMin",function(){return this._gradientMin}),G$Y(0,G$T,"constantMin",function(){return this._constantMin}),G$Y(0,G$T,"gradientMax",function(){return this._gradientMax}),G$Y(0,G$T,"constantMax",function(){return this._constantMax}),G$u.createByConstant=function(G$T){var G$l=new G$u;return G$l._type=0,G$l._constant=G$T,G$l},G$u.createByGradient=function(G$T){var G$l=new G$u;return G$l._type=1,G$l._gradient=G$T,G$l},G$u.createByRandomTwoConstant=function(G$T,G$l){var G$w=new G$u;return G$w._type=2,G$w._constantMin=G$T,G$w._constantMax=G$l,G$w},G$u.createByRandomTwoGradient=function(G$T,G$l){var G$w=new G$u;return G$w._type=3,G$w._gradientMin=G$T,G$w._gradientMax=G$l,G$w},G$u}(),G$$=(function(){function G$T(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}G$K(G$T,"laya.d3.core.particleShuriKen.module.GradientDataColor");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.addAlpha=function(G$T,G$l){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==G$T&&(G$T=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=G$T,this._alphaElements[this._alphaCurrentLength++]=G$l):DEBUG},G$l.addRGB=function(G$T,G$l){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==G$T&&(G$T=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=G$T,this._rgbElements[this._rgbCurrentLength++]=G$l.x,this._rgbElements[this._rgbCurrentLength++]=G$l.y,this._rgbElements[this._rgbCurrentLength++]=G$l.z):DEBUG},G$l.cloneTo=function(G$T){var G$l=G$T,G$w=0,G$u=0;G$l._alphaCurrentLength=this._alphaCurrentLength;var G$p=G$l._alphaElements;for(G$p.length=this._alphaElements.length,G$w=0,G$u=this._alphaElements.length;G$w<G$u;G$w++)G$p[G$w]=this._alphaElements[G$w];G$l._rgbCurrentLength=this._rgbCurrentLength;var G$D=G$l._rgbElements;for(G$D.length=this._rgbElements.length,G$w=0,G$u=this._rgbElements.length;G$w<G$u;G$w++)G$D[G$w]=this._rgbElements[G$w]},G$l.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$l,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),G$Y(0,G$l,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function G$T(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}G$K(G$T,"laya.d3.core.particleShuriKen.module.GradientDataInt");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.add=function(G$T,G$l){this._currentLength<8?(6===this._currentLength&&1!==G$T&&(G$T=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=G$T,this._elements[this._currentLength++]=G$l):console.log("Warning:data count must lessEqual than 4")},G$l.cloneTo=function(G$T){var G$l=G$T;G$l._currentLength=this._currentLength;var G$w=G$l._elements;G$w.length=this._elements.length;for(var G$u=0,G$p=this._elements.length;G$u<G$p;G$u++)G$w[G$u]=this._elements[G$u]},G$l.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$l,"gradientCount",function(){return this._currentLength/2})}(),function(){function G$T(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}G$K(G$T,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.add=function(G$T,G$l){this._currentLength<8?(6===this._currentLength&&1!==G$T&&(G$T=1,DEBUG),this._elements[this._currentLength++]=G$T,this._elements[this._currentLength++]=G$l):DEBUG},G$l.getKeyByIndex=function(G$T){return this._elements[2*G$T]},G$l.getValueByIndex=function(G$T){return this._elements[2*G$T+1]},G$l.getAverageValue=function(){for(var G$T=0,G$l=this._currentLength-2;G$T<G$l;G$T+=2){this._elements[G$T+1];this._elements[G$T+3],this._elements[G$T+2]-this._elements[G$T]}return 0},G$l.cloneTo=function(G$T){var G$l=G$T;G$l._currentLength=this._currentLength;var G$w=G$l._elements;G$w.length=this._elements.length;for(var G$u=0,G$p=this._elements.length;G$u<G$p;G$u++)G$w[G$u]=this._elements[G$u]},G$l.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$l,"gradientCount",function(){return this._currentLength/2})}(),function(){function G$T(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}G$K(G$T,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.add=function(G$T,G$l){this._currentLength<8?(6===this._currentLength&&1!==G$T&&(G$T=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=G$T,this._elements[this._currentLength++]=G$l.x,this._elements[this._currentLength++]=G$l.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},G$l.cloneTo=function(G$T){var G$l=G$T;G$l._currentLength=this._currentLength;var G$w=G$l._elements;G$w.length=this._elements.length;for(var G$u=0,G$p=this._elements.length;G$u<G$p;G$u++)G$w[G$u]=this._elements[G$u]},G$l.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$l,"gradientCount",function(){return this._currentLength/3})}(),function(){function G$j(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}G$K(G$j,"laya.d3.core.particleShuriKen.module.GradientSize");var G$T=G$j.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.getMaxSizeInGradient=function(){var G$T=0,G$l=0,G$w=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(G$T=0,G$l=this._gradientX.gradientCount;G$T<G$l;G$T++)G$w=Math.max(G$w,this._gradientX.getValueByIndex(G$T));for(G$T=0,G$l=this._gradientY.gradientCount;G$T<G$l;G$T++)G$w=Math.max(G$w,this._gradientY.getValueByIndex(G$T))}else for(G$T=0,G$l=this._gradient.gradientCount;G$T<G$l;G$T++)G$w=Math.max(G$w,this._gradient.getValueByIndex(G$T));break;case 1:G$w=this._separateAxes?(G$w=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),G$w=Math.max(G$w,this._constantMinSeparate.y),Math.max(G$w,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(G$T=0,G$l=this._gradientXMin.gradientCount;G$T<G$l;G$T++)G$w=Math.max(G$w,this._gradientXMin.getValueByIndex(G$T));for(G$T=0,G$l=this._gradientXMax.gradientCount;G$T<G$l;G$T++)G$w=Math.max(G$w,this._gradientXMax.getValueByIndex(G$T));for(G$T=0,G$l=this._gradientYMin.gradientCount;G$T<G$l;G$T++)G$w=Math.max(G$w,this._gradientYMin.getValueByIndex(G$T));for(G$T=0,G$l=this._gradientZMax.gradientCount;G$T<G$l;G$T++)G$w=Math.max(G$w,this._gradientZMax.getValueByIndex(G$T))}else{for(G$T=0,G$l=this._gradientMin.gradientCount;G$T<G$l;G$T++)G$w=Math.max(G$w,this._gradientMin.getValueByIndex(G$T));for(G$T=0,G$l=this._gradientMax.gradientCount;G$T<G$l;G$T++)G$w=Math.max(G$w,this._gradientMax.getValueByIndex(G$T))}}return G$w},G$T.cloneTo=function(G$T){var G$l=G$T;G$l._type=this._type,G$l._separateAxes=this._separateAxes,this._gradient.cloneTo(G$l._gradient),this._gradientX.cloneTo(G$l._gradientX),this._gradientY.cloneTo(G$l._gradientY),this._gradientZ.cloneTo(G$l._gradientZ),G$l._constantMin=this._constantMin,G$l._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(G$l._constantMinSeparate),this._constantMaxSeparate.cloneTo(G$l._constantMaxSeparate),this._gradientMin.cloneTo(G$l._gradientMin),this._gradientMax.cloneTo(G$l._gradientMax),this._gradientXMin.cloneTo(G$l._gradientXMin),this._gradientXMax.cloneTo(G$l._gradientXMax),this._gradientYMin.cloneTo(G$l._gradientYMin),this._gradientYMax.cloneTo(G$l._gradientYMax),this._gradientZMin.cloneTo(G$l._gradientZMin),this._gradientZMax.cloneTo(G$l._gradientZMax)},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$T,"gradientZ",function(){return this._gradientZ}),G$Y(0,G$T,"gradient",function(){return this._gradient}),G$Y(0,G$T,"separateAxes",function(){return this._separateAxes}),G$Y(0,G$T,"type",function(){return this._type}),G$Y(0,G$T,"gradientMin",function(){return this._gradientMin}),G$Y(0,G$T,"constantMin",function(){return this._constantMin}),G$Y(0,G$T,"gradientX",function(){return this._gradientX}),G$Y(0,G$T,"gradientY",function(){return this._gradientY}),G$Y(0,G$T,"gradientMax",function(){return this._gradientMax}),G$Y(0,G$T,"constantMax",function(){return this._constantMax}),G$Y(0,G$T,"constantMinSeparate",function(){return this._constantMinSeparate}),G$Y(0,G$T,"constantMaxSeparate",function(){return this._constantMaxSeparate}),G$Y(0,G$T,"gradientXMin",function(){return this._gradientXMin}),G$Y(0,G$T,"gradientXMax",function(){return this._gradientXMax}),G$Y(0,G$T,"gradientYMin",function(){return this._gradientYMin}),G$Y(0,G$T,"gradientYMax",function(){return this._gradientYMax}),G$Y(0,G$T,"gradientZMin",function(){return this._gradientZMin}),G$Y(0,G$T,"gradientZMax",function(){return this._gradientZMax}),G$j.createByGradient=function(G$T){var G$l=new G$j;return G$l._type=0,G$l._separateAxes=!1,G$l._gradient=G$T,G$l},G$j.createByGradientSeparate=function(G$T,G$l,G$w){var G$u=new G$j;return G$u._type=0,G$u._separateAxes=!0,G$u._gradientX=G$T,G$u._gradientY=G$l,G$u._gradientZ=G$w,G$u},G$j.createByRandomTwoConstant=function(G$T,G$l){var G$w=new G$j;return G$w._type=1,G$w._separateAxes=!1,G$w._constantMin=G$T,G$w._constantMax=G$l,G$w},G$j.createByRandomTwoConstantSeparate=function(G$T,G$l){var G$w=new G$j;return G$w._type=1,G$w._separateAxes=!0,G$w._constantMinSeparate=G$T,G$w._constantMaxSeparate=G$l,G$w},G$j.createByRandomTwoGradient=function(G$T,G$l){var G$w=new G$j;return G$w._type=2,G$w._separateAxes=!1,G$w._gradientMin=G$T,G$w._gradientMax=G$l,G$w},G$j.createByRandomTwoGradientSeparate=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=new G$j;return G$P._type=2,G$P._separateAxes=!0,G$P._gradientXMin=G$T,G$P._gradientXMax=G$l,G$P._gradientYMin=G$w,G$P._gradientYMax=G$u,G$P._gradientZMin=G$p,G$P._gradientZMax=G$D,G$P},G$j}()),G$Z=function(){function G$j(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}G$K(G$j,"laya.d3.core.particleShuriKen.module.GradientVelocity");var G$T=G$j.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.cloneTo=function(G$T){var G$l=G$T;G$l._type=this._type,this._constant.cloneTo(G$l._constant),this._gradientX.cloneTo(G$l._gradientX),this._gradientY.cloneTo(G$l._gradientY),this._gradientZ.cloneTo(G$l._gradientZ),this._constantMin.cloneTo(G$l._constantMin),this._constantMax.cloneTo(G$l._constantMax),this._gradientXMin.cloneTo(G$l._gradientXMin),this._gradientXMax.cloneTo(G$l._gradientXMax),this._gradientYMin.cloneTo(G$l._gradientYMin),this._gradientYMax.cloneTo(G$l._gradientYMax),this._gradientZMin.cloneTo(G$l._gradientZMin),this._gradientZMax.cloneTo(G$l._gradientZMax)},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$T,"gradientZ",function(){return this._gradientZ}),G$Y(0,G$T,"constant",function(){return this._constant}),G$Y(0,G$T,"type",function(){return this._type}),G$Y(0,G$T,"gradientXMax",function(){return this._gradientXMax}),G$Y(0,G$T,"constantMin",function(){return this._constantMin}),G$Y(0,G$T,"gradientX",function(){return this._gradientX}),G$Y(0,G$T,"gradientY",function(){return this._gradientY}),G$Y(0,G$T,"gradientXMin",function(){return this._gradientXMin}),G$Y(0,G$T,"constantMax",function(){return this._constantMax}),G$Y(0,G$T,"gradientYMin",function(){return this._gradientYMin}),G$Y(0,G$T,"gradientYMax",function(){return this._gradientYMax}),G$Y(0,G$T,"gradientZMin",function(){return this._gradientZMin}),G$Y(0,G$T,"gradientZMax",function(){return this._gradientZMax}),G$j.createByConstant=function(G$T){var G$l=new G$j;return G$l._type=0,G$l._constant=G$T,G$l},G$j.createByGradient=function(G$T,G$l,G$w){var G$u=new G$j;return G$u._type=1,G$u._gradientX=G$T,G$u._gradientY=G$l,G$u._gradientZ=G$w,G$u},G$j.createByRandomTwoConstant=function(G$T,G$l){var G$w=new G$j;return G$w._type=2,G$w._constantMin=G$T,G$w._constantMax=G$l,G$w},G$j.createByRandomTwoGradient=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=new G$j;return G$P._type=3,G$P._gradientXMin=G$T,G$P._gradientXMax=G$l,G$P._gradientYMin=G$w,G$P._gradientYMax=G$u,G$P._gradientZMin=G$p,G$P._gradientZMax=G$D,G$P},G$j}(),G$H=(function(){function G$T(G$T){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=G$T}G$K(G$T,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.cloneTo=function(G$T){var G$l=G$T;this._angularVelocity.cloneTo(G$l._angularVelocity),G$l.enbale=this.enbale},G$l.clone=function(){var G$T;switch(this._angularVelocity.type){case 0:G$T=this._angularVelocity.separateAxes?G$F.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):G$F.createByConstant(this._angularVelocity.constant);break;case 1:G$T=this._angularVelocity.separateAxes?G$F.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):G$F.createByGradient(this._angularVelocity.gradient.clone());break;case 2:G$T=this._angularVelocity.separateAxes?G$F.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):G$F.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:G$T=this._angularVelocity.separateAxes?G$F.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):G$F.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var G$l=new this.constructor(G$T);return G$l.enbale=this.enbale,G$l},G$Y(0,G$l,"angularVelocity",function(){return this._angularVelocity})}(),function(){function G$T(){this.enable=!1,this.randomDirection=!1}G$K(G$T,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l._getShapeBoundBox=function(G$T){throw new Error("BaseShape: must override it.")},G$l._getSpeedBoundBox=function(G$T){throw new Error("BaseShape: must override it.")},G$l.generatePositionAndDirection=function(G$T,G$l,G$w,G$u){throw new Error("BaseShape: must override it.")},G$l._calculateProceduralBounds=function(G$T,G$l,G$w){this._getShapeBoundBox(G$T);var G$u=G$T.min,G$p=G$T.max;G$Pl.multiply(G$u,G$l,G$u),G$Pl.multiply(G$p,G$l,G$p);var G$D=new G$ET(new G$Pl,new G$Pl);this.randomDirection?(G$D.min=new G$Pl(-1,-1,-1),G$D.max=new G$Pl(1,1,1)):this._getSpeedBoundBox(G$D);var G$P=new G$ET(new G$Pl,new G$Pl),G$j=G$P.min,G$J=G$P.max;G$Pl.scale(G$D.min,G$w.y,G$j),G$Pl.scale(G$D.max,G$w.y,G$J),G$Pl.add(G$T.min,G$j,G$j),G$Pl.add(G$T.max,G$J,G$J),G$Pl.min(G$T.min,G$j,G$T.min),G$Pl.max(G$T.max,G$j,G$T.max);var G$q=new G$ET(new G$Pl,new G$Pl),G$M=G$q.min,G$z=G$q.max;G$Pl.scale(G$D.min,G$w.x,G$M),G$Pl.scale(G$D.max,G$w.x,G$z),G$Pl.min(G$q.min,G$z,G$j),G$Pl.max(G$q.min,G$z,G$J),G$Pl.min(G$T.min,G$j,G$T.min),G$Pl.max(G$T.max,G$j,G$T.max)},G$l.cloneTo=function(G$T){G$T.enable=this.enable},G$l.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$T}()),G$G=function(){function G$D(){}return G$K(G$D,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),G$D._randomPointUnitArcCircle=function(G$T,G$l,G$w){var G$u=G$l.elements,G$p=NaN;G$p=G$w?G$w.getFloat()*G$T:Math.random()*G$T,G$u[0]=Math.cos(G$p),G$u[1]=Math.sin(G$p)},G$D._randomPointInsideUnitArcCircle=function(G$T,G$l,G$w){var G$u=G$l.elements;G$D._randomPointUnitArcCircle(G$T,G$l,G$w);var G$p=NaN;G$p=G$w?Math.pow(G$w.getFloat(),.5):Math.pow(Math.random(),.5),G$u[0]=G$u[0]*G$p,G$u[1]=G$u[1]*G$p},G$D._randomPointUnitCircle=function(G$T,G$l){var G$w=G$T.elements,G$u=NaN;G$u=G$l?G$l.getFloat()*Math.PI*2:Math.random()*Math.PI*2,G$w[0]=Math.cos(G$u),G$w[1]=Math.sin(G$u)},G$D._randomPointInsideUnitCircle=function(G$T,G$l){var G$w=G$T.elements;G$D._randomPointUnitCircle(G$T);var G$u=NaN;G$u=G$l?Math.pow(G$l.getFloat(),.5):Math.pow(Math.random(),.5),G$w[0]=G$w[0]*G$u,G$w[1]=G$w[1]*G$u},G$D._randomPointUnitSphere=function(G$T,G$l){var G$w=G$T.elements,G$u=NaN,G$p=NaN;G$p=G$l?(G$u=G$w[2]=2*G$l.getFloat()-1,G$l.getFloat()*Math.PI*2):(G$u=G$w[2]=2*Math.random()-1,Math.random()*Math.PI*2);var G$D=Math.sqrt(1-G$u*G$u);G$w[0]=G$D*Math.cos(G$p),G$w[1]=G$D*Math.sin(G$p)},G$D._randomPointInsideUnitSphere=function(G$T,G$l){var G$w=G$T.elements;G$D._randomPointUnitSphere(G$T);var G$u=NaN;G$u=G$l?Math.pow(G$l.getFloat(),1/3):Math.pow(Math.random(),1/3),G$w[0]=G$w[0]*G$u,G$w[1]=G$w[1]*G$u,G$w[2]=G$w[2]*G$u},G$D._randomPointInsideHalfUnitBox=function(G$T,G$l){var G$w=G$T.elements;G$l?(G$w[0]=G$l.getFloat()-.5,G$w[1]=G$l.getFloat()-.5,G$w[2]=G$l.getFloat()-.5):(G$w[0]=Math.random()-.5,G$w[1]=Math.random()-.5,G$w[2]=Math.random()-.5)},G$D}(),G$N=(function(){function G$T(G$T){this._size=null,this.enbale=!1,this._size=G$T}G$K(G$T,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.cloneTo=function(G$T){var G$l=G$T;this._size.cloneTo(G$l._size),G$l.enbale=this.enbale},G$l.clone=function(){var G$T;switch(this._size.type){case 0:G$T=this._size.separateAxes?G$$.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):G$$.createByGradient(this._size.gradient.clone());break;case 1:G$T=this._size.separateAxes?G$$.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):G$$.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:G$T=this._size.separateAxes?G$$.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):G$$.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var G$l=new this.constructor(G$T);return G$l.enbale=this.enbale,G$l},G$Y(0,G$l,"size",function(){return this._size})}(),function(){function G$u(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}G$K(G$u,"laya.d3.core.particleShuriKen.module.StartFrame");var G$T=G$u.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.cloneTo=function(G$T){var G$l=G$T;G$l._type=this._type,G$l._constant=this._constant,G$l._constantMin=this._constantMin,G$l._constantMax=this._constantMax},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$T,"constant",function(){return this._constant}),G$Y(0,G$T,"type",function(){return this._type}),G$Y(0,G$T,"constantMin",function(){return this._constantMin}),G$Y(0,G$T,"constantMax",function(){return this._constantMax}),G$u.createByConstant=function(G$T){var G$l=new G$u;return G$l._type=0,G$l._constant=G$T,G$l},G$u.createByRandomTwoConstant=function(G$T,G$l){var G$w=new G$u;return G$w._type=1,G$w._constantMin=G$T,G$w._constantMax=G$l,G$w},G$u}()),G$h=(function(){function G$T(G$T,G$l){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new G$Dl(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=G$T,this._startFrame=G$l}G$K(G$T,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.cloneTo=function(G$T){var G$l=G$T;this.tiles.cloneTo(G$l.tiles),G$l.type=this.type,G$l.randomRow=this.randomRow,this._frame.cloneTo(G$l._frame),this._startFrame.cloneTo(G$l._startFrame),G$l.cycles=this.cycles,G$l.enableUVChannels=this.enableUVChannels,G$l.enable=this.enable},G$l.clone=function(){var G$T,G$l;switch(this._frame.type){case 0:G$T=G$R.createByConstant(this._frame.constant);break;case 1:G$T=G$R.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:G$T=G$R.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:G$T=G$R.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:G$l=G$N.createByConstant(this._startFrame.constant);break;case 1:G$l=G$N.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var G$w=new this.constructor(G$T,G$l);return this.tiles.cloneTo(G$w.tiles),G$w.type=this.type,G$w.randomRow=this.randomRow,G$w.cycles=this.cycles,G$w.enableUVChannels=this.enableUVChannels,G$w.enable=this.enable,G$w},G$Y(0,G$l,"frame",function(){return this._frame}),G$Y(0,G$l,"startFrame",function(){return this._startFrame})}(),function(){function G$T(G$T){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=G$T}G$K(G$T,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.cloneTo=function(G$T){var G$l=G$T;this._velocity.cloneTo(G$l._velocity),G$l.enbale=this.enbale,G$l.space=this.space},G$l.clone=function(){var G$T;switch(this._velocity.type){case 0:G$T=G$Z.createByConstant(this._velocity.constant.clone());break;case 1:G$T=G$Z.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:G$T=G$Z.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:G$T=G$Z.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var G$l=new this.constructor(G$T);return G$l.enbale=this.enbale,G$l.space=this.space,G$l},G$Y(0,G$l,"velocity",function(){return this._velocity})}(),function(){function G$T(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new G$bl,this._vb=G$Hl.create(G$T._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=G$Zl.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=G$Ol.nameKey.getID("LINE"),this._shaderCompile=G$sl._preCompileShader[this._sharderNameID]}G$K(G$T,"laya.d3.core.PhasorSpriter3D");var G$l=G$T.prototype;return G$l.line=function(G$T,G$l,G$w,G$u){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(G$T.x,G$T.y,G$T.z,G$l.x,G$l.y,G$l.z,G$l.w),this.addVertex(G$w.x,G$w.y,G$w.z,G$u.x,G$u.y,G$u.z,G$u.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},G$l.circle=function(G$T,G$l,G$w,G$u,G$p,G$D){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*G$l,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/G$l,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*G$T,Math.cos(this._tempNumver0)*G$T,0,G$w,G$u,G$p,G$D),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},G$l.plane=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=G$u/2,this._tempNumver1=G$p/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(G$T-this._tempNumver0,G$l+this._tempNumver1,G$w,G$D,G$P,G$j,G$J),this.addVertex(G$T+this._tempNumver0,G$l+this._tempNumver1,G$w,G$D,G$P,G$j,G$J),this.addVertex(G$T-this._tempNumver0,G$l-this._tempNumver1,G$w,G$D,G$P,G$j,G$J),this.addVertex(G$T+this._tempNumver0,G$l-this._tempNumver1,G$w,G$D,G$P,G$j,G$J),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},G$l.box=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=G$u/2,this._tempNumver1=G$p/2,this._tempNumver2=G$D/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(G$T-this._tempNumver0,G$l+this._tempNumver1,G$w+this._tempNumver2,G$P,G$j,G$J,G$q),this.addVertex(G$T+this._tempNumver0,G$l+this._tempNumver1,G$w+this._tempNumver2,G$P,G$j,G$J,G$q),this.addVertex(G$T-this._tempNumver0,G$l-this._tempNumver1,G$w+this._tempNumver2,G$P,G$j,G$J,G$q),this.addVertex(G$T+this._tempNumver0,G$l-this._tempNumver1,G$w+this._tempNumver2,G$P,G$j,G$J,G$q),this.addVertex(G$T+this._tempNumver0,G$l+this._tempNumver1,G$w-this._tempNumver2,G$P,G$j,G$J,G$q),this.addVertex(G$T-this._tempNumver0,G$l+this._tempNumver1,G$w-this._tempNumver2,G$P,G$j,G$J,G$q),this.addVertex(G$T+this._tempNumver0,G$l-this._tempNumver1,G$w-this._tempNumver2,G$P,G$j,G$J,G$q),this.addVertex(G$T-this._tempNumver0,G$l-this._tempNumver1,G$w-this._tempNumver2,G$P,G$j,G$J,G$q),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},G$l.cone=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*G$w+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*G$w>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/G$w,this.addVertexIndex(0,G$l,0,G$u,G$p,G$D,G$P,this._tempUint0),this.addVertexIndex(0,0,0,G$u,G$p,G$D,G$P,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<G$w;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(G$T*this._tempNumver2,0,G$T*this._tempNumver3,G$u,G$p,G$D,G$P,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==G$w-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(G$T*this._tempNumver2,0,G$T*this._tempNumver3,G$u,G$p,G$D,G$P,this._tempUint0+(this._tempInt0+G$w)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==G$w-1?this.addIndexes(this._tempUint1+G$w+2):this.addIndexes(this._tempUint1+this._tempInt0+G$w+1),this.addIndexes(this._tempUint1+this._tempInt0+G$w),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},G$l.boundingBoxLine=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(G$T,G$p,G$D,G$P,G$j,G$J,G$q),this.addVertex(G$u,G$p,G$D,G$P,G$j,G$J,G$q),this.addVertex(G$T,G$l,G$D,G$P,G$j,G$J,G$q),this.addVertex(G$u,G$l,G$D,G$P,G$j,G$J,G$q),this.addVertex(G$u,G$p,G$w,G$P,G$j,G$J,G$q),this.addVertex(G$T,G$p,G$w,G$P,G$j,G$J,G$q),this.addVertex(G$u,G$l,G$w,G$P,G$j,G$J,G$q),this.addVertex(G$T,G$l,G$w,G$P,G$j,G$J,G$q),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},G$l.addVertex=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=G$T,this._vbData[this._posInVBData+1]=G$l,this._vbData[this._posInVBData+2]=G$w,this._vbData[this._posInVBData+3]=G$u,this._vbData[this._posInVBData+4]=G$p,this._vbData[this._posInVBData+5]=G$D,this._vbData[this._posInVBData+6]=G$P,this._posInVBData+=this._floatSizePerVer,this},G$l.addVertexIndex=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){return this._hasBegun||this.addVertexIndexException(),this._vbData[G$j]=G$T,this._vbData[G$j+1]=G$l,this._vbData[G$j+2]=G$w,this._vbData[G$j+3]=G$u,this._vbData[G$j+4]=G$p,this._vbData[G$j+5]=G$D,this._vbData[G$j+6]=G$P,(G$j+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=G$j),this},G$l.addIndexes=function(G$T){var G$l=arguments;this._hasBegun||this.addVertexIndexException();for(var G$w=0;G$w<G$l.length;G$w++)this._ibData[this._posInIBData]=G$l[G$w],this._posInIBData++;return this},G$l.begin=function(G$T,G$l){return this._hasBegun&&this.beginException0(),1!==G$T&&4!==G$T&&this.beginException1(),this._primitiveType=G$T,this._camera=G$l,this._hasBegun=!0,this},G$l.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},G$l.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(G$T._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),G$s.drawCall++,G$e.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},G$l.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},G$l.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},G$l.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},G$l.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},G$l.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},G$l.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(28,[new G$PT(0,"vector3",0),new G$PT(12,"vector4",1)])}]),G$T}()),G$g=function(){function G$T(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++G$T._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new G$bl}G$K(G$T,"laya.d3.core.render.RenderElement");var G$l=G$T.prototype;return G$l.getDynamicBatchBakedVertexs=function(G$T){for(var G$l=this._renderObj._getVertexBuffer(G$T),G$w=G$l.getData().slice(),G$u=G$l.vertexDeclaration,G$p=G$u.getVertexElementByUsage(0).offset/4,G$D=G$u.getVertexElementByUsage(3).offset/4,G$P=this._sprite3D.transform,G$j=G$P.worldMatrix,G$J=G$P.rotation,G$q=G$u.vertexStride/4,G$M=0,G$z=G$w.length;G$M<G$z;G$M+=G$q){var G$b=G$M+G$p,G$K=G$M+G$D;G$Al.transformVector3ArrayToVector3ArrayCoordinate(G$w,G$b,G$j,G$w,G$b),G$Al.transformVector3ArrayByQuat(G$w,G$K,G$J,G$w,G$K)}return G$w},G$l.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},G$l._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},G$Y(0,G$l,"id",function(){return this._id}),G$Y(0,G$l,"renderObj",function(){return this._renderObj},function(G$T){this._renderObj!==G$T&&(this._renderObj=G$T)}),G$T._uniqueIDCounter=0,G$T}(),G$f=function(){function G$l(G$T){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++G$l._uniqueIDCounter,this._needSort=!1,this._scene=G$T,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}G$K(G$l,"laya.d3.core.render.RenderQueue");var G$T=G$l.prototype;return G$T._sortOpaqueFunc=function(G$T,G$l){if(G$T._render&&G$l._render){var G$w=G$T._material.renderQueue-G$l._material.renderQueue;return 0==G$w?G$T._render._distanceForSort-G$l._render._distanceForSort:G$w}return 0},G$T._sortAlphaFunc=function(G$T,G$l){if(G$T._render&&G$l._render){var G$w=G$T._material.renderQueue-G$l._material.renderQueue;return 0==G$w?G$l._render._distanceForSort-G$T._render._distanceForSort:G$w}return 0},G$T._begainRenderElement=function(G$T,G$l,G$w){return!!G$l._beforeRender(G$T)},G$T._sortAlpha=function(G$T){G$l._cameraPosition=G$T,this._finalElements.sort(this._sortAlphaFunc)},G$T._sortOpaque=function(G$T){G$l._cameraPosition=G$T,this._finalElements.sort(this._sortOpaqueFunc)},G$T._preRender=function(G$T){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},G$T._render=function(G$T,G$l){for(var G$w,G$u,G$p,G$D,G$P,G$j,G$J=G$s.loopCount,G$q=this._scene,G$M=G$T.camera,G$z=(G$M.id,!1),G$b=0,G$K=this._finalElements.length;G$b<G$K;G$b++){var G$Y,G$t,G$A,G$L=this._finalElements[G$b];if(null!=G$L._onPreRenderFunction&&G$L._onPreRenderFunction.call(G$L._sprite3D,G$T),0===G$L._type){if(G$T.owner=G$A=G$L._sprite3D,G$T.renderElement=G$L,G$A._preRenderUpdateComponents(G$T),G$Y=G$L.renderObj,G$t=G$L._material,this._begainRenderElement(G$T,G$Y,G$t)){if(G$w=G$Y._getVertexBuffers(),!(G$p=(G$u=G$Y._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[G$u.id]){this._errorRecord[G$u.id]=1;var G$i="vertexBuffer:"+("("+G$u._destroyed+","+G$u._released+","+G$u._referenceCount+","+G$u._buffer+")")+", material:"+(G$t?G$t.__className+"("+G$t._destroyed+","+G$t._released+")":"null")+", owner:"+(G$A?G$A.__className+"("+G$A._destroyed+","+G$A._activeInHierarchy+","+G$A._displayedInStage+")":"null")+", renderObj:"+(G$Y?G$Y.__className+"("+G$Y._destroyed+","+G$Y._released+","+G$Y._referenceCount+")":"")+", parent:, url:"+(G$A?G$A.url:"")+", disposeStack:"+G$u.disposeStack;G$c.recordError("报错：unknown vertexDeclaration  "+G$i)}continue}if(G$z=(G$D=G$T._shader=G$t._getShader(G$q._shaderDefineValue,G$p.shaderDefineValue,G$A._shaderDefineValue)).bind()||G$J!==G$D._uploadLoopCount,G$w){if(G$D._uploadVertexBuffer!==G$w||G$z){for(var G$W=0;G$W<G$w.length;G$W++){var G$m=G$w[G$W];G$D.uploadAttributesX(G$m.vertexDeclaration.shaderValues.data,G$m)}G$D._uploadVertexBuffer=G$w}}else(G$D._uploadVertexBuffer!==G$u||G$z)&&(G$D.uploadAttributes(G$p.shaderValues.data,null),G$D._uploadVertexBuffer=G$u);(G$D._uploadScene!==G$q||G$z)&&(G$D.uploadSceneUniforms(G$q._shaderValues.data),G$D._uploadScene=G$q),(G$M!==G$D._uploadCamera||G$D._uploadSprite3D!==G$A||G$z)&&(G$D.uploadSpriteUniforms(G$A._shaderValues.data),G$D._uploadSprite3D=G$A),(G$M!==G$D._uploadCamera||G$z)&&(G$D.uploadCameraUniforms(G$M._shaderValues.data),G$D._uploadCamera=G$M),(G$D._uploadMaterial!==G$t||G$z)&&(G$t._upload(),G$D._uploadMaterial=G$t),G$P!==G$t?(G$t._setRenderStateBlendDepth(),G$t._setRenderStateFrontFace(G$l,G$A.transform),G$P=G$t,G$j=G$A):G$j!==G$A&&(G$t._setRenderStateFrontFace(G$l,G$A.transform),G$j=G$A),G$Y._render(G$T),G$D._uploadLoopCount=G$J}G$A._postRenderUpdateComponents(G$T)}else if(2===G$L._type){G$L.renderObj;G$T.owner=G$A=G$L._sprite3D,G$T.renderElement=G$L,G$T._batchIndexStart=G$L._tempBatchIndexStart,G$T._batchIndexEnd=G$L._tempBatchIndexEnd,G$Y=G$L.renderObj,G$t=G$L._material,this._begainRenderElement(G$T,G$Y,G$t)&&(G$p=(G$u=G$Y._getVertexBuffer(0)).vertexDeclaration,G$z=(G$D=G$T._shader=G$t._getShader(G$q._shaderDefineValue,G$p.shaderDefineValue,G$A._shaderDefineValue)).bind()||G$J!==G$D._uploadLoopCount,(G$D._uploadVertexBuffer!==G$u||G$z)&&(G$D.uploadAttributes(G$p.shaderValues.data,null),G$D._uploadVertexBuffer=G$u),(G$D._uploadScene!==G$q||G$z)&&(G$D.uploadSceneUniforms(G$q._shaderValues.data),G$D._uploadScene=G$q),(G$M!==G$D._uploadCamera||G$D._uploadSprite3D!==G$A||G$z)&&(G$D.uploadSpriteUniforms(G$A._shaderValues.data),G$D._uploadSprite3D=G$A),(G$M!==G$D._uploadCamera||G$z)&&(G$D.uploadCameraUniforms(G$M._shaderValues.data),G$D._uploadCamera=G$M),(G$D._uploadMaterial!==G$t||G$z)&&(G$t._upload(),G$D._uploadMaterial=G$t),G$P!==G$t?(G$t._setRenderStateBlendDepth(),G$t._setRenderStateFrontFace(G$l,G$A.transform),G$P=G$t,G$j=G$A):G$j!==G$A&&(G$t._setRenderStateFrontFace(G$l,G$A.transform),G$j=G$A),G$Y._render(G$T),G$D._uploadLoopCount=G$J)}}},G$T._renderShadow=function(G$T,G$l){for(var G$w,G$u,G$p,G$D,G$P,G$j=G$s.loopCount,G$J=this._scene,G$q=G$T.camera,G$M=!1,G$z=0,G$b=this._finalElements.length;G$z<G$b;G$z++){var G$K,G$Y,G$t,G$A=this._finalElements[G$z];0===G$A._type&&(G$T.owner=G$t=G$A._sprite3D,G$l||G$t._projectionViewWorldUpdateCamera===G$q&&G$t._projectionViewWorldUpdateLoopCount===G$s.loopCount||(G$t._render._renderUpdate(G$T._projectionViewMatrix),G$t._projectionViewWorldUpdateLoopCount=G$s.loopCount,G$t._projectionViewWorldUpdateCamera=G$q),G$T.renderElement=G$A,G$t._preRenderUpdateComponents(G$T),G$K=G$A.renderObj,G$Y=G$A._material,this._begainRenderElement(G$T,G$K,null)&&(G$u=(G$w=G$K._getVertexBuffer(0)).vertexDeclaration,G$M=(G$p=G$T._shader=G$Y._getShader(G$J._shaderDefineValue,G$u.shaderDefineValue,G$t._shaderDefineValue)).bind()||G$j!==G$p._uploadLoopCount,(G$p._uploadVertexBuffer!==G$w||G$M)&&(G$p.uploadAttributes(G$u.shaderValues.data,null),G$p._uploadVertexBuffer=G$w),(G$q!==G$p._uploadCamera||G$p._uploadSprite3D!==G$t||G$M)&&(G$p.uploadSpriteUniforms(G$t._shaderValues.data),G$p._uploadSprite3D=G$t),(G$q!==G$p._uploadCamera||G$M)&&(G$p.uploadCameraUniforms(G$q._shaderValues.data),G$p._uploadCamera=G$q),(G$p._uploadMaterial!==G$Y||G$M)&&(G$Y._upload(),G$p._uploadMaterial=G$Y),G$p._uploadRenderElement,G$D!==G$Y?(G$Y._setRenderStateFrontFace(!1,G$t.transform),G$D=G$Y,G$P=G$t):G$P!==G$t&&(G$Y._setRenderStateFrontFace(!1,G$t.transform),G$P=G$t),G$K._render(G$T),G$p._uploadLoopCount=G$j),G$t._postRenderUpdateComponents(G$T))}},G$T._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},G$T._addRenderElement=function(G$T){this._renderElements.push(G$T),this._needSort=!0},G$T._addDynamicBatchElement=function(G$T){this._dynamicBatchCombineRenderElements.push(G$T)},G$Y(0,G$T,"id",function(){return this._id}),G$l._uniqueIDCounter=0,G$l._cameraPosition=null,G$l}(),G$U=function(){function G$T(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return G$K(G$T,"laya.d3.core.render.RenderState"),G$T.clientWidth=0,G$T.clientHeight=0,G$T}(),G$E=function(){function G$P(G$T,G$l){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new G$CT(new G$Pl,0),this._corners=[new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl],this._boundingBoxCenter=new G$Pl,this._children=G$u(8),this._objects=[],this._tempBoundBoxCorners=[new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl],this._scene=G$T,this._currentDepth=G$l}G$K(G$P,"laya.d3.core.scene.OctreeNode");var G$T=G$P.prototype;return G$c.imps(G$T,{"laya.d3.core.scene.ITreeNode":!0}),G$T.init=function(G$T,G$l){var G$w=new G$Pl,G$u=new G$Pl;G$Pl.scale(G$l,-.5,G$w),G$Pl.scale(G$l,.5,G$u),G$Pl.add(G$w,G$T,G$w),G$Pl.add(G$u,G$T,G$u),this.exactBox=new G$ET(G$w,G$u),this.relaxBox=new G$ET(G$w,G$u)},G$T.addTreeNode=function(G$T){1===Collision.boxContainsBox(this._relaxBox,G$T.boundingBox)?this.addNodeDown(G$T,0):this.addObject(G$T)},G$T.addChild=function(G$T){var G$l=this._children[G$T];if(null==G$l){G$l=new G$P(this._scene,this._currentDepth+1),(this._children[G$T]=G$l)._parent=this,G$Pl.subtract(this._exactBox.max,this._exactBox.min,G$P.tempSize),G$Pl.multiply(G$P.tempSize,G$P._octreeSplit[G$T],G$P.tempCenter),G$Pl.add(this._exactBox.min,G$P.tempCenter,G$P.tempCenter),G$Pl.scale(G$P.tempSize,.25,G$P.tempSize);var G$w=new G$Pl,G$u=new G$Pl;G$Pl.subtract(G$P.tempCenter,G$P.tempSize,G$w),G$Pl.add(G$P.tempCenter,G$P.tempSize,G$u),G$l.exactBox=new G$ET(G$w,G$u),G$Pl.scale(G$P.tempSize,G$P.relax,G$P.tempSize);var G$p=new G$Pl,G$D=new G$Pl;G$Pl.subtract(G$P.tempCenter,G$P.tempSize,G$p),G$Pl.add(G$P.tempCenter,G$P.tempSize,G$D),G$l.relaxBox=new G$ET(G$p,G$D)}return G$l},G$T.addObject=function(G$T){(G$T._treeNode=this)._objects.push(G$T)},G$T.removeObject=function(G$T){if(G$T._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var G$l=this._objects.indexOf(G$T);return-1!==G$l&&(this._objects.splice(G$l,1),!0)},G$T.clearObject=function(){this._objects.length=0},G$T.addNodeUp=function(G$T,G$l){this._parent&&1!==Collision.boxContainsBox(this._exactBox,G$T.boundingBox)?this._parent.addNodeUp(G$T,G$l-1):this.addNodeDown(G$T,G$l)},G$T.addNodeDown=function(G$T,G$l){if(G$l<this._scene.treeLevel){var G$w=this.inChildIndex(G$T.boundingBoxCenter),G$u=this.addChild(G$w);1===Collision.boxContainsBox(G$u._relaxBox,G$T.boundingBox)?G$u.addNodeDown(G$T,++G$l):this.addObject(G$T)}else this.addObject(G$T)},G$T.inChildIndex=function(G$T){return 4*(G$T.z<this._boundingBoxCenter.z?0:1)+2*(G$T.y<this._boundingBoxCenter.y?0:1)+(G$T.x<this._boundingBoxCenter.x?0:1)},G$T.updateObject=function(G$T){1===Collision.boxContainsBox(this._relaxBox,G$T.boundingBox)?(this.removeObject(G$T),G$T._treeNode=null,this.addNodeDown(G$T,this._currentDepth)):this._parent&&(this.removeObject(G$T),G$T._treeNode=null,this._parent.addNodeUp(G$T,this._currentDepth-1))},G$T.cullingObjects=function(G$T,G$l,G$w,G$u,G$p){var G$D,G$P=0,G$j=0,G$J=0,G$q=this._scene._dynamicBatchManager;for(G$P=0,G$D=this._objects.length;G$P<G$D;G$P++){var G$M=this._objects[G$P];if(G$x.isVisible(G$M._owner.layer.mask)&&G$M.enable){if(G$l&&(G$s.treeSpriteCollision+=1,0===G$T.containsBoundSphere(G$M.boundingSphere)))continue;G$M._renderUpdate(G$p),G$M._distanceForSort=G$Pl.distance(G$M.boundingSphere.center,G$u)+G$M.sortingFudge;var G$z=G$M._renderElements;for(G$j=0,G$J=G$z.length;G$j<G$J;G$j++){var G$b=G$z[G$j],G$K=G$b._staticBatch;if(G$K&&G$K._material===G$b._material)G$K._addBatchRenderElement(G$b);else{var G$Y=G$b.renderObj;G$Y.triangleCount<10&&1===G$Y._vertexBufferCount&&G$Y._getIndexBuffer()&&G$b._material.renderQueue<2&&G$b._canDynamicBatch&&!G$M._owner.isStatic?G$q._addPrepareRenderElement(G$b):this._scene.getRenderQueue(G$b._material.renderQueue)._addRenderElement(G$b)}}}}for(G$P=0;G$P<8;G$P++){var G$t=this._children[G$P];if(null!=G$t){var G$A=G$l;if(G$l){var G$L=G$T.containsBoundBox(G$t._relaxBox);if(G$s.treeNodeCollision+=1,0===G$L)continue;G$A=2===G$L}G$t.cullingObjects(G$T,G$A,G$w,G$u,G$p)}}},G$T.cullingShadowObjects=function(G$T,G$l,G$w,G$u,G$p){var G$D,G$P=0,G$j=0,G$J=0;this._scene._dynamicBatchManager;for(G$P=0,G$D=this._objects.length;G$P<G$D;G$P++){var G$q=this._objects[G$P];if(G$q.castShadow&&G$x.isVisible(G$q._owner.layer.mask)&&G$q.enable){if(G$w&&0===G$T[0].containsBoundSphere(G$q.boundingSphere))continue;for(var G$M=1,G$z=G$T.length;G$M<G$z;G$M++){var G$b=G$l[G$M-1];if(0!==G$T[G$M].containsBoundSphere(G$q.boundingSphere)){var G$K=G$q._renderElements;for(G$j=0,G$J=G$K.length;G$j<G$J;G$j++)G$b._addRenderElement(G$K[G$j])}}}}for(G$P=0;G$P<8;G$P++){var G$Y=this._children[G$P];if(null!=G$Y){var G$t=G$w;if(G$w){var G$A=G$T[0].containsBoundBox(G$Y._relaxBox);if(0===G$A)continue;G$t=2===G$A}G$Y.cullingShadowObjects(G$T,G$l,G$t,G$u,G$p)}}},G$T.cullingShadowObjectsOnePSSM=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P,G$j=G$l[0],G$J=0,G$q=0,G$M=0;for(G$J=0,G$P=this._objects.length;G$J<G$P;G$J++){var G$z=this._objects[G$J];if(G$z.castShadow&&G$x.isVisible(G$z._owner.layer.mask)&&G$z.enable){if(G$u&&0===G$T.containsBoundSphere(G$z.boundingSphere))continue;G$z._renderUpdate(G$w);var G$b=G$z._renderElements;for(G$q=0,G$M=G$b.length;G$q<G$M;G$q++)G$j._addRenderElement(G$b[G$q])}}for(G$J=0;G$J<8;G$J++){var G$K=this._children[G$J];if(null!=G$K){var G$Y=G$u;if(G$u){var G$t=G$T.containsBoundBox(G$K._relaxBox);if(0===G$t)continue;G$Y=2===G$t}G$K.cullingShadowObjectsOnePSSM(G$T,G$l,G$w,G$Y,G$p,G$D)}}},G$T.renderBoudingBox=function(G$T){this._renderBoudingBox(G$T);for(var G$l=0;G$l<8;++G$l){var G$w=this._children[G$l];G$w&&G$w.renderBoudingBox(G$T)}},G$T.buildAllChild=function(G$T){if(G$T<this._scene.treeLevel)for(var G$l=0;G$l<8;G$l++){this.addChild(G$l).buildAllChild(G$T+1)}},G$T._renderBoudingBox=function(G$T){},G$Y(0,G$T,"exactBox",function(){return this._exactBox},function(G$T){this._exactBox=G$T,G$Pl.add(G$T.min,G$T.max,this._boundingBoxCenter),G$Pl.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),G$Y(0,G$T,"relaxBox",function(){return this._relaxBox},function(G$T){(this._relaxBox=G$T).getCorners(this._corners),G$CT.createfromPoints(this._corners,this._boundingSphere)}),G$P.debugMode=!1,G$P.relax=1.15,G$P.CHILDNUM=8,G$z(G$P,["tempVector0",function(){return this.tempVector0=new G$Pl},"tempSize",function(){return this.tempSize=new G$Pl},"tempCenter",function(){return this.tempCenter=new G$Pl},"_octreeSplit",function(){return this._octreeSplit=[new G$Pl(.25,.25,.25),new G$Pl(.75,.25,.25),new G$Pl(.25,.75,.25),new G$Pl(.75,.75,.25),new G$Pl(.25,.25,.75),new G$Pl(.75,.25,.75),new G$Pl(.25,.75,.75),new G$Pl(.75,.75,.75)]}]),G$P}(),G$V=(function(){function G$T(){}G$K(G$T,"laya.d3.core.scene.SceneManager")}(),function(){function G$T(G$T,G$l,G$w,G$u){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===G$T&&(G$T=1),void 0===G$l&&(G$l=1),void 0===G$w&&(G$w=1),void 0===G$u&&(G$u=1),this._r=G$T,this._g=G$l,this._b=G$w,this._a=G$u}return G$K(G$T,"laya.d3.core.trail.module.Color",null,"Color$1"),G$T.prototype.cloneTo=function(G$T){G$T._r=this._r,G$T._g=this._g,G$T._b=this._b,G$T._a=this._a},G$z(G$T,["RED",function(){return this.RED=new G$T(1,0,0,1)},"GREEN",function(){return this.GREEN=new G$T(0,1,0,1)},"BLUE",function(){return this.BLUE=new G$T(0,0,1,1)},"CYAN",function(){return this.CYAN=new G$T(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new G$T(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new G$T(1,0,1,1)},"GRAY",function(){return this.GRAY=new G$T(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new G$T(1,1,1,1)},"BLACK",function(){return this.BLACK=new G$T(0,0,0,1)}]),G$T}()),G$C=(function(){function G$T(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}G$K(G$T,"laya.d3.core.trail.module.Gradient");var G$l=G$T.prototype;G$l.setKeys=function(G$T,G$l){var G$w,G$u;this._colorKeys=G$T;for(var G$p=this.index=0;G$p<G$T.length;G$p++){var G$D=(G$w=G$T[G$p]).color;this._colorKeyData[this.index++]=G$D._r,this._colorKeyData[this.index++]=G$D._g,this._colorKeyData[this.index++]=G$D._b,this._colorKeyData[this.index++]=G$w.time}this._alphaKeys=G$l;for(var G$P=this.index=0;G$P<G$l.length;G$P++)G$u=G$l[G$P],this._alphaKeyData[this.index++]=G$u.alpha,this._alphaKeyData[this.index++]=G$u.time},G$l.cloneTo=function(G$T){var G$l=0,G$w=0,G$u=this.colorKeys,G$p=[];for(G$l=0,G$w=G$u.length;G$l<G$w;G$l++){var G$D=new G$S;G$u[G$l].cloneTo(G$D),G$p.push(G$D)}var G$P=this.alphaKeys,G$j=[];for(G$l=0,G$w=G$P.length;G$l<G$w;G$l++){var G$J=new G$C;G$P[G$l].cloneTo(G$J),G$j.push(G$J)}G$T.setKeys(G$p,G$j)},G$Y(0,G$l,"mode",function(){return this._mode},function(G$T){this._mode=G$T}),G$Y(0,G$l,"colorKeys",function(){return this._colorKeys},function(G$T){this._colorKeys=G$T;for(var G$l=this.index=0;G$l<G$T.length;G$l++){var G$w=G$T[G$l],G$u=G$w.color;this._colorKeyData[this.index++]=G$u._r,this._colorKeyData[this.index++]=G$u._g,this._colorKeyData[this.index++]=G$u._b,this._colorKeyData[this.index++]=G$w.time}}),G$Y(0,G$l,"alphaKeys",function(){return this._alphaKeys},function(G$T){this._alphaKeys=G$T;for(var G$l=this.index=0;G$l<G$T.length;G$l++){var G$w=G$T[G$l];this._alphaKeyData[this.index++]=G$w.alpha,this._alphaKeyData[this.index++]=G$w.time}})}(),function(){function G$T(G$T,G$l){this._alpha=NaN,this._time=NaN,void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),this._alpha=G$T,this._time=G$l}G$K(G$T,"laya.d3.core.trail.module.GradientAlphaKey");var G$l=G$T.prototype;return G$l.cloneTo=function(G$T){G$T.alpha=this.alpha,G$T.time=this.time},G$Y(0,G$l,"alpha",function(){return this._alpha},function(G$T){this._alpha=G$T}),G$Y(0,G$l,"time",function(){return this._time},function(G$T){this._time=G$T}),G$T}()),G$S=function(){function G$T(G$T,G$l){this._color=null,this._time=NaN,void 0===G$l&&(G$l=0),this._color=G$T||new G$V,this._time=G$l}G$K(G$T,"laya.d3.core.trail.module.GradientColorKey");var G$l=G$T.prototype;return G$l.cloneTo=function(G$T){this.color.cloneTo(G$T.color),G$T.time=this.time},G$Y(0,G$l,"color",function(){return this._color},function(G$T){this._color=G$T}),G$Y(0,G$l,"time",function(){return this._time},function(G$T){this._time=G$T}),G$T}(),G$_=(function(){function G$T(){}G$K(G$T,"laya.d3.core.trail.module.GradientMode"),G$T.Blend=0,G$T.Fixed=1}(),function(){function G$T(){}G$K(G$T,"laya.d3.core.trail.module.TextureMode"),G$T.Stretch=0,G$T.Tile=1}(),function(){function G$T(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}G$K(G$T,"laya.d3.core.trail.module.TrailKeyFrame"),G$T.prototype.cloneTo=function(G$T){G$T.time=this.time,G$T.inTangent=this.inTangent,G$T.outTangent=this.outTangent,G$T.value=this.value}}(),function(){function G$l(G$T){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new G$Pl,this._curPosition=new G$Pl,this._delVector3=new G$Pl,this._lastFixedVertexPosition=new G$Pl,this._pointAtoBVector3=new G$Pl,this._pointA=new G$Pl,this._pointB=new G$Pl,this._owner=G$T,this._id=G$l.renderElementCount++,0==this._id?G$T._owner.transform.position.cloneTo(this._lastPosition):G$T._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new G$Hl(G$_.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new G$Hl(G$_.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}G$K(G$l,"laya.d3.core.trail.TrailRenderElement");var G$T=G$l.prototype;G$c.imps(G$T,{"laya.d3.core.render.IRenderable":!0}),G$T._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},G$T._addTrailByFirstPosition=function(G$T,G$l){G$Pl.subtract(G$l,G$T,this._delVector3),G$Pl.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),G$Pl.normalize(this._pointAtoBVector3,this._pointAtoBVector3),G$Pl.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(G$T),G$T.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},G$T._addTrailByNextPosition=function(G$T){G$Pl.subtract(G$T,this._lastFixedVertexPosition,this._delVector3),G$Pl.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),G$Pl.normalize(this._pointAtoBVector3,this._pointAtoBVector3),G$Pl.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=G$Pl.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=G$ST.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(G$T),G$T.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(G$T),this._virtualVerticesCount=2)},G$T._updateVerticesByPosition=function(G$T){this._pointe=G$T.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},G$T._updateVertexBuffer2=function(){var G$T,G$l=0,G$w=0,G$u=0;for(G$u=0,G$T=(this._verticesCount+this._virtualVerticesCount)/2;G$u<G$T;G$u++)G$w=0==this._owner.textureMode?(this._VerticesToTailLength[G$u]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[G$u],this._vertices2[G$l++]=1-G$w,this._vertices2[G$l++]=1-G$w;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},G$T._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},G$T._updateDisappear=function(){var G$T,G$l=0;for(G$l=this._curDisappearIndex,G$T=(this._verticesCount+this._virtualVerticesCount)/2;G$l<G$T;G$l++)this._owner._curtime-this._everyGroupVertexBirthTime[G$l]>=this._owner.time+G$ST.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},G$T._beforeRender=function(G$T){return this._camera=G$T.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),G$Pl.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},G$T._render=function(G$T){this._isDead||(G$e.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),G$s.drawCall++,G$s.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},G$T._getVertexBuffer=function(G$T){return void 0===G$T&&(G$T=0),0===G$T?this._vertexBuffer1:1===G$T?this._vertexBuffer2:null},G$T._getVertexBuffers=function(){return this._vertexBuffers},G$T._getIndexBuffer=function(){return null},G$T.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},G$T._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},G$Y(0,G$T,"_vertexBufferCount",function(){return this._vertexBuffers.length}),G$Y(0,G$T,"triangleCount",function(){return 0}),G$l.renderElementCount=0}(),function(){function G$T(){}G$K(G$T,"laya.d3.core.trail.VertexTrail");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration1}),G$Y(1,G$T,"vertexDeclaration1",function(){return G$T._vertexDeclaration1}),G$Y(1,G$T,"vertexDeclaration2",function(){return G$T._vertexDeclaration2}),G$z(G$T,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new G$DT(32,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",41),new G$PT(24,"single",33),new G$PT(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new G$DT(4,[new G$PT(0,"single",38)])}]),G$T}()),G$TT=function(){function G$m(G$T){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=G$T}G$K(G$m,"laya.d3.graphics.DynamicBatch");var G$T=G$m.prototype;return G$c.imps(G$T,{"laya.d3.core.render.IRenderable":!0}),G$T._getVertexBuffer=function(G$T){return void 0===G$T&&(G$T=0),0===G$T?this._vertexBuffer:null},G$T._getIndexBuffer=function(){return this._indexBuffer},G$T._getCombineRenderElementFromPool=function(G$T,G$l,G$w){var G$u=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return G$u||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=G$u=new G$g,G$u._sprite3D=new G$fl),G$u._sprite3D._render._renderUpdate(G$w),G$u},G$T._getRenderElement=function(G$T,G$l,G$w){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*G$m.maxVertexCount),this._indexDatas=new Uint16Array(G$m.maxIndexCount),this._vertexBuffer=G$Hl.create(this._vertexDeclaration,G$m.maxVertexCount,35048),this._indexBuffer=G$Zl.create("ushort",G$m.maxIndexCount,35048));for(var G$u=this._merageElements.length=0,G$p=0,G$D=0,G$P=this._combineRenderElements.length;G$D<G$P;G$D++){var G$j=this._combineRenderElements[G$D],G$J=G$j.getDynamicBatchBakedVertexs(0),G$q=G$j.getBakedIndices(),G$M=G$j._sprite3D.transform._isFrontFaceInvert,G$z=G$u/(this._vertexDeclaration.vertexStride/4),G$b=G$p,G$K=G$b+G$q.length;G$j._tempBatchIndexStart=G$b,G$j._tempBatchIndexEnd=G$K,this._indexDatas.set(G$q,G$p);var G$Y=0;if(G$M)for(G$Y=G$b;G$Y<G$K;G$Y+=3){this._indexDatas[G$Y]=G$z+this._indexDatas[G$Y];var G$t=this._indexDatas[G$Y+1],G$A=this._indexDatas[G$Y+2];this._indexDatas[G$Y+1]=G$z+G$A,this._indexDatas[G$Y+2]=G$z+G$t}else for(G$Y=G$b;G$Y<G$K;G$Y+=3)this._indexDatas[G$Y]=G$z+this._indexDatas[G$Y],this._indexDatas[G$Y+1]=G$z+this._indexDatas[G$Y+1],this._indexDatas[G$Y+2]=G$z+this._indexDatas[G$Y+2];G$p+=G$q.length,this._vertexDatas.set(G$J,G$u),G$u+=G$J.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),G$D=this._combineRenderElementPoolIndex=0,G$P=this._materials.length;G$D<G$P;G$D++){var G$L=this._getCombineRenderElementFromPool(G$T,G$l,G$w);G$L._type=2,G$L._staticBatch=null;var G$i=(G$L.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[G$D]]._tempBatchIndexStart,G$W=G$D+1===this._materialToRenderElementsOffsets.length?G$p:this._combineRenderElements[this._materialToRenderElementsOffsets[G$D+1]]._tempBatchIndexStart;G$L._tempBatchIndexStart=G$i,G$L._tempBatchIndexEnd=G$W,G$L._material=this._materials[G$D],this._merageElements.push(G$L)}},G$T._addCombineRenderObjTest=function(G$T){var G$l=G$T.renderObj,G$w=this._currentCombineIndexCount+G$l._getIndexBuffer().indexCount,G$u=this._currentCombineVertexCount+G$l._getVertexBuffer().vertexCount;return!(G$m.maxVertexCount<G$u||G$m.maxIndexCount<G$w)},G$T._addCombineRenderObj=function(G$T){var G$l=G$T.renderObj;this._combineRenderElements.push(G$T),this._currentCombineIndexCount=this._currentCombineIndexCount+G$l._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+G$l._getVertexBuffer().vertexCount},G$T._addCombineMaterial=function(G$T){this._materials.push(G$T)},G$T._addMaterialToRenderElementOffset=function(G$T){this._materialToRenderElementsOffsets.push(G$T)},G$T._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},G$T._addToRenderQueue=function(G$T,G$l,G$w,G$u){this._getRenderElement(G$l,G$w,G$u);for(var G$p=0,G$D=this._materials.length;G$p<G$D;G$p++)G$T.getRenderQueue(this._materials[G$p].renderQueue)._addDynamicBatchElement(this._merageElements[G$p])},G$T._beforeRender=function(G$T){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},G$T._render=function(G$T){var G$l=G$T._batchIndexEnd-G$T._batchIndexStart;G$e.mainContext.drawElements(4,G$l,5123,2*G$T._batchIndexStart),G$s.drawCall++,G$s.trianglesFaces+=G$l/3},G$T._getVertexBuffers=function(){return null},G$Y(0,G$T,"_vertexBufferCount",function(){return 1}),G$Y(0,G$T,"triangleCount",function(){return this._indexBuffer.indexCount/3}),G$Y(0,G$T,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),G$m.maxVertexCount=2e4,G$m.maxIndexCount=4e4,G$m.maxCombineTriangleCount=10,G$m}(),G$lT=function(){function G$m(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}G$K(G$m,"laya.d3.graphics.DynamicBatchManager");var G$T=G$m.prototype;return G$T.getDynamicBatch=function(G$T,G$l){var G$w,G$u=G$T.id.toString()+G$l;return this._dynamicBatches[G$u]?G$w=this._dynamicBatches[G$u]:this._dynamicBatches[G$u]=G$w=new G$TT(G$T),G$w},G$T._garbageCollection=function(){for(var G$T in this._dynamicBatches)0===this._dynamicBatches[G$T].combineRenderElementsCount&&delete this._dynamicBatches[G$T]},G$T._addPrepareRenderElement=function(G$T){this._prepareDynamicBatchCombineElements.push(G$T)},G$T._finishCombineDynamicBatch=function(G$T){var G$l,G$w,G$u;this._prepareDynamicBatchCombineElements.sort(G$m._sortPrepareDynamicBatch);for(var G$p,G$D,G$P,G$j,G$J,G$q=-1,G$M=!0,G$z=0,G$b=-1,G$K=0,G$Y=this._prepareDynamicBatchCombineElements.length;G$K<G$Y;G$K++){var G$t=(G$D=this._prepareDynamicBatchCombineElements[G$K]).renderObj._getVertexBuffer(0).vertexDeclaration,G$A=G$w!==G$t;G$A&&(G$z=0,G$w=G$t);var G$L=G$z!==G$q;if(G$L&&(G$q=G$z),(G$A||G$L)&&(G$P=this.getDynamicBatch(G$t,G$z),G$l=null),G$M)if(G$P._addCombineRenderObjTest(G$D)){if(G$l!==(G$p=G$D._material))G$j&&(G$T.getRenderQueue(G$J._material.renderQueue)._addRenderElement(G$J),G$J=G$j=null,G$b=-1),G$j=G$p,G$b=G$P.combineRenderElementsCount,G$J=G$D,G$l=G$p;else if(G$j){var G$i=G$J.renderObj,G$W=G$D.renderObj;G$i._getVertexBuffer().vertexCount+G$W._getVertexBuffer().vertexCount>G$TT.maxVertexCount||G$i._getIndexBuffer().indexCount+G$W._getIndexBuffer().indexCount>G$TT.maxIndexCount?(G$T.getRenderQueue(G$J._material.renderQueue)._addRenderElement(G$J),G$j=G$p,G$b=G$P.combineRenderElementsCount,G$J=G$D):(G$P._addCombineMaterial(G$j),G$P._addMaterialToRenderElementOffset(G$b),G$P._addCombineRenderObj(G$J),G$J=G$j=null,G$b=-1,G$P._addCombineRenderObj(G$D))}else G$P._addCombineRenderObj(G$D);G$M=!0}else G$j&&(G$T.getRenderQueue(G$J._material.renderQueue)._addRenderElement(G$J),G$J=G$j=null,G$b=-1),G$z++,G$M=!1;else G$u=this._prepareDynamicBatchCombineElements[G$K-1],G$P._addMaterialToRenderElementOffset(G$P.combineRenderElementsCount),G$l=G$u._material,G$P._addCombineMaterial(G$l),G$P._addCombineRenderObj(G$u),G$M=!0,G$l!==(G$p=G$D._material)?(G$j=G$p,G$b=G$P.combineRenderElementsCount,G$J=G$D):G$P._addCombineRenderObj(G$D),G$l=G$p}G$j&&(G$T.getRenderQueue(G$J._material.renderQueue)._addRenderElement(G$J),G$J=G$j=null,G$b=-1),this._prepareDynamicBatchCombineElements.length=0},G$T._clearRenderElements=function(){for(var G$T in this._dynamicBatches)this._dynamicBatches[G$T]._clearRenderElements()},G$T._addToRenderQueue=function(G$T,G$l,G$w,G$u){for(var G$p in this._dynamicBatches){var G$D=this._dynamicBatches[G$p];0<G$D.combineRenderElementsCount&&G$D._addToRenderQueue(G$T,G$l,G$w,G$u)}},G$T.dispose=function(){this._dynamicBatches=null},G$m._sortPrepareDynamicBatch=function(G$T,G$l){return G$T._mainSortID-G$l._mainSortID},G$m}(),G$wT=function(){function G$T(){}return G$K(G$T,"laya.d3.graphics.FrustumCulling"),G$T.renderShadowObjectCulling=function(G$T,G$l,G$w,G$u,G$p){var G$D=0,G$P=0,G$j=0,G$J=0;for(G$D=0,G$j=G$w.length;G$D<G$j;G$D++){var G$q=G$w[G$D];G$q&&G$q._clearRenderElements()}var G$M,G$z,G$b,G$K=G$T._cullingRenders;if(1<G$p){for(G$D=0,G$j=G$T._cullingRendersLength;G$D<G$j;G$D++)if((G$M=G$K[G$D]).castShadow&&G$x.isVisible(G$M._owner.layer.mask)&&G$M.enable)for(var G$Y=1,G$t=G$l.length;G$Y<G$t;G$Y++)if(G$z=G$w[G$Y-1],0!==G$l[G$Y].containsBoundSphere(G$M.boundingSphere))for(G$P=0,G$J=(G$b=G$M._renderElements).length;G$P<G$J;G$P++)G$z._addRenderElement(G$b[G$P])}else for(G$D=0,G$j=G$T._cullingRendersLength;G$D<G$j;G$D++)if((G$M=G$K[G$D]).castShadow&&G$x.isVisible(G$M._owner.layer.mask)&&G$M.enable&&0!==G$l[0].containsBoundSphere(G$M.boundingSphere))for(G$M._renderUpdate(G$u),G$z=G$w[0],G$P=0,G$J=(G$b=G$M._renderElements).length;G$P<G$J;G$P++)G$z._addRenderElement(G$b[G$P])},G$T.renderShadowObjectCullingOctree=function(G$T,G$l,G$w,G$u,G$p){for(var G$D=0,G$P=G$w.length;G$D<G$P;G$D++){var G$j=G$w[G$D];G$j&&G$j._clearRenderElements()}1<G$p?G$T.treeRoot.cullingShadowObjects(G$l,G$w,!0,0,G$T):G$T.treeRoot.cullingShadowObjectsOnePSSM(G$l[0],G$w,G$u,!0,0,G$T)},G$T.renderObjectCulling=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=0,G$j=0,G$J=0,G$q=0,G$M=G$l._quenes,G$z=G$l._dynamicBatchManager,G$b=G$l._cullingRenders;for(G$P=0,G$j=G$M.length;G$P<G$j;G$P++){var G$K=G$M[G$P];G$K&&G$K._clearRenderElements()}var G$Y=G$uT._staticBatchManagers;for(G$P=0,G$j=G$Y.length;G$P<G$j;G$P++)G$Y[G$P]._clearRenderElements();G$z._clearRenderElements();var G$t=G$w.transform.position;for(G$P=0,G$j=G$l._cullingRendersLength;G$P<G$j;G$P++){var G$A=G$b[G$P];if(G$x.isVisible(G$A._owner.layer.mask)&&G$A.enable&&0!==G$T.containsBoundSphere(G$A.boundingSphere)&&G$A._renderUpdate(G$D)){G$A._distanceForSort=G$Pl.distance(G$A.boundingSphere.center,G$t)+G$A.sortingFudge;var G$L=G$A._renderElements;for(G$J=0,G$q=G$L.length;G$J<G$q;G$J++){var G$i=G$L[G$J],G$W=G$i._staticBatch;if(G$W&&G$W._material===G$i._material)G$W._addBatchRenderElement(G$i);else{var G$m=G$i.renderObj;G$m.triangleCount<10&&1===G$m._vertexBufferCount&&G$m._getIndexBuffer()&&G$i._material.renderQueue<2&&G$i._canDynamicBatch&&!G$A._owner.isStatic?G$z._addPrepareRenderElement(G$i):G$l.getRenderQueue(G$i._material.renderQueue)._addRenderElement(G$i)}}}}for(G$P=0,G$j=G$Y.length;G$P<G$j;G$P++)G$Y[G$P]._addToRenderQueue(G$l,G$u,G$p,G$D);G$z._finishCombineDynamicBatch(G$l),G$z._addToRenderQueue(G$l,G$u,G$p,G$D)},G$T.renderObjectCullingOctree=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=0,G$j=0,G$J=G$l._quenes,G$q=G$l._dynamicBatchManager;for(G$P=0,G$j=G$J.length;G$P<G$j;G$P++){var G$M=G$J[G$P];G$M&&G$M._clearRenderElements()}var G$z=G$uT._staticBatchManagers;for(G$P=0,G$j=G$z.length;G$P<G$j;G$P++)G$z[G$P]._clearRenderElements();for(G$q._clearRenderElements(),G$l._cullingRenders.length=0,G$l.treeRoot.cullingObjects(G$T,!0,0,G$w.transform.position,G$D),G$P=0,G$j=G$z.length;G$P<G$j;G$P++)G$z[G$P]._addToRenderQueue(G$l,G$u,G$p,G$D);G$q._finishCombineDynamicBatch(G$l),G$q._addToRenderQueue(G$l,G$u,G$p,G$D)},G$T.renderObjectCullingNoBoundFrustum=function(G$T,G$l,G$w,G$u,G$p){var G$D=0,G$P=0,G$j=0,G$J=0,G$q=G$T._quenes,G$M=G$T._dynamicBatchManager,G$z=G$T._cullingRenders;for(G$D=0,G$P=G$q.length;G$D<G$P;G$D++){var G$b=G$q[G$D];G$b&&G$b._clearRenderElements()}var G$K=G$uT._staticBatchManagers;for(G$D=0,G$P=G$K.length;G$D<G$P;G$D++)G$K[G$D]._clearRenderElements();G$M._clearRenderElements();var G$Y=G$l.transform.position;for(G$D=0,G$P=G$T._cullingRendersLength;G$D<G$P;G$D++){var G$t=G$z[G$D];if(G$x.isVisible(G$t._owner.layer.mask)&&G$t.enable){G$t._renderUpdate(G$p),G$t._distanceForSort=G$Pl.distance(G$t.boundingSphere.center,G$Y)+G$t.sortingFudge;var G$A=G$t._renderElements;for(G$j=0,G$J=G$A.length;G$j<G$J;G$j++){var G$L=G$A[G$j],G$i=G$L._staticBatch;if(G$i&&G$i._material===G$L._material)G$i._addBatchRenderElement(G$L);else{var G$W=G$L.renderObj;G$W.triangleCount<10&&1===G$W._vertexBufferCount&&G$W._getIndexBuffer()&&G$L._material.renderQueue<2&&G$L._canDynamicBatch&&!G$t._owner.isStatic?G$M._addPrepareRenderElement(G$L):G$T.getRenderQueue(G$L._material.renderQueue)._addRenderElement(G$L)}}}}for(G$D=0,G$P=G$K.length;G$D<G$P;G$D++)G$K[G$D]._addToRenderQueue(G$T,G$w,G$u,G$p);G$M._finishCombineDynamicBatch(G$T),G$M._addToRenderQueue(G$T,G$w,G$u,G$p)},G$T}(),G$uT=function(){function G$D(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}G$K(G$D,"laya.d3.graphics.StaticBatchManager");var G$T=G$D.prototype;return G$T._finishInit=function(){for(var G$T in this._staticBatches)this._staticBatches[G$T]._finishInit();this._initBatchRenderElements.length=0},G$T._initStaticBatchs=function(G$T){throw new Error("StaticBatchManager:must override this function.")},G$T._addInitBatchSprite=function(G$T){for(var G$l=G$T._render._renderElements,G$w=0,G$u=G$l.length;G$w<G$u;G$w++)this._initBatchRenderElements.push(G$l[G$w])},G$T._clearRenderElements=function(){for(var G$T in this._staticBatches)this._staticBatches[G$T]._clearRenderElements()},G$T._garbageCollection=function(G$T){var G$l=G$T._staticBatch,G$w=G$l._initBatchRenderElements,G$u=G$w.indexOf(G$T);G$w.splice(G$u,1),0===G$w.length&&(G$l.dispose(),delete this._staticBatches[G$l._key])},G$T._addToRenderQueue=function(G$T,G$l,G$w,G$u){for(var G$p in this._staticBatches){var G$D=this._staticBatches[G$p];0<G$D._batchRenderElements.length&&G$D._updateToRenderQueue(G$T,G$u)}},G$T.dispose=function(){this._staticBatches=null},G$D._addToStaticBatchQueue=function(G$T){G$T instanceof laya.d3.core.RenderableSprite3D&&G$T._addToInitStaticBatchManager();for(var G$l=0,G$w=G$T.numChildren;G$l<G$w;G$l++)G$D._addToStaticBatchQueue(G$T._childs[G$l])},G$D.combine=function(G$T,G$l){var G$w,G$u=0,G$p=0;if(G$l)for(G$u=0,G$p=G$l.length;G$u<G$p;G$u++){G$l[G$u]._addToInitStaticBatchManager()}else G$T&&G$D._addToStaticBatchQueue(G$T);for(G$u=0,G$p=G$D._staticBatchManagers.length;G$u<G$p;G$u++)(G$w=G$D._staticBatchManagers[G$u])._initStaticBatchs(G$T),G$w._finishInit()},G$D._staticBatchManagers=[],G$D}(),G$pT=function(){function G$T(G$T,G$l,G$w){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=G$T,this._manager=G$l,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=G$w}G$K(G$T,"laya.d3.graphics.StaticBatch");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),G$l._binarySearch=function(G$T){for(var G$l=0,G$w=this._batchRenderElements.length-1,G$u=0;G$l<=G$w;)G$u=Math.floor((G$l+G$w)/2),this._compareBatchRenderElement(this._batchRenderElements[G$u],G$T)?G$w=G$u-1:G$l=G$u+1;return G$l},G$l._compareBatchRenderElement=function(G$T,G$l){throw new Error("StaticBatch:must override this function.")},G$l._getVertexDecLightMap=function(G$T){return G$T===G$ZT.vertexDeclaration?G$xT.vertexDeclaration:G$T===G$$T.vertexDeclaration?G$vT.vertexDeclaration:G$T===G$rT.vertexDeclaration?G$mT.vertexDeclaration:G$T===G$nT.vertexDeclaration?null:G$T===G$tT.vertexDeclaration?G$AT.vertexDeclaration:G$T===G$XT.vertexDeclaration?G$FT.vertexDeclaration:G$T===G$eT.vertexDeclaration?G$yT.vertexDeclaration:G$T===G$HT.vertexDeclaration?G$RT.vertexDeclaration:G$T===G$$T.vertexDeclaration?G$vT.vertexDeclaration:G$T===G$IT.vertexDeclaration?G$cT.vertexDeclaration:G$T===G$nT.vertexDeclaration?null:G$T===G$tT.vertexDeclaration?G$AT.vertexDeclaration:G$T===G$kT.vertexDeclaration?G$OT.vertexDeclaration:G$T===G$eT.vertexDeclaration?G$yT.vertexDeclaration:G$T},G$l._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},G$l._addBatchRenderElement=function(G$T){this._batchRenderElements.splice(this._binarySearch(G$T),0,G$T)},G$l._updateToRenderQueue=function(G$T,G$l){this._combineRenderElementPoolIndex=0,this._getRenderElement(G$T.getRenderQueue(this._material.renderQueue)._renderElements,G$T,G$l)},G$l._getRenderElement=function(G$T,G$l,G$w){throw new Error("StaticBatch:must override this function.")},G$l._finishInit=function(){throw new Error("StaticBatch:must override this function.")},G$l._clearRenderElements=function(){this._batchRenderElements.length=0},G$l.dispose=function(){},G$l._getVertexBuffer=function(G$T){return void 0===G$T&&(G$T=0),null},G$l._getIndexBuffer=function(){return null},G$l._beforeRender=function(G$T){return!0},G$l._render=function(G$T){},G$l._getVertexBuffers=function(){return null},G$Y(0,G$l,"_vertexBufferCount",function(){return 1}),G$Y(0,G$l,"triangleCount",function(){return 0}),G$T.combine=function(G$T){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),G$uT.combine(G$T)},G$T.maxBatchVertexCount=65535,G$T}(),G$DT=function(){function G$P(G$T,G$l){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++G$P._uniqueIDCounter,this._id>G$P.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",G$P.maxVertexDeclaration);this._shaderValues=new G$bl,this._vertexElementsDic={},this._vertexStride=G$T,this._vertexElements=G$l;for(var G$w=0;G$w<G$l.length;G$w++){var G$u=G$l[G$w],G$p=G$u.elementUsage;this._vertexElementsDic[G$p]=G$u;var G$D=[G$P._getTypeSize(G$u.elementFormat)/4,5126,!1,this._vertexStride,G$u.offset];switch(this._shaderValues.setValue(G$p,G$D),G$p){case 1:this._addShaderDefine(G$sl.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(G$sl.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(G$sl.SHADERDEFINE_UV1)}}}G$K(G$P,"laya.d3.graphics.VertexDeclaration");var G$T=G$P.prototype;return G$T._addShaderDefine=function(G$T){this._shaderDefineValue|=G$T},G$T._removeShaderDefine=function(G$T){this._shaderDefineValue&=~G$T},G$T.getVertexElements=function(){return this._vertexElements.slice()},G$T.getVertexElementByUsage=function(G$T){return this._vertexElementsDic[G$T]},G$T.unBinding=function(){},G$Y(0,G$T,"shaderDefineValue",function(){return this._shaderDefineValue}),G$Y(0,G$T,"id",function(){return this._id}),G$Y(0,G$T,"vertexStride",function(){return this._vertexStride}),G$Y(0,G$T,"shaderValues",function(){return this._shaderValues}),G$P._getTypeSize=function(G$T){switch(G$T){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},G$P.getVertexStride=function(G$T){for(var G$l=0,G$w=0;G$w<G$T.Length;G$w++){var G$u=G$T[G$w],G$p=G$u.offset+G$P._getTypeSize(G$u.elementFormat);G$l<G$p&&(G$l=G$p)}return G$l},G$P._maxVertexDeclarationBit=1e3,G$P._uniqueIDCounter=1,G$z(G$P,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),G$P}(),G$PT=function(){function G$T(G$T,G$l,G$w){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=G$T,this.elementFormat=G$l,this.elementUsage=G$w}return G$K(G$T,"laya.d3.graphics.VertexElement"),G$T}(),G$jT=(function(){function G$T(){}G$K(G$T,"laya.d3.graphics.VertexElementFormat"),G$T.Single="single",G$T.Vector2="vector2",G$T.Vector3="vector3",G$T.Vector4="vector4",G$T.Color="color",G$T.Byte4="byte4",G$T.Short2="short2",G$T.Short4="short4",G$T.NormalizedShort2="normalizedshort2",G$T.NormalizedShort4="normalizedshort4",G$T.HalfVector2="halfvector2",G$T.HalfVector4="halfvector4"}(),function(){function G$T(){}G$K(G$T,"laya.d3.graphics.VertexElementUsage"),G$T.POSITION0=0,G$T.COLOR0=1,G$T.TEXTURECOORDINATE0=2,G$T.NORMAL0=3,G$T.BINORMAL0=4,G$T.TANGENT0=5,G$T.BLENDINDICES0=6,G$T.BLENDWEIGHT0=7,G$T.DEPTH0=8,G$T.FOG0=9,G$T.POINTSIZE0=10,G$T.SAMPLE0=11,G$T.TESSELLATEFACTOR0=12,G$T.COLOR1=13,G$T.NEXTTEXTURECOORDINATE0=14,G$T.TEXTURECOORDINATE1=15,G$T.NEXTTEXTURECOORDINATE1=16,G$T.CORNERTEXTURECOORDINATE0=17,G$T.VELOCITY0=18,G$T.STARTCOLOR0=19,G$T.STARTSIZE=20,G$T.AGEADDSCALE0=21,G$T.STARTROTATION=22,G$T.ENDCOLOR0=23,G$T.STARTLIFETIME=24,G$T.TIME0=33,G$T.SHAPEPOSITIONSTARTLIFETIME=30,G$T.DIRECTIONTIME=32,G$T.SIZEROTATION0=27,G$T.RADIUS0=28,G$T.RADIAN0=29,G$T.STARTSPEED=31,G$T.RANDOM0=34,G$T.RANDOM1=35,G$T.SIMULATIONWORLDPOSTION=36,G$T.SIMULATIONWORLDROTATION=37,G$T.TEXTURECOORDINATE0X=38,G$T.TEXTURECOORDINATE0X1=39,G$T.TEXTURECOORDINATE0Y=40,G$T.OFFSETVECTOR=41}(),function(){function G$T(G$T,G$l,G$w){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=G$T,this._textureCoordinate0=G$l,this._time=G$w}G$K(G$T,"laya.d3.graphics.VertexGlitter");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate0}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"time",function(){return this._time}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(24,[new G$PT(0,"vector3",0),new G$PT(12,"vector2",2),new G$PT(20,"single",33)])}])}(),function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=G$T,this._position=G$l,this._velocity=G$w,this._startColor=G$u,this._endColor=G$p,this._sizeRotation=G$D,this._radius=G$P,this._radian=G$j,this._ageAddScale=G$J,this._time=G$q}G$K(G$T,"laya.d3.graphics.VertexParticle");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"endColor",function(){return this._endColor}),G$Y(0,G$l,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),G$Y(0,G$l,"sizeRotation",function(){return this._sizeRotation}),G$Y(0,G$l,"velocity",function(){return this._velocity}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"startColor",function(){return this._startColor}),G$Y(0,G$l,"radius",function(){return this._radius}),G$Y(0,G$l,"radian",function(){return this._radian}),G$Y(0,G$l,"ageAddScale",function(){return this._ageAddScale}),G$Y(0,G$l,"time",function(){return this._time}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(116,[new G$PT(0,"vector4",17),new G$PT(16,"vector3",0),new G$PT(28,"vector3",18),new G$PT(40,"vector4",19),new G$PT(56,"vector4",23),new G$PT(72,"vector3",27),new G$PT(84,"vector2",28),new G$PT(92,"vector4",29),new G$PT(108,"single",24),new G$PT(112,"single",33)])}])}(),function(){function G$T(G$T){this._position=null,this._position=G$T}G$K(G$T,"laya.d3.graphics.VertexPosition");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(12,[new G$PT(0,"vector3",0)])}]),G$T}()),G$JT=function(){function G$T(G$T,G$l){this._position=null,this._normal=null,this._position=G$T,this._normal=G$l}G$K(G$T,"laya.d3.graphics.VertexPositionNormal");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(24,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3)])}]),G$T}(),G$qT=function(){function G$T(G$T,G$l,G$w){this._position=null,this._normal=null,this._color=null,this._position=G$T,this._normal=G$l,this._color=G$w}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColor");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(40,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1)])}]),G$T}(),G$MT=function(){function G$T(G$T,G$l,G$w,G$u,G$p){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._blendIndex=G$u,this._blendWeight=G$p}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorSkin");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(72,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector4",7),new G$PT(56,"vector4",6)])}]),G$T}(),G$zT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._tangent=G$u,this._blendIndex=G$p,this._blendWeight=G$D}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(88,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector4",7),new G$PT(56,"vector4",6),new G$PT(72,"vector4",5)])}]),G$T}(),G$bT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._tangent=G$u,this._blendIndex=G$p,this._blendWeight=G$D}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(84,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector4",7),new G$PT(56,"vector4",6),new G$PT(72,"vector3",5)])}]),G$T}(),G$KT=function(){function G$T(G$T,G$l,G$w,G$u){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._tangent=G$u}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorSTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(56,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector4",5)])}]),G$T}(),G$YT=function(){function G$T(G$T,G$l,G$w,G$u){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._tangent=G$u}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(52,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector3",5)])}]),G$T}(),G$tT=function(){function G$T(G$T,G$l,G$w,G$u){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate=G$u}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTexture");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(48,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2)])}]),G$T}(),G$AT=function(){function G$T(G$T,G$l,G$w,G$u,G$p){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate0=G$u,this._textureCoordinate1=G$p}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(56,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector2",15)])}]),G$T}(),G$LT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate0=G$u,this._textureCoordinate1=G$p,this._blendIndex=G$D,this._blendWeight=G$P}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(88,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector2",15),new G$PT(56,"vector4",7),new G$PT(72,"vector4",6)])}]),G$T}(),G$iT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate0=G$u,this._textureCoordinate1=G$p,this._tangent=G$D,this._blendIndex=G$P,this._blendWeight=G$j}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(104,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector2",15),new G$PT(56,"vector4",7),new G$PT(72,"vector4",6),new G$PT(88,"vector4",5)])}]),G$T}(),G$WT=function(){function G$T(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$l.VertexPositionNormalColorTexture0SkinTangent=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate0=G$u,this._textureCoordinate1=G$p,this._tangent=G$D,this._blendIndex=G$P,this._blendWeight=G$j},G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(100,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector2",15),new G$PT(56,"vector4",7),new G$PT(72,"vector4",6),new G$PT(88,"vector3",5)])}]),G$T}(),G$mT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate0=G$u,this._textureCoordinate1=G$p,this._tangent=G$D}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(72,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector2",15),new G$PT(56,"vector4",5)])}]),G$T}(),G$cT=function(){function G$T(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$l.VertexPositionNormalColorTexture0Tangent=function(G$T,G$l,G$w,G$u,G$p,G$D){this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate0=G$u,this._textureCoordinate1=G$p,this._tangent=G$D},G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(68,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector2",15),new G$PT(56,"vector3",5)])}]),G$T}(),G$aT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate=G$u,this._blendIndex=G$p,this._blendWeight=G$D}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(80,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector4",7),new G$PT(64,"vector4",6)])}]),G$T}(),G$BT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate=G$u,this._tangent=G$p,this._blendIndex=G$D,this._blendWeight=G$P}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(96,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector4",7),new G$PT(64,"vector4",6),new G$PT(80,"vector4",5)])}]),G$T}(),G$sT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate=G$u,this._tangent=G$p,this._blendIndex=G$D,this._blendWeight=G$P}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(92,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector4",7),new G$PT(64,"vector4",6),new G$PT(80,"vector3",5)])}]),G$T}(),G$rT=function(){function G$T(G$T,G$l,G$w,G$u,G$p){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate=G$u,this._tangent=G$p}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(64,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector4",5)])}]),G$T}(),G$IT=function(){function G$T(G$T,G$l,G$w,G$u,G$p){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._color=G$w,this._textureCoordinate=G$u,this._tangent=G$p}G$K(G$T,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"color",function(){return this._color}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(60,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",1),new G$PT(40,"vector2",2),new G$PT(48,"vector3",5)])}]),G$T}(),G$QT=function(){function G$T(G$T,G$l,G$w){this._position=null,this._normal=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._tangent=G$w}G$K(G$T,"laya.d3.graphics.VertexPositionNormalSTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(40,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector4",5)])}]),G$T}(),G$oT=function(){function G$T(G$T,G$l,G$w){this._position=null,this._normal=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._tangent=G$w}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(36,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector3",5)])}]),G$T}(),G$eT=function(){function G$T(G$T,G$l,G$w){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=G$T,this._normal=G$l,this._textureCoordinate=G$w}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTexture");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(32,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2)])}]),G$T}(),G$yT=function(){function G$T(G$T,G$l,G$w,G$u){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=G$T,this._normal=G$l,this._textureCoordinate0=G$w,this._textureCoordinate1=G$u}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(40,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector2",15)])}]),G$T}(),G$vT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=G$T,this._normal=G$l,this._textureCoordinate0=G$w,this._textureCoordinate1=G$u,this._blendIndex=G$p,this._blendWeight=G$D}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(72,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector2",15),new G$PT(40,"vector4",7),new G$PT(56,"vector4",6)])}]),G$T}(),G$xT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._textureCoordinate0=G$w,this._textureCoordinate1=G$u,this._tangent=G$p,this._blendIndex=G$D,this._blendWeight=G$P}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(88,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector2",15),new G$PT(40,"vector4",7),new G$PT(56,"vector4",6),new G$PT(72,"vector4",5)])}]),G$T}(),G$RT=function(){function G$T(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$l.VertexPositionNormalTexture0SkinTangent=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){this._position=G$T,this._normal=G$l,this._textureCoordinate0=G$w,this._textureCoordinate1=G$u,this._tangent=G$p,this._blendIndex=G$D,this._blendWeight=G$P},G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(84,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector2",15),new G$PT(40,"vector4",7),new G$PT(56,"vector4",6),new G$PT(72,"vector3",5)])}]),G$T}(),G$FT=function(){function G$T(G$T,G$l,G$w,G$u,G$p){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._textureCoordinate0=G$w,this._textureCoordinate1=G$u,this._tangent=G$p}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(56,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector2",15),new G$PT(40,"vector4",5)])}]),G$T}(),G$OT=function(){function G$T(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$l.VertexPositionNormalTexture0Tangent=function(G$T,G$l,G$w,G$u,G$p){this._position=G$T,this._normal=G$l,this._textureCoordinate0=G$w,this._textureCoordinate1=G$u,this._tangent=G$p},G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(52,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector2",15),new G$PT(40,"vector3",5)])}]),G$T}(),G$$T=function(){function G$T(G$T,G$l,G$w,G$u,G$p){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=G$T,this._normal=G$l,this._textureCoordinate=G$w,this._blendIndex=G$u,this._blendWeight=G$p}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTextureSkin");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(64,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector4",7),new G$PT(48,"vector4",6)])}]),G$T}(),G$ZT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._textureCoordinate=G$w,this._tangent=G$u,this._blendIndex=G$p,this._blendWeight=G$D}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(80,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector4",7),new G$PT(48,"vector4",6),new G$PT(64,"vector4",5)])}]),G$T}(),G$HT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._textureCoordinate=G$w,this._tangent=G$u,this._blendIndex=G$p,this._blendWeight=G$D}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(76,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector4",7),new G$PT(48,"vector4",6),new G$PT(64,"vector3",5)])}]),G$T}(),G$XT=function(){function G$T(G$T,G$l,G$w,G$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._textureCoordinate=G$w,this._tangent=G$u}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(48,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector4",5)])}]),G$T}(),G$kT=function(){function G$T(G$T,G$l,G$w,G$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=G$T,this._normal=G$l,this._textureCoordinate=G$w,this._tangent=G$u}G$K(G$T,"laya.d3.graphics.VertexPositionNormalTextureTangent");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(44,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector3",5)])}]),G$T}(),G$nT=function(){function G$T(G$T,G$l,G$w){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=G$T,this._normal=G$l,this._textureCoordinate=G$w}G$K(G$T,"laya.d3.graphics.VertexPositionNTBTexture");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(56,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector3",5),new G$PT(36,"vector3",4),new G$PT(48,"vector2",2)])}]),G$T}(),G$dT=function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=G$T,this._normal=G$l,this._textureCoordinate0=G$u,this._textureCoordinate1=G$p,this._tangent=G$D,G$w=G$w,this._blendIndex=G$P,this._blendWeight=G$j}G$K(G$T,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"tangent",function(){return this._tangent}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(0,G$l,"textureCoordinate1",function(){return this._textureCoordinate1}),G$Y(0,G$l,"blendIndex",function(){return this._blendIndex}),G$Y(0,G$l,"blendWeight",function(){return this._blendWeight}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(96,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector3",5),new G$PT(36,"vector3",4),new G$PT(48,"vector2",2),new G$PT(56,"vector2",15),new G$PT(64,"vector4",7),new G$PT(80,"vector4",6)])}]),G$T}(),G$GT=function(){function G$T(G$T,G$l,G$w){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=G$T,this._normal=G$l,this._textureCoordinate=G$w}G$K(G$T,"laya.d3.graphics.VertexPositionNTBTextureSkin");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"textureCoordinate",function(){return this._textureCoordinate}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(88,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector3",5),new G$PT(36,"vector3",4),new G$PT(48,"vector2",2),new G$PT(56,"vector4",7),new G$PT(72,"vector4",6)])}]),G$T}(),G$NT=(function(){function G$T(G$T,G$l,G$w,G$u){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=G$T,this._normal=G$l,this._textureCoord0=G$w,this._textureCoord1=G$u}G$K(G$T,"laya.d3.graphics.VertexPositionTerrain");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"normal",function(){return this._normal}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"textureCoord0",function(){return this._textureCoord0}),G$Y(0,G$l,"textureCoord1",function(){return this._textureCoord1}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(40,[new G$PT(0,"vector3",0),new G$PT(12,"vector3",3),new G$PT(24,"vector2",2),new G$PT(32,"vector2",15)])}])}(),function(){function G$T(G$T,G$l){this._position=null,this._textureCoordinate0=null,this._position=G$T,this._textureCoordinate0=G$l}G$K(G$T,"laya.d3.graphics.VertexPositionTexture0");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"position",function(){return this._position}),G$Y(0,G$l,"textureCoordinate0",function(){return this._textureCoordinate0}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(20,[new G$PT(0,"vector3",0),new G$PT(12,"vector2",2)])}]),G$T}()),G$hT=(function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$z,G$b,G$K){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=G$T,this._positionStartLifeTime=G$l,this._velocity=G$w,this._startColor=G$u,this._startSize=G$p,this._startRotation0=G$D,this._startRotation1=G$P,this._startRotation2=G$j,this._startLifeTime=G$J,this._time=G$q,this._startSpeed=G$M,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=G$K}G$K(G$T,"laya.d3.graphics.VertexShurikenParticleBillboard");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),G$Y(0,G$l,"random1",function(){return this._randoms1}),G$Y(0,G$l,"startRotation2",function(){return this._startRotation2}),G$Y(0,G$l,"positionStartLifeTime",function(){return this._positionStartLifeTime}),G$Y(0,G$l,"velocity",function(){return this._velocity}),G$Y(0,G$l,"random0",function(){return this._randoms0}),G$Y(0,G$l,"startSize",function(){return this._startSize}),G$Y(0,G$l,"startColor",function(){return this._startColor}),G$Y(0,G$l,"startRotation0",function(){return this._startRotation0}),G$Y(0,G$l,"startRotation1",function(){return this._startRotation1}),G$Y(0,G$l,"startLifeTime",function(){return this._startLifeTime}),G$Y(0,G$l,"time",function(){return this._time}),G$Y(0,G$l,"startSpeed",function(){return this._startSpeed}),G$Y(0,G$l,"simulationWorldPostion",function(){return this._simulationWorldPostion}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(152,[new G$PT(0,"vector4",17),new G$PT(16,"vector4",30),new G$PT(32,"vector4",32),new G$PT(48,"vector4",19),new G$PT(64,"vector3",20),new G$PT(76,"vector3",22),new G$PT(88,"single",31),new G$PT(92,"vector4",34),new G$PT(108,"vector4",35),new G$PT(124,"vector3",36),new G$PT(136,"vector4",37)])}])}(),function(){function G$T(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$z,G$b,G$K){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=G$T,this._positionStartLifeTime=G$l,this._velocity=G$w,this._startColor=G$u,this._startSize=G$p,this._startRotation0=G$D,this._startRotation1=G$P,this._startRotation2=G$j,this._startLifeTime=G$J,this._time=G$q,this._startSpeed=G$M,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=G$K}G$K(G$T,"laya.d3.graphics.VertexShurikenParticleMesh");var G$l=G$T.prototype;G$c.imps(G$l,{"laya.d3.graphics.IVertex":!0}),G$Y(0,G$l,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),G$Y(0,G$l,"velocity",function(){return this._velocity}),G$Y(0,G$l,"position",function(){return this._positionStartLifeTime}),G$Y(0,G$l,"random0",function(){return this._randoms0}),G$Y(0,G$l,"startSize",function(){return this._startSize}),G$Y(0,G$l,"startColor",function(){return this._startColor}),G$Y(0,G$l,"startRotation0",function(){return this._startRotation0}),G$Y(0,G$l,"startRotation1",function(){return this._startRotation1}),G$Y(0,G$l,"random1",function(){return this._randoms1}),G$Y(0,G$l,"startRotation2",function(){return this._startRotation2}),G$Y(0,G$l,"startLifeTime",function(){return this._startLifeTime}),G$Y(0,G$l,"time",function(){return this._time}),G$Y(0,G$l,"startSpeed",function(){return this._startSpeed}),G$Y(0,G$l,"simulationWorldPostion",function(){return this._simulationWorldPostion}),G$Y(0,G$l,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$Y(1,G$T,"vertexDeclaration",function(){return G$T._vertexDeclaration}),G$z(G$T,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$DT(172,[new G$PT(0,"vector3",0),new G$PT(12,"vector4",1),new G$PT(28,"vector2",2),new G$PT(36,"vector4",30),new G$PT(52,"vector4",32),new G$PT(68,"vector4",19),new G$PT(84,"vector3",20),new G$PT(96,"vector3",22),new G$PT(108,"single",31),new G$PT(112,"vector4",34),new G$PT(128,"vector4",35),new G$PT(144,"vector3",36),new G$PT(156,"vector4",37)])}])}(),function(){function G$W(G$T,G$l,G$w,G$u,G$p,G$D){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=G$w,this._materials=G$u,this._subMeshes=G$p,this._materialMap=G$D,this._version=G$l,this._onLoaded(G$T)}G$K(G$W,"laya.d3.loaders.LoadModelV01");var G$T=G$W.prototype;return G$T._onLoaded=function(G$T){this._readData=G$T,this.READ_BLOCK();for(var G$l=0;G$l<this._BLOCK.count;G$l++){var G$w=this._readData.getUint16(),G$u=this._strings[G$w],G$p=this["READ_"+G$u];if(null==G$p)throw new Error("model file err,no this function:"+G$w+" "+G$u);if(!G$p.call(this))break}return this._mesh},G$T.onError=function(){},G$T._readString=function(){return this._strings[this._readData.getUint16()]},G$T.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},G$T.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},G$T.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var G$T=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var G$l=0;G$l<this._STRINGS.size;G$l++)this._strings[G$l]=this._readData.readUTFString();return this._readData.pos=G$T,!0},G$T.READ_MATERIAL=function(){var G$T=this._readData.getUint16(),G$l=(this._readString(),this._readString());return this._materials[G$T]="null"!==G$l?G$L.getRes(this._materialMap[G$l]):new G$ol,!0},G$T.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var G$T,G$l=this._readData.__getBuffer(),G$w=0,G$u=this._readData.getUint32(),G$p=this._readData.getUint32(),G$D=(new Float32Array(G$l.slice(G$u+this._DATA.offset,G$u+this._DATA.offset+G$p)),this._readData.getUint32()),G$P=this._readData.getUint32(),G$j=new Float32Array(G$l.slice(G$D+this._DATA.offset,G$D+this._DATA.offset+G$P));for(this.mesh._inverseBindPoses=[],G$w=0,G$T=G$j.length;G$w<G$T;G$w+=16){var G$J=new G$Tl(G$j[G$w+0],G$j[G$w+1],G$j[G$w+2],G$j[G$w+3],G$j[G$w+4],G$j[G$w+5],G$j[G$w+6],G$j[G$w+7],G$j[G$w+8],G$j[G$w+9],G$j[G$w+10],G$j[G$w+11],G$j[G$w+12],G$j[G$w+13],G$j[G$w+14],G$j[G$w+15]);this.mesh._inverseBindPoses.push(G$J)}break;default:throw new Error("LoadModel:unknown version.")}return!0},G$T.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var G$T=this._readString();this._shaderAttributes=G$T.match(G$W._attrReg);var G$l=this._readData.getUint32(),G$w=this._readData.getUint32(),G$u=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),G$p=this._readData.getUint32(),G$D=this._readData.getUint32(),G$P=this._readData.getUint32(),G$j=this._readData.__getBuffer(),G$J=new G$ql(this._mesh),G$q=this._getVertexDeclaration(),G$M=G$Hl.create(G$q,G$p/G$q.vertexStride,35044,!0),G$z=G$u+this._DATA.offset,G$b=G$j.slice(G$z,G$z+G$p);G$M.setData(new Float32Array(G$b));for(var G$K=(G$J._vertexBuffer=G$M).vertexDeclaration.getVertexElements(),G$Y=0;G$Y<G$K.length;G$Y++)G$J._bufferUsage[G$K[G$Y].elementUsage]=G$M;var G$t=G$Zl.create("ushort",G$w/2,35044,!0),G$A=G$l+this._DATA.offset,G$L=G$j.slice(G$A,G$A+G$w);G$t.setData(new Uint16Array(G$L)),G$J._indexBuffer=G$t;var G$i=G$j.slice(G$D+this._DATA.offset,G$D+this._DATA.offset+G$P);return G$J._boneIndicesList[0]=new Uint8Array(G$i),this._subMeshes.push(G$J),!0},G$T.READ_DATAAREA=function(){return!1},G$T._getVertexDeclaration=function(){for(var G$T,G$l=!1,G$w=!1,G$u=!1,G$p=!1,G$D=!1,G$P=!1,G$j=!1,G$J=!1,G$q=!1,G$M=0;G$M<this._shaderAttributes.length;G$M+=8)switch(this._shaderAttributes[G$M]){case"POSITION":G$l=!0;break;case"NORMAL":G$w=!0;break;case"COLOR":G$u=!0;break;case"UV":G$p=!0;break;case"UV1":G$D=!0;break;case"BLENDWEIGHT":G$j=!0;break;case"BLENDINDICES":G$J=!0;break;case"TANGENT":G$P=!0;break;case"BINORMAL":G$q=!0}return G$l&&G$w&&G$u&&G$p&&G$D&&G$j&&G$J&&G$P?G$T=G$WT.vertexDeclaration:G$l&&G$w&&G$u&&G$p&&G$D&&G$j&&G$J?G$T=G$LT.vertexDeclaration:G$l&&G$w&&G$p&&G$D&&G$j&&G$J&&G$P?G$T=G$RT.vertexDeclaration:G$l&&G$w&&G$p&&G$D&&G$j&&G$J?G$T=G$vT.vertexDeclaration:G$l&&G$w&&G$u&&G$p&&G$j&&G$J&&G$P?G$T=G$sT.vertexDeclaration:G$l&&G$w&&G$u&&G$p&&G$j&&G$J?G$T=G$aT.vertexDeclaration:G$l&&G$w&&G$P&&G$q&&G$p&&G$j&&G$J?G$T=G$GT.vertexDeclaration:G$l&&G$w&&G$p&&G$j&&G$J&&G$P?G$T=G$HT.vertexDeclaration:G$l&&G$w&&G$p&&G$j&&G$J?G$T=G$$T.vertexDeclaration:G$l&&G$w&&G$u&&G$j&&G$J&&G$P?G$T=G$bT.vertexDeclaration:G$l&&G$w&&G$u&&G$j&&G$J?G$T=G$MT.vertexDeclaration:G$l&&G$w&&G$u&&G$p&&G$D&&G$P?G$T=G$cT.vertexDeclaration:G$l&&G$w&&G$u&&G$p&&G$D?G$T=G$AT.vertexDeclaration:G$l&&G$w&&G$p&&G$D&&G$P?G$T=G$OT.vertexDeclaration:G$l&&G$w&&G$p&&G$D?G$T=G$yT.vertexDeclaration:G$l&&G$w&&G$u&&G$p&&G$P?G$T=G$IT.vertexDeclaration:G$l&&G$w&&G$p&&G$P&&G$q?G$T=G$nT.vertexDeclaration:G$l&&G$w&&G$u&&G$p?G$T=G$tT.vertexDeclaration:G$l&&G$w&&G$p&&G$P?G$T=G$kT.vertexDeclaration:G$l&&G$w&&G$p?G$T=G$eT.vertexDeclaration:G$l&&G$w&&G$u&&G$P?G$T=G$YT.vertexDeclaration:G$l&&G$w&&G$u&&(G$T=G$qT.vertexDeclaration),G$T},G$Y(0,G$T,"mesh",function(){return this._mesh}),G$W._attrReg=new RegExp("(\\w+)|([:,;])","g"),G$W}()),G$gT=function(){function G$B(){}return G$K(G$B,"laya.d3.loaders.LoadModelV02"),G$B.parse=function(G$T,G$l,G$w,G$u,G$p,G$D){G$B._mesh=G$w,G$B._materials=G$u,G$B._subMeshes=G$p,G$B._materialMap=G$D,G$B._version=G$l,G$B._readData=G$T,G$B.READ_DATA(),G$B.READ_BLOCK(),G$B.READ_STRINGS();for(var G$P=0,G$j=G$B._BLOCK.count;G$P<G$j;G$P++){G$B._readData.pos=G$B._BLOCK.blockStarts[G$P];var G$J=G$B._readData.getUint16(),G$q=G$B._strings[G$J],G$M=G$B["READ_"+G$q];if(null==G$M)throw new Error("model file err,no this function:"+G$J+" "+G$q);G$M.call()}G$B._strings.length=0,G$B._readData=null,G$B._version=null,G$B._mesh=null,G$B._materials=null,G$B._subMeshes=null,G$B._materialMap=null},G$B._readString=function(){return G$B._strings[G$B._readData.getUint16()]},G$B.READ_DATA=function(){G$B._DATA.offset=G$B._readData.getUint32(),G$B._DATA.size=G$B._readData.getUint32()},G$B.READ_BLOCK=function(){for(var G$T=G$B._BLOCK.count=G$B._readData.getUint16(),G$l=G$B._BLOCK.blockStarts=[],G$w=G$B._BLOCK.blockLengths=[],G$u=0;G$u<G$T;G$u++)G$l.push(G$B._readData.getUint32()),G$w.push(G$B._readData.getUint32())},G$B.READ_STRINGS=function(){var G$T=G$B._readData.getUint32(),G$l=G$B._readData.getUint16(),G$w=G$B._readData.pos;G$B._readData.pos=G$T+G$B._DATA.offset;for(var G$u=0;G$u<G$l;G$u++)G$B._strings[G$u]=G$B._readData.readUTFString();G$B._readData.pos=G$w},G$B.READ_MATERIAL=function(){G$B._readString(),G$B._readString();var G$T=G$B._readString();return""!==G$T&&G$B._materials.push(G$L.getRes(G$B._materialMap[G$T])),!0},G$B.READ_MESH=function(){G$B._readString();var G$T,G$l=G$B._readData.__getBuffer(),G$w=0,G$u=G$B._readData.getInt16(),G$p=G$B._DATA.offset;for(G$w=0;G$w<G$u;G$w++){var G$D=G$p+G$B._readData.getUint32(),G$P=G$B._readData.getUint32(),G$j=new Float32Array(G$l.slice(G$D,G$D+G$P)),G$J=G$B._readString().match(G$B._attrReg),G$q=G$B._getVertexDeclaration(G$J),G$M=G$Hl.create(G$q,4*G$j.length/G$q.vertexStride,35044,!0);G$M.setData(G$j),G$B._mesh._vertexBuffers.push(G$M)}var G$z=G$p+G$B._readData.getUint32(),G$b=G$B._readData.getUint32(),G$K=new Uint16Array(G$l.slice(G$z,G$z+G$b)),G$Y=G$Zl.create("ushort",G$b/2,35044,!0);G$Y.setData(G$K),G$B._mesh._indexBuffer=G$Y;var G$t=G$B._mesh._boneNames=[],G$A=G$B._readData.getUint16();for(G$t.length=G$A,G$w=0;G$w<G$A;G$w++)G$t[G$w]=G$B._strings[G$B._readData.getUint16()];var G$L=G$B._readData.getUint32(),G$i=G$B._readData.getUint32(),G$W=(new Float32Array(G$l.slice(G$p+G$L,G$p+G$L+G$i)),G$B._readData.getUint32()),G$m=G$B._readData.getUint32(),G$c=new Float32Array(G$l.slice(G$p+G$W,G$p+G$W+G$m));for(G$B._mesh._inverseBindPoses=[],G$w=0,G$T=G$c.length;G$w<G$T;G$w+=16){var G$a=new G$Tl(G$c[G$w+0],G$c[G$w+1],G$c[G$w+2],G$c[G$w+3],G$c[G$w+4],G$c[G$w+5],G$c[G$w+6],G$c[G$w+7],G$c[G$w+8],G$c[G$w+9],G$c[G$w+10],G$c[G$w+11],G$c[G$w+12],G$c[G$w+13],G$c[G$w+14],G$c[G$w+15]);G$B._mesh._inverseBindPoses.push(G$a)}return G$B._mesh._skinnedDatas=new Float32Array(16*G$c.length),!0},G$B.READ_SUBMESH=function(){var G$T=G$B._readData.__getBuffer(),G$l=new G$ql(G$B._mesh),G$w=G$B._readData.getInt16(),G$u=G$B._readData.getUint32(),G$p=G$B._readData.getUint32();G$l._vertexBuffer=G$B._mesh._vertexBuffers[G$w],G$l._vertexStart=G$u,G$l._vertexCount=G$p;var G$D=G$B._readData.getUint32(),G$P=G$B._readData.getUint32(),G$j=G$B._mesh._indexBuffer;G$l._indexBuffer=G$j,G$l._indexStart=G$D,G$l._indexCount=G$P,G$l._indices=new Uint16Array(G$j.getData().buffer,2*G$D,G$P);var G$J=G$B._DATA.offset,G$q=G$l._subIndexBufferStart,G$M=G$l._subIndexBufferCount,G$z=G$l._boneIndicesList,G$b=G$B._readData.getUint16();G$q.length=G$b,G$M.length=G$b,G$z.length=G$b;for(var G$K=0;G$K<G$b;G$K++){G$q[G$K]=G$B._readData.getUint32(),G$M[G$K]=G$B._readData.getUint32();var G$Y=G$B._readData.getUint32(),G$t=G$B._readData.getUint32();G$l._boneIndicesList[G$K]=new Uint8Array(G$T.slice(G$J+G$Y,G$J+G$Y+G$t))}return G$B._subMeshes.push(G$l),!0},G$B._getVertexDeclaration=function(G$T){for(var G$l,G$w=!1,G$u=!1,G$p=!1,G$D=!1,G$P=!1,G$j=!1,G$J=!1,G$q=!1,G$M=!1,G$z=0;G$z<G$T.length;G$z++)switch(G$T[G$z]){case"POSITION":G$w=!0;break;case"NORMAL":G$u=!0;break;case"COLOR":G$p=!0;break;case"UV":G$D=!0;break;case"UV1":G$P=!0;break;case"BLENDWEIGHT":G$J=!0;break;case"BLENDINDICES":G$q=!0;break;case"TANGENT":G$j=!0;break;case"BINORMAL":G$M=!0}return G$w&&G$u&&G$p&&G$D&&G$P&&G$J&&G$q&&G$j?G$l=G$WT.vertexDeclaration:G$w&&G$u&&G$p&&G$D&&G$P&&G$J&&G$q?G$l=G$LT.vertexDeclaration:G$w&&G$u&&G$D&&G$P&&G$J&&G$q&&G$j?G$l=G$RT.vertexDeclaration:G$w&&G$u&&G$D&&G$P&&G$J&&G$q?G$l=G$vT.vertexDeclaration:G$w&&G$u&&G$p&&G$D&&G$J&&G$q&&G$j?G$l=G$sT.vertexDeclaration:G$w&&G$u&&G$p&&G$D&&G$J&&G$q?G$l=G$aT.vertexDeclaration:G$w&&G$u&&G$D&&G$J&&G$q&&G$j?G$l=G$HT.vertexDeclaration:G$w&&G$u&&G$D&&G$J&&G$q?G$l=G$$T.vertexDeclaration:G$w&&G$u&&G$p&&G$J&&G$q&&G$j?G$l=G$bT.vertexDeclaration:G$w&&G$u&&G$p&&G$J&&G$q?G$l=G$MT.vertexDeclaration:G$w&&G$u&&G$p&&G$D&&G$P&&G$j?G$l=G$cT.vertexDeclaration:G$w&&G$u&&G$p&&G$D&&G$P?G$l=G$AT.vertexDeclaration:G$w&&G$u&&G$D&&G$P&&G$j?G$l=G$OT.vertexDeclaration:G$w&&G$u&&G$D&&G$P?G$l=G$yT.vertexDeclaration:G$w&&G$u&&G$p&&G$D&&G$j?G$l=G$IT.vertexDeclaration:G$w&&G$u&&G$D&&G$j&&G$M?G$l=G$nT.vertexDeclaration:G$w&&G$u&&G$p&&G$D?G$l=G$tT.vertexDeclaration:G$w&&G$u&&G$D&&G$j?G$l=G$kT.vertexDeclaration:G$w&&G$u&&G$D?G$l=G$eT.vertexDeclaration:G$w&&G$u&&G$p&&G$j?G$l=G$YT.vertexDeclaration:G$w&&G$u&&G$p&&(G$l=G$qT.vertexDeclaration),G$l},G$B._attrReg=new RegExp("(\\w+)|([:,;])","g"),G$B._strings=[],G$B._readData=null,G$B._version=null,G$B._mesh=null,G$B._materials=null,G$B._subMeshes=null,G$B._materialMap=null,G$z(G$B,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),G$B}(),G$fT=function(){function G$a(){}return G$K(G$a,"laya.d3.loaders.LoadModelV03"),G$a.parse=function(G$T,G$l,G$w,G$u,G$p){G$a._mesh=G$w,G$a._subMeshes=G$u,G$a._materialMap=G$p,G$a._version=G$l,G$a._readData=G$T,G$a.READ_DATA(),G$a.READ_BLOCK(),G$a.READ_STRINGS();for(var G$D=0,G$P=G$a._BLOCK.count;G$D<G$P;G$D++){G$a._readData.pos=G$a._BLOCK.blockStarts[G$D];var G$j=G$a._readData.getUint16(),G$J=G$a._strings[G$j],G$q=G$a["READ_"+G$J];if(null==G$q)throw new Error("model file err,no this function:"+G$j+" "+G$J);G$q.call()}G$a._strings.length=0,G$a._readData=null,G$a._version=null,G$a._mesh=null,G$a._subMeshes=null,G$a._materialMap=null},G$a._readString=function(){return G$a._strings[G$a._readData.getUint16()]},G$a.READ_DATA=function(){G$a._DATA.offset=G$a._readData.getUint32(),G$a._DATA.size=G$a._readData.getUint32()},G$a.READ_BLOCK=function(){for(var G$T=G$a._BLOCK.count=G$a._readData.getUint16(),G$l=G$a._BLOCK.blockStarts=[],G$w=G$a._BLOCK.blockLengths=[],G$u=0;G$u<G$T;G$u++)G$l.push(G$a._readData.getUint32()),G$w.push(G$a._readData.getUint32())},G$a.READ_STRINGS=function(){var G$T=G$a._readData.getUint32(),G$l=G$a._readData.getUint16(),G$w=G$a._readData.pos;G$a._readData.pos=G$T+G$a._DATA.offset;for(var G$u=0;G$u<G$l;G$u++)G$a._strings[G$u]=G$a._readData.readUTFString();G$a._readData.pos=G$w},G$a.READ_MESH=function(){var G$T,G$l=G$a._readString(),G$w=G$a._readData.__getBuffer(),G$u=0,G$p=G$a._readData.getInt16(),G$D=G$a._DATA.offset;for(G$u=0;G$u<G$p;G$u++){var G$P,G$j=G$D+G$a._readData.getUint32(),G$J=G$a._readData.getUint32(),G$q=new Float32Array(G$w.slice(G$j,G$j+G$J)),G$M=G$a._readString();switch(G$a._version){case"LAYAMODEL:03":G$P=G$a._vertexDeclarationMap_Discard[G$M];break;case"LAYAMODEL:0301":G$P=G$a._vertexDeclarationMap[G$M];break;default:throw new Error("LoadModelV03: unknown version.")}if(!G$P)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+G$a._version+"  bufferAttribute="+G$M+"  name="+G$l+"  url="+(G$a._mesh?G$a._mesh.url:"null"));var G$z=G$Hl.create(G$P,4*G$q.length/G$P.vertexStride,35044,!0,G$a._mesh._url+"_"+G$u);G$z.setData(G$q),G$a._mesh._vertexBuffers.push(G$z)}var G$b=G$D+G$a._readData.getUint32(),G$K=G$a._readData.getUint32(),G$Y=new Uint16Array(G$w.slice(G$b,G$b+G$K)),G$t=G$Zl.create("ushort",G$K/2,35044,!0,G$a._mesh._url);G$t.setData(G$Y),G$a._mesh._indexBuffer=G$t;var G$A=G$a._mesh._boneNames=[],G$L=G$a._readData.getUint16();for(G$A.length=G$L,G$u=0;G$u<G$L;G$u++)G$A[G$u]=G$a._strings[G$a._readData.getUint16()];G$a._readData.pos+=8;var G$i=G$a._readData.getUint32(),G$W=G$a._readData.getUint32(),G$m=new Float32Array(G$w.slice(G$D+G$i,G$D+G$i+G$W));for(G$a._mesh._inverseBindPoses=[],G$u=0,G$T=G$m.length;G$u<G$T;G$u+=16){var G$c=new G$Tl(G$m[G$u+0],G$m[G$u+1],G$m[G$u+2],G$m[G$u+3],G$m[G$u+4],G$m[G$u+5],G$m[G$u+6],G$m[G$u+7],G$m[G$u+8],G$m[G$u+9],G$m[G$u+10],G$m[G$u+11],G$m[G$u+12],G$m[G$u+13],G$m[G$u+14],G$m[G$u+15]);G$a._mesh._inverseBindPoses.push(G$c)}return G$a._mesh._skinnedDatas=new Float32Array(16*G$m.length),!0},G$a.READ_SUBMESH=function(){var G$T=G$a._readData.__getBuffer(),G$l=new G$ql(G$a._mesh),G$w=G$a._readData.getInt16(),G$u=G$a._readData.getUint32(),G$p=G$a._readData.getUint32();G$l._vertexBuffer=G$a._mesh._vertexBuffers[G$w],G$l._vertexStart=G$u,G$l._vertexCount=G$p;var G$D=G$a._readData.getUint32(),G$P=G$a._readData.getUint32(),G$j=G$a._mesh._indexBuffer;G$l._indexBuffer=G$j,G$l._indexStart=G$D,G$l._indexCount=G$P,G$l._indices=new Uint16Array(G$j.getData().buffer,2*G$D,G$P);var G$J=G$a._DATA.offset,G$q=G$l._subIndexBufferStart,G$M=G$l._subIndexBufferCount,G$z=G$l._boneIndicesList,G$b=G$a._readData.getUint16();G$q.length=G$b,G$M.length=G$b,G$z.length=G$b;for(var G$K=0;G$K<G$b;G$K++){G$q[G$K]=G$a._readData.getUint32(),G$M[G$K]=G$a._readData.getUint32();var G$Y=G$a._readData.getUint32(),G$t=G$a._readData.getUint32();G$z[G$K]=new Uint8Array(G$T.slice(G$J+G$Y,G$J+G$Y+G$t))}return G$a._subMeshes.push(G$l),!0},G$a._strings=[],G$a._readData=null,G$a._version=null,G$a._mesh=null,G$a._subMeshes=null,G$a._materialMap=null,G$z(G$a,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":G$WT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":G$LT.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":G$dT.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":G$RT.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":G$vT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":G$sT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":G$aT.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":G$HT.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":G$$T.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":G$bT.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":G$MT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":G$cT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":G$AT.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":G$OT.vertexDeclaration,"POSITION,NORMAL,UV,UV1":G$yT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":G$IT.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":G$nT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":G$tT.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":G$kT.vertexDeclaration,"POSITION,NORMAL,UV":G$eT.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":G$YT.vertexDeclaration,"POSITION,NORMAL,COLOR":G$qT.vertexDeclaration,"POSITION,NORMAL,TANGENT":G$oT.vertexDeclaration,"POSITION,NORMAL":G$JT.vertexDeclaration,"POSITION,UV":G$NT.vertexDeclaration,POSITION:G$jT.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":G$iT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":G$LT.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":G$dT.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":G$xT.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":G$vT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":G$BT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":G$aT.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":G$ZT.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":G$$T.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":G$zT.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":G$MT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":G$mT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":G$AT.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":G$FT.vertexDeclaration,"POSITION,NORMAL,UV,UV1":G$yT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":G$rT.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":G$nT.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":G$tT.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":G$XT.vertexDeclaration,"POSITION,NORMAL,UV":G$eT.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":G$KT.vertexDeclaration,"POSITION,NORMAL,COLOR":G$qT.vertexDeclaration,"POSITION,NORMAL,TANGENT":G$QT.vertexDeclaration,"POSITION,NORMAL":G$JT.vertexDeclaration,"POSITION,UV":G$NT.vertexDeclaration,POSITION:G$jT.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),G$a}(),G$UT=function(){function G$j(){}return G$K(G$j,"laya.d3.loaders.MeshReader"),G$j.read=function(G$T,G$l,G$w,G$u,G$p){var G$D=new G$a(G$T);G$D.pos=0;var G$P=G$D.readUTFString();switch(G$P){case"LAYAMODEL:01":case"LAYASKINANI:01":G$j._readVersion01(G$D,G$P,G$l,G$w,G$u,G$p);break;case"LAYAMODEL:02":G$gT.parse(G$D,G$P,G$l,G$w,G$u,G$p);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":G$fT.parse(G$D,G$P,G$l,G$u,G$p);break;default:throw new Error("MeshReader: unknown mesh version.")}G$l._setSubMeshes(G$u)},G$j._readVersion01=function(G$T,G$l,G$w,G$u,G$p,G$D){new G$hT(G$T,G$l,G$w,G$u,G$p,G$D)},G$j}(),G$ET=function(){function G$T(G$T,G$l){this.min=null,this.max=null,this.min=G$T,this.max=G$l}G$K(G$T,"laya.d3.math.BoundBox");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.getCorners=function(G$T){G$T.length=8;var G$l=this.min.elements,G$w=this.max.elements,G$u=G$l[0],G$p=G$l[1],G$D=G$l[2],G$P=G$w[0],G$j=G$w[1],G$J=G$w[2];G$T[0]=new G$Pl(G$u,G$j,G$J),G$T[1]=new G$Pl(G$P,G$j,G$J),G$T[2]=new G$Pl(G$P,G$p,G$J),G$T[3]=new G$Pl(G$u,G$p,G$J),G$T[4]=new G$Pl(G$u,G$j,G$D),G$T[5]=new G$Pl(G$P,G$j,G$D),G$T[6]=new G$Pl(G$P,G$p,G$D),G$T[7]=new G$Pl(G$u,G$p,G$D)},G$l.toDefault=function(){this.min.toDefault(),this.max.toDefault()},G$l.cloneTo=function(G$T){var G$l=G$T;this.min.cloneTo(G$l.min),this.max.cloneTo(G$l.max)},G$l.clone=function(){var G$T=new this.constructor(new G$Pl,new G$Pl);return this.cloneTo(G$T),G$T},G$T.createfromPoints=function(G$T,G$l){if(null==G$T)throw new Error("points");var G$w=G$l.min,G$u=G$l.max,G$p=G$w.elements;G$p[0]=Number.MAX_VALUE,G$p[1]=Number.MAX_VALUE,G$p[2]=Number.MAX_VALUE;var G$D=G$u.elements;G$D[0]=-Number.MAX_VALUE,G$D[1]=-Number.MAX_VALUE,G$D[2]=-Number.MAX_VALUE;for(var G$P=0,G$j=G$T.length;G$P<G$j;++G$P)G$Pl.min(G$w,G$T[G$P],G$w),G$Pl.max(G$u,G$T[G$P],G$u)},G$T.merge=function(G$T,G$l,G$w){G$Pl.min(G$T.min,G$l.min,G$w.min),G$Pl.max(G$T.max,G$l.max,G$w.max)},G$T}(),G$VT=function(){function G$q(G$T){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=G$T,this._near=new G$ll(new G$Pl),this._far=new G$ll(new G$Pl),this._left=new G$ll(new G$Pl),this._right=new G$ll(new G$Pl),this._top=new G$ll(new G$Pl),this._bottom=new G$ll(new G$Pl),G$q._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}G$K(G$q,"laya.d3.math.BoundFrustum");var G$T=G$q.prototype;return G$T.equalsBoundFrustum=function(G$T){return this._matrix.equalsOtherMatrix(G$T.matrix)},G$T.equalsObj=function(G$T){if(G$T instanceof laya.d3.math.BoundFrustum){var G$l=G$T;return this.equalsBoundFrustum(G$l)}return!1},G$T.getPlane=function(G$T){switch(G$T){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},G$T.getCorners=function(G$T){G$q._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(G$T[0]),G$q._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(G$T[1]),G$q._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(G$T[2]),G$q._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(G$T[3]),G$q._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(G$T[4]),G$q._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(G$T[5]),G$q._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(G$T[6]),G$q._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(G$T[7])},G$T.containsPoint=function(G$T){for(var G$l=G$ll.PlaneIntersectionType_Front,G$w=G$ll.PlaneIntersectionType_Front,G$u=0;G$u<6;G$u++){switch(G$u){case 0:G$w=Collision.intersectsPlaneAndPoint(this._near,G$T);break;case 1:G$w=Collision.intersectsPlaneAndPoint(this._far,G$T);break;case 2:G$w=Collision.intersectsPlaneAndPoint(this._left,G$T);break;case 3:G$w=Collision.intersectsPlaneAndPoint(this._right,G$T);break;case 4:G$w=Collision.intersectsPlaneAndPoint(this._top,G$T);break;case 5:G$w=Collision.intersectsPlaneAndPoint(this._bottom,G$T)}switch(G$w){case G$ll.PlaneIntersectionType_Back:return 0;case G$ll.PlaneIntersectionType_Intersecting:G$l=G$ll.PlaneIntersectionType_Intersecting}}switch(G$l){case G$ll.PlaneIntersectionType_Intersecting:return 2;default:return 1}},G$T.containsBoundBox=function(G$T){for(var G$l,G$w=G$q._tempV30,G$u=G$q._tempV31,G$p=1,G$D=0;G$D<6;G$D++){if(G$l=this.getPlane(G$D),this._getBoxToPlanePVertexNVertex(G$T,G$l.normal,G$w,G$u),Collision.intersectsPlaneAndPoint(G$l,G$w)===G$ll.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(G$l,G$u)===G$ll.PlaneIntersectionType_Back&&(G$p=2)}return G$p},G$T.containsBoundSphere=function(G$T){for(var G$l=G$ll.PlaneIntersectionType_Front,G$w=G$ll.PlaneIntersectionType_Front,G$u=0;G$u<6;G$u++){switch(G$u){case 0:G$w=Collision.intersectsPlaneAndSphere(this._near,G$T);break;case 1:G$w=Collision.intersectsPlaneAndSphere(this._far,G$T);break;case 2:G$w=Collision.intersectsPlaneAndSphere(this._left,G$T);break;case 3:G$w=Collision.intersectsPlaneAndSphere(this._right,G$T);break;case 4:G$w=Collision.intersectsPlaneAndSphere(this._top,G$T);break;case 5:G$w=Collision.intersectsPlaneAndSphere(this._bottom,G$T)}switch(G$w){case G$ll.PlaneIntersectionType_Back:return 0;case G$ll.PlaneIntersectionType_Intersecting:G$l=G$ll.PlaneIntersectionType_Intersecting}}switch(G$l){case G$ll.PlaneIntersectionType_Intersecting:return 2;default:return 1}},G$T._getBoxToPlanePVertexNVertex=function(G$T,G$l,G$w,G$u){var G$p=G$T.min,G$D=G$p.elements,G$P=G$T.max,G$j=G$P.elements,G$J=G$l.elements,G$q=G$J[0],G$M=G$J[1],G$z=G$J[2];G$p.cloneTo(G$w);var G$b=G$w.elements;0<=G$q&&(G$b[0]=G$j[0]),0<=G$M&&(G$b[1]=G$j[1]),0<=G$z&&(G$b[2]=G$j[2]),G$P.cloneTo(G$u);var G$K=G$u.elements;0<=G$q&&(G$K[0]=G$D[0]),0<=G$M&&(G$K[1]=G$D[1]),0<=G$z&&(G$K[2]=G$D[2])},G$Y(0,G$T,"top",function(){return this._top}),G$Y(0,G$T,"matrix",function(){return this._matrix},function(G$T){this._matrix=G$T,G$q._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),G$Y(0,G$T,"near",function(){return this._near}),G$Y(0,G$T,"far",function(){return this._far}),G$Y(0,G$T,"left",function(){return this._left}),G$Y(0,G$T,"right",function(){return this._right}),G$Y(0,G$T,"bottom",function(){return this._bottom}),G$q._getPlanesFromMatrix=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){var G$j=G$T.elements,G$J=G$j[0],G$q=G$j[1],G$M=G$j[2],G$z=G$j[3],G$b=G$j[4],G$K=G$j[5],G$Y=G$j[6],G$t=G$j[7],G$A=G$j[8],G$L=G$j[9],G$i=G$j[10],G$W=G$j[11],G$m=G$j[12],G$c=G$j[13],G$a=G$j[14],G$B=G$j[15],G$s=G$l.normal.elements;G$s[0]=G$z+G$M,G$s[1]=G$t+G$Y,G$s[2]=G$W+G$i,G$l.distance=G$B+G$a,G$l.normalize();var G$r=G$w.normal.elements;G$r[0]=G$z-G$M,G$r[1]=G$t-G$Y,G$r[2]=G$W-G$i,G$w.distance=G$B-G$a,G$w.normalize();var G$I=G$u.normal.elements;G$I[0]=G$z+G$J,G$I[1]=G$t+G$b,G$I[2]=G$W+G$A,G$u.distance=G$B+G$m,G$u.normalize();var G$Q=G$p.normal.elements;G$Q[0]=G$z-G$J,G$Q[1]=G$t-G$b,G$Q[2]=G$W-G$A,G$p.distance=G$B-G$m,G$p.normalize();var G$o=G$D.normal.elements;G$o[0]=G$z-G$q,G$o[1]=G$t-G$K,G$o[2]=G$W-G$L,G$D.distance=G$B-G$c,G$D.normalize();var G$e=G$P.normal.elements;G$e[0]=G$z+G$q,G$e[1]=G$t+G$K,G$e[2]=G$W+G$L,G$P.distance=G$B+G$c,G$P.normalize()},G$q._get3PlaneInterPoint=function(G$T,G$l,G$w){var G$u=G$T.normal,G$p=G$l.normal,G$D=G$w.normal;G$Pl.cross(G$p,G$D,G$q._tempV30),G$Pl.cross(G$D,G$u,G$q._tempV31),G$Pl.cross(G$u,G$p,G$q._tempV32);var G$P=G$Pl.dot(G$u,G$q._tempV30),G$j=G$Pl.dot(G$p,G$q._tempV31),G$J=G$Pl.dot(G$D,G$q._tempV32);return G$Pl.scale(G$q._tempV30,-G$T.distance/G$P,G$q._tempV33),G$Pl.scale(G$q._tempV31,-G$l.distance/G$j,G$q._tempV34),G$Pl.scale(G$q._tempV32,-G$w.distance/G$J,G$q._tempV35),G$Pl.add(G$q._tempV33,G$q._tempV34,G$q._tempV36),G$Pl.add(G$q._tempV35,G$q._tempV36,G$q._tempV37),G$q._tempV37},G$z(G$q,["_tempV30",function(){return this._tempV30=new G$Pl},"_tempV31",function(){return this._tempV31=new G$Pl},"_tempV32",function(){return this._tempV32=new G$Pl},"_tempV33",function(){return this._tempV33=new G$Pl},"_tempV34",function(){return this._tempV34=new G$Pl},"_tempV35",function(){return this._tempV35=new G$Pl},"_tempV36",function(){return this._tempV36=new G$Pl},"_tempV37",function(){return this._tempV37=new G$Pl}]),G$q}(),G$CT=function(){function G$M(G$T,G$l){this.center=null,this.radius=NaN,this.center=G$T,this.radius=G$l}G$K(G$M,"laya.d3.math.BoundSphere");var G$T=G$M.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.toDefault=function(){this.center.toDefault(),this.radius=0},G$T.intersectsRayDistance=function(G$T){return Collision.intersectsRayAndSphereRD(G$T,this)},G$T.intersectsRayPoint=function(G$T,G$l){return Collision.intersectsRayAndSphereRP(G$T,this,G$l)},G$T.cloneTo=function(G$T){var G$l=G$T;this.center.cloneTo(G$l.center),G$l.radius=this.radius},G$T.clone=function(){var G$T=new this.constructor(new G$Pl,new G$Pl);return this.cloneTo(G$T),G$T},G$M.createFromSubPoints=function(G$T,G$l,G$w,G$u){if(null==G$T)throw new Error("points");if(G$l<0||G$l>=G$T.length)throw new Error("start"+G$l+"Must be in the range [0, "+(G$T.length-1)+"]");if(G$w<0||G$l+G$w>G$T.length)throw new Error("count"+G$w+"Must be in the range <= "+G$T.length+"}");var G$p=G$l+G$w,G$D=G$M._tempVector3;G$D.elements[0]=0,G$D.elements[1]=0,G$D.elements[2]=0;for(var G$P=G$l;G$P<G$p;++G$P)G$Pl.add(G$T[G$P],G$D,G$D);var G$j=G$u.center;G$Pl.scale(G$D,1/G$w,G$j);var G$J=0;for(G$P=G$l;G$P<G$p;++G$P){var G$q=G$Pl.distanceSquared(G$j,G$T[G$P]);G$J<G$q&&(G$J=G$q)}G$u.radius=Math.sqrt(G$J)},G$M.createfromPoints=function(G$T,G$l){if(null==G$T)throw new Error("points");G$M.createFromSubPoints(G$T,0,G$T.length,G$l)},G$z(G$M,["_tempVector3",function(){return this._tempVector3=new G$Pl}]),G$M}(),G$ST=(function(){function G$T(){}G$K(G$T,"laya.d3.math.ContainmentType"),G$T.Disjoint=0,G$T.Contains=1,G$T.Intersects=2}(),function(){function G$w(){}return G$K(G$w,"laya.d3.math.MathUtils3D"),G$w.isZero=function(G$T){return Math.abs(G$T)<G$w.zeroTolerance},G$w.nearEqual=function(G$T,G$l){return!!G$w.isZero(G$T-G$l)},G$w.fastInvSqrt=function(G$T){return G$w.isZero(G$T)?G$T:1/Math.sqrt(G$T)},G$z(G$w,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),G$w}()),G$_T=function(){function G$J(){var G$T=this.elements=new Float32Array(9);G$T[0]=1,G$T[1]=0,G$T[2]=0,G$T[3]=0,G$T[4]=1,G$T[5]=0,G$T[6]=0,G$T[7]=0,G$T[8]=1}G$K(G$J,"laya.d3.math.Matrix3x3");var G$T=G$J.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.determinant=function(){var G$T=this.elements,G$l=G$T[0],G$w=G$T[1],G$u=G$T[2],G$p=G$T[3],G$D=G$T[4],G$P=G$T[5],G$j=G$T[6],G$J=G$T[7],G$q=G$T[8];return G$l*(G$q*G$D-G$P*G$J)+G$w*(-G$q*G$p+G$P*G$j)+G$u*(G$J*G$p-G$D*G$j)},G$T.translate=function(G$T,G$l){var G$w=G$l.elements,G$u=this.elements,G$p=G$T.elements,G$D=G$u[0],G$P=G$u[1],G$j=G$u[2],G$J=G$u[3],G$q=G$u[4],G$M=G$u[5],G$z=G$u[6],G$b=G$u[7],G$K=G$u[8],G$Y=G$p[0],G$t=G$p[1];G$w[0]=G$D,G$w[1]=G$P,G$w[2]=G$j,G$w[3]=G$J,G$w[4]=G$q,G$w[5]=G$M,G$w[6]=G$Y*G$D+G$t*G$J+G$z,G$w[7]=G$Y*G$P+G$t*G$q+G$b,G$w[8]=G$Y*G$j+G$t*G$M+G$K},G$T.rotate=function(G$T,G$l){var G$w=G$l.elements,G$u=this.elements,G$p=G$u[0],G$D=G$u[1],G$P=G$u[2],G$j=G$u[3],G$J=G$u[4],G$q=G$u[5],G$M=G$u[6],G$z=G$u[7],G$b=G$u[8],G$K=Math.sin(G$T),G$Y=Math.cos(G$T);G$w[0]=G$Y*G$p+G$K*G$j,G$w[1]=G$Y*G$D+G$K*G$J,G$w[2]=G$Y*G$P+G$K*G$q,G$w[3]=G$Y*G$j-G$K*G$p,G$w[4]=G$Y*G$J-G$K*G$D,G$w[5]=G$Y*G$q-G$K*G$P,G$w[6]=G$M,G$w[7]=G$z,G$w[8]=G$b},G$T.scale=function(G$T,G$l){var G$w=G$l.elements,G$u=this.elements,G$p=G$T.elements,G$D=G$p[0],G$P=G$p[1];G$w[0]=G$D*G$u[0],G$w[1]=G$D*G$u[1],G$w[2]=G$D*G$u[2],G$w[3]=G$P*G$u[3],G$w[4]=G$P*G$u[4],G$w[5]=G$P*G$u[5],G$w[6]=G$u[6],G$w[7]=G$u[7],G$w[8]=G$u[8]},G$T.invert=function(G$T){var G$l=G$T.elements,G$w=this.elements,G$u=G$w[0],G$p=G$w[1],G$D=G$w[2],G$P=G$w[3],G$j=G$w[4],G$J=G$w[5],G$q=G$w[6],G$M=G$w[7],G$z=G$w[8],G$b=G$z*G$j-G$J*G$M,G$K=-G$z*G$P+G$J*G$q,G$Y=G$M*G$P-G$j*G$q,G$t=G$u*G$b+G$p*G$K+G$D*G$Y;G$t||(G$T=null),G$t=1/G$t,G$l[0]=G$b*G$t,G$l[1]=(-G$z*G$p+G$D*G$M)*G$t,G$l[2]=(G$J*G$p-G$D*G$j)*G$t,G$l[3]=G$K*G$t,G$l[4]=(G$z*G$u-G$D*G$q)*G$t,G$l[5]=(-G$J*G$u+G$D*G$P)*G$t,G$l[6]=G$Y*G$t,G$l[7]=(-G$M*G$u+G$p*G$q)*G$t,G$l[8]=(G$j*G$u-G$p*G$P)*G$t},G$T.transpose=function(G$T){var G$l=G$T.elements,G$w=this.elements;if(G$T===this){var G$u=G$w[1],G$p=G$w[2],G$D=G$w[5];G$l[1]=G$w[3],G$l[2]=G$w[6],G$l[3]=G$u,G$l[5]=G$w[7],G$l[6]=G$p,G$l[7]=G$D}else G$l[0]=G$w[0],G$l[1]=G$w[3],G$l[2]=G$w[6],G$l[3]=G$w[1],G$l[4]=G$w[4],G$l[5]=G$w[7],G$l[6]=G$w[2],G$l[7]=G$w[5],G$l[8]=G$w[8]},G$T.identity=function(){var G$T=this.elements;G$T[0]=1,G$T[1]=0,G$T[2]=0,G$T[3]=0,G$T[4]=1,G$T[5]=0,G$T[6]=0,G$T[7]=0,G$T[8]=1},G$T.cloneTo=function(G$T){var G$l,G$w,G$u;if((G$w=this.elements)!==(G$u=G$T.elements))for(G$l=0;G$l<9;++G$l)G$u[G$l]=G$w[G$l]},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$J.createFromTranslation=function(G$T,G$l){G$l.elements;var G$w=G$T.elements;G$l[0]=1,G$l[1]=0,G$l[2]=0,G$l[3]=0,G$l[4]=1,G$l[5]=0,G$l[6]=G$w[0],G$l[7]=G$w[1],G$l[8]=1},G$J.createFromRotation=function(G$T,G$l){var G$w=G$l.elements,G$u=Math.sin(G$T),G$p=Math.cos(G$T);G$w[0]=G$p,G$w[1]=G$u,G$w[2]=0,G$w[3]=-G$u,G$w[4]=G$p,G$w[5]=0,G$w[6]=0,G$w[7]=0,G$w[8]=1},G$J.createFromScaling=function(G$T,G$l){var G$w=G$l.elements,G$u=G$T.elements;G$w[0]=G$u[0],G$w[1]=0,G$w[2]=0,G$w[3]=0,G$w[4]=G$u[1],G$w[5]=0,G$w[6]=0,G$w[7]=0,G$w[8]=1},G$J.createFromMatrix4x4=function(G$T,G$l){G$l[0]=G$T[0],G$l[1]=G$T[1],G$l[2]=G$T[2],G$l[3]=G$T[4],G$l[4]=G$T[5],G$l[5]=G$T[6],G$l[6]=G$T[8],G$l[7]=G$T[9],G$l[8]=G$T[10]},G$J.multiply=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements,G$P=G$p[0],G$j=G$p[1],G$J=G$p[2],G$q=G$p[3],G$M=G$p[4],G$z=G$p[5],G$b=G$p[6],G$K=G$p[7],G$Y=G$p[8],G$t=G$D[0],G$A=G$D[1],G$L=G$D[2],G$i=G$D[3],G$W=G$D[4],G$m=G$D[5],G$c=G$D[6],G$a=G$D[7],G$B=G$D[8];G$u[0]=G$t*G$P+G$A*G$q+G$L*G$b,G$u[1]=G$t*G$j+G$A*G$M+G$L*G$K,G$u[2]=G$t*G$J+G$A*G$z+G$L*G$Y,G$u[3]=G$i*G$P+G$W*G$q+G$m*G$b,G$u[4]=G$i*G$j+G$W*G$M+G$m*G$K,G$u[5]=G$i*G$J+G$W*G$z+G$m*G$Y,G$u[6]=G$c*G$P+G$a*G$q+G$B*G$b,G$u[7]=G$c*G$j+G$a*G$M+G$B*G$K,G$u[8]=G$c*G$J+G$a*G$z+G$B*G$Y},G$J.lookAt=function(G$T,G$l,G$w,G$u){G$Pl.subtract(G$T,G$l,G$J._tempV30),G$Pl.normalize(G$J._tempV30,G$J._tempV30),G$Pl.cross(G$w,G$J._tempV30,G$J._tempV31),G$Pl.normalize(G$J._tempV31,G$J._tempV31),G$Pl.cross(G$J._tempV30,G$J._tempV31,G$J._tempV32);var G$p=G$J._tempV30.elements,G$D=G$J._tempV31.elements,G$P=G$J._tempV32.elements,G$j=G$u.elements;G$j[0]=G$D[0],G$j[3]=G$D[1],G$j[6]=G$D[2],G$j[1]=G$P[0],G$j[4]=G$P[1],G$j[7]=G$P[2],G$j[2]=G$p[0],G$j[5]=G$p[1],G$j[8]=G$p[2]},G$J.DEFAULT=new G$J,G$z(G$J,["_tempV30",function(){return this._tempV30=new G$Pl},"_tempV31",function(){return this._tempV31=new G$Pl},"_tempV32",function(){return this._tempV32=new G$Pl}]),G$J}(),G$Tl=function(){function G$r(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$z,G$b,G$K,G$Y,G$t){void 0===G$T&&(G$T=1),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0),void 0===G$D&&(G$D=1),void 0===G$P&&(G$P=0),void 0===G$j&&(G$j=0),void 0===G$J&&(G$J=0),void 0===G$q&&(G$q=0),void 0===G$M&&(G$M=1),void 0===G$z&&(G$z=0),void 0===G$b&&(G$b=0),void 0===G$K&&(G$K=0),void 0===G$Y&&(G$Y=0),void 0===G$t&&(G$t=1);var G$A=this.elements=new Float32Array(16);G$A[0]=G$T,G$A[1]=G$l,G$A[2]=G$w,G$A[3]=G$u,G$A[4]=G$p,G$A[5]=G$D,G$A[6]=G$P,G$A[7]=G$j,G$A[8]=G$J,G$A[9]=G$q,G$A[10]=G$M,G$A[11]=G$z,G$A[12]=G$b,G$A[13]=G$K,G$A[14]=G$Y,G$A[15]=G$t}G$K(G$r,"laya.d3.math.Matrix4x4");var G$T=G$r.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.getElementByRowColumn=function(G$T,G$l){if(G$T<0||3<G$T)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(G$l<0||3<G$l)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*G$T+G$l]},G$T.setElementByRowColumn=function(G$T,G$l,G$w){if(G$T<0||3<G$T)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(G$l<0||3<G$l)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*G$T+G$l]=G$w},G$T.equalsOtherMatrix=function(G$T){var G$l=this.elements,G$w=G$T.elements;return G$ST.nearEqual(G$l[0],G$w[0])&&G$ST.nearEqual(G$l[1],G$w[1])&&G$ST.nearEqual(G$l[2],G$w[2])&&G$ST.nearEqual(G$l[3],G$w[3])&&G$ST.nearEqual(G$l[4],G$w[4])&&G$ST.nearEqual(G$l[5],G$w[5])&&G$ST.nearEqual(G$l[6],G$w[6])&&G$ST.nearEqual(G$l[7],G$w[7])&&G$ST.nearEqual(G$l[8],G$w[8])&&G$ST.nearEqual(G$l[9],G$w[9])&&G$ST.nearEqual(G$l[10],G$w[10])&&G$ST.nearEqual(G$l[11],G$w[11])&&G$ST.nearEqual(G$l[12],G$w[12])&&G$ST.nearEqual(G$l[13],G$w[13])&&G$ST.nearEqual(G$l[14],G$w[14])&&G$ST.nearEqual(G$l[15],G$w[15])},G$T.decomposeTransRotScale=function(G$T,G$l,G$w){var G$u=G$r._tempMatrix4x4;return this.decomposeTransRotMatScale(G$T,G$u,G$w)?(G$wl.createFromMatrix4x4(G$u,G$l),!0):(G$l.identity(),!1)},G$T.decomposeTransRotMatScale=function(G$T,G$l,G$w){var G$u=this.elements,G$p=G$T.elements,G$D=G$l.elements,G$P=G$w.elements;G$p[0]=G$u[12],G$p[1]=G$u[13],G$p[2]=G$u[14];var G$j=G$u[0],G$J=G$u[1],G$q=G$u[2],G$M=G$u[4],G$z=G$u[5],G$b=G$u[6],G$K=G$u[8],G$Y=G$u[9],G$t=G$u[10],G$A=G$P[0]=Math.sqrt(G$j*G$j+G$J*G$J+G$q*G$q),G$L=G$P[1]=Math.sqrt(G$M*G$M+G$z*G$z+G$b*G$b),G$i=G$P[2]=Math.sqrt(G$K*G$K+G$Y*G$Y+G$t*G$t);if(G$ST.isZero(G$A)||G$ST.isZero(G$L)||G$ST.isZero(G$i))return G$D[1]=G$D[2]=G$D[3]=G$D[4]=G$D[6]=G$D[7]=G$D[8]=G$D[9]=G$D[11]=G$D[12]=G$D[13]=G$D[14]=0,G$D[0]=G$D[5]=G$D[10]=G$D[15]=1,!1;var G$W=G$r._tempVector0,G$m=G$W.elements;G$m[0]=G$K/G$i,G$m[1]=G$Y/G$i,G$m[2]=G$t/G$i;var G$c=G$r._tempVector1,G$a=G$c.elements;G$a[0]=G$j/G$A,G$a[1]=G$J/G$A,G$a[2]=G$q/G$A;var G$B=G$r._tempVector2;G$Pl.cross(G$W,G$c,G$B);var G$s=G$r._tempVector1;return G$Pl.cross(G$B,G$W,G$s),G$D[3]=G$D[7]=G$D[11]=G$D[12]=G$D[13]=G$D[14]=0,G$D[15]=1,G$D[0]=G$s.x,G$D[1]=G$s.y,G$D[2]=G$s.z,G$D[4]=G$B.x,G$D[5]=G$B.y,G$D[6]=G$B.z,G$D[8]=G$W.x,G$D[9]=G$W.y,G$D[10]=G$W.z,G$D[0]*G$j+G$D[1]*G$J+G$D[2]*G$q<0&&(G$P[0]=-G$A),G$D[4]*G$M+G$D[5]*G$z+G$D[6]*G$b<0&&(G$P[1]=-G$L),G$D[8]*G$K+G$D[9]*G$Y+G$D[10]*G$t<0&&(G$P[2]=-G$i),!0},G$T.decomposeYawPitchRoll=function(G$T){var G$l=G$T.elements,G$w=Math.asin(-this.elements[9]);G$l[1]=G$w,Math.cos(G$w)>G$ST.zeroTolerance?(G$l[2]=Math.atan2(this.elements[1],this.elements[5]),G$l[0]=Math.atan2(this.elements[8],this.elements[10])):(G$l[2]=Math.atan2(-this.elements[4],this.elements[0]),G$l[0]=0)},G$T.normalize=function(){var G$T=this.elements,G$l=G$T[0],G$w=G$T[1],G$u=G$T[2],G$p=Math.sqrt(G$l*G$l+G$w*G$w+G$u*G$u);if(!G$p)return G$T[0]=0,G$T[1]=0,void(G$T[2]=0);1!=G$p&&(G$p=1/G$p,G$T[0]=G$l*G$p,G$T[1]=G$w*G$p,G$T[2]=G$u*G$p)},G$T.transpose=function(){var G$T,G$l;return G$l=(G$T=this.elements)[1],G$T[1]=G$T[4],G$T[4]=G$l,G$l=G$T[2],G$T[2]=G$T[8],G$T[8]=G$l,G$l=G$T[3],G$T[3]=G$T[12],G$T[12]=G$l,G$l=G$T[6],G$T[6]=G$T[9],G$T[9]=G$l,G$l=G$T[7],G$T[7]=G$T[13],G$T[13]=G$l,G$l=G$T[11],G$T[11]=G$T[14],G$T[14]=G$l,this},G$T.invert=function(G$T){var G$l=this.elements,G$w=G$T.elements,G$u=G$l[0],G$p=G$l[1],G$D=G$l[2],G$P=G$l[3],G$j=G$l[4],G$J=G$l[5],G$q=G$l[6],G$M=G$l[7],G$z=G$l[8],G$b=G$l[9],G$K=G$l[10],G$Y=G$l[11],G$t=G$l[12],G$A=G$l[13],G$L=G$l[14],G$i=G$l[15],G$W=G$u*G$J-G$p*G$j,G$m=G$u*G$q-G$D*G$j,G$c=G$u*G$M-G$P*G$j,G$a=G$p*G$q-G$D*G$J,G$B=G$p*G$M-G$P*G$J,G$s=G$D*G$M-G$P*G$q,G$r=G$z*G$A-G$b*G$t,G$I=G$z*G$L-G$K*G$t,G$Q=G$z*G$i-G$Y*G$t,G$o=G$b*G$L-G$K*G$A,G$e=G$b*G$i-G$Y*G$A,G$y=G$K*G$i-G$Y*G$L,G$v=G$W*G$y-G$m*G$e+G$c*G$o+G$a*G$Q-G$B*G$I+G$s*G$r;0!==Math.abs(G$v)&&(G$v=1/G$v,G$w[0]=(G$J*G$y-G$q*G$e+G$M*G$o)*G$v,G$w[1]=(G$D*G$e-G$p*G$y-G$P*G$o)*G$v,G$w[2]=(G$A*G$s-G$L*G$B+G$i*G$a)*G$v,G$w[3]=(G$K*G$B-G$b*G$s-G$Y*G$a)*G$v,G$w[4]=(G$q*G$Q-G$j*G$y-G$M*G$I)*G$v,G$w[5]=(G$u*G$y-G$D*G$Q+G$P*G$I)*G$v,G$w[6]=(G$L*G$c-G$t*G$s-G$i*G$m)*G$v,G$w[7]=(G$z*G$s-G$K*G$c+G$Y*G$m)*G$v,G$w[8]=(G$j*G$e-G$J*G$Q+G$M*G$r)*G$v,G$w[9]=(G$p*G$Q-G$u*G$e-G$P*G$r)*G$v,G$w[10]=(G$t*G$B-G$A*G$c+G$i*G$W)*G$v,G$w[11]=(G$b*G$c-G$z*G$B-G$Y*G$W)*G$v,G$w[12]=(G$J*G$I-G$j*G$o-G$q*G$r)*G$v,G$w[13]=(G$u*G$o-G$p*G$I+G$D*G$r)*G$v,G$w[14]=(G$A*G$m-G$t*G$a-G$L*G$W)*G$v,G$w[15]=(G$z*G$a-G$b*G$m+G$K*G$W)*G$v)},G$T.identity=function(){var G$T=this.elements;G$T[1]=G$T[2]=G$T[3]=G$T[4]=G$T[6]=G$T[7]=G$T[8]=G$T[9]=G$T[11]=G$T[12]=G$T[13]=G$T[14]=0,G$T[0]=G$T[5]=G$T[10]=G$T[15]=1},G$T.cloneTo=function(G$T){var G$l,G$w,G$u;if((G$w=this.elements)!==(G$u=G$T.elements))for(G$l=0;G$l<16;++G$l)G$u[G$l]=G$w[G$l]},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$T.getTranslationVector=function(G$T){var G$l=this.elements,G$w=G$T.elements;G$w[0]=G$l[12],G$w[1]=G$l[13],G$w[2]=G$l[14]},G$T.setTranslationVector=function(G$T){var G$l=this.elements,G$w=G$T.elements;G$l[12]=G$w[0],G$l[13]=G$w[1],G$l[14]=G$w[2]},G$T.getForward=function(G$T){var G$l=this.elements,G$w=G$T.elements;G$w[0]=-G$l[8],G$w[1]=-G$l[9],G$w[2]=-G$l[10]},G$T.setForward=function(G$T){var G$l=this.elements,G$w=G$T.elements;G$l[8]=-G$w[0],G$l[9]=-G$w[1],G$l[10]=-G$w[2]},G$r.createRotationX=function(G$T,G$l){var G$w=G$l.elements,G$u=Math.sin(G$T),G$p=Math.cos(G$T);G$w[1]=G$w[2]=G$w[3]=G$w[4]=G$w[7]=G$w[8]=G$w[11]=G$w[12]=G$w[13]=G$w[14]=0,G$w[0]=G$w[15]=1,G$w[5]=G$w[10]=G$p,G$w[6]=G$u,G$w[9]=-G$u},G$r.createRotationY=function(G$T,G$l){var G$w=G$l.elements,G$u=Math.sin(G$T),G$p=Math.cos(G$T);G$w[1]=G$w[3]=G$w[4]=G$w[6]=G$w[7]=G$w[9]=G$w[11]=G$w[12]=G$w[13]=G$w[14]=0,G$w[5]=G$w[15]=1,G$w[0]=G$w[10]=G$p,G$w[2]=-G$u,G$w[8]=G$u},G$r.createRotationZ=function(G$T,G$l){var G$w=G$l.elements,G$u=Math.sin(G$T),G$p=Math.cos(G$T);G$w[2]=G$w[3]=G$w[6]=G$w[7]=G$w[8]=G$w[9]=G$w[11]=G$w[12]=G$w[13]=G$w[14]=0,G$w[10]=G$w[15]=1,G$w[0]=G$w[5]=G$p,G$w[1]=G$u,G$w[4]=-G$u},G$r.createRotationYawPitchRoll=function(G$T,G$l,G$w,G$u){G$wl.createFromYawPitchRoll(G$T,G$l,G$w,G$r._tempQuaternion),G$r.createRotationQuaternion(G$r._tempQuaternion,G$u)},G$r.createRotationAxis=function(G$T,G$l,G$w){var G$u=G$T.elements,G$p=G$u[0],G$D=G$u[1],G$P=G$u[2],G$j=Math.cos(G$l),G$J=Math.sin(G$l),G$q=G$p*G$p,G$M=G$D*G$D,G$z=G$P*G$P,G$b=G$p*G$D,G$K=G$p*G$P,G$Y=G$D*G$P,G$t=G$w.elements;G$t[3]=G$t[7]=G$t[11]=G$t[12]=G$t[13]=G$t[14]=0,G$t[15]=1,G$t[0]=G$q+G$j*(1-G$q),G$t[1]=G$b-G$j*G$b+G$J*G$P,G$t[2]=G$K-G$j*G$K-G$J*G$D,G$t[4]=G$b-G$j*G$b-G$J*G$P,G$t[5]=G$M+G$j*(1-G$M),G$t[6]=G$Y-G$j*G$Y+G$J*G$p,G$t[8]=G$K-G$j*G$K+G$J*G$D,G$t[9]=G$Y-G$j*G$Y-G$J*G$p,G$t[10]=G$z+G$j*(1-G$z)},G$r.createRotationQuaternion=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements,G$p=G$w[0],G$D=G$w[1],G$P=G$w[2],G$j=G$w[3],G$J=G$p*G$p,G$q=G$D*G$D,G$M=G$P*G$P,G$z=G$p*G$D,G$b=G$P*G$j,G$K=G$P*G$p,G$Y=G$D*G$j,G$t=G$D*G$P,G$A=G$p*G$j;G$u[3]=G$u[7]=G$u[11]=G$u[12]=G$u[13]=G$u[14]=0,G$u[15]=1,G$u[0]=1-2*(G$q+G$M),G$u[1]=2*(G$z+G$b),G$u[2]=2*(G$K-G$Y),G$u[4]=2*(G$z-G$b),G$u[5]=1-2*(G$M+G$J),G$u[6]=2*(G$t+G$A),G$u[8]=2*(G$K+G$Y),G$u[9]=2*(G$t-G$A),G$u[10]=1-2*(G$q+G$J)},G$r.createTranslate=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements;G$u[4]=G$u[8]=G$u[1]=G$u[9]=G$u[2]=G$u[6]=G$u[3]=G$u[7]=G$u[11]=0,G$u[0]=G$u[5]=G$u[10]=G$u[15]=1,G$u[12]=G$w[0],G$u[13]=G$w[1],G$u[14]=G$w[2]},G$r.createScaling=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements;G$u[0]=G$w[0],G$u[5]=G$w[1],G$u[10]=G$w[2],G$u[1]=G$u[4]=G$u[8]=G$u[12]=G$u[9]=G$u[13]=G$u[2]=G$u[6]=G$u[14]=G$u[3]=G$u[7]=G$u[11]=0,G$u[15]=1},G$r.multiply=function(G$T,G$l,G$w){var G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M;for(G$p=G$w.elements,G$D=G$T.elements,G$p===(G$P=G$l.elements)&&(G$P=G$P.slice()),G$u=0;G$u<4;G$u++)G$j=G$D[G$u],G$J=G$D[G$u+4],G$q=G$D[G$u+8],G$M=G$D[G$u+12],G$p[G$u]=G$j*G$P[0]+G$J*G$P[1]+G$q*G$P[2]+G$M*G$P[3],G$p[G$u+4]=G$j*G$P[4]+G$J*G$P[5]+G$q*G$P[6]+G$M*G$P[7],G$p[G$u+8]=G$j*G$P[8]+G$J*G$P[9]+G$q*G$P[10]+G$M*G$P[11],G$p[G$u+12]=G$j*G$P[12]+G$J*G$P[13]+G$q*G$P[14]+G$M*G$P[15]},G$r.createFromQuaternion=function(G$T,G$l){var G$w=G$l.elements,G$u=G$T.elements,G$p=G$u[0],G$D=G$u[1],G$P=G$u[2],G$j=G$u[3],G$J=G$p+G$p,G$q=G$D+G$D,G$M=G$P+G$P,G$z=G$p*G$J,G$b=G$D*G$J,G$K=G$D*G$q,G$Y=G$P*G$J,G$t=G$P*G$q,G$A=G$P*G$M,G$L=G$j*G$J,G$i=G$j*G$q,G$W=G$j*G$M;G$w[0]=1-G$K-G$A,G$w[1]=G$b+G$W,G$w[2]=G$Y-G$i,G$w[3]=0,G$w[4]=G$b-G$W,G$w[5]=1-G$z-G$A,G$w[6]=G$t+G$L,G$w[7]=0,G$w[8]=G$Y+G$i,G$w[9]=G$t-G$L,G$w[10]=1-G$z-G$K,G$w[11]=0,G$w[12]=0,G$w[13]=0,G$w[14]=0,G$w[15]=1},G$r.createAffineTransformation=function(G$T,G$l,G$w,G$u){var G$p=G$T.elements,G$D=G$l.elements,G$P=G$w.elements,G$j=G$u.elements,G$J=G$D[0],G$q=G$D[1],G$M=G$D[2],G$z=G$D[3],G$b=G$J+G$J,G$K=G$q+G$q,G$Y=G$M+G$M,G$t=G$J*G$b,G$A=G$J*G$K,G$L=G$J*G$Y,G$i=G$q*G$K,G$W=G$q*G$Y,G$m=G$M*G$Y,G$c=G$z*G$b,G$a=G$z*G$K,G$B=G$z*G$Y,G$s=G$P[0],G$r=G$P[1],G$I=G$P[2];G$j[0]=(1-(G$i+G$m))*G$s,G$j[1]=(G$A+G$B)*G$s,G$j[2]=(G$L-G$a)*G$s,G$j[3]=0,G$j[4]=(G$A-G$B)*G$r,G$j[5]=(1-(G$t+G$m))*G$r,G$j[6]=(G$W+G$c)*G$r,G$j[7]=0,G$j[8]=(G$L+G$a)*G$I,G$j[9]=(G$W-G$c)*G$I,G$j[10]=(1-(G$t+G$i))*G$I,G$j[11]=0,G$j[12]=G$p[0],G$j[13]=G$p[1],G$j[14]=G$p[2],G$j[15]=1},G$r.createLookAt=function(G$T,G$l,G$w,G$u){var G$p=G$u.elements,G$D=G$r._tempVector0,G$P=G$r._tempVector1,G$j=G$r._tempVector2;G$Pl.subtract(G$T,G$l,G$j),G$Pl.normalize(G$j,G$j),G$Pl.cross(G$w,G$j,G$D),G$Pl.normalize(G$D,G$D),G$Pl.cross(G$j,G$D,G$P),G$u.identity(),G$p[0]=G$D.x,G$p[4]=G$D.y,G$p[8]=G$D.z,G$p[1]=G$P.x,G$p[5]=G$P.y,G$p[9]=G$P.z,G$p[2]=G$j.x,G$p[6]=G$j.y,G$p[10]=G$j.z,G$p[12]=-G$Pl.dot(G$D,G$T),G$p[13]=-G$Pl.dot(G$P,G$T),G$p[14]=-G$Pl.dot(G$j,G$T)},G$r.createPerspective=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$p.elements,G$P=1/Math.tan(G$T/2),G$j=1/(G$w-G$u);G$D[0]=G$P/G$l,G$D[5]=G$P,G$D[10]=(G$u+G$w)*G$j,G$D[11]=-1,G$D[14]=2*G$u*G$w*G$j,G$D[1]=G$D[2]=G$D[3]=G$D[4]=G$D[6]=G$D[7]=G$D[8]=G$D[9]=G$D[12]=G$D[13]=G$D[15]=0},G$r.createOrthoOffCenterRH=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){var G$j=G$P.elements,G$J=1/(G$T-G$l),G$q=1/(G$w-G$u),G$M=1/(G$p-G$D);G$j[1]=G$j[2]=G$j[3]=G$j[4]=G$j[6]=G$j[7]=G$j[8]=G$j[9]=G$j[11]=0,G$j[15]=1,G$j[0]=-2*G$J,G$j[5]=-2*G$q,G$j[10]=2*G$M,G$j[12]=(G$T+G$l)*G$J,G$j[13]=(G$u+G$w)*G$q,G$j[14]=(G$D+G$p)*G$M},G$r.translation=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements;G$u[0]=G$u[5]=G$u[10]=G$u[15]=1,G$u[12]=G$w[0],G$u[13]=G$w[1],G$u[14]=G$w[2]},G$z(G$r,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new G$r},"_tempVector0",function(){return this._tempVector0=new G$Pl},"_tempVector1",function(){return this._tempVector1=new G$Pl},"_tempVector2",function(){return this._tempVector2=new G$Pl},"_tempQuaternion",function(){return this._tempQuaternion=new G$wl},"DEFAULT",function(){return this.DEFAULT=new G$r},"ZERO",function(){return this.ZERO=new G$r(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),G$r}(),G$ll=(function(){function G$W(G$T,G$l){this.extents=null,this.transformation=null,this.extents=G$T,this.transformation=G$l}G$K(G$W,"laya.d3.math.OrientedBoundBox");var G$T=G$W.prototype;G$T.getCorners=function(G$T){var G$l=G$W._tempV30.elements,G$w=G$W._tempV31.elements,G$u=G$W._tempV32.elements,G$p=this.extents.elements;G$l[0]=G$p[0],G$l[1]=G$l[2]=0,G$w[1]=G$p[1],G$w[0]=G$w[2]=0,G$u[2]=G$p[2],G$u[0]=G$u[1]=0,G$Pl.TransformNormal(G$W._tempV30,this.transformation,G$W._tempV30),G$Pl.TransformNormal(G$W._tempV31,this.transformation,G$W._tempV31),G$Pl.TransformNormal(G$W._tempV32,this.transformation,G$W._tempV32);var G$D=G$W._tempV33;this.transformation.getTranslationVector(G$D),G$T.length=8,G$Pl.add(G$D,G$W._tempV30,G$W._tempV34),G$Pl.add(G$W._tempV34,G$W._tempV31,G$W._tempV34),G$Pl.add(G$W._tempV34,G$W._tempV32,G$T[0]),G$Pl.add(G$D,G$W._tempV30,G$W._tempV34),G$Pl.add(G$W._tempV34,G$W._tempV31,G$W._tempV34),G$Pl.subtract(G$W._tempV34,G$W._tempV32,G$T[1]),G$Pl.subtract(G$D,G$W._tempV30,G$W._tempV34),G$Pl.add(G$W._tempV34,G$W._tempV31,G$W._tempV34),G$Pl.subtract(G$W._tempV34,G$W._tempV32,G$T[2]),G$Pl.subtract(G$D,G$W._tempV30,G$W._tempV34),G$Pl.add(G$W._tempV34,G$W._tempV31,G$W._tempV34),G$Pl.add(G$W._tempV34,G$W._tempV32,G$T[3]),G$Pl.add(G$D,G$W._tempV30,G$W._tempV34),G$Pl.subtract(G$W._tempV34,G$W._tempV31,G$W._tempV34),G$Pl.add(G$W._tempV34,G$W._tempV32,G$T[4]),G$Pl.add(G$D,G$W._tempV30,G$W._tempV34),G$Pl.subtract(G$W._tempV34,G$W._tempV31,G$W._tempV34),G$Pl.subtract(G$W._tempV34,G$W._tempV32,G$T[5]),G$Pl.subtract(G$D,G$W._tempV30,G$W._tempV34),G$Pl.subtract(G$W._tempV34,G$W._tempV31,G$W._tempV34),G$Pl.subtract(G$W._tempV34,G$W._tempV32,G$T[6]),G$Pl.subtract(G$D,G$W._tempV30,G$W._tempV34),G$Pl.subtract(G$W._tempV34,G$W._tempV31,G$W._tempV34),G$Pl.add(G$W._tempV34,G$W._tempV32,G$T[7])},G$T.transform=function(G$T){G$Tl.multiply(this.transformation,G$T,this.transformation)},G$T.scale=function(G$T){G$Pl.multiply(this.extents,G$T,this.extents)},G$T.translate=function(G$T){this.transformation.getTranslationVector(G$W._tempV30),G$Pl.add(G$W._tempV30,G$T,G$W._tempV31),this.transformation.setTranslationVector(G$W._tempV31)},G$T.Size=function(G$T){G$Pl.scale(this.extents,2,G$T)},G$T.getSize=function(G$T){var G$l=this.extents.elements;G$W._tempV30.x=G$l[0],G$W._tempV31.y=G$l[1],G$W._tempV32.z=G$l[2],G$Pl.TransformNormal(G$W._tempV30,this.transformation,G$W._tempV30),G$Pl.TransformNormal(G$W._tempV31,this.transformation,G$W._tempV31),G$Pl.TransformNormal(G$W._tempV31,this.transformation,G$W._tempV32);var G$w=G$T.elements;G$w[0]=G$Pl.scalarLength(G$W._tempV30),G$w[1]=G$Pl.scalarLength(G$W._tempV31),G$w[2]=G$Pl.scalarLength(G$W._tempV32)},G$T.getSizeSquared=function(G$T){var G$l=this.extents.elements;G$W._tempV30.x=G$l[0],G$W._tempV31.y=G$l[1],G$W._tempV32.z=G$l[2],G$Pl.TransformNormal(G$W._tempV30,this.transformation,G$W._tempV30),G$Pl.TransformNormal(G$W._tempV31,this.transformation,G$W._tempV31),G$Pl.TransformNormal(G$W._tempV31,this.transformation,G$W._tempV32);var G$w=G$T.elements;G$w[0]=G$Pl.scalarLengthSquared(G$W._tempV30),G$w[1]=G$Pl.scalarLengthSquared(G$W._tempV31),G$w[2]=G$Pl.scalarLengthSquared(G$W._tempV32)},G$T.getCenter=function(G$T){this.transformation.getTranslationVector(G$T)},G$T.containsPoint=function(G$T){var G$l=this.extents.elements,G$w=G$l[0],G$u=G$l[1],G$p=G$l[2];this.transformation.invert(G$W._tempM0),G$Pl.transformCoordinate(G$T,G$W._tempM0,G$W._tempV30);var G$D=G$W._tempV30.elements,G$P=Math.abs(G$D[0]),G$j=Math.abs(G$D[1]),G$J=Math.abs(G$D[2]);return G$ST.nearEqual(G$P,G$w)&&G$ST.nearEqual(G$j,G$u)&&G$ST.nearEqual(G$J,G$p)?2:G$P<G$w&&G$j<G$u&&G$J<G$p?1:0},G$T.containsPoints=function(G$T){var G$l=this.extents.elements,G$w=G$l[0],G$u=G$l[1],G$p=G$l[2];this.transformation.invert(G$W._tempM0);for(var G$D=!0,G$P=!1,G$j=0;G$j<G$T.length;G$j++){G$Pl.transformCoordinate(G$T[G$j],G$W._tempM0,G$W._tempV30);var G$J=G$W._tempV30.elements,G$q=Math.abs(G$J[0]),G$M=Math.abs(G$J[1]),G$z=Math.abs(G$J[2]);G$ST.nearEqual(G$q,G$w)&&G$ST.nearEqual(G$M,G$u)&&G$ST.nearEqual(G$z,G$p)&&(G$P=!0),G$q<G$w&&G$M<G$u&&G$z<G$p?G$P=!0:G$D=!1}return G$D?1:G$P?2:0},G$T.containsSphere=function(G$T,G$l){void 0===G$l&&(G$l=!1);var G$w=this.extents.elements,G$u=G$w[0],G$p=G$w[1],G$D=G$w[2],G$P=G$T.radius;this.transformation.invert(G$W._tempM0),G$Pl.transformCoordinate(G$T.center,G$W._tempM0,G$W._tempV30);var G$j=NaN;if(G$j=G$l?G$P:(G$Pl.scale(G$Pl.UnitX,G$P,G$W._tempV31),G$Pl.TransformNormal(G$W._tempV31,G$W._tempM0,G$W._tempV31),G$Pl.scalarLength(G$W._tempV31)),G$Pl.scale(this.extents,-1,G$W._tempV32),G$Pl.Clamp(G$W._tempV30,G$W._tempV32,this.extents,G$W._tempV33),G$j*G$j<G$Pl.distanceSquared(G$W._tempV30,G$W._tempV33))return 0;var G$J=G$W._tempV30.elements,G$q=G$J[0],G$M=G$J[1],G$z=G$J[2],G$b=G$W._tempV32.elements,G$K=G$b[0],G$Y=G$b[1],G$t=G$b[2];return G$K+G$j<=G$q&&G$q<=G$u-G$j&&G$j<G$u-G$K&&G$Y+G$j<=G$M&&G$M<=G$p-G$j&&G$j<G$p-G$Y&&G$t+G$j<=G$z&&G$z<=G$D-G$j&&G$j<G$D-G$t?1:2},G$T.containsOrientedBoundBox=function(G$T){var G$l=0,G$w=0;G$T.getCorners(G$W._corners);var G$u=this.containsPoints(G$W._corners);if(0!=G$u)return G$u;var G$p=this.extents.elements;G$T.extents.cloneTo(G$W._tempV35);var G$D=G$W._tempV35.elements;G$W._getRows(this.transformation,G$W._rows1),G$W._getRows(G$T.transformation,G$W._rows2);var G$P=NaN;for(G$l=0;G$l<4;G$l++)for(G$w=0;G$w<4;G$w++)3==G$l||3==G$w?(G$W._tempM0.setElementByRowColumn(G$l,G$w,0),G$W._tempM1.setElementByRowColumn(G$l,G$w,0)):(G$P=G$Pl.dot(G$W._rows1[G$l],G$W._rows2[G$w]),G$W._tempM0.setElementByRowColumn(G$l,G$w,G$P),G$W._tempM1.setElementByRowColumn(G$l,G$w,Math.abs(G$P)));G$T.getCenter(G$W._tempV34),this.getCenter(G$W._tempV36),G$Pl.subtract(G$W._tempV34,G$W._tempV36,G$W._tempV30);var G$j=G$W._tempV31.elements;G$j[0]=G$Pl.dot(G$W._tempV30,G$W._rows1[0]),G$j[1]=G$Pl.dot(G$W._tempV30,G$W._rows1[1]),G$j[2]=G$Pl.dot(G$W._tempV30,G$W._rows1[2]);var G$J=G$W._tempV32.elements,G$q=G$W._tempV33.elements;for(G$l=0;G$l<3;G$l++)if(G$J[0]=G$W._tempM1.getElementByRowColumn(G$l,0),G$J[1]=G$W._tempM1.getElementByRowColumn(G$l,1),G$J[2]=G$W._tempM1.getElementByRowColumn(G$l,2),G$p[G$l]+G$Pl.dot(G$W._tempV35,G$W._tempV32)<Math.abs(G$j[G$l]))return 0;for(G$w=0;G$w<3;G$w++)if(G$J[0]=G$W._tempM1.getElementByRowColumn(0,G$w),G$J[1]=G$W._tempM1.getElementByRowColumn(1,G$w),G$J[2]=G$W._tempM1.getElementByRowColumn(2,G$w),G$q[0]=G$W._tempM0.getElementByRowColumn(0,G$w),G$q[1]=G$W._tempM0.getElementByRowColumn(1,G$w),G$q[2]=G$W._tempM0.getElementByRowColumn(2,G$w),G$Pl.dot(this.extents,G$W._tempV32)+G$D[G$w]<Math.abs(G$Pl.dot(G$W._tempV31,G$W._tempV33)))return 0;for(G$l=0;G$l<3;G$l++)for(G$w=0;G$w<3;G$w++){var G$M=(G$l+1)%3,G$z=(G$l+2)%3,G$b=(G$w+1)%3,G$K=(G$w+2)%3;if(G$p[G$M]*G$W._tempM1.getElementByRowColumn(G$z,G$w)+G$p[G$z]*G$W._tempM1.getElementByRowColumn(G$M,G$w)+(G$D[G$b]*G$W._tempM1.getElementByRowColumn(G$l,G$K)+G$D[G$K]*G$W._tempM1.getElementByRowColumn(G$l,G$b))<Math.abs(G$j[G$z]*G$W._tempM0.getElementByRowColumn(G$M,G$w)-G$j[G$M]*G$W._tempM0.getElementByRowColumn(G$z,G$w)))return 0}return 2},G$T.containsLine=function(G$T,G$l){G$W._corners[0]=G$T,G$W._corners[1]=G$l;var G$w=this.containsPoints(G$W._corners);if(0!=G$w)return G$w;var G$u=this.extents.elements,G$p=G$u[0],G$D=G$u[1],G$P=G$u[2];this.transformation.invert(G$W._tempM0),G$Pl.transformCoordinate(G$T,G$W._tempM0,G$W._tempV30),G$Pl.transformCoordinate(G$l,G$W._tempM0,G$W._tempV31),G$Pl.add(G$W._tempV30,G$W._tempV31,G$W._tempV32),G$Pl.scale(G$W._tempV32,.5,G$W._tempV32),G$Pl.subtract(G$W._tempV30,G$W._tempV32,G$W._tempV33);var G$j=G$W._tempV33.elements,G$J=G$j[0],G$q=G$j[1],G$M=G$j[2],G$z=G$W._tempV34.elements,G$b=G$z[0]=Math.abs(G$j[0]),G$K=G$z[1]=Math.abs(G$j[1]),G$Y=G$z[2]=Math.abs(G$j[2]),G$t=G$W._tempV32.elements,G$A=G$t[0],G$L=G$t[1],G$i=G$t[2];return Math.abs(G$A)>G$p+G$b?0:Math.abs(G$L)>G$D+G$K?0:Math.abs(G$i)>G$P+G$Y?0:Math.abs(G$L*G$M-G$i*G$q)>G$D*G$Y+G$P*G$K?0:Math.abs(G$A*G$M-G$i*G$J)>G$p*G$Y+G$P*G$b?0:Math.abs(G$A*G$q-G$L*G$J)>G$p*G$K+G$D*G$b?0:2},G$T.containsBoundBox=function(G$T){var G$l=0,G$w=0,G$u=G$T.min,G$p=G$T.max;G$T.getCorners(G$W._corners);var G$D=this.containsPoints(G$W._corners);if(0!=G$D)return G$D;G$Pl.subtract(G$p,G$u,G$W._tempV30),G$Pl.scale(G$W._tempV30,.5,G$W._tempV30),G$Pl.add(G$u,G$W._tempV30,G$W._tempV30),G$Pl.subtract(G$p,G$W._tempV30,G$W._tempV31);var G$P=this.extents.elements,G$j=G$W._tempV31.elements;G$W._getRows(this.transformation,G$W._rows1),this.transformation.invert(G$W._tempM0);for(G$l=0;G$l<3;G$l++)for(G$w=0;G$w<3;G$w++)G$W._tempM1.setElementByRowColumn(G$l,G$w,Math.abs(G$W._tempM0.getElementByRowColumn(G$l,G$w)));this.getCenter(G$W._tempV35),G$Pl.subtract(G$W._tempV30,G$W._tempV35,G$W._tempV32);var G$J=G$W._tempV31.elements;G$J[0]=G$Pl.dot(G$W._tempV32,G$W._rows1[0]),G$J[1]=G$Pl.dot(G$W._tempV32,G$W._rows1[1]),G$J[2]=G$Pl.dot(G$W._tempV32,G$W._rows1[2]);var G$q=G$W._tempV33.elements,G$M=G$W._tempV34.elements;for(G$l=0;G$l<3;G$l++)if(G$q[0]=G$W._tempM1.getElementByRowColumn(G$l,0),G$q[1]=G$W._tempM1.getElementByRowColumn(G$l,1),G$q[2]=G$W._tempM1.getElementByRowColumn(G$l,2),G$P[G$l]+G$Pl.dot(G$W._tempV31,G$W._tempV33)<Math.abs(G$J[G$l]))return 0;for(G$w=0;G$w<3;G$w++)if(G$q[0]=G$W._tempM1.getElementByRowColumn(0,G$w),G$q[1]=G$W._tempM1.getElementByRowColumn(1,G$w),G$q[2]=G$W._tempM1.getElementByRowColumn(2,G$w),G$M[0]=G$W._tempM0.getElementByRowColumn(0,G$w),G$M[1]=G$W._tempM0.getElementByRowColumn(1,G$w),G$M[2]=G$W._tempM0.getElementByRowColumn(2,G$w),G$Pl.dot(this.extents,G$W._tempV33)+G$j[G$w]<Math.abs(G$Pl.dot(G$W._tempV31,G$W._tempV34)))return 0;for(G$l=0;G$l<3;G$l++)for(G$w=0;G$w<3;G$w++){var G$z=(G$l+1)%3,G$b=(G$l+2)%3,G$K=(G$w+1)%3,G$Y=(G$w+2)%3;if(G$P[G$z]*G$W._tempM1.getElementByRowColumn(G$b,G$w)+G$P[G$b]*G$W._tempM1.getElementByRowColumn(G$z,G$w)+(G$j[G$K]*G$W._tempM1.getElementByRowColumn(G$l,G$Y)+G$j[G$Y]*G$W._tempM1.getElementByRowColumn(G$l,G$K))<Math.abs(G$J[G$b]*G$W._tempM0.getElementByRowColumn(G$z,G$w)-G$J[G$z]*G$W._tempM0.getElementByRowColumn(G$b,G$w)))return 0}return 2},G$T.intersectsRay=function(G$T,G$l){G$Pl.scale(this.extents,-1,G$W._tempV30),this.transformation.invert(G$W._tempM0),G$Pl.TransformNormal(G$T.direction,G$W._tempM0,G$W._ray.direction),G$Pl.transformCoordinate(G$T.origin,G$W._tempM0,G$W._ray.origin),G$W._boxBound1.min=G$W._tempV30,G$W._boxBound1.max=this.extents;var G$w=Collision.intersectsRayAndBoxRP(G$W._ray,G$W._boxBound1,G$l);return-1!==G$w&&G$Pl.transformCoordinate(G$l,this.transformation,G$l),G$w},G$T._getLocalCorners=function(G$T){G$T.length=8;var G$l=this.extents.elements;G$W._tempV30.x=G$l[0],G$W._tempV31.y=G$l[1],G$W._tempV32.z=G$l[2],G$Pl.add(G$W._tempV30,G$W._tempV31,G$W._tempV33),G$Pl.add(G$W._tempV33,G$W._tempV32,G$T[0]),G$Pl.add(G$W._tempV30,G$W._tempV31,G$W._tempV33),G$Pl.subtract(G$W._tempV33,G$W._tempV32,G$T[1]),G$Pl.subtract(G$W._tempV31,G$W._tempV30,G$W._tempV33),G$Pl.subtract(G$W._tempV33,G$W._tempV30,G$T[2]),G$Pl.subtract(G$W._tempV31,G$W._tempV30,G$W._tempV33),G$Pl.add(G$W._tempV33,G$W._tempV32,G$T[3]),G$Pl.subtract(G$W._tempV30,G$W._tempV31,G$W._tempV33),G$Pl.add(G$W._tempV33,G$W._tempV32,G$T[4]),G$Pl.subtract(G$W._tempV30,G$W._tempV31,G$W._tempV33),G$Pl.subtract(G$W._tempV33,G$W._tempV32,G$T[5]),G$Pl.scale(G$T[0],-1,G$T[6]),G$Pl.subtract(G$W._tempV32,G$W._tempV30,G$W._tempV33),G$Pl.subtract(G$W._tempV33,G$W._tempV31,G$T[7])},G$T.equals=function(G$T){return this.extents==G$T.extents&&this.transformation==G$T.transformation},G$T.cloneTo=function(G$T){var G$l=G$T;this.extents.cloneTo(G$l.extents),this.transformation.cloneTo(G$l.transformation)},G$W.createByBoundBox=function(G$T,G$l){var G$w=G$T.min,G$u=G$T.max;G$Pl.subtract(G$u,G$w,G$W._tempV30),G$Pl.scale(G$W._tempV30,.5,G$W._tempV30),G$Pl.add(G$w,G$W._tempV30,G$W._tempV31),G$Pl.subtract(G$u,G$W._tempV31,G$W._tempV32),G$Tl.translation(G$W._tempV31,G$W._tempM0);var G$p=G$W._tempV32.clone(),G$D=G$W._tempM0.clone();G$l.extents=G$p,G$l.transformation=G$D},G$W.createByMinAndMaxVertex=function(G$T,G$l){return G$Pl.subtract(G$l,G$T,G$W._tempV30),G$Pl.scale(G$W._tempV30,.5,G$W._tempV30),G$Pl.add(G$T,G$W._tempV30,G$W._tempV31),G$Pl.subtract(G$l,G$W._tempV31,G$W._tempV32),G$Tl.translation(G$W._tempV31,G$W._tempM0),new G$W(G$W._tempV32,G$W._tempM0)},G$W._getRows=function(G$T,G$l){G$l.length=3;var G$w=G$T.elements,G$u=G$l[0].elements;G$u[0]=G$w[0],G$u[1]=G$w[1],G$u[2]=G$w[2];var G$p=G$l[1].elements;G$p[0]=G$w[4],G$p[1]=G$w[5],G$p[2]=G$w[6];var G$D=G$l[2].elements;G$D[0]=G$w[8],G$D[1]=G$w[9],G$D[2]=G$w[10]},G$W.getObbtoObbMatrix4x4=function(G$T,G$l,G$w,G$u){var G$p=G$T.transformation,G$D=G$l.transformation;if(G$w){G$W._getRows(G$p,G$W._rows1),G$W._getRows(G$D,G$W._rows2);for(var G$P=0;G$P<3;G$P++)for(var G$j=0;G$j<3;G$j++)G$u.setElementByRowColumn(G$P,G$j,G$Pl.dot(G$W._rows2[G$P],G$W._rows1[G$j]));G$l.getCenter(G$W._tempV30),G$T.getCenter(G$W._tempV31),G$Pl.subtract(G$W._tempV30,G$W._tempV31,G$W._tempV32);var G$J=G$u.elements;G$J[12]=G$Pl.dot(G$W._tempV32,G$W._rows1[0]),G$J[13]=G$Pl.dot(G$W._tempV32,G$W._rows1[1]),G$J[14]=G$Pl.dot(G$W._tempV32,G$W._rows1[2]),G$J[15]=1}else G$p.invert(G$W._tempM0),G$Tl.multiply(G$D,G$W._tempM0,G$u)},G$W.merge=function(G$T,G$l,G$w){var G$u=G$T.extents,G$p=G$T.transformation;G$W.getObbtoObbMatrix4x4(G$T,G$l,G$w,G$W._tempM0),G$l._getLocalCorners(G$W._corners),G$Pl.transformCoordinate(G$W._corners[0],G$W._tempM0,G$W._corners[0]),G$Pl.transformCoordinate(G$W._corners[1],G$W._tempM0,G$W._corners[1]),G$Pl.transformCoordinate(G$W._corners[2],G$W._tempM0,G$W._corners[2]),G$Pl.transformCoordinate(G$W._corners[3],G$W._tempM0,G$W._corners[3]),G$Pl.transformCoordinate(G$W._corners[4],G$W._tempM0,G$W._corners[4]),G$Pl.transformCoordinate(G$W._corners[5],G$W._tempM0,G$W._corners[5]),G$Pl.transformCoordinate(G$W._corners[6],G$W._tempM0,G$W._corners[6]),G$Pl.transformCoordinate(G$W._corners[7],G$W._tempM0,G$W._corners[7]),G$Pl.scale(G$u,-1,G$W._boxBound1.min),G$u.cloneTo(G$W._boxBound1.max),G$ET.createfromPoints(G$W._corners,G$W._boxBound2),G$ET.merge(G$W._boxBound2,G$W._boxBound1,G$W._boxBound3);var G$D=G$W._boxBound3.min,G$P=G$W._boxBound3.max;G$Pl.subtract(G$P,G$D,G$W._tempV30),G$Pl.scale(G$W._tempV30,.5,G$W._tempV30),G$Pl.add(G$D,G$W._tempV30,G$W._tempV32),G$Pl.subtract(G$P,G$W._tempV32,G$u),G$Pl.transformCoordinate(G$W._tempV32,G$p,G$W._tempV33)},G$z(G$W,["_tempV30",function(){return this._tempV30=new G$Pl},"_tempV31",function(){return this._tempV31=new G$Pl},"_tempV32",function(){return this._tempV32=new G$Pl},"_tempV33",function(){return this._tempV33=new G$Pl},"_tempV34",function(){return this._tempV34=new G$Pl},"_tempV35",function(){return this._tempV35=new G$Pl},"_tempV36",function(){return this._tempV36=new G$Pl},"_tempM0",function(){return this._tempM0=new G$Tl},"_tempM1",function(){return this._tempM1=new G$Tl},"_corners",function(){return this._corners=[new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl]},"_rows1",function(){return this._rows1=[new G$Pl,new G$Pl,new G$Pl]},"_rows2",function(){return this._rows2=[new G$Pl,new G$Pl,new G$Pl]},"_ray",function(){return this._ray=new G$pl(new G$Pl,new G$Pl)},"_boxBound1",function(){return this._boxBound1=new G$ET(new G$Pl,new G$Pl)},"_boxBound2",function(){return this._boxBound2=new G$ET(new G$Pl,new G$Pl)},"_boxBound3",function(){return this._boxBound3=new G$ET(new G$Pl,new G$Pl)}])}(),function(){function G$c(G$T,G$l){this.normal=null,this.distance=NaN,void 0===G$l&&(G$l=0),this.normal=G$T,this.distance=G$l}return G$K(G$c,"laya.d3.math.Plane"),G$c.prototype.normalize=function(){var G$T=this.normal.elements,G$l=G$T[0],G$w=G$T[1],G$u=G$T[2],G$p=1/Math.sqrt(G$l*G$l+G$w*G$w+G$u*G$u);G$T[0]=G$l*G$p,G$T[1]=G$w*G$p,G$T[2]=G$u*G$p,this.distance*=G$p},G$c.createPlaneBy3P=function(G$T,G$l,G$w){var G$u=G$T.elements,G$p=G$l.elements,G$D=G$w.elements,G$P=G$p[0]-G$u[0],G$j=G$p[1]-G$u[1],G$J=G$p[2]-G$u[2],G$q=G$D[0]-G$u[0],G$M=G$D[1]-G$u[1],G$z=G$D[2]-G$u[2],G$b=G$j*G$z-G$J*G$M,G$K=G$J*G$q-G$P*G$z,G$Y=G$P*G$M-G$j*G$q,G$t=1/Math.sqrt(G$b*G$b+G$K*G$K+G$Y*G$Y),G$A=G$b*G$t,G$L=G$K*G$t,G$i=G$Y*G$t,G$W=G$c._TEMPVec3.elements;G$W[0]=G$A,G$W[1]=G$L,G$W[2]=G$i;var G$m=-(G$A*G$u[0]+G$L*G$u[1]+G$i*G$u[2]);return new G$c(G$c._TEMPVec3,G$m)},G$c.PlaneIntersectionType_Back=0,G$c.PlaneIntersectionType_Front=1,G$c.PlaneIntersectionType_Intersecting=2,G$z(G$c,["_TEMPVec3",function(){return this._TEMPVec3=new G$Pl}]),G$c}()),G$wl=function(){function G$p(G$T,G$l,G$w,G$u){this.elements=new Float32Array(4),void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=1),this.elements[0]=G$T,this.elements[1]=G$l,this.elements[2]=G$w,this.elements[3]=G$u}G$K(G$p,"laya.d3.math.Quaternion");var G$T=G$p.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.scaling=function(G$T,G$l){var G$w=G$l.elements,G$u=this.elements;G$w[0]=G$u[0]*G$T,G$w[1]=G$u[1]*G$T,G$w[2]=G$u[2]*G$T,G$w[3]=G$u[3]*G$T},G$T.normalize=function(G$T){var G$l=G$T.elements,G$w=this.elements,G$u=G$w[0],G$p=G$w[1],G$D=G$w[2],G$P=G$w[3],G$j=G$u*G$u+G$p*G$p+G$D*G$D+G$P*G$P;0<G$j&&(G$j=1/Math.sqrt(G$j),G$l[0]=G$u*G$j,G$l[1]=G$p*G$j,G$l[2]=G$D*G$j,G$l[3]=G$P*G$j)},G$T.length=function(){var G$T=this.elements,G$l=G$T[0],G$w=G$T[1],G$u=G$T[2],G$p=G$T[3];return Math.sqrt(G$l*G$l+G$w*G$w+G$u*G$u+G$p*G$p)},G$T.rotateX=function(G$T,G$l){var G$w=G$l.elements,G$u=this.elements;G$T*=.5;var G$p=G$u[0],G$D=G$u[1],G$P=G$u[2],G$j=G$u[3],G$J=Math.sin(G$T),G$q=Math.cos(G$T);G$w[0]=G$p*G$q+G$j*G$J,G$w[1]=G$D*G$q+G$P*G$J,G$w[2]=G$P*G$q-G$D*G$J,G$w[3]=G$j*G$q-G$p*G$J},G$T.rotateY=function(G$T,G$l){var G$w=G$l.elements,G$u=this.elements;G$T*=.5;var G$p=G$u[0],G$D=G$u[1],G$P=G$u[2],G$j=G$u[3],G$J=Math.sin(G$T),G$q=Math.cos(G$T);G$w[0]=G$p*G$q-G$P*G$J,G$w[1]=G$D*G$q+G$j*G$J,G$w[2]=G$P*G$q+G$p*G$J,G$w[3]=G$j*G$q-G$D*G$J},G$T.rotateZ=function(G$T,G$l){var G$w=G$l.elements,G$u=this.elements;G$T*=.5;var G$p=G$u[0],G$D=G$u[1],G$P=G$u[2],G$j=G$u[3],G$J=Math.sin(G$T),G$q=Math.cos(G$T);G$w[0]=G$p*G$q+G$D*G$J,G$w[1]=G$D*G$q-G$p*G$J,G$w[2]=G$P*G$q+G$j*G$J,G$w[3]=G$j*G$q-G$P*G$J},G$T.getYawPitchRoll=function(G$T){G$Pl.transformQuat(G$Pl.ForwardRH,this,G$p.TEMPVector31),G$Pl.transformQuat(G$Pl.Up,this,G$p.TEMPVector32);var G$l=G$p.TEMPVector32.elements;G$p.angleTo(G$Pl.ZERO,G$p.TEMPVector31,G$p.TEMPVector33);var G$w=G$p.TEMPVector33.elements;G$w[0]==Math.PI/2?(G$w[1]=G$p.arcTanAngle(G$l[2],G$l[0]),G$w[2]=0):G$w[0]==-Math.PI/2?(G$w[1]=G$p.arcTanAngle(-G$l[2],-G$l[0]),G$w[2]=0):(G$Tl.createRotationY(-G$w[1],G$p.TEMPMatrix0),G$Tl.createRotationX(-G$w[0],G$p.TEMPMatrix1),G$Pl.transformCoordinate(G$p.TEMPVector32,G$p.TEMPMatrix0,G$p.TEMPVector32),G$Pl.transformCoordinate(G$p.TEMPVector32,G$p.TEMPMatrix1,G$p.TEMPVector32),G$w[2]=G$p.arcTanAngle(G$l[1],-G$l[0])),G$w[1]<=-Math.PI&&(G$w[1]=Math.PI),G$w[2]<=-Math.PI&&(G$w[2]=Math.PI),G$w[1]>=Math.PI&&G$w[2]>=Math.PI&&(G$w[1]=0,G$w[2]=0,G$w[0]=Math.PI-G$w[0]);var G$u=G$T.elements;G$u[0]=G$w[1],G$u[1]=G$w[0],G$u[2]=G$w[2]},G$T.invert=function(G$T){var G$l=G$T.elements,G$w=this.elements,G$u=G$w[0],G$p=G$w[1],G$D=G$w[2],G$P=G$w[3],G$j=G$u*G$u+G$p*G$p+G$D*G$D+G$P*G$P,G$J=G$j?1/G$j:0;G$l[0]=-G$u*G$J,G$l[1]=-G$p*G$J,G$l[2]=-G$D*G$J,G$l[3]=G$P*G$J},G$T.identity=function(){var G$T=this.elements;G$T[0]=0,G$T[1]=0,G$T[2]=0,G$T[3]=1},G$T.fromArray=function(G$T,G$l){void 0===G$l&&(G$l=0),this.elements[0]=G$T[G$l+0],this.elements[1]=G$T[G$l+1],this.elements[2]=G$T[G$l+2],this.elements[3]=G$T[G$l+3]},G$T.cloneTo=function(G$T){var G$l,G$w,G$u;if((G$w=this.elements)!==(G$u=G$T.elements))for(G$l=0;G$l<4;++G$l)G$u[G$l]=G$w[G$l]},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$T.equals=function(G$T){var G$l=this.elements,G$w=G$T.elements;return G$ST.nearEqual(G$l[0],G$w[0])&&G$ST.nearEqual(G$l[1],G$w[1])&&G$ST.nearEqual(G$l[2],G$w[2])&&G$ST.nearEqual(G$l[3],G$w[3])},G$T.lengthSquared=function(){var G$T=this.elements[0],G$l=this.elements[1],G$w=this.elements[2],G$u=this.elements[3];return G$T*G$T+G$l*G$l+G$w*G$w+G$u*G$u},G$Y(0,G$T,"x",function(){return this.elements[0]}),G$Y(0,G$T,"y",function(){return this.elements[1]}),G$Y(0,G$T,"z",function(){return this.elements[2]}),G$Y(0,G$T,"w",function(){return this.elements[3]}),G$p.createFromYawPitchRoll=function(G$T,G$l,G$w,G$u){var G$p=.5*G$w,G$D=.5*G$l,G$P=.5*G$T,G$j=Math.sin(G$p),G$J=Math.cos(G$p),G$q=Math.sin(G$D),G$M=Math.cos(G$D),G$z=Math.sin(G$P),G$b=Math.cos(G$P),G$K=G$u.elements;G$K[0]=G$b*G$q*G$J+G$z*G$M*G$j,G$K[1]=G$z*G$M*G$J-G$b*G$q*G$j,G$K[2]=G$b*G$M*G$j-G$z*G$q*G$J,G$K[3]=G$b*G$M*G$J+G$z*G$q*G$j},G$p.multiply=function(G$T,G$l,G$w){var G$u=G$T.elements,G$p=G$l.elements,G$D=G$w.elements,G$P=G$u[0],G$j=G$u[1],G$J=G$u[2],G$q=G$u[3],G$M=G$p[0],G$z=G$p[1],G$b=G$p[2],G$K=G$p[3],G$Y=G$j*G$b-G$J*G$z,G$t=G$J*G$M-G$P*G$b,G$A=G$P*G$z-G$j*G$M,G$L=G$P*G$M+G$j*G$z+G$J*G$b;G$D[0]=G$P*G$K+G$M*G$q+G$Y,G$D[1]=G$j*G$K+G$z*G$q+G$t,G$D[2]=G$J*G$K+G$b*G$q+G$A,G$D[3]=G$q*G$K-G$L},G$p.arcTanAngle=function(G$T,G$l){return 0==G$T?1==G$l?Math.PI/2:-Math.PI/2:0<G$T?Math.atan(G$l/G$T):G$T<0?0<G$l?Math.atan(G$l/G$T)+Math.PI:Math.atan(G$l/G$T)-Math.PI:0},G$p.angleTo=function(G$T,G$l,G$w){G$Pl.subtract(G$l,G$T,G$p.TEMPVector30),G$Pl.normalize(G$p.TEMPVector30,G$p.TEMPVector30),G$w.elements[0]=Math.asin(G$p.TEMPVector30.y),G$w.elements[1]=G$p.arcTanAngle(-G$p.TEMPVector30.z,-G$p.TEMPVector30.x)},G$p.createFromAxisAngle=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements;G$l*=.5;var G$D=Math.sin(G$l);G$u[0]=G$D*G$p[0],G$u[1]=G$D*G$p[1],G$u[2]=G$D*G$p[2],G$u[3]=Math.cos(G$l)},G$p.createFromMatrix3x3=function(G$T,G$l){var G$w,G$u=G$l.elements,G$p=G$T.elements,G$D=G$p[0]+G$p[4]+G$p[8];if(0<G$D)G$w=Math.sqrt(G$D+1),G$u[3]=.5*G$w,G$w=.5/G$w,G$u[0]=(G$p[5]-G$p[7])*G$w,G$u[1]=(G$p[6]-G$p[2])*G$w,G$u[2]=(G$p[1]-G$p[3])*G$w;else{var G$P=0;G$p[4]>G$p[0]&&(G$P=1),G$p[8]>G$p[3*G$P+G$P]&&(G$P=2);var G$j=(G$P+1)%3,G$J=(G$P+2)%3;G$w=Math.sqrt(G$p[3*G$P+G$P]-G$p[3*G$j+G$j]-G$p[3*G$J+G$J]+1),G$u[G$P]=.5*G$w,G$w=.5/G$w,G$u[3]=(G$p[3*G$j+G$J]-G$p[3*G$J+G$j])*G$w,G$u[G$j]=(G$p[3*G$j+G$P]+G$p[3*G$P+G$j])*G$w,G$u[G$J]=(G$p[3*G$J+G$P]+G$p[3*G$P+G$J])*G$w}},G$p.createFromMatrix4x4=function(G$T,G$l){var G$w,G$u,G$p=G$T.elements,G$D=G$l.elements,G$P=G$p[0]+G$p[5]+G$p[10];0<G$P?(G$w=Math.sqrt(G$P+1),G$D[3]=.5*G$w,G$w=.5/G$w,G$D[0]=(G$p[6]-G$p[9])*G$w,G$D[1]=(G$p[8]-G$p[2])*G$w,G$D[2]=(G$p[1]-G$p[4])*G$w):G$p[0]>=G$p[5]&&G$p[0]>=G$p[10]?(G$u=.5/(G$w=Math.sqrt(1+G$p[0]-G$p[5]-G$p[10])),G$D[0]=.5*G$w,G$D[1]=(G$p[1]+G$p[4])*G$u,G$D[2]=(G$p[2]+G$p[8])*G$u,G$D[3]=(G$p[6]-G$p[9])*G$u):G$p[5]>G$p[10]?(G$u=.5/(G$w=Math.sqrt(1+G$p[5]-G$p[0]-G$p[10])),G$D[0]=(G$p[4]+G$p[1])*G$u,G$D[1]=.5*G$w,G$D[2]=(G$p[9]+G$p[6])*G$u,G$D[3]=(G$p[8]-G$p[2])*G$u):(G$u=.5/(G$w=Math.sqrt(1+G$p[10]-G$p[0]-G$p[5])),G$D[0]=(G$p[8]+G$p[2])*G$u,G$D[1]=(G$p[9]+G$p[6])*G$u,G$D[2]=.5*G$w,G$D[3]=(G$p[1]-G$p[4])*G$u)},G$p.slerp=function(G$T,G$l,G$w,G$u){var G$p,G$D,G$P,G$j,G$J,G$q=G$T.elements,G$M=G$l.elements,G$z=G$u.elements,G$b=G$q[0],G$K=G$q[1],G$Y=G$q[2],G$t=G$q[3],G$A=G$M[0],G$L=G$M[1],G$i=G$M[2],G$W=G$M[3];return(G$D=G$b*G$A+G$K*G$L+G$Y*G$i+G$t*G$W)<0&&(G$D=-G$D,G$A=-G$A,G$L=-G$L,G$i=-G$i,G$W=-G$W),G$J=1e-6<1-G$D?(G$p=Math.acos(G$D),G$P=Math.sin(G$p),G$j=Math.sin((1-G$w)*G$p)/G$P,Math.sin(G$w*G$p)/G$P):(G$j=1-G$w,G$w),G$z[0]=G$j*G$b+G$J*G$A,G$z[1]=G$j*G$K+G$J*G$L,G$z[2]=G$j*G$Y+G$J*G$i,G$z[3]=G$j*G$t+G$J*G$W,G$z},G$p.lerp=function(G$T,G$l,G$w,G$u){var G$p=G$u.elements,G$D=G$T.elements,G$P=G$l.elements,G$j=G$D[0],G$J=G$D[1],G$q=G$D[2],G$M=G$D[3];G$p[0]=G$j+G$w*(G$P[0]-G$j),G$p[1]=G$J+G$w*(G$P[1]-G$J),G$p[2]=G$q+G$w*(G$P[2]-G$q),G$p[3]=G$M+G$w*(G$P[3]-G$M)},G$p.add=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=G$p[0]+G$D[0],G$u[1]=G$p[1]+G$D[1],G$u[2]=G$p[2]+G$D[2],G$u[3]=G$p[3]+G$D[3]},G$p.dot=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements;return G$w[0]*G$u[0]+G$w[1]*G$u[1]+G$w[2]*G$u[2]+G$w[3]*G$u[3]},G$p.rotationLookAt=function(G$T,G$l,G$w){G$p.lookAt(G$Pl.ZERO,G$T,G$l,G$w)},G$p.lookAt=function(G$T,G$l,G$w,G$u){G$_T.lookAt(G$T,G$l,G$w,G$p._tempMatrix3x3),G$p.rotationMatrix(G$p._tempMatrix3x3,G$u)},G$p.invert=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements,G$p=G$T.lengthSquared();G$ST.isZero(G$p)||(G$p=1/G$p,G$u[0]=-G$w[0]*G$p,G$u[1]=-G$w[1]*G$p,G$u[2]=-G$w[2]*G$p,G$u[3]=G$w[3]*G$p)},G$p.rotationMatrix=function(G$T,G$l){var G$w=G$T.elements,G$u=G$w[0],G$p=G$w[1],G$D=G$w[2],G$P=G$w[3],G$j=G$w[4],G$J=G$w[5],G$q=G$w[6],G$M=G$w[7],G$z=G$w[8],G$b=G$l.elements,G$K=NaN,G$Y=NaN,G$t=G$u+G$j+G$z;0<G$t?(G$K=Math.sqrt(G$t+1),G$b[3]=.5*G$K,G$K=.5/G$K,G$b[0]=(G$J-G$M)*G$K,G$b[1]=(G$q-G$D)*G$K,G$b[2]=(G$p-G$P)*G$K):G$j<=G$u&&G$z<=G$u?(G$Y=.5/(G$K=Math.sqrt(1+G$u-G$j-G$z)),G$b[0]=.5*G$K,G$b[1]=(G$p+G$P)*G$Y,G$b[2]=(G$D+G$q)*G$Y,G$b[3]=(G$J-G$M)*G$Y):G$z<G$j?(G$Y=.5/(G$K=Math.sqrt(1+G$j-G$u-G$z)),G$b[0]=(G$P+G$p)*G$Y,G$b[1]=.5*G$K,G$b[2]=(G$M+G$J)*G$Y,G$b[3]=(G$q-G$D)*G$Y):(G$Y=.5/(G$K=Math.sqrt(1+G$z-G$u-G$j)),G$b[0]=(G$q+G$D)*G$Y,G$b[1]=(G$M+G$J)*G$Y,G$b[2]=.5*G$K,G$b[3]=(G$p-G$P)*G$Y)},G$p.DEFAULT=new G$p,G$z(G$p,["TEMPVector30",function(){return this.TEMPVector30=new G$Pl},"TEMPVector31",function(){return this.TEMPVector31=new G$Pl},"TEMPVector32",function(){return this.TEMPVector32=new G$Pl},"TEMPVector33",function(){return this.TEMPVector33=new G$Pl},"TEMPMatrix0",function(){return this.TEMPMatrix0=new G$Tl},"TEMPMatrix1",function(){return this.TEMPMatrix1=new G$Tl},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new G$_T},"NAN",function(){return this.NAN=new G$p(NaN,NaN,NaN,NaN)}]),G$p}(),G$ul=function(){function G$T(G$T){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=G$T,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}G$K(G$T,"laya.d3.math.Rand");var G$l=G$T.prototype;return G$l.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},G$l.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},G$l.getSignedFloat=function(){return 2*this.getFloat()-1},G$Y(0,G$l,"seed",function(){return this.seeds[0]},function(G$T){this.seeds[0]=G$T,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),G$T.getFloatFromInt=function(G$T){return 1/8388607*(8388607&G$T)},G$T.getByteFromInt=function(G$T){return(8388607&G$T)>>>15},G$T}(),G$pl=(function(){function G$p(G$T){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(G$T instanceof Array)||4!==G$T.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|G$T[0],this._state0L=0|G$T[1],this._state1U=0|G$T[2],this._state1L=0|G$T[3]}G$K(G$p,"laya.d3.math.RandX");var G$T=G$p.prototype;G$T.randomint=function(){var G$T=this._state0U,G$l=this._state0L,G$w=this._state1U,G$u=this._state1L,G$p=(G$u>>>0)+(G$l>>>0),G$D=G$w+G$T+(G$p/2>>>31)>>>0,G$P=G$p>>>0,G$j=0,G$J=0;G$j=(G$T^=G$j=G$T<<23|(-512&G$l)>>>9)^(this._state0U=G$w),G$J=(G$l^=G$J=G$l<<23)^(this._state0L=G$u);G$j^=G$T>>>18,G$J^=G$l>>>18|(262143&G$T)<<14;return G$j^=G$w>>>5,G$J^=G$u>>>5|(31&G$w)<<27,this._state1U=G$j,this._state1L=G$J,[G$D,G$P]},G$T.random=function(){var G$T=this.randomint(),G$l=G$T[0],G$w=1023<<20|G$l>>>12,G$u=0|(G$T[1]>>>12|(4095&G$l)<<20);return G$p._CONVERTION_BUFFER.setUint32(0,G$w,!1),G$p._CONVERTION_BUFFER.setUint32(4,G$u,!1),G$ul._CONVERTION_BUFFER.getFloat64(0,!1)-1},G$z(G$p,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new G$ul([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function G$T(G$T,G$l){this.origin=null,this.direction=null,this.origin=G$T,this.direction=G$l}return G$K(G$T,"laya.d3.math.Ray"),G$T}()),G$Dl=function(){function G$T(G$T,G$l){this.elements=new Float32Array(2),void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0);var G$w=this.elements;G$w[0]=G$T,G$w[1]=G$l}G$K(G$T,"laya.d3.math.Vector2");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.fromArray=function(G$T,G$l){void 0===G$l&&(G$l=0),this.elements[0]=G$T[G$l+0],this.elements[1]=G$T[G$l+1]},G$l.cloneTo=function(G$T){var G$l=G$T.elements,G$w=this.elements;G$l[0]=G$w[0],G$l[1]=G$w[1]},G$l.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$l,"x",function(){return this.elements[0]},function(G$T){this.elements[0]=G$T}),G$Y(0,G$l,"y",function(){return this.elements[1]},function(G$T){this.elements[1]=G$T}),G$T.scale=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements;G$u[0]=G$p[0]*G$l,G$u[1]=G$p[1]*G$l},G$z(G$T,["ZERO",function(){return this.ZERO=new G$T(0,0)},"ONE",function(){return this.ONE=new G$T(1,1)}]),G$T}(),G$Pl=function(){function G$M(G$T,G$l,G$w){this.elements=new Float32Array(3),void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0);var G$u=this.elements;G$u[0]=G$T,G$u[1]=G$l,G$u[2]=G$w}G$K(G$M,"laya.d3.math.Vector3");var G$T=G$M.prototype;return G$c.imps(G$T,{"laya.d3.core.IClone":!0}),G$T.fromArray=function(G$T,G$l){void 0===G$l&&(G$l=0),this.elements[0]=G$T[G$l+0],this.elements[1]=G$T[G$l+1],this.elements[2]=G$T[G$l+2]},G$T.cloneTo=function(G$T){var G$l=G$T.elements,G$w=this.elements;G$l[0]=G$w[0],G$l[1]=G$w[1],G$l[2]=G$w[2]},G$T.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$T.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},G$T.reset=function(G$T,G$l,G$w){this.elements[0]=G$T,this.elements[1]=G$l,this.elements[2]=G$w},G$Y(0,G$T,"x",function(){return this.elements[0]},function(G$T){this.elements[0]=G$T}),G$Y(0,G$T,"y",function(){return this.elements[1]},function(G$T){this.elements[1]=G$T}),G$Y(0,G$T,"z",function(){return this.elements[2]},function(G$T){this.elements[2]=G$T}),G$M.distanceSquared=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements,G$p=G$w[0]-G$u[0],G$D=G$w[1]-G$u[1],G$P=G$w[2]-G$u[2];return G$p*G$p+G$D*G$D+G$P*G$P},G$M.distance=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements,G$p=G$w[0]-G$u[0],G$D=G$w[1]-G$u[1],G$P=G$w[2]-G$u[2];return Math.sqrt(G$p*G$p+G$D*G$D+G$P*G$P)},G$M.min=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=Math.min(G$p[0],G$D[0]),G$u[1]=Math.min(G$p[1],G$D[1]),G$u[2]=Math.min(G$p[2],G$D[2])},G$M.max=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=Math.max(G$p[0],G$D[0]),G$u[1]=Math.max(G$p[1],G$D[1]),G$u[2]=Math.max(G$p[2],G$D[2])},G$M.transformQuat=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements,G$P=G$p[0],G$j=G$p[1],G$J=G$p[2],G$q=G$D[0],G$M=G$D[1],G$z=G$D[2],G$b=G$D[3],G$K=G$b*G$P+G$M*G$J-G$z*G$j,G$Y=G$b*G$j+G$z*G$P-G$q*G$J,G$t=G$b*G$J+G$q*G$j-G$M*G$P,G$A=-G$q*G$P-G$M*G$j-G$z*G$J;G$u[0]=G$K*G$b+G$A*-G$q+G$Y*-G$z-G$t*-G$M,G$u[1]=G$Y*G$b+G$A*-G$M+G$t*-G$q-G$K*-G$z,G$u[2]=G$t*G$b+G$A*-G$z+G$K*-G$M-G$Y*-G$q},G$M.scalarLength=function(G$T){var G$l=G$T.elements,G$w=G$l[0],G$u=G$l[1],G$p=G$l[2];return Math.sqrt(G$w*G$w+G$u*G$u+G$p*G$p)},G$M.scalarLengthSquared=function(G$T){var G$l=G$T.elements,G$w=G$l[0],G$u=G$l[1],G$p=G$l[2];return G$w*G$w+G$u*G$u+G$p*G$p},G$M.normalize=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements,G$p=G$w[0],G$D=G$w[1],G$P=G$w[2],G$j=G$p*G$p+G$D*G$D+G$P*G$P;0<G$j&&(G$j=1/Math.sqrt(G$j),G$u[0]=G$w[0]*G$j,G$u[1]=G$w[1]*G$j,G$u[2]=G$w[2]*G$j)},G$M.multiply=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=G$p[0]*G$D[0],G$u[1]=G$p[1]*G$D[1],G$u[2]=G$p[2]*G$D[2]},G$M.scale=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements;G$u[0]=G$p[0]*G$l,G$u[1]=G$p[1]*G$l,G$u[2]=G$p[2]*G$l},G$M.lerp=function(G$T,G$l,G$w,G$u){var G$p=G$u.elements,G$D=G$T.elements,G$P=G$l.elements,G$j=G$D[0],G$J=G$D[1],G$q=G$D[2];G$p[0]=G$j+G$w*(G$P[0]-G$j),G$p[1]=G$J+G$w*(G$P[1]-G$J),G$p[2]=G$q+G$w*(G$P[2]-G$q)},G$M.transformV3ToV3=function(G$T,G$l,G$w){var G$u=G$M._tempVector4;G$M.transformV3ToV4(G$T,G$l,G$u);var G$p=G$u.elements,G$D=G$w.elements;G$D[0]=G$p[0],G$D[1]=G$p[1],G$D[2]=G$p[2]},G$M.transformV3ToV4=function(G$T,G$l,G$w){var G$u=G$T.elements,G$p=G$u[0],G$D=G$u[1],G$P=G$u[2],G$j=G$l.elements,G$J=G$w.elements;G$J[0]=G$p*G$j[0]+G$D*G$j[4]+G$P*G$j[8]+G$j[12],G$J[1]=G$p*G$j[1]+G$D*G$j[5]+G$P*G$j[9]+G$j[13],G$J[2]=G$p*G$j[2]+G$D*G$j[6]+G$P*G$j[10]+G$j[14],G$J[3]=G$p*G$j[3]+G$D*G$j[7]+G$P*G$j[11]+G$j[15]},G$M.TransformNormal=function(G$T,G$l,G$w){var G$u=G$T.elements,G$p=G$u[0],G$D=G$u[1],G$P=G$u[2],G$j=G$l.elements,G$J=G$w.elements;G$J[0]=G$p*G$j[0]+G$D*G$j[4]+G$P*G$j[8],G$J[1]=G$p*G$j[1]+G$D*G$j[5]+G$P*G$j[9],G$J[2]=G$p*G$j[2]+G$D*G$j[6]+G$P*G$j[10]},G$M.transformCoordinate=function(G$T,G$l,G$w){var G$u=G$M._tempVector4.elements,G$p=G$T.elements,G$D=G$p[0],G$P=G$p[1],G$j=G$p[2],G$J=G$l.elements;G$u[0]=G$D*G$J[0]+G$P*G$J[4]+G$j*G$J[8]+G$J[12],G$u[1]=G$D*G$J[1]+G$P*G$J[5]+G$j*G$J[9]+G$J[13],G$u[2]=G$D*G$J[2]+G$P*G$J[6]+G$j*G$J[10]+G$J[14],G$u[3]=1/(G$D*G$J[3]+G$P*G$J[7]+G$j*G$J[11]+G$J[15]);var G$q=G$w.elements;G$q[0]=G$u[0]*G$u[3],G$q[1]=G$u[1]*G$u[3],G$q[2]=G$u[2]*G$u[3]},G$M.Clamp=function(G$T,G$l,G$w,G$u){var G$p=G$T.elements,G$D=G$p[0],G$P=G$p[1],G$j=G$p[2],G$J=G$l.elements,G$q=G$J[0],G$M=G$J[1],G$z=G$J[2],G$b=G$w.elements,G$K=G$b[0],G$Y=G$b[1],G$t=G$b[2],G$A=G$u.elements;G$D=(G$D=G$K<G$D?G$K:G$D)<G$q?G$q:G$D,G$P=(G$P=G$Y<G$P?G$Y:G$P)<G$M?G$M:G$P,G$j=(G$j=G$t<G$j?G$t:G$j)<G$z?G$z:G$j,G$A[0]=G$D,G$A[1]=G$P,G$A[2]=G$j},G$M.add=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=G$p[0]+G$D[0],G$u[1]=G$p[1]+G$D[1],G$u[2]=G$p[2]+G$D[2]},G$M.subtract=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=G$p[0]-G$D[0],G$u[1]=G$p[1]-G$D[1],G$u[2]=G$p[2]-G$D[2]},G$M.cross=function(G$T,G$l,G$w){var G$u=G$T.elements,G$p=G$l.elements,G$D=G$w.elements,G$P=G$u[0],G$j=G$u[1],G$J=G$u[2],G$q=G$p[0],G$M=G$p[1],G$z=G$p[2];G$D[0]=G$j*G$z-G$J*G$M,G$D[1]=G$J*G$q-G$P*G$z,G$D[2]=G$P*G$M-G$j*G$q},G$M.dot=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements;return G$w[0]*G$u[0]+G$w[1]*G$u[1]+G$w[2]*G$u[2]},G$M.equals=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements;return G$ST.nearEqual(Math.abs(G$w[0]),Math.abs(G$u[0]))&&G$ST.nearEqual(Math.abs(G$w[1]),Math.abs(G$u[1]))&&G$ST.nearEqual(Math.abs(G$w[2]),Math.abs(G$u[2]))},G$M.ZERO=new G$M(0,0,0),G$M.ONE=new G$M(1,1,1),G$M.NegativeUnitX=new G$M(-1,0,0),G$M.UnitX=new G$M(1,0,0),G$M.UnitY=new G$M(0,1,0),G$M.UnitZ=new G$M(0,0,1),G$M.ForwardRH=new G$M(0,0,-1),G$M.ForwardLH=new G$M(0,0,1),G$M.Up=new G$M(0,1,0),G$M.NAN=new G$M(NaN,NaN,NaN),G$z(G$M,["_tempVector4",function(){return this._tempVector4=new G$jl}]),G$M}(),G$jl=function(){function G$T(G$T,G$l,G$w,G$u){this.elements=new Float32Array(4),void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=0);var G$p=this.elements;G$p[0]=G$T,G$p[1]=G$l,G$p[2]=G$w,G$p[3]=G$u}G$K(G$T,"laya.d3.math.Vector4");var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l.fromArray=function(G$T,G$l){void 0===G$l&&(G$l=0),this.elements[0]=G$T[G$l+0],this.elements[1]=G$T[G$l+1],this.elements[2]=G$T[G$l+2],this.elements[3]=G$T[G$l+3]},G$l.cloneTo=function(G$T){var G$l=G$T.elements,G$w=this.elements;G$l[0]=G$w[0],G$l[1]=G$w[1],G$l[2]=G$w[2],G$l[3]=G$w[3]},G$l.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$l.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},G$l.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},G$Y(0,G$l,"x",function(){return this.elements[0]},function(G$T){this.elements[0]=G$T}),G$Y(0,G$l,"y",function(){return this.elements[1]},function(G$T){this.elements[1]=G$T}),G$Y(0,G$l,"z",function(){return this.elements[2]},function(G$T){this.elements[2]=G$T}),G$Y(0,G$l,"w",function(){return this.elements[3]},function(G$T){this.elements[3]=G$T}),G$T.lerp=function(G$T,G$l,G$w,G$u){var G$p=G$u.elements,G$D=G$T.elements,G$P=G$l.elements,G$j=G$D[0],G$J=G$D[1],G$q=G$D[2],G$M=G$D[3];G$p[0]=G$j+G$w*(G$P[0]-G$j),G$p[1]=G$J+G$w*(G$P[1]-G$J),G$p[2]=G$q+G$w*(G$P[2]-G$q),G$p[3]=G$M+G$w*(G$P[3]-G$M)},G$T.transformByM4x4=function(G$T,G$l,G$w){var G$u=G$T.elements,G$p=G$u[0],G$D=G$u[1],G$P=G$u[2],G$j=G$u[3],G$J=G$l.elements,G$q=G$w.elements;G$q[0]=G$p*G$J[0]+G$D*G$J[4]+G$P*G$J[8]+G$j*G$J[12],G$q[1]=G$p*G$J[1]+G$D*G$J[5]+G$P*G$J[9]+G$j*G$J[13],G$q[2]=G$p*G$J[2]+G$D*G$J[6]+G$P*G$J[10]+G$j*G$J[14],G$q[3]=G$p*G$J[3]+G$D*G$J[7]+G$P*G$J[11]+G$j*G$J[15]},G$T.equals=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements;return G$ST.nearEqual(Math.abs(G$w[0]),Math.abs(G$u[0]))&&G$ST.nearEqual(Math.abs(G$w[1]),Math.abs(G$u[1]))&&G$ST.nearEqual(Math.abs(G$w[2]),Math.abs(G$u[2]))&&G$ST.nearEqual(Math.abs(G$w[3]),Math.abs(G$u[3]))},G$T.normalize=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements,G$p=G$T.length();0<G$p&&(G$u[0]=G$w[0]*G$p,G$u[1]=G$w[1]*G$p,G$u[2]=G$w[2]*G$p,G$u[3]=G$w[3]*G$p)},G$T.add=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=G$p[0]+G$D[0],G$u[1]=G$p[1]+G$D[1],G$u[2]=G$p[2]+G$D[2],G$u[3]=G$p[3]+G$D[3]},G$T.subtract=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=G$p[0]-G$D[0],G$u[1]=G$p[1]-G$D[1],G$u[2]=G$p[2]-G$D[2],G$u[3]=G$p[3]-G$D[3]},G$T.multiply=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=G$p[0]*G$D[0],G$u[1]=G$p[1]*G$D[1],G$u[2]=G$p[2]*G$D[2],G$u[3]=G$p[3]*G$D[3]},G$T.scale=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements;G$u[0]=G$p[0]*G$l,G$u[1]=G$p[1]*G$l,G$u[2]=G$p[2]*G$l,G$u[3]=G$p[3]*G$l},G$T.Clamp=function(G$T,G$l,G$w,G$u){var G$p=G$T.elements,G$D=G$p[0],G$P=G$p[1],G$j=G$p[2],G$J=G$p[3],G$q=G$l.elements,G$M=G$q[0],G$z=G$q[1],G$b=G$q[2],G$K=G$q[3],G$Y=G$w.elements,G$t=G$Y[0],G$A=G$Y[1],G$L=G$Y[2],G$i=G$Y[3],G$W=G$u.elements;G$D=(G$D=G$t<G$D?G$t:G$D)<G$M?G$M:G$D,G$P=(G$P=G$A<G$P?G$A:G$P)<G$z?G$z:G$P,G$j=(G$j=G$L<G$j?G$L:G$j)<G$b?G$b:G$j,G$J=(G$J=G$i<G$J?G$i:G$J)<G$K?G$K:G$J,G$W[0]=G$D,G$W[1]=G$P,G$W[2]=G$j,G$W[3]=G$J},G$T.distanceSquared=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements,G$p=G$w[0]-G$u[0],G$D=G$w[1]-G$u[1],G$P=G$w[2]-G$u[2],G$j=G$w[3]-G$u[3];return G$p*G$p+G$D*G$D+G$P*G$P+G$j*G$j},G$T.distance=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements,G$p=G$w[0]-G$u[0],G$D=G$w[1]-G$u[1],G$P=G$w[2]-G$u[2],G$j=G$w[3]-G$u[3];return Math.sqrt(G$p*G$p+G$D*G$D+G$P*G$P+G$j*G$j)},G$T.dot=function(G$T,G$l){var G$w=G$T.elements,G$u=G$l.elements;return G$w[0]*G$u[0]+G$w[1]*G$u[1]+G$w[2]*G$u[2]+G$w[3]*G$u[3]},G$T.min=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=Math.min(G$p[0],G$D[0]),G$u[1]=Math.min(G$p[1],G$D[1]),G$u[2]=Math.min(G$p[2],G$D[2]),G$u[3]=Math.min(G$p[3],G$D[3])},G$T.max=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l.elements;G$u[0]=Math.max(G$p[0],G$D[0]),G$u[1]=Math.max(G$p[1],G$D[1]),G$u[2]=Math.max(G$p[2],G$D[2]),G$u[3]=Math.max(G$p[3],G$D[3])},G$z(G$T,["ZERO",function(){return this.ZERO=new G$T},"ONE",function(){return this.ONE=new G$T(1,1,1,1)},"UnitX",function(){return this.UnitX=new G$T(1,0,0,0)},"UnitY",function(){return this.UnitY=new G$T(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new G$T(0,0,1,0)},"UnitW",function(){return this.UnitW=new G$T(0,0,0,1)}]),G$T}(),G$Jl=function(){function G$D(G$T,G$l,G$w,G$u){this.minDepth=0,this.maxDepth=1,this.x=G$T,this.y=G$l,this.width=G$w,this.height=G$u}G$K(G$D,"laya.d3.math.Viewport");var G$T=G$D.prototype;return G$T.project=function(G$T,G$l,G$w){G$Pl.transformV3ToV3(G$T,G$l,G$w);var G$u=G$T.elements,G$p=G$l.elements,G$D=G$w.elements,G$P=G$u[0]*G$p[3]+G$u[1]*G$p[7]+G$u[2]*G$p[11]+G$p[15];1!==G$P&&(G$D[0]=G$D[0]/G$P,G$D[1]=G$D[1]/G$P,G$D[2]=G$D[2]/G$P),G$D[0]=.5*(G$D[0]+1)*this.width+this.x,G$D[1]=.5*(1-G$D[1])*this.height+this.y,G$D[2]=G$D[2]*(this.maxDepth-this.minDepth)+this.minDepth},G$T.unprojectFromMat=function(G$T,G$l,G$w){var G$u=G$T.elements,G$p=G$l.elements,G$D=G$w.elements;G$D[0]=(G$u[0]-this.x)/this.width*2-1,G$D[1]=-((G$u[1]-this.y)/this.height*2-1);var G$P=(this.maxDepth-this.minDepth)/2;G$D[2]=(G$u[2]-this.minDepth-G$P)/G$P;var G$j=G$D[0]*G$p[3]+G$D[1]*G$p[7]+G$D[2]*G$p[11]+G$p[15];G$Pl.transformV3ToV3(G$w,G$l,G$w),1!==G$j&&(G$D[0]=G$D[0]/G$j,G$D[1]=G$D[1]/G$j,G$D[2]=G$D[2]/G$j)},G$T.unprojectFromWVP=function(G$T,G$l,G$w,G$u,G$p){G$Tl.multiply(G$l,G$w,G$D._tempMatrix4x4),G$u&&G$Tl.multiply(G$D._tempMatrix4x4,G$u,G$D._tempMatrix4x4),G$D._tempMatrix4x4.invert(G$D._tempMatrix4x4),this.unprojectFromMat(G$T,G$D._tempMatrix4x4,G$p)},G$z(G$D,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new G$Tl}]),G$D}(),G$ql=function(){function G$o(G$T){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=G$T,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}G$K(G$o,"laya.d3.resource.models.SubMesh");var G$T=G$o.prototype;return G$c.imps(G$T,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),G$T._getVertexBuffer=function(G$T){return void 0===G$T&&(G$T=0),0===G$T?this._vertexBuffer:null},G$T._getIndexBuffer=function(){return this._indexBuffer},G$T._getStaticBatchBakedVertexs=function(G$T,G$l){var G$w,G$u,G$p=this._vertexBuffer,G$D=G$p.vertexDeclaration,G$P=G$D.getVertexElementByUsage(0).offset/4,G$j=G$D.getVertexElementByUsage(3).offset/4,G$J=G$l.meshRender.lightmapScaleOffset,G$q=0,G$M=0,G$z=0,G$b=0,G$K=0,G$Y=0;if(G$J)if(G$u=G$D.getVertexElementByUsage(15))G$z=G$D.vertexStride/4,G$w=0<this._vertexCount?G$p.getData().slice(this._vertexStart*G$z,(this._vertexStart+this._vertexCount)*G$z):G$p.getData().slice(),G$b=G$u.offset/4;else{G$z=(G$Y=G$D.vertexStride/4)+2,G$w=this._vertexCount?new Float32Array(this._vertexCount*(G$p.vertexDeclaration.vertexStride/4+2)):new Float32Array(G$p.vertexCount*(G$p.vertexDeclaration.vertexStride/4+2)),G$b=(G$K=G$D.getVertexElementByUsage(2).offset/4)+2;var G$t=G$p.getData();for(G$q=0,G$M=G$t.length/G$Y;G$q<G$M;G$q++){var G$A=0;G$A=0<this._vertexCount?(this._vertexStart+G$q)*G$Y:G$q*G$Y;var G$L=G$q*G$z,G$i=0;for(G$i=0;G$i<G$b;G$i++)G$w[G$L+G$i]=G$t[G$A+G$i];for(G$i=G$b;G$i<G$Y;G$i++)G$w[G$L+G$i+2]=G$t[G$A+G$i]}}else G$z=G$D.vertexStride/4,G$w=this._vertexCount?G$p.getData().slice(this._vertexStart*G$z,(this._vertexStart+this._vertexCount)*G$z):G$p.getData().slice();if(G$T){var G$W=G$T.worldMatrix,G$m=G$o._tempMatrix4x40;G$W.invert(G$m);var G$c=G$o._tempMatrix4x41,G$a=G$l.transform.worldMatrix;G$Tl.multiply(G$m,G$a,G$c)}else G$c=G$l.transform.worldMatrix;var G$B=G$o._tempQuaternion0;for(G$c.decomposeTransRotScale(G$o._tempVector30,G$B,G$o._tempVector31),G$q=0,G$M=G$w.length/G$z;G$q<G$M;G$q++){var G$s=G$q*G$z+G$P,G$r=G$q*G$z+G$j;if(G$Al.transformVector3ArrayToVector3ArrayCoordinate(G$w,G$s,G$c,G$w,G$s),G$Al.transformVector3ArrayByQuat(G$w,G$r,G$B,G$w,G$r),G$J){var G$I=G$q*G$z+G$b;if(G$u)G$Al.transformLightingMapTexcoordByUV1Array(G$w,G$I,G$J,G$w,G$I);else{var G$Q=G$q*G$Y+G$K;G$Al.transformLightingMapTexcoordByUV0Array(G$t,G$Q,G$J,G$w,G$I)}}}return G$w},G$T._getVertexBuffers=function(){return null},G$T._beforeRender=function(G$T){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},G$T._render=function(G$T){var G$l,G$w=0,G$u=G$T.renderElement;if(1<this._indexCount){var G$p=this._boneIndicesList.length;if(1<G$p){for(var G$D=0;G$D<G$p;G$D++)(G$l=G$u._skinAnimationDatas||this._skinAnimationDatas)&&(G$u._shaderValue.setValue(0,G$l[G$D]),G$T._shader.uploadRenderElementUniforms(G$u._shaderValue.data)),G$e.mainContext.drawElements(4,this._subIndexBufferCount[G$D],5123,2*this._subIndexBufferStart[G$D]);G$s.drawCall+=G$p}else(G$l=G$u._skinAnimationDatas||this._skinAnimationDatas)&&(G$u._shaderValue.setValue(0,G$l[0]),G$T._shader.uploadRenderElementUniforms(G$u._shaderValue.data)),G$e.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),G$s.drawCall++;G$w=this._indexCount}else G$w=this._indexBuffer.indexCount,(G$l=G$u._skinAnimationDatas||this._skinAnimationDatas)&&(G$u._shaderValue.setValue(0,G$l[0]),G$T._shader.uploadRenderElementUniforms(G$u._shaderValue.data)),G$e.mainContext.drawElements(4,G$w,5123,0),G$s.drawCall++;G$s.trianglesFaces+=G$w/3},G$T.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},G$T.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},G$Y(0,G$T,"_vertexBufferCount",function(){return 1}),G$Y(0,G$T,"triangleCount",function(){return this._indexBuffer.indexCount/3}),G$z(G$o,["_tempVector30",function(){return this._tempVector30=new G$Pl},"_tempVector31",function(){return this._tempVector31=new G$Pl},"_tempQuaternion0",function(){return this._tempQuaternion0=new G$wl},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new G$Tl},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new G$Tl}]),G$o}(),G$Ml=function(){function G$T(G$T){this.defineCounter=0,this.defines=null,G$T?(this.defineCounter=G$T.defineCounter,this.defines=G$T.defines.slice()):(this.defineCounter=0,this.defines=[])}return G$K(G$T,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),G$T.prototype.registerDefine=function(G$T){var G$l=Math.pow(2,this.defineCounter++);return this.defines[G$l]=G$T,G$l},G$T}(),G$zl=function(){function G$T(){}return G$K(G$T,"laya.d3.shader.ShaderInit3D"),G$T.__init__=function(){var G$T,G$l;G$sl._globalRegDefine("HIGHPRECISION",G$sl.SHADERDEFINE_HIGHPRECISION),G$sl._globalRegDefine("FOG",G$sl.SHADERDEFINE_FOG),G$sl._globalRegDefine("DIRECTIONLIGHT",G$sl.SHADERDEFINE_DIRECTIONLIGHT),G$sl._globalRegDefine("POINTLIGHT",G$sl.SHADERDEFINE_POINTLIGHT),G$sl._globalRegDefine("SPOTLIGHT",G$sl.SHADERDEFINE_SPOTLIGHT),G$sl._globalRegDefine("UV",G$sl.SHADERDEFINE_UV0),G$sl._globalRegDefine("COLOR",G$sl.SHADERDEFINE_COLOR),G$sl._globalRegDefine("UV1",G$sl.SHADERDEFINE_UV1),G$sl._globalRegDefine("CASTSHADOW",G$Kl.SHADERDEFINE_CAST_SHADOW),G$sl._globalRegDefine("SHADOWMAP_PSSM1",G$Kl.SHADERDEFINE_SHADOW_PSSM1),G$sl._globalRegDefine("SHADOWMAP_PSSM2",G$Kl.SHADERDEFINE_SHADOW_PSSM2),G$sl._globalRegDefine("SHADOWMAP_PSSM3",G$Kl.SHADERDEFINE_SHADOW_PSSM3),G$sl._globalRegDefine("SHADOWMAP_PCF_NO",G$Kl.SHADERDEFINE_SHADOW_PCF_NO),G$sl._globalRegDefine("SHADOWMAP_PCF1",G$Kl.SHADERDEFINE_SHADOW_PCF1),G$sl._globalRegDefine("SHADOWMAP_PCF2",G$Kl.SHADERDEFINE_SHADOW_PCF2),G$sl._globalRegDefine("SHADOWMAP_PCF3",G$Kl.SHADERDEFINE_SHADOW_PCF3),G$sl._globalRegDefine("DEPTHFOG",G$sl.SAHDERDEFINE_DEPTHFOG),G$Ol.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),G$Ol.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),G$T={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},G$l={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var G$w=G$Ol.nameKey.add("SIMPLE");shaderCompile=G$sl.add(G$w,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',G$T,G$l),G$$l.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),G$$l.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),G$$l.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),G$$l.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),G$$l.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),G$$l.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),G$$l.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),G$$l.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),G$$l.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},G$T}(),G$bl=function(){function G$T(){this._data=null,this._data=[]}G$K(G$T,"laya.d3.shader.ValusArray");var G$l=G$T.prototype;return G$l.setValue=function(G$T,G$l){this._data[G$T]=G$l},G$Y(0,G$l,"data",function(){return this._data}),G$T}(),G$Kl=function(){function G$T(){}return G$T.SHADERDEFINE_RECEIVE_SHADOW=1,G$T.SHADERDEFINE_CAST_SHADOW=512,G$T.SHADERDEFINE_SHADOW_PSSM1=1024,G$T.SHADERDEFINE_SHADOW_PSSM2=2048,G$T.SHADERDEFINE_SHADOW_PSSM3=4096,G$T.SHADERDEFINE_SHADOW_PCF_NO=8192,G$T.SHADERDEFINE_SHADOW_PCF1=16384,G$T.SHADERDEFINE_SHADOW_PCF2=32768,G$T.SHADERDEFINE_SHADOW_PCF3=65536,G$T.MAX_PSSM_COUNT=3,G$T}(),G$Yl=function(){function G$f(){}return G$K(G$f,"laya.d3.utils.Picker"),G$f.calculateCursorRay=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=G$T.elements[0],G$j=G$T.elements[1],G$J=G$f._tempVector30,G$q=G$J.elements;G$q[0]=G$P,G$q[1]=G$j,G$q[2]=G$l.minDepth;var G$M=G$f._tempVector31,G$z=G$M.elements;G$z[0]=G$P,G$z[1]=G$j,G$z[2]=G$l.maxDepth;var G$b=G$D.origin,G$K=G$f._tempVector32;G$l.unprojectFromWVP(G$J,G$w,G$u,G$p,G$b),G$l.unprojectFromWVP(G$M,G$w,G$u,G$p,G$K);var G$Y=G$D.direction.elements;G$Y[0]=G$K.x-G$b.x,G$Y[1]=G$K.y-G$b.y,G$Y[2]=G$K.z-G$b.z,G$Pl.normalize(G$D.direction,G$D.direction)},G$f.rayIntersectsPositionsAndIndices=function(G$T,G$l,G$w,G$u,G$p){for(var G$D=G$w.vertexStride/4,G$P=G$w.getVertexElementByUsage(0).offset/4,G$j=Number.MAX_VALUE,G$J=-1,G$q=-1,G$M=-1,G$z=0;G$z<G$u.length;G$z+=3){var G$b=G$f._tempVector35,G$K=G$b.elements,G$Y=G$u[G$z]*G$D,G$t=G$Y+G$P;G$K[0]=G$l[G$t],G$K[1]=G$l[1+G$t],G$K[2]=G$l[2+G$t];var G$A=G$f._tempVector36,G$L=G$A.elements,G$i=G$u[G$z+1]*G$D,G$W=G$i+G$P;G$L[0]=G$l[G$W],G$L[1]=G$l[1+G$W],G$L[2]=G$l[2+G$W];var G$m=G$f._tempVector37,G$c=G$m.elements,G$a=G$u[G$z+2]*G$D,G$B=G$a+G$P;G$c[0]=G$l[G$B],G$c[1]=G$l[1+G$B],G$c[2]=G$l[2+G$B];var G$s=laya.d3.utils.Picker.rayIntersectsTriangle(G$T,G$b,G$A,G$m);!isNaN(G$s)&&G$s<G$j&&(G$j=G$s,G$J=G$Y,G$q=G$i,G$M=G$a)}if(G$j===Number.MAX_VALUE)return G$p.position.toDefault(),G$p.distance=Number.MAX_VALUE,G$p.trianglePositions[0].toDefault(),G$p.trianglePositions[1].toDefault(),G$p.trianglePositions[2].toDefault(),G$p.triangleNormals[0].toDefault(),G$p.triangleNormals[1].toDefault(),G$p.triangleNormals[2].toDefault(),!1;G$p.distance=G$j,G$Pl.scale(G$T.direction,G$j,G$p.position),G$Pl.add(G$T.origin,G$p.position,G$p.position);var G$r=G$p.trianglePositions,G$I=G$r[0],G$Q=G$r[1],G$o=G$r[2],G$e=G$I.elements,G$y=G$Q.elements,G$v=G$o.elements,G$x=G$J+G$P;G$e[0]=G$l[G$x],G$e[1]=G$l[G$x+1],G$e[2]=G$l[G$x+2];var G$R=G$q+G$P;G$y[0]=G$l[G$R],G$y[1]=G$l[G$R+1],G$y[2]=G$l[G$R+2];var G$F=G$M+G$P;G$v[0]=G$l[G$F],G$v[1]=G$l[G$F+1],G$v[2]=G$l[G$F+2];var G$O=G$w.getVertexElementByUsage(3);if(G$O){var G$$=G$O.offset/4,G$Z=G$p.triangleNormals,G$H=G$Z[0],G$X=G$Z[1],G$k=G$Z[2],G$n=G$H.elements,G$d=G$X.elements,G$G=G$k.elements,G$N=G$J+G$$;G$n[0]=G$l[G$N],G$n[1]=G$l[G$N+1],G$n[2]=G$l[G$N+2];var G$h=G$q+G$$;G$d[0]=G$l[G$h],G$d[1]=G$l[G$h+1],G$d[2]=G$l[G$h+2];var G$g=G$M+G$$;G$G[0]=G$l[G$g],G$G[1]=G$l[G$g+1],G$G[2]=G$l[G$g+2]}return!0},G$f.rayIntersectsTriangle=function(G$T,G$l,G$w,G$u){var G$p=G$f._tempVector30,G$D=G$f._tempVector31;G$Pl.subtract(G$w,G$l,G$p),G$Pl.subtract(G$u,G$l,G$D);var G$P,G$j=G$f._tempVector32;if(G$Pl.cross(G$T.direction,G$D,G$j),(G$P=G$Pl.dot(G$p,G$j))>-Number.MIN_VALUE&&G$P<Number.MIN_VALUE)return Number.NaN;var G$J,G$q=1/G$P,G$M=G$f._tempVector33;if(G$Pl.subtract(G$T.origin,G$l,G$M),G$J=G$Pl.dot(G$M,G$j),(G$J*=G$q)<0||1<G$J)return Number.NaN;var G$z,G$b,G$K=G$f._tempVector34;return G$Pl.cross(G$M,G$p,G$K),G$z=G$Pl.dot(G$T.direction,G$K),(G$z*=G$q)<0||1<G$J+G$z?Number.NaN:(G$b=G$Pl.dot(G$D,G$K),(G$b*=G$q)<0?Number.NaN:G$b)},G$z(G$f,["_tempVector30",function(){return this._tempVector30=new G$Pl},"_tempVector31",function(){return this._tempVector31=new G$Pl},"_tempVector32",function(){return this._tempVector32=new G$Pl},"_tempVector33",function(){return this._tempVector33=new G$Pl},"_tempVector34",function(){return this._tempVector34=new G$Pl},"_tempVector35",function(){return this._tempVector35=new G$Pl},"_tempVector36",function(){return this._tempVector36=new G$Pl},"_tempVector37",function(){return this._tempVector37=new G$Pl}]),G$f}(),G$tl=(function(){function G$T(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new G$Pl,new G$Pl,new G$Pl],this.trianglePositions.length=3,this.triangleNormals=[new G$Pl,new G$Pl,new G$Pl],this.triangleNormals.length=3,this.position=new G$Pl}G$K(G$T,"laya.d3.utils.RaycastHit"),G$T.prototype.cloneTo=function(G$T){G$T.distance=this.distance,this.trianglePositions[0].cloneTo(G$T.trianglePositions[0]),this.trianglePositions[1].cloneTo(G$T.trianglePositions[1]),this.trianglePositions[2].cloneTo(G$T.trianglePositions[2]),this.triangleNormals[0].cloneTo(G$T.triangleNormals[0]),this.triangleNormals[1].cloneTo(G$T.triangleNormals[1]),this.triangleNormals[2].cloneTo(G$T.triangleNormals[2]),this.position.cloneTo(G$T.position),G$T.sprite3D=this.sprite3D}}(),function(){function G$T(G$T,G$l){this._width=0,this._height=0,this._width=G$T,this._height=G$l}G$K(G$T,"laya.d3.utils.Size");var G$l=G$T.prototype;return G$Y(0,G$l,"width",function(){return-1===this._width?G$U.clientWidth:this._width}),G$Y(0,G$l,"height",function(){return-1===this._height?G$U.clientHeight:this._height}),G$Y(1,G$T,"fullScreen",function(){return new G$T(-1,-1)}),G$T}()),G$Al=function(){function G$x(){}return G$K(G$x,"laya.d3.utils.Utils3D"),G$x._rotationTransformScaleSkinAnimation=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$z){var G$b,G$K,G$Y,G$t,G$A,G$L=G$x._tempArray16_0,G$i=G$x._tempArray16_1,G$W=G$x._tempArray16_2,G$m=G$u+G$u,G$c=G$p+G$p,G$a=G$D+G$D,G$B=G$u*G$m,G$s=G$p*G$m,G$r=G$p*G$c,G$I=G$D*G$m,G$Q=G$D*G$c,G$o=G$D*G$a,G$e=G$P*G$m,G$y=G$P*G$c,G$v=G$P*G$a;for(G$L[15]=1,G$L[0]=1-G$r-G$o,G$L[1]=G$s+G$v,G$L[2]=G$I-G$y,G$L[4]=G$s-G$v,G$L[5]=1-G$B-G$o,G$L[6]=G$Q+G$e,G$L[8]=G$I+G$y,G$L[9]=G$Q-G$e,G$L[10]=1-G$B-G$r,G$i[15]=1,G$i[0]=G$j,G$i[5]=G$J,G$i[10]=G$q,G$b=0;G$b<4;G$b++)G$K=G$L[G$b],G$Y=G$L[G$b+4],G$t=G$L[G$b+8],G$A=G$L[G$b+12],G$W[G$b]=G$K,G$W[G$b+4]=G$Y,G$W[G$b+8]=G$t,G$W[G$b+12]=G$K*G$T+G$Y*G$l+G$t*G$w+G$A;for(G$b=0;G$b<4;G$b++)G$K=G$W[G$b],G$Y=G$W[G$b+4],G$t=G$W[G$b+8],G$A=G$W[G$b+12],G$M[G$b+G$z]=G$K*G$i[0]+G$Y*G$i[1]+G$t*G$i[2]+G$A*G$i[3],G$M[G$b+G$z+4]=G$K*G$i[4]+G$Y*G$i[5]+G$t*G$i[6]+G$A*G$i[7],G$M[G$b+G$z+8]=G$K*G$i[8]+G$Y*G$i[9]+G$t*G$i[10]+G$A*G$i[11],G$M[G$b+G$z+12]=G$K*G$i[12]+G$Y*G$i[13]+G$t*G$i[14]+G$A*G$i[15]},G$x._createNodeByJson=function(G$T,G$l,G$w,G$u){if(!G$w)switch(G$l.type){case"Sprite3D":G$w=new G$Fl;break;case"MeshSprite3D":G$w=new G$fl;break;case"SkinnedMeshSprite3D":G$w=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":G$w=new ShuriKenParticle3D;break;case"TrailSprite3D":G$w=new TrailSprite3D;break;case"Terrain":G$w=new Terrain;break;case"Camera":G$w=new G$gl;break;case"DirectionLight":G$w=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var G$p=G$l.props;if(G$p)for(var G$D in G$p)G$w[G$D]=G$p[G$D];var G$P=G$l.customProps;G$P&&(G$w instanceof laya.d3.core.Sprite3D?(G$w._parseBaseCustomProps(G$P),G$w._parseCustomProps(G$T,G$u,G$P,G$l),G$w._parseCustomComponent(G$T,G$u,G$l.components)):G$w._parseCustomProps(G$T,G$u,G$P,G$l));var G$j=G$l.child;if(G$j)for(var G$J=0,G$q=G$j.length;G$J<G$q;G$J++){var G$M=G$x._createNodeByJson(G$T,G$j[G$J],null,G$u);G$w.addChild(G$M)}return G$w},G$x._computeBoneAndAnimationDatasByBindPoseMatrxix=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P,G$j,G$J=0,G$q=0,G$M=G$T.length;for(G$P=0;G$P<G$M;G$J+=G$T[G$P].keyframeWidth,G$q+=16,G$P++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(G$l[G$J+0],G$l[G$J+1],G$l[G$J+2],G$l[G$J+3],G$l[G$J+4],G$l[G$J+5],G$l[G$J+6],G$l[G$J+7],G$l[G$J+8],G$l[G$J+9],G$u,G$q),0!=G$P&&(G$j=16*G$T[G$P].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(G$u,G$j,G$u,G$q,G$u,G$q));var G$z=G$w.length;for(G$P=0;G$P<G$z;G$P++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(G$u,16*G$D[G$P],G$w[G$P],G$p,16*G$P)},G$x._computeAnimationDatasByArrayAndMatrixFast=function(G$T,G$l,G$w,G$u){for(var G$p=0,G$D=G$T.length;G$p<G$D;G$p++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(G$l,16*G$u[G$p],G$T[G$p],G$w,16*G$p)},G$x._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(G$T,G$l,G$w,G$u,G$p){var G$D,G$P,G$j=0,G$J=0,G$q=G$T.length;for(G$D=0;G$D<G$q;G$j+=G$T[G$D].keyframeWidth,G$J+=16,G$D++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(G$l[G$j+7],G$l[G$j+8],G$l[G$j+9],G$l[G$j+3],G$l[G$j+4],G$l[G$j+5],G$l[G$j+6],G$l[G$j+0],G$l[G$j+1],G$l[G$j+2],G$u,G$J),0!=G$D&&(G$P=16*G$T[G$D].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(G$u,G$P,G$u,G$J,G$u,G$J));var G$M=G$w.length;for(G$D=0;G$D<G$M;G$D++){var G$z=16*G$D;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(G$u,G$z,G$w[G$D],G$p,G$z)}},G$x._computeAnimationDatasByArrayAndMatrixFastOld=function(G$T,G$l,G$w){for(var G$u=G$T.length,G$p=0;G$p<G$u;G$p++){var G$D=16*G$p;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(G$l,G$D,G$T[G$p],G$w,G$D)}},G$x._computeRootAnimationData=function(G$T,G$l,G$w){for(var G$u=0,G$p=0,G$D=0,G$P=G$T.length;G$u<G$P;G$p+=G$T[G$u].keyframeWidth,G$D+=16,G$u++)laya.d3.utils.Utils3D.createAffineTransformationArray(G$l[G$p+0],G$l[G$p+1],G$l[G$p+2],G$l[G$p+3],G$l[G$p+4],G$l[G$p+5],G$l[G$p+6],G$l[G$p+7],G$l[G$p+8],G$l[G$p+9],G$w,G$D)},G$x.transformVector3ArrayByQuat=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$w.elements,G$P=G$T[G$l],G$j=G$T[G$l+1],G$J=G$T[G$l+2],G$q=G$D[0],G$M=G$D[1],G$z=G$D[2],G$b=G$D[3],G$K=G$b*G$P+G$M*G$J-G$z*G$j,G$Y=G$b*G$j+G$z*G$P-G$q*G$J,G$t=G$b*G$J+G$q*G$j-G$M*G$P,G$A=-G$q*G$P-G$M*G$j-G$z*G$J;G$u[G$p]=G$K*G$b+G$A*-G$q+G$Y*-G$z-G$t*-G$M,G$u[G$p+1]=G$Y*G$b+G$A*-G$M+G$t*-G$q-G$K*-G$z,G$u[G$p+2]=G$t*G$b+G$A*-G$z+G$K*-G$M-G$Y*-G$q},G$x.mulMatrixByArray=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P,G$j,G$J,G$q,G$M;if(G$p===G$w){for(G$w=G$x._tempArray16_3,G$P=0;G$P<16;++G$P)G$w[G$P]=G$p[G$D+G$P];G$u=0}for(G$P=0;G$P<4;G$P++)G$j=G$T[G$l+G$P],G$J=G$T[G$l+G$P+4],G$q=G$T[G$l+G$P+8],G$M=G$T[G$l+G$P+12],G$p[G$D+G$P]=G$j*G$w[G$u+0]+G$J*G$w[G$u+1]+G$q*G$w[G$u+2]+G$M*G$w[G$u+3],G$p[G$D+G$P+4]=G$j*G$w[G$u+4]+G$J*G$w[G$u+5]+G$q*G$w[G$u+6]+G$M*G$w[G$u+7],G$p[G$D+G$P+8]=G$j*G$w[G$u+8]+G$J*G$w[G$u+9]+G$q*G$w[G$u+10]+G$M*G$w[G$u+11],G$p[G$D+G$P+12]=G$j*G$w[G$u+12]+G$J*G$w[G$u+13]+G$q*G$w[G$u+14]+G$M*G$w[G$u+15]},G$x.mulMatrixByArrayFast=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P,G$j,G$J,G$q,G$M;for(G$P=0;G$P<4;G$P++)G$j=G$T[G$l+G$P],G$J=G$T[G$l+G$P+4],G$q=G$T[G$l+G$P+8],G$M=G$T[G$l+G$P+12],G$p[G$D+G$P]=G$j*G$w[G$u+0]+G$J*G$w[G$u+1]+G$q*G$w[G$u+2]+G$M*G$w[G$u+3],G$p[G$D+G$P+4]=G$j*G$w[G$u+4]+G$J*G$w[G$u+5]+G$q*G$w[G$u+6]+G$M*G$w[G$u+7],G$p[G$D+G$P+8]=G$j*G$w[G$u+8]+G$J*G$w[G$u+9]+G$q*G$w[G$u+10]+G$M*G$w[G$u+11],G$p[G$D+G$P+12]=G$j*G$w[G$u+12]+G$J*G$w[G$u+13]+G$q*G$w[G$u+14]+G$M*G$w[G$u+15]},G$x.mulMatrixByArrayAndMatrixFast=function(G$T,G$l,G$w,G$u,G$p){var G$D,G$P,G$j,G$J,G$q,G$M=G$w.elements,G$z=G$M[0],G$b=G$M[1],G$K=G$M[2],G$Y=G$M[3],G$t=G$M[4],G$A=G$M[5],G$L=G$M[6],G$i=G$M[7],G$W=G$M[8],G$m=G$M[9],G$c=G$M[10],G$a=G$M[11],G$B=G$M[12],G$s=G$M[13],G$r=G$M[14],G$I=G$M[15],G$Q=G$l,G$o=G$l+4,G$e=G$l+8,G$y=G$l+12,G$v=G$p,G$x=G$p+4,G$R=G$p+8,G$F=G$p+12;for(G$D=0;G$D<4;G$D++)G$P=G$T[G$Q+G$D],G$j=G$T[G$o+G$D],G$J=G$T[G$e+G$D],G$q=G$T[G$y+G$D],G$u[G$v+G$D]=G$P*G$z+G$j*G$b+G$J*G$K+G$q*G$Y,G$u[G$x+G$D]=G$P*G$t+G$j*G$A+G$J*G$L+G$q*G$i,G$u[G$R+G$D]=G$P*G$W+G$j*G$m+G$J*G$c+G$q*G$a,G$u[G$F+G$D]=G$P*G$B+G$j*G$s+G$J*G$r+G$q*G$I},G$x.createAffineTransformationArray=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$z){var G$b=G$u+G$u,G$K=G$p+G$p,G$Y=G$D+G$D,G$t=G$u*G$b,G$A=G$u*G$K,G$L=G$u*G$Y,G$i=G$p*G$K,G$W=G$p*G$Y,G$m=G$D*G$Y,G$c=G$P*G$b,G$a=G$P*G$K,G$B=G$P*G$Y;G$M[G$z+0]=(1-(G$i+G$m))*G$j,G$M[G$z+1]=(G$A+G$B)*G$j,G$M[G$z+2]=(G$L-G$a)*G$j,G$M[G$z+3]=0,G$M[G$z+4]=(G$A-G$B)*G$J,G$M[G$z+5]=(1-(G$t+G$m))*G$J,G$M[G$z+6]=(G$W+G$c)*G$J,G$M[G$z+7]=0,G$M[G$z+8]=(G$L+G$a)*G$q,G$M[G$z+9]=(G$W-G$c)*G$q,G$M[G$z+10]=(1-(G$t+G$i))*G$q,G$M[G$z+11]=0,G$M[G$z+12]=G$T,G$M[G$z+13]=G$l,G$M[G$z+14]=G$w,G$M[G$z+15]=1},G$x.transformVector3ArrayToVector3ArrayCoordinate=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$x._tempArray4_0,G$P=G$T[G$l+0],G$j=G$T[G$l+1],G$J=G$T[G$l+2],G$q=G$w.elements;G$D[0]=G$P*G$q[0]+G$j*G$q[4]+G$J*G$q[8]+G$q[12],G$D[1]=G$P*G$q[1]+G$j*G$q[5]+G$J*G$q[9]+G$q[13],G$D[2]=G$P*G$q[2]+G$j*G$q[6]+G$J*G$q[10]+G$q[14],G$D[3]=1/(G$P*G$q[3]+G$j*G$q[7]+G$J*G$q[11]+G$q[15]),G$u[G$p+0]=G$D[0]*G$D[3],G$u[G$p+1]=G$D[1]*G$D[3],G$u[G$p+2]=G$D[2]*G$D[3]},G$x.transformLightingMapTexcoordByUV0Array=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$w.elements;G$u[G$p+0]=G$T[G$l+0]*G$D[0]+G$D[2],G$u[G$p+1]=(G$T[G$l+1]-1)*G$D[1]+G$D[3]},G$x.transformLightingMapTexcoordByUV1Array=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$w.elements;G$u[G$p+0]=G$T[G$l+0]*G$D[0]+G$D[2],G$u[G$p+1]=1+G$T[G$l+1]*G$D[1]+G$D[3]},G$x.getURLVerion=function(G$T){var G$l=G$T.indexOf("?");return 0<=G$l?G$T.substr(G$l):null},G$x._quaternionCreateFromYawPitchRollArray=function(G$T,G$l,G$w,G$u){var G$p=.5*G$w,G$D=.5*G$l,G$P=.5*G$T,G$j=Math.sin(G$p),G$J=Math.cos(G$p),G$q=Math.sin(G$D),G$M=Math.cos(G$D),G$z=Math.sin(G$P),G$b=Math.cos(G$P);G$u[0]=G$b*G$q*G$J+G$z*G$M*G$j,G$u[1]=G$z*G$M*G$J-G$b*G$q*G$j,G$u[2]=G$b*G$M*G$j-G$z*G$q*G$J,G$u[3]=G$b*G$M*G$J+G$z*G$q*G$j},G$x._createAffineTransformationArray=function(G$T,G$l,G$w,G$u){var G$p=G$l[0],G$D=G$l[1],G$P=G$l[2],G$j=G$l[3],G$J=G$p+G$p,G$q=G$D+G$D,G$M=G$P+G$P,G$z=G$p*G$J,G$b=G$p*G$q,G$K=G$p*G$M,G$Y=G$D*G$q,G$t=G$D*G$M,G$A=G$P*G$M,G$L=G$j*G$J,G$i=G$j*G$q,G$W=G$j*G$M,G$m=G$w[0],G$c=G$w[1],G$a=G$w[2];G$u[0]=(1-(G$Y+G$A))*G$m,G$u[1]=(G$b+G$W)*G$m,G$u[2]=(G$K-G$i)*G$m,G$u[3]=0,G$u[4]=(G$b-G$W)*G$c,G$u[5]=(1-(G$z+G$A))*G$c,G$u[6]=(G$t+G$L)*G$c,G$u[7]=0,G$u[8]=(G$K+G$i)*G$a,G$u[9]=(G$t-G$L)*G$a,G$u[10]=(1-(G$z+G$Y))*G$a,G$u[11]=0,G$u[12]=G$T[0],G$u[13]=G$T[1],G$u[14]=G$T[2],G$u[15]=1},G$x._mulMatrixArray=function(G$T,G$l,G$w,G$u){var G$p,G$D,G$P,G$j,G$J,G$q=G$l.elements,G$M=G$q[0],G$z=G$q[1],G$b=G$q[2],G$K=G$q[3],G$Y=G$q[4],G$t=G$q[5],G$A=G$q[6],G$L=G$q[7],G$i=G$q[8],G$W=G$q[9],G$m=G$q[10],G$c=G$q[11],G$a=G$q[12],G$B=G$q[13],G$s=G$q[14],G$r=G$q[15],G$I=G$u,G$Q=G$u+4,G$o=G$u+8,G$e=G$u+12;for(G$p=0;G$p<4;G$p++)G$D=G$T[G$p],G$P=G$T[G$p+4],G$j=G$T[G$p+8],G$J=G$T[G$p+12],G$w[G$I+G$p]=G$D*G$M+G$P*G$z+G$j*G$b+G$J*G$K,G$w[G$Q+G$p]=G$D*G$Y+G$P*G$t+G$j*G$A+G$J*G$L,G$w[G$o+G$p]=G$D*G$i+G$P*G$W+G$j*G$m+G$J*G$c,G$w[G$e+G$p]=G$D*G$a+G$P*G$B+G$j*G$s+G$J*G$r},G$x.getYawPitchRoll=function(G$T,G$l){G$x.transformQuat(G$Pl.ForwardRH,G$T,G$wl.TEMPVector31),G$x.transformQuat(G$Pl.Up,G$T,G$wl.TEMPVector32);var G$w=G$wl.TEMPVector32.elements;G$x.angleTo(G$Pl.ZERO,G$wl.TEMPVector31,G$wl.TEMPVector33);var G$u=G$wl.TEMPVector33.elements;G$u[0]==Math.PI/2?(G$u[1]=G$x.arcTanAngle(G$w[2],G$w[0]),G$u[2]=0):G$u[0]==-Math.PI/2?(G$u[1]=G$x.arcTanAngle(-G$w[2],-G$w[0]),G$u[2]=0):(G$Tl.createRotationY(-G$u[1],G$wl.TEMPMatrix0),G$Tl.createRotationX(-G$u[0],G$wl.TEMPMatrix1),G$Pl.transformCoordinate(G$wl.TEMPVector32,G$wl.TEMPMatrix0,G$wl.TEMPVector32),G$Pl.transformCoordinate(G$wl.TEMPVector32,G$wl.TEMPMatrix1,G$wl.TEMPVector32),G$u[2]=G$x.arcTanAngle(G$w[1],-G$w[0])),G$u[1]<=-Math.PI&&(G$u[1]=Math.PI),G$u[2]<=-Math.PI&&(G$u[2]=Math.PI),G$u[1]>=Math.PI&&G$u[2]>=Math.PI&&(G$u[1]=0,G$u[2]=0,G$u[0]=Math.PI-G$u[0]),G$l[0]=G$u[1],G$l[1]=G$u[0],G$l[2]=G$u[2]},G$x.arcTanAngle=function(G$T,G$l){return 0==G$T?1==G$l?Math.PI/2:-Math.PI/2:0<G$T?Math.atan(G$l/G$T):G$T<0?0<G$l?Math.atan(G$l/G$T)+Math.PI:Math.atan(G$l/G$T)-Math.PI:0},G$x.angleTo=function(G$T,G$l,G$w){G$Pl.subtract(G$l,G$T,G$wl.TEMPVector30),G$Pl.normalize(G$wl.TEMPVector30,G$wl.TEMPVector30),G$w.elements[0]=Math.asin(G$wl.TEMPVector30.y),G$w.elements[1]=G$x.arcTanAngle(-G$wl.TEMPVector30.z,-G$wl.TEMPVector30.x)},G$x.transformQuat=function(G$T,G$l,G$w){var G$u=G$w.elements,G$p=G$T.elements,G$D=G$l,G$P=G$p[0],G$j=G$p[1],G$J=G$p[2],G$q=G$D[0],G$M=G$D[1],G$z=G$D[2],G$b=G$D[3],G$K=G$b*G$P+G$M*G$J-G$z*G$j,G$Y=G$b*G$j+G$z*G$P-G$q*G$J,G$t=G$b*G$J+G$q*G$j-G$M*G$P,G$A=-G$q*G$P-G$M*G$j-G$z*G$J;G$u[0]=G$K*G$b+G$A*-G$q+G$Y*-G$z-G$t*-G$M,G$u[1]=G$Y*G$b+G$A*-G$M+G$t*-G$q-G$K*-G$z,G$u[2]=G$t*G$b+G$A*-G$z+G$K*-G$M-G$Y*-G$q},G$x.quaterionNormalize=function(G$T,G$l){var G$w=G$T[0],G$u=G$T[1],G$p=G$T[2],G$D=G$T[3],G$P=G$w*G$w+G$u*G$u+G$p*G$p+G$D*G$D;0<G$P&&(G$P=1/Math.sqrt(G$P),G$l[0]=G$w*G$P,G$l[1]=G$u*G$P,G$l[2]=G$p*G$P,G$l[3]=G$D*G$P)},G$x.matrix4x4MultiplyFFF=function(G$T,G$l,G$w){var G$u,G$p,G$D,G$P,G$j;if(G$w===G$l)for(G$l=new Float32Array(16),G$u=0;G$u<16;++G$u)G$l[G$u]=G$w[G$u];for(G$u=0;G$u<4;G$u++)G$p=G$T[G$u],G$D=G$T[G$u+4],G$P=G$T[G$u+8],G$j=G$T[G$u+12],G$w[G$u]=G$p*G$l[0]+G$D*G$l[1]+G$P*G$l[2]+G$j*G$l[3],G$w[G$u+4]=G$p*G$l[4]+G$D*G$l[5]+G$P*G$l[6]+G$j*G$l[7],G$w[G$u+8]=G$p*G$l[8]+G$D*G$l[9]+G$P*G$l[10]+G$j*G$l[11],G$w[G$u+12]=G$p*G$l[12]+G$D*G$l[13]+G$P*G$l[14]+G$j*G$l[15]},G$x.matrix4x4MultiplyMFM=function(G$T,G$l,G$w){G$x.matrix4x4MultiplyFFF(G$T.elements,G$l,G$w.elements)},G$z(G$x,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new G$Pl},"_tempVector3_1",function(){return this._tempVector3_1=new G$Pl},"_tempVector3_2",function(){return this._tempVector3_2=new G$Pl},"_tempVector3_3",function(){return this._tempVector3_3=new G$Pl},"_tempVector3_4",function(){return this._tempVector3_4=new G$Pl},"_tempVector3_5",function(){return this._tempVector3_5=new G$Pl},"_tempVector3_6",function(){return this._tempVector3_6=new G$Pl},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),G$x}(),G$Ll=function(){function G$y(){}return G$K(G$y,"Laya3D"),G$y._cancelLoadByUrl=function(G$T){G$c.loader.cancelLoadByUrl(G$T),G$y._innerFirstLevelLoaderManager.cancelLoadByUrl(G$T),G$y._innerSecondLevelLoaderManager.cancelLoadByUrl(G$T),G$y._innerThirdLevelLoaderManager.cancelLoadByUrl(G$T),G$y._innerFourthLevelLoaderManager.cancelLoadByUrl(G$T)},G$y._changeWebGLSize=function(G$T,G$l){G$e.onStageResize(G$T,G$l),G$U.clientWidth=G$T,G$U.clientHeight=G$l},G$y.__init__=function(){var G$T=G$l.createMap;G$T.lh=[G$Fl,"SPRITE3DHIERARCHY"],G$T.ls=[G$Rl,"SPRITE3DHIERARCHY"],G$T.lm=[G$nl,"MESH"],G$T.lmat=[G$$l,"MATERIAL"],G$T.jpg=[G$Gl,"nativeimage"],G$T.jpeg=[G$Gl,"nativeimage"],G$T.png=[G$Gl,"nativeimage"],G$T.pkm=[G$Gl,"arraybuffer"],G$T.raw=[G$Xl,"arraybuffer"],G$T.mipmaps=[G$Xl,"arraybuffer"],G$L.parserMap.SPRITE3DHIERARCHY=G$y._loadHierarchy,G$L.parserMap.MESH=G$y._loadMesh,G$L.parserMap.MATERIAL=G$y._loadMaterial,G$L.parserMap.TEXTURECUBE=G$y._loadTextureCube,G$L.parserMap.TERRAIN=G$y._loadTerrain,G$y._innerFirstLevelLoaderManager.on("error",null,G$y._eventLoadManagerError),G$y._innerSecondLevelLoaderManager.on("error",null,G$y._eventLoadManagerError),G$y._innerThirdLevelLoaderManager.on("error",null,G$y._eventLoadManagerError),G$y._innerFourthLevelLoaderManager.on("error",null,G$y._eventLoadManagerError)},G$y.READ_BLOCK=function(){return G$y._readData.pos+=4,!0},G$y.READ_DATA=function(){return G$y._DATA.offset=G$y._readData.getUint32(),G$y._DATA.size=G$y._readData.getUint32(),!0},G$y.READ_STRINGS=function(){var G$T=[],G$l={offset:0,size:0};G$l.offset=G$y._readData.getUint16(),G$l.size=G$y._readData.getUint16();G$y._readData.pos;G$y._readData.pos=G$l.offset+G$y._DATA.offset;for(var G$w=0;G$w<G$l.size;G$w++){var G$u=G$y._readData.readUTFString();-1===G$u.lastIndexOf(".lmat")&&-1===G$u.lastIndexOf(".lpbr")||G$T.push(G$u)}return G$T},G$y.formatRelativePath=function(G$T,G$l){var G$w;if("."===G$l.charAt(0)){for(var G$u=(G$T+G$l).split("/"),G$p=0,G$D=G$u.length;G$p<G$D;G$p++)if(".."==G$u[G$p]){var G$P=G$p-1;0<G$P&&".."!==G$u[G$P]&&(G$u.splice(G$P,2),G$p-=2)}G$w=G$u.join("/")}else G$w=G$T+G$l;return null!=G$o.customFormat&&(G$w=G$o.customFormat(G$w,null)),G$w},G$y._eventLoadManagerError=function(G$T){G$c.loader.event("error",G$T)},G$y._addHierarchyInnerUrls=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P=G$y.formatRelativePath(G$u,G$p);G$w&&(G$P+=G$w),G$T.push({url:G$P,clas:G$D}),G$l[G$p]=G$P},G$y._getSprite3DHierarchyInnerUrls=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){var G$j,G$J=0,G$q=0;switch(G$T.type){case"Scene":var G$M=G$T.customProps.lightmaps;for(G$J=0,G$q=G$M.length;G$J<G$q;G$J++){var G$z=G$M[G$J].replace(".exr",".png");G$y._addHierarchyInnerUrls(G$u,G$p,G$D,G$P,G$z,G$Gl)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var G$b;if(G$T.instanceParams)(G$b=G$T.instanceParams.loadPath)&&G$y._addHierarchyInnerUrls(G$l,G$p,G$D,G$P,G$b,G$nl);else{(G$b=(G$j=G$T.customProps).meshPath)&&G$y._addHierarchyInnerUrls(G$l,G$p,G$D,G$P,G$b,G$nl);var G$K=G$j.materials;if(G$K)for(G$J=0,G$q=G$K.length;G$J<G$q;G$J++){for(var G$Y=G$K[G$J],G$t=G$Y.type.split("."),G$A=G$v.window,G$L=0,G$i=G$t.length;G$L<G$i;++G$L){G$A=G$A[this.clasPaths[G$L]]}if("function"!=typeof G$A)throw"_getSprite3DHierarchyInnerUrls 错误: "+G$Y.type+" 不是类";G$y._addHierarchyInnerUrls(G$w,G$p,G$D,G$P,G$Y.path,G$A)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var G$W=(G$j=G$T.customProps).meshPath;G$W&&G$y._addHierarchyInnerUrls(G$l,G$p,G$D,G$P,G$W,G$nl);var G$m=G$j.material;if(G$m){G$t=G$m.type.split("."),G$A=G$v.window;for(G$L=0,G$i=G$t.length;G$L<G$i;++G$L){G$A=G$A[this.clasPaths[G$L]]}G$y._addHierarchyInnerUrls(G$w,G$p,G$D,G$P,G$m.path,G$A)}else{var G$c=G$j.materialPath;if(G$c)G$y._addHierarchyInnerUrls(G$w,G$p,G$D,G$P,G$c,ShurikenParticleMaterial);else{var G$a=G$j.texturePath;G$a&&G$y._addHierarchyInnerUrls(G$u,G$p,G$D,G$P,G$a,G$Gl)}}break;case"Terrain":G$y._addHierarchyInnerUrls(G$u,G$p,G$D,G$P,G$T.customProps.dataPath,TerrainRes)}var G$B=G$T.components;for(var G$s in G$B){var G$r=G$B[G$s];switch(G$s){case"Animator":var G$I=G$r.avatarPath;if(G$I)G$y._addHierarchyInnerUrls(G$u,G$p,G$D,G$P,G$I,Avatar);else{var G$Q=G$r.avatar;G$Q&&G$y._addHierarchyInnerUrls(G$u,G$p,G$D,G$P,G$Q.path,Avatar)}var G$o=G$r.clipPaths;for(G$J=0,G$q=G$o.length;G$J<G$q;G$J++)G$y._addHierarchyInnerUrls(G$u,G$p,G$D,G$P,G$o[G$J],AnimationClip)}}var G$e=G$T.child;for(G$J=0,G$q=G$e.length;G$J<G$q;G$J++)G$y._getSprite3DHierarchyInnerUrls(G$e[G$J],G$l,G$w,G$u,G$p,G$D,G$P)},G$y._loadHierarchy=function(G$T){G$T.on("loaded",null,G$y._onHierarchylhLoaded,[G$T,G$T._class._getGroup()]),G$T.load(G$T.url,"json",!1,null,!0)},G$y._onHierarchylhLoaded=function(G$T,G$l,G$w){if(G$T._class.destroyed)G$T.endLoad();else{var G$u=G$T.url,G$p=G$Al.getURLVerion(G$u),G$D=G$o.getPath(G$u),G$P=[],G$j=[],G$J=[],G$q={};G$y._getSprite3DHierarchyInnerUrls(G$w,G$P,G$j,G$J,G$q,G$p,G$D);var G$M=G$P.length+G$j.length+G$J.length,G$z=G$M+1,G$b=1/G$z;if(G$y._onProcessChange(G$T,0,G$b,1),0<G$J.length){var G$K=G$M/G$z,G$Y=G$Q.create(null,G$y._onProcessChange,[G$T,G$b,G$K],!1);G$y._innerFourthLevelLoaderManager.create(G$J,G$Q.create(null,G$y._onHierarchyInnerForthLevResouLoaded,[G$T,G$l,G$Y,G$w,G$q,G$P,G$j,G$b+G$K*G$J.length,G$K]),G$Y,null,null,1,!0,G$l)}else G$y._onHierarchyInnerForthLevResouLoaded(G$T,G$l,null,G$w,G$q,G$P,G$j,G$b,G$K)}},G$y._onHierarchyInnerForthLevResouLoaded=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){if(G$T._class.destroyed)G$T.endLoad();else if(G$w&&G$w.recover(),0<G$P.length){var G$q=G$Q.create(null,G$y._onProcessChange,[G$T,G$j,G$J],!1);G$y._innerSecondLevelLoaderManager.create(G$P,G$Q.create(null,G$y._onHierarchyInnerSecondLevResouLoaded,[G$T,G$l,G$q,G$u,G$p,G$D,G$j+G$J*G$P.length,G$J]),G$w,null,null,1,!0,G$l)}else G$y._onHierarchyInnerSecondLevResouLoaded(G$T,G$l,null,G$u,G$p,G$D,G$j,G$J)},G$y._onHierarchyInnerSecondLevResouLoaded=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j){if(G$T._class.destroyed)G$T.endLoad();else if(G$w&&G$w.recover(),0<G$D.length){var G$J=G$Q.create(null,G$y._onProcessChange,[G$T,G$P,G$j],!1);G$y._innerFirstLevelLoaderManager.create(G$D,G$Q.create(null,G$y._onHierarchyInnerFirstLevResouLoaded,[G$T,G$J,G$u,G$p]),G$w,null,null,1,!0,G$l)}else G$y._onHierarchyInnerFirstLevResouLoaded(G$T,null,G$u,G$p)},G$y._onHierarchyInnerFirstLevResouLoaded=function(G$T,G$l,G$w,G$u){G$l&&G$l.recover(),G$T.endLoad([G$w,G$u])},G$y._loadTerrain=function(G$T){G$T.on("loaded",null,G$y._onTerrainLtLoaded,[G$T,G$T._class._getGroup()]),G$T.load(G$T.url,"json",!1,null,!0)},G$y._onTerrainLtLoaded=function(G$T,G$l,G$w){if(G$T._class.destroyed)G$T.endLoad();else{var G$u,G$p,G$D=G$T.url,G$P=G$Al.getURLVerion(G$D),G$j=G$o.getPath(G$D),G$J=[],G$q={},G$M=0,G$z=0,G$b=G$w.heightData;G$u=G$b.url,G$p=G$y.formatRelativePath(G$j,G$u),G$P&&(G$p+=G$P),G$u=G$q[G$u]=G$p;var G$K=G$w.detailTexture;for(G$M=0,G$z=G$K.length;G$M<G$z;G$M++)G$J.push({url:G$K[G$M].diffuse});var G$Y=G$w.normalMap;for(G$M=0,G$z=G$Y.length;G$M<G$z;G$M++)G$J.push({url:G$Y[G$M]});var G$t=G$w.alphaMap;for(G$M=0,G$z=G$t.length;G$M<G$z;G$M++)G$J.push({url:G$t[G$M],params:[!1,!1,6408,!0]});for(G$M=0,G$z=G$J.length;G$M<G$z;G$M++){var G$A=G$J[G$M].url;G$p=G$y.formatRelativePath(G$j,G$A),G$P&&(G$p+=G$P),G$J[G$M].url=G$p,G$q[G$A]=G$p}var G$L=G$J.length,G$i=G$L+2,G$W=1/G$i;G$y._onProcessChange(G$T,0,G$W,1);var G$m={heightMapLoaded:!1,texturesLoaded:!1},G$c=G$Q.create(null,G$y._onProcessChange,[G$T,G$W,G$W],!1);G$y._innerFourthLevelLoaderManager.create(G$u,G$Q.create(null,G$y._onTerrainHeightMapLoaded,[G$T,G$c,G$w,G$q,G$m]),G$c,null,[G$b.numX,G$b.numZ,G$b.bitType,G$b.value],1,!0,G$l);var G$a=G$Q.create(null,G$y._onProcessChange,[G$T,2*G$W,G$L/G$i],!1);G$y._innerFourthLevelLoaderManager.create(G$J,G$Q.create(null,G$y._onTerrainTexturesLoaded,[G$T,G$a,G$w,G$q,G$m]),G$a,null,null,1,!0,G$l)}},G$y._onTerrainHeightMapLoaded=function(G$T,G$l,G$w,G$u,G$p){G$p.heightMapLoaded=!0,G$p.texturesLoaded&&(G$T.endLoad([G$w,G$u]),G$l.recover())},G$y._onTerrainTexturesLoaded=function(G$T,G$l,G$w,G$u,G$p){G$p.texturesLoaded=!0,G$p.heightMapLoaded&&(G$T.endLoad([G$w,G$u]),G$l.recover())},G$y._loadMesh=function(G$T){G$T.on("loaded",null,G$y._onMeshLmLoaded,[G$T,G$T._class._getGroup()]),G$T.load(G$T.url,"arraybuffer",!1,null,!0)},G$y._onMeshLmLoaded=function(G$T,G$l,G$w){if(G$T._class.destroyed)G$T.endLoad();else{var G$u,G$p,G$D,G$P=G$T.url,G$j=G$Al.getURLVerion(G$P),G$J=G$o.getPath(G$P),G$q={},G$M=0,G$z=0;switch((G$y._readData=new G$a(G$w)).pos=0,G$y._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var G$b=G$y._readData.getUint32();G$y._readData.pos=G$y._readData.pos+4,G$z=G$y._readData.getUint16(),G$y._readData.pos=G$y._readData.pos+8*G$z;var G$K=G$y._readData.getUint32();for(G$z=G$y._readData.getUint16(),G$y._readData.pos=G$b+G$K,G$u=[],G$M=0;G$M<G$z;G$M++){var G$Y=G$y._readData.readUTFString();-1!==G$Y.lastIndexOf(".lmat")&&G$u.push(G$Y)}break;default:for(G$y.READ_BLOCK(),G$M=0;G$M<2;G$M++){var G$t=G$y._readData.getUint16(),G$A=G$y._strings[G$t],G$L=G$y["READ_"+G$A];if(null==G$L)throw new Error("model file err,no this function:"+G$t+" "+G$A);1===G$M?G$u=G$L.call():G$L.call()}}for(G$M=0,G$D=G$u.length;G$M<G$D;G$M++){var G$i=G$u[G$M];G$p=G$y.formatRelativePath(G$J,G$i),G$j&&(G$p+=G$j),G$u[G$M]=G$p,G$q[G$i]=G$p}if(0<G$u.length){G$y._onProcessChange(G$T,0,.5,1);var G$W=G$Q.create(null,G$y._onProcessChange,[G$T,.5,.5],!1);G$y._innerSecondLevelLoaderManager.create(G$u,G$Q.create(null,G$y._onMeshMateialLoaded,[G$T,G$W,G$w,G$q]),G$W,null,null,1,!0,G$l)}else G$T.endLoad([G$w,G$q])}},G$y._onMeshMateialLoaded=function(G$T,G$l,G$w,G$u){G$T.endLoad([G$w,G$u]),G$l.recover()},G$y._getMaterialTexturePath=function(G$T,G$l,G$w){var G$u=G$T.length-4;return G$T.indexOf(".dds")!=G$u&&G$T.indexOf(".tga")!=G$u&&G$T.indexOf(".exr")!=G$u&&G$T.indexOf(".DDS")!=G$u&&G$T.indexOf(".TGA")!=G$u&&G$T.indexOf(".EXR")!=G$u||(G$T=G$T.substr(0,G$u)+".png"),G$T=G$y.formatRelativePath(G$w,G$T),G$l&&(G$T+=G$l),G$T},G$y._loadMaterial=function(G$T){G$T.on("loaded",null,G$y._onMaterilLmatLoaded,[G$T,G$T._class._getGroup()]),G$T.load(G$T.url,"json",!1,null,!0)},G$y._onMaterilLmatLoaded=function(G$T,G$l,G$w){if(G$T._class.destroyed)G$T.endLoad();else{var G$u,G$p=G$T.url,G$D=G$Al.getURLVerion(G$p),G$P=G$o.getPath(G$p),G$j=[],G$J={},G$q=G$w.customProps,G$M=G$w.version;if(G$M)switch(G$M){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var G$z=G$w.props.textures,G$b=0,G$K=G$z.length;G$b<G$K;G$b++){var G$Y=G$z[G$b],G$t=G$Y.path;if(G$t){var G$A=G$t.length-4;G$t.indexOf(".exr")!=G$A&&G$t.indexOf(".EXR")!=G$A||(G$t=G$t.substr(0,G$A)+".png"),G$u=G$y.formatRelativePath(G$P,G$t),G$D&&(G$u+=G$D),G$j.push({url:G$u,params:G$Y.params}),G$J[G$t]=G$u}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var G$L=G$q.diffuseTexture.texture2D;if(G$L&&(G$u=G$y._getMaterialTexturePath(G$L,G$D,G$P),G$j.push(G$u),G$J[G$L]=G$u),G$q.normalTexture){var G$i=G$q.normalTexture.texture2D;G$i&&(G$u=G$y._getMaterialTexturePath(G$i,G$D,G$P),G$j.push(G$u),G$J[G$i]=G$u)}if(G$q.specularTexture){var G$W=G$q.specularTexture.texture2D;G$W&&(G$u=G$y._getMaterialTexturePath(G$W,G$D,G$P),G$j.push(G$u),G$J[G$W]=G$u)}if(G$q.emissiveTexture){var G$m=G$q.emissiveTexture.texture2D;G$m&&(G$u=G$y._getMaterialTexturePath(G$m,G$D,G$P),G$j.push(G$u),G$J[G$m]=G$u)}if(G$q.ambientTexture){var G$c=G$q.ambientTexture.texture2D;G$c&&(G$u=G$y._getMaterialTexturePath(G$c,G$D,G$P),G$j.push(G$u),G$J[G$c]=G$u)}if(G$q.reflectTexture){var G$a=G$q.reflectTexture.texture2D;G$a&&(G$u=G$y._getMaterialTexturePath(G$a,G$D,G$P),G$j.push(G$u),G$J[G$a]=G$u)}}var G$B=G$j.length,G$s=G$B+1,G$r=1/G$s;if(G$y._onProcessChange(G$T,0,G$r,1),0<G$B){var G$I=G$Q.create(null,G$y._onProcessChange,[G$T,G$r,G$B/G$s],!1);G$y._innerFourthLevelLoaderManager.create(G$j,G$Q.create(null,G$y._onMateialTexturesLoaded,[G$T,G$I,G$w,G$J]),G$I,G$Gl,null,1,!0,G$l)}else G$y._onMateialTexturesLoaded(G$T,null,G$w,null)}},G$y._onMateialTexturesLoaded=function(G$T,G$l,G$w,G$u){G$T.endLoad([G$w,G$u]),G$l&&G$l.recover()},G$y._loadTextureCube=function(G$T){G$T.on("loaded",null,G$y._onTextureCubeLtcLoaded,[G$T]),G$T.load(G$T.url,"json",!1,null,!0)},G$y._onTextureCubeLtcLoaded=function(G$T,G$l){if(G$T._class.destroyed)G$T.endLoad();else{var G$w=G$o.getPath(G$T.url),G$u=[G$y.formatRelativePath(G$w,G$l.px),G$y.formatRelativePath(G$w,G$l.nx),G$y.formatRelativePath(G$w,G$l.py),G$y.formatRelativePath(G$w,G$l.ny),G$y.formatRelativePath(G$w,G$l.pz),G$y.formatRelativePath(G$w,G$l.nz)];G$y._onProcessChange(G$T,0,1/7,1);var G$p=G$Q.create(null,G$y._onProcessChange,[G$T,1/7,6/7],!1);G$y._innerFourthLevelLoaderManager.load(G$u,G$Q.create(null,G$y._onTextureCubeImagesLoaded,[G$T,G$u,G$p]),G$p,"nativeimage")}},G$y._onTextureCubeImagesLoaded=function(G$T,G$l,G$w){var G$u=[];G$u.length=6;for(var G$p=0;G$p<6;G$p++){var G$D=G$l[G$p];G$u[G$p]=G$L.getRes(G$D),G$L.clearRes(G$D)}G$T.endLoad(G$u),G$w.recover()},G$y._onProcessChange=function(G$T,G$l,G$w,G$u){(G$u=G$l+G$u*G$w)<1&&G$T.event("progress",G$u)},G$y.init=function(G$T,G$l,G$w,G$u,G$p,G$D){if(void 0===G$w&&(G$w=!1),void 0===G$u&&(G$u=!1),void 0===G$p&&(G$p=!0),void 0===G$D&&(G$D=!0),G$i.update3DLoop=function(){},G$i.cancelLoadByUrl=function(G$T){G$y._cancelLoadByUrl(G$T)},G$J.isAntialias=G$w,G$J.isAlpha=G$u,G$J.premultipliedAlpha=G$p,G$J.isStencil=G$D,!G$e.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");G$i.changeWebGLSize=G$y._changeWebGLSize,G$t.is3DMode=!0,G$c.init(G$T,G$l),G$x.__init__(),G$zl.__init__(),G$fl.__init__(),G$k.__init__(),G$y.__init__(),G$P.maxTextureCount=2,(G$y.debugMode||G$E.debugMode)&&(G$y._debugPhasorSprite=new G$h)},G$y.HIERARCHY="SPRITE3DHIERARCHY",G$y.MESH="MESH",G$y.MATERIAL="MATERIAL",G$y.PBRMATERIAL="PBRMTL",G$y.TEXTURECUBE="TEXTURECUBE",G$y.TERRAIN="TERRAIN",G$y._readData=null,G$y._debugPhasorSprite=null,G$y.debugMode=!1,G$z(G$y,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new G$l},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new G$l},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new G$l},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new G$l}]),G$y}(),G$il=function(G$T){function G$p(G$T){G$p.__super.call(this),this._owner=G$T,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}G$K(G$p,"laya.d3.animation.AnimationTransform3D",G$D);var G$l=G$p.prototype;return G$l._getlocalMatrix=function(){return this._localUpdate&&(G$Al._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},G$l._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var G$T=0,G$l=this._childs.length;G$T<G$l;G$T++)this._childs[G$T]._onWorldTransform()}},G$l._setWorldMatrixAndUpdate=function(G$T){if(this._worldMatrix=G$T,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var G$l=this._getlocalMatrix(),G$w=0;G$w<16;++G$w)this._worldMatrix[G$w]=G$l[G$w];else G$Al.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},G$l._setWorldMatrixNoUpdate=function(G$T){this._worldMatrix=G$T},G$l._setWorldMatrixIgnoreUpdate=function(G$T){this._worldMatrix=G$T,this._worldUpdate=!1},G$l.getLocalPosition=function(){return this._localPosition},G$l.setLocalPosition=function(G$T){if(this._parent)this._localPosition=G$T,this._localUpdate=!0,this._onWorldTransform();else{var G$l=this._entity.owner._transform,G$w=this._entity.localPosition,G$u=G$w.elements;G$u[0]=G$T[0],G$u[1]=G$T[1],G$u[2]=G$T[2],G$l.localPosition=G$w}},G$l.getLocalRotation=function(){if(this._localQuaternionUpdate){var G$T=this._localRotationEuler;G$Al._quaternionCreateFromYawPitchRollArray(G$T[1]/G$p._angleToRandin,G$T[0]/G$p._angleToRandin,G$T[2]/G$p._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},G$l.setLocalRotation=function(G$T){if(this._parent)this._localRotation=G$T,G$Al.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var G$l=this._entity.owner._transform,G$w=this._entity.localRotation,G$u=G$w.elements;G$u[0]=G$T[0],G$u[1]=G$T[1],G$u[2]=G$T[2],G$u[3]=G$T[3],G$l.localRotation=G$w}},G$l.getLocalScale=function(){return this._localScale},G$l.setLocalScale=function(G$T){if(this._parent)this._localScale=G$T,this._localUpdate=!0,this._onWorldTransform();else{var G$l=this._entity.owner._transform,G$w=this._entity.localScale,G$u=G$w.elements;G$u[0]=G$T[0],G$u[1]=G$T[1],G$u[2]=G$T[2],G$l.localScale=G$w}},G$l.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){G$Al.getYawPitchRoll(this._localRotation,G$p._tempVector3);var G$T=G$p._tempVector3,G$l=this._localRotationEuler;G$l[0]=G$T[1]*G$p._angleToRandin,G$l[1]=G$T[0]*G$p._angleToRandin,G$l[2]=G$T[2]*G$p._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},G$l.setLocalRotationEuler=function(G$T){if(this._parent)G$Al._quaternionCreateFromYawPitchRollArray(G$T[1]/G$p._angleToRandin,G$T[0]/G$p._angleToRandin,G$T[2]/G$p._angleToRandin,this._localRotation),this._localRotationEuler=G$T,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var G$l=this._entity.owner._transform,G$w=this._entity.localRotationEuler,G$u=G$w.elements;G$u[0]=G$T[0],G$u[1]=G$T[1],G$u[2]=G$T[2],G$l.localRotationEuler=G$w}},G$l.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)G$Al.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var G$T=this._getlocalMatrix(),G$l=0;G$l<16;++G$l)this._worldMatrix[G$l]=G$T[G$l];this._worldUpdate=!1}return this._worldMatrix},G$l.setParent=function(G$T){if(this._parent!==G$T){if(this._parent){var G$l=this._parent._childs,G$w=G$l.indexOf(this);G$l.splice(G$w,1)}G$T&&(G$T._childs.push(this),G$T&&this._onWorldTransform()),this._parent=G$T}},G$z(G$p,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),G$p}(),G$Wl=function(G$T){function G$l(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,G$l.__super.call(this),this._destroyed=!1,this._id=G$l._uniqueIDCounter,G$l._uniqueIDCounter++}G$K(G$l,"laya.d3.component.Component3D",G$D);var G$w=G$l.prototype;return G$c.imps(G$w,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),G$w._initialize=function(G$T){this._owner=G$T,this._enable=!0,this.started=!1,this._load(G$T)},G$w._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},G$w._load=function(G$T){},G$w._start=function(G$T){},G$w._update=function(G$T){},G$w._lateUpdate=function(G$T){},G$w._preRenderUpdate=function(G$T){},G$w._postRenderUpdate=function(G$T){},G$w._unload=function(G$T){this.offAll()},G$w._cloneTo=function(G$T){},G$Y(0,G$w,"id",function(){return this._id}),G$Y(0,G$w,"destroyed",function(){return this._destroyed}),G$Y(0,G$w,"owner",function(){return this._owner}),G$Y(0,G$w,"enable",function(){return this._enable},function(G$T){this._enable!==G$T&&(this._enable=G$T,this.event("enablechanged",this._enable))}),G$Y(0,G$w,"isSingleton",function(){return G$l._isSingleton}),G$l._isSingleton=!0,G$l._uniqueIDCounter=1,G$l}(),G$ml=function(G$T){function G$l(){this._destroyed=!1,G$l.__super.call(this),this._destroyed=!1}G$K(G$l,"laya.d3.core.GeometryFilter",G$D);var G$w=G$l.prototype;return G$c.imps(G$w,{"laya.resource.IDestroy":!0}),G$w._destroy=function(){this.offAll(),this._destroyed=!0},G$Y(0,G$w,"_isAsyncLoaded",function(){return!0}),G$Y(0,G$w,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),G$Y(0,G$w,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),G$Y(0,G$w,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),G$Y(0,G$w,"destroyed",function(){return this._destroyed}),G$l}(),G$cl=function(G$T){function G$u(G$T){G$u.__super.call(this),this._id=++G$u._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new G$ET(new G$Pl,new G$Pl),this._boundingBoxCenter=new G$Pl,this._boundingSphere=new G$CT(new G$Pl,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=G$T,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}G$K(G$u,"laya.d3.core.render.BaseRender",G$D);var G$l=G$u.prototype;return G$c.imps(G$l,{"laya.resource.IDestroy":!0}),G$l._changeMaterialReference=function(G$T,G$l){G$T&&G$T._removeReference(),G$l._addReference()},G$l._getInstanceMaterial=function(G$T,G$l){var G$w=new G$T.constructor;return G$T.cloneTo(G$w),G$w.name=G$w.name+"(Instance)",this._materialsInstance[G$l]=!0,this._changeMaterialReference(this._materials[G$l],G$w),this._materials[G$l]=G$w},G$l._setShaderValuelightMap=function(G$T){this._setShaderValueTexture(3,G$T)},G$l._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},G$l._renderRenderableBoundBox=function(){var G$T=G$Ll._debugPhasorSprite,G$l=this.boundingBox,G$w=G$u._tempBoundBoxCorners;G$l.getCorners(G$w),G$T.line(G$w[0],G$u._greenColor,G$w[1],G$u._greenColor),G$T.line(G$w[2],G$u._greenColor,G$w[3],G$u._greenColor),G$T.line(G$w[4],G$u._greenColor,G$w[5],G$u._greenColor),G$T.line(G$w[6],G$u._greenColor,G$w[7],G$u._greenColor),G$T.line(G$w[0],G$u._greenColor,G$w[3],G$u._greenColor),G$T.line(G$w[1],G$u._greenColor,G$w[2],G$u._greenColor),G$T.line(G$w[2],G$u._greenColor,G$w[6],G$u._greenColor),G$T.line(G$w[3],G$u._greenColor,G$w[7],G$u._greenColor),G$T.line(G$w[0],G$u._greenColor,G$w[4],G$u._greenColor),G$T.line(G$w[1],G$u._greenColor,G$w[5],G$u._greenColor),G$T.line(G$w[4],G$u._greenColor,G$w[7],G$u._greenColor),G$T.line(G$w[5],G$u._greenColor,G$w[6],G$u._greenColor)},G$l._calculateBoundingSphere=function(){throw"BaseRender: must override it."},G$l._calculateBoundingBox=function(){throw"BaseRender: must override it."},G$l._setShaderValueTexture=function(G$T,G$l){this._owner._shaderValues.setValue(G$T,G$l)},G$l._setShaderValueMatrix4x4=function(G$T,G$l){this._owner._shaderValues.setValue(G$T,G$l?G$l.elements:null)},G$l._setShaderValueColor=function(G$T,G$l){this._owner._shaderValues.setValue(G$T,G$l?G$l.elements:null)},G$l._setShaderValueBuffer=function(G$T,G$l){this._owner._shaderValues.setValue(G$T,G$l)},G$l._setShaderValueInt=function(G$T,G$l){this._owner._shaderValues.setValue(G$T,G$l)},G$l._setShaderValueBool=function(G$T,G$l){this._owner._shaderValues.setValue(G$T,G$l)},G$l._setShaderValueNumber=function(G$T,G$l){this._owner._shaderValues.setValue(G$T,G$l)},G$l._setShaderValueVector2=function(G$T,G$l){this._owner._shaderValues.setValue(G$T,G$l?G$l.elements:null)},G$l._addShaderDefine=function(G$T){this._owner._shaderDefineValue|=G$T},G$l._removeShaderDefine=function(G$T){this._owner._shaderDefineValue&=~G$T},G$l._renderUpdate=function(G$T){return!0},G$l._applyLightMapParams=function(){if(0<=this._lightmapIndex){var G$T=this._owner.scene;if(G$T){var G$l=G$T.getlightmaps()[this._lightmapIndex];G$l?(this._addShaderDefine(G$hl.SAHDERDEFINE_LIGHTMAP),G$l.loaded?this._setShaderValuelightMap(G$l):G$l.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(G$hl.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(G$hl.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(G$hl.SAHDERDEFINE_LIGHTMAP)},G$l._updateOctreeNode=function(){var G$T=this._treeNode;G$T&&this._octreeNodeNeedChange&&(G$T.updateObject(this),this._octreeNodeNeedChange=!1)},G$l._destroy=function(){this.offAll();var G$T=0,G$l=0;for(G$T=0,G$l=this._renderElements.length;G$T<G$l;G$T++)this._renderElements[G$T]._destroy();for(G$T=0,G$l=this._materials.length;G$T<G$l;G$T++)this._materials[G$T]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},G$Y(0,G$l,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),G$Y(0,G$l,"id",function(){return this._id}),G$Y(0,G$l,"material",function(){var G$T=this._materials[0];if(G$T&&!this._materialsInstance[0]){var G$l=this._getInstanceMaterial(G$T,0);this.event("materialchanged",[this,0,G$l])}return this._materials[0]},function(G$T){this.sharedMaterial=G$T}),G$Y(0,G$l,"sharedMaterial",function(){return this._materials[0]},function(G$T){var G$l=this._materials[0];G$l!==G$T&&(this._materials[0]=G$T,this._materialsInstance[0]=!1,this._changeMaterialReference(G$l,G$T),this.event("materialchanged",[this,0,G$T]))}),G$Y(0,G$l,"lightmapIndex",function(){return this._lightmapIndex},function(G$T){this._lightmapIndex=G$T,this._applyLightMapParams()}),G$Y(0,G$l,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(G$T){this._lightmapScaleOffset=G$T,this._setShaderValueColor(2,G$T),this._addShaderDefine(G$hl.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),G$Y(0,G$l,"enable",function(){return this._enable},function(G$T){this._enable=G$T,this.event("enablechanged",[this,G$T])}),G$Y(0,G$l,"materials",function(){for(var G$T=0,G$l=this._materials.length;G$T<G$l;G$T++)if(!this._materialsInstance[G$T]){var G$w=this._getInstanceMaterial(this._materials[G$T],G$T);this.event("materialchanged",[this,G$T,G$w])}return this._materials.slice()},function(G$T){this.sharedMaterials=G$T}),G$Y(0,G$l,"sharedMaterials",function(){return this._materials.slice()},function(G$T){if(!G$T)throw new Error("MeshRender: shadredMaterials value can't be null.");var G$l=G$T.length;this._materialsInstance.length=G$l;for(var G$w=0;G$w<G$l;G$w++){var G$u=this._materials[G$w];G$u!==G$T[G$w]&&(this._materialsInstance[G$w]=!1,this._changeMaterialReference(G$u,G$T[G$w]),this.event("materialchanged",[this,G$w,G$T[G$w]]))}this._materials=G$T}),G$Y(0,G$l,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),G$Y(0,G$l,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var G$T=this.boundingBox;G$Pl.add(G$T.min,G$T.max,this._boundingBoxCenter),G$Pl.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),G$Y(0,G$l,"receiveShadow",function(){return this._receiveShadow},function(G$T){this._receiveShadow!==G$T&&((this._receiveShadow=G$T)?this._addShaderDefine(G$Kl.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(G$Kl.SHADERDEFINE_RECEIVE_SHADOW))}),G$Y(0,G$l,"destroyed",function(){return this._destroyed}),G$u._uniqueIDCounter=0,G$z(G$u,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl,new G$Pl]},"_greenColor",function(){return this._greenColor=new G$jl(0,1,0,1)}]),G$u}(),G$al=function(G$T){function G$j(G$T){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,G$j.__super.call(this),this._localPosition=new G$Pl,this._localRotation=new G$wl(0,0,0,1),this._localScale=new G$Pl(1,1,1),this._localRotationEuler=new G$Pl,this._localMatrix=new G$Tl,this._position=new G$Pl,this._rotation=new G$wl(0,0,0,1),this._scale=new G$Pl(1,1,1),this._worldMatrix=new G$Tl,this._forward=new G$Pl,this._up=new G$Pl,this._right=new G$Pl,this._owner=G$T,this._childs=[]}G$K(G$j,"laya.d3.core.Transform3D",G$D);var G$l=G$j.prototype;return G$l._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)G$Tl.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var G$T=G$j._tempVector30;G$Pl.multiply(this.pivot,this._localScale,G$T);var G$l=G$j._tempVector31;G$Pl.subtract(G$T,this.pivot,G$l);var G$w=G$j._tempVector32,G$u=this.localRotation;G$Pl.transformQuat(G$T,G$u,G$w),G$Pl.subtract(G$w,G$T,G$w);var G$p=G$j._tempVector33;G$Pl.subtract(this._localPosition,G$l,G$p),G$Pl.subtract(G$p,G$w,G$p),G$Tl.createAffineTransformation(G$p,G$u,this._localScale,this._localMatrix)}},G$l._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var G$T=0,G$l=this._childs.length;G$T<G$l;G$T++)this._childs[G$T]._onWorldPositionRotationTransform()}},G$l._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var G$T=0,G$l=this._childs.length;G$T<G$l;G$T++)this._childs[G$T]._onWorldPositionScaleTransform()}},G$l._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var G$T=0,G$l=this._childs.length;G$T<G$l;G$T++)this._childs[G$T]._onWorldPositionTransform()}},G$l._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var G$T=0,G$l=this._childs.length;G$T<G$l;G$T++)this._childs[G$T]._onWorldPositionRotationTransform()}},G$l._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var G$T=0,G$l=this._childs.length;G$T<G$l;G$T++)this._childs[G$T]._onWorldPositionScaleTransform()}},G$l._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var G$T=0,G$l=this._childs.length;G$T<G$l;G$T++)this._childs[G$T]._onWorldTransform()}},G$l.translate=function(G$T,G$l){void 0===G$l&&(G$l=!0),G$l?(G$Tl.createFromQuaternion(this.localRotation,G$j._tempMatrix0),G$Pl.transformCoordinate(G$T,G$j._tempMatrix0,G$j._tempVector30),G$Pl.add(this.localPosition,G$j._tempVector30,this._localPosition),this.localPosition=this._localPosition):(G$Pl.add(this.position,G$T,this._position),this.position=this._position)},G$l.rotate=function(G$T,G$l,G$w){var G$u;void 0===G$l&&(G$l=!0),void 0===G$w&&(G$w=!0),G$u=G$w?G$T:(G$Pl.scale(G$T,Math.PI/180,G$j._tempVector30),G$j._tempVector30),G$wl.createFromYawPitchRoll(G$u.y,G$u.x,G$u.z,G$j._tempQuaternion0),G$l?(G$wl.multiply(this._localRotation,G$j._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(G$wl.multiply(G$j._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},G$l.lookAt=function(G$T,G$l,G$w){void 0===G$w&&(G$w=!1);var G$u,G$p=G$T.elements;if(G$w){if(G$u=this._localPosition.elements,Math.abs(G$u[0]-G$p[0])<G$ST.zeroTolerance&&Math.abs(G$u[1]-G$p[1])<G$ST.zeroTolerance&&Math.abs(G$u[2]-G$p[2])<G$ST.zeroTolerance)return;G$wl.lookAt(this._localPosition,G$T,G$l,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var G$D=this.position;if(G$u=G$D.elements,Math.abs(G$u[0]-G$p[0])<G$ST.zeroTolerance&&Math.abs(G$u[1]-G$p[1])<G$ST.zeroTolerance&&Math.abs(G$u[2]-G$p[2])<G$ST.zeroTolerance)return;G$wl.lookAt(G$D,G$T,G$l,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},G$Y(0,G$l,"_isFrontFaceInvert",function(){var G$T=this.scale,G$l=G$T.x<0;return G$T.y<0&&(G$l=!G$l),G$T.z<0&&(G$l=!G$l),G$l}),G$Y(0,G$l,"owner",function(){return this._owner}),G$Y(0,G$l,"localRotation",function(){if(this._localQuaternionUpdate){var G$T=this._localRotationEuler.elements;G$wl.createFromYawPitchRoll(G$T[1]/G$j._angleToRandin,G$T[0]/G$j._angleToRandin,G$T[2]/G$j._angleToRandin,this._localRotation)}return this._localRotation},function(G$T){this._localRotation=G$T,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),G$Y(0,G$l,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?G$Tl.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(G$T){null===this._parent?G$T.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),G$Tl.multiply(this._localMatrix,G$T,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=G$T,this._worldUpdate=!1}),G$Y(0,G$l,"worldNeedUpdate",function(){return this._worldUpdate}),G$Y(0,G$l,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(G$T){this._localMatrix=G$T,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),G$Y(0,G$l,"dummy",function(){return this._dummy},function(G$T){this._dummy!==G$T&&(this._dummy&&(this._dummy._entity=null),G$T&&(G$T._entity=this),this._dummy=G$T)}),G$Y(0,G$l,"localPosition",function(){return this._localPosition},function(G$T){this._localPosition=G$T,this._localUpdate=!0,this._onWorldPositionTransform()}),G$Y(0,G$l,"position",function(){if(this._positionUpdate){if(null!=this._parent){var G$T=this._parent.position;G$Pl.multiply(this._localPosition,this._parent.scale,G$j._tempVector30),G$Pl.transformQuat(G$j._tempVector30,this._parent.rotation,G$j._tempVector30),G$Pl.add(G$T,G$j._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(G$T){if(null!=this._parent){G$Pl.subtract(G$T,this._parent.position,this._localPosition);var G$l=this._parent.scale.elements,G$w=G$l[0],G$u=G$l[1],G$p=G$l[2];if(1!==G$w||1!==G$u||1!==G$p){var G$D=G$j._tempVector30,G$P=G$D.elements;G$P[0]=1/G$w,G$P[1]=1/G$u,G$P[2]=1/G$p,G$Pl.multiply(this._localPosition,G$D,this._localPosition)}this._parent.rotation.invert(G$j._tempQuaternion0),G$Pl.transformQuat(this._localPosition,G$j._tempQuaternion0,this._localPosition)}else G$T.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=G$T,this._positionUpdate=!1}),G$Y(0,G$l,"localScale",function(){return this._localScale},function(G$T){this._localScale=G$T,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),G$Y(0,G$l,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(G$j._tempVector30);var G$T=G$j._tempVector30.elements,G$l=this._localRotationEuler.elements;G$l[0]=G$T[1]*G$j._angleToRandin,G$l[1]=G$T[0]*G$j._angleToRandin,G$l[2]=G$T[2]*G$j._angleToRandin}return this._localRotationEuler},function(G$T){this._localRotationEuler=G$T,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),G$Y(0,G$l,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?G$wl.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(G$T){null!=this._parent?(this._parent.rotation.invert(G$j._tempQuaternion0),G$wl.multiply(G$T,G$j._tempQuaternion0,this._localRotation)):G$T.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=G$T,this._rotationUpdate=!1}),G$Y(0,G$l,"scale",function(){return this._scaleUpdate&&(null!==this._parent?G$Pl.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(G$T){if(null!==this._parent){var G$l=this._parent.scale.elements,G$w=G$j._tempVector30.elements;G$w[0]=1/G$l[0],G$w[1]=1/G$l[1],G$w[2]=1/G$l[2],G$Pl.multiply(G$T,G$j._tempVector30,this._localScale)}else G$T.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=G$T,this._scaleUpdate=!1}),G$Y(0,G$l,"rotationEuler",null,function(G$T){G$wl.createFromYawPitchRoll(G$T.y,G$T.x,G$T.z,this._rotation),this.rotation=this._rotation}),G$Y(0,G$l,"forward",function(){var G$T=this.worldMatrix.elements;return this._forward.elements[0]=-G$T[8],this._forward.elements[1]=-G$T[9],this._forward.elements[2]=-G$T[10],this._forward}),G$Y(0,G$l,"up",function(){var G$T=this.worldMatrix.elements;return this._up.elements[0]=G$T[4],this._up.elements[1]=G$T[5],this._up.elements[2]=G$T[6],this._up}),G$Y(0,G$l,"right",function(){var G$T=this.worldMatrix.elements;return this._right.elements[0]=G$T[0],this._right.elements[1]=G$T[1],this._right.elements[2]=G$T[2],this._right}),G$Y(0,G$l,"parent",function(){return this._parent},function(G$T){if(this._parent!==G$T){if(this._parent){var G$l=this._parent._childs,G$w=G$l.indexOf(this);G$l.splice(G$w,1)}G$T&&(G$T._childs.push(this),G$T&&this._onWorldTransform()),this._parent=G$T}}),G$z(G$j,["_tempVector30",function(){return this._tempVector30=new G$Pl},"_tempVector31",function(){return this._tempVector31=new G$Pl},"_tempVector32",function(){return this._tempVector32=new G$Pl},"_tempVector33",function(){return this._tempVector33=new G$Pl},"_tempQuaternion0",function(){return this._tempQuaternion0=new G$wl},"_tempMatrix0",function(){return this._tempMatrix0=new G$Tl},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),G$j}(),G$Bl=(function(G$T){function G$l(){this._rotation=0,this._matNeedUpdte=!1,G$l.__super.call(this),this._matrix=new G$Tl,this._offset=new G$Dl,this._tiling=new G$Dl(1,1)}G$K(G$l,"laya.d3.core.TransformUV",G$D);var G$w=G$l.prototype;G$c.imps(G$w,{"laya.d3.core.IClone":!0}),G$w._updateMatrix=function(){G$l._tempOffsetV3.elements[0]=this._offset.x,G$l._tempOffsetV3.elements[1]=this._offset.y,G$wl.createFromYawPitchRoll(0,0,this._rotation,G$l._tempRotationQua),G$l._tempTitlingV3.elements[0]=this._tiling.x,G$l._tempTitlingV3.elements[1]=this._tiling.y,G$Tl.createAffineTransformation(G$l._tempOffsetV3,G$l._tempRotationQua,G$l._tempTitlingV3,this._matrix)},G$w.cloneTo=function(G$T){G$T._matrix=this._matrix.clone(),G$T._offset=this._offset.clone(),G$T._rotation=this._rotation,G$T._tiling=this._tiling.clone()},G$w.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$w,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),G$Y(0,G$w,"tiling",function(){return this._tiling},function(G$T){this._tiling=G$T,this._matNeedUpdte=!0}),G$Y(0,G$w,"offset",function(){return this._offset},function(G$T){this._offset=G$T,this._matNeedUpdte=!0}),G$Y(0,G$w,"rotation",function(){return this._rotation},function(G$T){this._rotation=G$T,this._matNeedUpdte=!0}),G$z(G$l,["_tempOffsetV3",function(){return this._tempOffsetV3=new G$Pl(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new G$wl},"_tempTitlingV3",function(){return this._tempTitlingV3=new G$Pl(1,1,1)}])}(),function(G$w){function G$T(){this.x=NaN,this.y=NaN,this.z=NaN,G$T.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}G$K(G$T,"laya.d3.core.particleShuriKen.module.shape.BoxShape",G$w);var G$l=G$T.prototype;G$l._getShapeBoundBox=function(G$T){var G$l=G$T.min.elements;G$l[0]=.5*-this.x,G$l[1]=.5*-this.y,G$l[2]=.5*-this.z;var G$w=G$T.max.elements;G$w[0]=.5*this.x,G$w[1]=.5*this.y,G$w[2]=.5*this.z},G$l._getSpeedBoundBox=function(G$T){var G$l=G$T.min.elements;G$l[0]=0,G$l[1]=0,G$l[2]=0;var G$w=G$T.max.elements;G$w[0]=0,G$w[1]=1,G$w[2]=0},G$l.generatePositionAndDirection=function(G$T,G$l,G$w,G$u){var G$p=G$T.elements,G$D=G$l.elements;G$w?(G$w.seed=G$u[16],G$G._randomPointInsideHalfUnitBox(G$T,G$w),G$u[16]=G$w.seed):G$G._randomPointInsideHalfUnitBox(G$T),G$p[0]=this.x*G$p[0],G$p[1]=this.y*G$p[1],G$p[2]=this.z*G$p[2],this.randomDirection?G$w?(G$w.seed=G$u[17],G$G._randomPointUnitSphere(G$l,G$w),G$u[17]=G$w.seed):G$G._randomPointUnitSphere(G$l):(G$D[0]=0,G$D[1]=0,G$D[2]=1)},G$l.cloneTo=function(G$T){G$w.prototype.cloneTo.call(this,G$T);var G$l=G$T;G$l.x=this.x,G$l.y=this.y,G$l.z=this.z,G$l.randomDirection=this.randomDirection}}(G$H),function(G$w){function G$P(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,G$P.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}G$K(G$P,"laya.d3.core.particleShuriKen.module.shape.CircleShape",G$w);var G$T=G$P.prototype;G$T._getShapeBoundBox=function(G$T){var G$l=G$T.min.elements;G$l[0]=G$l[2]=-this.radius,G$l[1]=0;var G$w=G$T.max.elements;G$w[0]=G$w[2]=this.radius,G$w[1]=0},G$T._getSpeedBoundBox=function(G$T){var G$l=G$T.min.elements;G$l[0]=G$l[1]=-1,G$l[2]=0;var G$w=G$T.max.elements;G$w[0]=G$w[1]=1,G$w[2]=0},G$T.generatePositionAndDirection=function(G$T,G$l,G$w,G$u){var G$p=G$T.elements,G$D=G$P._tempPositionPoint.elements;G$w?(G$w.seed=G$u[16],this.emitFromEdge?G$G._randomPointUnitArcCircle(this.arc,G$P._tempPositionPoint,G$w):G$G._randomPointInsideUnitArcCircle(this.arc,G$P._tempPositionPoint,G$w),G$u[16]=G$w.seed):this.emitFromEdge?G$G._randomPointUnitArcCircle(this.arc,G$P._tempPositionPoint):G$G._randomPointInsideUnitArcCircle(this.arc,G$P._tempPositionPoint),G$p[0]=-G$D[0],G$p[1]=G$D[1],G$p[2]=0,G$Pl.scale(G$T,this.radius,G$T),this.randomDirection?G$w?(G$w.seed=G$u[17],G$G._randomPointUnitSphere(G$l,G$w),G$u[17]=G$w.seed):G$G._randomPointUnitSphere(G$l):G$T.cloneTo(G$l)},G$T.cloneTo=function(G$T){G$w.prototype.cloneTo.call(this,G$T);var G$l=G$T;G$l.radius=this.radius,G$l.arc=this.arc,G$l.emitFromEdge=this.emitFromEdge,G$l.randomDirection=this.randomDirection},G$z(G$P,["_tempPositionPoint",function(){return this._tempPositionPoint=new G$Dl}])}(G$H),function(G$w){function G$b(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,G$b.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}G$K(G$b,"laya.d3.core.particleShuriKen.module.shape.ConeShape",G$w);var G$T=G$b.prototype;G$T._getShapeBoundBox=function(G$T){var G$l=this.radius+this.length*Math.sin(this.angle),G$w=this.length*Math.cos(this.angle),G$u=G$T.min.elements;G$u[0]=G$u[1]=-G$l,G$u[2]=0;var G$p=G$T.max.elements;G$p[0]=G$p[1]=G$l,G$p[2]=G$w},G$T._getSpeedBoundBox=function(G$T){var G$l=Math.sin(this.angle),G$w=G$T.min.elements;G$w[0]=G$w[1]=-G$l,G$w[2]=0;var G$u=G$T.max.elements;G$u[0]=G$w[1]=G$l,G$u[2]=1},G$T.generatePositionAndDirection=function(G$T,G$l,G$w,G$u){var G$p,G$D=G$T.elements,G$P=G$l.elements,G$j=G$b._tempPositionPoint.elements,G$J=NaN,G$q=NaN,G$M=Math.cos(this.angle),G$z=Math.sin(this.angle);switch(this.emitType){case 0:G$w?(G$w.seed=G$u[16],G$G._randomPointInsideUnitCircle(G$b._tempPositionPoint,G$w),G$u[16]=G$w.seed):G$G._randomPointInsideUnitCircle(G$b._tempPositionPoint),G$J=G$j[0],G$q=G$j[1],G$D[0]=G$J*this.radius,G$D[1]=G$q*this.radius,G$D[2]=0,this.randomDirection?(G$w?(G$w.seed=G$u[17],G$G._randomPointInsideUnitCircle(G$b._tempDirectionPoint,G$w),G$u[17]=G$w.seed):G$G._randomPointInsideUnitCircle(G$b._tempDirectionPoint),G$p=G$b._tempDirectionPoint.elements,G$P[0]=G$p[0]*G$z,G$P[1]=G$p[1]*G$z):(G$P[0]=G$J*G$z,G$P[1]=G$q*G$z),G$P[2]=G$M;break;case 1:G$w?(G$w.seed=G$u[16],G$G._randomPointUnitCircle(G$b._tempPositionPoint,G$w),G$u[16]=G$w.seed):G$G._randomPointUnitCircle(G$b._tempPositionPoint),G$J=G$j[0],G$q=G$j[1],G$D[0]=G$J*this.radius,G$D[1]=G$q*this.radius,G$D[2]=0,this.randomDirection?(G$w?(G$w.seed=G$u[17],G$G._randomPointInsideUnitCircle(G$b._tempDirectionPoint,G$w),G$u[17]=G$w.seed):G$G._randomPointInsideUnitCircle(G$b._tempDirectionPoint),G$p=G$b._tempDirectionPoint.elements,G$P[0]=G$p[0]*G$z,G$P[1]=G$p[1]*G$z):(G$P[0]=G$J*G$z,G$P[1]=G$q*G$z),G$P[2]=G$M;break;case 2:G$w?(G$w.seed=G$u[16],G$G._randomPointInsideUnitCircle(G$b._tempPositionPoint,G$w)):G$G._randomPointInsideUnitCircle(G$b._tempPositionPoint),G$J=G$j[0],G$q=G$j[1],G$D[0]=G$J*this.radius,G$D[1]=G$q*this.radius,G$P[G$D[2]=0]=G$J*G$z,G$P[1]=G$q*G$z,G$P[2]=G$M,G$Pl.normalize(G$l,G$l),G$w?(G$Pl.scale(G$l,this.length*G$w.getFloat(),G$l),G$u[16]=G$w.seed):G$Pl.scale(G$l,this.length*Math.random(),G$l),G$Pl.add(G$T,G$l,G$T),this.randomDirection&&(G$w?(G$w.seed=G$u[17],G$G._randomPointUnitSphere(G$l,G$w),G$u[17]=G$w.seed):G$G._randomPointUnitSphere(G$l));break;case 3:G$w?(G$w.seed=G$u[16],G$G._randomPointUnitCircle(G$b._tempPositionPoint,G$w)):G$G._randomPointUnitCircle(G$b._tempPositionPoint),G$J=G$j[0],G$q=G$j[1],G$D[0]=G$J*this.radius,G$D[1]=G$q*this.radius,G$P[G$D[2]=0]=G$J*G$z,G$P[1]=G$q*G$z,G$P[2]=G$M,G$Pl.normalize(G$l,G$l),G$w?(G$Pl.scale(G$l,this.length*G$w.getFloat(),G$l),G$u[16]=G$w.seed):G$Pl.scale(G$l,this.length*Math.random(),G$l),G$Pl.add(G$T,G$l,G$T),this.randomDirection&&(G$w?(G$w.seed=G$u[17],G$G._randomPointUnitSphere(G$l,G$w),G$u[17]=G$w.seed):G$G._randomPointUnitSphere(G$l));break;default:throw new Error("ConeShape:emitType is invalid.")}},G$T.cloneTo=function(G$T){G$w.prototype.cloneTo.call(this,G$T);var G$l=G$T;G$l.angle=this.angle,G$l.radius=this.radius,G$l.length=this.length,G$l.emitType=this.emitType,G$l.randomDirection=this.randomDirection},G$z(G$b,["_tempPositionPoint",function(){return this._tempPositionPoint=new G$Dl},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new G$Dl}])}(G$H),function(G$w){function G$T(){this.radius=NaN,this.emitFromShell=!1,G$T.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}G$K(G$T,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",G$w);var G$l=G$T.prototype;G$l._getShapeBoundBox=function(G$T){var G$l=G$T.min.elements;G$l[0]=G$l[1]=G$l[2]=-this.radius;var G$w=G$T.max.elements;G$w[0]=G$w[1]=this.radius,G$w[2]=0},G$l._getSpeedBoundBox=function(G$T){var G$l=G$T.min.elements;G$l[0]=G$l[1]=-1,G$l[2]=0;var G$w=G$T.max.elements;G$w[0]=G$w[1]=G$w[2]=1},G$l.generatePositionAndDirection=function(G$T,G$l,G$w,G$u){var G$p=G$T.elements;G$w?(G$w.seed=G$u[16],this.emitFromShell?G$G._randomPointUnitSphere(G$T,G$w):G$G._randomPointInsideUnitSphere(G$T,G$w),G$u[16]=G$w.seed):this.emitFromShell?G$G._randomPointUnitSphere(G$T):G$G._randomPointInsideUnitSphere(G$T),G$Pl.scale(G$T,this.radius,G$T);var G$D=G$p[2];G$D<0&&(G$p[2]=-1*G$D),this.randomDirection?G$w?(G$w.seed=G$u[17],G$G._randomPointUnitSphere(G$l,G$w),G$u[17]=G$w.seed):G$G._randomPointUnitSphere(G$l):G$T.cloneTo(G$l)},G$l.cloneTo=function(G$T){G$w.prototype.cloneTo.call(this,G$T);var G$l=G$T;G$l.radius=this.radius,G$l.emitFromShell=this.emitFromShell,G$l.randomDirection=this.randomDirection}}(G$H),function(G$w){function G$T(){this.radius=NaN,this.emitFromShell=!1,G$T.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}G$K(G$T,"laya.d3.core.particleShuriKen.module.shape.SphereShape",G$w);var G$l=G$T.prototype;G$l._getShapeBoundBox=function(G$T){var G$l=G$T.min.elements;G$l[0]=G$l[1]=G$l[2]=-this.radius;var G$w=G$T.max.elements;G$w[0]=G$w[1]=G$w[2]=this.radius},G$l._getSpeedBoundBox=function(G$T){var G$l=G$T.min.elements;G$l[0]=G$l[1]=G$l[2]=-1;var G$w=G$T.max.elements;G$w[0]=G$w[1]=G$w[2]=1},G$l.generatePositionAndDirection=function(G$T,G$l,G$w,G$u){G$w?(G$w.seed=G$u[16],this.emitFromShell?G$G._randomPointUnitSphere(G$T,G$w):G$G._randomPointInsideUnitSphere(G$T,G$w),G$u[16]=G$w.seed):this.emitFromShell?G$G._randomPointUnitSphere(G$T):G$G._randomPointInsideUnitSphere(G$T),G$Pl.scale(G$T,this.radius,G$T),this.randomDirection?G$w?(G$w.seed=G$u[17],G$G._randomPointUnitSphere(G$l,G$w),G$u[17]=G$w.seed):G$G._randomPointUnitSphere(G$l):G$T.cloneTo(G$l)},G$l.cloneTo=function(G$T){G$w.prototype.cloneTo.call(this,G$T);var G$l=G$T;G$l.radius=this.radius,G$l.emitFromShell=this.emitFromShell,G$l.randomDirection=this.randomDirection}}(G$H),function(G$T){function G$l(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,G$l.__super.call(this)}return G$K(G$l,"laya.d3.core.render.SubMeshRenderElement",G$g),G$l}()),G$sl=function(G$T){function G$A(G$T,G$l,G$w,G$u,G$p,G$D){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=G$T,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[G$Kl.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[G$hl.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[G$hl.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[G$ol.SHADERDEFINE_ALPHATEST]="ALPHATEST";G$A.__super.call(this,G$T,G$l,G$w,null,{}),this._attributeMap=G$u;var G$P;for(G$P in G$p){var G$j=G$p[G$P];switch(G$j[1]){case 0:this._renderElementUniformMap[G$P]=G$j[0];break;case 1:this._materialUniformMap[G$P]=G$j[0];break;case 2:this._spriteUniformMap[G$P]=G$j[0];break;case 3:this._cameraUniformMap[G$P]=G$j[0];break;case 4:this._sceneUniformMap[G$P]=G$j[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}G$K(G$A,"laya.d3.shader.ShaderCompile3D",G$W);var G$l=G$A.prototype;return G$l._definesToNameDic=function(G$T,G$l){for(var G$w={},G$u=1,G$p=0;G$p<32&&!(G$T<(G$u=1<<G$p));G$p++)if(G$T&G$u){var G$D=G$l[G$u];G$D&&(G$w[G$D]="")}return G$w},G$l.withCompile=function(G$T,G$l,G$w,G$u){var G$p,G$D,G$P;if(G$D=this.sharders[G$T])if(G$P=G$D[G$l]){if(G$p=G$P[G$w])return G$p}else G$P=G$D[G$l]=[];else G$P=(G$D=this.sharders[G$T]=[])[G$l]=[];var G$j,G$J=this._definesToNameDic(G$T,G$A._globalInt2name),G$q=this._definesToNameDic(G$l,this._spriteInt2name),G$M=this._definesToNameDic(G$w,this._materialInt2name),G$z={},G$b="";if(G$J)for(G$j in G$J)G$b+="#define "+G$j+"\n",G$z[G$j]=!0;if(G$q)for(G$j in G$q)G$b+="#define "+G$j+"\n",G$z[G$j]=!0;if(G$M)for(G$j in G$M)G$b+="#define "+G$j+"\n",G$z[G$j]=!0;var G$K=G$Ol.nameKey.getName(this._name)+" compile ("+G$T+","+G$l+","+G$w+")",G$Y=this._VS.toscript(G$z,[]),G$t=this._PS.toscript(G$z,[]);G$v.now();if(G$p=G$Ol.create(G$b+G$Y.join("\n"),G$b+G$t.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,G$u,G$K),G$P[G$w]=G$p,laya.d3.shader.ShaderCompile3D.debugMode)G$v.now();return G$p},G$l.precompileShaderWithShaderDefine=function(G$T,G$l,G$w){this.withCompile(G$T,G$l,G$w,!0)},G$l.addMaterialDefines=function(G$T){var G$l=G$T.defines;for(var G$w in G$l){var G$u=G$l[G$w],G$p=parseInt(G$w);this._materialInt2name[G$p]=G$u,this._materialName2Int[G$u]=G$p}},G$l.addSpriteDefines=function(G$T){var G$l=G$T.defines;for(var G$w in G$l){var G$u=G$l[G$w],G$p=parseInt(G$w);this._spriteInt2name[G$p]=G$u,this._spriteName2Int[G$u]=G$p}},G$l.getMaterialDefineByName=function(G$T){return this._materialName2Int[G$T]},G$l.registerMaterialDefine=function(G$T){var G$l=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[G$l]=G$T,this._materialName2Int[G$T]=G$l},G$l.registerSpriteDefine=function(G$T){var G$l=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[G$l]=G$T,this._spriteName2Int[G$T]=G$l},G$A._globalRegDefine=function(G$T,G$l){G$A._globalInt2name[G$l]=G$T},G$A.add=function(G$T,G$l,G$w,G$u,G$p){return laya.d3.shader.ShaderCompile3D._preCompileShader[G$T]=new G$A(G$T,G$l,G$w,G$u,G$p,G$W.includes)},G$A.get=function(G$T){return laya.d3.shader.ShaderCompile3D._preCompileShader[G$Ol.nameKey.getID(G$T)]},G$A._preCompileShader={},G$A._globalInt2name=[],G$A.debugMode=!1,G$A.SHADERDEFINE_HIGHPRECISION=1,G$A.SHADERDEFINE_FOG=4,G$A.SHADERDEFINE_DIRECTIONLIGHT=8,G$A.SHADERDEFINE_POINTLIGHT=16,G$A.SHADERDEFINE_SPOTLIGHT=32,G$A.SHADERDEFINE_UV0=64,G$A.SHADERDEFINE_COLOR=128,G$A.SHADERDEFINE_UV1=256,G$A.SAHDERDEFINE_DEPTHFOG=131072,G$A}(),G$rl=function(G$T){function G$Y(){G$Y.__super.call(this)}G$K(G$Y,"laya.d3.graphics.MeshSprite3DStaticBatchManager",G$uT);var G$l=G$Y.prototype;return G$l._getStaticBatch=function(G$T,G$l,G$w,G$u){var G$p,G$D;return G$D=G$T?G$T.id.toString()+G$w.id.toString()+G$l.id.toString()+G$u.toString():G$w.id.toString()+G$l.id.toString()+G$u.toString(),this._staticBatches[G$D]?G$p=this._staticBatches[G$D]:this._staticBatches[G$D]=G$p=new G$Il(G$D,this,G$T,G$l,G$w),G$p},G$l._initStaticBatchs=function(G$T){var G$l,G$w;this._initBatchRenderElements.sort(G$Y._sortPrepareStaticBatch);for(var G$u,G$p=!1,G$D=0,G$P=0,G$j=this._initBatchRenderElements.length;G$P<G$j;G$P++){var G$J,G$q=this._initBatchRenderElements[G$P],G$M=G$q.renderObj._getVertexBuffer(0);G$q._sprite3D;if(G$w===G$M.vertexDeclaration&&G$l===G$q._material)if(G$p)G$u._addCombineBatchRenderObjTest(G$q)?(G$J=G$q._staticBatch)!==G$u&&(G$J&&G$J._deleteCombineBatchRenderObj(G$q),G$u._addCombineBatchRenderObj(G$q)):(G$p=!1,G$D++);else{var G$z=this._initBatchRenderElements[G$P-1],G$b=G$z.renderObj,G$K=G$q.renderObj;G$p=!(65535<G$b._getVertexBuffer().vertexCount+G$K._getVertexBuffer().vertexCount)&&(G$u=this._getStaticBatch(G$T,G$w,G$l,G$D),(G$J=G$z._staticBatch)!==G$u&&(G$J&&G$J._deleteCombineBatchRenderObj(G$z),G$u._addCombineBatchRenderObj(G$z)),(G$J=G$q._staticBatch)!==G$u&&(G$J&&G$J._deleteCombineBatchRenderObj(G$q),G$u._addCombineBatchRenderObj(G$q)),!0)}else G$p=!1,G$D=0;G$l=G$q._material,G$w=G$M.vertexDeclaration}},G$Y._sortPrepareStaticBatch=function(G$T,G$l){var G$w=G$T._render,G$u=G$l._render,G$p=G$w.lightmapIndex-G$u.lightmapIndex;if(0!=G$p)return G$p;var G$D=G$w.receiveShadow-G$u.receiveShadow;if(0!=G$D)return G$D;var G$P=G$T._mainSortID-G$l._mainSortID;return 0==G$P?G$T.renderObj.triangleCount-G$l.renderObj.triangleCount:G$P},G$Y}(),G$Il=function(G$T){function G$D(G$T,G$l,G$w,G$u,G$p){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,G$D.__super.call(this,G$T,G$l,G$w),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=G$u,this._material=G$p}G$K(G$D,"laya.d3.graphics.SubMeshStaticBatch",G$pT);var G$l=G$D.prototype;return G$l._compareBatchRenderElement=function(G$T,G$l){return G$T._batchIndexStart>G$l._batchIndexStart},G$l._addCombineBatchRenderObjTest=function(G$T){var G$l=G$T.renderObj._vertexCount;return!(65535<(0<G$l?this._currentCombineVertexCount+G$l:this._currentCombineVertexCount+G$T.renderObj._getVertexBuffer().vertexCount))},G$l._addCombineBatchRenderObj=function(G$T){var G$l=G$T.renderObj,G$w=G$l._vertexCount;this._initBatchRenderElements.push(G$T),G$T._staticBatch=this,0<G$w?(this._currentCombineIndexCount+=G$l._indexCount,this._currentCombineVertexCount+=G$w):(this._currentCombineIndexCount=this._currentCombineIndexCount+G$l._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+G$l._getVertexBuffer().vertexCount),this._needFinishCombine=!0},G$l._deleteCombineBatchRenderObj=function(G$T){var G$l=G$T.renderObj,G$w=this._initBatchRenderElements.indexOf(G$T);if(-1!==G$w){this._initBatchRenderElements.splice(G$w,1),G$T._staticBatch=null;var G$u=G$l._vertexCount;0<G$u?(this._currentCombineIndexCount=this._currentCombineIndexCount-G$l._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-G$u):(this._currentCombineIndexCount=this._currentCombineIndexCount-G$l._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-G$l._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},G$l._finishInit=function(){if(this._needFinishCombine){var G$T=0,G$l=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var G$w=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),G$u=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=G$Hl.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=G$Zl.create("ushort",this._currentCombineIndexCount,35044);for(var G$p=0,G$D=this._initBatchRenderElements.length;G$p<G$D;G$p++){var G$P=this._initBatchRenderElements[G$p],G$j=G$P.renderObj,G$J=G$j._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,G$P._sprite3D),G$q=G$j.getIndices(),G$M=G$P._sprite3D.transform._isFrontFaceInvert,G$z=G$T/(this._vertexDeclaration.vertexStride/4)-G$j._vertexStart,G$b=G$l,G$K=G$b+G$q.length;G$P._batchIndexStart=G$b,G$P._batchIndexEnd=G$K,G$u.set(G$q,G$l);var G$Y=0;if(G$M)for(G$Y=G$b;G$Y<G$K;G$Y+=3){G$u[G$Y]=G$z+G$u[G$Y];var G$t=G$u[G$Y+1],G$A=G$u[G$Y+2];G$u[G$Y+1]=G$z+G$A,G$u[G$Y+2]=G$z+G$t}else for(G$Y=G$b;G$Y<G$K;G$Y+=3)G$u[G$Y]=G$z+G$u[G$Y],G$u[G$Y+1]=G$z+G$u[G$Y+1],G$u[G$Y+2]=G$z+G$u[G$Y+2];G$l+=G$q.length,G$w.set(G$J,G$T),G$T+=G$J.length}this._vertexBuffer.setData(G$w),this._indexBuffer.setData(G$u),this._needFinishCombine=!1}},G$l._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new G$Bl)},G$l._getRenderElement=function(G$T,G$l,G$w){for(var G$u,G$p,G$D=this._batchRenderElements.length,G$P=!0,G$j=0;G$j<G$D;G$j++){var G$J,G$q,G$M=(G$p=this._batchRenderElements[G$j])._sprite3D._render;if(0!==G$j&&(G$P=(G$J=(G$u=this._batchRenderElements[G$j-1])._sprite3D._render).lightmapIndex!==G$M.lightmapIndex||G$J.receiveShadow!==G$M.receiveShadow||G$u._batchIndexEnd!==G$p._batchIndexStart),G$P){(G$q=this._getCombineRenderElementFromPool()).renderObj=this,G$q._material=this._material,G$q._batchIndexStart=G$p._batchIndexStart,G$q._batchIndexEnd=G$p._batchIndexEnd;var G$z=G$M.lightmapIndex,G$b=G$z+1,G$K=this._batchOwnerIndices[G$b];G$K||(G$K=this._batchOwnerIndices[G$b]=[]);var G$Y,G$t=G$K[G$p._render.receiveShadow?1:0];void 0===G$t?(G$K[G$M.receiveShadow?1:0]=this._batchOwners.length,(G$Y=new G$fl(null,"StaticBatchMeshSprite3D"))._scene=G$l,G$Y._transform=this._rootOwner?this._rootOwner._transform:null,G$Y._render.lightmapIndex=G$z,G$Y._render.receiveShadow=G$p._render.receiveShadow,this._batchOwners.push(G$Y)):G$Y=this._batchOwners[G$t],G$Y._render._renderUpdate(G$w),G$q._sprite3D=G$Y,G$T.push(G$q)}else G$q._batchIndexEnd=G$p._batchIndexEnd}},G$l._beforeRender=function(G$T){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},G$l._render=function(G$T){var G$l=G$T.renderElement,G$w=G$l._batchIndexStart,G$u=G$l._batchIndexEnd-G$w;G$e.mainContext.drawElements(4,G$u,5123,2*G$w),G$s.drawCall++,G$s.trianglesFaces+=G$u/3},G$l.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},G$l._getVertexBuffer=function(G$T){return void 0===G$T&&(G$T=0),this._vertexBuffer},G$D}(),G$Ql=function(G$T){function G$l(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,G$l.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}G$K(G$l,"laya.d3.core.ComponentNode",G$q);var G$w=G$l.prototype;return G$w.addComponent=function(G$T){var G$l,G$w=this._componentsMap.indexOf(G$T);if(-1===G$w)G$l=[],this._componentsMap.push(G$T),this._typeComponentsIndices.push(G$l);else if(G$l=this._typeComponentsIndices[G$w],this._components[G$l[0]].isSingleton)throw new Error("无法单实例创建"+G$T+"组件，"+G$T+"组件已存在！");var G$u=G$p.getInstance(G$T);return G$l.push(this._components.length),this._components.push(G$u),G$u instanceof laya.d3.component.Script&&this._scripts.push(G$u),G$u._initialize(this),G$u},G$w._removeComponent=function(G$T,G$l){var G$w=this._typeComponentsIndices[G$T],G$u=G$w[G$l],G$p=this._components[G$u];this._components.splice(G$u,1),G$p instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(G$p),1),G$w.splice(G$l,1),0===G$w.length&&(this._typeComponentsIndices.splice(G$T,1),this._componentsMap.splice(G$T,1));for(var G$D=0,G$P=this._componentsMap.length;G$D<G$P;G$D++)for(var G$j=(G$w=this._typeComponentsIndices[G$D]).length-1;0<=G$j;G$j--){var G$J=G$w[G$j];if(!(G$u<G$J))break;G$w[G$j]=--G$J}G$p._destroy()},G$w.getComponentByType=function(G$T,G$l){void 0===G$l&&(G$l=0);var G$w=this._componentsMap.indexOf(G$T);return-1===G$w?null:this._components[this._typeComponentsIndices[G$w][G$l]]},G$w.getComponentsByType=function(G$T,G$l){var G$w=this._componentsMap.indexOf(G$T);if(-1!==G$w){var G$u=this._typeComponentsIndices[G$w],G$p=G$u.length;G$l.length=G$p;for(var G$D=0;G$D<G$p;G$D++)G$l[G$D]=this._components[G$u[G$D]]}else G$l.length=0},G$w.getComponentByIndex=function(G$T){return this._components[G$T]},G$w.removeComponentByType=function(G$T,G$l){void 0===G$l&&(G$l=0);var G$w=this._componentsMap.indexOf(G$T);-1!==G$w&&this._removeComponent(G$w,G$l)},G$w.removeComponentsByType=function(G$T){var G$l=this._componentsMap.indexOf(G$T);if(-1!==G$l)for(var G$w=this._typeComponentsIndices[G$l],G$u=0,G$p=G$w.length;G$u<G$p;G$w.length<G$p?G$p--:G$u++)this._removeComponent(G$l,G$u)},G$w.removeAllComponent=function(){for(var G$T=0,G$l=this._componentsMap.length;G$T<G$l;this._componentsMap.length<G$l?G$l--:G$T++)this.removeComponentsByType(this._componentsMap[G$T])},G$w._updateComponents=function(G$T){for(var G$l=0,G$w=this._components.length;G$l<G$w;G$l++){var G$u=this._components[G$l];!G$u.started&&(G$u._start(G$T),G$u.started=!0),G$u.enable&&G$u._update(G$T)}},G$w._lateUpdateComponents=function(G$T){for(var G$l=0;G$l<this._components.length;G$l++){var G$w=this._components[G$l];!G$w.started&&(G$w._start(G$T),G$w.started=!0),G$w.enable&&G$w._lateUpdate(G$T)}},G$w._preRenderUpdateComponents=function(G$T){for(var G$l=0;G$l<this._components.length;G$l++){var G$w=this._components[G$l];!G$w.started&&(G$w._start(G$T),G$w.started=!0),G$w.enable&&G$w._preRenderUpdate(G$T)}},G$w._postRenderUpdateComponents=function(G$T){for(var G$l=0;G$l<this._components.length;G$l++){var G$w=this._components[G$l];!G$w.started&&(G$w._start(G$T),G$w.started=!0),G$w.enable&&G$w._postRenderUpdate(G$T)}},G$l}(),G$ol=function(G$u){function G$T(){G$T.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new G$bl,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new G$jl(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}G$K(G$T,"laya.d3.core.material.BaseMaterial",G$u);var G$l=G$T.prototype;return G$c.imps(G$l,{"laya.d3.core.IClone":!0}),G$l._addShaderDefine=function(G$T){this._shaderDefineValue|=G$T},G$l._removeShaderDefine=function(G$T){this._shaderDefineValue&=~G$T},G$l._addDisablePublicShaderDefine=function(G$T){this._disablePublicShaderDefine|=G$T},G$l._removeDisablePublicShaderDefine=function(G$T){this._disablePublicShaderDefine&=~G$T},G$l._setBuffer=function(G$T,G$l){this._shaderValues.setValue(G$T,G$l),this._values[G$T]=G$l},G$l._getBuffer=function(G$T){return this._values[G$T]},G$l._setMatrix4x4=function(G$T,G$l){this._shaderValues.setValue(G$T,G$l?G$l.elements:null),this._values[G$T]=G$l},G$l._getMatrix4x4=function(G$T){return this._values[G$T]},G$l._setInt=function(G$T,G$l){this._shaderValues.setValue(G$T,G$l),this._values[G$T]=G$l},G$l._getInt=function(G$T){return this._values[G$T]},G$l._setNumber=function(G$T,G$l){this._shaderValues.setValue(G$T,G$l),this._values[G$T]=G$l},G$l._getNumber=function(G$T){return this._values[G$T]},G$l._setBool=function(G$T,G$l){this._shaderValues.setValue(G$T,G$l),this._values[G$T]=G$l},G$l._getBool=function(G$T){return this._values[G$T]},G$l._setVector2=function(G$T,G$l){this._shaderValues.setValue(G$T,G$l?G$l.elements:null),this._values[G$T]=G$l},G$l._getVector2=function(G$T){return this._values[G$T]},G$l._setColor=function(G$T,G$l){this._shaderValues.setValue(G$T,G$l?G$l.elements:null),this._values[G$T]=G$l},G$l._getColor=function(G$T){return this._values[G$T]},G$l._setTexture=function(G$T,G$l){var G$w=this._values[G$T];this._values[G$T]=G$l,this._shaderValues.setValue(G$T,G$l),0<this.referenceCount&&(G$w&&G$w._removeReference(),G$l&&G$l._addReference())},G$l._getTexture=function(G$T){return this._values[G$T]},G$l._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},G$l._getShader=function(G$T,G$l,G$w){var G$u=(G$T|G$l)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(G$u,G$w,this._shaderDefineValue),this._shader},G$l._setRenderStateBlendDepth=function(){var G$T=G$e.mainContext;switch(G$y.setDepthMask(G$T,this.depthWrite),0===this.depthTest?G$y.setDepthTest(G$T,!1):(G$y.setDepthTest(G$T,!0),G$y.setDepthFunc(G$T,this.depthTest)),this.blend){case 0:G$y.setBlend(G$T,!1);break;case 1:G$y.setBlend(G$T,!0),G$y.setBlendFunc(G$T,this.srcBlend,this.dstBlend);break;case 2:G$y.setBlend(G$T,!0)}},G$l._setRenderStateFrontFace=function(G$T,G$l){var G$w=G$e.mainContext,G$u=0;switch(this.cull){case 0:G$y.setCullFace(G$w,!1);break;case 1:G$y.setCullFace(G$w,!0),G$u=G$T?G$l&&G$l._isFrontFaceInvert?2305:2304:G$l&&G$l._isFrontFaceInvert?2304:2305,G$y.setFrontFace(G$w,G$u);break;case 2:G$y.setCullFace(G$w,!0),G$u=G$T?G$l&&G$l._isFrontFaceInvert?2304:2305:G$l&&G$l._isFrontFaceInvert?2305:2304,G$y.setFrontFace(G$w,G$u)}},G$l.onAsynLoaded=function(G$T,G$l,G$w){var G$u=G$l[0],G$p=G$l[1];switch(G$u.version){case"LAYAMATERIAL:01":var G$D=0,G$P=0,G$j=G$u.props;for(var G$J in G$j)switch(G$J){case"vectors":var G$q=G$j[G$J];for(G$D=0,G$P=G$q.length;G$D<G$P;G$D++){var G$M=G$q[G$D],G$z=G$M.value;switch(G$z.length){case 2:this[G$M.name]=new G$Dl(G$z[0],G$z[1]);break;case 3:this[G$M.name]=new G$Pl(G$z[0],G$z[1],G$z[2]);break;case 4:this[G$M.name]=new G$jl(G$z[0],G$z[1],G$z[2],G$z[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var G$b=G$j[G$J];for(G$D=0,G$P=G$b.length;G$D<G$P;G$D++){var G$K=G$b[G$D],G$Y=G$K.path;G$Y&&(this[G$K.name]=G$L.getRes(G$p[G$Y]))}break;case"defines":var G$t=G$j[G$J];for(G$D=0,G$P=G$t.length;G$D<G$P;G$D++){var G$A=this._shaderCompile.getMaterialDefineByName(G$t[G$D]);this._addShaderDefine(G$A)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[G$J]=G$j[G$J];break;case"renderQueue":switch(G$j[G$J]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[G$J]=G$j[G$J]}break;case"LAYAMATERIAL:02":for(G$J in G$j=G$u.props)switch(G$J){case"vectors":for(G$D=0,G$P=(G$q=G$j[G$J]).length;G$D<G$P;G$D++)switch((G$z=(G$M=G$q[G$D]).value).length){case 2:this[G$M.name]=new G$Dl(G$z[0],G$z[1]);break;case 3:this[G$M.name]=new G$Pl(G$z[0],G$z[1],G$z[2]);break;case 4:this[G$M.name]=new G$jl(G$z[0],G$z[1],G$z[2],G$z[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(G$D=0,G$P=(G$b=G$j[G$J]).length;G$D<G$P;G$D++)(G$Y=(G$K=G$b[G$D]).path)&&(this[G$K.name]=G$L.getRes(G$p[G$Y]));break;case"defines":for(G$D=0,G$P=(G$t=G$j[G$J]).length;G$D<G$P;G$D++)G$A=this._shaderCompile.getMaterialDefineByName(G$t[G$D]),this._addShaderDefine(G$A);break;default:this[G$J]=G$j[G$J]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},G$l._addReference=function(){G$u.prototype._addReference.call(this);for(var G$T=0,G$l=this._values.length;G$T<G$l;G$T++){var G$w=this._values[G$T];G$w&&G$w instanceof laya.d3.resource.BaseTexture&&G$w._addReference()}},G$l._removeReference=function(){G$u.prototype._removeReference.call(this);for(var G$T=0,G$l=this._values.length;G$T<G$l;G$T++){var G$w=this._values[G$T];G$w&&G$w instanceof laya.d3.resource.BaseTexture&&G$w._removeReference()}},G$l.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},G$l.setShaderName=function(G$T){var G$l=G$Ol.nameKey.getID(G$T);if(-1===G$l)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=G$sl._preCompileShader[G$l]},G$l.cloneTo=function(G$T){var G$l=G$T;G$l.name=this.name,G$l.cull=this.cull,G$l.blend=this.blend,G$l.srcBlend=this.srcBlend,G$l.dstBlend=this.dstBlend,G$l.srcBlendRGB=this.srcBlendRGB,G$l.dstBlendRGB=this.dstBlendRGB,G$l.srcBlendAlpha=this.srcBlendAlpha,G$l.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(G$l.blendConstColor),G$l.blendEquation=this.blendEquation,G$l.blendEquationRGB=this.blendEquationRGB,G$l.blendEquationAlpha=this.blendEquationAlpha,G$l.depthTest=this.depthTest,G$l.depthWrite=this.depthWrite,G$l.renderQueue=this.renderQueue,G$l._shader=this._shader,G$l._disablePublicShaderDefine=this._disablePublicShaderDefine,G$l._shaderDefineValue=this._shaderDefineValue;var G$w,G$u=0,G$p=G$l._shaderValues;G$l._shaderValues.data.length=this._shaderValues.data.length;var G$D=this._values.length,G$P=G$l._values;for(G$u=0,G$w=G$P.length=G$D;G$u<G$w;G$u++){var G$j=this._values[G$u];if(G$j)if("number"==typeof G$j)G$P[G$u]=G$j,G$p.data[G$u]=G$j;else if("number"==typeof G$j&&Math.floor(G$j)==G$j)G$P[G$u]=G$j,G$p.data[G$u]=G$j;else if("boolean"==typeof G$j)G$P[G$u]=G$j,G$p.data[G$u]=G$j;else if(G$j instanceof laya.d3.math.Vector2){var G$J=G$P[G$u]||(G$P[G$u]=new G$Dl);G$j.cloneTo(G$J),G$p.data[G$u]=G$J.elements}else if(G$j instanceof laya.d3.math.Vector3){var G$q=G$P[G$u]||(G$P[G$u]=new G$Pl);G$j.cloneTo(G$q),G$p.data[G$u]=G$q.elements}else if(G$j instanceof laya.d3.math.Vector4){var G$M=G$P[G$u]||(G$P[G$u]=new G$jl);G$j.cloneTo(G$M),G$p.data[G$u]=G$M.elements}else if(G$j instanceof laya.d3.math.Matrix4x4){var G$z=G$P[G$u]||(G$P[G$u]=new G$Tl);G$j.cloneTo(G$z),G$p.data[G$u]=G$z.elements}else G$j instanceof laya.d3.resource.BaseTexture&&(G$P[G$u]=G$j,G$p.data[G$u]=G$j)}},G$l.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$Y(0,G$l,"alphaTestValue",function(){return this._getNumber(0)},function(G$T){this._setNumber(0,G$T)}),G$Y(0,G$l,"alphaTest",function(){return this._alphaTest},function(G$T){(this._alphaTest=G$T)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),G$T.__init__=function(){G$T.SHADERDEFINE_ALPHATEST=G$T.shaderDefines.registerDefine("ALPHATEST")},G$T.RENDERQUEUE_OPAQUE=2e3,G$T.RENDERQUEUE_ALPHATEST=2450,G$T.RENDERQUEUE_TRANSPARENT=3e3,G$T.CULL_NONE=0,G$T.CULL_FRONT=1,G$T.CULL_BACK=2,G$T.BLEND_DISABLE=0,G$T.BLEND_ENABLE_ALL=1,G$T.BLEND_ENABLE_SEPERATE=2,G$T.BLENDPARAM_ZERO=0,G$T.BLENDPARAM_ONE=1,G$T.BLENDPARAM_SRC_COLOR=768,G$T.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,G$T.BLENDPARAM_DST_COLOR=774,G$T.BLENDPARAM_ONE_MINUS_DST_COLOR=775,G$T.BLENDPARAM_SRC_ALPHA=770,G$T.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,G$T.BLENDPARAM_DST_ALPHA=772,G$T.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,G$T.BLENDPARAM_SRC_ALPHA_SATURATE=776,G$T.BLENDEQUATION_ADD=0,G$T.BLENDEQUATION_SUBTRACT=1,G$T.BLENDEQUATION_REVERSE_SUBTRACT=2,G$T.DEPTHTEST_OFF=0,G$T.DEPTHTEST_NEVER=512,G$T.DEPTHTEST_LESS=513,G$T.DEPTHTEST_EQUAL=514,G$T.DEPTHTEST_LEQUAL=515,G$T.DEPTHTEST_GREATER=516,G$T.DEPTHTEST_NOTEQUAL=517,G$T.DEPTHTEST_GEQUAL=518,G$T.DEPTHTEST_ALWAYS=519,G$T.SHADERDEFINE_ALPHATEST=1,G$T.ALPHATESTVALUE=0,G$z(G$T,["shaderDefines",function(){return this.shaderDefines=new G$Ml}]),G$T}(G$A),G$el=function(G$T){function G$l(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,G$l.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}G$K(G$l,"laya.d3.resource.BaseTexture",G$A);var G$w=G$l.prototype;return G$Y(0,G$w,"width",function(){return this._width}),G$Y(0,G$w,"repeat",function(){return this._repeat},function(G$T){if(this._repeat!==G$T&&(this._repeat=G$T,this._source)){var G$l=G$e.mainContext;G$y.bindTexture(G$l,this._type,this._source),G$m.isPOT(this._width,this._height)&&this._repeat?(G$l.texParameteri(this._type,10242,10497),G$l.texParameteri(this._type,10243,10497)):(G$l.texParameteri(this._type,10242,33071),G$l.texParameteri(this._type,10243,33071))}}),G$Y(0,G$w,"height",function(){return this._height}),G$Y(0,G$w,"magFifter",function(){return this._magFifter},function(G$T){(this._magFifter=G$T)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(G$T)}),G$Y(0,G$w,"wrapModeV",function(){return this._wrapModeV}),G$Y(0,G$w,"size",function(){return this._size}),G$Y(0,G$w,"wrapModeU",function(){return this._wrapModeU}),G$Y(0,G$w,"mipmap",function(){return this._mipmap},function(G$T){this._mipmap=G$T,this._mipmap!=G$T&&this._conchTexture&&this._conchTexture.setMipMap(G$T)}),G$Y(0,G$w,"minFifter",function(){return this._minFifter},function(G$T){this._minFifter=G$T,this._minFifter!=G$T&&this._conchTexture&&this._conchTexture.setMinFifter(G$T)}),G$Y(0,G$w,"format",function(){return this._format}),G$Y(0,G$w,"source",function(){return this.activeResource(),this._source}),G$Y(0,G$w,"defaulteTexture",function(){return G$dl.grayTexture}),G$l.WARPMODE_REPEAT=0,G$l.WARPMODE_CLAMP=1,G$l}(),G$yl=function(G$T){function G$l(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,G$l.__super.call(this),this._boundingBoxCorners=G$u(8,null)}G$K(G$l,"laya.d3.resource.models.BaseMesh",G$A);var G$w=G$l.prototype;return G$w._getPositions=function(){throw new Error("未Override,请重载该属性！")},G$w._generateBoundingObject=function(){this._boundingSphere=new G$CT(new G$Pl,0),G$CT.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new G$ET(new G$Pl,new G$Pl),G$ET.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},G$w.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},G$w.getRenderElement=function(G$T){throw new Error("未Override,请重载该属性！")},G$Y(0,G$w,"subMeshCount",function(){return this._subMeshCount}),G$Y(0,G$w,"boundingBox",function(){return this._boundingBox}),G$Y(0,G$w,"boundingBoxCorners",function(){return this._boundingBoxCorners}),G$Y(0,G$w,"boundingSphere",function(){return this._boundingSphere}),G$l}(),G$vl=(function(G$T){function G$l(){G$l.__super.call(this)}G$K(G$l,"laya.d3.component.Script",G$Wl);var G$w=G$l.prototype;G$w.onTriggerEnter=function(G$T){},G$w.onTriggerExit=function(G$T){},G$w.onTriggerStay=function(G$T){},G$Y(0,G$w,"isSingleton",function(){return G$l._isSingleton}),G$l._isSingleton=!1}(),function(G$T){function G$l(G$T){this._owner=null,this._sharedMesh=null,G$l.__super.call(this),this._owner=G$T}G$K(G$l,"laya.d3.core.MeshFilter",G$T);var G$w=G$l.prototype;return G$w._sharedMeshLoaded=function(){this.event("loaded")},G$w._destroy=function(){G$T.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},G$Y(0,G$w,"sharedMesh",function(){return this._sharedMesh},function(G$T){var G$l=this._sharedMesh;G$l&&G$l._removeReference(),(this._sharedMesh=G$T)._addReference(),this.event("meshchanged",[this,G$l,G$T]),G$T.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),G$Y(0,G$w,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),G$Y(0,G$w,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),G$Y(0,G$w,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),G$Y(0,G$w,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),G$l}(G$ml)),G$xl=function(G$T){function G$l(G$T){G$l.__super.call(this,G$T),G$T.meshFilter.on("meshchanged",this,this._onMeshChanged)}G$K(G$l,"laya.d3.core.MeshRender",G$cl);var G$w=G$l.prototype;return G$w._onMeshChanged=function(G$T,G$l,G$w){G$w.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:G$w.once("loaded",this,this._onMeshLoaed)},G$w._onMeshLoaed=function(G$T,G$l){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},G$w._calculateBoundingSphereByInitSphere=function(G$T){var G$l=NaN,G$w=this._owner.transform,G$u=G$w.scale.elements,G$p=Math.abs(G$u[0]),G$D=Math.abs(G$u[1]),G$P=Math.abs(G$u[2]);G$l=G$D<=G$p&&G$P<=G$p?G$p:G$P<=G$D?G$D:G$P,G$Pl.transformCoordinate(G$T.center,G$w.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=G$T.radius*G$l},G$w._calculateBoundBoxByInitCorners=function(G$T){for(var G$l=this._owner.transform.worldMatrix,G$w=0;G$w<8;G$w++)G$Pl.transformCoordinate(G$T[G$w],G$l,G$cl._tempBoundBoxCorners[G$w]);G$ET.createfromPoints(G$cl._tempBoundBoxCorners,this._boundingBox)},G$w._calculateBoundingSphere=function(){var G$T=this._owner.meshFilter.sharedMesh;null==G$T||null==G$T.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(G$T.boundingSphere)},G$w._calculateBoundingBox=function(){var G$T=this._owner.meshFilter.sharedMesh;null==G$T||null==G$T.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(G$T.boundingBoxCorners)},G$w._renderUpdate=function(G$T){var G$l=this._owner.transform;if(G$l){this._setShaderValueMatrix4x4(0,G$l.worldMatrix);var G$w=this._owner.getProjectionViewWorldMatrix(G$T);this._setShaderValueMatrix4x4(1,G$w)}else this._setShaderValueMatrix4x4(0,G$Tl.DEFAULT),this._setShaderValueMatrix4x4(1,G$T);return G$Ll.debugMode&&this._renderRenderableBoundBox(),!0},G$l}(),G$Rl=function(G$l){function G$u(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,G$u.__super.call(this),this._renderState=new G$U,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new G$bl,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new G$lT,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new G$Pl(.7,.7,.7),this.ambientColor=new G$Pl(.212,.227,.259),G$e.shaderHighPrecision&&this.addShaderDefine(G$sl.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}G$K(G$u,"laya.d3.core.scene.Scene",G$l);var G$T=G$u.prototype;return G$c.imps(G$T,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),G$T._setUrl=function(G$T){this._url=G$T},G$T._getGroup=function(){return this._group},G$T._setGroup=function(G$T){this._group=G$T},G$T._display=function(){G$c.stage._scenes.push(this),G$c.stage._scenes.sort(G$u._sortScenes);for(var G$T=0,G$l=this._childs.length;G$T<G$l;G$T++){var G$w=this._childs[G$T];G$w.active&&G$w._activeHierarchy()}},G$T._unDisplay=function(){var G$T=G$c.stage._scenes;G$T.splice(G$T.indexOf(this),1);for(var G$l=0,G$w=this._childs.length;G$l<G$w;G$l++){var G$u=this._childs[G$l];G$u.active&&G$u._inActiveHierarchy()}},G$T._addChild3D=function(G$T){G$T.transform._onWorldTransform(),G$T._setBelongScene(this),this.displayedInStage&&G$T.active&&G$T._activeHierarchy()},G$T._removeChild3D=function(G$T){G$T.transform.parent=null,this.displayedInStage&&G$T.active&&G$T._inActiveHierarchy(),G$T._setUnBelongScene()},G$T.initOctree=function(G$T,G$l,G$w,G$u,G$p){void 0===G$p&&(G$p=6),this.treeSize=new G$Pl(G$T,G$l,G$w),this.treeLevel=G$p,this.treeRoot=new G$E(this,0),this.treeRoot.init(G$u,this.treeSize)},G$T._prepareUpdateToRenderState=function(G$T,G$l){G$l.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,G$l.scene=this},G$T._prepareSceneToRender=function(G$T){var G$l=this._lights.length;if(0<G$l)for(var G$w=0,G$u=0;G$u<G$l&&!(this._lights[G$u]._prepareToScene(G$T)&&++G$w>=this._enableLightCount);G$u++);},G$T._updateChilds=function(G$T){for(var G$l=0,G$w=this._childs.length;G$l<G$w;++G$l)this._childs[G$l]._update(G$T)},G$T._preRenderScene=function(G$T,G$l,G$w){var G$u,G$p=G$l._viewMatrix,G$D=G$l._projectionMatrix,G$P=G$l._projectionViewMatrix,G$j=0,G$J=G$l.camera;for(G$J.useOcclusionCulling?this.treeRoot?G$wT.renderObjectCullingOctree(G$w,this,G$J,G$p,G$D,G$P):G$wT.renderObjectCulling(G$w,this,G$J,G$p,G$D,G$P):G$wT.renderObjectCullingNoBoundFrustum(this,G$J,G$p,G$D,G$P),G$j=0,G$u=this._quenes.length;G$j<G$u;G$j++)this._quenes[G$j]&&this._quenes[G$j]._preRender(G$l)},G$T._clear=function(G$T,G$l){var G$w=G$l._viewport,G$u=G$l.camera,G$p=G$w.x,G$D=G$u.renderTargetSize.height-G$w.y-G$w.height,G$P=G$w.width,G$j=G$w.height;G$T.viewport(G$p,G$D,G$P,G$j);var G$J=256,G$q=G$u.renderTarget;switch(G$u.clearFlag){case 0:var G$M=G$u.clearColor;if(G$M){G$T.enable(3089),G$T.scissor(G$p,G$D,G$P,G$j);var G$z=G$M.elements;G$T.clearColor(G$z[0],G$z[1],G$z[2],G$z[3]),G$J|=16384}if(G$q)switch(G$M||(G$J=16384),G$q.depthStencilFormat){case 33189:G$J|=256;break;case 36168:G$J|=1024;break;case 34041:G$J|=256,G$J|=1024}G$T.clear(G$J),G$M&&G$T.disable(3089);break;case 1:case 2:if(G$q)switch(G$J=16384,G$q.depthStencilFormat){case 33189:G$J|=256;break;case 36168:G$J|=1024;break;case 34041:G$J|=256,G$J|=1024}G$T.clear(G$J);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},G$T._renderScene=function(G$T,G$l){var G$w,G$u,G$p=G$l.camera,G$D=0;for(G$D=0;G$D<2;G$D++)(G$u=this._quenes[G$D])&&(G$p.renderTarget?G$u._render(G$l,!0):G$u._render(G$l,!1));if(1===G$p.clearFlag){var G$P=G$p.sky;G$P&&(G$y.setCullFace(G$T,!1),G$y.setDepthFunc(G$T,515),G$y.setDepthMask(G$T,!1),G$P._render(G$l),G$y.setDepthFunc(G$T,513),G$y.setDepthMask(G$T,!0))}for(G$D=2,G$w=this._quenes.length;G$D<G$w;G$D++)(G$u=this._quenes[G$D])&&(G$u._sortAlpha(G$l.camera.transform.position),G$p.renderTarget?G$u._render(G$l,!0):G$u._render(G$l,!1))},G$T._set3DRenderConfig=function(G$T){G$T.disable(3042),G$y._blend=!1,G$T.blendFunc(770,771),G$y._sFactor=770,G$y._dFactor=771,G$T.disable(2929),G$y._depthTest=!1,G$T.enable(2884),G$y._cullFace=!0,G$T.depthMask(1),G$y._depthMask=!0,G$T.frontFace(2304),G$y._frontFace=2304},G$T._set2DRenderConfig=function(G$T){G$y.setBlend(G$T,!0),G$y.setBlendFunc(G$T,1,771),G$y.setDepthTest(G$T,!1),G$y.setCullFace(G$T,!1),G$y.setDepthMask(G$T,!0),G$y.setFrontFace(G$T,2305),G$T.viewport(0,0,G$M.width,G$M.height)},G$T._parseCustomProps=function(G$T,G$l,G$w,G$u){var G$p=G$u.customProps.lightmaps,G$D=G$p.length,G$P=this._lightmaps;G$P.length=G$D;for(var G$j=0;G$j<G$D;G$j++)G$P[G$j]=G$L.getRes(G$l[G$p[G$j].replace(".exr",".png")]);this.setlightmaps(G$P);var G$J=G$u.customProps.ambientColor;G$J&&(this.ambientColor=new G$Pl(G$J[0],G$J[1],G$J[2]));var G$q=G$u.customProps.fogColor;G$q&&(this.fogColor=new G$Pl(G$q[0],G$q[1],G$q[2]))},G$T._addLight=function(G$T){this._lights.indexOf(G$T)<0&&this._lights.push(G$T)},G$T._removeLight=function(G$T){var G$l=this._lights.indexOf(G$T);0<=G$l&&this._lights.splice(G$l,1)},G$T._updateScene=function(){var G$T=this._renderState;this._prepareUpdateToRenderState(G$e.mainContext,G$T),this._updateComponents(G$T),this._updateChilds(G$T),this._lateUpdateComponents(G$T),this._time+=G$T.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},G$T._updateSceneConch=function(){var G$T=this._renderState;this._prepareUpdateToRenderState(G$e.mainContext,G$T),this._updateComponents(G$T),this._lateUpdateComponents(G$T),this._prepareSceneToRender(G$T);for(var G$l=0,G$w=this._cameraPool.length;G$l<G$w;G$l++){var G$u=this._cameraPool[G$l];(G$T.camera=G$u)._prepareCameraToRender()}},G$T._preRenderShadow=function(G$T,G$l,G$w,G$u,G$p){this.treeRoot?G$wT.renderShadowObjectCullingOctree(this,G$l,G$w,G$u,G$p):G$wT.renderShadowObjectCulling(this,G$l,G$w,G$u,G$p);for(var G$D=0,G$P=G$w.length;G$D<G$P;G$D++)G$w[G$D]&&G$w[G$D]._preRender(G$T)},G$T._renderShadowMap=function(G$T,G$l,G$w){var G$u=this.parallelSplitShadowMaps[0];G$u._calcAllLightCameraInfo(G$w);var G$p,G$D,G$P,G$j=G$u.PSSMNum;if(this._preRenderShadow(G$l,G$u._lightCulling,G$u._shadowQuenes,G$u._lightVPMatrix[0],G$j),this.addShaderDefine(G$Kl.SHADERDEFINE_CAST_SHADOW),1<G$j)for(var G$J=0;G$J<G$j;G$J++)G$p=G$u.getRenderTarget(G$J+1),G$u.beginRenderTarget(G$J+1),G$T.clearColor(1,1,1,1),G$T.clear(16640),G$T.viewport(0,0,G$p.width,G$p.height),G$l.camera=G$P=G$u.getLightCamera(G$J),G$P._prepareCameraToRender(),G$P._prepareCameraViewProject(G$P.viewMatrix,G$P.projectionMatrix),G$l._projectionViewMatrix=G$u._lightVPMatrix[G$J+1],(G$D=G$u._shadowQuenes[G$J])._preRender(G$l),G$D._renderShadow(G$l,!1),G$u.endRenderTarget(G$J+1);else G$p=G$u.getRenderTarget(1),G$u.beginRenderTarget(1),G$T.clearColor(1,1,1,1),G$T.clear(16640),G$T.viewport(0,0,G$p.width,G$p.height),G$l.camera=G$P=G$u.getLightCamera(0),G$P._prepareCameraToRender(),G$P._prepareCameraViewProject(G$P.viewMatrix,G$P.projectionMatrix),G$l._projectionViewMatrix=G$u._lightVPMatrix[0],(G$D=G$u._shadowQuenes[0])._preRender(G$l),G$D._renderShadow(G$l,!0),G$u.endRenderTarget(1);this.removeShaderDefine(G$Kl.SHADERDEFINE_CAST_SHADOW)},G$T.addTreeNode=function(G$T){this.treeRoot.addTreeNode(G$T)},G$T.removeTreeNode=function(G$T){this.treeSize&&G$T._treeNode&&G$T._treeNode.removeObject(G$T)},G$T.setlightmaps=function(G$T){this._lightmaps=G$T;for(var G$l=0,G$w=this._renderableSprite3Ds.length;G$l<G$w;G$l++)this._renderableSprite3Ds[G$l]._render._applyLightMapParams()},G$T.getlightmaps=function(){return this._lightmaps},G$T.addChildAt=function(G$T,G$l){if(!(G$T instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(G$T&&G$T.__className));if(!G$T||this.destroyed||G$T===this)return G$T;if(G$T.zOrder&&this._set$P("hasZorder",!0),0<=G$l&&G$l<=this._childs.length){if(G$T._parent===this){var G$w=this.getChildIndex(G$T);this._childs.splice(G$w,1),this._childs.splice(G$l,0,G$T),this.conchModel&&(this.conchModel.removeChild(G$T.conchModel),this.conchModel.addChildAt(G$T.conchModel,G$l)),this._childChanged()}else G$T.parent&&G$T.parent.removeChild(G$T),this._childs===G$q.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(G$l,0,G$T),this.conchModel&&this.conchModel.addChildAt(G$T.conchModel,G$l),(G$T.parent=this)._addChild3D(G$T);return G$T}throw new Error("appendChildAt:The index is out of bounds")},G$T.addChild=function(G$T){if(!(G$T instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!G$T||this.destroyed||G$T===this)return G$T;if(G$T.zOrder&&this._set$P("hasZorder",!0),G$T._parent===this){var G$l=this.getChildIndex(G$T);G$l!==this._childs.length-1&&(this._childs.splice(G$l,1),this._childs.push(G$T),this.conchModel&&(this.conchModel.removeChild(G$T.conchModel),this.conchModel.addChildAt(G$T.conchModel,this._childs.length-1)),this._childChanged())}else G$T.parent&&G$T.parent.removeChild(G$T),this._childs===G$q.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(G$T),this.conchModel&&this.conchModel.addChildAt(G$T.conchModel,this._childs.length-1),(G$T.parent=this)._childChanged(),this._addChild3D(G$T);return G$T},G$T.removeChildAt=function(G$T){var G$l=this.getChildAt(G$T);return G$l&&(this._removeChild3D(G$l),this._childs.splice(G$T,1),this.conchModel&&this.conchModel.removeChild(G$l.conchModel),G$l.parent=null),G$l},G$T.removeChildren=function(G$T,G$l){if(void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=2147483647),this._childs&&0<this._childs.length){var G$w=this._childs;if(0===G$T&&G$D<=G$l){var G$u=G$w;this._childs=G$q.ARRAY_EMPTY}else G$u=G$w.splice(G$T,G$l-G$T);for(var G$p=0,G$D=G$u.length;G$p<G$D;G$p++)this._removeChild3D(G$u[G$p]),G$u[G$p].parent=null,this.conchModel&&this.conchModel.removeChild(G$u[G$p].conchModel)}return this},G$T.addFrustumCullingObject=function(G$T){this.treeRoot?this.addTreeNode(G$T):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(G$T):this._cullingRenders[this._cullingRendersLength]=G$T,G$T._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},G$T.removeFrustumCullingObject=function(G$T){if(this.treeRoot)this.removeTreeNode(G$T);else{this._cullingRendersLength--;var G$l=G$T._indexInSceneFrustumCullingObjects;if(G$l!==this._cullingRendersLength){var G$w=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[G$l]=G$w)._indexInSceneFrustumCullingObjects=G$l,G$T._indexInSceneFrustumCullingObjects=-1}}},G$T.getRenderQueue=function(G$T){return G$T<3e3?this._quenes[1]||(this._quenes[1]=new G$f(this)):this._quenes[2]||(this._quenes[2]=new G$f(this))},G$T.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new G$f(this)},G$T.addShaderDefine=function(G$T){this._shaderDefineValue|=G$T},G$T.removeShaderDefine=function(G$T){this._shaderDefineValue&=~G$T},G$T.addScript=function(G$T){return this._addComponent(G$T)},G$T.getScriptByType=function(G$T,G$l){return void 0===G$l&&(G$l=0),this._getComponentByType(G$T,G$l)},G$T.getScriptsByType=function(G$T,G$l){this._getComponentsByType(G$T,G$l)},G$T.getScriptByIndex=function(G$T){return this._getComponentByIndex(G$T)},G$T.removeScriptByType=function(G$T,G$l){void 0===G$l&&(G$l=0),this._removeComponentByType(G$T,G$l)},G$T.removeScriptsByType=function(G$T){this._removeComponentByType(G$T)},G$T.removeAllScript=function(){this._removeAllComponent()},G$T.render=function(G$T,G$l,G$w){(G$t._context.ctx._renderKey=0)<this._childs.length&&G$T.addRenderObject(this)},G$T.renderSubmit=function(){var G$T=G$e.mainContext,G$l=this._renderState;this._set3DRenderConfig(G$T),this._prepareSceneToRender(this._renderState);var G$w,G$u=0,G$p=0;if(G$Ll.debugMode||G$E.debugMode)for(G$u=0,G$p=this._cameraPool.length;G$u<G$p;G$u++)G$w=this._cameraPool[G$u],G$Ll._debugPhasorSprite.begin(1,G$w),G$w.activeInHierarchy&&G$w._renderCamera(G$T,G$l,this),G$Ll._debugPhasorSprite.end();else for(G$u=0,G$p=this._cameraPool.length;G$u<G$p;G$u++)(G$w=this._cameraPool[G$u]).activeInHierarchy&&G$w._renderCamera(G$T,G$l,this);return this._set2DRenderConfig(G$T),1},G$T.onAsynLoaded=function(G$T,G$l,G$w){var G$u=G$l[0];if("Scene"!==G$u.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var G$p=G$l[1];G$Al._createNodeByJson(this,G$u,this,G$p),this.event("hierarchyloaded",[this]),this.__loaded=!0},G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),this.destroyed||(G$l.prototype.destroy.call(this,G$T),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,G$L.clearRes(this.url),this.loaded||G$Ll._cancelLoadByUrl(this.url))},G$T.getRenderType=function(){return 0},G$T.releaseRender=function(){},G$T._addComponent=function(G$T){var G$l,G$w=this._componentsMap.indexOf(G$T);if(-1===G$w)G$l=[],this._componentsMap.push(G$T),this._typeComponentsIndices.push(G$l);else if(G$l=this._typeComponentsIndices[G$w],this._components[G$l[0]].isSingleton)throw new Error("无法单实例创建"+G$T+"组件，"+G$T+"组件已存在！");var G$u=G$p.getInstance(G$T);G$l.push(this._components.length),this._components.push(G$u);return G$u._initialize(this),G$u},G$T._removeComponent=function(G$T,G$l){var G$w=this._typeComponentsIndices[G$T],G$u=G$w[G$l],G$p=this._components[G$u];this._components.splice(G$u,1),G$w.splice(G$l,1),0===G$w.length&&(this._typeComponentsIndices.splice(G$T,1),this._componentsMap.splice(G$T,1));for(var G$D=0,G$P=this._componentsMap.length;G$D<G$P;G$D++)for(var G$j=(G$w=this._typeComponentsIndices[G$D]).length-1;0<=G$j;G$j--){var G$J=G$w[G$j];if(!(G$u<G$J))break;G$w[G$j]=--G$J}G$p._destroy()},G$T._getComponentByType=function(G$T,G$l){void 0===G$l&&(G$l=0);var G$w=this._componentsMap.indexOf(G$T);return-1===G$w?null:this._components[this._typeComponentsIndices[G$w][G$l]]},G$T._getComponentsByType=function(G$T,G$l){var G$w=this._componentsMap.indexOf(G$T);if(-1!==G$w){var G$u=this._typeComponentsIndices[G$w],G$p=G$u.length;G$l.length=G$p;for(var G$D=0;G$D<G$p;G$D++)G$l[G$D]=this._components[G$u[G$D]]}else G$l.length=0},G$T._getComponentByIndex=function(G$T){return this._components[G$T]},G$T._removeComponentByType=function(G$T,G$l){void 0===G$l&&(G$l=0);var G$w=this._componentsMap.indexOf(G$T);-1!==G$w&&this._removeComponent(G$w,G$l)},G$T._removeComponentsByType=function(G$T){var G$l=this._componentsMap.indexOf(G$T);if(-1!==G$l)for(var G$w=this._typeComponentsIndices[G$l],G$u=0,G$p=G$w.length;G$u<G$p;G$w.length<G$p?G$p--:G$u++)this._removeComponent(G$l,G$u)},G$T._removeAllComponent=function(){for(var G$T=0,G$l=this._componentsMap.length;G$T<G$l;this._componentsMap.length<G$l?G$l--:G$T++)this._removeComponentsByType(this._componentsMap[G$T])},G$T._updateComponents=function(G$T){for(var G$l=0,G$w=this._components.length;G$l<G$w;G$l++){var G$u=this._components[G$l];!G$u.started&&(G$u._start(G$T),G$u.started=!0),G$u.enable&&G$u._update(G$T)}},G$T._lateUpdateComponents=function(G$T){for(var G$l=0;G$l<this._components.length;G$l++){var G$w=this._components[G$l];!G$w.started&&(G$w._start(G$T),G$w.started=!0),G$w.enable&&G$w._lateUpdate(G$T)}},G$T._preRenderUpdateComponents=function(G$T){for(var G$l=0;G$l<this._components.length;G$l++){var G$w=this._components[G$l];!G$w.started&&(G$w._start(G$T),G$w.started=!0),G$w.enable&&G$w._preRenderUpdate(G$T)}},G$T._postRenderUpdateComponents=function(G$T){for(var G$l=0;G$l<this._components.length;G$l++){var G$w=this._components[G$l];!G$w.started&&(G$w._start(G$T),G$w.started=!0),G$w.enable&&G$w._postRenderUpdate(G$T)}},G$Y(0,G$T,"_loaded",null,function(G$T){this.__loaded=G$T}),G$Y(0,G$T,"fogColor",function(){return this._fogColor},function(G$T){this._fogColor=G$T,this._shaderValues.setValue(0,G$T.elements)}),G$Y(0,G$T,"enableFog",function(){return this._enableFog},function(G$T){this._enableFog!==G$T&&((this._enableFog=G$T)?(this.addShaderDefine(G$sl.SHADERDEFINE_FOG),this.removeShaderDefine(G$sl.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(G$sl.SHADERDEFINE_FOG))}),G$Y(0,G$T,"url",function(){return this._url}),G$Y(0,G$T,"loaded",function(){return this.__loaded}),G$Y(0,G$T,"enableDepthFog",function(){return this._enableDepthFog},function(G$T){this._enableDepthFog!=G$T&&((this._enableDepthFog=G$T)?(this.addShaderDefine(G$sl.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(G$sl.SHADERDEFINE_FOG)):this.removeShaderDefine(G$sl.SAHDERDEFINE_DEPTHFOG))}),G$Y(0,G$T,"fogStart",function(){return this._fogStart},function(G$T){this._fogStart=G$T,this._shaderValues.setValue(1,G$T)}),G$Y(0,G$T,"fogRange",function(){return this._fogRange},function(G$T){this._fogRange=G$T,this._shaderValues.setValue(2,G$T)}),G$Y(0,G$T,"ambientColor",function(){return this._ambientColor},function(G$T){this._ambientColor=G$T,this._shaderValues.setValue(21,G$T.elements)}),G$Y(0,G$T,"scene",function(){return this}),G$Y(0,G$T,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),G$u._sortScenes=function(G$T,G$l){if(G$T.parent!==G$c.stage||G$l.parent!==G$c.stage)return G$T.parent!==G$c.stage&&G$l.parent!==G$c.stage?G$u._sortScenes(G$T.parent,G$l.parent):G$T.parent===G$c.stage?-1:1;var G$w=G$c.stage._childs;return G$w.indexOf(G$T)-G$w.indexOf(G$l)},G$u.load=function(G$T){return G$c.loader.create(G$T,null,null,G$u)},G$u.FOGCOLOR=0,G$u.FOGSTART=1,G$u.FOGRANGE=2,G$u.LIGHTDIRECTION=3,G$u.LIGHTDIRCOLOR=4,G$u.POINTLIGHTPOS=5,G$u.POINTLIGHTRANGE=6,G$u.POINTLIGHTATTENUATION=7,G$u.POINTLIGHTCOLOR=8,G$u.SPOTLIGHTPOS=9,G$u.SPOTLIGHTDIRECTION=10,G$u.SPOTLIGHTSPOT=11,G$u.SPOTLIGHTRANGE=12,G$u.SPOTLIGHTATTENUATION=13,G$u.SPOTLIGHTCOLOR=14,G$u.SHADOWDISTANCE=15,G$u.SHADOWLIGHTVIEWPROJECT=16,G$u.SHADOWMAPPCFOFFSET=17,G$u.SHADOWMAPTEXTURE1=18,G$u.SHADOWMAPTEXTURE2=19,G$u.SHADOWMAPTEXTURE3=20,G$u.AMBIENTCOLOR=21,G$u.TIME=22,G$u}(G$B),G$Fl=function(G$T){function G$l(G$T){G$l.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new G$Tl,this._shaderValues=new G$bl,this._colliders=[],this._id=++G$l._uniqueIDCounter,this._transform=new G$al(this),this.name=G$T||"Sprite3D-"+G$l._nameNumberCounter++,this.layer=G$x.currentCreationLayer,this.active=!0}G$K(G$l,"laya.d3.core.Sprite3D",G$Ql);var G$w=G$l.prototype;return G$c.imps(G$w,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),G$w._setUrl=function(G$T){this._url=G$T},G$w._getGroup=function(){return this._group},G$w._setGroup=function(G$T){this._group=G$T},G$w._addChild3D=function(G$T){G$T.transform.parent=this.transform,this._hierarchyAnimator&&(!G$T._hierarchyAnimator&&G$T._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(G$T,!0,[G$T.name])),this._scene&&(G$T._setBelongScene(this._scene),this._activeInHierarchy&&G$T._active&&G$T._activeHierarchy())},G$w._removeChild3D=function(G$T){G$T.transform.parent=null,this._scene&&(this._activeInHierarchy&&G$T._active&&G$T._inActiveHierarchy(),G$T._setUnBelongScene()),this._hierarchyAnimator&&(G$T._hierarchyAnimator==this._hierarchyAnimator&&G$T._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(G$T,!1,[G$T.name]))},G$w._parseBaseCustomProps=function(G$T){var G$l=this.transform.localPosition;G$T.translate?(G$l.fromArray(G$T.translate),G$l.x*=100,G$l.y*=100,G$l.z*=100):G$l.elements.fill(0),this.transform.localPosition=G$l;var G$w=this.transform.localRotation;G$T.rotation?G$w.fromArray(G$T.rotation):G$w.fromArray([0,0,0,-1]),this.transform.localRotation=G$w;var G$u=this.transform.localScale;G$T.scale?G$u.fromArray(G$T.scale):G$u.elements.fill(1),this.transform.localScale=G$u;var G$p=G$T.layer;null!=G$p&&(this.layer=G$x.getLayerByNumber(G$p))},G$w._parseCustomComponent=function(G$T,G$l,G$w){for(var G$u in G$w){var G$p=G$w[G$u];switch(G$u){case"Animator":var G$D=this.addComponent(Animator);if(G$p.avatarPath)G$D.avatar=G$L.getRes(G$l[G$p.avatarPath]);else{var G$P=G$p.avatar;if(G$P){G$D.avatar=G$L.getRes(G$l[G$P.path]);var G$j=G$P.linkSprites;G$j&&G$T.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[G$D,G$j])}}for(var G$J=G$p.clipPaths,G$q=G$J.length,G$M=0;G$M<G$q;G$M++)G$D.addClip(G$L.getRes(G$l[G$J[G$M]]));G$D.clip=G$L.getRes(G$l[G$J[0]]);var G$z=G$p.playOnWake;void 0!==G$z&&(G$D.playOnWake=G$z);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var G$b=this.addComponent(SphereCollider);G$b.isTrigger=G$p.isTrigger;var G$K=G$b.center;G$K.fromArray(G$p.center),G$b.center=G$K,G$b.radius=G$p.radius;break;case"BoxCollider":var G$Y=this.addComponent(BoxCollider);G$Y.isTrigger=G$p.isTrigger,G$Y.center.fromArray(G$p.center);var G$t=G$Y.size;G$t.fromArray(G$p.size),G$Y.size=G$t;break;case"MeshCollider":this.addComponent(MeshCollider)}}},G$w._onRootNodeHierarchyLoaded=function(G$T,G$l){for(var G$w in G$l){for(var G$u=this,G$p=G$l[G$w],G$D=0,G$P=G$p.length;G$D<G$P;G$D++){var G$j=G$p[G$D];if(""===G$j)break;if(!(G$u=G$u.getChildByName(G$j)))break}G$u&&G$T.linkSprite3DToAvatarNode(G$w,G$u)}},G$w._setHierarchyAnimator=function(G$T,G$l){this._changeHierarchyAnimator(G$T);for(var G$w=0,G$u=this._childs.length;G$w<G$u;G$w++){var G$p=this._childs[G$w];G$p._hierarchyAnimator==G$l&&G$p._setHierarchyAnimator(G$T,G$l)}},G$w._clearHierarchyAnimator=function(G$T,G$l){this._changeHierarchyAnimator(G$l);for(var G$w=0,G$u=this._childs.length;G$w<G$u;G$w++){var G$p=this._childs[G$w];G$p._hierarchyAnimator==G$T&&G$p._clearHierarchyAnimator(G$T,G$l)}},G$w._getAnimatorToLinkSprite3D=function(G$T,G$l,G$w){var G$u=this.getComponentByType(Animator);if(G$u&&(G$u.avatar?G$u.avatar._version||G$T._setAnimatorToLinkAvatar(G$u,G$l):G$T._setAnimatorToLinkSprite3DNoAvatar(G$u,G$l,G$w)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){G$w.unshift(this._parent.name);var G$p=this._parent;G$p._hierarchyAnimator&&G$p._getAnimatorToLinkSprite3D(G$T,G$l,G$w)}},G$w._setAnimatorToLinkSprite3DNoAvatar=function(G$T,G$l,G$w){var G$u=0,G$p=0;for(G$u=0,G$p=G$T.getClipCount();G$u<G$p;G$u++)G$T._handleSpriteOwnersBySprite(G$u,G$l,G$w,this);for(G$u=0,G$p=this._childs.length;G$u<G$p;G$u++){var G$D=this._childs[G$u],G$P=G$w.length;G$w.push(G$D.name),G$D._setAnimatorToLinkSprite3DNoAvatar(G$T,G$l,G$w),G$w.splice(G$P,1)}},G$w._changeHierarchyAnimator=function(G$T){this._hierarchyAnimator=G$T},G$w._isLinkSpriteToAnimationNode=function(G$T,G$l,G$w){var G$u=G$T._avatarNodes.indexOf(G$l),G$p=G$T._cacheSpriteToNodesMap;if(G$w)this._transform.dummy=G$l.transform,G$T._cacheNodesToSpriteMap[G$u]=G$p.length,G$p.push(G$u);else{this._transform.dummy=null;var G$D=G$T._cacheNodesToSpriteMap[G$u];G$T._cacheNodesToSpriteMap[G$u]=null,G$p.splice(G$D,1)}},G$w._setBelongScene=function(G$T){this._scene=G$T;for(var G$l=0,G$w=this._childs.length;G$l<G$w;G$l++)this._childs[G$l]._setBelongScene(G$T)},G$w._setUnBelongScene=function(){this._scene=null;for(var G$T=0,G$l=this._childs.length;G$T<G$l;G$T++)this._childs[G$T]._setUnBelongScene()},G$w._activeHierarchy=function(){var G$T=0,G$l=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),G$T=0,G$l=this._colliders.length;G$T<G$l;G$T++)this._layer._addCollider(this._colliders[G$T]);for(this.event("activeinhierarchychanged",!0),G$T=0,G$l=this._childs.length;G$T<G$l;G$T++){var G$w=this._childs[G$T];G$w._active&&G$w._activeHierarchy()}},G$w._inActiveHierarchy=function(){var G$T=0,G$l=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),G$T=0,G$l=this._colliders.length;G$T<G$l;G$T++){var G$w=this._colliders[G$T];G$w._clearCollsionMap(),this._layer._removeCollider(G$w)}for(this.event("activeinhierarchychanged",!1),G$T=0,G$l=this._childs.length;G$T<G$l;G$T++){var G$u=this._childs[G$T];G$u._active&&G$u._inActiveHierarchy()}},G$w.addComponent=function(G$T){var G$l,G$w=this._componentsMap.indexOf(G$T);if(-1===G$w)G$l=[],this._componentsMap.push(G$T),this._typeComponentsIndices.push(G$l);else if(G$l=this._typeComponentsIndices[G$w],this._components[G$l[0]].isSingleton)throw new Error("无法单实例创建"+G$T+"组件，"+G$T+"组件已存在！");var G$u=G$p.getInstance(G$T);return G$l.push(this._components.length),this._components.push(G$u),G$u instanceof laya.d3.component.Script&&this._scripts.push(G$u),G$u._initialize(this),G$u},G$w._removeComponent=function(G$T,G$l){var G$w,G$u=0,G$p=this._typeComponentsIndices[G$T],G$D=G$p[G$l],G$P=this._components[G$D];for(G$P instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(G$P),1),G$p.splice(G$l,1),0===G$p.length&&(this._typeComponentsIndices.splice(G$T,1),this._componentsMap.splice(G$T,1)),G$u=0,G$w=this._componentsMap.length;G$u<G$w;G$u++)for(var G$j=(G$p=this._typeComponentsIndices[G$u]).length-1;0<=G$j;G$j--){var G$J=G$p[G$j];if(!(G$D<G$J))break;G$p[G$j]=--G$J}G$P._destroy()},G$w._clearSelfRenderObjects=function(){},G$w._addSelfRenderObjects=function(){},G$w._parseCustomProps=function(G$T,G$l,G$w,G$u){},G$w._updateChilds=function(G$T){var G$l=this._childs.length;if(0!==G$l)for(var G$w=0;G$w<G$l;++G$w)this._childs[G$w]._update(G$T)},G$w._getSortID=function(G$T,G$l){return 1e3*G$l.id+G$T._getVertexBuffer().vertexDeclaration.id},G$w._update=function(G$T){(G$T.owner=this)._activeInHierarchy&&(this._updateComponents(G$T),this._lateUpdateComponents(G$T),G$s.spriteCount++,this._childs.length&&this._updateChilds(G$T))},G$w.getProjectionViewWorldMatrix=function(G$T){return G$Tl.multiply(G$T,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},G$w.loadHierarchy=function(G$T){this.addChild(laya.d3.core.Sprite3D.load(G$T))},G$w.addChildAt=function(G$T,G$l){if(!(G$T instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!G$T||this.destroyed||G$T===this)return G$T;if(G$T.zOrder&&this._set$P("hasZorder",!0),0<=G$l&&G$l<=this._childs.length){if(G$T._parent===this){var G$w=this.getChildIndex(G$T);this._childs.splice(G$w,1),this._childs.splice(G$l,0,G$T),this.conchModel&&(this.conchModel.removeChild(G$T.conchModel),this.conchModel.addChildAt(G$T.conchModel,G$l)),this._childChanged()}else G$T.parent&&G$T.parent.removeChild(G$T),this._childs===G$q.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(G$l,0,G$T),this.conchModel&&this.conchModel.addChildAt(G$T.conchModel,G$l),(G$T.parent=this)._addChild3D(G$T);return G$T}throw new Error("appendChildAt:The index is out of bounds")},G$w.addChild=function(G$T){if(!(G$T instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!G$T||this.destroyed||G$T===this)return G$T;if(G$T.zOrder&&this._set$P("hasZorder",!0),G$T._parent===this){var G$l=this.getChildIndex(G$T);G$l!==this._childs.length-1&&(this._childs.splice(G$l,1),this._childs.push(G$T),this.conchModel&&(this.conchModel.removeChild(G$T.conchModel),this.conchModel.addChildAt(G$T.conchModel,this._childs.length-1)),this._childChanged())}else G$T.parent&&G$T.parent.removeChild(G$T),this._childs===G$q.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(G$T),this.conchModel&&this.conchModel.addChildAt(G$T.conchModel,this._childs.length-1),(G$T.parent=this)._childChanged(),this._addChild3D(G$T);return G$T},G$w.removeChildAt=function(G$T){var G$l=this.getChildAt(G$T);return G$l&&(this._removeChild3D(G$l),this._childs.splice(G$T,1),this.conchModel&&this.conchModel.removeChild(G$l.conchModel),G$l.parent=null),G$l},G$w.removeChildren=function(G$T,G$l){if(void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=2147483647),this._childs&&0<this._childs.length){var G$w=this._childs;if(0===G$T&&G$D<=G$l){var G$u=G$w;this._childs=G$q.ARRAY_EMPTY}else G$u=G$w.splice(G$T,G$l-G$T);for(var G$p=0,G$D=G$u.length;G$p<G$D;G$p++)this._removeChild3D(G$u[G$p]),G$u[G$p].parent=null,this.conchModel&&this.conchModel.removeChild(G$u[G$p].conchModel)}return this},G$w.onAsynLoaded=function(G$T,G$l,G$w){var G$u=G$l[0];if("Sprite3D"!==G$u.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var G$p=G$l[1];G$Al._createNodeByJson(this,G$u,this,G$p),this.event("hierarchyloaded",[this]),this.__loaded=!0},G$w.cloneTo=function(G$T){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var G$l=G$T;G$l.name=this.name,G$l._destroyed=this._destroyed,G$l.timer=this.timer,G$l._$P=this._$P,G$l.active=this._active;var G$w=G$l.transform.localPosition;this.transform.localPosition.cloneTo(G$w),G$l.transform.localPosition=G$w;var G$u=G$l.transform.localRotation;this.transform.localRotation.cloneTo(G$u),G$l.transform.localRotation=G$u;var G$p=G$l.transform.localScale;this.transform.localScale.cloneTo(G$p),G$l.transform.localScale=G$p,G$l.isStatic=this.isStatic;var G$D=0,G$P=0;for(G$D=0,G$P=this._componentsMap.length;G$D<G$P;G$D++){var G$j=G$l.addComponent(this._componentsMap[G$D]);this._components[G$D]._cloneTo(G$j)}for(G$D=0,G$P=this._childs.length;G$D<G$P;G$D++)G$l.addChild(this._childs[G$D].clone());var G$J=G$l.getComponentByType(Animator);if(G$J){var G$q=G$J._linkSpritesData;if(G$q)for(var G$M in G$q){for(var G$z=G$q[G$M],G$b=G$l,G$K=0,G$Y=G$z.length;G$K<G$Y&&(G$b=G$b.getChildByName(G$z[G$K]));G$K++);if(G$b){var G$t=G$J._avatarNodeMap[G$M];G$b._isLinkSpriteToAnimationNode(G$J,G$t,!0)}}}},G$w.clone=function(){var G$T=new this.constructor;return this.cloneTo(G$T),G$T},G$w.destroy=function(G$T){if(void 0===G$T&&(G$T=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,G$T);var G$l,G$w=0;for(G$w=0,G$l=this._components.length;G$w<G$l;G$w++)this._components[G$w]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,G$L.clearRes(this.url),this.loaded||G$Ll._cancelLoadByUrl(this.url)}},G$w._handleSpriteToAvatar=function(G$T,G$l){G$T._avatarNodes;var G$w=G$T._avatarNodeMap[this.name];G$w&&G$w.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(G$T,G$w,G$l)},G$w._setAnimatorToLinkAvatar=function(G$T,G$l){this._handleSpriteToAvatar(G$T,G$l);for(var G$w=0,G$u=this._childs.length;G$w<G$u;G$w++){this._childs[G$w]._setAnimatorToLinkAvatar(G$T,G$l)}},G$Y(0,G$w,"activeInHierarchy",function(){return this._activeInHierarchy}),G$Y(0,G$w,"_loaded",null,function(G$T){this.__loaded=G$T}),G$Y(0,G$w,"active",function(){return this._active},function(G$T){this._active!==G$T&&(this._active=G$T,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(G$T?this._activeHierarchy():this._inActiveHierarchy()))}),G$Y(0,G$w,"componentsCount",function(){return this._components.length}),G$Y(0,G$w,"loaded",function(){return this.__loaded}),G$Y(0,G$w,"id",function(){return this._id}),G$Y(0,G$w,"url",function(){return this._url}),G$Y(0,G$w,"layer",function(){return this._layer},function(G$T){if(this._layer!==G$T){if(!G$T)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var G$l=0,G$w=this._colliders.length;if(this._layer)for(G$l=0;G$l<G$w;G$l++)this._layer._removeCollider(this._colliders[G$l]);for(G$l=0;G$l<G$w;G$l++)G$T._addCollider(this._colliders[G$l])}this._layer=G$T,this.event("layerchanged",G$T)}}),G$Y(0,G$w,"scene",function(){return this._scene}),G$Y(0,G$w,"transform",function(){return this._transform}),G$l.instantiate=function(G$T,G$l,G$w,G$u,G$p){void 0===G$w&&(G$w=!0);var G$D=G$T.clone();G$l&&G$l.addChild(G$D);var G$P=G$D.transform;if(G$w){var G$j=G$P.worldMatrix;G$T.transform.worldMatrix.cloneTo(G$j),G$P.worldMatrix=G$j}else G$u&&(G$P.position=G$u),G$p&&(G$P.rotation=G$p);return G$D},G$l.load=function(G$T){return G$c.loader.create(G$T,null,null,G$l)},G$l.WORLDMATRIX=0,G$l.MVPMATRIX=1,G$l._uniqueIDCounter=0,G$l._nameNumberCounter=0,G$l}(),G$Ol=function(G$T){function G$M(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],G$M.__super.call(this),!G$T||!G$l)throw"Shader Error";this._id=++G$M._count,this._vs=G$T,this._ps=G$l,this._attributeMap=G$w,this._sceneUniformMap=G$u,this._cameraUniformMap=G$p,this._spriteUniformMap=G$D,this._materialUniformMap=G$P,this._renderElementUniformMap=G$j,this._precompile=G$J,this._define=G$q,this._precompile&&G$M.extCompileObj&&G$M.extCompileFunc?G$M.extCompileFunc.call(G$M.extCompileObj,G$T,G$l,G$q):this.recreateResource()}G$K(G$M,"laya.d3.shader.Shader3D",G$w);var G$l=G$M.prototype;return G$l.recreateResource=function(){G$v.now();this._compile(),this.completeCreate(),this.memorySize=0},G$l.disposeResource=function(){G$e.mainContext.deleteShader(this._vshader),G$e.mainContext.deleteShader(this._pshader),G$e.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},G$l._compile=function(){if(!G$e.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var G$T=[this._vs,this._ps],G$l=G$e.mainContext;if(this._program=G$l.createProgram(),this._vshader=G$M._createShader(G$l,G$T[0],35633),this._pshader=G$M._createShader(G$l,G$T[1],35632),G$l.attachShader(this._program,this._vshader),G$l.attachShader(this._program,this._pshader),G$l.linkProgram(this._program),!G$t.isConchApp&&G$sl.debugMode&&!G$l.getProgramParameter(this._program,35714))throw G$l.getProgramInfoLog(this._program);var G$w,G$u=0,G$p=0,G$D=0;for(G$D=G$t.isConchApp?G$l.getProgramParameterEx(this._vs,this._ps,"",35721):G$l.getProgramParameter(this._program,35721),G$u=0;G$u<G$D;G$u++){var G$P=null;G$w={vartype:"attribute",ivartype:0,attrib:G$P=G$t.isConchApp?G$l.getActiveAttribEx(this._vs,this._ps,"",G$u):G$l.getActiveAttrib(this._program,G$u),location:G$l.getAttribLocation(this._program,G$P.name),name:G$P.name,type:G$P.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(G$w)}var G$j=0;for(G$j=G$t.isConchApp?G$l.getProgramParameterEx(this._vs,this._ps,"",35718):G$l.getProgramParameter(this._program,35718),G$u=0;G$u<G$j;G$u++){var G$J=null;G$J=G$t.isConchApp?G$l.getActiveUniformEx(this._vs,this._ps,"",G$u):G$l.getActiveUniform(this._program,G$u),0<(G$w={vartype:"uniform",ivartype:1,attrib:G$P,location:G$l.getUniformLocation(this._program,G$J.name),name:G$J.name,type:G$J.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(G$w.name=G$w.name.substr(0,G$w.name.length-3),G$w.isArray=!0,G$w.location=G$l.getUniformLocation(this._program,G$w.name)),this._uniformParams.push(G$w)}for(G$u=0,G$p=this._attributeParams.length;G$u<G$p;G$u++)(G$w=this._attributeParams[G$u]).indexOfParams=G$u,G$w.index=1,G$w.value=[G$w.location,null],G$w.codename=G$w.name,G$w.name=null!=this._attributeMap[G$w.codename]?this._attributeMap[G$w.codename]:G$w.codename,this._attributeParamsMap.push(G$w.name),this._attributeParamsMap.push(G$w),G$w._this=this,G$w.uploadedValue=[],G$w.fun=this._attribute;for(G$u=0,G$p=this._uniformParams.length;G$u<G$p;G$u++)switch((G$w=this._uniformParams[G$u]).indexOfParams=G$u,G$w.index=1,G$w.value=[G$w.location,null],G$w.codename=G$w.name,null!=this._sceneUniformMap[G$w.codename]?(G$w.name=this._sceneUniformMap[G$w.codename],this._sceneUniformParamsMap.push(G$w.name),this._sceneUniformParamsMap.push(G$w)):null!=this._cameraUniformMap[G$w.codename]?(G$w.name=this._cameraUniformMap[G$w.codename],this._cameraUniformParamsMap.push(G$w.name),this._cameraUniformParamsMap.push(G$w)):null!=this._spriteUniformMap[G$w.codename]?(G$w.name=this._spriteUniformMap[G$w.codename],this._spriteUniformParamsMap.push(G$w.name),this._spriteUniformParamsMap.push(G$w)):null!=this._materialUniformMap[G$w.codename]?(G$w.name=this._materialUniformMap[G$w.codename],this._materialUniformParamsMap.push(G$w.name),this._materialUniformParamsMap.push(G$w)):null!=this._renderElementUniformMap[G$w.codename]?(G$w.name=this._renderElementUniformMap[G$w.codename],this._renderElementUniformParamsMap.push(G$w.name),this._renderElementUniformParamsMap.push(G$w)):console.log("Shader:can't find uinform name:"+G$w.codename+" in shader file."),G$w._this=this,G$w.uploadedValue=[],G$w.type){case 5124:G$w.fun=G$w.isArray?this._uniform1iv:this._uniform1i;break;case 5126:G$w.fun=G$w.isArray?this._uniform1fv:this._uniform1f;break;case 35664:G$w.fun=G$w.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:G$w.fun=G$w.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:G$w.fun=G$w.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:G$w.fun=this._uniform_sampler2D;break;case 35680:G$w.fun=this._uniform_samplerCube;break;case 35676:G$w.fun=this._uniformMatrix4fv;break;case 35670:G$w.fun=this._uniform1i;break;case 35674:G$w.fun=this._uinformMatrix2fv;break;case 35675:G$w.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},G$l._attribute=function(G$T,G$l){var G$w=G$e.mainContext,G$u=G$j._enableAtributes,G$p=G$T.location;return G$u[G$p]||G$w.enableVertexAttribArray(G$p),G$w.vertexAttribPointer(G$p,G$l[0],G$l[1],G$l[2],G$l[3],G$l[4]),G$u[G$p]=G$j._bindVertexBuffer,1},G$l._uniform1f=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l?(G$e.mainContext.uniform1f(G$T.location,G$w[0]=G$l),1):0},G$l._uniform1fv=function(G$T,G$l){if(G$l.length<4){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]||G$w[3]!==G$l[3]?(G$e.mainContext.uniform1fv(G$T.location,G$l),G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2],G$w[3]=G$l[3],1):0}return G$e.mainContext.uniform1fv(G$T.location,G$l),1},G$l._uniform_vec2=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]?(G$e.mainContext.uniform2f(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1]),1):0},G$l._uniform_vec2v=function(G$T,G$l){if(G$l.length<2){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]||G$w[3]!==G$l[3]?(G$e.mainContext.uniform2fv(G$T.location,G$l),G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2],G$w[3]=G$l[3],1):0}return G$e.mainContext.uniform2fv(G$T.location,G$l),1},G$l._uniform_vec3=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]?(G$e.mainContext.uniform3f(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2]),1):0},G$l._uniform_vec3v=function(G$T,G$l){return G$e.mainContext.uniform3fv(G$T.location,G$l),1},G$l._uniform_vec4=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]||G$w[3]!==G$l[3]?(G$e.mainContext.uniform4f(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2],G$w[3]=G$l[3]),1):0},G$l._uniform_vec4v=function(G$T,G$l){return G$e.mainContext.uniform4fv(G$T.location,G$l),1},G$l._uniformMatrix2fv=function(G$T,G$l){return G$e.mainContext.uniformMatrix2fv(G$T.location,!1,G$l),1},G$l._uniformMatrix3fv=function(G$T,G$l){return G$e.mainContext.uniformMatrix3fv(G$T.location,!1,G$l),1},G$l._uniformMatrix4fv=function(G$T,G$l){return G$e.mainContext.uniformMatrix4fv(G$T.location,!1,G$l),1},G$l._uinformMatrix2fv=function(G$T,G$l){return G$e.mainContext.uniformMatrix2fv(G$T.location,!1,G$l),1},G$l._uinformMatrix3fv=function(G$T,G$l){return G$e.mainContext.uniformMatrix3fv(G$T.location,!1,G$l),1},G$l._uniform1i=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l?(G$e.mainContext.uniform1i(G$T.location,G$w[0]=G$l),1):0},G$l._uniform1iv=function(G$T,G$l){return G$e.mainContext.uniform1iv(G$T.location,G$l),1},G$l._uniform_ivec2=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]?(G$e.mainContext.uniform2i(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1]),1):0},G$l._uniform_ivec2v=function(G$T,G$l){return G$e.mainContext.uniform2iv(G$T.location,G$l),1},G$l._uniform_vec3i=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]?(G$e.mainContext.uniform3i(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2]),1):0},G$l._uniform_vec3vi=function(G$T,G$l){return G$e.mainContext.uniform3iv(G$T.location,G$l),1},G$l._uniform_vec4i=function(G$T,G$l){var G$w=G$T.uploadedValue;return G$w[0]!==G$l[0]||G$w[1]!==G$l[1]||G$w[2]!==G$l[2]||G$w[3]!==G$l[3]?(G$e.mainContext.uniform4i(G$T.location,G$w[0]=G$l[0],G$w[1]=G$l[1],G$w[2]=G$l[2],G$w[3]=G$l[3]),1):0},G$l._uniform_vec4vi=function(G$T,G$l){return G$e.mainContext.uniform4iv(G$T.location,G$l),1},G$l._uniform_sampler2D=function(G$T,G$l){var G$w=G$l.source||G$l.defaulteTexture.source,G$u=G$e.mainContext,G$p=G$T.uploadedValue;if(null!=G$p[0])return G$u.activeTexture(G$M._TEXTURES[G$p[0]]),G$w&&G$y.bindTexture(G$u,3553,G$w),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return G$p[0]=this._curActTexIndex,G$u.uniform1i(G$T.location,this._curActTexIndex),G$u.activeTexture(G$M._TEXTURES[this._curActTexIndex]),G$w&&G$y.bindTexture(G$u,3553,G$w),this._curActTexIndex++,1},G$l._uniform_samplerCube=function(G$T,G$l){var G$w=G$l.source||G$l.defaulteTexture.source,G$u=G$e.mainContext,G$p=G$T.uploadedValue;if(null!=G$p[0])return G$u.activeTexture(G$M._TEXTURES[G$p[0]]),G$w?G$y.bindTexture(G$u,34067,G$w):G$y.bindTexture(G$u,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return G$p[0]=this._curActTexIndex,G$u.uniform1i(G$T.location,this._curActTexIndex),G$u.activeTexture(G$M._TEXTURES[this._curActTexIndex]),G$w?G$y.bindTexture(G$u,34067,G$w):G$y.bindTexture(G$u,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},G$l._noSetValue=function(G$T){console.log("no....:"+G$T.name)},G$l.bind=function(){return G$w.activeShader=this,(G$w.bindShader=this).activeResource(),G$y.UseProgram(this._program)},G$l.uploadAttributes=function(G$T,G$l){for(var G$w,G$u,G$p=0,G$D=0,G$P=this._attributeParamsMap.length;G$D<G$P;G$D+=2)G$u=this._attributeParamsMap[G$D+1],null!=(G$w=G$T[this._attributeParamsMap[G$D]])&&(G$l&&G$l[G$u.name]&&G$l[G$u.name].bind(),G$p+=G$u.fun.call(this,G$u,G$w));G$s.shaderCall+=G$p},G$l.uploadAttributesX=function(G$T,G$l){for(var G$w,G$u,G$p=0,G$D=0,G$P=this._attributeParamsMap.length;G$D<G$P;G$D+=2)G$u=this._attributeParamsMap[G$D+1],null!=(G$w=G$T[this._attributeParamsMap[G$D]])&&(G$l._bind(),G$p+=G$u.fun.call(this,G$u,G$w));G$s.shaderCall+=G$p},G$l.uploadSceneUniforms=function(G$T){for(var G$l,G$w,G$u=0,G$p=0,G$D=this._sceneUniformParamsMap.length;G$p<G$D;G$p+=2)G$w=this._sceneUniformParamsMap[G$p+1],null!=(G$l=G$T[this._sceneUniformParamsMap[G$p]])&&(G$u+=G$w.fun.call(this,G$w,G$l));G$s.shaderCall+=G$u},G$l.uploadCameraUniforms=function(G$T){for(var G$l,G$w,G$u=0,G$p=0,G$D=this._cameraUniformParamsMap.length;G$p<G$D;G$p+=2)G$w=this._cameraUniformParamsMap[G$p+1],null!=(G$l=G$T[this._cameraUniformParamsMap[G$p]])&&(G$u+=G$w.fun.call(this,G$w,G$l));G$s.shaderCall+=G$u},G$l.uploadSpriteUniforms=function(G$T){for(var G$l,G$w,G$u=0,G$p=0,G$D=this._spriteUniformParamsMap.length;G$p<G$D;G$p+=2)G$w=this._spriteUniformParamsMap[G$p+1],null!=(G$l=G$T[this._spriteUniformParamsMap[G$p]])&&(G$u+=G$w.fun.call(this,G$w,G$l));G$s.shaderCall+=G$u},G$l.uploadMaterialUniforms=function(G$T){for(var G$l,G$w,G$u=0,G$p=0,G$D=this._materialUniformParamsMap.length;G$p<G$D;G$p+=2)G$w=this._materialUniformParamsMap[G$p+1],null!=(G$l=G$T[this._materialUniformParamsMap[G$p]])&&(G$u+=G$w.fun.call(this,G$w,G$l));G$s.shaderCall+=G$u},G$l.uploadRenderElementUniforms=function(G$T){for(var G$l,G$w,G$u=0,G$p=0,G$D=this._renderElementUniformParamsMap.length;G$p<G$D;G$p+=2)G$w=this._renderElementUniformParamsMap[G$p+1],null!=(G$l=G$T[this._renderElementUniformParamsMap[G$p]])&&(G$u+=G$w.fun.call(this,G$w,G$l));G$s.shaderCall+=G$u},G$M.create=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){return new G$M(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q)},G$M.addInclude=function(G$T,G$l){G$W.addInclude(G$T,G$l)},G$M._createShader=function(G$T,G$l,G$w){var G$u=G$T.createShader(G$w);if(G$T.shaderSource(G$u,G$l),G$T.compileShader(G$u),G$sl.debugMode&&!G$T.getShaderParameter(G$u,35713))throw G$T.getShaderInfoLog(G$u);return G$u},G$M.PERIOD_RENDERELEMENT=0,G$M.PERIOD_MATERIAL=1,G$M.PERIOD_SPRITE=2,G$M.PERIOD_CAMERA=3,G$M.PERIOD_SCENE=4,G$M._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],G$M._count=0,G$M._preCompile=!1,G$M.extCompileFunc=null,G$M.extCompileObj=null,G$z(G$M,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new G$r}]),G$M}(),G$$l=function(G$j){function G$J(){this._transformUV=null,G$J.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new G$Pl(.6,.6,.6)),this._setColor(10,new G$Pl(1,1,1)),this._setColor(11,new G$jl(1,1,1,8)),this._setColor(12,new G$Pl(1,1,1)),this._setColor(7,new G$jl(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new G$jl(1,1,0,0)),this.renderMode=1}G$K(G$J,"laya.d3.core.material.StandardMaterial",G$j);var G$T=G$J.prototype;return G$T.disableLight=function(){this._addDisablePublicShaderDefine(G$sl.SHADERDEFINE_POINTLIGHT|G$sl.SHADERDEFINE_SPOTLIGHT|G$sl.SHADERDEFINE_DIRECTIONLIGHT)},G$T.disableFog=function(){this._addDisablePublicShaderDefine(G$sl.SHADERDEFINE_FOG)},G$T.onAsynLoaded=function(G$T,G$l,G$w){var G$u=G$l[0];if(G$u.version)G$j.prototype.onAsynLoaded.call(this,G$T,G$l,G$w);else{var G$p=G$l[1],G$D=G$u.props;for(var G$P in G$D)this[G$P]=G$D[G$P];G$J._parseStandardMaterial(G$p,this,G$u),this._endLoaded()}},G$T.cloneTo=function(G$T){G$j.prototype.cloneTo.call(this,G$T);var G$l=G$T;this._transformUV&&(G$l._transformUV=this._transformUV.clone())},G$Y(0,G$T,"ambientColor",function(){return this._getColor(9)},function(G$T){this._setColor(9,G$T)}),G$Y(0,G$T,"ambientTexture",function(){return this._getTexture(5)},function(G$T){G$T?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,G$T)}),G$Y(0,G$T,"renderMode",null,function(G$T){switch(G$T){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$J.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(G$T)}),G$Y(0,G$T,"reflectColor",function(){return this._getColor(12)},function(G$T){this._setColor(12,G$T)}),G$Y(0,G$T,"tilingOffset",function(){return this._getColor(15)},function(G$T){if(G$T){var G$l=G$T.elements;1!=G$l[0]||1!=G$l[1]||0!=G$l[2]||0!=G$l[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,G$T)}),G$Y(0,G$T,"albedo",function(){return this._getColor(7)},function(G$T){this._setColor(7,G$T)}),G$Y(0,G$T,"diffuseColor",function(){return this._getColor(10)},function(G$T){this._setColor(10,G$T)}),G$Y(0,G$T,"albedoColor",function(){return this._getColor(7)},function(G$T){this._setColor(7,G$T)}),G$Y(0,G$T,"specularColor",function(){return this._getColor(11)},function(G$T){this._setColor(11,G$T)}),G$Y(0,G$T,"diffuseTexture",function(){return this._getTexture(1)},function(G$T){G$T?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,G$T)}),G$Y(0,G$T,"normalTexture",function(){return this._getTexture(2)},function(G$T){G$T?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,G$T)}),G$Y(0,G$T,"specularTexture",function(){return this._getTexture(3)},function(G$T){G$T?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,G$T)}),G$Y(0,G$T,"emissiveTexture",function(){return this._getTexture(4)},function(G$T){G$T?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,G$T)}),G$Y(0,G$T,"reflectTexture",function(){return this._getTexture(6)},function(G$T){G$T?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,G$T)}),G$Y(0,G$T,"transformUV",function(){return this._transformUV},function(G$T){this._transformUV=G$T,this._setMatrix4x4(13,G$T.matrix),G$T?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,G$T.matrix.elements,0)}),G$J.__init__=function(){G$J.SHADERDEFINE_DIFFUSEMAP=G$J.shaderDefines.registerDefine("DIFFUSEMAP"),G$J.SHADERDEFINE_NORMALMAP=G$J.shaderDefines.registerDefine("NORMALMAP"),G$J.SHADERDEFINE_SPECULARMAP=G$J.shaderDefines.registerDefine("SPECULARMAP"),G$J.SHADERDEFINE_EMISSIVEMAP=G$J.shaderDefines.registerDefine("EMISSIVEMAP"),G$J.SHADERDEFINE_AMBIENTMAP=G$J.shaderDefines.registerDefine("AMBIENTMAP"),G$J.SHADERDEFINE_REFLECTMAP=G$J.shaderDefines.registerDefine("REFLECTMAP"),G$J.SHADERDEFINE_UVTRANSFORM=G$J.shaderDefines.registerDefine("UVTRANSFORM"),G$J.SHADERDEFINE_TILINGOFFSET=G$J.shaderDefines.registerDefine("TILINGOFFSET"),G$J.SHADERDEFINE_ADDTIVEFOG=G$J.shaderDefines.registerDefine("ADDTIVEFOG")},G$J.load=function(G$T){return G$c.loader.create(G$T,null,null,G$J)},G$J._parseStandardMaterial=function(G$T,G$l,G$w){var G$u=G$w.customProps,G$p=G$u.ambientColor;G$l.ambientColor=new G$Pl(G$p[0],G$p[1],G$p[2]);var G$D=G$u.diffuseColor;G$l.diffuseColor=new G$Pl(G$D[0],G$D[1],G$D[2]);var G$P=G$u.specularColor;G$l.specularColor=new G$jl(G$P[0],G$P[1],G$P[2],G$P[3]);var G$j=G$u.reflectColor;G$l.reflectColor=new G$Pl(G$j[0],G$j[1],G$j[2]);var G$J=G$u.albedoColor;G$J&&(G$l.albedo=new G$jl(G$J[0],G$J[1],G$J[2],G$J[3]));var G$q=G$u.diffuseTexture.texture2D;G$q&&(G$l.diffuseTexture=G$L.getRes(G$T[G$q]));var G$M=G$u.normalTexture.texture2D;G$M&&(G$l.normalTexture=G$L.getRes(G$T[G$M]));var G$z=G$u.specularTexture.texture2D;G$z&&(G$l.specularTexture=G$L.getRes(G$T[G$z]));var G$b=G$u.emissiveTexture.texture2D;G$b&&(G$l.emissiveTexture=G$L.getRes(G$T[G$b]));var G$K=G$u.ambientTexture.texture2D;G$K&&(G$l.ambientTexture=G$L.getRes(G$T[G$K]));var G$Y=G$u.reflectTexture.texture2D;G$Y&&(G$l.reflectTexture=G$L.getRes(G$T[G$Y]))},G$J.RENDERMODE_OPAQUE=1,G$J.RENDERMODE_OPAQUEDOUBLEFACE=2,G$J.RENDERMODE_CUTOUT=3,G$J.RENDERMODE_CUTOUTDOUBLEFACE=4,G$J.RENDERMODE_TRANSPARENT=13,G$J.RENDERMODE_TRANSPARENTDOUBLEFACE=14,G$J.RENDERMODE_ADDTIVE=15,G$J.RENDERMODE_ADDTIVEDOUBLEFACE=16,G$J.RENDERMODE_DEPTHREAD_TRANSPARENT=5,G$J.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,G$J.RENDERMODE_DEPTHREAD_ADDTIVE=7,G$J.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,G$J.RENDERMODE_NONDEPTH_TRANSPARENT=9,G$J.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,G$J.RENDERMODE_NONDEPTH_ADDTIVE=11,G$J.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,G$J.SHADERDEFINE_DIFFUSEMAP=0,G$J.SHADERDEFINE_NORMALMAP=0,G$J.SHADERDEFINE_SPECULARMAP=0,G$J.SHADERDEFINE_EMISSIVEMAP=0,G$J.SHADERDEFINE_AMBIENTMAP=0,G$J.SHADERDEFINE_REFLECTMAP=0,G$J.SHADERDEFINE_UVTRANSFORM=0,G$J.SHADERDEFINE_TILINGOFFSET=0,G$J.SHADERDEFINE_ADDTIVEFOG=0,G$J.DIFFUSETEXTURE=1,G$J.NORMALTEXTURE=2,G$J.SPECULARTEXTURE=3,G$J.EMISSIVETEXTURE=4,G$J.AMBIENTTEXTURE=5,G$J.REFLECTTEXTURE=6,G$J.ALBEDO=7,G$J.UVANIAGE=8,G$J.MATERIALAMBIENT=9,G$J.MATERIALDIFFUSE=10,G$J.MATERIALSPECULAR=11,G$J.MATERIALREFLECT=12,G$J.UVMATRIX=13,G$J.UVAGE=14,G$J.TILINGOFFSET=15,G$z(G$J,["defaultMaterial",function(){var G$T=new G$J;return G$T.lock=!0,this.defaultMaterial=G$T},"shaderDefines",function(){return this.shaderDefines=new G$Ml(G$ol.shaderDefines)}]),G$J}(G$ol),G$Zl=function(G$T){function G$P(G$T,G$l,G$w,G$u,G$p){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===G$w&&(G$w=35044),void 0===G$u&&(G$u=!1),G$P.__super.call(this),this._indexType=G$T,this._indexCount=G$l,this._bufferUsage=G$w,this._bufferType=34963,this._canRead=G$u;var G$D;if("ushort"==G$T)this._indexTypeByteCount=2;else{if("ubyte"!=G$T)throw new Error("unidentification index type.");this._indexTypeByteCount=1}G$D=this._indexTypeByteCount*G$l,this._byteLength=G$D,this._bind(),G$j._gl.bufferData(this._bufferType,G$D,this._bufferUsage),this.uri=G$p,G$u?("ushort"==G$T?this._buffer=new Uint16Array(G$l):"ubyte"==G$T&&(this._buffer=new Uint8Array(G$l)),this.memorySize=2*G$D):this.memorySize=G$D}G$K(G$P,"laya.d3.graphics.IndexBuffer3D",G$T);var G$l=G$P.prototype;return G$l.setData=function(G$T,G$l,G$w,G$u){void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=4294967295);var G$p=0;if("ushort"==this._indexType?(G$p=2,0===G$w&&4294967295===G$u||(G$T=new Uint16Array(G$T.buffer,G$w*G$p,G$u))):"ubyte"==this._indexType&&(G$p=1,0===G$w&&4294967295===G$u||(G$T=new Uint8Array(G$T.buffer,G$w*G$p,G$u))),this._bind(),G$j._gl.bufferSubData(this._bufferType,G$l*G$p,G$T),this._canRead)if(0!==G$l||0!==G$w||4294967295!==G$u){var G$D=this._buffer.length-G$l;G$D<G$u&&(G$u=G$D);for(var G$P=0;G$P<G$u;G$P++)this._buffer[G$l+G$P]=G$T[G$P]}else this._buffer=G$T},G$l.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},G$l.disposeResource=function(){G$T.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},G$Y(0,G$l,"indexType",function(){return this._indexType}),G$Y(0,G$l,"indexTypeByteCount",function(){return this._indexTypeByteCount}),G$Y(0,G$l,"indexCount",function(){return this._indexCount}),G$Y(0,G$l,"canRead",function(){return this._canRead}),G$P.INDEXTYPE_UBYTE="ubyte",G$P.INDEXTYPE_USHORT="ushort",G$P.create=function(G$T,G$l,G$w,G$u,G$p){return void 0===G$w&&(G$w=35044),void 0===G$u&&(G$u=!1),new G$P(G$T,G$l,G$w,G$u,G$p)},G$P}(G$j),G$Hl=function(G$D){function G$P(G$T,G$l,G$w,G$u,G$p){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===G$u&&(G$u=!1),G$P.__super.call(this),this._vertexDeclaration=G$T,this._vertexCount=G$l,this._bufferUsage=G$w,this._bufferType=34962,this._canRead=G$u,this.uri=G$p,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*G$l,this._bind(),G$j._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),G$u&&(this._buffer=new Float32Array(this._byteLength/4))}G$K(G$P,"laya.d3.graphics.VertexBuffer3D",G$D);var G$T=G$P.prototype;return G$T.bindWithIndexBuffer=function(G$T){G$T&&G$T._bind(),this._bind()},G$T.setData=function(G$T,G$l,G$w,G$u){if(void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=4294967295),0===G$w&&4294967295===G$u||(G$T=new Float32Array(G$T.buffer,4*G$w,G$u)),this._bind(),G$j._gl.bufferSubData(this._bufferType,4*G$l,G$T),this._canRead)if(0!==G$l||0!==G$w||4294967295!==G$u){var G$p=this._buffer.length-G$l;G$p<G$u&&(G$u=G$p);for(var G$D=0;G$D<G$u;G$D++)this._buffer[G$l+G$D]=G$T[G$D]}else this._buffer=G$T},G$T.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},G$T.disposeResource=function(){for(var G$T=G$e.mainContext,G$l=this._vertexDeclaration.getVertexElements(),G$w=G$j._enableAtributes,G$u=0,G$p=G$l.length;G$u<G$p;G$u++)G$w[G$u]===this._glBuffer&&(G$T.disableVertexAttribArray(G$u),G$w[G$u]=null);G$D.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},G$Y(0,G$T,"vertexDeclaration",function(){return this._vertexDeclaration}),G$Y(0,G$T,"vertexCount",function(){return this._vertexCount}),G$Y(0,G$T,"canRead",function(){return this._canRead}),G$P.create=function(G$T,G$l,G$w,G$u,G$p){return void 0===G$w&&(G$w=35044),void 0===G$u&&(G$u=!1),new G$P(G$T,G$l,G$w,G$u,G$p)},G$P}(G$j),G$Xl=function(G$T){function G$W(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,G$W.__super.call(this),this._type=3553}G$K(G$W,"laya.d3.resource.DataTexture2D",G$el);var G$l=G$W.prototype;return G$l.genDebugMipmaps=function(){var G$T=[];return G$T.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),G$T.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),G$T.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),G$T.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),G$T.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),G$T.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),G$T.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),G$T.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),G$T.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),G$T.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),G$T},G$l._onTextureLoaded=function(G$T){},G$l._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var G$T=G$e.mainContext,G$l=this._source=G$T.createTexture(),G$w=this._width,G$u=this._height,G$p=G$y.curBindTexTarget,G$D=G$y.curBindTexValue,G$P=!1;if(G$y.bindTexture(G$T,this._type,G$l),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var G$j=0;G$T.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var G$J=0;G$J<this._mipmaps.length;G$J++){if(this._mipmaps[G$J].byteLength!=G$q*G$M*4)throw"mipmap size error  level:"+G$J;G$T.texSubImage2D(this._type,0,G$W.simLodRect[G$j++],G$W.simLodRect[G$j++],G$W.simLodRect[G$j++],G$W.simLodRect[G$j++],6408,5121,new Uint8Array(this._mipmaps[G$J]))}this.minFifter=9729,this.magFifter=9729}else{var G$q=this._width,G$M=this._height;for(G$j=0,G$T.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),G$J=0;G$J<this._mipmaps.length;G$J++){if(this._mipmaps[G$J].byteLength!=G$q*G$M*4)throw"mipmap size error  level:"+G$J;G$T.texImage2D(this._type,G$J,6408,G$q,G$M,0,6408,5121,new Uint8Array(this._mipmaps[G$J])),(G$q/=2)<1&&(G$q=1),(G$M/=2)<1&&(G$M=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&G$T.pixelStorei(G$T.UNPACK_ALIGNMENT,1),G$T.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var G$z=0,G$b=!1,G$K=!1;this._buffer.byteLength==4*G$w*G$u?(G$z=6408,G$b=!0):this._buffer.byteLength==3*G$w*G$u?(G$z=6407,G$K=!0):G$z=this._format,G$b||G$K?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),G$K&&G$T.pixelStorei(G$T.UNPACK_ALIGNMENT,1),G$T.texImage2D(this._type,0,G$z,G$w,G$u,0,G$z,5121,this._buffer)):G$T&&G$z==G$T.ALPHA?(G$T.texImage2D(3553,0,G$z,G$w,G$u,0,G$z,G$T.UNSIGNED_BYTE,this._buffer),G$P=!0):0!=G$z&&(G$T.compressedTexImage2D(3553,0,G$z,G$w,G$u,0,this._buffer),G$P=!0)}var G$Y=this._minFifter,G$t=this._magFifter,G$A=0==this._wrapModeU?10497:33071,G$L=0==this._wrapModeV?10497:33071,G$i=G$m.isPOT(G$w,G$u);G$i?(this._mipmap||this._mipmaps?-1!==G$Y||(G$Y=9987):-1!==G$Y||(G$Y=9729),-1!==G$t||(G$t=9729),G$T.texParameteri(this._type,10241,G$Y),G$T.texParameteri(this._type,10240,G$t),G$T.texParameteri(this._type,10242,G$A),G$T.texParameteri(this._type,10243,G$L),this._mipmap&&G$T.generateMipmap(this._type)):(-1!==G$Y||(G$Y=9729),-1!==G$t||(G$t=9729),G$T.texParameteri(this._type,10241,G$Y),G$T.texParameteri(this._type,10240,G$t),G$T.texParameteri(this._type,10242,33071),G$T.texParameteri(this._type,10243,33071)),G$p&&G$D&&G$y.bindTexture(G$T,G$p,G$D),this.memorySize=G$P?this._buffer.length:G$i?G$w*G$u*4*(1+1/3):G$w*G$u*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},G$l.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},G$l.onAsynLoaded=function(G$T,G$l,G$w){var G$u;G$w&&(G$u=G$w[0].call(this,G$l)),G$u&&(this._width=G$u.width,this._height=G$u.height,this._buffer=G$u.data),this._src=G$T,this._size=new G$tl(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},G$l.getPixels=function(){return new Uint8Array(this._buffer)},G$l.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(G$e.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},G$Y(0,G$l,"src",function(){return this._src}),G$W.create=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){if(void 0===G$u&&(G$u=9729),void 0===G$p&&(G$p=9729),void 0===G$D&&(G$D=!0),!G$T||G$T.byteLength<G$l*G$w*4)throw"DataTexture2D create error";var G$j=new G$W;return G$j.uri=G$P,G$j._buffer=G$T,G$j._width=G$l,G$j._height=G$w,G$j._mipmap=G$D,G$j._magFifter=G$u,G$j._minFifter=G$p,G$j._size=new G$tl(G$j._width,G$j._height),G$j._conchTexture?alert("怎么给runtime传递datatexture数据"):G$j.activeResource(),G$j},G$W.load=function(G$T,G$l,G$w,G$u,G$p){if(void 0===G$l&&(G$l=0),void 0===G$w&&(G$w=0),void 0===G$u&&(G$u=9729),void 0===G$p&&(G$p=9729),"mipmaps"===G$I.getFileExtension(G$T)){var G$D=G$c.loader.create(G$T,null,null,G$W,[function(G$T){this._mipmaps=[];var G$l=new Uint32Array(G$T);this._width=G$l[0];var G$w=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,G$w=1024),this._width!=G$w)throw"现在只支持512x256的环境贴图。当前的是"+G$l[0];this._height=G$l[1];for(var G$u=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,G$p=this._height,G$D=8;;){var G$P=G$u*G$p*4;if(G$D+G$P>G$T.byteLength)throw"load mipmaps data size error ";var G$j=new Uint8Array(G$T,G$D,G$P);if(this._mipmaps.push(G$j),G$D+=G$P,1==G$u&&1==G$p)break;(G$u/=2)<1&&(G$u=1),(G$p/=2)<1&&(G$p=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){G$D.simLodInfo=new Float32Array(40);for(var G$P=0;G$P<G$D.simLodInfo.length;)G$D.simLodInfo[G$P]=(G$W.simLodRect[G$P]+.5)/1024,G$P++,G$D.simLodInfo[G$P]=(G$W.simLodRect[G$P]+.5)/256,G$P++,G$D.simLodInfo[G$P]=Math.max(G$W.simLodRect[G$P]-1,.1)/1024,G$P++,G$D.simLodInfo[G$P]=Math.max(G$W.simLodRect[G$P]-1.5,.1)/256,G$P++}return G$D}if("number"==typeof G$l)return G$c.loader.create(G$T,null,null,G$W,[function(G$T){return this._width=G$l,this._height=G$w,this._buffer=G$T,null}]);if("function"==typeof G$l)return G$c.loader.create(G$T,null,null,G$W,[G$l]);throw new Error("unknown params.")},G$W.lodasatlas=!1,G$z(G$W,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),G$W}(),G$kl=function(G$T){function G$l(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,G$l.__super.call(this)}G$K(G$l,"laya.d3.resource.models.PrimitiveMesh",G$yl);var G$w=G$l.prototype;return G$c.imps(G$w,{"laya.d3.core.render.IRenderable":!0}),G$w._getVertexBuffer=function(G$T){return void 0===G$T&&(G$T=0),0===G$T?this._vertexBuffer:null},G$w._getVertexBuffers=function(){return null},G$w._getIndexBuffer=function(){return this._indexBuffer},G$w._getPositions=function(){var G$T,G$l=[],G$w=this._vertexBuffer.vertexDeclaration.getVertexElements(),G$u=0;for(G$u=0;G$u<G$w.length;G$u++){var G$p=G$w[G$u];if("vector3"===G$p.elementFormat&&0===G$p.elementUsage){G$T=G$p;break}}var G$D=this._vertexBuffer.getData();for(G$u=0;G$u<G$D.length;G$u+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var G$P=G$u+G$T.offset/4,G$j=new G$Pl(G$D[G$P+0],G$D[G$P+1],G$D[G$P+2]);G$l.push(G$j)}return G$l},G$w.getRenderElement=function(G$T){return this},G$w.getRenderElementsCount=function(){return 1},G$w.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},G$w._beforeRender=function(G$T){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},G$w._render=function(G$T){G$e.mainContext.drawElements(4,this._numberIndices,5123,0),G$s.drawCall++,G$s.trianglesFaces+=this._numberIndices/3},G$Y(0,G$w,"_vertexBufferCount",function(){return 1}),G$Y(0,G$w,"triangleCount",function(){return this._indexBuffer.indexCount/3}),G$l}(),G$nl=function(G$T){function G$l(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,G$l.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}G$K(G$l,"laya.d3.resource.models.Mesh",G$yl);var G$w=G$l.prototype;return G$w._getPositions=function(){var G$T,G$l,G$w,G$u,G$p,G$D=[],G$P=0,G$j=0,G$J=0;if(0!==this._vertexBuffers.length){var G$q=this._vertexBuffers.length;for(G$P=0;G$P<G$q;G$P++){for(G$w=(G$T=this._vertexBuffers[G$P]).vertexDeclaration.getVertexElements(),G$j=0;G$j<G$w.length;G$j++)if("vector3"===(G$u=G$w[G$j]).elementFormat&&0===G$u.elementUsage){G$l=G$u;break}for(G$p=G$T.getData(),G$j=0;G$j<G$p.length;G$j+=G$T.vertexDeclaration.vertexStride/4)G$J=G$j+G$l.offset/4,G$D.push(new G$Pl(G$p[G$J+0],G$p[G$J+1],G$p[G$J+2]))}}else{var G$M=this._subMeshes.length;for(G$P=0;G$P<G$M;G$P++){for(G$w=(G$T=this._subMeshes[G$P]._getVertexBuffer()).vertexDeclaration.getVertexElements(),G$j=0;G$j<G$w.length;G$j++)if("vector3"===(G$u=G$w[G$j]).elementFormat&&0===G$u.elementUsage){G$l=G$u;break}for(G$p=G$T.getData(),G$j=0;G$j<G$p.length;G$j+=G$T.vertexDeclaration.vertexStride/4)G$J=G$j+G$l.offset/4,G$D.push(new G$Pl(G$p[G$J+0],G$p[G$J+1],G$p[G$J+2]))}}return G$D},G$w._setSubMeshes=function(G$T){this._subMeshes=G$T,this._subMeshCount=G$T.length;for(var G$l=0;G$l<this._subMeshCount;G$l++)G$T[G$l]._indexInMesh=G$l;this._positions=this._getPositions(),this._generateBoundingObject()},G$w.onAsynLoaded=function(G$T,G$l,G$w){var G$u=G$l[0],G$p=G$l[1];G$UT.read(G$u,this,this._materials,this._subMeshes,G$p),this.completeCreate(),this._endLoaded()},G$w.getSubMesh=function(G$T){return this._subMeshes[G$T]},G$w.getSubMeshCount=function(){return this._subMeshes.length},G$w.getRenderElementsCount=function(){return this._subMeshes.length},G$w.getRenderElement=function(G$T){return this._subMeshes[G$T]},G$w.disposeResource=function(){for(var G$T=0;G$T<this._subMeshes.length;G$T++)this._subMeshes[G$T].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},G$Y(0,G$w,"materials",function(){return this._materials.slice()}),G$Y(0,G$w,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),G$l.load=function(G$T){return G$c.loader.create(G$T,null,null,G$l)},G$l}(),G$dl=(function(G$T){function G$q(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===G$w&&(G$w=6408),void 0===G$u&&(G$u=5121),void 0===G$p&&(G$p=33189),void 0===G$D&&(G$D=!1),void 0===G$P&&(G$P=!1),void 0===G$j&&(G$j=-1),void 0===G$J&&(G$J=-1),G$q.__super.call(this),this._type=3553,this._width=G$T,this._height=G$l,this._size=new G$tl(G$T,G$l),this._surfaceFormat=G$w,this._surfaceType=G$u,this._depthStencilFormat=G$p,G$t.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=G$D,this._repeat=G$P,this._minFifter=G$j,this._magFifter=G$J,this.activeResource(),this._alreadyResolved=!0}G$K(G$q,"laya.d3.resource.RenderTexture",G$el);var G$l=G$q.prototype;G$l.recreateResource=function(){var G$T=G$e.mainContext;this._frameBuffer=G$T.createFramebuffer(),this._source=G$T.createTexture();var G$l=G$y.curBindTexTarget,G$w=G$y.curBindTexValue;G$y.bindTexture(G$T,this._type,this._source),G$T.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var G$u=this._minFifter,G$p=this._magFifter,G$D=this._repeat?10497:33071;if(G$m.isPOT(this._width,this._height)?(this._mipmap?-1!==G$u||(G$u=9987):-1!==G$u||(G$u=9729),-1!==G$p||(G$p=9729),G$T.texParameteri(this._type,10241,G$u),G$T.texParameteri(this._type,10240,G$p),G$T.texParameteri(this._type,10242,G$D),G$T.texParameteri(this._type,10243,G$D),this._mipmap&&G$T.generateMipmap(this._type)):(-1!==G$u||(G$u=9729),-1!==G$p||(G$p=9729),G$T.texParameteri(this._type,10241,G$u),G$T.texParameteri(this._type,10240,G$p),G$T.texParameteri(this._type,10242,33071),G$T.texParameteri(this._type,10243,33071)),G$l&&G$w&&G$y.bindTexture(G$T,G$l,G$w),G$T.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=G$T.createRenderbuffer(),G$T.bindRenderbuffer(36161,this._depthStencilBuffer),G$T.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),G$T.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:G$T.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:G$T.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:G$T.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}G$T.framebufferTexture2D(36160,36064,3553,this._source,0),G$T.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},G$l.start=function(){G$e.mainContext.bindFramebuffer(36160,this.frameBuffer),(G$q._currentRenderTarget=this)._alreadyResolved=!1},G$l.end=function(){G$e.mainContext.bindFramebuffer(36160,null),G$q._currentRenderTarget=null,this._alreadyResolved=!0},G$l.getData=function(G$T,G$l,G$w,G$u){var G$p=G$e.mainContext;if(G$p.bindFramebuffer(36160,this._frameBuffer),!(36053===G$p.checkFramebufferStatus(36160)))return G$p.bindFramebuffer(36160,null),null;var G$D=new Uint8Array(this._width*this._height*4);return G$p.readPixels(G$T,G$l,G$w,G$u,this._surfaceFormat,this._surfaceType,G$D),G$p.bindFramebuffer(36160,null),G$D},G$l.disposeResource=function(){if(this._frameBuffer){var G$T=G$e.mainContext;G$T.deleteTexture(this._source),G$T.deleteFramebuffer(this._frameBuffer),G$T.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},G$Y(0,G$l,"surfaceFormat",function(){return this._surfaceFormat}),G$Y(0,G$l,"surfaceType",function(){return this._surfaceType}),G$Y(0,G$l,"depthStencilFormat",function(){return this._depthStencilFormat}),G$Y(0,G$l,"source",function(){return this._alreadyResolved?G$c.superGet(G$el,this,"source"):null}),G$Y(0,G$l,"depthStencilBuffer",function(){return this._depthStencilBuffer}),G$Y(0,G$l,"frameBuffer",function(){return this._frameBuffer}),G$q._currentRenderTarget=null}(),function(G$T){function G$l(G$T){this._color=null,this._pixels=null,G$l.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new G$tl(this.width,this.height),this._color=G$T,this._pixels=new Uint8Array([255*G$T.x,255*G$T.y,255*G$T.z,255*G$T.w]),this.uri="SolidColorTexture2D_"+this.id}G$K(G$l,"laya.d3.resource.SolidColorTexture2D",G$el);var G$w=G$l.prototype;return G$w._createWebGlTexture=function(){var G$T=G$e.mainContext,G$l=this._source=G$T.createTexture(),G$w=this._width,G$u=this._height,G$p=G$y.curBindTexTarget,G$D=G$y.curBindTexValue;G$y.bindTexture(G$T,this._type,G$l),G$T.texImage2D(this._type,0,6408,G$w,G$u,0,6408,5121,this._pixels);var G$P=this._minFifter,G$j=this._magFifter,G$J=this._repeat?10497:33071,G$q=G$m.isPOT(G$w,G$u);G$q?(this._mipmap?-1!==G$P||(G$P=9987):-1!==G$P||(G$P=9729),-1!==G$j||(G$j=9729),G$T.texParameteri(this._type,10241,G$P),G$T.texParameteri(this._type,10240,G$j),G$T.texParameteri(this._type,10242,G$J),G$T.texParameteri(this._type,10243,G$J),this._mipmap&&G$T.generateMipmap(this._type)):(-1!==G$P||(G$P=9729),-1!==G$j||(G$j=9729),G$T.texParameteri(this._type,10241,G$P),G$T.texParameteri(this._type,10240,G$j),G$T.texParameteri(this._type,10242,33071),G$T.texParameteri(this._type,10243,33071)),G$p&&G$D&&G$y.bindTexture(G$T,G$p,G$D),this.memorySize=G$q?G$w*G$u*4*(1+1/3):G$w*G$u*4},G$w.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},G$w.disposeResource=function(){this._source&&(G$e.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},G$z(G$l,["magentaTexture",function(){var G$T=new G$l(new G$jl(1,0,1,1));return G$T.lock=!0,this.magentaTexture=G$T},"grayTexture",function(){var G$T=new G$l(new G$jl(.5,.5,.5,1));return G$T.lock=!0,this.grayTexture=G$T}]),G$l}()),G$Gl=function(G$T){function G$p(G$T,G$l,G$w,G$u){this._canRead=!1,this._image=null,this._pixels=null,void 0===G$T&&(G$T=!1),void 0===G$l&&(G$l=!0),void 0===G$w&&(G$w=6408),void 0===G$u&&(G$u=!0),G$p.__super.call(this),this._type=3553,this._repeat=G$l,this._canRead=G$T,this._format=G$w,this._mipmap=G$u}G$K(G$p,"laya.d3.resource.Texture2D",G$el);var G$l=G$p.prototype;return G$l._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var G$T=G$e.mainContext,G$l=this._source=G$T.createTexture(),G$w=this._width,G$u=this._height,G$p=G$y.curBindTexTarget,G$D=G$y.curBindTexValue;switch(G$y.bindTexture(G$T,this._type,G$l),this._format){case 6407:case 6408:this._canRead?G$T.texImage2D(this._type,0,this._format,G$w,G$u,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?G$T.texImage2D(this._type,0,this._image._format,G$w,G$u,0,this._image._format,5121,this._image.atlasSource):G$T.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case G$e.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:G$T.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var G$P=this._minFifter,G$j=this._magFifter,G$J=this._repeat?10497:33071,G$q=0==this._wrapModeU?10497:33071,G$M=0==this._wrapModeV?10497:33071,G$z=G$m.isPOT(G$w,G$u);G$z?(this._mipmap?-1!==G$P||(G$P=9987):-1!==G$P||(G$P=9729),-1!==G$j||(G$j=9729),G$T.texParameteri(this._type,10241,G$P),G$T.texParameteri(this._type,10240,G$j),G$T.texParameteri(this._type,10242,G$J),G$T.texParameteri(this._type,10243,G$J),G$T.texParameteri(this._type,10242,G$q),G$T.texParameteri(this._type,10243,G$M),this._mipmap&&G$T.generateMipmap(this._type)):(-1!==G$P||(G$P=9729),-1!==G$j||(G$j=9729),G$T.texParameteri(this._type,10241,G$P),G$T.texParameteri(this._type,10240,G$j),G$T.texParameteri(this._type,10242,33071),G$T.texParameteri(this._type,10243,33071)),G$p&&G$D&&G$y.bindTexture(G$T,G$p,G$D),this._image.onload=null,this._image=null,this.memorySize=G$z?G$w*G$u*4*(1+1/3):G$w*G$u*4},G$l.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},G$l.onAsynLoaded=function(G$T,G$l,G$w){if(G$w){var G$u=G$w[0];void 0!==G$u&&(this._canRead=G$u);var G$p=G$w[1];void 0!==G$p&&(this._repeat=G$p);var G$D=G$w[2];void 0!==G$D&&(this._format=G$D);var G$P=G$w[3];void 0!==G$P&&(this._mipmap=G$P);var G$j=G$w.wrapModeU;void 0!==G$j&&(this._wrapModeU=G$j);var G$J=G$w.wrapModeV;void 0!==G$J&&(this._wrapModeV=G$J)}switch(this._format){case 6407:case 6408:var G$q=(this._image=G$l).width,G$M=G$l.height;this._width=G$q,this._height=G$M,this._size=new G$tl(G$q,G$M),this._canRead&&(G$t.isConchApp?G$l instanceof G$b.HTMLElement&&(this._pixels=new Uint8Array(G$l.getImageData(0,0,G$q,G$M))):(G$v.canvas.size(G$q,G$M),G$v.canvas.clear(),G$v.context.drawImage(G$l,0,0,G$q,G$M),this._pixels=new Uint8Array(G$v.context.getImageData(0,0,G$q,G$M).data.buffer)));break;case G$e.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var G$z=new G$a(G$l);G$z.readUTFBytes(4),G$z.readUTFBytes(2),G$z.getInt16();G$z.endian="bigEndian",this._width=G$z.getInt16(),this._height=G$z.getInt16(),this._size=new G$tl(this._width,this._height);G$z.getInt16(),G$z.getInt16();this._image=new Uint8Array(G$l,G$z.pos)}this.recreateResource(),this._endLoaded()},G$l.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},G$l.disposeResource=function(){this._source&&(G$e.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},G$Y(0,G$l,"_src",function(){return this.url}),G$Y(0,G$l,"src",function(){return this.url}),G$p.load=function(G$T){return G$c.loader.create(G$T,null,null,G$p)},G$p}(),G$Nl=function(G$l){function G$w(G$T,G$l){G$w.__super.call(this),void 0===G$T&&(G$T=.3),void 0===G$l&&(G$l=1e3),this._tempVector3=new G$Pl,this._position=new G$Pl,this._up=new G$Pl,this._forward=new G$Pl,this._right=new G$Pl,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=G$tl.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=G$T,this._farPlane=G$l,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),G$c.stage.on("resize",this,this._onScreenSizeChanged)}G$K(G$w,"laya.d3.core.BaseCamera",G$l);var G$T=G$w.prototype;return G$T._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var G$T=this.scene._cameraPool,G$l=G$T.length-1,G$w=0;G$w<G$l;G$w++)if(G$T[G$w].renderingOrder>G$T[G$l].renderingOrder){var G$u=G$T[G$w];G$T[G$w]=G$T[G$l],G$T[G$l]=G$u}},G$T._calculateProjectionMatrix=function(){},G$T._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},G$T._prepareCameraToRender=function(){G$x._currentCameraCullingMask=this.cullingMask;var G$T=this._shaderValues;G$T.setValue(0,this.transform.position.elements),G$T.setValue(5,this.forward.elements),G$T.setValue(6,this.up.elements)},G$T._prepareCameraViewProject=function(G$T,G$l){var G$w=this._shaderValues;G$w.setValue(1,G$T.elements),G$w.setValue(2,G$l.elements)},G$T._renderCamera=function(G$T,G$l,G$w){},G$T.addLayer=function(G$T){29!==G$T.number&&30!=G$T.number&&(this.cullingMask=this.cullingMask|G$T.mask)},G$T.removeLayer=function(G$T){29!==G$T.number&&30!=G$T.number&&(this.cullingMask=this.cullingMask&~G$T.mask)},G$T.addAllLayers=function(){this.cullingMask=2147483647},G$T.removeAllLayers=function(){this.cullingMask=0|G$x.getLayerByNumber(29).mask|G$x.getLayerByNumber(30).mask},G$T.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},G$T.moveForward=function(G$T){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=G$T,this.transform.translate(this._tempVector3)},G$T.moveRight=function(G$T){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=G$T,this.transform.translate(this._tempVector3)},G$T.moveVertical=function(G$T){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=G$T,this.transform.translate(this._tempVector3,!1)},G$T._addSelfRenderObjects=function(){var G$T=this.scene._cameraPool,G$l=G$T.length;if(0<G$l){for(var G$w=G$l-1;0<=G$w;G$w--)if(this.renderingOrder<=G$T[G$w].renderingOrder){G$T.splice(G$w+1,0,this);break}}else G$T.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},G$T._clearSelfRenderObjects=function(){var G$T=this.scene._cameraPool;G$T.splice(G$T.indexOf(this),1)},G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,G$c.stage.off("resize",this,this._onScreenSizeChanged),G$l.prototype.destroy.call(this,G$T)},G$Y(0,G$T,"sky",function(){return this._sky},function(G$T){(this._sky=G$T)._ownerCamera=this}),G$Y(0,G$T,"forward",function(){var G$T=this.transform.worldMatrix.elements,G$l=this._forward.elements;return G$l[0]=-G$T[8],G$l[1]=-G$T[9],G$l[2]=-G$T[10],this._forward}),G$Y(0,G$T,"position",function(){var G$T=this.transform.worldMatrix.elements,G$l=this._position.elements;return G$l[0]=G$T[12],G$l[1]=G$T[13],G$l[2]=G$T[14],this._position}),G$Y(0,G$T,"renderTarget",function(){return this._renderTarget},function(G$T){null!=(this._renderTarget=G$T)&&(this._renderTargetSize=G$T.size)}),G$Y(0,G$T,"up",function(){var G$T=this.transform.worldMatrix.elements,G$l=this._up.elements;return G$l[0]=G$T[4],G$l[1]=G$T[5],G$l[2]=G$T[6],this._up}),G$Y(0,G$T,"right",function(){var G$T=this.transform.worldMatrix.elements,G$l=this._right.elements;return G$l[0]=G$T[0],G$l[1]=G$T[1],G$l[2]=G$T[2],this._right}),G$Y(0,G$T,"renderTargetSize",function(){return this._renderTargetSize},function(G$T){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=G$T,this._calculateProjectionMatrix()}),G$Y(0,G$T,"fieldOfView",function(){return this._fieldOfView},function(G$T){this._fieldOfView=G$T,this._calculateProjectionMatrix()}),G$Y(0,G$T,"nearPlane",function(){return this._nearPlane},function(G$T){this._nearPlane=G$T,this._calculateProjectionMatrix()}),G$Y(0,G$T,"farPlane",function(){return this._farPlane},function(G$T){this._farPlane=G$T,this._calculateProjectionMatrix()}),G$Y(0,G$T,"orthographic",function(){return this._orthographic},function(G$T){this._orthographic=G$T,this._calculateProjectionMatrix()}),G$Y(0,G$T,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(G$T){this._orthographicVerticalSize=G$T,this._calculateProjectionMatrix()}),G$Y(0,G$T,"renderingOrder",function(){return this._renderingOrder},function(G$T){this._renderingOrder=G$T,this._sortCamerasByRenderingOrder()}),G$w.CAMERAPOS=0,G$w.VIEWMATRIX=1,G$w.PROJECTMATRIX=2,G$w.VPMATRIX=3,G$w.VPMATRIX_NO_TRANSLATE=4,G$w.CAMERADIRECTION=5,G$w.CAMERAUP=6,G$w.ENVIRONMENTDIFFUSE=7,G$w.ENVIRONMENTSPECULAR=8,G$w.SIMLODINFO=9,G$w.DIFFUSEIRRADMATR=10,G$w.DIFFUSEIRRADMATG=11,G$w.DIFFUSEIRRADMATB=12,G$w.HDREXPOSURE=13,G$w.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",G$w.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",G$w.CLEARFLAG_SOLIDCOLOR=0,G$w.CLEARFLAG_SKY=1,G$w.CLEARFLAG_DEPTHONLY=2,G$w.CLEARFLAG_NONE=3,G$z(G$w,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new G$Tl(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new G$Tl},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new G$Tl}]),G$w}(G$Fl),G$hl=function(G$w){function G$l(G$T){this._render=null,this._geometryFilter=null,G$l.__super.call(this,G$T)}G$K(G$l,"laya.d3.core.RenderableSprite3D",G$w);var G$T=G$l.prototype;return G$T._addToInitStaticBatchManager=function(){},G$T._setBelongScene=function(G$T){G$w.prototype._setBelongScene.call(this,G$T),G$T._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},G$T._setUnBelongScene=function(){var G$T=this._scene._renderableSprite3Ds,G$l=G$T.indexOf(this);G$T.splice(G$l,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),G$w.prototype._setUnBelongScene.call(this)},G$T._update=function(G$T){(G$T.owner=this)._activeInHierarchy&&(this._updateComponents(G$T),this._render._updateOctreeNode(),this._lateUpdateComponents(G$T),G$s.spriteCount++,this._childs.length&&this._updateChilds(G$T))},G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$w.prototype.destroy.call(this,G$T),this._render._destroy(),this._render=null},G$l.__init__=function(){G$l.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=G$l.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),G$l.SAHDERDEFINE_LIGHTMAP=G$l.shaderDefines.registerDefine("LIGHTMAP")},G$l.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,G$l.SAHDERDEFINE_LIGHTMAP=4,G$l.LIGHTMAPSCALEOFFSET=2,G$l.LIGHTMAP=3,G$z(G$l,["shaderDefines",function(){return this.shaderDefines=new G$Ml}]),G$l}(G$Fl),G$gl=(function(G$T){function G$u(G$T,G$l,G$w){this._long=NaN,this._width=NaN,this._height=NaN,void 0===G$T&&(G$T=1),void 0===G$l&&(G$l=1),void 0===G$w&&(G$w=1),G$u.__super.call(this),this._long=G$T,this._width=G$l,this._height=G$w,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}G$K(G$u,"laya.d3.resource.models.BoxMesh",G$kl);var G$l=G$u.prototype;G$l.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var G$T=G$eT.vertexDeclaration,G$l=(G$T.vertexStride,this._long/2),G$w=this._height/2,G$u=this._width/2,G$p=new Float32Array([-G$l,G$w,-G$u,0,1,0,0,0,G$l,G$w,-G$u,0,1,0,1,0,G$l,G$w,G$u,0,1,0,1,1,-G$l,G$w,G$u,0,1,0,0,1,-G$l,-G$w,-G$u,0,-1,0,0,1,G$l,-G$w,-G$u,0,-1,0,1,1,G$l,-G$w,G$u,0,-1,0,1,0,-G$l,-G$w,G$u,0,-1,0,0,0,-G$l,G$w,-G$u,-1,0,0,0,0,-G$l,G$w,G$u,-1,0,0,1,0,-G$l,-G$w,G$u,-1,0,0,1,1,-G$l,-G$w,-G$u,-1,0,0,0,1,G$l,G$w,-G$u,1,0,0,1,0,G$l,G$w,G$u,1,0,0,0,0,G$l,-G$w,G$u,1,0,0,0,1,G$l,-G$w,-G$u,1,0,0,1,1,-G$l,G$w,G$u,0,0,1,0,0,G$l,G$w,G$u,0,0,1,1,0,G$l,-G$w,G$u,0,0,1,1,1,-G$l,-G$w,G$u,0,0,1,0,1,-G$l,G$w,-G$u,0,0,-1,1,0,G$l,G$w,-G$u,0,0,-1,0,0,G$l,-G$w,-G$u,0,0,-1,0,1,-G$l,-G$w,-G$u,0,0,-1,1,1]),G$D=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new G$Hl(G$T,this._numberVertices,35044,!0),this._indexBuffer=new G$Zl("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(G$p),this._indexBuffer.setData(G$D),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},G$Y(0,G$l,"long",function(){return this._long},function(G$T){this._long!==G$T&&(this._long=G$T,this.releaseResource(),this.activeResource())}),G$Y(0,G$l,"width",function(){return this._width},function(G$T){this._width!==G$T&&(this._width=G$T,this.releaseResource(),this.activeResource())}),G$Y(0,G$l,"height",function(){return this._height},function(G$T){this._height!==G$T&&(this._height=G$T,this.releaseResource(),this.activeResource())})}(),function(G$T){function G$P(G$T,G$l,G$w){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=.3),void 0===G$w&&(G$w=1e3),this._viewMatrix=new G$Tl,this._projectionMatrix=new G$Tl,this._projectionViewMatrix=new G$Tl,this._viewport=new G$Jl(0,0,0,0),this._normalizedViewport=new G$Jl(0,0,1,1),this._aspectRatio=G$T,this._boundFrustumUpdate=!0,this._boundFrustum=new G$VT(G$Tl.DEFAULT),G$P.__super.call(this,G$l,G$w),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}G$K(G$P,"laya.d3.core.Camera",G$Nl);var G$l=G$P.prototype;return G$l._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},G$l._parseCustomProps=function(G$T,G$l,G$w,G$u){var G$p=G$w.clearColor;this.clearColor=new G$jl(G$p[0],G$p[1],G$p[2],G$p[3]);var G$D=G$w.viewport;this.normalizedViewport=new G$Jl(G$D[0],G$D[1],G$D[2],G$D[3])},G$l._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var G$T=this.orthographicVerticalSize*this.aspectRatio*.5,G$l=.5*this.orthographicVerticalSize;G$Tl.createOrthoOffCenterRH(-G$T,G$T,-G$l,G$l,this.nearPlane,this.farPlane,this._projectionMatrix)}else G$Tl.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},G$l._update=function(G$T){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,G$T)},G$l._renderCamera=function(G$T,G$l,G$w){var G$u,G$p;G$w.parallelSplitShadowMaps[0]&&G$w._renderShadowMap(G$T,G$l,this),(G$l.camera=this)._prepareCameraToRender(),G$w._preRenderUpdateComponents(G$l),G$u=G$l._viewMatrix=this.viewMatrix;var G$D=this._renderTarget;G$D?(G$D.start(),G$Tl.multiply(G$Nl._invertYScaleMatrix,this._projectionMatrix,G$Nl._invertYProjectionMatrix),G$Tl.multiply(G$Nl._invertYScaleMatrix,this.projectionViewMatrix,G$Nl._invertYProjectionViewMatrix),G$p=G$l._projectionMatrix=G$Nl._invertYProjectionMatrix,G$l._projectionViewMatrix=G$Nl._invertYProjectionViewMatrix):(G$p=G$l._projectionMatrix=this._projectionMatrix,G$l._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(G$u,G$p),G$l._viewport=this.viewport,G$w._preRenderScene(G$T,G$l,this.boundFrustum),G$w._clear(G$T,G$l),G$w._renderScene(G$T,G$l),G$w._postRenderUpdateComponents(G$l),G$D&&G$D.end()},G$l.viewportPointToRay=function(G$T,G$l){G$Yl.calculateCursorRay(G$T,this.viewport,this._projectionMatrix,this.viewMatrix,null,G$l)},G$l.normalizedViewportPointToRay=function(G$T,G$l){var G$w=G$P._tempVector20,G$u=this.viewport,G$p=G$T.elements,G$D=G$w.elements;G$D[0]=G$p[0]*G$u.width,G$D[1]=G$p[1]*G$u.height,G$Yl.calculateCursorRay(G$w,this.viewport,this._projectionMatrix,this.viewMatrix,null,G$l)},G$l.worldToViewportPoint=function(G$T,G$l){G$Tl.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(G$T,this._projectionViewMatrix,G$l);var G$w=G$l.elements;G$w[0]=G$w[0]/G$c.stage.clientScaleX,G$w[1]=G$w[1]/G$c.stage.clientScaleY},G$l.worldToNormalizedViewportPoint=function(G$T,G$l){G$Tl.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(G$T,this._projectionViewMatrix,G$l);var G$w=G$l.elements;G$w[0]=G$w[0]/G$c.stage.clientScaleX,G$w[1]=G$w[1]/G$c.stage.clientScaleY},G$l.convertScreenCoordToOrthographicCoord=function(G$T,G$l){if(this._orthographic){var G$w=G$U.clientWidth,G$u=G$U.clientHeight,G$p=this.orthographicVerticalSize*this.aspectRatio/G$w,G$D=this.orthographicVerticalSize/G$u,G$P=G$T.elements,G$j=G$l.elements;return G$j[0]=(-G$w/2+G$P[0])*G$p,G$j[1]=(G$u/2-G$P[1])*G$D,G$j[2]=(this.nearPlane-this.farPlane)*(G$P[2]+1)/2-this.nearPlane,G$Pl.transformCoordinate(G$l,this.transform.worldMatrix,G$l),!0}return!1},G$Y(0,G$l,"projectionViewMatrix",function(){return G$Tl.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),G$Y(0,G$l,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var G$T=this.viewport;return G$T.width/G$T.height},function(G$T){if(G$T<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=G$T,this._calculateProjectionMatrix()}),G$Y(0,G$l,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),G$Y(0,G$l,"needViewport",function(){var G$T=this.normalizedViewport;return 0===G$T.x&&0===G$T.y&&1===G$T.width&&1===G$T.height}),G$Y(0,G$l,"viewport",function(){if(this._viewportExpressedInClipSpace){var G$T=this._normalizedViewport,G$l=this.renderTargetSize,G$w=G$l.width,G$u=G$l.height;this._viewport.x=G$T.x*G$w,this._viewport.y=G$T.y*G$u,this._viewport.width=G$T.width*G$w,this._viewport.height=G$T.height*G$u}return this._viewport},function(G$T){if(null!=this.renderTarget&&(G$T.x<0||G$T.y<0||0==G$T.width||0==G$T.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=G$T,this._calculateProjectionMatrix()}),G$Y(0,G$l,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var G$T=this._viewport,G$l=this.renderTargetSize,G$w=G$l.width,G$u=G$l.height;this._normalizedViewport.x=G$T.x/G$w,this._normalizedViewport.y=G$T.y/G$u,this._normalizedViewport.width=G$T.width/G$w,this._normalizedViewport.height=G$T.height/G$u}return this._normalizedViewport},function(G$T){G$T.x<0&&(G$T.x=0,console.warn("Camera: viewport.x must large than 0.0.")),G$T.y<0&&(G$T.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<G$T.x+G$T.width&&(G$T.width=1-G$T.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<G$T.y+G$T.height&&(G$T.height=1-G$T.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=G$T,this._calculateProjectionMatrix()}),G$Y(0,G$l,"projectionMatrix",function(){return this._projectionMatrix},function(G$T){this._projectionMatrix=G$T,this._useUserProjectionMatrix=!0}),G$Y(0,G$l,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),G$z(G$P,["_tempVector20",function(){return this._tempVector20=new G$Dl}]),G$P}()),G$fl=function(G$w){function G$u(G$T,G$l){G$u.__super.call(this,G$l),this._geometryFilter=new G$vl(this),this._render=new G$xl(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),G$T&&(this._geometryFilter.sharedMesh=G$T)instanceof laya.d3.resource.models.Mesh&&(G$T.loaded?this._render.sharedMaterials=G$T.materials:G$T.once("loaded",this,this._applyMeshMaterials))}G$K(G$u,"laya.d3.core.MeshSprite3D",G$w);var G$T=G$u.prototype;return G$T._changeRenderObjectByMesh=function(G$T){var G$l=this._render._renderElements,G$w=G$l[G$T];G$w||(G$w=G$l[G$T]=new G$Bl),G$w._render=this._render;var G$u=this._render.sharedMaterials[G$T];G$u||(G$u=G$$l.defaultMaterial);var G$p=this._geometryFilter.sharedMesh.getRenderElement(G$T);return G$w._mainSortID=this._getSortID(G$p,G$u),G$w._sprite3D=this,G$w.renderObj=G$p,G$w._material=G$u,G$w},G$T._changeRenderObjectByMaterial=function(G$T,G$l){var G$w=this._render._renderElements[G$T];G$l||(G$l=G$$l.defaultMaterial);var G$u=this._geometryFilter.sharedMesh.getRenderElement(G$T);return G$w._mainSortID=this._getSortID(G$u,G$l),G$w._sprite3D=this,G$w.renderObj=G$u,G$w._material=G$l,G$w},G$T._changeRenderObjectsByMesh=function(){var G$T=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=G$T;for(var G$l=0;G$l<G$T;G$l++)this._changeRenderObjectByMesh(G$l)},G$T._onMeshChanged=function(G$T){var G$l=G$T.sharedMesh;G$l.loaded?this._changeRenderObjectsByMesh():G$l.once("loaded",this,this._onMeshLoaded)},G$T._onMeshLoaded=function(G$T){G$T===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},G$T._onMaterialChanged=function(G$T,G$l,G$w){G$l<this._render._renderElements.length&&this._changeRenderObjectByMaterial(G$l,G$w)},G$T._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},G$T._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},G$T._parseCustomProps=function(G$T,G$l,G$w,G$u){var G$p=this.meshRender,G$D=G$w.lightmapIndex;null!=G$D&&(G$p.lightmapIndex=G$D);var G$P,G$j,G$J=G$w.lightmapScaleOffset;if(G$J&&(G$p.lightmapScaleOffset=new G$jl(G$J[0],G$J[1],G$J[2],G$J[3])),G$u.instanceParams)(G$P=G$u.instanceParams.loadPath)&&(G$j=G$L.getRes(G$l[G$P]),(this.meshFilter.sharedMesh=G$j).loaded?G$p.sharedMaterials=G$j.materials:G$j.once("loaded",this,this._applyMeshMaterials));else{(G$P=G$w.meshPath)&&(G$j=G$L.getRes(G$l[G$P]),this.meshFilter.sharedMesh=G$j);var G$q=G$w.materials;if(G$q){var G$M=G$p.sharedMaterials,G$z=G$q.length;G$M.length=G$z;for(var G$b=0;G$b<G$z;G$b++)G$M[G$b]=G$L.getRes(G$l[G$q[G$b].path]);G$p.sharedMaterials=G$M}}},G$T._applyMeshMaterials=function(G$T){for(var G$l=this._render.sharedMaterials,G$w=G$T.materials,G$u=0,G$p=G$w.length;G$u<G$p;G$u++)G$l[G$u]||(G$l[G$u]=G$w[G$u]);this._render.sharedMaterials=G$l},G$T._addToInitStaticBatchManager=function(){G$u._staticBatchManager._addInitBatchSprite(this)},G$T.cloneTo=function(G$T){var G$l=G$T;G$l._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var G$w=this._render,G$u=G$l._render;G$u.enable=G$w.enable,G$u.sharedMaterials=G$w.sharedMaterials,G$u.castShadow=G$w.castShadow;var G$p=G$w.lightmapScaleOffset;G$p&&(G$u.lightmapScaleOffset=G$p.clone()),G$u.lightmapIndex=G$w.lightmapIndex,G$u.receiveShadow=G$w.receiveShadow,G$u.sortingFudge=G$w.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,G$T)},G$T.destroy=function(G$T){if(void 0===G$T&&(G$T=!0),!this.destroyed){var G$l=this.meshFilter.sharedMesh;null!=G$l&&(G$l.loaded||G$l.off("loaded",this,this._applyMeshMaterials)),G$w.prototype.destroy.call(this,G$T),this._geometryFilter._destroy()}},G$Y(0,G$T,"meshFilter",function(){return this._geometryFilter}),G$Y(0,G$T,"meshRender",function(){return this._render}),G$u.__init__=function(){G$uT._staticBatchManagers.push(G$u._staticBatchManager)},G$u.load=function(G$T){return G$c.loader.create(G$T,null,null,G$u)},G$z(G$u,["_staticBatchManager",function(){return this._staticBatchManager=new G$rl}]),G$u}(G$hl)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$T,G$l){"use strict";for(var G$w in Object.defineProperty(G$l,"__esModule",{value:!0}),Laya){var G$u=Laya[G$w];G$u&&G$u.__isclass&&(G$l[G$w]=G$u)}}),function(G$T,G$l,G$pT){G$pT.un,G$pT.uns;var G$w=G$pT.static,G$u=G$pT.class,G$D=G$pT.getset,G$t=G$pT.__newvec,G$j=laya.maths.Bezier,G$z=laya.utils.Browser,G$eT=laya.utils.Byte,G$p=(laya.events.Event,laya.events.EventDispatcher),G$P=laya.display.Graphics,G$J=(laya.resource.HTMLCanvas,laya.utils.Handler),G$q=laya.net.Loader,G$b=laya.maths.MathUtil,G$yT=laya.maths.Matrix,G$A=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),G$M=(laya.renders.RenderContext,laya.resource.Resource),G$K=laya.utils.RunDriver,G$DT=laya.display.Sprite,G$Y=laya.utils.Stat,G$vT=laya.resource.Texture,G$L=(laya.net.URL,laya.utils.Utils),G$y=function(){function G$T(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return G$u(G$T,"laya.ani.AnimationContent"),G$T}(),G$v=function(){function G$T(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return G$u(G$T,"laya.ani.AnimationNodeContent"),G$T}(),G$W=function(){function G$T(){}return G$u(G$T,"laya.ani.AnimationParser01"),G$T.parse=function(G$T,G$l){var G$w=G$l.__getBuffer(),G$u=0,G$p=0,G$D=0,G$P=0,G$j=0,G$J=0,G$q=0,G$M=G$l.readUTFString();G$T._aniClassName=G$M;var G$z,G$b=G$l.readUTFString().split("\n"),G$K=G$l.getUint8(),G$Y=G$l.getUint32(),G$t=G$l.getUint32();0<G$Y&&(G$z=G$w.slice(G$Y,G$t));var G$A=new G$eT(G$z);for(0<G$t&&(G$T._publicExtData=G$w.slice(G$t,G$w.byteLength)),G$T._useParent=!!G$l.getUint8(),G$T._anis.length=G$K,G$u=0;G$u<G$K;G$u++){var G$L=G$T._anis[G$u]=new G$y;G$L.nodes=new Array;var G$i=G$L.name=G$b[G$l.getUint16()];G$T._aniMap[G$i]=G$u,G$L.bone3DMap={},G$L.playTime=G$l.getFloat32(),G$L.playTime<=0&&console.error("播放时间不能为0  url="+G$T.url+" name="+G$L.name);var G$W=G$L.nodes.length=G$l.getUint8();for(G$p=G$L.totalKeyframeDatasLength=0;G$p<G$W;G$p++){var G$m=G$L.nodes[G$p]=new G$v;G$m.childs=[];var G$c=G$l.getInt16();0<=G$c&&(G$m.name=G$b[G$c],G$L.bone3DMap[G$m.name]=G$p),G$m.keyFrame=new Array,G$m.parentIndex=G$l.getInt16(),-1==G$m.parentIndex?G$m.parent=null:G$m.parent=G$L.nodes[G$m.parentIndex],G$m.lerpType=G$l.getUint8();var G$a=G$l.getUint32();G$A.pos=G$a;var G$B=G$m.keyframeWidth=G$A.getUint16();if(G$L.totalKeyframeDatasLength+=G$B,0===G$m.lerpType||1===G$m.lerpType)for(G$m.interpolationMethod=[],G$m.interpolationMethod.length=G$B,G$D=0;G$D<G$B;G$D++)G$m.interpolationMethod[G$D]=G$F.interpolation[G$A.getUint8()];null!=G$m.parent&&G$m.parent.childs.push(G$m);var G$s=G$l.getUint16();0<G$s&&(G$m.extenData=G$w.slice(G$l.pos,G$l.pos+G$s),G$l.pos+=G$s);var G$r,G$I=G$l.getUint16(),G$Q=0;for(G$D=0,G$P=G$m.keyFrame.length=G$I;G$D<G$P;G$D++){if((G$r=G$m.keyFrame[G$D]=new G$x).duration=G$l.getFloat32(),G$r.startTime=G$Q,2===G$m.lerpType){G$r.interpolationData=[];var G$o,G$e=G$l.getUint8();switch(G$o=G$l.getFloat32()){case 254:for(G$r.interpolationData.length=G$B,G$q=0;G$q<G$B;G$q++)G$r.interpolationData[G$q]=0;break;case 255:for(G$r.interpolationData.length=G$B,G$q=0;G$q<G$B;G$q++)G$r.interpolationData[G$q]=5;break;default:for(G$r.interpolationData.push(G$o),G$J=1;G$J<G$e;G$J++)G$r.interpolationData.push(G$l.getFloat32())}}for(G$r.data=new Float32Array(G$B),G$j=0;G$j<G$B;G$j++)G$r.data[G$j]=G$l.getFloat32(),-1e-8<G$r.data[G$j]&&G$r.data[G$j]<1e-8&&(G$r.data[G$j]=0);G$Q+=G$r.duration}G$r.startTime=G$L.playTime,G$m.playTime=G$L.playTime,G$T._calculateKeyFrame(G$m,G$I,G$B)}}},G$T}(),G$m=function(){function G$c(){}return G$u(G$c,"laya.ani.AnimationParser02"),G$c.READ_DATA=function(){G$c._DATA.offset=G$c._reader.getUint32(),G$c._DATA.size=G$c._reader.getUint32()},G$c.READ_BLOCK=function(){for(var G$T=G$c._BLOCK.count=G$c._reader.getUint16(),G$l=G$c._BLOCK.blockStarts=[],G$w=G$c._BLOCK.blockLengths=[],G$u=0;G$u<G$T;G$u++)G$l.push(G$c._reader.getUint32()),G$w.push(G$c._reader.getUint32())},G$c.READ_STRINGS=function(){var G$T=G$c._reader.getUint32(),G$l=G$c._reader.getUint16(),G$w=G$c._reader.pos;G$c._reader.pos=G$T+G$c._DATA.offset;for(var G$u=0;G$u<G$l;G$u++)G$c._strings[G$u]=G$c._reader.readUTFString();G$c._reader.pos=G$w},G$c.parse=function(G$T,G$l){G$c._templet=G$T;(G$c._reader=G$l).__getBuffer();G$c.READ_DATA(),G$c.READ_BLOCK(),G$c.READ_STRINGS();for(var G$w=0,G$u=G$c._BLOCK.count;G$w<G$u;G$w++){var G$p=G$l.getUint16(),G$D=G$c._strings[G$p],G$P=G$c["READ_"+G$D];if(null==G$P)throw new Error("model file err,no this function:"+G$p+" "+G$D);G$P.call()}},G$c.READ_ANIMATIONS=function(){var G$T=G$c._reader,G$l=G$T.__getBuffer(),G$w=0,G$u=0,G$p=0,G$D=0,G$P=G$T.getUint16(),G$j=[];for(G$j.length=G$P,G$w=0;G$w<G$P;G$w++)G$j[G$w]=G$F.interpolation[G$T.getByte()];var G$J=G$T.getUint8();for(G$c._templet._anis.length=G$J,G$w=0;G$w<G$J;G$w++){var G$q=G$c._templet._anis[G$w]={};G$q.nodes=new Array;var G$M=G$q.name=G$c._strings[G$T.getUint16()];G$c._templet._aniMap[G$M]=G$w,G$q.bone3DMap={},G$q.playTime=G$T.getFloat32();var G$z=G$q.nodes.length=G$T.getInt16();for(G$u=G$q.totalKeyframeDatasLength=0;G$u<G$z;G$u++){var G$b=G$q.nodes[G$u]={};G$b.keyframeWidth=G$P,G$b.childs=[];var G$K=G$T.getUint16();0<=G$K&&(G$b.name=G$c._strings[G$K],G$q.bone3DMap[G$b.name]=G$u),G$b.keyFrame=new Array,G$b.parentIndex=G$T.getInt16(),-1==G$b.parentIndex?G$b.parent=null:G$b.parent=G$q.nodes[G$b.parentIndex],G$q.totalKeyframeDatasLength+=G$P,G$b.interpolationMethod=G$j,null!=G$b.parent&&G$b.parent.childs.push(G$b);var G$Y=G$T.getUint16(),G$t=null,G$A=null;for(G$p=0,G$D=G$b.keyFrame.length=G$Y;G$p<G$D;G$p++){(G$t=G$b.keyFrame[G$p]={}).startTime=G$T.getFloat32(),G$A&&(G$A.duration=G$t.startTime-G$A.startTime);var G$L=G$c._DATA.offset,G$i=G$T.getUint32(),G$W=4*G$P,G$m=G$l.slice(G$L+G$i,G$L+G$i+G$W);G$t.data=new Float32Array(G$m),G$A=G$t}G$t.duration=0,G$b.playTime=G$q.playTime,G$c._templet._calculateKeyFrame(G$b,G$Y,G$P)}}},G$c._templet=null,G$c._reader=null,G$c._strings=[],G$w(G$c,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),G$c}(),G$xT=(function(){function G$T(){}G$u(G$T,"laya.ani.AnimationState"),G$T.stopped=0,G$T.paused=1,G$T.playing=2}(),function(){function G$p(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new G$hT,this.resultMatrix=new G$yT,this._children=[]}G$u(G$p,"laya.ani.bone.Bone");var G$T=G$p.prototype;return G$T.setTempMatrix=function(G$T){this._tempMatrix=G$T;var G$l,G$w=0;for(G$w=0,G$l=this._children.length;G$w<G$l;G$w++)this._children[G$w].setTempMatrix(this._tempMatrix)},G$T.update=function(G$T){var G$l;if(this.rotation=this.transform.skX,G$T)G$l=this.resultTransform.getMatrix(),G$yT.mul(G$l,G$T,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)G$l=this.resultTransform.getMatrix(),G$yT.mul(G$l,this.parentBone.resultMatrix,this.resultMatrix);else{var G$w=this.parentBone,G$u=NaN,G$p=NaN,G$D=NaN,G$P=this.parentBone.resultMatrix;G$l=this.resultTransform.getMatrix();var G$j=G$P.a*G$l.tx+G$P.c*G$l.ty+G$P.tx,G$J=G$P.b*G$l.tx+G$P.d*G$l.ty+G$P.ty,G$q=new G$yT;this.inheritRotation?(G$u=Math.atan2(G$w.resultMatrix.b,G$w.resultMatrix.a),G$p=Math.cos(G$u),G$D=Math.sin(G$u),G$q.setTo(G$p,G$D,-G$D,G$p,0,0),G$yT.mul(this._tempMatrix,G$q,G$yT.TEMP),G$yT.TEMP.copyTo(G$q),G$l=this.resultTransform.getMatrix(),G$yT.mul(G$l,G$q,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,G$l=this.resultTransform.getMatrix(),G$yT.TEMP.identity(),G$yT.TEMP.d=this.d,G$yT.mul(G$l,G$yT.TEMP,this.resultMatrix)),this.resultMatrix.tx=G$j,this.resultMatrix.ty=G$J}else(G$l=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var G$M,G$z=0;for(G$z=0,G$M=this._children.length;G$z<G$M;G$z++)this._children[G$z].update()},G$T.updateChild=function(){var G$T,G$l=0;for(G$l=0,G$T=this._children.length;G$l<G$T;G$l++)this._children[G$l].update()},G$T.setRotation=function(G$T){this._sprite&&(this._sprite.rotation=180*G$T/Math.PI)},G$T.updateDraw=function(G$T,G$l){G$p.ShowBones&&!G$p.ShowBones[this.name]||(this._sprite||(this._sprite=new G$DT,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),G$pT.stage.addChild(this._sprite)),this._sprite.x=G$T+this.resultMatrix.tx,this._sprite.y=G$l+this.resultMatrix.ty);var G$w,G$u=0;for(G$u=0,G$w=this._children.length;G$u<G$w;G$u++)this._children[G$u].updateDraw(G$T,G$l)},G$T.addChild=function(G$T){this._children.push(G$T),G$T.parentBone=this},G$T.findBone=function(G$T){if(this.name==G$T)return this;var G$l,G$w,G$u=0;for(G$u=0,G$l=this._children.length;G$u<G$l;G$u++)if(G$w=this._children[G$u].findBone(G$T))return G$w;return null},G$T.localToWorld=function(G$T){var G$l=G$T[0],G$w=G$T[1];G$T[0]=G$l*this.resultMatrix.a+G$w*this.resultMatrix.c+this.resultMatrix.tx,G$T[1]=G$l*this.resultMatrix.b+G$w*this.resultMatrix.d+this.resultMatrix.ty},G$p.ShowBones={},G$p}()),G$RT=function(){function G$t(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}G$u(G$t,"laya.ani.bone.BoneSlot");var G$T=G$t.prototype;return G$T.showSlotData=function(G$T,G$l){void 0===G$l&&(G$l=!0),this.currSlotData=G$T,G$l&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},G$T.showDisplayByName=function(G$T){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(G$T))},G$T.replaceDisplayByName=function(G$T,G$l){if(this.currSlotData){var G$w;G$w=this.currSlotData.getDisplayByName(G$T);var G$u;G$u=this.currSlotData.getDisplayByName(G$l),this.replaceDisplayByIndex(G$w,G$u)}},G$T.replaceDisplayByIndex=function(G$T,G$l){this.currSlotData&&(this._replaceDic[G$T]=G$l,this.displayIndex==G$T&&this.showDisplayByIndex(G$T))},G$T.showDisplayByIndex=function(G$T){if(null!=this._replaceDic[G$T]&&(G$T=this._replaceDic[G$T]),this.currSlotData&&-1<G$T&&G$T<this.currSlotData.displayArr.length){if(this.displayIndex=G$T,this.currDisplayData=this.currSlotData.displayArr[G$T],this.currDisplayData){var G$l=this.currDisplayData.name;this.currTexture=this.templet.getTexture(G$l),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!G$A.isConchApp||G$A.isConchApp&&"0.9.15"<G$DT.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},G$T.replaceSkin=function(G$T){this._diyTexture=G$T,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},G$T.setParentMatrix=function(G$T){this._parentMatrix=G$T},G$T.draw=function(G$T,G$l,G$w,G$u){if(void 0===G$w&&(G$w=!1),void 0===G$u&&(G$u=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var G$p,G$D=this.currTexture;switch(this._diyTexture&&(G$D=this._diyTexture),this.currDisplayData.type){case 0:if(G$T){var G$P=this.getDisplayMatrix();if(this._parentMatrix){var G$j=!1;if(G$P){var G$J;if(G$yT.mul(G$P,this._parentMatrix,G$yT.TEMP),G$J=G$w?(null==this._resultMatrix&&(this._resultMatrix=new G$yT),this._resultMatrix):new G$yT,!G$A.isWebGL&&this.currDisplayData.uvs||G$A.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var G$q=G$t._tempMatrix;G$q.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(G$q.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(G$j=!0,G$q.rotate(-Math.PI/2)),G$yT.mul(G$q,G$yT.TEMP,G$J)}else G$yT.TEMP.copyTo(G$J);G$j?G$T.drawTexture(G$D,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,G$J):G$T.drawTexture(G$D,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,G$J)}}}break;case 1:if(null==(G$p=G$w?(null==this._skinSprite&&(this._skinSprite=G$t.createSkinMesh()),this._skinSprite):G$t.createSkinMesh()))return;var G$M;if(null==this.currDisplayData.bones){var G$z,G$b=this.currDisplayData.weights;this.deformData&&(G$b=this.deformData),G$z=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=G$B.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=G$B.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=G$b;this.currDisplayData.triangles.length;G$M=this.currDisplayData.triangles,G$p.init2(G$D,null,G$M,this._mVerticleArr,G$z);var G$K,G$Y=this.getDisplayMatrix();if(this._parentMatrix)if(G$Y)G$yT.mul(G$Y,this._parentMatrix,G$yT.TEMP),G$K=G$w?(null==this._resultMatrix&&(this._resultMatrix=new G$yT),this._resultMatrix):new G$yT,G$yT.TEMP.copyTo(G$K),G$p.transform=G$K}else this.skinMesh(G$l,G$p,G$u);G$T.drawSkin(G$p);break;case 2:if(null==(G$p=G$w?(null==this._skinSprite&&(this._skinSprite=G$t.createSkinMesh()),this._skinSprite):G$t.createSkinMesh()))return;this.skinMesh(G$l,G$p,G$u),G$T.drawSkin(G$p)}}},G$T.skinMesh=function(G$T,G$l,G$w){var G$u,G$p=this.currTexture,G$D=this.currDisplayData.bones;G$u=this._diyTexture?(G$p=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=G$B.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=G$B.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var G$P,G$j,G$J=this.currDisplayData.weights,G$q=this.currDisplayData.triangles,G$M=0,G$z=0,G$b=0,G$K=NaN,G$Y=NaN,G$t=0,G$A=0,G$L=[],G$i=0,G$W=0;if(this.deformData&&0<this.deformData.length){var G$m=0;for(G$i=0,G$W=G$D.length;G$i<G$W;){for(G$b=G$D[G$i++]+G$i,G$z=G$M=0;G$i<G$b;G$i++)G$j=G$T[G$D[G$i]],G$K=G$J[G$t]+this.deformData[G$m++],G$Y=G$J[G$t+1]+this.deformData[G$m++],G$A=G$J[G$t+2],G$M+=(G$K*G$j.a+G$Y*G$j.c+G$j.tx)*G$A,G$z+=(G$K*G$j.b+G$Y*G$j.d+G$j.ty)*G$A,G$t+=3;G$L.push(G$M,G$z)}}else for(G$i=0,G$W=G$D.length;G$i<G$W;){for(G$b=G$D[G$i++]+G$i,G$z=G$M=0;G$i<G$b;G$i++)G$j=G$T[G$D[G$i]],G$K=G$J[G$t],G$Y=G$J[G$t+1],G$A=G$J[G$t+2],G$M+=(G$K*G$j.a+G$Y*G$j.c+G$j.tx)*G$A,G$z+=(G$K*G$j.b+G$Y*G$j.d+G$j.ty)*G$A,G$t+=3;G$L.push(G$M,G$z)}this._mVerticleArr=G$L,G$P=G$q,G$l.init2(G$p,null,G$P,this._mVerticleArr,G$u)},G$T.drawBonePoint=function(G$T){G$T&&this._parentMatrix&&G$T.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},G$T.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},G$T.getMatrix=function(){return this._resultMatrix},G$T.copy=function(){var G$T=new G$t;return G$T.type="copy",G$T.name=this.name,G$T.attachmentName=this.attachmentName,G$T.srcDisplayIndex=this.srcDisplayIndex,G$T.parent=this.parent,G$T.displayIndex=this.displayIndex,G$T.templet=this.templet,G$T.currSlotData=this.currSlotData,G$T.currTexture=this.currTexture,G$T.currDisplayData=this.currDisplayData,G$T},G$t.createSkinMesh=function(){return G$A.isWebGL||G$A.isConchApp?G$K.skinAniSprite():(G$A.isWebGL,null)},G$w(G$t,["_tempMatrix",function(){return this._tempMatrix=new G$yT}]),G$t}(),G$FT=function(){function G$T(){this.skinName=null,this.deformSlotDataList=[]}return G$u(G$T,"laya.ani.bone.DeformAniData"),G$T}(),G$OT=function(){function G$T(){this.deformSlotDisplayList=[]}return G$u(G$T,"laya.ani.bone.DeformSlotData"),G$T}(),G$$T=function(){function G$T(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}G$u(G$T,"laya.ani.bone.DeformSlotDisplayData");var G$l=G$T.prototype;return G$l.binarySearch1=function(G$T,G$l){var G$w=0,G$u=G$T.length-2;if(0==G$u)return 1;for(var G$p=G$u>>>1;;){if(G$T[Math.floor(G$p+1)]<=G$l?G$w=G$p+1:G$u=G$p,G$w==G$u)return G$w+1;G$p=G$w+G$u>>>1}return 0},G$l.apply=function(G$T,G$l,G$w){if(void 0===G$w&&(G$w=1),G$T+=.05,!(this.timeList.length<=0)){var G$u=0;if(!(G$T<this.timeList[0])){var G$p=this.vectices[0].length,G$D=[],G$P=this.binarySearch1(this.timeList,G$T);if(this.frameIndex=G$P,G$T>=this.timeList[this.timeList.length-1]){var G$j=this.vectices[this.vectices.length-1];if(G$w<1)for(G$u=0;G$u<G$p;G$u++)G$D[G$u]+=(G$j[G$u]-G$D[G$u])*G$w;else for(G$u=0;G$u<G$p;G$u++)G$D[G$u]=G$j[G$u];this.deformData=G$D}else{this.tweenKeyList[this.frameIndex];var G$J=this.vectices[this.frameIndex-1],G$q=this.vectices[this.frameIndex],G$M=this.timeList[this.frameIndex-1],G$z=this.timeList[this.frameIndex];G$w=this.tweenKeyList[G$P-1]?(G$T-G$M)/(G$z-G$M):0;var G$b=NaN;for(G$u=0;G$u<G$p;G$u++)G$b=G$J[G$u],G$D[G$u]=G$b+(G$q[G$u]-G$b)*G$w;this.deformData=G$D}}}},G$T}(),G$ZT=function(){function G$T(){this.time=NaN,this.drawOrder=[]}return G$u(G$T,"laya.ani.bone.DrawOrderData"),G$T}(),G$HT=function(){function G$T(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return G$u(G$T,"laya.ani.bone.EventData"),G$T}(),G$i=function(){function G$uT(G$T,G$l){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=G$T,this._targetBone=G$l[G$T.targetBoneIndex],this.isSpine=G$T.isSpine,null==this._bones&&(this._bones=[]);for(var G$w=this._bones.length=0,G$u=G$T.boneIndexs.length;G$w<G$u;G$w++)this._bones.push(G$l[G$T.boneIndexs[G$w]]);this.name=G$T.name,this.mix=G$T.mix,this.bendDirection=G$T.bendDirection}G$u(G$uT,"laya.ani.bone.IkConstraint");var G$T=G$uT.prototype;return G$T.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},G$T._applyIk1=function(G$T,G$l,G$w,G$u){var G$p=G$T.parentBone,G$D=1/(G$p.resultMatrix.a*G$p.resultMatrix.d-G$p.resultMatrix.b*G$p.resultMatrix.c),G$P=G$l-G$p.resultMatrix.tx,G$j=G$w-G$p.resultMatrix.ty,G$J=(G$P*G$p.resultMatrix.d-G$j*G$p.resultMatrix.c)*G$D-G$T.transform.x,G$q=(G$j*G$p.resultMatrix.a-G$P*G$p.resultMatrix.b)*G$D-G$T.transform.y,G$M=Math.atan2(G$q,G$J)*G$uT.radDeg-0-G$T.transform.skX;G$T.transform.scX<0&&(G$M+=180),180<G$M?G$M-=360:G$M<-180&&(G$M+=360),G$T.transform.skX=G$T.transform.skY=G$T.transform.skX+G$M*G$u,G$T.update()},G$T.updatePos=function(G$T,G$l){this._sp&&this._sp.pos(G$T,G$l)},G$T._applyIk2=function(G$T,G$l,G$w,G$u,G$p,G$D){if(0!=G$D){var G$P=G$T.resultTransform.x,G$j=G$T.resultTransform.y,G$J=G$T.transform.scX,G$q=G$T.transform.scY,G$M=G$l.transform.scX,G$z=0,G$b=0,G$K=0;G$K=G$J<0?(G$J=-G$J,G$z=180,-1):(G$z=0,1),G$q<0&&(G$q=-G$q,G$K=-G$K),G$b=G$M<0?(G$M=-G$M,180):0;var G$Y=G$l.resultTransform.x,G$t=NaN,G$A=NaN,G$L=NaN,G$i=G$T.resultMatrix.a,G$W=G$T.resultMatrix.c,G$m=G$T.resultMatrix.b,G$c=G$T.resultMatrix.d,G$a=Math.abs(G$J-G$q)<=1e-4;G$L=G$a?(G$A=G$i*G$Y+G$W*(G$t=G$l.resultTransform.y)+G$T.resultMatrix.tx,G$m*G$Y+G$c*G$t+G$T.resultMatrix.ty):(G$t=0,G$A=G$i*G$Y+G$T.resultMatrix.tx,G$m*G$Y+G$T.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new G$DT,G$pT.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(G$w,G$u,15,"#ffff00"),this._sp.graphics.drawCircle(G$A,G$L,15,"#ff00ff")),G$T.setRotation(Math.atan2(G$L-G$T.resultMatrix.ty,G$A-G$T.resultMatrix.tx));var G$B=G$T.parentBone;G$i=G$B.resultMatrix.a,G$W=G$B.resultMatrix.c,G$m=G$B.resultMatrix.b;var G$s=1/(G$i*(G$c=G$B.resultMatrix.d)-G$W*G$m),G$r=G$w-G$B.resultMatrix.tx,G$I=G$u-G$B.resultMatrix.ty,G$Q=(G$r*G$c-G$I*G$W)*G$s-G$P,G$o=(G$I*G$i-G$r*G$m)*G$s-G$j,G$e=((G$r=G$A-G$B.resultMatrix.tx)*G$c-(G$I=G$L-G$B.resultMatrix.ty)*G$W)*G$s-G$P,G$y=(G$I*G$i-G$r*G$m)*G$s-G$j,G$v=Math.sqrt(G$e*G$e+G$y*G$y),G$x=G$l.length*G$M,G$R=NaN,G$F=NaN;if(G$a){var G$O=(G$Q*G$Q+G$o*G$o-G$v*G$v-(G$x*=G$J)*G$x)/(2*G$v*G$x);G$O<-1?G$O=-1:1<G$O&&(G$O=1),G$F=Math.acos(G$O)*G$p,G$i=G$v+G$x*G$O,G$W=G$x*Math.sin(G$F),G$R=Math.atan2(G$o*G$i-G$Q*G$W,G$Q*G$i+G$o*G$W)}else{var G$$=(G$i=G$J*G$x)*G$i,G$Z=(G$W=G$q*G$x)*G$W,G$H=G$Q*G$Q+G$o*G$o,G$X=Math.atan2(G$o,G$Q),G$k=-2*G$Z*G$v,G$n=G$Z-G$$;if(0<(G$c=G$k*G$k-4*G$n*(G$m=G$Z*G$v*G$v+G$$*G$H-G$$*G$Z))){var G$d=Math.sqrt(G$c);G$k<0&&(G$d=-G$d);var G$G=(G$d=-(G$k+G$d)/2)/G$n,G$N=G$m/G$d,G$h=Math.abs(G$G)<Math.abs(G$N)?G$G:G$N;G$h*G$h<=G$H&&(G$I=Math.sqrt(G$H-G$h*G$h)*G$p,G$R=G$X-Math.atan2(G$I,G$h),G$F=Math.atan2(G$I/G$q,(G$h-G$v)/G$J))}var G$g=0,G$f=Number.MAX_VALUE,G$U=0,G$E=0,G$V=0,G$C=0,G$S=0,G$_=0;G$C<(G$c=(G$r=G$v+G$i)*G$r)&&(G$V=0,G$C=G$c,G$S=G$r),(G$c=(G$r=G$v-G$i)*G$r)<G$f&&(G$g=Math.PI,G$f=G$c,G$U=G$r);var G$TT=Math.acos(-G$i*G$v/(G$$-G$Z));(G$c=(G$r=G$i*Math.cos(G$TT)+G$v)*G$r+(G$I=G$W*Math.sin(G$TT))*G$I)<G$f&&(G$g=G$TT,G$f=G$c,G$U=G$r,G$E=G$I),G$C<G$c&&(G$V=G$TT,G$C=G$c,G$S=G$r,G$_=G$I),G$F=G$H<=(G$f+G$C)/2?(G$R=G$X-Math.atan2(G$E*G$p,G$U),G$g*G$p):(G$R=G$X-Math.atan2(G$_*G$p,G$S),G$V*G$p)}var G$lT=Math.atan2(G$t,G$Y)*G$K,G$wT=G$T.resultTransform.skX;180<(G$R=(G$R-G$lT)*G$uT.radDeg+G$z-G$wT)?G$R-=360:G$R<-180&&(G$R+=360),G$T.resultTransform.x=G$P,G$T.resultTransform.y=G$j,G$T.resultTransform.skX=G$T.resultTransform.skY=G$wT+G$R*G$D,G$wT=G$l.resultTransform.skX,180<(G$F=((G$F+G$lT)*G$uT.radDeg-0)*G$K+G$b-(G$wT%=360))?G$F-=360:G$F<-180&&(G$F+=360),G$l.resultTransform.x=G$Y,G$l.resultTransform.y=G$t,G$l.resultTransform.skX=G$l.resultTransform.skY=G$l.resultTransform.skY+G$F*G$D,G$T.update()}},G$T._applyIk3=function(G$T,G$l,G$w,G$u,G$p,G$D){if(0!=G$D){var G$P,G$j,G$J=G$l.resultMatrix.a*G$l.length,G$q=G$l.resultMatrix.b*G$l.length,G$M=G$J*G$J+G$q*G$q,G$z=Math.sqrt(G$M),G$b=G$T.resultMatrix.tx,G$K=G$T.resultMatrix.ty,G$Y=G$l.resultMatrix.tx,G$t=G$l.resultMatrix.ty,G$A=G$Y-G$b,G$L=G$t-G$K,G$i=G$A*G$A+G$L*G$L,G$W=Math.sqrt(G$i),G$m=(G$A=G$w-G$T.resultMatrix.tx)*G$A+(G$L=G$u-G$T.resultMatrix.ty)*G$L,G$c=Math.sqrt(G$m);if(G$z+G$W<=G$c||G$c+G$z<=G$W||G$c+G$W<=G$z){var G$a=NaN;G$Y=G$b+(G$a=G$z+G$W<=G$c?1:-1)*(G$w-G$b)*G$W/G$c,G$t=G$K+G$a*(G$u-G$K)*G$W/G$c}else{var G$B=(G$i-G$M+G$m)/(2*G$m),G$s=Math.sqrt(G$i-G$B*G$B*G$m)/G$c,G$r=G$b+G$A*G$B,G$I=G$K+G$L*G$B,G$Q=-G$L*G$s,G$o=G$A*G$s;G$t=0<G$p?(G$Y=G$r-G$Q,G$I-G$o):(G$Y=G$r+G$Q,G$I+G$o)}G$P=G$Y,G$j=G$t,this.isDebug&&(this._sp||(this._sp=new G$DT,G$pT.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(G$b,G$K,15,"#ff00ff"),this._sp.graphics.drawCircle(G$w,G$u,15,"#ffff00"),this._sp.graphics.drawCircle(G$P,G$j,15,"#ff00ff"));var G$e,G$y;G$e=Math.atan2(G$j-G$T.resultMatrix.ty,G$P-G$T.resultMatrix.tx),G$T.setRotation(G$e),(G$y=G$uT._tempMatrix).identity(),G$y.rotate(G$e),G$y.scale(G$T.resultMatrix.getScaleX(),G$T.resultMatrix.getScaleY()),G$y.translate(G$T.resultMatrix.tx,G$T.resultMatrix.ty),G$y.copyTo(G$T.resultMatrix),G$T.updateChild();var G$v,G$x;G$v=Math.atan2(G$u-G$j,G$w-G$P),G$l.setRotation(G$v),(G$x=G$uT._tempMatrix).identity(),G$x.rotate(G$v),G$x.scale(G$l.resultMatrix.getScaleX(),G$l.resultMatrix.getScaleY()),G$x.translate(G$P,G$j),G$y.copyTo(G$l.resultMatrix),G$l.updateChild()}},G$w(G$uT,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new G$yT}]),G$uT}(),G$XT=function(){function G$T(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return G$u(G$T,"laya.ani.bone.IkConstraintData"),G$T}(),G$c=function(){function G$x(G$T,G$l){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=G$T,this.position=G$T.position,this.spacing=G$T.spacing,this.rotateMix=G$T.rotateMix,this.translateMix=G$T.translateMix,this.bones=[];for(var G$w=this.data.bones,G$u=0,G$p=G$w.length;G$u<G$p;G$u++)this.bones.push(G$l[G$w[G$u]])}G$u(G$x,"laya.ani.bone.PathConstraint");var G$T=G$x.prototype;return G$T.apply=function(G$T,G$l){if(this.target){var G$w=this.translateMix,G$u=this.translateMix,G$p=0<G$u,G$D=this.data.spacingMode,G$P="length"==G$D,G$j=this.data.rotateMode,G$J="tangent"==G$j,G$q="chainScale"==G$j,G$M=[],G$z=this.bones.length,G$b=G$J?G$z:G$z+1,G$K=[];(this._spaces=G$K)[0]=this.position;var G$Y=this.spacing;if(G$q||G$P)for(var G$t=0,G$A=G$b-1;G$t<G$A;){var G$L=this.bones[G$t],G$i=G$L.length,G$W=G$i*G$L.resultMatrix.a,G$m=G$i*G$L.resultMatrix.b;G$i=Math.sqrt(G$W*G$W+G$m*G$m),G$q&&(G$M[G$t]=G$i),G$K[++G$t]=G$P?Math.max(0,G$i+G$Y):G$Y}else for(G$t=1;G$t<G$b;G$t++)G$K[G$t]=G$Y;var G$c=this.computeWorldPositions(this.target,G$T,G$l,G$b,G$J,"percent"==this.data.positionMode,"percent"==G$D);if(this._debugKey){for(G$t=0;G$t<G$c.length;G$t++)G$l.drawCircle(G$c[G$t++],G$c[G$t++],5,"#00ff00");var G$a=[];for(G$t=0;G$t<G$c.length;G$t++)G$a.push(G$c[G$t++],G$c[G$t++]);G$l.drawLines(0,0,G$a,"#ff0000")}var G$B=G$c[0],G$s=G$c[1],G$r=this.data.offsetRotation,G$I="chain"==G$j&&0==G$r,G$Q=NaN;for(G$t=0,G$Q=3;G$t<G$z;G$t++,G$Q+=3){(G$L=this.bones[G$t]).resultMatrix.tx+=(G$B-G$L.resultMatrix.tx)*G$w,G$L.resultMatrix.ty+=(G$s-G$L.resultMatrix.ty)*G$w;var G$o=(G$W=G$c[G$Q])-G$B,G$e=(G$m=G$c[G$Q+1])-G$s;if(G$q&&0!=(G$i=G$M[G$t])){var G$y=(Math.sqrt(G$o*G$o+G$e*G$e)/G$i-1)*G$u+1;G$L.resultMatrix.a*=G$y,G$L.resultMatrix.c*=G$y}if(G$B=G$W,G$s=G$m,G$p){var G$v=G$L.resultMatrix.a,G$x=G$L.resultMatrix.c,G$R=G$L.resultMatrix.b,G$F=G$L.resultMatrix.d,G$O=NaN,G$$=NaN,G$Z=NaN;G$O=G$J?G$c[G$Q-1]:0==G$K[G$t+1]?G$c[G$Q+2]:Math.atan2(G$e,G$o),G$O-=Math.atan2(G$R,G$v)-G$r/180*Math.PI,G$I&&(G$$=Math.cos(G$O),G$Z=Math.sin(G$O),G$B+=((G$i=G$L.length)*(G$$*G$v-G$Z*G$R)-G$o)*G$u,G$s+=(G$i*(G$Z*G$v+G$$*G$R)-G$e)*G$u),G$O>Math.PI?G$O-=2*Math.PI:G$O<-Math.PI&&(G$O+=2*Math.PI),G$O*=G$u,G$$=Math.cos(G$O),G$Z=Math.sin(G$O),G$L.resultMatrix.a=G$$*G$v-G$Z*G$R,G$L.resultMatrix.c=G$$*G$x-G$Z*G$F,G$L.resultMatrix.b=G$Z*G$v+G$$*G$R,G$L.resultMatrix.d=G$Z*G$x+G$$*G$F}}}},G$T.computeWorldVertices2=function(G$T,G$l,G$w,G$u,G$p,G$D){var G$P,G$j,G$J=G$T.currDisplayData.bones,G$q=G$T.currDisplayData.weights,G$M=G$T.currDisplayData.triangles,G$z=0,G$b=0,G$K=0,G$Y=0,G$t=0,G$A=0,G$L=0,G$i=0,G$W=0,G$m=0,G$c=0;if(null!=G$J){for(G$z=0;G$z<G$w;G$z+=2)G$b+=(G$Y=G$J[G$b])+1,G$K+=G$Y;var G$a=G$l;for(G$t=G$D,G$A=3*G$K;G$t<G$u;G$t+=2){for(G$i=G$L=0,G$Y=G$J[G$b++],G$Y+=G$b;G$b<G$Y;G$b++,G$A+=3){G$P=G$a[G$J[G$b]].resultMatrix,G$W=G$q[G$A],G$m=G$q[G$A+1];var G$B=G$q[G$A+2];G$L+=(G$W*G$P.a+G$m*G$P.c+G$P.tx)*G$B,G$i+=(G$W*G$P.b+G$m*G$P.d+G$P.ty)*G$B}G$p[G$t]=G$L,G$p[G$t+1]=G$i}}else{var G$s,G$r;if(G$M||(G$M=G$q),G$T.deformData&&(G$M=G$T.deformData),G$s=G$T.parent,G$l)for(G$c=G$l.length,G$z=0;G$z<G$c;G$z++)if(G$l[G$z].name==G$s){G$j=G$l[G$z];break}G$j&&(G$r=G$j.resultMatrix),G$r||(G$r=G$x._tempMt);var G$I=G$r.tx,G$Q=G$r.ty,G$o=G$r.a,G$e=G$r.b,G$y=G$r.c,G$v=G$r.d;for(G$j&&(G$v*=G$j.d),G$b=G$w,G$t=G$D;G$t<G$u;G$b+=2,G$t+=2)G$W=G$M[G$b],G$m=G$M[G$b+1],G$p[G$t]=G$W*G$o+G$m*G$e+G$I,G$p[G$t+1]=-(G$W*G$y+G$m*G$v+G$Q)}},G$T.computeWorldPositions=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P){G$T.currDisplayData.bones,G$T.currDisplayData.weights,G$T.currDisplayData.triangles;var G$j=[],G$J=0,G$q=G$T.currDisplayData.verLen,G$M=this.position,G$z=this._spaces,G$b=[],G$K=[],G$Y=G$q/6,G$t=-1,G$A=NaN,G$L=0,G$i=0,G$W=NaN,G$m=NaN,G$c=NaN,G$a=NaN;if(G$Y--,G$q-=4,this.computeWorldVertices2(G$T,G$l,2,G$q,G$j,0),this._debugKey)for(G$J=0;G$J<G$j.length;)G$w.drawCircle(G$j[G$J++],G$j[G$J++],10,"#ff0000");G$b=G$j,this._curves.length=G$Y;var G$B=this._curves,G$s=G$b[G$A=0],G$r=G$b[1],G$I=0,G$Q=0,G$o=0,G$e=0,G$y=0,G$v=0,G$x=NaN,G$R=NaN,G$F=NaN,G$O=NaN,G$$=NaN,G$Z=NaN,G$H=NaN,G$X=NaN,G$k=0;for(G$J=0,G$k=2;G$J<G$Y;G$J++,G$k+=6)G$I=G$b[G$k],G$Q=G$b[G$k+1],G$o=G$b[G$k+2],G$e=G$b[G$k+3],G$$=2*(G$x=.1875*(G$s-2*G$I+G$o))+(G$F=.09375*(3*(G$I-G$o)-G$s+(G$y=G$b[G$k+4]))),G$Z=2*(G$R=.1875*(G$r-2*G$Q+G$e))+(G$O=.09375*(3*(G$Q-G$e)-G$r+(G$v=G$b[G$k+5]))),G$H=.75*(G$I-G$s)+G$x+.16666667*G$F,G$X=.75*(G$Q-G$r)+G$R+.16666667*G$O,G$A+=Math.sqrt(G$H*G$H+G$X*G$X),G$H+=G$$,G$X+=G$Z,G$$+=G$F,G$Z+=G$O,G$A+=Math.sqrt(G$H*G$H+G$X*G$X),G$H+=G$$,G$X+=G$Z,G$A+=Math.sqrt(G$H*G$H+G$X*G$X),G$H+=G$$+G$F,G$X+=G$Z+G$O,G$A+=Math.sqrt(G$H*G$H+G$X*G$X),G$B[G$J]=G$A,G$s=G$y,G$r=G$v;if(G$D&&(G$M*=G$A),G$P)for(G$J=0;G$J<G$u;G$J++)G$z[G$J]*=G$A;var G$n=this._segments,G$d=0,G$G=0;for(G$G=G$i=G$L=G$J=0;G$J<G$u;G$J++,G$L+=3)if((G$W=G$M+=G$m=G$z[G$J])<0)this.addBeforePosition(G$W,G$b,0,G$K,G$L);else if(G$A<G$W)this.addAfterPosition(G$W-G$A,G$b,G$q-4,G$K,G$L);else{for(;;G$i++)if(!((G$a=G$B[G$i])<G$W)){0==G$i?G$W/=G$a:G$W=(G$W-(G$c=G$B[G$i-1]))/(G$a-G$c);break}if(G$i!=G$t){var G$N=6*(G$t=G$i);for(G$s=G$b[G$N],G$r=G$b[G$N+1],G$I=G$b[G$N+2],G$Q=G$b[G$N+3],G$o=G$b[G$N+4],G$e=G$b[G$N+5],G$$=2*(G$x=.03*(G$s-2*G$I+G$o))+(G$F=.006*(3*(G$I-G$o)-G$s+(G$y=G$b[G$N+6]))),G$Z=2*(G$R=.03*(G$r-2*G$Q+G$e))+(G$O=.006*(3*(G$Q-G$e)-G$r+(G$v=G$b[G$N+7]))),G$H=.3*(G$I-G$s)+G$x+.16666667*G$F,G$X=.3*(G$Q-G$r)+G$R+.16666667*G$O,G$d=Math.sqrt(G$H*G$H+G$X*G$X),G$n[0]=G$d,G$N=1;G$N<8;G$N++)G$H+=G$$,G$X+=G$Z,G$$+=G$F,G$Z+=G$O,G$d+=Math.sqrt(G$H*G$H+G$X*G$X),G$n[G$N]=G$d;G$H+=G$$,G$X+=G$Z,G$d+=Math.sqrt(G$H*G$H+G$X*G$X),G$n[8]=G$d,G$H+=G$$+G$F,G$X+=G$Z+G$O,G$d+=Math.sqrt(G$H*G$H+G$X*G$X),G$n[9]=G$d,G$G=0}for(G$W*=G$d;;G$G++)if(!((G$a=G$n[G$G])<G$W)){0==G$G?G$W/=G$a:G$W=G$G+(G$W-(G$c=G$n[G$G-1]))/(G$a-G$c);break}this.addCurvePosition(.1*G$W,G$s,G$r,G$I,G$Q,G$o,G$e,G$y,G$v,G$K,G$L,G$p||0<G$J&&0==G$m)}return G$K},G$T.addBeforePosition=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$l[G$w],G$P=G$l[G$w+1],G$j=G$l[G$w+2]-G$D,G$J=G$l[G$w+3]-G$P,G$q=Math.atan2(G$J,G$j);G$u[G$p]=G$D+G$T*Math.cos(G$q),G$u[G$p+1]=G$P+G$T*Math.sin(G$q),G$u[G$p+2]=G$q},G$T.addAfterPosition=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$l[G$w+2],G$P=G$l[G$w+3],G$j=G$D-G$l[G$w],G$J=G$P-G$l[G$w+1],G$q=Math.atan2(G$J,G$j);G$u[G$p]=G$D+G$T*Math.cos(G$q),G$u[G$p+1]=G$P+G$T*Math.sin(G$q),G$u[G$p+2]=G$q},G$T.addCurvePosition=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M,G$z){0==G$T&&(G$T=1e-4);var G$b=G$T*G$T,G$K=G$b*G$T,G$Y=1-G$T,G$t=G$Y*G$Y,G$A=G$t*G$Y,G$L=G$Y*G$T,G$i=3*G$L,G$W=G$Y*G$i,G$m=G$i*G$T,G$c=G$l*G$A+G$u*G$W+G$D*G$m+G$j*G$K,G$a=G$w*G$A+G$p*G$W+G$P*G$m+G$J*G$K;G$q[G$M]=G$c,G$q[G$M+1]=G$a,G$q[G$M+2]=G$z?Math.atan2(G$a-(G$w*G$t+G$p*G$L*2+G$P*G$b),G$c-(G$l*G$t+G$u*G$L*2+G$D*G$b)):0},G$x.NONE=-1,G$x.BEFORE=-2,G$x.AFTER=-3,G$w(G$x,["_tempMt",function(){return this._tempMt=new G$yT}]),G$x}(),G$kT=function(){function G$T(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return G$u(G$T,"laya.ani.bone.PathConstraintData"),G$T}(),G$nT=function(){function G$T(){this.name=null,this.slotArr=[]}return G$u(G$T,"laya.ani.bone.SkinData"),G$T}(),G$dT=function(){function G$T(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}G$u(G$T,"laya.ani.bone.SkinSlotDisplayData");var G$l=G$T.prototype;return G$l.createTexture=function(G$T){return this.texture||(this.texture=new G$vT(G$T.bitmap,this.uvs),G$T.bitmap.alphaTexture&&(this.texture.alphaTexture=new G$vT(G$T.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=G$T.height,this.texture.height=G$T.width,this.texture.offsetX=-G$T.offsetX,this.texture.offsetY=-G$T.offsetY,this.texture.sourceWidth=G$T.sourceHeight,this.texture.sourceHeight=G$T.sourceWidth):(this.texture.width=G$T.width,this.texture.height=G$T.height,this.texture.offsetX=-G$T.offsetX,this.texture.offsetY=-G$T.offsetY,this.texture.sourceWidth=G$T.sourceWidth,this.texture.sourceHeight=G$T.sourceHeight),G$A.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},G$l.destory=function(){this.texture&&this.texture.destroy()},G$T}(),G$GT=function(){function G$T(){this.name=null,this.displayArr=[]}return G$u(G$T,"laya.ani.bone.SlotData"),G$T.prototype.getDisplayByName=function(G$T){for(var G$l=0,G$w=this.displayArr.length;G$l<G$w;G$l++)if(this.displayArr[G$l].attachmentName==G$T)return G$l;return-1},G$T}(),G$a=function(){function G$T(G$T,G$l){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=G$t(2,0),this._data=G$T,null==this._bones&&(this._bones=[]),this.target=G$l[G$T.targetIndex];var G$w,G$u=0;for(G$u=0,G$w=G$T.boneIndexs.length;G$u<G$w;G$u++)this._bones.push(G$l[G$T.boneIndexs[G$u]]);this.rotateMix=G$T.rotateMix,this.translateMix=G$T.translateMix,this.scaleMix=G$T.scaleMix,this.shearMix=G$T.shearMix}return G$u(G$T,"laya.ani.bone.TfConstraint"),G$T.prototype.apply=function(){for(var G$T,G$l=this.target.resultMatrix.a,G$w=this.target.resultMatrix.b,G$u=this.target.resultMatrix.c,G$p=this.target.resultMatrix.d,G$D=0,G$P=this._bones.length;G$D<G$P;G$D++){if(G$T=this._bones[G$D],0<this.rotateMix){var G$j=G$T.resultMatrix.a,G$J=G$T.resultMatrix.b,G$q=G$T.resultMatrix.c,G$M=G$T.resultMatrix.d,G$z=Math.atan2(G$u,G$l)-Math.atan2(G$q,G$j)+this._data.offsetRotation*Math.PI/180;G$z>Math.PI?G$z-=2*Math.PI:G$z<-Math.PI&&(G$z+=2*Math.PI),G$z*=this.rotateMix;var G$b=Math.cos(G$z),G$K=Math.sin(G$z);G$T.resultMatrix.a=G$b*G$j-G$K*G$q,G$T.resultMatrix.b=G$b*G$J-G$K*G$M,G$T.resultMatrix.c=G$K*G$j+G$b*G$q,G$T.resultMatrix.d=G$K*G$J+G$b*G$M}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),G$T.resultMatrix.tx+=(this._temp[0]-G$T.resultMatrix.tx)*this.translateMix,G$T.resultMatrix.ty+=(this._temp[1]-G$T.resultMatrix.ty)*this.translateMix,G$T.updateChild()),0<this.scaleMix){var G$Y=Math.sqrt(G$T.resultMatrix.a*G$T.resultMatrix.a+G$T.resultMatrix.c*G$T.resultMatrix.c),G$t=Math.sqrt(G$l*G$l+G$u*G$u),G$A=1e-5<G$Y?(G$Y+(G$t-G$Y+this._data.offsetScaleX)*this.scaleMix)/G$Y:0;G$T.resultMatrix.a*=G$A,G$T.resultMatrix.c*=G$A,G$Y=Math.sqrt(G$T.resultMatrix.b*G$T.resultMatrix.b+G$T.resultMatrix.d*G$T.resultMatrix.d),G$t=Math.sqrt(G$w*G$w+G$p*G$p),G$A=1e-5<G$Y?(G$Y+(G$t-G$Y+this._data.offsetScaleY)*this.scaleMix)/G$Y:0,G$T.resultMatrix.b*=G$A,G$T.resultMatrix.d*=G$A}if(0<this.shearMix){G$J=G$T.resultMatrix.b,G$M=G$T.resultMatrix.d;var G$L=Math.atan2(G$M,G$J);(G$z=Math.atan2(G$p,G$w)-Math.atan2(G$u,G$l)-(G$L-Math.atan2(G$T.resultMatrix.c,G$T.resultMatrix.a)))>Math.PI?G$z-=2*Math.PI:G$z<-Math.PI&&(G$z+=2*Math.PI),G$z=G$L+(G$z+this._data.offsetShearY*Math.PI/180)*this.shearMix,G$A=Math.sqrt(G$J*G$J+G$M*G$M),G$T.resultMatrix.b=Math.cos(G$z)*G$A,G$T.resultMatrix.d=Math.sin(G$z)*G$A}}},G$T}(),G$NT=function(){function G$T(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return G$u(G$T,"laya.ani.bone.TfConstraintData"),G$T}(),G$hT=function(){function G$T(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}G$u(G$T,"laya.ani.bone.Transform");var G$l=G$T.prototype;return G$l.initData=function(G$T){null!=G$T.x&&(this.x=G$T.x),null!=G$T.y&&(this.y=G$T.y),null!=G$T.skX&&(this.skX=G$T.skX),null!=G$T.skY&&(this.skY=G$T.skY),null!=G$T.scX&&(this.scX=G$T.scX),null!=G$T.scY&&(this.scY=G$T.scY)},G$l.getMatrix=function(){var G$T;return(G$T=this.mMatrix?this.mMatrix:this.mMatrix=new G$yT).identity(),G$T.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(G$T,this.skewX*Math.PI/180,this.skewY*Math.PI/180),G$T.rotate(this.skX*Math.PI/180),G$T.translate(this.x,this.y),G$T},G$l.skew=function(G$T,G$l,G$w){var G$u=Math.sin(G$w),G$p=Math.cos(G$w),G$D=Math.sin(G$l),G$P=Math.cos(G$l);return G$T.setTo(G$T.a*G$P-G$T.b*G$u,G$T.a*G$D+G$T.b*G$p,G$T.c*G$P-G$T.d*G$u,G$T.c*G$D+G$T.d*G$p,G$T.tx*G$P-G$T.ty*G$u,G$T.tx*G$D+G$T.ty*G$p),G$T},G$T}(),G$B=function(){function G$T(){}return G$u(G$T,"laya.ani.bone.UVTools"),G$T.getRelativeUV=function(G$T,G$l,G$w){var G$u=G$T[0],G$p=G$T[2]-G$T[0],G$D=G$T[1],G$P=G$T[5]-G$T[1];G$w||(G$w=[]),G$w.length=G$l.length;var G$j,G$J=0;G$j=G$w.length;var G$q=1/G$p,G$M=1/G$P;for(G$J=0;G$J<G$j;G$J+=2)G$w[G$J]=(G$l[G$J]-G$u)*G$q,G$w[G$J+1]=(G$l[G$J+1]-G$D)*G$M;return G$w},G$T.getAbsoluteUV=function(G$T,G$l,G$w){if(0==G$T[0]&&0==G$T[1]&&1==G$T[4]&&1==G$T[5])return G$w?(G$L.copyArray(G$w,G$l),G$w):G$l;var G$u=G$T[0],G$p=G$T[2]-G$T[0],G$D=G$T[1],G$P=G$T[5]-G$T[1];G$w||(G$w=[]),G$w.length=G$l.length;var G$j,G$J=0;for(G$j=G$w.length,G$J=0;G$J<G$j;G$J+=2)G$w[G$J]=G$l[G$J]*G$p+G$u,G$w[G$J+1]=G$l[G$J+1]*G$P+G$D;return G$w},G$T}(),G$x=function(){function G$T(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return G$u(G$T,"laya.ani.KeyFramesContent"),G$T}(),G$s=function(){function G$M(){}return G$u(G$M,"laya.ani.math.BezierLerp"),G$M.getBezierRate=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$M._getBezierParamKey(G$l,G$w,G$u,G$p),G$P=100*G$D+G$T;if(G$M._bezierResultCache[G$P])return G$M._bezierResultCache[G$P];var G$j,G$J=G$M._getBezierPoints(G$l,G$w,G$u,G$p,G$D),G$q=0;for(G$j=G$J.length,G$q=0;G$q<G$j;G$q+=2)if(G$T<=G$J[G$q])return G$M._bezierResultCache[G$P]=G$J[G$q+1],G$J[G$q+1];return G$M._bezierResultCache[G$P]=1},G$M._getBezierParamKey=function(G$T,G$l,G$w,G$u){return 100*(100*(100*(100*G$T+G$l)+G$w)+G$u)},G$M._getBezierPoints=function(G$T,G$l,G$w,G$u,G$p){return G$M._bezierPointsCache[G$p]?G$M._bezierPointsCache[G$p]:(G$D=[0,0,G$T,G$l,G$w,G$u,1,1],G$P=(new G$j).getBezierPoints(G$D,100,3),G$M._bezierPointsCache[G$p]=G$P);var G$D,G$P},G$M._bezierResultCache={},G$M._bezierPointsCache={},G$M}(),G$r=function(G$T){function G$l(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,G$l.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}G$u(G$l,"laya.ani.AnimationPlayer",G$p);var G$w=G$l.prototype;return G$pT.imps(G$w,{"laya.resource.IDestroy":!0}),G$w._onTempletLoadedComputeFullKeyframeIndices=function(G$T,G$l,G$w){this._templet===G$w&&this._cachePlayRate===G$T&&this._cacheFrameRate===G$l&&this._computeFullKeyframeIndices()},G$w._computeFullKeyframeIndices=function(){for(var G$T=this._fullFrames=[],G$l=this._templet,G$w=this._cacheFrameRateInterval*this._cachePlayRate,G$u=0,G$p=G$l.getAnimationCount();G$u<G$p;G$u++){for(var G$D=[],G$P=0,G$j=G$l.getAnimation(G$u).nodes.length;G$P<G$j;G$P++){for(var G$J=G$l.getAnimation(G$u).nodes[G$P],G$q=Math.floor(G$J.playTime/G$w+.01),G$M=new Uint16Array(G$q+1),G$z=-1,G$b=0,G$K=G$J.keyFrame.length;G$b<G$K;G$b++){var G$Y=G$J.keyFrame[G$b],G$t=G$Y.startTime,G$A=G$t+G$Y.duration+G$w;do{for(var G$L=Math.floor(G$t/G$w+.5),G$i=G$z+1;G$i<G$L;G$i++)G$M[G$i]=G$b;G$M[G$z=G$L]=G$b,G$t+=G$w}while(G$t<=G$A)}G$D.push(G$M)}G$T.push(G$D)}},G$w._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},G$w._calculatePlayDuration=function(){if(0!==this.state){var G$T=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=G$T),this._playEnd>G$T&&(this._playEnd=G$T),this._playDuration=this._playEnd-this._playStart}},G$w._setPlayParams=function(G$T,G$l){this._currentTime=G$T,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/G$l+.01),0),this._currentFrameTime=this._currentKeyframeIndex*G$l},G$w._setPlayParamsWhenStop=function(G$T,G$l){this._currentTime=G$T,this._currentKeyframeIndex=Math.max(Math.floor(G$T/G$l+.01),0),this._currentFrameTime=this._currentKeyframeIndex*G$l,this._currentAnimationClipIndex=-1},G$w._update=function(G$T){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var G$l=this._cacheFrameRateInterval*this._cachePlayRate,G$w=0;this._startUpdateLoopCount!==G$Y.loopCount&&(G$w=G$T*this.playbackRate,this._elapsedPlaybackTime+=G$w);var G$u=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=G$u)return this._setPlayParamsWhenStop(G$u,G$l),void this.event("stopped");if(G$w+=this._currentTime,0<G$u)if(G$u<=G$w)do{if(G$w-=G$u,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(G$u,G$l),this._stopWhenCircleFinish=!1,void this.event("stopped");G$w<G$u&&(this._setPlayParams(G$w,G$l),this.event("complete"))}while(G$u<=G$w);else this._setPlayParams(G$w,G$l);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(G$u,G$l),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},G$w._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},G$w.play=function(G$T,G$l,G$w,G$u,G$p){if(void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=1),void 0===G$w&&(G$w=2147483647),void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(G$w<0||G$u<0||G$p<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==G$p&&G$p<G$u)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=G$l,this._overallDuration=G$w,this._playStart=G$u,this._playEnd=G$p,this._paused=!1,this._currentAnimationClipIndex=G$T,this._currentKeyframeIndex=0,this._startUpdateLoopCount=G$Y.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},G$w.playByFrame=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$T&&(G$T=0),void 0===G$l&&(G$l=1),void 0===G$w&&(G$w=2147483647),void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0),void 0===G$D&&(G$D=30);var G$P=1e3/G$D;this.play(G$T,G$l,G$w,G$u*G$P,G$p*G$P)},G$w.stop=function(G$T){void 0===G$T&&(G$T=!0),G$T?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},G$D(0,G$w,"playEnd",function(){return this._playEnd}),G$D(0,G$w,"templet",function(){return this._templet},function(G$T){0===!this.state&&this.stop(!0),this._templet!==G$T&&((this._templet=G$T).loaded?this._computeFullKeyframeIndices():G$T.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),G$D(0,G$w,"playStart",function(){return this._playStart}),G$D(0,G$w,"playDuration",function(){return this._playDuration}),G$D(0,G$w,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),G$D(0,G$w,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),G$D(0,G$w,"overallDuration",function(){return this._overallDuration}),G$D(0,G$w,"currentFrameTime",function(){return this._currentFrameTime}),G$D(0,G$w,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),G$D(0,G$w,"currentPlayTime",function(){return this._currentTime+this._playStart}),G$D(0,G$w,"cachePlayRate",function(){return this._cachePlayRate},function(G$T){this._cachePlayRate!==G$T&&(this._cachePlayRate=G$T,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[G$T,this._cacheFrameRate])))}),G$D(0,G$w,"cacheFrameRate",function(){return this._cacheFrameRate},function(G$T){this._cacheFrameRate!==G$T&&(this._cacheFrameRate=G$T,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,G$T])))}),G$D(0,G$w,"currentTime",null,function(G$T){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(G$T<this._playStart||G$T>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=G$Y.loopCount;var G$l=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=G$T,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/G$l),0),this._currentFrameTime=this._currentKeyframeIndex*G$l}}),G$D(0,G$w,"paused",function(){return this._paused},function(G$T){(this._paused=G$T)&&this.event("paused")}),G$D(0,G$w,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),G$D(0,G$w,"destroyed",function(){return this._destroyed}),G$l}(),G$R=function(G$T){function G$l(){G$l.__super.call(this),G$A.isConchNode&&(this.drawSkin=function(G$T){G$T.transform||(G$T.transform=G$yT.EMPTY),this._addCmd([G$T]),this.setSkinMesh&&this.setSkinMesh(G$T._ps,G$T.mVBData,G$T.mEleNum,0,G$T.mTexture,G$T.transform)})}return G$u(G$l,"laya.ani.GraphicsAni",G$P),G$l.prototype.drawSkin=function(G$T){var G$l=[G$T];this._saveToCmd(G$A._context._drawSkin,G$l)},G$l.create=function(){return G$l._caches.pop()||new G$l},G$l.recycle=function(G$T){G$T.clear(),G$l._caches.push(G$T)},G$l._caches=[],G$l}(),G$F=function(G$T){function G$i(){this._aniMap={},this.unfixedLastAniIndex=-1,G$i.__super.call(this),this._anis=new Array}G$u(G$i,"laya.ani.AnimationTemplet",G$M);var G$l=G$i.prototype;return G$l.parse=function(G$T){var G$l=new G$eT(G$T);this._aniVersion=G$l.readUTFString(),G$W.parse(this,G$l)},G$l._calculateKeyFrame=function(G$T,G$l,G$w){var G$u=G$T.keyFrame;G$u[G$l]=G$u[0];for(var G$p=0;G$p<G$l;G$p++){var G$D=G$u[G$p];G$D.nextData=0===G$D.duration?G$D.data:G$u[G$p+1].data}G$u.length--},G$l.onAsynLoaded=function(G$T,G$l,G$w){var G$u=new G$eT(G$l);switch(this._aniVersion=G$u.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":G$m.parse(this,G$u);break;default:G$W.parse(this,G$u)}this._endLoaded()},G$l.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},G$l.getAnimationCount=function(){return this._anis.length},G$l.getAnimation=function(G$T){return this._anis[G$T]},G$l.getAniDuration=function(G$T){return this._anis[G$T].playTime},G$l.getNodes=function(G$T){return this._anis[G$T].nodes},G$l.getNodeIndexWithName=function(G$T,G$l){return this._anis[G$T].bone3DMap[G$l]},G$l.getNodeCount=function(G$T){return this._anis[G$T].nodes.length},G$l.getTotalkeyframesLength=function(G$T){return this._anis[G$T].totalKeyframeDatasLength},G$l.getPublicExtData=function(){return this._publicExtData},G$l.getAnimationDataWithCache=function(G$T,G$l,G$w,G$u){var G$p=G$l[G$w];if(G$p){var G$D=G$p[G$T];return G$D?G$D[G$u]:null}return null},G$l.setAnimationDataWithCache=function(G$T,G$l,G$w,G$u,G$p){var G$D=G$l[G$w]||(G$l[G$w]={});(G$D[G$T]||(G$D[G$T]=[]))[G$u]=G$p},G$l.getOriginalData=function(G$T,G$l,G$w,G$u,G$p){for(var G$D=this._anis[G$T].nodes,G$P=0,G$j=0,G$J=G$D.length,G$q=0;G$j<G$J;G$j++){var G$M,G$z=G$D[G$j];G$M=G$z.keyFrame[G$w[G$j][G$u]],G$z.dataOffset=G$q;var G$b=G$p-G$M.startTime,G$K=G$z.lerpType;if(G$K)switch(G$K){case 0:case 1:for(G$P=0;G$P<G$z.keyframeWidth;)G$P+=G$z.interpolationMethod[G$P](G$z,G$P,G$l,G$q+G$P,G$M.data,G$b,null,G$M.duration,G$M.nextData);break;case 2:var G$Y=G$M.interpolationData,G$t=G$Y.length,G$A=0;for(G$P=0;G$P<G$t;){var G$L=G$Y[G$P];switch(G$L){case 6:case 7:G$P+=G$i.interpolation[G$L](G$z,G$A,G$l,G$q+G$A,G$M.data,G$b,null,G$M.duration,G$M.nextData,G$Y,G$P+1);break;default:G$P+=G$i.interpolation[G$L](G$z,G$A,G$l,G$q+G$A,G$M.data,G$b,null,G$M.duration,G$M.nextData)}G$A++}}else for(G$P=0;G$P<G$z.keyframeWidth;)G$P+=G$z.interpolationMethod[G$P](G$z,G$P,G$l,G$q+G$P,G$M.data,G$b,null,G$M.duration,G$M.nextData);G$q+=G$z.keyframeWidth}},G$l.getNodesCurrentFrameIndex=function(G$T,G$l){var G$w=this._anis[G$T].nodes;G$T!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(G$w.length),this.unfixedCurrentTimes=new Float32Array(G$w.length),this.unfixedLastAniIndex=G$T);for(var G$u=0,G$p=G$w.length;G$u<G$p;G$u++){var G$D=G$w[G$u];for(G$l<this.unfixedCurrentTimes[G$u]&&(this.unfixedCurrentFrameIndexes[G$u]=0),this.unfixedCurrentTimes[G$u]=G$l;this.unfixedCurrentFrameIndexes[G$u]<G$D.keyFrame.length&&!(G$D.keyFrame[this.unfixedCurrentFrameIndexes[G$u]].startTime>this.unfixedCurrentTimes[G$u]);)this.unfixedCurrentFrameIndexes[G$u]++;this.unfixedCurrentFrameIndexes[G$u]--}return this.unfixedCurrentFrameIndexes},G$l.getOriginalDataUnfixedRate=function(G$T,G$l,G$w){var G$u=this._anis[G$T].nodes;G$T!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(G$u.length),this.unfixedCurrentTimes=new Float32Array(G$u.length),this.unfixedKeyframes=G$t(G$u.length),this.unfixedLastAniIndex=G$T);for(var G$p=0,G$D=0,G$P=G$u.length,G$j=0;G$D<G$P;G$D++){var G$J=G$u[G$D];for(G$w<this.unfixedCurrentTimes[G$D]&&(this.unfixedCurrentFrameIndexes[G$D]=0),this.unfixedCurrentTimes[G$D]=G$w;this.unfixedCurrentFrameIndexes[G$D]<G$J.keyFrame.length&&!(G$J.keyFrame[this.unfixedCurrentFrameIndexes[G$D]].startTime>this.unfixedCurrentTimes[G$D]);)this.unfixedKeyframes[G$D]=G$J.keyFrame[this.unfixedCurrentFrameIndexes[G$D]],this.unfixedCurrentFrameIndexes[G$D]++;var G$q=this.unfixedKeyframes[G$D];G$J.dataOffset=G$j;var G$M=G$w-G$q.startTime;if(G$J.lerpType)switch(G$J.lerpType){case 0:case 1:for(G$p=0;G$p<G$J.keyframeWidth;)G$p+=G$J.interpolationMethod[G$p](G$J,G$p,G$l,G$j+G$p,G$q.data,G$M,null,G$q.duration,G$q.nextData);break;case 2:var G$z=G$q.interpolationData,G$b=G$z.length,G$K=0;for(G$p=0;G$p<G$b;){var G$Y=G$z[G$p];switch(G$Y){case 6:case 7:G$p+=G$i.interpolation[G$Y](G$J,G$K,G$l,G$j+G$K,G$q.data,G$M,null,G$q.duration,G$q.nextData,G$z,G$p+1);break;default:G$p+=G$i.interpolation[G$Y](G$J,G$K,G$l,G$j+G$K,G$q.data,G$M,null,G$q.duration,G$q.nextData)}G$K++}}else for(G$p=0;G$p<G$J.keyframeWidth;)G$p+=G$J.interpolationMethod[G$p](G$J,G$p,G$l,G$j+G$p,G$q.data,G$M,null,G$q.duration,G$q.nextData);G$j+=G$J.keyframeWidth}},G$i._LinearInterpolation_0=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){var G$M=0===G$j?0:G$D/G$j;return G$w[G$u]=(1-G$M)*G$p[G$l]+G$M*G$J[G$l],1},G$i._QuaternionInterpolation_1=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){var G$M=0===G$j?0:G$D/G$j;return G$b.slerpQuaternionArray(G$p,G$l,G$J,G$l,G$M,G$w,G$u),4},G$i._AngleInterpolation_2=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){return 0},G$i._RadiansInterpolation_3=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){return 0},G$i._Matrix4x4Interpolation_4=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){for(var G$M=0;G$M<16;G$M++,G$l++)G$w[G$u+G$M]=G$p[G$l]+G$D*G$P[G$l];return 16},G$i._NoInterpolation_5=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q){return G$w[G$u]=G$p[G$l],1},G$i._BezierInterpolation_6=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M){return void 0===G$M&&(G$M=0),G$w[G$u]=G$p[G$l]+(G$J[G$l]-G$p[G$l])*G$s.getBezierRate(G$D/G$j,G$q[G$M],G$q[G$M+1],G$q[G$M+2],G$q[G$M+3]),5},G$i._BezierInterpolation_7=function(G$T,G$l,G$w,G$u,G$p,G$D,G$P,G$j,G$J,G$q,G$M){return void 0===G$M&&(G$M=0),G$w[G$u]=G$q[G$M+4]+G$q[G$M+5]*G$s.getBezierRate((.001*G$D+G$q[G$M+6])/G$q[G$M+7],G$q[G$M],G$q[G$M+1],G$q[G$M+2],G$q[G$M+3]),9},G$i.load=function(G$T){return G$pT.loader.create(G$T,null,null,G$i)},G$i.interpolation=[G$i._LinearInterpolation_0,G$i._QuaternionInterpolation_1,G$i._AngleInterpolation_2,G$i._RadiansInterpolation_3,G$i._Matrix4x4Interpolation_4,G$i._NoInterpolation_5,G$i._BezierInterpolation_6,G$i._BezierInterpolation_7],G$i}(),G$I=function(G$l){function G$w(G$T,G$l){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,G$w.__super.call(this),void 0===G$l&&(G$l=0),G$T&&this.init(G$T,G$l)}G$u(G$w,"laya.ani.bone.Skeleton",G$l);var G$T=G$w.prototype;return G$T.init=function(G$T,G$l){void 0===G$l&&(G$l=0);var G$w,G$u,G$p,G$D=0,G$P=0;if(1==G$l)for(this._graphicsCache=[],G$D=0,G$P=G$T.getAnimationCount();G$D<G$P;G$D++)this._graphicsCache.push([]);if(this._yReverseMatrix=G$T.yReverseMatrix,this._aniMode=G$l,this._templet=G$T,this._player=new G$r,this._player.cacheFrameRate=G$T.rate,this._player.templet=G$T,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=G$T.mBoneArr,this._rootBone=G$T.mRootBone,this._aniSectionDic=G$T.aniSectionDic,0<G$T.ikArr.length)for(this._ikArr=[],G$D=0,G$P=G$T.ikArr.length;G$D<G$P;G$D++)this._ikArr.push(new G$i(G$T.ikArr[G$D],this._boneList));if(0<G$T.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),G$D=0,G$P=G$T.pathArr.length;G$D<G$P;G$D++)G$w=G$T.pathArr[G$D],G$u=new G$c(G$w,this._boneList),(G$p=this._boneSlotDic[G$w.name])&&((G$u=new G$c(G$w,this._boneList)).target=G$p),this._pathDic[G$w.name]=G$u;if(0<G$T.tfArr.length)for(this._tfArr=[],G$D=0,G$P=G$T.tfArr.length;G$D<G$P;G$D++)this._tfArr.push(new G$a(G$T.tfArr[G$D],this._boneList));if(0<G$T.skinDataArray.length){var G$j=this._templet.skinDataArray[this._skinIndex];this._skinName=G$j.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},G$T.load=function(G$T,G$l,G$w){},G$T._onLoaded=function(){},G$T._parseComplete=function(){var G$T=G$Q.TEMPLET_DICTIONARY[this._aniPath];G$T&&(this.init(G$T,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},G$T._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},G$T._onPlay=function(){this.event("played")},G$T._onStop=function(){var G$T,G$l=this._templet.eventAniArr[this._aniClipIndex];if(G$l&&this._eventIndex<G$l.length)for(;this._eventIndex<G$l.length;this._eventIndex++)(G$T=G$l[this._eventIndex]).time>=this._player.playStart&&G$T.time<=this._player.playEnd&&this.event("label",G$T);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},G$T._onPause=function(){this.event("paused")},G$T._parseSrcBoneMatrix=function(){var G$T=0,G$l=0;for(G$l=this._templet.srcBoneMatrixArr.length,G$T=0;G$T<G$l;G$T++)this._boneMatrixArray.push(new G$yT);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var G$w,G$u,G$p=this._templet.boneSlotArray;for(G$T=0,G$l=G$p.length;G$T<G$l;G$T++)G$w=G$p[G$T],null==(G$u=this._bindBoneBoneSlotDic[G$w.parent])&&(this._bindBoneBoneSlotDic[G$w.parent]=G$u=[]),this._boneSlotDic[G$w.name]=G$w=G$w.copy(),G$u.push(G$w),this._boneSlotArray.push(G$w)}},G$T._emitMissedEvents=function(G$T,G$l,G$w){void 0===G$w&&(G$w=0);var G$u=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(G$u){var G$p,G$D,G$P=0;for(G$p=G$u.length,G$P=G$w;G$P<G$p;G$P++)(G$D=G$u[G$P]).time>=this._player.playStart&&G$D.time<=this._player.playEnd&&this.event("label",G$D)}},G$T._update=function(G$T){if(void 0===G$T&&(G$T=!0),!(this._pause||G$T&&this._indexControl)){var G$l=this.timer.currTimer,G$w=this._player.currentKeyframeIndex,G$u=G$l-this._lastTime;if(G$T?this._player._update(G$u):G$w=-1,this._lastTime=G$l,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<G$u&&this._clipIndex==G$w&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var G$p;this._lastUpdateAniClipIndex=this._aniClipIndex,G$w>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var G$D,G$P=this._templet.eventAniArr[this._aniClipIndex];if(G$P&&this._eventIndex<G$P.length&&((G$p=G$P[this._eventIndex]).time>=this._player.playStart&&G$p.time<=this._player.playEnd?this._player.currentPlayTime>=G$p.time&&(this.event("label",G$p),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(G$D=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=G$D&&(this.graphics=G$D));var G$j=0,G$J=0;for(G$J=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,G$J-1)&&0<G$J;)G$J--;if(G$J<this._clipIndex)for(G$j=G$J;G$j<this._clipIndex;G$j++)this._createGraphics(G$j)}else if(1==this._aniMode){if(G$D=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=G$D&&(this.graphics=G$D));for(G$J=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,G$J-1)&&0<G$J;)G$J--;if(G$J<this._clipIndex)for(G$j=G$J;G$j<this._clipIndex;G$j++)this._createGraphics(G$j)}this._createGraphics()}}},G$T._createGraphics=function(G$T){void 0===G$T&&(G$T=-1),-1==G$T&&(G$T=this._clipIndex);var G$l,G$w,G$u=G$T*this._player.cacheFrameRateInterval,G$p=this._templet.drawOrderAniArr[this._aniClipIndex];if(G$p&&0<G$p.length)for(this._drawOrderIndex=0,G$l=G$p[this._drawOrderIndex];G$u>=G$l.time&&(this._drawOrder=G$l.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=G$p.length));)G$l=G$p[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=G$R.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=G$R.create(),G$w=this.graphics;var G$D=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],G$T,G$u);var G$P,G$j,G$J,G$q,G$M=this._aniSectionDic[this._aniClipIndex],G$z=0,G$b=0,G$K=0,G$Y=0,G$t=0,G$A=this._templet.srcBoneMatrixArr.length;for(G$t=G$M[G$b=0];G$b<G$A;G$b++)G$q=this._boneList[G$b],G$J=this._templet.srcBoneMatrixArr[G$b],G$q.resultTransform.scX=G$J.scX*this._curOriginalData[G$z++],G$q.resultTransform.skX=G$J.skX+this._curOriginalData[G$z++],G$q.resultTransform.skY=G$J.skY+this._curOriginalData[G$z++],G$q.resultTransform.scY=G$J.scY*this._curOriginalData[G$z++],G$q.resultTransform.x=G$J.x+this._curOriginalData[G$z++],G$q.resultTransform.y=G$J.y+this._curOriginalData[G$z++],8===this._templet.tMatrixDataLen&&(G$q.resultTransform.skewX=G$J.skewX+this._curOriginalData[G$z++],G$q.resultTransform.skewY=G$J.skewY+this._curOriginalData[G$z++]);var G$L,G$i={},G$W={};for(G$t+=G$M[1];G$b<G$t;G$b++)G$i[(G$L=G$D[G$b]).name]=this._curOriginalData[G$z++],G$W[G$L.name]=this._curOriginalData[G$z++],this._curOriginalData[G$z++],this._curOriginalData[G$z++],this._curOriginalData[G$z++],this._curOriginalData[G$z++];var G$m,G$c,G$a={},G$B={};for(G$t+=G$M[2];G$b<G$t;G$b++)G$a[(G$L=G$D[G$b]).name]=this._curOriginalData[G$z++],G$B[G$L.name]=this._curOriginalData[G$z++],this._curOriginalData[G$z++],this._curOriginalData[G$z++],this._curOriginalData[G$z++],this._curOriginalData[G$z++];if(this._pathDic)for(G$t+=G$M[3];G$b<G$t;G$b++){if(G$L=G$D[G$b],G$m=this._pathDic[G$L.name])switch(new G$eT(G$L.extenData).getByte()){case 1:G$m.position=this._curOriginalData[G$z++];break;case 2:G$m.spacing=this._curOriginalData[G$z++];break;case 3:G$m.rotateMix=this._curOriginalData[G$z++],G$m.translateMix=this._curOriginalData[G$z++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(G$yT.TEMP.identity()),this._ikArr)for(G$b=0,G$t=this._ikArr.length;G$b<G$t;G$b++)G$c=this._ikArr[G$b],G$a.hasOwnProperty(G$c.name)&&(G$c.bendDirection=G$a[G$c.name]),G$B.hasOwnProperty(G$c.name)&&(G$c.mix=G$B[G$c.name]),G$c.apply();if(this._pathDic)for(var G$s in this._pathDic)(G$m=this._pathDic[G$s]).apply(this._boneList,G$w);if(this._tfArr)for(G$b=0,G$Y=this._tfArr.length;G$b<G$Y;G$b++)this._tfArr[G$b].apply();for(G$b=0,G$Y=this._boneList.length;G$b<G$Y;G$b++)if(G$q=this._boneList[G$b],G$j=this._bindBoneBoneSlotDic[G$q.name],G$q.resultMatrix.copyTo(this._boneMatrixArray[G$b]),G$j)for(G$K=0,G$t=G$j.length;G$K<G$t;G$K++)(G$P=G$j[G$K])&&G$P.setParentMatrix(G$q.resultMatrix);var G$r,G$I,G$Q,G$o,G$e={},G$y=this._templet.deformAniArr;if(G$y&&0<G$y.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,G$b=0,G$t=this._boneSlotArray.length;G$b<G$t;G$b++)(G$P=this._boneSlotArray[G$b]).deformData=null;var G$v,G$x=G$y[this._aniClipIndex];for(G$v in G$r=G$x.default,this._setDeform(G$r,G$e,this._boneSlotArray,G$u),G$x)"default"!=G$v&&G$v!=this._skinName&&(G$r=G$x[G$v],this._setDeform(G$r,G$e,this._boneSlotArray,G$u));G$r=G$x[this._skinName],this._setDeform(G$r,G$e,this._boneSlotArray,G$u)}if(this._drawOrder)for(G$b=0,G$t=this._drawOrder.length;G$b<G$t;G$b++)G$I=G$i[(G$P=this._boneSlotArray[this._drawOrder[G$b]]).name],G$Q=G$W[G$P.name],isNaN(G$Q)||(G$w.save(),G$w.alpha(G$Q)),isNaN(G$I)||-2==G$I||(this._templet.attachmentNames?G$P.showDisplayByName(this._templet.attachmentNames[G$I]):G$P.showDisplayByIndex(G$I)),G$e[this._drawOrder[G$b]]?(G$o=G$e[this._drawOrder[G$b]],G$P.currDisplayData&&G$o[G$P.currDisplayData.attachmentName]?G$P.deformData=G$o[G$P.currDisplayData.attachmentName]:G$P.deformData=null):G$P.deformData=null,isNaN(G$Q)?G$P.draw(G$w,this._boneMatrixArray,2==this._aniMode):G$P.draw(G$w,this._boneMatrixArray,2==this._aniMode,G$Q),isNaN(G$Q)||G$w.restore();else for(G$b=0,G$t=this._boneSlotArray.length;G$b<G$t;G$b++)G$I=G$i[(G$P=this._boneSlotArray[G$b]).name],G$Q=G$W[G$P.name],isNaN(G$Q)||(G$w.save(),G$w.alpha(G$Q)),isNaN(G$I)||-2==G$I||(this._templet.attachmentNames?G$P.showDisplayByName(this._templet.attachmentNames[G$I]):G$P.showDisplayByIndex(G$I)),G$e[G$b]?(G$o=G$e[G$b],G$P.currDisplayData&&G$o[G$P.currDisplayData.attachmentName]?G$P.deformData=G$o[G$P.currDisplayData.attachmentName]:G$P.deformData=null):G$P.deformData=null,isNaN(G$Q)?G$P.draw(G$w,this._boneMatrixArray,2==this._aniMode):G$P.draw(G$w,this._boneMatrixArray,2==this._aniMode,G$Q),isNaN(G$Q)||G$w.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,G$T,G$w):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,G$T,G$w)},G$T._setDeform=function(G$T,G$l,G$w,G$u){if(G$T){var G$p,G$D,G$P,G$j=0,G$J=0,G$q=0;if(G$T)for(G$j=0,G$J=G$T.deformSlotDataList.length;G$j<G$J;G$j++)for(G$p=G$T.deformSlotDataList[G$j],G$q=0;G$q<G$p.deformSlotDisplayList.length;G$q++)G$P=G$w[(G$D=G$p.deformSlotDisplayList[G$q]).slotIndex],G$D.apply(G$u,G$P),G$l[G$D.slotIndex]||(G$l[G$D.slotIndex]={}),G$l[G$D.slotIndex][G$D.attachment]=G$D.deformData}},G$T.getAnimNum=function(){return this._templet.getAnimationCount()},G$T.getAniNameByIndex=function(G$T){return this._templet.getAniNameByIndex(G$T)},G$T.getSlotByName=function(G$T){return this._boneSlotDic[G$T]},G$T.showSkinByName=function(G$T,G$l){void 0===G$l&&(G$l=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(G$T),G$l)},G$T.showSkinByIndex=function(G$T,G$l){void 0===G$l&&(G$l=!0);for(var G$w=0;G$w<this._boneSlotArray.length;G$w++)this._boneSlotArray[G$w].showSlotData(null,G$l);if(this._templet.showSkinByIndex(this._boneSlotDic,G$T,G$l)){var G$u=this._templet.skinDataArray[G$T];this._skinIndex=G$T,this._skinName=G$u.name}this._clearCache()},G$T.showSlotSkinByIndex=function(G$T,G$l){if(0!=this._aniMode){var G$w=this.getSlotByName(G$T);G$w&&G$w.showDisplayByIndex(G$l),this._clearCache()}},G$T.showSlotSkinByName=function(G$T,G$l){if(0!=this._aniMode){var G$w=this.getSlotByName(G$T);G$w&&G$w.showDisplayByName(G$l),this._clearCache()}},G$T.replaceSlotSkinName=function(G$T,G$l,G$w){if(0!=this._aniMode){var G$u=this.getSlotByName(G$T);G$u&&G$u.replaceDisplayByName(G$l,G$w),this._clearCache()}},G$T.replaceSlotSkinByIndex=function(G$T,G$l,G$w){if(0!=this._aniMode){var G$u=this.getSlotByName(G$T);G$u&&G$u.replaceDisplayByIndex(G$l,G$w),this._clearCache()}},G$T.setSlotSkin=function(G$T,G$l){if(0!=this._aniMode){var G$w=this.getSlotByName(G$T);G$w&&G$w.replaceSkin(G$l),this._clearCache()}},G$T._clearCache=function(){if(1==this._aniMode)for(var G$T=0,G$l=this._graphicsCache.length;G$T<G$l;G$T++){for(var G$w=0,G$u=this._graphicsCache[G$T].length;G$w<G$u;G$w++){var G$p=this._graphicsCache[G$T][G$w];G$p!=this.graphics&&G$R.recycle(G$p)}this._graphicsCache[G$T].length=0}},G$T.play=function(G$T,G$l,G$w,G$u,G$p,G$D){void 0===G$w&&(G$w=!0),void 0===G$u&&(G$u=0),void 0===G$p&&(G$p=0),void 0===G$D&&(G$D=!0),this._indexControl=!1;var G$P=-1,G$j=NaN;if(G$j=G$l?2147483647:0,"string"==typeof G$T)for(var G$J=0,G$q=this._templet.getAnimationCount();G$J<G$q;G$J++){var G$M=this._templet.getAnimation(G$J);if(G$M&&G$T==G$M.name){G$P=G$J;break}}else G$P=G$T;-1<G$P&&G$P<this.getAnimNum()&&(this._aniClipIndex=G$P,(G$w||this._pause||this._currAniIndex!=G$P)&&(this._currAniIndex=G$P,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(G$P)),this._drawOrder=null,this._eventIndex=0,this._player.play(G$P,this._player.playbackRate,G$j,G$u,G$p),G$D&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=G$z.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},G$T.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},G$T.playbackRate=function(G$T){this._player&&(this._player.playbackRate=G$T)},G$T.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},G$T.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=G$z.now(),this.timer.frameLoop(1,this,this._update,null,!0))},G$T._getGrahicsDataWithCache=function(G$T,G$l){return this._graphicsCache[G$T][G$l]},G$T._setGrahicsDataWithCache=function(G$T,G$l,G$w){this._graphicsCache[G$T][G$l]=G$w},G$T.destroy=function(G$T){void 0===G$T&&(G$T=!0),G$l.prototype.destroy.call(this,G$T),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},G$D(0,G$T,"url",function(){return this._aniPath},function(G$T){this.load(G$T)}),G$D(0,G$T,"index",function(){return this._index},function(G$T){this.player&&(this._index=G$T,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),G$D(0,G$T,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),G$D(0,G$T,"templet",function(){return this._templet}),G$D(0,G$T,"player",function(){return this._player}),G$w.useSimpleMeshInCanvas=!1,G$w}(G$DT),G$Q=function(G$l){function G$p(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,G$p.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}G$u(G$p,"laya.ani.bone.Templet",G$l);var G$T=G$p.prototype;return G$T.getLoadList=function(){return this._loadList},G$T.loadAni=function(G$T){this._skBufferUrl=G$T,G$pT.loader.load(G$T,G$J.create(this,this.onComplete),null,"arraybuffer")},G$T.onComplete=function(G$T){if(this._isDestroyed)this.destroy();else{var G$l=G$q.getRes(this._skBufferUrl);G$l?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,G$l)):this.event("error","load failed:"+this._skBufferUrl)}},G$T.parseData=function(G$T,G$l,G$w){void 0===G$w&&(G$w=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=G$T,this._mainTexture&&G$A.isWebGL&&G$T.bitmap&&(G$T.bitmap.enableMerageInAtlas=!1),this._rate=G$w,this.parse(G$l)},G$T.buildArmature=function(G$T){return void 0===G$T&&(G$T=0),new G$I(this,G$T)},G$T.parse=function(G$T){G$l.prototype.parse.call(this,G$T),this._endLoaded(),this._aniVersion!=G$p.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+G$p.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},G$T._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var G$T=0;this._loadList=[];var G$l,G$w=new G$eT(this.getPublicExtData()),G$u=0,G$p=0,G$D=0,G$P=G$w.getInt32(),G$j=G$w.readUTFString(),G$J=G$j.split("\n");for(G$T=0;G$T<G$P;G$T++)G$l=this._path+G$J[2*G$T],G$j=G$J[2*G$T+1],G$w.getFloat32(),G$w.getFloat32(),G$u=G$w.getFloat32(),G$p=G$w.getFloat32(),G$D=G$w.getFloat32(),isNaN(G$D)?0:G$D,G$D=G$w.getFloat32(),isNaN(G$D)?0:G$D,G$D=G$w.getFloat32(),isNaN(G$D)?G$u:G$D,G$D=G$w.getFloat32(),isNaN(G$D)?G$p:G$D,-1==this._loadList.indexOf(G$l)&&this._loadList.push(G$l);this.event("inited",this)}},G$T._textureComplete=function(){for(var G$T,G$l,G$w=0,G$u=this._loadList.length;G$w<G$u;G$w++)G$l=this._loadList[G$w],G$T=this._textureDic[G$l]=G$q.getRes(G$l),G$A.isWebGL&&G$T&&G$T.bitmap&&(G$T.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},G$T._parsePublicExtData=function(){var G$T=0,G$l=0,G$w=0,G$u=0,G$p=0;for(G$T=0,G$p=this.getAnimationCount();G$T<G$p;G$T++)this._graphicsCache.push([]);var G$D;G$D="Dragon"!=this._aniClassName;var G$P,G$j,G$J=new G$eT(this.getPublicExtData()),G$q=0,G$M=0,G$z=0,G$b=0,G$K=0,G$Y=0,G$t=0,G$A=0,G$L=0,G$i=G$J.getInt32(),G$W=G$J.readUTFString(),G$m=G$W.split("\n");for(G$T=0;G$T<G$i;G$T++){if(G$P=this._mainTexture,G$j=this._path+G$m[2*G$T],G$W=G$m[2*G$T+1],null==this._mainTexture&&(G$P=this._textureDic[G$j]),!G$P)return this.event("error",this),void(this.isParseFail=!0);G$q=G$J.getFloat32(),G$M=G$J.getFloat32(),G$z=G$J.getFloat32(),G$b=G$J.getFloat32(),G$L=G$J.getFloat32(),G$K=isNaN(G$L)?0:G$L,G$L=G$J.getFloat32(),G$Y=isNaN(G$L)?0:G$L,G$L=G$J.getFloat32(),G$t=isNaN(G$L)?G$z:G$L,G$L=G$J.getFloat32(),G$A=isNaN(G$L)?G$b:G$L,this.subTextureDic[G$W]=G$vT.create(G$P,G$q,G$M,G$z,G$b,-G$K,-G$Y,G$t,G$A),G$P.alphaTexture&&(this.subTextureDic[G$W].alphaTexture=G$vT.create(G$P.alphaTexture,G$q,G$M,G$z,G$b,-G$K,-G$Y,G$t,G$A))}this._mainTexture=G$P;var G$c,G$a,G$B,G$s,G$r,G$I=G$J.getUint16();for(G$T=0;G$T<G$I;G$T++)(G$c=[]).push(G$J.getUint16()),G$c.push(G$J.getUint16()),G$c.push(G$J.getUint16()),G$c.push(G$J.getUint16()),this.aniSectionDic[G$T]=G$c;var G$Q,G$o=G$J.getInt16(),G$e={};for(G$T=0;G$T<G$o;G$T++)G$a=new G$xT,0==G$T?G$Q=G$a:G$a.root=G$Q,G$a.d=G$D?-1:1,G$s=G$J.readUTFString(),G$r=G$J.readUTFString(),G$a.length=G$J.getFloat32(),1==G$J.getByte()&&(G$a.inheritRotation=!1),1==G$J.getByte()&&(G$a.inheritScale=!1),G$a.name=G$s,G$r&&((G$B=G$e[G$r])?G$B.addChild(G$a):this.mRootBone=G$a),G$e[G$s]=G$a,this.mBoneArr.push(G$a);this.tMatrixDataLen=G$J.getUint16();var G$y,G$v,G$x=G$J.getUint16(),G$R=Math.floor(G$x/this.tMatrixDataLen),G$F=this.srcBoneMatrixArr;for(G$T=0;G$T<G$R;G$T++)(G$y=new G$hT).scX=G$J.getFloat32(),G$y.skX=G$J.getFloat32(),G$y.skY=G$J.getFloat32(),G$y.scY=G$J.getFloat32(),G$y.x=G$J.getFloat32(),G$y.y=G$J.getFloat32(),8===this.tMatrixDataLen&&(G$y.skewX=G$J.getFloat32(),G$y.skewY=G$J.getFloat32()),G$F.push(G$y),(G$a=this.mBoneArr[G$T]).transform=G$y;var G$O,G$$=G$J.getUint16(),G$Z=0;for(G$T=0;G$T<G$$;G$T++){for(G$v=new G$XT,G$Z=G$J.getUint16(),G$l=0;G$l<G$Z;G$l++)G$v.boneNames.push(G$J.readUTFString()),G$v.boneIndexs.push(G$J.getInt16());G$v.name=G$J.readUTFString(),G$v.targetBoneName=G$J.readUTFString(),G$v.targetBoneIndex=G$J.getInt16(),G$v.bendDirection=G$J.getFloat32(),G$v.mix=G$J.getFloat32(),G$v.isSpine=G$D,this.ikArr.push(G$v)}var G$H,G$X=G$J.getUint16(),G$k=0;for(G$T=0;G$T<G$X;G$T++){for(G$O=new G$NT,G$k=G$J.getUint16(),G$l=0;G$l<G$k;G$l++)G$O.boneIndexs.push(G$J.getInt16());G$O.name=G$J.getUTFString(),G$O.targetIndex=G$J.getInt16(),G$O.rotateMix=G$J.getFloat32(),G$O.translateMix=G$J.getFloat32(),G$O.scaleMix=G$J.getFloat32(),G$O.shearMix=G$J.getFloat32(),G$O.offsetRotation=G$J.getFloat32(),G$O.offsetX=G$J.getFloat32(),G$O.offsetY=G$J.getFloat32(),G$O.offsetScaleX=G$J.getFloat32(),G$O.offsetScaleY=G$J.getFloat32(),G$O.offsetShearY=G$J.getFloat32(),this.tfArr.push(G$O)}var G$n=G$J.getUint16(),G$d=0;for(G$T=0;G$T<G$n;G$T++){for((G$H=new G$kT).name=G$J.readUTFString(),G$d=G$J.getUint16(),G$l=0;G$l<G$d;G$l++)G$H.bones.push(G$J.getInt16());G$H.target=G$J.readUTFString(),G$H.positionMode=G$J.readUTFString(),G$H.spacingMode=G$J.readUTFString(),G$H.rotateMode=G$J.readUTFString(),G$H.offsetRotation=G$J.getFloat32(),G$H.position=G$J.getFloat32(),G$H.spacing=G$J.getFloat32(),G$H.rotateMix=G$J.getFloat32(),G$H.translateMix=G$J.getFloat32(),this.pathArr.push(G$H)}var G$G,G$N,G$h,G$g,G$f,G$U=0,G$E=0,G$V=0,G$C=NaN,G$S=0,G$_=G$J.getInt16();for(G$T=0;G$T<G$_;G$T++){var G$TT=G$J.getUint8(),G$lT={};this.deformAniArr.push(G$lT);for(var G$wT=0;G$wT<G$TT;G$wT++)for((G$G=new G$FT).skinName=G$J.getUTFString(),G$lT[G$G.skinName]=G$G,G$U=G$J.getInt16(),G$l=0;G$l<G$U;G$l++)for(G$N=new G$OT,G$G.deformSlotDataList.push(G$N),G$E=G$J.getInt16(),G$w=0;G$w<G$E;G$w++)for(G$h=new G$$T,G$N.deformSlotDisplayList.push(G$h),G$h.slotIndex=G$J.getInt16(),G$h.attachment=G$J.getUTFString(),G$V=G$J.getInt16(),G$u=0;G$u<G$V;G$u++)for(1==G$J.getByte()?G$h.tweenKeyList.push(!0):G$h.tweenKeyList.push(!1),G$C=G$J.getFloat32(),G$h.timeList.push(G$C),G$g=[],G$h.vectices.push(G$g),G$S=G$J.getInt16(),G$p=0;G$p<G$S;G$p++)G$g.push(G$J.getFloat32())}var G$uT,G$pT,G$DT=G$J.getInt16(),G$PT=0,G$jT=0;for(G$T=0;G$T<G$DT;G$T++){for(G$PT=G$J.getInt16(),G$f=[],G$l=0;G$l<G$PT;G$l++){for((G$uT=new G$ZT).time=G$J.getFloat32(),G$jT=G$J.getInt16(),G$w=0;G$w<G$jT;G$w++)G$uT.drawOrder.push(G$J.getInt16());G$f.push(G$uT)}this.drawOrderAniArr.push(G$f)}var G$JT,G$qT=G$J.getInt16(),G$MT=0;for(G$T=0;G$T<G$qT;G$T++){for(G$MT=G$J.getInt16(),G$pT=[],G$l=0;G$l<G$MT;G$l++)(G$JT=new G$HT).name=G$J.getUTFString(),G$JT.intValue=G$J.getInt32(),G$JT.floatValue=G$J.getFloat32(),G$JT.stringValue=G$J.getUTFString(),G$JT.time=G$J.getFloat32(),G$pT.push(G$JT);this.eventAniArr.push(G$pT)}var G$zT=G$J.getInt16();if(0<G$zT)for(this.attachmentNames=[],G$T=0;G$T<G$zT;G$T++)this.attachmentNames.push(G$J.getUTFString());var G$bT,G$KT,G$YT=G$J.getInt16();for(G$T=0;G$T<G$YT;G$T++)(G$bT=new G$RT).name=G$J.readUTFString(),G$bT.parent=G$J.readUTFString(),G$bT.attachmentName=G$J.readUTFString(),G$bT.srcDisplayIndex=G$bT.displayIndex=G$J.getInt16(),(G$bT.templet=this).boneSlotDic[G$bT.name]=G$bT,null==(G$KT=this.bindBoneBoneSlotDic[G$bT.parent])&&(this.bindBoneBoneSlotDic[G$bT.parent]=G$KT=[]),G$KT.push(G$bT),this.boneSlotArray.push(G$bT);var G$tT,G$AT,G$LT,G$iT=G$J.readUTFString().split("\n"),G$WT=0,G$mT=G$J.getUint8(),G$cT=0,G$aT=0,G$BT=0,G$sT=0,G$rT=0,G$IT=0,G$QT=0;for(G$T=0;G$T<G$mT;G$T++){for((G$tT=new G$nT).name=G$iT[G$WT++],G$cT=G$J.getUint8(),G$l=0;G$l<G$cT;G$l++){for((G$AT=new G$GT).name=G$iT[G$WT++],G$bT=this.boneSlotDic[G$AT.name],G$aT=G$J.getUint8(),G$w=0;G$w<G$aT;G$w++){if(G$LT=new G$dT,this.skinSlotDisplayDataArr.push(G$LT),G$LT.name=G$iT[G$WT++],G$LT.attachmentName=G$iT[G$WT++],G$LT.transform=new G$hT,G$LT.transform.scX=G$J.getFloat32(),G$LT.transform.skX=G$J.getFloat32(),G$LT.transform.skY=G$J.getFloat32(),G$LT.transform.scY=G$J.getFloat32(),G$LT.transform.x=G$J.getFloat32(),G$LT.transform.y=G$J.getFloat32(),G$AT.displayArr.push(G$LT),G$LT.width=G$J.getFloat32(),G$LT.height=G$J.getFloat32(),G$LT.type=G$J.getUint8(),G$LT.verLen=G$J.getUint16(),0<(G$o=G$J.getUint16()))for(G$LT.bones=[],G$u=0;G$u<G$o;G$u++){var G$oT=G$J.getUint16();G$LT.bones.push(G$oT)}if(0<(G$BT=G$J.getUint16()))for(G$LT.uvs=[],G$u=0;G$u<G$BT;G$u++)G$LT.uvs.push(G$J.getFloat32());if(0<(G$sT=G$J.getUint16()))for(G$LT.weights=[],G$u=0;G$u<G$sT;G$u++)G$LT.weights.push(G$J.getFloat32());if(0<(G$rT=G$J.getUint16()))for(G$LT.triangles=[],G$u=0;G$u<G$rT;G$u++)G$LT.triangles.push(G$J.getUint16());if(0<(G$IT=G$J.getUint16()))for(G$LT.vertices=[],G$u=0;G$u<G$IT;G$u++)G$LT.vertices.push(G$J.getFloat32());if(0<(G$QT=G$J.getUint16()))for(G$LT.lengths=[],G$u=0;G$u<G$QT;G$u++)G$LT.lengths.push(G$J.getFloat32())}G$tT.slotArr.push(G$AT)}this.skinDic[G$tT.name]=G$tT,this.skinDataArray.push(G$tT)}1==G$J.getUint8()?(this.yReverseMatrix=new G$yT(1,0,0,-1,0,0),G$Q&&G$Q.setTempMatrix(this.yReverseMatrix)):G$Q&&G$Q.setTempMatrix(new G$yT),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},G$T.getTexture=function(G$T){var G$l=this.subTextureDic[G$T];return G$l||(G$l=this.subTextureDic[G$T.substr(0,G$T.length-1)]),null==G$l?this._mainTexture:G$l},G$T.showSkinByIndex=function(G$T,G$l,G$w){if(void 0===G$w&&(G$w=!0),G$l<0&&G$l>=this.skinDataArray.length)return!1;var G$u,G$p,G$D=0,G$P=0,G$j=this.skinDataArray[G$l];if(G$j){for(G$D=0,G$P=G$j.slotArr.length;G$D<G$P;G$D++)(G$p=G$j.slotArr[G$D])&&(G$u=G$T[G$p.name])&&(G$u.showSlotData(G$p,G$w),G$w&&"undefined"!=G$u.attachmentName&&"null"!=G$u.attachmentName?G$u.showDisplayByName(G$u.attachmentName):G$u.showDisplayByIndex(G$u.displayIndex));return!0}return!1},G$T.getSkinIndexByName=function(G$T){for(var G$l=0,G$w=this.skinDataArray.length;G$l<G$w;G$l++)if(this.skinDataArray[G$l].name==G$T)return G$l;return-1},G$T.getGrahicsDataWithCache=function(G$T,G$l){return this._graphicsCache[G$T][G$l]},G$T.setGrahicsDataWithCache=function(G$T,G$l,G$w){this._graphicsCache[G$T][G$l]=G$w},G$T.destroy=function(){var G$T;for(var G$l in this._isDestroyed=!0,this.subTextureDic)(G$T=this.subTextureDic[G$l])&&G$T.destroy();for(G$l in this._textureDic)(G$T=this._textureDic[G$l])&&G$T.destroy();for(var G$w=0,G$u=this.skinSlotDisplayDataArr.length;G$w<G$u;G$w++)this.skinSlotDisplayDataArr[G$w].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete G$p.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},G$T.getAniNameByIndex=function(G$T){var G$l=this.getAnimation(G$T);return G$l?G$l.name:null},G$D(0,G$T,"rate",function(){return this._rate},function(G$T){this._rate=G$T}),G$p.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",G$p.TEMPLET_DICTIONARY=null,G$p}(G$F)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$T,G$l){"use strict";for(var G$w in Object.defineProperty(G$l,"__esModule",{value:!0}),Laya){var G$u=Laya[G$w];G$u&&G$u.__isclass&&(G$l[G$w]=G$u)}});