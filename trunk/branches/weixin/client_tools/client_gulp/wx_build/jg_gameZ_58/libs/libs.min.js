var Laya=window.Laya=function(H$i,H$f){var H$U={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(H$f,H$K){return 1==arguments.length?H$U.__presubstr.call(this,H$f):H$U.__presubstr.call(this,H$f,0<H$K?H$K:this.length+H$K)},__init:function(H$f){H$f.forEach(function(H$f){H$f.__init$&&H$f.__init$()})},__isClass:function(H$f){return H$f&&(H$f.__isclass||H$f==Object||H$f==String||H$f==Array)},__newvec:function(H$f,H$K){var H$Y=[];H$Y.length=H$f;for(var H$X=0;H$X<H$f;H$X++)H$Y[H$X]=H$K;return H$Y},__extend:function(H$f,H$K){for(var H$Y in H$K)if(H$K.hasOwnProperty(H$Y)){var H$X=Object.getOwnPropertyDescriptor(H$K,H$Y),H$L=H$X.get,H$H=H$X.set;H$L||H$H?H$L&&H$H?Object.defineProperty(H$f,H$Y,H$X):(H$L&&Object.defineProperty(H$f,H$Y,H$L),H$H&&Object.defineProperty(H$f,H$Y,H$H)):H$f[H$Y]=H$K[H$Y]}function H$E(){H$U.un(this,"constructor",H$f)}H$E.prototype=H$K.prototype,H$f.prototype=new H$E,H$U.un(H$f.prototype,"__imps",H$U.__copy({},H$K.prototype.__imps))},__copy:function(H$f,H$K){if(!H$K)return null;for(var H$Y in H$f=H$f||{},H$K)H$f[H$Y]=H$K[H$Y];return H$f},__package:function(H$f,H$K){if(!H$U.__packages[H$f]){H$U.__packages[H$f]=!0;var H$Y=H$i,H$X=H$f.split(".");if(1<H$X.length)for(var H$L=0,H$H=H$X.length-1;H$L<H$H;H$L++){var H$E=H$Y[H$X[H$L]];H$Y=H$E||(H$Y[H$X[H$L]]={})}H$Y[H$X[H$X.length-1]]||(H$Y[H$X[H$X.length-1]]=H$K||{})}},__hasOwnProperty:function(H$f,H$K){return H$K=H$K||this,Object.hasOwnProperty.call(H$K,H$f)||function H$f(H$K,H$Y){if(Object.hasOwnProperty.call(H$Y.prototype,H$K))return!0;var H$X=H$Y.prototype.__super;return null==H$X?null:H$f(H$K,H$X)}(H$f,H$K.__class)},__typeof:function(H$f,H$K){if(!H$f||!H$K)return!1;if(H$K===String)return"string"==typeof H$f;if(H$K===Number)return"number"==typeof H$f;if(H$K.__interface__)H$K=H$K.__interface__;else if("string"!=typeof H$K)return H$f instanceof H$K;return H$f.__imps&&H$f.__imps[H$K]||H$f.__class==H$K},__as:function(H$f,H$K){return this.__typeof(H$f,H$K)?H$f:null},__int:function(H$f){return H$f?parseInt(H$f):0},interface:function(H$f,H$K){H$U.__package(H$f,{});var H$Y=H$U.__internals,H$X=H$Y[H$f]=H$Y[H$f]||{self:H$f};if(H$K){var H$L=H$K.split(",");H$X.extend=[];for(var H$H=0;H$H<H$L.length;H$H++){var H$E=H$L[H$H];H$Y[H$E]=H$Y[H$E]||{self:H$E},H$X.extend.push(H$Y[H$E])}}var H$d=H$i,H$O=H$f.split(".");for(H$H=0;H$H<H$O.length-1;H$H++)H$d=H$d[H$O[H$H]];H$d[H$O[H$O.length-1]]={__interface__:H$f}},class:function(H$f,H$K,H$Y,H$X){if(H$Y&&H$U.__extend(H$f,H$Y),H$K)if(H$U.__package(H$K,H$f),H$U.__classmap[H$K]=H$f,0<H$K.indexOf(".")){if(0==H$K.indexOf("laya.")){var H$L=H$K.split(".");H$X=H$X||H$L[H$L.length-1],H$U[H$X]&&console.log("Warning!,this class["+H$X+"] already exist:",H$U[H$X]),H$U[H$X]=H$f}}else"Main"==H$K?H$i.Main=H$f:"MainWX"==H$K?H$i.MainWX=H$f:(H$U[H$K]&&console.log("Error!,this class["+H$K+"] already exist:",H$U[H$K]),H$U[H$K]=H$f);var H$H=H$U.un,H$E=H$f.prototype;H$H(H$E,"hasOwnProperty",H$U.__hasOwnProperty),H$H(H$E,"__class",H$f),H$H(H$E,"__super",H$Y),H$H(H$E,"__className",H$K),H$H(H$f,"__super",H$Y),H$H(H$f,"__className",H$K),H$H(H$f,"__isclass",!0),H$H(H$f,"super",function(H$f){this.__super.call(H$f)})},imps:function(H$f,H$K){if(!H$K)return null;var H$L=H$f.__imps||H$U.un(H$f,"__imps",{});function H$H(H$f){var H$K,H$Y;if((H$K=H$U.__internals[H$f])&&(H$L[H$f]=!0,H$Y=H$K.extend))for(var H$X=0;H$X<H$Y.length;H$X++)H$H(H$Y[H$X].self)}for(var H$Y in H$K)H$H(H$Y)},superSet:function(H$f,H$K,H$Y,H$X){var H$L=H$f.prototype["_$set_"+H$Y];H$L&&H$L.call(H$K,H$X)},superGet:function(H$f,H$K,H$Y){var H$X=H$f.prototype["_$get_"+H$Y];return H$X?H$X.call(H$K):null},getset:function(H$f,H$K,H$Y,H$X,H$L){H$f?(H$X&&(H$K["_$GET_"+H$Y]=H$X),H$L&&(H$K["_$SET_"+H$Y]=H$L)):(H$X&&H$U.un(H$K,"_$get_"+H$Y,H$X),H$L&&H$U.un(H$K,"_$set_"+H$Y,H$L)),H$X&&H$L?Object.defineProperty(H$K,H$Y,{get:H$X,set:H$L,enumerable:!1,configurable:!0}):(H$X&&Object.defineProperty(H$K,H$Y,{get:H$X,enumerable:!1,configurable:!0}),H$L&&Object.defineProperty(H$K,H$Y,{set:H$L,enumerable:!1,configurable:!0}))},static:function(H$Y,H$X){for(var H$L=0,H$f=H$X.length;H$L<H$f;H$L+=2)if("length"==H$X[H$L])H$Y.length=H$X[H$L+1].call(H$Y);else{function H$K(){var H$K=H$X[H$L],H$f=H$X[H$L+1];Object.defineProperty(H$Y,H$K,{get:function(){return delete this[H$K],this[H$K]=H$f.call(this)},set:function(H$f){delete this[H$K],this[H$K]=H$f},enumerable:!0,configurable:!0})}H$K()}},un:function(H$f,H$K,H$Y){return H$Y||(H$Y=H$f[H$K]),H$U.__propun.value=H$Y,Object.defineProperty(H$f,H$K,H$U.__propun),H$Y},uns:function(H$K,H$f){H$f.forEach(function(H$f){H$U.un(H$K,H$f)})}};return H$i.console=H$i.console||{log:function(){}},H$i.trace=H$i.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),H$U}(window,document);!function(H$f,H$K,H$Y){H$Y.un,H$Y.uns,H$Y.static,H$Y.class,H$Y.getset,H$Y.__newvec}(window,document,Laya),function(H$E,H$K,H$a){H$a.un,H$a.uns;var H$O=H$a.static,H$U=H$a.class,H$B=H$a.getset;H$a.__newvec;H$a.interface("laya.runtime.IMarket"),H$a.interface("laya.filters.IFilter"),H$a.interface("laya.display.ILayout"),H$a.interface("laya.resource.IDispose"),H$a.interface("laya.runtime.IPlatform"),H$a.interface("laya.resource.IDestroy"),H$a.interface("laya.runtime.IConchNode"),H$a.interface("laya.filters.IFilterAction"),H$a.interface("laya.runtime.ICPlatformClass"),H$a.interface("laya.resource.ICreateResource"),H$a.interface("laya.runtime.IConchRenderObject"),H$a.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var H$R=function(){function H$H(){}return H$U(H$H,"laya.utils.RunDriver"),H$H.FILTER_ACTIONS=[],H$H.pixelRatio=-1,H$H._charSizeTestDiv=null,H$H.now=function(){return Date.now()},H$H.getWindow=function(){return H$E},H$H.getPixelRatio=function(){if(H$H.pixelRatio<0){var H$f=H$P.context,H$K=H$f.backingStorePixelRatio||H$f.webkitBackingStorePixelRatio||H$f.mozBackingStorePixelRatio||H$f.msBackingStorePixelRatio||H$f.oBackingStorePixelRatio||H$f.backingStorePixelRatio||1;(H$H.pixelRatio=(H$P.window.devicePixelRatio||1)/H$K)<1&&(H$H.pixelRatio=1)}return H$H.pixelRatio},H$H.getIncludeStr=function(H$f){return null},H$H.createShaderCondition=function(H$f){var H$K="(function() {return "+H$f+";})";return H$a._runScript(H$K)},H$H.fontMap=[],H$H.measureText=function(H$f,H$K){var H$Y=H$H.hanzi.test(H$f);if(H$Y&&H$H.fontMap[H$K])return H$H.fontMap[H$K];var H$X=H$P.context;H$X.font=H$K;var H$L=H$X.measureText(H$f);return H$L||(H$L={width:16,height:16}),H$Y&&(H$H.fontMap[H$K]=H$L),H$L},H$H.getWebGLContext=function(H$f){},H$H.beginFlush=function(){},H$H.endFinish=function(){},H$H.addToAtlas=null,H$H.flashFlushImage=function(H$f){},H$H.drawToCanvas=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=H$Sf.create("2D"),H$d=new H$e(H$Y,H$X,H$E);return H$Q.renders[H$K]._fun(H$f,H$d,H$L,H$H),H$E},H$H.createParticleTemplate2D=null,H$H.createGLTextur=null,H$H.createWebGLContext2D=null,H$H.changeWebGLSize=function(H$f,H$K){},H$H.createRenderSprite=function(H$f,H$K){return new H$Q(H$f,H$K)},H$H.createFilterAction=function(H$f){return new H$S},H$H.createGraphics=function(){return new H$y},H$H.clear=function(H$f){H$k._context.ctx.clear()},H$H.cancelLoadByUrl=function(H$f){},H$H.clearAtlas=function(H$f){},H$H.isAtlas=function(H$f){return!1},H$H.addTextureToAtlas=function(H$f){},H$H.getTexturePixels=function(H$f,H$K,H$Y,H$X,H$L){return null},H$H.skinAniSprite=function(){return null},H$H.update3DLoop=function(){},H$O(H$H,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),H$H}(),H$X=(H$B(1,H$a,"alertGlobalError",null,function(H$f){var H$H=0;H$P.window.onerror=H$f?function(H$f,H$K,H$Y,H$X,H$L){H$H++<5&&H$L&&alert(H$L.stack||H$L)}:null}),H$a.init=function(H$f,H$K,H$Y){for(var H$X=[],H$L=2,H$H=arguments.length;H$L<H$H;H$L++)H$X.push(arguments[H$L]);if(!H$a._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=H$a._arrayBufferSlice),H$a._isinit=!0,H$P.__init__(),H$W.__init__(),H$y.__init__(),H$a.timer=new H$u,H$a.scaleTimer=new H$u,H$a.loader=new H$Of,H$o.__init__(),H$L=0;for(var H$E=H$X.length;H$L<H$E;H$L++)H$X[H$L].enable&&H$X[H$L].enable();return H$l.__init__(),H$d.__init__(),H$q.__init__(),H$J.beginCheck(),H$a._currentStage=H$a.stage=new H$Af,H$a.stage.conchModel&&H$a.stage.conchModel.setRootNode(),H$a._getUrlPath(),H$a.render=new H$k(0,0),H$a.stage.size(H$f,H$K),H$Q.__init__(),H$Z.__init__(),H$$.instance.__init__(H$a.stage,H$k.canvas),H$Cf.__init__(),H$m.autoStopMusic=!0,H$_.__init__(),H$k.canvas}},H$a._getUrlPath=function(){var H$f=H$P.window.location,H$K=H$f.pathname;H$K=H$K&&":"==H$K.charAt(2)?H$K.substring(1):H$K,H$T.rootPath=H$T.basePath=H$T.getPath("file:"==H$f.protocol?H$K:H$f.protocol+"//"+H$f.host+H$f.pathname)},H$a._arrayBufferSlice=function(H$f,H$K){var H$Y=new Uint8Array(this,H$f,H$K-H$f),H$X=new Uint8Array(H$Y.length);return H$X.set(H$Y),H$X.buffer},H$a._runScript=function(H$f){return H$P.window[H$a._evcode](H$f)},H$a.stage=null,H$a.timer=null,H$a.scaleTimer=null,H$a.loader=null,H$a.version="1.8.6",H$a.render=null,H$a._currentStage=null,H$a._isinit=!1,H$a.isDebug=!1,H$a.MiniAdpter={init:function(){H$E.navigator&&H$E.navigator.userAgent&&-1<H$E.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},H$O(H$a,["conchMarket",function(){return this.conchMarket=H$E.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=H$E.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function H$f(){}return H$U(H$f,"Config"),H$f.WebGLTextCacheCount=500,H$f.atlasEnable=!1,H$f.showCanvasMark=!1,H$f.animationInterval=50,H$f.isAntialias=!1,H$f.isAlpha=!1,H$f.premultipliedAlpha=!0,H$f.isStencil=!0,H$f.preserveDrawingBuffer=!1,H$f}()),H$i=function(){function H$i(){this._events=null}H$U(H$i,"laya.events.EventDispatcher");var H$f=H$i.prototype;return H$f.hasListener=function(H$f){return!!(this._events&&this._events[H$f])},H$f.getListener=function(H$f){return this._events?this._events[H$f]:null},H$f.event=function(H$f,H$K){if(!this._events||!this._events[H$f])return!1;var H$Y=this._events[H$f];if(H$Y.lock)H$Y.queue||(H$Y.queue=[]),H$Y.queue.push(H$K);else{var H$X;for(H$Y.lock=!0,H$Y.cursor=H$Y.head;H$Y.cursor;)(H$X=H$Y.cursor).recover?(H$Y.head=H$Y.tail=H$Y.cursor=null,console.error("node is recover："+H$X.id)):(H$Y.cursor=H$X.next,H$X.once&&H$i.delNode(H$Y,H$X),H$X.method&&(null!=H$K?H$X.args?H$X.method.apply(H$X.caller,H$X.args.concat(H$K)):H$K instanceof Array?H$X.method.apply(H$X.caller,H$K):H$X.caller?H$X.method.call(H$X.caller,H$K):H$a.recordError("事件派发错误","node.caller:"+H$X.caller+"node.method:"+H$X.method+"data:"+H$K+"node.prev"+H$X.prev):H$X.method.apply(H$X.caller,H$X.args)),H$X.once&&H$i.recoverHandler(H$X));H$Y.lock=!1,!H$Y.head&&this._events&&this._events[H$f]==H$Y&&delete this._events[H$f],H$Y.queue&&H$Y.queue.length&&this.event(H$f,H$Y.queue.shift())}return!0},H$f.on=function(H$f,H$K,H$Y,H$X){return this._createListener(H$f,H$K,H$Y,H$X,!1)},H$f.once=function(H$f,H$K,H$Y,H$X){return this._createListener(H$f,H$K,H$Y,H$X,!0)},H$f._createListener=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$H&&(H$H=!0),H$H&&this.off(H$f,H$K,H$Y,H$L);var H$E=H$i.createHandler(H$K||this,H$Y,H$X,H$L);this._events||(this._events={});var H$d=this._events,H$O=H$d[H$f];return H$O?H$O.tail?(H$E.prev=H$O.tail,H$O.tail.next=H$E,H$O.tail=H$E):H$O.head=H$O.tail=H$E:H$d[H$f]={head:H$E,tail:H$E,cursor:null,lock:!1},this},H$f.off=function(H$f,H$K,H$Y,H$X){if(void 0===H$X&&(H$X=!1),!this._events||!this._events[H$f])return this;for(var H$L=this._events[H$f],H$H=H$L.head;H$H;){if((!H$K||H$H.caller===H$K)&&H$H.method===H$Y&&(!H$X||H$H.once)){H$i.delNode(H$L,H$H),H$L.cursor==H$H&&(H$L.cursor=H$H.next),H$i.recoverHandler(H$H);break}H$H=H$H.next}return this},H$f.offAll=function(H$f){var H$K=this._events;if(!H$K)return this;if(H$f)this._recoverHandlers(H$K[H$f]),delete H$K[H$f];else{for(var H$Y in H$K)this._recoverHandlers(H$K[H$Y]);this._events=null}return this},H$f._recoverHandlers=function(H$f){if(H$f){for(var H$K=H$f.head;H$K;){H$i.delNode(H$f,H$K);var H$Y=H$K.next;H$i.recoverHandler(H$K),H$K=H$Y}H$f.cursor=null}},H$f.isMouseEvent=function(H$f){return H$i.MOUSE_EVENTS[H$f]},H$i.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},H$i.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},H$i.delNode=function(H$f,H$K){H$K.prev?H$K.prev.next=H$K.next:H$f.head=H$K.next,H$K.next?H$K.next.prev=H$K.prev:H$f.tail=H$K.prev},H$i.createHandler=function(H$f,H$K,H$Y,H$X){var H$L=500<H$i._freeHandler.length?H$i._freeHandler.shift():null;if(H$L)if(H$L.recover)H$L.recover=!1,H$L.caller=H$f,H$L.method=H$K,H$L.args=H$Y,H$L.once=H$X;else{var H$H="";try{arguments.propertyIsEnumerable.caller}catch(H$f){H$H=H$f.stack}var H$E=H$L.caller?(H$L.caller.__proto__&&H$L.caller.__proto__.constructor&&H$L.caller.__proto__.constructor.name)+"|"+H$L.caller.__className+"|"+H$L.caller.name:"",H$d=H$L.method?H$L.method.name:"";H$a.recordError("EventDispatcher重复创建","caller="+H$E+"  method="+H$d+"  stack="+H$H),H$L={id:++H$i._nodeCount,caller:H$f,method:H$K,args:H$Y,once:H$X,recover:!1}}else H$L={id:++H$i._nodeCount,caller:H$f,method:H$K,args:H$Y,once:H$X,recover:!1};return H$L.prev=H$L.next=null,H$L},H$i.recoverHandler=function(H$f){if(H$f.recover){if(H$i._errorCount<5){H$i._errorCount++;var H$K="";try{arguments.propertyIsEnumerable.caller}catch(H$f){H$K=H$f.stack}var H$Y=H$f.caller?(H$f.caller.__proto__&&H$f.caller.__proto__.constructor&&H$f.caller.__proto__.constructor.name)+"|"+H$f.caller.__className+"|"+H$f.caller.name:"",H$X=H$f.method?H$f.method.name:"";H$a.recordError("EventDispatcher重复回收","id="+H$f.id+"  caller="+H$Y+"  method="+H$X+"  stack="+H$K)}H$f.caller=H$f.method=H$f.args=H$f.prev=null}else H$f.recover=!0,H$f.caller=H$f.method=H$f.args=H$f.prev=H$f.next=null,H$i._freeHandler&&H$i._freeHandler.length<3e3&&H$i._freeHandler.push(H$f)},H$i._freeHandler=[],H$i._nodeCount=0,H$i._errorCount=0,H$i}(),H$x=function(){function H$L(H$f,H$K,H$Y,H$X){this.once=!1,void(this._id=0)===H$X&&(H$X=!1),this.setTo(H$f,H$K,H$Y,H$X)}H$U(H$L,"laya.utils.Handler");var H$f=H$L.prototype;return H$f.setTo=function(H$f,H$K,H$Y,H$X){return this._id=H$L._gid++,this.caller=H$f,this.method=H$K,this.args=H$Y,this.once=H$X,this},H$f.run=function(){if(null==this.method)return null;var H$f=this._id,H$K=this.method.apply(this.caller,this.args);return this._id===H$f&&this.once&&this.recover(),H$K},H$f.runWith=function(H$f){if(null==this.method)return null;var H$K=this._id;if(null==H$f)var H$Y=this.method.apply(this.caller,this.args);else H$Y=this.args||H$f.unshift?this.args?this.method.apply(this.caller,this.args.concat(H$f)):this.method.apply(this.caller,H$f):this.method.call(this.caller,H$f);return this._id===H$K&&this.once&&this.recover(),H$Y},H$f.clear=function(){return this.caller=null,this.method=null,this.args=null,this},H$f.recover=function(){0<this._id&&(this._id=0,this.clear())},H$L.create=function(H$f,H$K,H$Y,H$X){return void 0===H$X&&(H$X=!0),new H$L(H$f,H$K,H$Y,H$X)},H$L._gid=1,H$L}(),H$G=function(){function H$f(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}H$U(H$f,"laya.display.BitmapFont");var H$K=H$f.prototype;return H$K.loadFont=function(H$f,H$K){this._path=H$f,this._complete=H$K,H$a.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],H$x.create(this,this.onLoaded))},H$K.onLoaded=function(){this.parseFont(H$df.getRes(this._path),H$df.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},H$K.parseFont=function(H$f,H$K){if(null!=H$f&&null!=H$K){this._texture=H$K;var H$Y=H$f.getElementsByTagName("info");if(!H$Y[0].getAttributeNode)return this.parseFont2(H$f,H$K);this.fontSize=parseInt(H$Y[0].getAttributeNode("size").nodeValue);var H$X,H$L=H$Y[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(H$L[0]),parseInt(H$L[1]),parseInt(H$L[2]),parseInt(H$L[3])],H$X=H$f.getElementsByTagName("char");var H$H=0;for(H$H=0;H$H<H$X.length;H$H++){var H$E=H$X[H$H],H$d=parseInt(H$E.getAttributeNode("id").nodeValue),H$O=parseInt(H$E.getAttributeNode("xoffset").nodeValue)/1,H$i=parseInt(H$E.getAttributeNode("yoffset").nodeValue)/1,H$U=parseInt(H$E.getAttributeNode("xadvance").nodeValue)/1,H$Z=new H$n;H$Z.x=parseInt(H$E.getAttributeNode("x").nodeValue),H$Z.y=parseInt(H$E.getAttributeNode("y").nodeValue),H$Z.width=parseInt(H$E.getAttributeNode("width").nodeValue),H$Z.height=parseInt(H$E.getAttributeNode("height").nodeValue);var H$y=H$Uf.create(H$K,H$Z.x,H$Z.y,H$Z.width,H$Z.height,H$O,H$i);this._maxWidth=Math.max(this._maxWidth,H$U+this.letterSpacing),this._fontCharDic[H$d]=H$y,this._fontWidthMap[H$d]=H$U}}},H$K.parseFont2=function(H$f,H$K){if(null!=H$f&&null!=H$K){this._texture=H$K;var H$Y=H$f.getElementsByTagName("info");this.fontSize=parseInt(H$Y[0].attributes.size.nodeValue);var H$X=H$Y[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(H$X[0]),parseInt(H$X[1]),parseInt(H$X[2]),parseInt(H$X[3])];var H$L=H$f.getElementsByTagName("char"),H$H=0;for(H$H=0;H$H<H$L.length;H$H++){var H$E=H$L[H$H].attributes,H$d=parseInt(H$E.id.nodeValue),H$O=parseInt(H$E.xoffset.nodeValue)/1,H$i=parseInt(H$E.yoffset.nodeValue)/1,H$U=parseInt(H$E.xadvance.nodeValue)/1,H$Z=new H$n;H$Z.x=parseInt(H$E.x.nodeValue),H$Z.y=parseInt(H$E.y.nodeValue),H$Z.width=parseInt(H$E.width.nodeValue),H$Z.height=parseInt(H$E.height.nodeValue);var H$y=H$Uf.create(H$K,H$Z.x,H$Z.y,H$Z.width,H$Z.height,H$O,H$i);this._maxWidth=Math.max(this._maxWidth,H$U+this.letterSpacing),this._fontCharDic[H$d]=H$y,this._fontWidthMap[H$d]=H$U}}},H$K.getCharTexture=function(H$f){return this._fontCharDic[H$f.charCodeAt(0)]},H$K.destroy=function(){if(this._texture){for(var H$f in this._fontCharDic){var H$K=this._fontCharDic[H$f];H$K&&H$K.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},H$K.setSpaceWidth=function(H$f){this._spaceWidth=H$f},H$K.getCharWidth=function(H$f){var H$K=H$f.charCodeAt(0);return this._fontWidthMap[H$K]?this._fontWidthMap[H$K]+this.letterSpacing:" "==H$f?this._spaceWidth+this.letterSpacing:0},H$K.getTextWidth=function(H$f){for(var H$K=0,H$Y=0,H$X=H$f.length;H$Y<H$X;H$Y++)H$K+=this.getCharWidth(H$f.charAt(H$Y));return H$K},H$K.getMaxWidth=function(){return this._maxWidth},H$K.getMaxHeight=function(){return this.fontSize},H$K.drawText=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E,H$d=this.getTextWidth(H$f),H$O=0;"center"===H$L&&(H$O=(H$H-H$d)/2),"right"===H$L&&(H$O=H$H-H$d);for(var H$i=0,H$U=0,H$Z=H$f.length;H$U<H$Z;H$U++)(H$E=this.getCharTexture(H$f.charAt(H$U)))&&(H$K.graphics.drawTexture(H$E,H$Y+H$i+H$O,H$X),H$i+=this.getCharWidth(H$f.charAt(H$U)))},H$f}(),H$d=function(){function H$Y(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=H$Y._TF_EMPTY}H$U(H$Y,"laya.display.css.Style");var H$f=H$Y.prototype;return H$f.getTransform=function(){return this._tf},H$f.setTransform=function(H$f){this._tf="none"!==H$f&&H$f?H$f:H$Y._TF_EMPTY},H$f.setTranslateX=function(H$f){this._tf===H$Y._TF_EMPTY&&(this._tf=new H$L),this._tf.translateX=H$f},H$f.setTranslateY=function(H$f){this._tf===H$Y._TF_EMPTY&&(this._tf=new H$L),this._tf.translateY=H$f},H$f.setScaleX=function(H$f){this._tf===H$Y._TF_EMPTY&&(this._tf=new H$L),this._tf.scaleX=H$f},H$f.setScale=function(H$f,H$K){this._tf===H$Y._TF_EMPTY&&(this._tf=new H$L),this._tf.scaleX=H$f,this._tf.scaleY=H$K},H$f.setScaleY=function(H$f){this._tf===H$Y._TF_EMPTY&&(this._tf=new H$L),this._tf.scaleY=H$f},H$f.setRotate=function(H$f){this._tf===H$Y._TF_EMPTY&&(this._tf=new H$L),this._tf.rotate=H$f},H$f.setSkewX=function(H$f){this._tf===H$Y._TF_EMPTY&&(this._tf=new H$L),this._tf.skewX=H$f},H$f.setSkewY=function(H$f){this._tf===H$Y._TF_EMPTY&&(this._tf=new H$L),this._tf.skewY=H$f},H$f.destroy=function(){this.scrollRect=null},H$f.render=function(H$f,H$K,H$Y,H$X){},H$f.getCSSStyle=function(){return H$Kf.EMPTY},H$f._enableLayout=function(){return!1},H$B(0,H$f,"scaleX",function(){return this._tf.scaleX},function(H$f){this.setScaleX(H$f)}),H$B(0,H$f,"transform",function(){return this.getTransform()},function(H$f){this.setTransform(H$f)}),H$B(0,H$f,"translateX",function(){return this._tf.translateX},function(H$f){this.setTranslateX(H$f)}),H$B(0,H$f,"translateY",function(){return this._tf.translateY},function(H$f){this.setTranslateY(H$f)}),H$B(0,H$f,"scaleY",function(){return this._tf.scaleY},function(H$f){this.setScaleY(H$f)}),H$B(0,H$f,"block",function(){return 0!=(1&this._type)}),H$B(0,H$f,"skewY",function(){return this._tf.skewY},function(H$f){this.setSkewY(H$f)}),H$B(0,H$f,"rotate",function(){return this._tf.rotate},function(H$f){this.setRotate(H$f)}),H$B(0,H$f,"skewX",function(){return this._tf.skewX},function(H$f){this.setSkewX(H$f)}),H$B(0,H$f,"paddingLeft",function(){return 0}),H$B(0,H$f,"paddingTop",function(){return 0}),H$B(0,H$f,"absolute",function(){return!0}),H$Y.__init__=function(){H$Y._TF_EMPTY=new H$L,H$Y.EMPTY=new H$Y},H$Y.EMPTY=null,H$Y._TF_EMPTY=null,H$Y}(),H$l=function(){function H$K(H$f){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=H$w.create(H$K.defaultColor),this.family=H$K.defaultFamily,this.stroke=H$K._STROKE,this.size=H$K.defaultSize,H$f&&H$f!==H$K.EMPTY&&H$f.copyTo(this)}H$U(H$K,"laya.display.css.Font");var H$f=H$K.prototype;return H$f.set=function(H$f){this._text=null;for(var H$K=H$f.split(" "),H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++){var H$L=H$K[H$Y];switch(H$L){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<H$L.indexOf("px")&&(this.size=parseInt(H$L),this.family=H$K[H$Y+1],H$Y++)}},H$f.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},H$f.copyTo=function(H$f){H$f._type=this._type,H$f._text=this._text,H$f._weight=this._weight,H$f._color=this._color,H$f.family=this.family,H$f.stroke=this.stroke!=H$K._STROKE?this.stroke.slice():H$K._STROKE,H$f.indent=this.indent,H$f.size=this.size},H$B(0,H$f,"password",function(){return 0!=(1024&this._type)},function(H$f){H$f?this._type|=1024:this._type&=-1025}),H$B(0,H$f,"color",function(){return this._color.strColor},function(H$f){this._color=H$w.create(H$f)}),H$B(0,H$f,"italic",function(){return 0!=(512&this._type)},function(H$f){H$f?this._type|=512:this._type&=-513}),H$B(0,H$f,"bold",function(){return 0!=(2048&this._type)},function(H$f){H$f?this._type|=2048:this._type&=-2049}),H$B(0,H$f,"weight",function(){return""+this._weight},function(H$f){var H$K=0;switch(H$f){case"normal":break;case"bold":this.bold=!0,H$K=700;break;case"bolder":H$K=800;break;case"lighter":H$K=100;break;default:H$K=parseInt(H$f)}this._weight=H$K,this._text=null}),H$B(0,H$f,"decoration",function(){return this._decoration?this._decoration.value:null},function(H$f){var H$K=H$f.split(" ");switch(this._decoration||(this._decoration={}),H$K[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=H$K[0]}H$K[1]&&(this._decoration.color=H$w.create(H$K)),this._decoration.value=H$f}),H$K.__init__=function(){H$K.EMPTY=new H$K(null)},H$K.EMPTY=null,H$K.defaultColor="#000000",H$K.defaultSize=12,H$K.defaultFamily="Arial",H$K.defaultFont="12px Arial",H$K._STROKE=[0,"#000000"],H$K._ITALIC=512,H$K._PASSWORD=1024,H$K._BOLD=2048,H$K}(),H$L=function(){function H$f(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return H$U(H$f,"laya.display.css.TransformInfo"),H$f}(),H$y=function(){function H$Z(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,H$k.isConchNode){this._nativeObj=new H$E._conchGraphics,this.id=this._nativeObj.conchID}}H$U(H$Z,"laya.display.Graphics");var H$f=H$Z.prototype;return H$f.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},H$f.clear=function(H$f){void 0===H$f&&(H$f=!1);var H$K=0,H$Y=0;if(H$f){var H$X=this._one;if(this._cmds){for(H$Y=this._cmds.length,H$K=0;H$K<H$Y;H$K++)!(H$X=this._cmds[H$K])||H$X.callee!==H$k._context._drawTexture&&H$X.callee!==H$k._context._drawTextureWithTransform||(H$X[0]=null,H$Z._cache.push(H$X));this._cmds.length=0}else H$X&&(!H$X||H$X.callee!==H$k._context._drawTexture&&H$X.callee!==H$k._context._drawTextureWithTransform||(H$X[0]=null,H$Z._cache.push(H$X)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(H$K=0,H$Y=this._vectorgraphArray.length;H$K<H$Y;H$K++)H$N.getInstance().deleteShape(this._vectorgraphArray[H$K]);this._vectorgraphArray.length=0}},H$f._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},H$f._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new H$Y,this._graphicBounds._graphics=this)},H$f._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},H$f._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},H$f.getBounds=function(H$f){return void 0===H$f&&(H$f=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(H$f)},H$f.getBoundPoints=function(H$f){return void 0===H$f&&(H$f=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(H$f)},H$f._addCmd=function(H$f){this._cmds=this._cmds||[],H$f.callee=H$f.shift(),this._cmds.push(H$f)},H$f.setFilters=function(H$f){this._saveToCmd(H$k._context._setFilters,H$f)},H$f.drawTexture=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){if(void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0),void 0===H$E&&(H$E=1),!H$f||H$E<.01)return null;H$X||(H$X=H$f.sourceWidth),H$L||(H$L=H$f.sourceHeight),H$E=H$E<0?0:1<H$E?1:H$E;var H$d,H$O=!H$k.isWebGL&&(H$P.onFirefox||H$P.onEdge||H$P.onIE||H$P.onSafari)?.5:0,H$i=H$X/H$f.sourceWidth,H$U=H$L/H$f.sourceHeight;return H$X=H$f.width*H$i,H$L=H$f.height*H$U,H$f.loaded&&(H$X<=0||H$L<=0)?null:(H$K+=H$f.offsetX*H$i,H$Y+=H$f.offsetY*H$U,this._sp&&(this._sp._renderType|=512),H$K-=H$O,H$Y-=H$O,H$X+=2*H$O,H$L+=2*H$O,H$Z._cache.length?((H$d=H$Z._cache.pop())[0]=H$f,H$d[1]=H$K,H$d[2]=H$Y,H$d[3]=H$X,H$d[4]=H$L,H$d[5]=H$H,H$d[6]=H$E):H$d=[H$f,H$K,H$Y,H$X,H$L,H$H,H$E],H$d.callee=H$H||1!=H$E?H$k._context._drawTextureWithTransform:H$k._context._drawTexture,null!=this._one||H$H||1!=H$E?this._saveToCmd(H$d.callee,H$d):(this._one=H$d,this._render=this._renderOneImg),H$f.loaded||H$f.once("loaded",this,this._textureLoaded,[H$f,H$d]),this._repaint(),H$d)},H$f.cleanByTexture=function(H$f,H$K,H$Y,H$X,H$L){if(void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0),!H$f)return this.clear();if(this._one&&this._render===this._renderOneImg){H$X||(H$X=H$f.sourceWidth),H$L||(H$L=H$f.sourceHeight);var H$H=H$X/H$f.sourceWidth,H$E=H$L/H$f.sourceHeight;H$X=H$f.width*H$H,H$L=H$f.height*H$E,H$K+=H$f.offsetX*H$H,H$Y+=H$f.offsetY*H$E,this._one[0]=H$f,this._one[1]=H$K,this._one[2]=H$Y,this._one[3]=H$X,this._one[4]=H$L,this._repaint()}else this.clear(),H$f&&this.drawTexture(H$f,H$K,H$Y,H$X,H$L)},H$f.drawTextures=function(H$f,H$K){H$f&&this._saveToCmd(H$k._context._drawTextures,[H$f,H$K])},H$f.fillTexture=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){if(void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0),void 0===H$H&&(H$H="repeat"),H$f){var H$d=[H$f,H$K,H$Y,H$X,H$L,H$H,H$E||H$I.EMPTY,{}];H$f.loaded||H$f.once("loaded",this,this._textureLoaded,[H$f,H$d]),this._saveToCmd(H$k._context._fillTexture,H$d)}},H$f._textureLoaded=function(H$f,H$K){H$K[3]=H$K[3]||H$f.width,H$K[4]=H$K[4]||H$f.height,this._repaint()},H$f.fillCircle=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){H$Y.bitmap.enableMerageInAtlas=!1;var H$d=new Float32Array(2*(H$E+1)),H$O=new Float32Array(2*(H$E+1)),H$i=new Uint16Array(3*H$E),H$U=2*Math.PI/H$E,H$Z=0;H$d[0]=H$X,H$d[1]=H$L,H$O[0]=H$X/H$Y.width,H$O[1]=H$L/H$Y.height;for(var H$y=2,H$l=0;H$l<H$E;H$l++){var H$B=H$H*Math.cos(H$Z)+H$X,H$$=H$H*Math.sin(H$Z)+H$L;H$d[H$y]=H$B,H$d[H$y+1]=H$$,H$O[H$y]=H$B/H$Y.width,H$O[H$y+1]=H$$/H$Y.height,H$Z+=H$U,H$y+=2}for(H$l=H$y=0;H$l<H$E;H$l++)H$i[H$y++]=0,H$i[H$y++]=H$l+1,H$i[H$y++]=H$E+1<=H$l+2?1:H$l+2;this.drawTriangles(H$Y,H$f,H$K,H$d,H$O,H$i)},H$f.drawTriangles=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){void 0===H$d&&(H$d=1),this._saveToCmd(H$k._context.drawTriangles,[H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i])},H$f._saveToCmd=function(H$f,H$K){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=H$K,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(H$K)),H$K.callee=H$f,this._repaint(),H$K},H$f.clipRect=function(H$f,H$K,H$Y,H$X){this._saveToCmd(H$k._context._clipRect,[H$f,H$K,H$Y,H$X])},H$f.fillText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){void 0===H$E&&(H$E=0),this._saveToCmd(H$k._context._fillText,[H$f,H$K,H$Y,H$X||H$l.defaultFont,H$L,H$H])},H$f.fillBorderText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){this._saveToCmd(H$k._context._fillBorderText,[H$f,H$K,H$Y,H$X||H$l.defaultFont,H$L,H$H,H$E,H$d])},H$f.strokeText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this._saveToCmd(H$k._context._strokeText,[H$f,H$K,H$Y,H$X||H$l.defaultFont,H$L,H$H,H$E])},H$f.alpha=function(H$f){H$f=H$f<0?0:1<H$f?1:H$f,this._saveToCmd(H$k._context._alpha,[H$f])},H$f.setAlpha=function(H$f){H$f=H$f<0?0:1<H$f?1:H$f,this._saveToCmd(H$k._context._setAlpha,[H$f])},H$f.transform=function(H$f,H$K,H$Y){void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),this._saveToCmd(H$k._context._transform,[H$f,H$K,H$Y])},H$f.rotate=function(H$f,H$K,H$Y){void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),this._saveToCmd(H$k._context._rotate,[H$f,H$K,H$Y])},H$f.scale=function(H$f,H$K,H$Y,H$X){void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=0),this._saveToCmd(H$k._context._scale,[H$f,H$K,H$Y,H$X])},H$f.translate=function(H$f,H$K){this._saveToCmd(H$k._context._translate,[H$f,H$K])},H$f.save=function(){this._saveToCmd(H$k._context._save,[])},H$f.restore=function(){this._saveToCmd(H$k._context._restore,[])},H$f.replaceText=function(H$f){this._repaint();var H$K=this._cmds;if(H$K){for(var H$Y=H$K.length-1;-1<H$Y;H$Y--)if(this._isTextCmd(H$K[H$Y].callee))return H$K[H$Y][0].toUpperCase?H$K[H$Y][0]=H$f:H$K[H$Y][0].setText(H$f),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=H$f:this._one[0].setText(H$f),!0;return!1},H$f._isTextCmd=function(H$f){return H$f===H$k._context._fillText||H$f===H$k._context._fillBorderText||H$f===H$k._context._strokeText},H$f.replaceTextColor=function(H$f){this._repaint();var H$K=this._cmds;if(H$K)for(var H$Y=H$K.length-1;-1<H$Y;H$Y--)this._isTextCmd(H$K[H$Y].callee)&&(H$K[H$Y][4]=H$f,H$K[H$Y][0].toUpperCase||(H$K[H$Y][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=H$f,this._one[0].toUpperCase||(this._one[0].changed=!0))},H$f.loadImage=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=this;void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0);var H$d=H$df.getRes(H$f);function H$O(H$f){H$f&&(H$E.drawTexture(H$f,H$K,H$Y,H$X,H$L),null!=H$H&&H$H.call(H$E._sp,H$f))}H$d?H$O(H$d):H$a.loader.load(H$f,H$x.create(null,H$O),null,"image")},H$f._renderEmpty=function(H$f,H$K,H$Y,H$X){},H$f._renderAll=function(H$f,H$K,H$Y,H$X){for(var H$L,H$H=this._cmds,H$E=0,H$d=H$H.length;H$E<H$d;H$E++)(H$L=H$H[H$E]).callee.call(H$K,H$Y,H$X,H$L)},H$f._renderOne=function(H$f,H$K,H$Y,H$X){this._one.callee.call(H$K,H$Y,H$X,this._one)},H$f._renderOneImg=function(H$f,H$K,H$Y,H$X){this._one.callee.call(H$K,H$Y,H$X,this._one),2305!==H$f._renderType&&(H$f._renderType|=1)},H$f.drawLine=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$H&&(H$H=1);var H$E=0;H$k.isWebGL&&(H$E=H$N.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$E));var H$d=H$H%2==0?0:.5,H$O=[H$f+H$d,H$K+H$d,H$Y+H$d,H$X+H$d,H$L,H$H,H$E];this._saveToCmd(H$k._context._drawLine,H$O)},H$f.drawLines=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$L&&(H$L=1);var H$H=0;if(H$Y&&!(H$Y.length<4)){H$k.isWebGL&&(H$H=H$N.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$H));var H$E=H$L%2==0?0:.5,H$d=[H$f+H$E,H$K+H$E,H$Y,H$X,H$L,H$H];this._saveToCmd(H$k._context._drawLines,H$d)}},H$f.drawCurves=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$L&&(H$L=1);var H$H=[H$f,H$K,H$Y,H$X,H$L];this._saveToCmd(H$k._context._drawCurves,H$H)},H$f.drawRect=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){void 0===H$E&&(H$E=1);var H$d=H$H?H$E/2:0,H$O=H$H?H$E:0,H$i=[H$f+H$d,H$K+H$d,H$Y-H$O,H$X-H$O,H$L,H$H,H$E];this._saveToCmd(H$k._context._drawRect,H$i)},H$f.drawCircle=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$H&&(H$H=1);var H$E=H$L?H$H/2:0,H$d=0;H$k.isWebGL&&(H$d=H$N.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$d));var H$O=[H$f,H$K,H$Y-H$E,H$X,H$L,H$H,H$d];this._saveToCmd(H$k._context._drawCircle,H$O)},H$f.drawPie=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){void 0===H$d&&(H$d=1);var H$O=H$E?H$d/2:0,H$i=H$E?H$d:0,H$U=0;H$k.isWebGL&&(H$U=H$N.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$U));var H$Z=[H$f+H$O,H$K+H$O,H$Y-H$i,H$X,H$L,H$H,H$E,H$d,H$U];H$Z[3]=H$g.toRadian(H$X),H$Z[4]=H$g.toRadian(H$L),this._saveToCmd(H$k._context._drawPie,H$Z)},H$f.drawPoly=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$H&&(H$H=1);var H$E=0,H$d=!1;H$k.isWebGL&&(H$E=H$N.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(H$E),H$d=!(6<H$Y.length));var H$O=H$L?H$H%2==0?0:.5:0,H$i=[H$f+H$O,H$K+H$O,H$Y,H$X,H$L,H$H,H$E,H$d];this._saveToCmd(H$k._context._drawPoly,H$i)},H$f.drawPath=function(H$f,H$K,H$Y,H$X,H$L){var H$H=[H$f,H$K,H$Y,H$X,H$L];this._saveToCmd(H$k._context._drawPath,H$H)},H$B(0,H$f,"cmds",function(){return this._cmds},function(H$f){this._sp&&(this._sp._renderType|=512),this._cmds=H$f,this._render=this._renderAll,this._repaint()}),H$Z.__init__=function(){if(H$k.isConchNode){for(var H$f=laya.display.Graphics.prototype,H$K=H$P.window.ConchGraphics.prototype,H$Y=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],H$X=0,H$L=H$Y.length;H$X<=H$L;H$X++){var H$H=H$Y[H$X];H$f[H$H]=H$K[H$H]}H$f._saveToCmd=null,H$K.drawImageS&&(H$f.drawTextures=function(H$f,H$K){if(H$f&&H$f.loaded&&H$f.bitmap&&H$f.source){var H$Y=H$f.uv,H$X=H$f.bitmap.width,H$L=H$f.bitmap.height;this.drawImageS(H$f.bitmap.source,H$Y[0]*H$X,H$Y[1]*H$L,(H$Y[2]-H$Y[0])*H$X,(H$Y[5]-H$Y[3])*H$L,H$f.offsetX,H$f.offsetY,H$f.width,H$f.height,H$K)}}),H$f.drawTexture=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){if(void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0),void 0===H$E&&(H$E=1),H$f)if(H$f.loaded){if(H$f.loaded&&H$f.bitmap&&H$f.source&&(H$X||(H$X=H$f.sourceWidth),H$L||(H$L=H$f.sourceHeight),H$E=H$E<0?0:1<H$E?1:H$E,H$X=H$X-H$f.sourceWidth+H$f.width,H$L=H$L-H$f.sourceHeight+H$f.height,!(H$X<=0||H$L<=0))){H$K+=H$f.offsetX,H$Y+=H$f.offsetY;var H$d=H$f.uv,H$O=H$f.bitmap.width,H$i=H$f.bitmap.height;H$d[4]<H$d[0]&&H$d[5]<H$d[1]?this.drawImageM(H$f.bitmap.source,H$d[4]*H$O,H$d[5]*H$i,(H$d[0]-H$d[4])*H$O,(H$d[1]-H$d[5])*H$i,H$K,H$Y,H$X,H$L,H$H,H$E):this.drawImageM(H$f.bitmap.source,H$d[0]*H$O,H$d[1]*H$i,(H$d[2]-H$d[0])*H$O,(H$d[5]-H$d[3])*H$i,H$K,H$Y,H$X,H$L,H$H,H$E),this._repaint()}}else H$f.once("loaded",this,function(){this.drawTexture(H$f,H$K,H$Y,H$X,H$L,H$H)})},H$f.fillTexture=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){if(void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0),void 0===H$H&&(H$H="repeat"),H$f&&H$f.loaded){var H$d,H$O=H$k._context.ctx,H$i=H$f.bitmap.width,H$U=H$f.bitmap.height,H$Z=H$f.uv;H$d=H$f.uv!=H$Uf.DEF_UV?H$O.createPattern(H$f.bitmap.source,H$H,H$Z[0]*H$i,H$Z[1]*H$U,(H$Z[2]-H$Z[0])*H$i,(H$Z[5]-H$Z[3])*H$U):H$O.createPattern(H$f.bitmap.source,H$H);var H$y=0,H$l=0;H$E&&(H$K+=H$E.x%H$f.width,H$Y+=H$E.y%H$f.height,H$y-=H$E.x%H$f.width,H$l-=H$E.y%H$f.height),this._fillImage(H$d,H$K,H$Y,H$y,H$l,H$X,H$L)}}}},H$Z._cache=[],H$Z}(),H$Y=function(){function H$S(){this._cacheBoundsType=!1}H$U(H$S,"laya.display.GraphicsBounds");var H$f=H$S.prototype;return H$f.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},H$f.reset=function(){this._temp&&(this._temp.length=0)},H$f.getBounds=function(H$f){return void 0===H$f&&(H$f=!1),(!this._bounds||!this._temp||this._temp.length<1||H$f!=this._cacheBoundsType)&&(this._bounds=H$n._getWrapRec(this.getBoundPoints(H$f),this._bounds)),this._cacheBoundsType=H$f,this._bounds},H$f.getBoundPoints=function(H$f){return void 0===H$f&&(H$f=!1),(!this._temp||this._temp.length<1||H$f!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(H$f)),this._cacheBoundsType=H$f,this._rstBoundPoints=H$g.copyArray(this._rstBoundPoints,this._temp)},H$f._getCmdPoints=function(H$f){void 0===H$f&&(H$f=!1);var H$K,H$Y,H$X=H$k._context,H$L=this._graphics.cmds;if((H$K=this._temp||(this._temp=[])).length=0,H$L||null==this._graphics._one||(H$S._tempCmds.length=0,H$S._tempCmds.push(this._graphics._one),H$L=H$S._tempCmds),!H$L)return H$K;(H$Y=H$S._tempMatrixArrays).length=0;var H$H=H$S._initMatrix;H$H.identity();for(var H$E,H$d,H$O=H$S._tempMatrix,H$i=NaN,H$U=NaN,H$Z=NaN,H$y=NaN,H$l=NaN,H$B=NaN,H$$=0,H$h=H$L.length;H$$<H$h;H$$++)if((H$E=H$L[H$$]).callee)switch(H$E.callee){case H$X._save:case 7:H$Y.push(H$H),H$H=H$H.clone();break;case H$X._restore:case 8:H$H=H$Y.pop();break;case H$X._scale:case 5:H$O.identity(),H$O.translate(-H$E[2],-H$E[3]),H$O.scale(H$E[0],H$E[1]),H$O.translate(H$E[2],H$E[3]),this._switchMatrix(H$H,H$O);break;case H$X._rotate:case 3:H$O.identity(),H$O.translate(-H$E[1],-H$E[2]),H$O.rotate(H$E[0]),H$O.translate(H$E[1],H$E[2]),this._switchMatrix(H$H,H$O);break;case H$X._translate:case 6:H$O.identity(),H$O.translate(H$E[0],H$E[1]),this._switchMatrix(H$H,H$O);break;case H$X._transform:case 4:H$O.identity(),H$O.translate(-H$E[1],-H$E[2]),H$O.concat(H$E[0]),H$O.translate(H$E[1],H$E[2]),this._switchMatrix(H$H,H$O);break;case 16:case 24:H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[0],H$E[1],H$E[2],H$E[3]),H$H);break;case 17:H$H.copyTo(H$O),H$O.concat(H$E[4]),H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[0],H$E[1],H$E[2],H$E[3]),H$O);break;case H$X._drawTexture:H$d=H$E[0],H$f?H$E[3]&&H$E[4]?H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[1],H$E[2],H$E[3],H$E[4]),H$H):(H$d=H$E[0],H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[1],H$E[2],H$d.width,H$d.height),H$H)):(H$i=(H$E[3]||H$d.sourceWidth)/H$d.width,H$U=(H$E[4]||H$d.sourceHeight)/H$d.height,H$Z=H$i*H$d.sourceWidth,H$y=H$U*H$d.sourceHeight,H$l=0<H$d.offsetX?H$d.offsetX:0,H$B=0<H$d.offsetY?H$d.offsetY:0,H$l*=H$i,H$B*=H$U,H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[1]-H$l,H$E[2]-H$B,H$Z,H$y),H$H));break;case H$X._fillTexture:H$E[3]&&H$E[4]?H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[1],H$E[2],H$E[3],H$E[4]),H$H):(H$d=H$E[0],H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[1],H$E[2],H$d.width,H$d.height),H$H));break;case H$X._drawTextureWithTransform:var H$A;H$A=H$E[5]?(H$H.copyTo(H$O),H$O.concat(H$E[5]),H$O):H$H,H$f?H$E[3]&&H$E[4]?H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[1],H$E[2],H$E[3],H$E[4]),H$A):(H$d=H$E[0],H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[1],H$E[2],H$d.width,H$d.height),H$A)):(H$d=H$E[0],H$i=(H$E[3]||H$d.sourceWidth)/H$d.width,H$U=(H$E[4]||H$d.sourceHeight)/H$d.height,H$Z=H$i*H$d.sourceWidth,H$y=H$U*H$d.sourceHeight,H$l=0<H$d.offsetX?H$d.offsetX:0,H$B=0<H$d.offsetY?H$d.offsetY:0,H$l*=H$i,H$B*=H$U,H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[1]-H$l,H$E[2]-H$B,H$Z,H$y),H$A));break;case H$X._drawRect:case 13:H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[0],H$E[1],H$E[2],H$E[3]),H$H);break;case H$X._drawCircle:case H$X._fillCircle:case 14:H$S._addPointArrToRst(H$K,H$n._getBoundPointS(H$E[0]-H$E[2],H$E[1]-H$E[2],H$E[2]+H$E[2],H$E[2]+H$E[2]),H$H);break;case H$X._drawLine:case 20:H$S._tempPoints.length=0;var H$x;H$x=.5*H$E[5],H$E[0]==H$E[2]?H$S._tempPoints.push(H$E[0]+H$x,H$E[1],H$E[2]+H$x,H$E[3],H$E[0]-H$x,H$E[1],H$E[2]-H$x,H$E[3]):H$E[1]==H$E[3]?H$S._tempPoints.push(H$E[0],H$E[1]+H$x,H$E[2],H$E[3]+H$x,H$E[0],H$E[1]-H$x,H$E[2],H$E[3]-H$x):H$S._tempPoints.push(H$E[0],H$E[1],H$E[2],H$E[3]),H$S._addPointArrToRst(H$K,H$S._tempPoints,H$H);break;case H$X._drawCurves:case 22:H$S._addPointArrToRst(H$K,H$z.I.getBezierPoints(H$E[2]),H$H,H$E[0],H$E[1]);break;case H$X._drawPoly:case H$X._drawLines:case 18:H$S._addPointArrToRst(H$K,H$E[2],H$H,H$E[0],H$E[1]);break;case H$X._drawPath:case 19:H$S._addPointArrToRst(H$K,this._getPathPoints(H$E[2]),H$H,H$E[0],H$E[1]);break;case H$X._drawPie:case 15:H$S._addPointArrToRst(H$K,this._getPiePoints(H$E[0],H$E[1],H$E[2],H$E[3],H$E[4]),H$H)}return 200<H$K.length?H$K=H$g.copyArray(H$K,H$n._getWrapRec(H$K)._getBoundPoints()):8<H$K.length&&(H$K=H$C.scanPList(H$K)),H$K},H$f._switchMatrix=function(H$f,H$K){H$K.concat(H$f),H$K.copyTo(H$f)},H$f._getPiePoints=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$S._tempPoints;H$S._tempPoints.length=0,H$H.push(H$f,H$K);var H$E=(H$L-H$X)%(2*Math.PI)/10,H$d=NaN,H$O=H$X;for(H$d=0;H$d<=10;H$d++)H$H.push(H$f+H$Y*Math.cos(H$O),H$K+H$Y*Math.sin(H$O)),H$O+=H$E;return H$H},H$f._getPathPoints=function(H$f){var H$K,H$Y,H$X=0,H$L=H$S._tempPoints;for(H$L.length=0,H$K=H$f.length,H$X=0;H$X<H$K;H$X++)1<(H$Y=H$f[H$X]).length&&(H$L.push(H$Y[1],H$Y[2]),3<H$Y.length&&H$L.push(H$Y[3],H$Y[4]));return H$L},H$S._addPointArrToRst=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0);var H$H,H$E=0;for(H$H=H$K.length,H$E=0;H$E<H$H;H$E+=2)H$S._addPointToRst(H$f,H$K[H$E]+H$X,H$K[H$E+1]+H$L,H$Y)},H$S._addPointToRst=function(H$f,H$K,H$Y,H$X){var H$L=H$I.TEMP;H$L.setTo(H$K||0,H$Y||0),H$X.transformPoint(H$L),H$f.push(H$L.x,H$L.y)},H$S._tempPoints=[],H$S._tempMatrixArrays=[],H$S._tempCmds=[],H$O(H$S,["_tempMatrix",function(){return this._tempMatrix=new H$V},"_initMatrix",function(){return this._initMatrix=new H$V}]),H$S}(),H$H=function(){function H$f(){}H$U(H$f,"laya.events.Event");var H$K=H$f.prototype;return H$K.setTo=function(H$f,H$K,H$Y){return this.type=H$f,this.currentTarget=H$K,this.target=H$Y,this},H$K.stopPropagation=function(){this._stoped=!0},H$B(0,H$K,"stageY",function(){return H$a.stage.mouseY}),H$B(0,H$K,"charCode",function(){return this.nativeEvent.charCode}),H$B(0,H$K,"touches",function(){var H$f=this.nativeEvent.touches;if(H$f)for(var H$K=H$a.stage,H$Y=0,H$X=H$f.length;H$Y<H$X;H$Y++){var H$L=H$f[H$Y],H$H=H$I.TEMP;H$H.setTo(H$L.clientX,H$L.clientY),H$K._canvasTransform.invertTransformPoint(H$H),H$K.transform.invertTransformPoint(H$H),H$L.stageX=H$H.x,H$L.stageY=H$H.y}return H$f}),H$B(0,H$K,"keyLocation",function(){return this.nativeEvent.keyLocation}),H$B(0,H$K,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),H$B(0,H$K,"altKey",function(){return this.nativeEvent.altKey}),H$B(0,H$K,"shiftKey",function(){return this.nativeEvent.shiftKey}),H$B(0,H$K,"stageX",function(){return H$a.stage.mouseX}),H$f.EMPTY=new H$f,H$f.MOUSE_DOWN="mousedown",H$f.MOUSE_UP="mouseup",H$f.CLICK="click",H$f.RIGHT_MOUSE_DOWN="rightmousedown",H$f.RIGHT_MOUSE_UP="rightmouseup",H$f.RIGHT_CLICK="rightclick",H$f.MOUSE_MOVE="mousemove",H$f.MOUSE_OVER="mouseover",H$f.MOUSE_OUT="mouseout",H$f.MOUSE_WHEEL="mousewheel",H$f.ROLL_OVER="mouseover",H$f.ROLL_OUT="mouseout",H$f.DOUBLE_CLICK="doubleclick",H$f.CHANGE="change",H$f.CHANGED="changed",H$f.RESIZE="resize",H$f.ADDED="added",H$f.REMOVED="removed",H$f.DISPLAY="display",H$f.UNDISPLAY="undisplay",H$f.ERROR="error",H$f.COMPLETE="complete",H$f.LOADED="loaded",H$f.INITED="inited",H$f.PROGRESS="progress",H$f.INPUT="input",H$f.RENDER="render",H$f.OPEN="open",H$f.MESSAGE="message",H$f.CLOSE="close",H$f.KEY_DOWN="keydown",H$f.KEY_PRESS="keypress",H$f.KEY_UP="keyup",H$f.FRAME="enterframe",H$f.DRAG_START="dragstart",H$f.DRAG_MOVE="dragmove",H$f.DRAG_END="dragend",H$f.ENTER="enter",H$f.SELECT="select",H$f.BLUR="blur",H$f.FOCUS="focus",H$f.VISIBILITY_CHANGE="visibilitychange",H$f.FOCUS_CHANGE="focuschange",H$f.PLAYED="played",H$f.PAUSED="paused",H$f.STOPPED="stopped",H$f.START="start",H$f.END="end",H$f.ENABLE_CHANGED="enablechanged",H$f.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",H$f.COMPONENT_ADDED="componentadded",H$f.COMPONENT_REMOVED="componentremoved",H$f.LAYER_CHANGED="layerchanged",H$f.HIERARCHY_LOADED="hierarchyloaded",H$f.RECOVERED="recovered",H$f.RELEASED="released",H$f.LINK="link",H$f.LABEL="label",H$f.FULL_SCREEN_CHANGE="fullscreenchange",H$f.DEVICE_LOST="devicelost",H$f.MESH_CHANGED="meshchanged",H$f.MATERIAL_CHANGED="materialchanged",H$f.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",H$f.ANIMATION_CHANGED="animationchanged",H$f.TRIGGER_ENTER="triggerenter",H$f.TRIGGER_STAY="triggerstay",H$f.TRIGGER_EXIT="triggerexit",H$f.TRAIL_FILTER_CHANGE="trailfilterchange",H$f.DOMINO_FILTER_CHANGE="dominofilterchange",H$f}(),H$Z=(function(){function H$f(){}H$U(H$f,"laya.events.Keyboard"),H$f.NUMBER_0=48,H$f.NUMBER_1=49,H$f.NUMBER_2=50,H$f.NUMBER_3=51,H$f.NUMBER_4=52,H$f.NUMBER_5=53,H$f.NUMBER_6=54,H$f.NUMBER_7=55,H$f.NUMBER_8=56,H$f.NUMBER_9=57,H$f.A=65,H$f.B=66,H$f.C=67,H$f.D=68,H$f.E=69,H$f.F=70,H$f.G=71,H$f.H=72,H$f.I=73,H$f.J=74,H$f.K=75,H$f.L=76,H$f.M=77,H$f.N=78,H$f.O=79,H$f.P=80,H$f.Q=81,H$f.R=82,H$f.S=83,H$f.T=84,H$f.U=85,H$f.V=86,H$f.W=87,H$f.X=88,H$f.Y=89,H$f.Z=90,H$f.F1=112,H$f.F2=113,H$f.F3=114,H$f.F4=115,H$f.F5=116,H$f.F6=117,H$f.F7=118,H$f.F8=119,H$f.F9=120,H$f.F10=121,H$f.F11=122,H$f.F12=123,H$f.F13=124,H$f.F14=125,H$f.F15=126,H$f.NUMPAD=21,H$f.NUMPAD_0=96,H$f.NUMPAD_1=97,H$f.NUMPAD_2=98,H$f.NUMPAD_3=99,H$f.NUMPAD_4=100,H$f.NUMPAD_5=101,H$f.NUMPAD_6=102,H$f.NUMPAD_7=103,H$f.NUMPAD_8=104,H$f.NUMPAD_9=105,H$f.NUMPAD_ADD=107,H$f.NUMPAD_DECIMAL=110,H$f.NUMPAD_DIVIDE=111,H$f.NUMPAD_ENTER=108,H$f.NUMPAD_MULTIPLY=106,H$f.NUMPAD_SUBTRACT=109,H$f.SEMICOLON=186,H$f.EQUAL=187,H$f.COMMA=188,H$f.MINUS=189,H$f.PERIOD=190,H$f.SLASH=191,H$f.BACKQUOTE=192,H$f.LEFTBRACKET=219,H$f.BACKSLASH=220,H$f.RIGHTBRACKET=221,H$f.QUOTE=222,H$f.ALTERNATE=18,H$f.BACKSPACE=8,H$f.CAPS_LOCK=20,H$f.COMMAND=15,H$f.CONTROL=17,H$f.DELETE=46,H$f.ENTER=13,H$f.ESCAPE=27,H$f.PAGE_UP=33,H$f.PAGE_DOWN=34,H$f.END=35,H$f.HOME=36,H$f.LEFT=37,H$f.UP=38,H$f.RIGHT=39,H$f.DOWN=40,H$f.SHIFT=16,H$f.SPACE=32,H$f.TAB=9,H$f.INSERT=45}(),function(){function H$L(){}return H$U(H$L,"laya.events.KeyBoardManager"),H$L.__init__=function(){H$L._addEvent("keydown"),H$L._addEvent("keypress"),H$L._addEvent("keyup")},H$L._addEvent=function(H$K){H$P.document.addEventListener(H$K,function(H$f){laya.events.KeyBoardManager._dispatch(H$f,H$K)},!0)},H$L._dispatch=function(H$f,H$K){if(H$L.enabled){H$L._event._stoped=!1,H$L._event.nativeEvent=H$f,H$L._event.keyCode=H$f.keyCode||H$f.which||H$f.charCode,"keydown"===H$K?H$L._pressKeys[H$L._event.keyCode]=!0:"keyup"===H$K&&(H$L._pressKeys[H$L._event.keyCode]=null);for(var H$Y=H$a.stage.focus&&null!=H$a.stage.focus.event&&H$a.stage.focus.displayedInStage?H$a.stage.focus:H$a.stage,H$X=H$Y;H$X;)H$X.event(H$K,H$L._event.setTo(H$K,H$X,H$Y)),H$X=H$X.parent}},H$L.hasKeyDown=function(H$f){return H$L._pressKeys[H$f]},H$L._pressKeys={},H$L.enabled=!0,H$O(H$L,["_event",function(){return this._event=new H$H}]),H$L}()),H$$=(function(){function H$f(){}H$U(H$f,"laya.events.KeyLocation"),H$f.STANDARD=0,H$f.LEFT=1,H$f.RIGHT=2,H$f.NUM_PAD=3}(),function(){function H$i(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=H$P.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new H$H,this._matrix=new H$V,this._point=new H$I,this._rect=new H$n,this._prePoint=new H$I,this._curTouchID=NaN}H$U(H$i,"laya.events.MouseManager");var H$f=H$i.prototype;return H$f.__init__=function(H$f,H$K){var H$Y=this;this._stage=H$f;var H$X=this,H$L=this._eventList;H$K.oncontextmenu=function(H$f){if(H$i.enabled)return!1},H$K.addEventListener("mousedown",function(H$f){H$i.enabled&&(H$P.onIE||H$f.preventDefault(),H$L.push(H$f),H$X.mouseDownTime=H$P.now())}),H$K.addEventListener("mouseup",function(H$f){H$i.enabled&&(H$f.preventDefault(),H$L.push(H$f),H$X.mouseDownTime=-H$P.now())},!0),H$K.addEventListener("mousemove",function(H$f){if(H$i.enabled){H$f.preventDefault();var H$K=H$P.now();if(H$K-H$X._lastMoveTimer<10)return;H$X._lastMoveTimer=H$K,H$L.push(H$f)}},!0),H$K.addEventListener("mouseout",function(H$f){H$i.enabled&&H$L.push(H$f)}),H$K.addEventListener("mouseover",function(H$f){H$i.enabled&&H$L.push(H$f)}),H$K.addEventListener("touchstart",function(H$f){H$i.enabled&&(H$L.push(H$f),H$i._isFirstTouch||H$Cf.isInputting||H$f.preventDefault(),H$X.mouseDownTime=H$P.now())}),H$K.addEventListener("touchend",function(H$f){H$i.enabled?(H$i._isFirstTouch||H$Cf.isInputting||H$f.preventDefault(),H$i._isFirstTouch=!1,H$L.push(H$f),H$X.mouseDownTime=-H$P.now()):H$Y._curTouchID=NaN},!0),H$K.addEventListener("touchmove",function(H$f){H$i.enabled&&(H$f.preventDefault(),H$L.push(H$f))},!0),H$K.addEventListener("touchcancel",function(H$f){H$i.enabled?(H$f.preventDefault(),H$L.push(H$f)):H$Y._curTouchID=NaN},!0),H$K.addEventListener("mousewheel",function(H$f){H$i.enabled&&H$L.push(H$f)}),H$K.addEventListener("DOMMouseScroll",function(H$f){H$i.enabled&&H$L.push(H$f)})},H$f.initEvent=function(H$f,H$K){var H$Y;this._event._stoped=!1,this._event.nativeEvent=H$K||H$f,this._target=null,this._point.setTo(H$f.pageX||H$f.clientX,H$f.pageY||H$f.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=H$f.identifier||0,this._tTouchID=this._event.touchId,(H$Y=H$h.I._event)._stoped=!1,H$Y.nativeEvent=this._event.nativeEvent,H$Y.touchId=this._event.touchId},H$f.checkMouseWheel=function(H$f){this._event.delta=H$f.wheelDelta?.025*H$f.wheelDelta:-H$f.detail;for(var H$K=H$h.I.getLastOvers(),H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++){var H$L=H$K[H$Y];H$L.event("mousewheel",this._event.setTo("mousewheel",H$L,this._target))}},H$f.onMouseMove=function(H$f){H$h.I.onMouseMove(H$f,this._tTouchID)},H$f.onMouseDown=function(H$f){if(H$Cf.isInputting&&H$a.stage.focus&&H$a.stage.focus.focus&&!H$a.stage.focus.contains(this._target)){var H$K=H$a.stage.focus._tf||H$a.stage.focus,H$Y=H$f._tf||H$f;H$Y instanceof laya.display.Input&&H$Y.multiline==H$K.multiline?H$K._focusOut():H$K.focus=!1}H$h.I.onMouseDown(H$f,this._tTouchID,this._isLeftMouse)},H$f.onMouseUp=function(H$f){H$h.I.onMouseUp(H$f,this._tTouchID,this._isLeftMouse)},H$f.check=function(H$f,H$K,H$Y,H$X){this._point.setTo(H$K,H$Y),H$f.fromParentPoint(this._point),H$K=this._point.x,H$Y=this._point.y;var H$L=H$f.scrollRect;if(H$L&&(this._rect.setTo(H$L.x,H$L.y,H$L.width,H$L.height),!this._rect.contains(H$K,H$Y)))return!1;if(!this.disableMouseEvent){if(H$f.hitTestPrior&&!H$f.mouseThrough&&!this.hitTest(H$f,H$K,H$Y))return!1;for(var H$H=H$f._childs.length-1;-1<H$H;H$H--){var H$E=H$f._childs[H$H];if(!H$E.destroyed&&H$E.mouseEnabled&&H$E.visible&&this.check(H$E,H$K,H$Y,H$X))return!0}}var H$d=!(!H$f.hitTestPrior||H$f.mouseThrough||this.disableMouseEvent)||this.hitTest(H$f,H$K,H$Y);return H$d?(this._target=H$f,H$X.call(this,H$f)):H$X===this.onMouseUp&&H$f===this._stage&&(this._target=this._stage,H$X.call(this,this._target)),H$d},H$f.hitTest=function(H$f,H$K,H$Y){var H$X=!1;if(H$f.scrollRect&&(H$K-=H$f.scrollRect.x,H$Y-=H$f.scrollRect.y),H$f.hitArea instanceof laya.utils.HitArea)return H$f.hitArea.isHit(H$K,H$Y);if(0<H$f.width&&0<H$f.height||H$f.mouseThrough||H$f.hitArea)if(H$f.mouseThrough)H$X=H$f.getGraphicBounds().contains(H$K,H$Y);else{var H$L=this._rect;H$f.hitArea?H$L=H$f.hitArea:H$L.setTo(0,0,H$f.width,H$f.height),H$X=H$L.contains(H$K,H$Y)}return H$X},H$f.runEvent=function(){var H$f=this._eventList.length;if(H$f){this.mouseEventTime=H$P.now();var H$K,H$Y=0,H$X=0,H$L=0;try{for(;H$Y<H$f;){var H$H=this._eventList[H$Y];switch("mousemove"!==H$H.type&&(this._prePoint.x=this._prePoint.y=-1e6),H$H.type){case"mousedown":this._touchIDs[0]=this._id++,H$i._isTouchRespond?H$i._isTouchRespond=!1:(this._isLeftMouse=0===H$H.button,this.initEvent(H$H),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===H$H.button,this.initEvent(H$H),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-H$H.clientX)+Math.abs(this._prePoint.y-H$H.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=H$H.clientX,this._prePoint.y=H$H.clientY,this.initEvent(H$H),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":H$i._isTouchRespond=!0,this._isLeftMouse=!0;var H$E=H$H.changedTouches;for(H$X=0,H$L=H$E.length;H$X<H$L;H$X++)H$K=H$E[H$X],(H$i.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=H$K.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[H$K.identifier]=this._id++,this.initEvent(H$K,H$H),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":H$i._isTouchRespond=!0,this._isLeftMouse=!0;var H$d=H$H.changedTouches;for(H$X=0,H$L=H$d.length;H$X<H$L;H$X++)if(H$K=H$d[H$X],H$i.multiTouchEnabled||H$K.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(H$K,H$H);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var H$O=H$H.changedTouches;for(H$X=0,H$L=H$O.length;H$X<H$L;H$X++)H$K=H$O[H$X],(H$i.multiTouchEnabled||H$K.identifier==this._curTouchID)&&(this.initEvent(H$K,H$H),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(H$H);break;case"mouseout":H$h.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}H$Y++}}catch(H$f){throw this._eventList.length=0,H$f}this._eventList.length=0}},H$i.enabled=!0,H$i.multiTouchEnabled=!0,H$i._isTouchRespond=!1,H$i._isFirstTouch=!0,H$O(H$i,["instance",function(){return this.instance=new H$i}]),H$i}()),H$h=function(){function H$B(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new H$H}H$U(H$B,"laya.events.TouchManager");var H$f=H$B.prototype;return H$f._clearTempArrs=function(){H$B._oldArr.length=0,H$B._newArr.length=0,H$B._tEleArr.length=0},H$f.getTouchFromArr=function(H$f,H$K){var H$Y,H$X,H$L=0;for(H$Y=H$K.length,H$L=0;H$L<H$Y;H$L++)if((H$X=H$K[H$L]).id==H$f)return H$X;return null},H$f.removeTouchFromArr=function(H$f,H$K){var H$Y=0;for(H$Y=H$K.length-1;0<=H$Y;H$Y--)H$K[H$Y].id==H$f&&H$K.splice(H$Y,1)},H$f.createTouchO=function(H$f,H$K){var H$Y;return(H$Y=H$c.getItem("TouchData")||{}).id=H$K,H$Y.tar=H$f,H$Y},H$f.onMouseDown=function(H$f,H$K,H$Y){var H$X,H$L,H$H,H$E;(void 0===H$Y&&(H$Y=!1),this.enable)&&(H$X=this.getTouchFromArr(H$K,this.preOvers),H$H=this.getEles(H$f,null,H$B._tEleArr),H$X?H$X.tar=H$f:(H$L=this.createTouchO(H$f,H$K),this.preOvers.push(H$L)),H$P.onMobile&&this.sendEvents(H$H,"mouseover",H$K),H$E=H$Y?this.preDowns:this.preRightDowns,(H$X=this.getTouchFromArr(H$K,H$E))?H$X.tar=H$f:(H$L=this.createTouchO(H$f,H$K),H$E.push(H$L)),this.sendEvents(H$H,H$Y?"mousedown":"rightmousedown",H$K),this._clearTempArrs())},H$f.sendEvents=function(H$f,H$K,H$Y){void 0===H$Y&&(H$Y=0);var H$X,H$L,H$H,H$E=0;for(H$X=H$f.length,this._event._stoped=!1,H$L=H$f[0],H$E=0;H$E<H$X;H$E++){if((H$H=H$f[H$E]).destroyed)return;if(H$H.event(H$K,this._event.setTo(H$K,H$H,H$L)),this._event._stoped)break}},H$f.getEles=function(H$f,H$K,H$Y){for(H$Y?H$Y.length=0:H$Y=[];H$f&&H$f!=H$K;)H$Y.push(H$f),H$f=H$f.parent;return H$Y},H$f.checkMouseOutAndOverOfMove=function(H$f,H$K,H$Y){if(void 0===H$Y&&(H$Y=0),H$K!=H$f){var H$X,H$L,H$H=0,H$E=0;if(H$K.contains(H$f))H$L=this.getEles(H$f,H$K,H$B._tEleArr),this.sendEvents(H$L,"mouseover",H$Y);else if(H$f.contains(H$K))H$L=this.getEles(H$K,H$f,H$B._tEleArr),this.sendEvents(H$L,"mouseout",H$Y);else{var H$d,H$O;(H$L=H$B._tEleArr).length=0,H$d=this.getEles(H$K,null,H$B._oldArr),H$O=this.getEles(H$f,null,H$B._newArr),H$E=H$d.length;var H$i=0;for(H$H=0;H$H<H$E;H$H++){if(H$X=H$d[H$H],0<=(H$i=H$O.indexOf(H$X))){H$O.splice(H$i,H$O.length-H$i);break}H$L.push(H$X)}0<H$L.length&&this.sendEvents(H$L,"mouseout",H$Y),0<H$O.length&&this.sendEvents(H$O,"mouseover",H$Y)}}},H$f.onMouseMove=function(H$f,H$K){var H$Y,H$X;this.enable&&((H$Y=this.getTouchFromArr(H$K,this.preOvers))?(this.checkMouseOutAndOverOfMove(H$f,H$Y.tar),H$Y.tar=H$f,H$X=this.getEles(H$f,null,H$B._tEleArr)):(H$X=this.getEles(H$f,null,H$B._tEleArr),this.sendEvents(H$X,"mouseover",H$K),this.preOvers.push(this.createTouchO(H$f,H$K))),this.sendEvents(H$X,"mousemove",H$K),this._clearTempArrs())},H$f.getLastOvers=function(){return(H$B._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,H$B._tEleArr):(H$B._tEleArr.push(H$a.stage),H$B._tEleArr)},H$f.stageMouseOut=function(){var H$f;H$f=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(H$f,"mouseout",0)},H$f.onMouseUp=function(H$f,H$K,H$Y){if(void 0===H$Y&&(H$Y=!1),this.enable){var H$X,H$L,H$H,H$E,H$d,H$O,H$i=0,H$U=0,H$Z=H$P.onMobile;if(H$L=this.getEles(H$f,null,H$B._tEleArr),this.sendEvents(H$L,H$Y?"mouseup":"rightmouseup",H$K),H$O=H$Y?this.preDowns:this.preRightDowns,H$X=this.getTouchFromArr(H$K,H$O)){var H$y,H$l=H$P.now();if(H$y=H$l-this._lastClickTime<300,this._lastClickTime=H$l,H$f==H$X.tar)H$d=H$L;else for(H$H=this.getEles(H$X.tar,null,H$B._oldArr),(H$d=H$B._newArr).length=0,H$U=H$H.length,H$i=0;H$i<H$U;H$i++)H$E=H$H[H$i],0<=H$L.indexOf(H$E)&&H$d.push(H$E);0<H$d.length&&this.sendEvents(H$d,H$Y?"click":"rightclick",H$K),H$Y&&H$y&&this.sendEvents(H$d,"doubleclick",H$K),this.removeTouchFromArr(H$K,H$O),H$X.tar=null,H$c.recover("TouchData",H$X)}else;(H$X=this.getTouchFromArr(H$K,this.preOvers))&&H$Z&&((H$d=this.getEles(H$X.tar,null,H$d))&&0<H$d.length&&this.sendEvents(H$d,"mouseout",H$K),this.removeTouchFromArr(H$K,this.preOvers),H$X.tar=null,H$c.recover("TouchData",H$X)),this._clearTempArrs()}},H$B._oldArr=[],H$B._newArr=[],H$B._tEleArr=[],H$O(H$B,["I",function(){return this.I=new H$B}]),H$B}(),H$A=function(){function H$f(){this._action=null}H$U(H$f,"laya.filters.Filter");var H$K=H$f.prototype;return H$a.imps(H$K,{"laya.filters.IFilter":!0}),H$K.callNative=function(H$f){},H$B(0,H$K,"type",function(){return-1}),H$B(0,H$K,"action",function(){return this._action}),H$f.BLUR=16,H$f.COLOR=32,H$f.GLOW=8,H$f._filterStart=null,H$f._filterEnd=null,H$f._EndTarget=null,H$f._recycleScope=null,H$f._filter=null,H$f._useSrc=null,H$f._endSrc=null,H$f._useOut=null,H$f._endOut=null,H$f}(),H$S=function(){function H$f(){this.data=null}H$U(H$f,"laya.filters.ColorFilterAction");var H$K=H$f.prototype;return H$a.imps(H$K,{"laya.filters.IFilterAction":!0}),H$K.apply=function(H$f){var H$K=H$f.ctx.ctx,H$Y=H$f.ctx.ctx.canvas;if(0==H$Y.width||0==H$Y.height)return H$Y;for(var H$X,H$L=H$K.getImageData(0,0,H$Y.width,H$Y.height),H$H=H$L.data,H$E=0,H$d=H$H.length;H$E<H$d;H$E+=4)H$X=this.getColor(H$H[H$E],H$H[H$E+1],H$H[H$E+2],H$H[H$E+3]),0!=H$H[H$E+3]&&(H$H[H$E]=H$X[0],H$H[H$E+1]=H$X[1],H$H[H$E+2]=H$X[2],H$H[H$E+3]=H$X[3]);return H$K.putImageData(H$L,0,0),H$f},H$K.getColor=function(H$f,H$K,H$Y,H$X){var H$L=[];if(this.data._mat&&this.data._alpha){var H$H=this.data._mat,H$E=this.data._alpha;H$L[0]=H$H[0]*H$f+H$H[1]*H$K+H$H[2]*H$Y+H$H[3]*H$X+H$E[0],H$L[1]=H$H[4]*H$f+H$H[5]*H$K+H$H[6]*H$Y+H$H[7]*H$X+H$E[1],H$L[2]=H$H[8]*H$f+H$H[9]*H$K+H$H[10]*H$Y+H$H[11]*H$X+H$E[2],H$L[3]=H$H[12]*H$f+H$H[13]*H$K+H$H[14]*H$Y+H$H[15]*H$X+H$E[3]}return H$L},H$f}(),H$z=(function(){function H$f(){}H$U(H$f,"laya.maths.Arith"),H$f.formatR=function(H$f){return H$f>Math.PI&&(H$f-=2*Math.PI),H$f<-Math.PI&&(H$f+=2*Math.PI),H$f},H$f.isPOT=function(H$f,H$K){return 0<H$f&&0==(H$f&H$f-1)&&0<H$K&&0==(H$K&H$K-1)},H$f.setMatToArray=function(H$f,H$K){H$f.a,H$f.b,H$f.c,H$f.d,H$f.tx,H$f.ty,H$K[0]=H$f.a,H$K[1]=H$f.b,H$K[4]=H$f.c,H$K[5]=H$f.d,H$K[12]=H$f.tx,H$K[13]=H$f.ty}}(),function(){function H$f(){this._controlPoints=[new H$I,new H$I,new H$I],this._calFun=this.getPoint2}H$U(H$f,"laya.maths.Bezier");var H$K=H$f.prototype;return H$K._switchPoint=function(H$f,H$K){var H$Y=this._controlPoints.shift();H$Y.setTo(H$f,H$K),this._controlPoints.push(H$Y)},H$K.getPoint2=function(H$f,H$K){var H$Y=this._controlPoints[0],H$X=this._controlPoints[1],H$L=this._controlPoints[2],H$H=Math.pow(1-H$f,2)*H$Y.x+2*H$f*(1-H$f)*H$X.x+Math.pow(H$f,2)*H$L.x,H$E=Math.pow(1-H$f,2)*H$Y.y+2*H$f*(1-H$f)*H$X.y+Math.pow(H$f,2)*H$L.y;H$K.push(H$H,H$E)},H$K.getPoint3=function(H$f,H$K){var H$Y=this._controlPoints[0],H$X=this._controlPoints[1],H$L=this._controlPoints[2],H$H=this._controlPoints[3],H$E=Math.pow(1-H$f,3)*H$Y.x+3*H$X.x*H$f*(1-H$f)*(1-H$f)+3*H$L.x*H$f*H$f*(1-H$f)+H$H.x*Math.pow(H$f,3),H$d=Math.pow(1-H$f,3)*H$Y.y+3*H$X.y*H$f*(1-H$f)*(1-H$f)+3*H$L.y*H$f*H$f*(1-H$f)+H$H.y*Math.pow(H$f,3);H$K.push(H$E,H$d)},H$K.insertPoints=function(H$f,H$K){var H$Y,H$X=NaN;for(H$Y=1/(H$f=0<H$f?H$f:5),H$X=0;H$X<=1;H$X+=H$Y)this._calFun(H$X,H$K)},H$K.getBezierPoints=function(H$f,H$K,H$Y){void 0===H$K&&(H$K=5),void 0===H$Y&&(H$Y=2);var H$X,H$L,H$H=0;if((H$X=H$f.length)<2*(H$Y+1))return[];switch(H$L=[],H$Y){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=H$Y;)this._controlPoints.push(new H$I);for(H$H=0;H$H<2*H$Y;H$H+=2)this._switchPoint(H$f[H$H],H$f[H$H+1]);for(H$H=2*H$Y;H$H<H$X;H$H+=2)this._switchPoint(H$f[H$H],H$f[H$H+1]),H$H/2%H$Y==0&&this.insertPoints(H$K,H$L);return H$L},H$O(H$f,["I",function(){return this.I=new H$f}]),H$f}()),H$C=function(){function H$i(){}return H$U(H$i,"laya.maths.GrahamScan"),H$i.multiply=function(H$f,H$K,H$Y){return(H$f.x-H$Y.x)*(H$K.y-H$Y.y)-(H$K.x-H$Y.x)*(H$f.y-H$Y.y)},H$i.dis=function(H$f,H$K){return(H$f.x-H$K.x)*(H$f.x-H$K.x)+(H$f.y-H$K.y)*(H$f.y-H$K.y)},H$i._getPoints=function(H$f,H$K,H$Y){for(void 0===H$K&&(H$K=!1),H$i._mPointList||(H$i._mPointList=[]);H$i._mPointList.length<H$f;)H$i._mPointList.push(new H$I);return H$Y||(H$Y=[]),H$Y.length=0,H$K?H$i.getFrom(H$Y,H$i._mPointList,H$f):H$i.getFromR(H$Y,H$i._mPointList,H$f),H$Y},H$i.getFrom=function(H$f,H$K,H$Y){var H$X=0;for(H$X=0;H$X<H$Y;H$X++)H$f.push(H$K[H$X]);return H$f},H$i.getFromR=function(H$f,H$K,H$Y){var H$X=0;for(H$X=0;H$X<H$Y;H$X++)H$f.push(H$K.pop());return H$f},H$i.pListToPointList=function(H$f,H$K){void 0===H$K&&(H$K=!1);var H$Y=0,H$X=H$f.length/2,H$L=H$i._getPoints(H$X,H$K,H$i._tempPointList);for(H$Y=0;H$Y<H$X;H$Y++)H$L[H$Y].setTo(H$f[H$Y+H$Y],H$f[H$Y+H$Y+1]);return H$L},H$i.pointListToPlist=function(H$f){var H$K,H$Y=0,H$X=H$f.length,H$L=H$i._temPList;for(H$Y=H$L.length=0;H$Y<H$X;H$Y++)H$K=H$f[H$Y],H$L.push(H$K.x,H$K.y);return H$L},H$i.scanPList=function(H$f){return H$g.copyArray(H$f,H$i.pointListToPlist(H$i.scan(H$i.pListToPointList(H$f,!0))))},H$i.scan=function(H$f){var H$K,H$Y,H$X,H$L=0,H$H=0,H$E=0,H$d=H$f.length,H$O={};for((H$Y=H$i._temArr).length=0,H$L=(H$d=H$f.length)-1;0<=H$L;H$L--)H$X=(H$K=H$f[H$L]).x+"_"+H$K.y,H$O.hasOwnProperty(H$X)||(H$O[H$X]=!0,H$Y.push(H$K));for(H$d=H$Y.length,H$g.copyArray(H$f,H$Y),H$L=1;H$L<H$d;H$L++)(H$f[H$L].y<H$f[H$E].y||H$f[H$L].y==H$f[H$E].y&&H$f[H$L].x<H$f[H$E].x)&&(H$E=H$L);for(H$K=H$f[0],H$f[0]=H$f[H$E],H$f[H$E]=H$K,H$L=1;H$L<H$d-1;H$L++){for(H$H=(H$E=H$L)+1;H$H<H$d;H$H++)(0<H$i.multiply(H$f[H$H],H$f[H$E],H$f[0])||0==H$i.multiply(H$f[H$H],H$f[H$E],H$f[0])&&H$i.dis(H$f[0],H$f[H$H])<H$i.dis(H$f[0],H$f[H$E]))&&(H$E=H$H);H$K=H$f[H$L],H$f[H$L]=H$f[H$E],H$f[H$E]=H$K}if((H$Y=H$i._temArr).length=0,H$f.length<3)return H$g.copyArray(H$Y,H$f);for(H$Y.push(H$f[0],H$f[1],H$f[2]),H$L=3;H$L<H$d;H$L++){for(;2<=H$Y.length&&0<=H$i.multiply(H$f[H$L],H$Y[H$Y.length-1],H$Y[H$Y.length-2]);)H$Y.pop();H$f[H$L]&&H$Y.push(H$f[H$L])}return H$Y},H$i._mPointList=null,H$i._tempPointList=[],H$i._temPList=[],H$i._temArr=[],H$i}(),H$s=function(){function H$L(){}return H$U(H$L,"laya.maths.MathUtil"),H$L.subtractVector3=function(H$f,H$K,H$Y){H$Y[0]=H$f[0]-H$K[0],H$Y[1]=H$f[1]-H$K[1],H$Y[2]=H$f[2]-H$K[2]},H$L.lerp=function(H$f,H$K,H$Y){return H$f*(1-H$Y)+H$K*H$Y},H$L.scaleVector3=function(H$f,H$K,H$Y){H$Y[0]=H$f[0]*H$K,H$Y[1]=H$f[1]*H$K,H$Y[2]=H$f[2]*H$K},H$L.lerpVector3=function(H$f,H$K,H$Y,H$X){var H$L=H$f[0],H$H=H$f[1],H$E=H$f[2];H$X[0]=H$L+H$Y*(H$K[0]-H$L),H$X[1]=H$H+H$Y*(H$K[1]-H$H),H$X[2]=H$E+H$Y*(H$K[2]-H$E)},H$L.lerpVector4=function(H$f,H$K,H$Y,H$X){var H$L=H$f[0],H$H=H$f[1],H$E=H$f[2],H$d=H$f[3];H$X[0]=H$L+H$Y*(H$K[0]-H$L),H$X[1]=H$H+H$Y*(H$K[1]-H$H),H$X[2]=H$E+H$Y*(H$K[2]-H$E),H$X[3]=H$d+H$Y*(H$K[3]-H$d)},H$L.slerpQuaternionArray=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){var H$d,H$O,H$i,H$U,H$Z,H$y=H$f[H$K+0],H$l=H$f[H$K+1],H$B=H$f[H$K+2],H$$=H$f[H$K+3],H$h=H$Y[H$X+0],H$A=H$Y[H$X+1],H$x=H$Y[H$X+2],H$S=H$Y[H$X+3];return(H$O=H$y*H$h+H$l*H$A+H$B*H$x+H$$*H$S)<0&&(H$O=-H$O,H$h=-H$h,H$A=-H$A,H$x=-H$x,H$S=-H$S),H$Z=1e-6<1-H$O?(H$d=Math.acos(H$O),H$i=Math.sin(H$d),H$U=Math.sin((1-H$L)*H$d)/H$i,Math.sin(H$L*H$d)/H$i):(H$U=1-H$L,H$L),H$H[H$E+0]=H$U*H$y+H$Z*H$h,H$H[H$E+1]=H$U*H$l+H$Z*H$A,H$H[H$E+2]=H$U*H$B+H$Z*H$x,H$H[H$E+3]=H$U*H$$+H$Z*H$S,H$H},H$L.getRotation=function(H$f,H$K,H$Y,H$X){return Math.atan2(H$X-H$K,H$Y-H$f)/Math.PI*180},H$L.sortBigFirst=function(H$f,H$K){return H$f==H$K?0:H$f<H$K?1:-1},H$L.sortSmallFirst=function(H$f,H$K){return H$f==H$K?0:H$f<H$K?-1:1},H$L.sortNumBigFirst=function(H$f,H$K){return parseFloat(H$K)-parseFloat(H$f)},H$L.sortNumSmallFirst=function(H$f,H$K){return parseFloat(H$f)-parseFloat(H$K)},H$L.sortByKey=function(H$Y,H$f,H$K){var H$X;return void 0===H$f&&(H$f=!1),void 0===H$K&&(H$K=!0),H$X=H$f?H$K?H$L.sortNumBigFirst:H$L.sortBigFirst:H$K?H$L.sortNumSmallFirst:H$L.sortSmallFirst,function(H$f,H$K){return H$X(H$f[H$Y],H$K[H$Y])}},H$L}(),H$V=function(){function H$Y(H$f,H$K,H$Y,H$X,H$L,H$H){this.inPool=!1,this.bTransform=!1,void 0===H$f&&(H$f=1),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=1),void 0===H$L&&(H$L=0),void 0===H$H&&(H$H=0),this.a=H$f,this.b=H$K,this.c=H$Y,this.d=H$X,this.tx=H$L,this.ty=H$H,this._checkTransform()}H$U(H$Y,"laya.maths.Matrix");var H$f=H$Y.prototype;return H$f.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},H$f._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},H$f.setTranslate=function(H$f,H$K){return this.tx=H$f,this.ty=H$K,this},H$f.translate=function(H$f,H$K){return this.tx+=H$f,this.ty+=H$K,this},H$f.scale=function(H$f,H$K){this.a*=H$f,this.d*=H$K,this.c*=H$f,this.b*=H$K,this.tx*=H$f,this.ty*=H$K,this.bTransform=!0},H$f.rotate=function(H$f){var H$K=Math.cos(H$f),H$Y=Math.sin(H$f),H$X=this.a,H$L=this.c,H$H=this.tx;this.a=H$X*H$K-this.b*H$Y,this.b=H$X*H$Y+this.b*H$K,this.c=H$L*H$K-this.d*H$Y,this.d=H$L*H$Y+this.d*H$K,this.tx=H$H*H$K-this.ty*H$Y,this.ty=H$H*H$Y+this.ty*H$K,this.bTransform=!0},H$f.skew=function(H$f,H$K){var H$Y=Math.tan(H$f),H$X=Math.tan(H$K),H$L=this.a,H$H=this.b;return this.a+=H$X*this.c,this.b+=H$X*this.d,this.c+=H$Y*H$L,this.d+=H$Y*H$H,this},H$f.invertTransformPoint=function(H$f){var H$K=this.a,H$Y=this.b,H$X=this.c,H$L=this.d,H$H=this.tx,H$E=H$K*H$L-H$Y*H$X,H$d=H$L/H$E,H$O=-H$Y/H$E,H$i=-H$X/H$E,H$U=H$K/H$E,H$Z=(H$X*this.ty-H$L*H$H)/H$E,H$y=-(H$K*this.ty-H$Y*H$H)/H$E;return H$f.setTo(H$d*H$f.x+H$i*H$f.y+H$Z,H$O*H$f.x+H$U*H$f.y+H$y)},H$f.transformPoint=function(H$f){return H$f.setTo(this.a*H$f.x+this.c*H$f.y+this.tx,this.b*H$f.x+this.d*H$f.y+this.ty)},H$f.transformPointN=function(H$f){return H$f.setTo(this.a*H$f.x+this.c*H$f.y,this.b*H$f.x+this.d*H$f.y)},H$f.transformPointArray=function(H$f,H$K){for(var H$Y=H$f.length,H$X=0;H$X<H$Y;H$X+=2){var H$L=H$f[H$X],H$H=H$f[H$X+1];H$K[H$X]=this.a*H$L+this.c*H$H+this.tx,H$K[H$X+1]=this.b*H$L+this.d*H$H+this.ty}return H$K},H$f.transformPointArrayScale=function(H$f,H$K){for(var H$Y=H$f.length,H$X=0;H$X<H$Y;H$X+=2){var H$L=H$f[H$X],H$H=H$f[H$X+1];H$K[H$X]=this.a*H$L+this.c*H$H,H$K[H$X+1]=this.b*H$L+this.d*H$H}return H$K},H$f.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},H$f.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},H$f.invert=function(){var H$f=this.a,H$K=this.b,H$Y=this.c,H$X=this.d,H$L=this.tx,H$H=H$f*H$X-H$K*H$Y;return this.a=H$X/H$H,this.b=-H$K/H$H,this.c=-H$Y/H$H,this.d=H$f/H$H,this.tx=(H$Y*this.ty-H$X*H$L)/H$H,this.ty=-(H$f*this.ty-H$K*H$L)/H$H,this},H$f.setTo=function(H$f,H$K,H$Y,H$X,H$L,H$H){return this.a=H$f,this.b=H$K,this.c=H$Y,this.d=H$X,this.tx=H$L,this.ty=H$H,this},H$f.concat=function(H$f){var H$K=this.a,H$Y=this.c,H$X=this.tx;return this.a=H$K*H$f.a+this.b*H$f.c,this.b=H$K*H$f.b+this.b*H$f.d,this.c=H$Y*H$f.a+this.d*H$f.c,this.d=H$Y*H$f.b+this.d*H$f.d,this.tx=H$X*H$f.a+this.ty*H$f.c+H$f.tx,this.ty=H$X*H$f.b+this.ty*H$f.d+H$f.ty,this},H$f.scaleEx=function(H$f,H$K){var H$Y=this.a,H$X=this.b,H$L=this.c,H$H=this.d;0!==H$X||0!==H$L?(this.a=H$f*H$Y,this.b=H$f*H$X,this.c=H$K*H$L):(this.a=H$f*H$Y,this.b=0*H$H,this.c=0*H$Y),this.d=H$K*H$H,this.bTransform=!0},H$f.rotateEx=function(H$f){var H$K=Math.cos(H$f),H$Y=Math.sin(H$f),H$X=this.a,H$L=this.b,H$H=this.c,H$E=this.d;0!==H$L||0!==H$H?(this.a=H$K*H$X+H$Y*H$H,this.b=H$K*H$L+H$Y*H$E,this.c=-H$Y*H$X+H$K*H$H,this.d=-H$Y*H$L+H$K*H$E):(this.a=H$K*H$X,this.b=H$Y*H$E,this.c=-H$Y*H$X,this.d=H$K*H$E),this.bTransform=!0},H$f.clone=function(){var H$f=H$Y.create();return H$f.a=this.a,H$f.b=this.b,H$f.c=this.c,H$f.d=this.d,H$f.tx=this.tx,H$f.ty=this.ty,H$f.bTransform=this.bTransform,H$f},H$f.copyTo=function(H$f){return H$f.a=this.a,H$f.b=this.b,H$f.c=this.c,H$f.d=this.d,H$f.tx=this.tx,H$f.ty=this.ty,H$f.bTransform=this.bTransform,H$f},H$f.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},H$f.destroy=function(){if(!this.inPool){var H$f=H$Y._cache;this.inPool=!0,H$f._length||(H$f._length=0),(H$f[H$f._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},H$Y.mul=function(H$f,H$K,H$Y){var H$X=H$f.a,H$L=H$f.b,H$H=H$f.c,H$E=H$f.d,H$d=H$f.tx,H$O=H$f.ty,H$i=H$K.a,H$U=H$K.b,H$Z=H$K.c,H$y=H$K.d,H$l=H$K.tx,H$B=H$K.ty;return 0!==H$U||0!==H$Z?(H$Y.a=H$X*H$i+H$L*H$Z,H$Y.b=H$X*H$U+H$L*H$y,H$Y.c=H$H*H$i+H$E*H$Z,H$Y.d=H$H*H$U+H$E*H$y,H$Y.tx=H$i*H$d+H$Z*H$O+H$l,H$Y.ty=H$U*H$d+H$y*H$O+H$B):(H$Y.a=H$X*H$i,H$Y.b=H$L*H$y,H$Y.c=H$H*H$i,H$Y.d=H$E*H$y,H$Y.tx=H$i*H$d+H$l,H$Y.ty=H$y*H$O+H$B),H$Y},H$Y.mul16=function(H$f,H$K,H$Y){var H$X=H$f.a,H$L=H$f.b,H$H=H$f.c,H$E=H$f.d,H$d=H$f.tx,H$O=H$f.ty,H$i=H$K.a,H$U=H$K.b,H$Z=H$K.c,H$y=H$K.d,H$l=H$K.tx,H$B=H$K.ty;return 0!==H$U||0!==H$Z?(H$Y[0]=H$X*H$i+H$L*H$Z,H$Y[1]=H$X*H$U+H$L*H$y,H$Y[4]=H$H*H$i+H$E*H$Z,H$Y[5]=H$H*H$U+H$E*H$y,H$Y[12]=H$i*H$d+H$Z*H$O+H$l,H$Y[13]=H$U*H$d+H$y*H$O+H$B):(H$Y[0]=H$X*H$i,H$Y[1]=H$L*H$y,H$Y[4]=H$H*H$i,H$Y[5]=H$E*H$y,H$Y[12]=H$i*H$d+H$l,H$Y[13]=H$y*H$O+H$B),H$Y},H$Y.mulPre=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){var H$O=H$f.a,H$i=H$f.b,H$U=H$f.c,H$Z=H$f.d,H$y=H$f.tx,H$l=H$f.ty;return 0!==H$Y||0!==H$X?(H$d.a=H$O*H$K+H$i*H$X,H$d.b=H$O*H$Y+H$i*H$L,H$d.c=H$U*H$K+H$Z*H$X,H$d.d=H$U*H$Y+H$Z*H$L,H$d.tx=H$K*H$y+H$X*H$l+H$H,H$d.ty=H$Y*H$y+H$L*H$l+H$E):(H$d.a=H$O*H$K,H$d.b=H$i*H$L,H$d.c=H$U*H$K,H$d.d=H$Z*H$L,H$d.tx=H$K*H$y+H$H,H$d.ty=H$L*H$l+H$E),H$d},H$Y.mulPos=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){var H$O=H$f.a,H$i=H$f.b,H$U=H$f.c,H$Z=H$f.d,H$y=H$f.tx,H$l=H$f.ty;return 0!==H$i||0!==H$U?(H$d.a=H$K*H$O+H$Y*H$U,H$d.b=H$K*H$i+H$Y*H$Z,H$d.c=H$X*H$O+H$L*H$U,H$d.d=H$X*H$i+H$L*H$Z,H$d.tx=H$O*H$H+H$U*H$E+H$y,H$d.ty=H$i*H$H+H$Z*H$E+H$l):(H$d.a=H$K*H$O,H$d.b=H$Y*H$Z,H$d.c=H$X*H$O,H$d.d=H$L*H$Z,H$d.tx=H$O*H$H+H$y,H$d.ty=H$Z*H$E+H$l),H$d},H$Y.preMul=function(H$f,H$K,H$Y){var H$X=H$f.a,H$L=H$f.b,H$H=H$f.c,H$E=H$f.d,H$d=H$K.a,H$O=H$K.b,H$i=H$K.c,H$U=H$K.d,H$Z=H$K.tx,H$y=H$K.ty;return H$Y.a=H$d*H$X,H$Y.b=H$Y.c=0,H$Y.d=H$U*H$E,H$Y.tx=H$Z*H$X+H$f.tx,H$Y.ty=H$y*H$E+H$f.ty,0===H$O&&0===H$i&&0===H$L&&0===H$H||(H$Y.a+=H$O*H$H,H$Y.d+=H$i*H$L,H$Y.b+=H$d*H$L+H$O*H$E,H$Y.c+=H$i*H$X+H$U*H$H,H$Y.tx+=H$y*H$H,H$Y.ty+=H$Z*H$L),H$Y},H$Y.preMulXY=function(H$f,H$K,H$Y,H$X){var H$L=H$f.a,H$H=H$f.b,H$E=H$f.c,H$d=H$f.d;return H$X.a=H$L,H$X.b=H$H,H$X.c=H$E,H$X.d=H$d,H$X.tx=H$K*H$L+H$f.tx+H$Y*H$E,H$X.ty=H$Y*H$d+H$f.ty+H$K*H$H,H$X},H$Y.create=function(){var H$f=H$Y._cache,H$K=H$f._length?H$f[--H$f._length]:new H$Y;return H$K.inPool=!1,H$K},H$Y.EMPTY=new H$Y,H$Y.TEMP=new H$Y,H$Y._cache=[],H$Y}(),H$I=function(){function H$f(H$f,H$K){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),this.x=H$f,this.y=H$K}H$U(H$f,"laya.maths.Point");var H$K=H$f.prototype;return H$K.setTo=function(H$f,H$K){return this.x=H$f,this.y=H$K,this},H$K.distance=function(H$f,H$K){return Math.sqrt((this.x-H$f)*(this.x-H$f)+(this.y-H$K)*(this.y-H$K))},H$K.toString=function(){return this.x+","+this.y},H$K.normalize=function(){var H$f=Math.sqrt(this.x*this.x+this.y*this.y);if(0<H$f){var H$K=1/H$f;this.x*=H$K,this.y*=H$K}},H$f.TEMP=new H$f,H$f.EMPTY=new H$f,H$f}(),H$n=function(){function H$i(H$f,H$K,H$Y,H$X){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=0),this.x=H$f,this.y=H$K,this.width=H$Y,this.height=H$X}H$U(H$i,"laya.maths.Rectangle");var H$f=H$i.prototype;return H$f.setTo=function(H$f,H$K,H$Y,H$X){return this.x=H$f,this.y=H$K,this.width=H$Y,this.height=H$X,this},H$f.copyFrom=function(H$f){return this.x=H$f.x,this.y=H$f.y,this.width=H$f.width,this.height=H$f.height,this},H$f.contains=function(H$f,H$K){return!(this.width<=0||this.height<=0)&&(H$f>=this.x&&H$f<this.right&&H$K>=this.y&&H$K<this.bottom)},H$f.intersects=function(H$f){return!(H$f.x>this.x+this.width||H$f.x+H$f.width<this.x||H$f.y>this.y+this.height||H$f.y+H$f.height<this.y)},H$f.intersection=function(H$f,H$K){return this.intersects(H$f)?(H$K||(H$K=new H$i),H$K.x=Math.max(this.x,H$f.x),H$K.y=Math.max(this.y,H$f.y),H$K.width=Math.min(this.right,H$f.right)-H$K.x,H$K.height=Math.min(this.bottom,H$f.bottom)-H$K.y,H$K):null},H$f.union=function(H$f,H$K){return H$K||(H$K=new H$i),this.clone(H$K),H$f.width<=0||H$f.height<=0?H$K:(H$K.addPoint(H$f.x,H$f.y),H$K.addPoint(H$f.right,H$f.bottom),this)},H$f.clone=function(H$f){return H$f||(H$f=new H$i),H$f.x=this.x,H$f.y=this.y,H$f.width=this.width,H$f.height=this.height,H$f},H$f.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},H$f.equals=function(H$f){return!(!H$f||H$f.x!==this.x||H$f.y!==this.y||H$f.width!==this.width||H$f.height!==this.height)},H$f.addPoint=function(H$f,H$K){return this.x>H$f&&(this.width+=this.x-H$f,this.x=H$f),this.y>H$K&&(this.height+=this.y-H$K,this.y=H$K),this.width<H$f-this.x&&(this.width=H$f-this.x),this.height<H$K-this.y&&(this.height=H$K-this.y),this},H$f._getBoundPoints=function(){var H$f=H$i._temB;return(H$f.length=0)==this.width||0==this.height||H$f.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),H$f},H$f.isEmpty=function(){return this.width<=0||this.height<=0},H$B(0,H$f,"right",function(){return this.x+this.width}),H$B(0,H$f,"bottom",function(){return this.y+this.height}),H$i._getBoundPointS=function(H$f,H$K,H$Y,H$X){var H$L=H$i._temA;return(H$L.length=0)==H$Y||0==H$X||H$L.push(H$f,H$K,H$f+H$Y,H$K,H$f,H$K+H$X,H$f+H$Y,H$K+H$X),H$L},H$i._getWrapRec=function(H$f,H$K){if(!H$f||H$f.length<1)return H$K?H$K.setTo(0,0,0,0):H$i.TEMP.setTo(0,0,0,0);H$K=H$K||new H$i;var H$Y,H$X,H$L,H$H,H$E,H$d=H$f.length,H$O=H$I.TEMP;for(H$L=H$E=-(H$X=H$H=99999),H$Y=0;H$Y<H$d;H$Y+=2)H$O.x=H$f[H$Y],H$O.y=H$f[H$Y+1],H$X=H$X<H$O.x?H$X:H$O.x,H$H=H$H<H$O.y?H$H:H$O.y,H$L=H$L>H$O.x?H$L:H$O.x,H$E=H$E>H$O.y?H$E:H$O.y;return H$K.setTo(H$X,H$H,H$L-H$X,H$E-H$H)},H$i.EMPTY=new H$i,H$i.TEMP=new H$i,H$i._temB=[],H$i._temA=[],H$i}(),H$m=function(){function H$O(){}return H$U(H$O,"laya.media.SoundManager"),H$B(1,H$O,"useAudioMusic",function(){return H$O._useAudioMusic},function(H$f){H$O._useAudioMusic=H$f,H$O._musicClass=H$f?H$Yf:null}),H$B(1,H$O,"autoStopMusic",function(){return H$O._autoStopMusic},function(H$f){H$a.stage.off("blur",null,H$O._stageOnBlur),H$a.stage.off("focus",null,H$O._stageOnFocus),H$a.stage.off("visibilitychange",null,H$O._visibilityChange),(H$O._autoStopMusic=H$f)&&(H$a.stage.on("blur",null,H$O._stageOnBlur),H$a.stage.on("focus",null,H$O._stageOnFocus),H$a.stage.on("visibilitychange",null,H$O._visibilityChange))}),H$B(1,H$O,"muted",function(){return H$O._muted},function(H$f){H$f!=H$O._muted&&(H$f&&H$O.stopAllSound(),H$O.musicMuted=H$f,H$O._muted=H$f)}),H$B(1,H$O,"musicMuted",function(){return H$O._musicMuted},function(H$f){H$f!=H$O._musicMuted&&(H$f?(H$O._tMusic&&H$O._musicChannel&&!H$O._musicChannel.isStopped?H$O._musicChannel.pause():H$O._musicChannel=null,H$O._musicMuted=H$f):(H$O._musicMuted=H$f,H$O._tMusic&&H$O._musicChannel&&H$O._musicChannel.resume()))}),H$B(1,H$O,"soundMuted",function(){return H$O._soundMuted},function(H$f){H$O._soundMuted=H$f}),H$O.addChannel=function(H$f){0<=H$O._channels.indexOf(H$f)||(H$O._channels.push(H$f),H$O.autoReleaseSound&&0!=H$O._notUsedCount&&H$O._notUsedUrls[H$f.url]&&(delete H$O._notUsedUrls[H$f.url],0==--H$O._notUsedCount&&H$a.timer.clear(H$O,H$O.disposeSoundIfNotUsed)))},H$O.removeChannel=function(H$f){var H$K=H$O._channels,H$Y=H$K.indexOf(H$f);if(-1!=H$Y&&(H$K.splice(H$Y,1),H$O.autoReleaseSound)){var H$X=H$f.url,H$L=H$O.defaultIntervals[H$X]||2e4;if(0<H$L){var H$H=!0;for(H$Y=H$K.length-1;0<=H$Y;H$Y--)if(H$K[H$Y].url==H$X){H$H=!1;break}H$H&&(H$O._notUsedUrls[H$X]=Date.now()+H$L,0==H$O._notUsedCount++&&H$a.timer.loop(1e4,H$O,H$O.disposeSoundIfNotUsed))}}},H$O.disposeSoundIfNotUsed=function(){var H$f=H$O._notUsedUrls;if(0!=H$O._notUsedCount){var H$K=Date.now();for(var H$Y in H$f)H$K>=H$f[H$Y]&&(delete H$f[H$Y],--H$O._notUsedCount,H$O.destroySound(H$Y));if(0!=H$O._notUsedCount)return}H$a.timer.clear(H$O,H$O.disposeSoundIfNotUsed)},H$O._visibilityChange=function(){H$a.stage.isVisibility?H$O._stageOnFocus():H$O._stageOnBlur()},H$O._stageOnBlur=function(){H$O._isActive=!1,H$O._musicChannel&&(H$O._musicChannel.isStopped||(H$O._blurPaused=!0,H$O._musicChannel.pause())),H$O.stopAllSound(),H$a.stage.once("mousedown",null,H$O._stageOnFocus)},H$O._recoverWebAudio=function(){H$Hf.ctx&&"running"!=H$Hf.ctx.state&&H$Hf.ctx.resume&&H$Hf.ctx.resume()},H$O._stageOnFocus=function(){if(H$O._isActive=!0,H$O._recoverWebAudio(),H$a.stage.off("mousedown",null,H$O._stageOnFocus),H$O._blurPaused){var H$f=H$O._musicChannel;H$f&&H$O._music&&H$f.isStopped&&(H$O._blurPaused=!1,H$O._music._disposed?H$O.playMusic(H$f.url,H$f.loops,H$f.startHandler,H$f.completeHandler,H$f.startTime):H$f.audioBuffer?H$f.resume():H$O._music.play(H$f.startTime,H$f.loops,H$f.startHandler,H$f))}},H$O.playSound=function(H$f,H$K,H$Y,H$X,H$L,H$H){if(void 0===H$K&&(H$K=1),void 0===H$H&&(H$H=0),!H$f)return null;if(H$O._muted)return null;if(H$O._recoverWebAudio(),H$f==H$O._tMusic){if(H$O._musicMuted)return null}else{if(!H$O._isActive)return null;if(H$O._soundMuted)return null}var H$E,H$d=H$O._pool[H$f];return H$L||(H$L=H$O._soundClass),H$d||((H$d=new H$L).load(H$f),H$O._pool[H$f]=H$d),(H$E=H$d.play(H$H,H$K,H$Y))?(H$f==H$O._tMusic&&(H$O._music=H$d,H$O._isActive||(H$O._blurPaused=!0,H$E.pause())),H$E.url=H$f,H$E.volume=H$f==H$O._tMusic?H$O.musicVolume:H$O.soundVolume,H$E.completeHandler=H$X,H$E):null},H$O.destroySound=function(H$f){var H$K=H$O._pool[H$f];H$K&&(delete H$O._pool[H$f],H$K.dispose())},H$O.playMusic=function(H$f,H$K,H$Y,H$X,H$L){return void 0===H$K&&(H$K=0),void 0===H$L&&(H$L=0),H$O._tMusic=H$f,H$O._musicChannel&&H$O._musicChannel.stop(),H$O._musicChannel=H$O.playSound(H$f,H$K,H$Y,H$X,null,H$L)},H$O.stopSound=function(H$f){for(var H$K,H$Y=H$O._channels.length-1;0<=H$Y;H$Y--)(H$K=H$O._channels[H$Y]).url==H$f&&H$K.stop()},H$O.stopAll=function(){H$O._tMusic=null;var H$f=0;for(H$f=H$O._channels.length-1;0<=H$f;H$f--)H$O._channels[H$f].stop()},H$O.stopAllSound=function(){var H$f,H$K=0;for(H$K=H$O._channels.length-1;0<=H$K;H$K--)(H$f=H$O._channels[H$K]).url!=H$O._tMusic&&H$f.stop()},H$O.stopMusic=function(){H$O._musicChannel&&H$O._musicChannel.stop(),H$O._tMusic=null},H$O.setSoundVolume=function(H$f,H$K){if(H$K)H$O._setVolume(H$K,H$f);else{H$O.soundVolume=H$f;var H$Y,H$X=0;for(H$X=H$O._channels.length-1;0<=H$X;H$X--)(H$Y=H$O._channels[H$X]).url!=H$O._tMusic&&(H$Y.volume=H$f)}},H$O.setMusicVolume=function(H$f){H$O.musicVolume=H$f,H$O._setVolume(H$O._tMusic,H$f)},H$O._setVolume=function(H$f,H$K){for(var H$Y,H$X=H$O._channels.length-1;0<=H$X;H$X--)(H$Y=H$O._channels[H$X]).url==H$f&&(H$Y.volume=H$K)},H$O.musicVolume=1,H$O.soundVolume=1,H$O.playbackRate=1,H$O._useAudioMusic=!0,H$O._muted=!1,H$O._soundMuted=!1,H$O._musicMuted=!1,H$O._tMusic=null,H$O._musicChannel=null,H$O._music=null,H$O._channels=[],H$O._autoStopMusic=!1,H$O._blurPaused=!1,H$O._isActive=!0,H$O._soundClass=null,H$O._musicClass=null,H$O.autoReleaseSound=!0,H$O._pool={},H$O.defaultIntervals={},H$O._notUsedUrls={},H$O._notUsedCount=0,H$O}(),H$_=function(){var H$f;function H$Y(){}return H$U(H$Y,"laya.net.LocalStorage"),H$Y.__init__=function(){H$Y._baseClass||(H$Y._baseClass=H$f).init(),H$Y.items=H$Y._baseClass.items,H$Y.support=H$Y._baseClass.support},H$Y.setItem=function(H$f,H$K){H$Y._baseClass.setItem(H$f,H$K)},H$Y.getItem=function(H$f){return H$Y._baseClass.getItem(H$f)},H$Y.setJSON=function(H$f,H$K){H$Y._baseClass.setJSON(H$f,H$K)},H$Y.getJSON=function(H$f){return H$Y._baseClass.getJSON(H$f)},H$Y.removeItem=function(H$f){H$Y._baseClass.removeItem(H$f)},H$Y.clear=function(){H$Y._baseClass.clear()},H$Y._baseClass=null,H$Y.items=null,H$Y.support=!1,H$Y.__init$=function(){H$f=function(){function H$Y(){}return H$U(H$Y,""),H$Y.init=function(){try{H$Y.support=!0,H$Y.items=H$E.localStorage,H$Y.setItem("laya","1"),H$Y.removeItem("laya")}catch(H$f){H$Y.support=!1}H$Y.support||console.log("LocalStorage is not supprot or browser is private mode.")},H$Y.setItem=function(H$f,H$K){try{H$Y.support&&H$Y.items.setItem(H$f,H$K)}catch(H$f){console.warn("set localStorage failed",H$f)}},H$Y.getItem=function(H$f){return H$Y.support?H$Y.items.getItem(H$f):null},H$Y.setJSON=function(H$f,H$K){try{H$Y.support&&H$Y.items.setItem(H$f,JSON.stringify(H$K))}catch(H$f){console.warn("set localStorage failed",H$f)}},H$Y.getJSON=function(H$f){return JSON.parse(H$Y.support?H$Y.items.getItem(H$f):null)},H$Y.removeItem=function(H$f){H$Y.support&&H$Y.items.removeItem(H$f)},H$Y.clear=function(){H$Y.support&&H$Y.items.clear()},H$Y.items=null,H$Y.support=!1,H$Y}()},H$Y}(),H$t=(function(){function H$X(){}H$U(H$X,"laya.net.ResourceVersion"),H$X.enable=function(H$f,H$K,H$Y){void 0===H$Y&&(H$Y=2),laya.net.ResourceVersion.type=H$Y,H$a.loader.load(H$f,H$x.create(null,H$X.onManifestLoaded,[H$K]),null,"json"),H$T.customFormat=H$X.addVersionPrefix},H$X.onManifestLoaded=function(H$f,H$K){H$X.manifest=H$K,H$f.run(),H$K||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},H$X.addVersionPrefix=function(H$f){return H$X.manifest&&H$X.manifest[H$f]?2==H$X.type?H$X.manifest[H$f]:H$X.manifest[H$f]+"/"+H$f:H$f},H$X.FOLDER_VERSION=1,H$X.FILENAME_VERSION=2,H$X.manifest=null,H$X.type=1}(),function(){function H$f(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}H$U(H$f,"laya.net.TTFLoader");var H$K=H$f.prototype;return H$K.load=function(H$f){var H$K=(this._url=H$f).split(".ttf")[0].split("/");this.fontName=H$K[H$K.length-1],H$P.window.conch?this._loadConch():H$P.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},H$K._loadConch=function(){this._http=new H$Ef,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},H$K._onHttpLoaded=function(H$f){H$P.window.conch.setFontFaceFromBuffer(this.fontName,H$f),this._clearHttp(),this._complete()},H$K._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},H$K._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},H$K._complete=function(){H$a.timer.clear(this,this._complete),H$a.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},H$K._checkComplete=function(){H$R.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},H$K._loadWithFontFace=function(){var H$f=new H$P.window.FontFace(this.fontName,"url('"+this._url+"')");H$P.window.document.fonts.add(H$f);var H$K=this;H$f.loaded.then(function(){H$K._complete()}),H$f.load()},H$K._createDiv=function(){this._div=H$P.createElement("div"),this._div.innerHTML="laya";var H$f=this._div.style;H$f.fontFamily=this.fontName,H$f.position="absolute",H$f.left="-100px",H$f.top="-100px",H$P.document.body.appendChild(this._div)},H$K._loadWithCSS=function(){var H$f=this,H$K=H$P.createElement("style");H$K.type="text/css",H$P.document.body.appendChild(H$K),H$K.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=H$R.measureText("LayaTTFFont",this._fontTxt).width;var H$Y=this;H$K.onload=function(){H$a.timer.once(1e4,H$Y,H$f._complete)},H$a.timer.loop(20,this,this._checkComplete),this._createDiv()},H$f._testString="LayaTTFFont",H$f}()),H$T=function(){function H$X(H$f){this._url=null,this._path=null,this._url=H$X.formatURL(H$f),this._path=H$X.getPath(H$f)}H$U(H$X,"laya.net.URL");var H$f=H$X.prototype;return H$B(0,H$f,"path",function(){return this._path}),H$B(0,H$f,"url",function(){return this._url}),H$X.formatURL=function(H$f,H$K){if(!H$f)return"null path";if(0<H$f.indexOf(":"))return H$f;null!=H$X.customFormat&&(H$f=H$X.customFormat(H$f,H$K));var H$Y=H$f.charAt(0);if("."===H$Y)return H$X.formatRelativePath((H$K||H$X.basePath)+H$f);if("~"===H$Y)return H$X.rootPath+H$f.substring(1);if("d"===H$Y){if(0===H$f.indexOf("data:image"))return H$f}else if("/"===H$Y)return H$f;return(H$K||H$X.basePath)+H$f},H$X.formatRelativePath=function(H$f){for(var H$K=H$f.split("/"),H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++)".."==H$K[H$Y]&&(H$K.splice(H$Y-1,2),H$Y-=2);return H$K.join("/")},H$X.isAbsolute=function(H$f){return 0<H$f.indexOf(":")||"/"==H$f.charAt(0)},H$X.getPath=function(H$f){var H$K=H$f.lastIndexOf("/");return 0<H$K?H$f.substr(0,H$K+1):""},H$X.getFileName=function(H$f){var H$K=H$f.lastIndexOf("/");return 0<H$K?H$f.substr(H$K+1):H$f},H$X.version={},H$X.basePath="",H$X.rootPath="",H$X.customFormat=function(H$f){var H$K=H$X.version[H$f];return!H$k.isConchApp&&H$K&&(H$f+="?v="+H$K),H$f},H$X}(),H$k=function(){function H$L(H$f,H$K){this._timeId=0;var H$Y=H$L._mainCanvas.source.style;H$Y.position="absolute",H$Y.top=H$Y.left="0px",H$Y.background="#000000",H$L._mainCanvas.source.id="layaCanvas";var H$X=laya.renders.Render.isWebGL;H$L._mainCanvas.source.width=H$f,H$L._mainCanvas.source.height=H$K,H$X&&H$L.WebGL.init(H$L._mainCanvas,H$f,H$K),H$P.container.appendChild(H$L._mainCanvas.source),(H$L._context=new H$e(H$f,H$K,H$X?null:H$L._mainCanvas)).ctx.setIsMainContext(),H$P.window.requestAnimationFrame(function H$f(H$K){H$P.window.requestAnimationFrame(H$f);H$a.stage._loop()}),H$a.stage.on("visibilitychange",this,this._onVisibilitychange)}H$U(H$L,"laya.renders.Render");var H$f=H$L.prototype;return H$f._onVisibilitychange=function(){H$a.stage.isVisibility?0!=this._timeId&&H$P.window.clearInterval(this._timeId):this._timeId=H$P.window.setInterval(this._enterFrame,1e3)},H$f._enterFrame=function(H$f){H$a.stage._loop()},H$B(1,H$L,"context",function(){return H$L._context}),H$B(1,H$L,"canvas",function(){return H$L._mainCanvas.source}),H$L._context=null,H$L._mainCanvas=null,H$L.WebGL=null,H$L.isConchNode=!1,H$L.isConchApp=!1,H$L.isConchWebGL=!1,H$L.isWebGL=!1,H$L.is3DMode=!1,H$L.optimizeTextureMemory=function(H$f,H$K){return!0},H$L.__init$=function(){H$E.ConchRenderType=H$E.ConchRenderType||1,H$E.ConchRenderType|=H$E.conch?4:0,H$L.isConchNode=5==(5&H$E.ConchRenderType),H$L.isConchApp=4==(4&H$E.ConchRenderType),H$L.isConchWebGL=6==H$E.ConchRenderType},H$L}(),H$e=function(){function H$E(H$f,H$K,H$Y){this.x=0,this.y=0,this._drawTexture=function(H$f,H$K,H$Y){H$Y[0].loaded&&this.ctx.drawTexture(H$Y[0],H$Y[1],H$Y[2],H$Y[3],H$Y[4],H$f,H$K)},this._fillTexture=function(H$f,H$K,H$Y){H$Y[0].loaded&&this.ctx.fillTexture(H$Y[0],H$Y[1]+H$f,H$Y[2]+H$K,H$Y[3],H$Y[4],H$Y[5],H$Y[6],H$Y[7])},this._drawTextureWithTransform=function(H$f,H$K,H$Y){H$Y[0].loaded&&this.ctx.drawTextureWithTransform(H$Y[0],H$Y[1],H$Y[2],H$Y[3],H$Y[4],H$Y[5],H$f,H$K,H$Y[6])},this._fillQuadrangle=function(H$f,H$K,H$Y){this.ctx.fillQuadrangle(H$Y[0],H$Y[1],H$Y[2],H$Y[3],H$Y[4])},this._drawRect=function(H$f,H$K,H$Y){var H$X=this.ctx;null!=H$Y[4]&&(H$X.fillStyle=H$Y[4],H$X.fillRect(H$f+H$Y[0],H$K+H$Y[1],H$Y[2],H$Y[3],null)),null!=H$Y[5]&&(H$X.strokeStyle=H$Y[5],H$X.lineWidth=H$Y[6],H$X.strokeRect(H$f+H$Y[0],H$K+H$Y[1],H$Y[2],H$Y[3],H$Y[6]))},this._drawPie=function(H$f,H$K,H$Y){var H$X=this.ctx;H$k.isWebGL&&H$X.setPathId(H$Y[8]),H$X.beginPath(),H$k.isWebGL?(H$X.movePath(H$Y[0]+H$f,H$Y[1]+H$K),H$X.moveTo(0,0)):H$X.moveTo(H$f+H$Y[0],H$K+H$Y[1]),H$X.arc(H$f+H$Y[0],H$K+H$Y[1],H$Y[2],H$Y[3],H$Y[4]),H$X.closePath(),this._fillAndStroke(H$Y[5],H$Y[6],H$Y[7],!0)},this._clipRect=function(H$f,H$K,H$Y){this.ctx.clipRect(H$f+H$Y[0],H$K+H$Y[1],H$Y[2],H$Y[3])},this._fillRect=function(H$f,H$K,H$Y){this.ctx.fillRect(H$f+H$Y[0],H$K+H$Y[1],H$Y[2],H$Y[3],H$Y[4])},this._drawCircle=function(H$f,H$K,H$Y){var H$X=this.ctx;H$k.isWebGL&&H$X.setPathId(H$Y[6]),H$p.drawCall++,H$X.beginPath(),H$k.isWebGL&&H$X.movePath(H$Y[0]+H$f,H$Y[1]+H$K),H$X.arc(H$Y[0]+H$f,H$Y[1]+H$K,H$Y[2],0,H$E.PI2),H$X.closePath(),this._fillAndStroke(H$Y[3],H$Y[4],H$Y[5],!0)},this._fillCircle=function(H$f,H$K,H$Y){H$p.drawCall++;var H$X=this.ctx;H$X.beginPath(),H$X.fillStyle=H$Y[3],H$X.arc(H$Y[0]+H$f,H$Y[1]+H$K,H$Y[2],0,H$E.PI2),H$X.fill()},this._setShader=function(H$f,H$K,H$Y){this.ctx.setShader(H$Y[0])},this._drawLine=function(H$f,H$K,H$Y){var H$X=this.ctx;H$k.isWebGL&&H$X.setPathId(H$Y[6]),H$X.beginPath(),H$X.strokeStyle=H$Y[4],H$X.lineWidth=H$Y[5],H$k.isWebGL?(H$X.movePath(H$f,H$K),H$X.moveTo(H$Y[0],H$Y[1]),H$X.lineTo(H$Y[2],H$Y[3])):(H$X.moveTo(H$f+H$Y[0],H$K+H$Y[1]),H$X.lineTo(H$f+H$Y[2],H$K+H$Y[3])),H$X.stroke()},this._drawLines=function(H$f,H$K,H$Y){var H$X=this.ctx;H$k.isWebGL&&H$X.setPathId(H$Y[5]),H$X.beginPath(),H$f+=H$Y[0],H$K+=H$Y[1],H$k.isWebGL&&H$X.movePath(H$f,H$K),H$X.strokeStyle=H$Y[3],H$X.lineWidth=H$Y[4];var H$L=H$Y[2],H$H=2,H$E=H$L.length;if(H$k.isWebGL)for(H$X.moveTo(H$L[0],H$L[1]);H$H<H$E;)H$X.lineTo(H$L[H$H++],H$L[H$H++]);else for(H$X.moveTo(H$f+H$L[0],H$K+H$L[1]);H$H<H$E;)H$X.lineTo(H$f+H$L[H$H++],H$K+H$L[H$H++]);H$X.stroke()},this._drawLinesWebGL=function(H$f,H$K,H$Y){this.ctx.drawLines(H$f+this.x+H$Y[0],H$K+this.y+H$Y[1],H$Y[2],H$Y[3],H$Y[4])},this._drawCurves=function(H$f,H$K,H$Y){this.ctx.drawCurves(H$f,H$K,H$Y)},this._draw=function(H$f,H$K,H$Y){H$Y[0].call(null,this,H$f,H$K)},this._transformByMatrix=function(H$f,H$K,H$Y){this.ctx.transformByMatrix(H$Y[0])},this._setTransform=function(H$f,H$K,H$Y){this.ctx.setTransform(H$Y[0],H$Y[1],H$Y[2],H$Y[3],H$Y[4],H$Y[5])},this._setTransformByMatrix=function(H$f,H$K,H$Y){this.ctx.setTransformByMatrix(H$Y[0])},this._save=function(H$f,H$K,H$Y){this.ctx.save()},this._restore=function(H$f,H$K,H$Y){this.ctx.restore()},this._translate=function(H$f,H$K,H$Y){this.ctx.translate(H$Y[0],H$Y[1])},this._transform=function(H$f,H$K,H$Y){this.ctx.translate(H$Y[1]+H$f,H$Y[2]+H$K);var H$X=H$Y[0];this.ctx.transform(H$X.a,H$X.b,H$X.c,H$X.d,H$X.tx,H$X.ty),this.ctx.translate(-H$f-H$Y[1],-H$K-H$Y[2])},this._rotate=function(H$f,H$K,H$Y){this.ctx.translate(H$Y[1]+H$f,H$Y[2]+H$K),this.ctx.rotate(H$Y[0]),this.ctx.translate(-H$f-H$Y[1],-H$K-H$Y[2])},this._scale=function(H$f,H$K,H$Y){this.ctx.translate(H$Y[2]+H$f,H$Y[3]+H$K),this.ctx.scale(H$Y[0],H$Y[1]),this.ctx.translate(-H$f-H$Y[2],-H$K-H$Y[3])},this._alpha=function(H$f,H$K,H$Y){this.ctx.globalAlpha*=H$Y[0]},this._setAlpha=function(H$f,H$K,H$Y){this.ctx.globalAlpha=H$Y[0]},this._fillText=function(H$f,H$K,H$Y){this.ctx.fillText(H$Y[0],H$Y[1]+H$f,H$Y[2]+H$K,H$Y[3],H$Y[4],H$Y[5])},this._strokeText=function(H$f,H$K,H$Y){this.ctx.strokeText(H$Y[0],H$Y[1]+H$f,H$Y[2]+H$K,H$Y[3],H$Y[4],H$Y[5],H$Y[6])},this._fillBorderText=function(H$f,H$K,H$Y){this.ctx.fillBorderText(H$Y[0],H$Y[1]+H$f,H$Y[2]+H$K,H$Y[3],H$Y[4],H$Y[5],H$Y[6],H$Y[7])},this._blendMode=function(H$f,H$K,H$Y){this.ctx.globalCompositeOperation=H$Y[0]},this._beginClip=function(H$f,H$K,H$Y){this.ctx.beginClip&&this.ctx.beginClip(H$f+H$Y[0],H$K+H$Y[1],H$Y[2],H$Y[3])},this._setIBVB=function(H$f,H$K,H$Y){this.ctx.setIBVB(H$Y[0]+H$f,H$Y[1]+H$K,H$Y[2],H$Y[3],H$Y[4],H$Y[5],H$Y[6],H$Y[7])},this._fillTrangles=function(H$f,H$K,H$Y){this.ctx.fillTrangles(H$Y[0],H$Y[1]+H$f,H$Y[2]+H$K,H$Y[3],H$Y[4])},this._drawPath=function(H$f,H$K,H$Y){var H$X=this.ctx;H$k.isWebGL&&H$X.setPathId(-1),H$X.beginPath(),H$f+=H$Y[0],H$K+=H$Y[1],H$k.isWebGL&&H$X.movePath(H$f,H$K);for(var H$L=H$Y[2],H$H=0,H$E=H$L.length;H$H<H$E;H$H++){var H$d=H$L[H$H];switch(H$d[0]){case"moveTo":H$k.isWebGL?H$X.moveTo(H$d[1],H$d[2]):H$X.moveTo(H$f+H$d[1],H$K+H$d[2]);break;case"lineTo":H$k.isWebGL?H$X.lineTo(H$d[1],H$d[2]):H$X.lineTo(H$f+H$d[1],H$K+H$d[2]);break;case"arcTo":H$k.isWebGL?H$X.arcTo(H$d[1],H$d[2],H$d[3],H$d[4],H$d[5]):H$X.arcTo(H$f+H$d[1],H$K+H$d[2],H$f+H$d[3],H$K+H$d[4],H$d[5]);break;case"closePath":H$X.closePath()}}var H$O=H$Y[3];null!=H$O&&(H$X.fillStyle=H$O.fillStyle,H$X.fill());var H$i=H$Y[4];null!=H$i&&(H$X.strokeStyle=H$i.strokeStyle,H$X.lineWidth=H$i.lineWidth||1,H$X.lineJoin=H$i.lineJoin,H$X.lineCap=H$i.lineCap,H$X.miterLimit=H$i.miterLimit,H$X.stroke())},this.drawPoly=function(H$f,H$K,H$Y){this.ctx.drawPoly(H$f+this.x+H$Y[0],H$K+this.y+H$Y[1],H$Y[2],H$Y[3],H$Y[4],H$Y[5],H$Y[6])},this._drawPoly=function(H$f,H$K,H$Y){var H$X=this.ctx,H$L=H$Y[2],H$H=2,H$E=H$L.length;if(H$k.isWebGL)for(H$X.setPathId(H$Y[6]),H$X.beginPath(),H$f+=H$Y[0],H$K+=H$Y[1],H$X.movePath(H$f,H$K),H$X.moveTo(H$L[0],H$L[1]);H$H<H$E;)H$X.lineTo(H$L[H$H++],H$L[H$H++]);else for(H$X.beginPath(),H$f+=H$Y[0],H$K+=H$Y[1],H$X.moveTo(H$f+H$L[0],H$K+H$L[1]);H$H<H$E;)H$X.lineTo(H$f+H$L[H$H++],H$K+H$L[H$H++]);H$X.closePath(),this._fillAndStroke(H$Y[3],H$Y[4],H$Y[5],H$Y[7])},this._drawSkin=function(H$f,H$K,H$Y){var H$X=H$Y[0];if(H$X){var H$L=this.ctx;H$X.render(H$L,H$f,H$K)}},this._drawParticle=function(H$f,H$K,H$Y){this.ctx.drawParticle(H$f+this.x,H$K+this.y,H$Y[0])},this._setFilters=function(H$f,H$K,H$Y){this.ctx.setFilters(H$Y)},H$Y?this.ctx=H$Y.getContext("2d"):(H$Y=H$Sf.create("3D"),this.ctx=H$R.createWebGLContext2D(H$Y),H$Y._setContext(this.ctx)),H$Y.size(H$f,H$K),this.canvas=H$Y}H$U(H$E,"laya.renders.RenderContext");var H$f=H$E.prototype;return H$f.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},H$f.drawTexture=function(H$f,H$K,H$Y,H$X,H$L){H$f.loaded&&this.ctx.drawTexture(H$f,H$K,H$Y,H$X,H$L,this.x,this.y)},H$f._drawTextures=function(H$f,H$K,H$Y){H$Y[0].loaded&&this.ctx.drawTextures(H$Y[0],H$Y[1],H$f+this.x,H$K+this.y)},H$f.drawTextureWithTransform=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){H$f.loaded&&this.ctx.drawTextureWithTransform(H$f,H$K,H$Y,H$X,H$L,H$H,this.x,this.y,H$E)},H$f.fillQuadrangle=function(H$f,H$K,H$Y,H$X,H$L){this.ctx.fillQuadrangle(H$f,H$K,H$Y,H$X,H$L)},H$f.drawCanvas=function(H$f,H$K,H$Y,H$X,H$L){this.ctx.drawCanvas(H$f,H$K+this.x,H$Y+this.y,H$X,H$L)},H$f.drawRect=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$H&&(H$H=1);var H$E=this.ctx;H$E.strokeStyle=H$L,H$E.lineWidth=H$H,H$E.strokeRect(H$f+this.x,H$K+this.y,H$Y,H$X,H$H)},H$f._fillAndStroke=function(H$f,H$K,H$Y,H$X){void 0===H$X&&(H$X=!1);var H$L=this.ctx;null!=H$f&&(H$L.fillStyle=H$f,H$k.isWebGL?H$L.fill(H$X):H$L.fill()),null!=H$K&&0<H$Y&&(H$L.strokeStyle=H$K,H$L.lineWidth=H$Y,H$L.stroke())},H$f.clipRect=function(H$f,H$K,H$Y,H$X){this.ctx.clipRect(H$f+this.x,H$K+this.y,H$Y,H$X)},H$f.fillRect=function(H$f,H$K,H$Y,H$X,H$L){this.ctx.fillRect(H$f+this.x,H$K+this.y,H$Y,H$X,H$L)},H$f.drawCircle=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$L&&(H$L=1),H$p.drawCall++;var H$H=this.ctx;H$H.beginPath(),H$H.strokeStyle=H$X,H$H.lineWidth=H$L,H$H.arc(H$f+this.x,H$K+this.y,H$Y,0,H$E.PI2),H$H.stroke()},H$f.drawTriangles=function(H$f,H$K,H$Y){if(H$k.isWebGL)this.ctx.drawTriangles(H$Y[0],H$f+H$Y[1],H$K+H$Y[2],H$Y[3],H$Y[4],H$Y[5],H$Y[6],H$Y[7],H$Y[8],H$Y[9]);else{var H$X=H$Y[5],H$L=0,H$H=H$X.length,H$E=this.ctx;for(H$L=0;H$L<H$H;H$L+=3){var H$d=2*H$X[H$L],H$O=2*H$X[H$L+1],H$i=2*H$X[H$L+2];H$E.drawTriangle(H$Y[0],H$Y[3],H$Y[4],H$d,H$O,H$i,H$Y[6],!0)}}},H$f.fillCircle=function(H$f,H$K,H$Y,H$X){H$p.drawCall++;var H$L=this.ctx;H$L.beginPath(),H$L.fillStyle=H$X,H$L.arc(H$f+this.x,H$K+this.y,H$Y,0,H$E.PI2),H$L.fill()},H$f.setShader=function(H$f){this.ctx.setShader(H$f)},H$f.drawLine=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$H&&(H$H=1);var H$E=this.ctx;H$E.beginPath(),H$E.strokeStyle=H$L,H$E.lineWidth=H$H,H$E.moveTo(this.x+H$f,this.y+H$K),H$E.lineTo(this.x+H$Y,this.y+H$X),H$E.stroke()},H$f.clear=function(){this.ctx.clear()},H$f.transformByMatrix=function(H$f){this.ctx.transformByMatrix(H$f)},H$f.setTransform=function(H$f,H$K,H$Y,H$X,H$L,H$H){this.ctx.setTransform(H$f,H$K,H$Y,H$X,H$L,H$H)},H$f.setTransformByMatrix=function(H$f){this.ctx.setTransformByMatrix(H$f)},H$f.save=function(){this.ctx.save()},H$f.restore=function(){this.ctx.restore()},H$f.translate=function(H$f,H$K){this.ctx.translate(H$f,H$K)},H$f.transform=function(H$f,H$K,H$Y,H$X,H$L,H$H){this.ctx.transform(H$f,H$K,H$Y,H$X,H$L,H$H)},H$f.rotate=function(H$f){this.ctx.rotate(H$f)},H$f.scale=function(H$f,H$K){this.ctx.scale(H$f,H$K)},H$f.alpha=function(H$f){this.ctx.globalAlpha*=H$f},H$f.setAlpha=function(H$f){this.ctx.globalAlpha=H$f},H$f.fillWords=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$H&&(H$H=0),this.ctx.fillWords(H$f,H$K,H$Y,H$X,H$L,H$H)},H$f.fillBorderWords=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this.ctx.fillBorderWords(H$f,H$K,H$Y,H$X,H$L,H$H,H$E)},H$f.fillText=function(H$f,H$K,H$Y,H$X,H$L,H$H){this.ctx.fillText(H$f,H$K+this.x,H$Y+this.y,H$X,H$L,H$H)},H$f.strokeText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this.ctx.strokeText(H$f,H$K+this.x,H$Y+this.y,H$X,H$L,H$H,H$E)},H$f.blendMode=function(H$f){this.ctx.globalCompositeOperation=H$f},H$f.flush=function(){this.ctx.flush&&this.ctx.flush()},H$f.addRenderObject=function(H$f){this.ctx.addRenderObject(H$f)},H$f.beginClip=function(H$f,H$K,H$Y,H$X){this.ctx.beginClip&&this.ctx.beginClip(H$f,H$K,H$Y,H$X)},H$f.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},H$f.fillTrangles=function(H$f,H$K,H$Y){this.ctx.fillTrangles(H$Y[0],H$Y[1],H$Y[2],H$Y[3],4<H$Y.length?H$Y[4]:null)},H$E.PI2=2*Math.PI,H$E}(),H$Q=function(){function H$E(H$f,H$K){switch(this._next=H$K||H$E.NORENDER,H$f){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=H$A._filter);case 69905:return void(this._fun=H$E._initRenderFun)}this.onCreate(H$f)}H$U(H$E,"laya.renders.RenderSprite");var H$f=H$E.prototype;return H$f.onCreate=function(H$f){},H$f._style=function(H$f,H$K,H$Y,H$X){H$f._style.render(H$f,H$K,H$Y,H$X);var H$L=this._next;H$L._fun.call(H$L,H$f,H$K,H$Y,H$X)},H$f._no=function(H$f,H$K,H$Y,H$X){},H$f._custom=function(H$f,H$K,H$Y,H$X){H$f.customRender(H$K,H$Y,H$X);var H$L=H$f._style._tf;this._next._fun.call(this._next,H$f,H$K,H$Y-H$L.translateX,H$X-H$L.translateY)},H$f._clip=function(H$f,H$K,H$Y,H$X){var H$L=this._next;if(H$L!=H$E.NORENDER){var H$H=H$f._style.scrollRect;H$K.ctx.save(),H$K.ctx.clipRect(H$Y,H$X,H$H.width,H$H.height),H$L._fun.call(H$L,H$f,H$K,H$Y-H$H.x,H$X-H$H.y),H$K.ctx.restore()}},H$f._blend=function(H$f,H$K,H$Y,H$X){var H$L=H$f._style;H$L.blendMode&&(H$K.ctx.globalCompositeOperation=H$L.blendMode);var H$H=this._next;H$H._fun.call(H$H,H$f,H$K,H$Y,H$X),H$K.ctx.globalCompositeOperation="source-over"},H$f._mask=function(H$f,H$K,H$Y,H$X){var H$L=this._next;H$L._fun.call(H$L,H$f,H$K,H$Y,H$X);var H$H=H$f.mask;H$H&&(H$K.ctx.globalCompositeOperation="destination-in",(0<H$H.numChildren||!H$H.graphics._isOnlyOne())&&(H$H.cacheAsBitmap=!0),H$H.render(H$K,H$Y-H$f.pivotX,H$X-H$f.pivotY)),H$K.ctx.globalCompositeOperation="source-over"},H$f._graphics=function(H$f,H$K,H$Y,H$X){var H$L=H$f._style._tf;H$f._graphics&&H$f._graphics._render(H$f,H$K,H$Y-H$L.translateX,H$X-H$L.translateY);var H$H=this._next;H$H._fun.call(H$H,H$f,H$K,H$Y,H$X)},H$f._image=function(H$f,H$K,H$Y,H$X){var H$L=H$f._style;H$K.ctx.drawTexture2(H$Y,H$X,H$L._tf.translateX,H$L._tf.translateY,H$f.transform,H$L.alpha,H$L.blendMode,H$f._graphics._one)},H$f._image2=function(H$f,H$K,H$Y,H$X){var H$L=H$f._style._tf;H$K.ctx.drawTexture2(H$Y,H$X,H$L.translateX,H$L.translateY,H$f.transform,1,null,H$f._graphics._one)},H$f._alpha=function(H$f,H$K,H$Y,H$X){var H$L;if(.01<(H$L=H$f._style.alpha)||H$f._needRepaint()){var H$H=H$K.ctx.globalAlpha;H$K.ctx.globalAlpha*=H$L;var H$E=this._next;H$E._fun.call(H$E,H$f,H$K,H$Y,H$X),H$K.ctx.globalAlpha=H$H}},H$f._transform=function(H$f,H$K,H$Y,H$X){var H$L=H$f.transform,H$H=this._next;H$L&&H$H!=H$E.NORENDER?(H$K.save(),H$K.transform(H$L.a,H$L.b,H$L.c,H$L.d,H$L.tx+H$Y,H$L.ty+H$X),H$H._fun.call(H$H,H$f,H$K,0,0),H$K.restore()):H$H._fun.call(H$H,H$f,H$K,H$Y,H$X)},H$f._childs=function(H$f,H$K,H$Y,H$X){var H$L=H$f._style,H$H=H$L._tf;if(H$Y=H$Y-H$H.translateX+H$L.paddingLeft,H$X=H$X-H$H.translateY+H$L.paddingTop,H$L._calculation){var H$E=H$f._getWords();if(H$E){var H$d=H$L;H$d&&(H$d.stroke?H$K.fillBorderWords(H$E,H$Y,H$X,H$d.font,H$d.color,H$d.strokeColor,H$d.stroke):H$K.fillWords(H$E,H$Y,H$X,H$d.font,H$d.color,"none"!=H$d.textDecoration&&H$d.underLine?1:0))}}var H$O,H$i=H$f._childs,H$U=H$i.length;if(H$f.viewport||H$f.optimizeScrollRect&&H$f._style.scrollRect){var H$Z=H$f.viewport||H$f._style.scrollRect,H$y=H$Z.x,H$l=H$Z.y,H$B=H$Z.right,H$$=H$Z.bottom,H$h=NaN,H$A=NaN;for(H$x=0;H$x<H$U;++H$x)(H$O=H$i[H$x]).visible&&(H$h=H$O._x)<H$B&&H$h+H$O.width>H$y&&(H$A=H$O._y)<H$$&&H$A+H$O.height>H$l&&H$O.render(H$K,H$Y,H$X)}else for(var H$x=0;H$x<H$U;++H$x)(H$O=H$i[H$x])._style.visible&&H$O.render(H$K,H$Y,H$X)},H$f._canvas=function(H$f,H$K,H$Y,H$X){var H$L=H$f._$P.cacheCanvas;if(H$L){"bitmap"===H$L.type?H$p.canvasBitmap++:H$p.canvasNormal++;var H$H=H$L.ctx;if(H$f._needRepaint()||!H$H)this._canvas_repaint(H$f,H$K,H$Y,H$X);else{var H$E=H$L._cacheRec;H$K.drawCanvas(H$H.canvas,H$Y+H$E.x,H$X+H$E.y,H$E.width,H$E.height)}}else this._next._fun.call(this._next,H$f,H$K,H$Y,H$X)},H$f._canvas_repaint=function(H$f,H$K,H$Y,H$X){var H$L=H$f._$P.cacheCanvas,H$H=this._next;if(H$L){var H$E,H$d,H$O,H$i,H$U=H$L.ctx,H$Z=H$f._needRepaint()||!H$U,H$y=H$L.type;if("bitmap"===H$y?H$p.canvasBitmap++:H$p.canvasNormal++,H$Z){var H$l,H$B;H$L._cacheRec||(H$L._cacheRec=new H$n),H$k.isWebGL&&"bitmap"!==H$y?H$L._cacheRec.setTo(-H$f.pivotX,-H$f.pivotY,1,1):((H$i=H$f.getSelfBounds()).x=H$i.x-H$f.pivotX,H$i.y=H$i.y-H$f.pivotY,H$i.x=H$i.x-16,H$i.y=H$i.y-16,H$i.width=H$i.width+32,H$i.height=H$i.height+32,H$i.x=Math.floor(H$i.x+H$Y)-H$Y,H$i.y=Math.floor(H$i.y+H$X)-H$X,H$i.width=Math.floor(H$i.width),H$i.height=Math.floor(H$i.height),H$L._cacheRec.copyFrom(H$i)),H$i=H$L._cacheRec;var H$$,H$h=H$k.isWebGL?1:H$P.pixelRatio*H$a.stage.clientScaleX,H$A=H$k.isWebGL?1:H$P.pixelRatio*H$a.stage.clientScaleY;if(!H$k.isWebGL){var H$x,H$S=1,H$z=1;for(H$x=H$f;H$x&&H$x!=H$a.stage;)H$S*=H$x.scaleX,H$z*=H$x.scaleY,H$x=H$x.parent;H$k.isWebGL?(H$S<1&&(H$h*=H$S),H$z<1&&(H$A*=H$z)):(1<H$S&&(H$h*=H$S),1<H$z&&(H$A*=H$z))}if(H$f.scrollRect){var H$C=H$f.scrollRect;H$i.x-=H$C.x,H$i.y-=H$C.y}if(H$l=H$i.width*H$h,H$B=H$i.height*H$A,H$d=H$i.x,H$O=H$i.y,H$k.isWebGL&&"bitmap"===H$y&&(2048<H$l||2048<H$B))return console.warn("cache bitmap size larger than 2048,cache ignored"),H$L.ctx&&(H$c.recover("RenderContext",H$L.ctx),H$L.ctx.canvas.size(0,0),H$L.ctx=null),void H$H._fun.call(H$H,H$f,H$K,H$Y,H$X);if(H$U||(H$U=H$L.ctx=H$c.getItem("RenderContext")||new H$e(H$l,H$B,H$Sf.create("AUTO"))),H$U.ctx.sprite=H$f,(H$E=H$U.canvas).clear(),(H$E.width!=H$l||H$E.height!=H$B)&&H$E.size(H$l,H$B),"bitmap"===H$y?H$E.context.asBitmap=!0:"normal"===H$y&&(H$E.context.asBitmap=!1),1!=H$h||1!=H$A){var H$s=H$U.ctx;H$s.save(),H$s.scale(H$h,H$A),!H$k.isConchWebGL&&H$k.isConchApp&&(H$$=H$f._$P.cf)&&H$s.setFilterMatrix&&H$s.setFilterMatrix(H$$._mat,H$$._alpha),H$H._fun.call(H$H,H$f,H$U,-H$d,-H$O),H$s.restore(),H$k.isConchApp&&!H$k.isConchWebGL||H$f._applyFilters()}else H$s=H$U.ctx,!H$k.isConchWebGL&&H$k.isConchApp&&(H$$=H$f._$P.cf)&&H$s.setFilterMatrix&&H$s.setFilterMatrix(H$$._mat,H$$._alpha),H$H._fun.call(H$H,H$f,H$U,-H$d,-H$O),H$k.isConchApp&&!H$k.isConchWebGL||H$f._applyFilters();H$f._$P.staticCache&&(H$L.reCache=!1),H$p.canvasReCache++}else H$d=(H$i=H$L._cacheRec).x,H$O=H$i.y,H$E=H$U.canvas;H$K.drawCanvas(H$E,H$Y+H$d,H$X+H$O,H$i.width,H$i.height)}else H$H._fun.call(H$H,H$f,H$U,H$Y,H$X)},H$E.__init__=function(){var H$f,H$K,H$Y=0;for(H$K=H$R.createRenderSprite(69905,null),H$f=H$E.renders.length=4096,H$Y=0;H$Y<H$f;H$Y++)H$E.renders[H$Y]=H$K;H$E.renders[0]=H$R.createRenderSprite(0,null),function(H$f,H$K){for(var H$Y=0,H$X=0;H$X<H$f.length;H$X++)H$Y|=H$f[H$X],H$E.renders[H$Y]=H$K}([1,512,4,2],new H$E(1,null)),H$E.renders[513]=H$R.createRenderSprite(513,null),H$E.renders[517]=new H$E(517,null)},H$E._initRenderFun=function(H$f,H$K,H$Y,H$X){var H$L=H$f._renderType;(H$E.renders[H$L]=H$E._getTypeRender(H$L))._fun(H$f,H$K,H$Y,H$X)},H$E._getTypeRender=function(H$f){for(var H$K=null,H$Y=2048;1<H$Y;)H$Y&H$f&&(H$K=H$R.createRenderSprite(H$Y,H$K)),H$Y>>=1;return H$K},H$E.IMAGE=1,H$E.ALPHA=2,H$E.TRANSFORM=4,H$E.BLEND=8,H$E.CANVAS=16,H$E.FILTERS=32,H$E.MASK=64,H$E.CLIP=128,H$E.STYLE=256,H$E.GRAPHICS=512,H$E.CUSTOM=1024,H$E.CHILDS=2048,H$E.INIT=69905,H$E.renders=[],H$E.NORENDER=new H$E(0,null),H$E}(),H$W=function(){function H$d(){this._repaint=!1}H$U(H$d,"laya.resource.Context");var H$f=H$d.prototype;return H$f.replaceReset=function(){var H$f,H$K,H$Y=0;for(H$f=H$d.replaceKeys.length,H$Y=0;H$Y<H$f;H$Y++)H$K=H$d.replaceKeys[H$Y],this[H$d.newKeys[H$Y]]=this[H$K]},H$f.replaceResotre=function(){this.__restore(),this.__reset()},H$f.setIsMainContext=function(){},H$f.drawTextures=function(H$f,H$K,H$Y,H$X){H$p.drawCall+=H$K.length/2;for(var H$L=H$f.width,H$H=H$f.height,H$E=0,H$d=H$K.length;H$E<H$d;H$E+=2)this.drawTexture(H$f,H$K[H$E],H$K[H$E+1],H$L,H$H,H$Y,H$X)},H$f.drawCanvas=function(H$f,H$K,H$Y,H$X,H$L){H$p.drawCall++,this.drawImage(H$f.source,H$K,H$Y,H$X,H$L)},H$f.fillRect=function(H$f,H$K,H$Y,H$X,H$L){H$p.drawCall++,H$L&&(this.fillStyle=H$L),this.__fillRect(H$f,H$K,H$Y,H$X)},H$f.fillText=function(H$f,H$K,H$Y,H$X,H$L,H$H){H$p.drawCall++,3<arguments.length&&null!=H$X&&(this.font=H$X,this.fillStyle=H$L,this.textAlign=H$H,this.textBaseline="top"),this.__fillText(H$f,H$K,H$Y)},H$f.fillBorderText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){H$p.drawCall++,this.font=H$X,this.fillStyle=H$L,this.textBaseline="top",this.strokeStyle=H$H,this.lineWidth=H$E,this.textAlign=H$d,this.__strokeText(H$f,H$K,H$Y),this.__fillText(H$f,H$K,H$Y)},H$f.strokeText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){H$p.drawCall++,3<arguments.length&&null!=H$X&&(this.font=H$X,this.strokeStyle=H$L,this.lineWidth=H$H,this.textAlign=H$E,this.textBaseline="top"),this.__strokeText(H$f,H$K,H$Y)},H$f.transformByMatrix=function(H$f){this.transform(H$f.a,H$f.b,H$f.c,H$f.d,H$f.tx,H$f.ty)},H$f.setTransformByMatrix=function(H$f){this.setTransform(H$f.a,H$f.b,H$f.c,H$f.d,H$f.tx,H$f.ty)},H$f.clipRect=function(H$f,H$K,H$Y,H$X){H$p.drawCall++,this.beginPath(),this.rect(H$f,H$K,H$Y,H$X),this.clip()},H$f.drawTexture=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){H$p.drawCall++;var H$d=H$f.uv,H$O=H$f.bitmap.width,H$i=H$f.bitmap.height;this.drawImage(H$f.source,H$d[0]*H$O,H$d[1]*H$i,(H$d[2]-H$d[0])*H$O,(H$d[5]-H$d[3])*H$i,H$K+H$H,H$Y+H$E,H$X,H$L)},H$f.drawTextureWithTransform=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){H$p.drawCall++;var H$i=H$f.uv,H$U=H$f.bitmap.width,H$Z=H$f.bitmap.height;this.save(),1!=H$O&&(this.globalAlpha*=H$O),H$H?(this.transform(H$H.a,H$H.b,H$H.c,H$H.d,H$H.tx+H$E,H$H.ty+H$d),this.drawImage(H$f.source,H$i[0]*H$U,H$i[1]*H$Z,(H$i[2]-H$i[0])*H$U,(H$i[5]-H$i[3])*H$Z,H$K,H$Y,H$X,H$L)):this.drawImage(H$f.source,H$i[0]*H$U,H$i[1]*H$Z,(H$i[2]-H$i[0])*H$U,(H$i[5]-H$i[3])*H$Z,H$K+H$E,H$Y+H$d,H$X,H$L),this.restore()},H$f.drawTexture2=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){var H$O=H$d[0];if(H$O.loaded&&H$O.bitmap&&H$O.source){H$p.drawCall++;var H$i=1!==H$H;if(H$i){var H$U=this.globalAlpha;this.globalAlpha*=H$H}var H$Z=H$O.uv,H$y=H$O.bitmap.width,H$l=H$O.bitmap.height;H$L?(this.save(),this.transform(H$L.a,H$L.b,H$L.c,H$L.d,H$L.tx+H$f,H$L.ty+H$K),this.drawImage(H$O.source,H$Z[0]*H$y,H$Z[1]*H$l,(H$Z[2]-H$Z[0])*H$y,(H$Z[5]-H$Z[3])*H$l,H$d[1]-H$Y,H$d[2]-H$X,H$d[3],H$d[4]),this.restore()):this.drawImage(H$O.source,H$Z[0]*H$y,H$Z[1]*H$l,(H$Z[2]-H$Z[0])*H$y,(H$Z[5]-H$Z[3])*H$l,H$d[1]-H$Y+H$f,H$d[2]-H$X+H$K,H$d[3],H$d[4]),H$i&&(this.globalAlpha=H$U)}},H$f.fillTexture=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){if(!H$d.pat){if(H$f.uv!=H$Uf.DEF_UV){var H$O=new H$Sf("2D");H$O.getContext("2d"),H$O.size(H$f.width,H$f.height),H$O.context.drawTexture(H$f,0,0,H$f.width,H$f.height,0,0),H$f=new H$Uf(H$O)}H$d.pat=this.createPattern(H$f.bitmap.source,H$H)}var H$i=H$K,H$U=H$Y,H$Z=0,H$y=0;H$E&&(H$i+=H$E.x%H$f.width,H$U+=H$E.y%H$f.height,H$Z-=H$E.x%H$f.width,H$y-=H$E.y%H$f.height),this.translate(H$i,H$U),this.fillRect(H$Z,H$y,H$X,H$L,H$d.pat),this.translate(-H$i,-H$U)},H$f.drawTriangle=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){var H$O=H$f.bitmap,H$i=H$O.source,H$U=H$f.width,H$Z=H$f.height,H$y=H$O.width,H$l=H$O.height,H$B=H$Y[H$X]*H$y,H$$=H$Y[H$L]*H$y,H$h=H$Y[H$H]*H$y,H$A=H$Y[H$X+1]*H$l,H$x=H$Y[H$L+1]*H$l,H$S=H$Y[H$H+1]*H$l,H$z=H$K[H$X],H$C=H$K[H$L],H$s=H$K[H$H],H$a=H$K[H$X+1],H$I=H$K[H$L+1],H$n=H$K[H$H+1];if(H$d){var H$_=(H$z+H$C+H$s)/3,H$G=(H$a+H$I+H$n)/3,H$m=H$z-H$_,H$R=H$a-H$G,H$V=Math.sqrt(H$m*H$m+H$R*H$R);H$z=H$_+H$m/H$V*(H$V+1),H$a=H$G+H$R/H$V*(H$V+1),H$R=H$I-H$G,H$C=H$_+(H$m=H$C-H$_)/(H$V=Math.sqrt(H$m*H$m+H$R*H$R))*(H$V+1),H$I=H$G+H$R/H$V*(H$V+1),H$R=H$n-H$G,H$s=H$_+(H$m=H$s-H$_)/(H$V=Math.sqrt(H$m*H$m+H$R*H$R))*(H$V+1),H$n=H$G+H$R/H$V*(H$V+1)}this.save(),H$E&&this.transform(H$E.a,H$E.b,H$E.c,H$E.d,H$E.tx,H$E.ty),this.beginPath(),this.moveTo(H$z,H$a),this.lineTo(H$C,H$I),this.lineTo(H$s,H$n),this.closePath(),this.clip();var H$t=1/(H$B*H$x+H$A*H$h+H$$*H$S-H$x*H$h-H$A*H$$-H$B*H$S),H$T=H$z*H$x+H$A*H$s+H$C*H$S-H$x*H$s-H$A*H$C-H$z*H$S,H$k=H$B*H$C+H$z*H$h+H$$*H$s-H$C*H$h-H$z*H$$-H$B*H$s,H$e=H$B*H$x*H$s+H$A*H$C*H$h+H$z*H$$*H$S-H$z*H$x*H$h-H$A*H$$*H$s-H$B*H$C*H$S,H$Q=H$a*H$x+H$A*H$n+H$I*H$S-H$x*H$n-H$A*H$I-H$a*H$S,H$W=H$B*H$I+H$a*H$h+H$$*H$n-H$I*H$h-H$a*H$$-H$B*H$n,H$q=H$B*H$x*H$n+H$A*H$I*H$h+H$a*H$$*H$S-H$a*H$x*H$h-H$A*H$$*H$n-H$B*H$I*H$S;this.transform(H$T*H$t,H$Q*H$t,H$k*H$t,H$W*H$t,H$e*H$t,H$q*H$t),this.drawImage(H$i,H$f.uv[0]*H$y,H$f.uv[1]*H$l,H$U,H$Z,H$f.uv[0]*H$y,H$f.uv[1]*H$l,H$U,H$Z),this.restore()},H$f.flush=function(){return 0},H$f.fillWords=function(H$f,H$K,H$Y,H$X,H$L,H$H){H$X&&(this.font=H$X),H$L&&(this.fillStyle=H$L);this.textBaseline="top",this.textAlign="left";for(var H$E=0,H$d=H$f.length;H$E<H$d;H$E++){var H$O=H$f[H$E];if(this.__fillText(H$O.char,H$O.x+H$K,H$O.y+H$Y),1===H$H){var H$i=H$O.height,H$U=.5*H$O.style.letterSpacing;H$U||(H$U=0),this.beginPath(),this.strokeStyle=H$L,this.lineWidth=1,this.moveTo(H$K+H$O.x-H$U+.5,H$Y+H$O.y+H$i+.5),this.lineTo(H$K+H$O.x+H$O.width+H$U+.5,H$Y+H$O.y+H$i+.5),this.stroke()}}},H$f.fillBorderWords=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){H$X&&(this.font=H$X),H$L&&(this.fillStyle=H$L),this.textBaseline="top",this.lineWidth=H$E,this.textAlign="left",this.strokeStyle=H$H;for(var H$d=0,H$O=H$f.length;H$d<H$O;H$d++){var H$i=H$f[H$d];this.__strokeText(H$i.char,H$i.x+H$K,H$i.y+H$Y),this.__fillText(H$i.char,H$i.x+H$K,H$i.y+H$Y)}},H$f.destroy=function(){this.canvas.width=this.canvas.height=0},H$f.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},H$f.drawCurves=function(H$f,H$K,H$Y){this.beginPath(),this.strokeStyle=H$Y[3],this.lineWidth=H$Y[4];var H$X=H$Y[2];H$f+=H$Y[0],H$K+=H$Y[1],this.moveTo(H$f+H$X[0],H$K+H$X[1]);for(var H$L=2,H$H=H$X.length;H$L<H$H;)this.quadraticCurveTo(H$f+H$X[H$L++],H$K+H$X[H$L++],H$f+H$X[H$L++],H$K+H$X[H$L++]);this.stroke()},H$d.__init__=function(H$K){var H$Y=laya.resource.Context.prototype;if(!(H$K=H$K||CanvasRenderingContext2D.prototype).inited){H$K.inited=!0,H$K.__fillText=H$K.fillText,H$K.__fillRect=H$K.fillRect,H$K.__strokeText=H$K.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(H$f){H$K[H$f]=H$Y[H$f]})}},H$d.replaceCanvasGetSet=function(H$f,H$K){var H$Y=Object.getOwnPropertyDescriptor(H$f,H$K);if(!H$Y||!H$Y.configurable)return!1;var H$X,H$L={};for(H$X in H$Y)"set"!=H$X&&(H$L[H$X]=H$Y[H$X]);var H$H=H$Y.set;return H$L.set=function(H$f){H$H.call(this,H$f);var H$K=this.getContext("2d");H$K&&"__reset"in H$K&&H$K.__reset()},Object.defineProperty(H$f,H$K,H$L),!0},H$d.replaceGetSet=function(H$f,H$K){var H$Y=Object.getOwnPropertyDescriptor(H$f,H$K);if(!H$Y||!H$Y.configurable)return!1;var H$X,H$L={};for(H$X in H$Y)"set"!=H$X&&(H$L[H$X]=H$Y[H$X]);var H$H=H$Y.set,H$E="___"+H$K+"__";return H$d.newKeys.push(H$E),H$L.set=function(H$f){H$f!=this[H$E]&&(this[H$E]=H$f,H$H.call(this,H$f))},Object.defineProperty(H$f,H$K,H$L),!0},H$d._default=new H$d,H$d.newKeys=[],H$O(H$d,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),H$d}(),H$q=function(){function H$H(H$f){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++H$H._uniqueIDCounter,this._name=H$f||"Content Manager",H$H._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,H$H._resourceManagers.push(this),this._resources=[],this._records={}}H$U(H$H,"laya.resource.ResourceManager");var H$f=H$H.prototype;return H$a.imps(H$f,{"laya.resource.IDispose":!0}),H$f.getResourceByIndex=function(H$f){return this._resources[H$f]},H$f.getResourcesLength=function(){return this._resources.length},H$f.addResource=function(H$f){return H$f.resourceManager&&H$f.resourceManager.removeResource(H$f),-1===this._resources.indexOf(H$f)&&((H$f._resourceManager=this)._resources.push(H$f),this.addRecord(H$f.uri,H$f.__className,H$f.memorySize),this.addSize(H$f.memorySize),!0)},H$f.removeResource=function(H$f){var H$K=this._resources.indexOf(H$f);return-1!==H$K&&(this._resources.splice(H$K,1),H$f._resourceManager=null,this._memorySize-=H$f.memorySize,this.addRecord(H$f.uri,H$f.__className,-H$f.memorySize),!0)},H$f.unload=function(){for(var H$f=this._resources.slice(0,this._resources.length),H$K=0;H$K<H$f.length;H$K++){H$f[H$K].destroy()}H$f.length=0},H$f.dispose=function(){if(this===H$H._systemResourceManager)throw new Error("systemResourceManager不能被释放！");H$H._resourceManagers.splice(H$H._resourceManagers.indexOf(this),1),H$H._isResourceManagersSorted=!1;for(var H$f=this._resources.slice(0,this._resources.length),H$K=0;H$K<H$f.length;H$K++){var H$Y=H$f[H$K];H$Y.resourceManager.removeResource(H$Y),H$Y.destroy()}H$f.length=0},H$f.addSize=function(H$f){H$f&&(this.autoRelease&&0<H$f&&this._memorySize+H$f>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=H$f)},H$f.addRecord=function(H$f,H$K,H$Y){DEBUG&&H$Y&&!H$f&&console.error(H$f,H$K,H$Y)},H$f.garbageCollection=function(H$f){var H$K=this._resources;(H$K=H$K.slice()).sort(function(H$f,H$K){if(!H$f||!H$K)throw new Error("a或b不能为空！");return H$f.released&&H$K.released?0:H$f.released?1:H$K.released?-1:H$f._lastUseFrameCount-H$K._lastUseFrameCount});for(var H$Y=H$p.loopCount,H$X=0,H$L=H$K.length;H$X<H$L;H$X++){var H$H=H$K[H$X];if(!(1<H$Y-H$H._lastUseFrameCount))return void(this._memorySize>=H$f&&(this._isOverflow=!0));if(H$H.releaseResource(),this._memorySize<H$f)return void(this._isOverflow=!1)}},H$B(0,H$f,"id",function(){return this._id}),H$B(0,H$f,"name",function(){return this._name},function(H$f){!H$f&&""===H$f||this._name===H$f||(this._name=H$f,H$H._isResourceManagersSorted=!1)}),H$B(0,H$f,"memorySize",function(){return this._memorySize}),H$B(0,H$f,"records",function(){return this._records}),H$B(1,H$H,"systemResourceManager",function(){return H$H._systemResourceManager}),H$H.__init__=function(){H$H.currentResourceManager=H$H.systemResourceManager},H$H.getLoadedResourceManagerByIndex=function(H$f){return H$H._resourceManagers[H$f]},H$H.getLoadedResourceManagersCount=function(){return H$H._resourceManagers.length},H$H.recreateContentManagers=function(H$f){void 0===H$f&&(H$f=!1);for(var H$K=H$H.currentResourceManager,H$Y=0;H$Y<H$H._resourceManagers.length;H$Y++){H$H.currentResourceManager=H$H._resourceManagers[H$Y];for(var H$X=0;H$X<H$H.currentResourceManager._resources.length;H$X++)H$H.currentResourceManager._resources[H$X].releaseResource(H$f),H$H.currentResourceManager._resources[H$X].activeResource(H$f)}H$H.currentResourceManager=H$K},H$H.releaseContentManagers=function(H$f){void 0===H$f&&(H$f=!1);for(var H$K=H$H.currentResourceManager,H$Y=0;H$Y<H$H._resourceManagers.length;H$Y++){H$H.currentResourceManager=H$H._resourceManagers[H$Y];for(var H$X=0;H$X<H$H.currentResourceManager._resources.length;H$X++){var H$L=H$H.currentResourceManager._resources[H$X];!H$L.released&&H$L.releaseResource(H$f)}}H$H.currentResourceManager=H$K},H$H._uniqueIDCounter=0,H$H._isResourceManagersSorted=!1,H$H._resourceManagers=[],H$O(H$H,["_systemResourceManager",function(){return this._systemResourceManager=new H$H("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=H$H._systemResourceManager}]),H$H}(),H$P=(function(){function H$f(){}H$U(H$f,"laya.system.System"),H$f.changeDefinition=function(H$f,H$K){H$a[H$f]=H$K;var H$Y=H$f+"=classObj";H$a._runScript(H$Y)},H$f.__init__=function(){H$k.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function H$Y(){}return H$U(H$Y,"laya.utils.Browser"),H$B(1,H$Y,"pixelRatio",function(){return H$Y.__init__(),-1<H$Y.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:H$R.getPixelRatio()}),H$B(1,H$Y,"height",function(){return H$Y.__init__(),(H$a.stage&&H$a.stage.canvasRotation?H$Y.clientWidth:H$Y.clientHeight)*H$Y.pixelRatio}),H$B(1,H$Y,"clientWidth",function(){return H$Y.__init__(),H$Y.window.innerWidth||H$Y.document.body.clientWidth}),H$B(1,H$Y,"window",function(){return H$Y.__init__(),H$Y._window}),H$B(1,H$Y,"clientHeight",function(){return H$Y.__init__(),H$Y.window.innerHeight||H$Y.document.body.clientHeight||H$Y.document.documentElement.clientHeight}),H$B(1,H$Y,"width",function(){return H$Y.__init__(),(H$a.stage&&H$a.stage.canvasRotation?H$Y.clientHeight:H$Y.clientWidth)*H$Y.pixelRatio}),H$B(1,H$Y,"container",function(){return H$Y.__init__(),H$Y._container||((H$Y._container=H$Y.createElement("div")).id="layaContainer",H$Y.document.body.appendChild(H$Y._container)),H$Y._container},function(H$f){H$Y._container=H$f}),H$B(1,H$Y,"document",function(){return H$Y.__init__(),H$Y._document}),H$Y.__init__=function(){if(!H$Y._window){H$Y._window=H$R.getWindow(),H$Y._document=H$Y.window.document,H$Y._window.addEventListener("message",function(H$f){laya.utils.Browser._onMessage(H$f)},!1),H$Y.document.__createElement=H$Y.document.createElement,H$E.requestAnimationFrame=H$E.requestAnimationFrame||H$E.webkitRequestAnimationFrame||H$E.mozRequestAnimationFrame||H$E.oRequestAnimationFrame||H$E.msRequestAnimationFrame||function(H$f){return H$E.setTimeout(H$f,1e3/60)};var H$f=H$E.document.body.style;H$f["-webkit-user-select"]="none",H$f["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",H$Y.userAgent=H$Y.window.navigator.userAgent,H$Y.onIOS=!!(H$Y.u=H$Y.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),H$Y.onMobile=-1<H$Y.u.indexOf("Mobile"),H$Y.onIPhone=-1<H$Y.u.indexOf("iPhone"),H$Y.onMac=-1<H$Y.u.indexOf("Mac OS X"),H$Y.onIPad=-1<H$Y.u.indexOf("iPad"),H$Y.onAndroid=-1<H$Y.u.indexOf("Android")||-1<H$Y.u.indexOf("Adr"),H$Y.onWP=-1<H$Y.u.indexOf("Windows Phone"),H$Y.onQQBrowser=-1<H$Y.u.indexOf("QQBrowser"),H$Y.onMQQBrowser=-1<H$Y.u.indexOf("MQQBrowser")||-1<H$Y.u.indexOf("Mobile")&&-1<H$Y.u.indexOf("QQ"),H$Y.onIE=!!H$Y.window.ActiveXObject||"ActiveXObject"in H$Y.window,H$Y.onWeiXin=-1<H$Y.u.indexOf("MicroMessenger"),H$Y.onPC=!H$Y.onMobile,H$Y.onSafari=-1<H$Y.u.indexOf("Safari"),H$Y.onFirefox=-1<H$Y.u.indexOf("Firefox"),H$Y.onEdge=-1<H$Y.u.indexOf("Edge"),H$Y.onMiniGame=-1<H$Y.u.indexOf("MiniGame"),H$Y.onLimixiu=-1<H$Y.u.indexOf("limixiu"),H$Y.httpProtocol="http:"==H$Y.window.location.protocol,H$Y.onMiniGame&&null==H$Y.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),H$Y.webAudioEnabled=!!(H$Y.window.AudioContext||H$Y.window.webkitAudioContext||H$Y.window.mozAudioContext),H$Y.soundType=H$Y.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",H$Lf=H$Y.webAudioEnabled?H$Hf:H$Yf,H$Y.webAudioEnabled&&H$Hf.initWebAudio(),H$Yf._initMusicAudio(),H$Y.enableTouch="ontouchstart"in H$E||H$E.DocumentTouch&&H$K instanceof DocumentTouch,H$E.focus(),H$m._soundClass=H$Lf,H$m._musicClass=H$Yf,H$k._mainCanvas=H$k._mainCanvas||H$Sf.create("2D"),H$Y.canvas||(H$Y.canvas=H$Sf.create("2D"),H$Y.context=H$Y.canvas.getContext("2d"))}},H$Y._onMessage=function(H$f){if(H$f.data&&"size"==H$f.data.name){if(H$Y.window.innerWidth=H$f.data.width,H$Y.window.innerHeight=H$f.data.height,H$Y.window.__innerHeight=H$f.data.clientHeight,!H$Y.document.createEvent)return void console.warn("no document.createEvent");var H$K=H$Y.document.createEvent("HTMLEvents");return H$K.initEvent("resize",!1,!1),void H$Y.window.dispatchEvent(H$K)}},H$Y.createElement=function(H$f){return H$Y.__init__(),H$Y.document.__createElement(H$f)},H$Y.getElementById=function(H$f){return H$Y.__init__(),H$Y.document.getElementById(H$f)},H$Y.removeElement=function(H$f){H$f&&H$f.parentNode&&H$f.parentNode.removeChild(H$f)},H$Y.now=function(){return H$R.now()},H$Y._window=null,H$Y._document=null,H$Y._container=null,H$Y.userAgent=null,H$Y.u=null,H$Y.onIOS=!1,H$Y.onMac=!1,H$Y.onMobile=!1,H$Y.onIPhone=!1,H$Y.onIPad=!1,H$Y.onAndroid=!1,H$Y.onWP=!1,H$Y.onQQBrowser=!1,H$Y.onMQQBrowser=!1,H$Y.onSafari=!1,H$Y.onFirefox=!1,H$Y.onEdge=!1,H$Y.onIE=!1,H$Y.onWeiXin=!1,H$Y.onMiniGame=!1,H$Y.onLimixiu=!1,H$Y.onPC=!1,H$Y.httpProtocol=!1,H$Y.webAudioEnabled=!1,H$Y.soundType=null,H$Y.enableTouch=!1,H$Y.canvas=null,H$Y.context=null,H$Y.__init$=function(){},H$Y}()),H$b=function(){function H$K(H$f){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,H$f?(this._u8d_=new Uint8Array(H$f),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}H$U(H$K,"laya.utils.Byte");var H$f=H$K.prototype;return H$f.___resizeBuffer=function(H$K){try{var H$f=new Uint8Array(H$K);null!=this._u8d_&&(this._u8d_.length<=H$K?H$f.set(this._u8d_):H$f.set(this._u8d_.subarray(0,H$K))),this._u8d_=H$f,this._d_=new DataView(H$f.buffer)}catch(H$f){throw"___resizeBuffer err:"+H$K}},H$f.getString=function(){return this.rUTF(this.getUint16())},H$f.getFloat32Array=function(H$f,H$K){var H$Y=H$f+H$K;H$Y=H$Y>this._length?this._length:H$Y;var H$X=new Float32Array(this._d_.buffer.slice(H$f,H$Y));return this._pos_=H$Y,H$X},H$f.getUint8Array=function(H$f,H$K){var H$Y=H$f+H$K;H$Y=H$Y>this._length?this._length:H$Y;var H$X=new Uint8Array(this._d_.buffer.slice(H$f,H$Y));return this._pos_=H$Y,H$X},H$f.getInt16Array=function(H$f,H$K){var H$Y=H$f+H$K;H$Y=H$Y>this._length?this._length:H$Y;var H$X=new Int16Array(this._d_.buffer.slice(H$f,H$Y));return this._pos_=H$Y,H$X},H$f.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var H$f=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,H$f},H$f.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var H$f=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,H$f},H$f.writeFloat32=function(H$f){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,H$f,this._xd_),this._pos_+=4},H$f.writeFloat64=function(H$f){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,H$f,this._xd_),this._pos_+=8},H$f.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var H$f=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,H$f},H$f.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var H$f=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,H$f},H$f.writeInt32=function(H$f){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,H$f,this._xd_),this._pos_+=4},H$f.writeUint32=function(H$f){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,H$f,this._xd_),this._pos_+=4},H$f.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var H$f=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,H$f},H$f.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var H$f=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,H$f},H$f.writeUint16=function(H$f){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,H$f,this._xd_),this._pos_+=2},H$f.writeInt16=function(H$f){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,H$f,this._xd_),this._pos_+=2},H$f.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},H$f.writeUint8=function(H$f){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,H$f),this._pos_++},H$f._getUInt8=function(H$f){return this._d_.getUint8(H$f)},H$f._getUint16=function(H$f){return this._d_.getUint16(H$f,this._xd_)},H$f._getMatrix=function(){return new H$V(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},H$f.rUTF=function(H$f){for(var H$K=[],H$Y=this._pos_+H$f,H$X=0,H$L=0,H$H=0,H$E=String.fromCharCode,H$d=this._u8d_;this._pos_<H$Y;)(H$X=H$d[this._pos_++])<128?0!=H$X&&H$K.push(H$E(H$X)):H$X<224?H$K.push(H$E((63&H$X)<<6|127&H$d[this._pos_++])):H$X<240?(H$L=H$d[this._pos_++],H$K.push(H$E((31&H$X)<<12|(127&H$L)<<6|127&H$d[this._pos_++]))):(H$L=H$d[this._pos_++],H$H=H$d[this._pos_++],H$K.push(H$E((15&H$X)<<18|(127&H$L)<<12|H$H<<6&127|127&H$d[this._pos_++]))),0;return H$K.join("")},H$f.getCustomString=function(H$f){for(var H$K=[],H$Y=0,H$X=0,H$L=0,H$H=String.fromCharCode,H$E=this._u8d_;0<H$f;)if((H$X=H$E[this._pos_])<128)H$K.push(H$H(H$X)),this._pos_++,H$f--;else for(H$Y=H$X-128,this._pos_++,H$f-=H$Y;0<H$Y;)H$X=H$E[this._pos_++],H$L=H$E[this._pos_++],H$K.push(H$H(H$L<<8|H$X)),H$Y--;return H$K.join("")},H$f.clear=function(){this._pos_=0,this.length=0},H$f.__getBuffer=function(){return this._d_.buffer},H$f.writeUTFBytes=function(H$f){for(var H$K=0,H$Y=(H$f+="").length;H$K<H$Y;H$K++){var H$X=H$f.charCodeAt(H$K);H$X<=127?this.writeByte(H$X):H$X<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|H$X>>6,128|63&H$X],this._pos_),this._pos_+=2):H$X<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|H$X>>12,128|H$X>>6&63,128|63&H$X],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|H$X>>18,128|H$X>>12&63,128|H$X>>6&63,128|63&H$X],this._pos_),this._pos_+=4)}},H$f.writeUTFString=function(H$f){var H$K=this.pos;this.writeUint16(1),this.writeUTFBytes(H$f);var H$Y=this.pos-H$K-2;if(65536<=H$Y)throw"writeUTFString byte len more than 65536";this._d_.setUint16(H$K,H$Y,this._xd_)},H$f.readUTFString=function(){return this.readUTFBytes(this.getUint16())},H$f.getUTFString=function(){return this.readUTFString()},H$f.readUTFBytes=function(H$f){if(void 0===H$f&&(H$f=-1),0==H$f)return"";var H$K=this.bytesAvailable;if(H$K<H$f)throw"readUTFBytes error - Out of bounds";return H$f=0<H$f?H$f:H$K,this.rUTF(H$f)},H$f.getUTFBytes=function(H$f){return void 0===H$f&&(H$f=-1),this.readUTFBytes(H$f)},H$f.writeByte=function(H$f){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,H$f),this._pos_+=1},H$f.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},H$f.getByte=function(){return this.readByte()},H$f.ensureWrite=function(H$f){this._length<H$f&&(this._length=H$f),this._allocated_<H$f&&(this.length=H$f)},H$f.writeArrayBuffer=function(H$f,H$K,H$Y){if(void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),H$K<0||H$Y<0)throw"writeArrayBuffer error - Out of bounds";0==H$Y&&(H$Y=H$f.byteLength-H$K),this.ensureWrite(this._pos_+H$Y);var H$X=new Uint8Array(H$f);this._u8d_.set(H$X.subarray(H$K,H$K+H$Y),this._pos_),this._pos_+=H$Y},H$B(0,H$f,"buffer",function(){var H$f=this._d_.buffer;return H$f.byteLength==this.length?H$f:H$f.slice(0,this.length)}),H$B(0,H$f,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(H$f){this._xd_="littleEndian"==H$f}),H$B(0,H$f,"length",function(){return this._length},function(H$f){this._allocated_<H$f?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(H$f,2*this._allocated_))):this._allocated_>H$f&&this.___resizeBuffer(this._allocated_=H$f),this._length=H$f}),H$B(0,H$f,"pos",function(){return this._pos_},function(H$f){this._pos_=H$f}),H$B(0,H$f,"bytesAvailable",function(){return this._length-this._pos_}),H$K.getSystemEndian=function(){if(!H$K._sysEndian){var H$f=new ArrayBuffer(2);new DataView(H$f).setInt16(0,256,!0),H$K._sysEndian=256===new Int16Array(H$f)[0]?"littleEndian":"bigEndian"}return H$K._sysEndian},H$K.BIG_ENDIAN="bigEndian",H$K.LITTLE_ENDIAN="littleEndian",H$K._sysEndian=null,H$K}(),H$J=function(){function H$L(){}return H$U(H$L,"laya.utils.CacheManager"),H$L.regCacheByFunction=function(H$f,H$K){var H$Y;H$L.unRegCacheByFunction(H$f,H$K),H$Y={tryDispose:H$f,getCacheList:H$K},H$L._cacheList.push(H$Y)},H$L.unRegCacheByFunction=function(H$f,H$K){var H$Y,H$X=0;for(H$Y=H$L._cacheList.length,H$X=0;H$X<H$Y;H$X++)if(H$L._cacheList[H$X].tryDispose==H$f&&H$L._cacheList[H$X].getCacheList==H$K)return void H$L._cacheList.splice(H$X,1)},H$L.forceDispose=function(){var H$f=0,H$K=H$L._cacheList.length;for(H$f=0;H$f<H$K;H$f++)H$L._cacheList[H$f].tryDispose(!0)},H$L.beginCheck=function(H$f){void 0===H$f&&(H$f=15e3),H$a.timer.loop(H$f,null,H$L._checkLoop)},H$L.stopCheck=function(){H$a.timer.clear(null,H$L._checkLoop)},H$L._checkLoop=function(){var H$f=H$L._cacheList;if(!(H$f.length<1)){var H$K,H$Y=H$P.now(),H$X=0;for(H$K=H$X=H$f.length;0<H$X&&(H$f[H$L._index=++H$L._index%H$K].tryDispose(!1),!(H$P.now()-H$Y>H$L.loopTimeLimit));)H$X--}},H$L.loopTimeLimit=2,H$L._cacheList=[],H$L._index=0,H$L}(),H$M=function(){function H$l(){}return H$U(H$l,"laya.utils.ClassUtils"),H$l.regClass=function(H$f,H$K){H$l._classMap[H$f]=H$K},H$l.getRegClass=function(H$f){return H$l._classMap[H$f]},H$l.getInstance=function(H$f){var H$K=H$l.getClass(H$f);return H$K?new H$K:(console.warn("[error] Undefined class:",H$f),null)},H$l.createByJson=function(H$f,H$K,H$Y,H$X,H$L){"string"==typeof H$f&&(H$f=JSON.parse(H$f));var H$H=H$f.props;if(!H$K&&!(H$K=H$L?H$L.runWith(H$f):H$l.getInstance(H$H.runtime||H$f.type)))return null;var H$E=H$f.child;if(H$E)for(var H$d=0,H$O=H$E.length;H$d<H$O;H$d++){var H$i=H$E[H$d];if("render"!==H$i.props.name&&"render"!==H$i.props.renderType||!H$K._$set_itemRender)if("Graphic"==H$i.type)H$l.addGraphicsToSprite(H$i,H$K);else if(H$l.isDrawType(H$i.type))H$l.addGraphicToSprite(H$i,H$K,!0);else{var H$U=H$l.createByJson(H$i,null,H$Y,H$X,H$L);"Script"==H$i.type?H$U.hasOwnProperty("owner")?H$U.owner=H$K:H$U.hasOwnProperty("target")&&(H$U.target=H$K):"mask"==H$i.props.renderType?H$K.mask=H$U:H$K.addChild(H$U)}else H$K.itemRender=H$i}if(H$H)for(var H$Z in H$H){var H$y=H$H[H$Z];"var"===H$Z&&H$Y?H$Y[H$y]=H$K:H$y instanceof Array&&"function"==typeof H$K[H$Z]?H$K[H$Z].apply(H$K,H$y):H$K[H$Z]=H$y}return H$X&&H$f.customProps&&H$X.runWith([H$K,H$f]),H$K.created&&H$K.created(),H$K},H$l.addGraphicsToSprite=function(H$f,H$K){var H$Y;if((H$Y=H$f.child)&&!(H$Y.length<1)){var H$X;H$X=H$l._getGraphicsFromSprite(H$f,H$K);var H$L=0,H$H=0;H$f.props&&(H$L=H$l._getObjVar(H$f.props,"x",0),H$H=H$l._getObjVar(H$f.props,"y",0)),0!=H$L&&0!=H$H&&H$X.translate(H$L,H$H);var H$E,H$d=0;for(H$E=H$Y.length,H$d=0;H$d<H$E;H$d++)H$l._addGraphicToGraphics(H$Y[H$d],H$X);0!=H$L&&0!=H$H&&H$X.translate(-H$L,-H$H)}},H$l.addGraphicToSprite=function(H$f,H$K,H$Y){var H$X;void 0===H$Y&&(H$Y=!1),H$X=H$Y?H$l._getGraphicsFromSprite(H$f,H$K):H$K.graphics,H$l._addGraphicToGraphics(H$f,H$X)},H$l._getGraphicsFromSprite=function(H$f,H$K){var H$Y,H$X;if(!H$f||!H$f.props)return H$K.graphics;switch(H$X=H$f.props.renderType){case"hit":case"unHit":var H$L;H$K.hitArea||(H$K.hitArea=new H$j),(H$L=H$K.hitArea)[H$X]||(H$L[H$X]=new H$y),H$Y=H$L[H$X]}return H$Y||(H$Y=H$K.graphics),H$Y},H$l._getTransformData=function(H$f){var H$K;(H$f.hasOwnProperty("pivotX")||H$f.hasOwnProperty("pivotY"))&&(H$K=H$K||new H$V).translate(-H$l._getObjVar(H$f,"pivotX",0),-H$l._getObjVar(H$f,"pivotY",0));var H$Y=H$l._getObjVar(H$f,"scaleX",1),H$X=H$l._getObjVar(H$f,"scaleY",1),H$L=H$l._getObjVar(H$f,"rotation",0);H$l._getObjVar(H$f,"skewX",0),H$l._getObjVar(H$f,"skewY",0);return 1==H$Y&&1==H$X&&0==H$L||((H$K=H$K||new H$V).scale(H$Y,H$X),H$K.rotate(.0174532922222222*H$L)),H$K},H$l._addGraphicToGraphics=function(H$f,H$K){var H$Y,H$X;if((H$Y=H$f.props)&&(H$X=H$l.DrawTypeDic[H$f.type])){var H$L,H$H;H$L=H$K;var H$E=H$l._getParams(H$Y,H$X[1],H$X[2],H$X[3]);((H$H=H$l._tM)||1!=H$l._alpha)&&(H$L.save(),H$H&&H$L.transform(H$H),1!=H$l._alpha&&H$L.alpha(H$l._alpha)),H$L[H$X[0]].apply(H$L,H$E),(H$H||1!=H$l._alpha)&&H$L.restore()}},H$l._adptLineData=function(H$f){return H$f[2]=parseFloat(H$f[0])+parseFloat(H$f[2]),H$f[3]=parseFloat(H$f[1])+parseFloat(H$f[3]),H$f},H$l._adptTextureData=function(H$f){return H$f[0]=H$df.getRes(H$f[0]),H$f},H$l._adptLinesData=function(H$f){return H$f[2]=H$l._getPointListByStr(H$f[2]),H$f},H$l.isDrawType=function(H$f){return"Image"!=H$f&&H$l.DrawTypeDic.hasOwnProperty(H$f)},H$l._getParams=function(H$f,H$K,H$Y,H$X){var H$L;void 0===H$Y&&(H$Y=0),(H$L=H$l._temParam).length=H$K.length;var H$H,H$E,H$d=0;for(H$H=H$K.length,H$d=0;H$d<H$H;H$d++)H$L[H$d]=H$l._getObjVar(H$f,H$K[H$d][0],H$K[H$d][1]);return H$l._alpha=H$l._getObjVar(H$f,"alpha",1),H$E=H$l._getTransformData(H$f),H$l._tM=H$E?(H$Y||(H$Y=0),H$E.translate(H$L[H$Y],H$L[H$Y+1]),H$L[H$Y]=H$L[H$Y+1]=0,H$E):null,H$X&&H$l[H$X]&&(H$L=H$l[H$X](H$L)),H$L},H$l._getPointListByStr=function(H$f){var H$K,H$Y,H$X=0;for(H$Y=(H$K=H$f.split(",")).length,H$X=0;H$X<H$Y;H$X++)H$K[H$X]=parseFloat(H$K[H$X]);return H$K},H$l._getObjVar=function(H$f,H$K,H$Y){return H$f.hasOwnProperty(H$K)?H$f[H$K]:H$Y},H$l._temParam=[],H$l._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},H$l.getClass=function(H$f){var H$K=H$l._classMap[H$f]||H$f;return"string"==typeof H$K?H$a.__classmap[H$K]:H$K},H$l._tM=null,H$l._alpha=NaN,H$O(H$l,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),H$l}(),H$w=function(){function H$H(H$f){if(this._color=[],"string"==typeof H$f){null===(this.strColor=H$f)&&(H$f="#000000"),"#"==H$f.charAt(0)&&(H$f=H$f.substr(1));var H$K=H$f.length;if(3==H$K||4==H$K){for(var H$Y="",H$X=0;H$X<H$K;H$X++)H$Y+=H$f[H$X]+H$f[H$X];H$f=H$Y}var H$L=this.numColor=parseInt(H$f,16);if(8==H$f.length)return void(this._color=[parseInt(H$f.substr(0,2),16)/255,((16711680&H$L)>>16)/255,((65280&H$L)>>8)/255,(255&H$L)/255])}else H$L=this.numColor=H$f,this.strColor=H$g.toHexColor(H$L);this._color=[((16711680&H$L)>>16)/255,((65280&H$L)>>8)/255,(255&H$L)/255,1],this._color.__id=++H$H._COLODID}return H$U(H$H,"laya.utils.Color"),H$H._initDefault=function(){for(var H$f in H$H._DEFAULT={},H$H._COLOR_MAP)H$H._SAVE[H$f]=H$H._DEFAULT[H$f]=new H$H(H$H._COLOR_MAP[H$f]);return H$H._DEFAULT},H$H._initSaveMap=function(){for(var H$f in H$H._SAVE_SIZE=0,H$H._SAVE={},H$H._DEFAULT)H$H._SAVE[H$f]=H$H._DEFAULT[H$f]},H$H.create=function(H$f){var H$K=H$H._SAVE[H$f+""];return null!=H$K?H$K:(H$H._SAVE_SIZE<1e3||H$H._initSaveMap(),H$H._SAVE[H$f+""]=new H$H(H$f))},H$H._SAVE={},H$H._SAVE_SIZE=0,H$H._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},H$H._DEFAULT=H$H._initDefault(),H$H._COLODID=1,H$H}(),H$r=(function(){function H$f(){this._values=[],this._keys=[]}H$U(H$f,"laya.utils.Dictionary");var H$K=H$f.prototype;H$K.set=function(H$f,H$K){var H$Y=this.indexOf(H$f);0<=H$Y?this._values[H$Y]=H$K:(this._keys.push(H$f),this._values.push(H$K))},H$K.indexOf=function(H$f){var H$K=this._keys.indexOf(H$f);return 0<=H$K?H$K:(H$f="string"==typeof H$f?Number(H$f):"number"==typeof H$f?H$f.toString():H$f,this._keys.indexOf(H$f))},H$K.get=function(H$f){var H$K=this.indexOf(H$f);return H$K<0?null:this._values[H$K]},H$K.remove=function(H$f){var H$K=this.indexOf(H$f);return 0<=H$K&&(this._keys.splice(H$K,1),this._values.splice(H$K,1),!0)},H$K.clear=function(){this._values.length=0,this._keys.length=0},H$B(0,H$K,"values",function(){return this._values}),H$B(0,H$K,"keys",function(){return this._keys})}(),function(){function H$f(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}H$U(H$f,"laya.utils.Dragging");var H$K=H$f.prototype;return H$K.start=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){void 0===H$d&&(H$d=.92),this.clearTimer(),this.target=H$f,this.area=H$K,this.hasInertia=H$Y,this.elasticDistance=H$K?H$X:0,this.elasticBackTime=H$L,this.data=H$H,this._disableMouseEvent=H$E,this.ratio=H$d,1!=H$f.globalScaleX||1!=H$f.globalScaleY?this._parent=H$f.parent:this._parent=H$a.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,H$a.stage.on("mouseup",this,this.onStageMouseUp),H$a.stage.on("mouseout",this,this.onStageMouseUp),H$a.timer.frameLoop(1,this,this.loop)},H$K.clearTimer=function(){H$a.timer.clear(this,this.loop),H$a.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},H$K.stop=function(){this._dragging&&(H$$.instance.disableMouseEvent=!1,H$a.stage.off("mouseup",this,this.onStageMouseUp),H$a.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},H$K.loop=function(){var H$f=this._parent.getMousePoint(),H$K=H$f.x,H$Y=H$f.y,H$X=H$K-this._lastX,H$L=H$Y-this._lastY;if(this._clickOnly){if(!(1<Math.abs(H$X*H$a.stage._canvasTransform.getScaleX())||1<Math.abs(H$L*H$a.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),H$$.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(H$X,H$L);0==H$X&&0==H$L||(this._lastX=H$K,this._lastY=H$Y,this.target.x+=H$X*this._elasticRateX,this.target.y+=H$L*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},H$K.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var H$f=this.area.x-this.target.x;else H$f=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-H$f/this.elasticDistance),this.target.y<this.area.y)var H$K=this.area.y-this.target.y;else H$K=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-H$K/this.elasticDistance)}},H$K.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},H$K.onStageMouseUp=function(H$f){if(H$$.instance.disableMouseEvent=!1,H$a.stage.off("mouseup",this,this.onStageMouseUp),H$a.stage.off("mouseout",this,this.onStageMouseUp),H$a.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var H$K=this._offsets.length,H$Y=Math.min(H$K,6),H$X=this._offsets.length-H$Y,H$L=H$K-1;H$X<H$L;H$L--)this._offsetY+=this._offsets[H$L--],this._offsetX+=this._offsets[H$L];this._offsetX=this._offsetX/H$Y*2,this._offsetY=this._offsetY/H$Y*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),H$a.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},H$K.checkElastic=function(){var H$f=NaN,H$K=NaN;if(this.target.x<this.area.x?H$f=this.area.x:this.target.x>this.area.x+this.area.width&&(H$f=this.area.x+this.area.width),this.target.y<this.area.y?H$K=this.area.y:this.target.y>this.area.y+this.area.height&&(H$K=this.area.y+this.area.height),isNaN(H$f)&&isNaN(H$K))this.clear();else{var H$Y={};isNaN(H$f)||(H$Y.x=H$f),isNaN(H$K)||(H$Y.y=H$K),this._tween=H$D.to(this.target,H$Y,this.elasticBackTime,H$v.sineOut,H$x.create(this,this.clear),0,!1,!1)}},H$K.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(H$a.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},H$K.clear=function(){if(this.target){this.clearTimer();var H$f=this.target;this.target=null,this._parent=null,H$f.event("dragend",this.data)}},H$f}()),H$v=function(){function H$d(){}return H$U(H$d,"laya.utils.Ease"),H$d.linearNone=function(H$f,H$K,H$Y,H$X){return H$Y*H$f/H$X+H$K},H$d.linearIn=function(H$f,H$K,H$Y,H$X){return H$Y*H$f/H$X+H$K},H$d.linearInOut=function(H$f,H$K,H$Y,H$X){return H$Y*H$f/H$X+H$K},H$d.linearOut=function(H$f,H$K,H$Y,H$X){return H$Y*H$f/H$X+H$K},H$d.bounceIn=function(H$f,H$K,H$Y,H$X){return H$Y-H$d.bounceOut(H$X-H$f,0,H$Y,H$X)+H$K},H$d.bounceInOut=function(H$f,H$K,H$Y,H$X){return H$f<.5*H$X?.5*H$d.bounceIn(2*H$f,0,H$Y,H$X)+H$K:.5*H$d.bounceOut(2*H$f-H$X,0,H$Y,H$X)+.5*H$Y+H$K},H$d.bounceOut=function(H$f,H$K,H$Y,H$X){return(H$f/=H$X)<1/2.75?H$Y*(7.5625*H$f*H$f)+H$K:H$f<2/2.75?H$Y*(7.5625*(H$f-=1.5/2.75)*H$f+.75)+H$K:H$f<2.5/2.75?H$Y*(7.5625*(H$f-=2.25/2.75)*H$f+.9375)+H$K:H$Y*(7.5625*(H$f-=2.625/2.75)*H$f+.984375)+H$K},H$d.backIn=function(H$f,H$K,H$Y,H$X,H$L){return void 0===H$L&&(H$L=1.70158),H$Y*(H$f/=H$X)*H$f*((H$L+1)*H$f-H$L)+H$K},H$d.backInOut=function(H$f,H$K,H$Y,H$X,H$L){return void 0===H$L&&(H$L=1.70158),(H$f/=.5*H$X)<1?.5*H$Y*(H$f*H$f*((1+(H$L*=1.525))*H$f-H$L))+H$K:H$Y/2*((H$f-=2)*H$f*((1+(H$L*=1.525))*H$f+H$L)+2)+H$K},H$d.backOut=function(H$f,H$K,H$Y,H$X,H$L){return void 0===H$L&&(H$L=1.70158),H$Y*((H$f=H$f/H$X-1)*H$f*((H$L+1)*H$f+H$L)+1)+H$K},H$d.elasticIn=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E;return void 0===H$L&&(H$L=0),void 0===H$H&&(H$H=0),0==H$f?H$K:1==(H$f/=H$X)?H$K+H$Y:(H$H||(H$H=.3*H$X),H$E=!H$L||0<H$Y&&H$L<H$Y||H$Y<0&&H$L<-H$Y?(H$L=H$Y,H$H/4):H$H/H$d.PI2*Math.asin(H$Y/H$L),-H$L*Math.pow(2,10*(H$f-=1))*Math.sin((H$f*H$X-H$E)*H$d.PI2/H$H)+H$K)},H$d.elasticInOut=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E;return void 0===H$L&&(H$L=0),void 0===H$H&&(H$H=0),0==H$f?H$K:2==(H$f/=.5*H$X)?H$K+H$Y:(H$H||(H$H=H$X*(.3*1.5)),H$E=!H$L||0<H$Y&&H$L<H$Y||H$Y<0&&H$L<-H$Y?(H$L=H$Y,H$H/4):H$H/H$d.PI2*Math.asin(H$Y/H$L),H$f<1?H$L*Math.pow(2,10*(H$f-=1))*Math.sin((H$f*H$X-H$E)*H$d.PI2/H$H)*-.5+H$K:H$L*Math.pow(2,-10*(H$f-=1))*Math.sin((H$f*H$X-H$E)*H$d.PI2/H$H)*.5+H$Y+H$K)},H$d.elasticOut=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E;return void 0===H$L&&(H$L=0),void 0===H$H&&(H$H=0),0==H$f?H$K:1==(H$f/=H$X)?H$K+H$Y:(H$H||(H$H=.3*H$X),H$E=!H$L||0<H$Y&&H$L<H$Y||H$Y<0&&H$L<-H$Y?(H$L=H$Y,H$H/4):H$H/H$d.PI2*Math.asin(H$Y/H$L),H$L*Math.pow(2,-10*H$f)*Math.sin((H$f*H$X-H$E)*H$d.PI2/H$H)+H$Y+H$K)},H$d.strongIn=function(H$f,H$K,H$Y,H$X){return H$Y*(H$f/=H$X)*H$f*H$f*H$f*H$f+H$K},H$d.strongInOut=function(H$f,H$K,H$Y,H$X){return(H$f/=.5*H$X)<1?.5*H$Y*H$f*H$f*H$f*H$f*H$f+H$K:.5*H$Y*((H$f-=2)*H$f*H$f*H$f*H$f+2)+H$K},H$d.strongOut=function(H$f,H$K,H$Y,H$X){return H$Y*((H$f=H$f/H$X-1)*H$f*H$f*H$f*H$f+1)+H$K},H$d.sineInOut=function(H$f,H$K,H$Y,H$X){return.5*-H$Y*(Math.cos(Math.PI*H$f/H$X)-1)+H$K},H$d.sineIn=function(H$f,H$K,H$Y,H$X){return-H$Y*Math.cos(H$f/H$X*H$d.HALF_PI)+H$Y+H$K},H$d.sineOut=function(H$f,H$K,H$Y,H$X){return H$Y*Math.sin(H$f/H$X*H$d.HALF_PI)+H$K},H$d.quintIn=function(H$f,H$K,H$Y,H$X){return H$Y*(H$f/=H$X)*H$f*H$f*H$f*H$f+H$K},H$d.quintInOut=function(H$f,H$K,H$Y,H$X){return(H$f/=.5*H$X)<1?.5*H$Y*H$f*H$f*H$f*H$f*H$f+H$K:.5*H$Y*((H$f-=2)*H$f*H$f*H$f*H$f+2)+H$K},H$d.quintOut=function(H$f,H$K,H$Y,H$X){return H$Y*((H$f=H$f/H$X-1)*H$f*H$f*H$f*H$f+1)+H$K},H$d.quartIn=function(H$f,H$K,H$Y,H$X){return H$Y*(H$f/=H$X)*H$f*H$f*H$f+H$K},H$d.quartInOut=function(H$f,H$K,H$Y,H$X){return(H$f/=.5*H$X)<1?.5*H$Y*H$f*H$f*H$f*H$f+H$K:.5*-H$Y*((H$f-=2)*H$f*H$f*H$f-2)+H$K},H$d.quartOut=function(H$f,H$K,H$Y,H$X){return-H$Y*((H$f=H$f/H$X-1)*H$f*H$f*H$f-1)+H$K},H$d.cubicIn=function(H$f,H$K,H$Y,H$X){return H$Y*(H$f/=H$X)*H$f*H$f+H$K},H$d.cubicInOut=function(H$f,H$K,H$Y,H$X){return(H$f/=.5*H$X)<1?.5*H$Y*H$f*H$f*H$f+H$K:.5*H$Y*((H$f-=2)*H$f*H$f+2)+H$K},H$d.cubicOut=function(H$f,H$K,H$Y,H$X){return H$Y*((H$f=H$f/H$X-1)*H$f*H$f+1)+H$K},H$d.quadIn=function(H$f,H$K,H$Y,H$X){return H$Y*(H$f/=H$X)*H$f+H$K},H$d.quadInOut=function(H$f,H$K,H$Y,H$X){return(H$f/=.5*H$X)<1?.5*H$Y*H$f*H$f+H$K:.5*-H$Y*(--H$f*(H$f-2)-1)+H$K},H$d.quadOut=function(H$f,H$K,H$Y,H$X){return-H$Y*(H$f/=H$X)*(H$f-2)+H$K},H$d.expoIn=function(H$f,H$K,H$Y,H$X){return 0==H$f?H$K:H$Y*Math.pow(2,10*(H$f/H$X-1))+H$K-.001*H$Y},H$d.expoInOut=function(H$f,H$K,H$Y,H$X){return 0==H$f?H$K:H$f==H$X?H$K+H$Y:(H$f/=.5*H$X)<1?.5*H$Y*Math.pow(2,10*(H$f-1))+H$K:.5*H$Y*(2-Math.pow(2,-10*--H$f))+H$K},H$d.expoOut=function(H$f,H$K,H$Y,H$X){return H$f==H$X?H$K+H$Y:H$Y*(1-Math.pow(2,-10*H$f/H$X))+H$K},H$d.circIn=function(H$f,H$K,H$Y,H$X){return-H$Y*(Math.sqrt(1-(H$f/=H$X)*H$f)-1)+H$K},H$d.circInOut=function(H$f,H$K,H$Y,H$X){return(H$f/=.5*H$X)<1?.5*-H$Y*(Math.sqrt(1-H$f*H$f)-1)+H$K:.5*H$Y*(Math.sqrt(1-(H$f-=2)*H$f)+1)+H$K},H$d.circOut=function(H$f,H$K,H$Y,H$X){return H$Y*Math.sqrt(1-(H$f=H$f/H$X-1)*H$f)+H$K},H$d.HALF_PI=.5*Math.PI,H$d.PI2=2*Math.PI,H$d}(),H$j=function(){function H$Z(){this._hit=null,this._unHit=null}H$U(H$Z,"laya.utils.HitArea");var H$f=H$Z.prototype;return H$f.isHit=function(H$f,H$K){return!!H$Z.isHitGraphic(H$f,H$K,this.hit)&&!H$Z.isHitGraphic(H$f,H$K,this.unHit)},H$f.contains=function(H$f,H$K){return this.isHit(H$f,H$K)},H$B(0,H$f,"hit",function(){return this._hit||(this._hit=new H$y),this._hit},function(H$f){this._hit=H$f}),H$B(0,H$f,"unHit",function(){return this._unHit||(this._unHit=new H$y),this._unHit},function(H$f){this._unHit=H$f}),H$Z.isHitGraphic=function(H$f,H$K,H$Y){if(!H$Y)return!1;var H$X;if(!(H$X=H$Y.cmds)&&H$Y._one&&((H$X=H$Z._cmds).length=1,H$X[0]=H$Y._one),!H$X)return!1;var H$L,H$H,H$E=0;for(H$L=H$X.length,H$E=0;H$E<H$L;H$E++)if(H$H=H$X[H$E]){var H$d=H$k._context;switch(H$H.callee){case H$d._translate:case 6:H$f-=H$H[0],H$K-=H$H[1]}if(H$Z.isHitCmd(H$f,H$K,H$H))return!0}return!1},H$Z.isHitCmd=function(H$f,H$K,H$Y){if(!H$Y)return!1;var H$X=H$k._context,H$L=!1;switch(H$Y.callee){case H$X._drawRect:case 13:H$Z._rec.setTo(H$Y[0],H$Y[1],H$Y[2],H$Y[3]),H$L=H$Z._rec.contains(H$f,H$K);break;case H$X._drawCircle:case H$X._fillCircle:case 14:H$L=(H$f-=H$Y[0])*H$f+(H$K-=H$Y[1])*H$K<H$Y[2]*H$Y[2];break;case H$X._drawPoly:case 18:H$f-=H$Y[0],H$K-=H$Y[1],H$L=H$Z.ptInPolygon(H$f,H$K,H$Y[2])}return H$L},H$Z.ptInPolygon=function(H$f,H$K,H$Y){var H$X;(H$X=H$Z._ptPoint).setTo(H$f,H$K);var H$L,H$H=0,H$E=NaN,H$d=NaN,H$O=NaN,H$i=NaN;H$L=H$Y.length;for(var H$U=0;H$U<H$L;H$U+=2){if(H$E=H$Y[H$U],H$d=H$Y[H$U+1],H$O=H$Y[(H$U+2)%H$L],H$d!=(H$i=H$Y[(H$U+3)%H$L]))if(!(H$X.y<Math.min(H$d,H$i)))if(!(H$X.y>=Math.max(H$d,H$i)))(H$X.y-H$d)*(H$O-H$E)/(H$i-H$d)+H$E>H$X.x&&H$H++}return H$H%2==1},H$Z._cmds=[],H$O(H$Z,["_rec",function(){return this._rec=new H$n},"_ptPoint",function(){return this._ptPoint=new H$I}]),H$Z}(),H$c=(function(){function H$L(H$f,H$K,H$Y,H$X){this.char=H$f,this.charNum=H$f.charCodeAt(0),this._x=this._y=0,this.width=H$K,this.height=H$Y,this.style=H$X,this.isWord=!H$L._isWordRegExp.test(H$f)}H$U(H$L,"laya.utils.HTMLChar");var H$f=H$L.prototype;H$a.imps(H$f,{"laya.display.ILayout":!0}),H$f.setSprite=function(H$f){this._sprite=H$f},H$f.getSprite=function(){return this._sprite},H$f._isChar=function(){return!0},H$f._getCSSStyle=function(){return this.style},H$B(0,H$f,"width",function(){return this._w},function(H$f){this._w=H$f}),H$B(0,H$f,"x",function(){return this._x},function(H$f){this._sprite&&(this._sprite.x=H$f),this._x=H$f}),H$B(0,H$f,"y",function(){return this._y},function(H$f){this._sprite&&(this._sprite.y=H$f),this._y=H$f}),H$B(0,H$f,"height",function(){return this._h},function(H$f){this._h=H$f}),H$L._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function H$K(){}H$U(H$K,"laya.utils.Log"),H$K.enable=function(){H$K._logdiv||(H$K._logdiv=H$P.window.document.createElement("div"),H$P.window.document.body.appendChild(H$K._logdiv),H$K._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},H$K.toggle=function(){var H$f=H$K._logdiv.style;"1px"==H$f.width?H$f.width=H$f.height="50%":H$f.width=H$f.height="1px"},H$K.print=function(H$f){H$K._logdiv&&(H$K.maxCount<=H$K._count&&H$K.clear(),H$K._count++,H$K._logdiv.innerText+=H$f+"\n",H$K._logdiv.scrollTop=H$K._logdiv.scrollHeight)},H$K.clear=function(){H$K._logdiv.innerText="",H$K._count=0},H$K._logdiv=null,H$K._count=0,H$K.maxCount=20}(),function(){function H$K(){}H$U(H$K,"laya.utils.Mouse"),H$B(1,H$K,"cursor",function(){return H$K._style.cursor},function(H$f){H$K._style.cursor=H$f}),H$K.hide=function(){"none"!=H$K.cursor&&(H$K._preCursor=H$K.cursor,H$K.cursor="none")},H$K.show=function(){"none"==H$K.cursor&&(H$K.cursor=H$K._preCursor?H$K._preCursor:"auto")},H$K._preCursor=null,H$O(H$K,["_style",function(){return this._style=H$P.document.body.style}])}(),function(){function H$H(){}return H$U(H$H,"laya.utils.Pool"),H$H.getPoolBySign=function(H$f){return H$H._poolDic[H$f]||(H$H._poolDic[H$f]=[])},H$H.clearBySign=function(H$f){H$H._poolDic[H$f]&&(H$H._poolDic[H$f].length=0)},H$H.recover=function(H$f,H$K){H$K.__InPool||(H$K.__InPool=!0,H$H.getPoolBySign(H$f).push(H$K))},H$H.getItemByClass=function(H$f,H$K){var H$Y=H$H.getPoolBySign(H$f),H$X=H$Y.length?H$Y.pop():new H$K;return H$X.__InPool=!1,H$X},H$H.getItemByCreateFun=function(H$f,H$K,H$Y){var H$X=H$H.getPoolBySign(H$f),H$L=H$X.length?H$X.pop():H$K.call(H$Y);return H$L.__InPool=!1,H$L},H$H.getItem=function(H$f){var H$K=H$H.getPoolBySign(H$f),H$Y=H$K.length?H$K.pop():null;return H$Y&&(H$Y.__InPool=!1),H$Y},H$H._poolDic={},H$H.InPoolSign="__InPool",H$H}()),H$p=function(){function H$O(){}return H$U(H$O,"laya.utils.Stat"),H$B(1,H$O,"onclick",null,function(H$f){H$O._sp&&H$O._sp.on("click",H$O._sp,H$f),H$O._canvas&&(H$O._canvas.source.onclick=H$f,H$O._canvas.source.style.pointerEvents="")}),H$O.show=function(H$f,H$K,H$Y){if(void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),!H$k.isConchApp||H$k.isConchWebGL){if(H$k.isConchWebGL||H$P.onMiniGame||H$P.onLimixiu||(H$O._useCanvas=!0),H$O._show=!0,H$O._fpsData.length=60,H$O._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},H$O._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},H$O._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},H$O._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},H$k.isWebGL)if(H$O._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},H$k.is3DMode){if(H$O._view[0].title="FPS(3D)",H$O._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},H$O._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},H$O._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==H$Y){var H$X=8;H$O._view[H$X++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},H$O._view[H$X++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},H$O._view[H$X++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},H$O._view[H$X++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H$O._view[H$X++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H$O._view[H$X++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},H$O._view[H$X++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},H$O._view[H$X++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},H$O._view[H$X++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==H$Y){H$X=8;H$O._view[H$X++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},H$O._view[H$X++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},H$O._view[H$X++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},H$O._view[H$X++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},H$O._view[H$X++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},H$O._view[H$X++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},H$O._view[H$X++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else H$O._view[0].title="FPS(WebGL)",H$O._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else H$O._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};H$O._useCanvas?H$O.createUIPre(H$f,H$K):H$O.createUI(H$f,H$K),H$O.enable()}else H$P.window.conch.showFPS&&H$P.window.conch.showFPS(H$f,H$K)},H$O.createUIPre=function(H$f,H$K){var H$Y=H$P.pixelRatio;H$O._width=170*H$Y,H$O._vx=75*H$Y,H$O._height=H$Y*(12*H$O._view.length+3*H$Y)+4,H$O._fontSize=12*H$Y;for(var H$X=0;H$X<H$O._view.length;H$X++)H$O._view[H$X].x=4,H$O._view[H$X].y=H$X*H$O._fontSize+2*H$Y;H$O._canvas||((H$O._canvas=new H$Sf("2D")).size(H$O._width,H$O._height),(H$O._ctx=H$O._canvas.getContext("2d")).textBaseline="top",H$O._ctx.font=H$O._fontSize+"px Sans-serif",H$O._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+H$f+"px;top:"+H$K+"px;width:"+H$O._width/H$Y+"px;height:"+H$O._height/H$Y+"px;"),H$O._first=!0,H$O.loop(),H$O._first=!1,H$P.container.appendChild(H$O._canvas.source)},H$O.createUI=function(H$f,H$K){var H$Y=H$O._sp,H$X=H$P.pixelRatio;H$Y||(H$Y=new H$Zf,(H$O._leftText=new H$hf).pos(5,5),H$O._leftText.color="#ffffff",H$Y.addChild(H$O._leftText),(H$O._txt=new H$hf).pos(80*H$X,5),H$O._txt.color="#ffffff",H$Y.addChild(H$O._txt),H$O._sp=H$Y),H$Y.pos(H$f,H$K);for(var H$L="",H$H=0;H$H<H$O._view.length;H$H++){H$L+=H$O._view[H$H].title+"\n"}H$O._leftText.text=H$L;var H$E=170*H$X,H$d=H$X*(12*H$O._view.length+3*H$X)+4;H$O._txt.fontSize=H$O._fontSize*H$X,H$O._leftText.fontSize=H$O._fontSize*H$X,H$Y.size(H$E,H$d),H$Y.graphics.clear(),H$Y.graphics.setAlpha(.5),H$Y.graphics.drawRect(0,0,H$E,H$d,"#999999"),H$Y.graphics.setAlpha(1),H$O.loop()},H$O.enable=function(){H$a.timer.frameLoop(1,H$O,H$O.loop)},H$O.hide=function(){H$O._show=!1,H$a.timer.clear(H$O,H$O.loop),H$O._canvas&&H$P.removeElement(H$O._canvas.source)},H$O.clear=function(){H$O.trianglesFaces=H$O.drawCall=H$O.shaderCall=H$O.spriteCount=H$O.spriteRenderUseCacheCount=H$O.treeNodeCollision=H$O.treeSpriteCollision=H$O.canvasNormal=H$O.canvasBitmap=H$O.canvasReCache=0},H$O.loop=function(){H$O._count++;var H$f=H$P.now();if(!(H$f-H$O._timer<1e3)){var H$K=H$O._count;if(H$O.FPS=Math.round(1e3*H$K/(H$f-H$O._timer)),H$O._show){H$O.trianglesFaces=Math.round(H$O.trianglesFaces/H$K),H$O.spriteCount=H$O._useCanvas?(H$O.drawCall=Math.round(H$O.drawCall/H$K)-2,H$O.shaderCall=Math.round(H$O.shaderCall/H$K),Math.round(H$O.spriteCount/H$K)-1):(H$O.drawCall=Math.round(H$O.drawCall/H$K)-2,H$O.shaderCall=Math.round(H$O.shaderCall/H$K)-4,Math.round(H$O.spriteCount/H$K)-4),H$O.spriteRenderUseCacheCount=Math.round(H$O.spriteRenderUseCacheCount/H$K),H$O.canvasNormal=Math.round(H$O.canvasNormal/H$K),H$O.canvasBitmap=Math.round(H$O.canvasBitmap/H$K),H$O.canvasReCache=Math.ceil(H$O.canvasReCache/H$K),H$O.treeNodeCollision=Math.round(H$O.treeNodeCollision/H$K),H$O.treeSpriteCollision=Math.round(H$O.treeSpriteCollision/H$K);var H$Y=0<H$O.FPS?Math.floor(1e3/H$O.FPS).toString():" ";H$O._fpsStr=H$O.FPS+(H$O.renderSlow?" slow":"")+" "+H$Y,H$O._spriteStr=H$O.spriteCount+(H$O.spriteRenderUseCacheCount?"/"+H$O.spriteRenderUseCacheCount:""),H$O._canvasStr=H$O.canvasReCache+"/"+H$O.canvasNormal+"/"+H$O.canvasBitmap,H$O.currentMemorySize=H$q.systemResourceManager.memorySize,H$O._useCanvas?H$O.renderInfoPre():H$O.renderInfo(),H$O.clear()}H$O._count=0,H$O._timer=H$f}},H$O.renderInfoPre=function(){if(H$O._canvas){var H$f=H$O._ctx;H$f.clearRect(H$O._first?0:H$O._vx,0,H$O._width,H$O._height);for(var H$K=H$k.WebGL.mainContext,H$Y=0;H$Y<H$O._view.length;H$Y++){var H$X=H$O._view[H$Y];H$O._first&&(H$f.fillStyle="white",H$f.fillText(H$X.title,H$X.x,H$X.y,null,null,null)),H$f.fillStyle=H$X.color;var H$L=-1;if((H$X=H$O._view[H$Y]).varying){if(H$K)switch(H$X.varying){case 1:H$L=H$K.getParameter(H$K[H$X.value]);break;case 2:H$L=H$K.getExtension(H$X.value)}}else H$L=H$O[H$X.value];"M"==H$X.units&&(H$L=Math.floor(H$L/1048576*100)/100+" M"),"K"==H$X.units&&(H$L=Math.floor(H$L/1024*100)/100+" K"),"string"==H$X.units&&(H$L=H$L.match(/\d+\.?\d/i)),H$f.fillText(H$L+"",H$X.x+H$O._vx,H$X.y,null,null,null)}}},H$O.renderInfo=function(){for(var H$f="",H$K=H$k.WebGL.mainContext,H$Y=0;H$Y<H$O._view.length;H$Y++){var H$X=H$O._view[H$Y],H$L=-1;if(H$X.varying){if(H$K)switch(H$X.varying){case 1:H$L=H$K.getParameter(H$K[H$X.value]);break;case 2:H$L=H$K.getExtension(H$X.value)}}else H$L=H$O[H$X.value];"M"==H$X.units&&(H$L=Math.floor(H$L/1048576*100)/100+" M"),"K"==H$X.units&&(H$L=Math.floor(H$L/1024*100)/100+" K"),"string"==H$X.units&&(H$L=H$L.match(/\d+\.?\d/i)),H$f+=H$L+"\n"}H$O._txt.text=H$f},H$O.FPS=0,H$O.loopCount=0,H$O.shaderCall=0,H$O.drawCall=0,H$O.trianglesFaces=0,H$O.spriteCount=0,H$O.spriteRenderUseCacheCount=0,H$O.treeNodeCollision=0,H$O.treeSpriteCollision=0,H$O.canvasNormal=0,H$O.canvasBitmap=0,H$O.canvasReCache=0,H$O.renderSlow=!1,H$O.currentMemorySize=0,H$O._fpsStr=null,H$O._canvasStr=null,H$O._spriteStr=null,H$O._fpsData=[],H$O._timer=0,H$O._count=0,H$O._view=[],H$O._fontSize=12,H$O._txt=null,H$O._leftText=null,H$O._sp=null,H$O._show=!1,H$O._useCanvas=!1,H$O._canvas=null,H$O._ctx=null,H$O._first=!1,H$O._vx=NaN,H$O._width=0,H$O._height=100,H$O}(),H$u=(function(){function H$f(){this._strsToID={},this._idToStrs=[],this._length=0}H$U(H$f,"laya.utils.StringKey");var H$K=H$f.prototype;H$K.add=function(H$f){var H$K=this._strsToID[H$f];return null!=H$K?H$K:(this._idToStrs[this._length]=H$f,this._strsToID[H$f]=this._length++)},H$K.getID=function(H$f){var H$K=this._strsToID[H$f];return null==H$K?-1:H$K},H$K.getName=function(H$f){var H$K=this._idToStrs[H$f];return null==H$K?void 0:H$K}}(),function(){var H$i;function H$f(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}H$U(H$f,"laya.utils.Timer");var H$K=H$f.prototype;return H$K._init=function(){H$a.timer&&H$a.timer.frameLoop(1,this,this._update)},H$K._now=function(){return Date.now()},H$K._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var H$f=this.currFrame=this.currFrame+this.scale,H$K=this._now();this._delta=(H$K-this._lastTimer)*this.scale;var H$Y=this.currTimer=this.currTimer+this._delta;H$a.isDebug&&6e4<Math.abs(H$K-this._lastTimer)&&console.error("系统时间错误！"+(H$K-this._lastTimer)),this._lastTimer=H$K;var H$X=this._handlers;for(H$E=this._count=0,H$d=H$X.length;H$E<H$d;H$E++)if(null!==(H$O=H$X[H$E]).method){var H$L=H$O.userFrame?H$f:H$Y;if(H$L>=H$O.exeTime)if(H$O.repeat)if(H$O.jumpFrame)for(;H$L>=H$O.exeTime;)H$O.exeTime+=H$O.delay,H$O.run(!1);else H$O.exeTime+=H$O.delay,H$O.run(!1),H$L>H$O.exeTime&&(H$O.exeTime+=Math.ceil((H$L-H$O.exeTime)/H$O.delay)*H$O.delay);else H$O.run(!0)}else this._count++;(30<this._count||H$f%200==0)&&this._clearHandlers();for(var H$H=this._laters,H$E=0,H$d=H$H.length-1;H$E<=H$d;H$E++){var H$O=H$H[H$E];this._isIgnoreRecover(H$O)||(null!==H$O.method&&(delete this._map[H$O.key],H$O.run(!1)),this._recoverHandler(H$O)),H$E===H$d&&(H$d=H$H.length-1)}H$H.length=0}},H$K._clearHandlers=function(){for(var H$f=this._handlers,H$K=0,H$Y=H$f.length;H$K<H$Y;H$K++){var H$X=H$f[H$K];null!==H$X.method?this._temp.push(H$X):this._isIgnoreRecover(H$X)?this._temp.push(H$X):this._recoverHandler(H$X)}this._handlers=this._temp,this._temp=H$f,this._temp.length=0},H$K._recoverHandler=function(H$f){this._map[H$f.key]==H$f&&delete this._map[H$f.key],H$f.recover()},H$K._create=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){if(!H$Y)return H$L.apply(H$X,H$H),null;if(H$E){var H$O=this._getHandler(H$X,H$L);if(H$O)return H$O.repeat=H$K,H$O.userFrame=H$f,H$O.delay=H$Y,H$O.ignoreRecover=H$d,H$O.caller=H$X,H$O.method=H$L,H$O.args=H$H,H$O.exeTime=H$Y+(H$f?this.currFrame:this.currTimer+this._now()-this._lastTimer),H$O}return(H$O=H$i.create()).repeat=H$K,H$O.userFrame=H$f,H$O.delay=H$Y,H$O.ignoreRecover=H$d,H$O.caller=H$X,H$O.method=H$L,H$O.args=H$H,H$O.exeTime=H$Y+(H$f?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(H$O),this._handlers.push(H$O),H$O},H$K._indexHandler=function(H$f){var H$K=H$f.caller,H$Y=H$f.method,H$X=H$K?H$K.$_GID||(H$K.$_GID=H$g.getGID()):0,H$L=H$Y.$_TID||(H$Y.$_TID=this._mid++);H$f.key=H$X+"_"+H$L,this._map[H$f.key]=H$f},H$K.once=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$L&&(H$L=!0),this._create(!1,!1,H$f,H$K,H$Y,H$X,H$L,!1)},H$K.loop=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){void 0===H$L&&(H$L=!0),void 0===H$H&&(H$H=!1),void 0===H$E&&(H$E=!1);var H$d=this._create(!1,!0,H$f,H$K,H$Y,H$X,H$L,H$E);H$d&&(H$d.jumpFrame=H$H)},H$K.frameOnce=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$L&&(H$L=!0),this._create(!0,!1,H$f,H$K,H$Y,H$X,H$L,!1)},H$K.frameLoop=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$L&&(H$L=!0),void 0===H$H&&(H$H=!1),this._create(!0,!0,H$f,H$K,H$Y,H$X,H$L,H$H)},H$K.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+H$i._freeCount},H$K.clear=function(H$f,H$K){var H$Y=this._getHandler(H$f,H$K);return!(!H$Y||this._isIgnoreRecover(H$Y))&&(delete this._map[H$Y.key],H$Y.key=null,H$Y.clear(),!0)},H$K.clearAll=function(H$f){if(H$f)for(var H$K=0,H$Y=this._handlers.length;H$K<H$Y;H$K++){var H$X=this._handlers[H$K];H$X.caller===H$f&&(this._isIgnoreRecover(H$X)||(delete this._map[H$X.key],H$X.key=null,H$X.clear()))}},H$K._getHandler=function(H$f,H$K){var H$Y=H$f?H$f.$_GID||(H$f.$_GID=H$g.getGID()):0,H$X=H$K.$_TID||(H$K.$_TID=this._mid++);return this._map[H$Y+"_"+H$X]},H$K._isIgnoreRecover=function(H$f){if(H$f.ignoreRecover||H$f.caller&&"IgnoreRecover"==H$f.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var H$K="";try{arguments.propertyIsEnumerable.caller}catch(H$f){H$K=H$f.stack}H$a.recordError("报错：核心定时器销毁忽略  "+H$K)}return!0}return!1},H$K.hasHandler=function(H$f,H$K){return this._map[H$f.$_GID+"_"+H$K.$_TID]},H$K.callLater=function(H$f,H$K,H$Y){if(null==this._getHandler(H$f,H$K)){var H$X=H$i.create();H$X.caller=H$f,H$X.method=H$K,H$X.args=H$Y,this._indexHandler(H$X),this._laters.push(H$X)}},H$K.runCallLater=function(H$f,H$K){var H$Y=this._getHandler(H$f,H$K);H$Y&&null!=H$Y.method&&(this._isIgnoreRecover(H$Y)||(delete this._map[H$Y.key],H$Y.run(!0)))},H$K.runTimer=function(H$f,H$K){this.runCallLater(H$f,H$K)},H$B(0,H$K,"delta",function(){return this._delta}),H$f.__init$=function(){H$i=function(){function H$K(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}H$U(H$K,"");var H$f=H$K.prototype;return H$f.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},H$f.recover=function(){this.clear(),this.args=H$K._freeHandler,H$K._freeHandler=this,H$K._freeCount++},H$f.run=function(H$f){var H$K=this.caller;if(H$K&&H$K.destroyed)return this.clear();var H$Y=this.method,H$X=this.args;H$f&&this.clear(),null!=H$Y&&(H$X?H$Y.apply(H$K,H$X):H$Y.call(H$K))},H$K._freeHandler=null,H$K._freeCount=0,H$K.create=function(){var H$f=H$K._freeHandler;return H$f?(H$K._freeHandler=H$f.args,--H$K._freeCount,H$f.args=null,H$f):new H$K},H$K}()},H$f}()),H$D=function(){function H$Z(){this.gid=0}H$U(H$Z,"laya.utils.Tween");var H$f=H$Z.prototype;return H$f.to=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){return void 0===H$H&&(H$H=0),void 0===H$E&&(H$E=!1),this._create(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,!0,!1,!0)},H$f.from=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){return void 0===H$H&&(H$H=0),void 0===H$E&&(H$E=!1),this._create(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,!1,!1,!0)},H$f._create=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){if(!H$f)throw new Error("Tween:target is null");this._target=H$f,this._duration=H$Y,this._ease=H$X||H$K.ease||H$Z.easeNone,this._complete=H$L||H$K.complete,this._delay=H$H,this._props=[],this._usedTimer=0,this._startTimer=H$P.now(),this._usedPool=H$O,this._delayParam=null,this.update=H$K.update;var H$U=H$f.$_GID||(H$f.$_GID=H$g.getGID());return H$Z.tweenMap[H$U]?(H$E&&H$Z.clearTween(H$f),H$Z.tweenMap[H$U].push(this)):H$Z.tweenMap[H$U]=[this],H$i?H$H<=0?this.firstStart(H$f,H$K,H$d):(this._delayParam=[H$f,H$K,H$d],H$a.scaleTimer.once(H$H,this,this.firstStart,this._delayParam)):this._initProps(H$f,H$K,H$d),this},H$f.firstStart=function(H$f,H$K,H$Y){this._delayParam=null,H$f.destroyed?this.clear():(this._initProps(H$f,H$K,H$Y),this._beginLoop())},H$f._initProps=function(H$f,H$K,H$Y){for(var H$X in H$K)if("number"==typeof H$f[H$X]){var H$L=H$Y?H$f[H$X]:H$K[H$X],H$H=H$Y?H$K[H$X]:H$f[H$X];this._props.push([H$X,H$L,H$H-H$L]),H$Y||(H$f[H$X]=H$L)}},H$f._beginLoop=function(){H$a.scaleTimer.frameLoop(1,this,this._doEase)},H$f._doEase=function(){this._updateEase(H$P.now())},H$f._updateEase=function(H$f){var H$K=this._target;if(H$K){if(H$K.destroyed)return H$Z.clearTween(H$K);var H$Y=this._usedTimer=H$f-this._startTimer-this._delay;if(!(H$Y<0)){if(H$Y>=this._duration)return this.complete();for(var H$X=0<H$Y?this._ease(H$Y,0,1,this._duration):0,H$L=this._props,H$H=0,H$E=H$L.length;H$H<H$E;H$H++){var H$d=H$L[H$H];H$K[H$d[0]]=H$d[1]+H$X*H$d[2]}this.update&&this.update.run()}}},H$f.complete=function(){if(this._target){H$a.scaleTimer.runTimer(this,this.firstStart);for(var H$f=this._target,H$K=this._props,H$Y=this._complete,H$X=0,H$L=H$K.length;H$X<H$L;H$X++){var H$H=H$K[H$X];H$f[H$H[0]]=H$H[1]+H$H[2]}this.update&&this.update.run(),this.clear(),H$Y&&H$Y.run()}},H$f.pause=function(){H$a.scaleTimer.clear(this,this._beginLoop),H$a.scaleTimer.clear(this,this._doEase),H$a.scaleTimer.clear(this,this.firstStart);var H$f;(H$f=H$P.now()-this._startTimer-this._delay)<0&&(this._usedTimer=H$f)},H$f.setStartTime=function(H$f){this._startTimer=H$f},H$f.clear=function(){this._target&&(this._remove(),this._clear())},H$f._clear=function(){this.pause(),H$a.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,H$c.recover("tween",this))},H$f.recover=function(){this._usedPool=!0,this._clear()},H$f._remove=function(){var H$f=H$Z.tweenMap[this._target.$_GID];if(H$f)for(var H$K=0,H$Y=H$f.length;H$K<H$Y;H$K++)if(H$f[H$K]===this){H$f.splice(H$K,1);break}},H$f.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=H$P.now(),this._delayParam)H$a.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var H$f=this._props,H$K=0,H$Y=H$f.length;H$K<H$Y;H$K++){var H$X=H$f[H$K];this._target[H$X[0]]=H$X[1]}H$a.scaleTimer.once(this._delay,this,this._beginLoop)}},H$f.resume=function(){this._usedTimer>=this._duration||(this._startTimer=H$P.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?H$a.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},H$B(0,H$f,"progress",null,function(H$f){var H$K=H$f*this._duration;this._startTimer=H$P.now()-this._delay-H$K}),H$Z.to=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){return void 0===H$H&&(H$H=0),void 0===H$E&&(H$E=!1),void 0===H$d&&(H$d=!0),H$c.getItemByClass("tween",H$Z)._create(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,!0,H$d,!0)},H$Z.from=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){return void 0===H$H&&(H$H=0),void 0===H$E&&(H$E=!1),void 0===H$d&&(H$d=!0),H$c.getItemByClass("tween",H$Z)._create(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,!1,H$d,!0)},H$Z.clearAll=function(H$f){if(H$f&&H$f.$_GID){var H$K=H$Z.tweenMap[H$f.$_GID];if(H$K){for(var H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++)H$K[H$Y]._clear();H$K.length=0}}},H$Z.clear=function(H$f){H$f.clear()},H$Z.clearTween=function(H$f){H$Z.clearAll(H$f)},H$Z.easeNone=function(H$f,H$K,H$Y,H$X){return H$Y*H$f/H$X+H$K},H$Z.tweenMap={},H$Z}(),H$g=function(){function H$d(){}return H$U(H$d,"laya.utils.Utils"),H$d.toRadian=function(H$f){return H$f*H$d._pi2},H$d.toAngle=function(H$f){return H$f*H$d._pi},H$d.toHexColor=function(H$f){if(H$f<0||isNaN(H$f))return null;for(var H$K=H$f.toString(16);H$K.length<6;)H$K="0"+H$K;return"#"+H$K},H$d.getGID=function(){return H$d._gid++},H$d.concatArray=function(H$f,H$K){if(!H$K)return H$f;if(!H$f)return H$K;var H$Y=0,H$X=H$K.length;for(H$Y=0;H$Y<H$X;H$Y++)H$f.push(H$K[H$Y]);return H$f},H$d.clearArray=function(H$f){return H$f&&(H$f.length=0),H$f},H$d.copyArray=function(H$f,H$K){if(H$f||(H$f=[]),!H$K)return H$f;H$f.length=H$K.length;var H$Y=0,H$X=H$K.length;for(H$Y=0;H$Y<H$X;H$Y++)H$f[H$Y]=H$K[H$Y];return H$f},H$d.getGlobalRecByPoints=function(H$f,H$K,H$Y,H$X,H$L){var H$H,H$E;return H$H=new H$I(H$K,H$Y),H$H=H$f.localToGlobal(H$H),H$E=new H$I(H$X,H$L),H$E=H$f.localToGlobal(H$E),H$n._getWrapRec([H$H.x,H$H.y,H$E.x,H$E.y])},H$d.getGlobalPosAndScale=function(H$f){return H$d.getGlobalRecByPoints(H$f,0,0,1,1)},H$d.bind=function(H$f,H$K){return H$f.bind(H$K)},H$d.measureText=function(H$f,H$K){return H$R.measureText(H$f,H$K)},H$d.contextMeasureText=function(H$f){var H$K=H$P.context.measureText(H$f);return H$K||(H$K={width:16,height:16}),H$K},H$d.updateOrder=function(H$f){if(!H$f||H$f.length<2)return!1;for(var H$K,H$Y=1,H$X=0,H$L=H$f.length,H$H=NaN;H$Y<H$L;){for(H$K=H$f[H$X=H$Y],H$H=H$f[H$X]._zOrder;-1<--H$X&&H$f[H$X]._zOrder>H$H;)H$f[H$X+1]=H$f[H$X];H$f[H$X+1]=H$K,H$Y++}var H$E=H$K.parent.conchModel;if(H$E)if(null!=H$E.updateZOrder)H$E.updateZOrder();else{for(H$Y=0;H$Y<H$L;H$Y++)H$E.removeChild(H$f[H$Y].conchModel);for(H$Y=0;H$Y<H$L;H$Y++)H$E.addChildAt(H$f[H$Y].conchModel,H$Y)}return!0},H$d.transPointList=function(H$f,H$K,H$Y){var H$X=0,H$L=H$f.length;for(H$X=0;H$X<H$L;H$X+=2)H$f[H$X]+=H$K,H$f[H$X+1]+=H$Y},H$d.parseInt=function(H$f,H$K){void 0===H$K&&(H$K=0);var H$Y=H$P.window.parseInt(H$f,H$K);return isNaN(H$Y)?0:H$Y},H$d.getFileExtension=function(H$f){H$d._extReg.lastIndex=H$f.lastIndexOf(".");var H$K=H$d._extReg.exec(H$f);return H$K&&1<H$K.length?H$K[1].toLowerCase():null},H$d.getTransformRelativeToWindow=function(H$f,H$K,H$Y){var H$X=H$a.stage,H$L=laya.utils.Utils.getGlobalPosAndScale(H$f),H$H=H$X._canvasTransform.clone(),H$E=H$H.tx,H$d=H$H.ty;H$H.rotate(-Math.PI/180*H$a.stage.canvasDegree),H$H.scale(H$a.stage.clientScaleX,H$a.stage.clientScaleY);var H$O=H$a.stage.canvasDegree%180!=0,H$i=NaN,H$U=NaN;H$O?(H$i=H$Y+H$L.y,H$U=H$K+H$L.x,H$i*=H$H.d,H$U*=H$H.a,90==H$a.stage.canvasDegree?(H$i=H$E-H$i,H$U+=H$d):(H$i+=H$E,H$U=H$d-H$U)):(H$i=H$K+H$L.x,H$U=H$Y+H$L.y,H$i*=H$H.a,H$U*=H$H.d,H$i+=H$E,H$U+=H$d);var H$Z=NaN,H$y=NaN;return H$y=H$O?(H$Z=H$H.d*H$L.height,H$H.a*H$L.width):(H$Z=H$H.a*H$L.width,H$H.d*H$L.height),{x:H$i,y:H$U,scaleX:H$Z,scaleY:H$y}},H$d.fitDOMElementInArea=function(H$f,H$K,H$Y,H$X,H$L,H$H){H$f._fitLayaAirInitialized||(H$f._fitLayaAirInitialized=!0,H$f.style.transformOrigin=H$f.style.webKittransformOrigin="left top",H$f.style.position="absolute");var H$E=H$d.getTransformRelativeToWindow(H$K,H$Y,H$X);H$f.style.transform=H$f.style.webkitTransform="scale("+H$E.scaleX+","+H$E.scaleY+") rotate("+H$a.stage.canvasDegree+"deg)",H$f.style.width=H$L+"px",H$f.style.height=H$H+"px",H$f.style.left=H$E.x+"px",H$f.style.top=H$E.y+"px"},H$d.isOkTextureList=function(H$f){if(!H$f)return!1;var H$K,H$Y=0,H$X=H$f.length;for(H$Y=0;H$Y<H$X;H$Y++)if(!(H$K=H$f[H$Y])||!H$K.source)return!1;return!0},H$d.isOKCmdList=function(H$f){if(!H$f)return!1;var H$K,H$Y,H$X=0,H$L=H$f.length,H$H=H$k._context;for(H$X=0;H$X<H$L;H$X++)switch((H$K=H$f[H$X]).callee){case H$H._drawTexture:case H$H._fillTexture:case H$H._drawTextureWithTransform:if(!(H$Y=H$K[0])||!H$Y.source)return!1}return!0},H$d._gid=1,H$d._pi=180/Math.PI,H$d._pi2=Math.PI/180,H$d._extReg=/\.(\w+)\??/g,H$d.parseXMLFromString=function(H$f){var H$K;if(H$f=H$f.replace(/>\s+</g,"><"),-1<(H$K=(new DOMParser).parseFromString(H$f,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(H$K.firstChild.firstChild.textContent);return H$K},H$d}(),H$N=function(){function H$f(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],H$k.isWebGL&&H$J.regCacheByFunction(H$g.bind(this.startDispose,this),H$g.bind(this.getCacheList,this))}H$U(H$f,"laya.utils.VectorGraphManager");var H$K=H$f.prototype;return H$K.getId=function(){return this._id++},H$K.addShape=function(H$f,H$K){this.shapeDic[H$f]=H$K,this.useDic[H$f]||(this.useDic[H$f]=!0)},H$K.addLine=function(H$f,H$K){this.shapeLineDic[H$f]=H$K,this.shapeLineDic[H$f]||(this.shapeLineDic[H$f]=!0)},H$K.getShape=function(H$f){this._checkKey&&null!=this.useDic[H$f]&&(this.useDic[H$f]=!0)},H$K.deleteShape=function(H$f){this.shapeDic[H$f]&&(this.shapeDic[H$f]=null,delete this.shapeDic[H$f]),this.shapeLineDic[H$f]&&(this.shapeLineDic[H$f]=null,delete this.shapeLineDic[H$f]),null!=this.useDic[H$f]&&delete this.useDic[H$f]},H$K.getCacheList=function(){var H$f,H$K=[];for(H$f in this.shapeDic)H$K.push(this.shapeDic[H$f]);for(H$f in this.shapeLineDic)H$K.push(this.shapeLineDic[H$f]);return H$K},H$K.startDispose=function(H$f){var H$K;for(H$K in this.useDic)this.useDic[H$K]=!1;this._checkKey=!0},H$K.endDispose=function(){if(this._checkKey){var H$f;for(H$f in this.useDic)this.useDic[H$f]||this.deleteShape(H$f);this._checkKey=!1}},H$f.getInstance=function(){return H$f.instance=H$f.instance||new H$f},H$f.instance=null,H$f}(),H$o=function(){function H$X(){this._obj=null,this._obj=H$X.supportWeakMap?new H$P.window.WeakMap:{},H$X.supportWeakMap||H$X._maps.push(this)}H$U(H$X,"laya.utils.WeakObject");var H$f=H$X.prototype;return H$f.set=function(H$f,H$K){if(null!=H$f)if(H$X.supportWeakMap){var H$Y=H$f;"string"!=typeof H$f&&"number"!=typeof H$f||(H$Y=H$X._keys[H$f])||(H$Y=H$X._keys[H$f]={k:H$f}),this._obj.set(H$Y,H$K)}else"string"==typeof H$f||"number"==typeof H$f?this._obj[H$f]=H$K:(H$f.$_GID||(H$f.$_GID=H$g.getGID()),this._obj[H$f.$_GID]=H$K)},H$f.get=function(H$f){if(null==H$f)return null;if(H$X.supportWeakMap){var H$K="string"==typeof H$f||"number"==typeof H$f?H$X._keys[H$f]:H$f;return H$K?this._obj.get(H$K):null}return"string"==typeof H$f||"number"==typeof H$f?this._obj[H$f]:this._obj[H$f.$_GID]},H$f.del=function(H$f){if(null!=H$f)if(H$X.supportWeakMap){var H$K="string"==typeof H$f||"number"==typeof H$f?H$X._keys[H$f]:H$f;if(!H$K)return;this._obj.delete(H$K)}else"string"==typeof H$f||"number"==typeof H$f?delete this._obj[H$f]:delete this._obj[this._obj.$_GID]},H$f.has=function(H$f){if(null==H$f)return!1;if(H$X.supportWeakMap){var H$K="string"==typeof H$f||"number"==typeof H$f?H$X._keys[H$f]:H$f;return this._obj.has(H$K)}return"string"==typeof H$f||"number"==typeof H$f?null!=this._obj[H$f]:null!=this._obj[this._obj.$_GID]},H$X.__init__=function(){(H$X.supportWeakMap=null!=H$P.window.WeakMap)||H$a.timer.loop(H$X.delInterval,null,H$X.clearCache)},H$X.clearCache=function(){for(var H$f=0,H$K=H$X._maps.length;H$f<H$K;H$f++){H$X._maps[H$f]._obj={}}},H$X.supportWeakMap=!1,H$X.delInterval=3e5,H$X._keys={},H$X._maps=[],H$O(H$X,["I",function(){return this.I=new H$X}]),H$X}(),H$F=function(){function H$f(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}H$U(H$f,"laya.utils.WordText");var H$K=H$f.prototype;return H$K.setText=function(H$f){this.changed=!0,this._text=H$f},H$K.toString=function(){return this._text},H$K.charCodeAt=function(H$f){return this._text?this._text.charCodeAt(H$f):NaN},H$K.charAt=function(H$f){return this._text?this._text.charAt(H$f):null},H$B(0,H$K,"length",function(){return this._text?this._text.length:0}),H$f}(),H$ff=function(H$f){function H$E(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,H$E.__super.call(this),this._childs=H$E.ARRAY_EMPTY,this._$P=H$E.PROP_EMPTY,this.timer=H$a.scaleTimer,this.conchModel=H$k.isConchNode?this.createConchModel():null}H$U(H$E,"laya.display.Node",H$i);var H$K=H$E.prototype;return H$K._setBit=function(H$f,H$K){1==H$f&&(this._getBit(H$f)!=H$K&&this._updateDisplayedInstage());H$K?this._bits|=H$f:this._bits&=~H$f},H$K._getBit=function(H$f){return 0!=(this._bits&H$f)},H$K._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},H$K._setUpNoticeType=function(H$f){var H$K=this;for(H$K._setBit(H$f,!0),H$K=H$K.parent;H$K;){if(H$K._getBit(H$f))return;H$K._setBit(H$f,!0),H$K=H$K.parent}},H$K.on=function(H$f,H$K,H$Y,H$X){return"display"!==H$f&&"undisplay"!==H$f||this._getBit(1)||this._setUpNoticeType(1),this._createListener(H$f,H$K,H$Y,H$X,!1)},H$K.once=function(H$f,H$K,H$Y,H$X){return"display"!==H$f&&"undisplay"!==H$f||this._getBit(1)||this._setUpNoticeType(1),this._createListener(H$f,H$K,H$Y,H$X,!0)},H$K.createConchModel=function(){return null},H$K.destroy=function(H$f){void 0===H$f&&(H$f=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(H$f?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},H$K.destroyChildren=function(){if(this._childs)for(var H$f=this._childs.length-1;-1<H$f;H$f--)this._childs[H$f].destroy(!0)},H$K.addChild=function(H$f){if(!H$f||this.destroyed||H$f===this)return H$f;if(H$f.zOrder&&this._set$P("hasZorder",!0),H$f._parent===this){var H$K=this.getChildIndex(H$f);H$K!==this._childs.length-1&&(this._childs.splice(H$K,1),this._childs.push(H$f),this.conchModel&&(this.conchModel.removeChild(H$f.conchModel),this.conchModel.addChildAt(H$f.conchModel,this._childs.length-1)),this._childChanged())}else H$f.parent&&H$f.parent.removeChild(H$f),this._childs===H$E.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H$f),this.conchModel&&this.conchModel.addChildAt(H$f.conchModel,this._childs.length-1),(H$f.parent=this)._childChanged();return H$f},H$K.addChildren=function(H$f){for(var H$K=arguments,H$Y=0,H$X=H$K.length;H$Y<H$X;)this.addChild(H$K[H$Y++])},H$K.addChildAt=function(H$f,H$K){if(!H$f||this.destroyed||H$f===this)return H$f;if(H$f.zOrder&&this._set$P("hasZorder",!0),0<=H$K&&H$K<=this._childs.length){if(H$f._parent===this){var H$Y=this.getChildIndex(H$f);this._childs.splice(H$Y,1),this._childs.splice(H$K,0,H$f),this.conchModel&&(this.conchModel.removeChild(H$f.conchModel),this.conchModel.addChildAt(H$f.conchModel,H$K)),this._childChanged()}else H$f.parent&&H$f.parent.removeChild(H$f),this._childs===H$E.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H$K,0,H$f),this.conchModel&&this.conchModel.addChildAt(H$f.conchModel,H$K),H$f.parent=this;return H$f}throw new Error("appendChildAt:The index is out of bounds")},H$K.getChildIndex=function(H$f){return this._childs.indexOf(H$f)},H$K.getChildByName=function(H$f){var H$K=this._childs;if(H$K)for(var H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++){var H$L=H$K[H$Y];if(H$L.name===H$f)return H$L}return null},H$K._get$P=function(H$f){return this._$P[H$f]},H$K._set$P=function(H$f,H$K){return this.destroyed||(this._$P===H$E.PROP_EMPTY&&(this._$P={}),this._$P[H$f]=H$K),H$K},H$K.getChildAt=function(H$f){return this._childs[H$f]},H$K.setChildIndex=function(H$f,H$K){var H$Y=this._childs;if(H$K<0||H$K>=H$Y.length)throw new Error("setChildIndex:The index is out of bounds.");var H$X=this.getChildIndex(H$f);if(H$X<0)throw new Error("setChildIndex:node is must child of this object.");return H$Y.splice(H$X,1),H$Y.splice(H$K,0,H$f),this.conchModel&&(this.conchModel.removeChild(H$f.conchModel),this.conchModel.addChildAt(H$f.conchModel,H$K)),this._childChanged(),H$f},H$K._childChanged=function(H$f){},H$K.removeChild=function(H$f){if(!this._childs)return H$f;var H$K=this._childs.indexOf(H$f);return this.removeChildAt(H$K)},H$K.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},H$K.removeChildByName=function(H$f){var H$K=this.getChildByName(H$f);return H$K&&this.removeChild(H$K),H$K},H$K.removeChildAt=function(H$f){var H$K=this.getChildAt(H$f);if(H$K){for(var H$Y=this._childs.length-1,H$X=H$f;H$X<H$Y;++H$X)this._childs[H$X]=this._childs[H$X+1];this._childs.length=H$Y,this.conchModel&&this.conchModel.removeChild(H$K.conchModel),H$K.parent=null}return H$K},H$K.removeChildren=function(H$f,H$K){if(void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=2147483647),this._childs&&0<this._childs.length){var H$Y=this._childs;if(0===H$f&&H$H<=H$K){var H$X=H$Y;this._childs=H$E.ARRAY_EMPTY}else H$X=H$Y.splice(H$f,H$K-H$f);for(var H$L=0,H$H=H$X.length;H$L<H$H;H$L++)H$X[H$L].parent=null,this.conchModel&&this.conchModel.removeChild(H$X[H$L].conchModel)}return this},H$K.replaceChild=function(H$f,H$K){var H$Y=this._childs.indexOf(H$K);return-1<H$Y?(this._childs.splice(H$Y,1,H$f),this.conchModel&&(this.conchModel.removeChild(H$K.conchModel),this.conchModel.addChildAt(H$f.conchModel,H$Y)),H$K.parent=null,H$f.parent=this,H$f):null},H$K._updateDisplayedInstage=function(){var H$f;H$f=this;var H$K=H$a.stage;for(this._displayedInStage=!1;H$f;){if(H$f._getBit(1)){this._displayedInStage=H$f._displayedInStage;break}if(H$f==H$K||H$f._displayedInStage){this._displayedInStage=!0;break}H$f=H$f.parent}},H$K._setDisplay=function(H$f){this._displayedInStage!==H$f&&((this._displayedInStage=H$f)?this.event("display"):this.event("undisplay"))},H$K._displayChild=function(H$f,H$K){var H$Y=H$f._childs;if(H$Y)for(var H$X=0;H$X<H$Y.length;H$X++){var H$L=H$Y[H$X];H$L&&H$L._getBit(1)&&(0<H$L._childs.length?this._displayChild(H$L,H$K):H$L._setDisplay(H$K))}H$f._setDisplay(H$K)},H$K.contains=function(H$f){if(H$f===this)return!0;for(;H$f;){if(H$f.parent===this)return!0;H$f=H$f.parent}return!1},H$K.timerLoop=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$L&&(H$L=!0),void 0===H$H&&(H$H=!1),this.timer.loop(H$f,H$K,H$Y,H$X,H$L,H$H)},H$K.timerOnce=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$L&&(H$L=!0),this.timer._create(!1,!1,H$f,H$K,H$Y,H$X,H$L)},H$K.frameLoop=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$L&&(H$L=!0),this.timer._create(!0,!0,H$f,H$K,H$Y,H$X,H$L)},H$K.frameOnce=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$L&&(H$L=!0),this.timer._create(!0,!1,H$f,H$K,H$Y,H$X,H$L)},H$K.clearTimer=function(H$f,H$K){this.timer.clear(H$f,H$K)},H$B(0,H$K,"numChildren",function(){return this._childs.length}),H$B(0,H$K,"destroyed",function(){return this._destroyed}),H$B(0,H$K,"parent",function(){return this._parent},function(H$f){this._parent!==H$f&&(H$f?(this._parent=H$f,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),H$f.displayedInStage&&this._displayChild(this,!0)),H$f._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=H$f))}),H$B(0,H$K,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),H$E.ARRAY_EMPTY=[],H$E.PROP_EMPTY={},H$E.NOTICE_DISPLAY=1,H$E.MOUSEENABLE=2,H$E}(),H$Kf=function(H$f){function H$y(H$f){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,H$y.__super.call(this),this._padding=H$y._PADDING,this._spacing=H$y._SPACING,this._aligns=H$y._ALIGNS,this._font=H$l.EMPTY,this._ower=H$f}H$U(H$y,"laya.display.css.CSSStyle",H$f);var H$K=H$y.prototype;return H$K.destroy=function(){this._ower=null,this._font=null,this._rect=null},H$K.inherit=function(H$f){this._font=H$f._font,this._spacing=H$f._spacing===H$y._SPACING?H$y._SPACING:H$f._spacing.slice(),this.lineHeight=H$f.lineHeight},H$K._widthAuto=function(){return 0!=(262144&this._type)},H$K.widthed=function(H$f){return 0!=(8&this._type)},H$K._calculation=function(H$f,H$K){if(H$K.indexOf("%")<0)return!1;var H$X=this._ower,H$L=H$X.parent,H$H=this._rect;function H$E(H$f,H$K,H$Y){return H$f*H$Y[0]+H$K*H$Y[1]+H$Y[2]}function H$Y(H$f){var H$K=H$L.width,H$Y=H$X.width;H$H.width&&(H$X.width=H$E(H$K,H$Y,H$H.width)),H$H.height&&(H$X.height=H$E(H$K,H$Y,H$H.height)),H$H.left&&(H$X.x=H$E(H$K,H$Y,H$H.left)),H$H.top&&(H$X.y=H$E(H$K,H$Y,H$H.top))}null===H$H&&(H$L._getCSSStyle()._type|=524288,H$L.on("resize",this,H$Y),this._rect=H$H={input:{}});var H$d=H$K.split(" ");return H$d[0]=parseFloat(H$d[0])/100,1==H$d.length?H$d[1]=H$d[2]=0:(H$d[1]=parseFloat(H$d[1])/100,H$d[2]=parseFloat(H$d[2])),H$H[H$f]=H$d,H$H.input[H$f]=H$K,H$Y(),!0},H$K.heighted=function(H$f){return 0!=(8192&this._type)},H$K.size=function(H$f,H$K){var H$Y=this._ower,H$X=!1;-1!==H$f&&H$f!=this._ower.width&&(this._type|=8,this._ower.width=H$f,H$X=!0),-1!==H$K&&H$K!=this._ower.height&&(this._type|=8192,this._ower.height=H$K,H$X=!0),H$X&&(H$Y._layoutLater(),524288&this._type&&H$Y.event("resize",this))},H$K._getAlign=function(){return this._aligns[0]},H$K._getValign=function(){return this._aligns[1]},H$K._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},H$K._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new H$l(this._font))},H$K.render=function(H$f,H$K,H$Y,H$X){var H$L=H$f.width,H$H=H$f.height;H$Y-=H$f.pivotX,H$X-=H$f.pivotY,this._bgground&&null!=this._bgground.color&&H$K.ctx.fillRect(H$Y,H$X,H$L,H$H,this._bgground.color),this._border&&this._border.color&&H$K.drawRect(H$Y,H$X,H$L,H$H,this._border.color.strColor,this._border.size)},H$K.getCSSStyle=function(){return this},H$K.cssText=function(H$f){this.attrs(H$y.parseOneCSS(H$f,";"))},H$K.attrs=function(H$f){if(H$f)for(var H$K=0,H$Y=H$f.length;H$K<H$Y;H$K++){var H$X=H$f[H$K];this[H$X[0]]=H$X[1]}},H$K.setTransform=function(H$f){"none"===H$f?this._tf=H$d._TF_EMPTY:this.attrs(H$y.parseOneCSS(H$f,","))},H$K.translate=function(H$f,H$K){this._tf===H$d._TF_EMPTY&&(this._tf=new H$L),this._tf.translateX=H$f,this._tf.translateY=H$K},H$K.scale=function(H$f,H$K){this._tf===H$d._TF_EMPTY&&(this._tf=new H$L),this._tf.scaleX=H$f,this._tf.scaleY=H$K},H$K._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},H$B(0,H$K,"block",H$f.prototype._$get_block,function(H$f){H$f?this._type|=1:this._type&=-2}),H$B(0,H$K,"valign",function(){return H$y._valigndef[this._aligns[1]]},function(H$f){this._aligns===H$y._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=H$y._valigndef[H$f]}),H$B(0,H$K,"height",null,function(H$f){if(this._type|=8192,"string"==typeof H$f){if(this._calculation("height",H$f))return;H$f=parseInt(H$f)}this.size(-1,H$f)}),H$B(0,H$K,"width",null,function(H$f){if(this._type|=8,"string"==typeof H$f){var H$K=H$f.indexOf("auto");if(0<=H$K&&(this._type|=262144,H$f=H$f.substr(0,H$K)),this._calculation("width",H$f))return;H$f=parseInt(H$f)}this.size(H$f,-1)}),H$B(0,H$K,"fontWeight",function(){return this._font.weight},function(H$f){this._createFont().weight=H$f}),H$B(0,H$K,"left",null,function(H$f){var H$K=this._ower;if("string"==typeof H$f){if("center"===H$f?H$f="50% -50% 0":"right"===H$f&&(H$f="100% -100% 0"),this._calculation("left",H$f))return;H$f=parseInt(H$f)}H$K.x=H$f}),H$B(0,H$K,"_translate",null,function(H$f){this.translate(H$f[0],H$f[1])}),H$B(0,H$K,"absolute",function(){return 0!=(4&this._type)}),H$B(0,H$K,"top",null,function(H$f){var H$K=this._ower;if("string"==typeof H$f){if("middle"===H$f?H$f="50% -50% 0":"bottom"===H$f&&(H$f="100% -100% 0"),this._calculation("top",H$f))return;H$f=parseInt(H$f)}H$K.y=H$f}),H$B(0,H$K,"align",function(){return H$y._aligndef[this._aligns[0]]},function(H$f){this._aligns===H$y._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=H$y._aligndef[H$f]}),H$B(0,H$K,"bold",function(){return this._font.bold},function(H$f){this._createFont().bold=H$f}),H$B(0,H$K,"padding",function(){return this._padding},function(H$f){this._padding=H$f}),H$B(0,H$K,"leading",function(){return this._spacing[1]},function(H$f){"string"==typeof H$f&&(H$f=parseInt(H$f+"")),this._spacing===H$y._SPACING&&(this._spacing=[0,0]),this._spacing[1]=H$f}),H$B(0,H$K,"lineElement",function(){return 0!=(65536&this._type)},function(H$f){H$f?this._type|=65536:this._type&=-65537}),H$B(0,H$K,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(H$f){this.lineElement=!1,"right"===H$f?this._type|=32768:this._type&=-32769}),H$B(0,H$K,"textDecoration",function(){return this._font.decoration},function(H$f){this._createFont().decoration=H$f}),H$B(0,H$K,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(H$f){"nowrap"===H$f&&(this._type|=131072),"none"===H$f&&(this._type&=-131073)}),H$B(0,H$K,"background",null,function(H$f){H$f?(this._bgground||(this._bgground={}),this._bgground.color=H$f,this._ower.conchModel&&this._ower.conchModel.bgColor(H$f),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),H$B(0,H$K,"wordWrap",function(){return 0==(131072&this._type)},function(H$f){H$f?this._type&=-131073:this._type|=131072}),H$B(0,H$K,"color",function(){return this._font.color},function(H$f){this._createFont().color=H$f}),H$B(0,H$K,"password",function(){return this._font.password},function(H$f){this._createFont().password=H$f}),H$B(0,H$K,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(H$f){"none"===H$f?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=H$f),this._ower.conchModel&&this._ower.conchModel.bgColor(H$f),this._ower._renderType|=256}),H$B(0,H$K,"font",function(){return this._font.toString()},function(H$f){this._createFont().set(H$f)}),H$B(0,H$K,"weight",null,function(H$f){this._createFont().weight=H$f}),H$B(0,H$K,"letterSpacing",function(){return this._spacing[0]},function(H$f){"string"==typeof H$f&&(H$f=parseInt(H$f+"")),this._spacing===H$y._SPACING&&(this._spacing=[0,0]),this._spacing[0]=H$f}),H$B(0,H$K,"fontSize",function(){return this._font.size},function(H$f){this._createFont().size=H$f}),H$B(0,H$K,"italic",function(){return this._font.italic},function(H$f){this._createFont().italic=H$f}),H$B(0,H$K,"fontFamily",function(){return this._font.family},function(H$f){this._createFont().family=H$f}),H$B(0,H$K,"stroke",function(){return this._font.stroke[0]},function(H$f){this._createFont().stroke===H$l._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=H$f}),H$B(0,H$K,"strokeColor",function(){return this._font.stroke[1]},function(H$f){this._createFont().stroke===H$l._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=H$f}),H$B(0,H$K,"border",function(){return this._border?this._border.value:""},function(H$f){if("none"!=H$f){this._border||(this._border={});var H$K=(this._border.value=H$f).split(" ");if(this._border.color=H$w.create(H$K[H$K.length-1]),1==H$K.length)return this._border.size=1,void(this._border.type="solid");var H$Y=0;0<H$K[0].indexOf("px")?(this._border.size=parseInt(H$K[0]),H$Y++):this._border.size=1,this._border.type=H$K[H$Y],this._ower._renderType|=256}else this._border=null}),H$B(0,H$K,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(H$f){H$f?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==H$f?null:H$w.create(H$f),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),H$B(0,H$K,"position",function(){return 4&this._type?"absolute":""},function(H$f){"absolute"==H$f?this._type|=4:this._type&=-5}),H$B(0,H$K,"display",null,function(H$f){switch(H$f){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),H$B(0,H$K,"paddingLeft",function(){return this.padding[3]}),H$B(0,H$K,"paddingTop",function(){return this.padding[0]}),H$B(0,H$K,"_scale",null,function(H$f){this._ower.scale(H$f[0],H$f[1])}),H$B(0,H$K,"_rotate",null,function(H$f){this._ower.rotation=H$f}),H$y.parseOneCSS=function(H$f,H$K){for(var H$Y,H$X=[],H$L=H$f.split(H$K),H$H=0,H$E=H$L.length;H$H<H$E;H$H++){var H$d=H$L[H$H],H$O=H$d.indexOf(":"),H$i=H$d.substr(0,H$O).replace(/^\s+|\s+$/g,"");if(0!=H$i.length){var H$U=H$d.substr(H$O+1).replace(/^\s+|\s+$/g,""),H$Z=[H$i,H$U];switch(H$i){case"italic":case"bold":H$Z[1]="true"==H$U;break;case"line-height":H$Z[0]="lineHeight",H$Z[1]=parseInt(H$U);break;case"font-size":H$Z[0]="fontSize",H$Z[1]=parseInt(H$U);break;case"padding":1<(H$Y=H$U.split(" ")).length||(H$Y[1]=H$Y[2]=H$Y[3]=H$Y[0]),H$Z[1]=[parseInt(H$Y[0]),parseInt(H$Y[1]),parseInt(H$Y[2]),parseInt(H$Y[3])];break;case"rotate":H$Z[0]="_rotate",H$Z[1]=parseFloat(H$U);break;case"scale":H$Y=H$U.split(" "),H$Z[0]="_scale",H$Z[1]=[parseFloat(H$Y[0]),parseFloat(H$Y[1])];break;case"translate":H$Y=H$U.split(" "),H$Z[0]="_translate",H$Z[1]=[parseInt(H$Y[0]),parseInt(H$Y[1])];break;default:(H$Z[0]=H$y._CSSTOVALUE[H$i])||(H$Z[0]=H$i)}H$X.push(H$Z)}}return H$X},H$y.parseCSS=function(H$f,H$K){for(var H$Y;null!=(H$Y=H$y._parseCSSRegExp.exec(H$f));)H$y.styleSheets[H$Y[1]]=H$y.parseOneCSS(H$Y[2],";")},H$y.EMPTY=new H$y(null),H$y._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},H$y._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),H$y._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},H$y._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},H$y.styleSheets={},H$y.ALIGN_CENTER=1,H$y.ALIGN_RIGHT=2,H$y.VALIGN_MIDDLE=1,H$y.VALIGN_BOTTOM=2,H$y._CSS_BLOCK=1,H$y._DISPLAY_NONE=2,H$y._ABSOLUTE=4,H$y._WIDTH_SET=8,H$y._PADDING=[0,0,0,0],H$y._RECT=[-1,-1,-1,-1],H$y._SPACING=[0,0],H$y._ALIGNS=[0,0,0],H$y.ADDLAYOUTED=512,H$y._NEWFONT=4096,H$y._HEIGHT_SET=8192,H$y._BACKGROUND_SET=16384,H$y._FLOAT_RIGHT=32768,H$y._LINE_ELEMENT=65536,H$y._NOWARP=131072,H$y._WIDTHAUTO=262144,H$y._LISTERRESZIE=524288,H$y}(H$d),H$Yf=function(H$f){function H$E(){this.url=null,this.audio=null,this.loaded=!1,H$E.__super.call(this)}H$U(H$E,"laya.media.h5audio.AudioSound",H$i);var H$K=H$E.prototype;return H$K.dispose=function(){var H$f=H$E._audioCache[this.url];H$f&&(H$f.src="",delete H$E._audioCache[this.url])},H$K.load=function(H$f){var H$K;if(H$f=H$T.formatURL(H$f),(this.url=H$f)==H$m._tMusic?(H$E._initMusicAudio(),(H$K=H$E._musicAudio).src!=H$f&&(H$E._audioCache[H$K.src]=null,H$K=null)):H$K=H$E._audioCache[H$f],H$K&&2<=H$K.readyState)this.event("complete");else{H$K||(H$K=H$f==H$m._tMusic?(H$E._initMusicAudio(),H$E._musicAudio):H$P.createElement("audio"),(H$E._audioCache[H$f]=H$K).src=H$f),H$K.addEventListener("canplaythrough",H$X),H$K.addEventListener("error",H$L);var H$Y=this;(this.audio=H$K).load?H$K.load():H$L()}function H$X(){H$H(),H$Y.loaded=!0,H$Y.event("complete")}function H$L(){H$K.load=null,H$H(),H$Y.event("error")}function H$H(){H$K.removeEventListener("canplaythrough",H$X),H$K.removeEventListener("error",H$L)}},H$K.play=function(H$f,H$K,H$Y){if(void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),!this.url)return null;var H$X,H$L;if(!(H$X=this.url==H$m._tMusic?H$E._musicAudio:H$E._audioCache[this.url]))return null;H$L=H$c.getItem("audio:"+this.url),H$k.isConchApp?H$L||((H$L=H$P.createElement("audio")).src=this.url):this.url==H$m._tMusic?(H$E._initMusicAudio(),(H$L=H$E._musicAudio).src=this.url):H$L=H$L||H$X.cloneNode(!0);var H$H=new H$yf(H$L);return H$H.url=this.url,H$H.loops=H$K,H$H.startTime=H$f,H$H.startHandler=H$Y,H$H.play(!1),H$m.addChannel(H$H),H$H},H$B(0,H$K,"duration",function(){var H$f;return(H$f=H$E._audioCache[this.url])?H$f.duration:0}),H$E._initMusicAudio=function(){H$E._musicAudio||(H$E._musicAudio||(H$E._musicAudio=H$P.createElement("audio")),H$k.isConchApp||H$P.document.addEventListener("mousedown",H$E._makeMusicOK))},H$E._makeMusicOK=function(){H$P.document.removeEventListener("mousedown",H$E._makeMusicOK),H$E._musicAudio.src?H$E._musicAudio.play():(H$E._musicAudio.src="",H$E._musicAudio.load())},H$E._audioCache={},H$E._musicAudio=null,H$E}(),H$Xf=function(H$f){function H$K(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,H$K.__super.call(this)}H$U(H$K,"laya.media.SoundChannel",H$i);var H$Y=H$K.prototype;return H$Y.play=function(){},H$Y.stop=function(){},H$Y.pause=function(){},H$Y.resume=function(){},H$Y.__runComplete=function(H$f){H$f&&H$f.run()},H$B(0,H$Y,"volume",function(){return 1},function(H$f){}),H$B(0,H$Y,"position",function(){return 0}),H$B(0,H$Y,"duration",function(){return 0}),H$K}(),H$Lf=function(H$f){function H$K(){H$K.__super.call(this)}H$U(H$K,"laya.media.Sound",H$i);var H$Y=H$K.prototype;return H$Y.load=function(H$f){},H$Y.play=function(H$f,H$K,H$Y){return void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),null},H$Y.dispose=function(){},H$B(0,H$Y,"duration",function(){return 0}),H$K}(),H$Hf=function(H$f){function H$L(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,H$L.__super.call(this)}H$U(H$L,"laya.media.webaudio.WebAudioSound",H$i);var H$K=H$L.prototype;return H$K.load=function(H$f){this.url=H$f,this.audioBuffer=H$L._dataCache[H$f],this.audioBuffer?this._loaded(this.audioBuffer):(H$L.e.on("loaded:"+H$f,this,this._loaded),H$L.e.on("err:"+H$f,this,this._err),H$L.__loadingSound[H$f]||(H$L.__loadingSound[H$f]=!0,H$a.loader.load(H$f,H$x.create(this,this.onloaded),null,H$df.BUFFER,4,!1,null,!0)))},H$K.onloaded=function(H$f){H$f||this._err(),this._disposed?this._removeLoadEvents():(this.data=H$f,H$L.buffs.push({buffer:this.data,url:this.url}),H$L.decode())},H$K._err=function(){if(this._removeLoadEvents(),H$L.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var H$f,H$K,H$Y,H$X=0;for(H$f=(H$K=this.__toPlays).length,H$X=0;H$X<H$f;H$X++)(H$Y=H$K[H$X])[3]&&!H$Y[3].isStopped&&H$Y[3].event("error");this.__toPlays.length=0}},H$K._loaded=function(H$f){this._removeLoadEvents(),this._disposed||(this.audioBuffer=H$f,this.loaded=!0,this.event("complete"))},H$K._removeLoadEvents=function(){H$L.e.off("loaded:"+this.url,this,this._loaded),H$L.e.off("err:"+this.url,this,this._err)},H$K.__playAfterLoaded=function(){if(this.__toPlays){var H$f,H$K,H$Y,H$X=0;for(H$f=(H$K=this.__toPlays).length,H$X=0;H$X<H$f;H$X++)(H$Y=H$K[H$X])[3]&&!H$Y[3].isStopped&&this.play(H$Y[0],H$Y[1],H$Y[2],H$Y[3]);this.__toPlays.length=0}},H$K.play=function(H$f,H$K,H$Y,H$X){return void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),H$X=H$X||new H$lf,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([H$f,H$K,H$Y,H$X]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),H$X.url=this.url,H$X.loops=H$K,H$X.audioBuffer=this.audioBuffer,H$X.startTime=H$f,H$X.startHandler=H$Y,H$X.play(!1),H$m.addChannel(H$X),H$X},H$K.dispose=function(){this._disposed=!0,delete H$L._dataCache[this.url],delete H$L.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},H$B(0,H$K,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),H$L.decode=function(){if(!(H$L.buffs.length<=0||H$L.isDecoding))if(H$L.isDecoding=!0,(H$L.tInfo=H$L.buffs.shift())&&H$L.tInfo.buffer&&H$L.tInfo.buffer.byteLength)try{H$L.ctx.decodeAudioData(H$L.tInfo.buffer,H$L._done,H$L._fail)}catch(H$f){console.error("decodeAudioData error  byteLength:"+H$L.tInfo.buffer.byteLength+"  url:"+H$L.tInfo.url)}else H$L._fail()},H$L._done=function(H$f){H$L.e.event("loaded:"+H$L.tInfo.url,H$f),H$L._dataCache[H$L.tInfo.url]=H$f,H$L.isDecoding=!1,H$L.decode()},H$L._fail=function(){H$L.e.event("err:"+H$L.tInfo.url,null),H$L.isDecoding=!1,H$L.decode()},H$L._playEmptySound=function(){if(null!=H$L.ctx){if(H$L._emptySource&&(H$L._emptySource.stop(),H$L._emptySource.disconnect(0),!H$lf._tryCleanFailed))try{H$L._emptySource.buffer=null}catch(H$f){H$lf._tryCleanFailed=!0}var H$f=H$L.ctx.createBufferSource();H$f.buffer=H$L._miniBuffer,H$f.connect(H$L.ctx.destination),H$f.start(0,0,0),H$L._emptySource=H$f}},H$L._unlock=function(){H$L._unlocked||(H$L._playEmptySound(),"running"==H$L.ctx.state?(H$P.document.removeEventListener("mousedown",H$L._unlock,!0),H$P.document.removeEventListener("touchend",H$L._unlock,!0),H$P.document.removeEventListener("touchstart",H$L._unlock,!0),H$L._unlocked=!0):"suspended"==H$L.ctx.state&&H$m._recoverWebAudio())},H$L.initWebAudio=function(){"running"!=H$L.ctx.state&&(H$L._unlock(),H$P.document.addEventListener("mousedown",H$L._unlock,!0),H$P.document.addEventListener("touchend",H$L._unlock,!0),H$P.document.addEventListener("touchstart",H$L._unlock,!0))},H$L._emptySource=null,H$L._dataCache={},H$L.buffs=[],H$L.isDecoding=!1,H$L._unlocked=!1,H$L.tInfo=null,H$L.__loadingSound={},H$O(H$L,["window",function(){return this.window=H$P.window},"webAudioEnabled",function(){return this.webAudioEnabled=H$L.window.AudioContext||H$L.window.webkitAudioContext||H$L.window.mozAudioContext},"ctx",function(){return this.ctx=H$L.webAudioEnabled?new(H$L.window.AudioContext||H$L.window.webkitAudioContext||H$L.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=H$L.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new H$i}]),H$L}(),H$Ef=function(H$f){function H$K(){this._responseType=null,this._data=null,H$K.__super.call(this),this._http=new H$P.window.XMLHttpRequest}H$U(H$K,"laya.net.HttpRequest",H$i);var H$Y=H$K.prototype;return H$Y.send=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$Y&&(H$Y="get"),void 0===H$X&&(H$X="text"),this._responseType=H$X,this._data=null;var H$H=this,H$E=this._http;if(H$E.open(H$Y,H$f,!0),H$L)for(var H$d=0;H$d<H$L.length;H$d++)H$E.setRequestHeader(H$L[H$d++],H$L[H$d]);else H$k.isConchApp||(H$K&&"string"!=typeof H$K?H$E.setRequestHeader("Content-Type","application/json"):H$E.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));H$E.responseType="arraybuffer"!==H$X?"text":"arraybuffer",H$E.onerror=function(H$f){H$H._onError(H$f)},H$E.onabort=function(H$f){H$H._onAbort(H$f)},H$E.onprogress=function(H$f){H$H._onProgress(H$f)},H$E.onload=function(H$f){H$H._onLoad(H$f)},H$E.send(H$K)},H$Y._onProgress=function(H$f){H$f&&H$f.lengthComputable&&this.event("progress",H$f.loaded/H$f.total)},H$Y._onAbort=function(H$f){this.error("Request was aborted by user")},H$Y._onError=function(H$f){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},H$Y._onLoad=function(H$f){var H$K=this._http,H$Y=void 0!==H$K.status?H$K.status:200;200===H$Y||204===H$Y||0===H$Y?this.complete():this.error("["+H$K.status+"]"+H$K.statusText+":"+H$K.responseURL)},H$Y.error=function(H$f){this.clear(),this.event("error",H$f)},H$Y.complete=function(){this.clear();var H$K=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=H$g.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(H$f){H$K=!1,this.error(H$f.message)}H$K&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},H$Y.clear=function(){var H$f=this._http;H$f.onerror=H$f.onabort=H$f.onprogress=H$f.onload=null},H$B(0,H$Y,"url",function(){return this._http.responseURL}),H$B(0,H$Y,"http",function(){return this._http}),H$B(0,H$Y,"data",function(){return this._data}),H$K}(),H$df=function(H$f){function H$_(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,H$_.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1,this._base64=!1}H$U(H$_,"laya.net.Loader",H$i);var H$K=H$_.prototype;return H$K.load=function(H$f,H$K,H$Y,H$X,H$L){if(H$f&&""!=H$f||console.error("Loader 加载的url不合法 "+H$f),void 0===H$Y&&(H$Y=!0),void 0===H$L&&(H$L=!1),this._url=H$f,this._base64=!1,0===H$f.indexOf("data:image")?(this._base64=!0,this._type=H$K="image"):this._type=H$K||(H$K=this.getTypeFromUrl(H$f)),this._cache=H$Y,this._data=null,!H$L&&H$_.loadedMap[H$f])return this._data=H$_.loadedMap[H$f],this.event("progress",1),void this.event("complete",this._data);if(H$X&&H$_.setGroup(H$f,H$X),null!=H$_.parserMap[H$K])return this._customParse=!0,void(H$_.parserMap[H$K]instanceof laya.utils.Handler?H$_.parserMap[H$K].runWith(this):H$_.parserMap[H$K].call(null,this));if("image"===H$K||"htmlimage"===H$K||"nativeimage"===H$K)return this._loadImage(H$f);if("ttf"===H$K)return this._loadTTF(H$f);switch(H$K){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:H$K}H$_.preLoadedMap[H$f]?this.onLoaded(H$_.preLoadedMap[H$f]):H$E.resMgrLoad(H$f,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},H$K.getTypeFromUrl=function(H$f){var H$K=H$g.getFileExtension(H$f);return H$K?H$_.typeMap[H$K]:(console.warn("Not recognize the resources suffix",H$f),"text")},H$K._loadTTF=function(H$f){H$f=H$T.formatURL(H$f);var H$K=new H$t;H$K.complete=H$x.create(this,this.onLoaded),H$K.load(H$f)},H$K._loadBase64Image=function(H$K){H$K=H$T.formatURL(H$K);var H$Y,H$f=this;function H$X(){H$Y.onload=null,H$Y.onerror=null,delete H$_.imgCache[H$K]}function H$L(){H$X(),H$f.onLoaded(H$Y)}function H$H(){H$X(),H$f.event("error","Load image failed")}"nativeimage"===this._type?((H$Y=new H$P.window.Image).crossOrigin="",H$Y.onload=H$L,H$Y.onerror=H$H,H$Y.src=H$K,H$_.imgCache[H$K]=H$Y):new H$sf.create(H$K,{onload:H$L,onerror:H$H,onCreate:function(H$f){H$Y=H$f,H$_.imgCache[H$K]=H$f}})},H$K._loadImage=function(H$f){this._base64?this._loadBase64Image(H$f):H$E.imgMgrLoad(H$f,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},H$K._loadImageComplete=function(H$f,H$K,H$Y){if(null!=H$Y)if(H$Y instanceof ArrayBuffer){var H$X=new DataView(H$Y),H$L=new laya.webgl.resource.WebGLImage(new Uint8Array(H$Y,8),H$f,0,!1,H$X.getUint32(0),H$X.getUint32(4));this.onLoaded(H$L)}else if(H$Y instanceof H$Uf)H$_.imgMgrSet[H$f]=H$K,H$E.imgMgrLock(H$f,H$_.imgMgrSet[H$f]),this._url=H$f,this.complete(H$Y);else{var H$H=-1!=H$f.indexOf(".png",H$f.length-4)?6408:6407;H$L=new laya.webgl.resource.WebGLImage(H$Y,H$f,H$H,!1,H$Y.width,H$Y.height);this.onLoaded(H$L)}else this.event("error","Load image failed")},H$K.imageCancel=function(H$f,H$K,H$Y){H$E.imgMgrCancel&&H$E.imgMgrCancel(H$f,this._onImageCallback)},H$K._loadSound=function(H$f){var H$K=new H$m._soundClass,H$Y=this;function H$X(){H$K.offAll()}H$K.on("complete",this,function(){H$X(),H$Y.onLoaded(H$K)}),H$K.on("error",this,function(){H$X(),H$K.dispose(),H$Y.event("error","Load sound failed")}),H$K.load(H$f)},H$K.onProgress=function(H$f){"atlas"===this._type?this.event("progress",.3*H$f):this.event("progress",H$f)},H$K.onError=function(H$f){this.event("error",H$f)},H$K._loadedComplete=function(H$f,H$K,H$Y){if(null!=H$Y)switch(this._type){case"atlas":case"plf":case"json":var H$X=new H$b(H$Y);this.onLoaded(JSON.parse(H$X.readUTFBytes()));break;case"font":H$X=new H$b(H$Y);this.onLoaded(H$g.parseXMLFromString(H$X.readUTFBytes()));break;default:this.onLoaded(H$Y)}else this.event("error",H$f)},H$K.onLoaded=function(H$f){var H$K=this._type;if("plf"==H$K)this.parsePLFData(H$f),this.complete(H$f);else if("image"===H$K){var H$Y=new H$Uf(H$f);H$Y.url=this._url,this.complete(H$Y)}else if("sound"===H$K||"htmlimage"===H$K||"nativeimage"===H$K)this.complete(H$f);else if("atlas"===H$K){if(!H$f.src&&!H$f._setContext){if(!this._data){if((this._data=H$f).meta&&H$f.meta.image)for(var H$X=H$f.meta.image.split(","),H$L=0<=this._url.indexOf("/")?"/":"\\",H$H=this._url.lastIndexOf(H$L),H$E=0<=H$H?this._url.substr(0,H$H+1):"",H$d=0,H$O=H$X.length;H$d<H$O;H$d++)H$X[H$d]=H$E+H$X[H$d];else H$X=[this._url.replace(".json",".png")];H$X.reverse(),H$f.toLoads=H$X,H$f.pics=[]}return this.event("progress",.3+1/H$X.length*.6),this._loadImage(H$X.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(H$f),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var H$i=this._data.frames,H$U=this._url.split("?")[0],H$Z=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:H$U.substring(0,H$U.lastIndexOf("."))+"/",H$y=this._data.pics,H$l=H$T.formatURL(this._url),H$B=H$_.atlasMap[H$l]||(H$_.atlasMap[H$l]=[]);H$B.dir=H$Z;var H$$=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var H$h in H$$=parseFloat(this._data.meta.scale),H$i){var H$A,H$x=H$i[H$h],H$S=H$y[H$x.frame.idx?H$x.frame.idx:0],H$z=H$T.formatURL(H$Z+H$h);H$S.scaleRate=H$$,H$A=H$Uf.create(H$S,H$x.frame.x,H$x.frame.y,H$x.frame.w,H$x.frame.h,H$x.spriteSourceSize.x,H$x.spriteSourceSize.y,H$x.sourceSize.w,H$x.sourceSize.h),H$_.cacheRes(H$z,H$A),H$_.keepCache(this._url,H$Z+H$h),H$A.url=H$z,H$B.push(H$z)}else for(H$h in H$i)H$S=H$y[(H$x=H$i[H$h]).frame.idx?H$x.frame.idx:0],H$z=H$T.formatURL(H$Z+H$h),H$_.cacheRes(H$z,H$Uf.create(H$S,H$x.frame.x,H$x.frame.y,H$x.frame.w,H$x.frame.h,H$x.spriteSourceSize.x,H$x.spriteSourceSize.y,H$x.sourceSize.w,H$x.sourceSize.h)),H$_.loadedMap[H$z].url=H$z,H$_.keepCache(this._url,H$Z+H$h),H$B.push(H$z);delete this._data.pics,this.complete(this._data)}else if("font"==H$K){if(!H$f.src)return this._data=H$f,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var H$C=new H$G;H$C.parseFont(this._data,H$f);var H$s=this._url.split(".fnt")[0].split("/"),H$a=H$s[H$s.length-1];H$hf.registerBitmapFont(H$a,H$C),this._data=H$C,this.complete(this._data)}else if("pkm"==H$K){var H$I=H$sf.create(H$f,this._url),H$n=new H$Uf(H$I);H$n.url=this._url,this.complete(H$n)}else this.complete(H$f)},H$K.parsePLFData=function(H$f){var H$K,H$Y,H$X;for(H$K in H$f)switch(H$X=H$f[H$K],H$K){case"json":case"text":for(H$Y in H$X)H$_.preLoadedMap[H$T.formatURL(H$Y)]=H$X[H$Y];break;default:for(H$Y in H$X)H$_.preLoadedMap[H$T.formatURL(H$Y)]=H$X[H$Y]}},H$K.complete=function(H$f){this._data=H$f,this._customParse?this.event("loaded",H$f instanceof Array?[H$f]:H$f):(H$_._loaders.push(this),H$_._isWorking||H$_.checkNext())},H$K.endLoad=function(H$f){H$f&&(this._data=H$f),this._cache&&H$_.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},H$B(0,H$K,"url",function(){return this._url}),H$B(0,H$K,"data",function(){return this._data}),H$B(0,H$K,"cache",function(){return this._cache}),H$B(0,H$K,"type",function(){return this._type}),H$_.checkNext=function(){H$_._isWorking=!0;for(var H$f=H$P.now();H$_._startIndex<H$_._loaders.length;)if(H$P.now(),H$_._loaders[H$_._startIndex].endLoad(),H$_._startIndex++,H$P.now()-H$f>H$_.maxTimeOut)return console.warn("loader callback cost a long time:"+(H$P.now()-H$f)+" url="+H$_._loaders[H$_._startIndex-1].url),void H$a.timer.frameOnce(1,null,H$_.checkNext);H$_._loaders.length=0,H$_._startIndex=0,H$_._isWorking=!1},H$_.clearRes=function(H$f,H$K){if(null!=H$f){void 0===H$K&&(H$K=!1),H$f=H$T.formatURL(H$f);var H$Y=H$_.getAtlas(H$f);if(H$Y){for(var H$X=0,H$L=H$Y.length;H$X<H$L;H$X++){var H$H=H$Y[H$X],H$E=H$_.getRes(H$H);delete H$_.loadedMap[H$H],H$_.clearCache(H$f.substring(H$T.basePath.length),H$H.substring(H$T.basePath.length)),H$E&&H$E.destroy(H$K)}H$Y.length=0,delete H$_.atlasMap[H$f],delete H$_.loadedMap[H$f]}else{var H$d=H$_.loadedMap[H$f];H$d&&(delete H$_.loadedMap[H$f],H$d instanceof laya.resource.Texture&&H$d.bitmap&&H$d.destroy(H$K))}}},H$_.clearTextureRes=function(H$f){H$f=H$T.formatURL(H$f);var H$K=laya.net.Loader.getAtlas(H$f),H$Y=H$K&&0<H$K.length?laya.net.Loader.getRes(H$K[0]):laya.net.Loader.getRes(H$f);H$Y&&H$Y.bitmap&&(H$k.isConchApp&&!H$k.isConchWebGL?H$Y.bitmap.source.releaseTexture&&H$Y.bitmap.source.releaseTexture():null==H$Y.bitmap._atlaser&&H$Y.bitmap.releaseResource(!0))},H$_.getRes=function(H$f){return H$_.loadedMap[H$T.formatURL(H$f)]},H$_.getAtlas=function(H$f){return H$_.atlasMap[H$T.formatURL(H$f)]},H$_.cacheRes=function(H$f,H$K){H$f=H$T.formatURL(H$f),null!=H$_.loadedMap[H$f]?console.warn("Resources already exist,is repeated loading:",H$f):H$_.loadedMap[H$f]=H$K},H$_.setGroup=function(H$f,H$K){H$_.groupMap[H$K]||(H$_.groupMap[H$K]=[]),H$_.groupMap[H$K].push(H$f)},H$_.clearResByGroup=function(H$f){if(H$_.groupMap[H$f]){var H$K=H$_.groupMap[H$f],H$Y=0,H$X=H$K.length;for(H$Y=0;H$Y<H$X;H$Y++)H$_.clearRes(H$K[H$Y]);H$K.length=0}},H$_.keepCache=function(H$f,H$K){if(H$f&&H$K){var H$Y=H$_.cacheSet[H$K];H$Y?-1==H$Y.indexOf(H$f)&&H$Y.push(H$f):H$_.cacheSet[H$K]=[H$f]}},H$_.clearCache=function(H$f,H$K){if(H$f&&H$K){var H$Y=H$_.cacheSet[H$K];if(H$Y){var H$X=H$Y.indexOf(H$f);if(-1!==H$X){var H$L=H$Y.length-1;0==H$L?(delete H$_.cacheSet[H$K],0<H$_.imgMgrSet[H$K]?H$E.imgMgrFree(H$K,H$_.imgMgrSet[H$K]):H$_.clearRes(H$K,!0)):(H$Y[H$X]=H$Y[H$L],H$Y.length=H$L)}}}},H$_.saveObject=function(H$f,H$K,H$Y){if(H$K&&H$f){var H$X=H$_.objectSet[H$f];H$X?(console.warn("Loader.saveObject: "+H$f),H$X[0]=H$K,H$X[1]=H$Y):H$_.objectSet[H$f]=[H$K,H$Y,[]]}},H$_.findObject=function(H$f){if(H$f){var H$K=H$_.objectSet[H$f];if(H$K)return H$K[0]}return null},H$_.keepObject=function(H$f,H$K){if(H$f&&H$K){var H$Y=H$_.objectSet[H$K];H$Y&&-1===H$Y[2].indexOf(H$f)&&H$Y[2].push(H$f)}},H$_.clearObject=function(H$f,H$K){if(H$f&&H$K){var H$Y=H$_.objectSet[H$K];if(H$Y){var H$X=H$Y[2],H$L=H$X.indexOf(H$f);if(-1!==H$L){var H$H=H$X.length-1;0==H$H?(delete H$_.objectSet[H$K],H$Y[1]&&H$Y[1].call(null,H$Y[0])):(H$X[H$L]=H$X[H$H],H$X.length=H$H)}}}},H$_.TEXT="text",H$_.JSON="json",H$_.XML="xml",H$_.BUFFER="arraybuffer",H$_.IMAGE="image",H$_.SOUND="sound",H$_.ATLAS="atlas",H$_.FONT="font",H$_.TTF="ttf",H$_.PLF="plf",H$_.PKM="pkm",H$_.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},H$_.parserMap={},H$_.groupMap={},H$_.maxTimeOut=100,H$_.loadedMap={},H$_.preLoadedMap={},H$_.atlasMap={},H$_._loaders=[],H$_._isWorking=!1,H$_._startIndex=0,H$_.imgCache={},H$_.cacheSet={},H$_.objectSet={},H$_.imgMgrSet={},H$_}(),H$Of=function(H$f){var H$y;function H$l(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},H$l.__super.call(this);for(var H$f=0;H$f<this._maxPriority;H$f++)this._resInfos[H$f]=[]}H$U(H$l,"laya.net.LoaderManager",H$i);var H$K=H$l.prototype;return H$K.create=function(H$f,H$Y,H$K,H$X,H$L,H$H,H$E,H$d){if(null==H$H&&(H$H=2),null==H$E&&(H$E=!0),H$f instanceof Array){var H$O=H$f,H$i=H$O.length,H$U=0;if(H$K)var H$Z=H$x.create(H$K.caller,H$K.method,H$K.args,!1);for(var H$y=0;H$y<H$i;H$y++){var H$l=H$O[H$y];"string"==typeof H$l&&(H$l=H$O[H$y]={url:H$l}),H$l.progress=0}for(H$y=0;H$y<H$i;H$y++){H$l=H$O[H$y];var H$B=H$K?H$x.create(null,H$A,[H$l],!1):null,H$$=H$K||H$Y?H$x.create(null,H$h,[H$l]):null;this._create(H$l.url,H$$,H$B,H$l.clas||H$X,H$l.params||H$L,null!=H$l.priority&&0<=H$l.priority?H$l.priority:H$H,H$E,H$l.group||H$d)}function H$h(H$f,H$K){H$U++,H$f.progress=1,H$U===H$i&&H$Y&&H$Y.run()}function H$A(H$f,H$K){H$f.progress=H$K;for(var H$Y=0,H$X=0;H$X<H$i;H$X++){H$Y+=H$O[H$X].progress}var H$L=H$Y/H$i;H$Z.runWith(H$L)}return!0}return this._create(H$f,H$Y,H$K,H$X,H$L,H$H,H$E,H$d)},H$K._create=function(H$K,H$Y,H$f,H$X,H$L,H$H,H$E,H$d){H$K&&""!=H$K||console.error("加载的url不合法 "+H$K),null==H$H&&(H$H=2),null==H$E&&(H$E=!0);var H$O=H$T.formatURL(H$K),H$i=this.getRes(H$O);if(H$i)!H$i.hasOwnProperty("loaded")||H$i.loaded?(H$f&&H$f.runWith(1),H$Y&&H$Y.run()):H$Y&&H$a.loader._createListener(H$K,H$Y.caller,H$Y.method,H$Y.args,!0,!1);else{var H$U=H$g.getFileExtension(H$K),H$Z=H$l.createMap[H$U];if(!H$Z)throw new Error("LoaderManager:unknown file("+H$K+") extension with: "+H$U+".");H$X||(H$X=H$Z[0]);var H$y=H$Z[1];if("atlas"==H$U)this.load(H$K,H$Y,H$f,H$y,H$H,H$E);else{H$X===H$Uf&&(H$y="htmlimage"),(H$i=H$X?new H$X:null).hasOwnProperty("_loaded")&&(H$i._loaded=!1),H$i._setUrl(H$K),H$d&&H$i._setGroup(H$d),this._createLoad(H$i,H$K,H$x.create(null,function(H$f){H$i&&!H$i.destroyed&&H$f&&H$i.onAsynLoaded.call(H$i,H$K,H$f,H$L),H$Y&&H$Y.run();H$a.loader.event(H$K)}),H$f,H$y,H$H,!1,H$d,!0),H$E&&this.cacheRes(H$O,H$i)}}return H$i},H$K.load=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){H$f&&""!=H$f||console.error("加载的url不合法 "+H$f);var H$O=this;if(null==H$L&&(H$L=2),null==H$H&&(H$H=!0),void 0===H$d&&(H$d=!1),H$f instanceof Array)return this._loadAssets(H$f,H$K,H$Y,H$X,H$L,H$H,H$E);var H$i=H$df.getRes(H$f);if(null!=H$i)H$a.timer.frameOnce(1,null,function(){H$Y&&H$Y.runWith(1),H$K&&H$K.runWith(H$i),H$O._loaderCount||H$O.event("complete")});else{var H$U=H$l._resMap[H$f];H$U?(H$K&&H$U._createListener("complete",H$K.caller,H$K.method,H$K.args,!1,!1),H$Y&&H$U._createListener("progress",H$Y.caller,H$Y.method,H$Y.args,!1,!1)):((H$U=this._infoPool.length?this._infoPool.pop():new H$y).url=H$f,H$U.clas=null,H$U.type=H$X,H$U.cache=H$H,H$U.group=H$E,H$U.ignoreCache=H$d,H$U.priority=H$L,H$K&&H$U.on("complete",H$K.caller,H$K.method,H$K.args),H$Y&&H$U.on("progress",H$Y.caller,H$Y.method,H$Y.args),H$l._resMap[H$f]=H$U,H$L=H$L<this._maxPriority?0<=H$L?H$L:0:this._maxPriority-1,this._resInfos[H$L].push(H$U),this._next())}return this},H$K.cancel=function(H$f,H$K,H$Y){if(H$i=H$l._resMap[H$f]){H$K&&H$i.off("complete",H$K.caller,H$K.method,!1),H$Y&&H$i.off("progress",H$Y.caller,H$Y.method,!1);var H$X=H$i.getListener("complete"),H$L=H$i.getListener("progress");if(!(H$X&&H$X.head||H$L&&H$L.head)){if(H$i.loader){var H$H=H$i.loader;H$H.imageCancel(H$f),H$H.offAll(),H$H._data=null,H$H._customParse=!1,H$H._url=null,H$H._class=null,H$H._type=null,this._loaders.push(H$H),this._loaderCount--,delete this._loaderMap[H$i.url]}for(var H$E=0;H$E<this._maxPriority;H$E++)for(var H$d=this._resInfos[H$E],H$O=H$d.length-1;-1<H$O;H$O--){var H$i;(H$i=H$d[H$O])&&H$i.url===H$f&&(H$d[H$O]=null,H$i.destroy(),H$i.offAll(),this._infoPool.push(H$i))}delete H$l._resMap[H$f],this._next()}}},H$K._createLoad=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){var H$i=this;if(null==H$H&&(H$H=2),null==H$E&&(H$E=!0),void 0===H$O&&(H$O=!1),H$K instanceof Array)return this._loadAssets(H$K,H$Y,H$X,H$L,H$H,H$E,H$d);var H$U=H$df.getRes(H$K);if(null!=H$U)H$a.timer.frameOnce(1,null,function(){H$X&&H$X.runWith(1),H$Y&&H$Y.runWith(H$U),H$i._loaderCount||H$i.event("complete")});else{var H$Z=H$l._resMap[H$K];H$Z?(H$Y&&H$Z._createListener("complete",H$Y.caller,H$Y.method,H$Y.args,!1,!1),H$X&&H$Z._createListener("progress",H$X.caller,H$X.method,H$X.args,!1,!1)):((H$Z=this._infoPool.length?this._infoPool.pop():new H$y).url=H$K,H$Z.clas=H$f,H$Z.type=H$L,H$Z.cache=H$E,H$Z.group=H$d,H$Z.ignoreCache=H$O,H$Z.priority=H$H,H$Y&&H$Z.on("complete",H$Y.caller,H$Y.method,H$Y.args),H$X&&H$Z.on("progress",H$X.caller,H$X.method,H$X.args),H$l._resMap[H$K]=H$Z,H$H=H$H<this._maxPriority?0<=H$H?H$H:0:this._maxPriority-1,this._resInfos[H$H].push(H$Z),this._next())}return this},H$K._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var H$f=0;H$f<this._maxPriority;H$f++)for(var H$K=this._resInfos[H$f];0<H$K.length;){var H$Y=H$K.shift();if(H$Y)return this._doLoad(H$Y)}this._loaderCount||this.event("complete")}},H$K._doLoad=function(H$K){var H$Y=this._loaders.length?this._loaders.pop():new H$df;this._loaderCount++,(this._loaderMap[H$K.url]=H$Y).on("complete",null,H$L),H$Y.on("progress",null,function(H$f){H$K.event("progress",H$f)}),H$Y.on("error",null,function(H$f){H$L(null)}),H$K.loader=H$Y;var H$X=this;function H$L(H$f){H$Y.offAll(),H$Y._data=null,H$Y._customParse=!1,H$Y._url=null,H$Y._class=null,H$Y._type=null,H$X._loaders.push(H$Y),H$X._loaderCount--,delete H$X._loaderMap[H$K.url],H$X._endLoad(H$K,H$f instanceof Array?[H$f]:H$f),H$X._next()}H$Y._class=H$K.clas,1<=H$K.priority?(H$Y.priority=H$K.priority,H$Y.realTime=!1):(H$Y.priority=0,H$Y.realTime=!0),H$Y.load(H$K.url,H$K.type,H$K.cache,H$K.group,H$K.ignoreCache)},H$K._endLoad=function(H$f,H$K){var H$Y=H$f.url;if(null==H$K){var H$X=this._failRes[H$Y]||0;if(H$X<this.retryNum)return console.warn("[warn]Retry to load:",H$Y),this._failRes[H$Y]=H$X+1,void H$a.timer.once(this.retryDelay,this,this._addReTry,[H$f],!1);console.warn("[error]Failed to load:",H$Y),this.event("error",H$Y)}this._failRes[H$Y]&&(this._failRes[H$Y]=0),delete H$l._resMap[H$Y],H$f.event("complete",H$K),H$f.destroy(),H$f.offAll(),this._infoPool.push(H$f)},H$K._addReTry=function(H$f){this._resInfos[this._maxPriority-1].push(H$f),this._next()},H$K.clearRes=function(H$f,H$K){void 0===H$K&&(H$K=!1),H$df.clearRes(H$f,H$K)},H$K.getRes=function(H$f){return H$df.getRes(H$f)},H$K.cacheRes=function(H$f,H$K){H$df.cacheRes(H$f,H$K)},H$K.clearTextureRes=function(H$f){H$df.clearTextureRes(H$f)},H$K.setGroup=function(H$f,H$K){H$df.setGroup(H$f,H$K)},H$K.clearResByGroup=function(H$f){H$df.clearResByGroup(H$f)},H$K.clearUnLoaded=function(){for(var H$f=0;H$f<this._maxPriority;H$f++){for(var H$K=this._resInfos[H$f],H$Y=H$K.length-1;-1<H$Y;H$Y--){var H$X=H$K[H$Y];H$X&&(H$X.destroy(),H$X.offAll(),this._infoPool.push(H$X))}H$K.length=0}this._loaderCount=0,H$l._resMap={}},H$K.cancelLoadByUrls=function(H$f){if(H$f)for(var H$K=0,H$Y=H$f.length;H$K<H$Y;H$K++)this.cancelLoadByUrl(H$f[H$K])},H$K.cancelLoadByUrl=function(H$f){for(var H$K=0;H$K<this._maxPriority;H$K++)for(var H$Y=this._resInfos[H$K],H$X=H$Y.length-1;-1<H$X;H$X--){var H$L=H$Y[H$X];H$L&&H$L.url===H$f&&(H$Y[H$X]=null,H$L.destroy(),H$L.offAll(),this._infoPool.push(H$L))}H$l._resMap[H$f]&&delete H$l._resMap[H$f]},H$K._loadAssets=function(H$f,H$Y,H$E,H$K,H$X,H$L,H$H){null==H$X&&(H$X=2),null==H$L&&(H$L=!0);for(var H$d=H$f.length,H$O=0,H$i=0,H$U=[],H$Z=!0,H$y=0;H$y<H$d;H$y++){var H$l=H$f[H$y];if(!H$l)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+H$f);"string"==typeof H$l&&(H$l={url:H$l,type:H$K,size:1,priority:H$X}),H$l.size||(H$l.size=1),H$l.progress=0,H$i+=H$l.size,H$U.push(H$l);var H$B=H$E?H$x.create(null,H$A,[H$l],!1):null,H$$=H$Y||H$E?H$x.create(null,H$h,[H$l]):null;this.load(H$l.url,H$$,H$B,H$l.type,null!=H$l.priority&&0<=H$l.priority?H$l.priority:2,H$L,H$l.group||H$H)}function H$h(H$f,H$K){H$O++,H$f.progress=1,H$K||(H$Z=!1),H$O===H$d&&H$Y&&H$Y.runWith(H$Z)}function H$A(H$f,H$K){if(null!=H$E){H$f.progress=H$K;for(var H$Y=0,H$X=0;H$X<H$U.length;H$X++){var H$L=H$U[H$X];H$Y+=H$L.size*H$L.progress}var H$H=H$Y/H$i;H$E.runWith(H$H)}}return this},H$l.cacheRes=function(H$f,H$K){H$df.cacheRes(H$f,H$K)},H$l._resMap={},H$O(H$l,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),H$l.__init$=function(){H$y=function(H$f){function H$K(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,H$K.__super.call(this)}return H$U(H$K,"",H$i),H$K.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},H$K}()},H$l}(),H$if=(function(H$f){function H$L(H$f){H$L.__super.call(this),H$f||(H$f=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var H$K=0,H$Y=0,H$X=0;H$X<20;H$X++)H$X%5!=4?this._mat[H$K++]=H$f[H$X]:this._alpha[H$Y++]=H$f[H$X];this._action=H$R.createFilterAction(32),this._action.data=this}H$U(H$L,"laya.filters.ColorFilter",H$A);var H$K=H$L.prototype;H$a.imps(H$K,{"laya.filters.IFilter":!0}),H$K.callNative=function(H$f){H$f._$P.cf=this;H$f.conchModel&&H$f.conchModel.setFilterMatrix&&H$f.conchModel.setFilterMatrix(this._mat,this._alpha)},H$B(0,H$K,"type",function(){return 32}),H$B(0,H$K,"action",function(){return this._action})}(),function(H$f){function H$X(H$f,H$K,H$Y){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===H$K&&(H$K=0),H$X.__super.call(this),this._byteClass=H$Y||H$b,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,H$f&&0<H$K&&H$K<65535&&this.connect(H$f,H$K)}H$U(H$X,"laya.net.Socket",H$i);var H$K=H$X.prototype;H$K.connect=function(H$f,H$K){var H$Y="ws://"+H$f+":"+H$K;H$Y="https:"==H$P.window.location.protocol?"wss://"+H$f+":"+H$K:"ws://"+H$f+":"+H$K,this.connectByUrl(H$Y)},H$K.connectByUrl=function(H$f){var H$K=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new H$P.window.WebSocket(H$f,this.protocols):this._socket=new H$P.window.WebSocket(H$f),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(H$f){H$K._onOpen(H$f)},this._socket.onmessage=function(H$f){H$K._onMessage(H$f)},this._socket.onclose=function(H$f){H$K._onClose(H$f)},this._socket.onerror=function(H$f){H$K._onError(H$f)}},H$K.cleanSocket=function(){try{this._socket.close()}catch(H$f){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},H$K.close=function(){if(null!=this._socket)try{this._socket.close()}catch(H$f){}},H$K._onOpen=function(H$f){this._connected=!0,this.event("open",H$f)},H$K._onMessage=function(H$f){if(H$f&&H$f.data){var H$K=H$f.data;if(this.disableInput&&H$K)this.event("message",H$K);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var H$Y=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,H$K&&("string"==typeof H$K?this._input.writeUTFBytes(H$K):this._input.writeArrayBuffer(H$K),this._addInputPosition=this._input.pos,this._input.pos=H$Y),this.event("message",H$K)}}},H$K._onClose=function(H$f){this._connected=!1,this.event("close",H$f)},H$K._onError=function(H$f){this.event("error",H$f)},H$K.send=function(H$f){this._socket.send(H$f)},H$K.flush=function(){if(this._output&&0<this._output.length){var H$K;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(H$f){H$K=H$f}this._output.endian=this.endian,this._output.clear(),H$K&&this.event("error",H$K)}},H$B(0,H$K,"input",function(){return this._input}),H$B(0,H$K,"output",function(){return this._output}),H$B(0,H$K,"connected",function(){return this._connected}),H$B(0,H$K,"endian",function(){return this._endian},function(H$f){this._endian=H$f,null!=this._input&&(this._input.endian=H$f),null!=this._output&&(this._output.endian=H$f)}),H$X.LITTLE_ENDIAN="littleEndian",H$X.BIG_ENDIAN="bigEndian"}(),function(H$f){function H$d(){H$d.__super.call(this),this._$1__id=++H$d._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(H$d._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,H$q.currentResourceManager&&H$q.currentResourceManager.addResource(this)}H$U(H$d,"laya.resource.Resource",H$i);var H$K=H$d.prototype;return H$a.imps(H$K,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),H$K._setUrl=function(H$f){var H$K;this._url!==H$f&&(this._url&&((H$K=H$d._urlResourcesMap[this._url]).splice(H$K.indexOf(this),1),0===H$K.length&&delete H$d._urlResourcesMap[this._url]),H$f&&((H$K=H$d._urlResourcesMap[H$f])||(H$d._urlResourcesMap[H$f]=H$K=[]),H$K.push(this)),this._url=H$f)},H$K._getGroup=function(){return this._group},H$K._setGroup=function(H$f){var H$K;this._group!==H$f&&(this._group&&((H$K=H$d._groupResourcesMap[this._group]).splice(H$K.indexOf(this),1),0===H$K.length&&delete H$d._groupResourcesMap[this._group]),H$f&&((H$K=H$d._groupResourcesMap[H$f])||(H$d._groupResourcesMap[H$f]=H$K=[]),H$K.push(this)),this._group=H$f)},H$K._addReference=function(){this._referenceCount++},H$K._removeReference=function(){this._referenceCount--},H$K._clearReference=function(){this._referenceCount=0},H$K._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},H$K.recreateResource=function(){this.completeCreate()},H$K.disposeResource=function(){},H$K.activeResource=function(H$f){void 0===H$f&&(H$f=!1),this._lastUseFrameCount=H$p.loopCount,!this._destroyed&&this.__loaded&&(this._released||H$f)&&this.recreateResource()},H$K.releaseResource=function(H$f){return void 0===H$f&&(H$f=!0),!(!H$f&&this.lock)&&(!(this._released&&!H$f)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},H$K.onAsynLoaded=function(H$f,H$K,H$Y){throw new Error("Resource: must override this function!")},H$K.destroy=function(){var H$f;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete H$d._idResourcesMap[this.id],this._url&&((H$f=H$d._urlResourcesMap[this._url])&&(H$f.splice(H$f.indexOf(this),1),0===H$f.length&&delete H$d._urlResourcesMap[this.url]),H$df.clearRes(this._url),this.__loaded||H$R.cancelLoadByUrl(this._url)),this._group&&((H$f=H$d._groupResourcesMap[this._group]).splice(H$f.indexOf(this),1),0===H$f.length&&delete H$d._groupResourcesMap[this.url]))},H$K.completeCreate=function(){this._released=!1,this.event("recovered",this)},H$K.dispose=function(){this.destroy()},H$B(0,H$K,"memorySize",function(){return this._memorySize},function(H$f){var H$K=H$f-this._memorySize;this._memorySize=H$f,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,H$K),this.resourceManager&&this.resourceManager.addSize(H$K)}),H$B(0,H$K,"_loaded",null,function(H$f){this.__loaded=H$f}),H$B(0,H$K,"loaded",function(){return this.__loaded}),H$B(0,H$K,"id",function(){return this._$1__id}),H$B(0,H$K,"destroyed",function(){return this._destroyed}),H$B(0,H$K,"group",function(){return this._getGroup()},function(H$f){this._setGroup(H$f)}),H$B(0,H$K,"resourceManager",function(){return this._resourceManager}),H$B(0,H$K,"url",function(){return this._url}),H$B(0,H$K,"released",function(){return this._released}),H$B(0,H$K,"referenceCount",function(){return this._referenceCount}),H$d.getResourceByID=function(H$f){return H$d._idResourcesMap[H$f]},H$d.getResourceByURL=function(H$f,H$K){return void 0===H$K&&(H$K=0),null==H$d._urlResourcesMap[H$f]?null:H$d._urlResourcesMap[H$f][H$K]},H$d.getResourceCountByURL=function(H$f){return H$d._urlResourcesMap[H$f].length},H$d.destroyUnusedResources=function(H$f){var H$K;if(H$f){var H$Y=H$d._groupResourcesMap[H$f];if(H$Y)for(var H$X=H$Y.slice(),H$L=0,H$H=H$X.length;H$L<H$H;H$L++)(H$K=H$X[H$L]).lock||0!==H$K._referenceCount||H$K.destroy()}else for(var H$E in H$d._idResourcesMap)(H$K=H$d._idResourcesMap[H$E]).lock||0!==H$K._referenceCount||H$K.destroy()},H$d._uniqueIDCounter=0,H$d._idResourcesMap={},H$d._urlResourcesMap={},H$d._groupResourcesMap={},H$d}()),H$Uf=function(H$f){function H$_(H$f,H$K){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,H$_.__super.call(this),H$f&&null!=H$f._addReference&&H$f._addReference(),this.setTo(H$f,H$K)}H$U(H$_,"laya.resource.Texture",H$i);var H$K=H$_.prototype;return H$K._setUrl=function(H$f){this.url=H$f},H$K.setTo=function(H$f,H$K){if(H$f instanceof H$E.HTMLElement){var H$Y=H$Sf.create("2D",H$f);this.bitmap=H$Y}else this.bitmap=H$f;if(this.uv=H$K||H$_.DEF_UV,H$f){this._w=H$f.width,this._h=H$f.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var H$X=this;if(this._loaded)H$R.addToAtlas&&H$R.addToAtlas(H$X);else{var H$L=H$f;H$L instanceof laya.resource.HTMLImage&&H$L.image&&H$L.image.addEventListener("load",function(H$f){H$R.addToAtlas&&H$R.addToAtlas(H$X)},!1)}}},H$K.active=function(){this.bitmap&&this.bitmap.activeResource()},H$K.destroy=function(H$f){if(void 0===H$f&&(H$f=!1),this.alphaTexture&&(this.alphaTexture.destroy(H$f),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var H$K=this.bitmap;H$f?(H$k.isConchApp&&H$K.source&&H$K.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,H$K.dispose(),H$K._clearReference()):(H$K._removeReference(),0==H$K.referenceCount&&(H$k.isConchApp&&H$K.source&&H$K.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,H$K.dispose())),this.url&&this===H$a.loader.getRes(this.url)&&H$a.loader.clearRes(this.url,H$f),this._loaded=!1}},H$K.load=function(H$f){var H$K=this;this._loaded=!1,H$f=H$T.customFormat(H$f);var H$Y=this.bitmap||(this.bitmap=H$sf.create(H$f));H$Y.uri=H$f,H$Y&&H$Y._addReference();var H$X=this;H$Y.onload=function(){H$Y.onload=null,H$X._loaded=!0,H$K.sourceWidth=H$K._w=H$Y.width,H$K.sourceHeight=H$K._h=H$Y.height,H$X.event("loaded",this),H$R.addToAtlas&&H$R.addToAtlas(H$X)}},H$K.addTextureToAtlas=function(H$f){H$R.addTextureToAtlas(this)},H$K.getPixels=function(H$f,H$K,H$Y,H$X){if(H$k.isConchApp){var H$L=this.bitmap;if(H$L.source&&H$L.source.getImageData){var H$H=H$L.source.getImageData(H$f,H$K,H$Y,H$X),H$E=new Uint8Array(H$H);return Array.from(H$E)}return null}return H$k.isWebGL?H$R.getTexturePixels(this,H$f,H$K,H$Y,H$X):(H$P.canvas.size(H$Y,H$X),H$P.canvas.clear(),H$P.context.drawTexture(this,-H$f,-H$K,this.width,this.height,0,0),H$P.context.getImageData(0,0,H$Y,H$X).data)},H$K.onAsynLoaded=function(H$f,H$K){if(H$K){if("function"!=typeof H$K._addReference)throw new Error("bitmap._addReference is not a function. "+H$K.className+" "+typeof H$K._addReference+" "+H$K.constructor);H$K._addReference()}this.setTo(H$K,this.uv),this._loaded&&this.event("loaded",this)},H$B(0,H$K,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),H$B(0,H$K,"loaded",function(){return this._loaded}),H$B(0,H$K,"released",function(){return!this.bitmap||this.bitmap.released}),H$B(0,H$K,"width",function(){return this._w?this._w:this.uv&&this.uv!==H$_.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(H$f){this._w=H$f,this.sourceWidth||(this.sourceWidth=H$f)}),H$B(0,H$K,"repeat",function(){return!H$k.isWebGL||!this.bitmap||this.bitmap.repeat},function(H$f){H$f&&H$k.isWebGL&&this.bitmap&&(this.bitmap.repeat=H$f)&&(this.bitmap.enableMerageInAtlas=!1)}),H$B(0,H$K,"height",function(){return this._h?this._h:this.uv&&this.uv!==H$_.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(H$f){this._h=H$f,this.sourceHeight||(this.sourceHeight=H$f)}),H$B(0,H$K,"isLinearSampling",function(){return!H$k.isWebGL||9728!=this.bitmap.minFifter},function(H$f){!H$f&&H$k.isWebGL&&(H$f||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),H$_.moveUV=function(H$f,H$K,H$Y){for(var H$X=0;H$X<8;H$X+=2)H$Y[H$X]+=H$f,H$Y[H$X+1]+=H$K;return H$Y},H$_.create=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){void 0===H$H&&(H$H=0),void 0===H$E&&(H$E=0),void 0===H$d&&(H$d=0),void 0===H$O&&(H$O=0);var H$i=H$f instanceof laya.resource.Texture,H$U=H$i?H$f.uv:H$_.DEF_UV,H$Z=H$i?H$f.bitmap:H$f,H$y=H$R.isAtlas(H$Z);if(H$y){var H$l=H$Z._atlaser,H$B=H$f._atlasID;if(-1==H$B)throw new Error("create texture error");H$Z=H$l._inAtlasTextureBitmapValue[H$B],H$U=H$l._inAtlasTextureOriUVValue[H$B]}var H$$=new H$_(H$Z,null);H$Z.width&&H$K+H$X>H$Z.width&&(H$X=H$Z.width-H$K),H$Z.height&&H$Y+H$L>H$Z.height&&(H$L=H$Z.height-H$Y),H$$.width=H$X,H$$.height=H$L,H$$.offsetX=H$H,H$$.offsetY=H$E,H$$.sourceWidth=H$d||H$X,H$$.sourceHeight=H$O||H$L;var H$h=1/H$Z.width,H$A=1/H$Z.height;H$K*=H$h,H$Y*=H$A,H$X*=H$h,H$L*=H$A;var H$x=H$$.uv[0],H$S=H$$.uv[1],H$z=H$$.uv[4],H$C=H$$.uv[5],H$s=H$z-H$x,H$a=H$C-H$S,H$I=H$_.moveUV(H$U[0],H$U[1],[H$K,H$Y,H$K+H$X,H$Y,H$K+H$X,H$Y+H$L,H$K,H$Y+H$L]);H$$.uv=[H$x+H$I[0]*H$s,H$S+H$I[1]*H$a,H$z-(1-H$I[2])*H$s,H$S+H$I[3]*H$a,H$z-(1-H$I[4])*H$s,H$C-(1-H$I[5])*H$a,H$x+H$I[6]*H$s,H$C-(1-H$I[7])*H$a],H$y&&H$$.addTextureToAtlas();var H$n=H$Z.scaleRate;return H$n&&1!=H$n?(H$$.sourceWidth/=H$n,H$$.sourceHeight/=H$n,H$$.width/=H$n,H$$.height/=H$n,H$$.scaleRate=H$n,H$$.offsetX/=H$n,H$$.offsetY/=H$n):H$$.scaleRate=1,H$$},H$_.createFromTexture=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$f.scaleRate;1!=H$H&&(H$K*=H$H,H$Y*=H$H,H$X*=H$H,H$L*=H$H);var H$E=H$n.TEMP.setTo(H$K-H$f.offsetX,H$Y-H$f.offsetY,H$X,H$L),H$d=H$E.intersection(H$_._rect1.setTo(0,0,H$f.width,H$f.height),H$_._rect2);if(!H$d)return null;var H$O=H$_.create(H$f,H$d.x,H$d.y,H$d.width,H$d.height,H$d.x-H$E.x,H$d.y-H$E.y,H$X,H$L);if(H$O.bitmap&&H$O.bitmap._removeReference)return H$O.bitmap._removeReference(),H$O;var H$i="bitmap:"+(H$O.bitmap?H$O.bitmap.constructor?H$O.bitmap.constructor.name:H$O.bitmap.__className:"")+", url:"+(H$f.url+" | "+(H$O.bitmap?H$O.bitmap.url:H$f.url))+", x="+H$K+",y="+H$Y+",width="+H$X+",height="+H$L+", result="+(H$d?H$d.x+","+H$d.y+","+H$d.width+","+H$d.height:"null")+", rect="+H$E.x+","+H$E.y+","+H$E.width+","+H$E.height;throw new Error("报错：bitmap._removeReference is not a function  "+H$i)},H$_.DEF_UV=[0,0,1,0,1,1,0,1],H$_.INV_UV=[0,1,1,1,1,0,0,0],H$_._rect1=new H$n,H$_._rect2=new H$n,H$_}(),H$f=function(H$f){var H$d;function H$H(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,H$H.__super.call(this)}H$U(H$H,"laya.utils.TimeLine",H$i);var H$K=H$H.prototype;return H$K.to=function(H$f,H$K,H$Y,H$X,H$L){return void 0===H$L&&(H$L=0),this._create(H$f,H$K,H$Y,H$X,H$L,!0)},H$K.from=function(H$f,H$K,H$Y,H$X,H$L){return void 0===H$L&&(H$L=0),this._create(H$f,H$K,H$Y,H$X,H$L,!1)},H$K._create=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=H$c.getItemByClass("tweenData",H$d);return H$E.isTo=H$H,H$E.type=0,H$E.target=H$f,H$E.duration=H$Y,H$E.data=H$K,H$E.startTime=this._startTime+H$L,H$E.endTime=H$E.startTime+H$E.duration,H$E.ease=H$X,this._startTime=Math.max(H$E.endTime,this._startTime),this._tweenDataList.push(H$E),this._startTimeSort=!0,this._endTimeSort=!0,this},H$K.addLabel=function(H$f,H$K){var H$Y=H$c.getItemByClass("tweenData",H$d);return H$Y.type=1,H$Y.data=H$f,H$Y.endTime=H$Y.startTime=this._startTime+H$K,this._labelDic||(this._labelDic={}),this._labelDic[H$f]=H$Y,this._tweenDataList.push(H$Y),this},H$K.removeLabel=function(H$f){if(this._labelDic&&this._labelDic[H$f]){var H$K=this._labelDic[H$f];if(H$K){var H$Y=this._tweenDataList.indexOf(H$K);-1<H$Y&&this._tweenDataList.splice(H$Y,1)}delete this._labelDic[H$f]}},H$K.gotoTime=function(H$f){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var H$K,H$Y,H$X,H$L;for(var H$H in this._firstTweenDic)if(H$Y=this._firstTweenDic[H$H])for(var H$E in H$Y)H$Y.diyTarget.hasOwnProperty(H$E)&&(H$Y.diyTarget[H$E]=H$Y[H$E]);for(H$H in this._tweenDic)(H$K=this._tweenDic[H$H]).clear(),delete this._tweenDic[H$H];if(this._index=0,this._gidIndex=0,this._currTime=H$f,this._lastTime=H$P.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=H$X=this._tweenDataList.concat(),H$X.sort(function(H$f,H$K){return H$f.endTime>H$K.endTime?1:H$f.endTime<H$K.endTime?-1:0})}else H$X=this._endTweenDataList;for(var H$d=0,H$O=H$X.length;H$d<H$O;H$d++)if(0==(H$L=H$X[H$d]).type){if(!(H$f>=H$L.endTime))break;this._index=Math.max(this._index,H$d+1);var H$i=H$L.data;if(H$L.isTo)for(var H$U in H$i)H$L.target[H$U]=H$i[H$U]}for(H$d=0,H$O=this._tweenDataList.length;H$d<H$O;H$d++)0==(H$L=this._tweenDataList[H$d]).type&&H$f>=H$L.startTime&&H$f<H$L.endTime&&(this._index=Math.max(this._index,H$d+1),this._gidIndex++,(H$K=H$c.getItemByClass("tween",H$D))._create(H$L.target,H$L.data,H$L.duration,H$L.ease,H$x.create(this,this._animComplete,[this._gidIndex]),0,!1,H$L.isTo,!0,!1),H$K.setStartTime(this._currTime-(H$f-H$L.startTime)),H$K._updateEase(this._currTime),H$K.gid=this._gidIndex,this._tweenDic[this._gidIndex]=H$K)}},H$K.gotoLabel=function(H$f){if(null!=this._labelDic){var H$K=this._labelDic[H$f];H$K&&this.gotoTime(H$K.startTime)}},H$K.pause=function(){H$a.timer.clear(this,this._update)},H$K.resume=function(){this.play(this._currTime,this._loopKey)},H$K.play=function(H$f,H$K){if(void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(H$f,H$K){return H$f.startTime>H$K.startTime?1:H$f.startTime<H$K.startTime?-1:0});for(var H$Y=0,H$X=this._tweenDataList.length;H$Y<H$X;H$Y++){var H$L=this._tweenDataList[H$Y];if(null!=H$L&&0==H$L.type){var H$H=H$L.target,H$E=H$H.$_GID||(H$H.$_GID=H$g.getGID()),H$d=null;for(var H$O in null==this._firstTweenDic[H$E]?((H$d={}).diyTarget=H$H,this._firstTweenDic[H$E]=H$d):H$d=this._firstTweenDic[H$E],H$L.data)null==H$d[H$O]&&(H$d[H$O]=H$H[H$O])}}}"string"==typeof H$f?this.gotoLabel(H$f):this.gotoTime(H$f),this._loopKey=H$K,this._lastTime=H$P.now(),H$a.timer.frameLoop(1,this,this._update)}},H$K._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var H$f in this._tweenDic)(H$K=this._tweenDic[H$f]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var H$K,H$Y=H$P.now(),H$X=H$Y-this._lastTime,H$L=this._currTime+=H$X*this.scale;for(H$f in this._lastTime=H$Y,this._tweenDic)(H$K=this._tweenDic[H$f])._updateEase(H$L);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var H$H=this._tweenDataList[this._index];H$L>=H$H.startTime&&(this._index++,0==H$H.type?(this._gidIndex++,(H$K=H$c.getItemByClass("tween",H$D))._create(H$H.target,H$H.data,H$H.duration,H$H.ease,H$x.create(this,this._animComplete,[this._gidIndex]),0,!1,H$H.isTo,!0,!1),H$K.setStartTime(H$L),H$K.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=H$K)._updateEase(H$L)):this.event("label",H$H.data))}},H$K._animComplete=function(H$f){this._tweenDic[H$f]&&delete this._tweenDic[H$f]},H$K._complete=function(){this.event("complete")},H$K.reset=function(){var H$f;if(this._labelDic)for(H$f in this._labelDic)delete this._labelDic[H$f];for(H$f in this._tweenDic)this._tweenDic[H$f].clear(),delete this._tweenDic[H$f];for(H$f in this._firstTweenDic)delete this._firstTweenDic[H$f];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var H$K,H$Y=0;for(H$K=this._tweenDataList.length,H$Y=0;H$Y<H$K;H$Y++)this._tweenDataList[H$Y]&&this._tweenDataList[H$Y].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,H$a.timer.clear(this,this._update)},H$K.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},H$B(0,H$K,"index",function(){return this._frameIndex},function(H$f){this._frameIndex=H$f,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),H$B(0,H$K,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),H$H.to=function(H$f,H$K,H$Y,H$X,H$L){return void 0===H$L&&(H$L=0),(new H$H).to(H$f,H$K,H$Y,H$X,H$L)},H$H.from=function(H$f,H$K,H$Y,H$X,H$L){return void 0===H$L&&(H$L=0),(new H$H).from(H$f,H$K,H$Y,H$X,H$L)},H$H.__init$=function(){H$d=function(){function H$f(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return H$U(H$f,""),H$f.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,H$c.recover("tweenData",this)},H$f}()},H$H}(),H$Zf=function(H$L){function H$Y(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,H$Y.__super.call(this),this._style=H$d.EMPTY}H$U(H$Y,"laya.display.Sprite",H$L);var H$f=H$Y.prototype;return H$a.imps(H$f,{"laya.display.ILayout":!0}),H$f.createConchModel=function(){return new ConchNode},H$f.destroy=function(H$f){if(void 0===H$f&&(H$f=!0),this._releaseMem(),!this._destroyed){this.filters=null;var H$K=this.mask;H$K&&(this.mask=null,H$K.destroy(H$f))}H$L.prototype.destroy.call(this,H$f),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},H$f.updateZOrder=function(){H$g.updateOrder(this._childs)&&this.repaint()},H$f.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},H$f.setBounds=function(H$f){this._set$P("uBounds",H$f)},H$f.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new H$n),H$n._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},H$f.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new H$n),H$n._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},H$f._boundPointsToParent=function(H$f){void 0===H$f&&(H$f=!1);var H$K=0,H$Y=0;this._style&&(H$K=this._style._tf.translateX,H$Y=this._style._tf.translateY,H$f=H$f||0!==this._style._tf.rotate,this._style.scrollRect&&(H$K+=this._style.scrollRect.x,H$Y+=this._style.scrollRect.y));var H$X=this._getBoundPointsM(H$f);if(!H$X||H$X.length<1)return H$X;if(8!=H$X.length&&(H$X=H$f?H$C.scanPList(H$X):H$n._getWrapRec(H$X,H$n.TEMP)._getBoundPoints()),!this.transform)return H$g.transPointList(H$X,this._x-H$K,this._y-H$Y),H$X;var H$L=H$I.TEMP,H$H=0,H$E=H$X.length;for(H$H=0;H$H<H$E;H$H+=2)H$L.x=H$X[H$H],H$L.y=H$X[H$H+1],this.toParentPoint(H$L),H$X[H$H]=H$L.x,H$X[H$H+1]=H$L.y;return H$X},H$f.getGraphicBounds=function(H$f){return void 0===H$f&&(H$f=!1),this._graphics?this._graphics.getBounds(H$f):H$n.TEMP.setTo(0,0,0,0)},H$f._getBoundPointsM=function(H$f){if(void 0===H$f&&(H$f=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var H$K=H$g.clearArray(this._$P.temBM),H$Y=H$n.TEMP;return H$Y.copyFrom(this.scrollRect),H$g.concatArray(H$K,H$Y._getBoundPoints()),H$K}for(var H$X,H$L,H$H,H$E=this._graphics?this._graphics.getBoundPoints():H$g.clearArray(this._$P.temBM),H$d=0,H$O=(H$H=this._childs).length;H$d<H$O;H$d++)(H$X=H$H[H$d])instanceof laya.display.Sprite&&1==H$X.visible&&(H$L=H$X._boundPointsToParent(H$f))&&(H$E=H$E?H$g.concatArray(H$E,H$L):H$L);return H$E},H$f.getStyle=function(){return this._style===H$d.EMPTY&&(this._style=new H$d),this._style},H$f.setStyle=function(H$f){this._style=H$f},H$f._adjustTransform=function(){this._tfChanged=!1;var H$f,H$K=this._style._tf,H$Y=H$K.scaleX,H$X=H$K.scaleY;if(H$K.rotate||1!==H$Y||1!==H$X||H$K.skewX||H$K.skewY){(H$f=this._transform||(this._transform=H$V.create())).bTransform=!0;var H$L=.0174532922222222*(H$K.rotate-H$K.skewX),H$H=.0174532922222222*(H$K.rotate+H$K.skewY),H$E=Math.cos(H$H),H$d=Math.sin(H$H),H$O=Math.sin(H$L),H$i=Math.cos(H$L);return H$f.a=H$Y*H$E,H$f.b=H$Y*H$d,H$f.c=-H$X*H$O,H$f.d=H$X*H$i,H$f.tx=H$f.ty=0,H$f}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,H$f},H$f.pos=function(H$f,H$K,H$Y){if(void 0===H$Y&&(H$Y=!1),this._x!==H$f||this._y!==H$K){if(this.destroyed)return this;if(H$Y){this._x=H$f,this._y=H$K,this.conchModel&&this.conchModel.pos(this._x,this._y);var H$X=this._parent;H$X&&0===H$X._repaint&&(H$X._repaint=1,H$X.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=H$f,this.y=H$K}return this},H$f.pivot=function(H$f,H$K){return this.pivotX=H$f,this.pivotY=H$K,this},H$f.size=function(H$f,H$K){return this.width=H$f,this.height=H$K,this},H$f.scale=function(H$f,H$K,H$Y){void 0===H$Y&&(H$Y=!1);var H$X=this.getStyle(),H$L=H$X._tf;if(H$L.scaleX!=H$f||H$L.scaleY!=H$K){if(this.destroyed)return this;if(H$Y){H$X.setScale(H$f,H$K),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H$f,H$K),this._renderType|=4;var H$H=this._parent;H$H&&0===H$H._repaint&&(H$H._repaint=1,H$H.parentRepaint())}else this.scaleX=H$f,this.scaleY=H$K}return this},H$f.skew=function(H$f,H$K){return this.skewX=H$f,this.skewY=H$K,this},H$f.render=function(H$f,H$K,H$Y){H$p.spriteCount++,H$Q.renders[this._renderType]._fun(this,H$f,H$K+this._x,H$Y+this._y),this._repaint=0},H$f.drawToCanvas=function(H$f,H$K,H$Y,H$X){if(H$k.isConchNode){var H$L=H$Sf.create("2D");return new H$e(H$f,H$K,H$L).ctx.setCanvasType(1),this.conchModel.drawToCanvas(H$L.source,H$Y,H$X),H$L}return H$R.drawToCanvas(this,this._renderType,H$f,H$K,H$Y,H$X)},H$f.customRender=function(H$f,H$K,H$Y){this._renderType|=1024},H$f._applyFilters=function(){var H$f;if(!H$k.isWebGL&&((H$f=this._$P.filters)&&!(H$f.length<1)))for(var H$K=0,H$Y=H$f.length;H$K<H$Y;H$K++)H$f[H$K].action.apply(this._$P.cacheCanvas)},H$f._isHaveGlowFilter=function(){var H$f,H$K=0;if(this.filters)for(H$K=0;H$K<this.filters.length;H$K++)if(8==this.filters[H$K].type)return!0;for(H$K=0,H$f=this._childs.length;H$K<H$f;H$K++)if(this._childs[H$K]._isHaveGlowFilter())return!0;return!1},H$f.localToGlobal=function(H$f,H$K){void 0===H$K&&(H$K=!1),!0===H$K&&(H$f=new H$I(H$f.x,H$f.y));for(var H$Y=this;H$Y&&H$Y!=H$a.stage;)H$f=H$Y.toParentPoint(H$f),H$Y=H$Y.parent;return H$f},H$f.globalToLocal=function(H$f,H$K){void 0===H$K&&(H$K=!1),H$K&&(H$f=new H$I(H$f.x,H$f.y));for(var H$Y=this,H$X=[];H$Y&&H$Y!=H$a.stage;)H$X.push(H$Y),H$Y=H$Y.parent;for(var H$L=H$X.length-1;0<=H$L;)H$f=(H$Y=H$X[H$L]).fromParentPoint(H$f),H$L--;return H$f},H$f.toParentPoint=function(H$f){if(!H$f)return H$f;H$f.x-=this.pivotX,H$f.y-=this.pivotY,this.transform&&this._transform.transformPoint(H$f),H$f.x+=this._x,H$f.y+=this._y;var H$K=this._style.scrollRect;return H$K&&(H$f.x-=H$K.x,H$f.y-=H$K.y),H$f},H$f.fromParentPoint=function(H$f){if(!H$f)return H$f;H$f.x-=this._x,H$f.y-=this._y;var H$K=this._style.scrollRect;return H$K&&(H$f.x+=H$K.x,H$f.y+=H$K.y),this.transform&&this._transform.invertTransformPoint(H$f),H$f.x+=this.pivotX,H$f.y+=this.pivotY,H$f},H$f.on=function(H$f,H$K,H$Y,H$X){return 1!==this._mouseEnableState&&this.isMouseEvent(H$f)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(H$f,H$K,H$Y,H$X,!1)):H$L.prototype.on.call(this,H$f,H$K,H$Y,H$X)},H$f.once=function(H$f,H$K,H$Y,H$X){return 1!==this._mouseEnableState&&this.isMouseEvent(H$f)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(H$f,H$K,H$Y,H$X,!0)):H$L.prototype.once.call(this,H$f,H$K,H$Y,H$X)},H$f._$2__onDisplay=function(){if(1!==this._mouseEnableState){var H$f=this;for(H$f=H$f.parent;H$f&&1!==H$f._mouseEnableState&&!H$f._getBit(2);)H$f.mouseEnabled=!0,H$f._setBit(2,!0),H$f=H$f.parent}},H$f.loadImage=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=this;return void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0),this.graphics.loadImage(H$f,H$K,H$Y,H$X,H$L,function(H$f){H$E.destroyed||(H$E.size(H$K+(H$X||H$f.width),H$Y+(H$L||H$f.height)),H$E.repaint(),H$H&&H$H.runWith(H$f))}),this},H$f.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},H$f._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},H$f._childChanged=function(H$f){this._childs.length?this._renderType|=2048:this._renderType&=-2049,H$f&&this._get$P("hasZorder")&&H$a.timer.callLater(this,this.updateZOrder),this.repaint()},H$f.parentRepaint=function(){var H$f=this._parent;H$f&&0===H$f._repaint&&(H$f._repaint=1,H$f.parentRepaint())},H$f.startDrag=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){void 0===H$K&&(H$K=!1),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=300),void 0===H$H&&(H$H=!1),void 0===H$E&&(H$E=.92),this._$P.dragging||this._set$P("dragging",new H$r),this._$P.dragging.start(this,H$f,H$K,H$Y,H$X,H$L,H$H,H$E)},H$f.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},H$f._releaseMem=function(){if(this._$P){var H$f=this._$P.cacheCanvas;H$f&&H$f.ctx&&(H$c.recover("RenderContext",H$f.ctx),H$f.ctx.canvas.size(0,0),H$f.ctx=null);var H$K=this._$P._filterCache;H$K&&(H$K.destroy(),H$K.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},H$f._setDisplay=function(H$f){H$f||this._releaseMem(),H$L.prototype._setDisplay.call(this,H$f)},H$f.hitTestPoint=function(H$f,H$K){var H$Y=this.globalToLocal(H$I.TEMP.setTo(H$f,H$K));return H$f=H$Y.x,H$K=H$Y.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?H$n.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(H$f,H$K)},H$f.getMousePoint=function(){return this.globalToLocal(H$I.TEMP.setTo(H$a.stage.mouseX,H$a.stage.mouseY))},H$f._getWords=function(){return null},H$f._addChildsToLayout=function(H$f){var H$K=this._getWords();if(null==H$K&&0==this._childs.length)return!1;if(H$K)for(var H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++)H$f.push(H$K[H$Y]);H$Y=0;for(var H$L=this._childs.length;H$Y<H$L;++H$Y){var H$H=this._childs[H$Y];H$H._style._enableLayout()&&H$H._addToLayout(H$f)}return!0},H$f._addToLayout=function(H$f){this._style.absolute||(this._style.block?H$f.push(this):this._addChildsToLayout(H$f)&&(this.x=this.y=0))},H$f._isChar=function(){return!1},H$f._getCSSStyle=function(){return this._style.getCSSStyle()},H$f._setAttributes=function(H$f,H$K){switch(H$f){case"x":this.x=parseFloat(H$K);break;case"y":this.y=parseFloat(H$K);break;case"width":this.width=parseFloat(H$K);break;case"height":this.height=parseFloat(H$K);break;default:this[H$f]=H$K}},H$f._layoutLater=function(){this.parent&&this.parent._layoutLater()},H$B(0,H$f,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(H$f){this._optimizeScrollRect!=H$f&&(this._optimizeScrollRect=H$f,this.conchModel&&this.conchModel.optimizeScrollRect(H$f))}),H$B(0,H$f,"customRenderEnable",null,function(H$f){if(H$f&&(this._renderType|=1024,H$k.isConchNode)){H$Y.CustomList.push(this);var H$K=new H$Sf("2d");H$K._setContext(new CanvasRenderingContext2D),this.customContext=new H$e(0,0,H$K),H$K.context.setCanvasType&&H$K.context.setCanvasType(2),this.conchModel.custom(H$K.context)}}),H$B(0,H$f,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(H$f){this.cacheAs=H$f?this._$P.hasFilter?"none":"normal":"none"}),H$B(0,H$f,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(H$f){var H$K=this._$P.cacheCanvas;if(H$f!==(H$K?H$K.type:"none")){if("none"!==H$f)this._getBit(1)||this._setUpNoticeType(1),H$K||(H$K=this._set$P("cacheCanvas",H$c.getItemByClass("cacheCanvas",Object))),H$K.type=H$f,H$K.reCache=!0,this._renderType|=16,"bitmap"==H$f&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(H$K){var H$Y=H$K;H$Y&&H$Y.ctx&&(H$c.recover("RenderContext",H$Y.ctx),H$Y.ctx.canvas.size(0,0),H$Y.ctx=null),H$c.recover("cacheCanvas",H$K)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),H$B(0,H$f,"zOrder",function(){return this._zOrder},function(H$f){this._zOrder!=H$f&&(this._zOrder=H$f,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(H$f),this._parent&&(H$f&&this._parent._set$P("hasZorder",!0),H$a.timer.callLater(this._parent,this.updateZOrder)))}),H$B(0,H$f,"rotation",function(){return this._style._tf.rotate},function(H$f){var H$K=this.getStyle();if(H$K._tf.rotate!==H$f){H$K.setRotate(H$f),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(H$f),this._renderType|=4;var H$Y=this._parent;H$Y&&0===H$Y._repaint&&(H$Y._repaint=1,H$Y.parentRepaint())}}),H$B(0,H$f,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(H$f){this._width!==H$f&&(this._width=H$f,this.conchModel&&this.conchModel.size(H$f,this._height),this.repaint())}),H$B(0,H$f,"x",function(){return this._x},function(H$f){if(this._x!==H$f){if(this.destroyed)return;this._x=H$f,this.conchModel&&this.conchModel.pos(H$f,this._y);var H$K=this._parent;H$K&&0===H$K._repaint&&(H$K._repaint=1,H$K.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),H$B(0,H$f,"globalScaleY",function(){for(var H$f=1,H$K=this;H$K&&H$K!==H$a.stage;)H$f*=H$K.scaleY,H$K=H$K.parent;return H$f}),H$B(0,H$f,"hitArea",function(){return this._$P.hitArea},function(H$f){this._set$P("hitArea",H$f)}),H$B(0,H$f,"staticCache",function(){return this._$P.staticCache},function(H$f){this._set$P("staticCache",H$f),H$f||this.reCache()}),H$B(0,H$f,"texture",function(){return this._texture},function(H$f){this._texture!=H$f&&(this._texture=H$f,this.graphics.cleanByTexture(H$f,0,0))}),H$B(0,H$f,"y",function(){return this._y},function(H$f){if(this._y!==H$f){if(this.destroyed)return;this._y=H$f,this.conchModel&&this.conchModel.pos(this._x,H$f);var H$K=this._parent;H$K&&0===H$K._repaint&&(H$K._repaint=1,H$K.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),H$B(0,H$f,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(H$f){this._height!==H$f&&(this._height=H$f,this.conchModel&&this.conchModel.size(this._width,H$f),this.repaint())}),H$B(0,H$f,"blendMode",function(){return this._style.blendMode},function(H$f){this.getStyle().blendMode=H$f,this.conchModel&&this.conchModel.blendMode(H$f),H$f&&"source-over"!=H$f?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),H$B(0,H$f,"scaleX",function(){return this._style._tf.scaleX},function(H$f){var H$K=this.getStyle();if(H$K._tf.scaleX!==H$f){H$K.setScaleX(H$f),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H$f,H$K._tf.scaleY),this._renderType|=4;var H$Y=this._parent;H$Y&&0===H$Y._repaint&&(H$Y._repaint=1,H$Y.parentRepaint())}}),H$B(0,H$f,"scaleY",function(){return this._style._tf.scaleY},function(H$f){var H$K=this.getStyle();if(H$K._tf.scaleY!==H$f){H$K.setScaleY(H$f),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(H$K._tf.scaleX,H$f),this._renderType|=4;var H$Y=this._parent;H$Y&&0===H$Y._repaint&&(H$Y._repaint=1,H$Y.parentRepaint())}}),H$B(0,H$f,"stage",function(){return H$a.stage}),H$B(0,H$f,"skewX",function(){return this._style._tf.skewX},function(H$f){var H$K=this.getStyle();if(H$K._tf.skewX!==H$f){H$K.setSkewX(H$f),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(H$f,H$K._tf.skewY),this._renderType|=4;var H$Y=this._parent;H$Y&&0===H$Y._repaint&&(H$Y._repaint=1,H$Y.parentRepaint())}}),H$B(0,H$f,"scrollRect",function(){return this._style.scrollRect},function(H$f){this.getStyle().scrollRect=H$f,this.repaint(),H$f?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(H$f.x,H$f.y,H$f.width,H$f.height)):(this._renderType&=-129,this.conchModel&&(H$Y.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),H$B(0,H$f,"skewY",function(){return this._style._tf.skewY},function(H$f){var H$K=this.getStyle();if(H$K._tf.skewY!==H$f){H$K.setSkewY(H$f),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(H$K._tf.skewX,H$f),this._renderType|=4;var H$Y=this._parent;H$Y&&0===H$Y._repaint&&(H$Y._repaint=1,H$Y.parentRepaint())}}),H$B(0,H$f,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(H$f){this._tfChanged=!1,(this._transform=H$f)&&(this._x=H$f.tx,this._y=H$f.ty,H$f.tx=H$f.ty=0,this.conchModel&&this.conchModel.transform(H$f.a,H$f.b,H$f.c,H$f.d,this._x,this._y)),H$f?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),H$B(0,H$f,"pivotX",function(){return this._style._tf.translateX},function(H$f){this.getStyle().setTranslateX(H$f),this.conchModel&&this.conchModel.pivot(H$f,this._style._tf.translateY),this.repaint()}),H$B(0,H$f,"pivotY",function(){return this._style._tf.translateY},function(H$f){this.getStyle().setTranslateY(H$f),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,H$f),this.repaint()}),H$B(0,H$f,"alpha",function(){return this._style.alpha},function(H$f){this._style&&this._style.alpha!==H$f&&(H$f=H$f<0?0:1<H$f?1:H$f,this.getStyle().alpha=H$f,this.conchModel&&this.conchModel.alpha(H$f),1!==H$f?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),H$B(0,H$f,"visible",function(){return this._style.visible},function(H$f){this._style&&this._style.visible!==H$f&&(this.getStyle().visible=H$f,this.conchModel&&this.conchModel.visible(H$f),this.parentRepaint())}),H$B(0,H$f,"graphics",function(){return this._graphics||(this.graphics=H$R.createGraphics())},function(H$f){this._graphics&&(this._graphics._sp=null),(this._graphics=H$f)?(this._renderType&=-2,this._renderType|=512,(H$f._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(H$Y.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),H$B(0,H$f,"filters",function(){return this._$P.filters},function(H$f){H$f&&0===H$f.length&&(H$f=null),this._$P.filters!=H$f&&(this._set$P("filters",H$f?H$f.slice():null),H$k.isConchApp&&(this.conchModel&&(H$Y.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),H$k.isWebGL&&(H$f&&H$f.length?this._renderType|=32:this._renderType&=-33),H$f&&0<H$f.length?(this._getBit(1)||this._setUpNoticeType(1),H$k.isWebGL&&1==H$f.length&&H$f[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(H$k.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),H$B(0,H$f,"parent",H$L.prototype._$get_parent,function(H$f){H$a.superSet(H$ff,this,"parent",H$f),H$f&&this._getBit(2)&&this._$2__onDisplay()}),H$B(0,H$f,"mask",function(){return this._$P._mask},function(H$f){H$f&&this.mask&&this.mask._$P.maskParent||(H$f?(this.cacheAs="bitmap",this._set$P("_mask",H$f),H$f._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",H$f),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(H$f?H$f.conchModel:null),this._renderType|=64,this.parentRepaint())}),H$B(0,H$f,"mouseEnabled",function(){return 1<this._mouseEnableState},function(H$f){this._mouseEnableState=H$f?2:1}),H$B(0,H$f,"globalScaleX",function(){for(var H$f=1,H$K=this;H$K&&H$K!==H$a.stage;)H$f*=H$K.scaleX,H$K=H$K.parent;return H$f}),H$B(0,H$f,"mouseX",function(){return this.getMousePoint().x}),H$B(0,H$f,"mouseY",function(){return this.getMousePoint().y}),H$Y.fromImage=function(H$f){return(new H$Y).loadImage(H$f)},H$Y._cachePool=[],H$Y.CustomList=[],H$O(H$Y,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=H$E.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),H$Y}(H$ff),H$yf=function(H$f){function H$K(H$f){this._audio=null,this._onEnd=null,this._resumePlay=null,H$K.__super.call(this),this._onEnd=H$g.bind(this.__onEnd,this),this._resumePlay=H$g.bind(this.__resumePlay,this),H$f.addEventListener("ended",this._onEnd),this._audio=H$f}H$U(H$K,"laya.media.h5audio.AudioSoundChannel",H$Xf);var H$Y=H$K.prototype;return H$Y.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(H$a.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},H$Y.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,H$P.container.appendChild(this._audio),this._audio.play()}catch(H$f){this.event("error")}},H$Y.play=function(H$f){this.isStopped=!1;try{this._audio.playbackRate=H$m.playbackRate,this._audio.currentTime=this.startTime}catch(H$f){return void this._audio.addEventListener("canplay",this._resumePlay)}H$m.addChannel(this),H$P.container.appendChild(this._audio),!H$f&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},H$Y.stop=function(){this.isStopped=!0,H$m.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&H$k.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),H$P.onIE||this._audio!=H$Yf._musicAudio&&H$c.recover("audio:"+this.url,this._audio),H$P.removeElement(this._audio),this._audio=null)},H$Y.pause=function(){this.isStopped=!0,H$m.removeChannel(this),"pause"in this._audio&&this._audio.pause()},H$Y.resume=function(){this._audio&&(this.isStopped=!1,H$m.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},H$B(0,H$Y,"position",function(){return this._audio?this._audio.currentTime:0}),H$B(0,H$Y,"duration",function(){return this._audio?this._audio.duration:0}),H$B(0,H$Y,"volume",function(){return this._audio?this._audio.volume:1},function(H$f){this._audio&&(this._audio.volume=H$f)}),H$K}(),H$lf=function(H$f){function H$K(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=H$Hf.ctx,H$K.__super.call(this),this._onPlayEnd=H$g.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}H$U(H$K,"laya.media.webaudio.WebAudioSoundChannel",H$Xf);var H$Y=H$K.prototype;return H$Y.play=function(H$f){if(H$m.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var H$K=this.context,H$Y=this.gain,H$X=H$K.createBufferSource();(this.bufferSource=H$X).buffer=this.audioBuffer,H$X.connect(H$Y),H$Y&&H$Y.disconnect(),H$Y.connect(H$K.destination),H$X.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=H$P.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(H$X.loop=!0),H$X.playbackRate.setTargetAtTime?H$X.playbackRate.setTargetAtTime(H$m.playbackRate,this.context.currentTime,.1):H$X.playbackRate.value=H$m.playbackRate,H$X.start(0,this.startTime),!H$f&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},H$Y.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(H$a.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},H$Y._clearBufferSource=function(){if(this.bufferSource){var H$f=this.bufferSource;H$f.stop?H$f.stop(0):H$f.noteOff(0),H$f.disconnect(0),H$f.onended=null,H$K._tryCleanFailed||this._tryClearBuffer(H$f),this.bufferSource=null}},H$Y._tryClearBuffer=function(H$f){try{H$f.buffer=null}catch(H$f){H$K._tryCleanFailed=!0}},H$Y.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,H$m.removeChannel(this),this.startHandler=null,this.completeHandler=null},H$Y.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,H$m.removeChannel(this)},H$Y.resume=function(){this.startTime=this._pauseTime,this.play(!1)},H$B(0,H$Y,"position",function(){return this.bufferSource?(H$P.now()-this._startTime)/1e3+this.startTime:0}),H$B(0,H$Y,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),H$B(0,H$Y,"volume",function(){return this._volume},function(H$f){this.isStopped||(this._volume=H$f,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(H$f,this.context.currentTime,.1):this.gain.gain.value=H$f)}),H$K._tryCleanFailed=!1,H$K}(),H$Bf=function(H$f){function H$K(){H$K.__super.call(this),this._w=0,this._h=0}H$U(H$K,"laya.resource.Bitmap",H$if);var H$Y=H$K.prototype;return H$B(0,H$Y,"width",function(){return this._w}),H$B(0,H$Y,"height",function(){return this._h}),H$B(0,H$Y,"source",function(){return this._source}),H$K}(),H$$f=function(H$K){function H$f(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,H$f.__super.call(this),this._interval=H$X.animationInterval,this._setUpNoticeType(1)}H$U(H$f,"laya.display.AnimationPlayerBase",H$K);var H$Y=H$f.prototype;return H$Y.play=function(H$f,H$K,H$Y,H$X){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=!0),void 0===H$Y&&(H$Y=""),void 0===H$X&&(H$X=!0),this._isPlaying=!0,this.index="string"==typeof H$f?this._getFrameByLabel(H$f):H$f,this.loop=H$K,this._actionName=H$Y,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},H$Y._getFrameByLabel=function(H$f){var H$K=0;for(H$K=0;H$K<this._count;H$K++)if(this._labels[H$K]&&0<=this._labels[H$K].indexOf(H$f))return H$K;return 0},H$Y._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},H$Y._setControlNode=function(H$f){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=H$f)&&H$f!=this&&(H$f.on("display",this,this._checkResumePlaying),H$f.on("undisplay",this,this._checkResumePlaying))},H$Y._setDisplay=function(H$f){H$K.prototype._setDisplay.call(this,H$f),this._checkResumePlaying()},H$Y._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},H$Y.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},H$Y.addLabel=function(H$f,H$K){this._labels||(this._labels={}),this._labels[H$K]||(this._labels[H$K]=[]),this._labels[H$K].push(H$f)},H$Y.removeLabel=function(H$f){if(H$f){if(this._labels)for(var H$K in this._labels)this._removeLabelFromLabelList(this._labels[H$K],H$f)}else this._labels=null},H$Y._removeLabelFromLabelList=function(H$f,H$K){if(H$f)for(var H$Y=H$f.length-1;0<=H$Y;H$Y--)H$f[H$Y]==H$K&&H$f.splice(H$Y,1)},H$Y.gotoAndStop=function(H$f){this.index="string"==typeof H$f?this._getFrameByLabel(H$f):H$f,this.stop()},H$Y._displayToIndex=function(H$f){},H$Y.clear=function(){this.stop(),this._labels=null},H$B(0,H$Y,"interval",function(){return this._interval},function(H$f){this._interval!=H$f&&(this._frameRateChanged=!0,this._interval=H$f,this._isPlaying&&0<H$f&&this.timerLoop(H$f,this,this._frameLoop,null,!0,!0))}),H$B(0,H$Y,"isPlaying",function(){return this._isPlaying}),H$B(0,H$Y,"index",function(){return this._index},function(H$f){if(this._index=H$f,this._displayToIndex(H$f),this._labels&&this._labels[H$f])for(var H$K=this._labels[H$f],H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++)this.event("label",H$K[H$Y])}),H$B(0,H$Y,"count",function(){return this._count}),H$f.WRAP_POSITIVE=0,H$f.WRAP_REVERSE=1,H$f.WRAP_PINGPONG=2,H$f}(H$Zf),H$hf=function(H$K){function H$l(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,H$l.__super.call(this),this.overflow=H$l.VISIBLE,this._style=new H$Kf(this),this._style.wordWrap=!1}H$U(H$l,"laya.display.Text",H$K);var H$f=H$l.prototype;return H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._lines=null,this._words&&(this._words.length=0,this._words=null)},H$f._getBoundPointsM=function(H$f){void 0===H$f&&(H$f=!1);var H$K=H$n.TEMP;return H$K.setTo(0,0,this.width,this.height),H$K._getBoundPoints()},H$f.getGraphicBounds=function(H$f){void 0===H$f&&(H$f=!1);var H$K=H$n.TEMP;return H$K.setTo(0,0,this.width,this.height),H$K},H$f._getCSSStyle=function(){return this._style},H$f.lang=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U){if(H$f=H$l.langPacks&&H$l.langPacks[H$f]?H$l.langPacks[H$f]:H$f,arguments.length<2)this._text=H$f;else{for(var H$Z=0,H$y=arguments.length;H$Z<H$y;H$Z++)H$f=H$f.replace("{"+H$Z+"}",arguments[H$Z+1]);this._text=H$f}},H$f._isPassWordMode=function(){var H$f=this._style.password;return"prompt"in this&&this.prompt==this._text&&(H$f=!1),H$f},H$f._getPassWordTxt=function(H$f){var H$K;H$K="";for(var H$Y=H$f.length;0<H$Y;H$Y--)H$K+="●";return H$K},H$f.renderText=function(H$f,H$K){var H$Y=this.graphics;H$Y.clear(!0);var H$X=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(H$P.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);H$P.context.font=H$X;var H$L=this.padding,H$H=H$L[3],H$E="left",H$d=this._lines,H$O=this.leading+this._charSize.height,H$i=this._currBitmapFont;H$i&&(H$O=this.leading+H$i.getMaxHeight());var H$U=H$L[0];if(!H$i&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(H$E="right",H$H=this._width-H$L[1]):"center"==this.align&&(H$E="center",H$H=.5*this._width+H$L[3]-H$L[1])),0<this._height){var H$Z=this._textHeight>this._height?"top":this.valign;"middle"===H$Z?H$U=.5*(this._height-H$K*H$O)+H$L[0]-H$L[2]:"bottom"===H$Z&&(H$U=this._height-H$K*H$O-H$L[2])}var H$y=this._style;if(H$i&&H$i.autoScaleSize)var H$l=H$i.fontSize/this.fontSize;if(this._clipPoint)if(H$Y.save(),H$i&&H$i.autoScaleSize){var H$B=0,H$$=0;H$B=this._width?this._width-H$L[3]-H$L[1]:this._textWidth,H$$=this._height?this._height-H$L[0]-H$L[2]:this._textHeight,H$B*=H$l,H$$*=H$l,H$Y.clipRect(H$L[3],H$L[0],H$B,H$$)}else H$Y.clipRect(H$L[3],H$L[0],this._width?this._width-H$L[3]-H$L[1]:this._textWidth,this._height?this._height-H$L[0]-H$L[2]:this._textHeight);var H$h=H$y.password;"prompt"in this&&this.prompt==this._text&&(H$h=!1);for(var H$A=0,H$x=0,H$S=Math.min(this._lines.length,H$K+H$f)||1,H$z=H$f;H$z<H$S;H$z++){var H$C,H$s=H$d[H$z];if(H$h){var H$a=H$s.length;H$s="";for(var H$I=H$a;0<H$I;H$I--)H$s+="●"}if(H$A=H$H-(this._clipPoint?this._clipPoint.x:0),H$x=H$U+H$O*H$z-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(H$E,H$A,H$x,H$z),H$i){var H$n=this.width;H$i.autoScaleSize&&(H$n=this.width*H$l),H$i.drawText(H$s,this,H$A,H$x,this.align,H$n)}else H$k.isWebGL?(this._words||(this._words=[]),(H$C=this._words.length>H$z-H$f?this._words[H$z-H$f]:new H$F).setText(H$s)):H$C=H$s,H$y.stroke?H$Y.fillBorderText(H$C,H$A,H$x,H$X,this.color,H$y.strokeColor,H$y.stroke,H$E):H$Y.fillText(H$C,H$A,H$x,H$X,this.color,H$E)}if(H$i&&H$i.autoScaleSize){var H$_=1/H$l;this.scale(H$_,H$_)}this._clipPoint&&H$Y.restore(),this._startX=H$H,this._startY=H$U},H$f.drawUnderline=function(H$f,H$K,H$Y,H$X){var H$L=this._lineWidths[H$X];switch(H$f){case"center":H$K-=H$L/2;break;case"right":H$K-=H$L}H$Y+=this._charSize.height,this._graphics.drawLine(H$K,H$Y,H$K+H$L,H$Y,this.underlineColor||this.color,1)},H$f.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);H$P.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new H$I(0,0)):this._clipPoint=null;var H$f=this._lines.length;if(this.overflow!=H$l.VISIBLE){var H$K=this.overflow==H$l.HIDDEN?Math.floor:Math.ceil;H$f=Math.min(H$f,H$K((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var H$Y=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(H$Y,H$f),this.repaint()},H$f.evalTextSize=function(){var H$f,H$K=NaN;H$f=Math.max.apply(this,this._lineWidths),H$K=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],H$f==this._textWidth&&H$K==this._textHeight||(this._textWidth=H$f,this._textHeight=H$K,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},H$f.checkEnabledViewportOrNot=function(){return this.overflow==H$l.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},H$f.changeText=function(H$f){this._text!==H$f&&(this.lang(H$f+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},H$f.parseLines=function(H$f){var H$K=this.wordWrap||this.overflow==H$l.HIDDEN;if(H$K)var H$Y=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var H$X=H$g.contextMeasureText(H$l._testWord);H$k.isConchApp&&0===H$X.width&&0===H$X.height&&(H$X=H$g.contextMeasureText("W")),this._charSize.width=H$X.width,this._charSize.height=H$X.height||this.fontSize}for(var H$L=H$f.replace(/\r\n/g,"\n").split("\n"),H$H=0,H$E=H$L.length;H$H<H$E;H$H++){var H$d=H$L[H$H];H$K?this.parseLine(H$d,H$Y):(this._lineWidths.push(this.getTextWidth(H$d)),this._lines.push(H$d))}},H$f.parseLine=function(H$f,H$K){H$P.context;var H$Y,H$X=this._lines,H$L=0,H$H=NaN,H$E=NaN,H$d=0;if((H$H=this.getTextWidth(H$f))<=H$K)return H$X.push(H$f),void this._lineWidths.push(H$H);H$H=this._charSize.width,0==(H$L=Math.floor(H$K/H$H))&&(H$L=1),H$E=H$H=this.getTextWidth(H$f.substring(0,H$L));for(var H$O=H$L,H$i=H$f.length;H$O<H$i;H$O++)if(H$K<(H$E+=H$H=this.getTextWidth(H$f.charAt(H$O))))if(this.wordWrap){var H$U=H$f.substring(H$d,H$O);if(H$U.charCodeAt(H$U.length-1)<255?(H$Y=/(?:\w|-)+$/.exec(H$U))&&(H$O=H$Y.index+H$d,0==H$Y.index?H$O+=H$U.length:H$U=H$f.substring(H$d,H$O)):H$l.RightToLeft&&(H$Y=/([\u0600-\u06FF])+$/.exec(H$U))&&(H$O=H$Y.index+H$d,0==H$Y.index?H$O+=H$U.length:H$U=H$f.substring(H$d,H$O)),H$X.push(H$U),this._lineWidths.push(H$E-H$H),!((H$d=H$O)+H$L<H$i)){H$X.push(H$f.substring(H$d,H$i)),this._lineWidths.push(this.getTextWidth(H$X[H$X.length-1])),H$d=-1;break}H$O+=H$L,H$E=H$H=this.getTextWidth(H$f.substring(H$d,H$O)),H$O--}else if(this.overflow==H$l.HIDDEN)return H$X.push(H$f.substring(0,H$O)),void this._lineWidths.push(this.getTextWidth(H$X[H$X.length-1]));this.wordWrap&&-1!=H$d&&(H$X.push(H$f.substring(H$d,H$i)),this._lineWidths.push(this.getTextWidth(H$X[H$X.length-1])))},H$f.getTextWidth=function(H$f){return this._currBitmapFont?this._currBitmapFont.getTextWidth(H$f):H$g.contextMeasureText(H$f).width},H$f.getWordWrapWidth=function(){var H$f=this.padding,H$K=NaN;return(H$K=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(H$K=this.wordWrap?100:H$P.width),H$K<=0&&(H$K=100),H$K-H$f[3]-H$f[1]},H$f.getCharPoint=function(H$f,H$K){this._isChanged&&H$a.timer.runCallLater(this,this.typeset);for(var H$Y=0,H$X=this._lines,H$L=0,H$H=0,H$E=H$X.length;H$H<H$E;H$H++){if(H$f<(H$Y+=H$X[H$H].length)){var H$d=H$H;break}H$L=H$Y}var H$O=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;H$P.context.font=H$O;var H$i=this.getTextWidth(this._text.substring(H$L,H$f));return(H$K||new H$I).setTo(this._startX+H$i-(this._clipPoint?this._clipPoint.x:0),this._startY+H$d*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},H$B(0,H$f,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(H$f){H$f!=this._width&&(H$a.superSet(H$Zf,this,"width",H$f),this.isChanged=!0)}),H$B(0,H$f,"textWidth",function(){return this._isChanged&&H$a.timer.runCallLater(this,this.typeset),this._textWidth}),H$B(0,H$f,"height",function(){return this._height?this._height:this.textHeight},function(H$f){H$f!=this._height&&(H$a.superSet(H$Zf,this,"height",H$f),this.isChanged=!0)}),H$B(0,H$f,"textHeight",function(){return this._isChanged&&H$a.timer.runCallLater(this,this.typeset),this._textHeight}),H$B(0,H$f,"padding",function(){return this._getCSSStyle().padding},function(H$f){this._getCSSStyle().padding=H$f,this.isChanged=!0}),H$B(0,H$f,"bold",function(){return this._getCSSStyle().bold},function(H$f){this._getCSSStyle().bold=H$f,this.isChanged=!0}),H$B(0,H$f,"text",function(){return this._text||""},function(H$f){this._text!==H$f&&(this.lang(H$f+""),this.isChanged=!0,this.event("change"))}),H$B(0,H$f,"color",function(){return this._getCSSStyle().color},function(H$f){this._getCSSStyle().color!=H$f&&(this._getCSSStyle().color=H$f,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),H$B(0,H$f,"font",function(){return this._getCSSStyle().fontFamily},function(H$f){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),H$l._bitmapFonts&&H$l._bitmapFonts[H$f]&&(this._currBitmapFont=H$l._bitmapFonts[H$f]),this._getCSSStyle().fontFamily=H$f,this.isChanged=!0}),H$B(0,H$f,"fontSize",function(){return this._getCSSStyle().fontSize},function(H$f){this._getCSSStyle().fontSize=H$f,this.isChanged=!0}),H$B(0,H$f,"italic",function(){return this._getCSSStyle().italic},function(H$f){this._getCSSStyle().italic=H$f,this.isChanged=!0}),H$B(0,H$f,"align",function(){return this._getCSSStyle().align},function(H$f){this._getCSSStyle().align=H$f,this.isChanged=!0}),H$B(0,H$f,"valign",function(){return this._getCSSStyle().valign},function(H$f){this._getCSSStyle().valign=H$f,this.isChanged=!0}),H$B(0,H$f,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(H$f){this._getCSSStyle().wordWrap=H$f,this.isChanged=!0}),H$B(0,H$f,"leading",function(){return this._getCSSStyle().leading},function(H$f){this._getCSSStyle().leading=H$f,this.isChanged=!0}),H$B(0,H$f,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(H$f){this._getCSSStyle().backgroundColor=H$f,this.isChanged=!0}),H$B(0,H$f,"borderColor",function(){return this._getCSSStyle().borderColor},function(H$f){this._getCSSStyle().borderColor=H$f,this.isChanged=!0}),H$B(0,H$f,"stroke",function(){return this._getCSSStyle().stroke},function(H$f){this._getCSSStyle().stroke=H$f,this.isChanged=!0}),H$B(0,H$f,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(H$f){this._getCSSStyle().strokeColor=H$f,this.isChanged=!0}),H$B(0,H$f,"isChanged",null,function(H$f){this._isChanged!==H$f&&(this._isChanged=H$f)&&H$a.timer.callLater(this,this.typeset)}),H$B(0,H$f,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(H$f){if(!(this.overflow!=H$l.SCROLL||this.textWidth<this._width)&&this._clipPoint){H$f=H$f<this.padding[3]?this.padding[3]:H$f;var H$K=this._textWidth-this._width;H$f=H$K<H$f?H$K:H$f;var H$Y=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=H$f,this.renderText(this._lastVisibleLineIndex,H$Y)}}),H$B(0,H$f,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(H$f){if(!(this.overflow!=H$l.SCROLL||this.textHeight<this._height)&&this._clipPoint){H$f=H$f<this.padding[0]?this.padding[0]:H$f;var H$K=this._textHeight-this._height,H$Y=(H$f=H$K<H$f?H$K:H$f)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=H$Y;var H$X=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=H$f,this.renderText(H$Y,H$X)}}),H$B(0,H$f,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),H$B(0,H$f,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),H$B(0,H$f,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),H$B(0,H$f,"underlineColor",function(){return this._underlineColor},function(H$f){this._underlineColor=H$f,this._isChanged=!0,this.typeset()}),H$l.registerBitmapFont=function(H$f,H$K){H$l._bitmapFonts||(H$l._bitmapFonts={}),H$l._bitmapFonts[H$f]=H$K},H$l.unregisterBitmapFont=function(H$f,H$K){if(void 0===H$K&&(H$K=!0),H$l._bitmapFonts&&H$l._bitmapFonts[H$f]){var H$Y=H$l._bitmapFonts[H$f];H$K&&H$Y.destroy(),delete H$l._bitmapFonts[H$f]}},H$l.setTextRightToLeft=function(){var H$f;(H$f=H$P.canvas.source.style).display="none",H$f.position="absolute",H$f.direction="rtl",H$k._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,H$P.document.body.appendChild(H$P.canvas.source)},H$l.supportFont=function(H$f){H$P.context.font="10px sans-serif";var H$K=H$g.contextMeasureText("abcji").width;H$P.context.font="10px "+H$f;var H$Y=H$g.contextMeasureText("abcji").width;return console.log(H$K,H$Y),H$K!==H$Y},H$l._testWord="游",H$l.langPacks=null,H$l.VISIBLE="visible",H$l.SCROLL="scroll",H$l.HIDDEN="hidden",H$l.CharacterCache=!0,H$l.RightToLeft=!1,H$l._bitmapFonts=null,H$O(H$l,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),H$l}(H$Zf),H$Af=function(H$Z){function H$E(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",H$E.__super.call(this),this.offset=new H$I,this._canvasTransform=new H$V,this._previousOrientation=H$P.window.orientation;var H$K=this;this.transform=H$V.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var H$f=H$P.window,H$Y=this;H$f.addEventListener("focus",function(){H$K._isFocused=!0,H$Y.event("focus"),H$Y.event("focuschange")}),H$f.addEventListener("blur",function(){H$K._isFocused=!1,H$Y.event("blur"),H$Y.event("focuschange"),H$Y._isInputting()&&(H$Cf.inputElement.target.focus=!1)});var H$X="visibilityState",H$L="visibilitychange",H$H=H$f.document;void 0!==H$H.hidden?(H$L="visibilitychange",H$X="visibilityState"):void 0!==H$H.mozHidden?(H$L="mozvisibilitychange",H$X="mozVisibilityState"):void 0!==H$H.msHidden?(H$L="msvisibilitychange",H$X="msVisibilityState"):void 0!==H$H.webkitHidden&&(H$L="webkitvisibilitychange",H$X="webkitVisibilityState"),H$f.document.addEventListener(H$L,function(){"hidden"==H$P.document[H$X]?H$Y._setStageVisible(!1):H$Y._setStageVisible(!0)}),H$f.document.addEventListener("qbrowserVisibilityChange",function(H$f){H$Y._setStageVisible(!H$f.hidden)}),H$f.addEventListener("resize",function(){var H$f=H$P.window.orientation;null!=H$f&&H$f!=H$K._previousOrientation&&H$Y._isInputting()&&(H$Cf.inputElement.target.focus=!1),H$K._previousOrientation=H$f,H$Y._isInputting()||H$Y._resetCanvas()}),H$f.addEventListener("orientationchange",function(H$f){H$Y._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),H$P.onMobile&&this.on("mousedown",this,this._onmouseMove)}H$U(H$E,"laya.display.Stage",H$Z);var H$f=H$E.prototype;return H$f._setStageVisible=function(H$f){this._isVisibility!=H$f&&(this._isVisibility=H$f,this._isVisibility||this._isInputting()&&(H$Cf.inputElement.target.focus=!1),this.event("visibilitychange"))},H$f._isInputting=function(){return H$P.onMobile&&H$Cf.isInputting},H$f._changeCanvasSize=function(){this.setScreenSize(H$P.clientWidth*H$P.pixelRatio,H$P.clientHeight*H$P.pixelRatio)},H$f._resetCanvas=function(){if(this.screenAdaptationEnabled){var H$f=H$k._mainCanvas;H$f.source.style;H$f.size(1,1),H$a.timer.once(100,this,this._changeCanvasSize)}},H$f.setScreenSize=function(H$f,H$K){var H$Y=!1;if("none"!==this._screenMode&&(H$Y=(H$f/H$K<1?"vertical":"horizontal")!==this._screenMode)){var H$X=H$K;H$K=H$f,H$f=H$X}this.canvasRotation=H$Y;var H$L=H$k._mainCanvas,H$H=H$L.source.style,H$E=this._canvasTransform.identity(),H$d=this._scaleMode,H$O=H$f/this.designWidth,H$i=H$K/this.designHeight,H$U=this.designWidth,H$Z=this.designHeight,H$y=H$f,H$l=H$K,H$B=H$P.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,H$d){case"noscale":H$O=H$i=1,H$y=this.designWidth,H$l=this.designHeight;break;case"showall":H$O=H$i=Math.min(H$O,H$i),H$U=H$y=Math.round(this.designWidth*H$O),H$Z=H$l=Math.round(this.designHeight*H$i);break;case"noborder":H$O=H$i=Math.max(H$O,H$i),H$y=Math.round(this.designWidth*H$O),H$l=Math.round(this.designHeight*H$i);break;case"full":H$O=H$i=1,this._width=H$U=H$f,this._height=H$Z=H$K;break;case"fixedwidth":H$i=H$O,this._height=H$Z=Math.round(H$K/H$O);break;case"fixedheight":H$O=H$i,this._width=H$U=Math.round(H$f/H$i);break;case"fixedauto":H$f/H$K<this.designWidth/this.designHeight?(H$i=H$O,this._height=H$Z=Math.round(H$K/H$O)):(H$O=H$i,this._width=H$U=Math.round(H$f/H$i))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,H$U=H$U+1&2147483646,H$Z=H$Z+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),H$O*=this.scaleX,H$i*=this.scaleY,1===H$O&&1===H$i?this.transform.identity():(this.transform.a=this._formatData(H$O/(H$y/H$U)),this.transform.d=this._formatData(H$i/(H$l/H$Z)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),H$L.size(H$U,H$Z),H$R.changeWebGLSize(H$U,H$Z),H$E.scale(H$y/H$U/H$B,H$l/H$Z/H$B),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(H$f-H$y)/H$B:this.offset.x=.5*(H$f-H$y)/H$B,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(H$K-H$l)/H$B:this.offset.y=.5*(H$K-H$l)/H$B,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),H$E.translate(this.offset.x,this.offset.y),this.canvasDegree=0,H$Y&&("horizontal"===this._screenMode?(H$E.rotate(Math.PI/2),H$E.translate(H$K/H$B,0),this.canvasDegree=90):(H$E.rotate(-Math.PI/2),H$E.translate(0,H$f/H$B),this.canvasDegree=-90)),H$E.a=this._formatData(H$E.a),H$E.d=this._formatData(H$E.d),H$E.tx=this._formatData(H$E.tx),H$E.ty=this._formatData(H$E.ty),H$H.transformOrigin=H$H.webkitTransformOrigin=H$H.msTransformOrigin=H$H.mozTransformOrigin=H$H.oTransformOrigin="0px 0px 0px",H$H.transform=H$H.webkitTransform=H$H.msTransform=H$H.mozTransform=H$H.oTransform="matrix("+H$E.toString()+")",H$E.translate(parseInt(H$H.left)||0,parseInt(H$H.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},H$f._formatData=function(H$f){return Math.abs(H$f)<1e-6?0:Math.abs(1-H$f)<.001?0<H$f?1:-1:H$f},H$f.getMousePoint=function(){return H$I.TEMP.setTo(this.mouseX,this.mouseY)},H$f.repaint=function(){this._repaint=1},H$f.parentRepaint=function(){},H$f._loop=function(){return this.render(H$k.context,0,0),!0},H$f._onmouseMove=function(H$f){this._mouseMoveTime=H$P.now()},H$f.getTimeFromFrameStart=function(){return H$P.now()-this._frameStartTime},H$f.render=function(H$f,H$K,H$Y){if("sleep"===this._frameRate&&!H$k.isConchApp){var H$X=H$P.now();if(!(1e3<=H$X-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(H$p.loopCount++,H$$.instance.runEvent(),H$a.timer._update()));this._frameStartTime=H$X}if(this._renderCount++,H$k.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=H$P.now();var H$L="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),H$H=this._renderCount%2==0;if(H$p.renderSlow=!H$L,H$L||H$H||H$k.isConchApp){var H$E;H$p.loopCount++,H$$.instance.runEvent(),H$a.timer._update(),H$R.update3DLoop();var H$d=0,H$O=0;if(H$k.isConchNode)for(H$d=0,H$O=this._scenes.length;H$d<H$O;H$d++)(H$E=this._scenes[H$d])&&H$E._updateSceneConch();else for(H$d=0,H$O=this._scenes.length;H$d<H$O;H$d++)(H$E=this._scenes[H$d])&&H$E._updateScene();if(H$k.isConchNode){var H$i=H$Zf.CustomList;for(H$d=0,H$O=H$i.length;H$d<H$O;H$d++){var H$U=H$i[H$d];H$U.customRender(H$U.customContext,0,0)}return}}H$k.isConchNode||this.renderingEnabled&&(H$L||!H$H||H$k.isConchWebGL)&&(H$k.isWebGL?H$k.WebGL.mainContext&&!H$k.WebGL.mainContext.isContextLost()&&(H$f.clear(),H$Z.prototype.render.call(this,H$f,H$K,H$Y),H$p._show&&H$p._sp&&H$p._sp.render(H$f,H$K,H$Y),H$R.clear(this._bgColor),H$R.beginFlush(),H$f.flush(),H$R.endFinish(),H$N.instance&&H$N.getInstance().endDispose()):(H$R.clear(this._bgColor),H$Z.prototype.render.call(this,H$f,H$K,H$Y),H$p._show&&H$p._sp&&H$p._sp.render(H$f,H$K,H$Y)))}else this._renderCount%5==0&&(H$p.loopCount++,H$$.instance.runEvent(),H$a.timer._update())},H$f._requestFullscreen=function(){var H$f=H$P.document.documentElement;H$f.requestFullscreen?H$f.requestFullscreen():H$f.mozRequestFullScreen?H$f.mozRequestFullScreen():H$f.webkitRequestFullscreen?H$f.webkitRequestFullscreen():H$f.msRequestFullscreen&&H$f.msRequestFullscreen()},H$f._fullScreenChanged=function(){H$a.stage.event("fullscreenchange")},H$f.exitFullscreen=function(){var H$f=H$P.document;H$f.exitFullscreen?H$f.exitFullscreen():H$f.mozCancelFullScreen?H$f.mozCancelFullScreen():H$f.webkitExitFullscreen&&H$f.webkitExitFullscreen()},H$B(0,H$f,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),H$B(0,H$f,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),H$B(0,H$f,"frameRate",function(){return this._frameRate},function(H$f){if(this._frameRate=H$f,H$k.isConchApp)switch(this._frameRate){case"slow":H$P.window.conch&&H$P.window.conchConfig.setSlowFrame&&H$P.window.conchConfig.setSlowFrame(!0);break;case"fast":H$P.window.conch&&H$P.window.conchConfig.setSlowFrame&&H$P.window.conchConfig.setSlowFrame(!1);break;case"mouse":H$P.window.conch&&H$P.window.conchConfig.setMouseFrame&&H$P.window.conchConfig.setMouseFrame(2e3);break;case"sleep":H$P.window.conch&&H$P.window.conchConfig.setLimitFPS&&H$P.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),H$B(0,H$f,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),H$B(0,H$f,"width",H$Z.prototype._$get_width,function(H$f){this.designWidth=H$f,H$a.superSet(H$Zf,this,"width",H$f),H$a.timer.callLater(this,this._changeCanvasSize)}),H$B(0,H$f,"alignH",function(){return this._alignH},function(H$f){this._alignH=H$f,H$a.timer.callLater(this,this._changeCanvasSize)}),H$B(0,H$f,"isFocused",function(){return this._isFocused}),H$B(0,H$f,"height",H$Z.prototype._$get_height,function(H$f){this.designHeight=H$f,H$a.superSet(H$Zf,this,"height",H$f),H$a.timer.callLater(this,this._changeCanvasSize)}),H$B(0,H$f,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||H$V.create()},H$Z.prototype._$set_transform),H$B(0,H$f,"isVisibility",function(){return this._isVisibility}),H$B(0,H$f,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),H$B(0,H$f,"scaleMode",function(){return this._scaleMode},function(H$f){this._scaleMode=H$f,H$a.timer.callLater(this,this._changeCanvasSize)}),H$B(0,H$f,"alignV",function(){return this._alignV},function(H$f){this._alignV=H$f,H$a.timer.callLater(this,this._changeCanvasSize)}),H$B(0,H$f,"bgColor",function(){return this._bgColor},function(H$f){this._bgColor=H$f,this.conchModel&&this.conchModel.bgColor(H$f),H$k.isWebGL&&(H$f?H$E._wgColor=H$w.create(H$f)._color:H$P.onMiniGame||(H$E._wgColor=null)),H$P.onLimixiu?H$E._wgColor=H$w.create(H$f)._color:H$k.canvas.style.background=H$f||"none"}),H$B(0,H$f,"mouseX",function(){return Math.round(H$$.instance.mouseX/this.clientScaleX)}),H$B(0,H$f,"mouseY",function(){return Math.round(H$$.instance.mouseY/this.clientScaleY)}),H$B(0,H$f,"screenMode",function(){return this._screenMode},function(H$f){this._screenMode=H$f}),H$B(0,H$f,"visible",H$Z.prototype._$get_visible,function(H$f){this.visible!==H$f&&(H$a.superSet(H$Zf,this,"visible",H$f),H$k._mainCanvas.source.style.visibility=H$f?"visible":"hidden")}),H$B(0,H$f,"fullScreenEnabled",null,function(H$f){var H$K=H$P.document,H$Y=H$k.canvas;H$f?(H$Y.addEventListener("mousedown",this._requestFullscreen),H$Y.addEventListener("touchstart",this._requestFullscreen),H$K.addEventListener("fullscreenchange",this._fullScreenChanged),H$K.addEventListener("mozfullscreenchange",this._fullScreenChanged),H$K.addEventListener("webkitfullscreenchange",this._fullScreenChanged),H$K.addEventListener("msfullscreenchange",this._fullScreenChanged)):(H$Y.removeEventListener("mousedown",this._requestFullscreen),H$Y.removeEventListener("touchstart",this._requestFullscreen),H$K.removeEventListener("fullscreenchange",this._fullScreenChanged),H$K.removeEventListener("mozfullscreenchange",this._fullScreenChanged),H$K.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),H$K.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),H$E.SCALE_NOSCALE="noscale",H$E.SCALE_EXACTFIT="exactfit",H$E.SCALE_SHOWALL="showall",H$E.SCALE_NOBORDER="noborder",H$E.SCALE_FULL="full",H$E.SCALE_FIXED_WIDTH="fixedwidth",H$E.SCALE_FIXED_HEIGHT="fixedheight",H$E.SCALE_FIXED_AUTO="fixedauto",H$E.ALIGN_LEFT="left",H$E.ALIGN_RIGHT="right",H$E.ALIGN_CENTER="center",H$E.ALIGN_TOP="top",H$E.ALIGN_MIDDLE="middle",H$E.ALIGN_BOTTOM="bottom",H$E.SCREEN_NONE="none",H$E.SCREEN_HORIZONTAL="horizontal",H$E.SCREEN_VERTICAL="vertical",H$E.FRAME_FAST="fast",H$E.FRAME_SLOW="slow",H$E.FRAME_MOUSE="mouse",H$E.FRAME_SLEEP="sleep",H$E.FRAME_MOUSE_THREDHOLD=2e3,H$O(H$E,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),H$E}(H$Zf),H$xf=(function(H$f){function H$K(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,H$K.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}H$U(H$K,"laya.media.SoundNode",H$Zf);var H$Y=H$K.prototype;H$Y._onParentChange=function(){this.target=this.parent},H$Y.play=function(H$f,H$K){void 0===H$f&&(H$f=1),isNaN(H$f)&&(H$f=1),this.url&&(this.stop(),this._channel=H$m.playSound(this.url,H$f,null,H$K))},H$Y.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},H$Y._setPlayAction=function(H$f,H$K,H$Y,H$X){void 0===H$X&&(H$X=!0),this[H$Y]&&H$f&&(H$X?H$f.on(H$K,this,this[H$Y]):H$f.off(H$K,this,this[H$Y]))},H$Y._setPlayActions=function(H$f,H$K,H$Y,H$X){if(void 0===H$X&&(H$X=!0),H$f&&H$K){var H$L,H$H=H$K.split(","),H$E=0;for(H$L=H$H.length,H$E=0;H$E<H$L;H$E++)this._setPlayAction(H$f,H$H[H$E],H$Y,H$X)}},H$B(0,H$Y,"playEvent",null,function(H$f){(this._playEvents=H$f)&&this._tar&&this._setPlayActions(this._tar,H$f,"play")}),H$B(0,H$Y,"target",null,function(H$f){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=H$f,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),H$B(0,H$Y,"stopEvent",null,function(H$f){(this._stopEvents=H$f)&&this._tar&&this._setPlayActions(this._tar,H$f,"stop")})}(),function(H$f){function H$K(){this._src=null,this._onload=null,this._onerror=null,H$K.__super.call(this)}H$U(H$K,"laya.resource.FileBitmap",H$Bf);var H$Y=H$K.prototype;return H$B(0,H$Y,"src",function(){return this._src},function(H$f){this._src=H$f}),H$B(0,H$Y,"onload",null,function(H$f){}),H$B(0,H$Y,"onerror",null,function(H$f){}),H$K}()),H$Sf=function(H$f){function H$Y(H$f,H$K){this._is2D=!1,H$Y.__super.call(this);var H$X=this;if(this._source=this,"2D"===H$f||"AUTO"===H$f&&!H$k.isWebGL){this._is2D=!0,this._source=H$K||H$P.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var H$L=this;H$L.getContext=function(H$f,H$K){if(H$X._ctx)return H$X._ctx;var H$Y=H$X._ctx=H$X._source.getContext(H$f,H$K);return H$Y&&(H$Y._canvas=H$L,H$k.isFlash||H$P.onLimixiu||(H$Y.size=function(H$f,H$K){})),H$Y}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}H$U(H$Y,"laya.resource.HTMLCanvas",H$Bf);var H$K=H$Y.prototype;return H$K.clear=function(){this._ctx&&this._ctx.clear()},H$K.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},H$K.release=function(){},H$K._setContext=function(H$f){this._ctx=H$f},H$K.getContext=function(H$f,H$K){return this._ctx?this._ctx:this._ctx=H$Y._createContext(this)},H$K.getMemSize=function(){return 0},H$K.size=function(H$f,H$K){(this._w!=H$f||this._h!=H$K||this._source&&(this._source.width!=H$f||this._source.height!=H$K))&&(this._w=H$f,this._h=H$K,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(H$f,H$K),this._source&&(this._source.height=H$K,this._source.width=H$f))},H$K.getCanvas=function(){return this._source},H$K.toBase64=function(H$f,H$K,H$Y){if(this._source)if(H$k.isConchApp&&this._source.toBase64)this._source.toBase64(H$f,H$K,H$Y);else{var H$X=this._source.toDataURL(H$f,H$K);H$Y.call(this,H$X)}},H$B(0,H$K,"context",function(){return this._ctx}),H$B(0,H$K,"asBitmap",null,function(H$f){}),H$Y.create=function(H$f,H$K){return new H$Y(H$f,H$K)},H$Y.TYPE2D="2D",H$Y.TYPE3D="3D",H$Y.TYPEAUTO="AUTO",H$Y._createContext=null,H$Y}(),H$zf=(function(H$f){function H$O(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){throw H$O.__super.call(this),new Error("不允许new！")}H$U(H$O,"laya.resource.HTMLSubImage",H$Bf),H$O.create=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){return void 0===H$d&&(H$d=!1),new H$O(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d)}}(),function(H$f){function H$Z(){this._frames=null,this._url=null,H$Z.__super.call(this),this._setControlNode(this)}H$U(H$Z,"laya.display.Animation",H$f);var H$K=H$Z.prototype;H$K.destroy=function(H$f){void 0===H$f&&(H$f=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,H$f),this._frames=null,this._labels=null},H$K.play=function(H$f,H$K,H$Y,H$X){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=!0),void 0===H$Y&&(H$Y=""),void 0===H$X&&(H$X=!0),H$Y&&this._setFramesFromCache(H$Y,H$X),this._isPlaying=!0,this.index="string"==typeof H$f?this._getFrameByLabel(H$f):H$f,this.loop=H$K,this._actionName=H$Y,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},H$K._setFramesFromCache=function(H$f,H$K){var H$Y;return void 0===H$K&&(H$K=!1),this._url&&(H$f=this._url+"#"+H$f),H$f&&H$Z.framesMap[H$f]?((H$Y=H$Z.framesMap[H$f])instanceof Array?(this._frames=H$Z.framesMap[H$f],this._count=this._frames.length):(H$Y.nodeRoot&&(H$Z.framesMap[H$f]=this._parseGraphicAnimationByData(H$Y),H$Y=H$Z.framesMap[H$f]),this._frames=H$Y.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=H$Y.interval),this._labels=this._copyLabels(H$Y.labels)),!0):(H$K&&console.log("ani not found:",H$f),!1)},H$K._copyLabels=function(H$f){if(!H$f)return null;var H$K,H$Y;for(H$Y in H$K={},H$f)H$K[H$Y]=H$g.copyArray([],H$f[H$Y]);return H$K},H$K._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&H$f.prototype._frameLoop.call(this)},H$K._displayToIndex=function(H$f){this._frames&&(this.graphics=this._frames[H$f])},H$K.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},H$K.loadImages=function(H$f,H$K){return void 0===H$K&&(H$K=""),this._url="",this._setFramesFromCache(H$K)||(this.frames=H$Z.framesMap[H$K]?H$Z.framesMap[H$K]:H$Z.createFrames(H$f,H$K)),this},H$K.loadAtlas=function(H$K,H$Y,H$X){void 0===H$X&&(H$X=""),this._url="";var H$L=this;function H$f(H$f){H$K===H$f&&(H$L.frames=H$Z.framesMap[H$X]?H$Z.framesMap[H$X]:H$Z.createFrames(H$K,H$X),H$Y&&H$Y.run())}return H$L._setFramesFromCache(H$X)||(H$df.getAtlas(H$K)?H$f(H$K):H$a.loader.load(H$K,H$x.create(null,H$f,[H$K]),null,"atlas")),this},H$K.loadAnimation=function(H$f,H$K,H$Y){this._url=H$f;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,H$K&&H$K.run()):!H$Y||H$df.getAtlas(H$Y)?this._loadAnimationData(H$f,H$K,H$Y):H$a.loader.load(H$Y,H$x.create(this,this._loadAnimationData,[H$f,H$K,H$Y]),null,"atlas"),this},H$K._loadAnimationData=function(H$d,H$O,H$f){var H$i=this;if(!H$f||H$df.getAtlas(H$f)){var H$U=this;H$df.getRes(H$d)?H$K(H$d):H$a.loader.load(H$d,H$x.create(null,H$K,[H$d]),null,"json"),H$df.clearRes(H$d)}else console.warn("atlas load fail:"+H$f);function H$K(H$f){if(H$df.getRes(H$f)&&H$d===H$f){var H$K;if(H$Z.framesMap[H$d+"#"])H$U._setFramesFromCache(H$i._actionName,!0),H$i.index=0,H$i._checkResumePlaying();else{var H$Y=H$U._parseGraphicAnimation(H$df.getRes(H$d));if(!H$Y)return;var H$X,H$L=H$Y.animationList,H$H=0,H$E=H$L.length;for(H$H=0;H$H<H$E;H$H++)H$K=H$L[H$H],H$Z.framesMap[H$d+"#"+H$K.name]=H$K,H$X||(H$X=H$K);H$X&&(H$Z.framesMap[H$d+"#"]=H$X,H$U._setFramesFromCache(H$i._actionName,!0),H$i.index=0),H$i._checkResumePlaying()}H$O&&H$O.run()}}},H$K._parseGraphicAnimation=function(H$f){return H$af.parseAnimationData(H$f)},H$K._parseGraphicAnimationByData=function(H$f){return H$af.parseAnimationByData(H$f)},H$B(0,H$K,"frames",function(){return this._frames},function(H$f){(this._frames=H$f)&&(this._count=H$f.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),H$B(0,H$K,"autoPlay",null,function(H$f){H$f?this.play():this.stop()}),H$B(0,H$K,"source",null,function(H$f){-1<H$f.indexOf(".ani")?this.loadAnimation(H$f):-1<H$f.indexOf(".json")||-1<H$f.indexOf("als")||-1<H$f.indexOf("atlas")?this.loadAtlas(H$f):this.loadImages(H$f.split(","))}),H$B(0,H$K,"autoAnimation",null,function(H$f){this.play(0,!0,H$f,!1)}),H$Z.createFrames=function(H$f,H$K){var H$Y,H$X,H$L=0,H$H=0;if("string"==typeof H$f){var H$E=H$df.getAtlas(H$f);if(H$E&&H$E.length)for(H$Y=[],H$L=0,H$H=H$E.length;H$L<H$H;H$L++)(H$X=new H$R.createGraphics).drawTexture(H$df.getRes(H$E[H$L]),0,0),H$Y.push(H$X)}else if(H$f instanceof Array)for(H$Y=[],H$L=0,H$H=H$f.length;H$L<H$H;H$L++)(H$X=new H$R.createGraphics).loadImage(H$f[H$L],0,0),H$Y.push(H$X);return H$K&&(H$Z.framesMap[H$K]=H$Y),H$Y},H$Z.clearCache=function(H$f){var H$K,H$Y=H$Z.framesMap,H$X=H$f+"#";for(H$K in H$Y)H$K!==H$f&&0!=H$K.indexOf(H$X)||delete H$Z.framesMap[H$K]},H$Z.framesMap={}}(H$$f),function(H$f){function H$H(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,H$H.__super.call(this),null==H$H._sortIndexFun&&(H$H._sortIndexFun=H$s.sortByKey("index",!1,!0))}H$U(H$H,"laya.display.FrameAnimation",H$f);var H$K=H$H.prototype;return H$K._setUp=function(H$f,H$K){this._labels=null,this._animationNewFrames=null,this._targetDic=H$f,this._animationData=H$K,this.interval=1e3/H$K.frameRate,H$K.parsed?(this._count=H$K.count,this._labels=H$K.labels,this._animationNewFrames=H$K.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),H$K.parsed=!0,H$K.labels=this._labels,H$K.count=this._count,H$K.animationNewFrames=this._animationNewFrames},H$K.clear=function(){H$f.prototype.clear.call(this),this._targetDic=null,this._animationData=null},H$K._displayToIndex=function(H$f){if(this._animationData){H$f<0&&(H$f=0),H$f>this._count&&(H$f=this._count);var H$K=this._animationData.nodes,H$Y=0,H$X=H$K.length;for(H$Y=0;H$Y<H$X;H$Y++)this._displayNodeToFrame(H$K[H$Y],H$f)}},H$K._displayNodeToFrame=function(H$f,H$K,H$Y){H$Y||(H$Y=this._targetDic);var H$X=H$Y[H$f.target];if(H$X){var H$L,H$H,H$E,H$d=H$f.frames,H$O=H$f.keys,H$i=0,H$U=H$O.length;for(H$i=0;H$i<H$U;H$i++)H$E=(H$H=H$d[H$L=H$O[H$i]]).length>H$K?H$H[H$K]:H$H[H$H.length-1],H$X[H$L]=H$E}},H$K._calculateDatas=function(){if(this._animationData){var H$f,H$K=this._animationData.nodes,H$Y=0,H$X=H$K.length;for(H$Y=this._count=0;H$Y<H$X;H$Y++)H$f=H$K[H$Y],this._calculateNodeKeyFrames(H$f);this._count+=1}},H$K._calculateNodeKeyFrames=function(H$f){var H$K,H$Y,H$X=H$f.keyframes,H$L=H$f.target;for(H$K in H$f.frames||(H$f.frames={}),H$f.keys?H$f.keys.length=0:H$f.keys=[],H$f.initValues||(H$f.initValues={}),H$X)H$Y=H$X[H$K],H$f.frames[H$K]||(H$f.frames[H$K]=[]),this._targetDic&&this._targetDic[H$L]&&(H$f.initValues[H$K]=this._targetDic[H$L][H$K]),H$Y.sort(H$H._sortIndexFun),H$f.keys.push(H$K),this._calculateNodePropFrames(H$Y,H$f.frames[H$K],H$K,H$L)},H$K.resetToInitState=function(){if(this._targetDic&&this._animationData){var H$f,H$K,H$Y=this._animationData.nodes,H$X=0,H$L=H$Y.length;for(H$X=0;H$X<H$L;H$X++)if(H$K=(H$f=H$Y[H$X]).initValues){var H$H,H$E=this._targetDic[H$f.target];if(H$E)for(H$H in H$K)H$E[H$H]=H$K[H$H]}}},H$K._calculateNodePropFrames=function(H$f,H$K,H$Y,H$X){var H$L=0,H$H=H$f.length-1;if(0<H$H){for(H$K.length=H$f[H$H].index+1,H$L=0;H$L<H$H;H$L++)this._dealKeyFrame(H$f[H$L]),this._calculateFrameValues(H$f[H$L],H$f[H$L+1],H$K);this._dealKeyFrame(H$f[H$L])}0==H$H&&(H$K[H$f[0].index]=H$f[0].value,this._animationNewFrames&&(this._animationNewFrames[H$f[0].index]=!0))},H$K._dealKeyFrame=function(H$f){H$f.label&&""!=H$f.label&&this.addLabel(H$f.label,H$f.index)},H$K._calculateFrameValues=function(H$f,H$K,H$Y){var H$X,H$L=0,H$H=H$f.index,H$E=H$K.index,H$d=H$f.value,H$O=H$K.value-H$f.value,H$i=H$E-H$H;if(H$E>this._count&&(this._count=H$E),H$f.tween)for(null==(H$X=H$v[H$f.tweenMethod])&&(H$X=H$v.linearNone),H$L=H$H;H$L<H$E;H$L++)H$Y[H$L]=H$X(H$L-H$H,H$d,H$O,H$i),this._animationNewFrames&&(this._animationNewFrames[H$L]=!0);else for(H$L=H$H;H$L<H$E;H$L++)H$Y[H$L]=H$d;this._animationNewFrames&&(this._animationNewFrames[H$f.index]=!0,this._animationNewFrames[H$K.index]=!0),H$Y[H$K.index]=H$K.value},H$H._sortIndexFun=null,H$H}(H$$f)),H$Cf=function(H$K){function H$L(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",H$L.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=H$hf.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}H$U(H$L,"laya.display.Input",H$K);var H$f=H$L.prototype;return H$f.setSelection=function(H$f,H$K){this.focus=!0,laya.display.Input.inputElement.selectionStart=H$f,laya.display.Input.inputElement.selectionEnd=H$K},H$f._onUnDisplay=function(H$f){this.focus=!1},H$f._onMouseDown=function(H$f){this.focus=!0},H$f._syncInputTransform=function(){var H$f=this.nativeInput,H$K=H$g.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),H$Y=this._width-this.padding[1]-this.padding[3],H$X=this._height-this.padding[0]-this.padding[2];H$k.isConchApp?(H$f.setScale(H$K.scaleX,H$K.scaleY),H$f.setSize(H$Y,H$X),H$f.setPos(H$K.x,H$K.y)):(H$L.inputContainer.style.transform=H$L.inputContainer.style.webkitTransform="scale("+H$K.scaleX+","+H$K.scaleY+") rotate("+H$a.stage.canvasDegree+"deg)",H$f.style.width=H$Y+"px",H$f.style.height=H$X+"px",H$L.inputContainer.style.left=H$K.x+"px",H$L.inputContainer.style.top=H$K.y+"px")},H$f.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},H$f._setInputMethod=function(){H$L.input.parentElement&&H$L.inputContainer.removeChild(H$L.input),H$L.area.parentElement&&H$L.inputContainer.removeChild(H$L.area),H$L.inputElement=this._multiline?H$L.area:H$L.input,H$L.inputContainer.appendChild(H$L.inputElement),H$hf.RightToLeft&&(H$L.inputElement.style.direction="rtl")},H$f._focusIn=function(){laya.display.Input.isInputting=!0;var H$f=this.nativeInput;this._focus=!0;var H$K=H$f.style;H$K.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),H$f.readOnly=!this._editable,H$k.isConchApp&&(H$f.setType(this._type),H$f.setForbidEdit(!this._editable)),H$f.maxLength=this._maxChars;this.padding;if(H$f.type=this._type,H$f.value=this._content,H$f.placeholder=this._prompt,H$a.stage.off("keydown",this,this._onKeyDown),H$a.stage.on("keydown",this,this._onKeyDown),(H$a.stage.focus=this).event("focus"),H$P.onPC&&H$f.focus(),!H$P.onMiniGame){this._text;this._text=null}this.typeset(),H$f.setColor(this._originColor),H$f.setFontSize(this.fontSize),H$f.setFontFace(H$P.onIPhone&&H$hf._fontFamilyMap[this.font]||this.font),H$k.isConchApp&&H$f.setMultiAble&&H$f.setMultiAble(this._multiline),H$K.lineHeight=this.leading+this.fontSize+"px",H$K.fontStyle=this.italic?"italic":"normal",H$K.fontWeight=this.bold?"bold":"normal",H$K.textAlign=this.align,H$K.padding="0 0",this._syncInputTransform(),!H$k.isConchApp&&H$P.onPC&&H$a.timer.frameLoop(1,this,this._syncInputTransform)},H$f._setPromptColor=function(){(H$L.promptStyleDOM=H$P.getElementById("promptStyle"))||((H$L.promptStyleDOM=H$P.createElement("style")).setAttribute("id","promptStyle"),H$P.document.head.appendChild(H$L.promptStyleDOM)),H$L.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},H$f._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(H$a.superSet(H$hf,this,"text",this._content),H$a.superSet(H$hf,this,"color",this._originColor)):(H$a.superSet(H$hf,this,"text",this._prompt),H$a.superSet(H$hf,this,"color",this._promptColor)),H$a.stage.off("keydown",this,this._onKeyDown),H$a.stage.focus=null,this.event("blur"),H$k.isConchApp&&this.nativeInput.blur(),H$P.onPC&&H$a.timer.clear(this,this._syncInputTransform)},H$f._onKeyDown=function(H$f){13===H$f.keyCode&&(H$P.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},H$f.changeText=function(H$f){this._content=H$f,this._focus?(this.nativeInput.value=H$f||"",this.event("change")):H$K.prototype.changeText.call(this,H$f)},H$B(0,H$f,"color",H$K.prototype._$get_color,function(H$f){this._focus&&this.nativeInput.setColor(H$f),H$a.superSet(H$hf,this,"color",this._content?H$f:this._promptColor),this._originColor=H$f}),H$B(0,H$f,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(H$f){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),H$B(0,H$f,"multiline",function(){return this._multiline},function(H$f){this._multiline=H$f,this.valign=H$f?"top":"middle"}),H$B(0,H$f,"maxChars",function(){return this._maxChars},function(H$f){H$f<=0&&(H$f=1e5),this._maxChars=H$f}),H$B(0,H$f,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(H$f){H$a.superSet(H$hf,this,"color",this._originColor),H$f+="",this._focus?(this.nativeInput.value=H$f||"",this.event("change")):(this._multiline||(H$f=H$f.replace(/\r?\n/g,"")),(this._content=H$f)?H$a.superSet(H$hf,this,"text",H$f):(H$a.superSet(H$hf,this,"text",this._prompt),H$a.superSet(H$hf,this,"color",this.promptColor)))}),H$B(0,H$f,"nativeInput",function(){return this._multiline?H$L.area:H$L.input}),H$B(0,H$f,"prompt",function(){return this._prompt},function(H$f){!this._text&&H$f&&H$a.superSet(H$hf,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?H$a.superSet(H$hf,this,"text",this._text==this._prompt?H$f:this._text):H$a.superSet(H$hf,this,"text",H$f),this._prompt=H$hf.langPacks&&H$hf.langPacks[H$f]?H$hf.langPacks[H$f]:H$f}),H$B(0,H$f,"focus",function(){return this._focus},function(H$f){var H$K=this.nativeInput;this._focus!==H$f&&(H$f?(H$K.target?H$K.target._focusOut():this._setInputMethod(),(H$K.target=this)._focusIn()):(H$K.target=null,this._focusOut(),H$P.document.body.scrollTop=0,H$K.blur(),H$k.isConchApp?H$K.setPos(-1e4,-1e4):H$L.inputContainer.contains(H$K)&&H$L.inputContainer.removeChild(H$K)))}),H$B(0,H$f,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(H$f){H$f?(-1<(H$f="[^"+H$f+"]").indexOf("^^")&&(H$f=H$f.replace("^^","")),this._restrictPattern=new RegExp(H$f,"g")):this._restrictPattern=null}),H$B(0,H$f,"editable",function(){return this._editable},function(H$f){this._editable=H$f,H$k.isConchApp&&H$L.input.setForbidEdit(!H$f)}),H$B(0,H$f,"promptColor",function(){return this._promptColor},function(H$f){this._promptColor=H$f,this._content||H$a.superSet(H$hf,this,"color",H$f)}),H$B(0,H$f,"type",function(){return this._type},function(H$f){this._getCSSStyle().password="password"==H$f,this._type=H$f,H$k.isConchApp&&this.nativeInput.setType(H$f)}),H$B(0,H$f,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(H$f){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),H$B(0,H$f,"asPassword",function(){return this._getCSSStyle().password},function(H$f){this._getCSSStyle().password=H$f,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),H$L.__init__=function(){H$L._createInputElement(),H$P.onMobile&&H$k.canvas.addEventListener(H$L.IOS_IFRAME?H$P.onMiniGame?"touchend":"click":"touchend",H$L._popupInputMethod)},H$L._popupInputMethod=function(H$f){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},H$L._createInputElement=function(){H$L._initInput(H$L.area=H$P.createElement("textarea")),H$L._initInput(H$L.input=H$P.createElement("input")),(H$L.inputContainer=H$P.createElement("div")).style.position="absolute",H$L.inputContainer.style.zIndex=1e5,H$P.container.appendChild(H$L.inputContainer),H$L.inputContainer.setPos=function(H$f,H$K){H$L.inputContainer.style.left=H$f+"px",H$L.inputContainer.style.top=H$K+"px"}},H$L._initInput=function(H$K){var H$f=H$K.style;H$f.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",H$f.resize="none",H$f.backgroundColor="transparent",H$f.border="none",H$f.outline="none",H$f.zIndex=1,H$K.addEventListener("input",H$L._processInputting),H$K.addEventListener("mousemove",H$L._stopEvent),H$K.addEventListener("mousedown",H$L._stopEvent),H$K.addEventListener("touchmove",H$L._stopEvent),H$K.setFontFace=function(H$f){H$K.style.fontFamily=H$f},H$k.isConchApp||(H$K.setColor=function(H$f){H$K.style.color=H$f},H$K.setFontSize=function(H$f){H$K.style.fontSize=H$f+"px"})},H$L._processInputting=function(H$f){var H$K=laya.display.Input.inputElement.target;if(H$K){var H$Y=laya.display.Input.inputElement.value;H$K._restrictPattern&&(H$Y=H$Y.replace(/\u2006|\x27/g,""),H$K._restrictPattern.test(H$Y)&&(H$Y=H$Y.replace(H$K._restrictPattern,""),laya.display.Input.inputElement.value=H$Y)),H$K._text=H$Y,H$K.event("input")}},H$L._stopEvent=function(H$f){"touchmove"==H$f.type&&H$f.preventDefault(),H$f.stopPropagation&&H$f.stopPropagation()},H$L.TYPE_TEXT="text",H$L.TYPE_PASSWORD="password",H$L.TYPE_EMAIL="email",H$L.TYPE_URL="url",H$L.TYPE_NUMBER="number",H$L.TYPE_RANGE="range",H$L.TYPE_DATE="date",H$L.TYPE_MONTH="month",H$L.TYPE_WEEK="week",H$L.TYPE_TIME="time",H$L.TYPE_DATE_TIME="datetime",H$L.TYPE_DATE_TIME_LOCAL="datetime-local",H$L.TYPE_SEARCH="search",H$L.input=null,H$L.area=null,H$L.inputElement=null,H$L.inputContainer=null,H$L.confirmButton=null,H$L.promptStyleDOM=null,H$L.inputHeight=45,H$L.isInputting=!1,H$L.stageMatrix=null,H$O(H$L,["IOS_IFRAME",function(){return this.IOS_IFRAME=H$P.onIOS&&H$P.window.top!=H$P.window.self}]),H$L}(H$hf),H$sf=function(H$f){function H$Y(H$f,H$K){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,H$Y.__super.call(this),H$f&&this._init_(H$f,H$K)}H$U(H$Y,"laya.resource.HTMLImage",H$xf);var H$K=H$Y.prototype;return H$K._init_=function(H$f,H$K){this._src=H$f,this._source=new H$P.window.Image,H$K&&(H$K.onload&&(this.onload=H$K.onload),H$K.onerror&&(this.onerror=H$K.onerror),H$K.onCreate&&H$K.onCreate(this)),0!=H$f.indexOf("data:image")&&(this._source.crossOrigin=""),H$f&&(this._source.src=H$f)},H$K.recreateResource=function(){var H$f=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var H$K=this;this._source=new H$P.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(H$K._needReleaseAgain)return H$K._needReleaseAgain=!1,H$K._source.onload=null,void(H$K._source=null);H$K._source.onload=null,H$K.memorySize=H$f._w*H$f._h*4,H$K._recreateLock=!1,H$K.completeCreate()},this._source.src=this._src}},H$K.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},H$K.onresize=function(){this._w=this._source.width,this._h=this._source.height},H$B(0,H$K,"onload",null,function(H$f){var H$K=this;this._onload=H$f,this._source&&(this._source.onload=null!=this._onload?function(){H$K.onresize(),H$K._onload()}:null)}),H$B(0,H$K,"onerror",null,function(H$f){var H$K=this;this._onerror=H$f,this._source&&(this._source.onerror=null!=this._onerror?function(){H$K._onerror()}:null)}),H$B(0,H$K,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(H$f){this._enableMerageInAtlas=H$f,H$k.isConchApp&&this._source&&(this._source.enableMerageInAtlas=H$f)}),H$Y.create=function(H$f,H$K){return new H$Y(H$f,H$K)},H$Y}(),H$af=(function(H$H){function H$f(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,H$f.__super.call(this)}H$U(H$f,"laya.display.EffectAnimation",H$H);var H$K=H$f.prototype;H$K._onOtherBegin=function(H$f){H$f!=this&&this.stop()},H$K.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},H$K._onPlayAction=function(){this.play(0,!1)},H$K.play=function(H$f,H$K,H$Y,H$X){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=!0),void 0===H$Y&&(H$Y=""),void 0===H$X&&(H$X=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,H$f,H$K,H$Y,H$X))},H$K._recordInitData=function(){if(this._aniKeys){var H$f,H$K,H$Y=0;for(H$f=this._aniKeys.length,H$Y=0;H$Y<H$f;H$Y++)H$K=this._aniKeys[H$Y],this._initData[H$K]=this._target[H$K]}},H$K._displayToIndex=function(H$f){if(this._animationData){H$f<0&&(H$f=0),H$f>this._count&&(H$f=this._count);var H$K=this._animationData.nodes,H$Y=0,H$X=H$K.length;for(H$X=1<H$X?1:H$X,H$Y=0;H$Y<H$X;H$Y++)this._displayNodeToFrame(H$K[H$Y],H$f)}},H$K._displayNodeToFrame=function(H$f,H$K,H$Y){if(this._target){var H$X;H$X=this._target;var H$L,H$H,H$E,H$d,H$O=H$f.frames,H$i=H$f.keys,H$U=0,H$Z=H$i.length;H$d=H$f.secondFrames;var H$y,H$l,H$B,H$$,H$h=0;for(H$U=0;H$U<H$Z;H$U++)H$H=H$O[H$L=H$i[H$U]],H$E=-1==(H$h=H$d[H$L])?this._initData[H$L]:H$K<H$h?(H$B=(H$l=H$f.keyframes[H$L])[0]).tween?(null==(H$y=H$v[H$B.tweenMethod])&&(H$y=H$v.linearNone),H$$=H$l[1],H$y(H$K,this._initData[H$L],H$$.value-this._initData[H$L],H$$.index)):this._initData[H$L]:H$H.length>H$K?H$H[H$K]:H$H[H$H.length-1],H$X[H$L]=H$E}},H$K._calculateNodeKeyFrames=function(H$f){H$H.prototype._calculateNodeKeyFrames.call(this,H$f);var H$K,H$Y,H$X,H$L=H$f.keyframes;H$f.target;for(H$K in H$X={},H$f.secondFrames=H$X,H$L)(H$Y=H$L[H$K]).length<=1?H$X[H$K]=-1:H$X[H$K]=H$Y[1].index},H$B(0,H$K,"target",function(){return this._target},function(H$f){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=H$f,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),H$B(0,H$K,"playEvent",null,function(H$f){(this._playEvents=H$f)&&this.addEvent()}),H$B(0,H$K,"effectData",null,function(H$f){var H$K;H$f&&((H$K=H$f.animations)&&H$K[0]&&(this._setUp({},H$K[0]),H$K[0].nodes&&H$K[0].nodes[0]&&(this._aniKeys=H$K[0].nodes[0].keys)))}),H$B(0,H$K,"effectClass",null,function(H$f){var H$K,H$Y;(this._effectClass=H$M.getClass(H$f),this._effectClass)&&((H$K=this._effectClass.uiView)&&(H$Y=H$K.animations)&&H$Y[0]&&(this._setUp({},H$Y[0]),H$Y[0].nodes&&H$Y[0].nodes[0]&&(this._aniKeys=H$Y[0].nodes[0].keys)))}),H$f.EffectAnimationBegin="effectanimationbegin"}(H$zf),function(H$K){var H$G;function H$m(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,H$m.__super.call(this)}H$U(H$m,"laya.utils.GraphicAnimation",H$K);var H$f=H$m.prototype;return H$f._parseNodeList=function(H$f){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[H$f.compId]=H$f.props,H$f.compId&&this._nodeList.push(H$f.compId);var H$K=H$f.child;if(H$K){var H$Y=0,H$X=H$K.length;for(H$Y=0;H$Y<H$X;H$Y++)this._parseNodeList(H$K[H$Y])}},H$f._calGraphicData=function(H$f){var H$K;if(this._setUp(null,H$f),this._createGraphicData(),this._nodeIDAniDic)for(H$K in this._nodeIDAniDic)this._nodeIDAniDic[H$K]=null},H$f._createGraphicData=function(){var H$f,H$K=[],H$Y=0,H$X=this.count,H$L=this._animationNewFrames;for(H$L||(H$L=[]),H$Y=0;H$Y<H$X;H$Y++)!H$L[H$Y]&&H$f||(H$f=this._createFrameGraphic(H$Y)),H$K.push(H$f);this._gList=H$K},H$f._createFrameGraphic=function(H$f){var H$K=H$R.createGraphics();return H$m._rootMatrix||(H$m._rootMatrix=new H$V),this._updateNodeGraphic(this._rootNode,H$f,H$m._rootMatrix,H$K),H$K},H$f._updateNodeGraphic=function(H$f,H$K,H$Y,H$X,H$L){var H$H;void 0===H$L&&(H$L=1);var H$E,H$d,H$O,H$i=(H$H=this._nodeGDic[H$f.compId]=this._getNodeGraphicData(H$f.compId,H$K,this._nodeGDic[H$f.compId])).alpha*H$L;if(!(H$i<.01)&&(H$H.resultTransform||(H$H.resultTransform=H$V.create()),H$E=H$H.resultTransform,H$V.mul(H$H.transform,H$Y,H$E),H$H.skin&&(H$d=this._getTextureByUrl(H$H.skin))&&(H$E._checkTransform()?(H$X.drawTexture(H$d,0,0,H$H.width,H$H.height,H$E,H$i),H$H.resultTransform=null):H$X.drawTexture(H$d,H$E.tx,H$E.ty,H$H.width,H$H.height,null,H$i)),H$O=H$f.child)){var H$U,H$Z=0;for(H$U=H$O.length,H$Z=0;H$Z<H$U;H$Z++)this._updateNodeGraphic(H$O[H$Z],H$K,H$E,H$X,H$i)}},H$f._updateNoChilds=function(H$f,H$K){if(H$f.skin){var H$Y=this._getTextureByUrl(H$f.skin);if(H$Y){var H$X=H$f.transform;H$X._checkTransform();!H$X.bTransform?H$K.drawTexture(H$Y,H$X.tx,H$X.ty,H$f.width,H$f.height,null,H$f.alpha):H$K.drawTexture(H$Y,0,0,H$f.width,H$f.height,H$X.clone(),H$f.alpha)}}},H$f._updateNodeGraphic2=function(H$f,H$K,H$Y){var H$X;if(H$X=this._nodeGDic[H$f.compId]=this._getNodeGraphicData(H$f.compId,H$K,this._nodeGDic[H$f.compId]),H$f.child){var H$L=H$X.transform;H$L._checkTransform();var H$H,H$E;H$E=(H$H=!H$L.bTransform)&&(0!=H$L.tx||0!=H$L.ty);var H$d,H$O,H$i;if((H$d=H$L.bTransform||1!=H$X.alpha)&&H$Y.save(),1!=H$X.alpha&&H$Y.alpha(H$X.alpha),H$H?H$E&&H$Y.translate(H$L.tx,H$L.ty):H$Y.transform(H$L.clone()),H$O=H$f.child,H$X.skin&&(H$i=this._getTextureByUrl(H$X.skin))&&H$Y.drawTexture(H$i,0,0,H$X.width,H$X.height),H$O){var H$U,H$Z=0;for(H$U=H$O.length,H$Z=0;H$Z<H$U;H$Z++)this._updateNodeGraphic2(H$O[H$Z],H$K,H$Y)}H$d?H$Y.restore():H$H?H$E&&H$Y.translate(-H$L.tx,-H$L.ty):H$Y.transform(H$L.clone().invert())}else this._updateNoChilds(H$X,H$Y)},H$f._calculateNodeKeyFrames=function(H$f){H$K.prototype._calculateNodeKeyFrames.call(this,H$f),this._nodeIDAniDic[H$f.target]=H$f},H$f.getNodeDataByID=function(H$f){return this._nodeIDAniDic[H$f]},H$f._getParams=function(H$f,H$K,H$Y,H$X){var H$L=H$m._temParam;H$L.length=H$K.length;var H$H=0,H$E=H$K.length;for(H$H=0;H$H<H$E;H$H++)H$L[H$H]=this._getObjVar(H$f,H$K[H$H][0],H$Y,H$K[H$H][1],H$X);return H$L},H$f._getObjVar=function(H$f,H$K,H$Y,H$X,H$L){if(H$f.hasOwnProperty(H$K)){var H$H=H$f[H$K];if(H$Y>=H$H.length&&(H$Y=H$H.length-1),null!=H$f[H$K][H$Y])return H$f[H$K][H$Y]}return H$L.hasOwnProperty(H$K)?H$L[H$K]:H$X},H$f._getNodeGraphicData=function(H$f,H$K,H$Y){H$Y||(H$Y=H$G.create()),H$Y.transform?H$Y.transform.identity():H$Y.transform=H$V.create();var H$X=this.getNodeDataByID(H$f);if(!H$X)return H$Y;var H$L,H$H,H$E=H$X.frames,H$d=this._getParams(H$E,H$m._drawTextureCmd,H$K,this._nodeDefaultProps[H$f]),H$O=H$d[0],H$i=NaN,H$U=NaN,H$Z=H$d[5],H$y=H$d[6],H$l=H$d[13],H$B=H$d[14],H$$=H$d[7],H$h=H$d[8],H$A=H$d[9],H$x=H$d[11],H$S=H$d[12];H$i=H$d[3],H$U=H$d[4],0!=H$i&&0!=H$U||(H$O=null),-1==H$i&&(H$i=0),-1==H$U&&(H$U=0),H$Y.skin=H$O,H$Y.width=H$i,H$Y.height=H$U,H$O&&((H$L=this._getTextureByUrl(H$O))?(H$i||(H$i=H$L.sourceWidth),H$U||(H$U=H$L.sourceHeight)):console.warn("lost skin:",H$O,",you may load pics first")),H$Y.alpha=H$d[10],H$H=H$Y.transform,0!=H$l&&(H$Z=H$l*H$i),0!=H$B&&(H$y=H$B*H$U),0==H$Z&&0==H$y||H$H.translate(-H$Z,-H$y);var H$z=null;if(H$A||1!==H$$||1!==H$h||H$x||H$S){(H$z=H$m._tempMt).identity(),H$z.bTransform=!0;var H$C=.0174532922222222*(H$A-H$x),H$s=.0174532922222222*(H$A+H$S),H$a=Math.cos(H$s),H$I=Math.sin(H$s),H$n=Math.sin(H$C),H$_=Math.cos(H$C);H$z.a=H$$*H$a,H$z.b=H$$*H$I,H$z.c=-H$h*H$n,H$z.d=H$h*H$_,H$z.tx=H$z.ty=0}return H$z&&(H$H=H$V.mul(H$H,H$z,H$H)),H$H.translate(H$d[1],H$d[2]),H$Y},H$f._getTextureByUrl=function(H$f){return H$df.getRes(H$f)},H$f.setAniData=function(H$f,H$K){if(H$f.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=H$f,this._parseNodeList(H$f);var H$Y,H$X={},H$L=[],H$H=H$f.animations,H$E=0,H$d=H$H.length;for(H$E=0;H$E<H$d;H$E++)if(H$Y=H$H[H$E],this._labels=null,(!H$K||H$K==H$Y.name)&&H$Y){try{this._calGraphicData(H$Y)}catch(H$f){console.warn("parse animation fail:"+H$Y.name+",empty animation created"),this._gList=[]}var H$O={};H$O.interval=1e3/H$Y.frameRate,H$O.frames=this._gList,H$O.labels=this._labels,H$O.name=H$Y.name,H$L.push(H$O),H$X[H$Y.name]=H$O}this.animationList=H$L,this.animationDic=H$X}H$m._temParam.length=0},H$f.parseByData=function(H$f){var H$K,H$Y;H$K=H$f.nodeRoot,H$Y=H$f.aniO,delete H$f.nodeRoot,delete H$f.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=H$K,this._parseNodeList(H$K),this._labels=null;try{this._calGraphicData(H$Y)}catch(H$f){console.warn("parse animation fail:"+H$Y.name+",empty animation created"),this._gList=[]}var H$X=H$f;return H$X.interval=1e3/H$Y.frameRate,H$X.frames=this._gList,H$X.labels=this._labels,H$X.name=H$Y.name,H$X},H$f.setUpAniData=function(H$f){if(H$f.animations){var H$K,H$Y={},H$X=[],H$L=H$f.animations,H$H=0,H$E=H$L.length;for(H$H=0;H$H<H$E;H$H++)if(H$K=H$L[H$H]){var H$d={};H$d.name=H$K.name,H$d.aniO=H$K,H$d.nodeRoot=H$f,H$X.push(H$d),H$Y[H$K.name]=H$d}this.animationList=H$X,this.animationDic=H$Y}},H$f._clear=function(){var H$f,H$K;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(H$f in this._nodeGDic)(H$K=this._nodeGDic[H$f])&&H$K.recover();this._nodeGDic=null},H$m.parseAnimationByData=function(H$f){var H$K;return H$m._I||(H$m._I=new H$m),H$K=H$m._I.parseByData(H$f),H$m._I._clear(),H$K},H$m.parseAnimationData=function(H$f){var H$K;return H$m._I||(H$m._I=new H$m),H$m._I.setUpAniData(H$f),(H$K={}).animationList=H$m._I.animationList,H$K.animationDic=H$m._I.animationDic,H$m._I._clear(),H$K},H$m._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],H$m._temParam=[],H$m._I=null,H$m._rootMatrix=null,H$O(H$m,["_tempMt",function(){return this._tempMt=new H$V}]),H$m.__init$=function(){H$G=function(){function H$f(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return H$U(H$f,""),H$f.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),H$c.recover("GraphicNode",this)},H$f.create=function(){return H$c.getItemByClass("GraphicNode",H$f)},H$f}()},H$m}(H$zf));H$a.__init([H$i,H$Of,H$k,H$P,H$u,H$_,H$f,H$af])}(window,document,Laya),function(H$f,H$K,H$Y){H$Y.un,H$Y.uns,H$Y.static;var H$X=H$Y.class;H$Y.getset,H$Y.__newvec;new(function(){function H$f(){}return H$X(H$f,"LayaMain"),H$f}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$f,H$K){"use strict";for(var H$Y in Object.defineProperty(H$K,"__esModule",{value:!0}),Laya){var H$X=Laya[H$Y];H$X&&H$X.__isclass&&(H$K[H$Y]=H$X)}}),function(H$f,H$K,H$s){H$s.un,H$s.uns;var H$E=H$s.static,H$y=H$s.class,H$X=H$s.getset,H$H=H$s.__newvec,H$U=laya.maths.Arith,H$Z=laya.maths.Bezier,H$Y=laya.resource.Bitmap,H$l=laya.utils.Browser,H$O=laya.utils.Byte,H$B=laya.utils.Color,H$a=(laya.filters.ColorFilter,H$s.Config),H$L=laya.resource.Context,H$I=(laya.events.Event,laya.filters.Filter),H$d=laya.display.Graphics,H$i=laya.resource.HTMLCanvas,H$$=(laya.utils.HTMLChar,laya.resource.HTMLImage),H$h=laya.resource.HTMLSubImage,H$n=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),H$_=laya.maths.Point,H$G=laya.maths.Rectangle,H$A=laya.renders.Render,H$x=(laya.renders.RenderContext,laya.renders.RenderSprite),H$S=laya.resource.Resource,H$z=laya.resource.ResourceManager,H$C=laya.utils.RunDriver,H$m=laya.display.Sprite,H$R=laya.display.Stage,H$V=laya.utils.Stat,H$t=laya.utils.StringKey,H$T=(laya.display.css.Style,laya.system.System),H$k=laya.display.Text,H$e=laya.resource.Texture,H$Q=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),H$W=laya.utils.VectorGraphManager;laya.utils.WordText;H$s.interface("laya.webgl.shapes.IShape"),H$s.interface("laya.webgl.submit.ISubmit"),H$s.interface("laya.webgl.text.ICharSegment"),H$s.interface("laya.webgl.canvas.save.ISaveData"),H$s.interface("laya.webgl.resource.IMergeAtlasBitmap"),H$s.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var H$q=function(){function H$f(){}H$y(H$f,"laya.filters.webgl.FilterActionGL");var H$K=H$f.prototype;return H$s.imps(H$K,{"laya.filters.IFilterActionGL":!0}),H$K.setValue=function(H$f){},H$K.setValueMix=function(H$f){},H$K.apply3d=function(H$f,H$K,H$Y,H$X,H$L){return null},H$K.apply=function(H$f){return null},H$X(0,H$K,"typeMix",function(){return 0}),H$f}(),H$P=function(){function H$f(){}return H$y(H$f,"laya.webgl.shader.ShaderValue"),H$f}(),H$b=function(){var H$X,H$L;function H$f(H$f,H$K,H$Y){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new H$L,void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),this._cells=null,this._rowInfo=null,this._init(H$f,H$K),this._atlasID=H$Y}H$y(H$f,"laya.webgl.atlas.AtlasGrid");var H$K=H$f.prototype;return H$K.getAltasID=function(){return this._atlasID},H$K.setAltasID=function(H$f){0<=H$f&&(this._atlasID=H$f)},H$K.addTex=function(H$f,H$K,H$Y){var H$X=this._get(H$K,H$Y);return 0==H$X.ret||(this._fill(H$X.x,H$X.y,H$K,H$Y,H$f),this._texCount++),H$X},H$K._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},H$K._init=function(H$f,H$K){if(this._width=H$f,this._height=H$K,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=H$H(this._height);for(var H$Y=0;H$Y<this._height;H$Y++)this._rowInfo[H$Y]=new H$X;return this._clear(),!0},H$K._get=function(H$f,H$K){var H$Y=new H$M;if(H$f>=this._failSize.width&&H$K>=this._failSize.height)return H$Y;for(var H$X=-1,H$L=-1,H$H=this._width,H$E=this._height,H$d=this._cells,H$O=0;H$O<H$E;H$O++)if(!(this._rowInfo[H$O].spaceCount<H$f))for(var H$i=0;H$i<H$H;){var H$U=3*(H$O*H$H+H$i);if(0!=H$d[H$U]||H$d[1+H$U]<H$f||H$d[2+H$U]<H$K)H$i+=H$d[1+H$U];else{H$X=H$i,H$L=H$O;for(var H$Z=0;H$Z<H$f;H$Z++)if(H$d[3*H$Z+H$U+2]<H$K){H$X=-1;break}if(!(H$X<0))return H$Y.ret=!0,H$Y.x=H$X,H$Y.y=H$L,H$Y;H$i+=H$d[1+H$U]}}return H$Y},H$K._fill=function(H$f,H$K,H$Y,H$X,H$L){var H$H=this._width,H$E=this._height;this._check(H$f+H$Y<=H$H&&H$K+H$X<=H$E);for(var H$d=H$K;H$d<H$X+H$K;++H$d){this._check(this._rowInfo[H$d].spaceCount>=H$Y),this._rowInfo[H$d].spaceCount-=H$Y;for(var H$O=0;H$O<H$Y;H$O++){var H$i=3*(H$f+H$d*H$H+H$O);this._check(0==this._cells[H$i]),this._cells[H$i]=H$L,this._cells[1+H$i]=H$Y,this._cells[2+H$i]=H$X}}if(0<H$f)for(H$d=0;H$d<H$X;++H$d){var H$U=0;for(H$O=H$f-1;0<=H$O&&0==this._cells[3*((H$K+H$d)*H$H+H$O)];--H$O,++H$U);for(H$O=H$U;0<H$O;--H$O)this._cells[3*((H$K+H$d)*H$H+H$f-H$O)+1]=H$O,this._check(0<H$O)}if(0<H$K)for(H$O=H$f;H$O<H$f+H$Y;++H$O){for(H$U=0,H$d=H$K-1;0<=H$d&&0==this._cells[3*(H$O+H$d*H$H)];--H$d,H$U++);for(H$d=H$U;0<H$d;--H$d)this._cells[3*(H$O+(H$K-H$d)*H$H)+2]=H$d,this._check(0<H$d)}},H$K._check=function(H$f){0==H$f&&console.log("xtexMerger 错误啦")},H$K._clear=function(){for(var H$f=this._texCount=0;H$f<this._height;H$f++)this._rowInfo[H$f].spaceCount=this._width;for(var H$K=0;H$K<this._height;H$K++)for(var H$Y=0;H$Y<this._width;H$Y++){var H$X=3*(H$K*this._width+H$Y);this._cells[H$X]=0,this._cells[1+H$X]=this._width-H$Y,this._cells[2+H$X]=this._width-H$K}this._failSize.width=this._width+1,this._failSize.height=this._height+1},H$f.__init$=function(){H$X=function(){function H$f(){this.spaceCount=0}return H$y(H$f,""),H$f}(),H$L=function(){function H$f(){this.width=0,this.height=0}return H$y(H$f,""),H$f}()},H$f}(),H$J=function(){function H$A(H$f,H$K,H$Y,H$X){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=H$f,this._height=H$K,this._gridSize=H$Y,this._maxAtlaserCount=H$X,this._gridNumX=H$f/H$Y,this._gridNumY=H$K/H$Y,this._curAtlasIndex=0,this._atlaserArray=[]}H$y(H$A,"laya.webgl.atlas.AtlasResourceManager");var H$f=H$A.prototype;return H$f.setAtlasParam=function(H$f,H$K,H$Y,H$X){if(1==this._setAtlasParam)return H$A._sid_=0,this._width=H$f,this._height=H$K,this._gridSize=H$Y,this._maxAtlaserCount=H$X,this._gridNumX=H$f/H$Y,this._gridNumY=H$K/H$Y,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},H$f.pushData=function(H$f){var H$K,H$Y=H$f.bitmap,H$X=-1,H$L=null,H$H=0,H$E=0;for(H$H=0,H$K=this._atlaserArray.length;H$H<H$K&&(H$E=(this._curAtlasIndex+H$H)%H$K,-1==(H$X=(H$L=this._atlaserArray[H$E]).findBitmapIsExist(H$Y)));H$H++);if(-1!=H$X){var H$d=H$L.InAtlasWebGLImagesOffsetValue[H$X];return H$B=H$d[0],H$$=H$d[1],H$L.addToAtlas(H$f,H$B,H$$),!0}this._setAtlasParam=!1;for(var H$O=Math.ceil((H$f.bitmap.width+2)/this._gridSize),H$i=Math.ceil((H$f.bitmap.height+2)/this._gridSize),H$U=!1,H$Z=0;H$Z<2;H$Z++){var H$y=this._maxAtlaserCount;for(H$H=0;H$H<H$y;H$H++){H$E=(this._curAtlasIndex+H$H)%H$y,this._atlaserArray.length-1>=H$E||this._atlaserArray.push(new H$Gf(this._gridNumX,this._gridNumY,this._width,this._height,H$A._sid_++));var H$l=this._atlaserArray[H$E],H$B=0,H$$=0,H$h=H$l.addTex(1,H$O,H$i);if(H$h.ret){H$B=H$h.x*this._gridSize+1,H$$=H$h.y*this._gridSize+1,H$Y.lock=!0,H$l.addToAtlasTexture(H$Y,H$B,H$$),H$l.addToAtlas(H$f,H$B,H$$),H$U=!0,this._curAtlasIndex=H$E;break}}if(H$U)break;this._atlaserArray.push(new H$Gf(this._gridNumX,this._gridNumY,this._width,this._height,H$A._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return H$U||console.log(">>>AtlasManager pushData error"),H$U},H$f.addToAtlas=function(H$f){laya.webgl.atlas.AtlasResourceManager.instance.pushData(H$f)},H$f.garbageCollection=function(){if(!0===this._needGC){for(var H$f=this._atlaserArray.length-this._maxAtlaserCount,H$K=0;H$K<H$f;H$K++)this._atlaserArray[H$K].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+H$f),this._atlaserArray.splice(0,H$f),this._needGC=!1}return!0},H$f.freeAll=function(){for(var H$f=0,H$K=this._atlaserArray.length;H$f<H$K;H$f++)this._atlaserArray[H$f].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},H$f.getAtlaserCount=function(){return this._atlaserArray.length},H$f.getAtlaserByIndex=function(H$f){return this._atlaserArray[H$f]},H$X(1,H$A,"instance",function(){return H$A._Instance||(H$A._Instance=new H$A(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),H$A._Instance}),H$X(1,H$A,"enabled",function(){return H$a.atlasEnable}),H$X(1,H$A,"atlasLimitWidth",function(){return H$A._atlasLimitWidth},function(H$f){H$A._atlasLimitWidth=H$f}),H$X(1,H$A,"atlasLimitHeight",function(){return H$A._atlasLimitHeight},function(H$f){H$A._atlasLimitHeight=H$f}),H$A._enable=function(){H$a.atlasEnable=!0},H$A._disable=function(){H$a.atlasEnable=!1},H$A.__init__=function(){H$A.atlasTextureWidth=2048,H$A.atlasTextureHeight=2048,H$A.maxTextureCount=6,H$A.atlasLimitWidth=512,H$A.atlasLimitHeight=512},H$A._atlasLimitWidth=0,H$A._atlasLimitHeight=0,H$A.gridSize=16,H$A.atlasTextureWidth=0,H$A.atlasTextureHeight=0,H$A.maxTextureCount=0,H$A._atlasRestore=0,H$A.BOARDER_TYPE_NO=0,H$A.BOARDER_TYPE_RIGHT=1,H$A.BOARDER_TYPE_LEFT=2,H$A.BOARDER_TYPE_BOTTOM=4,H$A.BOARDER_TYPE_TOP=8,H$A.BOARDER_TYPE_ALL=15,H$A._sid_=0,H$A._Instance=null,H$A}(),H$M=function(){function H$f(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return H$y(H$f,"laya.webgl.atlas.MergeFillInfo"),H$f}(),H$w=function(){function H$K(){}return H$y(H$K,"laya.webgl.canvas.BlendMode"),H$K._init_=function(H$f){H$K.fns=[H$K.BlendNormal,H$K.BlendAdd,H$K.BlendMultiply,H$K.BlendScreen,H$K.BlendOverlay,H$K.BlendLight,H$K.BlendMask,H$K.BlendDestinationOut],H$K.targetFns=[H$K.BlendNormalTarget,H$K.BlendAddTarget,H$K.BlendMultiplyTarget,H$K.BlendScreenTarget,H$K.BlendOverlayTarget,H$K.BlendLightTarget,H$K.BlendMask,H$K.BlendDestinationOut]},H$K.BlendNormal=function(H$f){H$f.blendFunc(1,771)},H$K.BlendAdd=function(H$f){H$f.blendFunc(1,772)},H$K.BlendMultiply=function(H$f){H$f.blendFunc(774,771)},H$K.BlendScreen=function(H$f){H$f.blendFunc(1,1)},H$K.BlendOverlay=function(H$f){H$f.blendFunc(1,769)},H$K.BlendLight=function(H$f){H$f.blendFunc(1,1)},H$K.BlendNormalTarget=function(H$f){H$f.blendFunc(1,771)},H$K.BlendAddTarget=function(H$f){H$f.blendFunc(1,772)},H$K.BlendMultiplyTarget=function(H$f){H$f.blendFunc(774,771)},H$K.BlendScreenTarget=function(H$f){H$f.blendFunc(1,1)},H$K.BlendOverlayTarget=function(H$f){H$f.blendFunc(1,769)},H$K.BlendLightTarget=function(H$f){H$f.blendFunc(1,1)},H$K.BlendMask=function(H$f){H$f.blendFunc(0,770)},H$K.BlendDestinationOut=function(H$f){H$f.blendFunc(0,0)},H$K.activeBlendFunction=null,H$K.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],H$K.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},H$K.NORMAL="normal",H$K.ADD="add",H$K.MULTIPLY="multiply",H$K.SCREEN="screen",H$K.LIGHT="light",H$K.OVERLAY="overlay",H$K.DESTINATIONOUT="destination-out",H$K.fns=[],H$K.targetFns=[],H$K}(),H$r=function(){function H$Y(H$f){this._color=H$B.create("black"),this.setValue(H$f)}H$y(H$Y,"laya.webgl.canvas.DrawStyle");var H$f=H$Y.prototype;return H$f.setValue=function(H$f){if(H$f){if("string"==typeof H$f)return void(this._color=H$B.create(H$f));if(H$f instanceof laya.utils.Color)return void(this._color=H$f)}},H$f.reset=function(){this._color=H$B.create("black")},H$f.equal=function(H$f){return"string"==typeof H$f?this._color.strColor===H$f:H$f instanceof laya.utils.Color&&this._color.numColor===H$f.numColor},H$f.toColorStr=function(){return this._color.strColor},H$Y.create=function(H$f){var H$K;if(H$f&&("string"==typeof H$f?H$K=H$B.create(H$f):H$f instanceof laya.utils.Color&&(H$K=H$f),H$K))return H$K._drawStyle||(H$K._drawStyle=new H$Y(H$f));return laya.webgl.canvas.DrawStyle.DEFAULT},H$E(H$Y,["DEFAULT",function(){return this.DEFAULT=new H$Y("#000000")}]),H$Y}(),H$v=function(){function H$f(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];H$zf.mainContext;this.ib=H$of.create(35048),this.vb=H$Ff.create(5)}H$y(H$f,"laya.webgl.canvas.Path");var H$K=H$f.prototype;return H$K.addPoint=function(H$f,H$K){this.tempArray.push(H$f,H$K)},H$K.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},H$K.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},H$K.polygon=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E;return this.geomatrys.push(this._curGeomatry=H$E=new H$tf(H$f,H$K,H$Y,H$X,H$L,H$H)),H$X||(H$E.fill=!1),null==H$H&&(H$E.borderWidth=0),H$E},H$K.setGeomtry=function(H$f){this.geomatrys.push(this._curGeomatry=H$f)},H$K.drawLine=function(H$f,H$K,H$Y,H$X,H$L){var H$H;return this.closePath?this.geomatrys.push(this._curGeomatry=H$H=new H$Vf(H$f,H$K,H$Y,H$X,H$L)):this.geomatrys.push(this._curGeomatry=H$H=new H$Rf(H$f,H$K,H$Y,H$X,H$L)),H$H.fill=!1,H$H},H$K.update=function(){var H$f=this.ib._byteLength,H$K=this.geomatrys.length;this.offset=H$f;for(var H$Y=this.geoStart;H$Y<H$K;H$Y++)this.geomatrys[H$Y].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=H$K,this.count=(this.ib._byteLength-H$f)/H$$f.BYTES_PIDX},H$K.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},H$K.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},H$f}(),H$j=function(){function H$d(){}H$y(H$d,"laya.webgl.canvas.save.SaveBase");var H$f=H$d.prototype;return H$s.imps(H$f,{"laya.webgl.canvas.save.ISaveData":!0}),H$f.isSaveMark=function(){return!1},H$f.restore=function(H$f){this._dataObj[this._valueName]=this._value,(H$d._cache[H$d._cache._length++]=this)._newSubmit&&(H$f._curSubmit=H$Hf.RENDERBASE,H$f._renderKey=0)},H$d._createArray=function(){var H$f=[];return H$f._length=0,H$f},H$d._init=function(){var H$f=H$d._namemap={};return H$f[1]="ALPHA",H$f[2]="fillStyle",H$f[8]="font",H$f[256]="lineWidth",H$f[512]="strokeStyle",H$f[8192]="_mergeID",H$f[1024]=H$f[2048]=H$f[4096]=[],H$f[16384]="textBaseline",H$f[32768]="textAlign",H$f[65536]="_nBlendType",H$f[1048576]="shader",H$f[2097152]="filters",H$f},H$d.save=function(H$f,H$K,H$Y,H$X){if((H$f._saveMark._saveuse&H$K)!==H$K){H$f._saveMark._saveuse|=H$K;var H$L=H$d._cache,H$H=0<H$L._length?H$L[--H$L._length]:new H$d;H$H._value=H$Y[H$H._valueName=H$d._namemap[H$K]],H$H._dataObj=H$Y,H$H._newSubmit=H$X;var H$E=H$f._save;H$E[H$E._length++]=H$H}},H$d._cache=laya.webgl.canvas.save.SaveBase._createArray(),H$d._namemap=H$d._init(),H$d}(),H$c=function(){function H$H(){this._clipRect=new H$G}H$y(H$H,"laya.webgl.canvas.save.SaveClipRect");var H$f=H$H.prototype;return H$s.imps(H$f,{"laya.webgl.canvas.save.ISaveData":!0}),H$f.isSaveMark=function(){return!1},H$f.restore=function(H$f){H$f._clipRect=this._clipSaveRect,(H$H._cache[H$H._cache._length++]=this)._submitScissor.submitLength=H$f._submits._length-this._submitScissor.submitIndex,H$f._curSubmit=H$Hf.RENDERBASE,H$f._renderKey=0},H$H.save=function(H$f,H$K){if(131072!=(131072&H$f._saveMark._saveuse)){H$f._saveMark._saveuse|=131072;var H$Y=H$H._cache,H$X=0<H$Y._length?H$Y[--H$Y._length]:new H$H;H$X._clipSaveRect=H$f._clipRect,H$f._clipRect=H$X._clipRect.copyFrom(H$f._clipRect),H$X._submitScissor=H$K;var H$L=H$f._save;H$L[H$L._length++]=H$X}},H$E(H$H,["_cache",function(){return this._cache=H$j._createArray()}]),H$H}(),H$p=function(){function H$l(){this._contextX=0,this._contextY=0,this._clipRect=new H$G,this._rect=new H$G,this._matrix=new H$n}H$y(H$l,"laya.webgl.canvas.save.SaveClipRectStencil");var H$f=H$l.prototype;return H$s.imps(H$f,{"laya.webgl.canvas.save.ISaveData":!0}),H$f.isSaveMark=function(){return!1},H$f.restore=function(H$f){H$Uf.restore(H$f,this._rect,this._saveMatrix,this._contextX,this._contextY),H$f._clipRect=this._clipSaveRect,H$f._curMat=this._saveMatrix,H$f._x=this._contextX,H$f._y=this._contextY,H$l._cache[H$l._cache._length++]=this,H$f._curSubmit=H$Hf.RENDERBASE},H$l.save=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){if(262144!=(262144&H$f._saveMark._saveuse)){H$f._saveMark._saveuse|=262144;var H$U=H$l._cache,H$Z=0<H$U._length?H$U[--H$U._length]:new H$l;H$Z._clipSaveRect=H$f._clipRect,H$Z._clipRect.setTo(H$E,H$d,H$O,H$i),H$f._clipRect=H$Z._clipRect,H$Z._rect.x=H$Y,H$Z._rect.y=H$X,H$Z._rect.width=H$L,H$Z._rect.height=H$H,H$Z._contextX=H$f._x,H$Z._contextY=H$f._y,H$Z._saveMatrix=H$f._curMat,H$f._curMat.copyTo(H$Z._matrix),H$f._curMat=H$Z._matrix,H$Z._submitStencil=H$K;var H$y=H$f._save;H$y[H$y._length++]=H$Z}},H$E(H$l,["_cache",function(){return this._cache=H$j._createArray()}]),H$l}(),H$u=function(){function H$X(){this._saveuse=0}H$y(H$X,"laya.webgl.canvas.save.SaveMark");var H$f=H$X.prototype;return H$s.imps(H$f,{"laya.webgl.canvas.save.ISaveData":!0}),H$f.isSaveMark=function(){return!0},H$f.restore=function(H$f){H$f._saveMark=this._preSaveMark,H$X._no[H$X._no._length++]=this},H$X.Create=function(H$f){var H$K=H$X._no,H$Y=0<H$K._length?H$K[--H$K._length]:new H$X;return H$Y._saveuse=0,H$Y._preSaveMark=H$f._saveMark,H$f._saveMark=H$Y},H$E(H$X,["_no",function(){return this._no=H$j._createArray()}]),H$X}(),H$D=function(){function H$H(){this._matrix=new H$n}H$y(H$H,"laya.webgl.canvas.save.SaveTransform");var H$f=H$H.prototype;return H$s.imps(H$f,{"laya.webgl.canvas.save.ISaveData":!0}),H$f.isSaveMark=function(){return!1},H$f.restore=function(H$f){H$f._curMat=this._savematrix,H$H._no[H$H._no._length++]=this},H$H.save=function(H$f){var H$K=H$f._saveMark;if(2048!=(2048&H$K._saveuse)){H$K._saveuse|=2048;var H$Y=H$H._no,H$X=0<H$Y._length?H$Y[--H$Y._length]:new H$H;H$X._savematrix=H$f._curMat,H$f._curMat=H$f._curMat.copyTo(H$X._matrix);var H$L=H$f._save;H$L[H$L._length++]=H$X}},H$E(H$H,["_no",function(){return this._no=H$j._createArray()}]),H$H}(),H$g=function(){function H$L(){}H$y(H$L,"laya.webgl.canvas.save.SaveTranslate");var H$f=H$L.prototype;return H$s.imps(H$f,{"laya.webgl.canvas.save.ISaveData":!0}),H$f.isSaveMark=function(){return!1},H$f.restore=function(H$f){H$f._curMat;H$f._x=this._x,H$f._y=this._y,H$L._no[H$L._no._length++]=this},H$L.save=function(H$f){var H$K=H$L._no,H$Y=0<H$K._length?H$K[--H$K._length]:new H$L;H$Y._x=H$f._x,H$Y._y=H$f._y;var H$X=H$f._save;H$X[H$X._length++]=H$Y},H$E(H$L,["_no",function(){return this._no=H$j._createArray()}]),H$L}(),H$N=function(){function H$f(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new H$G}H$y(H$f,"laya.webgl.resource.RenderTargetMAX");var H$K=H$f.prototype;return H$K.setSP=function(H$f){this._sp=H$f},H$K.size=function(H$f,H$K){var H$Y=this;this._width!==H$f||this._height!==H$K?(this.repaint=!0,this._width=H$f,this._height=H$K,this.target?this.target.size(H$f,H$K):this.target=H$Wf.create(H$f,H$K),this.target.hasListener("recovered")||this.target.on("recovered",this,function(H$f){H$s.timer.callLater(H$Y._sp,H$Y._sp.repaint)})):this.target.size(H$f,H$K)},H$K._flushToTarget=function(H$f,H$K){if(!H$K._destroy){var H$Y=H$xf.worldScissorTest,H$X=H$xf.worldClipRect;H$xf.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,H$xf.worldScissorTest=!1,H$zf.mainContext.disable(3089);var H$L=H$xf.worldAlpha,H$H=H$xf.worldMatrix4,H$E=H$xf.worldMatrix,H$d=H$xf.worldFilters,H$O=H$xf.worldShaderDefines;if(H$xf.worldMatrix=H$n.EMPTY,H$xf.restoreTempArray(),H$xf.worldMatrix4=H$xf.TEMPMAT4_ARRAY,H$xf.worldAlpha=1,H$xf.worldFilters=null,H$xf.worldShaderDefines=null,H$Qf.activeShader=null,H$K.start(),H$a.showCanvasMark?H$K.clear(0,1,0,.3):H$K.clear(0,0,0,0),H$f.flush(),H$K.end(),H$Qf.activeShader=null,H$xf.worldAlpha=H$L,H$xf.worldMatrix4=H$H,H$xf.worldMatrix=H$E,H$xf.worldFilters=H$d,H$xf.worldShaderDefines=H$O,H$xf.worldScissorTest=H$Y){var H$i=H$xf.height-H$X.y-H$X.height;H$zf.mainContext.scissor(H$X.x,H$i,H$X.width,H$X.height),H$zf.mainContext.enable(3089)}H$xf.worldClipRect=H$X}},H$K.flush=function(H$f){this.repaint&&(this._flushToTarget(H$f,this.target),this.repaint=!1)},H$K.drawTo=function(H$f,H$K,H$Y,H$X,H$L){H$f.drawTexture(this.target.getTexture(),H$K,H$Y,H$X,H$L,0,0)},H$K.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},H$f}(),H$o=function(){function H$f(){this.ALPHA=1,this.shaderType=0,this.defines=new H$mf}return H$y(H$f,"laya.webgl.shader.d2.Shader2D"),H$f.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},H$f.__init__=function(){var H$f,H$K;H$uf.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),H$uf.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),H$uf.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),H$uf.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),H$uf.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),H$uf.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),H$uf.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),H$uf.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),H$f="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",H$K='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',H$uf.preCompile2D(0,1,H$f,H$K,null),H$f="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",H$K='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',H$uf.preCompile2D(0,2,H$f,H$K,null),H$f="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",H$K="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",H$uf.preCompile2D(0,4,H$f,H$K,null),H$f="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",H$K='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',H$uf.preCompile2D(0,256,H$f,H$K,null),H$f="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",H$K="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",H$uf.preCompile2D(0,512,H$f,H$K,null)},H$f}(),H$F=function(){function H$K(H$f,H$K,H$Y){this._value=0,this._name2int=H$f,this._int2name=H$K,this._int2nameMap=H$Y}H$y(H$K,"laya.webgl.shader.ShaderDefines");var H$f=H$K.prototype;return H$f.add=function(H$f){return"string"==typeof H$f&&(H$f=this._name2int[H$f]),this._value|=H$f,this._value},H$f.addInt=function(H$f){return this._value|=H$f,this._value},H$f.remove=function(H$f){return"string"==typeof H$f&&(H$f=this._name2int[H$f]),this._value&=~H$f,this._value},H$f.isDefine=function(H$f){return(this._value&H$f)===H$f},H$f.getValue=function(){return this._value},H$f.setValue=function(H$f){this._value=H$f},H$f.toNameDic=function(){var H$f=this._int2nameMap[this._value];return H$f||H$K._toText(this._value,this._int2name,this._int2nameMap)},H$K._reg=function(H$f,H$K,H$Y,H$X){H$X[H$Y[H$f]=H$K]=H$f},H$K._toText=function(H$f,H$K,H$Y){var H$X=H$Y[H$f];if(H$X)return H$X;for(var H$L={},H$H=1,H$E=0;H$E<32&&!(H$f<(H$H=1<<H$E));H$E++)if(H$f&H$H){var H$d=H$K[H$H];H$d&&(H$L[H$d]="")}return H$Y[H$f]=H$L},H$K._toInt=function(H$f,H$K){for(var H$Y=H$f.split("."),H$X=0,H$L=0,H$H=H$Y.length;H$L<H$H;H$L++){var H$E=H$K[H$Y[H$L]];if(!H$E)throw new Error("Defines to int err:"+H$f+"/"+H$Y[H$L]);H$X|=H$E}return H$X},H$K}(),H$ff=function(){function H$E(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new H$n}H$y(H$E,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var H$f=H$E.prototype;return H$f.init=function(H$f,H$K,H$Y){if(H$K)this._vs=H$K;else{this._vs=[];var H$X=H$f.width,H$L=H$f.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(H$X,0,1,0,1,1,1,1),this._vs.push(H$X,H$L,1,1,1,1,1,1),this._vs.push(0,H$L,0,1,1,1,1,1)}H$Y?this._ps=H$Y:(H$E._defaultPS||(H$E._defaultPS=[]).push(0,1,3,3,1,2),this._ps=H$E._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=H$f},H$f.init2=function(H$f,H$K,H$Y,H$X,H$L){this.transform&&(this.transform=null),H$Y?this._ps=H$Y:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=H$X,this._uvs=H$L,this.mEleNum=this._ps.length,this.mTexture=H$f,(H$A.isConchNode||H$A.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},H$f._initMyData=function(){var H$f=0,H$K=0,H$Y=4*this._verticles.length;this._vs=H$E._tempVS;var H$X=!1;if(H$A.isConchNode||H$A.isConchApp?(this._vs.length=H$Y,H$X=!0):this._vs.length<H$Y&&(this._vs.length=H$Y,H$X=!0),H$E._tVSLen=H$Y,H$X)for(;H$f<H$Y;)this._vs[H$f]=this._verticles[H$K],this._vs[H$f+1]=this._verticles[H$K+1],this._vs[H$f+2]=this._uvs[H$K],this._vs[H$f+3]=this._uvs[H$K+1],this._vs[H$f+4]=1,this._vs[H$f+5]=1,this._vs[H$f+6]=1,this._vs[H$f+7]=1,H$f+=8,H$K+=2;else for(;H$f<H$Y;)this._vs[H$f]=this._verticles[H$K],this._vs[H$f+1]=this._verticles[H$K+1],this._vs[H$f+2]=this._uvs[H$K],this._vs[H$f+3]=this._uvs[H$K+1],H$f+=8,H$K+=2},H$f.getData2=function(H$f,H$K,H$Y){var H$X;this.mVBBuffer=H$f,this.mIBBuffer=H$K,this._initMyData(),H$f.appendEx2(this._vs,Float32Array,H$E._tVSLen,4),this._indexStart=H$K._byteLength,(H$X=H$E._tempIB).length<this._ps.length&&(H$X.length=this._ps.length);for(var H$L=0,H$H=this._ps.length;H$L<H$H;H$L++)H$X[H$L]=this._ps[H$L]+H$Y;H$K.appendEx2(H$X,Uint16Array,this._ps.length,2)},H$f.getData=function(H$f,H$K,H$Y){if(this.mVBBuffer=H$f,this.mIBBuffer=H$K,H$f.append(this.mVBData),this._indexStart=H$K._byteLength,this.mIBData.start!=H$Y){for(var H$X=0,H$L=this._ps.length;H$X<H$L;H$X++)this.mIBData[H$X]=this._ps[H$X]+H$Y;this.mIBData.start=H$Y}H$K.append(this.mIBData)},H$f.render=function(H$f,H$K,H$Y){if(H$A.isWebGL&&this.mTexture){H$f._renderKey=0,H$f._shader2D.glTexture=null,H$Kf.getInstance().addSkinMesh(this);var H$X=H$Hf.createShape(H$f,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,H$If.create(512,0));this.transform||(this.transform=H$n.EMPTY),this.transform.translate(H$K,H$Y),H$n.mul(this.transform,H$f._curMat,this._tempMatrix),this.transform.translate(-H$K,-H$Y);var H$L=H$X.shaderValue,H$H=H$L.u_mmat2||H$xf.getMatrArray();H$xf.mat2MatArray(this._tempMatrix,H$H),H$L.textureHost=this.mTexture,H$L.offsetX=0,H$L.offsetY=0,H$L.u_mmat2=H$H,H$L.ALPHA=H$f._shader2D.ALPHA,H$f._submits[H$f._submits._length++]=H$X}else H$A.isConchApp&&this.mTexture&&(this.transform||(this.transform=H$n.EMPTY),H$f.setSkinMesh&&H$f.setSkinMesh(H$K,H$Y,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},H$E._tempVS=[],H$E._tempIB=[],H$E._defaultPS=null,H$E._tVSLen=0,H$E}(),H$Kf=function(){function H$f(){this.ib=null,this.vb=null;H$zf.mainContext;this.ib=H$of.create(35048),this.vb=H$Ff.create(8)}H$y(H$f,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var H$K=H$f.prototype;return H$K.addSkinMesh=function(H$f){H$f.getData2(this.vb,this.ib,this.vb._byteLength/32)},H$K.reset=function(){this.vb.clear(),this.ib.clear()},H$f.getInstance=function(){return H$f.instance=H$f.instance||new H$f},H$f.instance=null,H$f}(),H$Yf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===H$O&&(H$O=0),this.x=H$f,this.y=H$K,this.width=H$Y,this.height=H$X,this.edges=H$L,this.color=H$H,this.borderWidth=H$E,this.borderColor=H$d}H$y(H$f,"laya.webgl.shapes.BasePoly");var H$K=H$f.prototype;return H$s.imps(H$K,{"laya.webgl.shapes.IShape":!0}),H$K.getData=function(H$f,H$K,H$Y){},H$K.rebuild=function(H$f){},H$K.setMatrix=function(H$f){},H$K.needUpdate=function(H$f){return!0},H$K.sector=function(H$f,H$K,H$Y){var H$X=this.x,H$L=this.y,H$H=this.edges,H$E=(this.r1-this.r0)/H$H,H$d=this.width,H$O=this.height,H$i=this.color,H$U=(H$i>>16&255)/255,H$Z=(H$i>>8&255)/255,H$y=(255&H$i)/255;H$f.push(H$X,H$L,H$U,H$Z,H$y);for(var H$l=0;H$l<H$H+1;H$l++)H$f.push(H$X+Math.sin(H$E*H$l+this.r0)*H$d,H$L+Math.cos(H$E*H$l+this.r0)*H$O),H$f.push(H$U,H$Z,H$y);for(H$l=0;H$l<H$H;H$l++)H$K.push(H$Y,H$Y+H$l+1,H$Y+H$l+2)},H$K.createLine2=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E,H$d,H$O,H$i,H$U,H$Z,H$y,H$l,H$B,H$$,H$h,H$A,H$x,H$S,H$z,H$C,H$s,H$a,H$I,H$n,H$_=H$f.concat(),H$G=H$L,H$m=this.borderColor,H$R=(H$m>>16&255)/255,H$V=(H$m>>8&255)/255,H$t=(255&H$m)/255,H$T=H$_.length/2,H$k=H$X,H$e=H$Y/2;H$O=H$_[0],H$i=H$_[1],H$$=H$O-(H$U=H$_[2]),H$B=(H$B=-(H$i-(H$Z=H$_[3])))/(H$n=Math.sqrt(H$B*H$B+H$$*H$$))*H$e,H$$=H$$/H$n*H$e,H$G.push(H$O-H$B+this.x,H$i-H$$+this.y,H$R,H$V,H$t,H$O+H$B+this.x,H$i+H$$+this.y,H$R,H$V,H$t);for(var H$Q=1;H$Q<H$T-1;H$Q++)H$O=H$_[2*(H$Q-1)],H$i=H$_[2*(H$Q-1)+1],H$U=H$_[2*H$Q],H$Z=H$_[2*H$Q+1],H$y=H$_[2*(H$Q+1)],H$l=H$_[2*(H$Q+1)+1],H$$=H$O-H$U,H$A=H$U-H$y,H$z=(-(H$B=(H$B=-(H$i-H$Z))/(H$n=Math.sqrt(H$B*H$B+H$$*H$$))*H$e)+H$O)*(-(H$$=H$$/H$n*H$e)+H$Z)-(-H$B+H$U)*(-H$$+H$i),H$a=(-(H$h=(H$h=-(H$Z-H$l))/(H$n=Math.sqrt(H$h*H$h+H$A*H$A))*H$e)+H$y)*(-(H$A=H$A/H$n*H$e)+H$Z)-(-H$h+H$U)*(-H$A+H$l),H$I=(H$x=-H$$+H$i-(-H$$+H$Z))*(H$s=-H$h+H$U-(-H$h+H$y))-(H$C=-H$A+H$l-(-H$A+H$Z))*(H$S=-H$B+H$U-(-H$B+H$O)),Math.abs(H$I)<.1?(H$I+=10.1,H$G.push(H$U-H$B+this.x,H$Z-H$$+this.y,H$R,H$V,H$t,H$U+H$B+this.x,H$Z+H$$+this.y,H$R,H$V,H$t)):(((H$E=(H$S*H$a-H$s*H$z)/H$I)-H$U)*(H$E-H$U)+((H$d=(H$C*H$z-H$x*H$a)/H$I)-H$Z)+(H$d-H$Z),H$G.push(H$E+this.x,H$d+this.y,H$R,H$V,H$t,H$U-(H$E-H$U)+this.x,H$Z-(H$d-H$Z)+this.y,H$R,H$V,H$t));H$O=H$_[H$_.length-4],H$i=H$_[H$_.length-3],H$$=H$O-(H$U=H$_[H$_.length-2]),H$B=(H$B=-(H$i-(H$Z=H$_[H$_.length-1])))/(H$n=Math.sqrt(H$B*H$B+H$$*H$$))*H$e,H$$=H$$/H$n*H$e,H$G.push(H$U-H$B+this.x,H$Z-H$$+this.y,H$R,H$V,H$t,H$U+H$B+this.x,H$Z+H$$+this.y,H$R,H$V,H$t);var H$W=H$H;for(H$Q=1;H$Q<H$W;H$Q++)H$K.push(H$k+2*(H$Q-1),H$k+2*(H$Q-1)+1,H$k+2*H$Q+1,H$k+2*H$Q+1,H$k+2*H$Q,H$k+2*(H$Q-1));return H$G},H$K.createLine=function(H$f,H$K,H$Y,H$X){var H$L=H$f.concat(),H$H=H$f,H$E=this.borderColor,H$d=(H$E>>16&255)/255,H$O=(H$E>>8&255)/255,H$i=(255&H$E)/255;H$L.splice(0,5);var H$U,H$Z,H$y,H$l,H$B,H$$,H$h,H$A,H$x,H$S,H$z,H$C,H$s,H$a,H$I,H$n,H$_,H$G,H$m,H$R,H$V=H$L.length/5,H$t=H$X,H$T=H$Y/2;H$y=H$L[0],H$l=H$L[1],H$S=H$y-(H$B=H$L[5]),H$x=(H$x=-(H$l-(H$$=H$L[6])))/(H$R=Math.sqrt(H$x*H$x+H$S*H$S))*H$T,H$S=H$S/H$R*H$T,H$H.push(H$y-H$x,H$l-H$S,H$d,H$O,H$i,H$y+H$x,H$l+H$S,H$d,H$O,H$i);for(var H$k=1;H$k<H$V-1;H$k++)H$y=H$L[5*(H$k-1)],H$l=H$L[5*(H$k-1)+1],H$B=H$L[5*H$k],H$$=H$L[5*H$k+1],H$h=H$L[5*(H$k+1)],H$A=H$L[5*(H$k+1)+1],H$S=H$y-H$B,H$C=H$B-H$h,H$I=(-(H$x=(H$x=-(H$l-H$$))/(H$R=Math.sqrt(H$x*H$x+H$S*H$S))*H$T)+H$y)*(-(H$S=H$S/H$R*H$T)+H$$)-(-H$x+H$B)*(-H$S+H$l),H$G=(-(H$z=(H$z=-(H$$-H$A))/(H$R=Math.sqrt(H$z*H$z+H$C*H$C))*H$T)+H$h)*(-(H$C=H$C/H$R*H$T)+H$$)-(-H$z+H$B)*(-H$C+H$A),H$m=(H$s=-H$S+H$l-(-H$S+H$$))*(H$_=-H$z+H$B-(-H$z+H$h))-(H$n=-H$C+H$A-(-H$C+H$$))*(H$a=-H$x+H$B-(-H$x+H$y)),Math.abs(H$m)<.1?(H$m+=10.1,H$H.push(H$B-H$x,H$$-H$S,H$d,H$O,H$i,H$B+H$x,H$$+H$S,H$d,H$O,H$i)):(((H$U=(H$a*H$G-H$_*H$I)/H$m)-H$B)*(H$U-H$B)+((H$Z=(H$n*H$I-H$s*H$G)/H$m)-H$$)+(H$Z-H$$),H$H.push(H$U,H$Z,H$d,H$O,H$i,H$B-(H$U-H$B),H$$-(H$Z-H$$),H$d,H$O,H$i));H$y=H$L[H$L.length-10],H$l=H$L[H$L.length-9],H$S=H$y-(H$B=H$L[H$L.length-5]),H$x=(H$x=-(H$l-(H$$=H$L[H$L.length-4])))/(H$R=Math.sqrt(H$x*H$x+H$S*H$S))*H$T,H$S=H$S/H$R*H$T,H$H.push(H$B-H$x,H$$-H$S,H$d,H$O,H$i,H$B+H$x,H$$+H$S,H$d,H$O,H$i);var H$e=this.edges+1;for(H$k=1;H$k<H$e;H$k++)H$K.push(H$t+2*(H$k-1),H$t+2*(H$k-1)+1,H$t+2*H$k+1,H$t+2*H$k+1,H$t+2*H$k,H$t+2*(H$k-1));return H$H},H$K.createLoopLine=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=H$f.concat(),H$d=H$L||H$f,H$O=this.borderColor,H$i=(H$O>>16&255)/255,H$U=(H$O>>8&255)/255,H$Z=(255&H$O)/255;H$E.splice(0,5);var H$y=[H$E[0],H$E[1]],H$l=[H$E[H$E.length-5],H$E[H$E.length-4]],H$B=H$l[0]+.5*(H$y[0]-H$l[0]),H$$=H$l[1]+.5*(H$y[1]-H$l[1]);H$E.unshift(H$B,H$$,0,0,0),H$E.push(H$B,H$$,0,0,0);var H$h,H$A,H$x,H$S,H$z,H$C,H$s,H$a,H$I,H$n,H$_,H$G,H$m,H$R,H$V,H$t,H$T,H$k,H$e,H$Q,H$W=H$E.length/5,H$q=H$X,H$P=H$Y/2;H$x=H$E[0],H$S=H$E[1],H$n=H$x-(H$z=H$E[5]),H$I=(H$I=-(H$S-(H$C=H$E[6])))/(H$Q=Math.sqrt(H$I*H$I+H$n*H$n))*H$P,H$n=H$n/H$Q*H$P,H$d.push(H$x-H$I,H$S-H$n,H$i,H$U,H$Z,H$x+H$I,H$S+H$n,H$i,H$U,H$Z);for(var H$b=1;H$b<H$W-1;H$b++)H$x=H$E[5*(H$b-1)],H$S=H$E[5*(H$b-1)+1],H$z=H$E[5*H$b],H$C=H$E[5*H$b+1],H$s=H$E[5*(H$b+1)],H$a=H$E[5*(H$b+1)+1],H$n=H$x-H$z,H$G=H$z-H$s,H$V=(-(H$I=(H$I=-(H$S-H$C))/(H$Q=Math.sqrt(H$I*H$I+H$n*H$n))*H$P)+H$x)*(-(H$n=H$n/H$Q*H$P)+H$C)-(-H$I+H$z)*(-H$n+H$S),H$k=(-(H$_=(H$_=-(H$C-H$a))/(H$Q=Math.sqrt(H$_*H$_+H$G*H$G))*H$P)+H$s)*(-(H$G=H$G/H$Q*H$P)+H$C)-(-H$_+H$z)*(-H$G+H$a),H$e=(H$m=-H$n+H$S-(-H$n+H$C))*(H$T=-H$_+H$z-(-H$_+H$s))-(H$t=-H$G+H$a-(-H$G+H$C))*(H$R=-H$I+H$z-(-H$I+H$x)),Math.abs(H$e)<.1?(H$e+=10.1,H$d.push(H$z-H$I,H$C-H$n,H$i,H$U,H$Z,H$z+H$I,H$C+H$n,H$i,H$U,H$Z)):(((H$h=(H$R*H$k-H$T*H$V)/H$e)-H$z)*(H$h-H$z)+((H$A=(H$t*H$V-H$m*H$k)/H$e)-H$C)+(H$A-H$C),H$d.push(H$h,H$A,H$i,H$U,H$Z,H$z-(H$h-H$z),H$C-(H$A-H$C),H$i,H$U,H$Z));H$H&&(H$K=H$H);var H$J=this.edges+1;for(H$b=1;H$b<H$J;H$b++)H$K.push(H$q+2*(H$b-1),H$q+2*(H$b-1)+1,H$q+2*H$b+1,H$q+2*H$b+1,H$q+2*H$b,H$q+2*(H$b-1));return H$K.push(H$q+2*(H$b-1),H$q+2*(H$b-1)+1,H$q+1,H$q+1,H$q,H$q+2*(H$b-1)),H$d},H$f}(),H$Xf=function(){function H$$(){}return H$y(H$$,"laya.webgl.shapes.Earcut"),H$$.earcut=function(H$f,H$K,H$Y){H$Y=H$Y||2;var H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U=H$K&&H$K.length,H$Z=H$U?H$K[0]*H$Y:H$f.length,H$y=H$$.linkedList(H$f,0,H$Z,H$Y,!0),H$l=[];if(!H$y)return H$l;if(H$U&&(H$y=H$$.eliminateHoles(H$f,H$K,H$y,H$Y)),H$f.length>80*H$Y){H$X=H$H=H$f[0],H$L=H$E=H$f[1];for(var H$B=H$Y;H$B<H$Z;H$B+=H$Y)(H$d=H$f[H$B])<H$X&&(H$X=H$d),(H$O=H$f[H$B+1])<H$L&&(H$L=H$O),H$H<H$d&&(H$H=H$d),H$E<H$O&&(H$E=H$O);H$i=0!==(H$i=Math.max(H$H-H$X,H$E-H$L))?1/H$i:0}return H$$.earcutLinked(H$y,H$l,H$Y,H$X,H$L,H$i),H$l},H$$.linkedList=function(H$f,H$K,H$Y,H$X,H$L){var H$H,H$E;if(H$L===0<H$$.signedArea(H$f,H$K,H$Y,H$X))for(H$H=H$K;H$H<H$Y;H$H+=H$X)H$E=H$$.insertNode(H$H,H$f[H$H],H$f[H$H+1],H$E);else for(H$H=H$Y-H$X;H$K<=H$H;H$H-=H$X)H$E=H$$.insertNode(H$H,H$f[H$H],H$f[H$H+1],H$E);return H$E&&H$$.equals(H$E,H$E.next)&&(H$$.removeNode(H$E),H$E=H$E.next),H$E},H$$.filterPoints=function(H$f,H$K){if(!H$f)return H$f;H$K||(H$K=H$f);var H$Y,H$X=H$f;do{if(H$Y=!1,H$X.steiner||!H$$.equals(H$X,H$X.next)&&0!==H$$.area(H$X.prev,H$X,H$X.next))H$X=H$X.next;else{if(H$$.removeNode(H$X),(H$X=H$K=H$X.prev)===H$X.next)break;H$Y=!0}}while(H$Y||H$X!==H$K);return H$K},H$$.earcutLinked=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){if(H$f){!H$E&&H$H&&H$$.indexCurve(H$f,H$X,H$L,H$H);for(var H$d,H$O,H$i=H$f;H$f.prev!==H$f.next;)if(H$d=H$f.prev,H$O=H$f.next,H$H?H$$.isEarHashed(H$f,H$X,H$L,H$H):H$$.isEar(H$f))H$K.push(H$d.i/H$Y),H$K.push(H$f.i/H$Y),H$K.push(H$O.i/H$Y),H$$.removeNode(H$f),H$f=H$O.next,H$i=H$O.next;else if((H$f=H$O)===H$i){H$E?1===H$E?(H$f=H$$.cureLocalIntersections(H$f,H$K,H$Y),H$$.earcutLinked(H$f,H$K,H$Y,H$X,H$L,H$H,2)):2===H$E&&H$$.splitEarcut(H$f,H$K,H$Y,H$X,H$L,H$H):H$$.earcutLinked(H$$.filterPoints(H$f,null),H$K,H$Y,H$X,H$L,H$H,1);break}}},H$$.isEar=function(H$f){var H$K=H$f.prev,H$Y=H$f,H$X=H$f.next;if(0<=H$$.area(H$K,H$Y,H$X))return!1;for(var H$L=H$f.next.next;H$L!==H$f.prev;){if(H$$.pointInTriangle(H$K.x,H$K.y,H$Y.x,H$Y.y,H$X.x,H$X.y,H$L.x,H$L.y)&&0<=H$$.area(H$L.prev,H$L,H$L.next))return!1;H$L=H$L.next}return!0},H$$.isEarHashed=function(H$f,H$K,H$Y,H$X){var H$L=H$f.prev,H$H=H$f,H$E=H$f.next;if(0<=H$$.area(H$L,H$H,H$E))return!1;for(var H$d=H$L.x<H$H.x?H$L.x<H$E.x?H$L.x:H$E.x:H$H.x<H$E.x?H$H.x:H$E.x,H$O=H$L.y<H$H.y?H$L.y<H$E.y?H$L.y:H$E.y:H$H.y<H$E.y?H$H.y:H$E.y,H$i=H$L.x>H$H.x?H$L.x>H$E.x?H$L.x:H$E.x:H$H.x>H$E.x?H$H.x:H$E.x,H$U=H$L.y>H$H.y?H$L.y>H$E.y?H$L.y:H$E.y:H$H.y>H$E.y?H$H.y:H$E.y,H$Z=H$$.zOrder(H$d,H$O,H$K,H$Y,H$X),H$y=H$$.zOrder(H$i,H$U,H$K,H$Y,H$X),H$l=H$f.nextZ;H$l&&H$l.z<=H$y;){if(H$l!==H$f.prev&&H$l!==H$f.next&&H$$.pointInTriangle(H$L.x,H$L.y,H$H.x,H$H.y,H$E.x,H$E.y,H$l.x,H$l.y)&&0<=H$$.area(H$l.prev,H$l,H$l.next))return!1;H$l=H$l.nextZ}for(H$l=H$f.prevZ;H$l&&H$l.z>=H$Z;){if(H$l!==H$f.prev&&H$l!==H$f.next&&H$$.pointInTriangle(H$L.x,H$L.y,H$H.x,H$H.y,H$E.x,H$E.y,H$l.x,H$l.y)&&0<=H$$.area(H$l.prev,H$l,H$l.next))return!1;H$l=H$l.prevZ}return!0},H$$.cureLocalIntersections=function(H$f,H$K,H$Y){var H$X=H$f;do{var H$L=H$X.prev,H$H=H$X.next.next;!H$$.equals(H$L,H$H)&&H$$.intersects(H$L,H$X,H$X.next,H$H)&&H$$.locallyInside(H$L,H$H)&&H$$.locallyInside(H$H,H$L)&&(H$K.push(H$L.i/H$Y),H$K.push(H$X.i/H$Y),H$K.push(H$H.i/H$Y),H$$.removeNode(H$X),H$$.removeNode(H$X.next),H$X=H$f=H$H),H$X=H$X.next}while(H$X!==H$f);return H$X},H$$.splitEarcut=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=H$f;do{for(var H$d=H$E.next.next;H$d!==H$E.prev;){if(H$E.i!==H$d.i&&H$$.isValidDiagonal(H$E,H$d)){var H$O=H$$.splitPolygon(H$E,H$d);return H$E=H$$.filterPoints(H$E,H$E.next),H$O=H$$.filterPoints(H$O,H$O.next),H$$.earcutLinked(H$E,H$K,H$Y,H$X,H$L,H$H),void H$$.earcutLinked(H$O,H$K,H$Y,H$X,H$L,H$H)}H$d=H$d.next}H$E=H$E.next}while(H$E!==H$f)},H$$.eliminateHoles=function(H$f,H$K,H$Y,H$X){var H$L,H$H,H$E,H$d,H$O,H$i=[];for(H$L=0,H$H=H$K.length;H$L<H$H;H$L++)H$E=H$K[H$L]*H$X,H$d=H$L<H$H-1?H$K[H$L+1]*H$X:H$f.length,(H$O=H$$.linkedList(H$f,H$E,H$d,H$X,!1))===H$O.next&&(H$O.steiner=!0),H$i.push(H$$.getLeftmost(H$O));for(H$i.sort(H$$.compareX),H$L=0;H$L<H$i.length;H$L++)H$$.eliminateHole(H$i[H$L],H$Y),H$Y=H$$.filterPoints(H$Y,H$Y.next);return H$Y},H$$.compareX=function(H$f,H$K){return H$f.x-H$K.x},H$$.eliminateHole=function(H$f,H$K){if(H$K=H$$.findHoleBridge(H$f,H$K)){var H$Y=H$$.splitPolygon(H$K,H$f);H$$.filterPoints(H$Y,H$Y.next)}},H$$.findHoleBridge=function(H$f,H$K){var H$Y,H$X=H$K,H$L=H$f.x,H$H=H$f.y,H$E=-1/0;do{if(H$H<=H$X.y&&H$H>=H$X.next.y&&H$X.next.y!==H$X.y){var H$d=H$X.x+(H$H-H$X.y)*(H$X.next.x-H$X.x)/(H$X.next.y-H$X.y);if(H$d<=H$L&&H$E<H$d){if((H$E=H$d)===H$L){if(H$H===H$X.y)return H$X;if(H$H===H$X.next.y)return H$X.next}H$Y=H$X.x<H$X.next.x?H$X:H$X.next}}H$X=H$X.next}while(H$X!==H$K);if(!H$Y)return null;if(H$L===H$E)return H$Y.prev;var H$O,H$i=H$Y,H$U=H$Y.x,H$Z=H$Y.y,H$y=1/0;for(H$X=H$Y.next;H$X!==H$i;)H$L>=H$X.x&&H$X.x>=H$U&&H$L!==H$X.x&&H$$.pointInTriangle(H$H<H$Z?H$L:H$E,H$H,H$U,H$Z,H$H<H$Z?H$E:H$L,H$H,H$X.x,H$X.y)&&((H$O=Math.abs(H$H-H$X.y)/(H$L-H$X.x))<H$y||H$O===H$y&&H$X.x>H$Y.x)&&H$$.locallyInside(H$X,H$f)&&(H$Y=H$X,H$y=H$O),H$X=H$X.next;return H$Y},H$$.indexCurve=function(H$f,H$K,H$Y,H$X){for(var H$L=H$f;null===H$L.z&&(H$L.z=H$$.zOrder(H$L.x,H$L.y,H$K,H$Y,H$X)),H$L.prevZ=H$L.prev,H$L.nextZ=H$L.next,(H$L=H$L.next)!==H$f;);H$L.prevZ.nextZ=null,H$L.prevZ=null,H$$.sortLinked(H$L)},H$$.sortLinked=function(H$f){var H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i=1;do{for(H$Y=H$f,H$H=H$f=null,H$E=0;H$Y;){for(H$E++,H$X=H$Y,H$K=H$d=0;H$K<H$i&&(H$d++,H$X=H$X.nextZ);H$K++);for(H$O=H$i;0<H$d||0<H$O&&H$X;)0!==H$d&&(0===H$O||!H$X||H$Y.z<=H$X.z)?(H$Y=(H$L=H$Y).nextZ,H$d--):(H$X=(H$L=H$X).nextZ,H$O--),H$H?H$H.nextZ=H$L:H$f=H$L,H$L.prevZ=H$H,H$H=H$L;H$Y=H$X}H$H.nextZ=null,H$i*=2}while(1<H$E);return H$f},H$$.zOrder=function(H$f,H$K,H$Y,H$X,H$L){return(H$f=1431655765&((H$f=858993459&((H$f=252645135&((H$f=16711935&((H$f=32767*(H$f-H$Y)*H$L)|H$f<<8))|H$f<<4))|H$f<<2))|H$f<<1))|(H$K=1431655765&((H$K=858993459&((H$K=252645135&((H$K=16711935&((H$K=32767*(H$K-H$X)*H$L)|H$K<<8))|H$K<<4))|H$K<<2))|H$K<<1))<<1},H$$.getLeftmost=function(H$f){for(var H$K=H$f,H$Y=H$f;H$K.x<H$Y.x&&(H$Y=H$K),(H$K=H$K.next)!==H$f;);return H$Y},H$$.pointInTriangle=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){return 0<=(H$L-H$E)*(H$K-H$d)-(H$f-H$E)*(H$H-H$d)&&0<=(H$f-H$E)*(H$X-H$d)-(H$Y-H$E)*(H$K-H$d)&&0<=(H$Y-H$E)*(H$H-H$d)-(H$L-H$E)*(H$X-H$d)},H$$.isValidDiagonal=function(H$f,H$K){return H$f.next.i!==H$K.i&&H$f.prev.i!==H$K.i&&!H$$.intersectsPolygon(H$f,H$K)&&H$$.locallyInside(H$f,H$K)&&H$$.locallyInside(H$K,H$f)&&H$$.middleInside(H$f,H$K)},H$$.area=function(H$f,H$K,H$Y){return(H$K.y-H$f.y)*(H$Y.x-H$K.x)-(H$K.x-H$f.x)*(H$Y.y-H$K.y)},H$$.equals=function(H$f,H$K){return H$f.x===H$K.x&&H$f.y===H$K.y},H$$.intersects=function(H$f,H$K,H$Y,H$X){return!!(H$$.equals(H$f,H$K)&&H$$.equals(H$Y,H$X)||H$$.equals(H$f,H$X)&&H$$.equals(H$Y,H$K))||0<H$$.area(H$f,H$K,H$Y)!=0<H$$.area(H$f,H$K,H$X)&&0<H$$.area(H$Y,H$X,H$f)!=0<H$$.area(H$Y,H$X,H$K)},H$$.intersectsPolygon=function(H$f,H$K){var H$Y=H$f;do{if(H$Y.i!==H$f.i&&H$Y.next.i!==H$f.i&&H$Y.i!==H$K.i&&H$Y.next.i!==H$K.i&&H$$.intersects(H$Y,H$Y.next,H$f,H$K))return!0;H$Y=H$Y.next}while(H$Y!==H$f);return!1},H$$.locallyInside=function(H$f,H$K){return H$$.area(H$f.prev,H$f,H$f.next)<0?0<=H$$.area(H$f,H$K,H$f.next)&&0<=H$$.area(H$f,H$f.prev,H$K):H$$.area(H$f,H$K,H$f.prev)<0||H$$.area(H$f,H$f.next,H$K)<0},H$$.middleInside=function(H$f,H$K){for(var H$Y=H$f,H$X=!1,H$L=(H$f.x+H$K.x)/2,H$H=(H$f.y+H$K.y)/2;H$Y.y>H$H!=H$Y.next.y>H$H&&H$Y.next.y!==H$Y.y&&H$L<(H$Y.next.x-H$Y.x)*(H$H-H$Y.y)/(H$Y.next.y-H$Y.y)+H$Y.x&&(H$X=!H$X),(H$Y=H$Y.next)!==H$f;);return H$X},H$$.splitPolygon=function(H$f,H$K){var H$Y=new H$Lf(H$f.i,H$f.x,H$f.y),H$X=new H$Lf(H$K.i,H$K.x,H$K.y),H$L=H$f.next,H$H=H$K.prev;return(H$f.next=H$K).prev=H$f,(H$Y.next=H$L).prev=H$Y,(H$X.next=H$Y).prev=H$X,(H$H.next=H$X).prev=H$H,H$X},H$$.insertNode=function(H$f,H$K,H$Y,H$X){var H$L=new H$Lf(H$f,H$K,H$Y);return H$X?(H$L.next=H$X.next,(H$L.prev=H$X).next.prev=H$L,H$X.next=H$L):(H$L.prev=H$L).next=H$L,H$L},H$$.removeNode=function(H$f){H$f.next.prev=H$f.prev,H$f.prev.next=H$f.next,H$f.prevZ&&(H$f.prevZ.nextZ=H$f.nextZ),H$f.nextZ&&(H$f.nextZ.prevZ=H$f.prevZ)},H$$.signedArea=function(H$f,H$K,H$Y,H$X){for(var H$L=0,H$H=H$K,H$E=H$Y-H$X;H$H<H$Y;H$H+=H$X)H$L+=(H$f[H$E]-H$f[H$H])*(H$f[H$H+1]+H$f[H$E+1]),H$E=H$H;return H$L},H$$}(),H$Lf=function(){function H$f(H$f,H$K,H$Y){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=H$f,this.x=H$K,this.y=H$Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return H$y(H$f,"laya.webgl.shapes.EarcutNode"),H$f}(),H$Hf=(function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this.lineWidth=H$f,this.lineColor=H$K,this.lineAlpha=H$Y,this.fillColor=H$X,this.fillAlpha=H$L,this.shape=H$E,this.fill=H$H}H$y(H$f,"laya.webgl.shapes.GeometryData");var H$K=H$f.prototype;H$K.clone=function(){return new H$f(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},H$K.getIndexData=function(){return null},H$K.getVertexData=function(){return null},H$K.destroy=function(){this.shape=null}}(),function(){function H$f(H$f){if(H$f instanceof Float32Array)this.points=H$f;else if(H$f instanceof Array){H$f.length;this.points=new Float32Array(H$f)}}H$y(H$f,"laya.webgl.shapes.Vertex");var H$K=H$f.prototype;H$s.imps(H$K,{"laya.webgl.shapes.IShape":!0}),H$K.getData=function(H$f,H$K,H$Y){},H$K.needUpdate=function(H$f){return!1},H$K.rebuild=function(H$f){},H$K.setMatrix=function(H$f){}}(),function(){function H$O(H$f){void 0===H$f&&(H$f=1e4),this._renderType=H$f}H$y(H$O,"laya.webgl.submit.Submit");var H$f=H$O.prototype;return H$s.imps(H$f,{"laya.webgl.submit.ISubmit":!0}),H$f.releaseRender=function(){var H$f=H$O._cache;(H$f[H$f._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H$f.getRenderType=function(){return this._renderType},H$f.renderSubmit=function(){if(0===this._numEle)return 1;var H$f=this.shaderValue.textureHost;if(H$f){var H$K=H$f.source;if(!H$f.bitmap||!H$K)return 1;this.shaderValue.texture=H$K,H$f.alphaTexture&&H$f.alphaTexture.source&&(this.shaderValue.texture1=H$f.alphaTexture.source)}this._vb.bind_upload(this._ib);var H$Y=H$zf.mainContext;return this.shaderValue.upload(),H$w.activeBlendFunction!==this._blendFn&&(H$Y.enable(3042),this._blendFn(H$Y),H$w.activeBlendFunction=this._blendFn),H$V.drawCall++,H$V.trianglesFaces+=this._numEle/3,H$Y.drawElements(4,this._numEle,5123,this._startIdx),1},H$O.__init__=function(){var H$f=H$O.RENDERBASE=new H$O(-1);H$f.shaderValue=new H$If(0,0),H$f.shaderValue.ALPHA=-1234},H$O.createSubmit=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$O._cache._length?H$O._cache[--H$O._cache._length]:new H$O;null==H$Y&&((H$Y=H$H._selfVb||(H$H._selfVb=H$Ff.create(-1))).clear(),H$X=0),H$H._ib=H$K,H$H._vb=H$Y,H$H._startIdx=H$X*H$$f.BYTES_PIDX,H$H._numEle=0;var H$E=H$f._nBlendType;H$H._blendFn=H$f._targets?H$w.targetFns[H$E]:H$w.fns[H$E],H$H.shaderValue=H$L,H$H.shaderValue.setValue(H$f._shader2D);var H$d=H$f._shader2D.filters;return H$d&&H$H.shaderValue.setFilters(H$d),H$H},H$O.createShape=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=H$O._cache._length?H$O._cache[--H$O._cache._length]:new H$O;H$E._ib=H$K,H$E._vb=H$Y,H$E._numEle=H$X,H$E._startIdx=H$L,H$E.shaderValue=H$H,H$E.shaderValue.setValue(H$f._shader2D);var H$d=H$f._nBlendType;return H$E._blendFn=H$f._targets?H$w.targetFns[H$d]:H$w.fns[H$d],H$E},H$O.TYPE_2D=1e4,H$O.TYPE_CANVAS=10003,H$O.TYPE_CMDSETRT=10004,H$O.TYPE_CUSTOM=10005,H$O.TYPE_BLURRT=10006,H$O.TYPE_CMDDESTORYPRERT=10007,H$O.TYPE_DISABLESTENCIL=10008,H$O.TYPE_OTHERIBVB=10009,H$O.TYPE_PRIMITIVE=10010,H$O.TYPE_RT=10011,H$O.TYPE_BLUR_RT=10012,H$O.TYPE_TARGET=10013,H$O.TYPE_CHANGE_VALUE=10014,H$O.TYPE_SHAPE=10015,H$O.TYPE_TEXTURE=10016,H$O.TYPE_FILLTEXTURE=10017,H$O.RENDERBASE=null,H$O._cache=((H$O._cache=[])._length=0,H$O._cache),H$O}()),H$Ef=function(){function H$X(){this.fun=null,this.args=null}H$y(H$X,"laya.webgl.submit.SubmitCMD");var H$f=H$X.prototype;return H$s.imps(H$f,{"laya.webgl.submit.ISubmit":!0}),H$f.renderSubmit=function(){return this.fun.apply(null,this.args),1},H$f.getRenderType=function(){return 0},H$f.releaseRender=function(){var H$f=H$X._cache;H$f[H$f._length++]=this},H$X.create=function(H$f,H$K){var H$Y=H$X._cache._length?H$X._cache[--H$X._cache._length]:new H$X;return H$Y.fun=H$K,H$Y.args=H$f,H$Y},H$X._cache=((H$X._cache=[])._length=0,H$X._cache),H$X}(),H$df=function(){function H$K(){this.variables={}}H$y(H$K,"laya.webgl.submit.SubmitCMDScope");var H$f=H$K.prototype;return H$f.getValue=function(H$f){return this.variables[H$f]},H$f.addValue=function(H$f,H$K){return this.variables[H$f]=H$K},H$f.setValue=function(H$f,H$K){return this.variables.hasOwnProperty(H$f)?this.variables[H$f]=H$K:null},H$f.clear=function(){for(var H$f in this.variables)delete this.variables[H$f]},H$f.recycle=function(){this.clear(),H$K.POOL.push(this)},H$K.create=function(){var H$f=H$K.POOL.pop();return H$f||(H$f=new H$K),H$f},H$K.POOL=[],H$K}(),H$Of=function(){function H$Z(){this.offset=0,this.startIndex=0,this._mat=H$n.create()}H$y(H$Z,"laya.webgl.submit.SubmitOtherIBVB");var H$f=H$Z.prototype;return H$s.imps(H$f,{"laya.webgl.submit.ISubmit":!0}),H$f.releaseRender=function(){var H$f=H$Z._cache;(H$f[H$f._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H$f.getRenderType=function(){return 10009},H$f.renderSubmit=function(){var H$f=this._shaderValue.textureHost;if(H$f){var H$K=H$f.source;if(!H$f.bitmap||!H$K)return 1;this._shaderValue.texture=H$K}this._vb.bind_upload(this._ib);var H$Y=H$xf.worldMatrix4,H$X=H$n.TEMP;H$n.mulPre(this._mat,H$Y[0],H$Y[1],H$Y[4],H$Y[5],H$Y[12],H$Y[13],H$X);var H$L=H$xf.worldMatrix4=H$Z.tempMatrix4;H$L[0]=H$X.a,H$L[1]=H$X.b,H$L[4]=H$X.c,H$L[5]=H$X.d,H$L[12]=H$X.tx,H$L[13]=H$X.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var H$H=H$zf.mainContext;return H$w.activeBlendFunction!==this._blendFn&&(H$H.enable(3042),this._blendFn(H$H),H$w.activeBlendFunction=this._blendFn),H$V.drawCall++,H$V.trianglesFaces+=this._numEle/3,H$H.drawElements(4,this._numEle,5123,this.startIndex),H$xf.worldMatrix4=H$Y,H$Qf.activeShader=null,1},H$Z.create=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){void 0===H$O&&(H$O=0);var H$i=H$Z._cache._length?H$Z._cache[--H$Z._cache._length]:new H$Z;H$i._ib=H$Y,H$i._vb=H$K,H$i._numEle=H$X,H$i._shader=H$L,H$i._shaderValue=H$H;var H$U=H$f._nBlendType;switch(H$i._blendFn=H$f._targets?H$w.targetFns[H$U]:H$w.fns[H$U],H$O){case 0:H$i.offset=0,H$i.startIndex=H$d/(H$$f.BYTES_PE*H$K.vertexStride)*1.5,H$i.startIndex*=H$$f.BYTES_PIDX;break;case 1:H$i.startIndex=H$E,H$i.offset=H$d}return H$i},H$Z._cache=((H$Z._cache=[])._length=0,H$Z._cache),H$Z.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$Z}(),H$if=function(){function H$Y(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new H$G,this.screenRect=new H$G}H$y(H$Y,"laya.webgl.submit.SubmitScissor");var H$f=H$Y.prototype;return H$s.imps(H$f,{"laya.webgl.submit.ISubmit":!0}),H$f._scissor=function(H$f,H$K,H$Y,H$X){var H$L=H$xf.worldMatrix4,H$H=H$L[0],H$E=H$L[5],H$d=H$L[12],H$O=H$L[13];if(H$X*=H$E,(H$Y*=H$H)<1||H$X<1)return!1;var H$i=(H$f=H$f*H$H+H$d)+H$Y,H$U=(H$K=H$K*H$E+H$O)+H$X;H$f<0&&(H$Y=H$i-(H$f=0)),H$K<0&&(H$X=H$U-(H$K=0));var H$Z=H$xf.worldClipRect;if(H$f=Math.max(H$f,H$Z.x),H$K=Math.max(H$K,H$Z.y),H$Y=Math.min(H$i,H$Z.right)-H$f,H$X=Math.min(H$U,H$Z.bottom)-H$K,H$Y<1||H$X<1)return!1;var H$y=H$xf.worldScissorTest;return this.screenRect.copyFrom(H$Z),H$Z.x=H$f,H$Z.y=H$K,H$Z.width=H$Y,H$Z.height=H$X,H$xf.worldScissorTest=!0,H$K=H$xf.height-H$K-H$X,H$zf.mainContext.scissor(H$f,H$K,H$Y,H$X),H$zf.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),H$y?(H$K=H$xf.height-this.screenRect.y-this.screenRect.height,H$zf.mainContext.scissor(this.screenRect.x,H$K,this.screenRect.width,this.screenRect.height),H$zf.mainContext.enable(3089)):(H$zf.mainContext.disable(3089),H$xf.worldScissorTest=!1),H$Z.copyFrom(this.screenRect),!0},H$f._scissorWithTagart=function(H$f,H$K,H$Y,H$X){if(H$Y<1||H$X<1)return!1;var H$L=H$f+H$Y,H$H=H$K+H$X;H$f<0&&(H$Y=H$L-(H$f=0)),H$K<0&&(H$X=H$H-(H$K=0));var H$E=H$xf.worldClipRect;if(H$f=Math.max(H$f,H$E.x),H$K=Math.max(H$K,H$E.y),H$Y=Math.min(H$L,H$E.right)-H$f,H$X=Math.min(H$H,H$E.bottom)-H$K,H$Y<1||H$X<1)return!1;var H$d=H$xf.worldScissorTest;return this.screenRect.copyFrom(H$E),H$xf.worldScissorTest=!0,H$E.x=H$f,H$E.y=H$K,H$E.width=H$Y,H$E.height=H$X,H$K=H$xf.height-H$K-H$X,H$zf.mainContext.scissor(H$f,H$K,H$Y,H$X),H$zf.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),H$d?(H$K=H$xf.height-this.screenRect.y-this.screenRect.height,H$zf.mainContext.scissor(this.screenRect.x,H$K,this.screenRect.width,this.screenRect.height),H$zf.mainContext.enable(3089)):(H$zf.mainContext.disable(3089),H$xf.worldScissorTest=!1),H$E.copyFrom(this.screenRect),!0},H$f.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},H$f.getRenderType=function(){return 0},H$f.releaseRender=function(){var H$f=H$Y._cache;(H$f[H$f._length++]=this).context=null},H$Y.create=function(H$f){var H$K=H$Y._cache._length?H$Y._cache[--H$Y._cache._length]:new H$Y;return H$K.context=H$f,H$K},H$Y._cache=((H$Y._cache=[])._length=0,H$Y._cache),H$Y}(),H$Uf=function(){function H$O(){this.step=0,this.blendMode=null,this.level=0}H$y(H$O,"laya.webgl.submit.SubmitStencil");var H$f=H$O.prototype;return H$s.imps(H$f,{"laya.webgl.submit.ISubmit":!0}),H$f.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},H$f.getRenderType=function(){return 0},H$f.releaseRender=function(){var H$f=H$O._cache;H$f[H$f._length++]=this},H$f.do1=function(){var H$f=H$zf.mainContext;H$f.enable(2960),H$f.clear(1024),H$f.colorMask(!1,!1,!1,!1),H$f.stencilFunc(514,this.level,255),H$f.stencilOp(7680,7680,7682)},H$f.do2=function(){var H$f=H$zf.mainContext;H$f.stencilFunc(514,this.level+1,255),H$f.colorMask(!0,!0,!0,!0),H$f.stencilOp(7680,7680,7680)},H$f.do3=function(){var H$f=H$zf.mainContext;H$f.colorMask(!0,!0,!0,!0),H$f.stencilOp(7680,7680,7680),H$f.clear(1024),H$f.disable(2960)},H$f.do4=function(){var H$f=H$zf.mainContext;0==this.level&&(H$f.enable(2960),H$f.clear(1024)),H$f.colorMask(!1,!1,!1,!1),H$f.stencilFunc(519,0,255),H$f.stencilOp(7680,7680,7682)},H$f.do5=function(){var H$f=H$zf.mainContext;H$f.stencilFunc(514,this.level,255),H$f.colorMask(!0,!0,!0,!0),H$f.stencilOp(7680,7680,7680)},H$f.do6=function(){var H$f=H$zf.mainContext;H$w.targetFns[H$w.TOINT[this.blendMode]](H$f)},H$f.do7=function(){var H$f=H$zf.mainContext;H$f.colorMask(!1,!1,!1,!1),H$f.stencilOp(7680,7680,7683)},H$f.do8=function(){var H$f=H$zf.mainContext;H$f.colorMask(!0,!0,!0,!0),H$f.stencilFunc(514,this.level,255),H$f.stencilOp(7680,7680,7680)},H$O.restore=function(H$f,H$K,H$Y,H$X,H$L){var H$H;if((H$f._renderKey=0)<H$O._mask&&H$O._mask--,0==H$O._mask)H$H=laya.webgl.submit.SubmitStencil.create(3),H$f.addRenderObject(H$H),H$f._curSubmit=H$Hf.RENDERBASE;else{H$H=laya.webgl.submit.SubmitStencil.create(7),H$f.addRenderObject(H$H);var H$E=H$f._vb;H$E._byteLength;if(H$hf.fillRectImgVb(H$E,null,H$K.x,H$K.y,H$K.width,H$K.height,H$e.DEF_UV,H$Y,H$X,H$L,0,0)){H$f._shader2D.glTexture=null;var H$d=H$f._curSubmit=H$Hf.createSubmit(H$f,H$f._ib,H$E,(H$E._byteLength-64)/32*3,H$If.create(2,0));H$d.shaderValue.ALPHA=1,H$f._submits[H$f._submits._length++]=H$d,H$f._curSubmit._numEle+=6,H$f._curSubmit=H$Hf.RENDERBASE}else alert("clipRect calc stencil rect error");H$H=laya.webgl.submit.SubmitStencil.create(8),H$f.addRenderObject(H$H)}},H$O.restore2=function(H$f,H$K){var H$Y;(H$f._renderKey=0)<H$O._mask&&H$O._mask--,0==H$O._mask?(H$Y=laya.webgl.submit.SubmitStencil.create(3),H$f.addRenderObject(H$Y),H$f._curSubmit=H$Hf.RENDERBASE):(H$Y=laya.webgl.submit.SubmitStencil.create(7),H$f.addRenderObject(H$Y),H$f._submits[H$f._submits._length++]=H$K,H$Y=laya.webgl.submit.SubmitStencil.create(8),H$f.addRenderObject(H$Y))},H$O.create=function(H$f){var H$K=H$O._cache._length?H$O._cache[--H$O._cache._length]:new H$O;return 5==(H$K.step=H$f)&&++H$O._mask,H$K.level=H$O._mask,H$K},H$O._cache=((H$O._cache=[])._length=0,H$O._cache),H$O._mask=0,H$O}(),H$Zf=function(){function H$d(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}H$y(H$d,"laya.webgl.submit.SubmitTarget");var H$f=H$d.prototype;return H$s.imps(H$f,{"laya.webgl.submit.ISubmit":!0}),H$f.renderSubmit=function(){this._vb.bind_upload(this._ib);var H$f=this.scope.getValue(this.proName);return H$f&&(this.shaderValue.texture=H$f.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[H$f.width,H$f.height]),this.shaderValue.upload(),this.blend(),H$V.drawCall++,H$V.trianglesFaces+=this._numEle/3,H$zf.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},H$f.blend=function(){if(H$w.activeBlendFunction!==H$w.fns[this.blendType]){var H$f=H$zf.mainContext;H$f.enable(3042),H$w.fns[this.blendType](H$f),H$w.activeBlendFunction=H$w.fns[this.blendType]}},H$f.getRenderType=function(){return 0},H$f.releaseRender=function(){var H$f=H$d._cache;(H$f[H$f._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},H$d.create=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=H$d._cache._length?H$d._cache[--H$d._cache._length]:new H$d;return H$E._ib=H$K,H$E._vb=H$Y,H$E.proName=H$H,H$E._startIdx=H$X*H$$f.BYTES_PIDX,H$E._numEle=0,H$E.blendType=H$f._nBlendType,H$E.shaderValue=H$L,H$E.shaderValue.setValue(H$f._shader2D),H$E},H$d._cache=((H$d._cache=[])._length=0,H$d._cache),H$d}(),H$yf=function(){function H$f(){this._sourceStr=null}H$y(H$f,"laya.webgl.text.CharSegment");var H$K=H$f.prototype;return H$s.imps(H$K,{"laya.webgl.text.ICharSegment":!0}),H$K.textToSpit=function(H$f){this._sourceStr=H$f},H$K.getChar=function(H$f){return this._sourceStr.charAt(H$f)},H$K.getCharCode=function(H$f){return this._sourceStr.charCodeAt(H$f)},H$K.length=function(){return this._sourceStr.length},H$f}(),H$lf=function(){var H$f;function H$V(){}return H$y(H$V,"laya.webgl.text.DrawText"),H$V.__init__=function(){H$V._charsTemp=new Array,H$V._drawValue=new H$f,H$V._charSeg=new H$yf},H$V.customCharSeg=function(H$f){H$V._charSeg=H$f},H$V.getChar=function(H$f,H$K,H$Y){var H$X=H$jf.createOneChar(H$f,H$Y);return-1!=H$K&&(H$V._charsCache[H$K]=H$X),H$X},H$V._drawSlow=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$Z,H$y,H$l,H$B){var H$$,H$h,H$A=H$V._drawValue.value(H$H,H$d,H$O,H$i,H$y,H$l,H$B),H$x=0,H$S=0,H$z=H$V._charsTemp,H$C=0,H$s=NaN;if(H$X)for(H$z.length=H$X.length,H$x=0,H$S=H$X.length;H$x<H$S;H$x++)(H$h=H$X[H$x])&&(H$s=H$h.charNum+H$A.txtID,H$z[H$x]=H$$=H$V._charsCache[H$s]||H$V.getChar(H$h.char,H$s,H$A),H$$.active());else{var H$a=H$Y instanceof laya.utils.WordText?H$Y.toString():H$Y;if(H$k.CharacterCache){H$V._charSeg.textToSpit(H$a);var H$I=H$V._charSeg.length();for(H$x=0,H$S=H$z.length=H$I;H$x<H$S;H$x++)H$s=H$V._charSeg.getCharCode(H$x)+H$A.txtID,H$z[H$x]=H$$=H$V._charsCache[H$s]||H$V.getChar(H$V._charSeg.getChar(H$x),H$s,H$A),H$$.active(),H$C+=H$$.cw}else H$z.length=0,(H$$=H$V.getChar(H$a,-1,H$A)).active(),H$C+=H$$.cw,H$z[0]=H$$}var H$n=0;null!==H$E&&"left"!==H$E&&(H$n=-("center"==H$E?H$C/2:H$C));var H$_,H$G,H$m=NaN,H$R=0;if(H$X)for(H$x=0,H$S=H$z.length;H$x<H$S;H$x++)H$$=H$z[H$x],H$h=H$X[H$x],H$$&&H$h&&!H$$.isSpace&&(H$m=H$$.borderSize,H$_=H$$.texture,H$K._drawText(H$_,H$U+H$n+H$h.x*H$y-H$m,H$Z+H$h.y*H$l-H$m,H$_.width,H$_.height,H$L,0,0,0,0));else{for(H$x=0,H$S=H$z.length;H$x<H$S;H$x++)(H$$=H$z[H$x])&&!H$$.isSpace&&(H$m=H$$.borderSize,H$_=H$$.texture,H$K._drawText(H$_,H$U+H$n-H$m,H$Z-H$m,H$_.width,H$_.height,H$L,0,0,0,0),H$f&&((H$G=H$f[H$R++])||(H$G=H$f[H$R-1]=[]),H$G[0]=H$_,H$G[1]=H$n-H$m,H$G[2]=-H$m)),H$n+=H$$.cw;H$f&&(H$f.length=H$R)}},H$V._drawFast=function(H$f,H$K,H$Y,H$X,H$L){for(var H$H,H$E,H$d=0,H$O=H$f.length;H$d<H$O;H$d++)(H$H=(H$E=H$f[H$d])[0]).active(),H$K._drawText(H$H,H$X+H$E[1],H$L+H$E[2],H$H.width,H$H.height,H$Y,0,0,0,0)},H$V.drawText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$Z){if(void 0===H$Z&&(H$Z=0),!(H$K&&0===H$K.length||H$Y&&0===H$Y.length)){var H$y=H$X.a,H$l=H$X.d;(0!==H$X.b||0!==H$X.c)&&(H$y=H$l=1);var H$B=1!==H$y||1!==H$l;if(H$B&&H$s.stage.transform){var H$$=H$s.stage.transform;H$B=H$$.a===H$y&&H$$.d===H$l}else H$B=!1;if(H$B){var H$h=(H$X=H$X.copyTo(H$af._tmpMatrix)).tx,H$A=H$X.ty;H$X.scale(1/H$y,1/H$l),H$X._checkTransform(),H$i*=H$y,H$U*=H$l,H$i+=H$h-H$X.tx,H$U+=H$A-H$X.ty}else H$y=H$l=1;if(H$Y)H$V._drawSlow(null,H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$y,H$l,H$Z);else{if(null===H$K.toUpperCase){var H$x=H$y+1e5*H$l,H$S=H$K;return void(H$S.changed||H$S.id!==H$x?(H$S.id=H$x,H$S.changed=!1,H$V._drawSlow(H$S.save,H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$y,H$l,H$Z)):H$V._drawFast(H$S.save,H$f,H$X,H$i,H$U))}var H$z=H$K+H$L.toString()+H$E+H$d+H$O+H$y+H$l+H$H,H$C=H$V._textsCache[H$z];H$k.CharacterCache?H$C?H$V._drawFast(H$C,H$f,H$X,H$i,H$U):(H$V._textsCache.__length||(H$V._textsCache.__length=0),H$V._textsCache.__length>H$a.WebGLTextCacheCount&&((H$V._textsCache={}).__length=0,H$V._curPoolIndex=0),H$V._textCachesPool[H$V._curPoolIndex]?(H$C=H$V._textsCache[H$z]=H$V._textCachesPool[H$V._curPoolIndex]).length=0:H$V._textCachesPool[H$V._curPoolIndex]=H$C=H$V._textsCache[H$z]=[],H$V._textsCache.__length++,H$V._curPoolIndex++,H$V._drawSlow(H$C,H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$y,H$l,H$Z)):H$V._drawSlow(H$C,H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$y,H$l,H$Z)}}},H$V._charsTemp=null,H$V._textCachesPool=[],H$V._curPoolIndex=0,H$V._charsCache={},H$V._textsCache={},H$V._drawValue=null,H$V.d=[],H$V._charSeg=null,H$V.__init$=function(){H$f=function(){function H$O(){}return H$y(H$O,""),H$O.prototype.value=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this.font=H$f,this.fillColor=H$K,this.borderColor=H$Y,this.lineWidth=H$X,this.scaleX=H$L,this.scaleY=H$H,this.underLine=H$E;var H$d=H$f.toString()+H$L+H$H+H$X+(H$K?H$K.toLowerCase():" ")+(H$Y?H$Y.toLowerCase():" ")+H$E;return this.txtID=H$O._keymap[H$d],this.txtID||(this.txtID=1e-7*++H$O._keymapCount,H$O._keymap[H$d]=this.txtID),this},H$O.clear=function(){H$O._keymap={},H$O._keymapCount=1},H$O._keymap={},H$O._keymapCount=1,H$O}()},H$V}(),H$Bf=function(){function H$L(H$f){this._index=0,this._size=14,this._italic=-2,H$L._cache2=H$L._cache2||[],this.setFont(H$f||"14px Arial")}H$y(H$L,"laya.webgl.text.FontInContext");var H$f=H$L.prototype;return H$f.setFont=function(H$f){var H$K=H$L._cache2[H$f];if(H$K)this._words=H$K[0],this._size=H$K[1];else{this._words=H$f.split(" ");for(var H$Y=0,H$X=this._words.length;H$Y<H$X;H$Y++)if(0<this._words[H$Y].indexOf("px")){this._index=H$Y;break}this._size=parseInt(this._words[this._index]),H$L._cache2[H$f]=[this._words,this._size]}this._text=null,this._italic=-2},H$f.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},H$f.hasType=function(H$f){for(var H$K=0,H$Y=this._words.length;H$K<H$Y;H$K++)if(this._words[H$K]===H$f)return H$K;return-1},H$f.removeType=function(H$f){for(var H$K=0,H$Y=this._words.length;H$K<H$Y;H$K++)if(this._words[H$K]===H$f){this._words.splice(H$K,1),this._index>H$K&&this._index--;break}this._text=null,this._italic=-2},H$f.copyTo=function(H$f){return H$f._text=this._text,H$f._size=this._size,H$f._index=this._index,H$f._words=this._words.slice(),H$f._italic=-2,H$f},H$f.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},H$X(0,H$f,"size",function(){return this._size},function(H$f){this._size=H$f,this._words[this._index]=H$f+"px",this._text=null}),H$L.create=function(H$f){var H$K=H$L._cache[H$f];return H$K||(H$K=H$L._cache[H$f]=new H$L(H$f))},H$L.EMPTY=new H$L,H$L._cache={},H$L._cache2=null,H$L}(),H$$f=function(){function H$f(){}return H$y(H$f,"laya.webgl.utils.CONST3D2D"),H$f.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$f.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],H$f.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],H$f._TMPARRAY=[],H$f._OFFSETX=0,H$f._OFFSETY=0,H$E(H$f,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),H$f}(),H$hf=function(){function H$B(){}return H$y(H$B,"laya.webgl.utils.GlUtils"),H$B.make2DProjection=function(H$f,H$K,H$Y){return[2/H$f,0,0,0,0,-2/H$K,0,0,0,0,2/H$Y,0,-1,1,0,1]},H$B.fillIBQuadrangle=function(H$f,H$K){if(65535/4<H$K)throw Error("IBQuadrangle count:"+H$K+" must<:"+Math.floor(65535/4));H$K=Math.floor(H$K),H$f._resizeBuffer(6*(H$K+1)*2,!1),H$f.byteLength=H$f.bufferLength;for(var H$Y=H$f.getUint16Array(),H$X=0,H$L=0;H$L<H$K;H$L++)H$Y[H$X++]=4*H$L,H$Y[H$X++]=4*H$L+2,H$Y[H$X++]=4*H$L+1,H$Y[H$X++]=4*H$L,H$Y[H$X++]=4*H$L+3,H$Y[H$X++]=4*H$L+2;return H$f.setNeedUpload(),!0},H$B.expandIBQuadrangle=function(H$f,H$K){H$f.bufferLength>=6*H$K*2||H$B.fillIBQuadrangle(H$f,H$K)},H$B.mathCeilPowerOfTwo=function(H$f){return H$f--,H$f|=H$f>>1,H$f|=H$f>>2,H$f|=H$f>>4,H$f|=H$f>>8,H$f|=H$f>>16,++H$f},H$B.fillQuadrangleImgVb=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){var H$O=16+(H$f._byteLength>>2);H$f.byteLength=H$O<<2;var H$i=H$f.getFloat32Array();H$i[(H$O-=16)+2]=H$L[0],H$i[H$O+3]=H$L[1],H$i[H$O+6]=H$L[2],H$i[H$O+7]=H$L[3],H$i[H$O+10]=H$L[4],H$i[H$O+11]=H$L[5],H$i[H$O+14]=H$L[6],H$i[H$O+15]=H$L[7];var H$U=H$H.a,H$Z=H$H.b,H$y=H$H.c,H$l=H$H.d;if(1!==H$U||0!==H$Z||0!==H$y||1!==H$l){H$H.bTransform=!0;var H$B=H$H.tx+H$E,H$$=H$H.ty+H$d;H$i[H$O]=(H$X[0]+H$K)*H$U+(H$X[1]+H$Y)*H$y+H$B,H$i[H$O+1]=(H$X[0]+H$K)*H$Z+(H$X[1]+H$Y)*H$l+H$$,H$i[H$O+4]=(H$X[2]+H$K)*H$U+(H$X[3]+H$Y)*H$y+H$B,H$i[H$O+5]=(H$X[2]+H$K)*H$Z+(H$X[3]+H$Y)*H$l+H$$,H$i[H$O+8]=(H$X[4]+H$K)*H$U+(H$X[5]+H$Y)*H$y+H$B,H$i[H$O+9]=(H$X[4]+H$K)*H$Z+(H$X[5]+H$Y)*H$l+H$$,H$i[H$O+12]=(H$X[6]+H$K)*H$U+(H$X[7]+H$Y)*H$y+H$B,H$i[H$O+13]=(H$X[6]+H$K)*H$Z+(H$X[7]+H$Y)*H$l+H$$}else H$H.bTransform=!1,H$K+=H$H.tx+H$E,H$Y+=H$H.ty+H$d,H$i[H$O]=H$K+H$X[0],H$i[H$O+1]=H$Y+H$X[1],H$i[H$O+4]=H$K+H$X[2],H$i[H$O+5]=H$Y+H$X[3],H$i[H$O+8]=H$K+H$X[4],H$i[H$O+9]=H$Y+H$X[5],H$i[H$O+12]=H$K+H$X[6],H$i[H$O+13]=H$Y+H$X[7];return H$f._upload=!0},H$B.fillTranglesVB=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){var H$d=(H$f._byteLength>>2)+H$X.length;H$f.byteLength=H$d<<2;var H$O=H$f.getFloat32Array();H$d-=H$X.length;for(var H$i=H$X.length,H$U=H$L.a,H$Z=H$L.b,H$y=H$L.c,H$l=H$L.d,H$B=0;H$B<H$i;H$B+=4)if(H$O[H$d+H$B+2]=H$X[H$B+2],H$O[H$d+H$B+3]=H$X[H$B+3],1!==H$U||0!==H$Z||0!==H$y||1!==H$l){H$L.bTransform=!0;var H$$=H$L.tx+H$H,H$h=H$L.ty+H$E;H$O[H$d+H$B]=(H$X[H$B]+H$K)*H$U+(H$X[H$B+1]+H$Y)*H$y+H$$,H$O[H$d+H$B+1]=(H$X[H$B]+H$K)*H$Z+(H$X[H$B+1]+H$Y)*H$l+H$h}else H$L.bTransform=!1,H$K+=H$L.tx+H$H,H$Y+=H$L.ty+H$E,H$O[H$d+H$B]=H$K+H$X[H$B],H$O[H$d+H$B+1]=H$Y+H$X[H$B+1];return H$f._upload=!0},H$B.copyPreImgVb=function(H$f,H$K,H$Y){var H$X=H$f._byteLength>>2;H$f.byteLength=H$X+16<<2;for(var H$L=H$f.getFloat32Array(),H$H=0,H$E=H$X-16;H$H<4;H$H++)H$L[H$X]=H$L[H$E]+H$K,++H$E,H$L[++H$X]=H$L[H$E]+H$Y,++H$E,H$L[++H$X]=H$L[H$E],++H$E,H$L[++H$X]=H$L[H$E],++H$X,++H$E;H$f._upload=!0},H$B.fillRectImgVb=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$Z,H$y){void 0===H$y&&(H$y=!1);var H$l,H$B,H$$,H$h,H$A,H$x,H$S,H$z,H$C,H$s,H$a,H$I,H$n,H$_,H$G,H$m,H$R=1,H$V=H$d.a,H$t=H$d.b,H$T=H$d.c,H$k=H$d.d,H$e=H$K&&H$K.width<99999999;if(1!==H$V||0!==H$t||0!==H$T||1!==H$k?(H$d.bTransform=!0,0===H$t&&0===H$T&&(H$R=23,H$C=H$L+H$Y,H$s=H$H+H$X,H$l=H$V*H$Y+(H$a=H$d.tx+H$O),H$$=H$V*H$C+H$a,H$B=H$k*H$X+(H$I=H$d.ty+H$i),H$h=H$k*H$s+H$I)):(H$R=23,H$d.bTransform=!1,H$$=(H$l=H$Y+H$d.tx+H$O)+H$L,H$h=(H$B=H$X+H$d.ty+H$i)+H$H),H$e&&(H$A=H$K.x,H$x=H$K.y,H$S=H$K.width+H$A,H$z=H$K.height+H$x),1!==H$R){if(Math.min(H$l,H$$)>=H$S)return!1;if(Math.min(H$B,H$h)>=H$z)return!1;if(Math.max(H$$,H$l)<=H$A)return!1;if(Math.max(H$h,H$B)<=H$x)return!1}var H$Q=H$f._byteLength>>2;H$f.byteLength=16+H$Q<<2;var H$W=H$f.getFloat32Array();switch(H$W[2+H$Q]=H$E[0],H$W[3+H$Q]=H$E[1],H$W[6+H$Q]=H$E[2],H$W[7+H$Q]=H$E[3],H$W[10+H$Q]=H$E[4],H$W[11+H$Q]=H$E[5],H$W[14+H$Q]=H$E[6],H$W[15+H$Q]=H$E[7],H$R){case 1:H$a=H$d.tx+H$O,H$I=H$d.ty+H$i;var H$q=H$V*H$Y,H$P=H$T*H$X,H$b=H$k*H$X,H$J=H$t*H$Y,H$M=H$V*(H$C=H$L+H$Y),H$w=H$T*(H$s=H$H+H$X),H$r=H$k*H$s,H$v=H$t*H$C;H$y?(H$n=H$q+H$P+H$a,H$G=Math.round(H$n)-H$n,H$_=H$b+H$J+H$I,H$m=Math.round(H$_)-H$_,H$W[H$Q]=H$n+H$G,H$W[1+H$Q]=H$_+H$m,H$W[4+H$Q]=H$M+H$P+H$a+H$G,H$W[5+H$Q]=H$b+H$v+H$I+H$m,H$W[8+H$Q]=H$M+H$w+H$a+H$G,H$W[9+H$Q]=H$r+H$v+H$I+H$m,H$W[12+H$Q]=H$q+H$w+H$a+H$G,H$W[13+H$Q]=H$r+H$J+H$I+H$m):(H$W[H$Q]=H$q+H$P+H$a,H$W[1+H$Q]=H$b+H$J+H$I,H$W[4+H$Q]=H$M+H$P+H$a,H$W[5+H$Q]=H$b+H$v+H$I,H$W[8+H$Q]=H$M+H$w+H$a,H$W[9+H$Q]=H$r+H$v+H$I,H$W[12+H$Q]=H$q+H$w+H$a,H$W[13+H$Q]=H$r+H$J+H$I);break;case 23:H$y?(H$n=H$l+H$U,H$G=Math.round(H$n)-H$n,H$_=H$B,H$m=Math.round(H$_)-H$_,H$W[H$Q]=H$n+H$G,H$W[1+H$Q]=H$_+H$m,H$W[4+H$Q]=H$$+H$U+H$G,H$W[5+H$Q]=H$B+H$m,H$W[8+H$Q]=H$$+H$G,H$W[9+H$Q]=H$h+H$m,H$W[12+H$Q]=H$l+H$G,H$W[13+H$Q]=H$h+H$m):(H$W[H$Q]=H$l+H$U,H$W[1+H$Q]=H$B,H$W[4+H$Q]=H$$+H$U,H$W[5+H$Q]=H$B,H$W[8+H$Q]=H$$,H$W[9+H$Q]=H$h,H$W[12+H$Q]=H$l,H$W[13+H$Q]=H$h)}return H$f._upload=!0},H$B.fillLineVb=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){var H$O=.5*H$E,H$i=H$B._fillLineArray,H$U=-(H$X-H$H),H$Z=H$Y-H$L,H$y=Math.sqrt(H$U*H$U+H$Z*H$Z);H$U/=H$y,H$Z/=H$y,H$U*=H$O,H$Z*=H$O,H$i[0]=H$Y-H$U,H$i[1]=H$X-H$Z,H$i[4]=H$Y+H$U,H$i[5]=H$X+H$Z,H$i[8]=H$L+H$U,H$i[9]=H$H+H$Z,H$i[12]=H$L-H$U,H$i[13]=H$H-H$Z,H$d&&H$d.transformPointArray(H$i,H$i);var H$l=16+(H$f._byteLength>>2);return H$f.byteLength=H$l<<2,H$f.insertData(H$i,H$l-16),!0},H$B._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],H$B}(),H$Af=(function(){function H$O(){}H$y(H$O,"laya.webgl.utils.MatirxArray"),H$O.ArrayMul=function(H$f,H$K,H$Y){if(H$f)if(H$K)for(var H$X=NaN,H$L=NaN,H$H=NaN,H$E=NaN,H$d=0;H$d<4;H$d++)H$X=H$f[H$d],H$L=H$f[H$d+4],H$H=H$f[H$d+8],H$E=H$f[H$d+12],H$Y[H$d]=H$X*H$K[0]+H$L*H$K[1]+H$H*H$K[2]+H$E*H$K[3],H$Y[H$d+4]=H$X*H$K[4]+H$L*H$K[5]+H$H*H$K[6]+H$E*H$K[7],H$Y[H$d+8]=H$X*H$K[8]+H$L*H$K[9]+H$H*H$K[10]+H$E*H$K[11],H$Y[H$d+12]=H$X*H$K[12]+H$L*H$K[13]+H$H*H$K[14]+H$E*H$K[15];else H$O.copyArray(H$f,H$Y);else H$O.copyArray(H$K,H$Y)},H$O.copyArray=function(H$f,H$K){if(H$f&&H$K)for(var H$Y=0;H$Y<H$f.length;H$Y++)H$K[H$Y]=H$f[H$Y]}}(),function(){function H$K(H$f,H$K,H$Y){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=H$f,this._vb=new H$Ff(H$f,35048),H$K&&this._vb._resizeBuffer(H$K,!1),this._ib=new H$of,H$Y&&this._ib._resizeBuffer(H$Y,!1)}H$y(H$K,"laya.webgl.utils.Mesh2D");var H$f=H$K.prototype;return H$f.cloneWithNewVB=function(){var H$f=new H$K(this._stride,0,0);return H$f._ib=this._ib,H$f._quadNum=this._quadNum,H$f._attribInfo=this._attribInfo,H$f},H$f.cloneWithNewVBIB=function(){var H$f=new H$K(this._stride,0,0);return H$f._attribInfo=this._attribInfo,H$f},H$f.getVBW=function(){return this._vb.setNeedUpload(),this._vb},H$f.getVBR=function(){return this._vb},H$f.getIBR=function(){return this._ib},H$f.getIBW=function(){return this._ib.setNeedUpload(),this._ib},H$f.createQuadIB=function(H$f){this._quadNum=H$f,this._ib._resizeBuffer(6*H$f*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var H$K=this._ib.getUint16Array(),H$Y=0,H$X=0,H$L=0;H$L<H$f;H$L++)H$K[H$Y++]=H$X,H$K[H$Y++]=H$X+2,H$K[H$Y++]=H$X+1,H$K[H$Y++]=H$X,H$K[H$Y++]=H$X+3,H$K[H$Y++]=H$X+2,H$X+=4;this._ib.setNeedUpload()},H$f.setAttributes=function(H$f){if(this._attribInfo=H$f,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},H$f.getEleNum=function(){return this._ib.getBuffer().byteLength/2},H$f.releaseMesh=function(){},H$f.destroy=function(){},H$f.clearVB=function(){this._vb.clear()},H$K._gvaoid=0,H$K}()),H$xf=function(){function H$L(){}return H$y(H$L,"laya.webgl.utils.RenderState2D"),H$L.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},H$L.mat2MatArray=function(H$f,H$K){var H$Y=H$f,H$X=H$K;return H$X[0]=H$Y.a,H$X[1]=H$Y.b,H$X[2]=H$L.EMPTYMAT4_ARRAY[2],H$X[3]=H$L.EMPTYMAT4_ARRAY[3],H$X[4]=H$Y.c,H$X[5]=H$Y.d,H$X[6]=H$L.EMPTYMAT4_ARRAY[6],H$X[7]=H$L.EMPTYMAT4_ARRAY[7],H$X[8]=H$L.EMPTYMAT4_ARRAY[8],H$X[9]=H$L.EMPTYMAT4_ARRAY[9],H$X[10]=H$L.EMPTYMAT4_ARRAY[10],H$X[11]=H$L.EMPTYMAT4_ARRAY[11],H$X[12]=H$Y.tx,H$X[13]=H$Y.ty,H$X[14]=H$L.EMPTYMAT4_ARRAY[14],H$X[15]=H$L.EMPTYMAT4_ARRAY[15],H$K},H$L.restoreTempArray=function(){H$L.TEMPMAT4_ARRAY[0]=1,H$L.TEMPMAT4_ARRAY[1]=0,H$L.TEMPMAT4_ARRAY[4]=0,H$L.TEMPMAT4_ARRAY[5]=1,H$L.TEMPMAT4_ARRAY[12]=0,H$L.TEMPMAT4_ARRAY[13]=0},H$L.clear=function(){H$L.worldScissorTest=!1,H$L.worldShaderDefines=null,H$L.worldFilters=null,H$L.worldAlpha=1,H$L.worldClipRect.x=H$L.worldClipRect.y=0,H$L.worldClipRect.width=H$L.width,H$L.worldClipRect.height=H$L.height,H$L.curRenderTarget=null},H$L._MAXSIZE=99999999,H$L.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$L.worldMatrix4=H$L.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$L.worldAlpha=1,H$L.worldScissorTest=!1,H$L.worldFilters=null,H$L.worldShaderDefines=null,H$L.curRenderTarget=null,H$L.width=0,H$L.height=0,H$E(H$L,["worldMatrix",function(){return this.worldMatrix=new H$n},"worldClipRect",function(){return this.worldClipRect=new H$G(0,0,99999999,99999999)}]),H$L}(),H$Sf=function(){var H$x,H$Y;function H$S(H$f,H$K,H$Y,H$X,H$L){var H$H=this;function H$E(H$f){var H$K=[],H$Y=new H$x(H$K);return H$H._compileToTree(H$Y,H$f.split("\n"),0,H$K,H$L),H$Y}var H$d=H$l.now();this._VS=H$E(H$K),this._PS=H$E(H$Y),this._nameMap=H$X,2<H$l.now()-H$d&&console.log("ShaderCompile use time:"+(H$l.now()-H$d)+"  size:"+H$K.length+"/"+H$Y.length)}H$y(H$S,"laya.webgl.utils.ShaderCompile");var H$f=H$S.prototype;return H$f._compileToTree=function(H$f,H$K,H$Y,H$X,H$L){var H$H,H$E,H$d,H$O,H$i,H$U,H$Z,H$y=0,H$l=0,H$B=0,H$$=0;for(H$l=H$Y;H$l<H$K.length;H$l++)if(!((H$d=H$K[H$l]).length<1)&&0!==(H$y=H$d.indexOf("//"))){if(0<=H$y&&(H$d=H$d.substr(0,H$y)),H$H=H$Z||new H$x(H$X),H$Z=null,H$H.text=H$d,H$H.noCompile=!0,0<=(H$y=H$d.indexOf("#"))){for(H$O="#",H$$=H$y+1,H$B=H$d.length;H$$<H$B;H$$++){var H$h=H$d.charAt(H$$);if(" "===H$h||"\t"===H$h||"\r"===H$h||"\n"===H$h||"?"===H$h)break;H$O+=H$h}switch(H$H.name=H$O){case"#ifdef":case"#ifndef":if(H$H.src=H$d,H$H.noCompile=null!=H$d.match(/[!&|()=<>]/),H$H.noCompile?console.log("function():Boolean{return "+H$d.substr(H$y+H$H.name.length)+"}"):(H$U=H$d.replace(/^\s*/,"").split(/\s+/),H$H.setCondition(H$U[1],"#ifdef"===H$O?1:2),H$H.text="//"+H$H.text),H$H.setParent(H$f),H$f=H$H,H$L)for(H$U=H$d.substr(H$$).split(H$S._splitToWordExps3),H$$=0;H$$<H$U.length;H$$++)(H$d=H$U[H$$]).length&&(H$L[H$d]=!0);continue;case"#if":if(H$H.src=H$d,H$H.noCompile=!0,H$H.setParent(H$f),H$f=H$H,H$L)for(H$U=H$d.substr(H$$).split(H$S._splitToWordExps3),H$$=0;H$$<H$U.length;H$$++)(H$d=H$U[H$$]).length&&"defined"!=H$d&&(H$L[H$d]=!0);continue;case"#else":H$H.src=H$d,H$E=(H$f=H$f.parent).childs[H$f.childs.length-1],H$H.noCompile=H$E.noCompile,H$H.noCompile||(H$H.condition=H$E.condition,H$H.conditionType=1==H$E.conditionType?2:1,H$H.text="//"+H$H.text+" "+H$E.text+" "+H$H.conditionType),H$H.setParent(H$f),H$f=H$H;continue;case"#endif":H$E=(H$f=H$f.parent).childs[H$f.childs.length-1],H$H.noCompile=H$E.noCompile,H$H.noCompile||(H$H.text="//"+H$H.text),H$H.setParent(H$f);continue;case"#include":H$U=H$S.splitToWords(H$d,null);var H$A=H$S.includes[H$U[1]];if(!H$A)throw"ShaderCompile error no this include file:"+H$U[1];if((H$y=H$U[0].indexOf("?"))<0){H$H.setParent(H$f),H$d=H$A.getWith("with"==H$U[2]?H$U[3]:null),this._compileToTree(H$H,H$d.split("\n"),0,H$X,H$L),H$H.text="";continue}H$H.setCondition(H$U[0].substr(H$y+1),1),H$H.text=H$A.getWith("with"==H$U[2]?H$U[3]:null);break;case"#import":H$i=(H$U=H$S.splitToWords(H$d,null))[1],H$X.push({node:H$H,file:H$S.includes[H$i],ofs:H$H.text.length});continue}}else{if((H$E=H$f.childs[H$f.childs.length-1])&&!H$E.name){0<H$X.length&&H$S.splitToWords(H$d,H$E),H$Z=H$H,H$E.text+="\n"+H$d;continue}0<H$X.length&&H$S.splitToWords(H$d,H$H)}H$H.setParent(H$f)}},H$f.createShader=function(H$f,H$K,H$Y){var H$X={},H$L="";if(H$f)for(var H$H in H$f)H$L+="#define "+H$H+"\n",H$X[H$H]=!0;var H$E=this._VS.toscript(H$X,[]),H$d=this._PS.toscript(H$X,[]);return(H$Y||H$uf.create)(H$L+H$E.join("\n"),H$L+H$d.join("\n"),H$K,this._nameMap)},H$S._parseOne=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E={type:H$S.shaderParamsMap[H$Y[H$X+1]],name:H$Y[H$X+2],size:isNaN(parseInt(H$Y[H$X+3]))?1:parseInt(H$Y[H$X+3])};return H$H&&("attribute"==H$L?H$f.push(H$E):H$K.push(H$E)),":"==H$Y[H$X+3]&&(H$E.type=H$Y[H$X+4],H$X+=2),H$X+=2},H$S.addInclude=function(H$f,H$K){if(!H$K||0===H$K.length)throw new Error("add shader include file err:"+H$f);if(H$S.includes[H$f])throw new Error("add shader include file err, has add:"+H$f);H$S.includes[H$f]=new H$Y(H$K)},H$S.preGetParams=function(H$f,H$K){var H$Y=[H$f,H$K],H$X={},H$L=[],H$H=[],H$E={},H$d=[];H$X.attributes=H$L,H$X.uniforms=H$H,H$X.defines=H$E;for(var H$O=0,H$i=0,H$U=0;H$U<2;H$U++){H$Y[H$U]=H$Y[H$U].replace(H$S._removeAnnotation,"");var H$Z,H$y=H$Y[H$U].match(H$S._reg);for(H$O=0,H$i=H$y.length;H$O<H$i;H$O++){var H$l=H$y[H$O];if("attribute"==H$l||"uniform"==H$l)H$O=H$S._parseOne(H$L,H$H,H$y,H$O,H$l,!0);else{if("#define"==H$l){H$d[H$l=H$y[++H$O]]=1;continue}if("#ifdef"==H$l){H$E[H$Z=H$y[++H$O]]=H$E[H$Z]||[];for(H$O++;H$O<H$i;H$O++)if("attribute"==(H$l=H$y[H$O])||"uniform"==H$l)H$O=H$S._parseOne(H$L,H$H,H$y,H$O,H$l,H$d[H$Z]);else if("#else"==H$l)for(H$O++;H$O<H$i;H$O++)if("attribute"==(H$l=H$y[H$O])||"uniform"==H$l)H$O=H$S._parseOne(H$L,H$H,H$y,H$O,H$l,!H$d[H$Z]);else if("#endif"==H$l)break}}}}return H$X},H$S.splitToWords=function(H$f,H$K){for(var H$Y,H$X,H$L=[],H$H=-1,H$E=0,H$d=H$f.length;H$E<H$d;H$E++)if(H$Y=H$f.charAt(H$E),0<=" \t=+-*/&%!<>()'\",;".indexOf(H$Y)){if(0<=H$H&&1<H$E-H$H&&(H$X=H$f.substr(H$H,H$E-H$H),H$L.push(H$X)),'"'==H$Y||"'"==H$Y){var H$O=H$f.indexOf(H$Y,H$E+1);if(H$O<0)throw"Sharder err:"+H$f;H$L.push(H$f.substr(H$E+1,H$O-H$E-1)),H$E=H$O,H$H=-1;continue}"("==H$Y&&H$K&&0<H$L.length&&(H$X=H$L[H$L.length-1]+";","vec4;main;".indexOf(H$X)<0&&(H$K.useFuns+=H$X)),H$H=-1}else H$H<0&&(H$H=H$E);return H$H<H$d&&1<H$d-H$H&&(H$X=H$f.substr(H$H,H$d-H$H),H$L.push(H$X)),H$L},H$S.IFDEF_NO=0,H$S.IFDEF_YES=1,H$S.IFDEF_ELSE=2,H$S.IFDEF_PARENT=3,H$S._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),H$S._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),H$S._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),H$S.includes={},H$E(H$S,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),H$S.__init$=function(){H$x=function(){function H$Y(H$f){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=H$f}H$y(H$Y,"");var H$f=H$Y.prototype;return H$f.setParent=function(H$f){H$f.childs.push(this),this.z=H$f.z+1,this.parent=H$f},H$f.setCondition=function(H$f,H$K){H$f&&(this.conditionType=H$K,H$f=H$f.replace(/(\s*$)/g,""),this.condition=function(){return this[H$f]},this.condition.__condition=H$f)},H$f.toscript=function(H$f,H$K){return this._toscript(H$f,H$K,++H$Y.__id)},H$f._toscript=function(H$X,H$L,H$H){if(this.childs.length<1&&!this.text)return H$L;H$L.length;if(this.condition){var H$f=!!this.condition.call(H$X);if(2===this.conditionType&&(H$f=!H$f),!H$f)return H$L}if(this.text&&H$L.push(this.text),0<this.childs.length&&this.childs.forEach(function(H$f,H$K,H$Y){H$f._toscript(H$X,H$L,H$H)}),0<this.includefiles.length&&0<this.useFuns.length)for(var H$K,H$Y=0,H$E=this.includefiles.length;H$Y<H$E;H$Y++)this.includefiles[H$Y].curUseID!=H$H&&0<(H$K=this.includefiles[H$Y].file.getFunsScript(this.useFuns)).length&&(this.includefiles[H$Y].curUseID=H$H,H$L[0]=H$K+H$L[0]);return H$L},H$Y.__id=1,H$Y}(),H$Y=function(){function H$f(H$f){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=H$f;for(var H$K=0,H$Y=0,H$X=0;!((H$K=H$f.indexOf("#begin",H$K))<0);){for(H$X=H$K+5;!((H$X=H$f.indexOf("#end",H$X))<0)&&"i"===H$f.charAt(H$X+4);)H$X+=5;if(H$X<0)throw"add include err,no #end:"+H$f;H$Y=H$f.indexOf("\n",H$K);var H$L=H$S.splitToWords(H$f.substr(H$K,H$Y-H$K),null);"code"==H$L[1]?this.codes[H$L[2]]=H$f.substr(H$Y+1,H$X-H$Y-1):"function"==H$L[1]&&(H$Y=H$f.indexOf("function",H$K),H$Y+="function".length,this.funs[H$L[3]]=H$f.substr(H$Y+1,H$X-H$Y-1),this.funnames+=H$L[3]+";"),H$K=H$X+1}}H$y(H$f,"");var H$K=H$f.prototype;return H$K.getWith=function(H$f){var H$K=H$f?this.codes[H$f]:this.script;if(!H$K)throw"get with error:"+H$f;return H$K},H$K.getFunsScript=function(H$f){var H$K="";for(var H$Y in this.funs)0<=H$f.indexOf(H$Y+";")&&(H$K+=this.funs[H$Y]);return H$K},H$f}()},H$S}(),H$zf=function(){function H$E(){}return H$y(H$E,"laya.webgl.WebGL"),H$E._uint8ArraySlice=function(){for(var H$f=this.length,H$K=new Uint8Array(this.length),H$Y=0;H$Y<H$f;H$Y++)H$K[H$Y]=this[H$Y];return H$K},H$E._float32ArraySlice=function(){for(var H$f=this.length,H$K=new Float32Array(this.length),H$Y=0;H$Y<H$f;H$Y++)H$K[H$Y]=this[H$Y];return H$K},H$E._uint16ArraySlice=function(H$f){var H$K,H$Y=arguments,H$X=0,H$L=0;if(0===H$Y.length)for(H$X=this.length,H$K=new Uint16Array(H$X),H$L=0;H$L<H$X;H$L++)H$K[H$L]=this[H$L];else if(2===H$Y.length){var H$H=H$Y[0],H$E=H$Y[1];if(H$H<H$E)for(H$X=H$E-H$H,H$K=new Uint16Array(H$X),H$L=H$H;H$L<H$E;H$L++)H$K[H$L-H$H]=this[H$L];else H$K=new Uint16Array(0)}return H$K},H$E.expandContext=function(){var H$f=H$L.prototype,H$K=CanvasRenderingContext2D.prototype;H$K.fillTrangles=H$f.fillTrangles,H$Df.__int__(null),H$K.setIBVB=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){void 0===H$O&&(H$O=0),void 0===H$i&&(H$i=0),null===H$Y&&(this._ib=this._ib||H$of.QuadrangleIB,H$Y=this._ib,H$hf.expandIBQuadrangle(H$Y,H$X._byteLength/64+8)),this._setIBVB(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i)},H$K.fillTrangles=function(H$f,H$K,H$Y,H$X,H$L){this._curMat=this._curMat||H$n.create(),this._vb=this._vb||H$Ff.create(),this._ib||(this._ib=H$of.create(),H$hf.fillIBQuadrangle(this._ib,H$E/4));var H$H=this._vb,H$E=H$X.length>>4;H$hf.fillTranglesVB(H$H,H$K,H$Y,H$X,H$L||this._curMat,0,0),H$hf.expandIBQuadrangle(this._ib,H$H._byteLength/64+8);var H$d=new H$If(1,0);H$d.textureHost=H$f;var H$O=new H$Nf("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");H$H._vertType=3,this._setIBVB(H$K,H$Y,this._ib,H$H,6*H$E,H$L,H$O,H$d,0,0)}},H$E.enable=function(){if(H$l.__init__(),H$A.isConchApp&&!H$A.isConchWebGL)return H$C.skinAniSprite=function(){return new H$ff},H$E.expandContext(),!1;if(H$C.getWebGLContext=function(H$f){for(var H$K,H$Y=["webgl","experimental-webgl","webkit-3d","moz-webgl"],H$X=0;H$X<H$Y.length;H$X++){try{H$K=H$f.getContext(H$Y[H$X],{stencil:H$a.isStencil,alpha:H$a.isAlpha,antialias:H$a.isAntialias,premultipliedAlpha:H$a.premultipliedAlpha,preserveDrawingBuffer:H$a.preserveDrawingBuffer})}catch(H$f){}if(H$K)return H$K}return null},null==(H$E.mainContext=H$E.mainContext||H$C.getWebGLContext(H$A._mainCanvas)))return!1;if(H$A.isWebGL)return!0;H$$.create=function(H$f,H$K){return new H$fK(H$f,H$K)},H$h.create=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){return new H$pf(H$f,H$K,H$Y,H$X,H$L,H$H,H$E)},H$A.WebGL=H$E,H$A.isWebGL=!0,H$lf.__init__(),H$C.createRenderSprite=function(H$f,H$K){return new H$nf(H$f,H$K)},H$C.createWebGLContext2D=function(H$f){return new H$af(H$f)},H$C.changeWebGLSize=function(H$f,H$K){laya.webgl.WebGL.onStageResize(H$f,H$K)},H$C.createGraphics=function(){return new H$sf};var H$f=H$C.createFilterAction;return H$C.createFilterAction=H$f||function(H$f){return new H$_f},H$C.clear=function(H$f){H$xf.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var H$K=H$A.context.ctx,H$Y=0==H$K._submits._length||H$a.preserveDrawingBuffer?H$B.create(H$f)._color:H$R._wgColor;H$Y&&H$K.clearBG(H$Y[0],H$Y[1],H$Y[2],H$Y[3]),H$xf.clear()},H$C.addToAtlas=function(H$f,H$K){void 0===H$K&&(H$K=!1);var H$Y=H$f.bitmap;H$A.optimizeTextureMemory(H$f.url,H$f)?H$s.__typeof(H$Y,"laya.webgl.resource.IMergeAtlasBitmap")&&H$Y.allowMerageInAtlas&&H$Y.on("recovered",H$f,H$f.addTextureToAtlas):H$Y.enableMerageInAtlas=!1},H$C.isAtlas=function(H$f){return H$f instanceof laya.webgl.atlas.AtlasWebGLCanvas},H$J._enable(),H$C.beginFlush=function(){for(var H$f=H$J.instance,H$K=H$f.getAtlaserCount(),H$Y=0;H$Y<H$K;H$Y++){var H$X=H$f.getAtlaserByIndex(H$Y).texture;H$X._flashCacheImageNeedFlush&&H$C.flashFlushImage(H$X)}},H$C.drawToCanvas=function(H$f,H$K,H$Y,H$X,H$L,H$H){(H$Y<=0||H$X<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),H$Y|=0,H$X|=0,H$L|=0,H$H|=0;var H$E=H$Wf.create(H$Y,H$X,6408,5121,0,!1);H$E.start(),H$E.clear(0,0,0,0),H$A.context.clear(),H$x.renders[H$K]._fun(H$f,H$A.context,H$L,H$xf.height-H$X+H$H),H$A.context.flush(),H$E.end();var H$d=H$E.getData(0,0,H$Y,H$X);if(H$E.recycle(),H$d.byteLength==H$Y*H$X*4){var H$O=new H$vf;H$O._canvas=H$l.createElement("canvas"),H$O.size(H$Y,H$X);var H$i=H$O._canvas.getContext("2d");H$l.canvas.size(H$Y,H$X);var H$U=H$l.context,H$Z=H$U.createImageData(H$Y,H$X);return H$Z.data.set(new Uint8ClampedArray(H$d.buffer)),H$O._imgData=H$Z,H$U.putImageData(H$Z,0,0),H$i.save(),H$i.translate(0,H$X),H$i.scale(1,-1),H$i.drawImage(H$l.canvas.source,0,0),H$i.restore(),H$O}console.log("drawToCanvas error: w:"+H$Y+",h:"+H$X+",datalen:"+H$d.byteLength)},H$C.createFilterAction=function(H$f){var H$K;switch(H$f){case 32:H$K=new H$_f}return H$K},H$C.addTextureToAtlas=function(H$f){H$f._uvID++,H$J._atlasRestore++,H$f.bitmap.enableMerageInAtlas&&H$J.instance.addToAtlas(H$f)},H$C.getTexturePixels=function(H$f,H$K,H$Y,H$X,H$L){H$A.context.ctx.clear();var H$H=new H$m;H$H.graphics.drawTexture(H$f,-H$K,-H$Y);var H$E=H$Wf.create(H$X,H$L);H$E.start(),H$E.clear(0,0,0,0),H$H.render(H$A.context,0,0),H$A.context.ctx.flush(),H$E.end();for(var H$d=H$E.getData(0,0,H$X,H$L),H$O=[],H$i=0,H$U=H$L-1;0<=H$U;H$U--)for(var H$Z=0;H$Z<H$X;H$Z++)H$i=4*(H$U*H$X+H$Z),H$O.push(H$d[H$i]),H$O.push(H$d[H$i+1]),H$O.push(H$d[H$i+2]),H$O.push(H$d[H$i+3]);return H$O},H$C.skinAniSprite=function(){return new H$ff},H$i.create=function(H$f,H$K){var H$Y=new H$vf;return H$Y._imgData=H$K,H$Y.flipY=!1,H$Y},H$I._filterStart=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$f.getValue("bounds"),H$E=H$Wf.create(H$H.width,H$H.height);if(H$E.start(),H$E.clear(0,0,0,0),H$f.addValue("src",H$E),H$f.addValue("ScissorTest",H$xf.worldScissorTest),H$xf.worldScissorTest){var H$d=new H$G;H$d.copyFrom(H$Y.ctx._clipRect),H$f.addValue("clipRect",H$d),H$xf.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},H$I._filterEnd=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$f.getValue("bounds");H$f.getValue("src").end();var H$E=H$Wf.create(H$H.width,H$H.height);H$E.start(),H$E.clear(0,0,0,0),H$f.addValue("out",H$E),H$K._set$P("_filterCache",H$E),H$K._set$P("_isHaveGlowFilter",H$f.getValue("_isHaveGlowFilter"))},H$I._EndTarget=function(H$f,H$K){if(H$f.getValue("src").recycle(),H$f.getValue("out").end(),H$f.getValue("ScissorTest")){H$xf.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),H$K.ctx.save();var H$Y=H$f.getValue("clipRect");H$K.ctx.clipRect(H$Y.x,H$Y.y,H$Y.width,H$Y.height)}},H$I._useSrc=function(H$f){var H$K=H$f.getValue("out");H$K.end(),(H$K=H$f.getValue("src")).start(),H$K.clear(0,0,0,0)},H$I._endSrc=function(H$f){H$f.getValue("src").end()},H$I._useOut=function(H$f){var H$K=H$f.getValue("src");H$K.end(),(H$K=H$f.getValue("out")).start(),H$K.clear(0,0,0,0)},H$I._endOut=function(H$f){H$f.getValue("out").end()},H$I._recycleScope=function(H$f){H$f.recycle()},H$I._filter=function(H$f,H$K,H$Y,H$X){var H$L=this._next;if(H$L){var H$H,H$E,H$d=H$f.filters,H$O=H$d.length;if(1==H$O&&32==H$d[0].type)return H$K.ctx.save(),H$K.ctx.setFilters([H$d[0]]),H$L._fun.call(H$L,H$f,H$K,H$Y,H$X),void H$K.ctx.restore();var H$i=H$df.create(),H$U=H$_.TEMP,H$Z=H$K.ctx._getTransformMatrix(),H$y=H$n.create();H$Z.copyTo(H$y);var H$l=0,H$B=0,H$$=!1,H$h=H$f._$P._filterCache?H$f._$P._filterCache:null;if(!H$h||H$f._repaint){H$$=H$f._isHaveGlowFilter(),H$i.addValue("_isHaveGlowFilter",H$$),H$$&&(H$l=50,H$B=25),(H$E=new H$G).copyFrom(H$f.getSelfBounds()),H$E.x+=H$f.x,H$E.y+=H$f.y,H$E.x-=H$f.pivotX+4,H$E.y-=H$f.pivotY+4;var H$A=H$E.x,H$x=H$E.y;if(H$E.width+=H$l+8,H$E.height+=H$l+8,H$U.x=H$E.x*H$y.a+H$E.y*H$y.c,H$U.y=H$E.y*H$y.d+H$E.x*H$y.b,H$E.x=H$U.x,H$E.y=H$U.y,H$U.x=H$E.width*H$y.a+H$E.height*H$y.c,H$U.y=H$E.height*H$y.d+H$E.width*H$y.b,H$E.width=H$U.x,H$E.height=H$U.y,H$E.width<=0||H$E.height<=0)return;H$h&&H$h.recycle(),H$i.addValue("bounds",H$E);var H$S=H$Ef.create([H$i,H$f,H$K,0,0],H$I._filterStart);H$K.addRenderObject(H$S),H$K.ctx._renderKey=0,H$K.ctx._shader2D.glTexture=null;var H$z=H$f.x-H$A+H$B,H$C=H$f.y-H$x+H$B;H$L._fun.call(H$L,H$f,H$K,H$z,H$C),H$S=H$Ef.create([H$i,H$f,H$K,0,0],H$I._filterEnd),H$K.addRenderObject(H$S);for(var H$s=0;H$s<H$O;H$s++){0!=H$s&&(H$S=H$Ef.create([H$i],H$I._useSrc),H$K.addRenderObject(H$S),H$H=H$If.create(1,0),H$n.TEMP.identity(),H$K.ctx.drawTarget(H$i,0,0,H$E.width,H$E.height,H$n.TEMP,"out",H$H,null,H$w.TOINT.overlay),H$S=H$Ef.create([H$i],H$I._useOut),H$K.addRenderObject(H$S)),H$d[H$s].action.apply3d(H$i,H$f,H$K,0,0)}H$S=H$Ef.create([H$i,H$K],H$I._EndTarget),H$K.addRenderObject(H$S)}else{if((H$$=!!H$f._$P._isHaveGlowFilter&&H$f._$P._isHaveGlowFilter)&&(H$l=50,H$B=25),(H$E=H$f.getBounds()).width<=0||H$E.height<=0)return;H$E.width+=H$l,H$E.height+=H$l,H$U.x=H$E.x*H$y.a+H$E.y*H$y.c,H$U.y=H$E.y*H$y.d+H$E.x*H$y.b,H$E.x=H$U.x,H$E.y=H$U.y,H$U.x=H$E.width*H$y.a+H$E.height*H$y.c,H$U.y=H$E.height*H$y.d+H$E.width*H$y.b,H$E.width=H$U.x,H$E.height=H$U.y,H$i.addValue("out",H$h)}H$Y=H$Y-H$B-H$f.x,H$X=H$X-H$B-H$f.y,H$U.setTo(H$Y,H$X),H$y.transformPoint(H$U),H$Y=H$U.x+H$E.x,H$X=H$U.y+H$E.y,H$H=H$If.create(1,0),H$n.TEMP.identity(),H$K.ctx.drawTarget(H$i,H$Y,H$X,H$E.width,H$E.height,H$n.TEMP,"out",H$H,null,H$w.TOINT.overlay),H$S=H$Ef.create([H$i],H$I._recycleScope),H$K.addRenderObject(H$S),H$y.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=H$E._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=H$E._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=H$E._uint8ArraySlice),!0},H$E.onStageResize=function(H$f,H$K){null!=H$E.mainContext&&(H$E.mainContext.viewport(0,0,H$f,H$K),H$xf.width=H$f,H$xf.height=H$K)},H$E.onInvalidGLRes=function(){H$J.instance.freeAll(),H$z.releaseContentManagers(!0),H$E.doNodeRepaint(H$s.stage),H$E.mainContext.viewport(0,0,H$xf.width,H$xf.height),H$s.stage.event("devicelost")},H$E.doNodeRepaint=function(H$f){0==H$f.numChildren&&H$f.repaint();for(var H$K=0;H$K<H$f.numChildren;H$K++)H$E.doNodeRepaint(H$f.getChildAt(H$K))},H$E.init=function(H$f,H$K,H$Y){H$E.mainCanvas=H$f,H$i._createContext=function(H$f){return new H$af(H$f)},H$vf._createContext=function(H$f){return new H$af(H$f)};var H$X=laya.webgl.WebGL.mainContext;if(null!=H$X.getShaderPrecisionFormat){var H$L=H$X.getShaderPrecisionFormat(35633,36338),H$H=H$X.getShaderPrecisionFormat(35632,36338);H$E.shaderHighPrecision=!(!H$L.precision||!H$H.precision)}else H$E.shaderHighPrecision=!1;if(H$E.compressAstc=H$X.getExtension("WEBGL_compressed_texture_astc"),H$E.compressAtc=H$X.getExtension("WEBGL_compressed_texture_atc"),H$E.compressEtc=H$X.getExtension("WEBGL_compressed_texture_etc"),H$E.compressEtc1=H$X.getExtension("WEBGL_compressed_texture_etc1"),H$E.compressPvrtc=H$X.getExtension("WEBGL_compressed_texture_pvrtc"),H$E.compressS3tc=H$X.getExtension("WEBGL_compressed_texture_s3tc"),H$E.compressS3tc_srgb=H$X.getExtension("WEBGL_compressed_texture_s3tc_srgb"),H$E.compressAstc=H$E.compressAstc?H$E.compressAstc:{},H$E.compressAtc=H$E.compressAtc?H$E.compressAtc:{},H$E.compressEtc=H$E.compressEtc?H$E.compressEtc:{},H$E.compressEtc1=H$E.compressEtc1?H$E.compressEtc1:{},H$E.compressPvrtc=H$E.compressPvrtc?H$E.compressPvrtc:{},H$E.compressS3tc=H$E.compressS3tc?H$E.compressS3tc:{},H$E.compressS3tc_srgb=H$E.compressS3tc_srgb?H$E.compressS3tc_srgb:{},H$X.deleteTexture1=H$X.deleteTexture,H$X.deleteTexture=function(H$f){H$f==H$Cf.curBindTexValue&&(H$Cf.curBindTexValue=null),H$X.deleteTexture1(H$f)},H$E.onStageResize(H$K,H$Y),null==H$E.mainContext)throw new Error("webGL getContext err!");H$T.__init__(),H$J.__init__(),H$mf.__init__(),H$Hf.__init__(),H$af.__init__(),H$If.__init__(),H$o.__init__(),H$Df.__int__(H$X),H$w._init_(H$X),H$A.isConchApp&&conch.setOnInvalidGLRes(H$E.onInvalidGLRes)},H$E.mainCanvas=null,H$E.antialias=!0,H$E.shaderHighPrecision=!1,H$E._bg_null=[0,0,0,0],H$E}(),H$Cf=function(){function H$X(){}return H$y(H$X,"laya.webgl.WebGLContext"),H$X.UseProgram=function(H$f){return H$X._useProgram!==H$f&&(H$zf.mainContext.useProgram(H$f),H$X._useProgram=H$f,!0)},H$X.setDepthTest=function(H$f,H$K){H$K!==H$X._depthTest&&((H$X._depthTest=H$K)?H$f.enable(2929):H$f.disable(2929))},H$X.setDepthMask=function(H$f,H$K){H$K!==H$X._depthMask&&(H$X._depthMask=H$K,H$f.depthMask(H$K))},H$X.setDepthFunc=function(H$f,H$K){H$K!==H$X._depthFunc&&(H$X._depthFunc=H$K,H$f.depthFunc(H$K))},H$X.setBlend=function(H$f,H$K){H$K!==H$X._blend&&((H$X._blend=H$K)?H$f.enable(3042):H$f.disable(3042))},H$X.setBlendFunc=function(H$f,H$K,H$Y){(H$K!==H$X._sFactor||H$Y!==H$X._dFactor)&&(H$X._sFactor=H$K,H$X._dFactor=H$Y,H$f.blendFunc(H$K,H$Y))},H$X.setCullFace=function(H$f,H$K){H$K!==H$X._cullFace&&((H$X._cullFace=H$K)?H$f.enable(2884):H$f.disable(2884))},H$X.setFrontFace=function(H$f,H$K){H$K!==H$X._frontFace&&(H$X._frontFace=H$K,H$f.frontFace(H$K))},H$X.bindTexture=function(H$f,H$K,H$Y){H$f.bindTexture(H$K,H$Y),H$X.curBindTexTarget=H$K,H$X.curBindTexValue=H$Y},H$X.DEPTH_BUFFER_BIT=256,H$X.STENCIL_BUFFER_BIT=1024,H$X.COLOR_BUFFER_BIT=16384,H$X.POINTS=0,H$X.LINES=1,H$X.LINE_LOOP=2,H$X.LINE_STRIP=3,H$X.TRIANGLES=4,H$X.TRIANGLE_STRIP=5,H$X.TRIANGLE_FAN=6,H$X.ZERO=0,H$X.ONE=1,H$X.SRC_COLOR=768,H$X.ONE_MINUS_SRC_COLOR=769,H$X.SRC_ALPHA=770,H$X.ONE_MINUS_SRC_ALPHA=771,H$X.DST_ALPHA=772,H$X.ONE_MINUS_DST_ALPHA=773,H$X.DST_COLOR=774,H$X.ONE_MINUS_DST_COLOR=775,H$X.SRC_ALPHA_SATURATE=776,H$X.FUNC_ADD=32774,H$X.BLEND_EQUATION=32777,H$X.BLEND_EQUATION_RGB=32777,H$X.BLEND_EQUATION_ALPHA=34877,H$X.FUNC_SUBTRACT=32778,H$X.FUNC_REVERSE_SUBTRACT=32779,H$X.BLEND_DST_RGB=32968,H$X.BLEND_SRC_RGB=32969,H$X.BLEND_DST_ALPHA=32970,H$X.BLEND_SRC_ALPHA=32971,H$X.CONSTANT_COLOR=32769,H$X.ONE_MINUS_CONSTANT_COLOR=32770,H$X.CONSTANT_ALPHA=32771,H$X.ONE_MINUS_CONSTANT_ALPHA=32772,H$X.BLEND_COLOR=32773,H$X.ARRAY_BUFFER=34962,H$X.ELEMENT_ARRAY_BUFFER=34963,H$X.ARRAY_BUFFER_BINDING=34964,H$X.ELEMENT_ARRAY_BUFFER_BINDING=34965,H$X.STREAM_DRAW=35040,H$X.STATIC_DRAW=35044,H$X.DYNAMIC_DRAW=35048,H$X.BUFFER_SIZE=34660,H$X.BUFFER_USAGE=34661,H$X.CURRENT_VERTEX_ATTRIB=34342,H$X.FRONT=1028,H$X.BACK=1029,H$X.CULL_FACE=2884,H$X.FRONT_AND_BACK=1032,H$X.BLEND=3042,H$X.DITHER=3024,H$X.STENCIL_TEST=2960,H$X.DEPTH_TEST=2929,H$X.SCISSOR_TEST=3089,H$X.POLYGON_OFFSET_FILL=32823,H$X.SAMPLE_ALPHA_TO_COVERAGE=32926,H$X.SAMPLE_COVERAGE=32928,H$X.NO_ERROR=0,H$X.INVALID_ENUM=1280,H$X.INVALID_VALUE=1281,H$X.INVALID_OPERATION=1282,H$X.OUT_OF_MEMORY=1285,H$X.CW=2304,H$X.CCW=2305,H$X.LINE_WIDTH=2849,H$X.ALIASED_POINT_SIZE_RANGE=33901,H$X.ALIASED_LINE_WIDTH_RANGE=33902,H$X.CULL_FACE_MODE=2885,H$X.FRONT_FACE=2886,H$X.DEPTH_RANGE=2928,H$X.DEPTH_WRITEMASK=2930,H$X.DEPTH_CLEAR_VALUE=2931,H$X.DEPTH_FUNC=2932,H$X.STENCIL_CLEAR_VALUE=2961,H$X.STENCIL_FUNC=2962,H$X.STENCIL_FAIL=2964,H$X.STENCIL_PASS_DEPTH_FAIL=2965,H$X.STENCIL_PASS_DEPTH_PASS=2966,H$X.STENCIL_REF=2967,H$X.STENCIL_VALUE_MASK=2963,H$X.STENCIL_WRITEMASK=2968,H$X.STENCIL_BACK_FUNC=34816,H$X.STENCIL_BACK_FAIL=34817,H$X.STENCIL_BACK_PASS_DEPTH_FAIL=34818,H$X.STENCIL_BACK_PASS_DEPTH_PASS=34819,H$X.STENCIL_BACK_REF=36003,H$X.STENCIL_BACK_VALUE_MASK=36004,H$X.STENCIL_BACK_WRITEMASK=36005,H$X.VIEWPORT=2978,H$X.SCISSOR_BOX=3088,H$X.COLOR_CLEAR_VALUE=3106,H$X.COLOR_WRITEMASK=3107,H$X.UNPACK_ALIGNMENT=3317,H$X.PACK_ALIGNMENT=3333,H$X.MAX_TEXTURE_SIZE=3379,H$X.MAX_VIEWPORT_DIMS=3386,H$X.SUBPIXEL_BITS=3408,H$X.RED_BITS=3410,H$X.GREEN_BITS=3411,H$X.BLUE_BITS=3412,H$X.ALPHA_BITS=3413,H$X.DEPTH_BITS=3414,H$X.STENCIL_BITS=3415,H$X.POLYGON_OFFSET_UNITS=10752,H$X.POLYGON_OFFSET_FACTOR=32824,H$X.TEXTURE_BINDING_2D=32873,H$X.SAMPLE_BUFFERS=32936,H$X.SAMPLES=32937,H$X.SAMPLE_COVERAGE_VALUE=32938,H$X.SAMPLE_COVERAGE_INVERT=32939,H$X.NUM_COMPRESSED_TEXTURE_FORMATS=34466,H$X.COMPRESSED_TEXTURE_FORMATS=34467,H$X.DONT_CARE=4352,H$X.FASTEST=4353,H$X.NICEST=4354,H$X.GENERATE_MIPMAP_HINT=33170,H$X.BYTE=5120,H$X.UNSIGNED_BYTE=5121,H$X.SHORT=5122,H$X.UNSIGNED_SHORT=5123,H$X.INT=5124,H$X.UNSIGNED_INT=5125,H$X.FLOAT=5126,H$X.DEPTH_COMPONENT=6402,H$X.ALPHA=6406,H$X.RGB=6407,H$X.RGBA=6408,H$X.LUMINANCE=6409,H$X.LUMINANCE_ALPHA=6410,H$X.UNSIGNED_SHORT_4_4_4_4=32819,H$X.UNSIGNED_SHORT_5_5_5_1=32820,H$X.UNSIGNED_SHORT_5_6_5=33635,H$X.FRAGMENT_SHADER=35632,H$X.VERTEX_SHADER=35633,H$X.MAX_VERTEX_ATTRIBS=34921,H$X.MAX_VERTEX_UNIFORM_VECTORS=36347,H$X.MAX_VARYING_VECTORS=36348,H$X.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,H$X.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,H$X.MAX_TEXTURE_IMAGE_UNITS=34930,H$X.MAX_FRAGMENT_UNIFORM_VECTORS=36349,H$X.SHADER_TYPE=35663,H$X.DELETE_STATUS=35712,H$X.LINK_STATUS=35714,H$X.VALIDATE_STATUS=35715,H$X.ATTACHED_SHADERS=35717,H$X.ACTIVE_UNIFORMS=35718,H$X.ACTIVE_ATTRIBUTES=35721,H$X.SHADING_LANGUAGE_VERSION=35724,H$X.CURRENT_PROGRAM=35725,H$X.NEVER=512,H$X.LESS=513,H$X.EQUAL=514,H$X.LEQUAL=515,H$X.GREATER=516,H$X.NOTEQUAL=517,H$X.GEQUAL=518,H$X.ALWAYS=519,H$X.KEEP=7680,H$X.REPLACE=7681,H$X.INCR=7682,H$X.DECR=7683,H$X.INVERT=5386,H$X.INCR_WRAP=34055,H$X.DECR_WRAP=34056,H$X.VENDOR=7936,H$X.RENDERER=7937,H$X.VERSION=7938,H$X.NEAREST=9728,H$X.LINEAR=9729,H$X.NEAREST_MIPMAP_NEAREST=9984,H$X.LINEAR_MIPMAP_NEAREST=9985,H$X.NEAREST_MIPMAP_LINEAR=9986,H$X.LINEAR_MIPMAP_LINEAR=9987,H$X.TEXTURE_MAG_FILTER=10240,H$X.TEXTURE_MIN_FILTER=10241,H$X.TEXTURE_WRAP_S=10242,H$X.TEXTURE_WRAP_T=10243,H$X.TEXTURE_2D=3553,H$X.TEXTURE=5890,H$X.TEXTURE_CUBE_MAP=34067,H$X.TEXTURE_BINDING_CUBE_MAP=34068,H$X.TEXTURE_CUBE_MAP_POSITIVE_X=34069,H$X.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,H$X.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,H$X.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,H$X.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,H$X.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,H$X.MAX_CUBE_MAP_TEXTURE_SIZE=34076,H$X.TEXTURE0=33984,H$X.TEXTURE1=33985,H$X.TEXTURE2=33986,H$X.TEXTURE3=33987,H$X.TEXTURE4=33988,H$X.TEXTURE5=33989,H$X.TEXTURE6=33990,H$X.TEXTURE7=33991,H$X.TEXTURE8=33992,H$X.TEXTURE9=33993,H$X.TEXTURE10=33994,H$X.TEXTURE11=33995,H$X.TEXTURE12=33996,H$X.TEXTURE13=33997,H$X.TEXTURE14=33998,H$X.TEXTURE15=33999,H$X.TEXTURE16=34e3,H$X.TEXTURE17=34001,H$X.TEXTURE18=34002,H$X.TEXTURE19=34003,H$X.TEXTURE20=34004,H$X.TEXTURE21=34005,H$X.TEXTURE22=34006,H$X.TEXTURE23=34007,H$X.TEXTURE24=34008,H$X.TEXTURE25=34009,H$X.TEXTURE26=34010,H$X.TEXTURE27=34011,H$X.TEXTURE28=34012,H$X.TEXTURE29=34013,H$X.TEXTURE30=34014,H$X.TEXTURE31=34015,H$X.ACTIVE_TEXTURE=34016,H$X.REPEAT=10497,H$X.CLAMP_TO_EDGE=33071,H$X.MIRRORED_REPEAT=33648,H$X.FLOAT_VEC2=35664,H$X.FLOAT_VEC3=35665,H$X.FLOAT_VEC4=35666,H$X.INT_VEC2=35667,H$X.INT_VEC3=35668,H$X.INT_VEC4=35669,H$X.BOOL=35670,H$X.BOOL_VEC2=35671,H$X.BOOL_VEC3=35672,H$X.BOOL_VEC4=35673,H$X.FLOAT_MAT2=35674,H$X.FLOAT_MAT3=35675,H$X.FLOAT_MAT4=35676,H$X.SAMPLER_2D=35678,H$X.SAMPLER_CUBE=35680,H$X.VERTEX_ATTRIB_ARRAY_ENABLED=34338,H$X.VERTEX_ATTRIB_ARRAY_SIZE=34339,H$X.VERTEX_ATTRIB_ARRAY_STRIDE=34340,H$X.VERTEX_ATTRIB_ARRAY_TYPE=34341,H$X.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,H$X.VERTEX_ATTRIB_ARRAY_POINTER=34373,H$X.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,H$X.COMPILE_STATUS=35713,H$X.LOW_FLOAT=36336,H$X.MEDIUM_FLOAT=36337,H$X.HIGH_FLOAT=36338,H$X.LOW_INT=36339,H$X.MEDIUM_INT=36340,H$X.HIGH_INT=36341,H$X.FRAMEBUFFER=36160,H$X.RENDERBUFFER=36161,H$X.RGBA4=32854,H$X.RGB5_A1=32855,H$X.RGB565=36194,H$X.DEPTH_COMPONENT16=33189,H$X.STENCIL_INDEX=6401,H$X.STENCIL_INDEX8=36168,H$X.DEPTH_STENCIL=34041,H$X.RENDERBUFFER_WIDTH=36162,H$X.RENDERBUFFER_HEIGHT=36163,H$X.RENDERBUFFER_INTERNAL_FORMAT=36164,H$X.RENDERBUFFER_RED_SIZE=36176,H$X.RENDERBUFFER_GREEN_SIZE=36177,H$X.RENDERBUFFER_BLUE_SIZE=36178,H$X.RENDERBUFFER_ALPHA_SIZE=36179,H$X.RENDERBUFFER_DEPTH_SIZE=36180,H$X.RENDERBUFFER_STENCIL_SIZE=36181,H$X.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,H$X.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,H$X.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,H$X.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,H$X.COLOR_ATTACHMENT0=36064,H$X.DEPTH_ATTACHMENT=36096,H$X.STENCIL_ATTACHMENT=36128,H$X.DEPTH_STENCIL_ATTACHMENT=33306,H$X.NONE=0,H$X.FRAMEBUFFER_COMPLETE=36053,H$X.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,H$X.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,H$X.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,H$X.FRAMEBUFFER_UNSUPPORTED=36061,H$X.FRAMEBUFFER_BINDING=36006,H$X.RENDERBUFFER_BINDING=36007,H$X.MAX_RENDERBUFFER_SIZE=34024,H$X.INVALID_FRAMEBUFFER_OPERATION=1286,H$X.UNPACK_FLIP_Y_WEBGL=37440,H$X.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,H$X.CONTEXT_LOST_WEBGL=37442,H$X.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,H$X.BROWSER_DEFAULT_WEBGL=37444,H$X._useProgram=null,H$X._depthTest=!0,H$X._depthMask=!0,H$X._blend=!1,H$X._cullFace=!1,H$X.curBindTexTarget=null,H$X.curBindTexValue=null,H$E(H$X,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),H$X}(),H$sf=function(H$f){function H$K(){H$K.__super.call(this)}H$y(H$K,"laya.webgl.display.GraphicsGL",H$d);var H$Y=H$K.prototype;return H$Y.setShader=function(H$f){this._saveToCmd(H$A.context._setShader,[H$f])},H$Y.setIBVB=function(H$f,H$K,H$Y,H$X,H$L,H$H){this._saveToCmd(H$A.context._setIBVB,[H$f,H$K,H$Y,H$X,H$L,H$H])},H$Y.drawParticle=function(H$f,H$K,H$Y){var H$X=H$C.createParticleTemplate2D(H$Y);H$X.x=H$f,H$X.y=H$K,this._saveToCmd(H$A.context._drawParticle,[H$X])},H$K}(),H$af=function(H$f){var H$Y;function H$b(H$f){this._x=0,this._y=0,this._id=++H$b._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,H$b.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=H$b.MAXCLIPRECT,this.mOutPoint,this._canvas=H$f,this._canvas._addReference(),H$b._contextcount++,H$A.isFlash?(this._ib=H$of.create(35044),H$hf.fillIBQuadrangle(this._ib,16)):this._ib=H$of.QuadrangleIB,this.clear()}H$y(H$b,"laya.webgl.canvas.WebGLContext2D",H$L);var H$K=H$b.prototype;return H$K.setIsMainContext=function(){this._isMain=!0},H$K.clearBG=function(H$f,H$K,H$Y,H$X){var H$L=H$zf.mainContext;H$L.clearColor(H$f,H$K,H$Y,H$X),H$L.clear(16384)},H$K._getSubmits=function(){return this._submits},H$K._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var H$f=0,H$K=this._submits._length;H$f<H$K;H$f++)this._submits[H$f].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},H$K.destroy=function(){--H$b._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=H$of.QuadrangleIB&&this._ib.releaseResource()},H$K.clear=function(){this._submits||(this._other=H$Y.DEFAULT,this._curMat=H$n.create(),this._vb=H$Ff.create(-1),this._submits=[],this._save=[H$u.Create(this)],this._save.length=10,this._shader2D=new H$o,this._triangleMesh=H$ef.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=H$Y.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=H$b.MAXCLIPRECT,this._curSubmit=H$Hf.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=H$r.DEFAULT;for(var H$f=0,H$K=this._submits._length;H$f<H$K;H$f++)this._submits[H$f].releaseRender(),this._submits[H$f]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},H$K.size=function(H$f,H$K){if(this._width!=H$f||this._height!=H$K)if(0==H$f||0==H$K){0!=this._vb._byteLength&&(this._width=H$f,this._height=H$K,this._vb.clear(),this._vb.upload());for(var H$Y=0,H$X=this._submits._length;H$Y<H$X;H$Y++)this._submits[H$Y].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=H$f,this._height=H$K,this._targets&&this._targets.size(H$f,H$K),this._canvas.memorySize-=this._canvas.memorySize;0===H$f&&0===H$K&&this._releaseMem()},H$K._getTransformMatrix=function(){return this._curMat},H$K.translate=function(H$f,H$K){0===H$f&&0===H$K||(H$g.save(this),this._curMat.bTransform&&(H$D.save(this),this._curMat.transformPointN(H$_.TEMP.setTo(H$f,H$K)),H$f=H$_.TEMP.x,H$K=H$_.TEMP.y),this._x+=H$f,this._y+=H$K)},H$K.save=function(){this._save[this._save._length++]=H$u.Create(this)},H$K.restore=function(){var H$f=this._save._length;if(!(H$f<1))for(var H$K=H$f-1;0<=H$K;H$K--){var H$Y=this._save[H$K];if(H$Y.restore(this),H$Y.isSaveMark())return void(this._save._length=H$K)}},H$K._fillText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){void 0===H$i&&(H$i=0);var H$U=this._shader2D,H$Z=this._curSubmit.shaderValue,H$y=H$L?H$Bf.create(H$L):this._other.font;if(H$J.enabled)H$U.ALPHA!==H$Z.ALPHA&&(H$U.glTexture=null),H$lf.drawText(this,H$f,H$K,this._curMat,H$y,H$O||this._other.textAlign,H$H,H$E,H$d,H$Y,H$X,H$i);else{this._shader2D.defines.getValue();var H$l=H$H?H$B.create(H$H)._color:H$U.colorAdd;H$U.ALPHA===H$Z.ALPHA&&H$l===H$U.colorAdd&&H$Z.colorAdd===H$U.colorAdd||(H$U.glTexture=null,H$U.colorAdd=H$l),H$lf.drawText(this,H$f,H$K,this._curMat,H$y,H$O||this._other.textAlign,H$H,H$E,H$d,H$Y,H$X,H$i)}},H$K.fillWords=function(H$f,H$K,H$Y,H$X,H$L,H$H){this._fillText(null,H$f,H$K,H$Y,H$X,H$L,null,-1,null,H$H)},H$K.fillBorderWords=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this._fillBorderText(null,H$f,H$K,H$Y,H$X,H$L,H$H,H$E,null)},H$K.fillText=function(H$f,H$K,H$Y,H$X,H$L,H$H){this._fillText(H$f,null,H$K,H$Y,H$X,H$L,null,-1,H$H)},H$K.strokeText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this._fillText(H$f,null,H$K,H$Y,H$X,null,H$L,H$H||1,H$E)},H$K.fillBorderText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){this._fillBorderText(H$f,null,H$K,H$Y,H$X,H$L,H$H,H$E,H$d)},H$K._fillBorderText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){if(!H$J.enabled)return this._fillText(H$f,H$K,H$Y,H$X,H$L,null,H$E,H$d||1,H$O),void this._fillText(H$f,H$K,H$Y,H$X,H$L,H$H,null,-1,H$O);var H$i=this._shader2D,H$U=this._curSubmit.shaderValue;H$i.ALPHA!==H$U.ALPHA&&(H$i.glTexture=null);var H$Z=H$L?(H$b._fontTemp.setFont(H$L),H$b._fontTemp):this._other.font;H$lf.drawText(this,H$f,H$K,this._curMat,H$Z,H$O||this._other.textAlign,H$H,H$E,H$d||1,H$Y,H$X,0)},H$K.fillRect=function(H$f,H$K,H$Y,H$X,H$L){var H$H=this._vb;if(H$hf.fillRectImgVb(H$H,this._clipRect,H$f,H$K,H$Y,H$X,H$e.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var H$E=this._shader2D.fillStyle;H$L&&(this._shader2D.fillStyle=H$r.create(H$L));var H$d=this._shader2D,H$O=this._curSubmit.shaderValue;if(H$d.fillStyle!==H$O.fillStyle||H$d.ALPHA!==H$O.ALPHA){H$d.glTexture=null;var H$i=this._curSubmit=H$Hf.createSubmit(this,this._ib,H$H,(H$H._byteLength-64)/32*3,H$If.create(2,0));H$i.shaderValue.color=H$d.fillStyle._color._color,H$i.shaderValue.ALPHA=H$d.ALPHA,this._submits[this._submits._length++]=H$i}this._curSubmit._numEle+=6,this._shader2D.fillStyle=H$E}},H$K.fillTexture=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){if(H$f.loaded&&H$f.bitmap&&H$f.source){var H$O=this._vb,H$i=H$f.bitmap.width,H$U=H$f.bitmap.height,H$Z=H$f.uv,H$y=H$E.x%H$f.width,H$l=H$E.y%H$f.height;if(H$i!=H$d.w||H$U!=H$d.h){if(!H$d.w&&!H$d.h)switch(H$d.oy=H$d.ox=0,H$H){case"repeat":H$d.width=H$X,H$d.height=H$L;break;case"repeat-x":H$d.width=H$X,H$l<0?H$f.height+H$l>H$L?H$d.height=H$L:H$d.height=H$f.height+H$l:(H$d.oy=H$l,H$f.height+H$l>H$L?H$d.height=H$L-H$l:H$d.height=H$f.height);break;case"repeat-y":H$y<0?H$f.width+H$y>H$X?H$d.width=H$X:H$d.width=H$f.width+H$y:(H$d.ox=H$y,H$f.width+H$y>H$X?H$d.width=H$X-H$y:H$d.width=H$f.width),H$d.height=H$L;break;case"no-repeat":H$y<0?H$f.width+H$y>H$X?H$d.width=H$X:H$d.width=H$f.width+H$y:(H$d.ox=H$y,H$f.width+H$y>H$X?H$d.width=H$X-H$y:H$d.width=H$f.width),H$l<0?H$f.height+H$l>H$L?H$d.height=H$L:H$d.height=H$f.height+H$l:(H$d.oy=H$l,H$f.height+H$l>H$L?H$d.height=H$L-H$l:H$d.height=H$f.height);break;default:H$d.width=H$X,H$d.height=H$L}H$d.w=H$i,H$d.h=H$U,H$d.uv=[0,0,H$d.width/H$i,0,H$d.width/H$i,H$d.height/H$U,0,H$d.height/H$U]}if(H$K+=H$d.ox,H$Y+=H$d.oy,H$y-=H$d.ox,H$l-=H$d.oy,H$hf.fillRectImgVb(H$O,this._clipRect,H$K,H$Y,H$d.width,H$d.height,H$d.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var H$B=H$kf.create(this,this._ib,H$O,(H$O._byteLength-64)/32*3,H$If.create(256,0)),H$$=(this._submits[this._submits._length++]=H$B).shaderValue;H$$.textureHost=H$f;var H$h=H$Z[0]*H$i,H$A=H$Z[1]*H$U,H$x=(H$Z[2]-H$Z[0])*H$i,H$S=(H$Z[5]-H$Z[3])*H$U,H$z=-H$y/H$i,H$C=-H$l/H$U;H$$.u_TexRange[0]=H$h/H$i,H$$.u_TexRange[1]=H$x/H$i,H$$.u_TexRange[2]=H$A/H$U,H$$.u_TexRange[3]=H$S/H$U,H$$.u_offset[0]=H$z,H$$.u_offset[1]=H$C,H$J.enabled&&!this._isMain&&H$B.addTexture(H$f,(H$O._byteLength>>2)-16),(this._curSubmit=H$B)._renderType=10017,H$B._numEle+=6}}else this.sprite&&H$s.timer.callLater(this,this._repaintSprite)},H$K.setShader=function(H$f){H$j.save(this,1048576,this._shader2D,!0),this._shader2D.shader=H$f},H$K.setFilters=function(H$f){H$j.save(this,2097152,this._shader2D,!0),this._shader2D.filters=H$f,this._curSubmit=H$Hf.RENDERBASE,this._renderKey=0,this._drawCount++},H$K.drawTexture=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this._drawTextureM(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,null,1)},H$K.addTextureVb=function(H$f,H$K,H$Y){var H$X=this._curSubmit._vb||this._vb,H$L=H$X._byteLength>>2;H$X.byteLength=H$L+16<<2;for(var H$H=H$X.getFloat32Array(),H$E=0;H$E<16;H$E+=4)H$H[H$L++]=H$f[H$E]+H$K,H$H[H$L++]=H$f[H$E+1]+H$Y,H$H[H$L++]=H$f[H$E+2],H$H[H$L++]=H$f[H$E+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),H$X._upload=!0},H$K.willDrawTexture=function(H$f,H$K){if(!(H$f.loaded&&H$f.bitmap&&H$f.source))return this.sprite&&H$s.timer.callLater(this,this._repaintSprite),0;var H$Y=H$f.bitmap,H$X=H$Y.id+this._shader2D.ALPHA*H$K+10016;if(H$X==this._renderKey)return H$X;var H$L=this._shader2D,H$H=H$L.ALPHA,H$E=this._curSubmit.shaderValue;H$L.ALPHA*=H$K,this._renderKey=H$X,this._drawCount++,H$L.glTexture=H$Y;var H$d=this._vb,H$O=null,H$i=H$d._byteLength/32*3,H$U=H$E.textureHost&&H$E.textureHost==H$f&&H$E.textureHost.alphaTexture==H$f.alphaTexture;return H$O=H$kf.create(this,this._ib,H$d,H$i,H$If.create(1,0)),(this._submits[this._submits._length++]=H$O).shaderValue.textureHost=H$f,H$O._renderType=10016,H$O._preIsSameTextureShader=10016===this._curSubmit._renderType&&H$L.ALPHA===H$E.ALPHA&&H$U,this._curSubmit=H$O,H$L.ALPHA=H$H,H$X},H$K.drawTextures=function(H$f,H$K,H$Y,H$X){if(H$f.loaded&&H$f.bitmap&&H$f.source){var H$L=this._clipRect;if(this._clipRect=H$b.MAXCLIPRECT,this._drawTextureM(H$f,H$K[0],H$K[1],H$f.width,H$f.height,H$Y,H$X,null,1)){if(this._clipRect=H$L,H$V.drawCall++,!(H$K.length<4)){for(var H$H=this._curSubmit._vb||this._vb,H$E=this._curMat.a,H$d=this._curMat.d,H$O=2,H$i=H$K.length;H$O<H$i;H$O+=2)H$hf.copyPreImgVb(H$H,(H$K[H$O]-H$K[H$O-2])*H$E,(H$K[H$O+1]-H$K[H$O-1])*H$d),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&H$s.timer.callLater(this,this._repaintSprite)},H$K._drawTextureM=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){if(!H$f.loaded||!H$f.source)return this.sprite&&H$s.timer.callLater(this,this._repaintSprite),!1;var H$i=this._curSubmit._vb||this._vb,H$U=H$f.bitmap;H$K+=H$H,H$Y+=H$E,this._drawCount++;var H$Z=H$U.id+this._shader2D.ALPHA*H$O+10016;if(H$Z!=this._renderKey){this._renderKey=H$Z;var H$y=this._curSubmit.shaderValue,H$l=this._shader2D,H$B=H$l.ALPHA;H$l.ALPHA*=H$O,H$l.glTexture=H$U;var H$$=this._vb,H$h=null,H$A=H$$._byteLength/32*3,H$x=H$y.textureHost&&H$y.textureHost==H$f&&H$y.textureHost.alphaTexture==H$f.alphaTexture;H$h=H$kf.create(this,this._ib,H$$,H$A,H$If.create(1,0)),(this._submits[this._submits._length++]=H$h).shaderValue.textureHost=H$f,H$h._renderType=10016,H$h._preIsSameTextureShader=10016===this._curSubmit._renderType&&H$l.ALPHA===H$y.ALPHA&&H$x,this._curSubmit=H$h,H$i=this._curSubmit._vb||this._vb,H$l.ALPHA=H$B}return!!H$hf.fillRectImgVb(H$i,this._clipRect,H$K,H$Y,H$X||H$f.width,H$L||H$f.height,H$f.uv,H$d||this._curMat,this._x,this._y,0,0)&&(H$J.enabled&&!this._isMain&&this._curSubmit.addTexture(H$f,(H$i._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},H$K._repaintSprite=function(){this.sprite&&this.sprite.repaint()},H$K._drawText=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){var H$U=H$f.bitmap;this._drawCount++;var H$Z=H$U.id+this._shader2D.ALPHA+10016;if(H$Z!=this._renderKey){this._renderKey=H$Z;var H$y=this._curSubmit.shaderValue,H$l=this._shader2D;H$l.glTexture=H$U;var H$B=this._vb,H$$=null,H$h=H$B._byteLength/32*3,H$A=H$y.textureHost&&H$y.textureHost==H$f&&H$y.textureHost.alphaTexture==H$f.alphaTexture;(H$$=H$J.enabled?H$kf.create(this,this._ib,H$B,H$h,H$If.create(1,0)):H$kf.create(this,this._ib,H$B,H$h,H$gf.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&H$l.ALPHA===H$y.ALPHA&&H$A,(this._submits[this._submits._length++]=H$$).shaderValue.textureHost=H$f,H$$._renderType=10016,this._curSubmit=H$$}H$f.active();var H$x=this._curSubmit._vb||this._vb;H$hf.fillRectImgVb(H$x,this._clipRect,H$K+H$E,H$Y+H$d,H$X||H$f.width,H$L||H$f.height,H$f.uv,H$H||this._curMat,this._x,this._y,H$O,H$i,!0)&&(H$J.enabled&&!this._isMain&&this._curSubmit.addTexture(H$f,(H$x._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},H$K.drawTextureWithTransform=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){if(H$H){var H$i=this._curMat,H$U=this._x,H$Z=this._y;(0!==H$E||0!==H$d)&&(this._x=H$E*H$i.a+H$d*H$i.c,this._y=H$d*H$i.d+H$E*H$i.b),H$H&&H$i.bTransform?(H$n.mul(H$H,H$i,H$b._tmpMatrix),(H$H=H$b._tmpMatrix)._checkTransform()):(this._x+=H$i.tx,this._y+=H$i.ty),this._drawTextureM(H$f,H$K,H$Y,H$X,H$L,0,0,H$H,H$O),this._x=H$U,this._y=H$Z}else this._drawTextureM(H$f,H$K,H$Y,H$X,H$L,H$E,H$d,null,H$O)},H$K.fillQuadrangle=function(H$f,H$K,H$Y,H$X,H$L){var H$H=this._curSubmit,H$E=this._vb,H$d=this._shader2D,H$O=H$H.shaderValue;if(this._renderKey=0,H$f.bitmap){var H$i=H$f.bitmap;H$d.glTexture==H$i&&H$d.ALPHA===H$O.ALPHA||(H$d.glTexture=H$i,(H$H=this._curSubmit=H$Hf.createSubmit(this,this._ib,H$E,H$E._byteLength/32*3,H$If.create(1,0))).shaderValue.glTexture=H$i,this._submits[this._submits._length++]=H$H),H$hf.fillQuadrangleImgVb(H$E,H$K,H$Y,H$X,H$f.uv,H$L||this._curMat,this._x,this._y)}else H$H.shaderValue.fillStyle&&H$H.shaderValue.fillStyle.equal(H$f)&&H$d.ALPHA===H$O.ALPHA||(H$d.glTexture=null,(H$H=this._curSubmit=H$Hf.createSubmit(this,this._ib,H$E,H$E._byteLength/32*3,H$If.create(2,0))).shaderValue.defines.add(2),H$H.shaderValue.fillStyle=H$r.create(H$f),this._submits[this._submits._length++]=H$H),H$hf.fillQuadrangleImgVb(H$E,H$K,H$Y,H$X,H$e.DEF_UV,H$L||this._curMat,this._x,this._y);H$H._numEle+=6},H$K.drawTexture2=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){if(0!=H$H){var H$O=this._curMat;if(this._x=H$f*H$O.a+H$K*H$O.c,this._y=H$K*H$O.d+H$f*H$O.b,H$L&&(H$L=H$O.bTransform||H$L.bTransform?(H$n.mul(H$L,H$O,H$b._tmpMatrix),H$b._tmpMatrix):(this._x+=H$L.tx+H$O.tx,this._y+=H$L.ty+H$O.ty,H$n.EMPTY)),1!==H$H||H$E){var H$i=this._shader2D.ALPHA,H$U=this._nBlendType;this._shader2D.ALPHA=H$H,H$E&&(this._nBlendType=H$w.TOINT(H$E)),this._drawTextureM(H$d[0],H$d[1]-H$Y,H$d[2]-H$X,H$d[3],H$d[4],0,0,H$L,1),this._shader2D.ALPHA=H$i,this._nBlendType=H$U}else this._drawTextureM(H$d[0],H$d[1]-H$Y,H$d[2]-H$X,H$d[3],H$d[4],0,0,H$L,1);this._x=this._y=0}},H$K.drawCanvas=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$f.context;if(this._renderKey=0,H$H._targets)this._submits[this._submits._length++]=H$Tf.create(H$H,0,null),this._curSubmit=H$Hf.RENDERBASE,H$H._targets.drawTo(this,H$K,H$Y,H$X,H$L);else{var H$E=this._submits[this._submits._length++]=H$Tf.create(H$H,this._shader2D.ALPHA,this._shader2D.filters),H$d=H$X/H$f.width,H$O=H$L/H$f.height,H$i=H$E._matrix;this._curMat.copyTo(H$i),1!=H$d&&1!=H$O&&H$i.scale(H$d,H$O);var H$U=H$i.tx,H$Z=H$i.ty;H$i.tx=H$i.ty=0,H$i.transformPoint(H$_.TEMP.setTo(H$K,H$Y)),H$i.translate(H$_.TEMP.x+H$U,H$_.TEMP.y+H$Z),this._curSubmit=H$Hf.RENDERBASE}H$a.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=H$H._targets?"yellow":"green",this.strokeRect(H$K-1,H$Y-1,H$X+2,H$L+2,1),this.strokeRect(H$K,H$Y,H$X,H$L,1),this.restore())},H$K.drawTarget=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){void 0===H$i&&(H$i=-1);var H$U=this._vb;if(H$hf.fillRectImgVb(H$U,this._clipRect,H$K,H$Y,H$X,H$L,H$O||H$e.DEF_UV,H$H||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var H$Z=this._curSubmit=H$Zf.create(this,this._ib,H$U,(H$U._byteLength-64)/32*3,H$d,H$E);H$Z.blendType=-1==H$i?this._nBlendType:H$i,H$Z.scope=H$f,this._submits[this._submits._length++]=H$Z,this._curSubmit._numEle+=6}},H$K.mixRGBandAlpha=function(H$f){return this._mixRGBandAlpha(H$f,this._shader2D.ALPHA)},H$K._mixRGBandAlpha=function(H$f,H$K){var H$Y=(4278190080&H$f)>>>24;return 0!=H$Y?H$Y*=H$K:H$Y=255*H$K,16777215&H$f|H$Y<<24},H$K.drawTriangles=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){if(!H$f.loaded||!H$f.source)return this.sprite&&H$s.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;H$f.bitmap;var H$U=this._mixRGBandAlpha(4294967295,H$d),H$Z=(H$X.length,H$H.length);this._renderKey=-1;var H$y=this._curSubmit=H$kf.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,H$If.create(1,0));return H$y.shaderValue.textureHost=H$f,H$y._renderType=10016,this._submits[this._submits._length++]=H$y,H$E?(H$b._tmpMatrix.a=H$E.a,H$b._tmpMatrix.b=H$E.b,H$b._tmpMatrix.c=H$E.c,H$b._tmpMatrix.d=H$E.d,H$b._tmpMatrix.tx=H$E.tx+H$K,H$b._tmpMatrix.ty=H$E.ty+H$Y,H$n.mul(H$b._tmpMatrix,this._curMat,H$b._tmpMatrix)):(H$b._tmpMatrix.a=this._curMat.a,H$b._tmpMatrix.b=this._curMat.b,H$b._tmpMatrix.c=this._curMat.c,H$b._tmpMatrix.d=this._curMat.d,H$b._tmpMatrix.tx=this._curMat.tx+H$K,H$b._tmpMatrix.ty=this._curMat.ty+H$Y),this._triangleMesh.addData(H$X,H$L,H$H,H$b._tmpMatrix,H$U,this),this._curSubmit._numEle+=H$Z,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},H$K.transform=function(H$f,H$K,H$Y,H$X,H$L,H$H){H$D.save(this),H$n.mul(H$n.TEMP.setTo(H$f,H$K,H$Y,H$X,H$L,H$H),this._curMat,this._curMat),this._curMat._checkTransform()},H$K.setTransformByMatrix=function(H$f){H$f.copyTo(this._curMat)},H$K.transformByMatrix=function(H$f){H$D.save(this),H$n.mul(H$f,this._curMat,this._curMat),this._curMat._checkTransform()},H$K.rotate=function(H$f){H$D.save(this),this._curMat.rotateEx(H$f)},H$K.scale=function(H$f,H$K){H$D.save(this),this._curMat.scaleEx(H$f,H$K)},H$K.clipRect=function(H$f,H$K,H$Y,H$X){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var H$L=H$Uf.create(4);this.addRenderObject(H$L);var H$H=this._vb,H$E=H$H._byteLength>>2;if(H$hf.fillRectImgVb(H$H,null,H$f,H$K,H$Y,H$X,H$e.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var H$d=this._curSubmit=H$Hf.createSubmit(this,this._ib,H$H,(H$H._byteLength-64)/32*3,H$If.create(2,0));H$d.shaderValue.ALPHA=1,this._submits[this._submits._length++]=H$d,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var H$O=H$Uf.create(5);this.addRenderObject(H$O);var H$i=H$H.getFloat32Array(),H$U=Math.min(Math.min(Math.min(H$i[0+H$E],H$i[4+H$E]),H$i[8+H$E]),H$i[12+H$E]),H$Z=Math.max(Math.max(Math.max(H$i[0+H$E],H$i[4+H$E]),H$i[8+H$E]),H$i[12+H$E]),H$y=Math.min(Math.min(Math.min(H$i[1+H$E],H$i[5+H$E]),H$i[9+H$E]),H$i[13+H$E]),H$l=Math.max(Math.max(Math.max(H$i[1+H$E],H$i[5+H$E]),H$i[9+H$E]),H$i[13+H$E]);H$p.save(this,H$O,H$f,H$K,H$Y,H$X,H$U,H$y,H$Z-H$U,H$l-H$y),this._curSubmit=H$Hf.RENDERBASE}else{H$Y*=this._curMat.a,H$X*=this._curMat.d;var H$B=H$_.TEMP;this._curMat.transformPoint(H$B.setTo(H$f,H$K)),H$Y<0&&(H$B.x=H$B.x+H$Y,H$Y=-H$Y),H$X<0&&(H$B.y=H$B.y+H$X,H$X=-H$X),this._renderKey=0;var H$$=this._curSubmit=H$if.create(this);(this._submits[this._submits._length++]=H$$).submitIndex=this._submits._length,H$$.submitLength=9999999,H$c.save(this,H$$);var H$h=this._clipRect,H$A=H$h.x,H$x=H$h.y,H$S=H$B.x+H$Y,H$z=H$B.y+H$X;H$A<H$B.x&&(H$h.x=H$B.x),H$x<H$B.y&&(H$h.y=H$B.y),H$h.width=Math.min(H$S,H$A+H$h.width)-H$h.x,H$h.height=Math.min(H$z,H$x+H$h.height)-H$h.y,this._shader2D.glTexture=null,H$$.clipRect.copyFrom(H$h),this._curSubmit=H$Hf.RENDERBASE}},H$K.setIBVB=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U){if(void 0===H$O&&(H$O=0),void 0===H$i&&(H$i=0),void 0===H$U&&(H$U=0),null===H$Y){if(H$A.isFlash){var H$Z=H$X;H$Z._selfIB||(H$Z._selfIB=H$of.create(35044)),H$Z._selfIB.clear(),H$Y=H$Z._selfIB}else H$Y=this._ib;H$hf.expandIBQuadrangle(H$Y,H$X._byteLength/(4*H$X.vertexStride*4))}if(!H$d||!H$E)throw Error("setIBVB must input:shader shaderValues");var H$y=H$Of.create(this,H$X,H$Y,H$L,H$E,H$d,H$O,H$i,H$U);H$H||(H$H=H$n.EMPTY),H$H.translate(H$f,H$K),H$n.mul(H$H,this._curMat,H$y._mat),H$H.translate(-H$f,-H$K),this._submits[this._submits._length++]=H$y,this._curSubmit=H$Hf.RENDERBASE,this._renderKey=0},H$K.addRenderObject=function(H$f){this._submits[this._submits._length++]=H$f},H$K.fillTrangles=function(H$f,H$K,H$Y,H$X,H$L){var H$H=this._curSubmit,H$E=this._vb,H$d=this._shader2D,H$O=H$H.shaderValue,H$i=H$X.length>>4,H$U=H$f.bitmap;this._renderKey=0,H$d.glTexture==H$U&&H$d.ALPHA===H$O.ALPHA||((H$H=this._curSubmit=H$Hf.createSubmit(this,this._ib,H$E,H$E._byteLength/32*3,H$If.create(1,0))).shaderValue.textureHost=H$f,this._submits[this._submits._length++]=H$H),H$hf.fillTranglesVB(H$E,H$K,H$Y,H$X,H$L||this._curMat,this._x,this._y),H$H._numEle+=6*H$i},H$K.submitElement=function(H$f,H$K){var H$Y=this._submits;for(H$K<0&&(H$K=H$Y._length);H$f<H$K;)H$f+=H$Y[H$f].renderSubmit()},H$K.finish=function(){H$zf.mainContext.finish()},H$K.flush=function(){var H$f=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(H$f>this._ib.bufferLength/12&&H$hf.expandIBQuadrangle(this._ib,H$f),!this._isMain&&H$J.enabled&&H$J._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=H$J._atlasRestore;for(var H$K=this._submits,H$Y=0,H$X=H$K._length;H$Y<H$X;H$Y++){var H$L=H$K[H$Y];10016===H$L.getRenderType()&&H$L.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),H$Kf.instance&&H$Kf.getInstance().reset();var H$H;for(H$Y=0,H$H=this.meshlist.length;H$Y<H$H;H$Y++){var H$E=this.meshlist[H$Y];H$E.canReuse?H$E.releaseMesh():H$E.destroy()}return this.meshlist.length=0,this._curSubmit=H$Hf.RENDERBASE,this._renderKey=0,this._triangleMesh=H$ef.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},H$K.setPathId=function(H$f){if(this.mId=H$f,-1!=this.mId){this.mHaveKey=!1;var H$K=H$W.getInstance();H$K.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,H$K.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},H$K.movePath=function(H$f,H$K){var H$Y=H$f,H$X=H$K;H$f=this._curMat.a*H$Y+this._curMat.c*H$X+this._curMat.tx,H$K=this._curMat.b*H$Y+this._curMat.d*H$X+this._curMat.ty,this.mX+=H$f,this.mY+=H$K},H$K.beginPath=function(){var H$f=this._getPath();H$f.tempArray.length=0,H$f.closePath=!1,this.mX=0,this.mY=0},H$K.closePath=function(){this._path.closePath=!0},H$K.fill=function(H$f){void 0===H$f&&(H$f=!1);var H$K=this._getPath();this.drawPoly(0,0,H$K.tempArray,this.fillStyle._color.numColor,0,0,H$f)},H$K.stroke=function(){var H$f=this._getPath();if(0<this.lineWidth){if(-1==this.mId)H$f.drawLine(0,0,H$f.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var H$K=H$W.getInstance().shapeLineDic[this.mId];H$K.rebuild(H$f.tempArray),H$f.setGeomtry(H$K)}else H$W.getInstance().addLine(this.mId,H$f.drawLine(0,0,H$f.tempArray,this.lineWidth,this.strokeStyle._color.numColor));H$f.update();var H$Y=[this.mX,this.mY],H$X=H$Hf.createShape(this,H$f.ib,H$f.vb,H$f.count,H$f.offset,H$If.create(4,0));H$X.shaderValue.ALPHA=this._shader2D.ALPHA,H$X.shaderValue.u_pos=H$Y,H$X.shaderValue.u_mmat2=H$xf.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=H$X,this._renderKey=-1}},H$K.line=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=this._curSubmit,H$d=this._vb;if(H$hf.fillLineVb(H$d,this._clipRect,H$f,H$K,H$Y,H$X,H$L,H$H)){this._renderKey=0;var H$O=this._shader2D,H$i=H$E.shaderValue;H$O.strokeStyle===H$i.strokeStyle&&H$O.ALPHA===H$i.ALPHA||(H$O.glTexture=null,(H$E=this._curSubmit=H$Hf.createSubmit(this,this._ib,H$d,(H$d._byteLength-64)/32*3,H$If.create(2,0))).shaderValue.strokeStyle=H$O.strokeStyle,H$E.shaderValue.mainID=2,H$E.shaderValue.ALPHA=H$O.ALPHA,this._submits[this._submits._length++]=H$E),H$E._numEle+=6}},H$K.moveTo=function(H$f,H$K,H$Y){void 0===H$Y&&(H$Y=!0);var H$X=this._getPath();if(H$Y){var H$L=H$f,H$H=H$K;H$f=this._curMat.a*H$L+this._curMat.c*H$H,H$K=this._curMat.b*H$L+this._curMat.d*H$H}H$X.addPoint(H$f,H$K)},H$K.lineTo=function(H$f,H$K,H$Y){void 0===H$Y&&(H$Y=!0);var H$X=this._getPath();if(H$Y){var H$L=H$f,H$H=H$K;H$f=this._curMat.a*H$L+this._curMat.c*H$H,H$K=this._curMat.b*H$L+this._curMat.d*H$H}H$X.addPoint(H$f,H$K)},H$K.drawCurves=function(H$f,H$K,H$Y){this.setPathId(-1),this.beginPath(),this.strokeStyle=H$Y[3],this.lineWidth=H$Y[4];var H$X=H$Y[2];H$f+=H$Y[0],H$K+=H$Y[1],this.movePath(H$f,H$K),this.moveTo(H$X[0],H$X[1]);for(var H$L=2,H$H=H$X.length;H$L<H$H;)this.quadraticCurveTo(H$X[H$L++],H$X[H$L++],H$X[H$L++],H$X[H$L++]);this.stroke()},H$K.arcTo=function(H$f,H$K,H$Y,H$X,H$L){if(-1==this.mId||!this.mHaveKey){var H$H=0,H$E=0,H$d=0,H$O=this._getPath();this._curMat.copyTo(H$b._tmpMatrix),H$b._tmpMatrix.tx=H$b._tmpMatrix.ty=0,H$b._tempPoint.setTo(H$O.getEndPointX(),H$O.getEndPointY()),H$b._tmpMatrix.invertTransformPoint(H$b._tempPoint);var H$i=H$b._tempPoint.x-H$f,H$U=H$b._tempPoint.y-H$K,H$Z=Math.sqrt(H$i*H$i+H$U*H$U);if(!(H$Z<=1e-6)){var H$y=H$i/H$Z,H$l=H$U/H$Z,H$B=H$Y-H$f,H$$=H$X-H$K,H$h=H$B*H$B+H$$*H$$,H$A=Math.sqrt(H$h);if(!(H$A<=1e-6)){var H$x=H$B/H$A,H$S=H$$/H$A,H$z=H$y+H$x,H$C=H$l+H$S,H$s=Math.sqrt(H$z*H$z+H$C*H$C);if(!(H$s<=1e-6)){var H$a=H$z/H$s,H$I=H$C/H$s,H$n=Math.acos(H$a*H$y+H$I*H$l),H$_=Math.PI/2-H$n,H$G=(H$Z=H$L/Math.tan(H$_))*H$y+H$f,H$m=H$Z*H$l+H$K,H$R=Math.sqrt(H$Z*H$Z+H$L*H$L),H$V=H$f+H$a*H$R,H$t=H$K+H$I*H$R,H$T=0,H$k=0;if(0<=H$y*H$S-H$l*H$x){var H$e=2*H$_/H$b.SEGNUM;H$T=Math.sin(H$e),H$k=Math.cos(H$e)}else H$e=2*-H$_/H$b.SEGNUM,H$T=Math.sin(H$e),H$k=Math.cos(H$e);H$E=this._curMat.a*H$G+this._curMat.c*H$m,H$d=this._curMat.b*H$G+this._curMat.d*H$m,H$E==this._path.getEndPointX()&&H$d==this._path.getEndPointY()||H$O.addPoint(H$E,H$d);var H$Q=H$G-H$V,H$W=H$m-H$t;for(H$H=0;H$H<H$b.SEGNUM;H$H++){var H$q=H$Q*H$k+H$W*H$T,H$P=-H$Q*H$T+H$W*H$k;H$E=H$q+H$V,H$d=H$P+H$t,H$f=this._curMat.a*H$E+this._curMat.c*H$d,H$d=H$K=this._curMat.b*H$E+this._curMat.d*H$d,(H$E=H$f)==this._path.getEndPointX()&&H$d==this._path.getEndPointY()||H$O.addPoint(H$E,H$d),H$Q=H$q,H$W=H$P}}}}}},H$K.arc=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){if(void 0===H$H&&(H$H=!1),void 0===H$E&&(H$E=!0),-1!=this.mId){var H$d=H$W.getInstance().shapeDic[this.mId];if(H$d&&this.mHaveKey&&!H$d.needUpdate(this._curMat))return;H$K=H$f=0}var H$O,H$i=0,H$U=0,H$Z=0,H$y=0,H$l=0,H$B=0,H$$=0;if(H$U=H$L-H$X,H$H)if(Math.abs(H$U)>=2*Math.PI)H$U=2*-Math.PI;else for(;0<H$U;)H$U-=2*Math.PI;else if(Math.abs(H$U)>=2*Math.PI)H$U=2*Math.PI;else for(;H$U<0;)H$U+=2*Math.PI;H$O=H$U/(H$$=H$Y<101?Math.max(10,H$U*H$Y/5):H$Y<201?Math.max(10,H$U*H$Y/20):Math.max(10,H$U*H$Y/40))/2,H$Z=Math.abs(4/3*(1-Math.cos(H$O))/Math.sin(H$O)),H$H&&(H$Z=-H$Z);var H$h=this._getPath(),H$A=NaN,H$x=NaN;for(H$B=0;H$B<=H$$;H$B++)H$i=H$X+H$U*(H$B/H$$),H$y=H$f+Math.cos(H$i)*H$Y,H$l=H$K+Math.sin(H$i)*H$Y,H$E&&(H$A=H$y,H$x=H$l,H$y=this._curMat.a*H$A+this._curMat.c*H$x,H$l=this._curMat.b*H$A+this._curMat.d*H$x),H$y==this._path.getEndPointX()&&H$l==this._path.getEndPointY()||H$h.addPoint(H$y,H$l);H$y=H$f+Math.cos(H$L)*H$Y,H$l=H$K+Math.sin(H$L)*H$Y,H$E&&(H$A=H$y,H$x=H$l,H$y=this._curMat.a*H$A+this._curMat.c*H$x,H$l=this._curMat.b*H$A+this._curMat.d*H$x),H$y==this._path.getEndPointX()&&H$l==this._path.getEndPointY()||H$h.addPoint(H$y,H$l)},H$K.quadraticCurveTo=function(H$f,H$K,H$Y,H$X){var H$L=H$Z.I,H$H=H$Y,H$E=H$X;H$Y=this._curMat.a*H$H+this._curMat.c*H$E,H$X=this._curMat.b*H$H+this._curMat.d*H$E,H$H=H$f,H$E=H$K,H$f=this._curMat.a*H$H+this._curMat.c*H$E,H$K=this._curMat.b*H$H+this._curMat.d*H$E;for(var H$d=H$L.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),H$f,H$K,H$Y,H$X],30,2),H$O=0,H$i=H$d.length/2;H$O<H$i;H$O++)this.lineTo(H$d[2*H$O],H$d[2*H$O+1],!1);this.lineTo(H$Y,H$X,!1)},H$K.rect=function(H$f,H$K,H$Y,H$X){this._other=this._other.make(),this._other.path||(this._other.path=new H$v),this._other.path.rect(H$f,H$K,H$Y,H$X)},H$K.strokeRect=function(H$f,H$K,H$Y,H$X,H$L){var H$H=.5*H$L;this.line(H$f-H$H,H$K,H$f+H$Y+H$H,H$K,H$L,this._curMat),this.line(H$f+H$Y,H$K,H$f+H$Y,H$K+H$X,H$L,this._curMat),this.line(H$f,H$K,H$f,H$K+H$X,H$L,this._curMat),this.line(H$f-H$H,H$K+H$X,H$f+H$Y+H$H,H$K+H$X,H$L,this._curMat)},H$K.clip=function(){},H$K.drawPoly=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){void 0===H$E&&(H$E=!1),this._renderKey=0,this._shader2D.glTexture=null;var H$d=this._getPath();if(-1==this.mId)H$d.polygon(H$f,H$K,H$Y,H$X,H$L||1,H$H);else if(this.mHaveKey){var H$O=H$W.getInstance().shapeDic[this.mId];H$O.setMatrix(this._curMat),H$O.rebuild(H$d.tempArray),H$d.setGeomtry(H$O)}else{var H$i=H$d.polygon(H$f,H$K,H$Y,H$X,H$L||1,H$H);H$W.getInstance().addShape(this.mId,H$i),H$i.setMatrix(this._curMat)}H$d.update();var H$U,H$Z=[this.mX,this.mY];if((H$U=H$Hf.createShape(this,H$d.ib,H$d.vb,H$d.count,H$d.offset,H$If.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,H$U.shaderValue.u_pos=H$Z,H$U.shaderValue.u_mmat2=H$xf.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=H$U,0<H$L){if(this.mHaveLineKey){var H$y=H$W.getInstance().shapeLineDic[this.mId];H$y.rebuild(H$d.tempArray),H$d.setGeomtry(H$y)}else H$W.getInstance().addShape(this.mId,H$d.drawLine(H$f,H$K,H$Y,H$L,H$H));H$d.update(),(H$U=H$Hf.createShape(this,H$d.ib,H$d.vb,H$d.count,H$d.offset,H$If.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,H$U.shaderValue.u_mmat2=H$xf.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=H$U}},H$K.drawParticle=function(H$f,H$K,H$Y){H$Y.x=H$f,H$Y.y=H$K,this._submits[this._submits._length++]=H$Y},H$K._getPath=function(){return this._path||(this._path=new H$v)},H$X(0,H$K,"globalCompositeOperation",function(){return H$w.NAMES[this._nBlendType]},function(H$f){var H$K=H$w.TOINT[H$f];null==H$K||this._nBlendType===H$K||(H$j.save(this,65536,this,!0),this._curSubmit=H$Hf.RENDERBASE,this._renderKey=0,this._nBlendType=H$K)}),H$X(0,H$K,"strokeStyle",function(){return this._shader2D.strokeStyle},function(H$f){this._shader2D.strokeStyle.equal(H$f)||(H$j.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=H$r.create(H$f))}),H$X(0,H$K,"globalAlpha",function(){return this._shader2D.ALPHA},function(H$f){(H$f=Math.floor(1e3*H$f)/1e3)!=this._shader2D.ALPHA&&(H$j.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=H$f)}),H$X(0,H$K,"asBitmap",null,function(H$f){if(H$f){if(this._targets||(this._targets=new H$N),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),H$X(0,H$K,"fillStyle",function(){return this._shader2D.fillStyle},function(H$f){this._shader2D.fillStyle.equal(H$f)||(H$j.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=H$r.create(H$f))}),H$X(0,H$K,"textAlign",function(){return this._other.textAlign},function(H$f){this._other.textAlign===H$f||(this._other=this._other.make(),H$j.save(this,32768,this._other,!1),this._other.textAlign=H$f)}),H$X(0,H$K,"lineWidth",function(){return this._other.lineWidth},function(H$f){this._other.lineWidth===H$f||(this._other=this._other.make(),H$j.save(this,256,this._other,!1),this._other.lineWidth=H$f)}),H$X(0,H$K,"textBaseline",function(){return this._other.textBaseline},function(H$f){this._other.textBaseline===H$f||(this._other=this._other.make(),H$j.save(this,16384,this._other,!1),this._other.textBaseline=H$f)}),H$X(0,H$K,"font",null,function(H$f){H$f!=this._other.font.toString()&&(this._other=this._other.make(),H$j.save(this,8,this._other,!1),this._other.font===H$Bf.EMPTY?this._other.font=new H$Bf(H$f):this._other.font.setFont(H$f))}),H$b.__init__=function(){H$Y.DEFAULT=new H$Y},H$b._tempPoint=new H$_,H$b._SUBMITVBSIZE=32e3,H$b._MAXSIZE=99999999,H$b._RECTVBSIZE=16,H$b.MAXCLIPRECT=new H$G(0,0,99999999,99999999),H$b._COUNT=0,H$b._tmpMatrix=new H$n,H$b.SEGNUM=32,H$b._contextcount=0,H$E(H$b,["_fontTemp",function(){return this._fontTemp=new H$Bf},"_drawStyleTemp",function(){return this._drawStyleTemp=new H$r(null)}]),H$b.__init$=function(){H$Y=function(){function H$f(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=H$Bf.EMPTY}H$y(H$f,"");var H$K=H$f.prototype;return H$K.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=H$Bf.EMPTY},H$K.make=function(){return this===H$f.DEFAULT?new H$f:this},H$f.DEFAULT=null,H$f}()},H$b}(),H$If=function(H$f){function H$X(H$f,H$K){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,H$X.__super.call(this),this.defines=new H$mf,this.position=H$X._POSITION,this.mainID=H$f,this.subID=H$K,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=H$f|H$K,this._inClassCache=H$X._cache[this._cacheID],0<H$f&&!this._inClassCache&&(this._inClassCache=H$X._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}H$y(H$X,"laya.webgl.shader.d2.value.Value2D",H$P);var H$K=H$X.prototype;return H$K.setValue=function(H$f){},H$K.refresh=function(){var H$f=this.size;return H$f[0]=H$xf.width,H$f[1]=H$xf.height,this.alpha=this.ALPHA*H$xf.worldAlpha,this.mmat=H$xf.worldMatrix4,this},H$K._ShaderWithCompile=function(){return H$uf.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,H$Nf.create)},H$K._withWorldShaderDefines=function(){var H$f=H$xf.worldShaderDefines,H$K=H$uf.sharders[this.mainID|this.defines._value|H$f.getValue()];if(!H$K){var H$Y,H$X={};for(H$Y in this.defines.toNameDic())H$X[H$Y]="";for(H$Y in H$f.toNameDic())H$X[H$Y]="";H$K=H$uf.withCompile2D(0,this.mainID,H$X,this.mainID|this.defines._value|H$f.getValue(),H$Nf.create)}var H$L=H$xf.worldFilters;if(!H$L)return H$K;for(var H$H,H$E=H$L.length,H$d=0;H$d<H$E;H$d++)(H$H=H$L[H$d])&&H$H.action.setValue(this);return H$K},H$K.upload=function(){var H$f=H$xf;this.alpha=this.ALPHA*H$f.worldAlpha,H$xf.worldMatrix4!==H$xf.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),H$zf.shaderHighPrecision&&this.defines.add(1024);var H$K,H$Y=H$f.worldShaderDefines?this._withWorldShaderDefines():H$uf.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=H$f.width,this.size[1]=H$f.height,this.mmat=H$f.worldMatrix4,H$Qf.activeShader!==H$Y?H$Y._shaderValueWidth!==H$f.width||H$Y._shaderValueHeight!==H$f.height?(H$Y._shaderValueWidth=H$f.width,H$Y._shaderValueHeight=H$f.height):H$K=H$Y._params2dQuick2||H$Y._make2dQuick2():H$Y._shaderValueWidth!==H$f.width||H$Y._shaderValueHeight!==H$f.height?(H$Y._shaderValueWidth=H$f.width,H$Y._shaderValueHeight=H$f.height):H$K=H$Y._params2dQuick1||H$Y._make2dQuick1(),H$Y.upload(this,H$K)},H$K.setFilters=function(H$f){if(this.filters=H$f)for(var H$K,H$Y=H$f.length,H$X=0;H$X<H$Y;H$X++)(H$K=H$f[H$X])&&(this.defines.add(H$K.type),H$K.action.setValue(this))},H$K.clear=function(){this.defines.setValue(this.subID)},H$K.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},H$X._initone=function(H$f,H$K){H$X._typeClass[H$f]=H$K,H$X._cache[H$f]=[],H$X._cache[H$f]._length=0},H$X.__init__=function(){H$X._POSITION=[2,5126,!1,4*H$$f.BYTES_PE,0],H$X._TEXCOORD=[2,5126,!1,4*H$$f.BYTES_PE,2*H$$f.BYTES_PE],H$X._initone(2,H$bf),H$X._initone(4,H$wf),H$X._initone(256,H$Jf),H$X._initone(512,H$Pf),H$X._initone(1,H$Mf),H$X._initone(65,H$gf),H$X._initone(9,H$Mf)},H$X.create=function(H$f,H$K){var H$Y=H$X._cache[H$f|H$K];return H$Y._length?H$Y[--H$Y._length]:new H$X._typeClass[H$f|H$K](H$K)},H$X._POSITION=null,H$X._TEXCOORD=null,H$X._cache=[],H$X._typeClass=[],H$X.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H$X}(),H$nf=function(H$f){function H$h(H$f,H$K){H$h.__super.call(this,H$f,H$K)}H$y(H$h,"laya.webgl.utils.RenderSprite3D",H$x);var H$K=H$h.prototype;return H$K.onCreate=function(H$f){switch(H$f){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},H$K._mask=function(H$f,H$K,H$Y,H$X){var H$L,H$H,H$E=this._next,H$d=H$f.mask;if(H$d){H$K.ctx.save();var H$O=H$K.ctx.globalCompositeOperation,H$i=new H$G;if(H$i.copyFrom(H$d.getBounds()),H$i.width=Math.round(H$i.width),H$i.height=Math.round(H$i.height),H$i.x=Math.round(H$i.x),H$i.y=Math.round(H$i.y),0<H$i.width&&0<H$i.height){var H$U=H$f._style._tf,H$Z=H$df.create();H$Z.addValue("bounds",H$i),H$L=H$Ef.create([H$Z,H$K],laya.webgl.utils.RenderSprite3D.tmpTarget),H$K.addRenderObject(H$L),H$d.render(H$K,-H$i.x,-H$i.y),H$L=H$Ef.create([H$Z],laya.webgl.utils.RenderSprite3D.endTmpTarget),H$K.addRenderObject(H$L),H$K.ctx.save(),H$K.clipRect(H$Y-H$U.translateX+H$i.x,H$X-H$U.translateY+H$i.y,H$i.width,H$i.height),H$E._fun.call(H$E,H$f,H$K,H$Y,H$X),H$K.ctx.restore(),H$H=H$Uf.create(6),H$O=H$K.ctx.globalCompositeOperation,H$H.blendMode="mask",H$K.addRenderObject(H$H),H$n.TEMP.identity();var H$y=H$If.create(1,0),H$l=H$e.INV_UV,H$B=H$i.width,H$$=H$i.height;(H$i.width<32||H$i.height<32)&&((H$l=H$h.tempUV)[0]=0,H$l[1]=0,H$l[2]=32<=H$i.width?1:H$i.width/32,H$l[3]=0,H$l[4]=32<=H$i.width?1:H$i.width/32,H$l[5]=32<=H$i.height?1:H$i.height/32,H$l[6]=0,H$l[7]=32<=H$i.height?1:H$i.height/32,H$i.width=32<=H$i.width?H$i.width:32,H$i.height=32<=H$i.height?H$i.height:32,H$l[1]*=-1,H$l[3]*=-1,H$l[5]*=-1,H$l[7]*=-1,H$l[1]+=1,H$l[3]+=1,H$l[5]+=1,H$l[7]+=1),H$K.ctx.drawTarget(H$Z,H$Y+H$i.x-H$U.translateX,H$X+H$i.y-H$U.translateY,H$B,H$$,H$n.TEMP,"tmpTarget",H$y,H$l,6),H$L=H$Ef.create([H$Z],laya.webgl.utils.RenderSprite3D.recycleTarget),H$K.addRenderObject(H$L),(H$H=H$Uf.create(6)).blendMode=H$O,H$K.addRenderObject(H$H)}H$K.ctx.restore()}else H$E._fun.call(H$E,H$f,H$K,H$Y,H$X)},H$K._blend=function(H$f,H$K,H$Y,H$X){var H$L=H$f._style,H$H=this._next;H$L.blendMode?(H$K.ctx.save(),H$K.ctx.globalCompositeOperation=H$L.blendMode,H$H._fun.call(H$H,H$f,H$K,H$Y,H$X),H$K.ctx.restore()):H$H._fun.call(H$H,H$f,H$K,H$Y,H$X)},H$K._transform=function(H$f,H$K,H$Y,H$X){var H$L=H$f.transform,H$H=this._next;if(H$L&&H$H!=H$x.NORENDER){var H$E=H$K.ctx;H$f._style;H$L.tx=H$Y,H$L.ty=H$X;var H$d=H$E._getTransformMatrix(),H$O=H$d.clone();H$n.mul(H$L,H$d,H$d),H$d._checkTransform(),H$L.tx=H$L.ty=0,H$H._fun.call(H$H,H$f,H$K,0,0),H$O.copyTo(H$d),H$O.destroy()}else H$H._fun.call(H$H,H$f,H$K,H$Y,H$X)},H$h.tmpTarget=function(H$f,H$K){var H$Y=H$f.getValue("bounds"),H$X=H$Wf.create(H$Y.width,H$Y.height);H$X.start(),H$X.clear(0,0,0,0),H$f.addValue("tmpTarget",H$X)},H$h.endTmpTarget=function(H$f){H$f.getValue("tmpTarget").end()},H$h.recycleTarget=function(H$f){H$f.getValue("tmpTarget").recycle(),H$f.recycle()},H$E(H$h,["tempUV",function(){return this.tempUV=new Array(8)}]),H$h}(),H$_f=function(H$f){function H$K(){this.data=null,H$K.__super.call(this)}H$y(H$K,"laya.filters.webgl.ColorFilterActionGL",H$q);var H$Y=H$K.prototype;return H$s.imps(H$Y,{"laya.filters.IFilterActionGL":!0}),H$Y.setValue=function(H$f){H$f.colorMat=this.data._mat,H$f.colorAlpha=this.data._alpha},H$Y.apply3d=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$f.getValue("bounds"),H$E=H$If.create(1,0);H$E.setFilters([this.data]);var H$d=H$n.TEMP;H$d.identity(),H$Y.ctx.drawTarget(H$f,0,0,H$H.width,H$H.height,H$d,"src",H$E)},H$K}(),H$Gf=function(H$f){function H$H(H$f,H$K,H$Y,H$X,H$L){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,H$H.__super.call(this,H$f,H$K,H$L),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new H$rf,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=H$Y,this._atlasCanvas.height=H$X,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}H$y(H$H,"laya.webgl.atlas.Atlaser",H$b);var H$K=H$H.prototype;return H$K.computeUVinAtlasTexture=function(H$f,H$K,H$Y,H$X){var H$L=H$J.atlasTextureWidth,H$H=H$J.atlasTextureHeight,H$E=H$Y/H$L,H$d=H$X/H$H,H$O=(H$Y+H$f.bitmap.width)/H$L,H$i=(H$X+H$f.bitmap.height)/H$H,H$U=H$f.bitmap.width/H$L,H$Z=H$f.bitmap.height/H$H;H$f.uv=[H$E+H$K[0]*H$U,H$d+H$K[1]*H$Z,H$O-(1-H$K[2])*H$U,H$d+H$K[3]*H$Z,H$O-(1-H$K[4])*H$U,H$i-(1-H$K[5])*H$Z,H$E+H$K[6]*H$U,H$i-(1-H$K[7])*H$Z]},H$K.findBitmapIsExist=function(H$f){if(H$f instanceof laya.webgl.resource.WebGLImage){var H$K=H$f,H$Y=H$K.url,H$X=this._InAtlasWebGLImagesKey[H$Y||H$K.id];if(H$X)return H$X.offsetInfoID}return-1},H$K.addToAtlasTexture=function(H$f,H$K,H$Y){if(H$f instanceof laya.webgl.resource.WebGLImage){var H$X=H$f,H$L=H$X.url;this._InAtlasWebGLImagesKey[H$L||H$X.id]={bitmap:H$f,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([H$K,H$Y])}this._atlasCanvas.texSubImage2D(H$K,H$Y,H$f.atlasSource),H$f.clearAtlasSource()},H$K.addToAtlas=function(H$f,H$K,H$Y){H$f._atlasID=this._inAtlasTextureKey.length;var H$X=H$f.uv.slice(),H$L=H$f.bitmap;this._inAtlasTextureKey.push(H$f),this._inAtlasTextureOriUVValue.push(H$X),this._inAtlasTextureBitmapValue.push(H$L),this.computeUVinAtlasTexture(H$f,H$X,H$K,H$Y),H$f.bitmap=this._atlasCanvas},H$K.clear=function(){for(var H$f=0,H$K=this._inAtlasTextureKey.length;H$f<H$K;H$f++)this._inAtlasTextureKey[H$f].bitmap=this._inAtlasTextureBitmapValue[H$f],this._inAtlasTextureKey[H$f].uv=this._inAtlasTextureOriUVValue[H$f],this._inAtlasTextureKey[H$f]._atlasID=-1,this._inAtlasTextureKey[H$f].bitmap.lock=!1,this._inAtlasTextureKey[H$f].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},H$K.dispose=function(){this.clear(),this._atlasCanvas.destroy()},H$X(0,H$K,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),H$X(0,H$K,"texture",function(){return this._atlasCanvas}),H$X(0,H$K,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),H$H}(),H$mf=function(H$f){function H$Y(){H$Y.__super.call(this,H$Y.__name2int,H$Y.__int2name,H$Y.__int2nameMap)}return H$y(H$Y,"laya.webgl.shader.d2.ShaderDefines2D",H$F),H$Y.__init__=function(){H$Y.reg("TEXTURE2D",1),H$Y.reg("COLOR2D",2),H$Y.reg("PRIMITIVE",4),H$Y.reg("GLOW_FILTER",8),H$Y.reg("BLUR_FILTER",16),H$Y.reg("COLOR_FILTER",32),H$Y.reg("COLOR_ADD",64),H$Y.reg("WORLDMAT",128),H$Y.reg("FILLTEXTURE",256),H$Y.reg("FSHIGHPRECISION",1024),H$Y.reg("TXTALPHA",2048),H$Y.reg("TXTCOMPRESS",4096)},H$Y.reg=function(H$f,H$K){H$F._reg(H$f,H$K,H$Y.__name2int,H$Y.__int2name)},H$Y.toText=function(H$f,H$K,H$Y){return H$F._toText(H$f,H$K,H$Y)},H$Y.toInt=function(H$f){return H$F._toInt(H$f,H$Y.__name2int)},H$Y.TEXTURE2D=1,H$Y.COLOR2D=2,H$Y.PRIMITIVE=4,H$Y.FILTERGLOW=8,H$Y.FILTERBLUR=16,H$Y.FILTERCOLOR=32,H$Y.COLORADD=64,H$Y.WORLDMAT=128,H$Y.FILLTEXTURE=256,H$Y.SKINMESH=512,H$Y.SHADERDEFINE_FSHIGHPRECISION=1024,H$Y.TXTALPHA=2048,H$Y.TXTCOMPRESS=4096,H$Y.__name2int={},H$Y.__int2name=[],H$Y.__int2nameMap=[],H$Y}(),H$Rf=(function(H$f){function H$d(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){H$d.__super.call(this,H$f,H$K,H$Y,H$X,40,H$L,H$H,H$E)}H$y(H$d,"laya.webgl.shapes.Ellipse",H$Yf)}(),function(H$f){function H$H(H$f,H$K,H$Y,H$X,H$L){this._points=[],this.rebuild(H$Y),H$H.__super.call(this,H$f,H$K,0,0,0,H$L,H$X,H$L,0)}H$y(H$H,"laya.webgl.shapes.Line",H$Yf);var H$K=H$H.prototype;return H$K.rebuild=function(H$f){var H$K=H$f.length;H$K!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(H$K/2-1)),this.mFloat32Array=new Float32Array(5*H$K)),this._points.length=0;for(var H$Y=NaN,H$X=NaN,H$L=-1,H$H=-1,H$E=H$f.length/2,H$d=0;H$d<H$E;H$d++)H$Y=H$f[2*H$d],H$X=H$f[2*H$d+1],(.01<Math.abs(H$L-H$Y)||.01<Math.abs(H$H-H$X))&&this._points.push(H$Y,H$X),H$L=H$Y,H$H=H$X},H$K.getData=function(H$f,H$K,H$Y){var H$X=[],H$L=[];0<this.borderWidth&&this.createLine2(this._points,H$X,this.borderWidth,H$Y,H$L,this._points.length/2),this.mUint16Array.set(H$X,0),this.mFloat32Array.set(H$L,0),H$f.append(this.mUint16Array),H$K.append(this.mFloat32Array)},H$H}()),H$Vf=function(H$f){function H$Z(H$f,H$K,H$Y,H$X,H$L){this._points=[];for(var H$H=NaN,H$E=NaN,H$d=-1,H$O=-1,H$i=H$Y.length/2-1,H$U=0;H$U<H$i;H$U++)H$H=H$Y[2*H$U],H$E=H$Y[2*H$U+1],(.01<Math.abs(H$d-H$H)||.01<Math.abs(H$O-H$E))&&this._points.push(H$H,H$E),H$d=H$H,H$O=H$E;H$H=H$Y[2*H$i],H$E=H$Y[2*H$i+1],H$d=this._points[0],H$O=this._points[1],(.01<Math.abs(H$d-H$H)||.01<Math.abs(H$O-H$E))&&this._points.push(H$H,H$E),H$Z.__super.call(this,H$f,H$K,0,0,this._points.length/2,0,H$X,H$L)}H$y(H$Z,"laya.webgl.shapes.LoopLine",H$Yf);var H$K=H$Z.prototype;return H$K.getData=function(H$f,H$K,H$Y){if(0<this.borderWidth){for(var H$X=this.color,H$L=(H$X>>16&255)/255,H$H=(H$X>>8&255)/255,H$E=(255&H$X)/255,H$d=[],H$O=0,H$i=0,H$U=[],H$Z=Math.floor(this._points.length/2),H$y=0;H$y<H$Z;H$y++)H$O=this._points[2*H$y],H$i=this._points[2*H$y+1],H$d.push(this.x+H$O,this.y+H$i,H$L,H$H,H$E);this.createLoopLine(H$d,H$U,this.borderWidth,H$Y+H$d.length/5),H$f.append(new Uint16Array(H$U)),H$K.append(new Float32Array(H$d))}},H$K.createLoopLine=function(H$f,H$K,H$Y,H$X,H$L,H$H){H$f.length;var H$E=H$f.concat(),H$d=H$L||H$f,H$O=this.borderColor,H$i=(H$O>>16&255)/255,H$U=(H$O>>8&255)/255,H$Z=(255&H$O)/255,H$y=[H$E[0],H$E[1]],H$l=[H$E[H$E.length-5],H$E[H$E.length-4]],H$B=H$l[0]+.5*(H$y[0]-H$l[0]),H$$=H$l[1]+.5*(H$y[1]-H$l[1]);H$E.unshift(H$B,H$$,0,0,0),H$E.push(H$B,H$$,0,0,0);var H$h,H$A,H$x,H$S,H$z,H$C,H$s,H$a,H$I,H$n,H$_,H$G,H$m,H$R,H$V,H$t,H$T,H$k,H$e,H$Q,H$W=H$E.length/5,H$q=H$X,H$P=H$Y/2;H$x=H$E[0],H$S=H$E[1],H$n=H$x-(H$z=H$E[5]),H$I=(H$I=-(H$S-(H$C=H$E[6])))/(H$Q=Math.sqrt(H$I*H$I+H$n*H$n))*H$P,H$n=H$n/H$Q*H$P,H$d.push(H$x-H$I,H$S-H$n,H$i,H$U,H$Z,H$x+H$I,H$S+H$n,H$i,H$U,H$Z);for(var H$b=1;H$b<H$W-1;H$b++)H$x=H$E[5*(H$b-1)],H$S=H$E[5*(H$b-1)+1],H$z=H$E[5*H$b],H$C=H$E[5*H$b+1],H$s=H$E[5*(H$b+1)],H$a=H$E[5*(H$b+1)+1],H$n=H$x-H$z,H$G=H$z-H$s,H$V=(-(H$I=(H$I=-(H$S-H$C))/(H$Q=Math.sqrt(H$I*H$I+H$n*H$n))*H$P)+H$x)*(-(H$n=H$n/H$Q*H$P)+H$C)-(-H$I+H$z)*(-H$n+H$S),H$k=(-(H$_=(H$_=-(H$C-H$a))/(H$Q=Math.sqrt(H$_*H$_+H$G*H$G))*H$P)+H$s)*(-(H$G=H$G/H$Q*H$P)+H$C)-(-H$_+H$z)*(-H$G+H$a),H$e=(H$m=-H$n+H$S-(-H$n+H$C))*(H$T=-H$_+H$z-(-H$_+H$s))-(H$t=-H$G+H$a-(-H$G+H$C))*(H$R=-H$I+H$z-(-H$I+H$x)),Math.abs(H$e)<.1?(H$e+=10.1,H$d.push(H$z-H$I,H$C-H$n,H$i,H$U,H$Z,H$z+H$I,H$C+H$n,H$i,H$U,H$Z)):(((H$h=(H$R*H$k-H$T*H$V)/H$e)-H$z)*(H$h-H$z)+((H$A=(H$t*H$V-H$m*H$k)/H$e)-H$C)+(H$A-H$C),H$d.push(H$h,H$A,H$i,H$U,H$Z,H$z-(H$h-H$z),H$C-(H$A-H$C),H$i,H$U,H$Z));H$H&&(H$K=H$H);var H$J=this.edges+1;for(H$b=1;H$b<H$J;H$b++)H$K.push(H$q+2*(H$b-1),H$q+2*(H$b-1)+1,H$q+2*H$b+1,H$q+2*H$b+1,H$q+2*H$b,H$q+2*(H$b-1));return H$K.push(H$q+2*(H$b-1),H$q+2*(H$b-1)+1,H$q+1,H$q+1,H$q,H$q+2*(H$b-1)),H$d},H$Z}(),H$tf=function(H$f){function H$E(H$f,H$K,H$Y,H$X,H$L,H$H){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=H$n.create(),this._points=H$Y.slice(0,H$Y.length),H$E.__super.call(this,H$f,H$K,0,0,this._points.length/2,H$X,H$L,H$H)}H$y(H$E,"laya.webgl.shapes.Polygon",H$Yf);var H$K=H$E.prototype;return H$K.rebuild=function(H$f){this._repaint||(this._points.length=0,this._points=this._points.concat(H$f))},H$K.setMatrix=function(H$f){H$f.copyTo(this._mat)},H$K.needUpdate=function(H$f){return this._repaint=this._mat.a==H$f.a&&this._mat.b==H$f.b&&this._mat.c==H$f.c&&this._mat.d==H$f.d&&this._mat.tx==H$f.tx&&this._mat.ty==H$f.ty,!this._repaint},H$K.getData=function(H$f,H$K,H$Y){var H$X,H$L=0,H$H=this._points,H$E=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=H$Y){for(this._start=H$Y,H$X=[],H$E=this.earcutTriangles.length,H$L=0;H$L<H$E;H$L++)H$X.push(this.earcutTriangles[H$L]+H$Y);this.mUint16Array=new Uint16Array(H$X)}}else{this._start=H$Y,H$X=[];var H$d=[],H$O=[],H$i=this.color,H$U=(H$i>>16&255)/255,H$Z=(H$i>>8&255)/255,H$y=(255&H$i)/255;for(H$E=Math.floor(H$H.length/2),H$L=0;H$L<H$E;H$L++)H$d.push(this.x+H$H[2*H$L],this.y+H$H[2*H$L+1],H$U,H$Z,H$y),H$O.push(this.x+H$H[2*H$L],this.y+H$H[2*H$L+1]);for(this.earcutTriangles=H$Xf.earcut(H$O,null,2),H$E=this.earcutTriangles.length,H$L=0;H$L<H$E;H$L++)H$X.push(this.earcutTriangles[H$L]+H$Y);this.mUint16Array=new Uint16Array(H$X),this.mFloat32Array=new Float32Array(H$d)}H$f.append(this.mUint16Array),H$K.append(this.mFloat32Array)},H$E}(),H$Tf=function(H$f){function H$H(){this._matrix=new H$n,this._matrix4=H$$f.defaultMatrix4.concat(),H$H.__super.call(this,1e4),this.shaderValue=new H$If(0,0)}H$y(H$H,"laya.webgl.submit.SubmitCanvas",H$Hf);var H$K=H$H.prototype;return H$K.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var H$f=H$xf.worldAlpha,H$K=H$xf.worldMatrix4,H$Y=H$xf.worldMatrix,H$X=H$xf.worldFilters,H$L=H$xf.worldShaderDefines,H$H=this.shaderValue,H$E=this._matrix,H$d=this._matrix4,H$O=H$n.TEMP;return H$n.mul(H$E,H$Y,H$O),H$d[0]=H$O.a,H$d[1]=H$O.b,H$d[4]=H$O.c,H$d[5]=H$O.d,H$d[12]=H$O.tx,H$d[13]=H$O.ty,H$xf.worldMatrix=H$O.clone(),H$xf.worldMatrix4=H$d,H$xf.worldAlpha=H$xf.worldAlpha*H$H.alpha,H$H.filters&&H$H.filters.length&&(H$xf.worldFilters=H$H.filters,H$xf.worldShaderDefines=H$H.defines),this._ctx_src.flush(),H$xf.worldAlpha=H$f,H$xf.worldMatrix4=H$K,H$xf.worldMatrix.destroy(),H$xf.worldMatrix=H$Y,H$xf.worldFilters=H$X,H$xf.worldShaderDefines=H$L,1},H$K.releaseRender=function(){var H$f=H$H._cache;this._ctx_src=null,H$f[H$f._length++]=this},H$K.getRenderType=function(){return 10003},H$H.create=function(H$f,H$K,H$Y){var H$X=H$H._cache._length?H$H._cache[--H$H._cache._length]:new H$H;H$X._ctx_src=H$f;var H$L=H$X.shaderValue;return H$L.alpha=H$K,H$L.defines.setValue(0),H$Y&&H$Y.length&&H$L.setFilters(H$Y),H$X},H$H._cache=((H$H._cache=[])._length=0,H$H._cache),H$H}(),H$kf=function(H$f){function H$i(H$f){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===H$f&&(H$f=1e4),H$i.__super.call(this,H$f)}H$y(H$i,"laya.webgl.submit.SubmitTexture",H$Hf);var H$K=H$i.prototype;return H$K.releaseRender=function(){var H$f=H$i._cache;(H$f[H$f._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},H$K.addTexture=function(H$f,H$K){this._texsID[this._texs.length]=H$f._uvID,this._texs.push(H$f),this._vbPos.push(H$K)},H$K.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var H$f=this.shaderValue.textureHost.bitmap;if(null!==H$f)for(var H$K=this._vb.getFloat32Array(),H$Y=0,H$X=this._texs.length;H$Y<H$X;H$Y++){var H$L=this._texs[H$Y];H$L.active();var H$H=H$L.uv;if(this._texsID[H$Y]!==H$L._uvID){this._texsID[H$Y]=H$L._uvID;var H$E=this._vbPos[H$Y];H$K[H$E+2]=H$H[0],H$K[H$E+3]=H$H[1],H$K[H$E+6]=H$H[2],H$K[H$E+7]=H$H[3],H$K[H$E+10]=H$H[4],H$K[H$E+11]=H$H[5],H$K[H$E+14]=H$H[6],H$K[H$E+15]=H$H[7],this._vb.setNeedUpload()}H$L.bitmap!==H$f&&(this._isSameTexture=!1)}}},H$K.renderSubmit=function(){if(0===this._numEle)return H$i._shaderSet=!1,1;var H$f=this.shaderValue.textureHost;if(H$f){var H$K=H$f.source;if(!H$f.bitmap||!H$K)return H$i._shaderSet=!1,1;this.shaderValue.texture=H$K,H$f.alphaTexture&&H$f.alphaTexture.source&&(this.shaderValue.texture1=H$f.alphaTexture.source)}this._vb.bind_upload(this._ib);var H$Y=H$zf.mainContext;if(H$w.activeBlendFunction!==this._blendFn&&(H$Y.enable(3042),this._blendFn(H$Y),H$w.activeBlendFunction=this._blendFn),H$V.drawCall++,H$V.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&H$Qf.activeShader&&H$i._shaderSet?(H$Qf.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&H$Qf.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),H$i._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var H$X=H$f.bitmap,H$L=0,H$H=H$Qf.activeShader,H$E=0,H$d=this._texs.length;H$E<H$d;H$E++){var H$O=this._texs[H$E];H$O.bitmap===H$X&&H$E+1!==H$d||(H$H.uploadTexture2D(H$O.source),H$Y.drawElements(4,6*(H$E-H$L+1),5123,this._startIdx+6*H$L*H$$f.BYTES_PIDX),H$X=H$O.bitmap,H$L=H$E)}else H$Y.drawElements(4,this._numEle,5123,this._startIdx);return 1},H$i.create=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$i._cache._length?H$i._cache[--H$i._cache._length]:new H$i;null==H$Y&&((H$Y=H$H._selfVb||(H$H._selfVb=H$Ff.create(-1))).clear(),H$X=0),H$H._ib=H$K,H$H._vb=H$Y,H$H._startIdx=H$X*H$$f.BYTES_PIDX,H$H._numEle=0;var H$E=H$f._nBlendType;H$H._blendFn=H$f._targets?H$w.targetFns[H$E]:H$w.fns[H$E],H$H.shaderValue=H$L,H$H.shaderValue.setValue(H$f._shader2D);var H$d=H$f._shader2D.filters;return H$d&&H$H.shaderValue.setFilters(H$d),H$H},H$i._cache=((H$i._cache=[])._length=0,H$i._cache),H$i._shaderSet=!0,H$i}(),H$ef=function(H$f){function H$A(){H$A.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}H$y(H$A,"laya.webgl.utils.MeshTexture",H$Af);var H$K=H$A.prototype;return H$K.addData=function(H$f,H$K,H$Y,H$X,H$L,H$H){for(var H$E=H$f.length/2,H$d=this._vb.needSize(H$E*H$A.const_stride)>>2,H$O=this._vb.getFloat32Array(),H$i=0,H$U=0;H$U<H$E;H$U++){var H$Z=H$f[H$i],H$y=H$f[H$i+1],H$l=H$Z*H$X.a+H$y*H$X.c+H$X.tx,H$B=H$Z*H$X.b+H$y*H$X.d+H$X.ty;H$O[H$d++]=H$l,H$O[H$d++]=H$B,H$O[H$d++]=H$K[H$i],H$O[H$d++]=H$K[H$i+1],H$i+=2}this._vb.setNeedUpload();var H$$=this.vertNum;if(0<H$$){(H$E=H$Y.length)>H$A.tmpIdx.length&&(H$A.tmpIdx=new Uint16Array(H$E));for(var H$h=0;H$h<H$E;H$h++)H$A.tmpIdx[H$h]=H$Y[H$h]+H$$;this._ib.appendU16Array(H$A.tmpIdx,H$Y.length)}else this._ib.append(H$Y);this._ib.setNeedUpload(),this.vertNum+=H$E,this.indexNum+=H$Y.length},H$K.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},H$K.destroy=function(){this._ib.destroy(),this._vb.destroy()},H$A.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new H$A},H$A.const_stride=16,H$A._POOL=[],H$E(H$A,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),H$A}(),H$Qf=function(H$f){function H$K(){H$K.__super.call(this),this.lock=!0}return H$y(H$K,"laya.webgl.shader.BaseShader",H$S),H$K.activeShader=null,H$K.bindShader=null,H$K}(),H$Wf=function(H$K){function H$U(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===H$Y&&(H$Y=6408),void 0===H$X&&(H$X=5121),void 0===H$L&&(H$L=34041),void 0===H$H&&(H$H=!1),void 0===H$E&&(H$E=!1),void 0===H$d&&(H$d=-1),void 0===H$O&&(H$O=-1),this._type=1,this._w=H$f,this._h=H$K,this._surfaceFormat=H$Y,this._surfaceType=H$X,this._depthStencilFormat=H$L,H$A.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=H$H,this._repeat=H$E,this._minFifter=H$d,this._magFifter=H$O,this._createWebGLRenderTarget(),this.bitmap.lock=!0,H$U.__super.call(this,this.bitmap,H$e.INV_UV)}H$y(H$U,"laya.webgl.resource.RenderTarget2D",H$K);var H$f=H$U.prototype;return H$s.imps(H$f,{"laya.resource.IDispose":!0}),H$f.getType=function(){return this._type},H$f.getTexture=function(){return this},H$f.size=function(H$f,H$K){this._w==H$f&&this._h==H$K||(this._w=H$f,this._h=H$K,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},H$f.release=function(){this.destroy()},H$f.recycle=function(){H$U.POOL.push(this)},H$f.start=function(){var H$f=H$zf.mainContext;return this._preRenderTarget=H$xf.curRenderTarget,H$xf.curRenderTarget=this,H$f.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(H$f.viewport(0,0,this._w,this._h),this._svWidth=H$xf.width,this._svHeight=H$xf.height,H$xf.width=this._w,H$xf.height=this._h,H$Qf.activeShader=null),this},H$f.clear=function(H$f,H$K,H$Y,H$X){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=1);var H$L=H$zf.mainContext;H$L.clearColor(H$f,H$K,H$Y,H$X);var H$H=16384;switch(this._depthStencilFormat){case 33189:H$H|=256;break;case 36168:H$H|=1024;break;case 34041:H$H|=256,H$H|=1024}H$L.clear(H$H)},H$f.end=function(){var H$f=H$zf.mainContext;H$f.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,H$xf.curRenderTarget=this._preRenderTarget,1==this._type?(H$f.viewport(0,0,this._svWidth,this._svHeight),H$xf.width=this._svWidth,H$xf.height=this._svHeight,H$Qf.activeShader=null):H$f.viewport(0,0,H$s.stage.width,H$s.stage.height)},H$f.getData=function(H$f,H$K,H$Y,H$X){var H$L=H$zf.mainContext;if(H$L.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===H$L.checkFramebufferStatus(36160)))return H$L.bindFramebuffer(36160,null),null;var H$H=new Uint8Array(this._w*this._h*4);return H$L.readPixels(H$f,H$K,H$Y,H$X,this._surfaceFormat,this._surfaceType,H$H),H$L.bindFramebuffer(36160,null),H$H},H$f.destroy=function(H$f){void 0===H$f&&(H$f=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,H$K.prototype.destroy.call(this))},H$f.dispose=function(){},H$f._createWebGLRenderTarget=function(){this.bitmap=new H$cf(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(H$f){this.event("recovered")})},H$X(0,H$f,"surfaceFormat",function(){return this._surfaceFormat}),H$X(0,H$f,"magFifter",function(){return this._magFifter}),H$X(0,H$f,"surfaceType",function(){return this._surfaceType}),H$X(0,H$f,"mipMap",function(){return this._mipMap}),H$X(0,H$f,"depthStencilFormat",function(){return this._depthStencilFormat}),H$X(0,H$f,"minFifter",function(){return this._minFifter}),H$X(0,H$f,"source",function(){return this._alreadyResolved?H$s.superGet(H$e,this,"source"):null}),H$U.create=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){void 0===H$Y&&(H$Y=6408),void 0===H$X&&(H$X=5121),void 0===H$L&&(H$L=34041),void 0===H$H&&(H$H=!1),void 0===H$E&&(H$E=!1),void 0===H$d&&(H$d=-1),void 0===H$O&&(H$O=-1);var H$i=H$U.POOL.pop();return H$i||(H$i=new H$U(H$f,H$K)),H$i.bitmap&&H$i._w==H$f&&H$i._h==H$K&&H$i._surfaceFormat==H$Y&&H$i._surfaceType==H$X&&H$i._depthStencilFormat==H$L&&H$i._mipMap==H$H&&H$i._repeat==H$E&&H$i._minFifter==H$d&&H$i._magFifter==H$O||(H$i._w=H$f,H$i._h=H$K,H$i._surfaceFormat=H$Y,H$i._surfaceType=H$X,H$i._depthStencilFormat=H$L,H$A.isConchWebGL&&34041===H$i._depthStencilFormat&&(H$i._depthStencilFormat=33189),H$i._mipMap=H$H,H$i._repeat=H$E,H$i._minFifter=H$d,H$i._magFifter=H$O,H$i.release(),H$i._createWebGLRenderTarget()),H$i},H$U.TYPE2D=1,H$U.TYPE3D=2,H$U.POOL=[],H$U}(H$e),H$qf=function(H$f){function H$K(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,H$K.__super.call(this),H$K._gl=H$zf.mainContext}H$y(H$K,"laya.webgl.utils.Buffer",H$S);var H$Y=H$K.prototype;return H$Y._bind=function(){this.activeResource(),H$K._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(H$K._bindVertexBuffer=this._glBuffer),H$K._gl.bindBuffer(this._bufferType,H$K._bindActive[this._bufferType]=this._glBuffer),H$Qf.activeShader=null)},H$Y.recreateResource=function(){this._glBuffer||(this._glBuffer=H$K._gl.createBuffer()),this.completeCreate()},H$Y.disposeResource=function(){this._glBuffer&&(H$zf.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},H$X(0,H$Y,"bufferUsage",function(){return this._bufferUsage}),H$K._gl=null,H$K._bindActive={},H$K._bindVertexBuffer=null,H$K._enableAtributes=[],H$K}(),H$Pf=function(H$f){function H$Y(H$f){this.texcoord=null,this.offsetX=300,this.offsetY=0,H$Y.__super.call(this,512,0);var H$K=8*H$$f.BYTES_PE;this.position=[2,5126,!1,H$K,0],this.texcoord=[2,5126,!1,H$K,2*H$$f.BYTES_PE],this.color=[4,5126,!1,H$K,4*H$$f.BYTES_PE]}return H$y(H$Y,"laya.webgl.shader.d2.skinAnishader.SkinSV",H$If),H$Y}(),H$bf=function(H$f){function H$K(H$f){H$K.__super.call(this,2,0),this.color=[]}return H$y(H$K,"laya.webgl.shader.d2.value.Color2dSV",H$If),H$K.prototype.setValue=function(H$f){H$f.fillStyle&&(this.color=H$f.fillStyle._color._color),H$f.strokeStyle&&(this.color=H$f.strokeStyle._color._color)},H$K}(),H$Jf=function(H$f){function H$K(H$f){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=H$If._TEXCOORD,H$K.__super.call(this,256,0)}H$y(H$K,"laya.webgl.shader.d2.value.FillTextureSV",H$If);var H$Y=H$K.prototype;return H$Y.setValue=function(H$f){this.ALPHA=H$f.ALPHA,H$f.filters&&this.setFilters(H$f.filters)},H$Y.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},H$K}(),H$Mf=function(H$f){function H$K(H$f){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=H$If._TEXCOORD,void 0===H$f&&(H$f=0),H$K.__super.call(this,1,H$f)}H$y(H$K,"laya.webgl.shader.d2.value.TextureSV",H$If);var H$Y=H$K.prototype;return H$Y.setValue=function(H$f){this.ALPHA=H$f.ALPHA,H$f.filters&&this.setFilters(H$f.filters)},H$Y.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},H$K}(),H$wf=function(H$f){function H$K(H$f){this.a_color=null,this.u_pos=[0,0],H$K.__super.call(this,4,0),this.position=[2,5126,!1,5*H$$f.BYTES_PE,0],this.a_color=[3,5126,!1,5*H$$f.BYTES_PE,2*H$$f.BYTES_PE]}return H$y(H$K,"laya.webgl.shader.d2.value.PrimitiveSV",H$If),H$K}(),H$rf=function(H$f){function H$K(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,H$K.__super.call(this)}H$y(H$K,"laya.webgl.atlas.AtlasWebGLCanvas",H$f);var H$Y=H$K.prototype;return H$Y.recreateResource=function(){var H$f=H$zf.mainContext,H$K=this._source=H$f.createTexture(),H$Y=H$Cf.curBindTexTarget,H$X=H$Cf.curBindTexValue;H$Cf.bindTexture(H$f,3553,H$K),H$f.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),H$f.texParameteri(3553,10241,9729),H$f.texParameteri(3553,10240,9729),H$f.texParameteri(3553,10242,33071),H$f.texParameteri(3553,10243,33071),H$Y&&H$X&&H$Cf.bindTexture(H$f,H$Y,H$X),this.memorySize=this._w*this._h*4,this.completeCreate()},H$Y.disposeResource=function(){this._source&&(H$zf.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$Y.texSubImage2D=function(H$f,H$K,H$Y){if(H$A.isFlash){this._flashCacheImage||(this._flashCacheImage=H$$.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var H$X=H$Y.bitmapdata;this._flashCacheImage._image.copyPixels(H$X,0,0,H$X.width,H$X.height,H$f,H$K),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var H$L=H$zf.mainContext,H$H=H$Cf.curBindTexTarget,H$E=H$Cf.curBindTexValue;H$Cf.bindTexture(H$L,3553,this._source),H$L.pixelStorei(37441,!0),0<=H$f-1&&H$L.texSubImage2D(3553,0,H$f-1,H$K,6408,5121,H$Y),H$f+1<=this._w&&H$L.texSubImage2D(3553,0,H$f+1,H$K,6408,5121,H$Y),0<=H$K-1&&H$L.texSubImage2D(3553,0,H$f,H$K-1,6408,5121,H$Y),H$K+1<=this._h&&H$L.texSubImage2D(3553,0,H$f,H$K+1,6408,5121,H$Y),H$L.texSubImage2D(3553,0,H$f,H$K,6408,5121,H$Y),H$L.pixelStorei(37441,!1),H$H&&H$E&&H$Cf.bindTexture(H$L,H$H,H$E)}},H$Y.texSubImage2DPixel=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$zf.mainContext,H$E=H$Cf.curBindTexTarget,H$d=H$Cf.curBindTexValue;H$Cf.bindTexture(H$H,3553,this._source);var H$O=new Uint8Array(H$L.data);H$H.pixelStorei(37441,!0),H$H.texSubImage2D(3553,0,H$f,H$K,H$Y,H$X,6408,5121,H$O),H$H.pixelStorei(37441,!1),H$E&&H$d&&H$Cf.bindTexture(H$H,H$E,H$d)},H$X(0,H$Y,"width",H$f.prototype._$get_width,function(H$f){this._w=H$f}),H$X(0,H$Y,"height",H$f.prototype._$get_height,function(H$f){this._h=H$f}),H$K}(H$Y),H$vf=function(H$f){function H$L(){this.flipY=!0,this.alwaysChange=!1,H$L.__super.call(this)}H$y(H$L,"laya.webgl.resource.WebGLCanvas",H$Y);var H$K=H$L.prototype;return H$K.getCanvas=function(){return this._canvas},H$K.clear=function(){this._ctx&&this._ctx.clear()},H$K.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},H$K._setContext=function(H$f){this._ctx=H$f},H$K.getContext=function(H$f,H$K){return this._ctx?this._ctx:this._ctx=H$L._createContext(this)},H$K.size=function(H$f,H$K){this._w==H$f&&this._h==H$K||(this._w=H$f,this._h=H$K,this._ctx&&this._ctx.size(H$f,H$K),this._canvas&&(this._canvas.height=H$K,this._canvas.width=H$f))},H$K.activeResource=function(H$f){void 0===H$f&&(H$f=!1),this._source||this.recreateResource()},H$K.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},H$K.disposeResource=function(){this._source&&!this.iscpuSource&&(H$zf.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$K.createWebGlTexture=function(){var H$f=H$zf.mainContext;this._canvas;var H$K=this._source=H$f.createTexture();this.iscpuSource=!1;var H$Y=H$Cf.curBindTexTarget,H$X=H$Cf.curBindTexValue;H$Cf.bindTexture(H$f,3553,H$K),H$f.pixelStorei(37440,this.flipY?1:0),H$L.premulAlpha&&H$f.pixelStorei(37441,!0),H$f.texImage2D(3553,0,6408,6408,5121,this._imgData),H$L.premulAlpha&&H$f.pixelStorei(37441,!1),H$f.texParameteri(3553,10240,9729),H$f.texParameteri(3553,10241,9729),H$f.texParameteri(3553,10242,33071),H$f.texParameteri(3553,10243,33071),H$f.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,H$Y&&H$X&&H$Cf.bindTexture(H$f,H$Y,H$X)},H$K.reloadCanvasData=function(){var H$f=H$zf.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var H$K=H$Cf.curBindTexTarget,H$Y=H$Cf.curBindTexValue;H$Cf.bindTexture(H$f,3553,this._source),H$L.premulAlpha&&H$f.pixelStorei(37441,!0),H$f.texImage2D(3553,0,6408,6408,5121,this._imgData),H$L.premulAlpha&&H$f.pixelStorei(37441,!1),H$f.pixelStorei(37440,0),H$K&&H$Y&&H$Cf.bindTexture(H$f,H$K,H$Y)},H$K.texSubImage2D=function(H$f,H$K,H$Y){var H$X=H$zf.mainContext,H$L=H$Cf.curBindTexTarget,H$H=H$Cf.curBindTexValue;H$Cf.bindTexture(H$X,3553,this._source),H$X.pixelStorei(37441,!0),H$X.texSubImage2D(3553,0,H$K,H$Y,6408,5121,H$f._source),H$X.pixelStorei(37441,!1),H$L&&H$H&&H$Cf.bindTexture(H$X,H$L,H$H)},H$K.toBase64=function(H$f,H$K,H$Y){var H$X=null;this._canvas&&(H$X=this._canvas.toDataURL(H$f,H$K)),H$Y.call(this,H$X)},H$X(0,H$K,"context",function(){return this._ctx}),H$X(0,H$K,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),H$X(0,H$K,"asBitmap",null,function(H$f){this._ctx&&(this._ctx.asBitmap=H$f)}),H$L._createContext=null,H$L.premulAlpha=!1,H$L}(),H$jf=function(H$f){function H$H(H$f,H$K){this.CborderSize=12,H$H.__super.call(this),this.char=H$f,this.isSpace=" "===H$f,this.xs=H$K.scaleX,this.ys=H$K.scaleY,this.font=H$K.font.toString(),this.fontSize=H$K.font.size,this.fillColor=H$K.fillColor,this.borderColor=H$K.borderColor,this.lineWidth=H$K.lineWidth,this.underLine=H$K.underLine;var H$Y,H$X=H$A.isConchApp;H$X?((H$Y=ConchTextCanvas)._source=ConchTextCanvas,H$Y._source.canvas=ConchTextCanvas):H$Y=H$l.canvas.source,this.canvas=H$Y,this._enableMerageInAtlas=!0,this._ctx=H$X?H$Y:this.canvas.getContext("2d",void 0);var H$L=H$Q.measureText(this.char,this.font);this.cw=H$L.width*this.xs,this.ch=(H$L.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new H$e(this)}H$y(H$H,"laya.webgl.resource.WebGLCharImage",H$Y);var H$K=H$H.prototype;return H$s.imps(H$K,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H$K.active=function(){this.texture.active()},H$K.recreateResource=function(){var H$f=H$A.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),H$f){var H$K=this.fontSize;1==this.xs&&1==this.ys||(H$K=parseInt(H$K*(this.xs>this.ys?this.xs:this.ys)+""));var H$Y="normal 100 "+this.font;H$Y=H$Y.replace(H$H._fontSizeReg,H$K),this.borderColor&&(H$Y+=" 1 "+this.borderColor),this._ctx.font=H$Y,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,H$k.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var H$X=this._ctx.measureText(this.char);H$X||(H$X={width:16});var H$L=H$X.width+1;this._ctx.lineTo(H$L,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},H$K.onresize=function(H$f,H$K){this._w=H$f,this._h=H$K,this._allowMerageInAtlas=!0},H$K.clearAtlasSource=function(){},H$X(0,H$K,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H$X(0,H$K,"atlasSource",function(){return this.canvas}),H$X(0,H$K,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(H$f){this._enableMerageInAtlas=H$f}),H$H.createOneChar=function(H$f,H$K){return new H$H(H$f,H$K)},H$H._fontSizeReg=new RegExp("\\d+(?=px)","g"),H$H}(),H$cf=function(H$f){function H$i(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){void 0===H$Y&&(H$Y=6408),void 0===H$X&&(H$X=5121),void 0===H$L&&(H$L=34041),void 0===H$H&&(H$H=!1),void 0===H$E&&(H$E=!1),void 0===H$d&&(H$d=-1),void 0===H$O&&(H$O=1),H$i.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=H$f,this._h=H$K,this._surfaceFormat=H$Y,this._surfaceType=H$X,this._depthStencilFormat=H$L,this._mipMap=H$H,this._repeat=H$E,this._minFifter=H$d,this._magFifter=H$O}H$y(H$i,"laya.webgl.resource.WebGLRenderTarget",H$Y);var H$K=H$i.prototype;return H$K.recreateResource=function(){var H$f=H$zf.mainContext;this._frameBuffer||(this._frameBuffer=H$f.createFramebuffer()),this._source||(this._source=H$f.createTexture());var H$K=H$Cf.curBindTexTarget,H$Y=H$Cf.curBindTexValue;H$Cf.bindTexture(H$f,3553,this._source),H$f.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var H$X=this._minFifter,H$L=this._magFifter,H$H=this._repeat?10497:33071,H$E=H$U.isPOT(this._w,this._h);if(H$E?(this._mipMap?-1!==H$X||(H$X=9987):-1!==H$X||(H$X=9729),-1!==H$L||(H$L=9729),H$f.texParameteri(3553,10241,H$X),H$f.texParameteri(3553,10240,H$L),H$f.texParameteri(3553,10242,H$H),H$f.texParameteri(3553,10243,H$H),this._mipMap&&H$f.generateMipmap(3553)):(-1!==H$X||(H$X=9729),-1!==H$L||(H$L=9729),H$f.texParameteri(3553,10241,H$X),H$f.texParameteri(3553,10240,H$L),H$f.texParameteri(3553,10242,33071),H$f.texParameteri(3553,10243,33071)),H$f.bindFramebuffer(36160,this._frameBuffer),H$f.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=H$f.createRenderbuffer()),H$f.bindRenderbuffer(36161,this._depthStencilBuffer),H$f.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:H$f.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:H$f.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:H$f.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}H$f.bindFramebuffer(36160,null),H$K&&H$Y&&H$Cf.bindTexture(H$f,H$K,H$Y),H$f.bindRenderbuffer(36161,null),H$E&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},H$K.disposeResource=function(){this._frameBuffer&&(H$zf.mainContext.deleteTexture(this._source),H$zf.mainContext.deleteFramebuffer(this._frameBuffer),H$zf.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},H$X(0,H$K,"depthStencilBuffer",function(){return this._depthStencilBuffer}),H$X(0,H$K,"frameBuffer",function(){return this._frameBuffer}),H$i}(),H$pf=function(H$f){function H$d(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this.offsetX=0,this.offsetY=0,H$d.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=H$H,this.canvas=H$f,this._ctx=H$f.getContext("2d",void 0),this._w=H$X,this._h=H$L,this.offsetX=H$K,this.offsetY=H$Y,this.src=H$E,this._enableMerageInAtlas=!0,H$J.enabled&&this._w<H$J.atlasLimitWidth&&this._h<H$J.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}H$y(H$d,"laya.webgl.resource.WebGLSubImage",H$Y);var H$K=H$d.prototype;return H$s.imps(H$K,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H$K.size=function(H$f,H$K){this._w=H$f,this._h=H$K,this._ctx&&this._ctx.size(H$f,H$K),this.canvas&&(this.canvas.height=H$K,this.canvas.width=H$f)},H$K.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},H$K.createWebGlTexture=function(){var H$f=H$zf.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var H$K=this._source=H$f.createTexture(),H$Y=H$Cf.curBindTexTarget,H$X=H$Cf.curBindTexValue;H$Cf.bindTexture(H$f,3553,H$K),H$f.pixelStorei(37441,!0),H$f.texImage2D(3553,0,6408,6408,5121,this.canvas),H$f.pixelStorei(37441,!1);var H$L=this.minFifter,H$H=this.magFifter,H$E=this.repeat?10497:33071,H$d=H$U.isPOT(this.width,this.height);H$d?(this.mipmap?-1!==H$L||(H$L=9987):-1!==H$L||(H$L=9729),-1!==H$H||(H$H=9729),H$f.texParameteri(3553,10240,H$H),H$f.texParameteri(3553,10241,H$L),H$f.texParameteri(3553,10242,H$E),H$f.texParameteri(3553,10243,H$E),this.mipmap&&H$f.generateMipmap(3553)):(-1!==H$L||(H$L=9729),-1!==H$H||(H$H=9729),H$f.texParameteri(3553,10241,H$L),H$f.texParameteri(3553,10240,H$H),H$f.texParameteri(3553,10242,33071),H$f.texParameteri(3553,10243,33071)),H$Y&&H$X&&H$Cf.bindTexture(H$f,H$Y,H$X),this.canvas=null,H$d&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},H$K.disposeResource=function(){H$J.enabled&&this._allowMerageInAtlas||!this._source||(H$zf.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$K.clearAtlasSource=function(){},H$X(0,H$K,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H$X(0,H$K,"atlasSource",function(){return this.canvas}),H$X(0,H$K,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(H$f){this._allowMerageInAtlas=H$f}),H$d}(),H$uf=function(H$f){function H$i(H$f,H$K,H$Y,H$X){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,H$i.__super.call(this),!H$f||!H$K)throw"Shader Error";this._id=++H$i._count,this._vs=H$f,this._ps=H$K,this._nameMap=H$X||{},null!=H$Y&&(H$i.sharders[H$Y]=this)}H$y(H$i,"laya.webgl.shader.Shader",H$Qf);var H$K=H$i.prototype;return H$K.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},H$K.disposeResource=function(){H$zf.mainContext.deleteShader(this._vshader),H$zf.mainContext.deleteShader(this._pshader),H$zf.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},H$K._compile=function(){if(!H$zf.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var H$f=[this._vs,this._ps],H$K=H$zf.mainContext;if(this._program=H$K.createProgram(),this._vshader=H$i._createShader(H$K,H$f[0],35633),this._pshader=H$i._createShader(H$K,H$f[1],35632),H$K.attachShader(this._program,this._vshader),H$K.attachShader(this._program,this._pshader),H$K.linkProgram(this._program),!H$A.isConchApp&&!H$K.getProgramParameter(this._program,35714))throw H$K.getProgramInfoLog(this._program);var H$Y,H$X,H$L=0,H$H=0;for(H$H=H$A.isConchApp?H$K.getProgramParameterEx(this._vs,this._ps,"",35721):H$K.getProgramParameter(this._program,35721),H$L=0;H$L<H$H;H$L++){var H$E=null;H$Y={vartype:"attribute",glfun:null,ivartype:0,attrib:H$E=H$A.isConchApp?H$K.getActiveAttribEx(this._vs,this._ps,"",H$L):H$K.getActiveAttrib(this._program,H$L),location:H$K.getAttribLocation(this._program,H$E.name),name:H$E.name,type:H$E.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(H$Y)}var H$d=0;for(H$d=H$A.isConchApp?H$K.getProgramParameterEx(this._vs,this._ps,"",35718):H$K.getProgramParameter(this._program,35718),H$L=0;H$L<H$d;H$L++){var H$O=null;H$O=H$A.isConchApp?H$K.getActiveUniformEx(this._vs,this._ps,"",H$L):H$K.getActiveUniform(this._program,H$L),0<(H$Y={vartype:"uniform",glfun:null,ivartype:1,attrib:H$E,location:H$K.getUniformLocation(this._program,H$O.name),name:H$O.name,type:H$O.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(H$Y.name=H$Y.name.substr(0,H$Y.name.length-3),H$Y.isArray=!0,H$Y.location=H$K.getUniformLocation(this._program,H$Y.name)),this._params.push(H$Y)}for(H$L=0,H$X=this._params.length;H$L<H$X;H$L++)if((H$Y=this._params[H$L]).indexOfParams=H$L,H$Y.index=1,H$Y.value=[H$Y.location,null],H$Y.codename=H$Y.name,H$Y.name=this._nameMap[H$Y.codename]?this._nameMap[H$Y.codename]:H$Y.codename,(this._paramsMap[H$Y.name]=H$Y)._this=this,H$Y.uploadedValue=[],"attribute"!==H$Y.vartype)switch(H$Y.type){case 5124:H$Y.fun=H$Y.isArray?this._uniform1iv:this._uniform1i;break;case 5126:H$Y.fun=H$Y.isArray?this._uniform1fv:this._uniform1f;break;case 35664:H$Y.fun=H$Y.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:H$Y.fun=H$Y.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:H$Y.fun=H$Y.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:H$Y.fun=this._uniform_sampler2D;break;case 35680:H$Y.fun=this._uniform_samplerCube;break;case 35676:H$Y.glfun=H$K.uniformMatrix4fv,H$Y.fun=this._uniformMatrix4fv;break;case 35670:H$Y.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else H$Y.fun=this._attribute}},H$K.getUniform=function(H$f){return this._paramsMap[H$f]},H$K._attribute=function(H$f,H$K){var H$Y=H$zf.mainContext,H$X=H$qf._enableAtributes,H$L=H$f.location;return H$X[H$L]||H$Y.enableVertexAttribArray(H$L),H$Y.vertexAttribPointer(H$L,H$K[0],H$K[1],H$K[2],H$K[3],H$K[4]+this._offset),H$X[H$L]=H$qf._bindVertexBuffer,1},H$K._uniform1f=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K?(H$zf.mainContext.uniform1f(H$f.location,H$Y[0]=H$K),1):0},H$K._uniform1fv=function(H$f,H$K){if(H$K.length<4){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]||H$Y[3]!==H$K[3]?(H$zf.mainContext.uniform1fv(H$f.location,H$K),H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2],H$Y[3]=H$K[3],1):0}return H$zf.mainContext.uniform1fv(H$f.location,H$K),1},H$K._uniform_vec2=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]?(H$zf.mainContext.uniform2f(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1]),1):0},H$K._uniform_vec2v=function(H$f,H$K){if(H$K.length<2){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]||H$Y[3]!==H$K[3]?(H$zf.mainContext.uniform2fv(H$f.location,H$K),H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2],H$Y[3]=H$K[3],1):0}return H$zf.mainContext.uniform2fv(H$f.location,H$K),1},H$K._uniform_vec3=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]?(H$zf.mainContext.uniform3f(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2]),1):0},H$K._uniform_vec3v=function(H$f,H$K){return H$zf.mainContext.uniform3fv(H$f.location,H$K),1},H$K._uniform_vec4=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]||H$Y[3]!==H$K[3]?(H$zf.mainContext.uniform4f(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2],H$Y[3]=H$K[3]),1):0},H$K._uniform_vec4v=function(H$f,H$K){return H$zf.mainContext.uniform4fv(H$f.location,H$K),1},H$K._uniformMatrix2fv=function(H$f,H$K){return H$zf.mainContext.uniformMatrix2fv(H$f.location,!1,H$K),1},H$K._uniformMatrix3fv=function(H$f,H$K){return H$zf.mainContext.uniformMatrix3fv(H$f.location,!1,H$K),1},H$K._uniformMatrix4fv=function(H$f,H$K){return H$zf.mainContext.uniformMatrix4fv(H$f.location,!1,H$K),1},H$K._uniform1i=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K?(H$zf.mainContext.uniform1i(H$f.location,H$Y[0]=H$K),1):0},H$K._uniform1iv=function(H$f,H$K){return H$zf.mainContext.uniform1iv(H$f.location,H$K),1},H$K._uniform_ivec2=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]?(H$zf.mainContext.uniform2i(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1]),1):0},H$K._uniform_ivec2v=function(H$f,H$K){return H$zf.mainContext.uniform2iv(H$f.location,H$K),1},H$K._uniform_vec3i=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]?(H$zf.mainContext.uniform3i(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2]),1):0},H$K._uniform_vec3vi=function(H$f,H$K){return H$zf.mainContext.uniform3iv(H$f.location,H$K),1},H$K._uniform_vec4i=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]||H$Y[3]!==H$K[3]?(H$zf.mainContext.uniform4i(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2],H$Y[3]=H$K[3]),1):0},H$K._uniform_vec4vi=function(H$f,H$K){return H$zf.mainContext.uniform4iv(H$f.location,H$K),1},H$K._uniform_sampler2D=function(H$f,H$K){var H$Y=H$zf.mainContext,H$X=H$f.uploadedValue;return null==H$X[0]?(H$X[0]=this._curActTexIndex,H$Y.uniform1i(H$f.location,this._curActTexIndex),H$Y.activeTexture(H$i._TEXTURES[this._curActTexIndex]),H$Cf.bindTexture(H$Y,3553,H$K),this._curActTexIndex++,1):(H$Y.activeTexture(H$i._TEXTURES[H$X[0]]),H$Cf.bindTexture(H$Y,3553,H$K),0)},H$K._uniform_samplerCube=function(H$f,H$K){var H$Y=H$zf.mainContext,H$X=H$f.uploadedValue;return null==H$X[0]?(H$X[0]=this._curActTexIndex,H$Y.uniform1i(H$f.location,this._curActTexIndex),H$Y.activeTexture(H$i._TEXTURES[this._curActTexIndex]),H$Cf.bindTexture(H$Y,34067,H$K),this._curActTexIndex++,1):(H$Y.activeTexture(H$i._TEXTURES[H$X[0]]),H$Cf.bindTexture(H$Y,34067,H$K),0)},H$K._noSetValue=function(H$f){console.log("no....:"+H$f.name)},H$K.uploadOne=function(H$f,H$K){this.activeResource(),H$Cf.UseProgram(this._program);var H$Y=this._paramsMap[H$f];H$Y.fun.call(this,H$Y,H$K)},H$K.uploadTexture2D=function(H$f){H$V.shaderCall++;var H$K=H$zf.mainContext;H$K.activeTexture(33984),H$Cf.bindTexture(H$K,3553,H$f)},H$K.uploadTexture2D1=function(H$f){H$V.shaderCall++;var H$K=H$zf.mainContext;H$K.activeTexture(33985),H$Cf.bindTexture(H$K,3553,H$f)},H$K.upload=function(H$f,H$K){H$Qf.activeShader=H$Qf.bindShader=this,this._lastUseFrameCount===H$V.loopCount||this.activeResource(),H$Cf.UseProgram(this._program),this._reCompile?(H$K=this._params,this._reCompile=!1):H$K=H$K||this._params;H$zf.mainContext;for(var H$Y,H$X,H$L=H$K.length,H$H=0,H$E=0;H$E<H$L;H$E++)null!==(H$X=H$f[(H$Y=H$K[H$E]).name])&&(H$H+=H$Y.fun.call(this,H$Y,H$X));H$V.shaderCall+=H$H},H$K.uploadArray=function(H$f,H$K,H$Y){H$Qf.activeShader=this,(H$Qf.bindShader=this).activeResource(),H$Cf.UseProgram(this._program);this._params;for(var H$X,H$L,H$H=0,H$E=H$K-2;0<=H$E;H$E-=2)(H$L=this._paramsMap[H$f[H$E]])&&null!=(H$X=H$f[H$E+1])&&(H$Y&&H$Y[H$L.name]&&H$Y[H$L.name].bind(),H$H+=H$L.fun.call(this,H$L,H$X));H$V.shaderCall+=H$H},H$K.getParams=function(){return this._params},H$i.getShader=function(H$f){return H$i.sharders[H$f]},H$i.create=function(H$f,H$K,H$Y,H$X){return new H$i(H$f,H$K,H$Y,H$X)},H$i.withCompile=function(H$f,H$K,H$Y,H$X){if(H$Y&&H$i.sharders[H$Y])return H$i.sharders[H$Y];var H$L=H$i._preCompileShader[2e-4*H$f];if(!H$L)throw new Error("withCompile shader err!"+H$f);return H$L.createShader(H$K,H$Y,H$X)},H$i.withCompile2D=function(H$f,H$K,H$Y,H$X,H$L){if(H$X&&H$i.sharders[H$X])return H$i.sharders[H$X];var H$H=H$i._preCompileShader[2e-4*H$f+H$K];if(!H$H)throw new Error("withCompile shader err!"+H$f+" "+H$K);return H$H.createShader(H$Y,H$X,H$L)},H$i.addInclude=function(H$f,H$K){H$Sf.addInclude(H$f,H$K)},H$i.preCompile=function(H$f,H$K,H$Y,H$X){var H$L=2e-4*H$f;H$i._preCompileShader[H$L]=new H$Sf(H$L,H$K,H$Y,H$X)},H$i.preCompile2D=function(H$f,H$K,H$Y,H$X,H$L){var H$H=2e-4*H$f+H$K;H$i._preCompileShader[H$H]=new H$Sf(H$H,H$Y,H$X,H$L)},H$i._createShader=function(H$f,H$K,H$Y){var H$X=H$f.createShader(H$Y);return H$f.shaderSource(H$X,H$K),H$f.compileShader(H$X),H$X},H$i._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],H$i._count=0,H$i._preCompileShader={},H$i.SHADERNAME2ID=2e-4,H$i.sharders=((H$i.sharders=[]).length=32,H$i.sharders),H$E(H$i,["nameKey",function(){return this.nameKey=new H$t}]),H$i}(),H$Df=function(H$f){function H$K(){this._maxsize=0,this._upload=!0,this._uploadSize=0,H$K.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}H$y(H$K,"laya.webgl.utils.Buffer2D",H$f);var H$Y=H$K.prototype;return H$Y.needSize=function(H$f){var H$K=this._byteLength;if(H$f){var H$Y=this._byteLength+H$f;H$Y<=this._buffer.byteLength||this._resizeBuffer(H$Y<<1,!0),this._byteLength=H$Y}return H$K},H$Y._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),H$V.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,H$qf._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),H$qf._gl.bufferSubData(this._bufferType,0,this._buffer)},H$Y._bufferSubData=function(H$f,H$K,H$Y){if(void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),this._maxsize=Math.max(this._maxsize,this._byteLength),H$V.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,H$qf._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),H$K||H$Y){var H$X=this._buffer.slice(H$K,H$Y);H$qf._gl.bufferSubData(this._bufferType,H$f,H$X)}else H$qf._gl.bufferSubData(this._bufferType,H$f,this._buffer)},H$Y._checkArrayUse=function(){},H$Y._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},H$Y._bind_subUpload=function(H$f,H$K,H$Y){return void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(H$f,H$K,H$Y),!0)},H$Y._resizeBuffer=function(H$f,H$K){if(H$f<this._buffer.byteLength)return this;if(this.memorySize=H$f,H$K&&this._buffer&&0<this._buffer.byteLength){var H$Y=new ArrayBuffer(H$f);new Uint8Array(H$Y).set(new Uint8Array(this._buffer),0),this._buffer=H$Y}else this._buffer=new ArrayBuffer(H$f);return this._checkArrayUse(),this._upload=!0,this},H$Y.append=function(H$f){this._upload=!0;var H$K,H$Y;H$K=H$f.byteLength,H$f instanceof Uint8Array?(this._resizeBuffer(this._byteLength+H$K,!0),H$Y=new Uint8Array(this._buffer,this._byteLength)):H$f instanceof Uint16Array?(this._resizeBuffer(this._byteLength+H$K,!0),H$Y=new Uint16Array(this._buffer,this._byteLength)):H$f instanceof Float32Array&&(this._resizeBuffer(this._byteLength+H$K,!0),H$Y=new Float32Array(this._buffer,this._byteLength)),H$Y.set(H$f,0),this._byteLength+=H$K,this._checkArrayUse()},H$Y.appendU16Array=function(H$f,H$K){this._resizeBuffer(this._byteLength+2*H$K,!0);for(var H$Y=new Uint16Array(this._buffer,this._byteLength,H$K),H$X=0;H$X<H$K;H$X++)H$Y[H$X]=H$f[H$X];this._byteLength+=2*H$K,this._checkArrayUse()},H$Y.appendEx=function(H$f,H$K){this._upload=!0;var H$Y;H$Y=H$f.byteLength,this._resizeBuffer(this._byteLength+H$Y,!0),new H$K(this._buffer,this._byteLength).set(H$f,0),this._byteLength+=H$Y,this._checkArrayUse()},H$Y.appendEx2=function(H$f,H$K,H$Y,H$X){void 0===H$X&&(H$X=1),this._upload=!0;var H$L,H$H;H$L=H$Y*H$X,this._resizeBuffer(this._byteLength+H$L,!0),H$H=new H$K(this._buffer,this._byteLength);var H$E=0;for(H$E=0;H$E<H$Y;H$E++)H$H[H$E]=H$f[H$E];this._byteLength+=H$L,this._checkArrayUse()},H$Y.getBuffer=function(){return this._buffer},H$Y.setNeedUpload=function(){this._upload=!0},H$Y.getNeedUpload=function(){return this._upload},H$Y.upload=function(){var H$f=this._bind_upload();return H$qf._gl.bindBuffer(this._bufferType,null),H$qf._bindActive[this._bufferType]=null,H$Qf.activeShader=null,H$f},H$Y.subUpload=function(H$f,H$K,H$Y){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0);var H$X=this._bind_subUpload();return H$qf._gl.bindBuffer(this._bufferType,null),H$qf._bindActive[this._bufferType]=null,H$Qf.activeShader=null,H$X},H$Y.disposeResource=function(){H$f.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},H$Y.clear=function(){this._byteLength=0,this._upload=!0},H$X(0,H$Y,"bufferLength",function(){return this._buffer.byteLength}),H$X(0,H$Y,"byteLength",null,function(H$f){this._byteLength!==H$f&&(H$f<=this._buffer.byteLength||this._resizeBuffer(2*H$f+256,!0),this._byteLength=H$f)}),H$K.__int__=function(H$f){H$of.QuadrangleIB=H$of.create(35044),H$hf.fillIBQuadrangle(H$of.QuadrangleIB,16)},H$K.FLOAT32=4,H$K.SHORT=2,H$K}(H$qf),H$gf=(function(H$K){function H$Y(H$f){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,H$Y.__super.call(this,9)}H$y(H$Y,"laya.webgl.shader.d2.value.GlowSV",H$K);var H$f=H$Y.prototype;H$f.setValue=function(H$f){H$K.prototype.setValue.call(this,H$f)},H$f.clear=function(){H$K.prototype.clear.call(this)}}(H$Mf),function(H$f){function H$K(H$f){H$K.__super.call(this,64),this.defines.add(64)}H$y(H$K,"laya.webgl.shader.d2.value.TextSV",H$f);var H$Y=H$K.prototype;return H$Y.release=function(){(H$K.pool[H$K._length++]=this).clear()},H$Y.clear=function(){H$f.prototype.clear.call(this)},H$K.create=function(){return H$K._length?H$K.pool[--H$K._length]:new H$K(null)},H$K.pool=[],H$K._length=0,H$K}(H$Mf)),H$Nf=function(H$f){function H$L(H$f,H$K,H$Y,H$X){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,H$L.__super.call(this,H$f,H$K,H$Y,H$X)}H$y(H$L,"laya.webgl.shader.d2.Shader2X",H$f);var H$K=H$L.prototype;return H$K.upload2dQuick1=function(H$f){this.upload(H$f,this._params2dQuick1||this._make2dQuick1())},H$K._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var H$f,H$K=this._params,H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++)H$f=H$K[H$Y],(H$A.isFlash||"size"!==H$f.name&&"position"!==H$f.name&&"texcoord"!==H$f.name)&&this._params2dQuick1.push(H$f)}return this._params2dQuick1},H$K.disposeResource=function(){H$f.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},H$K.upload2dQuick2=function(H$f){this.upload(H$f,this._params2dQuick2||this._make2dQuick2())},H$K._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var H$f,H$K=this._params,H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++)H$f=H$K[H$Y],(H$A.isFlash||"size"!==H$f.name)&&this._params2dQuick2.push(H$f)}return this._params2dQuick2},H$L.create=function(H$f,H$K,H$Y,H$X){return new H$L(H$f,H$K,H$Y,H$X)},H$L}(H$uf),H$of=function(H$f){function H$K(H$f){this._uint8Array=null,this._uint16Array=null,void 0===H$f&&(H$f=35044),H$K.__super.call(this),this._bufferUsage=H$f,this._bufferType=34963,H$A.isFlash||(this._buffer=new ArrayBuffer(8))}H$y(H$K,"laya.webgl.utils.IndexBuffer2D",H$Df);var H$Y=H$K.prototype;return H$Y._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},H$Y.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},H$Y.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},H$Y.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},H$K.QuadrangleIB=null,H$K.create=function(H$f){return void 0===H$f&&(H$f=35044),new H$K(H$f)},H$K}(),H$Ff=function(H$f){function H$Y(H$f,H$K){this._floatArray32=null,this._vertexStride=0,H$Y.__super.call(this),this._vertexStride=H$f,this._bufferUsage=H$K,this._bufferType=34962,H$A.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}H$y(H$Y,"laya.webgl.utils.VertexBuffer2D",H$f);var H$K=H$Y.prototype;return H$K.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},H$K.bind=function(H$f){H$f&&H$f._bind(),this._bind()},H$K.insertData=function(H$f,H$K){this.getFloat32Array().set(H$f,H$K),this._upload=!0},H$K.bind_upload=function(H$f){H$f._bind_upload()||H$f._bind(),this._bind_upload()||this._bind()},H$K._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},H$K.disposeResource=function(){H$f.prototype.disposeResource.call(this)},H$K.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},H$X(0,H$K,"vertexStride",function(){return this._vertexStride}),H$Y.create=function(H$f,H$K){return void 0===H$K&&(H$K=35048),new H$Y(H$f,H$K)},H$Y}(H$Df),H$fK=function(H$f){function H$d(H$f,H$K,H$Y,H$X,H$L,H$H){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===H$Y&&(H$Y=6408),void 0===H$X&&(H$X=!0),H$d.__super.call(this,H$f,H$K),H$f){if(this._format=H$Y,this._mipmap=H$X,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof H$f)this._url=H$f,this._src=H$f,this._image=new H$l.window.Image,H$K&&(H$K.onload&&(this.onload=H$K.onload),H$K.onerror&&(this.onerror=H$K.onerror),H$K.onCreate&&H$K.onCreate(this)),this._image.crossOrigin=H$f&&0==H$f.indexOf("data:")?null:"",H$f&&(this._image.src=H$f);else if(H$f instanceof ArrayBuffer){this._src=H$K,this._url=this._src;var H$E=new H$O(H$f);H$E.readUTFBytes(4),H$E.readUTFBytes(2),H$E.getInt16();H$E.endian="bigEndian",this._w=H$E.getInt16(),this._h=H$E.getInt16();H$E.getInt16(),H$E.getInt16();this._image=new Uint8Array(H$f,H$E.pos),this._format=H$zf.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,H$J.enabled&&this._w<H$J.atlasLimitWidth&&this._h<H$J.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(H$f instanceof Uint8Array))return this._src=H$K,this._url=this._src,this._image=H$f.source||H$f,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=H$K,this._url=this._src,this._w=H$L,this._h=H$H,this._image=H$f,this._format=0===H$Y?H$f.byteLength/(H$L*H$H)==4?6408:6407:H$Y}this._$5__enableMerageInAtlas=!0}}H$y(H$d,"laya.webgl.resource.WebGLImage",H$$);var H$K=H$d.prototype;return H$s.imps(H$K,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),H$K._init_=function(H$f,H$K){},H$K._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var H$f=H$zf.mainContext,H$K=this._source=H$f.createTexture(),H$Y=H$Cf.curBindTexTarget,H$X=H$Cf.curBindTexValue;H$Cf.bindTexture(H$f,3553,H$K);var H$L=this.minFifter,H$H=this.magFifter,H$E=this.repeat?10497:33071,H$d=H$U.isPOT(this._w,this._h),H$O=!1;switch(H$d?(this.mipmap?-1!==H$L||(H$L=9987):-1!==H$L||(H$L=9729),-1!==H$H||(H$H=9729),H$f.texParameteri(3553,10241,H$L),H$f.texParameteri(3553,10240,H$H),H$f.texParameteri(3553,10242,H$E),H$f.texParameteri(3553,10243,H$E),this.mipmap&&H$f.generateMipmap(3553)):(-1!==H$L||(H$L=9729),-1!==H$H||(H$H=9729),H$f.texParameteri(3553,10241,H$L),H$f.texParameteri(3553,10240,H$H),H$f.texParameteri(3553,10242,33071),H$f.texParameteri(3553,10243,33071)),H$f.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&H$f.pixelStorei(H$f.UNPACK_ALIGNMENT,1),H$f.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&H$f.pixelStorei(H$f.UNPACK_ALIGNMENT,1),H$f.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:H$O=!0,H$f.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case H$zf.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:H$O=!0,H$f.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}H$f.pixelStorei(37441,!1),H$Y&&H$X&&H$Cf.bindTexture(H$f,H$Y,H$X),this.uri||(this.uri=this._url),H$O?this.memorySize=this._image.length:H$d&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},H$K.recreateResource=function(){var H$f=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var H$K=this;this._image=new H$l.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(H$K._needReleaseAgain)return H$K._needReleaseAgain=!1,H$K._image.onload=null,void(H$K._image=null);H$K._allowMerageInAtlas&&H$K._enableMerageInAtlas?(H$f.memorySize=0,H$f._recreateLock=!1):H$K._createWebGlTexture(),H$K.completeCreate()},this._image.src=this._src}},H$K.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&H$zf.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},H$K.onresize=function(){this._w=this._image.width,this._h=this._image.height,H$J.enabled&&this._w<H$J.atlasLimitWidth&&this._h<H$J.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},H$K.clearAtlasSource=function(){this._image=null},H$X(0,H$K,"format",function(){return this._format}),H$X(0,H$K,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(H$f){this._$5__enableMerageInAtlas=H$f}),H$X(0,H$K,"mipmap",function(){return this._mipmap}),H$X(0,H$K,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),H$X(0,H$K,"atlasSource",function(){return this._image}),H$X(0,H$K,"onload",null,function(H$f){var H$K=this;this._onload=H$f,this._image&&(this._image.onload=null!=this._onload?function(){H$K.onresize(),H$K._onload()}:null)}),H$X(0,H$K,"onerror",null,function(H$f){var H$K=this;this._onerror=H$f,this._image&&(this._image.onerror=null!=this._onerror?function(){H$K._onerror()}:null)}),H$d}();H$s.__init([H$lf,H$b,H$af,H$Sf])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$f,H$K){"use strict";for(var H$Y in Object.defineProperty(H$K,"__esModule",{value:!0}),Laya){var H$X=Laya[H$Y];H$X&&H$X.__isclass&&(H$K[H$Y]=H$X)}}),function(H$H,H$f,H$X){H$X.un,H$X.uns;var H$L=H$X.static,H$E=H$X.class,H$d=H$X.getset,H$O=(H$X.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),H$B=laya.utils.ClassUtils,H$Z=(laya.events.Event,laya.utils.HTMLChar),H$i=laya.net.Loader,H$U=(laya.display.Node,laya.maths.Rectangle),H$y=laya.renders.Render,H$l=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),H$$=laya.utils.Stat,H$Q=laya.display.Text,H$h=laya.resource.Texture,H$A=laya.net.URL,H$x=laya.utils.Utils,H$S=function(){function H$l(){}return H$E(H$l,"laya.html.utils.HTMLParse"),H$l.parse=function(H$f,H$K,H$Y){H$K=(H$K="<root>"+(H$K=H$K.replace(/<br>/g,"<br/>"))+"</root>").replace(H$l.spacePattern,H$l.char255);var H$X=H$x.parseXMLFromString(H$K);H$l._parseXML(H$f,H$X.childNodes[0].childNodes,H$Y)},H$l._parseXML=function(H$f,H$K,H$Y,H$X){var H$L=0,H$H=0;if(H$K.join||H$K.item)for(H$L=0,H$H=H$K.length;H$L<H$H;++H$L)H$l._parseXML(H$f,H$K[H$L],H$Y,H$X);else{var H$E,H$d,H$O;if(3==H$K.nodeType)return void(H$f instanceof laya.html.dom.HTMLDivElement?(null==H$K.nodeName&&(H$K.nodeName="#text"),H$d=H$K.nodeName.toLowerCase(),0<(H$O=H$K.textContent.replace(/^\s+|\s+$/g,"")).length&&(H$E=H$B.getInstance(H$d))&&(H$f.addChild(H$E),H$E.innerTEXT=H$O.replace(H$l.char255AndOneSpacePattern," "))):0<(H$O=H$K.textContent.replace(/^\s+|\s+$/g,"")).length&&(H$f.innerTEXT=H$O.replace(H$l.char255AndOneSpacePattern," ")));if("#comment"==(H$d=H$K.nodeName.toLowerCase()))return;if(H$E=H$B.getInstance(H$d)){(H$E=H$f.addChild(H$E)).URI=H$Y,H$E.href=H$X;var H$i=H$K.attributes;if(H$i&&0<H$i.length)for(H$L=0,H$H=H$i.length;H$L<H$H;++H$L){var H$U=H$i[H$L],H$Z=H$U.nodeName,H$y=H$U.value;H$E._setAttributes(H$Z,H$y)}H$l._parseXML(H$E,H$K.childNodes,H$Y,H$E.href)}else H$l._parseXML(H$f,H$K.childNodes,H$Y,H$X)}},H$l.char255=String.fromCharCode(255),H$l.spacePattern=/&nbsp;|&#160;/g,H$l.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),H$l}(),H$z=function(){function H$e(){}return H$E(H$e,"laya.html.utils.Layout"),H$e.later=function(H$f){null==H$e._will&&(H$e._will=[],H$X.stage.frameLoop(1,null,function(){if(!(H$e._will.length<1)){for(var H$f=0;H$f<H$e._will.length;H$f++)laya.html.utils.Layout.layout(H$e._will[H$f]);H$e._will.length=0}})),H$e._will.push(H$f)},H$e.layout=function(H$f){if(!H$f||!H$f._style)return null;if(0==(512&H$f._style._type))return null;H$f.getStyle()._type&=-513;var H$K=H$e._multiLineLayout(H$f);return H$y.isConchApp&&H$f.layaoutCallNative&&H$f.layaoutCallNative(),H$K},H$e._multiLineLayout=function(H$f){if(H$Q.RightToLeft)return H$e._multiLineLayout2(H$f);var H$K=new Array;H$f._addChildsToLayout(H$K);var H$Y,H$X,H$L,H$H,H$E,H$d=0,H$O=H$K.length,H$i=H$f._getCSSStyle(),H$U=H$i.letterSpacing,H$Z=H$i.leading,H$y=H$i.lineHeight,H$l=H$i._widthAuto()||!H$i.wordWrap,H$B=H$l?999999:H$f.width,H$$=(H$f.height,0),H$h=H$i.italic?H$i.fontSize/3:0,H$A=H$i._getAlign(),H$x=H$i._getValign(),H$S=0!==H$x||0!==H$A||0!=H$y,H$z=0,H$C=0,H$s=0,H$a=0,H$I=new Array,H$n=H$I[0]=new H$W,H$_=!1,H$G=!1;H$n.h=0,H$i.italic&&(H$B-=H$i.fontSize/3);var H$m=0,H$R=!0;function H$V(){H$n.y=H$C,H$C+=H$n.h+H$Z,0==H$n.h&&(H$C+=H$y),H$n.mWidth=H$m,H$m=0,H$n=new H$W,H$I.push(H$n),H$n.h=0,H$_=!(H$R=!(H$z=0))}for(H$d=0;H$d<H$O;H$d++)if(null!=(H$Y=H$K[H$d]))if(H$R=!1,H$Y instanceof laya.html.dom.HTMLBrElement)H$V(),H$n.y=H$C;else{if(H$Y._isChar()){if((H$H=H$Y).isWord)H$_=H$G||"\n"===H$H.char,H$n.wordStartIndex=H$n.elements.length;else{if(H$s=H$H.width+H$H.style.letterSpacin,0<H$I.length&&H$B<H$z+H$s&&0<H$n.wordStartIndex){var H$t;H$t=H$n.elements.length-H$n.wordStartIndex+1,H$n.elements.length=H$n.wordStartIndex,H$d-=H$t,H$V();continue}H$_=!1,H$m+=H$H.width}H$s=H$H.width+H$U,H$a=H$H.height,H$G=!1,(H$_=H$_||H$B<H$z+H$s)&&H$V(),H$n.minTextHeight=Math.min(H$n.minTextHeight,H$Y.height)}else H$X=H$Y._getCSSStyle(),H$E=H$Y,H$L=H$X.padding,0===H$X._getCssFloat()||(H$S=!0),H$_=H$G||H$X.lineElement,H$s=H$E.width*H$E._style._tf.scaleX+H$L[1]+H$L[3]+H$U,H$a=H$E.height*H$E._style._tf.scaleY+H$L[0]+H$L[2],H$G=H$X.lineElement,(H$_=H$_||H$B<H$z+H$s&&H$X.wordWrap)&&H$V();H$n.elements.push(H$Y),H$n.h=Math.max(H$n.h,H$a),H$Y.x=H$z,H$Y.y=H$C,H$z+=H$s,H$n.w=H$z-H$U,H$n.y=H$C,H$$=Math.max(H$z+H$h,H$$)}else H$R||(H$z+=H$e.DIV_ELEMENT_PADDING),H$n.wordStartIndex=H$n.elements.length;if(H$C=H$n.y+H$n.h,H$S){var H$T=0,H$k=H$B;for(H$l&&0<H$f.width&&(H$k=H$f.width),H$d=0,H$O=H$I.length;H$d<H$O;H$d++)H$I[H$d].updatePos(0,H$k,H$d,H$T,H$A,H$x,H$y),H$T+=Math.max(H$y,H$I[H$d].h+H$Z);H$C=H$T}return H$l&&(H$f.width=H$$),H$C>H$f.height&&(H$f.height=H$C),[H$$,H$C]},H$e._multiLineLayout2=function(H$f){var H$K=new Array;H$f._addChildsToLayout(H$K);var H$Y,H$X,H$L,H$H,H$E,H$d=0,H$O=H$K.length,H$i=H$f._getCSSStyle(),H$U=H$i.letterSpacing,H$Z=H$i.leading,H$y=H$i.lineHeight,H$l=H$i._widthAuto()||!H$i.wordWrap,H$B=H$l?999999:H$f.width,H$$=(H$f.height,0),H$h=H$i.italic?H$i.fontSize/3:0,H$A=2-H$i._getAlign(),H$x=H$i._getValign(),H$S=0!==H$x||0!=H$A||0!=H$y,H$z=0,H$C=0,H$s=0,H$a=0,H$I=new Array,H$n=H$I[0]=new H$W,H$_=!1,H$G=!1;H$n.h=0,H$i.italic&&(H$B-=H$i.fontSize/3);var H$m=0,H$R=!0;function H$V(){H$n.y=H$C,H$C+=H$n.h+H$Z,0==H$n.h&&(H$C+=H$y),H$n.mWidth=H$m,H$m=0,H$n=new H$W,H$I.push(H$n),H$n.h=0,H$_=!(H$R=!(H$z=0))}for(H$d=0;H$d<H$O;H$d++)if(null!=(H$Y=H$K[H$d]))if(H$R=!1,H$Y instanceof laya.html.dom.HTMLBrElement)H$V(),H$n.y=H$C;else{if(H$Y._isChar()){if((H$H=H$Y).isWord)H$_=H$G||"\n"===H$H.char,H$n.wordStartIndex=H$n.elements.length;else{if(0<H$I.length&&H$B<H$z+H$s&&0<H$n.wordStartIndex){var H$t;H$t=H$n.elements.length-H$n.wordStartIndex+1,H$n.elements.length=H$n.wordStartIndex,H$d-=H$t,H$V();continue}H$_=!1,H$m+=H$H.width}H$s=H$H.width+H$U,H$a=H$H.height,H$G=!1,(H$_=H$_||H$B<H$z+H$s)&&H$V(),H$n.minTextHeight=Math.min(H$n.minTextHeight,H$Y.height)}else H$X=H$Y._getCSSStyle(),H$E=H$Y,H$L=H$X.padding,0===H$X._getCssFloat()||(H$S=!0),H$_=H$G||H$X.lineElement,H$s=H$E.width*H$E._style._tf.scaleX+H$L[1]+H$L[3]+H$U,H$a=H$E.height*H$E._style._tf.scaleY+H$L[0]+H$L[2],H$G=H$X.lineElement,(H$_=H$_||H$B<H$z+H$s&&H$X.wordWrap)&&H$V();H$n.elements.push(H$Y),H$n.h=Math.max(H$n.h,H$a),H$Y.x=H$z,H$Y.y=H$C,H$z+=H$s,H$n.w=H$z-H$U,H$n.y=H$C,H$$=Math.max(H$z+H$h,H$$)}else H$R||(H$z+=H$e.DIV_ELEMENT_PADDING),H$n.wordStartIndex=H$n.elements.length;if(H$C=H$n.y+H$n.h,H$S){var H$T=0,H$k=H$B;for(H$d=0,H$O=H$I.length;H$d<H$O;H$d++)H$I[H$d].updatePos(0,H$k,H$d,H$T,H$A,H$x,H$y),H$T+=Math.max(H$y,H$I[H$d].h+H$Z);H$C=H$T}for(H$l&&(H$f.width=H$$),H$C>H$f.height&&(H$f.height=H$C),H$d=0,H$O=H$I.length;H$d<H$O;H$d++)H$I[H$d].revertOrder(H$B);return[H$$,H$C]},H$e._will=null,H$e.DIV_ELEMENT_PADDING=0,H$e}(),H$W=function(){function H$f(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}H$E(H$f,"laya.html.utils.LayoutLine");var H$K=H$f.prototype;return H$K.updatePos=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){var H$d,H$O=0;0<this.elements.length&&(H$O=(H$d=this.elements[this.elements.length-1]).x+H$d.width-this.elements[0].x);var H$i=0,H$U=NaN;1===H$L&&(H$i=(H$K-H$O)/2),2===H$L&&(H$i=H$K-H$O),0===H$E||0!=H$H||(H$H=1);for(var H$Z=0,H$y=this.elements.length;H$Z<H$y;H$Z++){var H$l=(H$d=this.elements[H$Z])._getCSSStyle();switch(0!==H$i&&(H$d.x+=H$i),H$l._getValign()){case 0:H$d.y=H$X;break;case 1:var H$B=0;99999!=this.minTextHeight&&(H$B=this.minTextHeight);var H$$=(H$B+H$E)/2;H$$=Math.max(H$$,this.h),H$U=(laya.html.dom.HTMLImageElement,H$X+H$$-H$d.height),H$d.y=H$U;break;case 2:H$d.y=H$X+(H$E-H$d.height)}}},H$K.revertOrder=function(H$f){var H$K;if(0<this.elements.length){var H$Y,H$X=0;for(H$Y=this.elements.length,H$X=0;H$X<H$Y;H$X++)(H$K=this.elements[H$X]).x=H$f-H$K.x-H$K.width}},H$f}(),H$C=function(H$Y){function H$K(){this.URI=null,this._href=null,H$K.__super.call(this),this._text=H$K._EMPTYTEXT,this.setStyle(new H$O(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}H$E(H$K,"laya.html.dom.HTMLElement",H$Y);var H$f=H$K.prototype;return H$f.layaoutCallNative=function(){var H$f=0;if(this._childs&&0<(H$f=this._childs.length))for(var H$K=0;H$K<H$f;H$K++)this._childs[H$K].layaoutCallNative&&this._childs[H$K].layaoutCallNative();var H$Y=this._getWords();H$Y?laya.html.dom.HTMLElement.fillWords(this,H$Y,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},H$f.appendChild=function(H$f){return this.addChild(H$f)},H$f._getWords2=function(){var H$f=this._text.text;if(!H$f||0===H$f.length)return null;var H$K,H$Y,H$X=0,H$L=0;if(this._text.drawWords)H$Y=this._text.drawWords;else{for(H$L=(H$K=H$f.split(" ")).length-1,H$Y=[],H$X=0;H$X<H$L;H$X++)H$Y.push(H$K[H$X]," ");0<=H$L&&H$Y.push(H$K[H$L]),this._text.drawWords=H$Y}var H$H,H$E=this._text.words;if(H$E&&H$E.length===H$Y.length)return H$E;null===H$E&&(this._text.words=H$E=[]),H$E.length=H$Y.length;var H$d=this.style,H$O=H$d.font;for(H$X=0,H$L=H$Y.length;H$X<H$L;H$X++){H$H=H$x.measureText(H$Y[H$X],H$O);var H$i=H$E[H$X]=new H$Z(H$Y[H$X],H$H.width,H$H.height||H$d.fontSize,H$d);if(1<H$i.char.length&&(H$i.charNum=H$i.char),this.href){var H$U=new H$l;this.addChild(H$U),H$i.setSprite(H$U)}}return H$E},H$f._getWords=function(){if(!H$Q.CharacterCache)return this._getWords2();var H$f=this._text.text;if(!H$f||0===H$f.length)return null;var H$K,H$Y=this._text.words;if(H$Y&&H$Y.length===H$f.length)return H$Y;null===H$Y&&(this._text.words=H$Y=[]),H$Y.length=H$f.length;for(var H$X=this.style,H$L=H$X.font,H$H=0,H$E=H$f.length;H$H<H$E;H$H++)if(H$K=H$x.measureText(H$f.charAt(H$H),H$L)){var H$d=H$Y[H$H]=new H$Z(H$f.charAt(H$H),H$K.width,H$K.height||H$X.fontSize,H$X);if(this.href){var H$O=new H$l;this.addChild(H$O),H$d.setSprite(H$O)}}else console.warn("_getWords size is null"+H$f.charAt(H$H),H$L);return H$Y},H$f.showLinkSprite=function(){var H$f=this._text.words;if(H$f)for(var H$K,H$Y,H$X=[],H$L=0;H$L<H$f.length;H$L++)H$Y=H$f[H$L],(H$K=new H$l).graphics.drawRect(0,0,H$Y.width,H$Y.height,"#ff0000"),H$K.width=H$Y.width,H$K.height=H$Y.height,this.addChild(H$K),H$X.push(H$K)},H$f._layoutLater=function(){var H$f=this.style;512&H$f._type||(H$f.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&H$f.block?(H$z.later(this),H$f._type|=512):this.parent&&this.parent._layoutLater())},H$f._setAttributes=function(H$f,H$K){switch(H$f){case"style":return void this.style.cssText(H$K);case"class":return void(this.className=H$K)}H$Y.prototype._setAttributes.call(this,H$f,H$K)},H$f.updateHref=function(){if(null!=this._href){var H$f=this._getWords();if(H$f)for(var H$K,H$Y,H$X=0;H$X<H$f.length;H$X++)(H$Y=(H$K=H$f[H$X]).getSprite())&&(H$Y.size(H$K.width,H$K.height),H$Y.on("click",this,this.onLinkHandler))}},H$f.onLinkHandler=function(H$f){switch(H$f.type){case"click":for(var H$K=this;H$K;)H$K.event("link",[this.href]),H$K=H$K.parent}},H$f.formatURL=function(H$f){return this.URI?H$A.formatURL(H$f,this.URI?this.URI.path:null):H$f},H$d(0,H$f,"href",function(){return this._href},function(H$f){null!=(this._href=H$f)&&(this._getCSSStyle().underLine=1,this.updateHref())}),H$d(0,H$f,"color",null,function(H$f){this.style.color=H$f}),H$d(0,H$f,"onClick",null,function(H$f){H$X._runScript("fn=function(event){"+H$f+";}"),this.on("click",this,void 0)}),H$d(0,H$f,"id",null,function(H$f){H$s.document.setElementById(H$f,this)}),H$d(0,H$f,"innerTEXT",function(){return this._text.text},function(H$f){this.text=H$f}),H$d(0,H$f,"style",function(){return this._style}),H$d(0,H$f,"text",function(){return this._text.text},function(H$f){this._text==H$K._EMPTYTEXT?this._text={text:H$f,words:null}:(this._text.text=H$f,this._text.words&&(this._text.words.length=0)),H$y.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),H$d(0,H$f,"parent",H$Y.prototype._$get_parent,function(H$f){if(H$f instanceof laya.html.dom.HTMLElement){var H$K=H$f;this.URI||(this.URI=H$K.URI),this.style.inherit(H$K.style)}H$X.superSet(H$l,this,"parent",H$f)}),H$d(0,H$f,"className",null,function(H$f){this.style.attrs(H$s.document.styleSheets["."+H$f])}),H$K.fillWords=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){H$f.graphics.clear();for(var H$d=0,H$O=H$K.length;H$d<H$O;H$d++){var H$i=H$K[H$d];H$f.graphics.fillText(H$i.char,H$i.x+H$Y,H$i.y+H$X,H$L,H$H,"left",H$E)}},H$K._EMPTYTEXT={text:null,words:null},H$K}(H$l),H$K=(function(H$f){function H$K(){H$K.__super.call(this),this.style.lineElement=!0,this.style.block=!0}H$E(H$K,"laya.html.dom.HTMLBrElement",H$C)}(),function(H$f){function H$K(){this.contextHeight=NaN,this.contextWidth=NaN,H$K.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}H$E(H$K,"laya.html.dom.HTMLDivElement",H$f);var H$Y=H$K.prototype;return H$Y.appendHTML=function(H$f){H$S.parse(this,H$f,this.URI),this.layout()},H$Y._addChildsToLayout=function(H$K){var H$f=this._getWords();if(null==H$f&&0==this._childs.length)return!1;H$f&&H$f.forEach(function(H$f){H$K.push(H$f)});for(var H$Y=!0,H$X=0,H$L=this._childs.length;H$X<H$L;H$X++){var H$H=this._childs[H$X];H$Y?H$Y=!1:H$K.push(null),H$H._addToLayout(H$K)}return!0},H$Y._addToLayout=function(H$f){this.layout()},H$Y.layout=function(){if(this.style){this.style._type|=512;var H$f=H$z.layout(this);if(H$f){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new H$U);var H$K=this._$P.mHtmlBounds;H$K.x=H$K.y=0,H$K.width=this.contextWidth=H$f[0],H$K.height=this.contextHeight=H$f[1],this.setBounds(H$K)}}},H$d(0,H$Y,"height",function(){return this._height?this._height:this.contextHeight},H$f.prototype._$set_height),H$d(0,H$Y,"innerHTML",null,function(H$f){this.destroyChildren(),this.appendHTML(H$f)}),H$d(0,H$Y,"width",function(){return this._width?this._width:this.contextWidth},function(H$f){var H$K=!1;H$K=0===H$f?H$f!=this._width:H$f!=this.width,H$X.superSet(H$C,this,"width",H$f),H$K&&this.layout()}),H$K}(H$C)),H$s=function(H$f){function H$K(){this.all=new Array,this.styleSheets=H$O.styleSheets,H$K.__super.call(this)}H$E(H$K,"laya.html.dom.HTMLDocument",H$C);var H$Y=H$K.prototype;return H$Y.getElementById=function(H$f){return this.all[H$f]},H$Y.setElementById=function(H$f,H$K){this.all[H$f]=H$K},H$L(H$K,["document",function(){return this.document=new H$K}]),H$K}();(function(H$f){function H$K(){this._tex=null,this._url=null,this._renderArgs=[],H$K.__super.call(this),this.style.block=!0}H$E(H$K,"laya.html.dom.HTMLImageElement",H$C);var H$Y=H$K.prototype;H$Y._addToLayout=function(H$f){!this._style.absolute&&H$f.push(this)},H$Y.render=function(H$f,H$K,H$Y){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(H$$.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,H$f.ctx.drawTexture2(H$K,H$Y,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},H$Y.layaoutCallNative=function(){var H$f=0;if(this._childs&&0<(H$f=this._childs.length))for(var H$K=0;H$K<H$f;H$K++)this._childs[H$K].layaoutCallNative&&this._childs[H$K].layaoutCallNative()},H$d(0,H$Y,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(H$f){this._width!==H$f&&(this._width=H$f,this._style.width=H$f,this.repaint())}),H$d(0,H$Y,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(H$f){this._height!==H$f&&(this._height=H$f,this._style.height=H$f,this.repaint())}),H$Y.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),H$i.clearCache(this,this._url),this._tex=null),H$C.prototype.destroy.call(this)},H$Y.onloaded=function(){var H$f=this._style;H$f&&!H$f.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),H$f&&!H$f.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),H$y.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},H$Y._loadImageComplete=function(H$f,H$K,H$Y){if(!this._destroyed)if(null!=H$Y)if(H$Y instanceof ArrayBuffer){var H$X=new DataView(H$Y);new laya.webgl.resource.WebGLImage(new Uint8Array(H$Y,8),H$f,0,!1,H$X.getUint32(0),H$X.getUint32(4));this.onloaded()}else if(H$Y instanceof H$h)H$i.imgMgrSet[H$f]=H$K,H$H.imgMgrLock(H$f,H$i.imgMgrSet[H$f]),this._url=H$f,this._tex=H$Y,H$i.keepCache(this,H$f),H$i.cacheRes(H$f,this._tex),this.onloaded();else{var H$L=-1!=H$f.indexOf(".png",H$f.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(H$Y,H$f,H$L,!1,H$Y.width,H$Y.height);this.onloaded()}else this.event("error","Load image failed")},H$d(0,H$Y,"src",null,function(H$f){(H$f=this.formatURL(H$f),this._url!=H$f)&&(null!=this._tex&&(H$i.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=H$f,(this._tex=H$i.getRes(H$f))?(H$i.keepCache(this,H$f),this.onloaded()):H$H.imgMgrLoad(H$f,this._loadImageComplete.bind(this),2,!1))})})(),function(H$f){function H$K(){this.type=null,H$K.__super.call(this),this.visible=!1}H$E(H$K,"laya.html.dom.HTMLLinkElement",H$f);var H$Y=H$K.prototype;H$Y._onload=function(H$f){switch(this.type){case"text/css":H$O.parseCSS(H$f,this.URI)}},H$d(0,H$Y,"href",H$f.prototype._$get_href,function(H$f){var H$K=this;H$f=this.formatURL(H$f),this.URI=new H$A(H$f);var H$Y=new H$i;H$Y.once("complete",null,function(H$f){H$K._onload(H$f)}),H$Y.load(H$f,"text")}),H$K._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(H$C),function(H$f){function H$K(){H$K.__super.call(this),this.visible=!1}H$E(H$K,"laya.html.dom.HTMLStyleElement",H$f),H$d(0,H$K.prototype,"text",H$f.prototype._$get_text,function(H$f){H$O.parseCSS(H$f,null)})}(H$C),function(H$f){function H$K(){H$K.__super.call(this),this._getCSSStyle().valign="middle"}H$E(H$K,"laya.html.dom.HTMLIframeElement",H$f),H$d(0,H$K.prototype,"href",H$f.prototype._$get_href,function(H$Y){var H$X=this;H$Y=this.formatURL(H$Y);var H$f=new H$i;H$f.once("complete",null,function(H$f){var H$K=H$X.URI;H$X.URI=new H$A(H$Y),H$X.innerHTML=H$f,!H$K||(H$X.URI=H$K)}),H$f.load(H$Y,"text")})}(H$K)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$f,H$K){"use strict";for(var H$Y in Object.defineProperty(H$K,"__esModule",{value:!0}),Laya){var H$X=Laya[H$Y];H$X&&H$X.__isclass&&(H$K[H$Y]=H$X)}}),function(H$L,H$f,H$$){H$$.un,H$$.uns;var H$X=H$$.static,H$H=H$$.class,H$E=H$$.getset,H$Y=(H$$.__newvec,laya.display.Animation),H$h=(laya.utils.Browser,laya.utils.ClassUtils),H$d=laya.filters.ColorFilter,H$O=laya.utils.Ease,H$i=laya.events.Event,H$U=(laya.events.EventDispatcher,laya.display.css.Font),H$Z=laya.display.FrameAnimation,H$K=laya.display.Graphics,H$y=laya.utils.Handler,H$l=laya.display.Input,H$x=laya.net.Loader,H$B=(laya.display.Node,laya.maths.Point),H$A=laya.maths.Rectangle,H$S=laya.renders.Render,H$z=laya.display.Sprite,H$C=laya.display.Text,H$s=laya.resource.Texture,H$a=laya.utils.Tween,H$I=laya.utils.Utils,H$n=laya.utils.WeakObject;H$$.interface("laya.ui.IItem"),H$$.interface("laya.ui.ISelect"),H$$.interface("laya.ui.IRender"),H$$.interface("laya.ui.IComponent"),H$$.interface("laya.ui.IBox","IComponent");var H$_=function(){function H$f(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return H$H(H$f,"laya.ui.LayoutStyle"),H$X(H$f,["EMPTY",function(){return this.EMPTY=new H$f}]),H$f}(),H$G=function(){function H$f(){}return H$H(H$f,"laya.ui.Styles"),H$f.labelColor="#000000",H$f.buttonStateNum=3,H$f.scrollBarMinNum=15,H$f.scrollBarDelayTime=500,H$X(H$f,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),H$f}(),H$m=function(){function H$L(){}return H$H(H$L,"laya.ui.UIUtils"),H$L.fillArray=function(H$f,H$K,H$Y){var H$X=H$f.concat();if(H$K)for(var H$L=H$K.split(","),H$H=0,H$E=Math.min(H$X.length,H$L.length);H$H<H$E;H$H++){var H$d=H$L[H$H];H$X[H$H]="true"==H$d||"false"!=H$d&&H$d,null!=H$Y&&(H$X[H$H]=H$Y(H$d))}return H$X},H$L.toColor=function(H$f){return H$I.toHexColor(H$f)},H$L.gray=function(H$f,H$K){void 0===H$K&&(H$K=!0),H$K?H$L.addFilter(H$f,H$L.grayFilter):H$L.clearFilter(H$f,H$d)},H$L.addFilter=function(H$f,H$K){var H$Y=H$f.filters||[];H$Y.push(H$K),H$f.filters=H$Y},H$L.clearFilter=function(H$f,H$K){var H$Y=H$f.filters;if(null!=H$Y&&0<H$Y.length){for(var H$X=H$Y.length-1;-1<H$X;H$X--){var H$L=H$Y[H$X];H$$.__typeof(H$L,H$K)&&H$Y.splice(H$X,1)}H$f.filters=H$Y}},H$L._getReplaceStr=function(H$f){return H$L.escapeSequence[H$f]},H$L.adptString=function(H$f){return H$f.replace(/\\(\w)/g,H$L._getReplaceStr)},H$L.getBindFun=function(H$f){var H$K=H$L._funMap.get(H$f);if(null==H$K){var H$Y='"'+H$f+'"',H$X="(function(data){if(data==null)return;with(data){try{\nreturn "+(H$Y=H$Y.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";H$K=H$$._runScript(H$X),H$L._funMap.set(H$f,H$K)}return H$K},H$X(H$L,["grayFilter",function(){return this.grayFilter=new H$d([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new H$n}]),H$L}(),H$R=function(){function H$f(){}return H$H(H$f,"UIConfig"),H$f.touchScrollEnable=!0,H$f.mouseWheelEnable=!0,H$f.showButtons=!0,H$f.popupBgColor="#000000",H$f.popupBgAlpha=.5,H$f.closeDialogOnSide=!0,H$f}(),H$V=function(H$Y){function H$A(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,H$A.__super.call(this),this._weakKeys=[]}H$H(H$A,"laya.ui.AutoBitmap",H$Y);var H$f=H$A.prototype;return H$f.destroy=function(){if(H$x.clearObject(this,this._weakKey),this._weakKeys){for(var H$f=0,H$K=this._weakKeys.length;H$f<H$K;++H$f)H$x.clearObject(this,this._weakKeys[H$f]);this._weakKeys=null}H$Y.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},H$f._setChanged=function(){this._isChanged||(this._isChanged=!0,H$$.timer.callLater(this,this.changeSource))},H$f.changeSource=function(){this._isChanged=!1;var H$f=this._source;if(H$f&&H$f.bitmap){var H$K=this.width,H$Y=this.height,H$X=this._sizeGrid,H$L=H$f.sourceWidth,H$H=H$f.sourceHeight;if(!H$X||H$L===H$K&&H$H===H$Y)this.cleanByTexture(H$f,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,H$K,H$Y);else{H$x.clearObject(this,this._weakKey),H$f.$_GID||(H$f.$_GID=H$I.getGID());var H$E=H$f.$_GID+"."+H$K+"."+H$Y+"."+H$X.join("."),H$d=H$x.findObject(H$E);if(H$I.isOKCmdList(H$d))return this._weakKey=H$E,H$x.keepObject(this,this._weakKey),void(this.cmds=H$d);this.clear();var H$O,H$i,H$U=H$X[0],H$Z=H$X[1],H$y=H$X[2],H$l=H$X[3],H$B=H$X[4],H$$=!1;if(H$K==H$L&&(H$l=H$Z=0),H$Y==H$H&&(H$U=H$y=0),H$K<H$l+H$Z){var H$h=H$K;H$$=!0,H$K=H$l+H$Z,this.save(),this.clipRect(0,0,H$h,H$Y)}H$l&&H$U&&(H$O=H$A.getTexture(H$f,0,0,H$l,H$U),H$i=this._weakKeys[0],H$O?(H$i!=H$O.weakKey&&(H$x.clearObject(this,H$i),H$x.keepObject(this,H$O.weakKey),this._weakKeys[0]=H$O.weakKey),this.drawTexture(H$O,0,0,H$l,H$U)):(H$x.clearObject(this,H$i),this._weakKeys[0]="")),H$Z&&H$U&&(H$O=H$A.getTexture(H$f,H$L-H$Z,0,H$Z,H$U),H$i=this._weakKeys[1],H$O?(H$i!=H$O.weakKey&&(H$x.clearObject(this,H$i),H$x.keepObject(this,H$O.weakKey),this._weakKeys[1]=H$O.weakKey),this.drawTexture(H$O,H$K-H$Z,0,H$Z,H$U)):(H$x.clearObject(this,H$i),this._weakKeys[1]="")),H$l&&H$y&&(H$O=H$A.getTexture(H$f,0,H$H-H$y,H$l,H$y),H$i=this._weakKeys[2],H$O?(H$i!=H$O.weakKey&&(H$x.clearObject(this,H$i),H$x.keepObject(this,H$O.weakKey),this._weakKeys[2]=H$O.weakKey),this.drawTexture(H$O,0,H$Y-H$y,H$l,H$y)):(H$x.clearObject(this,H$i),this._weakKeys[2]="")),H$Z&&H$y&&(H$O=H$A.getTexture(H$f,H$L-H$Z,H$H-H$y,H$Z,H$y),H$i=this._weakKeys[3],H$O?(H$i!=H$O.weakKey&&(H$x.clearObject(this,H$i),H$x.keepObject(this,H$O.weakKey),this._weakKeys[3]=H$O.weakKey),this.drawTexture(H$O,H$K-H$Z,H$Y-H$y,H$Z,H$y)):(H$x.clearObject(this,H$i),this._weakKeys[3]="")),H$U&&(H$O=H$A.getTexture(H$f,H$l,0,H$L-H$l-H$Z,H$U),H$i=this._weakKeys[4],H$O?(H$i!=H$O.weakKey&&(H$x.clearObject(this,H$i),H$x.keepObject(this,H$O.weakKey),this._weakKeys[4]=H$O.weakKey),this.drawBitmap(H$B,H$O,H$l,0,H$K-H$l-H$Z,H$U)):(H$x.clearObject(this,H$i),this._weakKeys[4]="")),H$y&&(H$O=H$A.getTexture(H$f,H$l,H$H-H$y,H$L-H$l-H$Z,H$y),H$i=this._weakKeys[5],H$O?(H$i!=H$O.weakKey&&(H$x.clearObject(this,H$i),H$x.keepObject(this,H$O.weakKey),this._weakKeys[5]=H$O.weakKey),this.drawBitmap(H$B,H$O,H$l,H$Y-H$y,H$K-H$l-H$Z,H$y)):(H$x.clearObject(this,H$i),this._weakKeys[5]="")),H$l&&(H$O=H$A.getTexture(H$f,0,H$U,H$l,H$H-H$U-H$y),H$i=this._weakKeys[6],H$O?(H$i!=H$O.weakKey&&(H$x.clearObject(this,H$i),H$x.keepObject(this,H$O.weakKey),this._weakKeys[6]=H$O.weakKey),this.drawBitmap(H$B,H$O,0,H$U,H$l,H$Y-H$U-H$y)):(H$x.clearObject(this,H$i),this._weakKeys[6]="")),H$Z&&(H$O=H$A.getTexture(H$f,H$L-H$Z,H$U,H$Z,H$H-H$U-H$y),H$i=this._weakKeys[7],H$O?(H$i!=H$O.weakKey&&(H$x.clearObject(this,H$i),H$x.keepObject(this,H$O.weakKey),this._weakKeys[7]=H$O.weakKey),this.drawBitmap(H$B,H$O,H$K-H$Z,H$U,H$Z,H$Y-H$U-H$y)):(H$x.clearObject(this,H$i),this._weakKeys[7]="")),H$O=H$A.getTexture(H$f,H$l,H$U,H$L-H$l-H$Z,H$H-H$U-H$y),H$i=this._weakKeys[8],H$O?(H$i!=H$O.weakKey&&(H$x.clearObject(this,H$i),H$x.keepObject(this,H$O.weakKey),this._weakKeys[8]=H$O.weakKey),this.drawBitmap(H$B,H$O,H$l,H$U,H$K-H$l-H$Z,H$Y-H$U-H$y)):(H$x.clearObject(this,H$i),this._weakKeys[8]=""),H$$&&this.restore(),this.autoCacheCmd&&!H$S.isConchApp&&(H$x.saveObject(H$E,this.cmds,null),this._weakKey=H$E,H$x.keepObject(this,this._weakKey))}this._repaint()}},H$f.drawBitmap=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$L&&(H$L=0),void 0===H$H&&(H$H=0),H$L<.1||H$H<.1||(!H$f||H$K.width==H$L&&H$K.height==H$H?this.drawTexture(H$K,H$Y,H$X,H$L,H$H):this.fillTexture(H$K,H$Y,H$X,H$L,H$H))},H$f.clear=function(H$f){void 0===H$f&&(H$f=!0),H$Y.prototype.clear.call(this,!1)},H$E(0,H$f,"sizeGrid",function(){return this._sizeGrid},function(H$f){this._sizeGrid=H$f,this._setChanged()}),H$E(0,H$f,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(H$f){this._width!=H$f&&(this._width=H$f,this._setChanged())}),H$E(0,H$f,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(H$f){this._height!=H$f&&(this._height=H$f,this._setChanged())}),H$E(0,H$f,"source",function(){return this._source},function(H$f){H$f?(this._source=H$f,this._setChanged()):(this._source=null,this.clear())}),H$A.getTexture=function(H$f,H$K,H$Y,H$X,H$L){H$X<=0&&(H$X=1),H$L<=0&&(H$L=1),H$f.$_GID||(H$f.$_GID=H$I.getGID());var H$H=H$f.$_GID+"."+H$K+"."+H$Y+"."+H$X+"."+H$L,H$E=H$x.findObject(H$H);if((!H$E||!H$E.source)&&(H$E=H$s.createFromTexture(H$f,H$K,H$Y,H$X,H$L))){if(H$f.alphaTexture){var H$d=H$f.width/H$f.alphaTexture.width;H$E.alphaTexture=H$s.createFromTexture(H$f.alphaTexture,H$K/H$d,H$Y/H$d,H$X/H$d,H$L/H$d)}H$x.saveObject(H$H,H$E),H$E.weakKey=H$H}return H$E},H$A}(H$K),H$t=(function(H$f){function H$K(){H$K.__super.call(this)}H$H(H$K,"laya.ui.UIEvent",H$i),H$K.SHOW_TIP="showtip",H$K.HIDE_TIP="hidetip"}(),function(H$K){function H$f(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,H$f.__super.call(this),this._layout=H$_.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}H$H(H$f,"laya.ui.Component",H$K);var H$Y=H$f.prototype;return H$$.imps(H$Y,{"laya.ui.IComponent":!0}),H$Y.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},H$Y.preinitialize=function(){},H$Y.createChildren=function(){},H$Y.initialize=function(){},H$Y.callLater=function(H$f,H$K){H$$.timer.callLater(this,H$f,H$K)},H$Y.runCallLater=function(H$f){H$$.timer.runCallLater(this,H$f)},H$Y.commitMeasure=function(){},H$Y.changeSize=function(){this.event("resize")},H$Y.getLayout=function(){return this._layout===H$_.EMPTY&&(this._layout=new H$_),this._layout},H$Y._setLayoutEnabled=function(H$f){this._layout&&this._layout.enable!=H$f&&(this._layout.enable=H$f,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},H$Y.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},H$Y.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},H$Y.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},H$Y.resetLayoutX=function(){var H$f=this._layout;if(isNaN(H$f.anchorX)||(this.pivotX=H$f.anchorX*this.width),this.layoutEnabled){var H$K=this.parent;H$K&&(isNaN(H$f.centerX)?isNaN(H$f.left)?isNaN(H$f.right)||(this.x=Math.round(H$K.width-this.displayWidth-H$f.right+this.pivotX*this.scaleX)):(this.x=Math.round(H$f.left+this.pivotX*this.scaleX),isNaN(H$f.right)||(this.width=(H$K._width-H$f.left-H$f.right)/(this.scaleX||.01))):this.x=Math.round(.5*(H$K.width-this.displayWidth)+H$f.centerX+this.pivotX*this.scaleX))}},H$Y.resetLayoutY=function(){var H$f=this._layout;if(isNaN(H$f.anchorY)||(this.pivotY=H$f.anchorY*this.height),this.layoutEnabled){var H$K=this.parent;H$K&&(isNaN(H$f.centerY)?isNaN(H$f.top)?isNaN(H$f.bottom)||(this.y=Math.round(H$K.height-this.displayHeight-H$f.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(H$f.top+this.pivotY*this.scaleY),isNaN(H$f.bottom)||(this.height=(H$K._height-H$f.top-H$f.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(H$K.height-this.displayHeight)+H$f.centerY+this.pivotY*this.scaleY))}},H$Y.onMouseOver=function(H$f){H$$.stage.event("showtip",this._toolTip)},H$Y.onMouseOut=function(H$f){H$$.stage.event("hidetip",this._toolTip)},H$E(0,H$Y,"displayWidth",function(){return this.width*this.scaleX}),H$E(0,H$Y,"width",function(){return this._width?this._width:this.measureWidth},function(H$f){this._width!=H$f&&(this._width=H$f,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),H$E(0,H$Y,"measureWidth",function(){var H$f=0;this.commitMeasure();for(var H$K=this.numChildren-1;-1<H$K;H$K--){var H$Y=this.getChildAt(H$K);H$Y.visible&&(H$f=Math.max(H$Y.x+H$Y.width*H$Y.scaleX,H$f))}return H$f}),H$E(0,H$Y,"displayHeight",function(){return this.height*this.scaleY}),H$E(0,H$Y,"height",function(){return this._height?this._height:this.measureHeight},function(H$f){this._height!=H$f&&(this._height=H$f,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),H$E(0,H$Y,"dataSource",function(){return this._dataSource},function(H$f){for(var H$K in this._dataSource=H$f,this._dataSource)this.hasOwnProperty(H$K)&&"function"!=typeof this[H$K]&&(this[H$K]=this._dataSource[H$K])}),H$E(0,H$Y,"scaleY",H$K.prototype._$get_scaleY,function(H$f){H$$.superGet(H$z,this,"scaleY")!=H$f&&(H$$.superSet(H$z,this,"scaleY",H$f),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),H$E(0,H$Y,"measureHeight",function(){var H$f=0;this.commitMeasure();for(var H$K=this.numChildren-1;-1<H$K;H$K--){var H$Y=this.getChildAt(H$K);H$Y.visible&&(H$f=Math.max(H$Y.y+H$Y.height*H$Y.scaleY,H$f))}return H$f}),H$E(0,H$Y,"scaleX",H$K.prototype._$get_scaleX,function(H$f){H$$.superGet(H$z,this,"scaleX")!=H$f&&(H$$.superSet(H$z,this,"scaleX",H$f),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),H$E(0,H$Y,"top",function(){return this._layout.top},function(H$f){H$f!=this._layout.top&&(this.getLayout().top=H$f,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$E(0,H$Y,"bottom",function(){return this._layout.bottom},function(H$f){H$f!=this._layout.bottom&&(this.getLayout().bottom=H$f,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$E(0,H$Y,"left",function(){return this._layout.left},function(H$f){H$f!=this._layout.left&&(this.getLayout().left=H$f,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$E(0,H$Y,"right",function(){return this._layout.right},function(H$f){H$f!=this._layout.right&&(this.getLayout().right=H$f,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$E(0,H$Y,"centerX",function(){return this._layout.centerX},function(H$f){H$f!=this._layout.centerX&&(this.getLayout().centerX=H$f,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$E(0,H$Y,"centerY",function(){return this._layout.centerY},function(H$f){H$f!=this._layout.centerY&&(this.getLayout().centerY=H$f,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$E(0,H$Y,"anchorX",function(){return this._layout.anchorX},function(H$f){H$f!=this._layout.anchorX&&(this.getLayout().anchorX=H$f,this._setLayoutEnabled(!0)),this.resetLayoutX()}),H$E(0,H$Y,"anchorY",function(){return this._layout.anchorY},function(H$f){H$f!=this._layout.anchorY&&(this.getLayout().anchorY=H$f,this._setLayoutEnabled(!0)),this.resetLayoutY()}),H$E(0,H$Y,"tag",function(){return this._tag},function(H$f){this._tag=H$f}),H$E(0,H$Y,"toolTip",function(){return this._toolTip},function(H$f){this._toolTip!=H$f&&(null!=(this._toolTip=H$f)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),H$E(0,H$Y,"comXml",function(){return this._comXml},function(H$f){this._comXml=H$f}),H$E(0,H$Y,"gray",function(){return this._gray},function(H$f){H$f!==this._gray&&(this._gray=H$f,H$m.gray(this,H$f))}),H$E(0,H$Y,"disabled",function(){return this._disabled},function(H$f){H$f!==this._disabled&&(this.gray=this._disabled=H$f,this.mouseEnabled=!H$f)}),H$f}(H$z)),H$T=function(H$f){function H$K(){this.lockLayer=null,this.popupEffect=function(H$f){H$f.scale(1,1),H$a.from(H$f,{x:H$$.stage.width/2,y:H$$.stage.height/2,scaleX:0,scaleY:0},300,H$O.backOut,H$y.create(this,this.doOpen,[H$f]))},this.closeEffect=function(H$f,H$K){H$a.to(H$f,{x:H$$.stage.width/2,y:H$$.stage.height/2,scaleX:0,scaleY:0},300,H$O.strongOut,H$y.create(this,this.doClose,[H$f,H$K]))},H$K.__super.call(this),this.maskLayer=new H$z,this.popupEffectHandler=H$y.create(this,this.popupEffect,null,!1),this.closeEffectHandler=H$y.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,H$$.stage.addChild(this),H$$.stage.on("resize",this,this._onResize),H$R.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}H$H(H$K,"laya.ui.DialogManager",H$z);var H$Y=H$K.prototype;return H$Y._closeOnSide=function(){var H$f=this.getChildAt(this.numChildren-1);H$f instanceof laya.ui.Dialog&&H$f.close("side")},H$Y.setLockView=function(H$f){this.lockLayer||(this.lockLayer=new H$k,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(H$$.stage.width,H$$.stage.height)),this.lockLayer.removeChildren(),H$f&&(H$f.centerX=H$f.centerY=0,this.lockLayer.addChild(H$f))},H$Y._onResize=function(H$f){var H$K=this.maskLayer.width=H$$.stage.width,H$Y=this.maskLayer.height=H$$.stage.height;this.lockLayer&&this.lockLayer.size(H$K,H$Y),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,H$K,H$Y,H$R.popupBgColor),this.maskLayer.alpha=H$R.popupBgAlpha;for(var H$X=this.numChildren-1;-1<H$X;H$X--){var H$L=this.getChildAt(H$X);H$L.popupCenter&&this._centerDialog(H$L)}},H$Y._centerDialog=function(H$f){H$f.x=Math.round((H$$.stage.width-H$f.width>>1)+H$f.pivotX),H$f.y=Math.round((H$$.stage.height-H$f.height>>1)+H$f.pivotY)},H$Y.open=function(H$f,H$K,H$Y){void 0===H$K&&(H$K=!1),void 0===H$Y&&(H$Y=!1),H$K&&this._closeAll(),H$f.popupCenter&&this._centerDialog(H$f),this.addChild(H$f),(H$f.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),H$Y&&null!=H$f.popupEffect?H$f.popupEffect.runWith(H$f):this.doOpen(H$f),this.event("open")},H$Y.doOpen=function(H$f){H$f.onOpened()},H$Y.lock=function(H$f){this.lockLayer&&(H$f?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},H$Y.close=function(H$f,H$K,H$Y){void 0===H$Y&&(H$Y=!1),H$Y&&null!=H$f.closeEffect?H$f.closeEffect.runWith([H$f,H$K]):this.doClose(H$f,H$K),this.event("close")},H$Y.doClose=function(H$f,H$K){H$f.removeSelf(),H$f.isModal&&this._checkMask(),H$f.closeHandler&&H$f.closeHandler.runWith(H$K),H$f.onClosed(H$K)},H$Y.closeAll=function(){this._closeAll(),this.event("close")},H$Y._closeAll=function(){for(var H$f=this.numChildren-1;-1<H$f;H$f--){var H$K=this.getChildAt(H$f);H$K&&null!=H$K.close&&this.doClose(H$K)}},H$Y.getDialogsByGroup=function(H$f){for(var H$K=[],H$Y=this.numChildren-1;-1<H$Y;H$Y--){var H$X=this.getChildAt(H$Y);H$X&&H$X.group===H$f&&H$K.push(H$X)}return H$K},H$Y.closeByGroup=function(H$f){for(var H$K=[],H$Y=this.numChildren-1;-1<H$Y;H$Y--){var H$X=this.getChildAt(H$Y);H$X&&H$X.group===H$f&&(H$X.close(),H$K.push(H$X))}return H$K},H$Y._checkMask=function(){this.maskLayer.removeSelf();for(var H$f=this.numChildren-1;-1<H$f;H$f--){var H$K=this.getChildAt(H$f);if(H$K&&H$K.isModal)return void this.addChildAt(this.maskLayer,H$f)}},H$K}(),H$k=function(H$f){function H$K(){H$K.__super.call(this)}H$H(H$K,"laya.ui.Box",H$f);var H$Y=H$K.prototype;return H$$.imps(H$Y,{"laya.ui.IBox":!0}),H$E(0,H$Y,"dataSource",H$f.prototype._$get_dataSource,function(H$f){for(var H$K in this._dataSource=H$f){var H$Y=this.getChildByName(H$K);H$Y?H$Y.dataSource=H$f[H$K]:this.hasOwnProperty(H$K)&&"function"!=typeof this[H$K]&&(this[H$K]=H$f[H$K])}}),H$K}(H$t),H$e=function(H$K){function H$Y(H$f,H$K){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,H$Y.__super.call(this),this._labelColors=H$G.buttonLabelColors,this._stateNum=H$G.buttonStateNum,void 0===H$K&&(H$K=""),this.skin=H$f,this.label=H$K}H$H(H$Y,"laya.ui.Button",H$K);var H$f=H$Y.prototype;return H$$.imps(H$f,{"laya.ui.ISelect":!0}),H$f.destroy=function(H$f){this.clearEvent(),H$x.clearCache(this,this._skin),H$x.clearObject(this,this._weakKey),void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(H$f),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},H$f.clearEvent=function(){this._skin&&H$L.atalsNotify&&H$L.atalsNotify.off(this._skin,this,this._setBtnSource)},H$f.createChildren=function(){this.graphics=this._bitmap=new H$V},H$f.createText=function(){this._text||(this._text=new H$C,this._text.overflow=H$C.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},H$f.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},H$f.onMouse=function(H$f){if(!1!==this.toggle||!this._selected)return"click"===H$f.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=H$Y.stateMap[H$f.type]))},H$f.changeClips=function(){var H$f=H$x.getRes(this._skin);if(H$f)if(this._skin&&""!=this._skin){H$x.clearObject(this,this._weakKey);var H$K=H$f.sourceWidth,H$Y=H$f.sourceHeight/this._stateNum;H$f.$_GID||(H$f.$_GID=H$I.getGID());var H$X=H$f.$_GID+"-"+this._stateNum,H$L=H$x.findObject(H$X);if(H$I.isOkTextureList(H$L)||(H$L=null),H$L)this._weakKey=H$X,H$x.keepObject(this,this._weakKey),this._sources=H$L;else{if(this._sources=[],1===this._stateNum)this._sources.push(H$f);else for(var H$H=0;H$H<this._stateNum;H$H++){var H$E=H$s.createFromTexture(H$f,0,H$Y*H$H,H$K,H$Y);if(H$f.alphaTexture){var H$d=H$f.width/H$f.alphaTexture.width;H$E.alphaTexture=H$s.createFromTexture(H$f.alphaTexture,0/H$d,H$Y*H$H/H$d,H$K/H$d,H$Y/H$d)}this._sources.push(H$E)}H$x.saveObject(H$X,this._sources),this._weakKey=H$X,H$x.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||H$K,this._bitmap.height=this._height||H$Y,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=H$K)}else console.warn("lose skin ",this._skin,this.name,this.__className)},H$f.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var H$f=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[H$f]),this.label&&(this._text.color=this._labelColors[H$f],this._strokeColors&&(this._text.strokeColor=this._strokeColors[H$f]))},H$f._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},H$E(0,H$f,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(H$f){this.createText(),this._text.strokeColor=H$f}),H$E(0,H$f,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),H$E(0,H$f,"skin",function(){return this._skin},function(H$f){if(this._skin!=H$f)if(this.clearEvent(),H$x.clearCache(this,this._skin),this._skin=H$f,H$x.keepCache(this,this._skin),H$x.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var H$K=H$L.resAtalsObj&&H$L.resAtalsObj[this._skin];H$K?(H$L.atalsNotify&&H$L.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=H$K.sourceW),0==this.height&&(this.height=H$K.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),H$f._setBtnSource=function(H$f,H$K){H$f===this._skin&&H$K&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},H$E(0,H$f,"state",function(){return this._state},function(H$f){this._state!=H$f&&(this._state=H$f,this._setStateChanged())}),H$E(0,H$f,"text",function(){return this.createText(),this._text}),H$E(0,H$f,"stateNum",function(){return this._stateNum},function(H$f){"string"==typeof H$f&&(H$f=parseInt(H$f)),this._stateNum!=H$f&&(this._stateNum=H$f<1?1:3<H$f?3:H$f,this.callLater(this.changeClips))}),H$E(0,H$f,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(H$f){this._strokeColors=H$m.fillArray(H$G.buttonLabelColors,H$f,String),this._setStateChanged()}),H$E(0,H$f,"labelColors",function(){return this._labelColors.join(",")},function(H$f){this._labelColors=H$m.fillArray(H$G.buttonLabelColors,H$f,String),this._setStateChanged()}),H$E(0,H$f,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),H$E(0,H$f,"label",function(){return this._text?this._text.text:null},function(H$f){(this._text||H$f)&&(this.createText(),this._text.text!=H$f&&(H$f&&!this._text.parent&&this.addChild(this._text),this._text.text=(H$f+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),H$E(0,H$f,"selected",function(){return this._selected},function(H$f){this._selected!=H$f&&(this._selected=H$f,this.state=this._selected?2:0,this.event("change"))}),H$E(0,H$f,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(H$f){this.createText(),this._text.padding=H$m.fillArray(H$G.labelPadding,H$f,Number)}),H$E(0,H$f,"labelSize",function(){return this.createText(),this._text.fontSize},function(H$f){this.createText(),this._text.fontSize=H$f}),H$E(0,H$f,"labelStroke",function(){return this.createText(),this._text.stroke},function(H$f){this.createText(),this._text.stroke=H$f}),H$E(0,H$f,"labelBold",function(){return this.createText(),this._text.bold},function(H$f){this.createText(),this._text.bold=H$f}),H$E(0,H$f,"labelFont",function(){return this.createText(),this._text.font},function(H$f){this.createText(),this._text.font=H$f}),H$E(0,H$f,"labelAlign",function(){return this.createText(),this._text.align},function(H$f){this.createText(),this._text.align=H$f}),H$E(0,H$f,"clickHandler",function(){return this._clickHandler},function(H$f){this._clickHandler=H$f}),H$E(0,H$f,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H$f){this._bitmap.sizeGrid=H$m.fillArray(H$G.defaultSizeGrid,H$f,Number)}),H$E(0,H$f,"width",H$K.prototype._$get_width,function(H$f){H$$.superSet(H$t,this,"width",H$f),this._autoSize&&(this._bitmap.width=H$f,this._text&&(this._text.width=H$f))}),H$E(0,H$f,"height",H$K.prototype._$get_height,function(H$f){H$$.superSet(H$t,this,"height",H$f),this._autoSize&&(this._bitmap.height=H$f,this._text&&(this._text.height=H$f))}),H$E(0,H$f,"dataSource",H$K.prototype._$get_dataSource,function(H$f){"number"==typeof(this._dataSource=H$f)||"string"==typeof H$f?this.label=H$f+"":H$$.superSet(H$t,this,"dataSource",H$f)}),H$E(0,H$f,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(H$f){this._bitmap._offset=H$f?H$m.fillArray([1,1],H$f,Number):[]}),H$X(H$Y,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),H$Y}(H$t),H$Q=function(H$K){function H$X(H$f,H$K,H$Y){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,H$X.__super.call(this),void 0===H$K&&(H$K=1),void 0===H$Y&&(H$Y=1),this._clipX=H$K,this._clipY=H$Y,this.skin=H$f}H$H(H$X,"laya.ui.Clip",H$K);var H$f=H$X.prototype;return H$f.destroy=function(H$f){this.clearEvent(),this.clearLoad(),H$x.clearCache(this,this._skin),H$x.clearObject(this,this._weakKey),void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},H$f.dispose=function(){this.destroy(!0),H$$.loader.clearRes(this._skin)},H$f.createChildren=function(){this.graphics=this._bitmap=new H$V},H$f._onDisplay=function(H$f){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},H$f.changeClip=function(){if(this._clipChanged=!1,this._skin){var H$f=H$x.getRes(this._skin);if(H$f)this.loadComplete(this._skin,H$f);else{if(H$L.resAtalsObj&&H$L.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=H$y.create(this,this.loadComplete,[this._skin]),this._progress=null,H$$.loader.load(this._skin,this._complete,this._progress)}}},H$f.loadComplete=function(H$f,H$K){if(H$f===this._skin&&H$K){H$x.clearObject(this,this._weakKey);var H$Y=this._clipWidth||Math.ceil(H$K.sourceWidth/this._clipX),H$X=this._clipHeight||Math.ceil(H$K.sourceHeight/this._clipY),H$L=this._skin+H$Y+H$X,H$H=H$x.findObject(H$L);if(H$I.isOkTextureList(H$H)||(H$H=null),H$H)this._weakKey=H$L,H$x.keepObject(this,this._weakKey),this._sources=H$H;else{this._sources=[];for(var H$E=0;H$E<this._clipY;H$E++)for(var H$d=0;H$d<this._clipX;H$d++){var H$O=H$s.createFromTexture(H$K,H$Y*H$d,H$X*H$E,H$Y,H$X);if(H$K.alphaTexture){var H$i=H$K.width/H$K.alphaTexture.width;H$O.alphaTexture=H$s.createFromTexture(H$K.alphaTexture,H$Y*H$d/H$i,H$X*H$E/H$i,H$Y/H$i,H$X/H$i)}this._sources.push(H$O)}H$x.saveObject(H$L,this._sources),this._weakKey=H$L,H$x.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},H$f.play=function(H$f,H$K){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=-1),this._isPlaying=!0,this.index=H$f,this._toIndex=H$K,this._index++,H$$.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},H$f._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},H$f.stop=function(){this._isPlaying=!1,H$$.timer.clear(this,this._loop),this.event("complete")},H$f._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},H$E(0,H$f,"interval",function(){return this._interval},function(H$f){this._interval!=H$f&&(this._interval=H$f,this._isPlaying&&this.play())}),H$f.clearEvent=function(){this._skin&&H$L.atalsNotify&&H$L.atalsNotify.off(this._skin,this,this._setBtnSource)},H$f.clearLoad=function(){this._skin&&((this._complete||this._progress)&&H$$.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},H$E(0,H$f,"skin",function(){return this._skin},function(H$f){if(this._skin!=H$f)if(this.clearLoad(),this.clearEvent(),H$x.clearCache(this,this._skin),this._skin=H$f){H$x.keepCache(this,this._skin);var H$K=H$x.getRes(H$f),H$Y=H$L.resAtalsObj&&H$L.resAtalsObj[this._skin];!H$K&&H$Y?H$L.atalsNotify&&H$L.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),H$f._setBtnSource=function(H$f,H$K){H$f===this._skin&&H$K&&(this.loadComplete(H$f,H$K),this.clearEvent())},H$E(0,H$f,"sources",function(){return this._sources},function(H$f){this._sources=H$f,this.index=this._index,this.event("loaded")}),H$E(0,H$f,"clipX",function(){return this._clipX},function(H$f){this._clipX=H$f||1,this._setClipChanged()}),H$E(0,H$f,"clipY",function(){return this._clipY},function(H$f){this._clipY=H$f||1,this._setClipChanged()}),H$E(0,H$f,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),H$E(0,H$f,"clipWidth",function(){return this._clipWidth},function(H$f){this._clipWidth=H$f,this._setClipChanged()}),H$E(0,H$f,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H$f){this._bitmap.sizeGrid=H$m.fillArray(H$G.defaultSizeGrid,H$f,Number)}),H$E(0,H$f,"group",function(){return this._group},function(H$f){H$f&&this._skin&&H$x.setGroup(this._skin,H$f),this._group=H$f}),H$E(0,H$f,"clipHeight",function(){return this._clipHeight},function(H$f){this._clipHeight=H$f,this._setClipChanged()}),H$E(0,H$f,"width",H$K.prototype._$get_width,function(H$f){H$$.superSet(H$t,this,"width",H$f),this._bitmap.width=H$f}),H$E(0,H$f,"height",H$K.prototype._$get_height,function(H$f){H$$.superSet(H$t,this,"height",H$f),this._bitmap.height=H$f}),H$E(0,H$f,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),H$E(0,H$f,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),H$E(0,H$f,"index",function(){return this._index},function(H$f){this._index=H$f,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[H$f]),this.event("change")}),H$E(0,H$f,"autoPlay",function(){return this._autoPlay},function(H$f){this._autoPlay!=H$f&&((this._autoPlay=H$f)?this.play():this.stop())}),H$E(0,H$f,"isPlaying",function(){return this._isPlaying},function(H$f){this._isPlaying=H$f}),H$E(0,H$f,"dataSource",H$K.prototype._$get_dataSource,function(H$f){"number"==typeof(this._dataSource=H$f)&&Math.floor(H$f)==H$f||"string"==typeof H$f?this.index=parseInt(H$f):H$$.superSet(H$t,this,"dataSource",H$f)}),H$E(0,H$f,"bitmap",function(){return this._bitmap}),H$X}(H$t),H$W=function(H$K){function H$f(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,H$f.__super.call(this)}H$H(H$f,"laya.ui.ColorPicker",H$K);var H$Y=H$f.prototype;return H$Y.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._colorPanel&&this._colorPanel.destroy(H$f),this._colorButton&&this._colorButton.destroy(H$f),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},H$Y.createChildren=function(){this.addChild(this._colorButton=new H$e),this._colorPanel=new H$k,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new H$z),this._colorPanel.addChild(this._colorBlock=new H$z),this._colorPanel.addChild(this._colorInput=new H$l)},H$Y.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},H$Y.onPanelMouseDown=function(H$f){H$f.stopPropagation()},H$Y.changePanel=function(){this._panelChanged=!1;var H$f=this._colorPanel.graphics;H$f.clear(),H$f.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(H$f=this._colorTiles.graphics).clear();for(var H$K=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],H$Y=0;H$Y<12;H$Y++)for(var H$X=0;H$X<20;H$X++){var H$L=0;H$L=0===H$X?H$K[H$Y]:1===H$X?0:51*(((3*H$Y+H$X/6)%3<<0)+3*(H$Y/6<<0))<<16|H$X%6*51<<8|(H$Y<<0)%6*51;var H$H=H$m.toColor(H$L);this._colors.push(H$H);var H$E=H$X*this._gridSize,H$d=H$Y*this._gridSize;H$f.drawRect(H$E,H$d,this._gridSize,this._gridSize,H$H,"#000000")}},H$Y.onColorButtonClick=function(H$f){this._colorPanel.parent?this.close():this.open()},H$Y.open=function(){var H$f=this.localToGlobal(new H$B),H$K=H$f.x+this._colorPanel.width<=H$$.stage.width?H$f.x:H$$.stage.width-this._colorPanel.width,H$Y=H$f.y+this._colorButton.height;H$Y=H$Y+this._colorPanel.height<=H$$.stage.height?H$Y:H$f.y-this._colorPanel.height,this._colorPanel.pos(H$K,H$Y),this._colorPanel.zOrder=1001,H$$._currentStage.addChild(this._colorPanel),H$$.stage.on("mousedown",this,this.removeColorBox)},H$Y.close=function(){H$$.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},H$Y.removeColorBox=function(H$f){this.close()},H$Y.onColorFieldKeyDown=function(H$f){13==H$f.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),H$f.stopPropagation())},H$Y.onColorInputChange=function(H$f){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},H$Y.onColorTilesClick=function(H$f){this.selectedColor=this.getColorByMouse(),this.close()},H$Y.onColorTilesMouseMove=function(H$f){this._colorInput.focus=!1;var H$K=this.getColorByMouse();this._colorInput.text=H$K,this.drawBlock(H$K)},H$Y.getColorByMouse=function(){var H$f=this._colorTiles.getMousePoint(),H$K=Math.floor(H$f.x/this._gridSize),H$Y=Math.floor(H$f.y/this._gridSize);return this._colors[20*H$Y+H$K]},H$Y.drawBlock=function(H$f){var H$K=this._colorBlock.graphics;H$K.clear();var H$Y=H$f||"#ffffff";H$K.drawRect(0,0,50,20,H$Y,this._borderColor),H$f||H$K.drawLine(0,0,50,20,"#ff0000")},H$Y.changeColor=function(){var H$f=this.graphics;H$f.clear();var H$K=this._selectedColor||"#000000";H$f.drawRect(0,0,this._colorButton.width,this._colorButton.height,H$K)},H$Y._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},H$E(0,H$Y,"inputBgColor",function(){return this._inputBgColor},function(H$f){this._inputBgColor=H$f,this._setPanelChanged()}),H$E(0,H$Y,"selectedColor",function(){return this._selectedColor},function(H$f){this._selectedColor!=H$f&&(this._selectedColor=this._colorInput.text=H$f,this.drawBlock(H$f),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",H$i.EMPTY.setTo("change",this,this)))}),H$E(0,H$Y,"skin",function(){return this._colorButton.skin},function(H$f){this._colorButton.skin=H$f,this.changeColor()}),H$E(0,H$Y,"bgColor",function(){return this._bgColor},function(H$f){this._bgColor=H$f,this._setPanelChanged()}),H$E(0,H$Y,"borderColor",function(){return this._borderColor},function(H$f){this._borderColor=H$f,this._setPanelChanged()}),H$E(0,H$Y,"inputColor",function(){return this._inputColor},function(H$f){this._inputColor=H$f,this._setPanelChanged()}),H$f}(H$t),H$q=function(H$K){function H$Y(H$f,H$K){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,H$Y.__super.call(this),this._itemColors=H$G.comboBoxItemColors,this.skin=H$f,this.labels=H$K}H$H(H$Y,"laya.ui.ComboBox",H$K);var H$f=H$Y.prototype;return H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._button&&this._button.destroy(H$f),this._list&&this._list.destroy(H$f),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},H$f.createChildren=function(){this.addChild(this._button=new H$e),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},H$f._createList=function(){this._list=new H$p,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},H$f._setListEvent=function(H$f){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=H$y.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},H$f.onListDown=function(H$f){H$f.stopPropagation()},H$f.onScrollBarDown=function(H$f){H$f.stopPropagation()},H$f.onButtonMouseDown=function(H$f){this.callLater(this.switchTo,[!this._isOpen])},H$f.changeList=function(){this._listChanged=!1;var H$f=this.width-2,H$K=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:H$f,height:this._itemHeight,fontSize:this._itemSize,color:H$K}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},H$f.onlistItemMouse=function(H$f,H$K){var H$Y=H$f.type;if("mouseover"===H$Y||"mouseout"===H$Y){if(this._isCustomList)return;var H$X=this._list.getCell(H$K);if(!H$X)return;var H$L=H$X.getChildByName("label");H$L&&("mouseover"===H$Y?(H$L.bgColor=this._itemColors[0],H$L.color=this._itemColors[1]):(H$L.bgColor=null,H$L.color=this._itemColors[2]))}else"click"===H$Y&&(this.selectedIndex=H$K,this.isOpen=!1)},H$f.switchTo=function(H$f){this.isOpen=H$f},H$f.changeOpen=function(){this.isOpen=!this._isOpen},H$f.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var H$f=this._list.graphics;H$f.clear(),H$f.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var H$K=this._list.array||[],H$Y=H$K.length=0,H$X=this._labels.length;H$Y<H$X;H$Y++)H$K.push({label:this._labels[H$Y]});this._list.height=this._listHeight,this._list.array=H$K},H$f.changeSelected=function(){this._button.label=this.selectedLabel},H$f._onStageMouseWheel=function(H$f){this._list&&!this._list.contains(H$f.target)&&this.removeList(null)},H$f.removeList=function(H$f){H$$.stage.off("mousedown",this,this.removeList),H$$.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},H$E(0,H$f,"selectedIndex",function(){return this._selectedIndex},function(H$f){this._selectedIndex!=H$f&&(this._selectedIndex=H$f,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[H$i.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),H$E(0,H$f,"measureHeight",function(){return this._button.height}),H$E(0,H$f,"skin",function(){return this._button.skin},function(H$f){this._button.skin!=H$f&&(this._button.skin=H$f,this._listChanged=!0)}),H$E(0,H$f,"measureWidth",function(){return this._button.width}),H$E(0,H$f,"width",H$K.prototype._$get_width,function(H$f){H$$.superSet(H$t,this,"width",H$f),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),H$E(0,H$f,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(H$f){this.selectedIndex=this._labels.indexOf(H$f)}),H$E(0,H$f,"labels",function(){return this._labels.join(",")},function(H$f){0<this._labels.length&&(this.selectedIndex=-1),H$f?this._labels=H$f.split(","):this._labels.length=0,this._itemChanged=!0}),H$E(0,H$f,"height",H$K.prototype._$get_height,function(H$f){H$$.superSet(H$t,this,"height",H$f),this._button.height=this._height}),H$E(0,H$f,"selectHandler",function(){return this._selectHandler},function(H$f){this._selectHandler=H$f}),H$E(0,H$f,"visibleNum",function(){return this._visibleNum},function(H$f){this._visibleNum=H$f,this._listChanged=!0}),H$E(0,H$f,"labelBold",function(){return this._button.text.bold},function(H$f){this._button.text.bold=H$f}),H$E(0,H$f,"itemColors",function(){return String(this._itemColors)},function(H$f){this._itemColors=H$m.fillArray(this._itemColors,H$f,String),this._listChanged=!0}),H$E(0,H$f,"itemSize",function(){return this._itemSize},function(H$f){this._itemSize=H$f,this._listChanged=!0}),H$E(0,H$f,"scrollBar",function(){return this.list.scrollBar}),H$E(0,H$f,"isOpen",function(){return this._isOpen},function(H$f){if(this._isOpen!=H$f)if(this._isOpen=H$f,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var H$K=this.localToGlobal(H$B.TEMP.setTo(0,0)),H$Y=H$K.y+this._button.height;H$Y=H$Y+this._listHeight<=H$$.stage.height?H$Y:H$K.y-this._listHeight,this._list.pos(H$K.x,H$Y),this._list.zOrder=1001,H$$._currentStage.addChild(this._list),H$$.stage.once("mousedown",this,this.removeList),H$$.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),H$E(0,H$f,"scrollBarSkin",function(){return this._scrollBarSkin},function(H$f){this._scrollBarSkin=H$f}),H$E(0,H$f,"sizeGrid",function(){return this._button.sizeGrid},function(H$f){this._button.sizeGrid=H$f}),H$E(0,H$f,"button",function(){return this._button}),H$E(0,H$f,"list",function(){return this._list||this._createList(),this._list},function(H$f){H$f&&(H$f.removeSelf(),this._isCustomList=!0,this._list=H$f,this._setListEvent(H$f),this._itemHeight=H$f.getCell(0).height+H$f.spaceY)}),H$E(0,H$f,"dataSource",H$K.prototype._$get_dataSource,function(H$f){"number"==typeof(this._dataSource=H$f)&&Math.floor(H$f)==H$f||"string"==typeof H$f?this.selectedIndex=parseInt(H$f):H$f instanceof Array?this.labels=H$f.join(","):H$$.superSet(H$t,this,"dataSource",H$f)}),H$E(0,H$f,"labelColors",function(){return this._button.labelColors},function(H$f){this._button.labelColors!=H$f&&(this._button.labelColors=H$f)}),H$E(0,H$f,"labelPadding",function(){return this._button.text.padding.join(",")},function(H$f){this._button.text.padding=H$m.fillArray(H$G.labelPadding,H$f,Number)}),H$E(0,H$f,"labelSize",function(){return this._button.text.fontSize},function(H$f){this._button.text.fontSize=H$f}),H$E(0,H$f,"labelFont",function(){return this._button.text.font},function(H$f){this._button.text.font=H$f}),H$E(0,H$f,"stateNum",function(){return this._button.stateNum},function(H$f){this._button.stateNum=H$f}),H$Y}(H$t),H$P=function(H$K){function H$Y(H$f){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,H$Y.__super.call(this),this._showButtons=H$R.showButtons,this._touchScrollEnable=H$R.touchScrollEnable,this._mouseWheelEnable=H$R.mouseWheelEnable,this.skin=H$f,this.max=1}H$H(H$Y,"laya.ui.ScrollBar",H$K);var H$f=H$Y.prototype;return H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),this.stopScroll(),this.target=null,H$K.prototype.destroy.call(this,H$f),this.upButton&&this.upButton.destroy(H$f),this.downButton&&this.downButton.destroy(H$f),this.slider&&this.slider.destroy(H$f),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},H$f.createChildren=function(){this.addChild(this.slider=new H$b),this.addChild(this.upButton=new H$e),this.addChild(this.downButton=new H$e)},H$f.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},H$f.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},H$f.onButtonMouseDown=function(H$f){var H$K=H$f.currentTarget===this.upButton;this.slide(H$K),H$$.timer.once(H$G.scrollBarDelayTime,this,this.startLoop,[H$K]),H$$.stage.once("mouseup",this,this.onStageMouseUp)},H$f.startLoop=function(H$f){H$$.timer.frameLoop(1,this,this.slide,[H$f])},H$f.slide=function(H$f){H$f?this.value-=this._scrollSize:this.value+=this._scrollSize},H$f.onStageMouseUp=function(H$f){H$$.timer.clear(this,this.startLoop),H$$.timer.clear(this,this.slide)},H$f.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},H$f.changeSize=function(){H$K.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},H$f.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},H$f.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},H$f.setScroll=function(H$f,H$K,H$Y){this.runCallLater(this.changeSize),this.slider.setSlider(H$f,H$K,H$Y),this.slider.bar.visible=0<H$K,!this._hide&&this.autoHide&&(this.visible=!1)},H$f.onTargetMouseWheel=function(H$f){this.value-=H$f.delta*this._scrollSize,this.target=this._target},H$f.onTargetMouseDown=function(H$f){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new H$B),this._lastPoint.setTo(H$$.stage.mouseX,H$$.stage.mouseY),H$$.timer.clear(this,this.tweenMove),H$a.clearTween(this),H$$.stage.once("mouseup",this,this.onStageMouseUp2),H$$.stage.once("mouseout",this,this.onStageMouseUp2),H$$.timer.frameLoop(1,this,this.loop)},H$f.loop=function(){var H$f=H$$.stage.mouseY,H$K=H$$.stage.mouseX;if(this._lastOffset=this.isVertical?H$f-this._lastPoint.y:H$K-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?H$$.stage._canvasTransform.getScaleY():H$$.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=H$K,this._lastPoint.y=H$f,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},H$f.onStageMouseUp2=function(H$f){if(H$$.stage.off("mouseup",this,this.onStageMouseUp2),H$$.stage.off("mouseout",this,this.onStageMouseUp2),H$$.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?H$a.to(this,{value:this.min},this.elasticBackTime,H$O.sineOut,H$y.create(this,this.elasticOver)):this._value>this.max&&H$a.to(this,{value:this.max},this.elasticBackTime,H$O.sineOut,H$y.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?H$$.stage.mouseY-this._lastPoint.y:H$$.stage.mouseX-this._lastPoint.x);for(var H$K=0,H$Y=Math.min(this._offsets.length,3),H$X=0;H$X<H$Y;H$X++)H$K+=this._offsets[this._offsets.length-1-H$X];if(this._lastOffset=H$K/H$Y,(H$K=Math.abs(this._lastOffset))<2)return void this.event("end");60<H$K&&(this._lastOffset=0<this._lastOffset?60:-60);var H$L=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));H$$.timer.frameLoop(1,this,this.tweenMove,[H$L])}},H$f.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&H$a.to(this,{alpha:0},500),this.event("end")},H$f.tweenMove=function(H$f){this._lastOffset*=this.rollRatio;var H$K=NaN;if(0<H$f&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,H$K=.5*-(this.min-H$f-this.value),this._lastOffset>H$K&&(this._lastOffset=H$K)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,H$K=.5*-(this.max+H$f-this.value),this._lastOffset<H$K&&(this._lastOffset=H$K))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(H$$.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?H$a.to(this,{value:this.min},this.elasticBackTime,H$O.sineOut,H$y.create(this,this.elasticOver)):this._value>this.max?H$a.to(this,{value:this.max},this.elasticBackTime,H$O.sineOut,H$y.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&H$a.to(this,{alpha:0},500)}},H$f.stopScroll=function(){this.onStageMouseUp2(null),H$$.timer.clear(this,this.tweenMove),H$a.clearTween(this)},H$E(0,H$f,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),H$E(0,H$f,"skin",function(){return this._skin},function(H$f){this._skin!=H$f&&(this._skin=H$f,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),H$E(0,H$f,"max",function(){return this.slider.max},function(H$f){this.slider.max=H$f}),H$E(0,H$f,"showButtons",function(){return this._showButtons},function(H$f){this._showButtons=H$f,this.callLater(this.changeScrollBar)}),H$E(0,H$f,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),H$E(0,H$f,"min",function(){return this.slider.min},function(H$f){this.slider.min=H$f}),H$E(0,H$f,"value",function(){return this._value},function(H$f){H$f!==this._value&&(this._value=H$f,this._isElastic||(this.slider._value!=H$f&&(this.slider._value=H$f,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),H$E(0,H$f,"isVertical",function(){return this.slider.isVertical},function(H$f){this.slider.isVertical=H$f}),H$E(0,H$f,"sizeGrid",function(){return this.slider.sizeGrid},function(H$f){this.slider.sizeGrid=H$f}),H$E(0,H$f,"scrollSize",function(){return this._scrollSize},function(H$f){this._scrollSize=H$f}),H$E(0,H$f,"dataSource",H$K.prototype._$get_dataSource,function(H$f){"number"==typeof(this._dataSource=H$f)||"string"==typeof H$f?this.value=Number(H$f):H$$.superSet(H$t,this,"dataSource",H$f)}),H$E(0,H$f,"thumbPercent",function(){return this._thumbPercent},function(H$f){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),H$f=1<=H$f?.99:H$f,this._thumbPercent=H$f,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*H$f,H$G.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*H$f,H$G.scrollBarMinNum))}),H$E(0,H$f,"target",function(){return this._target},function(H$f){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=H$f)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),H$E(0,H$f,"hide",function(){return this._hide},function(H$f){this._hide=H$f,this.visible=!H$f}),H$E(0,H$f,"touchScrollEnable",function(){return this._touchScrollEnable},function(H$f){this._touchScrollEnable=H$f,this.target=this._target}),H$E(0,H$f,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(H$f){this._mouseWheelEnable=H$f,this.target=this._target}),H$E(0,H$f,"tick",function(){return this.slider.tick},function(H$f){this.slider.tick=H$f}),H$Y}(H$t),H$b=function(H$K){function H$Y(H$f){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,H$Y.__super.call(this),this.skin=H$f}H$H(H$Y,"laya.ui.Slider",H$K);var H$f=H$Y.prototype;return H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._bg&&this._bg.destroy(H$f),this._bar&&this._bar.destroy(H$f),this._progress&&this._progress.destroy(H$f),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},H$f.createChildren=function(){this.addChild(this._bg=new H$J),this.addChild(this._bar=new H$e)},H$f.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},H$f.onBarMouseDown=function(H$f){this._globalSacle||(this._globalSacle=new H$B),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=H$$.stage.mouseX,this._ty=H$$.stage.mouseY,H$$.stage.on("mousemove",this,this.mouseMove),H$$.stage.once("mouseup",this,this.mouseUp),H$$.stage.once("mouseout",this,this.mouseUp),this.showValueText()},H$f.showValueText=function(){if(this.showLabel){var H$f=laya.ui.Slider.label;this.addChild(H$f),H$f.textField.changeText(this._value+""),this.isVertical?(H$f.x=this._bar.x+20,H$f.y=.5*(this._bar.height-H$f.height)+this._bar.y):(H$f.y=this._bar.y-20,H$f.x=.5*(this._bar.width-H$f.width)+this._bar.x)}},H$f.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},H$f.mouseUp=function(H$f){H$$.stage.off("mousemove",this,this.mouseMove),H$$.stage.off("mouseup",this,this.mouseUp),H$$.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},H$f.mouseMove=function(H$f){var H$K=this._value;this.isVertical?(this._bar.y+=(H$$.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(H$$.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=H$$.stage.mouseX,this._ty=H$$.stage.mouseY;var H$Y=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*H$Y)/H$Y,this._value!=H$K&&this.sendChangeEvent(),this.showValueText()},H$f.sendChangeEvent=function(H$f){void 0===H$f&&(H$f="change"),this.event(H$f),this.changeHandler&&this.changeHandler.runWith(this._value)},H$f.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},H$f.changeSize=function(){H$K.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},H$f.setSlider=function(H$f,H$K,H$Y){this._value=-1,this._min=H$f,this._max=H$f<H$K?H$K:H$f,this.value=H$Y<H$f?H$f:H$K<H$Y?H$K:H$Y},H$f.changeValue=function(){var H$f=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*H$f)/H$f,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var H$K=this._max-this._min;0===H$K&&(H$K=1),this.isVertical?(this._bar.y=(this._value-this._min)/H$K*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/H$K*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},H$f.onBgMouseDown=function(H$f){var H$K=this._bg.getMousePoint();this.isVertical?this.value=H$K.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=H$K.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},H$E(0,H$f,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),H$E(0,H$f,"skin",function(){return this._skin},function(H$f){if(this._skin!=H$f){this._skin=H$f,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var H$K=this._skin.replace(".png","$progress.png");H$x.getRes(H$K)&&(this._progress||(this.addChild(this._progress=new H$J),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=H$K),this.setBarPoint(),this.callLater(this.changeValue)}}),H$E(0,H$f,"allowClickBack",function(){return this._allowClickBack},function(H$f){this._allowClickBack!=H$f&&((this._allowClickBack=H$f)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),H$E(0,H$f,"max",function(){return this._max},function(H$f){this._max!=H$f&&(this._max=H$f,this.callLater(this.changeValue))}),H$E(0,H$f,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),H$E(0,H$f,"tick",function(){return this._tick},function(H$f){this._tick!=H$f&&(this._tick=H$f,this.callLater(this.changeValue))}),H$E(0,H$f,"sizeGrid",function(){return this._bg.sizeGrid},function(H$f){this._bg.sizeGrid=H$f,this._bar.sizeGrid=H$f,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),H$E(0,H$f,"min",function(){return this._min},function(H$f){this._min!=H$f&&(this._min=H$f,this.callLater(this.changeValue))}),H$E(0,H$f,"value",function(){return this._value},function(H$f){if(this._value!=H$f){var H$K=this._value;this._value=H$f,this.changeValue(),this._value!=H$K&&this.sendChangeEvent()}}),H$E(0,H$f,"dataSource",H$K.prototype._$get_dataSource,function(H$f){"number"==typeof(this._dataSource=H$f)||"string"==typeof H$f?this.value=Number(H$f):H$$.superSet(H$t,this,"dataSource",H$f)}),H$E(0,H$f,"bar",function(){return this._bar}),H$X(H$Y,["label",function(){return this.label=new H$M}]),H$Y}(H$t),H$J=function(H$K){function H$Y(H$f){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,H$Y.__super.call(this),this.skin=H$f}H$H(H$Y,"laya.ui.Image",H$K);var H$f=H$Y.prototype;return H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,H$x.clearCache(this,this._skin)},H$f.dispose=function(){this.destroy(!0),H$x.clearCache(this,this._skin),this.clearEvent()},H$f.createChildren=function(){this.graphics=this._bitmap=new H$V},H$f.setSource=function(H$f,H$K){this.destroyed||H$f===this._skin&&H$K&&(this.source=H$K,this.onCompResize(),this.clearEvent())},H$f.clearEvent=function(){this._skin&&H$L.atalsNotify&&H$L.atalsNotify.off(this._skin,this,this.setSource)},H$f.clearLoad=function(){this._skin&&((this._complete||this._progress)&&H$$.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},H$E(0,H$f,"source",function(){return this._bitmap.source},function(H$f){this._bitmap&&(this._bitmap.source=H$f,this.event("loaded"),this.repaint())}),H$E(0,H$f,"dataSource",H$K.prototype._$get_dataSource,function(H$f){"string"==typeof(this._dataSource=H$f)?this.skin=H$f:H$$.superSet(H$t,this,"dataSource",H$f)}),H$E(0,H$f,"measureHeight",function(){return this._bitmap.height}),H$E(0,H$f,"skin",function(){return this._skin},function(H$f){if(this._skin!=H$f)if(H$x.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=H$f){H$x.keepCache(this,this._skin);var H$K=H$x.getRes(H$f),H$Y=H$L.resAtalsObj&&H$L.resAtalsObj[this._skin];H$K?(this.source=H$K,this.onCompResize()):H$Y?(H$L.atalsNotify&&H$L.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=H$Y.sourceW),0==this.height&&(this.height=H$Y.sourceH)):(this._complete=H$y.create(this,this.setSource,[this._skin]),this._progress=null,H$$.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),H$E(0,H$f,"group",function(){return this._group},function(H$f){H$f&&this._skin&&H$x.setGroup(this._skin,H$f),this._group=H$f}),H$E(0,H$f,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(H$f){this._bitmap.sizeGrid=H$m.fillArray(H$G.defaultSizeGrid,H$f,Number)}),H$E(0,H$f,"measureWidth",function(){return this._bitmap.width}),H$E(0,H$f,"width",H$K.prototype._$get_width,function(H$f){H$$.superSet(H$t,this,"width",H$f),this._bitmap.width=0==H$f?1e-7:H$f}),H$E(0,H$f,"height",H$K.prototype._$get_height,function(H$f){H$$.superSet(H$t,this,"height",H$f),this._bitmap.height=0==H$f?1e-7:H$f}),H$Y}(H$t),H$M=function(H$K){function H$Y(H$f){this._tf=null,H$Y.__super.call(this),void 0===H$f&&(H$f=""),H$U.defaultColor=H$G.labelColor,this.text=H$f}H$H(H$Y,"laya.ui.Label",H$K);var H$f=H$Y.prototype;return H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._tf=null},H$f.createChildren=function(){this.addChild(this._tf=new H$C)},H$f.changeText=function(H$f){this._tf.changeText(H$f)},H$E(0,H$f,"padding",function(){return this._tf.padding.join(",")},function(H$f){this._tf.padding=H$m.fillArray(H$G.labelPadding,H$f,Number)}),H$E(0,H$f,"bold",function(){return this._tf.bold},function(H$f){this._tf.bold=H$f}),H$E(0,H$f,"align",function(){return this._tf.align},function(H$f){this._tf.align=H$f}),H$E(0,H$f,"text",function(){return this._tf.text},function(H$f){this._tf.text!=H$f&&(H$f&&(H$f=H$m.adptString(H$f+"")),this._tf.text=H$f,this.event("change"),this._width&&this._height||this.onCompResize())}),H$E(0,H$f,"italic",function(){return this._tf.italic},function(H$f){this._tf.italic=H$f}),H$E(0,H$f,"wordWrap",function(){return this._tf.wordWrap},function(H$f){this._tf.wordWrap=H$f}),H$E(0,H$f,"font",function(){return this._tf.font},function(H$f){this._tf.font=H$f}),H$E(0,H$f,"dataSource",H$K.prototype._$get_dataSource,function(H$f){"number"==typeof(this._dataSource=H$f)||"string"==typeof H$f?this.text=H$f+"":H$$.superSet(H$t,this,"dataSource",H$f)}),H$E(0,H$f,"color",function(){return this._tf.color},function(H$f){this._tf.color=H$f}),H$E(0,H$f,"valign",function(){return this._tf.valign},function(H$f){this._tf.valign=H$f}),H$E(0,H$f,"leading",function(){return this._tf.leading},function(H$f){this._tf.leading=H$f}),H$E(0,H$f,"fontSize",function(){return this._tf.fontSize},function(H$f){this._tf.fontSize=H$f}),H$E(0,H$f,"bgColor",function(){return this._tf.bgColor},function(H$f){this._tf.bgColor=H$f}),H$E(0,H$f,"borderColor",function(){return this._tf.borderColor},function(H$f){this._tf.borderColor=H$f}),H$E(0,H$f,"stroke",function(){return this._tf.stroke},function(H$f){this._tf.stroke=H$f}),H$E(0,H$f,"strokeColor",function(){return this._tf.strokeColor},function(H$f){this._tf.strokeColor=H$f}),H$E(0,H$f,"textField",function(){return this._tf}),H$E(0,H$f,"measureWidth",function(){return this._tf.width}),H$E(0,H$f,"measureHeight",function(){return this._tf.height}),H$E(0,H$f,"width",function(){return this._width||this._tf.text?H$$.superGet(H$t,this,"width"):0},function(H$f){H$$.superSet(H$t,this,"width",H$f),this._tf.width=H$f}),H$E(0,H$f,"height",function(){return this._height||this._tf.text?H$$.superGet(H$t,this,"height"):0},function(H$f){H$$.superSet(H$t,this,"height",H$f),this._tf.height=H$f}),H$E(0,H$f,"overflow",function(){return this._tf.overflow},function(H$f){this._tf.overflow=H$f}),H$E(0,H$f,"underline",function(){return this._tf.underline},function(H$f){this._tf.underline=H$f}),H$E(0,H$f,"underlineColor",function(){return this._tf.underlineColor},function(H$f){this._tf.underlineColor=H$f}),H$Y}(H$t),H$w=function(H$K){function H$Y(H$f){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,H$Y.__super.call(this),this.skin=H$f}H$H(H$Y,"laya.ui.ProgressBar",H$K);var H$f=H$Y.prototype;return H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._bg&&this._bg.destroy(H$f),this._bar&&this._bar.destroy(H$f),this._bg=this._bar=null,this.changeHandler=null},H$f.createChildren=function(){this.addChild(this._bg=new H$J),this.addChild(this._bar=new H$J)},H$f.changeValue=function(){if(this.sizeGrid){var H$f=this.sizeGrid.split(","),H$K=Number(H$f[3]),H$Y=Number(H$f[1]),H$X=(this.width-H$K-H$Y)*this._value;this._bar.width=H$K+H$Y+H$X,this._bar.visible=this._bar.width>H$K+H$Y}else this._bar.width=this.width*this._value},H$E(0,H$f,"measureHeight",function(){return this._bg.height}),H$E(0,H$f,"skin",function(){return this._skin},function(H$f){this._skin!=H$f&&(this._skin=H$f,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),H$E(0,H$f,"measureWidth",function(){return this._bg.width}),H$E(0,H$f,"height",H$K.prototype._$get_height,function(H$f){H$$.superSet(H$t,this,"height",H$f),this._bg.height=this._height,this._bar.height=this._height}),H$E(0,H$f,"bar",function(){return this._bar}),H$E(0,H$f,"value",function(){return this._value},function(H$f){this._value!=H$f&&(H$f=1<H$f?1:H$f<0?0:H$f,this._value=H$f,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(H$f))}),H$E(0,H$f,"bg",function(){return this._bg}),H$E(0,H$f,"sizeGrid",function(){return this._bg.sizeGrid},function(H$f){this._bg.sizeGrid=this._bar.sizeGrid=H$f}),H$E(0,H$f,"width",H$K.prototype._$get_width,function(H$f){H$$.superSet(H$t,this,"width",H$f),this._bg.width=this._width,this.callLater(this.changeValue)}),H$E(0,H$f,"dataSource",H$K.prototype._$get_dataSource,function(H$f){"number"==typeof(this._dataSource=H$f)||"string"==typeof H$f?this.value=Number(H$f):H$$.superSet(H$t,this,"dataSource",H$f)}),H$Y}(H$t),H$r=(function(H$f){function H$Y(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,H$Y.__super.call(this),this._tipBox=new H$t,this._tipBox.addChild(this._tipText=new H$C),this._tipText.x=this._tipText.y=5,this._tipText.color=H$Y.tipTextColor,this._defaultTipHandler=this._showDefaultTip,H$$.stage.on("showtip",this,this._onStageShowTip),H$$.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}H$H(H$Y,"laya.ui.TipManager",H$t);var H$K=H$Y.prototype;H$K._onStageHideTip=function(H$f){H$$.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},H$K._onStageShowTip=function(H$f){H$$.timer.once(H$Y.tipDelay,this,this._showTip,[H$f],!0)},H$K._showTip=function(H$f){if("string"==typeof H$f){var H$K=String(H$f);Boolean(H$K)&&this._defaultTipHandler(H$K)}else H$f instanceof laya.utils.Handler?H$f.run():"function"==typeof H$f&&H$f.apply();H$$.stage.on("mousemove",this,this._onStageMouseMove),H$$.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},H$K._onStageMouseDown=function(H$f){this.closeAll()},H$K._onStageMouseMove=function(H$f){this._showToStage(this,H$Y.offsetX,H$Y.offsetY)},H$K._showToStage=function(H$f,H$K,H$Y){void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0);var H$X=H$f.getBounds();H$f.x=H$$.stage.mouseX+H$K,H$f.y=H$$.stage.mouseY+H$Y,H$f.x+H$X.width>H$$.stage.width&&(H$f.x-=H$X.width+H$K),H$f.y+H$X.height>H$$.stage.height&&(H$f.y-=H$X.height+H$Y)},H$K.closeAll=function(){H$$.timer.clear(this,this._showTip),H$$.stage.off("mousemove",this,this._onStageMouseMove),H$$.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},H$K.showDislayTip=function(H$f){this.addChild(H$f),this._showToStage(this),H$$._currentStage.addChild(this)},H$K._showDefaultTip=function(H$f){this._tipText.text=H$f;var H$K=this._tipBox.graphics;H$K.clear(),H$K.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,H$Y.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),H$$._currentStage.addChild(this)},H$E(0,H$K,"defaultTipHandler",function(){return this._defaultTipHandler},function(H$f){this._defaultTipHandler=H$f}),H$Y.offsetX=10,H$Y.offsetY=15,H$Y.tipTextColor="#ffffff",H$Y.tipBackColor="#111111",H$Y.tipDelay=200}(),function(H$f){var H$l;function H$B(){this._idMap=null,this._aniList=null,this._watchMap={},H$B.__super.call(this)}H$H(H$B,"laya.ui.View",H$k);var H$K=H$B.prototype;return H$K.createView=function(H$f){if(H$f.animations&&!this._idMap&&(this._idMap={}),H$B.createComp(H$f,this,this),H$f.animations){var H$K,H$Y,H$X=[],H$L=H$f.animations,H$H=0,H$E=H$L.length;for(H$H=0;H$H<H$E;H$H++){switch(H$K=new H$Z,H$Y=H$L[H$H],H$K._setUp(this._idMap,H$Y),(this[H$Y.name]=H$K)._setControlNode(this),H$Y.action){case 1:H$K.play(0,!1);break;case 2:H$K.play(0,!0)}H$X.push(H$K)}this._aniList=H$X}0<this._width&&null==H$f.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},H$K.onEvent=function(H$f,H$K){},H$K.loadUI=function(H$f){var H$K=H$B.uiMap[H$f];H$K&&this.createView(H$K)},H$K.destroy=function(H$f){void 0===H$f&&(H$f=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,H$f)},H$K.changeData=function(H$f){var H$K=this._watchMap[H$f];if(H$K){console.log("change",H$f);for(var H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++){H$K[H$Y].exe(this)}}},H$B._regs=function(){for(var H$f in H$B.uiClassMap)H$h.regClass(H$f,H$B.uiClassMap[H$f])},H$B.createComp=function(H$f,H$K,H$Y,H$X){if(!(H$K=H$K||H$B.getCompInstance(H$f)))return console.warn("can not create:"+H$f.type),null;var H$L=H$f.child;if(H$L)for(var H$H=H$K instanceof laya.ui.List,H$E=0,H$d=H$L.length;H$E<H$d;H$E++){var H$O=H$L[H$E];if(!H$K.hasOwnProperty("itemRender")||"render"!=H$O.props.name&&"render"!==H$O.props.renderType)if("Graphic"==H$O.type)H$h.addGraphicsToSprite(H$O,H$K);else if(H$h.isDrawType(H$O.type))H$h.addGraphicToSprite(H$O,H$K,!0);else{if(H$H){var H$i=[],H$U=H$B.createComp(H$O,null,H$Y,H$i);H$i.length&&(H$U._$bindData=H$i)}else H$U=H$B.createComp(H$O,null,H$Y,H$X);"Script"==H$O.type?"owner"in H$U?H$U.owner=H$K:"target"in H$U&&(H$U.target=H$K):"mask"==H$O.props.renderType||"mask"==H$O.props.name?H$K.mask=H$U:H$U instanceof laya.display.Sprite&&H$K.addChild(H$U)}else H$K.itemRender=H$O}var H$Z=H$f.props;for(var H$y in H$Z){var H$l=H$Z[H$y];H$B.eventDic[H$y]?H$l&&H$Y&&H$K.on(H$y,H$Y,H$Y.onEvent,[H$l]):H$B.setCompValue(H$K,H$y,H$l,H$Y,H$X)}return H$$.__typeof(H$K,"laya.ui.IItem")&&H$K.initItems(),H$f.compId&&H$Y&&H$Y._idMap&&(H$Y._idMap[H$f.compId]=H$K),H$K},H$B.setCompValue=function(H$f,H$K,H$Y,H$X,H$L){if("string"==typeof H$Y&&-1<H$Y.indexOf("${")){if(H$B._sheet||(H$B._sheet=H$h.getClass("laya.data.Table")),!H$B._sheet)return void console.warn("Can not find class Sheet");if(H$L)H$L.push(H$f,H$K,H$Y);else if(H$X){-1==H$Y.indexOf("].")&&(H$Y=H$Y.replace(".","[0]."));var H$H,H$E,H$d=new H$l(H$f,H$K,H$Y);H$d.exe(H$X);for(var H$O=H$Y.replace(/\[.*?\]\./g,".");null!=(H$H=H$B._parseWatchData.exec(H$O));){for(var H$i=H$H[1];null!=(H$E=H$B._parseKeyWord.exec(H$i));){var H$U=H$E[0],H$Z=H$X._watchMap[H$U]||(H$X._watchMap[H$U]=[]);H$Z.push(H$d),H$B._sheet.I.notifer.on(H$U,H$X,H$X.changeData,[H$U])}(H$Z=H$X._watchMap[H$i]||(H$X._watchMap[H$i]=[])).push(H$d),H$B._sheet.I.notifer.on(H$i,H$X,H$X.changeData,[H$i])}}}else if("var"===H$K&&H$X)H$X[H$Y]=H$f;else if("onClick"==H$K){var H$y=H$$._runScript("(function(){"+H$Y+"})");H$f.on("click",H$X,H$y)}else H$f[H$K]="true"===H$Y||"false"!==H$Y&&H$Y},H$B.getCompInstance=function(H$f){var H$K,H$Y=H$f.props?H$f.props.runtime:null;return H$K=H$Y?H$B.viewClassMap[H$Y]||H$B.uiClassMap[H$Y]||H$$.__classmap[H$Y]:H$B.uiClassMap[H$f.type],H$f.props&&H$f.props.hasOwnProperty("renderType")&&"instance"==H$f.props.renderType?H$K.instance:H$K?new H$K:null},H$B.regComponent=function(H$f,H$K){H$B.uiClassMap[H$f]=H$K,H$h.regClass(H$f,H$K)},H$B.regViewRuntime=function(H$f,H$K){H$B.viewClassMap[H$f]=H$K},H$B.uiMap={},H$B.viewClassMap={},H$B._sheet=null,H$X(H$B,["uiClassMap",function(){return this.uiClassMap={ViewStack:H$ff,LinkButton:H$e,TextArea:H$if,ColorPicker:H$W,Box:H$k,Button:H$e,CheckBox:H$v,Clip:H$Q,ComboBox:H$q,Component:H$t,HScrollBar:H$u,HSlider:H$g,Image:H$J,Label:H$M,List:H$p,Panel:H$D,ProgressBar:H$w,Radio:H$o,RadioGroup:H$df,ScrollBar:H$P,Slider:H$b,Tab:H$Of,TextInput:H$Yf,View:H$B,VScrollBar:H$Kf,VSlider:H$Xf,Tree:H$F,HBox:H$Hf,VBox:H$Ef,Sprite:H$z,Animation:H$Y,Text:H$C,FontClip:H$c}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),H$B.__init$=function(){H$B._regs(),H$l=function(){function H$f(H$f,H$K,H$Y){this.comp=null,this.prop=null,this.value=null,this.comp=H$f,this.prop=H$K,this.value=H$Y}return H$H(H$f,""),H$f.prototype.exe=function(H$f){var H$K=H$m.getBindFun(this.value);this.comp[this.prop]=H$K.call(this,H$f)},H$f}()},H$B}()),H$v=function(H$f){function H$Y(H$f,H$K){void 0===H$K&&(H$K=""),H$Y.__super.call(this,H$f,H$K)}H$H(H$Y,"laya.ui.CheckBox",H$f);var H$K=H$Y.prototype;return H$K.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},H$K.initialize=function(){H$f.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},H$E(0,H$K,"dataSource",H$f.prototype._$get_dataSource,function(H$f){"boolean"==typeof(this._dataSource=H$f)?this.selected=H$f:"string"==typeof H$f?this.selected="true"===H$f:H$$.superSet(H$e,this,"dataSource",H$f)}),H$Y}(H$e),H$j=function(H$f){function H$K(){this._space=0,this._align="none",this._itemChanged=!1,H$K.__super.call(this)}H$H(H$K,"laya.ui.LayoutBox",H$k);var H$Y=H$K.prototype;return H$Y.addChild=function(H$f){return H$f.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,H$f)},H$Y.onResize=function(H$f){this._setItemChanged()},H$Y.addChildAt=function(H$f,H$K){return H$f.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,H$f,H$K)},H$Y.removeChild=function(H$f){return H$f.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,H$f)},H$Y.removeChildAt=function(H$f){return this.getChildAt(H$f).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,H$f)},H$Y.refresh=function(){this._setItemChanged()},H$Y.changeItems=function(){this._itemChanged=!1},H$Y.sortItem=function(H$f){H$f&&H$f.sort(function(H$f,H$K){return H$f.y-H$K.y})},H$Y._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},H$E(0,H$Y,"space",function(){return this._space},function(H$f){this._space=H$f,this._setItemChanged()}),H$E(0,H$Y,"align",function(){return this._align},function(H$f){this._align=H$f,this._setItemChanged()}),H$K}(),H$c=function(H$K){function H$Y(H$f,H$K){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,H$Y.__super.call(this),H$f&&(this.skin=H$f),H$K&&(this.sheet=H$K)}H$H(H$Y,"laya.ui.FontClip",H$K);var H$f=H$Y.prototype;return H$f.createChildren=function(){this._bitmap=new H$V,this.on("loaded",this,this._onClipLoaded)},H$f._onClipLoaded=function(){this.callLater(this.changeValue)},H$f.changeValue=function(){var H$f;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),H$f=this._sources[0]))){var H$K="horizontal"===this._direction;H$K?(this._wordsW=this._valueArr.length*(H$f.sourceWidth+this.spaceX),this._wordsH=H$f.sourceHeight):(this._wordsW=H$f.sourceWidth,this._wordsH=(H$f.sourceHeight+this.spaceY)*this._valueArr.length);var H$Y=0;if(this._width)switch(this._align){case"center":H$Y=.5*(this._width-this._wordsW);break;case"right":H$Y=this._width-this._wordsW;break;default:H$Y=0}for(var H$X=0,H$L=this._valueArr.length;H$X<H$L;H$X++){var H$H=this._indexMap[this._valueArr.charAt(H$X)];this.sources[H$H]&&(H$f=this.sources[H$H],H$K?this.graphics.drawTexture(H$f,H$Y+H$X*(H$f.sourceWidth+this.spaceX),0,H$f.sourceWidth,H$f.sourceHeight):this.graphics.drawTexture(H$f,0+H$Y,H$X*(H$f.sourceHeight+this.spaceY),H$f.sourceWidth,H$f.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),H$K.prototype.destroy.call(this,H$f)},H$E(0,H$f,"sheet",function(){return this._sheet},function(H$f){H$f+="";var H$K=(this._sheet=H$f).split(" ");this._clipX=String(H$K[0]).length,this.clipY=H$K.length,this._indexMap={};for(var H$Y=0;H$Y<this._clipY;H$Y++)for(var H$X=H$K[H$Y].split(""),H$L=0,H$H=H$X.length;H$L<H$H;H$L++)this._indexMap[H$X[H$L]]=H$Y*this._clipX+H$L}),H$E(0,H$f,"height",H$K.prototype._$get_height,function(H$f){H$$.superSet(H$Q,this,"height",H$f),this.callLater(this.changeValue)}),H$E(0,H$f,"direction",function(){return this._direction},function(H$f){this._direction=H$f,this.callLater(this.changeValue)}),H$E(0,H$f,"value",function(){return this._valueArr?this._valueArr:""},function(H$f){H$f+="",this._valueArr=H$f,this.callLater(this.changeValue)}),H$E(0,H$f,"width",H$K.prototype._$get_width,function(H$f){H$$.superSet(H$Q,this,"width",H$f),this.callLater(this.changeValue)}),H$E(0,H$f,"spaceX",function(){return this._spaceX},function(H$f){this._spaceX=H$f,"horizontal"===this._direction&&this.callLater(this.changeValue)}),H$E(0,H$f,"spaceY",function(){return this._spaceY},function(H$f){this._spaceY=H$f,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),H$E(0,H$f,"align",function(){return this._align},function(H$f){this._align=H$f,this.callLater(this.changeValue)}),H$E(0,H$f,"measureWidth",function(){return this._wordsW}),H$E(0,H$f,"measureHeight",function(){return this._wordsH}),H$Y}(H$Q),H$p=function(H$f){function H$K(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new H$B,H$K.__super.call(this)}H$H(H$K,"laya.ui.List",H$f);var H$Y=H$K.prototype;return H$$.imps(H$Y,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),H$Y.destroy=function(H$f){void 0===H$f&&(H$f=!0),this._content&&this._content.destroy(H$f),this._scrollBar&&this._scrollBar.destroy(H$f),laya.ui.Component.prototype.destroy.call(this,H$f),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null},H$Y.createChildren=function(){this.addChild(this._content=new H$k)},H$Y.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=H$$.superGet(H$k,this,"cacheAs")),H$$.superSet(H$k,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},H$Y.onScrollEnd=function(){H$$.superSet(H$k,this,"cacheAs",this._$P.cacheAs)},H$Y._removePreScrollBar=function(){var H$f=this.removeChildByName("scrollBar");H$f&&H$f.destroy(!0)},H$Y.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var H$f=this._getOneCell(),H$K=H$f.width+this._spaceX||1,H$Y=H$f.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/H$K):Math.ceil(this._width/H$K)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/H$Y):Math.round(this._height/H$Y));var H$X=this._width?this._width:H$K*this.repeatX-this._spaceX,H$L=this._height?this._height:H$Y*this.repeatY-this._spaceY;this._cellSize=this._isVertical?H$Y:H$K,this._cellOffset=this._isVertical?H$Y*Math.max(this._repeatY2,this._repeatY)-H$L-this._spaceY:H$K*Math.max(this._repeatX2,this._repeatX)-H$X-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=H$L:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=H$X),this.setContentSize(H$X,H$L);var H$H=this._isVertical?this.repeatX:this.repeatY,H$E=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,H$H,H$E),this._createdLine=H$E,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},H$Y._getOneCell=function(){if(0===this._cells.length){var H$f=this.createItem();if(this._offset.setTo(H$f.x,H$f.y),this.cacheContent)return H$f;this._cells.push(H$f)}return this._cells[0]},H$Y._createItems=function(H$f,H$K,H$Y){var H$X=this._content,H$L=this._getOneCell(),H$H=H$L.width+this._spaceX,H$E=H$L.height+this._spaceY;if(this.cacheContent){var H$d=new H$k;H$d.cacheAsBitmap=!0,H$d.pos((this._isVertical?0:H$f)*H$H,(this._isVertical?H$f:0)*H$E),this._content.addChild(H$d),this._content.optimizeScrollRect=!0,H$X=H$d}else{for(var H$O=[],H$i=this._cells.length-1;-1<H$i;H$i--){var H$U=this._cells[H$i];H$U.removeSelf(),H$O.push(H$U)}this._cells.length=0}for(var H$Z=H$f;H$Z<H$Y;H$Z++)for(var H$y=0;H$y<H$K;H$y++)(H$L=H$O&&H$O.length?H$O.pop():this.createItem()).x=(this._isVertical?H$y:H$Z)*H$H-H$X.x,H$L.y=(this._isVertical?H$Z:H$y)*H$E-H$X.y,H$L.name="item"+(H$Z*H$K+H$y),H$X.addChild(H$L),this.addCell(H$L)},H$Y.createItem=function(){var H$f=[];if("function"==typeof this._itemRender)var H$K=new this._itemRender;else H$K=H$r.createComp(this._itemRender,null,null,H$f);if(0==H$f.length&&H$K._watchMap){var H$Y=H$K._watchMap;for(var H$X in H$Y)for(var H$L=H$Y[H$X],H$H=0;H$H<H$L.length;H$H++){var H$E=H$L[H$H];H$f.push(H$E.comp,H$E.prop,H$E.value)}}return H$f.length&&(H$K._$bindData=H$f),H$K},H$Y.addCell=function(H$f){H$f.on("click",this,this.onCellMouse),H$f.on("rightclick",this,this.onCellMouse),H$f.on("mouseover",this,this.onCellMouse),H$f.on("mouseout",this,this.onCellMouse),H$f.on("mousedown",this,this.onCellMouse),H$f.on("mouseup",this,this.onCellMouse),this._cells.push(H$f)},H$Y.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var H$f=0,H$K=H$f=0;H$K<1e4;H$K++){var H$Y=this.getChildByName("item"+H$K);if(!H$Y)break;this.addCell(H$Y),H$f++}this.repeatY=H$f}},H$Y.setContentSize=function(H$f,H$K){this._content.width=H$f,this._content.height=H$K,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new H$A),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,H$f,H$K),this._content.scrollRect=this._content.scrollRect),this.event("resize")},H$Y.onCellMouse=function(H$f){"mousedown"===H$f.type&&(this._isMoved=!1);var H$K=H$f.currentTarget,H$Y=this._startIndex+this._cells.indexOf(H$K);H$Y<0||("click"===H$f.type||"rightclick"===H$f.type?this.selectEnable&&!this._isMoved?this.selectedIndex=H$Y:this.changeCellState(H$K,!0,0):"mouseover"!==H$f.type&&"mouseout"!==H$f.type||this._selectedIndex===H$Y||this.changeCellState(H$K,"mouseover"===H$f.type,0),this.mouseHandler&&this.mouseHandler.runWith([H$f,H$Y]))},H$Y.changeCellState=function(H$f,H$K,H$Y){var H$X=H$f.getChildByName("selectBox");H$X&&(this.selectEnable=!0,H$X.visible=H$K,H$X.index=H$Y)},H$Y.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},H$Y.onScrollBarChange=function(H$f){this.runCallLater(this.changeCells);var H$K=this._scrollBar.value,H$Y=this._isVertical?this.repeatX:this.repeatY,H$X=this._isVertical?this.repeatY:this.repeatX,H$L=Math.floor(H$K/this._cellSize);if(this.cacheContent)H$E=H$X+1,this._createdLine-H$L<H$E&&(this._createItems(this._createdLine,H$Y,this._createdLine+H$E),this.renderItems(this._createdLine*H$Y,0),this._createdLine+=H$E);else{var H$H=H$L*H$Y,H$E=0;if(H$H>this._startIndex){H$E=H$H-this._startIndex;var H$d=!0,H$O=this._startIndex+H$Y*(H$X+1);this._isMoved=!0}else H$H<this._startIndex&&(H$E=this._startIndex-H$H,H$d=!1,H$O=this._startIndex-1,this._isMoved=!0);for(var H$i=0;H$i<H$E;H$i++){if(H$d){var H$U=this._cells.shift();this._cells[this._cells.length]=H$U;var H$Z=H$O+H$i}else H$U=this._cells.pop(),this._cells.unshift(H$U),H$Z=H$O-H$i;var H$y=Math.floor(H$Z/H$Y)*this._cellSize;this._isVertical?H$U.y=H$y:H$U.x=H$y,this.renderItem(H$U,H$Z)}this._startIndex=H$H,this.changeSelectStatus()}var H$l=this._content.scrollRect;this._isVertical?(H$l.y=H$K-this._offset.y,H$l.x=-this._offset.x):(H$l.y=-this._offset.y,H$l.x=H$K-this._offset.x),this._content.scrollRect=H$l},H$Y.posCell=function(H$f,H$K){if(this._scrollBar){var H$Y=this._isVertical?this.repeatX:this.repeatY,H$X=(this._isVertical?this.repeatY:this.repeatX,Math.floor(H$K/H$Y)*this._cellSize);this._isVertical?H$f.y=H$X:H$f.x=H$X}},H$Y.changeSelectStatus=function(){for(var H$f=0,H$K=this._cells.length;H$f<H$K;H$f++)this.changeCellState(this._cells[H$f],this._selectedIndex===this._startIndex+H$f,1)},H$Y.renderItems=function(H$f,H$K){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0);for(var H$Y=H$f,H$X=H$K||this._cells.length;H$Y<H$X;H$Y++)this.renderItem(this._cells[H$Y],this._startIndex+H$Y);this.changeSelectStatus(),this._twDone=!0},H$Y.renderItem=function(H$f,H$K){this._array&&0<=H$K&&H$K<this._array.length?(H$f.visible=!0,H$f._$bindData?(H$f._dataSource=this._array[H$K],this._bindData(H$f,this._array[H$K])):H$f.dataSource=this._array[H$K],this.cacheContent||this.posCell(H$f,H$K),this.hasListener("render")&&this.event("render",[H$f,H$K]),this.renderHandler&&this.renderHandler.runWith([H$f,H$K]),this.renderTwHandler&&this.renderTwHandler.runWith([H$f,H$K])):(H$f.visible=!1,H$f.dataSource=null)},H$Y._bindData=function(H$f,H$K){for(var H$Y=H$f._$bindData,H$X=0,H$L=H$Y.length;H$X<H$L;H$X++){var H$H=H$Y[H$X++],H$E=H$Y[H$X++],H$d=H$Y[H$X],H$O=H$m.getBindFun(H$d);H$H[H$E]=H$O.call(this,H$K)}},H$Y.refresh=function(){this.array=this._array},H$Y.getItem=function(H$f){return-1<H$f&&H$f<this._array.length?this._array[H$f]:null},H$Y.changeItem=function(H$f,H$K){-1<H$f&&H$f<this._array.length&&(this._array[H$f]=H$K,H$f>=this._startIndex&&H$f<this._startIndex+this._cells.length&&this.renderItem(this.getCell(H$f),H$f))},H$Y.setItem=function(H$f,H$K){this.changeItem(H$f,H$K)},H$Y.addItem=function(H$f){this._array.push(H$f),this.array=this._array},H$Y.addItemAt=function(H$f,H$K){this._array.splice(H$K,0,H$f),this.array=this._array},H$Y.deleteItem=function(H$f){this._array.splice(H$f,1),this.array=this._array},H$Y.getCell=function(H$f){return this.runCallLater(this.changeCells),-1<H$f&&this._cells?this._cells[(H$f-this._startIndex)%this._cells.length]:null},H$Y.scrollTo=function(H$f){if(this._scrollBar){var H$K=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(H$f/H$K)*this._cellSize}else this.startIndex=H$f},H$Y.tweenTo=function(H$f,H$K,H$Y){if(void 0===H$K&&(H$K=200),this._scrollBar){var H$X=this._isVertical?this.repeatX:this.repeatY;H$a.to(this._scrollBar,{value:Math.floor(H$f/H$X)*this._cellSize},H$K,null,H$Y,0,!0)}else this.startIndex=H$f,H$Y&&H$Y.run()},H$Y._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},H$Y.commitMeasure=function(){this.runCallLater(this.changeCells)},H$E(0,H$Y,"cacheAs",H$f.prototype._$get_cacheAs,function(H$f){H$$.superSet(H$k,this,"cacheAs",H$f),this._scrollBar&&(this._$P.cacheAs=null,"none"!==H$f?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),H$E(0,H$Y,"content",function(){return this._content}),H$E(0,H$Y,"height",H$f.prototype._$get_height,function(H$f){H$f!=this._height&&(H$$.superSet(H$k,this,"height",H$f),this._setCellChanged())}),H$E(0,H$Y,"itemRender",function(){return this._itemRender},function(H$f){if(this._itemRender!=H$f){this._itemRender=H$f;for(var H$K=this._cells.length-1;-1<H$K;H$K--)this._cells[H$K].destroy();this._cells.length=0,this._setCellChanged()}}),H$E(0,H$Y,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(H$f){this._removePreScrollBar();var H$K=new H$Kf;H$K.name="scrollBar",H$K.right=0,H$f&&" "!=H$f&&(H$K.skin=H$f),this.scrollBar=H$K,this.addChild(H$K),this._setCellChanged()}),H$E(0,H$Y,"page",function(){return this._page},function(H$f){this._page=H$f,this._array&&(this._page=0<H$f?H$f:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),H$E(0,H$Y,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(H$f){this._removePreScrollBar();var H$K=new H$u;H$K.name="scrollBar",H$K.bottom=0,H$f&&" "!=H$f&&(H$K.skin=H$f),this.scrollBar=H$K,this.addChild(H$K),this._setCellChanged()}),H$E(0,H$Y,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(H$f){this._repeatX=H$f,this._setCellChanged()}),H$E(0,H$Y,"scrollBar",function(){return this._scrollBar},function(H$f){this._scrollBar!=H$f&&(this._scrollBar=H$f)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),H$E(0,H$Y,"width",H$f.prototype._$get_width,function(H$f){H$f!=this._width&&(H$$.superSet(H$k,this,"width",H$f),this._setCellChanged())}),H$E(0,H$Y,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(H$f){this._repeatY=H$f,this._setCellChanged()}),H$E(0,H$Y,"spaceX",function(){return this._spaceX},function(H$f){this._spaceX=H$f,this._setCellChanged()}),H$E(0,H$Y,"spaceY",function(){return this._spaceY},function(H$f){this._spaceY=H$f,this._setCellChanged()}),H$E(0,H$Y,"selectedIndex",function(){return this._selectedIndex},function(H$f){this._selectedIndex!=H$f&&(this._selectedIndex=H$f,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(H$f),this.startIndex=this._startIndex)}),H$E(0,H$Y,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(H$f){this.selectedIndex=this._array.indexOf(H$f)}),H$E(0,H$Y,"length",function(){return this._array?this._array.length:0}),H$E(0,H$Y,"selection",function(){return this.getCell(this._selectedIndex)},function(H$f){this.selectedIndex=this._startIndex+this._cells.indexOf(H$f)}),H$E(0,H$Y,"startIndex",function(){return this._startIndex},function(H$f){this._startIndex=0<H$f?H$f:0,this.callLater(this.renderItems)}),H$E(0,H$Y,"twSwitch",function(){return this._twSwitch},function(H$f){this._twSwitch=H$f}),H$E(0,H$Y,"twDone",function(){return this._twDone},function(H$f){this._twDone=H$f}),H$E(0,H$Y,"array",function(){return this._array},function(H$f){this.runCallLater(this.changeCells),this._array=H$f||[];var H$K=this._array.length;if(this.totalPage=Math.ceil(H$K/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<H$K?this._selectedIndex:H$K-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var H$Y=this._isVertical?this.repeatX:this.repeatY,H$X=this._isVertical?this.repeatY:this.repeatX,H$L=Math.ceil(H$K/H$Y);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=H$X/H$L,this._scrollBar.setScroll(0,(H$L-H$X)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),H$E(0,H$Y,"dataSource",H$f.prototype._$get_dataSource,function(H$f){"number"==typeof(this._dataSource=H$f)&&Math.floor(H$f)==H$f||"string"==typeof H$f?this.selectedIndex=parseInt(H$f):H$f instanceof Array?this.array=H$f:H$$.superSet(H$k,this,"dataSource",H$f)}),H$E(0,H$Y,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),H$K}(H$k),H$u=function(H$f){function H$K(){H$K.__super.call(this)}return H$H(H$K,"laya.ui.HScrollBar",H$f),H$K.prototype.initialize=function(){H$f.prototype.initialize.call(this),this.slider.isVertical=!1},H$K}(H$P),H$D=function(H$f){function H$K(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,H$K.__super.call(this),this.width=this.height=100}H$H(H$K,"laya.ui.Panel",H$f);var H$Y=H$K.prototype;return H$Y.destroy=function(H$f){void 0===H$f&&(H$f=!0),laya.ui.Component.prototype.destroy.call(this,H$f),this._content&&this._content.destroy(H$f),this._vScrollBar&&this._vScrollBar.destroy(H$f),this._hScrollBar&&this._hScrollBar.destroy(H$f),this._vScrollBar=null,this._hScrollBar=null,this._content=null},H$Y.destroyChildren=function(){this._content.destroyChildren()},H$Y.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new H$k)},H$Y.addChild=function(H$f){return H$f.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(H$f)},H$Y.onResize=function(){this._setScrollChanged()},H$Y.addChildAt=function(H$f,H$K){return H$f.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(H$f,H$K)},H$Y.removeChild=function(H$f){return H$f.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(H$f)},H$Y.removeChildAt=function(H$f){return this.getChildAt(H$f).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(H$f)},H$Y.removeChildren=function(H$f,H$K){return void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=2147483647),this._content.removeChildren(H$f,H$K),this._setScrollChanged(),this},H$Y.getChildAt=function(H$f){return this._content.getChildAt(H$f)},H$Y.getChildByName=function(H$f){return this._content.getChildByName(H$f)},H$Y.getChildIndex=function(H$f){return this._content.getChildIndex(H$f)},H$Y.changeScroll=function(){this._scrollChanged=!1;var H$f=this.contentWidth||1,H$K=this.contentHeight||1,H$Y=this._vScrollBar,H$X=this._hScrollBar,H$L=H$Y&&H$K>this._height,H$H=H$X&&H$f>this._width,H$E=H$L?this._width-H$Y.width:this._width,H$d=H$H?this._height-H$X.height:this._height;H$Y&&(H$Y.x=this._width-H$Y.width,H$Y.y=0,H$Y.height=this._height-(H$H?H$X.height:0),H$Y.scrollSize=Math.max(.033*this._height,1),H$Y.thumbPercent=H$d/H$K,H$Y.setScroll(0,H$K-H$d,H$Y.value)),H$X&&(H$X.x=0,H$X.y=this._height-H$X.height,H$X.width=this._width-(H$L?H$Y.width:0),H$X.scrollSize=Math.max(.033*this._width,1),H$X.thumbPercent=H$E/H$f,H$X.setScroll(0,H$f-H$E,H$X.value))},H$Y.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},H$Y.setContentSize=function(H$f,H$K){var H$Y=this._content;H$Y.width=H$f,H$Y.height=H$K,H$Y.scrollRect||(H$Y.scrollRect=new H$A),H$Y.scrollRect.setTo(0,0,H$f,H$K),H$Y.scrollRect=H$Y.scrollRect},H$Y.onScrollBarChange=function(H$f){var H$K=this._content.scrollRect;if(H$K){var H$Y=Math.round(H$f.value);H$f.isVertical?H$K.y=H$Y:H$K.x=H$Y,this._content.scrollRect=H$K}},H$Y.scrollTo=function(H$f,H$K){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),this.vScrollBar&&(this.vScrollBar.value=H$K),this.hScrollBar&&(this.hScrollBar.value=H$f)},H$Y.refresh=function(){this.changeScroll()},H$Y.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=H$$.superGet(H$k,this,"cacheAs")),H$$.superSet(H$k,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},H$Y.onScrollEnd=function(){H$$.superSet(H$k,this,"cacheAs",this._$P.cacheAs)},H$Y._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},H$E(0,H$Y,"numChildren",function(){return this._content.numChildren}),H$E(0,H$Y,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(H$f){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new H$u),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=H$f}),H$E(0,H$Y,"contentWidth",function(){for(var H$f=0,H$K=this._content.numChildren-1;-1<H$K;H$K--){var H$Y=this._content.getChildAt(H$K);H$f=Math.max(H$Y.x+H$Y.width*H$Y.scaleX,H$f)}return H$f}),H$E(0,H$Y,"contentHeight",function(){for(var H$f=0,H$K=this._content.numChildren-1;-1<H$K;H$K--){var H$Y=this._content.getChildAt(H$K);H$f=Math.max(H$Y.y+H$Y.height*H$Y.scaleY,H$f)}return H$f}),H$E(0,H$Y,"width",H$f.prototype._$get_width,function(H$f){H$$.superSet(H$k,this,"width",H$f),this._setScrollChanged()}),H$E(0,H$Y,"hScrollBar",function(){return this._hScrollBar}),H$E(0,H$Y,"content",function(){return this._content}),H$E(0,H$Y,"height",H$f.prototype._$get_height,function(H$f){H$$.superSet(H$k,this,"height",H$f),this._setScrollChanged()}),H$E(0,H$Y,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(H$f){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new H$Kf),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=H$f}),H$E(0,H$Y,"vScrollBar",function(){return this._vScrollBar}),H$E(0,H$Y,"cacheAs",H$f.prototype._$get_cacheAs,function(H$f){H$$.superSet(H$k,this,"cacheAs",H$f),this._$P.cacheAs=null,"none"!==H$f?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),H$K}(H$k),H$g=function(H$f){function H$K(H$f){H$K.__super.call(this,H$f),this.isVertical=!1}return H$H(H$K,"laya.ui.HSlider",H$b),H$K}(),H$N=function(H$f){function H$Y(H$f,H$K){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,H$Y.__super.call(this),this.skin=H$K,this.labels=H$f}H$H(H$Y,"laya.ui.UIGroup",H$f);var H$K=H$Y.prototype;return H$$.imps(H$K,{"laya.ui.IItem":!0}),H$K.preinitialize=function(){this.mouseEnabled=!0},H$K.destroy=function(H$f){void 0===H$f&&(H$f=!0),laya.ui.Component.prototype.destroy.call(this,H$f),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},H$K.addItem=function(H$f,H$K){void 0===H$K&&(H$K=!0);var H$Y=H$f,H$X=this._items.length;if(H$Y.name="item"+H$X,this.addChild(H$Y),this.initItems(),H$K&&0<H$X){var H$L=this._items[H$X-1];"horizontal"==this._direction?H$Y.x=H$L.x+H$L.width+this._space:H$Y.y=H$L.y+H$L.height+this._space}else H$K&&(H$Y.x=0,H$Y.y=0);return H$X},H$K.delItem=function(H$f,H$K){void 0===H$K&&(H$K=!0);var H$Y=this._items.indexOf(H$f);if(-1!=H$Y){var H$X=H$f;this.removeChild(H$X);for(var H$L=H$Y+1,H$H=this._items.length;H$L<H$H;H$L++){var H$E=this._items[H$L];H$E.name="item"+(H$L-1),H$K&&("horizontal"==this._direction?H$E.x-=H$X.width+this._space:H$E.y-=H$X.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var H$d;H$d=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=H$d}}},H$K.initItems=function(){this._items||(this._items=[]);for(var H$f=this._items.length=0;H$f<1e4;H$f++){var H$K=this.getChildByName("item"+H$f);if(null==H$K)break;this._items.push(H$K),H$K.selected=H$f===this._selectedIndex,H$K.clickHandler=H$y.create(this,this.itemClick,[H$f],!1)}},H$K.itemClick=function(H$f){this.selectedIndex=H$f},H$K.setSelect=function(H$f,H$K){this._items&&-1<H$f&&H$f<this._items.length&&(this._items[H$f].selected=H$K)},H$K.createItem=function(H$f,H$K){return null},H$K.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var H$f=0,H$K=0,H$Y=this._items.length;H$K<H$Y;H$K++){var H$X=this._items[H$K];this._skin&&(H$X.skin=this._skin),this._labelColors&&(H$X.labelColors=this._labelColors),this._labelSize&&(H$X.labelSize=this._labelSize),this._labelStroke&&(H$X.labelStroke=this._labelStroke),this._labelStrokeColor&&(H$X.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(H$X.strokeColors=this._strokeColors),this._labelBold&&(H$X.labelBold=this._labelBold),this._labelPadding&&(H$X.labelPadding=this._labelPadding),this._labelAlign&&(H$X.labelAlign=this._labelAlign),this._stateNum&&(H$X.stateNum=this._stateNum),this._labelFont&&(H$X.labelFont=this._labelFont),"horizontal"===this._direction?(H$X.y=0,H$X.x=H$f,H$f+=H$X.width+this._space):(H$X.x=0,H$X.y=H$f,H$f+=H$X.height+this._space)}this.changeSize()},H$K.commitMeasure=function(){this.runCallLater(this.changeLabels)},H$K._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},H$E(0,H$K,"labelStrokeColor",function(){return this._labelStrokeColor},function(H$f){this._labelStrokeColor!=H$f&&(this._labelStrokeColor=H$f,this._setLabelChanged())}),H$E(0,H$K,"skin",function(){return this._skin},function(H$f){this._skin!=H$f&&(this._skin=H$f,this._setLabelChanged())}),H$E(0,H$K,"selectedIndex",function(){return this._selectedIndex},function(H$f){this._selectedIndex!=H$f&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=H$f,this.setSelect(H$f,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),H$E(0,H$K,"labels",function(){return this._labels},function(H$f){if(this._labels!=H$f){if(this._labels=H$f,this.removeChildren(),this._setLabelChanged(),this._labels)for(var H$K=this._labels.split(","),H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++){var H$L=this.createItem(this._skin,H$K[H$Y]);H$L.name="item"+H$Y,this.addChild(H$L)}this.initItems()}}),H$E(0,H$K,"strokeColors",function(){return this._strokeColors},function(H$f){this._strokeColors!=H$f&&(this._strokeColors=H$f,this._setLabelChanged())}),H$E(0,H$K,"labelColors",function(){return this._labelColors},function(H$f){this._labelColors!=H$f&&(this._labelColors=H$f,this._setLabelChanged())}),H$E(0,H$K,"labelStroke",function(){return this._labelStroke},function(H$f){this._labelStroke!=H$f&&(this._labelStroke=H$f,this._setLabelChanged())}),H$E(0,H$K,"labelSize",function(){return this._labelSize},function(H$f){this._labelSize!=H$f&&(this._labelSize=H$f,this._setLabelChanged())}),H$E(0,H$K,"stateNum",function(){return this._stateNum},function(H$f){this._stateNum!=H$f&&(this._stateNum=H$f,this._setLabelChanged())}),H$E(0,H$K,"labelBold",function(){return this._labelBold},function(H$f){this._labelBold!=H$f&&(this._labelBold=H$f,this._setLabelChanged())}),H$E(0,H$K,"labelFont",function(){return this._labelFont},function(H$f){this._labelFont!=H$f&&(this._labelFont=H$f,this._setLabelChanged())}),H$E(0,H$K,"labelPadding",function(){return this._labelPadding},function(H$f){this._labelPadding!=H$f&&(this._labelPadding=H$f,this._setLabelChanged())}),H$E(0,H$K,"direction",function(){return this._direction},function(H$f){this._direction=H$f,this._setLabelChanged()}),H$E(0,H$K,"space",function(){return this._space},function(H$f){this._space=H$f,this._setLabelChanged()}),H$E(0,H$K,"items",function(){return this._items}),H$E(0,H$K,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(H$f){this.selectedIndex=this._items.indexOf(H$f)}),H$E(0,H$K,"dataSource",H$f.prototype._$get_dataSource,function(H$f){"number"==typeof(this._dataSource=H$f)&&Math.floor(H$f)==H$f||"string"==typeof H$f?this.selectedIndex=parseInt(H$f):H$f instanceof Array?this.labels=H$f.join(","):H$$.superSet(H$k,this,"dataSource",H$f)}),H$Y}(H$k),H$o=function(H$K){function H$Y(H$f,H$K){this._value=null,void 0===H$K&&(H$K=""),H$Y.__super.call(this,H$f,H$K)}H$H(H$Y,"laya.ui.Radio",H$K);var H$f=H$Y.prototype;return H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._value=null},H$f.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},H$f.initialize=function(){H$K.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},H$f.onClick=function(H$f){this.selected=!0},H$E(0,H$f,"value",function(){return null!=this._value?this._value:this.label},function(H$f){this._value=H$f}),H$Y}(H$e),H$F=function(H$f){function H$K(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,H$K.__super.call(this),this.width=this.height=200}H$H(H$K,"laya.ui.Tree",H$f);var H$Y=H$K.prototype;return H$$.imps(H$Y,{"laya.ui.IRender":!0}),H$Y.destroy=function(H$f){void 0===H$f&&(H$f=!0),laya.ui.Component.prototype.destroy.call(this,H$f),this._list&&this._list.destroy(H$f),this._list=null,this._source=null,this._renderHandler=null},H$Y.createChildren=function(){this.addChild(this._list=new H$p),this._list.renderHandler=H$y.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},H$Y.onListChange=function(H$f){this.event("change")},H$Y.getArray=function(){var H$f,H$K=[];for(var H$Y in this._source)H$f=this._source[H$Y],this.getParentOpenStatus(H$f)&&(H$f.x=this._spaceLeft*this.getDepth(H$f),H$K.push(H$f));return H$K},H$Y.getDepth=function(H$f,H$K){return void 0===H$K&&(H$K=0),null==H$f.nodeParent?H$K:this.getDepth(H$f.nodeParent,H$K+1)},H$Y.getParentOpenStatus=function(H$f){var H$K=H$f.nodeParent;return null==H$K||!!H$K.isOpen&&(null==H$K.nodeParent||this.getParentOpenStatus(H$K))},H$Y.renderItem=function(H$f,H$K){var H$Y=H$f.dataSource;if(H$Y){H$f.left=H$Y.x;var H$X=H$f.getChildByName("arrow");H$X&&(H$Y.hasChild?(H$X.visible=!0,H$X.index=H$Y.isOpen?1:0,H$X.tag=H$K,H$X.off("click",this,this.onArrowClick),H$X.on("click",this,this.onArrowClick)):H$X.visible=!1);var H$L=H$f.getChildByName("folder");H$L&&(2==H$L.clipY?H$L.index=H$Y.isDirectory?0:1:H$L.index=H$Y.isDirectory?H$Y.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([H$f,H$K])}},H$Y.onArrowClick=function(H$f){var H$K=H$f.currentTarget.tag;this._list.array[H$K].isOpen=!this._list.array[H$K].isOpen,this.event("open"),this._list.array=this.getArray()},H$Y.setItemState=function(H$f,H$K){this._list.array[H$f]&&(this._list.array[H$f].isOpen=H$K,this._list.array=this.getArray())},H$Y.fresh=function(){this._list.array=this.getArray(),this.repaint()},H$Y.parseXml=function(H$f,H$K,H$Y,H$X){var H$L,H$H=H$f.childNodes,H$E=H$H.length;if(!H$X){H$L={};var H$d,H$O=H$f.attributes;for(var H$i in H$O){var H$U=(H$d=H$O[H$i]).nodeName,H$Z=H$d.nodeValue;H$L[H$U]="true"==H$Z||"false"!=H$Z&&H$Z}H$L.nodeParent=H$Y,0<H$E&&(H$L.isDirectory=!0),H$L.hasChild=0<H$E,H$K.push(H$L)}for(var H$y=0;H$y<H$E;H$y++){var H$l=H$H[H$y];this.parseXml(H$l,H$K,H$L,!1)}},H$Y.parseOpenStatus=function(H$f,H$K){for(var H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++){var H$L=H$K[H$Y];if(H$L.isDirectory)for(var H$H=0,H$E=H$f.length;H$H<H$E;H$H++){var H$d=H$f[H$H];if(H$d.isDirectory&&this.isSameParent(H$d,H$L)&&H$L.label==H$d.label){H$L.isOpen=H$d.isOpen;break}}}},H$Y.isSameParent=function(H$f,H$K){return null==H$f.nodeParent&&null==H$K.nodeParent||null!=H$f.nodeParent&&null!=H$K.nodeParent&&(H$f.nodeParent.label==H$K.nodeParent.label&&this.isSameParent(H$f.nodeParent,H$K.nodeParent))},H$Y.filter=function(H$f){if(Boolean(H$f)){var H$K=[];this.getFilterSource(this._source,H$K,H$f),this._list.array=H$K}else this._list.array=this.getArray()},H$Y.getFilterSource=function(H$f,H$K,H$Y){var H$X;for(var H$L in H$Y=H$Y.toLocaleLowerCase(),H$f)!(H$X=H$f[H$L]).isDirectory&&-1<String(H$X.label).toLowerCase().indexOf(H$Y)&&(H$X.x=0,H$K.push(H$X)),H$X.child&&0<H$X.child.length&&this.getFilterSource(H$X.child,H$K,H$Y)},H$E(0,H$Y,"spaceBottom",function(){return this._list.spaceY},function(H$f){this._list.spaceY=H$f}),H$E(0,H$Y,"keepStatus",function(){return this._keepStatus},function(H$f){this._keepStatus=H$f}),H$E(0,H$Y,"itemRender",function(){return this._list.itemRender},function(H$f){this._list.itemRender=H$f}),H$E(0,H$Y,"array",function(){return this._list.array},function(H$f){this._keepStatus&&this._list.array&&H$f&&this.parseOpenStatus(this._list.array,H$f),this._source=H$f,this._list.array=this.getArray()}),H$E(0,H$Y,"mouseHandler",function(){return this._list.mouseHandler},function(H$f){this._list.mouseHandler=H$f}),H$E(0,H$Y,"dataSource",H$f.prototype._$get_dataSource,function(H$f){this._dataSource=H$f,H$$.superSet(H$k,this,"dataSource",H$f)}),H$E(0,H$Y,"source",function(){return this._source}),H$E(0,H$Y,"scrollBar",function(){return this._list.scrollBar}),H$E(0,H$Y,"list",function(){return this._list}),H$E(0,H$Y,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(H$f){this._list.vScrollBarSkin=H$f}),H$E(0,H$Y,"renderHandler",function(){return this._renderHandler},function(H$f){this._renderHandler=H$f}),H$E(0,H$Y,"selectedIndex",function(){return this._list.selectedIndex},function(H$f){this._list.selectedIndex=H$f}),H$E(0,H$Y,"spaceLeft",function(){return this._spaceLeft},function(H$f){this._spaceLeft=H$f}),H$E(0,H$Y,"selectedItem",function(){return this._list.selectedItem},function(H$f){this._list.selectedItem=H$f}),H$E(0,H$Y,"width",H$f.prototype._$get_width,function(H$f){H$$.superSet(H$k,this,"width",H$f),this._list.width=H$f}),H$E(0,H$Y,"height",H$f.prototype._$get_height,function(H$f){H$$.superSet(H$k,this,"height",H$f),this._list.height=H$f}),H$E(0,H$Y,"xml",null,function(H$f){var H$K=[];this.parseXml(H$f.childNodes[0],H$K,null,!0),this.array=H$K}),H$E(0,H$Y,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),H$K}(H$k),H$ff=function(H$f){function H$K(){this._items=null,this._selectedIndex=0,H$K.__super.call(this),this._setIndexHandler=H$y.create(this,this.setIndex,null,!1)}H$H(H$K,"laya.ui.ViewStack",H$f);var H$Y=H$K.prototype;return H$$.imps(H$Y,{"laya.ui.IItem":!0}),H$Y.setItems=function(H$f){this.removeChildren();for(var H$K=0,H$Y=0,H$X=H$f.length;H$Y<H$X;H$Y++){var H$L=H$f[H$Y];H$L&&(H$L.name="item"+H$K,this.addChild(H$L),H$K++)}this.initItems()},H$Y.addItem=function(H$f){H$f.name="item"+this._items.length,this.addChild(H$f),this.initItems()},H$Y.initItems=function(){this._items=[];for(var H$f=0;H$f<1e4;H$f++){var H$K=this.getChildByName("item"+H$f);if(null==H$K)break;this._items.push(H$K),H$K.visible=H$f==this._selectedIndex}},H$Y.setSelect=function(H$f,H$K){this._items&&-1<H$f&&H$f<this._items.length&&(this._items[H$f].visible=H$K)},H$Y.setIndex=function(H$f){this.selectedIndex=H$f},H$E(0,H$Y,"dataSource",H$f.prototype._$get_dataSource,function(H$f){if("number"==typeof(this._dataSource=H$f)&&Math.floor(H$f)==H$f||"string"==typeof H$f)this.selectedIndex=parseInt(H$f);else for(var H$K in this._dataSource)this.hasOwnProperty(H$K)&&(this[H$K]=this._dataSource[H$K])}),H$E(0,H$Y,"selectedIndex",function(){return this._selectedIndex},function(H$f){this._selectedIndex!=H$f&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=H$f,this.setSelect(this._selectedIndex,!0))}),H$E(0,H$Y,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(H$f){this.selectedIndex=this._items.indexOf(H$f)}),H$E(0,H$Y,"items",function(){return this._items}),H$E(0,H$Y,"setIndexHandler",function(){return this._setIndexHandler},function(H$f){this._setIndexHandler=H$f}),H$K}(H$k),H$Kf=function(H$f){function H$K(){H$K.__super.call(this)}return H$H(H$K,"laya.ui.VScrollBar",H$P),H$K}(),H$Yf=function(H$K){function H$Y(H$f){this._bg=null,this._skin=null,H$Y.__super.call(this),void 0===H$f&&(H$f=""),this.text=H$f,this.skin=this.skin}H$H(H$Y,"laya.ui.TextInput",H$K);var H$f=H$Y.prototype;return H$f.preinitialize=function(){this.mouseEnabled=!0},H$f.destroy=function(H$f){H$x.clearCache(this,this._skin),void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._bg&&this._bg.destroy(),this._bg=null},H$f.createChildren=function(){this.addChild(this._tf=new H$l),this._tf.padding=H$G.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},H$f._onFocus=function(){this.event("focus",this)},H$f._onBlur=function(){this.event("blur",this)},H$f._onInput=function(){this.event("input",this)},H$f._onEnter=function(){this.event("enter",this)},H$f.initialize=function(){this.width=128,this.height=22},H$f.select=function(){this._tf.select()},H$f.setSelection=function(H$f,H$K){this._tf.setSelection(H$f,H$K)},H$E(0,H$f,"text",H$K.prototype._$get_text,function(H$f){this._tf.text!=H$f&&(H$f+="",this._tf.text=H$f,this.event("change"))}),H$E(0,H$f,"bg",function(){return this._bg},function(H$f){this.graphics=this._bg=H$f}),H$E(0,H$f,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(H$f){this._tf.inputElementYAdjuster=H$f}),H$E(0,H$f,"multiline",function(){return this._tf.multiline},function(H$f){this._tf.multiline=H$f}),H$E(0,H$f,"skin",function(){return this._skin},function(H$f){this._skin!=H$f&&(H$x.clearCache(this,this._skin),this._skin=H$f,this._bg||(this.graphics=this._bg=new H$V),H$x.keepCache(this,this._skin),this._bg.source=H$x.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),H$E(0,H$f,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(H$f){this._bg||(this.graphics=this._bg=new H$V),this._bg.sizeGrid=H$m.fillArray(H$G.defaultSizeGrid,H$f,Number)}),H$E(0,H$f,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(H$f){this._tf.inputElementXAdjuster=H$f}),H$E(0,H$f,"width",H$K.prototype._$get_width,function(H$f){H$$.superSet(H$M,this,"width",H$f),this._bg&&(this._bg.width=H$f)}),H$E(0,H$f,"height",H$K.prototype._$get_height,function(H$f){H$$.superSet(H$M,this,"height",H$f),this._bg&&(this._bg.height=H$f)}),H$E(0,H$f,"editable",function(){return this._tf.editable},function(H$f){this._tf.editable=H$f}),H$E(0,H$f,"restrict",function(){return this._tf.restrict},function(H$f){this._tf.restrict=H$f}),H$E(0,H$f,"prompt",function(){return this._tf.prompt},function(H$f){this._tf.prompt=H$f}),H$E(0,H$f,"promptColor",function(){return this._tf.promptColor},function(H$f){this._tf.promptColor=H$f}),H$E(0,H$f,"maxChars",function(){return this._tf.maxChars},function(H$f){this._tf.maxChars=H$f}),H$E(0,H$f,"focus",function(){return this._tf.focus},function(H$f){this._tf.focus=H$f}),H$E(0,H$f,"type",function(){return this._tf.type},function(H$f){this._tf.type=H$f}),H$E(0,H$f,"asPassword",function(){return this._tf.asPassword},function(H$f){this._tf.asPassword=H$f}),H$Y}(H$M),H$Xf=function(H$f){function H$K(){H$K.__super.call(this)}return H$H(H$K,"laya.ui.VSlider",H$b),H$K}(),H$Lf=function(H$f){function H$X(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,H$X.__super.call(this)}H$H(H$X,"laya.ui.Dialog",H$f);var H$K=H$X.prototype;return H$K.initialize=function(){this.popupEffect=H$X.manager.popupEffectHandler,this.closeEffect=H$X.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},H$K._dealDragArea=function(){var H$f=this.getChildByName("drag");H$f&&(this.dragArea=H$f.x+","+H$f.y+","+H$f.width+","+H$f.height,H$f.removeSelf())},H$K._onClick=function(H$f){var H$K=H$f.target;if(H$K)switch(H$K.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(H$K.name)}},H$K.show=function(H$f,H$K){void 0===H$f&&(H$f=!1),void 0===H$K&&(H$K=!0),this._open(!1,H$f,H$K)},H$K.popup=function(H$f,H$K){void 0===H$f&&(H$f=!1),void 0===H$K&&(H$K=!0),this._open(!0,H$f,H$K)},H$K._open=function(H$f,H$K,H$Y){H$X.manager.lock(!1),this.isModal=H$f,H$X.manager.open(this,H$K,H$Y)},H$K.onOpened=function(){},H$K.close=function(H$f,H$K){void 0===H$K&&(H$K=!0),H$X.manager.close(this,H$f,H$K)},H$K.onClosed=function(H$f){},H$K._onMouseDown=function(H$f){var H$K=this.getMousePoint();this._dragArea.contains(H$K.x,H$K.y)?this.startDrag():this.stopDrag()},H$E(0,H$K,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(H$f){if(H$f){var H$K=H$m.fillArray([0,0,0,0],H$f,Number);this._dragArea=new H$A(H$K[0],H$K[1],H$K[2],H$K[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),H$E(0,H$K,"isPopup",function(){return null!=this.parent}),H$E(0,H$K,"zOrder",H$f.prototype._$get_zOrder,function(H$f){H$$.superSet(H$r,this,"zOrder",H$f),H$X.manager._checkMask()}),H$E(1,H$X,"manager",function(){return H$X._manager=H$X._manager||new H$T},function(H$f){H$X._manager=H$f}),H$X.setLockView=function(H$f){H$X.manager.setLockView(H$f)},H$X.lock=function(H$f){H$X.manager.lock(H$f)},H$X.closeAll=function(){H$X.manager.closeAll()},H$X.getDialogsByGroup=function(H$f){return H$X.manager.getDialogsByGroup(H$f)},H$X.closeByGroup=function(H$f){return H$X.manager.closeByGroup(H$f)},H$X.CLOSE="close",H$X.CANCEL="cancel",H$X.SURE="sure",H$X.NO="no",H$X.OK="ok",H$X.YES="yes",H$X._manager=null,H$X}(H$r),H$Hf=function(H$f){function H$K(){H$K.__super.call(this)}H$H(H$K,"laya.ui.HBox",H$f);var H$Y=H$K.prototype;return H$Y.sortItem=function(H$f){H$f&&H$f.sort(function(H$f,H$K){return H$f.x-H$K.x})},H$Y.changeItems=function(){this._itemChanged=!1;for(var H$f=[],H$K=0,H$Y=0,H$X=this.numChildren;H$Y<H$X;H$Y++){var H$L=this.getChildAt(H$Y);H$L&&H$L.layoutEnabled&&(H$f.push(H$L),H$K=this._height?this._height:Math.max(H$K,H$L.height*H$L.scaleY))}this.sortItem(H$f);var H$H=0;for(H$Y=0,H$X=H$f.length;H$Y<H$X;H$Y++)(H$L=H$f[H$Y]).x=H$H,H$H+=H$L.width*H$L.scaleX+this._space,"top"==this._align?H$L.y=0:"middle"==this._align?H$L.y=.5*(H$K-H$L.height*H$L.scaleY):"bottom"==this._align&&(H$L.y=H$K-H$L.height*H$L.scaleY);this.changeSize()},H$E(0,H$Y,"height",H$f.prototype._$get_height,function(H$f){this._height!=H$f&&(H$$.superSet(H$j,this,"height",H$f),this.callLater(this.changeItems))}),H$K.NONE="none",H$K.TOP="top",H$K.MIDDLE="middle",H$K.BOTTOM="bottom",H$K}(H$j),H$Ef=function(H$f){function H$K(){H$K.__super.call(this)}H$H(H$K,"laya.ui.VBox",H$f);var H$Y=H$K.prototype;return H$Y.changeItems=function(){this._itemChanged=!1;for(var H$f=[],H$K=0,H$Y=0,H$X=this.numChildren;H$Y<H$X;H$Y++){var H$L=this.getChildAt(H$Y);H$L&&H$L.layoutEnabled&&(H$f.push(H$L),H$K=this._width?this._width:Math.max(H$K,H$L.width*H$L.scaleX))}this.sortItem(H$f);var H$H=0;for(H$Y=0,H$X=H$f.length;H$Y<H$X;H$Y++)(H$L=H$f[H$Y]).y=H$H,H$H+=H$L.height*H$L.scaleY+this._space,"left"==this._align?H$L.x=0:"center"==this._align?H$L.x=.5*(H$K-H$L.width*H$L.scaleX):"right"==this._align&&(H$L.x=H$K-H$L.width*H$L.scaleX);this.changeSize()},H$E(0,H$Y,"width",H$f.prototype._$get_width,function(H$f){this._width!=H$f&&(H$$.superSet(H$j,this,"width",H$f),this.callLater(this.changeItems))}),H$K.NONE="none",H$K.LEFT="left",H$K.CENTER="center",H$K.RIGHT="right",H$K}(H$j),H$df=function(H$f){function H$K(){H$K.__super.call(this)}return H$H(H$K,"laya.ui.RadioGroup",H$N),H$K.prototype.createItem=function(H$f,H$K){return new H$o(H$f,H$K)},H$K}(),H$Of=function(H$f){function H$K(){H$K.__super.call(this)}return H$H(H$K,"laya.ui.Tab",H$N),H$K.prototype.createItem=function(H$f,H$K){return new H$e(H$f,H$K)},H$K}(),H$if=function(H$K){function H$Y(H$f){this._vScrollBar=null,this._hScrollBar=null,void 0===H$f&&(H$f=""),H$Y.__super.call(this,H$f)}H$H(H$Y,"laya.ui.TextArea",H$K);var H$f=H$Y.prototype;return H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},H$f.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},H$f.onVBarChanged=function(H$f){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},H$f.onHBarChanged=function(H$f){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},H$f.changeScroll=function(){var H$f=this._vScrollBar&&0<this._tf.maxScrollY,H$K=this._hScrollBar&&0<this._tf.maxScrollX,H$Y=H$f?this._width-this._vScrollBar.width:this._width,H$X=H$K?this._height-this._hScrollBar.height:this._height,H$L=this._tf.padding||H$G.labelPadding;this._tf.width=H$Y,this._tf.height=H$X,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-H$L[2],this._vScrollBar.y=H$L[1],this._vScrollBar.height=this._height-(H$K?this._hScrollBar.height:0)-H$L[1]-H$L[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=H$X/Math.max(this._tf.textHeight,H$X),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=H$f),this._hScrollBar&&(this._hScrollBar.x=H$L[0],this._hScrollBar.y=this._height-this._hScrollBar.height-H$L[3],this._hScrollBar.width=this._width-(H$f?this._vScrollBar.width:0)-H$L[0]-H$L[2],this._hScrollBar.scrollSize=Math.max(.033*H$Y,1),this._hScrollBar.thumbPercent=H$Y/Math.max(this._tf.textWidth,H$Y),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=H$K)},H$f.scrollTo=function(H$f){this.commitMeasure(),this._tf.scrollY=H$f},H$E(0,H$f,"scrollY",function(){return this._tf.scrollY}),H$E(0,H$f,"width",H$K.prototype._$get_width,function(H$f){H$$.superSet(H$Yf,this,"width",H$f),this.callLater(this.changeScroll)}),H$E(0,H$f,"hScrollBar",function(){return this._hScrollBar}),H$E(0,H$f,"height",H$K.prototype._$get_height,function(H$f){H$$.superSet(H$Yf,this,"height",H$f),this.callLater(this.changeScroll)}),H$E(0,H$f,"maxScrollX",function(){return this._tf.maxScrollX}),H$E(0,H$f,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(H$f){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new H$Kf),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=H$f}),H$E(0,H$f,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(H$f){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new H$u),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=H$f}),H$E(0,H$f,"vScrollBar",function(){return this._vScrollBar}),H$E(0,H$f,"maxScrollY",function(){return this._tf.maxScrollY}),H$E(0,H$f,"scrollX",function(){return this._tf.scrollX}),H$Y}(H$Yf);!function(H$f){function H$K(){this._uiView=null,this.isCloseOther=!1,H$K.__super.call(this)}H$H(H$K,"laya.ui.AsynDialog",H$Lf);var H$Y=H$K.prototype;H$Y.createView=function(H$f){this._uiView=H$f},H$Y._open=function(H$f,H$K,H$Y){this.isModal=H$f,this.isCloseOther=H$K,H$Lf.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},H$Y.onCreated=function(){this.createUI(),this.onOpen()},H$Y.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},H$Y.onOpen=function(){H$Lf.manager.open(this,this.isCloseOther),H$Lf.manager.lock(!1)},H$Y.close=function(H$f,H$K){void 0===H$K&&(H$K=!0),H$Lf.manager.close(this),this.onClose()},H$Y.onClose=function(){},H$Y.destroy=function(H$f){void 0===H$f&&(H$f=!0),laya.ui.View.prototype.destroy.call(this,H$f),this._uiView=null,this.onDestroy()},H$Y.onDestroy=function(){}}();H$$.__init([H$r])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$f,H$K){"use strict";for(var H$Y in Object.defineProperty(H$K,"__esModule",{value:!0}),Laya){var H$X=Laya[H$Y];H$X&&H$X.__isclass&&(H$K[H$Y]=H$X)}}),function(H$y,H$f,H$C){H$C.un,H$C.uns;var H$Z=H$C.static,H$l=H$C.class,H$B=H$C.getset,H$X=H$C.__newvec,H$z=laya.maths.Arith,H$E=laya.webgl.atlas.AtlasResourceManager,H$Y=laya.webgl.shader.BaseShader,H$t=laya.utils.Browser,H$d=laya.webgl.utils.Buffer,H$s=laya.utils.Byte,H$L=laya.utils.ClassUtils,H$O=H$C.Config,H$H=(laya.events.Event,laya.events.EventDispatcher),H$G=laya.utils.Handler,H$A=laya.net.Loader,H$K=laya.net.LoaderManager,H$i=(laya.maths.MathUtil,laya.display.Node),H$$=laya.renders.Render,H$U=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),H$h=laya.resource.Resource,H$x=laya.utils.RunDriver,H$S=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),H$a=laya.display.Sprite,H$I=laya.utils.Stat,H$n=laya.utils.StringKey,H$m=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),H$_=laya.utils.Utils,H$R=laya.webgl.WebGL,H$V=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;H$C.interface("laya.d3.core.IClone"),H$C.interface("laya.d3.graphics.IVertex"),H$C.interface("laya.d3.core.render.IUpdate"),H$C.interface("laya.d3.core.scene.ITreeNode"),H$C.interface("laya.d3.core.render.IRenderable");(function(){function H$e(){}H$l(H$e,"laya.d3.animation.AnimationClipParser01"),H$e.READ_DATA=function(){H$e._DATA.offset=H$e._reader.getUint32(),H$e._DATA.size=H$e._reader.getUint32()},H$e.READ_BLOCK=function(){for(var H$f=H$e._BLOCK.count=H$e._reader.getUint16(),H$K=H$e._BLOCK.blockStarts=[],H$Y=H$e._BLOCK.blockLengths=[],H$X=0;H$X<H$f;H$X++)H$K.push(H$e._reader.getUint32()),H$Y.push(H$e._reader.getUint32())},H$e.READ_STRINGS=function(){var H$f=H$e._reader.getUint32(),H$K=H$e._reader.getUint16(),H$Y=H$e._reader.pos;H$e._reader.pos=H$f+H$e._DATA.offset;for(var H$X=0;H$X<H$K;H$X++)H$e._strings[H$X]=H$e._reader.readUTFString();H$e._reader.pos=H$Y},H$e.parse=function(H$f,H$K){H$e._animationClip=H$f;(H$e._reader=H$K).__getBuffer();H$e.READ_DATA(),H$e.READ_BLOCK(),H$e.READ_STRINGS();for(var H$Y=0,H$X=H$e._BLOCK.count;H$Y<H$X;H$Y++){var H$L=H$K.getUint16(),H$H=H$e._strings[H$L],H$E=H$e["READ_"+H$H];if(null==H$E)throw new Error("model file err,no this function:"+H$L+" "+H$H);H$E.call()}},H$e.READ_ANIMATIONS=function(){var H$f,H$K=0,H$Y=0,H$X=H$e._reader,H$L=H$X.__getBuffer(),H$H=[],H$E=H$X.getUint8();for(H$H.length=H$E,H$K=0;H$K<H$E;H$K++)H$H[H$K]=H$X.getUint16();var H$d=[],H$O=H$X.getUint16();for(H$d.length=H$O,H$K=0;H$K<H$O;H$K++)H$d[H$K]=H$X.getFloat32();var H$i=H$e._animationClip;H$i.name=H$e._strings[H$X.getUint16()];var H$U=H$i._duration=H$X.getFloat32();H$i.islooping=!!H$X.getByte(),H$i._frameRate=H$X.getInt16();var H$Z=H$X.getInt16(),H$y=H$i._nodes=new Array;H$y.length=H$Z,(H$i._publicClipDatas=[]).length=H$Z;var H$l=H$i._nodesMap={},H$B=0,H$$=0;for(H$K=0;H$K<H$Z;H$K++){H$f=H$y[H$K]=new H$w;var H$h=H$X.getUint16(),H$A=H$f.path=[];for(H$A.length=H$h,H$Y=0;H$Y<H$h;H$Y++)H$A[H$Y]=H$e._strings[H$X.getUint16()];var H$x=H$A.join("/"),H$S=H$l[H$x];H$S||(H$l[H$x]=H$S=[]),H$S.push(H$f);var H$z=H$X.getInt16();-1!==H$z&&(H$f.componentType=H$e._strings[H$z]);var H$C=H$J._propertyIndexDic[H$e._strings[H$X.getUint16()]];if(null==H$C)throw new Error("AnimationClipParser01:unknown property name.");var H$s=H$C<4,H$a=!H$s||H$s&&""===H$A[0];(H$f._cacheProperty=H$a)?H$B++:H$$++,H$f.propertyNameID=H$C;var H$I=H$H[H$X.getUint8()];H$f.keyFrameWidth=H$I/4;var H$n=H$f.keyFrames=[],H$_=H$n.length=H$X.getUint16(),H$G=null,H$m=NaN;for(H$Y=0;H$Y<H$_;H$Y++){var H$R=H$n[H$Y]=new H$M;H$m=H$R.startTime=H$d[H$X.getUint16()];var H$V=H$X.pos;H$R.inTangent=new Float32Array(H$L.slice(H$V,H$V+H$I)),H$X.pos+=H$I,H$V=H$X.pos,H$R.outTangent=new Float32Array(H$L.slice(H$V,H$V+H$I)),H$X.pos+=H$I,H$V=H$X.pos,H$R.data=new Float32Array(H$L.slice(H$V,H$V+H$I)),H$X.pos+=H$I,H$G&&(H$G.next=H$R,H$G.duration=H$m-H$G.startTime),H$G=H$R}H$R.next=null,H$R.duration=H$U-H$m}var H$t=H$i._nodeToCachePropertyMap=new Int32Array(H$Z),H$T=H$i._cachePropertyMap=new Int32Array(H$B),H$k=H$i._unCachePropertyMap=new Int32Array(H$$);for(H$B=H$$=0,H$K=0;H$K<H$Z;H$K++)(H$f=H$y[H$K])._cacheProperty?(H$t[H$K]=H$B,H$T[H$B++]=H$K):H$k[H$$++]=H$K},H$e._animationClip=null,H$e._reader=null,H$e._strings=[],H$Z(H$e,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function H$P(){}H$l(H$P,"laya.d3.animation.AnimationClipParser02"),H$P.READ_DATA=function(){H$P._DATA.offset=H$P._reader.getUint32(),H$P._DATA.size=H$P._reader.getUint32()},H$P.READ_BLOCK=function(){for(var H$f=H$P._BLOCK.count=H$P._reader.getUint16(),H$K=H$P._BLOCK.blockStarts=[],H$Y=H$P._BLOCK.blockLengths=[],H$X=0;H$X<H$f;H$X++)H$K.push(H$P._reader.getUint32()),H$Y.push(H$P._reader.getUint32())},H$P.READ_STRINGS=function(){var H$f=H$P._reader.getUint32(),H$K=H$P._reader.getUint16(),H$Y=H$P._reader.pos;H$P._reader.pos=H$f+H$P._DATA.offset;for(var H$X=0;H$X<H$K;H$X++)H$P._strings[H$X]=H$P._reader.readUTFString();H$P._reader.pos=H$Y},H$P.parse=function(H$f,H$K){H$P._animationClip=H$f;(H$P._reader=H$K).__getBuffer();H$P.READ_DATA(),H$P.READ_BLOCK(),H$P.READ_STRINGS();for(var H$Y=0,H$X=H$P._BLOCK.count;H$Y<H$X;H$Y++){var H$L=H$K.getUint16(),H$H=H$P._strings[H$L],H$E=H$P["READ_"+H$H];if(null==H$E)throw new Error("model file err,no this function:"+H$L+" "+H$H);H$E.call()}},H$P.READ_ANIMATIONS=function(){var H$f,H$K=0,H$Y=0,H$X=H$P._reader,H$L=H$X.__getBuffer(),H$H=[],H$E=H$X.getUint8();for(H$H.length=H$E,H$K=0;H$K<H$E;H$K++)H$H[H$K]=H$X.getUint16();var H$d=[],H$O=H$X.getUint16();for(H$d.length=H$O,H$K=0;H$K<H$O;H$K++)H$d[H$K]=H$X.getFloat32();var H$i=H$P._animationClip;H$i.name=H$P._strings[H$X.getUint16()];var H$U=H$i._duration=H$X.getFloat32();H$i.islooping=!!H$X.getByte(),H$i._frameRate=H$X.getInt16();var H$Z=H$X.getInt16(),H$y=H$i._nodes=new Array;H$y.length=H$Z,(H$i._publicClipDatas=[]).length=H$Z;var H$l=H$i._nodesMap={},H$B=0,H$$=0;for(H$K=0;H$K<H$Z;H$K++){H$f=H$y[H$K]=new H$w;var H$h=H$X.getUint16(),H$A=H$f.path=[];for(H$A.length=H$h,H$Y=0;H$Y<H$h;H$Y++)H$A[H$Y]=H$P._strings[H$X.getUint16()];var H$x=H$A.join("/"),H$S=H$l[H$x];H$S||(H$l[H$x]=H$S=[]),H$S.push(H$f);var H$z=H$X.getInt16();-1!==H$z&&(H$f.componentType=H$P._strings[H$z]);var H$C=H$J._propertyIndexDic[H$P._strings[H$X.getUint16()]];if(null==H$C)throw new Error("AnimationClipParser02:unknown property name.");var H$s=H$C<4,H$a=!H$s||H$s&&""===H$A[0];(H$f._cacheProperty=H$a)?H$B++:H$$++,H$f.propertyNameID=H$C;var H$I=H$H[H$X.getUint8()];H$f.keyFrameWidth=H$I/4;var H$n=H$f.keyFrames=[],H$_=H$n.length=H$X.getUint16(),H$G=null,H$m=NaN;for(H$Y=0;H$Y<H$_;H$Y++){var H$R=H$n[H$Y]=new H$M;H$m=H$R.startTime=H$d[H$X.getUint16()];var H$V=H$X.pos;H$R.inTangent=new Float32Array(H$L.slice(H$V,H$V+H$I)),H$X.pos+=H$I,H$V=H$X.pos,H$R.outTangent=new Float32Array(H$L.slice(H$V,H$V+H$I)),H$X.pos+=H$I,H$V=H$X.pos,H$R.data=new Float32Array(H$L.slice(H$V,H$V+H$I)),H$X.pos+=H$I,H$G&&(H$G.next=H$R,H$G.duration=H$m-H$G.startTime),H$G=H$R}H$R.next=null,H$R.duration=H$U-H$m}var H$t=H$X.getUint16();for(H$K=0;H$K<H$t;H$K++){var H$T,H$k=new H$b;H$k.time=H$X.getFloat32(),H$k.eventName=H$P._strings[H$X.getUint16()];var H$e=H$X.getUint16();for(0<H$e&&(H$k.params=H$T=[]),H$Y=0;H$Y<H$e;H$Y++){switch(H$X.getByte()){case 0:H$T.push(!!H$X.getByte());break;case 1:H$T.push(H$X.getInt32());break;case 2:H$T.push(H$X.getFloat32());break;case 3:H$T.push(H$P._strings[H$X.getUint16()]);break;default:throw new Error("unknown type.")}}H$i.addEvent(H$k)}var H$Q=H$i._nodeToCachePropertyMap=new Int32Array(H$Z),H$W=H$i._cachePropertyMap=new Int32Array(H$B),H$q=H$i._unCachePropertyMap=new Int32Array(H$$);for(H$B=H$$=0,H$K=0;H$K<H$Z;H$K++)(H$f=H$y[H$K])._cacheProperty?(H$Q[H$K]=H$B,H$W[H$B++]=H$K):H$q[H$$++]=H$K},H$P._animationClip=null,H$P._reader=null,H$P._strings=[],H$Z(H$P,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var H$b=function(){function H$f(){this.time=NaN,this.eventName=null,this.params=null}return H$l(H$f,"laya.d3.animation.AnimationEvent"),H$f}(),H$J=function(){function H$X(){this._childs=[],this.transform=new H$xK(this)}H$l(H$X,"laya.d3.animation.AnimationNode");var H$f=H$X.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.addChild=function(H$f){H$f._parent=this,H$f.transform.setParent(this.transform),this._childs.push(H$f)},H$f.removeChild=function(H$f){var H$K=this._childs.indexOf(H$f);-1!==H$K&&this._childs.splice(H$K,1)},H$f.getChildByName=function(H$f){for(var H$K=0,H$Y=this._childs.length;H$K<H$Y;H$K++){var H$X=this._childs[H$K];if(H$X.name===H$f)return H$X}return null},H$f.getChildByIndex=function(H$f){return this._childs[H$f]},H$f.getChildCount=function(){return this._childs.length},H$f.cloneTo=function(H$f){var H$K=H$f;H$K.name=this.name;for(var H$Y=0,H$X=this._childs.length;H$Y<H$X;H$Y++){var H$L=this._childs[H$Y],H$H=H$L.clone();H$K.addChild(H$H);var H$E=H$L.transform,H$d=H$H.transform;H$d.setLocalPosition(H$E.getLocalPosition()),H$d.setLocalRotation(H$E.getLocalRotation()),H$d.setLocalScale(H$E.getLocalScale()),H$d._localRotationEuler=H$E._localRotationEuler,H$d._setWorldMatrixIgnoreUpdate(H$E.getWorldMatrix())}},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$X.__init__=function(){H$X.registerAnimationNodeProperty("localPosition",H$X._getLocalPosition,H$X._setLocalPosition),H$X.registerAnimationNodeProperty("localRotation",H$X._getLocalRotation,H$X._setLocalRotation),H$X.registerAnimationNodeProperty("localScale",H$X._getLocalScale,H$X._setLocalScale),H$X.registerAnimationNodeProperty("localRotationEuler",H$X._getLocalRotationEuler,H$X._setLocalRotationEuler),H$X.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",H$X._getParticleRenderSharedMaterialTintColor,H$X._setParticleRenderSharedMaterialTintColor),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",H$X._getMeshRenderSharedMaterialTilingOffset,H$X._setMeshRenderSharedMaterialTilingOffset),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",H$X._getMeshRenderSharedMaterialAlbedo,H$X._setMeshRenderSharedMaterialAlbedo),H$X.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",H$X._getSkinnedMeshRenderSharedMaterialTilingOffset,H$X._setSkinnedMeshRenderSharedMaterialTilingOffset),H$X.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",H$X._getSkinnedMeshRenderSharedMaterialAlbedo,H$X._setSkinnedMeshRenderSharedMaterialAlbedo),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",H$X._getMeshRenderSharedMaterialAlbedo,H$X._setMeshRenderSharedMaterialAlbedo),H$X.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",H$X._getSkinnedMeshRenderSharedMaterialAlbedo,H$X._setSkinnedMeshRenderSharedMaterialAlbedo),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",H$X._getMeshRenderSharedMaterialIntensity,H$X._setMeshRenderSharedMaterialIntensity),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",H$X._getMeshRenderSharedMaterialAlpha,H$X._setMeshRenderSharedMaterialAlpha),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",H$X._getMeshRenderSharedMaterialAlphaColor,H$X._setMeshRenderSharedMaterialAlphaColor),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",H$X._getMeshRenderSharedMaterialBaseColor,H$X._setMeshRenderSharedMaterialBaseColor),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",H$X._getMeshRenderSharedMaterialDissolve,H$X._setMeshRenderSharedMaterialDissolve),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",H$X._getMeshRenderSharedMaterialDissolveSpeed,H$X._setMeshRenderSharedMaterialDissolveSpeed),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",H$X._getMeshRenderSharedMaterialMMultiplier,H$X._setMeshRenderSharedMaterialMMultiplier),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",H$X._getMeshRenderSharedMaterialBaseScrollSpeedX,H$X._setMeshRenderSharedMaterialBaseScrollSpeedX),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",H$X._getMeshRenderSharedMaterialBaseScrollSpeedY,H$X._setMeshRenderSharedMaterialBaseScrollSpeedY),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",H$X._getMeshRenderSharedMaterialSecondScrollSpeedX,H$X._setMeshRenderSharedMaterialSecondScrollSpeedX),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",H$X._getMeshRenderSharedMaterialSecondScrollSpeedY,H$X._setMeshRenderSharedMaterialSecondScrollSpeedY),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",H$X._getMeshRenderSharedMaterialDetailTilingOffset,H$X._setMeshRenderSharedMaterialDetailTilingOffset),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",H$X._getMeshRenderSharedMaterialDissolveTilingOffset,H$X._setMeshRenderSharedMaterialDissolveTilingOffset),H$X.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",H$X._getMeshRenderSharedMaterialMaskTilingOffset,H$X._setMeshRenderSharedMaterialMaskTilingOffset)},H$X.registerAnimationNodeProperty=function(H$f,H$K,H$Y){if(H$X._propertyIndexDic[H$f])throw new Error("AnimationNode: this propertyName has registered.");H$X._propertyIndexDic[H$f]=H$X._propertyIDCounter,H$X._propertyGetFuncs[H$X._propertyIDCounter]=H$K,H$X._propertySetFuncs[H$X._propertyIDCounter]=H$Y,H$X._propertyIDCounter++},H$X._getLocalPosition=function(H$f,H$K){return H$f?H$f.transform.getLocalPosition():H$K._transform.localPosition.elements},H$X._setLocalPosition=function(H$f,H$K,H$Y){if(H$f)H$f.transform.setLocalPosition(H$Y);else{var H$X=H$K._transform,H$L=H$X.localPosition;H$L.elements=H$Y,H$X.localPosition=H$L}},H$X._getLocalRotation=function(H$f,H$K){return H$f?H$f.transform.getLocalRotation():H$K._transform.localRotation.elements},H$X._setLocalRotation=function(H$f,H$K,H$Y){if(H$f)H$f.transform.setLocalRotation(H$Y);else{var H$X=H$K._transform,H$L=H$X.localRotation;H$L.elements=H$Y,H$X.localRotation=H$L}},H$X._getLocalScale=function(H$f,H$K){return H$f?H$f.transform.getLocalScale():H$K._transform.localScale.elements},H$X._setLocalScale=function(H$f,H$K,H$Y){if(H$f)H$f.transform.setLocalScale(H$Y);else{var H$X=H$K._transform,H$L=H$X.localScale;H$L.elements=H$Y,H$X.localScale=H$L}},H$X._getLocalRotationEuler=function(H$f,H$K){return H$f?H$f.transform.getLocalRotationEuler():H$K._transform.localRotationEuler.elements},H$X._setLocalRotationEuler=function(H$f,H$K,H$Y){if(H$f)H$f.transform.setLocalRotationEuler(H$Y);else{var H$X=H$K._transform,H$L=H$X.localRotationEuler;H$L.elements=H$Y,H$X.localRotationEuler=H$L}},H$X._getMeshRenderSharedMaterialTilingOffset=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return H$K.meshRender.sharedMaterial.tilingOffset.elements},H$X._setMeshRenderSharedMaterialTilingOffset=function(H$f,H$K,H$Y){var H$X,H$L;if(H$f){var H$H=H$f.transform._entity;H$H&&((H$L=(H$X=H$H.owner.meshRender.material).tilingOffset).elements=H$Y,H$X.tilingOffset=H$L)}else(H$L=(H$X=H$K.meshRender.material).tilingOffset).elements=H$Y,H$X.tilingOffset=H$L},H$X._getMeshRenderSharedMaterialAlbedo=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.albedoColor.elements:null}return H$K.meshRender.sharedMaterial.albedoColor.elements},H$X._setMeshRenderSharedMaterialAlbedo=function(H$f,H$K,H$Y){var H$X,H$L;if(H$f){var H$H=H$f.transform._entity;H$H&&((H$L=(H$X=H$H.owner.meshRender.material).albedoColor).elements=H$Y,H$X.albedoColor=H$L)}else(H$L=(H$X=H$K.meshRender.material).albedoColor).elements=H$Y,H$X.albedoColor=H$L},H$X._getSkinnedMeshRenderSharedMaterialTilingOffset=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return H$K.skinnedMeshRender.sharedMaterial.tilingOffset.elements},H$X._setSkinnedMeshRenderSharedMaterialTilingOffset=function(H$f,H$K,H$Y){var H$X,H$L;if(H$f){var H$H=H$f.transform._entity;H$H&&((H$L=(H$X=H$H.owner.skinnedMeshRender.material).tilingOffset).elements=H$Y,H$X.tilingOffset=H$L)}else(H$L=(H$X=H$K.skinnedMeshRender.material).tilingOffset).elements=H$Y,H$X.tilingOffset=H$L},H$X._getSkinnedMeshRenderSharedMaterialAlbedo=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return H$K.skinnedMeshRender.sharedMaterial.albedoColor.elements},H$X._setSkinnedMeshRenderSharedMaterialAlbedo=function(H$f,H$K,H$Y){var H$X,H$L;if(H$f){var H$H=H$f.transform._entity;H$H&&((H$L=(H$X=H$H.owner.skinnedMeshRender.material).albedoColor).elements=H$Y,H$X.albedoColor=H$L)}else(H$L=(H$X=H$K.skinnedMeshRender.material).albedoColor).elements=H$Y,H$X.albedoColor=H$L},H$X._getParticleRenderSharedMaterialTintColor=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.particleRender.sharedMaterial.tintColor.elements:null}return H$K.particleRender.sharedMaterial.tintColor.elements},H$X._setParticleRenderSharedMaterialTintColor=function(H$f,H$K,H$Y){var H$X,H$L;if(H$f){var H$H=H$f.transform._entity;H$H&&((H$L=(H$X=H$H.owner.particleRender.material).tintColor).elements=H$Y,H$X.tintColor=H$L)}else(H$L=(H$X=H$K.particleRender.material).tintColor).elements=H$Y,H$X.tintColor=H$L},H$X._getMeshRenderSharedMaterialAlphaColor=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.alphaColor.elements:null}return H$K.meshRender.sharedMaterial.alphaColor.elements},H$X._setMeshRenderSharedMaterialAlphaColor=function(H$f,H$K,H$Y){var H$X,H$L;if(H$f){var H$H=H$f.transform._entity;H$H&&((H$L=(H$X=H$H.owner.meshRender.material).alphaColor).elements=H$Y,H$X.alphaColor=H$L)}else(H$L=(H$X=H$K.meshRender.material).alphaColor).elements=H$Y,H$X.alphaColor=H$L},H$X._getMeshRenderSharedMaterialBaseColor=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.baseColor.elements:null}return H$K.meshRender.sharedMaterial.baseColor.elements},H$X._setMeshRenderSharedMaterialBaseColor=function(H$f,H$K,H$Y){var H$X,H$L;if(H$f){var H$H=H$f.transform._entity;H$H&&((H$L=(H$X=H$H.owner.meshRender.material).baseColor).elements=H$Y,H$X.baseColor=H$L)}else(H$L=(H$X=H$K.meshRender.material).baseColor).elements=H$Y,H$X.baseColor=H$L},H$X._getMeshRenderSharedMaterialDissolve=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.dissolve:0}return H$K.meshRender.sharedMaterial.dissolve},H$X._setMeshRenderSharedMaterialDissolve=function(H$f,H$K,H$Y){if(H$f){var H$X=H$f.transform._entity;H$X&&(H$X.owner.meshRender.material.dissolve=H$Y[0])}else H$K.meshRender.material.dissolve=H$Y[0]},H$X._getMeshRenderSharedMaterialDissolveSpeed=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.dissolveSpeed:0}return H$K.meshRender.sharedMaterial.dissolveSpeed},H$X._setMeshRenderSharedMaterialDissolveSpeed=function(H$f,H$K,H$Y){if(H$f){var H$X=H$f.transform._entity;H$X&&(H$X.owner.meshRender.material.dissolveSpeed=H$Y[0])}else H$K.meshRender.material.dissolveSpeed=H$Y[0]},H$X._getMeshRenderSharedMaterialMMultiplier=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.mMultiplier:0}return H$K.meshRender.sharedMaterial.mMultiplier},H$X._setMeshRenderSharedMaterialMMultiplier=function(H$f,H$K,H$Y){if(H$f){var H$X=H$f.transform._entity;H$X&&(H$X.owner.meshRender.material.mMultiplier=H$Y[0])}else H$K.meshRender.material.mMultiplier=H$Y[0]},H$X._getMeshRenderSharedMaterialBaseScrollSpeedX=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return H$K.meshRender.sharedMaterial.baseScrollSpeedX},H$X._setMeshRenderSharedMaterialBaseScrollSpeedX=function(H$f,H$K,H$Y){if(H$f){var H$X=H$f.transform._entity;H$X&&(H$X.owner.meshRender.material.baseScrollSpeedX=H$Y[0])}else H$K.meshRender.material.baseScrollSpeedX=H$Y[0]},H$X._getMeshRenderSharedMaterialBaseScrollSpeedY=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return H$K.meshRender.sharedMaterial.baseScrollSpeedY},H$X._setMeshRenderSharedMaterialBaseScrollSpeedY=function(H$f,H$K,H$Y){if(H$f){var H$X=H$f.transform._entity;H$X&&(H$X.owner.meshRender.material.baseScrollSpeedY=H$Y[0])}else H$K.meshRender.material.baseScrollSpeedY=H$Y[0]},H$X._getMeshRenderSharedMaterialSecondScrollSpeedX=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return H$K.meshRender.sharedMaterial.secondScrollSpeedX},H$X._setMeshRenderSharedMaterialSecondScrollSpeedX=function(H$f,H$K,H$Y){if(H$f){var H$X=H$f.transform._entity;H$X&&(H$X.owner.meshRender.material.secondScrollSpeedX=H$Y[0])}else H$K.meshRender.material.secondScrollSpeedX=H$Y[0]},H$X._getMeshRenderSharedMaterialSecondScrollSpeedY=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return H$K.meshRender.sharedMaterial.secondScrollSpeedY},H$X._setMeshRenderSharedMaterialSecondScrollSpeedY=function(H$f,H$K,H$Y){if(H$f){var H$X=H$f.transform._entity;H$X&&(H$X.owner.meshRender.material.secondScrollSpeedY=H$Y[0])}else H$K.meshRender.material.secondScrollSpeedY=H$Y[0]},H$X._getMeshRenderSharedMaterialAlpha=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.alpha:0}return H$K.meshRender.sharedMaterial.alpha},H$X._setMeshRenderSharedMaterialAlpha=function(H$f,H$K,H$Y){if(H$f){var H$X=H$f.transform._entity;H$X&&(H$X.owner.meshRender.material.alpha=H$Y[0])}else H$K.meshRender.material.alpha=H$Y[0]},H$X._getMeshRenderSharedMaterialIntensity=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.intensity:0}return H$K.meshRender.sharedMaterial.intensity},H$X._setMeshRenderSharedMaterialIntensity=function(H$f,H$K,H$Y){if(H$f){var H$X=H$f.transform._entity;H$X&&(H$X.owner.meshRender.material.intensity=H$Y[0])}else H$K.meshRender.material.intensity=H$Y[0]},H$X._getMeshRenderSharedMaterialDetailTilingOffset=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return H$K.meshRender.sharedMaterial.detailTilingOffset.elements},H$X._setMeshRenderSharedMaterialDetailTilingOffset=function(H$f,H$K,H$Y){var H$X,H$L;if(H$f){var H$H=H$f.transform._entity;H$H&&((H$L=(H$X=H$H.owner.meshRender.material).detailTilingOffset).elements=H$Y,H$X.detailTilingOffset=H$L)}else(H$L=(H$X=H$K.meshRender.material).detailTilingOffset).elements=H$Y,H$X.detailTilingOffset=H$L},H$X._getMeshRenderSharedMaterialDissolveTilingOffset=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return H$K.meshRender.sharedMaterial.dissolveTilingOffset.elements},H$X._setMeshRenderSharedMaterialDissolveTilingOffset=function(H$f,H$K,H$Y){var H$X,H$L;if(H$f){var H$H=H$f.transform._entity;H$H&&((H$L=(H$X=H$H.owner.meshRender.material).dissolveTilingOffset).elements=H$Y,H$X.dissolveTilingOffset=H$L)}else(H$L=(H$X=H$K.meshRender.material).dissolveTilingOffset).elements=H$Y,H$X.dissolveTilingOffset=H$L},H$X._getMeshRenderSharedMaterialMaskTilingOffset=function(H$f,H$K){if(H$f){var H$Y=H$f.transform._entity;return H$Y?H$Y.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return H$K.meshRender.sharedMaterial.maskTilingOffset.elements},H$X._setMeshRenderSharedMaterialMaskTilingOffset=function(H$f,H$K,H$Y){var H$X,H$L;if(H$f){var H$H=H$f.transform._entity;H$H&&((H$L=(H$X=H$H.owner.meshRender.material).maskTilingOffset).elements=H$Y,H$X.maskTilingOffset=H$L)}else(H$L=(H$X=H$K.meshRender.material).maskTilingOffset).elements=H$Y,H$X.maskTilingOffset=H$L},H$X._propertyIDCounter=0,H$X._propertyIndexDic={},H$X._propertySetFuncs=[],H$X._propertyGetFuncs=[],H$X}(),H$M=function(){function H$f(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return H$l(H$f,"laya.d3.animation.Keyframe"),H$f}(),H$w=function(){function H$f(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return H$l(H$f,"laya.d3.animation.KeyframeNode"),H$f}(),H$T=(function(){function H$f(){this._tempVector30=new H$EK,this._tempVector31=new H$EK,this._tempVector32=new H$EK,this._a=new H$EK,this._b=new H$EK,this._c=new H$EK,this._d=new H$EK}H$l(H$f,"laya.d3.core.glitter.SplineCurvePositionVelocity");var H$K=H$f.prototype;H$K.Init=function(H$f,H$K,H$Y,H$X){H$f.cloneTo(this._d),H$K.cloneTo(this._c),H$EK.scale(H$f,2,this._a),H$EK.scale(H$Y,2,this._tempVector30),H$EK.subtract(this._a,this._tempVector30,this._a),H$EK.add(this._a,H$K,this._a),H$EK.add(this._a,H$X,this._a),H$EK.scale(H$Y,3,this._b),H$EK.scale(H$f,3,this._tempVector30),H$EK.subtract(this._b,this._tempVector30,this._b),H$EK.subtract(this._b,H$X,this._b),H$EK.scale(H$K,2,this._tempVector30),H$EK.subtract(this._b,this._tempVector30,this._b)},H$K.Slerp=function(H$f,H$K){H$EK.scale(this._a,H$f*H$f*H$f,this._tempVector30),H$EK.scale(this._b,H$f*H$f,this._tempVector31),H$EK.scale(this._c,H$f,this._tempVector32),H$EK.add(this._tempVector30,this._tempVector31,H$K),H$EK.add(H$K,this._tempVector32,H$K),H$EK.add(H$K,this._d,H$K)}}(),function(){function H$W(H$f,H$K,H$Y,H$X){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=H$f,this._h=H$K,this._minHeight=H$Y,this._maxHeight=H$X}H$l(H$W,"laya.d3.core.HeightMap");var H$f=H$W.prototype;H$f._inBounds=function(H$f,H$K){return 0<=H$f&&H$f<this._h&&0<=H$K&&H$K<this._w},H$f.getHeight=function(H$f,H$K){return this._inBounds(H$f,H$K)?this._datas[H$f][H$K]:NaN},H$B(0,H$f,"width",function(){return this._w}),H$B(0,H$f,"height",function(){return this._h}),H$B(0,H$f,"maxHeight",function(){return this._maxHeight}),H$B(0,H$f,"minHeight",function(){return this._minHeight}),H$W.creatFromMesh=function(H$f,H$K,H$Y,H$X){for(var H$L=[],H$H=[],H$E=H$f.getSubMeshCount(),H$d=0;H$d<H$E;H$d++){for(var H$O=H$f.getSubMesh(H$d),H$i=H$O._getVertexBuffer(),H$U=H$i.getData(),H$Z=[],H$y=0;H$y<H$U.length;H$y+=H$i.vertexDeclaration.vertexStride/4){var H$l=new H$EK(H$U[H$y+0],H$U[H$y+1],H$U[H$y+2]);H$Z.push(H$l)}H$L.push(H$Z);var H$B=H$O._getIndexBuffer();H$H.push(H$B.getData())}var H$$=H$f.boundingBox,H$h=H$$.min.x,H$A=H$$.min.z,H$x=H$$.max.x,H$S=H$$.max.z,H$z=H$$.min.y,H$C=H$$.max.y,H$s=H$x-H$h,H$a=H$S-H$A,H$I=H$X.elements[0]=H$s/(H$K-1),H$n=H$X.elements[1]=H$a/(H$Y-1),H$_=new H$W(H$K,H$Y,H$z,H$C),H$G=H$W._tempRay,H$m=H$G.direction.elements;H$m[0]=0,H$m[1]=-1,H$m[2]=0;var H$R=H$C+.1;H$G.origin.elements[1]=H$R;for(var H$V=0;H$V<H$Y;H$V++){var H$t=H$A+H$V*H$n;H$_._datas[H$V]=[];for(var H$T=0;H$T<H$K;H$T++){var H$k=H$h+H$T*H$I,H$e=H$G.origin.elements;H$e[0]=H$k,H$e[2]=H$t;var H$Q=H$W._getPosition(H$G,H$L,H$H);H$_._datas[H$V][H$T]=H$Q===Number.MAX_VALUE?NaN:H$R-H$Q}}return H$_},H$W.createFromImage=function(H$f,H$K,H$Y){for(var H$X=H$f.width,H$L=H$f.height,H$H=new H$W(H$X,H$L,H$K,H$Y),H$E=(H$Y-H$K)/254,H$d=H$f.getPixels(),H$O=0,H$i=0;H$i<H$L;H$i++)for(var H$U=H$H._datas[H$i]=[],H$Z=0;H$Z<H$X;H$Z++){var H$y=H$d[H$O++],H$l=H$d[H$O++],H$B=H$d[H$O++],H$$=H$d[H$O++];H$U[H$Z]=255==H$y&&255==H$l&&255==H$B&&255==H$$?NaN:(H$y+H$l+H$B)/3*H$E+H$K}return H$H},H$W._getPosition=function(H$f,H$K,H$Y){for(var H$X=Number.MAX_VALUE,H$L=0;H$L<H$K.length;H$L++)for(var H$H=H$K[H$L],H$E=H$Y[H$L],H$d=0;H$d<H$E.length;H$d+=3){var H$O=H$H[H$E[H$d+0]],H$i=H$H[H$E[H$d+1]],H$U=H$H[H$E[H$d+2]],H$Z=H$BK.rayIntersectsTriangle(H$f,H$O,H$i,H$U);!isNaN(H$Z)&&H$Z<H$X&&(H$X=H$Z)}return H$X},H$Z(H$W,["_tempRay",function(){return this._tempRay=new H$LK(new H$EK,new H$EK)}])}(),function(){function H$L(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}H$l(H$L,"laya.d3.core.Layer");var H$f=H$L.prototype;return H$f._binarySearchIndex=function(){for(var H$f=0,H$K=H$L._collsionTestList.length-1,H$Y=0;H$f<=H$K;){H$Y=Math.floor((H$f+H$K)/2);var H$X=H$L._collsionTestList[H$Y];if(H$X==this._number)return H$Y;H$X>this._number?H$K=H$Y-1:H$f=H$Y+1}return H$f},H$f._addCollider=function(H$f){0===this._colliders.length&&H$L._collsionTestList.splice(this._binarySearchIndex(),0,this._number),H$f._isRigidbody?(this._colliders.unshift(H$f),this._nonRigidbodyOffset++):this._colliders.push(H$f)},H$f._removeCollider=function(H$f){var H$K=this._colliders.indexOf(H$f);H$K<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(H$K,1),0===this._colliders.length&&H$L._collsionTestList.splice(H$L._collsionTestList.indexOf(this._number),1)},H$B(0,H$f,"number",function(){return this._number}),H$B(0,H$f,"visible",function(){return this._visible},function(H$f){this._visible=H$f,H$L._visibleLayers=H$f?H$L._visibleLayers|this.mask:H$L._visibleLayers&~this.mask}),H$B(0,H$f,"mask",function(){return this._mask}),H$B(1,H$L,"visibleLayers",function(){return H$L._visibleLayers},function(H$f){H$L._visibleLayers=H$f;for(var H$K=0,H$Y=H$L._layerList.length;H$K<H$Y;H$K++){var H$X=H$L._layerList[H$K];H$X._visible=0!=(H$X._mask&H$L._visibleLayers)}}),H$L.__init__=function(){H$L._layerList.length=31;for(var H$f=0;H$f<31;H$f++){var H$K=new H$L;H$L._layerList[H$f]=H$K,0===H$f?(H$K.name="Default Layer",H$K.visible=!0):(H$K.name="Layer-"+H$f,H$K.visible=!1),H$K._number=H$f,H$K._mask=Math.pow(2,H$f)}H$L.currentCreationLayer=H$L._layerList[0]},H$L.getLayerByNumber=function(H$f){if(H$f<0||30<H$f)throw new Error("无法返回指定Layer，该number超出范围！");return H$L._layerList[H$f]},H$L.getLayerByName=function(H$f){for(var H$K=0;H$K<31;H$K++)if(H$L._layerList[H$K].name===H$f)return H$L._layerList[H$K];throw new Error("无法返回指定Layer,该name不存在")},H$L.isVisible=function(H$f){return 0!=(H$f&H$L._currentCameraCullingMask&H$L._visibleLayers)},H$L._layerList=[],H$L._visibleLayers=2147483647,H$L._collsionTestList=[],H$L._currentCameraCullingMask=2147483647,H$L.maxCount=31,H$L.currentCreationLayer=null,H$L}()),H$k=(function(){function H$f(H$f,H$K,H$Y){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=H$f,this._minCount=H$K,this._maxCount=H$Y}H$l(H$f,"laya.d3.core.particleShuriKen.module.Burst");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.cloneTo=function(H$f){var H$K=H$f;H$K._time=this._time,H$K._minCount=this._minCount,H$K._maxCount=this._maxCount},H$K.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$K,"time",function(){return this._time}),H$B(0,H$K,"minCount",function(){return this._minCount}),H$B(0,H$K,"maxCount",function(){return this._maxCount})}(),function(){function H$f(H$f){this._color=null,this.enbale=!1,this._color=H$f}H$l(H$f,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var H$K=H$f.prototype;H$K.cloneTo=function(H$f){var H$K=H$f;this._color.cloneTo(H$K._color),H$K.enbale=this.enbale},H$K.clone=function(){var H$f;switch(this._color.type){case 0:H$f=H$Q.createByConstant(this._color.constant.clone());break;case 1:H$f=H$Q.createByGradient(this._color.gradient.clone());break;case 2:H$f=H$Q.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:H$f=H$Q.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var H$K=new this.constructor(H$f);return H$K.enbale=this.enbale,H$K},H$B(0,H$K,"color",function(){return this._color})}(),function(){function H$f(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}H$l(H$f,"laya.d3.core.particleShuriKen.module.Emission");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),H$K._destroy=function(){this._bursts=null,this._destroyed=!0},H$K.getBurstsCount=function(){return this._bursts.length},H$K.getBurstByIndex=function(H$f){return this._bursts[H$f]},H$K.addBurst=function(H$f){var H$K=this._bursts.length;if(0<H$K)for(var H$Y=0;H$Y<H$K;H$Y++)this._bursts[H$Y].time>H$f.time&&this._bursts.splice(H$Y,0,H$f);this._bursts.push(H$f)},H$K.removeBurst=function(H$f){var H$K=this._bursts.indexOf(H$f);-1!==H$K&&this._bursts.splice(H$K,1)},H$K.removeBurstByIndex=function(H$f){this._bursts.splice(H$f,1)},H$K.clearBurst=function(){this._bursts.length=0},H$K.cloneTo=function(H$f){var H$K=H$f,H$Y=H$K._bursts;H$Y.length=this._bursts.length;for(var H$X=0,H$L=this._bursts.length;H$X<H$L;H$X++){var H$H=H$Y[H$X];H$H?this._bursts[H$X].cloneTo(H$H):H$Y[H$X]=this._bursts[H$X].clone()}H$K._emissionRate=this._emissionRate,H$K.enbale=this.enbale},H$K.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$K,"destroyed",function(){return this._destroyed}),H$B(0,H$K,"emissionRate",function(){return this._emissionRate},function(H$f){if(H$f<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=H$f})}(),function(){function H$X(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}H$l(H$X,"laya.d3.core.particleShuriKen.module.FrameOverTime");var H$f=H$X.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.cloneTo=function(H$f){var H$K=H$f;H$K._type=this._type,H$K._constant=this._constant,this._overTime.cloneTo(H$K._overTime),H$K._constantMin=this._constantMin,H$K._constantMax=this._constantMax,this._overTimeMin.cloneTo(H$K._overTimeMin),this._overTimeMax.cloneTo(H$K._overTimeMax)},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$f,"frameOverTimeData",function(){return this._overTime}),H$B(0,H$f,"constant",function(){return this._constant}),H$B(0,H$f,"type",function(){return this._type}),H$B(0,H$f,"frameOverTimeDataMin",function(){return this._overTimeMin}),H$B(0,H$f,"constantMin",function(){return this._constantMin}),H$B(0,H$f,"frameOverTimeDataMax",function(){return this._overTimeMax}),H$B(0,H$f,"constantMax",function(){return this._constantMax}),H$X.createByConstant=function(H$f){var H$K=new H$X;return H$K._type=0,H$K._constant=H$f,H$K},H$X.createByOverTime=function(H$f){var H$K=new H$X;return H$K._type=1,H$K._overTime=H$f,H$K},H$X.createByRandomTwoConstant=function(H$f,H$K){var H$Y=new H$X;return H$Y._type=2,H$Y._constantMin=H$f,H$Y._constantMax=H$K,H$Y},H$X.createByRandomTwoOverTime=function(H$f,H$K){var H$Y=new H$X;return H$Y._type=3,H$Y._overTimeMin=H$f,H$Y._overTimeMax=H$K,H$Y},H$X}()),H$e=function(){function H$i(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}H$l(H$i,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var H$f=H$i.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.cloneTo=function(H$f){var H$K=H$f;H$K._type=this._type,H$K._separateAxes=this._separateAxes,H$K._constant=this._constant,this._constantSeparate.cloneTo(H$K._constantSeparate),this._gradient.cloneTo(H$K._gradient),this._gradientX.cloneTo(H$K._gradientX),this._gradientY.cloneTo(H$K._gradientY),this._gradientZ.cloneTo(H$K._gradientZ),H$K._constantMin=this._constantMin,H$K._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(H$K._constantMinSeparate),this._constantMaxSeparate.cloneTo(H$K._constantMaxSeparate),this._gradientMin.cloneTo(H$K._gradientMin),this._gradientMax.cloneTo(H$K._gradientMax),this._gradientXMin.cloneTo(H$K._gradientXMin),this._gradientXMax.cloneTo(H$K._gradientXMax),this._gradientYMin.cloneTo(H$K._gradientYMin),this._gradientYMax.cloneTo(H$K._gradientYMax),this._gradientZMin.cloneTo(H$K._gradientZMin),this._gradientZMax.cloneTo(H$K._gradientZMax)},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$f,"gradientZ",function(){return this._gradientZ}),H$B(0,H$f,"constant",function(){return this._constant}),H$B(0,H$f,"gradient",function(){return this._gradient}),H$B(0,H$f,"separateAxes",function(){return this._separateAxes}),H$B(0,H$f,"type",function(){return this._type}),H$B(0,H$f,"constantSeparate",function(){return this._constantSeparate}),H$B(0,H$f,"gradientX",function(){return this._gradientX}),H$B(0,H$f,"gradientY",function(){return this._gradientY}),H$B(0,H$f,"gradientW",function(){return this._gradientW}),H$B(0,H$f,"gradientMin",function(){return this._gradientMin}),H$B(0,H$f,"constantMin",function(){return this._constantMin}),H$B(0,H$f,"gradientMax",function(){return this._gradientMax}),H$B(0,H$f,"constantMax",function(){return this._constantMax}),H$B(0,H$f,"gradientWMin",function(){return this._gradientWMin}),H$B(0,H$f,"constantMinSeparate",function(){return this._constantMinSeparate}),H$B(0,H$f,"constantMaxSeparate",function(){return this._constantMaxSeparate}),H$B(0,H$f,"gradientXMin",function(){return this._gradientXMin}),H$B(0,H$f,"gradientXMax",function(){return this._gradientXMax}),H$B(0,H$f,"gradientWMax",function(){return this._gradientWMax}),H$B(0,H$f,"gradientYMin",function(){return this._gradientYMin}),H$B(0,H$f,"gradientYMax",function(){return this._gradientYMax}),H$B(0,H$f,"gradientZMin",function(){return this._gradientZMin}),H$B(0,H$f,"gradientZMax",function(){return this._gradientZMax}),H$i.createByConstant=function(H$f){var H$K=new H$i;return H$K._type=0,H$K._separateAxes=!1,H$K._constant=H$f,H$K},H$i.createByConstantSeparate=function(H$f){var H$K=new H$i;return H$K._type=0,H$K._separateAxes=!0,H$K._constantSeparate=H$f,H$K},H$i.createByGradient=function(H$f){var H$K=new H$i;return H$K._type=1,H$K._separateAxes=!1,H$K._gradient=H$f,H$K},H$i.createByGradientSeparate=function(H$f,H$K,H$Y,H$X){var H$L=new H$i;return H$L._type=1,H$L._separateAxes=!0,H$L._gradientX=H$f,H$L._gradientY=H$K,H$L._gradientZ=H$Y,H$L._gradientW=H$X,H$L},H$i.createByRandomTwoConstant=function(H$f,H$K){var H$Y=new H$i;return H$Y._type=2,H$Y._separateAxes=!1,H$Y._constantMin=H$f,H$Y._constantMax=H$K,H$Y},H$i.createByRandomTwoConstantSeparate=function(H$f,H$K){var H$Y=new H$i;return H$Y._type=2,H$Y._separateAxes=!0,H$Y._constantMinSeparate=H$f,H$Y._constantMaxSeparate=H$K,H$Y},H$i.createByRandomTwoGradient=function(H$f,H$K){var H$Y=new H$i;return H$Y._type=3,H$Y._separateAxes=!1,H$Y._gradientMin=H$f,H$Y._gradientMax=H$K,H$Y},H$i.createByRandomTwoGradientSeparate=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){var H$O=new H$i;return H$O._type=3,H$O._separateAxes=!0,H$O._gradientXMin=H$f,H$O._gradientXMax=H$K,H$O._gradientYMin=H$Y,H$O._gradientYMax=H$X,H$O._gradientZMin=H$L,H$O._gradientZMax=H$H,H$O._gradientWMin=H$E,H$O._gradientWMax=H$d,H$O},H$i}(),H$Q=function(){function H$X(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}H$l(H$X,"laya.d3.core.particleShuriKen.module.GradientColor");var H$f=H$X.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.cloneTo=function(H$f){var H$K=H$f;H$K._type=this._type,this._constant.cloneTo(H$K._constant),this._constantMin.cloneTo(H$K._constantMin),this._constantMax.cloneTo(H$K._constantMax),this._gradient.cloneTo(H$K._gradient),this._gradientMin.cloneTo(H$K._gradientMin),this._gradientMax.cloneTo(H$K._gradientMax)},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$f,"gradient",function(){return this._gradient}),H$B(0,H$f,"constant",function(){return this._constant}),H$B(0,H$f,"type",function(){return this._type}),H$B(0,H$f,"gradientMin",function(){return this._gradientMin}),H$B(0,H$f,"constantMin",function(){return this._constantMin}),H$B(0,H$f,"gradientMax",function(){return this._gradientMax}),H$B(0,H$f,"constantMax",function(){return this._constantMax}),H$X.createByConstant=function(H$f){var H$K=new H$X;return H$K._type=0,H$K._constant=H$f,H$K},H$X.createByGradient=function(H$f){var H$K=new H$X;return H$K._type=1,H$K._gradient=H$f,H$K},H$X.createByRandomTwoConstant=function(H$f,H$K){var H$Y=new H$X;return H$Y._type=2,H$Y._constantMin=H$f,H$Y._constantMax=H$K,H$Y},H$X.createByRandomTwoGradient=function(H$f,H$K){var H$Y=new H$X;return H$Y._type=3,H$Y._gradientMin=H$f,H$Y._gradientMax=H$K,H$Y},H$X}(),H$W=(function(){function H$f(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}H$l(H$f,"laya.d3.core.particleShuriKen.module.GradientDataColor");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.addAlpha=function(H$f,H$K){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==H$f&&(H$f=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=H$f,this._alphaElements[this._alphaCurrentLength++]=H$K):DEBUG},H$K.addRGB=function(H$f,H$K){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==H$f&&(H$f=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=H$f,this._rgbElements[this._rgbCurrentLength++]=H$K.x,this._rgbElements[this._rgbCurrentLength++]=H$K.y,this._rgbElements[this._rgbCurrentLength++]=H$K.z):DEBUG},H$K.cloneTo=function(H$f){var H$K=H$f,H$Y=0,H$X=0;H$K._alphaCurrentLength=this._alphaCurrentLength;var H$L=H$K._alphaElements;for(H$L.length=this._alphaElements.length,H$Y=0,H$X=this._alphaElements.length;H$Y<H$X;H$Y++)H$L[H$Y]=this._alphaElements[H$Y];H$K._rgbCurrentLength=this._rgbCurrentLength;var H$H=H$K._rgbElements;for(H$H.length=this._rgbElements.length,H$Y=0,H$X=this._rgbElements.length;H$Y<H$X;H$Y++)H$H[H$Y]=this._rgbElements[H$Y]},H$K.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$K,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),H$B(0,H$K,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function H$f(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}H$l(H$f,"laya.d3.core.particleShuriKen.module.GradientDataInt");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.add=function(H$f,H$K){this._currentLength<8?(6===this._currentLength&&1!==H$f&&(H$f=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=H$f,this._elements[this._currentLength++]=H$K):console.log("Warning:data count must lessEqual than 4")},H$K.cloneTo=function(H$f){var H$K=H$f;H$K._currentLength=this._currentLength;var H$Y=H$K._elements;H$Y.length=this._elements.length;for(var H$X=0,H$L=this._elements.length;H$X<H$L;H$X++)H$Y[H$X]=this._elements[H$X]},H$K.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$K,"gradientCount",function(){return this._currentLength/2})}(),function(){function H$f(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}H$l(H$f,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.add=function(H$f,H$K){this._currentLength<8?(6===this._currentLength&&1!==H$f&&(H$f=1,DEBUG),this._elements[this._currentLength++]=H$f,this._elements[this._currentLength++]=H$K):DEBUG},H$K.getKeyByIndex=function(H$f){return this._elements[2*H$f]},H$K.getValueByIndex=function(H$f){return this._elements[2*H$f+1]},H$K.getAverageValue=function(){for(var H$f=0,H$K=this._currentLength-2;H$f<H$K;H$f+=2){this._elements[H$f+1];this._elements[H$f+3],this._elements[H$f+2]-this._elements[H$f]}return 0},H$K.cloneTo=function(H$f){var H$K=H$f;H$K._currentLength=this._currentLength;var H$Y=H$K._elements;H$Y.length=this._elements.length;for(var H$X=0,H$L=this._elements.length;H$X<H$L;H$X++)H$Y[H$X]=this._elements[H$X]},H$K.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$K,"gradientCount",function(){return this._currentLength/2})}(),function(){function H$f(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}H$l(H$f,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.add=function(H$f,H$K){this._currentLength<8?(6===this._currentLength&&1!==H$f&&(H$f=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=H$f,this._elements[this._currentLength++]=H$K.x,this._elements[this._currentLength++]=H$K.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},H$K.cloneTo=function(H$f){var H$K=H$f;H$K._currentLength=this._currentLength;var H$Y=H$K._elements;H$Y.length=this._elements.length;for(var H$X=0,H$L=this._elements.length;H$X<H$L;H$X++)H$Y[H$X]=this._elements[H$X]},H$K.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$K,"gradientCount",function(){return this._currentLength/3})}(),function(){function H$d(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}H$l(H$d,"laya.d3.core.particleShuriKen.module.GradientSize");var H$f=H$d.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.getMaxSizeInGradient=function(){var H$f=0,H$K=0,H$Y=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(H$f=0,H$K=this._gradientX.gradientCount;H$f<H$K;H$f++)H$Y=Math.max(H$Y,this._gradientX.getValueByIndex(H$f));for(H$f=0,H$K=this._gradientY.gradientCount;H$f<H$K;H$f++)H$Y=Math.max(H$Y,this._gradientY.getValueByIndex(H$f))}else for(H$f=0,H$K=this._gradient.gradientCount;H$f<H$K;H$f++)H$Y=Math.max(H$Y,this._gradient.getValueByIndex(H$f));break;case 1:H$Y=this._separateAxes?(H$Y=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),H$Y=Math.max(H$Y,this._constantMinSeparate.y),Math.max(H$Y,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(H$f=0,H$K=this._gradientXMin.gradientCount;H$f<H$K;H$f++)H$Y=Math.max(H$Y,this._gradientXMin.getValueByIndex(H$f));for(H$f=0,H$K=this._gradientXMax.gradientCount;H$f<H$K;H$f++)H$Y=Math.max(H$Y,this._gradientXMax.getValueByIndex(H$f));for(H$f=0,H$K=this._gradientYMin.gradientCount;H$f<H$K;H$f++)H$Y=Math.max(H$Y,this._gradientYMin.getValueByIndex(H$f));for(H$f=0,H$K=this._gradientZMax.gradientCount;H$f<H$K;H$f++)H$Y=Math.max(H$Y,this._gradientZMax.getValueByIndex(H$f))}else{for(H$f=0,H$K=this._gradientMin.gradientCount;H$f<H$K;H$f++)H$Y=Math.max(H$Y,this._gradientMin.getValueByIndex(H$f));for(H$f=0,H$K=this._gradientMax.gradientCount;H$f<H$K;H$f++)H$Y=Math.max(H$Y,this._gradientMax.getValueByIndex(H$f))}}return H$Y},H$f.cloneTo=function(H$f){var H$K=H$f;H$K._type=this._type,H$K._separateAxes=this._separateAxes,this._gradient.cloneTo(H$K._gradient),this._gradientX.cloneTo(H$K._gradientX),this._gradientY.cloneTo(H$K._gradientY),this._gradientZ.cloneTo(H$K._gradientZ),H$K._constantMin=this._constantMin,H$K._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(H$K._constantMinSeparate),this._constantMaxSeparate.cloneTo(H$K._constantMaxSeparate),this._gradientMin.cloneTo(H$K._gradientMin),this._gradientMax.cloneTo(H$K._gradientMax),this._gradientXMin.cloneTo(H$K._gradientXMin),this._gradientXMax.cloneTo(H$K._gradientXMax),this._gradientYMin.cloneTo(H$K._gradientYMin),this._gradientYMax.cloneTo(H$K._gradientYMax),this._gradientZMin.cloneTo(H$K._gradientZMin),this._gradientZMax.cloneTo(H$K._gradientZMax)},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$f,"gradientZ",function(){return this._gradientZ}),H$B(0,H$f,"gradient",function(){return this._gradient}),H$B(0,H$f,"separateAxes",function(){return this._separateAxes}),H$B(0,H$f,"type",function(){return this._type}),H$B(0,H$f,"gradientMin",function(){return this._gradientMin}),H$B(0,H$f,"constantMin",function(){return this._constantMin}),H$B(0,H$f,"gradientX",function(){return this._gradientX}),H$B(0,H$f,"gradientY",function(){return this._gradientY}),H$B(0,H$f,"gradientMax",function(){return this._gradientMax}),H$B(0,H$f,"constantMax",function(){return this._constantMax}),H$B(0,H$f,"constantMinSeparate",function(){return this._constantMinSeparate}),H$B(0,H$f,"constantMaxSeparate",function(){return this._constantMaxSeparate}),H$B(0,H$f,"gradientXMin",function(){return this._gradientXMin}),H$B(0,H$f,"gradientXMax",function(){return this._gradientXMax}),H$B(0,H$f,"gradientYMin",function(){return this._gradientYMin}),H$B(0,H$f,"gradientYMax",function(){return this._gradientYMax}),H$B(0,H$f,"gradientZMin",function(){return this._gradientZMin}),H$B(0,H$f,"gradientZMax",function(){return this._gradientZMax}),H$d.createByGradient=function(H$f){var H$K=new H$d;return H$K._type=0,H$K._separateAxes=!1,H$K._gradient=H$f,H$K},H$d.createByGradientSeparate=function(H$f,H$K,H$Y){var H$X=new H$d;return H$X._type=0,H$X._separateAxes=!0,H$X._gradientX=H$f,H$X._gradientY=H$K,H$X._gradientZ=H$Y,H$X},H$d.createByRandomTwoConstant=function(H$f,H$K){var H$Y=new H$d;return H$Y._type=1,H$Y._separateAxes=!1,H$Y._constantMin=H$f,H$Y._constantMax=H$K,H$Y},H$d.createByRandomTwoConstantSeparate=function(H$f,H$K){var H$Y=new H$d;return H$Y._type=1,H$Y._separateAxes=!0,H$Y._constantMinSeparate=H$f,H$Y._constantMaxSeparate=H$K,H$Y},H$d.createByRandomTwoGradient=function(H$f,H$K){var H$Y=new H$d;return H$Y._type=2,H$Y._separateAxes=!1,H$Y._gradientMin=H$f,H$Y._gradientMax=H$K,H$Y},H$d.createByRandomTwoGradientSeparate=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=new H$d;return H$E._type=2,H$E._separateAxes=!0,H$E._gradientXMin=H$f,H$E._gradientXMax=H$K,H$E._gradientYMin=H$Y,H$E._gradientYMax=H$X,H$E._gradientZMin=H$L,H$E._gradientZMax=H$H,H$E},H$d}()),H$q=function(){function H$d(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}H$l(H$d,"laya.d3.core.particleShuriKen.module.GradientVelocity");var H$f=H$d.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.cloneTo=function(H$f){var H$K=H$f;H$K._type=this._type,this._constant.cloneTo(H$K._constant),this._gradientX.cloneTo(H$K._gradientX),this._gradientY.cloneTo(H$K._gradientY),this._gradientZ.cloneTo(H$K._gradientZ),this._constantMin.cloneTo(H$K._constantMin),this._constantMax.cloneTo(H$K._constantMax),this._gradientXMin.cloneTo(H$K._gradientXMin),this._gradientXMax.cloneTo(H$K._gradientXMax),this._gradientYMin.cloneTo(H$K._gradientYMin),this._gradientYMax.cloneTo(H$K._gradientYMax),this._gradientZMin.cloneTo(H$K._gradientZMin),this._gradientZMax.cloneTo(H$K._gradientZMax)},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$f,"gradientZ",function(){return this._gradientZ}),H$B(0,H$f,"constant",function(){return this._constant}),H$B(0,H$f,"type",function(){return this._type}),H$B(0,H$f,"gradientXMax",function(){return this._gradientXMax}),H$B(0,H$f,"constantMin",function(){return this._constantMin}),H$B(0,H$f,"gradientX",function(){return this._gradientX}),H$B(0,H$f,"gradientY",function(){return this._gradientY}),H$B(0,H$f,"gradientXMin",function(){return this._gradientXMin}),H$B(0,H$f,"constantMax",function(){return this._constantMax}),H$B(0,H$f,"gradientYMin",function(){return this._gradientYMin}),H$B(0,H$f,"gradientYMax",function(){return this._gradientYMax}),H$B(0,H$f,"gradientZMin",function(){return this._gradientZMin}),H$B(0,H$f,"gradientZMax",function(){return this._gradientZMax}),H$d.createByConstant=function(H$f){var H$K=new H$d;return H$K._type=0,H$K._constant=H$f,H$K},H$d.createByGradient=function(H$f,H$K,H$Y){var H$X=new H$d;return H$X._type=1,H$X._gradientX=H$f,H$X._gradientY=H$K,H$X._gradientZ=H$Y,H$X},H$d.createByRandomTwoConstant=function(H$f,H$K){var H$Y=new H$d;return H$Y._type=2,H$Y._constantMin=H$f,H$Y._constantMax=H$K,H$Y},H$d.createByRandomTwoGradient=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=new H$d;return H$E._type=3,H$E._gradientXMin=H$f,H$E._gradientXMax=H$K,H$E._gradientYMin=H$Y,H$E._gradientYMax=H$X,H$E._gradientZMin=H$L,H$E._gradientZMax=H$H,H$E},H$d}(),H$P=(function(){function H$f(H$f){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=H$f}H$l(H$f,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.cloneTo=function(H$f){var H$K=H$f;this._angularVelocity.cloneTo(H$K._angularVelocity),H$K.enbale=this.enbale},H$K.clone=function(){var H$f;switch(this._angularVelocity.type){case 0:H$f=this._angularVelocity.separateAxes?H$e.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):H$e.createByConstant(this._angularVelocity.constant);break;case 1:H$f=this._angularVelocity.separateAxes?H$e.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):H$e.createByGradient(this._angularVelocity.gradient.clone());break;case 2:H$f=this._angularVelocity.separateAxes?H$e.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):H$e.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:H$f=this._angularVelocity.separateAxes?H$e.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):H$e.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var H$K=new this.constructor(H$f);return H$K.enbale=this.enbale,H$K},H$B(0,H$K,"angularVelocity",function(){return this._angularVelocity})}(),function(){function H$f(){this.enable=!1,this.randomDirection=!1}H$l(H$f,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K._getShapeBoundBox=function(H$f){throw new Error("BaseShape: must override it.")},H$K._getSpeedBoundBox=function(H$f){throw new Error("BaseShape: must override it.")},H$K.generatePositionAndDirection=function(H$f,H$K,H$Y,H$X){throw new Error("BaseShape: must override it.")},H$K._calculateProceduralBounds=function(H$f,H$K,H$Y){this._getShapeBoundBox(H$f);var H$X=H$f.min,H$L=H$f.max;H$EK.multiply(H$X,H$K,H$X),H$EK.multiply(H$L,H$K,H$L);var H$H=new H$Df(new H$EK,new H$EK);this.randomDirection?(H$H.min=new H$EK(-1,-1,-1),H$H.max=new H$EK(1,1,1)):this._getSpeedBoundBox(H$H);var H$E=new H$Df(new H$EK,new H$EK),H$d=H$E.min,H$O=H$E.max;H$EK.scale(H$H.min,H$Y.y,H$d),H$EK.scale(H$H.max,H$Y.y,H$O),H$EK.add(H$f.min,H$d,H$d),H$EK.add(H$f.max,H$O,H$O),H$EK.min(H$f.min,H$d,H$f.min),H$EK.max(H$f.max,H$d,H$f.max);var H$i=new H$Df(new H$EK,new H$EK),H$U=H$i.min,H$Z=H$i.max;H$EK.scale(H$H.min,H$Y.x,H$U),H$EK.scale(H$H.max,H$Y.x,H$Z),H$EK.min(H$i.min,H$Z,H$d),H$EK.max(H$i.min,H$Z,H$O),H$EK.min(H$f.min,H$d,H$f.min),H$EK.max(H$f.max,H$d,H$f.max)},H$K.cloneTo=function(H$f){H$f.enable=this.enable},H$K.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$f}()),H$r=function(){function H$H(){}return H$l(H$H,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),H$H._randomPointUnitArcCircle=function(H$f,H$K,H$Y){var H$X=H$K.elements,H$L=NaN;H$L=H$Y?H$Y.getFloat()*H$f:Math.random()*H$f,H$X[0]=Math.cos(H$L),H$X[1]=Math.sin(H$L)},H$H._randomPointInsideUnitArcCircle=function(H$f,H$K,H$Y){var H$X=H$K.elements;H$H._randomPointUnitArcCircle(H$f,H$K,H$Y);var H$L=NaN;H$L=H$Y?Math.pow(H$Y.getFloat(),.5):Math.pow(Math.random(),.5),H$X[0]=H$X[0]*H$L,H$X[1]=H$X[1]*H$L},H$H._randomPointUnitCircle=function(H$f,H$K){var H$Y=H$f.elements,H$X=NaN;H$X=H$K?H$K.getFloat()*Math.PI*2:Math.random()*Math.PI*2,H$Y[0]=Math.cos(H$X),H$Y[1]=Math.sin(H$X)},H$H._randomPointInsideUnitCircle=function(H$f,H$K){var H$Y=H$f.elements;H$H._randomPointUnitCircle(H$f);var H$X=NaN;H$X=H$K?Math.pow(H$K.getFloat(),.5):Math.pow(Math.random(),.5),H$Y[0]=H$Y[0]*H$X,H$Y[1]=H$Y[1]*H$X},H$H._randomPointUnitSphere=function(H$f,H$K){var H$Y=H$f.elements,H$X=NaN,H$L=NaN;H$L=H$K?(H$X=H$Y[2]=2*H$K.getFloat()-1,H$K.getFloat()*Math.PI*2):(H$X=H$Y[2]=2*Math.random()-1,Math.random()*Math.PI*2);var H$H=Math.sqrt(1-H$X*H$X);H$Y[0]=H$H*Math.cos(H$L),H$Y[1]=H$H*Math.sin(H$L)},H$H._randomPointInsideUnitSphere=function(H$f,H$K){var H$Y=H$f.elements;H$H._randomPointUnitSphere(H$f);var H$X=NaN;H$X=H$K?Math.pow(H$K.getFloat(),1/3):Math.pow(Math.random(),1/3),H$Y[0]=H$Y[0]*H$X,H$Y[1]=H$Y[1]*H$X,H$Y[2]=H$Y[2]*H$X},H$H._randomPointInsideHalfUnitBox=function(H$f,H$K){var H$Y=H$f.elements;H$K?(H$Y[0]=H$K.getFloat()-.5,H$Y[1]=H$K.getFloat()-.5,H$Y[2]=H$K.getFloat()-.5):(H$Y[0]=Math.random()-.5,H$Y[1]=Math.random()-.5,H$Y[2]=Math.random()-.5)},H$H}(),H$v=(function(){function H$f(H$f){this._size=null,this.enbale=!1,this._size=H$f}H$l(H$f,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.cloneTo=function(H$f){var H$K=H$f;this._size.cloneTo(H$K._size),H$K.enbale=this.enbale},H$K.clone=function(){var H$f;switch(this._size.type){case 0:H$f=this._size.separateAxes?H$W.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):H$W.createByGradient(this._size.gradient.clone());break;case 1:H$f=this._size.separateAxes?H$W.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):H$W.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:H$f=this._size.separateAxes?H$W.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):H$W.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var H$K=new this.constructor(H$f);return H$K.enbale=this.enbale,H$K},H$B(0,H$K,"size",function(){return this._size})}(),function(){function H$X(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}H$l(H$X,"laya.d3.core.particleShuriKen.module.StartFrame");var H$f=H$X.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.cloneTo=function(H$f){var H$K=H$f;H$K._type=this._type,H$K._constant=this._constant,H$K._constantMin=this._constantMin,H$K._constantMax=this._constantMax},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$f,"constant",function(){return this._constant}),H$B(0,H$f,"type",function(){return this._type}),H$B(0,H$f,"constantMin",function(){return this._constantMin}),H$B(0,H$f,"constantMax",function(){return this._constantMax}),H$X.createByConstant=function(H$f){var H$K=new H$X;return H$K._type=0,H$K._constant=H$f,H$K},H$X.createByRandomTwoConstant=function(H$f,H$K){var H$Y=new H$X;return H$Y._type=1,H$Y._constantMin=H$f,H$Y._constantMax=H$K,H$Y},H$X}()),H$j=(function(){function H$f(H$f,H$K){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new H$HK(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=H$f,this._startFrame=H$K}H$l(H$f,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.cloneTo=function(H$f){var H$K=H$f;this.tiles.cloneTo(H$K.tiles),H$K.type=this.type,H$K.randomRow=this.randomRow,this._frame.cloneTo(H$K._frame),this._startFrame.cloneTo(H$K._startFrame),H$K.cycles=this.cycles,H$K.enableUVChannels=this.enableUVChannels,H$K.enable=this.enable},H$K.clone=function(){var H$f,H$K;switch(this._frame.type){case 0:H$f=H$k.createByConstant(this._frame.constant);break;case 1:H$f=H$k.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:H$f=H$k.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:H$f=H$k.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:H$K=H$v.createByConstant(this._startFrame.constant);break;case 1:H$K=H$v.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var H$Y=new this.constructor(H$f,H$K);return this.tiles.cloneTo(H$Y.tiles),H$Y.type=this.type,H$Y.randomRow=this.randomRow,H$Y.cycles=this.cycles,H$Y.enableUVChannels=this.enableUVChannels,H$Y.enable=this.enable,H$Y},H$B(0,H$K,"frame",function(){return this._frame}),H$B(0,H$K,"startFrame",function(){return this._startFrame})}(),function(){function H$f(H$f){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=H$f}H$l(H$f,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.cloneTo=function(H$f){var H$K=H$f;this._velocity.cloneTo(H$K._velocity),H$K.enbale=this.enbale,H$K.space=this.space},H$K.clone=function(){var H$f;switch(this._velocity.type){case 0:H$f=H$q.createByConstant(this._velocity.constant.clone());break;case 1:H$f=H$q.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:H$f=H$q.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:H$f=H$q.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var H$K=new this.constructor(H$f);return H$K.enbale=this.enbale,H$K.space=this.space,H$K},H$B(0,H$K,"velocity",function(){return this._velocity})}(),function(){function H$f(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new H$yK,this._vb=H$PK.create(H$f._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=H$qK.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=H$QK.nameKey.getID("LINE"),this._shaderCompile=H$IK._preCompileShader[this._sharderNameID]}H$l(H$f,"laya.d3.core.PhasorSpriter3D");var H$K=H$f.prototype;return H$K.line=function(H$f,H$K,H$Y,H$X){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$f.x,H$f.y,H$f.z,H$K.x,H$K.y,H$K.z,H$K.w),this.addVertex(H$Y.x,H$Y.y,H$Y.z,H$X.x,H$X.y,H$X.z,H$X.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},H$K.circle=function(H$f,H$K,H$Y,H$X,H$L,H$H){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*H$K,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/H$K,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*H$f,Math.cos(this._tempNumver0)*H$f,0,H$Y,H$X,H$L,H$H),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},H$K.plane=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=H$X/2,this._tempNumver1=H$L/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$f-this._tempNumver0,H$K+this._tempNumver1,H$Y,H$H,H$E,H$d,H$O),this.addVertex(H$f+this._tempNumver0,H$K+this._tempNumver1,H$Y,H$H,H$E,H$d,H$O),this.addVertex(H$f-this._tempNumver0,H$K-this._tempNumver1,H$Y,H$H,H$E,H$d,H$O),this.addVertex(H$f+this._tempNumver0,H$K-this._tempNumver1,H$Y,H$H,H$E,H$d,H$O),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},H$K.box=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=H$X/2,this._tempNumver1=H$L/2,this._tempNumver2=H$H/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$f-this._tempNumver0,H$K+this._tempNumver1,H$Y+this._tempNumver2,H$E,H$d,H$O,H$i),this.addVertex(H$f+this._tempNumver0,H$K+this._tempNumver1,H$Y+this._tempNumver2,H$E,H$d,H$O,H$i),this.addVertex(H$f-this._tempNumver0,H$K-this._tempNumver1,H$Y+this._tempNumver2,H$E,H$d,H$O,H$i),this.addVertex(H$f+this._tempNumver0,H$K-this._tempNumver1,H$Y+this._tempNumver2,H$E,H$d,H$O,H$i),this.addVertex(H$f+this._tempNumver0,H$K+this._tempNumver1,H$Y-this._tempNumver2,H$E,H$d,H$O,H$i),this.addVertex(H$f-this._tempNumver0,H$K+this._tempNumver1,H$Y-this._tempNumver2,H$E,H$d,H$O,H$i),this.addVertex(H$f+this._tempNumver0,H$K-this._tempNumver1,H$Y-this._tempNumver2,H$E,H$d,H$O,H$i),this.addVertex(H$f-this._tempNumver0,H$K-this._tempNumver1,H$Y-this._tempNumver2,H$E,H$d,H$O,H$i),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},H$K.cone=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*H$Y+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*H$Y>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/H$Y,this.addVertexIndex(0,H$K,0,H$X,H$L,H$H,H$E,this._tempUint0),this.addVertexIndex(0,0,0,H$X,H$L,H$H,H$E,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<H$Y;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(H$f*this._tempNumver2,0,H$f*this._tempNumver3,H$X,H$L,H$H,H$E,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==H$Y-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(H$f*this._tempNumver2,0,H$f*this._tempNumver3,H$X,H$L,H$H,H$E,this._tempUint0+(this._tempInt0+H$Y)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==H$Y-1?this.addIndexes(this._tempUint1+H$Y+2):this.addIndexes(this._tempUint1+this._tempInt0+H$Y+1),this.addIndexes(this._tempUint1+this._tempInt0+H$Y),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},H$K.boundingBoxLine=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(H$f,H$L,H$H,H$E,H$d,H$O,H$i),this.addVertex(H$X,H$L,H$H,H$E,H$d,H$O,H$i),this.addVertex(H$f,H$K,H$H,H$E,H$d,H$O,H$i),this.addVertex(H$X,H$K,H$H,H$E,H$d,H$O,H$i),this.addVertex(H$X,H$L,H$Y,H$E,H$d,H$O,H$i),this.addVertex(H$f,H$L,H$Y,H$E,H$d,H$O,H$i),this.addVertex(H$X,H$K,H$Y,H$E,H$d,H$O,H$i),this.addVertex(H$f,H$K,H$Y,H$E,H$d,H$O,H$i),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},H$K.addVertex=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=H$f,this._vbData[this._posInVBData+1]=H$K,this._vbData[this._posInVBData+2]=H$Y,this._vbData[this._posInVBData+3]=H$X,this._vbData[this._posInVBData+4]=H$L,this._vbData[this._posInVBData+5]=H$H,this._vbData[this._posInVBData+6]=H$E,this._posInVBData+=this._floatSizePerVer,this},H$K.addVertexIndex=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){return this._hasBegun||this.addVertexIndexException(),this._vbData[H$d]=H$f,this._vbData[H$d+1]=H$K,this._vbData[H$d+2]=H$Y,this._vbData[H$d+3]=H$X,this._vbData[H$d+4]=H$L,this._vbData[H$d+5]=H$H,this._vbData[H$d+6]=H$E,(H$d+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=H$d),this},H$K.addIndexes=function(H$f){var H$K=arguments;this._hasBegun||this.addVertexIndexException();for(var H$Y=0;H$Y<H$K.length;H$Y++)this._ibData[this._posInIBData]=H$K[H$Y],this._posInIBData++;return this},H$K.begin=function(H$f,H$K){return this._hasBegun&&this.beginException0(),1!==H$f&&4!==H$f&&this.beginException1(),this._primitiveType=H$f,this._camera=H$K,this._hasBegun=!0,this},H$K.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},H$K.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(H$f._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),H$I.drawCall++,H$R.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},H$K.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},H$K.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},H$K.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},H$K.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},H$K.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},H$K.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(28,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector4",1)])}]),H$f}()),H$c=function(){function H$f(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++H$f._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new H$yK}H$l(H$f,"laya.d3.core.render.RenderElement");var H$K=H$f.prototype;return H$K.getDynamicBatchBakedVertexs=function(H$f){for(var H$K=this._renderObj._getVertexBuffer(H$f),H$Y=H$K.getData().slice(),H$X=H$K.vertexDeclaration,H$L=H$X.getVertexElementByUsage(0).offset/4,H$H=H$X.getVertexElementByUsage(3).offset/4,H$E=this._sprite3D.transform,H$d=H$E.worldMatrix,H$O=H$E.rotation,H$i=H$X.vertexStride/4,H$U=0,H$Z=H$Y.length;H$U<H$Z;H$U+=H$i){var H$y=H$U+H$L,H$l=H$U+H$H;H$hK.transformVector3ArrayToVector3ArrayCoordinate(H$Y,H$y,H$d,H$Y,H$y),H$hK.transformVector3ArrayByQuat(H$Y,H$l,H$O,H$Y,H$l)}return H$Y},H$K.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},H$K._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},H$B(0,H$K,"id",function(){return this._id}),H$B(0,H$K,"renderObj",function(){return this._renderObj},function(H$f){this._renderObj!==H$f&&(this._renderObj=H$f)}),H$f._uniqueIDCounter=0,H$f}(),H$p=function(){function H$K(H$f){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++H$K._uniqueIDCounter,this._needSort=!1,this._scene=H$f,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}H$l(H$K,"laya.d3.core.render.RenderQueue");var H$f=H$K.prototype;return H$f._sortOpaqueFunc=function(H$f,H$K){if(H$f._render&&H$K._render){var H$Y=H$f._material.renderQueue-H$K._material.renderQueue;return 0==H$Y?H$f._render._distanceForSort-H$K._render._distanceForSort:H$Y}return 0},H$f._sortAlphaFunc=function(H$f,H$K){if(H$f._render&&H$K._render){var H$Y=H$f._material.renderQueue-H$K._material.renderQueue;return 0==H$Y?H$K._render._distanceForSort-H$f._render._distanceForSort:H$Y}return 0},H$f._begainRenderElement=function(H$f,H$K,H$Y){return!!H$K._beforeRender(H$f)},H$f._sortAlpha=function(H$f){H$K._cameraPosition=H$f,this._finalElements.sort(this._sortAlphaFunc)},H$f._sortOpaque=function(H$f){H$K._cameraPosition=H$f,this._finalElements.sort(this._sortOpaqueFunc)},H$f._preRender=function(H$f){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},H$f._render=function(H$f,H$K){for(var H$Y,H$X,H$L,H$H,H$E,H$d,H$O=H$I.loopCount,H$i=this._scene,H$U=H$f.camera,H$Z=(H$U.id,!1),H$y=0,H$l=this._finalElements.length;H$y<H$l;H$y++){var H$B,H$$,H$h,H$A=this._finalElements[H$y];if(null!=H$A._onPreRenderFunction&&H$A._onPreRenderFunction.call(H$A._sprite3D,H$f),0===H$A._type){if(H$f.owner=H$h=H$A._sprite3D,H$f.renderElement=H$A,H$h._preRenderUpdateComponents(H$f),H$B=H$A.renderObj,H$$=H$A._material,this._begainRenderElement(H$f,H$B,H$$)){if(H$Y=H$B._getVertexBuffers(),!(H$L=(H$X=H$B._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[H$X.id]){this._errorRecord[H$X.id]=1;var H$x="vertexBuffer:"+("("+H$X._destroyed+","+H$X._released+","+H$X._referenceCount+","+H$X._buffer+")")+", material:"+(H$$?H$$.__className+"("+H$$._destroyed+","+H$$._released+")":"null")+", owner:"+(H$h?H$h.__className+"("+H$h._destroyed+","+H$h._activeInHierarchy+","+H$h._displayedInStage+")":"null")+", renderObj:"+(H$B?H$B.__className+"("+H$B._destroyed+","+H$B._released+","+H$B._referenceCount+")":"")+", parent:, url:"+(H$h?H$h.url:"")+", disposeStack:"+H$X.disposeStack;H$C.recordError("报错：unknown vertexDeclaration  "+H$x)}continue}if(H$Z=(H$H=H$f._shader=H$$._getShader(H$i._shaderDefineValue,H$L.shaderDefineValue,H$h._shaderDefineValue)).bind()||H$O!==H$H._uploadLoopCount,H$Y){if(H$H._uploadVertexBuffer!==H$Y||H$Z){for(var H$S=0;H$S<H$Y.length;H$S++){var H$z=H$Y[H$S];H$H.uploadAttributesX(H$z.vertexDeclaration.shaderValues.data,H$z)}H$H._uploadVertexBuffer=H$Y}}else(H$H._uploadVertexBuffer!==H$X||H$Z)&&(H$H.uploadAttributes(H$L.shaderValues.data,null),H$H._uploadVertexBuffer=H$X);(H$H._uploadScene!==H$i||H$Z)&&(H$H.uploadSceneUniforms(H$i._shaderValues.data),H$H._uploadScene=H$i),(H$U!==H$H._uploadCamera||H$H._uploadSprite3D!==H$h||H$Z)&&(H$H.uploadSpriteUniforms(H$h._shaderValues.data),H$H._uploadSprite3D=H$h),(H$U!==H$H._uploadCamera||H$Z)&&(H$H.uploadCameraUniforms(H$U._shaderValues.data),H$H._uploadCamera=H$U),(H$H._uploadMaterial!==H$$||H$Z)&&(H$$._upload(),H$H._uploadMaterial=H$$),H$E!==H$$?(H$$._setRenderStateBlendDepth(),H$$._setRenderStateFrontFace(H$K,H$h.transform),H$E=H$$,H$d=H$h):H$d!==H$h&&(H$$._setRenderStateFrontFace(H$K,H$h.transform),H$d=H$h),H$B._render(H$f),H$H._uploadLoopCount=H$O}H$h._postRenderUpdateComponents(H$f)}else if(2===H$A._type){H$A.renderObj;H$f.owner=H$h=H$A._sprite3D,H$f.renderElement=H$A,H$f._batchIndexStart=H$A._tempBatchIndexStart,H$f._batchIndexEnd=H$A._tempBatchIndexEnd,H$B=H$A.renderObj,H$$=H$A._material,this._begainRenderElement(H$f,H$B,H$$)&&(H$L=(H$X=H$B._getVertexBuffer(0)).vertexDeclaration,H$Z=(H$H=H$f._shader=H$$._getShader(H$i._shaderDefineValue,H$L.shaderDefineValue,H$h._shaderDefineValue)).bind()||H$O!==H$H._uploadLoopCount,(H$H._uploadVertexBuffer!==H$X||H$Z)&&(H$H.uploadAttributes(H$L.shaderValues.data,null),H$H._uploadVertexBuffer=H$X),(H$H._uploadScene!==H$i||H$Z)&&(H$H.uploadSceneUniforms(H$i._shaderValues.data),H$H._uploadScene=H$i),(H$U!==H$H._uploadCamera||H$H._uploadSprite3D!==H$h||H$Z)&&(H$H.uploadSpriteUniforms(H$h._shaderValues.data),H$H._uploadSprite3D=H$h),(H$U!==H$H._uploadCamera||H$Z)&&(H$H.uploadCameraUniforms(H$U._shaderValues.data),H$H._uploadCamera=H$U),(H$H._uploadMaterial!==H$$||H$Z)&&(H$$._upload(),H$H._uploadMaterial=H$$),H$E!==H$$?(H$$._setRenderStateBlendDepth(),H$$._setRenderStateFrontFace(H$K,H$h.transform),H$E=H$$,H$d=H$h):H$d!==H$h&&(H$$._setRenderStateFrontFace(H$K,H$h.transform),H$d=H$h),H$B._render(H$f),H$H._uploadLoopCount=H$O)}}},H$f._renderShadow=function(H$f,H$K){for(var H$Y,H$X,H$L,H$H,H$E,H$d=H$I.loopCount,H$O=this._scene,H$i=H$f.camera,H$U=!1,H$Z=0,H$y=this._finalElements.length;H$Z<H$y;H$Z++){var H$l,H$B,H$$,H$h=this._finalElements[H$Z];0===H$h._type&&(H$f.owner=H$$=H$h._sprite3D,H$K||H$$._projectionViewWorldUpdateCamera===H$i&&H$$._projectionViewWorldUpdateLoopCount===H$I.loopCount||(H$$._render._renderUpdate(H$f._projectionViewMatrix),H$$._projectionViewWorldUpdateLoopCount=H$I.loopCount,H$$._projectionViewWorldUpdateCamera=H$i),H$f.renderElement=H$h,H$$._preRenderUpdateComponents(H$f),H$l=H$h.renderObj,H$B=H$h._material,this._begainRenderElement(H$f,H$l,null)&&(H$X=(H$Y=H$l._getVertexBuffer(0)).vertexDeclaration,H$U=(H$L=H$f._shader=H$B._getShader(H$O._shaderDefineValue,H$X.shaderDefineValue,H$$._shaderDefineValue)).bind()||H$d!==H$L._uploadLoopCount,(H$L._uploadVertexBuffer!==H$Y||H$U)&&(H$L.uploadAttributes(H$X.shaderValues.data,null),H$L._uploadVertexBuffer=H$Y),(H$i!==H$L._uploadCamera||H$L._uploadSprite3D!==H$$||H$U)&&(H$L.uploadSpriteUniforms(H$$._shaderValues.data),H$L._uploadSprite3D=H$$),(H$i!==H$L._uploadCamera||H$U)&&(H$L.uploadCameraUniforms(H$i._shaderValues.data),H$L._uploadCamera=H$i),(H$L._uploadMaterial!==H$B||H$U)&&(H$B._upload(),H$L._uploadMaterial=H$B),H$L._uploadRenderElement,H$H!==H$B?(H$B._setRenderStateFrontFace(!1,H$$.transform),H$H=H$B,H$E=H$$):H$E!==H$$&&(H$B._setRenderStateFrontFace(!1,H$$.transform),H$E=H$$),H$l._render(H$f),H$L._uploadLoopCount=H$d),H$$._postRenderUpdateComponents(H$f))}},H$f._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},H$f._addRenderElement=function(H$f){this._renderElements.push(H$f),this._needSort=!0},H$f._addDynamicBatchElement=function(H$f){this._dynamicBatchCombineRenderElements.push(H$f)},H$B(0,H$f,"id",function(){return this._id}),H$K._uniqueIDCounter=0,H$K._cameraPosition=null,H$K}(),H$u=function(){function H$f(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return H$l(H$f,"laya.d3.core.render.RenderState"),H$f.clientWidth=0,H$f.clientHeight=0,H$f}(),H$D=function(){function H$E(H$f,H$K){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new H$Nf(new H$EK,0),this._corners=[new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK],this._boundingBoxCenter=new H$EK,this._children=H$X(8),this._objects=[],this._tempBoundBoxCorners=[new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK],this._scene=H$f,this._currentDepth=H$K}H$l(H$E,"laya.d3.core.scene.OctreeNode");var H$f=H$E.prototype;return H$C.imps(H$f,{"laya.d3.core.scene.ITreeNode":!0}),H$f.init=function(H$f,H$K){var H$Y=new H$EK,H$X=new H$EK;H$EK.scale(H$K,-.5,H$Y),H$EK.scale(H$K,.5,H$X),H$EK.add(H$Y,H$f,H$Y),H$EK.add(H$X,H$f,H$X),this.exactBox=new H$Df(H$Y,H$X),this.relaxBox=new H$Df(H$Y,H$X)},H$f.addTreeNode=function(H$f){1===Collision.boxContainsBox(this._relaxBox,H$f.boundingBox)?this.addNodeDown(H$f,0):this.addObject(H$f)},H$f.addChild=function(H$f){var H$K=this._children[H$f];if(null==H$K){H$K=new H$E(this._scene,this._currentDepth+1),(this._children[H$f]=H$K)._parent=this,H$EK.subtract(this._exactBox.max,this._exactBox.min,H$E.tempSize),H$EK.multiply(H$E.tempSize,H$E._octreeSplit[H$f],H$E.tempCenter),H$EK.add(this._exactBox.min,H$E.tempCenter,H$E.tempCenter),H$EK.scale(H$E.tempSize,.25,H$E.tempSize);var H$Y=new H$EK,H$X=new H$EK;H$EK.subtract(H$E.tempCenter,H$E.tempSize,H$Y),H$EK.add(H$E.tempCenter,H$E.tempSize,H$X),H$K.exactBox=new H$Df(H$Y,H$X),H$EK.scale(H$E.tempSize,H$E.relax,H$E.tempSize);var H$L=new H$EK,H$H=new H$EK;H$EK.subtract(H$E.tempCenter,H$E.tempSize,H$L),H$EK.add(H$E.tempCenter,H$E.tempSize,H$H),H$K.relaxBox=new H$Df(H$L,H$H)}return H$K},H$f.addObject=function(H$f){(H$f._treeNode=this)._objects.push(H$f)},H$f.removeObject=function(H$f){if(H$f._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var H$K=this._objects.indexOf(H$f);return-1!==H$K&&(this._objects.splice(H$K,1),!0)},H$f.clearObject=function(){this._objects.length=0},H$f.addNodeUp=function(H$f,H$K){this._parent&&1!==Collision.boxContainsBox(this._exactBox,H$f.boundingBox)?this._parent.addNodeUp(H$f,H$K-1):this.addNodeDown(H$f,H$K)},H$f.addNodeDown=function(H$f,H$K){if(H$K<this._scene.treeLevel){var H$Y=this.inChildIndex(H$f.boundingBoxCenter),H$X=this.addChild(H$Y);1===Collision.boxContainsBox(H$X._relaxBox,H$f.boundingBox)?H$X.addNodeDown(H$f,++H$K):this.addObject(H$f)}else this.addObject(H$f)},H$f.inChildIndex=function(H$f){return 4*(H$f.z<this._boundingBoxCenter.z?0:1)+2*(H$f.y<this._boundingBoxCenter.y?0:1)+(H$f.x<this._boundingBoxCenter.x?0:1)},H$f.updateObject=function(H$f){1===Collision.boxContainsBox(this._relaxBox,H$f.boundingBox)?(this.removeObject(H$f),H$f._treeNode=null,this.addNodeDown(H$f,this._currentDepth)):this._parent&&(this.removeObject(H$f),H$f._treeNode=null,this._parent.addNodeUp(H$f,this._currentDepth-1))},H$f.cullingObjects=function(H$f,H$K,H$Y,H$X,H$L){var H$H,H$E=0,H$d=0,H$O=0,H$i=this._scene._dynamicBatchManager;for(H$E=0,H$H=this._objects.length;H$E<H$H;H$E++){var H$U=this._objects[H$E];if(H$T.isVisible(H$U._owner.layer.mask)&&H$U.enable){if(H$K&&(H$I.treeSpriteCollision+=1,0===H$f.containsBoundSphere(H$U.boundingSphere)))continue;H$U._renderUpdate(H$L),H$U._distanceForSort=H$EK.distance(H$U.boundingSphere.center,H$X)+H$U.sortingFudge;var H$Z=H$U._renderElements;for(H$d=0,H$O=H$Z.length;H$d<H$O;H$d++){var H$y=H$Z[H$d],H$l=H$y._staticBatch;if(H$l&&H$l._material===H$y._material)H$l._addBatchRenderElement(H$y);else{var H$B=H$y.renderObj;H$B.triangleCount<10&&1===H$B._vertexBufferCount&&H$B._getIndexBuffer()&&H$y._material.renderQueue<2&&H$y._canDynamicBatch&&!H$U._owner.isStatic?H$i._addPrepareRenderElement(H$y):this._scene.getRenderQueue(H$y._material.renderQueue)._addRenderElement(H$y)}}}}for(H$E=0;H$E<8;H$E++){var H$$=this._children[H$E];if(null!=H$$){var H$h=H$K;if(H$K){var H$A=H$f.containsBoundBox(H$$._relaxBox);if(H$I.treeNodeCollision+=1,0===H$A)continue;H$h=2===H$A}H$$.cullingObjects(H$f,H$h,H$Y,H$X,H$L)}}},H$f.cullingShadowObjects=function(H$f,H$K,H$Y,H$X,H$L){var H$H,H$E=0,H$d=0,H$O=0;this._scene._dynamicBatchManager;for(H$E=0,H$H=this._objects.length;H$E<H$H;H$E++){var H$i=this._objects[H$E];if(H$i.castShadow&&H$T.isVisible(H$i._owner.layer.mask)&&H$i.enable){if(H$Y&&0===H$f[0].containsBoundSphere(H$i.boundingSphere))continue;for(var H$U=1,H$Z=H$f.length;H$U<H$Z;H$U++){var H$y=H$K[H$U-1];if(0!==H$f[H$U].containsBoundSphere(H$i.boundingSphere)){var H$l=H$i._renderElements;for(H$d=0,H$O=H$l.length;H$d<H$O;H$d++)H$y._addRenderElement(H$l[H$d])}}}}for(H$E=0;H$E<8;H$E++){var H$B=this._children[H$E];if(null!=H$B){var H$$=H$Y;if(H$Y){var H$h=H$f[0].containsBoundBox(H$B._relaxBox);if(0===H$h)continue;H$$=2===H$h}H$B.cullingShadowObjects(H$f,H$K,H$$,H$X,H$L)}}},H$f.cullingShadowObjectsOnePSSM=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E,H$d=H$K[0],H$O=0,H$i=0,H$U=0;for(H$O=0,H$E=this._objects.length;H$O<H$E;H$O++){var H$Z=this._objects[H$O];if(H$Z.castShadow&&H$T.isVisible(H$Z._owner.layer.mask)&&H$Z.enable){if(H$X&&0===H$f.containsBoundSphere(H$Z.boundingSphere))continue;H$Z._renderUpdate(H$Y);var H$y=H$Z._renderElements;for(H$i=0,H$U=H$y.length;H$i<H$U;H$i++)H$d._addRenderElement(H$y[H$i])}}for(H$O=0;H$O<8;H$O++){var H$l=this._children[H$O];if(null!=H$l){var H$B=H$X;if(H$X){var H$$=H$f.containsBoundBox(H$l._relaxBox);if(0===H$$)continue;H$B=2===H$$}H$l.cullingShadowObjectsOnePSSM(H$f,H$K,H$Y,H$B,H$L,H$H)}}},H$f.renderBoudingBox=function(H$f){this._renderBoudingBox(H$f);for(var H$K=0;H$K<8;++H$K){var H$Y=this._children[H$K];H$Y&&H$Y.renderBoudingBox(H$f)}},H$f.buildAllChild=function(H$f){if(H$f<this._scene.treeLevel)for(var H$K=0;H$K<8;H$K++){this.addChild(H$K).buildAllChild(H$f+1)}},H$f._renderBoudingBox=function(H$f){},H$B(0,H$f,"exactBox",function(){return this._exactBox},function(H$f){this._exactBox=H$f,H$EK.add(H$f.min,H$f.max,this._boundingBoxCenter),H$EK.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),H$B(0,H$f,"relaxBox",function(){return this._relaxBox},function(H$f){(this._relaxBox=H$f).getCorners(this._corners),H$Nf.createfromPoints(this._corners,this._boundingSphere)}),H$E.debugMode=!1,H$E.relax=1.15,H$E.CHILDNUM=8,H$Z(H$E,["tempVector0",function(){return this.tempVector0=new H$EK},"tempSize",function(){return this.tempSize=new H$EK},"tempCenter",function(){return this.tempCenter=new H$EK},"_octreeSplit",function(){return this._octreeSplit=[new H$EK(.25,.25,.25),new H$EK(.75,.25,.25),new H$EK(.25,.75,.25),new H$EK(.75,.75,.25),new H$EK(.25,.25,.75),new H$EK(.75,.25,.75),new H$EK(.25,.75,.75),new H$EK(.75,.75,.75)]}]),H$E}(),H$g=(function(){function H$f(){}H$l(H$f,"laya.d3.core.scene.SceneManager")}(),function(){function H$f(H$f,H$K,H$Y,H$X){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===H$f&&(H$f=1),void 0===H$K&&(H$K=1),void 0===H$Y&&(H$Y=1),void 0===H$X&&(H$X=1),this._r=H$f,this._g=H$K,this._b=H$Y,this._a=H$X}return H$l(H$f,"laya.d3.core.trail.module.Color",null,"Color$1"),H$f.prototype.cloneTo=function(H$f){H$f._r=this._r,H$f._g=this._g,H$f._b=this._b,H$f._a=this._a},H$Z(H$f,["RED",function(){return this.RED=new H$f(1,0,0,1)},"GREEN",function(){return this.GREEN=new H$f(0,1,0,1)},"BLUE",function(){return this.BLUE=new H$f(0,0,1,1)},"CYAN",function(){return this.CYAN=new H$f(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new H$f(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new H$f(1,0,1,1)},"GRAY",function(){return this.GRAY=new H$f(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new H$f(1,1,1,1)},"BLACK",function(){return this.BLACK=new H$f(0,0,0,1)}]),H$f}()),H$N=(function(){function H$f(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}H$l(H$f,"laya.d3.core.trail.module.Gradient");var H$K=H$f.prototype;H$K.setKeys=function(H$f,H$K){var H$Y,H$X;this._colorKeys=H$f;for(var H$L=this.index=0;H$L<H$f.length;H$L++){var H$H=(H$Y=H$f[H$L]).color;this._colorKeyData[this.index++]=H$H._r,this._colorKeyData[this.index++]=H$H._g,this._colorKeyData[this.index++]=H$H._b,this._colorKeyData[this.index++]=H$Y.time}this._alphaKeys=H$K;for(var H$E=this.index=0;H$E<H$K.length;H$E++)H$X=H$K[H$E],this._alphaKeyData[this.index++]=H$X.alpha,this._alphaKeyData[this.index++]=H$X.time},H$K.cloneTo=function(H$f){var H$K=0,H$Y=0,H$X=this.colorKeys,H$L=[];for(H$K=0,H$Y=H$X.length;H$K<H$Y;H$K++){var H$H=new H$o;H$X[H$K].cloneTo(H$H),H$L.push(H$H)}var H$E=this.alphaKeys,H$d=[];for(H$K=0,H$Y=H$E.length;H$K<H$Y;H$K++){var H$O=new H$N;H$E[H$K].cloneTo(H$O),H$d.push(H$O)}H$f.setKeys(H$L,H$d)},H$B(0,H$K,"mode",function(){return this._mode},function(H$f){this._mode=H$f}),H$B(0,H$K,"colorKeys",function(){return this._colorKeys},function(H$f){this._colorKeys=H$f;for(var H$K=this.index=0;H$K<H$f.length;H$K++){var H$Y=H$f[H$K],H$X=H$Y.color;this._colorKeyData[this.index++]=H$X._r,this._colorKeyData[this.index++]=H$X._g,this._colorKeyData[this.index++]=H$X._b,this._colorKeyData[this.index++]=H$Y.time}}),H$B(0,H$K,"alphaKeys",function(){return this._alphaKeys},function(H$f){this._alphaKeys=H$f;for(var H$K=this.index=0;H$K<H$f.length;H$K++){var H$Y=H$f[H$K];this._alphaKeyData[this.index++]=H$Y.alpha,this._alphaKeyData[this.index++]=H$Y.time}})}(),function(){function H$f(H$f,H$K){this._alpha=NaN,this._time=NaN,void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),this._alpha=H$f,this._time=H$K}H$l(H$f,"laya.d3.core.trail.module.GradientAlphaKey");var H$K=H$f.prototype;return H$K.cloneTo=function(H$f){H$f.alpha=this.alpha,H$f.time=this.time},H$B(0,H$K,"alpha",function(){return this._alpha},function(H$f){this._alpha=H$f}),H$B(0,H$K,"time",function(){return this._time},function(H$f){this._time=H$f}),H$f}()),H$o=function(){function H$f(H$f,H$K){this._color=null,this._time=NaN,void 0===H$K&&(H$K=0),this._color=H$f||new H$g,this._time=H$K}H$l(H$f,"laya.d3.core.trail.module.GradientColorKey");var H$K=H$f.prototype;return H$K.cloneTo=function(H$f){this.color.cloneTo(H$f.color),H$f.time=this.time},H$B(0,H$K,"color",function(){return this._color},function(H$f){this._color=H$f}),H$B(0,H$K,"time",function(){return this._time},function(H$f){this._time=H$f}),H$f}(),H$F=(function(){function H$f(){}H$l(H$f,"laya.d3.core.trail.module.GradientMode"),H$f.Blend=0,H$f.Fixed=1}(),function(){function H$f(){}H$l(H$f,"laya.d3.core.trail.module.TextureMode"),H$f.Stretch=0,H$f.Tile=1}(),function(){function H$f(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}H$l(H$f,"laya.d3.core.trail.module.TrailKeyFrame"),H$f.prototype.cloneTo=function(H$f){H$f.time=this.time,H$f.inTangent=this.inTangent,H$f.outTangent=this.outTangent,H$f.value=this.value}}(),function(){function H$K(H$f){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new H$EK,this._curPosition=new H$EK,this._delVector3=new H$EK,this._lastFixedVertexPosition=new H$EK,this._pointAtoBVector3=new H$EK,this._pointA=new H$EK,this._pointB=new H$EK,this._owner=H$f,this._id=H$K.renderElementCount++,0==this._id?H$f._owner.transform.position.cloneTo(this._lastPosition):H$f._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new H$PK(H$F.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new H$PK(H$F.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}H$l(H$K,"laya.d3.core.trail.TrailRenderElement");var H$f=H$K.prototype;H$C.imps(H$f,{"laya.d3.core.render.IRenderable":!0}),H$f._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},H$f._addTrailByFirstPosition=function(H$f,H$K){H$EK.subtract(H$K,H$f,this._delVector3),H$EK.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),H$EK.normalize(this._pointAtoBVector3,this._pointAtoBVector3),H$EK.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(H$f),H$f.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},H$f._addTrailByNextPosition=function(H$f){H$EK.subtract(H$f,this._lastFixedVertexPosition,this._delVector3),H$EK.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),H$EK.normalize(this._pointAtoBVector3,this._pointAtoBVector3),H$EK.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=H$EK.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=H$of.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(H$f),H$f.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(H$f),this._virtualVerticesCount=2)},H$f._updateVerticesByPosition=function(H$f){this._pointe=H$f.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},H$f._updateVertexBuffer2=function(){var H$f,H$K=0,H$Y=0,H$X=0;for(H$X=0,H$f=(this._verticesCount+this._virtualVerticesCount)/2;H$X<H$f;H$X++)H$Y=0==this._owner.textureMode?(this._VerticesToTailLength[H$X]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[H$X],this._vertices2[H$K++]=1-H$Y,this._vertices2[H$K++]=1-H$Y;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},H$f._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},H$f._updateDisappear=function(){var H$f,H$K=0;for(H$K=this._curDisappearIndex,H$f=(this._verticesCount+this._virtualVerticesCount)/2;H$K<H$f;H$K++)this._owner._curtime-this._everyGroupVertexBirthTime[H$K]>=this._owner.time+H$of.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},H$f._beforeRender=function(H$f){return this._camera=H$f.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),H$EK.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},H$f._render=function(H$f){this._isDead||(H$R.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),H$I.drawCall++,H$I.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},H$f._getVertexBuffer=function(H$f){return void 0===H$f&&(H$f=0),0===H$f?this._vertexBuffer1:1===H$f?this._vertexBuffer2:null},H$f._getVertexBuffers=function(){return this._vertexBuffers},H$f._getIndexBuffer=function(){return null},H$f.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},H$f._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},H$B(0,H$f,"_vertexBufferCount",function(){return this._vertexBuffers.length}),H$B(0,H$f,"triangleCount",function(){return 0}),H$K.renderElementCount=0}(),function(){function H$f(){}H$l(H$f,"laya.d3.core.trail.VertexTrail");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration1}),H$B(1,H$f,"vertexDeclaration1",function(){return H$f._vertexDeclaration1}),H$B(1,H$f,"vertexDeclaration2",function(){return H$f._vertexDeclaration2}),H$Z(H$f,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new H$Hf(32,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",41),new H$Ef(24,"single",33),new H$Ef(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new H$Hf(4,[new H$Ef(0,"single",38)])}]),H$f}()),H$ff=function(){function H$z(H$f){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=H$f}H$l(H$z,"laya.d3.graphics.DynamicBatch");var H$f=H$z.prototype;return H$C.imps(H$f,{"laya.d3.core.render.IRenderable":!0}),H$f._getVertexBuffer=function(H$f){return void 0===H$f&&(H$f=0),0===H$f?this._vertexBuffer:null},H$f._getIndexBuffer=function(){return this._indexBuffer},H$f._getCombineRenderElementFromPool=function(H$f,H$K,H$Y){var H$X=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return H$X||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=H$X=new H$c,H$X._sprite3D=new H$pK),H$X._sprite3D._render._renderUpdate(H$Y),H$X},H$f._getRenderElement=function(H$f,H$K,H$Y){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*H$z.maxVertexCount),this._indexDatas=new Uint16Array(H$z.maxIndexCount),this._vertexBuffer=H$PK.create(this._vertexDeclaration,H$z.maxVertexCount,35048),this._indexBuffer=H$qK.create("ushort",H$z.maxIndexCount,35048));for(var H$X=this._merageElements.length=0,H$L=0,H$H=0,H$E=this._combineRenderElements.length;H$H<H$E;H$H++){var H$d=this._combineRenderElements[H$H],H$O=H$d.getDynamicBatchBakedVertexs(0),H$i=H$d.getBakedIndices(),H$U=H$d._sprite3D.transform._isFrontFaceInvert,H$Z=H$X/(this._vertexDeclaration.vertexStride/4),H$y=H$L,H$l=H$y+H$i.length;H$d._tempBatchIndexStart=H$y,H$d._tempBatchIndexEnd=H$l,this._indexDatas.set(H$i,H$L);var H$B=0;if(H$U)for(H$B=H$y;H$B<H$l;H$B+=3){this._indexDatas[H$B]=H$Z+this._indexDatas[H$B];var H$$=this._indexDatas[H$B+1],H$h=this._indexDatas[H$B+2];this._indexDatas[H$B+1]=H$Z+H$h,this._indexDatas[H$B+2]=H$Z+H$$}else for(H$B=H$y;H$B<H$l;H$B+=3)this._indexDatas[H$B]=H$Z+this._indexDatas[H$B],this._indexDatas[H$B+1]=H$Z+this._indexDatas[H$B+1],this._indexDatas[H$B+2]=H$Z+this._indexDatas[H$B+2];H$L+=H$i.length,this._vertexDatas.set(H$O,H$X),H$X+=H$O.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),H$H=this._combineRenderElementPoolIndex=0,H$E=this._materials.length;H$H<H$E;H$H++){var H$A=this._getCombineRenderElementFromPool(H$f,H$K,H$Y);H$A._type=2,H$A._staticBatch=null;var H$x=(H$A.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[H$H]]._tempBatchIndexStart,H$S=H$H+1===this._materialToRenderElementsOffsets.length?H$L:this._combineRenderElements[this._materialToRenderElementsOffsets[H$H+1]]._tempBatchIndexStart;H$A._tempBatchIndexStart=H$x,H$A._tempBatchIndexEnd=H$S,H$A._material=this._materials[H$H],this._merageElements.push(H$A)}},H$f._addCombineRenderObjTest=function(H$f){var H$K=H$f.renderObj,H$Y=this._currentCombineIndexCount+H$K._getIndexBuffer().indexCount,H$X=this._currentCombineVertexCount+H$K._getVertexBuffer().vertexCount;return!(H$z.maxVertexCount<H$X||H$z.maxIndexCount<H$Y)},H$f._addCombineRenderObj=function(H$f){var H$K=H$f.renderObj;this._combineRenderElements.push(H$f),this._currentCombineIndexCount=this._currentCombineIndexCount+H$K._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+H$K._getVertexBuffer().vertexCount},H$f._addCombineMaterial=function(H$f){this._materials.push(H$f)},H$f._addMaterialToRenderElementOffset=function(H$f){this._materialToRenderElementsOffsets.push(H$f)},H$f._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},H$f._addToRenderQueue=function(H$f,H$K,H$Y,H$X){this._getRenderElement(H$K,H$Y,H$X);for(var H$L=0,H$H=this._materials.length;H$L<H$H;H$L++)H$f.getRenderQueue(this._materials[H$L].renderQueue)._addDynamicBatchElement(this._merageElements[H$L])},H$f._beforeRender=function(H$f){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$f._render=function(H$f){var H$K=H$f._batchIndexEnd-H$f._batchIndexStart;H$R.mainContext.drawElements(4,H$K,5123,2*H$f._batchIndexStart),H$I.drawCall++,H$I.trianglesFaces+=H$K/3},H$f._getVertexBuffers=function(){return null},H$B(0,H$f,"_vertexBufferCount",function(){return 1}),H$B(0,H$f,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H$B(0,H$f,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),H$z.maxVertexCount=2e4,H$z.maxIndexCount=4e4,H$z.maxCombineTriangleCount=10,H$z}(),H$Kf=function(){function H$z(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}H$l(H$z,"laya.d3.graphics.DynamicBatchManager");var H$f=H$z.prototype;return H$f.getDynamicBatch=function(H$f,H$K){var H$Y,H$X=H$f.id.toString()+H$K;return this._dynamicBatches[H$X]?H$Y=this._dynamicBatches[H$X]:this._dynamicBatches[H$X]=H$Y=new H$ff(H$f),H$Y},H$f._garbageCollection=function(){for(var H$f in this._dynamicBatches)0===this._dynamicBatches[H$f].combineRenderElementsCount&&delete this._dynamicBatches[H$f]},H$f._addPrepareRenderElement=function(H$f){this._prepareDynamicBatchCombineElements.push(H$f)},H$f._finishCombineDynamicBatch=function(H$f){var H$K,H$Y,H$X;this._prepareDynamicBatchCombineElements.sort(H$z._sortPrepareDynamicBatch);for(var H$L,H$H,H$E,H$d,H$O,H$i=-1,H$U=!0,H$Z=0,H$y=-1,H$l=0,H$B=this._prepareDynamicBatchCombineElements.length;H$l<H$B;H$l++){var H$$=(H$H=this._prepareDynamicBatchCombineElements[H$l]).renderObj._getVertexBuffer(0).vertexDeclaration,H$h=H$Y!==H$$;H$h&&(H$Z=0,H$Y=H$$);var H$A=H$Z!==H$i;if(H$A&&(H$i=H$Z),(H$h||H$A)&&(H$E=this.getDynamicBatch(H$$,H$Z),H$K=null),H$U)if(H$E._addCombineRenderObjTest(H$H)){if(H$K!==(H$L=H$H._material))H$d&&(H$f.getRenderQueue(H$O._material.renderQueue)._addRenderElement(H$O),H$O=H$d=null,H$y=-1),H$d=H$L,H$y=H$E.combineRenderElementsCount,H$O=H$H,H$K=H$L;else if(H$d){var H$x=H$O.renderObj,H$S=H$H.renderObj;H$x._getVertexBuffer().vertexCount+H$S._getVertexBuffer().vertexCount>H$ff.maxVertexCount||H$x._getIndexBuffer().indexCount+H$S._getIndexBuffer().indexCount>H$ff.maxIndexCount?(H$f.getRenderQueue(H$O._material.renderQueue)._addRenderElement(H$O),H$d=H$L,H$y=H$E.combineRenderElementsCount,H$O=H$H):(H$E._addCombineMaterial(H$d),H$E._addMaterialToRenderElementOffset(H$y),H$E._addCombineRenderObj(H$O),H$O=H$d=null,H$y=-1,H$E._addCombineRenderObj(H$H))}else H$E._addCombineRenderObj(H$H);H$U=!0}else H$d&&(H$f.getRenderQueue(H$O._material.renderQueue)._addRenderElement(H$O),H$O=H$d=null,H$y=-1),H$Z++,H$U=!1;else H$X=this._prepareDynamicBatchCombineElements[H$l-1],H$E._addMaterialToRenderElementOffset(H$E.combineRenderElementsCount),H$K=H$X._material,H$E._addCombineMaterial(H$K),H$E._addCombineRenderObj(H$X),H$U=!0,H$K!==(H$L=H$H._material)?(H$d=H$L,H$y=H$E.combineRenderElementsCount,H$O=H$H):H$E._addCombineRenderObj(H$H),H$K=H$L}H$d&&(H$f.getRenderQueue(H$O._material.renderQueue)._addRenderElement(H$O),H$O=H$d=null,H$y=-1),this._prepareDynamicBatchCombineElements.length=0},H$f._clearRenderElements=function(){for(var H$f in this._dynamicBatches)this._dynamicBatches[H$f]._clearRenderElements()},H$f._addToRenderQueue=function(H$f,H$K,H$Y,H$X){for(var H$L in this._dynamicBatches){var H$H=this._dynamicBatches[H$L];0<H$H.combineRenderElementsCount&&H$H._addToRenderQueue(H$f,H$K,H$Y,H$X)}},H$f.dispose=function(){this._dynamicBatches=null},H$z._sortPrepareDynamicBatch=function(H$f,H$K){return H$f._mainSortID-H$K._mainSortID},H$z}(),H$Yf=function(){function H$f(){}return H$l(H$f,"laya.d3.graphics.FrustumCulling"),H$f.renderShadowObjectCulling=function(H$f,H$K,H$Y,H$X,H$L){var H$H=0,H$E=0,H$d=0,H$O=0;for(H$H=0,H$d=H$Y.length;H$H<H$d;H$H++){var H$i=H$Y[H$H];H$i&&H$i._clearRenderElements()}var H$U,H$Z,H$y,H$l=H$f._cullingRenders;if(1<H$L){for(H$H=0,H$d=H$f._cullingRendersLength;H$H<H$d;H$H++)if((H$U=H$l[H$H]).castShadow&&H$T.isVisible(H$U._owner.layer.mask)&&H$U.enable)for(var H$B=1,H$$=H$K.length;H$B<H$$;H$B++)if(H$Z=H$Y[H$B-1],0!==H$K[H$B].containsBoundSphere(H$U.boundingSphere))for(H$E=0,H$O=(H$y=H$U._renderElements).length;H$E<H$O;H$E++)H$Z._addRenderElement(H$y[H$E])}else for(H$H=0,H$d=H$f._cullingRendersLength;H$H<H$d;H$H++)if((H$U=H$l[H$H]).castShadow&&H$T.isVisible(H$U._owner.layer.mask)&&H$U.enable&&0!==H$K[0].containsBoundSphere(H$U.boundingSphere))for(H$U._renderUpdate(H$X),H$Z=H$Y[0],H$E=0,H$O=(H$y=H$U._renderElements).length;H$E<H$O;H$E++)H$Z._addRenderElement(H$y[H$E])},H$f.renderShadowObjectCullingOctree=function(H$f,H$K,H$Y,H$X,H$L){for(var H$H=0,H$E=H$Y.length;H$H<H$E;H$H++){var H$d=H$Y[H$H];H$d&&H$d._clearRenderElements()}1<H$L?H$f.treeRoot.cullingShadowObjects(H$K,H$Y,!0,0,H$f):H$f.treeRoot.cullingShadowObjectsOnePSSM(H$K[0],H$Y,H$X,!0,0,H$f)},H$f.renderObjectCulling=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=0,H$d=0,H$O=0,H$i=0,H$U=H$K._quenes,H$Z=H$K._dynamicBatchManager,H$y=H$K._cullingRenders;for(H$E=0,H$d=H$U.length;H$E<H$d;H$E++){var H$l=H$U[H$E];H$l&&H$l._clearRenderElements()}var H$B=H$Xf._staticBatchManagers;for(H$E=0,H$d=H$B.length;H$E<H$d;H$E++)H$B[H$E]._clearRenderElements();H$Z._clearRenderElements();var H$$=H$Y.transform.position;for(H$E=0,H$d=H$K._cullingRendersLength;H$E<H$d;H$E++){var H$h=H$y[H$E];if(H$T.isVisible(H$h._owner.layer.mask)&&H$h.enable&&0!==H$f.containsBoundSphere(H$h.boundingSphere)&&H$h._renderUpdate(H$H)){H$h._distanceForSort=H$EK.distance(H$h.boundingSphere.center,H$$)+H$h.sortingFudge;var H$A=H$h._renderElements;for(H$O=0,H$i=H$A.length;H$O<H$i;H$O++){var H$x=H$A[H$O],H$S=H$x._staticBatch;if(H$S&&H$S._material===H$x._material)H$S._addBatchRenderElement(H$x);else{var H$z=H$x.renderObj;H$z.triangleCount<10&&1===H$z._vertexBufferCount&&H$z._getIndexBuffer()&&H$x._material.renderQueue<2&&H$x._canDynamicBatch&&!H$h._owner.isStatic?H$Z._addPrepareRenderElement(H$x):H$K.getRenderQueue(H$x._material.renderQueue)._addRenderElement(H$x)}}}}for(H$E=0,H$d=H$B.length;H$E<H$d;H$E++)H$B[H$E]._addToRenderQueue(H$K,H$X,H$L,H$H);H$Z._finishCombineDynamicBatch(H$K),H$Z._addToRenderQueue(H$K,H$X,H$L,H$H)},H$f.renderObjectCullingOctree=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=0,H$d=0,H$O=H$K._quenes,H$i=H$K._dynamicBatchManager;for(H$E=0,H$d=H$O.length;H$E<H$d;H$E++){var H$U=H$O[H$E];H$U&&H$U._clearRenderElements()}var H$Z=H$Xf._staticBatchManagers;for(H$E=0,H$d=H$Z.length;H$E<H$d;H$E++)H$Z[H$E]._clearRenderElements();for(H$i._clearRenderElements(),H$K._cullingRenders.length=0,H$K.treeRoot.cullingObjects(H$f,!0,0,H$Y.transform.position,H$H),H$E=0,H$d=H$Z.length;H$E<H$d;H$E++)H$Z[H$E]._addToRenderQueue(H$K,H$X,H$L,H$H);H$i._finishCombineDynamicBatch(H$K),H$i._addToRenderQueue(H$K,H$X,H$L,H$H)},H$f.renderObjectCullingNoBoundFrustum=function(H$f,H$K,H$Y,H$X,H$L){var H$H=0,H$E=0,H$d=0,H$O=0,H$i=H$f._quenes,H$U=H$f._dynamicBatchManager,H$Z=H$f._cullingRenders;for(H$H=0,H$E=H$i.length;H$H<H$E;H$H++){var H$y=H$i[H$H];H$y&&H$y._clearRenderElements()}var H$l=H$Xf._staticBatchManagers;for(H$H=0,H$E=H$l.length;H$H<H$E;H$H++)H$l[H$H]._clearRenderElements();H$U._clearRenderElements();var H$B=H$K.transform.position;for(H$H=0,H$E=H$f._cullingRendersLength;H$H<H$E;H$H++){var H$$=H$Z[H$H];if(H$T.isVisible(H$$._owner.layer.mask)&&H$$.enable){H$$._renderUpdate(H$L),H$$._distanceForSort=H$EK.distance(H$$.boundingSphere.center,H$B)+H$$.sortingFudge;var H$h=H$$._renderElements;for(H$d=0,H$O=H$h.length;H$d<H$O;H$d++){var H$A=H$h[H$d],H$x=H$A._staticBatch;if(H$x&&H$x._material===H$A._material)H$x._addBatchRenderElement(H$A);else{var H$S=H$A.renderObj;H$S.triangleCount<10&&1===H$S._vertexBufferCount&&H$S._getIndexBuffer()&&H$A._material.renderQueue<2&&H$A._canDynamicBatch&&!H$$._owner.isStatic?H$U._addPrepareRenderElement(H$A):H$f.getRenderQueue(H$A._material.renderQueue)._addRenderElement(H$A)}}}}for(H$H=0,H$E=H$l.length;H$H<H$E;H$H++)H$l[H$H]._addToRenderQueue(H$f,H$Y,H$X,H$L);H$U._finishCombineDynamicBatch(H$f),H$U._addToRenderQueue(H$f,H$Y,H$X,H$L)},H$f}(),H$Xf=function(){function H$H(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}H$l(H$H,"laya.d3.graphics.StaticBatchManager");var H$f=H$H.prototype;return H$f._finishInit=function(){for(var H$f in this._staticBatches)this._staticBatches[H$f]._finishInit();this._initBatchRenderElements.length=0},H$f._initStaticBatchs=function(H$f){throw new Error("StaticBatchManager:must override this function.")},H$f._addInitBatchSprite=function(H$f){for(var H$K=H$f._render._renderElements,H$Y=0,H$X=H$K.length;H$Y<H$X;H$Y++)this._initBatchRenderElements.push(H$K[H$Y])},H$f._clearRenderElements=function(){for(var H$f in this._staticBatches)this._staticBatches[H$f]._clearRenderElements()},H$f._garbageCollection=function(H$f){var H$K=H$f._staticBatch,H$Y=H$K._initBatchRenderElements,H$X=H$Y.indexOf(H$f);H$Y.splice(H$X,1),0===H$Y.length&&(H$K.dispose(),delete this._staticBatches[H$K._key])},H$f._addToRenderQueue=function(H$f,H$K,H$Y,H$X){for(var H$L in this._staticBatches){var H$H=this._staticBatches[H$L];0<H$H._batchRenderElements.length&&H$H._updateToRenderQueue(H$f,H$X)}},H$f.dispose=function(){this._staticBatches=null},H$H._addToStaticBatchQueue=function(H$f){H$f instanceof laya.d3.core.RenderableSprite3D&&H$f._addToInitStaticBatchManager();for(var H$K=0,H$Y=H$f.numChildren;H$K<H$Y;H$K++)H$H._addToStaticBatchQueue(H$f._childs[H$K])},H$H.combine=function(H$f,H$K){var H$Y,H$X=0,H$L=0;if(H$K)for(H$X=0,H$L=H$K.length;H$X<H$L;H$X++){H$K[H$X]._addToInitStaticBatchManager()}else H$f&&H$H._addToStaticBatchQueue(H$f);for(H$X=0,H$L=H$H._staticBatchManagers.length;H$X<H$L;H$X++)(H$Y=H$H._staticBatchManagers[H$X])._initStaticBatchs(H$f),H$Y._finishInit()},H$H._staticBatchManagers=[],H$H}(),H$Lf=function(){function H$f(H$f,H$K,H$Y){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=H$f,this._manager=H$K,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=H$Y}H$l(H$f,"laya.d3.graphics.StaticBatch");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),H$K._binarySearch=function(H$f){for(var H$K=0,H$Y=this._batchRenderElements.length-1,H$X=0;H$K<=H$Y;)H$X=Math.floor((H$K+H$Y)/2),this._compareBatchRenderElement(this._batchRenderElements[H$X],H$f)?H$Y=H$X-1:H$K=H$X+1;return H$K},H$K._compareBatchRenderElement=function(H$f,H$K){throw new Error("StaticBatch:must override this function.")},H$K._getVertexDecLightMap=function(H$f){return H$f===H$qf.vertexDeclaration?H$Tf.vertexDeclaration:H$f===H$Wf.vertexDeclaration?H$tf.vertexDeclaration:H$f===H$nf.vertexDeclaration?H$zf.vertexDeclaration:H$f===H$Mf.vertexDeclaration?null:H$f===H$$f.vertexDeclaration?H$hf.vertexDeclaration:H$f===H$bf.vertexDeclaration?H$ef.vertexDeclaration:H$f===H$Rf.vertexDeclaration?H$Vf.vertexDeclaration:H$f===H$Pf.vertexDeclaration?H$kf.vertexDeclaration:H$f===H$Wf.vertexDeclaration?H$tf.vertexDeclaration:H$f===H$_f.vertexDeclaration?H$Cf.vertexDeclaration:H$f===H$Mf.vertexDeclaration?null:H$f===H$$f.vertexDeclaration?H$hf.vertexDeclaration:H$f===H$Jf.vertexDeclaration?H$Qf.vertexDeclaration:H$f===H$Rf.vertexDeclaration?H$Vf.vertexDeclaration:H$f},H$K._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},H$K._addBatchRenderElement=function(H$f){this._batchRenderElements.splice(this._binarySearch(H$f),0,H$f)},H$K._updateToRenderQueue=function(H$f,H$K){this._combineRenderElementPoolIndex=0,this._getRenderElement(H$f.getRenderQueue(this._material.renderQueue)._renderElements,H$f,H$K)},H$K._getRenderElement=function(H$f,H$K,H$Y){throw new Error("StaticBatch:must override this function.")},H$K._finishInit=function(){throw new Error("StaticBatch:must override this function.")},H$K._clearRenderElements=function(){this._batchRenderElements.length=0},H$K.dispose=function(){},H$K._getVertexBuffer=function(H$f){return void 0===H$f&&(H$f=0),null},H$K._getIndexBuffer=function(){return null},H$K._beforeRender=function(H$f){return!0},H$K._render=function(H$f){},H$K._getVertexBuffers=function(){return null},H$B(0,H$K,"_vertexBufferCount",function(){return 1}),H$B(0,H$K,"triangleCount",function(){return 0}),H$f.combine=function(H$f){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),H$Xf.combine(H$f)},H$f.maxBatchVertexCount=65535,H$f}(),H$Hf=function(){function H$E(H$f,H$K){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++H$E._uniqueIDCounter,this._id>H$E.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",H$E.maxVertexDeclaration);this._shaderValues=new H$yK,this._vertexElementsDic={},this._vertexStride=H$f,this._vertexElements=H$K;for(var H$Y=0;H$Y<H$K.length;H$Y++){var H$X=H$K[H$Y],H$L=H$X.elementUsage;this._vertexElementsDic[H$L]=H$X;var H$H=[H$E._getTypeSize(H$X.elementFormat)/4,5126,!1,this._vertexStride,H$X.offset];switch(this._shaderValues.setValue(H$L,H$H),H$L){case 1:this._addShaderDefine(H$IK.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(H$IK.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(H$IK.SHADERDEFINE_UV1)}}}H$l(H$E,"laya.d3.graphics.VertexDeclaration");var H$f=H$E.prototype;return H$f._addShaderDefine=function(H$f){this._shaderDefineValue|=H$f},H$f._removeShaderDefine=function(H$f){this._shaderDefineValue&=~H$f},H$f.getVertexElements=function(){return this._vertexElements.slice()},H$f.getVertexElementByUsage=function(H$f){return this._vertexElementsDic[H$f]},H$f.unBinding=function(){},H$B(0,H$f,"shaderDefineValue",function(){return this._shaderDefineValue}),H$B(0,H$f,"id",function(){return this._id}),H$B(0,H$f,"vertexStride",function(){return this._vertexStride}),H$B(0,H$f,"shaderValues",function(){return this._shaderValues}),H$E._getTypeSize=function(H$f){switch(H$f){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},H$E.getVertexStride=function(H$f){for(var H$K=0,H$Y=0;H$Y<H$f.Length;H$Y++){var H$X=H$f[H$Y],H$L=H$X.offset+H$E._getTypeSize(H$X.elementFormat);H$K<H$L&&(H$K=H$L)}return H$K},H$E._maxVertexDeclarationBit=1e3,H$E._uniqueIDCounter=1,H$Z(H$E,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),H$E}(),H$Ef=function(){function H$f(H$f,H$K,H$Y){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=H$f,this.elementFormat=H$K,this.elementUsage=H$Y}return H$l(H$f,"laya.d3.graphics.VertexElement"),H$f}(),H$df=(function(){function H$f(){}H$l(H$f,"laya.d3.graphics.VertexElementFormat"),H$f.Single="single",H$f.Vector2="vector2",H$f.Vector3="vector3",H$f.Vector4="vector4",H$f.Color="color",H$f.Byte4="byte4",H$f.Short2="short2",H$f.Short4="short4",H$f.NormalizedShort2="normalizedshort2",H$f.NormalizedShort4="normalizedshort4",H$f.HalfVector2="halfvector2",H$f.HalfVector4="halfvector4"}(),function(){function H$f(){}H$l(H$f,"laya.d3.graphics.VertexElementUsage"),H$f.POSITION0=0,H$f.COLOR0=1,H$f.TEXTURECOORDINATE0=2,H$f.NORMAL0=3,H$f.BINORMAL0=4,H$f.TANGENT0=5,H$f.BLENDINDICES0=6,H$f.BLENDWEIGHT0=7,H$f.DEPTH0=8,H$f.FOG0=9,H$f.POINTSIZE0=10,H$f.SAMPLE0=11,H$f.TESSELLATEFACTOR0=12,H$f.COLOR1=13,H$f.NEXTTEXTURECOORDINATE0=14,H$f.TEXTURECOORDINATE1=15,H$f.NEXTTEXTURECOORDINATE1=16,H$f.CORNERTEXTURECOORDINATE0=17,H$f.VELOCITY0=18,H$f.STARTCOLOR0=19,H$f.STARTSIZE=20,H$f.AGEADDSCALE0=21,H$f.STARTROTATION=22,H$f.ENDCOLOR0=23,H$f.STARTLIFETIME=24,H$f.TIME0=33,H$f.SHAPEPOSITIONSTARTLIFETIME=30,H$f.DIRECTIONTIME=32,H$f.SIZEROTATION0=27,H$f.RADIUS0=28,H$f.RADIAN0=29,H$f.STARTSPEED=31,H$f.RANDOM0=34,H$f.RANDOM1=35,H$f.SIMULATIONWORLDPOSTION=36,H$f.SIMULATIONWORLDROTATION=37,H$f.TEXTURECOORDINATE0X=38,H$f.TEXTURECOORDINATE0X1=39,H$f.TEXTURECOORDINATE0Y=40,H$f.OFFSETVECTOR=41}(),function(){function H$f(H$f,H$K,H$Y){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=H$f,this._textureCoordinate0=H$K,this._time=H$Y}H$l(H$f,"laya.d3.graphics.VertexGlitter");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate0}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"time",function(){return this._time}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(24,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector2",2),new H$Ef(20,"single",33)])}])}(),function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=H$f,this._position=H$K,this._velocity=H$Y,this._startColor=H$X,this._endColor=H$L,this._sizeRotation=H$H,this._radius=H$E,this._radian=H$d,this._ageAddScale=H$O,this._time=H$i}H$l(H$f,"laya.d3.graphics.VertexParticle");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"endColor",function(){return this._endColor}),H$B(0,H$K,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H$B(0,H$K,"sizeRotation",function(){return this._sizeRotation}),H$B(0,H$K,"velocity",function(){return this._velocity}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"startColor",function(){return this._startColor}),H$B(0,H$K,"radius",function(){return this._radius}),H$B(0,H$K,"radian",function(){return this._radian}),H$B(0,H$K,"ageAddScale",function(){return this._ageAddScale}),H$B(0,H$K,"time",function(){return this._time}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(116,[new H$Ef(0,"vector4",17),new H$Ef(16,"vector3",0),new H$Ef(28,"vector3",18),new H$Ef(40,"vector4",19),new H$Ef(56,"vector4",23),new H$Ef(72,"vector3",27),new H$Ef(84,"vector2",28),new H$Ef(92,"vector4",29),new H$Ef(108,"single",24),new H$Ef(112,"single",33)])}])}(),function(){function H$f(H$f){this._position=null,this._position=H$f}H$l(H$f,"laya.d3.graphics.VertexPosition");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(12,[new H$Ef(0,"vector3",0)])}]),H$f}()),H$Of=function(){function H$f(H$f,H$K){this._position=null,this._normal=null,this._position=H$f,this._normal=H$K}H$l(H$f,"laya.d3.graphics.VertexPositionNormal");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(24,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3)])}]),H$f}(),H$if=function(){function H$f(H$f,H$K,H$Y){this._position=null,this._normal=null,this._color=null,this._position=H$f,this._normal=H$K,this._color=H$Y}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColor");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(40,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1)])}]),H$f}(),H$Uf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._blendIndex=H$X,this._blendWeight=H$L}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorSkin");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(72,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector4",7),new H$Ef(56,"vector4",6)])}]),H$f}(),H$Zf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._tangent=H$X,this._blendIndex=H$L,this._blendWeight=H$H}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(88,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector4",7),new H$Ef(56,"vector4",6),new H$Ef(72,"vector4",5)])}]),H$f}(),H$yf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._tangent=H$X,this._blendIndex=H$L,this._blendWeight=H$H}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(84,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector4",7),new H$Ef(56,"vector4",6),new H$Ef(72,"vector3",5)])}]),H$f}(),H$lf=function(){function H$f(H$f,H$K,H$Y,H$X){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._tangent=H$X}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorSTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(56,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector4",5)])}]),H$f}(),H$Bf=function(){function H$f(H$f,H$K,H$Y,H$X){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._tangent=H$X}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(52,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector3",5)])}]),H$f}(),H$$f=function(){function H$f(H$f,H$K,H$Y,H$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate=H$X}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTexture");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(48,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2)])}]),H$f}(),H$hf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate0=H$X,this._textureCoordinate1=H$L}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(56,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector2",15)])}]),H$f}(),H$Af=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate0=H$X,this._textureCoordinate1=H$L,this._blendIndex=H$H,this._blendWeight=H$E}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(88,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector2",15),new H$Ef(56,"vector4",7),new H$Ef(72,"vector4",6)])}]),H$f}(),H$xf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate0=H$X,this._textureCoordinate1=H$L,this._tangent=H$H,this._blendIndex=H$E,this._blendWeight=H$d}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(104,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector2",15),new H$Ef(56,"vector4",7),new H$Ef(72,"vector4",6),new H$Ef(88,"vector4",5)])}]),H$f}(),H$Sf=function(){function H$f(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$K.VertexPositionNormalColorTexture0SkinTangent=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate0=H$X,this._textureCoordinate1=H$L,this._tangent=H$H,this._blendIndex=H$E,this._blendWeight=H$d},H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(100,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector2",15),new H$Ef(56,"vector4",7),new H$Ef(72,"vector4",6),new H$Ef(88,"vector3",5)])}]),H$f}(),H$zf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate0=H$X,this._textureCoordinate1=H$L,this._tangent=H$H}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(72,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector2",15),new H$Ef(56,"vector4",5)])}]),H$f}(),H$Cf=function(){function H$f(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$K.VertexPositionNormalColorTexture0Tangent=function(H$f,H$K,H$Y,H$X,H$L,H$H){this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate0=H$X,this._textureCoordinate1=H$L,this._tangent=H$H},H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(68,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector2",15),new H$Ef(56,"vector3",5)])}]),H$f}(),H$sf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate=H$X,this._blendIndex=H$L,this._blendWeight=H$H}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(80,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector4",7),new H$Ef(64,"vector4",6)])}]),H$f}(),H$af=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate=H$X,this._tangent=H$L,this._blendIndex=H$H,this._blendWeight=H$E}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(96,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector4",7),new H$Ef(64,"vector4",6),new H$Ef(80,"vector4",5)])}]),H$f}(),H$If=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate=H$X,this._tangent=H$L,this._blendIndex=H$H,this._blendWeight=H$E}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(92,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector4",7),new H$Ef(64,"vector4",6),new H$Ef(80,"vector3",5)])}]),H$f}(),H$nf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate=H$X,this._tangent=H$L}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(64,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector4",5)])}]),H$f}(),H$_f=function(){function H$f(H$f,H$K,H$Y,H$X,H$L){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._color=H$Y,this._textureCoordinate=H$X,this._tangent=H$L}H$l(H$f,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"color",function(){return this._color}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(60,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",1),new H$Ef(40,"vector2",2),new H$Ef(48,"vector3",5)])}]),H$f}(),H$Gf=function(){function H$f(H$f,H$K,H$Y){this._position=null,this._normal=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._tangent=H$Y}H$l(H$f,"laya.d3.graphics.VertexPositionNormalSTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(40,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector4",5)])}]),H$f}(),H$mf=function(){function H$f(H$f,H$K,H$Y){this._position=null,this._normal=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._tangent=H$Y}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(36,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector3",5)])}]),H$f}(),H$Rf=function(){function H$f(H$f,H$K,H$Y){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H$f,this._normal=H$K,this._textureCoordinate=H$Y}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTexture");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(32,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2)])}]),H$f}(),H$Vf=function(){function H$f(H$f,H$K,H$Y,H$X){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=H$f,this._normal=H$K,this._textureCoordinate0=H$Y,this._textureCoordinate1=H$X}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(40,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector2",15)])}]),H$f}(),H$tf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=H$f,this._normal=H$K,this._textureCoordinate0=H$Y,this._textureCoordinate1=H$X,this._blendIndex=H$L,this._blendWeight=H$H}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(72,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector2",15),new H$Ef(40,"vector4",7),new H$Ef(56,"vector4",6)])}]),H$f}(),H$Tf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._textureCoordinate0=H$Y,this._textureCoordinate1=H$X,this._tangent=H$L,this._blendIndex=H$H,this._blendWeight=H$E}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(88,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector2",15),new H$Ef(40,"vector4",7),new H$Ef(56,"vector4",6),new H$Ef(72,"vector4",5)])}]),H$f}(),H$kf=function(){function H$f(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$K.VertexPositionNormalTexture0SkinTangent=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){this._position=H$f,this._normal=H$K,this._textureCoordinate0=H$Y,this._textureCoordinate1=H$X,this._tangent=H$L,this._blendIndex=H$H,this._blendWeight=H$E},H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(84,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector2",15),new H$Ef(40,"vector4",7),new H$Ef(56,"vector4",6),new H$Ef(72,"vector3",5)])}]),H$f}(),H$ef=function(){function H$f(H$f,H$K,H$Y,H$X,H$L){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._textureCoordinate0=H$Y,this._textureCoordinate1=H$X,this._tangent=H$L}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(56,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector2",15),new H$Ef(40,"vector4",5)])}]),H$f}(),H$Qf=function(){function H$f(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$K.VertexPositionNormalTexture0Tangent=function(H$f,H$K,H$Y,H$X,H$L){this._position=H$f,this._normal=H$K,this._textureCoordinate0=H$Y,this._textureCoordinate1=H$X,this._tangent=H$L},H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(52,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector2",15),new H$Ef(40,"vector3",5)])}]),H$f}(),H$Wf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=H$f,this._normal=H$K,this._textureCoordinate=H$Y,this._blendIndex=H$X,this._blendWeight=H$L}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTextureSkin");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(64,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector4",7),new H$Ef(48,"vector4",6)])}]),H$f}(),H$qf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._textureCoordinate=H$Y,this._tangent=H$X,this._blendIndex=H$L,this._blendWeight=H$H}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(80,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector4",7),new H$Ef(48,"vector4",6),new H$Ef(64,"vector4",5)])}]),H$f}(),H$Pf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._textureCoordinate=H$Y,this._tangent=H$X,this._blendIndex=H$L,this._blendWeight=H$H}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(76,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector4",7),new H$Ef(48,"vector4",6),new H$Ef(64,"vector3",5)])}]),H$f}(),H$bf=function(){function H$f(H$f,H$K,H$Y,H$X){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._textureCoordinate=H$Y,this._tangent=H$X}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(48,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector4",5)])}]),H$f}(),H$Jf=function(){function H$f(H$f,H$K,H$Y,H$X){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=H$f,this._normal=H$K,this._textureCoordinate=H$Y,this._tangent=H$X}H$l(H$f,"laya.d3.graphics.VertexPositionNormalTextureTangent");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(44,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector3",5)])}]),H$f}(),H$Mf=function(){function H$f(H$f,H$K,H$Y){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H$f,this._normal=H$K,this._textureCoordinate=H$Y}H$l(H$f,"laya.d3.graphics.VertexPositionNTBTexture");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(56,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector3",5),new H$Ef(36,"vector3",4),new H$Ef(48,"vector2",2)])}]),H$f}(),H$wf=function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=H$f,this._normal=H$K,this._textureCoordinate0=H$X,this._textureCoordinate1=H$L,this._tangent=H$H,H$Y=H$Y,this._blendIndex=H$E,this._blendWeight=H$d}H$l(H$f,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"tangent",function(){return this._tangent}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(0,H$K,"textureCoordinate1",function(){return this._textureCoordinate1}),H$B(0,H$K,"blendIndex",function(){return this._blendIndex}),H$B(0,H$K,"blendWeight",function(){return this._blendWeight}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(96,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector3",5),new H$Ef(36,"vector3",4),new H$Ef(48,"vector2",2),new H$Ef(56,"vector2",15),new H$Ef(64,"vector4",7),new H$Ef(80,"vector4",6)])}]),H$f}(),H$rf=function(){function H$f(H$f,H$K,H$Y){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=H$f,this._normal=H$K,this._textureCoordinate=H$Y}H$l(H$f,"laya.d3.graphics.VertexPositionNTBTextureSkin");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"textureCoordinate",function(){return this._textureCoordinate}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(88,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector3",5),new H$Ef(36,"vector3",4),new H$Ef(48,"vector2",2),new H$Ef(56,"vector4",7),new H$Ef(72,"vector4",6)])}]),H$f}(),H$vf=(function(){function H$f(H$f,H$K,H$Y,H$X){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=H$f,this._normal=H$K,this._textureCoord0=H$Y,this._textureCoord1=H$X}H$l(H$f,"laya.d3.graphics.VertexPositionTerrain");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"normal",function(){return this._normal}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"textureCoord0",function(){return this._textureCoord0}),H$B(0,H$K,"textureCoord1",function(){return this._textureCoord1}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(40,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector3",3),new H$Ef(24,"vector2",2),new H$Ef(32,"vector2",15)])}])}(),function(){function H$f(H$f,H$K){this._position=null,this._textureCoordinate0=null,this._position=H$f,this._textureCoordinate0=H$K}H$l(H$f,"laya.d3.graphics.VertexPositionTexture0");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"position",function(){return this._position}),H$B(0,H$K,"textureCoordinate0",function(){return this._textureCoordinate0}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(20,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector2",2)])}]),H$f}()),H$jf=(function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$Z,H$y,H$l){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=H$f,this._positionStartLifeTime=H$K,this._velocity=H$Y,this._startColor=H$X,this._startSize=H$L,this._startRotation0=H$H,this._startRotation1=H$E,this._startRotation2=H$d,this._startLifeTime=H$O,this._time=H$i,this._startSpeed=H$U,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=H$l}H$l(H$f,"laya.d3.graphics.VertexShurikenParticleBillboard");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H$B(0,H$K,"random1",function(){return this._randoms1}),H$B(0,H$K,"startRotation2",function(){return this._startRotation2}),H$B(0,H$K,"positionStartLifeTime",function(){return this._positionStartLifeTime}),H$B(0,H$K,"velocity",function(){return this._velocity}),H$B(0,H$K,"random0",function(){return this._randoms0}),H$B(0,H$K,"startSize",function(){return this._startSize}),H$B(0,H$K,"startColor",function(){return this._startColor}),H$B(0,H$K,"startRotation0",function(){return this._startRotation0}),H$B(0,H$K,"startRotation1",function(){return this._startRotation1}),H$B(0,H$K,"startLifeTime",function(){return this._startLifeTime}),H$B(0,H$K,"time",function(){return this._time}),H$B(0,H$K,"startSpeed",function(){return this._startSpeed}),H$B(0,H$K,"simulationWorldPostion",function(){return this._simulationWorldPostion}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(152,[new H$Ef(0,"vector4",17),new H$Ef(16,"vector4",30),new H$Ef(32,"vector4",32),new H$Ef(48,"vector4",19),new H$Ef(64,"vector3",20),new H$Ef(76,"vector3",22),new H$Ef(88,"single",31),new H$Ef(92,"vector4",34),new H$Ef(108,"vector4",35),new H$Ef(124,"vector3",36),new H$Ef(136,"vector4",37)])}])}(),function(){function H$f(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$Z,H$y,H$l){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=H$f,this._positionStartLifeTime=H$K,this._velocity=H$Y,this._startColor=H$X,this._startSize=H$L,this._startRotation0=H$H,this._startRotation1=H$E,this._startRotation2=H$d,this._startLifeTime=H$O,this._time=H$i,this._startSpeed=H$U,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=H$l}H$l(H$f,"laya.d3.graphics.VertexShurikenParticleMesh");var H$K=H$f.prototype;H$C.imps(H$K,{"laya.d3.graphics.IVertex":!0}),H$B(0,H$K,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),H$B(0,H$K,"velocity",function(){return this._velocity}),H$B(0,H$K,"position",function(){return this._positionStartLifeTime}),H$B(0,H$K,"random0",function(){return this._randoms0}),H$B(0,H$K,"startSize",function(){return this._startSize}),H$B(0,H$K,"startColor",function(){return this._startColor}),H$B(0,H$K,"startRotation0",function(){return this._startRotation0}),H$B(0,H$K,"startRotation1",function(){return this._startRotation1}),H$B(0,H$K,"random1",function(){return this._randoms1}),H$B(0,H$K,"startRotation2",function(){return this._startRotation2}),H$B(0,H$K,"startLifeTime",function(){return this._startLifeTime}),H$B(0,H$K,"time",function(){return this._time}),H$B(0,H$K,"startSpeed",function(){return this._startSpeed}),H$B(0,H$K,"simulationWorldPostion",function(){return this._simulationWorldPostion}),H$B(0,H$K,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$B(1,H$f,"vertexDeclaration",function(){return H$f._vertexDeclaration}),H$Z(H$f,["_vertexDeclaration",function(){return this._vertexDeclaration=new H$Hf(172,[new H$Ef(0,"vector3",0),new H$Ef(12,"vector4",1),new H$Ef(28,"vector2",2),new H$Ef(36,"vector4",30),new H$Ef(52,"vector4",32),new H$Ef(68,"vector4",19),new H$Ef(84,"vector3",20),new H$Ef(96,"vector3",22),new H$Ef(108,"single",31),new H$Ef(112,"vector4",34),new H$Ef(128,"vector4",35),new H$Ef(144,"vector3",36),new H$Ef(156,"vector4",37)])}])}(),function(){function H$S(H$f,H$K,H$Y,H$X,H$L,H$H){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=H$Y,this._materials=H$X,this._subMeshes=H$L,this._materialMap=H$H,this._version=H$K,this._onLoaded(H$f)}H$l(H$S,"laya.d3.loaders.LoadModelV01");var H$f=H$S.prototype;return H$f._onLoaded=function(H$f){this._readData=H$f,this.READ_BLOCK();for(var H$K=0;H$K<this._BLOCK.count;H$K++){var H$Y=this._readData.getUint16(),H$X=this._strings[H$Y],H$L=this["READ_"+H$X];if(null==H$L)throw new Error("model file err,no this function:"+H$Y+" "+H$X);if(!H$L.call(this))break}return this._mesh},H$f.onError=function(){},H$f._readString=function(){return this._strings[this._readData.getUint16()]},H$f.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},H$f.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},H$f.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var H$f=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var H$K=0;H$K<this._STRINGS.size;H$K++)this._strings[H$K]=this._readData.readUTFString();return this._readData.pos=H$f,!0},H$f.READ_MATERIAL=function(){var H$f=this._readData.getUint16(),H$K=(this._readString(),this._readString());return this._materials[H$f]="null"!==H$K?H$A.getRes(this._materialMap[H$K]):new H$mK,!0},H$f.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var H$f,H$K=this._readData.__getBuffer(),H$Y=0,H$X=this._readData.getUint32(),H$L=this._readData.getUint32(),H$H=(new Float32Array(H$K.slice(H$X+this._DATA.offset,H$X+this._DATA.offset+H$L)),this._readData.getUint32()),H$E=this._readData.getUint32(),H$d=new Float32Array(H$K.slice(H$H+this._DATA.offset,H$H+this._DATA.offset+H$E));for(this.mesh._inverseBindPoses=[],H$Y=0,H$f=H$d.length;H$Y<H$f;H$Y+=16){var H$O=new H$fK(H$d[H$Y+0],H$d[H$Y+1],H$d[H$Y+2],H$d[H$Y+3],H$d[H$Y+4],H$d[H$Y+5],H$d[H$Y+6],H$d[H$Y+7],H$d[H$Y+8],H$d[H$Y+9],H$d[H$Y+10],H$d[H$Y+11],H$d[H$Y+12],H$d[H$Y+13],H$d[H$Y+14],H$d[H$Y+15]);this.mesh._inverseBindPoses.push(H$O)}break;default:throw new Error("LoadModel:unknown version.")}return!0},H$f.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var H$f=this._readString();this._shaderAttributes=H$f.match(H$S._attrReg);var H$K=this._readData.getUint32(),H$Y=this._readData.getUint32(),H$X=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),H$L=this._readData.getUint32(),H$H=this._readData.getUint32(),H$E=this._readData.getUint32(),H$d=this._readData.__getBuffer(),H$O=new H$iK(this._mesh),H$i=this._getVertexDeclaration(),H$U=H$PK.create(H$i,H$L/H$i.vertexStride,35044,!0),H$Z=H$X+this._DATA.offset,H$y=H$d.slice(H$Z,H$Z+H$L);H$U.setData(new Float32Array(H$y));for(var H$l=(H$O._vertexBuffer=H$U).vertexDeclaration.getVertexElements(),H$B=0;H$B<H$l.length;H$B++)H$O._bufferUsage[H$l[H$B].elementUsage]=H$U;var H$$=H$qK.create("ushort",H$Y/2,35044,!0),H$h=H$K+this._DATA.offset,H$A=H$d.slice(H$h,H$h+H$Y);H$$.setData(new Uint16Array(H$A)),H$O._indexBuffer=H$$;var H$x=H$d.slice(H$H+this._DATA.offset,H$H+this._DATA.offset+H$E);return H$O._boneIndicesList[0]=new Uint8Array(H$x),this._subMeshes.push(H$O),!0},H$f.READ_DATAAREA=function(){return!1},H$f._getVertexDeclaration=function(){for(var H$f,H$K=!1,H$Y=!1,H$X=!1,H$L=!1,H$H=!1,H$E=!1,H$d=!1,H$O=!1,H$i=!1,H$U=0;H$U<this._shaderAttributes.length;H$U+=8)switch(this._shaderAttributes[H$U]){case"POSITION":H$K=!0;break;case"NORMAL":H$Y=!0;break;case"COLOR":H$X=!0;break;case"UV":H$L=!0;break;case"UV1":H$H=!0;break;case"BLENDWEIGHT":H$d=!0;break;case"BLENDINDICES":H$O=!0;break;case"TANGENT":H$E=!0;break;case"BINORMAL":H$i=!0}return H$K&&H$Y&&H$X&&H$L&&H$H&&H$d&&H$O&&H$E?H$f=H$Sf.vertexDeclaration:H$K&&H$Y&&H$X&&H$L&&H$H&&H$d&&H$O?H$f=H$Af.vertexDeclaration:H$K&&H$Y&&H$L&&H$H&&H$d&&H$O&&H$E?H$f=H$kf.vertexDeclaration:H$K&&H$Y&&H$L&&H$H&&H$d&&H$O?H$f=H$tf.vertexDeclaration:H$K&&H$Y&&H$X&&H$L&&H$d&&H$O&&H$E?H$f=H$If.vertexDeclaration:H$K&&H$Y&&H$X&&H$L&&H$d&&H$O?H$f=H$sf.vertexDeclaration:H$K&&H$Y&&H$E&&H$i&&H$L&&H$d&&H$O?H$f=H$rf.vertexDeclaration:H$K&&H$Y&&H$L&&H$d&&H$O&&H$E?H$f=H$Pf.vertexDeclaration:H$K&&H$Y&&H$L&&H$d&&H$O?H$f=H$Wf.vertexDeclaration:H$K&&H$Y&&H$X&&H$d&&H$O&&H$E?H$f=H$yf.vertexDeclaration:H$K&&H$Y&&H$X&&H$d&&H$O?H$f=H$Uf.vertexDeclaration:H$K&&H$Y&&H$X&&H$L&&H$H&&H$E?H$f=H$Cf.vertexDeclaration:H$K&&H$Y&&H$X&&H$L&&H$H?H$f=H$hf.vertexDeclaration:H$K&&H$Y&&H$L&&H$H&&H$E?H$f=H$Qf.vertexDeclaration:H$K&&H$Y&&H$L&&H$H?H$f=H$Vf.vertexDeclaration:H$K&&H$Y&&H$X&&H$L&&H$E?H$f=H$_f.vertexDeclaration:H$K&&H$Y&&H$L&&H$E&&H$i?H$f=H$Mf.vertexDeclaration:H$K&&H$Y&&H$X&&H$L?H$f=H$$f.vertexDeclaration:H$K&&H$Y&&H$L&&H$E?H$f=H$Jf.vertexDeclaration:H$K&&H$Y&&H$L?H$f=H$Rf.vertexDeclaration:H$K&&H$Y&&H$X&&H$E?H$f=H$Bf.vertexDeclaration:H$K&&H$Y&&H$X&&(H$f=H$if.vertexDeclaration),H$f},H$B(0,H$f,"mesh",function(){return this._mesh}),H$S._attrReg=new RegExp("(\\w+)|([:,;])","g"),H$S}()),H$cf=function(){function H$a(){}return H$l(H$a,"laya.d3.loaders.LoadModelV02"),H$a.parse=function(H$f,H$K,H$Y,H$X,H$L,H$H){H$a._mesh=H$Y,H$a._materials=H$X,H$a._subMeshes=H$L,H$a._materialMap=H$H,H$a._version=H$K,H$a._readData=H$f,H$a.READ_DATA(),H$a.READ_BLOCK(),H$a.READ_STRINGS();for(var H$E=0,H$d=H$a._BLOCK.count;H$E<H$d;H$E++){H$a._readData.pos=H$a._BLOCK.blockStarts[H$E];var H$O=H$a._readData.getUint16(),H$i=H$a._strings[H$O],H$U=H$a["READ_"+H$i];if(null==H$U)throw new Error("model file err,no this function:"+H$O+" "+H$i);H$U.call()}H$a._strings.length=0,H$a._readData=null,H$a._version=null,H$a._mesh=null,H$a._materials=null,H$a._subMeshes=null,H$a._materialMap=null},H$a._readString=function(){return H$a._strings[H$a._readData.getUint16()]},H$a.READ_DATA=function(){H$a._DATA.offset=H$a._readData.getUint32(),H$a._DATA.size=H$a._readData.getUint32()},H$a.READ_BLOCK=function(){for(var H$f=H$a._BLOCK.count=H$a._readData.getUint16(),H$K=H$a._BLOCK.blockStarts=[],H$Y=H$a._BLOCK.blockLengths=[],H$X=0;H$X<H$f;H$X++)H$K.push(H$a._readData.getUint32()),H$Y.push(H$a._readData.getUint32())},H$a.READ_STRINGS=function(){var H$f=H$a._readData.getUint32(),H$K=H$a._readData.getUint16(),H$Y=H$a._readData.pos;H$a._readData.pos=H$f+H$a._DATA.offset;for(var H$X=0;H$X<H$K;H$X++)H$a._strings[H$X]=H$a._readData.readUTFString();H$a._readData.pos=H$Y},H$a.READ_MATERIAL=function(){H$a._readString(),H$a._readString();var H$f=H$a._readString();return""!==H$f&&H$a._materials.push(H$A.getRes(H$a._materialMap[H$f])),!0},H$a.READ_MESH=function(){H$a._readString();var H$f,H$K=H$a._readData.__getBuffer(),H$Y=0,H$X=H$a._readData.getInt16(),H$L=H$a._DATA.offset;for(H$Y=0;H$Y<H$X;H$Y++){var H$H=H$L+H$a._readData.getUint32(),H$E=H$a._readData.getUint32(),H$d=new Float32Array(H$K.slice(H$H,H$H+H$E)),H$O=H$a._readString().match(H$a._attrReg),H$i=H$a._getVertexDeclaration(H$O),H$U=H$PK.create(H$i,4*H$d.length/H$i.vertexStride,35044,!0);H$U.setData(H$d),H$a._mesh._vertexBuffers.push(H$U)}var H$Z=H$L+H$a._readData.getUint32(),H$y=H$a._readData.getUint32(),H$l=new Uint16Array(H$K.slice(H$Z,H$Z+H$y)),H$B=H$qK.create("ushort",H$y/2,35044,!0);H$B.setData(H$l),H$a._mesh._indexBuffer=H$B;var H$$=H$a._mesh._boneNames=[],H$h=H$a._readData.getUint16();for(H$$.length=H$h,H$Y=0;H$Y<H$h;H$Y++)H$$[H$Y]=H$a._strings[H$a._readData.getUint16()];var H$A=H$a._readData.getUint32(),H$x=H$a._readData.getUint32(),H$S=(new Float32Array(H$K.slice(H$L+H$A,H$L+H$A+H$x)),H$a._readData.getUint32()),H$z=H$a._readData.getUint32(),H$C=new Float32Array(H$K.slice(H$L+H$S,H$L+H$S+H$z));for(H$a._mesh._inverseBindPoses=[],H$Y=0,H$f=H$C.length;H$Y<H$f;H$Y+=16){var H$s=new H$fK(H$C[H$Y+0],H$C[H$Y+1],H$C[H$Y+2],H$C[H$Y+3],H$C[H$Y+4],H$C[H$Y+5],H$C[H$Y+6],H$C[H$Y+7],H$C[H$Y+8],H$C[H$Y+9],H$C[H$Y+10],H$C[H$Y+11],H$C[H$Y+12],H$C[H$Y+13],H$C[H$Y+14],H$C[H$Y+15]);H$a._mesh._inverseBindPoses.push(H$s)}return H$a._mesh._skinnedDatas=new Float32Array(16*H$C.length),!0},H$a.READ_SUBMESH=function(){var H$f=H$a._readData.__getBuffer(),H$K=new H$iK(H$a._mesh),H$Y=H$a._readData.getInt16(),H$X=H$a._readData.getUint32(),H$L=H$a._readData.getUint32();H$K._vertexBuffer=H$a._mesh._vertexBuffers[H$Y],H$K._vertexStart=H$X,H$K._vertexCount=H$L;var H$H=H$a._readData.getUint32(),H$E=H$a._readData.getUint32(),H$d=H$a._mesh._indexBuffer;H$K._indexBuffer=H$d,H$K._indexStart=H$H,H$K._indexCount=H$E,H$K._indices=new Uint16Array(H$d.getData().buffer,2*H$H,H$E);var H$O=H$a._DATA.offset,H$i=H$K._subIndexBufferStart,H$U=H$K._subIndexBufferCount,H$Z=H$K._boneIndicesList,H$y=H$a._readData.getUint16();H$i.length=H$y,H$U.length=H$y,H$Z.length=H$y;for(var H$l=0;H$l<H$y;H$l++){H$i[H$l]=H$a._readData.getUint32(),H$U[H$l]=H$a._readData.getUint32();var H$B=H$a._readData.getUint32(),H$$=H$a._readData.getUint32();H$K._boneIndicesList[H$l]=new Uint8Array(H$f.slice(H$O+H$B,H$O+H$B+H$$))}return H$a._subMeshes.push(H$K),!0},H$a._getVertexDeclaration=function(H$f){for(var H$K,H$Y=!1,H$X=!1,H$L=!1,H$H=!1,H$E=!1,H$d=!1,H$O=!1,H$i=!1,H$U=!1,H$Z=0;H$Z<H$f.length;H$Z++)switch(H$f[H$Z]){case"POSITION":H$Y=!0;break;case"NORMAL":H$X=!0;break;case"COLOR":H$L=!0;break;case"UV":H$H=!0;break;case"UV1":H$E=!0;break;case"BLENDWEIGHT":H$O=!0;break;case"BLENDINDICES":H$i=!0;break;case"TANGENT":H$d=!0;break;case"BINORMAL":H$U=!0}return H$Y&&H$X&&H$L&&H$H&&H$E&&H$O&&H$i&&H$d?H$K=H$Sf.vertexDeclaration:H$Y&&H$X&&H$L&&H$H&&H$E&&H$O&&H$i?H$K=H$Af.vertexDeclaration:H$Y&&H$X&&H$H&&H$E&&H$O&&H$i&&H$d?H$K=H$kf.vertexDeclaration:H$Y&&H$X&&H$H&&H$E&&H$O&&H$i?H$K=H$tf.vertexDeclaration:H$Y&&H$X&&H$L&&H$H&&H$O&&H$i&&H$d?H$K=H$If.vertexDeclaration:H$Y&&H$X&&H$L&&H$H&&H$O&&H$i?H$K=H$sf.vertexDeclaration:H$Y&&H$X&&H$H&&H$O&&H$i&&H$d?H$K=H$Pf.vertexDeclaration:H$Y&&H$X&&H$H&&H$O&&H$i?H$K=H$Wf.vertexDeclaration:H$Y&&H$X&&H$L&&H$O&&H$i&&H$d?H$K=H$yf.vertexDeclaration:H$Y&&H$X&&H$L&&H$O&&H$i?H$K=H$Uf.vertexDeclaration:H$Y&&H$X&&H$L&&H$H&&H$E&&H$d?H$K=H$Cf.vertexDeclaration:H$Y&&H$X&&H$L&&H$H&&H$E?H$K=H$hf.vertexDeclaration:H$Y&&H$X&&H$H&&H$E&&H$d?H$K=H$Qf.vertexDeclaration:H$Y&&H$X&&H$H&&H$E?H$K=H$Vf.vertexDeclaration:H$Y&&H$X&&H$L&&H$H&&H$d?H$K=H$_f.vertexDeclaration:H$Y&&H$X&&H$H&&H$d&&H$U?H$K=H$Mf.vertexDeclaration:H$Y&&H$X&&H$L&&H$H?H$K=H$$f.vertexDeclaration:H$Y&&H$X&&H$H&&H$d?H$K=H$Jf.vertexDeclaration:H$Y&&H$X&&H$H?H$K=H$Rf.vertexDeclaration:H$Y&&H$X&&H$L&&H$d?H$K=H$Bf.vertexDeclaration:H$Y&&H$X&&H$L&&(H$K=H$if.vertexDeclaration),H$K},H$a._attrReg=new RegExp("(\\w+)|([:,;])","g"),H$a._strings=[],H$a._readData=null,H$a._version=null,H$a._mesh=null,H$a._materials=null,H$a._subMeshes=null,H$a._materialMap=null,H$Z(H$a,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H$a}(),H$pf=function(){function H$s(){}return H$l(H$s,"laya.d3.loaders.LoadModelV03"),H$s.parse=function(H$f,H$K,H$Y,H$X,H$L){H$s._mesh=H$Y,H$s._subMeshes=H$X,H$s._materialMap=H$L,H$s._version=H$K,H$s._readData=H$f,H$s.READ_DATA(),H$s.READ_BLOCK(),H$s.READ_STRINGS();for(var H$H=0,H$E=H$s._BLOCK.count;H$H<H$E;H$H++){H$s._readData.pos=H$s._BLOCK.blockStarts[H$H];var H$d=H$s._readData.getUint16(),H$O=H$s._strings[H$d],H$i=H$s["READ_"+H$O];if(null==H$i)throw new Error("model file err,no this function:"+H$d+" "+H$O);H$i.call()}H$s._strings.length=0,H$s._readData=null,H$s._version=null,H$s._mesh=null,H$s._subMeshes=null,H$s._materialMap=null},H$s._readString=function(){return H$s._strings[H$s._readData.getUint16()]},H$s.READ_DATA=function(){H$s._DATA.offset=H$s._readData.getUint32(),H$s._DATA.size=H$s._readData.getUint32()},H$s.READ_BLOCK=function(){for(var H$f=H$s._BLOCK.count=H$s._readData.getUint16(),H$K=H$s._BLOCK.blockStarts=[],H$Y=H$s._BLOCK.blockLengths=[],H$X=0;H$X<H$f;H$X++)H$K.push(H$s._readData.getUint32()),H$Y.push(H$s._readData.getUint32())},H$s.READ_STRINGS=function(){var H$f=H$s._readData.getUint32(),H$K=H$s._readData.getUint16(),H$Y=H$s._readData.pos;H$s._readData.pos=H$f+H$s._DATA.offset;for(var H$X=0;H$X<H$K;H$X++)H$s._strings[H$X]=H$s._readData.readUTFString();H$s._readData.pos=H$Y},H$s.READ_MESH=function(){var H$f,H$K=H$s._readString(),H$Y=H$s._readData.__getBuffer(),H$X=0,H$L=H$s._readData.getInt16(),H$H=H$s._DATA.offset;for(H$X=0;H$X<H$L;H$X++){var H$E,H$d=H$H+H$s._readData.getUint32(),H$O=H$s._readData.getUint32(),H$i=new Float32Array(H$Y.slice(H$d,H$d+H$O)),H$U=H$s._readString();switch(H$s._version){case"LAYAMODEL:03":H$E=H$s._vertexDeclarationMap_Discard[H$U];break;case"LAYAMODEL:0301":H$E=H$s._vertexDeclarationMap[H$U];break;default:throw new Error("LoadModelV03: unknown version.")}if(!H$E)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+H$s._version+"  bufferAttribute="+H$U+"  name="+H$K+"  url="+(H$s._mesh?H$s._mesh.url:"null"));var H$Z=H$PK.create(H$E,4*H$i.length/H$E.vertexStride,35044,!0,H$s._mesh._url+"_"+H$X);H$Z.setData(H$i),H$s._mesh._vertexBuffers.push(H$Z)}var H$y=H$H+H$s._readData.getUint32(),H$l=H$s._readData.getUint32(),H$B=new Uint16Array(H$Y.slice(H$y,H$y+H$l)),H$$=H$qK.create("ushort",H$l/2,35044,!0,H$s._mesh._url);H$$.setData(H$B),H$s._mesh._indexBuffer=H$$;var H$h=H$s._mesh._boneNames=[],H$A=H$s._readData.getUint16();for(H$h.length=H$A,H$X=0;H$X<H$A;H$X++)H$h[H$X]=H$s._strings[H$s._readData.getUint16()];H$s._readData.pos+=8;var H$x=H$s._readData.getUint32(),H$S=H$s._readData.getUint32(),H$z=new Float32Array(H$Y.slice(H$H+H$x,H$H+H$x+H$S));for(H$s._mesh._inverseBindPoses=[],H$X=0,H$f=H$z.length;H$X<H$f;H$X+=16){var H$C=new H$fK(H$z[H$X+0],H$z[H$X+1],H$z[H$X+2],H$z[H$X+3],H$z[H$X+4],H$z[H$X+5],H$z[H$X+6],H$z[H$X+7],H$z[H$X+8],H$z[H$X+9],H$z[H$X+10],H$z[H$X+11],H$z[H$X+12],H$z[H$X+13],H$z[H$X+14],H$z[H$X+15]);H$s._mesh._inverseBindPoses.push(H$C)}return H$s._mesh._skinnedDatas=new Float32Array(16*H$z.length),!0},H$s.READ_SUBMESH=function(){var H$f=H$s._readData.__getBuffer(),H$K=new H$iK(H$s._mesh),H$Y=H$s._readData.getInt16(),H$X=H$s._readData.getUint32(),H$L=H$s._readData.getUint32();H$K._vertexBuffer=H$s._mesh._vertexBuffers[H$Y],H$K._vertexStart=H$X,H$K._vertexCount=H$L;var H$H=H$s._readData.getUint32(),H$E=H$s._readData.getUint32(),H$d=H$s._mesh._indexBuffer;H$K._indexBuffer=H$d,H$K._indexStart=H$H,H$K._indexCount=H$E,H$K._indices=new Uint16Array(H$d.getData().buffer,2*H$H,H$E);var H$O=H$s._DATA.offset,H$i=H$K._subIndexBufferStart,H$U=H$K._subIndexBufferCount,H$Z=H$K._boneIndicesList,H$y=H$s._readData.getUint16();H$i.length=H$y,H$U.length=H$y,H$Z.length=H$y;for(var H$l=0;H$l<H$y;H$l++){H$i[H$l]=H$s._readData.getUint32(),H$U[H$l]=H$s._readData.getUint32();var H$B=H$s._readData.getUint32(),H$$=H$s._readData.getUint32();H$Z[H$l]=new Uint8Array(H$f.slice(H$O+H$B,H$O+H$B+H$$))}return H$s._subMeshes.push(H$K),!0},H$s._strings=[],H$s._readData=null,H$s._version=null,H$s._mesh=null,H$s._subMeshes=null,H$s._materialMap=null,H$Z(H$s,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Sf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$Af.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":H$wf.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$kf.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$tf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$If.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":H$sf.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Pf.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":H$Wf.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":H$yf.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":H$Uf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":H$Cf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":H$hf.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":H$Qf.vertexDeclaration,"POSITION,NORMAL,UV,UV1":H$Vf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":H$_f.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":H$Mf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":H$$f.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":H$Jf.vertexDeclaration,"POSITION,NORMAL,UV":H$Rf.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":H$Bf.vertexDeclaration,"POSITION,NORMAL,COLOR":H$if.vertexDeclaration,"POSITION,NORMAL,TANGENT":H$mf.vertexDeclaration,"POSITION,NORMAL":H$Of.vertexDeclaration,"POSITION,UV":H$vf.vertexDeclaration,POSITION:H$df.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$xf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$Af.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":H$wf.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Tf.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":H$tf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$af.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":H$sf.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":H$qf.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":H$Wf.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":H$Zf.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":H$Uf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":H$zf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":H$hf.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":H$ef.vertexDeclaration,"POSITION,NORMAL,UV,UV1":H$Vf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":H$nf.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":H$Mf.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":H$$f.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":H$bf.vertexDeclaration,"POSITION,NORMAL,UV":H$Rf.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":H$lf.vertexDeclaration,"POSITION,NORMAL,COLOR":H$if.vertexDeclaration,"POSITION,NORMAL,TANGENT":H$Gf.vertexDeclaration,"POSITION,NORMAL":H$Of.vertexDeclaration,"POSITION,UV":H$vf.vertexDeclaration,POSITION:H$df.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H$s}(),H$uf=function(){function H$d(){}return H$l(H$d,"laya.d3.loaders.MeshReader"),H$d.read=function(H$f,H$K,H$Y,H$X,H$L){var H$H=new H$s(H$f);H$H.pos=0;var H$E=H$H.readUTFString();switch(H$E){case"LAYAMODEL:01":case"LAYASKINANI:01":H$d._readVersion01(H$H,H$E,H$K,H$Y,H$X,H$L);break;case"LAYAMODEL:02":H$cf.parse(H$H,H$E,H$K,H$Y,H$X,H$L);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":H$pf.parse(H$H,H$E,H$K,H$X,H$L);break;default:throw new Error("MeshReader: unknown mesh version.")}H$K._setSubMeshes(H$X)},H$d._readVersion01=function(H$f,H$K,H$Y,H$X,H$L,H$H){new H$jf(H$f,H$K,H$Y,H$X,H$L,H$H)},H$d}(),H$Df=function(){function H$f(H$f,H$K){this.min=null,this.max=null,this.min=H$f,this.max=H$K}H$l(H$f,"laya.d3.math.BoundBox");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.getCorners=function(H$f){H$f.length=8;var H$K=this.min.elements,H$Y=this.max.elements,H$X=H$K[0],H$L=H$K[1],H$H=H$K[2],H$E=H$Y[0],H$d=H$Y[1],H$O=H$Y[2];H$f[0]=new H$EK(H$X,H$d,H$O),H$f[1]=new H$EK(H$E,H$d,H$O),H$f[2]=new H$EK(H$E,H$L,H$O),H$f[3]=new H$EK(H$X,H$L,H$O),H$f[4]=new H$EK(H$X,H$d,H$H),H$f[5]=new H$EK(H$E,H$d,H$H),H$f[6]=new H$EK(H$E,H$L,H$H),H$f[7]=new H$EK(H$X,H$L,H$H)},H$K.toDefault=function(){this.min.toDefault(),this.max.toDefault()},H$K.cloneTo=function(H$f){var H$K=H$f;this.min.cloneTo(H$K.min),this.max.cloneTo(H$K.max)},H$K.clone=function(){var H$f=new this.constructor(new H$EK,new H$EK);return this.cloneTo(H$f),H$f},H$f.createfromPoints=function(H$f,H$K){if(null==H$f)throw new Error("points");var H$Y=H$K.min,H$X=H$K.max,H$L=H$Y.elements;H$L[0]=Number.MAX_VALUE,H$L[1]=Number.MAX_VALUE,H$L[2]=Number.MAX_VALUE;var H$H=H$X.elements;H$H[0]=-Number.MAX_VALUE,H$H[1]=-Number.MAX_VALUE,H$H[2]=-Number.MAX_VALUE;for(var H$E=0,H$d=H$f.length;H$E<H$d;++H$E)H$EK.min(H$Y,H$f[H$E],H$Y),H$EK.max(H$X,H$f[H$E],H$X)},H$f.merge=function(H$f,H$K,H$Y){H$EK.min(H$f.min,H$K.min,H$Y.min),H$EK.max(H$f.max,H$K.max,H$Y.max)},H$f}(),H$gf=function(){function H$i(H$f){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=H$f,this._near=new H$KK(new H$EK),this._far=new H$KK(new H$EK),this._left=new H$KK(new H$EK),this._right=new H$KK(new H$EK),this._top=new H$KK(new H$EK),this._bottom=new H$KK(new H$EK),H$i._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}H$l(H$i,"laya.d3.math.BoundFrustum");var H$f=H$i.prototype;return H$f.equalsBoundFrustum=function(H$f){return this._matrix.equalsOtherMatrix(H$f.matrix)},H$f.equalsObj=function(H$f){if(H$f instanceof laya.d3.math.BoundFrustum){var H$K=H$f;return this.equalsBoundFrustum(H$K)}return!1},H$f.getPlane=function(H$f){switch(H$f){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},H$f.getCorners=function(H$f){H$i._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(H$f[0]),H$i._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(H$f[1]),H$i._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(H$f[2]),H$i._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(H$f[3]),H$i._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(H$f[4]),H$i._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(H$f[5]),H$i._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(H$f[6]),H$i._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(H$f[7])},H$f.containsPoint=function(H$f){for(var H$K=H$KK.PlaneIntersectionType_Front,H$Y=H$KK.PlaneIntersectionType_Front,H$X=0;H$X<6;H$X++){switch(H$X){case 0:H$Y=Collision.intersectsPlaneAndPoint(this._near,H$f);break;case 1:H$Y=Collision.intersectsPlaneAndPoint(this._far,H$f);break;case 2:H$Y=Collision.intersectsPlaneAndPoint(this._left,H$f);break;case 3:H$Y=Collision.intersectsPlaneAndPoint(this._right,H$f);break;case 4:H$Y=Collision.intersectsPlaneAndPoint(this._top,H$f);break;case 5:H$Y=Collision.intersectsPlaneAndPoint(this._bottom,H$f)}switch(H$Y){case H$KK.PlaneIntersectionType_Back:return 0;case H$KK.PlaneIntersectionType_Intersecting:H$K=H$KK.PlaneIntersectionType_Intersecting}}switch(H$K){case H$KK.PlaneIntersectionType_Intersecting:return 2;default:return 1}},H$f.containsBoundBox=function(H$f){for(var H$K,H$Y=H$i._tempV30,H$X=H$i._tempV31,H$L=1,H$H=0;H$H<6;H$H++){if(H$K=this.getPlane(H$H),this._getBoxToPlanePVertexNVertex(H$f,H$K.normal,H$Y,H$X),Collision.intersectsPlaneAndPoint(H$K,H$Y)===H$KK.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(H$K,H$X)===H$KK.PlaneIntersectionType_Back&&(H$L=2)}return H$L},H$f.containsBoundSphere=function(H$f){for(var H$K=H$KK.PlaneIntersectionType_Front,H$Y=H$KK.PlaneIntersectionType_Front,H$X=0;H$X<6;H$X++){switch(H$X){case 0:H$Y=Collision.intersectsPlaneAndSphere(this._near,H$f);break;case 1:H$Y=Collision.intersectsPlaneAndSphere(this._far,H$f);break;case 2:H$Y=Collision.intersectsPlaneAndSphere(this._left,H$f);break;case 3:H$Y=Collision.intersectsPlaneAndSphere(this._right,H$f);break;case 4:H$Y=Collision.intersectsPlaneAndSphere(this._top,H$f);break;case 5:H$Y=Collision.intersectsPlaneAndSphere(this._bottom,H$f)}switch(H$Y){case H$KK.PlaneIntersectionType_Back:return 0;case H$KK.PlaneIntersectionType_Intersecting:H$K=H$KK.PlaneIntersectionType_Intersecting}}switch(H$K){case H$KK.PlaneIntersectionType_Intersecting:return 2;default:return 1}},H$f._getBoxToPlanePVertexNVertex=function(H$f,H$K,H$Y,H$X){var H$L=H$f.min,H$H=H$L.elements,H$E=H$f.max,H$d=H$E.elements,H$O=H$K.elements,H$i=H$O[0],H$U=H$O[1],H$Z=H$O[2];H$L.cloneTo(H$Y);var H$y=H$Y.elements;0<=H$i&&(H$y[0]=H$d[0]),0<=H$U&&(H$y[1]=H$d[1]),0<=H$Z&&(H$y[2]=H$d[2]),H$E.cloneTo(H$X);var H$l=H$X.elements;0<=H$i&&(H$l[0]=H$H[0]),0<=H$U&&(H$l[1]=H$H[1]),0<=H$Z&&(H$l[2]=H$H[2])},H$B(0,H$f,"top",function(){return this._top}),H$B(0,H$f,"matrix",function(){return this._matrix},function(H$f){this._matrix=H$f,H$i._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),H$B(0,H$f,"near",function(){return this._near}),H$B(0,H$f,"far",function(){return this._far}),H$B(0,H$f,"left",function(){return this._left}),H$B(0,H$f,"right",function(){return this._right}),H$B(0,H$f,"bottom",function(){return this._bottom}),H$i._getPlanesFromMatrix=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){var H$d=H$f.elements,H$O=H$d[0],H$i=H$d[1],H$U=H$d[2],H$Z=H$d[3],H$y=H$d[4],H$l=H$d[5],H$B=H$d[6],H$$=H$d[7],H$h=H$d[8],H$A=H$d[9],H$x=H$d[10],H$S=H$d[11],H$z=H$d[12],H$C=H$d[13],H$s=H$d[14],H$a=H$d[15],H$I=H$K.normal.elements;H$I[0]=H$Z+H$U,H$I[1]=H$$+H$B,H$I[2]=H$S+H$x,H$K.distance=H$a+H$s,H$K.normalize();var H$n=H$Y.normal.elements;H$n[0]=H$Z-H$U,H$n[1]=H$$-H$B,H$n[2]=H$S-H$x,H$Y.distance=H$a-H$s,H$Y.normalize();var H$_=H$X.normal.elements;H$_[0]=H$Z+H$O,H$_[1]=H$$+H$y,H$_[2]=H$S+H$h,H$X.distance=H$a+H$z,H$X.normalize();var H$G=H$L.normal.elements;H$G[0]=H$Z-H$O,H$G[1]=H$$-H$y,H$G[2]=H$S-H$h,H$L.distance=H$a-H$z,H$L.normalize();var H$m=H$H.normal.elements;H$m[0]=H$Z-H$i,H$m[1]=H$$-H$l,H$m[2]=H$S-H$A,H$H.distance=H$a-H$C,H$H.normalize();var H$R=H$E.normal.elements;H$R[0]=H$Z+H$i,H$R[1]=H$$+H$l,H$R[2]=H$S+H$A,H$E.distance=H$a+H$C,H$E.normalize()},H$i._get3PlaneInterPoint=function(H$f,H$K,H$Y){var H$X=H$f.normal,H$L=H$K.normal,H$H=H$Y.normal;H$EK.cross(H$L,H$H,H$i._tempV30),H$EK.cross(H$H,H$X,H$i._tempV31),H$EK.cross(H$X,H$L,H$i._tempV32);var H$E=H$EK.dot(H$X,H$i._tempV30),H$d=H$EK.dot(H$L,H$i._tempV31),H$O=H$EK.dot(H$H,H$i._tempV32);return H$EK.scale(H$i._tempV30,-H$f.distance/H$E,H$i._tempV33),H$EK.scale(H$i._tempV31,-H$K.distance/H$d,H$i._tempV34),H$EK.scale(H$i._tempV32,-H$Y.distance/H$O,H$i._tempV35),H$EK.add(H$i._tempV33,H$i._tempV34,H$i._tempV36),H$EK.add(H$i._tempV35,H$i._tempV36,H$i._tempV37),H$i._tempV37},H$Z(H$i,["_tempV30",function(){return this._tempV30=new H$EK},"_tempV31",function(){return this._tempV31=new H$EK},"_tempV32",function(){return this._tempV32=new H$EK},"_tempV33",function(){return this._tempV33=new H$EK},"_tempV34",function(){return this._tempV34=new H$EK},"_tempV35",function(){return this._tempV35=new H$EK},"_tempV36",function(){return this._tempV36=new H$EK},"_tempV37",function(){return this._tempV37=new H$EK}]),H$i}(),H$Nf=function(){function H$U(H$f,H$K){this.center=null,this.radius=NaN,this.center=H$f,this.radius=H$K}H$l(H$U,"laya.d3.math.BoundSphere");var H$f=H$U.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.toDefault=function(){this.center.toDefault(),this.radius=0},H$f.intersectsRayDistance=function(H$f){return Collision.intersectsRayAndSphereRD(H$f,this)},H$f.intersectsRayPoint=function(H$f,H$K){return Collision.intersectsRayAndSphereRP(H$f,this,H$K)},H$f.cloneTo=function(H$f){var H$K=H$f;this.center.cloneTo(H$K.center),H$K.radius=this.radius},H$f.clone=function(){var H$f=new this.constructor(new H$EK,new H$EK);return this.cloneTo(H$f),H$f},H$U.createFromSubPoints=function(H$f,H$K,H$Y,H$X){if(null==H$f)throw new Error("points");if(H$K<0||H$K>=H$f.length)throw new Error("start"+H$K+"Must be in the range [0, "+(H$f.length-1)+"]");if(H$Y<0||H$K+H$Y>H$f.length)throw new Error("count"+H$Y+"Must be in the range <= "+H$f.length+"}");var H$L=H$K+H$Y,H$H=H$U._tempVector3;H$H.elements[0]=0,H$H.elements[1]=0,H$H.elements[2]=0;for(var H$E=H$K;H$E<H$L;++H$E)H$EK.add(H$f[H$E],H$H,H$H);var H$d=H$X.center;H$EK.scale(H$H,1/H$Y,H$d);var H$O=0;for(H$E=H$K;H$E<H$L;++H$E){var H$i=H$EK.distanceSquared(H$d,H$f[H$E]);H$O<H$i&&(H$O=H$i)}H$X.radius=Math.sqrt(H$O)},H$U.createfromPoints=function(H$f,H$K){if(null==H$f)throw new Error("points");H$U.createFromSubPoints(H$f,0,H$f.length,H$K)},H$Z(H$U,["_tempVector3",function(){return this._tempVector3=new H$EK}]),H$U}(),H$of=(function(){function H$f(){}H$l(H$f,"laya.d3.math.ContainmentType"),H$f.Disjoint=0,H$f.Contains=1,H$f.Intersects=2}(),function(){function H$Y(){}return H$l(H$Y,"laya.d3.math.MathUtils3D"),H$Y.isZero=function(H$f){return Math.abs(H$f)<H$Y.zeroTolerance},H$Y.nearEqual=function(H$f,H$K){return!!H$Y.isZero(H$f-H$K)},H$Y.fastInvSqrt=function(H$f){return H$Y.isZero(H$f)?H$f:1/Math.sqrt(H$f)},H$Z(H$Y,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),H$Y}()),H$Ff=function(){function H$O(){var H$f=this.elements=new Float32Array(9);H$f[0]=1,H$f[1]=0,H$f[2]=0,H$f[3]=0,H$f[4]=1,H$f[5]=0,H$f[6]=0,H$f[7]=0,H$f[8]=1}H$l(H$O,"laya.d3.math.Matrix3x3");var H$f=H$O.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.determinant=function(){var H$f=this.elements,H$K=H$f[0],H$Y=H$f[1],H$X=H$f[2],H$L=H$f[3],H$H=H$f[4],H$E=H$f[5],H$d=H$f[6],H$O=H$f[7],H$i=H$f[8];return H$K*(H$i*H$H-H$E*H$O)+H$Y*(-H$i*H$L+H$E*H$d)+H$X*(H$O*H$L-H$H*H$d)},H$f.translate=function(H$f,H$K){var H$Y=H$K.elements,H$X=this.elements,H$L=H$f.elements,H$H=H$X[0],H$E=H$X[1],H$d=H$X[2],H$O=H$X[3],H$i=H$X[4],H$U=H$X[5],H$Z=H$X[6],H$y=H$X[7],H$l=H$X[8],H$B=H$L[0],H$$=H$L[1];H$Y[0]=H$H,H$Y[1]=H$E,H$Y[2]=H$d,H$Y[3]=H$O,H$Y[4]=H$i,H$Y[5]=H$U,H$Y[6]=H$B*H$H+H$$*H$O+H$Z,H$Y[7]=H$B*H$E+H$$*H$i+H$y,H$Y[8]=H$B*H$d+H$$*H$U+H$l},H$f.rotate=function(H$f,H$K){var H$Y=H$K.elements,H$X=this.elements,H$L=H$X[0],H$H=H$X[1],H$E=H$X[2],H$d=H$X[3],H$O=H$X[4],H$i=H$X[5],H$U=H$X[6],H$Z=H$X[7],H$y=H$X[8],H$l=Math.sin(H$f),H$B=Math.cos(H$f);H$Y[0]=H$B*H$L+H$l*H$d,H$Y[1]=H$B*H$H+H$l*H$O,H$Y[2]=H$B*H$E+H$l*H$i,H$Y[3]=H$B*H$d-H$l*H$L,H$Y[4]=H$B*H$O-H$l*H$H,H$Y[5]=H$B*H$i-H$l*H$E,H$Y[6]=H$U,H$Y[7]=H$Z,H$Y[8]=H$y},H$f.scale=function(H$f,H$K){var H$Y=H$K.elements,H$X=this.elements,H$L=H$f.elements,H$H=H$L[0],H$E=H$L[1];H$Y[0]=H$H*H$X[0],H$Y[1]=H$H*H$X[1],H$Y[2]=H$H*H$X[2],H$Y[3]=H$E*H$X[3],H$Y[4]=H$E*H$X[4],H$Y[5]=H$E*H$X[5],H$Y[6]=H$X[6],H$Y[7]=H$X[7],H$Y[8]=H$X[8]},H$f.invert=function(H$f){var H$K=H$f.elements,H$Y=this.elements,H$X=H$Y[0],H$L=H$Y[1],H$H=H$Y[2],H$E=H$Y[3],H$d=H$Y[4],H$O=H$Y[5],H$i=H$Y[6],H$U=H$Y[7],H$Z=H$Y[8],H$y=H$Z*H$d-H$O*H$U,H$l=-H$Z*H$E+H$O*H$i,H$B=H$U*H$E-H$d*H$i,H$$=H$X*H$y+H$L*H$l+H$H*H$B;H$$||(H$f=null),H$$=1/H$$,H$K[0]=H$y*H$$,H$K[1]=(-H$Z*H$L+H$H*H$U)*H$$,H$K[2]=(H$O*H$L-H$H*H$d)*H$$,H$K[3]=H$l*H$$,H$K[4]=(H$Z*H$X-H$H*H$i)*H$$,H$K[5]=(-H$O*H$X+H$H*H$E)*H$$,H$K[6]=H$B*H$$,H$K[7]=(-H$U*H$X+H$L*H$i)*H$$,H$K[8]=(H$d*H$X-H$L*H$E)*H$$},H$f.transpose=function(H$f){var H$K=H$f.elements,H$Y=this.elements;if(H$f===this){var H$X=H$Y[1],H$L=H$Y[2],H$H=H$Y[5];H$K[1]=H$Y[3],H$K[2]=H$Y[6],H$K[3]=H$X,H$K[5]=H$Y[7],H$K[6]=H$L,H$K[7]=H$H}else H$K[0]=H$Y[0],H$K[1]=H$Y[3],H$K[2]=H$Y[6],H$K[3]=H$Y[1],H$K[4]=H$Y[4],H$K[5]=H$Y[7],H$K[6]=H$Y[2],H$K[7]=H$Y[5],H$K[8]=H$Y[8]},H$f.identity=function(){var H$f=this.elements;H$f[0]=1,H$f[1]=0,H$f[2]=0,H$f[3]=0,H$f[4]=1,H$f[5]=0,H$f[6]=0,H$f[7]=0,H$f[8]=1},H$f.cloneTo=function(H$f){var H$K,H$Y,H$X;if((H$Y=this.elements)!==(H$X=H$f.elements))for(H$K=0;H$K<9;++H$K)H$X[H$K]=H$Y[H$K]},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$O.createFromTranslation=function(H$f,H$K){H$K.elements;var H$Y=H$f.elements;H$K[0]=1,H$K[1]=0,H$K[2]=0,H$K[3]=0,H$K[4]=1,H$K[5]=0,H$K[6]=H$Y[0],H$K[7]=H$Y[1],H$K[8]=1},H$O.createFromRotation=function(H$f,H$K){var H$Y=H$K.elements,H$X=Math.sin(H$f),H$L=Math.cos(H$f);H$Y[0]=H$L,H$Y[1]=H$X,H$Y[2]=0,H$Y[3]=-H$X,H$Y[4]=H$L,H$Y[5]=0,H$Y[6]=0,H$Y[7]=0,H$Y[8]=1},H$O.createFromScaling=function(H$f,H$K){var H$Y=H$K.elements,H$X=H$f.elements;H$Y[0]=H$X[0],H$Y[1]=0,H$Y[2]=0,H$Y[3]=0,H$Y[4]=H$X[1],H$Y[5]=0,H$Y[6]=0,H$Y[7]=0,H$Y[8]=1},H$O.createFromMatrix4x4=function(H$f,H$K){H$K[0]=H$f[0],H$K[1]=H$f[1],H$K[2]=H$f[2],H$K[3]=H$f[4],H$K[4]=H$f[5],H$K[5]=H$f[6],H$K[6]=H$f[8],H$K[7]=H$f[9],H$K[8]=H$f[10]},H$O.multiply=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements,H$E=H$L[0],H$d=H$L[1],H$O=H$L[2],H$i=H$L[3],H$U=H$L[4],H$Z=H$L[5],H$y=H$L[6],H$l=H$L[7],H$B=H$L[8],H$$=H$H[0],H$h=H$H[1],H$A=H$H[2],H$x=H$H[3],H$S=H$H[4],H$z=H$H[5],H$C=H$H[6],H$s=H$H[7],H$a=H$H[8];H$X[0]=H$$*H$E+H$h*H$i+H$A*H$y,H$X[1]=H$$*H$d+H$h*H$U+H$A*H$l,H$X[2]=H$$*H$O+H$h*H$Z+H$A*H$B,H$X[3]=H$x*H$E+H$S*H$i+H$z*H$y,H$X[4]=H$x*H$d+H$S*H$U+H$z*H$l,H$X[5]=H$x*H$O+H$S*H$Z+H$z*H$B,H$X[6]=H$C*H$E+H$s*H$i+H$a*H$y,H$X[7]=H$C*H$d+H$s*H$U+H$a*H$l,H$X[8]=H$C*H$O+H$s*H$Z+H$a*H$B},H$O.lookAt=function(H$f,H$K,H$Y,H$X){H$EK.subtract(H$f,H$K,H$O._tempV30),H$EK.normalize(H$O._tempV30,H$O._tempV30),H$EK.cross(H$Y,H$O._tempV30,H$O._tempV31),H$EK.normalize(H$O._tempV31,H$O._tempV31),H$EK.cross(H$O._tempV30,H$O._tempV31,H$O._tempV32);var H$L=H$O._tempV30.elements,H$H=H$O._tempV31.elements,H$E=H$O._tempV32.elements,H$d=H$X.elements;H$d[0]=H$H[0],H$d[3]=H$H[1],H$d[6]=H$H[2],H$d[1]=H$E[0],H$d[4]=H$E[1],H$d[7]=H$E[2],H$d[2]=H$L[0],H$d[5]=H$L[1],H$d[8]=H$L[2]},H$O.DEFAULT=new H$O,H$Z(H$O,["_tempV30",function(){return this._tempV30=new H$EK},"_tempV31",function(){return this._tempV31=new H$EK},"_tempV32",function(){return this._tempV32=new H$EK}]),H$O}(),H$fK=function(){function H$n(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$Z,H$y,H$l,H$B,H$$){void 0===H$f&&(H$f=1),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0),void 0===H$H&&(H$H=1),void 0===H$E&&(H$E=0),void 0===H$d&&(H$d=0),void 0===H$O&&(H$O=0),void 0===H$i&&(H$i=0),void 0===H$U&&(H$U=1),void 0===H$Z&&(H$Z=0),void 0===H$y&&(H$y=0),void 0===H$l&&(H$l=0),void 0===H$B&&(H$B=0),void 0===H$$&&(H$$=1);var H$h=this.elements=new Float32Array(16);H$h[0]=H$f,H$h[1]=H$K,H$h[2]=H$Y,H$h[3]=H$X,H$h[4]=H$L,H$h[5]=H$H,H$h[6]=H$E,H$h[7]=H$d,H$h[8]=H$O,H$h[9]=H$i,H$h[10]=H$U,H$h[11]=H$Z,H$h[12]=H$y,H$h[13]=H$l,H$h[14]=H$B,H$h[15]=H$$}H$l(H$n,"laya.d3.math.Matrix4x4");var H$f=H$n.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.getElementByRowColumn=function(H$f,H$K){if(H$f<0||3<H$f)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(H$K<0||3<H$K)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*H$f+H$K]},H$f.setElementByRowColumn=function(H$f,H$K,H$Y){if(H$f<0||3<H$f)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(H$K<0||3<H$K)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*H$f+H$K]=H$Y},H$f.equalsOtherMatrix=function(H$f){var H$K=this.elements,H$Y=H$f.elements;return H$of.nearEqual(H$K[0],H$Y[0])&&H$of.nearEqual(H$K[1],H$Y[1])&&H$of.nearEqual(H$K[2],H$Y[2])&&H$of.nearEqual(H$K[3],H$Y[3])&&H$of.nearEqual(H$K[4],H$Y[4])&&H$of.nearEqual(H$K[5],H$Y[5])&&H$of.nearEqual(H$K[6],H$Y[6])&&H$of.nearEqual(H$K[7],H$Y[7])&&H$of.nearEqual(H$K[8],H$Y[8])&&H$of.nearEqual(H$K[9],H$Y[9])&&H$of.nearEqual(H$K[10],H$Y[10])&&H$of.nearEqual(H$K[11],H$Y[11])&&H$of.nearEqual(H$K[12],H$Y[12])&&H$of.nearEqual(H$K[13],H$Y[13])&&H$of.nearEqual(H$K[14],H$Y[14])&&H$of.nearEqual(H$K[15],H$Y[15])},H$f.decomposeTransRotScale=function(H$f,H$K,H$Y){var H$X=H$n._tempMatrix4x4;return this.decomposeTransRotMatScale(H$f,H$X,H$Y)?(H$YK.createFromMatrix4x4(H$X,H$K),!0):(H$K.identity(),!1)},H$f.decomposeTransRotMatScale=function(H$f,H$K,H$Y){var H$X=this.elements,H$L=H$f.elements,H$H=H$K.elements,H$E=H$Y.elements;H$L[0]=H$X[12],H$L[1]=H$X[13],H$L[2]=H$X[14];var H$d=H$X[0],H$O=H$X[1],H$i=H$X[2],H$U=H$X[4],H$Z=H$X[5],H$y=H$X[6],H$l=H$X[8],H$B=H$X[9],H$$=H$X[10],H$h=H$E[0]=Math.sqrt(H$d*H$d+H$O*H$O+H$i*H$i),H$A=H$E[1]=Math.sqrt(H$U*H$U+H$Z*H$Z+H$y*H$y),H$x=H$E[2]=Math.sqrt(H$l*H$l+H$B*H$B+H$$*H$$);if(H$of.isZero(H$h)||H$of.isZero(H$A)||H$of.isZero(H$x))return H$H[1]=H$H[2]=H$H[3]=H$H[4]=H$H[6]=H$H[7]=H$H[8]=H$H[9]=H$H[11]=H$H[12]=H$H[13]=H$H[14]=0,H$H[0]=H$H[5]=H$H[10]=H$H[15]=1,!1;var H$S=H$n._tempVector0,H$z=H$S.elements;H$z[0]=H$l/H$x,H$z[1]=H$B/H$x,H$z[2]=H$$/H$x;var H$C=H$n._tempVector1,H$s=H$C.elements;H$s[0]=H$d/H$h,H$s[1]=H$O/H$h,H$s[2]=H$i/H$h;var H$a=H$n._tempVector2;H$EK.cross(H$S,H$C,H$a);var H$I=H$n._tempVector1;return H$EK.cross(H$a,H$S,H$I),H$H[3]=H$H[7]=H$H[11]=H$H[12]=H$H[13]=H$H[14]=0,H$H[15]=1,H$H[0]=H$I.x,H$H[1]=H$I.y,H$H[2]=H$I.z,H$H[4]=H$a.x,H$H[5]=H$a.y,H$H[6]=H$a.z,H$H[8]=H$S.x,H$H[9]=H$S.y,H$H[10]=H$S.z,H$H[0]*H$d+H$H[1]*H$O+H$H[2]*H$i<0&&(H$E[0]=-H$h),H$H[4]*H$U+H$H[5]*H$Z+H$H[6]*H$y<0&&(H$E[1]=-H$A),H$H[8]*H$l+H$H[9]*H$B+H$H[10]*H$$<0&&(H$E[2]=-H$x),!0},H$f.decomposeYawPitchRoll=function(H$f){var H$K=H$f.elements,H$Y=Math.asin(-this.elements[9]);H$K[1]=H$Y,Math.cos(H$Y)>H$of.zeroTolerance?(H$K[2]=Math.atan2(this.elements[1],this.elements[5]),H$K[0]=Math.atan2(this.elements[8],this.elements[10])):(H$K[2]=Math.atan2(-this.elements[4],this.elements[0]),H$K[0]=0)},H$f.normalize=function(){var H$f=this.elements,H$K=H$f[0],H$Y=H$f[1],H$X=H$f[2],H$L=Math.sqrt(H$K*H$K+H$Y*H$Y+H$X*H$X);if(!H$L)return H$f[0]=0,H$f[1]=0,void(H$f[2]=0);1!=H$L&&(H$L=1/H$L,H$f[0]=H$K*H$L,H$f[1]=H$Y*H$L,H$f[2]=H$X*H$L)},H$f.transpose=function(){var H$f,H$K;return H$K=(H$f=this.elements)[1],H$f[1]=H$f[4],H$f[4]=H$K,H$K=H$f[2],H$f[2]=H$f[8],H$f[8]=H$K,H$K=H$f[3],H$f[3]=H$f[12],H$f[12]=H$K,H$K=H$f[6],H$f[6]=H$f[9],H$f[9]=H$K,H$K=H$f[7],H$f[7]=H$f[13],H$f[13]=H$K,H$K=H$f[11],H$f[11]=H$f[14],H$f[14]=H$K,this},H$f.invert=function(H$f){var H$K=this.elements,H$Y=H$f.elements,H$X=H$K[0],H$L=H$K[1],H$H=H$K[2],H$E=H$K[3],H$d=H$K[4],H$O=H$K[5],H$i=H$K[6],H$U=H$K[7],H$Z=H$K[8],H$y=H$K[9],H$l=H$K[10],H$B=H$K[11],H$$=H$K[12],H$h=H$K[13],H$A=H$K[14],H$x=H$K[15],H$S=H$X*H$O-H$L*H$d,H$z=H$X*H$i-H$H*H$d,H$C=H$X*H$U-H$E*H$d,H$s=H$L*H$i-H$H*H$O,H$a=H$L*H$U-H$E*H$O,H$I=H$H*H$U-H$E*H$i,H$n=H$Z*H$h-H$y*H$$,H$_=H$Z*H$A-H$l*H$$,H$G=H$Z*H$x-H$B*H$$,H$m=H$y*H$A-H$l*H$h,H$R=H$y*H$x-H$B*H$h,H$V=H$l*H$x-H$B*H$A,H$t=H$S*H$V-H$z*H$R+H$C*H$m+H$s*H$G-H$a*H$_+H$I*H$n;0!==Math.abs(H$t)&&(H$t=1/H$t,H$Y[0]=(H$O*H$V-H$i*H$R+H$U*H$m)*H$t,H$Y[1]=(H$H*H$R-H$L*H$V-H$E*H$m)*H$t,H$Y[2]=(H$h*H$I-H$A*H$a+H$x*H$s)*H$t,H$Y[3]=(H$l*H$a-H$y*H$I-H$B*H$s)*H$t,H$Y[4]=(H$i*H$G-H$d*H$V-H$U*H$_)*H$t,H$Y[5]=(H$X*H$V-H$H*H$G+H$E*H$_)*H$t,H$Y[6]=(H$A*H$C-H$$*H$I-H$x*H$z)*H$t,H$Y[7]=(H$Z*H$I-H$l*H$C+H$B*H$z)*H$t,H$Y[8]=(H$d*H$R-H$O*H$G+H$U*H$n)*H$t,H$Y[9]=(H$L*H$G-H$X*H$R-H$E*H$n)*H$t,H$Y[10]=(H$$*H$a-H$h*H$C+H$x*H$S)*H$t,H$Y[11]=(H$y*H$C-H$Z*H$a-H$B*H$S)*H$t,H$Y[12]=(H$O*H$_-H$d*H$m-H$i*H$n)*H$t,H$Y[13]=(H$X*H$m-H$L*H$_+H$H*H$n)*H$t,H$Y[14]=(H$h*H$z-H$$*H$s-H$A*H$S)*H$t,H$Y[15]=(H$Z*H$s-H$y*H$z+H$l*H$S)*H$t)},H$f.identity=function(){var H$f=this.elements;H$f[1]=H$f[2]=H$f[3]=H$f[4]=H$f[6]=H$f[7]=H$f[8]=H$f[9]=H$f[11]=H$f[12]=H$f[13]=H$f[14]=0,H$f[0]=H$f[5]=H$f[10]=H$f[15]=1},H$f.cloneTo=function(H$f){var H$K,H$Y,H$X;if((H$Y=this.elements)!==(H$X=H$f.elements))for(H$K=0;H$K<16;++H$K)H$X[H$K]=H$Y[H$K]},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$f.getTranslationVector=function(H$f){var H$K=this.elements,H$Y=H$f.elements;H$Y[0]=H$K[12],H$Y[1]=H$K[13],H$Y[2]=H$K[14]},H$f.setTranslationVector=function(H$f){var H$K=this.elements,H$Y=H$f.elements;H$K[12]=H$Y[0],H$K[13]=H$Y[1],H$K[14]=H$Y[2]},H$f.getForward=function(H$f){var H$K=this.elements,H$Y=H$f.elements;H$Y[0]=-H$K[8],H$Y[1]=-H$K[9],H$Y[2]=-H$K[10]},H$f.setForward=function(H$f){var H$K=this.elements,H$Y=H$f.elements;H$K[8]=-H$Y[0],H$K[9]=-H$Y[1],H$K[10]=-H$Y[2]},H$n.createRotationX=function(H$f,H$K){var H$Y=H$K.elements,H$X=Math.sin(H$f),H$L=Math.cos(H$f);H$Y[1]=H$Y[2]=H$Y[3]=H$Y[4]=H$Y[7]=H$Y[8]=H$Y[11]=H$Y[12]=H$Y[13]=H$Y[14]=0,H$Y[0]=H$Y[15]=1,H$Y[5]=H$Y[10]=H$L,H$Y[6]=H$X,H$Y[9]=-H$X},H$n.createRotationY=function(H$f,H$K){var H$Y=H$K.elements,H$X=Math.sin(H$f),H$L=Math.cos(H$f);H$Y[1]=H$Y[3]=H$Y[4]=H$Y[6]=H$Y[7]=H$Y[9]=H$Y[11]=H$Y[12]=H$Y[13]=H$Y[14]=0,H$Y[5]=H$Y[15]=1,H$Y[0]=H$Y[10]=H$L,H$Y[2]=-H$X,H$Y[8]=H$X},H$n.createRotationZ=function(H$f,H$K){var H$Y=H$K.elements,H$X=Math.sin(H$f),H$L=Math.cos(H$f);H$Y[2]=H$Y[3]=H$Y[6]=H$Y[7]=H$Y[8]=H$Y[9]=H$Y[11]=H$Y[12]=H$Y[13]=H$Y[14]=0,H$Y[10]=H$Y[15]=1,H$Y[0]=H$Y[5]=H$L,H$Y[1]=H$X,H$Y[4]=-H$X},H$n.createRotationYawPitchRoll=function(H$f,H$K,H$Y,H$X){H$YK.createFromYawPitchRoll(H$f,H$K,H$Y,H$n._tempQuaternion),H$n.createRotationQuaternion(H$n._tempQuaternion,H$X)},H$n.createRotationAxis=function(H$f,H$K,H$Y){var H$X=H$f.elements,H$L=H$X[0],H$H=H$X[1],H$E=H$X[2],H$d=Math.cos(H$K),H$O=Math.sin(H$K),H$i=H$L*H$L,H$U=H$H*H$H,H$Z=H$E*H$E,H$y=H$L*H$H,H$l=H$L*H$E,H$B=H$H*H$E,H$$=H$Y.elements;H$$[3]=H$$[7]=H$$[11]=H$$[12]=H$$[13]=H$$[14]=0,H$$[15]=1,H$$[0]=H$i+H$d*(1-H$i),H$$[1]=H$y-H$d*H$y+H$O*H$E,H$$[2]=H$l-H$d*H$l-H$O*H$H,H$$[4]=H$y-H$d*H$y-H$O*H$E,H$$[5]=H$U+H$d*(1-H$U),H$$[6]=H$B-H$d*H$B+H$O*H$L,H$$[8]=H$l-H$d*H$l+H$O*H$H,H$$[9]=H$B-H$d*H$B-H$O*H$L,H$$[10]=H$Z+H$d*(1-H$Z)},H$n.createRotationQuaternion=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements,H$L=H$Y[0],H$H=H$Y[1],H$E=H$Y[2],H$d=H$Y[3],H$O=H$L*H$L,H$i=H$H*H$H,H$U=H$E*H$E,H$Z=H$L*H$H,H$y=H$E*H$d,H$l=H$E*H$L,H$B=H$H*H$d,H$$=H$H*H$E,H$h=H$L*H$d;H$X[3]=H$X[7]=H$X[11]=H$X[12]=H$X[13]=H$X[14]=0,H$X[15]=1,H$X[0]=1-2*(H$i+H$U),H$X[1]=2*(H$Z+H$y),H$X[2]=2*(H$l-H$B),H$X[4]=2*(H$Z-H$y),H$X[5]=1-2*(H$U+H$O),H$X[6]=2*(H$$+H$h),H$X[8]=2*(H$l+H$B),H$X[9]=2*(H$$-H$h),H$X[10]=1-2*(H$i+H$O)},H$n.createTranslate=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements;H$X[4]=H$X[8]=H$X[1]=H$X[9]=H$X[2]=H$X[6]=H$X[3]=H$X[7]=H$X[11]=0,H$X[0]=H$X[5]=H$X[10]=H$X[15]=1,H$X[12]=H$Y[0],H$X[13]=H$Y[1],H$X[14]=H$Y[2]},H$n.createScaling=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements;H$X[0]=H$Y[0],H$X[5]=H$Y[1],H$X[10]=H$Y[2],H$X[1]=H$X[4]=H$X[8]=H$X[12]=H$X[9]=H$X[13]=H$X[2]=H$X[6]=H$X[14]=H$X[3]=H$X[7]=H$X[11]=0,H$X[15]=1},H$n.multiply=function(H$f,H$K,H$Y){var H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U;for(H$L=H$Y.elements,H$H=H$f.elements,H$L===(H$E=H$K.elements)&&(H$E=H$E.slice()),H$X=0;H$X<4;H$X++)H$d=H$H[H$X],H$O=H$H[H$X+4],H$i=H$H[H$X+8],H$U=H$H[H$X+12],H$L[H$X]=H$d*H$E[0]+H$O*H$E[1]+H$i*H$E[2]+H$U*H$E[3],H$L[H$X+4]=H$d*H$E[4]+H$O*H$E[5]+H$i*H$E[6]+H$U*H$E[7],H$L[H$X+8]=H$d*H$E[8]+H$O*H$E[9]+H$i*H$E[10]+H$U*H$E[11],H$L[H$X+12]=H$d*H$E[12]+H$O*H$E[13]+H$i*H$E[14]+H$U*H$E[15]},H$n.createFromQuaternion=function(H$f,H$K){var H$Y=H$K.elements,H$X=H$f.elements,H$L=H$X[0],H$H=H$X[1],H$E=H$X[2],H$d=H$X[3],H$O=H$L+H$L,H$i=H$H+H$H,H$U=H$E+H$E,H$Z=H$L*H$O,H$y=H$H*H$O,H$l=H$H*H$i,H$B=H$E*H$O,H$$=H$E*H$i,H$h=H$E*H$U,H$A=H$d*H$O,H$x=H$d*H$i,H$S=H$d*H$U;H$Y[0]=1-H$l-H$h,H$Y[1]=H$y+H$S,H$Y[2]=H$B-H$x,H$Y[3]=0,H$Y[4]=H$y-H$S,H$Y[5]=1-H$Z-H$h,H$Y[6]=H$$+H$A,H$Y[7]=0,H$Y[8]=H$B+H$x,H$Y[9]=H$$-H$A,H$Y[10]=1-H$Z-H$l,H$Y[11]=0,H$Y[12]=0,H$Y[13]=0,H$Y[14]=0,H$Y[15]=1},H$n.createAffineTransformation=function(H$f,H$K,H$Y,H$X){var H$L=H$f.elements,H$H=H$K.elements,H$E=H$Y.elements,H$d=H$X.elements,H$O=H$H[0],H$i=H$H[1],H$U=H$H[2],H$Z=H$H[3],H$y=H$O+H$O,H$l=H$i+H$i,H$B=H$U+H$U,H$$=H$O*H$y,H$h=H$O*H$l,H$A=H$O*H$B,H$x=H$i*H$l,H$S=H$i*H$B,H$z=H$U*H$B,H$C=H$Z*H$y,H$s=H$Z*H$l,H$a=H$Z*H$B,H$I=H$E[0],H$n=H$E[1],H$_=H$E[2];H$d[0]=(1-(H$x+H$z))*H$I,H$d[1]=(H$h+H$a)*H$I,H$d[2]=(H$A-H$s)*H$I,H$d[3]=0,H$d[4]=(H$h-H$a)*H$n,H$d[5]=(1-(H$$+H$z))*H$n,H$d[6]=(H$S+H$C)*H$n,H$d[7]=0,H$d[8]=(H$A+H$s)*H$_,H$d[9]=(H$S-H$C)*H$_,H$d[10]=(1-(H$$+H$x))*H$_,H$d[11]=0,H$d[12]=H$L[0],H$d[13]=H$L[1],H$d[14]=H$L[2],H$d[15]=1},H$n.createLookAt=function(H$f,H$K,H$Y,H$X){var H$L=H$X.elements,H$H=H$n._tempVector0,H$E=H$n._tempVector1,H$d=H$n._tempVector2;H$EK.subtract(H$f,H$K,H$d),H$EK.normalize(H$d,H$d),H$EK.cross(H$Y,H$d,H$H),H$EK.normalize(H$H,H$H),H$EK.cross(H$d,H$H,H$E),H$X.identity(),H$L[0]=H$H.x,H$L[4]=H$H.y,H$L[8]=H$H.z,H$L[1]=H$E.x,H$L[5]=H$E.y,H$L[9]=H$E.z,H$L[2]=H$d.x,H$L[6]=H$d.y,H$L[10]=H$d.z,H$L[12]=-H$EK.dot(H$H,H$f),H$L[13]=-H$EK.dot(H$E,H$f),H$L[14]=-H$EK.dot(H$d,H$f)},H$n.createPerspective=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$L.elements,H$E=1/Math.tan(H$f/2),H$d=1/(H$Y-H$X);H$H[0]=H$E/H$K,H$H[5]=H$E,H$H[10]=(H$X+H$Y)*H$d,H$H[11]=-1,H$H[14]=2*H$X*H$Y*H$d,H$H[1]=H$H[2]=H$H[3]=H$H[4]=H$H[6]=H$H[7]=H$H[8]=H$H[9]=H$H[12]=H$H[13]=H$H[15]=0},H$n.createOrthoOffCenterRH=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){var H$d=H$E.elements,H$O=1/(H$f-H$K),H$i=1/(H$Y-H$X),H$U=1/(H$L-H$H);H$d[1]=H$d[2]=H$d[3]=H$d[4]=H$d[6]=H$d[7]=H$d[8]=H$d[9]=H$d[11]=0,H$d[15]=1,H$d[0]=-2*H$O,H$d[5]=-2*H$i,H$d[10]=2*H$U,H$d[12]=(H$f+H$K)*H$O,H$d[13]=(H$X+H$Y)*H$i,H$d[14]=(H$H+H$L)*H$U},H$n.translation=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements;H$X[0]=H$X[5]=H$X[10]=H$X[15]=1,H$X[12]=H$Y[0],H$X[13]=H$Y[1],H$X[14]=H$Y[2]},H$Z(H$n,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new H$n},"_tempVector0",function(){return this._tempVector0=new H$EK},"_tempVector1",function(){return this._tempVector1=new H$EK},"_tempVector2",function(){return this._tempVector2=new H$EK},"_tempQuaternion",function(){return this._tempQuaternion=new H$YK},"DEFAULT",function(){return this.DEFAULT=new H$n},"ZERO",function(){return this.ZERO=new H$n(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),H$n}(),H$KK=(function(){function H$S(H$f,H$K){this.extents=null,this.transformation=null,this.extents=H$f,this.transformation=H$K}H$l(H$S,"laya.d3.math.OrientedBoundBox");var H$f=H$S.prototype;H$f.getCorners=function(H$f){var H$K=H$S._tempV30.elements,H$Y=H$S._tempV31.elements,H$X=H$S._tempV32.elements,H$L=this.extents.elements;H$K[0]=H$L[0],H$K[1]=H$K[2]=0,H$Y[1]=H$L[1],H$Y[0]=H$Y[2]=0,H$X[2]=H$L[2],H$X[0]=H$X[1]=0,H$EK.TransformNormal(H$S._tempV30,this.transformation,H$S._tempV30),H$EK.TransformNormal(H$S._tempV31,this.transformation,H$S._tempV31),H$EK.TransformNormal(H$S._tempV32,this.transformation,H$S._tempV32);var H$H=H$S._tempV33;this.transformation.getTranslationVector(H$H),H$f.length=8,H$EK.add(H$H,H$S._tempV30,H$S._tempV34),H$EK.add(H$S._tempV34,H$S._tempV31,H$S._tempV34),H$EK.add(H$S._tempV34,H$S._tempV32,H$f[0]),H$EK.add(H$H,H$S._tempV30,H$S._tempV34),H$EK.add(H$S._tempV34,H$S._tempV31,H$S._tempV34),H$EK.subtract(H$S._tempV34,H$S._tempV32,H$f[1]),H$EK.subtract(H$H,H$S._tempV30,H$S._tempV34),H$EK.add(H$S._tempV34,H$S._tempV31,H$S._tempV34),H$EK.subtract(H$S._tempV34,H$S._tempV32,H$f[2]),H$EK.subtract(H$H,H$S._tempV30,H$S._tempV34),H$EK.add(H$S._tempV34,H$S._tempV31,H$S._tempV34),H$EK.add(H$S._tempV34,H$S._tempV32,H$f[3]),H$EK.add(H$H,H$S._tempV30,H$S._tempV34),H$EK.subtract(H$S._tempV34,H$S._tempV31,H$S._tempV34),H$EK.add(H$S._tempV34,H$S._tempV32,H$f[4]),H$EK.add(H$H,H$S._tempV30,H$S._tempV34),H$EK.subtract(H$S._tempV34,H$S._tempV31,H$S._tempV34),H$EK.subtract(H$S._tempV34,H$S._tempV32,H$f[5]),H$EK.subtract(H$H,H$S._tempV30,H$S._tempV34),H$EK.subtract(H$S._tempV34,H$S._tempV31,H$S._tempV34),H$EK.subtract(H$S._tempV34,H$S._tempV32,H$f[6]),H$EK.subtract(H$H,H$S._tempV30,H$S._tempV34),H$EK.subtract(H$S._tempV34,H$S._tempV31,H$S._tempV34),H$EK.add(H$S._tempV34,H$S._tempV32,H$f[7])},H$f.transform=function(H$f){H$fK.multiply(this.transformation,H$f,this.transformation)},H$f.scale=function(H$f){H$EK.multiply(this.extents,H$f,this.extents)},H$f.translate=function(H$f){this.transformation.getTranslationVector(H$S._tempV30),H$EK.add(H$S._tempV30,H$f,H$S._tempV31),this.transformation.setTranslationVector(H$S._tempV31)},H$f.Size=function(H$f){H$EK.scale(this.extents,2,H$f)},H$f.getSize=function(H$f){var H$K=this.extents.elements;H$S._tempV30.x=H$K[0],H$S._tempV31.y=H$K[1],H$S._tempV32.z=H$K[2],H$EK.TransformNormal(H$S._tempV30,this.transformation,H$S._tempV30),H$EK.TransformNormal(H$S._tempV31,this.transformation,H$S._tempV31),H$EK.TransformNormal(H$S._tempV31,this.transformation,H$S._tempV32);var H$Y=H$f.elements;H$Y[0]=H$EK.scalarLength(H$S._tempV30),H$Y[1]=H$EK.scalarLength(H$S._tempV31),H$Y[2]=H$EK.scalarLength(H$S._tempV32)},H$f.getSizeSquared=function(H$f){var H$K=this.extents.elements;H$S._tempV30.x=H$K[0],H$S._tempV31.y=H$K[1],H$S._tempV32.z=H$K[2],H$EK.TransformNormal(H$S._tempV30,this.transformation,H$S._tempV30),H$EK.TransformNormal(H$S._tempV31,this.transformation,H$S._tempV31),H$EK.TransformNormal(H$S._tempV31,this.transformation,H$S._tempV32);var H$Y=H$f.elements;H$Y[0]=H$EK.scalarLengthSquared(H$S._tempV30),H$Y[1]=H$EK.scalarLengthSquared(H$S._tempV31),H$Y[2]=H$EK.scalarLengthSquared(H$S._tempV32)},H$f.getCenter=function(H$f){this.transformation.getTranslationVector(H$f)},H$f.containsPoint=function(H$f){var H$K=this.extents.elements,H$Y=H$K[0],H$X=H$K[1],H$L=H$K[2];this.transformation.invert(H$S._tempM0),H$EK.transformCoordinate(H$f,H$S._tempM0,H$S._tempV30);var H$H=H$S._tempV30.elements,H$E=Math.abs(H$H[0]),H$d=Math.abs(H$H[1]),H$O=Math.abs(H$H[2]);return H$of.nearEqual(H$E,H$Y)&&H$of.nearEqual(H$d,H$X)&&H$of.nearEqual(H$O,H$L)?2:H$E<H$Y&&H$d<H$X&&H$O<H$L?1:0},H$f.containsPoints=function(H$f){var H$K=this.extents.elements,H$Y=H$K[0],H$X=H$K[1],H$L=H$K[2];this.transformation.invert(H$S._tempM0);for(var H$H=!0,H$E=!1,H$d=0;H$d<H$f.length;H$d++){H$EK.transformCoordinate(H$f[H$d],H$S._tempM0,H$S._tempV30);var H$O=H$S._tempV30.elements,H$i=Math.abs(H$O[0]),H$U=Math.abs(H$O[1]),H$Z=Math.abs(H$O[2]);H$of.nearEqual(H$i,H$Y)&&H$of.nearEqual(H$U,H$X)&&H$of.nearEqual(H$Z,H$L)&&(H$E=!0),H$i<H$Y&&H$U<H$X&&H$Z<H$L?H$E=!0:H$H=!1}return H$H?1:H$E?2:0},H$f.containsSphere=function(H$f,H$K){void 0===H$K&&(H$K=!1);var H$Y=this.extents.elements,H$X=H$Y[0],H$L=H$Y[1],H$H=H$Y[2],H$E=H$f.radius;this.transformation.invert(H$S._tempM0),H$EK.transformCoordinate(H$f.center,H$S._tempM0,H$S._tempV30);var H$d=NaN;if(H$d=H$K?H$E:(H$EK.scale(H$EK.UnitX,H$E,H$S._tempV31),H$EK.TransformNormal(H$S._tempV31,H$S._tempM0,H$S._tempV31),H$EK.scalarLength(H$S._tempV31)),H$EK.scale(this.extents,-1,H$S._tempV32),H$EK.Clamp(H$S._tempV30,H$S._tempV32,this.extents,H$S._tempV33),H$d*H$d<H$EK.distanceSquared(H$S._tempV30,H$S._tempV33))return 0;var H$O=H$S._tempV30.elements,H$i=H$O[0],H$U=H$O[1],H$Z=H$O[2],H$y=H$S._tempV32.elements,H$l=H$y[0],H$B=H$y[1],H$$=H$y[2];return H$l+H$d<=H$i&&H$i<=H$X-H$d&&H$d<H$X-H$l&&H$B+H$d<=H$U&&H$U<=H$L-H$d&&H$d<H$L-H$B&&H$$+H$d<=H$Z&&H$Z<=H$H-H$d&&H$d<H$H-H$$?1:2},H$f.containsOrientedBoundBox=function(H$f){var H$K=0,H$Y=0;H$f.getCorners(H$S._corners);var H$X=this.containsPoints(H$S._corners);if(0!=H$X)return H$X;var H$L=this.extents.elements;H$f.extents.cloneTo(H$S._tempV35);var H$H=H$S._tempV35.elements;H$S._getRows(this.transformation,H$S._rows1),H$S._getRows(H$f.transformation,H$S._rows2);var H$E=NaN;for(H$K=0;H$K<4;H$K++)for(H$Y=0;H$Y<4;H$Y++)3==H$K||3==H$Y?(H$S._tempM0.setElementByRowColumn(H$K,H$Y,0),H$S._tempM1.setElementByRowColumn(H$K,H$Y,0)):(H$E=H$EK.dot(H$S._rows1[H$K],H$S._rows2[H$Y]),H$S._tempM0.setElementByRowColumn(H$K,H$Y,H$E),H$S._tempM1.setElementByRowColumn(H$K,H$Y,Math.abs(H$E)));H$f.getCenter(H$S._tempV34),this.getCenter(H$S._tempV36),H$EK.subtract(H$S._tempV34,H$S._tempV36,H$S._tempV30);var H$d=H$S._tempV31.elements;H$d[0]=H$EK.dot(H$S._tempV30,H$S._rows1[0]),H$d[1]=H$EK.dot(H$S._tempV30,H$S._rows1[1]),H$d[2]=H$EK.dot(H$S._tempV30,H$S._rows1[2]);var H$O=H$S._tempV32.elements,H$i=H$S._tempV33.elements;for(H$K=0;H$K<3;H$K++)if(H$O[0]=H$S._tempM1.getElementByRowColumn(H$K,0),H$O[1]=H$S._tempM1.getElementByRowColumn(H$K,1),H$O[2]=H$S._tempM1.getElementByRowColumn(H$K,2),H$L[H$K]+H$EK.dot(H$S._tempV35,H$S._tempV32)<Math.abs(H$d[H$K]))return 0;for(H$Y=0;H$Y<3;H$Y++)if(H$O[0]=H$S._tempM1.getElementByRowColumn(0,H$Y),H$O[1]=H$S._tempM1.getElementByRowColumn(1,H$Y),H$O[2]=H$S._tempM1.getElementByRowColumn(2,H$Y),H$i[0]=H$S._tempM0.getElementByRowColumn(0,H$Y),H$i[1]=H$S._tempM0.getElementByRowColumn(1,H$Y),H$i[2]=H$S._tempM0.getElementByRowColumn(2,H$Y),H$EK.dot(this.extents,H$S._tempV32)+H$H[H$Y]<Math.abs(H$EK.dot(H$S._tempV31,H$S._tempV33)))return 0;for(H$K=0;H$K<3;H$K++)for(H$Y=0;H$Y<3;H$Y++){var H$U=(H$K+1)%3,H$Z=(H$K+2)%3,H$y=(H$Y+1)%3,H$l=(H$Y+2)%3;if(H$L[H$U]*H$S._tempM1.getElementByRowColumn(H$Z,H$Y)+H$L[H$Z]*H$S._tempM1.getElementByRowColumn(H$U,H$Y)+(H$H[H$y]*H$S._tempM1.getElementByRowColumn(H$K,H$l)+H$H[H$l]*H$S._tempM1.getElementByRowColumn(H$K,H$y))<Math.abs(H$d[H$Z]*H$S._tempM0.getElementByRowColumn(H$U,H$Y)-H$d[H$U]*H$S._tempM0.getElementByRowColumn(H$Z,H$Y)))return 0}return 2},H$f.containsLine=function(H$f,H$K){H$S._corners[0]=H$f,H$S._corners[1]=H$K;var H$Y=this.containsPoints(H$S._corners);if(0!=H$Y)return H$Y;var H$X=this.extents.elements,H$L=H$X[0],H$H=H$X[1],H$E=H$X[2];this.transformation.invert(H$S._tempM0),H$EK.transformCoordinate(H$f,H$S._tempM0,H$S._tempV30),H$EK.transformCoordinate(H$K,H$S._tempM0,H$S._tempV31),H$EK.add(H$S._tempV30,H$S._tempV31,H$S._tempV32),H$EK.scale(H$S._tempV32,.5,H$S._tempV32),H$EK.subtract(H$S._tempV30,H$S._tempV32,H$S._tempV33);var H$d=H$S._tempV33.elements,H$O=H$d[0],H$i=H$d[1],H$U=H$d[2],H$Z=H$S._tempV34.elements,H$y=H$Z[0]=Math.abs(H$d[0]),H$l=H$Z[1]=Math.abs(H$d[1]),H$B=H$Z[2]=Math.abs(H$d[2]),H$$=H$S._tempV32.elements,H$h=H$$[0],H$A=H$$[1],H$x=H$$[2];return Math.abs(H$h)>H$L+H$y?0:Math.abs(H$A)>H$H+H$l?0:Math.abs(H$x)>H$E+H$B?0:Math.abs(H$A*H$U-H$x*H$i)>H$H*H$B+H$E*H$l?0:Math.abs(H$h*H$U-H$x*H$O)>H$L*H$B+H$E*H$y?0:Math.abs(H$h*H$i-H$A*H$O)>H$L*H$l+H$H*H$y?0:2},H$f.containsBoundBox=function(H$f){var H$K=0,H$Y=0,H$X=H$f.min,H$L=H$f.max;H$f.getCorners(H$S._corners);var H$H=this.containsPoints(H$S._corners);if(0!=H$H)return H$H;H$EK.subtract(H$L,H$X,H$S._tempV30),H$EK.scale(H$S._tempV30,.5,H$S._tempV30),H$EK.add(H$X,H$S._tempV30,H$S._tempV30),H$EK.subtract(H$L,H$S._tempV30,H$S._tempV31);var H$E=this.extents.elements,H$d=H$S._tempV31.elements;H$S._getRows(this.transformation,H$S._rows1),this.transformation.invert(H$S._tempM0);for(H$K=0;H$K<3;H$K++)for(H$Y=0;H$Y<3;H$Y++)H$S._tempM1.setElementByRowColumn(H$K,H$Y,Math.abs(H$S._tempM0.getElementByRowColumn(H$K,H$Y)));this.getCenter(H$S._tempV35),H$EK.subtract(H$S._tempV30,H$S._tempV35,H$S._tempV32);var H$O=H$S._tempV31.elements;H$O[0]=H$EK.dot(H$S._tempV32,H$S._rows1[0]),H$O[1]=H$EK.dot(H$S._tempV32,H$S._rows1[1]),H$O[2]=H$EK.dot(H$S._tempV32,H$S._rows1[2]);var H$i=H$S._tempV33.elements,H$U=H$S._tempV34.elements;for(H$K=0;H$K<3;H$K++)if(H$i[0]=H$S._tempM1.getElementByRowColumn(H$K,0),H$i[1]=H$S._tempM1.getElementByRowColumn(H$K,1),H$i[2]=H$S._tempM1.getElementByRowColumn(H$K,2),H$E[H$K]+H$EK.dot(H$S._tempV31,H$S._tempV33)<Math.abs(H$O[H$K]))return 0;for(H$Y=0;H$Y<3;H$Y++)if(H$i[0]=H$S._tempM1.getElementByRowColumn(0,H$Y),H$i[1]=H$S._tempM1.getElementByRowColumn(1,H$Y),H$i[2]=H$S._tempM1.getElementByRowColumn(2,H$Y),H$U[0]=H$S._tempM0.getElementByRowColumn(0,H$Y),H$U[1]=H$S._tempM0.getElementByRowColumn(1,H$Y),H$U[2]=H$S._tempM0.getElementByRowColumn(2,H$Y),H$EK.dot(this.extents,H$S._tempV33)+H$d[H$Y]<Math.abs(H$EK.dot(H$S._tempV31,H$S._tempV34)))return 0;for(H$K=0;H$K<3;H$K++)for(H$Y=0;H$Y<3;H$Y++){var H$Z=(H$K+1)%3,H$y=(H$K+2)%3,H$l=(H$Y+1)%3,H$B=(H$Y+2)%3;if(H$E[H$Z]*H$S._tempM1.getElementByRowColumn(H$y,H$Y)+H$E[H$y]*H$S._tempM1.getElementByRowColumn(H$Z,H$Y)+(H$d[H$l]*H$S._tempM1.getElementByRowColumn(H$K,H$B)+H$d[H$B]*H$S._tempM1.getElementByRowColumn(H$K,H$l))<Math.abs(H$O[H$y]*H$S._tempM0.getElementByRowColumn(H$Z,H$Y)-H$O[H$Z]*H$S._tempM0.getElementByRowColumn(H$y,H$Y)))return 0}return 2},H$f.intersectsRay=function(H$f,H$K){H$EK.scale(this.extents,-1,H$S._tempV30),this.transformation.invert(H$S._tempM0),H$EK.TransformNormal(H$f.direction,H$S._tempM0,H$S._ray.direction),H$EK.transformCoordinate(H$f.origin,H$S._tempM0,H$S._ray.origin),H$S._boxBound1.min=H$S._tempV30,H$S._boxBound1.max=this.extents;var H$Y=Collision.intersectsRayAndBoxRP(H$S._ray,H$S._boxBound1,H$K);return-1!==H$Y&&H$EK.transformCoordinate(H$K,this.transformation,H$K),H$Y},H$f._getLocalCorners=function(H$f){H$f.length=8;var H$K=this.extents.elements;H$S._tempV30.x=H$K[0],H$S._tempV31.y=H$K[1],H$S._tempV32.z=H$K[2],H$EK.add(H$S._tempV30,H$S._tempV31,H$S._tempV33),H$EK.add(H$S._tempV33,H$S._tempV32,H$f[0]),H$EK.add(H$S._tempV30,H$S._tempV31,H$S._tempV33),H$EK.subtract(H$S._tempV33,H$S._tempV32,H$f[1]),H$EK.subtract(H$S._tempV31,H$S._tempV30,H$S._tempV33),H$EK.subtract(H$S._tempV33,H$S._tempV30,H$f[2]),H$EK.subtract(H$S._tempV31,H$S._tempV30,H$S._tempV33),H$EK.add(H$S._tempV33,H$S._tempV32,H$f[3]),H$EK.subtract(H$S._tempV30,H$S._tempV31,H$S._tempV33),H$EK.add(H$S._tempV33,H$S._tempV32,H$f[4]),H$EK.subtract(H$S._tempV30,H$S._tempV31,H$S._tempV33),H$EK.subtract(H$S._tempV33,H$S._tempV32,H$f[5]),H$EK.scale(H$f[0],-1,H$f[6]),H$EK.subtract(H$S._tempV32,H$S._tempV30,H$S._tempV33),H$EK.subtract(H$S._tempV33,H$S._tempV31,H$f[7])},H$f.equals=function(H$f){return this.extents==H$f.extents&&this.transformation==H$f.transformation},H$f.cloneTo=function(H$f){var H$K=H$f;this.extents.cloneTo(H$K.extents),this.transformation.cloneTo(H$K.transformation)},H$S.createByBoundBox=function(H$f,H$K){var H$Y=H$f.min,H$X=H$f.max;H$EK.subtract(H$X,H$Y,H$S._tempV30),H$EK.scale(H$S._tempV30,.5,H$S._tempV30),H$EK.add(H$Y,H$S._tempV30,H$S._tempV31),H$EK.subtract(H$X,H$S._tempV31,H$S._tempV32),H$fK.translation(H$S._tempV31,H$S._tempM0);var H$L=H$S._tempV32.clone(),H$H=H$S._tempM0.clone();H$K.extents=H$L,H$K.transformation=H$H},H$S.createByMinAndMaxVertex=function(H$f,H$K){return H$EK.subtract(H$K,H$f,H$S._tempV30),H$EK.scale(H$S._tempV30,.5,H$S._tempV30),H$EK.add(H$f,H$S._tempV30,H$S._tempV31),H$EK.subtract(H$K,H$S._tempV31,H$S._tempV32),H$fK.translation(H$S._tempV31,H$S._tempM0),new H$S(H$S._tempV32,H$S._tempM0)},H$S._getRows=function(H$f,H$K){H$K.length=3;var H$Y=H$f.elements,H$X=H$K[0].elements;H$X[0]=H$Y[0],H$X[1]=H$Y[1],H$X[2]=H$Y[2];var H$L=H$K[1].elements;H$L[0]=H$Y[4],H$L[1]=H$Y[5],H$L[2]=H$Y[6];var H$H=H$K[2].elements;H$H[0]=H$Y[8],H$H[1]=H$Y[9],H$H[2]=H$Y[10]},H$S.getObbtoObbMatrix4x4=function(H$f,H$K,H$Y,H$X){var H$L=H$f.transformation,H$H=H$K.transformation;if(H$Y){H$S._getRows(H$L,H$S._rows1),H$S._getRows(H$H,H$S._rows2);for(var H$E=0;H$E<3;H$E++)for(var H$d=0;H$d<3;H$d++)H$X.setElementByRowColumn(H$E,H$d,H$EK.dot(H$S._rows2[H$E],H$S._rows1[H$d]));H$K.getCenter(H$S._tempV30),H$f.getCenter(H$S._tempV31),H$EK.subtract(H$S._tempV30,H$S._tempV31,H$S._tempV32);var H$O=H$X.elements;H$O[12]=H$EK.dot(H$S._tempV32,H$S._rows1[0]),H$O[13]=H$EK.dot(H$S._tempV32,H$S._rows1[1]),H$O[14]=H$EK.dot(H$S._tempV32,H$S._rows1[2]),H$O[15]=1}else H$L.invert(H$S._tempM0),H$fK.multiply(H$H,H$S._tempM0,H$X)},H$S.merge=function(H$f,H$K,H$Y){var H$X=H$f.extents,H$L=H$f.transformation;H$S.getObbtoObbMatrix4x4(H$f,H$K,H$Y,H$S._tempM0),H$K._getLocalCorners(H$S._corners),H$EK.transformCoordinate(H$S._corners[0],H$S._tempM0,H$S._corners[0]),H$EK.transformCoordinate(H$S._corners[1],H$S._tempM0,H$S._corners[1]),H$EK.transformCoordinate(H$S._corners[2],H$S._tempM0,H$S._corners[2]),H$EK.transformCoordinate(H$S._corners[3],H$S._tempM0,H$S._corners[3]),H$EK.transformCoordinate(H$S._corners[4],H$S._tempM0,H$S._corners[4]),H$EK.transformCoordinate(H$S._corners[5],H$S._tempM0,H$S._corners[5]),H$EK.transformCoordinate(H$S._corners[6],H$S._tempM0,H$S._corners[6]),H$EK.transformCoordinate(H$S._corners[7],H$S._tempM0,H$S._corners[7]),H$EK.scale(H$X,-1,H$S._boxBound1.min),H$X.cloneTo(H$S._boxBound1.max),H$Df.createfromPoints(H$S._corners,H$S._boxBound2),H$Df.merge(H$S._boxBound2,H$S._boxBound1,H$S._boxBound3);var H$H=H$S._boxBound3.min,H$E=H$S._boxBound3.max;H$EK.subtract(H$E,H$H,H$S._tempV30),H$EK.scale(H$S._tempV30,.5,H$S._tempV30),H$EK.add(H$H,H$S._tempV30,H$S._tempV32),H$EK.subtract(H$E,H$S._tempV32,H$X),H$EK.transformCoordinate(H$S._tempV32,H$L,H$S._tempV33)},H$Z(H$S,["_tempV30",function(){return this._tempV30=new H$EK},"_tempV31",function(){return this._tempV31=new H$EK},"_tempV32",function(){return this._tempV32=new H$EK},"_tempV33",function(){return this._tempV33=new H$EK},"_tempV34",function(){return this._tempV34=new H$EK},"_tempV35",function(){return this._tempV35=new H$EK},"_tempV36",function(){return this._tempV36=new H$EK},"_tempM0",function(){return this._tempM0=new H$fK},"_tempM1",function(){return this._tempM1=new H$fK},"_corners",function(){return this._corners=[new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK]},"_rows1",function(){return this._rows1=[new H$EK,new H$EK,new H$EK]},"_rows2",function(){return this._rows2=[new H$EK,new H$EK,new H$EK]},"_ray",function(){return this._ray=new H$LK(new H$EK,new H$EK)},"_boxBound1",function(){return this._boxBound1=new H$Df(new H$EK,new H$EK)},"_boxBound2",function(){return this._boxBound2=new H$Df(new H$EK,new H$EK)},"_boxBound3",function(){return this._boxBound3=new H$Df(new H$EK,new H$EK)}])}(),function(){function H$C(H$f,H$K){this.normal=null,this.distance=NaN,void 0===H$K&&(H$K=0),this.normal=H$f,this.distance=H$K}return H$l(H$C,"laya.d3.math.Plane"),H$C.prototype.normalize=function(){var H$f=this.normal.elements,H$K=H$f[0],H$Y=H$f[1],H$X=H$f[2],H$L=1/Math.sqrt(H$K*H$K+H$Y*H$Y+H$X*H$X);H$f[0]=H$K*H$L,H$f[1]=H$Y*H$L,H$f[2]=H$X*H$L,this.distance*=H$L},H$C.createPlaneBy3P=function(H$f,H$K,H$Y){var H$X=H$f.elements,H$L=H$K.elements,H$H=H$Y.elements,H$E=H$L[0]-H$X[0],H$d=H$L[1]-H$X[1],H$O=H$L[2]-H$X[2],H$i=H$H[0]-H$X[0],H$U=H$H[1]-H$X[1],H$Z=H$H[2]-H$X[2],H$y=H$d*H$Z-H$O*H$U,H$l=H$O*H$i-H$E*H$Z,H$B=H$E*H$U-H$d*H$i,H$$=1/Math.sqrt(H$y*H$y+H$l*H$l+H$B*H$B),H$h=H$y*H$$,H$A=H$l*H$$,H$x=H$B*H$$,H$S=H$C._TEMPVec3.elements;H$S[0]=H$h,H$S[1]=H$A,H$S[2]=H$x;var H$z=-(H$h*H$X[0]+H$A*H$X[1]+H$x*H$X[2]);return new H$C(H$C._TEMPVec3,H$z)},H$C.PlaneIntersectionType_Back=0,H$C.PlaneIntersectionType_Front=1,H$C.PlaneIntersectionType_Intersecting=2,H$Z(H$C,["_TEMPVec3",function(){return this._TEMPVec3=new H$EK}]),H$C}()),H$YK=function(){function H$L(H$f,H$K,H$Y,H$X){this.elements=new Float32Array(4),void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=1),this.elements[0]=H$f,this.elements[1]=H$K,this.elements[2]=H$Y,this.elements[3]=H$X}H$l(H$L,"laya.d3.math.Quaternion");var H$f=H$L.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.scaling=function(H$f,H$K){var H$Y=H$K.elements,H$X=this.elements;H$Y[0]=H$X[0]*H$f,H$Y[1]=H$X[1]*H$f,H$Y[2]=H$X[2]*H$f,H$Y[3]=H$X[3]*H$f},H$f.normalize=function(H$f){var H$K=H$f.elements,H$Y=this.elements,H$X=H$Y[0],H$L=H$Y[1],H$H=H$Y[2],H$E=H$Y[3],H$d=H$X*H$X+H$L*H$L+H$H*H$H+H$E*H$E;0<H$d&&(H$d=1/Math.sqrt(H$d),H$K[0]=H$X*H$d,H$K[1]=H$L*H$d,H$K[2]=H$H*H$d,H$K[3]=H$E*H$d)},H$f.length=function(){var H$f=this.elements,H$K=H$f[0],H$Y=H$f[1],H$X=H$f[2],H$L=H$f[3];return Math.sqrt(H$K*H$K+H$Y*H$Y+H$X*H$X+H$L*H$L)},H$f.rotateX=function(H$f,H$K){var H$Y=H$K.elements,H$X=this.elements;H$f*=.5;var H$L=H$X[0],H$H=H$X[1],H$E=H$X[2],H$d=H$X[3],H$O=Math.sin(H$f),H$i=Math.cos(H$f);H$Y[0]=H$L*H$i+H$d*H$O,H$Y[1]=H$H*H$i+H$E*H$O,H$Y[2]=H$E*H$i-H$H*H$O,H$Y[3]=H$d*H$i-H$L*H$O},H$f.rotateY=function(H$f,H$K){var H$Y=H$K.elements,H$X=this.elements;H$f*=.5;var H$L=H$X[0],H$H=H$X[1],H$E=H$X[2],H$d=H$X[3],H$O=Math.sin(H$f),H$i=Math.cos(H$f);H$Y[0]=H$L*H$i-H$E*H$O,H$Y[1]=H$H*H$i+H$d*H$O,H$Y[2]=H$E*H$i+H$L*H$O,H$Y[3]=H$d*H$i-H$H*H$O},H$f.rotateZ=function(H$f,H$K){var H$Y=H$K.elements,H$X=this.elements;H$f*=.5;var H$L=H$X[0],H$H=H$X[1],H$E=H$X[2],H$d=H$X[3],H$O=Math.sin(H$f),H$i=Math.cos(H$f);H$Y[0]=H$L*H$i+H$H*H$O,H$Y[1]=H$H*H$i-H$L*H$O,H$Y[2]=H$E*H$i+H$d*H$O,H$Y[3]=H$d*H$i-H$E*H$O},H$f.getYawPitchRoll=function(H$f){H$EK.transformQuat(H$EK.ForwardRH,this,H$L.TEMPVector31),H$EK.transformQuat(H$EK.Up,this,H$L.TEMPVector32);var H$K=H$L.TEMPVector32.elements;H$L.angleTo(H$EK.ZERO,H$L.TEMPVector31,H$L.TEMPVector33);var H$Y=H$L.TEMPVector33.elements;H$Y[0]==Math.PI/2?(H$Y[1]=H$L.arcTanAngle(H$K[2],H$K[0]),H$Y[2]=0):H$Y[0]==-Math.PI/2?(H$Y[1]=H$L.arcTanAngle(-H$K[2],-H$K[0]),H$Y[2]=0):(H$fK.createRotationY(-H$Y[1],H$L.TEMPMatrix0),H$fK.createRotationX(-H$Y[0],H$L.TEMPMatrix1),H$EK.transformCoordinate(H$L.TEMPVector32,H$L.TEMPMatrix0,H$L.TEMPVector32),H$EK.transformCoordinate(H$L.TEMPVector32,H$L.TEMPMatrix1,H$L.TEMPVector32),H$Y[2]=H$L.arcTanAngle(H$K[1],-H$K[0])),H$Y[1]<=-Math.PI&&(H$Y[1]=Math.PI),H$Y[2]<=-Math.PI&&(H$Y[2]=Math.PI),H$Y[1]>=Math.PI&&H$Y[2]>=Math.PI&&(H$Y[1]=0,H$Y[2]=0,H$Y[0]=Math.PI-H$Y[0]);var H$X=H$f.elements;H$X[0]=H$Y[1],H$X[1]=H$Y[0],H$X[2]=H$Y[2]},H$f.invert=function(H$f){var H$K=H$f.elements,H$Y=this.elements,H$X=H$Y[0],H$L=H$Y[1],H$H=H$Y[2],H$E=H$Y[3],H$d=H$X*H$X+H$L*H$L+H$H*H$H+H$E*H$E,H$O=H$d?1/H$d:0;H$K[0]=-H$X*H$O,H$K[1]=-H$L*H$O,H$K[2]=-H$H*H$O,H$K[3]=H$E*H$O},H$f.identity=function(){var H$f=this.elements;H$f[0]=0,H$f[1]=0,H$f[2]=0,H$f[3]=1},H$f.fromArray=function(H$f,H$K){void 0===H$K&&(H$K=0),this.elements[0]=H$f[H$K+0],this.elements[1]=H$f[H$K+1],this.elements[2]=H$f[H$K+2],this.elements[3]=H$f[H$K+3]},H$f.cloneTo=function(H$f){var H$K,H$Y,H$X;if((H$Y=this.elements)!==(H$X=H$f.elements))for(H$K=0;H$K<4;++H$K)H$X[H$K]=H$Y[H$K]},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$f.equals=function(H$f){var H$K=this.elements,H$Y=H$f.elements;return H$of.nearEqual(H$K[0],H$Y[0])&&H$of.nearEqual(H$K[1],H$Y[1])&&H$of.nearEqual(H$K[2],H$Y[2])&&H$of.nearEqual(H$K[3],H$Y[3])},H$f.lengthSquared=function(){var H$f=this.elements[0],H$K=this.elements[1],H$Y=this.elements[2],H$X=this.elements[3];return H$f*H$f+H$K*H$K+H$Y*H$Y+H$X*H$X},H$B(0,H$f,"x",function(){return this.elements[0]}),H$B(0,H$f,"y",function(){return this.elements[1]}),H$B(0,H$f,"z",function(){return this.elements[2]}),H$B(0,H$f,"w",function(){return this.elements[3]}),H$L.createFromYawPitchRoll=function(H$f,H$K,H$Y,H$X){var H$L=.5*H$Y,H$H=.5*H$K,H$E=.5*H$f,H$d=Math.sin(H$L),H$O=Math.cos(H$L),H$i=Math.sin(H$H),H$U=Math.cos(H$H),H$Z=Math.sin(H$E),H$y=Math.cos(H$E),H$l=H$X.elements;H$l[0]=H$y*H$i*H$O+H$Z*H$U*H$d,H$l[1]=H$Z*H$U*H$O-H$y*H$i*H$d,H$l[2]=H$y*H$U*H$d-H$Z*H$i*H$O,H$l[3]=H$y*H$U*H$O+H$Z*H$i*H$d},H$L.multiply=function(H$f,H$K,H$Y){var H$X=H$f.elements,H$L=H$K.elements,H$H=H$Y.elements,H$E=H$X[0],H$d=H$X[1],H$O=H$X[2],H$i=H$X[3],H$U=H$L[0],H$Z=H$L[1],H$y=H$L[2],H$l=H$L[3],H$B=H$d*H$y-H$O*H$Z,H$$=H$O*H$U-H$E*H$y,H$h=H$E*H$Z-H$d*H$U,H$A=H$E*H$U+H$d*H$Z+H$O*H$y;H$H[0]=H$E*H$l+H$U*H$i+H$B,H$H[1]=H$d*H$l+H$Z*H$i+H$$,H$H[2]=H$O*H$l+H$y*H$i+H$h,H$H[3]=H$i*H$l-H$A},H$L.arcTanAngle=function(H$f,H$K){return 0==H$f?1==H$K?Math.PI/2:-Math.PI/2:0<H$f?Math.atan(H$K/H$f):H$f<0?0<H$K?Math.atan(H$K/H$f)+Math.PI:Math.atan(H$K/H$f)-Math.PI:0},H$L.angleTo=function(H$f,H$K,H$Y){H$EK.subtract(H$K,H$f,H$L.TEMPVector30),H$EK.normalize(H$L.TEMPVector30,H$L.TEMPVector30),H$Y.elements[0]=Math.asin(H$L.TEMPVector30.y),H$Y.elements[1]=H$L.arcTanAngle(-H$L.TEMPVector30.z,-H$L.TEMPVector30.x)},H$L.createFromAxisAngle=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements;H$K*=.5;var H$H=Math.sin(H$K);H$X[0]=H$H*H$L[0],H$X[1]=H$H*H$L[1],H$X[2]=H$H*H$L[2],H$X[3]=Math.cos(H$K)},H$L.createFromMatrix3x3=function(H$f,H$K){var H$Y,H$X=H$K.elements,H$L=H$f.elements,H$H=H$L[0]+H$L[4]+H$L[8];if(0<H$H)H$Y=Math.sqrt(H$H+1),H$X[3]=.5*H$Y,H$Y=.5/H$Y,H$X[0]=(H$L[5]-H$L[7])*H$Y,H$X[1]=(H$L[6]-H$L[2])*H$Y,H$X[2]=(H$L[1]-H$L[3])*H$Y;else{var H$E=0;H$L[4]>H$L[0]&&(H$E=1),H$L[8]>H$L[3*H$E+H$E]&&(H$E=2);var H$d=(H$E+1)%3,H$O=(H$E+2)%3;H$Y=Math.sqrt(H$L[3*H$E+H$E]-H$L[3*H$d+H$d]-H$L[3*H$O+H$O]+1),H$X[H$E]=.5*H$Y,H$Y=.5/H$Y,H$X[3]=(H$L[3*H$d+H$O]-H$L[3*H$O+H$d])*H$Y,H$X[H$d]=(H$L[3*H$d+H$E]+H$L[3*H$E+H$d])*H$Y,H$X[H$O]=(H$L[3*H$O+H$E]+H$L[3*H$E+H$O])*H$Y}},H$L.createFromMatrix4x4=function(H$f,H$K){var H$Y,H$X,H$L=H$f.elements,H$H=H$K.elements,H$E=H$L[0]+H$L[5]+H$L[10];0<H$E?(H$Y=Math.sqrt(H$E+1),H$H[3]=.5*H$Y,H$Y=.5/H$Y,H$H[0]=(H$L[6]-H$L[9])*H$Y,H$H[1]=(H$L[8]-H$L[2])*H$Y,H$H[2]=(H$L[1]-H$L[4])*H$Y):H$L[0]>=H$L[5]&&H$L[0]>=H$L[10]?(H$X=.5/(H$Y=Math.sqrt(1+H$L[0]-H$L[5]-H$L[10])),H$H[0]=.5*H$Y,H$H[1]=(H$L[1]+H$L[4])*H$X,H$H[2]=(H$L[2]+H$L[8])*H$X,H$H[3]=(H$L[6]-H$L[9])*H$X):H$L[5]>H$L[10]?(H$X=.5/(H$Y=Math.sqrt(1+H$L[5]-H$L[0]-H$L[10])),H$H[0]=(H$L[4]+H$L[1])*H$X,H$H[1]=.5*H$Y,H$H[2]=(H$L[9]+H$L[6])*H$X,H$H[3]=(H$L[8]-H$L[2])*H$X):(H$X=.5/(H$Y=Math.sqrt(1+H$L[10]-H$L[0]-H$L[5])),H$H[0]=(H$L[8]+H$L[2])*H$X,H$H[1]=(H$L[9]+H$L[6])*H$X,H$H[2]=.5*H$Y,H$H[3]=(H$L[1]-H$L[4])*H$X)},H$L.slerp=function(H$f,H$K,H$Y,H$X){var H$L,H$H,H$E,H$d,H$O,H$i=H$f.elements,H$U=H$K.elements,H$Z=H$X.elements,H$y=H$i[0],H$l=H$i[1],H$B=H$i[2],H$$=H$i[3],H$h=H$U[0],H$A=H$U[1],H$x=H$U[2],H$S=H$U[3];return(H$H=H$y*H$h+H$l*H$A+H$B*H$x+H$$*H$S)<0&&(H$H=-H$H,H$h=-H$h,H$A=-H$A,H$x=-H$x,H$S=-H$S),H$O=1e-6<1-H$H?(H$L=Math.acos(H$H),H$E=Math.sin(H$L),H$d=Math.sin((1-H$Y)*H$L)/H$E,Math.sin(H$Y*H$L)/H$E):(H$d=1-H$Y,H$Y),H$Z[0]=H$d*H$y+H$O*H$h,H$Z[1]=H$d*H$l+H$O*H$A,H$Z[2]=H$d*H$B+H$O*H$x,H$Z[3]=H$d*H$$+H$O*H$S,H$Z},H$L.lerp=function(H$f,H$K,H$Y,H$X){var H$L=H$X.elements,H$H=H$f.elements,H$E=H$K.elements,H$d=H$H[0],H$O=H$H[1],H$i=H$H[2],H$U=H$H[3];H$L[0]=H$d+H$Y*(H$E[0]-H$d),H$L[1]=H$O+H$Y*(H$E[1]-H$O),H$L[2]=H$i+H$Y*(H$E[2]-H$i),H$L[3]=H$U+H$Y*(H$E[3]-H$U)},H$L.add=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=H$L[0]+H$H[0],H$X[1]=H$L[1]+H$H[1],H$X[2]=H$L[2]+H$H[2],H$X[3]=H$L[3]+H$H[3]},H$L.dot=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements;return H$Y[0]*H$X[0]+H$Y[1]*H$X[1]+H$Y[2]*H$X[2]+H$Y[3]*H$X[3]},H$L.rotationLookAt=function(H$f,H$K,H$Y){H$L.lookAt(H$EK.ZERO,H$f,H$K,H$Y)},H$L.lookAt=function(H$f,H$K,H$Y,H$X){H$Ff.lookAt(H$f,H$K,H$Y,H$L._tempMatrix3x3),H$L.rotationMatrix(H$L._tempMatrix3x3,H$X)},H$L.invert=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements,H$L=H$f.lengthSquared();H$of.isZero(H$L)||(H$L=1/H$L,H$X[0]=-H$Y[0]*H$L,H$X[1]=-H$Y[1]*H$L,H$X[2]=-H$Y[2]*H$L,H$X[3]=H$Y[3]*H$L)},H$L.rotationMatrix=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$Y[0],H$L=H$Y[1],H$H=H$Y[2],H$E=H$Y[3],H$d=H$Y[4],H$O=H$Y[5],H$i=H$Y[6],H$U=H$Y[7],H$Z=H$Y[8],H$y=H$K.elements,H$l=NaN,H$B=NaN,H$$=H$X+H$d+H$Z;0<H$$?(H$l=Math.sqrt(H$$+1),H$y[3]=.5*H$l,H$l=.5/H$l,H$y[0]=(H$O-H$U)*H$l,H$y[1]=(H$i-H$H)*H$l,H$y[2]=(H$L-H$E)*H$l):H$d<=H$X&&H$Z<=H$X?(H$B=.5/(H$l=Math.sqrt(1+H$X-H$d-H$Z)),H$y[0]=.5*H$l,H$y[1]=(H$L+H$E)*H$B,H$y[2]=(H$H+H$i)*H$B,H$y[3]=(H$O-H$U)*H$B):H$Z<H$d?(H$B=.5/(H$l=Math.sqrt(1+H$d-H$X-H$Z)),H$y[0]=(H$E+H$L)*H$B,H$y[1]=.5*H$l,H$y[2]=(H$U+H$O)*H$B,H$y[3]=(H$i-H$H)*H$B):(H$B=.5/(H$l=Math.sqrt(1+H$Z-H$X-H$d)),H$y[0]=(H$i+H$H)*H$B,H$y[1]=(H$U+H$O)*H$B,H$y[2]=.5*H$l,H$y[3]=(H$L-H$E)*H$B)},H$L.DEFAULT=new H$L,H$Z(H$L,["TEMPVector30",function(){return this.TEMPVector30=new H$EK},"TEMPVector31",function(){return this.TEMPVector31=new H$EK},"TEMPVector32",function(){return this.TEMPVector32=new H$EK},"TEMPVector33",function(){return this.TEMPVector33=new H$EK},"TEMPMatrix0",function(){return this.TEMPMatrix0=new H$fK},"TEMPMatrix1",function(){return this.TEMPMatrix1=new H$fK},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new H$Ff},"NAN",function(){return this.NAN=new H$L(NaN,NaN,NaN,NaN)}]),H$L}(),H$XK=function(){function H$f(H$f){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=H$f,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}H$l(H$f,"laya.d3.math.Rand");var H$K=H$f.prototype;return H$K.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},H$K.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},H$K.getSignedFloat=function(){return 2*this.getFloat()-1},H$B(0,H$K,"seed",function(){return this.seeds[0]},function(H$f){this.seeds[0]=H$f,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),H$f.getFloatFromInt=function(H$f){return 1/8388607*(8388607&H$f)},H$f.getByteFromInt=function(H$f){return(8388607&H$f)>>>15},H$f}(),H$LK=(function(){function H$L(H$f){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(H$f instanceof Array)||4!==H$f.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|H$f[0],this._state0L=0|H$f[1],this._state1U=0|H$f[2],this._state1L=0|H$f[3]}H$l(H$L,"laya.d3.math.RandX");var H$f=H$L.prototype;H$f.randomint=function(){var H$f=this._state0U,H$K=this._state0L,H$Y=this._state1U,H$X=this._state1L,H$L=(H$X>>>0)+(H$K>>>0),H$H=H$Y+H$f+(H$L/2>>>31)>>>0,H$E=H$L>>>0,H$d=0,H$O=0;H$d=(H$f^=H$d=H$f<<23|(-512&H$K)>>>9)^(this._state0U=H$Y),H$O=(H$K^=H$O=H$K<<23)^(this._state0L=H$X);H$d^=H$f>>>18,H$O^=H$K>>>18|(262143&H$f)<<14;return H$d^=H$Y>>>5,H$O^=H$X>>>5|(31&H$Y)<<27,this._state1U=H$d,this._state1L=H$O,[H$H,H$E]},H$f.random=function(){var H$f=this.randomint(),H$K=H$f[0],H$Y=1023<<20|H$K>>>12,H$X=0|(H$f[1]>>>12|(4095&H$K)<<20);return H$L._CONVERTION_BUFFER.setUint32(0,H$Y,!1),H$L._CONVERTION_BUFFER.setUint32(4,H$X,!1),H$XK._CONVERTION_BUFFER.getFloat64(0,!1)-1},H$Z(H$L,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new H$XK([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function H$f(H$f,H$K){this.origin=null,this.direction=null,this.origin=H$f,this.direction=H$K}return H$l(H$f,"laya.d3.math.Ray"),H$f}()),H$HK=function(){function H$f(H$f,H$K){this.elements=new Float32Array(2),void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0);var H$Y=this.elements;H$Y[0]=H$f,H$Y[1]=H$K}H$l(H$f,"laya.d3.math.Vector2");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.fromArray=function(H$f,H$K){void 0===H$K&&(H$K=0),this.elements[0]=H$f[H$K+0],this.elements[1]=H$f[H$K+1]},H$K.cloneTo=function(H$f){var H$K=H$f.elements,H$Y=this.elements;H$K[0]=H$Y[0],H$K[1]=H$Y[1]},H$K.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$K,"x",function(){return this.elements[0]},function(H$f){this.elements[0]=H$f}),H$B(0,H$K,"y",function(){return this.elements[1]},function(H$f){this.elements[1]=H$f}),H$f.scale=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements;H$X[0]=H$L[0]*H$K,H$X[1]=H$L[1]*H$K},H$Z(H$f,["ZERO",function(){return this.ZERO=new H$f(0,0)},"ONE",function(){return this.ONE=new H$f(1,1)}]),H$f}(),H$EK=function(){function H$U(H$f,H$K,H$Y){this.elements=new Float32Array(3),void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0);var H$X=this.elements;H$X[0]=H$f,H$X[1]=H$K,H$X[2]=H$Y}H$l(H$U,"laya.d3.math.Vector3");var H$f=H$U.prototype;return H$C.imps(H$f,{"laya.d3.core.IClone":!0}),H$f.fromArray=function(H$f,H$K){void 0===H$K&&(H$K=0),this.elements[0]=H$f[H$K+0],this.elements[1]=H$f[H$K+1],this.elements[2]=H$f[H$K+2]},H$f.cloneTo=function(H$f){var H$K=H$f.elements,H$Y=this.elements;H$K[0]=H$Y[0],H$K[1]=H$Y[1],H$K[2]=H$Y[2]},H$f.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$f.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},H$f.reset=function(H$f,H$K,H$Y){this.elements[0]=H$f,this.elements[1]=H$K,this.elements[2]=H$Y},H$B(0,H$f,"x",function(){return this.elements[0]},function(H$f){this.elements[0]=H$f}),H$B(0,H$f,"y",function(){return this.elements[1]},function(H$f){this.elements[1]=H$f}),H$B(0,H$f,"z",function(){return this.elements[2]},function(H$f){this.elements[2]=H$f}),H$U.distanceSquared=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements,H$L=H$Y[0]-H$X[0],H$H=H$Y[1]-H$X[1],H$E=H$Y[2]-H$X[2];return H$L*H$L+H$H*H$H+H$E*H$E},H$U.distance=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements,H$L=H$Y[0]-H$X[0],H$H=H$Y[1]-H$X[1],H$E=H$Y[2]-H$X[2];return Math.sqrt(H$L*H$L+H$H*H$H+H$E*H$E)},H$U.min=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=Math.min(H$L[0],H$H[0]),H$X[1]=Math.min(H$L[1],H$H[1]),H$X[2]=Math.min(H$L[2],H$H[2])},H$U.max=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=Math.max(H$L[0],H$H[0]),H$X[1]=Math.max(H$L[1],H$H[1]),H$X[2]=Math.max(H$L[2],H$H[2])},H$U.transformQuat=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements,H$E=H$L[0],H$d=H$L[1],H$O=H$L[2],H$i=H$H[0],H$U=H$H[1],H$Z=H$H[2],H$y=H$H[3],H$l=H$y*H$E+H$U*H$O-H$Z*H$d,H$B=H$y*H$d+H$Z*H$E-H$i*H$O,H$$=H$y*H$O+H$i*H$d-H$U*H$E,H$h=-H$i*H$E-H$U*H$d-H$Z*H$O;H$X[0]=H$l*H$y+H$h*-H$i+H$B*-H$Z-H$$*-H$U,H$X[1]=H$B*H$y+H$h*-H$U+H$$*-H$i-H$l*-H$Z,H$X[2]=H$$*H$y+H$h*-H$Z+H$l*-H$U-H$B*-H$i},H$U.scalarLength=function(H$f){var H$K=H$f.elements,H$Y=H$K[0],H$X=H$K[1],H$L=H$K[2];return Math.sqrt(H$Y*H$Y+H$X*H$X+H$L*H$L)},H$U.scalarLengthSquared=function(H$f){var H$K=H$f.elements,H$Y=H$K[0],H$X=H$K[1],H$L=H$K[2];return H$Y*H$Y+H$X*H$X+H$L*H$L},H$U.normalize=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements,H$L=H$Y[0],H$H=H$Y[1],H$E=H$Y[2],H$d=H$L*H$L+H$H*H$H+H$E*H$E;0<H$d&&(H$d=1/Math.sqrt(H$d),H$X[0]=H$Y[0]*H$d,H$X[1]=H$Y[1]*H$d,H$X[2]=H$Y[2]*H$d)},H$U.multiply=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=H$L[0]*H$H[0],H$X[1]=H$L[1]*H$H[1],H$X[2]=H$L[2]*H$H[2]},H$U.scale=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements;H$X[0]=H$L[0]*H$K,H$X[1]=H$L[1]*H$K,H$X[2]=H$L[2]*H$K},H$U.lerp=function(H$f,H$K,H$Y,H$X){var H$L=H$X.elements,H$H=H$f.elements,H$E=H$K.elements,H$d=H$H[0],H$O=H$H[1],H$i=H$H[2];H$L[0]=H$d+H$Y*(H$E[0]-H$d),H$L[1]=H$O+H$Y*(H$E[1]-H$O),H$L[2]=H$i+H$Y*(H$E[2]-H$i)},H$U.transformV3ToV3=function(H$f,H$K,H$Y){var H$X=H$U._tempVector4;H$U.transformV3ToV4(H$f,H$K,H$X);var H$L=H$X.elements,H$H=H$Y.elements;H$H[0]=H$L[0],H$H[1]=H$L[1],H$H[2]=H$L[2]},H$U.transformV3ToV4=function(H$f,H$K,H$Y){var H$X=H$f.elements,H$L=H$X[0],H$H=H$X[1],H$E=H$X[2],H$d=H$K.elements,H$O=H$Y.elements;H$O[0]=H$L*H$d[0]+H$H*H$d[4]+H$E*H$d[8]+H$d[12],H$O[1]=H$L*H$d[1]+H$H*H$d[5]+H$E*H$d[9]+H$d[13],H$O[2]=H$L*H$d[2]+H$H*H$d[6]+H$E*H$d[10]+H$d[14],H$O[3]=H$L*H$d[3]+H$H*H$d[7]+H$E*H$d[11]+H$d[15]},H$U.TransformNormal=function(H$f,H$K,H$Y){var H$X=H$f.elements,H$L=H$X[0],H$H=H$X[1],H$E=H$X[2],H$d=H$K.elements,H$O=H$Y.elements;H$O[0]=H$L*H$d[0]+H$H*H$d[4]+H$E*H$d[8],H$O[1]=H$L*H$d[1]+H$H*H$d[5]+H$E*H$d[9],H$O[2]=H$L*H$d[2]+H$H*H$d[6]+H$E*H$d[10]},H$U.transformCoordinate=function(H$f,H$K,H$Y){var H$X=H$U._tempVector4.elements,H$L=H$f.elements,H$H=H$L[0],H$E=H$L[1],H$d=H$L[2],H$O=H$K.elements;H$X[0]=H$H*H$O[0]+H$E*H$O[4]+H$d*H$O[8]+H$O[12],H$X[1]=H$H*H$O[1]+H$E*H$O[5]+H$d*H$O[9]+H$O[13],H$X[2]=H$H*H$O[2]+H$E*H$O[6]+H$d*H$O[10]+H$O[14],H$X[3]=1/(H$H*H$O[3]+H$E*H$O[7]+H$d*H$O[11]+H$O[15]);var H$i=H$Y.elements;H$i[0]=H$X[0]*H$X[3],H$i[1]=H$X[1]*H$X[3],H$i[2]=H$X[2]*H$X[3]},H$U.Clamp=function(H$f,H$K,H$Y,H$X){var H$L=H$f.elements,H$H=H$L[0],H$E=H$L[1],H$d=H$L[2],H$O=H$K.elements,H$i=H$O[0],H$U=H$O[1],H$Z=H$O[2],H$y=H$Y.elements,H$l=H$y[0],H$B=H$y[1],H$$=H$y[2],H$h=H$X.elements;H$H=(H$H=H$l<H$H?H$l:H$H)<H$i?H$i:H$H,H$E=(H$E=H$B<H$E?H$B:H$E)<H$U?H$U:H$E,H$d=(H$d=H$$<H$d?H$$:H$d)<H$Z?H$Z:H$d,H$h[0]=H$H,H$h[1]=H$E,H$h[2]=H$d},H$U.add=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=H$L[0]+H$H[0],H$X[1]=H$L[1]+H$H[1],H$X[2]=H$L[2]+H$H[2]},H$U.subtract=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=H$L[0]-H$H[0],H$X[1]=H$L[1]-H$H[1],H$X[2]=H$L[2]-H$H[2]},H$U.cross=function(H$f,H$K,H$Y){var H$X=H$f.elements,H$L=H$K.elements,H$H=H$Y.elements,H$E=H$X[0],H$d=H$X[1],H$O=H$X[2],H$i=H$L[0],H$U=H$L[1],H$Z=H$L[2];H$H[0]=H$d*H$Z-H$O*H$U,H$H[1]=H$O*H$i-H$E*H$Z,H$H[2]=H$E*H$U-H$d*H$i},H$U.dot=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements;return H$Y[0]*H$X[0]+H$Y[1]*H$X[1]+H$Y[2]*H$X[2]},H$U.equals=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements;return H$of.nearEqual(Math.abs(H$Y[0]),Math.abs(H$X[0]))&&H$of.nearEqual(Math.abs(H$Y[1]),Math.abs(H$X[1]))&&H$of.nearEqual(Math.abs(H$Y[2]),Math.abs(H$X[2]))},H$U.ZERO=new H$U(0,0,0),H$U.ONE=new H$U(1,1,1),H$U.NegativeUnitX=new H$U(-1,0,0),H$U.UnitX=new H$U(1,0,0),H$U.UnitY=new H$U(0,1,0),H$U.UnitZ=new H$U(0,0,1),H$U.ForwardRH=new H$U(0,0,-1),H$U.ForwardLH=new H$U(0,0,1),H$U.Up=new H$U(0,1,0),H$U.NAN=new H$U(NaN,NaN,NaN),H$Z(H$U,["_tempVector4",function(){return this._tempVector4=new H$dK}]),H$U}(),H$dK=function(){function H$f(H$f,H$K,H$Y,H$X){this.elements=new Float32Array(4),void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=0);var H$L=this.elements;H$L[0]=H$f,H$L[1]=H$K,H$L[2]=H$Y,H$L[3]=H$X}H$l(H$f,"laya.d3.math.Vector4");var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K.fromArray=function(H$f,H$K){void 0===H$K&&(H$K=0),this.elements[0]=H$f[H$K+0],this.elements[1]=H$f[H$K+1],this.elements[2]=H$f[H$K+2],this.elements[3]=H$f[H$K+3]},H$K.cloneTo=function(H$f){var H$K=H$f.elements,H$Y=this.elements;H$K[0]=H$Y[0],H$K[1]=H$Y[1],H$K[2]=H$Y[2],H$K[3]=H$Y[3]},H$K.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$K.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},H$K.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},H$B(0,H$K,"x",function(){return this.elements[0]},function(H$f){this.elements[0]=H$f}),H$B(0,H$K,"y",function(){return this.elements[1]},function(H$f){this.elements[1]=H$f}),H$B(0,H$K,"z",function(){return this.elements[2]},function(H$f){this.elements[2]=H$f}),H$B(0,H$K,"w",function(){return this.elements[3]},function(H$f){this.elements[3]=H$f}),H$f.lerp=function(H$f,H$K,H$Y,H$X){var H$L=H$X.elements,H$H=H$f.elements,H$E=H$K.elements,H$d=H$H[0],H$O=H$H[1],H$i=H$H[2],H$U=H$H[3];H$L[0]=H$d+H$Y*(H$E[0]-H$d),H$L[1]=H$O+H$Y*(H$E[1]-H$O),H$L[2]=H$i+H$Y*(H$E[2]-H$i),H$L[3]=H$U+H$Y*(H$E[3]-H$U)},H$f.transformByM4x4=function(H$f,H$K,H$Y){var H$X=H$f.elements,H$L=H$X[0],H$H=H$X[1],H$E=H$X[2],H$d=H$X[3],H$O=H$K.elements,H$i=H$Y.elements;H$i[0]=H$L*H$O[0]+H$H*H$O[4]+H$E*H$O[8]+H$d*H$O[12],H$i[1]=H$L*H$O[1]+H$H*H$O[5]+H$E*H$O[9]+H$d*H$O[13],H$i[2]=H$L*H$O[2]+H$H*H$O[6]+H$E*H$O[10]+H$d*H$O[14],H$i[3]=H$L*H$O[3]+H$H*H$O[7]+H$E*H$O[11]+H$d*H$O[15]},H$f.equals=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements;return H$of.nearEqual(Math.abs(H$Y[0]),Math.abs(H$X[0]))&&H$of.nearEqual(Math.abs(H$Y[1]),Math.abs(H$X[1]))&&H$of.nearEqual(Math.abs(H$Y[2]),Math.abs(H$X[2]))&&H$of.nearEqual(Math.abs(H$Y[3]),Math.abs(H$X[3]))},H$f.normalize=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements,H$L=H$f.length();0<H$L&&(H$X[0]=H$Y[0]*H$L,H$X[1]=H$Y[1]*H$L,H$X[2]=H$Y[2]*H$L,H$X[3]=H$Y[3]*H$L)},H$f.add=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=H$L[0]+H$H[0],H$X[1]=H$L[1]+H$H[1],H$X[2]=H$L[2]+H$H[2],H$X[3]=H$L[3]+H$H[3]},H$f.subtract=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=H$L[0]-H$H[0],H$X[1]=H$L[1]-H$H[1],H$X[2]=H$L[2]-H$H[2],H$X[3]=H$L[3]-H$H[3]},H$f.multiply=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=H$L[0]*H$H[0],H$X[1]=H$L[1]*H$H[1],H$X[2]=H$L[2]*H$H[2],H$X[3]=H$L[3]*H$H[3]},H$f.scale=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements;H$X[0]=H$L[0]*H$K,H$X[1]=H$L[1]*H$K,H$X[2]=H$L[2]*H$K,H$X[3]=H$L[3]*H$K},H$f.Clamp=function(H$f,H$K,H$Y,H$X){var H$L=H$f.elements,H$H=H$L[0],H$E=H$L[1],H$d=H$L[2],H$O=H$L[3],H$i=H$K.elements,H$U=H$i[0],H$Z=H$i[1],H$y=H$i[2],H$l=H$i[3],H$B=H$Y.elements,H$$=H$B[0],H$h=H$B[1],H$A=H$B[2],H$x=H$B[3],H$S=H$X.elements;H$H=(H$H=H$$<H$H?H$$:H$H)<H$U?H$U:H$H,H$E=(H$E=H$h<H$E?H$h:H$E)<H$Z?H$Z:H$E,H$d=(H$d=H$A<H$d?H$A:H$d)<H$y?H$y:H$d,H$O=(H$O=H$x<H$O?H$x:H$O)<H$l?H$l:H$O,H$S[0]=H$H,H$S[1]=H$E,H$S[2]=H$d,H$S[3]=H$O},H$f.distanceSquared=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements,H$L=H$Y[0]-H$X[0],H$H=H$Y[1]-H$X[1],H$E=H$Y[2]-H$X[2],H$d=H$Y[3]-H$X[3];return H$L*H$L+H$H*H$H+H$E*H$E+H$d*H$d},H$f.distance=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements,H$L=H$Y[0]-H$X[0],H$H=H$Y[1]-H$X[1],H$E=H$Y[2]-H$X[2],H$d=H$Y[3]-H$X[3];return Math.sqrt(H$L*H$L+H$H*H$H+H$E*H$E+H$d*H$d)},H$f.dot=function(H$f,H$K){var H$Y=H$f.elements,H$X=H$K.elements;return H$Y[0]*H$X[0]+H$Y[1]*H$X[1]+H$Y[2]*H$X[2]+H$Y[3]*H$X[3]},H$f.min=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=Math.min(H$L[0],H$H[0]),H$X[1]=Math.min(H$L[1],H$H[1]),H$X[2]=Math.min(H$L[2],H$H[2]),H$X[3]=Math.min(H$L[3],H$H[3])},H$f.max=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K.elements;H$X[0]=Math.max(H$L[0],H$H[0]),H$X[1]=Math.max(H$L[1],H$H[1]),H$X[2]=Math.max(H$L[2],H$H[2]),H$X[3]=Math.max(H$L[3],H$H[3])},H$Z(H$f,["ZERO",function(){return this.ZERO=new H$f},"ONE",function(){return this.ONE=new H$f(1,1,1,1)},"UnitX",function(){return this.UnitX=new H$f(1,0,0,0)},"UnitY",function(){return this.UnitY=new H$f(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new H$f(0,0,1,0)},"UnitW",function(){return this.UnitW=new H$f(0,0,0,1)}]),H$f}(),H$OK=function(){function H$H(H$f,H$K,H$Y,H$X){this.minDepth=0,this.maxDepth=1,this.x=H$f,this.y=H$K,this.width=H$Y,this.height=H$X}H$l(H$H,"laya.d3.math.Viewport");var H$f=H$H.prototype;return H$f.project=function(H$f,H$K,H$Y){H$EK.transformV3ToV3(H$f,H$K,H$Y);var H$X=H$f.elements,H$L=H$K.elements,H$H=H$Y.elements,H$E=H$X[0]*H$L[3]+H$X[1]*H$L[7]+H$X[2]*H$L[11]+H$L[15];1!==H$E&&(H$H[0]=H$H[0]/H$E,H$H[1]=H$H[1]/H$E,H$H[2]=H$H[2]/H$E),H$H[0]=.5*(H$H[0]+1)*this.width+this.x,H$H[1]=.5*(1-H$H[1])*this.height+this.y,H$H[2]=H$H[2]*(this.maxDepth-this.minDepth)+this.minDepth},H$f.unprojectFromMat=function(H$f,H$K,H$Y){var H$X=H$f.elements,H$L=H$K.elements,H$H=H$Y.elements;H$H[0]=(H$X[0]-this.x)/this.width*2-1,H$H[1]=-((H$X[1]-this.y)/this.height*2-1);var H$E=(this.maxDepth-this.minDepth)/2;H$H[2]=(H$X[2]-this.minDepth-H$E)/H$E;var H$d=H$H[0]*H$L[3]+H$H[1]*H$L[7]+H$H[2]*H$L[11]+H$L[15];H$EK.transformV3ToV3(H$Y,H$K,H$Y),1!==H$d&&(H$H[0]=H$H[0]/H$d,H$H[1]=H$H[1]/H$d,H$H[2]=H$H[2]/H$d)},H$f.unprojectFromWVP=function(H$f,H$K,H$Y,H$X,H$L){H$fK.multiply(H$K,H$Y,H$H._tempMatrix4x4),H$X&&H$fK.multiply(H$H._tempMatrix4x4,H$X,H$H._tempMatrix4x4),H$H._tempMatrix4x4.invert(H$H._tempMatrix4x4),this.unprojectFromMat(H$f,H$H._tempMatrix4x4,H$L)},H$Z(H$H,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new H$fK}]),H$H}(),H$iK=function(){function H$m(H$f){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=H$f,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}H$l(H$m,"laya.d3.resource.models.SubMesh");var H$f=H$m.prototype;return H$C.imps(H$f,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),H$f._getVertexBuffer=function(H$f){return void 0===H$f&&(H$f=0),0===H$f?this._vertexBuffer:null},H$f._getIndexBuffer=function(){return this._indexBuffer},H$f._getStaticBatchBakedVertexs=function(H$f,H$K){var H$Y,H$X,H$L=this._vertexBuffer,H$H=H$L.vertexDeclaration,H$E=H$H.getVertexElementByUsage(0).offset/4,H$d=H$H.getVertexElementByUsage(3).offset/4,H$O=H$K.meshRender.lightmapScaleOffset,H$i=0,H$U=0,H$Z=0,H$y=0,H$l=0,H$B=0;if(H$O)if(H$X=H$H.getVertexElementByUsage(15))H$Z=H$H.vertexStride/4,H$Y=0<this._vertexCount?H$L.getData().slice(this._vertexStart*H$Z,(this._vertexStart+this._vertexCount)*H$Z):H$L.getData().slice(),H$y=H$X.offset/4;else{H$Z=(H$B=H$H.vertexStride/4)+2,H$Y=this._vertexCount?new Float32Array(this._vertexCount*(H$L.vertexDeclaration.vertexStride/4+2)):new Float32Array(H$L.vertexCount*(H$L.vertexDeclaration.vertexStride/4+2)),H$y=(H$l=H$H.getVertexElementByUsage(2).offset/4)+2;var H$$=H$L.getData();for(H$i=0,H$U=H$$.length/H$B;H$i<H$U;H$i++){var H$h=0;H$h=0<this._vertexCount?(this._vertexStart+H$i)*H$B:H$i*H$B;var H$A=H$i*H$Z,H$x=0;for(H$x=0;H$x<H$y;H$x++)H$Y[H$A+H$x]=H$$[H$h+H$x];for(H$x=H$y;H$x<H$B;H$x++)H$Y[H$A+H$x+2]=H$$[H$h+H$x]}}else H$Z=H$H.vertexStride/4,H$Y=this._vertexCount?H$L.getData().slice(this._vertexStart*H$Z,(this._vertexStart+this._vertexCount)*H$Z):H$L.getData().slice();if(H$f){var H$S=H$f.worldMatrix,H$z=H$m._tempMatrix4x40;H$S.invert(H$z);var H$C=H$m._tempMatrix4x41,H$s=H$K.transform.worldMatrix;H$fK.multiply(H$z,H$s,H$C)}else H$C=H$K.transform.worldMatrix;var H$a=H$m._tempQuaternion0;for(H$C.decomposeTransRotScale(H$m._tempVector30,H$a,H$m._tempVector31),H$i=0,H$U=H$Y.length/H$Z;H$i<H$U;H$i++){var H$I=H$i*H$Z+H$E,H$n=H$i*H$Z+H$d;if(H$hK.transformVector3ArrayToVector3ArrayCoordinate(H$Y,H$I,H$C,H$Y,H$I),H$hK.transformVector3ArrayByQuat(H$Y,H$n,H$a,H$Y,H$n),H$O){var H$_=H$i*H$Z+H$y;if(H$X)H$hK.transformLightingMapTexcoordByUV1Array(H$Y,H$_,H$O,H$Y,H$_);else{var H$G=H$i*H$B+H$l;H$hK.transformLightingMapTexcoordByUV0Array(H$$,H$G,H$O,H$Y,H$_)}}}return H$Y},H$f._getVertexBuffers=function(){return null},H$f._beforeRender=function(H$f){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$f._render=function(H$f){var H$K,H$Y=0,H$X=H$f.renderElement;if(1<this._indexCount){var H$L=this._boneIndicesList.length;if(1<H$L){for(var H$H=0;H$H<H$L;H$H++)(H$K=H$X._skinAnimationDatas||this._skinAnimationDatas)&&(H$X._shaderValue.setValue(0,H$K[H$H]),H$f._shader.uploadRenderElementUniforms(H$X._shaderValue.data)),H$R.mainContext.drawElements(4,this._subIndexBufferCount[H$H],5123,2*this._subIndexBufferStart[H$H]);H$I.drawCall+=H$L}else(H$K=H$X._skinAnimationDatas||this._skinAnimationDatas)&&(H$X._shaderValue.setValue(0,H$K[0]),H$f._shader.uploadRenderElementUniforms(H$X._shaderValue.data)),H$R.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),H$I.drawCall++;H$Y=this._indexCount}else H$Y=this._indexBuffer.indexCount,(H$K=H$X._skinAnimationDatas||this._skinAnimationDatas)&&(H$X._shaderValue.setValue(0,H$K[0]),H$f._shader.uploadRenderElementUniforms(H$X._shaderValue.data)),H$R.mainContext.drawElements(4,H$Y,5123,0),H$I.drawCall++;H$I.trianglesFaces+=H$Y/3},H$f.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},H$f.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},H$B(0,H$f,"_vertexBufferCount",function(){return 1}),H$B(0,H$f,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H$Z(H$m,["_tempVector30",function(){return this._tempVector30=new H$EK},"_tempVector31",function(){return this._tempVector31=new H$EK},"_tempQuaternion0",function(){return this._tempQuaternion0=new H$YK},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new H$fK},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new H$fK}]),H$m}(),H$UK=function(){function H$f(H$f){this.defineCounter=0,this.defines=null,H$f?(this.defineCounter=H$f.defineCounter,this.defines=H$f.defines.slice()):(this.defineCounter=0,this.defines=[])}return H$l(H$f,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),H$f.prototype.registerDefine=function(H$f){var H$K=Math.pow(2,this.defineCounter++);return this.defines[H$K]=H$f,H$K},H$f}(),H$ZK=function(){function H$f(){}return H$l(H$f,"laya.d3.shader.ShaderInit3D"),H$f.__init__=function(){var H$f,H$K;H$IK._globalRegDefine("HIGHPRECISION",H$IK.SHADERDEFINE_HIGHPRECISION),H$IK._globalRegDefine("FOG",H$IK.SHADERDEFINE_FOG),H$IK._globalRegDefine("DIRECTIONLIGHT",H$IK.SHADERDEFINE_DIRECTIONLIGHT),H$IK._globalRegDefine("POINTLIGHT",H$IK.SHADERDEFINE_POINTLIGHT),H$IK._globalRegDefine("SPOTLIGHT",H$IK.SHADERDEFINE_SPOTLIGHT),H$IK._globalRegDefine("UV",H$IK.SHADERDEFINE_UV0),H$IK._globalRegDefine("COLOR",H$IK.SHADERDEFINE_COLOR),H$IK._globalRegDefine("UV1",H$IK.SHADERDEFINE_UV1),H$IK._globalRegDefine("CASTSHADOW",H$lK.SHADERDEFINE_CAST_SHADOW),H$IK._globalRegDefine("SHADOWMAP_PSSM1",H$lK.SHADERDEFINE_SHADOW_PSSM1),H$IK._globalRegDefine("SHADOWMAP_PSSM2",H$lK.SHADERDEFINE_SHADOW_PSSM2),H$IK._globalRegDefine("SHADOWMAP_PSSM3",H$lK.SHADERDEFINE_SHADOW_PSSM3),H$IK._globalRegDefine("SHADOWMAP_PCF_NO",H$lK.SHADERDEFINE_SHADOW_PCF_NO),H$IK._globalRegDefine("SHADOWMAP_PCF1",H$lK.SHADERDEFINE_SHADOW_PCF1),H$IK._globalRegDefine("SHADOWMAP_PCF2",H$lK.SHADERDEFINE_SHADOW_PCF2),H$IK._globalRegDefine("SHADOWMAP_PCF3",H$lK.SHADERDEFINE_SHADOW_PCF3),H$IK._globalRegDefine("DEPTHFOG",H$IK.SAHDERDEFINE_DEPTHFOG),H$QK.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),H$QK.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),H$f={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},H$K={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var H$Y=H$QK.nameKey.add("SIMPLE");shaderCompile=H$IK.add(H$Y,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',H$f,H$K),H$WK.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),H$WK.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),H$WK.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),H$WK.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),H$WK.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),H$WK.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),H$WK.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),H$WK.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),H$WK.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},H$f}(),H$yK=function(){function H$f(){this._data=null,this._data=[]}H$l(H$f,"laya.d3.shader.ValusArray");var H$K=H$f.prototype;return H$K.setValue=function(H$f,H$K){this._data[H$f]=H$K},H$B(0,H$K,"data",function(){return this._data}),H$f}(),H$lK=function(){function H$f(){}return H$f.SHADERDEFINE_RECEIVE_SHADOW=1,H$f.SHADERDEFINE_CAST_SHADOW=512,H$f.SHADERDEFINE_SHADOW_PSSM1=1024,H$f.SHADERDEFINE_SHADOW_PSSM2=2048,H$f.SHADERDEFINE_SHADOW_PSSM3=4096,H$f.SHADERDEFINE_SHADOW_PCF_NO=8192,H$f.SHADERDEFINE_SHADOW_PCF1=16384,H$f.SHADERDEFINE_SHADOW_PCF2=32768,H$f.SHADERDEFINE_SHADOW_PCF3=65536,H$f.MAX_PSSM_COUNT=3,H$f}(),H$BK=function(){function H$p(){}return H$l(H$p,"laya.d3.utils.Picker"),H$p.calculateCursorRay=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=H$f.elements[0],H$d=H$f.elements[1],H$O=H$p._tempVector30,H$i=H$O.elements;H$i[0]=H$E,H$i[1]=H$d,H$i[2]=H$K.minDepth;var H$U=H$p._tempVector31,H$Z=H$U.elements;H$Z[0]=H$E,H$Z[1]=H$d,H$Z[2]=H$K.maxDepth;var H$y=H$H.origin,H$l=H$p._tempVector32;H$K.unprojectFromWVP(H$O,H$Y,H$X,H$L,H$y),H$K.unprojectFromWVP(H$U,H$Y,H$X,H$L,H$l);var H$B=H$H.direction.elements;H$B[0]=H$l.x-H$y.x,H$B[1]=H$l.y-H$y.y,H$B[2]=H$l.z-H$y.z,H$EK.normalize(H$H.direction,H$H.direction)},H$p.rayIntersectsPositionsAndIndices=function(H$f,H$K,H$Y,H$X,H$L){for(var H$H=H$Y.vertexStride/4,H$E=H$Y.getVertexElementByUsage(0).offset/4,H$d=Number.MAX_VALUE,H$O=-1,H$i=-1,H$U=-1,H$Z=0;H$Z<H$X.length;H$Z+=3){var H$y=H$p._tempVector35,H$l=H$y.elements,H$B=H$X[H$Z]*H$H,H$$=H$B+H$E;H$l[0]=H$K[H$$],H$l[1]=H$K[1+H$$],H$l[2]=H$K[2+H$$];var H$h=H$p._tempVector36,H$A=H$h.elements,H$x=H$X[H$Z+1]*H$H,H$S=H$x+H$E;H$A[0]=H$K[H$S],H$A[1]=H$K[1+H$S],H$A[2]=H$K[2+H$S];var H$z=H$p._tempVector37,H$C=H$z.elements,H$s=H$X[H$Z+2]*H$H,H$a=H$s+H$E;H$C[0]=H$K[H$a],H$C[1]=H$K[1+H$a],H$C[2]=H$K[2+H$a];var H$I=laya.d3.utils.Picker.rayIntersectsTriangle(H$f,H$y,H$h,H$z);!isNaN(H$I)&&H$I<H$d&&(H$d=H$I,H$O=H$B,H$i=H$x,H$U=H$s)}if(H$d===Number.MAX_VALUE)return H$L.position.toDefault(),H$L.distance=Number.MAX_VALUE,H$L.trianglePositions[0].toDefault(),H$L.trianglePositions[1].toDefault(),H$L.trianglePositions[2].toDefault(),H$L.triangleNormals[0].toDefault(),H$L.triangleNormals[1].toDefault(),H$L.triangleNormals[2].toDefault(),!1;H$L.distance=H$d,H$EK.scale(H$f.direction,H$d,H$L.position),H$EK.add(H$f.origin,H$L.position,H$L.position);var H$n=H$L.trianglePositions,H$_=H$n[0],H$G=H$n[1],H$m=H$n[2],H$R=H$_.elements,H$V=H$G.elements,H$t=H$m.elements,H$T=H$O+H$E;H$R[0]=H$K[H$T],H$R[1]=H$K[H$T+1],H$R[2]=H$K[H$T+2];var H$k=H$i+H$E;H$V[0]=H$K[H$k],H$V[1]=H$K[H$k+1],H$V[2]=H$K[H$k+2];var H$e=H$U+H$E;H$t[0]=H$K[H$e],H$t[1]=H$K[H$e+1],H$t[2]=H$K[H$e+2];var H$Q=H$Y.getVertexElementByUsage(3);if(H$Q){var H$W=H$Q.offset/4,H$q=H$L.triangleNormals,H$P=H$q[0],H$b=H$q[1],H$J=H$q[2],H$M=H$P.elements,H$w=H$b.elements,H$r=H$J.elements,H$v=H$O+H$W;H$M[0]=H$K[H$v],H$M[1]=H$K[H$v+1],H$M[2]=H$K[H$v+2];var H$j=H$i+H$W;H$w[0]=H$K[H$j],H$w[1]=H$K[H$j+1],H$w[2]=H$K[H$j+2];var H$c=H$U+H$W;H$r[0]=H$K[H$c],H$r[1]=H$K[H$c+1],H$r[2]=H$K[H$c+2]}return!0},H$p.rayIntersectsTriangle=function(H$f,H$K,H$Y,H$X){var H$L=H$p._tempVector30,H$H=H$p._tempVector31;H$EK.subtract(H$Y,H$K,H$L),H$EK.subtract(H$X,H$K,H$H);var H$E,H$d=H$p._tempVector32;if(H$EK.cross(H$f.direction,H$H,H$d),(H$E=H$EK.dot(H$L,H$d))>-Number.MIN_VALUE&&H$E<Number.MIN_VALUE)return Number.NaN;var H$O,H$i=1/H$E,H$U=H$p._tempVector33;if(H$EK.subtract(H$f.origin,H$K,H$U),H$O=H$EK.dot(H$U,H$d),(H$O*=H$i)<0||1<H$O)return Number.NaN;var H$Z,H$y,H$l=H$p._tempVector34;return H$EK.cross(H$U,H$L,H$l),H$Z=H$EK.dot(H$f.direction,H$l),(H$Z*=H$i)<0||1<H$O+H$Z?Number.NaN:(H$y=H$EK.dot(H$H,H$l),(H$y*=H$i)<0?Number.NaN:H$y)},H$Z(H$p,["_tempVector30",function(){return this._tempVector30=new H$EK},"_tempVector31",function(){return this._tempVector31=new H$EK},"_tempVector32",function(){return this._tempVector32=new H$EK},"_tempVector33",function(){return this._tempVector33=new H$EK},"_tempVector34",function(){return this._tempVector34=new H$EK},"_tempVector35",function(){return this._tempVector35=new H$EK},"_tempVector36",function(){return this._tempVector36=new H$EK},"_tempVector37",function(){return this._tempVector37=new H$EK}]),H$p}(),H$$K=(function(){function H$f(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new H$EK,new H$EK,new H$EK],this.trianglePositions.length=3,this.triangleNormals=[new H$EK,new H$EK,new H$EK],this.triangleNormals.length=3,this.position=new H$EK}H$l(H$f,"laya.d3.utils.RaycastHit"),H$f.prototype.cloneTo=function(H$f){H$f.distance=this.distance,this.trianglePositions[0].cloneTo(H$f.trianglePositions[0]),this.trianglePositions[1].cloneTo(H$f.trianglePositions[1]),this.trianglePositions[2].cloneTo(H$f.trianglePositions[2]),this.triangleNormals[0].cloneTo(H$f.triangleNormals[0]),this.triangleNormals[1].cloneTo(H$f.triangleNormals[1]),this.triangleNormals[2].cloneTo(H$f.triangleNormals[2]),this.position.cloneTo(H$f.position),H$f.sprite3D=this.sprite3D}}(),function(){function H$f(H$f,H$K){this._width=0,this._height=0,this._width=H$f,this._height=H$K}H$l(H$f,"laya.d3.utils.Size");var H$K=H$f.prototype;return H$B(0,H$K,"width",function(){return-1===this._width?H$u.clientWidth:this._width}),H$B(0,H$K,"height",function(){return-1===this._height?H$u.clientHeight:this._height}),H$B(1,H$f,"fullScreen",function(){return new H$f(-1,-1)}),H$f}()),H$hK=function(){function H$T(){}return H$l(H$T,"laya.d3.utils.Utils3D"),H$T._rotationTransformScaleSkinAnimation=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$Z){var H$y,H$l,H$B,H$$,H$h,H$A=H$T._tempArray16_0,H$x=H$T._tempArray16_1,H$S=H$T._tempArray16_2,H$z=H$X+H$X,H$C=H$L+H$L,H$s=H$H+H$H,H$a=H$X*H$z,H$I=H$L*H$z,H$n=H$L*H$C,H$_=H$H*H$z,H$G=H$H*H$C,H$m=H$H*H$s,H$R=H$E*H$z,H$V=H$E*H$C,H$t=H$E*H$s;for(H$A[15]=1,H$A[0]=1-H$n-H$m,H$A[1]=H$I+H$t,H$A[2]=H$_-H$V,H$A[4]=H$I-H$t,H$A[5]=1-H$a-H$m,H$A[6]=H$G+H$R,H$A[8]=H$_+H$V,H$A[9]=H$G-H$R,H$A[10]=1-H$a-H$n,H$x[15]=1,H$x[0]=H$d,H$x[5]=H$O,H$x[10]=H$i,H$y=0;H$y<4;H$y++)H$l=H$A[H$y],H$B=H$A[H$y+4],H$$=H$A[H$y+8],H$h=H$A[H$y+12],H$S[H$y]=H$l,H$S[H$y+4]=H$B,H$S[H$y+8]=H$$,H$S[H$y+12]=H$l*H$f+H$B*H$K+H$$*H$Y+H$h;for(H$y=0;H$y<4;H$y++)H$l=H$S[H$y],H$B=H$S[H$y+4],H$$=H$S[H$y+8],H$h=H$S[H$y+12],H$U[H$y+H$Z]=H$l*H$x[0]+H$B*H$x[1]+H$$*H$x[2]+H$h*H$x[3],H$U[H$y+H$Z+4]=H$l*H$x[4]+H$B*H$x[5]+H$$*H$x[6]+H$h*H$x[7],H$U[H$y+H$Z+8]=H$l*H$x[8]+H$B*H$x[9]+H$$*H$x[10]+H$h*H$x[11],H$U[H$y+H$Z+12]=H$l*H$x[12]+H$B*H$x[13]+H$$*H$x[14]+H$h*H$x[15]},H$T._createNodeByJson=function(H$f,H$K,H$Y,H$X){if(!H$Y)switch(H$K.type){case"Sprite3D":H$Y=new H$eK;break;case"MeshSprite3D":H$Y=new H$pK;break;case"SkinnedMeshSprite3D":H$Y=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":H$Y=new ShuriKenParticle3D;break;case"TrailSprite3D":H$Y=new TrailSprite3D;break;case"Terrain":H$Y=new Terrain;break;case"Camera":H$Y=new H$cK;break;case"DirectionLight":H$Y=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var H$L=H$K.props;if(H$L)for(var H$H in H$L)H$Y[H$H]=H$L[H$H];var H$E=H$K.customProps;H$E&&(H$Y instanceof laya.d3.core.Sprite3D?(H$Y._parseBaseCustomProps(H$E),H$Y._parseCustomProps(H$f,H$X,H$E,H$K),H$Y._parseCustomComponent(H$f,H$X,H$K.components)):H$Y._parseCustomProps(H$f,H$X,H$E,H$K));var H$d=H$K.child;if(H$d)for(var H$O=0,H$i=H$d.length;H$O<H$i;H$O++){var H$U=H$T._createNodeByJson(H$f,H$d[H$O],null,H$X);H$Y.addChild(H$U)}return H$Y},H$T._computeBoneAndAnimationDatasByBindPoseMatrxix=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E,H$d,H$O=0,H$i=0,H$U=H$f.length;for(H$E=0;H$E<H$U;H$O+=H$f[H$E].keyframeWidth,H$i+=16,H$E++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(H$K[H$O+0],H$K[H$O+1],H$K[H$O+2],H$K[H$O+3],H$K[H$O+4],H$K[H$O+5],H$K[H$O+6],H$K[H$O+7],H$K[H$O+8],H$K[H$O+9],H$X,H$i),0!=H$E&&(H$d=16*H$f[H$E].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(H$X,H$d,H$X,H$i,H$X,H$i));var H$Z=H$Y.length;for(H$E=0;H$E<H$Z;H$E++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$X,16*H$H[H$E],H$Y[H$E],H$L,16*H$E)},H$T._computeAnimationDatasByArrayAndMatrixFast=function(H$f,H$K,H$Y,H$X){for(var H$L=0,H$H=H$f.length;H$L<H$H;H$L++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$K,16*H$X[H$L],H$f[H$L],H$Y,16*H$L)},H$T._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(H$f,H$K,H$Y,H$X,H$L){var H$H,H$E,H$d=0,H$O=0,H$i=H$f.length;for(H$H=0;H$H<H$i;H$d+=H$f[H$H].keyframeWidth,H$O+=16,H$H++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(H$K[H$d+7],H$K[H$d+8],H$K[H$d+9],H$K[H$d+3],H$K[H$d+4],H$K[H$d+5],H$K[H$d+6],H$K[H$d+0],H$K[H$d+1],H$K[H$d+2],H$X,H$O),0!=H$H&&(H$E=16*H$f[H$H].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(H$X,H$E,H$X,H$O,H$X,H$O));var H$U=H$Y.length;for(H$H=0;H$H<H$U;H$H++){var H$Z=16*H$H;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$X,H$Z,H$Y[H$H],H$L,H$Z)}},H$T._computeAnimationDatasByArrayAndMatrixFastOld=function(H$f,H$K,H$Y){for(var H$X=H$f.length,H$L=0;H$L<H$X;H$L++){var H$H=16*H$L;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(H$K,H$H,H$f[H$L],H$Y,H$H)}},H$T._computeRootAnimationData=function(H$f,H$K,H$Y){for(var H$X=0,H$L=0,H$H=0,H$E=H$f.length;H$X<H$E;H$L+=H$f[H$X].keyframeWidth,H$H+=16,H$X++)laya.d3.utils.Utils3D.createAffineTransformationArray(H$K[H$L+0],H$K[H$L+1],H$K[H$L+2],H$K[H$L+3],H$K[H$L+4],H$K[H$L+5],H$K[H$L+6],H$K[H$L+7],H$K[H$L+8],H$K[H$L+9],H$Y,H$H)},H$T.transformVector3ArrayByQuat=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$Y.elements,H$E=H$f[H$K],H$d=H$f[H$K+1],H$O=H$f[H$K+2],H$i=H$H[0],H$U=H$H[1],H$Z=H$H[2],H$y=H$H[3],H$l=H$y*H$E+H$U*H$O-H$Z*H$d,H$B=H$y*H$d+H$Z*H$E-H$i*H$O,H$$=H$y*H$O+H$i*H$d-H$U*H$E,H$h=-H$i*H$E-H$U*H$d-H$Z*H$O;H$X[H$L]=H$l*H$y+H$h*-H$i+H$B*-H$Z-H$$*-H$U,H$X[H$L+1]=H$B*H$y+H$h*-H$U+H$$*-H$i-H$l*-H$Z,H$X[H$L+2]=H$$*H$y+H$h*-H$Z+H$l*-H$U-H$B*-H$i},H$T.mulMatrixByArray=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E,H$d,H$O,H$i,H$U;if(H$L===H$Y){for(H$Y=H$T._tempArray16_3,H$E=0;H$E<16;++H$E)H$Y[H$E]=H$L[H$H+H$E];H$X=0}for(H$E=0;H$E<4;H$E++)H$d=H$f[H$K+H$E],H$O=H$f[H$K+H$E+4],H$i=H$f[H$K+H$E+8],H$U=H$f[H$K+H$E+12],H$L[H$H+H$E]=H$d*H$Y[H$X+0]+H$O*H$Y[H$X+1]+H$i*H$Y[H$X+2]+H$U*H$Y[H$X+3],H$L[H$H+H$E+4]=H$d*H$Y[H$X+4]+H$O*H$Y[H$X+5]+H$i*H$Y[H$X+6]+H$U*H$Y[H$X+7],H$L[H$H+H$E+8]=H$d*H$Y[H$X+8]+H$O*H$Y[H$X+9]+H$i*H$Y[H$X+10]+H$U*H$Y[H$X+11],H$L[H$H+H$E+12]=H$d*H$Y[H$X+12]+H$O*H$Y[H$X+13]+H$i*H$Y[H$X+14]+H$U*H$Y[H$X+15]},H$T.mulMatrixByArrayFast=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E,H$d,H$O,H$i,H$U;for(H$E=0;H$E<4;H$E++)H$d=H$f[H$K+H$E],H$O=H$f[H$K+H$E+4],H$i=H$f[H$K+H$E+8],H$U=H$f[H$K+H$E+12],H$L[H$H+H$E]=H$d*H$Y[H$X+0]+H$O*H$Y[H$X+1]+H$i*H$Y[H$X+2]+H$U*H$Y[H$X+3],H$L[H$H+H$E+4]=H$d*H$Y[H$X+4]+H$O*H$Y[H$X+5]+H$i*H$Y[H$X+6]+H$U*H$Y[H$X+7],H$L[H$H+H$E+8]=H$d*H$Y[H$X+8]+H$O*H$Y[H$X+9]+H$i*H$Y[H$X+10]+H$U*H$Y[H$X+11],H$L[H$H+H$E+12]=H$d*H$Y[H$X+12]+H$O*H$Y[H$X+13]+H$i*H$Y[H$X+14]+H$U*H$Y[H$X+15]},H$T.mulMatrixByArrayAndMatrixFast=function(H$f,H$K,H$Y,H$X,H$L){var H$H,H$E,H$d,H$O,H$i,H$U=H$Y.elements,H$Z=H$U[0],H$y=H$U[1],H$l=H$U[2],H$B=H$U[3],H$$=H$U[4],H$h=H$U[5],H$A=H$U[6],H$x=H$U[7],H$S=H$U[8],H$z=H$U[9],H$C=H$U[10],H$s=H$U[11],H$a=H$U[12],H$I=H$U[13],H$n=H$U[14],H$_=H$U[15],H$G=H$K,H$m=H$K+4,H$R=H$K+8,H$V=H$K+12,H$t=H$L,H$T=H$L+4,H$k=H$L+8,H$e=H$L+12;for(H$H=0;H$H<4;H$H++)H$E=H$f[H$G+H$H],H$d=H$f[H$m+H$H],H$O=H$f[H$R+H$H],H$i=H$f[H$V+H$H],H$X[H$t+H$H]=H$E*H$Z+H$d*H$y+H$O*H$l+H$i*H$B,H$X[H$T+H$H]=H$E*H$$+H$d*H$h+H$O*H$A+H$i*H$x,H$X[H$k+H$H]=H$E*H$S+H$d*H$z+H$O*H$C+H$i*H$s,H$X[H$e+H$H]=H$E*H$a+H$d*H$I+H$O*H$n+H$i*H$_},H$T.createAffineTransformationArray=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$Z){var H$y=H$X+H$X,H$l=H$L+H$L,H$B=H$H+H$H,H$$=H$X*H$y,H$h=H$X*H$l,H$A=H$X*H$B,H$x=H$L*H$l,H$S=H$L*H$B,H$z=H$H*H$B,H$C=H$E*H$y,H$s=H$E*H$l,H$a=H$E*H$B;H$U[H$Z+0]=(1-(H$x+H$z))*H$d,H$U[H$Z+1]=(H$h+H$a)*H$d,H$U[H$Z+2]=(H$A-H$s)*H$d,H$U[H$Z+3]=0,H$U[H$Z+4]=(H$h-H$a)*H$O,H$U[H$Z+5]=(1-(H$$+H$z))*H$O,H$U[H$Z+6]=(H$S+H$C)*H$O,H$U[H$Z+7]=0,H$U[H$Z+8]=(H$A+H$s)*H$i,H$U[H$Z+9]=(H$S-H$C)*H$i,H$U[H$Z+10]=(1-(H$$+H$x))*H$i,H$U[H$Z+11]=0,H$U[H$Z+12]=H$f,H$U[H$Z+13]=H$K,H$U[H$Z+14]=H$Y,H$U[H$Z+15]=1},H$T.transformVector3ArrayToVector3ArrayCoordinate=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$T._tempArray4_0,H$E=H$f[H$K+0],H$d=H$f[H$K+1],H$O=H$f[H$K+2],H$i=H$Y.elements;H$H[0]=H$E*H$i[0]+H$d*H$i[4]+H$O*H$i[8]+H$i[12],H$H[1]=H$E*H$i[1]+H$d*H$i[5]+H$O*H$i[9]+H$i[13],H$H[2]=H$E*H$i[2]+H$d*H$i[6]+H$O*H$i[10]+H$i[14],H$H[3]=1/(H$E*H$i[3]+H$d*H$i[7]+H$O*H$i[11]+H$i[15]),H$X[H$L+0]=H$H[0]*H$H[3],H$X[H$L+1]=H$H[1]*H$H[3],H$X[H$L+2]=H$H[2]*H$H[3]},H$T.transformLightingMapTexcoordByUV0Array=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$Y.elements;H$X[H$L+0]=H$f[H$K+0]*H$H[0]+H$H[2],H$X[H$L+1]=(H$f[H$K+1]-1)*H$H[1]+H$H[3]},H$T.transformLightingMapTexcoordByUV1Array=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$Y.elements;H$X[H$L+0]=H$f[H$K+0]*H$H[0]+H$H[2],H$X[H$L+1]=1+H$f[H$K+1]*H$H[1]+H$H[3]},H$T.getURLVerion=function(H$f){var H$K=H$f.indexOf("?");return 0<=H$K?H$f.substr(H$K):null},H$T._quaternionCreateFromYawPitchRollArray=function(H$f,H$K,H$Y,H$X){var H$L=.5*H$Y,H$H=.5*H$K,H$E=.5*H$f,H$d=Math.sin(H$L),H$O=Math.cos(H$L),H$i=Math.sin(H$H),H$U=Math.cos(H$H),H$Z=Math.sin(H$E),H$y=Math.cos(H$E);H$X[0]=H$y*H$i*H$O+H$Z*H$U*H$d,H$X[1]=H$Z*H$U*H$O-H$y*H$i*H$d,H$X[2]=H$y*H$U*H$d-H$Z*H$i*H$O,H$X[3]=H$y*H$U*H$O+H$Z*H$i*H$d},H$T._createAffineTransformationArray=function(H$f,H$K,H$Y,H$X){var H$L=H$K[0],H$H=H$K[1],H$E=H$K[2],H$d=H$K[3],H$O=H$L+H$L,H$i=H$H+H$H,H$U=H$E+H$E,H$Z=H$L*H$O,H$y=H$L*H$i,H$l=H$L*H$U,H$B=H$H*H$i,H$$=H$H*H$U,H$h=H$E*H$U,H$A=H$d*H$O,H$x=H$d*H$i,H$S=H$d*H$U,H$z=H$Y[0],H$C=H$Y[1],H$s=H$Y[2];H$X[0]=(1-(H$B+H$h))*H$z,H$X[1]=(H$y+H$S)*H$z,H$X[2]=(H$l-H$x)*H$z,H$X[3]=0,H$X[4]=(H$y-H$S)*H$C,H$X[5]=(1-(H$Z+H$h))*H$C,H$X[6]=(H$$+H$A)*H$C,H$X[7]=0,H$X[8]=(H$l+H$x)*H$s,H$X[9]=(H$$-H$A)*H$s,H$X[10]=(1-(H$Z+H$B))*H$s,H$X[11]=0,H$X[12]=H$f[0],H$X[13]=H$f[1],H$X[14]=H$f[2],H$X[15]=1},H$T._mulMatrixArray=function(H$f,H$K,H$Y,H$X){var H$L,H$H,H$E,H$d,H$O,H$i=H$K.elements,H$U=H$i[0],H$Z=H$i[1],H$y=H$i[2],H$l=H$i[3],H$B=H$i[4],H$$=H$i[5],H$h=H$i[6],H$A=H$i[7],H$x=H$i[8],H$S=H$i[9],H$z=H$i[10],H$C=H$i[11],H$s=H$i[12],H$a=H$i[13],H$I=H$i[14],H$n=H$i[15],H$_=H$X,H$G=H$X+4,H$m=H$X+8,H$R=H$X+12;for(H$L=0;H$L<4;H$L++)H$H=H$f[H$L],H$E=H$f[H$L+4],H$d=H$f[H$L+8],H$O=H$f[H$L+12],H$Y[H$_+H$L]=H$H*H$U+H$E*H$Z+H$d*H$y+H$O*H$l,H$Y[H$G+H$L]=H$H*H$B+H$E*H$$+H$d*H$h+H$O*H$A,H$Y[H$m+H$L]=H$H*H$x+H$E*H$S+H$d*H$z+H$O*H$C,H$Y[H$R+H$L]=H$H*H$s+H$E*H$a+H$d*H$I+H$O*H$n},H$T.getYawPitchRoll=function(H$f,H$K){H$T.transformQuat(H$EK.ForwardRH,H$f,H$YK.TEMPVector31),H$T.transformQuat(H$EK.Up,H$f,H$YK.TEMPVector32);var H$Y=H$YK.TEMPVector32.elements;H$T.angleTo(H$EK.ZERO,H$YK.TEMPVector31,H$YK.TEMPVector33);var H$X=H$YK.TEMPVector33.elements;H$X[0]==Math.PI/2?(H$X[1]=H$T.arcTanAngle(H$Y[2],H$Y[0]),H$X[2]=0):H$X[0]==-Math.PI/2?(H$X[1]=H$T.arcTanAngle(-H$Y[2],-H$Y[0]),H$X[2]=0):(H$fK.createRotationY(-H$X[1],H$YK.TEMPMatrix0),H$fK.createRotationX(-H$X[0],H$YK.TEMPMatrix1),H$EK.transformCoordinate(H$YK.TEMPVector32,H$YK.TEMPMatrix0,H$YK.TEMPVector32),H$EK.transformCoordinate(H$YK.TEMPVector32,H$YK.TEMPMatrix1,H$YK.TEMPVector32),H$X[2]=H$T.arcTanAngle(H$Y[1],-H$Y[0])),H$X[1]<=-Math.PI&&(H$X[1]=Math.PI),H$X[2]<=-Math.PI&&(H$X[2]=Math.PI),H$X[1]>=Math.PI&&H$X[2]>=Math.PI&&(H$X[1]=0,H$X[2]=0,H$X[0]=Math.PI-H$X[0]),H$K[0]=H$X[1],H$K[1]=H$X[0],H$K[2]=H$X[2]},H$T.arcTanAngle=function(H$f,H$K){return 0==H$f?1==H$K?Math.PI/2:-Math.PI/2:0<H$f?Math.atan(H$K/H$f):H$f<0?0<H$K?Math.atan(H$K/H$f)+Math.PI:Math.atan(H$K/H$f)-Math.PI:0},H$T.angleTo=function(H$f,H$K,H$Y){H$EK.subtract(H$K,H$f,H$YK.TEMPVector30),H$EK.normalize(H$YK.TEMPVector30,H$YK.TEMPVector30),H$Y.elements[0]=Math.asin(H$YK.TEMPVector30.y),H$Y.elements[1]=H$T.arcTanAngle(-H$YK.TEMPVector30.z,-H$YK.TEMPVector30.x)},H$T.transformQuat=function(H$f,H$K,H$Y){var H$X=H$Y.elements,H$L=H$f.elements,H$H=H$K,H$E=H$L[0],H$d=H$L[1],H$O=H$L[2],H$i=H$H[0],H$U=H$H[1],H$Z=H$H[2],H$y=H$H[3],H$l=H$y*H$E+H$U*H$O-H$Z*H$d,H$B=H$y*H$d+H$Z*H$E-H$i*H$O,H$$=H$y*H$O+H$i*H$d-H$U*H$E,H$h=-H$i*H$E-H$U*H$d-H$Z*H$O;H$X[0]=H$l*H$y+H$h*-H$i+H$B*-H$Z-H$$*-H$U,H$X[1]=H$B*H$y+H$h*-H$U+H$$*-H$i-H$l*-H$Z,H$X[2]=H$$*H$y+H$h*-H$Z+H$l*-H$U-H$B*-H$i},H$T.quaterionNormalize=function(H$f,H$K){var H$Y=H$f[0],H$X=H$f[1],H$L=H$f[2],H$H=H$f[3],H$E=H$Y*H$Y+H$X*H$X+H$L*H$L+H$H*H$H;0<H$E&&(H$E=1/Math.sqrt(H$E),H$K[0]=H$Y*H$E,H$K[1]=H$X*H$E,H$K[2]=H$L*H$E,H$K[3]=H$H*H$E)},H$T.matrix4x4MultiplyFFF=function(H$f,H$K,H$Y){var H$X,H$L,H$H,H$E,H$d;if(H$Y===H$K)for(H$K=new Float32Array(16),H$X=0;H$X<16;++H$X)H$K[H$X]=H$Y[H$X];for(H$X=0;H$X<4;H$X++)H$L=H$f[H$X],H$H=H$f[H$X+4],H$E=H$f[H$X+8],H$d=H$f[H$X+12],H$Y[H$X]=H$L*H$K[0]+H$H*H$K[1]+H$E*H$K[2]+H$d*H$K[3],H$Y[H$X+4]=H$L*H$K[4]+H$H*H$K[5]+H$E*H$K[6]+H$d*H$K[7],H$Y[H$X+8]=H$L*H$K[8]+H$H*H$K[9]+H$E*H$K[10]+H$d*H$K[11],H$Y[H$X+12]=H$L*H$K[12]+H$H*H$K[13]+H$E*H$K[14]+H$d*H$K[15]},H$T.matrix4x4MultiplyMFM=function(H$f,H$K,H$Y){H$T.matrix4x4MultiplyFFF(H$f.elements,H$K,H$Y.elements)},H$Z(H$T,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new H$EK},"_tempVector3_1",function(){return this._tempVector3_1=new H$EK},"_tempVector3_2",function(){return this._tempVector3_2=new H$EK},"_tempVector3_3",function(){return this._tempVector3_3=new H$EK},"_tempVector3_4",function(){return this._tempVector3_4=new H$EK},"_tempVector3_5",function(){return this._tempVector3_5=new H$EK},"_tempVector3_6",function(){return this._tempVector3_6=new H$EK},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),H$T}(),H$AK=function(){function H$V(){}return H$l(H$V,"Laya3D"),H$V._cancelLoadByUrl=function(H$f){H$C.loader.cancelLoadByUrl(H$f),H$V._innerFirstLevelLoaderManager.cancelLoadByUrl(H$f),H$V._innerSecondLevelLoaderManager.cancelLoadByUrl(H$f),H$V._innerThirdLevelLoaderManager.cancelLoadByUrl(H$f),H$V._innerFourthLevelLoaderManager.cancelLoadByUrl(H$f)},H$V._changeWebGLSize=function(H$f,H$K){H$R.onStageResize(H$f,H$K),H$u.clientWidth=H$f,H$u.clientHeight=H$K},H$V.__init__=function(){var H$f=H$K.createMap;H$f.lh=[H$eK,"SPRITE3DHIERARCHY"],H$f.ls=[H$kK,"SPRITE3DHIERARCHY"],H$f.lm=[H$MK,"MESH"],H$f.lmat=[H$WK,"MATERIAL"],H$f.jpg=[H$rK,"nativeimage"],H$f.jpeg=[H$rK,"nativeimage"],H$f.png=[H$rK,"nativeimage"],H$f.pkm=[H$rK,"arraybuffer"],H$f.raw=[H$bK,"arraybuffer"],H$f.mipmaps=[H$bK,"arraybuffer"],H$A.parserMap.SPRITE3DHIERARCHY=H$V._loadHierarchy,H$A.parserMap.MESH=H$V._loadMesh,H$A.parserMap.MATERIAL=H$V._loadMaterial,H$A.parserMap.TEXTURECUBE=H$V._loadTextureCube,H$A.parserMap.TERRAIN=H$V._loadTerrain,H$V._innerFirstLevelLoaderManager.on("error",null,H$V._eventLoadManagerError),H$V._innerSecondLevelLoaderManager.on("error",null,H$V._eventLoadManagerError),H$V._innerThirdLevelLoaderManager.on("error",null,H$V._eventLoadManagerError),H$V._innerFourthLevelLoaderManager.on("error",null,H$V._eventLoadManagerError)},H$V.READ_BLOCK=function(){return H$V._readData.pos+=4,!0},H$V.READ_DATA=function(){return H$V._DATA.offset=H$V._readData.getUint32(),H$V._DATA.size=H$V._readData.getUint32(),!0},H$V.READ_STRINGS=function(){var H$f=[],H$K={offset:0,size:0};H$K.offset=H$V._readData.getUint16(),H$K.size=H$V._readData.getUint16();H$V._readData.pos;H$V._readData.pos=H$K.offset+H$V._DATA.offset;for(var H$Y=0;H$Y<H$K.size;H$Y++){var H$X=H$V._readData.readUTFString();-1===H$X.lastIndexOf(".lmat")&&-1===H$X.lastIndexOf(".lpbr")||H$f.push(H$X)}return H$f},H$V.formatRelativePath=function(H$f,H$K){var H$Y;if("."===H$K.charAt(0)){for(var H$X=(H$f+H$K).split("/"),H$L=0,H$H=H$X.length;H$L<H$H;H$L++)if(".."==H$X[H$L]){var H$E=H$L-1;0<H$E&&".."!==H$X[H$E]&&(H$X.splice(H$E,2),H$L-=2)}H$Y=H$X.join("/")}else H$Y=H$f+H$K;return null!=H$m.customFormat&&(H$Y=H$m.customFormat(H$Y,null)),H$Y},H$V._eventLoadManagerError=function(H$f){H$C.loader.event("error",H$f)},H$V._addHierarchyInnerUrls=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E=H$V.formatRelativePath(H$X,H$L);H$Y&&(H$E+=H$Y),H$f.push({url:H$E,clas:H$H}),H$K[H$L]=H$E},H$V._getSprite3DHierarchyInnerUrls=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){var H$d,H$O=0,H$i=0;switch(H$f.type){case"Scene":var H$U=H$f.customProps.lightmaps;for(H$O=0,H$i=H$U.length;H$O<H$i;H$O++){var H$Z=H$U[H$O].replace(".exr",".png");H$V._addHierarchyInnerUrls(H$X,H$L,H$H,H$E,H$Z,H$rK)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var H$y;if(H$f.instanceParams)(H$y=H$f.instanceParams.loadPath)&&H$V._addHierarchyInnerUrls(H$K,H$L,H$H,H$E,H$y,H$MK);else{(H$y=(H$d=H$f.customProps).meshPath)&&H$V._addHierarchyInnerUrls(H$K,H$L,H$H,H$E,H$y,H$MK);var H$l=H$d.materials;if(H$l)for(H$O=0,H$i=H$l.length;H$O<H$i;H$O++){for(var H$B=H$l[H$O],H$$=H$B.type.split("."),H$h=H$t.window,H$A=0,H$x=H$$.length;H$A<H$x;++H$A){H$h=H$h[this.clasPaths[H$A]]}if("function"!=typeof H$h)throw"_getSprite3DHierarchyInnerUrls 错误: "+H$B.type+" 不是类";H$V._addHierarchyInnerUrls(H$Y,H$L,H$H,H$E,H$B.path,H$h)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var H$S=(H$d=H$f.customProps).meshPath;H$S&&H$V._addHierarchyInnerUrls(H$K,H$L,H$H,H$E,H$S,H$MK);var H$z=H$d.material;if(H$z){H$$=H$z.type.split("."),H$h=H$t.window;for(H$A=0,H$x=H$$.length;H$A<H$x;++H$A){H$h=H$h[this.clasPaths[H$A]]}H$V._addHierarchyInnerUrls(H$Y,H$L,H$H,H$E,H$z.path,H$h)}else{var H$C=H$d.materialPath;if(H$C)H$V._addHierarchyInnerUrls(H$Y,H$L,H$H,H$E,H$C,ShurikenParticleMaterial);else{var H$s=H$d.texturePath;H$s&&H$V._addHierarchyInnerUrls(H$X,H$L,H$H,H$E,H$s,H$rK)}}break;case"Terrain":H$V._addHierarchyInnerUrls(H$X,H$L,H$H,H$E,H$f.customProps.dataPath,TerrainRes)}var H$a=H$f.components;for(var H$I in H$a){var H$n=H$a[H$I];switch(H$I){case"Animator":var H$_=H$n.avatarPath;if(H$_)H$V._addHierarchyInnerUrls(H$X,H$L,H$H,H$E,H$_,Avatar);else{var H$G=H$n.avatar;H$G&&H$V._addHierarchyInnerUrls(H$X,H$L,H$H,H$E,H$G.path,Avatar)}var H$m=H$n.clipPaths;for(H$O=0,H$i=H$m.length;H$O<H$i;H$O++)H$V._addHierarchyInnerUrls(H$X,H$L,H$H,H$E,H$m[H$O],AnimationClip)}}var H$R=H$f.child;for(H$O=0,H$i=H$R.length;H$O<H$i;H$O++)H$V._getSprite3DHierarchyInnerUrls(H$R[H$O],H$K,H$Y,H$X,H$L,H$H,H$E)},H$V._loadHierarchy=function(H$f){H$f.on("loaded",null,H$V._onHierarchylhLoaded,[H$f,H$f._class._getGroup()]),H$f.load(H$f.url,"json",!1,null,!0)},H$V._onHierarchylhLoaded=function(H$f,H$K,H$Y){if(H$f._class.destroyed)H$f.endLoad();else{var H$X=H$f.url,H$L=H$hK.getURLVerion(H$X),H$H=H$m.getPath(H$X),H$E=[],H$d=[],H$O=[],H$i={};H$V._getSprite3DHierarchyInnerUrls(H$Y,H$E,H$d,H$O,H$i,H$L,H$H);var H$U=H$E.length+H$d.length+H$O.length,H$Z=H$U+1,H$y=1/H$Z;if(H$V._onProcessChange(H$f,0,H$y,1),0<H$O.length){var H$l=H$U/H$Z,H$B=H$G.create(null,H$V._onProcessChange,[H$f,H$y,H$l],!1);H$V._innerFourthLevelLoaderManager.create(H$O,H$G.create(null,H$V._onHierarchyInnerForthLevResouLoaded,[H$f,H$K,H$B,H$Y,H$i,H$E,H$d,H$y+H$l*H$O.length,H$l]),H$B,null,null,1,!0,H$K)}else H$V._onHierarchyInnerForthLevResouLoaded(H$f,H$K,null,H$Y,H$i,H$E,H$d,H$y,H$l)}},H$V._onHierarchyInnerForthLevResouLoaded=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){if(H$f._class.destroyed)H$f.endLoad();else if(H$Y&&H$Y.recover(),0<H$E.length){var H$i=H$G.create(null,H$V._onProcessChange,[H$f,H$d,H$O],!1);H$V._innerSecondLevelLoaderManager.create(H$E,H$G.create(null,H$V._onHierarchyInnerSecondLevResouLoaded,[H$f,H$K,H$i,H$X,H$L,H$H,H$d+H$O*H$E.length,H$O]),H$Y,null,null,1,!0,H$K)}else H$V._onHierarchyInnerSecondLevResouLoaded(H$f,H$K,null,H$X,H$L,H$H,H$d,H$O)},H$V._onHierarchyInnerSecondLevResouLoaded=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d){if(H$f._class.destroyed)H$f.endLoad();else if(H$Y&&H$Y.recover(),0<H$H.length){var H$O=H$G.create(null,H$V._onProcessChange,[H$f,H$E,H$d],!1);H$V._innerFirstLevelLoaderManager.create(H$H,H$G.create(null,H$V._onHierarchyInnerFirstLevResouLoaded,[H$f,H$O,H$X,H$L]),H$Y,null,null,1,!0,H$K)}else H$V._onHierarchyInnerFirstLevResouLoaded(H$f,null,H$X,H$L)},H$V._onHierarchyInnerFirstLevResouLoaded=function(H$f,H$K,H$Y,H$X){H$K&&H$K.recover(),H$f.endLoad([H$Y,H$X])},H$V._loadTerrain=function(H$f){H$f.on("loaded",null,H$V._onTerrainLtLoaded,[H$f,H$f._class._getGroup()]),H$f.load(H$f.url,"json",!1,null,!0)},H$V._onTerrainLtLoaded=function(H$f,H$K,H$Y){if(H$f._class.destroyed)H$f.endLoad();else{var H$X,H$L,H$H=H$f.url,H$E=H$hK.getURLVerion(H$H),H$d=H$m.getPath(H$H),H$O=[],H$i={},H$U=0,H$Z=0,H$y=H$Y.heightData;H$X=H$y.url,H$L=H$V.formatRelativePath(H$d,H$X),H$E&&(H$L+=H$E),H$X=H$i[H$X]=H$L;var H$l=H$Y.detailTexture;for(H$U=0,H$Z=H$l.length;H$U<H$Z;H$U++)H$O.push({url:H$l[H$U].diffuse});var H$B=H$Y.normalMap;for(H$U=0,H$Z=H$B.length;H$U<H$Z;H$U++)H$O.push({url:H$B[H$U]});var H$$=H$Y.alphaMap;for(H$U=0,H$Z=H$$.length;H$U<H$Z;H$U++)H$O.push({url:H$$[H$U],params:[!1,!1,6408,!0]});for(H$U=0,H$Z=H$O.length;H$U<H$Z;H$U++){var H$h=H$O[H$U].url;H$L=H$V.formatRelativePath(H$d,H$h),H$E&&(H$L+=H$E),H$O[H$U].url=H$L,H$i[H$h]=H$L}var H$A=H$O.length,H$x=H$A+2,H$S=1/H$x;H$V._onProcessChange(H$f,0,H$S,1);var H$z={heightMapLoaded:!1,texturesLoaded:!1},H$C=H$G.create(null,H$V._onProcessChange,[H$f,H$S,H$S],!1);H$V._innerFourthLevelLoaderManager.create(H$X,H$G.create(null,H$V._onTerrainHeightMapLoaded,[H$f,H$C,H$Y,H$i,H$z]),H$C,null,[H$y.numX,H$y.numZ,H$y.bitType,H$y.value],1,!0,H$K);var H$s=H$G.create(null,H$V._onProcessChange,[H$f,2*H$S,H$A/H$x],!1);H$V._innerFourthLevelLoaderManager.create(H$O,H$G.create(null,H$V._onTerrainTexturesLoaded,[H$f,H$s,H$Y,H$i,H$z]),H$s,null,null,1,!0,H$K)}},H$V._onTerrainHeightMapLoaded=function(H$f,H$K,H$Y,H$X,H$L){H$L.heightMapLoaded=!0,H$L.texturesLoaded&&(H$f.endLoad([H$Y,H$X]),H$K.recover())},H$V._onTerrainTexturesLoaded=function(H$f,H$K,H$Y,H$X,H$L){H$L.texturesLoaded=!0,H$L.heightMapLoaded&&(H$f.endLoad([H$Y,H$X]),H$K.recover())},H$V._loadMesh=function(H$f){H$f.on("loaded",null,H$V._onMeshLmLoaded,[H$f,H$f._class._getGroup()]),H$f.load(H$f.url,"arraybuffer",!1,null,!0)},H$V._onMeshLmLoaded=function(H$f,H$K,H$Y){if(H$f._class.destroyed)H$f.endLoad();else{var H$X,H$L,H$H,H$E=H$f.url,H$d=H$hK.getURLVerion(H$E),H$O=H$m.getPath(H$E),H$i={},H$U=0,H$Z=0;switch((H$V._readData=new H$s(H$Y)).pos=0,H$V._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var H$y=H$V._readData.getUint32();H$V._readData.pos=H$V._readData.pos+4,H$Z=H$V._readData.getUint16(),H$V._readData.pos=H$V._readData.pos+8*H$Z;var H$l=H$V._readData.getUint32();for(H$Z=H$V._readData.getUint16(),H$V._readData.pos=H$y+H$l,H$X=[],H$U=0;H$U<H$Z;H$U++){var H$B=H$V._readData.readUTFString();-1!==H$B.lastIndexOf(".lmat")&&H$X.push(H$B)}break;default:for(H$V.READ_BLOCK(),H$U=0;H$U<2;H$U++){var H$$=H$V._readData.getUint16(),H$h=H$V._strings[H$$],H$A=H$V["READ_"+H$h];if(null==H$A)throw new Error("model file err,no this function:"+H$$+" "+H$h);1===H$U?H$X=H$A.call():H$A.call()}}for(H$U=0,H$H=H$X.length;H$U<H$H;H$U++){var H$x=H$X[H$U];H$L=H$V.formatRelativePath(H$O,H$x),H$d&&(H$L+=H$d),H$X[H$U]=H$L,H$i[H$x]=H$L}if(0<H$X.length){H$V._onProcessChange(H$f,0,.5,1);var H$S=H$G.create(null,H$V._onProcessChange,[H$f,.5,.5],!1);H$V._innerSecondLevelLoaderManager.create(H$X,H$G.create(null,H$V._onMeshMateialLoaded,[H$f,H$S,H$Y,H$i]),H$S,null,null,1,!0,H$K)}else H$f.endLoad([H$Y,H$i])}},H$V._onMeshMateialLoaded=function(H$f,H$K,H$Y,H$X){H$f.endLoad([H$Y,H$X]),H$K.recover()},H$V._getMaterialTexturePath=function(H$f,H$K,H$Y){var H$X=H$f.length-4;return H$f.indexOf(".dds")!=H$X&&H$f.indexOf(".tga")!=H$X&&H$f.indexOf(".exr")!=H$X&&H$f.indexOf(".DDS")!=H$X&&H$f.indexOf(".TGA")!=H$X&&H$f.indexOf(".EXR")!=H$X||(H$f=H$f.substr(0,H$X)+".png"),H$f=H$V.formatRelativePath(H$Y,H$f),H$K&&(H$f+=H$K),H$f},H$V._loadMaterial=function(H$f){H$f.on("loaded",null,H$V._onMaterilLmatLoaded,[H$f,H$f._class._getGroup()]),H$f.load(H$f.url,"json",!1,null,!0)},H$V._onMaterilLmatLoaded=function(H$f,H$K,H$Y){if(H$f._class.destroyed)H$f.endLoad();else{var H$X,H$L=H$f.url,H$H=H$hK.getURLVerion(H$L),H$E=H$m.getPath(H$L),H$d=[],H$O={},H$i=H$Y.customProps,H$U=H$Y.version;if(H$U)switch(H$U){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var H$Z=H$Y.props.textures,H$y=0,H$l=H$Z.length;H$y<H$l;H$y++){var H$B=H$Z[H$y],H$$=H$B.path;if(H$$){var H$h=H$$.length-4;H$$.indexOf(".exr")!=H$h&&H$$.indexOf(".EXR")!=H$h||(H$$=H$$.substr(0,H$h)+".png"),H$X=H$V.formatRelativePath(H$E,H$$),H$H&&(H$X+=H$H),H$d.push({url:H$X,params:H$B.params}),H$O[H$$]=H$X}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var H$A=H$i.diffuseTexture.texture2D;if(H$A&&(H$X=H$V._getMaterialTexturePath(H$A,H$H,H$E),H$d.push(H$X),H$O[H$A]=H$X),H$i.normalTexture){var H$x=H$i.normalTexture.texture2D;H$x&&(H$X=H$V._getMaterialTexturePath(H$x,H$H,H$E),H$d.push(H$X),H$O[H$x]=H$X)}if(H$i.specularTexture){var H$S=H$i.specularTexture.texture2D;H$S&&(H$X=H$V._getMaterialTexturePath(H$S,H$H,H$E),H$d.push(H$X),H$O[H$S]=H$X)}if(H$i.emissiveTexture){var H$z=H$i.emissiveTexture.texture2D;H$z&&(H$X=H$V._getMaterialTexturePath(H$z,H$H,H$E),H$d.push(H$X),H$O[H$z]=H$X)}if(H$i.ambientTexture){var H$C=H$i.ambientTexture.texture2D;H$C&&(H$X=H$V._getMaterialTexturePath(H$C,H$H,H$E),H$d.push(H$X),H$O[H$C]=H$X)}if(H$i.reflectTexture){var H$s=H$i.reflectTexture.texture2D;H$s&&(H$X=H$V._getMaterialTexturePath(H$s,H$H,H$E),H$d.push(H$X),H$O[H$s]=H$X)}}var H$a=H$d.length,H$I=H$a+1,H$n=1/H$I;if(H$V._onProcessChange(H$f,0,H$n,1),0<H$a){var H$_=H$G.create(null,H$V._onProcessChange,[H$f,H$n,H$a/H$I],!1);H$V._innerFourthLevelLoaderManager.create(H$d,H$G.create(null,H$V._onMateialTexturesLoaded,[H$f,H$_,H$Y,H$O]),H$_,H$rK,null,1,!0,H$K)}else H$V._onMateialTexturesLoaded(H$f,null,H$Y,null)}},H$V._onMateialTexturesLoaded=function(H$f,H$K,H$Y,H$X){H$f.endLoad([H$Y,H$X]),H$K&&H$K.recover()},H$V._loadTextureCube=function(H$f){H$f.on("loaded",null,H$V._onTextureCubeLtcLoaded,[H$f]),H$f.load(H$f.url,"json",!1,null,!0)},H$V._onTextureCubeLtcLoaded=function(H$f,H$K){if(H$f._class.destroyed)H$f.endLoad();else{var H$Y=H$m.getPath(H$f.url),H$X=[H$V.formatRelativePath(H$Y,H$K.px),H$V.formatRelativePath(H$Y,H$K.nx),H$V.formatRelativePath(H$Y,H$K.py),H$V.formatRelativePath(H$Y,H$K.ny),H$V.formatRelativePath(H$Y,H$K.pz),H$V.formatRelativePath(H$Y,H$K.nz)];H$V._onProcessChange(H$f,0,1/7,1);var H$L=H$G.create(null,H$V._onProcessChange,[H$f,1/7,6/7],!1);H$V._innerFourthLevelLoaderManager.load(H$X,H$G.create(null,H$V._onTextureCubeImagesLoaded,[H$f,H$X,H$L]),H$L,"nativeimage")}},H$V._onTextureCubeImagesLoaded=function(H$f,H$K,H$Y){var H$X=[];H$X.length=6;for(var H$L=0;H$L<6;H$L++){var H$H=H$K[H$L];H$X[H$L]=H$A.getRes(H$H),H$A.clearRes(H$H)}H$f.endLoad(H$X),H$Y.recover()},H$V._onProcessChange=function(H$f,H$K,H$Y,H$X){(H$X=H$K+H$X*H$Y)<1&&H$f.event("progress",H$X)},H$V.init=function(H$f,H$K,H$Y,H$X,H$L,H$H){if(void 0===H$Y&&(H$Y=!1),void 0===H$X&&(H$X=!1),void 0===H$L&&(H$L=!0),void 0===H$H&&(H$H=!0),H$x.update3DLoop=function(){},H$x.cancelLoadByUrl=function(H$f){H$V._cancelLoadByUrl(H$f)},H$O.isAntialias=H$Y,H$O.isAlpha=H$X,H$O.premultipliedAlpha=H$L,H$O.isStencil=H$H,!H$R.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");H$x.changeWebGLSize=H$V._changeWebGLSize,H$$.is3DMode=!0,H$C.init(H$f,H$K),H$T.__init__(),H$ZK.__init__(),H$pK.__init__(),H$J.__init__(),H$V.__init__(),H$E.maxTextureCount=2,(H$V.debugMode||H$D.debugMode)&&(H$V._debugPhasorSprite=new H$j)},H$V.HIERARCHY="SPRITE3DHIERARCHY",H$V.MESH="MESH",H$V.MATERIAL="MATERIAL",H$V.PBRMATERIAL="PBRMTL",H$V.TEXTURECUBE="TEXTURECUBE",H$V.TERRAIN="TERRAIN",H$V._readData=null,H$V._debugPhasorSprite=null,H$V.debugMode=!1,H$Z(H$V,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new H$K},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new H$K},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new H$K},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new H$K}]),H$V}(),H$xK=function(H$f){function H$L(H$f){H$L.__super.call(this),this._owner=H$f,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}H$l(H$L,"laya.d3.animation.AnimationTransform3D",H$H);var H$K=H$L.prototype;return H$K._getlocalMatrix=function(){return this._localUpdate&&(H$hK._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},H$K._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var H$f=0,H$K=this._childs.length;H$f<H$K;H$f++)this._childs[H$f]._onWorldTransform()}},H$K._setWorldMatrixAndUpdate=function(H$f){if(this._worldMatrix=H$f,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var H$K=this._getlocalMatrix(),H$Y=0;H$Y<16;++H$Y)this._worldMatrix[H$Y]=H$K[H$Y];else H$hK.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},H$K._setWorldMatrixNoUpdate=function(H$f){this._worldMatrix=H$f},H$K._setWorldMatrixIgnoreUpdate=function(H$f){this._worldMatrix=H$f,this._worldUpdate=!1},H$K.getLocalPosition=function(){return this._localPosition},H$K.setLocalPosition=function(H$f){if(this._parent)this._localPosition=H$f,this._localUpdate=!0,this._onWorldTransform();else{var H$K=this._entity.owner._transform,H$Y=this._entity.localPosition,H$X=H$Y.elements;H$X[0]=H$f[0],H$X[1]=H$f[1],H$X[2]=H$f[2],H$K.localPosition=H$Y}},H$K.getLocalRotation=function(){if(this._localQuaternionUpdate){var H$f=this._localRotationEuler;H$hK._quaternionCreateFromYawPitchRollArray(H$f[1]/H$L._angleToRandin,H$f[0]/H$L._angleToRandin,H$f[2]/H$L._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},H$K.setLocalRotation=function(H$f){if(this._parent)this._localRotation=H$f,H$hK.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var H$K=this._entity.owner._transform,H$Y=this._entity.localRotation,H$X=H$Y.elements;H$X[0]=H$f[0],H$X[1]=H$f[1],H$X[2]=H$f[2],H$X[3]=H$f[3],H$K.localRotation=H$Y}},H$K.getLocalScale=function(){return this._localScale},H$K.setLocalScale=function(H$f){if(this._parent)this._localScale=H$f,this._localUpdate=!0,this._onWorldTransform();else{var H$K=this._entity.owner._transform,H$Y=this._entity.localScale,H$X=H$Y.elements;H$X[0]=H$f[0],H$X[1]=H$f[1],H$X[2]=H$f[2],H$K.localScale=H$Y}},H$K.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){H$hK.getYawPitchRoll(this._localRotation,H$L._tempVector3);var H$f=H$L._tempVector3,H$K=this._localRotationEuler;H$K[0]=H$f[1]*H$L._angleToRandin,H$K[1]=H$f[0]*H$L._angleToRandin,H$K[2]=H$f[2]*H$L._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},H$K.setLocalRotationEuler=function(H$f){if(this._parent)H$hK._quaternionCreateFromYawPitchRollArray(H$f[1]/H$L._angleToRandin,H$f[0]/H$L._angleToRandin,H$f[2]/H$L._angleToRandin,this._localRotation),this._localRotationEuler=H$f,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var H$K=this._entity.owner._transform,H$Y=this._entity.localRotationEuler,H$X=H$Y.elements;H$X[0]=H$f[0],H$X[1]=H$f[1],H$X[2]=H$f[2],H$K.localRotationEuler=H$Y}},H$K.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)H$hK.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var H$f=this._getlocalMatrix(),H$K=0;H$K<16;++H$K)this._worldMatrix[H$K]=H$f[H$K];this._worldUpdate=!1}return this._worldMatrix},H$K.setParent=function(H$f){if(this._parent!==H$f){if(this._parent){var H$K=this._parent._childs,H$Y=H$K.indexOf(this);H$K.splice(H$Y,1)}H$f&&(H$f._childs.push(this),H$f&&this._onWorldTransform()),this._parent=H$f}},H$Z(H$L,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),H$L}(),H$SK=function(H$f){function H$K(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,H$K.__super.call(this),this._destroyed=!1,this._id=H$K._uniqueIDCounter,H$K._uniqueIDCounter++}H$l(H$K,"laya.d3.component.Component3D",H$H);var H$Y=H$K.prototype;return H$C.imps(H$Y,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),H$Y._initialize=function(H$f){this._owner=H$f,this._enable=!0,this.started=!1,this._load(H$f)},H$Y._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},H$Y._load=function(H$f){},H$Y._start=function(H$f){},H$Y._update=function(H$f){},H$Y._lateUpdate=function(H$f){},H$Y._preRenderUpdate=function(H$f){},H$Y._postRenderUpdate=function(H$f){},H$Y._unload=function(H$f){this.offAll()},H$Y._cloneTo=function(H$f){},H$B(0,H$Y,"id",function(){return this._id}),H$B(0,H$Y,"destroyed",function(){return this._destroyed}),H$B(0,H$Y,"owner",function(){return this._owner}),H$B(0,H$Y,"enable",function(){return this._enable},function(H$f){this._enable!==H$f&&(this._enable=H$f,this.event("enablechanged",this._enable))}),H$B(0,H$Y,"isSingleton",function(){return H$K._isSingleton}),H$K._isSingleton=!0,H$K._uniqueIDCounter=1,H$K}(),H$zK=function(H$f){function H$K(){this._destroyed=!1,H$K.__super.call(this),this._destroyed=!1}H$l(H$K,"laya.d3.core.GeometryFilter",H$H);var H$Y=H$K.prototype;return H$C.imps(H$Y,{"laya.resource.IDestroy":!0}),H$Y._destroy=function(){this.offAll(),this._destroyed=!0},H$B(0,H$Y,"_isAsyncLoaded",function(){return!0}),H$B(0,H$Y,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),H$B(0,H$Y,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),H$B(0,H$Y,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),H$B(0,H$Y,"destroyed",function(){return this._destroyed}),H$K}(),H$CK=function(H$f){function H$X(H$f){H$X.__super.call(this),this._id=++H$X._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new H$Df(new H$EK,new H$EK),this._boundingBoxCenter=new H$EK,this._boundingSphere=new H$Nf(new H$EK,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=H$f,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}H$l(H$X,"laya.d3.core.render.BaseRender",H$H);var H$K=H$X.prototype;return H$C.imps(H$K,{"laya.resource.IDestroy":!0}),H$K._changeMaterialReference=function(H$f,H$K){H$f&&H$f._removeReference(),H$K._addReference()},H$K._getInstanceMaterial=function(H$f,H$K){var H$Y=new H$f.constructor;return H$f.cloneTo(H$Y),H$Y.name=H$Y.name+"(Instance)",this._materialsInstance[H$K]=!0,this._changeMaterialReference(this._materials[H$K],H$Y),this._materials[H$K]=H$Y},H$K._setShaderValuelightMap=function(H$f){this._setShaderValueTexture(3,H$f)},H$K._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},H$K._renderRenderableBoundBox=function(){var H$f=H$AK._debugPhasorSprite,H$K=this.boundingBox,H$Y=H$X._tempBoundBoxCorners;H$K.getCorners(H$Y),H$f.line(H$Y[0],H$X._greenColor,H$Y[1],H$X._greenColor),H$f.line(H$Y[2],H$X._greenColor,H$Y[3],H$X._greenColor),H$f.line(H$Y[4],H$X._greenColor,H$Y[5],H$X._greenColor),H$f.line(H$Y[6],H$X._greenColor,H$Y[7],H$X._greenColor),H$f.line(H$Y[0],H$X._greenColor,H$Y[3],H$X._greenColor),H$f.line(H$Y[1],H$X._greenColor,H$Y[2],H$X._greenColor),H$f.line(H$Y[2],H$X._greenColor,H$Y[6],H$X._greenColor),H$f.line(H$Y[3],H$X._greenColor,H$Y[7],H$X._greenColor),H$f.line(H$Y[0],H$X._greenColor,H$Y[4],H$X._greenColor),H$f.line(H$Y[1],H$X._greenColor,H$Y[5],H$X._greenColor),H$f.line(H$Y[4],H$X._greenColor,H$Y[7],H$X._greenColor),H$f.line(H$Y[5],H$X._greenColor,H$Y[6],H$X._greenColor)},H$K._calculateBoundingSphere=function(){throw"BaseRender: must override it."},H$K._calculateBoundingBox=function(){throw"BaseRender: must override it."},H$K._setShaderValueTexture=function(H$f,H$K){this._owner._shaderValues.setValue(H$f,H$K)},H$K._setShaderValueMatrix4x4=function(H$f,H$K){this._owner._shaderValues.setValue(H$f,H$K?H$K.elements:null)},H$K._setShaderValueColor=function(H$f,H$K){this._owner._shaderValues.setValue(H$f,H$K?H$K.elements:null)},H$K._setShaderValueBuffer=function(H$f,H$K){this._owner._shaderValues.setValue(H$f,H$K)},H$K._setShaderValueInt=function(H$f,H$K){this._owner._shaderValues.setValue(H$f,H$K)},H$K._setShaderValueBool=function(H$f,H$K){this._owner._shaderValues.setValue(H$f,H$K)},H$K._setShaderValueNumber=function(H$f,H$K){this._owner._shaderValues.setValue(H$f,H$K)},H$K._setShaderValueVector2=function(H$f,H$K){this._owner._shaderValues.setValue(H$f,H$K?H$K.elements:null)},H$K._addShaderDefine=function(H$f){this._owner._shaderDefineValue|=H$f},H$K._removeShaderDefine=function(H$f){this._owner._shaderDefineValue&=~H$f},H$K._renderUpdate=function(H$f){return!0},H$K._applyLightMapParams=function(){if(0<=this._lightmapIndex){var H$f=this._owner.scene;if(H$f){var H$K=H$f.getlightmaps()[this._lightmapIndex];H$K?(this._addShaderDefine(H$jK.SAHDERDEFINE_LIGHTMAP),H$K.loaded?this._setShaderValuelightMap(H$K):H$K.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(H$jK.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(H$jK.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(H$jK.SAHDERDEFINE_LIGHTMAP)},H$K._updateOctreeNode=function(){var H$f=this._treeNode;H$f&&this._octreeNodeNeedChange&&(H$f.updateObject(this),this._octreeNodeNeedChange=!1)},H$K._destroy=function(){this.offAll();var H$f=0,H$K=0;for(H$f=0,H$K=this._renderElements.length;H$f<H$K;H$f++)this._renderElements[H$f]._destroy();for(H$f=0,H$K=this._materials.length;H$f<H$K;H$f++)this._materials[H$f]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},H$B(0,H$K,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),H$B(0,H$K,"id",function(){return this._id}),H$B(0,H$K,"material",function(){var H$f=this._materials[0];if(H$f&&!this._materialsInstance[0]){var H$K=this._getInstanceMaterial(H$f,0);this.event("materialchanged",[this,0,H$K])}return this._materials[0]},function(H$f){this.sharedMaterial=H$f}),H$B(0,H$K,"sharedMaterial",function(){return this._materials[0]},function(H$f){var H$K=this._materials[0];H$K!==H$f&&(this._materials[0]=H$f,this._materialsInstance[0]=!1,this._changeMaterialReference(H$K,H$f),this.event("materialchanged",[this,0,H$f]))}),H$B(0,H$K,"lightmapIndex",function(){return this._lightmapIndex},function(H$f){this._lightmapIndex=H$f,this._applyLightMapParams()}),H$B(0,H$K,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(H$f){this._lightmapScaleOffset=H$f,this._setShaderValueColor(2,H$f),this._addShaderDefine(H$jK.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),H$B(0,H$K,"enable",function(){return this._enable},function(H$f){this._enable=H$f,this.event("enablechanged",[this,H$f])}),H$B(0,H$K,"materials",function(){for(var H$f=0,H$K=this._materials.length;H$f<H$K;H$f++)if(!this._materialsInstance[H$f]){var H$Y=this._getInstanceMaterial(this._materials[H$f],H$f);this.event("materialchanged",[this,H$f,H$Y])}return this._materials.slice()},function(H$f){this.sharedMaterials=H$f}),H$B(0,H$K,"sharedMaterials",function(){return this._materials.slice()},function(H$f){if(!H$f)throw new Error("MeshRender: shadredMaterials value can't be null.");var H$K=H$f.length;this._materialsInstance.length=H$K;for(var H$Y=0;H$Y<H$K;H$Y++){var H$X=this._materials[H$Y];H$X!==H$f[H$Y]&&(this._materialsInstance[H$Y]=!1,this._changeMaterialReference(H$X,H$f[H$Y]),this.event("materialchanged",[this,H$Y,H$f[H$Y]]))}this._materials=H$f}),H$B(0,H$K,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),H$B(0,H$K,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var H$f=this.boundingBox;H$EK.add(H$f.min,H$f.max,this._boundingBoxCenter),H$EK.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),H$B(0,H$K,"receiveShadow",function(){return this._receiveShadow},function(H$f){this._receiveShadow!==H$f&&((this._receiveShadow=H$f)?this._addShaderDefine(H$lK.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(H$lK.SHADERDEFINE_RECEIVE_SHADOW))}),H$B(0,H$K,"destroyed",function(){return this._destroyed}),H$X._uniqueIDCounter=0,H$Z(H$X,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK,new H$EK]},"_greenColor",function(){return this._greenColor=new H$dK(0,1,0,1)}]),H$X}(),H$sK=function(H$f){function H$d(H$f){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,H$d.__super.call(this),this._localPosition=new H$EK,this._localRotation=new H$YK(0,0,0,1),this._localScale=new H$EK(1,1,1),this._localRotationEuler=new H$EK,this._localMatrix=new H$fK,this._position=new H$EK,this._rotation=new H$YK(0,0,0,1),this._scale=new H$EK(1,1,1),this._worldMatrix=new H$fK,this._forward=new H$EK,this._up=new H$EK,this._right=new H$EK,this._owner=H$f,this._childs=[]}H$l(H$d,"laya.d3.core.Transform3D",H$H);var H$K=H$d.prototype;return H$K._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)H$fK.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var H$f=H$d._tempVector30;H$EK.multiply(this.pivot,this._localScale,H$f);var H$K=H$d._tempVector31;H$EK.subtract(H$f,this.pivot,H$K);var H$Y=H$d._tempVector32,H$X=this.localRotation;H$EK.transformQuat(H$f,H$X,H$Y),H$EK.subtract(H$Y,H$f,H$Y);var H$L=H$d._tempVector33;H$EK.subtract(this._localPosition,H$K,H$L),H$EK.subtract(H$L,H$Y,H$L),H$fK.createAffineTransformation(H$L,H$X,this._localScale,this._localMatrix)}},H$K._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var H$f=0,H$K=this._childs.length;H$f<H$K;H$f++)this._childs[H$f]._onWorldPositionRotationTransform()}},H$K._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H$f=0,H$K=this._childs.length;H$f<H$K;H$f++)this._childs[H$f]._onWorldPositionScaleTransform()}},H$K._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var H$f=0,H$K=this._childs.length;H$f<H$K;H$f++)this._childs[H$f]._onWorldPositionTransform()}},H$K._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var H$f=0,H$K=this._childs.length;H$f<H$K;H$f++)this._childs[H$f]._onWorldPositionRotationTransform()}},H$K._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H$f=0,H$K=this._childs.length;H$f<H$K;H$f++)this._childs[H$f]._onWorldPositionScaleTransform()}},H$K._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var H$f=0,H$K=this._childs.length;H$f<H$K;H$f++)this._childs[H$f]._onWorldTransform()}},H$K.translate=function(H$f,H$K){void 0===H$K&&(H$K=!0),H$K?(H$fK.createFromQuaternion(this.localRotation,H$d._tempMatrix0),H$EK.transformCoordinate(H$f,H$d._tempMatrix0,H$d._tempVector30),H$EK.add(this.localPosition,H$d._tempVector30,this._localPosition),this.localPosition=this._localPosition):(H$EK.add(this.position,H$f,this._position),this.position=this._position)},H$K.rotate=function(H$f,H$K,H$Y){var H$X;void 0===H$K&&(H$K=!0),void 0===H$Y&&(H$Y=!0),H$X=H$Y?H$f:(H$EK.scale(H$f,Math.PI/180,H$d._tempVector30),H$d._tempVector30),H$YK.createFromYawPitchRoll(H$X.y,H$X.x,H$X.z,H$d._tempQuaternion0),H$K?(H$YK.multiply(this._localRotation,H$d._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(H$YK.multiply(H$d._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},H$K.lookAt=function(H$f,H$K,H$Y){void 0===H$Y&&(H$Y=!1);var H$X,H$L=H$f.elements;if(H$Y){if(H$X=this._localPosition.elements,Math.abs(H$X[0]-H$L[0])<H$of.zeroTolerance&&Math.abs(H$X[1]-H$L[1])<H$of.zeroTolerance&&Math.abs(H$X[2]-H$L[2])<H$of.zeroTolerance)return;H$YK.lookAt(this._localPosition,H$f,H$K,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var H$H=this.position;if(H$X=H$H.elements,Math.abs(H$X[0]-H$L[0])<H$of.zeroTolerance&&Math.abs(H$X[1]-H$L[1])<H$of.zeroTolerance&&Math.abs(H$X[2]-H$L[2])<H$of.zeroTolerance)return;H$YK.lookAt(H$H,H$f,H$K,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},H$B(0,H$K,"_isFrontFaceInvert",function(){var H$f=this.scale,H$K=H$f.x<0;return H$f.y<0&&(H$K=!H$K),H$f.z<0&&(H$K=!H$K),H$K}),H$B(0,H$K,"owner",function(){return this._owner}),H$B(0,H$K,"localRotation",function(){if(this._localQuaternionUpdate){var H$f=this._localRotationEuler.elements;H$YK.createFromYawPitchRoll(H$f[1]/H$d._angleToRandin,H$f[0]/H$d._angleToRandin,H$f[2]/H$d._angleToRandin,this._localRotation)}return this._localRotation},function(H$f){this._localRotation=H$f,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),H$B(0,H$K,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?H$fK.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(H$f){null===this._parent?H$f.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),H$fK.multiply(this._localMatrix,H$f,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=H$f,this._worldUpdate=!1}),H$B(0,H$K,"worldNeedUpdate",function(){return this._worldUpdate}),H$B(0,H$K,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(H$f){this._localMatrix=H$f,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),H$B(0,H$K,"dummy",function(){return this._dummy},function(H$f){this._dummy!==H$f&&(this._dummy&&(this._dummy._entity=null),H$f&&(H$f._entity=this),this._dummy=H$f)}),H$B(0,H$K,"localPosition",function(){return this._localPosition},function(H$f){this._localPosition=H$f,this._localUpdate=!0,this._onWorldPositionTransform()}),H$B(0,H$K,"position",function(){if(this._positionUpdate){if(null!=this._parent){var H$f=this._parent.position;H$EK.multiply(this._localPosition,this._parent.scale,H$d._tempVector30),H$EK.transformQuat(H$d._tempVector30,this._parent.rotation,H$d._tempVector30),H$EK.add(H$f,H$d._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(H$f){if(null!=this._parent){H$EK.subtract(H$f,this._parent.position,this._localPosition);var H$K=this._parent.scale.elements,H$Y=H$K[0],H$X=H$K[1],H$L=H$K[2];if(1!==H$Y||1!==H$X||1!==H$L){var H$H=H$d._tempVector30,H$E=H$H.elements;H$E[0]=1/H$Y,H$E[1]=1/H$X,H$E[2]=1/H$L,H$EK.multiply(this._localPosition,H$H,this._localPosition)}this._parent.rotation.invert(H$d._tempQuaternion0),H$EK.transformQuat(this._localPosition,H$d._tempQuaternion0,this._localPosition)}else H$f.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=H$f,this._positionUpdate=!1}),H$B(0,H$K,"localScale",function(){return this._localScale},function(H$f){this._localScale=H$f,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),H$B(0,H$K,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(H$d._tempVector30);var H$f=H$d._tempVector30.elements,H$K=this._localRotationEuler.elements;H$K[0]=H$f[1]*H$d._angleToRandin,H$K[1]=H$f[0]*H$d._angleToRandin,H$K[2]=H$f[2]*H$d._angleToRandin}return this._localRotationEuler},function(H$f){this._localRotationEuler=H$f,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),H$B(0,H$K,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?H$YK.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(H$f){null!=this._parent?(this._parent.rotation.invert(H$d._tempQuaternion0),H$YK.multiply(H$f,H$d._tempQuaternion0,this._localRotation)):H$f.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=H$f,this._rotationUpdate=!1}),H$B(0,H$K,"scale",function(){return this._scaleUpdate&&(null!==this._parent?H$EK.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(H$f){if(null!==this._parent){var H$K=this._parent.scale.elements,H$Y=H$d._tempVector30.elements;H$Y[0]=1/H$K[0],H$Y[1]=1/H$K[1],H$Y[2]=1/H$K[2],H$EK.multiply(H$f,H$d._tempVector30,this._localScale)}else H$f.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=H$f,this._scaleUpdate=!1}),H$B(0,H$K,"rotationEuler",null,function(H$f){H$YK.createFromYawPitchRoll(H$f.y,H$f.x,H$f.z,this._rotation),this.rotation=this._rotation}),H$B(0,H$K,"forward",function(){var H$f=this.worldMatrix.elements;return this._forward.elements[0]=-H$f[8],this._forward.elements[1]=-H$f[9],this._forward.elements[2]=-H$f[10],this._forward}),H$B(0,H$K,"up",function(){var H$f=this.worldMatrix.elements;return this._up.elements[0]=H$f[4],this._up.elements[1]=H$f[5],this._up.elements[2]=H$f[6],this._up}),H$B(0,H$K,"right",function(){var H$f=this.worldMatrix.elements;return this._right.elements[0]=H$f[0],this._right.elements[1]=H$f[1],this._right.elements[2]=H$f[2],this._right}),H$B(0,H$K,"parent",function(){return this._parent},function(H$f){if(this._parent!==H$f){if(this._parent){var H$K=this._parent._childs,H$Y=H$K.indexOf(this);H$K.splice(H$Y,1)}H$f&&(H$f._childs.push(this),H$f&&this._onWorldTransform()),this._parent=H$f}}),H$Z(H$d,["_tempVector30",function(){return this._tempVector30=new H$EK},"_tempVector31",function(){return this._tempVector31=new H$EK},"_tempVector32",function(){return this._tempVector32=new H$EK},"_tempVector33",function(){return this._tempVector33=new H$EK},"_tempQuaternion0",function(){return this._tempQuaternion0=new H$YK},"_tempMatrix0",function(){return this._tempMatrix0=new H$fK},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),H$d}(),H$aK=(function(H$f){function H$K(){this._rotation=0,this._matNeedUpdte=!1,H$K.__super.call(this),this._matrix=new H$fK,this._offset=new H$HK,this._tiling=new H$HK(1,1)}H$l(H$K,"laya.d3.core.TransformUV",H$H);var H$Y=H$K.prototype;H$C.imps(H$Y,{"laya.d3.core.IClone":!0}),H$Y._updateMatrix=function(){H$K._tempOffsetV3.elements[0]=this._offset.x,H$K._tempOffsetV3.elements[1]=this._offset.y,H$YK.createFromYawPitchRoll(0,0,this._rotation,H$K._tempRotationQua),H$K._tempTitlingV3.elements[0]=this._tiling.x,H$K._tempTitlingV3.elements[1]=this._tiling.y,H$fK.createAffineTransformation(H$K._tempOffsetV3,H$K._tempRotationQua,H$K._tempTitlingV3,this._matrix)},H$Y.cloneTo=function(H$f){H$f._matrix=this._matrix.clone(),H$f._offset=this._offset.clone(),H$f._rotation=this._rotation,H$f._tiling=this._tiling.clone()},H$Y.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$Y,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),H$B(0,H$Y,"tiling",function(){return this._tiling},function(H$f){this._tiling=H$f,this._matNeedUpdte=!0}),H$B(0,H$Y,"offset",function(){return this._offset},function(H$f){this._offset=H$f,this._matNeedUpdte=!0}),H$B(0,H$Y,"rotation",function(){return this._rotation},function(H$f){this._rotation=H$f,this._matNeedUpdte=!0}),H$Z(H$K,["_tempOffsetV3",function(){return this._tempOffsetV3=new H$EK(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new H$YK},"_tempTitlingV3",function(){return this._tempTitlingV3=new H$EK(1,1,1)}])}(),function(H$Y){function H$f(){this.x=NaN,this.y=NaN,this.z=NaN,H$f.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}H$l(H$f,"laya.d3.core.particleShuriKen.module.shape.BoxShape",H$Y);var H$K=H$f.prototype;H$K._getShapeBoundBox=function(H$f){var H$K=H$f.min.elements;H$K[0]=.5*-this.x,H$K[1]=.5*-this.y,H$K[2]=.5*-this.z;var H$Y=H$f.max.elements;H$Y[0]=.5*this.x,H$Y[1]=.5*this.y,H$Y[2]=.5*this.z},H$K._getSpeedBoundBox=function(H$f){var H$K=H$f.min.elements;H$K[0]=0,H$K[1]=0,H$K[2]=0;var H$Y=H$f.max.elements;H$Y[0]=0,H$Y[1]=1,H$Y[2]=0},H$K.generatePositionAndDirection=function(H$f,H$K,H$Y,H$X){var H$L=H$f.elements,H$H=H$K.elements;H$Y?(H$Y.seed=H$X[16],H$r._randomPointInsideHalfUnitBox(H$f,H$Y),H$X[16]=H$Y.seed):H$r._randomPointInsideHalfUnitBox(H$f),H$L[0]=this.x*H$L[0],H$L[1]=this.y*H$L[1],H$L[2]=this.z*H$L[2],this.randomDirection?H$Y?(H$Y.seed=H$X[17],H$r._randomPointUnitSphere(H$K,H$Y),H$X[17]=H$Y.seed):H$r._randomPointUnitSphere(H$K):(H$H[0]=0,H$H[1]=0,H$H[2]=1)},H$K.cloneTo=function(H$f){H$Y.prototype.cloneTo.call(this,H$f);var H$K=H$f;H$K.x=this.x,H$K.y=this.y,H$K.z=this.z,H$K.randomDirection=this.randomDirection}}(H$P),function(H$Y){function H$E(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,H$E.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}H$l(H$E,"laya.d3.core.particleShuriKen.module.shape.CircleShape",H$Y);var H$f=H$E.prototype;H$f._getShapeBoundBox=function(H$f){var H$K=H$f.min.elements;H$K[0]=H$K[2]=-this.radius,H$K[1]=0;var H$Y=H$f.max.elements;H$Y[0]=H$Y[2]=this.radius,H$Y[1]=0},H$f._getSpeedBoundBox=function(H$f){var H$K=H$f.min.elements;H$K[0]=H$K[1]=-1,H$K[2]=0;var H$Y=H$f.max.elements;H$Y[0]=H$Y[1]=1,H$Y[2]=0},H$f.generatePositionAndDirection=function(H$f,H$K,H$Y,H$X){var H$L=H$f.elements,H$H=H$E._tempPositionPoint.elements;H$Y?(H$Y.seed=H$X[16],this.emitFromEdge?H$r._randomPointUnitArcCircle(this.arc,H$E._tempPositionPoint,H$Y):H$r._randomPointInsideUnitArcCircle(this.arc,H$E._tempPositionPoint,H$Y),H$X[16]=H$Y.seed):this.emitFromEdge?H$r._randomPointUnitArcCircle(this.arc,H$E._tempPositionPoint):H$r._randomPointInsideUnitArcCircle(this.arc,H$E._tempPositionPoint),H$L[0]=-H$H[0],H$L[1]=H$H[1],H$L[2]=0,H$EK.scale(H$f,this.radius,H$f),this.randomDirection?H$Y?(H$Y.seed=H$X[17],H$r._randomPointUnitSphere(H$K,H$Y),H$X[17]=H$Y.seed):H$r._randomPointUnitSphere(H$K):H$f.cloneTo(H$K)},H$f.cloneTo=function(H$f){H$Y.prototype.cloneTo.call(this,H$f);var H$K=H$f;H$K.radius=this.radius,H$K.arc=this.arc,H$K.emitFromEdge=this.emitFromEdge,H$K.randomDirection=this.randomDirection},H$Z(H$E,["_tempPositionPoint",function(){return this._tempPositionPoint=new H$HK}])}(H$P),function(H$Y){function H$y(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,H$y.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}H$l(H$y,"laya.d3.core.particleShuriKen.module.shape.ConeShape",H$Y);var H$f=H$y.prototype;H$f._getShapeBoundBox=function(H$f){var H$K=this.radius+this.length*Math.sin(this.angle),H$Y=this.length*Math.cos(this.angle),H$X=H$f.min.elements;H$X[0]=H$X[1]=-H$K,H$X[2]=0;var H$L=H$f.max.elements;H$L[0]=H$L[1]=H$K,H$L[2]=H$Y},H$f._getSpeedBoundBox=function(H$f){var H$K=Math.sin(this.angle),H$Y=H$f.min.elements;H$Y[0]=H$Y[1]=-H$K,H$Y[2]=0;var H$X=H$f.max.elements;H$X[0]=H$Y[1]=H$K,H$X[2]=1},H$f.generatePositionAndDirection=function(H$f,H$K,H$Y,H$X){var H$L,H$H=H$f.elements,H$E=H$K.elements,H$d=H$y._tempPositionPoint.elements,H$O=NaN,H$i=NaN,H$U=Math.cos(this.angle),H$Z=Math.sin(this.angle);switch(this.emitType){case 0:H$Y?(H$Y.seed=H$X[16],H$r._randomPointInsideUnitCircle(H$y._tempPositionPoint,H$Y),H$X[16]=H$Y.seed):H$r._randomPointInsideUnitCircle(H$y._tempPositionPoint),H$O=H$d[0],H$i=H$d[1],H$H[0]=H$O*this.radius,H$H[1]=H$i*this.radius,H$H[2]=0,this.randomDirection?(H$Y?(H$Y.seed=H$X[17],H$r._randomPointInsideUnitCircle(H$y._tempDirectionPoint,H$Y),H$X[17]=H$Y.seed):H$r._randomPointInsideUnitCircle(H$y._tempDirectionPoint),H$L=H$y._tempDirectionPoint.elements,H$E[0]=H$L[0]*H$Z,H$E[1]=H$L[1]*H$Z):(H$E[0]=H$O*H$Z,H$E[1]=H$i*H$Z),H$E[2]=H$U;break;case 1:H$Y?(H$Y.seed=H$X[16],H$r._randomPointUnitCircle(H$y._tempPositionPoint,H$Y),H$X[16]=H$Y.seed):H$r._randomPointUnitCircle(H$y._tempPositionPoint),H$O=H$d[0],H$i=H$d[1],H$H[0]=H$O*this.radius,H$H[1]=H$i*this.radius,H$H[2]=0,this.randomDirection?(H$Y?(H$Y.seed=H$X[17],H$r._randomPointInsideUnitCircle(H$y._tempDirectionPoint,H$Y),H$X[17]=H$Y.seed):H$r._randomPointInsideUnitCircle(H$y._tempDirectionPoint),H$L=H$y._tempDirectionPoint.elements,H$E[0]=H$L[0]*H$Z,H$E[1]=H$L[1]*H$Z):(H$E[0]=H$O*H$Z,H$E[1]=H$i*H$Z),H$E[2]=H$U;break;case 2:H$Y?(H$Y.seed=H$X[16],H$r._randomPointInsideUnitCircle(H$y._tempPositionPoint,H$Y)):H$r._randomPointInsideUnitCircle(H$y._tempPositionPoint),H$O=H$d[0],H$i=H$d[1],H$H[0]=H$O*this.radius,H$H[1]=H$i*this.radius,H$E[H$H[2]=0]=H$O*H$Z,H$E[1]=H$i*H$Z,H$E[2]=H$U,H$EK.normalize(H$K,H$K),H$Y?(H$EK.scale(H$K,this.length*H$Y.getFloat(),H$K),H$X[16]=H$Y.seed):H$EK.scale(H$K,this.length*Math.random(),H$K),H$EK.add(H$f,H$K,H$f),this.randomDirection&&(H$Y?(H$Y.seed=H$X[17],H$r._randomPointUnitSphere(H$K,H$Y),H$X[17]=H$Y.seed):H$r._randomPointUnitSphere(H$K));break;case 3:H$Y?(H$Y.seed=H$X[16],H$r._randomPointUnitCircle(H$y._tempPositionPoint,H$Y)):H$r._randomPointUnitCircle(H$y._tempPositionPoint),H$O=H$d[0],H$i=H$d[1],H$H[0]=H$O*this.radius,H$H[1]=H$i*this.radius,H$E[H$H[2]=0]=H$O*H$Z,H$E[1]=H$i*H$Z,H$E[2]=H$U,H$EK.normalize(H$K,H$K),H$Y?(H$EK.scale(H$K,this.length*H$Y.getFloat(),H$K),H$X[16]=H$Y.seed):H$EK.scale(H$K,this.length*Math.random(),H$K),H$EK.add(H$f,H$K,H$f),this.randomDirection&&(H$Y?(H$Y.seed=H$X[17],H$r._randomPointUnitSphere(H$K,H$Y),H$X[17]=H$Y.seed):H$r._randomPointUnitSphere(H$K));break;default:throw new Error("ConeShape:emitType is invalid.")}},H$f.cloneTo=function(H$f){H$Y.prototype.cloneTo.call(this,H$f);var H$K=H$f;H$K.angle=this.angle,H$K.radius=this.radius,H$K.length=this.length,H$K.emitType=this.emitType,H$K.randomDirection=this.randomDirection},H$Z(H$y,["_tempPositionPoint",function(){return this._tempPositionPoint=new H$HK},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new H$HK}])}(H$P),function(H$Y){function H$f(){this.radius=NaN,this.emitFromShell=!1,H$f.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}H$l(H$f,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",H$Y);var H$K=H$f.prototype;H$K._getShapeBoundBox=function(H$f){var H$K=H$f.min.elements;H$K[0]=H$K[1]=H$K[2]=-this.radius;var H$Y=H$f.max.elements;H$Y[0]=H$Y[1]=this.radius,H$Y[2]=0},H$K._getSpeedBoundBox=function(H$f){var H$K=H$f.min.elements;H$K[0]=H$K[1]=-1,H$K[2]=0;var H$Y=H$f.max.elements;H$Y[0]=H$Y[1]=H$Y[2]=1},H$K.generatePositionAndDirection=function(H$f,H$K,H$Y,H$X){var H$L=H$f.elements;H$Y?(H$Y.seed=H$X[16],this.emitFromShell?H$r._randomPointUnitSphere(H$f,H$Y):H$r._randomPointInsideUnitSphere(H$f,H$Y),H$X[16]=H$Y.seed):this.emitFromShell?H$r._randomPointUnitSphere(H$f):H$r._randomPointInsideUnitSphere(H$f),H$EK.scale(H$f,this.radius,H$f);var H$H=H$L[2];H$H<0&&(H$L[2]=-1*H$H),this.randomDirection?H$Y?(H$Y.seed=H$X[17],H$r._randomPointUnitSphere(H$K,H$Y),H$X[17]=H$Y.seed):H$r._randomPointUnitSphere(H$K):H$f.cloneTo(H$K)},H$K.cloneTo=function(H$f){H$Y.prototype.cloneTo.call(this,H$f);var H$K=H$f;H$K.radius=this.radius,H$K.emitFromShell=this.emitFromShell,H$K.randomDirection=this.randomDirection}}(H$P),function(H$Y){function H$f(){this.radius=NaN,this.emitFromShell=!1,H$f.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}H$l(H$f,"laya.d3.core.particleShuriKen.module.shape.SphereShape",H$Y);var H$K=H$f.prototype;H$K._getShapeBoundBox=function(H$f){var H$K=H$f.min.elements;H$K[0]=H$K[1]=H$K[2]=-this.radius;var H$Y=H$f.max.elements;H$Y[0]=H$Y[1]=H$Y[2]=this.radius},H$K._getSpeedBoundBox=function(H$f){var H$K=H$f.min.elements;H$K[0]=H$K[1]=H$K[2]=-1;var H$Y=H$f.max.elements;H$Y[0]=H$Y[1]=H$Y[2]=1},H$K.generatePositionAndDirection=function(H$f,H$K,H$Y,H$X){H$Y?(H$Y.seed=H$X[16],this.emitFromShell?H$r._randomPointUnitSphere(H$f,H$Y):H$r._randomPointInsideUnitSphere(H$f,H$Y),H$X[16]=H$Y.seed):this.emitFromShell?H$r._randomPointUnitSphere(H$f):H$r._randomPointInsideUnitSphere(H$f),H$EK.scale(H$f,this.radius,H$f),this.randomDirection?H$Y?(H$Y.seed=H$X[17],H$r._randomPointUnitSphere(H$K,H$Y),H$X[17]=H$Y.seed):H$r._randomPointUnitSphere(H$K):H$f.cloneTo(H$K)},H$K.cloneTo=function(H$f){H$Y.prototype.cloneTo.call(this,H$f);var H$K=H$f;H$K.radius=this.radius,H$K.emitFromShell=this.emitFromShell,H$K.randomDirection=this.randomDirection}}(H$P),function(H$f){function H$K(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,H$K.__super.call(this)}return H$l(H$K,"laya.d3.core.render.SubMeshRenderElement",H$c),H$K}()),H$IK=function(H$f){function H$h(H$f,H$K,H$Y,H$X,H$L,H$H){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=H$f,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[H$lK.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[H$jK.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[H$jK.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[H$mK.SHADERDEFINE_ALPHATEST]="ALPHATEST";H$h.__super.call(this,H$f,H$K,H$Y,null,{}),this._attributeMap=H$X;var H$E;for(H$E in H$L){var H$d=H$L[H$E];switch(H$d[1]){case 0:this._renderElementUniformMap[H$E]=H$d[0];break;case 1:this._materialUniformMap[H$E]=H$d[0];break;case 2:this._spriteUniformMap[H$E]=H$d[0];break;case 3:this._cameraUniformMap[H$E]=H$d[0];break;case 4:this._sceneUniformMap[H$E]=H$d[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}H$l(H$h,"laya.d3.shader.ShaderCompile3D",H$S);var H$K=H$h.prototype;return H$K._definesToNameDic=function(H$f,H$K){for(var H$Y={},H$X=1,H$L=0;H$L<32&&!(H$f<(H$X=1<<H$L));H$L++)if(H$f&H$X){var H$H=H$K[H$X];H$H&&(H$Y[H$H]="")}return H$Y},H$K.withCompile=function(H$f,H$K,H$Y,H$X){var H$L,H$H,H$E;if(H$H=this.sharders[H$f])if(H$E=H$H[H$K]){if(H$L=H$E[H$Y])return H$L}else H$E=H$H[H$K]=[];else H$E=(H$H=this.sharders[H$f]=[])[H$K]=[];var H$d,H$O=this._definesToNameDic(H$f,H$h._globalInt2name),H$i=this._definesToNameDic(H$K,this._spriteInt2name),H$U=this._definesToNameDic(H$Y,this._materialInt2name),H$Z={},H$y="";if(H$O)for(H$d in H$O)H$y+="#define "+H$d+"\n",H$Z[H$d]=!0;if(H$i)for(H$d in H$i)H$y+="#define "+H$d+"\n",H$Z[H$d]=!0;if(H$U)for(H$d in H$U)H$y+="#define "+H$d+"\n",H$Z[H$d]=!0;var H$l=H$QK.nameKey.getName(this._name)+" compile ("+H$f+","+H$K+","+H$Y+")",H$B=this._VS.toscript(H$Z,[]),H$$=this._PS.toscript(H$Z,[]);H$t.now();if(H$L=H$QK.create(H$y+H$B.join("\n"),H$y+H$$.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,H$X,H$l),H$E[H$Y]=H$L,laya.d3.shader.ShaderCompile3D.debugMode)H$t.now();return H$L},H$K.precompileShaderWithShaderDefine=function(H$f,H$K,H$Y){this.withCompile(H$f,H$K,H$Y,!0)},H$K.addMaterialDefines=function(H$f){var H$K=H$f.defines;for(var H$Y in H$K){var H$X=H$K[H$Y],H$L=parseInt(H$Y);this._materialInt2name[H$L]=H$X,this._materialName2Int[H$X]=H$L}},H$K.addSpriteDefines=function(H$f){var H$K=H$f.defines;for(var H$Y in H$K){var H$X=H$K[H$Y],H$L=parseInt(H$Y);this._spriteInt2name[H$L]=H$X,this._spriteName2Int[H$X]=H$L}},H$K.getMaterialDefineByName=function(H$f){return this._materialName2Int[H$f]},H$K.registerMaterialDefine=function(H$f){var H$K=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[H$K]=H$f,this._materialName2Int[H$f]=H$K},H$K.registerSpriteDefine=function(H$f){var H$K=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[H$K]=H$f,this._spriteName2Int[H$f]=H$K},H$h._globalRegDefine=function(H$f,H$K){H$h._globalInt2name[H$K]=H$f},H$h.add=function(H$f,H$K,H$Y,H$X,H$L){return laya.d3.shader.ShaderCompile3D._preCompileShader[H$f]=new H$h(H$f,H$K,H$Y,H$X,H$L,H$S.includes)},H$h.get=function(H$f){return laya.d3.shader.ShaderCompile3D._preCompileShader[H$QK.nameKey.getID(H$f)]},H$h._preCompileShader={},H$h._globalInt2name=[],H$h.debugMode=!1,H$h.SHADERDEFINE_HIGHPRECISION=1,H$h.SHADERDEFINE_FOG=4,H$h.SHADERDEFINE_DIRECTIONLIGHT=8,H$h.SHADERDEFINE_POINTLIGHT=16,H$h.SHADERDEFINE_SPOTLIGHT=32,H$h.SHADERDEFINE_UV0=64,H$h.SHADERDEFINE_COLOR=128,H$h.SHADERDEFINE_UV1=256,H$h.SAHDERDEFINE_DEPTHFOG=131072,H$h}(),H$nK=function(H$f){function H$B(){H$B.__super.call(this)}H$l(H$B,"laya.d3.graphics.MeshSprite3DStaticBatchManager",H$Xf);var H$K=H$B.prototype;return H$K._getStaticBatch=function(H$f,H$K,H$Y,H$X){var H$L,H$H;return H$H=H$f?H$f.id.toString()+H$Y.id.toString()+H$K.id.toString()+H$X.toString():H$Y.id.toString()+H$K.id.toString()+H$X.toString(),this._staticBatches[H$H]?H$L=this._staticBatches[H$H]:this._staticBatches[H$H]=H$L=new H$_K(H$H,this,H$f,H$K,H$Y),H$L},H$K._initStaticBatchs=function(H$f){var H$K,H$Y;this._initBatchRenderElements.sort(H$B._sortPrepareStaticBatch);for(var H$X,H$L=!1,H$H=0,H$E=0,H$d=this._initBatchRenderElements.length;H$E<H$d;H$E++){var H$O,H$i=this._initBatchRenderElements[H$E],H$U=H$i.renderObj._getVertexBuffer(0);H$i._sprite3D;if(H$Y===H$U.vertexDeclaration&&H$K===H$i._material)if(H$L)H$X._addCombineBatchRenderObjTest(H$i)?(H$O=H$i._staticBatch)!==H$X&&(H$O&&H$O._deleteCombineBatchRenderObj(H$i),H$X._addCombineBatchRenderObj(H$i)):(H$L=!1,H$H++);else{var H$Z=this._initBatchRenderElements[H$E-1],H$y=H$Z.renderObj,H$l=H$i.renderObj;H$L=!(65535<H$y._getVertexBuffer().vertexCount+H$l._getVertexBuffer().vertexCount)&&(H$X=this._getStaticBatch(H$f,H$Y,H$K,H$H),(H$O=H$Z._staticBatch)!==H$X&&(H$O&&H$O._deleteCombineBatchRenderObj(H$Z),H$X._addCombineBatchRenderObj(H$Z)),(H$O=H$i._staticBatch)!==H$X&&(H$O&&H$O._deleteCombineBatchRenderObj(H$i),H$X._addCombineBatchRenderObj(H$i)),!0)}else H$L=!1,H$H=0;H$K=H$i._material,H$Y=H$U.vertexDeclaration}},H$B._sortPrepareStaticBatch=function(H$f,H$K){var H$Y=H$f._render,H$X=H$K._render,H$L=H$Y.lightmapIndex-H$X.lightmapIndex;if(0!=H$L)return H$L;var H$H=H$Y.receiveShadow-H$X.receiveShadow;if(0!=H$H)return H$H;var H$E=H$f._mainSortID-H$K._mainSortID;return 0==H$E?H$f.renderObj.triangleCount-H$K.renderObj.triangleCount:H$E},H$B}(),H$_K=function(H$f){function H$H(H$f,H$K,H$Y,H$X,H$L){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,H$H.__super.call(this,H$f,H$K,H$Y),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=H$X,this._material=H$L}H$l(H$H,"laya.d3.graphics.SubMeshStaticBatch",H$Lf);var H$K=H$H.prototype;return H$K._compareBatchRenderElement=function(H$f,H$K){return H$f._batchIndexStart>H$K._batchIndexStart},H$K._addCombineBatchRenderObjTest=function(H$f){var H$K=H$f.renderObj._vertexCount;return!(65535<(0<H$K?this._currentCombineVertexCount+H$K:this._currentCombineVertexCount+H$f.renderObj._getVertexBuffer().vertexCount))},H$K._addCombineBatchRenderObj=function(H$f){var H$K=H$f.renderObj,H$Y=H$K._vertexCount;this._initBatchRenderElements.push(H$f),H$f._staticBatch=this,0<H$Y?(this._currentCombineIndexCount+=H$K._indexCount,this._currentCombineVertexCount+=H$Y):(this._currentCombineIndexCount=this._currentCombineIndexCount+H$K._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+H$K._getVertexBuffer().vertexCount),this._needFinishCombine=!0},H$K._deleteCombineBatchRenderObj=function(H$f){var H$K=H$f.renderObj,H$Y=this._initBatchRenderElements.indexOf(H$f);if(-1!==H$Y){this._initBatchRenderElements.splice(H$Y,1),H$f._staticBatch=null;var H$X=H$K._vertexCount;0<H$X?(this._currentCombineIndexCount=this._currentCombineIndexCount-H$K._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-H$X):(this._currentCombineIndexCount=this._currentCombineIndexCount-H$K._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-H$K._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},H$K._finishInit=function(){if(this._needFinishCombine){var H$f=0,H$K=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var H$Y=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),H$X=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=H$PK.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=H$qK.create("ushort",this._currentCombineIndexCount,35044);for(var H$L=0,H$H=this._initBatchRenderElements.length;H$L<H$H;H$L++){var H$E=this._initBatchRenderElements[H$L],H$d=H$E.renderObj,H$O=H$d._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,H$E._sprite3D),H$i=H$d.getIndices(),H$U=H$E._sprite3D.transform._isFrontFaceInvert,H$Z=H$f/(this._vertexDeclaration.vertexStride/4)-H$d._vertexStart,H$y=H$K,H$l=H$y+H$i.length;H$E._batchIndexStart=H$y,H$E._batchIndexEnd=H$l,H$X.set(H$i,H$K);var H$B=0;if(H$U)for(H$B=H$y;H$B<H$l;H$B+=3){H$X[H$B]=H$Z+H$X[H$B];var H$$=H$X[H$B+1],H$h=H$X[H$B+2];H$X[H$B+1]=H$Z+H$h,H$X[H$B+2]=H$Z+H$$}else for(H$B=H$y;H$B<H$l;H$B+=3)H$X[H$B]=H$Z+H$X[H$B],H$X[H$B+1]=H$Z+H$X[H$B+1],H$X[H$B+2]=H$Z+H$X[H$B+2];H$K+=H$i.length,H$Y.set(H$O,H$f),H$f+=H$O.length}this._vertexBuffer.setData(H$Y),this._indexBuffer.setData(H$X),this._needFinishCombine=!1}},H$K._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new H$aK)},H$K._getRenderElement=function(H$f,H$K,H$Y){for(var H$X,H$L,H$H=this._batchRenderElements.length,H$E=!0,H$d=0;H$d<H$H;H$d++){var H$O,H$i,H$U=(H$L=this._batchRenderElements[H$d])._sprite3D._render;if(0!==H$d&&(H$E=(H$O=(H$X=this._batchRenderElements[H$d-1])._sprite3D._render).lightmapIndex!==H$U.lightmapIndex||H$O.receiveShadow!==H$U.receiveShadow||H$X._batchIndexEnd!==H$L._batchIndexStart),H$E){(H$i=this._getCombineRenderElementFromPool()).renderObj=this,H$i._material=this._material,H$i._batchIndexStart=H$L._batchIndexStart,H$i._batchIndexEnd=H$L._batchIndexEnd;var H$Z=H$U.lightmapIndex,H$y=H$Z+1,H$l=this._batchOwnerIndices[H$y];H$l||(H$l=this._batchOwnerIndices[H$y]=[]);var H$B,H$$=H$l[H$L._render.receiveShadow?1:0];void 0===H$$?(H$l[H$U.receiveShadow?1:0]=this._batchOwners.length,(H$B=new H$pK(null,"StaticBatchMeshSprite3D"))._scene=H$K,H$B._transform=this._rootOwner?this._rootOwner._transform:null,H$B._render.lightmapIndex=H$Z,H$B._render.receiveShadow=H$L._render.receiveShadow,this._batchOwners.push(H$B)):H$B=this._batchOwners[H$$],H$B._render._renderUpdate(H$Y),H$i._sprite3D=H$B,H$f.push(H$i)}else H$i._batchIndexEnd=H$L._batchIndexEnd}},H$K._beforeRender=function(H$f){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$K._render=function(H$f){var H$K=H$f.renderElement,H$Y=H$K._batchIndexStart,H$X=H$K._batchIndexEnd-H$Y;H$R.mainContext.drawElements(4,H$X,5123,2*H$Y),H$I.drawCall++,H$I.trianglesFaces+=H$X/3},H$K.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},H$K._getVertexBuffer=function(H$f){return void 0===H$f&&(H$f=0),this._vertexBuffer},H$H}(),H$GK=function(H$f){function H$K(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,H$K.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}H$l(H$K,"laya.d3.core.ComponentNode",H$i);var H$Y=H$K.prototype;return H$Y.addComponent=function(H$f){var H$K,H$Y=this._componentsMap.indexOf(H$f);if(-1===H$Y)H$K=[],this._componentsMap.push(H$f),this._typeComponentsIndices.push(H$K);else if(H$K=this._typeComponentsIndices[H$Y],this._components[H$K[0]].isSingleton)throw new Error("无法单实例创建"+H$f+"组件，"+H$f+"组件已存在！");var H$X=H$L.getInstance(H$f);return H$K.push(this._components.length),this._components.push(H$X),H$X instanceof laya.d3.component.Script&&this._scripts.push(H$X),H$X._initialize(this),H$X},H$Y._removeComponent=function(H$f,H$K){var H$Y=this._typeComponentsIndices[H$f],H$X=H$Y[H$K],H$L=this._components[H$X];this._components.splice(H$X,1),H$L instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(H$L),1),H$Y.splice(H$K,1),0===H$Y.length&&(this._typeComponentsIndices.splice(H$f,1),this._componentsMap.splice(H$f,1));for(var H$H=0,H$E=this._componentsMap.length;H$H<H$E;H$H++)for(var H$d=(H$Y=this._typeComponentsIndices[H$H]).length-1;0<=H$d;H$d--){var H$O=H$Y[H$d];if(!(H$X<H$O))break;H$Y[H$d]=--H$O}H$L._destroy()},H$Y.getComponentByType=function(H$f,H$K){void 0===H$K&&(H$K=0);var H$Y=this._componentsMap.indexOf(H$f);return-1===H$Y?null:this._components[this._typeComponentsIndices[H$Y][H$K]]},H$Y.getComponentsByType=function(H$f,H$K){var H$Y=this._componentsMap.indexOf(H$f);if(-1!==H$Y){var H$X=this._typeComponentsIndices[H$Y],H$L=H$X.length;H$K.length=H$L;for(var H$H=0;H$H<H$L;H$H++)H$K[H$H]=this._components[H$X[H$H]]}else H$K.length=0},H$Y.getComponentByIndex=function(H$f){return this._components[H$f]},H$Y.removeComponentByType=function(H$f,H$K){void 0===H$K&&(H$K=0);var H$Y=this._componentsMap.indexOf(H$f);-1!==H$Y&&this._removeComponent(H$Y,H$K)},H$Y.removeComponentsByType=function(H$f){var H$K=this._componentsMap.indexOf(H$f);if(-1!==H$K)for(var H$Y=this._typeComponentsIndices[H$K],H$X=0,H$L=H$Y.length;H$X<H$L;H$Y.length<H$L?H$L--:H$X++)this._removeComponent(H$K,H$X)},H$Y.removeAllComponent=function(){for(var H$f=0,H$K=this._componentsMap.length;H$f<H$K;this._componentsMap.length<H$K?H$K--:H$f++)this.removeComponentsByType(this._componentsMap[H$f])},H$Y._updateComponents=function(H$f){for(var H$K=0,H$Y=this._components.length;H$K<H$Y;H$K++){var H$X=this._components[H$K];!H$X.started&&(H$X._start(H$f),H$X.started=!0),H$X.enable&&H$X._update(H$f)}},H$Y._lateUpdateComponents=function(H$f){for(var H$K=0;H$K<this._components.length;H$K++){var H$Y=this._components[H$K];!H$Y.started&&(H$Y._start(H$f),H$Y.started=!0),H$Y.enable&&H$Y._lateUpdate(H$f)}},H$Y._preRenderUpdateComponents=function(H$f){for(var H$K=0;H$K<this._components.length;H$K++){var H$Y=this._components[H$K];!H$Y.started&&(H$Y._start(H$f),H$Y.started=!0),H$Y.enable&&H$Y._preRenderUpdate(H$f)}},H$Y._postRenderUpdateComponents=function(H$f){for(var H$K=0;H$K<this._components.length;H$K++){var H$Y=this._components[H$K];!H$Y.started&&(H$Y._start(H$f),H$Y.started=!0),H$Y.enable&&H$Y._postRenderUpdate(H$f)}},H$K}(),H$mK=function(H$X){function H$f(){H$f.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new H$yK,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new H$dK(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}H$l(H$f,"laya.d3.core.material.BaseMaterial",H$X);var H$K=H$f.prototype;return H$C.imps(H$K,{"laya.d3.core.IClone":!0}),H$K._addShaderDefine=function(H$f){this._shaderDefineValue|=H$f},H$K._removeShaderDefine=function(H$f){this._shaderDefineValue&=~H$f},H$K._addDisablePublicShaderDefine=function(H$f){this._disablePublicShaderDefine|=H$f},H$K._removeDisablePublicShaderDefine=function(H$f){this._disablePublicShaderDefine&=~H$f},H$K._setBuffer=function(H$f,H$K){this._shaderValues.setValue(H$f,H$K),this._values[H$f]=H$K},H$K._getBuffer=function(H$f){return this._values[H$f]},H$K._setMatrix4x4=function(H$f,H$K){this._shaderValues.setValue(H$f,H$K?H$K.elements:null),this._values[H$f]=H$K},H$K._getMatrix4x4=function(H$f){return this._values[H$f]},H$K._setInt=function(H$f,H$K){this._shaderValues.setValue(H$f,H$K),this._values[H$f]=H$K},H$K._getInt=function(H$f){return this._values[H$f]},H$K._setNumber=function(H$f,H$K){this._shaderValues.setValue(H$f,H$K),this._values[H$f]=H$K},H$K._getNumber=function(H$f){return this._values[H$f]},H$K._setBool=function(H$f,H$K){this._shaderValues.setValue(H$f,H$K),this._values[H$f]=H$K},H$K._getBool=function(H$f){return this._values[H$f]},H$K._setVector2=function(H$f,H$K){this._shaderValues.setValue(H$f,H$K?H$K.elements:null),this._values[H$f]=H$K},H$K._getVector2=function(H$f){return this._values[H$f]},H$K._setColor=function(H$f,H$K){this._shaderValues.setValue(H$f,H$K?H$K.elements:null),this._values[H$f]=H$K},H$K._getColor=function(H$f){return this._values[H$f]},H$K._setTexture=function(H$f,H$K){var H$Y=this._values[H$f];this._values[H$f]=H$K,this._shaderValues.setValue(H$f,H$K),0<this.referenceCount&&(H$Y&&H$Y._removeReference(),H$K&&H$K._addReference())},H$K._getTexture=function(H$f){return this._values[H$f]},H$K._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},H$K._getShader=function(H$f,H$K,H$Y){var H$X=(H$f|H$K)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(H$X,H$Y,this._shaderDefineValue),this._shader},H$K._setRenderStateBlendDepth=function(){var H$f=H$R.mainContext;switch(H$V.setDepthMask(H$f,this.depthWrite),0===this.depthTest?H$V.setDepthTest(H$f,!1):(H$V.setDepthTest(H$f,!0),H$V.setDepthFunc(H$f,this.depthTest)),this.blend){case 0:H$V.setBlend(H$f,!1);break;case 1:H$V.setBlend(H$f,!0),H$V.setBlendFunc(H$f,this.srcBlend,this.dstBlend);break;case 2:H$V.setBlend(H$f,!0)}},H$K._setRenderStateFrontFace=function(H$f,H$K){var H$Y=H$R.mainContext,H$X=0;switch(this.cull){case 0:H$V.setCullFace(H$Y,!1);break;case 1:H$V.setCullFace(H$Y,!0),H$X=H$f?H$K&&H$K._isFrontFaceInvert?2305:2304:H$K&&H$K._isFrontFaceInvert?2304:2305,H$V.setFrontFace(H$Y,H$X);break;case 2:H$V.setCullFace(H$Y,!0),H$X=H$f?H$K&&H$K._isFrontFaceInvert?2304:2305:H$K&&H$K._isFrontFaceInvert?2305:2304,H$V.setFrontFace(H$Y,H$X)}},H$K.onAsynLoaded=function(H$f,H$K,H$Y){var H$X=H$K[0],H$L=H$K[1];switch(H$X.version){case"LAYAMATERIAL:01":var H$H=0,H$E=0,H$d=H$X.props;for(var H$O in H$d)switch(H$O){case"vectors":var H$i=H$d[H$O];for(H$H=0,H$E=H$i.length;H$H<H$E;H$H++){var H$U=H$i[H$H],H$Z=H$U.value;switch(H$Z.length){case 2:this[H$U.name]=new H$HK(H$Z[0],H$Z[1]);break;case 3:this[H$U.name]=new H$EK(H$Z[0],H$Z[1],H$Z[2]);break;case 4:this[H$U.name]=new H$dK(H$Z[0],H$Z[1],H$Z[2],H$Z[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var H$y=H$d[H$O];for(H$H=0,H$E=H$y.length;H$H<H$E;H$H++){var H$l=H$y[H$H],H$B=H$l.path;H$B&&(this[H$l.name]=H$A.getRes(H$L[H$B]))}break;case"defines":var H$$=H$d[H$O];for(H$H=0,H$E=H$$.length;H$H<H$E;H$H++){var H$h=this._shaderCompile.getMaterialDefineByName(H$$[H$H]);this._addShaderDefine(H$h)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[H$O]=H$d[H$O];break;case"renderQueue":switch(H$d[H$O]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[H$O]=H$d[H$O]}break;case"LAYAMATERIAL:02":for(H$O in H$d=H$X.props)switch(H$O){case"vectors":for(H$H=0,H$E=(H$i=H$d[H$O]).length;H$H<H$E;H$H++)switch((H$Z=(H$U=H$i[H$H]).value).length){case 2:this[H$U.name]=new H$HK(H$Z[0],H$Z[1]);break;case 3:this[H$U.name]=new H$EK(H$Z[0],H$Z[1],H$Z[2]);break;case 4:this[H$U.name]=new H$dK(H$Z[0],H$Z[1],H$Z[2],H$Z[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(H$H=0,H$E=(H$y=H$d[H$O]).length;H$H<H$E;H$H++)(H$B=(H$l=H$y[H$H]).path)&&(this[H$l.name]=H$A.getRes(H$L[H$B]));break;case"defines":for(H$H=0,H$E=(H$$=H$d[H$O]).length;H$H<H$E;H$H++)H$h=this._shaderCompile.getMaterialDefineByName(H$$[H$H]),this._addShaderDefine(H$h);break;default:this[H$O]=H$d[H$O]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},H$K._addReference=function(){H$X.prototype._addReference.call(this);for(var H$f=0,H$K=this._values.length;H$f<H$K;H$f++){var H$Y=this._values[H$f];H$Y&&H$Y instanceof laya.d3.resource.BaseTexture&&H$Y._addReference()}},H$K._removeReference=function(){H$X.prototype._removeReference.call(this);for(var H$f=0,H$K=this._values.length;H$f<H$K;H$f++){var H$Y=this._values[H$f];H$Y&&H$Y instanceof laya.d3.resource.BaseTexture&&H$Y._removeReference()}},H$K.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},H$K.setShaderName=function(H$f){var H$K=H$QK.nameKey.getID(H$f);if(-1===H$K)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=H$IK._preCompileShader[H$K]},H$K.cloneTo=function(H$f){var H$K=H$f;H$K.name=this.name,H$K.cull=this.cull,H$K.blend=this.blend,H$K.srcBlend=this.srcBlend,H$K.dstBlend=this.dstBlend,H$K.srcBlendRGB=this.srcBlendRGB,H$K.dstBlendRGB=this.dstBlendRGB,H$K.srcBlendAlpha=this.srcBlendAlpha,H$K.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(H$K.blendConstColor),H$K.blendEquation=this.blendEquation,H$K.blendEquationRGB=this.blendEquationRGB,H$K.blendEquationAlpha=this.blendEquationAlpha,H$K.depthTest=this.depthTest,H$K.depthWrite=this.depthWrite,H$K.renderQueue=this.renderQueue,H$K._shader=this._shader,H$K._disablePublicShaderDefine=this._disablePublicShaderDefine,H$K._shaderDefineValue=this._shaderDefineValue;var H$Y,H$X=0,H$L=H$K._shaderValues;H$K._shaderValues.data.length=this._shaderValues.data.length;var H$H=this._values.length,H$E=H$K._values;for(H$X=0,H$Y=H$E.length=H$H;H$X<H$Y;H$X++){var H$d=this._values[H$X];if(H$d)if("number"==typeof H$d)H$E[H$X]=H$d,H$L.data[H$X]=H$d;else if("number"==typeof H$d&&Math.floor(H$d)==H$d)H$E[H$X]=H$d,H$L.data[H$X]=H$d;else if("boolean"==typeof H$d)H$E[H$X]=H$d,H$L.data[H$X]=H$d;else if(H$d instanceof laya.d3.math.Vector2){var H$O=H$E[H$X]||(H$E[H$X]=new H$HK);H$d.cloneTo(H$O),H$L.data[H$X]=H$O.elements}else if(H$d instanceof laya.d3.math.Vector3){var H$i=H$E[H$X]||(H$E[H$X]=new H$EK);H$d.cloneTo(H$i),H$L.data[H$X]=H$i.elements}else if(H$d instanceof laya.d3.math.Vector4){var H$U=H$E[H$X]||(H$E[H$X]=new H$dK);H$d.cloneTo(H$U),H$L.data[H$X]=H$U.elements}else if(H$d instanceof laya.d3.math.Matrix4x4){var H$Z=H$E[H$X]||(H$E[H$X]=new H$fK);H$d.cloneTo(H$Z),H$L.data[H$X]=H$Z.elements}else H$d instanceof laya.d3.resource.BaseTexture&&(H$E[H$X]=H$d,H$L.data[H$X]=H$d)}},H$K.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$B(0,H$K,"alphaTestValue",function(){return this._getNumber(0)},function(H$f){this._setNumber(0,H$f)}),H$B(0,H$K,"alphaTest",function(){return this._alphaTest},function(H$f){(this._alphaTest=H$f)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),H$f.__init__=function(){H$f.SHADERDEFINE_ALPHATEST=H$f.shaderDefines.registerDefine("ALPHATEST")},H$f.RENDERQUEUE_OPAQUE=2e3,H$f.RENDERQUEUE_ALPHATEST=2450,H$f.RENDERQUEUE_TRANSPARENT=3e3,H$f.CULL_NONE=0,H$f.CULL_FRONT=1,H$f.CULL_BACK=2,H$f.BLEND_DISABLE=0,H$f.BLEND_ENABLE_ALL=1,H$f.BLEND_ENABLE_SEPERATE=2,H$f.BLENDPARAM_ZERO=0,H$f.BLENDPARAM_ONE=1,H$f.BLENDPARAM_SRC_COLOR=768,H$f.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,H$f.BLENDPARAM_DST_COLOR=774,H$f.BLENDPARAM_ONE_MINUS_DST_COLOR=775,H$f.BLENDPARAM_SRC_ALPHA=770,H$f.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,H$f.BLENDPARAM_DST_ALPHA=772,H$f.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,H$f.BLENDPARAM_SRC_ALPHA_SATURATE=776,H$f.BLENDEQUATION_ADD=0,H$f.BLENDEQUATION_SUBTRACT=1,H$f.BLENDEQUATION_REVERSE_SUBTRACT=2,H$f.DEPTHTEST_OFF=0,H$f.DEPTHTEST_NEVER=512,H$f.DEPTHTEST_LESS=513,H$f.DEPTHTEST_EQUAL=514,H$f.DEPTHTEST_LEQUAL=515,H$f.DEPTHTEST_GREATER=516,H$f.DEPTHTEST_NOTEQUAL=517,H$f.DEPTHTEST_GEQUAL=518,H$f.DEPTHTEST_ALWAYS=519,H$f.SHADERDEFINE_ALPHATEST=1,H$f.ALPHATESTVALUE=0,H$Z(H$f,["shaderDefines",function(){return this.shaderDefines=new H$UK}]),H$f}(H$h),H$RK=function(H$f){function H$K(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,H$K.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}H$l(H$K,"laya.d3.resource.BaseTexture",H$h);var H$Y=H$K.prototype;return H$B(0,H$Y,"width",function(){return this._width}),H$B(0,H$Y,"repeat",function(){return this._repeat},function(H$f){if(this._repeat!==H$f&&(this._repeat=H$f,this._source)){var H$K=H$R.mainContext;H$V.bindTexture(H$K,this._type,this._source),H$z.isPOT(this._width,this._height)&&this._repeat?(H$K.texParameteri(this._type,10242,10497),H$K.texParameteri(this._type,10243,10497)):(H$K.texParameteri(this._type,10242,33071),H$K.texParameteri(this._type,10243,33071))}}),H$B(0,H$Y,"height",function(){return this._height}),H$B(0,H$Y,"magFifter",function(){return this._magFifter},function(H$f){(this._magFifter=H$f)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(H$f)}),H$B(0,H$Y,"wrapModeV",function(){return this._wrapModeV}),H$B(0,H$Y,"size",function(){return this._size}),H$B(0,H$Y,"wrapModeU",function(){return this._wrapModeU}),H$B(0,H$Y,"mipmap",function(){return this._mipmap},function(H$f){this._mipmap=H$f,this._mipmap!=H$f&&this._conchTexture&&this._conchTexture.setMipMap(H$f)}),H$B(0,H$Y,"minFifter",function(){return this._minFifter},function(H$f){this._minFifter=H$f,this._minFifter!=H$f&&this._conchTexture&&this._conchTexture.setMinFifter(H$f)}),H$B(0,H$Y,"format",function(){return this._format}),H$B(0,H$Y,"source",function(){return this.activeResource(),this._source}),H$B(0,H$Y,"defaulteTexture",function(){return H$wK.grayTexture}),H$K.WARPMODE_REPEAT=0,H$K.WARPMODE_CLAMP=1,H$K}(),H$VK=function(H$f){function H$K(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,H$K.__super.call(this),this._boundingBoxCorners=H$X(8,null)}H$l(H$K,"laya.d3.resource.models.BaseMesh",H$h);var H$Y=H$K.prototype;return H$Y._getPositions=function(){throw new Error("未Override,请重载该属性！")},H$Y._generateBoundingObject=function(){this._boundingSphere=new H$Nf(new H$EK,0),H$Nf.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new H$Df(new H$EK,new H$EK),H$Df.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},H$Y.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},H$Y.getRenderElement=function(H$f){throw new Error("未Override,请重载该属性！")},H$B(0,H$Y,"subMeshCount",function(){return this._subMeshCount}),H$B(0,H$Y,"boundingBox",function(){return this._boundingBox}),H$B(0,H$Y,"boundingBoxCorners",function(){return this._boundingBoxCorners}),H$B(0,H$Y,"boundingSphere",function(){return this._boundingSphere}),H$K}(),H$tK=(function(H$f){function H$K(){H$K.__super.call(this)}H$l(H$K,"laya.d3.component.Script",H$SK);var H$Y=H$K.prototype;H$Y.onTriggerEnter=function(H$f){},H$Y.onTriggerExit=function(H$f){},H$Y.onTriggerStay=function(H$f){},H$B(0,H$Y,"isSingleton",function(){return H$K._isSingleton}),H$K._isSingleton=!1}(),function(H$f){function H$K(H$f){this._owner=null,this._sharedMesh=null,H$K.__super.call(this),this._owner=H$f}H$l(H$K,"laya.d3.core.MeshFilter",H$f);var H$Y=H$K.prototype;return H$Y._sharedMeshLoaded=function(){this.event("loaded")},H$Y._destroy=function(){H$f.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},H$B(0,H$Y,"sharedMesh",function(){return this._sharedMesh},function(H$f){var H$K=this._sharedMesh;H$K&&H$K._removeReference(),(this._sharedMesh=H$f)._addReference(),this.event("meshchanged",[this,H$K,H$f]),H$f.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),H$B(0,H$Y,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),H$B(0,H$Y,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),H$B(0,H$Y,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),H$B(0,H$Y,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),H$K}(H$zK)),H$TK=function(H$f){function H$K(H$f){H$K.__super.call(this,H$f),H$f.meshFilter.on("meshchanged",this,this._onMeshChanged)}H$l(H$K,"laya.d3.core.MeshRender",H$CK);var H$Y=H$K.prototype;return H$Y._onMeshChanged=function(H$f,H$K,H$Y){H$Y.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:H$Y.once("loaded",this,this._onMeshLoaed)},H$Y._onMeshLoaed=function(H$f,H$K){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},H$Y._calculateBoundingSphereByInitSphere=function(H$f){var H$K=NaN,H$Y=this._owner.transform,H$X=H$Y.scale.elements,H$L=Math.abs(H$X[0]),H$H=Math.abs(H$X[1]),H$E=Math.abs(H$X[2]);H$K=H$H<=H$L&&H$E<=H$L?H$L:H$E<=H$H?H$H:H$E,H$EK.transformCoordinate(H$f.center,H$Y.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=H$f.radius*H$K},H$Y._calculateBoundBoxByInitCorners=function(H$f){for(var H$K=this._owner.transform.worldMatrix,H$Y=0;H$Y<8;H$Y++)H$EK.transformCoordinate(H$f[H$Y],H$K,H$CK._tempBoundBoxCorners[H$Y]);H$Df.createfromPoints(H$CK._tempBoundBoxCorners,this._boundingBox)},H$Y._calculateBoundingSphere=function(){var H$f=this._owner.meshFilter.sharedMesh;null==H$f||null==H$f.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(H$f.boundingSphere)},H$Y._calculateBoundingBox=function(){var H$f=this._owner.meshFilter.sharedMesh;null==H$f||null==H$f.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(H$f.boundingBoxCorners)},H$Y._renderUpdate=function(H$f){var H$K=this._owner.transform;if(H$K){this._setShaderValueMatrix4x4(0,H$K.worldMatrix);var H$Y=this._owner.getProjectionViewWorldMatrix(H$f);this._setShaderValueMatrix4x4(1,H$Y)}else this._setShaderValueMatrix4x4(0,H$fK.DEFAULT),this._setShaderValueMatrix4x4(1,H$f);return H$AK.debugMode&&this._renderRenderableBoundBox(),!0},H$K}(),H$kK=function(H$K){function H$X(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,H$X.__super.call(this),this._renderState=new H$u,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new H$yK,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new H$Kf,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new H$EK(.7,.7,.7),this.ambientColor=new H$EK(.212,.227,.259),H$R.shaderHighPrecision&&this.addShaderDefine(H$IK.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}H$l(H$X,"laya.d3.core.scene.Scene",H$K);var H$f=H$X.prototype;return H$C.imps(H$f,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),H$f._setUrl=function(H$f){this._url=H$f},H$f._getGroup=function(){return this._group},H$f._setGroup=function(H$f){this._group=H$f},H$f._display=function(){H$C.stage._scenes.push(this),H$C.stage._scenes.sort(H$X._sortScenes);for(var H$f=0,H$K=this._childs.length;H$f<H$K;H$f++){var H$Y=this._childs[H$f];H$Y.active&&H$Y._activeHierarchy()}},H$f._unDisplay=function(){var H$f=H$C.stage._scenes;H$f.splice(H$f.indexOf(this),1);for(var H$K=0,H$Y=this._childs.length;H$K<H$Y;H$K++){var H$X=this._childs[H$K];H$X.active&&H$X._inActiveHierarchy()}},H$f._addChild3D=function(H$f){H$f.transform._onWorldTransform(),H$f._setBelongScene(this),this.displayedInStage&&H$f.active&&H$f._activeHierarchy()},H$f._removeChild3D=function(H$f){H$f.transform.parent=null,this.displayedInStage&&H$f.active&&H$f._inActiveHierarchy(),H$f._setUnBelongScene()},H$f.initOctree=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$L&&(H$L=6),this.treeSize=new H$EK(H$f,H$K,H$Y),this.treeLevel=H$L,this.treeRoot=new H$D(this,0),this.treeRoot.init(H$X,this.treeSize)},H$f._prepareUpdateToRenderState=function(H$f,H$K){H$K.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,H$K.scene=this},H$f._prepareSceneToRender=function(H$f){var H$K=this._lights.length;if(0<H$K)for(var H$Y=0,H$X=0;H$X<H$K&&!(this._lights[H$X]._prepareToScene(H$f)&&++H$Y>=this._enableLightCount);H$X++);},H$f._updateChilds=function(H$f){for(var H$K=0,H$Y=this._childs.length;H$K<H$Y;++H$K)this._childs[H$K]._update(H$f)},H$f._preRenderScene=function(H$f,H$K,H$Y){var H$X,H$L=H$K._viewMatrix,H$H=H$K._projectionMatrix,H$E=H$K._projectionViewMatrix,H$d=0,H$O=H$K.camera;for(H$O.useOcclusionCulling?this.treeRoot?H$Yf.renderObjectCullingOctree(H$Y,this,H$O,H$L,H$H,H$E):H$Yf.renderObjectCulling(H$Y,this,H$O,H$L,H$H,H$E):H$Yf.renderObjectCullingNoBoundFrustum(this,H$O,H$L,H$H,H$E),H$d=0,H$X=this._quenes.length;H$d<H$X;H$d++)this._quenes[H$d]&&this._quenes[H$d]._preRender(H$K)},H$f._clear=function(H$f,H$K){var H$Y=H$K._viewport,H$X=H$K.camera,H$L=H$Y.x,H$H=H$X.renderTargetSize.height-H$Y.y-H$Y.height,H$E=H$Y.width,H$d=H$Y.height;H$f.viewport(H$L,H$H,H$E,H$d);var H$O=256,H$i=H$X.renderTarget;switch(H$X.clearFlag){case 0:var H$U=H$X.clearColor;if(H$U){H$f.enable(3089),H$f.scissor(H$L,H$H,H$E,H$d);var H$Z=H$U.elements;H$f.clearColor(H$Z[0],H$Z[1],H$Z[2],H$Z[3]),H$O|=16384}if(H$i)switch(H$U||(H$O=16384),H$i.depthStencilFormat){case 33189:H$O|=256;break;case 36168:H$O|=1024;break;case 34041:H$O|=256,H$O|=1024}H$f.clear(H$O),H$U&&H$f.disable(3089);break;case 1:case 2:if(H$i)switch(H$O=16384,H$i.depthStencilFormat){case 33189:H$O|=256;break;case 36168:H$O|=1024;break;case 34041:H$O|=256,H$O|=1024}H$f.clear(H$O);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},H$f._renderScene=function(H$f,H$K){var H$Y,H$X,H$L=H$K.camera,H$H=0;for(H$H=0;H$H<2;H$H++)(H$X=this._quenes[H$H])&&(H$L.renderTarget?H$X._render(H$K,!0):H$X._render(H$K,!1));if(1===H$L.clearFlag){var H$E=H$L.sky;H$E&&(H$V.setCullFace(H$f,!1),H$V.setDepthFunc(H$f,515),H$V.setDepthMask(H$f,!1),H$E._render(H$K),H$V.setDepthFunc(H$f,513),H$V.setDepthMask(H$f,!0))}for(H$H=2,H$Y=this._quenes.length;H$H<H$Y;H$H++)(H$X=this._quenes[H$H])&&(H$X._sortAlpha(H$K.camera.transform.position),H$L.renderTarget?H$X._render(H$K,!0):H$X._render(H$K,!1))},H$f._set3DRenderConfig=function(H$f){H$f.disable(3042),H$V._blend=!1,H$f.blendFunc(770,771),H$V._sFactor=770,H$V._dFactor=771,H$f.disable(2929),H$V._depthTest=!1,H$f.enable(2884),H$V._cullFace=!0,H$f.depthMask(1),H$V._depthMask=!0,H$f.frontFace(2304),H$V._frontFace=2304},H$f._set2DRenderConfig=function(H$f){H$V.setBlend(H$f,!0),H$V.setBlendFunc(H$f,1,771),H$V.setDepthTest(H$f,!1),H$V.setCullFace(H$f,!1),H$V.setDepthMask(H$f,!0),H$V.setFrontFace(H$f,2305),H$f.viewport(0,0,H$U.width,H$U.height)},H$f._parseCustomProps=function(H$f,H$K,H$Y,H$X){var H$L=H$X.customProps.lightmaps,H$H=H$L.length,H$E=this._lightmaps;H$E.length=H$H;for(var H$d=0;H$d<H$H;H$d++)H$E[H$d]=H$A.getRes(H$K[H$L[H$d].replace(".exr",".png")]);this.setlightmaps(H$E);var H$O=H$X.customProps.ambientColor;H$O&&(this.ambientColor=new H$EK(H$O[0],H$O[1],H$O[2]));var H$i=H$X.customProps.fogColor;H$i&&(this.fogColor=new H$EK(H$i[0],H$i[1],H$i[2]))},H$f._addLight=function(H$f){this._lights.indexOf(H$f)<0&&this._lights.push(H$f)},H$f._removeLight=function(H$f){var H$K=this._lights.indexOf(H$f);0<=H$K&&this._lights.splice(H$K,1)},H$f._updateScene=function(){var H$f=this._renderState;this._prepareUpdateToRenderState(H$R.mainContext,H$f),this._updateComponents(H$f),this._updateChilds(H$f),this._lateUpdateComponents(H$f),this._time+=H$f.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},H$f._updateSceneConch=function(){var H$f=this._renderState;this._prepareUpdateToRenderState(H$R.mainContext,H$f),this._updateComponents(H$f),this._lateUpdateComponents(H$f),this._prepareSceneToRender(H$f);for(var H$K=0,H$Y=this._cameraPool.length;H$K<H$Y;H$K++){var H$X=this._cameraPool[H$K];(H$f.camera=H$X)._prepareCameraToRender()}},H$f._preRenderShadow=function(H$f,H$K,H$Y,H$X,H$L){this.treeRoot?H$Yf.renderShadowObjectCullingOctree(this,H$K,H$Y,H$X,H$L):H$Yf.renderShadowObjectCulling(this,H$K,H$Y,H$X,H$L);for(var H$H=0,H$E=H$Y.length;H$H<H$E;H$H++)H$Y[H$H]&&H$Y[H$H]._preRender(H$f)},H$f._renderShadowMap=function(H$f,H$K,H$Y){var H$X=this.parallelSplitShadowMaps[0];H$X._calcAllLightCameraInfo(H$Y);var H$L,H$H,H$E,H$d=H$X.PSSMNum;if(this._preRenderShadow(H$K,H$X._lightCulling,H$X._shadowQuenes,H$X._lightVPMatrix[0],H$d),this.addShaderDefine(H$lK.SHADERDEFINE_CAST_SHADOW),1<H$d)for(var H$O=0;H$O<H$d;H$O++)H$L=H$X.getRenderTarget(H$O+1),H$X.beginRenderTarget(H$O+1),H$f.clearColor(1,1,1,1),H$f.clear(16640),H$f.viewport(0,0,H$L.width,H$L.height),H$K.camera=H$E=H$X.getLightCamera(H$O),H$E._prepareCameraToRender(),H$E._prepareCameraViewProject(H$E.viewMatrix,H$E.projectionMatrix),H$K._projectionViewMatrix=H$X._lightVPMatrix[H$O+1],(H$H=H$X._shadowQuenes[H$O])._preRender(H$K),H$H._renderShadow(H$K,!1),H$X.endRenderTarget(H$O+1);else H$L=H$X.getRenderTarget(1),H$X.beginRenderTarget(1),H$f.clearColor(1,1,1,1),H$f.clear(16640),H$f.viewport(0,0,H$L.width,H$L.height),H$K.camera=H$E=H$X.getLightCamera(0),H$E._prepareCameraToRender(),H$E._prepareCameraViewProject(H$E.viewMatrix,H$E.projectionMatrix),H$K._projectionViewMatrix=H$X._lightVPMatrix[0],(H$H=H$X._shadowQuenes[0])._preRender(H$K),H$H._renderShadow(H$K,!0),H$X.endRenderTarget(1);this.removeShaderDefine(H$lK.SHADERDEFINE_CAST_SHADOW)},H$f.addTreeNode=function(H$f){this.treeRoot.addTreeNode(H$f)},H$f.removeTreeNode=function(H$f){this.treeSize&&H$f._treeNode&&H$f._treeNode.removeObject(H$f)},H$f.setlightmaps=function(H$f){this._lightmaps=H$f;for(var H$K=0,H$Y=this._renderableSprite3Ds.length;H$K<H$Y;H$K++)this._renderableSprite3Ds[H$K]._render._applyLightMapParams()},H$f.getlightmaps=function(){return this._lightmaps},H$f.addChildAt=function(H$f,H$K){if(!(H$f instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(H$f&&H$f.__className));if(!H$f||this.destroyed||H$f===this)return H$f;if(H$f.zOrder&&this._set$P("hasZorder",!0),0<=H$K&&H$K<=this._childs.length){if(H$f._parent===this){var H$Y=this.getChildIndex(H$f);this._childs.splice(H$Y,1),this._childs.splice(H$K,0,H$f),this.conchModel&&(this.conchModel.removeChild(H$f.conchModel),this.conchModel.addChildAt(H$f.conchModel,H$K)),this._childChanged()}else H$f.parent&&H$f.parent.removeChild(H$f),this._childs===H$i.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H$K,0,H$f),this.conchModel&&this.conchModel.addChildAt(H$f.conchModel,H$K),(H$f.parent=this)._addChild3D(H$f);return H$f}throw new Error("appendChildAt:The index is out of bounds")},H$f.addChild=function(H$f){if(!(H$f instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H$f||this.destroyed||H$f===this)return H$f;if(H$f.zOrder&&this._set$P("hasZorder",!0),H$f._parent===this){var H$K=this.getChildIndex(H$f);H$K!==this._childs.length-1&&(this._childs.splice(H$K,1),this._childs.push(H$f),this.conchModel&&(this.conchModel.removeChild(H$f.conchModel),this.conchModel.addChildAt(H$f.conchModel,this._childs.length-1)),this._childChanged())}else H$f.parent&&H$f.parent.removeChild(H$f),this._childs===H$i.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H$f),this.conchModel&&this.conchModel.addChildAt(H$f.conchModel,this._childs.length-1),(H$f.parent=this)._childChanged(),this._addChild3D(H$f);return H$f},H$f.removeChildAt=function(H$f){var H$K=this.getChildAt(H$f);return H$K&&(this._removeChild3D(H$K),this._childs.splice(H$f,1),this.conchModel&&this.conchModel.removeChild(H$K.conchModel),H$K.parent=null),H$K},H$f.removeChildren=function(H$f,H$K){if(void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=2147483647),this._childs&&0<this._childs.length){var H$Y=this._childs;if(0===H$f&&H$H<=H$K){var H$X=H$Y;this._childs=H$i.ARRAY_EMPTY}else H$X=H$Y.splice(H$f,H$K-H$f);for(var H$L=0,H$H=H$X.length;H$L<H$H;H$L++)this._removeChild3D(H$X[H$L]),H$X[H$L].parent=null,this.conchModel&&this.conchModel.removeChild(H$X[H$L].conchModel)}return this},H$f.addFrustumCullingObject=function(H$f){this.treeRoot?this.addTreeNode(H$f):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(H$f):this._cullingRenders[this._cullingRendersLength]=H$f,H$f._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},H$f.removeFrustumCullingObject=function(H$f){if(this.treeRoot)this.removeTreeNode(H$f);else{this._cullingRendersLength--;var H$K=H$f._indexInSceneFrustumCullingObjects;if(H$K!==this._cullingRendersLength){var H$Y=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[H$K]=H$Y)._indexInSceneFrustumCullingObjects=H$K,H$f._indexInSceneFrustumCullingObjects=-1}}},H$f.getRenderQueue=function(H$f){return H$f<3e3?this._quenes[1]||(this._quenes[1]=new H$p(this)):this._quenes[2]||(this._quenes[2]=new H$p(this))},H$f.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new H$p(this)},H$f.addShaderDefine=function(H$f){this._shaderDefineValue|=H$f},H$f.removeShaderDefine=function(H$f){this._shaderDefineValue&=~H$f},H$f.addScript=function(H$f){return this._addComponent(H$f)},H$f.getScriptByType=function(H$f,H$K){return void 0===H$K&&(H$K=0),this._getComponentByType(H$f,H$K)},H$f.getScriptsByType=function(H$f,H$K){this._getComponentsByType(H$f,H$K)},H$f.getScriptByIndex=function(H$f){return this._getComponentByIndex(H$f)},H$f.removeScriptByType=function(H$f,H$K){void 0===H$K&&(H$K=0),this._removeComponentByType(H$f,H$K)},H$f.removeScriptsByType=function(H$f){this._removeComponentByType(H$f)},H$f.removeAllScript=function(){this._removeAllComponent()},H$f.render=function(H$f,H$K,H$Y){(H$$._context.ctx._renderKey=0)<this._childs.length&&H$f.addRenderObject(this)},H$f.renderSubmit=function(){var H$f=H$R.mainContext,H$K=this._renderState;this._set3DRenderConfig(H$f),this._prepareSceneToRender(this._renderState);var H$Y,H$X=0,H$L=0;if(H$AK.debugMode||H$D.debugMode)for(H$X=0,H$L=this._cameraPool.length;H$X<H$L;H$X++)H$Y=this._cameraPool[H$X],H$AK._debugPhasorSprite.begin(1,H$Y),H$Y.activeInHierarchy&&H$Y._renderCamera(H$f,H$K,this),H$AK._debugPhasorSprite.end();else for(H$X=0,H$L=this._cameraPool.length;H$X<H$L;H$X++)(H$Y=this._cameraPool[H$X]).activeInHierarchy&&H$Y._renderCamera(H$f,H$K,this);return this._set2DRenderConfig(H$f),1},H$f.onAsynLoaded=function(H$f,H$K,H$Y){var H$X=H$K[0];if("Scene"!==H$X.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var H$L=H$K[1];H$hK._createNodeByJson(this,H$X,this,H$L),this.event("hierarchyloaded",[this]),this.__loaded=!0},H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),this.destroyed||(H$K.prototype.destroy.call(this,H$f),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,H$A.clearRes(this.url),this.loaded||H$AK._cancelLoadByUrl(this.url))},H$f.getRenderType=function(){return 0},H$f.releaseRender=function(){},H$f._addComponent=function(H$f){var H$K,H$Y=this._componentsMap.indexOf(H$f);if(-1===H$Y)H$K=[],this._componentsMap.push(H$f),this._typeComponentsIndices.push(H$K);else if(H$K=this._typeComponentsIndices[H$Y],this._components[H$K[0]].isSingleton)throw new Error("无法单实例创建"+H$f+"组件，"+H$f+"组件已存在！");var H$X=H$L.getInstance(H$f);H$K.push(this._components.length),this._components.push(H$X);return H$X._initialize(this),H$X},H$f._removeComponent=function(H$f,H$K){var H$Y=this._typeComponentsIndices[H$f],H$X=H$Y[H$K],H$L=this._components[H$X];this._components.splice(H$X,1),H$Y.splice(H$K,1),0===H$Y.length&&(this._typeComponentsIndices.splice(H$f,1),this._componentsMap.splice(H$f,1));for(var H$H=0,H$E=this._componentsMap.length;H$H<H$E;H$H++)for(var H$d=(H$Y=this._typeComponentsIndices[H$H]).length-1;0<=H$d;H$d--){var H$O=H$Y[H$d];if(!(H$X<H$O))break;H$Y[H$d]=--H$O}H$L._destroy()},H$f._getComponentByType=function(H$f,H$K){void 0===H$K&&(H$K=0);var H$Y=this._componentsMap.indexOf(H$f);return-1===H$Y?null:this._components[this._typeComponentsIndices[H$Y][H$K]]},H$f._getComponentsByType=function(H$f,H$K){var H$Y=this._componentsMap.indexOf(H$f);if(-1!==H$Y){var H$X=this._typeComponentsIndices[H$Y],H$L=H$X.length;H$K.length=H$L;for(var H$H=0;H$H<H$L;H$H++)H$K[H$H]=this._components[H$X[H$H]]}else H$K.length=0},H$f._getComponentByIndex=function(H$f){return this._components[H$f]},H$f._removeComponentByType=function(H$f,H$K){void 0===H$K&&(H$K=0);var H$Y=this._componentsMap.indexOf(H$f);-1!==H$Y&&this._removeComponent(H$Y,H$K)},H$f._removeComponentsByType=function(H$f){var H$K=this._componentsMap.indexOf(H$f);if(-1!==H$K)for(var H$Y=this._typeComponentsIndices[H$K],H$X=0,H$L=H$Y.length;H$X<H$L;H$Y.length<H$L?H$L--:H$X++)this._removeComponent(H$K,H$X)},H$f._removeAllComponent=function(){for(var H$f=0,H$K=this._componentsMap.length;H$f<H$K;this._componentsMap.length<H$K?H$K--:H$f++)this._removeComponentsByType(this._componentsMap[H$f])},H$f._updateComponents=function(H$f){for(var H$K=0,H$Y=this._components.length;H$K<H$Y;H$K++){var H$X=this._components[H$K];!H$X.started&&(H$X._start(H$f),H$X.started=!0),H$X.enable&&H$X._update(H$f)}},H$f._lateUpdateComponents=function(H$f){for(var H$K=0;H$K<this._components.length;H$K++){var H$Y=this._components[H$K];!H$Y.started&&(H$Y._start(H$f),H$Y.started=!0),H$Y.enable&&H$Y._lateUpdate(H$f)}},H$f._preRenderUpdateComponents=function(H$f){for(var H$K=0;H$K<this._components.length;H$K++){var H$Y=this._components[H$K];!H$Y.started&&(H$Y._start(H$f),H$Y.started=!0),H$Y.enable&&H$Y._preRenderUpdate(H$f)}},H$f._postRenderUpdateComponents=function(H$f){for(var H$K=0;H$K<this._components.length;H$K++){var H$Y=this._components[H$K];!H$Y.started&&(H$Y._start(H$f),H$Y.started=!0),H$Y.enable&&H$Y._postRenderUpdate(H$f)}},H$B(0,H$f,"_loaded",null,function(H$f){this.__loaded=H$f}),H$B(0,H$f,"fogColor",function(){return this._fogColor},function(H$f){this._fogColor=H$f,this._shaderValues.setValue(0,H$f.elements)}),H$B(0,H$f,"enableFog",function(){return this._enableFog},function(H$f){this._enableFog!==H$f&&((this._enableFog=H$f)?(this.addShaderDefine(H$IK.SHADERDEFINE_FOG),this.removeShaderDefine(H$IK.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(H$IK.SHADERDEFINE_FOG))}),H$B(0,H$f,"url",function(){return this._url}),H$B(0,H$f,"loaded",function(){return this.__loaded}),H$B(0,H$f,"enableDepthFog",function(){return this._enableDepthFog},function(H$f){this._enableDepthFog!=H$f&&((this._enableDepthFog=H$f)?(this.addShaderDefine(H$IK.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(H$IK.SHADERDEFINE_FOG)):this.removeShaderDefine(H$IK.SAHDERDEFINE_DEPTHFOG))}),H$B(0,H$f,"fogStart",function(){return this._fogStart},function(H$f){this._fogStart=H$f,this._shaderValues.setValue(1,H$f)}),H$B(0,H$f,"fogRange",function(){return this._fogRange},function(H$f){this._fogRange=H$f,this._shaderValues.setValue(2,H$f)}),H$B(0,H$f,"ambientColor",function(){return this._ambientColor},function(H$f){this._ambientColor=H$f,this._shaderValues.setValue(21,H$f.elements)}),H$B(0,H$f,"scene",function(){return this}),H$B(0,H$f,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),H$X._sortScenes=function(H$f,H$K){if(H$f.parent!==H$C.stage||H$K.parent!==H$C.stage)return H$f.parent!==H$C.stage&&H$K.parent!==H$C.stage?H$X._sortScenes(H$f.parent,H$K.parent):H$f.parent===H$C.stage?-1:1;var H$Y=H$C.stage._childs;return H$Y.indexOf(H$f)-H$Y.indexOf(H$K)},H$X.load=function(H$f){return H$C.loader.create(H$f,null,null,H$X)},H$X.FOGCOLOR=0,H$X.FOGSTART=1,H$X.FOGRANGE=2,H$X.LIGHTDIRECTION=3,H$X.LIGHTDIRCOLOR=4,H$X.POINTLIGHTPOS=5,H$X.POINTLIGHTRANGE=6,H$X.POINTLIGHTATTENUATION=7,H$X.POINTLIGHTCOLOR=8,H$X.SPOTLIGHTPOS=9,H$X.SPOTLIGHTDIRECTION=10,H$X.SPOTLIGHTSPOT=11,H$X.SPOTLIGHTRANGE=12,H$X.SPOTLIGHTATTENUATION=13,H$X.SPOTLIGHTCOLOR=14,H$X.SHADOWDISTANCE=15,H$X.SHADOWLIGHTVIEWPROJECT=16,H$X.SHADOWMAPPCFOFFSET=17,H$X.SHADOWMAPTEXTURE1=18,H$X.SHADOWMAPTEXTURE2=19,H$X.SHADOWMAPTEXTURE3=20,H$X.AMBIENTCOLOR=21,H$X.TIME=22,H$X}(H$a),H$eK=function(H$f){function H$K(H$f){H$K.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new H$fK,this._shaderValues=new H$yK,this._colliders=[],this._id=++H$K._uniqueIDCounter,this._transform=new H$sK(this),this.name=H$f||"Sprite3D-"+H$K._nameNumberCounter++,this.layer=H$T.currentCreationLayer,this.active=!0}H$l(H$K,"laya.d3.core.Sprite3D",H$GK);var H$Y=H$K.prototype;return H$C.imps(H$Y,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),H$Y._setUrl=function(H$f){this._url=H$f},H$Y._getGroup=function(){return this._group},H$Y._setGroup=function(H$f){this._group=H$f},H$Y._addChild3D=function(H$f){H$f.transform.parent=this.transform,this._hierarchyAnimator&&(!H$f._hierarchyAnimator&&H$f._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(H$f,!0,[H$f.name])),this._scene&&(H$f._setBelongScene(this._scene),this._activeInHierarchy&&H$f._active&&H$f._activeHierarchy())},H$Y._removeChild3D=function(H$f){H$f.transform.parent=null,this._scene&&(this._activeInHierarchy&&H$f._active&&H$f._inActiveHierarchy(),H$f._setUnBelongScene()),this._hierarchyAnimator&&(H$f._hierarchyAnimator==this._hierarchyAnimator&&H$f._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(H$f,!1,[H$f.name]))},H$Y._parseBaseCustomProps=function(H$f){var H$K=this.transform.localPosition;H$f.translate?(H$K.fromArray(H$f.translate),H$K.x*=100,H$K.y*=100,H$K.z*=100):H$K.elements.fill(0),this.transform.localPosition=H$K;var H$Y=this.transform.localRotation;H$f.rotation?H$Y.fromArray(H$f.rotation):H$Y.fromArray([0,0,0,-1]),this.transform.localRotation=H$Y;var H$X=this.transform.localScale;H$f.scale?H$X.fromArray(H$f.scale):H$X.elements.fill(1),this.transform.localScale=H$X;var H$L=H$f.layer;null!=H$L&&(this.layer=H$T.getLayerByNumber(H$L))},H$Y._parseCustomComponent=function(H$f,H$K,H$Y){for(var H$X in H$Y){var H$L=H$Y[H$X];switch(H$X){case"Animator":var H$H=this.addComponent(Animator);if(H$L.avatarPath)H$H.avatar=H$A.getRes(H$K[H$L.avatarPath]);else{var H$E=H$L.avatar;if(H$E){H$H.avatar=H$A.getRes(H$K[H$E.path]);var H$d=H$E.linkSprites;H$d&&H$f.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[H$H,H$d])}}for(var H$O=H$L.clipPaths,H$i=H$O.length,H$U=0;H$U<H$i;H$U++)H$H.addClip(H$A.getRes(H$K[H$O[H$U]]));H$H.clip=H$A.getRes(H$K[H$O[0]]);var H$Z=H$L.playOnWake;void 0!==H$Z&&(H$H.playOnWake=H$Z);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var H$y=this.addComponent(SphereCollider);H$y.isTrigger=H$L.isTrigger;var H$l=H$y.center;H$l.fromArray(H$L.center),H$y.center=H$l,H$y.radius=H$L.radius;break;case"BoxCollider":var H$B=this.addComponent(BoxCollider);H$B.isTrigger=H$L.isTrigger,H$B.center.fromArray(H$L.center);var H$$=H$B.size;H$$.fromArray(H$L.size),H$B.size=H$$;break;case"MeshCollider":this.addComponent(MeshCollider)}}},H$Y._onRootNodeHierarchyLoaded=function(H$f,H$K){for(var H$Y in H$K){for(var H$X=this,H$L=H$K[H$Y],H$H=0,H$E=H$L.length;H$H<H$E;H$H++){var H$d=H$L[H$H];if(""===H$d)break;if(!(H$X=H$X.getChildByName(H$d)))break}H$X&&H$f.linkSprite3DToAvatarNode(H$Y,H$X)}},H$Y._setHierarchyAnimator=function(H$f,H$K){this._changeHierarchyAnimator(H$f);for(var H$Y=0,H$X=this._childs.length;H$Y<H$X;H$Y++){var H$L=this._childs[H$Y];H$L._hierarchyAnimator==H$K&&H$L._setHierarchyAnimator(H$f,H$K)}},H$Y._clearHierarchyAnimator=function(H$f,H$K){this._changeHierarchyAnimator(H$K);for(var H$Y=0,H$X=this._childs.length;H$Y<H$X;H$Y++){var H$L=this._childs[H$Y];H$L._hierarchyAnimator==H$f&&H$L._clearHierarchyAnimator(H$f,H$K)}},H$Y._getAnimatorToLinkSprite3D=function(H$f,H$K,H$Y){var H$X=this.getComponentByType(Animator);if(H$X&&(H$X.avatar?H$X.avatar._version||H$f._setAnimatorToLinkAvatar(H$X,H$K):H$f._setAnimatorToLinkSprite3DNoAvatar(H$X,H$K,H$Y)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){H$Y.unshift(this._parent.name);var H$L=this._parent;H$L._hierarchyAnimator&&H$L._getAnimatorToLinkSprite3D(H$f,H$K,H$Y)}},H$Y._setAnimatorToLinkSprite3DNoAvatar=function(H$f,H$K,H$Y){var H$X=0,H$L=0;for(H$X=0,H$L=H$f.getClipCount();H$X<H$L;H$X++)H$f._handleSpriteOwnersBySprite(H$X,H$K,H$Y,this);for(H$X=0,H$L=this._childs.length;H$X<H$L;H$X++){var H$H=this._childs[H$X],H$E=H$Y.length;H$Y.push(H$H.name),H$H._setAnimatorToLinkSprite3DNoAvatar(H$f,H$K,H$Y),H$Y.splice(H$E,1)}},H$Y._changeHierarchyAnimator=function(H$f){this._hierarchyAnimator=H$f},H$Y._isLinkSpriteToAnimationNode=function(H$f,H$K,H$Y){var H$X=H$f._avatarNodes.indexOf(H$K),H$L=H$f._cacheSpriteToNodesMap;if(H$Y)this._transform.dummy=H$K.transform,H$f._cacheNodesToSpriteMap[H$X]=H$L.length,H$L.push(H$X);else{this._transform.dummy=null;var H$H=H$f._cacheNodesToSpriteMap[H$X];H$f._cacheNodesToSpriteMap[H$X]=null,H$L.splice(H$H,1)}},H$Y._setBelongScene=function(H$f){this._scene=H$f;for(var H$K=0,H$Y=this._childs.length;H$K<H$Y;H$K++)this._childs[H$K]._setBelongScene(H$f)},H$Y._setUnBelongScene=function(){this._scene=null;for(var H$f=0,H$K=this._childs.length;H$f<H$K;H$f++)this._childs[H$f]._setUnBelongScene()},H$Y._activeHierarchy=function(){var H$f=0,H$K=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),H$f=0,H$K=this._colliders.length;H$f<H$K;H$f++)this._layer._addCollider(this._colliders[H$f]);for(this.event("activeinhierarchychanged",!0),H$f=0,H$K=this._childs.length;H$f<H$K;H$f++){var H$Y=this._childs[H$f];H$Y._active&&H$Y._activeHierarchy()}},H$Y._inActiveHierarchy=function(){var H$f=0,H$K=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),H$f=0,H$K=this._colliders.length;H$f<H$K;H$f++){var H$Y=this._colliders[H$f];H$Y._clearCollsionMap(),this._layer._removeCollider(H$Y)}for(this.event("activeinhierarchychanged",!1),H$f=0,H$K=this._childs.length;H$f<H$K;H$f++){var H$X=this._childs[H$f];H$X._active&&H$X._inActiveHierarchy()}},H$Y.addComponent=function(H$f){var H$K,H$Y=this._componentsMap.indexOf(H$f);if(-1===H$Y)H$K=[],this._componentsMap.push(H$f),this._typeComponentsIndices.push(H$K);else if(H$K=this._typeComponentsIndices[H$Y],this._components[H$K[0]].isSingleton)throw new Error("无法单实例创建"+H$f+"组件，"+H$f+"组件已存在！");var H$X=H$L.getInstance(H$f);return H$K.push(this._components.length),this._components.push(H$X),H$X instanceof laya.d3.component.Script&&this._scripts.push(H$X),H$X._initialize(this),H$X},H$Y._removeComponent=function(H$f,H$K){var H$Y,H$X=0,H$L=this._typeComponentsIndices[H$f],H$H=H$L[H$K],H$E=this._components[H$H];for(H$E instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(H$E),1),H$L.splice(H$K,1),0===H$L.length&&(this._typeComponentsIndices.splice(H$f,1),this._componentsMap.splice(H$f,1)),H$X=0,H$Y=this._componentsMap.length;H$X<H$Y;H$X++)for(var H$d=(H$L=this._typeComponentsIndices[H$X]).length-1;0<=H$d;H$d--){var H$O=H$L[H$d];if(!(H$H<H$O))break;H$L[H$d]=--H$O}H$E._destroy()},H$Y._clearSelfRenderObjects=function(){},H$Y._addSelfRenderObjects=function(){},H$Y._parseCustomProps=function(H$f,H$K,H$Y,H$X){},H$Y._updateChilds=function(H$f){var H$K=this._childs.length;if(0!==H$K)for(var H$Y=0;H$Y<H$K;++H$Y)this._childs[H$Y]._update(H$f)},H$Y._getSortID=function(H$f,H$K){return 1e3*H$K.id+H$f._getVertexBuffer().vertexDeclaration.id},H$Y._update=function(H$f){(H$f.owner=this)._activeInHierarchy&&(this._updateComponents(H$f),this._lateUpdateComponents(H$f),H$I.spriteCount++,this._childs.length&&this._updateChilds(H$f))},H$Y.getProjectionViewWorldMatrix=function(H$f){return H$fK.multiply(H$f,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},H$Y.loadHierarchy=function(H$f){this.addChild(laya.d3.core.Sprite3D.load(H$f))},H$Y.addChildAt=function(H$f,H$K){if(!(H$f instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H$f||this.destroyed||H$f===this)return H$f;if(H$f.zOrder&&this._set$P("hasZorder",!0),0<=H$K&&H$K<=this._childs.length){if(H$f._parent===this){var H$Y=this.getChildIndex(H$f);this._childs.splice(H$Y,1),this._childs.splice(H$K,0,H$f),this.conchModel&&(this.conchModel.removeChild(H$f.conchModel),this.conchModel.addChildAt(H$f.conchModel,H$K)),this._childChanged()}else H$f.parent&&H$f.parent.removeChild(H$f),this._childs===H$i.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(H$K,0,H$f),this.conchModel&&this.conchModel.addChildAt(H$f.conchModel,H$K),(H$f.parent=this)._addChild3D(H$f);return H$f}throw new Error("appendChildAt:The index is out of bounds")},H$Y.addChild=function(H$f){if(!(H$f instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!H$f||this.destroyed||H$f===this)return H$f;if(H$f.zOrder&&this._set$P("hasZorder",!0),H$f._parent===this){var H$K=this.getChildIndex(H$f);H$K!==this._childs.length-1&&(this._childs.splice(H$K,1),this._childs.push(H$f),this.conchModel&&(this.conchModel.removeChild(H$f.conchModel),this.conchModel.addChildAt(H$f.conchModel,this._childs.length-1)),this._childChanged())}else H$f.parent&&H$f.parent.removeChild(H$f),this._childs===H$i.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(H$f),this.conchModel&&this.conchModel.addChildAt(H$f.conchModel,this._childs.length-1),(H$f.parent=this)._childChanged(),this._addChild3D(H$f);return H$f},H$Y.removeChildAt=function(H$f){var H$K=this.getChildAt(H$f);return H$K&&(this._removeChild3D(H$K),this._childs.splice(H$f,1),this.conchModel&&this.conchModel.removeChild(H$K.conchModel),H$K.parent=null),H$K},H$Y.removeChildren=function(H$f,H$K){if(void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=2147483647),this._childs&&0<this._childs.length){var H$Y=this._childs;if(0===H$f&&H$H<=H$K){var H$X=H$Y;this._childs=H$i.ARRAY_EMPTY}else H$X=H$Y.splice(H$f,H$K-H$f);for(var H$L=0,H$H=H$X.length;H$L<H$H;H$L++)this._removeChild3D(H$X[H$L]),H$X[H$L].parent=null,this.conchModel&&this.conchModel.removeChild(H$X[H$L].conchModel)}return this},H$Y.onAsynLoaded=function(H$f,H$K,H$Y){var H$X=H$K[0];if("Sprite3D"!==H$X.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var H$L=H$K[1];H$hK._createNodeByJson(this,H$X,this,H$L),this.event("hierarchyloaded",[this]),this.__loaded=!0},H$Y.cloneTo=function(H$f){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var H$K=H$f;H$K.name=this.name,H$K._destroyed=this._destroyed,H$K.timer=this.timer,H$K._$P=this._$P,H$K.active=this._active;var H$Y=H$K.transform.localPosition;this.transform.localPosition.cloneTo(H$Y),H$K.transform.localPosition=H$Y;var H$X=H$K.transform.localRotation;this.transform.localRotation.cloneTo(H$X),H$K.transform.localRotation=H$X;var H$L=H$K.transform.localScale;this.transform.localScale.cloneTo(H$L),H$K.transform.localScale=H$L,H$K.isStatic=this.isStatic;var H$H=0,H$E=0;for(H$H=0,H$E=this._componentsMap.length;H$H<H$E;H$H++){var H$d=H$K.addComponent(this._componentsMap[H$H]);this._components[H$H]._cloneTo(H$d)}for(H$H=0,H$E=this._childs.length;H$H<H$E;H$H++)H$K.addChild(this._childs[H$H].clone());var H$O=H$K.getComponentByType(Animator);if(H$O){var H$i=H$O._linkSpritesData;if(H$i)for(var H$U in H$i){for(var H$Z=H$i[H$U],H$y=H$K,H$l=0,H$B=H$Z.length;H$l<H$B&&(H$y=H$y.getChildByName(H$Z[H$l]));H$l++);if(H$y){var H$$=H$O._avatarNodeMap[H$U];H$y._isLinkSpriteToAnimationNode(H$O,H$$,!0)}}}},H$Y.clone=function(){var H$f=new this.constructor;return this.cloneTo(H$f),H$f},H$Y.destroy=function(H$f){if(void 0===H$f&&(H$f=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,H$f);var H$K,H$Y=0;for(H$Y=0,H$K=this._components.length;H$Y<H$K;H$Y++)this._components[H$Y]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,H$A.clearRes(this.url),this.loaded||H$AK._cancelLoadByUrl(this.url)}},H$Y._handleSpriteToAvatar=function(H$f,H$K){H$f._avatarNodes;var H$Y=H$f._avatarNodeMap[this.name];H$Y&&H$Y.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(H$f,H$Y,H$K)},H$Y._setAnimatorToLinkAvatar=function(H$f,H$K){this._handleSpriteToAvatar(H$f,H$K);for(var H$Y=0,H$X=this._childs.length;H$Y<H$X;H$Y++){this._childs[H$Y]._setAnimatorToLinkAvatar(H$f,H$K)}},H$B(0,H$Y,"activeInHierarchy",function(){return this._activeInHierarchy}),H$B(0,H$Y,"_loaded",null,function(H$f){this.__loaded=H$f}),H$B(0,H$Y,"active",function(){return this._active},function(H$f){this._active!==H$f&&(this._active=H$f,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(H$f?this._activeHierarchy():this._inActiveHierarchy()))}),H$B(0,H$Y,"componentsCount",function(){return this._components.length}),H$B(0,H$Y,"loaded",function(){return this.__loaded}),H$B(0,H$Y,"id",function(){return this._id}),H$B(0,H$Y,"url",function(){return this._url}),H$B(0,H$Y,"layer",function(){return this._layer},function(H$f){if(this._layer!==H$f){if(!H$f)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var H$K=0,H$Y=this._colliders.length;if(this._layer)for(H$K=0;H$K<H$Y;H$K++)this._layer._removeCollider(this._colliders[H$K]);for(H$K=0;H$K<H$Y;H$K++)H$f._addCollider(this._colliders[H$K])}this._layer=H$f,this.event("layerchanged",H$f)}}),H$B(0,H$Y,"scene",function(){return this._scene}),H$B(0,H$Y,"transform",function(){return this._transform}),H$K.instantiate=function(H$f,H$K,H$Y,H$X,H$L){void 0===H$Y&&(H$Y=!0);var H$H=H$f.clone();H$K&&H$K.addChild(H$H);var H$E=H$H.transform;if(H$Y){var H$d=H$E.worldMatrix;H$f.transform.worldMatrix.cloneTo(H$d),H$E.worldMatrix=H$d}else H$X&&(H$E.position=H$X),H$L&&(H$E.rotation=H$L);return H$H},H$K.load=function(H$f){return H$C.loader.create(H$f,null,null,H$K)},H$K.WORLDMATRIX=0,H$K.MVPMATRIX=1,H$K._uniqueIDCounter=0,H$K._nameNumberCounter=0,H$K}(),H$QK=function(H$f){function H$U(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],H$U.__super.call(this),!H$f||!H$K)throw"Shader Error";this._id=++H$U._count,this._vs=H$f,this._ps=H$K,this._attributeMap=H$Y,this._sceneUniformMap=H$X,this._cameraUniformMap=H$L,this._spriteUniformMap=H$H,this._materialUniformMap=H$E,this._renderElementUniformMap=H$d,this._precompile=H$O,this._define=H$i,this._precompile&&H$U.extCompileObj&&H$U.extCompileFunc?H$U.extCompileFunc.call(H$U.extCompileObj,H$f,H$K,H$i):this.recreateResource()}H$l(H$U,"laya.d3.shader.Shader3D",H$Y);var H$K=H$U.prototype;return H$K.recreateResource=function(){H$t.now();this._compile(),this.completeCreate(),this.memorySize=0},H$K.disposeResource=function(){H$R.mainContext.deleteShader(this._vshader),H$R.mainContext.deleteShader(this._pshader),H$R.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},H$K._compile=function(){if(!H$R.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var H$f=[this._vs,this._ps],H$K=H$R.mainContext;if(this._program=H$K.createProgram(),this._vshader=H$U._createShader(H$K,H$f[0],35633),this._pshader=H$U._createShader(H$K,H$f[1],35632),H$K.attachShader(this._program,this._vshader),H$K.attachShader(this._program,this._pshader),H$K.linkProgram(this._program),!H$$.isConchApp&&H$IK.debugMode&&!H$K.getProgramParameter(this._program,35714))throw H$K.getProgramInfoLog(this._program);var H$Y,H$X=0,H$L=0,H$H=0;for(H$H=H$$.isConchApp?H$K.getProgramParameterEx(this._vs,this._ps,"",35721):H$K.getProgramParameter(this._program,35721),H$X=0;H$X<H$H;H$X++){var H$E=null;H$Y={vartype:"attribute",ivartype:0,attrib:H$E=H$$.isConchApp?H$K.getActiveAttribEx(this._vs,this._ps,"",H$X):H$K.getActiveAttrib(this._program,H$X),location:H$K.getAttribLocation(this._program,H$E.name),name:H$E.name,type:H$E.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(H$Y)}var H$d=0;for(H$d=H$$.isConchApp?H$K.getProgramParameterEx(this._vs,this._ps,"",35718):H$K.getProgramParameter(this._program,35718),H$X=0;H$X<H$d;H$X++){var H$O=null;H$O=H$$.isConchApp?H$K.getActiveUniformEx(this._vs,this._ps,"",H$X):H$K.getActiveUniform(this._program,H$X),0<(H$Y={vartype:"uniform",ivartype:1,attrib:H$E,location:H$K.getUniformLocation(this._program,H$O.name),name:H$O.name,type:H$O.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(H$Y.name=H$Y.name.substr(0,H$Y.name.length-3),H$Y.isArray=!0,H$Y.location=H$K.getUniformLocation(this._program,H$Y.name)),this._uniformParams.push(H$Y)}for(H$X=0,H$L=this._attributeParams.length;H$X<H$L;H$X++)(H$Y=this._attributeParams[H$X]).indexOfParams=H$X,H$Y.index=1,H$Y.value=[H$Y.location,null],H$Y.codename=H$Y.name,H$Y.name=null!=this._attributeMap[H$Y.codename]?this._attributeMap[H$Y.codename]:H$Y.codename,this._attributeParamsMap.push(H$Y.name),this._attributeParamsMap.push(H$Y),H$Y._this=this,H$Y.uploadedValue=[],H$Y.fun=this._attribute;for(H$X=0,H$L=this._uniformParams.length;H$X<H$L;H$X++)switch((H$Y=this._uniformParams[H$X]).indexOfParams=H$X,H$Y.index=1,H$Y.value=[H$Y.location,null],H$Y.codename=H$Y.name,null!=this._sceneUniformMap[H$Y.codename]?(H$Y.name=this._sceneUniformMap[H$Y.codename],this._sceneUniformParamsMap.push(H$Y.name),this._sceneUniformParamsMap.push(H$Y)):null!=this._cameraUniformMap[H$Y.codename]?(H$Y.name=this._cameraUniformMap[H$Y.codename],this._cameraUniformParamsMap.push(H$Y.name),this._cameraUniformParamsMap.push(H$Y)):null!=this._spriteUniformMap[H$Y.codename]?(H$Y.name=this._spriteUniformMap[H$Y.codename],this._spriteUniformParamsMap.push(H$Y.name),this._spriteUniformParamsMap.push(H$Y)):null!=this._materialUniformMap[H$Y.codename]?(H$Y.name=this._materialUniformMap[H$Y.codename],this._materialUniformParamsMap.push(H$Y.name),this._materialUniformParamsMap.push(H$Y)):null!=this._renderElementUniformMap[H$Y.codename]?(H$Y.name=this._renderElementUniformMap[H$Y.codename],this._renderElementUniformParamsMap.push(H$Y.name),this._renderElementUniformParamsMap.push(H$Y)):console.log("Shader:can't find uinform name:"+H$Y.codename+" in shader file."),H$Y._this=this,H$Y.uploadedValue=[],H$Y.type){case 5124:H$Y.fun=H$Y.isArray?this._uniform1iv:this._uniform1i;break;case 5126:H$Y.fun=H$Y.isArray?this._uniform1fv:this._uniform1f;break;case 35664:H$Y.fun=H$Y.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:H$Y.fun=H$Y.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:H$Y.fun=H$Y.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:H$Y.fun=this._uniform_sampler2D;break;case 35680:H$Y.fun=this._uniform_samplerCube;break;case 35676:H$Y.fun=this._uniformMatrix4fv;break;case 35670:H$Y.fun=this._uniform1i;break;case 35674:H$Y.fun=this._uinformMatrix2fv;break;case 35675:H$Y.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},H$K._attribute=function(H$f,H$K){var H$Y=H$R.mainContext,H$X=H$d._enableAtributes,H$L=H$f.location;return H$X[H$L]||H$Y.enableVertexAttribArray(H$L),H$Y.vertexAttribPointer(H$L,H$K[0],H$K[1],H$K[2],H$K[3],H$K[4]),H$X[H$L]=H$d._bindVertexBuffer,1},H$K._uniform1f=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K?(H$R.mainContext.uniform1f(H$f.location,H$Y[0]=H$K),1):0},H$K._uniform1fv=function(H$f,H$K){if(H$K.length<4){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]||H$Y[3]!==H$K[3]?(H$R.mainContext.uniform1fv(H$f.location,H$K),H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2],H$Y[3]=H$K[3],1):0}return H$R.mainContext.uniform1fv(H$f.location,H$K),1},H$K._uniform_vec2=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]?(H$R.mainContext.uniform2f(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1]),1):0},H$K._uniform_vec2v=function(H$f,H$K){if(H$K.length<2){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]||H$Y[3]!==H$K[3]?(H$R.mainContext.uniform2fv(H$f.location,H$K),H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2],H$Y[3]=H$K[3],1):0}return H$R.mainContext.uniform2fv(H$f.location,H$K),1},H$K._uniform_vec3=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]?(H$R.mainContext.uniform3f(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2]),1):0},H$K._uniform_vec3v=function(H$f,H$K){return H$R.mainContext.uniform3fv(H$f.location,H$K),1},H$K._uniform_vec4=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]||H$Y[3]!==H$K[3]?(H$R.mainContext.uniform4f(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2],H$Y[3]=H$K[3]),1):0},H$K._uniform_vec4v=function(H$f,H$K){return H$R.mainContext.uniform4fv(H$f.location,H$K),1},H$K._uniformMatrix2fv=function(H$f,H$K){return H$R.mainContext.uniformMatrix2fv(H$f.location,!1,H$K),1},H$K._uniformMatrix3fv=function(H$f,H$K){return H$R.mainContext.uniformMatrix3fv(H$f.location,!1,H$K),1},H$K._uniformMatrix4fv=function(H$f,H$K){return H$R.mainContext.uniformMatrix4fv(H$f.location,!1,H$K),1},H$K._uinformMatrix2fv=function(H$f,H$K){return H$R.mainContext.uniformMatrix2fv(H$f.location,!1,H$K),1},H$K._uinformMatrix3fv=function(H$f,H$K){return H$R.mainContext.uniformMatrix3fv(H$f.location,!1,H$K),1},H$K._uniform1i=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K?(H$R.mainContext.uniform1i(H$f.location,H$Y[0]=H$K),1):0},H$K._uniform1iv=function(H$f,H$K){return H$R.mainContext.uniform1iv(H$f.location,H$K),1},H$K._uniform_ivec2=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]?(H$R.mainContext.uniform2i(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1]),1):0},H$K._uniform_ivec2v=function(H$f,H$K){return H$R.mainContext.uniform2iv(H$f.location,H$K),1},H$K._uniform_vec3i=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]?(H$R.mainContext.uniform3i(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2]),1):0},H$K._uniform_vec3vi=function(H$f,H$K){return H$R.mainContext.uniform3iv(H$f.location,H$K),1},H$K._uniform_vec4i=function(H$f,H$K){var H$Y=H$f.uploadedValue;return H$Y[0]!==H$K[0]||H$Y[1]!==H$K[1]||H$Y[2]!==H$K[2]||H$Y[3]!==H$K[3]?(H$R.mainContext.uniform4i(H$f.location,H$Y[0]=H$K[0],H$Y[1]=H$K[1],H$Y[2]=H$K[2],H$Y[3]=H$K[3]),1):0},H$K._uniform_vec4vi=function(H$f,H$K){return H$R.mainContext.uniform4iv(H$f.location,H$K),1},H$K._uniform_sampler2D=function(H$f,H$K){var H$Y=H$K.source||H$K.defaulteTexture.source,H$X=H$R.mainContext,H$L=H$f.uploadedValue;if(null!=H$L[0])return H$X.activeTexture(H$U._TEXTURES[H$L[0]]),H$Y&&H$V.bindTexture(H$X,3553,H$Y),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return H$L[0]=this._curActTexIndex,H$X.uniform1i(H$f.location,this._curActTexIndex),H$X.activeTexture(H$U._TEXTURES[this._curActTexIndex]),H$Y&&H$V.bindTexture(H$X,3553,H$Y),this._curActTexIndex++,1},H$K._uniform_samplerCube=function(H$f,H$K){var H$Y=H$K.source||H$K.defaulteTexture.source,H$X=H$R.mainContext,H$L=H$f.uploadedValue;if(null!=H$L[0])return H$X.activeTexture(H$U._TEXTURES[H$L[0]]),H$Y?H$V.bindTexture(H$X,34067,H$Y):H$V.bindTexture(H$X,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return H$L[0]=this._curActTexIndex,H$X.uniform1i(H$f.location,this._curActTexIndex),H$X.activeTexture(H$U._TEXTURES[this._curActTexIndex]),H$Y?H$V.bindTexture(H$X,34067,H$Y):H$V.bindTexture(H$X,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},H$K._noSetValue=function(H$f){console.log("no....:"+H$f.name)},H$K.bind=function(){return H$Y.activeShader=this,(H$Y.bindShader=this).activeResource(),H$V.UseProgram(this._program)},H$K.uploadAttributes=function(H$f,H$K){for(var H$Y,H$X,H$L=0,H$H=0,H$E=this._attributeParamsMap.length;H$H<H$E;H$H+=2)H$X=this._attributeParamsMap[H$H+1],null!=(H$Y=H$f[this._attributeParamsMap[H$H]])&&(H$K&&H$K[H$X.name]&&H$K[H$X.name].bind(),H$L+=H$X.fun.call(this,H$X,H$Y));H$I.shaderCall+=H$L},H$K.uploadAttributesX=function(H$f,H$K){for(var H$Y,H$X,H$L=0,H$H=0,H$E=this._attributeParamsMap.length;H$H<H$E;H$H+=2)H$X=this._attributeParamsMap[H$H+1],null!=(H$Y=H$f[this._attributeParamsMap[H$H]])&&(H$K._bind(),H$L+=H$X.fun.call(this,H$X,H$Y));H$I.shaderCall+=H$L},H$K.uploadSceneUniforms=function(H$f){for(var H$K,H$Y,H$X=0,H$L=0,H$H=this._sceneUniformParamsMap.length;H$L<H$H;H$L+=2)H$Y=this._sceneUniformParamsMap[H$L+1],null!=(H$K=H$f[this._sceneUniformParamsMap[H$L]])&&(H$X+=H$Y.fun.call(this,H$Y,H$K));H$I.shaderCall+=H$X},H$K.uploadCameraUniforms=function(H$f){for(var H$K,H$Y,H$X=0,H$L=0,H$H=this._cameraUniformParamsMap.length;H$L<H$H;H$L+=2)H$Y=this._cameraUniformParamsMap[H$L+1],null!=(H$K=H$f[this._cameraUniformParamsMap[H$L]])&&(H$X+=H$Y.fun.call(this,H$Y,H$K));H$I.shaderCall+=H$X},H$K.uploadSpriteUniforms=function(H$f){for(var H$K,H$Y,H$X=0,H$L=0,H$H=this._spriteUniformParamsMap.length;H$L<H$H;H$L+=2)H$Y=this._spriteUniformParamsMap[H$L+1],null!=(H$K=H$f[this._spriteUniformParamsMap[H$L]])&&(H$X+=H$Y.fun.call(this,H$Y,H$K));H$I.shaderCall+=H$X},H$K.uploadMaterialUniforms=function(H$f){for(var H$K,H$Y,H$X=0,H$L=0,H$H=this._materialUniformParamsMap.length;H$L<H$H;H$L+=2)H$Y=this._materialUniformParamsMap[H$L+1],null!=(H$K=H$f[this._materialUniformParamsMap[H$L]])&&(H$X+=H$Y.fun.call(this,H$Y,H$K));H$I.shaderCall+=H$X},H$K.uploadRenderElementUniforms=function(H$f){for(var H$K,H$Y,H$X=0,H$L=0,H$H=this._renderElementUniformParamsMap.length;H$L<H$H;H$L+=2)H$Y=this._renderElementUniformParamsMap[H$L+1],null!=(H$K=H$f[this._renderElementUniformParamsMap[H$L]])&&(H$X+=H$Y.fun.call(this,H$Y,H$K));H$I.shaderCall+=H$X},H$U.create=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){return new H$U(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i)},H$U.addInclude=function(H$f,H$K){H$S.addInclude(H$f,H$K)},H$U._createShader=function(H$f,H$K,H$Y){var H$X=H$f.createShader(H$Y);if(H$f.shaderSource(H$X,H$K),H$f.compileShader(H$X),H$IK.debugMode&&!H$f.getShaderParameter(H$X,35713))throw H$f.getShaderInfoLog(H$X);return H$X},H$U.PERIOD_RENDERELEMENT=0,H$U.PERIOD_MATERIAL=1,H$U.PERIOD_SPRITE=2,H$U.PERIOD_CAMERA=3,H$U.PERIOD_SCENE=4,H$U._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],H$U._count=0,H$U._preCompile=!1,H$U.extCompileFunc=null,H$U.extCompileObj=null,H$Z(H$U,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new H$n}]),H$U}(),H$WK=function(H$d){function H$O(){this._transformUV=null,H$O.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new H$EK(.6,.6,.6)),this._setColor(10,new H$EK(1,1,1)),this._setColor(11,new H$dK(1,1,1,8)),this._setColor(12,new H$EK(1,1,1)),this._setColor(7,new H$dK(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new H$dK(1,1,0,0)),this.renderMode=1}H$l(H$O,"laya.d3.core.material.StandardMaterial",H$d);var H$f=H$O.prototype;return H$f.disableLight=function(){this._addDisablePublicShaderDefine(H$IK.SHADERDEFINE_POINTLIGHT|H$IK.SHADERDEFINE_SPOTLIGHT|H$IK.SHADERDEFINE_DIRECTIONLIGHT)},H$f.disableFog=function(){this._addDisablePublicShaderDefine(H$IK.SHADERDEFINE_FOG)},H$f.onAsynLoaded=function(H$f,H$K,H$Y){var H$X=H$K[0];if(H$X.version)H$d.prototype.onAsynLoaded.call(this,H$f,H$K,H$Y);else{var H$L=H$K[1],H$H=H$X.props;for(var H$E in H$H)this[H$E]=H$H[H$E];H$O._parseStandardMaterial(H$L,this,H$X),this._endLoaded()}},H$f.cloneTo=function(H$f){H$d.prototype.cloneTo.call(this,H$f);var H$K=H$f;this._transformUV&&(H$K._transformUV=this._transformUV.clone())},H$B(0,H$f,"ambientColor",function(){return this._getColor(9)},function(H$f){this._setColor(9,H$f)}),H$B(0,H$f,"ambientTexture",function(){return this._getTexture(5)},function(H$f){H$f?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,H$f)}),H$B(0,H$f,"renderMode",null,function(H$f){switch(H$f){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(H$O.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(H$f)}),H$B(0,H$f,"reflectColor",function(){return this._getColor(12)},function(H$f){this._setColor(12,H$f)}),H$B(0,H$f,"tilingOffset",function(){return this._getColor(15)},function(H$f){if(H$f){var H$K=H$f.elements;1!=H$K[0]||1!=H$K[1]||0!=H$K[2]||0!=H$K[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,H$f)}),H$B(0,H$f,"albedo",function(){return this._getColor(7)},function(H$f){this._setColor(7,H$f)}),H$B(0,H$f,"diffuseColor",function(){return this._getColor(10)},function(H$f){this._setColor(10,H$f)}),H$B(0,H$f,"albedoColor",function(){return this._getColor(7)},function(H$f){this._setColor(7,H$f)}),H$B(0,H$f,"specularColor",function(){return this._getColor(11)},function(H$f){this._setColor(11,H$f)}),H$B(0,H$f,"diffuseTexture",function(){return this._getTexture(1)},function(H$f){H$f?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,H$f)}),H$B(0,H$f,"normalTexture",function(){return this._getTexture(2)},function(H$f){H$f?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,H$f)}),H$B(0,H$f,"specularTexture",function(){return this._getTexture(3)},function(H$f){H$f?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,H$f)}),H$B(0,H$f,"emissiveTexture",function(){return this._getTexture(4)},function(H$f){H$f?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,H$f)}),H$B(0,H$f,"reflectTexture",function(){return this._getTexture(6)},function(H$f){H$f?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,H$f)}),H$B(0,H$f,"transformUV",function(){return this._transformUV},function(H$f){this._transformUV=H$f,this._setMatrix4x4(13,H$f.matrix),H$f?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,H$f.matrix.elements,0)}),H$O.__init__=function(){H$O.SHADERDEFINE_DIFFUSEMAP=H$O.shaderDefines.registerDefine("DIFFUSEMAP"),H$O.SHADERDEFINE_NORMALMAP=H$O.shaderDefines.registerDefine("NORMALMAP"),H$O.SHADERDEFINE_SPECULARMAP=H$O.shaderDefines.registerDefine("SPECULARMAP"),H$O.SHADERDEFINE_EMISSIVEMAP=H$O.shaderDefines.registerDefine("EMISSIVEMAP"),H$O.SHADERDEFINE_AMBIENTMAP=H$O.shaderDefines.registerDefine("AMBIENTMAP"),H$O.SHADERDEFINE_REFLECTMAP=H$O.shaderDefines.registerDefine("REFLECTMAP"),H$O.SHADERDEFINE_UVTRANSFORM=H$O.shaderDefines.registerDefine("UVTRANSFORM"),H$O.SHADERDEFINE_TILINGOFFSET=H$O.shaderDefines.registerDefine("TILINGOFFSET"),H$O.SHADERDEFINE_ADDTIVEFOG=H$O.shaderDefines.registerDefine("ADDTIVEFOG")},H$O.load=function(H$f){return H$C.loader.create(H$f,null,null,H$O)},H$O._parseStandardMaterial=function(H$f,H$K,H$Y){var H$X=H$Y.customProps,H$L=H$X.ambientColor;H$K.ambientColor=new H$EK(H$L[0],H$L[1],H$L[2]);var H$H=H$X.diffuseColor;H$K.diffuseColor=new H$EK(H$H[0],H$H[1],H$H[2]);var H$E=H$X.specularColor;H$K.specularColor=new H$dK(H$E[0],H$E[1],H$E[2],H$E[3]);var H$d=H$X.reflectColor;H$K.reflectColor=new H$EK(H$d[0],H$d[1],H$d[2]);var H$O=H$X.albedoColor;H$O&&(H$K.albedo=new H$dK(H$O[0],H$O[1],H$O[2],H$O[3]));var H$i=H$X.diffuseTexture.texture2D;H$i&&(H$K.diffuseTexture=H$A.getRes(H$f[H$i]));var H$U=H$X.normalTexture.texture2D;H$U&&(H$K.normalTexture=H$A.getRes(H$f[H$U]));var H$Z=H$X.specularTexture.texture2D;H$Z&&(H$K.specularTexture=H$A.getRes(H$f[H$Z]));var H$y=H$X.emissiveTexture.texture2D;H$y&&(H$K.emissiveTexture=H$A.getRes(H$f[H$y]));var H$l=H$X.ambientTexture.texture2D;H$l&&(H$K.ambientTexture=H$A.getRes(H$f[H$l]));var H$B=H$X.reflectTexture.texture2D;H$B&&(H$K.reflectTexture=H$A.getRes(H$f[H$B]))},H$O.RENDERMODE_OPAQUE=1,H$O.RENDERMODE_OPAQUEDOUBLEFACE=2,H$O.RENDERMODE_CUTOUT=3,H$O.RENDERMODE_CUTOUTDOUBLEFACE=4,H$O.RENDERMODE_TRANSPARENT=13,H$O.RENDERMODE_TRANSPARENTDOUBLEFACE=14,H$O.RENDERMODE_ADDTIVE=15,H$O.RENDERMODE_ADDTIVEDOUBLEFACE=16,H$O.RENDERMODE_DEPTHREAD_TRANSPARENT=5,H$O.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,H$O.RENDERMODE_DEPTHREAD_ADDTIVE=7,H$O.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,H$O.RENDERMODE_NONDEPTH_TRANSPARENT=9,H$O.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,H$O.RENDERMODE_NONDEPTH_ADDTIVE=11,H$O.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,H$O.SHADERDEFINE_DIFFUSEMAP=0,H$O.SHADERDEFINE_NORMALMAP=0,H$O.SHADERDEFINE_SPECULARMAP=0,H$O.SHADERDEFINE_EMISSIVEMAP=0,H$O.SHADERDEFINE_AMBIENTMAP=0,H$O.SHADERDEFINE_REFLECTMAP=0,H$O.SHADERDEFINE_UVTRANSFORM=0,H$O.SHADERDEFINE_TILINGOFFSET=0,H$O.SHADERDEFINE_ADDTIVEFOG=0,H$O.DIFFUSETEXTURE=1,H$O.NORMALTEXTURE=2,H$O.SPECULARTEXTURE=3,H$O.EMISSIVETEXTURE=4,H$O.AMBIENTTEXTURE=5,H$O.REFLECTTEXTURE=6,H$O.ALBEDO=7,H$O.UVANIAGE=8,H$O.MATERIALAMBIENT=9,H$O.MATERIALDIFFUSE=10,H$O.MATERIALSPECULAR=11,H$O.MATERIALREFLECT=12,H$O.UVMATRIX=13,H$O.UVAGE=14,H$O.TILINGOFFSET=15,H$Z(H$O,["defaultMaterial",function(){var H$f=new H$O;return H$f.lock=!0,this.defaultMaterial=H$f},"shaderDefines",function(){return this.shaderDefines=new H$UK(H$mK.shaderDefines)}]),H$O}(H$mK),H$qK=function(H$f){function H$E(H$f,H$K,H$Y,H$X,H$L){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===H$Y&&(H$Y=35044),void 0===H$X&&(H$X=!1),H$E.__super.call(this),this._indexType=H$f,this._indexCount=H$K,this._bufferUsage=H$Y,this._bufferType=34963,this._canRead=H$X;var H$H;if("ushort"==H$f)this._indexTypeByteCount=2;else{if("ubyte"!=H$f)throw new Error("unidentification index type.");this._indexTypeByteCount=1}H$H=this._indexTypeByteCount*H$K,this._byteLength=H$H,this._bind(),H$d._gl.bufferData(this._bufferType,H$H,this._bufferUsage),this.uri=H$L,H$X?("ushort"==H$f?this._buffer=new Uint16Array(H$K):"ubyte"==H$f&&(this._buffer=new Uint8Array(H$K)),this.memorySize=2*H$H):this.memorySize=H$H}H$l(H$E,"laya.d3.graphics.IndexBuffer3D",H$f);var H$K=H$E.prototype;return H$K.setData=function(H$f,H$K,H$Y,H$X){void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=4294967295);var H$L=0;if("ushort"==this._indexType?(H$L=2,0===H$Y&&4294967295===H$X||(H$f=new Uint16Array(H$f.buffer,H$Y*H$L,H$X))):"ubyte"==this._indexType&&(H$L=1,0===H$Y&&4294967295===H$X||(H$f=new Uint8Array(H$f.buffer,H$Y*H$L,H$X))),this._bind(),H$d._gl.bufferSubData(this._bufferType,H$K*H$L,H$f),this._canRead)if(0!==H$K||0!==H$Y||4294967295!==H$X){var H$H=this._buffer.length-H$K;H$H<H$X&&(H$X=H$H);for(var H$E=0;H$E<H$X;H$E++)this._buffer[H$K+H$E]=H$f[H$E]}else this._buffer=H$f},H$K.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},H$K.disposeResource=function(){H$f.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},H$B(0,H$K,"indexType",function(){return this._indexType}),H$B(0,H$K,"indexTypeByteCount",function(){return this._indexTypeByteCount}),H$B(0,H$K,"indexCount",function(){return this._indexCount}),H$B(0,H$K,"canRead",function(){return this._canRead}),H$E.INDEXTYPE_UBYTE="ubyte",H$E.INDEXTYPE_USHORT="ushort",H$E.create=function(H$f,H$K,H$Y,H$X,H$L){return void 0===H$Y&&(H$Y=35044),void 0===H$X&&(H$X=!1),new H$E(H$f,H$K,H$Y,H$X,H$L)},H$E}(H$d),H$PK=function(H$H){function H$E(H$f,H$K,H$Y,H$X,H$L){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===H$X&&(H$X=!1),H$E.__super.call(this),this._vertexDeclaration=H$f,this._vertexCount=H$K,this._bufferUsage=H$Y,this._bufferType=34962,this._canRead=H$X,this.uri=H$L,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*H$K,this._bind(),H$d._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),H$X&&(this._buffer=new Float32Array(this._byteLength/4))}H$l(H$E,"laya.d3.graphics.VertexBuffer3D",H$H);var H$f=H$E.prototype;return H$f.bindWithIndexBuffer=function(H$f){H$f&&H$f._bind(),this._bind()},H$f.setData=function(H$f,H$K,H$Y,H$X){if(void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=4294967295),0===H$Y&&4294967295===H$X||(H$f=new Float32Array(H$f.buffer,4*H$Y,H$X)),this._bind(),H$d._gl.bufferSubData(this._bufferType,4*H$K,H$f),this._canRead)if(0!==H$K||0!==H$Y||4294967295!==H$X){var H$L=this._buffer.length-H$K;H$L<H$X&&(H$X=H$L);for(var H$H=0;H$H<H$X;H$H++)this._buffer[H$K+H$H]=H$f[H$H]}else this._buffer=H$f},H$f.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},H$f.disposeResource=function(){for(var H$f=H$R.mainContext,H$K=this._vertexDeclaration.getVertexElements(),H$Y=H$d._enableAtributes,H$X=0,H$L=H$K.length;H$X<H$L;H$X++)H$Y[H$X]===this._glBuffer&&(H$f.disableVertexAttribArray(H$X),H$Y[H$X]=null);H$H.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},H$B(0,H$f,"vertexDeclaration",function(){return this._vertexDeclaration}),H$B(0,H$f,"vertexCount",function(){return this._vertexCount}),H$B(0,H$f,"canRead",function(){return this._canRead}),H$E.create=function(H$f,H$K,H$Y,H$X,H$L){return void 0===H$Y&&(H$Y=35044),void 0===H$X&&(H$X=!1),new H$E(H$f,H$K,H$Y,H$X,H$L)},H$E}(H$d),H$bK=function(H$f){function H$S(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,H$S.__super.call(this),this._type=3553}H$l(H$S,"laya.d3.resource.DataTexture2D",H$RK);var H$K=H$S.prototype;return H$K.genDebugMipmaps=function(){var H$f=[];return H$f.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),H$f.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),H$f.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),H$f.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),H$f.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),H$f.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),H$f.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),H$f.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),H$f.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),H$f.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),H$f},H$K._onTextureLoaded=function(H$f){},H$K._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var H$f=H$R.mainContext,H$K=this._source=H$f.createTexture(),H$Y=this._width,H$X=this._height,H$L=H$V.curBindTexTarget,H$H=H$V.curBindTexValue,H$E=!1;if(H$V.bindTexture(H$f,this._type,H$K),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var H$d=0;H$f.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var H$O=0;H$O<this._mipmaps.length;H$O++){if(this._mipmaps[H$O].byteLength!=H$i*H$U*4)throw"mipmap size error  level:"+H$O;H$f.texSubImage2D(this._type,0,H$S.simLodRect[H$d++],H$S.simLodRect[H$d++],H$S.simLodRect[H$d++],H$S.simLodRect[H$d++],6408,5121,new Uint8Array(this._mipmaps[H$O]))}this.minFifter=9729,this.magFifter=9729}else{var H$i=this._width,H$U=this._height;for(H$d=0,H$f.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),H$O=0;H$O<this._mipmaps.length;H$O++){if(this._mipmaps[H$O].byteLength!=H$i*H$U*4)throw"mipmap size error  level:"+H$O;H$f.texImage2D(this._type,H$O,6408,H$i,H$U,0,6408,5121,new Uint8Array(this._mipmaps[H$O])),(H$i/=2)<1&&(H$i=1),(H$U/=2)<1&&(H$U=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&H$f.pixelStorei(H$f.UNPACK_ALIGNMENT,1),H$f.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var H$Z=0,H$y=!1,H$l=!1;this._buffer.byteLength==4*H$Y*H$X?(H$Z=6408,H$y=!0):this._buffer.byteLength==3*H$Y*H$X?(H$Z=6407,H$l=!0):H$Z=this._format,H$y||H$l?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),H$l&&H$f.pixelStorei(H$f.UNPACK_ALIGNMENT,1),H$f.texImage2D(this._type,0,H$Z,H$Y,H$X,0,H$Z,5121,this._buffer)):H$f&&H$Z==H$f.ALPHA?(H$f.texImage2D(3553,0,H$Z,H$Y,H$X,0,H$Z,H$f.UNSIGNED_BYTE,this._buffer),H$E=!0):0!=H$Z&&(H$f.compressedTexImage2D(3553,0,H$Z,H$Y,H$X,0,this._buffer),H$E=!0)}var H$B=this._minFifter,H$$=this._magFifter,H$h=0==this._wrapModeU?10497:33071,H$A=0==this._wrapModeV?10497:33071,H$x=H$z.isPOT(H$Y,H$X);H$x?(this._mipmap||this._mipmaps?-1!==H$B||(H$B=9987):-1!==H$B||(H$B=9729),-1!==H$$||(H$$=9729),H$f.texParameteri(this._type,10241,H$B),H$f.texParameteri(this._type,10240,H$$),H$f.texParameteri(this._type,10242,H$h),H$f.texParameteri(this._type,10243,H$A),this._mipmap&&H$f.generateMipmap(this._type)):(-1!==H$B||(H$B=9729),-1!==H$$||(H$$=9729),H$f.texParameteri(this._type,10241,H$B),H$f.texParameteri(this._type,10240,H$$),H$f.texParameteri(this._type,10242,33071),H$f.texParameteri(this._type,10243,33071)),H$L&&H$H&&H$V.bindTexture(H$f,H$L,H$H),this.memorySize=H$E?this._buffer.length:H$x?H$Y*H$X*4*(1+1/3):H$Y*H$X*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},H$K.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},H$K.onAsynLoaded=function(H$f,H$K,H$Y){var H$X;H$Y&&(H$X=H$Y[0].call(this,H$K)),H$X&&(this._width=H$X.width,this._height=H$X.height,this._buffer=H$X.data),this._src=H$f,this._size=new H$$K(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},H$K.getPixels=function(){return new Uint8Array(this._buffer)},H$K.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(H$R.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},H$B(0,H$K,"src",function(){return this._src}),H$S.create=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){if(void 0===H$X&&(H$X=9729),void 0===H$L&&(H$L=9729),void 0===H$H&&(H$H=!0),!H$f||H$f.byteLength<H$K*H$Y*4)throw"DataTexture2D create error";var H$d=new H$S;return H$d.uri=H$E,H$d._buffer=H$f,H$d._width=H$K,H$d._height=H$Y,H$d._mipmap=H$H,H$d._magFifter=H$X,H$d._minFifter=H$L,H$d._size=new H$$K(H$d._width,H$d._height),H$d._conchTexture?alert("怎么给runtime传递datatexture数据"):H$d.activeResource(),H$d},H$S.load=function(H$f,H$K,H$Y,H$X,H$L){if(void 0===H$K&&(H$K=0),void 0===H$Y&&(H$Y=0),void 0===H$X&&(H$X=9729),void 0===H$L&&(H$L=9729),"mipmaps"===H$_.getFileExtension(H$f)){var H$H=H$C.loader.create(H$f,null,null,H$S,[function(H$f){this._mipmaps=[];var H$K=new Uint32Array(H$f);this._width=H$K[0];var H$Y=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,H$Y=1024),this._width!=H$Y)throw"现在只支持512x256的环境贴图。当前的是"+H$K[0];this._height=H$K[1];for(var H$X=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,H$L=this._height,H$H=8;;){var H$E=H$X*H$L*4;if(H$H+H$E>H$f.byteLength)throw"load mipmaps data size error ";var H$d=new Uint8Array(H$f,H$H,H$E);if(this._mipmaps.push(H$d),H$H+=H$E,1==H$X&&1==H$L)break;(H$X/=2)<1&&(H$X=1),(H$L/=2)<1&&(H$L=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){H$H.simLodInfo=new Float32Array(40);for(var H$E=0;H$E<H$H.simLodInfo.length;)H$H.simLodInfo[H$E]=(H$S.simLodRect[H$E]+.5)/1024,H$E++,H$H.simLodInfo[H$E]=(H$S.simLodRect[H$E]+.5)/256,H$E++,H$H.simLodInfo[H$E]=Math.max(H$S.simLodRect[H$E]-1,.1)/1024,H$E++,H$H.simLodInfo[H$E]=Math.max(H$S.simLodRect[H$E]-1.5,.1)/256,H$E++}return H$H}if("number"==typeof H$K)return H$C.loader.create(H$f,null,null,H$S,[function(H$f){return this._width=H$K,this._height=H$Y,this._buffer=H$f,null}]);if("function"==typeof H$K)return H$C.loader.create(H$f,null,null,H$S,[H$K]);throw new Error("unknown params.")},H$S.lodasatlas=!1,H$Z(H$S,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),H$S}(),H$JK=function(H$f){function H$K(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,H$K.__super.call(this)}H$l(H$K,"laya.d3.resource.models.PrimitiveMesh",H$VK);var H$Y=H$K.prototype;return H$C.imps(H$Y,{"laya.d3.core.render.IRenderable":!0}),H$Y._getVertexBuffer=function(H$f){return void 0===H$f&&(H$f=0),0===H$f?this._vertexBuffer:null},H$Y._getVertexBuffers=function(){return null},H$Y._getIndexBuffer=function(){return this._indexBuffer},H$Y._getPositions=function(){var H$f,H$K=[],H$Y=this._vertexBuffer.vertexDeclaration.getVertexElements(),H$X=0;for(H$X=0;H$X<H$Y.length;H$X++){var H$L=H$Y[H$X];if("vector3"===H$L.elementFormat&&0===H$L.elementUsage){H$f=H$L;break}}var H$H=this._vertexBuffer.getData();for(H$X=0;H$X<H$H.length;H$X+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var H$E=H$X+H$f.offset/4,H$d=new H$EK(H$H[H$E+0],H$H[H$E+1],H$H[H$E+2]);H$K.push(H$d)}return H$K},H$Y.getRenderElement=function(H$f){return this},H$Y.getRenderElementsCount=function(){return 1},H$Y.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},H$Y._beforeRender=function(H$f){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},H$Y._render=function(H$f){H$R.mainContext.drawElements(4,this._numberIndices,5123,0),H$I.drawCall++,H$I.trianglesFaces+=this._numberIndices/3},H$B(0,H$Y,"_vertexBufferCount",function(){return 1}),H$B(0,H$Y,"triangleCount",function(){return this._indexBuffer.indexCount/3}),H$K}(),H$MK=function(H$f){function H$K(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,H$K.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}H$l(H$K,"laya.d3.resource.models.Mesh",H$VK);var H$Y=H$K.prototype;return H$Y._getPositions=function(){var H$f,H$K,H$Y,H$X,H$L,H$H=[],H$E=0,H$d=0,H$O=0;if(0!==this._vertexBuffers.length){var H$i=this._vertexBuffers.length;for(H$E=0;H$E<H$i;H$E++){for(H$Y=(H$f=this._vertexBuffers[H$E]).vertexDeclaration.getVertexElements(),H$d=0;H$d<H$Y.length;H$d++)if("vector3"===(H$X=H$Y[H$d]).elementFormat&&0===H$X.elementUsage){H$K=H$X;break}for(H$L=H$f.getData(),H$d=0;H$d<H$L.length;H$d+=H$f.vertexDeclaration.vertexStride/4)H$O=H$d+H$K.offset/4,H$H.push(new H$EK(H$L[H$O+0],H$L[H$O+1],H$L[H$O+2]))}}else{var H$U=this._subMeshes.length;for(H$E=0;H$E<H$U;H$E++){for(H$Y=(H$f=this._subMeshes[H$E]._getVertexBuffer()).vertexDeclaration.getVertexElements(),H$d=0;H$d<H$Y.length;H$d++)if("vector3"===(H$X=H$Y[H$d]).elementFormat&&0===H$X.elementUsage){H$K=H$X;break}for(H$L=H$f.getData(),H$d=0;H$d<H$L.length;H$d+=H$f.vertexDeclaration.vertexStride/4)H$O=H$d+H$K.offset/4,H$H.push(new H$EK(H$L[H$O+0],H$L[H$O+1],H$L[H$O+2]))}}return H$H},H$Y._setSubMeshes=function(H$f){this._subMeshes=H$f,this._subMeshCount=H$f.length;for(var H$K=0;H$K<this._subMeshCount;H$K++)H$f[H$K]._indexInMesh=H$K;this._positions=this._getPositions(),this._generateBoundingObject()},H$Y.onAsynLoaded=function(H$f,H$K,H$Y){var H$X=H$K[0],H$L=H$K[1];H$uf.read(H$X,this,this._materials,this._subMeshes,H$L),this.completeCreate(),this._endLoaded()},H$Y.getSubMesh=function(H$f){return this._subMeshes[H$f]},H$Y.getSubMeshCount=function(){return this._subMeshes.length},H$Y.getRenderElementsCount=function(){return this._subMeshes.length},H$Y.getRenderElement=function(H$f){return this._subMeshes[H$f]},H$Y.disposeResource=function(){for(var H$f=0;H$f<this._subMeshes.length;H$f++)this._subMeshes[H$f].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},H$B(0,H$Y,"materials",function(){return this._materials.slice()}),H$B(0,H$Y,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),H$K.load=function(H$f){return H$C.loader.create(H$f,null,null,H$K)},H$K}(),H$wK=(function(H$f){function H$i(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===H$Y&&(H$Y=6408),void 0===H$X&&(H$X=5121),void 0===H$L&&(H$L=33189),void 0===H$H&&(H$H=!1),void 0===H$E&&(H$E=!1),void 0===H$d&&(H$d=-1),void 0===H$O&&(H$O=-1),H$i.__super.call(this),this._type=3553,this._width=H$f,this._height=H$K,this._size=new H$$K(H$f,H$K),this._surfaceFormat=H$Y,this._surfaceType=H$X,this._depthStencilFormat=H$L,H$$.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=H$H,this._repeat=H$E,this._minFifter=H$d,this._magFifter=H$O,this.activeResource(),this._alreadyResolved=!0}H$l(H$i,"laya.d3.resource.RenderTexture",H$RK);var H$K=H$i.prototype;H$K.recreateResource=function(){var H$f=H$R.mainContext;this._frameBuffer=H$f.createFramebuffer(),this._source=H$f.createTexture();var H$K=H$V.curBindTexTarget,H$Y=H$V.curBindTexValue;H$V.bindTexture(H$f,this._type,this._source),H$f.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var H$X=this._minFifter,H$L=this._magFifter,H$H=this._repeat?10497:33071;if(H$z.isPOT(this._width,this._height)?(this._mipmap?-1!==H$X||(H$X=9987):-1!==H$X||(H$X=9729),-1!==H$L||(H$L=9729),H$f.texParameteri(this._type,10241,H$X),H$f.texParameteri(this._type,10240,H$L),H$f.texParameteri(this._type,10242,H$H),H$f.texParameteri(this._type,10243,H$H),this._mipmap&&H$f.generateMipmap(this._type)):(-1!==H$X||(H$X=9729),-1!==H$L||(H$L=9729),H$f.texParameteri(this._type,10241,H$X),H$f.texParameteri(this._type,10240,H$L),H$f.texParameteri(this._type,10242,33071),H$f.texParameteri(this._type,10243,33071)),H$K&&H$Y&&H$V.bindTexture(H$f,H$K,H$Y),H$f.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=H$f.createRenderbuffer(),H$f.bindRenderbuffer(36161,this._depthStencilBuffer),H$f.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),H$f.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:H$f.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:H$f.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:H$f.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}H$f.framebufferTexture2D(36160,36064,3553,this._source,0),H$f.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},H$K.start=function(){H$R.mainContext.bindFramebuffer(36160,this.frameBuffer),(H$i._currentRenderTarget=this)._alreadyResolved=!1},H$K.end=function(){H$R.mainContext.bindFramebuffer(36160,null),H$i._currentRenderTarget=null,this._alreadyResolved=!0},H$K.getData=function(H$f,H$K,H$Y,H$X){var H$L=H$R.mainContext;if(H$L.bindFramebuffer(36160,this._frameBuffer),!(36053===H$L.checkFramebufferStatus(36160)))return H$L.bindFramebuffer(36160,null),null;var H$H=new Uint8Array(this._width*this._height*4);return H$L.readPixels(H$f,H$K,H$Y,H$X,this._surfaceFormat,this._surfaceType,H$H),H$L.bindFramebuffer(36160,null),H$H},H$K.disposeResource=function(){if(this._frameBuffer){var H$f=H$R.mainContext;H$f.deleteTexture(this._source),H$f.deleteFramebuffer(this._frameBuffer),H$f.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},H$B(0,H$K,"surfaceFormat",function(){return this._surfaceFormat}),H$B(0,H$K,"surfaceType",function(){return this._surfaceType}),H$B(0,H$K,"depthStencilFormat",function(){return this._depthStencilFormat}),H$B(0,H$K,"source",function(){return this._alreadyResolved?H$C.superGet(H$RK,this,"source"):null}),H$B(0,H$K,"depthStencilBuffer",function(){return this._depthStencilBuffer}),H$B(0,H$K,"frameBuffer",function(){return this._frameBuffer}),H$i._currentRenderTarget=null}(),function(H$f){function H$K(H$f){this._color=null,this._pixels=null,H$K.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new H$$K(this.width,this.height),this._color=H$f,this._pixels=new Uint8Array([255*H$f.x,255*H$f.y,255*H$f.z,255*H$f.w]),this.uri="SolidColorTexture2D_"+this.id}H$l(H$K,"laya.d3.resource.SolidColorTexture2D",H$RK);var H$Y=H$K.prototype;return H$Y._createWebGlTexture=function(){var H$f=H$R.mainContext,H$K=this._source=H$f.createTexture(),H$Y=this._width,H$X=this._height,H$L=H$V.curBindTexTarget,H$H=H$V.curBindTexValue;H$V.bindTexture(H$f,this._type,H$K),H$f.texImage2D(this._type,0,6408,H$Y,H$X,0,6408,5121,this._pixels);var H$E=this._minFifter,H$d=this._magFifter,H$O=this._repeat?10497:33071,H$i=H$z.isPOT(H$Y,H$X);H$i?(this._mipmap?-1!==H$E||(H$E=9987):-1!==H$E||(H$E=9729),-1!==H$d||(H$d=9729),H$f.texParameteri(this._type,10241,H$E),H$f.texParameteri(this._type,10240,H$d),H$f.texParameteri(this._type,10242,H$O),H$f.texParameteri(this._type,10243,H$O),this._mipmap&&H$f.generateMipmap(this._type)):(-1!==H$E||(H$E=9729),-1!==H$d||(H$d=9729),H$f.texParameteri(this._type,10241,H$E),H$f.texParameteri(this._type,10240,H$d),H$f.texParameteri(this._type,10242,33071),H$f.texParameteri(this._type,10243,33071)),H$L&&H$H&&H$V.bindTexture(H$f,H$L,H$H),this.memorySize=H$i?H$Y*H$X*4*(1+1/3):H$Y*H$X*4},H$Y.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},H$Y.disposeResource=function(){this._source&&(H$R.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},H$Z(H$K,["magentaTexture",function(){var H$f=new H$K(new H$dK(1,0,1,1));return H$f.lock=!0,this.magentaTexture=H$f},"grayTexture",function(){var H$f=new H$K(new H$dK(.5,.5,.5,1));return H$f.lock=!0,this.grayTexture=H$f}]),H$K}()),H$rK=function(H$f){function H$L(H$f,H$K,H$Y,H$X){this._canRead=!1,this._image=null,this._pixels=null,void 0===H$f&&(H$f=!1),void 0===H$K&&(H$K=!0),void 0===H$Y&&(H$Y=6408),void 0===H$X&&(H$X=!0),H$L.__super.call(this),this._type=3553,this._repeat=H$K,this._canRead=H$f,this._format=H$Y,this._mipmap=H$X}H$l(H$L,"laya.d3.resource.Texture2D",H$RK);var H$K=H$L.prototype;return H$K._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var H$f=H$R.mainContext,H$K=this._source=H$f.createTexture(),H$Y=this._width,H$X=this._height,H$L=H$V.curBindTexTarget,H$H=H$V.curBindTexValue;switch(H$V.bindTexture(H$f,this._type,H$K),this._format){case 6407:case 6408:this._canRead?H$f.texImage2D(this._type,0,this._format,H$Y,H$X,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?H$f.texImage2D(this._type,0,this._image._format,H$Y,H$X,0,this._image._format,5121,this._image.atlasSource):H$f.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case H$R.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:H$f.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var H$E=this._minFifter,H$d=this._magFifter,H$O=this._repeat?10497:33071,H$i=0==this._wrapModeU?10497:33071,H$U=0==this._wrapModeV?10497:33071,H$Z=H$z.isPOT(H$Y,H$X);H$Z?(this._mipmap?-1!==H$E||(H$E=9987):-1!==H$E||(H$E=9729),-1!==H$d||(H$d=9729),H$f.texParameteri(this._type,10241,H$E),H$f.texParameteri(this._type,10240,H$d),H$f.texParameteri(this._type,10242,H$O),H$f.texParameteri(this._type,10243,H$O),H$f.texParameteri(this._type,10242,H$i),H$f.texParameteri(this._type,10243,H$U),this._mipmap&&H$f.generateMipmap(this._type)):(-1!==H$E||(H$E=9729),-1!==H$d||(H$d=9729),H$f.texParameteri(this._type,10241,H$E),H$f.texParameteri(this._type,10240,H$d),H$f.texParameteri(this._type,10242,33071),H$f.texParameteri(this._type,10243,33071)),H$L&&H$H&&H$V.bindTexture(H$f,H$L,H$H),this._image.onload=null,this._image=null,this.memorySize=H$Z?H$Y*H$X*4*(1+1/3):H$Y*H$X*4},H$K.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},H$K.onAsynLoaded=function(H$f,H$K,H$Y){if(H$Y){var H$X=H$Y[0];void 0!==H$X&&(this._canRead=H$X);var H$L=H$Y[1];void 0!==H$L&&(this._repeat=H$L);var H$H=H$Y[2];void 0!==H$H&&(this._format=H$H);var H$E=H$Y[3];void 0!==H$E&&(this._mipmap=H$E);var H$d=H$Y.wrapModeU;void 0!==H$d&&(this._wrapModeU=H$d);var H$O=H$Y.wrapModeV;void 0!==H$O&&(this._wrapModeV=H$O)}switch(this._format){case 6407:case 6408:var H$i=(this._image=H$K).width,H$U=H$K.height;this._width=H$i,this._height=H$U,this._size=new H$$K(H$i,H$U),this._canRead&&(H$$.isConchApp?H$K instanceof H$y.HTMLElement&&(this._pixels=new Uint8Array(H$K.getImageData(0,0,H$i,H$U))):(H$t.canvas.size(H$i,H$U),H$t.canvas.clear(),H$t.context.drawImage(H$K,0,0,H$i,H$U),this._pixels=new Uint8Array(H$t.context.getImageData(0,0,H$i,H$U).data.buffer)));break;case H$R.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var H$Z=new H$s(H$K);H$Z.readUTFBytes(4),H$Z.readUTFBytes(2),H$Z.getInt16();H$Z.endian="bigEndian",this._width=H$Z.getInt16(),this._height=H$Z.getInt16(),this._size=new H$$K(this._width,this._height);H$Z.getInt16(),H$Z.getInt16();this._image=new Uint8Array(H$K,H$Z.pos)}this.recreateResource(),this._endLoaded()},H$K.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},H$K.disposeResource=function(){this._source&&(H$R.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},H$B(0,H$K,"_src",function(){return this.url}),H$B(0,H$K,"src",function(){return this.url}),H$L.load=function(H$f){return H$C.loader.create(H$f,null,null,H$L)},H$L}(),H$vK=function(H$K){function H$Y(H$f,H$K){H$Y.__super.call(this),void 0===H$f&&(H$f=.3),void 0===H$K&&(H$K=1e3),this._tempVector3=new H$EK,this._position=new H$EK,this._up=new H$EK,this._forward=new H$EK,this._right=new H$EK,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=H$$K.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=H$f,this._farPlane=H$K,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),H$C.stage.on("resize",this,this._onScreenSizeChanged)}H$l(H$Y,"laya.d3.core.BaseCamera",H$K);var H$f=H$Y.prototype;return H$f._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var H$f=this.scene._cameraPool,H$K=H$f.length-1,H$Y=0;H$Y<H$K;H$Y++)if(H$f[H$Y].renderingOrder>H$f[H$K].renderingOrder){var H$X=H$f[H$Y];H$f[H$Y]=H$f[H$K],H$f[H$K]=H$X}},H$f._calculateProjectionMatrix=function(){},H$f._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},H$f._prepareCameraToRender=function(){H$T._currentCameraCullingMask=this.cullingMask;var H$f=this._shaderValues;H$f.setValue(0,this.transform.position.elements),H$f.setValue(5,this.forward.elements),H$f.setValue(6,this.up.elements)},H$f._prepareCameraViewProject=function(H$f,H$K){var H$Y=this._shaderValues;H$Y.setValue(1,H$f.elements),H$Y.setValue(2,H$K.elements)},H$f._renderCamera=function(H$f,H$K,H$Y){},H$f.addLayer=function(H$f){29!==H$f.number&&30!=H$f.number&&(this.cullingMask=this.cullingMask|H$f.mask)},H$f.removeLayer=function(H$f){29!==H$f.number&&30!=H$f.number&&(this.cullingMask=this.cullingMask&~H$f.mask)},H$f.addAllLayers=function(){this.cullingMask=2147483647},H$f.removeAllLayers=function(){this.cullingMask=0|H$T.getLayerByNumber(29).mask|H$T.getLayerByNumber(30).mask},H$f.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},H$f.moveForward=function(H$f){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=H$f,this.transform.translate(this._tempVector3)},H$f.moveRight=function(H$f){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=H$f,this.transform.translate(this._tempVector3)},H$f.moveVertical=function(H$f){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=H$f,this.transform.translate(this._tempVector3,!1)},H$f._addSelfRenderObjects=function(){var H$f=this.scene._cameraPool,H$K=H$f.length;if(0<H$K){for(var H$Y=H$K-1;0<=H$Y;H$Y--)if(this.renderingOrder<=H$f[H$Y].renderingOrder){H$f.splice(H$Y+1,0,this);break}}else H$f.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},H$f._clearSelfRenderObjects=function(){var H$f=this.scene._cameraPool;H$f.splice(H$f.indexOf(this),1)},H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,H$C.stage.off("resize",this,this._onScreenSizeChanged),H$K.prototype.destroy.call(this,H$f)},H$B(0,H$f,"sky",function(){return this._sky},function(H$f){(this._sky=H$f)._ownerCamera=this}),H$B(0,H$f,"forward",function(){var H$f=this.transform.worldMatrix.elements,H$K=this._forward.elements;return H$K[0]=-H$f[8],H$K[1]=-H$f[9],H$K[2]=-H$f[10],this._forward}),H$B(0,H$f,"position",function(){var H$f=this.transform.worldMatrix.elements,H$K=this._position.elements;return H$K[0]=H$f[12],H$K[1]=H$f[13],H$K[2]=H$f[14],this._position}),H$B(0,H$f,"renderTarget",function(){return this._renderTarget},function(H$f){null!=(this._renderTarget=H$f)&&(this._renderTargetSize=H$f.size)}),H$B(0,H$f,"up",function(){var H$f=this.transform.worldMatrix.elements,H$K=this._up.elements;return H$K[0]=H$f[4],H$K[1]=H$f[5],H$K[2]=H$f[6],this._up}),H$B(0,H$f,"right",function(){var H$f=this.transform.worldMatrix.elements,H$K=this._right.elements;return H$K[0]=H$f[0],H$K[1]=H$f[1],H$K[2]=H$f[2],this._right}),H$B(0,H$f,"renderTargetSize",function(){return this._renderTargetSize},function(H$f){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=H$f,this._calculateProjectionMatrix()}),H$B(0,H$f,"fieldOfView",function(){return this._fieldOfView},function(H$f){this._fieldOfView=H$f,this._calculateProjectionMatrix()}),H$B(0,H$f,"nearPlane",function(){return this._nearPlane},function(H$f){this._nearPlane=H$f,this._calculateProjectionMatrix()}),H$B(0,H$f,"farPlane",function(){return this._farPlane},function(H$f){this._farPlane=H$f,this._calculateProjectionMatrix()}),H$B(0,H$f,"orthographic",function(){return this._orthographic},function(H$f){this._orthographic=H$f,this._calculateProjectionMatrix()}),H$B(0,H$f,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(H$f){this._orthographicVerticalSize=H$f,this._calculateProjectionMatrix()}),H$B(0,H$f,"renderingOrder",function(){return this._renderingOrder},function(H$f){this._renderingOrder=H$f,this._sortCamerasByRenderingOrder()}),H$Y.CAMERAPOS=0,H$Y.VIEWMATRIX=1,H$Y.PROJECTMATRIX=2,H$Y.VPMATRIX=3,H$Y.VPMATRIX_NO_TRANSLATE=4,H$Y.CAMERADIRECTION=5,H$Y.CAMERAUP=6,H$Y.ENVIRONMENTDIFFUSE=7,H$Y.ENVIRONMENTSPECULAR=8,H$Y.SIMLODINFO=9,H$Y.DIFFUSEIRRADMATR=10,H$Y.DIFFUSEIRRADMATG=11,H$Y.DIFFUSEIRRADMATB=12,H$Y.HDREXPOSURE=13,H$Y.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",H$Y.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",H$Y.CLEARFLAG_SOLIDCOLOR=0,H$Y.CLEARFLAG_SKY=1,H$Y.CLEARFLAG_DEPTHONLY=2,H$Y.CLEARFLAG_NONE=3,H$Z(H$Y,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new H$fK(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new H$fK},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new H$fK}]),H$Y}(H$eK),H$jK=function(H$Y){function H$K(H$f){this._render=null,this._geometryFilter=null,H$K.__super.call(this,H$f)}H$l(H$K,"laya.d3.core.RenderableSprite3D",H$Y);var H$f=H$K.prototype;return H$f._addToInitStaticBatchManager=function(){},H$f._setBelongScene=function(H$f){H$Y.prototype._setBelongScene.call(this,H$f),H$f._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},H$f._setUnBelongScene=function(){var H$f=this._scene._renderableSprite3Ds,H$K=H$f.indexOf(this);H$f.splice(H$K,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),H$Y.prototype._setUnBelongScene.call(this)},H$f._update=function(H$f){(H$f.owner=this)._activeInHierarchy&&(this._updateComponents(H$f),this._render._updateOctreeNode(),this._lateUpdateComponents(H$f),H$I.spriteCount++,this._childs.length&&this._updateChilds(H$f))},H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$Y.prototype.destroy.call(this,H$f),this._render._destroy(),this._render=null},H$K.__init__=function(){H$K.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=H$K.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),H$K.SAHDERDEFINE_LIGHTMAP=H$K.shaderDefines.registerDefine("LIGHTMAP")},H$K.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,H$K.SAHDERDEFINE_LIGHTMAP=4,H$K.LIGHTMAPSCALEOFFSET=2,H$K.LIGHTMAP=3,H$Z(H$K,["shaderDefines",function(){return this.shaderDefines=new H$UK}]),H$K}(H$eK),H$cK=(function(H$f){function H$X(H$f,H$K,H$Y){this._long=NaN,this._width=NaN,this._height=NaN,void 0===H$f&&(H$f=1),void 0===H$K&&(H$K=1),void 0===H$Y&&(H$Y=1),H$X.__super.call(this),this._long=H$f,this._width=H$K,this._height=H$Y,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}H$l(H$X,"laya.d3.resource.models.BoxMesh",H$JK);var H$K=H$X.prototype;H$K.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var H$f=H$Rf.vertexDeclaration,H$K=(H$f.vertexStride,this._long/2),H$Y=this._height/2,H$X=this._width/2,H$L=new Float32Array([-H$K,H$Y,-H$X,0,1,0,0,0,H$K,H$Y,-H$X,0,1,0,1,0,H$K,H$Y,H$X,0,1,0,1,1,-H$K,H$Y,H$X,0,1,0,0,1,-H$K,-H$Y,-H$X,0,-1,0,0,1,H$K,-H$Y,-H$X,0,-1,0,1,1,H$K,-H$Y,H$X,0,-1,0,1,0,-H$K,-H$Y,H$X,0,-1,0,0,0,-H$K,H$Y,-H$X,-1,0,0,0,0,-H$K,H$Y,H$X,-1,0,0,1,0,-H$K,-H$Y,H$X,-1,0,0,1,1,-H$K,-H$Y,-H$X,-1,0,0,0,1,H$K,H$Y,-H$X,1,0,0,1,0,H$K,H$Y,H$X,1,0,0,0,0,H$K,-H$Y,H$X,1,0,0,0,1,H$K,-H$Y,-H$X,1,0,0,1,1,-H$K,H$Y,H$X,0,0,1,0,0,H$K,H$Y,H$X,0,0,1,1,0,H$K,-H$Y,H$X,0,0,1,1,1,-H$K,-H$Y,H$X,0,0,1,0,1,-H$K,H$Y,-H$X,0,0,-1,1,0,H$K,H$Y,-H$X,0,0,-1,0,0,H$K,-H$Y,-H$X,0,0,-1,0,1,-H$K,-H$Y,-H$X,0,0,-1,1,1]),H$H=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new H$PK(H$f,this._numberVertices,35044,!0),this._indexBuffer=new H$qK("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(H$L),this._indexBuffer.setData(H$H),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},H$B(0,H$K,"long",function(){return this._long},function(H$f){this._long!==H$f&&(this._long=H$f,this.releaseResource(),this.activeResource())}),H$B(0,H$K,"width",function(){return this._width},function(H$f){this._width!==H$f&&(this._width=H$f,this.releaseResource(),this.activeResource())}),H$B(0,H$K,"height",function(){return this._height},function(H$f){this._height!==H$f&&(this._height=H$f,this.releaseResource(),this.activeResource())})}(),function(H$f){function H$L(H$f,H$K,H$Y,H$X){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===H$f&&(H$f=10),void 0===H$K&&(H$K=10),void 0===H$Y&&(H$Y=10),void 0===H$X&&(H$X=10),H$L.__super.call(this),this._long=H$f,this._width=H$K,this._stacks=H$Y,this._slices=H$X,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}H$l(H$L,"laya.d3.resource.models.PlaneMesh",H$JK);var H$K=H$L.prototype;H$K.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var H$f=new Uint16Array(this._numberIndices),H$K=H$Rf.vertexDeclaration,H$Y=H$K.vertexStride/4,H$X=new Float32Array(this._numberVertices*H$Y),H$L=this._long/2,H$H=this._width/2,H$E=this._long/this._stacks,H$d=this._width/this._slices,H$O=0,H$i=0;H$i<=this._slices;H$i++)for(var H$U=0;H$U<=this._stacks;H$U++)H$X[H$O++]=H$U*H$E-H$L,H$X[H$O++]=0,H$X[H$O++]=H$i*H$d-H$H,H$X[H$O++]=0,H$X[H$O++]=1,H$X[H$O++]=0,H$X[H$O++]=1*H$U/this._stacks,H$X[H$O++]=1*H$i/this._slices;var H$Z=0;for(H$i=0;H$i<this._slices;H$i++)for(H$U=0;H$U<this._stacks;H$U++)H$f[H$Z++]=(H$i+1)*(this._stacks+1)+H$U,H$f[H$Z++]=H$i*(this._stacks+1)+H$U,H$f[H$Z++]=(H$i+1)*(this._stacks+1)+H$U+1,H$f[H$Z++]=H$i*(this._stacks+1)+H$U,H$f[H$Z++]=H$i*(this._stacks+1)+H$U+1,H$f[H$Z++]=(H$i+1)*(this._stacks+1)+H$U+1;this._vertexBuffer=new H$PK(H$K,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new H$qK("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(H$X),this._indexBuffer.setData(H$f),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},H$B(0,H$K,"long",function(){return this._long},function(H$f){this._long!==H$f&&(this._long=H$f,this.releaseResource(),this.activeResource())}),H$B(0,H$K,"width",function(){return this._width},function(H$f){this._width!==H$f&&(this._width=H$f,this.releaseResource(),this.activeResource())}),H$B(0,H$K,"stacks",function(){return this._stacks},function(H$f){this._stacks!==H$f&&(this._stacks=H$f,this.releaseResource(),this.activeResource())}),H$B(0,H$K,"slices",function(){return this._slices},function(H$f){this._slices!==H$f&&(this._slices=H$f,this.releaseResource(),this.activeResource())})}(),function(H$f){function H$E(H$f,H$K,H$Y){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=.3),void 0===H$Y&&(H$Y=1e3),this._viewMatrix=new H$fK,this._projectionMatrix=new H$fK,this._projectionViewMatrix=new H$fK,this._viewport=new H$OK(0,0,0,0),this._normalizedViewport=new H$OK(0,0,1,1),this._aspectRatio=H$f,this._boundFrustumUpdate=!0,this._boundFrustum=new H$gf(H$fK.DEFAULT),H$E.__super.call(this,H$K,H$Y),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}H$l(H$E,"laya.d3.core.Camera",H$vK);var H$K=H$E.prototype;return H$K._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},H$K._parseCustomProps=function(H$f,H$K,H$Y,H$X){var H$L=H$Y.clearColor;this.clearColor=new H$dK(H$L[0],H$L[1],H$L[2],H$L[3]);var H$H=H$Y.viewport;this.normalizedViewport=new H$OK(H$H[0],H$H[1],H$H[2],H$H[3])},H$K._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var H$f=this.orthographicVerticalSize*this.aspectRatio*.5,H$K=.5*this.orthographicVerticalSize;H$fK.createOrthoOffCenterRH(-H$f,H$f,-H$K,H$K,this.nearPlane,this.farPlane,this._projectionMatrix)}else H$fK.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},H$K._update=function(H$f){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,H$f)},H$K._renderCamera=function(H$f,H$K,H$Y){var H$X,H$L;H$Y.parallelSplitShadowMaps[0]&&H$Y._renderShadowMap(H$f,H$K,this),(H$K.camera=this)._prepareCameraToRender(),H$Y._preRenderUpdateComponents(H$K),H$X=H$K._viewMatrix=this.viewMatrix;var H$H=this._renderTarget;H$H?(H$H.start(),H$fK.multiply(H$vK._invertYScaleMatrix,this._projectionMatrix,H$vK._invertYProjectionMatrix),H$fK.multiply(H$vK._invertYScaleMatrix,this.projectionViewMatrix,H$vK._invertYProjectionViewMatrix),H$L=H$K._projectionMatrix=H$vK._invertYProjectionMatrix,H$K._projectionViewMatrix=H$vK._invertYProjectionViewMatrix):(H$L=H$K._projectionMatrix=this._projectionMatrix,H$K._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(H$X,H$L),H$K._viewport=this.viewport,H$Y._preRenderScene(H$f,H$K,this.boundFrustum),H$Y._clear(H$f,H$K),H$Y._renderScene(H$f,H$K),H$Y._postRenderUpdateComponents(H$K),H$H&&H$H.end()},H$K.viewportPointToRay=function(H$f,H$K){H$BK.calculateCursorRay(H$f,this.viewport,this._projectionMatrix,this.viewMatrix,null,H$K)},H$K.normalizedViewportPointToRay=function(H$f,H$K){var H$Y=H$E._tempVector20,H$X=this.viewport,H$L=H$f.elements,H$H=H$Y.elements;H$H[0]=H$L[0]*H$X.width,H$H[1]=H$L[1]*H$X.height,H$BK.calculateCursorRay(H$Y,this.viewport,this._projectionMatrix,this.viewMatrix,null,H$K)},H$K.worldToViewportPoint=function(H$f,H$K){H$fK.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(H$f,this._projectionViewMatrix,H$K);var H$Y=H$K.elements;H$Y[0]=H$Y[0]/H$C.stage.clientScaleX,H$Y[1]=H$Y[1]/H$C.stage.clientScaleY},H$K.worldToNormalizedViewportPoint=function(H$f,H$K){H$fK.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(H$f,this._projectionViewMatrix,H$K);var H$Y=H$K.elements;H$Y[0]=H$Y[0]/H$C.stage.clientScaleX,H$Y[1]=H$Y[1]/H$C.stage.clientScaleY},H$K.convertScreenCoordToOrthographicCoord=function(H$f,H$K){if(this._orthographic){var H$Y=H$u.clientWidth,H$X=H$u.clientHeight,H$L=this.orthographicVerticalSize*this.aspectRatio/H$Y,H$H=this.orthographicVerticalSize/H$X,H$E=H$f.elements,H$d=H$K.elements;return H$d[0]=(-H$Y/2+H$E[0])*H$L,H$d[1]=(H$X/2-H$E[1])*H$H,H$d[2]=(this.nearPlane-this.farPlane)*(H$E[2]+1)/2-this.nearPlane,H$EK.transformCoordinate(H$K,this.transform.worldMatrix,H$K),!0}return!1},H$B(0,H$K,"projectionViewMatrix",function(){return H$fK.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),H$B(0,H$K,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var H$f=this.viewport;return H$f.width/H$f.height},function(H$f){if(H$f<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=H$f,this._calculateProjectionMatrix()}),H$B(0,H$K,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),H$B(0,H$K,"needViewport",function(){var H$f=this.normalizedViewport;return 0===H$f.x&&0===H$f.y&&1===H$f.width&&1===H$f.height}),H$B(0,H$K,"viewport",function(){if(this._viewportExpressedInClipSpace){var H$f=this._normalizedViewport,H$K=this.renderTargetSize,H$Y=H$K.width,H$X=H$K.height;this._viewport.x=H$f.x*H$Y,this._viewport.y=H$f.y*H$X,this._viewport.width=H$f.width*H$Y,this._viewport.height=H$f.height*H$X}return this._viewport},function(H$f){if(null!=this.renderTarget&&(H$f.x<0||H$f.y<0||0==H$f.width||0==H$f.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=H$f,this._calculateProjectionMatrix()}),H$B(0,H$K,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var H$f=this._viewport,H$K=this.renderTargetSize,H$Y=H$K.width,H$X=H$K.height;this._normalizedViewport.x=H$f.x/H$Y,this._normalizedViewport.y=H$f.y/H$X,this._normalizedViewport.width=H$f.width/H$Y,this._normalizedViewport.height=H$f.height/H$X}return this._normalizedViewport},function(H$f){H$f.x<0&&(H$f.x=0,console.warn("Camera: viewport.x must large than 0.0.")),H$f.y<0&&(H$f.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<H$f.x+H$f.width&&(H$f.width=1-H$f.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<H$f.y+H$f.height&&(H$f.height=1-H$f.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=H$f,this._calculateProjectionMatrix()}),H$B(0,H$K,"projectionMatrix",function(){return this._projectionMatrix},function(H$f){this._projectionMatrix=H$f,this._useUserProjectionMatrix=!0}),H$B(0,H$K,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),H$Z(H$E,["_tempVector20",function(){return this._tempVector20=new H$HK}]),H$E}()),H$pK=function(H$Y){function H$X(H$f,H$K){H$X.__super.call(this,H$K),this._geometryFilter=new H$tK(this),this._render=new H$TK(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),H$f&&(this._geometryFilter.sharedMesh=H$f)instanceof laya.d3.resource.models.Mesh&&(H$f.loaded?this._render.sharedMaterials=H$f.materials:H$f.once("loaded",this,this._applyMeshMaterials))}H$l(H$X,"laya.d3.core.MeshSprite3D",H$Y);var H$f=H$X.prototype;return H$f._changeRenderObjectByMesh=function(H$f){var H$K=this._render._renderElements,H$Y=H$K[H$f];H$Y||(H$Y=H$K[H$f]=new H$aK),H$Y._render=this._render;var H$X=this._render.sharedMaterials[H$f];H$X||(H$X=H$WK.defaultMaterial);var H$L=this._geometryFilter.sharedMesh.getRenderElement(H$f);return H$Y._mainSortID=this._getSortID(H$L,H$X),H$Y._sprite3D=this,H$Y.renderObj=H$L,H$Y._material=H$X,H$Y},H$f._changeRenderObjectByMaterial=function(H$f,H$K){var H$Y=this._render._renderElements[H$f];H$K||(H$K=H$WK.defaultMaterial);var H$X=this._geometryFilter.sharedMesh.getRenderElement(H$f);return H$Y._mainSortID=this._getSortID(H$X,H$K),H$Y._sprite3D=this,H$Y.renderObj=H$X,H$Y._material=H$K,H$Y},H$f._changeRenderObjectsByMesh=function(){var H$f=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=H$f;for(var H$K=0;H$K<H$f;H$K++)this._changeRenderObjectByMesh(H$K)},H$f._onMeshChanged=function(H$f){var H$K=H$f.sharedMesh;H$K.loaded?this._changeRenderObjectsByMesh():H$K.once("loaded",this,this._onMeshLoaded)},H$f._onMeshLoaded=function(H$f){H$f===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},H$f._onMaterialChanged=function(H$f,H$K,H$Y){H$K<this._render._renderElements.length&&this._changeRenderObjectByMaterial(H$K,H$Y)},H$f._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},H$f._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},H$f._parseCustomProps=function(H$f,H$K,H$Y,H$X){var H$L=this.meshRender,H$H=H$Y.lightmapIndex;null!=H$H&&(H$L.lightmapIndex=H$H);var H$E,H$d,H$O=H$Y.lightmapScaleOffset;if(H$O&&(H$L.lightmapScaleOffset=new H$dK(H$O[0],H$O[1],H$O[2],H$O[3])),H$X.instanceParams)(H$E=H$X.instanceParams.loadPath)&&(H$d=H$A.getRes(H$K[H$E]),(this.meshFilter.sharedMesh=H$d).loaded?H$L.sharedMaterials=H$d.materials:H$d.once("loaded",this,this._applyMeshMaterials));else{(H$E=H$Y.meshPath)&&(H$d=H$A.getRes(H$K[H$E]),this.meshFilter.sharedMesh=H$d);var H$i=H$Y.materials;if(H$i){var H$U=H$L.sharedMaterials,H$Z=H$i.length;H$U.length=H$Z;for(var H$y=0;H$y<H$Z;H$y++)H$U[H$y]=H$A.getRes(H$K[H$i[H$y].path]);H$L.sharedMaterials=H$U}}},H$f._applyMeshMaterials=function(H$f){for(var H$K=this._render.sharedMaterials,H$Y=H$f.materials,H$X=0,H$L=H$Y.length;H$X<H$L;H$X++)H$K[H$X]||(H$K[H$X]=H$Y[H$X]);this._render.sharedMaterials=H$K},H$f._addToInitStaticBatchManager=function(){H$X._staticBatchManager._addInitBatchSprite(this)},H$f.cloneTo=function(H$f){var H$K=H$f;H$K._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var H$Y=this._render,H$X=H$K._render;H$X.enable=H$Y.enable,H$X.sharedMaterials=H$Y.sharedMaterials,H$X.castShadow=H$Y.castShadow;var H$L=H$Y.lightmapScaleOffset;H$L&&(H$X.lightmapScaleOffset=H$L.clone()),H$X.lightmapIndex=H$Y.lightmapIndex,H$X.receiveShadow=H$Y.receiveShadow,H$X.sortingFudge=H$Y.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,H$f)},H$f.destroy=function(H$f){if(void 0===H$f&&(H$f=!0),!this.destroyed){var H$K=this.meshFilter.sharedMesh;null!=H$K&&(H$K.loaded||H$K.off("loaded",this,this._applyMeshMaterials)),H$Y.prototype.destroy.call(this,H$f),this._geometryFilter._destroy()}},H$B(0,H$f,"meshFilter",function(){return this._geometryFilter}),H$B(0,H$f,"meshRender",function(){return this._render}),H$X.__init__=function(){H$Xf._staticBatchManagers.push(H$X._staticBatchManager)},H$X.load=function(H$f){return H$C.loader.create(H$f,null,null,H$X)},H$Z(H$X,["_staticBatchManager",function(){return this._staticBatchManager=new H$nK}]),H$X}(H$jK)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$f,H$K){"use strict";for(var H$Y in Object.defineProperty(H$K,"__esModule",{value:!0}),Laya){var H$X=Laya[H$Y];H$X&&H$X.__isclass&&(H$K[H$Y]=H$X)}}),function(H$f,H$K,H$Lf){H$Lf.un,H$Lf.uns;var H$Y=H$Lf.static,H$X=H$Lf.class,H$H=H$Lf.getset,H$$=H$Lf.__newvec,H$d=laya.maths.Bezier,H$Z=laya.utils.Browser,H$Rf=laya.utils.Byte,H$L=(laya.events.Event,laya.events.EventDispatcher),H$E=laya.display.Graphics,H$O=(laya.resource.HTMLCanvas,laya.utils.Handler),H$i=laya.net.Loader,H$y=laya.maths.MathUtil,H$Vf=laya.maths.Matrix,H$h=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),H$U=(laya.renders.RenderContext,laya.resource.Resource),H$l=laya.utils.RunDriver,H$Hf=laya.display.Sprite,H$B=laya.utils.Stat,H$tf=laya.resource.Texture,H$A=(laya.net.URL,laya.utils.Utils),H$V=function(){function H$f(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return H$X(H$f,"laya.ani.AnimationContent"),H$f}(),H$t=function(){function H$f(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return H$X(H$f,"laya.ani.AnimationNodeContent"),H$f}(),H$S=function(){function H$f(){}return H$X(H$f,"laya.ani.AnimationParser01"),H$f.parse=function(H$f,H$K){var H$Y=H$K.__getBuffer(),H$X=0,H$L=0,H$H=0,H$E=0,H$d=0,H$O=0,H$i=0,H$U=H$K.readUTFString();H$f._aniClassName=H$U;var H$Z,H$y=H$K.readUTFString().split("\n"),H$l=H$K.getUint8(),H$B=H$K.getUint32(),H$$=H$K.getUint32();0<H$B&&(H$Z=H$Y.slice(H$B,H$$));var H$h=new H$Rf(H$Z);for(0<H$$&&(H$f._publicExtData=H$Y.slice(H$$,H$Y.byteLength)),H$f._useParent=!!H$K.getUint8(),H$f._anis.length=H$l,H$X=0;H$X<H$l;H$X++){var H$A=H$f._anis[H$X]=new H$V;H$A.nodes=new Array;var H$x=H$A.name=H$y[H$K.getUint16()];H$f._aniMap[H$x]=H$X,H$A.bone3DMap={},H$A.playTime=H$K.getFloat32(),H$A.playTime<=0&&console.error("播放时间不能为0  url="+H$f.url+" name="+H$A.name);var H$S=H$A.nodes.length=H$K.getUint8();for(H$L=H$A.totalKeyframeDatasLength=0;H$L<H$S;H$L++){var H$z=H$A.nodes[H$L]=new H$t;H$z.childs=[];var H$C=H$K.getInt16();0<=H$C&&(H$z.name=H$y[H$C],H$A.bone3DMap[H$z.name]=H$L),H$z.keyFrame=new Array,H$z.parentIndex=H$K.getInt16(),-1==H$z.parentIndex?H$z.parent=null:H$z.parent=H$A.nodes[H$z.parentIndex],H$z.lerpType=H$K.getUint8();var H$s=H$K.getUint32();H$h.pos=H$s;var H$a=H$z.keyframeWidth=H$h.getUint16();if(H$A.totalKeyframeDatasLength+=H$a,0===H$z.lerpType||1===H$z.lerpType)for(H$z.interpolationMethod=[],H$z.interpolationMethod.length=H$a,H$H=0;H$H<H$a;H$H++)H$z.interpolationMethod[H$H]=H$e.interpolation[H$h.getUint8()];null!=H$z.parent&&H$z.parent.childs.push(H$z);var H$I=H$K.getUint16();0<H$I&&(H$z.extenData=H$Y.slice(H$K.pos,H$K.pos+H$I),H$K.pos+=H$I);var H$n,H$_=H$K.getUint16(),H$G=0;for(H$H=0,H$E=H$z.keyFrame.length=H$_;H$H<H$E;H$H++){if((H$n=H$z.keyFrame[H$H]=new H$T).duration=H$K.getFloat32(),H$n.startTime=H$G,2===H$z.lerpType){H$n.interpolationData=[];var H$m,H$R=H$K.getUint8();switch(H$m=H$K.getFloat32()){case 254:for(H$n.interpolationData.length=H$a,H$i=0;H$i<H$a;H$i++)H$n.interpolationData[H$i]=0;break;case 255:for(H$n.interpolationData.length=H$a,H$i=0;H$i<H$a;H$i++)H$n.interpolationData[H$i]=5;break;default:for(H$n.interpolationData.push(H$m),H$O=1;H$O<H$R;H$O++)H$n.interpolationData.push(H$K.getFloat32())}}for(H$n.data=new Float32Array(H$a),H$d=0;H$d<H$a;H$d++)H$n.data[H$d]=H$K.getFloat32(),-1e-8<H$n.data[H$d]&&H$n.data[H$d]<1e-8&&(H$n.data[H$d]=0);H$G+=H$n.duration}H$n.startTime=H$A.playTime,H$z.playTime=H$A.playTime,H$f._calculateKeyFrame(H$z,H$_,H$a)}}},H$f}(),H$z=function(){function H$C(){}return H$X(H$C,"laya.ani.AnimationParser02"),H$C.READ_DATA=function(){H$C._DATA.offset=H$C._reader.getUint32(),H$C._DATA.size=H$C._reader.getUint32()},H$C.READ_BLOCK=function(){for(var H$f=H$C._BLOCK.count=H$C._reader.getUint16(),H$K=H$C._BLOCK.blockStarts=[],H$Y=H$C._BLOCK.blockLengths=[],H$X=0;H$X<H$f;H$X++)H$K.push(H$C._reader.getUint32()),H$Y.push(H$C._reader.getUint32())},H$C.READ_STRINGS=function(){var H$f=H$C._reader.getUint32(),H$K=H$C._reader.getUint16(),H$Y=H$C._reader.pos;H$C._reader.pos=H$f+H$C._DATA.offset;for(var H$X=0;H$X<H$K;H$X++)H$C._strings[H$X]=H$C._reader.readUTFString();H$C._reader.pos=H$Y},H$C.parse=function(H$f,H$K){H$C._templet=H$f;(H$C._reader=H$K).__getBuffer();H$C.READ_DATA(),H$C.READ_BLOCK(),H$C.READ_STRINGS();for(var H$Y=0,H$X=H$C._BLOCK.count;H$Y<H$X;H$Y++){var H$L=H$K.getUint16(),H$H=H$C._strings[H$L],H$E=H$C["READ_"+H$H];if(null==H$E)throw new Error("model file err,no this function:"+H$L+" "+H$H);H$E.call()}},H$C.READ_ANIMATIONS=function(){var H$f=H$C._reader,H$K=H$f.__getBuffer(),H$Y=0,H$X=0,H$L=0,H$H=0,H$E=H$f.getUint16(),H$d=[];for(H$d.length=H$E,H$Y=0;H$Y<H$E;H$Y++)H$d[H$Y]=H$e.interpolation[H$f.getByte()];var H$O=H$f.getUint8();for(H$C._templet._anis.length=H$O,H$Y=0;H$Y<H$O;H$Y++){var H$i=H$C._templet._anis[H$Y]={};H$i.nodes=new Array;var H$U=H$i.name=H$C._strings[H$f.getUint16()];H$C._templet._aniMap[H$U]=H$Y,H$i.bone3DMap={},H$i.playTime=H$f.getFloat32();var H$Z=H$i.nodes.length=H$f.getInt16();for(H$X=H$i.totalKeyframeDatasLength=0;H$X<H$Z;H$X++){var H$y=H$i.nodes[H$X]={};H$y.keyframeWidth=H$E,H$y.childs=[];var H$l=H$f.getUint16();0<=H$l&&(H$y.name=H$C._strings[H$l],H$i.bone3DMap[H$y.name]=H$X),H$y.keyFrame=new Array,H$y.parentIndex=H$f.getInt16(),-1==H$y.parentIndex?H$y.parent=null:H$y.parent=H$i.nodes[H$y.parentIndex],H$i.totalKeyframeDatasLength+=H$E,H$y.interpolationMethod=H$d,null!=H$y.parent&&H$y.parent.childs.push(H$y);var H$B=H$f.getUint16(),H$$=null,H$h=null;for(H$L=0,H$H=H$y.keyFrame.length=H$B;H$L<H$H;H$L++){(H$$=H$y.keyFrame[H$L]={}).startTime=H$f.getFloat32(),H$h&&(H$h.duration=H$$.startTime-H$h.startTime);var H$A=H$C._DATA.offset,H$x=H$f.getUint32(),H$S=4*H$E,H$z=H$K.slice(H$A+H$x,H$A+H$x+H$S);H$$.data=new Float32Array(H$z),H$h=H$$}H$$.duration=0,H$y.playTime=H$i.playTime,H$C._templet._calculateKeyFrame(H$y,H$B,H$E)}}},H$C._templet=null,H$C._reader=null,H$C._strings=[],H$Y(H$C,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),H$C}(),H$Tf=(function(){function H$f(){}H$X(H$f,"laya.ani.AnimationState"),H$f.stopped=0,H$f.paused=1,H$f.playing=2}(),function(){function H$L(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new H$jf,this.resultMatrix=new H$Vf,this._children=[]}H$X(H$L,"laya.ani.bone.Bone");var H$f=H$L.prototype;return H$f.setTempMatrix=function(H$f){this._tempMatrix=H$f;var H$K,H$Y=0;for(H$Y=0,H$K=this._children.length;H$Y<H$K;H$Y++)this._children[H$Y].setTempMatrix(this._tempMatrix)},H$f.update=function(H$f){var H$K;if(this.rotation=this.transform.skX,H$f)H$K=this.resultTransform.getMatrix(),H$Vf.mul(H$K,H$f,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)H$K=this.resultTransform.getMatrix(),H$Vf.mul(H$K,this.parentBone.resultMatrix,this.resultMatrix);else{var H$Y=this.parentBone,H$X=NaN,H$L=NaN,H$H=NaN,H$E=this.parentBone.resultMatrix;H$K=this.resultTransform.getMatrix();var H$d=H$E.a*H$K.tx+H$E.c*H$K.ty+H$E.tx,H$O=H$E.b*H$K.tx+H$E.d*H$K.ty+H$E.ty,H$i=new H$Vf;this.inheritRotation?(H$X=Math.atan2(H$Y.resultMatrix.b,H$Y.resultMatrix.a),H$L=Math.cos(H$X),H$H=Math.sin(H$X),H$i.setTo(H$L,H$H,-H$H,H$L,0,0),H$Vf.mul(this._tempMatrix,H$i,H$Vf.TEMP),H$Vf.TEMP.copyTo(H$i),H$K=this.resultTransform.getMatrix(),H$Vf.mul(H$K,H$i,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,H$K=this.resultTransform.getMatrix(),H$Vf.TEMP.identity(),H$Vf.TEMP.d=this.d,H$Vf.mul(H$K,H$Vf.TEMP,this.resultMatrix)),this.resultMatrix.tx=H$d,this.resultMatrix.ty=H$O}else(H$K=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var H$U,H$Z=0;for(H$Z=0,H$U=this._children.length;H$Z<H$U;H$Z++)this._children[H$Z].update()},H$f.updateChild=function(){var H$f,H$K=0;for(H$K=0,H$f=this._children.length;H$K<H$f;H$K++)this._children[H$K].update()},H$f.setRotation=function(H$f){this._sprite&&(this._sprite.rotation=180*H$f/Math.PI)},H$f.updateDraw=function(H$f,H$K){H$L.ShowBones&&!H$L.ShowBones[this.name]||(this._sprite||(this._sprite=new H$Hf,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),H$Lf.stage.addChild(this._sprite)),this._sprite.x=H$f+this.resultMatrix.tx,this._sprite.y=H$K+this.resultMatrix.ty);var H$Y,H$X=0;for(H$X=0,H$Y=this._children.length;H$X<H$Y;H$X++)this._children[H$X].updateDraw(H$f,H$K)},H$f.addChild=function(H$f){this._children.push(H$f),H$f.parentBone=this},H$f.findBone=function(H$f){if(this.name==H$f)return this;var H$K,H$Y,H$X=0;for(H$X=0,H$K=this._children.length;H$X<H$K;H$X++)if(H$Y=this._children[H$X].findBone(H$f))return H$Y;return null},H$f.localToWorld=function(H$f){var H$K=H$f[0],H$Y=H$f[1];H$f[0]=H$K*this.resultMatrix.a+H$Y*this.resultMatrix.c+this.resultMatrix.tx,H$f[1]=H$K*this.resultMatrix.b+H$Y*this.resultMatrix.d+this.resultMatrix.ty},H$L.ShowBones={},H$L}()),H$kf=function(){function H$$(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}H$X(H$$,"laya.ani.bone.BoneSlot");var H$f=H$$.prototype;return H$f.showSlotData=function(H$f,H$K){void 0===H$K&&(H$K=!0),this.currSlotData=H$f,H$K&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},H$f.showDisplayByName=function(H$f){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(H$f))},H$f.replaceDisplayByName=function(H$f,H$K){if(this.currSlotData){var H$Y;H$Y=this.currSlotData.getDisplayByName(H$f);var H$X;H$X=this.currSlotData.getDisplayByName(H$K),this.replaceDisplayByIndex(H$Y,H$X)}},H$f.replaceDisplayByIndex=function(H$f,H$K){this.currSlotData&&(this._replaceDic[H$f]=H$K,this.displayIndex==H$f&&this.showDisplayByIndex(H$f))},H$f.showDisplayByIndex=function(H$f){if(null!=this._replaceDic[H$f]&&(H$f=this._replaceDic[H$f]),this.currSlotData&&-1<H$f&&H$f<this.currSlotData.displayArr.length){if(this.displayIndex=H$f,this.currDisplayData=this.currSlotData.displayArr[H$f],this.currDisplayData){var H$K=this.currDisplayData.name;this.currTexture=this.templet.getTexture(H$K),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!H$h.isConchApp||H$h.isConchApp&&"0.9.15"<H$Hf.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},H$f.replaceSkin=function(H$f){this._diyTexture=H$f,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},H$f.setParentMatrix=function(H$f){this._parentMatrix=H$f},H$f.draw=function(H$f,H$K,H$Y,H$X){if(void 0===H$Y&&(H$Y=!1),void 0===H$X&&(H$X=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var H$L,H$H=this.currTexture;switch(this._diyTexture&&(H$H=this._diyTexture),this.currDisplayData.type){case 0:if(H$f){var H$E=this.getDisplayMatrix();if(this._parentMatrix){var H$d=!1;if(H$E){var H$O;if(H$Vf.mul(H$E,this._parentMatrix,H$Vf.TEMP),H$O=H$Y?(null==this._resultMatrix&&(this._resultMatrix=new H$Vf),this._resultMatrix):new H$Vf,!H$h.isWebGL&&this.currDisplayData.uvs||H$h.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var H$i=H$$._tempMatrix;H$i.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(H$i.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(H$d=!0,H$i.rotate(-Math.PI/2)),H$Vf.mul(H$i,H$Vf.TEMP,H$O)}else H$Vf.TEMP.copyTo(H$O);H$d?H$f.drawTexture(H$H,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,H$O):H$f.drawTexture(H$H,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,H$O)}}}break;case 1:if(null==(H$L=H$Y?(null==this._skinSprite&&(this._skinSprite=H$$.createSkinMesh()),this._skinSprite):H$$.createSkinMesh()))return;var H$U;if(null==this.currDisplayData.bones){var H$Z,H$y=this.currDisplayData.weights;this.deformData&&(H$y=this.deformData),H$Z=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=H$a.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=H$a.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=H$y;this.currDisplayData.triangles.length;H$U=this.currDisplayData.triangles,H$L.init2(H$H,null,H$U,this._mVerticleArr,H$Z);var H$l,H$B=this.getDisplayMatrix();if(this._parentMatrix)if(H$B)H$Vf.mul(H$B,this._parentMatrix,H$Vf.TEMP),H$l=H$Y?(null==this._resultMatrix&&(this._resultMatrix=new H$Vf),this._resultMatrix):new H$Vf,H$Vf.TEMP.copyTo(H$l),H$L.transform=H$l}else this.skinMesh(H$K,H$L,H$X);H$f.drawSkin(H$L);break;case 2:if(null==(H$L=H$Y?(null==this._skinSprite&&(this._skinSprite=H$$.createSkinMesh()),this._skinSprite):H$$.createSkinMesh()))return;this.skinMesh(H$K,H$L,H$X),H$f.drawSkin(H$L)}}},H$f.skinMesh=function(H$f,H$K,H$Y){var H$X,H$L=this.currTexture,H$H=this.currDisplayData.bones;H$X=this._diyTexture?(H$L=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=H$a.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=H$a.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var H$E,H$d,H$O=this.currDisplayData.weights,H$i=this.currDisplayData.triangles,H$U=0,H$Z=0,H$y=0,H$l=NaN,H$B=NaN,H$$=0,H$h=0,H$A=[],H$x=0,H$S=0;if(this.deformData&&0<this.deformData.length){var H$z=0;for(H$x=0,H$S=H$H.length;H$x<H$S;){for(H$y=H$H[H$x++]+H$x,H$Z=H$U=0;H$x<H$y;H$x++)H$d=H$f[H$H[H$x]],H$l=H$O[H$$]+this.deformData[H$z++],H$B=H$O[H$$+1]+this.deformData[H$z++],H$h=H$O[H$$+2],H$U+=(H$l*H$d.a+H$B*H$d.c+H$d.tx)*H$h,H$Z+=(H$l*H$d.b+H$B*H$d.d+H$d.ty)*H$h,H$$+=3;H$A.push(H$U,H$Z)}}else for(H$x=0,H$S=H$H.length;H$x<H$S;){for(H$y=H$H[H$x++]+H$x,H$Z=H$U=0;H$x<H$y;H$x++)H$d=H$f[H$H[H$x]],H$l=H$O[H$$],H$B=H$O[H$$+1],H$h=H$O[H$$+2],H$U+=(H$l*H$d.a+H$B*H$d.c+H$d.tx)*H$h,H$Z+=(H$l*H$d.b+H$B*H$d.d+H$d.ty)*H$h,H$$+=3;H$A.push(H$U,H$Z)}this._mVerticleArr=H$A,H$E=H$i,H$K.init2(H$L,null,H$E,this._mVerticleArr,H$X)},H$f.drawBonePoint=function(H$f){H$f&&this._parentMatrix&&H$f.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},H$f.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},H$f.getMatrix=function(){return this._resultMatrix},H$f.copy=function(){var H$f=new H$$;return H$f.type="copy",H$f.name=this.name,H$f.attachmentName=this.attachmentName,H$f.srcDisplayIndex=this.srcDisplayIndex,H$f.parent=this.parent,H$f.displayIndex=this.displayIndex,H$f.templet=this.templet,H$f.currSlotData=this.currSlotData,H$f.currTexture=this.currTexture,H$f.currDisplayData=this.currDisplayData,H$f},H$$.createSkinMesh=function(){return H$h.isWebGL||H$h.isConchApp?H$l.skinAniSprite():(H$h.isWebGL,null)},H$Y(H$$,["_tempMatrix",function(){return this._tempMatrix=new H$Vf}]),H$$}(),H$ef=function(){function H$f(){this.skinName=null,this.deformSlotDataList=[]}return H$X(H$f,"laya.ani.bone.DeformAniData"),H$f}(),H$Qf=function(){function H$f(){this.deformSlotDisplayList=[]}return H$X(H$f,"laya.ani.bone.DeformSlotData"),H$f}(),H$Wf=function(){function H$f(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}H$X(H$f,"laya.ani.bone.DeformSlotDisplayData");var H$K=H$f.prototype;return H$K.binarySearch1=function(H$f,H$K){var H$Y=0,H$X=H$f.length-2;if(0==H$X)return 1;for(var H$L=H$X>>>1;;){if(H$f[Math.floor(H$L+1)]<=H$K?H$Y=H$L+1:H$X=H$L,H$Y==H$X)return H$Y+1;H$L=H$Y+H$X>>>1}return 0},H$K.apply=function(H$f,H$K,H$Y){if(void 0===H$Y&&(H$Y=1),H$f+=.05,!(this.timeList.length<=0)){var H$X=0;if(!(H$f<this.timeList[0])){var H$L=this.vectices[0].length,H$H=[],H$E=this.binarySearch1(this.timeList,H$f);if(this.frameIndex=H$E,H$f>=this.timeList[this.timeList.length-1]){var H$d=this.vectices[this.vectices.length-1];if(H$Y<1)for(H$X=0;H$X<H$L;H$X++)H$H[H$X]+=(H$d[H$X]-H$H[H$X])*H$Y;else for(H$X=0;H$X<H$L;H$X++)H$H[H$X]=H$d[H$X];this.deformData=H$H}else{this.tweenKeyList[this.frameIndex];var H$O=this.vectices[this.frameIndex-1],H$i=this.vectices[this.frameIndex],H$U=this.timeList[this.frameIndex-1],H$Z=this.timeList[this.frameIndex];H$Y=this.tweenKeyList[H$E-1]?(H$f-H$U)/(H$Z-H$U):0;var H$y=NaN;for(H$X=0;H$X<H$L;H$X++)H$y=H$O[H$X],H$H[H$X]=H$y+(H$i[H$X]-H$y)*H$Y;this.deformData=H$H}}}},H$f}(),H$qf=function(){function H$f(){this.time=NaN,this.drawOrder=[]}return H$X(H$f,"laya.ani.bone.DrawOrderData"),H$f}(),H$Pf=function(){function H$f(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return H$X(H$f,"laya.ani.bone.EventData"),H$f}(),H$x=function(){function H$Xf(H$f,H$K){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=H$f,this._targetBone=H$K[H$f.targetBoneIndex],this.isSpine=H$f.isSpine,null==this._bones&&(this._bones=[]);for(var H$Y=this._bones.length=0,H$X=H$f.boneIndexs.length;H$Y<H$X;H$Y++)this._bones.push(H$K[H$f.boneIndexs[H$Y]]);this.name=H$f.name,this.mix=H$f.mix,this.bendDirection=H$f.bendDirection}H$X(H$Xf,"laya.ani.bone.IkConstraint");var H$f=H$Xf.prototype;return H$f.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},H$f._applyIk1=function(H$f,H$K,H$Y,H$X){var H$L=H$f.parentBone,H$H=1/(H$L.resultMatrix.a*H$L.resultMatrix.d-H$L.resultMatrix.b*H$L.resultMatrix.c),H$E=H$K-H$L.resultMatrix.tx,H$d=H$Y-H$L.resultMatrix.ty,H$O=(H$E*H$L.resultMatrix.d-H$d*H$L.resultMatrix.c)*H$H-H$f.transform.x,H$i=(H$d*H$L.resultMatrix.a-H$E*H$L.resultMatrix.b)*H$H-H$f.transform.y,H$U=Math.atan2(H$i,H$O)*H$Xf.radDeg-0-H$f.transform.skX;H$f.transform.scX<0&&(H$U+=180),180<H$U?H$U-=360:H$U<-180&&(H$U+=360),H$f.transform.skX=H$f.transform.skY=H$f.transform.skX+H$U*H$X,H$f.update()},H$f.updatePos=function(H$f,H$K){this._sp&&this._sp.pos(H$f,H$K)},H$f._applyIk2=function(H$f,H$K,H$Y,H$X,H$L,H$H){if(0!=H$H){var H$E=H$f.resultTransform.x,H$d=H$f.resultTransform.y,H$O=H$f.transform.scX,H$i=H$f.transform.scY,H$U=H$K.transform.scX,H$Z=0,H$y=0,H$l=0;H$l=H$O<0?(H$O=-H$O,H$Z=180,-1):(H$Z=0,1),H$i<0&&(H$i=-H$i,H$l=-H$l),H$y=H$U<0?(H$U=-H$U,180):0;var H$B=H$K.resultTransform.x,H$$=NaN,H$h=NaN,H$A=NaN,H$x=H$f.resultMatrix.a,H$S=H$f.resultMatrix.c,H$z=H$f.resultMatrix.b,H$C=H$f.resultMatrix.d,H$s=Math.abs(H$O-H$i)<=1e-4;H$A=H$s?(H$h=H$x*H$B+H$S*(H$$=H$K.resultTransform.y)+H$f.resultMatrix.tx,H$z*H$B+H$C*H$$+H$f.resultMatrix.ty):(H$$=0,H$h=H$x*H$B+H$f.resultMatrix.tx,H$z*H$B+H$f.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new H$Hf,H$Lf.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(H$Y,H$X,15,"#ffff00"),this._sp.graphics.drawCircle(H$h,H$A,15,"#ff00ff")),H$f.setRotation(Math.atan2(H$A-H$f.resultMatrix.ty,H$h-H$f.resultMatrix.tx));var H$a=H$f.parentBone;H$x=H$a.resultMatrix.a,H$S=H$a.resultMatrix.c,H$z=H$a.resultMatrix.b;var H$I=1/(H$x*(H$C=H$a.resultMatrix.d)-H$S*H$z),H$n=H$Y-H$a.resultMatrix.tx,H$_=H$X-H$a.resultMatrix.ty,H$G=(H$n*H$C-H$_*H$S)*H$I-H$E,H$m=(H$_*H$x-H$n*H$z)*H$I-H$d,H$R=((H$n=H$h-H$a.resultMatrix.tx)*H$C-(H$_=H$A-H$a.resultMatrix.ty)*H$S)*H$I-H$E,H$V=(H$_*H$x-H$n*H$z)*H$I-H$d,H$t=Math.sqrt(H$R*H$R+H$V*H$V),H$T=H$K.length*H$U,H$k=NaN,H$e=NaN;if(H$s){var H$Q=(H$G*H$G+H$m*H$m-H$t*H$t-(H$T*=H$O)*H$T)/(2*H$t*H$T);H$Q<-1?H$Q=-1:1<H$Q&&(H$Q=1),H$e=Math.acos(H$Q)*H$L,H$x=H$t+H$T*H$Q,H$S=H$T*Math.sin(H$e),H$k=Math.atan2(H$m*H$x-H$G*H$S,H$G*H$x+H$m*H$S)}else{var H$W=(H$x=H$O*H$T)*H$x,H$q=(H$S=H$i*H$T)*H$S,H$P=H$G*H$G+H$m*H$m,H$b=Math.atan2(H$m,H$G),H$J=-2*H$q*H$t,H$M=H$q-H$W;if(0<(H$C=H$J*H$J-4*H$M*(H$z=H$q*H$t*H$t+H$W*H$P-H$W*H$q))){var H$w=Math.sqrt(H$C);H$J<0&&(H$w=-H$w);var H$r=(H$w=-(H$J+H$w)/2)/H$M,H$v=H$z/H$w,H$j=Math.abs(H$r)<Math.abs(H$v)?H$r:H$v;H$j*H$j<=H$P&&(H$_=Math.sqrt(H$P-H$j*H$j)*H$L,H$k=H$b-Math.atan2(H$_,H$j),H$e=Math.atan2(H$_/H$i,(H$j-H$t)/H$O))}var H$c=0,H$p=Number.MAX_VALUE,H$u=0,H$D=0,H$g=0,H$N=0,H$o=0,H$F=0;H$N<(H$C=(H$n=H$t+H$x)*H$n)&&(H$g=0,H$N=H$C,H$o=H$n),(H$C=(H$n=H$t-H$x)*H$n)<H$p&&(H$c=Math.PI,H$p=H$C,H$u=H$n);var H$ff=Math.acos(-H$x*H$t/(H$W-H$q));(H$C=(H$n=H$x*Math.cos(H$ff)+H$t)*H$n+(H$_=H$S*Math.sin(H$ff))*H$_)<H$p&&(H$c=H$ff,H$p=H$C,H$u=H$n,H$D=H$_),H$N<H$C&&(H$g=H$ff,H$N=H$C,H$o=H$n,H$F=H$_),H$e=H$P<=(H$p+H$N)/2?(H$k=H$b-Math.atan2(H$D*H$L,H$u),H$c*H$L):(H$k=H$b-Math.atan2(H$F*H$L,H$o),H$g*H$L)}var H$Kf=Math.atan2(H$$,H$B)*H$l,H$Yf=H$f.resultTransform.skX;180<(H$k=(H$k-H$Kf)*H$Xf.radDeg+H$Z-H$Yf)?H$k-=360:H$k<-180&&(H$k+=360),H$f.resultTransform.x=H$E,H$f.resultTransform.y=H$d,H$f.resultTransform.skX=H$f.resultTransform.skY=H$Yf+H$k*H$H,H$Yf=H$K.resultTransform.skX,180<(H$e=((H$e+H$Kf)*H$Xf.radDeg-0)*H$l+H$y-(H$Yf%=360))?H$e-=360:H$e<-180&&(H$e+=360),H$K.resultTransform.x=H$B,H$K.resultTransform.y=H$$,H$K.resultTransform.skX=H$K.resultTransform.skY=H$K.resultTransform.skY+H$e*H$H,H$f.update()}},H$f._applyIk3=function(H$f,H$K,H$Y,H$X,H$L,H$H){if(0!=H$H){var H$E,H$d,H$O=H$K.resultMatrix.a*H$K.length,H$i=H$K.resultMatrix.b*H$K.length,H$U=H$O*H$O+H$i*H$i,H$Z=Math.sqrt(H$U),H$y=H$f.resultMatrix.tx,H$l=H$f.resultMatrix.ty,H$B=H$K.resultMatrix.tx,H$$=H$K.resultMatrix.ty,H$h=H$B-H$y,H$A=H$$-H$l,H$x=H$h*H$h+H$A*H$A,H$S=Math.sqrt(H$x),H$z=(H$h=H$Y-H$f.resultMatrix.tx)*H$h+(H$A=H$X-H$f.resultMatrix.ty)*H$A,H$C=Math.sqrt(H$z);if(H$Z+H$S<=H$C||H$C+H$Z<=H$S||H$C+H$S<=H$Z){var H$s=NaN;H$B=H$y+(H$s=H$Z+H$S<=H$C?1:-1)*(H$Y-H$y)*H$S/H$C,H$$=H$l+H$s*(H$X-H$l)*H$S/H$C}else{var H$a=(H$x-H$U+H$z)/(2*H$z),H$I=Math.sqrt(H$x-H$a*H$a*H$z)/H$C,H$n=H$y+H$h*H$a,H$_=H$l+H$A*H$a,H$G=-H$A*H$I,H$m=H$h*H$I;H$$=0<H$L?(H$B=H$n-H$G,H$_-H$m):(H$B=H$n+H$G,H$_+H$m)}H$E=H$B,H$d=H$$,this.isDebug&&(this._sp||(this._sp=new H$Hf,H$Lf.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(H$y,H$l,15,"#ff00ff"),this._sp.graphics.drawCircle(H$Y,H$X,15,"#ffff00"),this._sp.graphics.drawCircle(H$E,H$d,15,"#ff00ff"));var H$R,H$V;H$R=Math.atan2(H$d-H$f.resultMatrix.ty,H$E-H$f.resultMatrix.tx),H$f.setRotation(H$R),(H$V=H$Xf._tempMatrix).identity(),H$V.rotate(H$R),H$V.scale(H$f.resultMatrix.getScaleX(),H$f.resultMatrix.getScaleY()),H$V.translate(H$f.resultMatrix.tx,H$f.resultMatrix.ty),H$V.copyTo(H$f.resultMatrix),H$f.updateChild();var H$t,H$T;H$t=Math.atan2(H$X-H$d,H$Y-H$E),H$K.setRotation(H$t),(H$T=H$Xf._tempMatrix).identity(),H$T.rotate(H$t),H$T.scale(H$K.resultMatrix.getScaleX(),H$K.resultMatrix.getScaleY()),H$T.translate(H$E,H$d),H$V.copyTo(H$K.resultMatrix),H$K.updateChild()}},H$Y(H$Xf,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new H$Vf}]),H$Xf}(),H$bf=function(){function H$f(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return H$X(H$f,"laya.ani.bone.IkConstraintData"),H$f}(),H$C=function(){function H$T(H$f,H$K){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=H$f,this.position=H$f.position,this.spacing=H$f.spacing,this.rotateMix=H$f.rotateMix,this.translateMix=H$f.translateMix,this.bones=[];for(var H$Y=this.data.bones,H$X=0,H$L=H$Y.length;H$X<H$L;H$X++)this.bones.push(H$K[H$Y[H$X]])}H$X(H$T,"laya.ani.bone.PathConstraint");var H$f=H$T.prototype;return H$f.apply=function(H$f,H$K){if(this.target){var H$Y=this.translateMix,H$X=this.translateMix,H$L=0<H$X,H$H=this.data.spacingMode,H$E="length"==H$H,H$d=this.data.rotateMode,H$O="tangent"==H$d,H$i="chainScale"==H$d,H$U=[],H$Z=this.bones.length,H$y=H$O?H$Z:H$Z+1,H$l=[];(this._spaces=H$l)[0]=this.position;var H$B=this.spacing;if(H$i||H$E)for(var H$$=0,H$h=H$y-1;H$$<H$h;){var H$A=this.bones[H$$],H$x=H$A.length,H$S=H$x*H$A.resultMatrix.a,H$z=H$x*H$A.resultMatrix.b;H$x=Math.sqrt(H$S*H$S+H$z*H$z),H$i&&(H$U[H$$]=H$x),H$l[++H$$]=H$E?Math.max(0,H$x+H$B):H$B}else for(H$$=1;H$$<H$y;H$$++)H$l[H$$]=H$B;var H$C=this.computeWorldPositions(this.target,H$f,H$K,H$y,H$O,"percent"==this.data.positionMode,"percent"==H$H);if(this._debugKey){for(H$$=0;H$$<H$C.length;H$$++)H$K.drawCircle(H$C[H$$++],H$C[H$$++],5,"#00ff00");var H$s=[];for(H$$=0;H$$<H$C.length;H$$++)H$s.push(H$C[H$$++],H$C[H$$++]);H$K.drawLines(0,0,H$s,"#ff0000")}var H$a=H$C[0],H$I=H$C[1],H$n=this.data.offsetRotation,H$_="chain"==H$d&&0==H$n,H$G=NaN;for(H$$=0,H$G=3;H$$<H$Z;H$$++,H$G+=3){(H$A=this.bones[H$$]).resultMatrix.tx+=(H$a-H$A.resultMatrix.tx)*H$Y,H$A.resultMatrix.ty+=(H$I-H$A.resultMatrix.ty)*H$Y;var H$m=(H$S=H$C[H$G])-H$a,H$R=(H$z=H$C[H$G+1])-H$I;if(H$i&&0!=(H$x=H$U[H$$])){var H$V=(Math.sqrt(H$m*H$m+H$R*H$R)/H$x-1)*H$X+1;H$A.resultMatrix.a*=H$V,H$A.resultMatrix.c*=H$V}if(H$a=H$S,H$I=H$z,H$L){var H$t=H$A.resultMatrix.a,H$T=H$A.resultMatrix.c,H$k=H$A.resultMatrix.b,H$e=H$A.resultMatrix.d,H$Q=NaN,H$W=NaN,H$q=NaN;H$Q=H$O?H$C[H$G-1]:0==H$l[H$$+1]?H$C[H$G+2]:Math.atan2(H$R,H$m),H$Q-=Math.atan2(H$k,H$t)-H$n/180*Math.PI,H$_&&(H$W=Math.cos(H$Q),H$q=Math.sin(H$Q),H$a+=((H$x=H$A.length)*(H$W*H$t-H$q*H$k)-H$m)*H$X,H$I+=(H$x*(H$q*H$t+H$W*H$k)-H$R)*H$X),H$Q>Math.PI?H$Q-=2*Math.PI:H$Q<-Math.PI&&(H$Q+=2*Math.PI),H$Q*=H$X,H$W=Math.cos(H$Q),H$q=Math.sin(H$Q),H$A.resultMatrix.a=H$W*H$t-H$q*H$k,H$A.resultMatrix.c=H$W*H$T-H$q*H$e,H$A.resultMatrix.b=H$q*H$t+H$W*H$k,H$A.resultMatrix.d=H$q*H$T+H$W*H$e}}}},H$f.computeWorldVertices2=function(H$f,H$K,H$Y,H$X,H$L,H$H){var H$E,H$d,H$O=H$f.currDisplayData.bones,H$i=H$f.currDisplayData.weights,H$U=H$f.currDisplayData.triangles,H$Z=0,H$y=0,H$l=0,H$B=0,H$$=0,H$h=0,H$A=0,H$x=0,H$S=0,H$z=0,H$C=0;if(null!=H$O){for(H$Z=0;H$Z<H$Y;H$Z+=2)H$y+=(H$B=H$O[H$y])+1,H$l+=H$B;var H$s=H$K;for(H$$=H$H,H$h=3*H$l;H$$<H$X;H$$+=2){for(H$x=H$A=0,H$B=H$O[H$y++],H$B+=H$y;H$y<H$B;H$y++,H$h+=3){H$E=H$s[H$O[H$y]].resultMatrix,H$S=H$i[H$h],H$z=H$i[H$h+1];var H$a=H$i[H$h+2];H$A+=(H$S*H$E.a+H$z*H$E.c+H$E.tx)*H$a,H$x+=(H$S*H$E.b+H$z*H$E.d+H$E.ty)*H$a}H$L[H$$]=H$A,H$L[H$$+1]=H$x}}else{var H$I,H$n;if(H$U||(H$U=H$i),H$f.deformData&&(H$U=H$f.deformData),H$I=H$f.parent,H$K)for(H$C=H$K.length,H$Z=0;H$Z<H$C;H$Z++)if(H$K[H$Z].name==H$I){H$d=H$K[H$Z];break}H$d&&(H$n=H$d.resultMatrix),H$n||(H$n=H$T._tempMt);var H$_=H$n.tx,H$G=H$n.ty,H$m=H$n.a,H$R=H$n.b,H$V=H$n.c,H$t=H$n.d;for(H$d&&(H$t*=H$d.d),H$y=H$Y,H$$=H$H;H$$<H$X;H$y+=2,H$$+=2)H$S=H$U[H$y],H$z=H$U[H$y+1],H$L[H$$]=H$S*H$m+H$z*H$R+H$_,H$L[H$$+1]=-(H$S*H$V+H$z*H$t+H$G)}},H$f.computeWorldPositions=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E){H$f.currDisplayData.bones,H$f.currDisplayData.weights,H$f.currDisplayData.triangles;var H$d=[],H$O=0,H$i=H$f.currDisplayData.verLen,H$U=this.position,H$Z=this._spaces,H$y=[],H$l=[],H$B=H$i/6,H$$=-1,H$h=NaN,H$A=0,H$x=0,H$S=NaN,H$z=NaN,H$C=NaN,H$s=NaN;if(H$B--,H$i-=4,this.computeWorldVertices2(H$f,H$K,2,H$i,H$d,0),this._debugKey)for(H$O=0;H$O<H$d.length;)H$Y.drawCircle(H$d[H$O++],H$d[H$O++],10,"#ff0000");H$y=H$d,this._curves.length=H$B;var H$a=this._curves,H$I=H$y[H$h=0],H$n=H$y[1],H$_=0,H$G=0,H$m=0,H$R=0,H$V=0,H$t=0,H$T=NaN,H$k=NaN,H$e=NaN,H$Q=NaN,H$W=NaN,H$q=NaN,H$P=NaN,H$b=NaN,H$J=0;for(H$O=0,H$J=2;H$O<H$B;H$O++,H$J+=6)H$_=H$y[H$J],H$G=H$y[H$J+1],H$m=H$y[H$J+2],H$R=H$y[H$J+3],H$W=2*(H$T=.1875*(H$I-2*H$_+H$m))+(H$e=.09375*(3*(H$_-H$m)-H$I+(H$V=H$y[H$J+4]))),H$q=2*(H$k=.1875*(H$n-2*H$G+H$R))+(H$Q=.09375*(3*(H$G-H$R)-H$n+(H$t=H$y[H$J+5]))),H$P=.75*(H$_-H$I)+H$T+.16666667*H$e,H$b=.75*(H$G-H$n)+H$k+.16666667*H$Q,H$h+=Math.sqrt(H$P*H$P+H$b*H$b),H$P+=H$W,H$b+=H$q,H$W+=H$e,H$q+=H$Q,H$h+=Math.sqrt(H$P*H$P+H$b*H$b),H$P+=H$W,H$b+=H$q,H$h+=Math.sqrt(H$P*H$P+H$b*H$b),H$P+=H$W+H$e,H$b+=H$q+H$Q,H$h+=Math.sqrt(H$P*H$P+H$b*H$b),H$a[H$O]=H$h,H$I=H$V,H$n=H$t;if(H$H&&(H$U*=H$h),H$E)for(H$O=0;H$O<H$X;H$O++)H$Z[H$O]*=H$h;var H$M=this._segments,H$w=0,H$r=0;for(H$r=H$x=H$A=H$O=0;H$O<H$X;H$O++,H$A+=3)if((H$S=H$U+=H$z=H$Z[H$O])<0)this.addBeforePosition(H$S,H$y,0,H$l,H$A);else if(H$h<H$S)this.addAfterPosition(H$S-H$h,H$y,H$i-4,H$l,H$A);else{for(;;H$x++)if(!((H$s=H$a[H$x])<H$S)){0==H$x?H$S/=H$s:H$S=(H$S-(H$C=H$a[H$x-1]))/(H$s-H$C);break}if(H$x!=H$$){var H$v=6*(H$$=H$x);for(H$I=H$y[H$v],H$n=H$y[H$v+1],H$_=H$y[H$v+2],H$G=H$y[H$v+3],H$m=H$y[H$v+4],H$R=H$y[H$v+5],H$W=2*(H$T=.03*(H$I-2*H$_+H$m))+(H$e=.006*(3*(H$_-H$m)-H$I+(H$V=H$y[H$v+6]))),H$q=2*(H$k=.03*(H$n-2*H$G+H$R))+(H$Q=.006*(3*(H$G-H$R)-H$n+(H$t=H$y[H$v+7]))),H$P=.3*(H$_-H$I)+H$T+.16666667*H$e,H$b=.3*(H$G-H$n)+H$k+.16666667*H$Q,H$w=Math.sqrt(H$P*H$P+H$b*H$b),H$M[0]=H$w,H$v=1;H$v<8;H$v++)H$P+=H$W,H$b+=H$q,H$W+=H$e,H$q+=H$Q,H$w+=Math.sqrt(H$P*H$P+H$b*H$b),H$M[H$v]=H$w;H$P+=H$W,H$b+=H$q,H$w+=Math.sqrt(H$P*H$P+H$b*H$b),H$M[8]=H$w,H$P+=H$W+H$e,H$b+=H$q+H$Q,H$w+=Math.sqrt(H$P*H$P+H$b*H$b),H$M[9]=H$w,H$r=0}for(H$S*=H$w;;H$r++)if(!((H$s=H$M[H$r])<H$S)){0==H$r?H$S/=H$s:H$S=H$r+(H$S-(H$C=H$M[H$r-1]))/(H$s-H$C);break}this.addCurvePosition(.1*H$S,H$I,H$n,H$_,H$G,H$m,H$R,H$V,H$t,H$l,H$A,H$L||0<H$O&&0==H$z)}return H$l},H$f.addBeforePosition=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$K[H$Y],H$E=H$K[H$Y+1],H$d=H$K[H$Y+2]-H$H,H$O=H$K[H$Y+3]-H$E,H$i=Math.atan2(H$O,H$d);H$X[H$L]=H$H+H$f*Math.cos(H$i),H$X[H$L+1]=H$E+H$f*Math.sin(H$i),H$X[H$L+2]=H$i},H$f.addAfterPosition=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$K[H$Y+2],H$E=H$K[H$Y+3],H$d=H$H-H$K[H$Y],H$O=H$E-H$K[H$Y+1],H$i=Math.atan2(H$O,H$d);H$X[H$L]=H$H+H$f*Math.cos(H$i),H$X[H$L+1]=H$E+H$f*Math.sin(H$i),H$X[H$L+2]=H$i},H$f.addCurvePosition=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U,H$Z){0==H$f&&(H$f=1e-4);var H$y=H$f*H$f,H$l=H$y*H$f,H$B=1-H$f,H$$=H$B*H$B,H$h=H$$*H$B,H$A=H$B*H$f,H$x=3*H$A,H$S=H$B*H$x,H$z=H$x*H$f,H$C=H$K*H$h+H$X*H$S+H$H*H$z+H$d*H$l,H$s=H$Y*H$h+H$L*H$S+H$E*H$z+H$O*H$l;H$i[H$U]=H$C,H$i[H$U+1]=H$s,H$i[H$U+2]=H$Z?Math.atan2(H$s-(H$Y*H$$+H$L*H$A*2+H$E*H$y),H$C-(H$K*H$$+H$X*H$A*2+H$H*H$y)):0},H$T.NONE=-1,H$T.BEFORE=-2,H$T.AFTER=-3,H$Y(H$T,["_tempMt",function(){return this._tempMt=new H$Vf}]),H$T}(),H$Jf=function(){function H$f(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return H$X(H$f,"laya.ani.bone.PathConstraintData"),H$f}(),H$Mf=function(){function H$f(){this.name=null,this.slotArr=[]}return H$X(H$f,"laya.ani.bone.SkinData"),H$f}(),H$wf=function(){function H$f(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}H$X(H$f,"laya.ani.bone.SkinSlotDisplayData");var H$K=H$f.prototype;return H$K.createTexture=function(H$f){return this.texture||(this.texture=new H$tf(H$f.bitmap,this.uvs),H$f.bitmap.alphaTexture&&(this.texture.alphaTexture=new H$tf(H$f.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=H$f.height,this.texture.height=H$f.width,this.texture.offsetX=-H$f.offsetX,this.texture.offsetY=-H$f.offsetY,this.texture.sourceWidth=H$f.sourceHeight,this.texture.sourceHeight=H$f.sourceWidth):(this.texture.width=H$f.width,this.texture.height=H$f.height,this.texture.offsetX=-H$f.offsetX,this.texture.offsetY=-H$f.offsetY,this.texture.sourceWidth=H$f.sourceWidth,this.texture.sourceHeight=H$f.sourceHeight),H$h.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},H$K.destory=function(){this.texture&&this.texture.destroy()},H$f}(),H$rf=function(){function H$f(){this.name=null,this.displayArr=[]}return H$X(H$f,"laya.ani.bone.SlotData"),H$f.prototype.getDisplayByName=function(H$f){for(var H$K=0,H$Y=this.displayArr.length;H$K<H$Y;H$K++)if(this.displayArr[H$K].attachmentName==H$f)return H$K;return-1},H$f}(),H$s=function(){function H$f(H$f,H$K){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=H$$(2,0),this._data=H$f,null==this._bones&&(this._bones=[]),this.target=H$K[H$f.targetIndex];var H$Y,H$X=0;for(H$X=0,H$Y=H$f.boneIndexs.length;H$X<H$Y;H$X++)this._bones.push(H$K[H$f.boneIndexs[H$X]]);this.rotateMix=H$f.rotateMix,this.translateMix=H$f.translateMix,this.scaleMix=H$f.scaleMix,this.shearMix=H$f.shearMix}return H$X(H$f,"laya.ani.bone.TfConstraint"),H$f.prototype.apply=function(){for(var H$f,H$K=this.target.resultMatrix.a,H$Y=this.target.resultMatrix.b,H$X=this.target.resultMatrix.c,H$L=this.target.resultMatrix.d,H$H=0,H$E=this._bones.length;H$H<H$E;H$H++){if(H$f=this._bones[H$H],0<this.rotateMix){var H$d=H$f.resultMatrix.a,H$O=H$f.resultMatrix.b,H$i=H$f.resultMatrix.c,H$U=H$f.resultMatrix.d,H$Z=Math.atan2(H$X,H$K)-Math.atan2(H$i,H$d)+this._data.offsetRotation*Math.PI/180;H$Z>Math.PI?H$Z-=2*Math.PI:H$Z<-Math.PI&&(H$Z+=2*Math.PI),H$Z*=this.rotateMix;var H$y=Math.cos(H$Z),H$l=Math.sin(H$Z);H$f.resultMatrix.a=H$y*H$d-H$l*H$i,H$f.resultMatrix.b=H$y*H$O-H$l*H$U,H$f.resultMatrix.c=H$l*H$d+H$y*H$i,H$f.resultMatrix.d=H$l*H$O+H$y*H$U}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),H$f.resultMatrix.tx+=(this._temp[0]-H$f.resultMatrix.tx)*this.translateMix,H$f.resultMatrix.ty+=(this._temp[1]-H$f.resultMatrix.ty)*this.translateMix,H$f.updateChild()),0<this.scaleMix){var H$B=Math.sqrt(H$f.resultMatrix.a*H$f.resultMatrix.a+H$f.resultMatrix.c*H$f.resultMatrix.c),H$$=Math.sqrt(H$K*H$K+H$X*H$X),H$h=1e-5<H$B?(H$B+(H$$-H$B+this._data.offsetScaleX)*this.scaleMix)/H$B:0;H$f.resultMatrix.a*=H$h,H$f.resultMatrix.c*=H$h,H$B=Math.sqrt(H$f.resultMatrix.b*H$f.resultMatrix.b+H$f.resultMatrix.d*H$f.resultMatrix.d),H$$=Math.sqrt(H$Y*H$Y+H$L*H$L),H$h=1e-5<H$B?(H$B+(H$$-H$B+this._data.offsetScaleY)*this.scaleMix)/H$B:0,H$f.resultMatrix.b*=H$h,H$f.resultMatrix.d*=H$h}if(0<this.shearMix){H$O=H$f.resultMatrix.b,H$U=H$f.resultMatrix.d;var H$A=Math.atan2(H$U,H$O);(H$Z=Math.atan2(H$L,H$Y)-Math.atan2(H$X,H$K)-(H$A-Math.atan2(H$f.resultMatrix.c,H$f.resultMatrix.a)))>Math.PI?H$Z-=2*Math.PI:H$Z<-Math.PI&&(H$Z+=2*Math.PI),H$Z=H$A+(H$Z+this._data.offsetShearY*Math.PI/180)*this.shearMix,H$h=Math.sqrt(H$O*H$O+H$U*H$U),H$f.resultMatrix.b=Math.cos(H$Z)*H$h,H$f.resultMatrix.d=Math.sin(H$Z)*H$h}}},H$f}(),H$vf=function(){function H$f(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return H$X(H$f,"laya.ani.bone.TfConstraintData"),H$f}(),H$jf=function(){function H$f(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}H$X(H$f,"laya.ani.bone.Transform");var H$K=H$f.prototype;return H$K.initData=function(H$f){null!=H$f.x&&(this.x=H$f.x),null!=H$f.y&&(this.y=H$f.y),null!=H$f.skX&&(this.skX=H$f.skX),null!=H$f.skY&&(this.skY=H$f.skY),null!=H$f.scX&&(this.scX=H$f.scX),null!=H$f.scY&&(this.scY=H$f.scY)},H$K.getMatrix=function(){var H$f;return(H$f=this.mMatrix?this.mMatrix:this.mMatrix=new H$Vf).identity(),H$f.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(H$f,this.skewX*Math.PI/180,this.skewY*Math.PI/180),H$f.rotate(this.skX*Math.PI/180),H$f.translate(this.x,this.y),H$f},H$K.skew=function(H$f,H$K,H$Y){var H$X=Math.sin(H$Y),H$L=Math.cos(H$Y),H$H=Math.sin(H$K),H$E=Math.cos(H$K);return H$f.setTo(H$f.a*H$E-H$f.b*H$X,H$f.a*H$H+H$f.b*H$L,H$f.c*H$E-H$f.d*H$X,H$f.c*H$H+H$f.d*H$L,H$f.tx*H$E-H$f.ty*H$X,H$f.tx*H$H+H$f.ty*H$L),H$f},H$f}(),H$a=function(){function H$f(){}return H$X(H$f,"laya.ani.bone.UVTools"),H$f.getRelativeUV=function(H$f,H$K,H$Y){var H$X=H$f[0],H$L=H$f[2]-H$f[0],H$H=H$f[1],H$E=H$f[5]-H$f[1];H$Y||(H$Y=[]),H$Y.length=H$K.length;var H$d,H$O=0;H$d=H$Y.length;var H$i=1/H$L,H$U=1/H$E;for(H$O=0;H$O<H$d;H$O+=2)H$Y[H$O]=(H$K[H$O]-H$X)*H$i,H$Y[H$O+1]=(H$K[H$O+1]-H$H)*H$U;return H$Y},H$f.getAbsoluteUV=function(H$f,H$K,H$Y){if(0==H$f[0]&&0==H$f[1]&&1==H$f[4]&&1==H$f[5])return H$Y?(H$A.copyArray(H$Y,H$K),H$Y):H$K;var H$X=H$f[0],H$L=H$f[2]-H$f[0],H$H=H$f[1],H$E=H$f[5]-H$f[1];H$Y||(H$Y=[]),H$Y.length=H$K.length;var H$d,H$O=0;for(H$d=H$Y.length,H$O=0;H$O<H$d;H$O+=2)H$Y[H$O]=H$K[H$O]*H$L+H$X,H$Y[H$O+1]=H$K[H$O+1]*H$E+H$H;return H$Y},H$f}(),H$T=function(){function H$f(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return H$X(H$f,"laya.ani.KeyFramesContent"),H$f}(),H$I=function(){function H$U(){}return H$X(H$U,"laya.ani.math.BezierLerp"),H$U.getBezierRate=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$U._getBezierParamKey(H$K,H$Y,H$X,H$L),H$E=100*H$H+H$f;if(H$U._bezierResultCache[H$E])return H$U._bezierResultCache[H$E];var H$d,H$O=H$U._getBezierPoints(H$K,H$Y,H$X,H$L,H$H),H$i=0;for(H$d=H$O.length,H$i=0;H$i<H$d;H$i+=2)if(H$f<=H$O[H$i])return H$U._bezierResultCache[H$E]=H$O[H$i+1],H$O[H$i+1];return H$U._bezierResultCache[H$E]=1},H$U._getBezierParamKey=function(H$f,H$K,H$Y,H$X){return 100*(100*(100*(100*H$f+H$K)+H$Y)+H$X)},H$U._getBezierPoints=function(H$f,H$K,H$Y,H$X,H$L){return H$U._bezierPointsCache[H$L]?H$U._bezierPointsCache[H$L]:(H$H=[0,0,H$f,H$K,H$Y,H$X,1,1],H$E=(new H$d).getBezierPoints(H$H,100,3),H$U._bezierPointsCache[H$L]=H$E);var H$H,H$E},H$U._bezierResultCache={},H$U._bezierPointsCache={},H$U}(),H$n=function(H$f){function H$K(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,H$K.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}H$X(H$K,"laya.ani.AnimationPlayer",H$L);var H$Y=H$K.prototype;return H$Lf.imps(H$Y,{"laya.resource.IDestroy":!0}),H$Y._onTempletLoadedComputeFullKeyframeIndices=function(H$f,H$K,H$Y){this._templet===H$Y&&this._cachePlayRate===H$f&&this._cacheFrameRate===H$K&&this._computeFullKeyframeIndices()},H$Y._computeFullKeyframeIndices=function(){for(var H$f=this._fullFrames=[],H$K=this._templet,H$Y=this._cacheFrameRateInterval*this._cachePlayRate,H$X=0,H$L=H$K.getAnimationCount();H$X<H$L;H$X++){for(var H$H=[],H$E=0,H$d=H$K.getAnimation(H$X).nodes.length;H$E<H$d;H$E++){for(var H$O=H$K.getAnimation(H$X).nodes[H$E],H$i=Math.floor(H$O.playTime/H$Y+.01),H$U=new Uint16Array(H$i+1),H$Z=-1,H$y=0,H$l=H$O.keyFrame.length;H$y<H$l;H$y++){var H$B=H$O.keyFrame[H$y],H$$=H$B.startTime,H$h=H$$+H$B.duration+H$Y;do{for(var H$A=Math.floor(H$$/H$Y+.5),H$x=H$Z+1;H$x<H$A;H$x++)H$U[H$x]=H$y;H$U[H$Z=H$A]=H$y,H$$+=H$Y}while(H$$<=H$h)}H$H.push(H$U)}H$f.push(H$H)}},H$Y._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},H$Y._calculatePlayDuration=function(){if(0!==this.state){var H$f=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=H$f),this._playEnd>H$f&&(this._playEnd=H$f),this._playDuration=this._playEnd-this._playStart}},H$Y._setPlayParams=function(H$f,H$K){this._currentTime=H$f,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/H$K+.01),0),this._currentFrameTime=this._currentKeyframeIndex*H$K},H$Y._setPlayParamsWhenStop=function(H$f,H$K){this._currentTime=H$f,this._currentKeyframeIndex=Math.max(Math.floor(H$f/H$K+.01),0),this._currentFrameTime=this._currentKeyframeIndex*H$K,this._currentAnimationClipIndex=-1},H$Y._update=function(H$f){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var H$K=this._cacheFrameRateInterval*this._cachePlayRate,H$Y=0;this._startUpdateLoopCount!==H$B.loopCount&&(H$Y=H$f*this.playbackRate,this._elapsedPlaybackTime+=H$Y);var H$X=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=H$X)return this._setPlayParamsWhenStop(H$X,H$K),void this.event("stopped");if(H$Y+=this._currentTime,0<H$X)if(H$X<=H$Y)do{if(H$Y-=H$X,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(H$X,H$K),this._stopWhenCircleFinish=!1,void this.event("stopped");H$Y<H$X&&(this._setPlayParams(H$Y,H$K),this.event("complete"))}while(H$X<=H$Y);else this._setPlayParams(H$Y,H$K);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(H$X,H$K),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},H$Y._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},H$Y.play=function(H$f,H$K,H$Y,H$X,H$L){if(void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=1),void 0===H$Y&&(H$Y=2147483647),void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(H$Y<0||H$X<0||H$L<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==H$L&&H$L<H$X)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=H$K,this._overallDuration=H$Y,this._playStart=H$X,this._playEnd=H$L,this._paused=!1,this._currentAnimationClipIndex=H$f,this._currentKeyframeIndex=0,this._startUpdateLoopCount=H$B.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},H$Y.playByFrame=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$f&&(H$f=0),void 0===H$K&&(H$K=1),void 0===H$Y&&(H$Y=2147483647),void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0),void 0===H$H&&(H$H=30);var H$E=1e3/H$H;this.play(H$f,H$K,H$Y,H$X*H$E,H$L*H$E)},H$Y.stop=function(H$f){void 0===H$f&&(H$f=!0),H$f?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},H$H(0,H$Y,"playEnd",function(){return this._playEnd}),H$H(0,H$Y,"templet",function(){return this._templet},function(H$f){0===!this.state&&this.stop(!0),this._templet!==H$f&&((this._templet=H$f).loaded?this._computeFullKeyframeIndices():H$f.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),H$H(0,H$Y,"playStart",function(){return this._playStart}),H$H(0,H$Y,"playDuration",function(){return this._playDuration}),H$H(0,H$Y,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),H$H(0,H$Y,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),H$H(0,H$Y,"overallDuration",function(){return this._overallDuration}),H$H(0,H$Y,"currentFrameTime",function(){return this._currentFrameTime}),H$H(0,H$Y,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),H$H(0,H$Y,"currentPlayTime",function(){return this._currentTime+this._playStart}),H$H(0,H$Y,"cachePlayRate",function(){return this._cachePlayRate},function(H$f){this._cachePlayRate!==H$f&&(this._cachePlayRate=H$f,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[H$f,this._cacheFrameRate])))}),H$H(0,H$Y,"cacheFrameRate",function(){return this._cacheFrameRate},function(H$f){this._cacheFrameRate!==H$f&&(this._cacheFrameRate=H$f,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,H$f])))}),H$H(0,H$Y,"currentTime",null,function(H$f){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(H$f<this._playStart||H$f>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=H$B.loopCount;var H$K=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=H$f,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/H$K),0),this._currentFrameTime=this._currentKeyframeIndex*H$K}}),H$H(0,H$Y,"paused",function(){return this._paused},function(H$f){(this._paused=H$f)&&this.event("paused")}),H$H(0,H$Y,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),H$H(0,H$Y,"destroyed",function(){return this._destroyed}),H$K}(),H$k=function(H$f){function H$K(){H$K.__super.call(this),H$h.isConchNode&&(this.drawSkin=function(H$f){H$f.transform||(H$f.transform=H$Vf.EMPTY),this._addCmd([H$f]),this.setSkinMesh&&this.setSkinMesh(H$f._ps,H$f.mVBData,H$f.mEleNum,0,H$f.mTexture,H$f.transform)})}return H$X(H$K,"laya.ani.GraphicsAni",H$E),H$K.prototype.drawSkin=function(H$f){var H$K=[H$f];this._saveToCmd(H$h._context._drawSkin,H$K)},H$K.create=function(){return H$K._caches.pop()||new H$K},H$K.recycle=function(H$f){H$f.clear(),H$K._caches.push(H$f)},H$K._caches=[],H$K}(),H$e=function(H$f){function H$x(){this._aniMap={},this.unfixedLastAniIndex=-1,H$x.__super.call(this),this._anis=new Array}H$X(H$x,"laya.ani.AnimationTemplet",H$U);var H$K=H$x.prototype;return H$K.parse=function(H$f){var H$K=new H$Rf(H$f);this._aniVersion=H$K.readUTFString(),H$S.parse(this,H$K)},H$K._calculateKeyFrame=function(H$f,H$K,H$Y){var H$X=H$f.keyFrame;H$X[H$K]=H$X[0];for(var H$L=0;H$L<H$K;H$L++){var H$H=H$X[H$L];H$H.nextData=0===H$H.duration?H$H.data:H$X[H$L+1].data}H$X.length--},H$K.onAsynLoaded=function(H$f,H$K,H$Y){var H$X=new H$Rf(H$K);switch(this._aniVersion=H$X.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":H$z.parse(this,H$X);break;default:H$S.parse(this,H$X)}this._endLoaded()},H$K.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},H$K.getAnimationCount=function(){return this._anis.length},H$K.getAnimation=function(H$f){return this._anis[H$f]},H$K.getAniDuration=function(H$f){return this._anis[H$f].playTime},H$K.getNodes=function(H$f){return this._anis[H$f].nodes},H$K.getNodeIndexWithName=function(H$f,H$K){return this._anis[H$f].bone3DMap[H$K]},H$K.getNodeCount=function(H$f){return this._anis[H$f].nodes.length},H$K.getTotalkeyframesLength=function(H$f){return this._anis[H$f].totalKeyframeDatasLength},H$K.getPublicExtData=function(){return this._publicExtData},H$K.getAnimationDataWithCache=function(H$f,H$K,H$Y,H$X){var H$L=H$K[H$Y];if(H$L){var H$H=H$L[H$f];return H$H?H$H[H$X]:null}return null},H$K.setAnimationDataWithCache=function(H$f,H$K,H$Y,H$X,H$L){var H$H=H$K[H$Y]||(H$K[H$Y]={});(H$H[H$f]||(H$H[H$f]=[]))[H$X]=H$L},H$K.getOriginalData=function(H$f,H$K,H$Y,H$X,H$L){for(var H$H=this._anis[H$f].nodes,H$E=0,H$d=0,H$O=H$H.length,H$i=0;H$d<H$O;H$d++){var H$U,H$Z=H$H[H$d];H$U=H$Z.keyFrame[H$Y[H$d][H$X]],H$Z.dataOffset=H$i;var H$y=H$L-H$U.startTime,H$l=H$Z.lerpType;if(H$l)switch(H$l){case 0:case 1:for(H$E=0;H$E<H$Z.keyframeWidth;)H$E+=H$Z.interpolationMethod[H$E](H$Z,H$E,H$K,H$i+H$E,H$U.data,H$y,null,H$U.duration,H$U.nextData);break;case 2:var H$B=H$U.interpolationData,H$$=H$B.length,H$h=0;for(H$E=0;H$E<H$$;){var H$A=H$B[H$E];switch(H$A){case 6:case 7:H$E+=H$x.interpolation[H$A](H$Z,H$h,H$K,H$i+H$h,H$U.data,H$y,null,H$U.duration,H$U.nextData,H$B,H$E+1);break;default:H$E+=H$x.interpolation[H$A](H$Z,H$h,H$K,H$i+H$h,H$U.data,H$y,null,H$U.duration,H$U.nextData)}H$h++}}else for(H$E=0;H$E<H$Z.keyframeWidth;)H$E+=H$Z.interpolationMethod[H$E](H$Z,H$E,H$K,H$i+H$E,H$U.data,H$y,null,H$U.duration,H$U.nextData);H$i+=H$Z.keyframeWidth}},H$K.getNodesCurrentFrameIndex=function(H$f,H$K){var H$Y=this._anis[H$f].nodes;H$f!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(H$Y.length),this.unfixedCurrentTimes=new Float32Array(H$Y.length),this.unfixedLastAniIndex=H$f);for(var H$X=0,H$L=H$Y.length;H$X<H$L;H$X++){var H$H=H$Y[H$X];for(H$K<this.unfixedCurrentTimes[H$X]&&(this.unfixedCurrentFrameIndexes[H$X]=0),this.unfixedCurrentTimes[H$X]=H$K;this.unfixedCurrentFrameIndexes[H$X]<H$H.keyFrame.length&&!(H$H.keyFrame[this.unfixedCurrentFrameIndexes[H$X]].startTime>this.unfixedCurrentTimes[H$X]);)this.unfixedCurrentFrameIndexes[H$X]++;this.unfixedCurrentFrameIndexes[H$X]--}return this.unfixedCurrentFrameIndexes},H$K.getOriginalDataUnfixedRate=function(H$f,H$K,H$Y){var H$X=this._anis[H$f].nodes;H$f!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(H$X.length),this.unfixedCurrentTimes=new Float32Array(H$X.length),this.unfixedKeyframes=H$$(H$X.length),this.unfixedLastAniIndex=H$f);for(var H$L=0,H$H=0,H$E=H$X.length,H$d=0;H$H<H$E;H$H++){var H$O=H$X[H$H];for(H$Y<this.unfixedCurrentTimes[H$H]&&(this.unfixedCurrentFrameIndexes[H$H]=0),this.unfixedCurrentTimes[H$H]=H$Y;this.unfixedCurrentFrameIndexes[H$H]<H$O.keyFrame.length&&!(H$O.keyFrame[this.unfixedCurrentFrameIndexes[H$H]].startTime>this.unfixedCurrentTimes[H$H]);)this.unfixedKeyframes[H$H]=H$O.keyFrame[this.unfixedCurrentFrameIndexes[H$H]],this.unfixedCurrentFrameIndexes[H$H]++;var H$i=this.unfixedKeyframes[H$H];H$O.dataOffset=H$d;var H$U=H$Y-H$i.startTime;if(H$O.lerpType)switch(H$O.lerpType){case 0:case 1:for(H$L=0;H$L<H$O.keyframeWidth;)H$L+=H$O.interpolationMethod[H$L](H$O,H$L,H$K,H$d+H$L,H$i.data,H$U,null,H$i.duration,H$i.nextData);break;case 2:var H$Z=H$i.interpolationData,H$y=H$Z.length,H$l=0;for(H$L=0;H$L<H$y;){var H$B=H$Z[H$L];switch(H$B){case 6:case 7:H$L+=H$x.interpolation[H$B](H$O,H$l,H$K,H$d+H$l,H$i.data,H$U,null,H$i.duration,H$i.nextData,H$Z,H$L+1);break;default:H$L+=H$x.interpolation[H$B](H$O,H$l,H$K,H$d+H$l,H$i.data,H$U,null,H$i.duration,H$i.nextData)}H$l++}}else for(H$L=0;H$L<H$O.keyframeWidth;)H$L+=H$O.interpolationMethod[H$L](H$O,H$L,H$K,H$d+H$L,H$i.data,H$U,null,H$i.duration,H$i.nextData);H$d+=H$O.keyframeWidth}},H$x._LinearInterpolation_0=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){var H$U=0===H$d?0:H$H/H$d;return H$Y[H$X]=(1-H$U)*H$L[H$K]+H$U*H$O[H$K],1},H$x._QuaternionInterpolation_1=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){var H$U=0===H$d?0:H$H/H$d;return H$y.slerpQuaternionArray(H$L,H$K,H$O,H$K,H$U,H$Y,H$X),4},H$x._AngleInterpolation_2=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){return 0},H$x._RadiansInterpolation_3=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){return 0},H$x._Matrix4x4Interpolation_4=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){for(var H$U=0;H$U<16;H$U++,H$K++)H$Y[H$X+H$U]=H$L[H$K]+H$H*H$E[H$K];return 16},H$x._NoInterpolation_5=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i){return H$Y[H$X]=H$L[H$K],1},H$x._BezierInterpolation_6=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U){return void 0===H$U&&(H$U=0),H$Y[H$X]=H$L[H$K]+(H$O[H$K]-H$L[H$K])*H$I.getBezierRate(H$H/H$d,H$i[H$U],H$i[H$U+1],H$i[H$U+2],H$i[H$U+3]),5},H$x._BezierInterpolation_7=function(H$f,H$K,H$Y,H$X,H$L,H$H,H$E,H$d,H$O,H$i,H$U){return void 0===H$U&&(H$U=0),H$Y[H$X]=H$i[H$U+4]+H$i[H$U+5]*H$I.getBezierRate((.001*H$H+H$i[H$U+6])/H$i[H$U+7],H$i[H$U],H$i[H$U+1],H$i[H$U+2],H$i[H$U+3]),9},H$x.load=function(H$f){return H$Lf.loader.create(H$f,null,null,H$x)},H$x.interpolation=[H$x._LinearInterpolation_0,H$x._QuaternionInterpolation_1,H$x._AngleInterpolation_2,H$x._RadiansInterpolation_3,H$x._Matrix4x4Interpolation_4,H$x._NoInterpolation_5,H$x._BezierInterpolation_6,H$x._BezierInterpolation_7],H$x}(),H$_=function(H$K){function H$Y(H$f,H$K){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,H$Y.__super.call(this),void 0===H$K&&(H$K=0),H$f&&this.init(H$f,H$K)}H$X(H$Y,"laya.ani.bone.Skeleton",H$K);var H$f=H$Y.prototype;return H$f.init=function(H$f,H$K){void 0===H$K&&(H$K=0);var H$Y,H$X,H$L,H$H=0,H$E=0;if(1==H$K)for(this._graphicsCache=[],H$H=0,H$E=H$f.getAnimationCount();H$H<H$E;H$H++)this._graphicsCache.push([]);if(this._yReverseMatrix=H$f.yReverseMatrix,this._aniMode=H$K,this._templet=H$f,this._player=new H$n,this._player.cacheFrameRate=H$f.rate,this._player.templet=H$f,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=H$f.mBoneArr,this._rootBone=H$f.mRootBone,this._aniSectionDic=H$f.aniSectionDic,0<H$f.ikArr.length)for(this._ikArr=[],H$H=0,H$E=H$f.ikArr.length;H$H<H$E;H$H++)this._ikArr.push(new H$x(H$f.ikArr[H$H],this._boneList));if(0<H$f.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),H$H=0,H$E=H$f.pathArr.length;H$H<H$E;H$H++)H$Y=H$f.pathArr[H$H],H$X=new H$C(H$Y,this._boneList),(H$L=this._boneSlotDic[H$Y.name])&&((H$X=new H$C(H$Y,this._boneList)).target=H$L),this._pathDic[H$Y.name]=H$X;if(0<H$f.tfArr.length)for(this._tfArr=[],H$H=0,H$E=H$f.tfArr.length;H$H<H$E;H$H++)this._tfArr.push(new H$s(H$f.tfArr[H$H],this._boneList));if(0<H$f.skinDataArray.length){var H$d=this._templet.skinDataArray[this._skinIndex];this._skinName=H$d.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},H$f.load=function(H$f,H$K,H$Y){},H$f._onLoaded=function(){},H$f._parseComplete=function(){var H$f=H$G.TEMPLET_DICTIONARY[this._aniPath];H$f&&(this.init(H$f,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},H$f._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},H$f._onPlay=function(){this.event("played")},H$f._onStop=function(){var H$f,H$K=this._templet.eventAniArr[this._aniClipIndex];if(H$K&&this._eventIndex<H$K.length)for(;this._eventIndex<H$K.length;this._eventIndex++)(H$f=H$K[this._eventIndex]).time>=this._player.playStart&&H$f.time<=this._player.playEnd&&this.event("label",H$f);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},H$f._onPause=function(){this.event("paused")},H$f._parseSrcBoneMatrix=function(){var H$f=0,H$K=0;for(H$K=this._templet.srcBoneMatrixArr.length,H$f=0;H$f<H$K;H$f++)this._boneMatrixArray.push(new H$Vf);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var H$Y,H$X,H$L=this._templet.boneSlotArray;for(H$f=0,H$K=H$L.length;H$f<H$K;H$f++)H$Y=H$L[H$f],null==(H$X=this._bindBoneBoneSlotDic[H$Y.parent])&&(this._bindBoneBoneSlotDic[H$Y.parent]=H$X=[]),this._boneSlotDic[H$Y.name]=H$Y=H$Y.copy(),H$X.push(H$Y),this._boneSlotArray.push(H$Y)}},H$f._emitMissedEvents=function(H$f,H$K,H$Y){void 0===H$Y&&(H$Y=0);var H$X=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(H$X){var H$L,H$H,H$E=0;for(H$L=H$X.length,H$E=H$Y;H$E<H$L;H$E++)(H$H=H$X[H$E]).time>=this._player.playStart&&H$H.time<=this._player.playEnd&&this.event("label",H$H)}},H$f._update=function(H$f){if(void 0===H$f&&(H$f=!0),!(this._pause||H$f&&this._indexControl)){var H$K=this.timer.currTimer,H$Y=this._player.currentKeyframeIndex,H$X=H$K-this._lastTime;if(H$f?this._player._update(H$X):H$Y=-1,this._lastTime=H$K,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<H$X&&this._clipIndex==H$Y&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var H$L;this._lastUpdateAniClipIndex=this._aniClipIndex,H$Y>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var H$H,H$E=this._templet.eventAniArr[this._aniClipIndex];if(H$E&&this._eventIndex<H$E.length&&((H$L=H$E[this._eventIndex]).time>=this._player.playStart&&H$L.time<=this._player.playEnd?this._player.currentPlayTime>=H$L.time&&(this.event("label",H$L),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(H$H=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=H$H&&(this.graphics=H$H));var H$d=0,H$O=0;for(H$O=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,H$O-1)&&0<H$O;)H$O--;if(H$O<this._clipIndex)for(H$d=H$O;H$d<this._clipIndex;H$d++)this._createGraphics(H$d)}else if(1==this._aniMode){if(H$H=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=H$H&&(this.graphics=H$H));for(H$O=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,H$O-1)&&0<H$O;)H$O--;if(H$O<this._clipIndex)for(H$d=H$O;H$d<this._clipIndex;H$d++)this._createGraphics(H$d)}this._createGraphics()}}},H$f._createGraphics=function(H$f){void 0===H$f&&(H$f=-1),-1==H$f&&(H$f=this._clipIndex);var H$K,H$Y,H$X=H$f*this._player.cacheFrameRateInterval,H$L=this._templet.drawOrderAniArr[this._aniClipIndex];if(H$L&&0<H$L.length)for(this._drawOrderIndex=0,H$K=H$L[this._drawOrderIndex];H$X>=H$K.time&&(this._drawOrder=H$K.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=H$L.length));)H$K=H$L[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=H$k.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=H$k.create(),H$Y=this.graphics;var H$H=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],H$f,H$X);var H$E,H$d,H$O,H$i,H$U=this._aniSectionDic[this._aniClipIndex],H$Z=0,H$y=0,H$l=0,H$B=0,H$$=0,H$h=this._templet.srcBoneMatrixArr.length;for(H$$=H$U[H$y=0];H$y<H$h;H$y++)H$i=this._boneList[H$y],H$O=this._templet.srcBoneMatrixArr[H$y],H$i.resultTransform.scX=H$O.scX*this._curOriginalData[H$Z++],H$i.resultTransform.skX=H$O.skX+this._curOriginalData[H$Z++],H$i.resultTransform.skY=H$O.skY+this._curOriginalData[H$Z++],H$i.resultTransform.scY=H$O.scY*this._curOriginalData[H$Z++],H$i.resultTransform.x=H$O.x+this._curOriginalData[H$Z++],H$i.resultTransform.y=H$O.y+this._curOriginalData[H$Z++],8===this._templet.tMatrixDataLen&&(H$i.resultTransform.skewX=H$O.skewX+this._curOriginalData[H$Z++],H$i.resultTransform.skewY=H$O.skewY+this._curOriginalData[H$Z++]);var H$A,H$x={},H$S={};for(H$$+=H$U[1];H$y<H$$;H$y++)H$x[(H$A=H$H[H$y]).name]=this._curOriginalData[H$Z++],H$S[H$A.name]=this._curOriginalData[H$Z++],this._curOriginalData[H$Z++],this._curOriginalData[H$Z++],this._curOriginalData[H$Z++],this._curOriginalData[H$Z++];var H$z,H$C,H$s={},H$a={};for(H$$+=H$U[2];H$y<H$$;H$y++)H$s[(H$A=H$H[H$y]).name]=this._curOriginalData[H$Z++],H$a[H$A.name]=this._curOriginalData[H$Z++],this._curOriginalData[H$Z++],this._curOriginalData[H$Z++],this._curOriginalData[H$Z++],this._curOriginalData[H$Z++];if(this._pathDic)for(H$$+=H$U[3];H$y<H$$;H$y++){if(H$A=H$H[H$y],H$z=this._pathDic[H$A.name])switch(new H$Rf(H$A.extenData).getByte()){case 1:H$z.position=this._curOriginalData[H$Z++];break;case 2:H$z.spacing=this._curOriginalData[H$Z++];break;case 3:H$z.rotateMix=this._curOriginalData[H$Z++],H$z.translateMix=this._curOriginalData[H$Z++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(H$Vf.TEMP.identity()),this._ikArr)for(H$y=0,H$$=this._ikArr.length;H$y<H$$;H$y++)H$C=this._ikArr[H$y],H$s.hasOwnProperty(H$C.name)&&(H$C.bendDirection=H$s[H$C.name]),H$a.hasOwnProperty(H$C.name)&&(H$C.mix=H$a[H$C.name]),H$C.apply();if(this._pathDic)for(var H$I in this._pathDic)(H$z=this._pathDic[H$I]).apply(this._boneList,H$Y);if(this._tfArr)for(H$y=0,H$B=this._tfArr.length;H$y<H$B;H$y++)this._tfArr[H$y].apply();for(H$y=0,H$B=this._boneList.length;H$y<H$B;H$y++)if(H$i=this._boneList[H$y],H$d=this._bindBoneBoneSlotDic[H$i.name],H$i.resultMatrix.copyTo(this._boneMatrixArray[H$y]),H$d)for(H$l=0,H$$=H$d.length;H$l<H$$;H$l++)(H$E=H$d[H$l])&&H$E.setParentMatrix(H$i.resultMatrix);var H$n,H$_,H$G,H$m,H$R={},H$V=this._templet.deformAniArr;if(H$V&&0<H$V.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,H$y=0,H$$=this._boneSlotArray.length;H$y<H$$;H$y++)(H$E=this._boneSlotArray[H$y]).deformData=null;var H$t,H$T=H$V[this._aniClipIndex];for(H$t in H$n=H$T.default,this._setDeform(H$n,H$R,this._boneSlotArray,H$X),H$T)"default"!=H$t&&H$t!=this._skinName&&(H$n=H$T[H$t],this._setDeform(H$n,H$R,this._boneSlotArray,H$X));H$n=H$T[this._skinName],this._setDeform(H$n,H$R,this._boneSlotArray,H$X)}if(this._drawOrder)for(H$y=0,H$$=this._drawOrder.length;H$y<H$$;H$y++)H$_=H$x[(H$E=this._boneSlotArray[this._drawOrder[H$y]]).name],H$G=H$S[H$E.name],isNaN(H$G)||(H$Y.save(),H$Y.alpha(H$G)),isNaN(H$_)||-2==H$_||(this._templet.attachmentNames?H$E.showDisplayByName(this._templet.attachmentNames[H$_]):H$E.showDisplayByIndex(H$_)),H$R[this._drawOrder[H$y]]?(H$m=H$R[this._drawOrder[H$y]],H$E.currDisplayData&&H$m[H$E.currDisplayData.attachmentName]?H$E.deformData=H$m[H$E.currDisplayData.attachmentName]:H$E.deformData=null):H$E.deformData=null,isNaN(H$G)?H$E.draw(H$Y,this._boneMatrixArray,2==this._aniMode):H$E.draw(H$Y,this._boneMatrixArray,2==this._aniMode,H$G),isNaN(H$G)||H$Y.restore();else for(H$y=0,H$$=this._boneSlotArray.length;H$y<H$$;H$y++)H$_=H$x[(H$E=this._boneSlotArray[H$y]).name],H$G=H$S[H$E.name],isNaN(H$G)||(H$Y.save(),H$Y.alpha(H$G)),isNaN(H$_)||-2==H$_||(this._templet.attachmentNames?H$E.showDisplayByName(this._templet.attachmentNames[H$_]):H$E.showDisplayByIndex(H$_)),H$R[H$y]?(H$m=H$R[H$y],H$E.currDisplayData&&H$m[H$E.currDisplayData.attachmentName]?H$E.deformData=H$m[H$E.currDisplayData.attachmentName]:H$E.deformData=null):H$E.deformData=null,isNaN(H$G)?H$E.draw(H$Y,this._boneMatrixArray,2==this._aniMode):H$E.draw(H$Y,this._boneMatrixArray,2==this._aniMode,H$G),isNaN(H$G)||H$Y.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,H$f,H$Y):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,H$f,H$Y)},H$f._setDeform=function(H$f,H$K,H$Y,H$X){if(H$f){var H$L,H$H,H$E,H$d=0,H$O=0,H$i=0;if(H$f)for(H$d=0,H$O=H$f.deformSlotDataList.length;H$d<H$O;H$d++)for(H$L=H$f.deformSlotDataList[H$d],H$i=0;H$i<H$L.deformSlotDisplayList.length;H$i++)H$E=H$Y[(H$H=H$L.deformSlotDisplayList[H$i]).slotIndex],H$H.apply(H$X,H$E),H$K[H$H.slotIndex]||(H$K[H$H.slotIndex]={}),H$K[H$H.slotIndex][H$H.attachment]=H$H.deformData}},H$f.getAnimNum=function(){return this._templet.getAnimationCount()},H$f.getAniNameByIndex=function(H$f){return this._templet.getAniNameByIndex(H$f)},H$f.getSlotByName=function(H$f){return this._boneSlotDic[H$f]},H$f.showSkinByName=function(H$f,H$K){void 0===H$K&&(H$K=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(H$f),H$K)},H$f.showSkinByIndex=function(H$f,H$K){void 0===H$K&&(H$K=!0);for(var H$Y=0;H$Y<this._boneSlotArray.length;H$Y++)this._boneSlotArray[H$Y].showSlotData(null,H$K);if(this._templet.showSkinByIndex(this._boneSlotDic,H$f,H$K)){var H$X=this._templet.skinDataArray[H$f];this._skinIndex=H$f,this._skinName=H$X.name}this._clearCache()},H$f.showSlotSkinByIndex=function(H$f,H$K){if(0!=this._aniMode){var H$Y=this.getSlotByName(H$f);H$Y&&H$Y.showDisplayByIndex(H$K),this._clearCache()}},H$f.showSlotSkinByName=function(H$f,H$K){if(0!=this._aniMode){var H$Y=this.getSlotByName(H$f);H$Y&&H$Y.showDisplayByName(H$K),this._clearCache()}},H$f.replaceSlotSkinName=function(H$f,H$K,H$Y){if(0!=this._aniMode){var H$X=this.getSlotByName(H$f);H$X&&H$X.replaceDisplayByName(H$K,H$Y),this._clearCache()}},H$f.replaceSlotSkinByIndex=function(H$f,H$K,H$Y){if(0!=this._aniMode){var H$X=this.getSlotByName(H$f);H$X&&H$X.replaceDisplayByIndex(H$K,H$Y),this._clearCache()}},H$f.setSlotSkin=function(H$f,H$K){if(0!=this._aniMode){var H$Y=this.getSlotByName(H$f);H$Y&&H$Y.replaceSkin(H$K),this._clearCache()}},H$f._clearCache=function(){if(1==this._aniMode)for(var H$f=0,H$K=this._graphicsCache.length;H$f<H$K;H$f++){for(var H$Y=0,H$X=this._graphicsCache[H$f].length;H$Y<H$X;H$Y++){var H$L=this._graphicsCache[H$f][H$Y];H$L!=this.graphics&&H$k.recycle(H$L)}this._graphicsCache[H$f].length=0}},H$f.play=function(H$f,H$K,H$Y,H$X,H$L,H$H){void 0===H$Y&&(H$Y=!0),void 0===H$X&&(H$X=0),void 0===H$L&&(H$L=0),void 0===H$H&&(H$H=!0),this._indexControl=!1;var H$E=-1,H$d=NaN;if(H$d=H$K?2147483647:0,"string"==typeof H$f)for(var H$O=0,H$i=this._templet.getAnimationCount();H$O<H$i;H$O++){var H$U=this._templet.getAnimation(H$O);if(H$U&&H$f==H$U.name){H$E=H$O;break}}else H$E=H$f;-1<H$E&&H$E<this.getAnimNum()&&(this._aniClipIndex=H$E,(H$Y||this._pause||this._currAniIndex!=H$E)&&(this._currAniIndex=H$E,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(H$E)),this._drawOrder=null,this._eventIndex=0,this._player.play(H$E,this._player.playbackRate,H$d,H$X,H$L),H$H&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=H$Z.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},H$f.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},H$f.playbackRate=function(H$f){this._player&&(this._player.playbackRate=H$f)},H$f.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},H$f.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=H$Z.now(),this.timer.frameLoop(1,this,this._update,null,!0))},H$f._getGrahicsDataWithCache=function(H$f,H$K){return this._graphicsCache[H$f][H$K]},H$f._setGrahicsDataWithCache=function(H$f,H$K,H$Y){this._graphicsCache[H$f][H$K]=H$Y},H$f.destroy=function(H$f){void 0===H$f&&(H$f=!0),H$K.prototype.destroy.call(this,H$f),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},H$H(0,H$f,"url",function(){return this._aniPath},function(H$f){this.load(H$f)}),H$H(0,H$f,"index",function(){return this._index},function(H$f){this.player&&(this._index=H$f,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),H$H(0,H$f,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),H$H(0,H$f,"templet",function(){return this._templet}),H$H(0,H$f,"player",function(){return this._player}),H$Y.useSimpleMeshInCanvas=!1,H$Y}(H$Hf),H$G=function(H$K){function H$L(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,H$L.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}H$X(H$L,"laya.ani.bone.Templet",H$K);var H$f=H$L.prototype;return H$f.getLoadList=function(){return this._loadList},H$f.loadAni=function(H$f){this._skBufferUrl=H$f,H$Lf.loader.load(H$f,H$O.create(this,this.onComplete),null,"arraybuffer")},H$f.onComplete=function(H$f){if(this._isDestroyed)this.destroy();else{var H$K=H$i.getRes(this._skBufferUrl);H$K?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,H$K)):this.event("error","load failed:"+this._skBufferUrl)}},H$f.parseData=function(H$f,H$K,H$Y){void 0===H$Y&&(H$Y=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=H$f,this._mainTexture&&H$h.isWebGL&&H$f.bitmap&&(H$f.bitmap.enableMerageInAtlas=!1),this._rate=H$Y,this.parse(H$K)},H$f.buildArmature=function(H$f){return void 0===H$f&&(H$f=0),new H$_(this,H$f)},H$f.parse=function(H$f){H$K.prototype.parse.call(this,H$f),this._endLoaded(),this._aniVersion!=H$L.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+H$L.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},H$f._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var H$f=0;this._loadList=[];var H$K,H$Y=new H$Rf(this.getPublicExtData()),H$X=0,H$L=0,H$H=0,H$E=H$Y.getInt32(),H$d=H$Y.readUTFString(),H$O=H$d.split("\n");for(H$f=0;H$f<H$E;H$f++)H$K=this._path+H$O[2*H$f],H$d=H$O[2*H$f+1],H$Y.getFloat32(),H$Y.getFloat32(),H$X=H$Y.getFloat32(),H$L=H$Y.getFloat32(),H$H=H$Y.getFloat32(),isNaN(H$H)?0:H$H,H$H=H$Y.getFloat32(),isNaN(H$H)?0:H$H,H$H=H$Y.getFloat32(),isNaN(H$H)?H$X:H$H,H$H=H$Y.getFloat32(),isNaN(H$H)?H$L:H$H,-1==this._loadList.indexOf(H$K)&&this._loadList.push(H$K);this.event("inited",this)}},H$f._textureComplete=function(){for(var H$f,H$K,H$Y=0,H$X=this._loadList.length;H$Y<H$X;H$Y++)H$K=this._loadList[H$Y],H$f=this._textureDic[H$K]=H$i.getRes(H$K),H$h.isWebGL&&H$f&&H$f.bitmap&&(H$f.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},H$f._parsePublicExtData=function(){var H$f=0,H$K=0,H$Y=0,H$X=0,H$L=0;for(H$f=0,H$L=this.getAnimationCount();H$f<H$L;H$f++)this._graphicsCache.push([]);var H$H;H$H="Dragon"!=this._aniClassName;var H$E,H$d,H$O=new H$Rf(this.getPublicExtData()),H$i=0,H$U=0,H$Z=0,H$y=0,H$l=0,H$B=0,H$$=0,H$h=0,H$A=0,H$x=H$O.getInt32(),H$S=H$O.readUTFString(),H$z=H$S.split("\n");for(H$f=0;H$f<H$x;H$f++){if(H$E=this._mainTexture,H$d=this._path+H$z[2*H$f],H$S=H$z[2*H$f+1],null==this._mainTexture&&(H$E=this._textureDic[H$d]),!H$E)return this.event("error",this),void(this.isParseFail=!0);H$i=H$O.getFloat32(),H$U=H$O.getFloat32(),H$Z=H$O.getFloat32(),H$y=H$O.getFloat32(),H$A=H$O.getFloat32(),H$l=isNaN(H$A)?0:H$A,H$A=H$O.getFloat32(),H$B=isNaN(H$A)?0:H$A,H$A=H$O.getFloat32(),H$$=isNaN(H$A)?H$Z:H$A,H$A=H$O.getFloat32(),H$h=isNaN(H$A)?H$y:H$A,this.subTextureDic[H$S]=H$tf.create(H$E,H$i,H$U,H$Z,H$y,-H$l,-H$B,H$$,H$h),H$E.alphaTexture&&(this.subTextureDic[H$S].alphaTexture=H$tf.create(H$E.alphaTexture,H$i,H$U,H$Z,H$y,-H$l,-H$B,H$$,H$h))}this._mainTexture=H$E;var H$C,H$s,H$a,H$I,H$n,H$_=H$O.getUint16();for(H$f=0;H$f<H$_;H$f++)(H$C=[]).push(H$O.getUint16()),H$C.push(H$O.getUint16()),H$C.push(H$O.getUint16()),H$C.push(H$O.getUint16()),this.aniSectionDic[H$f]=H$C;var H$G,H$m=H$O.getInt16(),H$R={};for(H$f=0;H$f<H$m;H$f++)H$s=new H$Tf,0==H$f?H$G=H$s:H$s.root=H$G,H$s.d=H$H?-1:1,H$I=H$O.readUTFString(),H$n=H$O.readUTFString(),H$s.length=H$O.getFloat32(),1==H$O.getByte()&&(H$s.inheritRotation=!1),1==H$O.getByte()&&(H$s.inheritScale=!1),H$s.name=H$I,H$n&&((H$a=H$R[H$n])?H$a.addChild(H$s):this.mRootBone=H$s),H$R[H$I]=H$s,this.mBoneArr.push(H$s);this.tMatrixDataLen=H$O.getUint16();var H$V,H$t,H$T=H$O.getUint16(),H$k=Math.floor(H$T/this.tMatrixDataLen),H$e=this.srcBoneMatrixArr;for(H$f=0;H$f<H$k;H$f++)(H$V=new H$jf).scX=H$O.getFloat32(),H$V.skX=H$O.getFloat32(),H$V.skY=H$O.getFloat32(),H$V.scY=H$O.getFloat32(),H$V.x=H$O.getFloat32(),H$V.y=H$O.getFloat32(),8===this.tMatrixDataLen&&(H$V.skewX=H$O.getFloat32(),H$V.skewY=H$O.getFloat32()),H$e.push(H$V),(H$s=this.mBoneArr[H$f]).transform=H$V;var H$Q,H$W=H$O.getUint16(),H$q=0;for(H$f=0;H$f<H$W;H$f++){for(H$t=new H$bf,H$q=H$O.getUint16(),H$K=0;H$K<H$q;H$K++)H$t.boneNames.push(H$O.readUTFString()),H$t.boneIndexs.push(H$O.getInt16());H$t.name=H$O.readUTFString(),H$t.targetBoneName=H$O.readUTFString(),H$t.targetBoneIndex=H$O.getInt16(),H$t.bendDirection=H$O.getFloat32(),H$t.mix=H$O.getFloat32(),H$t.isSpine=H$H,this.ikArr.push(H$t)}var H$P,H$b=H$O.getUint16(),H$J=0;for(H$f=0;H$f<H$b;H$f++){for(H$Q=new H$vf,H$J=H$O.getUint16(),H$K=0;H$K<H$J;H$K++)H$Q.boneIndexs.push(H$O.getInt16());H$Q.name=H$O.getUTFString(),H$Q.targetIndex=H$O.getInt16(),H$Q.rotateMix=H$O.getFloat32(),H$Q.translateMix=H$O.getFloat32(),H$Q.scaleMix=H$O.getFloat32(),H$Q.shearMix=H$O.getFloat32(),H$Q.offsetRotation=H$O.getFloat32(),H$Q.offsetX=H$O.getFloat32(),H$Q.offsetY=H$O.getFloat32(),H$Q.offsetScaleX=H$O.getFloat32(),H$Q.offsetScaleY=H$O.getFloat32(),H$Q.offsetShearY=H$O.getFloat32(),this.tfArr.push(H$Q)}var H$M=H$O.getUint16(),H$w=0;for(H$f=0;H$f<H$M;H$f++){for((H$P=new H$Jf).name=H$O.readUTFString(),H$w=H$O.getUint16(),H$K=0;H$K<H$w;H$K++)H$P.bones.push(H$O.getInt16());H$P.target=H$O.readUTFString(),H$P.positionMode=H$O.readUTFString(),H$P.spacingMode=H$O.readUTFString(),H$P.rotateMode=H$O.readUTFString(),H$P.offsetRotation=H$O.getFloat32(),H$P.position=H$O.getFloat32(),H$P.spacing=H$O.getFloat32(),H$P.rotateMix=H$O.getFloat32(),H$P.translateMix=H$O.getFloat32(),this.pathArr.push(H$P)}var H$r,H$v,H$j,H$c,H$p,H$u=0,H$D=0,H$g=0,H$N=NaN,H$o=0,H$F=H$O.getInt16();for(H$f=0;H$f<H$F;H$f++){var H$ff=H$O.getUint8(),H$Kf={};this.deformAniArr.push(H$Kf);for(var H$Yf=0;H$Yf<H$ff;H$Yf++)for((H$r=new H$ef).skinName=H$O.getUTFString(),H$Kf[H$r.skinName]=H$r,H$u=H$O.getInt16(),H$K=0;H$K<H$u;H$K++)for(H$v=new H$Qf,H$r.deformSlotDataList.push(H$v),H$D=H$O.getInt16(),H$Y=0;H$Y<H$D;H$Y++)for(H$j=new H$Wf,H$v.deformSlotDisplayList.push(H$j),H$j.slotIndex=H$O.getInt16(),H$j.attachment=H$O.getUTFString(),H$g=H$O.getInt16(),H$X=0;H$X<H$g;H$X++)for(1==H$O.getByte()?H$j.tweenKeyList.push(!0):H$j.tweenKeyList.push(!1),H$N=H$O.getFloat32(),H$j.timeList.push(H$N),H$c=[],H$j.vectices.push(H$c),H$o=H$O.getInt16(),H$L=0;H$L<H$o;H$L++)H$c.push(H$O.getFloat32())}var H$Xf,H$Lf,H$Hf=H$O.getInt16(),H$Ef=0,H$df=0;for(H$f=0;H$f<H$Hf;H$f++){for(H$Ef=H$O.getInt16(),H$p=[],H$K=0;H$K<H$Ef;H$K++){for((H$Xf=new H$qf).time=H$O.getFloat32(),H$df=H$O.getInt16(),H$Y=0;H$Y<H$df;H$Y++)H$Xf.drawOrder.push(H$O.getInt16());H$p.push(H$Xf)}this.drawOrderAniArr.push(H$p)}var H$Of,H$if=H$O.getInt16(),H$Uf=0;for(H$f=0;H$f<H$if;H$f++){for(H$Uf=H$O.getInt16(),H$Lf=[],H$K=0;H$K<H$Uf;H$K++)(H$Of=new H$Pf).name=H$O.getUTFString(),H$Of.intValue=H$O.getInt32(),H$Of.floatValue=H$O.getFloat32(),H$Of.stringValue=H$O.getUTFString(),H$Of.time=H$O.getFloat32(),H$Lf.push(H$Of);this.eventAniArr.push(H$Lf)}var H$Zf=H$O.getInt16();if(0<H$Zf)for(this.attachmentNames=[],H$f=0;H$f<H$Zf;H$f++)this.attachmentNames.push(H$O.getUTFString());var H$yf,H$lf,H$Bf=H$O.getInt16();for(H$f=0;H$f<H$Bf;H$f++)(H$yf=new H$kf).name=H$O.readUTFString(),H$yf.parent=H$O.readUTFString(),H$yf.attachmentName=H$O.readUTFString(),H$yf.srcDisplayIndex=H$yf.displayIndex=H$O.getInt16(),(H$yf.templet=this).boneSlotDic[H$yf.name]=H$yf,null==(H$lf=this.bindBoneBoneSlotDic[H$yf.parent])&&(this.bindBoneBoneSlotDic[H$yf.parent]=H$lf=[]),H$lf.push(H$yf),this.boneSlotArray.push(H$yf);var H$$f,H$hf,H$Af,H$xf=H$O.readUTFString().split("\n"),H$Sf=0,H$zf=H$O.getUint8(),H$Cf=0,H$sf=0,H$af=0,H$If=0,H$nf=0,H$_f=0,H$Gf=0;for(H$f=0;H$f<H$zf;H$f++){for((H$$f=new H$Mf).name=H$xf[H$Sf++],H$Cf=H$O.getUint8(),H$K=0;H$K<H$Cf;H$K++){for((H$hf=new H$rf).name=H$xf[H$Sf++],H$yf=this.boneSlotDic[H$hf.name],H$sf=H$O.getUint8(),H$Y=0;H$Y<H$sf;H$Y++){if(H$Af=new H$wf,this.skinSlotDisplayDataArr.push(H$Af),H$Af.name=H$xf[H$Sf++],H$Af.attachmentName=H$xf[H$Sf++],H$Af.transform=new H$jf,H$Af.transform.scX=H$O.getFloat32(),H$Af.transform.skX=H$O.getFloat32(),H$Af.transform.skY=H$O.getFloat32(),H$Af.transform.scY=H$O.getFloat32(),H$Af.transform.x=H$O.getFloat32(),H$Af.transform.y=H$O.getFloat32(),H$hf.displayArr.push(H$Af),H$Af.width=H$O.getFloat32(),H$Af.height=H$O.getFloat32(),H$Af.type=H$O.getUint8(),H$Af.verLen=H$O.getUint16(),0<(H$m=H$O.getUint16()))for(H$Af.bones=[],H$X=0;H$X<H$m;H$X++){var H$mf=H$O.getUint16();H$Af.bones.push(H$mf)}if(0<(H$af=H$O.getUint16()))for(H$Af.uvs=[],H$X=0;H$X<H$af;H$X++)H$Af.uvs.push(H$O.getFloat32());if(0<(H$If=H$O.getUint16()))for(H$Af.weights=[],H$X=0;H$X<H$If;H$X++)H$Af.weights.push(H$O.getFloat32());if(0<(H$nf=H$O.getUint16()))for(H$Af.triangles=[],H$X=0;H$X<H$nf;H$X++)H$Af.triangles.push(H$O.getUint16());if(0<(H$_f=H$O.getUint16()))for(H$Af.vertices=[],H$X=0;H$X<H$_f;H$X++)H$Af.vertices.push(H$O.getFloat32());if(0<(H$Gf=H$O.getUint16()))for(H$Af.lengths=[],H$X=0;H$X<H$Gf;H$X++)H$Af.lengths.push(H$O.getFloat32())}H$$f.slotArr.push(H$hf)}this.skinDic[H$$f.name]=H$$f,this.skinDataArray.push(H$$f)}1==H$O.getUint8()?(this.yReverseMatrix=new H$Vf(1,0,0,-1,0,0),H$G&&H$G.setTempMatrix(this.yReverseMatrix)):H$G&&H$G.setTempMatrix(new H$Vf),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},H$f.getTexture=function(H$f){var H$K=this.subTextureDic[H$f];return H$K||(H$K=this.subTextureDic[H$f.substr(0,H$f.length-1)]),null==H$K?this._mainTexture:H$K},H$f.showSkinByIndex=function(H$f,H$K,H$Y){if(void 0===H$Y&&(H$Y=!0),H$K<0&&H$K>=this.skinDataArray.length)return!1;var H$X,H$L,H$H=0,H$E=0,H$d=this.skinDataArray[H$K];if(H$d){for(H$H=0,H$E=H$d.slotArr.length;H$H<H$E;H$H++)(H$L=H$d.slotArr[H$H])&&(H$X=H$f[H$L.name])&&(H$X.showSlotData(H$L,H$Y),H$Y&&"undefined"!=H$X.attachmentName&&"null"!=H$X.attachmentName?H$X.showDisplayByName(H$X.attachmentName):H$X.showDisplayByIndex(H$X.displayIndex));return!0}return!1},H$f.getSkinIndexByName=function(H$f){for(var H$K=0,H$Y=this.skinDataArray.length;H$K<H$Y;H$K++)if(this.skinDataArray[H$K].name==H$f)return H$K;return-1},H$f.getGrahicsDataWithCache=function(H$f,H$K){return this._graphicsCache[H$f][H$K]},H$f.setGrahicsDataWithCache=function(H$f,H$K,H$Y){this._graphicsCache[H$f][H$K]=H$Y},H$f.destroy=function(){var H$f;for(var H$K in this._isDestroyed=!0,this.subTextureDic)(H$f=this.subTextureDic[H$K])&&H$f.destroy();for(H$K in this._textureDic)(H$f=this._textureDic[H$K])&&H$f.destroy();for(var H$Y=0,H$X=this.skinSlotDisplayDataArr.length;H$Y<H$X;H$Y++)this.skinSlotDisplayDataArr[H$Y].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete H$L.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},H$f.getAniNameByIndex=function(H$f){var H$K=this.getAnimation(H$f);return H$K?H$K.name:null},H$H(0,H$f,"rate",function(){return this._rate},function(H$f){this._rate=H$f}),H$L.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",H$L.TEMPLET_DICTIONARY=null,H$L}(H$e)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(H$f,H$K){"use strict";for(var H$Y in Object.defineProperty(H$K,"__esModule",{value:!0}),Laya){var H$X=Laya[H$Y];H$X&&H$X.__isclass&&(H$K[H$Y]=H$X)}});