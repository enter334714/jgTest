var Laya=window.Laya=function(Z$l,Z$a){var Z$m={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(Z$a,Z$b){return 1==arguments.length?Z$m.__presubstr.call(this,Z$a):Z$m.__presubstr.call(this,Z$a,0<Z$b?Z$b:this.length+Z$b)},__init:function(Z$a){Z$a.forEach(function(Z$a){Z$a.__init$&&Z$a.__init$()})},__isClass:function(Z$a){return Z$a&&(Z$a.__isclass||Z$a==Object||Z$a==String||Z$a==Array)},__newvec:function(Z$a,Z$b){var Z$c=[];Z$c.length=Z$a;for(var Z$d=0;Z$d<Z$a;Z$d++)Z$c[Z$d]=Z$b;return Z$c},__extend:function(Z$a,Z$b){for(var Z$c in Z$b)if(Z$b.hasOwnProperty(Z$c)){var Z$d=Object.getOwnPropertyDescriptor(Z$b,Z$c),Z$e=Z$d.get,Z$f=Z$d.set;Z$e||Z$f?Z$e&&Z$f?Object.defineProperty(Z$a,Z$c,Z$d):(Z$e&&Object.defineProperty(Z$a,Z$c,Z$e),Z$f&&Object.defineProperty(Z$a,Z$c,Z$f)):Z$a[Z$c]=Z$b[Z$c]}function Z$i(){Z$m.un(this,"constructor",Z$a)}Z$i.prototype=Z$b.prototype,Z$a.prototype=new Z$i,Z$m.un(Z$a.prototype,"__imps",Z$m.__copy({},Z$b.prototype.__imps))},__copy:function(Z$a,Z$b){if(!Z$b)return null;for(var Z$c in Z$a=Z$a||{},Z$b)Z$a[Z$c]=Z$b[Z$c];return Z$a},__package:function(Z$a,Z$b){if(!Z$m.__packages[Z$a]){Z$m.__packages[Z$a]=!0;var Z$c=Z$l,Z$d=Z$a.split(".");if(1<Z$d.length)for(var Z$e=0,Z$f=Z$d.length-1;Z$e<Z$f;Z$e++){var Z$i=Z$c[Z$d[Z$e]];Z$c=Z$i||(Z$c[Z$d[Z$e]]={})}Z$c[Z$d[Z$d.length-1]]||(Z$c[Z$d[Z$d.length-1]]=Z$b||{})}},__hasOwnProperty:function(Z$a,Z$b){return Z$b=Z$b||this,Object.hasOwnProperty.call(Z$b,Z$a)||function Z$a(Z$b,Z$c){if(Object.hasOwnProperty.call(Z$c.prototype,Z$b))return!0;var Z$d=Z$c.prototype.__super;return null==Z$d?null:Z$a(Z$b,Z$d)}(Z$a,Z$b.__class)},__typeof:function(Z$a,Z$b){if(!Z$a||!Z$b)return!1;if(Z$b===String)return"string"==typeof Z$a;if(Z$b===Number)return"number"==typeof Z$a;if(Z$b.__interface__)Z$b=Z$b.__interface__;else if("string"!=typeof Z$b)return Z$a instanceof Z$b;return Z$a.__imps&&Z$a.__imps[Z$b]||Z$a.__class==Z$b},__as:function(Z$a,Z$b){return this.__typeof(Z$a,Z$b)?Z$a:null},__int:function(Z$a){return Z$a?parseInt(Z$a):0},interface:function(Z$a,Z$b){Z$m.__package(Z$a,{});var Z$c=Z$m.__internals,Z$d=Z$c[Z$a]=Z$c[Z$a]||{self:Z$a};if(Z$b){var Z$e=Z$b.split(",");Z$d.extend=[];for(var Z$f=0;Z$f<Z$e.length;Z$f++){var Z$i=Z$e[Z$f];Z$c[Z$i]=Z$c[Z$i]||{self:Z$i},Z$d.extend.push(Z$c[Z$i])}}var Z$j=Z$l,Z$k=Z$a.split(".");for(Z$f=0;Z$f<Z$k.length-1;Z$f++)Z$j=Z$j[Z$k[Z$f]];Z$j[Z$k[Z$k.length-1]]={__interface__:Z$a}},class:function(Z$a,Z$b,Z$c,Z$d){if(Z$c&&Z$m.__extend(Z$a,Z$c),Z$b)if(Z$m.__package(Z$b,Z$a),Z$m.__classmap[Z$b]=Z$a,0<Z$b.indexOf(".")){if(0==Z$b.indexOf("laya.")){var Z$e=Z$b.split(".");Z$d=Z$d||Z$e[Z$e.length-1],Z$m[Z$d]&&console.log("Warning!,this class["+Z$d+"] already exist:",Z$m[Z$d]),Z$m[Z$d]=Z$a}}else"Main"==Z$b?Z$l.Main=Z$a:"MainWX"==Z$b?Z$l.MainWX=Z$a:(Z$m[Z$b]&&console.log("Error!,this class["+Z$b+"] already exist:",Z$m[Z$b]),Z$m[Z$b]=Z$a);var Z$f=Z$m.un,Z$i=Z$a.prototype;Z$f(Z$i,"hasOwnProperty",Z$m.__hasOwnProperty),Z$f(Z$i,"__class",Z$a),Z$f(Z$i,"__super",Z$c),Z$f(Z$i,"__className",Z$b),Z$f(Z$a,"__super",Z$c),Z$f(Z$a,"__className",Z$b),Z$f(Z$a,"__isclass",!0),Z$f(Z$a,"super",function(Z$a){this.__super.call(Z$a)})},imps:function(Z$a,Z$b){if(!Z$b)return null;var Z$e=Z$a.__imps||Z$m.un(Z$a,"__imps",{});function Z$f(Z$a){var Z$b,Z$c;if((Z$b=Z$m.__internals[Z$a])&&(Z$e[Z$a]=!0,Z$c=Z$b.extend))for(var Z$d=0;Z$d<Z$c.length;Z$d++)Z$f(Z$c[Z$d].self)}for(var Z$c in Z$b)Z$f(Z$c)},superSet:function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.prototype["_$set_"+Z$c];Z$e&&Z$e.call(Z$b,Z$d)},superGet:function(Z$a,Z$b,Z$c){var Z$d=Z$a.prototype["_$get_"+Z$c];return Z$d?Z$d.call(Z$b):null},getset:function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$a?(Z$d&&(Z$b["_$GET_"+Z$c]=Z$d),Z$e&&(Z$b["_$SET_"+Z$c]=Z$e)):(Z$d&&Z$m.un(Z$b,"_$get_"+Z$c,Z$d),Z$e&&Z$m.un(Z$b,"_$set_"+Z$c,Z$e)),Z$d&&Z$e?Object.defineProperty(Z$b,Z$c,{get:Z$d,set:Z$e,enumerable:!1,configurable:!0}):(Z$d&&Object.defineProperty(Z$b,Z$c,{get:Z$d,enumerable:!1,configurable:!0}),Z$e&&Object.defineProperty(Z$b,Z$c,{set:Z$e,enumerable:!1,configurable:!0}))},static:function(Z$c,Z$d){for(var Z$e=0,Z$a=Z$d.length;Z$e<Z$a;Z$e+=2)if("length"==Z$d[Z$e])Z$c.length=Z$d[Z$e+1].call(Z$c);else{function Z$b(){var Z$b=Z$d[Z$e],Z$a=Z$d[Z$e+1];Object.defineProperty(Z$c,Z$b,{get:function(){return delete this[Z$b],this[Z$b]=Z$a.call(this)},set:function(Z$a){delete this[Z$b],this[Z$b]=Z$a},enumerable:!0,configurable:!0})}Z$b()}},un:function(Z$a,Z$b,Z$c){return Z$c||(Z$c=Z$a[Z$b]),Z$m.__propun.value=Z$c,Object.defineProperty(Z$a,Z$b,Z$m.__propun),Z$c},uns:function(Z$b,Z$a){Z$a.forEach(function(Z$a){Z$m.un(Z$b,Z$a)})}};return Z$l.console=Z$l.console||{log:function(){}},Z$l.trace=Z$l.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),Z$m}(window,document);!function(Z$a,Z$b,Z$c){Z$c.un,Z$c.uns,Z$c.static,Z$c.class,Z$c.getset,Z$c.__newvec}(window,document,Laya),function(Z$i,Z$b,Z$z){Z$z.un,Z$z.uns;var Z$k=Z$z.static,Z$m=Z$z.class,Z$q=Z$z.getset;Z$z.__newvec;Z$z.interface("laya.runtime.IMarket"),Z$z.interface("laya.filters.IFilter"),Z$z.interface("laya.display.ILayout"),Z$z.interface("laya.resource.IDispose"),Z$z.interface("laya.runtime.IPlatform"),Z$z.interface("laya.resource.IDestroy"),Z$z.interface("laya.runtime.IConchNode"),Z$z.interface("laya.filters.IFilterAction"),Z$z.interface("laya.runtime.ICPlatformClass"),Z$z.interface("laya.resource.ICreateResource"),Z$z.interface("laya.runtime.IConchRenderObject"),Z$z.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var Z$F=function(){function Z$f(){}return Z$m(Z$f,"laya.utils.RunDriver"),Z$f.FILTER_ACTIONS=[],Z$f.pixelRatio=-1,Z$f._charSizeTestDiv=null,Z$f.now=function(){return Date.now()},Z$f.getWindow=function(){return Z$i},Z$f.getPixelRatio=function(){if(Z$f.pixelRatio<0){var Z$a=Z$O.context,Z$b=Z$a.backingStorePixelRatio||Z$a.webkitBackingStorePixelRatio||Z$a.mozBackingStorePixelRatio||Z$a.msBackingStorePixelRatio||Z$a.oBackingStorePixelRatio||Z$a.backingStorePixelRatio||1;(Z$f.pixelRatio=(Z$O.window.devicePixelRatio||1)/Z$b)<1&&(Z$f.pixelRatio=1)}return Z$f.pixelRatio},Z$f.getIncludeStr=function(Z$a){return null},Z$f.createShaderCondition=function(Z$a){var Z$b="(function() {return "+Z$a+";})";return Z$z._runScript(Z$b)},Z$f.fontMap=[],Z$f.measureText=function(Z$a,Z$b){var Z$c=Z$f.hanzi.test(Z$a);if(Z$c&&Z$f.fontMap[Z$b])return Z$f.fontMap[Z$b];var Z$d=Z$O.context;Z$d.font=Z$b;var Z$e=Z$d.measureText(Z$a);return Z$e||(Z$e={width:16,height:16}),Z$c&&(Z$f.fontMap[Z$b]=Z$e),Z$e},Z$f.getWebGLContext=function(Z$a){},Z$f.beginFlush=function(){},Z$f.endFinish=function(){},Z$f.addToAtlas=null,Z$f.flashFlushImage=function(Z$a){},Z$f.drawToCanvas=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=Z$va.create("2D"),Z$j=new Z$K(Z$c,Z$d,Z$i);return Z$L.renders[Z$b]._fun(Z$a,Z$j,Z$e,Z$f),Z$i},Z$f.createParticleTemplate2D=null,Z$f.createGLTextur=null,Z$f.createWebGLContext2D=null,Z$f.changeWebGLSize=function(Z$a,Z$b){},Z$f.createRenderSprite=function(Z$a,Z$b){return new Z$L(Z$a,Z$b)},Z$f.createFilterAction=function(Z$a){return new Z$v},Z$f.createGraphics=function(){return new Z$o},Z$f.clear=function(Z$a){Z$J._context.ctx.clear()},Z$f.cancelLoadByUrl=function(Z$a){},Z$f.clearAtlas=function(Z$a){},Z$f.isAtlas=function(Z$a){return!1},Z$f.addTextureToAtlas=function(Z$a){},Z$f.getTexturePixels=function(Z$a,Z$b,Z$c,Z$d,Z$e){return null},Z$f.skinAniSprite=function(){return null},Z$f.update3DLoop=function(){},Z$k(Z$f,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),Z$f}(),Z$d=(Z$q(1,Z$z,"alertGlobalError",null,function(Z$a){var Z$f=0;Z$O.window.onerror=Z$a?function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$f++<5&&Z$e&&alert(Z$e.stack||Z$e)}:null}),Z$z.init=function(Z$a,Z$b,Z$c){for(var Z$d=[],Z$e=2,Z$f=arguments.length;Z$e<Z$f;Z$e++)Z$d.push(arguments[Z$e]);if(!Z$z._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=Z$z._arrayBufferSlice),Z$z._isinit=!0,Z$O.__init__(),Z$M.__init__(),Z$o.__init__(),Z$z.timer=new Z$Y,Z$z.scaleTimer=new Z$Y,Z$z.loader=new Z$ka,Z$g.__init__(),Z$e=0;for(var Z$i=Z$d.length;Z$e<Z$i;Z$e++)Z$d[Z$e].enable&&Z$d[Z$e].enable();return Z$p.__init__(),Z$j.__init__(),Z$N.__init__(),Z$Q.beginCheck(),Z$z._currentStage=Z$z.stage=new Z$ta,Z$z.stage.conchModel&&Z$z.stage.conchModel.setRootNode(),Z$z._getUrlPath(),Z$z.render=new Z$J(0,0),Z$z.stage.size(Z$a,Z$b),Z$L.__init__(),Z$n.__init__(),Z$r.instance.__init__(Z$z.stage,Z$J.canvas),Z$xa.__init__(),Z$E.autoStopMusic=!0,Z$C.__init__(),Z$J.canvas}},Z$z._getUrlPath=function(){var Z$a=Z$O.window.location,Z$b=Z$a.pathname;Z$b=Z$b&&":"==Z$b.charAt(2)?Z$b.substring(1):Z$b,Z$I.rootPath=Z$I.basePath=Z$I.getPath("file:"==Z$a.protocol?Z$b:Z$a.protocol+"//"+Z$a.host+Z$a.pathname)},Z$z._arrayBufferSlice=function(Z$a,Z$b){var Z$c=new Uint8Array(this,Z$a,Z$b-Z$a),Z$d=new Uint8Array(Z$c.length);return Z$d.set(Z$c),Z$d.buffer},Z$z._runScript=function(Z$a){return Z$O.window[Z$z._evcode](Z$a)},Z$z.stage=null,Z$z.timer=null,Z$z.scaleTimer=null,Z$z.loader=null,Z$z.version="1.8.6",Z$z.render=null,Z$z._currentStage=null,Z$z._isinit=!1,Z$z.isDebug=!1,Z$z.MiniAdpter={init:function(){Z$i.navigator&&Z$i.navigator.userAgent&&-1<Z$i.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},Z$k(Z$z,["conchMarket",function(){return this.conchMarket=Z$i.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=Z$i.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function Z$a(){}return Z$m(Z$a,"Config"),Z$a.WebGLTextCacheCount=500,Z$a.atlasEnable=!1,Z$a.showCanvasMark=!1,Z$a.animationInterval=50,Z$a.isAntialias=!1,Z$a.isAlpha=!1,Z$a.premultipliedAlpha=!0,Z$a.isStencil=!0,Z$a.preserveDrawingBuffer=!1,Z$a}()),Z$l=function(){function Z$l(){this._events=null}Z$m(Z$l,"laya.events.EventDispatcher");var Z$a=Z$l.prototype;return Z$a.hasListener=function(Z$a){return!!(this._events&&this._events[Z$a])},Z$a.getListener=function(Z$a){return this._events?this._events[Z$a]:null},Z$a.event=function(Z$a,Z$b){if(!this._events||!this._events[Z$a])return!1;var Z$c=this._events[Z$a];if(Z$c.lock)Z$c.queue||(Z$c.queue=[]),Z$c.queue.push(Z$b);else{var Z$d;for(Z$c.lock=!0,Z$c.cursor=Z$c.head;Z$c.cursor;)(Z$d=Z$c.cursor).recover?(Z$c.head=Z$c.tail=Z$c.cursor=null,console.error("node is recover："+Z$d.id)):(Z$c.cursor=Z$d.next,Z$d.once&&Z$l.delNode(Z$c,Z$d),Z$d.method&&(null!=Z$b?Z$d.args?Z$d.method.apply(Z$d.caller,Z$d.args.concat(Z$b)):Z$b instanceof Array?Z$d.method.apply(Z$d.caller,Z$b):Z$d.caller?Z$d.method.call(Z$d.caller,Z$b):Z$z.recordError("事件派发错误","node.caller:"+Z$d.caller+"node.method:"+Z$d.method+"data:"+Z$b+"node.prev"+Z$d.prev):Z$d.method.apply(Z$d.caller,Z$d.args)),Z$d.once&&Z$l.recoverHandler(Z$d));Z$c.lock=!1,!Z$c.head&&this._events&&this._events[Z$a]==Z$c&&delete this._events[Z$a],Z$c.queue&&Z$c.queue.length&&this.event(Z$a,Z$c.queue.shift())}return!0},Z$a.on=function(Z$a,Z$b,Z$c,Z$d){return this._createListener(Z$a,Z$b,Z$c,Z$d,!1)},Z$a.once=function(Z$a,Z$b,Z$c,Z$d){return this._createListener(Z$a,Z$b,Z$c,Z$d,!0)},Z$a._createListener=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$f&&(Z$f=!0),Z$f&&this.off(Z$a,Z$b,Z$c,Z$e);var Z$i=Z$l.createHandler(Z$b||this,Z$c,Z$d,Z$e);this._events||(this._events={});var Z$j=this._events,Z$k=Z$j[Z$a];return Z$k?Z$k.tail?(Z$i.prev=Z$k.tail,Z$k.tail.next=Z$i,Z$k.tail=Z$i):Z$k.head=Z$k.tail=Z$i:Z$j[Z$a]={head:Z$i,tail:Z$i,cursor:null,lock:!1},this},Z$a.off=function(Z$a,Z$b,Z$c,Z$d){if(void 0===Z$d&&(Z$d=!1),!this._events||!this._events[Z$a])return this;for(var Z$e=this._events[Z$a],Z$f=Z$e.head;Z$f;){if((!Z$b||Z$f.caller===Z$b)&&Z$f.method===Z$c&&(!Z$d||Z$f.once)){Z$l.delNode(Z$e,Z$f),Z$e.cursor==Z$f&&(Z$e.cursor=Z$f.next),Z$l.recoverHandler(Z$f);break}Z$f=Z$f.next}return this},Z$a.offAll=function(Z$a){var Z$b=this._events;if(!Z$b)return this;if(Z$a)this._recoverHandlers(Z$b[Z$a]),delete Z$b[Z$a];else{for(var Z$c in Z$b)this._recoverHandlers(Z$b[Z$c]);this._events=null}return this},Z$a._recoverHandlers=function(Z$a){if(Z$a){for(var Z$b=Z$a.head;Z$b;){Z$l.delNode(Z$a,Z$b);var Z$c=Z$b.next;Z$l.recoverHandler(Z$b),Z$b=Z$c}Z$a.cursor=null}},Z$a.isMouseEvent=function(Z$a){return Z$l.MOUSE_EVENTS[Z$a]},Z$l.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},Z$l.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},Z$l.delNode=function(Z$a,Z$b){Z$b.prev?Z$b.prev.next=Z$b.next:Z$a.head=Z$b.next,Z$b.next?Z$b.next.prev=Z$b.prev:Z$a.tail=Z$b.prev},Z$l.createHandler=function(Z$a,Z$b,Z$c,Z$d){var Z$e=500<Z$l._freeHandler.length?Z$l._freeHandler.shift():null;if(Z$e)if(Z$e.recover)Z$e.recover=!1,Z$e.caller=Z$a,Z$e.method=Z$b,Z$e.args=Z$c,Z$e.once=Z$d;else{var Z$f="";try{arguments.propertyIsEnumerable.caller}catch(Z$a){Z$f=Z$a.stack}var Z$i=Z$e.caller?(Z$e.caller.__proto__&&Z$e.caller.__proto__.constructor&&Z$e.caller.__proto__.constructor.name)+"|"+Z$e.caller.__className+"|"+Z$e.caller.name:"",Z$j=Z$e.method?Z$e.method.name:"";Z$z.recordError("EventDispatcher重复创建","caller="+Z$i+"  method="+Z$j+"  stack="+Z$f),Z$e={id:++Z$l._nodeCount,caller:Z$a,method:Z$b,args:Z$c,once:Z$d,recover:!1}}else Z$e={id:++Z$l._nodeCount,caller:Z$a,method:Z$b,args:Z$c,once:Z$d,recover:!1};return Z$e.prev=Z$e.next=null,Z$e},Z$l.recoverHandler=function(Z$a){if(Z$a.recover){if(Z$l._errorCount<5){Z$l._errorCount++;var Z$b="";try{arguments.propertyIsEnumerable.caller}catch(Z$a){Z$b=Z$a.stack}var Z$c=Z$a.caller?(Z$a.caller.__proto__&&Z$a.caller.__proto__.constructor&&Z$a.caller.__proto__.constructor.name)+"|"+Z$a.caller.__className+"|"+Z$a.caller.name:"",Z$d=Z$a.method?Z$a.method.name:"";Z$z.recordError("EventDispatcher重复回收","id="+Z$a.id+"  caller="+Z$c+"  method="+Z$d+"  stack="+Z$b)}Z$a.caller=Z$a.method=Z$a.args=Z$a.prev=null}else Z$a.recover=!0,Z$a.caller=Z$a.method=Z$a.args=Z$a.prev=Z$a.next=null,Z$l._freeHandler&&Z$l._freeHandler.length<3e3&&Z$l._freeHandler.push(Z$a)},Z$l._freeHandler=[],Z$l._nodeCount=0,Z$l._errorCount=0,Z$l}(),Z$u=function(){function Z$e(Z$a,Z$b,Z$c,Z$d){this.once=!1,void(this._id=0)===Z$d&&(Z$d=!1),this.setTo(Z$a,Z$b,Z$c,Z$d)}Z$m(Z$e,"laya.utils.Handler");var Z$a=Z$e.prototype;return Z$a.setTo=function(Z$a,Z$b,Z$c,Z$d){return this._id=Z$e._gid++,this.caller=Z$a,this.method=Z$b,this.args=Z$c,this.once=Z$d,this},Z$a.run=function(){if(null==this.method)return null;var Z$a=this._id,Z$b=this.method.apply(this.caller,this.args);return this._id===Z$a&&this.once&&this.recover(),Z$b},Z$a.runWith=function(Z$a){if(null==this.method)return null;var Z$b=this._id;if(null==Z$a)var Z$c=this.method.apply(this.caller,this.args);else Z$c=this.args||Z$a.unshift?this.args?this.method.apply(this.caller,this.args.concat(Z$a)):this.method.apply(this.caller,Z$a):this.method.call(this.caller,Z$a);return this._id===Z$b&&this.once&&this.recover(),Z$c},Z$a.clear=function(){return this.caller=null,this.method=null,this.args=null,this},Z$a.recover=function(){0<this._id&&(this._id=0,this.clear())},Z$e.create=function(Z$a,Z$b,Z$c,Z$d){return void 0===Z$d&&(Z$d=!0),new Z$e(Z$a,Z$b,Z$c,Z$d)},Z$e._gid=1,Z$e}(),Z$D=function(){function Z$a(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}Z$m(Z$a,"laya.display.BitmapFont");var Z$b=Z$a.prototype;return Z$b.loadFont=function(Z$a,Z$b){this._path=Z$a,this._complete=Z$b,Z$z.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],Z$u.create(this,this.onLoaded))},Z$b.onLoaded=function(){this.parseFont(Z$ja.getRes(this._path),Z$ja.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},Z$b.parseFont=function(Z$a,Z$b){if(null!=Z$a&&null!=Z$b){this._texture=Z$b;var Z$c=Z$a.getElementsByTagName("info");if(!Z$c[0].getAttributeNode)return this.parseFont2(Z$a,Z$b);this.fontSize=parseInt(Z$c[0].getAttributeNode("size").nodeValue);var Z$d,Z$e=Z$c[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(Z$e[0]),parseInt(Z$e[1]),parseInt(Z$e[2]),parseInt(Z$e[3])],Z$d=Z$a.getElementsByTagName("char");var Z$f=0;for(Z$f=0;Z$f<Z$d.length;Z$f++){var Z$i=Z$d[Z$f],Z$j=parseInt(Z$i.getAttributeNode("id").nodeValue),Z$k=parseInt(Z$i.getAttributeNode("xoffset").nodeValue)/1,Z$l=parseInt(Z$i.getAttributeNode("yoffset").nodeValue)/1,Z$m=parseInt(Z$i.getAttributeNode("xadvance").nodeValue)/1,Z$n=new Z$B;Z$n.x=parseInt(Z$i.getAttributeNode("x").nodeValue),Z$n.y=parseInt(Z$i.getAttributeNode("y").nodeValue),Z$n.width=parseInt(Z$i.getAttributeNode("width").nodeValue),Z$n.height=parseInt(Z$i.getAttributeNode("height").nodeValue);var Z$o=Z$ma.create(Z$b,Z$n.x,Z$n.y,Z$n.width,Z$n.height,Z$k,Z$l);this._maxWidth=Math.max(this._maxWidth,Z$m+this.letterSpacing),this._fontCharDic[Z$j]=Z$o,this._fontWidthMap[Z$j]=Z$m}}},Z$b.parseFont2=function(Z$a,Z$b){if(null!=Z$a&&null!=Z$b){this._texture=Z$b;var Z$c=Z$a.getElementsByTagName("info");this.fontSize=parseInt(Z$c[0].attributes.size.nodeValue);var Z$d=Z$c[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(Z$d[0]),parseInt(Z$d[1]),parseInt(Z$d[2]),parseInt(Z$d[3])];var Z$e=Z$a.getElementsByTagName("char"),Z$f=0;for(Z$f=0;Z$f<Z$e.length;Z$f++){var Z$i=Z$e[Z$f].attributes,Z$j=parseInt(Z$i.id.nodeValue),Z$k=parseInt(Z$i.xoffset.nodeValue)/1,Z$l=parseInt(Z$i.yoffset.nodeValue)/1,Z$m=parseInt(Z$i.xadvance.nodeValue)/1,Z$n=new Z$B;Z$n.x=parseInt(Z$i.x.nodeValue),Z$n.y=parseInt(Z$i.y.nodeValue),Z$n.width=parseInt(Z$i.width.nodeValue),Z$n.height=parseInt(Z$i.height.nodeValue);var Z$o=Z$ma.create(Z$b,Z$n.x,Z$n.y,Z$n.width,Z$n.height,Z$k,Z$l);this._maxWidth=Math.max(this._maxWidth,Z$m+this.letterSpacing),this._fontCharDic[Z$j]=Z$o,this._fontWidthMap[Z$j]=Z$m}}},Z$b.getCharTexture=function(Z$a){return this._fontCharDic[Z$a.charCodeAt(0)]},Z$b.destroy=function(){if(this._texture){for(var Z$a in this._fontCharDic){var Z$b=this._fontCharDic[Z$a];Z$b&&Z$b.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},Z$b.setSpaceWidth=function(Z$a){this._spaceWidth=Z$a},Z$b.getCharWidth=function(Z$a){var Z$b=Z$a.charCodeAt(0);return this._fontWidthMap[Z$b]?this._fontWidthMap[Z$b]+this.letterSpacing:" "==Z$a?this._spaceWidth+this.letterSpacing:0},Z$b.getTextWidth=function(Z$a){for(var Z$b=0,Z$c=0,Z$d=Z$a.length;Z$c<Z$d;Z$c++)Z$b+=this.getCharWidth(Z$a.charAt(Z$c));return Z$b},Z$b.getMaxWidth=function(){return this._maxWidth},Z$b.getMaxHeight=function(){return this.fontSize},Z$b.drawText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i,Z$j=this.getTextWidth(Z$a),Z$k=0;"center"===Z$e&&(Z$k=(Z$f-Z$j)/2),"right"===Z$e&&(Z$k=Z$f-Z$j);for(var Z$l=0,Z$m=0,Z$n=Z$a.length;Z$m<Z$n;Z$m++)(Z$i=this.getCharTexture(Z$a.charAt(Z$m)))&&(Z$b.graphics.drawTexture(Z$i,Z$c+Z$l+Z$k,Z$d),Z$l+=this.getCharWidth(Z$a.charAt(Z$m)))},Z$a}(),Z$j=function(){function Z$c(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=Z$c._TF_EMPTY}Z$m(Z$c,"laya.display.css.Style");var Z$a=Z$c.prototype;return Z$a.getTransform=function(){return this._tf},Z$a.setTransform=function(Z$a){this._tf="none"!==Z$a&&Z$a?Z$a:Z$c._TF_EMPTY},Z$a.setTranslateX=function(Z$a){this._tf===Z$c._TF_EMPTY&&(this._tf=new Z$e),this._tf.translateX=Z$a},Z$a.setTranslateY=function(Z$a){this._tf===Z$c._TF_EMPTY&&(this._tf=new Z$e),this._tf.translateY=Z$a},Z$a.setScaleX=function(Z$a){this._tf===Z$c._TF_EMPTY&&(this._tf=new Z$e),this._tf.scaleX=Z$a},Z$a.setScale=function(Z$a,Z$b){this._tf===Z$c._TF_EMPTY&&(this._tf=new Z$e),this._tf.scaleX=Z$a,this._tf.scaleY=Z$b},Z$a.setScaleY=function(Z$a){this._tf===Z$c._TF_EMPTY&&(this._tf=new Z$e),this._tf.scaleY=Z$a},Z$a.setRotate=function(Z$a){this._tf===Z$c._TF_EMPTY&&(this._tf=new Z$e),this._tf.rotate=Z$a},Z$a.setSkewX=function(Z$a){this._tf===Z$c._TF_EMPTY&&(this._tf=new Z$e),this._tf.skewX=Z$a},Z$a.setSkewY=function(Z$a){this._tf===Z$c._TF_EMPTY&&(this._tf=new Z$e),this._tf.skewY=Z$a},Z$a.destroy=function(){this.scrollRect=null},Z$a.render=function(Z$a,Z$b,Z$c,Z$d){},Z$a.getCSSStyle=function(){return Z$ba.EMPTY},Z$a._enableLayout=function(){return!1},Z$q(0,Z$a,"scaleX",function(){return this._tf.scaleX},function(Z$a){this.setScaleX(Z$a)}),Z$q(0,Z$a,"transform",function(){return this.getTransform()},function(Z$a){this.setTransform(Z$a)}),Z$q(0,Z$a,"translateX",function(){return this._tf.translateX},function(Z$a){this.setTranslateX(Z$a)}),Z$q(0,Z$a,"translateY",function(){return this._tf.translateY},function(Z$a){this.setTranslateY(Z$a)}),Z$q(0,Z$a,"scaleY",function(){return this._tf.scaleY},function(Z$a){this.setScaleY(Z$a)}),Z$q(0,Z$a,"block",function(){return 0!=(1&this._type)}),Z$q(0,Z$a,"skewY",function(){return this._tf.skewY},function(Z$a){this.setSkewY(Z$a)}),Z$q(0,Z$a,"rotate",function(){return this._tf.rotate},function(Z$a){this.setRotate(Z$a)}),Z$q(0,Z$a,"skewX",function(){return this._tf.skewX},function(Z$a){this.setSkewX(Z$a)}),Z$q(0,Z$a,"paddingLeft",function(){return 0}),Z$q(0,Z$a,"paddingTop",function(){return 0}),Z$q(0,Z$a,"absolute",function(){return!0}),Z$c.__init__=function(){Z$c._TF_EMPTY=new Z$e,Z$c.EMPTY=new Z$c},Z$c.EMPTY=null,Z$c._TF_EMPTY=null,Z$c}(),Z$p=function(){function Z$b(Z$a){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=Z$S.create(Z$b.defaultColor),this.family=Z$b.defaultFamily,this.stroke=Z$b._STROKE,this.size=Z$b.defaultSize,Z$a&&Z$a!==Z$b.EMPTY&&Z$a.copyTo(this)}Z$m(Z$b,"laya.display.css.Font");var Z$a=Z$b.prototype;return Z$a.set=function(Z$a){this._text=null;for(var Z$b=Z$a.split(" "),Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++){var Z$e=Z$b[Z$c];switch(Z$e){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<Z$e.indexOf("px")&&(this.size=parseInt(Z$e),this.family=Z$b[Z$c+1],Z$c++)}},Z$a.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},Z$a.copyTo=function(Z$a){Z$a._type=this._type,Z$a._text=this._text,Z$a._weight=this._weight,Z$a._color=this._color,Z$a.family=this.family,Z$a.stroke=this.stroke!=Z$b._STROKE?this.stroke.slice():Z$b._STROKE,Z$a.indent=this.indent,Z$a.size=this.size},Z$q(0,Z$a,"password",function(){return 0!=(1024&this._type)},function(Z$a){Z$a?this._type|=1024:this._type&=-1025}),Z$q(0,Z$a,"color",function(){return this._color.strColor},function(Z$a){this._color=Z$S.create(Z$a)}),Z$q(0,Z$a,"italic",function(){return 0!=(512&this._type)},function(Z$a){Z$a?this._type|=512:this._type&=-513}),Z$q(0,Z$a,"bold",function(){return 0!=(2048&this._type)},function(Z$a){Z$a?this._type|=2048:this._type&=-2049}),Z$q(0,Z$a,"weight",function(){return""+this._weight},function(Z$a){var Z$b=0;switch(Z$a){case"normal":break;case"bold":this.bold=!0,Z$b=700;break;case"bolder":Z$b=800;break;case"lighter":Z$b=100;break;default:Z$b=parseInt(Z$a)}this._weight=Z$b,this._text=null}),Z$q(0,Z$a,"decoration",function(){return this._decoration?this._decoration.value:null},function(Z$a){var Z$b=Z$a.split(" ");switch(this._decoration||(this._decoration={}),Z$b[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=Z$b[0]}Z$b[1]&&(this._decoration.color=Z$S.create(Z$b)),this._decoration.value=Z$a}),Z$b.__init__=function(){Z$b.EMPTY=new Z$b(null)},Z$b.EMPTY=null,Z$b.defaultColor="#000000",Z$b.defaultSize=12,Z$b.defaultFamily="Arial",Z$b.defaultFont="12px Arial",Z$b._STROKE=[0,"#000000"],Z$b._ITALIC=512,Z$b._PASSWORD=1024,Z$b._BOLD=2048,Z$b}(),Z$e=function(){function Z$a(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return Z$m(Z$a,"laya.display.css.TransformInfo"),Z$a}(),Z$o=function(){function Z$n(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,Z$J.isConchNode){this._nativeObj=new Z$i._conchGraphics,this.id=this._nativeObj.conchID}}Z$m(Z$n,"laya.display.Graphics");var Z$a=Z$n.prototype;return Z$a.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},Z$a.clear=function(Z$a){void 0===Z$a&&(Z$a=!1);var Z$b=0,Z$c=0;if(Z$a){var Z$d=this._one;if(this._cmds){for(Z$c=this._cmds.length,Z$b=0;Z$b<Z$c;Z$b++)!(Z$d=this._cmds[Z$b])||Z$d.callee!==Z$J._context._drawTexture&&Z$d.callee!==Z$J._context._drawTextureWithTransform||(Z$d[0]=null,Z$n._cache.push(Z$d));this._cmds.length=0}else Z$d&&(!Z$d||Z$d.callee!==Z$J._context._drawTexture&&Z$d.callee!==Z$J._context._drawTextureWithTransform||(Z$d[0]=null,Z$n._cache.push(Z$d)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(Z$b=0,Z$c=this._vectorgraphArray.length;Z$b<Z$c;Z$b++)Z$_.getInstance().deleteShape(this._vectorgraphArray[Z$b]);this._vectorgraphArray.length=0}},Z$a._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},Z$a._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new Z$c,this._graphicBounds._graphics=this)},Z$a._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},Z$a._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},Z$a.getBounds=function(Z$a){return void 0===Z$a&&(Z$a=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(Z$a)},Z$a.getBoundPoints=function(Z$a){return void 0===Z$a&&(Z$a=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(Z$a)},Z$a._addCmd=function(Z$a){this._cmds=this._cmds||[],Z$a.callee=Z$a.shift(),this._cmds.push(Z$a)},Z$a.setFilters=function(Z$a){this._saveToCmd(Z$J._context._setFilters,Z$a)},Z$a.drawTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){if(void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0),void 0===Z$i&&(Z$i=1),!Z$a||Z$i<.01)return null;Z$d||(Z$d=Z$a.sourceWidth),Z$e||(Z$e=Z$a.sourceHeight),Z$i=Z$i<0?0:1<Z$i?1:Z$i;var Z$j,Z$k=!Z$J.isWebGL&&(Z$O.onFirefox||Z$O.onEdge||Z$O.onIE||Z$O.onSafari)?.5:0,Z$l=Z$d/Z$a.sourceWidth,Z$m=Z$e/Z$a.sourceHeight;return Z$d=Z$a.width*Z$l,Z$e=Z$a.height*Z$m,Z$a.loaded&&(Z$d<=0||Z$e<=0)?null:(Z$b+=Z$a.offsetX*Z$l,Z$c+=Z$a.offsetY*Z$m,this._sp&&(this._sp._renderType|=512),Z$b-=Z$k,Z$c-=Z$k,Z$d+=2*Z$k,Z$e+=2*Z$k,Z$n._cache.length?((Z$j=Z$n._cache.pop())[0]=Z$a,Z$j[1]=Z$b,Z$j[2]=Z$c,Z$j[3]=Z$d,Z$j[4]=Z$e,Z$j[5]=Z$f,Z$j[6]=Z$i):Z$j=[Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i],Z$j.callee=Z$f||1!=Z$i?Z$J._context._drawTextureWithTransform:Z$J._context._drawTexture,null!=this._one||Z$f||1!=Z$i?this._saveToCmd(Z$j.callee,Z$j):(this._one=Z$j,this._render=this._renderOneImg),Z$a.loaded||Z$a.once("loaded",this,this._textureLoaded,[Z$a,Z$j]),this._repaint(),Z$j)},Z$a.cleanByTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e){if(void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0),!Z$a)return this.clear();if(this._one&&this._render===this._renderOneImg){Z$d||(Z$d=Z$a.sourceWidth),Z$e||(Z$e=Z$a.sourceHeight);var Z$f=Z$d/Z$a.sourceWidth,Z$i=Z$e/Z$a.sourceHeight;Z$d=Z$a.width*Z$f,Z$e=Z$a.height*Z$i,Z$b+=Z$a.offsetX*Z$f,Z$c+=Z$a.offsetY*Z$i,this._one[0]=Z$a,this._one[1]=Z$b,this._one[2]=Z$c,this._one[3]=Z$d,this._one[4]=Z$e,this._repaint()}else this.clear(),Z$a&&this.drawTexture(Z$a,Z$b,Z$c,Z$d,Z$e)},Z$a.drawTextures=function(Z$a,Z$b){Z$a&&this._saveToCmd(Z$J._context._drawTextures,[Z$a,Z$b])},Z$a.fillTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){if(void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0),void 0===Z$f&&(Z$f="repeat"),Z$a){var Z$j=[Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i||Z$A.EMPTY,{}];Z$a.loaded||Z$a.once("loaded",this,this._textureLoaded,[Z$a,Z$j]),this._saveToCmd(Z$J._context._fillTexture,Z$j)}},Z$a._textureLoaded=function(Z$a,Z$b){Z$b[3]=Z$b[3]||Z$a.width,Z$b[4]=Z$b[4]||Z$a.height,this._repaint()},Z$a.fillCircle=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){Z$c.bitmap.enableMerageInAtlas=!1;var Z$j=new Float32Array(2*(Z$i+1)),Z$k=new Float32Array(2*(Z$i+1)),Z$l=new Uint16Array(3*Z$i),Z$m=2*Math.PI/Z$i,Z$n=0;Z$j[0]=Z$d,Z$j[1]=Z$e,Z$k[0]=Z$d/Z$c.width,Z$k[1]=Z$e/Z$c.height;for(var Z$o=2,Z$p=0;Z$p<Z$i;Z$p++){var Z$q=Z$f*Math.cos(Z$n)+Z$d,Z$r=Z$f*Math.sin(Z$n)+Z$e;Z$j[Z$o]=Z$q,Z$j[Z$o+1]=Z$r,Z$k[Z$o]=Z$q/Z$c.width,Z$k[Z$o+1]=Z$r/Z$c.height,Z$n+=Z$m,Z$o+=2}for(Z$p=Z$o=0;Z$p<Z$i;Z$p++)Z$l[Z$o++]=0,Z$l[Z$o++]=Z$p+1,Z$l[Z$o++]=Z$i+1<=Z$p+2?1:Z$p+2;this.drawTriangles(Z$c,Z$a,Z$b,Z$j,Z$k,Z$l)},Z$a.drawTriangles=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){void 0===Z$j&&(Z$j=1),this._saveToCmd(Z$J._context.drawTriangles,[Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l])},Z$a._saveToCmd=function(Z$a,Z$b){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=Z$b,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(Z$b)),Z$b.callee=Z$a,this._repaint(),Z$b},Z$a.clipRect=function(Z$a,Z$b,Z$c,Z$d){this._saveToCmd(Z$J._context._clipRect,[Z$a,Z$b,Z$c,Z$d])},Z$a.fillText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){void 0===Z$i&&(Z$i=0),this._saveToCmd(Z$J._context._fillText,[Z$a,Z$b,Z$c,Z$d||Z$p.defaultFont,Z$e,Z$f])},Z$a.fillBorderText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){this._saveToCmd(Z$J._context._fillBorderText,[Z$a,Z$b,Z$c,Z$d||Z$p.defaultFont,Z$e,Z$f,Z$i,Z$j])},Z$a.strokeText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this._saveToCmd(Z$J._context._strokeText,[Z$a,Z$b,Z$c,Z$d||Z$p.defaultFont,Z$e,Z$f,Z$i])},Z$a.alpha=function(Z$a){Z$a=Z$a<0?0:1<Z$a?1:Z$a,this._saveToCmd(Z$J._context._alpha,[Z$a])},Z$a.setAlpha=function(Z$a){Z$a=Z$a<0?0:1<Z$a?1:Z$a,this._saveToCmd(Z$J._context._setAlpha,[Z$a])},Z$a.transform=function(Z$a,Z$b,Z$c){void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),this._saveToCmd(Z$J._context._transform,[Z$a,Z$b,Z$c])},Z$a.rotate=function(Z$a,Z$b,Z$c){void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),this._saveToCmd(Z$J._context._rotate,[Z$a,Z$b,Z$c])},Z$a.scale=function(Z$a,Z$b,Z$c,Z$d){void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=0),this._saveToCmd(Z$J._context._scale,[Z$a,Z$b,Z$c,Z$d])},Z$a.translate=function(Z$a,Z$b){this._saveToCmd(Z$J._context._translate,[Z$a,Z$b])},Z$a.save=function(){this._saveToCmd(Z$J._context._save,[])},Z$a.restore=function(){this._saveToCmd(Z$J._context._restore,[])},Z$a.replaceText=function(Z$a){this._repaint();var Z$b=this._cmds;if(Z$b){for(var Z$c=Z$b.length-1;-1<Z$c;Z$c--)if(this._isTextCmd(Z$b[Z$c].callee))return Z$b[Z$c][0].toUpperCase?Z$b[Z$c][0]=Z$a:Z$b[Z$c][0].setText(Z$a),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=Z$a:this._one[0].setText(Z$a),!0;return!1},Z$a._isTextCmd=function(Z$a){return Z$a===Z$J._context._fillText||Z$a===Z$J._context._fillBorderText||Z$a===Z$J._context._strokeText},Z$a.replaceTextColor=function(Z$a){this._repaint();var Z$b=this._cmds;if(Z$b)for(var Z$c=Z$b.length-1;-1<Z$c;Z$c--)this._isTextCmd(Z$b[Z$c].callee)&&(Z$b[Z$c][4]=Z$a,Z$b[Z$c][0].toUpperCase||(Z$b[Z$c][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=Z$a,this._one[0].toUpperCase||(this._one[0].changed=!0))},Z$a.loadImage=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=this;void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0);var Z$j=Z$ja.getRes(Z$a);function Z$k(Z$a){Z$a&&(Z$i.drawTexture(Z$a,Z$b,Z$c,Z$d,Z$e),null!=Z$f&&Z$f.call(Z$i._sp,Z$a))}Z$j?Z$k(Z$j):Z$z.loader.load(Z$a,Z$u.create(null,Z$k),null,"image")},Z$a._renderEmpty=function(Z$a,Z$b,Z$c,Z$d){},Z$a._renderAll=function(Z$a,Z$b,Z$c,Z$d){for(var Z$e,Z$f=this._cmds,Z$i=0,Z$j=Z$f.length;Z$i<Z$j;Z$i++)(Z$e=Z$f[Z$i]).callee.call(Z$b,Z$c,Z$d,Z$e)},Z$a._renderOne=function(Z$a,Z$b,Z$c,Z$d){this._one.callee.call(Z$b,Z$c,Z$d,this._one)},Z$a._renderOneImg=function(Z$a,Z$b,Z$c,Z$d){this._one.callee.call(Z$b,Z$c,Z$d,this._one),2305!==Z$a._renderType&&(Z$a._renderType|=1)},Z$a.drawLine=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$f&&(Z$f=1);var Z$i=0;Z$J.isWebGL&&(Z$i=Z$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(Z$i));var Z$j=Z$f%2==0?0:.5,Z$k=[Z$a+Z$j,Z$b+Z$j,Z$c+Z$j,Z$d+Z$j,Z$e,Z$f,Z$i];this._saveToCmd(Z$J._context._drawLine,Z$k)},Z$a.drawLines=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$e&&(Z$e=1);var Z$f=0;if(Z$c&&!(Z$c.length<4)){Z$J.isWebGL&&(Z$f=Z$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(Z$f));var Z$i=Z$e%2==0?0:.5,Z$j=[Z$a+Z$i,Z$b+Z$i,Z$c,Z$d,Z$e,Z$f];this._saveToCmd(Z$J._context._drawLines,Z$j)}},Z$a.drawCurves=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$e&&(Z$e=1);var Z$f=[Z$a,Z$b,Z$c,Z$d,Z$e];this._saveToCmd(Z$J._context._drawCurves,Z$f)},Z$a.drawRect=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){void 0===Z$i&&(Z$i=1);var Z$j=Z$f?Z$i/2:0,Z$k=Z$f?Z$i:0,Z$l=[Z$a+Z$j,Z$b+Z$j,Z$c-Z$k,Z$d-Z$k,Z$e,Z$f,Z$i];this._saveToCmd(Z$J._context._drawRect,Z$l)},Z$a.drawCircle=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$f&&(Z$f=1);var Z$i=Z$e?Z$f/2:0,Z$j=0;Z$J.isWebGL&&(Z$j=Z$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(Z$j));var Z$k=[Z$a,Z$b,Z$c-Z$i,Z$d,Z$e,Z$f,Z$j];this._saveToCmd(Z$J._context._drawCircle,Z$k)},Z$a.drawPie=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){void 0===Z$j&&(Z$j=1);var Z$k=Z$i?Z$j/2:0,Z$l=Z$i?Z$j:0,Z$m=0;Z$J.isWebGL&&(Z$m=Z$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(Z$m));var Z$n=[Z$a+Z$k,Z$b+Z$k,Z$c-Z$l,Z$d,Z$e,Z$f,Z$i,Z$j,Z$m];Z$n[3]=Z$$.toRadian(Z$d),Z$n[4]=Z$$.toRadian(Z$e),this._saveToCmd(Z$J._context._drawPie,Z$n)},Z$a.drawPoly=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$f&&(Z$f=1);var Z$i=0,Z$j=!1;Z$J.isWebGL&&(Z$i=Z$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(Z$i),Z$j=!(6<Z$c.length));var Z$k=Z$e?Z$f%2==0?0:.5:0,Z$l=[Z$a+Z$k,Z$b+Z$k,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j];this._saveToCmd(Z$J._context._drawPoly,Z$l)},Z$a.drawPath=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=[Z$a,Z$b,Z$c,Z$d,Z$e];this._saveToCmd(Z$J._context._drawPath,Z$f)},Z$q(0,Z$a,"cmds",function(){return this._cmds},function(Z$a){this._sp&&(this._sp._renderType|=512),this._cmds=Z$a,this._render=this._renderAll,this._repaint()}),Z$n.__init__=function(){if(Z$J.isConchNode){for(var Z$a=laya.display.Graphics.prototype,Z$b=Z$O.window.ConchGraphics.prototype,Z$c=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],Z$d=0,Z$e=Z$c.length;Z$d<=Z$e;Z$d++){var Z$f=Z$c[Z$d];Z$a[Z$f]=Z$b[Z$f]}Z$a._saveToCmd=null,Z$b.drawImageS&&(Z$a.drawTextures=function(Z$a,Z$b){if(Z$a&&Z$a.loaded&&Z$a.bitmap&&Z$a.source){var Z$c=Z$a.uv,Z$d=Z$a.bitmap.width,Z$e=Z$a.bitmap.height;this.drawImageS(Z$a.bitmap.source,Z$c[0]*Z$d,Z$c[1]*Z$e,(Z$c[2]-Z$c[0])*Z$d,(Z$c[5]-Z$c[3])*Z$e,Z$a.offsetX,Z$a.offsetY,Z$a.width,Z$a.height,Z$b)}}),Z$a.drawTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){if(void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0),void 0===Z$i&&(Z$i=1),Z$a)if(Z$a.loaded){if(Z$a.loaded&&Z$a.bitmap&&Z$a.source&&(Z$d||(Z$d=Z$a.sourceWidth),Z$e||(Z$e=Z$a.sourceHeight),Z$i=Z$i<0?0:1<Z$i?1:Z$i,Z$d=Z$d-Z$a.sourceWidth+Z$a.width,Z$e=Z$e-Z$a.sourceHeight+Z$a.height,!(Z$d<=0||Z$e<=0))){Z$b+=Z$a.offsetX,Z$c+=Z$a.offsetY;var Z$j=Z$a.uv,Z$k=Z$a.bitmap.width,Z$l=Z$a.bitmap.height;Z$j[4]<Z$j[0]&&Z$j[5]<Z$j[1]?this.drawImageM(Z$a.bitmap.source,Z$j[4]*Z$k,Z$j[5]*Z$l,(Z$j[0]-Z$j[4])*Z$k,(Z$j[1]-Z$j[5])*Z$l,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i):this.drawImageM(Z$a.bitmap.source,Z$j[0]*Z$k,Z$j[1]*Z$l,(Z$j[2]-Z$j[0])*Z$k,(Z$j[5]-Z$j[3])*Z$l,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i),this._repaint()}}else Z$a.once("loaded",this,function(){this.drawTexture(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f)})},Z$a.fillTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){if(void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0),void 0===Z$f&&(Z$f="repeat"),Z$a&&Z$a.loaded){var Z$j,Z$k=Z$J._context.ctx,Z$l=Z$a.bitmap.width,Z$m=Z$a.bitmap.height,Z$n=Z$a.uv;Z$j=Z$a.uv!=Z$ma.DEF_UV?Z$k.createPattern(Z$a.bitmap.source,Z$f,Z$n[0]*Z$l,Z$n[1]*Z$m,(Z$n[2]-Z$n[0])*Z$l,(Z$n[5]-Z$n[3])*Z$m):Z$k.createPattern(Z$a.bitmap.source,Z$f);var Z$o=0,Z$p=0;Z$i&&(Z$b+=Z$i.x%Z$a.width,Z$c+=Z$i.y%Z$a.height,Z$o-=Z$i.x%Z$a.width,Z$p-=Z$i.y%Z$a.height),this._fillImage(Z$j,Z$b,Z$c,Z$o,Z$p,Z$d,Z$e)}}}},Z$n._cache=[],Z$n}(),Z$c=function(){function Z$v(){this._cacheBoundsType=!1}Z$m(Z$v,"laya.display.GraphicsBounds");var Z$a=Z$v.prototype;return Z$a.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},Z$a.reset=function(){this._temp&&(this._temp.length=0)},Z$a.getBounds=function(Z$a){return void 0===Z$a&&(Z$a=!1),(!this._bounds||!this._temp||this._temp.length<1||Z$a!=this._cacheBoundsType)&&(this._bounds=Z$B._getWrapRec(this.getBoundPoints(Z$a),this._bounds)),this._cacheBoundsType=Z$a,this._bounds},Z$a.getBoundPoints=function(Z$a){return void 0===Z$a&&(Z$a=!1),(!this._temp||this._temp.length<1||Z$a!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(Z$a)),this._cacheBoundsType=Z$a,this._rstBoundPoints=Z$$.copyArray(this._rstBoundPoints,this._temp)},Z$a._getCmdPoints=function(Z$a){void 0===Z$a&&(Z$a=!1);var Z$b,Z$c,Z$d=Z$J._context,Z$e=this._graphics.cmds;if((Z$b=this._temp||(this._temp=[])).length=0,Z$e||null==this._graphics._one||(Z$v._tempCmds.length=0,Z$v._tempCmds.push(this._graphics._one),Z$e=Z$v._tempCmds),!Z$e)return Z$b;(Z$c=Z$v._tempMatrixArrays).length=0;var Z$f=Z$v._initMatrix;Z$f.identity();for(var Z$i,Z$j,Z$k=Z$v._tempMatrix,Z$l=NaN,Z$m=NaN,Z$n=NaN,Z$o=NaN,Z$p=NaN,Z$q=NaN,Z$r=0,Z$s=Z$e.length;Z$r<Z$s;Z$r++)if((Z$i=Z$e[Z$r]).callee)switch(Z$i.callee){case Z$d._save:case 7:Z$c.push(Z$f),Z$f=Z$f.clone();break;case Z$d._restore:case 8:Z$f=Z$c.pop();break;case Z$d._scale:case 5:Z$k.identity(),Z$k.translate(-Z$i[2],-Z$i[3]),Z$k.scale(Z$i[0],Z$i[1]),Z$k.translate(Z$i[2],Z$i[3]),this._switchMatrix(Z$f,Z$k);break;case Z$d._rotate:case 3:Z$k.identity(),Z$k.translate(-Z$i[1],-Z$i[2]),Z$k.rotate(Z$i[0]),Z$k.translate(Z$i[1],Z$i[2]),this._switchMatrix(Z$f,Z$k);break;case Z$d._translate:case 6:Z$k.identity(),Z$k.translate(Z$i[0],Z$i[1]),this._switchMatrix(Z$f,Z$k);break;case Z$d._transform:case 4:Z$k.identity(),Z$k.translate(-Z$i[1],-Z$i[2]),Z$k.concat(Z$i[0]),Z$k.translate(Z$i[1],Z$i[2]),this._switchMatrix(Z$f,Z$k);break;case 16:case 24:Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[0],Z$i[1],Z$i[2],Z$i[3]),Z$f);break;case 17:Z$f.copyTo(Z$k),Z$k.concat(Z$i[4]),Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[0],Z$i[1],Z$i[2],Z$i[3]),Z$k);break;case Z$d._drawTexture:Z$j=Z$i[0],Z$a?Z$i[3]&&Z$i[4]?Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[1],Z$i[2],Z$i[3],Z$i[4]),Z$f):(Z$j=Z$i[0],Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[1],Z$i[2],Z$j.width,Z$j.height),Z$f)):(Z$l=(Z$i[3]||Z$j.sourceWidth)/Z$j.width,Z$m=(Z$i[4]||Z$j.sourceHeight)/Z$j.height,Z$n=Z$l*Z$j.sourceWidth,Z$o=Z$m*Z$j.sourceHeight,Z$p=0<Z$j.offsetX?Z$j.offsetX:0,Z$q=0<Z$j.offsetY?Z$j.offsetY:0,Z$p*=Z$l,Z$q*=Z$m,Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[1]-Z$p,Z$i[2]-Z$q,Z$n,Z$o),Z$f));break;case Z$d._fillTexture:Z$i[3]&&Z$i[4]?Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[1],Z$i[2],Z$i[3],Z$i[4]),Z$f):(Z$j=Z$i[0],Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[1],Z$i[2],Z$j.width,Z$j.height),Z$f));break;case Z$d._drawTextureWithTransform:var Z$t;Z$t=Z$i[5]?(Z$f.copyTo(Z$k),Z$k.concat(Z$i[5]),Z$k):Z$f,Z$a?Z$i[3]&&Z$i[4]?Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[1],Z$i[2],Z$i[3],Z$i[4]),Z$t):(Z$j=Z$i[0],Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[1],Z$i[2],Z$j.width,Z$j.height),Z$t)):(Z$j=Z$i[0],Z$l=(Z$i[3]||Z$j.sourceWidth)/Z$j.width,Z$m=(Z$i[4]||Z$j.sourceHeight)/Z$j.height,Z$n=Z$l*Z$j.sourceWidth,Z$o=Z$m*Z$j.sourceHeight,Z$p=0<Z$j.offsetX?Z$j.offsetX:0,Z$q=0<Z$j.offsetY?Z$j.offsetY:0,Z$p*=Z$l,Z$q*=Z$m,Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[1]-Z$p,Z$i[2]-Z$q,Z$n,Z$o),Z$t));break;case Z$d._drawRect:case 13:Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[0],Z$i[1],Z$i[2],Z$i[3]),Z$f);break;case Z$d._drawCircle:case Z$d._fillCircle:case 14:Z$v._addPointArrToRst(Z$b,Z$B._getBoundPointS(Z$i[0]-Z$i[2],Z$i[1]-Z$i[2],Z$i[2]+Z$i[2],Z$i[2]+Z$i[2]),Z$f);break;case Z$d._drawLine:case 20:Z$v._tempPoints.length=0;var Z$u;Z$u=.5*Z$i[5],Z$i[0]==Z$i[2]?Z$v._tempPoints.push(Z$i[0]+Z$u,Z$i[1],Z$i[2]+Z$u,Z$i[3],Z$i[0]-Z$u,Z$i[1],Z$i[2]-Z$u,Z$i[3]):Z$i[1]==Z$i[3]?Z$v._tempPoints.push(Z$i[0],Z$i[1]+Z$u,Z$i[2],Z$i[3]+Z$u,Z$i[0],Z$i[1]-Z$u,Z$i[2],Z$i[3]-Z$u):Z$v._tempPoints.push(Z$i[0],Z$i[1],Z$i[2],Z$i[3]),Z$v._addPointArrToRst(Z$b,Z$v._tempPoints,Z$f);break;case Z$d._drawCurves:case 22:Z$v._addPointArrToRst(Z$b,Z$w.I.getBezierPoints(Z$i[2]),Z$f,Z$i[0],Z$i[1]);break;case Z$d._drawPoly:case Z$d._drawLines:case 18:Z$v._addPointArrToRst(Z$b,Z$i[2],Z$f,Z$i[0],Z$i[1]);break;case Z$d._drawPath:case 19:Z$v._addPointArrToRst(Z$b,this._getPathPoints(Z$i[2]),Z$f,Z$i[0],Z$i[1]);break;case Z$d._drawPie:case 15:Z$v._addPointArrToRst(Z$b,this._getPiePoints(Z$i[0],Z$i[1],Z$i[2],Z$i[3],Z$i[4]),Z$f)}return 200<Z$b.length?Z$b=Z$$.copyArray(Z$b,Z$B._getWrapRec(Z$b)._getBoundPoints()):8<Z$b.length&&(Z$b=Z$x.scanPList(Z$b)),Z$b},Z$a._switchMatrix=function(Z$a,Z$b){Z$b.concat(Z$a),Z$b.copyTo(Z$a)},Z$a._getPiePoints=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$v._tempPoints;Z$v._tempPoints.length=0,Z$f.push(Z$a,Z$b);var Z$i=(Z$e-Z$d)%(2*Math.PI)/10,Z$j=NaN,Z$k=Z$d;for(Z$j=0;Z$j<=10;Z$j++)Z$f.push(Z$a+Z$c*Math.cos(Z$k),Z$b+Z$c*Math.sin(Z$k)),Z$k+=Z$i;return Z$f},Z$a._getPathPoints=function(Z$a){var Z$b,Z$c,Z$d=0,Z$e=Z$v._tempPoints;for(Z$e.length=0,Z$b=Z$a.length,Z$d=0;Z$d<Z$b;Z$d++)1<(Z$c=Z$a[Z$d]).length&&(Z$e.push(Z$c[1],Z$c[2]),3<Z$c.length&&Z$e.push(Z$c[3],Z$c[4]));return Z$e},Z$v._addPointArrToRst=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0);var Z$f,Z$i=0;for(Z$f=Z$b.length,Z$i=0;Z$i<Z$f;Z$i+=2)Z$v._addPointToRst(Z$a,Z$b[Z$i]+Z$d,Z$b[Z$i+1]+Z$e,Z$c)},Z$v._addPointToRst=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$A.TEMP;Z$e.setTo(Z$b||0,Z$c||0),Z$d.transformPoint(Z$e),Z$a.push(Z$e.x,Z$e.y)},Z$v._tempPoints=[],Z$v._tempMatrixArrays=[],Z$v._tempCmds=[],Z$k(Z$v,["_tempMatrix",function(){return this._tempMatrix=new Z$G},"_initMatrix",function(){return this._initMatrix=new Z$G}]),Z$v}(),Z$f=function(){function Z$a(){}Z$m(Z$a,"laya.events.Event");var Z$b=Z$a.prototype;return Z$b.setTo=function(Z$a,Z$b,Z$c){return this.type=Z$a,this.currentTarget=Z$b,this.target=Z$c,this},Z$b.stopPropagation=function(){this._stoped=!0},Z$q(0,Z$b,"stageY",function(){return Z$z.stage.mouseY}),Z$q(0,Z$b,"charCode",function(){return this.nativeEvent.charCode}),Z$q(0,Z$b,"touches",function(){var Z$a=this.nativeEvent.touches;if(Z$a)for(var Z$b=Z$z.stage,Z$c=0,Z$d=Z$a.length;Z$c<Z$d;Z$c++){var Z$e=Z$a[Z$c],Z$f=Z$A.TEMP;Z$f.setTo(Z$e.clientX,Z$e.clientY),Z$b._canvasTransform.invertTransformPoint(Z$f),Z$b.transform.invertTransformPoint(Z$f),Z$e.stageX=Z$f.x,Z$e.stageY=Z$f.y}return Z$a}),Z$q(0,Z$b,"keyLocation",function(){return this.nativeEvent.keyLocation}),Z$q(0,Z$b,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),Z$q(0,Z$b,"altKey",function(){return this.nativeEvent.altKey}),Z$q(0,Z$b,"shiftKey",function(){return this.nativeEvent.shiftKey}),Z$q(0,Z$b,"stageX",function(){return Z$z.stage.mouseX}),Z$a.EMPTY=new Z$a,Z$a.MOUSE_DOWN="mousedown",Z$a.MOUSE_UP="mouseup",Z$a.CLICK="click",Z$a.RIGHT_MOUSE_DOWN="rightmousedown",Z$a.RIGHT_MOUSE_UP="rightmouseup",Z$a.RIGHT_CLICK="rightclick",Z$a.MOUSE_MOVE="mousemove",Z$a.MOUSE_OVER="mouseover",Z$a.MOUSE_OUT="mouseout",Z$a.MOUSE_WHEEL="mousewheel",Z$a.ROLL_OVER="mouseover",Z$a.ROLL_OUT="mouseout",Z$a.DOUBLE_CLICK="doubleclick",Z$a.CHANGE="change",Z$a.CHANGED="changed",Z$a.RESIZE="resize",Z$a.ADDED="added",Z$a.REMOVED="removed",Z$a.DISPLAY="display",Z$a.UNDISPLAY="undisplay",Z$a.ERROR="error",Z$a.COMPLETE="complete",Z$a.LOADED="loaded",Z$a.INITED="inited",Z$a.PROGRESS="progress",Z$a.INPUT="input",Z$a.RENDER="render",Z$a.OPEN="open",Z$a.MESSAGE="message",Z$a.CLOSE="close",Z$a.KEY_DOWN="keydown",Z$a.KEY_PRESS="keypress",Z$a.KEY_UP="keyup",Z$a.FRAME="enterframe",Z$a.DRAG_START="dragstart",Z$a.DRAG_MOVE="dragmove",Z$a.DRAG_END="dragend",Z$a.ENTER="enter",Z$a.SELECT="select",Z$a.BLUR="blur",Z$a.FOCUS="focus",Z$a.VISIBILITY_CHANGE="visibilitychange",Z$a.FOCUS_CHANGE="focuschange",Z$a.PLAYED="played",Z$a.PAUSED="paused",Z$a.STOPPED="stopped",Z$a.START="start",Z$a.END="end",Z$a.ENABLE_CHANGED="enablechanged",Z$a.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",Z$a.COMPONENT_ADDED="componentadded",Z$a.COMPONENT_REMOVED="componentremoved",Z$a.LAYER_CHANGED="layerchanged",Z$a.HIERARCHY_LOADED="hierarchyloaded",Z$a.RECOVERED="recovered",Z$a.RELEASED="released",Z$a.LINK="link",Z$a.LABEL="label",Z$a.FULL_SCREEN_CHANGE="fullscreenchange",Z$a.DEVICE_LOST="devicelost",Z$a.MESH_CHANGED="meshchanged",Z$a.MATERIAL_CHANGED="materialchanged",Z$a.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",Z$a.ANIMATION_CHANGED="animationchanged",Z$a.TRIGGER_ENTER="triggerenter",Z$a.TRIGGER_STAY="triggerstay",Z$a.TRIGGER_EXIT="triggerexit",Z$a.TRAIL_FILTER_CHANGE="trailfilterchange",Z$a.DOMINO_FILTER_CHANGE="dominofilterchange",Z$a}(),Z$n=(function(){function Z$a(){}Z$m(Z$a,"laya.events.Keyboard"),Z$a.NUMBER_0=48,Z$a.NUMBER_1=49,Z$a.NUMBER_2=50,Z$a.NUMBER_3=51,Z$a.NUMBER_4=52,Z$a.NUMBER_5=53,Z$a.NUMBER_6=54,Z$a.NUMBER_7=55,Z$a.NUMBER_8=56,Z$a.NUMBER_9=57,Z$a.A=65,Z$a.B=66,Z$a.C=67,Z$a.D=68,Z$a.E=69,Z$a.F=70,Z$a.G=71,Z$a.H=72,Z$a.I=73,Z$a.J=74,Z$a.K=75,Z$a.L=76,Z$a.M=77,Z$a.N=78,Z$a.O=79,Z$a.P=80,Z$a.Q=81,Z$a.R=82,Z$a.S=83,Z$a.T=84,Z$a.U=85,Z$a.V=86,Z$a.W=87,Z$a.X=88,Z$a.Y=89,Z$a.Z=90,Z$a.F1=112,Z$a.F2=113,Z$a.F3=114,Z$a.F4=115,Z$a.F5=116,Z$a.F6=117,Z$a.F7=118,Z$a.F8=119,Z$a.F9=120,Z$a.F10=121,Z$a.F11=122,Z$a.F12=123,Z$a.F13=124,Z$a.F14=125,Z$a.F15=126,Z$a.NUMPAD=21,Z$a.NUMPAD_0=96,Z$a.NUMPAD_1=97,Z$a.NUMPAD_2=98,Z$a.NUMPAD_3=99,Z$a.NUMPAD_4=100,Z$a.NUMPAD_5=101,Z$a.NUMPAD_6=102,Z$a.NUMPAD_7=103,Z$a.NUMPAD_8=104,Z$a.NUMPAD_9=105,Z$a.NUMPAD_ADD=107,Z$a.NUMPAD_DECIMAL=110,Z$a.NUMPAD_DIVIDE=111,Z$a.NUMPAD_ENTER=108,Z$a.NUMPAD_MULTIPLY=106,Z$a.NUMPAD_SUBTRACT=109,Z$a.SEMICOLON=186,Z$a.EQUAL=187,Z$a.COMMA=188,Z$a.MINUS=189,Z$a.PERIOD=190,Z$a.SLASH=191,Z$a.BACKQUOTE=192,Z$a.LEFTBRACKET=219,Z$a.BACKSLASH=220,Z$a.RIGHTBRACKET=221,Z$a.QUOTE=222,Z$a.ALTERNATE=18,Z$a.BACKSPACE=8,Z$a.CAPS_LOCK=20,Z$a.COMMAND=15,Z$a.CONTROL=17,Z$a.DELETE=46,Z$a.ENTER=13,Z$a.ESCAPE=27,Z$a.PAGE_UP=33,Z$a.PAGE_DOWN=34,Z$a.END=35,Z$a.HOME=36,Z$a.LEFT=37,Z$a.UP=38,Z$a.RIGHT=39,Z$a.DOWN=40,Z$a.SHIFT=16,Z$a.SPACE=32,Z$a.TAB=9,Z$a.INSERT=45}(),function(){function Z$e(){}return Z$m(Z$e,"laya.events.KeyBoardManager"),Z$e.__init__=function(){Z$e._addEvent("keydown"),Z$e._addEvent("keypress"),Z$e._addEvent("keyup")},Z$e._addEvent=function(Z$b){Z$O.document.addEventListener(Z$b,function(Z$a){laya.events.KeyBoardManager._dispatch(Z$a,Z$b)},!0)},Z$e._dispatch=function(Z$a,Z$b){if(Z$e.enabled){Z$e._event._stoped=!1,Z$e._event.nativeEvent=Z$a,Z$e._event.keyCode=Z$a.keyCode||Z$a.which||Z$a.charCode,"keydown"===Z$b?Z$e._pressKeys[Z$e._event.keyCode]=!0:"keyup"===Z$b&&(Z$e._pressKeys[Z$e._event.keyCode]=null);for(var Z$c=Z$z.stage.focus&&null!=Z$z.stage.focus.event&&Z$z.stage.focus.displayedInStage?Z$z.stage.focus:Z$z.stage,Z$d=Z$c;Z$d;)Z$d.event(Z$b,Z$e._event.setTo(Z$b,Z$d,Z$c)),Z$d=Z$d.parent}},Z$e.hasKeyDown=function(Z$a){return Z$e._pressKeys[Z$a]},Z$e._pressKeys={},Z$e.enabled=!0,Z$k(Z$e,["_event",function(){return this._event=new Z$f}]),Z$e}()),Z$r=(function(){function Z$a(){}Z$m(Z$a,"laya.events.KeyLocation"),Z$a.STANDARD=0,Z$a.LEFT=1,Z$a.RIGHT=2,Z$a.NUM_PAD=3}(),function(){function Z$l(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=Z$O.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new Z$f,this._matrix=new Z$G,this._point=new Z$A,this._rect=new Z$B,this._prePoint=new Z$A,this._curTouchID=NaN}Z$m(Z$l,"laya.events.MouseManager");var Z$a=Z$l.prototype;return Z$a.__init__=function(Z$a,Z$b){var Z$c=this;this._stage=Z$a;var Z$d=this,Z$e=this._eventList;Z$b.oncontextmenu=function(Z$a){if(Z$l.enabled)return!1},Z$b.addEventListener("mousedown",function(Z$a){Z$l.enabled&&(Z$O.onIE||Z$a.preventDefault(),Z$e.push(Z$a),Z$d.mouseDownTime=Z$O.now())}),Z$b.addEventListener("mouseup",function(Z$a){Z$l.enabled&&(Z$a.preventDefault(),Z$e.push(Z$a),Z$d.mouseDownTime=-Z$O.now())},!0),Z$b.addEventListener("mousemove",function(Z$a){if(Z$l.enabled){Z$a.preventDefault();var Z$b=Z$O.now();if(Z$b-Z$d._lastMoveTimer<10)return;Z$d._lastMoveTimer=Z$b,Z$e.push(Z$a)}},!0),Z$b.addEventListener("mouseout",function(Z$a){Z$l.enabled&&Z$e.push(Z$a)}),Z$b.addEventListener("mouseover",function(Z$a){Z$l.enabled&&Z$e.push(Z$a)}),Z$b.addEventListener("touchstart",function(Z$a){Z$l.enabled&&(Z$e.push(Z$a),Z$l._isFirstTouch||Z$xa.isInputting||Z$a.preventDefault(),Z$d.mouseDownTime=Z$O.now())}),Z$b.addEventListener("touchend",function(Z$a){Z$l.enabled?(Z$l._isFirstTouch||Z$xa.isInputting||Z$a.preventDefault(),Z$l._isFirstTouch=!1,Z$e.push(Z$a),Z$d.mouseDownTime=-Z$O.now()):Z$c._curTouchID=NaN},!0),Z$b.addEventListener("touchmove",function(Z$a){Z$l.enabled&&(Z$a.preventDefault(),Z$e.push(Z$a))},!0),Z$b.addEventListener("touchcancel",function(Z$a){Z$l.enabled?(Z$a.preventDefault(),Z$e.push(Z$a)):Z$c._curTouchID=NaN},!0),Z$b.addEventListener("mousewheel",function(Z$a){Z$l.enabled&&Z$e.push(Z$a)}),Z$b.addEventListener("DOMMouseScroll",function(Z$a){Z$l.enabled&&Z$e.push(Z$a)})},Z$a.initEvent=function(Z$a,Z$b){var Z$c;this._event._stoped=!1,this._event.nativeEvent=Z$b||Z$a,this._target=null,this._point.setTo(Z$a.pageX||Z$a.clientX,Z$a.pageY||Z$a.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=Z$a.identifier||0,this._tTouchID=this._event.touchId,(Z$c=Z$s.I._event)._stoped=!1,Z$c.nativeEvent=this._event.nativeEvent,Z$c.touchId=this._event.touchId},Z$a.checkMouseWheel=function(Z$a){this._event.delta=Z$a.wheelDelta?.025*Z$a.wheelDelta:-Z$a.detail;for(var Z$b=Z$s.I.getLastOvers(),Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++){var Z$e=Z$b[Z$c];Z$e.event("mousewheel",this._event.setTo("mousewheel",Z$e,this._target))}},Z$a.onMouseMove=function(Z$a){Z$s.I.onMouseMove(Z$a,this._tTouchID)},Z$a.onMouseDown=function(Z$a){if(Z$xa.isInputting&&Z$z.stage.focus&&Z$z.stage.focus.focus&&!Z$z.stage.focus.contains(this._target)){var Z$b=Z$z.stage.focus._tf||Z$z.stage.focus,Z$c=Z$a._tf||Z$a;Z$c instanceof laya.display.Input&&Z$c.multiline==Z$b.multiline?Z$b._focusOut():Z$b.focus=!1}Z$s.I.onMouseDown(Z$a,this._tTouchID,this._isLeftMouse)},Z$a.onMouseUp=function(Z$a){Z$s.I.onMouseUp(Z$a,this._tTouchID,this._isLeftMouse)},Z$a.check=function(Z$a,Z$b,Z$c,Z$d){this._point.setTo(Z$b,Z$c),Z$a.fromParentPoint(this._point),Z$b=this._point.x,Z$c=this._point.y;var Z$e=Z$a.scrollRect;if(Z$e&&(this._rect.setTo(Z$e.x,Z$e.y,Z$e.width,Z$e.height),!this._rect.contains(Z$b,Z$c)))return!1;if(!this.disableMouseEvent){if(Z$a.hitTestPrior&&!Z$a.mouseThrough&&!this.hitTest(Z$a,Z$b,Z$c))return!1;for(var Z$f=Z$a._childs.length-1;-1<Z$f;Z$f--){var Z$i=Z$a._childs[Z$f];if(!Z$i.destroyed&&Z$i.mouseEnabled&&Z$i.visible&&this.check(Z$i,Z$b,Z$c,Z$d))return!0}}var Z$j=!(!Z$a.hitTestPrior||Z$a.mouseThrough||this.disableMouseEvent)||this.hitTest(Z$a,Z$b,Z$c);return Z$j?(this._target=Z$a,Z$d.call(this,Z$a)):Z$d===this.onMouseUp&&Z$a===this._stage&&(this._target=this._stage,Z$d.call(this,this._target)),Z$j},Z$a.hitTest=function(Z$a,Z$b,Z$c){var Z$d=!1;if(Z$a.scrollRect&&(Z$b-=Z$a.scrollRect.x,Z$c-=Z$a.scrollRect.y),Z$a.hitArea instanceof laya.utils.HitArea)return Z$a.hitArea.isHit(Z$b,Z$c);if(0<Z$a.width&&0<Z$a.height||Z$a.mouseThrough||Z$a.hitArea)if(Z$a.mouseThrough)Z$d=Z$a.getGraphicBounds().contains(Z$b,Z$c);else{var Z$e=this._rect;Z$a.hitArea?Z$e=Z$a.hitArea:Z$e.setTo(0,0,Z$a.width,Z$a.height),Z$d=Z$e.contains(Z$b,Z$c)}return Z$d},Z$a.runEvent=function(){var Z$a=this._eventList.length;if(Z$a){this.mouseEventTime=Z$O.now();var Z$b,Z$c=0,Z$d=0,Z$e=0;try{for(;Z$c<Z$a;){var Z$f=this._eventList[Z$c];switch("mousemove"!==Z$f.type&&(this._prePoint.x=this._prePoint.y=-1e6),Z$f.type){case"mousedown":this._touchIDs[0]=this._id++,Z$l._isTouchRespond?Z$l._isTouchRespond=!1:(this._isLeftMouse=0===Z$f.button,this.initEvent(Z$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===Z$f.button,this.initEvent(Z$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-Z$f.clientX)+Math.abs(this._prePoint.y-Z$f.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=Z$f.clientX,this._prePoint.y=Z$f.clientY,this.initEvent(Z$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":Z$l._isTouchRespond=!0,this._isLeftMouse=!0;var Z$i=Z$f.changedTouches;for(Z$d=0,Z$e=Z$i.length;Z$d<Z$e;Z$d++)Z$b=Z$i[Z$d],(Z$l.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=Z$b.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[Z$b.identifier]=this._id++,this.initEvent(Z$b,Z$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":Z$l._isTouchRespond=!0,this._isLeftMouse=!0;var Z$j=Z$f.changedTouches;for(Z$d=0,Z$e=Z$j.length;Z$d<Z$e;Z$d++)if(Z$b=Z$j[Z$d],Z$l.multiTouchEnabled||Z$b.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(Z$b,Z$f);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var Z$k=Z$f.changedTouches;for(Z$d=0,Z$e=Z$k.length;Z$d<Z$e;Z$d++)Z$b=Z$k[Z$d],(Z$l.multiTouchEnabled||Z$b.identifier==this._curTouchID)&&(this.initEvent(Z$b,Z$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(Z$f);break;case"mouseout":Z$s.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}Z$c++}}catch(Z$a){throw this._eventList.length=0,Z$a}this._eventList.length=0}},Z$l.enabled=!0,Z$l.multiTouchEnabled=!0,Z$l._isTouchRespond=!1,Z$l._isFirstTouch=!0,Z$k(Z$l,["instance",function(){return this.instance=new Z$l}]),Z$l}()),Z$s=function(){function Z$q(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new Z$f}Z$m(Z$q,"laya.events.TouchManager");var Z$a=Z$q.prototype;return Z$a._clearTempArrs=function(){Z$q._oldArr.length=0,Z$q._newArr.length=0,Z$q._tEleArr.length=0},Z$a.getTouchFromArr=function(Z$a,Z$b){var Z$c,Z$d,Z$e=0;for(Z$c=Z$b.length,Z$e=0;Z$e<Z$c;Z$e++)if((Z$d=Z$b[Z$e]).id==Z$a)return Z$d;return null},Z$a.removeTouchFromArr=function(Z$a,Z$b){var Z$c=0;for(Z$c=Z$b.length-1;0<=Z$c;Z$c--)Z$b[Z$c].id==Z$a&&Z$b.splice(Z$c,1)},Z$a.createTouchO=function(Z$a,Z$b){var Z$c;return(Z$c=Z$W.getItem("TouchData")||{}).id=Z$b,Z$c.tar=Z$a,Z$c},Z$a.onMouseDown=function(Z$a,Z$b,Z$c){var Z$d,Z$e,Z$f,Z$i;(void 0===Z$c&&(Z$c=!1),this.enable)&&(Z$d=this.getTouchFromArr(Z$b,this.preOvers),Z$f=this.getEles(Z$a,null,Z$q._tEleArr),Z$d?Z$d.tar=Z$a:(Z$e=this.createTouchO(Z$a,Z$b),this.preOvers.push(Z$e)),Z$O.onMobile&&this.sendEvents(Z$f,"mouseover",Z$b),Z$i=Z$c?this.preDowns:this.preRightDowns,(Z$d=this.getTouchFromArr(Z$b,Z$i))?Z$d.tar=Z$a:(Z$e=this.createTouchO(Z$a,Z$b),Z$i.push(Z$e)),this.sendEvents(Z$f,Z$c?"mousedown":"rightmousedown",Z$b),this._clearTempArrs())},Z$a.sendEvents=function(Z$a,Z$b,Z$c){void 0===Z$c&&(Z$c=0);var Z$d,Z$e,Z$f,Z$i=0;for(Z$d=Z$a.length,this._event._stoped=!1,Z$e=Z$a[0],Z$i=0;Z$i<Z$d;Z$i++){if((Z$f=Z$a[Z$i]).destroyed)return;if(Z$f.event(Z$b,this._event.setTo(Z$b,Z$f,Z$e)),this._event._stoped)break}},Z$a.getEles=function(Z$a,Z$b,Z$c){for(Z$c?Z$c.length=0:Z$c=[];Z$a&&Z$a!=Z$b;)Z$c.push(Z$a),Z$a=Z$a.parent;return Z$c},Z$a.checkMouseOutAndOverOfMove=function(Z$a,Z$b,Z$c){if(void 0===Z$c&&(Z$c=0),Z$b!=Z$a){var Z$d,Z$e,Z$f=0,Z$i=0;if(Z$b.contains(Z$a))Z$e=this.getEles(Z$a,Z$b,Z$q._tEleArr),this.sendEvents(Z$e,"mouseover",Z$c);else if(Z$a.contains(Z$b))Z$e=this.getEles(Z$b,Z$a,Z$q._tEleArr),this.sendEvents(Z$e,"mouseout",Z$c);else{var Z$j,Z$k;(Z$e=Z$q._tEleArr).length=0,Z$j=this.getEles(Z$b,null,Z$q._oldArr),Z$k=this.getEles(Z$a,null,Z$q._newArr),Z$i=Z$j.length;var Z$l=0;for(Z$f=0;Z$f<Z$i;Z$f++){if(Z$d=Z$j[Z$f],0<=(Z$l=Z$k.indexOf(Z$d))){Z$k.splice(Z$l,Z$k.length-Z$l);break}Z$e.push(Z$d)}0<Z$e.length&&this.sendEvents(Z$e,"mouseout",Z$c),0<Z$k.length&&this.sendEvents(Z$k,"mouseover",Z$c)}}},Z$a.onMouseMove=function(Z$a,Z$b){var Z$c,Z$d;this.enable&&((Z$c=this.getTouchFromArr(Z$b,this.preOvers))?(this.checkMouseOutAndOverOfMove(Z$a,Z$c.tar),Z$c.tar=Z$a,Z$d=this.getEles(Z$a,null,Z$q._tEleArr)):(Z$d=this.getEles(Z$a,null,Z$q._tEleArr),this.sendEvents(Z$d,"mouseover",Z$b),this.preOvers.push(this.createTouchO(Z$a,Z$b))),this.sendEvents(Z$d,"mousemove",Z$b),this._clearTempArrs())},Z$a.getLastOvers=function(){return(Z$q._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,Z$q._tEleArr):(Z$q._tEleArr.push(Z$z.stage),Z$q._tEleArr)},Z$a.stageMouseOut=function(){var Z$a;Z$a=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(Z$a,"mouseout",0)},Z$a.onMouseUp=function(Z$a,Z$b,Z$c){if(void 0===Z$c&&(Z$c=!1),this.enable){var Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l=0,Z$m=0,Z$n=Z$O.onMobile;if(Z$e=this.getEles(Z$a,null,Z$q._tEleArr),this.sendEvents(Z$e,Z$c?"mouseup":"rightmouseup",Z$b),Z$k=Z$c?this.preDowns:this.preRightDowns,Z$d=this.getTouchFromArr(Z$b,Z$k)){var Z$o,Z$p=Z$O.now();if(Z$o=Z$p-this._lastClickTime<300,this._lastClickTime=Z$p,Z$a==Z$d.tar)Z$j=Z$e;else for(Z$f=this.getEles(Z$d.tar,null,Z$q._oldArr),(Z$j=Z$q._newArr).length=0,Z$m=Z$f.length,Z$l=0;Z$l<Z$m;Z$l++)Z$i=Z$f[Z$l],0<=Z$e.indexOf(Z$i)&&Z$j.push(Z$i);0<Z$j.length&&this.sendEvents(Z$j,Z$c?"click":"rightclick",Z$b),Z$c&&Z$o&&this.sendEvents(Z$j,"doubleclick",Z$b),this.removeTouchFromArr(Z$b,Z$k),Z$d.tar=null,Z$W.recover("TouchData",Z$d)}else;(Z$d=this.getTouchFromArr(Z$b,this.preOvers))&&Z$n&&((Z$j=this.getEles(Z$d.tar,null,Z$j))&&0<Z$j.length&&this.sendEvents(Z$j,"mouseout",Z$b),this.removeTouchFromArr(Z$b,this.preOvers),Z$d.tar=null,Z$W.recover("TouchData",Z$d)),this._clearTempArrs()}},Z$q._oldArr=[],Z$q._newArr=[],Z$q._tEleArr=[],Z$k(Z$q,["I",function(){return this.I=new Z$q}]),Z$q}(),Z$t=function(){function Z$a(){this._action=null}Z$m(Z$a,"laya.filters.Filter");var Z$b=Z$a.prototype;return Z$z.imps(Z$b,{"laya.filters.IFilter":!0}),Z$b.callNative=function(Z$a){},Z$q(0,Z$b,"type",function(){return-1}),Z$q(0,Z$b,"action",function(){return this._action}),Z$a.BLUR=16,Z$a.COLOR=32,Z$a.GLOW=8,Z$a._filterStart=null,Z$a._filterEnd=null,Z$a._EndTarget=null,Z$a._recycleScope=null,Z$a._filter=null,Z$a._useSrc=null,Z$a._endSrc=null,Z$a._useOut=null,Z$a._endOut=null,Z$a}(),Z$v=function(){function Z$a(){this.data=null}Z$m(Z$a,"laya.filters.ColorFilterAction");var Z$b=Z$a.prototype;return Z$z.imps(Z$b,{"laya.filters.IFilterAction":!0}),Z$b.apply=function(Z$a){var Z$b=Z$a.ctx.ctx,Z$c=Z$a.ctx.ctx.canvas;if(0==Z$c.width||0==Z$c.height)return Z$c;for(var Z$d,Z$e=Z$b.getImageData(0,0,Z$c.width,Z$c.height),Z$f=Z$e.data,Z$i=0,Z$j=Z$f.length;Z$i<Z$j;Z$i+=4)Z$d=this.getColor(Z$f[Z$i],Z$f[Z$i+1],Z$f[Z$i+2],Z$f[Z$i+3]),0!=Z$f[Z$i+3]&&(Z$f[Z$i]=Z$d[0],Z$f[Z$i+1]=Z$d[1],Z$f[Z$i+2]=Z$d[2],Z$f[Z$i+3]=Z$d[3]);return Z$b.putImageData(Z$e,0,0),Z$a},Z$b.getColor=function(Z$a,Z$b,Z$c,Z$d){var Z$e=[];if(this.data._mat&&this.data._alpha){var Z$f=this.data._mat,Z$i=this.data._alpha;Z$e[0]=Z$f[0]*Z$a+Z$f[1]*Z$b+Z$f[2]*Z$c+Z$f[3]*Z$d+Z$i[0],Z$e[1]=Z$f[4]*Z$a+Z$f[5]*Z$b+Z$f[6]*Z$c+Z$f[7]*Z$d+Z$i[1],Z$e[2]=Z$f[8]*Z$a+Z$f[9]*Z$b+Z$f[10]*Z$c+Z$f[11]*Z$d+Z$i[2],Z$e[3]=Z$f[12]*Z$a+Z$f[13]*Z$b+Z$f[14]*Z$c+Z$f[15]*Z$d+Z$i[3]}return Z$e},Z$a}(),Z$w=(function(){function Z$a(){}Z$m(Z$a,"laya.maths.Arith"),Z$a.formatR=function(Z$a){return Z$a>Math.PI&&(Z$a-=2*Math.PI),Z$a<-Math.PI&&(Z$a+=2*Math.PI),Z$a},Z$a.isPOT=function(Z$a,Z$b){return 0<Z$a&&0==(Z$a&Z$a-1)&&0<Z$b&&0==(Z$b&Z$b-1)},Z$a.setMatToArray=function(Z$a,Z$b){Z$a.a,Z$a.b,Z$a.c,Z$a.d,Z$a.tx,Z$a.ty,Z$b[0]=Z$a.a,Z$b[1]=Z$a.b,Z$b[4]=Z$a.c,Z$b[5]=Z$a.d,Z$b[12]=Z$a.tx,Z$b[13]=Z$a.ty}}(),function(){function Z$a(){this._controlPoints=[new Z$A,new Z$A,new Z$A],this._calFun=this.getPoint2}Z$m(Z$a,"laya.maths.Bezier");var Z$b=Z$a.prototype;return Z$b._switchPoint=function(Z$a,Z$b){var Z$c=this._controlPoints.shift();Z$c.setTo(Z$a,Z$b),this._controlPoints.push(Z$c)},Z$b.getPoint2=function(Z$a,Z$b){var Z$c=this._controlPoints[0],Z$d=this._controlPoints[1],Z$e=this._controlPoints[2],Z$f=Math.pow(1-Z$a,2)*Z$c.x+2*Z$a*(1-Z$a)*Z$d.x+Math.pow(Z$a,2)*Z$e.x,Z$i=Math.pow(1-Z$a,2)*Z$c.y+2*Z$a*(1-Z$a)*Z$d.y+Math.pow(Z$a,2)*Z$e.y;Z$b.push(Z$f,Z$i)},Z$b.getPoint3=function(Z$a,Z$b){var Z$c=this._controlPoints[0],Z$d=this._controlPoints[1],Z$e=this._controlPoints[2],Z$f=this._controlPoints[3],Z$i=Math.pow(1-Z$a,3)*Z$c.x+3*Z$d.x*Z$a*(1-Z$a)*(1-Z$a)+3*Z$e.x*Z$a*Z$a*(1-Z$a)+Z$f.x*Math.pow(Z$a,3),Z$j=Math.pow(1-Z$a,3)*Z$c.y+3*Z$d.y*Z$a*(1-Z$a)*(1-Z$a)+3*Z$e.y*Z$a*Z$a*(1-Z$a)+Z$f.y*Math.pow(Z$a,3);Z$b.push(Z$i,Z$j)},Z$b.insertPoints=function(Z$a,Z$b){var Z$c,Z$d=NaN;for(Z$c=1/(Z$a=0<Z$a?Z$a:5),Z$d=0;Z$d<=1;Z$d+=Z$c)this._calFun(Z$d,Z$b)},Z$b.getBezierPoints=function(Z$a,Z$b,Z$c){void 0===Z$b&&(Z$b=5),void 0===Z$c&&(Z$c=2);var Z$d,Z$e,Z$f=0;if((Z$d=Z$a.length)<2*(Z$c+1))return[];switch(Z$e=[],Z$c){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=Z$c;)this._controlPoints.push(new Z$A);for(Z$f=0;Z$f<2*Z$c;Z$f+=2)this._switchPoint(Z$a[Z$f],Z$a[Z$f+1]);for(Z$f=2*Z$c;Z$f<Z$d;Z$f+=2)this._switchPoint(Z$a[Z$f],Z$a[Z$f+1]),Z$f/2%Z$c==0&&this.insertPoints(Z$b,Z$e);return Z$e},Z$k(Z$a,["I",function(){return this.I=new Z$a}]),Z$a}()),Z$x=function(){function Z$l(){}return Z$m(Z$l,"laya.maths.GrahamScan"),Z$l.multiply=function(Z$a,Z$b,Z$c){return(Z$a.x-Z$c.x)*(Z$b.y-Z$c.y)-(Z$b.x-Z$c.x)*(Z$a.y-Z$c.y)},Z$l.dis=function(Z$a,Z$b){return(Z$a.x-Z$b.x)*(Z$a.x-Z$b.x)+(Z$a.y-Z$b.y)*(Z$a.y-Z$b.y)},Z$l._getPoints=function(Z$a,Z$b,Z$c){for(void 0===Z$b&&(Z$b=!1),Z$l._mPointList||(Z$l._mPointList=[]);Z$l._mPointList.length<Z$a;)Z$l._mPointList.push(new Z$A);return Z$c||(Z$c=[]),Z$c.length=0,Z$b?Z$l.getFrom(Z$c,Z$l._mPointList,Z$a):Z$l.getFromR(Z$c,Z$l._mPointList,Z$a),Z$c},Z$l.getFrom=function(Z$a,Z$b,Z$c){var Z$d=0;for(Z$d=0;Z$d<Z$c;Z$d++)Z$a.push(Z$b[Z$d]);return Z$a},Z$l.getFromR=function(Z$a,Z$b,Z$c){var Z$d=0;for(Z$d=0;Z$d<Z$c;Z$d++)Z$a.push(Z$b.pop());return Z$a},Z$l.pListToPointList=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!1);var Z$c=0,Z$d=Z$a.length/2,Z$e=Z$l._getPoints(Z$d,Z$b,Z$l._tempPointList);for(Z$c=0;Z$c<Z$d;Z$c++)Z$e[Z$c].setTo(Z$a[Z$c+Z$c],Z$a[Z$c+Z$c+1]);return Z$e},Z$l.pointListToPlist=function(Z$a){var Z$b,Z$c=0,Z$d=Z$a.length,Z$e=Z$l._temPList;for(Z$c=Z$e.length=0;Z$c<Z$d;Z$c++)Z$b=Z$a[Z$c],Z$e.push(Z$b.x,Z$b.y);return Z$e},Z$l.scanPList=function(Z$a){return Z$$.copyArray(Z$a,Z$l.pointListToPlist(Z$l.scan(Z$l.pListToPointList(Z$a,!0))))},Z$l.scan=function(Z$a){var Z$b,Z$c,Z$d,Z$e=0,Z$f=0,Z$i=0,Z$j=Z$a.length,Z$k={};for((Z$c=Z$l._temArr).length=0,Z$e=(Z$j=Z$a.length)-1;0<=Z$e;Z$e--)Z$d=(Z$b=Z$a[Z$e]).x+"_"+Z$b.y,Z$k.hasOwnProperty(Z$d)||(Z$k[Z$d]=!0,Z$c.push(Z$b));for(Z$j=Z$c.length,Z$$.copyArray(Z$a,Z$c),Z$e=1;Z$e<Z$j;Z$e++)(Z$a[Z$e].y<Z$a[Z$i].y||Z$a[Z$e].y==Z$a[Z$i].y&&Z$a[Z$e].x<Z$a[Z$i].x)&&(Z$i=Z$e);for(Z$b=Z$a[0],Z$a[0]=Z$a[Z$i],Z$a[Z$i]=Z$b,Z$e=1;Z$e<Z$j-1;Z$e++){for(Z$f=(Z$i=Z$e)+1;Z$f<Z$j;Z$f++)(0<Z$l.multiply(Z$a[Z$f],Z$a[Z$i],Z$a[0])||0==Z$l.multiply(Z$a[Z$f],Z$a[Z$i],Z$a[0])&&Z$l.dis(Z$a[0],Z$a[Z$f])<Z$l.dis(Z$a[0],Z$a[Z$i]))&&(Z$i=Z$f);Z$b=Z$a[Z$e],Z$a[Z$e]=Z$a[Z$i],Z$a[Z$i]=Z$b}if((Z$c=Z$l._temArr).length=0,Z$a.length<3)return Z$$.copyArray(Z$c,Z$a);for(Z$c.push(Z$a[0],Z$a[1],Z$a[2]),Z$e=3;Z$e<Z$j;Z$e++){for(;2<=Z$c.length&&0<=Z$l.multiply(Z$a[Z$e],Z$c[Z$c.length-1],Z$c[Z$c.length-2]);)Z$c.pop();Z$a[Z$e]&&Z$c.push(Z$a[Z$e])}return Z$c},Z$l._mPointList=null,Z$l._tempPointList=[],Z$l._temPList=[],Z$l._temArr=[],Z$l}(),Z$y=function(){function Z$e(){}return Z$m(Z$e,"laya.maths.MathUtil"),Z$e.subtractVector3=function(Z$a,Z$b,Z$c){Z$c[0]=Z$a[0]-Z$b[0],Z$c[1]=Z$a[1]-Z$b[1],Z$c[2]=Z$a[2]-Z$b[2]},Z$e.lerp=function(Z$a,Z$b,Z$c){return Z$a*(1-Z$c)+Z$b*Z$c},Z$e.scaleVector3=function(Z$a,Z$b,Z$c){Z$c[0]=Z$a[0]*Z$b,Z$c[1]=Z$a[1]*Z$b,Z$c[2]=Z$a[2]*Z$b},Z$e.lerpVector3=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a[0],Z$f=Z$a[1],Z$i=Z$a[2];Z$d[0]=Z$e+Z$c*(Z$b[0]-Z$e),Z$d[1]=Z$f+Z$c*(Z$b[1]-Z$f),Z$d[2]=Z$i+Z$c*(Z$b[2]-Z$i)},Z$e.lerpVector4=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a[0],Z$f=Z$a[1],Z$i=Z$a[2],Z$j=Z$a[3];Z$d[0]=Z$e+Z$c*(Z$b[0]-Z$e),Z$d[1]=Z$f+Z$c*(Z$b[1]-Z$f),Z$d[2]=Z$i+Z$c*(Z$b[2]-Z$i),Z$d[3]=Z$j+Z$c*(Z$b[3]-Z$j)},Z$e.slerpQuaternionArray=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){var Z$j,Z$k,Z$l,Z$m,Z$n,Z$o=Z$a[Z$b+0],Z$p=Z$a[Z$b+1],Z$q=Z$a[Z$b+2],Z$r=Z$a[Z$b+3],Z$s=Z$c[Z$d+0],Z$t=Z$c[Z$d+1],Z$u=Z$c[Z$d+2],Z$v=Z$c[Z$d+3];return(Z$k=Z$o*Z$s+Z$p*Z$t+Z$q*Z$u+Z$r*Z$v)<0&&(Z$k=-Z$k,Z$s=-Z$s,Z$t=-Z$t,Z$u=-Z$u,Z$v=-Z$v),Z$n=1e-6<1-Z$k?(Z$j=Math.acos(Z$k),Z$l=Math.sin(Z$j),Z$m=Math.sin((1-Z$e)*Z$j)/Z$l,Math.sin(Z$e*Z$j)/Z$l):(Z$m=1-Z$e,Z$e),Z$f[Z$i+0]=Z$m*Z$o+Z$n*Z$s,Z$f[Z$i+1]=Z$m*Z$p+Z$n*Z$t,Z$f[Z$i+2]=Z$m*Z$q+Z$n*Z$u,Z$f[Z$i+3]=Z$m*Z$r+Z$n*Z$v,Z$f},Z$e.getRotation=function(Z$a,Z$b,Z$c,Z$d){return Math.atan2(Z$d-Z$b,Z$c-Z$a)/Math.PI*180},Z$e.sortBigFirst=function(Z$a,Z$b){return Z$a==Z$b?0:Z$a<Z$b?1:-1},Z$e.sortSmallFirst=function(Z$a,Z$b){return Z$a==Z$b?0:Z$a<Z$b?-1:1},Z$e.sortNumBigFirst=function(Z$a,Z$b){return parseFloat(Z$b)-parseFloat(Z$a)},Z$e.sortNumSmallFirst=function(Z$a,Z$b){return parseFloat(Z$a)-parseFloat(Z$b)},Z$e.sortByKey=function(Z$c,Z$a,Z$b){var Z$d;return void 0===Z$a&&(Z$a=!1),void 0===Z$b&&(Z$b=!0),Z$d=Z$a?Z$b?Z$e.sortNumBigFirst:Z$e.sortBigFirst:Z$b?Z$e.sortNumSmallFirst:Z$e.sortSmallFirst,function(Z$a,Z$b){return Z$d(Z$a[Z$c],Z$b[Z$c])}},Z$e}(),Z$G=function(){function Z$c(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this.inPool=!1,this.bTransform=!1,void 0===Z$a&&(Z$a=1),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=1),void 0===Z$e&&(Z$e=0),void 0===Z$f&&(Z$f=0),this.a=Z$a,this.b=Z$b,this.c=Z$c,this.d=Z$d,this.tx=Z$e,this.ty=Z$f,this._checkTransform()}Z$m(Z$c,"laya.maths.Matrix");var Z$a=Z$c.prototype;return Z$a.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},Z$a._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},Z$a.setTranslate=function(Z$a,Z$b){return this.tx=Z$a,this.ty=Z$b,this},Z$a.translate=function(Z$a,Z$b){return this.tx+=Z$a,this.ty+=Z$b,this},Z$a.scale=function(Z$a,Z$b){this.a*=Z$a,this.d*=Z$b,this.c*=Z$a,this.b*=Z$b,this.tx*=Z$a,this.ty*=Z$b,this.bTransform=!0},Z$a.rotate=function(Z$a){var Z$b=Math.cos(Z$a),Z$c=Math.sin(Z$a),Z$d=this.a,Z$e=this.c,Z$f=this.tx;this.a=Z$d*Z$b-this.b*Z$c,this.b=Z$d*Z$c+this.b*Z$b,this.c=Z$e*Z$b-this.d*Z$c,this.d=Z$e*Z$c+this.d*Z$b,this.tx=Z$f*Z$b-this.ty*Z$c,this.ty=Z$f*Z$c+this.ty*Z$b,this.bTransform=!0},Z$a.skew=function(Z$a,Z$b){var Z$c=Math.tan(Z$a),Z$d=Math.tan(Z$b),Z$e=this.a,Z$f=this.b;return this.a+=Z$d*this.c,this.b+=Z$d*this.d,this.c+=Z$c*Z$e,this.d+=Z$c*Z$f,this},Z$a.invertTransformPoint=function(Z$a){var Z$b=this.a,Z$c=this.b,Z$d=this.c,Z$e=this.d,Z$f=this.tx,Z$i=Z$b*Z$e-Z$c*Z$d,Z$j=Z$e/Z$i,Z$k=-Z$c/Z$i,Z$l=-Z$d/Z$i,Z$m=Z$b/Z$i,Z$n=(Z$d*this.ty-Z$e*Z$f)/Z$i,Z$o=-(Z$b*this.ty-Z$c*Z$f)/Z$i;return Z$a.setTo(Z$j*Z$a.x+Z$l*Z$a.y+Z$n,Z$k*Z$a.x+Z$m*Z$a.y+Z$o)},Z$a.transformPoint=function(Z$a){return Z$a.setTo(this.a*Z$a.x+this.c*Z$a.y+this.tx,this.b*Z$a.x+this.d*Z$a.y+this.ty)},Z$a.transformPointN=function(Z$a){return Z$a.setTo(this.a*Z$a.x+this.c*Z$a.y,this.b*Z$a.x+this.d*Z$a.y)},Z$a.transformPointArray=function(Z$a,Z$b){for(var Z$c=Z$a.length,Z$d=0;Z$d<Z$c;Z$d+=2){var Z$e=Z$a[Z$d],Z$f=Z$a[Z$d+1];Z$b[Z$d]=this.a*Z$e+this.c*Z$f+this.tx,Z$b[Z$d+1]=this.b*Z$e+this.d*Z$f+this.ty}return Z$b},Z$a.transformPointArrayScale=function(Z$a,Z$b){for(var Z$c=Z$a.length,Z$d=0;Z$d<Z$c;Z$d+=2){var Z$e=Z$a[Z$d],Z$f=Z$a[Z$d+1];Z$b[Z$d]=this.a*Z$e+this.c*Z$f,Z$b[Z$d+1]=this.b*Z$e+this.d*Z$f}return Z$b},Z$a.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},Z$a.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},Z$a.invert=function(){var Z$a=this.a,Z$b=this.b,Z$c=this.c,Z$d=this.d,Z$e=this.tx,Z$f=Z$a*Z$d-Z$b*Z$c;return this.a=Z$d/Z$f,this.b=-Z$b/Z$f,this.c=-Z$c/Z$f,this.d=Z$a/Z$f,this.tx=(Z$c*this.ty-Z$d*Z$e)/Z$f,this.ty=-(Z$a*this.ty-Z$b*Z$e)/Z$f,this},Z$a.setTo=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){return this.a=Z$a,this.b=Z$b,this.c=Z$c,this.d=Z$d,this.tx=Z$e,this.ty=Z$f,this},Z$a.concat=function(Z$a){var Z$b=this.a,Z$c=this.c,Z$d=this.tx;return this.a=Z$b*Z$a.a+this.b*Z$a.c,this.b=Z$b*Z$a.b+this.b*Z$a.d,this.c=Z$c*Z$a.a+this.d*Z$a.c,this.d=Z$c*Z$a.b+this.d*Z$a.d,this.tx=Z$d*Z$a.a+this.ty*Z$a.c+Z$a.tx,this.ty=Z$d*Z$a.b+this.ty*Z$a.d+Z$a.ty,this},Z$a.scaleEx=function(Z$a,Z$b){var Z$c=this.a,Z$d=this.b,Z$e=this.c,Z$f=this.d;0!==Z$d||0!==Z$e?(this.a=Z$a*Z$c,this.b=Z$a*Z$d,this.c=Z$b*Z$e):(this.a=Z$a*Z$c,this.b=0*Z$f,this.c=0*Z$c),this.d=Z$b*Z$f,this.bTransform=!0},Z$a.rotateEx=function(Z$a){var Z$b=Math.cos(Z$a),Z$c=Math.sin(Z$a),Z$d=this.a,Z$e=this.b,Z$f=this.c,Z$i=this.d;0!==Z$e||0!==Z$f?(this.a=Z$b*Z$d+Z$c*Z$f,this.b=Z$b*Z$e+Z$c*Z$i,this.c=-Z$c*Z$d+Z$b*Z$f,this.d=-Z$c*Z$e+Z$b*Z$i):(this.a=Z$b*Z$d,this.b=Z$c*Z$i,this.c=-Z$c*Z$d,this.d=Z$b*Z$i),this.bTransform=!0},Z$a.clone=function(){var Z$a=Z$c.create();return Z$a.a=this.a,Z$a.b=this.b,Z$a.c=this.c,Z$a.d=this.d,Z$a.tx=this.tx,Z$a.ty=this.ty,Z$a.bTransform=this.bTransform,Z$a},Z$a.copyTo=function(Z$a){return Z$a.a=this.a,Z$a.b=this.b,Z$a.c=this.c,Z$a.d=this.d,Z$a.tx=this.tx,Z$a.ty=this.ty,Z$a.bTransform=this.bTransform,Z$a},Z$a.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},Z$a.destroy=function(){if(!this.inPool){var Z$a=Z$c._cache;this.inPool=!0,Z$a._length||(Z$a._length=0),(Z$a[Z$a._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},Z$c.mul=function(Z$a,Z$b,Z$c){var Z$d=Z$a.a,Z$e=Z$a.b,Z$f=Z$a.c,Z$i=Z$a.d,Z$j=Z$a.tx,Z$k=Z$a.ty,Z$l=Z$b.a,Z$m=Z$b.b,Z$n=Z$b.c,Z$o=Z$b.d,Z$p=Z$b.tx,Z$q=Z$b.ty;return 0!==Z$m||0!==Z$n?(Z$c.a=Z$d*Z$l+Z$e*Z$n,Z$c.b=Z$d*Z$m+Z$e*Z$o,Z$c.c=Z$f*Z$l+Z$i*Z$n,Z$c.d=Z$f*Z$m+Z$i*Z$o,Z$c.tx=Z$l*Z$j+Z$n*Z$k+Z$p,Z$c.ty=Z$m*Z$j+Z$o*Z$k+Z$q):(Z$c.a=Z$d*Z$l,Z$c.b=Z$e*Z$o,Z$c.c=Z$f*Z$l,Z$c.d=Z$i*Z$o,Z$c.tx=Z$l*Z$j+Z$p,Z$c.ty=Z$o*Z$k+Z$q),Z$c},Z$c.mul16=function(Z$a,Z$b,Z$c){var Z$d=Z$a.a,Z$e=Z$a.b,Z$f=Z$a.c,Z$i=Z$a.d,Z$j=Z$a.tx,Z$k=Z$a.ty,Z$l=Z$b.a,Z$m=Z$b.b,Z$n=Z$b.c,Z$o=Z$b.d,Z$p=Z$b.tx,Z$q=Z$b.ty;return 0!==Z$m||0!==Z$n?(Z$c[0]=Z$d*Z$l+Z$e*Z$n,Z$c[1]=Z$d*Z$m+Z$e*Z$o,Z$c[4]=Z$f*Z$l+Z$i*Z$n,Z$c[5]=Z$f*Z$m+Z$i*Z$o,Z$c[12]=Z$l*Z$j+Z$n*Z$k+Z$p,Z$c[13]=Z$m*Z$j+Z$o*Z$k+Z$q):(Z$c[0]=Z$d*Z$l,Z$c[1]=Z$e*Z$o,Z$c[4]=Z$f*Z$l,Z$c[5]=Z$i*Z$o,Z$c[12]=Z$l*Z$j+Z$p,Z$c[13]=Z$o*Z$k+Z$q),Z$c},Z$c.mulPre=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){var Z$k=Z$a.a,Z$l=Z$a.b,Z$m=Z$a.c,Z$n=Z$a.d,Z$o=Z$a.tx,Z$p=Z$a.ty;return 0!==Z$c||0!==Z$d?(Z$j.a=Z$k*Z$b+Z$l*Z$d,Z$j.b=Z$k*Z$c+Z$l*Z$e,Z$j.c=Z$m*Z$b+Z$n*Z$d,Z$j.d=Z$m*Z$c+Z$n*Z$e,Z$j.tx=Z$b*Z$o+Z$d*Z$p+Z$f,Z$j.ty=Z$c*Z$o+Z$e*Z$p+Z$i):(Z$j.a=Z$k*Z$b,Z$j.b=Z$l*Z$e,Z$j.c=Z$m*Z$b,Z$j.d=Z$n*Z$e,Z$j.tx=Z$b*Z$o+Z$f,Z$j.ty=Z$e*Z$p+Z$i),Z$j},Z$c.mulPos=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){var Z$k=Z$a.a,Z$l=Z$a.b,Z$m=Z$a.c,Z$n=Z$a.d,Z$o=Z$a.tx,Z$p=Z$a.ty;return 0!==Z$l||0!==Z$m?(Z$j.a=Z$b*Z$k+Z$c*Z$m,Z$j.b=Z$b*Z$l+Z$c*Z$n,Z$j.c=Z$d*Z$k+Z$e*Z$m,Z$j.d=Z$d*Z$l+Z$e*Z$n,Z$j.tx=Z$k*Z$f+Z$m*Z$i+Z$o,Z$j.ty=Z$l*Z$f+Z$n*Z$i+Z$p):(Z$j.a=Z$b*Z$k,Z$j.b=Z$c*Z$n,Z$j.c=Z$d*Z$k,Z$j.d=Z$e*Z$n,Z$j.tx=Z$k*Z$f+Z$o,Z$j.ty=Z$n*Z$i+Z$p),Z$j},Z$c.preMul=function(Z$a,Z$b,Z$c){var Z$d=Z$a.a,Z$e=Z$a.b,Z$f=Z$a.c,Z$i=Z$a.d,Z$j=Z$b.a,Z$k=Z$b.b,Z$l=Z$b.c,Z$m=Z$b.d,Z$n=Z$b.tx,Z$o=Z$b.ty;return Z$c.a=Z$j*Z$d,Z$c.b=Z$c.c=0,Z$c.d=Z$m*Z$i,Z$c.tx=Z$n*Z$d+Z$a.tx,Z$c.ty=Z$o*Z$i+Z$a.ty,0===Z$k&&0===Z$l&&0===Z$e&&0===Z$f||(Z$c.a+=Z$k*Z$f,Z$c.d+=Z$l*Z$e,Z$c.b+=Z$j*Z$e+Z$k*Z$i,Z$c.c+=Z$l*Z$d+Z$m*Z$f,Z$c.tx+=Z$o*Z$f,Z$c.ty+=Z$n*Z$e),Z$c},Z$c.preMulXY=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.a,Z$f=Z$a.b,Z$i=Z$a.c,Z$j=Z$a.d;return Z$d.a=Z$e,Z$d.b=Z$f,Z$d.c=Z$i,Z$d.d=Z$j,Z$d.tx=Z$b*Z$e+Z$a.tx+Z$c*Z$i,Z$d.ty=Z$c*Z$j+Z$a.ty+Z$b*Z$f,Z$d},Z$c.create=function(){var Z$a=Z$c._cache,Z$b=Z$a._length?Z$a[--Z$a._length]:new Z$c;return Z$b.inPool=!1,Z$b},Z$c.EMPTY=new Z$c,Z$c.TEMP=new Z$c,Z$c._cache=[],Z$c}(),Z$A=function(){function Z$a(Z$a,Z$b){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),this.x=Z$a,this.y=Z$b}Z$m(Z$a,"laya.maths.Point");var Z$b=Z$a.prototype;return Z$b.setTo=function(Z$a,Z$b){return this.x=Z$a,this.y=Z$b,this},Z$b.distance=function(Z$a,Z$b){return Math.sqrt((this.x-Z$a)*(this.x-Z$a)+(this.y-Z$b)*(this.y-Z$b))},Z$b.toString=function(){return this.x+","+this.y},Z$b.normalize=function(){var Z$a=Math.sqrt(this.x*this.x+this.y*this.y);if(0<Z$a){var Z$b=1/Z$a;this.x*=Z$b,this.y*=Z$b}},Z$a.TEMP=new Z$a,Z$a.EMPTY=new Z$a,Z$a}(),Z$B=function(){function Z$l(Z$a,Z$b,Z$c,Z$d){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=0),this.x=Z$a,this.y=Z$b,this.width=Z$c,this.height=Z$d}Z$m(Z$l,"laya.maths.Rectangle");var Z$a=Z$l.prototype;return Z$a.setTo=function(Z$a,Z$b,Z$c,Z$d){return this.x=Z$a,this.y=Z$b,this.width=Z$c,this.height=Z$d,this},Z$a.copyFrom=function(Z$a){return this.x=Z$a.x,this.y=Z$a.y,this.width=Z$a.width,this.height=Z$a.height,this},Z$a.contains=function(Z$a,Z$b){return!(this.width<=0||this.height<=0)&&(Z$a>=this.x&&Z$a<this.right&&Z$b>=this.y&&Z$b<this.bottom)},Z$a.intersects=function(Z$a){return!(Z$a.x>this.x+this.width||Z$a.x+Z$a.width<this.x||Z$a.y>this.y+this.height||Z$a.y+Z$a.height<this.y)},Z$a.intersection=function(Z$a,Z$b){return this.intersects(Z$a)?(Z$b||(Z$b=new Z$l),Z$b.x=Math.max(this.x,Z$a.x),Z$b.y=Math.max(this.y,Z$a.y),Z$b.width=Math.min(this.right,Z$a.right)-Z$b.x,Z$b.height=Math.min(this.bottom,Z$a.bottom)-Z$b.y,Z$b):null},Z$a.union=function(Z$a,Z$b){return Z$b||(Z$b=new Z$l),this.clone(Z$b),Z$a.width<=0||Z$a.height<=0?Z$b:(Z$b.addPoint(Z$a.x,Z$a.y),Z$b.addPoint(Z$a.right,Z$a.bottom),this)},Z$a.clone=function(Z$a){return Z$a||(Z$a=new Z$l),Z$a.x=this.x,Z$a.y=this.y,Z$a.width=this.width,Z$a.height=this.height,Z$a},Z$a.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},Z$a.equals=function(Z$a){return!(!Z$a||Z$a.x!==this.x||Z$a.y!==this.y||Z$a.width!==this.width||Z$a.height!==this.height)},Z$a.addPoint=function(Z$a,Z$b){return this.x>Z$a&&(this.width+=this.x-Z$a,this.x=Z$a),this.y>Z$b&&(this.height+=this.y-Z$b,this.y=Z$b),this.width<Z$a-this.x&&(this.width=Z$a-this.x),this.height<Z$b-this.y&&(this.height=Z$b-this.y),this},Z$a._getBoundPoints=function(){var Z$a=Z$l._temB;return(Z$a.length=0)==this.width||0==this.height||Z$a.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),Z$a},Z$a.isEmpty=function(){return this.width<=0||this.height<=0},Z$q(0,Z$a,"right",function(){return this.x+this.width}),Z$q(0,Z$a,"bottom",function(){return this.y+this.height}),Z$l._getBoundPointS=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$l._temA;return(Z$e.length=0)==Z$c||0==Z$d||Z$e.push(Z$a,Z$b,Z$a+Z$c,Z$b,Z$a,Z$b+Z$d,Z$a+Z$c,Z$b+Z$d),Z$e},Z$l._getWrapRec=function(Z$a,Z$b){if(!Z$a||Z$a.length<1)return Z$b?Z$b.setTo(0,0,0,0):Z$l.TEMP.setTo(0,0,0,0);Z$b=Z$b||new Z$l;var Z$c,Z$d,Z$e,Z$f,Z$i,Z$j=Z$a.length,Z$k=Z$A.TEMP;for(Z$e=Z$i=-(Z$d=Z$f=99999),Z$c=0;Z$c<Z$j;Z$c+=2)Z$k.x=Z$a[Z$c],Z$k.y=Z$a[Z$c+1],Z$d=Z$d<Z$k.x?Z$d:Z$k.x,Z$f=Z$f<Z$k.y?Z$f:Z$k.y,Z$e=Z$e>Z$k.x?Z$e:Z$k.x,Z$i=Z$i>Z$k.y?Z$i:Z$k.y;return Z$b.setTo(Z$d,Z$f,Z$e-Z$d,Z$i-Z$f)},Z$l.EMPTY=new Z$l,Z$l.TEMP=new Z$l,Z$l._temB=[],Z$l._temA=[],Z$l}(),Z$E=function(){function Z$k(){}return Z$m(Z$k,"laya.media.SoundManager"),Z$q(1,Z$k,"useAudioMusic",function(){return Z$k._useAudioMusic},function(Z$a){Z$k._useAudioMusic=Z$a,Z$k._musicClass=Z$a?Z$ca:null}),Z$q(1,Z$k,"autoStopMusic",function(){return Z$k._autoStopMusic},function(Z$a){Z$z.stage.off("blur",null,Z$k._stageOnBlur),Z$z.stage.off("focus",null,Z$k._stageOnFocus),Z$z.stage.off("visibilitychange",null,Z$k._visibilityChange),(Z$k._autoStopMusic=Z$a)&&(Z$z.stage.on("blur",null,Z$k._stageOnBlur),Z$z.stage.on("focus",null,Z$k._stageOnFocus),Z$z.stage.on("visibilitychange",null,Z$k._visibilityChange))}),Z$q(1,Z$k,"muted",function(){return Z$k._muted},function(Z$a){Z$a!=Z$k._muted&&(Z$a&&Z$k.stopAllSound(),Z$k.musicMuted=Z$a,Z$k._muted=Z$a)}),Z$q(1,Z$k,"musicMuted",function(){return Z$k._musicMuted},function(Z$a){Z$a!=Z$k._musicMuted&&(Z$a?(Z$k._tMusic&&Z$k._musicChannel&&!Z$k._musicChannel.isStopped?Z$k._musicChannel.pause():Z$k._musicChannel=null,Z$k._musicMuted=Z$a):(Z$k._musicMuted=Z$a,Z$k._tMusic&&Z$k._musicChannel&&Z$k._musicChannel.resume()))}),Z$q(1,Z$k,"soundMuted",function(){return Z$k._soundMuted},function(Z$a){Z$k._soundMuted=Z$a}),Z$k.addChannel=function(Z$a){0<=Z$k._channels.indexOf(Z$a)||(Z$k._channels.push(Z$a),Z$k.autoReleaseSound&&0!=Z$k._notUsedCount&&Z$k._notUsedUrls[Z$a.url]&&(delete Z$k._notUsedUrls[Z$a.url],0==--Z$k._notUsedCount&&Z$z.timer.clear(Z$k,Z$k.disposeSoundIfNotUsed)))},Z$k.removeChannel=function(Z$a){var Z$b=Z$k._channels,Z$c=Z$b.indexOf(Z$a);if(-1!=Z$c&&(Z$b.splice(Z$c,1),Z$k.autoReleaseSound)){var Z$d=Z$a.url,Z$e=Z$k.defaultIntervals[Z$d]||2e4;if(0<Z$e){var Z$f=!0;for(Z$c=Z$b.length-1;0<=Z$c;Z$c--)if(Z$b[Z$c].url==Z$d){Z$f=!1;break}Z$f&&(Z$k._notUsedUrls[Z$d]=Date.now()+Z$e,0==Z$k._notUsedCount++&&Z$z.timer.loop(1e4,Z$k,Z$k.disposeSoundIfNotUsed))}}},Z$k.disposeSoundIfNotUsed=function(){var Z$a=Z$k._notUsedUrls;if(0!=Z$k._notUsedCount){var Z$b=Date.now();for(var Z$c in Z$a)Z$b>=Z$a[Z$c]&&(delete Z$a[Z$c],--Z$k._notUsedCount,Z$k.destroySound(Z$c));if(0!=Z$k._notUsedCount)return}Z$z.timer.clear(Z$k,Z$k.disposeSoundIfNotUsed)},Z$k._visibilityChange=function(){Z$z.stage.isVisibility?Z$k._stageOnFocus():Z$k._stageOnBlur()},Z$k._stageOnBlur=function(){Z$k._isActive=!1,Z$k._musicChannel&&(Z$k._musicChannel.isStopped||(Z$k._blurPaused=!0,Z$k._musicChannel.pause())),Z$k.stopAllSound(),Z$z.stage.once("mousedown",null,Z$k._stageOnFocus)},Z$k._recoverWebAudio=function(){Z$fa.ctx&&"running"!=Z$fa.ctx.state&&Z$fa.ctx.resume&&Z$fa.ctx.resume()},Z$k._stageOnFocus=function(){if(Z$k._isActive=!0,Z$k._recoverWebAudio(),Z$z.stage.off("mousedown",null,Z$k._stageOnFocus),Z$k._blurPaused){var Z$a=Z$k._musicChannel;Z$a&&Z$k._music&&Z$a.isStopped&&(Z$k._blurPaused=!1,Z$k._music._disposed?Z$k.playMusic(Z$a.url,Z$a.loops,Z$a.startHandler,Z$a.completeHandler,Z$a.startTime):Z$a.audioBuffer?Z$a.resume():Z$k._music.play(Z$a.startTime,Z$a.loops,Z$a.startHandler,Z$a))}},Z$k.playSound=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){if(void 0===Z$b&&(Z$b=1),void 0===Z$f&&(Z$f=0),!Z$a)return null;if(Z$k._muted)return null;if(Z$k._recoverWebAudio(),Z$a==Z$k._tMusic){if(Z$k._musicMuted)return null}else{if(!Z$k._isActive)return null;if(Z$k._soundMuted)return null}var Z$i,Z$j=Z$k._pool[Z$a];return Z$e||(Z$e=Z$k._soundClass),Z$j||((Z$j=new Z$e).load(Z$a),Z$k._pool[Z$a]=Z$j),(Z$i=Z$j.play(Z$f,Z$b,Z$c))?(Z$a==Z$k._tMusic&&(Z$k._music=Z$j,Z$k._isActive||(Z$k._blurPaused=!0,Z$i.pause())),Z$i.url=Z$a,Z$i.volume=Z$a==Z$k._tMusic?Z$k.musicVolume:Z$k.soundVolume,Z$i.completeHandler=Z$d,Z$i):null},Z$k.destroySound=function(Z$a){var Z$b=Z$k._pool[Z$a];Z$b&&(delete Z$k._pool[Z$a],Z$b.dispose())},Z$k.playMusic=function(Z$a,Z$b,Z$c,Z$d,Z$e){return void 0===Z$b&&(Z$b=0),void 0===Z$e&&(Z$e=0),Z$k._tMusic=Z$a,Z$k._musicChannel&&Z$k._musicChannel.stop(),Z$k._musicChannel=Z$k.playSound(Z$a,Z$b,Z$c,Z$d,null,Z$e)},Z$k.stopSound=function(Z$a){for(var Z$b,Z$c=Z$k._channels.length-1;0<=Z$c;Z$c--)(Z$b=Z$k._channels[Z$c]).url==Z$a&&Z$b.stop()},Z$k.stopAll=function(){Z$k._tMusic=null;var Z$a=0;for(Z$a=Z$k._channels.length-1;0<=Z$a;Z$a--)Z$k._channels[Z$a].stop()},Z$k.stopAllSound=function(){var Z$a,Z$b=0;for(Z$b=Z$k._channels.length-1;0<=Z$b;Z$b--)(Z$a=Z$k._channels[Z$b]).url!=Z$k._tMusic&&Z$a.stop()},Z$k.stopMusic=function(){Z$k._musicChannel&&Z$k._musicChannel.stop(),Z$k._tMusic=null},Z$k.setSoundVolume=function(Z$a,Z$b){if(Z$b)Z$k._setVolume(Z$b,Z$a);else{Z$k.soundVolume=Z$a;var Z$c,Z$d=0;for(Z$d=Z$k._channels.length-1;0<=Z$d;Z$d--)(Z$c=Z$k._channels[Z$d]).url!=Z$k._tMusic&&(Z$c.volume=Z$a)}},Z$k.setMusicVolume=function(Z$a){Z$k.musicVolume=Z$a,Z$k._setVolume(Z$k._tMusic,Z$a)},Z$k._setVolume=function(Z$a,Z$b){for(var Z$c,Z$d=Z$k._channels.length-1;0<=Z$d;Z$d--)(Z$c=Z$k._channels[Z$d]).url==Z$a&&(Z$c.volume=Z$b)},Z$k.musicVolume=1,Z$k.soundVolume=1,Z$k.playbackRate=1,Z$k._useAudioMusic=!0,Z$k._muted=!1,Z$k._soundMuted=!1,Z$k._musicMuted=!1,Z$k._tMusic=null,Z$k._musicChannel=null,Z$k._music=null,Z$k._channels=[],Z$k._autoStopMusic=!1,Z$k._blurPaused=!1,Z$k._isActive=!0,Z$k._soundClass=null,Z$k._musicClass=null,Z$k.autoReleaseSound=!0,Z$k._pool={},Z$k.defaultIntervals={},Z$k._notUsedUrls={},Z$k._notUsedCount=0,Z$k}(),Z$C=function(){var Z$a;function Z$c(){}return Z$m(Z$c,"laya.net.LocalStorage"),Z$c.__init__=function(){Z$c._baseClass||(Z$c._baseClass=Z$a).init(),Z$c.items=Z$c._baseClass.items,Z$c.support=Z$c._baseClass.support},Z$c.setItem=function(Z$a,Z$b){Z$c._baseClass.setItem(Z$a,Z$b)},Z$c.getItem=function(Z$a){return Z$c._baseClass.getItem(Z$a)},Z$c.setJSON=function(Z$a,Z$b){Z$c._baseClass.setJSON(Z$a,Z$b)},Z$c.getJSON=function(Z$a){return Z$c._baseClass.getJSON(Z$a)},Z$c.removeItem=function(Z$a){Z$c._baseClass.removeItem(Z$a)},Z$c.clear=function(){Z$c._baseClass.clear()},Z$c._baseClass=null,Z$c.items=null,Z$c.support=!1,Z$c.__init$=function(){Z$a=function(){function Z$c(){}return Z$m(Z$c,""),Z$c.init=function(){try{Z$c.support=!0,Z$c.items=Z$i.localStorage,Z$c.setItem("laya","1"),Z$c.removeItem("laya")}catch(Z$a){Z$c.support=!1}Z$c.support||console.log("LocalStorage is not supprot or browser is private mode.")},Z$c.setItem=function(Z$a,Z$b){try{Z$c.support&&Z$c.items.setItem(Z$a,Z$b)}catch(Z$a){console.warn("set localStorage failed",Z$a)}},Z$c.getItem=function(Z$a){return Z$c.support?Z$c.items.getItem(Z$a):null},Z$c.setJSON=function(Z$a,Z$b){try{Z$c.support&&Z$c.items.setItem(Z$a,JSON.stringify(Z$b))}catch(Z$a){console.warn("set localStorage failed",Z$a)}},Z$c.getJSON=function(Z$a){return JSON.parse(Z$c.support?Z$c.items.getItem(Z$a):null)},Z$c.removeItem=function(Z$a){Z$c.support&&Z$c.items.removeItem(Z$a)},Z$c.clear=function(){Z$c.support&&Z$c.items.clear()},Z$c.items=null,Z$c.support=!1,Z$c}()},Z$c}(),Z$H=(function(){function Z$d(){}Z$m(Z$d,"laya.net.ResourceVersion"),Z$d.enable=function(Z$a,Z$b,Z$c){void 0===Z$c&&(Z$c=2),laya.net.ResourceVersion.type=Z$c,Z$z.loader.load(Z$a,Z$u.create(null,Z$d.onManifestLoaded,[Z$b]),null,"json"),Z$I.customFormat=Z$d.addVersionPrefix},Z$d.onManifestLoaded=function(Z$a,Z$b){Z$d.manifest=Z$b,Z$a.run(),Z$b||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},Z$d.addVersionPrefix=function(Z$a){return Z$d.manifest&&Z$d.manifest[Z$a]?2==Z$d.type?Z$d.manifest[Z$a]:Z$d.manifest[Z$a]+"/"+Z$a:Z$a},Z$d.FOLDER_VERSION=1,Z$d.FILENAME_VERSION=2,Z$d.manifest=null,Z$d.type=1}(),function(){function Z$a(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}Z$m(Z$a,"laya.net.TTFLoader");var Z$b=Z$a.prototype;return Z$b.load=function(Z$a){var Z$b=(this._url=Z$a).split(".ttf")[0].split("/");this.fontName=Z$b[Z$b.length-1],Z$O.window.conch?this._loadConch():Z$O.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},Z$b._loadConch=function(){this._http=new Z$ia,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},Z$b._onHttpLoaded=function(Z$a){Z$O.window.conch.setFontFaceFromBuffer(this.fontName,Z$a),this._clearHttp(),this._complete()},Z$b._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},Z$b._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},Z$b._complete=function(){Z$z.timer.clear(this,this._complete),Z$z.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},Z$b._checkComplete=function(){Z$F.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},Z$b._loadWithFontFace=function(){var Z$a=new Z$O.window.FontFace(this.fontName,"url('"+this._url+"')");Z$O.window.document.fonts.add(Z$a);var Z$b=this;Z$a.loaded.then(function(){Z$b._complete()}),Z$a.load()},Z$b._createDiv=function(){this._div=Z$O.createElement("div"),this._div.innerHTML="laya";var Z$a=this._div.style;Z$a.fontFamily=this.fontName,Z$a.position="absolute",Z$a.left="-100px",Z$a.top="-100px",Z$O.document.body.appendChild(this._div)},Z$b._loadWithCSS=function(){var Z$a=this,Z$b=Z$O.createElement("style");Z$b.type="text/css",Z$O.document.body.appendChild(Z$b),Z$b.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=Z$F.measureText("LayaTTFFont",this._fontTxt).width;var Z$c=this;Z$b.onload=function(){Z$z.timer.once(1e4,Z$c,Z$a._complete)},Z$z.timer.loop(20,this,this._checkComplete),this._createDiv()},Z$a._testString="LayaTTFFont",Z$a}()),Z$I=function(){function Z$d(Z$a){this._url=null,this._path=null,this._url=Z$d.formatURL(Z$a),this._path=Z$d.getPath(Z$a)}Z$m(Z$d,"laya.net.URL");var Z$a=Z$d.prototype;return Z$q(0,Z$a,"path",function(){return this._path}),Z$q(0,Z$a,"url",function(){return this._url}),Z$d.formatURL=function(Z$a,Z$b){if(!Z$a)return"null path";if(0<Z$a.indexOf(":"))return Z$a;null!=Z$d.customFormat&&(Z$a=Z$d.customFormat(Z$a,Z$b));var Z$c=Z$a.charAt(0);if("."===Z$c)return Z$d.formatRelativePath((Z$b||Z$d.basePath)+Z$a);if("~"===Z$c)return Z$d.rootPath+Z$a.substring(1);if("d"===Z$c){if(0===Z$a.indexOf("data:image"))return Z$a}else if("/"===Z$c)return Z$a;return(Z$b||Z$d.basePath)+Z$a},Z$d.formatRelativePath=function(Z$a){for(var Z$b=Z$a.split("/"),Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++)".."==Z$b[Z$c]&&(Z$b.splice(Z$c-1,2),Z$c-=2);return Z$b.join("/")},Z$d.isAbsolute=function(Z$a){return 0<Z$a.indexOf(":")||"/"==Z$a.charAt(0)},Z$d.getPath=function(Z$a){var Z$b=Z$a.lastIndexOf("/");return 0<Z$b?Z$a.substr(0,Z$b+1):""},Z$d.getFileName=function(Z$a){var Z$b=Z$a.lastIndexOf("/");return 0<Z$b?Z$a.substr(Z$b+1):Z$a},Z$d.version={},Z$d.basePath="",Z$d.rootPath="",Z$d.customFormat=function(Z$a){var Z$b=Z$d.version[Z$a];return!Z$J.isConchApp&&Z$b&&(Z$a+="?v="+Z$b),Z$a},Z$d}(),Z$J=function(){function Z$e(Z$a,Z$b){this._timeId=0;var Z$c=Z$e._mainCanvas.source.style;Z$c.position="absolute",Z$c.top=Z$c.left="0px",Z$c.background="#000000",Z$e._mainCanvas.source.id="layaCanvas";var Z$d=laya.renders.Render.isWebGL;Z$e._mainCanvas.source.width=Z$a,Z$e._mainCanvas.source.height=Z$b,Z$d&&Z$e.WebGL.init(Z$e._mainCanvas,Z$a,Z$b),Z$O.container.appendChild(Z$e._mainCanvas.source),(Z$e._context=new Z$K(Z$a,Z$b,Z$d?null:Z$e._mainCanvas)).ctx.setIsMainContext(),Z$O.window.requestAnimationFrame(function Z$a(Z$b){Z$O.window.requestAnimationFrame(Z$a);Z$z.stage._loop()}),Z$z.stage.on("visibilitychange",this,this._onVisibilitychange)}Z$m(Z$e,"laya.renders.Render");var Z$a=Z$e.prototype;return Z$a._onVisibilitychange=function(){Z$z.stage.isVisibility?0!=this._timeId&&Z$O.window.clearInterval(this._timeId):this._timeId=Z$O.window.setInterval(this._enterFrame,1e3)},Z$a._enterFrame=function(Z$a){Z$z.stage._loop()},Z$q(1,Z$e,"context",function(){return Z$e._context}),Z$q(1,Z$e,"canvas",function(){return Z$e._mainCanvas.source}),Z$e._context=null,Z$e._mainCanvas=null,Z$e.WebGL=null,Z$e.isConchNode=!1,Z$e.isConchApp=!1,Z$e.isConchWebGL=!1,Z$e.isWebGL=!1,Z$e.is3DMode=!1,Z$e.optimizeTextureMemory=function(Z$a,Z$b){return!0},Z$e.__init$=function(){Z$i.ConchRenderType=Z$i.ConchRenderType||1,Z$i.ConchRenderType|=Z$i.conch?4:0,Z$e.isConchNode=5==(5&Z$i.ConchRenderType),Z$e.isConchApp=4==(4&Z$i.ConchRenderType),Z$e.isConchWebGL=6==Z$i.ConchRenderType},Z$e}(),Z$K=function(){function Z$i(Z$a,Z$b,Z$c){this.x=0,this.y=0,this._drawTexture=function(Z$a,Z$b,Z$c){Z$c[0].loaded&&this.ctx.drawTexture(Z$c[0],Z$c[1],Z$c[2],Z$c[3],Z$c[4],Z$a,Z$b)},this._fillTexture=function(Z$a,Z$b,Z$c){Z$c[0].loaded&&this.ctx.fillTexture(Z$c[0],Z$c[1]+Z$a,Z$c[2]+Z$b,Z$c[3],Z$c[4],Z$c[5],Z$c[6],Z$c[7])},this._drawTextureWithTransform=function(Z$a,Z$b,Z$c){Z$c[0].loaded&&this.ctx.drawTextureWithTransform(Z$c[0],Z$c[1],Z$c[2],Z$c[3],Z$c[4],Z$c[5],Z$a,Z$b,Z$c[6])},this._fillQuadrangle=function(Z$a,Z$b,Z$c){this.ctx.fillQuadrangle(Z$c[0],Z$c[1],Z$c[2],Z$c[3],Z$c[4])},this._drawRect=function(Z$a,Z$b,Z$c){var Z$d=this.ctx;null!=Z$c[4]&&(Z$d.fillStyle=Z$c[4],Z$d.fillRect(Z$a+Z$c[0],Z$b+Z$c[1],Z$c[2],Z$c[3],null)),null!=Z$c[5]&&(Z$d.strokeStyle=Z$c[5],Z$d.lineWidth=Z$c[6],Z$d.strokeRect(Z$a+Z$c[0],Z$b+Z$c[1],Z$c[2],Z$c[3],Z$c[6]))},this._drawPie=function(Z$a,Z$b,Z$c){var Z$d=this.ctx;Z$J.isWebGL&&Z$d.setPathId(Z$c[8]),Z$d.beginPath(),Z$J.isWebGL?(Z$d.movePath(Z$c[0]+Z$a,Z$c[1]+Z$b),Z$d.moveTo(0,0)):Z$d.moveTo(Z$a+Z$c[0],Z$b+Z$c[1]),Z$d.arc(Z$a+Z$c[0],Z$b+Z$c[1],Z$c[2],Z$c[3],Z$c[4]),Z$d.closePath(),this._fillAndStroke(Z$c[5],Z$c[6],Z$c[7],!0)},this._clipRect=function(Z$a,Z$b,Z$c){this.ctx.clipRect(Z$a+Z$c[0],Z$b+Z$c[1],Z$c[2],Z$c[3])},this._fillRect=function(Z$a,Z$b,Z$c){this.ctx.fillRect(Z$a+Z$c[0],Z$b+Z$c[1],Z$c[2],Z$c[3],Z$c[4])},this._drawCircle=function(Z$a,Z$b,Z$c){var Z$d=this.ctx;Z$J.isWebGL&&Z$d.setPathId(Z$c[6]),Z$X.drawCall++,Z$d.beginPath(),Z$J.isWebGL&&Z$d.movePath(Z$c[0]+Z$a,Z$c[1]+Z$b),Z$d.arc(Z$c[0]+Z$a,Z$c[1]+Z$b,Z$c[2],0,Z$i.PI2),Z$d.closePath(),this._fillAndStroke(Z$c[3],Z$c[4],Z$c[5],!0)},this._fillCircle=function(Z$a,Z$b,Z$c){Z$X.drawCall++;var Z$d=this.ctx;Z$d.beginPath(),Z$d.fillStyle=Z$c[3],Z$d.arc(Z$c[0]+Z$a,Z$c[1]+Z$b,Z$c[2],0,Z$i.PI2),Z$d.fill()},this._setShader=function(Z$a,Z$b,Z$c){this.ctx.setShader(Z$c[0])},this._drawLine=function(Z$a,Z$b,Z$c){var Z$d=this.ctx;Z$J.isWebGL&&Z$d.setPathId(Z$c[6]),Z$d.beginPath(),Z$d.strokeStyle=Z$c[4],Z$d.lineWidth=Z$c[5],Z$J.isWebGL?(Z$d.movePath(Z$a,Z$b),Z$d.moveTo(Z$c[0],Z$c[1]),Z$d.lineTo(Z$c[2],Z$c[3])):(Z$d.moveTo(Z$a+Z$c[0],Z$b+Z$c[1]),Z$d.lineTo(Z$a+Z$c[2],Z$b+Z$c[3])),Z$d.stroke()},this._drawLines=function(Z$a,Z$b,Z$c){var Z$d=this.ctx;Z$J.isWebGL&&Z$d.setPathId(Z$c[5]),Z$d.beginPath(),Z$a+=Z$c[0],Z$b+=Z$c[1],Z$J.isWebGL&&Z$d.movePath(Z$a,Z$b),Z$d.strokeStyle=Z$c[3],Z$d.lineWidth=Z$c[4];var Z$e=Z$c[2],Z$f=2,Z$i=Z$e.length;if(Z$J.isWebGL)for(Z$d.moveTo(Z$e[0],Z$e[1]);Z$f<Z$i;)Z$d.lineTo(Z$e[Z$f++],Z$e[Z$f++]);else for(Z$d.moveTo(Z$a+Z$e[0],Z$b+Z$e[1]);Z$f<Z$i;)Z$d.lineTo(Z$a+Z$e[Z$f++],Z$b+Z$e[Z$f++]);Z$d.stroke()},this._drawLinesWebGL=function(Z$a,Z$b,Z$c){this.ctx.drawLines(Z$a+this.x+Z$c[0],Z$b+this.y+Z$c[1],Z$c[2],Z$c[3],Z$c[4])},this._drawCurves=function(Z$a,Z$b,Z$c){this.ctx.drawCurves(Z$a,Z$b,Z$c)},this._draw=function(Z$a,Z$b,Z$c){Z$c[0].call(null,this,Z$a,Z$b)},this._transformByMatrix=function(Z$a,Z$b,Z$c){this.ctx.transformByMatrix(Z$c[0])},this._setTransform=function(Z$a,Z$b,Z$c){this.ctx.setTransform(Z$c[0],Z$c[1],Z$c[2],Z$c[3],Z$c[4],Z$c[5])},this._setTransformByMatrix=function(Z$a,Z$b,Z$c){this.ctx.setTransformByMatrix(Z$c[0])},this._save=function(Z$a,Z$b,Z$c){this.ctx.save()},this._restore=function(Z$a,Z$b,Z$c){this.ctx.restore()},this._translate=function(Z$a,Z$b,Z$c){this.ctx.translate(Z$c[0],Z$c[1])},this._transform=function(Z$a,Z$b,Z$c){this.ctx.translate(Z$c[1]+Z$a,Z$c[2]+Z$b);var Z$d=Z$c[0];this.ctx.transform(Z$d.a,Z$d.b,Z$d.c,Z$d.d,Z$d.tx,Z$d.ty),this.ctx.translate(-Z$a-Z$c[1],-Z$b-Z$c[2])},this._rotate=function(Z$a,Z$b,Z$c){this.ctx.translate(Z$c[1]+Z$a,Z$c[2]+Z$b),this.ctx.rotate(Z$c[0]),this.ctx.translate(-Z$a-Z$c[1],-Z$b-Z$c[2])},this._scale=function(Z$a,Z$b,Z$c){this.ctx.translate(Z$c[2]+Z$a,Z$c[3]+Z$b),this.ctx.scale(Z$c[0],Z$c[1]),this.ctx.translate(-Z$a-Z$c[2],-Z$b-Z$c[3])},this._alpha=function(Z$a,Z$b,Z$c){this.ctx.globalAlpha*=Z$c[0]},this._setAlpha=function(Z$a,Z$b,Z$c){this.ctx.globalAlpha=Z$c[0]},this._fillText=function(Z$a,Z$b,Z$c){this.ctx.fillText(Z$c[0],Z$c[1]+Z$a,Z$c[2]+Z$b,Z$c[3],Z$c[4],Z$c[5])},this._strokeText=function(Z$a,Z$b,Z$c){this.ctx.strokeText(Z$c[0],Z$c[1]+Z$a,Z$c[2]+Z$b,Z$c[3],Z$c[4],Z$c[5],Z$c[6])},this._fillBorderText=function(Z$a,Z$b,Z$c){this.ctx.fillBorderText(Z$c[0],Z$c[1]+Z$a,Z$c[2]+Z$b,Z$c[3],Z$c[4],Z$c[5],Z$c[6],Z$c[7])},this._blendMode=function(Z$a,Z$b,Z$c){this.ctx.globalCompositeOperation=Z$c[0]},this._beginClip=function(Z$a,Z$b,Z$c){this.ctx.beginClip&&this.ctx.beginClip(Z$a+Z$c[0],Z$b+Z$c[1],Z$c[2],Z$c[3])},this._setIBVB=function(Z$a,Z$b,Z$c){this.ctx.setIBVB(Z$c[0]+Z$a,Z$c[1]+Z$b,Z$c[2],Z$c[3],Z$c[4],Z$c[5],Z$c[6],Z$c[7])},this._fillTrangles=function(Z$a,Z$b,Z$c){this.ctx.fillTrangles(Z$c[0],Z$c[1]+Z$a,Z$c[2]+Z$b,Z$c[3],Z$c[4])},this._drawPath=function(Z$a,Z$b,Z$c){var Z$d=this.ctx;Z$J.isWebGL&&Z$d.setPathId(-1),Z$d.beginPath(),Z$a+=Z$c[0],Z$b+=Z$c[1],Z$J.isWebGL&&Z$d.movePath(Z$a,Z$b);for(var Z$e=Z$c[2],Z$f=0,Z$i=Z$e.length;Z$f<Z$i;Z$f++){var Z$j=Z$e[Z$f];switch(Z$j[0]){case"moveTo":Z$J.isWebGL?Z$d.moveTo(Z$j[1],Z$j[2]):Z$d.moveTo(Z$a+Z$j[1],Z$b+Z$j[2]);break;case"lineTo":Z$J.isWebGL?Z$d.lineTo(Z$j[1],Z$j[2]):Z$d.lineTo(Z$a+Z$j[1],Z$b+Z$j[2]);break;case"arcTo":Z$J.isWebGL?Z$d.arcTo(Z$j[1],Z$j[2],Z$j[3],Z$j[4],Z$j[5]):Z$d.arcTo(Z$a+Z$j[1],Z$b+Z$j[2],Z$a+Z$j[3],Z$b+Z$j[4],Z$j[5]);break;case"closePath":Z$d.closePath()}}var Z$k=Z$c[3];null!=Z$k&&(Z$d.fillStyle=Z$k.fillStyle,Z$d.fill());var Z$l=Z$c[4];null!=Z$l&&(Z$d.strokeStyle=Z$l.strokeStyle,Z$d.lineWidth=Z$l.lineWidth||1,Z$d.lineJoin=Z$l.lineJoin,Z$d.lineCap=Z$l.lineCap,Z$d.miterLimit=Z$l.miterLimit,Z$d.stroke())},this.drawPoly=function(Z$a,Z$b,Z$c){this.ctx.drawPoly(Z$a+this.x+Z$c[0],Z$b+this.y+Z$c[1],Z$c[2],Z$c[3],Z$c[4],Z$c[5],Z$c[6])},this._drawPoly=function(Z$a,Z$b,Z$c){var Z$d=this.ctx,Z$e=Z$c[2],Z$f=2,Z$i=Z$e.length;if(Z$J.isWebGL)for(Z$d.setPathId(Z$c[6]),Z$d.beginPath(),Z$a+=Z$c[0],Z$b+=Z$c[1],Z$d.movePath(Z$a,Z$b),Z$d.moveTo(Z$e[0],Z$e[1]);Z$f<Z$i;)Z$d.lineTo(Z$e[Z$f++],Z$e[Z$f++]);else for(Z$d.beginPath(),Z$a+=Z$c[0],Z$b+=Z$c[1],Z$d.moveTo(Z$a+Z$e[0],Z$b+Z$e[1]);Z$f<Z$i;)Z$d.lineTo(Z$a+Z$e[Z$f++],Z$b+Z$e[Z$f++]);Z$d.closePath(),this._fillAndStroke(Z$c[3],Z$c[4],Z$c[5],Z$c[7])},this._drawSkin=function(Z$a,Z$b,Z$c){var Z$d=Z$c[0];if(Z$d){var Z$e=this.ctx;Z$d.render(Z$e,Z$a,Z$b)}},this._drawParticle=function(Z$a,Z$b,Z$c){this.ctx.drawParticle(Z$a+this.x,Z$b+this.y,Z$c[0])},this._setFilters=function(Z$a,Z$b,Z$c){this.ctx.setFilters(Z$c)},Z$c?this.ctx=Z$c.getContext("2d"):(Z$c=Z$va.create("3D"),this.ctx=Z$F.createWebGLContext2D(Z$c),Z$c._setContext(this.ctx)),Z$c.size(Z$a,Z$b),this.canvas=Z$c}Z$m(Z$i,"laya.renders.RenderContext");var Z$a=Z$i.prototype;return Z$a.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},Z$a.drawTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$a.loaded&&this.ctx.drawTexture(Z$a,Z$b,Z$c,Z$d,Z$e,this.x,this.y)},Z$a._drawTextures=function(Z$a,Z$b,Z$c){Z$c[0].loaded&&this.ctx.drawTextures(Z$c[0],Z$c[1],Z$a+this.x,Z$b+this.y)},Z$a.drawTextureWithTransform=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){Z$a.loaded&&this.ctx.drawTextureWithTransform(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,this.x,this.y,Z$i)},Z$a.fillQuadrangle=function(Z$a,Z$b,Z$c,Z$d,Z$e){this.ctx.fillQuadrangle(Z$a,Z$b,Z$c,Z$d,Z$e)},Z$a.drawCanvas=function(Z$a,Z$b,Z$c,Z$d,Z$e){this.ctx.drawCanvas(Z$a,Z$b+this.x,Z$c+this.y,Z$d,Z$e)},Z$a.drawRect=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$f&&(Z$f=1);var Z$i=this.ctx;Z$i.strokeStyle=Z$e,Z$i.lineWidth=Z$f,Z$i.strokeRect(Z$a+this.x,Z$b+this.y,Z$c,Z$d,Z$f)},Z$a._fillAndStroke=function(Z$a,Z$b,Z$c,Z$d){void 0===Z$d&&(Z$d=!1);var Z$e=this.ctx;null!=Z$a&&(Z$e.fillStyle=Z$a,Z$J.isWebGL?Z$e.fill(Z$d):Z$e.fill()),null!=Z$b&&0<Z$c&&(Z$e.strokeStyle=Z$b,Z$e.lineWidth=Z$c,Z$e.stroke())},Z$a.clipRect=function(Z$a,Z$b,Z$c,Z$d){this.ctx.clipRect(Z$a+this.x,Z$b+this.y,Z$c,Z$d)},Z$a.fillRect=function(Z$a,Z$b,Z$c,Z$d,Z$e){this.ctx.fillRect(Z$a+this.x,Z$b+this.y,Z$c,Z$d,Z$e)},Z$a.drawCircle=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$e&&(Z$e=1),Z$X.drawCall++;var Z$f=this.ctx;Z$f.beginPath(),Z$f.strokeStyle=Z$d,Z$f.lineWidth=Z$e,Z$f.arc(Z$a+this.x,Z$b+this.y,Z$c,0,Z$i.PI2),Z$f.stroke()},Z$a.drawTriangles=function(Z$a,Z$b,Z$c){if(Z$J.isWebGL)this.ctx.drawTriangles(Z$c[0],Z$a+Z$c[1],Z$b+Z$c[2],Z$c[3],Z$c[4],Z$c[5],Z$c[6],Z$c[7],Z$c[8],Z$c[9]);else{var Z$d=Z$c[5],Z$e=0,Z$f=Z$d.length,Z$i=this.ctx;for(Z$e=0;Z$e<Z$f;Z$e+=3){var Z$j=2*Z$d[Z$e],Z$k=2*Z$d[Z$e+1],Z$l=2*Z$d[Z$e+2];Z$i.drawTriangle(Z$c[0],Z$c[3],Z$c[4],Z$j,Z$k,Z$l,Z$c[6],!0)}}},Z$a.fillCircle=function(Z$a,Z$b,Z$c,Z$d){Z$X.drawCall++;var Z$e=this.ctx;Z$e.beginPath(),Z$e.fillStyle=Z$d,Z$e.arc(Z$a+this.x,Z$b+this.y,Z$c,0,Z$i.PI2),Z$e.fill()},Z$a.setShader=function(Z$a){this.ctx.setShader(Z$a)},Z$a.drawLine=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$f&&(Z$f=1);var Z$i=this.ctx;Z$i.beginPath(),Z$i.strokeStyle=Z$e,Z$i.lineWidth=Z$f,Z$i.moveTo(this.x+Z$a,this.y+Z$b),Z$i.lineTo(this.x+Z$c,this.y+Z$d),Z$i.stroke()},Z$a.clear=function(){this.ctx.clear()},Z$a.transformByMatrix=function(Z$a){this.ctx.transformByMatrix(Z$a)},Z$a.setTransform=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this.ctx.setTransform(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f)},Z$a.setTransformByMatrix=function(Z$a){this.ctx.setTransformByMatrix(Z$a)},Z$a.save=function(){this.ctx.save()},Z$a.restore=function(){this.ctx.restore()},Z$a.translate=function(Z$a,Z$b){this.ctx.translate(Z$a,Z$b)},Z$a.transform=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this.ctx.transform(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f)},Z$a.rotate=function(Z$a){this.ctx.rotate(Z$a)},Z$a.scale=function(Z$a,Z$b){this.ctx.scale(Z$a,Z$b)},Z$a.alpha=function(Z$a){this.ctx.globalAlpha*=Z$a},Z$a.setAlpha=function(Z$a){this.ctx.globalAlpha=Z$a},Z$a.fillWords=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$f&&(Z$f=0),this.ctx.fillWords(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f)},Z$a.fillBorderWords=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this.ctx.fillBorderWords(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i)},Z$a.fillText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this.ctx.fillText(Z$a,Z$b+this.x,Z$c+this.y,Z$d,Z$e,Z$f)},Z$a.strokeText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this.ctx.strokeText(Z$a,Z$b+this.x,Z$c+this.y,Z$d,Z$e,Z$f,Z$i)},Z$a.blendMode=function(Z$a){this.ctx.globalCompositeOperation=Z$a},Z$a.flush=function(){this.ctx.flush&&this.ctx.flush()},Z$a.addRenderObject=function(Z$a){this.ctx.addRenderObject(Z$a)},Z$a.beginClip=function(Z$a,Z$b,Z$c,Z$d){this.ctx.beginClip&&this.ctx.beginClip(Z$a,Z$b,Z$c,Z$d)},Z$a.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},Z$a.fillTrangles=function(Z$a,Z$b,Z$c){this.ctx.fillTrangles(Z$c[0],Z$c[1],Z$c[2],Z$c[3],4<Z$c.length?Z$c[4]:null)},Z$i.PI2=2*Math.PI,Z$i}(),Z$L=function(){function Z$i(Z$a,Z$b){switch(this._next=Z$b||Z$i.NORENDER,Z$a){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=Z$t._filter);case 69905:return void(this._fun=Z$i._initRenderFun)}this.onCreate(Z$a)}Z$m(Z$i,"laya.renders.RenderSprite");var Z$a=Z$i.prototype;return Z$a.onCreate=function(Z$a){},Z$a._style=function(Z$a,Z$b,Z$c,Z$d){Z$a._style.render(Z$a,Z$b,Z$c,Z$d);var Z$e=this._next;Z$e._fun.call(Z$e,Z$a,Z$b,Z$c,Z$d)},Z$a._no=function(Z$a,Z$b,Z$c,Z$d){},Z$a._custom=function(Z$a,Z$b,Z$c,Z$d){Z$a.customRender(Z$b,Z$c,Z$d);var Z$e=Z$a._style._tf;this._next._fun.call(this._next,Z$a,Z$b,Z$c-Z$e.translateX,Z$d-Z$e.translateY)},Z$a._clip=function(Z$a,Z$b,Z$c,Z$d){var Z$e=this._next;if(Z$e!=Z$i.NORENDER){var Z$f=Z$a._style.scrollRect;Z$b.ctx.save(),Z$b.ctx.clipRect(Z$c,Z$d,Z$f.width,Z$f.height),Z$e._fun.call(Z$e,Z$a,Z$b,Z$c-Z$f.x,Z$d-Z$f.y),Z$b.ctx.restore()}},Z$a._blend=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a._style;Z$e.blendMode&&(Z$b.ctx.globalCompositeOperation=Z$e.blendMode);var Z$f=this._next;Z$f._fun.call(Z$f,Z$a,Z$b,Z$c,Z$d),Z$b.ctx.globalCompositeOperation="source-over"},Z$a._mask=function(Z$a,Z$b,Z$c,Z$d){var Z$e=this._next;Z$e._fun.call(Z$e,Z$a,Z$b,Z$c,Z$d);var Z$f=Z$a.mask;Z$f&&(Z$b.ctx.globalCompositeOperation="destination-in",(0<Z$f.numChildren||!Z$f.graphics._isOnlyOne())&&(Z$f.cacheAsBitmap=!0),Z$f.render(Z$b,Z$c-Z$a.pivotX,Z$d-Z$a.pivotY)),Z$b.ctx.globalCompositeOperation="source-over"},Z$a._graphics=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a._style._tf;Z$a._graphics&&Z$a._graphics._render(Z$a,Z$b,Z$c-Z$e.translateX,Z$d-Z$e.translateY);var Z$f=this._next;Z$f._fun.call(Z$f,Z$a,Z$b,Z$c,Z$d)},Z$a._image=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a._style;Z$b.ctx.drawTexture2(Z$c,Z$d,Z$e._tf.translateX,Z$e._tf.translateY,Z$a.transform,Z$e.alpha,Z$e.blendMode,Z$a._graphics._one)},Z$a._image2=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a._style._tf;Z$b.ctx.drawTexture2(Z$c,Z$d,Z$e.translateX,Z$e.translateY,Z$a.transform,1,null,Z$a._graphics._one)},Z$a._alpha=function(Z$a,Z$b,Z$c,Z$d){var Z$e;if(.01<(Z$e=Z$a._style.alpha)||Z$a._needRepaint()){var Z$f=Z$b.ctx.globalAlpha;Z$b.ctx.globalAlpha*=Z$e;var Z$i=this._next;Z$i._fun.call(Z$i,Z$a,Z$b,Z$c,Z$d),Z$b.ctx.globalAlpha=Z$f}},Z$a._transform=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.transform,Z$f=this._next;Z$e&&Z$f!=Z$i.NORENDER?(Z$b.save(),Z$b.transform(Z$e.a,Z$e.b,Z$e.c,Z$e.d,Z$e.tx+Z$c,Z$e.ty+Z$d),Z$f._fun.call(Z$f,Z$a,Z$b,0,0),Z$b.restore()):Z$f._fun.call(Z$f,Z$a,Z$b,Z$c,Z$d)},Z$a._childs=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a._style,Z$f=Z$e._tf;if(Z$c=Z$c-Z$f.translateX+Z$e.paddingLeft,Z$d=Z$d-Z$f.translateY+Z$e.paddingTop,Z$e._calculation){var Z$i=Z$a._getWords();if(Z$i){var Z$j=Z$e;Z$j&&(Z$j.stroke?Z$b.fillBorderWords(Z$i,Z$c,Z$d,Z$j.font,Z$j.color,Z$j.strokeColor,Z$j.stroke):Z$b.fillWords(Z$i,Z$c,Z$d,Z$j.font,Z$j.color,"none"!=Z$j.textDecoration&&Z$j.underLine?1:0))}}var Z$k,Z$l=Z$a._childs,Z$m=Z$l.length;if(Z$a.viewport||Z$a.optimizeScrollRect&&Z$a._style.scrollRect){var Z$n=Z$a.viewport||Z$a._style.scrollRect,Z$o=Z$n.x,Z$p=Z$n.y,Z$q=Z$n.right,Z$r=Z$n.bottom,Z$s=NaN,Z$t=NaN;for(Z$u=0;Z$u<Z$m;++Z$u)(Z$k=Z$l[Z$u]).visible&&(Z$s=Z$k._x)<Z$q&&Z$s+Z$k.width>Z$o&&(Z$t=Z$k._y)<Z$r&&Z$t+Z$k.height>Z$p&&Z$k.render(Z$b,Z$c,Z$d)}else for(var Z$u=0;Z$u<Z$m;++Z$u)(Z$k=Z$l[Z$u])._style.visible&&Z$k.render(Z$b,Z$c,Z$d)},Z$a._canvas=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a._$P.cacheCanvas;if(Z$e){"bitmap"===Z$e.type?Z$X.canvasBitmap++:Z$X.canvasNormal++;var Z$f=Z$e.ctx;if(Z$a._needRepaint()||!Z$f)this._canvas_repaint(Z$a,Z$b,Z$c,Z$d);else{var Z$i=Z$e._cacheRec;Z$b.drawCanvas(Z$f.canvas,Z$c+Z$i.x,Z$d+Z$i.y,Z$i.width,Z$i.height)}}else this._next._fun.call(this._next,Z$a,Z$b,Z$c,Z$d)},Z$a._canvas_repaint=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a._$P.cacheCanvas,Z$f=this._next;if(Z$e){var Z$i,Z$j,Z$k,Z$l,Z$m=Z$e.ctx,Z$n=Z$a._needRepaint()||!Z$m,Z$o=Z$e.type;if("bitmap"===Z$o?Z$X.canvasBitmap++:Z$X.canvasNormal++,Z$n){var Z$p,Z$q;Z$e._cacheRec||(Z$e._cacheRec=new Z$B),Z$J.isWebGL&&"bitmap"!==Z$o?Z$e._cacheRec.setTo(-Z$a.pivotX,-Z$a.pivotY,1,1):((Z$l=Z$a.getSelfBounds()).x=Z$l.x-Z$a.pivotX,Z$l.y=Z$l.y-Z$a.pivotY,Z$l.x=Z$l.x-16,Z$l.y=Z$l.y-16,Z$l.width=Z$l.width+32,Z$l.height=Z$l.height+32,Z$l.x=Math.floor(Z$l.x+Z$c)-Z$c,Z$l.y=Math.floor(Z$l.y+Z$d)-Z$d,Z$l.width=Math.floor(Z$l.width),Z$l.height=Math.floor(Z$l.height),Z$e._cacheRec.copyFrom(Z$l)),Z$l=Z$e._cacheRec;var Z$r,Z$s=Z$J.isWebGL?1:Z$O.pixelRatio*Z$z.stage.clientScaleX,Z$t=Z$J.isWebGL?1:Z$O.pixelRatio*Z$z.stage.clientScaleY;if(!Z$J.isWebGL){var Z$u,Z$v=1,Z$w=1;for(Z$u=Z$a;Z$u&&Z$u!=Z$z.stage;)Z$v*=Z$u.scaleX,Z$w*=Z$u.scaleY,Z$u=Z$u.parent;Z$J.isWebGL?(Z$v<1&&(Z$s*=Z$v),Z$w<1&&(Z$t*=Z$w)):(1<Z$v&&(Z$s*=Z$v),1<Z$w&&(Z$t*=Z$w))}if(Z$a.scrollRect){var Z$x=Z$a.scrollRect;Z$l.x-=Z$x.x,Z$l.y-=Z$x.y}if(Z$p=Z$l.width*Z$s,Z$q=Z$l.height*Z$t,Z$j=Z$l.x,Z$k=Z$l.y,Z$J.isWebGL&&"bitmap"===Z$o&&(2048<Z$p||2048<Z$q))return console.warn("cache bitmap size larger than 2048,cache ignored"),Z$e.ctx&&(Z$W.recover("RenderContext",Z$e.ctx),Z$e.ctx.canvas.size(0,0),Z$e.ctx=null),void Z$f._fun.call(Z$f,Z$a,Z$b,Z$c,Z$d);if(Z$m||(Z$m=Z$e.ctx=Z$W.getItem("RenderContext")||new Z$K(Z$p,Z$q,Z$va.create("AUTO"))),Z$m.ctx.sprite=Z$a,(Z$i=Z$m.canvas).clear(),(Z$i.width!=Z$p||Z$i.height!=Z$q)&&Z$i.size(Z$p,Z$q),"bitmap"===Z$o?Z$i.context.asBitmap=!0:"normal"===Z$o&&(Z$i.context.asBitmap=!1),1!=Z$s||1!=Z$t){var Z$y=Z$m.ctx;Z$y.save(),Z$y.scale(Z$s,Z$t),!Z$J.isConchWebGL&&Z$J.isConchApp&&(Z$r=Z$a._$P.cf)&&Z$y.setFilterMatrix&&Z$y.setFilterMatrix(Z$r._mat,Z$r._alpha),Z$f._fun.call(Z$f,Z$a,Z$m,-Z$j,-Z$k),Z$y.restore(),Z$J.isConchApp&&!Z$J.isConchWebGL||Z$a._applyFilters()}else Z$y=Z$m.ctx,!Z$J.isConchWebGL&&Z$J.isConchApp&&(Z$r=Z$a._$P.cf)&&Z$y.setFilterMatrix&&Z$y.setFilterMatrix(Z$r._mat,Z$r._alpha),Z$f._fun.call(Z$f,Z$a,Z$m,-Z$j,-Z$k),Z$J.isConchApp&&!Z$J.isConchWebGL||Z$a._applyFilters();Z$a._$P.staticCache&&(Z$e.reCache=!1),Z$X.canvasReCache++}else Z$j=(Z$l=Z$e._cacheRec).x,Z$k=Z$l.y,Z$i=Z$m.canvas;Z$b.drawCanvas(Z$i,Z$c+Z$j,Z$d+Z$k,Z$l.width,Z$l.height)}else Z$f._fun.call(Z$f,Z$a,Z$m,Z$c,Z$d)},Z$i.__init__=function(){var Z$a,Z$b,Z$c=0;for(Z$b=Z$F.createRenderSprite(69905,null),Z$a=Z$i.renders.length=4096,Z$c=0;Z$c<Z$a;Z$c++)Z$i.renders[Z$c]=Z$b;Z$i.renders[0]=Z$F.createRenderSprite(0,null),function(Z$a,Z$b){for(var Z$c=0,Z$d=0;Z$d<Z$a.length;Z$d++)Z$c|=Z$a[Z$d],Z$i.renders[Z$c]=Z$b}([1,512,4,2],new Z$i(1,null)),Z$i.renders[513]=Z$F.createRenderSprite(513,null),Z$i.renders[517]=new Z$i(517,null)},Z$i._initRenderFun=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a._renderType;(Z$i.renders[Z$e]=Z$i._getTypeRender(Z$e))._fun(Z$a,Z$b,Z$c,Z$d)},Z$i._getTypeRender=function(Z$a){for(var Z$b=null,Z$c=2048;1<Z$c;)Z$c&Z$a&&(Z$b=Z$F.createRenderSprite(Z$c,Z$b)),Z$c>>=1;return Z$b},Z$i.IMAGE=1,Z$i.ALPHA=2,Z$i.TRANSFORM=4,Z$i.BLEND=8,Z$i.CANVAS=16,Z$i.FILTERS=32,Z$i.MASK=64,Z$i.CLIP=128,Z$i.STYLE=256,Z$i.GRAPHICS=512,Z$i.CUSTOM=1024,Z$i.CHILDS=2048,Z$i.INIT=69905,Z$i.renders=[],Z$i.NORENDER=new Z$i(0,null),Z$i}(),Z$M=function(){function Z$j(){this._repaint=!1}Z$m(Z$j,"laya.resource.Context");var Z$a=Z$j.prototype;return Z$a.replaceReset=function(){var Z$a,Z$b,Z$c=0;for(Z$a=Z$j.replaceKeys.length,Z$c=0;Z$c<Z$a;Z$c++)Z$b=Z$j.replaceKeys[Z$c],this[Z$j.newKeys[Z$c]]=this[Z$b]},Z$a.replaceResotre=function(){this.__restore(),this.__reset()},Z$a.setIsMainContext=function(){},Z$a.drawTextures=function(Z$a,Z$b,Z$c,Z$d){Z$X.drawCall+=Z$b.length/2;for(var Z$e=Z$a.width,Z$f=Z$a.height,Z$i=0,Z$j=Z$b.length;Z$i<Z$j;Z$i+=2)this.drawTexture(Z$a,Z$b[Z$i],Z$b[Z$i+1],Z$e,Z$f,Z$c,Z$d)},Z$a.drawCanvas=function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$X.drawCall++,this.drawImage(Z$a.source,Z$b,Z$c,Z$d,Z$e)},Z$a.fillRect=function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$X.drawCall++,Z$e&&(this.fillStyle=Z$e),this.__fillRect(Z$a,Z$b,Z$c,Z$d)},Z$a.fillText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){Z$X.drawCall++,3<arguments.length&&null!=Z$d&&(this.font=Z$d,this.fillStyle=Z$e,this.textAlign=Z$f,this.textBaseline="top"),this.__fillText(Z$a,Z$b,Z$c)},Z$a.fillBorderText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){Z$X.drawCall++,this.font=Z$d,this.fillStyle=Z$e,this.textBaseline="top",this.strokeStyle=Z$f,this.lineWidth=Z$i,this.textAlign=Z$j,this.__strokeText(Z$a,Z$b,Z$c),this.__fillText(Z$a,Z$b,Z$c)},Z$a.strokeText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){Z$X.drawCall++,3<arguments.length&&null!=Z$d&&(this.font=Z$d,this.strokeStyle=Z$e,this.lineWidth=Z$f,this.textAlign=Z$i,this.textBaseline="top"),this.__strokeText(Z$a,Z$b,Z$c)},Z$a.transformByMatrix=function(Z$a){this.transform(Z$a.a,Z$a.b,Z$a.c,Z$a.d,Z$a.tx,Z$a.ty)},Z$a.setTransformByMatrix=function(Z$a){this.setTransform(Z$a.a,Z$a.b,Z$a.c,Z$a.d,Z$a.tx,Z$a.ty)},Z$a.clipRect=function(Z$a,Z$b,Z$c,Z$d){Z$X.drawCall++,this.beginPath(),this.rect(Z$a,Z$b,Z$c,Z$d),this.clip()},Z$a.drawTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){Z$X.drawCall++;var Z$j=Z$a.uv,Z$k=Z$a.bitmap.width,Z$l=Z$a.bitmap.height;this.drawImage(Z$a.source,Z$j[0]*Z$k,Z$j[1]*Z$l,(Z$j[2]-Z$j[0])*Z$k,(Z$j[5]-Z$j[3])*Z$l,Z$b+Z$f,Z$c+Z$i,Z$d,Z$e)},Z$a.drawTextureWithTransform=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){Z$X.drawCall++;var Z$l=Z$a.uv,Z$m=Z$a.bitmap.width,Z$n=Z$a.bitmap.height;this.save(),1!=Z$k&&(this.globalAlpha*=Z$k),Z$f?(this.transform(Z$f.a,Z$f.b,Z$f.c,Z$f.d,Z$f.tx+Z$i,Z$f.ty+Z$j),this.drawImage(Z$a.source,Z$l[0]*Z$m,Z$l[1]*Z$n,(Z$l[2]-Z$l[0])*Z$m,(Z$l[5]-Z$l[3])*Z$n,Z$b,Z$c,Z$d,Z$e)):this.drawImage(Z$a.source,Z$l[0]*Z$m,Z$l[1]*Z$n,(Z$l[2]-Z$l[0])*Z$m,(Z$l[5]-Z$l[3])*Z$n,Z$b+Z$i,Z$c+Z$j,Z$d,Z$e),this.restore()},Z$a.drawTexture2=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){var Z$k=Z$j[0];if(Z$k.loaded&&Z$k.bitmap&&Z$k.source){Z$X.drawCall++;var Z$l=1!==Z$f;if(Z$l){var Z$m=this.globalAlpha;this.globalAlpha*=Z$f}var Z$n=Z$k.uv,Z$o=Z$k.bitmap.width,Z$p=Z$k.bitmap.height;Z$e?(this.save(),this.transform(Z$e.a,Z$e.b,Z$e.c,Z$e.d,Z$e.tx+Z$a,Z$e.ty+Z$b),this.drawImage(Z$k.source,Z$n[0]*Z$o,Z$n[1]*Z$p,(Z$n[2]-Z$n[0])*Z$o,(Z$n[5]-Z$n[3])*Z$p,Z$j[1]-Z$c,Z$j[2]-Z$d,Z$j[3],Z$j[4]),this.restore()):this.drawImage(Z$k.source,Z$n[0]*Z$o,Z$n[1]*Z$p,(Z$n[2]-Z$n[0])*Z$o,(Z$n[5]-Z$n[3])*Z$p,Z$j[1]-Z$c+Z$a,Z$j[2]-Z$d+Z$b,Z$j[3],Z$j[4]),Z$l&&(this.globalAlpha=Z$m)}},Z$a.fillTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){if(!Z$j.pat){if(Z$a.uv!=Z$ma.DEF_UV){var Z$k=new Z$va("2D");Z$k.getContext("2d"),Z$k.size(Z$a.width,Z$a.height),Z$k.context.drawTexture(Z$a,0,0,Z$a.width,Z$a.height,0,0),Z$a=new Z$ma(Z$k)}Z$j.pat=this.createPattern(Z$a.bitmap.source,Z$f)}var Z$l=Z$b,Z$m=Z$c,Z$n=0,Z$o=0;Z$i&&(Z$l+=Z$i.x%Z$a.width,Z$m+=Z$i.y%Z$a.height,Z$n-=Z$i.x%Z$a.width,Z$o-=Z$i.y%Z$a.height),this.translate(Z$l,Z$m),this.fillRect(Z$n,Z$o,Z$d,Z$e,Z$j.pat),this.translate(-Z$l,-Z$m)},Z$a.drawTriangle=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){var Z$k=Z$a.bitmap,Z$l=Z$k.source,Z$m=Z$a.width,Z$n=Z$a.height,Z$o=Z$k.width,Z$p=Z$k.height,Z$q=Z$c[Z$d]*Z$o,Z$r=Z$c[Z$e]*Z$o,Z$s=Z$c[Z$f]*Z$o,Z$t=Z$c[Z$d+1]*Z$p,Z$u=Z$c[Z$e+1]*Z$p,Z$v=Z$c[Z$f+1]*Z$p,Z$w=Z$b[Z$d],Z$x=Z$b[Z$e],Z$y=Z$b[Z$f],Z$z=Z$b[Z$d+1],Z$A=Z$b[Z$e+1],Z$B=Z$b[Z$f+1];if(Z$j){var Z$C=(Z$w+Z$x+Z$y)/3,Z$D=(Z$z+Z$A+Z$B)/3,Z$E=Z$w-Z$C,Z$F=Z$z-Z$D,Z$G=Math.sqrt(Z$E*Z$E+Z$F*Z$F);Z$w=Z$C+Z$E/Z$G*(Z$G+1),Z$z=Z$D+Z$F/Z$G*(Z$G+1),Z$F=Z$A-Z$D,Z$x=Z$C+(Z$E=Z$x-Z$C)/(Z$G=Math.sqrt(Z$E*Z$E+Z$F*Z$F))*(Z$G+1),Z$A=Z$D+Z$F/Z$G*(Z$G+1),Z$F=Z$B-Z$D,Z$y=Z$C+(Z$E=Z$y-Z$C)/(Z$G=Math.sqrt(Z$E*Z$E+Z$F*Z$F))*(Z$G+1),Z$B=Z$D+Z$F/Z$G*(Z$G+1)}this.save(),Z$i&&this.transform(Z$i.a,Z$i.b,Z$i.c,Z$i.d,Z$i.tx,Z$i.ty),this.beginPath(),this.moveTo(Z$w,Z$z),this.lineTo(Z$x,Z$A),this.lineTo(Z$y,Z$B),this.closePath(),this.clip();var Z$H=1/(Z$q*Z$u+Z$t*Z$s+Z$r*Z$v-Z$u*Z$s-Z$t*Z$r-Z$q*Z$v),Z$I=Z$w*Z$u+Z$t*Z$y+Z$x*Z$v-Z$u*Z$y-Z$t*Z$x-Z$w*Z$v,Z$J=Z$q*Z$x+Z$w*Z$s+Z$r*Z$y-Z$x*Z$s-Z$w*Z$r-Z$q*Z$y,Z$K=Z$q*Z$u*Z$y+Z$t*Z$x*Z$s+Z$w*Z$r*Z$v-Z$w*Z$u*Z$s-Z$t*Z$r*Z$y-Z$q*Z$x*Z$v,Z$L=Z$z*Z$u+Z$t*Z$B+Z$A*Z$v-Z$u*Z$B-Z$t*Z$A-Z$z*Z$v,Z$M=Z$q*Z$A+Z$z*Z$s+Z$r*Z$B-Z$A*Z$s-Z$z*Z$r-Z$q*Z$B,Z$N=Z$q*Z$u*Z$B+Z$t*Z$A*Z$s+Z$z*Z$r*Z$v-Z$z*Z$u*Z$s-Z$t*Z$r*Z$B-Z$q*Z$A*Z$v;this.transform(Z$I*Z$H,Z$L*Z$H,Z$J*Z$H,Z$M*Z$H,Z$K*Z$H,Z$N*Z$H),this.drawImage(Z$l,Z$a.uv[0]*Z$o,Z$a.uv[1]*Z$p,Z$m,Z$n,Z$a.uv[0]*Z$o,Z$a.uv[1]*Z$p,Z$m,Z$n),this.restore()},Z$a.flush=function(){return 0},Z$a.fillWords=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){Z$d&&(this.font=Z$d),Z$e&&(this.fillStyle=Z$e);this.textBaseline="top",this.textAlign="left";for(var Z$i=0,Z$j=Z$a.length;Z$i<Z$j;Z$i++){var Z$k=Z$a[Z$i];if(this.__fillText(Z$k.char,Z$k.x+Z$b,Z$k.y+Z$c),1===Z$f){var Z$l=Z$k.height,Z$m=.5*Z$k.style.letterSpacing;Z$m||(Z$m=0),this.beginPath(),this.strokeStyle=Z$e,this.lineWidth=1,this.moveTo(Z$b+Z$k.x-Z$m+.5,Z$c+Z$k.y+Z$l+.5),this.lineTo(Z$b+Z$k.x+Z$k.width+Z$m+.5,Z$c+Z$k.y+Z$l+.5),this.stroke()}}},Z$a.fillBorderWords=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){Z$d&&(this.font=Z$d),Z$e&&(this.fillStyle=Z$e),this.textBaseline="top",this.lineWidth=Z$i,this.textAlign="left",this.strokeStyle=Z$f;for(var Z$j=0,Z$k=Z$a.length;Z$j<Z$k;Z$j++){var Z$l=Z$a[Z$j];this.__strokeText(Z$l.char,Z$l.x+Z$b,Z$l.y+Z$c),this.__fillText(Z$l.char,Z$l.x+Z$b,Z$l.y+Z$c)}},Z$a.destroy=function(){this.canvas.width=this.canvas.height=0},Z$a.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},Z$a.drawCurves=function(Z$a,Z$b,Z$c){this.beginPath(),this.strokeStyle=Z$c[3],this.lineWidth=Z$c[4];var Z$d=Z$c[2];Z$a+=Z$c[0],Z$b+=Z$c[1],this.moveTo(Z$a+Z$d[0],Z$b+Z$d[1]);for(var Z$e=2,Z$f=Z$d.length;Z$e<Z$f;)this.quadraticCurveTo(Z$a+Z$d[Z$e++],Z$b+Z$d[Z$e++],Z$a+Z$d[Z$e++],Z$b+Z$d[Z$e++]);this.stroke()},Z$j.__init__=function(Z$b){var Z$c=laya.resource.Context.prototype;if(!(Z$b=Z$b||CanvasRenderingContext2D.prototype).inited){Z$b.inited=!0,Z$b.__fillText=Z$b.fillText,Z$b.__fillRect=Z$b.fillRect,Z$b.__strokeText=Z$b.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(Z$a){Z$b[Z$a]=Z$c[Z$a]})}},Z$j.replaceCanvasGetSet=function(Z$a,Z$b){var Z$c=Object.getOwnPropertyDescriptor(Z$a,Z$b);if(!Z$c||!Z$c.configurable)return!1;var Z$d,Z$e={};for(Z$d in Z$c)"set"!=Z$d&&(Z$e[Z$d]=Z$c[Z$d]);var Z$f=Z$c.set;return Z$e.set=function(Z$a){Z$f.call(this,Z$a);var Z$b=this.getContext("2d");Z$b&&"__reset"in Z$b&&Z$b.__reset()},Object.defineProperty(Z$a,Z$b,Z$e),!0},Z$j.replaceGetSet=function(Z$a,Z$b){var Z$c=Object.getOwnPropertyDescriptor(Z$a,Z$b);if(!Z$c||!Z$c.configurable)return!1;var Z$d,Z$e={};for(Z$d in Z$c)"set"!=Z$d&&(Z$e[Z$d]=Z$c[Z$d]);var Z$f=Z$c.set,Z$i="___"+Z$b+"__";return Z$j.newKeys.push(Z$i),Z$e.set=function(Z$a){Z$a!=this[Z$i]&&(this[Z$i]=Z$a,Z$f.call(this,Z$a))},Object.defineProperty(Z$a,Z$b,Z$e),!0},Z$j._default=new Z$j,Z$j.newKeys=[],Z$k(Z$j,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),Z$j}(),Z$N=function(){function Z$f(Z$a){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++Z$f._uniqueIDCounter,this._name=Z$a||"Content Manager",Z$f._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,Z$f._resourceManagers.push(this),this._resources=[],this._records={}}Z$m(Z$f,"laya.resource.ResourceManager");var Z$a=Z$f.prototype;return Z$z.imps(Z$a,{"laya.resource.IDispose":!0}),Z$a.getResourceByIndex=function(Z$a){return this._resources[Z$a]},Z$a.getResourcesLength=function(){return this._resources.length},Z$a.addResource=function(Z$a){return Z$a.resourceManager&&Z$a.resourceManager.removeResource(Z$a),-1===this._resources.indexOf(Z$a)&&((Z$a._resourceManager=this)._resources.push(Z$a),this.addRecord(Z$a.uri,Z$a.__className,Z$a.memorySize),this.addSize(Z$a.memorySize),!0)},Z$a.removeResource=function(Z$a){var Z$b=this._resources.indexOf(Z$a);return-1!==Z$b&&(this._resources.splice(Z$b,1),Z$a._resourceManager=null,this._memorySize-=Z$a.memorySize,this.addRecord(Z$a.uri,Z$a.__className,-Z$a.memorySize),!0)},Z$a.unload=function(){for(var Z$a=this._resources.slice(0,this._resources.length),Z$b=0;Z$b<Z$a.length;Z$b++){Z$a[Z$b].destroy()}Z$a.length=0},Z$a.dispose=function(){if(this===Z$f._systemResourceManager)throw new Error("systemResourceManager不能被释放！");Z$f._resourceManagers.splice(Z$f._resourceManagers.indexOf(this),1),Z$f._isResourceManagersSorted=!1;for(var Z$a=this._resources.slice(0,this._resources.length),Z$b=0;Z$b<Z$a.length;Z$b++){var Z$c=Z$a[Z$b];Z$c.resourceManager.removeResource(Z$c),Z$c.destroy()}Z$a.length=0},Z$a.addSize=function(Z$a){Z$a&&(this.autoRelease&&0<Z$a&&this._memorySize+Z$a>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=Z$a)},Z$a.addRecord=function(Z$a,Z$b,Z$c){DEBUG&&Z$c&&!Z$a&&console.error(Z$a,Z$b,Z$c)},Z$a.garbageCollection=function(Z$a){var Z$b=this._resources;(Z$b=Z$b.slice()).sort(function(Z$a,Z$b){if(!Z$a||!Z$b)throw new Error("a或b不能为空！");return Z$a.released&&Z$b.released?0:Z$a.released?1:Z$b.released?-1:Z$a._lastUseFrameCount-Z$b._lastUseFrameCount});for(var Z$c=Z$X.loopCount,Z$d=0,Z$e=Z$b.length;Z$d<Z$e;Z$d++){var Z$f=Z$b[Z$d];if(!(1<Z$c-Z$f._lastUseFrameCount))return void(this._memorySize>=Z$a&&(this._isOverflow=!0));if(Z$f.releaseResource(),this._memorySize<Z$a)return void(this._isOverflow=!1)}},Z$q(0,Z$a,"id",function(){return this._id}),Z$q(0,Z$a,"name",function(){return this._name},function(Z$a){!Z$a&&""===Z$a||this._name===Z$a||(this._name=Z$a,Z$f._isResourceManagersSorted=!1)}),Z$q(0,Z$a,"memorySize",function(){return this._memorySize}),Z$q(0,Z$a,"records",function(){return this._records}),Z$q(1,Z$f,"systemResourceManager",function(){return Z$f._systemResourceManager}),Z$f.__init__=function(){Z$f.currentResourceManager=Z$f.systemResourceManager},Z$f.getLoadedResourceManagerByIndex=function(Z$a){return Z$f._resourceManagers[Z$a]},Z$f.getLoadedResourceManagersCount=function(){return Z$f._resourceManagers.length},Z$f.recreateContentManagers=function(Z$a){void 0===Z$a&&(Z$a=!1);for(var Z$b=Z$f.currentResourceManager,Z$c=0;Z$c<Z$f._resourceManagers.length;Z$c++){Z$f.currentResourceManager=Z$f._resourceManagers[Z$c];for(var Z$d=0;Z$d<Z$f.currentResourceManager._resources.length;Z$d++)Z$f.currentResourceManager._resources[Z$d].releaseResource(Z$a),Z$f.currentResourceManager._resources[Z$d].activeResource(Z$a)}Z$f.currentResourceManager=Z$b},Z$f.releaseContentManagers=function(Z$a){void 0===Z$a&&(Z$a=!1);for(var Z$b=Z$f.currentResourceManager,Z$c=0;Z$c<Z$f._resourceManagers.length;Z$c++){Z$f.currentResourceManager=Z$f._resourceManagers[Z$c];for(var Z$d=0;Z$d<Z$f.currentResourceManager._resources.length;Z$d++){var Z$e=Z$f.currentResourceManager._resources[Z$d];!Z$e.released&&Z$e.releaseResource(Z$a)}}Z$f.currentResourceManager=Z$b},Z$f._uniqueIDCounter=0,Z$f._isResourceManagersSorted=!1,Z$f._resourceManagers=[],Z$k(Z$f,["_systemResourceManager",function(){return this._systemResourceManager=new Z$f("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=Z$f._systemResourceManager}]),Z$f}(),Z$O=(function(){function Z$a(){}Z$m(Z$a,"laya.system.System"),Z$a.changeDefinition=function(Z$a,Z$b){Z$z[Z$a]=Z$b;var Z$c=Z$a+"=classObj";Z$z._runScript(Z$c)},Z$a.__init__=function(){Z$J.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function Z$c(){}return Z$m(Z$c,"laya.utils.Browser"),Z$q(1,Z$c,"pixelRatio",function(){return Z$c.__init__(),-1<Z$c.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:Z$F.getPixelRatio()}),Z$q(1,Z$c,"height",function(){return Z$c.__init__(),(Z$z.stage&&Z$z.stage.canvasRotation?Z$c.clientWidth:Z$c.clientHeight)*Z$c.pixelRatio}),Z$q(1,Z$c,"clientWidth",function(){return Z$c.__init__(),Z$c.window.innerWidth||Z$c.document.body.clientWidth}),Z$q(1,Z$c,"window",function(){return Z$c.__init__(),Z$c._window}),Z$q(1,Z$c,"clientHeight",function(){return Z$c.__init__(),Z$c.window.innerHeight||Z$c.document.body.clientHeight||Z$c.document.documentElement.clientHeight}),Z$q(1,Z$c,"width",function(){return Z$c.__init__(),(Z$z.stage&&Z$z.stage.canvasRotation?Z$c.clientHeight:Z$c.clientWidth)*Z$c.pixelRatio}),Z$q(1,Z$c,"container",function(){return Z$c.__init__(),Z$c._container||((Z$c._container=Z$c.createElement("div")).id="layaContainer",Z$c.document.body.appendChild(Z$c._container)),Z$c._container},function(Z$a){Z$c._container=Z$a}),Z$q(1,Z$c,"document",function(){return Z$c.__init__(),Z$c._document}),Z$c.__init__=function(){if(!Z$c._window){Z$c._window=Z$F.getWindow(),Z$c._document=Z$c.window.document,Z$c._window.addEventListener("message",function(Z$a){laya.utils.Browser._onMessage(Z$a)},!1),Z$c.document.__createElement=Z$c.document.createElement,Z$i.requestAnimationFrame=Z$i.requestAnimationFrame||Z$i.webkitRequestAnimationFrame||Z$i.mozRequestAnimationFrame||Z$i.oRequestAnimationFrame||Z$i.msRequestAnimationFrame||function(Z$a){return Z$i.setTimeout(Z$a,1e3/60)};var Z$a=Z$i.document.body.style;Z$a["-webkit-user-select"]="none",Z$a["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",Z$c.userAgent=Z$c.window.navigator.userAgent,Z$c.onIOS=!!(Z$c.u=Z$c.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),Z$c.onMobile=-1<Z$c.u.indexOf("Mobile"),Z$c.onIPhone=-1<Z$c.u.indexOf("iPhone"),Z$c.onMac=-1<Z$c.u.indexOf("Mac OS X"),Z$c.onIPad=-1<Z$c.u.indexOf("iPad"),Z$c.onAndroid=-1<Z$c.u.indexOf("Android")||-1<Z$c.u.indexOf("Adr"),Z$c.onWP=-1<Z$c.u.indexOf("Windows Phone"),Z$c.onQQBrowser=-1<Z$c.u.indexOf("QQBrowser"),Z$c.onMQQBrowser=-1<Z$c.u.indexOf("MQQBrowser")||-1<Z$c.u.indexOf("Mobile")&&-1<Z$c.u.indexOf("QQ"),Z$c.onIE=!!Z$c.window.ActiveXObject||"ActiveXObject"in Z$c.window,Z$c.onWeiXin=-1<Z$c.u.indexOf("MicroMessenger"),Z$c.onPC=!Z$c.onMobile,Z$c.onSafari=-1<Z$c.u.indexOf("Safari"),Z$c.onFirefox=-1<Z$c.u.indexOf("Firefox"),Z$c.onEdge=-1<Z$c.u.indexOf("Edge"),Z$c.onMiniGame=-1<Z$c.u.indexOf("MiniGame"),Z$c.onLimixiu=-1<Z$c.u.indexOf("limixiu"),Z$c.httpProtocol="http:"==Z$c.window.location.protocol,Z$c.onMiniGame&&null==Z$c.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),Z$c.webAudioEnabled=!!(Z$c.window.AudioContext||Z$c.window.webkitAudioContext||Z$c.window.mozAudioContext),Z$c.soundType=Z$c.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",Z$ea=Z$c.webAudioEnabled?Z$fa:Z$ca,Z$c.webAudioEnabled&&Z$fa.initWebAudio(),Z$ca._initMusicAudio(),Z$c.enableTouch="ontouchstart"in Z$i||Z$i.DocumentTouch&&Z$b instanceof DocumentTouch,Z$i.focus(),Z$E._soundClass=Z$ea,Z$E._musicClass=Z$ca,Z$J._mainCanvas=Z$J._mainCanvas||Z$va.create("2D"),Z$c.canvas||(Z$c.canvas=Z$va.create("2D"),Z$c.context=Z$c.canvas.getContext("2d"))}},Z$c._onMessage=function(Z$a){if(Z$a.data&&"size"==Z$a.data.name){if(Z$c.window.innerWidth=Z$a.data.width,Z$c.window.innerHeight=Z$a.data.height,Z$c.window.__innerHeight=Z$a.data.clientHeight,!Z$c.document.createEvent)return void console.warn("no document.createEvent");var Z$b=Z$c.document.createEvent("HTMLEvents");return Z$b.initEvent("resize",!1,!1),void Z$c.window.dispatchEvent(Z$b)}},Z$c.createElement=function(Z$a){return Z$c.__init__(),Z$c.document.__createElement(Z$a)},Z$c.getElementById=function(Z$a){return Z$c.__init__(),Z$c.document.getElementById(Z$a)},Z$c.removeElement=function(Z$a){Z$a&&Z$a.parentNode&&Z$a.parentNode.removeChild(Z$a)},Z$c.now=function(){return Z$F.now()},Z$c._window=null,Z$c._document=null,Z$c._container=null,Z$c.userAgent=null,Z$c.u=null,Z$c.onIOS=!1,Z$c.onMac=!1,Z$c.onMobile=!1,Z$c.onIPhone=!1,Z$c.onIPad=!1,Z$c.onAndroid=!1,Z$c.onWP=!1,Z$c.onQQBrowser=!1,Z$c.onMQQBrowser=!1,Z$c.onSafari=!1,Z$c.onFirefox=!1,Z$c.onEdge=!1,Z$c.onIE=!1,Z$c.onWeiXin=!1,Z$c.onMiniGame=!1,Z$c.onLimixiu=!1,Z$c.onPC=!1,Z$c.httpProtocol=!1,Z$c.webAudioEnabled=!1,Z$c.soundType=null,Z$c.enableTouch=!1,Z$c.canvas=null,Z$c.context=null,Z$c.__init$=function(){},Z$c}()),Z$P=function(){function Z$b(Z$a){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,Z$a?(this._u8d_=new Uint8Array(Z$a),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}Z$m(Z$b,"laya.utils.Byte");var Z$a=Z$b.prototype;return Z$a.___resizeBuffer=function(Z$b){try{var Z$a=new Uint8Array(Z$b);null!=this._u8d_&&(this._u8d_.length<=Z$b?Z$a.set(this._u8d_):Z$a.set(this._u8d_.subarray(0,Z$b))),this._u8d_=Z$a,this._d_=new DataView(Z$a.buffer)}catch(Z$a){throw"___resizeBuffer err:"+Z$b}},Z$a.getString=function(){return this.rUTF(this.getUint16())},Z$a.getFloat32Array=function(Z$a,Z$b){var Z$c=Z$a+Z$b;Z$c=Z$c>this._length?this._length:Z$c;var Z$d=new Float32Array(this._d_.buffer.slice(Z$a,Z$c));return this._pos_=Z$c,Z$d},Z$a.getUint8Array=function(Z$a,Z$b){var Z$c=Z$a+Z$b;Z$c=Z$c>this._length?this._length:Z$c;var Z$d=new Uint8Array(this._d_.buffer.slice(Z$a,Z$c));return this._pos_=Z$c,Z$d},Z$a.getInt16Array=function(Z$a,Z$b){var Z$c=Z$a+Z$b;Z$c=Z$c>this._length?this._length:Z$c;var Z$d=new Int16Array(this._d_.buffer.slice(Z$a,Z$c));return this._pos_=Z$c,Z$d},Z$a.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var Z$a=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,Z$a},Z$a.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var Z$a=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,Z$a},Z$a.writeFloat32=function(Z$a){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,Z$a,this._xd_),this._pos_+=4},Z$a.writeFloat64=function(Z$a){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,Z$a,this._xd_),this._pos_+=8},Z$a.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var Z$a=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,Z$a},Z$a.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var Z$a=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,Z$a},Z$a.writeInt32=function(Z$a){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,Z$a,this._xd_),this._pos_+=4},Z$a.writeUint32=function(Z$a){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,Z$a,this._xd_),this._pos_+=4},Z$a.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var Z$a=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,Z$a},Z$a.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var Z$a=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,Z$a},Z$a.writeUint16=function(Z$a){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,Z$a,this._xd_),this._pos_+=2},Z$a.writeInt16=function(Z$a){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,Z$a,this._xd_),this._pos_+=2},Z$a.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},Z$a.writeUint8=function(Z$a){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,Z$a),this._pos_++},Z$a._getUInt8=function(Z$a){return this._d_.getUint8(Z$a)},Z$a._getUint16=function(Z$a){return this._d_.getUint16(Z$a,this._xd_)},Z$a._getMatrix=function(){return new Z$G(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},Z$a.rUTF=function(Z$a){for(var Z$b=[],Z$c=this._pos_+Z$a,Z$d=0,Z$e=0,Z$f=0,Z$i=String.fromCharCode,Z$j=this._u8d_;this._pos_<Z$c;)(Z$d=Z$j[this._pos_++])<128?0!=Z$d&&Z$b.push(Z$i(Z$d)):Z$d<224?Z$b.push(Z$i((63&Z$d)<<6|127&Z$j[this._pos_++])):Z$d<240?(Z$e=Z$j[this._pos_++],Z$b.push(Z$i((31&Z$d)<<12|(127&Z$e)<<6|127&Z$j[this._pos_++]))):(Z$e=Z$j[this._pos_++],Z$f=Z$j[this._pos_++],Z$b.push(Z$i((15&Z$d)<<18|(127&Z$e)<<12|Z$f<<6&127|127&Z$j[this._pos_++]))),0;return Z$b.join("")},Z$a.getCustomString=function(Z$a){for(var Z$b=[],Z$c=0,Z$d=0,Z$e=0,Z$f=String.fromCharCode,Z$i=this._u8d_;0<Z$a;)if((Z$d=Z$i[this._pos_])<128)Z$b.push(Z$f(Z$d)),this._pos_++,Z$a--;else for(Z$c=Z$d-128,this._pos_++,Z$a-=Z$c;0<Z$c;)Z$d=Z$i[this._pos_++],Z$e=Z$i[this._pos_++],Z$b.push(Z$f(Z$e<<8|Z$d)),Z$c--;return Z$b.join("")},Z$a.clear=function(){this._pos_=0,this.length=0},Z$a.__getBuffer=function(){return this._d_.buffer},Z$a.writeUTFBytes=function(Z$a){for(var Z$b=0,Z$c=(Z$a+="").length;Z$b<Z$c;Z$b++){var Z$d=Z$a.charCodeAt(Z$b);Z$d<=127?this.writeByte(Z$d):Z$d<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|Z$d>>6,128|63&Z$d],this._pos_),this._pos_+=2):Z$d<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|Z$d>>12,128|Z$d>>6&63,128|63&Z$d],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|Z$d>>18,128|Z$d>>12&63,128|Z$d>>6&63,128|63&Z$d],this._pos_),this._pos_+=4)}},Z$a.writeUTFString=function(Z$a){var Z$b=this.pos;this.writeUint16(1),this.writeUTFBytes(Z$a);var Z$c=this.pos-Z$b-2;if(65536<=Z$c)throw"writeUTFString byte len more than 65536";this._d_.setUint16(Z$b,Z$c,this._xd_)},Z$a.readUTFString=function(){return this.readUTFBytes(this.getUint16())},Z$a.getUTFString=function(){return this.readUTFString()},Z$a.readUTFBytes=function(Z$a){if(void 0===Z$a&&(Z$a=-1),0==Z$a)return"";var Z$b=this.bytesAvailable;if(Z$b<Z$a)throw"readUTFBytes error - Out of bounds";return Z$a=0<Z$a?Z$a:Z$b,this.rUTF(Z$a)},Z$a.getUTFBytes=function(Z$a){return void 0===Z$a&&(Z$a=-1),this.readUTFBytes(Z$a)},Z$a.writeByte=function(Z$a){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,Z$a),this._pos_+=1},Z$a.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},Z$a.getByte=function(){return this.readByte()},Z$a.ensureWrite=function(Z$a){this._length<Z$a&&(this._length=Z$a),this._allocated_<Z$a&&(this.length=Z$a)},Z$a.writeArrayBuffer=function(Z$a,Z$b,Z$c){if(void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),Z$b<0||Z$c<0)throw"writeArrayBuffer error - Out of bounds";0==Z$c&&(Z$c=Z$a.byteLength-Z$b),this.ensureWrite(this._pos_+Z$c);var Z$d=new Uint8Array(Z$a);this._u8d_.set(Z$d.subarray(Z$b,Z$b+Z$c),this._pos_),this._pos_+=Z$c},Z$q(0,Z$a,"buffer",function(){var Z$a=this._d_.buffer;return Z$a.byteLength==this.length?Z$a:Z$a.slice(0,this.length)}),Z$q(0,Z$a,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(Z$a){this._xd_="littleEndian"==Z$a}),Z$q(0,Z$a,"length",function(){return this._length},function(Z$a){this._allocated_<Z$a?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(Z$a,2*this._allocated_))):this._allocated_>Z$a&&this.___resizeBuffer(this._allocated_=Z$a),this._length=Z$a}),Z$q(0,Z$a,"pos",function(){return this._pos_},function(Z$a){this._pos_=Z$a}),Z$q(0,Z$a,"bytesAvailable",function(){return this._length-this._pos_}),Z$b.getSystemEndian=function(){if(!Z$b._sysEndian){var Z$a=new ArrayBuffer(2);new DataView(Z$a).setInt16(0,256,!0),Z$b._sysEndian=256===new Int16Array(Z$a)[0]?"littleEndian":"bigEndian"}return Z$b._sysEndian},Z$b.BIG_ENDIAN="bigEndian",Z$b.LITTLE_ENDIAN="littleEndian",Z$b._sysEndian=null,Z$b}(),Z$Q=function(){function Z$e(){}return Z$m(Z$e,"laya.utils.CacheManager"),Z$e.regCacheByFunction=function(Z$a,Z$b){var Z$c;Z$e.unRegCacheByFunction(Z$a,Z$b),Z$c={tryDispose:Z$a,getCacheList:Z$b},Z$e._cacheList.push(Z$c)},Z$e.unRegCacheByFunction=function(Z$a,Z$b){var Z$c,Z$d=0;for(Z$c=Z$e._cacheList.length,Z$d=0;Z$d<Z$c;Z$d++)if(Z$e._cacheList[Z$d].tryDispose==Z$a&&Z$e._cacheList[Z$d].getCacheList==Z$b)return void Z$e._cacheList.splice(Z$d,1)},Z$e.forceDispose=function(){var Z$a=0,Z$b=Z$e._cacheList.length;for(Z$a=0;Z$a<Z$b;Z$a++)Z$e._cacheList[Z$a].tryDispose(!0)},Z$e.beginCheck=function(Z$a){void 0===Z$a&&(Z$a=15e3),Z$z.timer.loop(Z$a,null,Z$e._checkLoop)},Z$e.stopCheck=function(){Z$z.timer.clear(null,Z$e._checkLoop)},Z$e._checkLoop=function(){var Z$a=Z$e._cacheList;if(!(Z$a.length<1)){var Z$b,Z$c=Z$O.now(),Z$d=0;for(Z$b=Z$d=Z$a.length;0<Z$d&&(Z$a[Z$e._index=++Z$e._index%Z$b].tryDispose(!1),!(Z$O.now()-Z$c>Z$e.loopTimeLimit));)Z$d--}},Z$e.loopTimeLimit=2,Z$e._cacheList=[],Z$e._index=0,Z$e}(),Z$R=function(){function Z$p(){}return Z$m(Z$p,"laya.utils.ClassUtils"),Z$p.regClass=function(Z$a,Z$b){Z$p._classMap[Z$a]=Z$b},Z$p.getRegClass=function(Z$a){return Z$p._classMap[Z$a]},Z$p.getInstance=function(Z$a){var Z$b=Z$p.getClass(Z$a);return Z$b?new Z$b:(console.warn("[error] Undefined class:",Z$a),null)},Z$p.createByJson=function(Z$a,Z$b,Z$c,Z$d,Z$e){"string"==typeof Z$a&&(Z$a=JSON.parse(Z$a));var Z$f=Z$a.props;if(!Z$b&&!(Z$b=Z$e?Z$e.runWith(Z$a):Z$p.getInstance(Z$f.runtime||Z$a.type)))return null;var Z$i=Z$a.child;if(Z$i)for(var Z$j=0,Z$k=Z$i.length;Z$j<Z$k;Z$j++){var Z$l=Z$i[Z$j];if("render"!==Z$l.props.name&&"render"!==Z$l.props.renderType||!Z$b._$set_itemRender)if("Graphic"==Z$l.type)Z$p.addGraphicsToSprite(Z$l,Z$b);else if(Z$p.isDrawType(Z$l.type))Z$p.addGraphicToSprite(Z$l,Z$b,!0);else{var Z$m=Z$p.createByJson(Z$l,null,Z$c,Z$d,Z$e);"Script"==Z$l.type?Z$m.hasOwnProperty("owner")?Z$m.owner=Z$b:Z$m.hasOwnProperty("target")&&(Z$m.target=Z$b):"mask"==Z$l.props.renderType?Z$b.mask=Z$m:Z$b.addChild(Z$m)}else Z$b.itemRender=Z$l}if(Z$f)for(var Z$n in Z$f){var Z$o=Z$f[Z$n];"var"===Z$n&&Z$c?Z$c[Z$o]=Z$b:Z$o instanceof Array&&"function"==typeof Z$b[Z$n]?Z$b[Z$n].apply(Z$b,Z$o):Z$b[Z$n]=Z$o}return Z$d&&Z$a.customProps&&Z$d.runWith([Z$b,Z$a]),Z$b.created&&Z$b.created(),Z$b},Z$p.addGraphicsToSprite=function(Z$a,Z$b){var Z$c;if((Z$c=Z$a.child)&&!(Z$c.length<1)){var Z$d;Z$d=Z$p._getGraphicsFromSprite(Z$a,Z$b);var Z$e=0,Z$f=0;Z$a.props&&(Z$e=Z$p._getObjVar(Z$a.props,"x",0),Z$f=Z$p._getObjVar(Z$a.props,"y",0)),0!=Z$e&&0!=Z$f&&Z$d.translate(Z$e,Z$f);var Z$i,Z$j=0;for(Z$i=Z$c.length,Z$j=0;Z$j<Z$i;Z$j++)Z$p._addGraphicToGraphics(Z$c[Z$j],Z$d);0!=Z$e&&0!=Z$f&&Z$d.translate(-Z$e,-Z$f)}},Z$p.addGraphicToSprite=function(Z$a,Z$b,Z$c){var Z$d;void 0===Z$c&&(Z$c=!1),Z$d=Z$c?Z$p._getGraphicsFromSprite(Z$a,Z$b):Z$b.graphics,Z$p._addGraphicToGraphics(Z$a,Z$d)},Z$p._getGraphicsFromSprite=function(Z$a,Z$b){var Z$c,Z$d;if(!Z$a||!Z$a.props)return Z$b.graphics;switch(Z$d=Z$a.props.renderType){case"hit":case"unHit":var Z$e;Z$b.hitArea||(Z$b.hitArea=new Z$V),(Z$e=Z$b.hitArea)[Z$d]||(Z$e[Z$d]=new Z$o),Z$c=Z$e[Z$d]}return Z$c||(Z$c=Z$b.graphics),Z$c},Z$p._getTransformData=function(Z$a){var Z$b;(Z$a.hasOwnProperty("pivotX")||Z$a.hasOwnProperty("pivotY"))&&(Z$b=Z$b||new Z$G).translate(-Z$p._getObjVar(Z$a,"pivotX",0),-Z$p._getObjVar(Z$a,"pivotY",0));var Z$c=Z$p._getObjVar(Z$a,"scaleX",1),Z$d=Z$p._getObjVar(Z$a,"scaleY",1),Z$e=Z$p._getObjVar(Z$a,"rotation",0);Z$p._getObjVar(Z$a,"skewX",0),Z$p._getObjVar(Z$a,"skewY",0);return 1==Z$c&&1==Z$d&&0==Z$e||((Z$b=Z$b||new Z$G).scale(Z$c,Z$d),Z$b.rotate(.0174532922222222*Z$e)),Z$b},Z$p._addGraphicToGraphics=function(Z$a,Z$b){var Z$c,Z$d;if((Z$c=Z$a.props)&&(Z$d=Z$p.DrawTypeDic[Z$a.type])){var Z$e,Z$f;Z$e=Z$b;var Z$i=Z$p._getParams(Z$c,Z$d[1],Z$d[2],Z$d[3]);((Z$f=Z$p._tM)||1!=Z$p._alpha)&&(Z$e.save(),Z$f&&Z$e.transform(Z$f),1!=Z$p._alpha&&Z$e.alpha(Z$p._alpha)),Z$e[Z$d[0]].apply(Z$e,Z$i),(Z$f||1!=Z$p._alpha)&&Z$e.restore()}},Z$p._adptLineData=function(Z$a){return Z$a[2]=parseFloat(Z$a[0])+parseFloat(Z$a[2]),Z$a[3]=parseFloat(Z$a[1])+parseFloat(Z$a[3]),Z$a},Z$p._adptTextureData=function(Z$a){return Z$a[0]=Z$ja.getRes(Z$a[0]),Z$a},Z$p._adptLinesData=function(Z$a){return Z$a[2]=Z$p._getPointListByStr(Z$a[2]),Z$a},Z$p.isDrawType=function(Z$a){return"Image"!=Z$a&&Z$p.DrawTypeDic.hasOwnProperty(Z$a)},Z$p._getParams=function(Z$a,Z$b,Z$c,Z$d){var Z$e;void 0===Z$c&&(Z$c=0),(Z$e=Z$p._temParam).length=Z$b.length;var Z$f,Z$i,Z$j=0;for(Z$f=Z$b.length,Z$j=0;Z$j<Z$f;Z$j++)Z$e[Z$j]=Z$p._getObjVar(Z$a,Z$b[Z$j][0],Z$b[Z$j][1]);return Z$p._alpha=Z$p._getObjVar(Z$a,"alpha",1),Z$i=Z$p._getTransformData(Z$a),Z$p._tM=Z$i?(Z$c||(Z$c=0),Z$i.translate(Z$e[Z$c],Z$e[Z$c+1]),Z$e[Z$c]=Z$e[Z$c+1]=0,Z$i):null,Z$d&&Z$p[Z$d]&&(Z$e=Z$p[Z$d](Z$e)),Z$e},Z$p._getPointListByStr=function(Z$a){var Z$b,Z$c,Z$d=0;for(Z$c=(Z$b=Z$a.split(",")).length,Z$d=0;Z$d<Z$c;Z$d++)Z$b[Z$d]=parseFloat(Z$b[Z$d]);return Z$b},Z$p._getObjVar=function(Z$a,Z$b,Z$c){return Z$a.hasOwnProperty(Z$b)?Z$a[Z$b]:Z$c},Z$p._temParam=[],Z$p._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},Z$p.getClass=function(Z$a){var Z$b=Z$p._classMap[Z$a]||Z$a;return"string"==typeof Z$b?Z$z.__classmap[Z$b]:Z$b},Z$p._tM=null,Z$p._alpha=NaN,Z$k(Z$p,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),Z$p}(),Z$S=function(){function Z$f(Z$a){if(this._color=[],"string"==typeof Z$a){null===(this.strColor=Z$a)&&(Z$a="#000000"),"#"==Z$a.charAt(0)&&(Z$a=Z$a.substr(1));var Z$b=Z$a.length;if(3==Z$b||4==Z$b){for(var Z$c="",Z$d=0;Z$d<Z$b;Z$d++)Z$c+=Z$a[Z$d]+Z$a[Z$d];Z$a=Z$c}var Z$e=this.numColor=parseInt(Z$a,16);if(8==Z$a.length)return void(this._color=[parseInt(Z$a.substr(0,2),16)/255,((16711680&Z$e)>>16)/255,((65280&Z$e)>>8)/255,(255&Z$e)/255])}else Z$e=this.numColor=Z$a,this.strColor=Z$$.toHexColor(Z$e);this._color=[((16711680&Z$e)>>16)/255,((65280&Z$e)>>8)/255,(255&Z$e)/255,1],this._color.__id=++Z$f._COLODID}return Z$m(Z$f,"laya.utils.Color"),Z$f._initDefault=function(){for(var Z$a in Z$f._DEFAULT={},Z$f._COLOR_MAP)Z$f._SAVE[Z$a]=Z$f._DEFAULT[Z$a]=new Z$f(Z$f._COLOR_MAP[Z$a]);return Z$f._DEFAULT},Z$f._initSaveMap=function(){for(var Z$a in Z$f._SAVE_SIZE=0,Z$f._SAVE={},Z$f._DEFAULT)Z$f._SAVE[Z$a]=Z$f._DEFAULT[Z$a]},Z$f.create=function(Z$a){var Z$b=Z$f._SAVE[Z$a+""];return null!=Z$b?Z$b:(Z$f._SAVE_SIZE<1e3||Z$f._initSaveMap(),Z$f._SAVE[Z$a+""]=new Z$f(Z$a))},Z$f._SAVE={},Z$f._SAVE_SIZE=0,Z$f._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},Z$f._DEFAULT=Z$f._initDefault(),Z$f._COLODID=1,Z$f}(),Z$T=(function(){function Z$a(){this._values=[],this._keys=[]}Z$m(Z$a,"laya.utils.Dictionary");var Z$b=Z$a.prototype;Z$b.set=function(Z$a,Z$b){var Z$c=this.indexOf(Z$a);0<=Z$c?this._values[Z$c]=Z$b:(this._keys.push(Z$a),this._values.push(Z$b))},Z$b.indexOf=function(Z$a){var Z$b=this._keys.indexOf(Z$a);return 0<=Z$b?Z$b:(Z$a="string"==typeof Z$a?Number(Z$a):"number"==typeof Z$a?Z$a.toString():Z$a,this._keys.indexOf(Z$a))},Z$b.get=function(Z$a){var Z$b=this.indexOf(Z$a);return Z$b<0?null:this._values[Z$b]},Z$b.remove=function(Z$a){var Z$b=this.indexOf(Z$a);return 0<=Z$b&&(this._keys.splice(Z$b,1),this._values.splice(Z$b,1),!0)},Z$b.clear=function(){this._values.length=0,this._keys.length=0},Z$q(0,Z$b,"values",function(){return this._values}),Z$q(0,Z$b,"keys",function(){return this._keys})}(),function(){function Z$a(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}Z$m(Z$a,"laya.utils.Dragging");var Z$b=Z$a.prototype;return Z$b.start=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){void 0===Z$j&&(Z$j=.92),this.clearTimer(),this.target=Z$a,this.area=Z$b,this.hasInertia=Z$c,this.elasticDistance=Z$b?Z$d:0,this.elasticBackTime=Z$e,this.data=Z$f,this._disableMouseEvent=Z$i,this.ratio=Z$j,1!=Z$a.globalScaleX||1!=Z$a.globalScaleY?this._parent=Z$a.parent:this._parent=Z$z.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,Z$z.stage.on("mouseup",this,this.onStageMouseUp),Z$z.stage.on("mouseout",this,this.onStageMouseUp),Z$z.timer.frameLoop(1,this,this.loop)},Z$b.clearTimer=function(){Z$z.timer.clear(this,this.loop),Z$z.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},Z$b.stop=function(){this._dragging&&(Z$r.instance.disableMouseEvent=!1,Z$z.stage.off("mouseup",this,this.onStageMouseUp),Z$z.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},Z$b.loop=function(){var Z$a=this._parent.getMousePoint(),Z$b=Z$a.x,Z$c=Z$a.y,Z$d=Z$b-this._lastX,Z$e=Z$c-this._lastY;if(this._clickOnly){if(!(1<Math.abs(Z$d*Z$z.stage._canvasTransform.getScaleX())||1<Math.abs(Z$e*Z$z.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),Z$r.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(Z$d,Z$e);0==Z$d&&0==Z$e||(this._lastX=Z$b,this._lastY=Z$c,this.target.x+=Z$d*this._elasticRateX,this.target.y+=Z$e*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},Z$b.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var Z$a=this.area.x-this.target.x;else Z$a=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-Z$a/this.elasticDistance),this.target.y<this.area.y)var Z$b=this.area.y-this.target.y;else Z$b=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-Z$b/this.elasticDistance)}},Z$b.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},Z$b.onStageMouseUp=function(Z$a){if(Z$r.instance.disableMouseEvent=!1,Z$z.stage.off("mouseup",this,this.onStageMouseUp),Z$z.stage.off("mouseout",this,this.onStageMouseUp),Z$z.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var Z$b=this._offsets.length,Z$c=Math.min(Z$b,6),Z$d=this._offsets.length-Z$c,Z$e=Z$b-1;Z$d<Z$e;Z$e--)this._offsetY+=this._offsets[Z$e--],this._offsetX+=this._offsets[Z$e];this._offsetX=this._offsetX/Z$c*2,this._offsetY=this._offsetY/Z$c*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),Z$z.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},Z$b.checkElastic=function(){var Z$a=NaN,Z$b=NaN;if(this.target.x<this.area.x?Z$a=this.area.x:this.target.x>this.area.x+this.area.width&&(Z$a=this.area.x+this.area.width),this.target.y<this.area.y?Z$b=this.area.y:this.target.y>this.area.y+this.area.height&&(Z$b=this.area.y+this.area.height),isNaN(Z$a)&&isNaN(Z$b))this.clear();else{var Z$c={};isNaN(Z$a)||(Z$c.x=Z$a),isNaN(Z$b)||(Z$c.y=Z$b),this._tween=Z$Z.to(this.target,Z$c,this.elasticBackTime,Z$U.sineOut,Z$u.create(this,this.clear),0,!1,!1)}},Z$b.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(Z$z.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},Z$b.clear=function(){if(this.target){this.clearTimer();var Z$a=this.target;this.target=null,this._parent=null,Z$a.event("dragend",this.data)}},Z$a}()),Z$U=function(){function Z$j(){}return Z$m(Z$j,"laya.utils.Ease"),Z$j.linearNone=function(Z$a,Z$b,Z$c,Z$d){return Z$c*Z$a/Z$d+Z$b},Z$j.linearIn=function(Z$a,Z$b,Z$c,Z$d){return Z$c*Z$a/Z$d+Z$b},Z$j.linearInOut=function(Z$a,Z$b,Z$c,Z$d){return Z$c*Z$a/Z$d+Z$b},Z$j.linearOut=function(Z$a,Z$b,Z$c,Z$d){return Z$c*Z$a/Z$d+Z$b},Z$j.bounceIn=function(Z$a,Z$b,Z$c,Z$d){return Z$c-Z$j.bounceOut(Z$d-Z$a,0,Z$c,Z$d)+Z$b},Z$j.bounceInOut=function(Z$a,Z$b,Z$c,Z$d){return Z$a<.5*Z$d?.5*Z$j.bounceIn(2*Z$a,0,Z$c,Z$d)+Z$b:.5*Z$j.bounceOut(2*Z$a-Z$d,0,Z$c,Z$d)+.5*Z$c+Z$b},Z$j.bounceOut=function(Z$a,Z$b,Z$c,Z$d){return(Z$a/=Z$d)<1/2.75?Z$c*(7.5625*Z$a*Z$a)+Z$b:Z$a<2/2.75?Z$c*(7.5625*(Z$a-=1.5/2.75)*Z$a+.75)+Z$b:Z$a<2.5/2.75?Z$c*(7.5625*(Z$a-=2.25/2.75)*Z$a+.9375)+Z$b:Z$c*(7.5625*(Z$a-=2.625/2.75)*Z$a+.984375)+Z$b},Z$j.backIn=function(Z$a,Z$b,Z$c,Z$d,Z$e){return void 0===Z$e&&(Z$e=1.70158),Z$c*(Z$a/=Z$d)*Z$a*((Z$e+1)*Z$a-Z$e)+Z$b},Z$j.backInOut=function(Z$a,Z$b,Z$c,Z$d,Z$e){return void 0===Z$e&&(Z$e=1.70158),(Z$a/=.5*Z$d)<1?.5*Z$c*(Z$a*Z$a*((1+(Z$e*=1.525))*Z$a-Z$e))+Z$b:Z$c/2*((Z$a-=2)*Z$a*((1+(Z$e*=1.525))*Z$a+Z$e)+2)+Z$b},Z$j.backOut=function(Z$a,Z$b,Z$c,Z$d,Z$e){return void 0===Z$e&&(Z$e=1.70158),Z$c*((Z$a=Z$a/Z$d-1)*Z$a*((Z$e+1)*Z$a+Z$e)+1)+Z$b},Z$j.elasticIn=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i;return void 0===Z$e&&(Z$e=0),void 0===Z$f&&(Z$f=0),0==Z$a?Z$b:1==(Z$a/=Z$d)?Z$b+Z$c:(Z$f||(Z$f=.3*Z$d),Z$i=!Z$e||0<Z$c&&Z$e<Z$c||Z$c<0&&Z$e<-Z$c?(Z$e=Z$c,Z$f/4):Z$f/Z$j.PI2*Math.asin(Z$c/Z$e),-Z$e*Math.pow(2,10*(Z$a-=1))*Math.sin((Z$a*Z$d-Z$i)*Z$j.PI2/Z$f)+Z$b)},Z$j.elasticInOut=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i;return void 0===Z$e&&(Z$e=0),void 0===Z$f&&(Z$f=0),0==Z$a?Z$b:2==(Z$a/=.5*Z$d)?Z$b+Z$c:(Z$f||(Z$f=Z$d*(.3*1.5)),Z$i=!Z$e||0<Z$c&&Z$e<Z$c||Z$c<0&&Z$e<-Z$c?(Z$e=Z$c,Z$f/4):Z$f/Z$j.PI2*Math.asin(Z$c/Z$e),Z$a<1?Z$e*Math.pow(2,10*(Z$a-=1))*Math.sin((Z$a*Z$d-Z$i)*Z$j.PI2/Z$f)*-.5+Z$b:Z$e*Math.pow(2,-10*(Z$a-=1))*Math.sin((Z$a*Z$d-Z$i)*Z$j.PI2/Z$f)*.5+Z$c+Z$b)},Z$j.elasticOut=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i;return void 0===Z$e&&(Z$e=0),void 0===Z$f&&(Z$f=0),0==Z$a?Z$b:1==(Z$a/=Z$d)?Z$b+Z$c:(Z$f||(Z$f=.3*Z$d),Z$i=!Z$e||0<Z$c&&Z$e<Z$c||Z$c<0&&Z$e<-Z$c?(Z$e=Z$c,Z$f/4):Z$f/Z$j.PI2*Math.asin(Z$c/Z$e),Z$e*Math.pow(2,-10*Z$a)*Math.sin((Z$a*Z$d-Z$i)*Z$j.PI2/Z$f)+Z$c+Z$b)},Z$j.strongIn=function(Z$a,Z$b,Z$c,Z$d){return Z$c*(Z$a/=Z$d)*Z$a*Z$a*Z$a*Z$a+Z$b},Z$j.strongInOut=function(Z$a,Z$b,Z$c,Z$d){return(Z$a/=.5*Z$d)<1?.5*Z$c*Z$a*Z$a*Z$a*Z$a*Z$a+Z$b:.5*Z$c*((Z$a-=2)*Z$a*Z$a*Z$a*Z$a+2)+Z$b},Z$j.strongOut=function(Z$a,Z$b,Z$c,Z$d){return Z$c*((Z$a=Z$a/Z$d-1)*Z$a*Z$a*Z$a*Z$a+1)+Z$b},Z$j.sineInOut=function(Z$a,Z$b,Z$c,Z$d){return.5*-Z$c*(Math.cos(Math.PI*Z$a/Z$d)-1)+Z$b},Z$j.sineIn=function(Z$a,Z$b,Z$c,Z$d){return-Z$c*Math.cos(Z$a/Z$d*Z$j.HALF_PI)+Z$c+Z$b},Z$j.sineOut=function(Z$a,Z$b,Z$c,Z$d){return Z$c*Math.sin(Z$a/Z$d*Z$j.HALF_PI)+Z$b},Z$j.quintIn=function(Z$a,Z$b,Z$c,Z$d){return Z$c*(Z$a/=Z$d)*Z$a*Z$a*Z$a*Z$a+Z$b},Z$j.quintInOut=function(Z$a,Z$b,Z$c,Z$d){return(Z$a/=.5*Z$d)<1?.5*Z$c*Z$a*Z$a*Z$a*Z$a*Z$a+Z$b:.5*Z$c*((Z$a-=2)*Z$a*Z$a*Z$a*Z$a+2)+Z$b},Z$j.quintOut=function(Z$a,Z$b,Z$c,Z$d){return Z$c*((Z$a=Z$a/Z$d-1)*Z$a*Z$a*Z$a*Z$a+1)+Z$b},Z$j.quartIn=function(Z$a,Z$b,Z$c,Z$d){return Z$c*(Z$a/=Z$d)*Z$a*Z$a*Z$a+Z$b},Z$j.quartInOut=function(Z$a,Z$b,Z$c,Z$d){return(Z$a/=.5*Z$d)<1?.5*Z$c*Z$a*Z$a*Z$a*Z$a+Z$b:.5*-Z$c*((Z$a-=2)*Z$a*Z$a*Z$a-2)+Z$b},Z$j.quartOut=function(Z$a,Z$b,Z$c,Z$d){return-Z$c*((Z$a=Z$a/Z$d-1)*Z$a*Z$a*Z$a-1)+Z$b},Z$j.cubicIn=function(Z$a,Z$b,Z$c,Z$d){return Z$c*(Z$a/=Z$d)*Z$a*Z$a+Z$b},Z$j.cubicInOut=function(Z$a,Z$b,Z$c,Z$d){return(Z$a/=.5*Z$d)<1?.5*Z$c*Z$a*Z$a*Z$a+Z$b:.5*Z$c*((Z$a-=2)*Z$a*Z$a+2)+Z$b},Z$j.cubicOut=function(Z$a,Z$b,Z$c,Z$d){return Z$c*((Z$a=Z$a/Z$d-1)*Z$a*Z$a+1)+Z$b},Z$j.quadIn=function(Z$a,Z$b,Z$c,Z$d){return Z$c*(Z$a/=Z$d)*Z$a+Z$b},Z$j.quadInOut=function(Z$a,Z$b,Z$c,Z$d){return(Z$a/=.5*Z$d)<1?.5*Z$c*Z$a*Z$a+Z$b:.5*-Z$c*(--Z$a*(Z$a-2)-1)+Z$b},Z$j.quadOut=function(Z$a,Z$b,Z$c,Z$d){return-Z$c*(Z$a/=Z$d)*(Z$a-2)+Z$b},Z$j.expoIn=function(Z$a,Z$b,Z$c,Z$d){return 0==Z$a?Z$b:Z$c*Math.pow(2,10*(Z$a/Z$d-1))+Z$b-.001*Z$c},Z$j.expoInOut=function(Z$a,Z$b,Z$c,Z$d){return 0==Z$a?Z$b:Z$a==Z$d?Z$b+Z$c:(Z$a/=.5*Z$d)<1?.5*Z$c*Math.pow(2,10*(Z$a-1))+Z$b:.5*Z$c*(2-Math.pow(2,-10*--Z$a))+Z$b},Z$j.expoOut=function(Z$a,Z$b,Z$c,Z$d){return Z$a==Z$d?Z$b+Z$c:Z$c*(1-Math.pow(2,-10*Z$a/Z$d))+Z$b},Z$j.circIn=function(Z$a,Z$b,Z$c,Z$d){return-Z$c*(Math.sqrt(1-(Z$a/=Z$d)*Z$a)-1)+Z$b},Z$j.circInOut=function(Z$a,Z$b,Z$c,Z$d){return(Z$a/=.5*Z$d)<1?.5*-Z$c*(Math.sqrt(1-Z$a*Z$a)-1)+Z$b:.5*Z$c*(Math.sqrt(1-(Z$a-=2)*Z$a)+1)+Z$b},Z$j.circOut=function(Z$a,Z$b,Z$c,Z$d){return Z$c*Math.sqrt(1-(Z$a=Z$a/Z$d-1)*Z$a)+Z$b},Z$j.HALF_PI=.5*Math.PI,Z$j.PI2=2*Math.PI,Z$j}(),Z$V=function(){function Z$n(){this._hit=null,this._unHit=null}Z$m(Z$n,"laya.utils.HitArea");var Z$a=Z$n.prototype;return Z$a.isHit=function(Z$a,Z$b){return!!Z$n.isHitGraphic(Z$a,Z$b,this.hit)&&!Z$n.isHitGraphic(Z$a,Z$b,this.unHit)},Z$a.contains=function(Z$a,Z$b){return this.isHit(Z$a,Z$b)},Z$q(0,Z$a,"hit",function(){return this._hit||(this._hit=new Z$o),this._hit},function(Z$a){this._hit=Z$a}),Z$q(0,Z$a,"unHit",function(){return this._unHit||(this._unHit=new Z$o),this._unHit},function(Z$a){this._unHit=Z$a}),Z$n.isHitGraphic=function(Z$a,Z$b,Z$c){if(!Z$c)return!1;var Z$d;if(!(Z$d=Z$c.cmds)&&Z$c._one&&((Z$d=Z$n._cmds).length=1,Z$d[0]=Z$c._one),!Z$d)return!1;var Z$e,Z$f,Z$i=0;for(Z$e=Z$d.length,Z$i=0;Z$i<Z$e;Z$i++)if(Z$f=Z$d[Z$i]){var Z$j=Z$J._context;switch(Z$f.callee){case Z$j._translate:case 6:Z$a-=Z$f[0],Z$b-=Z$f[1]}if(Z$n.isHitCmd(Z$a,Z$b,Z$f))return!0}return!1},Z$n.isHitCmd=function(Z$a,Z$b,Z$c){if(!Z$c)return!1;var Z$d=Z$J._context,Z$e=!1;switch(Z$c.callee){case Z$d._drawRect:case 13:Z$n._rec.setTo(Z$c[0],Z$c[1],Z$c[2],Z$c[3]),Z$e=Z$n._rec.contains(Z$a,Z$b);break;case Z$d._drawCircle:case Z$d._fillCircle:case 14:Z$e=(Z$a-=Z$c[0])*Z$a+(Z$b-=Z$c[1])*Z$b<Z$c[2]*Z$c[2];break;case Z$d._drawPoly:case 18:Z$a-=Z$c[0],Z$b-=Z$c[1],Z$e=Z$n.ptInPolygon(Z$a,Z$b,Z$c[2])}return Z$e},Z$n.ptInPolygon=function(Z$a,Z$b,Z$c){var Z$d;(Z$d=Z$n._ptPoint).setTo(Z$a,Z$b);var Z$e,Z$f=0,Z$i=NaN,Z$j=NaN,Z$k=NaN,Z$l=NaN;Z$e=Z$c.length;for(var Z$m=0;Z$m<Z$e;Z$m+=2){if(Z$i=Z$c[Z$m],Z$j=Z$c[Z$m+1],Z$k=Z$c[(Z$m+2)%Z$e],Z$j!=(Z$l=Z$c[(Z$m+3)%Z$e]))if(!(Z$d.y<Math.min(Z$j,Z$l)))if(!(Z$d.y>=Math.max(Z$j,Z$l)))(Z$d.y-Z$j)*(Z$k-Z$i)/(Z$l-Z$j)+Z$i>Z$d.x&&Z$f++}return Z$f%2==1},Z$n._cmds=[],Z$k(Z$n,["_rec",function(){return this._rec=new Z$B},"_ptPoint",function(){return this._ptPoint=new Z$A}]),Z$n}(),Z$W=(function(){function Z$e(Z$a,Z$b,Z$c,Z$d){this.char=Z$a,this.charNum=Z$a.charCodeAt(0),this._x=this._y=0,this.width=Z$b,this.height=Z$c,this.style=Z$d,this.isWord=!Z$e._isWordRegExp.test(Z$a)}Z$m(Z$e,"laya.utils.HTMLChar");var Z$a=Z$e.prototype;Z$z.imps(Z$a,{"laya.display.ILayout":!0}),Z$a.setSprite=function(Z$a){this._sprite=Z$a},Z$a.getSprite=function(){return this._sprite},Z$a._isChar=function(){return!0},Z$a._getCSSStyle=function(){return this.style},Z$q(0,Z$a,"width",function(){return this._w},function(Z$a){this._w=Z$a}),Z$q(0,Z$a,"x",function(){return this._x},function(Z$a){this._sprite&&(this._sprite.x=Z$a),this._x=Z$a}),Z$q(0,Z$a,"y",function(){return this._y},function(Z$a){this._sprite&&(this._sprite.y=Z$a),this._y=Z$a}),Z$q(0,Z$a,"height",function(){return this._h},function(Z$a){this._h=Z$a}),Z$e._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function Z$b(){}Z$m(Z$b,"laya.utils.Log"),Z$b.enable=function(){Z$b._logdiv||(Z$b._logdiv=Z$O.window.document.createElement("div"),Z$O.window.document.body.appendChild(Z$b._logdiv),Z$b._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},Z$b.toggle=function(){var Z$a=Z$b._logdiv.style;"1px"==Z$a.width?Z$a.width=Z$a.height="50%":Z$a.width=Z$a.height="1px"},Z$b.print=function(Z$a){Z$b._logdiv&&(Z$b.maxCount<=Z$b._count&&Z$b.clear(),Z$b._count++,Z$b._logdiv.innerText+=Z$a+"\n",Z$b._logdiv.scrollTop=Z$b._logdiv.scrollHeight)},Z$b.clear=function(){Z$b._logdiv.innerText="",Z$b._count=0},Z$b._logdiv=null,Z$b._count=0,Z$b.maxCount=20}(),function(){function Z$b(){}Z$m(Z$b,"laya.utils.Mouse"),Z$q(1,Z$b,"cursor",function(){return Z$b._style.cursor},function(Z$a){Z$b._style.cursor=Z$a}),Z$b.hide=function(){"none"!=Z$b.cursor&&(Z$b._preCursor=Z$b.cursor,Z$b.cursor="none")},Z$b.show=function(){"none"==Z$b.cursor&&(Z$b.cursor=Z$b._preCursor?Z$b._preCursor:"auto")},Z$b._preCursor=null,Z$k(Z$b,["_style",function(){return this._style=Z$O.document.body.style}])}(),function(){function Z$f(){}return Z$m(Z$f,"laya.utils.Pool"),Z$f.getPoolBySign=function(Z$a){return Z$f._poolDic[Z$a]||(Z$f._poolDic[Z$a]=[])},Z$f.clearBySign=function(Z$a){Z$f._poolDic[Z$a]&&(Z$f._poolDic[Z$a].length=0)},Z$f.recover=function(Z$a,Z$b){Z$b.__InPool||(Z$b.__InPool=!0,Z$f.getPoolBySign(Z$a).push(Z$b))},Z$f.getItemByClass=function(Z$a,Z$b){var Z$c=Z$f.getPoolBySign(Z$a),Z$d=Z$c.length?Z$c.pop():new Z$b;return Z$d.__InPool=!1,Z$d},Z$f.getItemByCreateFun=function(Z$a,Z$b,Z$c){var Z$d=Z$f.getPoolBySign(Z$a),Z$e=Z$d.length?Z$d.pop():Z$b.call(Z$c);return Z$e.__InPool=!1,Z$e},Z$f.getItem=function(Z$a){var Z$b=Z$f.getPoolBySign(Z$a),Z$c=Z$b.length?Z$b.pop():null;return Z$c&&(Z$c.__InPool=!1),Z$c},Z$f._poolDic={},Z$f.InPoolSign="__InPool",Z$f}()),Z$X=function(){function Z$k(){}return Z$m(Z$k,"laya.utils.Stat"),Z$q(1,Z$k,"onclick",null,function(Z$a){Z$k._sp&&Z$k._sp.on("click",Z$k._sp,Z$a),Z$k._canvas&&(Z$k._canvas.source.onclick=Z$a,Z$k._canvas.source.style.pointerEvents="")}),Z$k.show=function(Z$a,Z$b,Z$c){if(void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),!Z$J.isConchApp||Z$J.isConchWebGL){if(Z$J.isConchWebGL||Z$O.onMiniGame||Z$O.onLimixiu||(Z$k._useCanvas=!0),Z$k._show=!0,Z$k._fpsData.length=60,Z$k._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},Z$k._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},Z$k._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},Z$k._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},Z$J.isWebGL)if(Z$k._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},Z$J.is3DMode){if(Z$k._view[0].title="FPS(3D)",Z$k._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},Z$k._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},Z$k._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==Z$c){var Z$d=8;Z$k._view[Z$d++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},Z$k._view[Z$d++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},Z$k._view[Z$d++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},Z$k._view[Z$d++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},Z$k._view[Z$d++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},Z$k._view[Z$d++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},Z$k._view[Z$d++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},Z$k._view[Z$d++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},Z$k._view[Z$d++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==Z$c){Z$d=8;Z$k._view[Z$d++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},Z$k._view[Z$d++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},Z$k._view[Z$d++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},Z$k._view[Z$d++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},Z$k._view[Z$d++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},Z$k._view[Z$d++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},Z$k._view[Z$d++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else Z$k._view[0].title="FPS(WebGL)",Z$k._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else Z$k._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};Z$k._useCanvas?Z$k.createUIPre(Z$a,Z$b):Z$k.createUI(Z$a,Z$b),Z$k.enable()}else Z$O.window.conch.showFPS&&Z$O.window.conch.showFPS(Z$a,Z$b)},Z$k.createUIPre=function(Z$a,Z$b){var Z$c=Z$O.pixelRatio;Z$k._width=170*Z$c,Z$k._vx=75*Z$c,Z$k._height=Z$c*(12*Z$k._view.length+3*Z$c)+4,Z$k._fontSize=12*Z$c;for(var Z$d=0;Z$d<Z$k._view.length;Z$d++)Z$k._view[Z$d].x=4,Z$k._view[Z$d].y=Z$d*Z$k._fontSize+2*Z$c;Z$k._canvas||((Z$k._canvas=new Z$va("2D")).size(Z$k._width,Z$k._height),(Z$k._ctx=Z$k._canvas.getContext("2d")).textBaseline="top",Z$k._ctx.font=Z$k._fontSize+"px Sans-serif",Z$k._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+Z$a+"px;top:"+Z$b+"px;width:"+Z$k._width/Z$c+"px;height:"+Z$k._height/Z$c+"px;"),Z$k._first=!0,Z$k.loop(),Z$k._first=!1,Z$O.container.appendChild(Z$k._canvas.source)},Z$k.createUI=function(Z$a,Z$b){var Z$c=Z$k._sp,Z$d=Z$O.pixelRatio;Z$c||(Z$c=new Z$na,(Z$k._leftText=new Z$sa).pos(5,5),Z$k._leftText.color="#ffffff",Z$c.addChild(Z$k._leftText),(Z$k._txt=new Z$sa).pos(80*Z$d,5),Z$k._txt.color="#ffffff",Z$c.addChild(Z$k._txt),Z$k._sp=Z$c),Z$c.pos(Z$a,Z$b);for(var Z$e="",Z$f=0;Z$f<Z$k._view.length;Z$f++){Z$e+=Z$k._view[Z$f].title+"\n"}Z$k._leftText.text=Z$e;var Z$i=170*Z$d,Z$j=Z$d*(12*Z$k._view.length+3*Z$d)+4;Z$k._txt.fontSize=Z$k._fontSize*Z$d,Z$k._leftText.fontSize=Z$k._fontSize*Z$d,Z$c.size(Z$i,Z$j),Z$c.graphics.clear(),Z$c.graphics.setAlpha(.5),Z$c.graphics.drawRect(0,0,Z$i,Z$j,"#999999"),Z$c.graphics.setAlpha(1),Z$k.loop()},Z$k.enable=function(){Z$z.timer.frameLoop(1,Z$k,Z$k.loop)},Z$k.hide=function(){Z$k._show=!1,Z$z.timer.clear(Z$k,Z$k.loop),Z$k._canvas&&Z$O.removeElement(Z$k._canvas.source)},Z$k.clear=function(){Z$k.trianglesFaces=Z$k.drawCall=Z$k.shaderCall=Z$k.spriteCount=Z$k.spriteRenderUseCacheCount=Z$k.treeNodeCollision=Z$k.treeSpriteCollision=Z$k.canvasNormal=Z$k.canvasBitmap=Z$k.canvasReCache=0},Z$k.loop=function(){Z$k._count++;var Z$a=Z$O.now();if(!(Z$a-Z$k._timer<1e3)){var Z$b=Z$k._count;if(Z$k.FPS=Math.round(1e3*Z$b/(Z$a-Z$k._timer)),Z$k._show){Z$k.trianglesFaces=Math.round(Z$k.trianglesFaces/Z$b),Z$k.spriteCount=Z$k._useCanvas?(Z$k.drawCall=Math.round(Z$k.drawCall/Z$b)-2,Z$k.shaderCall=Math.round(Z$k.shaderCall/Z$b),Math.round(Z$k.spriteCount/Z$b)-1):(Z$k.drawCall=Math.round(Z$k.drawCall/Z$b)-2,Z$k.shaderCall=Math.round(Z$k.shaderCall/Z$b)-4,Math.round(Z$k.spriteCount/Z$b)-4),Z$k.spriteRenderUseCacheCount=Math.round(Z$k.spriteRenderUseCacheCount/Z$b),Z$k.canvasNormal=Math.round(Z$k.canvasNormal/Z$b),Z$k.canvasBitmap=Math.round(Z$k.canvasBitmap/Z$b),Z$k.canvasReCache=Math.ceil(Z$k.canvasReCache/Z$b),Z$k.treeNodeCollision=Math.round(Z$k.treeNodeCollision/Z$b),Z$k.treeSpriteCollision=Math.round(Z$k.treeSpriteCollision/Z$b);var Z$c=0<Z$k.FPS?Math.floor(1e3/Z$k.FPS).toString():" ";Z$k._fpsStr=Z$k.FPS+(Z$k.renderSlow?" slow":"")+" "+Z$c,Z$k._spriteStr=Z$k.spriteCount+(Z$k.spriteRenderUseCacheCount?"/"+Z$k.spriteRenderUseCacheCount:""),Z$k._canvasStr=Z$k.canvasReCache+"/"+Z$k.canvasNormal+"/"+Z$k.canvasBitmap,Z$k.currentMemorySize=Z$N.systemResourceManager.memorySize,Z$k._useCanvas?Z$k.renderInfoPre():Z$k.renderInfo(),Z$k.clear()}Z$k._count=0,Z$k._timer=Z$a}},Z$k.renderInfoPre=function(){if(Z$k._canvas){var Z$a=Z$k._ctx;Z$a.clearRect(Z$k._first?0:Z$k._vx,0,Z$k._width,Z$k._height);for(var Z$b=Z$J.WebGL.mainContext,Z$c=0;Z$c<Z$k._view.length;Z$c++){var Z$d=Z$k._view[Z$c];Z$k._first&&(Z$a.fillStyle="white",Z$a.fillText(Z$d.title,Z$d.x,Z$d.y,null,null,null)),Z$a.fillStyle=Z$d.color;var Z$e=-1;if((Z$d=Z$k._view[Z$c]).varying){if(Z$b)switch(Z$d.varying){case 1:Z$e=Z$b.getParameter(Z$b[Z$d.value]);break;case 2:Z$e=Z$b.getExtension(Z$d.value)}}else Z$e=Z$k[Z$d.value];"M"==Z$d.units&&(Z$e=Math.floor(Z$e/1048576*100)/100+" M"),"K"==Z$d.units&&(Z$e=Math.floor(Z$e/1024*100)/100+" K"),"string"==Z$d.units&&(Z$e=Z$e.match(/\d+\.?\d/i)),Z$a.fillText(Z$e+"",Z$d.x+Z$k._vx,Z$d.y,null,null,null)}}},Z$k.renderInfo=function(){for(var Z$a="",Z$b=Z$J.WebGL.mainContext,Z$c=0;Z$c<Z$k._view.length;Z$c++){var Z$d=Z$k._view[Z$c],Z$e=-1;if(Z$d.varying){if(Z$b)switch(Z$d.varying){case 1:Z$e=Z$b.getParameter(Z$b[Z$d.value]);break;case 2:Z$e=Z$b.getExtension(Z$d.value)}}else Z$e=Z$k[Z$d.value];"M"==Z$d.units&&(Z$e=Math.floor(Z$e/1048576*100)/100+" M"),"K"==Z$d.units&&(Z$e=Math.floor(Z$e/1024*100)/100+" K"),"string"==Z$d.units&&(Z$e=Z$e.match(/\d+\.?\d/i)),Z$a+=Z$e+"\n"}Z$k._txt.text=Z$a},Z$k.FPS=0,Z$k.loopCount=0,Z$k.shaderCall=0,Z$k.drawCall=0,Z$k.trianglesFaces=0,Z$k.spriteCount=0,Z$k.spriteRenderUseCacheCount=0,Z$k.treeNodeCollision=0,Z$k.treeSpriteCollision=0,Z$k.canvasNormal=0,Z$k.canvasBitmap=0,Z$k.canvasReCache=0,Z$k.renderSlow=!1,Z$k.currentMemorySize=0,Z$k._fpsStr=null,Z$k._canvasStr=null,Z$k._spriteStr=null,Z$k._fpsData=[],Z$k._timer=0,Z$k._count=0,Z$k._view=[],Z$k._fontSize=12,Z$k._txt=null,Z$k._leftText=null,Z$k._sp=null,Z$k._show=!1,Z$k._useCanvas=!1,Z$k._canvas=null,Z$k._ctx=null,Z$k._first=!1,Z$k._vx=NaN,Z$k._width=0,Z$k._height=100,Z$k}(),Z$Y=(function(){function Z$a(){this._strsToID={},this._idToStrs=[],this._length=0}Z$m(Z$a,"laya.utils.StringKey");var Z$b=Z$a.prototype;Z$b.add=function(Z$a){var Z$b=this._strsToID[Z$a];return null!=Z$b?Z$b:(this._idToStrs[this._length]=Z$a,this._strsToID[Z$a]=this._length++)},Z$b.getID=function(Z$a){var Z$b=this._strsToID[Z$a];return null==Z$b?-1:Z$b},Z$b.getName=function(Z$a){var Z$b=this._idToStrs[Z$a];return null==Z$b?void 0:Z$b}}(),function(){var Z$l;function Z$a(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}Z$m(Z$a,"laya.utils.Timer");var Z$b=Z$a.prototype;return Z$b._init=function(){Z$z.timer&&Z$z.timer.frameLoop(1,this,this._update)},Z$b._now=function(){return Date.now()},Z$b._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var Z$a=this.currFrame=this.currFrame+this.scale,Z$b=this._now();this._delta=(Z$b-this._lastTimer)*this.scale;var Z$c=this.currTimer=this.currTimer+this._delta;Z$z.isDebug&&6e4<Math.abs(Z$b-this._lastTimer)&&console.error("系统时间错误！"+(Z$b-this._lastTimer)),this._lastTimer=Z$b;var Z$d=this._handlers;for(Z$i=this._count=0,Z$j=Z$d.length;Z$i<Z$j;Z$i++)if(null!==(Z$k=Z$d[Z$i]).method){var Z$e=Z$k.userFrame?Z$a:Z$c;if(Z$e>=Z$k.exeTime)if(Z$k.repeat)if(Z$k.jumpFrame)for(;Z$e>=Z$k.exeTime;)Z$k.exeTime+=Z$k.delay,Z$k.run(!1);else Z$k.exeTime+=Z$k.delay,Z$k.run(!1),Z$e>Z$k.exeTime&&(Z$k.exeTime+=Math.ceil((Z$e-Z$k.exeTime)/Z$k.delay)*Z$k.delay);else Z$k.run(!0)}else this._count++;(30<this._count||Z$a%200==0)&&this._clearHandlers();for(var Z$f=this._laters,Z$i=0,Z$j=Z$f.length-1;Z$i<=Z$j;Z$i++){var Z$k=Z$f[Z$i];this._isIgnoreRecover(Z$k)||(null!==Z$k.method&&(delete this._map[Z$k.key],Z$k.run(!1)),this._recoverHandler(Z$k)),Z$i===Z$j&&(Z$j=Z$f.length-1)}Z$f.length=0}},Z$b._clearHandlers=function(){for(var Z$a=this._handlers,Z$b=0,Z$c=Z$a.length;Z$b<Z$c;Z$b++){var Z$d=Z$a[Z$b];null!==Z$d.method?this._temp.push(Z$d):this._isIgnoreRecover(Z$d)?this._temp.push(Z$d):this._recoverHandler(Z$d)}this._handlers=this._temp,this._temp=Z$a,this._temp.length=0},Z$b._recoverHandler=function(Z$a){this._map[Z$a.key]==Z$a&&delete this._map[Z$a.key],Z$a.recover()},Z$b._create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){if(!Z$c)return Z$e.apply(Z$d,Z$f),null;if(Z$i){var Z$k=this._getHandler(Z$d,Z$e);if(Z$k)return Z$k.repeat=Z$b,Z$k.userFrame=Z$a,Z$k.delay=Z$c,Z$k.ignoreRecover=Z$j,Z$k.caller=Z$d,Z$k.method=Z$e,Z$k.args=Z$f,Z$k.exeTime=Z$c+(Z$a?this.currFrame:this.currTimer+this._now()-this._lastTimer),Z$k}return(Z$k=Z$l.create()).repeat=Z$b,Z$k.userFrame=Z$a,Z$k.delay=Z$c,Z$k.ignoreRecover=Z$j,Z$k.caller=Z$d,Z$k.method=Z$e,Z$k.args=Z$f,Z$k.exeTime=Z$c+(Z$a?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(Z$k),this._handlers.push(Z$k),Z$k},Z$b._indexHandler=function(Z$a){var Z$b=Z$a.caller,Z$c=Z$a.method,Z$d=Z$b?Z$b.$_GID||(Z$b.$_GID=Z$$.getGID()):0,Z$e=Z$c.$_TID||(Z$c.$_TID=this._mid++);Z$a.key=Z$d+"_"+Z$e,this._map[Z$a.key]=Z$a},Z$b.once=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$e&&(Z$e=!0),this._create(!1,!1,Z$a,Z$b,Z$c,Z$d,Z$e,!1)},Z$b.loop=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){void 0===Z$e&&(Z$e=!0),void 0===Z$f&&(Z$f=!1),void 0===Z$i&&(Z$i=!1);var Z$j=this._create(!1,!0,Z$a,Z$b,Z$c,Z$d,Z$e,Z$i);Z$j&&(Z$j.jumpFrame=Z$f)},Z$b.frameOnce=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$e&&(Z$e=!0),this._create(!0,!1,Z$a,Z$b,Z$c,Z$d,Z$e,!1)},Z$b.frameLoop=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$e&&(Z$e=!0),void 0===Z$f&&(Z$f=!1),this._create(!0,!0,Z$a,Z$b,Z$c,Z$d,Z$e,Z$f)},Z$b.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+Z$l._freeCount},Z$b.clear=function(Z$a,Z$b){var Z$c=this._getHandler(Z$a,Z$b);return!(!Z$c||this._isIgnoreRecover(Z$c))&&(delete this._map[Z$c.key],Z$c.key=null,Z$c.clear(),!0)},Z$b.clearAll=function(Z$a){if(Z$a)for(var Z$b=0,Z$c=this._handlers.length;Z$b<Z$c;Z$b++){var Z$d=this._handlers[Z$b];Z$d.caller===Z$a&&(this._isIgnoreRecover(Z$d)||(delete this._map[Z$d.key],Z$d.key=null,Z$d.clear()))}},Z$b._getHandler=function(Z$a,Z$b){var Z$c=Z$a?Z$a.$_GID||(Z$a.$_GID=Z$$.getGID()):0,Z$d=Z$b.$_TID||(Z$b.$_TID=this._mid++);return this._map[Z$c+"_"+Z$d]},Z$b._isIgnoreRecover=function(Z$a){if(Z$a.ignoreRecover||Z$a.caller&&"IgnoreRecover"==Z$a.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var Z$b="";try{arguments.propertyIsEnumerable.caller}catch(Z$a){Z$b=Z$a.stack}Z$z.recordError("报错：核心定时器销毁忽略  "+Z$b)}return!0}return!1},Z$b.hasHandler=function(Z$a,Z$b){return this._map[Z$a.$_GID+"_"+Z$b.$_TID]},Z$b.callLater=function(Z$a,Z$b,Z$c){if(null==this._getHandler(Z$a,Z$b)){var Z$d=Z$l.create();Z$d.caller=Z$a,Z$d.method=Z$b,Z$d.args=Z$c,this._indexHandler(Z$d),this._laters.push(Z$d)}},Z$b.runCallLater=function(Z$a,Z$b){var Z$c=this._getHandler(Z$a,Z$b);Z$c&&null!=Z$c.method&&(this._isIgnoreRecover(Z$c)||(delete this._map[Z$c.key],Z$c.run(!0)))},Z$b.runTimer=function(Z$a,Z$b){this.runCallLater(Z$a,Z$b)},Z$q(0,Z$b,"delta",function(){return this._delta}),Z$a.__init$=function(){Z$l=function(){function Z$b(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}Z$m(Z$b,"");var Z$a=Z$b.prototype;return Z$a.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},Z$a.recover=function(){this.clear(),this.args=Z$b._freeHandler,Z$b._freeHandler=this,Z$b._freeCount++},Z$a.run=function(Z$a){var Z$b=this.caller;if(Z$b&&Z$b.destroyed)return this.clear();var Z$c=this.method,Z$d=this.args;Z$a&&this.clear(),null!=Z$c&&(Z$d?Z$c.apply(Z$b,Z$d):Z$c.call(Z$b))},Z$b._freeHandler=null,Z$b._freeCount=0,Z$b.create=function(){var Z$a=Z$b._freeHandler;return Z$a?(Z$b._freeHandler=Z$a.args,--Z$b._freeCount,Z$a.args=null,Z$a):new Z$b},Z$b}()},Z$a}()),Z$Z=function(){function Z$n(){this.gid=0}Z$m(Z$n,"laya.utils.Tween");var Z$a=Z$n.prototype;return Z$a.to=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){return void 0===Z$f&&(Z$f=0),void 0===Z$i&&(Z$i=!1),this._create(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,!0,!1,!0)},Z$a.from=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){return void 0===Z$f&&(Z$f=0),void 0===Z$i&&(Z$i=!1),this._create(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,!1,!1,!0)},Z$a._create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){if(!Z$a)throw new Error("Tween:target is null");this._target=Z$a,this._duration=Z$c,this._ease=Z$d||Z$b.ease||Z$n.easeNone,this._complete=Z$e||Z$b.complete,this._delay=Z$f,this._props=[],this._usedTimer=0,this._startTimer=Z$O.now(),this._usedPool=Z$k,this._delayParam=null,this.update=Z$b.update;var Z$m=Z$a.$_GID||(Z$a.$_GID=Z$$.getGID());return Z$n.tweenMap[Z$m]?(Z$i&&Z$n.clearTween(Z$a),Z$n.tweenMap[Z$m].push(this)):Z$n.tweenMap[Z$m]=[this],Z$l?Z$f<=0?this.firstStart(Z$a,Z$b,Z$j):(this._delayParam=[Z$a,Z$b,Z$j],Z$z.scaleTimer.once(Z$f,this,this.firstStart,this._delayParam)):this._initProps(Z$a,Z$b,Z$j),this},Z$a.firstStart=function(Z$a,Z$b,Z$c){this._delayParam=null,Z$a.destroyed?this.clear():(this._initProps(Z$a,Z$b,Z$c),this._beginLoop())},Z$a._initProps=function(Z$a,Z$b,Z$c){for(var Z$d in Z$b)if("number"==typeof Z$a[Z$d]){var Z$e=Z$c?Z$a[Z$d]:Z$b[Z$d],Z$f=Z$c?Z$b[Z$d]:Z$a[Z$d];this._props.push([Z$d,Z$e,Z$f-Z$e]),Z$c||(Z$a[Z$d]=Z$e)}},Z$a._beginLoop=function(){Z$z.scaleTimer.frameLoop(1,this,this._doEase)},Z$a._doEase=function(){this._updateEase(Z$O.now())},Z$a._updateEase=function(Z$a){var Z$b=this._target;if(Z$b){if(Z$b.destroyed)return Z$n.clearTween(Z$b);var Z$c=this._usedTimer=Z$a-this._startTimer-this._delay;if(!(Z$c<0)){if(Z$c>=this._duration)return this.complete();for(var Z$d=0<Z$c?this._ease(Z$c,0,1,this._duration):0,Z$e=this._props,Z$f=0,Z$i=Z$e.length;Z$f<Z$i;Z$f++){var Z$j=Z$e[Z$f];Z$b[Z$j[0]]=Z$j[1]+Z$d*Z$j[2]}this.update&&this.update.run()}}},Z$a.complete=function(){if(this._target){Z$z.scaleTimer.runTimer(this,this.firstStart);for(var Z$a=this._target,Z$b=this._props,Z$c=this._complete,Z$d=0,Z$e=Z$b.length;Z$d<Z$e;Z$d++){var Z$f=Z$b[Z$d];Z$a[Z$f[0]]=Z$f[1]+Z$f[2]}this.update&&this.update.run(),this.clear(),Z$c&&Z$c.run()}},Z$a.pause=function(){Z$z.scaleTimer.clear(this,this._beginLoop),Z$z.scaleTimer.clear(this,this._doEase),Z$z.scaleTimer.clear(this,this.firstStart);var Z$a;(Z$a=Z$O.now()-this._startTimer-this._delay)<0&&(this._usedTimer=Z$a)},Z$a.setStartTime=function(Z$a){this._startTimer=Z$a},Z$a.clear=function(){this._target&&(this._remove(),this._clear())},Z$a._clear=function(){this.pause(),Z$z.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,Z$W.recover("tween",this))},Z$a.recover=function(){this._usedPool=!0,this._clear()},Z$a._remove=function(){var Z$a=Z$n.tweenMap[this._target.$_GID];if(Z$a)for(var Z$b=0,Z$c=Z$a.length;Z$b<Z$c;Z$b++)if(Z$a[Z$b]===this){Z$a.splice(Z$b,1);break}},Z$a.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=Z$O.now(),this._delayParam)Z$z.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var Z$a=this._props,Z$b=0,Z$c=Z$a.length;Z$b<Z$c;Z$b++){var Z$d=Z$a[Z$b];this._target[Z$d[0]]=Z$d[1]}Z$z.scaleTimer.once(this._delay,this,this._beginLoop)}},Z$a.resume=function(){this._usedTimer>=this._duration||(this._startTimer=Z$O.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?Z$z.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},Z$q(0,Z$a,"progress",null,function(Z$a){var Z$b=Z$a*this._duration;this._startTimer=Z$O.now()-this._delay-Z$b}),Z$n.to=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){return void 0===Z$f&&(Z$f=0),void 0===Z$i&&(Z$i=!1),void 0===Z$j&&(Z$j=!0),Z$W.getItemByClass("tween",Z$n)._create(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,!0,Z$j,!0)},Z$n.from=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){return void 0===Z$f&&(Z$f=0),void 0===Z$i&&(Z$i=!1),void 0===Z$j&&(Z$j=!0),Z$W.getItemByClass("tween",Z$n)._create(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,!1,Z$j,!0)},Z$n.clearAll=function(Z$a){if(Z$a&&Z$a.$_GID){var Z$b=Z$n.tweenMap[Z$a.$_GID];if(Z$b){for(var Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++)Z$b[Z$c]._clear();Z$b.length=0}}},Z$n.clear=function(Z$a){Z$a.clear()},Z$n.clearTween=function(Z$a){Z$n.clearAll(Z$a)},Z$n.easeNone=function(Z$a,Z$b,Z$c,Z$d){return Z$c*Z$a/Z$d+Z$b},Z$n.tweenMap={},Z$n}(),Z$$=function(){function Z$j(){}return Z$m(Z$j,"laya.utils.Utils"),Z$j.toRadian=function(Z$a){return Z$a*Z$j._pi2},Z$j.toAngle=function(Z$a){return Z$a*Z$j._pi},Z$j.toHexColor=function(Z$a){if(Z$a<0||isNaN(Z$a))return null;for(var Z$b=Z$a.toString(16);Z$b.length<6;)Z$b="0"+Z$b;return"#"+Z$b},Z$j.getGID=function(){return Z$j._gid++},Z$j.concatArray=function(Z$a,Z$b){if(!Z$b)return Z$a;if(!Z$a)return Z$b;var Z$c=0,Z$d=Z$b.length;for(Z$c=0;Z$c<Z$d;Z$c++)Z$a.push(Z$b[Z$c]);return Z$a},Z$j.clearArray=function(Z$a){return Z$a&&(Z$a.length=0),Z$a},Z$j.copyArray=function(Z$a,Z$b){if(Z$a||(Z$a=[]),!Z$b)return Z$a;Z$a.length=Z$b.length;var Z$c=0,Z$d=Z$b.length;for(Z$c=0;Z$c<Z$d;Z$c++)Z$a[Z$c]=Z$b[Z$c];return Z$a},Z$j.getGlobalRecByPoints=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f,Z$i;return Z$f=new Z$A(Z$b,Z$c),Z$f=Z$a.localToGlobal(Z$f),Z$i=new Z$A(Z$d,Z$e),Z$i=Z$a.localToGlobal(Z$i),Z$B._getWrapRec([Z$f.x,Z$f.y,Z$i.x,Z$i.y])},Z$j.getGlobalPosAndScale=function(Z$a){return Z$j.getGlobalRecByPoints(Z$a,0,0,1,1)},Z$j.bind=function(Z$a,Z$b){return Z$a.bind(Z$b)},Z$j.measureText=function(Z$a,Z$b){return Z$F.measureText(Z$a,Z$b)},Z$j.contextMeasureText=function(Z$a){var Z$b=Z$O.context.measureText(Z$a);return Z$b||(Z$b={width:16,height:16}),Z$b},Z$j.updateOrder=function(Z$a){if(!Z$a||Z$a.length<2)return!1;for(var Z$b,Z$c=1,Z$d=0,Z$e=Z$a.length,Z$f=NaN;Z$c<Z$e;){for(Z$b=Z$a[Z$d=Z$c],Z$f=Z$a[Z$d]._zOrder;-1<--Z$d&&Z$a[Z$d]._zOrder>Z$f;)Z$a[Z$d+1]=Z$a[Z$d];Z$a[Z$d+1]=Z$b,Z$c++}var Z$i=Z$b.parent.conchModel;if(Z$i)if(null!=Z$i.updateZOrder)Z$i.updateZOrder();else{for(Z$c=0;Z$c<Z$e;Z$c++)Z$i.removeChild(Z$a[Z$c].conchModel);for(Z$c=0;Z$c<Z$e;Z$c++)Z$i.addChildAt(Z$a[Z$c].conchModel,Z$c)}return!0},Z$j.transPointList=function(Z$a,Z$b,Z$c){var Z$d=0,Z$e=Z$a.length;for(Z$d=0;Z$d<Z$e;Z$d+=2)Z$a[Z$d]+=Z$b,Z$a[Z$d+1]+=Z$c},Z$j.parseInt=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0);var Z$c=Z$O.window.parseInt(Z$a,Z$b);return isNaN(Z$c)?0:Z$c},Z$j.getFileExtension=function(Z$a){Z$j._extReg.lastIndex=Z$a.lastIndexOf(".");var Z$b=Z$j._extReg.exec(Z$a);return Z$b&&1<Z$b.length?Z$b[1].toLowerCase():null},Z$j.getTransformRelativeToWindow=function(Z$a,Z$b,Z$c){var Z$d=Z$z.stage,Z$e=laya.utils.Utils.getGlobalPosAndScale(Z$a),Z$f=Z$d._canvasTransform.clone(),Z$i=Z$f.tx,Z$j=Z$f.ty;Z$f.rotate(-Math.PI/180*Z$z.stage.canvasDegree),Z$f.scale(Z$z.stage.clientScaleX,Z$z.stage.clientScaleY);var Z$k=Z$z.stage.canvasDegree%180!=0,Z$l=NaN,Z$m=NaN;Z$k?(Z$l=Z$c+Z$e.y,Z$m=Z$b+Z$e.x,Z$l*=Z$f.d,Z$m*=Z$f.a,90==Z$z.stage.canvasDegree?(Z$l=Z$i-Z$l,Z$m+=Z$j):(Z$l+=Z$i,Z$m=Z$j-Z$m)):(Z$l=Z$b+Z$e.x,Z$m=Z$c+Z$e.y,Z$l*=Z$f.a,Z$m*=Z$f.d,Z$l+=Z$i,Z$m+=Z$j);var Z$n=NaN,Z$o=NaN;return Z$o=Z$k?(Z$n=Z$f.d*Z$e.height,Z$f.a*Z$e.width):(Z$n=Z$f.a*Z$e.width,Z$f.d*Z$e.height),{x:Z$l,y:Z$m,scaleX:Z$n,scaleY:Z$o}},Z$j.fitDOMElementInArea=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){Z$a._fitLayaAirInitialized||(Z$a._fitLayaAirInitialized=!0,Z$a.style.transformOrigin=Z$a.style.webKittransformOrigin="left top",Z$a.style.position="absolute");var Z$i=Z$j.getTransformRelativeToWindow(Z$b,Z$c,Z$d);Z$a.style.transform=Z$a.style.webkitTransform="scale("+Z$i.scaleX+","+Z$i.scaleY+") rotate("+Z$z.stage.canvasDegree+"deg)",Z$a.style.width=Z$e+"px",Z$a.style.height=Z$f+"px",Z$a.style.left=Z$i.x+"px",Z$a.style.top=Z$i.y+"px"},Z$j.isOkTextureList=function(Z$a){if(!Z$a)return!1;var Z$b,Z$c=0,Z$d=Z$a.length;for(Z$c=0;Z$c<Z$d;Z$c++)if(!(Z$b=Z$a[Z$c])||!Z$b.source)return!1;return!0},Z$j.isOKCmdList=function(Z$a){if(!Z$a)return!1;var Z$b,Z$c,Z$d=0,Z$e=Z$a.length,Z$f=Z$J._context;for(Z$d=0;Z$d<Z$e;Z$d++)switch((Z$b=Z$a[Z$d]).callee){case Z$f._drawTexture:case Z$f._fillTexture:case Z$f._drawTextureWithTransform:if(!(Z$c=Z$b[0])||!Z$c.source)return!1}return!0},Z$j._gid=1,Z$j._pi=180/Math.PI,Z$j._pi2=Math.PI/180,Z$j._extReg=/\.(\w+)\??/g,Z$j.parseXMLFromString=function(Z$a){var Z$b;if(Z$a=Z$a.replace(/>\s+</g,"><"),-1<(Z$b=(new DOMParser).parseFromString(Z$a,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(Z$b.firstChild.firstChild.textContent);return Z$b},Z$j}(),Z$_=function(){function Z$a(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],Z$J.isWebGL&&Z$Q.regCacheByFunction(Z$$.bind(this.startDispose,this),Z$$.bind(this.getCacheList,this))}Z$m(Z$a,"laya.utils.VectorGraphManager");var Z$b=Z$a.prototype;return Z$b.getId=function(){return this._id++},Z$b.addShape=function(Z$a,Z$b){this.shapeDic[Z$a]=Z$b,this.useDic[Z$a]||(this.useDic[Z$a]=!0)},Z$b.addLine=function(Z$a,Z$b){this.shapeLineDic[Z$a]=Z$b,this.shapeLineDic[Z$a]||(this.shapeLineDic[Z$a]=!0)},Z$b.getShape=function(Z$a){this._checkKey&&null!=this.useDic[Z$a]&&(this.useDic[Z$a]=!0)},Z$b.deleteShape=function(Z$a){this.shapeDic[Z$a]&&(this.shapeDic[Z$a]=null,delete this.shapeDic[Z$a]),this.shapeLineDic[Z$a]&&(this.shapeLineDic[Z$a]=null,delete this.shapeLineDic[Z$a]),null!=this.useDic[Z$a]&&delete this.useDic[Z$a]},Z$b.getCacheList=function(){var Z$a,Z$b=[];for(Z$a in this.shapeDic)Z$b.push(this.shapeDic[Z$a]);for(Z$a in this.shapeLineDic)Z$b.push(this.shapeLineDic[Z$a]);return Z$b},Z$b.startDispose=function(Z$a){var Z$b;for(Z$b in this.useDic)this.useDic[Z$b]=!1;this._checkKey=!0},Z$b.endDispose=function(){if(this._checkKey){var Z$a;for(Z$a in this.useDic)this.useDic[Z$a]||this.deleteShape(Z$a);this._checkKey=!1}},Z$a.getInstance=function(){return Z$a.instance=Z$a.instance||new Z$a},Z$a.instance=null,Z$a}(),Z$g=function(){function Z$d(){this._obj=null,this._obj=Z$d.supportWeakMap?new Z$O.window.WeakMap:{},Z$d.supportWeakMap||Z$d._maps.push(this)}Z$m(Z$d,"laya.utils.WeakObject");var Z$a=Z$d.prototype;return Z$a.set=function(Z$a,Z$b){if(null!=Z$a)if(Z$d.supportWeakMap){var Z$c=Z$a;"string"!=typeof Z$a&&"number"!=typeof Z$a||(Z$c=Z$d._keys[Z$a])||(Z$c=Z$d._keys[Z$a]={k:Z$a}),this._obj.set(Z$c,Z$b)}else"string"==typeof Z$a||"number"==typeof Z$a?this._obj[Z$a]=Z$b:(Z$a.$_GID||(Z$a.$_GID=Z$$.getGID()),this._obj[Z$a.$_GID]=Z$b)},Z$a.get=function(Z$a){if(null==Z$a)return null;if(Z$d.supportWeakMap){var Z$b="string"==typeof Z$a||"number"==typeof Z$a?Z$d._keys[Z$a]:Z$a;return Z$b?this._obj.get(Z$b):null}return"string"==typeof Z$a||"number"==typeof Z$a?this._obj[Z$a]:this._obj[Z$a.$_GID]},Z$a.del=function(Z$a){if(null!=Z$a)if(Z$d.supportWeakMap){var Z$b="string"==typeof Z$a||"number"==typeof Z$a?Z$d._keys[Z$a]:Z$a;if(!Z$b)return;this._obj.delete(Z$b)}else"string"==typeof Z$a||"number"==typeof Z$a?delete this._obj[Z$a]:delete this._obj[this._obj.$_GID]},Z$a.has=function(Z$a){if(null==Z$a)return!1;if(Z$d.supportWeakMap){var Z$b="string"==typeof Z$a||"number"==typeof Z$a?Z$d._keys[Z$a]:Z$a;return this._obj.has(Z$b)}return"string"==typeof Z$a||"number"==typeof Z$a?null!=this._obj[Z$a]:null!=this._obj[this._obj.$_GID]},Z$d.__init__=function(){(Z$d.supportWeakMap=null!=Z$O.window.WeakMap)||Z$z.timer.loop(Z$d.delInterval,null,Z$d.clearCache)},Z$d.clearCache=function(){for(var Z$a=0,Z$b=Z$d._maps.length;Z$a<Z$b;Z$a++){Z$d._maps[Z$a]._obj={}}},Z$d.supportWeakMap=!1,Z$d.delInterval=3e5,Z$d._keys={},Z$d._maps=[],Z$k(Z$d,["I",function(){return this.I=new Z$d}]),Z$d}(),Z$h=function(){function Z$a(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}Z$m(Z$a,"laya.utils.WordText");var Z$b=Z$a.prototype;return Z$b.setText=function(Z$a){this.changed=!0,this._text=Z$a},Z$b.toString=function(){return this._text},Z$b.charCodeAt=function(Z$a){return this._text?this._text.charCodeAt(Z$a):NaN},Z$b.charAt=function(Z$a){return this._text?this._text.charAt(Z$a):null},Z$q(0,Z$b,"length",function(){return this._text?this._text.length:0}),Z$a}(),Z$aa=function(Z$a){function Z$i(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,Z$i.__super.call(this),this._childs=Z$i.ARRAY_EMPTY,this._$P=Z$i.PROP_EMPTY,this.timer=Z$z.scaleTimer,this.conchModel=Z$J.isConchNode?this.createConchModel():null}Z$m(Z$i,"laya.display.Node",Z$l);var Z$b=Z$i.prototype;return Z$b._setBit=function(Z$a,Z$b){1==Z$a&&(this._getBit(Z$a)!=Z$b&&this._updateDisplayedInstage());Z$b?this._bits|=Z$a:this._bits&=~Z$a},Z$b._getBit=function(Z$a){return 0!=(this._bits&Z$a)},Z$b._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},Z$b._setUpNoticeType=function(Z$a){var Z$b=this;for(Z$b._setBit(Z$a,!0),Z$b=Z$b.parent;Z$b;){if(Z$b._getBit(Z$a))return;Z$b._setBit(Z$a,!0),Z$b=Z$b.parent}},Z$b.on=function(Z$a,Z$b,Z$c,Z$d){return"display"!==Z$a&&"undisplay"!==Z$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(Z$a,Z$b,Z$c,Z$d,!1)},Z$b.once=function(Z$a,Z$b,Z$c,Z$d){return"display"!==Z$a&&"undisplay"!==Z$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(Z$a,Z$b,Z$c,Z$d,!0)},Z$b.createConchModel=function(){return null},Z$b.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(Z$a?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},Z$b.destroyChildren=function(){if(this._childs)for(var Z$a=this._childs.length-1;-1<Z$a;Z$a--)this._childs[Z$a].destroy(!0)},Z$b.addChild=function(Z$a){if(!Z$a||this.destroyed||Z$a===this)return Z$a;if(Z$a.zOrder&&this._set$P("hasZorder",!0),Z$a._parent===this){var Z$b=this.getChildIndex(Z$a);Z$b!==this._childs.length-1&&(this._childs.splice(Z$b,1),this._childs.push(Z$a),this.conchModel&&(this.conchModel.removeChild(Z$a.conchModel),this.conchModel.addChildAt(Z$a.conchModel,this._childs.length-1)),this._childChanged())}else Z$a.parent&&Z$a.parent.removeChild(Z$a),this._childs===Z$i.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(Z$a),this.conchModel&&this.conchModel.addChildAt(Z$a.conchModel,this._childs.length-1),(Z$a.parent=this)._childChanged();return Z$a},Z$b.addChildren=function(Z$a){for(var Z$b=arguments,Z$c=0,Z$d=Z$b.length;Z$c<Z$d;)this.addChild(Z$b[Z$c++])},Z$b.addChildAt=function(Z$a,Z$b){if(!Z$a||this.destroyed||Z$a===this)return Z$a;if(Z$a.zOrder&&this._set$P("hasZorder",!0),0<=Z$b&&Z$b<=this._childs.length){if(Z$a._parent===this){var Z$c=this.getChildIndex(Z$a);this._childs.splice(Z$c,1),this._childs.splice(Z$b,0,Z$a),this.conchModel&&(this.conchModel.removeChild(Z$a.conchModel),this.conchModel.addChildAt(Z$a.conchModel,Z$b)),this._childChanged()}else Z$a.parent&&Z$a.parent.removeChild(Z$a),this._childs===Z$i.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(Z$b,0,Z$a),this.conchModel&&this.conchModel.addChildAt(Z$a.conchModel,Z$b),Z$a.parent=this;return Z$a}throw new Error("appendChildAt:The index is out of bounds")},Z$b.getChildIndex=function(Z$a){return this._childs.indexOf(Z$a)},Z$b.getChildByName=function(Z$a){var Z$b=this._childs;if(Z$b)for(var Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++){var Z$e=Z$b[Z$c];if(Z$e.name===Z$a)return Z$e}return null},Z$b._get$P=function(Z$a){return this._$P[Z$a]},Z$b._set$P=function(Z$a,Z$b){return this.destroyed||(this._$P===Z$i.PROP_EMPTY&&(this._$P={}),this._$P[Z$a]=Z$b),Z$b},Z$b.getChildAt=function(Z$a){return this._childs[Z$a]},Z$b.setChildIndex=function(Z$a,Z$b){var Z$c=this._childs;if(Z$b<0||Z$b>=Z$c.length)throw new Error("setChildIndex:The index is out of bounds.");var Z$d=this.getChildIndex(Z$a);if(Z$d<0)throw new Error("setChildIndex:node is must child of this object.");return Z$c.splice(Z$d,1),Z$c.splice(Z$b,0,Z$a),this.conchModel&&(this.conchModel.removeChild(Z$a.conchModel),this.conchModel.addChildAt(Z$a.conchModel,Z$b)),this._childChanged(),Z$a},Z$b._childChanged=function(Z$a){},Z$b.removeChild=function(Z$a){if(!this._childs)return Z$a;var Z$b=this._childs.indexOf(Z$a);return this.removeChildAt(Z$b)},Z$b.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},Z$b.removeChildByName=function(Z$a){var Z$b=this.getChildByName(Z$a);return Z$b&&this.removeChild(Z$b),Z$b},Z$b.removeChildAt=function(Z$a){var Z$b=this.getChildAt(Z$a);if(Z$b){for(var Z$c=this._childs.length-1,Z$d=Z$a;Z$d<Z$c;++Z$d)this._childs[Z$d]=this._childs[Z$d+1];this._childs.length=Z$c,this.conchModel&&this.conchModel.removeChild(Z$b.conchModel),Z$b.parent=null}return Z$b},Z$b.removeChildren=function(Z$a,Z$b){if(void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=2147483647),this._childs&&0<this._childs.length){var Z$c=this._childs;if(0===Z$a&&Z$f<=Z$b){var Z$d=Z$c;this._childs=Z$i.ARRAY_EMPTY}else Z$d=Z$c.splice(Z$a,Z$b-Z$a);for(var Z$e=0,Z$f=Z$d.length;Z$e<Z$f;Z$e++)Z$d[Z$e].parent=null,this.conchModel&&this.conchModel.removeChild(Z$d[Z$e].conchModel)}return this},Z$b.replaceChild=function(Z$a,Z$b){var Z$c=this._childs.indexOf(Z$b);return-1<Z$c?(this._childs.splice(Z$c,1,Z$a),this.conchModel&&(this.conchModel.removeChild(Z$b.conchModel),this.conchModel.addChildAt(Z$a.conchModel,Z$c)),Z$b.parent=null,Z$a.parent=this,Z$a):null},Z$b._updateDisplayedInstage=function(){var Z$a;Z$a=this;var Z$b=Z$z.stage;for(this._displayedInStage=!1;Z$a;){if(Z$a._getBit(1)){this._displayedInStage=Z$a._displayedInStage;break}if(Z$a==Z$b||Z$a._displayedInStage){this._displayedInStage=!0;break}Z$a=Z$a.parent}},Z$b._setDisplay=function(Z$a){this._displayedInStage!==Z$a&&((this._displayedInStage=Z$a)?this.event("display"):this.event("undisplay"))},Z$b._displayChild=function(Z$a,Z$b){var Z$c=Z$a._childs;if(Z$c)for(var Z$d=0;Z$d<Z$c.length;Z$d++){var Z$e=Z$c[Z$d];Z$e&&Z$e._getBit(1)&&(0<Z$e._childs.length?this._displayChild(Z$e,Z$b):Z$e._setDisplay(Z$b))}Z$a._setDisplay(Z$b)},Z$b.contains=function(Z$a){if(Z$a===this)return!0;for(;Z$a;){if(Z$a.parent===this)return!0;Z$a=Z$a.parent}return!1},Z$b.timerLoop=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$e&&(Z$e=!0),void 0===Z$f&&(Z$f=!1),this.timer.loop(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f)},Z$b.timerOnce=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$e&&(Z$e=!0),this.timer._create(!1,!1,Z$a,Z$b,Z$c,Z$d,Z$e)},Z$b.frameLoop=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$e&&(Z$e=!0),this.timer._create(!0,!0,Z$a,Z$b,Z$c,Z$d,Z$e)},Z$b.frameOnce=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$e&&(Z$e=!0),this.timer._create(!0,!1,Z$a,Z$b,Z$c,Z$d,Z$e)},Z$b.clearTimer=function(Z$a,Z$b){this.timer.clear(Z$a,Z$b)},Z$q(0,Z$b,"numChildren",function(){return this._childs.length}),Z$q(0,Z$b,"destroyed",function(){return this._destroyed}),Z$q(0,Z$b,"parent",function(){return this._parent},function(Z$a){this._parent!==Z$a&&(Z$a?(this._parent=Z$a,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),Z$a.displayedInStage&&this._displayChild(this,!0)),Z$a._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=Z$a))}),Z$q(0,Z$b,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),Z$i.ARRAY_EMPTY=[],Z$i.PROP_EMPTY={},Z$i.NOTICE_DISPLAY=1,Z$i.MOUSEENABLE=2,Z$i}(),Z$ba=function(Z$a){function Z$o(Z$a){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,Z$o.__super.call(this),this._padding=Z$o._PADDING,this._spacing=Z$o._SPACING,this._aligns=Z$o._ALIGNS,this._font=Z$p.EMPTY,this._ower=Z$a}Z$m(Z$o,"laya.display.css.CSSStyle",Z$a);var Z$b=Z$o.prototype;return Z$b.destroy=function(){this._ower=null,this._font=null,this._rect=null},Z$b.inherit=function(Z$a){this._font=Z$a._font,this._spacing=Z$a._spacing===Z$o._SPACING?Z$o._SPACING:Z$a._spacing.slice(),this.lineHeight=Z$a.lineHeight},Z$b._widthAuto=function(){return 0!=(262144&this._type)},Z$b.widthed=function(Z$a){return 0!=(8&this._type)},Z$b._calculation=function(Z$a,Z$b){if(Z$b.indexOf("%")<0)return!1;var Z$d=this._ower,Z$e=Z$d.parent,Z$f=this._rect;function Z$i(Z$a,Z$b,Z$c){return Z$a*Z$c[0]+Z$b*Z$c[1]+Z$c[2]}function Z$c(Z$a){var Z$b=Z$e.width,Z$c=Z$d.width;Z$f.width&&(Z$d.width=Z$i(Z$b,Z$c,Z$f.width)),Z$f.height&&(Z$d.height=Z$i(Z$b,Z$c,Z$f.height)),Z$f.left&&(Z$d.x=Z$i(Z$b,Z$c,Z$f.left)),Z$f.top&&(Z$d.y=Z$i(Z$b,Z$c,Z$f.top))}null===Z$f&&(Z$e._getCSSStyle()._type|=524288,Z$e.on("resize",this,Z$c),this._rect=Z$f={input:{}});var Z$j=Z$b.split(" ");return Z$j[0]=parseFloat(Z$j[0])/100,1==Z$j.length?Z$j[1]=Z$j[2]=0:(Z$j[1]=parseFloat(Z$j[1])/100,Z$j[2]=parseFloat(Z$j[2])),Z$f[Z$a]=Z$j,Z$f.input[Z$a]=Z$b,Z$c(),!0},Z$b.heighted=function(Z$a){return 0!=(8192&this._type)},Z$b.size=function(Z$a,Z$b){var Z$c=this._ower,Z$d=!1;-1!==Z$a&&Z$a!=this._ower.width&&(this._type|=8,this._ower.width=Z$a,Z$d=!0),-1!==Z$b&&Z$b!=this._ower.height&&(this._type|=8192,this._ower.height=Z$b,Z$d=!0),Z$d&&(Z$c._layoutLater(),524288&this._type&&Z$c.event("resize",this))},Z$b._getAlign=function(){return this._aligns[0]},Z$b._getValign=function(){return this._aligns[1]},Z$b._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},Z$b._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new Z$p(this._font))},Z$b.render=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.width,Z$f=Z$a.height;Z$c-=Z$a.pivotX,Z$d-=Z$a.pivotY,this._bgground&&null!=this._bgground.color&&Z$b.ctx.fillRect(Z$c,Z$d,Z$e,Z$f,this._bgground.color),this._border&&this._border.color&&Z$b.drawRect(Z$c,Z$d,Z$e,Z$f,this._border.color.strColor,this._border.size)},Z$b.getCSSStyle=function(){return this},Z$b.cssText=function(Z$a){this.attrs(Z$o.parseOneCSS(Z$a,";"))},Z$b.attrs=function(Z$a){if(Z$a)for(var Z$b=0,Z$c=Z$a.length;Z$b<Z$c;Z$b++){var Z$d=Z$a[Z$b];this[Z$d[0]]=Z$d[1]}},Z$b.setTransform=function(Z$a){"none"===Z$a?this._tf=Z$j._TF_EMPTY:this.attrs(Z$o.parseOneCSS(Z$a,","))},Z$b.translate=function(Z$a,Z$b){this._tf===Z$j._TF_EMPTY&&(this._tf=new Z$e),this._tf.translateX=Z$a,this._tf.translateY=Z$b},Z$b.scale=function(Z$a,Z$b){this._tf===Z$j._TF_EMPTY&&(this._tf=new Z$e),this._tf.scaleX=Z$a,this._tf.scaleY=Z$b},Z$b._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},Z$q(0,Z$b,"block",Z$a.prototype._$get_block,function(Z$a){Z$a?this._type|=1:this._type&=-2}),Z$q(0,Z$b,"valign",function(){return Z$o._valigndef[this._aligns[1]]},function(Z$a){this._aligns===Z$o._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=Z$o._valigndef[Z$a]}),Z$q(0,Z$b,"height",null,function(Z$a){if(this._type|=8192,"string"==typeof Z$a){if(this._calculation("height",Z$a))return;Z$a=parseInt(Z$a)}this.size(-1,Z$a)}),Z$q(0,Z$b,"width",null,function(Z$a){if(this._type|=8,"string"==typeof Z$a){var Z$b=Z$a.indexOf("auto");if(0<=Z$b&&(this._type|=262144,Z$a=Z$a.substr(0,Z$b)),this._calculation("width",Z$a))return;Z$a=parseInt(Z$a)}this.size(Z$a,-1)}),Z$q(0,Z$b,"fontWeight",function(){return this._font.weight},function(Z$a){this._createFont().weight=Z$a}),Z$q(0,Z$b,"left",null,function(Z$a){var Z$b=this._ower;if("string"==typeof Z$a){if("center"===Z$a?Z$a="50% -50% 0":"right"===Z$a&&(Z$a="100% -100% 0"),this._calculation("left",Z$a))return;Z$a=parseInt(Z$a)}Z$b.x=Z$a}),Z$q(0,Z$b,"_translate",null,function(Z$a){this.translate(Z$a[0],Z$a[1])}),Z$q(0,Z$b,"absolute",function(){return 0!=(4&this._type)}),Z$q(0,Z$b,"top",null,function(Z$a){var Z$b=this._ower;if("string"==typeof Z$a){if("middle"===Z$a?Z$a="50% -50% 0":"bottom"===Z$a&&(Z$a="100% -100% 0"),this._calculation("top",Z$a))return;Z$a=parseInt(Z$a)}Z$b.y=Z$a}),Z$q(0,Z$b,"align",function(){return Z$o._aligndef[this._aligns[0]]},function(Z$a){this._aligns===Z$o._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=Z$o._aligndef[Z$a]}),Z$q(0,Z$b,"bold",function(){return this._font.bold},function(Z$a){this._createFont().bold=Z$a}),Z$q(0,Z$b,"padding",function(){return this._padding},function(Z$a){this._padding=Z$a}),Z$q(0,Z$b,"leading",function(){return this._spacing[1]},function(Z$a){"string"==typeof Z$a&&(Z$a=parseInt(Z$a+"")),this._spacing===Z$o._SPACING&&(this._spacing=[0,0]),this._spacing[1]=Z$a}),Z$q(0,Z$b,"lineElement",function(){return 0!=(65536&this._type)},function(Z$a){Z$a?this._type|=65536:this._type&=-65537}),Z$q(0,Z$b,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(Z$a){this.lineElement=!1,"right"===Z$a?this._type|=32768:this._type&=-32769}),Z$q(0,Z$b,"textDecoration",function(){return this._font.decoration},function(Z$a){this._createFont().decoration=Z$a}),Z$q(0,Z$b,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(Z$a){"nowrap"===Z$a&&(this._type|=131072),"none"===Z$a&&(this._type&=-131073)}),Z$q(0,Z$b,"background",null,function(Z$a){Z$a?(this._bgground||(this._bgground={}),this._bgground.color=Z$a,this._ower.conchModel&&this._ower.conchModel.bgColor(Z$a),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),Z$q(0,Z$b,"wordWrap",function(){return 0==(131072&this._type)},function(Z$a){Z$a?this._type&=-131073:this._type|=131072}),Z$q(0,Z$b,"color",function(){return this._font.color},function(Z$a){this._createFont().color=Z$a}),Z$q(0,Z$b,"password",function(){return this._font.password},function(Z$a){this._createFont().password=Z$a}),Z$q(0,Z$b,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(Z$a){"none"===Z$a?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=Z$a),this._ower.conchModel&&this._ower.conchModel.bgColor(Z$a),this._ower._renderType|=256}),Z$q(0,Z$b,"font",function(){return this._font.toString()},function(Z$a){this._createFont().set(Z$a)}),Z$q(0,Z$b,"weight",null,function(Z$a){this._createFont().weight=Z$a}),Z$q(0,Z$b,"letterSpacing",function(){return this._spacing[0]},function(Z$a){"string"==typeof Z$a&&(Z$a=parseInt(Z$a+"")),this._spacing===Z$o._SPACING&&(this._spacing=[0,0]),this._spacing[0]=Z$a}),Z$q(0,Z$b,"fontSize",function(){return this._font.size},function(Z$a){this._createFont().size=Z$a}),Z$q(0,Z$b,"italic",function(){return this._font.italic},function(Z$a){this._createFont().italic=Z$a}),Z$q(0,Z$b,"fontFamily",function(){return this._font.family},function(Z$a){this._createFont().family=Z$a}),Z$q(0,Z$b,"stroke",function(){return this._font.stroke[0]},function(Z$a){this._createFont().stroke===Z$p._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=Z$a}),Z$q(0,Z$b,"strokeColor",function(){return this._font.stroke[1]},function(Z$a){this._createFont().stroke===Z$p._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=Z$a}),Z$q(0,Z$b,"border",function(){return this._border?this._border.value:""},function(Z$a){if("none"!=Z$a){this._border||(this._border={});var Z$b=(this._border.value=Z$a).split(" ");if(this._border.color=Z$S.create(Z$b[Z$b.length-1]),1==Z$b.length)return this._border.size=1,void(this._border.type="solid");var Z$c=0;0<Z$b[0].indexOf("px")?(this._border.size=parseInt(Z$b[0]),Z$c++):this._border.size=1,this._border.type=Z$b[Z$c],this._ower._renderType|=256}else this._border=null}),Z$q(0,Z$b,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(Z$a){Z$a?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==Z$a?null:Z$S.create(Z$a),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),Z$q(0,Z$b,"position",function(){return 4&this._type?"absolute":""},function(Z$a){"absolute"==Z$a?this._type|=4:this._type&=-5}),Z$q(0,Z$b,"display",null,function(Z$a){switch(Z$a){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),Z$q(0,Z$b,"paddingLeft",function(){return this.padding[3]}),Z$q(0,Z$b,"paddingTop",function(){return this.padding[0]}),Z$q(0,Z$b,"_scale",null,function(Z$a){this._ower.scale(Z$a[0],Z$a[1])}),Z$q(0,Z$b,"_rotate",null,function(Z$a){this._ower.rotation=Z$a}),Z$o.parseOneCSS=function(Z$a,Z$b){for(var Z$c,Z$d=[],Z$e=Z$a.split(Z$b),Z$f=0,Z$i=Z$e.length;Z$f<Z$i;Z$f++){var Z$j=Z$e[Z$f],Z$k=Z$j.indexOf(":"),Z$l=Z$j.substr(0,Z$k).replace(/^\s+|\s+$/g,"");if(0!=Z$l.length){var Z$m=Z$j.substr(Z$k+1).replace(/^\s+|\s+$/g,""),Z$n=[Z$l,Z$m];switch(Z$l){case"italic":case"bold":Z$n[1]="true"==Z$m;break;case"line-height":Z$n[0]="lineHeight",Z$n[1]=parseInt(Z$m);break;case"font-size":Z$n[0]="fontSize",Z$n[1]=parseInt(Z$m);break;case"padding":1<(Z$c=Z$m.split(" ")).length||(Z$c[1]=Z$c[2]=Z$c[3]=Z$c[0]),Z$n[1]=[parseInt(Z$c[0]),parseInt(Z$c[1]),parseInt(Z$c[2]),parseInt(Z$c[3])];break;case"rotate":Z$n[0]="_rotate",Z$n[1]=parseFloat(Z$m);break;case"scale":Z$c=Z$m.split(" "),Z$n[0]="_scale",Z$n[1]=[parseFloat(Z$c[0]),parseFloat(Z$c[1])];break;case"translate":Z$c=Z$m.split(" "),Z$n[0]="_translate",Z$n[1]=[parseInt(Z$c[0]),parseInt(Z$c[1])];break;default:(Z$n[0]=Z$o._CSSTOVALUE[Z$l])||(Z$n[0]=Z$l)}Z$d.push(Z$n)}}return Z$d},Z$o.parseCSS=function(Z$a,Z$b){for(var Z$c;null!=(Z$c=Z$o._parseCSSRegExp.exec(Z$a));)Z$o.styleSheets[Z$c[1]]=Z$o.parseOneCSS(Z$c[2],";")},Z$o.EMPTY=new Z$o(null),Z$o._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},Z$o._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),Z$o._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},Z$o._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},Z$o.styleSheets={},Z$o.ALIGN_CENTER=1,Z$o.ALIGN_RIGHT=2,Z$o.VALIGN_MIDDLE=1,Z$o.VALIGN_BOTTOM=2,Z$o._CSS_BLOCK=1,Z$o._DISPLAY_NONE=2,Z$o._ABSOLUTE=4,Z$o._WIDTH_SET=8,Z$o._PADDING=[0,0,0,0],Z$o._RECT=[-1,-1,-1,-1],Z$o._SPACING=[0,0],Z$o._ALIGNS=[0,0,0],Z$o.ADDLAYOUTED=512,Z$o._NEWFONT=4096,Z$o._HEIGHT_SET=8192,Z$o._BACKGROUND_SET=16384,Z$o._FLOAT_RIGHT=32768,Z$o._LINE_ELEMENT=65536,Z$o._NOWARP=131072,Z$o._WIDTHAUTO=262144,Z$o._LISTERRESZIE=524288,Z$o}(Z$j),Z$ca=function(Z$a){function Z$i(){this.url=null,this.audio=null,this.loaded=!1,Z$i.__super.call(this)}Z$m(Z$i,"laya.media.h5audio.AudioSound",Z$l);var Z$b=Z$i.prototype;return Z$b.dispose=function(){var Z$a=Z$i._audioCache[this.url];Z$a&&(Z$a.src="",delete Z$i._audioCache[this.url])},Z$b.load=function(Z$a){var Z$b;if(Z$a=Z$I.formatURL(Z$a),(this.url=Z$a)==Z$E._tMusic?(Z$i._initMusicAudio(),(Z$b=Z$i._musicAudio).src!=Z$a&&(Z$i._audioCache[Z$b.src]=null,Z$b=null)):Z$b=Z$i._audioCache[Z$a],Z$b&&2<=Z$b.readyState)this.event("complete");else{Z$b||(Z$b=Z$a==Z$E._tMusic?(Z$i._initMusicAudio(),Z$i._musicAudio):Z$O.createElement("audio"),(Z$i._audioCache[Z$a]=Z$b).src=Z$a),Z$b.addEventListener("canplaythrough",Z$d),Z$b.addEventListener("error",Z$e);var Z$c=this;(this.audio=Z$b).load?Z$b.load():Z$e()}function Z$d(){Z$f(),Z$c.loaded=!0,Z$c.event("complete")}function Z$e(){Z$b.load=null,Z$f(),Z$c.event("error")}function Z$f(){Z$b.removeEventListener("canplaythrough",Z$d),Z$b.removeEventListener("error",Z$e)}},Z$b.play=function(Z$a,Z$b,Z$c){if(void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),!this.url)return null;var Z$d,Z$e;if(!(Z$d=this.url==Z$E._tMusic?Z$i._musicAudio:Z$i._audioCache[this.url]))return null;Z$e=Z$W.getItem("audio:"+this.url),Z$J.isConchApp?Z$e||((Z$e=Z$O.createElement("audio")).src=this.url):this.url==Z$E._tMusic?(Z$i._initMusicAudio(),(Z$e=Z$i._musicAudio).src=this.url):Z$e=Z$e||Z$d.cloneNode(!0);var Z$f=new Z$oa(Z$e);return Z$f.url=this.url,Z$f.loops=Z$b,Z$f.startTime=Z$a,Z$f.startHandler=Z$c,Z$f.play(!1),Z$E.addChannel(Z$f),Z$f},Z$q(0,Z$b,"duration",function(){var Z$a;return(Z$a=Z$i._audioCache[this.url])?Z$a.duration:0}),Z$i._initMusicAudio=function(){Z$i._musicAudio||(Z$i._musicAudio||(Z$i._musicAudio=Z$O.createElement("audio")),Z$J.isConchApp||Z$O.document.addEventListener("mousedown",Z$i._makeMusicOK))},Z$i._makeMusicOK=function(){Z$O.document.removeEventListener("mousedown",Z$i._makeMusicOK),Z$i._musicAudio.src?Z$i._musicAudio.play():(Z$i._musicAudio.src="",Z$i._musicAudio.load())},Z$i._audioCache={},Z$i._musicAudio=null,Z$i}(),Z$da=function(Z$a){function Z$b(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,Z$b.__super.call(this)}Z$m(Z$b,"laya.media.SoundChannel",Z$l);var Z$c=Z$b.prototype;return Z$c.play=function(){},Z$c.stop=function(){},Z$c.pause=function(){},Z$c.resume=function(){},Z$c.__runComplete=function(Z$a){Z$a&&Z$a.run()},Z$q(0,Z$c,"volume",function(){return 1},function(Z$a){}),Z$q(0,Z$c,"position",function(){return 0}),Z$q(0,Z$c,"duration",function(){return 0}),Z$b}(),Z$ea=function(Z$a){function Z$b(){Z$b.__super.call(this)}Z$m(Z$b,"laya.media.Sound",Z$l);var Z$c=Z$b.prototype;return Z$c.load=function(Z$a){},Z$c.play=function(Z$a,Z$b,Z$c){return void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),null},Z$c.dispose=function(){},Z$q(0,Z$c,"duration",function(){return 0}),Z$b}(),Z$fa=function(Z$a){function Z$e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,Z$e.__super.call(this)}Z$m(Z$e,"laya.media.webaudio.WebAudioSound",Z$l);var Z$b=Z$e.prototype;return Z$b.load=function(Z$a){this.url=Z$a,this.audioBuffer=Z$e._dataCache[Z$a],this.audioBuffer?this._loaded(this.audioBuffer):(Z$e.e.on("loaded:"+Z$a,this,this._loaded),Z$e.e.on("err:"+Z$a,this,this._err),Z$e.__loadingSound[Z$a]||(Z$e.__loadingSound[Z$a]=!0,Z$z.loader.load(Z$a,Z$u.create(this,this.onloaded),null,Z$ja.BUFFER,4,!1,null,!0)))},Z$b.onloaded=function(Z$a){Z$a||this._err(),this._disposed?this._removeLoadEvents():(this.data=Z$a,Z$e.buffs.push({buffer:this.data,url:this.url}),Z$e.decode())},Z$b._err=function(){if(this._removeLoadEvents(),Z$e.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var Z$a,Z$b,Z$c,Z$d=0;for(Z$a=(Z$b=this.__toPlays).length,Z$d=0;Z$d<Z$a;Z$d++)(Z$c=Z$b[Z$d])[3]&&!Z$c[3].isStopped&&Z$c[3].event("error");this.__toPlays.length=0}},Z$b._loaded=function(Z$a){this._removeLoadEvents(),this._disposed||(this.audioBuffer=Z$a,this.loaded=!0,this.event("complete"))},Z$b._removeLoadEvents=function(){Z$e.e.off("loaded:"+this.url,this,this._loaded),Z$e.e.off("err:"+this.url,this,this._err)},Z$b.__playAfterLoaded=function(){if(this.__toPlays){var Z$a,Z$b,Z$c,Z$d=0;for(Z$a=(Z$b=this.__toPlays).length,Z$d=0;Z$d<Z$a;Z$d++)(Z$c=Z$b[Z$d])[3]&&!Z$c[3].isStopped&&this.play(Z$c[0],Z$c[1],Z$c[2],Z$c[3]);this.__toPlays.length=0}},Z$b.play=function(Z$a,Z$b,Z$c,Z$d){return void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),Z$d=Z$d||new Z$pa,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([Z$a,Z$b,Z$c,Z$d]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),Z$d.url=this.url,Z$d.loops=Z$b,Z$d.audioBuffer=this.audioBuffer,Z$d.startTime=Z$a,Z$d.startHandler=Z$c,Z$d.play(!1),Z$E.addChannel(Z$d),Z$d},Z$b.dispose=function(){this._disposed=!0,delete Z$e._dataCache[this.url],delete Z$e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},Z$q(0,Z$b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),Z$e.decode=function(){if(!(Z$e.buffs.length<=0||Z$e.isDecoding))if(Z$e.isDecoding=!0,(Z$e.tInfo=Z$e.buffs.shift())&&Z$e.tInfo.buffer&&Z$e.tInfo.buffer.byteLength)try{Z$e.ctx.decodeAudioData(Z$e.tInfo.buffer,Z$e._done,Z$e._fail)}catch(Z$a){console.error("decodeAudioData error  byteLength:"+Z$e.tInfo.buffer.byteLength+"  url:"+Z$e.tInfo.url)}else Z$e._fail()},Z$e._done=function(Z$a){Z$e.e.event("loaded:"+Z$e.tInfo.url,Z$a),Z$e._dataCache[Z$e.tInfo.url]=Z$a,Z$e.isDecoding=!1,Z$e.decode()},Z$e._fail=function(){Z$e.e.event("err:"+Z$e.tInfo.url,null),Z$e.isDecoding=!1,Z$e.decode()},Z$e._playEmptySound=function(){if(null!=Z$e.ctx){if(Z$e._emptySource&&(Z$e._emptySource.stop(),Z$e._emptySource.disconnect(0),!Z$pa._tryCleanFailed))try{Z$e._emptySource.buffer=null}catch(Z$a){Z$pa._tryCleanFailed=!0}var Z$a=Z$e.ctx.createBufferSource();Z$a.buffer=Z$e._miniBuffer,Z$a.connect(Z$e.ctx.destination),Z$a.start(0,0,0),Z$e._emptySource=Z$a}},Z$e._unlock=function(){Z$e._unlocked||(Z$e._playEmptySound(),"running"==Z$e.ctx.state?(Z$O.document.removeEventListener("mousedown",Z$e._unlock,!0),Z$O.document.removeEventListener("touchend",Z$e._unlock,!0),Z$O.document.removeEventListener("touchstart",Z$e._unlock,!0),Z$e._unlocked=!0):"suspended"==Z$e.ctx.state&&Z$E._recoverWebAudio())},Z$e.initWebAudio=function(){"running"!=Z$e.ctx.state&&(Z$e._unlock(),Z$O.document.addEventListener("mousedown",Z$e._unlock,!0),Z$O.document.addEventListener("touchend",Z$e._unlock,!0),Z$O.document.addEventListener("touchstart",Z$e._unlock,!0))},Z$e._emptySource=null,Z$e._dataCache={},Z$e.buffs=[],Z$e.isDecoding=!1,Z$e._unlocked=!1,Z$e.tInfo=null,Z$e.__loadingSound={},Z$k(Z$e,["window",function(){return this.window=Z$O.window},"webAudioEnabled",function(){return this.webAudioEnabled=Z$e.window.AudioContext||Z$e.window.webkitAudioContext||Z$e.window.mozAudioContext},"ctx",function(){return this.ctx=Z$e.webAudioEnabled?new(Z$e.window.AudioContext||Z$e.window.webkitAudioContext||Z$e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=Z$e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new Z$l}]),Z$e}(),Z$ia=function(Z$a){function Z$b(){this._responseType=null,this._data=null,Z$b.__super.call(this),this._http=new Z$O.window.XMLHttpRequest}Z$m(Z$b,"laya.net.HttpRequest",Z$l);var Z$c=Z$b.prototype;return Z$c.send=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$c&&(Z$c="get"),void 0===Z$d&&(Z$d="text"),this._responseType=Z$d,this._data=null;var Z$f=this,Z$i=this._http;if(Z$i.open(Z$c,Z$a,!0),Z$e)for(var Z$j=0;Z$j<Z$e.length;Z$j++)Z$i.setRequestHeader(Z$e[Z$j++],Z$e[Z$j]);else Z$J.isConchApp||(Z$b&&"string"!=typeof Z$b?Z$i.setRequestHeader("Content-Type","application/json"):Z$i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));Z$i.responseType="arraybuffer"!==Z$d?"text":"arraybuffer",Z$i.onerror=function(Z$a){Z$f._onError(Z$a)},Z$i.onabort=function(Z$a){Z$f._onAbort(Z$a)},Z$i.onprogress=function(Z$a){Z$f._onProgress(Z$a)},Z$i.onload=function(Z$a){Z$f._onLoad(Z$a)},Z$i.send(Z$b)},Z$c._onProgress=function(Z$a){Z$a&&Z$a.lengthComputable&&this.event("progress",Z$a.loaded/Z$a.total)},Z$c._onAbort=function(Z$a){this.error("Request was aborted by user")},Z$c._onError=function(Z$a){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},Z$c._onLoad=function(Z$a){var Z$b=this._http,Z$c=void 0!==Z$b.status?Z$b.status:200;200===Z$c||204===Z$c||0===Z$c?this.complete():this.error("["+Z$b.status+"]"+Z$b.statusText+":"+Z$b.responseURL)},Z$c.error=function(Z$a){this.clear(),this.event("error",Z$a)},Z$c.complete=function(){this.clear();var Z$b=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=Z$$.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(Z$a){Z$b=!1,this.error(Z$a.message)}Z$b&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},Z$c.clear=function(){var Z$a=this._http;Z$a.onerror=Z$a.onabort=Z$a.onprogress=Z$a.onload=null},Z$q(0,Z$c,"url",function(){return this._http.responseURL}),Z$q(0,Z$c,"http",function(){return this._http}),Z$q(0,Z$c,"data",function(){return this._data}),Z$b}(),Z$ja=function(Z$a){function Z$C(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,Z$C.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}Z$m(Z$C,"laya.net.Loader",Z$l);var Z$b=Z$C.prototype;return Z$b.load=function(Z$a,Z$b,Z$c,Z$d,Z$e){if(Z$a&&""!=Z$a||console.error("Loader 加载的url不合法 "+Z$a),void 0===Z$c&&(Z$c=!0),void 0===Z$e&&(Z$e=!1),0===(this._url=Z$a).indexOf("data:image")?this._type=Z$b="image":this._type=Z$b||(Z$b=this.getTypeFromUrl(Z$a)),this._cache=Z$c,this._data=null,!Z$e&&Z$C.loadedMap[Z$a])return this._data=Z$C.loadedMap[Z$a],this.event("progress",1),void this.event("complete",this._data);if(Z$d&&Z$C.setGroup(Z$a,Z$d),null!=Z$C.parserMap[Z$b])return this._customParse=!0,void(Z$C.parserMap[Z$b]instanceof laya.utils.Handler?Z$C.parserMap[Z$b].runWith(this):Z$C.parserMap[Z$b].call(null,this));if("image"===Z$b||"htmlimage"===Z$b||"nativeimage"===Z$b)return this._loadImage(Z$a);if("ttf"===Z$b)return this._loadTTF(Z$a);switch(Z$b){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:Z$b}Z$C.preLoadedMap[Z$a]?this.onLoaded(Z$C.preLoadedMap[Z$a]):Z$i.resMgrLoad(Z$a,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},Z$b.getTypeFromUrl=function(Z$a){var Z$b=Z$$.getFileExtension(Z$a);return Z$b?Z$C.typeMap[Z$b]:(console.warn("Not recognize the resources suffix",Z$a),"text")},Z$b._loadTTF=function(Z$a){Z$a=Z$I.formatURL(Z$a);var Z$b=new Z$H;Z$b.complete=Z$u.create(this,this.onLoaded),Z$b.load(Z$a)},Z$b._loadImage=function(Z$a){Z$i.imgMgrLoad(Z$a,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},Z$b._loadImageComplete=function(Z$a,Z$b,Z$c){if(null!=Z$c)if(Z$c instanceof ArrayBuffer){var Z$d=new DataView(Z$c),Z$e=new laya.webgl.resource.WebGLImage(new Uint8Array(Z$c,8),Z$a,0,!1,Z$d.getUint32(0),Z$d.getUint32(4));this.onLoaded(Z$e)}else if(Z$c instanceof Z$ma)Z$C.imgMgrSet[Z$a]=Z$b,Z$i.imgMgrLock(Z$a,Z$C.imgMgrSet[Z$a]),this._url=Z$a,this.complete(Z$c);else{var Z$f=-1!=Z$a.indexOf(".png",Z$a.length-4)?6408:6407;Z$e=new laya.webgl.resource.WebGLImage(Z$c,Z$a,Z$f,!1,Z$c.width,Z$c.height);this.onLoaded(Z$e)}else this.event("error","Load image failed")},Z$b.imageCancel=function(Z$a,Z$b,Z$c){Z$i.imgMgrCancel(Z$a,this._onImageCallback)},Z$b._loadSound=function(Z$a){var Z$b=new Z$E._soundClass,Z$c=this;function Z$d(){Z$b.offAll()}Z$b.on("complete",this,function(){Z$d(),Z$c.onLoaded(Z$b)}),Z$b.on("error",this,function(){Z$d(),Z$b.dispose(),Z$c.event("error","Load sound failed")}),Z$b.load(Z$a)},Z$b.onProgress=function(Z$a){"atlas"===this._type?this.event("progress",.3*Z$a):this.event("progress",Z$a)},Z$b.onError=function(Z$a){this.event("error",Z$a)},Z$b._loadedComplete=function(Z$a,Z$b,Z$c){if(null!=Z$c)switch(this._type){case"atlas":case"plf":case"json":var Z$d=new Z$P(Z$c);this.onLoaded(JSON.parse(Z$d.readUTFBytes()));break;case"font":Z$d=new Z$P(Z$c);this.onLoaded(Z$$.parseXMLFromString(Z$d.readUTFBytes()));break;default:this.onLoaded(Z$c)}else this.event("error",Z$a)},Z$b.onLoaded=function(Z$a){var Z$b=this._type;if("plf"==Z$b)this.parsePLFData(Z$a),this.complete(Z$a);else if("image"===Z$b){var Z$c=new Z$ma(Z$a);Z$c.url=this._url,this.complete(Z$c)}else if("sound"===Z$b||"htmlimage"===Z$b||"nativeimage"===Z$b)this.complete(Z$a);else if("atlas"===Z$b){if(!Z$a.src&&!Z$a._setContext){if(!this._data){if((this._data=Z$a).meta&&Z$a.meta.image)for(var Z$d=Z$a.meta.image.split(","),Z$e=0<=this._url.indexOf("/")?"/":"\\",Z$f=this._url.lastIndexOf(Z$e),Z$i=0<=Z$f?this._url.substr(0,Z$f+1):"",Z$j=0,Z$k=Z$d.length;Z$j<Z$k;Z$j++)Z$d[Z$j]=Z$i+Z$d[Z$j];else Z$d=[this._url.replace(".json",".png")];Z$d.reverse(),Z$a.toLoads=Z$d,Z$a.pics=[]}return this.event("progress",.3+1/Z$d.length*.6),this._loadImage(Z$d.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(Z$a),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var Z$l=this._data.frames,Z$m=this._url.split("?")[0],Z$n=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:Z$m.substring(0,Z$m.lastIndexOf("."))+"/",Z$o=this._data.pics,Z$p=Z$I.formatURL(this._url),Z$q=Z$C.atlasMap[Z$p]||(Z$C.atlasMap[Z$p]=[]);Z$q.dir=Z$n;var Z$r=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var Z$s in Z$r=parseFloat(this._data.meta.scale),Z$l){var Z$t,Z$u=Z$l[Z$s],Z$v=Z$o[Z$u.frame.idx?Z$u.frame.idx:0],Z$w=Z$I.formatURL(Z$n+Z$s);Z$v.scaleRate=Z$r,Z$t=Z$ma.create(Z$v,Z$u.frame.x,Z$u.frame.y,Z$u.frame.w,Z$u.frame.h,Z$u.spriteSourceSize.x,Z$u.spriteSourceSize.y,Z$u.sourceSize.w,Z$u.sourceSize.h),Z$C.cacheRes(Z$w,Z$t),Z$C.keepCache(this._url,Z$n+Z$s),Z$t.url=Z$w,Z$q.push(Z$w)}else for(Z$s in Z$l)Z$v=Z$o[(Z$u=Z$l[Z$s]).frame.idx?Z$u.frame.idx:0],Z$w=Z$I.formatURL(Z$n+Z$s),Z$C.cacheRes(Z$w,Z$ma.create(Z$v,Z$u.frame.x,Z$u.frame.y,Z$u.frame.w,Z$u.frame.h,Z$u.spriteSourceSize.x,Z$u.spriteSourceSize.y,Z$u.sourceSize.w,Z$u.sourceSize.h)),Z$C.loadedMap[Z$w].url=Z$w,Z$C.keepCache(this._url,Z$n+Z$s),Z$q.push(Z$w);delete this._data.pics,this.complete(this._data)}else if("font"==Z$b){if(!Z$a.src)return this._data=Z$a,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var Z$x=new Z$D;Z$x.parseFont(this._data,Z$a);var Z$y=this._url.split(".fnt")[0].split("/"),Z$z=Z$y[Z$y.length-1];Z$sa.registerBitmapFont(Z$z,Z$x),this._data=Z$x,this.complete(this._data)}else if("pkm"==Z$b){var Z$A=Z$ya.create(Z$a,this._url),Z$B=new Z$ma(Z$A);Z$B.url=this._url,this.complete(Z$B)}else this.complete(Z$a)},Z$b.parsePLFData=function(Z$a){var Z$b,Z$c,Z$d;for(Z$b in Z$a)switch(Z$d=Z$a[Z$b],Z$b){case"json":case"text":for(Z$c in Z$d)Z$C.preLoadedMap[Z$I.formatURL(Z$c)]=Z$d[Z$c];break;default:for(Z$c in Z$d)Z$C.preLoadedMap[Z$I.formatURL(Z$c)]=Z$d[Z$c]}},Z$b.complete=function(Z$a){this._data=Z$a,this._customParse?this.event("loaded",Z$a instanceof Array?[Z$a]:Z$a):(Z$C._loaders.push(this),Z$C._isWorking||Z$C.checkNext())},Z$b.endLoad=function(Z$a){Z$a&&(this._data=Z$a),this._cache&&Z$C.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},Z$q(0,Z$b,"url",function(){return this._url}),Z$q(0,Z$b,"data",function(){return this._data}),Z$q(0,Z$b,"cache",function(){return this._cache}),Z$q(0,Z$b,"type",function(){return this._type}),Z$C.checkNext=function(){Z$C._isWorking=!0;for(var Z$a=Z$O.now();Z$C._startIndex<Z$C._loaders.length;)if(Z$O.now(),Z$C._loaders[Z$C._startIndex].endLoad(),Z$C._startIndex++,Z$O.now()-Z$a>Z$C.maxTimeOut)return console.warn("loader callback cost a long time:"+(Z$O.now()-Z$a)+" url="+Z$C._loaders[Z$C._startIndex-1].url),void Z$z.timer.frameOnce(1,null,Z$C.checkNext);Z$C._loaders.length=0,Z$C._startIndex=0,Z$C._isWorking=!1},Z$C.clearRes=function(Z$a,Z$b){if(null!=Z$a){void 0===Z$b&&(Z$b=!1),Z$a=Z$I.formatURL(Z$a);var Z$c=Z$C.getAtlas(Z$a);if(Z$c){for(var Z$d=0,Z$e=Z$c.length;Z$d<Z$e;Z$d++){var Z$f=Z$c[Z$d],Z$i=Z$C.getRes(Z$f);delete Z$C.loadedMap[Z$f],Z$C.clearCache(Z$a.substring(Z$I.basePath.length),Z$f.substring(Z$I.basePath.length)),Z$i&&Z$i.destroy(Z$b)}Z$c.length=0,delete Z$C.atlasMap[Z$a],delete Z$C.loadedMap[Z$a]}else{var Z$j=Z$C.loadedMap[Z$a];Z$j&&(delete Z$C.loadedMap[Z$a],Z$j instanceof laya.resource.Texture&&Z$j.bitmap&&Z$j.destroy(Z$b))}}},Z$C.clearTextureRes=function(Z$a){Z$a=Z$I.formatURL(Z$a);var Z$b=laya.net.Loader.getAtlas(Z$a),Z$c=Z$b&&0<Z$b.length?laya.net.Loader.getRes(Z$b[0]):laya.net.Loader.getRes(Z$a);Z$c&&Z$c.bitmap&&(Z$J.isConchApp&&!Z$J.isConchWebGL?Z$c.bitmap.source.releaseTexture&&Z$c.bitmap.source.releaseTexture():null==Z$c.bitmap._atlaser&&Z$c.bitmap.releaseResource(!0))},Z$C.getRes=function(Z$a){return Z$C.loadedMap[Z$I.formatURL(Z$a)]},Z$C.getAtlas=function(Z$a){return Z$C.atlasMap[Z$I.formatURL(Z$a)]},Z$C.cacheRes=function(Z$a,Z$b){Z$a=Z$I.formatURL(Z$a),null!=Z$C.loadedMap[Z$a]?console.warn("Resources already exist,is repeated loading:",Z$a):Z$C.loadedMap[Z$a]=Z$b},Z$C.setGroup=function(Z$a,Z$b){Z$C.groupMap[Z$b]||(Z$C.groupMap[Z$b]=[]),Z$C.groupMap[Z$b].push(Z$a)},Z$C.clearResByGroup=function(Z$a){if(Z$C.groupMap[Z$a]){var Z$b=Z$C.groupMap[Z$a],Z$c=0,Z$d=Z$b.length;for(Z$c=0;Z$c<Z$d;Z$c++)Z$C.clearRes(Z$b[Z$c]);Z$b.length=0}},Z$C.keepCache=function(Z$a,Z$b){if(Z$a&&Z$b){var Z$c=Z$C.cacheSet[Z$b];Z$c?-1==Z$c.indexOf(Z$a)&&Z$c.push(Z$a):Z$C.cacheSet[Z$b]=[Z$a]}},Z$C.clearCache=function(Z$a,Z$b){if(Z$a&&Z$b){var Z$c=Z$C.cacheSet[Z$b];if(Z$c){var Z$d=Z$c.indexOf(Z$a);if(-1!==Z$d){var Z$e=Z$c.length-1;0==Z$e?(delete Z$C.cacheSet[Z$b],0<Z$C.imgMgrSet[Z$b]?Z$i.imgMgrFree(Z$b,Z$C.imgMgrSet[Z$b]):Z$C.clearRes(Z$b,!0)):(Z$c[Z$d]=Z$c[Z$e],Z$c.length=Z$e)}}}},Z$C.saveObject=function(Z$a,Z$b,Z$c){if(Z$b&&Z$a){var Z$d=Z$C.objectSet[Z$a];Z$d?(console.warn("Loader.saveObject: "+Z$a),Z$d[0]=Z$b,Z$d[1]=Z$c):Z$C.objectSet[Z$a]=[Z$b,Z$c,[]]}},Z$C.findObject=function(Z$a){if(Z$a){var Z$b=Z$C.objectSet[Z$a];if(Z$b)return Z$b[0]}return null},Z$C.keepObject=function(Z$a,Z$b){if(Z$a&&Z$b){var Z$c=Z$C.objectSet[Z$b];Z$c&&-1===Z$c[2].indexOf(Z$a)&&Z$c[2].push(Z$a)}},Z$C.clearObject=function(Z$a,Z$b){if(Z$a&&Z$b){var Z$c=Z$C.objectSet[Z$b];if(Z$c){var Z$d=Z$c[2],Z$e=Z$d.indexOf(Z$a);if(-1!==Z$e){var Z$f=Z$d.length-1;0==Z$f?(delete Z$C.objectSet[Z$b],Z$c[1]&&Z$c[1].call(null,Z$c[0])):(Z$d[Z$e]=Z$d[Z$f],Z$d.length=Z$f)}}}},Z$C.TEXT="text",Z$C.JSON="json",Z$C.XML="xml",Z$C.BUFFER="arraybuffer",Z$C.IMAGE="image",Z$C.SOUND="sound",Z$C.ATLAS="atlas",Z$C.FONT="font",Z$C.TTF="ttf",Z$C.PLF="plf",Z$C.PKM="pkm",Z$C.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},Z$C.parserMap={},Z$C.groupMap={},Z$C.maxTimeOut=100,Z$C.loadedMap={},Z$C.preLoadedMap={},Z$C.atlasMap={},Z$C._loaders=[],Z$C._isWorking=!1,Z$C._startIndex=0,Z$C.imgCache={},Z$C.cacheSet={},Z$C.objectSet={},Z$C.imgMgrSet={},Z$C}(),Z$ka=function(Z$a){var Z$o;function Z$p(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},Z$p.__super.call(this);for(var Z$a=0;Z$a<this._maxPriority;Z$a++)this._resInfos[Z$a]=[]}Z$m(Z$p,"laya.net.LoaderManager",Z$l);var Z$b=Z$p.prototype;return Z$b.create=function(Z$a,Z$c,Z$b,Z$d,Z$e,Z$f,Z$i,Z$j){if(null==Z$f&&(Z$f=2),null==Z$i&&(Z$i=!0),Z$a instanceof Array){var Z$k=Z$a,Z$l=Z$k.length,Z$m=0;if(Z$b)var Z$n=Z$u.create(Z$b.caller,Z$b.method,Z$b.args,!1);for(var Z$o=0;Z$o<Z$l;Z$o++){var Z$p=Z$k[Z$o];"string"==typeof Z$p&&(Z$p=Z$k[Z$o]={url:Z$p}),Z$p.progress=0}for(Z$o=0;Z$o<Z$l;Z$o++){Z$p=Z$k[Z$o];var Z$q=Z$b?Z$u.create(null,Z$t,[Z$p],!1):null,Z$r=Z$b||Z$c?Z$u.create(null,Z$s,[Z$p]):null;this._create(Z$p.url,Z$r,Z$q,Z$p.clas||Z$d,Z$p.params||Z$e,null!=Z$p.priority&&0<=Z$p.priority?Z$p.priority:Z$f,Z$i,Z$p.group||Z$j)}function Z$s(Z$a,Z$b){Z$m++,Z$a.progress=1,Z$m===Z$l&&Z$c&&Z$c.run()}function Z$t(Z$a,Z$b){Z$a.progress=Z$b;for(var Z$c=0,Z$d=0;Z$d<Z$l;Z$d++){Z$c+=Z$k[Z$d].progress}var Z$e=Z$c/Z$l;Z$n.runWith(Z$e)}return!0}return this._create(Z$a,Z$c,Z$b,Z$d,Z$e,Z$f,Z$i,Z$j)},Z$b._create=function(Z$b,Z$c,Z$a,Z$d,Z$e,Z$f,Z$i,Z$j){Z$b&&""!=Z$b||console.error("加载的url不合法 "+Z$b),null==Z$f&&(Z$f=2),null==Z$i&&(Z$i=!0);var Z$k=Z$I.formatURL(Z$b),Z$l=this.getRes(Z$k);if(Z$l)!Z$l.hasOwnProperty("loaded")||Z$l.loaded?(Z$a&&Z$a.runWith(1),Z$c&&Z$c.run()):Z$c&&Z$z.loader._createListener(Z$b,Z$c.caller,Z$c.method,Z$c.args,!0,!1);else{var Z$m=Z$$.getFileExtension(Z$b),Z$n=Z$p.createMap[Z$m];if(!Z$n)throw new Error("LoaderManager:unknown file("+Z$b+") extension with: "+Z$m+".");Z$d||(Z$d=Z$n[0]);var Z$o=Z$n[1];if("atlas"==Z$m)this.load(Z$b,Z$c,Z$a,Z$o,Z$f,Z$i);else{Z$d===Z$ma&&(Z$o="htmlimage"),(Z$l=Z$d?new Z$d:null).hasOwnProperty("_loaded")&&(Z$l._loaded=!1),Z$l._setUrl(Z$b),Z$j&&Z$l._setGroup(Z$j),this._createLoad(Z$l,Z$b,Z$u.create(null,function(Z$a){Z$l&&!Z$l.destroyed&&Z$a&&Z$l.onAsynLoaded.call(Z$l,Z$b,Z$a,Z$e),Z$c&&Z$c.run();Z$z.loader.event(Z$b)}),Z$a,Z$o,Z$f,!1,Z$j,!0),Z$i&&this.cacheRes(Z$k,Z$l)}}return Z$l},Z$b.load=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){Z$a&&""!=Z$a||console.error("加载的url不合法 "+Z$a);var Z$k=this;if(null==Z$e&&(Z$e=2),null==Z$f&&(Z$f=!0),void 0===Z$j&&(Z$j=!1),Z$a instanceof Array)return this._loadAssets(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i);var Z$l=Z$ja.getRes(Z$a);if(null!=Z$l)Z$z.timer.frameOnce(1,null,function(){Z$c&&Z$c.runWith(1),Z$b&&Z$b.runWith(Z$l),Z$k._loaderCount||Z$k.event("complete")});else{var Z$m=Z$p._resMap[Z$a];Z$m?(Z$b&&Z$m._createListener("complete",Z$b.caller,Z$b.method,Z$b.args,!1,!1),Z$c&&Z$m._createListener("progress",Z$c.caller,Z$c.method,Z$c.args,!1,!1)):((Z$m=this._infoPool.length?this._infoPool.pop():new Z$o).url=Z$a,Z$m.clas=null,Z$m.type=Z$d,Z$m.cache=Z$f,Z$m.group=Z$i,Z$m.ignoreCache=Z$j,Z$m.priority=Z$e,Z$b&&Z$m.on("complete",Z$b.caller,Z$b.method,Z$b.args),Z$c&&Z$m.on("progress",Z$c.caller,Z$c.method,Z$c.args),Z$p._resMap[Z$a]=Z$m,Z$e=Z$e<this._maxPriority?0<=Z$e?Z$e:0:this._maxPriority-1,this._resInfos[Z$e].push(Z$m),this._next())}return this},Z$b.cancel=function(Z$a,Z$b,Z$c){if(Z$l=Z$p._resMap[Z$a]){Z$b&&Z$l.off("complete",Z$b.caller,Z$b.method,!1),Z$c&&Z$l.off("progress",Z$c.caller,Z$c.method,!1);var Z$d=Z$l.getListener("complete"),Z$e=Z$l.getListener("progress");if(!(Z$d&&Z$d.head||Z$e&&Z$e.head)){if(Z$l.loader){var Z$f=Z$l.loader;Z$f.imageCancel(Z$a),Z$f.offAll(),Z$f._data=null,Z$f._customParse=!1,Z$f._url=null,Z$f._class=null,Z$f._type=null,this._loaders.push(Z$f),this._loaderCount--,delete this._loaderMap[Z$l.url]}for(var Z$i=0;Z$i<this._maxPriority;Z$i++)for(var Z$j=this._resInfos[Z$i],Z$k=Z$j.length-1;-1<Z$k;Z$k--){var Z$l;(Z$l=Z$j[Z$k])&&Z$l.url===Z$a&&(Z$j[Z$k]=null,Z$l.destroy(),Z$l.offAll(),this._infoPool.push(Z$l))}delete Z$p._resMap[Z$a],this._next()}}},Z$b._createLoad=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){var Z$l=this;if(null==Z$f&&(Z$f=2),null==Z$i&&(Z$i=!0),void 0===Z$k&&(Z$k=!1),Z$b instanceof Array)return this._loadAssets(Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j);var Z$m=Z$ja.getRes(Z$b);if(null!=Z$m)Z$z.timer.frameOnce(1,null,function(){Z$d&&Z$d.runWith(1),Z$c&&Z$c.runWith(Z$m),Z$l._loaderCount||Z$l.event("complete")});else{var Z$n=Z$p._resMap[Z$b];Z$n?(Z$c&&Z$n._createListener("complete",Z$c.caller,Z$c.method,Z$c.args,!1,!1),Z$d&&Z$n._createListener("progress",Z$d.caller,Z$d.method,Z$d.args,!1,!1)):((Z$n=this._infoPool.length?this._infoPool.pop():new Z$o).url=Z$b,Z$n.clas=Z$a,Z$n.type=Z$e,Z$n.cache=Z$i,Z$n.group=Z$j,Z$n.ignoreCache=Z$k,Z$n.priority=Z$f,Z$c&&Z$n.on("complete",Z$c.caller,Z$c.method,Z$c.args),Z$d&&Z$n.on("progress",Z$d.caller,Z$d.method,Z$d.args),Z$p._resMap[Z$b]=Z$n,Z$f=Z$f<this._maxPriority?0<=Z$f?Z$f:0:this._maxPriority-1,this._resInfos[Z$f].push(Z$n),this._next())}return this},Z$b._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var Z$a=0;Z$a<this._maxPriority;Z$a++)for(var Z$b=this._resInfos[Z$a];0<Z$b.length;){var Z$c=Z$b.shift();if(Z$c)return this._doLoad(Z$c)}this._loaderCount||this.event("complete")}},Z$b._doLoad=function(Z$b){var Z$c=this._loaders.length?this._loaders.pop():new Z$ja;this._loaderCount++,(this._loaderMap[Z$b.url]=Z$c).on("complete",null,Z$e),Z$c.on("progress",null,function(Z$a){Z$b.event("progress",Z$a)}),Z$c.on("error",null,function(Z$a){Z$e(null)}),Z$b.loader=Z$c;var Z$d=this;function Z$e(Z$a){Z$c.offAll(),Z$c._data=null,Z$c._customParse=!1,Z$c._url=null,Z$c._class=null,Z$c._type=null,Z$d._loaders.push(Z$c),Z$d._loaderCount--,delete Z$d._loaderMap[Z$b.url],Z$d._endLoad(Z$b,Z$a instanceof Array?[Z$a]:Z$a),Z$d._next()}Z$c._class=Z$b.clas,1<=Z$b.priority?(Z$c.priority=Z$b.priority,Z$c.realTime=!1):(Z$c.priority=0,Z$c.realTime=!0),Z$c.load(Z$b.url,Z$b.type,Z$b.cache,Z$b.group,Z$b.ignoreCache)},Z$b._endLoad=function(Z$a,Z$b){var Z$c=Z$a.url;if(null==Z$b){var Z$d=this._failRes[Z$c]||0;if(Z$d<this.retryNum)return console.warn("[warn]Retry to load:",Z$c),this._failRes[Z$c]=Z$d+1,void Z$z.timer.once(this.retryDelay,this,this._addReTry,[Z$a],!1);console.warn("[error]Failed to load:",Z$c),this.event("error",Z$c)}this._failRes[Z$c]&&(this._failRes[Z$c]=0),delete Z$p._resMap[Z$c],Z$a.event("complete",Z$b),Z$a.destroy(),Z$a.offAll(),this._infoPool.push(Z$a)},Z$b._addReTry=function(Z$a){this._resInfos[this._maxPriority-1].push(Z$a),this._next()},Z$b.clearRes=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!1),Z$ja.clearRes(Z$a,Z$b)},Z$b.getRes=function(Z$a){return Z$ja.getRes(Z$a)},Z$b.cacheRes=function(Z$a,Z$b){Z$ja.cacheRes(Z$a,Z$b)},Z$b.clearTextureRes=function(Z$a){Z$ja.clearTextureRes(Z$a)},Z$b.setGroup=function(Z$a,Z$b){Z$ja.setGroup(Z$a,Z$b)},Z$b.clearResByGroup=function(Z$a){Z$ja.clearResByGroup(Z$a)},Z$b.clearUnLoaded=function(){for(var Z$a=0;Z$a<this._maxPriority;Z$a++){for(var Z$b=this._resInfos[Z$a],Z$c=Z$b.length-1;-1<Z$c;Z$c--){var Z$d=Z$b[Z$c];Z$d&&(Z$d.destroy(),Z$d.offAll(),this._infoPool.push(Z$d))}Z$b.length=0}this._loaderCount=0,Z$p._resMap={}},Z$b.cancelLoadByUrls=function(Z$a){if(Z$a)for(var Z$b=0,Z$c=Z$a.length;Z$b<Z$c;Z$b++)this.cancelLoadByUrl(Z$a[Z$b])},Z$b.cancelLoadByUrl=function(Z$a){for(var Z$b=0;Z$b<this._maxPriority;Z$b++)for(var Z$c=this._resInfos[Z$b],Z$d=Z$c.length-1;-1<Z$d;Z$d--){var Z$e=Z$c[Z$d];Z$e&&Z$e.url===Z$a&&(Z$c[Z$d]=null,Z$e.destroy(),Z$e.offAll(),this._infoPool.push(Z$e))}Z$p._resMap[Z$a]&&delete Z$p._resMap[Z$a]},Z$b._loadAssets=function(Z$a,Z$c,Z$i,Z$b,Z$d,Z$e,Z$f){null==Z$d&&(Z$d=2),null==Z$e&&(Z$e=!0);for(var Z$j=Z$a.length,Z$k=0,Z$l=0,Z$m=[],Z$n=!0,Z$o=0;Z$o<Z$j;Z$o++){var Z$p=Z$a[Z$o];if(!Z$p)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+Z$a);"string"==typeof Z$p&&(Z$p={url:Z$p,type:Z$b,size:1,priority:Z$d}),Z$p.size||(Z$p.size=1),Z$p.progress=0,Z$l+=Z$p.size,Z$m.push(Z$p);var Z$q=Z$i?Z$u.create(null,Z$t,[Z$p],!1):null,Z$r=Z$c||Z$i?Z$u.create(null,Z$s,[Z$p]):null;this.load(Z$p.url,Z$r,Z$q,Z$p.type,null!=Z$p.priority&&0<=Z$p.priority?Z$p.priority:2,Z$e,Z$p.group||Z$f)}function Z$s(Z$a,Z$b){Z$k++,Z$a.progress=1,Z$b||(Z$n=!1),Z$k===Z$j&&Z$c&&Z$c.runWith(Z$n)}function Z$t(Z$a,Z$b){if(null!=Z$i){Z$a.progress=Z$b;for(var Z$c=0,Z$d=0;Z$d<Z$m.length;Z$d++){var Z$e=Z$m[Z$d];Z$c+=Z$e.size*Z$e.progress}var Z$f=Z$c/Z$l;Z$i.runWith(Z$f)}}return this},Z$p.cacheRes=function(Z$a,Z$b){Z$ja.cacheRes(Z$a,Z$b)},Z$p._resMap={},Z$k(Z$p,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),Z$p.__init$=function(){Z$o=function(Z$a){function Z$b(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,Z$b.__super.call(this)}return Z$m(Z$b,"",Z$l),Z$b.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},Z$b}()},Z$p}(),Z$la=(function(Z$a){function Z$e(Z$a){Z$e.__super.call(this),Z$a||(Z$a=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var Z$b=0,Z$c=0,Z$d=0;Z$d<20;Z$d++)Z$d%5!=4?this._mat[Z$b++]=Z$a[Z$d]:this._alpha[Z$c++]=Z$a[Z$d];this._action=Z$F.createFilterAction(32),this._action.data=this}Z$m(Z$e,"laya.filters.ColorFilter",Z$t);var Z$b=Z$e.prototype;Z$z.imps(Z$b,{"laya.filters.IFilter":!0}),Z$b.callNative=function(Z$a){Z$a._$P.cf=this;Z$a.conchModel&&Z$a.conchModel.setFilterMatrix&&Z$a.conchModel.setFilterMatrix(this._mat,this._alpha)},Z$q(0,Z$b,"type",function(){return 32}),Z$q(0,Z$b,"action",function(){return this._action})}(),function(Z$a){function Z$d(Z$a,Z$b,Z$c){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===Z$b&&(Z$b=0),Z$d.__super.call(this),this._byteClass=Z$c||Z$P,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,Z$a&&0<Z$b&&Z$b<65535&&this.connect(Z$a,Z$b)}Z$m(Z$d,"laya.net.Socket",Z$l);var Z$b=Z$d.prototype;Z$b.connect=function(Z$a,Z$b){var Z$c="ws://"+Z$a+":"+Z$b;Z$c="https:"==Z$O.window.location.protocol?"wss://"+Z$a+":"+Z$b:"ws://"+Z$a+":"+Z$b,this.connectByUrl(Z$c)},Z$b.connectByUrl=function(Z$a){var Z$b=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new Z$O.window.WebSocket(Z$a,this.protocols):this._socket=new Z$O.window.WebSocket(Z$a),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(Z$a){Z$b._onOpen(Z$a)},this._socket.onmessage=function(Z$a){Z$b._onMessage(Z$a)},this._socket.onclose=function(Z$a){Z$b._onClose(Z$a)},this._socket.onerror=function(Z$a){Z$b._onError(Z$a)}},Z$b.cleanSocket=function(){try{this._socket.close()}catch(Z$a){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},Z$b.close=function(){if(null!=this._socket)try{this._socket.close()}catch(Z$a){}},Z$b._onOpen=function(Z$a){this._connected=!0,this.event("open",Z$a)},Z$b._onMessage=function(Z$a){if(Z$a&&Z$a.data){var Z$b=Z$a.data;if(this.disableInput&&Z$b)this.event("message",Z$b);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var Z$c=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,Z$b&&("string"==typeof Z$b?this._input.writeUTFBytes(Z$b):this._input.writeArrayBuffer(Z$b),this._addInputPosition=this._input.pos,this._input.pos=Z$c),this.event("message",Z$b)}}},Z$b._onClose=function(Z$a){this._connected=!1,this.event("close",Z$a)},Z$b._onError=function(Z$a){this.event("error",Z$a)},Z$b.send=function(Z$a){this._socket.send(Z$a)},Z$b.flush=function(){if(this._output&&0<this._output.length){var Z$b;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(Z$a){Z$b=Z$a}this._output.endian=this.endian,this._output.clear(),Z$b&&this.event("error",Z$b)}},Z$q(0,Z$b,"input",function(){return this._input}),Z$q(0,Z$b,"output",function(){return this._output}),Z$q(0,Z$b,"connected",function(){return this._connected}),Z$q(0,Z$b,"endian",function(){return this._endian},function(Z$a){this._endian=Z$a,null!=this._input&&(this._input.endian=Z$a),null!=this._output&&(this._output.endian=Z$a)}),Z$d.LITTLE_ENDIAN="littleEndian",Z$d.BIG_ENDIAN="bigEndian"}(),function(Z$a){function Z$j(){Z$j.__super.call(this),this._$1__id=++Z$j._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(Z$j._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,Z$N.currentResourceManager&&Z$N.currentResourceManager.addResource(this)}Z$m(Z$j,"laya.resource.Resource",Z$l);var Z$b=Z$j.prototype;return Z$z.imps(Z$b,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),Z$b._setUrl=function(Z$a){var Z$b;this._url!==Z$a&&(this._url&&((Z$b=Z$j._urlResourcesMap[this._url]).splice(Z$b.indexOf(this),1),0===Z$b.length&&delete Z$j._urlResourcesMap[this._url]),Z$a&&((Z$b=Z$j._urlResourcesMap[Z$a])||(Z$j._urlResourcesMap[Z$a]=Z$b=[]),Z$b.push(this)),this._url=Z$a)},Z$b._getGroup=function(){return this._group},Z$b._setGroup=function(Z$a){var Z$b;this._group!==Z$a&&(this._group&&((Z$b=Z$j._groupResourcesMap[this._group]).splice(Z$b.indexOf(this),1),0===Z$b.length&&delete Z$j._groupResourcesMap[this._group]),Z$a&&((Z$b=Z$j._groupResourcesMap[Z$a])||(Z$j._groupResourcesMap[Z$a]=Z$b=[]),Z$b.push(this)),this._group=Z$a)},Z$b._addReference=function(){this._referenceCount++},Z$b._removeReference=function(){this._referenceCount--},Z$b._clearReference=function(){this._referenceCount=0},Z$b._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},Z$b.recreateResource=function(){this.completeCreate()},Z$b.disposeResource=function(){},Z$b.activeResource=function(Z$a){void 0===Z$a&&(Z$a=!1),this._lastUseFrameCount=Z$X.loopCount,!this._destroyed&&this.__loaded&&(this._released||Z$a)&&this.recreateResource()},Z$b.releaseResource=function(Z$a){return void 0===Z$a&&(Z$a=!0),!(!Z$a&&this.lock)&&(!(this._released&&!Z$a)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},Z$b.onAsynLoaded=function(Z$a,Z$b,Z$c){throw new Error("Resource: must override this function!")},Z$b.destroy=function(){var Z$a;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete Z$j._idResourcesMap[this.id],this._url&&((Z$a=Z$j._urlResourcesMap[this._url])&&(Z$a.splice(Z$a.indexOf(this),1),0===Z$a.length&&delete Z$j._urlResourcesMap[this.url]),Z$ja.clearRes(this._url),this.__loaded||Z$F.cancelLoadByUrl(this._url)),this._group&&((Z$a=Z$j._groupResourcesMap[this._group]).splice(Z$a.indexOf(this),1),0===Z$a.length&&delete Z$j._groupResourcesMap[this.url]))},Z$b.completeCreate=function(){this._released=!1,this.event("recovered",this)},Z$b.dispose=function(){this.destroy()},Z$q(0,Z$b,"memorySize",function(){return this._memorySize},function(Z$a){var Z$b=Z$a-this._memorySize;this._memorySize=Z$a,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,Z$b),this.resourceManager&&this.resourceManager.addSize(Z$b)}),Z$q(0,Z$b,"_loaded",null,function(Z$a){this.__loaded=Z$a}),Z$q(0,Z$b,"loaded",function(){return this.__loaded}),Z$q(0,Z$b,"id",function(){return this._$1__id}),Z$q(0,Z$b,"destroyed",function(){return this._destroyed}),Z$q(0,Z$b,"group",function(){return this._getGroup()},function(Z$a){this._setGroup(Z$a)}),Z$q(0,Z$b,"resourceManager",function(){return this._resourceManager}),Z$q(0,Z$b,"url",function(){return this._url}),Z$q(0,Z$b,"released",function(){return this._released}),Z$q(0,Z$b,"referenceCount",function(){return this._referenceCount}),Z$j.getResourceByID=function(Z$a){return Z$j._idResourcesMap[Z$a]},Z$j.getResourceByURL=function(Z$a,Z$b){return void 0===Z$b&&(Z$b=0),null==Z$j._urlResourcesMap[Z$a]?null:Z$j._urlResourcesMap[Z$a][Z$b]},Z$j.getResourceCountByURL=function(Z$a){return Z$j._urlResourcesMap[Z$a].length},Z$j.destroyUnusedResources=function(Z$a){var Z$b;if(Z$a){var Z$c=Z$j._groupResourcesMap[Z$a];if(Z$c)for(var Z$d=Z$c.slice(),Z$e=0,Z$f=Z$d.length;Z$e<Z$f;Z$e++)(Z$b=Z$d[Z$e]).lock||0!==Z$b._referenceCount||Z$b.destroy()}else for(var Z$i in Z$j._idResourcesMap)(Z$b=Z$j._idResourcesMap[Z$i]).lock||0!==Z$b._referenceCount||Z$b.destroy()},Z$j._uniqueIDCounter=0,Z$j._idResourcesMap={},Z$j._urlResourcesMap={},Z$j._groupResourcesMap={},Z$j}()),Z$ma=function(Z$a){function Z$C(Z$a,Z$b){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,Z$C.__super.call(this),Z$a&&null!=Z$a._addReference&&Z$a._addReference(),this.setTo(Z$a,Z$b)}Z$m(Z$C,"laya.resource.Texture",Z$l);var Z$b=Z$C.prototype;return Z$b._setUrl=function(Z$a){this.url=Z$a},Z$b.setTo=function(Z$a,Z$b){if(Z$a instanceof Z$i.HTMLElement){var Z$c=Z$va.create("2D",Z$a);this.bitmap=Z$c}else this.bitmap=Z$a;if(this.uv=Z$b||Z$C.DEF_UV,Z$a){this._w=Z$a.width,this._h=Z$a.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var Z$d=this;if(this._loaded)Z$F.addToAtlas&&Z$F.addToAtlas(Z$d);else{var Z$e=Z$a;Z$e instanceof laya.resource.HTMLImage&&Z$e.image&&Z$e.image.addEventListener("load",function(Z$a){Z$F.addToAtlas&&Z$F.addToAtlas(Z$d)},!1)}}},Z$b.active=function(){this.bitmap&&this.bitmap.activeResource()},Z$b.destroy=function(Z$a){if(void 0===Z$a&&(Z$a=!1),this.alphaTexture&&(this.alphaTexture.destroy(Z$a),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var Z$b=this.bitmap;Z$a?(Z$J.isConchApp&&Z$b.source&&Z$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,Z$b.dispose(),Z$b._clearReference()):(Z$b._removeReference(),0==Z$b.referenceCount&&(Z$J.isConchApp&&Z$b.source&&Z$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,Z$b.dispose())),this.url&&this===Z$z.loader.getRes(this.url)&&Z$z.loader.clearRes(this.url,Z$a),this._loaded=!1}},Z$b.load=function(Z$a){var Z$b=this;this._loaded=!1,Z$a=Z$I.customFormat(Z$a);var Z$c=this.bitmap||(this.bitmap=Z$ya.create(Z$a));Z$c.uri=Z$a,Z$c&&Z$c._addReference();var Z$d=this;Z$c.onload=function(){Z$c.onload=null,Z$d._loaded=!0,Z$b.sourceWidth=Z$b._w=Z$c.width,Z$b.sourceHeight=Z$b._h=Z$c.height,Z$d.event("loaded",this),Z$F.addToAtlas&&Z$F.addToAtlas(Z$d)}},Z$b.addTextureToAtlas=function(Z$a){Z$F.addTextureToAtlas(this)},Z$b.getPixels=function(Z$a,Z$b,Z$c,Z$d){if(Z$J.isConchApp){var Z$e=this.bitmap;if(Z$e.source&&Z$e.source.getImageData){var Z$f=Z$e.source.getImageData(Z$a,Z$b,Z$c,Z$d),Z$i=new Uint8Array(Z$f);return Array.from(Z$i)}return null}return Z$J.isWebGL?Z$F.getTexturePixels(this,Z$a,Z$b,Z$c,Z$d):(Z$O.canvas.size(Z$c,Z$d),Z$O.canvas.clear(),Z$O.context.drawTexture(this,-Z$a,-Z$b,this.width,this.height,0,0),Z$O.context.getImageData(0,0,Z$c,Z$d).data)},Z$b.onAsynLoaded=function(Z$a,Z$b){if(Z$b){if("function"!=typeof Z$b._addReference)throw new Error("bitmap._addReference is not a function. "+Z$b.className+" "+typeof Z$b._addReference+" "+Z$b.constructor);Z$b._addReference()}this.setTo(Z$b,this.uv),this._loaded&&this.event("loaded",this)},Z$q(0,Z$b,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),Z$q(0,Z$b,"loaded",function(){return this._loaded}),Z$q(0,Z$b,"released",function(){return!this.bitmap||this.bitmap.released}),Z$q(0,Z$b,"width",function(){return this._w?this._w:this.uv&&this.uv!==Z$C.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(Z$a){this._w=Z$a,this.sourceWidth||(this.sourceWidth=Z$a)}),Z$q(0,Z$b,"repeat",function(){return!Z$J.isWebGL||!this.bitmap||this.bitmap.repeat},function(Z$a){Z$a&&Z$J.isWebGL&&this.bitmap&&(this.bitmap.repeat=Z$a)&&(this.bitmap.enableMerageInAtlas=!1)}),Z$q(0,Z$b,"height",function(){return this._h?this._h:this.uv&&this.uv!==Z$C.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(Z$a){this._h=Z$a,this.sourceHeight||(this.sourceHeight=Z$a)}),Z$q(0,Z$b,"isLinearSampling",function(){return!Z$J.isWebGL||9728!=this.bitmap.minFifter},function(Z$a){!Z$a&&Z$J.isWebGL&&(Z$a||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),Z$C.moveUV=function(Z$a,Z$b,Z$c){for(var Z$d=0;Z$d<8;Z$d+=2)Z$c[Z$d]+=Z$a,Z$c[Z$d+1]+=Z$b;return Z$c},Z$C.create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){void 0===Z$f&&(Z$f=0),void 0===Z$i&&(Z$i=0),void 0===Z$j&&(Z$j=0),void 0===Z$k&&(Z$k=0);var Z$l=Z$a instanceof laya.resource.Texture,Z$m=Z$l?Z$a.uv:Z$C.DEF_UV,Z$n=Z$l?Z$a.bitmap:Z$a,Z$o=Z$F.isAtlas(Z$n);if(Z$o){var Z$p=Z$n._atlaser,Z$q=Z$a._atlasID;if(-1==Z$q)throw new Error("create texture error");Z$n=Z$p._inAtlasTextureBitmapValue[Z$q],Z$m=Z$p._inAtlasTextureOriUVValue[Z$q]}var Z$r=new Z$C(Z$n,null);Z$n.width&&Z$b+Z$d>Z$n.width&&(Z$d=Z$n.width-Z$b),Z$n.height&&Z$c+Z$e>Z$n.height&&(Z$e=Z$n.height-Z$c),Z$r.width=Z$d,Z$r.height=Z$e,Z$r.offsetX=Z$f,Z$r.offsetY=Z$i,Z$r.sourceWidth=Z$j||Z$d,Z$r.sourceHeight=Z$k||Z$e;var Z$s=1/Z$n.width,Z$t=1/Z$n.height;Z$b*=Z$s,Z$c*=Z$t,Z$d*=Z$s,Z$e*=Z$t;var Z$u=Z$r.uv[0],Z$v=Z$r.uv[1],Z$w=Z$r.uv[4],Z$x=Z$r.uv[5],Z$y=Z$w-Z$u,Z$z=Z$x-Z$v,Z$A=Z$C.moveUV(Z$m[0],Z$m[1],[Z$b,Z$c,Z$b+Z$d,Z$c,Z$b+Z$d,Z$c+Z$e,Z$b,Z$c+Z$e]);Z$r.uv=[Z$u+Z$A[0]*Z$y,Z$v+Z$A[1]*Z$z,Z$w-(1-Z$A[2])*Z$y,Z$v+Z$A[3]*Z$z,Z$w-(1-Z$A[4])*Z$y,Z$x-(1-Z$A[5])*Z$z,Z$u+Z$A[6]*Z$y,Z$x-(1-Z$A[7])*Z$z],Z$o&&Z$r.addTextureToAtlas();var Z$B=Z$n.scaleRate;return Z$B&&1!=Z$B?(Z$r.sourceWidth/=Z$B,Z$r.sourceHeight/=Z$B,Z$r.width/=Z$B,Z$r.height/=Z$B,Z$r.scaleRate=Z$B,Z$r.offsetX/=Z$B,Z$r.offsetY/=Z$B):Z$r.scaleRate=1,Z$r},Z$C.createFromTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$a.scaleRate;1!=Z$f&&(Z$b*=Z$f,Z$c*=Z$f,Z$d*=Z$f,Z$e*=Z$f);var Z$i=Z$B.TEMP.setTo(Z$b-Z$a.offsetX,Z$c-Z$a.offsetY,Z$d,Z$e),Z$j=Z$i.intersection(Z$C._rect1.setTo(0,0,Z$a.width,Z$a.height),Z$C._rect2);if(!Z$j)return null;var Z$k=Z$C.create(Z$a,Z$j.x,Z$j.y,Z$j.width,Z$j.height,Z$j.x-Z$i.x,Z$j.y-Z$i.y,Z$d,Z$e);if(Z$k.bitmap&&Z$k.bitmap._removeReference)return Z$k.bitmap._removeReference(),Z$k;var Z$l="bitmap:"+(Z$k.bitmap?Z$k.bitmap.constructor?Z$k.bitmap.constructor.name:Z$k.bitmap.__className:"")+", url:"+(Z$a.url+" | "+(Z$k.bitmap?Z$k.bitmap.url:Z$a.url))+", x="+Z$b+",y="+Z$c+",width="+Z$d+",height="+Z$e+", result="+(Z$j?Z$j.x+","+Z$j.y+","+Z$j.width+","+Z$j.height:"null")+", rect="+Z$i.x+","+Z$i.y+","+Z$i.width+","+Z$i.height;throw new Error("报错：bitmap._removeReference is not a function  "+Z$l)},Z$C.DEF_UV=[0,0,1,0,1,1,0,1],Z$C.INV_UV=[0,1,1,1,1,0,0,0],Z$C._rect1=new Z$B,Z$C._rect2=new Z$B,Z$C}(),Z$a=function(Z$a){var Z$j;function Z$f(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,Z$f.__super.call(this)}Z$m(Z$f,"laya.utils.TimeLine",Z$l);var Z$b=Z$f.prototype;return Z$b.to=function(Z$a,Z$b,Z$c,Z$d,Z$e){return void 0===Z$e&&(Z$e=0),this._create(Z$a,Z$b,Z$c,Z$d,Z$e,!0)},Z$b.from=function(Z$a,Z$b,Z$c,Z$d,Z$e){return void 0===Z$e&&(Z$e=0),this._create(Z$a,Z$b,Z$c,Z$d,Z$e,!1)},Z$b._create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=Z$W.getItemByClass("tweenData",Z$j);return Z$i.isTo=Z$f,Z$i.type=0,Z$i.target=Z$a,Z$i.duration=Z$c,Z$i.data=Z$b,Z$i.startTime=this._startTime+Z$e,Z$i.endTime=Z$i.startTime+Z$i.duration,Z$i.ease=Z$d,this._startTime=Math.max(Z$i.endTime,this._startTime),this._tweenDataList.push(Z$i),this._startTimeSort=!0,this._endTimeSort=!0,this},Z$b.addLabel=function(Z$a,Z$b){var Z$c=Z$W.getItemByClass("tweenData",Z$j);return Z$c.type=1,Z$c.data=Z$a,Z$c.endTime=Z$c.startTime=this._startTime+Z$b,this._labelDic||(this._labelDic={}),this._labelDic[Z$a]=Z$c,this._tweenDataList.push(Z$c),this},Z$b.removeLabel=function(Z$a){if(this._labelDic&&this._labelDic[Z$a]){var Z$b=this._labelDic[Z$a];if(Z$b){var Z$c=this._tweenDataList.indexOf(Z$b);-1<Z$c&&this._tweenDataList.splice(Z$c,1)}delete this._labelDic[Z$a]}},Z$b.gotoTime=function(Z$a){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var Z$b,Z$c,Z$d,Z$e;for(var Z$f in this._firstTweenDic)if(Z$c=this._firstTweenDic[Z$f])for(var Z$i in Z$c)Z$c.diyTarget.hasOwnProperty(Z$i)&&(Z$c.diyTarget[Z$i]=Z$c[Z$i]);for(Z$f in this._tweenDic)(Z$b=this._tweenDic[Z$f]).clear(),delete this._tweenDic[Z$f];if(this._index=0,this._gidIndex=0,this._currTime=Z$a,this._lastTime=Z$O.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=Z$d=this._tweenDataList.concat(),Z$d.sort(function(Z$a,Z$b){return Z$a.endTime>Z$b.endTime?1:Z$a.endTime<Z$b.endTime?-1:0})}else Z$d=this._endTweenDataList;for(var Z$j=0,Z$k=Z$d.length;Z$j<Z$k;Z$j++)if(0==(Z$e=Z$d[Z$j]).type){if(!(Z$a>=Z$e.endTime))break;this._index=Math.max(this._index,Z$j+1);var Z$l=Z$e.data;if(Z$e.isTo)for(var Z$m in Z$l)Z$e.target[Z$m]=Z$l[Z$m]}for(Z$j=0,Z$k=this._tweenDataList.length;Z$j<Z$k;Z$j++)0==(Z$e=this._tweenDataList[Z$j]).type&&Z$a>=Z$e.startTime&&Z$a<Z$e.endTime&&(this._index=Math.max(this._index,Z$j+1),this._gidIndex++,(Z$b=Z$W.getItemByClass("tween",Z$Z))._create(Z$e.target,Z$e.data,Z$e.duration,Z$e.ease,Z$u.create(this,this._animComplete,[this._gidIndex]),0,!1,Z$e.isTo,!0,!1),Z$b.setStartTime(this._currTime-(Z$a-Z$e.startTime)),Z$b._updateEase(this._currTime),Z$b.gid=this._gidIndex,this._tweenDic[this._gidIndex]=Z$b)}},Z$b.gotoLabel=function(Z$a){if(null!=this._labelDic){var Z$b=this._labelDic[Z$a];Z$b&&this.gotoTime(Z$b.startTime)}},Z$b.pause=function(){Z$z.timer.clear(this,this._update)},Z$b.resume=function(){this.play(this._currTime,this._loopKey)},Z$b.play=function(Z$a,Z$b){if(void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(Z$a,Z$b){return Z$a.startTime>Z$b.startTime?1:Z$a.startTime<Z$b.startTime?-1:0});for(var Z$c=0,Z$d=this._tweenDataList.length;Z$c<Z$d;Z$c++){var Z$e=this._tweenDataList[Z$c];if(null!=Z$e&&0==Z$e.type){var Z$f=Z$e.target,Z$i=Z$f.$_GID||(Z$f.$_GID=Z$$.getGID()),Z$j=null;for(var Z$k in null==this._firstTweenDic[Z$i]?((Z$j={}).diyTarget=Z$f,this._firstTweenDic[Z$i]=Z$j):Z$j=this._firstTweenDic[Z$i],Z$e.data)null==Z$j[Z$k]&&(Z$j[Z$k]=Z$f[Z$k])}}}"string"==typeof Z$a?this.gotoLabel(Z$a):this.gotoTime(Z$a),this._loopKey=Z$b,this._lastTime=Z$O.now(),Z$z.timer.frameLoop(1,this,this._update)}},Z$b._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var Z$a in this._tweenDic)(Z$b=this._tweenDic[Z$a]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var Z$b,Z$c=Z$O.now(),Z$d=Z$c-this._lastTime,Z$e=this._currTime+=Z$d*this.scale;for(Z$a in this._lastTime=Z$c,this._tweenDic)(Z$b=this._tweenDic[Z$a])._updateEase(Z$e);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var Z$f=this._tweenDataList[this._index];Z$e>=Z$f.startTime&&(this._index++,0==Z$f.type?(this._gidIndex++,(Z$b=Z$W.getItemByClass("tween",Z$Z))._create(Z$f.target,Z$f.data,Z$f.duration,Z$f.ease,Z$u.create(this,this._animComplete,[this._gidIndex]),0,!1,Z$f.isTo,!0,!1),Z$b.setStartTime(Z$e),Z$b.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=Z$b)._updateEase(Z$e)):this.event("label",Z$f.data))}},Z$b._animComplete=function(Z$a){this._tweenDic[Z$a]&&delete this._tweenDic[Z$a]},Z$b._complete=function(){this.event("complete")},Z$b.reset=function(){var Z$a;if(this._labelDic)for(Z$a in this._labelDic)delete this._labelDic[Z$a];for(Z$a in this._tweenDic)this._tweenDic[Z$a].clear(),delete this._tweenDic[Z$a];for(Z$a in this._firstTweenDic)delete this._firstTweenDic[Z$a];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var Z$b,Z$c=0;for(Z$b=this._tweenDataList.length,Z$c=0;Z$c<Z$b;Z$c++)this._tweenDataList[Z$c]&&this._tweenDataList[Z$c].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,Z$z.timer.clear(this,this._update)},Z$b.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},Z$q(0,Z$b,"index",function(){return this._frameIndex},function(Z$a){this._frameIndex=Z$a,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),Z$q(0,Z$b,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),Z$f.to=function(Z$a,Z$b,Z$c,Z$d,Z$e){return void 0===Z$e&&(Z$e=0),(new Z$f).to(Z$a,Z$b,Z$c,Z$d,Z$e)},Z$f.from=function(Z$a,Z$b,Z$c,Z$d,Z$e){return void 0===Z$e&&(Z$e=0),(new Z$f).from(Z$a,Z$b,Z$c,Z$d,Z$e)},Z$f.__init$=function(){Z$j=function(){function Z$a(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return Z$m(Z$a,""),Z$a.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,Z$W.recover("tweenData",this)},Z$a}()},Z$f}(),Z$na=function(Z$e){function Z$c(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,Z$c.__super.call(this),this._style=Z$j.EMPTY}Z$m(Z$c,"laya.display.Sprite",Z$e);var Z$a=Z$c.prototype;return Z$z.imps(Z$a,{"laya.display.ILayout":!0}),Z$a.createConchModel=function(){return new ConchNode},Z$a.destroy=function(Z$a){if(void 0===Z$a&&(Z$a=!0),this._releaseMem(),!this._destroyed){this.filters=null;var Z$b=this.mask;Z$b&&(this.mask=null,Z$b.destroy(Z$a))}Z$e.prototype.destroy.call(this,Z$a),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},Z$a.updateZOrder=function(){Z$$.updateOrder(this._childs)&&this.repaint()},Z$a.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},Z$a.setBounds=function(Z$a){this._set$P("uBounds",Z$a)},Z$a.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new Z$B),Z$B._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},Z$a.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new Z$B),Z$B._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},Z$a._boundPointsToParent=function(Z$a){void 0===Z$a&&(Z$a=!1);var Z$b=0,Z$c=0;this._style&&(Z$b=this._style._tf.translateX,Z$c=this._style._tf.translateY,Z$a=Z$a||0!==this._style._tf.rotate,this._style.scrollRect&&(Z$b+=this._style.scrollRect.x,Z$c+=this._style.scrollRect.y));var Z$d=this._getBoundPointsM(Z$a);if(!Z$d||Z$d.length<1)return Z$d;if(8!=Z$d.length&&(Z$d=Z$a?Z$x.scanPList(Z$d):Z$B._getWrapRec(Z$d,Z$B.TEMP)._getBoundPoints()),!this.transform)return Z$$.transPointList(Z$d,this._x-Z$b,this._y-Z$c),Z$d;var Z$e=Z$A.TEMP,Z$f=0,Z$i=Z$d.length;for(Z$f=0;Z$f<Z$i;Z$f+=2)Z$e.x=Z$d[Z$f],Z$e.y=Z$d[Z$f+1],this.toParentPoint(Z$e),Z$d[Z$f]=Z$e.x,Z$d[Z$f+1]=Z$e.y;return Z$d},Z$a.getGraphicBounds=function(Z$a){return void 0===Z$a&&(Z$a=!1),this._graphics?this._graphics.getBounds(Z$a):Z$B.TEMP.setTo(0,0,0,0)},Z$a._getBoundPointsM=function(Z$a){if(void 0===Z$a&&(Z$a=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var Z$b=Z$$.clearArray(this._$P.temBM),Z$c=Z$B.TEMP;return Z$c.copyFrom(this.scrollRect),Z$$.concatArray(Z$b,Z$c._getBoundPoints()),Z$b}for(var Z$d,Z$e,Z$f,Z$i=this._graphics?this._graphics.getBoundPoints():Z$$.clearArray(this._$P.temBM),Z$j=0,Z$k=(Z$f=this._childs).length;Z$j<Z$k;Z$j++)(Z$d=Z$f[Z$j])instanceof laya.display.Sprite&&1==Z$d.visible&&(Z$e=Z$d._boundPointsToParent(Z$a))&&(Z$i=Z$i?Z$$.concatArray(Z$i,Z$e):Z$e);return Z$i},Z$a.getStyle=function(){return this._style===Z$j.EMPTY&&(this._style=new Z$j),this._style},Z$a.setStyle=function(Z$a){this._style=Z$a},Z$a._adjustTransform=function(){this._tfChanged=!1;var Z$a,Z$b=this._style._tf,Z$c=Z$b.scaleX,Z$d=Z$b.scaleY;if(Z$b.rotate||1!==Z$c||1!==Z$d||Z$b.skewX||Z$b.skewY){(Z$a=this._transform||(this._transform=Z$G.create())).bTransform=!0;var Z$e=.0174532922222222*(Z$b.rotate-Z$b.skewX),Z$f=.0174532922222222*(Z$b.rotate+Z$b.skewY),Z$i=Math.cos(Z$f),Z$j=Math.sin(Z$f),Z$k=Math.sin(Z$e),Z$l=Math.cos(Z$e);return Z$a.a=Z$c*Z$i,Z$a.b=Z$c*Z$j,Z$a.c=-Z$d*Z$k,Z$a.d=Z$d*Z$l,Z$a.tx=Z$a.ty=0,Z$a}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,Z$a},Z$a.pos=function(Z$a,Z$b,Z$c){if(void 0===Z$c&&(Z$c=!1),this._x!==Z$a||this._y!==Z$b){if(this.destroyed)return this;if(Z$c){this._x=Z$a,this._y=Z$b,this.conchModel&&this.conchModel.pos(this._x,this._y);var Z$d=this._parent;Z$d&&0===Z$d._repaint&&(Z$d._repaint=1,Z$d.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=Z$a,this.y=Z$b}return this},Z$a.pivot=function(Z$a,Z$b){return this.pivotX=Z$a,this.pivotY=Z$b,this},Z$a.size=function(Z$a,Z$b){return this.width=Z$a,this.height=Z$b,this},Z$a.scale=function(Z$a,Z$b,Z$c){void 0===Z$c&&(Z$c=!1);var Z$d=this.getStyle(),Z$e=Z$d._tf;if(Z$e.scaleX!=Z$a||Z$e.scaleY!=Z$b){if(this.destroyed)return this;if(Z$c){Z$d.setScale(Z$a,Z$b),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(Z$a,Z$b),this._renderType|=4;var Z$f=this._parent;Z$f&&0===Z$f._repaint&&(Z$f._repaint=1,Z$f.parentRepaint())}else this.scaleX=Z$a,this.scaleY=Z$b}return this},Z$a.skew=function(Z$a,Z$b){return this.skewX=Z$a,this.skewY=Z$b,this},Z$a.render=function(Z$a,Z$b,Z$c){Z$X.spriteCount++,Z$L.renders[this._renderType]._fun(this,Z$a,Z$b+this._x,Z$c+this._y),this._repaint=0},Z$a.drawToCanvas=function(Z$a,Z$b,Z$c,Z$d){if(Z$J.isConchNode){var Z$e=Z$va.create("2D");return new Z$K(Z$a,Z$b,Z$e).ctx.setCanvasType(1),this.conchModel.drawToCanvas(Z$e.source,Z$c,Z$d),Z$e}return Z$F.drawToCanvas(this,this._renderType,Z$a,Z$b,Z$c,Z$d)},Z$a.customRender=function(Z$a,Z$b,Z$c){this._renderType|=1024},Z$a._applyFilters=function(){var Z$a;if(!Z$J.isWebGL&&((Z$a=this._$P.filters)&&!(Z$a.length<1)))for(var Z$b=0,Z$c=Z$a.length;Z$b<Z$c;Z$b++)Z$a[Z$b].action.apply(this._$P.cacheCanvas)},Z$a._isHaveGlowFilter=function(){var Z$a,Z$b=0;if(this.filters)for(Z$b=0;Z$b<this.filters.length;Z$b++)if(8==this.filters[Z$b].type)return!0;for(Z$b=0,Z$a=this._childs.length;Z$b<Z$a;Z$b++)if(this._childs[Z$b]._isHaveGlowFilter())return!0;return!1},Z$a.localToGlobal=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!1),!0===Z$b&&(Z$a=new Z$A(Z$a.x,Z$a.y));for(var Z$c=this;Z$c&&Z$c!=Z$z.stage;)Z$a=Z$c.toParentPoint(Z$a),Z$c=Z$c.parent;return Z$a},Z$a.globalToLocal=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!1),Z$b&&(Z$a=new Z$A(Z$a.x,Z$a.y));for(var Z$c=this,Z$d=[];Z$c&&Z$c!=Z$z.stage;)Z$d.push(Z$c),Z$c=Z$c.parent;for(var Z$e=Z$d.length-1;0<=Z$e;)Z$a=(Z$c=Z$d[Z$e]).fromParentPoint(Z$a),Z$e--;return Z$a},Z$a.toParentPoint=function(Z$a){if(!Z$a)return Z$a;Z$a.x-=this.pivotX,Z$a.y-=this.pivotY,this.transform&&this._transform.transformPoint(Z$a),Z$a.x+=this._x,Z$a.y+=this._y;var Z$b=this._style.scrollRect;return Z$b&&(Z$a.x-=Z$b.x,Z$a.y-=Z$b.y),Z$a},Z$a.fromParentPoint=function(Z$a){if(!Z$a)return Z$a;Z$a.x-=this._x,Z$a.y-=this._y;var Z$b=this._style.scrollRect;return Z$b&&(Z$a.x+=Z$b.x,Z$a.y+=Z$b.y),this.transform&&this._transform.invertTransformPoint(Z$a),Z$a.x+=this.pivotX,Z$a.y+=this.pivotY,Z$a},Z$a.on=function(Z$a,Z$b,Z$c,Z$d){return 1!==this._mouseEnableState&&this.isMouseEvent(Z$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(Z$a,Z$b,Z$c,Z$d,!1)):Z$e.prototype.on.call(this,Z$a,Z$b,Z$c,Z$d)},Z$a.once=function(Z$a,Z$b,Z$c,Z$d){return 1!==this._mouseEnableState&&this.isMouseEvent(Z$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(Z$a,Z$b,Z$c,Z$d,!0)):Z$e.prototype.once.call(this,Z$a,Z$b,Z$c,Z$d)},Z$a._$2__onDisplay=function(){if(1!==this._mouseEnableState){var Z$a=this;for(Z$a=Z$a.parent;Z$a&&1!==Z$a._mouseEnableState&&!Z$a._getBit(2);)Z$a.mouseEnabled=!0,Z$a._setBit(2,!0),Z$a=Z$a.parent}},Z$a.loadImage=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=this;return void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0),this.graphics.loadImage(Z$a,Z$b,Z$c,Z$d,Z$e,function(Z$a){Z$i.destroyed||(Z$i.size(Z$b+(Z$d||Z$a.width),Z$c+(Z$e||Z$a.height)),Z$i.repaint(),Z$f&&Z$f.runWith(Z$a))}),this},Z$a.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},Z$a._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},Z$a._childChanged=function(Z$a){this._childs.length?this._renderType|=2048:this._renderType&=-2049,Z$a&&this._get$P("hasZorder")&&Z$z.timer.callLater(this,this.updateZOrder),this.repaint()},Z$a.parentRepaint=function(){var Z$a=this._parent;Z$a&&0===Z$a._repaint&&(Z$a._repaint=1,Z$a.parentRepaint())},Z$a.startDrag=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){void 0===Z$b&&(Z$b=!1),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=300),void 0===Z$f&&(Z$f=!1),void 0===Z$i&&(Z$i=.92),this._$P.dragging||this._set$P("dragging",new Z$T),this._$P.dragging.start(this,Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i)},Z$a.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},Z$a._releaseMem=function(){if(this._$P){var Z$a=this._$P.cacheCanvas;Z$a&&Z$a.ctx&&(Z$W.recover("RenderContext",Z$a.ctx),Z$a.ctx.canvas.size(0,0),Z$a.ctx=null);var Z$b=this._$P._filterCache;Z$b&&(Z$b.destroy(),Z$b.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},Z$a._setDisplay=function(Z$a){Z$a||this._releaseMem(),Z$e.prototype._setDisplay.call(this,Z$a)},Z$a.hitTestPoint=function(Z$a,Z$b){var Z$c=this.globalToLocal(Z$A.TEMP.setTo(Z$a,Z$b));return Z$a=Z$c.x,Z$b=Z$c.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?Z$B.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(Z$a,Z$b)},Z$a.getMousePoint=function(){return this.globalToLocal(Z$A.TEMP.setTo(Z$z.stage.mouseX,Z$z.stage.mouseY))},Z$a._getWords=function(){return null},Z$a._addChildsToLayout=function(Z$a){var Z$b=this._getWords();if(null==Z$b&&0==this._childs.length)return!1;if(Z$b)for(var Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++)Z$a.push(Z$b[Z$c]);Z$c=0;for(var Z$e=this._childs.length;Z$c<Z$e;++Z$c){var Z$f=this._childs[Z$c];Z$f._style._enableLayout()&&Z$f._addToLayout(Z$a)}return!0},Z$a._addToLayout=function(Z$a){this._style.absolute||(this._style.block?Z$a.push(this):this._addChildsToLayout(Z$a)&&(this.x=this.y=0))},Z$a._isChar=function(){return!1},Z$a._getCSSStyle=function(){return this._style.getCSSStyle()},Z$a._setAttributes=function(Z$a,Z$b){switch(Z$a){case"x":this.x=parseFloat(Z$b);break;case"y":this.y=parseFloat(Z$b);break;case"width":this.width=parseFloat(Z$b);break;case"height":this.height=parseFloat(Z$b);break;default:this[Z$a]=Z$b}},Z$a._layoutLater=function(){this.parent&&this.parent._layoutLater()},Z$q(0,Z$a,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(Z$a){this._optimizeScrollRect!=Z$a&&(this._optimizeScrollRect=Z$a,this.conchModel&&this.conchModel.optimizeScrollRect(Z$a))}),Z$q(0,Z$a,"customRenderEnable",null,function(Z$a){if(Z$a&&(this._renderType|=1024,Z$J.isConchNode)){Z$c.CustomList.push(this);var Z$b=new Z$va("2d");Z$b._setContext(new CanvasRenderingContext2D),this.customContext=new Z$K(0,0,Z$b),Z$b.context.setCanvasType&&Z$b.context.setCanvasType(2),this.conchModel.custom(Z$b.context)}}),Z$q(0,Z$a,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(Z$a){this.cacheAs=Z$a?this._$P.hasFilter?"none":"normal":"none"}),Z$q(0,Z$a,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(Z$a){var Z$b=this._$P.cacheCanvas;if(Z$a!==(Z$b?Z$b.type:"none")){if("none"!==Z$a)this._getBit(1)||this._setUpNoticeType(1),Z$b||(Z$b=this._set$P("cacheCanvas",Z$W.getItemByClass("cacheCanvas",Object))),Z$b.type=Z$a,Z$b.reCache=!0,this._renderType|=16,"bitmap"==Z$a&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(Z$b){var Z$c=Z$b;Z$c&&Z$c.ctx&&(Z$W.recover("RenderContext",Z$c.ctx),Z$c.ctx.canvas.size(0,0),Z$c.ctx=null),Z$W.recover("cacheCanvas",Z$b)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),Z$q(0,Z$a,"zOrder",function(){return this._zOrder},function(Z$a){this._zOrder!=Z$a&&(this._zOrder=Z$a,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(Z$a),this._parent&&(Z$a&&this._parent._set$P("hasZorder",!0),Z$z.timer.callLater(this._parent,this.updateZOrder)))}),Z$q(0,Z$a,"rotation",function(){return this._style._tf.rotate},function(Z$a){var Z$b=this.getStyle();if(Z$b._tf.rotate!==Z$a){Z$b.setRotate(Z$a),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(Z$a),this._renderType|=4;var Z$c=this._parent;Z$c&&0===Z$c._repaint&&(Z$c._repaint=1,Z$c.parentRepaint())}}),Z$q(0,Z$a,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(Z$a){this._width!==Z$a&&(this._width=Z$a,this.conchModel&&this.conchModel.size(Z$a,this._height),this.repaint())}),Z$q(0,Z$a,"x",function(){return this._x},function(Z$a){if(this._x!==Z$a){if(this.destroyed)return;this._x=Z$a,this.conchModel&&this.conchModel.pos(Z$a,this._y);var Z$b=this._parent;Z$b&&0===Z$b._repaint&&(Z$b._repaint=1,Z$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),Z$q(0,Z$a,"globalScaleY",function(){for(var Z$a=1,Z$b=this;Z$b&&Z$b!==Z$z.stage;)Z$a*=Z$b.scaleY,Z$b=Z$b.parent;return Z$a}),Z$q(0,Z$a,"hitArea",function(){return this._$P.hitArea},function(Z$a){this._set$P("hitArea",Z$a)}),Z$q(0,Z$a,"staticCache",function(){return this._$P.staticCache},function(Z$a){this._set$P("staticCache",Z$a),Z$a||this.reCache()}),Z$q(0,Z$a,"texture",function(){return this._texture},function(Z$a){this._texture!=Z$a&&(this._texture=Z$a,this.graphics.cleanByTexture(Z$a,0,0))}),Z$q(0,Z$a,"y",function(){return this._y},function(Z$a){if(this._y!==Z$a){if(this.destroyed)return;this._y=Z$a,this.conchModel&&this.conchModel.pos(this._x,Z$a);var Z$b=this._parent;Z$b&&0===Z$b._repaint&&(Z$b._repaint=1,Z$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),Z$q(0,Z$a,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(Z$a){this._height!==Z$a&&(this._height=Z$a,this.conchModel&&this.conchModel.size(this._width,Z$a),this.repaint())}),Z$q(0,Z$a,"blendMode",function(){return this._style.blendMode},function(Z$a){this.getStyle().blendMode=Z$a,this.conchModel&&this.conchModel.blendMode(Z$a),Z$a&&"source-over"!=Z$a?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),Z$q(0,Z$a,"scaleX",function(){return this._style._tf.scaleX},function(Z$a){var Z$b=this.getStyle();if(Z$b._tf.scaleX!==Z$a){Z$b.setScaleX(Z$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(Z$a,Z$b._tf.scaleY),this._renderType|=4;var Z$c=this._parent;Z$c&&0===Z$c._repaint&&(Z$c._repaint=1,Z$c.parentRepaint())}}),Z$q(0,Z$a,"scaleY",function(){return this._style._tf.scaleY},function(Z$a){var Z$b=this.getStyle();if(Z$b._tf.scaleY!==Z$a){Z$b.setScaleY(Z$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(Z$b._tf.scaleX,Z$a),this._renderType|=4;var Z$c=this._parent;Z$c&&0===Z$c._repaint&&(Z$c._repaint=1,Z$c.parentRepaint())}}),Z$q(0,Z$a,"stage",function(){return Z$z.stage}),Z$q(0,Z$a,"skewX",function(){return this._style._tf.skewX},function(Z$a){var Z$b=this.getStyle();if(Z$b._tf.skewX!==Z$a){Z$b.setSkewX(Z$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(Z$a,Z$b._tf.skewY),this._renderType|=4;var Z$c=this._parent;Z$c&&0===Z$c._repaint&&(Z$c._repaint=1,Z$c.parentRepaint())}}),Z$q(0,Z$a,"scrollRect",function(){return this._style.scrollRect},function(Z$a){this.getStyle().scrollRect=Z$a,this.repaint(),Z$a?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(Z$a.x,Z$a.y,Z$a.width,Z$a.height)):(this._renderType&=-129,this.conchModel&&(Z$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),Z$q(0,Z$a,"skewY",function(){return this._style._tf.skewY},function(Z$a){var Z$b=this.getStyle();if(Z$b._tf.skewY!==Z$a){Z$b.setSkewY(Z$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(Z$b._tf.skewX,Z$a),this._renderType|=4;var Z$c=this._parent;Z$c&&0===Z$c._repaint&&(Z$c._repaint=1,Z$c.parentRepaint())}}),Z$q(0,Z$a,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(Z$a){this._tfChanged=!1,(this._transform=Z$a)&&(this._x=Z$a.tx,this._y=Z$a.ty,Z$a.tx=Z$a.ty=0,this.conchModel&&this.conchModel.transform(Z$a.a,Z$a.b,Z$a.c,Z$a.d,this._x,this._y)),Z$a?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),Z$q(0,Z$a,"pivotX",function(){return this._style._tf.translateX},function(Z$a){this.getStyle().setTranslateX(Z$a),this.conchModel&&this.conchModel.pivot(Z$a,this._style._tf.translateY),this.repaint()}),Z$q(0,Z$a,"pivotY",function(){return this._style._tf.translateY},function(Z$a){this.getStyle().setTranslateY(Z$a),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,Z$a),this.repaint()}),Z$q(0,Z$a,"alpha",function(){return this._style.alpha},function(Z$a){this._style&&this._style.alpha!==Z$a&&(Z$a=Z$a<0?0:1<Z$a?1:Z$a,this.getStyle().alpha=Z$a,this.conchModel&&this.conchModel.alpha(Z$a),1!==Z$a?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),Z$q(0,Z$a,"visible",function(){return this._style.visible},function(Z$a){this._style&&this._style.visible!==Z$a&&(this.getStyle().visible=Z$a,this.conchModel&&this.conchModel.visible(Z$a),this.parentRepaint())}),Z$q(0,Z$a,"graphics",function(){return this._graphics||(this.graphics=Z$F.createGraphics())},function(Z$a){this._graphics&&(this._graphics._sp=null),(this._graphics=Z$a)?(this._renderType&=-2,this._renderType|=512,(Z$a._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(Z$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),Z$q(0,Z$a,"filters",function(){return this._$P.filters},function(Z$a){Z$a&&0===Z$a.length&&(Z$a=null),this._$P.filters!=Z$a&&(this._set$P("filters",Z$a?Z$a.slice():null),Z$J.isConchApp&&(this.conchModel&&(Z$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),Z$J.isWebGL&&(Z$a&&Z$a.length?this._renderType|=32:this._renderType&=-33),Z$a&&0<Z$a.length?(this._getBit(1)||this._setUpNoticeType(1),Z$J.isWebGL&&1==Z$a.length&&Z$a[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(Z$J.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),Z$q(0,Z$a,"parent",Z$e.prototype._$get_parent,function(Z$a){Z$z.superSet(Z$aa,this,"parent",Z$a),Z$a&&this._getBit(2)&&this._$2__onDisplay()}),Z$q(0,Z$a,"mask",function(){return this._$P._mask},function(Z$a){Z$a&&this.mask&&this.mask._$P.maskParent||(Z$a?(this.cacheAs="bitmap",this._set$P("_mask",Z$a),Z$a._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",Z$a),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(Z$a?Z$a.conchModel:null),this._renderType|=64,this.parentRepaint())}),Z$q(0,Z$a,"mouseEnabled",function(){return 1<this._mouseEnableState},function(Z$a){this._mouseEnableState=Z$a?2:1}),Z$q(0,Z$a,"globalScaleX",function(){for(var Z$a=1,Z$b=this;Z$b&&Z$b!==Z$z.stage;)Z$a*=Z$b.scaleX,Z$b=Z$b.parent;return Z$a}),Z$q(0,Z$a,"mouseX",function(){return this.getMousePoint().x}),Z$q(0,Z$a,"mouseY",function(){return this.getMousePoint().y}),Z$c.fromImage=function(Z$a){return(new Z$c).loadImage(Z$a)},Z$c._cachePool=[],Z$c.CustomList=[],Z$k(Z$c,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=Z$i.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),Z$c}(Z$aa),Z$oa=function(Z$a){function Z$b(Z$a){this._audio=null,this._onEnd=null,this._resumePlay=null,Z$b.__super.call(this),this._onEnd=Z$$.bind(this.__onEnd,this),this._resumePlay=Z$$.bind(this.__resumePlay,this),Z$a.addEventListener("ended",this._onEnd),this._audio=Z$a}Z$m(Z$b,"laya.media.h5audio.AudioSoundChannel",Z$da);var Z$c=Z$b.prototype;return Z$c.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(Z$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},Z$c.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,Z$O.container.appendChild(this._audio),this._audio.play()}catch(Z$a){this.event("error")}},Z$c.play=function(Z$a){this.isStopped=!1;try{this._audio.playbackRate=Z$E.playbackRate,this._audio.currentTime=this.startTime}catch(Z$a){return void this._audio.addEventListener("canplay",this._resumePlay)}Z$E.addChannel(this),Z$O.container.appendChild(this._audio),!Z$a&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},Z$c.stop=function(){this.isStopped=!0,Z$E.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&Z$J.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),Z$O.onIE||this._audio!=Z$ca._musicAudio&&Z$W.recover("audio:"+this.url,this._audio),Z$O.removeElement(this._audio),this._audio=null)},Z$c.pause=function(){this.isStopped=!0,Z$E.removeChannel(this),"pause"in this._audio&&this._audio.pause()},Z$c.resume=function(){this._audio&&(this.isStopped=!1,Z$E.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},Z$q(0,Z$c,"position",function(){return this._audio?this._audio.currentTime:0}),Z$q(0,Z$c,"duration",function(){return this._audio?this._audio.duration:0}),Z$q(0,Z$c,"volume",function(){return this._audio?this._audio.volume:1},function(Z$a){this._audio&&(this._audio.volume=Z$a)}),Z$b}(),Z$pa=function(Z$a){function Z$b(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=Z$fa.ctx,Z$b.__super.call(this),this._onPlayEnd=Z$$.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}Z$m(Z$b,"laya.media.webaudio.WebAudioSoundChannel",Z$da);var Z$c=Z$b.prototype;return Z$c.play=function(Z$a){if(Z$E.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var Z$b=this.context,Z$c=this.gain,Z$d=Z$b.createBufferSource();(this.bufferSource=Z$d).buffer=this.audioBuffer,Z$d.connect(Z$c),Z$c&&Z$c.disconnect(),Z$c.connect(Z$b.destination),Z$d.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=Z$O.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(Z$d.loop=!0),Z$d.playbackRate.setTargetAtTime?Z$d.playbackRate.setTargetAtTime(Z$E.playbackRate,this.context.currentTime,.1):Z$d.playbackRate.value=Z$E.playbackRate,Z$d.start(0,this.startTime),!Z$a&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},Z$c.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(Z$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},Z$c._clearBufferSource=function(){if(this.bufferSource){var Z$a=this.bufferSource;Z$a.stop?Z$a.stop(0):Z$a.noteOff(0),Z$a.disconnect(0),Z$a.onended=null,Z$b._tryCleanFailed||this._tryClearBuffer(Z$a),this.bufferSource=null}},Z$c._tryClearBuffer=function(Z$a){try{Z$a.buffer=null}catch(Z$a){Z$b._tryCleanFailed=!0}},Z$c.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,Z$E.removeChannel(this),this.startHandler=null,this.completeHandler=null},Z$c.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,Z$E.removeChannel(this)},Z$c.resume=function(){this.startTime=this._pauseTime,this.play(!1)},Z$q(0,Z$c,"position",function(){return this.bufferSource?(Z$O.now()-this._startTime)/1e3+this.startTime:0}),Z$q(0,Z$c,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),Z$q(0,Z$c,"volume",function(){return this._volume},function(Z$a){this.isStopped||(this._volume=Z$a,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(Z$a,this.context.currentTime,.1):this.gain.gain.value=Z$a)}),Z$b._tryCleanFailed=!1,Z$b}(),Z$qa=function(Z$a){function Z$b(){Z$b.__super.call(this),this._w=0,this._h=0}Z$m(Z$b,"laya.resource.Bitmap",Z$la);var Z$c=Z$b.prototype;return Z$q(0,Z$c,"width",function(){return this._w}),Z$q(0,Z$c,"height",function(){return this._h}),Z$q(0,Z$c,"source",function(){return this._source}),Z$b}(),Z$ra=function(Z$b){function Z$a(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,Z$a.__super.call(this),this._interval=Z$d.animationInterval,this._setUpNoticeType(1)}Z$m(Z$a,"laya.display.AnimationPlayerBase",Z$b);var Z$c=Z$a.prototype;return Z$c.play=function(Z$a,Z$b,Z$c,Z$d){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=!0),void 0===Z$c&&(Z$c=""),void 0===Z$d&&(Z$d=!0),this._isPlaying=!0,this.index="string"==typeof Z$a?this._getFrameByLabel(Z$a):Z$a,this.loop=Z$b,this._actionName=Z$c,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},Z$c._getFrameByLabel=function(Z$a){var Z$b=0;for(Z$b=0;Z$b<this._count;Z$b++)if(this._labels[Z$b]&&0<=this._labels[Z$b].indexOf(Z$a))return Z$b;return 0},Z$c._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},Z$c._setControlNode=function(Z$a){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=Z$a)&&Z$a!=this&&(Z$a.on("display",this,this._checkResumePlaying),Z$a.on("undisplay",this,this._checkResumePlaying))},Z$c._setDisplay=function(Z$a){Z$b.prototype._setDisplay.call(this,Z$a),this._checkResumePlaying()},Z$c._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},Z$c.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},Z$c.addLabel=function(Z$a,Z$b){this._labels||(this._labels={}),this._labels[Z$b]||(this._labels[Z$b]=[]),this._labels[Z$b].push(Z$a)},Z$c.removeLabel=function(Z$a){if(Z$a){if(this._labels)for(var Z$b in this._labels)this._removeLabelFromLabelList(this._labels[Z$b],Z$a)}else this._labels=null},Z$c._removeLabelFromLabelList=function(Z$a,Z$b){if(Z$a)for(var Z$c=Z$a.length-1;0<=Z$c;Z$c--)Z$a[Z$c]==Z$b&&Z$a.splice(Z$c,1)},Z$c.gotoAndStop=function(Z$a){this.index="string"==typeof Z$a?this._getFrameByLabel(Z$a):Z$a,this.stop()},Z$c._displayToIndex=function(Z$a){},Z$c.clear=function(){this.stop(),this._labels=null},Z$q(0,Z$c,"interval",function(){return this._interval},function(Z$a){this._interval!=Z$a&&(this._frameRateChanged=!0,this._interval=Z$a,this._isPlaying&&0<Z$a&&this.timerLoop(Z$a,this,this._frameLoop,null,!0,!0))}),Z$q(0,Z$c,"isPlaying",function(){return this._isPlaying}),Z$q(0,Z$c,"index",function(){return this._index},function(Z$a){if(this._index=Z$a,this._displayToIndex(Z$a),this._labels&&this._labels[Z$a])for(var Z$b=this._labels[Z$a],Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++)this.event("label",Z$b[Z$c])}),Z$q(0,Z$c,"count",function(){return this._count}),Z$a.WRAP_POSITIVE=0,Z$a.WRAP_REVERSE=1,Z$a.WRAP_PINGPONG=2,Z$a}(Z$na),Z$sa=function(Z$b){function Z$p(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,Z$p.__super.call(this),this.overflow=Z$p.VISIBLE,this._style=new Z$ba(this),this._style.wordWrap=!1}Z$m(Z$p,"laya.display.Text",Z$b);var Z$a=Z$p.prototype;return Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._lines=null,this._words&&(this._words.length=0,this._words=null)},Z$a._getBoundPointsM=function(Z$a){void 0===Z$a&&(Z$a=!1);var Z$b=Z$B.TEMP;return Z$b.setTo(0,0,this.width,this.height),Z$b._getBoundPoints()},Z$a.getGraphicBounds=function(Z$a){void 0===Z$a&&(Z$a=!1);var Z$b=Z$B.TEMP;return Z$b.setTo(0,0,this.width,this.height),Z$b},Z$a._getCSSStyle=function(){return this._style},Z$a.lang=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m){if(Z$a=Z$p.langPacks&&Z$p.langPacks[Z$a]?Z$p.langPacks[Z$a]:Z$a,arguments.length<2)this._text=Z$a;else{for(var Z$n=0,Z$o=arguments.length;Z$n<Z$o;Z$n++)Z$a=Z$a.replace("{"+Z$n+"}",arguments[Z$n+1]);this._text=Z$a}},Z$a._isPassWordMode=function(){var Z$a=this._style.password;return"prompt"in this&&this.prompt==this._text&&(Z$a=!1),Z$a},Z$a._getPassWordTxt=function(Z$a){var Z$b;Z$b="";for(var Z$c=Z$a.length;0<Z$c;Z$c--)Z$b+="●";return Z$b},Z$a.renderText=function(Z$a,Z$b){var Z$c=this.graphics;Z$c.clear(!0);var Z$d=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(Z$O.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);Z$O.context.font=Z$d;var Z$e=this.padding,Z$f=Z$e[3],Z$i="left",Z$j=this._lines,Z$k=this.leading+this._charSize.height,Z$l=this._currBitmapFont;Z$l&&(Z$k=this.leading+Z$l.getMaxHeight());var Z$m=Z$e[0];if(!Z$l&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(Z$i="right",Z$f=this._width-Z$e[1]):"center"==this.align&&(Z$i="center",Z$f=.5*this._width+Z$e[3]-Z$e[1])),0<this._height){var Z$n=this._textHeight>this._height?"top":this.valign;"middle"===Z$n?Z$m=.5*(this._height-Z$b*Z$k)+Z$e[0]-Z$e[2]:"bottom"===Z$n&&(Z$m=this._height-Z$b*Z$k-Z$e[2])}var Z$o=this._style;if(Z$l&&Z$l.autoScaleSize)var Z$p=Z$l.fontSize/this.fontSize;if(this._clipPoint)if(Z$c.save(),Z$l&&Z$l.autoScaleSize){var Z$q=0,Z$r=0;Z$q=this._width?this._width-Z$e[3]-Z$e[1]:this._textWidth,Z$r=this._height?this._height-Z$e[0]-Z$e[2]:this._textHeight,Z$q*=Z$p,Z$r*=Z$p,Z$c.clipRect(Z$e[3],Z$e[0],Z$q,Z$r)}else Z$c.clipRect(Z$e[3],Z$e[0],this._width?this._width-Z$e[3]-Z$e[1]:this._textWidth,this._height?this._height-Z$e[0]-Z$e[2]:this._textHeight);var Z$s=Z$o.password;"prompt"in this&&this.prompt==this._text&&(Z$s=!1);for(var Z$t=0,Z$u=0,Z$v=Math.min(this._lines.length,Z$b+Z$a)||1,Z$w=Z$a;Z$w<Z$v;Z$w++){var Z$x,Z$y=Z$j[Z$w];if(Z$s){var Z$z=Z$y.length;Z$y="";for(var Z$A=Z$z;0<Z$A;Z$A--)Z$y+="●"}if(Z$t=Z$f-(this._clipPoint?this._clipPoint.x:0),Z$u=Z$m+Z$k*Z$w-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(Z$i,Z$t,Z$u,Z$w),Z$l){var Z$B=this.width;Z$l.autoScaleSize&&(Z$B=this.width*Z$p),Z$l.drawText(Z$y,this,Z$t,Z$u,this.align,Z$B)}else Z$J.isWebGL?(this._words||(this._words=[]),(Z$x=this._words.length>Z$w-Z$a?this._words[Z$w-Z$a]:new Z$h).setText(Z$y)):Z$x=Z$y,Z$o.stroke?Z$c.fillBorderText(Z$x,Z$t,Z$u,Z$d,this.color,Z$o.strokeColor,Z$o.stroke,Z$i):Z$c.fillText(Z$x,Z$t,Z$u,Z$d,this.color,Z$i)}if(Z$l&&Z$l.autoScaleSize){var Z$C=1/Z$p;this.scale(Z$C,Z$C)}this._clipPoint&&Z$c.restore(),this._startX=Z$f,this._startY=Z$m},Z$a.drawUnderline=function(Z$a,Z$b,Z$c,Z$d){var Z$e=this._lineWidths[Z$d];switch(Z$a){case"center":Z$b-=Z$e/2;break;case"right":Z$b-=Z$e}Z$c+=this._charSize.height,this._graphics.drawLine(Z$b,Z$c,Z$b+Z$e,Z$c,this.underlineColor||this.color,1)},Z$a.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);Z$O.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new Z$A(0,0)):this._clipPoint=null;var Z$a=this._lines.length;if(this.overflow!=Z$p.VISIBLE){var Z$b=this.overflow==Z$p.HIDDEN?Math.floor:Math.ceil;Z$a=Math.min(Z$a,Z$b((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var Z$c=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(Z$c,Z$a),this.repaint()},Z$a.evalTextSize=function(){var Z$a,Z$b=NaN;Z$a=Math.max.apply(this,this._lineWidths),Z$b=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],Z$a==this._textWidth&&Z$b==this._textHeight||(this._textWidth=Z$a,this._textHeight=Z$b,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},Z$a.checkEnabledViewportOrNot=function(){return this.overflow==Z$p.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},Z$a.changeText=function(Z$a){this._text!==Z$a&&(this.lang(Z$a+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},Z$a.parseLines=function(Z$a){var Z$b=this.wordWrap||this.overflow==Z$p.HIDDEN;if(Z$b)var Z$c=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var Z$d=Z$$.contextMeasureText(Z$p._testWord);Z$J.isConchApp&&0===Z$d.width&&0===Z$d.height&&(Z$d=Z$$.contextMeasureText("W")),this._charSize.width=Z$d.width,this._charSize.height=Z$d.height||this.fontSize}for(var Z$e=Z$a.replace(/\r\n/g,"\n").split("\n"),Z$f=0,Z$i=Z$e.length;Z$f<Z$i;Z$f++){var Z$j=Z$e[Z$f];Z$b?this.parseLine(Z$j,Z$c):(this._lineWidths.push(this.getTextWidth(Z$j)),this._lines.push(Z$j))}},Z$a.parseLine=function(Z$a,Z$b){Z$O.context;var Z$c,Z$d=this._lines,Z$e=0,Z$f=NaN,Z$i=NaN,Z$j=0;if((Z$f=this.getTextWidth(Z$a))<=Z$b)return Z$d.push(Z$a),void this._lineWidths.push(Z$f);Z$f=this._charSize.width,0==(Z$e=Math.floor(Z$b/Z$f))&&(Z$e=1),Z$i=Z$f=this.getTextWidth(Z$a.substring(0,Z$e));for(var Z$k=Z$e,Z$l=Z$a.length;Z$k<Z$l;Z$k++)if(Z$b<(Z$i+=Z$f=this.getTextWidth(Z$a.charAt(Z$k))))if(this.wordWrap){var Z$m=Z$a.substring(Z$j,Z$k);if(Z$m.charCodeAt(Z$m.length-1)<255?(Z$c=/(?:\w|-)+$/.exec(Z$m))&&(Z$k=Z$c.index+Z$j,0==Z$c.index?Z$k+=Z$m.length:Z$m=Z$a.substring(Z$j,Z$k)):Z$p.RightToLeft&&(Z$c=/([\u0600-\u06FF])+$/.exec(Z$m))&&(Z$k=Z$c.index+Z$j,0==Z$c.index?Z$k+=Z$m.length:Z$m=Z$a.substring(Z$j,Z$k)),Z$d.push(Z$m),this._lineWidths.push(Z$i-Z$f),!((Z$j=Z$k)+Z$e<Z$l)){Z$d.push(Z$a.substring(Z$j,Z$l)),this._lineWidths.push(this.getTextWidth(Z$d[Z$d.length-1])),Z$j=-1;break}Z$k+=Z$e,Z$i=Z$f=this.getTextWidth(Z$a.substring(Z$j,Z$k)),Z$k--}else if(this.overflow==Z$p.HIDDEN)return Z$d.push(Z$a.substring(0,Z$k)),void this._lineWidths.push(this.getTextWidth(Z$d[Z$d.length-1]));this.wordWrap&&-1!=Z$j&&(Z$d.push(Z$a.substring(Z$j,Z$l)),this._lineWidths.push(this.getTextWidth(Z$d[Z$d.length-1])))},Z$a.getTextWidth=function(Z$a){return this._currBitmapFont?this._currBitmapFont.getTextWidth(Z$a):Z$$.contextMeasureText(Z$a).width},Z$a.getWordWrapWidth=function(){var Z$a=this.padding,Z$b=NaN;return(Z$b=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(Z$b=this.wordWrap?100:Z$O.width),Z$b<=0&&(Z$b=100),Z$b-Z$a[3]-Z$a[1]},Z$a.getCharPoint=function(Z$a,Z$b){this._isChanged&&Z$z.timer.runCallLater(this,this.typeset);for(var Z$c=0,Z$d=this._lines,Z$e=0,Z$f=0,Z$i=Z$d.length;Z$f<Z$i;Z$f++){if(Z$a<(Z$c+=Z$d[Z$f].length)){var Z$j=Z$f;break}Z$e=Z$c}var Z$k=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Z$O.context.font=Z$k;var Z$l=this.getTextWidth(this._text.substring(Z$e,Z$a));return(Z$b||new Z$A).setTo(this._startX+Z$l-(this._clipPoint?this._clipPoint.x:0),this._startY+Z$j*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},Z$q(0,Z$a,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(Z$a){Z$a!=this._width&&(Z$z.superSet(Z$na,this,"width",Z$a),this.isChanged=!0)}),Z$q(0,Z$a,"textWidth",function(){return this._isChanged&&Z$z.timer.runCallLater(this,this.typeset),this._textWidth}),Z$q(0,Z$a,"height",function(){return this._height?this._height:this.textHeight},function(Z$a){Z$a!=this._height&&(Z$z.superSet(Z$na,this,"height",Z$a),this.isChanged=!0)}),Z$q(0,Z$a,"textHeight",function(){return this._isChanged&&Z$z.timer.runCallLater(this,this.typeset),this._textHeight}),Z$q(0,Z$a,"padding",function(){return this._getCSSStyle().padding},function(Z$a){this._getCSSStyle().padding=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"bold",function(){return this._getCSSStyle().bold},function(Z$a){this._getCSSStyle().bold=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"text",function(){return this._text||""},function(Z$a){this._text!==Z$a&&(this.lang(Z$a+""),this.isChanged=!0,this.event("change"))}),Z$q(0,Z$a,"color",function(){return this._getCSSStyle().color},function(Z$a){this._getCSSStyle().color!=Z$a&&(this._getCSSStyle().color=Z$a,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),Z$q(0,Z$a,"font",function(){return this._getCSSStyle().fontFamily},function(Z$a){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),Z$p._bitmapFonts&&Z$p._bitmapFonts[Z$a]&&(this._currBitmapFont=Z$p._bitmapFonts[Z$a]),this._getCSSStyle().fontFamily=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"fontSize",function(){return this._getCSSStyle().fontSize},function(Z$a){this._getCSSStyle().fontSize=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"italic",function(){return this._getCSSStyle().italic},function(Z$a){this._getCSSStyle().italic=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"align",function(){return this._getCSSStyle().align},function(Z$a){this._getCSSStyle().align=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"valign",function(){return this._getCSSStyle().valign},function(Z$a){this._getCSSStyle().valign=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(Z$a){this._getCSSStyle().wordWrap=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"leading",function(){return this._getCSSStyle().leading},function(Z$a){this._getCSSStyle().leading=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(Z$a){this._getCSSStyle().backgroundColor=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"borderColor",function(){return this._getCSSStyle().borderColor},function(Z$a){this._getCSSStyle().borderColor=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"stroke",function(){return this._getCSSStyle().stroke},function(Z$a){this._getCSSStyle().stroke=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(Z$a){this._getCSSStyle().strokeColor=Z$a,this.isChanged=!0}),Z$q(0,Z$a,"isChanged",null,function(Z$a){this._isChanged!==Z$a&&(this._isChanged=Z$a)&&Z$z.timer.callLater(this,this.typeset)}),Z$q(0,Z$a,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(Z$a){if(!(this.overflow!=Z$p.SCROLL||this.textWidth<this._width)&&this._clipPoint){Z$a=Z$a<this.padding[3]?this.padding[3]:Z$a;var Z$b=this._textWidth-this._width;Z$a=Z$b<Z$a?Z$b:Z$a;var Z$c=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=Z$a,this.renderText(this._lastVisibleLineIndex,Z$c)}}),Z$q(0,Z$a,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(Z$a){if(!(this.overflow!=Z$p.SCROLL||this.textHeight<this._height)&&this._clipPoint){Z$a=Z$a<this.padding[0]?this.padding[0]:Z$a;var Z$b=this._textHeight-this._height,Z$c=(Z$a=Z$b<Z$a?Z$b:Z$a)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=Z$c;var Z$d=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=Z$a,this.renderText(Z$c,Z$d)}}),Z$q(0,Z$a,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),Z$q(0,Z$a,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),Z$q(0,Z$a,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),Z$q(0,Z$a,"underlineColor",function(){return this._underlineColor},function(Z$a){this._underlineColor=Z$a,this._isChanged=!0,this.typeset()}),Z$p.registerBitmapFont=function(Z$a,Z$b){Z$p._bitmapFonts||(Z$p._bitmapFonts={}),Z$p._bitmapFonts[Z$a]=Z$b},Z$p.unregisterBitmapFont=function(Z$a,Z$b){if(void 0===Z$b&&(Z$b=!0),Z$p._bitmapFonts&&Z$p._bitmapFonts[Z$a]){var Z$c=Z$p._bitmapFonts[Z$a];Z$b&&Z$c.destroy(),delete Z$p._bitmapFonts[Z$a]}},Z$p.setTextRightToLeft=function(){var Z$a;(Z$a=Z$O.canvas.source.style).display="none",Z$a.position="absolute",Z$a.direction="rtl",Z$J._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,Z$O.document.body.appendChild(Z$O.canvas.source)},Z$p.supportFont=function(Z$a){Z$O.context.font="10px sans-serif";var Z$b=Z$$.contextMeasureText("abcji").width;Z$O.context.font="10px "+Z$a;var Z$c=Z$$.contextMeasureText("abcji").width;return console.log(Z$b,Z$c),Z$b!==Z$c},Z$p._testWord="游",Z$p.langPacks=null,Z$p.VISIBLE="visible",Z$p.SCROLL="scroll",Z$p.HIDDEN="hidden",Z$p.CharacterCache=!0,Z$p.RightToLeft=!1,Z$p._bitmapFonts=null,Z$k(Z$p,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),Z$p}(Z$na),Z$ta=function(Z$n){function Z$i(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",Z$i.__super.call(this),this.offset=new Z$A,this._canvasTransform=new Z$G,this._previousOrientation=Z$O.window.orientation;var Z$b=this;this.transform=Z$G.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var Z$a=Z$O.window,Z$c=this;Z$a.addEventListener("focus",function(){Z$b._isFocused=!0,Z$c.event("focus"),Z$c.event("focuschange")}),Z$a.addEventListener("blur",function(){Z$b._isFocused=!1,Z$c.event("blur"),Z$c.event("focuschange"),Z$c._isInputting()&&(Z$xa.inputElement.target.focus=!1)});var Z$d="visibilityState",Z$e="visibilitychange",Z$f=Z$a.document;void 0!==Z$f.hidden?(Z$e="visibilitychange",Z$d="visibilityState"):void 0!==Z$f.mozHidden?(Z$e="mozvisibilitychange",Z$d="mozVisibilityState"):void 0!==Z$f.msHidden?(Z$e="msvisibilitychange",Z$d="msVisibilityState"):void 0!==Z$f.webkitHidden&&(Z$e="webkitvisibilitychange",Z$d="webkitVisibilityState"),Z$a.document.addEventListener(Z$e,function(){"hidden"==Z$O.document[Z$d]?Z$c._setStageVisible(!1):Z$c._setStageVisible(!0)}),Z$a.document.addEventListener("qbrowserVisibilityChange",function(Z$a){Z$c._setStageVisible(!Z$a.hidden)}),Z$a.addEventListener("resize",function(){var Z$a=Z$O.window.orientation;null!=Z$a&&Z$a!=Z$b._previousOrientation&&Z$c._isInputting()&&(Z$xa.inputElement.target.focus=!1),Z$b._previousOrientation=Z$a,Z$c._isInputting()||Z$c._resetCanvas()}),Z$a.addEventListener("orientationchange",function(Z$a){Z$c._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),Z$O.onMobile&&this.on("mousedown",this,this._onmouseMove)}Z$m(Z$i,"laya.display.Stage",Z$n);var Z$a=Z$i.prototype;return Z$a._setStageVisible=function(Z$a){this._isVisibility!=Z$a&&(this._isVisibility=Z$a,this._isVisibility||this._isInputting()&&(Z$xa.inputElement.target.focus=!1),this.event("visibilitychange"))},Z$a._isInputting=function(){return Z$O.onMobile&&Z$xa.isInputting},Z$a._changeCanvasSize=function(){this.setScreenSize(Z$O.clientWidth*Z$O.pixelRatio,Z$O.clientHeight*Z$O.pixelRatio)},Z$a._resetCanvas=function(){if(this.screenAdaptationEnabled){var Z$a=Z$J._mainCanvas;Z$a.source.style;Z$a.size(1,1),Z$z.timer.once(100,this,this._changeCanvasSize)}},Z$a.setScreenSize=function(Z$a,Z$b){var Z$c=!1;if("none"!==this._screenMode&&(Z$c=(Z$a/Z$b<1?"vertical":"horizontal")!==this._screenMode)){var Z$d=Z$b;Z$b=Z$a,Z$a=Z$d}this.canvasRotation=Z$c;var Z$e=Z$J._mainCanvas,Z$f=Z$e.source.style,Z$i=this._canvasTransform.identity(),Z$j=this._scaleMode,Z$k=Z$a/this.designWidth,Z$l=Z$b/this.designHeight,Z$m=this.designWidth,Z$n=this.designHeight,Z$o=Z$a,Z$p=Z$b,Z$q=Z$O.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,Z$j){case"noscale":Z$k=Z$l=1,Z$o=this.designWidth,Z$p=this.designHeight;break;case"showall":Z$k=Z$l=Math.min(Z$k,Z$l),Z$m=Z$o=Math.round(this.designWidth*Z$k),Z$n=Z$p=Math.round(this.designHeight*Z$l);break;case"noborder":Z$k=Z$l=Math.max(Z$k,Z$l),Z$o=Math.round(this.designWidth*Z$k),Z$p=Math.round(this.designHeight*Z$l);break;case"full":Z$k=Z$l=1,this._width=Z$m=Z$a,this._height=Z$n=Z$b;break;case"fixedwidth":Z$l=Z$k,this._height=Z$n=Math.round(Z$b/Z$k);break;case"fixedheight":Z$k=Z$l,this._width=Z$m=Math.round(Z$a/Z$l);break;case"fixedauto":Z$a/Z$b<this.designWidth/this.designHeight?(Z$l=Z$k,this._height=Z$n=Math.round(Z$b/Z$k)):(Z$k=Z$l,this._width=Z$m=Math.round(Z$a/Z$l))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,Z$m=Z$m+1&2147483646,Z$n=Z$n+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),Z$k*=this.scaleX,Z$l*=this.scaleY,1===Z$k&&1===Z$l?this.transform.identity():(this.transform.a=this._formatData(Z$k/(Z$o/Z$m)),this.transform.d=this._formatData(Z$l/(Z$p/Z$n)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),Z$e.size(Z$m,Z$n),Z$F.changeWebGLSize(Z$m,Z$n),Z$i.scale(Z$o/Z$m/Z$q,Z$p/Z$n/Z$q),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(Z$a-Z$o)/Z$q:this.offset.x=.5*(Z$a-Z$o)/Z$q,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(Z$b-Z$p)/Z$q:this.offset.y=.5*(Z$b-Z$p)/Z$q,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),Z$i.translate(this.offset.x,this.offset.y),this.canvasDegree=0,Z$c&&("horizontal"===this._screenMode?(Z$i.rotate(Math.PI/2),Z$i.translate(Z$b/Z$q,0),this.canvasDegree=90):(Z$i.rotate(-Math.PI/2),Z$i.translate(0,Z$a/Z$q),this.canvasDegree=-90)),Z$i.a=this._formatData(Z$i.a),Z$i.d=this._formatData(Z$i.d),Z$i.tx=this._formatData(Z$i.tx),Z$i.ty=this._formatData(Z$i.ty),Z$f.transformOrigin=Z$f.webkitTransformOrigin=Z$f.msTransformOrigin=Z$f.mozTransformOrigin=Z$f.oTransformOrigin="0px 0px 0px",Z$f.transform=Z$f.webkitTransform=Z$f.msTransform=Z$f.mozTransform=Z$f.oTransform="matrix("+Z$i.toString()+")",Z$i.translate(parseInt(Z$f.left)||0,parseInt(Z$f.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},Z$a._formatData=function(Z$a){return Math.abs(Z$a)<1e-6?0:Math.abs(1-Z$a)<.001?0<Z$a?1:-1:Z$a},Z$a.getMousePoint=function(){return Z$A.TEMP.setTo(this.mouseX,this.mouseY)},Z$a.repaint=function(){this._repaint=1},Z$a.parentRepaint=function(){},Z$a._loop=function(){return this.render(Z$J.context,0,0),!0},Z$a._onmouseMove=function(Z$a){this._mouseMoveTime=Z$O.now()},Z$a.getTimeFromFrameStart=function(){return Z$O.now()-this._frameStartTime},Z$a.render=function(Z$a,Z$b,Z$c){if("sleep"===this._frameRate&&!Z$J.isConchApp){var Z$d=Z$O.now();if(!(1e3<=Z$d-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(Z$X.loopCount++,Z$r.instance.runEvent(),Z$z.timer._update()));this._frameStartTime=Z$d}if(this._renderCount++,Z$J.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=Z$O.now();var Z$e="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),Z$f=this._renderCount%2==0;if(Z$X.renderSlow=!Z$e,Z$e||Z$f||Z$J.isConchApp){var Z$i;Z$X.loopCount++,Z$r.instance.runEvent(),Z$z.timer._update(),Z$F.update3DLoop();var Z$j=0,Z$k=0;if(Z$J.isConchNode)for(Z$j=0,Z$k=this._scenes.length;Z$j<Z$k;Z$j++)(Z$i=this._scenes[Z$j])&&Z$i._updateSceneConch();else for(Z$j=0,Z$k=this._scenes.length;Z$j<Z$k;Z$j++)(Z$i=this._scenes[Z$j])&&Z$i._updateScene();if(Z$J.isConchNode){var Z$l=Z$na.CustomList;for(Z$j=0,Z$k=Z$l.length;Z$j<Z$k;Z$j++){var Z$m=Z$l[Z$j];Z$m.customRender(Z$m.customContext,0,0)}return}}Z$J.isConchNode||this.renderingEnabled&&(Z$e||!Z$f||Z$J.isConchWebGL)&&(Z$J.isWebGL?Z$J.WebGL.mainContext&&!Z$J.WebGL.mainContext.isContextLost()&&(Z$a.clear(),Z$n.prototype.render.call(this,Z$a,Z$b,Z$c),Z$X._show&&Z$X._sp&&Z$X._sp.render(Z$a,Z$b,Z$c),Z$F.clear(this._bgColor),Z$F.beginFlush(),Z$a.flush(),Z$F.endFinish(),Z$_.instance&&Z$_.getInstance().endDispose()):(Z$F.clear(this._bgColor),Z$n.prototype.render.call(this,Z$a,Z$b,Z$c),Z$X._show&&Z$X._sp&&Z$X._sp.render(Z$a,Z$b,Z$c)))}else this._renderCount%5==0&&(Z$X.loopCount++,Z$r.instance.runEvent(),Z$z.timer._update())},Z$a._requestFullscreen=function(){var Z$a=Z$O.document.documentElement;Z$a.requestFullscreen?Z$a.requestFullscreen():Z$a.mozRequestFullScreen?Z$a.mozRequestFullScreen():Z$a.webkitRequestFullscreen?Z$a.webkitRequestFullscreen():Z$a.msRequestFullscreen&&Z$a.msRequestFullscreen()},Z$a._fullScreenChanged=function(){Z$z.stage.event("fullscreenchange")},Z$a.exitFullscreen=function(){var Z$a=Z$O.document;Z$a.exitFullscreen?Z$a.exitFullscreen():Z$a.mozCancelFullScreen?Z$a.mozCancelFullScreen():Z$a.webkitExitFullscreen&&Z$a.webkitExitFullscreen()},Z$q(0,Z$a,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),Z$q(0,Z$a,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),Z$q(0,Z$a,"frameRate",function(){return this._frameRate},function(Z$a){if(this._frameRate=Z$a,Z$J.isConchApp)switch(this._frameRate){case"slow":Z$O.window.conch&&Z$O.window.conchConfig.setSlowFrame&&Z$O.window.conchConfig.setSlowFrame(!0);break;case"fast":Z$O.window.conch&&Z$O.window.conchConfig.setSlowFrame&&Z$O.window.conchConfig.setSlowFrame(!1);break;case"mouse":Z$O.window.conch&&Z$O.window.conchConfig.setMouseFrame&&Z$O.window.conchConfig.setMouseFrame(2e3);break;case"sleep":Z$O.window.conch&&Z$O.window.conchConfig.setLimitFPS&&Z$O.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),Z$q(0,Z$a,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),Z$q(0,Z$a,"width",Z$n.prototype._$get_width,function(Z$a){this.designWidth=Z$a,Z$z.superSet(Z$na,this,"width",Z$a),Z$z.timer.callLater(this,this._changeCanvasSize)}),Z$q(0,Z$a,"alignH",function(){return this._alignH},function(Z$a){this._alignH=Z$a,Z$z.timer.callLater(this,this._changeCanvasSize)}),Z$q(0,Z$a,"isFocused",function(){return this._isFocused}),Z$q(0,Z$a,"height",Z$n.prototype._$get_height,function(Z$a){this.designHeight=Z$a,Z$z.superSet(Z$na,this,"height",Z$a),Z$z.timer.callLater(this,this._changeCanvasSize)}),Z$q(0,Z$a,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||Z$G.create()},Z$n.prototype._$set_transform),Z$q(0,Z$a,"isVisibility",function(){return this._isVisibility}),Z$q(0,Z$a,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),Z$q(0,Z$a,"scaleMode",function(){return this._scaleMode},function(Z$a){this._scaleMode=Z$a,Z$z.timer.callLater(this,this._changeCanvasSize)}),Z$q(0,Z$a,"alignV",function(){return this._alignV},function(Z$a){this._alignV=Z$a,Z$z.timer.callLater(this,this._changeCanvasSize)}),Z$q(0,Z$a,"bgColor",function(){return this._bgColor},function(Z$a){this._bgColor=Z$a,this.conchModel&&this.conchModel.bgColor(Z$a),Z$J.isWebGL&&(Z$a?Z$i._wgColor=Z$S.create(Z$a)._color:Z$O.onMiniGame||(Z$i._wgColor=null)),Z$O.onLimixiu?Z$i._wgColor=Z$S.create(Z$a)._color:Z$J.canvas.style.background=Z$a||"none"}),Z$q(0,Z$a,"mouseX",function(){return Math.round(Z$r.instance.mouseX/this.clientScaleX)}),Z$q(0,Z$a,"mouseY",function(){return Math.round(Z$r.instance.mouseY/this.clientScaleY)}),Z$q(0,Z$a,"screenMode",function(){return this._screenMode},function(Z$a){this._screenMode=Z$a}),Z$q(0,Z$a,"visible",Z$n.prototype._$get_visible,function(Z$a){this.visible!==Z$a&&(Z$z.superSet(Z$na,this,"visible",Z$a),Z$J._mainCanvas.source.style.visibility=Z$a?"visible":"hidden")}),Z$q(0,Z$a,"fullScreenEnabled",null,function(Z$a){var Z$b=Z$O.document,Z$c=Z$J.canvas;Z$a?(Z$c.addEventListener("mousedown",this._requestFullscreen),Z$c.addEventListener("touchstart",this._requestFullscreen),Z$b.addEventListener("fullscreenchange",this._fullScreenChanged),Z$b.addEventListener("mozfullscreenchange",this._fullScreenChanged),Z$b.addEventListener("webkitfullscreenchange",this._fullScreenChanged),Z$b.addEventListener("msfullscreenchange",this._fullScreenChanged)):(Z$c.removeEventListener("mousedown",this._requestFullscreen),Z$c.removeEventListener("touchstart",this._requestFullscreen),Z$b.removeEventListener("fullscreenchange",this._fullScreenChanged),Z$b.removeEventListener("mozfullscreenchange",this._fullScreenChanged),Z$b.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),Z$b.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),Z$i.SCALE_NOSCALE="noscale",Z$i.SCALE_EXACTFIT="exactfit",Z$i.SCALE_SHOWALL="showall",Z$i.SCALE_NOBORDER="noborder",Z$i.SCALE_FULL="full",Z$i.SCALE_FIXED_WIDTH="fixedwidth",Z$i.SCALE_FIXED_HEIGHT="fixedheight",Z$i.SCALE_FIXED_AUTO="fixedauto",Z$i.ALIGN_LEFT="left",Z$i.ALIGN_RIGHT="right",Z$i.ALIGN_CENTER="center",Z$i.ALIGN_TOP="top",Z$i.ALIGN_MIDDLE="middle",Z$i.ALIGN_BOTTOM="bottom",Z$i.SCREEN_NONE="none",Z$i.SCREEN_HORIZONTAL="horizontal",Z$i.SCREEN_VERTICAL="vertical",Z$i.FRAME_FAST="fast",Z$i.FRAME_SLOW="slow",Z$i.FRAME_MOUSE="mouse",Z$i.FRAME_SLEEP="sleep",Z$i.FRAME_MOUSE_THREDHOLD=2e3,Z$k(Z$i,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),Z$i}(Z$na),Z$ua=(function(Z$a){function Z$b(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,Z$b.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}Z$m(Z$b,"laya.media.SoundNode",Z$na);var Z$c=Z$b.prototype;Z$c._onParentChange=function(){this.target=this.parent},Z$c.play=function(Z$a,Z$b){void 0===Z$a&&(Z$a=1),isNaN(Z$a)&&(Z$a=1),this.url&&(this.stop(),this._channel=Z$E.playSound(this.url,Z$a,null,Z$b))},Z$c.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},Z$c._setPlayAction=function(Z$a,Z$b,Z$c,Z$d){void 0===Z$d&&(Z$d=!0),this[Z$c]&&Z$a&&(Z$d?Z$a.on(Z$b,this,this[Z$c]):Z$a.off(Z$b,this,this[Z$c]))},Z$c._setPlayActions=function(Z$a,Z$b,Z$c,Z$d){if(void 0===Z$d&&(Z$d=!0),Z$a&&Z$b){var Z$e,Z$f=Z$b.split(","),Z$i=0;for(Z$e=Z$f.length,Z$i=0;Z$i<Z$e;Z$i++)this._setPlayAction(Z$a,Z$f[Z$i],Z$c,Z$d)}},Z$q(0,Z$c,"playEvent",null,function(Z$a){(this._playEvents=Z$a)&&this._tar&&this._setPlayActions(this._tar,Z$a,"play")}),Z$q(0,Z$c,"target",null,function(Z$a){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=Z$a,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),Z$q(0,Z$c,"stopEvent",null,function(Z$a){(this._stopEvents=Z$a)&&this._tar&&this._setPlayActions(this._tar,Z$a,"stop")})}(),function(Z$a){function Z$b(){this._src=null,this._onload=null,this._onerror=null,Z$b.__super.call(this)}Z$m(Z$b,"laya.resource.FileBitmap",Z$qa);var Z$c=Z$b.prototype;return Z$q(0,Z$c,"src",function(){return this._src},function(Z$a){this._src=Z$a}),Z$q(0,Z$c,"onload",null,function(Z$a){}),Z$q(0,Z$c,"onerror",null,function(Z$a){}),Z$b}()),Z$va=function(Z$a){function Z$c(Z$a,Z$b){this._is2D=!1,Z$c.__super.call(this);var Z$d=this;if(this._source=this,"2D"===Z$a||"AUTO"===Z$a&&!Z$J.isWebGL){this._is2D=!0,this._source=Z$b||Z$O.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var Z$e=this;Z$e.getContext=function(Z$a,Z$b){if(Z$d._ctx)return Z$d._ctx;var Z$c=Z$d._ctx=Z$d._source.getContext(Z$a,Z$b);return Z$c&&(Z$c._canvas=Z$e,Z$J.isFlash||Z$O.onLimixiu||(Z$c.size=function(Z$a,Z$b){})),Z$c}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}Z$m(Z$c,"laya.resource.HTMLCanvas",Z$qa);var Z$b=Z$c.prototype;return Z$b.clear=function(){this._ctx&&this._ctx.clear()},Z$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},Z$b.release=function(){},Z$b._setContext=function(Z$a){this._ctx=Z$a},Z$b.getContext=function(Z$a,Z$b){return this._ctx?this._ctx:this._ctx=Z$c._createContext(this)},Z$b.getMemSize=function(){return 0},Z$b.size=function(Z$a,Z$b){(this._w!=Z$a||this._h!=Z$b||this._source&&(this._source.width!=Z$a||this._source.height!=Z$b))&&(this._w=Z$a,this._h=Z$b,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(Z$a,Z$b),this._source&&(this._source.height=Z$b,this._source.width=Z$a))},Z$b.getCanvas=function(){return this._source},Z$b.toBase64=function(Z$a,Z$b,Z$c){if(this._source)if(Z$J.isConchApp&&this._source.toBase64)this._source.toBase64(Z$a,Z$b,Z$c);else{var Z$d=this._source.toDataURL(Z$a,Z$b);Z$c.call(this,Z$d)}},Z$q(0,Z$b,"context",function(){return this._ctx}),Z$q(0,Z$b,"asBitmap",null,function(Z$a){}),Z$c.create=function(Z$a,Z$b){return new Z$c(Z$a,Z$b)},Z$c.TYPE2D="2D",Z$c.TYPE3D="3D",Z$c.TYPEAUTO="AUTO",Z$c._createContext=null,Z$c}(),Z$wa=(function(Z$a){function Z$k(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){throw Z$k.__super.call(this),new Error("不允许new！")}Z$m(Z$k,"laya.resource.HTMLSubImage",Z$qa),Z$k.create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){return void 0===Z$j&&(Z$j=!1),new Z$k(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j)}}(),function(Z$a){function Z$n(){this._frames=null,this._url=null,Z$n.__super.call(this),this._setControlNode(this)}Z$m(Z$n,"laya.display.Animation",Z$a);var Z$b=Z$n.prototype;Z$b.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,Z$a),this._frames=null,this._labels=null},Z$b.play=function(Z$a,Z$b,Z$c,Z$d){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=!0),void 0===Z$c&&(Z$c=""),void 0===Z$d&&(Z$d=!0),Z$c&&this._setFramesFromCache(Z$c,Z$d),this._isPlaying=!0,this.index="string"==typeof Z$a?this._getFrameByLabel(Z$a):Z$a,this.loop=Z$b,this._actionName=Z$c,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},Z$b._setFramesFromCache=function(Z$a,Z$b){var Z$c;return void 0===Z$b&&(Z$b=!1),this._url&&(Z$a=this._url+"#"+Z$a),Z$a&&Z$n.framesMap[Z$a]?((Z$c=Z$n.framesMap[Z$a])instanceof Array?(this._frames=Z$n.framesMap[Z$a],this._count=this._frames.length):(Z$c.nodeRoot&&(Z$n.framesMap[Z$a]=this._parseGraphicAnimationByData(Z$c),Z$c=Z$n.framesMap[Z$a]),this._frames=Z$c.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=Z$c.interval),this._labels=this._copyLabels(Z$c.labels)),!0):(Z$b&&console.log("ani not found:",Z$a),!1)},Z$b._copyLabels=function(Z$a){if(!Z$a)return null;var Z$b,Z$c;for(Z$c in Z$b={},Z$a)Z$b[Z$c]=Z$$.copyArray([],Z$a[Z$c]);return Z$b},Z$b._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&Z$a.prototype._frameLoop.call(this)},Z$b._displayToIndex=function(Z$a){this._frames&&(this.graphics=this._frames[Z$a])},Z$b.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},Z$b.loadImages=function(Z$a,Z$b){return void 0===Z$b&&(Z$b=""),this._url="",this._setFramesFromCache(Z$b)||(this.frames=Z$n.framesMap[Z$b]?Z$n.framesMap[Z$b]:Z$n.createFrames(Z$a,Z$b)),this},Z$b.loadAtlas=function(Z$b,Z$c,Z$d){void 0===Z$d&&(Z$d=""),this._url="";var Z$e=this;function Z$a(Z$a){Z$b===Z$a&&(Z$e.frames=Z$n.framesMap[Z$d]?Z$n.framesMap[Z$d]:Z$n.createFrames(Z$b,Z$d),Z$c&&Z$c.run())}return Z$e._setFramesFromCache(Z$d)||(Z$ja.getAtlas(Z$b)?Z$a(Z$b):Z$z.loader.load(Z$b,Z$u.create(null,Z$a,[Z$b]),null,"atlas")),this},Z$b.loadAnimation=function(Z$a,Z$b,Z$c){this._url=Z$a;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,Z$b&&Z$b.run()):!Z$c||Z$ja.getAtlas(Z$c)?this._loadAnimationData(Z$a,Z$b,Z$c):Z$z.loader.load(Z$c,Z$u.create(this,this._loadAnimationData,[Z$a,Z$b,Z$c]),null,"atlas"),this},Z$b._loadAnimationData=function(Z$j,Z$k,Z$a){var Z$l=this;if(!Z$a||Z$ja.getAtlas(Z$a)){var Z$m=this;Z$ja.getRes(Z$j)?Z$b(Z$j):Z$z.loader.load(Z$j,Z$u.create(null,Z$b,[Z$j]),null,"json"),Z$ja.clearRes(Z$j)}else console.warn("atlas load fail:"+Z$a);function Z$b(Z$a){if(Z$ja.getRes(Z$a)&&Z$j===Z$a){var Z$b;if(Z$n.framesMap[Z$j+"#"])Z$m._setFramesFromCache(Z$l._actionName,!0),Z$l.index=0,Z$l._checkResumePlaying();else{var Z$c=Z$m._parseGraphicAnimation(Z$ja.getRes(Z$j));if(!Z$c)return;var Z$d,Z$e=Z$c.animationList,Z$f=0,Z$i=Z$e.length;for(Z$f=0;Z$f<Z$i;Z$f++)Z$b=Z$e[Z$f],Z$n.framesMap[Z$j+"#"+Z$b.name]=Z$b,Z$d||(Z$d=Z$b);Z$d&&(Z$n.framesMap[Z$j+"#"]=Z$d,Z$m._setFramesFromCache(Z$l._actionName,!0),Z$l.index=0),Z$l._checkResumePlaying()}Z$k&&Z$k.run()}}},Z$b._parseGraphicAnimation=function(Z$a){return Z$za.parseAnimationData(Z$a)},Z$b._parseGraphicAnimationByData=function(Z$a){return Z$za.parseAnimationByData(Z$a)},Z$q(0,Z$b,"frames",function(){return this._frames},function(Z$a){(this._frames=Z$a)&&(this._count=Z$a.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),Z$q(0,Z$b,"autoPlay",null,function(Z$a){Z$a?this.play():this.stop()}),Z$q(0,Z$b,"source",null,function(Z$a){-1<Z$a.indexOf(".ani")?this.loadAnimation(Z$a):-1<Z$a.indexOf(".json")||-1<Z$a.indexOf("als")||-1<Z$a.indexOf("atlas")?this.loadAtlas(Z$a):this.loadImages(Z$a.split(","))}),Z$q(0,Z$b,"autoAnimation",null,function(Z$a){this.play(0,!0,Z$a,!1)}),Z$n.createFrames=function(Z$a,Z$b){var Z$c,Z$d,Z$e=0,Z$f=0;if("string"==typeof Z$a){var Z$i=Z$ja.getAtlas(Z$a);if(Z$i&&Z$i.length)for(Z$c=[],Z$e=0,Z$f=Z$i.length;Z$e<Z$f;Z$e++)(Z$d=new Z$F.createGraphics).drawTexture(Z$ja.getRes(Z$i[Z$e]),0,0),Z$c.push(Z$d)}else if(Z$a instanceof Array)for(Z$c=[],Z$e=0,Z$f=Z$a.length;Z$e<Z$f;Z$e++)(Z$d=new Z$F.createGraphics).loadImage(Z$a[Z$e],0,0),Z$c.push(Z$d);return Z$b&&(Z$n.framesMap[Z$b]=Z$c),Z$c},Z$n.clearCache=function(Z$a){var Z$b,Z$c=Z$n.framesMap,Z$d=Z$a+"#";for(Z$b in Z$c)Z$b!==Z$a&&0!=Z$b.indexOf(Z$d)||delete Z$n.framesMap[Z$b]},Z$n.framesMap={}}(Z$ra),function(Z$a){function Z$f(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,Z$f.__super.call(this),null==Z$f._sortIndexFun&&(Z$f._sortIndexFun=Z$y.sortByKey("index",!1,!0))}Z$m(Z$f,"laya.display.FrameAnimation",Z$a);var Z$b=Z$f.prototype;return Z$b._setUp=function(Z$a,Z$b){this._labels=null,this._animationNewFrames=null,this._targetDic=Z$a,this._animationData=Z$b,this.interval=1e3/Z$b.frameRate,Z$b.parsed?(this._count=Z$b.count,this._labels=Z$b.labels,this._animationNewFrames=Z$b.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),Z$b.parsed=!0,Z$b.labels=this._labels,Z$b.count=this._count,Z$b.animationNewFrames=this._animationNewFrames},Z$b.clear=function(){Z$a.prototype.clear.call(this),this._targetDic=null,this._animationData=null},Z$b._displayToIndex=function(Z$a){if(this._animationData){Z$a<0&&(Z$a=0),Z$a>this._count&&(Z$a=this._count);var Z$b=this._animationData.nodes,Z$c=0,Z$d=Z$b.length;for(Z$c=0;Z$c<Z$d;Z$c++)this._displayNodeToFrame(Z$b[Z$c],Z$a)}},Z$b._displayNodeToFrame=function(Z$a,Z$b,Z$c){Z$c||(Z$c=this._targetDic);var Z$d=Z$c[Z$a.target];if(Z$d){var Z$e,Z$f,Z$i,Z$j=Z$a.frames,Z$k=Z$a.keys,Z$l=0,Z$m=Z$k.length;for(Z$l=0;Z$l<Z$m;Z$l++)Z$i=(Z$f=Z$j[Z$e=Z$k[Z$l]]).length>Z$b?Z$f[Z$b]:Z$f[Z$f.length-1],Z$d[Z$e]=Z$i}},Z$b._calculateDatas=function(){if(this._animationData){var Z$a,Z$b=this._animationData.nodes,Z$c=0,Z$d=Z$b.length;for(Z$c=this._count=0;Z$c<Z$d;Z$c++)Z$a=Z$b[Z$c],this._calculateNodeKeyFrames(Z$a);this._count+=1}},Z$b._calculateNodeKeyFrames=function(Z$a){var Z$b,Z$c,Z$d=Z$a.keyframes,Z$e=Z$a.target;for(Z$b in Z$a.frames||(Z$a.frames={}),Z$a.keys?Z$a.keys.length=0:Z$a.keys=[],Z$a.initValues||(Z$a.initValues={}),Z$d)Z$c=Z$d[Z$b],Z$a.frames[Z$b]||(Z$a.frames[Z$b]=[]),this._targetDic&&this._targetDic[Z$e]&&(Z$a.initValues[Z$b]=this._targetDic[Z$e][Z$b]),Z$c.sort(Z$f._sortIndexFun),Z$a.keys.push(Z$b),this._calculateNodePropFrames(Z$c,Z$a.frames[Z$b],Z$b,Z$e)},Z$b.resetToInitState=function(){if(this._targetDic&&this._animationData){var Z$a,Z$b,Z$c=this._animationData.nodes,Z$d=0,Z$e=Z$c.length;for(Z$d=0;Z$d<Z$e;Z$d++)if(Z$b=(Z$a=Z$c[Z$d]).initValues){var Z$f,Z$i=this._targetDic[Z$a.target];if(Z$i)for(Z$f in Z$b)Z$i[Z$f]=Z$b[Z$f]}}},Z$b._calculateNodePropFrames=function(Z$a,Z$b,Z$c,Z$d){var Z$e=0,Z$f=Z$a.length-1;if(0<Z$f){for(Z$b.length=Z$a[Z$f].index+1,Z$e=0;Z$e<Z$f;Z$e++)this._dealKeyFrame(Z$a[Z$e]),this._calculateFrameValues(Z$a[Z$e],Z$a[Z$e+1],Z$b);this._dealKeyFrame(Z$a[Z$e])}0==Z$f&&(Z$b[Z$a[0].index]=Z$a[0].value,this._animationNewFrames&&(this._animationNewFrames[Z$a[0].index]=!0))},Z$b._dealKeyFrame=function(Z$a){Z$a.label&&""!=Z$a.label&&this.addLabel(Z$a.label,Z$a.index)},Z$b._calculateFrameValues=function(Z$a,Z$b,Z$c){var Z$d,Z$e=0,Z$f=Z$a.index,Z$i=Z$b.index,Z$j=Z$a.value,Z$k=Z$b.value-Z$a.value,Z$l=Z$i-Z$f;if(Z$i>this._count&&(this._count=Z$i),Z$a.tween)for(null==(Z$d=Z$U[Z$a.tweenMethod])&&(Z$d=Z$U.linearNone),Z$e=Z$f;Z$e<Z$i;Z$e++)Z$c[Z$e]=Z$d(Z$e-Z$f,Z$j,Z$k,Z$l),this._animationNewFrames&&(this._animationNewFrames[Z$e]=!0);else for(Z$e=Z$f;Z$e<Z$i;Z$e++)Z$c[Z$e]=Z$j;this._animationNewFrames&&(this._animationNewFrames[Z$a.index]=!0,this._animationNewFrames[Z$b.index]=!0),Z$c[Z$b.index]=Z$b.value},Z$f._sortIndexFun=null,Z$f}(Z$ra)),Z$xa=function(Z$b){function Z$e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",Z$e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=Z$sa.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}Z$m(Z$e,"laya.display.Input",Z$b);var Z$a=Z$e.prototype;return Z$a.setSelection=function(Z$a,Z$b){this.focus=!0,laya.display.Input.inputElement.selectionStart=Z$a,laya.display.Input.inputElement.selectionEnd=Z$b},Z$a._onUnDisplay=function(Z$a){this.focus=!1},Z$a._onMouseDown=function(Z$a){this.focus=!0},Z$a._syncInputTransform=function(){var Z$a=this.nativeInput,Z$b=Z$$.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),Z$c=this._width-this.padding[1]-this.padding[3],Z$d=this._height-this.padding[0]-this.padding[2];Z$J.isConchApp?(Z$a.setScale(Z$b.scaleX,Z$b.scaleY),Z$a.setSize(Z$c,Z$d),Z$a.setPos(Z$b.x,Z$b.y)):(Z$e.inputContainer.style.transform=Z$e.inputContainer.style.webkitTransform="scale("+Z$b.scaleX+","+Z$b.scaleY+") rotate("+Z$z.stage.canvasDegree+"deg)",Z$a.style.width=Z$c+"px",Z$a.style.height=Z$d+"px",Z$e.inputContainer.style.left=Z$b.x+"px",Z$e.inputContainer.style.top=Z$b.y+"px")},Z$a.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},Z$a._setInputMethod=function(){Z$e.input.parentElement&&Z$e.inputContainer.removeChild(Z$e.input),Z$e.area.parentElement&&Z$e.inputContainer.removeChild(Z$e.area),Z$e.inputElement=this._multiline?Z$e.area:Z$e.input,Z$e.inputContainer.appendChild(Z$e.inputElement),Z$sa.RightToLeft&&(Z$e.inputElement.style.direction="rtl")},Z$a._focusIn=function(){laya.display.Input.isInputting=!0;var Z$a=this.nativeInput;this._focus=!0;var Z$b=Z$a.style;Z$b.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),Z$a.readOnly=!this._editable,Z$J.isConchApp&&(Z$a.setType(this._type),Z$a.setForbidEdit(!this._editable)),Z$a.maxLength=this._maxChars;this.padding;if(Z$a.type=this._type,Z$a.value=this._content,Z$a.placeholder=this._prompt,Z$z.stage.off("keydown",this,this._onKeyDown),Z$z.stage.on("keydown",this,this._onKeyDown),(Z$z.stage.focus=this).event("focus"),Z$O.onPC&&Z$a.focus(),!Z$O.onMiniGame){this._text;this._text=null}this.typeset(),Z$a.setColor(this._originColor),Z$a.setFontSize(this.fontSize),Z$a.setFontFace(Z$O.onIPhone&&Z$sa._fontFamilyMap[this.font]||this.font),Z$J.isConchApp&&Z$a.setMultiAble&&Z$a.setMultiAble(this._multiline),Z$b.lineHeight=this.leading+this.fontSize+"px",Z$b.fontStyle=this.italic?"italic":"normal",Z$b.fontWeight=this.bold?"bold":"normal",Z$b.textAlign=this.align,Z$b.padding="0 0",this._syncInputTransform(),!Z$J.isConchApp&&Z$O.onPC&&Z$z.timer.frameLoop(1,this,this._syncInputTransform)},Z$a._setPromptColor=function(){(Z$e.promptStyleDOM=Z$O.getElementById("promptStyle"))||((Z$e.promptStyleDOM=Z$O.createElement("style")).setAttribute("id","promptStyle"),Z$O.document.head.appendChild(Z$e.promptStyleDOM)),Z$e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},Z$a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(Z$z.superSet(Z$sa,this,"text",this._content),Z$z.superSet(Z$sa,this,"color",this._originColor)):(Z$z.superSet(Z$sa,this,"text",this._prompt),Z$z.superSet(Z$sa,this,"color",this._promptColor)),Z$z.stage.off("keydown",this,this._onKeyDown),Z$z.stage.focus=null,this.event("blur"),Z$J.isConchApp&&this.nativeInput.blur(),Z$O.onPC&&Z$z.timer.clear(this,this._syncInputTransform)},Z$a._onKeyDown=function(Z$a){13===Z$a.keyCode&&(Z$O.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},Z$a.changeText=function(Z$a){this._content=Z$a,this._focus?(this.nativeInput.value=Z$a||"",this.event("change")):Z$b.prototype.changeText.call(this,Z$a)},Z$q(0,Z$a,"color",Z$b.prototype._$get_color,function(Z$a){this._focus&&this.nativeInput.setColor(Z$a),Z$z.superSet(Z$sa,this,"color",this._content?Z$a:this._promptColor),this._originColor=Z$a}),Z$q(0,Z$a,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(Z$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),Z$q(0,Z$a,"multiline",function(){return this._multiline},function(Z$a){this._multiline=Z$a,this.valign=Z$a?"top":"middle"}),Z$q(0,Z$a,"maxChars",function(){return this._maxChars},function(Z$a){Z$a<=0&&(Z$a=1e5),this._maxChars=Z$a}),Z$q(0,Z$a,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(Z$a){Z$z.superSet(Z$sa,this,"color",this._originColor),Z$a+="",this._focus?(this.nativeInput.value=Z$a||"",this.event("change")):(this._multiline||(Z$a=Z$a.replace(/\r?\n/g,"")),(this._content=Z$a)?Z$z.superSet(Z$sa,this,"text",Z$a):(Z$z.superSet(Z$sa,this,"text",this._prompt),Z$z.superSet(Z$sa,this,"color",this.promptColor)))}),Z$q(0,Z$a,"nativeInput",function(){return this._multiline?Z$e.area:Z$e.input}),Z$q(0,Z$a,"prompt",function(){return this._prompt},function(Z$a){!this._text&&Z$a&&Z$z.superSet(Z$sa,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?Z$z.superSet(Z$sa,this,"text",this._text==this._prompt?Z$a:this._text):Z$z.superSet(Z$sa,this,"text",Z$a),this._prompt=Z$sa.langPacks&&Z$sa.langPacks[Z$a]?Z$sa.langPacks[Z$a]:Z$a}),Z$q(0,Z$a,"focus",function(){return this._focus},function(Z$a){var Z$b=this.nativeInput;this._focus!==Z$a&&(Z$a?(Z$b.target?Z$b.target._focusOut():this._setInputMethod(),(Z$b.target=this)._focusIn()):(Z$b.target=null,this._focusOut(),Z$O.document.body.scrollTop=0,Z$b.blur(),Z$J.isConchApp?Z$b.setPos(-1e4,-1e4):Z$e.inputContainer.contains(Z$b)&&Z$e.inputContainer.removeChild(Z$b)))}),Z$q(0,Z$a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(Z$a){Z$a?(-1<(Z$a="[^"+Z$a+"]").indexOf("^^")&&(Z$a=Z$a.replace("^^","")),this._restrictPattern=new RegExp(Z$a,"g")):this._restrictPattern=null}),Z$q(0,Z$a,"editable",function(){return this._editable},function(Z$a){this._editable=Z$a,Z$J.isConchApp&&Z$e.input.setForbidEdit(!Z$a)}),Z$q(0,Z$a,"promptColor",function(){return this._promptColor},function(Z$a){this._promptColor=Z$a,this._content||Z$z.superSet(Z$sa,this,"color",Z$a)}),Z$q(0,Z$a,"type",function(){return this._type},function(Z$a){this._getCSSStyle().password="password"==Z$a,this._type=Z$a,Z$J.isConchApp&&this.nativeInput.setType(Z$a)}),Z$q(0,Z$a,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(Z$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),Z$q(0,Z$a,"asPassword",function(){return this._getCSSStyle().password},function(Z$a){this._getCSSStyle().password=Z$a,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),Z$e.__init__=function(){Z$e._createInputElement(),Z$O.onMobile&&Z$J.canvas.addEventListener(Z$e.IOS_IFRAME?Z$O.onMiniGame?"touchend":"click":"touchend",Z$e._popupInputMethod)},Z$e._popupInputMethod=function(Z$a){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},Z$e._createInputElement=function(){Z$e._initInput(Z$e.area=Z$O.createElement("textarea")),Z$e._initInput(Z$e.input=Z$O.createElement("input")),(Z$e.inputContainer=Z$O.createElement("div")).style.position="absolute",Z$e.inputContainer.style.zIndex=1e5,Z$O.container.appendChild(Z$e.inputContainer),Z$e.inputContainer.setPos=function(Z$a,Z$b){Z$e.inputContainer.style.left=Z$a+"px",Z$e.inputContainer.style.top=Z$b+"px"}},Z$e._initInput=function(Z$b){var Z$a=Z$b.style;Z$a.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",Z$a.resize="none",Z$a.backgroundColor="transparent",Z$a.border="none",Z$a.outline="none",Z$a.zIndex=1,Z$b.addEventListener("input",Z$e._processInputting),Z$b.addEventListener("mousemove",Z$e._stopEvent),Z$b.addEventListener("mousedown",Z$e._stopEvent),Z$b.addEventListener("touchmove",Z$e._stopEvent),Z$b.setFontFace=function(Z$a){Z$b.style.fontFamily=Z$a},Z$J.isConchApp||(Z$b.setColor=function(Z$a){Z$b.style.color=Z$a},Z$b.setFontSize=function(Z$a){Z$b.style.fontSize=Z$a+"px"})},Z$e._processInputting=function(Z$a){var Z$b=laya.display.Input.inputElement.target;if(Z$b){var Z$c=laya.display.Input.inputElement.value;Z$b._restrictPattern&&(Z$c=Z$c.replace(/\u2006|\x27/g,""),Z$b._restrictPattern.test(Z$c)&&(Z$c=Z$c.replace(Z$b._restrictPattern,""),laya.display.Input.inputElement.value=Z$c)),Z$b._text=Z$c,Z$b.event("input")}},Z$e._stopEvent=function(Z$a){"touchmove"==Z$a.type&&Z$a.preventDefault(),Z$a.stopPropagation&&Z$a.stopPropagation()},Z$e.TYPE_TEXT="text",Z$e.TYPE_PASSWORD="password",Z$e.TYPE_EMAIL="email",Z$e.TYPE_URL="url",Z$e.TYPE_NUMBER="number",Z$e.TYPE_RANGE="range",Z$e.TYPE_DATE="date",Z$e.TYPE_MONTH="month",Z$e.TYPE_WEEK="week",Z$e.TYPE_TIME="time",Z$e.TYPE_DATE_TIME="datetime",Z$e.TYPE_DATE_TIME_LOCAL="datetime-local",Z$e.TYPE_SEARCH="search",Z$e.input=null,Z$e.area=null,Z$e.inputElement=null,Z$e.inputContainer=null,Z$e.confirmButton=null,Z$e.promptStyleDOM=null,Z$e.inputHeight=45,Z$e.isInputting=!1,Z$e.stageMatrix=null,Z$k(Z$e,["IOS_IFRAME",function(){return this.IOS_IFRAME=Z$O.onIOS&&Z$O.window.top!=Z$O.window.self}]),Z$e}(Z$sa),Z$ya=function(Z$a){function Z$c(Z$a,Z$b){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,Z$c.__super.call(this),Z$a&&this._init_(Z$a,Z$b)}Z$m(Z$c,"laya.resource.HTMLImage",Z$ua);var Z$b=Z$c.prototype;return Z$b._init_=function(Z$a,Z$b){this._src=Z$a,this._source=new Z$O.window.Image,Z$b&&(Z$b.onload&&(this.onload=Z$b.onload),Z$b.onerror&&(this.onerror=Z$b.onerror),Z$b.onCreate&&Z$b.onCreate(this)),0!=Z$a.indexOf("data:image")&&(this._source.crossOrigin=""),Z$a&&(this._source.src=Z$a)},Z$b.recreateResource=function(){var Z$a=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var Z$b=this;this._source=new Z$O.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(Z$b._needReleaseAgain)return Z$b._needReleaseAgain=!1,Z$b._source.onload=null,void(Z$b._source=null);Z$b._source.onload=null,Z$b.memorySize=Z$a._w*Z$a._h*4,Z$b._recreateLock=!1,Z$b.completeCreate()},this._source.src=this._src}},Z$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},Z$b.onresize=function(){this._w=this._source.width,this._h=this._source.height},Z$q(0,Z$b,"onload",null,function(Z$a){var Z$b=this;this._onload=Z$a,this._source&&(this._source.onload=null!=this._onload?function(){Z$b.onresize(),Z$b._onload()}:null)}),Z$q(0,Z$b,"onerror",null,function(Z$a){var Z$b=this;this._onerror=Z$a,this._source&&(this._source.onerror=null!=this._onerror?function(){Z$b._onerror()}:null)}),Z$q(0,Z$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(Z$a){this._enableMerageInAtlas=Z$a,Z$J.isConchApp&&this._source&&(this._source.enableMerageInAtlas=Z$a)}),Z$c.create=function(Z$a,Z$b){return new Z$c(Z$a,Z$b)},Z$c}(),Z$za=(function(Z$f){function Z$a(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,Z$a.__super.call(this)}Z$m(Z$a,"laya.display.EffectAnimation",Z$f);var Z$b=Z$a.prototype;Z$b._onOtherBegin=function(Z$a){Z$a!=this&&this.stop()},Z$b.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},Z$b._onPlayAction=function(){this.play(0,!1)},Z$b.play=function(Z$a,Z$b,Z$c,Z$d){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=!0),void 0===Z$c&&(Z$c=""),void 0===Z$d&&(Z$d=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,Z$a,Z$b,Z$c,Z$d))},Z$b._recordInitData=function(){if(this._aniKeys){var Z$a,Z$b,Z$c=0;for(Z$a=this._aniKeys.length,Z$c=0;Z$c<Z$a;Z$c++)Z$b=this._aniKeys[Z$c],this._initData[Z$b]=this._target[Z$b]}},Z$b._displayToIndex=function(Z$a){if(this._animationData){Z$a<0&&(Z$a=0),Z$a>this._count&&(Z$a=this._count);var Z$b=this._animationData.nodes,Z$c=0,Z$d=Z$b.length;for(Z$d=1<Z$d?1:Z$d,Z$c=0;Z$c<Z$d;Z$c++)this._displayNodeToFrame(Z$b[Z$c],Z$a)}},Z$b._displayNodeToFrame=function(Z$a,Z$b,Z$c){if(this._target){var Z$d;Z$d=this._target;var Z$e,Z$f,Z$i,Z$j,Z$k=Z$a.frames,Z$l=Z$a.keys,Z$m=0,Z$n=Z$l.length;Z$j=Z$a.secondFrames;var Z$o,Z$p,Z$q,Z$r,Z$s=0;for(Z$m=0;Z$m<Z$n;Z$m++)Z$f=Z$k[Z$e=Z$l[Z$m]],Z$i=-1==(Z$s=Z$j[Z$e])?this._initData[Z$e]:Z$b<Z$s?(Z$q=(Z$p=Z$a.keyframes[Z$e])[0]).tween?(null==(Z$o=Z$U[Z$q.tweenMethod])&&(Z$o=Z$U.linearNone),Z$r=Z$p[1],Z$o(Z$b,this._initData[Z$e],Z$r.value-this._initData[Z$e],Z$r.index)):this._initData[Z$e]:Z$f.length>Z$b?Z$f[Z$b]:Z$f[Z$f.length-1],Z$d[Z$e]=Z$i}},Z$b._calculateNodeKeyFrames=function(Z$a){Z$f.prototype._calculateNodeKeyFrames.call(this,Z$a);var Z$b,Z$c,Z$d,Z$e=Z$a.keyframes;Z$a.target;for(Z$b in Z$d={},Z$a.secondFrames=Z$d,Z$e)(Z$c=Z$e[Z$b]).length<=1?Z$d[Z$b]=-1:Z$d[Z$b]=Z$c[1].index},Z$q(0,Z$b,"target",function(){return this._target},function(Z$a){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=Z$a,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),Z$q(0,Z$b,"playEvent",null,function(Z$a){(this._playEvents=Z$a)&&this.addEvent()}),Z$q(0,Z$b,"effectData",null,function(Z$a){var Z$b;Z$a&&((Z$b=Z$a.animations)&&Z$b[0]&&(this._setUp({},Z$b[0]),Z$b[0].nodes&&Z$b[0].nodes[0]&&(this._aniKeys=Z$b[0].nodes[0].keys)))}),Z$q(0,Z$b,"effectClass",null,function(Z$a){var Z$b,Z$c;(this._effectClass=Z$R.getClass(Z$a),this._effectClass)&&((Z$b=this._effectClass.uiView)&&(Z$c=Z$b.animations)&&Z$c[0]&&(this._setUp({},Z$c[0]),Z$c[0].nodes&&Z$c[0].nodes[0]&&(this._aniKeys=Z$c[0].nodes[0].keys)))}),Z$a.EffectAnimationBegin="effectanimationbegin"}(Z$wa),function(Z$b){var Z$D;function Z$E(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,Z$E.__super.call(this)}Z$m(Z$E,"laya.utils.GraphicAnimation",Z$b);var Z$a=Z$E.prototype;return Z$a._parseNodeList=function(Z$a){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[Z$a.compId]=Z$a.props,Z$a.compId&&this._nodeList.push(Z$a.compId);var Z$b=Z$a.child;if(Z$b){var Z$c=0,Z$d=Z$b.length;for(Z$c=0;Z$c<Z$d;Z$c++)this._parseNodeList(Z$b[Z$c])}},Z$a._calGraphicData=function(Z$a){var Z$b;if(this._setUp(null,Z$a),this._createGraphicData(),this._nodeIDAniDic)for(Z$b in this._nodeIDAniDic)this._nodeIDAniDic[Z$b]=null},Z$a._createGraphicData=function(){var Z$a,Z$b=[],Z$c=0,Z$d=this.count,Z$e=this._animationNewFrames;for(Z$e||(Z$e=[]),Z$c=0;Z$c<Z$d;Z$c++)!Z$e[Z$c]&&Z$a||(Z$a=this._createFrameGraphic(Z$c)),Z$b.push(Z$a);this._gList=Z$b},Z$a._createFrameGraphic=function(Z$a){var Z$b=Z$F.createGraphics();return Z$E._rootMatrix||(Z$E._rootMatrix=new Z$G),this._updateNodeGraphic(this._rootNode,Z$a,Z$E._rootMatrix,Z$b),Z$b},Z$a._updateNodeGraphic=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f;void 0===Z$e&&(Z$e=1);var Z$i,Z$j,Z$k,Z$l=(Z$f=this._nodeGDic[Z$a.compId]=this._getNodeGraphicData(Z$a.compId,Z$b,this._nodeGDic[Z$a.compId])).alpha*Z$e;if(!(Z$l<.01)&&(Z$f.resultTransform||(Z$f.resultTransform=Z$G.create()),Z$i=Z$f.resultTransform,Z$G.mul(Z$f.transform,Z$c,Z$i),Z$f.skin&&(Z$j=this._getTextureByUrl(Z$f.skin))&&(Z$i._checkTransform()?(Z$d.drawTexture(Z$j,0,0,Z$f.width,Z$f.height,Z$i,Z$l),Z$f.resultTransform=null):Z$d.drawTexture(Z$j,Z$i.tx,Z$i.ty,Z$f.width,Z$f.height,null,Z$l)),Z$k=Z$a.child)){var Z$m,Z$n=0;for(Z$m=Z$k.length,Z$n=0;Z$n<Z$m;Z$n++)this._updateNodeGraphic(Z$k[Z$n],Z$b,Z$i,Z$d,Z$l)}},Z$a._updateNoChilds=function(Z$a,Z$b){if(Z$a.skin){var Z$c=this._getTextureByUrl(Z$a.skin);if(Z$c){var Z$d=Z$a.transform;Z$d._checkTransform();!Z$d.bTransform?Z$b.drawTexture(Z$c,Z$d.tx,Z$d.ty,Z$a.width,Z$a.height,null,Z$a.alpha):Z$b.drawTexture(Z$c,0,0,Z$a.width,Z$a.height,Z$d.clone(),Z$a.alpha)}}},Z$a._updateNodeGraphic2=function(Z$a,Z$b,Z$c){var Z$d;if(Z$d=this._nodeGDic[Z$a.compId]=this._getNodeGraphicData(Z$a.compId,Z$b,this._nodeGDic[Z$a.compId]),Z$a.child){var Z$e=Z$d.transform;Z$e._checkTransform();var Z$f,Z$i;Z$i=(Z$f=!Z$e.bTransform)&&(0!=Z$e.tx||0!=Z$e.ty);var Z$j,Z$k,Z$l;if((Z$j=Z$e.bTransform||1!=Z$d.alpha)&&Z$c.save(),1!=Z$d.alpha&&Z$c.alpha(Z$d.alpha),Z$f?Z$i&&Z$c.translate(Z$e.tx,Z$e.ty):Z$c.transform(Z$e.clone()),Z$k=Z$a.child,Z$d.skin&&(Z$l=this._getTextureByUrl(Z$d.skin))&&Z$c.drawTexture(Z$l,0,0,Z$d.width,Z$d.height),Z$k){var Z$m,Z$n=0;for(Z$m=Z$k.length,Z$n=0;Z$n<Z$m;Z$n++)this._updateNodeGraphic2(Z$k[Z$n],Z$b,Z$c)}Z$j?Z$c.restore():Z$f?Z$i&&Z$c.translate(-Z$e.tx,-Z$e.ty):Z$c.transform(Z$e.clone().invert())}else this._updateNoChilds(Z$d,Z$c)},Z$a._calculateNodeKeyFrames=function(Z$a){Z$b.prototype._calculateNodeKeyFrames.call(this,Z$a),this._nodeIDAniDic[Z$a.target]=Z$a},Z$a.getNodeDataByID=function(Z$a){return this._nodeIDAniDic[Z$a]},Z$a._getParams=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$E._temParam;Z$e.length=Z$b.length;var Z$f=0,Z$i=Z$b.length;for(Z$f=0;Z$f<Z$i;Z$f++)Z$e[Z$f]=this._getObjVar(Z$a,Z$b[Z$f][0],Z$c,Z$b[Z$f][1],Z$d);return Z$e},Z$a._getObjVar=function(Z$a,Z$b,Z$c,Z$d,Z$e){if(Z$a.hasOwnProperty(Z$b)){var Z$f=Z$a[Z$b];if(Z$c>=Z$f.length&&(Z$c=Z$f.length-1),null!=Z$a[Z$b][Z$c])return Z$a[Z$b][Z$c]}return Z$e.hasOwnProperty(Z$b)?Z$e[Z$b]:Z$d},Z$a._getNodeGraphicData=function(Z$a,Z$b,Z$c){Z$c||(Z$c=Z$D.create()),Z$c.transform?Z$c.transform.identity():Z$c.transform=Z$G.create();var Z$d=this.getNodeDataByID(Z$a);if(!Z$d)return Z$c;var Z$e,Z$f,Z$i=Z$d.frames,Z$j=this._getParams(Z$i,Z$E._drawTextureCmd,Z$b,this._nodeDefaultProps[Z$a]),Z$k=Z$j[0],Z$l=NaN,Z$m=NaN,Z$n=Z$j[5],Z$o=Z$j[6],Z$p=Z$j[13],Z$q=Z$j[14],Z$r=Z$j[7],Z$s=Z$j[8],Z$t=Z$j[9],Z$u=Z$j[11],Z$v=Z$j[12];Z$l=Z$j[3],Z$m=Z$j[4],0!=Z$l&&0!=Z$m||(Z$k=null),-1==Z$l&&(Z$l=0),-1==Z$m&&(Z$m=0),Z$c.skin=Z$k,Z$c.width=Z$l,Z$c.height=Z$m,Z$k&&((Z$e=this._getTextureByUrl(Z$k))?(Z$l||(Z$l=Z$e.sourceWidth),Z$m||(Z$m=Z$e.sourceHeight)):console.warn("lost skin:",Z$k,",you may load pics first")),Z$c.alpha=Z$j[10],Z$f=Z$c.transform,0!=Z$p&&(Z$n=Z$p*Z$l),0!=Z$q&&(Z$o=Z$q*Z$m),0==Z$n&&0==Z$o||Z$f.translate(-Z$n,-Z$o);var Z$w=null;if(Z$t||1!==Z$r||1!==Z$s||Z$u||Z$v){(Z$w=Z$E._tempMt).identity(),Z$w.bTransform=!0;var Z$x=.0174532922222222*(Z$t-Z$u),Z$y=.0174532922222222*(Z$t+Z$v),Z$z=Math.cos(Z$y),Z$A=Math.sin(Z$y),Z$B=Math.sin(Z$x),Z$C=Math.cos(Z$x);Z$w.a=Z$r*Z$z,Z$w.b=Z$r*Z$A,Z$w.c=-Z$s*Z$B,Z$w.d=Z$s*Z$C,Z$w.tx=Z$w.ty=0}return Z$w&&(Z$f=Z$G.mul(Z$f,Z$w,Z$f)),Z$f.translate(Z$j[1],Z$j[2]),Z$c},Z$a._getTextureByUrl=function(Z$a){return Z$ja.getRes(Z$a)},Z$a.setAniData=function(Z$a,Z$b){if(Z$a.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=Z$a,this._parseNodeList(Z$a);var Z$c,Z$d={},Z$e=[],Z$f=Z$a.animations,Z$i=0,Z$j=Z$f.length;for(Z$i=0;Z$i<Z$j;Z$i++)if(Z$c=Z$f[Z$i],this._labels=null,(!Z$b||Z$b==Z$c.name)&&Z$c){try{this._calGraphicData(Z$c)}catch(Z$a){console.warn("parse animation fail:"+Z$c.name+",empty animation created"),this._gList=[]}var Z$k={};Z$k.interval=1e3/Z$c.frameRate,Z$k.frames=this._gList,Z$k.labels=this._labels,Z$k.name=Z$c.name,Z$e.push(Z$k),Z$d[Z$c.name]=Z$k}this.animationList=Z$e,this.animationDic=Z$d}Z$E._temParam.length=0},Z$a.parseByData=function(Z$a){var Z$b,Z$c;Z$b=Z$a.nodeRoot,Z$c=Z$a.aniO,delete Z$a.nodeRoot,delete Z$a.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=Z$b,this._parseNodeList(Z$b),this._labels=null;try{this._calGraphicData(Z$c)}catch(Z$a){console.warn("parse animation fail:"+Z$c.name+",empty animation created"),this._gList=[]}var Z$d=Z$a;return Z$d.interval=1e3/Z$c.frameRate,Z$d.frames=this._gList,Z$d.labels=this._labels,Z$d.name=Z$c.name,Z$d},Z$a.setUpAniData=function(Z$a){if(Z$a.animations){var Z$b,Z$c={},Z$d=[],Z$e=Z$a.animations,Z$f=0,Z$i=Z$e.length;for(Z$f=0;Z$f<Z$i;Z$f++)if(Z$b=Z$e[Z$f]){var Z$j={};Z$j.name=Z$b.name,Z$j.aniO=Z$b,Z$j.nodeRoot=Z$a,Z$d.push(Z$j),Z$c[Z$b.name]=Z$j}this.animationList=Z$d,this.animationDic=Z$c}},Z$a._clear=function(){var Z$a,Z$b;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(Z$a in this._nodeGDic)(Z$b=this._nodeGDic[Z$a])&&Z$b.recover();this._nodeGDic=null},Z$E.parseAnimationByData=function(Z$a){var Z$b;return Z$E._I||(Z$E._I=new Z$E),Z$b=Z$E._I.parseByData(Z$a),Z$E._I._clear(),Z$b},Z$E.parseAnimationData=function(Z$a){var Z$b;return Z$E._I||(Z$E._I=new Z$E),Z$E._I.setUpAniData(Z$a),(Z$b={}).animationList=Z$E._I.animationList,Z$b.animationDic=Z$E._I.animationDic,Z$E._I._clear(),Z$b},Z$E._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],Z$E._temParam=[],Z$E._I=null,Z$E._rootMatrix=null,Z$k(Z$E,["_tempMt",function(){return this._tempMt=new Z$G}]),Z$E.__init$=function(){Z$D=function(){function Z$a(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return Z$m(Z$a,""),Z$a.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),Z$W.recover("GraphicNode",this)},Z$a.create=function(){return Z$W.getItemByClass("GraphicNode",Z$a)},Z$a}()},Z$E}(Z$wa));Z$z.__init([Z$l,Z$ka,Z$J,Z$O,Z$Y,Z$C,Z$a,Z$za])}(window,document,Laya),function(Z$a,Z$b,Z$c){Z$c.un,Z$c.uns,Z$c.static;var Z$d=Z$c.class;Z$c.getset,Z$c.__newvec;new(function(){function Z$a(){}return Z$d(Z$a,"LayaMain"),Z$a}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(Z$a,Z$b){"use strict";for(var Z$c in Object.defineProperty(Z$b,"__esModule",{value:!0}),Laya){var Z$d=Laya[Z$c];Z$d&&Z$d.__isclass&&(Z$b[Z$c]=Z$d)}}),function(Z$a,Z$b,Z$y){Z$y.un,Z$y.uns;var Z$i=Z$y.static,Z$o=Z$y.class,Z$d=Z$y.getset,Z$f=Z$y.__newvec,Z$m=laya.maths.Arith,Z$n=laya.maths.Bezier,Z$c=laya.resource.Bitmap,Z$p=laya.utils.Browser,Z$k=laya.utils.Byte,Z$q=laya.utils.Color,Z$z=(laya.filters.ColorFilter,Z$y.Config),Z$e=laya.resource.Context,Z$A=(laya.events.Event,laya.filters.Filter),Z$j=laya.display.Graphics,Z$l=laya.resource.HTMLCanvas,Z$r=(laya.utils.HTMLChar,laya.resource.HTMLImage),Z$s=laya.resource.HTMLSubImage,Z$B=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),Z$C=laya.maths.Point,Z$D=laya.maths.Rectangle,Z$t=laya.renders.Render,Z$u=(laya.renders.RenderContext,laya.renders.RenderSprite),Z$v=laya.resource.Resource,Z$w=laya.resource.ResourceManager,Z$x=laya.utils.RunDriver,Z$E=laya.display.Sprite,Z$F=laya.display.Stage,Z$G=laya.utils.Stat,Z$H=laya.utils.StringKey,Z$I=(laya.display.css.Style,laya.system.System),Z$J=laya.display.Text,Z$K=laya.resource.Texture,Z$L=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),Z$M=laya.utils.VectorGraphManager;laya.utils.WordText;Z$y.interface("laya.webgl.shapes.IShape"),Z$y.interface("laya.webgl.submit.ISubmit"),Z$y.interface("laya.webgl.text.ICharSegment"),Z$y.interface("laya.webgl.canvas.save.ISaveData"),Z$y.interface("laya.webgl.resource.IMergeAtlasBitmap"),Z$y.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var Z$N=function(){function Z$a(){}Z$o(Z$a,"laya.filters.webgl.FilterActionGL");var Z$b=Z$a.prototype;return Z$y.imps(Z$b,{"laya.filters.IFilterActionGL":!0}),Z$b.setValue=function(Z$a){},Z$b.setValueMix=function(Z$a){},Z$b.apply3d=function(Z$a,Z$b,Z$c,Z$d,Z$e){return null},Z$b.apply=function(Z$a){return null},Z$d(0,Z$b,"typeMix",function(){return 0}),Z$a}(),Z$O=function(){function Z$a(){}return Z$o(Z$a,"laya.webgl.shader.ShaderValue"),Z$a}(),Z$P=function(){var Z$d,Z$e;function Z$a(Z$a,Z$b,Z$c){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new Z$e,void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),this._cells=null,this._rowInfo=null,this._init(Z$a,Z$b),this._atlasID=Z$c}Z$o(Z$a,"laya.webgl.atlas.AtlasGrid");var Z$b=Z$a.prototype;return Z$b.getAltasID=function(){return this._atlasID},Z$b.setAltasID=function(Z$a){0<=Z$a&&(this._atlasID=Z$a)},Z$b.addTex=function(Z$a,Z$b,Z$c){var Z$d=this._get(Z$b,Z$c);return 0==Z$d.ret||(this._fill(Z$d.x,Z$d.y,Z$b,Z$c,Z$a),this._texCount++),Z$d},Z$b._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},Z$b._init=function(Z$a,Z$b){if(this._width=Z$a,this._height=Z$b,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=Z$f(this._height);for(var Z$c=0;Z$c<this._height;Z$c++)this._rowInfo[Z$c]=new Z$d;return this._clear(),!0},Z$b._get=function(Z$a,Z$b){var Z$c=new Z$R;if(Z$a>=this._failSize.width&&Z$b>=this._failSize.height)return Z$c;for(var Z$d=-1,Z$e=-1,Z$f=this._width,Z$i=this._height,Z$j=this._cells,Z$k=0;Z$k<Z$i;Z$k++)if(!(this._rowInfo[Z$k].spaceCount<Z$a))for(var Z$l=0;Z$l<Z$f;){var Z$m=3*(Z$k*Z$f+Z$l);if(0!=Z$j[Z$m]||Z$j[1+Z$m]<Z$a||Z$j[2+Z$m]<Z$b)Z$l+=Z$j[1+Z$m];else{Z$d=Z$l,Z$e=Z$k;for(var Z$n=0;Z$n<Z$a;Z$n++)if(Z$j[3*Z$n+Z$m+2]<Z$b){Z$d=-1;break}if(!(Z$d<0))return Z$c.ret=!0,Z$c.x=Z$d,Z$c.y=Z$e,Z$c;Z$l+=Z$j[1+Z$m]}}return Z$c},Z$b._fill=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=this._width,Z$i=this._height;this._check(Z$a+Z$c<=Z$f&&Z$b+Z$d<=Z$i);for(var Z$j=Z$b;Z$j<Z$d+Z$b;++Z$j){this._check(this._rowInfo[Z$j].spaceCount>=Z$c),this._rowInfo[Z$j].spaceCount-=Z$c;for(var Z$k=0;Z$k<Z$c;Z$k++){var Z$l=3*(Z$a+Z$j*Z$f+Z$k);this._check(0==this._cells[Z$l]),this._cells[Z$l]=Z$e,this._cells[1+Z$l]=Z$c,this._cells[2+Z$l]=Z$d}}if(0<Z$a)for(Z$j=0;Z$j<Z$d;++Z$j){var Z$m=0;for(Z$k=Z$a-1;0<=Z$k&&0==this._cells[3*((Z$b+Z$j)*Z$f+Z$k)];--Z$k,++Z$m);for(Z$k=Z$m;0<Z$k;--Z$k)this._cells[3*((Z$b+Z$j)*Z$f+Z$a-Z$k)+1]=Z$k,this._check(0<Z$k)}if(0<Z$b)for(Z$k=Z$a;Z$k<Z$a+Z$c;++Z$k){for(Z$m=0,Z$j=Z$b-1;0<=Z$j&&0==this._cells[3*(Z$k+Z$j*Z$f)];--Z$j,Z$m++);for(Z$j=Z$m;0<Z$j;--Z$j)this._cells[3*(Z$k+(Z$b-Z$j)*Z$f)+2]=Z$j,this._check(0<Z$j)}},Z$b._check=function(Z$a){0==Z$a&&console.log("xtexMerger 错误啦")},Z$b._clear=function(){for(var Z$a=this._texCount=0;Z$a<this._height;Z$a++)this._rowInfo[Z$a].spaceCount=this._width;for(var Z$b=0;Z$b<this._height;Z$b++)for(var Z$c=0;Z$c<this._width;Z$c++){var Z$d=3*(Z$b*this._width+Z$c);this._cells[Z$d]=0,this._cells[1+Z$d]=this._width-Z$c,this._cells[2+Z$d]=this._width-Z$b}this._failSize.width=this._width+1,this._failSize.height=this._height+1},Z$a.__init$=function(){Z$d=function(){function Z$a(){this.spaceCount=0}return Z$o(Z$a,""),Z$a}(),Z$e=function(){function Z$a(){this.width=0,this.height=0}return Z$o(Z$a,""),Z$a}()},Z$a}(),Z$Q=function(){function Z$t(Z$a,Z$b,Z$c,Z$d){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=Z$a,this._height=Z$b,this._gridSize=Z$c,this._maxAtlaserCount=Z$d,this._gridNumX=Z$a/Z$c,this._gridNumY=Z$b/Z$c,this._curAtlasIndex=0,this._atlaserArray=[]}Z$o(Z$t,"laya.webgl.atlas.AtlasResourceManager");var Z$a=Z$t.prototype;return Z$a.setAtlasParam=function(Z$a,Z$b,Z$c,Z$d){if(1==this._setAtlasParam)return Z$t._sid_=0,this._width=Z$a,this._height=Z$b,this._gridSize=Z$c,this._maxAtlaserCount=Z$d,this._gridNumX=Z$a/Z$c,this._gridNumY=Z$b/Z$c,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},Z$a.pushData=function(Z$a){var Z$b,Z$c=Z$a.bitmap,Z$d=-1,Z$e=null,Z$f=0,Z$i=0;for(Z$f=0,Z$b=this._atlaserArray.length;Z$f<Z$b&&(Z$i=(this._curAtlasIndex+Z$f)%Z$b,-1==(Z$d=(Z$e=this._atlaserArray[Z$i]).findBitmapIsExist(Z$c)));Z$f++);if(-1!=Z$d){var Z$j=Z$e.InAtlasWebGLImagesOffsetValue[Z$d];return Z$q=Z$j[0],Z$r=Z$j[1],Z$e.addToAtlas(Z$a,Z$q,Z$r),!0}this._setAtlasParam=!1;for(var Z$k=Math.ceil((Z$a.bitmap.width+2)/this._gridSize),Z$l=Math.ceil((Z$a.bitmap.height+2)/this._gridSize),Z$m=!1,Z$n=0;Z$n<2;Z$n++){var Z$o=this._maxAtlaserCount;for(Z$f=0;Z$f<Z$o;Z$f++){Z$i=(this._curAtlasIndex+Z$f)%Z$o,this._atlaserArray.length-1>=Z$i||this._atlaserArray.push(new Z$Da(this._gridNumX,this._gridNumY,this._width,this._height,Z$t._sid_++));var Z$p=this._atlaserArray[Z$i],Z$q=0,Z$r=0,Z$s=Z$p.addTex(1,Z$k,Z$l);if(Z$s.ret){Z$q=Z$s.x*this._gridSize+1,Z$r=Z$s.y*this._gridSize+1,Z$c.lock=!0,Z$p.addToAtlasTexture(Z$c,Z$q,Z$r),Z$p.addToAtlas(Z$a,Z$q,Z$r),Z$m=!0,this._curAtlasIndex=Z$i;break}}if(Z$m)break;this._atlaserArray.push(new Z$Da(this._gridNumX,this._gridNumY,this._width,this._height,Z$t._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return Z$m||console.log(">>>AtlasManager pushData error"),Z$m},Z$a.addToAtlas=function(Z$a){laya.webgl.atlas.AtlasResourceManager.instance.pushData(Z$a)},Z$a.garbageCollection=function(){if(!0===this._needGC){for(var Z$a=this._atlaserArray.length-this._maxAtlaserCount,Z$b=0;Z$b<Z$a;Z$b++)this._atlaserArray[Z$b].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+Z$a),this._atlaserArray.splice(0,Z$a),this._needGC=!1}return!0},Z$a.freeAll=function(){for(var Z$a=0,Z$b=this._atlaserArray.length;Z$a<Z$b;Z$a++)this._atlaserArray[Z$a].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},Z$a.getAtlaserCount=function(){return this._atlaserArray.length},Z$a.getAtlaserByIndex=function(Z$a){return this._atlaserArray[Z$a]},Z$d(1,Z$t,"instance",function(){return Z$t._Instance||(Z$t._Instance=new Z$t(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),Z$t._Instance}),Z$d(1,Z$t,"enabled",function(){return Z$z.atlasEnable}),Z$d(1,Z$t,"atlasLimitWidth",function(){return Z$t._atlasLimitWidth},function(Z$a){Z$t._atlasLimitWidth=Z$a}),Z$d(1,Z$t,"atlasLimitHeight",function(){return Z$t._atlasLimitHeight},function(Z$a){Z$t._atlasLimitHeight=Z$a}),Z$t._enable=function(){Z$z.atlasEnable=!0},Z$t._disable=function(){Z$z.atlasEnable=!1},Z$t.__init__=function(){Z$t.atlasTextureWidth=2048,Z$t.atlasTextureHeight=2048,Z$t.maxTextureCount=6,Z$t.atlasLimitWidth=512,Z$t.atlasLimitHeight=512},Z$t._atlasLimitWidth=0,Z$t._atlasLimitHeight=0,Z$t.gridSize=16,Z$t.atlasTextureWidth=0,Z$t.atlasTextureHeight=0,Z$t.maxTextureCount=0,Z$t._atlasRestore=0,Z$t.BOARDER_TYPE_NO=0,Z$t.BOARDER_TYPE_RIGHT=1,Z$t.BOARDER_TYPE_LEFT=2,Z$t.BOARDER_TYPE_BOTTOM=4,Z$t.BOARDER_TYPE_TOP=8,Z$t.BOARDER_TYPE_ALL=15,Z$t._sid_=0,Z$t._Instance=null,Z$t}(),Z$R=function(){function Z$a(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return Z$o(Z$a,"laya.webgl.atlas.MergeFillInfo"),Z$a}(),Z$S=function(){function Z$b(){}return Z$o(Z$b,"laya.webgl.canvas.BlendMode"),Z$b._init_=function(Z$a){Z$b.fns=[Z$b.BlendNormal,Z$b.BlendAdd,Z$b.BlendMultiply,Z$b.BlendScreen,Z$b.BlendOverlay,Z$b.BlendLight,Z$b.BlendMask,Z$b.BlendDestinationOut],Z$b.targetFns=[Z$b.BlendNormalTarget,Z$b.BlendAddTarget,Z$b.BlendMultiplyTarget,Z$b.BlendScreenTarget,Z$b.BlendOverlayTarget,Z$b.BlendLightTarget,Z$b.BlendMask,Z$b.BlendDestinationOut]},Z$b.BlendNormal=function(Z$a){Z$a.blendFunc(1,771)},Z$b.BlendAdd=function(Z$a){Z$a.blendFunc(1,772)},Z$b.BlendMultiply=function(Z$a){Z$a.blendFunc(774,771)},Z$b.BlendScreen=function(Z$a){Z$a.blendFunc(1,1)},Z$b.BlendOverlay=function(Z$a){Z$a.blendFunc(1,769)},Z$b.BlendLight=function(Z$a){Z$a.blendFunc(1,1)},Z$b.BlendNormalTarget=function(Z$a){Z$a.blendFunc(1,771)},Z$b.BlendAddTarget=function(Z$a){Z$a.blendFunc(1,772)},Z$b.BlendMultiplyTarget=function(Z$a){Z$a.blendFunc(774,771)},Z$b.BlendScreenTarget=function(Z$a){Z$a.blendFunc(1,1)},Z$b.BlendOverlayTarget=function(Z$a){Z$a.blendFunc(1,769)},Z$b.BlendLightTarget=function(Z$a){Z$a.blendFunc(1,1)},Z$b.BlendMask=function(Z$a){Z$a.blendFunc(0,770)},Z$b.BlendDestinationOut=function(Z$a){Z$a.blendFunc(0,0)},Z$b.activeBlendFunction=null,Z$b.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],Z$b.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},Z$b.NORMAL="normal",Z$b.ADD="add",Z$b.MULTIPLY="multiply",Z$b.SCREEN="screen",Z$b.LIGHT="light",Z$b.OVERLAY="overlay",Z$b.DESTINATIONOUT="destination-out",Z$b.fns=[],Z$b.targetFns=[],Z$b}(),Z$T=function(){function Z$c(Z$a){this._color=Z$q.create("black"),this.setValue(Z$a)}Z$o(Z$c,"laya.webgl.canvas.DrawStyle");var Z$a=Z$c.prototype;return Z$a.setValue=function(Z$a){if(Z$a){if("string"==typeof Z$a)return void(this._color=Z$q.create(Z$a));if(Z$a instanceof laya.utils.Color)return void(this._color=Z$a)}},Z$a.reset=function(){this._color=Z$q.create("black")},Z$a.equal=function(Z$a){return"string"==typeof Z$a?this._color.strColor===Z$a:Z$a instanceof laya.utils.Color&&this._color.numColor===Z$a.numColor},Z$a.toColorStr=function(){return this._color.strColor},Z$c.create=function(Z$a){var Z$b;if(Z$a&&("string"==typeof Z$a?Z$b=Z$q.create(Z$a):Z$a instanceof laya.utils.Color&&(Z$b=Z$a),Z$b))return Z$b._drawStyle||(Z$b._drawStyle=new Z$c(Z$a));return laya.webgl.canvas.DrawStyle.DEFAULT},Z$i(Z$c,["DEFAULT",function(){return this.DEFAULT=new Z$c("#000000")}]),Z$c}(),Z$U=function(){function Z$a(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];Z$wa.mainContext;this.ib=Z$ga.create(35048),this.vb=Z$ha.create(5)}Z$o(Z$a,"laya.webgl.canvas.Path");var Z$b=Z$a.prototype;return Z$b.addPoint=function(Z$a,Z$b){this.tempArray.push(Z$a,Z$b)},Z$b.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},Z$b.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},Z$b.polygon=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i;return this.geomatrys.push(this._curGeomatry=Z$i=new Z$Ha(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f)),Z$d||(Z$i.fill=!1),null==Z$f&&(Z$i.borderWidth=0),Z$i},Z$b.setGeomtry=function(Z$a){this.geomatrys.push(this._curGeomatry=Z$a)},Z$b.drawLine=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f;return this.closePath?this.geomatrys.push(this._curGeomatry=Z$f=new Z$Ga(Z$a,Z$b,Z$c,Z$d,Z$e)):this.geomatrys.push(this._curGeomatry=Z$f=new Z$Fa(Z$a,Z$b,Z$c,Z$d,Z$e)),Z$f.fill=!1,Z$f},Z$b.update=function(){var Z$a=this.ib._byteLength,Z$b=this.geomatrys.length;this.offset=Z$a;for(var Z$c=this.geoStart;Z$c<Z$b;Z$c++)this.geomatrys[Z$c].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=Z$b,this.count=(this.ib._byteLength-Z$a)/Z$ra.BYTES_PIDX},Z$b.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},Z$b.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},Z$a}(),Z$V=function(){function Z$j(){}Z$o(Z$j,"laya.webgl.canvas.save.SaveBase");var Z$a=Z$j.prototype;return Z$y.imps(Z$a,{"laya.webgl.canvas.save.ISaveData":!0}),Z$a.isSaveMark=function(){return!1},Z$a.restore=function(Z$a){this._dataObj[this._valueName]=this._value,(Z$j._cache[Z$j._cache._length++]=this)._newSubmit&&(Z$a._curSubmit=Z$fa.RENDERBASE,Z$a._renderKey=0)},Z$j._createArray=function(){var Z$a=[];return Z$a._length=0,Z$a},Z$j._init=function(){var Z$a=Z$j._namemap={};return Z$a[1]="ALPHA",Z$a[2]="fillStyle",Z$a[8]="font",Z$a[256]="lineWidth",Z$a[512]="strokeStyle",Z$a[8192]="_mergeID",Z$a[1024]=Z$a[2048]=Z$a[4096]=[],Z$a[16384]="textBaseline",Z$a[32768]="textAlign",Z$a[65536]="_nBlendType",Z$a[1048576]="shader",Z$a[2097152]="filters",Z$a},Z$j.save=function(Z$a,Z$b,Z$c,Z$d){if((Z$a._saveMark._saveuse&Z$b)!==Z$b){Z$a._saveMark._saveuse|=Z$b;var Z$e=Z$j._cache,Z$f=0<Z$e._length?Z$e[--Z$e._length]:new Z$j;Z$f._value=Z$c[Z$f._valueName=Z$j._namemap[Z$b]],Z$f._dataObj=Z$c,Z$f._newSubmit=Z$d;var Z$i=Z$a._save;Z$i[Z$i._length++]=Z$f}},Z$j._cache=laya.webgl.canvas.save.SaveBase._createArray(),Z$j._namemap=Z$j._init(),Z$j}(),Z$W=function(){function Z$f(){this._clipRect=new Z$D}Z$o(Z$f,"laya.webgl.canvas.save.SaveClipRect");var Z$a=Z$f.prototype;return Z$y.imps(Z$a,{"laya.webgl.canvas.save.ISaveData":!0}),Z$a.isSaveMark=function(){return!1},Z$a.restore=function(Z$a){Z$a._clipRect=this._clipSaveRect,(Z$f._cache[Z$f._cache._length++]=this)._submitScissor.submitLength=Z$a._submits._length-this._submitScissor.submitIndex,Z$a._curSubmit=Z$fa.RENDERBASE,Z$a._renderKey=0},Z$f.save=function(Z$a,Z$b){if(131072!=(131072&Z$a._saveMark._saveuse)){Z$a._saveMark._saveuse|=131072;var Z$c=Z$f._cache,Z$d=0<Z$c._length?Z$c[--Z$c._length]:new Z$f;Z$d._clipSaveRect=Z$a._clipRect,Z$a._clipRect=Z$d._clipRect.copyFrom(Z$a._clipRect),Z$d._submitScissor=Z$b;var Z$e=Z$a._save;Z$e[Z$e._length++]=Z$d}},Z$i(Z$f,["_cache",function(){return this._cache=Z$V._createArray()}]),Z$f}(),Z$X=function(){function Z$p(){this._contextX=0,this._contextY=0,this._clipRect=new Z$D,this._rect=new Z$D,this._matrix=new Z$B}Z$o(Z$p,"laya.webgl.canvas.save.SaveClipRectStencil");var Z$a=Z$p.prototype;return Z$y.imps(Z$a,{"laya.webgl.canvas.save.ISaveData":!0}),Z$a.isSaveMark=function(){return!1},Z$a.restore=function(Z$a){Z$ma.restore(Z$a,this._rect,this._saveMatrix,this._contextX,this._contextY),Z$a._clipRect=this._clipSaveRect,Z$a._curMat=this._saveMatrix,Z$a._x=this._contextX,Z$a._y=this._contextY,Z$p._cache[Z$p._cache._length++]=this,Z$a._curSubmit=Z$fa.RENDERBASE},Z$p.save=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){if(262144!=(262144&Z$a._saveMark._saveuse)){Z$a._saveMark._saveuse|=262144;var Z$m=Z$p._cache,Z$n=0<Z$m._length?Z$m[--Z$m._length]:new Z$p;Z$n._clipSaveRect=Z$a._clipRect,Z$n._clipRect.setTo(Z$i,Z$j,Z$k,Z$l),Z$a._clipRect=Z$n._clipRect,Z$n._rect.x=Z$c,Z$n._rect.y=Z$d,Z$n._rect.width=Z$e,Z$n._rect.height=Z$f,Z$n._contextX=Z$a._x,Z$n._contextY=Z$a._y,Z$n._saveMatrix=Z$a._curMat,Z$a._curMat.copyTo(Z$n._matrix),Z$a._curMat=Z$n._matrix,Z$n._submitStencil=Z$b;var Z$o=Z$a._save;Z$o[Z$o._length++]=Z$n}},Z$i(Z$p,["_cache",function(){return this._cache=Z$V._createArray()}]),Z$p}(),Z$Y=function(){function Z$d(){this._saveuse=0}Z$o(Z$d,"laya.webgl.canvas.save.SaveMark");var Z$a=Z$d.prototype;return Z$y.imps(Z$a,{"laya.webgl.canvas.save.ISaveData":!0}),Z$a.isSaveMark=function(){return!0},Z$a.restore=function(Z$a){Z$a._saveMark=this._preSaveMark,Z$d._no[Z$d._no._length++]=this},Z$d.Create=function(Z$a){var Z$b=Z$d._no,Z$c=0<Z$b._length?Z$b[--Z$b._length]:new Z$d;return Z$c._saveuse=0,Z$c._preSaveMark=Z$a._saveMark,Z$a._saveMark=Z$c},Z$i(Z$d,["_no",function(){return this._no=Z$V._createArray()}]),Z$d}(),Z$Z=function(){function Z$f(){this._matrix=new Z$B}Z$o(Z$f,"laya.webgl.canvas.save.SaveTransform");var Z$a=Z$f.prototype;return Z$y.imps(Z$a,{"laya.webgl.canvas.save.ISaveData":!0}),Z$a.isSaveMark=function(){return!1},Z$a.restore=function(Z$a){Z$a._curMat=this._savematrix,Z$f._no[Z$f._no._length++]=this},Z$f.save=function(Z$a){var Z$b=Z$a._saveMark;if(2048!=(2048&Z$b._saveuse)){Z$b._saveuse|=2048;var Z$c=Z$f._no,Z$d=0<Z$c._length?Z$c[--Z$c._length]:new Z$f;Z$d._savematrix=Z$a._curMat,Z$a._curMat=Z$a._curMat.copyTo(Z$d._matrix);var Z$e=Z$a._save;Z$e[Z$e._length++]=Z$d}},Z$i(Z$f,["_no",function(){return this._no=Z$V._createArray()}]),Z$f}(),Z$$=function(){function Z$e(){}Z$o(Z$e,"laya.webgl.canvas.save.SaveTranslate");var Z$a=Z$e.prototype;return Z$y.imps(Z$a,{"laya.webgl.canvas.save.ISaveData":!0}),Z$a.isSaveMark=function(){return!1},Z$a.restore=function(Z$a){Z$a._curMat;Z$a._x=this._x,Z$a._y=this._y,Z$e._no[Z$e._no._length++]=this},Z$e.save=function(Z$a){var Z$b=Z$e._no,Z$c=0<Z$b._length?Z$b[--Z$b._length]:new Z$e;Z$c._x=Z$a._x,Z$c._y=Z$a._y;var Z$d=Z$a._save;Z$d[Z$d._length++]=Z$c},Z$i(Z$e,["_no",function(){return this._no=Z$V._createArray()}]),Z$e}(),Z$_=function(){function Z$a(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new Z$D}Z$o(Z$a,"laya.webgl.resource.RenderTargetMAX");var Z$b=Z$a.prototype;return Z$b.setSP=function(Z$a){this._sp=Z$a},Z$b.size=function(Z$a,Z$b){var Z$c=this;this._width!==Z$a||this._height!==Z$b?(this.repaint=!0,this._width=Z$a,this._height=Z$b,this.target?this.target.size(Z$a,Z$b):this.target=Z$Ma.create(Z$a,Z$b),this.target.hasListener("recovered")||this.target.on("recovered",this,function(Z$a){Z$y.timer.callLater(Z$c._sp,Z$c._sp.repaint)})):this.target.size(Z$a,Z$b)},Z$b._flushToTarget=function(Z$a,Z$b){if(!Z$b._destroy){var Z$c=Z$ua.worldScissorTest,Z$d=Z$ua.worldClipRect;Z$ua.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,Z$ua.worldScissorTest=!1,Z$wa.mainContext.disable(3089);var Z$e=Z$ua.worldAlpha,Z$f=Z$ua.worldMatrix4,Z$i=Z$ua.worldMatrix,Z$j=Z$ua.worldFilters,Z$k=Z$ua.worldShaderDefines;if(Z$ua.worldMatrix=Z$B.EMPTY,Z$ua.restoreTempArray(),Z$ua.worldMatrix4=Z$ua.TEMPMAT4_ARRAY,Z$ua.worldAlpha=1,Z$ua.worldFilters=null,Z$ua.worldShaderDefines=null,Z$La.activeShader=null,Z$b.start(),Z$z.showCanvasMark?Z$b.clear(0,1,0,.3):Z$b.clear(0,0,0,0),Z$a.flush(),Z$b.end(),Z$La.activeShader=null,Z$ua.worldAlpha=Z$e,Z$ua.worldMatrix4=Z$f,Z$ua.worldMatrix=Z$i,Z$ua.worldFilters=Z$j,Z$ua.worldShaderDefines=Z$k,Z$ua.worldScissorTest=Z$c){var Z$l=Z$ua.height-Z$d.y-Z$d.height;Z$wa.mainContext.scissor(Z$d.x,Z$l,Z$d.width,Z$d.height),Z$wa.mainContext.enable(3089)}Z$ua.worldClipRect=Z$d}},Z$b.flush=function(Z$a){this.repaint&&(this._flushToTarget(Z$a,this.target),this.repaint=!1)},Z$b.drawTo=function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$a.drawTexture(this.target.getTexture(),Z$b,Z$c,Z$d,Z$e,0,0)},Z$b.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},Z$a}(),Z$g=function(){function Z$a(){this.ALPHA=1,this.shaderType=0,this.defines=new Z$Ea}return Z$o(Z$a,"laya.webgl.shader.d2.Shader2D"),Z$a.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},Z$a.__init__=function(){var Z$a,Z$b;Z$Ya.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),Z$Ya.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),Z$Ya.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),Z$Ya.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),Z$Ya.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),Z$Ya.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),Z$Ya.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),Z$Ya.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),Z$a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",Z$b='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',Z$Ya.preCompile2D(0,1,Z$a,Z$b,null),Z$a="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",Z$b='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',Z$Ya.preCompile2D(0,2,Z$a,Z$b,null),Z$a="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",Z$b="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",Z$Ya.preCompile2D(0,4,Z$a,Z$b,null),Z$a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",Z$b='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',Z$Ya.preCompile2D(0,256,Z$a,Z$b,null),Z$a="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",Z$b="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",Z$Ya.preCompile2D(0,512,Z$a,Z$b,null)},Z$a}(),Z$h=function(){function Z$b(Z$a,Z$b,Z$c){this._value=0,this._name2int=Z$a,this._int2name=Z$b,this._int2nameMap=Z$c}Z$o(Z$b,"laya.webgl.shader.ShaderDefines");var Z$a=Z$b.prototype;return Z$a.add=function(Z$a){return"string"==typeof Z$a&&(Z$a=this._name2int[Z$a]),this._value|=Z$a,this._value},Z$a.addInt=function(Z$a){return this._value|=Z$a,this._value},Z$a.remove=function(Z$a){return"string"==typeof Z$a&&(Z$a=this._name2int[Z$a]),this._value&=~Z$a,this._value},Z$a.isDefine=function(Z$a){return(this._value&Z$a)===Z$a},Z$a.getValue=function(){return this._value},Z$a.setValue=function(Z$a){this._value=Z$a},Z$a.toNameDic=function(){var Z$a=this._int2nameMap[this._value];return Z$a||Z$b._toText(this._value,this._int2name,this._int2nameMap)},Z$b._reg=function(Z$a,Z$b,Z$c,Z$d){Z$d[Z$c[Z$a]=Z$b]=Z$a},Z$b._toText=function(Z$a,Z$b,Z$c){var Z$d=Z$c[Z$a];if(Z$d)return Z$d;for(var Z$e={},Z$f=1,Z$i=0;Z$i<32&&!(Z$a<(Z$f=1<<Z$i));Z$i++)if(Z$a&Z$f){var Z$j=Z$b[Z$f];Z$j&&(Z$e[Z$j]="")}return Z$c[Z$a]=Z$e},Z$b._toInt=function(Z$a,Z$b){for(var Z$c=Z$a.split("."),Z$d=0,Z$e=0,Z$f=Z$c.length;Z$e<Z$f;Z$e++){var Z$i=Z$b[Z$c[Z$e]];if(!Z$i)throw new Error("Defines to int err:"+Z$a+"/"+Z$c[Z$e]);Z$d|=Z$i}return Z$d},Z$b}(),Z$aa=function(){function Z$i(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new Z$B}Z$o(Z$i,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var Z$a=Z$i.prototype;return Z$a.init=function(Z$a,Z$b,Z$c){if(Z$b)this._vs=Z$b;else{this._vs=[];var Z$d=Z$a.width,Z$e=Z$a.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(Z$d,0,1,0,1,1,1,1),this._vs.push(Z$d,Z$e,1,1,1,1,1,1),this._vs.push(0,Z$e,0,1,1,1,1,1)}Z$c?this._ps=Z$c:(Z$i._defaultPS||(Z$i._defaultPS=[]).push(0,1,3,3,1,2),this._ps=Z$i._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=Z$a},Z$a.init2=function(Z$a,Z$b,Z$c,Z$d,Z$e){this.transform&&(this.transform=null),Z$c?this._ps=Z$c:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=Z$d,this._uvs=Z$e,this.mEleNum=this._ps.length,this.mTexture=Z$a,(Z$t.isConchNode||Z$t.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},Z$a._initMyData=function(){var Z$a=0,Z$b=0,Z$c=4*this._verticles.length;this._vs=Z$i._tempVS;var Z$d=!1;if(Z$t.isConchNode||Z$t.isConchApp?(this._vs.length=Z$c,Z$d=!0):this._vs.length<Z$c&&(this._vs.length=Z$c,Z$d=!0),Z$i._tVSLen=Z$c,Z$d)for(;Z$a<Z$c;)this._vs[Z$a]=this._verticles[Z$b],this._vs[Z$a+1]=this._verticles[Z$b+1],this._vs[Z$a+2]=this._uvs[Z$b],this._vs[Z$a+3]=this._uvs[Z$b+1],this._vs[Z$a+4]=1,this._vs[Z$a+5]=1,this._vs[Z$a+6]=1,this._vs[Z$a+7]=1,Z$a+=8,Z$b+=2;else for(;Z$a<Z$c;)this._vs[Z$a]=this._verticles[Z$b],this._vs[Z$a+1]=this._verticles[Z$b+1],this._vs[Z$a+2]=this._uvs[Z$b],this._vs[Z$a+3]=this._uvs[Z$b+1],Z$a+=8,Z$b+=2},Z$a.getData2=function(Z$a,Z$b,Z$c){var Z$d;this.mVBBuffer=Z$a,this.mIBBuffer=Z$b,this._initMyData(),Z$a.appendEx2(this._vs,Float32Array,Z$i._tVSLen,4),this._indexStart=Z$b._byteLength,(Z$d=Z$i._tempIB).length<this._ps.length&&(Z$d.length=this._ps.length);for(var Z$e=0,Z$f=this._ps.length;Z$e<Z$f;Z$e++)Z$d[Z$e]=this._ps[Z$e]+Z$c;Z$b.appendEx2(Z$d,Uint16Array,this._ps.length,2)},Z$a.getData=function(Z$a,Z$b,Z$c){if(this.mVBBuffer=Z$a,this.mIBBuffer=Z$b,Z$a.append(this.mVBData),this._indexStart=Z$b._byteLength,this.mIBData.start!=Z$c){for(var Z$d=0,Z$e=this._ps.length;Z$d<Z$e;Z$d++)this.mIBData[Z$d]=this._ps[Z$d]+Z$c;this.mIBData.start=Z$c}Z$b.append(this.mIBData)},Z$a.render=function(Z$a,Z$b,Z$c){if(Z$t.isWebGL&&this.mTexture){Z$a._renderKey=0,Z$a._shader2D.glTexture=null,Z$ba.getInstance().addSkinMesh(this);var Z$d=Z$fa.createShape(Z$a,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,Z$Aa.create(512,0));this.transform||(this.transform=Z$B.EMPTY),this.transform.translate(Z$b,Z$c),Z$B.mul(this.transform,Z$a._curMat,this._tempMatrix),this.transform.translate(-Z$b,-Z$c);var Z$e=Z$d.shaderValue,Z$f=Z$e.u_mmat2||Z$ua.getMatrArray();Z$ua.mat2MatArray(this._tempMatrix,Z$f),Z$e.textureHost=this.mTexture,Z$e.offsetX=0,Z$e.offsetY=0,Z$e.u_mmat2=Z$f,Z$e.ALPHA=Z$a._shader2D.ALPHA,Z$a._submits[Z$a._submits._length++]=Z$d}else Z$t.isConchApp&&this.mTexture&&(this.transform||(this.transform=Z$B.EMPTY),Z$a.setSkinMesh&&Z$a.setSkinMesh(Z$b,Z$c,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},Z$i._tempVS=[],Z$i._tempIB=[],Z$i._defaultPS=null,Z$i._tVSLen=0,Z$i}(),Z$ba=function(){function Z$a(){this.ib=null,this.vb=null;Z$wa.mainContext;this.ib=Z$ga.create(35048),this.vb=Z$ha.create(8)}Z$o(Z$a,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var Z$b=Z$a.prototype;return Z$b.addSkinMesh=function(Z$a){Z$a.getData2(this.vb,this.ib,this.vb._byteLength/32)},Z$b.reset=function(){this.vb.clear(),this.ib.clear()},Z$a.getInstance=function(){return Z$a.instance=Z$a.instance||new Z$a},Z$a.instance=null,Z$a}(),Z$ca=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===Z$k&&(Z$k=0),this.x=Z$a,this.y=Z$b,this.width=Z$c,this.height=Z$d,this.edges=Z$e,this.color=Z$f,this.borderWidth=Z$i,this.borderColor=Z$j}Z$o(Z$a,"laya.webgl.shapes.BasePoly");var Z$b=Z$a.prototype;return Z$y.imps(Z$b,{"laya.webgl.shapes.IShape":!0}),Z$b.getData=function(Z$a,Z$b,Z$c){},Z$b.rebuild=function(Z$a){},Z$b.setMatrix=function(Z$a){},Z$b.needUpdate=function(Z$a){return!0},Z$b.sector=function(Z$a,Z$b,Z$c){var Z$d=this.x,Z$e=this.y,Z$f=this.edges,Z$i=(this.r1-this.r0)/Z$f,Z$j=this.width,Z$k=this.height,Z$l=this.color,Z$m=(Z$l>>16&255)/255,Z$n=(Z$l>>8&255)/255,Z$o=(255&Z$l)/255;Z$a.push(Z$d,Z$e,Z$m,Z$n,Z$o);for(var Z$p=0;Z$p<Z$f+1;Z$p++)Z$a.push(Z$d+Math.sin(Z$i*Z$p+this.r0)*Z$j,Z$e+Math.cos(Z$i*Z$p+this.r0)*Z$k),Z$a.push(Z$m,Z$n,Z$o);for(Z$p=0;Z$p<Z$f;Z$p++)Z$b.push(Z$c,Z$c+Z$p+1,Z$c+Z$p+2)},Z$b.createLine2=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i,Z$j,Z$k,Z$l,Z$m,Z$n,Z$o,Z$p,Z$q,Z$r,Z$s,Z$t,Z$u,Z$v,Z$w,Z$x,Z$y,Z$z,Z$A,Z$B,Z$C=Z$a.concat(),Z$D=Z$e,Z$E=this.borderColor,Z$F=(Z$E>>16&255)/255,Z$G=(Z$E>>8&255)/255,Z$H=(255&Z$E)/255,Z$I=Z$C.length/2,Z$J=Z$d,Z$K=Z$c/2;Z$k=Z$C[0],Z$l=Z$C[1],Z$r=Z$k-(Z$m=Z$C[2]),Z$q=(Z$q=-(Z$l-(Z$n=Z$C[3])))/(Z$B=Math.sqrt(Z$q*Z$q+Z$r*Z$r))*Z$K,Z$r=Z$r/Z$B*Z$K,Z$D.push(Z$k-Z$q+this.x,Z$l-Z$r+this.y,Z$F,Z$G,Z$H,Z$k+Z$q+this.x,Z$l+Z$r+this.y,Z$F,Z$G,Z$H);for(var Z$L=1;Z$L<Z$I-1;Z$L++)Z$k=Z$C[2*(Z$L-1)],Z$l=Z$C[2*(Z$L-1)+1],Z$m=Z$C[2*Z$L],Z$n=Z$C[2*Z$L+1],Z$o=Z$C[2*(Z$L+1)],Z$p=Z$C[2*(Z$L+1)+1],Z$r=Z$k-Z$m,Z$t=Z$m-Z$o,Z$w=(-(Z$q=(Z$q=-(Z$l-Z$n))/(Z$B=Math.sqrt(Z$q*Z$q+Z$r*Z$r))*Z$K)+Z$k)*(-(Z$r=Z$r/Z$B*Z$K)+Z$n)-(-Z$q+Z$m)*(-Z$r+Z$l),Z$z=(-(Z$s=(Z$s=-(Z$n-Z$p))/(Z$B=Math.sqrt(Z$s*Z$s+Z$t*Z$t))*Z$K)+Z$o)*(-(Z$t=Z$t/Z$B*Z$K)+Z$n)-(-Z$s+Z$m)*(-Z$t+Z$p),Z$A=(Z$u=-Z$r+Z$l-(-Z$r+Z$n))*(Z$y=-Z$s+Z$m-(-Z$s+Z$o))-(Z$x=-Z$t+Z$p-(-Z$t+Z$n))*(Z$v=-Z$q+Z$m-(-Z$q+Z$k)),Math.abs(Z$A)<.1?(Z$A+=10.1,Z$D.push(Z$m-Z$q+this.x,Z$n-Z$r+this.y,Z$F,Z$G,Z$H,Z$m+Z$q+this.x,Z$n+Z$r+this.y,Z$F,Z$G,Z$H)):(((Z$i=(Z$v*Z$z-Z$y*Z$w)/Z$A)-Z$m)*(Z$i-Z$m)+((Z$j=(Z$x*Z$w-Z$u*Z$z)/Z$A)-Z$n)+(Z$j-Z$n),Z$D.push(Z$i+this.x,Z$j+this.y,Z$F,Z$G,Z$H,Z$m-(Z$i-Z$m)+this.x,Z$n-(Z$j-Z$n)+this.y,Z$F,Z$G,Z$H));Z$k=Z$C[Z$C.length-4],Z$l=Z$C[Z$C.length-3],Z$r=Z$k-(Z$m=Z$C[Z$C.length-2]),Z$q=(Z$q=-(Z$l-(Z$n=Z$C[Z$C.length-1])))/(Z$B=Math.sqrt(Z$q*Z$q+Z$r*Z$r))*Z$K,Z$r=Z$r/Z$B*Z$K,Z$D.push(Z$m-Z$q+this.x,Z$n-Z$r+this.y,Z$F,Z$G,Z$H,Z$m+Z$q+this.x,Z$n+Z$r+this.y,Z$F,Z$G,Z$H);var Z$M=Z$f;for(Z$L=1;Z$L<Z$M;Z$L++)Z$b.push(Z$J+2*(Z$L-1),Z$J+2*(Z$L-1)+1,Z$J+2*Z$L+1,Z$J+2*Z$L+1,Z$J+2*Z$L,Z$J+2*(Z$L-1));return Z$D},Z$b.createLine=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.concat(),Z$f=Z$a,Z$i=this.borderColor,Z$j=(Z$i>>16&255)/255,Z$k=(Z$i>>8&255)/255,Z$l=(255&Z$i)/255;Z$e.splice(0,5);var Z$m,Z$n,Z$o,Z$p,Z$q,Z$r,Z$s,Z$t,Z$u,Z$v,Z$w,Z$x,Z$y,Z$z,Z$A,Z$B,Z$C,Z$D,Z$E,Z$F,Z$G=Z$e.length/5,Z$H=Z$d,Z$I=Z$c/2;Z$o=Z$e[0],Z$p=Z$e[1],Z$v=Z$o-(Z$q=Z$e[5]),Z$u=(Z$u=-(Z$p-(Z$r=Z$e[6])))/(Z$F=Math.sqrt(Z$u*Z$u+Z$v*Z$v))*Z$I,Z$v=Z$v/Z$F*Z$I,Z$f.push(Z$o-Z$u,Z$p-Z$v,Z$j,Z$k,Z$l,Z$o+Z$u,Z$p+Z$v,Z$j,Z$k,Z$l);for(var Z$J=1;Z$J<Z$G-1;Z$J++)Z$o=Z$e[5*(Z$J-1)],Z$p=Z$e[5*(Z$J-1)+1],Z$q=Z$e[5*Z$J],Z$r=Z$e[5*Z$J+1],Z$s=Z$e[5*(Z$J+1)],Z$t=Z$e[5*(Z$J+1)+1],Z$v=Z$o-Z$q,Z$x=Z$q-Z$s,Z$A=(-(Z$u=(Z$u=-(Z$p-Z$r))/(Z$F=Math.sqrt(Z$u*Z$u+Z$v*Z$v))*Z$I)+Z$o)*(-(Z$v=Z$v/Z$F*Z$I)+Z$r)-(-Z$u+Z$q)*(-Z$v+Z$p),Z$D=(-(Z$w=(Z$w=-(Z$r-Z$t))/(Z$F=Math.sqrt(Z$w*Z$w+Z$x*Z$x))*Z$I)+Z$s)*(-(Z$x=Z$x/Z$F*Z$I)+Z$r)-(-Z$w+Z$q)*(-Z$x+Z$t),Z$E=(Z$y=-Z$v+Z$p-(-Z$v+Z$r))*(Z$C=-Z$w+Z$q-(-Z$w+Z$s))-(Z$B=-Z$x+Z$t-(-Z$x+Z$r))*(Z$z=-Z$u+Z$q-(-Z$u+Z$o)),Math.abs(Z$E)<.1?(Z$E+=10.1,Z$f.push(Z$q-Z$u,Z$r-Z$v,Z$j,Z$k,Z$l,Z$q+Z$u,Z$r+Z$v,Z$j,Z$k,Z$l)):(((Z$m=(Z$z*Z$D-Z$C*Z$A)/Z$E)-Z$q)*(Z$m-Z$q)+((Z$n=(Z$B*Z$A-Z$y*Z$D)/Z$E)-Z$r)+(Z$n-Z$r),Z$f.push(Z$m,Z$n,Z$j,Z$k,Z$l,Z$q-(Z$m-Z$q),Z$r-(Z$n-Z$r),Z$j,Z$k,Z$l));Z$o=Z$e[Z$e.length-10],Z$p=Z$e[Z$e.length-9],Z$v=Z$o-(Z$q=Z$e[Z$e.length-5]),Z$u=(Z$u=-(Z$p-(Z$r=Z$e[Z$e.length-4])))/(Z$F=Math.sqrt(Z$u*Z$u+Z$v*Z$v))*Z$I,Z$v=Z$v/Z$F*Z$I,Z$f.push(Z$q-Z$u,Z$r-Z$v,Z$j,Z$k,Z$l,Z$q+Z$u,Z$r+Z$v,Z$j,Z$k,Z$l);var Z$K=this.edges+1;for(Z$J=1;Z$J<Z$K;Z$J++)Z$b.push(Z$H+2*(Z$J-1),Z$H+2*(Z$J-1)+1,Z$H+2*Z$J+1,Z$H+2*Z$J+1,Z$H+2*Z$J,Z$H+2*(Z$J-1));return Z$f},Z$b.createLoopLine=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=Z$a.concat(),Z$j=Z$e||Z$a,Z$k=this.borderColor,Z$l=(Z$k>>16&255)/255,Z$m=(Z$k>>8&255)/255,Z$n=(255&Z$k)/255;Z$i.splice(0,5);var Z$o=[Z$i[0],Z$i[1]],Z$p=[Z$i[Z$i.length-5],Z$i[Z$i.length-4]],Z$q=Z$p[0]+.5*(Z$o[0]-Z$p[0]),Z$r=Z$p[1]+.5*(Z$o[1]-Z$p[1]);Z$i.unshift(Z$q,Z$r,0,0,0),Z$i.push(Z$q,Z$r,0,0,0);var Z$s,Z$t,Z$u,Z$v,Z$w,Z$x,Z$y,Z$z,Z$A,Z$B,Z$C,Z$D,Z$E,Z$F,Z$G,Z$H,Z$I,Z$J,Z$K,Z$L,Z$M=Z$i.length/5,Z$N=Z$d,Z$O=Z$c/2;Z$u=Z$i[0],Z$v=Z$i[1],Z$B=Z$u-(Z$w=Z$i[5]),Z$A=(Z$A=-(Z$v-(Z$x=Z$i[6])))/(Z$L=Math.sqrt(Z$A*Z$A+Z$B*Z$B))*Z$O,Z$B=Z$B/Z$L*Z$O,Z$j.push(Z$u-Z$A,Z$v-Z$B,Z$l,Z$m,Z$n,Z$u+Z$A,Z$v+Z$B,Z$l,Z$m,Z$n);for(var Z$P=1;Z$P<Z$M-1;Z$P++)Z$u=Z$i[5*(Z$P-1)],Z$v=Z$i[5*(Z$P-1)+1],Z$w=Z$i[5*Z$P],Z$x=Z$i[5*Z$P+1],Z$y=Z$i[5*(Z$P+1)],Z$z=Z$i[5*(Z$P+1)+1],Z$B=Z$u-Z$w,Z$D=Z$w-Z$y,Z$G=(-(Z$A=(Z$A=-(Z$v-Z$x))/(Z$L=Math.sqrt(Z$A*Z$A+Z$B*Z$B))*Z$O)+Z$u)*(-(Z$B=Z$B/Z$L*Z$O)+Z$x)-(-Z$A+Z$w)*(-Z$B+Z$v),Z$J=(-(Z$C=(Z$C=-(Z$x-Z$z))/(Z$L=Math.sqrt(Z$C*Z$C+Z$D*Z$D))*Z$O)+Z$y)*(-(Z$D=Z$D/Z$L*Z$O)+Z$x)-(-Z$C+Z$w)*(-Z$D+Z$z),Z$K=(Z$E=-Z$B+Z$v-(-Z$B+Z$x))*(Z$I=-Z$C+Z$w-(-Z$C+Z$y))-(Z$H=-Z$D+Z$z-(-Z$D+Z$x))*(Z$F=-Z$A+Z$w-(-Z$A+Z$u)),Math.abs(Z$K)<.1?(Z$K+=10.1,Z$j.push(Z$w-Z$A,Z$x-Z$B,Z$l,Z$m,Z$n,Z$w+Z$A,Z$x+Z$B,Z$l,Z$m,Z$n)):(((Z$s=(Z$F*Z$J-Z$I*Z$G)/Z$K)-Z$w)*(Z$s-Z$w)+((Z$t=(Z$H*Z$G-Z$E*Z$J)/Z$K)-Z$x)+(Z$t-Z$x),Z$j.push(Z$s,Z$t,Z$l,Z$m,Z$n,Z$w-(Z$s-Z$w),Z$x-(Z$t-Z$x),Z$l,Z$m,Z$n));Z$f&&(Z$b=Z$f);var Z$Q=this.edges+1;for(Z$P=1;Z$P<Z$Q;Z$P++)Z$b.push(Z$N+2*(Z$P-1),Z$N+2*(Z$P-1)+1,Z$N+2*Z$P+1,Z$N+2*Z$P+1,Z$N+2*Z$P,Z$N+2*(Z$P-1));return Z$b.push(Z$N+2*(Z$P-1),Z$N+2*(Z$P-1)+1,Z$N+1,Z$N+1,Z$N,Z$N+2*(Z$P-1)),Z$j},Z$a}(),Z$da=function(){function Z$r(){}return Z$o(Z$r,"laya.webgl.shapes.Earcut"),Z$r.earcut=function(Z$a,Z$b,Z$c){Z$c=Z$c||2;var Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m=Z$b&&Z$b.length,Z$n=Z$m?Z$b[0]*Z$c:Z$a.length,Z$o=Z$r.linkedList(Z$a,0,Z$n,Z$c,!0),Z$p=[];if(!Z$o)return Z$p;if(Z$m&&(Z$o=Z$r.eliminateHoles(Z$a,Z$b,Z$o,Z$c)),Z$a.length>80*Z$c){Z$d=Z$f=Z$a[0],Z$e=Z$i=Z$a[1];for(var Z$q=Z$c;Z$q<Z$n;Z$q+=Z$c)(Z$j=Z$a[Z$q])<Z$d&&(Z$d=Z$j),(Z$k=Z$a[Z$q+1])<Z$e&&(Z$e=Z$k),Z$f<Z$j&&(Z$f=Z$j),Z$i<Z$k&&(Z$i=Z$k);Z$l=0!==(Z$l=Math.max(Z$f-Z$d,Z$i-Z$e))?1/Z$l:0}return Z$r.earcutLinked(Z$o,Z$p,Z$c,Z$d,Z$e,Z$l),Z$p},Z$r.linkedList=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f,Z$i;if(Z$e===0<Z$r.signedArea(Z$a,Z$b,Z$c,Z$d))for(Z$f=Z$b;Z$f<Z$c;Z$f+=Z$d)Z$i=Z$r.insertNode(Z$f,Z$a[Z$f],Z$a[Z$f+1],Z$i);else for(Z$f=Z$c-Z$d;Z$b<=Z$f;Z$f-=Z$d)Z$i=Z$r.insertNode(Z$f,Z$a[Z$f],Z$a[Z$f+1],Z$i);return Z$i&&Z$r.equals(Z$i,Z$i.next)&&(Z$r.removeNode(Z$i),Z$i=Z$i.next),Z$i},Z$r.filterPoints=function(Z$a,Z$b){if(!Z$a)return Z$a;Z$b||(Z$b=Z$a);var Z$c,Z$d=Z$a;do{if(Z$c=!1,Z$d.steiner||!Z$r.equals(Z$d,Z$d.next)&&0!==Z$r.area(Z$d.prev,Z$d,Z$d.next))Z$d=Z$d.next;else{if(Z$r.removeNode(Z$d),(Z$d=Z$b=Z$d.prev)===Z$d.next)break;Z$c=!0}}while(Z$c||Z$d!==Z$b);return Z$b},Z$r.earcutLinked=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){if(Z$a){!Z$i&&Z$f&&Z$r.indexCurve(Z$a,Z$d,Z$e,Z$f);for(var Z$j,Z$k,Z$l=Z$a;Z$a.prev!==Z$a.next;)if(Z$j=Z$a.prev,Z$k=Z$a.next,Z$f?Z$r.isEarHashed(Z$a,Z$d,Z$e,Z$f):Z$r.isEar(Z$a))Z$b.push(Z$j.i/Z$c),Z$b.push(Z$a.i/Z$c),Z$b.push(Z$k.i/Z$c),Z$r.removeNode(Z$a),Z$a=Z$k.next,Z$l=Z$k.next;else if((Z$a=Z$k)===Z$l){Z$i?1===Z$i?(Z$a=Z$r.cureLocalIntersections(Z$a,Z$b,Z$c),Z$r.earcutLinked(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,2)):2===Z$i&&Z$r.splitEarcut(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f):Z$r.earcutLinked(Z$r.filterPoints(Z$a,null),Z$b,Z$c,Z$d,Z$e,Z$f,1);break}}},Z$r.isEar=function(Z$a){var Z$b=Z$a.prev,Z$c=Z$a,Z$d=Z$a.next;if(0<=Z$r.area(Z$b,Z$c,Z$d))return!1;for(var Z$e=Z$a.next.next;Z$e!==Z$a.prev;){if(Z$r.pointInTriangle(Z$b.x,Z$b.y,Z$c.x,Z$c.y,Z$d.x,Z$d.y,Z$e.x,Z$e.y)&&0<=Z$r.area(Z$e.prev,Z$e,Z$e.next))return!1;Z$e=Z$e.next}return!0},Z$r.isEarHashed=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.prev,Z$f=Z$a,Z$i=Z$a.next;if(0<=Z$r.area(Z$e,Z$f,Z$i))return!1;for(var Z$j=Z$e.x<Z$f.x?Z$e.x<Z$i.x?Z$e.x:Z$i.x:Z$f.x<Z$i.x?Z$f.x:Z$i.x,Z$k=Z$e.y<Z$f.y?Z$e.y<Z$i.y?Z$e.y:Z$i.y:Z$f.y<Z$i.y?Z$f.y:Z$i.y,Z$l=Z$e.x>Z$f.x?Z$e.x>Z$i.x?Z$e.x:Z$i.x:Z$f.x>Z$i.x?Z$f.x:Z$i.x,Z$m=Z$e.y>Z$f.y?Z$e.y>Z$i.y?Z$e.y:Z$i.y:Z$f.y>Z$i.y?Z$f.y:Z$i.y,Z$n=Z$r.zOrder(Z$j,Z$k,Z$b,Z$c,Z$d),Z$o=Z$r.zOrder(Z$l,Z$m,Z$b,Z$c,Z$d),Z$p=Z$a.nextZ;Z$p&&Z$p.z<=Z$o;){if(Z$p!==Z$a.prev&&Z$p!==Z$a.next&&Z$r.pointInTriangle(Z$e.x,Z$e.y,Z$f.x,Z$f.y,Z$i.x,Z$i.y,Z$p.x,Z$p.y)&&0<=Z$r.area(Z$p.prev,Z$p,Z$p.next))return!1;Z$p=Z$p.nextZ}for(Z$p=Z$a.prevZ;Z$p&&Z$p.z>=Z$n;){if(Z$p!==Z$a.prev&&Z$p!==Z$a.next&&Z$r.pointInTriangle(Z$e.x,Z$e.y,Z$f.x,Z$f.y,Z$i.x,Z$i.y,Z$p.x,Z$p.y)&&0<=Z$r.area(Z$p.prev,Z$p,Z$p.next))return!1;Z$p=Z$p.prevZ}return!0},Z$r.cureLocalIntersections=function(Z$a,Z$b,Z$c){var Z$d=Z$a;do{var Z$e=Z$d.prev,Z$f=Z$d.next.next;!Z$r.equals(Z$e,Z$f)&&Z$r.intersects(Z$e,Z$d,Z$d.next,Z$f)&&Z$r.locallyInside(Z$e,Z$f)&&Z$r.locallyInside(Z$f,Z$e)&&(Z$b.push(Z$e.i/Z$c),Z$b.push(Z$d.i/Z$c),Z$b.push(Z$f.i/Z$c),Z$r.removeNode(Z$d),Z$r.removeNode(Z$d.next),Z$d=Z$a=Z$f),Z$d=Z$d.next}while(Z$d!==Z$a);return Z$d},Z$r.splitEarcut=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=Z$a;do{for(var Z$j=Z$i.next.next;Z$j!==Z$i.prev;){if(Z$i.i!==Z$j.i&&Z$r.isValidDiagonal(Z$i,Z$j)){var Z$k=Z$r.splitPolygon(Z$i,Z$j);return Z$i=Z$r.filterPoints(Z$i,Z$i.next),Z$k=Z$r.filterPoints(Z$k,Z$k.next),Z$r.earcutLinked(Z$i,Z$b,Z$c,Z$d,Z$e,Z$f),void Z$r.earcutLinked(Z$k,Z$b,Z$c,Z$d,Z$e,Z$f)}Z$j=Z$j.next}Z$i=Z$i.next}while(Z$i!==Z$a)},Z$r.eliminateHoles=function(Z$a,Z$b,Z$c,Z$d){var Z$e,Z$f,Z$i,Z$j,Z$k,Z$l=[];for(Z$e=0,Z$f=Z$b.length;Z$e<Z$f;Z$e++)Z$i=Z$b[Z$e]*Z$d,Z$j=Z$e<Z$f-1?Z$b[Z$e+1]*Z$d:Z$a.length,(Z$k=Z$r.linkedList(Z$a,Z$i,Z$j,Z$d,!1))===Z$k.next&&(Z$k.steiner=!0),Z$l.push(Z$r.getLeftmost(Z$k));for(Z$l.sort(Z$r.compareX),Z$e=0;Z$e<Z$l.length;Z$e++)Z$r.eliminateHole(Z$l[Z$e],Z$c),Z$c=Z$r.filterPoints(Z$c,Z$c.next);return Z$c},Z$r.compareX=function(Z$a,Z$b){return Z$a.x-Z$b.x},Z$r.eliminateHole=function(Z$a,Z$b){if(Z$b=Z$r.findHoleBridge(Z$a,Z$b)){var Z$c=Z$r.splitPolygon(Z$b,Z$a);Z$r.filterPoints(Z$c,Z$c.next)}},Z$r.findHoleBridge=function(Z$a,Z$b){var Z$c,Z$d=Z$b,Z$e=Z$a.x,Z$f=Z$a.y,Z$i=-1/0;do{if(Z$f<=Z$d.y&&Z$f>=Z$d.next.y&&Z$d.next.y!==Z$d.y){var Z$j=Z$d.x+(Z$f-Z$d.y)*(Z$d.next.x-Z$d.x)/(Z$d.next.y-Z$d.y);if(Z$j<=Z$e&&Z$i<Z$j){if((Z$i=Z$j)===Z$e){if(Z$f===Z$d.y)return Z$d;if(Z$f===Z$d.next.y)return Z$d.next}Z$c=Z$d.x<Z$d.next.x?Z$d:Z$d.next}}Z$d=Z$d.next}while(Z$d!==Z$b);if(!Z$c)return null;if(Z$e===Z$i)return Z$c.prev;var Z$k,Z$l=Z$c,Z$m=Z$c.x,Z$n=Z$c.y,Z$o=1/0;for(Z$d=Z$c.next;Z$d!==Z$l;)Z$e>=Z$d.x&&Z$d.x>=Z$m&&Z$e!==Z$d.x&&Z$r.pointInTriangle(Z$f<Z$n?Z$e:Z$i,Z$f,Z$m,Z$n,Z$f<Z$n?Z$i:Z$e,Z$f,Z$d.x,Z$d.y)&&((Z$k=Math.abs(Z$f-Z$d.y)/(Z$e-Z$d.x))<Z$o||Z$k===Z$o&&Z$d.x>Z$c.x)&&Z$r.locallyInside(Z$d,Z$a)&&(Z$c=Z$d,Z$o=Z$k),Z$d=Z$d.next;return Z$c},Z$r.indexCurve=function(Z$a,Z$b,Z$c,Z$d){for(var Z$e=Z$a;null===Z$e.z&&(Z$e.z=Z$r.zOrder(Z$e.x,Z$e.y,Z$b,Z$c,Z$d)),Z$e.prevZ=Z$e.prev,Z$e.nextZ=Z$e.next,(Z$e=Z$e.next)!==Z$a;);Z$e.prevZ.nextZ=null,Z$e.prevZ=null,Z$r.sortLinked(Z$e)},Z$r.sortLinked=function(Z$a){var Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l=1;do{for(Z$c=Z$a,Z$f=Z$a=null,Z$i=0;Z$c;){for(Z$i++,Z$d=Z$c,Z$b=Z$j=0;Z$b<Z$l&&(Z$j++,Z$d=Z$d.nextZ);Z$b++);for(Z$k=Z$l;0<Z$j||0<Z$k&&Z$d;)0!==Z$j&&(0===Z$k||!Z$d||Z$c.z<=Z$d.z)?(Z$c=(Z$e=Z$c).nextZ,Z$j--):(Z$d=(Z$e=Z$d).nextZ,Z$k--),Z$f?Z$f.nextZ=Z$e:Z$a=Z$e,Z$e.prevZ=Z$f,Z$f=Z$e;Z$c=Z$d}Z$f.nextZ=null,Z$l*=2}while(1<Z$i);return Z$a},Z$r.zOrder=function(Z$a,Z$b,Z$c,Z$d,Z$e){return(Z$a=1431655765&((Z$a=858993459&((Z$a=252645135&((Z$a=16711935&((Z$a=32767*(Z$a-Z$c)*Z$e)|Z$a<<8))|Z$a<<4))|Z$a<<2))|Z$a<<1))|(Z$b=1431655765&((Z$b=858993459&((Z$b=252645135&((Z$b=16711935&((Z$b=32767*(Z$b-Z$d)*Z$e)|Z$b<<8))|Z$b<<4))|Z$b<<2))|Z$b<<1))<<1},Z$r.getLeftmost=function(Z$a){for(var Z$b=Z$a,Z$c=Z$a;Z$b.x<Z$c.x&&(Z$c=Z$b),(Z$b=Z$b.next)!==Z$a;);return Z$c},Z$r.pointInTriangle=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){return 0<=(Z$e-Z$i)*(Z$b-Z$j)-(Z$a-Z$i)*(Z$f-Z$j)&&0<=(Z$a-Z$i)*(Z$d-Z$j)-(Z$c-Z$i)*(Z$b-Z$j)&&0<=(Z$c-Z$i)*(Z$f-Z$j)-(Z$e-Z$i)*(Z$d-Z$j)},Z$r.isValidDiagonal=function(Z$a,Z$b){return Z$a.next.i!==Z$b.i&&Z$a.prev.i!==Z$b.i&&!Z$r.intersectsPolygon(Z$a,Z$b)&&Z$r.locallyInside(Z$a,Z$b)&&Z$r.locallyInside(Z$b,Z$a)&&Z$r.middleInside(Z$a,Z$b)},Z$r.area=function(Z$a,Z$b,Z$c){return(Z$b.y-Z$a.y)*(Z$c.x-Z$b.x)-(Z$b.x-Z$a.x)*(Z$c.y-Z$b.y)},Z$r.equals=function(Z$a,Z$b){return Z$a.x===Z$b.x&&Z$a.y===Z$b.y},Z$r.intersects=function(Z$a,Z$b,Z$c,Z$d){return!!(Z$r.equals(Z$a,Z$b)&&Z$r.equals(Z$c,Z$d)||Z$r.equals(Z$a,Z$d)&&Z$r.equals(Z$c,Z$b))||0<Z$r.area(Z$a,Z$b,Z$c)!=0<Z$r.area(Z$a,Z$b,Z$d)&&0<Z$r.area(Z$c,Z$d,Z$a)!=0<Z$r.area(Z$c,Z$d,Z$b)},Z$r.intersectsPolygon=function(Z$a,Z$b){var Z$c=Z$a;do{if(Z$c.i!==Z$a.i&&Z$c.next.i!==Z$a.i&&Z$c.i!==Z$b.i&&Z$c.next.i!==Z$b.i&&Z$r.intersects(Z$c,Z$c.next,Z$a,Z$b))return!0;Z$c=Z$c.next}while(Z$c!==Z$a);return!1},Z$r.locallyInside=function(Z$a,Z$b){return Z$r.area(Z$a.prev,Z$a,Z$a.next)<0?0<=Z$r.area(Z$a,Z$b,Z$a.next)&&0<=Z$r.area(Z$a,Z$a.prev,Z$b):Z$r.area(Z$a,Z$b,Z$a.prev)<0||Z$r.area(Z$a,Z$a.next,Z$b)<0},Z$r.middleInside=function(Z$a,Z$b){for(var Z$c=Z$a,Z$d=!1,Z$e=(Z$a.x+Z$b.x)/2,Z$f=(Z$a.y+Z$b.y)/2;Z$c.y>Z$f!=Z$c.next.y>Z$f&&Z$c.next.y!==Z$c.y&&Z$e<(Z$c.next.x-Z$c.x)*(Z$f-Z$c.y)/(Z$c.next.y-Z$c.y)+Z$c.x&&(Z$d=!Z$d),(Z$c=Z$c.next)!==Z$a;);return Z$d},Z$r.splitPolygon=function(Z$a,Z$b){var Z$c=new Z$ea(Z$a.i,Z$a.x,Z$a.y),Z$d=new Z$ea(Z$b.i,Z$b.x,Z$b.y),Z$e=Z$a.next,Z$f=Z$b.prev;return(Z$a.next=Z$b).prev=Z$a,(Z$c.next=Z$e).prev=Z$c,(Z$d.next=Z$c).prev=Z$d,(Z$f.next=Z$d).prev=Z$f,Z$d},Z$r.insertNode=function(Z$a,Z$b,Z$c,Z$d){var Z$e=new Z$ea(Z$a,Z$b,Z$c);return Z$d?(Z$e.next=Z$d.next,(Z$e.prev=Z$d).next.prev=Z$e,Z$d.next=Z$e):(Z$e.prev=Z$e).next=Z$e,Z$e},Z$r.removeNode=function(Z$a){Z$a.next.prev=Z$a.prev,Z$a.prev.next=Z$a.next,Z$a.prevZ&&(Z$a.prevZ.nextZ=Z$a.nextZ),Z$a.nextZ&&(Z$a.nextZ.prevZ=Z$a.prevZ)},Z$r.signedArea=function(Z$a,Z$b,Z$c,Z$d){for(var Z$e=0,Z$f=Z$b,Z$i=Z$c-Z$d;Z$f<Z$c;Z$f+=Z$d)Z$e+=(Z$a[Z$i]-Z$a[Z$f])*(Z$a[Z$f+1]+Z$a[Z$i+1]),Z$i=Z$f;return Z$e},Z$r}(),Z$ea=function(){function Z$a(Z$a,Z$b,Z$c){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=Z$a,this.x=Z$b,this.y=Z$c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return Z$o(Z$a,"laya.webgl.shapes.EarcutNode"),Z$a}(),Z$fa=(function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this.lineWidth=Z$a,this.lineColor=Z$b,this.lineAlpha=Z$c,this.fillColor=Z$d,this.fillAlpha=Z$e,this.shape=Z$i,this.fill=Z$f}Z$o(Z$a,"laya.webgl.shapes.GeometryData");var Z$b=Z$a.prototype;Z$b.clone=function(){return new Z$a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},Z$b.getIndexData=function(){return null},Z$b.getVertexData=function(){return null},Z$b.destroy=function(){this.shape=null}}(),function(){function Z$a(Z$a){if(Z$a instanceof Float32Array)this.points=Z$a;else if(Z$a instanceof Array){Z$a.length;this.points=new Float32Array(Z$a)}}Z$o(Z$a,"laya.webgl.shapes.Vertex");var Z$b=Z$a.prototype;Z$y.imps(Z$b,{"laya.webgl.shapes.IShape":!0}),Z$b.getData=function(Z$a,Z$b,Z$c){},Z$b.needUpdate=function(Z$a){return!1},Z$b.rebuild=function(Z$a){},Z$b.setMatrix=function(Z$a){}}(),function(){function Z$k(Z$a){void 0===Z$a&&(Z$a=1e4),this._renderType=Z$a}Z$o(Z$k,"laya.webgl.submit.Submit");var Z$a=Z$k.prototype;return Z$y.imps(Z$a,{"laya.webgl.submit.ISubmit":!0}),Z$a.releaseRender=function(){var Z$a=Z$k._cache;(Z$a[Z$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},Z$a.getRenderType=function(){return this._renderType},Z$a.renderSubmit=function(){if(0===this._numEle)return 1;var Z$a=this.shaderValue.textureHost;if(Z$a){var Z$b=Z$a.source;if(!Z$a.bitmap||!Z$b)return 1;this.shaderValue.texture=Z$b,Z$a.alphaTexture&&Z$a.alphaTexture.source&&(this.shaderValue.texture1=Z$a.alphaTexture.source)}this._vb.bind_upload(this._ib);var Z$c=Z$wa.mainContext;return this.shaderValue.upload(),Z$S.activeBlendFunction!==this._blendFn&&(Z$c.enable(3042),this._blendFn(Z$c),Z$S.activeBlendFunction=this._blendFn),Z$G.drawCall++,Z$G.trianglesFaces+=this._numEle/3,Z$c.drawElements(4,this._numEle,5123,this._startIdx),1},Z$k.__init__=function(){var Z$a=Z$k.RENDERBASE=new Z$k(-1);Z$a.shaderValue=new Z$Aa(0,0),Z$a.shaderValue.ALPHA=-1234},Z$k.createSubmit=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$k._cache._length?Z$k._cache[--Z$k._cache._length]:new Z$k;null==Z$c&&((Z$c=Z$f._selfVb||(Z$f._selfVb=Z$ha.create(-1))).clear(),Z$d=0),Z$f._ib=Z$b,Z$f._vb=Z$c,Z$f._startIdx=Z$d*Z$ra.BYTES_PIDX,Z$f._numEle=0;var Z$i=Z$a._nBlendType;Z$f._blendFn=Z$a._targets?Z$S.targetFns[Z$i]:Z$S.fns[Z$i],Z$f.shaderValue=Z$e,Z$f.shaderValue.setValue(Z$a._shader2D);var Z$j=Z$a._shader2D.filters;return Z$j&&Z$f.shaderValue.setFilters(Z$j),Z$f},Z$k.createShape=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=Z$k._cache._length?Z$k._cache[--Z$k._cache._length]:new Z$k;Z$i._ib=Z$b,Z$i._vb=Z$c,Z$i._numEle=Z$d,Z$i._startIdx=Z$e,Z$i.shaderValue=Z$f,Z$i.shaderValue.setValue(Z$a._shader2D);var Z$j=Z$a._nBlendType;return Z$i._blendFn=Z$a._targets?Z$S.targetFns[Z$j]:Z$S.fns[Z$j],Z$i},Z$k.TYPE_2D=1e4,Z$k.TYPE_CANVAS=10003,Z$k.TYPE_CMDSETRT=10004,Z$k.TYPE_CUSTOM=10005,Z$k.TYPE_BLURRT=10006,Z$k.TYPE_CMDDESTORYPRERT=10007,Z$k.TYPE_DISABLESTENCIL=10008,Z$k.TYPE_OTHERIBVB=10009,Z$k.TYPE_PRIMITIVE=10010,Z$k.TYPE_RT=10011,Z$k.TYPE_BLUR_RT=10012,Z$k.TYPE_TARGET=10013,Z$k.TYPE_CHANGE_VALUE=10014,Z$k.TYPE_SHAPE=10015,Z$k.TYPE_TEXTURE=10016,Z$k.TYPE_FILLTEXTURE=10017,Z$k.RENDERBASE=null,Z$k._cache=((Z$k._cache=[])._length=0,Z$k._cache),Z$k}()),Z$ia=function(){function Z$d(){this.fun=null,this.args=null}Z$o(Z$d,"laya.webgl.submit.SubmitCMD");var Z$a=Z$d.prototype;return Z$y.imps(Z$a,{"laya.webgl.submit.ISubmit":!0}),Z$a.renderSubmit=function(){return this.fun.apply(null,this.args),1},Z$a.getRenderType=function(){return 0},Z$a.releaseRender=function(){var Z$a=Z$d._cache;Z$a[Z$a._length++]=this},Z$d.create=function(Z$a,Z$b){var Z$c=Z$d._cache._length?Z$d._cache[--Z$d._cache._length]:new Z$d;return Z$c.fun=Z$b,Z$c.args=Z$a,Z$c},Z$d._cache=((Z$d._cache=[])._length=0,Z$d._cache),Z$d}(),Z$ja=function(){function Z$b(){this.variables={}}Z$o(Z$b,"laya.webgl.submit.SubmitCMDScope");var Z$a=Z$b.prototype;return Z$a.getValue=function(Z$a){return this.variables[Z$a]},Z$a.addValue=function(Z$a,Z$b){return this.variables[Z$a]=Z$b},Z$a.setValue=function(Z$a,Z$b){return this.variables.hasOwnProperty(Z$a)?this.variables[Z$a]=Z$b:null},Z$a.clear=function(){for(var Z$a in this.variables)delete this.variables[Z$a]},Z$a.recycle=function(){this.clear(),Z$b.POOL.push(this)},Z$b.create=function(){var Z$a=Z$b.POOL.pop();return Z$a||(Z$a=new Z$b),Z$a},Z$b.POOL=[],Z$b}(),Z$ka=function(){function Z$n(){this.offset=0,this.startIndex=0,this._mat=Z$B.create()}Z$o(Z$n,"laya.webgl.submit.SubmitOtherIBVB");var Z$a=Z$n.prototype;return Z$y.imps(Z$a,{"laya.webgl.submit.ISubmit":!0}),Z$a.releaseRender=function(){var Z$a=Z$n._cache;(Z$a[Z$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},Z$a.getRenderType=function(){return 10009},Z$a.renderSubmit=function(){var Z$a=this._shaderValue.textureHost;if(Z$a){var Z$b=Z$a.source;if(!Z$a.bitmap||!Z$b)return 1;this._shaderValue.texture=Z$b}this._vb.bind_upload(this._ib);var Z$c=Z$ua.worldMatrix4,Z$d=Z$B.TEMP;Z$B.mulPre(this._mat,Z$c[0],Z$c[1],Z$c[4],Z$c[5],Z$c[12],Z$c[13],Z$d);var Z$e=Z$ua.worldMatrix4=Z$n.tempMatrix4;Z$e[0]=Z$d.a,Z$e[1]=Z$d.b,Z$e[4]=Z$d.c,Z$e[5]=Z$d.d,Z$e[12]=Z$d.tx,Z$e[13]=Z$d.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var Z$f=Z$wa.mainContext;return Z$S.activeBlendFunction!==this._blendFn&&(Z$f.enable(3042),this._blendFn(Z$f),Z$S.activeBlendFunction=this._blendFn),Z$G.drawCall++,Z$G.trianglesFaces+=this._numEle/3,Z$f.drawElements(4,this._numEle,5123,this.startIndex),Z$ua.worldMatrix4=Z$c,Z$La.activeShader=null,1},Z$n.create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){void 0===Z$k&&(Z$k=0);var Z$l=Z$n._cache._length?Z$n._cache[--Z$n._cache._length]:new Z$n;Z$l._ib=Z$c,Z$l._vb=Z$b,Z$l._numEle=Z$d,Z$l._shader=Z$e,Z$l._shaderValue=Z$f;var Z$m=Z$a._nBlendType;switch(Z$l._blendFn=Z$a._targets?Z$S.targetFns[Z$m]:Z$S.fns[Z$m],Z$k){case 0:Z$l.offset=0,Z$l.startIndex=Z$j/(Z$ra.BYTES_PE*Z$b.vertexStride)*1.5,Z$l.startIndex*=Z$ra.BYTES_PIDX;break;case 1:Z$l.startIndex=Z$i,Z$l.offset=Z$j}return Z$l},Z$n._cache=((Z$n._cache=[])._length=0,Z$n._cache),Z$n.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Z$n}(),Z$la=function(){function Z$c(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new Z$D,this.screenRect=new Z$D}Z$o(Z$c,"laya.webgl.submit.SubmitScissor");var Z$a=Z$c.prototype;return Z$y.imps(Z$a,{"laya.webgl.submit.ISubmit":!0}),Z$a._scissor=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$ua.worldMatrix4,Z$f=Z$e[0],Z$i=Z$e[5],Z$j=Z$e[12],Z$k=Z$e[13];if(Z$d*=Z$i,(Z$c*=Z$f)<1||Z$d<1)return!1;var Z$l=(Z$a=Z$a*Z$f+Z$j)+Z$c,Z$m=(Z$b=Z$b*Z$i+Z$k)+Z$d;Z$a<0&&(Z$c=Z$l-(Z$a=0)),Z$b<0&&(Z$d=Z$m-(Z$b=0));var Z$n=Z$ua.worldClipRect;if(Z$a=Math.max(Z$a,Z$n.x),Z$b=Math.max(Z$b,Z$n.y),Z$c=Math.min(Z$l,Z$n.right)-Z$a,Z$d=Math.min(Z$m,Z$n.bottom)-Z$b,Z$c<1||Z$d<1)return!1;var Z$o=Z$ua.worldScissorTest;return this.screenRect.copyFrom(Z$n),Z$n.x=Z$a,Z$n.y=Z$b,Z$n.width=Z$c,Z$n.height=Z$d,Z$ua.worldScissorTest=!0,Z$b=Z$ua.height-Z$b-Z$d,Z$wa.mainContext.scissor(Z$a,Z$b,Z$c,Z$d),Z$wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),Z$o?(Z$b=Z$ua.height-this.screenRect.y-this.screenRect.height,Z$wa.mainContext.scissor(this.screenRect.x,Z$b,this.screenRect.width,this.screenRect.height),Z$wa.mainContext.enable(3089)):(Z$wa.mainContext.disable(3089),Z$ua.worldScissorTest=!1),Z$n.copyFrom(this.screenRect),!0},Z$a._scissorWithTagart=function(Z$a,Z$b,Z$c,Z$d){if(Z$c<1||Z$d<1)return!1;var Z$e=Z$a+Z$c,Z$f=Z$b+Z$d;Z$a<0&&(Z$c=Z$e-(Z$a=0)),Z$b<0&&(Z$d=Z$f-(Z$b=0));var Z$i=Z$ua.worldClipRect;if(Z$a=Math.max(Z$a,Z$i.x),Z$b=Math.max(Z$b,Z$i.y),Z$c=Math.min(Z$e,Z$i.right)-Z$a,Z$d=Math.min(Z$f,Z$i.bottom)-Z$b,Z$c<1||Z$d<1)return!1;var Z$j=Z$ua.worldScissorTest;return this.screenRect.copyFrom(Z$i),Z$ua.worldScissorTest=!0,Z$i.x=Z$a,Z$i.y=Z$b,Z$i.width=Z$c,Z$i.height=Z$d,Z$b=Z$ua.height-Z$b-Z$d,Z$wa.mainContext.scissor(Z$a,Z$b,Z$c,Z$d),Z$wa.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),Z$j?(Z$b=Z$ua.height-this.screenRect.y-this.screenRect.height,Z$wa.mainContext.scissor(this.screenRect.x,Z$b,this.screenRect.width,this.screenRect.height),Z$wa.mainContext.enable(3089)):(Z$wa.mainContext.disable(3089),Z$ua.worldScissorTest=!1),Z$i.copyFrom(this.screenRect),!0},Z$a.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},Z$a.getRenderType=function(){return 0},Z$a.releaseRender=function(){var Z$a=Z$c._cache;(Z$a[Z$a._length++]=this).context=null},Z$c.create=function(Z$a){var Z$b=Z$c._cache._length?Z$c._cache[--Z$c._cache._length]:new Z$c;return Z$b.context=Z$a,Z$b},Z$c._cache=((Z$c._cache=[])._length=0,Z$c._cache),Z$c}(),Z$ma=function(){function Z$k(){this.step=0,this.blendMode=null,this.level=0}Z$o(Z$k,"laya.webgl.submit.SubmitStencil");var Z$a=Z$k.prototype;return Z$y.imps(Z$a,{"laya.webgl.submit.ISubmit":!0}),Z$a.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},Z$a.getRenderType=function(){return 0},Z$a.releaseRender=function(){var Z$a=Z$k._cache;Z$a[Z$a._length++]=this},Z$a.do1=function(){var Z$a=Z$wa.mainContext;Z$a.enable(2960),Z$a.clear(1024),Z$a.colorMask(!1,!1,!1,!1),Z$a.stencilFunc(514,this.level,255),Z$a.stencilOp(7680,7680,7682)},Z$a.do2=function(){var Z$a=Z$wa.mainContext;Z$a.stencilFunc(514,this.level+1,255),Z$a.colorMask(!0,!0,!0,!0),Z$a.stencilOp(7680,7680,7680)},Z$a.do3=function(){var Z$a=Z$wa.mainContext;Z$a.colorMask(!0,!0,!0,!0),Z$a.stencilOp(7680,7680,7680),Z$a.clear(1024),Z$a.disable(2960)},Z$a.do4=function(){var Z$a=Z$wa.mainContext;0==this.level&&(Z$a.enable(2960),Z$a.clear(1024)),Z$a.colorMask(!1,!1,!1,!1),Z$a.stencilFunc(519,0,255),Z$a.stencilOp(7680,7680,7682)},Z$a.do5=function(){var Z$a=Z$wa.mainContext;Z$a.stencilFunc(514,this.level,255),Z$a.colorMask(!0,!0,!0,!0),Z$a.stencilOp(7680,7680,7680)},Z$a.do6=function(){var Z$a=Z$wa.mainContext;Z$S.targetFns[Z$S.TOINT[this.blendMode]](Z$a)},Z$a.do7=function(){var Z$a=Z$wa.mainContext;Z$a.colorMask(!1,!1,!1,!1),Z$a.stencilOp(7680,7680,7683)},Z$a.do8=function(){var Z$a=Z$wa.mainContext;Z$a.colorMask(!0,!0,!0,!0),Z$a.stencilFunc(514,this.level,255),Z$a.stencilOp(7680,7680,7680)},Z$k.restore=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f;if((Z$a._renderKey=0)<Z$k._mask&&Z$k._mask--,0==Z$k._mask)Z$f=laya.webgl.submit.SubmitStencil.create(3),Z$a.addRenderObject(Z$f),Z$a._curSubmit=Z$fa.RENDERBASE;else{Z$f=laya.webgl.submit.SubmitStencil.create(7),Z$a.addRenderObject(Z$f);var Z$i=Z$a._vb;Z$i._byteLength;if(Z$sa.fillRectImgVb(Z$i,null,Z$b.x,Z$b.y,Z$b.width,Z$b.height,Z$K.DEF_UV,Z$c,Z$d,Z$e,0,0)){Z$a._shader2D.glTexture=null;var Z$j=Z$a._curSubmit=Z$fa.createSubmit(Z$a,Z$a._ib,Z$i,(Z$i._byteLength-64)/32*3,Z$Aa.create(2,0));Z$j.shaderValue.ALPHA=1,Z$a._submits[Z$a._submits._length++]=Z$j,Z$a._curSubmit._numEle+=6,Z$a._curSubmit=Z$fa.RENDERBASE}else alert("clipRect calc stencil rect error");Z$f=laya.webgl.submit.SubmitStencil.create(8),Z$a.addRenderObject(Z$f)}},Z$k.restore2=function(Z$a,Z$b){var Z$c;(Z$a._renderKey=0)<Z$k._mask&&Z$k._mask--,0==Z$k._mask?(Z$c=laya.webgl.submit.SubmitStencil.create(3),Z$a.addRenderObject(Z$c),Z$a._curSubmit=Z$fa.RENDERBASE):(Z$c=laya.webgl.submit.SubmitStencil.create(7),Z$a.addRenderObject(Z$c),Z$a._submits[Z$a._submits._length++]=Z$b,Z$c=laya.webgl.submit.SubmitStencil.create(8),Z$a.addRenderObject(Z$c))},Z$k.create=function(Z$a){var Z$b=Z$k._cache._length?Z$k._cache[--Z$k._cache._length]:new Z$k;return 5==(Z$b.step=Z$a)&&++Z$k._mask,Z$b.level=Z$k._mask,Z$b},Z$k._cache=((Z$k._cache=[])._length=0,Z$k._cache),Z$k._mask=0,Z$k}(),Z$na=function(){function Z$j(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}Z$o(Z$j,"laya.webgl.submit.SubmitTarget");var Z$a=Z$j.prototype;return Z$y.imps(Z$a,{"laya.webgl.submit.ISubmit":!0}),Z$a.renderSubmit=function(){this._vb.bind_upload(this._ib);var Z$a=this.scope.getValue(this.proName);return Z$a&&(this.shaderValue.texture=Z$a.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[Z$a.width,Z$a.height]),this.shaderValue.upload(),this.blend(),Z$G.drawCall++,Z$G.trianglesFaces+=this._numEle/3,Z$wa.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},Z$a.blend=function(){if(Z$S.activeBlendFunction!==Z$S.fns[this.blendType]){var Z$a=Z$wa.mainContext;Z$a.enable(3042),Z$S.fns[this.blendType](Z$a),Z$S.activeBlendFunction=Z$S.fns[this.blendType]}},Z$a.getRenderType=function(){return 0},Z$a.releaseRender=function(){var Z$a=Z$j._cache;(Z$a[Z$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},Z$j.create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=Z$j._cache._length?Z$j._cache[--Z$j._cache._length]:new Z$j;return Z$i._ib=Z$b,Z$i._vb=Z$c,Z$i.proName=Z$f,Z$i._startIdx=Z$d*Z$ra.BYTES_PIDX,Z$i._numEle=0,Z$i.blendType=Z$a._nBlendType,Z$i.shaderValue=Z$e,Z$i.shaderValue.setValue(Z$a._shader2D),Z$i},Z$j._cache=((Z$j._cache=[])._length=0,Z$j._cache),Z$j}(),Z$oa=function(){function Z$a(){this._sourceStr=null}Z$o(Z$a,"laya.webgl.text.CharSegment");var Z$b=Z$a.prototype;return Z$y.imps(Z$b,{"laya.webgl.text.ICharSegment":!0}),Z$b.textToSpit=function(Z$a){this._sourceStr=Z$a},Z$b.getChar=function(Z$a){return this._sourceStr.charAt(Z$a)},Z$b.getCharCode=function(Z$a){return this._sourceStr.charCodeAt(Z$a)},Z$b.length=function(){return this._sourceStr.length},Z$a}(),Z$pa=function(){var Z$a;function Z$G(){}return Z$o(Z$G,"laya.webgl.text.DrawText"),Z$G.__init__=function(){Z$G._charsTemp=new Array,Z$G._drawValue=new Z$a,Z$G._charSeg=new Z$oa},Z$G.customCharSeg=function(Z$a){Z$G._charSeg=Z$a},Z$G.getChar=function(Z$a,Z$b,Z$c){var Z$d=Z$Va.createOneChar(Z$a,Z$c);return-1!=Z$b&&(Z$G._charsCache[Z$b]=Z$d),Z$d},Z$G._drawSlow=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$n,Z$o,Z$p,Z$q){var Z$r,Z$s,Z$t=Z$G._drawValue.value(Z$f,Z$j,Z$k,Z$l,Z$o,Z$p,Z$q),Z$u=0,Z$v=0,Z$w=Z$G._charsTemp,Z$x=0,Z$y=NaN;if(Z$d)for(Z$w.length=Z$d.length,Z$u=0,Z$v=Z$d.length;Z$u<Z$v;Z$u++)(Z$s=Z$d[Z$u])&&(Z$y=Z$s.charNum+Z$t.txtID,Z$w[Z$u]=Z$r=Z$G._charsCache[Z$y]||Z$G.getChar(Z$s.char,Z$y,Z$t),Z$r.active());else{var Z$z=Z$c instanceof laya.utils.WordText?Z$c.toString():Z$c;if(Z$J.CharacterCache){Z$G._charSeg.textToSpit(Z$z);var Z$A=Z$G._charSeg.length();for(Z$u=0,Z$v=Z$w.length=Z$A;Z$u<Z$v;Z$u++)Z$y=Z$G._charSeg.getCharCode(Z$u)+Z$t.txtID,Z$w[Z$u]=Z$r=Z$G._charsCache[Z$y]||Z$G.getChar(Z$G._charSeg.getChar(Z$u),Z$y,Z$t),Z$r.active(),Z$x+=Z$r.cw}else Z$w.length=0,(Z$r=Z$G.getChar(Z$z,-1,Z$t)).active(),Z$x+=Z$r.cw,Z$w[0]=Z$r}var Z$B=0;null!==Z$i&&"left"!==Z$i&&(Z$B=-("center"==Z$i?Z$x/2:Z$x));var Z$C,Z$D,Z$E=NaN,Z$F=0;if(Z$d)for(Z$u=0,Z$v=Z$w.length;Z$u<Z$v;Z$u++)Z$r=Z$w[Z$u],Z$s=Z$d[Z$u],Z$r&&Z$s&&!Z$r.isSpace&&(Z$E=Z$r.borderSize,Z$C=Z$r.texture,Z$b._drawText(Z$C,Z$m+Z$B+Z$s.x*Z$o-Z$E,Z$n+Z$s.y*Z$p-Z$E,Z$C.width,Z$C.height,Z$e,0,0,0,0));else{for(Z$u=0,Z$v=Z$w.length;Z$u<Z$v;Z$u++)(Z$r=Z$w[Z$u])&&!Z$r.isSpace&&(Z$E=Z$r.borderSize,Z$C=Z$r.texture,Z$b._drawText(Z$C,Z$m+Z$B-Z$E,Z$n-Z$E,Z$C.width,Z$C.height,Z$e,0,0,0,0),Z$a&&((Z$D=Z$a[Z$F++])||(Z$D=Z$a[Z$F-1]=[]),Z$D[0]=Z$C,Z$D[1]=Z$B-Z$E,Z$D[2]=-Z$E)),Z$B+=Z$r.cw;Z$a&&(Z$a.length=Z$F)}},Z$G._drawFast=function(Z$a,Z$b,Z$c,Z$d,Z$e){for(var Z$f,Z$i,Z$j=0,Z$k=Z$a.length;Z$j<Z$k;Z$j++)(Z$f=(Z$i=Z$a[Z$j])[0]).active(),Z$b._drawText(Z$f,Z$d+Z$i[1],Z$e+Z$i[2],Z$f.width,Z$f.height,Z$c,0,0,0,0)},Z$G.drawText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$n){if(void 0===Z$n&&(Z$n=0),!(Z$b&&0===Z$b.length||Z$c&&0===Z$c.length)){var Z$o=Z$d.a,Z$p=Z$d.d;(0!==Z$d.b||0!==Z$d.c)&&(Z$o=Z$p=1);var Z$q=1!==Z$o||1!==Z$p;if(Z$q&&Z$y.stage.transform){var Z$r=Z$y.stage.transform;Z$q=Z$r.a===Z$o&&Z$r.d===Z$p}else Z$q=!1;if(Z$q){var Z$s=(Z$d=Z$d.copyTo(Z$za._tmpMatrix)).tx,Z$t=Z$d.ty;Z$d.scale(1/Z$o,1/Z$p),Z$d._checkTransform(),Z$l*=Z$o,Z$m*=Z$p,Z$l+=Z$s-Z$d.tx,Z$m+=Z$t-Z$d.ty}else Z$o=Z$p=1;if(Z$c)Z$G._drawSlow(null,Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$o,Z$p,Z$n);else{if(null===Z$b.toUpperCase){var Z$u=Z$o+1e5*Z$p,Z$v=Z$b;return void(Z$v.changed||Z$v.id!==Z$u?(Z$v.id=Z$u,Z$v.changed=!1,Z$G._drawSlow(Z$v.save,Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$o,Z$p,Z$n)):Z$G._drawFast(Z$v.save,Z$a,Z$d,Z$l,Z$m))}var Z$w=Z$b+Z$e.toString()+Z$i+Z$j+Z$k+Z$o+Z$p+Z$f,Z$x=Z$G._textsCache[Z$w];Z$J.CharacterCache?Z$x?Z$G._drawFast(Z$x,Z$a,Z$d,Z$l,Z$m):(Z$G._textsCache.__length||(Z$G._textsCache.__length=0),Z$G._textsCache.__length>Z$z.WebGLTextCacheCount&&((Z$G._textsCache={}).__length=0,Z$G._curPoolIndex=0),Z$G._textCachesPool[Z$G._curPoolIndex]?(Z$x=Z$G._textsCache[Z$w]=Z$G._textCachesPool[Z$G._curPoolIndex]).length=0:Z$G._textCachesPool[Z$G._curPoolIndex]=Z$x=Z$G._textsCache[Z$w]=[],Z$G._textsCache.__length++,Z$G._curPoolIndex++,Z$G._drawSlow(Z$x,Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$o,Z$p,Z$n)):Z$G._drawSlow(Z$x,Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$o,Z$p,Z$n)}}},Z$G._charsTemp=null,Z$G._textCachesPool=[],Z$G._curPoolIndex=0,Z$G._charsCache={},Z$G._textsCache={},Z$G._drawValue=null,Z$G.d=[],Z$G._charSeg=null,Z$G.__init$=function(){Z$a=function(){function Z$k(){}return Z$o(Z$k,""),Z$k.prototype.value=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this.font=Z$a,this.fillColor=Z$b,this.borderColor=Z$c,this.lineWidth=Z$d,this.scaleX=Z$e,this.scaleY=Z$f,this.underLine=Z$i;var Z$j=Z$a.toString()+Z$e+Z$f+Z$d+(Z$b?Z$b.toLowerCase():" ")+(Z$c?Z$c.toLowerCase():" ")+Z$i;return this.txtID=Z$k._keymap[Z$j],this.txtID||(this.txtID=1e-7*++Z$k._keymapCount,Z$k._keymap[Z$j]=this.txtID),this},Z$k.clear=function(){Z$k._keymap={},Z$k._keymapCount=1},Z$k._keymap={},Z$k._keymapCount=1,Z$k}()},Z$G}(),Z$qa=function(){function Z$e(Z$a){this._index=0,this._size=14,this._italic=-2,Z$e._cache2=Z$e._cache2||[],this.setFont(Z$a||"14px Arial")}Z$o(Z$e,"laya.webgl.text.FontInContext");var Z$a=Z$e.prototype;return Z$a.setFont=function(Z$a){var Z$b=Z$e._cache2[Z$a];if(Z$b)this._words=Z$b[0],this._size=Z$b[1];else{this._words=Z$a.split(" ");for(var Z$c=0,Z$d=this._words.length;Z$c<Z$d;Z$c++)if(0<this._words[Z$c].indexOf("px")){this._index=Z$c;break}this._size=parseInt(this._words[this._index]),Z$e._cache2[Z$a]=[this._words,this._size]}this._text=null,this._italic=-2},Z$a.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},Z$a.hasType=function(Z$a){for(var Z$b=0,Z$c=this._words.length;Z$b<Z$c;Z$b++)if(this._words[Z$b]===Z$a)return Z$b;return-1},Z$a.removeType=function(Z$a){for(var Z$b=0,Z$c=this._words.length;Z$b<Z$c;Z$b++)if(this._words[Z$b]===Z$a){this._words.splice(Z$b,1),this._index>Z$b&&this._index--;break}this._text=null,this._italic=-2},Z$a.copyTo=function(Z$a){return Z$a._text=this._text,Z$a._size=this._size,Z$a._index=this._index,Z$a._words=this._words.slice(),Z$a._italic=-2,Z$a},Z$a.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},Z$d(0,Z$a,"size",function(){return this._size},function(Z$a){this._size=Z$a,this._words[this._index]=Z$a+"px",this._text=null}),Z$e.create=function(Z$a){var Z$b=Z$e._cache[Z$a];return Z$b||(Z$b=Z$e._cache[Z$a]=new Z$e(Z$a))},Z$e.EMPTY=new Z$e,Z$e._cache={},Z$e._cache2=null,Z$e}(),Z$ra=function(){function Z$a(){}return Z$o(Z$a,"laya.webgl.utils.CONST3D2D"),Z$a.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Z$a.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],Z$a.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],Z$a._TMPARRAY=[],Z$a._OFFSETX=0,Z$a._OFFSETY=0,Z$i(Z$a,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),Z$a}(),Z$sa=function(){function Z$q(){}return Z$o(Z$q,"laya.webgl.utils.GlUtils"),Z$q.make2DProjection=function(Z$a,Z$b,Z$c){return[2/Z$a,0,0,0,0,-2/Z$b,0,0,0,0,2/Z$c,0,-1,1,0,1]},Z$q.fillIBQuadrangle=function(Z$a,Z$b){if(65535/4<Z$b)throw Error("IBQuadrangle count:"+Z$b+" must<:"+Math.floor(65535/4));Z$b=Math.floor(Z$b),Z$a._resizeBuffer(6*(Z$b+1)*2,!1),Z$a.byteLength=Z$a.bufferLength;for(var Z$c=Z$a.getUint16Array(),Z$d=0,Z$e=0;Z$e<Z$b;Z$e++)Z$c[Z$d++]=4*Z$e,Z$c[Z$d++]=4*Z$e+2,Z$c[Z$d++]=4*Z$e+1,Z$c[Z$d++]=4*Z$e,Z$c[Z$d++]=4*Z$e+3,Z$c[Z$d++]=4*Z$e+2;return Z$a.setNeedUpload(),!0},Z$q.expandIBQuadrangle=function(Z$a,Z$b){Z$a.bufferLength>=6*Z$b*2||Z$q.fillIBQuadrangle(Z$a,Z$b)},Z$q.mathCeilPowerOfTwo=function(Z$a){return Z$a--,Z$a|=Z$a>>1,Z$a|=Z$a>>2,Z$a|=Z$a>>4,Z$a|=Z$a>>8,Z$a|=Z$a>>16,++Z$a},Z$q.fillQuadrangleImgVb=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){var Z$k=16+(Z$a._byteLength>>2);Z$a.byteLength=Z$k<<2;var Z$l=Z$a.getFloat32Array();Z$l[(Z$k-=16)+2]=Z$e[0],Z$l[Z$k+3]=Z$e[1],Z$l[Z$k+6]=Z$e[2],Z$l[Z$k+7]=Z$e[3],Z$l[Z$k+10]=Z$e[4],Z$l[Z$k+11]=Z$e[5],Z$l[Z$k+14]=Z$e[6],Z$l[Z$k+15]=Z$e[7];var Z$m=Z$f.a,Z$n=Z$f.b,Z$o=Z$f.c,Z$p=Z$f.d;if(1!==Z$m||0!==Z$n||0!==Z$o||1!==Z$p){Z$f.bTransform=!0;var Z$q=Z$f.tx+Z$i,Z$r=Z$f.ty+Z$j;Z$l[Z$k]=(Z$d[0]+Z$b)*Z$m+(Z$d[1]+Z$c)*Z$o+Z$q,Z$l[Z$k+1]=(Z$d[0]+Z$b)*Z$n+(Z$d[1]+Z$c)*Z$p+Z$r,Z$l[Z$k+4]=(Z$d[2]+Z$b)*Z$m+(Z$d[3]+Z$c)*Z$o+Z$q,Z$l[Z$k+5]=(Z$d[2]+Z$b)*Z$n+(Z$d[3]+Z$c)*Z$p+Z$r,Z$l[Z$k+8]=(Z$d[4]+Z$b)*Z$m+(Z$d[5]+Z$c)*Z$o+Z$q,Z$l[Z$k+9]=(Z$d[4]+Z$b)*Z$n+(Z$d[5]+Z$c)*Z$p+Z$r,Z$l[Z$k+12]=(Z$d[6]+Z$b)*Z$m+(Z$d[7]+Z$c)*Z$o+Z$q,Z$l[Z$k+13]=(Z$d[6]+Z$b)*Z$n+(Z$d[7]+Z$c)*Z$p+Z$r}else Z$f.bTransform=!1,Z$b+=Z$f.tx+Z$i,Z$c+=Z$f.ty+Z$j,Z$l[Z$k]=Z$b+Z$d[0],Z$l[Z$k+1]=Z$c+Z$d[1],Z$l[Z$k+4]=Z$b+Z$d[2],Z$l[Z$k+5]=Z$c+Z$d[3],Z$l[Z$k+8]=Z$b+Z$d[4],Z$l[Z$k+9]=Z$c+Z$d[5],Z$l[Z$k+12]=Z$b+Z$d[6],Z$l[Z$k+13]=Z$c+Z$d[7];return Z$a._upload=!0},Z$q.fillTranglesVB=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){var Z$j=(Z$a._byteLength>>2)+Z$d.length;Z$a.byteLength=Z$j<<2;var Z$k=Z$a.getFloat32Array();Z$j-=Z$d.length;for(var Z$l=Z$d.length,Z$m=Z$e.a,Z$n=Z$e.b,Z$o=Z$e.c,Z$p=Z$e.d,Z$q=0;Z$q<Z$l;Z$q+=4)if(Z$k[Z$j+Z$q+2]=Z$d[Z$q+2],Z$k[Z$j+Z$q+3]=Z$d[Z$q+3],1!==Z$m||0!==Z$n||0!==Z$o||1!==Z$p){Z$e.bTransform=!0;var Z$r=Z$e.tx+Z$f,Z$s=Z$e.ty+Z$i;Z$k[Z$j+Z$q]=(Z$d[Z$q]+Z$b)*Z$m+(Z$d[Z$q+1]+Z$c)*Z$o+Z$r,Z$k[Z$j+Z$q+1]=(Z$d[Z$q]+Z$b)*Z$n+(Z$d[Z$q+1]+Z$c)*Z$p+Z$s}else Z$e.bTransform=!1,Z$b+=Z$e.tx+Z$f,Z$c+=Z$e.ty+Z$i,Z$k[Z$j+Z$q]=Z$b+Z$d[Z$q],Z$k[Z$j+Z$q+1]=Z$c+Z$d[Z$q+1];return Z$a._upload=!0},Z$q.copyPreImgVb=function(Z$a,Z$b,Z$c){var Z$d=Z$a._byteLength>>2;Z$a.byteLength=Z$d+16<<2;for(var Z$e=Z$a.getFloat32Array(),Z$f=0,Z$i=Z$d-16;Z$f<4;Z$f++)Z$e[Z$d]=Z$e[Z$i]+Z$b,++Z$i,Z$e[++Z$d]=Z$e[Z$i]+Z$c,++Z$i,Z$e[++Z$d]=Z$e[Z$i],++Z$i,Z$e[++Z$d]=Z$e[Z$i],++Z$d,++Z$i;Z$a._upload=!0},Z$q.fillRectImgVb=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$n,Z$o){void 0===Z$o&&(Z$o=!1);var Z$p,Z$q,Z$r,Z$s,Z$t,Z$u,Z$v,Z$w,Z$x,Z$y,Z$z,Z$A,Z$B,Z$C,Z$D,Z$E,Z$F=1,Z$G=Z$j.a,Z$H=Z$j.b,Z$I=Z$j.c,Z$J=Z$j.d,Z$K=Z$b&&Z$b.width<99999999;if(1!==Z$G||0!==Z$H||0!==Z$I||1!==Z$J?(Z$j.bTransform=!0,0===Z$H&&0===Z$I&&(Z$F=23,Z$x=Z$e+Z$c,Z$y=Z$f+Z$d,Z$p=Z$G*Z$c+(Z$z=Z$j.tx+Z$k),Z$r=Z$G*Z$x+Z$z,Z$q=Z$J*Z$d+(Z$A=Z$j.ty+Z$l),Z$s=Z$J*Z$y+Z$A)):(Z$F=23,Z$j.bTransform=!1,Z$r=(Z$p=Z$c+Z$j.tx+Z$k)+Z$e,Z$s=(Z$q=Z$d+Z$j.ty+Z$l)+Z$f),Z$K&&(Z$t=Z$b.x,Z$u=Z$b.y,Z$v=Z$b.width+Z$t,Z$w=Z$b.height+Z$u),1!==Z$F){if(Math.min(Z$p,Z$r)>=Z$v)return!1;if(Math.min(Z$q,Z$s)>=Z$w)return!1;if(Math.max(Z$r,Z$p)<=Z$t)return!1;if(Math.max(Z$s,Z$q)<=Z$u)return!1}var Z$L=Z$a._byteLength>>2;Z$a.byteLength=16+Z$L<<2;var Z$M=Z$a.getFloat32Array();switch(Z$M[2+Z$L]=Z$i[0],Z$M[3+Z$L]=Z$i[1],Z$M[6+Z$L]=Z$i[2],Z$M[7+Z$L]=Z$i[3],Z$M[10+Z$L]=Z$i[4],Z$M[11+Z$L]=Z$i[5],Z$M[14+Z$L]=Z$i[6],Z$M[15+Z$L]=Z$i[7],Z$F){case 1:Z$z=Z$j.tx+Z$k,Z$A=Z$j.ty+Z$l;var Z$N=Z$G*Z$c,Z$O=Z$I*Z$d,Z$P=Z$J*Z$d,Z$Q=Z$H*Z$c,Z$R=Z$G*(Z$x=Z$e+Z$c),Z$S=Z$I*(Z$y=Z$f+Z$d),Z$T=Z$J*Z$y,Z$U=Z$H*Z$x;Z$o?(Z$B=Z$N+Z$O+Z$z,Z$D=Math.round(Z$B)-Z$B,Z$C=Z$P+Z$Q+Z$A,Z$E=Math.round(Z$C)-Z$C,Z$M[Z$L]=Z$B+Z$D,Z$M[1+Z$L]=Z$C+Z$E,Z$M[4+Z$L]=Z$R+Z$O+Z$z+Z$D,Z$M[5+Z$L]=Z$P+Z$U+Z$A+Z$E,Z$M[8+Z$L]=Z$R+Z$S+Z$z+Z$D,Z$M[9+Z$L]=Z$T+Z$U+Z$A+Z$E,Z$M[12+Z$L]=Z$N+Z$S+Z$z+Z$D,Z$M[13+Z$L]=Z$T+Z$Q+Z$A+Z$E):(Z$M[Z$L]=Z$N+Z$O+Z$z,Z$M[1+Z$L]=Z$P+Z$Q+Z$A,Z$M[4+Z$L]=Z$R+Z$O+Z$z,Z$M[5+Z$L]=Z$P+Z$U+Z$A,Z$M[8+Z$L]=Z$R+Z$S+Z$z,Z$M[9+Z$L]=Z$T+Z$U+Z$A,Z$M[12+Z$L]=Z$N+Z$S+Z$z,Z$M[13+Z$L]=Z$T+Z$Q+Z$A);break;case 23:Z$o?(Z$B=Z$p+Z$m,Z$D=Math.round(Z$B)-Z$B,Z$C=Z$q,Z$E=Math.round(Z$C)-Z$C,Z$M[Z$L]=Z$B+Z$D,Z$M[1+Z$L]=Z$C+Z$E,Z$M[4+Z$L]=Z$r+Z$m+Z$D,Z$M[5+Z$L]=Z$q+Z$E,Z$M[8+Z$L]=Z$r+Z$D,Z$M[9+Z$L]=Z$s+Z$E,Z$M[12+Z$L]=Z$p+Z$D,Z$M[13+Z$L]=Z$s+Z$E):(Z$M[Z$L]=Z$p+Z$m,Z$M[1+Z$L]=Z$q,Z$M[4+Z$L]=Z$r+Z$m,Z$M[5+Z$L]=Z$q,Z$M[8+Z$L]=Z$r,Z$M[9+Z$L]=Z$s,Z$M[12+Z$L]=Z$p,Z$M[13+Z$L]=Z$s)}return Z$a._upload=!0},Z$q.fillLineVb=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){var Z$k=.5*Z$i,Z$l=Z$q._fillLineArray,Z$m=-(Z$d-Z$f),Z$n=Z$c-Z$e,Z$o=Math.sqrt(Z$m*Z$m+Z$n*Z$n);Z$m/=Z$o,Z$n/=Z$o,Z$m*=Z$k,Z$n*=Z$k,Z$l[0]=Z$c-Z$m,Z$l[1]=Z$d-Z$n,Z$l[4]=Z$c+Z$m,Z$l[5]=Z$d+Z$n,Z$l[8]=Z$e+Z$m,Z$l[9]=Z$f+Z$n,Z$l[12]=Z$e-Z$m,Z$l[13]=Z$f-Z$n,Z$j&&Z$j.transformPointArray(Z$l,Z$l);var Z$p=16+(Z$a._byteLength>>2);return Z$a.byteLength=Z$p<<2,Z$a.insertData(Z$l,Z$p-16),!0},Z$q._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Z$q}(),Z$ta=(function(){function Z$k(){}Z$o(Z$k,"laya.webgl.utils.MatirxArray"),Z$k.ArrayMul=function(Z$a,Z$b,Z$c){if(Z$a)if(Z$b)for(var Z$d=NaN,Z$e=NaN,Z$f=NaN,Z$i=NaN,Z$j=0;Z$j<4;Z$j++)Z$d=Z$a[Z$j],Z$e=Z$a[Z$j+4],Z$f=Z$a[Z$j+8],Z$i=Z$a[Z$j+12],Z$c[Z$j]=Z$d*Z$b[0]+Z$e*Z$b[1]+Z$f*Z$b[2]+Z$i*Z$b[3],Z$c[Z$j+4]=Z$d*Z$b[4]+Z$e*Z$b[5]+Z$f*Z$b[6]+Z$i*Z$b[7],Z$c[Z$j+8]=Z$d*Z$b[8]+Z$e*Z$b[9]+Z$f*Z$b[10]+Z$i*Z$b[11],Z$c[Z$j+12]=Z$d*Z$b[12]+Z$e*Z$b[13]+Z$f*Z$b[14]+Z$i*Z$b[15];else Z$k.copyArray(Z$a,Z$c);else Z$k.copyArray(Z$b,Z$c)},Z$k.copyArray=function(Z$a,Z$b){if(Z$a&&Z$b)for(var Z$c=0;Z$c<Z$a.length;Z$c++)Z$b[Z$c]=Z$a[Z$c]}}(),function(){function Z$b(Z$a,Z$b,Z$c){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=Z$a,this._vb=new Z$ha(Z$a,35048),Z$b&&this._vb._resizeBuffer(Z$b,!1),this._ib=new Z$ga,Z$c&&this._ib._resizeBuffer(Z$c,!1)}Z$o(Z$b,"laya.webgl.utils.Mesh2D");var Z$a=Z$b.prototype;return Z$a.cloneWithNewVB=function(){var Z$a=new Z$b(this._stride,0,0);return Z$a._ib=this._ib,Z$a._quadNum=this._quadNum,Z$a._attribInfo=this._attribInfo,Z$a},Z$a.cloneWithNewVBIB=function(){var Z$a=new Z$b(this._stride,0,0);return Z$a._attribInfo=this._attribInfo,Z$a},Z$a.getVBW=function(){return this._vb.setNeedUpload(),this._vb},Z$a.getVBR=function(){return this._vb},Z$a.getIBR=function(){return this._ib},Z$a.getIBW=function(){return this._ib.setNeedUpload(),this._ib},Z$a.createQuadIB=function(Z$a){this._quadNum=Z$a,this._ib._resizeBuffer(6*Z$a*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var Z$b=this._ib.getUint16Array(),Z$c=0,Z$d=0,Z$e=0;Z$e<Z$a;Z$e++)Z$b[Z$c++]=Z$d,Z$b[Z$c++]=Z$d+2,Z$b[Z$c++]=Z$d+1,Z$b[Z$c++]=Z$d,Z$b[Z$c++]=Z$d+3,Z$b[Z$c++]=Z$d+2,Z$d+=4;this._ib.setNeedUpload()},Z$a.setAttributes=function(Z$a){if(this._attribInfo=Z$a,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},Z$a.getEleNum=function(){return this._ib.getBuffer().byteLength/2},Z$a.releaseMesh=function(){},Z$a.destroy=function(){},Z$a.clearVB=function(){this._vb.clear()},Z$b._gvaoid=0,Z$b}()),Z$ua=function(){function Z$e(){}return Z$o(Z$e,"laya.webgl.utils.RenderState2D"),Z$e.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},Z$e.mat2MatArray=function(Z$a,Z$b){var Z$c=Z$a,Z$d=Z$b;return Z$d[0]=Z$c.a,Z$d[1]=Z$c.b,Z$d[2]=Z$e.EMPTYMAT4_ARRAY[2],Z$d[3]=Z$e.EMPTYMAT4_ARRAY[3],Z$d[4]=Z$c.c,Z$d[5]=Z$c.d,Z$d[6]=Z$e.EMPTYMAT4_ARRAY[6],Z$d[7]=Z$e.EMPTYMAT4_ARRAY[7],Z$d[8]=Z$e.EMPTYMAT4_ARRAY[8],Z$d[9]=Z$e.EMPTYMAT4_ARRAY[9],Z$d[10]=Z$e.EMPTYMAT4_ARRAY[10],Z$d[11]=Z$e.EMPTYMAT4_ARRAY[11],Z$d[12]=Z$c.tx,Z$d[13]=Z$c.ty,Z$d[14]=Z$e.EMPTYMAT4_ARRAY[14],Z$d[15]=Z$e.EMPTYMAT4_ARRAY[15],Z$b},Z$e.restoreTempArray=function(){Z$e.TEMPMAT4_ARRAY[0]=1,Z$e.TEMPMAT4_ARRAY[1]=0,Z$e.TEMPMAT4_ARRAY[4]=0,Z$e.TEMPMAT4_ARRAY[5]=1,Z$e.TEMPMAT4_ARRAY[12]=0,Z$e.TEMPMAT4_ARRAY[13]=0},Z$e.clear=function(){Z$e.worldScissorTest=!1,Z$e.worldShaderDefines=null,Z$e.worldFilters=null,Z$e.worldAlpha=1,Z$e.worldClipRect.x=Z$e.worldClipRect.y=0,Z$e.worldClipRect.width=Z$e.width,Z$e.worldClipRect.height=Z$e.height,Z$e.curRenderTarget=null},Z$e._MAXSIZE=99999999,Z$e.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Z$e.worldMatrix4=Z$e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Z$e.worldAlpha=1,Z$e.worldScissorTest=!1,Z$e.worldFilters=null,Z$e.worldShaderDefines=null,Z$e.curRenderTarget=null,Z$e.width=0,Z$e.height=0,Z$i(Z$e,["worldMatrix",function(){return this.worldMatrix=new Z$B},"worldClipRect",function(){return this.worldClipRect=new Z$D(0,0,99999999,99999999)}]),Z$e}(),Z$va=function(){var Z$u,Z$c;function Z$v(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=this;function Z$i(Z$a){var Z$b=[],Z$c=new Z$u(Z$b);return Z$f._compileToTree(Z$c,Z$a.split("\n"),0,Z$b,Z$e),Z$c}var Z$j=Z$p.now();this._VS=Z$i(Z$b),this._PS=Z$i(Z$c),this._nameMap=Z$d,2<Z$p.now()-Z$j&&console.log("ShaderCompile use time:"+(Z$p.now()-Z$j)+"  size:"+Z$b.length+"/"+Z$c.length)}Z$o(Z$v,"laya.webgl.utils.ShaderCompile");var Z$a=Z$v.prototype;return Z$a._compileToTree=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$n,Z$o=0,Z$p=0,Z$q=0,Z$r=0;for(Z$p=Z$c;Z$p<Z$b.length;Z$p++)if(!((Z$j=Z$b[Z$p]).length<1)&&0!==(Z$o=Z$j.indexOf("//"))){if(0<=Z$o&&(Z$j=Z$j.substr(0,Z$o)),Z$f=Z$n||new Z$u(Z$d),Z$n=null,Z$f.text=Z$j,Z$f.noCompile=!0,0<=(Z$o=Z$j.indexOf("#"))){for(Z$k="#",Z$r=Z$o+1,Z$q=Z$j.length;Z$r<Z$q;Z$r++){var Z$s=Z$j.charAt(Z$r);if(" "===Z$s||"\t"===Z$s||"\r"===Z$s||"\n"===Z$s||"?"===Z$s)break;Z$k+=Z$s}switch(Z$f.name=Z$k){case"#ifdef":case"#ifndef":if(Z$f.src=Z$j,Z$f.noCompile=null!=Z$j.match(/[!&|()=<>]/),Z$f.noCompile?console.log("function():Boolean{return "+Z$j.substr(Z$o+Z$f.name.length)+"}"):(Z$m=Z$j.replace(/^\s*/,"").split(/\s+/),Z$f.setCondition(Z$m[1],"#ifdef"===Z$k?1:2),Z$f.text="//"+Z$f.text),Z$f.setParent(Z$a),Z$a=Z$f,Z$e)for(Z$m=Z$j.substr(Z$r).split(Z$v._splitToWordExps3),Z$r=0;Z$r<Z$m.length;Z$r++)(Z$j=Z$m[Z$r]).length&&(Z$e[Z$j]=!0);continue;case"#if":if(Z$f.src=Z$j,Z$f.noCompile=!0,Z$f.setParent(Z$a),Z$a=Z$f,Z$e)for(Z$m=Z$j.substr(Z$r).split(Z$v._splitToWordExps3),Z$r=0;Z$r<Z$m.length;Z$r++)(Z$j=Z$m[Z$r]).length&&"defined"!=Z$j&&(Z$e[Z$j]=!0);continue;case"#else":Z$f.src=Z$j,Z$i=(Z$a=Z$a.parent).childs[Z$a.childs.length-1],Z$f.noCompile=Z$i.noCompile,Z$f.noCompile||(Z$f.condition=Z$i.condition,Z$f.conditionType=1==Z$i.conditionType?2:1,Z$f.text="//"+Z$f.text+" "+Z$i.text+" "+Z$f.conditionType),Z$f.setParent(Z$a),Z$a=Z$f;continue;case"#endif":Z$i=(Z$a=Z$a.parent).childs[Z$a.childs.length-1],Z$f.noCompile=Z$i.noCompile,Z$f.noCompile||(Z$f.text="//"+Z$f.text),Z$f.setParent(Z$a);continue;case"#include":Z$m=Z$v.splitToWords(Z$j,null);var Z$t=Z$v.includes[Z$m[1]];if(!Z$t)throw"ShaderCompile error no this include file:"+Z$m[1];if((Z$o=Z$m[0].indexOf("?"))<0){Z$f.setParent(Z$a),Z$j=Z$t.getWith("with"==Z$m[2]?Z$m[3]:null),this._compileToTree(Z$f,Z$j.split("\n"),0,Z$d,Z$e),Z$f.text="";continue}Z$f.setCondition(Z$m[0].substr(Z$o+1),1),Z$f.text=Z$t.getWith("with"==Z$m[2]?Z$m[3]:null);break;case"#import":Z$l=(Z$m=Z$v.splitToWords(Z$j,null))[1],Z$d.push({node:Z$f,file:Z$v.includes[Z$l],ofs:Z$f.text.length});continue}}else{if((Z$i=Z$a.childs[Z$a.childs.length-1])&&!Z$i.name){0<Z$d.length&&Z$v.splitToWords(Z$j,Z$i),Z$n=Z$f,Z$i.text+="\n"+Z$j;continue}0<Z$d.length&&Z$v.splitToWords(Z$j,Z$f)}Z$f.setParent(Z$a)}},Z$a.createShader=function(Z$a,Z$b,Z$c){var Z$d={},Z$e="";if(Z$a)for(var Z$f in Z$a)Z$e+="#define "+Z$f+"\n",Z$d[Z$f]=!0;var Z$i=this._VS.toscript(Z$d,[]),Z$j=this._PS.toscript(Z$d,[]);return(Z$c||Z$Ya.create)(Z$e+Z$i.join("\n"),Z$e+Z$j.join("\n"),Z$b,this._nameMap)},Z$v._parseOne=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i={type:Z$v.shaderParamsMap[Z$c[Z$d+1]],name:Z$c[Z$d+2],size:isNaN(parseInt(Z$c[Z$d+3]))?1:parseInt(Z$c[Z$d+3])};return Z$f&&("attribute"==Z$e?Z$a.push(Z$i):Z$b.push(Z$i)),":"==Z$c[Z$d+3]&&(Z$i.type=Z$c[Z$d+4],Z$d+=2),Z$d+=2},Z$v.addInclude=function(Z$a,Z$b){if(!Z$b||0===Z$b.length)throw new Error("add shader include file err:"+Z$a);if(Z$v.includes[Z$a])throw new Error("add shader include file err, has add:"+Z$a);Z$v.includes[Z$a]=new Z$c(Z$b)},Z$v.preGetParams=function(Z$a,Z$b){var Z$c=[Z$a,Z$b],Z$d={},Z$e=[],Z$f=[],Z$i={},Z$j=[];Z$d.attributes=Z$e,Z$d.uniforms=Z$f,Z$d.defines=Z$i;for(var Z$k=0,Z$l=0,Z$m=0;Z$m<2;Z$m++){Z$c[Z$m]=Z$c[Z$m].replace(Z$v._removeAnnotation,"");var Z$n,Z$o=Z$c[Z$m].match(Z$v._reg);for(Z$k=0,Z$l=Z$o.length;Z$k<Z$l;Z$k++){var Z$p=Z$o[Z$k];if("attribute"==Z$p||"uniform"==Z$p)Z$k=Z$v._parseOne(Z$e,Z$f,Z$o,Z$k,Z$p,!0);else{if("#define"==Z$p){Z$j[Z$p=Z$o[++Z$k]]=1;continue}if("#ifdef"==Z$p){Z$i[Z$n=Z$o[++Z$k]]=Z$i[Z$n]||[];for(Z$k++;Z$k<Z$l;Z$k++)if("attribute"==(Z$p=Z$o[Z$k])||"uniform"==Z$p)Z$k=Z$v._parseOne(Z$e,Z$f,Z$o,Z$k,Z$p,Z$j[Z$n]);else if("#else"==Z$p)for(Z$k++;Z$k<Z$l;Z$k++)if("attribute"==(Z$p=Z$o[Z$k])||"uniform"==Z$p)Z$k=Z$v._parseOne(Z$e,Z$f,Z$o,Z$k,Z$p,!Z$j[Z$n]);else if("#endif"==Z$p)break}}}}return Z$d},Z$v.splitToWords=function(Z$a,Z$b){for(var Z$c,Z$d,Z$e=[],Z$f=-1,Z$i=0,Z$j=Z$a.length;Z$i<Z$j;Z$i++)if(Z$c=Z$a.charAt(Z$i),0<=" \t=+-*/&%!<>()'\",;".indexOf(Z$c)){if(0<=Z$f&&1<Z$i-Z$f&&(Z$d=Z$a.substr(Z$f,Z$i-Z$f),Z$e.push(Z$d)),'"'==Z$c||"'"==Z$c){var Z$k=Z$a.indexOf(Z$c,Z$i+1);if(Z$k<0)throw"Sharder err:"+Z$a;Z$e.push(Z$a.substr(Z$i+1,Z$k-Z$i-1)),Z$i=Z$k,Z$f=-1;continue}"("==Z$c&&Z$b&&0<Z$e.length&&(Z$d=Z$e[Z$e.length-1]+";","vec4;main;".indexOf(Z$d)<0&&(Z$b.useFuns+=Z$d)),Z$f=-1}else Z$f<0&&(Z$f=Z$i);return Z$f<Z$j&&1<Z$j-Z$f&&(Z$d=Z$a.substr(Z$f,Z$j-Z$f),Z$e.push(Z$d)),Z$e},Z$v.IFDEF_NO=0,Z$v.IFDEF_YES=1,Z$v.IFDEF_ELSE=2,Z$v.IFDEF_PARENT=3,Z$v._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),Z$v._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),Z$v._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),Z$v.includes={},Z$i(Z$v,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),Z$v.__init$=function(){Z$u=function(){function Z$c(Z$a){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=Z$a}Z$o(Z$c,"");var Z$a=Z$c.prototype;return Z$a.setParent=function(Z$a){Z$a.childs.push(this),this.z=Z$a.z+1,this.parent=Z$a},Z$a.setCondition=function(Z$a,Z$b){Z$a&&(this.conditionType=Z$b,Z$a=Z$a.replace(/(\s*$)/g,""),this.condition=function(){return this[Z$a]},this.condition.__condition=Z$a)},Z$a.toscript=function(Z$a,Z$b){return this._toscript(Z$a,Z$b,++Z$c.__id)},Z$a._toscript=function(Z$d,Z$e,Z$f){if(this.childs.length<1&&!this.text)return Z$e;Z$e.length;if(this.condition){var Z$a=!!this.condition.call(Z$d);if(2===this.conditionType&&(Z$a=!Z$a),!Z$a)return Z$e}if(this.text&&Z$e.push(this.text),0<this.childs.length&&this.childs.forEach(function(Z$a,Z$b,Z$c){Z$a._toscript(Z$d,Z$e,Z$f)}),0<this.includefiles.length&&0<this.useFuns.length)for(var Z$b,Z$c=0,Z$i=this.includefiles.length;Z$c<Z$i;Z$c++)this.includefiles[Z$c].curUseID!=Z$f&&0<(Z$b=this.includefiles[Z$c].file.getFunsScript(this.useFuns)).length&&(this.includefiles[Z$c].curUseID=Z$f,Z$e[0]=Z$b+Z$e[0]);return Z$e},Z$c.__id=1,Z$c}(),Z$c=function(){function Z$a(Z$a){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=Z$a;for(var Z$b=0,Z$c=0,Z$d=0;!((Z$b=Z$a.indexOf("#begin",Z$b))<0);){for(Z$d=Z$b+5;!((Z$d=Z$a.indexOf("#end",Z$d))<0)&&"i"===Z$a.charAt(Z$d+4);)Z$d+=5;if(Z$d<0)throw"add include err,no #end:"+Z$a;Z$c=Z$a.indexOf("\n",Z$b);var Z$e=Z$v.splitToWords(Z$a.substr(Z$b,Z$c-Z$b),null);"code"==Z$e[1]?this.codes[Z$e[2]]=Z$a.substr(Z$c+1,Z$d-Z$c-1):"function"==Z$e[1]&&(Z$c=Z$a.indexOf("function",Z$b),Z$c+="function".length,this.funs[Z$e[3]]=Z$a.substr(Z$c+1,Z$d-Z$c-1),this.funnames+=Z$e[3]+";"),Z$b=Z$d+1}}Z$o(Z$a,"");var Z$b=Z$a.prototype;return Z$b.getWith=function(Z$a){var Z$b=Z$a?this.codes[Z$a]:this.script;if(!Z$b)throw"get with error:"+Z$a;return Z$b},Z$b.getFunsScript=function(Z$a){var Z$b="";for(var Z$c in this.funs)0<=Z$a.indexOf(Z$c+";")&&(Z$b+=this.funs[Z$c]);return Z$b},Z$a}()},Z$v}(),Z$wa=function(){function Z$i(){}return Z$o(Z$i,"laya.webgl.WebGL"),Z$i._uint8ArraySlice=function(){for(var Z$a=this.length,Z$b=new Uint8Array(this.length),Z$c=0;Z$c<Z$a;Z$c++)Z$b[Z$c]=this[Z$c];return Z$b},Z$i._float32ArraySlice=function(){for(var Z$a=this.length,Z$b=new Float32Array(this.length),Z$c=0;Z$c<Z$a;Z$c++)Z$b[Z$c]=this[Z$c];return Z$b},Z$i._uint16ArraySlice=function(Z$a){var Z$b,Z$c=arguments,Z$d=0,Z$e=0;if(0===Z$c.length)for(Z$d=this.length,Z$b=new Uint16Array(Z$d),Z$e=0;Z$e<Z$d;Z$e++)Z$b[Z$e]=this[Z$e];else if(2===Z$c.length){var Z$f=Z$c[0],Z$i=Z$c[1];if(Z$f<Z$i)for(Z$d=Z$i-Z$f,Z$b=new Uint16Array(Z$d),Z$e=Z$f;Z$e<Z$i;Z$e++)Z$b[Z$e-Z$f]=this[Z$e];else Z$b=new Uint16Array(0)}return Z$b},Z$i.expandContext=function(){var Z$a=Z$e.prototype,Z$b=CanvasRenderingContext2D.prototype;Z$b.fillTrangles=Z$a.fillTrangles,Z$Za.__int__(null),Z$b.setIBVB=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){void 0===Z$k&&(Z$k=0),void 0===Z$l&&(Z$l=0),null===Z$c&&(this._ib=this._ib||Z$ga.QuadrangleIB,Z$c=this._ib,Z$sa.expandIBQuadrangle(Z$c,Z$d._byteLength/64+8)),this._setIBVB(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l)},Z$b.fillTrangles=function(Z$a,Z$b,Z$c,Z$d,Z$e){this._curMat=this._curMat||Z$B.create(),this._vb=this._vb||Z$ha.create(),this._ib||(this._ib=Z$ga.create(),Z$sa.fillIBQuadrangle(this._ib,Z$i/4));var Z$f=this._vb,Z$i=Z$d.length>>4;Z$sa.fillTranglesVB(Z$f,Z$b,Z$c,Z$d,Z$e||this._curMat,0,0),Z$sa.expandIBQuadrangle(this._ib,Z$f._byteLength/64+8);var Z$j=new Z$Aa(1,0);Z$j.textureHost=Z$a;var Z$k=new Z$_a("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");Z$f._vertType=3,this._setIBVB(Z$b,Z$c,this._ib,Z$f,6*Z$i,Z$e,Z$k,Z$j,0,0)}},Z$i.enable=function(){if(Z$p.__init__(),Z$t.isConchApp&&!Z$t.isConchWebGL)return Z$x.skinAniSprite=function(){return new Z$aa},Z$i.expandContext(),!1;if(Z$x.getWebGLContext=function(Z$a){for(var Z$b,Z$c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],Z$d=0;Z$d<Z$c.length;Z$d++){try{Z$b=Z$a.getContext(Z$c[Z$d],{stencil:Z$z.isStencil,alpha:Z$z.isAlpha,antialias:Z$z.isAntialias,premultipliedAlpha:Z$z.premultipliedAlpha,preserveDrawingBuffer:Z$z.preserveDrawingBuffer})}catch(Z$a){}if(Z$b)return Z$b}return null},null==(Z$i.mainContext=Z$i.mainContext||Z$x.getWebGLContext(Z$t._mainCanvas)))return!1;if(Z$t.isWebGL)return!0;Z$r.create=function(Z$a,Z$b){return new Z$ab(Z$a,Z$b)},Z$s.create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){return new Z$Xa(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i)},Z$t.WebGL=Z$i,Z$t.isWebGL=!0,Z$pa.__init__(),Z$x.createRenderSprite=function(Z$a,Z$b){return new Z$Ba(Z$a,Z$b)},Z$x.createWebGLContext2D=function(Z$a){return new Z$za(Z$a)},Z$x.changeWebGLSize=function(Z$a,Z$b){laya.webgl.WebGL.onStageResize(Z$a,Z$b)},Z$x.createGraphics=function(){return new Z$ya};var Z$a=Z$x.createFilterAction;return Z$x.createFilterAction=Z$a||function(Z$a){return new Z$Ca},Z$x.clear=function(Z$a){Z$ua.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var Z$b=Z$t.context.ctx,Z$c=0==Z$b._submits._length||Z$z.preserveDrawingBuffer?Z$q.create(Z$a)._color:Z$F._wgColor;Z$c&&Z$b.clearBG(Z$c[0],Z$c[1],Z$c[2],Z$c[3]),Z$ua.clear()},Z$x.addToAtlas=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!1);var Z$c=Z$a.bitmap;Z$t.optimizeTextureMemory(Z$a.url,Z$a)?Z$y.__typeof(Z$c,"laya.webgl.resource.IMergeAtlasBitmap")&&Z$c.allowMerageInAtlas&&Z$c.on("recovered",Z$a,Z$a.addTextureToAtlas):Z$c.enableMerageInAtlas=!1},Z$x.isAtlas=function(Z$a){return Z$a instanceof laya.webgl.atlas.AtlasWebGLCanvas},Z$Q._enable(),Z$x.beginFlush=function(){for(var Z$a=Z$Q.instance,Z$b=Z$a.getAtlaserCount(),Z$c=0;Z$c<Z$b;Z$c++){var Z$d=Z$a.getAtlaserByIndex(Z$c).texture;Z$d._flashCacheImageNeedFlush&&Z$x.flashFlushImage(Z$d)}},Z$x.drawToCanvas=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){(Z$c<=0||Z$d<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),Z$c|=0,Z$d|=0,Z$e|=0,Z$f|=0;var Z$i=Z$Ma.create(Z$c,Z$d,6408,5121,0,!1);Z$i.start(),Z$i.clear(0,0,0,0),Z$t.context.clear(),Z$u.renders[Z$b]._fun(Z$a,Z$t.context,Z$e,Z$ua.height-Z$d+Z$f),Z$t.context.flush(),Z$i.end();var Z$j=Z$i.getData(0,0,Z$c,Z$d);if(Z$i.recycle(),Z$j.byteLength==Z$c*Z$d*4){var Z$k=new Z$Ua;Z$k._canvas=Z$p.createElement("canvas"),Z$k.size(Z$c,Z$d);var Z$l=Z$k._canvas.getContext("2d");Z$p.canvas.size(Z$c,Z$d);var Z$m=Z$p.context,Z$n=Z$m.createImageData(Z$c,Z$d);return Z$n.data.set(new Uint8ClampedArray(Z$j.buffer)),Z$k._imgData=Z$n,Z$m.putImageData(Z$n,0,0),Z$l.save(),Z$l.translate(0,Z$d),Z$l.scale(1,-1),Z$l.drawImage(Z$p.canvas.source,0,0),Z$l.restore(),Z$k}console.log("drawToCanvas error: w:"+Z$c+",h:"+Z$d+",datalen:"+Z$j.byteLength)},Z$x.createFilterAction=function(Z$a){var Z$b;switch(Z$a){case 32:Z$b=new Z$Ca}return Z$b},Z$x.addTextureToAtlas=function(Z$a){Z$a._uvID++,Z$Q._atlasRestore++,Z$a.bitmap.enableMerageInAtlas&&Z$Q.instance.addToAtlas(Z$a)},Z$x.getTexturePixels=function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$t.context.ctx.clear();var Z$f=new Z$E;Z$f.graphics.drawTexture(Z$a,-Z$b,-Z$c);var Z$i=Z$Ma.create(Z$d,Z$e);Z$i.start(),Z$i.clear(0,0,0,0),Z$f.render(Z$t.context,0,0),Z$t.context.ctx.flush(),Z$i.end();for(var Z$j=Z$i.getData(0,0,Z$d,Z$e),Z$k=[],Z$l=0,Z$m=Z$e-1;0<=Z$m;Z$m--)for(var Z$n=0;Z$n<Z$d;Z$n++)Z$l=4*(Z$m*Z$d+Z$n),Z$k.push(Z$j[Z$l]),Z$k.push(Z$j[Z$l+1]),Z$k.push(Z$j[Z$l+2]),Z$k.push(Z$j[Z$l+3]);return Z$k},Z$x.skinAniSprite=function(){return new Z$aa},Z$l.create=function(Z$a,Z$b){var Z$c=new Z$Ua;return Z$c._imgData=Z$b,Z$c.flipY=!1,Z$c},Z$A._filterStart=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$a.getValue("bounds"),Z$i=Z$Ma.create(Z$f.width,Z$f.height);if(Z$i.start(),Z$i.clear(0,0,0,0),Z$a.addValue("src",Z$i),Z$a.addValue("ScissorTest",Z$ua.worldScissorTest),Z$ua.worldScissorTest){var Z$j=new Z$D;Z$j.copyFrom(Z$c.ctx._clipRect),Z$a.addValue("clipRect",Z$j),Z$ua.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},Z$A._filterEnd=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$a.getValue("bounds");Z$a.getValue("src").end();var Z$i=Z$Ma.create(Z$f.width,Z$f.height);Z$i.start(),Z$i.clear(0,0,0,0),Z$a.addValue("out",Z$i),Z$b._set$P("_filterCache",Z$i),Z$b._set$P("_isHaveGlowFilter",Z$a.getValue("_isHaveGlowFilter"))},Z$A._EndTarget=function(Z$a,Z$b){if(Z$a.getValue("src").recycle(),Z$a.getValue("out").end(),Z$a.getValue("ScissorTest")){Z$ua.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),Z$b.ctx.save();var Z$c=Z$a.getValue("clipRect");Z$b.ctx.clipRect(Z$c.x,Z$c.y,Z$c.width,Z$c.height)}},Z$A._useSrc=function(Z$a){var Z$b=Z$a.getValue("out");Z$b.end(),(Z$b=Z$a.getValue("src")).start(),Z$b.clear(0,0,0,0)},Z$A._endSrc=function(Z$a){Z$a.getValue("src").end()},Z$A._useOut=function(Z$a){var Z$b=Z$a.getValue("src");Z$b.end(),(Z$b=Z$a.getValue("out")).start(),Z$b.clear(0,0,0,0)},Z$A._endOut=function(Z$a){Z$a.getValue("out").end()},Z$A._recycleScope=function(Z$a){Z$a.recycle()},Z$A._filter=function(Z$a,Z$b,Z$c,Z$d){var Z$e=this._next;if(Z$e){var Z$f,Z$i,Z$j=Z$a.filters,Z$k=Z$j.length;if(1==Z$k&&32==Z$j[0].type)return Z$b.ctx.save(),Z$b.ctx.setFilters([Z$j[0]]),Z$e._fun.call(Z$e,Z$a,Z$b,Z$c,Z$d),void Z$b.ctx.restore();var Z$l=Z$ja.create(),Z$m=Z$C.TEMP,Z$n=Z$b.ctx._getTransformMatrix(),Z$o=Z$B.create();Z$n.copyTo(Z$o);var Z$p=0,Z$q=0,Z$r=!1,Z$s=Z$a._$P._filterCache?Z$a._$P._filterCache:null;if(!Z$s||Z$a._repaint){Z$r=Z$a._isHaveGlowFilter(),Z$l.addValue("_isHaveGlowFilter",Z$r),Z$r&&(Z$p=50,Z$q=25),(Z$i=new Z$D).copyFrom(Z$a.getSelfBounds()),Z$i.x+=Z$a.x,Z$i.y+=Z$a.y,Z$i.x-=Z$a.pivotX+4,Z$i.y-=Z$a.pivotY+4;var Z$t=Z$i.x,Z$u=Z$i.y;if(Z$i.width+=Z$p+8,Z$i.height+=Z$p+8,Z$m.x=Z$i.x*Z$o.a+Z$i.y*Z$o.c,Z$m.y=Z$i.y*Z$o.d+Z$i.x*Z$o.b,Z$i.x=Z$m.x,Z$i.y=Z$m.y,Z$m.x=Z$i.width*Z$o.a+Z$i.height*Z$o.c,Z$m.y=Z$i.height*Z$o.d+Z$i.width*Z$o.b,Z$i.width=Z$m.x,Z$i.height=Z$m.y,Z$i.width<=0||Z$i.height<=0)return;Z$s&&Z$s.recycle(),Z$l.addValue("bounds",Z$i);var Z$v=Z$ia.create([Z$l,Z$a,Z$b,0,0],Z$A._filterStart);Z$b.addRenderObject(Z$v),Z$b.ctx._renderKey=0,Z$b.ctx._shader2D.glTexture=null;var Z$w=Z$a.x-Z$t+Z$q,Z$x=Z$a.y-Z$u+Z$q;Z$e._fun.call(Z$e,Z$a,Z$b,Z$w,Z$x),Z$v=Z$ia.create([Z$l,Z$a,Z$b,0,0],Z$A._filterEnd),Z$b.addRenderObject(Z$v);for(var Z$y=0;Z$y<Z$k;Z$y++){0!=Z$y&&(Z$v=Z$ia.create([Z$l],Z$A._useSrc),Z$b.addRenderObject(Z$v),Z$f=Z$Aa.create(1,0),Z$B.TEMP.identity(),Z$b.ctx.drawTarget(Z$l,0,0,Z$i.width,Z$i.height,Z$B.TEMP,"out",Z$f,null,Z$S.TOINT.overlay),Z$v=Z$ia.create([Z$l],Z$A._useOut),Z$b.addRenderObject(Z$v)),Z$j[Z$y].action.apply3d(Z$l,Z$a,Z$b,0,0)}Z$v=Z$ia.create([Z$l,Z$b],Z$A._EndTarget),Z$b.addRenderObject(Z$v)}else{if((Z$r=!!Z$a._$P._isHaveGlowFilter&&Z$a._$P._isHaveGlowFilter)&&(Z$p=50,Z$q=25),(Z$i=Z$a.getBounds()).width<=0||Z$i.height<=0)return;Z$i.width+=Z$p,Z$i.height+=Z$p,Z$m.x=Z$i.x*Z$o.a+Z$i.y*Z$o.c,Z$m.y=Z$i.y*Z$o.d+Z$i.x*Z$o.b,Z$i.x=Z$m.x,Z$i.y=Z$m.y,Z$m.x=Z$i.width*Z$o.a+Z$i.height*Z$o.c,Z$m.y=Z$i.height*Z$o.d+Z$i.width*Z$o.b,Z$i.width=Z$m.x,Z$i.height=Z$m.y,Z$l.addValue("out",Z$s)}Z$c=Z$c-Z$q-Z$a.x,Z$d=Z$d-Z$q-Z$a.y,Z$m.setTo(Z$c,Z$d),Z$o.transformPoint(Z$m),Z$c=Z$m.x+Z$i.x,Z$d=Z$m.y+Z$i.y,Z$f=Z$Aa.create(1,0),Z$B.TEMP.identity(),Z$b.ctx.drawTarget(Z$l,Z$c,Z$d,Z$i.width,Z$i.height,Z$B.TEMP,"out",Z$f,null,Z$S.TOINT.overlay),Z$v=Z$ia.create([Z$l],Z$A._recycleScope),Z$b.addRenderObject(Z$v),Z$o.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=Z$i._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=Z$i._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=Z$i._uint8ArraySlice),!0},Z$i.onStageResize=function(Z$a,Z$b){null!=Z$i.mainContext&&(Z$i.mainContext.viewport(0,0,Z$a,Z$b),Z$ua.width=Z$a,Z$ua.height=Z$b)},Z$i.onInvalidGLRes=function(){Z$Q.instance.freeAll(),Z$w.releaseContentManagers(!0),Z$i.doNodeRepaint(Z$y.stage),Z$i.mainContext.viewport(0,0,Z$ua.width,Z$ua.height),Z$y.stage.event("devicelost")},Z$i.doNodeRepaint=function(Z$a){0==Z$a.numChildren&&Z$a.repaint();for(var Z$b=0;Z$b<Z$a.numChildren;Z$b++)Z$i.doNodeRepaint(Z$a.getChildAt(Z$b))},Z$i.init=function(Z$a,Z$b,Z$c){Z$i.mainCanvas=Z$a,Z$l._createContext=function(Z$a){return new Z$za(Z$a)},Z$Ua._createContext=function(Z$a){return new Z$za(Z$a)};var Z$d=laya.webgl.WebGL.mainContext;if(null!=Z$d.getShaderPrecisionFormat){var Z$e=Z$d.getShaderPrecisionFormat(35633,36338),Z$f=Z$d.getShaderPrecisionFormat(35632,36338);Z$i.shaderHighPrecision=!(!Z$e.precision||!Z$f.precision)}else Z$i.shaderHighPrecision=!1;if(Z$i.compressAstc=Z$d.getExtension("WEBGL_compressed_texture_astc"),Z$i.compressAtc=Z$d.getExtension("WEBGL_compressed_texture_atc"),Z$i.compressEtc=Z$d.getExtension("WEBGL_compressed_texture_etc"),Z$i.compressEtc1=Z$d.getExtension("WEBGL_compressed_texture_etc1"),Z$i.compressPvrtc=Z$d.getExtension("WEBGL_compressed_texture_pvrtc"),Z$i.compressS3tc=Z$d.getExtension("WEBGL_compressed_texture_s3tc"),Z$i.compressS3tc_srgb=Z$d.getExtension("WEBGL_compressed_texture_s3tc_srgb"),Z$i.compressAstc=Z$i.compressAstc?Z$i.compressAstc:{},Z$i.compressAtc=Z$i.compressAtc?Z$i.compressAtc:{},Z$i.compressEtc=Z$i.compressEtc?Z$i.compressEtc:{},Z$i.compressEtc1=Z$i.compressEtc1?Z$i.compressEtc1:{},Z$i.compressPvrtc=Z$i.compressPvrtc?Z$i.compressPvrtc:{},Z$i.compressS3tc=Z$i.compressS3tc?Z$i.compressS3tc:{},Z$i.compressS3tc_srgb=Z$i.compressS3tc_srgb?Z$i.compressS3tc_srgb:{},Z$d.deleteTexture1=Z$d.deleteTexture,Z$d.deleteTexture=function(Z$a){Z$a==Z$xa.curBindTexValue&&(Z$xa.curBindTexValue=null),Z$d.deleteTexture1(Z$a)},Z$i.onStageResize(Z$b,Z$c),null==Z$i.mainContext)throw new Error("webGL getContext err!");Z$I.__init__(),Z$Q.__init__(),Z$Ea.__init__(),Z$fa.__init__(),Z$za.__init__(),Z$Aa.__init__(),Z$g.__init__(),Z$Za.__int__(Z$d),Z$S._init_(Z$d),Z$t.isConchApp&&conch.setOnInvalidGLRes(Z$i.onInvalidGLRes)},Z$i.mainCanvas=null,Z$i.antialias=!0,Z$i.shaderHighPrecision=!1,Z$i._bg_null=[0,0,0,0],Z$i}(),Z$xa=function(){function Z$d(){}return Z$o(Z$d,"laya.webgl.WebGLContext"),Z$d.UseProgram=function(Z$a){return Z$d._useProgram!==Z$a&&(Z$wa.mainContext.useProgram(Z$a),Z$d._useProgram=Z$a,!0)},Z$d.setDepthTest=function(Z$a,Z$b){Z$b!==Z$d._depthTest&&((Z$d._depthTest=Z$b)?Z$a.enable(2929):Z$a.disable(2929))},Z$d.setDepthMask=function(Z$a,Z$b){Z$b!==Z$d._depthMask&&(Z$d._depthMask=Z$b,Z$a.depthMask(Z$b))},Z$d.setDepthFunc=function(Z$a,Z$b){Z$b!==Z$d._depthFunc&&(Z$d._depthFunc=Z$b,Z$a.depthFunc(Z$b))},Z$d.setBlend=function(Z$a,Z$b){Z$b!==Z$d._blend&&((Z$d._blend=Z$b)?Z$a.enable(3042):Z$a.disable(3042))},Z$d.setBlendFunc=function(Z$a,Z$b,Z$c){(Z$b!==Z$d._sFactor||Z$c!==Z$d._dFactor)&&(Z$d._sFactor=Z$b,Z$d._dFactor=Z$c,Z$a.blendFunc(Z$b,Z$c))},Z$d.setCullFace=function(Z$a,Z$b){Z$b!==Z$d._cullFace&&((Z$d._cullFace=Z$b)?Z$a.enable(2884):Z$a.disable(2884))},Z$d.setFrontFace=function(Z$a,Z$b){Z$b!==Z$d._frontFace&&(Z$d._frontFace=Z$b,Z$a.frontFace(Z$b))},Z$d.bindTexture=function(Z$a,Z$b,Z$c){Z$a.bindTexture(Z$b,Z$c),Z$d.curBindTexTarget=Z$b,Z$d.curBindTexValue=Z$c},Z$d.DEPTH_BUFFER_BIT=256,Z$d.STENCIL_BUFFER_BIT=1024,Z$d.COLOR_BUFFER_BIT=16384,Z$d.POINTS=0,Z$d.LINES=1,Z$d.LINE_LOOP=2,Z$d.LINE_STRIP=3,Z$d.TRIANGLES=4,Z$d.TRIANGLE_STRIP=5,Z$d.TRIANGLE_FAN=6,Z$d.ZERO=0,Z$d.ONE=1,Z$d.SRC_COLOR=768,Z$d.ONE_MINUS_SRC_COLOR=769,Z$d.SRC_ALPHA=770,Z$d.ONE_MINUS_SRC_ALPHA=771,Z$d.DST_ALPHA=772,Z$d.ONE_MINUS_DST_ALPHA=773,Z$d.DST_COLOR=774,Z$d.ONE_MINUS_DST_COLOR=775,Z$d.SRC_ALPHA_SATURATE=776,Z$d.FUNC_ADD=32774,Z$d.BLEND_EQUATION=32777,Z$d.BLEND_EQUATION_RGB=32777,Z$d.BLEND_EQUATION_ALPHA=34877,Z$d.FUNC_SUBTRACT=32778,Z$d.FUNC_REVERSE_SUBTRACT=32779,Z$d.BLEND_DST_RGB=32968,Z$d.BLEND_SRC_RGB=32969,Z$d.BLEND_DST_ALPHA=32970,Z$d.BLEND_SRC_ALPHA=32971,Z$d.CONSTANT_COLOR=32769,Z$d.ONE_MINUS_CONSTANT_COLOR=32770,Z$d.CONSTANT_ALPHA=32771,Z$d.ONE_MINUS_CONSTANT_ALPHA=32772,Z$d.BLEND_COLOR=32773,Z$d.ARRAY_BUFFER=34962,Z$d.ELEMENT_ARRAY_BUFFER=34963,Z$d.ARRAY_BUFFER_BINDING=34964,Z$d.ELEMENT_ARRAY_BUFFER_BINDING=34965,Z$d.STREAM_DRAW=35040,Z$d.STATIC_DRAW=35044,Z$d.DYNAMIC_DRAW=35048,Z$d.BUFFER_SIZE=34660,Z$d.BUFFER_USAGE=34661,Z$d.CURRENT_VERTEX_ATTRIB=34342,Z$d.FRONT=1028,Z$d.BACK=1029,Z$d.CULL_FACE=2884,Z$d.FRONT_AND_BACK=1032,Z$d.BLEND=3042,Z$d.DITHER=3024,Z$d.STENCIL_TEST=2960,Z$d.DEPTH_TEST=2929,Z$d.SCISSOR_TEST=3089,Z$d.POLYGON_OFFSET_FILL=32823,Z$d.SAMPLE_ALPHA_TO_COVERAGE=32926,Z$d.SAMPLE_COVERAGE=32928,Z$d.NO_ERROR=0,Z$d.INVALID_ENUM=1280,Z$d.INVALID_VALUE=1281,Z$d.INVALID_OPERATION=1282,Z$d.OUT_OF_MEMORY=1285,Z$d.CW=2304,Z$d.CCW=2305,Z$d.LINE_WIDTH=2849,Z$d.ALIASED_POINT_SIZE_RANGE=33901,Z$d.ALIASED_LINE_WIDTH_RANGE=33902,Z$d.CULL_FACE_MODE=2885,Z$d.FRONT_FACE=2886,Z$d.DEPTH_RANGE=2928,Z$d.DEPTH_WRITEMASK=2930,Z$d.DEPTH_CLEAR_VALUE=2931,Z$d.DEPTH_FUNC=2932,Z$d.STENCIL_CLEAR_VALUE=2961,Z$d.STENCIL_FUNC=2962,Z$d.STENCIL_FAIL=2964,Z$d.STENCIL_PASS_DEPTH_FAIL=2965,Z$d.STENCIL_PASS_DEPTH_PASS=2966,Z$d.STENCIL_REF=2967,Z$d.STENCIL_VALUE_MASK=2963,Z$d.STENCIL_WRITEMASK=2968,Z$d.STENCIL_BACK_FUNC=34816,Z$d.STENCIL_BACK_FAIL=34817,Z$d.STENCIL_BACK_PASS_DEPTH_FAIL=34818,Z$d.STENCIL_BACK_PASS_DEPTH_PASS=34819,Z$d.STENCIL_BACK_REF=36003,Z$d.STENCIL_BACK_VALUE_MASK=36004,Z$d.STENCIL_BACK_WRITEMASK=36005,Z$d.VIEWPORT=2978,Z$d.SCISSOR_BOX=3088,Z$d.COLOR_CLEAR_VALUE=3106,Z$d.COLOR_WRITEMASK=3107,Z$d.UNPACK_ALIGNMENT=3317,Z$d.PACK_ALIGNMENT=3333,Z$d.MAX_TEXTURE_SIZE=3379,Z$d.MAX_VIEWPORT_DIMS=3386,Z$d.SUBPIXEL_BITS=3408,Z$d.RED_BITS=3410,Z$d.GREEN_BITS=3411,Z$d.BLUE_BITS=3412,Z$d.ALPHA_BITS=3413,Z$d.DEPTH_BITS=3414,Z$d.STENCIL_BITS=3415,Z$d.POLYGON_OFFSET_UNITS=10752,Z$d.POLYGON_OFFSET_FACTOR=32824,Z$d.TEXTURE_BINDING_2D=32873,Z$d.SAMPLE_BUFFERS=32936,Z$d.SAMPLES=32937,Z$d.SAMPLE_COVERAGE_VALUE=32938,Z$d.SAMPLE_COVERAGE_INVERT=32939,Z$d.NUM_COMPRESSED_TEXTURE_FORMATS=34466,Z$d.COMPRESSED_TEXTURE_FORMATS=34467,Z$d.DONT_CARE=4352,Z$d.FASTEST=4353,Z$d.NICEST=4354,Z$d.GENERATE_MIPMAP_HINT=33170,Z$d.BYTE=5120,Z$d.UNSIGNED_BYTE=5121,Z$d.SHORT=5122,Z$d.UNSIGNED_SHORT=5123,Z$d.INT=5124,Z$d.UNSIGNED_INT=5125,Z$d.FLOAT=5126,Z$d.DEPTH_COMPONENT=6402,Z$d.ALPHA=6406,Z$d.RGB=6407,Z$d.RGBA=6408,Z$d.LUMINANCE=6409,Z$d.LUMINANCE_ALPHA=6410,Z$d.UNSIGNED_SHORT_4_4_4_4=32819,Z$d.UNSIGNED_SHORT_5_5_5_1=32820,Z$d.UNSIGNED_SHORT_5_6_5=33635,Z$d.FRAGMENT_SHADER=35632,Z$d.VERTEX_SHADER=35633,Z$d.MAX_VERTEX_ATTRIBS=34921,Z$d.MAX_VERTEX_UNIFORM_VECTORS=36347,Z$d.MAX_VARYING_VECTORS=36348,Z$d.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,Z$d.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,Z$d.MAX_TEXTURE_IMAGE_UNITS=34930,Z$d.MAX_FRAGMENT_UNIFORM_VECTORS=36349,Z$d.SHADER_TYPE=35663,Z$d.DELETE_STATUS=35712,Z$d.LINK_STATUS=35714,Z$d.VALIDATE_STATUS=35715,Z$d.ATTACHED_SHADERS=35717,Z$d.ACTIVE_UNIFORMS=35718,Z$d.ACTIVE_ATTRIBUTES=35721,Z$d.SHADING_LANGUAGE_VERSION=35724,Z$d.CURRENT_PROGRAM=35725,Z$d.NEVER=512,Z$d.LESS=513,Z$d.EQUAL=514,Z$d.LEQUAL=515,Z$d.GREATER=516,Z$d.NOTEQUAL=517,Z$d.GEQUAL=518,Z$d.ALWAYS=519,Z$d.KEEP=7680,Z$d.REPLACE=7681,Z$d.INCR=7682,Z$d.DECR=7683,Z$d.INVERT=5386,Z$d.INCR_WRAP=34055,Z$d.DECR_WRAP=34056,Z$d.VENDOR=7936,Z$d.RENDERER=7937,Z$d.VERSION=7938,Z$d.NEAREST=9728,Z$d.LINEAR=9729,Z$d.NEAREST_MIPMAP_NEAREST=9984,Z$d.LINEAR_MIPMAP_NEAREST=9985,Z$d.NEAREST_MIPMAP_LINEAR=9986,Z$d.LINEAR_MIPMAP_LINEAR=9987,Z$d.TEXTURE_MAG_FILTER=10240,Z$d.TEXTURE_MIN_FILTER=10241,Z$d.TEXTURE_WRAP_S=10242,Z$d.TEXTURE_WRAP_T=10243,Z$d.TEXTURE_2D=3553,Z$d.TEXTURE=5890,Z$d.TEXTURE_CUBE_MAP=34067,Z$d.TEXTURE_BINDING_CUBE_MAP=34068,Z$d.TEXTURE_CUBE_MAP_POSITIVE_X=34069,Z$d.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,Z$d.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,Z$d.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,Z$d.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,Z$d.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,Z$d.MAX_CUBE_MAP_TEXTURE_SIZE=34076,Z$d.TEXTURE0=33984,Z$d.TEXTURE1=33985,Z$d.TEXTURE2=33986,Z$d.TEXTURE3=33987,Z$d.TEXTURE4=33988,Z$d.TEXTURE5=33989,Z$d.TEXTURE6=33990,Z$d.TEXTURE7=33991,Z$d.TEXTURE8=33992,Z$d.TEXTURE9=33993,Z$d.TEXTURE10=33994,Z$d.TEXTURE11=33995,Z$d.TEXTURE12=33996,Z$d.TEXTURE13=33997,Z$d.TEXTURE14=33998,Z$d.TEXTURE15=33999,Z$d.TEXTURE16=34e3,Z$d.TEXTURE17=34001,Z$d.TEXTURE18=34002,Z$d.TEXTURE19=34003,Z$d.TEXTURE20=34004,Z$d.TEXTURE21=34005,Z$d.TEXTURE22=34006,Z$d.TEXTURE23=34007,Z$d.TEXTURE24=34008,Z$d.TEXTURE25=34009,Z$d.TEXTURE26=34010,Z$d.TEXTURE27=34011,Z$d.TEXTURE28=34012,Z$d.TEXTURE29=34013,Z$d.TEXTURE30=34014,Z$d.TEXTURE31=34015,Z$d.ACTIVE_TEXTURE=34016,Z$d.REPEAT=10497,Z$d.CLAMP_TO_EDGE=33071,Z$d.MIRRORED_REPEAT=33648,Z$d.FLOAT_VEC2=35664,Z$d.FLOAT_VEC3=35665,Z$d.FLOAT_VEC4=35666,Z$d.INT_VEC2=35667,Z$d.INT_VEC3=35668,Z$d.INT_VEC4=35669,Z$d.BOOL=35670,Z$d.BOOL_VEC2=35671,Z$d.BOOL_VEC3=35672,Z$d.BOOL_VEC4=35673,Z$d.FLOAT_MAT2=35674,Z$d.FLOAT_MAT3=35675,Z$d.FLOAT_MAT4=35676,Z$d.SAMPLER_2D=35678,Z$d.SAMPLER_CUBE=35680,Z$d.VERTEX_ATTRIB_ARRAY_ENABLED=34338,Z$d.VERTEX_ATTRIB_ARRAY_SIZE=34339,Z$d.VERTEX_ATTRIB_ARRAY_STRIDE=34340,Z$d.VERTEX_ATTRIB_ARRAY_TYPE=34341,Z$d.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,Z$d.VERTEX_ATTRIB_ARRAY_POINTER=34373,Z$d.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,Z$d.COMPILE_STATUS=35713,Z$d.LOW_FLOAT=36336,Z$d.MEDIUM_FLOAT=36337,Z$d.HIGH_FLOAT=36338,Z$d.LOW_INT=36339,Z$d.MEDIUM_INT=36340,Z$d.HIGH_INT=36341,Z$d.FRAMEBUFFER=36160,Z$d.RENDERBUFFER=36161,Z$d.RGBA4=32854,Z$d.RGB5_A1=32855,Z$d.RGB565=36194,Z$d.DEPTH_COMPONENT16=33189,Z$d.STENCIL_INDEX=6401,Z$d.STENCIL_INDEX8=36168,Z$d.DEPTH_STENCIL=34041,Z$d.RENDERBUFFER_WIDTH=36162,Z$d.RENDERBUFFER_HEIGHT=36163,Z$d.RENDERBUFFER_INTERNAL_FORMAT=36164,Z$d.RENDERBUFFER_RED_SIZE=36176,Z$d.RENDERBUFFER_GREEN_SIZE=36177,Z$d.RENDERBUFFER_BLUE_SIZE=36178,Z$d.RENDERBUFFER_ALPHA_SIZE=36179,Z$d.RENDERBUFFER_DEPTH_SIZE=36180,Z$d.RENDERBUFFER_STENCIL_SIZE=36181,Z$d.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,Z$d.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,Z$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,Z$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,Z$d.COLOR_ATTACHMENT0=36064,Z$d.DEPTH_ATTACHMENT=36096,Z$d.STENCIL_ATTACHMENT=36128,Z$d.DEPTH_STENCIL_ATTACHMENT=33306,Z$d.NONE=0,Z$d.FRAMEBUFFER_COMPLETE=36053,Z$d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,Z$d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,Z$d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,Z$d.FRAMEBUFFER_UNSUPPORTED=36061,Z$d.FRAMEBUFFER_BINDING=36006,Z$d.RENDERBUFFER_BINDING=36007,Z$d.MAX_RENDERBUFFER_SIZE=34024,Z$d.INVALID_FRAMEBUFFER_OPERATION=1286,Z$d.UNPACK_FLIP_Y_WEBGL=37440,Z$d.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,Z$d.CONTEXT_LOST_WEBGL=37442,Z$d.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,Z$d.BROWSER_DEFAULT_WEBGL=37444,Z$d._useProgram=null,Z$d._depthTest=!0,Z$d._depthMask=!0,Z$d._blend=!1,Z$d._cullFace=!1,Z$d.curBindTexTarget=null,Z$d.curBindTexValue=null,Z$i(Z$d,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),Z$d}(),Z$ya=function(Z$a){function Z$b(){Z$b.__super.call(this)}Z$o(Z$b,"laya.webgl.display.GraphicsGL",Z$j);var Z$c=Z$b.prototype;return Z$c.setShader=function(Z$a){this._saveToCmd(Z$t.context._setShader,[Z$a])},Z$c.setIBVB=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._saveToCmd(Z$t.context._setIBVB,[Z$a,Z$b,Z$c,Z$d,Z$e,Z$f])},Z$c.drawParticle=function(Z$a,Z$b,Z$c){var Z$d=Z$x.createParticleTemplate2D(Z$c);Z$d.x=Z$a,Z$d.y=Z$b,this._saveToCmd(Z$t.context._drawParticle,[Z$d])},Z$b}(),Z$za=function(Z$a){var Z$c;function Z$P(Z$a){this._x=0,this._y=0,this._id=++Z$P._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,Z$P.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=Z$P.MAXCLIPRECT,this.mOutPoint,this._canvas=Z$a,this._canvas._addReference(),Z$P._contextcount++,Z$t.isFlash?(this._ib=Z$ga.create(35044),Z$sa.fillIBQuadrangle(this._ib,16)):this._ib=Z$ga.QuadrangleIB,this.clear()}Z$o(Z$P,"laya.webgl.canvas.WebGLContext2D",Z$e);var Z$b=Z$P.prototype;return Z$b.setIsMainContext=function(){this._isMain=!0},Z$b.clearBG=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$wa.mainContext;Z$e.clearColor(Z$a,Z$b,Z$c,Z$d),Z$e.clear(16384)},Z$b._getSubmits=function(){return this._submits},Z$b._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var Z$a=0,Z$b=this._submits._length;Z$a<Z$b;Z$a++)this._submits[Z$a].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},Z$b.destroy=function(){--Z$P._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=Z$ga.QuadrangleIB&&this._ib.releaseResource()},Z$b.clear=function(){this._submits||(this._other=Z$c.DEFAULT,this._curMat=Z$B.create(),this._vb=Z$ha.create(-1),this._submits=[],this._save=[Z$Y.Create(this)],this._save.length=10,this._shader2D=new Z$g,this._triangleMesh=Z$Ka.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=Z$c.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=Z$P.MAXCLIPRECT,this._curSubmit=Z$fa.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=Z$T.DEFAULT;for(var Z$a=0,Z$b=this._submits._length;Z$a<Z$b;Z$a++)this._submits[Z$a].releaseRender(),this._submits[Z$a]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},Z$b.size=function(Z$a,Z$b){if(this._width!=Z$a||this._height!=Z$b)if(0==Z$a||0==Z$b){0!=this._vb._byteLength&&(this._width=Z$a,this._height=Z$b,this._vb.clear(),this._vb.upload());for(var Z$c=0,Z$d=this._submits._length;Z$c<Z$d;Z$c++)this._submits[Z$c].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=Z$a,this._height=Z$b,this._targets&&this._targets.size(Z$a,Z$b),this._canvas.memorySize-=this._canvas.memorySize;0===Z$a&&0===Z$b&&this._releaseMem()},Z$b._getTransformMatrix=function(){return this._curMat},Z$b.translate=function(Z$a,Z$b){0===Z$a&&0===Z$b||(Z$$.save(this),this._curMat.bTransform&&(Z$Z.save(this),this._curMat.transformPointN(Z$C.TEMP.setTo(Z$a,Z$b)),Z$a=Z$C.TEMP.x,Z$b=Z$C.TEMP.y),this._x+=Z$a,this._y+=Z$b)},Z$b.save=function(){this._save[this._save._length++]=Z$Y.Create(this)},Z$b.restore=function(){var Z$a=this._save._length;if(!(Z$a<1))for(var Z$b=Z$a-1;0<=Z$b;Z$b--){var Z$c=this._save[Z$b];if(Z$c.restore(this),Z$c.isSaveMark())return void(this._save._length=Z$b)}},Z$b._fillText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){void 0===Z$l&&(Z$l=0);var Z$m=this._shader2D,Z$n=this._curSubmit.shaderValue,Z$o=Z$e?Z$qa.create(Z$e):this._other.font;if(Z$Q.enabled)Z$m.ALPHA!==Z$n.ALPHA&&(Z$m.glTexture=null),Z$pa.drawText(this,Z$a,Z$b,this._curMat,Z$o,Z$k||this._other.textAlign,Z$f,Z$i,Z$j,Z$c,Z$d,Z$l);else{this._shader2D.defines.getValue();var Z$p=Z$f?Z$q.create(Z$f)._color:Z$m.colorAdd;Z$m.ALPHA===Z$n.ALPHA&&Z$p===Z$m.colorAdd&&Z$n.colorAdd===Z$m.colorAdd||(Z$m.glTexture=null,Z$m.colorAdd=Z$p),Z$pa.drawText(this,Z$a,Z$b,this._curMat,Z$o,Z$k||this._other.textAlign,Z$f,Z$i,Z$j,Z$c,Z$d,Z$l)}},Z$b.fillWords=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._fillText(null,Z$a,Z$b,Z$c,Z$d,Z$e,null,-1,null,Z$f)},Z$b.fillBorderWords=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this._fillBorderText(null,Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,null)},Z$b.fillText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._fillText(Z$a,null,Z$b,Z$c,Z$d,Z$e,null,-1,Z$f)},Z$b.strokeText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this._fillText(Z$a,null,Z$b,Z$c,Z$d,null,Z$e,Z$f||1,Z$i)},Z$b.fillBorderText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){this._fillBorderText(Z$a,null,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j)},Z$b._fillBorderText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){if(!Z$Q.enabled)return this._fillText(Z$a,Z$b,Z$c,Z$d,Z$e,null,Z$i,Z$j||1,Z$k),void this._fillText(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,null,-1,Z$k);var Z$l=this._shader2D,Z$m=this._curSubmit.shaderValue;Z$l.ALPHA!==Z$m.ALPHA&&(Z$l.glTexture=null);var Z$n=Z$e?(Z$P._fontTemp.setFont(Z$e),Z$P._fontTemp):this._other.font;Z$pa.drawText(this,Z$a,Z$b,this._curMat,Z$n,Z$k||this._other.textAlign,Z$f,Z$i,Z$j||1,Z$c,Z$d,0)},Z$b.fillRect=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=this._vb;if(Z$sa.fillRectImgVb(Z$f,this._clipRect,Z$a,Z$b,Z$c,Z$d,Z$K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var Z$i=this._shader2D.fillStyle;Z$e&&(this._shader2D.fillStyle=Z$T.create(Z$e));var Z$j=this._shader2D,Z$k=this._curSubmit.shaderValue;if(Z$j.fillStyle!==Z$k.fillStyle||Z$j.ALPHA!==Z$k.ALPHA){Z$j.glTexture=null;var Z$l=this._curSubmit=Z$fa.createSubmit(this,this._ib,Z$f,(Z$f._byteLength-64)/32*3,Z$Aa.create(2,0));Z$l.shaderValue.color=Z$j.fillStyle._color._color,Z$l.shaderValue.ALPHA=Z$j.ALPHA,this._submits[this._submits._length++]=Z$l}this._curSubmit._numEle+=6,this._shader2D.fillStyle=Z$i}},Z$b.fillTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){if(Z$a.loaded&&Z$a.bitmap&&Z$a.source){var Z$k=this._vb,Z$l=Z$a.bitmap.width,Z$m=Z$a.bitmap.height,Z$n=Z$a.uv,Z$o=Z$i.x%Z$a.width,Z$p=Z$i.y%Z$a.height;if(Z$l!=Z$j.w||Z$m!=Z$j.h){if(!Z$j.w&&!Z$j.h)switch(Z$j.oy=Z$j.ox=0,Z$f){case"repeat":Z$j.width=Z$d,Z$j.height=Z$e;break;case"repeat-x":Z$j.width=Z$d,Z$p<0?Z$a.height+Z$p>Z$e?Z$j.height=Z$e:Z$j.height=Z$a.height+Z$p:(Z$j.oy=Z$p,Z$a.height+Z$p>Z$e?Z$j.height=Z$e-Z$p:Z$j.height=Z$a.height);break;case"repeat-y":Z$o<0?Z$a.width+Z$o>Z$d?Z$j.width=Z$d:Z$j.width=Z$a.width+Z$o:(Z$j.ox=Z$o,Z$a.width+Z$o>Z$d?Z$j.width=Z$d-Z$o:Z$j.width=Z$a.width),Z$j.height=Z$e;break;case"no-repeat":Z$o<0?Z$a.width+Z$o>Z$d?Z$j.width=Z$d:Z$j.width=Z$a.width+Z$o:(Z$j.ox=Z$o,Z$a.width+Z$o>Z$d?Z$j.width=Z$d-Z$o:Z$j.width=Z$a.width),Z$p<0?Z$a.height+Z$p>Z$e?Z$j.height=Z$e:Z$j.height=Z$a.height+Z$p:(Z$j.oy=Z$p,Z$a.height+Z$p>Z$e?Z$j.height=Z$e-Z$p:Z$j.height=Z$a.height);break;default:Z$j.width=Z$d,Z$j.height=Z$e}Z$j.w=Z$l,Z$j.h=Z$m,Z$j.uv=[0,0,Z$j.width/Z$l,0,Z$j.width/Z$l,Z$j.height/Z$m,0,Z$j.height/Z$m]}if(Z$b+=Z$j.ox,Z$c+=Z$j.oy,Z$o-=Z$j.ox,Z$p-=Z$j.oy,Z$sa.fillRectImgVb(Z$k,this._clipRect,Z$b,Z$c,Z$j.width,Z$j.height,Z$j.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var Z$q=Z$Ja.create(this,this._ib,Z$k,(Z$k._byteLength-64)/32*3,Z$Aa.create(256,0)),Z$r=(this._submits[this._submits._length++]=Z$q).shaderValue;Z$r.textureHost=Z$a;var Z$s=Z$n[0]*Z$l,Z$t=Z$n[1]*Z$m,Z$u=(Z$n[2]-Z$n[0])*Z$l,Z$v=(Z$n[5]-Z$n[3])*Z$m,Z$w=-Z$o/Z$l,Z$x=-Z$p/Z$m;Z$r.u_TexRange[0]=Z$s/Z$l,Z$r.u_TexRange[1]=Z$u/Z$l,Z$r.u_TexRange[2]=Z$t/Z$m,Z$r.u_TexRange[3]=Z$v/Z$m,Z$r.u_offset[0]=Z$w,Z$r.u_offset[1]=Z$x,Z$Q.enabled&&!this._isMain&&Z$q.addTexture(Z$a,(Z$k._byteLength>>2)-16),(this._curSubmit=Z$q)._renderType=10017,Z$q._numEle+=6}}else this.sprite&&Z$y.timer.callLater(this,this._repaintSprite)},Z$b.setShader=function(Z$a){Z$V.save(this,1048576,this._shader2D,!0),this._shader2D.shader=Z$a},Z$b.setFilters=function(Z$a){Z$V.save(this,2097152,this._shader2D,!0),this._shader2D.filters=Z$a,this._curSubmit=Z$fa.RENDERBASE,this._renderKey=0,this._drawCount++},Z$b.drawTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this._drawTextureM(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,null,1)},Z$b.addTextureVb=function(Z$a,Z$b,Z$c){var Z$d=this._curSubmit._vb||this._vb,Z$e=Z$d._byteLength>>2;Z$d.byteLength=Z$e+16<<2;for(var Z$f=Z$d.getFloat32Array(),Z$i=0;Z$i<16;Z$i+=4)Z$f[Z$e++]=Z$a[Z$i]+Z$b,Z$f[Z$e++]=Z$a[Z$i+1]+Z$c,Z$f[Z$e++]=Z$a[Z$i+2],Z$f[Z$e++]=Z$a[Z$i+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),Z$d._upload=!0},Z$b.willDrawTexture=function(Z$a,Z$b){if(!(Z$a.loaded&&Z$a.bitmap&&Z$a.source))return this.sprite&&Z$y.timer.callLater(this,this._repaintSprite),0;var Z$c=Z$a.bitmap,Z$d=Z$c.id+this._shader2D.ALPHA*Z$b+10016;if(Z$d==this._renderKey)return Z$d;var Z$e=this._shader2D,Z$f=Z$e.ALPHA,Z$i=this._curSubmit.shaderValue;Z$e.ALPHA*=Z$b,this._renderKey=Z$d,this._drawCount++,Z$e.glTexture=Z$c;var Z$j=this._vb,Z$k=null,Z$l=Z$j._byteLength/32*3,Z$m=Z$i.textureHost&&Z$i.textureHost==Z$a&&Z$i.textureHost.alphaTexture==Z$a.alphaTexture;return Z$k=Z$Ja.create(this,this._ib,Z$j,Z$l,Z$Aa.create(1,0)),(this._submits[this._submits._length++]=Z$k).shaderValue.textureHost=Z$a,Z$k._renderType=10016,Z$k._preIsSameTextureShader=10016===this._curSubmit._renderType&&Z$e.ALPHA===Z$i.ALPHA&&Z$m,this._curSubmit=Z$k,Z$e.ALPHA=Z$f,Z$d},Z$b.drawTextures=function(Z$a,Z$b,Z$c,Z$d){if(Z$a.loaded&&Z$a.bitmap&&Z$a.source){var Z$e=this._clipRect;if(this._clipRect=Z$P.MAXCLIPRECT,this._drawTextureM(Z$a,Z$b[0],Z$b[1],Z$a.width,Z$a.height,Z$c,Z$d,null,1)){if(this._clipRect=Z$e,Z$G.drawCall++,!(Z$b.length<4)){for(var Z$f=this._curSubmit._vb||this._vb,Z$i=this._curMat.a,Z$j=this._curMat.d,Z$k=2,Z$l=Z$b.length;Z$k<Z$l;Z$k+=2)Z$sa.copyPreImgVb(Z$f,(Z$b[Z$k]-Z$b[Z$k-2])*Z$i,(Z$b[Z$k+1]-Z$b[Z$k-1])*Z$j),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&Z$y.timer.callLater(this,this._repaintSprite)},Z$b._drawTextureM=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){if(!Z$a.loaded||!Z$a.source)return this.sprite&&Z$y.timer.callLater(this,this._repaintSprite),!1;var Z$l=this._curSubmit._vb||this._vb,Z$m=Z$a.bitmap;Z$b+=Z$f,Z$c+=Z$i,this._drawCount++;var Z$n=Z$m.id+this._shader2D.ALPHA*Z$k+10016;if(Z$n!=this._renderKey){this._renderKey=Z$n;var Z$o=this._curSubmit.shaderValue,Z$p=this._shader2D,Z$q=Z$p.ALPHA;Z$p.ALPHA*=Z$k,Z$p.glTexture=Z$m;var Z$r=this._vb,Z$s=null,Z$t=Z$r._byteLength/32*3,Z$u=Z$o.textureHost&&Z$o.textureHost==Z$a&&Z$o.textureHost.alphaTexture==Z$a.alphaTexture;Z$s=Z$Ja.create(this,this._ib,Z$r,Z$t,Z$Aa.create(1,0)),(this._submits[this._submits._length++]=Z$s).shaderValue.textureHost=Z$a,Z$s._renderType=10016,Z$s._preIsSameTextureShader=10016===this._curSubmit._renderType&&Z$p.ALPHA===Z$o.ALPHA&&Z$u,this._curSubmit=Z$s,Z$l=this._curSubmit._vb||this._vb,Z$p.ALPHA=Z$q}return!!Z$sa.fillRectImgVb(Z$l,this._clipRect,Z$b,Z$c,Z$d||Z$a.width,Z$e||Z$a.height,Z$a.uv,Z$j||this._curMat,this._x,this._y,0,0)&&(Z$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(Z$a,(Z$l._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},Z$b._repaintSprite=function(){this.sprite&&this.sprite.repaint()},Z$b._drawText=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){var Z$m=Z$a.bitmap;this._drawCount++;var Z$n=Z$m.id+this._shader2D.ALPHA+10016;if(Z$n!=this._renderKey){this._renderKey=Z$n;var Z$o=this._curSubmit.shaderValue,Z$p=this._shader2D;Z$p.glTexture=Z$m;var Z$q=this._vb,Z$r=null,Z$s=Z$q._byteLength/32*3,Z$t=Z$o.textureHost&&Z$o.textureHost==Z$a&&Z$o.textureHost.alphaTexture==Z$a.alphaTexture;(Z$r=Z$Q.enabled?Z$Ja.create(this,this._ib,Z$q,Z$s,Z$Aa.create(1,0)):Z$Ja.create(this,this._ib,Z$q,Z$s,Z$$a.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&Z$p.ALPHA===Z$o.ALPHA&&Z$t,(this._submits[this._submits._length++]=Z$r).shaderValue.textureHost=Z$a,Z$r._renderType=10016,this._curSubmit=Z$r}Z$a.active();var Z$u=this._curSubmit._vb||this._vb;Z$sa.fillRectImgVb(Z$u,this._clipRect,Z$b+Z$i,Z$c+Z$j,Z$d||Z$a.width,Z$e||Z$a.height,Z$a.uv,Z$f||this._curMat,this._x,this._y,Z$k,Z$l,!0)&&(Z$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(Z$a,(Z$u._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},Z$b.drawTextureWithTransform=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){if(Z$f){var Z$l=this._curMat,Z$m=this._x,Z$n=this._y;(0!==Z$i||0!==Z$j)&&(this._x=Z$i*Z$l.a+Z$j*Z$l.c,this._y=Z$j*Z$l.d+Z$i*Z$l.b),Z$f&&Z$l.bTransform?(Z$B.mul(Z$f,Z$l,Z$P._tmpMatrix),(Z$f=Z$P._tmpMatrix)._checkTransform()):(this._x+=Z$l.tx,this._y+=Z$l.ty),this._drawTextureM(Z$a,Z$b,Z$c,Z$d,Z$e,0,0,Z$f,Z$k),this._x=Z$m,this._y=Z$n}else this._drawTextureM(Z$a,Z$b,Z$c,Z$d,Z$e,Z$i,Z$j,null,Z$k)},Z$b.fillQuadrangle=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=this._curSubmit,Z$i=this._vb,Z$j=this._shader2D,Z$k=Z$f.shaderValue;if(this._renderKey=0,Z$a.bitmap){var Z$l=Z$a.bitmap;Z$j.glTexture==Z$l&&Z$j.ALPHA===Z$k.ALPHA||(Z$j.glTexture=Z$l,(Z$f=this._curSubmit=Z$fa.createSubmit(this,this._ib,Z$i,Z$i._byteLength/32*3,Z$Aa.create(1,0))).shaderValue.glTexture=Z$l,this._submits[this._submits._length++]=Z$f),Z$sa.fillQuadrangleImgVb(Z$i,Z$b,Z$c,Z$d,Z$a.uv,Z$e||this._curMat,this._x,this._y)}else Z$f.shaderValue.fillStyle&&Z$f.shaderValue.fillStyle.equal(Z$a)&&Z$j.ALPHA===Z$k.ALPHA||(Z$j.glTexture=null,(Z$f=this._curSubmit=Z$fa.createSubmit(this,this._ib,Z$i,Z$i._byteLength/32*3,Z$Aa.create(2,0))).shaderValue.defines.add(2),Z$f.shaderValue.fillStyle=Z$T.create(Z$a),this._submits[this._submits._length++]=Z$f),Z$sa.fillQuadrangleImgVb(Z$i,Z$b,Z$c,Z$d,Z$K.DEF_UV,Z$e||this._curMat,this._x,this._y);Z$f._numEle+=6},Z$b.drawTexture2=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){if(0!=Z$f){var Z$k=this._curMat;if(this._x=Z$a*Z$k.a+Z$b*Z$k.c,this._y=Z$b*Z$k.d+Z$a*Z$k.b,Z$e&&(Z$e=Z$k.bTransform||Z$e.bTransform?(Z$B.mul(Z$e,Z$k,Z$P._tmpMatrix),Z$P._tmpMatrix):(this._x+=Z$e.tx+Z$k.tx,this._y+=Z$e.ty+Z$k.ty,Z$B.EMPTY)),1!==Z$f||Z$i){var Z$l=this._shader2D.ALPHA,Z$m=this._nBlendType;this._shader2D.ALPHA=Z$f,Z$i&&(this._nBlendType=Z$S.TOINT(Z$i)),this._drawTextureM(Z$j[0],Z$j[1]-Z$c,Z$j[2]-Z$d,Z$j[3],Z$j[4],0,0,Z$e,1),this._shader2D.ALPHA=Z$l,this._nBlendType=Z$m}else this._drawTextureM(Z$j[0],Z$j[1]-Z$c,Z$j[2]-Z$d,Z$j[3],Z$j[4],0,0,Z$e,1);this._x=this._y=0}},Z$b.drawCanvas=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$a.context;if(this._renderKey=0,Z$f._targets)this._submits[this._submits._length++]=Z$Ia.create(Z$f,0,null),this._curSubmit=Z$fa.RENDERBASE,Z$f._targets.drawTo(this,Z$b,Z$c,Z$d,Z$e);else{var Z$i=this._submits[this._submits._length++]=Z$Ia.create(Z$f,this._shader2D.ALPHA,this._shader2D.filters),Z$j=Z$d/Z$a.width,Z$k=Z$e/Z$a.height,Z$l=Z$i._matrix;this._curMat.copyTo(Z$l),1!=Z$j&&1!=Z$k&&Z$l.scale(Z$j,Z$k);var Z$m=Z$l.tx,Z$n=Z$l.ty;Z$l.tx=Z$l.ty=0,Z$l.transformPoint(Z$C.TEMP.setTo(Z$b,Z$c)),Z$l.translate(Z$C.TEMP.x+Z$m,Z$C.TEMP.y+Z$n),this._curSubmit=Z$fa.RENDERBASE}Z$z.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=Z$f._targets?"yellow":"green",this.strokeRect(Z$b-1,Z$c-1,Z$d+2,Z$e+2,1),this.strokeRect(Z$b,Z$c,Z$d,Z$e,1),this.restore())},Z$b.drawTarget=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){void 0===Z$l&&(Z$l=-1);var Z$m=this._vb;if(Z$sa.fillRectImgVb(Z$m,this._clipRect,Z$b,Z$c,Z$d,Z$e,Z$k||Z$K.DEF_UV,Z$f||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var Z$n=this._curSubmit=Z$na.create(this,this._ib,Z$m,(Z$m._byteLength-64)/32*3,Z$j,Z$i);Z$n.blendType=-1==Z$l?this._nBlendType:Z$l,Z$n.scope=Z$a,this._submits[this._submits._length++]=Z$n,this._curSubmit._numEle+=6}},Z$b.mixRGBandAlpha=function(Z$a){return this._mixRGBandAlpha(Z$a,this._shader2D.ALPHA)},Z$b._mixRGBandAlpha=function(Z$a,Z$b){var Z$c=(4278190080&Z$a)>>>24;return 0!=Z$c?Z$c*=Z$b:Z$c=255*Z$b,16777215&Z$a|Z$c<<24},Z$b.drawTriangles=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){if(!Z$a.loaded||!Z$a.source)return this.sprite&&Z$y.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;Z$a.bitmap;var Z$m=this._mixRGBandAlpha(4294967295,Z$j),Z$n=(Z$d.length,Z$f.length);this._renderKey=-1;var Z$o=this._curSubmit=Z$Ja.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,Z$Aa.create(1,0));return Z$o.shaderValue.textureHost=Z$a,Z$o._renderType=10016,this._submits[this._submits._length++]=Z$o,Z$i?(Z$P._tmpMatrix.a=Z$i.a,Z$P._tmpMatrix.b=Z$i.b,Z$P._tmpMatrix.c=Z$i.c,Z$P._tmpMatrix.d=Z$i.d,Z$P._tmpMatrix.tx=Z$i.tx+Z$b,Z$P._tmpMatrix.ty=Z$i.ty+Z$c,Z$B.mul(Z$P._tmpMatrix,this._curMat,Z$P._tmpMatrix)):(Z$P._tmpMatrix.a=this._curMat.a,Z$P._tmpMatrix.b=this._curMat.b,Z$P._tmpMatrix.c=this._curMat.c,Z$P._tmpMatrix.d=this._curMat.d,Z$P._tmpMatrix.tx=this._curMat.tx+Z$b,Z$P._tmpMatrix.ty=this._curMat.ty+Z$c),this._triangleMesh.addData(Z$d,Z$e,Z$f,Z$P._tmpMatrix,Z$m,this),this._curSubmit._numEle+=Z$n,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},Z$b.transform=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){Z$Z.save(this),Z$B.mul(Z$B.TEMP.setTo(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f),this._curMat,this._curMat),this._curMat._checkTransform()},Z$b.setTransformByMatrix=function(Z$a){Z$a.copyTo(this._curMat)},Z$b.transformByMatrix=function(Z$a){Z$Z.save(this),Z$B.mul(Z$a,this._curMat,this._curMat),this._curMat._checkTransform()},Z$b.rotate=function(Z$a){Z$Z.save(this),this._curMat.rotateEx(Z$a)},Z$b.scale=function(Z$a,Z$b){Z$Z.save(this),this._curMat.scaleEx(Z$a,Z$b)},Z$b.clipRect=function(Z$a,Z$b,Z$c,Z$d){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var Z$e=Z$ma.create(4);this.addRenderObject(Z$e);var Z$f=this._vb,Z$i=Z$f._byteLength>>2;if(Z$sa.fillRectImgVb(Z$f,null,Z$a,Z$b,Z$c,Z$d,Z$K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var Z$j=this._curSubmit=Z$fa.createSubmit(this,this._ib,Z$f,(Z$f._byteLength-64)/32*3,Z$Aa.create(2,0));Z$j.shaderValue.ALPHA=1,this._submits[this._submits._length++]=Z$j,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var Z$k=Z$ma.create(5);this.addRenderObject(Z$k);var Z$l=Z$f.getFloat32Array(),Z$m=Math.min(Math.min(Math.min(Z$l[0+Z$i],Z$l[4+Z$i]),Z$l[8+Z$i]),Z$l[12+Z$i]),Z$n=Math.max(Math.max(Math.max(Z$l[0+Z$i],Z$l[4+Z$i]),Z$l[8+Z$i]),Z$l[12+Z$i]),Z$o=Math.min(Math.min(Math.min(Z$l[1+Z$i],Z$l[5+Z$i]),Z$l[9+Z$i]),Z$l[13+Z$i]),Z$p=Math.max(Math.max(Math.max(Z$l[1+Z$i],Z$l[5+Z$i]),Z$l[9+Z$i]),Z$l[13+Z$i]);Z$X.save(this,Z$k,Z$a,Z$b,Z$c,Z$d,Z$m,Z$o,Z$n-Z$m,Z$p-Z$o),this._curSubmit=Z$fa.RENDERBASE}else{Z$c*=this._curMat.a,Z$d*=this._curMat.d;var Z$q=Z$C.TEMP;this._curMat.transformPoint(Z$q.setTo(Z$a,Z$b)),Z$c<0&&(Z$q.x=Z$q.x+Z$c,Z$c=-Z$c),Z$d<0&&(Z$q.y=Z$q.y+Z$d,Z$d=-Z$d),this._renderKey=0;var Z$r=this._curSubmit=Z$la.create(this);(this._submits[this._submits._length++]=Z$r).submitIndex=this._submits._length,Z$r.submitLength=9999999,Z$W.save(this,Z$r);var Z$s=this._clipRect,Z$t=Z$s.x,Z$u=Z$s.y,Z$v=Z$q.x+Z$c,Z$w=Z$q.y+Z$d;Z$t<Z$q.x&&(Z$s.x=Z$q.x),Z$u<Z$q.y&&(Z$s.y=Z$q.y),Z$s.width=Math.min(Z$v,Z$t+Z$s.width)-Z$s.x,Z$s.height=Math.min(Z$w,Z$u+Z$s.height)-Z$s.y,this._shader2D.glTexture=null,Z$r.clipRect.copyFrom(Z$s),this._curSubmit=Z$fa.RENDERBASE}},Z$b.setIBVB=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m){if(void 0===Z$k&&(Z$k=0),void 0===Z$l&&(Z$l=0),void 0===Z$m&&(Z$m=0),null===Z$c){if(Z$t.isFlash){var Z$n=Z$d;Z$n._selfIB||(Z$n._selfIB=Z$ga.create(35044)),Z$n._selfIB.clear(),Z$c=Z$n._selfIB}else Z$c=this._ib;Z$sa.expandIBQuadrangle(Z$c,Z$d._byteLength/(4*Z$d.vertexStride*4))}if(!Z$j||!Z$i)throw Error("setIBVB must input:shader shaderValues");var Z$o=Z$ka.create(this,Z$d,Z$c,Z$e,Z$i,Z$j,Z$k,Z$l,Z$m);Z$f||(Z$f=Z$B.EMPTY),Z$f.translate(Z$a,Z$b),Z$B.mul(Z$f,this._curMat,Z$o._mat),Z$f.translate(-Z$a,-Z$b),this._submits[this._submits._length++]=Z$o,this._curSubmit=Z$fa.RENDERBASE,this._renderKey=0},Z$b.addRenderObject=function(Z$a){this._submits[this._submits._length++]=Z$a},Z$b.fillTrangles=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=this._curSubmit,Z$i=this._vb,Z$j=this._shader2D,Z$k=Z$f.shaderValue,Z$l=Z$d.length>>4,Z$m=Z$a.bitmap;this._renderKey=0,Z$j.glTexture==Z$m&&Z$j.ALPHA===Z$k.ALPHA||((Z$f=this._curSubmit=Z$fa.createSubmit(this,this._ib,Z$i,Z$i._byteLength/32*3,Z$Aa.create(1,0))).shaderValue.textureHost=Z$a,this._submits[this._submits._length++]=Z$f),Z$sa.fillTranglesVB(Z$i,Z$b,Z$c,Z$d,Z$e||this._curMat,this._x,this._y),Z$f._numEle+=6*Z$l},Z$b.submitElement=function(Z$a,Z$b){var Z$c=this._submits;for(Z$b<0&&(Z$b=Z$c._length);Z$a<Z$b;)Z$a+=Z$c[Z$a].renderSubmit()},Z$b.finish=function(){Z$wa.mainContext.finish()},Z$b.flush=function(){var Z$a=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(Z$a>this._ib.bufferLength/12&&Z$sa.expandIBQuadrangle(this._ib,Z$a),!this._isMain&&Z$Q.enabled&&Z$Q._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=Z$Q._atlasRestore;for(var Z$b=this._submits,Z$c=0,Z$d=Z$b._length;Z$c<Z$d;Z$c++){var Z$e=Z$b[Z$c];10016===Z$e.getRenderType()&&Z$e.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),Z$ba.instance&&Z$ba.getInstance().reset();var Z$f;for(Z$c=0,Z$f=this.meshlist.length;Z$c<Z$f;Z$c++){var Z$i=this.meshlist[Z$c];Z$i.canReuse?Z$i.releaseMesh():Z$i.destroy()}return this.meshlist.length=0,this._curSubmit=Z$fa.RENDERBASE,this._renderKey=0,this._triangleMesh=Z$Ka.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},Z$b.setPathId=function(Z$a){if(this.mId=Z$a,-1!=this.mId){this.mHaveKey=!1;var Z$b=Z$M.getInstance();Z$b.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,Z$b.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},Z$b.movePath=function(Z$a,Z$b){var Z$c=Z$a,Z$d=Z$b;Z$a=this._curMat.a*Z$c+this._curMat.c*Z$d+this._curMat.tx,Z$b=this._curMat.b*Z$c+this._curMat.d*Z$d+this._curMat.ty,this.mX+=Z$a,this.mY+=Z$b},Z$b.beginPath=function(){var Z$a=this._getPath();Z$a.tempArray.length=0,Z$a.closePath=!1,this.mX=0,this.mY=0},Z$b.closePath=function(){this._path.closePath=!0},Z$b.fill=function(Z$a){void 0===Z$a&&(Z$a=!1);var Z$b=this._getPath();this.drawPoly(0,0,Z$b.tempArray,this.fillStyle._color.numColor,0,0,Z$a)},Z$b.stroke=function(){var Z$a=this._getPath();if(0<this.lineWidth){if(-1==this.mId)Z$a.drawLine(0,0,Z$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var Z$b=Z$M.getInstance().shapeLineDic[this.mId];Z$b.rebuild(Z$a.tempArray),Z$a.setGeomtry(Z$b)}else Z$M.getInstance().addLine(this.mId,Z$a.drawLine(0,0,Z$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor));Z$a.update();var Z$c=[this.mX,this.mY],Z$d=Z$fa.createShape(this,Z$a.ib,Z$a.vb,Z$a.count,Z$a.offset,Z$Aa.create(4,0));Z$d.shaderValue.ALPHA=this._shader2D.ALPHA,Z$d.shaderValue.u_pos=Z$c,Z$d.shaderValue.u_mmat2=Z$ua.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=Z$d,this._renderKey=-1}},Z$b.line=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=this._curSubmit,Z$j=this._vb;if(Z$sa.fillLineVb(Z$j,this._clipRect,Z$a,Z$b,Z$c,Z$d,Z$e,Z$f)){this._renderKey=0;var Z$k=this._shader2D,Z$l=Z$i.shaderValue;Z$k.strokeStyle===Z$l.strokeStyle&&Z$k.ALPHA===Z$l.ALPHA||(Z$k.glTexture=null,(Z$i=this._curSubmit=Z$fa.createSubmit(this,this._ib,Z$j,(Z$j._byteLength-64)/32*3,Z$Aa.create(2,0))).shaderValue.strokeStyle=Z$k.strokeStyle,Z$i.shaderValue.mainID=2,Z$i.shaderValue.ALPHA=Z$k.ALPHA,this._submits[this._submits._length++]=Z$i),Z$i._numEle+=6}},Z$b.moveTo=function(Z$a,Z$b,Z$c){void 0===Z$c&&(Z$c=!0);var Z$d=this._getPath();if(Z$c){var Z$e=Z$a,Z$f=Z$b;Z$a=this._curMat.a*Z$e+this._curMat.c*Z$f,Z$b=this._curMat.b*Z$e+this._curMat.d*Z$f}Z$d.addPoint(Z$a,Z$b)},Z$b.lineTo=function(Z$a,Z$b,Z$c){void 0===Z$c&&(Z$c=!0);var Z$d=this._getPath();if(Z$c){var Z$e=Z$a,Z$f=Z$b;Z$a=this._curMat.a*Z$e+this._curMat.c*Z$f,Z$b=this._curMat.b*Z$e+this._curMat.d*Z$f}Z$d.addPoint(Z$a,Z$b)},Z$b.drawCurves=function(Z$a,Z$b,Z$c){this.setPathId(-1),this.beginPath(),this.strokeStyle=Z$c[3],this.lineWidth=Z$c[4];var Z$d=Z$c[2];Z$a+=Z$c[0],Z$b+=Z$c[1],this.movePath(Z$a,Z$b),this.moveTo(Z$d[0],Z$d[1]);for(var Z$e=2,Z$f=Z$d.length;Z$e<Z$f;)this.quadraticCurveTo(Z$d[Z$e++],Z$d[Z$e++],Z$d[Z$e++],Z$d[Z$e++]);this.stroke()},Z$b.arcTo=function(Z$a,Z$b,Z$c,Z$d,Z$e){if(-1==this.mId||!this.mHaveKey){var Z$f=0,Z$i=0,Z$j=0,Z$k=this._getPath();this._curMat.copyTo(Z$P._tmpMatrix),Z$P._tmpMatrix.tx=Z$P._tmpMatrix.ty=0,Z$P._tempPoint.setTo(Z$k.getEndPointX(),Z$k.getEndPointY()),Z$P._tmpMatrix.invertTransformPoint(Z$P._tempPoint);var Z$l=Z$P._tempPoint.x-Z$a,Z$m=Z$P._tempPoint.y-Z$b,Z$n=Math.sqrt(Z$l*Z$l+Z$m*Z$m);if(!(Z$n<=1e-6)){var Z$o=Z$l/Z$n,Z$p=Z$m/Z$n,Z$q=Z$c-Z$a,Z$r=Z$d-Z$b,Z$s=Z$q*Z$q+Z$r*Z$r,Z$t=Math.sqrt(Z$s);if(!(Z$t<=1e-6)){var Z$u=Z$q/Z$t,Z$v=Z$r/Z$t,Z$w=Z$o+Z$u,Z$x=Z$p+Z$v,Z$y=Math.sqrt(Z$w*Z$w+Z$x*Z$x);if(!(Z$y<=1e-6)){var Z$z=Z$w/Z$y,Z$A=Z$x/Z$y,Z$B=Math.acos(Z$z*Z$o+Z$A*Z$p),Z$C=Math.PI/2-Z$B,Z$D=(Z$n=Z$e/Math.tan(Z$C))*Z$o+Z$a,Z$E=Z$n*Z$p+Z$b,Z$F=Math.sqrt(Z$n*Z$n+Z$e*Z$e),Z$G=Z$a+Z$z*Z$F,Z$H=Z$b+Z$A*Z$F,Z$I=0,Z$J=0;if(0<=Z$o*Z$v-Z$p*Z$u){var Z$K=2*Z$C/Z$P.SEGNUM;Z$I=Math.sin(Z$K),Z$J=Math.cos(Z$K)}else Z$K=2*-Z$C/Z$P.SEGNUM,Z$I=Math.sin(Z$K),Z$J=Math.cos(Z$K);Z$i=this._curMat.a*Z$D+this._curMat.c*Z$E,Z$j=this._curMat.b*Z$D+this._curMat.d*Z$E,Z$i==this._path.getEndPointX()&&Z$j==this._path.getEndPointY()||Z$k.addPoint(Z$i,Z$j);var Z$L=Z$D-Z$G,Z$M=Z$E-Z$H;for(Z$f=0;Z$f<Z$P.SEGNUM;Z$f++){var Z$N=Z$L*Z$J+Z$M*Z$I,Z$O=-Z$L*Z$I+Z$M*Z$J;Z$i=Z$N+Z$G,Z$j=Z$O+Z$H,Z$a=this._curMat.a*Z$i+this._curMat.c*Z$j,Z$j=Z$b=this._curMat.b*Z$i+this._curMat.d*Z$j,(Z$i=Z$a)==this._path.getEndPointX()&&Z$j==this._path.getEndPointY()||Z$k.addPoint(Z$i,Z$j),Z$L=Z$N,Z$M=Z$O}}}}}},Z$b.arc=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){if(void 0===Z$f&&(Z$f=!1),void 0===Z$i&&(Z$i=!0),-1!=this.mId){var Z$j=Z$M.getInstance().shapeDic[this.mId];if(Z$j&&this.mHaveKey&&!Z$j.needUpdate(this._curMat))return;Z$b=Z$a=0}var Z$k,Z$l=0,Z$m=0,Z$n=0,Z$o=0,Z$p=0,Z$q=0,Z$r=0;if(Z$m=Z$e-Z$d,Z$f)if(Math.abs(Z$m)>=2*Math.PI)Z$m=2*-Math.PI;else for(;0<Z$m;)Z$m-=2*Math.PI;else if(Math.abs(Z$m)>=2*Math.PI)Z$m=2*Math.PI;else for(;Z$m<0;)Z$m+=2*Math.PI;Z$k=Z$m/(Z$r=Z$c<101?Math.max(10,Z$m*Z$c/5):Z$c<201?Math.max(10,Z$m*Z$c/20):Math.max(10,Z$m*Z$c/40))/2,Z$n=Math.abs(4/3*(1-Math.cos(Z$k))/Math.sin(Z$k)),Z$f&&(Z$n=-Z$n);var Z$s=this._getPath(),Z$t=NaN,Z$u=NaN;for(Z$q=0;Z$q<=Z$r;Z$q++)Z$l=Z$d+Z$m*(Z$q/Z$r),Z$o=Z$a+Math.cos(Z$l)*Z$c,Z$p=Z$b+Math.sin(Z$l)*Z$c,Z$i&&(Z$t=Z$o,Z$u=Z$p,Z$o=this._curMat.a*Z$t+this._curMat.c*Z$u,Z$p=this._curMat.b*Z$t+this._curMat.d*Z$u),Z$o==this._path.getEndPointX()&&Z$p==this._path.getEndPointY()||Z$s.addPoint(Z$o,Z$p);Z$o=Z$a+Math.cos(Z$e)*Z$c,Z$p=Z$b+Math.sin(Z$e)*Z$c,Z$i&&(Z$t=Z$o,Z$u=Z$p,Z$o=this._curMat.a*Z$t+this._curMat.c*Z$u,Z$p=this._curMat.b*Z$t+this._curMat.d*Z$u),Z$o==this._path.getEndPointX()&&Z$p==this._path.getEndPointY()||Z$s.addPoint(Z$o,Z$p)},Z$b.quadraticCurveTo=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$n.I,Z$f=Z$c,Z$i=Z$d;Z$c=this._curMat.a*Z$f+this._curMat.c*Z$i,Z$d=this._curMat.b*Z$f+this._curMat.d*Z$i,Z$f=Z$a,Z$i=Z$b,Z$a=this._curMat.a*Z$f+this._curMat.c*Z$i,Z$b=this._curMat.b*Z$f+this._curMat.d*Z$i;for(var Z$j=Z$e.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),Z$a,Z$b,Z$c,Z$d],30,2),Z$k=0,Z$l=Z$j.length/2;Z$k<Z$l;Z$k++)this.lineTo(Z$j[2*Z$k],Z$j[2*Z$k+1],!1);this.lineTo(Z$c,Z$d,!1)},Z$b.rect=function(Z$a,Z$b,Z$c,Z$d){this._other=this._other.make(),this._other.path||(this._other.path=new Z$U),this._other.path.rect(Z$a,Z$b,Z$c,Z$d)},Z$b.strokeRect=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=.5*Z$e;this.line(Z$a-Z$f,Z$b,Z$a+Z$c+Z$f,Z$b,Z$e,this._curMat),this.line(Z$a+Z$c,Z$b,Z$a+Z$c,Z$b+Z$d,Z$e,this._curMat),this.line(Z$a,Z$b,Z$a,Z$b+Z$d,Z$e,this._curMat),this.line(Z$a-Z$f,Z$b+Z$d,Z$a+Z$c+Z$f,Z$b+Z$d,Z$e,this._curMat)},Z$b.clip=function(){},Z$b.drawPoly=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){void 0===Z$i&&(Z$i=!1),this._renderKey=0,this._shader2D.glTexture=null;var Z$j=this._getPath();if(-1==this.mId)Z$j.polygon(Z$a,Z$b,Z$c,Z$d,Z$e||1,Z$f);else if(this.mHaveKey){var Z$k=Z$M.getInstance().shapeDic[this.mId];Z$k.setMatrix(this._curMat),Z$k.rebuild(Z$j.tempArray),Z$j.setGeomtry(Z$k)}else{var Z$l=Z$j.polygon(Z$a,Z$b,Z$c,Z$d,Z$e||1,Z$f);Z$M.getInstance().addShape(this.mId,Z$l),Z$l.setMatrix(this._curMat)}Z$j.update();var Z$m,Z$n=[this.mX,this.mY];if((Z$m=Z$fa.createShape(this,Z$j.ib,Z$j.vb,Z$j.count,Z$j.offset,Z$Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,Z$m.shaderValue.u_pos=Z$n,Z$m.shaderValue.u_mmat2=Z$ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=Z$m,0<Z$e){if(this.mHaveLineKey){var Z$o=Z$M.getInstance().shapeLineDic[this.mId];Z$o.rebuild(Z$j.tempArray),Z$j.setGeomtry(Z$o)}else Z$M.getInstance().addShape(this.mId,Z$j.drawLine(Z$a,Z$b,Z$c,Z$e,Z$f));Z$j.update(),(Z$m=Z$fa.createShape(this,Z$j.ib,Z$j.vb,Z$j.count,Z$j.offset,Z$Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,Z$m.shaderValue.u_mmat2=Z$ua.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=Z$m}},Z$b.drawParticle=function(Z$a,Z$b,Z$c){Z$c.x=Z$a,Z$c.y=Z$b,this._submits[this._submits._length++]=Z$c},Z$b._getPath=function(){return this._path||(this._path=new Z$U)},Z$d(0,Z$b,"globalCompositeOperation",function(){return Z$S.NAMES[this._nBlendType]},function(Z$a){var Z$b=Z$S.TOINT[Z$a];null==Z$b||this._nBlendType===Z$b||(Z$V.save(this,65536,this,!0),this._curSubmit=Z$fa.RENDERBASE,this._renderKey=0,this._nBlendType=Z$b)}),Z$d(0,Z$b,"strokeStyle",function(){return this._shader2D.strokeStyle},function(Z$a){this._shader2D.strokeStyle.equal(Z$a)||(Z$V.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=Z$T.create(Z$a))}),Z$d(0,Z$b,"globalAlpha",function(){return this._shader2D.ALPHA},function(Z$a){(Z$a=Math.floor(1e3*Z$a)/1e3)!=this._shader2D.ALPHA&&(Z$V.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=Z$a)}),Z$d(0,Z$b,"asBitmap",null,function(Z$a){if(Z$a){if(this._targets||(this._targets=new Z$_),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),Z$d(0,Z$b,"fillStyle",function(){return this._shader2D.fillStyle},function(Z$a){this._shader2D.fillStyle.equal(Z$a)||(Z$V.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=Z$T.create(Z$a))}),Z$d(0,Z$b,"textAlign",function(){return this._other.textAlign},function(Z$a){this._other.textAlign===Z$a||(this._other=this._other.make(),Z$V.save(this,32768,this._other,!1),this._other.textAlign=Z$a)}),Z$d(0,Z$b,"lineWidth",function(){return this._other.lineWidth},function(Z$a){this._other.lineWidth===Z$a||(this._other=this._other.make(),Z$V.save(this,256,this._other,!1),this._other.lineWidth=Z$a)}),Z$d(0,Z$b,"textBaseline",function(){return this._other.textBaseline},function(Z$a){this._other.textBaseline===Z$a||(this._other=this._other.make(),Z$V.save(this,16384,this._other,!1),this._other.textBaseline=Z$a)}),Z$d(0,Z$b,"font",null,function(Z$a){Z$a!=this._other.font.toString()&&(this._other=this._other.make(),Z$V.save(this,8,this._other,!1),this._other.font===Z$qa.EMPTY?this._other.font=new Z$qa(Z$a):this._other.font.setFont(Z$a))}),Z$P.__init__=function(){Z$c.DEFAULT=new Z$c},Z$P._tempPoint=new Z$C,Z$P._SUBMITVBSIZE=32e3,Z$P._MAXSIZE=99999999,Z$P._RECTVBSIZE=16,Z$P.MAXCLIPRECT=new Z$D(0,0,99999999,99999999),Z$P._COUNT=0,Z$P._tmpMatrix=new Z$B,Z$P.SEGNUM=32,Z$P._contextcount=0,Z$i(Z$P,["_fontTemp",function(){return this._fontTemp=new Z$qa},"_drawStyleTemp",function(){return this._drawStyleTemp=new Z$T(null)}]),Z$P.__init$=function(){Z$c=function(){function Z$a(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=Z$qa.EMPTY}Z$o(Z$a,"");var Z$b=Z$a.prototype;return Z$b.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=Z$qa.EMPTY},Z$b.make=function(){return this===Z$a.DEFAULT?new Z$a:this},Z$a.DEFAULT=null,Z$a}()},Z$P}(),Z$Aa=function(Z$a){function Z$d(Z$a,Z$b){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,Z$d.__super.call(this),this.defines=new Z$Ea,this.position=Z$d._POSITION,this.mainID=Z$a,this.subID=Z$b,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=Z$a|Z$b,this._inClassCache=Z$d._cache[this._cacheID],0<Z$a&&!this._inClassCache&&(this._inClassCache=Z$d._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}Z$o(Z$d,"laya.webgl.shader.d2.value.Value2D",Z$O);var Z$b=Z$d.prototype;return Z$b.setValue=function(Z$a){},Z$b.refresh=function(){var Z$a=this.size;return Z$a[0]=Z$ua.width,Z$a[1]=Z$ua.height,this.alpha=this.ALPHA*Z$ua.worldAlpha,this.mmat=Z$ua.worldMatrix4,this},Z$b._ShaderWithCompile=function(){return Z$Ya.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,Z$_a.create)},Z$b._withWorldShaderDefines=function(){var Z$a=Z$ua.worldShaderDefines,Z$b=Z$Ya.sharders[this.mainID|this.defines._value|Z$a.getValue()];if(!Z$b){var Z$c,Z$d={};for(Z$c in this.defines.toNameDic())Z$d[Z$c]="";for(Z$c in Z$a.toNameDic())Z$d[Z$c]="";Z$b=Z$Ya.withCompile2D(0,this.mainID,Z$d,this.mainID|this.defines._value|Z$a.getValue(),Z$_a.create)}var Z$e=Z$ua.worldFilters;if(!Z$e)return Z$b;for(var Z$f,Z$i=Z$e.length,Z$j=0;Z$j<Z$i;Z$j++)(Z$f=Z$e[Z$j])&&Z$f.action.setValue(this);return Z$b},Z$b.upload=function(){var Z$a=Z$ua;this.alpha=this.ALPHA*Z$a.worldAlpha,Z$ua.worldMatrix4!==Z$ua.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),Z$wa.shaderHighPrecision&&this.defines.add(1024);var Z$b,Z$c=Z$a.worldShaderDefines?this._withWorldShaderDefines():Z$Ya.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=Z$a.width,this.size[1]=Z$a.height,this.mmat=Z$a.worldMatrix4,Z$La.activeShader!==Z$c?Z$c._shaderValueWidth!==Z$a.width||Z$c._shaderValueHeight!==Z$a.height?(Z$c._shaderValueWidth=Z$a.width,Z$c._shaderValueHeight=Z$a.height):Z$b=Z$c._params2dQuick2||Z$c._make2dQuick2():Z$c._shaderValueWidth!==Z$a.width||Z$c._shaderValueHeight!==Z$a.height?(Z$c._shaderValueWidth=Z$a.width,Z$c._shaderValueHeight=Z$a.height):Z$b=Z$c._params2dQuick1||Z$c._make2dQuick1(),Z$c.upload(this,Z$b)},Z$b.setFilters=function(Z$a){if(this.filters=Z$a)for(var Z$b,Z$c=Z$a.length,Z$d=0;Z$d<Z$c;Z$d++)(Z$b=Z$a[Z$d])&&(this.defines.add(Z$b.type),Z$b.action.setValue(this))},Z$b.clear=function(){this.defines.setValue(this.subID)},Z$b.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},Z$d._initone=function(Z$a,Z$b){Z$d._typeClass[Z$a]=Z$b,Z$d._cache[Z$a]=[],Z$d._cache[Z$a]._length=0},Z$d.__init__=function(){Z$d._POSITION=[2,5126,!1,4*Z$ra.BYTES_PE,0],Z$d._TEXCOORD=[2,5126,!1,4*Z$ra.BYTES_PE,2*Z$ra.BYTES_PE],Z$d._initone(2,Z$Pa),Z$d._initone(4,Z$Sa),Z$d._initone(256,Z$Qa),Z$d._initone(512,Z$Oa),Z$d._initone(1,Z$Ra),Z$d._initone(65,Z$$a),Z$d._initone(9,Z$Ra)},Z$d.create=function(Z$a,Z$b){var Z$c=Z$d._cache[Z$a|Z$b];return Z$c._length?Z$c[--Z$c._length]:new Z$d._typeClass[Z$a|Z$b](Z$b)},Z$d._POSITION=null,Z$d._TEXCOORD=null,Z$d._cache=[],Z$d._typeClass=[],Z$d.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Z$d}(),Z$Ba=function(Z$a){function Z$s(Z$a,Z$b){Z$s.__super.call(this,Z$a,Z$b)}Z$o(Z$s,"laya.webgl.utils.RenderSprite3D",Z$u);var Z$b=Z$s.prototype;return Z$b.onCreate=function(Z$a){switch(Z$a){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},Z$b._mask=function(Z$a,Z$b,Z$c,Z$d){var Z$e,Z$f,Z$i=this._next,Z$j=Z$a.mask;if(Z$j){Z$b.ctx.save();var Z$k=Z$b.ctx.globalCompositeOperation,Z$l=new Z$D;if(Z$l.copyFrom(Z$j.getBounds()),Z$l.width=Math.round(Z$l.width),Z$l.height=Math.round(Z$l.height),Z$l.x=Math.round(Z$l.x),Z$l.y=Math.round(Z$l.y),0<Z$l.width&&0<Z$l.height){var Z$m=Z$a._style._tf,Z$n=Z$ja.create();Z$n.addValue("bounds",Z$l),Z$e=Z$ia.create([Z$n,Z$b],laya.webgl.utils.RenderSprite3D.tmpTarget),Z$b.addRenderObject(Z$e),Z$j.render(Z$b,-Z$l.x,-Z$l.y),Z$e=Z$ia.create([Z$n],laya.webgl.utils.RenderSprite3D.endTmpTarget),Z$b.addRenderObject(Z$e),Z$b.ctx.save(),Z$b.clipRect(Z$c-Z$m.translateX+Z$l.x,Z$d-Z$m.translateY+Z$l.y,Z$l.width,Z$l.height),Z$i._fun.call(Z$i,Z$a,Z$b,Z$c,Z$d),Z$b.ctx.restore(),Z$f=Z$ma.create(6),Z$k=Z$b.ctx.globalCompositeOperation,Z$f.blendMode="mask",Z$b.addRenderObject(Z$f),Z$B.TEMP.identity();var Z$o=Z$Aa.create(1,0),Z$p=Z$K.INV_UV,Z$q=Z$l.width,Z$r=Z$l.height;(Z$l.width<32||Z$l.height<32)&&((Z$p=Z$s.tempUV)[0]=0,Z$p[1]=0,Z$p[2]=32<=Z$l.width?1:Z$l.width/32,Z$p[3]=0,Z$p[4]=32<=Z$l.width?1:Z$l.width/32,Z$p[5]=32<=Z$l.height?1:Z$l.height/32,Z$p[6]=0,Z$p[7]=32<=Z$l.height?1:Z$l.height/32,Z$l.width=32<=Z$l.width?Z$l.width:32,Z$l.height=32<=Z$l.height?Z$l.height:32,Z$p[1]*=-1,Z$p[3]*=-1,Z$p[5]*=-1,Z$p[7]*=-1,Z$p[1]+=1,Z$p[3]+=1,Z$p[5]+=1,Z$p[7]+=1),Z$b.ctx.drawTarget(Z$n,Z$c+Z$l.x-Z$m.translateX,Z$d+Z$l.y-Z$m.translateY,Z$q,Z$r,Z$B.TEMP,"tmpTarget",Z$o,Z$p,6),Z$e=Z$ia.create([Z$n],laya.webgl.utils.RenderSprite3D.recycleTarget),Z$b.addRenderObject(Z$e),(Z$f=Z$ma.create(6)).blendMode=Z$k,Z$b.addRenderObject(Z$f)}Z$b.ctx.restore()}else Z$i._fun.call(Z$i,Z$a,Z$b,Z$c,Z$d)},Z$b._blend=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a._style,Z$f=this._next;Z$e.blendMode?(Z$b.ctx.save(),Z$b.ctx.globalCompositeOperation=Z$e.blendMode,Z$f._fun.call(Z$f,Z$a,Z$b,Z$c,Z$d),Z$b.ctx.restore()):Z$f._fun.call(Z$f,Z$a,Z$b,Z$c,Z$d)},Z$b._transform=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.transform,Z$f=this._next;if(Z$e&&Z$f!=Z$u.NORENDER){var Z$i=Z$b.ctx;Z$a._style;Z$e.tx=Z$c,Z$e.ty=Z$d;var Z$j=Z$i._getTransformMatrix(),Z$k=Z$j.clone();Z$B.mul(Z$e,Z$j,Z$j),Z$j._checkTransform(),Z$e.tx=Z$e.ty=0,Z$f._fun.call(Z$f,Z$a,Z$b,0,0),Z$k.copyTo(Z$j),Z$k.destroy()}else Z$f._fun.call(Z$f,Z$a,Z$b,Z$c,Z$d)},Z$s.tmpTarget=function(Z$a,Z$b){var Z$c=Z$a.getValue("bounds"),Z$d=Z$Ma.create(Z$c.width,Z$c.height);Z$d.start(),Z$d.clear(0,0,0,0),Z$a.addValue("tmpTarget",Z$d)},Z$s.endTmpTarget=function(Z$a){Z$a.getValue("tmpTarget").end()},Z$s.recycleTarget=function(Z$a){Z$a.getValue("tmpTarget").recycle(),Z$a.recycle()},Z$i(Z$s,["tempUV",function(){return this.tempUV=new Array(8)}]),Z$s}(),Z$Ca=function(Z$a){function Z$b(){this.data=null,Z$b.__super.call(this)}Z$o(Z$b,"laya.filters.webgl.ColorFilterActionGL",Z$N);var Z$c=Z$b.prototype;return Z$y.imps(Z$c,{"laya.filters.IFilterActionGL":!0}),Z$c.setValue=function(Z$a){Z$a.colorMat=this.data._mat,Z$a.colorAlpha=this.data._alpha},Z$c.apply3d=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$a.getValue("bounds"),Z$i=Z$Aa.create(1,0);Z$i.setFilters([this.data]);var Z$j=Z$B.TEMP;Z$j.identity(),Z$c.ctx.drawTarget(Z$a,0,0,Z$f.width,Z$f.height,Z$j,"src",Z$i)},Z$b}(),Z$Da=function(Z$a){function Z$f(Z$a,Z$b,Z$c,Z$d,Z$e){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,Z$f.__super.call(this,Z$a,Z$b,Z$e),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new Z$Ta,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=Z$c,this._atlasCanvas.height=Z$d,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}Z$o(Z$f,"laya.webgl.atlas.Atlaser",Z$P);var Z$b=Z$f.prototype;return Z$b.computeUVinAtlasTexture=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$Q.atlasTextureWidth,Z$f=Z$Q.atlasTextureHeight,Z$i=Z$c/Z$e,Z$j=Z$d/Z$f,Z$k=(Z$c+Z$a.bitmap.width)/Z$e,Z$l=(Z$d+Z$a.bitmap.height)/Z$f,Z$m=Z$a.bitmap.width/Z$e,Z$n=Z$a.bitmap.height/Z$f;Z$a.uv=[Z$i+Z$b[0]*Z$m,Z$j+Z$b[1]*Z$n,Z$k-(1-Z$b[2])*Z$m,Z$j+Z$b[3]*Z$n,Z$k-(1-Z$b[4])*Z$m,Z$l-(1-Z$b[5])*Z$n,Z$i+Z$b[6]*Z$m,Z$l-(1-Z$b[7])*Z$n]},Z$b.findBitmapIsExist=function(Z$a){if(Z$a instanceof laya.webgl.resource.WebGLImage){var Z$b=Z$a,Z$c=Z$b.url,Z$d=this._InAtlasWebGLImagesKey[Z$c||Z$b.id];if(Z$d)return Z$d.offsetInfoID}return-1},Z$b.addToAtlasTexture=function(Z$a,Z$b,Z$c){if(Z$a instanceof laya.webgl.resource.WebGLImage){var Z$d=Z$a,Z$e=Z$d.url;this._InAtlasWebGLImagesKey[Z$e||Z$d.id]={bitmap:Z$a,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([Z$b,Z$c])}this._atlasCanvas.texSubImage2D(Z$b,Z$c,Z$a.atlasSource),Z$a.clearAtlasSource()},Z$b.addToAtlas=function(Z$a,Z$b,Z$c){Z$a._atlasID=this._inAtlasTextureKey.length;var Z$d=Z$a.uv.slice(),Z$e=Z$a.bitmap;this._inAtlasTextureKey.push(Z$a),this._inAtlasTextureOriUVValue.push(Z$d),this._inAtlasTextureBitmapValue.push(Z$e),this.computeUVinAtlasTexture(Z$a,Z$d,Z$b,Z$c),Z$a.bitmap=this._atlasCanvas},Z$b.clear=function(){for(var Z$a=0,Z$b=this._inAtlasTextureKey.length;Z$a<Z$b;Z$a++)this._inAtlasTextureKey[Z$a].bitmap=this._inAtlasTextureBitmapValue[Z$a],this._inAtlasTextureKey[Z$a].uv=this._inAtlasTextureOriUVValue[Z$a],this._inAtlasTextureKey[Z$a]._atlasID=-1,this._inAtlasTextureKey[Z$a].bitmap.lock=!1,this._inAtlasTextureKey[Z$a].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},Z$b.dispose=function(){this.clear(),this._atlasCanvas.destroy()},Z$d(0,Z$b,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),Z$d(0,Z$b,"texture",function(){return this._atlasCanvas}),Z$d(0,Z$b,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),Z$f}(),Z$Ea=function(Z$a){function Z$c(){Z$c.__super.call(this,Z$c.__name2int,Z$c.__int2name,Z$c.__int2nameMap)}return Z$o(Z$c,"laya.webgl.shader.d2.ShaderDefines2D",Z$h),Z$c.__init__=function(){Z$c.reg("TEXTURE2D",1),Z$c.reg("COLOR2D",2),Z$c.reg("PRIMITIVE",4),Z$c.reg("GLOW_FILTER",8),Z$c.reg("BLUR_FILTER",16),Z$c.reg("COLOR_FILTER",32),Z$c.reg("COLOR_ADD",64),Z$c.reg("WORLDMAT",128),Z$c.reg("FILLTEXTURE",256),Z$c.reg("FSHIGHPRECISION",1024),Z$c.reg("TXTALPHA",2048),Z$c.reg("TXTCOMPRESS",4096)},Z$c.reg=function(Z$a,Z$b){Z$h._reg(Z$a,Z$b,Z$c.__name2int,Z$c.__int2name)},Z$c.toText=function(Z$a,Z$b,Z$c){return Z$h._toText(Z$a,Z$b,Z$c)},Z$c.toInt=function(Z$a){return Z$h._toInt(Z$a,Z$c.__name2int)},Z$c.TEXTURE2D=1,Z$c.COLOR2D=2,Z$c.PRIMITIVE=4,Z$c.FILTERGLOW=8,Z$c.FILTERBLUR=16,Z$c.FILTERCOLOR=32,Z$c.COLORADD=64,Z$c.WORLDMAT=128,Z$c.FILLTEXTURE=256,Z$c.SKINMESH=512,Z$c.SHADERDEFINE_FSHIGHPRECISION=1024,Z$c.TXTALPHA=2048,Z$c.TXTCOMPRESS=4096,Z$c.__name2int={},Z$c.__int2name=[],Z$c.__int2nameMap=[],Z$c}(),Z$Fa=(function(Z$a){function Z$j(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){Z$j.__super.call(this,Z$a,Z$b,Z$c,Z$d,40,Z$e,Z$f,Z$i)}Z$o(Z$j,"laya.webgl.shapes.Ellipse",Z$ca)}(),function(Z$a){function Z$f(Z$a,Z$b,Z$c,Z$d,Z$e){this._points=[],this.rebuild(Z$c),Z$f.__super.call(this,Z$a,Z$b,0,0,0,Z$e,Z$d,Z$e,0)}Z$o(Z$f,"laya.webgl.shapes.Line",Z$ca);var Z$b=Z$f.prototype;return Z$b.rebuild=function(Z$a){var Z$b=Z$a.length;Z$b!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(Z$b/2-1)),this.mFloat32Array=new Float32Array(5*Z$b)),this._points.length=0;for(var Z$c=NaN,Z$d=NaN,Z$e=-1,Z$f=-1,Z$i=Z$a.length/2,Z$j=0;Z$j<Z$i;Z$j++)Z$c=Z$a[2*Z$j],Z$d=Z$a[2*Z$j+1],(.01<Math.abs(Z$e-Z$c)||.01<Math.abs(Z$f-Z$d))&&this._points.push(Z$c,Z$d),Z$e=Z$c,Z$f=Z$d},Z$b.getData=function(Z$a,Z$b,Z$c){var Z$d=[],Z$e=[];0<this.borderWidth&&this.createLine2(this._points,Z$d,this.borderWidth,Z$c,Z$e,this._points.length/2),this.mUint16Array.set(Z$d,0),this.mFloat32Array.set(Z$e,0),Z$a.append(this.mUint16Array),Z$b.append(this.mFloat32Array)},Z$f}()),Z$Ga=function(Z$a){function Z$n(Z$a,Z$b,Z$c,Z$d,Z$e){this._points=[];for(var Z$f=NaN,Z$i=NaN,Z$j=-1,Z$k=-1,Z$l=Z$c.length/2-1,Z$m=0;Z$m<Z$l;Z$m++)Z$f=Z$c[2*Z$m],Z$i=Z$c[2*Z$m+1],(.01<Math.abs(Z$j-Z$f)||.01<Math.abs(Z$k-Z$i))&&this._points.push(Z$f,Z$i),Z$j=Z$f,Z$k=Z$i;Z$f=Z$c[2*Z$l],Z$i=Z$c[2*Z$l+1],Z$j=this._points[0],Z$k=this._points[1],(.01<Math.abs(Z$j-Z$f)||.01<Math.abs(Z$k-Z$i))&&this._points.push(Z$f,Z$i),Z$n.__super.call(this,Z$a,Z$b,0,0,this._points.length/2,0,Z$d,Z$e)}Z$o(Z$n,"laya.webgl.shapes.LoopLine",Z$ca);var Z$b=Z$n.prototype;return Z$b.getData=function(Z$a,Z$b,Z$c){if(0<this.borderWidth){for(var Z$d=this.color,Z$e=(Z$d>>16&255)/255,Z$f=(Z$d>>8&255)/255,Z$i=(255&Z$d)/255,Z$j=[],Z$k=0,Z$l=0,Z$m=[],Z$n=Math.floor(this._points.length/2),Z$o=0;Z$o<Z$n;Z$o++)Z$k=this._points[2*Z$o],Z$l=this._points[2*Z$o+1],Z$j.push(this.x+Z$k,this.y+Z$l,Z$e,Z$f,Z$i);this.createLoopLine(Z$j,Z$m,this.borderWidth,Z$c+Z$j.length/5),Z$a.append(new Uint16Array(Z$m)),Z$b.append(new Float32Array(Z$j))}},Z$b.createLoopLine=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){Z$a.length;var Z$i=Z$a.concat(),Z$j=Z$e||Z$a,Z$k=this.borderColor,Z$l=(Z$k>>16&255)/255,Z$m=(Z$k>>8&255)/255,Z$n=(255&Z$k)/255,Z$o=[Z$i[0],Z$i[1]],Z$p=[Z$i[Z$i.length-5],Z$i[Z$i.length-4]],Z$q=Z$p[0]+.5*(Z$o[0]-Z$p[0]),Z$r=Z$p[1]+.5*(Z$o[1]-Z$p[1]);Z$i.unshift(Z$q,Z$r,0,0,0),Z$i.push(Z$q,Z$r,0,0,0);var Z$s,Z$t,Z$u,Z$v,Z$w,Z$x,Z$y,Z$z,Z$A,Z$B,Z$C,Z$D,Z$E,Z$F,Z$G,Z$H,Z$I,Z$J,Z$K,Z$L,Z$M=Z$i.length/5,Z$N=Z$d,Z$O=Z$c/2;Z$u=Z$i[0],Z$v=Z$i[1],Z$B=Z$u-(Z$w=Z$i[5]),Z$A=(Z$A=-(Z$v-(Z$x=Z$i[6])))/(Z$L=Math.sqrt(Z$A*Z$A+Z$B*Z$B))*Z$O,Z$B=Z$B/Z$L*Z$O,Z$j.push(Z$u-Z$A,Z$v-Z$B,Z$l,Z$m,Z$n,Z$u+Z$A,Z$v+Z$B,Z$l,Z$m,Z$n);for(var Z$P=1;Z$P<Z$M-1;Z$P++)Z$u=Z$i[5*(Z$P-1)],Z$v=Z$i[5*(Z$P-1)+1],Z$w=Z$i[5*Z$P],Z$x=Z$i[5*Z$P+1],Z$y=Z$i[5*(Z$P+1)],Z$z=Z$i[5*(Z$P+1)+1],Z$B=Z$u-Z$w,Z$D=Z$w-Z$y,Z$G=(-(Z$A=(Z$A=-(Z$v-Z$x))/(Z$L=Math.sqrt(Z$A*Z$A+Z$B*Z$B))*Z$O)+Z$u)*(-(Z$B=Z$B/Z$L*Z$O)+Z$x)-(-Z$A+Z$w)*(-Z$B+Z$v),Z$J=(-(Z$C=(Z$C=-(Z$x-Z$z))/(Z$L=Math.sqrt(Z$C*Z$C+Z$D*Z$D))*Z$O)+Z$y)*(-(Z$D=Z$D/Z$L*Z$O)+Z$x)-(-Z$C+Z$w)*(-Z$D+Z$z),Z$K=(Z$E=-Z$B+Z$v-(-Z$B+Z$x))*(Z$I=-Z$C+Z$w-(-Z$C+Z$y))-(Z$H=-Z$D+Z$z-(-Z$D+Z$x))*(Z$F=-Z$A+Z$w-(-Z$A+Z$u)),Math.abs(Z$K)<.1?(Z$K+=10.1,Z$j.push(Z$w-Z$A,Z$x-Z$B,Z$l,Z$m,Z$n,Z$w+Z$A,Z$x+Z$B,Z$l,Z$m,Z$n)):(((Z$s=(Z$F*Z$J-Z$I*Z$G)/Z$K)-Z$w)*(Z$s-Z$w)+((Z$t=(Z$H*Z$G-Z$E*Z$J)/Z$K)-Z$x)+(Z$t-Z$x),Z$j.push(Z$s,Z$t,Z$l,Z$m,Z$n,Z$w-(Z$s-Z$w),Z$x-(Z$t-Z$x),Z$l,Z$m,Z$n));Z$f&&(Z$b=Z$f);var Z$Q=this.edges+1;for(Z$P=1;Z$P<Z$Q;Z$P++)Z$b.push(Z$N+2*(Z$P-1),Z$N+2*(Z$P-1)+1,Z$N+2*Z$P+1,Z$N+2*Z$P+1,Z$N+2*Z$P,Z$N+2*(Z$P-1));return Z$b.push(Z$N+2*(Z$P-1),Z$N+2*(Z$P-1)+1,Z$N+1,Z$N+1,Z$N,Z$N+2*(Z$P-1)),Z$j},Z$n}(),Z$Ha=function(Z$a){function Z$i(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=Z$B.create(),this._points=Z$c.slice(0,Z$c.length),Z$i.__super.call(this,Z$a,Z$b,0,0,this._points.length/2,Z$d,Z$e,Z$f)}Z$o(Z$i,"laya.webgl.shapes.Polygon",Z$ca);var Z$b=Z$i.prototype;return Z$b.rebuild=function(Z$a){this._repaint||(this._points.length=0,this._points=this._points.concat(Z$a))},Z$b.setMatrix=function(Z$a){Z$a.copyTo(this._mat)},Z$b.needUpdate=function(Z$a){return this._repaint=this._mat.a==Z$a.a&&this._mat.b==Z$a.b&&this._mat.c==Z$a.c&&this._mat.d==Z$a.d&&this._mat.tx==Z$a.tx&&this._mat.ty==Z$a.ty,!this._repaint},Z$b.getData=function(Z$a,Z$b,Z$c){var Z$d,Z$e=0,Z$f=this._points,Z$i=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=Z$c){for(this._start=Z$c,Z$d=[],Z$i=this.earcutTriangles.length,Z$e=0;Z$e<Z$i;Z$e++)Z$d.push(this.earcutTriangles[Z$e]+Z$c);this.mUint16Array=new Uint16Array(Z$d)}}else{this._start=Z$c,Z$d=[];var Z$j=[],Z$k=[],Z$l=this.color,Z$m=(Z$l>>16&255)/255,Z$n=(Z$l>>8&255)/255,Z$o=(255&Z$l)/255;for(Z$i=Math.floor(Z$f.length/2),Z$e=0;Z$e<Z$i;Z$e++)Z$j.push(this.x+Z$f[2*Z$e],this.y+Z$f[2*Z$e+1],Z$m,Z$n,Z$o),Z$k.push(this.x+Z$f[2*Z$e],this.y+Z$f[2*Z$e+1]);for(this.earcutTriangles=Z$da.earcut(Z$k,null,2),Z$i=this.earcutTriangles.length,Z$e=0;Z$e<Z$i;Z$e++)Z$d.push(this.earcutTriangles[Z$e]+Z$c);this.mUint16Array=new Uint16Array(Z$d),this.mFloat32Array=new Float32Array(Z$j)}Z$a.append(this.mUint16Array),Z$b.append(this.mFloat32Array)},Z$i}(),Z$Ia=function(Z$a){function Z$f(){this._matrix=new Z$B,this._matrix4=Z$ra.defaultMatrix4.concat(),Z$f.__super.call(this,1e4),this.shaderValue=new Z$Aa(0,0)}Z$o(Z$f,"laya.webgl.submit.SubmitCanvas",Z$fa);var Z$b=Z$f.prototype;return Z$b.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var Z$a=Z$ua.worldAlpha,Z$b=Z$ua.worldMatrix4,Z$c=Z$ua.worldMatrix,Z$d=Z$ua.worldFilters,Z$e=Z$ua.worldShaderDefines,Z$f=this.shaderValue,Z$i=this._matrix,Z$j=this._matrix4,Z$k=Z$B.TEMP;return Z$B.mul(Z$i,Z$c,Z$k),Z$j[0]=Z$k.a,Z$j[1]=Z$k.b,Z$j[4]=Z$k.c,Z$j[5]=Z$k.d,Z$j[12]=Z$k.tx,Z$j[13]=Z$k.ty,Z$ua.worldMatrix=Z$k.clone(),Z$ua.worldMatrix4=Z$j,Z$ua.worldAlpha=Z$ua.worldAlpha*Z$f.alpha,Z$f.filters&&Z$f.filters.length&&(Z$ua.worldFilters=Z$f.filters,Z$ua.worldShaderDefines=Z$f.defines),this._ctx_src.flush(),Z$ua.worldAlpha=Z$a,Z$ua.worldMatrix4=Z$b,Z$ua.worldMatrix.destroy(),Z$ua.worldMatrix=Z$c,Z$ua.worldFilters=Z$d,Z$ua.worldShaderDefines=Z$e,1},Z$b.releaseRender=function(){var Z$a=Z$f._cache;this._ctx_src=null,Z$a[Z$a._length++]=this},Z$b.getRenderType=function(){return 10003},Z$f.create=function(Z$a,Z$b,Z$c){var Z$d=Z$f._cache._length?Z$f._cache[--Z$f._cache._length]:new Z$f;Z$d._ctx_src=Z$a;var Z$e=Z$d.shaderValue;return Z$e.alpha=Z$b,Z$e.defines.setValue(0),Z$c&&Z$c.length&&Z$e.setFilters(Z$c),Z$d},Z$f._cache=((Z$f._cache=[])._length=0,Z$f._cache),Z$f}(),Z$Ja=function(Z$a){function Z$l(Z$a){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===Z$a&&(Z$a=1e4),Z$l.__super.call(this,Z$a)}Z$o(Z$l,"laya.webgl.submit.SubmitTexture",Z$fa);var Z$b=Z$l.prototype;return Z$b.releaseRender=function(){var Z$a=Z$l._cache;(Z$a[Z$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},Z$b.addTexture=function(Z$a,Z$b){this._texsID[this._texs.length]=Z$a._uvID,this._texs.push(Z$a),this._vbPos.push(Z$b)},Z$b.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var Z$a=this.shaderValue.textureHost.bitmap;if(null!==Z$a)for(var Z$b=this._vb.getFloat32Array(),Z$c=0,Z$d=this._texs.length;Z$c<Z$d;Z$c++){var Z$e=this._texs[Z$c];Z$e.active();var Z$f=Z$e.uv;if(this._texsID[Z$c]!==Z$e._uvID){this._texsID[Z$c]=Z$e._uvID;var Z$i=this._vbPos[Z$c];Z$b[Z$i+2]=Z$f[0],Z$b[Z$i+3]=Z$f[1],Z$b[Z$i+6]=Z$f[2],Z$b[Z$i+7]=Z$f[3],Z$b[Z$i+10]=Z$f[4],Z$b[Z$i+11]=Z$f[5],Z$b[Z$i+14]=Z$f[6],Z$b[Z$i+15]=Z$f[7],this._vb.setNeedUpload()}Z$e.bitmap!==Z$a&&(this._isSameTexture=!1)}}},Z$b.renderSubmit=function(){if(0===this._numEle)return Z$l._shaderSet=!1,1;var Z$a=this.shaderValue.textureHost;if(Z$a){var Z$b=Z$a.source;if(!Z$a.bitmap||!Z$b)return Z$l._shaderSet=!1,1;this.shaderValue.texture=Z$b,Z$a.alphaTexture&&Z$a.alphaTexture.source&&(this.shaderValue.texture1=Z$a.alphaTexture.source)}this._vb.bind_upload(this._ib);var Z$c=Z$wa.mainContext;if(Z$S.activeBlendFunction!==this._blendFn&&(Z$c.enable(3042),this._blendFn(Z$c),Z$S.activeBlendFunction=this._blendFn),Z$G.drawCall++,Z$G.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&Z$La.activeShader&&Z$l._shaderSet?(Z$La.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&Z$La.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),Z$l._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var Z$d=Z$a.bitmap,Z$e=0,Z$f=Z$La.activeShader,Z$i=0,Z$j=this._texs.length;Z$i<Z$j;Z$i++){var Z$k=this._texs[Z$i];Z$k.bitmap===Z$d&&Z$i+1!==Z$j||(Z$f.uploadTexture2D(Z$k.source),Z$c.drawElements(4,6*(Z$i-Z$e+1),5123,this._startIdx+6*Z$e*Z$ra.BYTES_PIDX),Z$d=Z$k.bitmap,Z$e=Z$i)}else Z$c.drawElements(4,this._numEle,5123,this._startIdx);return 1},Z$l.create=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$l._cache._length?Z$l._cache[--Z$l._cache._length]:new Z$l;null==Z$c&&((Z$c=Z$f._selfVb||(Z$f._selfVb=Z$ha.create(-1))).clear(),Z$d=0),Z$f._ib=Z$b,Z$f._vb=Z$c,Z$f._startIdx=Z$d*Z$ra.BYTES_PIDX,Z$f._numEle=0;var Z$i=Z$a._nBlendType;Z$f._blendFn=Z$a._targets?Z$S.targetFns[Z$i]:Z$S.fns[Z$i],Z$f.shaderValue=Z$e,Z$f.shaderValue.setValue(Z$a._shader2D);var Z$j=Z$a._shader2D.filters;return Z$j&&Z$f.shaderValue.setFilters(Z$j),Z$f},Z$l._cache=((Z$l._cache=[])._length=0,Z$l._cache),Z$l._shaderSet=!0,Z$l}(),Z$Ka=function(Z$a){function Z$t(){Z$t.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}Z$o(Z$t,"laya.webgl.utils.MeshTexture",Z$ta);var Z$b=Z$t.prototype;return Z$b.addData=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){for(var Z$i=Z$a.length/2,Z$j=this._vb.needSize(Z$i*Z$t.const_stride)>>2,Z$k=this._vb.getFloat32Array(),Z$l=0,Z$m=0;Z$m<Z$i;Z$m++){var Z$n=Z$a[Z$l],Z$o=Z$a[Z$l+1],Z$p=Z$n*Z$d.a+Z$o*Z$d.c+Z$d.tx,Z$q=Z$n*Z$d.b+Z$o*Z$d.d+Z$d.ty;Z$k[Z$j++]=Z$p,Z$k[Z$j++]=Z$q,Z$k[Z$j++]=Z$b[Z$l],Z$k[Z$j++]=Z$b[Z$l+1],Z$l+=2}this._vb.setNeedUpload();var Z$r=this.vertNum;if(0<Z$r){(Z$i=Z$c.length)>Z$t.tmpIdx.length&&(Z$t.tmpIdx=new Uint16Array(Z$i));for(var Z$s=0;Z$s<Z$i;Z$s++)Z$t.tmpIdx[Z$s]=Z$c[Z$s]+Z$r;this._ib.appendU16Array(Z$t.tmpIdx,Z$c.length)}else this._ib.append(Z$c);this._ib.setNeedUpload(),this.vertNum+=Z$i,this.indexNum+=Z$c.length},Z$b.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},Z$b.destroy=function(){this._ib.destroy(),this._vb.destroy()},Z$t.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new Z$t},Z$t.const_stride=16,Z$t._POOL=[],Z$i(Z$t,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),Z$t}(),Z$La=function(Z$a){function Z$b(){Z$b.__super.call(this),this.lock=!0}return Z$o(Z$b,"laya.webgl.shader.BaseShader",Z$v),Z$b.activeShader=null,Z$b.bindShader=null,Z$b}(),Z$Ma=function(Z$b){function Z$m(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===Z$c&&(Z$c=6408),void 0===Z$d&&(Z$d=5121),void 0===Z$e&&(Z$e=34041),void 0===Z$f&&(Z$f=!1),void 0===Z$i&&(Z$i=!1),void 0===Z$j&&(Z$j=-1),void 0===Z$k&&(Z$k=-1),this._type=1,this._w=Z$a,this._h=Z$b,this._surfaceFormat=Z$c,this._surfaceType=Z$d,this._depthStencilFormat=Z$e,Z$t.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=Z$f,this._repeat=Z$i,this._minFifter=Z$j,this._magFifter=Z$k,this._createWebGLRenderTarget(),this.bitmap.lock=!0,Z$m.__super.call(this,this.bitmap,Z$K.INV_UV)}Z$o(Z$m,"laya.webgl.resource.RenderTarget2D",Z$b);var Z$a=Z$m.prototype;return Z$y.imps(Z$a,{"laya.resource.IDispose":!0}),Z$a.getType=function(){return this._type},Z$a.getTexture=function(){return this},Z$a.size=function(Z$a,Z$b){this._w==Z$a&&this._h==Z$b||(this._w=Z$a,this._h=Z$b,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},Z$a.release=function(){this.destroy()},Z$a.recycle=function(){Z$m.POOL.push(this)},Z$a.start=function(){var Z$a=Z$wa.mainContext;return this._preRenderTarget=Z$ua.curRenderTarget,Z$ua.curRenderTarget=this,Z$a.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(Z$a.viewport(0,0,this._w,this._h),this._svWidth=Z$ua.width,this._svHeight=Z$ua.height,Z$ua.width=this._w,Z$ua.height=this._h,Z$La.activeShader=null),this},Z$a.clear=function(Z$a,Z$b,Z$c,Z$d){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=1);var Z$e=Z$wa.mainContext;Z$e.clearColor(Z$a,Z$b,Z$c,Z$d);var Z$f=16384;switch(this._depthStencilFormat){case 33189:Z$f|=256;break;case 36168:Z$f|=1024;break;case 34041:Z$f|=256,Z$f|=1024}Z$e.clear(Z$f)},Z$a.end=function(){var Z$a=Z$wa.mainContext;Z$a.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,Z$ua.curRenderTarget=this._preRenderTarget,1==this._type?(Z$a.viewport(0,0,this._svWidth,this._svHeight),Z$ua.width=this._svWidth,Z$ua.height=this._svHeight,Z$La.activeShader=null):Z$a.viewport(0,0,Z$y.stage.width,Z$y.stage.height)},Z$a.getData=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$wa.mainContext;if(Z$e.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===Z$e.checkFramebufferStatus(36160)))return Z$e.bindFramebuffer(36160,null),null;var Z$f=new Uint8Array(this._w*this._h*4);return Z$e.readPixels(Z$a,Z$b,Z$c,Z$d,this._surfaceFormat,this._surfaceType,Z$f),Z$e.bindFramebuffer(36160,null),Z$f},Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,Z$b.prototype.destroy.call(this))},Z$a.dispose=function(){},Z$a._createWebGLRenderTarget=function(){this.bitmap=new Z$Wa(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(Z$a){this.event("recovered")})},Z$d(0,Z$a,"surfaceFormat",function(){return this._surfaceFormat}),Z$d(0,Z$a,"magFifter",function(){return this._magFifter}),Z$d(0,Z$a,"surfaceType",function(){return this._surfaceType}),Z$d(0,Z$a,"mipMap",function(){return this._mipMap}),Z$d(0,Z$a,"depthStencilFormat",function(){return this._depthStencilFormat}),Z$d(0,Z$a,"minFifter",function(){return this._minFifter}),Z$d(0,Z$a,"source",function(){return this._alreadyResolved?Z$y.superGet(Z$K,this,"source"):null}),Z$m.create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){void 0===Z$c&&(Z$c=6408),void 0===Z$d&&(Z$d=5121),void 0===Z$e&&(Z$e=34041),void 0===Z$f&&(Z$f=!1),void 0===Z$i&&(Z$i=!1),void 0===Z$j&&(Z$j=-1),void 0===Z$k&&(Z$k=-1);var Z$l=Z$m.POOL.pop();return Z$l||(Z$l=new Z$m(Z$a,Z$b)),Z$l.bitmap&&Z$l._w==Z$a&&Z$l._h==Z$b&&Z$l._surfaceFormat==Z$c&&Z$l._surfaceType==Z$d&&Z$l._depthStencilFormat==Z$e&&Z$l._mipMap==Z$f&&Z$l._repeat==Z$i&&Z$l._minFifter==Z$j&&Z$l._magFifter==Z$k||(Z$l._w=Z$a,Z$l._h=Z$b,Z$l._surfaceFormat=Z$c,Z$l._surfaceType=Z$d,Z$l._depthStencilFormat=Z$e,Z$t.isConchWebGL&&34041===Z$l._depthStencilFormat&&(Z$l._depthStencilFormat=33189),Z$l._mipMap=Z$f,Z$l._repeat=Z$i,Z$l._minFifter=Z$j,Z$l._magFifter=Z$k,Z$l.release(),Z$l._createWebGLRenderTarget()),Z$l},Z$m.TYPE2D=1,Z$m.TYPE3D=2,Z$m.POOL=[],Z$m}(Z$K),Z$Na=function(Z$a){function Z$b(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,Z$b.__super.call(this),Z$b._gl=Z$wa.mainContext}Z$o(Z$b,"laya.webgl.utils.Buffer",Z$v);var Z$c=Z$b.prototype;return Z$c._bind=function(){this.activeResource(),Z$b._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(Z$b._bindVertexBuffer=this._glBuffer),Z$b._gl.bindBuffer(this._bufferType,Z$b._bindActive[this._bufferType]=this._glBuffer),Z$La.activeShader=null)},Z$c.recreateResource=function(){this._glBuffer||(this._glBuffer=Z$b._gl.createBuffer()),this.completeCreate()},Z$c.disposeResource=function(){this._glBuffer&&(Z$wa.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},Z$d(0,Z$c,"bufferUsage",function(){return this._bufferUsage}),Z$b._gl=null,Z$b._bindActive={},Z$b._bindVertexBuffer=null,Z$b._enableAtributes=[],Z$b}(),Z$Oa=function(Z$a){function Z$c(Z$a){this.texcoord=null,this.offsetX=300,this.offsetY=0,Z$c.__super.call(this,512,0);var Z$b=8*Z$ra.BYTES_PE;this.position=[2,5126,!1,Z$b,0],this.texcoord=[2,5126,!1,Z$b,2*Z$ra.BYTES_PE],this.color=[4,5126,!1,Z$b,4*Z$ra.BYTES_PE]}return Z$o(Z$c,"laya.webgl.shader.d2.skinAnishader.SkinSV",Z$Aa),Z$c}(),Z$Pa=function(Z$a){function Z$b(Z$a){Z$b.__super.call(this,2,0),this.color=[]}return Z$o(Z$b,"laya.webgl.shader.d2.value.Color2dSV",Z$Aa),Z$b.prototype.setValue=function(Z$a){Z$a.fillStyle&&(this.color=Z$a.fillStyle._color._color),Z$a.strokeStyle&&(this.color=Z$a.strokeStyle._color._color)},Z$b}(),Z$Qa=function(Z$a){function Z$b(Z$a){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=Z$Aa._TEXCOORD,Z$b.__super.call(this,256,0)}Z$o(Z$b,"laya.webgl.shader.d2.value.FillTextureSV",Z$Aa);var Z$c=Z$b.prototype;return Z$c.setValue=function(Z$a){this.ALPHA=Z$a.ALPHA,Z$a.filters&&this.setFilters(Z$a.filters)},Z$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},Z$b}(),Z$Ra=function(Z$a){function Z$b(Z$a){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=Z$Aa._TEXCOORD,void 0===Z$a&&(Z$a=0),Z$b.__super.call(this,1,Z$a)}Z$o(Z$b,"laya.webgl.shader.d2.value.TextureSV",Z$Aa);var Z$c=Z$b.prototype;return Z$c.setValue=function(Z$a){this.ALPHA=Z$a.ALPHA,Z$a.filters&&this.setFilters(Z$a.filters)},Z$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},Z$b}(),Z$Sa=function(Z$a){function Z$b(Z$a){this.a_color=null,this.u_pos=[0,0],Z$b.__super.call(this,4,0),this.position=[2,5126,!1,5*Z$ra.BYTES_PE,0],this.a_color=[3,5126,!1,5*Z$ra.BYTES_PE,2*Z$ra.BYTES_PE]}return Z$o(Z$b,"laya.webgl.shader.d2.value.PrimitiveSV",Z$Aa),Z$b}(),Z$Ta=function(Z$a){function Z$b(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,Z$b.__super.call(this)}Z$o(Z$b,"laya.webgl.atlas.AtlasWebGLCanvas",Z$a);var Z$c=Z$b.prototype;return Z$c.recreateResource=function(){var Z$a=Z$wa.mainContext,Z$b=this._source=Z$a.createTexture(),Z$c=Z$xa.curBindTexTarget,Z$d=Z$xa.curBindTexValue;Z$xa.bindTexture(Z$a,3553,Z$b),Z$a.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),Z$a.texParameteri(3553,10241,9729),Z$a.texParameteri(3553,10240,9729),Z$a.texParameteri(3553,10242,33071),Z$a.texParameteri(3553,10243,33071),Z$c&&Z$d&&Z$xa.bindTexture(Z$a,Z$c,Z$d),this.memorySize=this._w*this._h*4,this.completeCreate()},Z$c.disposeResource=function(){this._source&&(Z$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},Z$c.texSubImage2D=function(Z$a,Z$b,Z$c){if(Z$t.isFlash){this._flashCacheImage||(this._flashCacheImage=Z$r.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var Z$d=Z$c.bitmapdata;this._flashCacheImage._image.copyPixels(Z$d,0,0,Z$d.width,Z$d.height,Z$a,Z$b),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var Z$e=Z$wa.mainContext,Z$f=Z$xa.curBindTexTarget,Z$i=Z$xa.curBindTexValue;Z$xa.bindTexture(Z$e,3553,this._source),Z$e.pixelStorei(37441,!0),0<=Z$a-1&&Z$e.texSubImage2D(3553,0,Z$a-1,Z$b,6408,5121,Z$c),Z$a+1<=this._w&&Z$e.texSubImage2D(3553,0,Z$a+1,Z$b,6408,5121,Z$c),0<=Z$b-1&&Z$e.texSubImage2D(3553,0,Z$a,Z$b-1,6408,5121,Z$c),Z$b+1<=this._h&&Z$e.texSubImage2D(3553,0,Z$a,Z$b+1,6408,5121,Z$c),Z$e.texSubImage2D(3553,0,Z$a,Z$b,6408,5121,Z$c),Z$e.pixelStorei(37441,!1),Z$f&&Z$i&&Z$xa.bindTexture(Z$e,Z$f,Z$i)}},Z$c.texSubImage2DPixel=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$wa.mainContext,Z$i=Z$xa.curBindTexTarget,Z$j=Z$xa.curBindTexValue;Z$xa.bindTexture(Z$f,3553,this._source);var Z$k=new Uint8Array(Z$e.data);Z$f.pixelStorei(37441,!0),Z$f.texSubImage2D(3553,0,Z$a,Z$b,Z$c,Z$d,6408,5121,Z$k),Z$f.pixelStorei(37441,!1),Z$i&&Z$j&&Z$xa.bindTexture(Z$f,Z$i,Z$j)},Z$d(0,Z$c,"width",Z$a.prototype._$get_width,function(Z$a){this._w=Z$a}),Z$d(0,Z$c,"height",Z$a.prototype._$get_height,function(Z$a){this._h=Z$a}),Z$b}(Z$c),Z$Ua=function(Z$a){function Z$e(){this.flipY=!0,this.alwaysChange=!1,Z$e.__super.call(this)}Z$o(Z$e,"laya.webgl.resource.WebGLCanvas",Z$c);var Z$b=Z$e.prototype;return Z$b.getCanvas=function(){return this._canvas},Z$b.clear=function(){this._ctx&&this._ctx.clear()},Z$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},Z$b._setContext=function(Z$a){this._ctx=Z$a},Z$b.getContext=function(Z$a,Z$b){return this._ctx?this._ctx:this._ctx=Z$e._createContext(this)},Z$b.size=function(Z$a,Z$b){this._w==Z$a&&this._h==Z$b||(this._w=Z$a,this._h=Z$b,this._ctx&&this._ctx.size(Z$a,Z$b),this._canvas&&(this._canvas.height=Z$b,this._canvas.width=Z$a))},Z$b.activeResource=function(Z$a){void 0===Z$a&&(Z$a=!1),this._source||this.recreateResource()},Z$b.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},Z$b.disposeResource=function(){this._source&&!this.iscpuSource&&(Z$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},Z$b.createWebGlTexture=function(){var Z$a=Z$wa.mainContext;this._canvas;var Z$b=this._source=Z$a.createTexture();this.iscpuSource=!1;var Z$c=Z$xa.curBindTexTarget,Z$d=Z$xa.curBindTexValue;Z$xa.bindTexture(Z$a,3553,Z$b),Z$a.pixelStorei(37440,this.flipY?1:0),Z$e.premulAlpha&&Z$a.pixelStorei(37441,!0),Z$a.texImage2D(3553,0,6408,6408,5121,this._imgData),Z$e.premulAlpha&&Z$a.pixelStorei(37441,!1),Z$a.texParameteri(3553,10240,9729),Z$a.texParameteri(3553,10241,9729),Z$a.texParameteri(3553,10242,33071),Z$a.texParameteri(3553,10243,33071),Z$a.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,Z$c&&Z$d&&Z$xa.bindTexture(Z$a,Z$c,Z$d)},Z$b.reloadCanvasData=function(){var Z$a=Z$wa.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var Z$b=Z$xa.curBindTexTarget,Z$c=Z$xa.curBindTexValue;Z$xa.bindTexture(Z$a,3553,this._source),Z$e.premulAlpha&&Z$a.pixelStorei(37441,!0),Z$a.texImage2D(3553,0,6408,6408,5121,this._imgData),Z$e.premulAlpha&&Z$a.pixelStorei(37441,!1),Z$a.pixelStorei(37440,0),Z$b&&Z$c&&Z$xa.bindTexture(Z$a,Z$b,Z$c)},Z$b.texSubImage2D=function(Z$a,Z$b,Z$c){var Z$d=Z$wa.mainContext,Z$e=Z$xa.curBindTexTarget,Z$f=Z$xa.curBindTexValue;Z$xa.bindTexture(Z$d,3553,this._source),Z$d.pixelStorei(37441,!0),Z$d.texSubImage2D(3553,0,Z$b,Z$c,6408,5121,Z$a._source),Z$d.pixelStorei(37441,!1),Z$e&&Z$f&&Z$xa.bindTexture(Z$d,Z$e,Z$f)},Z$b.toBase64=function(Z$a,Z$b,Z$c){var Z$d=null;this._canvas&&(Z$d=this._canvas.toDataURL(Z$a,Z$b)),Z$c.call(this,Z$d)},Z$d(0,Z$b,"context",function(){return this._ctx}),Z$d(0,Z$b,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),Z$d(0,Z$b,"asBitmap",null,function(Z$a){this._ctx&&(this._ctx.asBitmap=Z$a)}),Z$e._createContext=null,Z$e.premulAlpha=!1,Z$e}(),Z$Va=function(Z$a){function Z$f(Z$a,Z$b){this.CborderSize=12,Z$f.__super.call(this),this.char=Z$a,this.isSpace=" "===Z$a,this.xs=Z$b.scaleX,this.ys=Z$b.scaleY,this.font=Z$b.font.toString(),this.fontSize=Z$b.font.size,this.fillColor=Z$b.fillColor,this.borderColor=Z$b.borderColor,this.lineWidth=Z$b.lineWidth,this.underLine=Z$b.underLine;var Z$c,Z$d=Z$t.isConchApp;Z$d?((Z$c=ConchTextCanvas)._source=ConchTextCanvas,Z$c._source.canvas=ConchTextCanvas):Z$c=Z$p.canvas.source,this.canvas=Z$c,this._enableMerageInAtlas=!0,this._ctx=Z$d?Z$c:this.canvas.getContext("2d",void 0);var Z$e=Z$L.measureText(this.char,this.font);this.cw=Z$e.width*this.xs,this.ch=(Z$e.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new Z$K(this)}Z$o(Z$f,"laya.webgl.resource.WebGLCharImage",Z$c);var Z$b=Z$f.prototype;return Z$y.imps(Z$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),Z$b.active=function(){this.texture.active()},Z$b.recreateResource=function(){var Z$a=Z$t.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),Z$a){var Z$b=this.fontSize;1==this.xs&&1==this.ys||(Z$b=parseInt(Z$b*(this.xs>this.ys?this.xs:this.ys)+""));var Z$c="normal 100 "+this.font;Z$c=Z$c.replace(Z$f._fontSizeReg,Z$b),this.borderColor&&(Z$c+=" 1 "+this.borderColor),this._ctx.font=Z$c,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,Z$J.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var Z$d=this._ctx.measureText(this.char);Z$d||(Z$d={width:16});var Z$e=Z$d.width+1;this._ctx.lineTo(Z$e,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},Z$b.onresize=function(Z$a,Z$b){this._w=Z$a,this._h=Z$b,this._allowMerageInAtlas=!0},Z$b.clearAtlasSource=function(){},Z$d(0,Z$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),Z$d(0,Z$b,"atlasSource",function(){return this.canvas}),Z$d(0,Z$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(Z$a){this._enableMerageInAtlas=Z$a}),Z$f.createOneChar=function(Z$a,Z$b){return new Z$f(Z$a,Z$b)},Z$f._fontSizeReg=new RegExp("\\d+(?=px)","g"),Z$f}(),Z$Wa=function(Z$a){function Z$l(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){void 0===Z$c&&(Z$c=6408),void 0===Z$d&&(Z$d=5121),void 0===Z$e&&(Z$e=34041),void 0===Z$f&&(Z$f=!1),void 0===Z$i&&(Z$i=!1),void 0===Z$j&&(Z$j=-1),void 0===Z$k&&(Z$k=1),Z$l.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=Z$a,this._h=Z$b,this._surfaceFormat=Z$c,this._surfaceType=Z$d,this._depthStencilFormat=Z$e,this._mipMap=Z$f,this._repeat=Z$i,this._minFifter=Z$j,this._magFifter=Z$k}Z$o(Z$l,"laya.webgl.resource.WebGLRenderTarget",Z$c);var Z$b=Z$l.prototype;return Z$b.recreateResource=function(){var Z$a=Z$wa.mainContext;this._frameBuffer||(this._frameBuffer=Z$a.createFramebuffer()),this._source||(this._source=Z$a.createTexture());var Z$b=Z$xa.curBindTexTarget,Z$c=Z$xa.curBindTexValue;Z$xa.bindTexture(Z$a,3553,this._source),Z$a.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var Z$d=this._minFifter,Z$e=this._magFifter,Z$f=this._repeat?10497:33071,Z$i=Z$m.isPOT(this._w,this._h);if(Z$i?(this._mipMap?-1!==Z$d||(Z$d=9987):-1!==Z$d||(Z$d=9729),-1!==Z$e||(Z$e=9729),Z$a.texParameteri(3553,10241,Z$d),Z$a.texParameteri(3553,10240,Z$e),Z$a.texParameteri(3553,10242,Z$f),Z$a.texParameteri(3553,10243,Z$f),this._mipMap&&Z$a.generateMipmap(3553)):(-1!==Z$d||(Z$d=9729),-1!==Z$e||(Z$e=9729),Z$a.texParameteri(3553,10241,Z$d),Z$a.texParameteri(3553,10240,Z$e),Z$a.texParameteri(3553,10242,33071),Z$a.texParameteri(3553,10243,33071)),Z$a.bindFramebuffer(36160,this._frameBuffer),Z$a.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=Z$a.createRenderbuffer()),Z$a.bindRenderbuffer(36161,this._depthStencilBuffer),Z$a.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:Z$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:Z$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:Z$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}Z$a.bindFramebuffer(36160,null),Z$b&&Z$c&&Z$xa.bindTexture(Z$a,Z$b,Z$c),Z$a.bindRenderbuffer(36161,null),Z$i&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},Z$b.disposeResource=function(){this._frameBuffer&&(Z$wa.mainContext.deleteTexture(this._source),Z$wa.mainContext.deleteFramebuffer(this._frameBuffer),Z$wa.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},Z$d(0,Z$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),Z$d(0,Z$b,"frameBuffer",function(){return this._frameBuffer}),Z$l}(),Z$Xa=function(Z$a){function Z$j(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this.offsetX=0,this.offsetY=0,Z$j.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=Z$f,this.canvas=Z$a,this._ctx=Z$a.getContext("2d",void 0),this._w=Z$d,this._h=Z$e,this.offsetX=Z$b,this.offsetY=Z$c,this.src=Z$i,this._enableMerageInAtlas=!0,Z$Q.enabled&&this._w<Z$Q.atlasLimitWidth&&this._h<Z$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}Z$o(Z$j,"laya.webgl.resource.WebGLSubImage",Z$c);var Z$b=Z$j.prototype;return Z$y.imps(Z$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),Z$b.size=function(Z$a,Z$b){this._w=Z$a,this._h=Z$b,this._ctx&&this._ctx.size(Z$a,Z$b),this.canvas&&(this.canvas.height=Z$b,this.canvas.width=Z$a)},Z$b.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},Z$b.createWebGlTexture=function(){var Z$a=Z$wa.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var Z$b=this._source=Z$a.createTexture(),Z$c=Z$xa.curBindTexTarget,Z$d=Z$xa.curBindTexValue;Z$xa.bindTexture(Z$a,3553,Z$b),Z$a.pixelStorei(37441,!0),Z$a.texImage2D(3553,0,6408,6408,5121,this.canvas),Z$a.pixelStorei(37441,!1);var Z$e=this.minFifter,Z$f=this.magFifter,Z$i=this.repeat?10497:33071,Z$j=Z$m.isPOT(this.width,this.height);Z$j?(this.mipmap?-1!==Z$e||(Z$e=9987):-1!==Z$e||(Z$e=9729),-1!==Z$f||(Z$f=9729),Z$a.texParameteri(3553,10240,Z$f),Z$a.texParameteri(3553,10241,Z$e),Z$a.texParameteri(3553,10242,Z$i),Z$a.texParameteri(3553,10243,Z$i),this.mipmap&&Z$a.generateMipmap(3553)):(-1!==Z$e||(Z$e=9729),-1!==Z$f||(Z$f=9729),Z$a.texParameteri(3553,10241,Z$e),Z$a.texParameteri(3553,10240,Z$f),Z$a.texParameteri(3553,10242,33071),Z$a.texParameteri(3553,10243,33071)),Z$c&&Z$d&&Z$xa.bindTexture(Z$a,Z$c,Z$d),this.canvas=null,Z$j&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},Z$b.disposeResource=function(){Z$Q.enabled&&this._allowMerageInAtlas||!this._source||(Z$wa.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},Z$b.clearAtlasSource=function(){},Z$d(0,Z$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),Z$d(0,Z$b,"atlasSource",function(){return this.canvas}),Z$d(0,Z$b,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(Z$a){this._allowMerageInAtlas=Z$a}),Z$j}(),Z$Ya=function(Z$a){function Z$l(Z$a,Z$b,Z$c,Z$d){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,Z$l.__super.call(this),!Z$a||!Z$b)throw"Shader Error";this._id=++Z$l._count,this._vs=Z$a,this._ps=Z$b,this._nameMap=Z$d||{},null!=Z$c&&(Z$l.sharders[Z$c]=this)}Z$o(Z$l,"laya.webgl.shader.Shader",Z$La);var Z$b=Z$l.prototype;return Z$b.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},Z$b.disposeResource=function(){Z$wa.mainContext.deleteShader(this._vshader),Z$wa.mainContext.deleteShader(this._pshader),Z$wa.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},Z$b._compile=function(){if(!Z$wa.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var Z$a=[this._vs,this._ps],Z$b=Z$wa.mainContext;if(this._program=Z$b.createProgram(),this._vshader=Z$l._createShader(Z$b,Z$a[0],35633),this._pshader=Z$l._createShader(Z$b,Z$a[1],35632),Z$b.attachShader(this._program,this._vshader),Z$b.attachShader(this._program,this._pshader),Z$b.linkProgram(this._program),!Z$t.isConchApp&&!Z$b.getProgramParameter(this._program,35714))throw Z$b.getProgramInfoLog(this._program);var Z$c,Z$d,Z$e=0,Z$f=0;for(Z$f=Z$t.isConchApp?Z$b.getProgramParameterEx(this._vs,this._ps,"",35721):Z$b.getProgramParameter(this._program,35721),Z$e=0;Z$e<Z$f;Z$e++){var Z$i=null;Z$c={vartype:"attribute",glfun:null,ivartype:0,attrib:Z$i=Z$t.isConchApp?Z$b.getActiveAttribEx(this._vs,this._ps,"",Z$e):Z$b.getActiveAttrib(this._program,Z$e),location:Z$b.getAttribLocation(this._program,Z$i.name),name:Z$i.name,type:Z$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(Z$c)}var Z$j=0;for(Z$j=Z$t.isConchApp?Z$b.getProgramParameterEx(this._vs,this._ps,"",35718):Z$b.getProgramParameter(this._program,35718),Z$e=0;Z$e<Z$j;Z$e++){var Z$k=null;Z$k=Z$t.isConchApp?Z$b.getActiveUniformEx(this._vs,this._ps,"",Z$e):Z$b.getActiveUniform(this._program,Z$e),0<(Z$c={vartype:"uniform",glfun:null,ivartype:1,attrib:Z$i,location:Z$b.getUniformLocation(this._program,Z$k.name),name:Z$k.name,type:Z$k.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(Z$c.name=Z$c.name.substr(0,Z$c.name.length-3),Z$c.isArray=!0,Z$c.location=Z$b.getUniformLocation(this._program,Z$c.name)),this._params.push(Z$c)}for(Z$e=0,Z$d=this._params.length;Z$e<Z$d;Z$e++)if((Z$c=this._params[Z$e]).indexOfParams=Z$e,Z$c.index=1,Z$c.value=[Z$c.location,null],Z$c.codename=Z$c.name,Z$c.name=this._nameMap[Z$c.codename]?this._nameMap[Z$c.codename]:Z$c.codename,(this._paramsMap[Z$c.name]=Z$c)._this=this,Z$c.uploadedValue=[],"attribute"!==Z$c.vartype)switch(Z$c.type){case 5124:Z$c.fun=Z$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:Z$c.fun=Z$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:Z$c.fun=Z$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:Z$c.fun=Z$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:Z$c.fun=Z$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:Z$c.fun=this._uniform_sampler2D;break;case 35680:Z$c.fun=this._uniform_samplerCube;break;case 35676:Z$c.glfun=Z$b.uniformMatrix4fv,Z$c.fun=this._uniformMatrix4fv;break;case 35670:Z$c.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else Z$c.fun=this._attribute}},Z$b.getUniform=function(Z$a){return this._paramsMap[Z$a]},Z$b._attribute=function(Z$a,Z$b){var Z$c=Z$wa.mainContext,Z$d=Z$Na._enableAtributes,Z$e=Z$a.location;return Z$d[Z$e]||Z$c.enableVertexAttribArray(Z$e),Z$c.vertexAttribPointer(Z$e,Z$b[0],Z$b[1],Z$b[2],Z$b[3],Z$b[4]+this._offset),Z$d[Z$e]=Z$Na._bindVertexBuffer,1},Z$b._uniform1f=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b?(Z$wa.mainContext.uniform1f(Z$a.location,Z$c[0]=Z$b),1):0},Z$b._uniform1fv=function(Z$a,Z$b){if(Z$b.length<4){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]||Z$c[3]!==Z$b[3]?(Z$wa.mainContext.uniform1fv(Z$a.location,Z$b),Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2],Z$c[3]=Z$b[3],1):0}return Z$wa.mainContext.uniform1fv(Z$a.location,Z$b),1},Z$b._uniform_vec2=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]?(Z$wa.mainContext.uniform2f(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1]),1):0},Z$b._uniform_vec2v=function(Z$a,Z$b){if(Z$b.length<2){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]||Z$c[3]!==Z$b[3]?(Z$wa.mainContext.uniform2fv(Z$a.location,Z$b),Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2],Z$c[3]=Z$b[3],1):0}return Z$wa.mainContext.uniform2fv(Z$a.location,Z$b),1},Z$b._uniform_vec3=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]?(Z$wa.mainContext.uniform3f(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2]),1):0},Z$b._uniform_vec3v=function(Z$a,Z$b){return Z$wa.mainContext.uniform3fv(Z$a.location,Z$b),1},Z$b._uniform_vec4=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]||Z$c[3]!==Z$b[3]?(Z$wa.mainContext.uniform4f(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2],Z$c[3]=Z$b[3]),1):0},Z$b._uniform_vec4v=function(Z$a,Z$b){return Z$wa.mainContext.uniform4fv(Z$a.location,Z$b),1},Z$b._uniformMatrix2fv=function(Z$a,Z$b){return Z$wa.mainContext.uniformMatrix2fv(Z$a.location,!1,Z$b),1},Z$b._uniformMatrix3fv=function(Z$a,Z$b){return Z$wa.mainContext.uniformMatrix3fv(Z$a.location,!1,Z$b),1},Z$b._uniformMatrix4fv=function(Z$a,Z$b){return Z$wa.mainContext.uniformMatrix4fv(Z$a.location,!1,Z$b),1},Z$b._uniform1i=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b?(Z$wa.mainContext.uniform1i(Z$a.location,Z$c[0]=Z$b),1):0},Z$b._uniform1iv=function(Z$a,Z$b){return Z$wa.mainContext.uniform1iv(Z$a.location,Z$b),1},Z$b._uniform_ivec2=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]?(Z$wa.mainContext.uniform2i(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1]),1):0},Z$b._uniform_ivec2v=function(Z$a,Z$b){return Z$wa.mainContext.uniform2iv(Z$a.location,Z$b),1},Z$b._uniform_vec3i=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]?(Z$wa.mainContext.uniform3i(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2]),1):0},Z$b._uniform_vec3vi=function(Z$a,Z$b){return Z$wa.mainContext.uniform3iv(Z$a.location,Z$b),1},Z$b._uniform_vec4i=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]||Z$c[3]!==Z$b[3]?(Z$wa.mainContext.uniform4i(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2],Z$c[3]=Z$b[3]),1):0},Z$b._uniform_vec4vi=function(Z$a,Z$b){return Z$wa.mainContext.uniform4iv(Z$a.location,Z$b),1},Z$b._uniform_sampler2D=function(Z$a,Z$b){var Z$c=Z$wa.mainContext,Z$d=Z$a.uploadedValue;return null==Z$d[0]?(Z$d[0]=this._curActTexIndex,Z$c.uniform1i(Z$a.location,this._curActTexIndex),Z$c.activeTexture(Z$l._TEXTURES[this._curActTexIndex]),Z$xa.bindTexture(Z$c,3553,Z$b),this._curActTexIndex++,1):(Z$c.activeTexture(Z$l._TEXTURES[Z$d[0]]),Z$xa.bindTexture(Z$c,3553,Z$b),0)},Z$b._uniform_samplerCube=function(Z$a,Z$b){var Z$c=Z$wa.mainContext,Z$d=Z$a.uploadedValue;return null==Z$d[0]?(Z$d[0]=this._curActTexIndex,Z$c.uniform1i(Z$a.location,this._curActTexIndex),Z$c.activeTexture(Z$l._TEXTURES[this._curActTexIndex]),Z$xa.bindTexture(Z$c,34067,Z$b),this._curActTexIndex++,1):(Z$c.activeTexture(Z$l._TEXTURES[Z$d[0]]),Z$xa.bindTexture(Z$c,34067,Z$b),0)},Z$b._noSetValue=function(Z$a){console.log("no....:"+Z$a.name)},Z$b.uploadOne=function(Z$a,Z$b){this.activeResource(),Z$xa.UseProgram(this._program);var Z$c=this._paramsMap[Z$a];Z$c.fun.call(this,Z$c,Z$b)},Z$b.uploadTexture2D=function(Z$a){Z$G.shaderCall++;var Z$b=Z$wa.mainContext;Z$b.activeTexture(33984),Z$xa.bindTexture(Z$b,3553,Z$a)},Z$b.uploadTexture2D1=function(Z$a){Z$G.shaderCall++;var Z$b=Z$wa.mainContext;Z$b.activeTexture(33985),Z$xa.bindTexture(Z$b,3553,Z$a)},Z$b.upload=function(Z$a,Z$b){Z$La.activeShader=Z$La.bindShader=this,this._lastUseFrameCount===Z$G.loopCount||this.activeResource(),Z$xa.UseProgram(this._program),this._reCompile?(Z$b=this._params,this._reCompile=!1):Z$b=Z$b||this._params;Z$wa.mainContext;for(var Z$c,Z$d,Z$e=Z$b.length,Z$f=0,Z$i=0;Z$i<Z$e;Z$i++)null!==(Z$d=Z$a[(Z$c=Z$b[Z$i]).name])&&(Z$f+=Z$c.fun.call(this,Z$c,Z$d));Z$G.shaderCall+=Z$f},Z$b.uploadArray=function(Z$a,Z$b,Z$c){Z$La.activeShader=this,(Z$La.bindShader=this).activeResource(),Z$xa.UseProgram(this._program);this._params;for(var Z$d,Z$e,Z$f=0,Z$i=Z$b-2;0<=Z$i;Z$i-=2)(Z$e=this._paramsMap[Z$a[Z$i]])&&null!=(Z$d=Z$a[Z$i+1])&&(Z$c&&Z$c[Z$e.name]&&Z$c[Z$e.name].bind(),Z$f+=Z$e.fun.call(this,Z$e,Z$d));Z$G.shaderCall+=Z$f},Z$b.getParams=function(){return this._params},Z$l.getShader=function(Z$a){return Z$l.sharders[Z$a]},Z$l.create=function(Z$a,Z$b,Z$c,Z$d){return new Z$l(Z$a,Z$b,Z$c,Z$d)},Z$l.withCompile=function(Z$a,Z$b,Z$c,Z$d){if(Z$c&&Z$l.sharders[Z$c])return Z$l.sharders[Z$c];var Z$e=Z$l._preCompileShader[2e-4*Z$a];if(!Z$e)throw new Error("withCompile shader err!"+Z$a);return Z$e.createShader(Z$b,Z$c,Z$d)},Z$l.withCompile2D=function(Z$a,Z$b,Z$c,Z$d,Z$e){if(Z$d&&Z$l.sharders[Z$d])return Z$l.sharders[Z$d];var Z$f=Z$l._preCompileShader[2e-4*Z$a+Z$b];if(!Z$f)throw new Error("withCompile shader err!"+Z$a+" "+Z$b);return Z$f.createShader(Z$c,Z$d,Z$e)},Z$l.addInclude=function(Z$a,Z$b){Z$va.addInclude(Z$a,Z$b)},Z$l.preCompile=function(Z$a,Z$b,Z$c,Z$d){var Z$e=2e-4*Z$a;Z$l._preCompileShader[Z$e]=new Z$va(Z$e,Z$b,Z$c,Z$d)},Z$l.preCompile2D=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=2e-4*Z$a+Z$b;Z$l._preCompileShader[Z$f]=new Z$va(Z$f,Z$c,Z$d,Z$e)},Z$l._createShader=function(Z$a,Z$b,Z$c){var Z$d=Z$a.createShader(Z$c);return Z$a.shaderSource(Z$d,Z$b),Z$a.compileShader(Z$d),Z$d},Z$l._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],Z$l._count=0,Z$l._preCompileShader={},Z$l.SHADERNAME2ID=2e-4,Z$l.sharders=((Z$l.sharders=[]).length=32,Z$l.sharders),Z$i(Z$l,["nameKey",function(){return this.nameKey=new Z$H}]),Z$l}(),Z$Za=function(Z$a){function Z$b(){this._maxsize=0,this._upload=!0,this._uploadSize=0,Z$b.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}Z$o(Z$b,"laya.webgl.utils.Buffer2D",Z$a);var Z$c=Z$b.prototype;return Z$c.needSize=function(Z$a){var Z$b=this._byteLength;if(Z$a){var Z$c=this._byteLength+Z$a;Z$c<=this._buffer.byteLength||this._resizeBuffer(Z$c<<1,!0),this._byteLength=Z$c}return Z$b},Z$c._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),Z$G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Z$Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),Z$Na._gl.bufferSubData(this._bufferType,0,this._buffer)},Z$c._bufferSubData=function(Z$a,Z$b,Z$c){if(void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),this._maxsize=Math.max(this._maxsize,this._byteLength),Z$G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Z$Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),Z$b||Z$c){var Z$d=this._buffer.slice(Z$b,Z$c);Z$Na._gl.bufferSubData(this._bufferType,Z$a,Z$d)}else Z$Na._gl.bufferSubData(this._bufferType,Z$a,this._buffer)},Z$c._checkArrayUse=function(){},Z$c._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},Z$c._bind_subUpload=function(Z$a,Z$b,Z$c){return void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(Z$a,Z$b,Z$c),!0)},Z$c._resizeBuffer=function(Z$a,Z$b){if(Z$a<this._buffer.byteLength)return this;if(this.memorySize=Z$a,Z$b&&this._buffer&&0<this._buffer.byteLength){var Z$c=new ArrayBuffer(Z$a);new Uint8Array(Z$c).set(new Uint8Array(this._buffer),0),this._buffer=Z$c}else this._buffer=new ArrayBuffer(Z$a);return this._checkArrayUse(),this._upload=!0,this},Z$c.append=function(Z$a){this._upload=!0;var Z$b,Z$c;Z$b=Z$a.byteLength,Z$a instanceof Uint8Array?(this._resizeBuffer(this._byteLength+Z$b,!0),Z$c=new Uint8Array(this._buffer,this._byteLength)):Z$a instanceof Uint16Array?(this._resizeBuffer(this._byteLength+Z$b,!0),Z$c=new Uint16Array(this._buffer,this._byteLength)):Z$a instanceof Float32Array&&(this._resizeBuffer(this._byteLength+Z$b,!0),Z$c=new Float32Array(this._buffer,this._byteLength)),Z$c.set(Z$a,0),this._byteLength+=Z$b,this._checkArrayUse()},Z$c.appendU16Array=function(Z$a,Z$b){this._resizeBuffer(this._byteLength+2*Z$b,!0);for(var Z$c=new Uint16Array(this._buffer,this._byteLength,Z$b),Z$d=0;Z$d<Z$b;Z$d++)Z$c[Z$d]=Z$a[Z$d];this._byteLength+=2*Z$b,this._checkArrayUse()},Z$c.appendEx=function(Z$a,Z$b){this._upload=!0;var Z$c;Z$c=Z$a.byteLength,this._resizeBuffer(this._byteLength+Z$c,!0),new Z$b(this._buffer,this._byteLength).set(Z$a,0),this._byteLength+=Z$c,this._checkArrayUse()},Z$c.appendEx2=function(Z$a,Z$b,Z$c,Z$d){void 0===Z$d&&(Z$d=1),this._upload=!0;var Z$e,Z$f;Z$e=Z$c*Z$d,this._resizeBuffer(this._byteLength+Z$e,!0),Z$f=new Z$b(this._buffer,this._byteLength);var Z$i=0;for(Z$i=0;Z$i<Z$c;Z$i++)Z$f[Z$i]=Z$a[Z$i];this._byteLength+=Z$e,this._checkArrayUse()},Z$c.getBuffer=function(){return this._buffer},Z$c.setNeedUpload=function(){this._upload=!0},Z$c.getNeedUpload=function(){return this._upload},Z$c.upload=function(){var Z$a=this._bind_upload();return Z$Na._gl.bindBuffer(this._bufferType,null),Z$Na._bindActive[this._bufferType]=null,Z$La.activeShader=null,Z$a},Z$c.subUpload=function(Z$a,Z$b,Z$c){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0);var Z$d=this._bind_subUpload();return Z$Na._gl.bindBuffer(this._bufferType,null),Z$Na._bindActive[this._bufferType]=null,Z$La.activeShader=null,Z$d},Z$c.disposeResource=function(){Z$a.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},Z$c.clear=function(){this._byteLength=0,this._upload=!0},Z$d(0,Z$c,"bufferLength",function(){return this._buffer.byteLength}),Z$d(0,Z$c,"byteLength",null,function(Z$a){this._byteLength!==Z$a&&(Z$a<=this._buffer.byteLength||this._resizeBuffer(2*Z$a+256,!0),this._byteLength=Z$a)}),Z$b.__int__=function(Z$a){Z$ga.QuadrangleIB=Z$ga.create(35044),Z$sa.fillIBQuadrangle(Z$ga.QuadrangleIB,16)},Z$b.FLOAT32=4,Z$b.SHORT=2,Z$b}(Z$Na),Z$$a=(function(Z$b){function Z$c(Z$a){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,Z$c.__super.call(this,9)}Z$o(Z$c,"laya.webgl.shader.d2.value.GlowSV",Z$b);var Z$a=Z$c.prototype;Z$a.setValue=function(Z$a){Z$b.prototype.setValue.call(this,Z$a)},Z$a.clear=function(){Z$b.prototype.clear.call(this)}}(Z$Ra),function(Z$a){function Z$b(Z$a){Z$b.__super.call(this,64),this.defines.add(64)}Z$o(Z$b,"laya.webgl.shader.d2.value.TextSV",Z$a);var Z$c=Z$b.prototype;return Z$c.release=function(){(Z$b.pool[Z$b._length++]=this).clear()},Z$c.clear=function(){Z$a.prototype.clear.call(this)},Z$b.create=function(){return Z$b._length?Z$b.pool[--Z$b._length]:new Z$b(null)},Z$b.pool=[],Z$b._length=0,Z$b}(Z$Ra)),Z$_a=function(Z$a){function Z$e(Z$a,Z$b,Z$c,Z$d){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,Z$e.__super.call(this,Z$a,Z$b,Z$c,Z$d)}Z$o(Z$e,"laya.webgl.shader.d2.Shader2X",Z$a);var Z$b=Z$e.prototype;return Z$b.upload2dQuick1=function(Z$a){this.upload(Z$a,this._params2dQuick1||this._make2dQuick1())},Z$b._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var Z$a,Z$b=this._params,Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++)Z$a=Z$b[Z$c],(Z$t.isFlash||"size"!==Z$a.name&&"position"!==Z$a.name&&"texcoord"!==Z$a.name)&&this._params2dQuick1.push(Z$a)}return this._params2dQuick1},Z$b.disposeResource=function(){Z$a.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},Z$b.upload2dQuick2=function(Z$a){this.upload(Z$a,this._params2dQuick2||this._make2dQuick2())},Z$b._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var Z$a,Z$b=this._params,Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++)Z$a=Z$b[Z$c],(Z$t.isFlash||"size"!==Z$a.name)&&this._params2dQuick2.push(Z$a)}return this._params2dQuick2},Z$e.create=function(Z$a,Z$b,Z$c,Z$d){return new Z$e(Z$a,Z$b,Z$c,Z$d)},Z$e}(Z$Ya),Z$ga=function(Z$a){function Z$b(Z$a){this._uint8Array=null,this._uint16Array=null,void 0===Z$a&&(Z$a=35044),Z$b.__super.call(this),this._bufferUsage=Z$a,this._bufferType=34963,Z$t.isFlash||(this._buffer=new ArrayBuffer(8))}Z$o(Z$b,"laya.webgl.utils.IndexBuffer2D",Z$Za);var Z$c=Z$b.prototype;return Z$c._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},Z$c.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},Z$c.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},Z$c.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},Z$b.QuadrangleIB=null,Z$b.create=function(Z$a){return void 0===Z$a&&(Z$a=35044),new Z$b(Z$a)},Z$b}(),Z$ha=function(Z$a){function Z$c(Z$a,Z$b){this._floatArray32=null,this._vertexStride=0,Z$c.__super.call(this),this._vertexStride=Z$a,this._bufferUsage=Z$b,this._bufferType=34962,Z$t.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}Z$o(Z$c,"laya.webgl.utils.VertexBuffer2D",Z$a);var Z$b=Z$c.prototype;return Z$b.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},Z$b.bind=function(Z$a){Z$a&&Z$a._bind(),this._bind()},Z$b.insertData=function(Z$a,Z$b){this.getFloat32Array().set(Z$a,Z$b),this._upload=!0},Z$b.bind_upload=function(Z$a){Z$a._bind_upload()||Z$a._bind(),this._bind_upload()||this._bind()},Z$b._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},Z$b.disposeResource=function(){Z$a.prototype.disposeResource.call(this)},Z$b.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},Z$d(0,Z$b,"vertexStride",function(){return this._vertexStride}),Z$c.create=function(Z$a,Z$b){return void 0===Z$b&&(Z$b=35048),new Z$c(Z$a,Z$b)},Z$c}(Z$Za),Z$ab=function(Z$a){function Z$j(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===Z$c&&(Z$c=6408),void 0===Z$d&&(Z$d=!0),Z$j.__super.call(this,Z$a,Z$b),Z$a){if(this._format=Z$c,this._mipmap=Z$d,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof Z$a)this._url=Z$a,this._src=Z$a,this._image=new Z$p.window.Image,Z$b&&(Z$b.onload&&(this.onload=Z$b.onload),Z$b.onerror&&(this.onerror=Z$b.onerror),Z$b.onCreate&&Z$b.onCreate(this)),this._image.crossOrigin=Z$a&&0==Z$a.indexOf("data:")?null:"",Z$a&&(this._image.src=Z$a);else if(Z$a instanceof ArrayBuffer){this._src=Z$b,this._url=this._src;var Z$i=new Z$k(Z$a);Z$i.readUTFBytes(4),Z$i.readUTFBytes(2),Z$i.getInt16();Z$i.endian="bigEndian",this._w=Z$i.getInt16(),this._h=Z$i.getInt16();Z$i.getInt16(),Z$i.getInt16();this._image=new Uint8Array(Z$a,Z$i.pos),this._format=Z$wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,Z$Q.enabled&&this._w<Z$Q.atlasLimitWidth&&this._h<Z$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(Z$a instanceof Uint8Array))return this._src=Z$b,this._url=this._src,this._image=Z$a.source||Z$a,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=Z$b,this._url=this._src,this._w=Z$e,this._h=Z$f,this._image=Z$a,this._format=0===Z$c?Z$a.byteLength/(Z$e*Z$f)==4?6408:6407:Z$c}this._$5__enableMerageInAtlas=!0}}Z$o(Z$j,"laya.webgl.resource.WebGLImage",Z$r);var Z$b=Z$j.prototype;return Z$y.imps(Z$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),Z$b._init_=function(Z$a,Z$b){},Z$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var Z$a=Z$wa.mainContext,Z$b=this._source=Z$a.createTexture(),Z$c=Z$xa.curBindTexTarget,Z$d=Z$xa.curBindTexValue;Z$xa.bindTexture(Z$a,3553,Z$b);var Z$e=this.minFifter,Z$f=this.magFifter,Z$i=this.repeat?10497:33071,Z$j=Z$m.isPOT(this._w,this._h),Z$k=!1;switch(Z$j?(this.mipmap?-1!==Z$e||(Z$e=9987):-1!==Z$e||(Z$e=9729),-1!==Z$f||(Z$f=9729),Z$a.texParameteri(3553,10241,Z$e),Z$a.texParameteri(3553,10240,Z$f),Z$a.texParameteri(3553,10242,Z$i),Z$a.texParameteri(3553,10243,Z$i),this.mipmap&&Z$a.generateMipmap(3553)):(-1!==Z$e||(Z$e=9729),-1!==Z$f||(Z$f=9729),Z$a.texParameteri(3553,10241,Z$e),Z$a.texParameteri(3553,10240,Z$f),Z$a.texParameteri(3553,10242,33071),Z$a.texParameteri(3553,10243,33071)),Z$a.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&Z$a.pixelStorei(Z$a.UNPACK_ALIGNMENT,1),Z$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&Z$a.pixelStorei(Z$a.UNPACK_ALIGNMENT,1),Z$a.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:Z$k=!0,Z$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case Z$wa.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:Z$k=!0,Z$a.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}Z$a.pixelStorei(37441,!1),Z$c&&Z$d&&Z$xa.bindTexture(Z$a,Z$c,Z$d),this.uri||(this.uri=this._url),Z$k?this.memorySize=this._image.length:Z$j&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},Z$b.recreateResource=function(){var Z$a=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var Z$b=this;this._image=new Z$p.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(Z$b._needReleaseAgain)return Z$b._needReleaseAgain=!1,Z$b._image.onload=null,void(Z$b._image=null);Z$b._allowMerageInAtlas&&Z$b._enableMerageInAtlas?(Z$a.memorySize=0,Z$a._recreateLock=!1):Z$b._createWebGlTexture(),Z$b.completeCreate()},this._image.src=this._src}},Z$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&Z$wa.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},Z$b.onresize=function(){this._w=this._image.width,this._h=this._image.height,Z$Q.enabled&&this._w<Z$Q.atlasLimitWidth&&this._h<Z$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},Z$b.clearAtlasSource=function(){this._image=null},Z$d(0,Z$b,"format",function(){return this._format}),Z$d(0,Z$b,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(Z$a){this._$5__enableMerageInAtlas=Z$a}),Z$d(0,Z$b,"mipmap",function(){return this._mipmap}),Z$d(0,Z$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),Z$d(0,Z$b,"atlasSource",function(){return this._image}),Z$d(0,Z$b,"onload",null,function(Z$a){var Z$b=this;this._onload=Z$a,this._image&&(this._image.onload=null!=this._onload?function(){Z$b.onresize(),Z$b._onload()}:null)}),Z$d(0,Z$b,"onerror",null,function(Z$a){var Z$b=this;this._onerror=Z$a,this._image&&(this._image.onerror=null!=this._onerror?function(){Z$b._onerror()}:null)}),Z$j}();Z$y.__init([Z$pa,Z$P,Z$za,Z$va])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(Z$a,Z$b){"use strict";for(var Z$c in Object.defineProperty(Z$b,"__esModule",{value:!0}),Laya){var Z$d=Laya[Z$c];Z$d&&Z$d.__isclass&&(Z$b[Z$c]=Z$d)}}),function(Z$f,Z$a,Z$d){Z$d.un,Z$d.uns;var Z$e=Z$d.static,Z$i=Z$d.class,Z$j=Z$d.getset,Z$k=(Z$d.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),Z$q=laya.utils.ClassUtils,Z$n=(laya.events.Event,laya.utils.HTMLChar),Z$l=laya.net.Loader,Z$m=(laya.display.Node,laya.maths.Rectangle),Z$o=laya.renders.Render,Z$p=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),Z$r=laya.utils.Stat,Z$L=laya.display.Text,Z$s=laya.resource.Texture,Z$t=laya.net.URL,Z$u=laya.utils.Utils,Z$v=function(){function Z$p(){}return Z$i(Z$p,"laya.html.utils.HTMLParse"),Z$p.parse=function(Z$a,Z$b,Z$c){Z$b=(Z$b="<root>"+(Z$b=Z$b.replace(/<br>/g,"<br/>"))+"</root>").replace(Z$p.spacePattern,Z$p.char255);var Z$d=Z$u.parseXMLFromString(Z$b);Z$p._parseXML(Z$a,Z$d.childNodes[0].childNodes,Z$c)},Z$p._parseXML=function(Z$a,Z$b,Z$c,Z$d){var Z$e=0,Z$f=0;if(Z$b.join||Z$b.item)for(Z$e=0,Z$f=Z$b.length;Z$e<Z$f;++Z$e)Z$p._parseXML(Z$a,Z$b[Z$e],Z$c,Z$d);else{var Z$i,Z$j,Z$k;if(3==Z$b.nodeType)return void(Z$a instanceof laya.html.dom.HTMLDivElement?(null==Z$b.nodeName&&(Z$b.nodeName="#text"),Z$j=Z$b.nodeName.toLowerCase(),0<(Z$k=Z$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(Z$i=Z$q.getInstance(Z$j))&&(Z$a.addChild(Z$i),Z$i.innerTEXT=Z$k.replace(Z$p.char255AndOneSpacePattern," "))):0<(Z$k=Z$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(Z$a.innerTEXT=Z$k.replace(Z$p.char255AndOneSpacePattern," ")));if("#comment"==(Z$j=Z$b.nodeName.toLowerCase()))return;if(Z$i=Z$q.getInstance(Z$j)){(Z$i=Z$a.addChild(Z$i)).URI=Z$c,Z$i.href=Z$d;var Z$l=Z$b.attributes;if(Z$l&&0<Z$l.length)for(Z$e=0,Z$f=Z$l.length;Z$e<Z$f;++Z$e){var Z$m=Z$l[Z$e],Z$n=Z$m.nodeName,Z$o=Z$m.value;Z$i._setAttributes(Z$n,Z$o)}Z$p._parseXML(Z$i,Z$b.childNodes,Z$c,Z$i.href)}else Z$p._parseXML(Z$a,Z$b.childNodes,Z$c,Z$d)}},Z$p.char255=String.fromCharCode(255),Z$p.spacePattern=/&nbsp;|&#160;/g,Z$p.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),Z$p}(),Z$w=function(){function Z$K(){}return Z$i(Z$K,"laya.html.utils.Layout"),Z$K.later=function(Z$a){null==Z$K._will&&(Z$K._will=[],Z$d.stage.frameLoop(1,null,function(){if(!(Z$K._will.length<1)){for(var Z$a=0;Z$a<Z$K._will.length;Z$a++)laya.html.utils.Layout.layout(Z$K._will[Z$a]);Z$K._will.length=0}})),Z$K._will.push(Z$a)},Z$K.layout=function(Z$a){if(!Z$a||!Z$a._style)return null;if(0==(512&Z$a._style._type))return null;Z$a.getStyle()._type&=-513;var Z$b=Z$K._multiLineLayout(Z$a);return Z$o.isConchApp&&Z$a.layaoutCallNative&&Z$a.layaoutCallNative(),Z$b},Z$K._multiLineLayout=function(Z$a){if(Z$L.RightToLeft)return Z$K._multiLineLayout2(Z$a);var Z$b=new Array;Z$a._addChildsToLayout(Z$b);var Z$c,Z$d,Z$e,Z$f,Z$i,Z$j=0,Z$k=Z$b.length,Z$l=Z$a._getCSSStyle(),Z$m=Z$l.letterSpacing,Z$n=Z$l.leading,Z$o=Z$l.lineHeight,Z$p=Z$l._widthAuto()||!Z$l.wordWrap,Z$q=Z$p?999999:Z$a.width,Z$r=(Z$a.height,0),Z$s=Z$l.italic?Z$l.fontSize/3:0,Z$t=Z$l._getAlign(),Z$u=Z$l._getValign(),Z$v=0!==Z$u||0!==Z$t||0!=Z$o,Z$w=0,Z$x=0,Z$y=0,Z$z=0,Z$A=new Array,Z$B=Z$A[0]=new Z$M,Z$C=!1,Z$D=!1;Z$B.h=0,Z$l.italic&&(Z$q-=Z$l.fontSize/3);var Z$E=0,Z$F=!0;function Z$G(){Z$B.y=Z$x,Z$x+=Z$B.h+Z$n,0==Z$B.h&&(Z$x+=Z$o),Z$B.mWidth=Z$E,Z$E=0,Z$B=new Z$M,Z$A.push(Z$B),Z$B.h=0,Z$C=!(Z$F=!(Z$w=0))}for(Z$j=0;Z$j<Z$k;Z$j++)if(null!=(Z$c=Z$b[Z$j]))if(Z$F=!1,Z$c instanceof laya.html.dom.HTMLBrElement)Z$G(),Z$B.y=Z$x;else{if(Z$c._isChar()){if((Z$f=Z$c).isWord)Z$C=Z$D||"\n"===Z$f.char,Z$B.wordStartIndex=Z$B.elements.length;else{if(Z$y=Z$f.width+Z$f.style.letterSpacin,0<Z$A.length&&Z$q<Z$w+Z$y&&0<Z$B.wordStartIndex){var Z$H;Z$H=Z$B.elements.length-Z$B.wordStartIndex+1,Z$B.elements.length=Z$B.wordStartIndex,Z$j-=Z$H,Z$G();continue}Z$C=!1,Z$E+=Z$f.width}Z$y=Z$f.width+Z$m,Z$z=Z$f.height,Z$D=!1,(Z$C=Z$C||Z$q<Z$w+Z$y)&&Z$G(),Z$B.minTextHeight=Math.min(Z$B.minTextHeight,Z$c.height)}else Z$d=Z$c._getCSSStyle(),Z$i=Z$c,Z$e=Z$d.padding,0===Z$d._getCssFloat()||(Z$v=!0),Z$C=Z$D||Z$d.lineElement,Z$y=Z$i.width*Z$i._style._tf.scaleX+Z$e[1]+Z$e[3]+Z$m,Z$z=Z$i.height*Z$i._style._tf.scaleY+Z$e[0]+Z$e[2],Z$D=Z$d.lineElement,(Z$C=Z$C||Z$q<Z$w+Z$y&&Z$d.wordWrap)&&Z$G();Z$B.elements.push(Z$c),Z$B.h=Math.max(Z$B.h,Z$z),Z$c.x=Z$w,Z$c.y=Z$x,Z$w+=Z$y,Z$B.w=Z$w-Z$m,Z$B.y=Z$x,Z$r=Math.max(Z$w+Z$s,Z$r)}else Z$F||(Z$w+=Z$K.DIV_ELEMENT_PADDING),Z$B.wordStartIndex=Z$B.elements.length;if(Z$x=Z$B.y+Z$B.h,Z$v){var Z$I=0,Z$J=Z$q;for(Z$p&&0<Z$a.width&&(Z$J=Z$a.width),Z$j=0,Z$k=Z$A.length;Z$j<Z$k;Z$j++)Z$A[Z$j].updatePos(0,Z$J,Z$j,Z$I,Z$t,Z$u,Z$o),Z$I+=Math.max(Z$o,Z$A[Z$j].h+Z$n);Z$x=Z$I}return Z$p&&(Z$a.width=Z$r),Z$x>Z$a.height&&(Z$a.height=Z$x),[Z$r,Z$x]},Z$K._multiLineLayout2=function(Z$a){var Z$b=new Array;Z$a._addChildsToLayout(Z$b);var Z$c,Z$d,Z$e,Z$f,Z$i,Z$j=0,Z$k=Z$b.length,Z$l=Z$a._getCSSStyle(),Z$m=Z$l.letterSpacing,Z$n=Z$l.leading,Z$o=Z$l.lineHeight,Z$p=Z$l._widthAuto()||!Z$l.wordWrap,Z$q=Z$p?999999:Z$a.width,Z$r=(Z$a.height,0),Z$s=Z$l.italic?Z$l.fontSize/3:0,Z$t=2-Z$l._getAlign(),Z$u=Z$l._getValign(),Z$v=0!==Z$u||0!=Z$t||0!=Z$o,Z$w=0,Z$x=0,Z$y=0,Z$z=0,Z$A=new Array,Z$B=Z$A[0]=new Z$M,Z$C=!1,Z$D=!1;Z$B.h=0,Z$l.italic&&(Z$q-=Z$l.fontSize/3);var Z$E=0,Z$F=!0;function Z$G(){Z$B.y=Z$x,Z$x+=Z$B.h+Z$n,0==Z$B.h&&(Z$x+=Z$o),Z$B.mWidth=Z$E,Z$E=0,Z$B=new Z$M,Z$A.push(Z$B),Z$B.h=0,Z$C=!(Z$F=!(Z$w=0))}for(Z$j=0;Z$j<Z$k;Z$j++)if(null!=(Z$c=Z$b[Z$j]))if(Z$F=!1,Z$c instanceof laya.html.dom.HTMLBrElement)Z$G(),Z$B.y=Z$x;else{if(Z$c._isChar()){if((Z$f=Z$c).isWord)Z$C=Z$D||"\n"===Z$f.char,Z$B.wordStartIndex=Z$B.elements.length;else{if(0<Z$A.length&&Z$q<Z$w+Z$y&&0<Z$B.wordStartIndex){var Z$H;Z$H=Z$B.elements.length-Z$B.wordStartIndex+1,Z$B.elements.length=Z$B.wordStartIndex,Z$j-=Z$H,Z$G();continue}Z$C=!1,Z$E+=Z$f.width}Z$y=Z$f.width+Z$m,Z$z=Z$f.height,Z$D=!1,(Z$C=Z$C||Z$q<Z$w+Z$y)&&Z$G(),Z$B.minTextHeight=Math.min(Z$B.minTextHeight,Z$c.height)}else Z$d=Z$c._getCSSStyle(),Z$i=Z$c,Z$e=Z$d.padding,0===Z$d._getCssFloat()||(Z$v=!0),Z$C=Z$D||Z$d.lineElement,Z$y=Z$i.width*Z$i._style._tf.scaleX+Z$e[1]+Z$e[3]+Z$m,Z$z=Z$i.height*Z$i._style._tf.scaleY+Z$e[0]+Z$e[2],Z$D=Z$d.lineElement,(Z$C=Z$C||Z$q<Z$w+Z$y&&Z$d.wordWrap)&&Z$G();Z$B.elements.push(Z$c),Z$B.h=Math.max(Z$B.h,Z$z),Z$c.x=Z$w,Z$c.y=Z$x,Z$w+=Z$y,Z$B.w=Z$w-Z$m,Z$B.y=Z$x,Z$r=Math.max(Z$w+Z$s,Z$r)}else Z$F||(Z$w+=Z$K.DIV_ELEMENT_PADDING),Z$B.wordStartIndex=Z$B.elements.length;if(Z$x=Z$B.y+Z$B.h,Z$v){var Z$I=0,Z$J=Z$q;for(Z$j=0,Z$k=Z$A.length;Z$j<Z$k;Z$j++)Z$A[Z$j].updatePos(0,Z$J,Z$j,Z$I,Z$t,Z$u,Z$o),Z$I+=Math.max(Z$o,Z$A[Z$j].h+Z$n);Z$x=Z$I}for(Z$p&&(Z$a.width=Z$r),Z$x>Z$a.height&&(Z$a.height=Z$x),Z$j=0,Z$k=Z$A.length;Z$j<Z$k;Z$j++)Z$A[Z$j].revertOrder(Z$q);return[Z$r,Z$x]},Z$K._will=null,Z$K.DIV_ELEMENT_PADDING=0,Z$K}(),Z$M=function(){function Z$a(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}Z$i(Z$a,"laya.html.utils.LayoutLine");var Z$b=Z$a.prototype;return Z$b.updatePos=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){var Z$j,Z$k=0;0<this.elements.length&&(Z$k=(Z$j=this.elements[this.elements.length-1]).x+Z$j.width-this.elements[0].x);var Z$l=0,Z$m=NaN;1===Z$e&&(Z$l=(Z$b-Z$k)/2),2===Z$e&&(Z$l=Z$b-Z$k),0===Z$i||0!=Z$f||(Z$f=1);for(var Z$n=0,Z$o=this.elements.length;Z$n<Z$o;Z$n++){var Z$p=(Z$j=this.elements[Z$n])._getCSSStyle();switch(0!==Z$l&&(Z$j.x+=Z$l),Z$p._getValign()){case 0:Z$j.y=Z$d;break;case 1:var Z$q=0;99999!=this.minTextHeight&&(Z$q=this.minTextHeight);var Z$r=(Z$q+Z$i)/2;Z$r=Math.max(Z$r,this.h),Z$m=(laya.html.dom.HTMLImageElement,Z$d+Z$r-Z$j.height),Z$j.y=Z$m;break;case 2:Z$j.y=Z$d+(Z$i-Z$j.height)}}},Z$b.revertOrder=function(Z$a){var Z$b;if(0<this.elements.length){var Z$c,Z$d=0;for(Z$c=this.elements.length,Z$d=0;Z$d<Z$c;Z$d++)(Z$b=this.elements[Z$d]).x=Z$a-Z$b.x-Z$b.width}},Z$a}(),Z$x=function(Z$c){function Z$b(){this.URI=null,this._href=null,Z$b.__super.call(this),this._text=Z$b._EMPTYTEXT,this.setStyle(new Z$k(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}Z$i(Z$b,"laya.html.dom.HTMLElement",Z$c);var Z$a=Z$b.prototype;return Z$a.layaoutCallNative=function(){var Z$a=0;if(this._childs&&0<(Z$a=this._childs.length))for(var Z$b=0;Z$b<Z$a;Z$b++)this._childs[Z$b].layaoutCallNative&&this._childs[Z$b].layaoutCallNative();var Z$c=this._getWords();Z$c?laya.html.dom.HTMLElement.fillWords(this,Z$c,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},Z$a.appendChild=function(Z$a){return this.addChild(Z$a)},Z$a._getWords2=function(){var Z$a=this._text.text;if(!Z$a||0===Z$a.length)return null;var Z$b,Z$c,Z$d=0,Z$e=0;if(this._text.drawWords)Z$c=this._text.drawWords;else{for(Z$e=(Z$b=Z$a.split(" ")).length-1,Z$c=[],Z$d=0;Z$d<Z$e;Z$d++)Z$c.push(Z$b[Z$d]," ");0<=Z$e&&Z$c.push(Z$b[Z$e]),this._text.drawWords=Z$c}var Z$f,Z$i=this._text.words;if(Z$i&&Z$i.length===Z$c.length)return Z$i;null===Z$i&&(this._text.words=Z$i=[]),Z$i.length=Z$c.length;var Z$j=this.style,Z$k=Z$j.font;for(Z$d=0,Z$e=Z$c.length;Z$d<Z$e;Z$d++){Z$f=Z$u.measureText(Z$c[Z$d],Z$k);var Z$l=Z$i[Z$d]=new Z$n(Z$c[Z$d],Z$f.width,Z$f.height||Z$j.fontSize,Z$j);if(1<Z$l.char.length&&(Z$l.charNum=Z$l.char),this.href){var Z$m=new Z$p;this.addChild(Z$m),Z$l.setSprite(Z$m)}}return Z$i},Z$a._getWords=function(){if(!Z$L.CharacterCache)return this._getWords2();var Z$a=this._text.text;if(!Z$a||0===Z$a.length)return null;var Z$b,Z$c=this._text.words;if(Z$c&&Z$c.length===Z$a.length)return Z$c;null===Z$c&&(this._text.words=Z$c=[]),Z$c.length=Z$a.length;for(var Z$d=this.style,Z$e=Z$d.font,Z$f=0,Z$i=Z$a.length;Z$f<Z$i;Z$f++)if(Z$b=Z$u.measureText(Z$a.charAt(Z$f),Z$e)){var Z$j=Z$c[Z$f]=new Z$n(Z$a.charAt(Z$f),Z$b.width,Z$b.height||Z$d.fontSize,Z$d);if(this.href){var Z$k=new Z$p;this.addChild(Z$k),Z$j.setSprite(Z$k)}}else console.warn("_getWords size is null"+Z$a.charAt(Z$f),Z$e);return Z$c},Z$a.showLinkSprite=function(){var Z$a=this._text.words;if(Z$a)for(var Z$b,Z$c,Z$d=[],Z$e=0;Z$e<Z$a.length;Z$e++)Z$c=Z$a[Z$e],(Z$b=new Z$p).graphics.drawRect(0,0,Z$c.width,Z$c.height,"#ff0000"),Z$b.width=Z$c.width,Z$b.height=Z$c.height,this.addChild(Z$b),Z$d.push(Z$b)},Z$a._layoutLater=function(){var Z$a=this.style;512&Z$a._type||(Z$a.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&Z$a.block?(Z$w.later(this),Z$a._type|=512):this.parent&&this.parent._layoutLater())},Z$a._setAttributes=function(Z$a,Z$b){switch(Z$a){case"style":return void this.style.cssText(Z$b);case"class":return void(this.className=Z$b)}Z$c.prototype._setAttributes.call(this,Z$a,Z$b)},Z$a.updateHref=function(){if(null!=this._href){var Z$a=this._getWords();if(Z$a)for(var Z$b,Z$c,Z$d=0;Z$d<Z$a.length;Z$d++)(Z$c=(Z$b=Z$a[Z$d]).getSprite())&&(Z$c.size(Z$b.width,Z$b.height),Z$c.on("click",this,this.onLinkHandler))}},Z$a.onLinkHandler=function(Z$a){switch(Z$a.type){case"click":for(var Z$b=this;Z$b;)Z$b.event("link",[this.href]),Z$b=Z$b.parent}},Z$a.formatURL=function(Z$a){return this.URI?Z$t.formatURL(Z$a,this.URI?this.URI.path:null):Z$a},Z$j(0,Z$a,"href",function(){return this._href},function(Z$a){null!=(this._href=Z$a)&&(this._getCSSStyle().underLine=1,this.updateHref())}),Z$j(0,Z$a,"color",null,function(Z$a){this.style.color=Z$a}),Z$j(0,Z$a,"onClick",null,function(Z$a){Z$d._runScript("fn=function(event){"+Z$a+";}"),this.on("click",this,void 0)}),Z$j(0,Z$a,"id",null,function(Z$a){Z$y.document.setElementById(Z$a,this)}),Z$j(0,Z$a,"innerTEXT",function(){return this._text.text},function(Z$a){this.text=Z$a}),Z$j(0,Z$a,"style",function(){return this._style}),Z$j(0,Z$a,"text",function(){return this._text.text},function(Z$a){this._text==Z$b._EMPTYTEXT?this._text={text:Z$a,words:null}:(this._text.text=Z$a,this._text.words&&(this._text.words.length=0)),Z$o.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),Z$j(0,Z$a,"parent",Z$c.prototype._$get_parent,function(Z$a){if(Z$a instanceof laya.html.dom.HTMLElement){var Z$b=Z$a;this.URI||(this.URI=Z$b.URI),this.style.inherit(Z$b.style)}Z$d.superSet(Z$p,this,"parent",Z$a)}),Z$j(0,Z$a,"className",null,function(Z$a){this.style.attrs(Z$y.document.styleSheets["."+Z$a])}),Z$b.fillWords=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){Z$a.graphics.clear();for(var Z$j=0,Z$k=Z$b.length;Z$j<Z$k;Z$j++){var Z$l=Z$b[Z$j];Z$a.graphics.fillText(Z$l.char,Z$l.x+Z$c,Z$l.y+Z$d,Z$e,Z$f,"left",Z$i)}},Z$b._EMPTYTEXT={text:null,words:null},Z$b}(Z$p),Z$b=(function(Z$a){function Z$b(){Z$b.__super.call(this),this.style.lineElement=!0,this.style.block=!0}Z$i(Z$b,"laya.html.dom.HTMLBrElement",Z$x)}(),function(Z$a){function Z$b(){this.contextHeight=NaN,this.contextWidth=NaN,Z$b.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}Z$i(Z$b,"laya.html.dom.HTMLDivElement",Z$a);var Z$c=Z$b.prototype;return Z$c.appendHTML=function(Z$a){Z$v.parse(this,Z$a,this.URI),this.layout()},Z$c._addChildsToLayout=function(Z$b){var Z$a=this._getWords();if(null==Z$a&&0==this._childs.length)return!1;Z$a&&Z$a.forEach(function(Z$a){Z$b.push(Z$a)});for(var Z$c=!0,Z$d=0,Z$e=this._childs.length;Z$d<Z$e;Z$d++){var Z$f=this._childs[Z$d];Z$c?Z$c=!1:Z$b.push(null),Z$f._addToLayout(Z$b)}return!0},Z$c._addToLayout=function(Z$a){this.layout()},Z$c.layout=function(){if(this.style){this.style._type|=512;var Z$a=Z$w.layout(this);if(Z$a){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new Z$m);var Z$b=this._$P.mHtmlBounds;Z$b.x=Z$b.y=0,Z$b.width=this.contextWidth=Z$a[0],Z$b.height=this.contextHeight=Z$a[1],this.setBounds(Z$b)}}},Z$j(0,Z$c,"height",function(){return this._height?this._height:this.contextHeight},Z$a.prototype._$set_height),Z$j(0,Z$c,"innerHTML",null,function(Z$a){this.destroyChildren(),this.appendHTML(Z$a)}),Z$j(0,Z$c,"width",function(){return this._width?this._width:this.contextWidth},function(Z$a){var Z$b=!1;Z$b=0===Z$a?Z$a!=this._width:Z$a!=this.width,Z$d.superSet(Z$x,this,"width",Z$a),Z$b&&this.layout()}),Z$b}(Z$x)),Z$y=function(Z$a){function Z$b(){this.all=new Array,this.styleSheets=Z$k.styleSheets,Z$b.__super.call(this)}Z$i(Z$b,"laya.html.dom.HTMLDocument",Z$x);var Z$c=Z$b.prototype;return Z$c.getElementById=function(Z$a){return this.all[Z$a]},Z$c.setElementById=function(Z$a,Z$b){this.all[Z$a]=Z$b},Z$e(Z$b,["document",function(){return this.document=new Z$b}]),Z$b}();(function(Z$a){function Z$b(){this._tex=null,this._url=null,this._renderArgs=[],Z$b.__super.call(this),this.style.block=!0}Z$i(Z$b,"laya.html.dom.HTMLImageElement",Z$x);var Z$c=Z$b.prototype;Z$c._addToLayout=function(Z$a){!this._style.absolute&&Z$a.push(this)},Z$c.render=function(Z$a,Z$b,Z$c){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(Z$r.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,Z$a.ctx.drawTexture2(Z$b,Z$c,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},Z$c.layaoutCallNative=function(){var Z$a=0;if(this._childs&&0<(Z$a=this._childs.length))for(var Z$b=0;Z$b<Z$a;Z$b++)this._childs[Z$b].layaoutCallNative&&this._childs[Z$b].layaoutCallNative()},Z$j(0,Z$c,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(Z$a){this._width!==Z$a&&(this._width=Z$a,this._style.width=Z$a,this.repaint())}),Z$j(0,Z$c,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(Z$a){this._height!==Z$a&&(this._height=Z$a,this._style.height=Z$a,this.repaint())}),Z$c.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),Z$l.clearCache(this,this._url),this._tex=null),Z$x.prototype.destroy.call(this)},Z$c.onloaded=function(){var Z$a=this._style;Z$a&&!Z$a.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),Z$a&&!Z$a.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),Z$o.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},Z$c._loadImageComplete=function(Z$a,Z$b,Z$c){if(!this._destroyed)if(null!=Z$c)if(Z$c instanceof ArrayBuffer){var Z$d=new DataView(Z$c);new laya.webgl.resource.WebGLImage(new Uint8Array(Z$c,8),Z$a,0,!1,Z$d.getUint32(0),Z$d.getUint32(4));this.onloaded()}else if(Z$c instanceof Z$s)Z$l.imgMgrSet[Z$a]=Z$b,Z$f.imgMgrLock(Z$a,Z$l.imgMgrSet[Z$a]),this._url=Z$a,this._tex=Z$c,Z$l.keepCache(this,Z$a),Z$l.cacheRes(Z$a,this._tex),this.onloaded();else{var Z$e=-1!=Z$a.indexOf(".png",Z$a.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(Z$c,Z$a,Z$e,!1,Z$c.width,Z$c.height);this.onloaded()}else this.event("error","Load image failed")},Z$j(0,Z$c,"src",null,function(Z$a){(Z$a=this.formatURL(Z$a),this._url!=Z$a)&&(null!=this._tex&&(Z$l.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=Z$a,(this._tex=Z$l.getRes(Z$a))?(Z$l.keepCache(this,Z$a),this.onloaded()):Z$f.imgMgrLoad(Z$a,this._loadImageComplete.bind(this),2,!1))})})(),function(Z$a){function Z$b(){this.type=null,Z$b.__super.call(this),this.visible=!1}Z$i(Z$b,"laya.html.dom.HTMLLinkElement",Z$a);var Z$c=Z$b.prototype;Z$c._onload=function(Z$a){switch(this.type){case"text/css":Z$k.parseCSS(Z$a,this.URI)}},Z$j(0,Z$c,"href",Z$a.prototype._$get_href,function(Z$a){var Z$b=this;Z$a=this.formatURL(Z$a),this.URI=new Z$t(Z$a);var Z$c=new Z$l;Z$c.once("complete",null,function(Z$a){Z$b._onload(Z$a)}),Z$c.load(Z$a,"text")}),Z$b._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(Z$x),function(Z$a){function Z$b(){Z$b.__super.call(this),this.visible=!1}Z$i(Z$b,"laya.html.dom.HTMLStyleElement",Z$a),Z$j(0,Z$b.prototype,"text",Z$a.prototype._$get_text,function(Z$a){Z$k.parseCSS(Z$a,null)})}(Z$x),function(Z$a){function Z$b(){Z$b.__super.call(this),this._getCSSStyle().valign="middle"}Z$i(Z$b,"laya.html.dom.HTMLIframeElement",Z$a),Z$j(0,Z$b.prototype,"href",Z$a.prototype._$get_href,function(Z$c){var Z$d=this;Z$c=this.formatURL(Z$c);var Z$a=new Z$l;Z$a.once("complete",null,function(Z$a){var Z$b=Z$d.URI;Z$d.URI=new Z$t(Z$c),Z$d.innerHTML=Z$a,!Z$b||(Z$d.URI=Z$b)}),Z$a.load(Z$c,"text")})}(Z$b)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(Z$a,Z$b){"use strict";for(var Z$c in Object.defineProperty(Z$b,"__esModule",{value:!0}),Laya){var Z$d=Laya[Z$c];Z$d&&Z$d.__isclass&&(Z$b[Z$c]=Z$d)}}),function(Z$e,Z$a,Z$r){Z$r.un,Z$r.uns;var Z$d=Z$r.static,Z$f=Z$r.class,Z$i=Z$r.getset,Z$c=(Z$r.__newvec,laya.display.Animation),Z$s=(laya.utils.Browser,laya.utils.ClassUtils),Z$j=laya.filters.ColorFilter,Z$k=laya.utils.Ease,Z$l=laya.events.Event,Z$m=(laya.events.EventDispatcher,laya.display.css.Font),Z$n=laya.display.FrameAnimation,Z$b=laya.display.Graphics,Z$o=laya.utils.Handler,Z$p=laya.display.Input,Z$u=laya.net.Loader,Z$q=(laya.display.Node,laya.maths.Point),Z$t=laya.maths.Rectangle,Z$v=laya.renders.Render,Z$w=laya.display.Sprite,Z$x=laya.display.Text,Z$y=laya.resource.Texture,Z$z=laya.utils.Tween,Z$A=laya.utils.Utils,Z$B=laya.utils.WeakObject;Z$r.interface("laya.ui.IItem"),Z$r.interface("laya.ui.ISelect"),Z$r.interface("laya.ui.IRender"),Z$r.interface("laya.ui.IComponent"),Z$r.interface("laya.ui.IBox","IComponent");var Z$C=function(){function Z$a(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return Z$f(Z$a,"laya.ui.LayoutStyle"),Z$d(Z$a,["EMPTY",function(){return this.EMPTY=new Z$a}]),Z$a}(),Z$D=function(){function Z$a(){}return Z$f(Z$a,"laya.ui.Styles"),Z$a.labelColor="#000000",Z$a.buttonStateNum=3,Z$a.scrollBarMinNum=15,Z$a.scrollBarDelayTime=500,Z$d(Z$a,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),Z$a}(),Z$E=function(){function Z$e(){}return Z$f(Z$e,"laya.ui.UIUtils"),Z$e.fillArray=function(Z$a,Z$b,Z$c){var Z$d=Z$a.concat();if(Z$b)for(var Z$e=Z$b.split(","),Z$f=0,Z$i=Math.min(Z$d.length,Z$e.length);Z$f<Z$i;Z$f++){var Z$j=Z$e[Z$f];Z$d[Z$f]="true"==Z$j||"false"!=Z$j&&Z$j,null!=Z$c&&(Z$d[Z$f]=Z$c(Z$j))}return Z$d},Z$e.toColor=function(Z$a){return Z$A.toHexColor(Z$a)},Z$e.gray=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!0),Z$b?Z$e.addFilter(Z$a,Z$e.grayFilter):Z$e.clearFilter(Z$a,Z$j)},Z$e.addFilter=function(Z$a,Z$b){var Z$c=Z$a.filters||[];Z$c.push(Z$b),Z$a.filters=Z$c},Z$e.clearFilter=function(Z$a,Z$b){var Z$c=Z$a.filters;if(null!=Z$c&&0<Z$c.length){for(var Z$d=Z$c.length-1;-1<Z$d;Z$d--){var Z$e=Z$c[Z$d];Z$r.__typeof(Z$e,Z$b)&&Z$c.splice(Z$d,1)}Z$a.filters=Z$c}},Z$e._getReplaceStr=function(Z$a){return Z$e.escapeSequence[Z$a]},Z$e.adptString=function(Z$a){return Z$a.replace(/\\(\w)/g,Z$e._getReplaceStr)},Z$e.getBindFun=function(Z$a){var Z$b=Z$e._funMap.get(Z$a);if(null==Z$b){var Z$c='"'+Z$a+'"',Z$d="(function(data){if(data==null)return;with(data){try{\nreturn "+(Z$c=Z$c.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";Z$b=Z$r._runScript(Z$d),Z$e._funMap.set(Z$a,Z$b)}return Z$b},Z$d(Z$e,["grayFilter",function(){return this.grayFilter=new Z$j([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new Z$B}]),Z$e}(),Z$F=function(){function Z$a(){}return Z$f(Z$a,"UIConfig"),Z$a.touchScrollEnable=!0,Z$a.mouseWheelEnable=!0,Z$a.showButtons=!0,Z$a.popupBgColor="#000000",Z$a.popupBgAlpha=.5,Z$a.closeDialogOnSide=!0,Z$a}(),Z$G=function(Z$c){function Z$t(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,Z$t.__super.call(this),this._weakKeys=[]}Z$f(Z$t,"laya.ui.AutoBitmap",Z$c);var Z$a=Z$t.prototype;return Z$a.destroy=function(){if(Z$u.clearObject(this,this._weakKey),this._weakKeys){for(var Z$a=0,Z$b=this._weakKeys.length;Z$a<Z$b;++Z$a)Z$u.clearObject(this,this._weakKeys[Z$a]);this._weakKeys=null}Z$c.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},Z$a._setChanged=function(){this._isChanged||(this._isChanged=!0,Z$r.timer.callLater(this,this.changeSource))},Z$a.changeSource=function(){this._isChanged=!1;var Z$a=this._source;if(Z$a&&Z$a.bitmap){var Z$b=this.width,Z$c=this.height,Z$d=this._sizeGrid,Z$e=Z$a.sourceWidth,Z$f=Z$a.sourceHeight;if(!Z$d||Z$e===Z$b&&Z$f===Z$c)this.cleanByTexture(Z$a,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,Z$b,Z$c);else{Z$u.clearObject(this,this._weakKey),Z$a.$_GID||(Z$a.$_GID=Z$A.getGID());var Z$i=Z$a.$_GID+"."+Z$b+"."+Z$c+"."+Z$d.join("."),Z$j=Z$u.findObject(Z$i);if(Z$A.isOKCmdList(Z$j))return this._weakKey=Z$i,Z$u.keepObject(this,this._weakKey),void(this.cmds=Z$j);this.clear();var Z$k,Z$l,Z$m=Z$d[0],Z$n=Z$d[1],Z$o=Z$d[2],Z$p=Z$d[3],Z$q=Z$d[4],Z$r=!1;if(Z$b==Z$e&&(Z$p=Z$n=0),Z$c==Z$f&&(Z$m=Z$o=0),Z$b<Z$p+Z$n){var Z$s=Z$b;Z$r=!0,Z$b=Z$p+Z$n,this.save(),this.clipRect(0,0,Z$s,Z$c)}Z$p&&Z$m&&(Z$k=Z$t.getTexture(Z$a,0,0,Z$p,Z$m),Z$l=this._weakKeys[0],Z$k?(Z$l!=Z$k.weakKey&&(Z$u.clearObject(this,Z$l),Z$u.keepObject(this,Z$k.weakKey),this._weakKeys[0]=Z$k.weakKey),this.drawTexture(Z$k,0,0,Z$p,Z$m)):(Z$u.clearObject(this,Z$l),this._weakKeys[0]="")),Z$n&&Z$m&&(Z$k=Z$t.getTexture(Z$a,Z$e-Z$n,0,Z$n,Z$m),Z$l=this._weakKeys[1],Z$k?(Z$l!=Z$k.weakKey&&(Z$u.clearObject(this,Z$l),Z$u.keepObject(this,Z$k.weakKey),this._weakKeys[1]=Z$k.weakKey),this.drawTexture(Z$k,Z$b-Z$n,0,Z$n,Z$m)):(Z$u.clearObject(this,Z$l),this._weakKeys[1]="")),Z$p&&Z$o&&(Z$k=Z$t.getTexture(Z$a,0,Z$f-Z$o,Z$p,Z$o),Z$l=this._weakKeys[2],Z$k?(Z$l!=Z$k.weakKey&&(Z$u.clearObject(this,Z$l),Z$u.keepObject(this,Z$k.weakKey),this._weakKeys[2]=Z$k.weakKey),this.drawTexture(Z$k,0,Z$c-Z$o,Z$p,Z$o)):(Z$u.clearObject(this,Z$l),this._weakKeys[2]="")),Z$n&&Z$o&&(Z$k=Z$t.getTexture(Z$a,Z$e-Z$n,Z$f-Z$o,Z$n,Z$o),Z$l=this._weakKeys[3],Z$k?(Z$l!=Z$k.weakKey&&(Z$u.clearObject(this,Z$l),Z$u.keepObject(this,Z$k.weakKey),this._weakKeys[3]=Z$k.weakKey),this.drawTexture(Z$k,Z$b-Z$n,Z$c-Z$o,Z$n,Z$o)):(Z$u.clearObject(this,Z$l),this._weakKeys[3]="")),Z$m&&(Z$k=Z$t.getTexture(Z$a,Z$p,0,Z$e-Z$p-Z$n,Z$m),Z$l=this._weakKeys[4],Z$k?(Z$l!=Z$k.weakKey&&(Z$u.clearObject(this,Z$l),Z$u.keepObject(this,Z$k.weakKey),this._weakKeys[4]=Z$k.weakKey),this.drawBitmap(Z$q,Z$k,Z$p,0,Z$b-Z$p-Z$n,Z$m)):(Z$u.clearObject(this,Z$l),this._weakKeys[4]="")),Z$o&&(Z$k=Z$t.getTexture(Z$a,Z$p,Z$f-Z$o,Z$e-Z$p-Z$n,Z$o),Z$l=this._weakKeys[5],Z$k?(Z$l!=Z$k.weakKey&&(Z$u.clearObject(this,Z$l),Z$u.keepObject(this,Z$k.weakKey),this._weakKeys[5]=Z$k.weakKey),this.drawBitmap(Z$q,Z$k,Z$p,Z$c-Z$o,Z$b-Z$p-Z$n,Z$o)):(Z$u.clearObject(this,Z$l),this._weakKeys[5]="")),Z$p&&(Z$k=Z$t.getTexture(Z$a,0,Z$m,Z$p,Z$f-Z$m-Z$o),Z$l=this._weakKeys[6],Z$k?(Z$l!=Z$k.weakKey&&(Z$u.clearObject(this,Z$l),Z$u.keepObject(this,Z$k.weakKey),this._weakKeys[6]=Z$k.weakKey),this.drawBitmap(Z$q,Z$k,0,Z$m,Z$p,Z$c-Z$m-Z$o)):(Z$u.clearObject(this,Z$l),this._weakKeys[6]="")),Z$n&&(Z$k=Z$t.getTexture(Z$a,Z$e-Z$n,Z$m,Z$n,Z$f-Z$m-Z$o),Z$l=this._weakKeys[7],Z$k?(Z$l!=Z$k.weakKey&&(Z$u.clearObject(this,Z$l),Z$u.keepObject(this,Z$k.weakKey),this._weakKeys[7]=Z$k.weakKey),this.drawBitmap(Z$q,Z$k,Z$b-Z$n,Z$m,Z$n,Z$c-Z$m-Z$o)):(Z$u.clearObject(this,Z$l),this._weakKeys[7]="")),Z$k=Z$t.getTexture(Z$a,Z$p,Z$m,Z$e-Z$p-Z$n,Z$f-Z$m-Z$o),Z$l=this._weakKeys[8],Z$k?(Z$l!=Z$k.weakKey&&(Z$u.clearObject(this,Z$l),Z$u.keepObject(this,Z$k.weakKey),this._weakKeys[8]=Z$k.weakKey),this.drawBitmap(Z$q,Z$k,Z$p,Z$m,Z$b-Z$p-Z$n,Z$c-Z$m-Z$o)):(Z$u.clearObject(this,Z$l),this._weakKeys[8]=""),Z$r&&this.restore(),this.autoCacheCmd&&!Z$v.isConchApp&&(Z$u.saveObject(Z$i,this.cmds,null),this._weakKey=Z$i,Z$u.keepObject(this,this._weakKey))}this._repaint()}},Z$a.drawBitmap=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$e&&(Z$e=0),void 0===Z$f&&(Z$f=0),Z$e<.1||Z$f<.1||(!Z$a||Z$b.width==Z$e&&Z$b.height==Z$f?this.drawTexture(Z$b,Z$c,Z$d,Z$e,Z$f):this.fillTexture(Z$b,Z$c,Z$d,Z$e,Z$f))},Z$a.clear=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$c.prototype.clear.call(this,!1)},Z$i(0,Z$a,"sizeGrid",function(){return this._sizeGrid},function(Z$a){this._sizeGrid=Z$a,this._setChanged()}),Z$i(0,Z$a,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(Z$a){this._width!=Z$a&&(this._width=Z$a,this._setChanged())}),Z$i(0,Z$a,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(Z$a){this._height!=Z$a&&(this._height=Z$a,this._setChanged())}),Z$i(0,Z$a,"source",function(){return this._source},function(Z$a){Z$a?(this._source=Z$a,this._setChanged()):(this._source=null,this.clear())}),Z$t.getTexture=function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$d<=0&&(Z$d=1),Z$e<=0&&(Z$e=1),Z$a.$_GID||(Z$a.$_GID=Z$A.getGID());var Z$f=Z$a.$_GID+"."+Z$b+"."+Z$c+"."+Z$d+"."+Z$e,Z$i=Z$u.findObject(Z$f);if((!Z$i||!Z$i.source)&&(Z$i=Z$y.createFromTexture(Z$a,Z$b,Z$c,Z$d,Z$e))){if(Z$a.alphaTexture){var Z$j=Z$a.width/Z$a.alphaTexture.width;Z$i.alphaTexture=Z$y.createFromTexture(Z$a.alphaTexture,Z$b/Z$j,Z$c/Z$j,Z$d/Z$j,Z$e/Z$j)}Z$u.saveObject(Z$f,Z$i),Z$i.weakKey=Z$f}return Z$i},Z$t}(Z$b),Z$H=(function(Z$a){function Z$b(){Z$b.__super.call(this)}Z$f(Z$b,"laya.ui.UIEvent",Z$l),Z$b.SHOW_TIP="showtip",Z$b.HIDE_TIP="hidetip"}(),function(Z$b){function Z$a(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,Z$a.__super.call(this),this._layout=Z$C.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}Z$f(Z$a,"laya.ui.Component",Z$b);var Z$c=Z$a.prototype;return Z$r.imps(Z$c,{"laya.ui.IComponent":!0}),Z$c.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},Z$c.preinitialize=function(){},Z$c.createChildren=function(){},Z$c.initialize=function(){},Z$c.callLater=function(Z$a,Z$b){Z$r.timer.callLater(this,Z$a,Z$b)},Z$c.runCallLater=function(Z$a){Z$r.timer.runCallLater(this,Z$a)},Z$c.commitMeasure=function(){},Z$c.changeSize=function(){this.event("resize")},Z$c.getLayout=function(){return this._layout===Z$C.EMPTY&&(this._layout=new Z$C),this._layout},Z$c._setLayoutEnabled=function(Z$a){this._layout&&this._layout.enable!=Z$a&&(this._layout.enable=Z$a,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},Z$c.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},Z$c.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},Z$c.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},Z$c.resetLayoutX=function(){var Z$a=this._layout;if(isNaN(Z$a.anchorX)||(this.pivotX=Z$a.anchorX*this.width),this.layoutEnabled){var Z$b=this.parent;Z$b&&(isNaN(Z$a.centerX)?isNaN(Z$a.left)?isNaN(Z$a.right)||(this.x=Math.round(Z$b.width-this.displayWidth-Z$a.right+this.pivotX*this.scaleX)):(this.x=Math.round(Z$a.left+this.pivotX*this.scaleX),isNaN(Z$a.right)||(this.width=(Z$b._width-Z$a.left-Z$a.right)/(this.scaleX||.01))):this.x=Math.round(.5*(Z$b.width-this.displayWidth)+Z$a.centerX+this.pivotX*this.scaleX))}},Z$c.resetLayoutY=function(){var Z$a=this._layout;if(isNaN(Z$a.anchorY)||(this.pivotY=Z$a.anchorY*this.height),this.layoutEnabled){var Z$b=this.parent;Z$b&&(isNaN(Z$a.centerY)?isNaN(Z$a.top)?isNaN(Z$a.bottom)||(this.y=Math.round(Z$b.height-this.displayHeight-Z$a.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(Z$a.top+this.pivotY*this.scaleY),isNaN(Z$a.bottom)||(this.height=(Z$b._height-Z$a.top-Z$a.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(Z$b.height-this.displayHeight)+Z$a.centerY+this.pivotY*this.scaleY))}},Z$c.onMouseOver=function(Z$a){Z$r.stage.event("showtip",this._toolTip)},Z$c.onMouseOut=function(Z$a){Z$r.stage.event("hidetip",this._toolTip)},Z$i(0,Z$c,"displayWidth",function(){return this.width*this.scaleX}),Z$i(0,Z$c,"width",function(){return this._width?this._width:this.measureWidth},function(Z$a){this._width!=Z$a&&(this._width=Z$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),Z$i(0,Z$c,"measureWidth",function(){var Z$a=0;this.commitMeasure();for(var Z$b=this.numChildren-1;-1<Z$b;Z$b--){var Z$c=this.getChildAt(Z$b);Z$c.visible&&(Z$a=Math.max(Z$c.x+Z$c.width*Z$c.scaleX,Z$a))}return Z$a}),Z$i(0,Z$c,"displayHeight",function(){return this.height*this.scaleY}),Z$i(0,Z$c,"height",function(){return this._height?this._height:this.measureHeight},function(Z$a){this._height!=Z$a&&(this._height=Z$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),Z$i(0,Z$c,"dataSource",function(){return this._dataSource},function(Z$a){for(var Z$b in this._dataSource=Z$a,this._dataSource)this.hasOwnProperty(Z$b)&&"function"!=typeof this[Z$b]&&(this[Z$b]=this._dataSource[Z$b])}),Z$i(0,Z$c,"scaleY",Z$b.prototype._$get_scaleY,function(Z$a){Z$r.superGet(Z$w,this,"scaleY")!=Z$a&&(Z$r.superSet(Z$w,this,"scaleY",Z$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),Z$i(0,Z$c,"measureHeight",function(){var Z$a=0;this.commitMeasure();for(var Z$b=this.numChildren-1;-1<Z$b;Z$b--){var Z$c=this.getChildAt(Z$b);Z$c.visible&&(Z$a=Math.max(Z$c.y+Z$c.height*Z$c.scaleY,Z$a))}return Z$a}),Z$i(0,Z$c,"scaleX",Z$b.prototype._$get_scaleX,function(Z$a){Z$r.superGet(Z$w,this,"scaleX")!=Z$a&&(Z$r.superSet(Z$w,this,"scaleX",Z$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),Z$i(0,Z$c,"top",function(){return this._layout.top},function(Z$a){Z$a!=this._layout.top&&(this.getLayout().top=Z$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),Z$i(0,Z$c,"bottom",function(){return this._layout.bottom},function(Z$a){Z$a!=this._layout.bottom&&(this.getLayout().bottom=Z$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),Z$i(0,Z$c,"left",function(){return this._layout.left},function(Z$a){Z$a!=this._layout.left&&(this.getLayout().left=Z$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),Z$i(0,Z$c,"right",function(){return this._layout.right},function(Z$a){Z$a!=this._layout.right&&(this.getLayout().right=Z$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),Z$i(0,Z$c,"centerX",function(){return this._layout.centerX},function(Z$a){Z$a!=this._layout.centerX&&(this.getLayout().centerX=Z$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),Z$i(0,Z$c,"centerY",function(){return this._layout.centerY},function(Z$a){Z$a!=this._layout.centerY&&(this.getLayout().centerY=Z$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),Z$i(0,Z$c,"anchorX",function(){return this._layout.anchorX},function(Z$a){Z$a!=this._layout.anchorX&&(this.getLayout().anchorX=Z$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),Z$i(0,Z$c,"anchorY",function(){return this._layout.anchorY},function(Z$a){Z$a!=this._layout.anchorY&&(this.getLayout().anchorY=Z$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),Z$i(0,Z$c,"tag",function(){return this._tag},function(Z$a){this._tag=Z$a}),Z$i(0,Z$c,"toolTip",function(){return this._toolTip},function(Z$a){this._toolTip!=Z$a&&(null!=(this._toolTip=Z$a)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),Z$i(0,Z$c,"comXml",function(){return this._comXml},function(Z$a){this._comXml=Z$a}),Z$i(0,Z$c,"gray",function(){return this._gray},function(Z$a){Z$a!==this._gray&&(this._gray=Z$a,Z$E.gray(this,Z$a))}),Z$i(0,Z$c,"disabled",function(){return this._disabled},function(Z$a){Z$a!==this._disabled&&(this.gray=this._disabled=Z$a,this.mouseEnabled=!Z$a)}),Z$a}(Z$w)),Z$I=function(Z$a){function Z$b(){this.lockLayer=null,this.popupEffect=function(Z$a){Z$a.scale(1,1),Z$z.from(Z$a,{x:Z$r.stage.width/2,y:Z$r.stage.height/2,scaleX:0,scaleY:0},300,Z$k.backOut,Z$o.create(this,this.doOpen,[Z$a]))},this.closeEffect=function(Z$a,Z$b){Z$z.to(Z$a,{x:Z$r.stage.width/2,y:Z$r.stage.height/2,scaleX:0,scaleY:0},300,Z$k.strongOut,Z$o.create(this,this.doClose,[Z$a,Z$b]))},Z$b.__super.call(this),this.maskLayer=new Z$w,this.popupEffectHandler=Z$o.create(this,this.popupEffect,null,!1),this.closeEffectHandler=Z$o.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,Z$r.stage.addChild(this),Z$r.stage.on("resize",this,this._onResize),Z$F.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}Z$f(Z$b,"laya.ui.DialogManager",Z$w);var Z$c=Z$b.prototype;return Z$c._closeOnSide=function(){var Z$a=this.getChildAt(this.numChildren-1);Z$a instanceof laya.ui.Dialog&&Z$a.close("side")},Z$c.setLockView=function(Z$a){this.lockLayer||(this.lockLayer=new Z$J,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(Z$r.stage.width,Z$r.stage.height)),this.lockLayer.removeChildren(),Z$a&&(Z$a.centerX=Z$a.centerY=0,this.lockLayer.addChild(Z$a))},Z$c._onResize=function(Z$a){var Z$b=this.maskLayer.width=Z$r.stage.width,Z$c=this.maskLayer.height=Z$r.stage.height;this.lockLayer&&this.lockLayer.size(Z$b,Z$c),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,Z$b,Z$c,Z$F.popupBgColor),this.maskLayer.alpha=Z$F.popupBgAlpha;for(var Z$d=this.numChildren-1;-1<Z$d;Z$d--){var Z$e=this.getChildAt(Z$d);Z$e.popupCenter&&this._centerDialog(Z$e)}},Z$c._centerDialog=function(Z$a){Z$a.x=Math.round((Z$r.stage.width-Z$a.width>>1)+Z$a.pivotX),Z$a.y=Math.round((Z$r.stage.height-Z$a.height>>1)+Z$a.pivotY)},Z$c.open=function(Z$a,Z$b,Z$c){void 0===Z$b&&(Z$b=!1),void 0===Z$c&&(Z$c=!1),Z$b&&this._closeAll(),Z$a.popupCenter&&this._centerDialog(Z$a),this.addChild(Z$a),(Z$a.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),Z$c&&null!=Z$a.popupEffect?Z$a.popupEffect.runWith(Z$a):this.doOpen(Z$a),this.event("open")},Z$c.doOpen=function(Z$a){Z$a.onOpened()},Z$c.lock=function(Z$a){this.lockLayer&&(Z$a?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},Z$c.close=function(Z$a,Z$b,Z$c){void 0===Z$c&&(Z$c=!1),Z$c&&null!=Z$a.closeEffect?Z$a.closeEffect.runWith([Z$a,Z$b]):this.doClose(Z$a,Z$b),this.event("close")},Z$c.doClose=function(Z$a,Z$b){Z$a.removeSelf(),Z$a.isModal&&this._checkMask(),Z$a.closeHandler&&Z$a.closeHandler.runWith(Z$b),Z$a.onClosed(Z$b)},Z$c.closeAll=function(){this._closeAll(),this.event("close")},Z$c._closeAll=function(){for(var Z$a=this.numChildren-1;-1<Z$a;Z$a--){var Z$b=this.getChildAt(Z$a);Z$b&&null!=Z$b.close&&this.doClose(Z$b)}},Z$c.getDialogsByGroup=function(Z$a){for(var Z$b=[],Z$c=this.numChildren-1;-1<Z$c;Z$c--){var Z$d=this.getChildAt(Z$c);Z$d&&Z$d.group===Z$a&&Z$b.push(Z$d)}return Z$b},Z$c.closeByGroup=function(Z$a){for(var Z$b=[],Z$c=this.numChildren-1;-1<Z$c;Z$c--){var Z$d=this.getChildAt(Z$c);Z$d&&Z$d.group===Z$a&&(Z$d.close(),Z$b.push(Z$d))}return Z$b},Z$c._checkMask=function(){this.maskLayer.removeSelf();for(var Z$a=this.numChildren-1;-1<Z$a;Z$a--){var Z$b=this.getChildAt(Z$a);if(Z$b&&Z$b.isModal)return void this.addChildAt(this.maskLayer,Z$a)}},Z$b}(),Z$J=function(Z$a){function Z$b(){Z$b.__super.call(this)}Z$f(Z$b,"laya.ui.Box",Z$a);var Z$c=Z$b.prototype;return Z$r.imps(Z$c,{"laya.ui.IBox":!0}),Z$i(0,Z$c,"dataSource",Z$a.prototype._$get_dataSource,function(Z$a){for(var Z$b in this._dataSource=Z$a){var Z$c=this.getChildByName(Z$b);Z$c?Z$c.dataSource=Z$a[Z$b]:this.hasOwnProperty(Z$b)&&"function"!=typeof this[Z$b]&&(this[Z$b]=Z$a[Z$b])}}),Z$b}(Z$H),Z$K=function(Z$b){function Z$c(Z$a,Z$b){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,Z$c.__super.call(this),this._labelColors=Z$D.buttonLabelColors,this._stateNum=Z$D.buttonStateNum,void 0===Z$b&&(Z$b=""),this.skin=Z$a,this.label=Z$b}Z$f(Z$c,"laya.ui.Button",Z$b);var Z$a=Z$c.prototype;return Z$r.imps(Z$a,{"laya.ui.ISelect":!0}),Z$a.destroy=function(Z$a){this.clearEvent(),Z$u.clearCache(this,this._skin),Z$u.clearObject(this,this._weakKey),void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(Z$a),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},Z$a.clearEvent=function(){this._skin&&Z$e.atalsNotify&&Z$e.atalsNotify.off(this._skin,this,this._setBtnSource)},Z$a.createChildren=function(){this.graphics=this._bitmap=new Z$G},Z$a.createText=function(){this._text||(this._text=new Z$x,this._text.overflow=Z$x.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},Z$a.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},Z$a.onMouse=function(Z$a){if(!1!==this.toggle||!this._selected)return"click"===Z$a.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=Z$c.stateMap[Z$a.type]))},Z$a.changeClips=function(){var Z$a=Z$u.getRes(this._skin);if(Z$a)if(this._skin&&""!=this._skin){Z$u.clearObject(this,this._weakKey);var Z$b=Z$a.sourceWidth,Z$c=Z$a.sourceHeight/this._stateNum;Z$a.$_GID||(Z$a.$_GID=Z$A.getGID());var Z$d=Z$a.$_GID+"-"+this._stateNum,Z$e=Z$u.findObject(Z$d);if(Z$A.isOkTextureList(Z$e)||(Z$e=null),Z$e)this._weakKey=Z$d,Z$u.keepObject(this,this._weakKey),this._sources=Z$e;else{if(this._sources=[],1===this._stateNum)this._sources.push(Z$a);else for(var Z$f=0;Z$f<this._stateNum;Z$f++){var Z$i=Z$y.createFromTexture(Z$a,0,Z$c*Z$f,Z$b,Z$c);if(Z$a.alphaTexture){var Z$j=Z$a.width/Z$a.alphaTexture.width;Z$i.alphaTexture=Z$y.createFromTexture(Z$a.alphaTexture,0/Z$j,Z$c*Z$f/Z$j,Z$b/Z$j,Z$c/Z$j)}this._sources.push(Z$i)}Z$u.saveObject(Z$d,this._sources),this._weakKey=Z$d,Z$u.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||Z$b,this._bitmap.height=this._height||Z$c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=Z$b)}else console.warn("lose skin ",this._skin,this.name,this.__className)},Z$a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var Z$a=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[Z$a]),this.label&&(this._text.color=this._labelColors[Z$a],this._strokeColors&&(this._text.strokeColor=this._strokeColors[Z$a]))},Z$a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},Z$i(0,Z$a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(Z$a){this.createText(),this._text.strokeColor=Z$a}),Z$i(0,Z$a,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),Z$i(0,Z$a,"skin",function(){return this._skin},function(Z$a){if(this._skin!=Z$a)if(this.clearEvent(),Z$u.clearCache(this,this._skin),this._skin=Z$a,Z$u.keepCache(this,this._skin),Z$u.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var Z$b=Z$e.resAtalsObj&&Z$e.resAtalsObj[this._skin];Z$b?(Z$e.atalsNotify&&Z$e.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=Z$b.sourceW),0==this.height&&(this.height=Z$b.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),Z$a._setBtnSource=function(Z$a,Z$b){Z$a===this._skin&&Z$b&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},Z$i(0,Z$a,"state",function(){return this._state},function(Z$a){this._state!=Z$a&&(this._state=Z$a,this._setStateChanged())}),Z$i(0,Z$a,"text",function(){return this.createText(),this._text}),Z$i(0,Z$a,"stateNum",function(){return this._stateNum},function(Z$a){"string"==typeof Z$a&&(Z$a=parseInt(Z$a)),this._stateNum!=Z$a&&(this._stateNum=Z$a<1?1:3<Z$a?3:Z$a,this.callLater(this.changeClips))}),Z$i(0,Z$a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(Z$a){this._strokeColors=Z$E.fillArray(Z$D.buttonLabelColors,Z$a,String),this._setStateChanged()}),Z$i(0,Z$a,"labelColors",function(){return this._labelColors.join(",")},function(Z$a){this._labelColors=Z$E.fillArray(Z$D.buttonLabelColors,Z$a,String),this._setStateChanged()}),Z$i(0,Z$a,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),Z$i(0,Z$a,"label",function(){return this._text?this._text.text:null},function(Z$a){(this._text||Z$a)&&(this.createText(),this._text.text!=Z$a&&(Z$a&&!this._text.parent&&this.addChild(this._text),this._text.text=(Z$a+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),Z$i(0,Z$a,"selected",function(){return this._selected},function(Z$a){this._selected!=Z$a&&(this._selected=Z$a,this.state=this._selected?2:0,this.event("change"))}),Z$i(0,Z$a,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(Z$a){this.createText(),this._text.padding=Z$E.fillArray(Z$D.labelPadding,Z$a,Number)}),Z$i(0,Z$a,"labelSize",function(){return this.createText(),this._text.fontSize},function(Z$a){this.createText(),this._text.fontSize=Z$a}),Z$i(0,Z$a,"labelStroke",function(){return this.createText(),this._text.stroke},function(Z$a){this.createText(),this._text.stroke=Z$a}),Z$i(0,Z$a,"labelBold",function(){return this.createText(),this._text.bold},function(Z$a){this.createText(),this._text.bold=Z$a}),Z$i(0,Z$a,"labelFont",function(){return this.createText(),this._text.font},function(Z$a){this.createText(),this._text.font=Z$a}),Z$i(0,Z$a,"labelAlign",function(){return this.createText(),this._text.align},function(Z$a){this.createText(),this._text.align=Z$a}),Z$i(0,Z$a,"clickHandler",function(){return this._clickHandler},function(Z$a){this._clickHandler=Z$a}),Z$i(0,Z$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(Z$a){this._bitmap.sizeGrid=Z$E.fillArray(Z$D.defaultSizeGrid,Z$a,Number)}),Z$i(0,Z$a,"width",Z$b.prototype._$get_width,function(Z$a){Z$r.superSet(Z$H,this,"width",Z$a),this._autoSize&&(this._bitmap.width=Z$a,this._text&&(this._text.width=Z$a))}),Z$i(0,Z$a,"height",Z$b.prototype._$get_height,function(Z$a){Z$r.superSet(Z$H,this,"height",Z$a),this._autoSize&&(this._bitmap.height=Z$a,this._text&&(this._text.height=Z$a))}),Z$i(0,Z$a,"dataSource",Z$b.prototype._$get_dataSource,function(Z$a){"number"==typeof(this._dataSource=Z$a)||"string"==typeof Z$a?this.label=Z$a+"":Z$r.superSet(Z$H,this,"dataSource",Z$a)}),Z$i(0,Z$a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(Z$a){this._bitmap._offset=Z$a?Z$E.fillArray([1,1],Z$a,Number):[]}),Z$d(Z$c,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),Z$c}(Z$H),Z$L=function(Z$b){function Z$d(Z$a,Z$b,Z$c){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,Z$d.__super.call(this),void 0===Z$b&&(Z$b=1),void 0===Z$c&&(Z$c=1),this._clipX=Z$b,this._clipY=Z$c,this.skin=Z$a}Z$f(Z$d,"laya.ui.Clip",Z$b);var Z$a=Z$d.prototype;return Z$a.destroy=function(Z$a){this.clearEvent(),this.clearLoad(),Z$u.clearCache(this,this._skin),Z$u.clearObject(this,this._weakKey),void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},Z$a.dispose=function(){this.destroy(!0),Z$r.loader.clearRes(this._skin)},Z$a.createChildren=function(){this.graphics=this._bitmap=new Z$G},Z$a._onDisplay=function(Z$a){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},Z$a.changeClip=function(){if(this._clipChanged=!1,this._skin){var Z$a=Z$u.getRes(this._skin);if(Z$a)this.loadComplete(this._skin,Z$a);else{if(Z$e.resAtalsObj&&Z$e.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=Z$o.create(this,this.loadComplete,[this._skin]),this._progress=null,Z$r.loader.load(this._skin,this._complete,this._progress)}}},Z$a.loadComplete=function(Z$a,Z$b){if(Z$a===this._skin&&Z$b){Z$u.clearObject(this,this._weakKey);var Z$c=this._clipWidth||Math.ceil(Z$b.sourceWidth/this._clipX),Z$d=this._clipHeight||Math.ceil(Z$b.sourceHeight/this._clipY),Z$e=this._skin+Z$c+Z$d,Z$f=Z$u.findObject(Z$e);if(Z$A.isOkTextureList(Z$f)||(Z$f=null),Z$f)this._weakKey=Z$e,Z$u.keepObject(this,this._weakKey),this._sources=Z$f;else{this._sources=[];for(var Z$i=0;Z$i<this._clipY;Z$i++)for(var Z$j=0;Z$j<this._clipX;Z$j++){var Z$k=Z$y.createFromTexture(Z$b,Z$c*Z$j,Z$d*Z$i,Z$c,Z$d);if(Z$b.alphaTexture){var Z$l=Z$b.width/Z$b.alphaTexture.width;Z$k.alphaTexture=Z$y.createFromTexture(Z$b.alphaTexture,Z$c*Z$j/Z$l,Z$d*Z$i/Z$l,Z$c/Z$l,Z$d/Z$l)}this._sources.push(Z$k)}Z$u.saveObject(Z$e,this._sources),this._weakKey=Z$e,Z$u.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},Z$a.play=function(Z$a,Z$b){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=-1),this._isPlaying=!0,this.index=Z$a,this._toIndex=Z$b,this._index++,Z$r.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},Z$a._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},Z$a.stop=function(){this._isPlaying=!1,Z$r.timer.clear(this,this._loop),this.event("complete")},Z$a._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},Z$i(0,Z$a,"interval",function(){return this._interval},function(Z$a){this._interval!=Z$a&&(this._interval=Z$a,this._isPlaying&&this.play())}),Z$a.clearEvent=function(){this._skin&&Z$e.atalsNotify&&Z$e.atalsNotify.off(this._skin,this,this._setBtnSource)},Z$a.clearLoad=function(){this._skin&&((this._complete||this._progress)&&Z$r.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},Z$i(0,Z$a,"skin",function(){return this._skin},function(Z$a){if(this._skin!=Z$a)if(this.clearLoad(),this.clearEvent(),Z$u.clearCache(this,this._skin),this._skin=Z$a){Z$u.keepCache(this,this._skin);var Z$b=Z$u.getRes(Z$a),Z$c=Z$e.resAtalsObj&&Z$e.resAtalsObj[this._skin];!Z$b&&Z$c?Z$e.atalsNotify&&Z$e.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),Z$a._setBtnSource=function(Z$a,Z$b){Z$a===this._skin&&Z$b&&(this.loadComplete(Z$a,Z$b),this.clearEvent())},Z$i(0,Z$a,"sources",function(){return this._sources},function(Z$a){this._sources=Z$a,this.index=this._index,this.event("loaded")}),Z$i(0,Z$a,"clipX",function(){return this._clipX},function(Z$a){this._clipX=Z$a||1,this._setClipChanged()}),Z$i(0,Z$a,"clipY",function(){return this._clipY},function(Z$a){this._clipY=Z$a||1,this._setClipChanged()}),Z$i(0,Z$a,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),Z$i(0,Z$a,"clipWidth",function(){return this._clipWidth},function(Z$a){this._clipWidth=Z$a,this._setClipChanged()}),Z$i(0,Z$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(Z$a){this._bitmap.sizeGrid=Z$E.fillArray(Z$D.defaultSizeGrid,Z$a,Number)}),Z$i(0,Z$a,"group",function(){return this._group},function(Z$a){Z$a&&this._skin&&Z$u.setGroup(this._skin,Z$a),this._group=Z$a}),Z$i(0,Z$a,"clipHeight",function(){return this._clipHeight},function(Z$a){this._clipHeight=Z$a,this._setClipChanged()}),Z$i(0,Z$a,"width",Z$b.prototype._$get_width,function(Z$a){Z$r.superSet(Z$H,this,"width",Z$a),this._bitmap.width=Z$a}),Z$i(0,Z$a,"height",Z$b.prototype._$get_height,function(Z$a){Z$r.superSet(Z$H,this,"height",Z$a),this._bitmap.height=Z$a}),Z$i(0,Z$a,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),Z$i(0,Z$a,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),Z$i(0,Z$a,"index",function(){return this._index},function(Z$a){this._index=Z$a,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[Z$a]),this.event("change")}),Z$i(0,Z$a,"autoPlay",function(){return this._autoPlay},function(Z$a){this._autoPlay!=Z$a&&((this._autoPlay=Z$a)?this.play():this.stop())}),Z$i(0,Z$a,"isPlaying",function(){return this._isPlaying},function(Z$a){this._isPlaying=Z$a}),Z$i(0,Z$a,"dataSource",Z$b.prototype._$get_dataSource,function(Z$a){"number"==typeof(this._dataSource=Z$a)&&Math.floor(Z$a)==Z$a||"string"==typeof Z$a?this.index=parseInt(Z$a):Z$r.superSet(Z$H,this,"dataSource",Z$a)}),Z$i(0,Z$a,"bitmap",function(){return this._bitmap}),Z$d}(Z$H),Z$M=function(Z$b){function Z$a(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,Z$a.__super.call(this)}Z$f(Z$a,"laya.ui.ColorPicker",Z$b);var Z$c=Z$a.prototype;return Z$c.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._colorPanel&&this._colorPanel.destroy(Z$a),this._colorButton&&this._colorButton.destroy(Z$a),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},Z$c.createChildren=function(){this.addChild(this._colorButton=new Z$K),this._colorPanel=new Z$J,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new Z$w),this._colorPanel.addChild(this._colorBlock=new Z$w),this._colorPanel.addChild(this._colorInput=new Z$p)},Z$c.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},Z$c.onPanelMouseDown=function(Z$a){Z$a.stopPropagation()},Z$c.changePanel=function(){this._panelChanged=!1;var Z$a=this._colorPanel.graphics;Z$a.clear(),Z$a.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(Z$a=this._colorTiles.graphics).clear();for(var Z$b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],Z$c=0;Z$c<12;Z$c++)for(var Z$d=0;Z$d<20;Z$d++){var Z$e=0;Z$e=0===Z$d?Z$b[Z$c]:1===Z$d?0:51*(((3*Z$c+Z$d/6)%3<<0)+3*(Z$c/6<<0))<<16|Z$d%6*51<<8|(Z$c<<0)%6*51;var Z$f=Z$E.toColor(Z$e);this._colors.push(Z$f);var Z$i=Z$d*this._gridSize,Z$j=Z$c*this._gridSize;Z$a.drawRect(Z$i,Z$j,this._gridSize,this._gridSize,Z$f,"#000000")}},Z$c.onColorButtonClick=function(Z$a){this._colorPanel.parent?this.close():this.open()},Z$c.open=function(){var Z$a=this.localToGlobal(new Z$q),Z$b=Z$a.x+this._colorPanel.width<=Z$r.stage.width?Z$a.x:Z$r.stage.width-this._colorPanel.width,Z$c=Z$a.y+this._colorButton.height;Z$c=Z$c+this._colorPanel.height<=Z$r.stage.height?Z$c:Z$a.y-this._colorPanel.height,this._colorPanel.pos(Z$b,Z$c),this._colorPanel.zOrder=1001,Z$r._currentStage.addChild(this._colorPanel),Z$r.stage.on("mousedown",this,this.removeColorBox)},Z$c.close=function(){Z$r.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},Z$c.removeColorBox=function(Z$a){this.close()},Z$c.onColorFieldKeyDown=function(Z$a){13==Z$a.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),Z$a.stopPropagation())},Z$c.onColorInputChange=function(Z$a){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},Z$c.onColorTilesClick=function(Z$a){this.selectedColor=this.getColorByMouse(),this.close()},Z$c.onColorTilesMouseMove=function(Z$a){this._colorInput.focus=!1;var Z$b=this.getColorByMouse();this._colorInput.text=Z$b,this.drawBlock(Z$b)},Z$c.getColorByMouse=function(){var Z$a=this._colorTiles.getMousePoint(),Z$b=Math.floor(Z$a.x/this._gridSize),Z$c=Math.floor(Z$a.y/this._gridSize);return this._colors[20*Z$c+Z$b]},Z$c.drawBlock=function(Z$a){var Z$b=this._colorBlock.graphics;Z$b.clear();var Z$c=Z$a||"#ffffff";Z$b.drawRect(0,0,50,20,Z$c,this._borderColor),Z$a||Z$b.drawLine(0,0,50,20,"#ff0000")},Z$c.changeColor=function(){var Z$a=this.graphics;Z$a.clear();var Z$b=this._selectedColor||"#000000";Z$a.drawRect(0,0,this._colorButton.width,this._colorButton.height,Z$b)},Z$c._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},Z$i(0,Z$c,"inputBgColor",function(){return this._inputBgColor},function(Z$a){this._inputBgColor=Z$a,this._setPanelChanged()}),Z$i(0,Z$c,"selectedColor",function(){return this._selectedColor},function(Z$a){this._selectedColor!=Z$a&&(this._selectedColor=this._colorInput.text=Z$a,this.drawBlock(Z$a),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",Z$l.EMPTY.setTo("change",this,this)))}),Z$i(0,Z$c,"skin",function(){return this._colorButton.skin},function(Z$a){this._colorButton.skin=Z$a,this.changeColor()}),Z$i(0,Z$c,"bgColor",function(){return this._bgColor},function(Z$a){this._bgColor=Z$a,this._setPanelChanged()}),Z$i(0,Z$c,"borderColor",function(){return this._borderColor},function(Z$a){this._borderColor=Z$a,this._setPanelChanged()}),Z$i(0,Z$c,"inputColor",function(){return this._inputColor},function(Z$a){this._inputColor=Z$a,this._setPanelChanged()}),Z$a}(Z$H),Z$N=function(Z$b){function Z$c(Z$a,Z$b){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,Z$c.__super.call(this),this._itemColors=Z$D.comboBoxItemColors,this.skin=Z$a,this.labels=Z$b}Z$f(Z$c,"laya.ui.ComboBox",Z$b);var Z$a=Z$c.prototype;return Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._button&&this._button.destroy(Z$a),this._list&&this._list.destroy(Z$a),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},Z$a.createChildren=function(){this.addChild(this._button=new Z$K),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},Z$a._createList=function(){this._list=new Z$X,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},Z$a._setListEvent=function(Z$a){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=Z$o.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},Z$a.onListDown=function(Z$a){Z$a.stopPropagation()},Z$a.onScrollBarDown=function(Z$a){Z$a.stopPropagation()},Z$a.onButtonMouseDown=function(Z$a){this.callLater(this.switchTo,[!this._isOpen])},Z$a.changeList=function(){this._listChanged=!1;var Z$a=this.width-2,Z$b=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:Z$a,height:this._itemHeight,fontSize:this._itemSize,color:Z$b}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},Z$a.onlistItemMouse=function(Z$a,Z$b){var Z$c=Z$a.type;if("mouseover"===Z$c||"mouseout"===Z$c){if(this._isCustomList)return;var Z$d=this._list.getCell(Z$b);if(!Z$d)return;var Z$e=Z$d.getChildByName("label");Z$e&&("mouseover"===Z$c?(Z$e.bgColor=this._itemColors[0],Z$e.color=this._itemColors[1]):(Z$e.bgColor=null,Z$e.color=this._itemColors[2]))}else"click"===Z$c&&(this.selectedIndex=Z$b,this.isOpen=!1)},Z$a.switchTo=function(Z$a){this.isOpen=Z$a},Z$a.changeOpen=function(){this.isOpen=!this._isOpen},Z$a.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var Z$a=this._list.graphics;Z$a.clear(),Z$a.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var Z$b=this._list.array||[],Z$c=Z$b.length=0,Z$d=this._labels.length;Z$c<Z$d;Z$c++)Z$b.push({label:this._labels[Z$c]});this._list.height=this._listHeight,this._list.array=Z$b},Z$a.changeSelected=function(){this._button.label=this.selectedLabel},Z$a._onStageMouseWheel=function(Z$a){this._list&&!this._list.contains(Z$a.target)&&this.removeList(null)},Z$a.removeList=function(Z$a){Z$r.stage.off("mousedown",this,this.removeList),Z$r.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},Z$i(0,Z$a,"selectedIndex",function(){return this._selectedIndex},function(Z$a){this._selectedIndex!=Z$a&&(this._selectedIndex=Z$a,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[Z$l.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),Z$i(0,Z$a,"measureHeight",function(){return this._button.height}),Z$i(0,Z$a,"skin",function(){return this._button.skin},function(Z$a){this._button.skin!=Z$a&&(this._button.skin=Z$a,this._listChanged=!0)}),Z$i(0,Z$a,"measureWidth",function(){return this._button.width}),Z$i(0,Z$a,"width",Z$b.prototype._$get_width,function(Z$a){Z$r.superSet(Z$H,this,"width",Z$a),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),Z$i(0,Z$a,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(Z$a){this.selectedIndex=this._labels.indexOf(Z$a)}),Z$i(0,Z$a,"labels",function(){return this._labels.join(",")},function(Z$a){0<this._labels.length&&(this.selectedIndex=-1),Z$a?this._labels=Z$a.split(","):this._labels.length=0,this._itemChanged=!0}),Z$i(0,Z$a,"height",Z$b.prototype._$get_height,function(Z$a){Z$r.superSet(Z$H,this,"height",Z$a),this._button.height=this._height}),Z$i(0,Z$a,"selectHandler",function(){return this._selectHandler},function(Z$a){this._selectHandler=Z$a}),Z$i(0,Z$a,"visibleNum",function(){return this._visibleNum},function(Z$a){this._visibleNum=Z$a,this._listChanged=!0}),Z$i(0,Z$a,"labelBold",function(){return this._button.text.bold},function(Z$a){this._button.text.bold=Z$a}),Z$i(0,Z$a,"itemColors",function(){return String(this._itemColors)},function(Z$a){this._itemColors=Z$E.fillArray(this._itemColors,Z$a,String),this._listChanged=!0}),Z$i(0,Z$a,"itemSize",function(){return this._itemSize},function(Z$a){this._itemSize=Z$a,this._listChanged=!0}),Z$i(0,Z$a,"scrollBar",function(){return this.list.scrollBar}),Z$i(0,Z$a,"isOpen",function(){return this._isOpen},function(Z$a){if(this._isOpen!=Z$a)if(this._isOpen=Z$a,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var Z$b=this.localToGlobal(Z$q.TEMP.setTo(0,0)),Z$c=Z$b.y+this._button.height;Z$c=Z$c+this._listHeight<=Z$r.stage.height?Z$c:Z$b.y-this._listHeight,this._list.pos(Z$b.x,Z$c),this._list.zOrder=1001,Z$r._currentStage.addChild(this._list),Z$r.stage.once("mousedown",this,this.removeList),Z$r.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),Z$i(0,Z$a,"scrollBarSkin",function(){return this._scrollBarSkin},function(Z$a){this._scrollBarSkin=Z$a}),Z$i(0,Z$a,"sizeGrid",function(){return this._button.sizeGrid},function(Z$a){this._button.sizeGrid=Z$a}),Z$i(0,Z$a,"button",function(){return this._button}),Z$i(0,Z$a,"list",function(){return this._list||this._createList(),this._list},function(Z$a){Z$a&&(Z$a.removeSelf(),this._isCustomList=!0,this._list=Z$a,this._setListEvent(Z$a),this._itemHeight=Z$a.getCell(0).height+Z$a.spaceY)}),Z$i(0,Z$a,"dataSource",Z$b.prototype._$get_dataSource,function(Z$a){"number"==typeof(this._dataSource=Z$a)&&Math.floor(Z$a)==Z$a||"string"==typeof Z$a?this.selectedIndex=parseInt(Z$a):Z$a instanceof Array?this.labels=Z$a.join(","):Z$r.superSet(Z$H,this,"dataSource",Z$a)}),Z$i(0,Z$a,"labelColors",function(){return this._button.labelColors},function(Z$a){this._button.labelColors!=Z$a&&(this._button.labelColors=Z$a)}),Z$i(0,Z$a,"labelPadding",function(){return this._button.text.padding.join(",")},function(Z$a){this._button.text.padding=Z$E.fillArray(Z$D.labelPadding,Z$a,Number)}),Z$i(0,Z$a,"labelSize",function(){return this._button.text.fontSize},function(Z$a){this._button.text.fontSize=Z$a}),Z$i(0,Z$a,"labelFont",function(){return this._button.text.font},function(Z$a){this._button.text.font=Z$a}),Z$i(0,Z$a,"stateNum",function(){return this._button.stateNum},function(Z$a){this._button.stateNum=Z$a}),Z$c}(Z$H),Z$O=function(Z$b){function Z$c(Z$a){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,Z$c.__super.call(this),this._showButtons=Z$F.showButtons,this._touchScrollEnable=Z$F.touchScrollEnable,this._mouseWheelEnable=Z$F.mouseWheelEnable,this.skin=Z$a,this.max=1}Z$f(Z$c,"laya.ui.ScrollBar",Z$b);var Z$a=Z$c.prototype;return Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),this.stopScroll(),this.target=null,Z$b.prototype.destroy.call(this,Z$a),this.upButton&&this.upButton.destroy(Z$a),this.downButton&&this.downButton.destroy(Z$a),this.slider&&this.slider.destroy(Z$a),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},Z$a.createChildren=function(){this.addChild(this.slider=new Z$P),this.addChild(this.upButton=new Z$K),this.addChild(this.downButton=new Z$K)},Z$a.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},Z$a.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},Z$a.onButtonMouseDown=function(Z$a){var Z$b=Z$a.currentTarget===this.upButton;this.slide(Z$b),Z$r.timer.once(Z$D.scrollBarDelayTime,this,this.startLoop,[Z$b]),Z$r.stage.once("mouseup",this,this.onStageMouseUp)},Z$a.startLoop=function(Z$a){Z$r.timer.frameLoop(1,this,this.slide,[Z$a])},Z$a.slide=function(Z$a){Z$a?this.value-=this._scrollSize:this.value+=this._scrollSize},Z$a.onStageMouseUp=function(Z$a){Z$r.timer.clear(this,this.startLoop),Z$r.timer.clear(this,this.slide)},Z$a.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},Z$a.changeSize=function(){Z$b.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},Z$a.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},Z$a.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},Z$a.setScroll=function(Z$a,Z$b,Z$c){this.runCallLater(this.changeSize),this.slider.setSlider(Z$a,Z$b,Z$c),this.slider.bar.visible=0<Z$b,!this._hide&&this.autoHide&&(this.visible=!1)},Z$a.onTargetMouseWheel=function(Z$a){this.value-=Z$a.delta*this._scrollSize,this.target=this._target},Z$a.onTargetMouseDown=function(Z$a){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new Z$q),this._lastPoint.setTo(Z$r.stage.mouseX,Z$r.stage.mouseY),Z$r.timer.clear(this,this.tweenMove),Z$z.clearTween(this),Z$r.stage.once("mouseup",this,this.onStageMouseUp2),Z$r.stage.once("mouseout",this,this.onStageMouseUp2),Z$r.timer.frameLoop(1,this,this.loop)},Z$a.loop=function(){var Z$a=Z$r.stage.mouseY,Z$b=Z$r.stage.mouseX;if(this._lastOffset=this.isVertical?Z$a-this._lastPoint.y:Z$b-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?Z$r.stage._canvasTransform.getScaleY():Z$r.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=Z$b,this._lastPoint.y=Z$a,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},Z$a.onStageMouseUp2=function(Z$a){if(Z$r.stage.off("mouseup",this,this.onStageMouseUp2),Z$r.stage.off("mouseout",this,this.onStageMouseUp2),Z$r.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?Z$z.to(this,{value:this.min},this.elasticBackTime,Z$k.sineOut,Z$o.create(this,this.elasticOver)):this._value>this.max&&Z$z.to(this,{value:this.max},this.elasticBackTime,Z$k.sineOut,Z$o.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?Z$r.stage.mouseY-this._lastPoint.y:Z$r.stage.mouseX-this._lastPoint.x);for(var Z$b=0,Z$c=Math.min(this._offsets.length,3),Z$d=0;Z$d<Z$c;Z$d++)Z$b+=this._offsets[this._offsets.length-1-Z$d];if(this._lastOffset=Z$b/Z$c,(Z$b=Math.abs(this._lastOffset))<2)return void this.event("end");60<Z$b&&(this._lastOffset=0<this._lastOffset?60:-60);var Z$e=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));Z$r.timer.frameLoop(1,this,this.tweenMove,[Z$e])}},Z$a.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&Z$z.to(this,{alpha:0},500),this.event("end")},Z$a.tweenMove=function(Z$a){this._lastOffset*=this.rollRatio;var Z$b=NaN;if(0<Z$a&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,Z$b=.5*-(this.min-Z$a-this.value),this._lastOffset>Z$b&&(this._lastOffset=Z$b)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,Z$b=.5*-(this.max+Z$a-this.value),this._lastOffset<Z$b&&(this._lastOffset=Z$b))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(Z$r.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?Z$z.to(this,{value:this.min},this.elasticBackTime,Z$k.sineOut,Z$o.create(this,this.elasticOver)):this._value>this.max?Z$z.to(this,{value:this.max},this.elasticBackTime,Z$k.sineOut,Z$o.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&Z$z.to(this,{alpha:0},500)}},Z$a.stopScroll=function(){this.onStageMouseUp2(null),Z$r.timer.clear(this,this.tweenMove),Z$z.clearTween(this)},Z$i(0,Z$a,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),Z$i(0,Z$a,"skin",function(){return this._skin},function(Z$a){this._skin!=Z$a&&(this._skin=Z$a,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),Z$i(0,Z$a,"max",function(){return this.slider.max},function(Z$a){this.slider.max=Z$a}),Z$i(0,Z$a,"showButtons",function(){return this._showButtons},function(Z$a){this._showButtons=Z$a,this.callLater(this.changeScrollBar)}),Z$i(0,Z$a,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),Z$i(0,Z$a,"min",function(){return this.slider.min},function(Z$a){this.slider.min=Z$a}),Z$i(0,Z$a,"value",function(){return this._value},function(Z$a){Z$a!==this._value&&(this._value=Z$a,this._isElastic||(this.slider._value!=Z$a&&(this.slider._value=Z$a,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),Z$i(0,Z$a,"isVertical",function(){return this.slider.isVertical},function(Z$a){this.slider.isVertical=Z$a}),Z$i(0,Z$a,"sizeGrid",function(){return this.slider.sizeGrid},function(Z$a){this.slider.sizeGrid=Z$a}),Z$i(0,Z$a,"scrollSize",function(){return this._scrollSize},function(Z$a){this._scrollSize=Z$a}),Z$i(0,Z$a,"dataSource",Z$b.prototype._$get_dataSource,function(Z$a){"number"==typeof(this._dataSource=Z$a)||"string"==typeof Z$a?this.value=Number(Z$a):Z$r.superSet(Z$H,this,"dataSource",Z$a)}),Z$i(0,Z$a,"thumbPercent",function(){return this._thumbPercent},function(Z$a){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),Z$a=1<=Z$a?.99:Z$a,this._thumbPercent=Z$a,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*Z$a,Z$D.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*Z$a,Z$D.scrollBarMinNum))}),Z$i(0,Z$a,"target",function(){return this._target},function(Z$a){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=Z$a)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),Z$i(0,Z$a,"hide",function(){return this._hide},function(Z$a){this._hide=Z$a,this.visible=!Z$a}),Z$i(0,Z$a,"touchScrollEnable",function(){return this._touchScrollEnable},function(Z$a){this._touchScrollEnable=Z$a,this.target=this._target}),Z$i(0,Z$a,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(Z$a){this._mouseWheelEnable=Z$a,this.target=this._target}),Z$i(0,Z$a,"tick",function(){return this.slider.tick},function(Z$a){this.slider.tick=Z$a}),Z$c}(Z$H),Z$P=function(Z$b){function Z$c(Z$a){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,Z$c.__super.call(this),this.skin=Z$a}Z$f(Z$c,"laya.ui.Slider",Z$b);var Z$a=Z$c.prototype;return Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._bg&&this._bg.destroy(Z$a),this._bar&&this._bar.destroy(Z$a),this._progress&&this._progress.destroy(Z$a),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},Z$a.createChildren=function(){this.addChild(this._bg=new Z$Q),this.addChild(this._bar=new Z$K)},Z$a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},Z$a.onBarMouseDown=function(Z$a){this._globalSacle||(this._globalSacle=new Z$q),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=Z$r.stage.mouseX,this._ty=Z$r.stage.mouseY,Z$r.stage.on("mousemove",this,this.mouseMove),Z$r.stage.once("mouseup",this,this.mouseUp),Z$r.stage.once("mouseout",this,this.mouseUp),this.showValueText()},Z$a.showValueText=function(){if(this.showLabel){var Z$a=laya.ui.Slider.label;this.addChild(Z$a),Z$a.textField.changeText(this._value+""),this.isVertical?(Z$a.x=this._bar.x+20,Z$a.y=.5*(this._bar.height-Z$a.height)+this._bar.y):(Z$a.y=this._bar.y-20,Z$a.x=.5*(this._bar.width-Z$a.width)+this._bar.x)}},Z$a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},Z$a.mouseUp=function(Z$a){Z$r.stage.off("mousemove",this,this.mouseMove),Z$r.stage.off("mouseup",this,this.mouseUp),Z$r.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},Z$a.mouseMove=function(Z$a){var Z$b=this._value;this.isVertical?(this._bar.y+=(Z$r.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(Z$r.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=Z$r.stage.mouseX,this._ty=Z$r.stage.mouseY;var Z$c=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*Z$c)/Z$c,this._value!=Z$b&&this.sendChangeEvent(),this.showValueText()},Z$a.sendChangeEvent=function(Z$a){void 0===Z$a&&(Z$a="change"),this.event(Z$a),this.changeHandler&&this.changeHandler.runWith(this._value)},Z$a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},Z$a.changeSize=function(){Z$b.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},Z$a.setSlider=function(Z$a,Z$b,Z$c){this._value=-1,this._min=Z$a,this._max=Z$a<Z$b?Z$b:Z$a,this.value=Z$c<Z$a?Z$a:Z$b<Z$c?Z$b:Z$c},Z$a.changeValue=function(){var Z$a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*Z$a)/Z$a,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var Z$b=this._max-this._min;0===Z$b&&(Z$b=1),this.isVertical?(this._bar.y=(this._value-this._min)/Z$b*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/Z$b*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},Z$a.onBgMouseDown=function(Z$a){var Z$b=this._bg.getMousePoint();this.isVertical?this.value=Z$b.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=Z$b.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},Z$i(0,Z$a,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),Z$i(0,Z$a,"skin",function(){return this._skin},function(Z$a){if(this._skin!=Z$a){this._skin=Z$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var Z$b=this._skin.replace(".png","$progress.png");Z$u.getRes(Z$b)&&(this._progress||(this.addChild(this._progress=new Z$Q),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=Z$b),this.setBarPoint(),this.callLater(this.changeValue)}}),Z$i(0,Z$a,"allowClickBack",function(){return this._allowClickBack},function(Z$a){this._allowClickBack!=Z$a&&((this._allowClickBack=Z$a)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),Z$i(0,Z$a,"max",function(){return this._max},function(Z$a){this._max!=Z$a&&(this._max=Z$a,this.callLater(this.changeValue))}),Z$i(0,Z$a,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),Z$i(0,Z$a,"tick",function(){return this._tick},function(Z$a){this._tick!=Z$a&&(this._tick=Z$a,this.callLater(this.changeValue))}),Z$i(0,Z$a,"sizeGrid",function(){return this._bg.sizeGrid},function(Z$a){this._bg.sizeGrid=Z$a,this._bar.sizeGrid=Z$a,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),Z$i(0,Z$a,"min",function(){return this._min},function(Z$a){this._min!=Z$a&&(this._min=Z$a,this.callLater(this.changeValue))}),Z$i(0,Z$a,"value",function(){return this._value},function(Z$a){if(this._value!=Z$a){var Z$b=this._value;this._value=Z$a,this.changeValue(),this._value!=Z$b&&this.sendChangeEvent()}}),Z$i(0,Z$a,"dataSource",Z$b.prototype._$get_dataSource,function(Z$a){"number"==typeof(this._dataSource=Z$a)||"string"==typeof Z$a?this.value=Number(Z$a):Z$r.superSet(Z$H,this,"dataSource",Z$a)}),Z$i(0,Z$a,"bar",function(){return this._bar}),Z$d(Z$c,["label",function(){return this.label=new Z$R}]),Z$c}(Z$H),Z$Q=function(Z$b){function Z$c(Z$a){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,Z$c.__super.call(this),this.skin=Z$a}Z$f(Z$c,"laya.ui.Image",Z$b);var Z$a=Z$c.prototype;return Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,Z$u.clearCache(this,this._skin)},Z$a.dispose=function(){this.destroy(!0),Z$u.clearCache(this,this._skin),this.clearEvent()},Z$a.createChildren=function(){this.graphics=this._bitmap=new Z$G},Z$a.setSource=function(Z$a,Z$b){Z$a===this._skin&&Z$b&&(this.source=Z$b,this.onCompResize(),this.clearEvent())},Z$a.clearEvent=function(){this._skin&&Z$e.atalsNotify&&Z$e.atalsNotify.off(this._skin,this,this.setSource)},Z$a.clearLoad=function(){this._skin&&((this._complete||this._progress)&&Z$r.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},Z$i(0,Z$a,"source",function(){return this._bitmap.source},function(Z$a){this._bitmap&&(this._bitmap.source=Z$a,this.event("loaded"),this.repaint())}),Z$i(0,Z$a,"dataSource",Z$b.prototype._$get_dataSource,function(Z$a){"string"==typeof(this._dataSource=Z$a)?this.skin=Z$a:Z$r.superSet(Z$H,this,"dataSource",Z$a)}),Z$i(0,Z$a,"measureHeight",function(){return this._bitmap.height}),Z$i(0,Z$a,"skin",function(){return this._skin},function(Z$a){if(this._skin!=Z$a)if(Z$u.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=Z$a){Z$u.keepCache(this,this._skin);var Z$b=Z$u.getRes(Z$a),Z$c=Z$e.resAtalsObj&&Z$e.resAtalsObj[this._skin];Z$b?(this.source=Z$b,this.onCompResize()):Z$c?(Z$e.atalsNotify&&Z$e.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=Z$c.sourceW),0==this.height&&(this.height=Z$c.sourceH)):(this._complete=Z$o.create(this,this.setSource,[this._skin]),this._progress=null,Z$r.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),Z$i(0,Z$a,"group",function(){return this._group},function(Z$a){Z$a&&this._skin&&Z$u.setGroup(this._skin,Z$a),this._group=Z$a}),Z$i(0,Z$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(Z$a){this._bitmap.sizeGrid=Z$E.fillArray(Z$D.defaultSizeGrid,Z$a,Number)}),Z$i(0,Z$a,"measureWidth",function(){return this._bitmap.width}),Z$i(0,Z$a,"width",Z$b.prototype._$get_width,function(Z$a){Z$r.superSet(Z$H,this,"width",Z$a),this._bitmap.width=0==Z$a?1e-7:Z$a}),Z$i(0,Z$a,"height",Z$b.prototype._$get_height,function(Z$a){Z$r.superSet(Z$H,this,"height",Z$a),this._bitmap.height=0==Z$a?1e-7:Z$a}),Z$c}(Z$H),Z$R=function(Z$b){function Z$c(Z$a){this._tf=null,Z$c.__super.call(this),void 0===Z$a&&(Z$a=""),Z$m.defaultColor=Z$D.labelColor,this.text=Z$a}Z$f(Z$c,"laya.ui.Label",Z$b);var Z$a=Z$c.prototype;return Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._tf=null},Z$a.createChildren=function(){this.addChild(this._tf=new Z$x)},Z$a.changeText=function(Z$a){this._tf.changeText(Z$a)},Z$i(0,Z$a,"padding",function(){return this._tf.padding.join(",")},function(Z$a){this._tf.padding=Z$E.fillArray(Z$D.labelPadding,Z$a,Number)}),Z$i(0,Z$a,"bold",function(){return this._tf.bold},function(Z$a){this._tf.bold=Z$a}),Z$i(0,Z$a,"align",function(){return this._tf.align},function(Z$a){this._tf.align=Z$a}),Z$i(0,Z$a,"text",function(){return this._tf.text},function(Z$a){this._tf.text!=Z$a&&(Z$a&&(Z$a=Z$E.adptString(Z$a+"")),this._tf.text=Z$a,this.event("change"),this._width&&this._height||this.onCompResize())}),Z$i(0,Z$a,"italic",function(){return this._tf.italic},function(Z$a){this._tf.italic=Z$a}),Z$i(0,Z$a,"wordWrap",function(){return this._tf.wordWrap},function(Z$a){this._tf.wordWrap=Z$a}),Z$i(0,Z$a,"font",function(){return this._tf.font},function(Z$a){this._tf.font=Z$a}),Z$i(0,Z$a,"dataSource",Z$b.prototype._$get_dataSource,function(Z$a){"number"==typeof(this._dataSource=Z$a)||"string"==typeof Z$a?this.text=Z$a+"":Z$r.superSet(Z$H,this,"dataSource",Z$a)}),Z$i(0,Z$a,"color",function(){return this._tf.color},function(Z$a){this._tf.color=Z$a}),Z$i(0,Z$a,"valign",function(){return this._tf.valign},function(Z$a){this._tf.valign=Z$a}),Z$i(0,Z$a,"leading",function(){return this._tf.leading},function(Z$a){this._tf.leading=Z$a}),Z$i(0,Z$a,"fontSize",function(){return this._tf.fontSize},function(Z$a){this._tf.fontSize=Z$a}),Z$i(0,Z$a,"bgColor",function(){return this._tf.bgColor},function(Z$a){this._tf.bgColor=Z$a}),Z$i(0,Z$a,"borderColor",function(){return this._tf.borderColor},function(Z$a){this._tf.borderColor=Z$a}),Z$i(0,Z$a,"stroke",function(){return this._tf.stroke},function(Z$a){this._tf.stroke=Z$a}),Z$i(0,Z$a,"strokeColor",function(){return this._tf.strokeColor},function(Z$a){this._tf.strokeColor=Z$a}),Z$i(0,Z$a,"textField",function(){return this._tf}),Z$i(0,Z$a,"measureWidth",function(){return this._tf.width}),Z$i(0,Z$a,"measureHeight",function(){return this._tf.height}),Z$i(0,Z$a,"width",function(){return this._width||this._tf.text?Z$r.superGet(Z$H,this,"width"):0},function(Z$a){Z$r.superSet(Z$H,this,"width",Z$a),this._tf.width=Z$a}),Z$i(0,Z$a,"height",function(){return this._height||this._tf.text?Z$r.superGet(Z$H,this,"height"):0},function(Z$a){Z$r.superSet(Z$H,this,"height",Z$a),this._tf.height=Z$a}),Z$i(0,Z$a,"overflow",function(){return this._tf.overflow},function(Z$a){this._tf.overflow=Z$a}),Z$i(0,Z$a,"underline",function(){return this._tf.underline},function(Z$a){this._tf.underline=Z$a}),Z$i(0,Z$a,"underlineColor",function(){return this._tf.underlineColor},function(Z$a){this._tf.underlineColor=Z$a}),Z$c}(Z$H),Z$S=function(Z$b){function Z$c(Z$a){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,Z$c.__super.call(this),this.skin=Z$a}Z$f(Z$c,"laya.ui.ProgressBar",Z$b);var Z$a=Z$c.prototype;return Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._bg&&this._bg.destroy(Z$a),this._bar&&this._bar.destroy(Z$a),this._bg=this._bar=null,this.changeHandler=null},Z$a.createChildren=function(){this.addChild(this._bg=new Z$Q),this.addChild(this._bar=new Z$Q)},Z$a.changeValue=function(){if(this.sizeGrid){var Z$a=this.sizeGrid.split(","),Z$b=Number(Z$a[3]),Z$c=Number(Z$a[1]),Z$d=(this.width-Z$b-Z$c)*this._value;this._bar.width=Z$b+Z$c+Z$d,this._bar.visible=this._bar.width>Z$b+Z$c}else this._bar.width=this.width*this._value},Z$i(0,Z$a,"measureHeight",function(){return this._bg.height}),Z$i(0,Z$a,"skin",function(){return this._skin},function(Z$a){this._skin!=Z$a&&(this._skin=Z$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),Z$i(0,Z$a,"measureWidth",function(){return this._bg.width}),Z$i(0,Z$a,"height",Z$b.prototype._$get_height,function(Z$a){Z$r.superSet(Z$H,this,"height",Z$a),this._bg.height=this._height,this._bar.height=this._height}),Z$i(0,Z$a,"bar",function(){return this._bar}),Z$i(0,Z$a,"value",function(){return this._value},function(Z$a){this._value!=Z$a&&(Z$a=1<Z$a?1:Z$a<0?0:Z$a,this._value=Z$a,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(Z$a))}),Z$i(0,Z$a,"bg",function(){return this._bg}),Z$i(0,Z$a,"sizeGrid",function(){return this._bg.sizeGrid},function(Z$a){this._bg.sizeGrid=this._bar.sizeGrid=Z$a}),Z$i(0,Z$a,"width",Z$b.prototype._$get_width,function(Z$a){Z$r.superSet(Z$H,this,"width",Z$a),this._bg.width=this._width,this.callLater(this.changeValue)}),Z$i(0,Z$a,"dataSource",Z$b.prototype._$get_dataSource,function(Z$a){"number"==typeof(this._dataSource=Z$a)||"string"==typeof Z$a?this.value=Number(Z$a):Z$r.superSet(Z$H,this,"dataSource",Z$a)}),Z$c}(Z$H),Z$T=(function(Z$a){function Z$c(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,Z$c.__super.call(this),this._tipBox=new Z$H,this._tipBox.addChild(this._tipText=new Z$x),this._tipText.x=this._tipText.y=5,this._tipText.color=Z$c.tipTextColor,this._defaultTipHandler=this._showDefaultTip,Z$r.stage.on("showtip",this,this._onStageShowTip),Z$r.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}Z$f(Z$c,"laya.ui.TipManager",Z$H);var Z$b=Z$c.prototype;Z$b._onStageHideTip=function(Z$a){Z$r.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},Z$b._onStageShowTip=function(Z$a){Z$r.timer.once(Z$c.tipDelay,this,this._showTip,[Z$a],!0)},Z$b._showTip=function(Z$a){if("string"==typeof Z$a){var Z$b=String(Z$a);Boolean(Z$b)&&this._defaultTipHandler(Z$b)}else Z$a instanceof laya.utils.Handler?Z$a.run():"function"==typeof Z$a&&Z$a.apply();Z$r.stage.on("mousemove",this,this._onStageMouseMove),Z$r.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},Z$b._onStageMouseDown=function(Z$a){this.closeAll()},Z$b._onStageMouseMove=function(Z$a){this._showToStage(this,Z$c.offsetX,Z$c.offsetY)},Z$b._showToStage=function(Z$a,Z$b,Z$c){void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0);var Z$d=Z$a.getBounds();Z$a.x=Z$r.stage.mouseX+Z$b,Z$a.y=Z$r.stage.mouseY+Z$c,Z$a.x+Z$d.width>Z$r.stage.width&&(Z$a.x-=Z$d.width+Z$b),Z$a.y+Z$d.height>Z$r.stage.height&&(Z$a.y-=Z$d.height+Z$c)},Z$b.closeAll=function(){Z$r.timer.clear(this,this._showTip),Z$r.stage.off("mousemove",this,this._onStageMouseMove),Z$r.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},Z$b.showDislayTip=function(Z$a){this.addChild(Z$a),this._showToStage(this),Z$r._currentStage.addChild(this)},Z$b._showDefaultTip=function(Z$a){this._tipText.text=Z$a;var Z$b=this._tipBox.graphics;Z$b.clear(),Z$b.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,Z$c.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),Z$r._currentStage.addChild(this)},Z$i(0,Z$b,"defaultTipHandler",function(){return this._defaultTipHandler},function(Z$a){this._defaultTipHandler=Z$a}),Z$c.offsetX=10,Z$c.offsetY=15,Z$c.tipTextColor="#ffffff",Z$c.tipBackColor="#111111",Z$c.tipDelay=200}(),function(Z$a){var Z$p;function Z$q(){this._idMap=null,this._aniList=null,this._watchMap={},Z$q.__super.call(this)}Z$f(Z$q,"laya.ui.View",Z$J);var Z$b=Z$q.prototype;return Z$b.createView=function(Z$a){if(Z$a.animations&&!this._idMap&&(this._idMap={}),Z$q.createComp(Z$a,this,this),Z$a.animations){var Z$b,Z$c,Z$d=[],Z$e=Z$a.animations,Z$f=0,Z$i=Z$e.length;for(Z$f=0;Z$f<Z$i;Z$f++){switch(Z$b=new Z$n,Z$c=Z$e[Z$f],Z$b._setUp(this._idMap,Z$c),(this[Z$c.name]=Z$b)._setControlNode(this),Z$c.action){case 1:Z$b.play(0,!1);break;case 2:Z$b.play(0,!0)}Z$d.push(Z$b)}this._aniList=Z$d}0<this._width&&null==Z$a.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},Z$b.onEvent=function(Z$a,Z$b){},Z$b.loadUI=function(Z$a){var Z$b=Z$q.uiMap[Z$a];Z$b&&this.createView(Z$b)},Z$b.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,Z$a)},Z$b.changeData=function(Z$a){var Z$b=this._watchMap[Z$a];if(Z$b){console.log("change",Z$a);for(var Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++){Z$b[Z$c].exe(this)}}},Z$q._regs=function(){for(var Z$a in Z$q.uiClassMap)Z$s.regClass(Z$a,Z$q.uiClassMap[Z$a])},Z$q.createComp=function(Z$a,Z$b,Z$c,Z$d){if(!(Z$b=Z$b||Z$q.getCompInstance(Z$a)))return console.warn("can not create:"+Z$a.type),null;var Z$e=Z$a.child;if(Z$e)for(var Z$f=Z$b instanceof laya.ui.List,Z$i=0,Z$j=Z$e.length;Z$i<Z$j;Z$i++){var Z$k=Z$e[Z$i];if(!Z$b.hasOwnProperty("itemRender")||"render"!=Z$k.props.name&&"render"!==Z$k.props.renderType)if("Graphic"==Z$k.type)Z$s.addGraphicsToSprite(Z$k,Z$b);else if(Z$s.isDrawType(Z$k.type))Z$s.addGraphicToSprite(Z$k,Z$b,!0);else{if(Z$f){var Z$l=[],Z$m=Z$q.createComp(Z$k,null,Z$c,Z$l);Z$l.length&&(Z$m._$bindData=Z$l)}else Z$m=Z$q.createComp(Z$k,null,Z$c,Z$d);"Script"==Z$k.type?"owner"in Z$m?Z$m.owner=Z$b:"target"in Z$m&&(Z$m.target=Z$b):"mask"==Z$k.props.renderType||"mask"==Z$k.props.name?Z$b.mask=Z$m:Z$m instanceof laya.display.Sprite&&Z$b.addChild(Z$m)}else Z$b.itemRender=Z$k}var Z$n=Z$a.props;for(var Z$o in Z$n){var Z$p=Z$n[Z$o];Z$q.eventDic[Z$o]?Z$p&&Z$c&&Z$b.on(Z$o,Z$c,Z$c.onEvent,[Z$p]):Z$q.setCompValue(Z$b,Z$o,Z$p,Z$c,Z$d)}return Z$r.__typeof(Z$b,"laya.ui.IItem")&&Z$b.initItems(),Z$a.compId&&Z$c&&Z$c._idMap&&(Z$c._idMap[Z$a.compId]=Z$b),Z$b},Z$q.setCompValue=function(Z$a,Z$b,Z$c,Z$d,Z$e){if("string"==typeof Z$c&&-1<Z$c.indexOf("${")){if(Z$q._sheet||(Z$q._sheet=Z$s.getClass("laya.data.Table")),!Z$q._sheet)return void console.warn("Can not find class Sheet");if(Z$e)Z$e.push(Z$a,Z$b,Z$c);else if(Z$d){-1==Z$c.indexOf("].")&&(Z$c=Z$c.replace(".","[0]."));var Z$f,Z$i,Z$j=new Z$p(Z$a,Z$b,Z$c);Z$j.exe(Z$d);for(var Z$k=Z$c.replace(/\[.*?\]\./g,".");null!=(Z$f=Z$q._parseWatchData.exec(Z$k));){for(var Z$l=Z$f[1];null!=(Z$i=Z$q._parseKeyWord.exec(Z$l));){var Z$m=Z$i[0],Z$n=Z$d._watchMap[Z$m]||(Z$d._watchMap[Z$m]=[]);Z$n.push(Z$j),Z$q._sheet.I.notifer.on(Z$m,Z$d,Z$d.changeData,[Z$m])}(Z$n=Z$d._watchMap[Z$l]||(Z$d._watchMap[Z$l]=[])).push(Z$j),Z$q._sheet.I.notifer.on(Z$l,Z$d,Z$d.changeData,[Z$l])}}}else if("var"===Z$b&&Z$d)Z$d[Z$c]=Z$a;else if("onClick"==Z$b){var Z$o=Z$r._runScript("(function(){"+Z$c+"})");Z$a.on("click",Z$d,Z$o)}else Z$a[Z$b]="true"===Z$c||"false"!==Z$c&&Z$c},Z$q.getCompInstance=function(Z$a){var Z$b,Z$c=Z$a.props?Z$a.props.runtime:null;return Z$b=Z$c?Z$q.viewClassMap[Z$c]||Z$q.uiClassMap[Z$c]||Z$r.__classmap[Z$c]:Z$q.uiClassMap[Z$a.type],Z$a.props&&Z$a.props.hasOwnProperty("renderType")&&"instance"==Z$a.props.renderType?Z$b.instance:Z$b?new Z$b:null},Z$q.regComponent=function(Z$a,Z$b){Z$q.uiClassMap[Z$a]=Z$b,Z$s.regClass(Z$a,Z$b)},Z$q.regViewRuntime=function(Z$a,Z$b){Z$q.viewClassMap[Z$a]=Z$b},Z$q.uiMap={},Z$q.viewClassMap={},Z$q._sheet=null,Z$d(Z$q,["uiClassMap",function(){return this.uiClassMap={ViewStack:Z$aa,LinkButton:Z$K,TextArea:Z$la,ColorPicker:Z$M,Box:Z$J,Button:Z$K,CheckBox:Z$U,Clip:Z$L,ComboBox:Z$N,Component:Z$H,HScrollBar:Z$Y,HSlider:Z$$,Image:Z$Q,Label:Z$R,List:Z$X,Panel:Z$Z,ProgressBar:Z$S,Radio:Z$g,RadioGroup:Z$ja,ScrollBar:Z$O,Slider:Z$P,Tab:Z$ka,TextInput:Z$ca,View:Z$q,VScrollBar:Z$ba,VSlider:Z$da,Tree:Z$h,HBox:Z$fa,VBox:Z$ia,Sprite:Z$w,Animation:Z$c,Text:Z$x,FontClip:Z$W}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),Z$q.__init$=function(){Z$q._regs(),Z$p=function(){function Z$a(Z$a,Z$b,Z$c){this.comp=null,this.prop=null,this.value=null,this.comp=Z$a,this.prop=Z$b,this.value=Z$c}return Z$f(Z$a,""),Z$a.prototype.exe=function(Z$a){var Z$b=Z$E.getBindFun(this.value);this.comp[this.prop]=Z$b.call(this,Z$a)},Z$a}()},Z$q}()),Z$U=function(Z$a){function Z$c(Z$a,Z$b){void 0===Z$b&&(Z$b=""),Z$c.__super.call(this,Z$a,Z$b)}Z$f(Z$c,"laya.ui.CheckBox",Z$a);var Z$b=Z$c.prototype;return Z$b.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},Z$b.initialize=function(){Z$a.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},Z$i(0,Z$b,"dataSource",Z$a.prototype._$get_dataSource,function(Z$a){"boolean"==typeof(this._dataSource=Z$a)?this.selected=Z$a:"string"==typeof Z$a?this.selected="true"===Z$a:Z$r.superSet(Z$K,this,"dataSource",Z$a)}),Z$c}(Z$K),Z$V=function(Z$a){function Z$b(){this._space=0,this._align="none",this._itemChanged=!1,Z$b.__super.call(this)}Z$f(Z$b,"laya.ui.LayoutBox",Z$J);var Z$c=Z$b.prototype;return Z$c.addChild=function(Z$a){return Z$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,Z$a)},Z$c.onResize=function(Z$a){this._setItemChanged()},Z$c.addChildAt=function(Z$a,Z$b){return Z$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,Z$a,Z$b)},Z$c.removeChild=function(Z$a){return Z$a.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,Z$a)},Z$c.removeChildAt=function(Z$a){return this.getChildAt(Z$a).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,Z$a)},Z$c.refresh=function(){this._setItemChanged()},Z$c.changeItems=function(){this._itemChanged=!1},Z$c.sortItem=function(Z$a){Z$a&&Z$a.sort(function(Z$a,Z$b){return Z$a.y-Z$b.y})},Z$c._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},Z$i(0,Z$c,"space",function(){return this._space},function(Z$a){this._space=Z$a,this._setItemChanged()}),Z$i(0,Z$c,"align",function(){return this._align},function(Z$a){this._align=Z$a,this._setItemChanged()}),Z$b}(),Z$W=function(Z$b){function Z$c(Z$a,Z$b){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,Z$c.__super.call(this),Z$a&&(this.skin=Z$a),Z$b&&(this.sheet=Z$b)}Z$f(Z$c,"laya.ui.FontClip",Z$b);var Z$a=Z$c.prototype;return Z$a.createChildren=function(){this._bitmap=new Z$G,this.on("loaded",this,this._onClipLoaded)},Z$a._onClipLoaded=function(){this.callLater(this.changeValue)},Z$a.changeValue=function(){var Z$a;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),Z$a=this._sources[0]))){var Z$b="horizontal"===this._direction;Z$b?(this._wordsW=this._valueArr.length*(Z$a.sourceWidth+this.spaceX),this._wordsH=Z$a.sourceHeight):(this._wordsW=Z$a.sourceWidth,this._wordsH=(Z$a.sourceHeight+this.spaceY)*this._valueArr.length);var Z$c=0;if(this._width)switch(this._align){case"center":Z$c=.5*(this._width-this._wordsW);break;case"right":Z$c=this._width-this._wordsW;break;default:Z$c=0}for(var Z$d=0,Z$e=this._valueArr.length;Z$d<Z$e;Z$d++){var Z$f=this._indexMap[this._valueArr.charAt(Z$d)];this.sources[Z$f]&&(Z$a=this.sources[Z$f],Z$b?this.graphics.drawTexture(Z$a,Z$c+Z$d*(Z$a.sourceWidth+this.spaceX),0,Z$a.sourceWidth,Z$a.sourceHeight):this.graphics.drawTexture(Z$a,0+Z$c,Z$d*(Z$a.sourceHeight+this.spaceY),Z$a.sourceWidth,Z$a.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),Z$b.prototype.destroy.call(this,Z$a)},Z$i(0,Z$a,"sheet",function(){return this._sheet},function(Z$a){Z$a+="";var Z$b=(this._sheet=Z$a).split(" ");this._clipX=String(Z$b[0]).length,this.clipY=Z$b.length,this._indexMap={};for(var Z$c=0;Z$c<this._clipY;Z$c++)for(var Z$d=Z$b[Z$c].split(""),Z$e=0,Z$f=Z$d.length;Z$e<Z$f;Z$e++)this._indexMap[Z$d[Z$e]]=Z$c*this._clipX+Z$e}),Z$i(0,Z$a,"height",Z$b.prototype._$get_height,function(Z$a){Z$r.superSet(Z$L,this,"height",Z$a),this.callLater(this.changeValue)}),Z$i(0,Z$a,"direction",function(){return this._direction},function(Z$a){this._direction=Z$a,this.callLater(this.changeValue)}),Z$i(0,Z$a,"value",function(){return this._valueArr?this._valueArr:""},function(Z$a){Z$a+="",this._valueArr=Z$a,this.callLater(this.changeValue)}),Z$i(0,Z$a,"width",Z$b.prototype._$get_width,function(Z$a){Z$r.superSet(Z$L,this,"width",Z$a),this.callLater(this.changeValue)}),Z$i(0,Z$a,"spaceX",function(){return this._spaceX},function(Z$a){this._spaceX=Z$a,"horizontal"===this._direction&&this.callLater(this.changeValue)}),Z$i(0,Z$a,"spaceY",function(){return this._spaceY},function(Z$a){this._spaceY=Z$a,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),Z$i(0,Z$a,"align",function(){return this._align},function(Z$a){this._align=Z$a,this.callLater(this.changeValue)}),Z$i(0,Z$a,"measureWidth",function(){return this._wordsW}),Z$i(0,Z$a,"measureHeight",function(){return this._wordsH}),Z$c}(Z$L),Z$X=function(Z$a){function Z$b(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new Z$q,Z$b.__super.call(this)}Z$f(Z$b,"laya.ui.List",Z$a);var Z$c=Z$b.prototype;return Z$r.imps(Z$c,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),Z$c.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),this._content&&this._content.destroy(Z$a),this._scrollBar&&this._scrollBar.destroy(Z$a),laya.ui.Component.prototype.destroy.call(this,Z$a),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},Z$c.createChildren=function(){this.addChild(this._content=new Z$J)},Z$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=Z$r.superGet(Z$J,this,"cacheAs")),Z$r.superSet(Z$J,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},Z$c.onScrollEnd=function(){Z$r.superSet(Z$J,this,"cacheAs",this._$P.cacheAs)},Z$c._removePreScrollBar=function(){var Z$a=this.removeChildByName("scrollBar");Z$a&&Z$a.destroy(!0)},Z$c.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var Z$a=this._getOneCell(),Z$b=Z$a.width+this._spaceX||1,Z$c=Z$a.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/Z$b):Math.ceil(this._width/Z$b)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/Z$c):Math.round(this._height/Z$c));var Z$d=this._width?this._width:Z$b*this.repeatX-this._spaceX,Z$e=this._height?this._height:Z$c*this.repeatY-this._spaceY;this._cellSize=this._isVertical?Z$c:Z$b,this._cellOffset=this._isVertical?Z$c*Math.max(this._repeatY2,this._repeatY)-Z$e-this._spaceY:Z$b*Math.max(this._repeatX2,this._repeatX)-Z$d-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=Z$e:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=Z$d),this.setContentSize(Z$d,Z$e);var Z$f=this._isVertical?this.repeatX:this.repeatY,Z$i=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,Z$f,Z$i),this._createdLine=Z$i,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},Z$c._getOneCell=function(){if(0===this._cells.length){var Z$a=this.createItem();if(this._offset.setTo(Z$a.x,Z$a.y),this.cacheContent)return Z$a;this._cells.push(Z$a)}return this._cells[0]},Z$c._createItems=function(Z$a,Z$b,Z$c){var Z$d=this._content,Z$e=this._getOneCell(),Z$f=Z$e.width+this._spaceX,Z$i=Z$e.height+this._spaceY;if(this.cacheContent){var Z$j=new Z$J;Z$j.cacheAsBitmap=!0,Z$j.pos((this._isVertical?0:Z$a)*Z$f,(this._isVertical?Z$a:0)*Z$i),this._content.addChild(Z$j),this._content.optimizeScrollRect=!0,Z$d=Z$j}else{for(var Z$k=[],Z$l=this._cells.length-1;-1<Z$l;Z$l--){var Z$m=this._cells[Z$l];Z$m.removeSelf(),Z$k.push(Z$m)}this._cells.length=0}for(var Z$n=Z$a;Z$n<Z$c;Z$n++)for(var Z$o=0;Z$o<Z$b;Z$o++)(Z$e=Z$k&&Z$k.length?Z$k.pop():this.createItem()).x=(this._isVertical?Z$o:Z$n)*Z$f-Z$d.x,Z$e.y=(this._isVertical?Z$n:Z$o)*Z$i-Z$d.y,Z$e.name="item"+(Z$n*Z$b+Z$o),Z$d.addChild(Z$e),this.addCell(Z$e)},Z$c.createItem=function(){var Z$a=[];if("function"==typeof this._itemRender)var Z$b=new this._itemRender;else Z$b=Z$T.createComp(this._itemRender,null,null,Z$a);if(0==Z$a.length&&Z$b._watchMap){var Z$c=Z$b._watchMap;for(var Z$d in Z$c)for(var Z$e=Z$c[Z$d],Z$f=0;Z$f<Z$e.length;Z$f++){var Z$i=Z$e[Z$f];Z$a.push(Z$i.comp,Z$i.prop,Z$i.value)}}return Z$a.length&&(Z$b._$bindData=Z$a),Z$b},Z$c.addCell=function(Z$a){Z$a.on("click",this,this.onCellMouse),Z$a.on("rightclick",this,this.onCellMouse),Z$a.on("mouseover",this,this.onCellMouse),Z$a.on("mouseout",this,this.onCellMouse),Z$a.on("mousedown",this,this.onCellMouse),Z$a.on("mouseup",this,this.onCellMouse),this._cells.push(Z$a)},Z$c.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var Z$a=0,Z$b=Z$a=0;Z$b<1e4;Z$b++){var Z$c=this.getChildByName("item"+Z$b);if(!Z$c)break;this.addCell(Z$c),Z$a++}this.repeatY=Z$a}},Z$c.setContentSize=function(Z$a,Z$b){this._content.width=Z$a,this._content.height=Z$b,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new Z$t),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,Z$a,Z$b),this._content.scrollRect=this._content.scrollRect),this.event("resize")},Z$c.onCellMouse=function(Z$a){"mousedown"===Z$a.type&&(this._isMoved=!1);var Z$b=Z$a.currentTarget,Z$c=this._startIndex+this._cells.indexOf(Z$b);Z$c<0||("click"===Z$a.type||"rightclick"===Z$a.type?this.selectEnable&&!this._isMoved?this.selectedIndex=Z$c:this.changeCellState(Z$b,!0,0):"mouseover"!==Z$a.type&&"mouseout"!==Z$a.type||this._selectedIndex===Z$c||this.changeCellState(Z$b,"mouseover"===Z$a.type,0),this.mouseHandler&&this.mouseHandler.runWith([Z$a,Z$c]))},Z$c.changeCellState=function(Z$a,Z$b,Z$c){var Z$d=Z$a.getChildByName("selectBox");Z$d&&(this.selectEnable=!0,Z$d.visible=Z$b,Z$d.index=Z$c)},Z$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},Z$c.onScrollBarChange=function(Z$a){this.runCallLater(this.changeCells);var Z$b=this._scrollBar.value,Z$c=this._isVertical?this.repeatX:this.repeatY,Z$d=this._isVertical?this.repeatY:this.repeatX,Z$e=Math.floor(Z$b/this._cellSize);if(this.cacheContent)Z$i=Z$d+1,this._createdLine-Z$e<Z$i&&(this._createItems(this._createdLine,Z$c,this._createdLine+Z$i),this.renderItems(this._createdLine*Z$c,0),this._createdLine+=Z$i);else{var Z$f=Z$e*Z$c,Z$i=0;if(Z$f>this._startIndex){Z$i=Z$f-this._startIndex;var Z$j=!0,Z$k=this._startIndex+Z$c*(Z$d+1);this._isMoved=!0}else Z$f<this._startIndex&&(Z$i=this._startIndex-Z$f,Z$j=!1,Z$k=this._startIndex-1,this._isMoved=!0);for(var Z$l=0;Z$l<Z$i;Z$l++){if(Z$j){var Z$m=this._cells.shift();this._cells[this._cells.length]=Z$m;var Z$n=Z$k+Z$l}else Z$m=this._cells.pop(),this._cells.unshift(Z$m),Z$n=Z$k-Z$l;var Z$o=Math.floor(Z$n/Z$c)*this._cellSize;this._isVertical?Z$m.y=Z$o:Z$m.x=Z$o,this.renderItem(Z$m,Z$n)}this._startIndex=Z$f,this.changeSelectStatus()}var Z$p=this._content.scrollRect;this._isVertical?(Z$p.y=Z$b-this._offset.y,Z$p.x=-this._offset.x):(Z$p.y=-this._offset.y,Z$p.x=Z$b-this._offset.x),this._content.scrollRect=Z$p},Z$c.posCell=function(Z$a,Z$b){if(this._scrollBar){var Z$c=this._isVertical?this.repeatX:this.repeatY,Z$d=(this._isVertical?this.repeatY:this.repeatX,Math.floor(Z$b/Z$c)*this._cellSize);this._isVertical?Z$a.y=Z$d:Z$a.x=Z$d}},Z$c.changeSelectStatus=function(){for(var Z$a=0,Z$b=this._cells.length;Z$a<Z$b;Z$a++)this.changeCellState(this._cells[Z$a],this._selectedIndex===this._startIndex+Z$a,1)},Z$c.renderItems=function(Z$a,Z$b){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0);for(var Z$c=Z$a,Z$d=Z$b||this._cells.length;Z$c<Z$d;Z$c++)this.renderItem(this._cells[Z$c],this._startIndex+Z$c);this.changeSelectStatus()},Z$c.renderItem=function(Z$a,Z$b){this._array&&0<=Z$b&&Z$b<this._array.length?(Z$a.visible=!0,Z$a._$bindData?(Z$a._dataSource=this._array[Z$b],this._bindData(Z$a,this._array[Z$b])):Z$a.dataSource=this._array[Z$b],this.cacheContent||this.posCell(Z$a,Z$b),this.hasListener("render")&&this.event("render",[Z$a,Z$b]),this.renderHandler&&this.renderHandler.runWith([Z$a,Z$b])):(Z$a.visible=!1,Z$a.dataSource=null)},Z$c._bindData=function(Z$a,Z$b){for(var Z$c=Z$a._$bindData,Z$d=0,Z$e=Z$c.length;Z$d<Z$e;Z$d++){var Z$f=Z$c[Z$d++],Z$i=Z$c[Z$d++],Z$j=Z$c[Z$d],Z$k=Z$E.getBindFun(Z$j);Z$f[Z$i]=Z$k.call(this,Z$b)}},Z$c.refresh=function(){this.array=this._array},Z$c.getItem=function(Z$a){return-1<Z$a&&Z$a<this._array.length?this._array[Z$a]:null},Z$c.changeItem=function(Z$a,Z$b){-1<Z$a&&Z$a<this._array.length&&(this._array[Z$a]=Z$b,Z$a>=this._startIndex&&Z$a<this._startIndex+this._cells.length&&this.renderItem(this.getCell(Z$a),Z$a))},Z$c.setItem=function(Z$a,Z$b){this.changeItem(Z$a,Z$b)},Z$c.addItem=function(Z$a){this._array.push(Z$a),this.array=this._array},Z$c.addItemAt=function(Z$a,Z$b){this._array.splice(Z$b,0,Z$a),this.array=this._array},Z$c.deleteItem=function(Z$a){this._array.splice(Z$a,1),this.array=this._array},Z$c.getCell=function(Z$a){return this.runCallLater(this.changeCells),-1<Z$a&&this._cells?this._cells[(Z$a-this._startIndex)%this._cells.length]:null},Z$c.scrollTo=function(Z$a){if(this._scrollBar){var Z$b=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(Z$a/Z$b)*this._cellSize}else this.startIndex=Z$a},Z$c.tweenTo=function(Z$a,Z$b,Z$c){if(void 0===Z$b&&(Z$b=200),this._scrollBar){var Z$d=this._isVertical?this.repeatX:this.repeatY;Z$z.to(this._scrollBar,{value:Math.floor(Z$a/Z$d)*this._cellSize},Z$b,null,Z$c,0,!0)}else this.startIndex=Z$a,Z$c&&Z$c.run()},Z$c._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},Z$c.commitMeasure=function(){this.runCallLater(this.changeCells)},Z$i(0,Z$c,"cacheAs",Z$a.prototype._$get_cacheAs,function(Z$a){Z$r.superSet(Z$J,this,"cacheAs",Z$a),this._scrollBar&&(this._$P.cacheAs=null,"none"!==Z$a?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),Z$i(0,Z$c,"content",function(){return this._content}),Z$i(0,Z$c,"height",Z$a.prototype._$get_height,function(Z$a){Z$a!=this._height&&(Z$r.superSet(Z$J,this,"height",Z$a),this._setCellChanged())}),Z$i(0,Z$c,"itemRender",function(){return this._itemRender},function(Z$a){if(this._itemRender!=Z$a){this._itemRender=Z$a;for(var Z$b=this._cells.length-1;-1<Z$b;Z$b--)this._cells[Z$b].destroy();this._cells.length=0,this._setCellChanged()}}),Z$i(0,Z$c,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(Z$a){this._removePreScrollBar();var Z$b=new Z$ba;Z$b.name="scrollBar",Z$b.right=0,Z$a&&" "!=Z$a&&(Z$b.skin=Z$a),this.scrollBar=Z$b,this.addChild(Z$b),this._setCellChanged()}),Z$i(0,Z$c,"page",function(){return this._page},function(Z$a){this._page=Z$a,this._array&&(this._page=0<Z$a?Z$a:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),Z$i(0,Z$c,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(Z$a){this._removePreScrollBar();var Z$b=new Z$Y;Z$b.name="scrollBar",Z$b.bottom=0,Z$a&&" "!=Z$a&&(Z$b.skin=Z$a),this.scrollBar=Z$b,this.addChild(Z$b),this._setCellChanged()}),Z$i(0,Z$c,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(Z$a){this._repeatX=Z$a,this._setCellChanged()}),Z$i(0,Z$c,"scrollBar",function(){return this._scrollBar},function(Z$a){this._scrollBar!=Z$a&&(this._scrollBar=Z$a)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),Z$i(0,Z$c,"width",Z$a.prototype._$get_width,function(Z$a){Z$a!=this._width&&(Z$r.superSet(Z$J,this,"width",Z$a),this._setCellChanged())}),Z$i(0,Z$c,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(Z$a){this._repeatY=Z$a,this._setCellChanged()}),Z$i(0,Z$c,"spaceX",function(){return this._spaceX},function(Z$a){this._spaceX=Z$a,this._setCellChanged()}),Z$i(0,Z$c,"spaceY",function(){return this._spaceY},function(Z$a){this._spaceY=Z$a,this._setCellChanged()}),Z$i(0,Z$c,"selectedIndex",function(){return this._selectedIndex},function(Z$a){this._selectedIndex!=Z$a&&(this._selectedIndex=Z$a,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(Z$a),this.startIndex=this._startIndex)}),Z$i(0,Z$c,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(Z$a){this.selectedIndex=this._array.indexOf(Z$a)}),Z$i(0,Z$c,"length",function(){return this._array?this._array.length:0}),Z$i(0,Z$c,"selection",function(){return this.getCell(this._selectedIndex)},function(Z$a){this.selectedIndex=this._startIndex+this._cells.indexOf(Z$a)}),Z$i(0,Z$c,"startIndex",function(){return this._startIndex},function(Z$a){this._startIndex=0<Z$a?Z$a:0,this.callLater(this.renderItems)}),Z$i(0,Z$c,"array",function(){return this._array},function(Z$a){this.runCallLater(this.changeCells),this._array=Z$a||[];var Z$b=this._array.length;if(this.totalPage=Math.ceil(Z$b/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<Z$b?this._selectedIndex:Z$b-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var Z$c=this._isVertical?this.repeatX:this.repeatY,Z$d=this._isVertical?this.repeatY:this.repeatX,Z$e=Math.ceil(Z$b/Z$c);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=Z$d/Z$e,this._scrollBar.setScroll(0,(Z$e-Z$d)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),Z$i(0,Z$c,"dataSource",Z$a.prototype._$get_dataSource,function(Z$a){"number"==typeof(this._dataSource=Z$a)&&Math.floor(Z$a)==Z$a||"string"==typeof Z$a?this.selectedIndex=parseInt(Z$a):Z$a instanceof Array?this.array=Z$a:Z$r.superSet(Z$J,this,"dataSource",Z$a)}),Z$i(0,Z$c,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),Z$b}(Z$J),Z$Y=function(Z$a){function Z$b(){Z$b.__super.call(this)}return Z$f(Z$b,"laya.ui.HScrollBar",Z$a),Z$b.prototype.initialize=function(){Z$a.prototype.initialize.call(this),this.slider.isVertical=!1},Z$b}(Z$O),Z$Z=function(Z$a){function Z$b(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,Z$b.__super.call(this),this.width=this.height=100}Z$f(Z$b,"laya.ui.Panel",Z$a);var Z$c=Z$b.prototype;return Z$c.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),laya.ui.Component.prototype.destroy.call(this,Z$a),this._content&&this._content.destroy(Z$a),this._vScrollBar&&this._vScrollBar.destroy(Z$a),this._hScrollBar&&this._hScrollBar.destroy(Z$a),this._vScrollBar=null,this._hScrollBar=null,this._content=null},Z$c.destroyChildren=function(){this._content.destroyChildren()},Z$c.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new Z$J)},Z$c.addChild=function(Z$a){return Z$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(Z$a)},Z$c.onResize=function(){this._setScrollChanged()},Z$c.addChildAt=function(Z$a,Z$b){return Z$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(Z$a,Z$b)},Z$c.removeChild=function(Z$a){return Z$a.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(Z$a)},Z$c.removeChildAt=function(Z$a){return this.getChildAt(Z$a).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(Z$a)},Z$c.removeChildren=function(Z$a,Z$b){return void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=2147483647),this._content.removeChildren(Z$a,Z$b),this._setScrollChanged(),this},Z$c.getChildAt=function(Z$a){return this._content.getChildAt(Z$a)},Z$c.getChildByName=function(Z$a){return this._content.getChildByName(Z$a)},Z$c.getChildIndex=function(Z$a){return this._content.getChildIndex(Z$a)},Z$c.changeScroll=function(){this._scrollChanged=!1;var Z$a=this.contentWidth||1,Z$b=this.contentHeight||1,Z$c=this._vScrollBar,Z$d=this._hScrollBar,Z$e=Z$c&&Z$b>this._height,Z$f=Z$d&&Z$a>this._width,Z$i=Z$e?this._width-Z$c.width:this._width,Z$j=Z$f?this._height-Z$d.height:this._height;Z$c&&(Z$c.x=this._width-Z$c.width,Z$c.y=0,Z$c.height=this._height-(Z$f?Z$d.height:0),Z$c.scrollSize=Math.max(.033*this._height,1),Z$c.thumbPercent=Z$j/Z$b,Z$c.setScroll(0,Z$b-Z$j,Z$c.value)),Z$d&&(Z$d.x=0,Z$d.y=this._height-Z$d.height,Z$d.width=this._width-(Z$e?Z$c.width:0),Z$d.scrollSize=Math.max(.033*this._width,1),Z$d.thumbPercent=Z$i/Z$a,Z$d.setScroll(0,Z$a-Z$i,Z$d.value))},Z$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},Z$c.setContentSize=function(Z$a,Z$b){var Z$c=this._content;Z$c.width=Z$a,Z$c.height=Z$b,Z$c.scrollRect||(Z$c.scrollRect=new Z$t),Z$c.scrollRect.setTo(0,0,Z$a,Z$b),Z$c.scrollRect=Z$c.scrollRect},Z$c.onScrollBarChange=function(Z$a){var Z$b=this._content.scrollRect;if(Z$b){var Z$c=Math.round(Z$a.value);Z$a.isVertical?Z$b.y=Z$c:Z$b.x=Z$c,this._content.scrollRect=Z$b}},Z$c.scrollTo=function(Z$a,Z$b){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),this.vScrollBar&&(this.vScrollBar.value=Z$b),this.hScrollBar&&(this.hScrollBar.value=Z$a)},Z$c.refresh=function(){this.changeScroll()},Z$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=Z$r.superGet(Z$J,this,"cacheAs")),Z$r.superSet(Z$J,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},Z$c.onScrollEnd=function(){Z$r.superSet(Z$J,this,"cacheAs",this._$P.cacheAs)},Z$c._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},Z$i(0,Z$c,"numChildren",function(){return this._content.numChildren}),Z$i(0,Z$c,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(Z$a){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new Z$Y),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=Z$a}),Z$i(0,Z$c,"contentWidth",function(){for(var Z$a=0,Z$b=this._content.numChildren-1;-1<Z$b;Z$b--){var Z$c=this._content.getChildAt(Z$b);Z$a=Math.max(Z$c.x+Z$c.width*Z$c.scaleX,Z$a)}return Z$a}),Z$i(0,Z$c,"contentHeight",function(){for(var Z$a=0,Z$b=this._content.numChildren-1;-1<Z$b;Z$b--){var Z$c=this._content.getChildAt(Z$b);Z$a=Math.max(Z$c.y+Z$c.height*Z$c.scaleY,Z$a)}return Z$a}),Z$i(0,Z$c,"width",Z$a.prototype._$get_width,function(Z$a){Z$r.superSet(Z$J,this,"width",Z$a),this._setScrollChanged()}),Z$i(0,Z$c,"hScrollBar",function(){return this._hScrollBar}),Z$i(0,Z$c,"content",function(){return this._content}),Z$i(0,Z$c,"height",Z$a.prototype._$get_height,function(Z$a){Z$r.superSet(Z$J,this,"height",Z$a),this._setScrollChanged()}),Z$i(0,Z$c,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(Z$a){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new Z$ba),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=Z$a}),Z$i(0,Z$c,"vScrollBar",function(){return this._vScrollBar}),Z$i(0,Z$c,"cacheAs",Z$a.prototype._$get_cacheAs,function(Z$a){Z$r.superSet(Z$J,this,"cacheAs",Z$a),this._$P.cacheAs=null,"none"!==Z$a?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),Z$b}(Z$J),Z$$=function(Z$a){function Z$b(Z$a){Z$b.__super.call(this,Z$a),this.isVertical=!1}return Z$f(Z$b,"laya.ui.HSlider",Z$P),Z$b}(),Z$_=function(Z$a){function Z$c(Z$a,Z$b){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,Z$c.__super.call(this),this.skin=Z$b,this.labels=Z$a}Z$f(Z$c,"laya.ui.UIGroup",Z$a);var Z$b=Z$c.prototype;return Z$r.imps(Z$b,{"laya.ui.IItem":!0}),Z$b.preinitialize=function(){this.mouseEnabled=!0},Z$b.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),laya.ui.Component.prototype.destroy.call(this,Z$a),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},Z$b.addItem=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!0);var Z$c=Z$a,Z$d=this._items.length;if(Z$c.name="item"+Z$d,this.addChild(Z$c),this.initItems(),Z$b&&0<Z$d){var Z$e=this._items[Z$d-1];"horizontal"==this._direction?Z$c.x=Z$e.x+Z$e.width+this._space:Z$c.y=Z$e.y+Z$e.height+this._space}else Z$b&&(Z$c.x=0,Z$c.y=0);return Z$d},Z$b.delItem=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!0);var Z$c=this._items.indexOf(Z$a);if(-1!=Z$c){var Z$d=Z$a;this.removeChild(Z$d);for(var Z$e=Z$c+1,Z$f=this._items.length;Z$e<Z$f;Z$e++){var Z$i=this._items[Z$e];Z$i.name="item"+(Z$e-1),Z$b&&("horizontal"==this._direction?Z$i.x-=Z$d.width+this._space:Z$i.y-=Z$d.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var Z$j;Z$j=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=Z$j}}},Z$b.initItems=function(){this._items||(this._items=[]);for(var Z$a=this._items.length=0;Z$a<1e4;Z$a++){var Z$b=this.getChildByName("item"+Z$a);if(null==Z$b)break;this._items.push(Z$b),Z$b.selected=Z$a===this._selectedIndex,Z$b.clickHandler=Z$o.create(this,this.itemClick,[Z$a],!1)}},Z$b.itemClick=function(Z$a){this.selectedIndex=Z$a},Z$b.setSelect=function(Z$a,Z$b){this._items&&-1<Z$a&&Z$a<this._items.length&&(this._items[Z$a].selected=Z$b)},Z$b.createItem=function(Z$a,Z$b){return null},Z$b.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var Z$a=0,Z$b=0,Z$c=this._items.length;Z$b<Z$c;Z$b++){var Z$d=this._items[Z$b];this._skin&&(Z$d.skin=this._skin),this._labelColors&&(Z$d.labelColors=this._labelColors),this._labelSize&&(Z$d.labelSize=this._labelSize),this._labelStroke&&(Z$d.labelStroke=this._labelStroke),this._labelStrokeColor&&(Z$d.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(Z$d.strokeColors=this._strokeColors),this._labelBold&&(Z$d.labelBold=this._labelBold),this._labelPadding&&(Z$d.labelPadding=this._labelPadding),this._labelAlign&&(Z$d.labelAlign=this._labelAlign),this._stateNum&&(Z$d.stateNum=this._stateNum),this._labelFont&&(Z$d.labelFont=this._labelFont),"horizontal"===this._direction?(Z$d.y=0,Z$d.x=Z$a,Z$a+=Z$d.width+this._space):(Z$d.x=0,Z$d.y=Z$a,Z$a+=Z$d.height+this._space)}this.changeSize()},Z$b.commitMeasure=function(){this.runCallLater(this.changeLabels)},Z$b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},Z$i(0,Z$b,"labelStrokeColor",function(){return this._labelStrokeColor},function(Z$a){this._labelStrokeColor!=Z$a&&(this._labelStrokeColor=Z$a,this._setLabelChanged())}),Z$i(0,Z$b,"skin",function(){return this._skin},function(Z$a){this._skin!=Z$a&&(this._skin=Z$a,this._setLabelChanged())}),Z$i(0,Z$b,"selectedIndex",function(){return this._selectedIndex},function(Z$a){this._selectedIndex!=Z$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=Z$a,this.setSelect(Z$a,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),Z$i(0,Z$b,"labels",function(){return this._labels},function(Z$a){if(this._labels!=Z$a){if(this._labels=Z$a,this.removeChildren(),this._setLabelChanged(),this._labels)for(var Z$b=this._labels.split(","),Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++){var Z$e=this.createItem(this._skin,Z$b[Z$c]);Z$e.name="item"+Z$c,this.addChild(Z$e)}this.initItems()}}),Z$i(0,Z$b,"strokeColors",function(){return this._strokeColors},function(Z$a){this._strokeColors!=Z$a&&(this._strokeColors=Z$a,this._setLabelChanged())}),Z$i(0,Z$b,"labelColors",function(){return this._labelColors},function(Z$a){this._labelColors!=Z$a&&(this._labelColors=Z$a,this._setLabelChanged())}),Z$i(0,Z$b,"labelStroke",function(){return this._labelStroke},function(Z$a){this._labelStroke!=Z$a&&(this._labelStroke=Z$a,this._setLabelChanged())}),Z$i(0,Z$b,"labelSize",function(){return this._labelSize},function(Z$a){this._labelSize!=Z$a&&(this._labelSize=Z$a,this._setLabelChanged())}),Z$i(0,Z$b,"stateNum",function(){return this._stateNum},function(Z$a){this._stateNum!=Z$a&&(this._stateNum=Z$a,this._setLabelChanged())}),Z$i(0,Z$b,"labelBold",function(){return this._labelBold},function(Z$a){this._labelBold!=Z$a&&(this._labelBold=Z$a,this._setLabelChanged())}),Z$i(0,Z$b,"labelFont",function(){return this._labelFont},function(Z$a){this._labelFont!=Z$a&&(this._labelFont=Z$a,this._setLabelChanged())}),Z$i(0,Z$b,"labelPadding",function(){return this._labelPadding},function(Z$a){this._labelPadding!=Z$a&&(this._labelPadding=Z$a,this._setLabelChanged())}),Z$i(0,Z$b,"direction",function(){return this._direction},function(Z$a){this._direction=Z$a,this._setLabelChanged()}),Z$i(0,Z$b,"space",function(){return this._space},function(Z$a){this._space=Z$a,this._setLabelChanged()}),Z$i(0,Z$b,"items",function(){return this._items}),Z$i(0,Z$b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(Z$a){this.selectedIndex=this._items.indexOf(Z$a)}),Z$i(0,Z$b,"dataSource",Z$a.prototype._$get_dataSource,function(Z$a){"number"==typeof(this._dataSource=Z$a)&&Math.floor(Z$a)==Z$a||"string"==typeof Z$a?this.selectedIndex=parseInt(Z$a):Z$a instanceof Array?this.labels=Z$a.join(","):Z$r.superSet(Z$J,this,"dataSource",Z$a)}),Z$c}(Z$J),Z$g=function(Z$b){function Z$c(Z$a,Z$b){this._value=null,void 0===Z$b&&(Z$b=""),Z$c.__super.call(this,Z$a,Z$b)}Z$f(Z$c,"laya.ui.Radio",Z$b);var Z$a=Z$c.prototype;return Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._value=null},Z$a.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},Z$a.initialize=function(){Z$b.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},Z$a.onClick=function(Z$a){this.selected=!0},Z$i(0,Z$a,"value",function(){return null!=this._value?this._value:this.label},function(Z$a){this._value=Z$a}),Z$c}(Z$K),Z$h=function(Z$a){function Z$b(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,Z$b.__super.call(this),this.width=this.height=200}Z$f(Z$b,"laya.ui.Tree",Z$a);var Z$c=Z$b.prototype;return Z$r.imps(Z$c,{"laya.ui.IRender":!0}),Z$c.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),laya.ui.Component.prototype.destroy.call(this,Z$a),this._list&&this._list.destroy(Z$a),this._list=null,this._source=null,this._renderHandler=null},Z$c.createChildren=function(){this.addChild(this._list=new Z$X),this._list.renderHandler=Z$o.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},Z$c.onListChange=function(Z$a){this.event("change")},Z$c.getArray=function(){var Z$a,Z$b=[];for(var Z$c in this._source)Z$a=this._source[Z$c],this.getParentOpenStatus(Z$a)&&(Z$a.x=this._spaceLeft*this.getDepth(Z$a),Z$b.push(Z$a));return Z$b},Z$c.getDepth=function(Z$a,Z$b){return void 0===Z$b&&(Z$b=0),null==Z$a.nodeParent?Z$b:this.getDepth(Z$a.nodeParent,Z$b+1)},Z$c.getParentOpenStatus=function(Z$a){var Z$b=Z$a.nodeParent;return null==Z$b||!!Z$b.isOpen&&(null==Z$b.nodeParent||this.getParentOpenStatus(Z$b))},Z$c.renderItem=function(Z$a,Z$b){var Z$c=Z$a.dataSource;if(Z$c){Z$a.left=Z$c.x;var Z$d=Z$a.getChildByName("arrow");Z$d&&(Z$c.hasChild?(Z$d.visible=!0,Z$d.index=Z$c.isOpen?1:0,Z$d.tag=Z$b,Z$d.off("click",this,this.onArrowClick),Z$d.on("click",this,this.onArrowClick)):Z$d.visible=!1);var Z$e=Z$a.getChildByName("folder");Z$e&&(2==Z$e.clipY?Z$e.index=Z$c.isDirectory?0:1:Z$e.index=Z$c.isDirectory?Z$c.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([Z$a,Z$b])}},Z$c.onArrowClick=function(Z$a){var Z$b=Z$a.currentTarget.tag;this._list.array[Z$b].isOpen=!this._list.array[Z$b].isOpen,this.event("open"),this._list.array=this.getArray()},Z$c.setItemState=function(Z$a,Z$b){this._list.array[Z$a]&&(this._list.array[Z$a].isOpen=Z$b,this._list.array=this.getArray())},Z$c.fresh=function(){this._list.array=this.getArray(),this.repaint()},Z$c.parseXml=function(Z$a,Z$b,Z$c,Z$d){var Z$e,Z$f=Z$a.childNodes,Z$i=Z$f.length;if(!Z$d){Z$e={};var Z$j,Z$k=Z$a.attributes;for(var Z$l in Z$k){var Z$m=(Z$j=Z$k[Z$l]).nodeName,Z$n=Z$j.nodeValue;Z$e[Z$m]="true"==Z$n||"false"!=Z$n&&Z$n}Z$e.nodeParent=Z$c,0<Z$i&&(Z$e.isDirectory=!0),Z$e.hasChild=0<Z$i,Z$b.push(Z$e)}for(var Z$o=0;Z$o<Z$i;Z$o++){var Z$p=Z$f[Z$o];this.parseXml(Z$p,Z$b,Z$e,!1)}},Z$c.parseOpenStatus=function(Z$a,Z$b){for(var Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++){var Z$e=Z$b[Z$c];if(Z$e.isDirectory)for(var Z$f=0,Z$i=Z$a.length;Z$f<Z$i;Z$f++){var Z$j=Z$a[Z$f];if(Z$j.isDirectory&&this.isSameParent(Z$j,Z$e)&&Z$e.label==Z$j.label){Z$e.isOpen=Z$j.isOpen;break}}}},Z$c.isSameParent=function(Z$a,Z$b){return null==Z$a.nodeParent&&null==Z$b.nodeParent||null!=Z$a.nodeParent&&null!=Z$b.nodeParent&&(Z$a.nodeParent.label==Z$b.nodeParent.label&&this.isSameParent(Z$a.nodeParent,Z$b.nodeParent))},Z$c.filter=function(Z$a){if(Boolean(Z$a)){var Z$b=[];this.getFilterSource(this._source,Z$b,Z$a),this._list.array=Z$b}else this._list.array=this.getArray()},Z$c.getFilterSource=function(Z$a,Z$b,Z$c){var Z$d;for(var Z$e in Z$c=Z$c.toLocaleLowerCase(),Z$a)!(Z$d=Z$a[Z$e]).isDirectory&&-1<String(Z$d.label).toLowerCase().indexOf(Z$c)&&(Z$d.x=0,Z$b.push(Z$d)),Z$d.child&&0<Z$d.child.length&&this.getFilterSource(Z$d.child,Z$b,Z$c)},Z$i(0,Z$c,"spaceBottom",function(){return this._list.spaceY},function(Z$a){this._list.spaceY=Z$a}),Z$i(0,Z$c,"keepStatus",function(){return this._keepStatus},function(Z$a){this._keepStatus=Z$a}),Z$i(0,Z$c,"itemRender",function(){return this._list.itemRender},function(Z$a){this._list.itemRender=Z$a}),Z$i(0,Z$c,"array",function(){return this._list.array},function(Z$a){this._keepStatus&&this._list.array&&Z$a&&this.parseOpenStatus(this._list.array,Z$a),this._source=Z$a,this._list.array=this.getArray()}),Z$i(0,Z$c,"mouseHandler",function(){return this._list.mouseHandler},function(Z$a){this._list.mouseHandler=Z$a}),Z$i(0,Z$c,"dataSource",Z$a.prototype._$get_dataSource,function(Z$a){this._dataSource=Z$a,Z$r.superSet(Z$J,this,"dataSource",Z$a)}),Z$i(0,Z$c,"source",function(){return this._source}),Z$i(0,Z$c,"scrollBar",function(){return this._list.scrollBar}),Z$i(0,Z$c,"list",function(){return this._list}),Z$i(0,Z$c,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(Z$a){this._list.vScrollBarSkin=Z$a}),Z$i(0,Z$c,"renderHandler",function(){return this._renderHandler},function(Z$a){this._renderHandler=Z$a}),Z$i(0,Z$c,"selectedIndex",function(){return this._list.selectedIndex},function(Z$a){this._list.selectedIndex=Z$a}),Z$i(0,Z$c,"spaceLeft",function(){return this._spaceLeft},function(Z$a){this._spaceLeft=Z$a}),Z$i(0,Z$c,"selectedItem",function(){return this._list.selectedItem},function(Z$a){this._list.selectedItem=Z$a}),Z$i(0,Z$c,"width",Z$a.prototype._$get_width,function(Z$a){Z$r.superSet(Z$J,this,"width",Z$a),this._list.width=Z$a}),Z$i(0,Z$c,"height",Z$a.prototype._$get_height,function(Z$a){Z$r.superSet(Z$J,this,"height",Z$a),this._list.height=Z$a}),Z$i(0,Z$c,"xml",null,function(Z$a){var Z$b=[];this.parseXml(Z$a.childNodes[0],Z$b,null,!0),this.array=Z$b}),Z$i(0,Z$c,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),Z$b}(Z$J),Z$aa=function(Z$a){function Z$b(){this._items=null,this._selectedIndex=0,Z$b.__super.call(this),this._setIndexHandler=Z$o.create(this,this.setIndex,null,!1)}Z$f(Z$b,"laya.ui.ViewStack",Z$a);var Z$c=Z$b.prototype;return Z$r.imps(Z$c,{"laya.ui.IItem":!0}),Z$c.setItems=function(Z$a){this.removeChildren();for(var Z$b=0,Z$c=0,Z$d=Z$a.length;Z$c<Z$d;Z$c++){var Z$e=Z$a[Z$c];Z$e&&(Z$e.name="item"+Z$b,this.addChild(Z$e),Z$b++)}this.initItems()},Z$c.addItem=function(Z$a){Z$a.name="item"+this._items.length,this.addChild(Z$a),this.initItems()},Z$c.initItems=function(){this._items=[];for(var Z$a=0;Z$a<1e4;Z$a++){var Z$b=this.getChildByName("item"+Z$a);if(null==Z$b)break;this._items.push(Z$b),Z$b.visible=Z$a==this._selectedIndex}},Z$c.setSelect=function(Z$a,Z$b){this._items&&-1<Z$a&&Z$a<this._items.length&&(this._items[Z$a].visible=Z$b)},Z$c.setIndex=function(Z$a){this.selectedIndex=Z$a},Z$i(0,Z$c,"dataSource",Z$a.prototype._$get_dataSource,function(Z$a){if("number"==typeof(this._dataSource=Z$a)&&Math.floor(Z$a)==Z$a||"string"==typeof Z$a)this.selectedIndex=parseInt(Z$a);else for(var Z$b in this._dataSource)this.hasOwnProperty(Z$b)&&(this[Z$b]=this._dataSource[Z$b])}),Z$i(0,Z$c,"selectedIndex",function(){return this._selectedIndex},function(Z$a){this._selectedIndex!=Z$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=Z$a,this.setSelect(this._selectedIndex,!0))}),Z$i(0,Z$c,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(Z$a){this.selectedIndex=this._items.indexOf(Z$a)}),Z$i(0,Z$c,"items",function(){return this._items}),Z$i(0,Z$c,"setIndexHandler",function(){return this._setIndexHandler},function(Z$a){this._setIndexHandler=Z$a}),Z$b}(Z$J),Z$ba=function(Z$a){function Z$b(){Z$b.__super.call(this)}return Z$f(Z$b,"laya.ui.VScrollBar",Z$O),Z$b}(),Z$ca=function(Z$b){function Z$c(Z$a){this._bg=null,this._skin=null,Z$c.__super.call(this),void 0===Z$a&&(Z$a=""),this.text=Z$a,this.skin=this.skin}Z$f(Z$c,"laya.ui.TextInput",Z$b);var Z$a=Z$c.prototype;return Z$a.preinitialize=function(){this.mouseEnabled=!0},Z$a.destroy=function(Z$a){Z$u.clearCache(this,this._skin),void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._bg&&this._bg.destroy(),this._bg=null},Z$a.createChildren=function(){this.addChild(this._tf=new Z$p),this._tf.padding=Z$D.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},Z$a._onFocus=function(){this.event("focus",this)},Z$a._onBlur=function(){this.event("blur",this)},Z$a._onInput=function(){this.event("input",this)},Z$a._onEnter=function(){this.event("enter",this)},Z$a.initialize=function(){this.width=128,this.height=22},Z$a.select=function(){this._tf.select()},Z$a.setSelection=function(Z$a,Z$b){this._tf.setSelection(Z$a,Z$b)},Z$i(0,Z$a,"text",Z$b.prototype._$get_text,function(Z$a){this._tf.text!=Z$a&&(Z$a+="",this._tf.text=Z$a,this.event("change"))}),Z$i(0,Z$a,"bg",function(){return this._bg},function(Z$a){this.graphics=this._bg=Z$a}),Z$i(0,Z$a,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(Z$a){this._tf.inputElementYAdjuster=Z$a}),Z$i(0,Z$a,"multiline",function(){return this._tf.multiline},function(Z$a){this._tf.multiline=Z$a}),Z$i(0,Z$a,"skin",function(){return this._skin},function(Z$a){this._skin!=Z$a&&(Z$u.clearCache(this,this._skin),this._skin=Z$a,this._bg||(this.graphics=this._bg=new Z$G),Z$u.keepCache(this,this._skin),this._bg.source=Z$u.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),Z$i(0,Z$a,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(Z$a){this._bg||(this.graphics=this._bg=new Z$G),this._bg.sizeGrid=Z$E.fillArray(Z$D.defaultSizeGrid,Z$a,Number)}),Z$i(0,Z$a,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(Z$a){this._tf.inputElementXAdjuster=Z$a}),Z$i(0,Z$a,"width",Z$b.prototype._$get_width,function(Z$a){Z$r.superSet(Z$R,this,"width",Z$a),this._bg&&(this._bg.width=Z$a)}),Z$i(0,Z$a,"height",Z$b.prototype._$get_height,function(Z$a){Z$r.superSet(Z$R,this,"height",Z$a),this._bg&&(this._bg.height=Z$a)}),Z$i(0,Z$a,"editable",function(){return this._tf.editable},function(Z$a){this._tf.editable=Z$a}),Z$i(0,Z$a,"restrict",function(){return this._tf.restrict},function(Z$a){this._tf.restrict=Z$a}),Z$i(0,Z$a,"prompt",function(){return this._tf.prompt},function(Z$a){this._tf.prompt=Z$a}),Z$i(0,Z$a,"promptColor",function(){return this._tf.promptColor},function(Z$a){this._tf.promptColor=Z$a}),Z$i(0,Z$a,"maxChars",function(){return this._tf.maxChars},function(Z$a){this._tf.maxChars=Z$a}),Z$i(0,Z$a,"focus",function(){return this._tf.focus},function(Z$a){this._tf.focus=Z$a}),Z$i(0,Z$a,"type",function(){return this._tf.type},function(Z$a){this._tf.type=Z$a}),Z$i(0,Z$a,"asPassword",function(){return this._tf.asPassword},function(Z$a){this._tf.asPassword=Z$a}),Z$c}(Z$R),Z$da=function(Z$a){function Z$b(){Z$b.__super.call(this)}return Z$f(Z$b,"laya.ui.VSlider",Z$P),Z$b}(),Z$ea=function(Z$a){function Z$d(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,Z$d.__super.call(this)}Z$f(Z$d,"laya.ui.Dialog",Z$a);var Z$b=Z$d.prototype;return Z$b.initialize=function(){this.popupEffect=Z$d.manager.popupEffectHandler,this.closeEffect=Z$d.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},Z$b._dealDragArea=function(){var Z$a=this.getChildByName("drag");Z$a&&(this.dragArea=Z$a.x+","+Z$a.y+","+Z$a.width+","+Z$a.height,Z$a.removeSelf())},Z$b._onClick=function(Z$a){var Z$b=Z$a.target;if(Z$b)switch(Z$b.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(Z$b.name)}},Z$b.show=function(Z$a,Z$b){void 0===Z$a&&(Z$a=!1),void 0===Z$b&&(Z$b=!0),this._open(!1,Z$a,Z$b)},Z$b.popup=function(Z$a,Z$b){void 0===Z$a&&(Z$a=!1),void 0===Z$b&&(Z$b=!0),this._open(!0,Z$a,Z$b)},Z$b._open=function(Z$a,Z$b,Z$c){Z$d.manager.lock(!1),this.isModal=Z$a,Z$d.manager.open(this,Z$b,Z$c)},Z$b.onOpened=function(){},Z$b.close=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!0),Z$d.manager.close(this,Z$a,Z$b)},Z$b.onClosed=function(Z$a){},Z$b._onMouseDown=function(Z$a){var Z$b=this.getMousePoint();this._dragArea.contains(Z$b.x,Z$b.y)?this.startDrag():this.stopDrag()},Z$i(0,Z$b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(Z$a){if(Z$a){var Z$b=Z$E.fillArray([0,0,0,0],Z$a,Number);this._dragArea=new Z$t(Z$b[0],Z$b[1],Z$b[2],Z$b[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),Z$i(0,Z$b,"isPopup",function(){return null!=this.parent}),Z$i(0,Z$b,"zOrder",Z$a.prototype._$get_zOrder,function(Z$a){Z$r.superSet(Z$T,this,"zOrder",Z$a),Z$d.manager._checkMask()}),Z$i(1,Z$d,"manager",function(){return Z$d._manager=Z$d._manager||new Z$I},function(Z$a){Z$d._manager=Z$a}),Z$d.setLockView=function(Z$a){Z$d.manager.setLockView(Z$a)},Z$d.lock=function(Z$a){Z$d.manager.lock(Z$a)},Z$d.closeAll=function(){Z$d.manager.closeAll()},Z$d.getDialogsByGroup=function(Z$a){return Z$d.manager.getDialogsByGroup(Z$a)},Z$d.closeByGroup=function(Z$a){return Z$d.manager.closeByGroup(Z$a)},Z$d.CLOSE="close",Z$d.CANCEL="cancel",Z$d.SURE="sure",Z$d.NO="no",Z$d.OK="ok",Z$d.YES="yes",Z$d._manager=null,Z$d}(Z$T),Z$fa=function(Z$a){function Z$b(){Z$b.__super.call(this)}Z$f(Z$b,"laya.ui.HBox",Z$a);var Z$c=Z$b.prototype;return Z$c.sortItem=function(Z$a){Z$a&&Z$a.sort(function(Z$a,Z$b){return Z$a.x-Z$b.x})},Z$c.changeItems=function(){this._itemChanged=!1;for(var Z$a=[],Z$b=0,Z$c=0,Z$d=this.numChildren;Z$c<Z$d;Z$c++){var Z$e=this.getChildAt(Z$c);Z$e&&Z$e.layoutEnabled&&(Z$a.push(Z$e),Z$b=this._height?this._height:Math.max(Z$b,Z$e.height*Z$e.scaleY))}this.sortItem(Z$a);var Z$f=0;for(Z$c=0,Z$d=Z$a.length;Z$c<Z$d;Z$c++)(Z$e=Z$a[Z$c]).x=Z$f,Z$f+=Z$e.width*Z$e.scaleX+this._space,"top"==this._align?Z$e.y=0:"middle"==this._align?Z$e.y=.5*(Z$b-Z$e.height*Z$e.scaleY):"bottom"==this._align&&(Z$e.y=Z$b-Z$e.height*Z$e.scaleY);this.changeSize()},Z$i(0,Z$c,"height",Z$a.prototype._$get_height,function(Z$a){this._height!=Z$a&&(Z$r.superSet(Z$V,this,"height",Z$a),this.callLater(this.changeItems))}),Z$b.NONE="none",Z$b.TOP="top",Z$b.MIDDLE="middle",Z$b.BOTTOM="bottom",Z$b}(Z$V),Z$ia=function(Z$a){function Z$b(){Z$b.__super.call(this)}Z$f(Z$b,"laya.ui.VBox",Z$a);var Z$c=Z$b.prototype;return Z$c.changeItems=function(){this._itemChanged=!1;for(var Z$a=[],Z$b=0,Z$c=0,Z$d=this.numChildren;Z$c<Z$d;Z$c++){var Z$e=this.getChildAt(Z$c);Z$e&&Z$e.layoutEnabled&&(Z$a.push(Z$e),Z$b=this._width?this._width:Math.max(Z$b,Z$e.width*Z$e.scaleX))}this.sortItem(Z$a);var Z$f=0;for(Z$c=0,Z$d=Z$a.length;Z$c<Z$d;Z$c++)(Z$e=Z$a[Z$c]).y=Z$f,Z$f+=Z$e.height*Z$e.scaleY+this._space,"left"==this._align?Z$e.x=0:"center"==this._align?Z$e.x=.5*(Z$b-Z$e.width*Z$e.scaleX):"right"==this._align&&(Z$e.x=Z$b-Z$e.width*Z$e.scaleX);this.changeSize()},Z$i(0,Z$c,"width",Z$a.prototype._$get_width,function(Z$a){this._width!=Z$a&&(Z$r.superSet(Z$V,this,"width",Z$a),this.callLater(this.changeItems))}),Z$b.NONE="none",Z$b.LEFT="left",Z$b.CENTER="center",Z$b.RIGHT="right",Z$b}(Z$V),Z$ja=function(Z$a){function Z$b(){Z$b.__super.call(this)}return Z$f(Z$b,"laya.ui.RadioGroup",Z$_),Z$b.prototype.createItem=function(Z$a,Z$b){return new Z$g(Z$a,Z$b)},Z$b}(),Z$ka=function(Z$a){function Z$b(){Z$b.__super.call(this)}return Z$f(Z$b,"laya.ui.Tab",Z$_),Z$b.prototype.createItem=function(Z$a,Z$b){return new Z$K(Z$a,Z$b)},Z$b}(),Z$la=function(Z$b){function Z$c(Z$a){this._vScrollBar=null,this._hScrollBar=null,void 0===Z$a&&(Z$a=""),Z$c.__super.call(this,Z$a)}Z$f(Z$c,"laya.ui.TextArea",Z$b);var Z$a=Z$c.prototype;return Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},Z$a.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},Z$a.onVBarChanged=function(Z$a){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},Z$a.onHBarChanged=function(Z$a){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},Z$a.changeScroll=function(){var Z$a=this._vScrollBar&&0<this._tf.maxScrollY,Z$b=this._hScrollBar&&0<this._tf.maxScrollX,Z$c=Z$a?this._width-this._vScrollBar.width:this._width,Z$d=Z$b?this._height-this._hScrollBar.height:this._height,Z$e=this._tf.padding||Z$D.labelPadding;this._tf.width=Z$c,this._tf.height=Z$d,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-Z$e[2],this._vScrollBar.y=Z$e[1],this._vScrollBar.height=this._height-(Z$b?this._hScrollBar.height:0)-Z$e[1]-Z$e[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=Z$d/Math.max(this._tf.textHeight,Z$d),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=Z$a),this._hScrollBar&&(this._hScrollBar.x=Z$e[0],this._hScrollBar.y=this._height-this._hScrollBar.height-Z$e[3],this._hScrollBar.width=this._width-(Z$a?this._vScrollBar.width:0)-Z$e[0]-Z$e[2],this._hScrollBar.scrollSize=Math.max(.033*Z$c,1),this._hScrollBar.thumbPercent=Z$c/Math.max(this._tf.textWidth,Z$c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=Z$b)},Z$a.scrollTo=function(Z$a){this.commitMeasure(),this._tf.scrollY=Z$a},Z$i(0,Z$a,"scrollY",function(){return this._tf.scrollY}),Z$i(0,Z$a,"width",Z$b.prototype._$get_width,function(Z$a){Z$r.superSet(Z$ca,this,"width",Z$a),this.callLater(this.changeScroll)}),Z$i(0,Z$a,"hScrollBar",function(){return this._hScrollBar}),Z$i(0,Z$a,"height",Z$b.prototype._$get_height,function(Z$a){Z$r.superSet(Z$ca,this,"height",Z$a),this.callLater(this.changeScroll)}),Z$i(0,Z$a,"maxScrollX",function(){return this._tf.maxScrollX}),Z$i(0,Z$a,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(Z$a){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new Z$ba),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=Z$a}),Z$i(0,Z$a,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(Z$a){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new Z$Y),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=Z$a}),Z$i(0,Z$a,"vScrollBar",function(){return this._vScrollBar}),Z$i(0,Z$a,"maxScrollY",function(){return this._tf.maxScrollY}),Z$i(0,Z$a,"scrollX",function(){return this._tf.scrollX}),Z$c}(Z$ca);!function(Z$a){function Z$b(){this._uiView=null,this.isCloseOther=!1,Z$b.__super.call(this)}Z$f(Z$b,"laya.ui.AsynDialog",Z$ea);var Z$c=Z$b.prototype;Z$c.createView=function(Z$a){this._uiView=Z$a},Z$c._open=function(Z$a,Z$b,Z$c){this.isModal=Z$a,this.isCloseOther=Z$b,Z$ea.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},Z$c.onCreated=function(){this.createUI(),this.onOpen()},Z$c.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},Z$c.onOpen=function(){Z$ea.manager.open(this,this.isCloseOther),Z$ea.manager.lock(!1)},Z$c.close=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!0),Z$ea.manager.close(this),this.onClose()},Z$c.onClose=function(){},Z$c.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),laya.ui.View.prototype.destroy.call(this,Z$a),this._uiView=null,this.onDestroy()},Z$c.onDestroy=function(){}}();Z$r.__init([Z$T])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(Z$a,Z$b){"use strict";for(var Z$c in Object.defineProperty(Z$b,"__esModule",{value:!0}),Laya){var Z$d=Laya[Z$c];Z$d&&Z$d.__isclass&&(Z$b[Z$c]=Z$d)}}),function(Z$o,Z$a,Z$x){Z$x.un,Z$x.uns;var Z$n=Z$x.static,Z$p=Z$x.class,Z$q=Z$x.getset,Z$d=Z$x.__newvec,Z$w=laya.maths.Arith,Z$i=laya.webgl.atlas.AtlasResourceManager,Z$c=laya.webgl.shader.BaseShader,Z$H=laya.utils.Browser,Z$j=laya.webgl.utils.Buffer,Z$y=laya.utils.Byte,Z$e=laya.utils.ClassUtils,Z$k=Z$x.Config,Z$f=(laya.events.Event,laya.events.EventDispatcher),Z$D=laya.utils.Handler,Z$t=laya.net.Loader,Z$b=laya.net.LoaderManager,Z$l=(laya.maths.MathUtil,laya.display.Node),Z$r=laya.renders.Render,Z$m=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),Z$s=laya.resource.Resource,Z$u=laya.utils.RunDriver,Z$v=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),Z$z=laya.display.Sprite,Z$A=laya.utils.Stat,Z$B=laya.utils.StringKey,Z$E=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),Z$C=laya.utils.Utils,Z$F=laya.webgl.WebGL,Z$G=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;Z$x.interface("laya.d3.core.IClone"),Z$x.interface("laya.d3.graphics.IVertex"),Z$x.interface("laya.d3.core.render.IUpdate"),Z$x.interface("laya.d3.core.scene.ITreeNode"),Z$x.interface("laya.d3.core.render.IRenderable");(function(){function Z$K(){}Z$p(Z$K,"laya.d3.animation.AnimationClipParser01"),Z$K.READ_DATA=function(){Z$K._DATA.offset=Z$K._reader.getUint32(),Z$K._DATA.size=Z$K._reader.getUint32()},Z$K.READ_BLOCK=function(){for(var Z$a=Z$K._BLOCK.count=Z$K._reader.getUint16(),Z$b=Z$K._BLOCK.blockStarts=[],Z$c=Z$K._BLOCK.blockLengths=[],Z$d=0;Z$d<Z$a;Z$d++)Z$b.push(Z$K._reader.getUint32()),Z$c.push(Z$K._reader.getUint32())},Z$K.READ_STRINGS=function(){var Z$a=Z$K._reader.getUint32(),Z$b=Z$K._reader.getUint16(),Z$c=Z$K._reader.pos;Z$K._reader.pos=Z$a+Z$K._DATA.offset;for(var Z$d=0;Z$d<Z$b;Z$d++)Z$K._strings[Z$d]=Z$K._reader.readUTFString();Z$K._reader.pos=Z$c},Z$K.parse=function(Z$a,Z$b){Z$K._animationClip=Z$a;(Z$K._reader=Z$b).__getBuffer();Z$K.READ_DATA(),Z$K.READ_BLOCK(),Z$K.READ_STRINGS();for(var Z$c=0,Z$d=Z$K._BLOCK.count;Z$c<Z$d;Z$c++){var Z$e=Z$b.getUint16(),Z$f=Z$K._strings[Z$e],Z$i=Z$K["READ_"+Z$f];if(null==Z$i)throw new Error("model file err,no this function:"+Z$e+" "+Z$f);Z$i.call()}},Z$K.READ_ANIMATIONS=function(){var Z$a,Z$b=0,Z$c=0,Z$d=Z$K._reader,Z$e=Z$d.__getBuffer(),Z$f=[],Z$i=Z$d.getUint8();for(Z$f.length=Z$i,Z$b=0;Z$b<Z$i;Z$b++)Z$f[Z$b]=Z$d.getUint16();var Z$j=[],Z$k=Z$d.getUint16();for(Z$j.length=Z$k,Z$b=0;Z$b<Z$k;Z$b++)Z$j[Z$b]=Z$d.getFloat32();var Z$l=Z$K._animationClip;Z$l.name=Z$K._strings[Z$d.getUint16()];var Z$m=Z$l._duration=Z$d.getFloat32();Z$l.islooping=!!Z$d.getByte(),Z$l._frameRate=Z$d.getInt16();var Z$n=Z$d.getInt16(),Z$o=Z$l._nodes=new Array;Z$o.length=Z$n,(Z$l._publicClipDatas=[]).length=Z$n;var Z$p=Z$l._nodesMap={},Z$q=0,Z$r=0;for(Z$b=0;Z$b<Z$n;Z$b++){Z$a=Z$o[Z$b]=new Z$S;var Z$s=Z$d.getUint16(),Z$t=Z$a.path=[];for(Z$t.length=Z$s,Z$c=0;Z$c<Z$s;Z$c++)Z$t[Z$c]=Z$K._strings[Z$d.getUint16()];var Z$u=Z$t.join("/"),Z$v=Z$p[Z$u];Z$v||(Z$p[Z$u]=Z$v=[]),Z$v.push(Z$a);var Z$w=Z$d.getInt16();-1!==Z$w&&(Z$a.componentType=Z$K._strings[Z$w]);var Z$x=Z$Q._propertyIndexDic[Z$K._strings[Z$d.getUint16()]];if(null==Z$x)throw new Error("AnimationClipParser01:unknown property name.");var Z$y=Z$x<4,Z$z=!Z$y||Z$y&&""===Z$t[0];(Z$a._cacheProperty=Z$z)?Z$q++:Z$r++,Z$a.propertyNameID=Z$x;var Z$A=Z$f[Z$d.getUint8()];Z$a.keyFrameWidth=Z$A/4;var Z$B=Z$a.keyFrames=[],Z$C=Z$B.length=Z$d.getUint16(),Z$D=null,Z$E=NaN;for(Z$c=0;Z$c<Z$C;Z$c++){var Z$F=Z$B[Z$c]=new Z$R;Z$E=Z$F.startTime=Z$j[Z$d.getUint16()];var Z$G=Z$d.pos;Z$F.inTangent=new Float32Array(Z$e.slice(Z$G,Z$G+Z$A)),Z$d.pos+=Z$A,Z$G=Z$d.pos,Z$F.outTangent=new Float32Array(Z$e.slice(Z$G,Z$G+Z$A)),Z$d.pos+=Z$A,Z$G=Z$d.pos,Z$F.data=new Float32Array(Z$e.slice(Z$G,Z$G+Z$A)),Z$d.pos+=Z$A,Z$D&&(Z$D.next=Z$F,Z$D.duration=Z$E-Z$D.startTime),Z$D=Z$F}Z$F.next=null,Z$F.duration=Z$m-Z$E}var Z$H=Z$l._nodeToCachePropertyMap=new Int32Array(Z$n),Z$I=Z$l._cachePropertyMap=new Int32Array(Z$q),Z$J=Z$l._unCachePropertyMap=new Int32Array(Z$r);for(Z$q=Z$r=0,Z$b=0;Z$b<Z$n;Z$b++)(Z$a=Z$o[Z$b])._cacheProperty?(Z$H[Z$b]=Z$q,Z$I[Z$q++]=Z$b):Z$J[Z$r++]=Z$b},Z$K._animationClip=null,Z$K._reader=null,Z$K._strings=[],Z$n(Z$K,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function Z$O(){}Z$p(Z$O,"laya.d3.animation.AnimationClipParser02"),Z$O.READ_DATA=function(){Z$O._DATA.offset=Z$O._reader.getUint32(),Z$O._DATA.size=Z$O._reader.getUint32()},Z$O.READ_BLOCK=function(){for(var Z$a=Z$O._BLOCK.count=Z$O._reader.getUint16(),Z$b=Z$O._BLOCK.blockStarts=[],Z$c=Z$O._BLOCK.blockLengths=[],Z$d=0;Z$d<Z$a;Z$d++)Z$b.push(Z$O._reader.getUint32()),Z$c.push(Z$O._reader.getUint32())},Z$O.READ_STRINGS=function(){var Z$a=Z$O._reader.getUint32(),Z$b=Z$O._reader.getUint16(),Z$c=Z$O._reader.pos;Z$O._reader.pos=Z$a+Z$O._DATA.offset;for(var Z$d=0;Z$d<Z$b;Z$d++)Z$O._strings[Z$d]=Z$O._reader.readUTFString();Z$O._reader.pos=Z$c},Z$O.parse=function(Z$a,Z$b){Z$O._animationClip=Z$a;(Z$O._reader=Z$b).__getBuffer();Z$O.READ_DATA(),Z$O.READ_BLOCK(),Z$O.READ_STRINGS();for(var Z$c=0,Z$d=Z$O._BLOCK.count;Z$c<Z$d;Z$c++){var Z$e=Z$b.getUint16(),Z$f=Z$O._strings[Z$e],Z$i=Z$O["READ_"+Z$f];if(null==Z$i)throw new Error("model file err,no this function:"+Z$e+" "+Z$f);Z$i.call()}},Z$O.READ_ANIMATIONS=function(){var Z$a,Z$b=0,Z$c=0,Z$d=Z$O._reader,Z$e=Z$d.__getBuffer(),Z$f=[],Z$i=Z$d.getUint8();for(Z$f.length=Z$i,Z$b=0;Z$b<Z$i;Z$b++)Z$f[Z$b]=Z$d.getUint16();var Z$j=[],Z$k=Z$d.getUint16();for(Z$j.length=Z$k,Z$b=0;Z$b<Z$k;Z$b++)Z$j[Z$b]=Z$d.getFloat32();var Z$l=Z$O._animationClip;Z$l.name=Z$O._strings[Z$d.getUint16()];var Z$m=Z$l._duration=Z$d.getFloat32();Z$l.islooping=!!Z$d.getByte(),Z$l._frameRate=Z$d.getInt16();var Z$n=Z$d.getInt16(),Z$o=Z$l._nodes=new Array;Z$o.length=Z$n,(Z$l._publicClipDatas=[]).length=Z$n;var Z$p=Z$l._nodesMap={},Z$q=0,Z$r=0;for(Z$b=0;Z$b<Z$n;Z$b++){Z$a=Z$o[Z$b]=new Z$S;var Z$s=Z$d.getUint16(),Z$t=Z$a.path=[];for(Z$t.length=Z$s,Z$c=0;Z$c<Z$s;Z$c++)Z$t[Z$c]=Z$O._strings[Z$d.getUint16()];var Z$u=Z$t.join("/"),Z$v=Z$p[Z$u];Z$v||(Z$p[Z$u]=Z$v=[]),Z$v.push(Z$a);var Z$w=Z$d.getInt16();-1!==Z$w&&(Z$a.componentType=Z$O._strings[Z$w]);var Z$x=Z$Q._propertyIndexDic[Z$O._strings[Z$d.getUint16()]];if(null==Z$x)throw new Error("AnimationClipParser02:unknown property name.");var Z$y=Z$x<4,Z$z=!Z$y||Z$y&&""===Z$t[0];(Z$a._cacheProperty=Z$z)?Z$q++:Z$r++,Z$a.propertyNameID=Z$x;var Z$A=Z$f[Z$d.getUint8()];Z$a.keyFrameWidth=Z$A/4;var Z$B=Z$a.keyFrames=[],Z$C=Z$B.length=Z$d.getUint16(),Z$D=null,Z$E=NaN;for(Z$c=0;Z$c<Z$C;Z$c++){var Z$F=Z$B[Z$c]=new Z$R;Z$E=Z$F.startTime=Z$j[Z$d.getUint16()];var Z$G=Z$d.pos;Z$F.inTangent=new Float32Array(Z$e.slice(Z$G,Z$G+Z$A)),Z$d.pos+=Z$A,Z$G=Z$d.pos,Z$F.outTangent=new Float32Array(Z$e.slice(Z$G,Z$G+Z$A)),Z$d.pos+=Z$A,Z$G=Z$d.pos,Z$F.data=new Float32Array(Z$e.slice(Z$G,Z$G+Z$A)),Z$d.pos+=Z$A,Z$D&&(Z$D.next=Z$F,Z$D.duration=Z$E-Z$D.startTime),Z$D=Z$F}Z$F.next=null,Z$F.duration=Z$m-Z$E}var Z$H=Z$d.getUint16();for(Z$b=0;Z$b<Z$H;Z$b++){var Z$I,Z$J=new Z$P;Z$J.time=Z$d.getFloat32(),Z$J.eventName=Z$O._strings[Z$d.getUint16()];var Z$K=Z$d.getUint16();for(0<Z$K&&(Z$J.params=Z$I=[]),Z$c=0;Z$c<Z$K;Z$c++){switch(Z$d.getByte()){case 0:Z$I.push(!!Z$d.getByte());break;case 1:Z$I.push(Z$d.getInt32());break;case 2:Z$I.push(Z$d.getFloat32());break;case 3:Z$I.push(Z$O._strings[Z$d.getUint16()]);break;default:throw new Error("unknown type.")}}Z$l.addEvent(Z$J)}var Z$L=Z$l._nodeToCachePropertyMap=new Int32Array(Z$n),Z$M=Z$l._cachePropertyMap=new Int32Array(Z$q),Z$N=Z$l._unCachePropertyMap=new Int32Array(Z$r);for(Z$q=Z$r=0,Z$b=0;Z$b<Z$n;Z$b++)(Z$a=Z$o[Z$b])._cacheProperty?(Z$L[Z$b]=Z$q,Z$M[Z$q++]=Z$b):Z$N[Z$r++]=Z$b},Z$O._animationClip=null,Z$O._reader=null,Z$O._strings=[],Z$n(Z$O,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var Z$P=function(){function Z$a(){this.time=NaN,this.eventName=null,this.params=null}return Z$p(Z$a,"laya.d3.animation.AnimationEvent"),Z$a}(),Z$Q=function(){function Z$d(){this._childs=[],this.transform=new Z$ub(this)}Z$p(Z$d,"laya.d3.animation.AnimationNode");var Z$a=Z$d.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.addChild=function(Z$a){Z$a._parent=this,Z$a.transform.setParent(this.transform),this._childs.push(Z$a)},Z$a.removeChild=function(Z$a){var Z$b=this._childs.indexOf(Z$a);-1!==Z$b&&this._childs.splice(Z$b,1)},Z$a.getChildByName=function(Z$a){for(var Z$b=0,Z$c=this._childs.length;Z$b<Z$c;Z$b++){var Z$d=this._childs[Z$b];if(Z$d.name===Z$a)return Z$d}return null},Z$a.getChildByIndex=function(Z$a){return this._childs[Z$a]},Z$a.getChildCount=function(){return this._childs.length},Z$a.cloneTo=function(Z$a){var Z$b=Z$a;Z$b.name=this.name;for(var Z$c=0,Z$d=this._childs.length;Z$c<Z$d;Z$c++){var Z$e=this._childs[Z$c],Z$f=Z$e.clone();Z$b.addChild(Z$f);var Z$i=Z$e.transform,Z$j=Z$f.transform;Z$j.setLocalPosition(Z$i.getLocalPosition()),Z$j.setLocalRotation(Z$i.getLocalRotation()),Z$j.setLocalScale(Z$i.getLocalScale()),Z$j._localRotationEuler=Z$i._localRotationEuler,Z$j._setWorldMatrixIgnoreUpdate(Z$i.getWorldMatrix())}},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$d.__init__=function(){Z$d.registerAnimationNodeProperty("localPosition",Z$d._getLocalPosition,Z$d._setLocalPosition),Z$d.registerAnimationNodeProperty("localRotation",Z$d._getLocalRotation,Z$d._setLocalRotation),Z$d.registerAnimationNodeProperty("localScale",Z$d._getLocalScale,Z$d._setLocalScale),Z$d.registerAnimationNodeProperty("localRotationEuler",Z$d._getLocalRotationEuler,Z$d._setLocalRotationEuler),Z$d.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",Z$d._getParticleRenderSharedMaterialTintColor,Z$d._setParticleRenderSharedMaterialTintColor),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",Z$d._getMeshRenderSharedMaterialTilingOffset,Z$d._setMeshRenderSharedMaterialTilingOffset),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",Z$d._getMeshRenderSharedMaterialAlbedo,Z$d._setMeshRenderSharedMaterialAlbedo),Z$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",Z$d._getSkinnedMeshRenderSharedMaterialTilingOffset,Z$d._setSkinnedMeshRenderSharedMaterialTilingOffset),Z$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",Z$d._getSkinnedMeshRenderSharedMaterialAlbedo,Z$d._setSkinnedMeshRenderSharedMaterialAlbedo),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",Z$d._getMeshRenderSharedMaterialAlbedo,Z$d._setMeshRenderSharedMaterialAlbedo),Z$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",Z$d._getSkinnedMeshRenderSharedMaterialAlbedo,Z$d._setSkinnedMeshRenderSharedMaterialAlbedo),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",Z$d._getMeshRenderSharedMaterialIntensity,Z$d._setMeshRenderSharedMaterialIntensity),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",Z$d._getMeshRenderSharedMaterialAlpha,Z$d._setMeshRenderSharedMaterialAlpha),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",Z$d._getMeshRenderSharedMaterialAlphaColor,Z$d._setMeshRenderSharedMaterialAlphaColor),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",Z$d._getMeshRenderSharedMaterialBaseColor,Z$d._setMeshRenderSharedMaterialBaseColor),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",Z$d._getMeshRenderSharedMaterialDissolve,Z$d._setMeshRenderSharedMaterialDissolve),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",Z$d._getMeshRenderSharedMaterialDissolveSpeed,Z$d._setMeshRenderSharedMaterialDissolveSpeed),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",Z$d._getMeshRenderSharedMaterialMMultiplier,Z$d._setMeshRenderSharedMaterialMMultiplier),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",Z$d._getMeshRenderSharedMaterialBaseScrollSpeedX,Z$d._setMeshRenderSharedMaterialBaseScrollSpeedX),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",Z$d._getMeshRenderSharedMaterialBaseScrollSpeedY,Z$d._setMeshRenderSharedMaterialBaseScrollSpeedY),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",Z$d._getMeshRenderSharedMaterialSecondScrollSpeedX,Z$d._setMeshRenderSharedMaterialSecondScrollSpeedX),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",Z$d._getMeshRenderSharedMaterialSecondScrollSpeedY,Z$d._setMeshRenderSharedMaterialSecondScrollSpeedY),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",Z$d._getMeshRenderSharedMaterialDetailTilingOffset,Z$d._setMeshRenderSharedMaterialDetailTilingOffset),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",Z$d._getMeshRenderSharedMaterialDissolveTilingOffset,Z$d._setMeshRenderSharedMaterialDissolveTilingOffset),Z$d.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",Z$d._getMeshRenderSharedMaterialMaskTilingOffset,Z$d._setMeshRenderSharedMaterialMaskTilingOffset)},Z$d.registerAnimationNodeProperty=function(Z$a,Z$b,Z$c){if(Z$d._propertyIndexDic[Z$a])throw new Error("AnimationNode: this propertyName has registered.");Z$d._propertyIndexDic[Z$a]=Z$d._propertyIDCounter,Z$d._propertyGetFuncs[Z$d._propertyIDCounter]=Z$b,Z$d._propertySetFuncs[Z$d._propertyIDCounter]=Z$c,Z$d._propertyIDCounter++},Z$d._getLocalPosition=function(Z$a,Z$b){return Z$a?Z$a.transform.getLocalPosition():Z$b._transform.localPosition.elements},Z$d._setLocalPosition=function(Z$a,Z$b,Z$c){if(Z$a)Z$a.transform.setLocalPosition(Z$c);else{var Z$d=Z$b._transform,Z$e=Z$d.localPosition;Z$e.elements=Z$c,Z$d.localPosition=Z$e}},Z$d._getLocalRotation=function(Z$a,Z$b){return Z$a?Z$a.transform.getLocalRotation():Z$b._transform.localRotation.elements},Z$d._setLocalRotation=function(Z$a,Z$b,Z$c){if(Z$a)Z$a.transform.setLocalRotation(Z$c);else{var Z$d=Z$b._transform,Z$e=Z$d.localRotation;Z$e.elements=Z$c,Z$d.localRotation=Z$e}},Z$d._getLocalScale=function(Z$a,Z$b){return Z$a?Z$a.transform.getLocalScale():Z$b._transform.localScale.elements},Z$d._setLocalScale=function(Z$a,Z$b,Z$c){if(Z$a)Z$a.transform.setLocalScale(Z$c);else{var Z$d=Z$b._transform,Z$e=Z$d.localScale;Z$e.elements=Z$c,Z$d.localScale=Z$e}},Z$d._getLocalRotationEuler=function(Z$a,Z$b){return Z$a?Z$a.transform.getLocalRotationEuler():Z$b._transform.localRotationEuler.elements},Z$d._setLocalRotationEuler=function(Z$a,Z$b,Z$c){if(Z$a)Z$a.transform.setLocalRotationEuler(Z$c);else{var Z$d=Z$b._transform,Z$e=Z$d.localRotationEuler;Z$e.elements=Z$c,Z$d.localRotationEuler=Z$e}},Z$d._getMeshRenderSharedMaterialTilingOffset=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return Z$b.meshRender.sharedMaterial.tilingOffset.elements},Z$d._setMeshRenderSharedMaterialTilingOffset=function(Z$a,Z$b,Z$c){var Z$d,Z$e;if(Z$a){var Z$f=Z$a.transform._entity;Z$f&&((Z$e=(Z$d=Z$f.owner.meshRender.material).tilingOffset).elements=Z$c,Z$d.tilingOffset=Z$e)}else(Z$e=(Z$d=Z$b.meshRender.material).tilingOffset).elements=Z$c,Z$d.tilingOffset=Z$e},Z$d._getMeshRenderSharedMaterialAlbedo=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.albedoColor.elements:null}return Z$b.meshRender.sharedMaterial.albedoColor.elements},Z$d._setMeshRenderSharedMaterialAlbedo=function(Z$a,Z$b,Z$c){var Z$d,Z$e;if(Z$a){var Z$f=Z$a.transform._entity;Z$f&&((Z$e=(Z$d=Z$f.owner.meshRender.material).albedoColor).elements=Z$c,Z$d.albedoColor=Z$e)}else(Z$e=(Z$d=Z$b.meshRender.material).albedoColor).elements=Z$c,Z$d.albedoColor=Z$e},Z$d._getSkinnedMeshRenderSharedMaterialTilingOffset=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return Z$b.skinnedMeshRender.sharedMaterial.tilingOffset.elements},Z$d._setSkinnedMeshRenderSharedMaterialTilingOffset=function(Z$a,Z$b,Z$c){var Z$d,Z$e;if(Z$a){var Z$f=Z$a.transform._entity;Z$f&&((Z$e=(Z$d=Z$f.owner.skinnedMeshRender.material).tilingOffset).elements=Z$c,Z$d.tilingOffset=Z$e)}else(Z$e=(Z$d=Z$b.skinnedMeshRender.material).tilingOffset).elements=Z$c,Z$d.tilingOffset=Z$e},Z$d._getSkinnedMeshRenderSharedMaterialAlbedo=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return Z$b.skinnedMeshRender.sharedMaterial.albedoColor.elements},Z$d._setSkinnedMeshRenderSharedMaterialAlbedo=function(Z$a,Z$b,Z$c){var Z$d,Z$e;if(Z$a){var Z$f=Z$a.transform._entity;Z$f&&((Z$e=(Z$d=Z$f.owner.skinnedMeshRender.material).albedoColor).elements=Z$c,Z$d.albedoColor=Z$e)}else(Z$e=(Z$d=Z$b.skinnedMeshRender.material).albedoColor).elements=Z$c,Z$d.albedoColor=Z$e},Z$d._getParticleRenderSharedMaterialTintColor=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.particleRender.sharedMaterial.tintColor.elements:null}return Z$b.particleRender.sharedMaterial.tintColor.elements},Z$d._setParticleRenderSharedMaterialTintColor=function(Z$a,Z$b,Z$c){var Z$d,Z$e;if(Z$a){var Z$f=Z$a.transform._entity;Z$f&&((Z$e=(Z$d=Z$f.owner.particleRender.material).tintColor).elements=Z$c,Z$d.tintColor=Z$e)}else(Z$e=(Z$d=Z$b.particleRender.material).tintColor).elements=Z$c,Z$d.tintColor=Z$e},Z$d._getMeshRenderSharedMaterialAlphaColor=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.alphaColor.elements:null}return Z$b.meshRender.sharedMaterial.alphaColor.elements},Z$d._setMeshRenderSharedMaterialAlphaColor=function(Z$a,Z$b,Z$c){var Z$d,Z$e;if(Z$a){var Z$f=Z$a.transform._entity;Z$f&&((Z$e=(Z$d=Z$f.owner.meshRender.material).alphaColor).elements=Z$c,Z$d.alphaColor=Z$e)}else(Z$e=(Z$d=Z$b.meshRender.material).alphaColor).elements=Z$c,Z$d.alphaColor=Z$e},Z$d._getMeshRenderSharedMaterialBaseColor=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.baseColor.elements:null}return Z$b.meshRender.sharedMaterial.baseColor.elements},Z$d._setMeshRenderSharedMaterialBaseColor=function(Z$a,Z$b,Z$c){var Z$d,Z$e;if(Z$a){var Z$f=Z$a.transform._entity;Z$f&&((Z$e=(Z$d=Z$f.owner.meshRender.material).baseColor).elements=Z$c,Z$d.baseColor=Z$e)}else(Z$e=(Z$d=Z$b.meshRender.material).baseColor).elements=Z$c,Z$d.baseColor=Z$e},Z$d._getMeshRenderSharedMaterialDissolve=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.dissolve:0}return Z$b.meshRender.sharedMaterial.dissolve},Z$d._setMeshRenderSharedMaterialDissolve=function(Z$a,Z$b,Z$c){if(Z$a){var Z$d=Z$a.transform._entity;Z$d&&(Z$d.owner.meshRender.material.dissolve=Z$c[0])}else Z$b.meshRender.material.dissolve=Z$c[0]},Z$d._getMeshRenderSharedMaterialDissolveSpeed=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.dissolveSpeed:0}return Z$b.meshRender.sharedMaterial.dissolveSpeed},Z$d._setMeshRenderSharedMaterialDissolveSpeed=function(Z$a,Z$b,Z$c){if(Z$a){var Z$d=Z$a.transform._entity;Z$d&&(Z$d.owner.meshRender.material.dissolveSpeed=Z$c[0])}else Z$b.meshRender.material.dissolveSpeed=Z$c[0]},Z$d._getMeshRenderSharedMaterialMMultiplier=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.mMultiplier:0}return Z$b.meshRender.sharedMaterial.mMultiplier},Z$d._setMeshRenderSharedMaterialMMultiplier=function(Z$a,Z$b,Z$c){if(Z$a){var Z$d=Z$a.transform._entity;Z$d&&(Z$d.owner.meshRender.material.mMultiplier=Z$c[0])}else Z$b.meshRender.material.mMultiplier=Z$c[0]},Z$d._getMeshRenderSharedMaterialBaseScrollSpeedX=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return Z$b.meshRender.sharedMaterial.baseScrollSpeedX},Z$d._setMeshRenderSharedMaterialBaseScrollSpeedX=function(Z$a,Z$b,Z$c){if(Z$a){var Z$d=Z$a.transform._entity;Z$d&&(Z$d.owner.meshRender.material.baseScrollSpeedX=Z$c[0])}else Z$b.meshRender.material.baseScrollSpeedX=Z$c[0]},Z$d._getMeshRenderSharedMaterialBaseScrollSpeedY=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return Z$b.meshRender.sharedMaterial.baseScrollSpeedY},Z$d._setMeshRenderSharedMaterialBaseScrollSpeedY=function(Z$a,Z$b,Z$c){if(Z$a){var Z$d=Z$a.transform._entity;Z$d&&(Z$d.owner.meshRender.material.baseScrollSpeedY=Z$c[0])}else Z$b.meshRender.material.baseScrollSpeedY=Z$c[0]},Z$d._getMeshRenderSharedMaterialSecondScrollSpeedX=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return Z$b.meshRender.sharedMaterial.secondScrollSpeedX},Z$d._setMeshRenderSharedMaterialSecondScrollSpeedX=function(Z$a,Z$b,Z$c){if(Z$a){var Z$d=Z$a.transform._entity;Z$d&&(Z$d.owner.meshRender.material.secondScrollSpeedX=Z$c[0])}else Z$b.meshRender.material.secondScrollSpeedX=Z$c[0]},Z$d._getMeshRenderSharedMaterialSecondScrollSpeedY=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return Z$b.meshRender.sharedMaterial.secondScrollSpeedY},Z$d._setMeshRenderSharedMaterialSecondScrollSpeedY=function(Z$a,Z$b,Z$c){if(Z$a){var Z$d=Z$a.transform._entity;Z$d&&(Z$d.owner.meshRender.material.secondScrollSpeedY=Z$c[0])}else Z$b.meshRender.material.secondScrollSpeedY=Z$c[0]},Z$d._getMeshRenderSharedMaterialAlpha=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.alpha:0}return Z$b.meshRender.sharedMaterial.alpha},Z$d._setMeshRenderSharedMaterialAlpha=function(Z$a,Z$b,Z$c){if(Z$a){var Z$d=Z$a.transform._entity;Z$d&&(Z$d.owner.meshRender.material.alpha=Z$c[0])}else Z$b.meshRender.material.alpha=Z$c[0]},Z$d._getMeshRenderSharedMaterialIntensity=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.intensity:0}return Z$b.meshRender.sharedMaterial.intensity},Z$d._setMeshRenderSharedMaterialIntensity=function(Z$a,Z$b,Z$c){if(Z$a){var Z$d=Z$a.transform._entity;Z$d&&(Z$d.owner.meshRender.material.intensity=Z$c[0])}else Z$b.meshRender.material.intensity=Z$c[0]},Z$d._getMeshRenderSharedMaterialDetailTilingOffset=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return Z$b.meshRender.sharedMaterial.detailTilingOffset.elements},Z$d._setMeshRenderSharedMaterialDetailTilingOffset=function(Z$a,Z$b,Z$c){var Z$d,Z$e;if(Z$a){var Z$f=Z$a.transform._entity;Z$f&&((Z$e=(Z$d=Z$f.owner.meshRender.material).detailTilingOffset).elements=Z$c,Z$d.detailTilingOffset=Z$e)}else(Z$e=(Z$d=Z$b.meshRender.material).detailTilingOffset).elements=Z$c,Z$d.detailTilingOffset=Z$e},Z$d._getMeshRenderSharedMaterialDissolveTilingOffset=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return Z$b.meshRender.sharedMaterial.dissolveTilingOffset.elements},Z$d._setMeshRenderSharedMaterialDissolveTilingOffset=function(Z$a,Z$b,Z$c){var Z$d,Z$e;if(Z$a){var Z$f=Z$a.transform._entity;Z$f&&((Z$e=(Z$d=Z$f.owner.meshRender.material).dissolveTilingOffset).elements=Z$c,Z$d.dissolveTilingOffset=Z$e)}else(Z$e=(Z$d=Z$b.meshRender.material).dissolveTilingOffset).elements=Z$c,Z$d.dissolveTilingOffset=Z$e},Z$d._getMeshRenderSharedMaterialMaskTilingOffset=function(Z$a,Z$b){if(Z$a){var Z$c=Z$a.transform._entity;return Z$c?Z$c.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return Z$b.meshRender.sharedMaterial.maskTilingOffset.elements},Z$d._setMeshRenderSharedMaterialMaskTilingOffset=function(Z$a,Z$b,Z$c){var Z$d,Z$e;if(Z$a){var Z$f=Z$a.transform._entity;Z$f&&((Z$e=(Z$d=Z$f.owner.meshRender.material).maskTilingOffset).elements=Z$c,Z$d.maskTilingOffset=Z$e)}else(Z$e=(Z$d=Z$b.meshRender.material).maskTilingOffset).elements=Z$c,Z$d.maskTilingOffset=Z$e},Z$d._propertyIDCounter=0,Z$d._propertyIndexDic={},Z$d._propertySetFuncs=[],Z$d._propertyGetFuncs=[],Z$d}(),Z$R=function(){function Z$a(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return Z$p(Z$a,"laya.d3.animation.Keyframe"),Z$a}(),Z$S=function(){function Z$a(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return Z$p(Z$a,"laya.d3.animation.KeyframeNode"),Z$a}(),Z$I=(function(){function Z$a(){this._tempVector30=new Z$ib,this._tempVector31=new Z$ib,this._tempVector32=new Z$ib,this._a=new Z$ib,this._b=new Z$ib,this._c=new Z$ib,this._d=new Z$ib}Z$p(Z$a,"laya.d3.core.glitter.SplineCurvePositionVelocity");var Z$b=Z$a.prototype;Z$b.Init=function(Z$a,Z$b,Z$c,Z$d){Z$a.cloneTo(this._d),Z$b.cloneTo(this._c),Z$ib.scale(Z$a,2,this._a),Z$ib.scale(Z$c,2,this._tempVector30),Z$ib.subtract(this._a,this._tempVector30,this._a),Z$ib.add(this._a,Z$b,this._a),Z$ib.add(this._a,Z$d,this._a),Z$ib.scale(Z$c,3,this._b),Z$ib.scale(Z$a,3,this._tempVector30),Z$ib.subtract(this._b,this._tempVector30,this._b),Z$ib.subtract(this._b,Z$d,this._b),Z$ib.scale(Z$b,2,this._tempVector30),Z$ib.subtract(this._b,this._tempVector30,this._b)},Z$b.Slerp=function(Z$a,Z$b){Z$ib.scale(this._a,Z$a*Z$a*Z$a,this._tempVector30),Z$ib.scale(this._b,Z$a*Z$a,this._tempVector31),Z$ib.scale(this._c,Z$a,this._tempVector32),Z$ib.add(this._tempVector30,this._tempVector31,Z$b),Z$ib.add(Z$b,this._tempVector32,Z$b),Z$ib.add(Z$b,this._d,Z$b)}}(),function(){function Z$M(Z$a,Z$b,Z$c,Z$d){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=Z$a,this._h=Z$b,this._minHeight=Z$c,this._maxHeight=Z$d}Z$p(Z$M,"laya.d3.core.HeightMap");var Z$a=Z$M.prototype;Z$a._inBounds=function(Z$a,Z$b){return 0<=Z$a&&Z$a<this._h&&0<=Z$b&&Z$b<this._w},Z$a.getHeight=function(Z$a,Z$b){return this._inBounds(Z$a,Z$b)?this._datas[Z$a][Z$b]:NaN},Z$q(0,Z$a,"width",function(){return this._w}),Z$q(0,Z$a,"height",function(){return this._h}),Z$q(0,Z$a,"maxHeight",function(){return this._maxHeight}),Z$q(0,Z$a,"minHeight",function(){return this._minHeight}),Z$M.creatFromMesh=function(Z$a,Z$b,Z$c,Z$d){for(var Z$e=[],Z$f=[],Z$i=Z$a.getSubMeshCount(),Z$j=0;Z$j<Z$i;Z$j++){for(var Z$k=Z$a.getSubMesh(Z$j),Z$l=Z$k._getVertexBuffer(),Z$m=Z$l.getData(),Z$n=[],Z$o=0;Z$o<Z$m.length;Z$o+=Z$l.vertexDeclaration.vertexStride/4){var Z$p=new Z$ib(Z$m[Z$o+0],Z$m[Z$o+1],Z$m[Z$o+2]);Z$n.push(Z$p)}Z$e.push(Z$n);var Z$q=Z$k._getIndexBuffer();Z$f.push(Z$q.getData())}var Z$r=Z$a.boundingBox,Z$s=Z$r.min.x,Z$t=Z$r.min.z,Z$u=Z$r.max.x,Z$v=Z$r.max.z,Z$w=Z$r.min.y,Z$x=Z$r.max.y,Z$y=Z$u-Z$s,Z$z=Z$v-Z$t,Z$A=Z$d.elements[0]=Z$y/(Z$b-1),Z$B=Z$d.elements[1]=Z$z/(Z$c-1),Z$C=new Z$M(Z$b,Z$c,Z$w,Z$x),Z$D=Z$M._tempRay,Z$E=Z$D.direction.elements;Z$E[0]=0,Z$E[1]=-1,Z$E[2]=0;var Z$F=Z$x+.1;Z$D.origin.elements[1]=Z$F;for(var Z$G=0;Z$G<Z$c;Z$G++){var Z$H=Z$t+Z$G*Z$B;Z$C._datas[Z$G]=[];for(var Z$I=0;Z$I<Z$b;Z$I++){var Z$J=Z$s+Z$I*Z$A,Z$K=Z$D.origin.elements;Z$K[0]=Z$J,Z$K[2]=Z$H;var Z$L=Z$M._getPosition(Z$D,Z$e,Z$f);Z$C._datas[Z$G][Z$I]=Z$L===Number.MAX_VALUE?NaN:Z$F-Z$L}}return Z$C},Z$M.createFromImage=function(Z$a,Z$b,Z$c){for(var Z$d=Z$a.width,Z$e=Z$a.height,Z$f=new Z$M(Z$d,Z$e,Z$b,Z$c),Z$i=(Z$c-Z$b)/254,Z$j=Z$a.getPixels(),Z$k=0,Z$l=0;Z$l<Z$e;Z$l++)for(var Z$m=Z$f._datas[Z$l]=[],Z$n=0;Z$n<Z$d;Z$n++){var Z$o=Z$j[Z$k++],Z$p=Z$j[Z$k++],Z$q=Z$j[Z$k++],Z$r=Z$j[Z$k++];Z$m[Z$n]=255==Z$o&&255==Z$p&&255==Z$q&&255==Z$r?NaN:(Z$o+Z$p+Z$q)/3*Z$i+Z$b}return Z$f},Z$M._getPosition=function(Z$a,Z$b,Z$c){for(var Z$d=Number.MAX_VALUE,Z$e=0;Z$e<Z$b.length;Z$e++)for(var Z$f=Z$b[Z$e],Z$i=Z$c[Z$e],Z$j=0;Z$j<Z$i.length;Z$j+=3){var Z$k=Z$f[Z$i[Z$j+0]],Z$l=Z$f[Z$i[Z$j+1]],Z$m=Z$f[Z$i[Z$j+2]],Z$n=Z$qb.rayIntersectsTriangle(Z$a,Z$k,Z$l,Z$m);!isNaN(Z$n)&&Z$n<Z$d&&(Z$d=Z$n)}return Z$d},Z$n(Z$M,["_tempRay",function(){return this._tempRay=new Z$eb(new Z$ib,new Z$ib)}])}(),function(){function Z$e(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}Z$p(Z$e,"laya.d3.core.Layer");var Z$a=Z$e.prototype;return Z$a._binarySearchIndex=function(){for(var Z$a=0,Z$b=Z$e._collsionTestList.length-1,Z$c=0;Z$a<=Z$b;){Z$c=Math.floor((Z$a+Z$b)/2);var Z$d=Z$e._collsionTestList[Z$c];if(Z$d==this._number)return Z$c;Z$d>this._number?Z$b=Z$c-1:Z$a=Z$c+1}return Z$a},Z$a._addCollider=function(Z$a){0===this._colliders.length&&Z$e._collsionTestList.splice(this._binarySearchIndex(),0,this._number),Z$a._isRigidbody?(this._colliders.unshift(Z$a),this._nonRigidbodyOffset++):this._colliders.push(Z$a)},Z$a._removeCollider=function(Z$a){var Z$b=this._colliders.indexOf(Z$a);Z$b<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(Z$b,1),0===this._colliders.length&&Z$e._collsionTestList.splice(Z$e._collsionTestList.indexOf(this._number),1)},Z$q(0,Z$a,"number",function(){return this._number}),Z$q(0,Z$a,"visible",function(){return this._visible},function(Z$a){this._visible=Z$a,Z$e._visibleLayers=Z$a?Z$e._visibleLayers|this.mask:Z$e._visibleLayers&~this.mask}),Z$q(0,Z$a,"mask",function(){return this._mask}),Z$q(1,Z$e,"visibleLayers",function(){return Z$e._visibleLayers},function(Z$a){Z$e._visibleLayers=Z$a;for(var Z$b=0,Z$c=Z$e._layerList.length;Z$b<Z$c;Z$b++){var Z$d=Z$e._layerList[Z$b];Z$d._visible=0!=(Z$d._mask&Z$e._visibleLayers)}}),Z$e.__init__=function(){Z$e._layerList.length=31;for(var Z$a=0;Z$a<31;Z$a++){var Z$b=new Z$e;Z$e._layerList[Z$a]=Z$b,0===Z$a?(Z$b.name="Default Layer",Z$b.visible=!0):(Z$b.name="Layer-"+Z$a,Z$b.visible=!1),Z$b._number=Z$a,Z$b._mask=Math.pow(2,Z$a)}Z$e.currentCreationLayer=Z$e._layerList[0]},Z$e.getLayerByNumber=function(Z$a){if(Z$a<0||30<Z$a)throw new Error("无法返回指定Layer，该number超出范围！");return Z$e._layerList[Z$a]},Z$e.getLayerByName=function(Z$a){for(var Z$b=0;Z$b<31;Z$b++)if(Z$e._layerList[Z$b].name===Z$a)return Z$e._layerList[Z$b];throw new Error("无法返回指定Layer,该name不存在")},Z$e.isVisible=function(Z$a){return 0!=(Z$a&Z$e._currentCameraCullingMask&Z$e._visibleLayers)},Z$e._layerList=[],Z$e._visibleLayers=2147483647,Z$e._collsionTestList=[],Z$e._currentCameraCullingMask=2147483647,Z$e.maxCount=31,Z$e.currentCreationLayer=null,Z$e}()),Z$J=(function(){function Z$a(Z$a,Z$b,Z$c){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=Z$a,this._minCount=Z$b,this._maxCount=Z$c}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.Burst");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._time=this._time,Z$b._minCount=this._minCount,Z$b._maxCount=this._maxCount},Z$b.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$b,"time",function(){return this._time}),Z$q(0,Z$b,"minCount",function(){return this._minCount}),Z$q(0,Z$b,"maxCount",function(){return this._maxCount})}(),function(){function Z$a(Z$a){this._color=null,this.enbale=!1,this._color=Z$a}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var Z$b=Z$a.prototype;Z$b.cloneTo=function(Z$a){var Z$b=Z$a;this._color.cloneTo(Z$b._color),Z$b.enbale=this.enbale},Z$b.clone=function(){var Z$a;switch(this._color.type){case 0:Z$a=Z$L.createByConstant(this._color.constant.clone());break;case 1:Z$a=Z$L.createByGradient(this._color.gradient.clone());break;case 2:Z$a=Z$L.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:Z$a=Z$L.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var Z$b=new this.constructor(Z$a);return Z$b.enbale=this.enbale,Z$b},Z$q(0,Z$b,"color",function(){return this._color})}(),function(){function Z$a(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.Emission");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),Z$b._destroy=function(){this._bursts=null,this._destroyed=!0},Z$b.getBurstsCount=function(){return this._bursts.length},Z$b.getBurstByIndex=function(Z$a){return this._bursts[Z$a]},Z$b.addBurst=function(Z$a){var Z$b=this._bursts.length;if(0<Z$b)for(var Z$c=0;Z$c<Z$b;Z$c++)this._bursts[Z$c].time>Z$a.time&&this._bursts.splice(Z$c,0,Z$a);this._bursts.push(Z$a)},Z$b.removeBurst=function(Z$a){var Z$b=this._bursts.indexOf(Z$a);-1!==Z$b&&this._bursts.splice(Z$b,1)},Z$b.removeBurstByIndex=function(Z$a){this._bursts.splice(Z$a,1)},Z$b.clearBurst=function(){this._bursts.length=0},Z$b.cloneTo=function(Z$a){var Z$b=Z$a,Z$c=Z$b._bursts;Z$c.length=this._bursts.length;for(var Z$d=0,Z$e=this._bursts.length;Z$d<Z$e;Z$d++){var Z$f=Z$c[Z$d];Z$f?this._bursts[Z$d].cloneTo(Z$f):Z$c[Z$d]=this._bursts[Z$d].clone()}Z$b._emissionRate=this._emissionRate,Z$b.enbale=this.enbale},Z$b.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$b,"destroyed",function(){return this._destroyed}),Z$q(0,Z$b,"emissionRate",function(){return this._emissionRate},function(Z$a){if(Z$a<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=Z$a})}(),function(){function Z$d(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}Z$p(Z$d,"laya.d3.core.particleShuriKen.module.FrameOverTime");var Z$a=Z$d.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._type=this._type,Z$b._constant=this._constant,this._overTime.cloneTo(Z$b._overTime),Z$b._constantMin=this._constantMin,Z$b._constantMax=this._constantMax,this._overTimeMin.cloneTo(Z$b._overTimeMin),this._overTimeMax.cloneTo(Z$b._overTimeMax)},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$a,"frameOverTimeData",function(){return this._overTime}),Z$q(0,Z$a,"constant",function(){return this._constant}),Z$q(0,Z$a,"type",function(){return this._type}),Z$q(0,Z$a,"frameOverTimeDataMin",function(){return this._overTimeMin}),Z$q(0,Z$a,"constantMin",function(){return this._constantMin}),Z$q(0,Z$a,"frameOverTimeDataMax",function(){return this._overTimeMax}),Z$q(0,Z$a,"constantMax",function(){return this._constantMax}),Z$d.createByConstant=function(Z$a){var Z$b=new Z$d;return Z$b._type=0,Z$b._constant=Z$a,Z$b},Z$d.createByOverTime=function(Z$a){var Z$b=new Z$d;return Z$b._type=1,Z$b._overTime=Z$a,Z$b},Z$d.createByRandomTwoConstant=function(Z$a,Z$b){var Z$c=new Z$d;return Z$c._type=2,Z$c._constantMin=Z$a,Z$c._constantMax=Z$b,Z$c},Z$d.createByRandomTwoOverTime=function(Z$a,Z$b){var Z$c=new Z$d;return Z$c._type=3,Z$c._overTimeMin=Z$a,Z$c._overTimeMax=Z$b,Z$c},Z$d}()),Z$K=function(){function Z$l(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}Z$p(Z$l,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var Z$a=Z$l.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._type=this._type,Z$b._separateAxes=this._separateAxes,Z$b._constant=this._constant,this._constantSeparate.cloneTo(Z$b._constantSeparate),this._gradient.cloneTo(Z$b._gradient),this._gradientX.cloneTo(Z$b._gradientX),this._gradientY.cloneTo(Z$b._gradientY),this._gradientZ.cloneTo(Z$b._gradientZ),Z$b._constantMin=this._constantMin,Z$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(Z$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(Z$b._constantMaxSeparate),this._gradientMin.cloneTo(Z$b._gradientMin),this._gradientMax.cloneTo(Z$b._gradientMax),this._gradientXMin.cloneTo(Z$b._gradientXMin),this._gradientXMax.cloneTo(Z$b._gradientXMax),this._gradientYMin.cloneTo(Z$b._gradientYMin),this._gradientYMax.cloneTo(Z$b._gradientYMax),this._gradientZMin.cloneTo(Z$b._gradientZMin),this._gradientZMax.cloneTo(Z$b._gradientZMax)},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$a,"gradientZ",function(){return this._gradientZ}),Z$q(0,Z$a,"constant",function(){return this._constant}),Z$q(0,Z$a,"gradient",function(){return this._gradient}),Z$q(0,Z$a,"separateAxes",function(){return this._separateAxes}),Z$q(0,Z$a,"type",function(){return this._type}),Z$q(0,Z$a,"constantSeparate",function(){return this._constantSeparate}),Z$q(0,Z$a,"gradientX",function(){return this._gradientX}),Z$q(0,Z$a,"gradientY",function(){return this._gradientY}),Z$q(0,Z$a,"gradientW",function(){return this._gradientW}),Z$q(0,Z$a,"gradientMin",function(){return this._gradientMin}),Z$q(0,Z$a,"constantMin",function(){return this._constantMin}),Z$q(0,Z$a,"gradientMax",function(){return this._gradientMax}),Z$q(0,Z$a,"constantMax",function(){return this._constantMax}),Z$q(0,Z$a,"gradientWMin",function(){return this._gradientWMin}),Z$q(0,Z$a,"constantMinSeparate",function(){return this._constantMinSeparate}),Z$q(0,Z$a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),Z$q(0,Z$a,"gradientXMin",function(){return this._gradientXMin}),Z$q(0,Z$a,"gradientXMax",function(){return this._gradientXMax}),Z$q(0,Z$a,"gradientWMax",function(){return this._gradientWMax}),Z$q(0,Z$a,"gradientYMin",function(){return this._gradientYMin}),Z$q(0,Z$a,"gradientYMax",function(){return this._gradientYMax}),Z$q(0,Z$a,"gradientZMin",function(){return this._gradientZMin}),Z$q(0,Z$a,"gradientZMax",function(){return this._gradientZMax}),Z$l.createByConstant=function(Z$a){var Z$b=new Z$l;return Z$b._type=0,Z$b._separateAxes=!1,Z$b._constant=Z$a,Z$b},Z$l.createByConstantSeparate=function(Z$a){var Z$b=new Z$l;return Z$b._type=0,Z$b._separateAxes=!0,Z$b._constantSeparate=Z$a,Z$b},Z$l.createByGradient=function(Z$a){var Z$b=new Z$l;return Z$b._type=1,Z$b._separateAxes=!1,Z$b._gradient=Z$a,Z$b},Z$l.createByGradientSeparate=function(Z$a,Z$b,Z$c,Z$d){var Z$e=new Z$l;return Z$e._type=1,Z$e._separateAxes=!0,Z$e._gradientX=Z$a,Z$e._gradientY=Z$b,Z$e._gradientZ=Z$c,Z$e._gradientW=Z$d,Z$e},Z$l.createByRandomTwoConstant=function(Z$a,Z$b){var Z$c=new Z$l;return Z$c._type=2,Z$c._separateAxes=!1,Z$c._constantMin=Z$a,Z$c._constantMax=Z$b,Z$c},Z$l.createByRandomTwoConstantSeparate=function(Z$a,Z$b){var Z$c=new Z$l;return Z$c._type=2,Z$c._separateAxes=!0,Z$c._constantMinSeparate=Z$a,Z$c._constantMaxSeparate=Z$b,Z$c},Z$l.createByRandomTwoGradient=function(Z$a,Z$b){var Z$c=new Z$l;return Z$c._type=3,Z$c._separateAxes=!1,Z$c._gradientMin=Z$a,Z$c._gradientMax=Z$b,Z$c},Z$l.createByRandomTwoGradientSeparate=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){var Z$k=new Z$l;return Z$k._type=3,Z$k._separateAxes=!0,Z$k._gradientXMin=Z$a,Z$k._gradientXMax=Z$b,Z$k._gradientYMin=Z$c,Z$k._gradientYMax=Z$d,Z$k._gradientZMin=Z$e,Z$k._gradientZMax=Z$f,Z$k._gradientWMin=Z$i,Z$k._gradientWMax=Z$j,Z$k},Z$l}(),Z$L=function(){function Z$d(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}Z$p(Z$d,"laya.d3.core.particleShuriKen.module.GradientColor");var Z$a=Z$d.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._type=this._type,this._constant.cloneTo(Z$b._constant),this._constantMin.cloneTo(Z$b._constantMin),this._constantMax.cloneTo(Z$b._constantMax),this._gradient.cloneTo(Z$b._gradient),this._gradientMin.cloneTo(Z$b._gradientMin),this._gradientMax.cloneTo(Z$b._gradientMax)},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$a,"gradient",function(){return this._gradient}),Z$q(0,Z$a,"constant",function(){return this._constant}),Z$q(0,Z$a,"type",function(){return this._type}),Z$q(0,Z$a,"gradientMin",function(){return this._gradientMin}),Z$q(0,Z$a,"constantMin",function(){return this._constantMin}),Z$q(0,Z$a,"gradientMax",function(){return this._gradientMax}),Z$q(0,Z$a,"constantMax",function(){return this._constantMax}),Z$d.createByConstant=function(Z$a){var Z$b=new Z$d;return Z$b._type=0,Z$b._constant=Z$a,Z$b},Z$d.createByGradient=function(Z$a){var Z$b=new Z$d;return Z$b._type=1,Z$b._gradient=Z$a,Z$b},Z$d.createByRandomTwoConstant=function(Z$a,Z$b){var Z$c=new Z$d;return Z$c._type=2,Z$c._constantMin=Z$a,Z$c._constantMax=Z$b,Z$c},Z$d.createByRandomTwoGradient=function(Z$a,Z$b){var Z$c=new Z$d;return Z$c._type=3,Z$c._gradientMin=Z$a,Z$c._gradientMax=Z$b,Z$c},Z$d}(),Z$M=(function(){function Z$a(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.GradientDataColor");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.addAlpha=function(Z$a,Z$b){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==Z$a&&(Z$a=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=Z$a,this._alphaElements[this._alphaCurrentLength++]=Z$b):DEBUG},Z$b.addRGB=function(Z$a,Z$b){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==Z$a&&(Z$a=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=Z$a,this._rgbElements[this._rgbCurrentLength++]=Z$b.x,this._rgbElements[this._rgbCurrentLength++]=Z$b.y,this._rgbElements[this._rgbCurrentLength++]=Z$b.z):DEBUG},Z$b.cloneTo=function(Z$a){var Z$b=Z$a,Z$c=0,Z$d=0;Z$b._alphaCurrentLength=this._alphaCurrentLength;var Z$e=Z$b._alphaElements;for(Z$e.length=this._alphaElements.length,Z$c=0,Z$d=this._alphaElements.length;Z$c<Z$d;Z$c++)Z$e[Z$c]=this._alphaElements[Z$c];Z$b._rgbCurrentLength=this._rgbCurrentLength;var Z$f=Z$b._rgbElements;for(Z$f.length=this._rgbElements.length,Z$c=0,Z$d=this._rgbElements.length;Z$c<Z$d;Z$c++)Z$f[Z$c]=this._rgbElements[Z$c]},Z$b.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$b,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),Z$q(0,Z$b,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function Z$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.GradientDataInt");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.add=function(Z$a,Z$b){this._currentLength<8?(6===this._currentLength&&1!==Z$a&&(Z$a=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=Z$a,this._elements[this._currentLength++]=Z$b):console.log("Warning:data count must lessEqual than 4")},Z$b.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._currentLength=this._currentLength;var Z$c=Z$b._elements;Z$c.length=this._elements.length;for(var Z$d=0,Z$e=this._elements.length;Z$d<Z$e;Z$d++)Z$c[Z$d]=this._elements[Z$d]},Z$b.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function Z$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.add=function(Z$a,Z$b){this._currentLength<8?(6===this._currentLength&&1!==Z$a&&(Z$a=1,DEBUG),this._elements[this._currentLength++]=Z$a,this._elements[this._currentLength++]=Z$b):DEBUG},Z$b.getKeyByIndex=function(Z$a){return this._elements[2*Z$a]},Z$b.getValueByIndex=function(Z$a){return this._elements[2*Z$a+1]},Z$b.getAverageValue=function(){for(var Z$a=0,Z$b=this._currentLength-2;Z$a<Z$b;Z$a+=2){this._elements[Z$a+1];this._elements[Z$a+3],this._elements[Z$a+2]-this._elements[Z$a]}return 0},Z$b.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._currentLength=this._currentLength;var Z$c=Z$b._elements;Z$c.length=this._elements.length;for(var Z$d=0,Z$e=this._elements.length;Z$d<Z$e;Z$d++)Z$c[Z$d]=this._elements[Z$d]},Z$b.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function Z$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.add=function(Z$a,Z$b){this._currentLength<8?(6===this._currentLength&&1!==Z$a&&(Z$a=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=Z$a,this._elements[this._currentLength++]=Z$b.x,this._elements[this._currentLength++]=Z$b.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},Z$b.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._currentLength=this._currentLength;var Z$c=Z$b._elements;Z$c.length=this._elements.length;for(var Z$d=0,Z$e=this._elements.length;Z$d<Z$e;Z$d++)Z$c[Z$d]=this._elements[Z$d]},Z$b.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$b,"gradientCount",function(){return this._currentLength/3})}(),function(){function Z$j(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}Z$p(Z$j,"laya.d3.core.particleShuriKen.module.GradientSize");var Z$a=Z$j.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.getMaxSizeInGradient=function(){var Z$a=0,Z$b=0,Z$c=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(Z$a=0,Z$b=this._gradientX.gradientCount;Z$a<Z$b;Z$a++)Z$c=Math.max(Z$c,this._gradientX.getValueByIndex(Z$a));for(Z$a=0,Z$b=this._gradientY.gradientCount;Z$a<Z$b;Z$a++)Z$c=Math.max(Z$c,this._gradientY.getValueByIndex(Z$a))}else for(Z$a=0,Z$b=this._gradient.gradientCount;Z$a<Z$b;Z$a++)Z$c=Math.max(Z$c,this._gradient.getValueByIndex(Z$a));break;case 1:Z$c=this._separateAxes?(Z$c=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),Z$c=Math.max(Z$c,this._constantMinSeparate.y),Math.max(Z$c,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(Z$a=0,Z$b=this._gradientXMin.gradientCount;Z$a<Z$b;Z$a++)Z$c=Math.max(Z$c,this._gradientXMin.getValueByIndex(Z$a));for(Z$a=0,Z$b=this._gradientXMax.gradientCount;Z$a<Z$b;Z$a++)Z$c=Math.max(Z$c,this._gradientXMax.getValueByIndex(Z$a));for(Z$a=0,Z$b=this._gradientYMin.gradientCount;Z$a<Z$b;Z$a++)Z$c=Math.max(Z$c,this._gradientYMin.getValueByIndex(Z$a));for(Z$a=0,Z$b=this._gradientZMax.gradientCount;Z$a<Z$b;Z$a++)Z$c=Math.max(Z$c,this._gradientZMax.getValueByIndex(Z$a))}else{for(Z$a=0,Z$b=this._gradientMin.gradientCount;Z$a<Z$b;Z$a++)Z$c=Math.max(Z$c,this._gradientMin.getValueByIndex(Z$a));for(Z$a=0,Z$b=this._gradientMax.gradientCount;Z$a<Z$b;Z$a++)Z$c=Math.max(Z$c,this._gradientMax.getValueByIndex(Z$a))}}return Z$c},Z$a.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._type=this._type,Z$b._separateAxes=this._separateAxes,this._gradient.cloneTo(Z$b._gradient),this._gradientX.cloneTo(Z$b._gradientX),this._gradientY.cloneTo(Z$b._gradientY),this._gradientZ.cloneTo(Z$b._gradientZ),Z$b._constantMin=this._constantMin,Z$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(Z$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(Z$b._constantMaxSeparate),this._gradientMin.cloneTo(Z$b._gradientMin),this._gradientMax.cloneTo(Z$b._gradientMax),this._gradientXMin.cloneTo(Z$b._gradientXMin),this._gradientXMax.cloneTo(Z$b._gradientXMax),this._gradientYMin.cloneTo(Z$b._gradientYMin),this._gradientYMax.cloneTo(Z$b._gradientYMax),this._gradientZMin.cloneTo(Z$b._gradientZMin),this._gradientZMax.cloneTo(Z$b._gradientZMax)},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$a,"gradientZ",function(){return this._gradientZ}),Z$q(0,Z$a,"gradient",function(){return this._gradient}),Z$q(0,Z$a,"separateAxes",function(){return this._separateAxes}),Z$q(0,Z$a,"type",function(){return this._type}),Z$q(0,Z$a,"gradientMin",function(){return this._gradientMin}),Z$q(0,Z$a,"constantMin",function(){return this._constantMin}),Z$q(0,Z$a,"gradientX",function(){return this._gradientX}),Z$q(0,Z$a,"gradientY",function(){return this._gradientY}),Z$q(0,Z$a,"gradientMax",function(){return this._gradientMax}),Z$q(0,Z$a,"constantMax",function(){return this._constantMax}),Z$q(0,Z$a,"constantMinSeparate",function(){return this._constantMinSeparate}),Z$q(0,Z$a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),Z$q(0,Z$a,"gradientXMin",function(){return this._gradientXMin}),Z$q(0,Z$a,"gradientXMax",function(){return this._gradientXMax}),Z$q(0,Z$a,"gradientYMin",function(){return this._gradientYMin}),Z$q(0,Z$a,"gradientYMax",function(){return this._gradientYMax}),Z$q(0,Z$a,"gradientZMin",function(){return this._gradientZMin}),Z$q(0,Z$a,"gradientZMax",function(){return this._gradientZMax}),Z$j.createByGradient=function(Z$a){var Z$b=new Z$j;return Z$b._type=0,Z$b._separateAxes=!1,Z$b._gradient=Z$a,Z$b},Z$j.createByGradientSeparate=function(Z$a,Z$b,Z$c){var Z$d=new Z$j;return Z$d._type=0,Z$d._separateAxes=!0,Z$d._gradientX=Z$a,Z$d._gradientY=Z$b,Z$d._gradientZ=Z$c,Z$d},Z$j.createByRandomTwoConstant=function(Z$a,Z$b){var Z$c=new Z$j;return Z$c._type=1,Z$c._separateAxes=!1,Z$c._constantMin=Z$a,Z$c._constantMax=Z$b,Z$c},Z$j.createByRandomTwoConstantSeparate=function(Z$a,Z$b){var Z$c=new Z$j;return Z$c._type=1,Z$c._separateAxes=!0,Z$c._constantMinSeparate=Z$a,Z$c._constantMaxSeparate=Z$b,Z$c},Z$j.createByRandomTwoGradient=function(Z$a,Z$b){var Z$c=new Z$j;return Z$c._type=2,Z$c._separateAxes=!1,Z$c._gradientMin=Z$a,Z$c._gradientMax=Z$b,Z$c},Z$j.createByRandomTwoGradientSeparate=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=new Z$j;return Z$i._type=2,Z$i._separateAxes=!0,Z$i._gradientXMin=Z$a,Z$i._gradientXMax=Z$b,Z$i._gradientYMin=Z$c,Z$i._gradientYMax=Z$d,Z$i._gradientZMin=Z$e,Z$i._gradientZMax=Z$f,Z$i},Z$j}()),Z$N=function(){function Z$j(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}Z$p(Z$j,"laya.d3.core.particleShuriKen.module.GradientVelocity");var Z$a=Z$j.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._type=this._type,this._constant.cloneTo(Z$b._constant),this._gradientX.cloneTo(Z$b._gradientX),this._gradientY.cloneTo(Z$b._gradientY),this._gradientZ.cloneTo(Z$b._gradientZ),this._constantMin.cloneTo(Z$b._constantMin),this._constantMax.cloneTo(Z$b._constantMax),this._gradientXMin.cloneTo(Z$b._gradientXMin),this._gradientXMax.cloneTo(Z$b._gradientXMax),this._gradientYMin.cloneTo(Z$b._gradientYMin),this._gradientYMax.cloneTo(Z$b._gradientYMax),this._gradientZMin.cloneTo(Z$b._gradientZMin),this._gradientZMax.cloneTo(Z$b._gradientZMax)},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$a,"gradientZ",function(){return this._gradientZ}),Z$q(0,Z$a,"constant",function(){return this._constant}),Z$q(0,Z$a,"type",function(){return this._type}),Z$q(0,Z$a,"gradientXMax",function(){return this._gradientXMax}),Z$q(0,Z$a,"constantMin",function(){return this._constantMin}),Z$q(0,Z$a,"gradientX",function(){return this._gradientX}),Z$q(0,Z$a,"gradientY",function(){return this._gradientY}),Z$q(0,Z$a,"gradientXMin",function(){return this._gradientXMin}),Z$q(0,Z$a,"constantMax",function(){return this._constantMax}),Z$q(0,Z$a,"gradientYMin",function(){return this._gradientYMin}),Z$q(0,Z$a,"gradientYMax",function(){return this._gradientYMax}),Z$q(0,Z$a,"gradientZMin",function(){return this._gradientZMin}),Z$q(0,Z$a,"gradientZMax",function(){return this._gradientZMax}),Z$j.createByConstant=function(Z$a){var Z$b=new Z$j;return Z$b._type=0,Z$b._constant=Z$a,Z$b},Z$j.createByGradient=function(Z$a,Z$b,Z$c){var Z$d=new Z$j;return Z$d._type=1,Z$d._gradientX=Z$a,Z$d._gradientY=Z$b,Z$d._gradientZ=Z$c,Z$d},Z$j.createByRandomTwoConstant=function(Z$a,Z$b){var Z$c=new Z$j;return Z$c._type=2,Z$c._constantMin=Z$a,Z$c._constantMax=Z$b,Z$c},Z$j.createByRandomTwoGradient=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=new Z$j;return Z$i._type=3,Z$i._gradientXMin=Z$a,Z$i._gradientXMax=Z$b,Z$i._gradientYMin=Z$c,Z$i._gradientYMax=Z$d,Z$i._gradientZMin=Z$e,Z$i._gradientZMax=Z$f,Z$i},Z$j}(),Z$O=(function(){function Z$a(Z$a){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=Z$a}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.cloneTo=function(Z$a){var Z$b=Z$a;this._angularVelocity.cloneTo(Z$b._angularVelocity),Z$b.enbale=this.enbale},Z$b.clone=function(){var Z$a;switch(this._angularVelocity.type){case 0:Z$a=this._angularVelocity.separateAxes?Z$K.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):Z$K.createByConstant(this._angularVelocity.constant);break;case 1:Z$a=this._angularVelocity.separateAxes?Z$K.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):Z$K.createByGradient(this._angularVelocity.gradient.clone());break;case 2:Z$a=this._angularVelocity.separateAxes?Z$K.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):Z$K.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:Z$a=this._angularVelocity.separateAxes?Z$K.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):Z$K.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var Z$b=new this.constructor(Z$a);return Z$b.enbale=this.enbale,Z$b},Z$q(0,Z$b,"angularVelocity",function(){return this._angularVelocity})}(),function(){function Z$a(){this.enable=!1,this.randomDirection=!1}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b._getShapeBoundBox=function(Z$a){throw new Error("BaseShape: must override it.")},Z$b._getSpeedBoundBox=function(Z$a){throw new Error("BaseShape: must override it.")},Z$b.generatePositionAndDirection=function(Z$a,Z$b,Z$c,Z$d){throw new Error("BaseShape: must override it.")},Z$b._calculateProceduralBounds=function(Z$a,Z$b,Z$c){this._getShapeBoundBox(Z$a);var Z$d=Z$a.min,Z$e=Z$a.max;Z$ib.multiply(Z$d,Z$b,Z$d),Z$ib.multiply(Z$e,Z$b,Z$e);var Z$f=new Z$Za(new Z$ib,new Z$ib);this.randomDirection?(Z$f.min=new Z$ib(-1,-1,-1),Z$f.max=new Z$ib(1,1,1)):this._getSpeedBoundBox(Z$f);var Z$i=new Z$Za(new Z$ib,new Z$ib),Z$j=Z$i.min,Z$k=Z$i.max;Z$ib.scale(Z$f.min,Z$c.y,Z$j),Z$ib.scale(Z$f.max,Z$c.y,Z$k),Z$ib.add(Z$a.min,Z$j,Z$j),Z$ib.add(Z$a.max,Z$k,Z$k),Z$ib.min(Z$a.min,Z$j,Z$a.min),Z$ib.max(Z$a.max,Z$j,Z$a.max);var Z$l=new Z$Za(new Z$ib,new Z$ib),Z$m=Z$l.min,Z$n=Z$l.max;Z$ib.scale(Z$f.min,Z$c.x,Z$m),Z$ib.scale(Z$f.max,Z$c.x,Z$n),Z$ib.min(Z$l.min,Z$n,Z$j),Z$ib.max(Z$l.min,Z$n,Z$k),Z$ib.min(Z$a.min,Z$j,Z$a.min),Z$ib.max(Z$a.max,Z$j,Z$a.max)},Z$b.cloneTo=function(Z$a){Z$a.enable=this.enable},Z$b.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$a}()),Z$T=function(){function Z$f(){}return Z$p(Z$f,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),Z$f._randomPointUnitArcCircle=function(Z$a,Z$b,Z$c){var Z$d=Z$b.elements,Z$e=NaN;Z$e=Z$c?Z$c.getFloat()*Z$a:Math.random()*Z$a,Z$d[0]=Math.cos(Z$e),Z$d[1]=Math.sin(Z$e)},Z$f._randomPointInsideUnitArcCircle=function(Z$a,Z$b,Z$c){var Z$d=Z$b.elements;Z$f._randomPointUnitArcCircle(Z$a,Z$b,Z$c);var Z$e=NaN;Z$e=Z$c?Math.pow(Z$c.getFloat(),.5):Math.pow(Math.random(),.5),Z$d[0]=Z$d[0]*Z$e,Z$d[1]=Z$d[1]*Z$e},Z$f._randomPointUnitCircle=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=NaN;Z$d=Z$b?Z$b.getFloat()*Math.PI*2:Math.random()*Math.PI*2,Z$c[0]=Math.cos(Z$d),Z$c[1]=Math.sin(Z$d)},Z$f._randomPointInsideUnitCircle=function(Z$a,Z$b){var Z$c=Z$a.elements;Z$f._randomPointUnitCircle(Z$a);var Z$d=NaN;Z$d=Z$b?Math.pow(Z$b.getFloat(),.5):Math.pow(Math.random(),.5),Z$c[0]=Z$c[0]*Z$d,Z$c[1]=Z$c[1]*Z$d},Z$f._randomPointUnitSphere=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=NaN,Z$e=NaN;Z$e=Z$b?(Z$d=Z$c[2]=2*Z$b.getFloat()-1,Z$b.getFloat()*Math.PI*2):(Z$d=Z$c[2]=2*Math.random()-1,Math.random()*Math.PI*2);var Z$f=Math.sqrt(1-Z$d*Z$d);Z$c[0]=Z$f*Math.cos(Z$e),Z$c[1]=Z$f*Math.sin(Z$e)},Z$f._randomPointInsideUnitSphere=function(Z$a,Z$b){var Z$c=Z$a.elements;Z$f._randomPointUnitSphere(Z$a);var Z$d=NaN;Z$d=Z$b?Math.pow(Z$b.getFloat(),1/3):Math.pow(Math.random(),1/3),Z$c[0]=Z$c[0]*Z$d,Z$c[1]=Z$c[1]*Z$d,Z$c[2]=Z$c[2]*Z$d},Z$f._randomPointInsideHalfUnitBox=function(Z$a,Z$b){var Z$c=Z$a.elements;Z$b?(Z$c[0]=Z$b.getFloat()-.5,Z$c[1]=Z$b.getFloat()-.5,Z$c[2]=Z$b.getFloat()-.5):(Z$c[0]=Math.random()-.5,Z$c[1]=Math.random()-.5,Z$c[2]=Math.random()-.5)},Z$f}(),Z$U=(function(){function Z$a(Z$a){this._size=null,this.enbale=!1,this._size=Z$a}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.cloneTo=function(Z$a){var Z$b=Z$a;this._size.cloneTo(Z$b._size),Z$b.enbale=this.enbale},Z$b.clone=function(){var Z$a;switch(this._size.type){case 0:Z$a=this._size.separateAxes?Z$M.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):Z$M.createByGradient(this._size.gradient.clone());break;case 1:Z$a=this._size.separateAxes?Z$M.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):Z$M.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:Z$a=this._size.separateAxes?Z$M.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):Z$M.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var Z$b=new this.constructor(Z$a);return Z$b.enbale=this.enbale,Z$b},Z$q(0,Z$b,"size",function(){return this._size})}(),function(){function Z$d(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}Z$p(Z$d,"laya.d3.core.particleShuriKen.module.StartFrame");var Z$a=Z$d.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._type=this._type,Z$b._constant=this._constant,Z$b._constantMin=this._constantMin,Z$b._constantMax=this._constantMax},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$a,"constant",function(){return this._constant}),Z$q(0,Z$a,"type",function(){return this._type}),Z$q(0,Z$a,"constantMin",function(){return this._constantMin}),Z$q(0,Z$a,"constantMax",function(){return this._constantMax}),Z$d.createByConstant=function(Z$a){var Z$b=new Z$d;return Z$b._type=0,Z$b._constant=Z$a,Z$b},Z$d.createByRandomTwoConstant=function(Z$a,Z$b){var Z$c=new Z$d;return Z$c._type=1,Z$c._constantMin=Z$a,Z$c._constantMax=Z$b,Z$c},Z$d}()),Z$V=(function(){function Z$a(Z$a,Z$b){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new Z$fb(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=Z$a,this._startFrame=Z$b}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.cloneTo=function(Z$a){var Z$b=Z$a;this.tiles.cloneTo(Z$b.tiles),Z$b.type=this.type,Z$b.randomRow=this.randomRow,this._frame.cloneTo(Z$b._frame),this._startFrame.cloneTo(Z$b._startFrame),Z$b.cycles=this.cycles,Z$b.enableUVChannels=this.enableUVChannels,Z$b.enable=this.enable},Z$b.clone=function(){var Z$a,Z$b;switch(this._frame.type){case 0:Z$a=Z$J.createByConstant(this._frame.constant);break;case 1:Z$a=Z$J.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:Z$a=Z$J.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:Z$a=Z$J.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:Z$b=Z$U.createByConstant(this._startFrame.constant);break;case 1:Z$b=Z$U.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var Z$c=new this.constructor(Z$a,Z$b);return this.tiles.cloneTo(Z$c.tiles),Z$c.type=this.type,Z$c.randomRow=this.randomRow,Z$c.cycles=this.cycles,Z$c.enableUVChannels=this.enableUVChannels,Z$c.enable=this.enable,Z$c},Z$q(0,Z$b,"frame",function(){return this._frame}),Z$q(0,Z$b,"startFrame",function(){return this._startFrame})}(),function(){function Z$a(Z$a){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=Z$a}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.cloneTo=function(Z$a){var Z$b=Z$a;this._velocity.cloneTo(Z$b._velocity),Z$b.enbale=this.enbale,Z$b.space=this.space},Z$b.clone=function(){var Z$a;switch(this._velocity.type){case 0:Z$a=Z$N.createByConstant(this._velocity.constant.clone());break;case 1:Z$a=Z$N.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:Z$a=Z$N.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:Z$a=Z$N.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var Z$b=new this.constructor(Z$a);return Z$b.enbale=this.enbale,Z$b.space=this.space,Z$b},Z$q(0,Z$b,"velocity",function(){return this._velocity})}(),function(){function Z$a(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new Z$ob,this._vb=Z$Ob.create(Z$a._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=Z$Nb.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=Z$Lb.nameKey.getID("LINE"),this._shaderCompile=Z$Ab._preCompileShader[this._sharderNameID]}Z$p(Z$a,"laya.d3.core.PhasorSpriter3D");var Z$b=Z$a.prototype;return Z$b.line=function(Z$a,Z$b,Z$c,Z$d){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(Z$a.x,Z$a.y,Z$a.z,Z$b.x,Z$b.y,Z$b.z,Z$b.w),this.addVertex(Z$c.x,Z$c.y,Z$c.z,Z$d.x,Z$d.y,Z$d.z,Z$d.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},Z$b.circle=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*Z$b,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/Z$b,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*Z$a,Math.cos(this._tempNumver0)*Z$a,0,Z$c,Z$d,Z$e,Z$f),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},Z$b.plane=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=Z$d/2,this._tempNumver1=Z$e/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(Z$a-this._tempNumver0,Z$b+this._tempNumver1,Z$c,Z$f,Z$i,Z$j,Z$k),this.addVertex(Z$a+this._tempNumver0,Z$b+this._tempNumver1,Z$c,Z$f,Z$i,Z$j,Z$k),this.addVertex(Z$a-this._tempNumver0,Z$b-this._tempNumver1,Z$c,Z$f,Z$i,Z$j,Z$k),this.addVertex(Z$a+this._tempNumver0,Z$b-this._tempNumver1,Z$c,Z$f,Z$i,Z$j,Z$k),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},Z$b.box=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=Z$d/2,this._tempNumver1=Z$e/2,this._tempNumver2=Z$f/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(Z$a-this._tempNumver0,Z$b+this._tempNumver1,Z$c+this._tempNumver2,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$a+this._tempNumver0,Z$b+this._tempNumver1,Z$c+this._tempNumver2,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$a-this._tempNumver0,Z$b-this._tempNumver1,Z$c+this._tempNumver2,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$a+this._tempNumver0,Z$b-this._tempNumver1,Z$c+this._tempNumver2,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$a+this._tempNumver0,Z$b+this._tempNumver1,Z$c-this._tempNumver2,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$a-this._tempNumver0,Z$b+this._tempNumver1,Z$c-this._tempNumver2,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$a+this._tempNumver0,Z$b-this._tempNumver1,Z$c-this._tempNumver2,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$a-this._tempNumver0,Z$b-this._tempNumver1,Z$c-this._tempNumver2,Z$i,Z$j,Z$k,Z$l),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},Z$b.cone=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*Z$c+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*Z$c>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/Z$c,this.addVertexIndex(0,Z$b,0,Z$d,Z$e,Z$f,Z$i,this._tempUint0),this.addVertexIndex(0,0,0,Z$d,Z$e,Z$f,Z$i,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<Z$c;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(Z$a*this._tempNumver2,0,Z$a*this._tempNumver3,Z$d,Z$e,Z$f,Z$i,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==Z$c-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(Z$a*this._tempNumver2,0,Z$a*this._tempNumver3,Z$d,Z$e,Z$f,Z$i,this._tempUint0+(this._tempInt0+Z$c)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==Z$c-1?this.addIndexes(this._tempUint1+Z$c+2):this.addIndexes(this._tempUint1+this._tempInt0+Z$c+1),this.addIndexes(this._tempUint1+this._tempInt0+Z$c),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},Z$b.boundingBoxLine=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(Z$a,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$a,Z$b,Z$f,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$d,Z$b,Z$f,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$d,Z$e,Z$c,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$a,Z$e,Z$c,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$d,Z$b,Z$c,Z$i,Z$j,Z$k,Z$l),this.addVertex(Z$a,Z$b,Z$c,Z$i,Z$j,Z$k,Z$l),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},Z$b.addVertex=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=Z$a,this._vbData[this._posInVBData+1]=Z$b,this._vbData[this._posInVBData+2]=Z$c,this._vbData[this._posInVBData+3]=Z$d,this._vbData[this._posInVBData+4]=Z$e,this._vbData[this._posInVBData+5]=Z$f,this._vbData[this._posInVBData+6]=Z$i,this._posInVBData+=this._floatSizePerVer,this},Z$b.addVertexIndex=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){return this._hasBegun||this.addVertexIndexException(),this._vbData[Z$j]=Z$a,this._vbData[Z$j+1]=Z$b,this._vbData[Z$j+2]=Z$c,this._vbData[Z$j+3]=Z$d,this._vbData[Z$j+4]=Z$e,this._vbData[Z$j+5]=Z$f,this._vbData[Z$j+6]=Z$i,(Z$j+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=Z$j),this},Z$b.addIndexes=function(Z$a){var Z$b=arguments;this._hasBegun||this.addVertexIndexException();for(var Z$c=0;Z$c<Z$b.length;Z$c++)this._ibData[this._posInIBData]=Z$b[Z$c],this._posInIBData++;return this},Z$b.begin=function(Z$a,Z$b){return this._hasBegun&&this.beginException0(),1!==Z$a&&4!==Z$a&&this.beginException1(),this._primitiveType=Z$a,this._camera=Z$b,this._hasBegun=!0,this},Z$b.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},Z$b.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(Z$a._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),Z$A.drawCall++,Z$F.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},Z$b.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},Z$b.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},Z$b.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},Z$b.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},Z$b.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},Z$b.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(28,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector4",1)])}]),Z$a}()),Z$W=function(){function Z$a(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++Z$a._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new Z$ob}Z$p(Z$a,"laya.d3.core.render.RenderElement");var Z$b=Z$a.prototype;return Z$b.getDynamicBatchBakedVertexs=function(Z$a){for(var Z$b=this._renderObj._getVertexBuffer(Z$a),Z$c=Z$b.getData().slice(),Z$d=Z$b.vertexDeclaration,Z$e=Z$d.getVertexElementByUsage(0).offset/4,Z$f=Z$d.getVertexElementByUsage(3).offset/4,Z$i=this._sprite3D.transform,Z$j=Z$i.worldMatrix,Z$k=Z$i.rotation,Z$l=Z$d.vertexStride/4,Z$m=0,Z$n=Z$c.length;Z$m<Z$n;Z$m+=Z$l){var Z$o=Z$m+Z$e,Z$p=Z$m+Z$f;Z$sb.transformVector3ArrayToVector3ArrayCoordinate(Z$c,Z$o,Z$j,Z$c,Z$o),Z$sb.transformVector3ArrayByQuat(Z$c,Z$p,Z$k,Z$c,Z$p)}return Z$c},Z$b.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},Z$b._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},Z$q(0,Z$b,"id",function(){return this._id}),Z$q(0,Z$b,"renderObj",function(){return this._renderObj},function(Z$a){this._renderObj!==Z$a&&(this._renderObj=Z$a)}),Z$a._uniqueIDCounter=0,Z$a}(),Z$X=function(){function Z$b(Z$a){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++Z$b._uniqueIDCounter,this._needSort=!1,this._scene=Z$a,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}Z$p(Z$b,"laya.d3.core.render.RenderQueue");var Z$a=Z$b.prototype;return Z$a._sortOpaqueFunc=function(Z$a,Z$b){if(Z$a._render&&Z$b._render){var Z$c=Z$a._material.renderQueue-Z$b._material.renderQueue;return 0==Z$c?Z$a._render._distanceForSort-Z$b._render._distanceForSort:Z$c}return 0},Z$a._sortAlphaFunc=function(Z$a,Z$b){if(Z$a._render&&Z$b._render){var Z$c=Z$a._material.renderQueue-Z$b._material.renderQueue;return 0==Z$c?Z$b._render._distanceForSort-Z$a._render._distanceForSort:Z$c}return 0},Z$a._begainRenderElement=function(Z$a,Z$b,Z$c){return!!Z$b._beforeRender(Z$a)},Z$a._sortAlpha=function(Z$a){Z$b._cameraPosition=Z$a,this._finalElements.sort(this._sortAlphaFunc)},Z$a._sortOpaque=function(Z$a){Z$b._cameraPosition=Z$a,this._finalElements.sort(this._sortOpaqueFunc)},Z$a._preRender=function(Z$a){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},Z$a._render=function(Z$a,Z$b){for(var Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k=Z$A.loopCount,Z$l=this._scene,Z$m=Z$a.camera,Z$n=(Z$m.id,!1),Z$o=0,Z$p=this._finalElements.length;Z$o<Z$p;Z$o++){var Z$q,Z$r,Z$s,Z$t=this._finalElements[Z$o];if(null!=Z$t._onPreRenderFunction&&Z$t._onPreRenderFunction.call(Z$t._sprite3D,Z$a),0===Z$t._type){if(Z$a.owner=Z$s=Z$t._sprite3D,Z$a.renderElement=Z$t,Z$s._preRenderUpdateComponents(Z$a),Z$q=Z$t.renderObj,Z$r=Z$t._material,this._begainRenderElement(Z$a,Z$q,Z$r)){if(Z$c=Z$q._getVertexBuffers(),!(Z$e=(Z$d=Z$q._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[Z$d.id]){this._errorRecord[Z$d.id]=1;var Z$u="vertexBuffer:"+("("+Z$d._destroyed+","+Z$d._released+","+Z$d._referenceCount+","+Z$d._buffer+")")+", material:"+(Z$r?Z$r.__className+"("+Z$r._destroyed+","+Z$r._released+")":"null")+", owner:"+(Z$s?Z$s.__className+"("+Z$s._destroyed+","+Z$s._activeInHierarchy+","+Z$s._displayedInStage+")":"null")+", renderObj:"+(Z$q?Z$q.__className+"("+Z$q._destroyed+","+Z$q._released+","+Z$q._referenceCount+")":"")+", parent:, url:"+(Z$s?Z$s.url:"")+", disposeStack:"+Z$d.disposeStack;Z$x.recordError("报错：unknown vertexDeclaration  "+Z$u)}continue}if(Z$n=(Z$f=Z$a._shader=Z$r._getShader(Z$l._shaderDefineValue,Z$e.shaderDefineValue,Z$s._shaderDefineValue)).bind()||Z$k!==Z$f._uploadLoopCount,Z$c){if(Z$f._uploadVertexBuffer!==Z$c||Z$n){for(var Z$v=0;Z$v<Z$c.length;Z$v++){var Z$w=Z$c[Z$v];Z$f.uploadAttributesX(Z$w.vertexDeclaration.shaderValues.data,Z$w)}Z$f._uploadVertexBuffer=Z$c}}else(Z$f._uploadVertexBuffer!==Z$d||Z$n)&&(Z$f.uploadAttributes(Z$e.shaderValues.data,null),Z$f._uploadVertexBuffer=Z$d);(Z$f._uploadScene!==Z$l||Z$n)&&(Z$f.uploadSceneUniforms(Z$l._shaderValues.data),Z$f._uploadScene=Z$l),(Z$m!==Z$f._uploadCamera||Z$f._uploadSprite3D!==Z$s||Z$n)&&(Z$f.uploadSpriteUniforms(Z$s._shaderValues.data),Z$f._uploadSprite3D=Z$s),(Z$m!==Z$f._uploadCamera||Z$n)&&(Z$f.uploadCameraUniforms(Z$m._shaderValues.data),Z$f._uploadCamera=Z$m),(Z$f._uploadMaterial!==Z$r||Z$n)&&(Z$r._upload(),Z$f._uploadMaterial=Z$r),Z$i!==Z$r?(Z$r._setRenderStateBlendDepth(),Z$r._setRenderStateFrontFace(Z$b,Z$s.transform),Z$i=Z$r,Z$j=Z$s):Z$j!==Z$s&&(Z$r._setRenderStateFrontFace(Z$b,Z$s.transform),Z$j=Z$s),Z$q._render(Z$a),Z$f._uploadLoopCount=Z$k}Z$s._postRenderUpdateComponents(Z$a)}else if(2===Z$t._type){Z$t.renderObj;Z$a.owner=Z$s=Z$t._sprite3D,Z$a.renderElement=Z$t,Z$a._batchIndexStart=Z$t._tempBatchIndexStart,Z$a._batchIndexEnd=Z$t._tempBatchIndexEnd,Z$q=Z$t.renderObj,Z$r=Z$t._material,this._begainRenderElement(Z$a,Z$q,Z$r)&&(Z$e=(Z$d=Z$q._getVertexBuffer(0)).vertexDeclaration,Z$n=(Z$f=Z$a._shader=Z$r._getShader(Z$l._shaderDefineValue,Z$e.shaderDefineValue,Z$s._shaderDefineValue)).bind()||Z$k!==Z$f._uploadLoopCount,(Z$f._uploadVertexBuffer!==Z$d||Z$n)&&(Z$f.uploadAttributes(Z$e.shaderValues.data,null),Z$f._uploadVertexBuffer=Z$d),(Z$f._uploadScene!==Z$l||Z$n)&&(Z$f.uploadSceneUniforms(Z$l._shaderValues.data),Z$f._uploadScene=Z$l),(Z$m!==Z$f._uploadCamera||Z$f._uploadSprite3D!==Z$s||Z$n)&&(Z$f.uploadSpriteUniforms(Z$s._shaderValues.data),Z$f._uploadSprite3D=Z$s),(Z$m!==Z$f._uploadCamera||Z$n)&&(Z$f.uploadCameraUniforms(Z$m._shaderValues.data),Z$f._uploadCamera=Z$m),(Z$f._uploadMaterial!==Z$r||Z$n)&&(Z$r._upload(),Z$f._uploadMaterial=Z$r),Z$i!==Z$r?(Z$r._setRenderStateBlendDepth(),Z$r._setRenderStateFrontFace(Z$b,Z$s.transform),Z$i=Z$r,Z$j=Z$s):Z$j!==Z$s&&(Z$r._setRenderStateFrontFace(Z$b,Z$s.transform),Z$j=Z$s),Z$q._render(Z$a),Z$f._uploadLoopCount=Z$k)}}},Z$a._renderShadow=function(Z$a,Z$b){for(var Z$c,Z$d,Z$e,Z$f,Z$i,Z$j=Z$A.loopCount,Z$k=this._scene,Z$l=Z$a.camera,Z$m=!1,Z$n=0,Z$o=this._finalElements.length;Z$n<Z$o;Z$n++){var Z$p,Z$q,Z$r,Z$s=this._finalElements[Z$n];0===Z$s._type&&(Z$a.owner=Z$r=Z$s._sprite3D,Z$b||Z$r._projectionViewWorldUpdateCamera===Z$l&&Z$r._projectionViewWorldUpdateLoopCount===Z$A.loopCount||(Z$r._render._renderUpdate(Z$a._projectionViewMatrix),Z$r._projectionViewWorldUpdateLoopCount=Z$A.loopCount,Z$r._projectionViewWorldUpdateCamera=Z$l),Z$a.renderElement=Z$s,Z$r._preRenderUpdateComponents(Z$a),Z$p=Z$s.renderObj,Z$q=Z$s._material,this._begainRenderElement(Z$a,Z$p,null)&&(Z$d=(Z$c=Z$p._getVertexBuffer(0)).vertexDeclaration,Z$m=(Z$e=Z$a._shader=Z$q._getShader(Z$k._shaderDefineValue,Z$d.shaderDefineValue,Z$r._shaderDefineValue)).bind()||Z$j!==Z$e._uploadLoopCount,(Z$e._uploadVertexBuffer!==Z$c||Z$m)&&(Z$e.uploadAttributes(Z$d.shaderValues.data,null),Z$e._uploadVertexBuffer=Z$c),(Z$l!==Z$e._uploadCamera||Z$e._uploadSprite3D!==Z$r||Z$m)&&(Z$e.uploadSpriteUniforms(Z$r._shaderValues.data),Z$e._uploadSprite3D=Z$r),(Z$l!==Z$e._uploadCamera||Z$m)&&(Z$e.uploadCameraUniforms(Z$l._shaderValues.data),Z$e._uploadCamera=Z$l),(Z$e._uploadMaterial!==Z$q||Z$m)&&(Z$q._upload(),Z$e._uploadMaterial=Z$q),Z$e._uploadRenderElement,Z$f!==Z$q?(Z$q._setRenderStateFrontFace(!1,Z$r.transform),Z$f=Z$q,Z$i=Z$r):Z$i!==Z$r&&(Z$q._setRenderStateFrontFace(!1,Z$r.transform),Z$i=Z$r),Z$p._render(Z$a),Z$e._uploadLoopCount=Z$j),Z$r._postRenderUpdateComponents(Z$a))}},Z$a._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},Z$a._addRenderElement=function(Z$a){this._renderElements.push(Z$a),this._needSort=!0},Z$a._addDynamicBatchElement=function(Z$a){this._dynamicBatchCombineRenderElements.push(Z$a)},Z$q(0,Z$a,"id",function(){return this._id}),Z$b._uniqueIDCounter=0,Z$b._cameraPosition=null,Z$b}(),Z$Y=function(){function Z$a(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return Z$p(Z$a,"laya.d3.core.render.RenderState"),Z$a.clientWidth=0,Z$a.clientHeight=0,Z$a}(),Z$Z=function(){function Z$i(Z$a,Z$b){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new Z$_a(new Z$ib,0),this._corners=[new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib],this._boundingBoxCenter=new Z$ib,this._children=Z$d(8),this._objects=[],this._tempBoundBoxCorners=[new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib],this._scene=Z$a,this._currentDepth=Z$b}Z$p(Z$i,"laya.d3.core.scene.OctreeNode");var Z$a=Z$i.prototype;return Z$x.imps(Z$a,{"laya.d3.core.scene.ITreeNode":!0}),Z$a.init=function(Z$a,Z$b){var Z$c=new Z$ib,Z$d=new Z$ib;Z$ib.scale(Z$b,-.5,Z$c),Z$ib.scale(Z$b,.5,Z$d),Z$ib.add(Z$c,Z$a,Z$c),Z$ib.add(Z$d,Z$a,Z$d),this.exactBox=new Z$Za(Z$c,Z$d),this.relaxBox=new Z$Za(Z$c,Z$d)},Z$a.addTreeNode=function(Z$a){1===Collision.boxContainsBox(this._relaxBox,Z$a.boundingBox)?this.addNodeDown(Z$a,0):this.addObject(Z$a)},Z$a.addChild=function(Z$a){var Z$b=this._children[Z$a];if(null==Z$b){Z$b=new Z$i(this._scene,this._currentDepth+1),(this._children[Z$a]=Z$b)._parent=this,Z$ib.subtract(this._exactBox.max,this._exactBox.min,Z$i.tempSize),Z$ib.multiply(Z$i.tempSize,Z$i._octreeSplit[Z$a],Z$i.tempCenter),Z$ib.add(this._exactBox.min,Z$i.tempCenter,Z$i.tempCenter),Z$ib.scale(Z$i.tempSize,.25,Z$i.tempSize);var Z$c=new Z$ib,Z$d=new Z$ib;Z$ib.subtract(Z$i.tempCenter,Z$i.tempSize,Z$c),Z$ib.add(Z$i.tempCenter,Z$i.tempSize,Z$d),Z$b.exactBox=new Z$Za(Z$c,Z$d),Z$ib.scale(Z$i.tempSize,Z$i.relax,Z$i.tempSize);var Z$e=new Z$ib,Z$f=new Z$ib;Z$ib.subtract(Z$i.tempCenter,Z$i.tempSize,Z$e),Z$ib.add(Z$i.tempCenter,Z$i.tempSize,Z$f),Z$b.relaxBox=new Z$Za(Z$e,Z$f)}return Z$b},Z$a.addObject=function(Z$a){(Z$a._treeNode=this)._objects.push(Z$a)},Z$a.removeObject=function(Z$a){if(Z$a._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var Z$b=this._objects.indexOf(Z$a);return-1!==Z$b&&(this._objects.splice(Z$b,1),!0)},Z$a.clearObject=function(){this._objects.length=0},Z$a.addNodeUp=function(Z$a,Z$b){this._parent&&1!==Collision.boxContainsBox(this._exactBox,Z$a.boundingBox)?this._parent.addNodeUp(Z$a,Z$b-1):this.addNodeDown(Z$a,Z$b)},Z$a.addNodeDown=function(Z$a,Z$b){if(Z$b<this._scene.treeLevel){var Z$c=this.inChildIndex(Z$a.boundingBoxCenter),Z$d=this.addChild(Z$c);1===Collision.boxContainsBox(Z$d._relaxBox,Z$a.boundingBox)?Z$d.addNodeDown(Z$a,++Z$b):this.addObject(Z$a)}else this.addObject(Z$a)},Z$a.inChildIndex=function(Z$a){return 4*(Z$a.z<this._boundingBoxCenter.z?0:1)+2*(Z$a.y<this._boundingBoxCenter.y?0:1)+(Z$a.x<this._boundingBoxCenter.x?0:1)},Z$a.updateObject=function(Z$a){1===Collision.boxContainsBox(this._relaxBox,Z$a.boundingBox)?(this.removeObject(Z$a),Z$a._treeNode=null,this.addNodeDown(Z$a,this._currentDepth)):this._parent&&(this.removeObject(Z$a),Z$a._treeNode=null,this._parent.addNodeUp(Z$a,this._currentDepth-1))},Z$a.cullingObjects=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f,Z$i=0,Z$j=0,Z$k=0,Z$l=this._scene._dynamicBatchManager;for(Z$i=0,Z$f=this._objects.length;Z$i<Z$f;Z$i++){var Z$m=this._objects[Z$i];if(Z$I.isVisible(Z$m._owner.layer.mask)&&Z$m.enable){if(Z$b&&(Z$A.treeSpriteCollision+=1,0===Z$a.containsBoundSphere(Z$m.boundingSphere)))continue;Z$m._renderUpdate(Z$e),Z$m._distanceForSort=Z$ib.distance(Z$m.boundingSphere.center,Z$d)+Z$m.sortingFudge;var Z$n=Z$m._renderElements;for(Z$j=0,Z$k=Z$n.length;Z$j<Z$k;Z$j++){var Z$o=Z$n[Z$j],Z$p=Z$o._staticBatch;if(Z$p&&Z$p._material===Z$o._material)Z$p._addBatchRenderElement(Z$o);else{var Z$q=Z$o.renderObj;Z$q.triangleCount<10&&1===Z$q._vertexBufferCount&&Z$q._getIndexBuffer()&&Z$o._material.renderQueue<2&&Z$o._canDynamicBatch&&!Z$m._owner.isStatic?Z$l._addPrepareRenderElement(Z$o):this._scene.getRenderQueue(Z$o._material.renderQueue)._addRenderElement(Z$o)}}}}for(Z$i=0;Z$i<8;Z$i++){var Z$r=this._children[Z$i];if(null!=Z$r){var Z$s=Z$b;if(Z$b){var Z$t=Z$a.containsBoundBox(Z$r._relaxBox);if(Z$A.treeNodeCollision+=1,0===Z$t)continue;Z$s=2===Z$t}Z$r.cullingObjects(Z$a,Z$s,Z$c,Z$d,Z$e)}}},Z$a.cullingShadowObjects=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f,Z$i=0,Z$j=0,Z$k=0;this._scene._dynamicBatchManager;for(Z$i=0,Z$f=this._objects.length;Z$i<Z$f;Z$i++){var Z$l=this._objects[Z$i];if(Z$l.castShadow&&Z$I.isVisible(Z$l._owner.layer.mask)&&Z$l.enable){if(Z$c&&0===Z$a[0].containsBoundSphere(Z$l.boundingSphere))continue;for(var Z$m=1,Z$n=Z$a.length;Z$m<Z$n;Z$m++){var Z$o=Z$b[Z$m-1];if(0!==Z$a[Z$m].containsBoundSphere(Z$l.boundingSphere)){var Z$p=Z$l._renderElements;for(Z$j=0,Z$k=Z$p.length;Z$j<Z$k;Z$j++)Z$o._addRenderElement(Z$p[Z$j])}}}}for(Z$i=0;Z$i<8;Z$i++){var Z$q=this._children[Z$i];if(null!=Z$q){var Z$r=Z$c;if(Z$c){var Z$s=Z$a[0].containsBoundBox(Z$q._relaxBox);if(0===Z$s)continue;Z$r=2===Z$s}Z$q.cullingShadowObjects(Z$a,Z$b,Z$r,Z$d,Z$e)}}},Z$a.cullingShadowObjectsOnePSSM=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i,Z$j=Z$b[0],Z$k=0,Z$l=0,Z$m=0;for(Z$k=0,Z$i=this._objects.length;Z$k<Z$i;Z$k++){var Z$n=this._objects[Z$k];if(Z$n.castShadow&&Z$I.isVisible(Z$n._owner.layer.mask)&&Z$n.enable){if(Z$d&&0===Z$a.containsBoundSphere(Z$n.boundingSphere))continue;Z$n._renderUpdate(Z$c);var Z$o=Z$n._renderElements;for(Z$l=0,Z$m=Z$o.length;Z$l<Z$m;Z$l++)Z$j._addRenderElement(Z$o[Z$l])}}for(Z$k=0;Z$k<8;Z$k++){var Z$p=this._children[Z$k];if(null!=Z$p){var Z$q=Z$d;if(Z$d){var Z$r=Z$a.containsBoundBox(Z$p._relaxBox);if(0===Z$r)continue;Z$q=2===Z$r}Z$p.cullingShadowObjectsOnePSSM(Z$a,Z$b,Z$c,Z$q,Z$e,Z$f)}}},Z$a.renderBoudingBox=function(Z$a){this._renderBoudingBox(Z$a);for(var Z$b=0;Z$b<8;++Z$b){var Z$c=this._children[Z$b];Z$c&&Z$c.renderBoudingBox(Z$a)}},Z$a.buildAllChild=function(Z$a){if(Z$a<this._scene.treeLevel)for(var Z$b=0;Z$b<8;Z$b++){this.addChild(Z$b).buildAllChild(Z$a+1)}},Z$a._renderBoudingBox=function(Z$a){},Z$q(0,Z$a,"exactBox",function(){return this._exactBox},function(Z$a){this._exactBox=Z$a,Z$ib.add(Z$a.min,Z$a.max,this._boundingBoxCenter),Z$ib.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),Z$q(0,Z$a,"relaxBox",function(){return this._relaxBox},function(Z$a){(this._relaxBox=Z$a).getCorners(this._corners),Z$_a.createfromPoints(this._corners,this._boundingSphere)}),Z$i.debugMode=!1,Z$i.relax=1.15,Z$i.CHILDNUM=8,Z$n(Z$i,["tempVector0",function(){return this.tempVector0=new Z$ib},"tempSize",function(){return this.tempSize=new Z$ib},"tempCenter",function(){return this.tempCenter=new Z$ib},"_octreeSplit",function(){return this._octreeSplit=[new Z$ib(.25,.25,.25),new Z$ib(.75,.25,.25),new Z$ib(.25,.75,.25),new Z$ib(.75,.75,.25),new Z$ib(.25,.25,.75),new Z$ib(.75,.25,.75),new Z$ib(.25,.75,.75),new Z$ib(.75,.75,.75)]}]),Z$i}(),Z$$=(function(){function Z$a(){}Z$p(Z$a,"laya.d3.core.scene.SceneManager")}(),function(){function Z$a(Z$a,Z$b,Z$c,Z$d){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===Z$a&&(Z$a=1),void 0===Z$b&&(Z$b=1),void 0===Z$c&&(Z$c=1),void 0===Z$d&&(Z$d=1),this._r=Z$a,this._g=Z$b,this._b=Z$c,this._a=Z$d}return Z$p(Z$a,"laya.d3.core.trail.module.Color",null,"Color$1"),Z$a.prototype.cloneTo=function(Z$a){Z$a._r=this._r,Z$a._g=this._g,Z$a._b=this._b,Z$a._a=this._a},Z$n(Z$a,["RED",function(){return this.RED=new Z$a(1,0,0,1)},"GREEN",function(){return this.GREEN=new Z$a(0,1,0,1)},"BLUE",function(){return this.BLUE=new Z$a(0,0,1,1)},"CYAN",function(){return this.CYAN=new Z$a(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new Z$a(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new Z$a(1,0,1,1)},"GRAY",function(){return this.GRAY=new Z$a(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new Z$a(1,1,1,1)},"BLACK",function(){return this.BLACK=new Z$a(0,0,0,1)}]),Z$a}()),Z$_=(function(){function Z$a(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}Z$p(Z$a,"laya.d3.core.trail.module.Gradient");var Z$b=Z$a.prototype;Z$b.setKeys=function(Z$a,Z$b){var Z$c,Z$d;this._colorKeys=Z$a;for(var Z$e=this.index=0;Z$e<Z$a.length;Z$e++){var Z$f=(Z$c=Z$a[Z$e]).color;this._colorKeyData[this.index++]=Z$f._r,this._colorKeyData[this.index++]=Z$f._g,this._colorKeyData[this.index++]=Z$f._b,this._colorKeyData[this.index++]=Z$c.time}this._alphaKeys=Z$b;for(var Z$i=this.index=0;Z$i<Z$b.length;Z$i++)Z$d=Z$b[Z$i],this._alphaKeyData[this.index++]=Z$d.alpha,this._alphaKeyData[this.index++]=Z$d.time},Z$b.cloneTo=function(Z$a){var Z$b=0,Z$c=0,Z$d=this.colorKeys,Z$e=[];for(Z$b=0,Z$c=Z$d.length;Z$b<Z$c;Z$b++){var Z$f=new Z$g;Z$d[Z$b].cloneTo(Z$f),Z$e.push(Z$f)}var Z$i=this.alphaKeys,Z$j=[];for(Z$b=0,Z$c=Z$i.length;Z$b<Z$c;Z$b++){var Z$k=new Z$_;Z$i[Z$b].cloneTo(Z$k),Z$j.push(Z$k)}Z$a.setKeys(Z$e,Z$j)},Z$q(0,Z$b,"mode",function(){return this._mode},function(Z$a){this._mode=Z$a}),Z$q(0,Z$b,"colorKeys",function(){return this._colorKeys},function(Z$a){this._colorKeys=Z$a;for(var Z$b=this.index=0;Z$b<Z$a.length;Z$b++){var Z$c=Z$a[Z$b],Z$d=Z$c.color;this._colorKeyData[this.index++]=Z$d._r,this._colorKeyData[this.index++]=Z$d._g,this._colorKeyData[this.index++]=Z$d._b,this._colorKeyData[this.index++]=Z$c.time}}),Z$q(0,Z$b,"alphaKeys",function(){return this._alphaKeys},function(Z$a){this._alphaKeys=Z$a;for(var Z$b=this.index=0;Z$b<Z$a.length;Z$b++){var Z$c=Z$a[Z$b];this._alphaKeyData[this.index++]=Z$c.alpha,this._alphaKeyData[this.index++]=Z$c.time}})}(),function(){function Z$a(Z$a,Z$b){this._alpha=NaN,this._time=NaN,void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),this._alpha=Z$a,this._time=Z$b}Z$p(Z$a,"laya.d3.core.trail.module.GradientAlphaKey");var Z$b=Z$a.prototype;return Z$b.cloneTo=function(Z$a){Z$a.alpha=this.alpha,Z$a.time=this.time},Z$q(0,Z$b,"alpha",function(){return this._alpha},function(Z$a){this._alpha=Z$a}),Z$q(0,Z$b,"time",function(){return this._time},function(Z$a){this._time=Z$a}),Z$a}()),Z$g=function(){function Z$a(Z$a,Z$b){this._color=null,this._time=NaN,void 0===Z$b&&(Z$b=0),this._color=Z$a||new Z$$,this._time=Z$b}Z$p(Z$a,"laya.d3.core.trail.module.GradientColorKey");var Z$b=Z$a.prototype;return Z$b.cloneTo=function(Z$a){this.color.cloneTo(Z$a.color),Z$a.time=this.time},Z$q(0,Z$b,"color",function(){return this._color},function(Z$a){this._color=Z$a}),Z$q(0,Z$b,"time",function(){return this._time},function(Z$a){this._time=Z$a}),Z$a}(),Z$h=(function(){function Z$a(){}Z$p(Z$a,"laya.d3.core.trail.module.GradientMode"),Z$a.Blend=0,Z$a.Fixed=1}(),function(){function Z$a(){}Z$p(Z$a,"laya.d3.core.trail.module.TextureMode"),Z$a.Stretch=0,Z$a.Tile=1}(),function(){function Z$a(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}Z$p(Z$a,"laya.d3.core.trail.module.TrailKeyFrame"),Z$a.prototype.cloneTo=function(Z$a){Z$a.time=this.time,Z$a.inTangent=this.inTangent,Z$a.outTangent=this.outTangent,Z$a.value=this.value}}(),function(){function Z$b(Z$a){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new Z$ib,this._curPosition=new Z$ib,this._delVector3=new Z$ib,this._lastFixedVertexPosition=new Z$ib,this._pointAtoBVector3=new Z$ib,this._pointA=new Z$ib,this._pointB=new Z$ib,this._owner=Z$a,this._id=Z$b.renderElementCount++,0==this._id?Z$a._owner.transform.position.cloneTo(this._lastPosition):Z$a._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new Z$Ob(Z$h.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new Z$Ob(Z$h.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}Z$p(Z$b,"laya.d3.core.trail.TrailRenderElement");var Z$a=Z$b.prototype;Z$x.imps(Z$a,{"laya.d3.core.render.IRenderable":!0}),Z$a._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},Z$a._addTrailByFirstPosition=function(Z$a,Z$b){Z$ib.subtract(Z$b,Z$a,this._delVector3),Z$ib.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),Z$ib.normalize(this._pointAtoBVector3,this._pointAtoBVector3),Z$ib.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(Z$a),Z$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},Z$a._addTrailByNextPosition=function(Z$a){Z$ib.subtract(Z$a,this._lastFixedVertexPosition,this._delVector3),Z$ib.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),Z$ib.normalize(this._pointAtoBVector3,this._pointAtoBVector3),Z$ib.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=Z$ib.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=Z$ga.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(Z$a),Z$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(Z$a),this._virtualVerticesCount=2)},Z$a._updateVerticesByPosition=function(Z$a){this._pointe=Z$a.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},Z$a._updateVertexBuffer2=function(){var Z$a,Z$b=0,Z$c=0,Z$d=0;for(Z$d=0,Z$a=(this._verticesCount+this._virtualVerticesCount)/2;Z$d<Z$a;Z$d++)Z$c=0==this._owner.textureMode?(this._VerticesToTailLength[Z$d]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[Z$d],this._vertices2[Z$b++]=1-Z$c,this._vertices2[Z$b++]=1-Z$c;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},Z$a._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},Z$a._updateDisappear=function(){var Z$a,Z$b=0;for(Z$b=this._curDisappearIndex,Z$a=(this._verticesCount+this._virtualVerticesCount)/2;Z$b<Z$a;Z$b++)this._owner._curtime-this._everyGroupVertexBirthTime[Z$b]>=this._owner.time+Z$ga.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},Z$a._beforeRender=function(Z$a){return this._camera=Z$a.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),Z$ib.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},Z$a._render=function(Z$a){this._isDead||(Z$F.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),Z$A.drawCall++,Z$A.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},Z$a._getVertexBuffer=function(Z$a){return void 0===Z$a&&(Z$a=0),0===Z$a?this._vertexBuffer1:1===Z$a?this._vertexBuffer2:null},Z$a._getVertexBuffers=function(){return this._vertexBuffers},Z$a._getIndexBuffer=function(){return null},Z$a.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},Z$a._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},Z$q(0,Z$a,"_vertexBufferCount",function(){return this._vertexBuffers.length}),Z$q(0,Z$a,"triangleCount",function(){return 0}),Z$b.renderElementCount=0}(),function(){function Z$a(){}Z$p(Z$a,"laya.d3.core.trail.VertexTrail");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration1}),Z$q(1,Z$a,"vertexDeclaration1",function(){return Z$a._vertexDeclaration1}),Z$q(1,Z$a,"vertexDeclaration2",function(){return Z$a._vertexDeclaration2}),Z$n(Z$a,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new Z$fa(32,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",41),new Z$ia(24,"single",33),new Z$ia(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new Z$fa(4,[new Z$ia(0,"single",38)])}]),Z$a}()),Z$aa=function(){function Z$w(Z$a){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=Z$a}Z$p(Z$w,"laya.d3.graphics.DynamicBatch");var Z$a=Z$w.prototype;return Z$x.imps(Z$a,{"laya.d3.core.render.IRenderable":!0}),Z$a._getVertexBuffer=function(Z$a){return void 0===Z$a&&(Z$a=0),0===Z$a?this._vertexBuffer:null},Z$a._getIndexBuffer=function(){return this._indexBuffer},Z$a._getCombineRenderElementFromPool=function(Z$a,Z$b,Z$c){var Z$d=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return Z$d||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=Z$d=new Z$W,Z$d._sprite3D=new Z$Xb),Z$d._sprite3D._render._renderUpdate(Z$c),Z$d},Z$a._getRenderElement=function(Z$a,Z$b,Z$c){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*Z$w.maxVertexCount),this._indexDatas=new Uint16Array(Z$w.maxIndexCount),this._vertexBuffer=Z$Ob.create(this._vertexDeclaration,Z$w.maxVertexCount,35048),this._indexBuffer=Z$Nb.create("ushort",Z$w.maxIndexCount,35048));for(var Z$d=this._merageElements.length=0,Z$e=0,Z$f=0,Z$i=this._combineRenderElements.length;Z$f<Z$i;Z$f++){var Z$j=this._combineRenderElements[Z$f],Z$k=Z$j.getDynamicBatchBakedVertexs(0),Z$l=Z$j.getBakedIndices(),Z$m=Z$j._sprite3D.transform._isFrontFaceInvert,Z$n=Z$d/(this._vertexDeclaration.vertexStride/4),Z$o=Z$e,Z$p=Z$o+Z$l.length;Z$j._tempBatchIndexStart=Z$o,Z$j._tempBatchIndexEnd=Z$p,this._indexDatas.set(Z$l,Z$e);var Z$q=0;if(Z$m)for(Z$q=Z$o;Z$q<Z$p;Z$q+=3){this._indexDatas[Z$q]=Z$n+this._indexDatas[Z$q];var Z$r=this._indexDatas[Z$q+1],Z$s=this._indexDatas[Z$q+2];this._indexDatas[Z$q+1]=Z$n+Z$s,this._indexDatas[Z$q+2]=Z$n+Z$r}else for(Z$q=Z$o;Z$q<Z$p;Z$q+=3)this._indexDatas[Z$q]=Z$n+this._indexDatas[Z$q],this._indexDatas[Z$q+1]=Z$n+this._indexDatas[Z$q+1],this._indexDatas[Z$q+2]=Z$n+this._indexDatas[Z$q+2];Z$e+=Z$l.length,this._vertexDatas.set(Z$k,Z$d),Z$d+=Z$k.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),Z$f=this._combineRenderElementPoolIndex=0,Z$i=this._materials.length;Z$f<Z$i;Z$f++){var Z$t=this._getCombineRenderElementFromPool(Z$a,Z$b,Z$c);Z$t._type=2,Z$t._staticBatch=null;var Z$u=(Z$t.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[Z$f]]._tempBatchIndexStart,Z$v=Z$f+1===this._materialToRenderElementsOffsets.length?Z$e:this._combineRenderElements[this._materialToRenderElementsOffsets[Z$f+1]]._tempBatchIndexStart;Z$t._tempBatchIndexStart=Z$u,Z$t._tempBatchIndexEnd=Z$v,Z$t._material=this._materials[Z$f],this._merageElements.push(Z$t)}},Z$a._addCombineRenderObjTest=function(Z$a){var Z$b=Z$a.renderObj,Z$c=this._currentCombineIndexCount+Z$b._getIndexBuffer().indexCount,Z$d=this._currentCombineVertexCount+Z$b._getVertexBuffer().vertexCount;return!(Z$w.maxVertexCount<Z$d||Z$w.maxIndexCount<Z$c)},Z$a._addCombineRenderObj=function(Z$a){var Z$b=Z$a.renderObj;this._combineRenderElements.push(Z$a),this._currentCombineIndexCount=this._currentCombineIndexCount+Z$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+Z$b._getVertexBuffer().vertexCount},Z$a._addCombineMaterial=function(Z$a){this._materials.push(Z$a)},Z$a._addMaterialToRenderElementOffset=function(Z$a){this._materialToRenderElementsOffsets.push(Z$a)},Z$a._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},Z$a._addToRenderQueue=function(Z$a,Z$b,Z$c,Z$d){this._getRenderElement(Z$b,Z$c,Z$d);for(var Z$e=0,Z$f=this._materials.length;Z$e<Z$f;Z$e++)Z$a.getRenderQueue(this._materials[Z$e].renderQueue)._addDynamicBatchElement(this._merageElements[Z$e])},Z$a._beforeRender=function(Z$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},Z$a._render=function(Z$a){var Z$b=Z$a._batchIndexEnd-Z$a._batchIndexStart;Z$F.mainContext.drawElements(4,Z$b,5123,2*Z$a._batchIndexStart),Z$A.drawCall++,Z$A.trianglesFaces+=Z$b/3},Z$a._getVertexBuffers=function(){return null},Z$q(0,Z$a,"_vertexBufferCount",function(){return 1}),Z$q(0,Z$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),Z$q(0,Z$a,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),Z$w.maxVertexCount=2e4,Z$w.maxIndexCount=4e4,Z$w.maxCombineTriangleCount=10,Z$w}(),Z$ba=function(){function Z$w(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}Z$p(Z$w,"laya.d3.graphics.DynamicBatchManager");var Z$a=Z$w.prototype;return Z$a.getDynamicBatch=function(Z$a,Z$b){var Z$c,Z$d=Z$a.id.toString()+Z$b;return this._dynamicBatches[Z$d]?Z$c=this._dynamicBatches[Z$d]:this._dynamicBatches[Z$d]=Z$c=new Z$aa(Z$a),Z$c},Z$a._garbageCollection=function(){for(var Z$a in this._dynamicBatches)0===this._dynamicBatches[Z$a].combineRenderElementsCount&&delete this._dynamicBatches[Z$a]},Z$a._addPrepareRenderElement=function(Z$a){this._prepareDynamicBatchCombineElements.push(Z$a)},Z$a._finishCombineDynamicBatch=function(Z$a){var Z$b,Z$c,Z$d;this._prepareDynamicBatchCombineElements.sort(Z$w._sortPrepareDynamicBatch);for(var Z$e,Z$f,Z$i,Z$j,Z$k,Z$l=-1,Z$m=!0,Z$n=0,Z$o=-1,Z$p=0,Z$q=this._prepareDynamicBatchCombineElements.length;Z$p<Z$q;Z$p++){var Z$r=(Z$f=this._prepareDynamicBatchCombineElements[Z$p]).renderObj._getVertexBuffer(0).vertexDeclaration,Z$s=Z$c!==Z$r;Z$s&&(Z$n=0,Z$c=Z$r);var Z$t=Z$n!==Z$l;if(Z$t&&(Z$l=Z$n),(Z$s||Z$t)&&(Z$i=this.getDynamicBatch(Z$r,Z$n),Z$b=null),Z$m)if(Z$i._addCombineRenderObjTest(Z$f)){if(Z$b!==(Z$e=Z$f._material))Z$j&&(Z$a.getRenderQueue(Z$k._material.renderQueue)._addRenderElement(Z$k),Z$k=Z$j=null,Z$o=-1),Z$j=Z$e,Z$o=Z$i.combineRenderElementsCount,Z$k=Z$f,Z$b=Z$e;else if(Z$j){var Z$u=Z$k.renderObj,Z$v=Z$f.renderObj;Z$u._getVertexBuffer().vertexCount+Z$v._getVertexBuffer().vertexCount>Z$aa.maxVertexCount||Z$u._getIndexBuffer().indexCount+Z$v._getIndexBuffer().indexCount>Z$aa.maxIndexCount?(Z$a.getRenderQueue(Z$k._material.renderQueue)._addRenderElement(Z$k),Z$j=Z$e,Z$o=Z$i.combineRenderElementsCount,Z$k=Z$f):(Z$i._addCombineMaterial(Z$j),Z$i._addMaterialToRenderElementOffset(Z$o),Z$i._addCombineRenderObj(Z$k),Z$k=Z$j=null,Z$o=-1,Z$i._addCombineRenderObj(Z$f))}else Z$i._addCombineRenderObj(Z$f);Z$m=!0}else Z$j&&(Z$a.getRenderQueue(Z$k._material.renderQueue)._addRenderElement(Z$k),Z$k=Z$j=null,Z$o=-1),Z$n++,Z$m=!1;else Z$d=this._prepareDynamicBatchCombineElements[Z$p-1],Z$i._addMaterialToRenderElementOffset(Z$i.combineRenderElementsCount),Z$b=Z$d._material,Z$i._addCombineMaterial(Z$b),Z$i._addCombineRenderObj(Z$d),Z$m=!0,Z$b!==(Z$e=Z$f._material)?(Z$j=Z$e,Z$o=Z$i.combineRenderElementsCount,Z$k=Z$f):Z$i._addCombineRenderObj(Z$f),Z$b=Z$e}Z$j&&(Z$a.getRenderQueue(Z$k._material.renderQueue)._addRenderElement(Z$k),Z$k=Z$j=null,Z$o=-1),this._prepareDynamicBatchCombineElements.length=0},Z$a._clearRenderElements=function(){for(var Z$a in this._dynamicBatches)this._dynamicBatches[Z$a]._clearRenderElements()},Z$a._addToRenderQueue=function(Z$a,Z$b,Z$c,Z$d){for(var Z$e in this._dynamicBatches){var Z$f=this._dynamicBatches[Z$e];0<Z$f.combineRenderElementsCount&&Z$f._addToRenderQueue(Z$a,Z$b,Z$c,Z$d)}},Z$a.dispose=function(){this._dynamicBatches=null},Z$w._sortPrepareDynamicBatch=function(Z$a,Z$b){return Z$a._mainSortID-Z$b._mainSortID},Z$w}(),Z$ca=function(){function Z$a(){}return Z$p(Z$a,"laya.d3.graphics.FrustumCulling"),Z$a.renderShadowObjectCulling=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=0,Z$i=0,Z$j=0,Z$k=0;for(Z$f=0,Z$j=Z$c.length;Z$f<Z$j;Z$f++){var Z$l=Z$c[Z$f];Z$l&&Z$l._clearRenderElements()}var Z$m,Z$n,Z$o,Z$p=Z$a._cullingRenders;if(1<Z$e){for(Z$f=0,Z$j=Z$a._cullingRendersLength;Z$f<Z$j;Z$f++)if((Z$m=Z$p[Z$f]).castShadow&&Z$I.isVisible(Z$m._owner.layer.mask)&&Z$m.enable)for(var Z$q=1,Z$r=Z$b.length;Z$q<Z$r;Z$q++)if(Z$n=Z$c[Z$q-1],0!==Z$b[Z$q].containsBoundSphere(Z$m.boundingSphere))for(Z$i=0,Z$k=(Z$o=Z$m._renderElements).length;Z$i<Z$k;Z$i++)Z$n._addRenderElement(Z$o[Z$i])}else for(Z$f=0,Z$j=Z$a._cullingRendersLength;Z$f<Z$j;Z$f++)if((Z$m=Z$p[Z$f]).castShadow&&Z$I.isVisible(Z$m._owner.layer.mask)&&Z$m.enable&&0!==Z$b[0].containsBoundSphere(Z$m.boundingSphere))for(Z$m._renderUpdate(Z$d),Z$n=Z$c[0],Z$i=0,Z$k=(Z$o=Z$m._renderElements).length;Z$i<Z$k;Z$i++)Z$n._addRenderElement(Z$o[Z$i])},Z$a.renderShadowObjectCullingOctree=function(Z$a,Z$b,Z$c,Z$d,Z$e){for(var Z$f=0,Z$i=Z$c.length;Z$f<Z$i;Z$f++){var Z$j=Z$c[Z$f];Z$j&&Z$j._clearRenderElements()}1<Z$e?Z$a.treeRoot.cullingShadowObjects(Z$b,Z$c,!0,0,Z$a):Z$a.treeRoot.cullingShadowObjectsOnePSSM(Z$b[0],Z$c,Z$d,!0,0,Z$a)},Z$a.renderObjectCulling=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=0,Z$j=0,Z$k=0,Z$l=0,Z$m=Z$b._quenes,Z$n=Z$b._dynamicBatchManager,Z$o=Z$b._cullingRenders;for(Z$i=0,Z$j=Z$m.length;Z$i<Z$j;Z$i++){var Z$p=Z$m[Z$i];Z$p&&Z$p._clearRenderElements()}var Z$q=Z$da._staticBatchManagers;for(Z$i=0,Z$j=Z$q.length;Z$i<Z$j;Z$i++)Z$q[Z$i]._clearRenderElements();Z$n._clearRenderElements();var Z$r=Z$c.transform.position;for(Z$i=0,Z$j=Z$b._cullingRendersLength;Z$i<Z$j;Z$i++){var Z$s=Z$o[Z$i];if(Z$I.isVisible(Z$s._owner.layer.mask)&&Z$s.enable&&0!==Z$a.containsBoundSphere(Z$s.boundingSphere)&&Z$s._renderUpdate(Z$f)){Z$s._distanceForSort=Z$ib.distance(Z$s.boundingSphere.center,Z$r)+Z$s.sortingFudge;var Z$t=Z$s._renderElements;for(Z$k=0,Z$l=Z$t.length;Z$k<Z$l;Z$k++){var Z$u=Z$t[Z$k],Z$v=Z$u._staticBatch;if(Z$v&&Z$v._material===Z$u._material)Z$v._addBatchRenderElement(Z$u);else{var Z$w=Z$u.renderObj;Z$w.triangleCount<10&&1===Z$w._vertexBufferCount&&Z$w._getIndexBuffer()&&Z$u._material.renderQueue<2&&Z$u._canDynamicBatch&&!Z$s._owner.isStatic?Z$n._addPrepareRenderElement(Z$u):Z$b.getRenderQueue(Z$u._material.renderQueue)._addRenderElement(Z$u)}}}}for(Z$i=0,Z$j=Z$q.length;Z$i<Z$j;Z$i++)Z$q[Z$i]._addToRenderQueue(Z$b,Z$d,Z$e,Z$f);Z$n._finishCombineDynamicBatch(Z$b),Z$n._addToRenderQueue(Z$b,Z$d,Z$e,Z$f)},Z$a.renderObjectCullingOctree=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=0,Z$j=0,Z$k=Z$b._quenes,Z$l=Z$b._dynamicBatchManager;for(Z$i=0,Z$j=Z$k.length;Z$i<Z$j;Z$i++){var Z$m=Z$k[Z$i];Z$m&&Z$m._clearRenderElements()}var Z$n=Z$da._staticBatchManagers;for(Z$i=0,Z$j=Z$n.length;Z$i<Z$j;Z$i++)Z$n[Z$i]._clearRenderElements();for(Z$l._clearRenderElements(),Z$b._cullingRenders.length=0,Z$b.treeRoot.cullingObjects(Z$a,!0,0,Z$c.transform.position,Z$f),Z$i=0,Z$j=Z$n.length;Z$i<Z$j;Z$i++)Z$n[Z$i]._addToRenderQueue(Z$b,Z$d,Z$e,Z$f);Z$l._finishCombineDynamicBatch(Z$b),Z$l._addToRenderQueue(Z$b,Z$d,Z$e,Z$f)},Z$a.renderObjectCullingNoBoundFrustum=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=0,Z$i=0,Z$j=0,Z$k=0,Z$l=Z$a._quenes,Z$m=Z$a._dynamicBatchManager,Z$n=Z$a._cullingRenders;for(Z$f=0,Z$i=Z$l.length;Z$f<Z$i;Z$f++){var Z$o=Z$l[Z$f];Z$o&&Z$o._clearRenderElements()}var Z$p=Z$da._staticBatchManagers;for(Z$f=0,Z$i=Z$p.length;Z$f<Z$i;Z$f++)Z$p[Z$f]._clearRenderElements();Z$m._clearRenderElements();var Z$q=Z$b.transform.position;for(Z$f=0,Z$i=Z$a._cullingRendersLength;Z$f<Z$i;Z$f++){var Z$r=Z$n[Z$f];if(Z$I.isVisible(Z$r._owner.layer.mask)&&Z$r.enable){Z$r._renderUpdate(Z$e),Z$r._distanceForSort=Z$ib.distance(Z$r.boundingSphere.center,Z$q)+Z$r.sortingFudge;var Z$s=Z$r._renderElements;for(Z$j=0,Z$k=Z$s.length;Z$j<Z$k;Z$j++){var Z$t=Z$s[Z$j],Z$u=Z$t._staticBatch;if(Z$u&&Z$u._material===Z$t._material)Z$u._addBatchRenderElement(Z$t);else{var Z$v=Z$t.renderObj;Z$v.triangleCount<10&&1===Z$v._vertexBufferCount&&Z$v._getIndexBuffer()&&Z$t._material.renderQueue<2&&Z$t._canDynamicBatch&&!Z$r._owner.isStatic?Z$m._addPrepareRenderElement(Z$t):Z$a.getRenderQueue(Z$t._material.renderQueue)._addRenderElement(Z$t)}}}}for(Z$f=0,Z$i=Z$p.length;Z$f<Z$i;Z$f++)Z$p[Z$f]._addToRenderQueue(Z$a,Z$c,Z$d,Z$e);Z$m._finishCombineDynamicBatch(Z$a),Z$m._addToRenderQueue(Z$a,Z$c,Z$d,Z$e)},Z$a}(),Z$da=function(){function Z$f(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}Z$p(Z$f,"laya.d3.graphics.StaticBatchManager");var Z$a=Z$f.prototype;return Z$a._finishInit=function(){for(var Z$a in this._staticBatches)this._staticBatches[Z$a]._finishInit();this._initBatchRenderElements.length=0},Z$a._initStaticBatchs=function(Z$a){throw new Error("StaticBatchManager:must override this function.")},Z$a._addInitBatchSprite=function(Z$a){for(var Z$b=Z$a._render._renderElements,Z$c=0,Z$d=Z$b.length;Z$c<Z$d;Z$c++)this._initBatchRenderElements.push(Z$b[Z$c])},Z$a._clearRenderElements=function(){for(var Z$a in this._staticBatches)this._staticBatches[Z$a]._clearRenderElements()},Z$a._garbageCollection=function(Z$a){var Z$b=Z$a._staticBatch,Z$c=Z$b._initBatchRenderElements,Z$d=Z$c.indexOf(Z$a);Z$c.splice(Z$d,1),0===Z$c.length&&(Z$b.dispose(),delete this._staticBatches[Z$b._key])},Z$a._addToRenderQueue=function(Z$a,Z$b,Z$c,Z$d){for(var Z$e in this._staticBatches){var Z$f=this._staticBatches[Z$e];0<Z$f._batchRenderElements.length&&Z$f._updateToRenderQueue(Z$a,Z$d)}},Z$a.dispose=function(){this._staticBatches=null},Z$f._addToStaticBatchQueue=function(Z$a){Z$a instanceof laya.d3.core.RenderableSprite3D&&Z$a._addToInitStaticBatchManager();for(var Z$b=0,Z$c=Z$a.numChildren;Z$b<Z$c;Z$b++)Z$f._addToStaticBatchQueue(Z$a._childs[Z$b])},Z$f.combine=function(Z$a,Z$b){var Z$c,Z$d=0,Z$e=0;if(Z$b)for(Z$d=0,Z$e=Z$b.length;Z$d<Z$e;Z$d++){Z$b[Z$d]._addToInitStaticBatchManager()}else Z$a&&Z$f._addToStaticBatchQueue(Z$a);for(Z$d=0,Z$e=Z$f._staticBatchManagers.length;Z$d<Z$e;Z$d++)(Z$c=Z$f._staticBatchManagers[Z$d])._initStaticBatchs(Z$a),Z$c._finishInit()},Z$f._staticBatchManagers=[],Z$f}(),Z$ea=function(){function Z$a(Z$a,Z$b,Z$c){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=Z$a,this._manager=Z$b,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=Z$c}Z$p(Z$a,"laya.d3.graphics.StaticBatch");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),Z$b._binarySearch=function(Z$a){for(var Z$b=0,Z$c=this._batchRenderElements.length-1,Z$d=0;Z$b<=Z$c;)Z$d=Math.floor((Z$b+Z$c)/2),this._compareBatchRenderElement(this._batchRenderElements[Z$d],Z$a)?Z$c=Z$d-1:Z$b=Z$d+1;return Z$b},Z$b._compareBatchRenderElement=function(Z$a,Z$b){throw new Error("StaticBatch:must override this function.")},Z$b._getVertexDecLightMap=function(Z$a){return Z$a===Z$Na.vertexDeclaration?Z$Ia.vertexDeclaration:Z$a===Z$Ma.vertexDeclaration?Z$Ha.vertexDeclaration:Z$a===Z$Ba.vertexDeclaration?Z$wa.vertexDeclaration:Z$a===Z$Ra.vertexDeclaration?null:Z$a===Z$ra.vertexDeclaration?Z$sa.vertexDeclaration:Z$a===Z$Pa.vertexDeclaration?Z$Ka.vertexDeclaration:Z$a===Z$Fa.vertexDeclaration?Z$Ga.vertexDeclaration:Z$a===Z$Oa.vertexDeclaration?Z$Ja.vertexDeclaration:Z$a===Z$Ma.vertexDeclaration?Z$Ha.vertexDeclaration:Z$a===Z$Ca.vertexDeclaration?Z$xa.vertexDeclaration:Z$a===Z$Ra.vertexDeclaration?null:Z$a===Z$ra.vertexDeclaration?Z$sa.vertexDeclaration:Z$a===Z$Qa.vertexDeclaration?Z$La.vertexDeclaration:Z$a===Z$Fa.vertexDeclaration?Z$Ga.vertexDeclaration:Z$a},Z$b._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},Z$b._addBatchRenderElement=function(Z$a){this._batchRenderElements.splice(this._binarySearch(Z$a),0,Z$a)},Z$b._updateToRenderQueue=function(Z$a,Z$b){this._combineRenderElementPoolIndex=0,this._getRenderElement(Z$a.getRenderQueue(this._material.renderQueue)._renderElements,Z$a,Z$b)},Z$b._getRenderElement=function(Z$a,Z$b,Z$c){throw new Error("StaticBatch:must override this function.")},Z$b._finishInit=function(){throw new Error("StaticBatch:must override this function.")},Z$b._clearRenderElements=function(){this._batchRenderElements.length=0},Z$b.dispose=function(){},Z$b._getVertexBuffer=function(Z$a){return void 0===Z$a&&(Z$a=0),null},Z$b._getIndexBuffer=function(){return null},Z$b._beforeRender=function(Z$a){return!0},Z$b._render=function(Z$a){},Z$b._getVertexBuffers=function(){return null},Z$q(0,Z$b,"_vertexBufferCount",function(){return 1}),Z$q(0,Z$b,"triangleCount",function(){return 0}),Z$a.combine=function(Z$a){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),Z$da.combine(Z$a)},Z$a.maxBatchVertexCount=65535,Z$a}(),Z$fa=function(){function Z$i(Z$a,Z$b){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++Z$i._uniqueIDCounter,this._id>Z$i.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",Z$i.maxVertexDeclaration);this._shaderValues=new Z$ob,this._vertexElementsDic={},this._vertexStride=Z$a,this._vertexElements=Z$b;for(var Z$c=0;Z$c<Z$b.length;Z$c++){var Z$d=Z$b[Z$c],Z$e=Z$d.elementUsage;this._vertexElementsDic[Z$e]=Z$d;var Z$f=[Z$i._getTypeSize(Z$d.elementFormat)/4,5126,!1,this._vertexStride,Z$d.offset];switch(this._shaderValues.setValue(Z$e,Z$f),Z$e){case 1:this._addShaderDefine(Z$Ab.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(Z$Ab.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(Z$Ab.SHADERDEFINE_UV1)}}}Z$p(Z$i,"laya.d3.graphics.VertexDeclaration");var Z$a=Z$i.prototype;return Z$a._addShaderDefine=function(Z$a){this._shaderDefineValue|=Z$a},Z$a._removeShaderDefine=function(Z$a){this._shaderDefineValue&=~Z$a},Z$a.getVertexElements=function(){return this._vertexElements.slice()},Z$a.getVertexElementByUsage=function(Z$a){return this._vertexElementsDic[Z$a]},Z$a.unBinding=function(){},Z$q(0,Z$a,"shaderDefineValue",function(){return this._shaderDefineValue}),Z$q(0,Z$a,"id",function(){return this._id}),Z$q(0,Z$a,"vertexStride",function(){return this._vertexStride}),Z$q(0,Z$a,"shaderValues",function(){return this._shaderValues}),Z$i._getTypeSize=function(Z$a){switch(Z$a){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},Z$i.getVertexStride=function(Z$a){for(var Z$b=0,Z$c=0;Z$c<Z$a.Length;Z$c++){var Z$d=Z$a[Z$c],Z$e=Z$d.offset+Z$i._getTypeSize(Z$d.elementFormat);Z$b<Z$e&&(Z$b=Z$e)}return Z$b},Z$i._maxVertexDeclarationBit=1e3,Z$i._uniqueIDCounter=1,Z$n(Z$i,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),Z$i}(),Z$ia=function(){function Z$a(Z$a,Z$b,Z$c){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=Z$a,this.elementFormat=Z$b,this.elementUsage=Z$c}return Z$p(Z$a,"laya.d3.graphics.VertexElement"),Z$a}(),Z$ja=(function(){function Z$a(){}Z$p(Z$a,"laya.d3.graphics.VertexElementFormat"),Z$a.Single="single",Z$a.Vector2="vector2",Z$a.Vector3="vector3",Z$a.Vector4="vector4",Z$a.Color="color",Z$a.Byte4="byte4",Z$a.Short2="short2",Z$a.Short4="short4",Z$a.NormalizedShort2="normalizedshort2",Z$a.NormalizedShort4="normalizedshort4",Z$a.HalfVector2="halfvector2",Z$a.HalfVector4="halfvector4"}(),function(){function Z$a(){}Z$p(Z$a,"laya.d3.graphics.VertexElementUsage"),Z$a.POSITION0=0,Z$a.COLOR0=1,Z$a.TEXTURECOORDINATE0=2,Z$a.NORMAL0=3,Z$a.BINORMAL0=4,Z$a.TANGENT0=5,Z$a.BLENDINDICES0=6,Z$a.BLENDWEIGHT0=7,Z$a.DEPTH0=8,Z$a.FOG0=9,Z$a.POINTSIZE0=10,Z$a.SAMPLE0=11,Z$a.TESSELLATEFACTOR0=12,Z$a.COLOR1=13,Z$a.NEXTTEXTURECOORDINATE0=14,Z$a.TEXTURECOORDINATE1=15,Z$a.NEXTTEXTURECOORDINATE1=16,Z$a.CORNERTEXTURECOORDINATE0=17,Z$a.VELOCITY0=18,Z$a.STARTCOLOR0=19,Z$a.STARTSIZE=20,Z$a.AGEADDSCALE0=21,Z$a.STARTROTATION=22,Z$a.ENDCOLOR0=23,Z$a.STARTLIFETIME=24,Z$a.TIME0=33,Z$a.SHAPEPOSITIONSTARTLIFETIME=30,Z$a.DIRECTIONTIME=32,Z$a.SIZEROTATION0=27,Z$a.RADIUS0=28,Z$a.RADIAN0=29,Z$a.STARTSPEED=31,Z$a.RANDOM0=34,Z$a.RANDOM1=35,Z$a.SIMULATIONWORLDPOSTION=36,Z$a.SIMULATIONWORLDROTATION=37,Z$a.TEXTURECOORDINATE0X=38,Z$a.TEXTURECOORDINATE0X1=39,Z$a.TEXTURECOORDINATE0Y=40,Z$a.OFFSETVECTOR=41}(),function(){function Z$a(Z$a,Z$b,Z$c){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=Z$a,this._textureCoordinate0=Z$b,this._time=Z$c}Z$p(Z$a,"laya.d3.graphics.VertexGlitter");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"time",function(){return this._time}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(24,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector2",2),new Z$ia(20,"single",33)])}])}(),function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=Z$a,this._position=Z$b,this._velocity=Z$c,this._startColor=Z$d,this._endColor=Z$e,this._sizeRotation=Z$f,this._radius=Z$i,this._radian=Z$j,this._ageAddScale=Z$k,this._time=Z$l}Z$p(Z$a,"laya.d3.graphics.VertexParticle");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"endColor",function(){return this._endColor}),Z$q(0,Z$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),Z$q(0,Z$b,"sizeRotation",function(){return this._sizeRotation}),Z$q(0,Z$b,"velocity",function(){return this._velocity}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"startColor",function(){return this._startColor}),Z$q(0,Z$b,"radius",function(){return this._radius}),Z$q(0,Z$b,"radian",function(){return this._radian}),Z$q(0,Z$b,"ageAddScale",function(){return this._ageAddScale}),Z$q(0,Z$b,"time",function(){return this._time}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(116,[new Z$ia(0,"vector4",17),new Z$ia(16,"vector3",0),new Z$ia(28,"vector3",18),new Z$ia(40,"vector4",19),new Z$ia(56,"vector4",23),new Z$ia(72,"vector3",27),new Z$ia(84,"vector2",28),new Z$ia(92,"vector4",29),new Z$ia(108,"single",24),new Z$ia(112,"single",33)])}])}(),function(){function Z$a(Z$a){this._position=null,this._position=Z$a}Z$p(Z$a,"laya.d3.graphics.VertexPosition");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(12,[new Z$ia(0,"vector3",0)])}]),Z$a}()),Z$ka=function(){function Z$a(Z$a,Z$b){this._position=null,this._normal=null,this._position=Z$a,this._normal=Z$b}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormal");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(24,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3)])}]),Z$a}(),Z$la=function(){function Z$a(Z$a,Z$b,Z$c){this._position=null,this._normal=null,this._color=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColor");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(40,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1)])}]),Z$a}(),Z$ma=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._blendIndex=Z$d,this._blendWeight=Z$e}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorSkin");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(72,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector4",7),new Z$ia(56,"vector4",6)])}]),Z$a}(),Z$na=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._tangent=Z$d,this._blendIndex=Z$e,this._blendWeight=Z$f}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(88,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector4",7),new Z$ia(56,"vector4",6),new Z$ia(72,"vector4",5)])}]),Z$a}(),Z$oa=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._tangent=Z$d,this._blendIndex=Z$e,this._blendWeight=Z$f}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(84,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector4",7),new Z$ia(56,"vector4",6),new Z$ia(72,"vector3",5)])}]),Z$a}(),Z$pa=function(){function Z$a(Z$a,Z$b,Z$c,Z$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._tangent=Z$d}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorSTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(56,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector4",5)])}]),Z$a}(),Z$qa=function(){function Z$a(Z$a,Z$b,Z$c,Z$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._tangent=Z$d}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(52,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector3",5)])}]),Z$a}(),Z$ra=function(){function Z$a(Z$a,Z$b,Z$c,Z$d){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate=Z$d}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTexture");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(48,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2)])}]),Z$a}(),Z$sa=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate0=Z$d,this._textureCoordinate1=Z$e}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(56,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector2",15)])}]),Z$a}(),Z$ta=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate0=Z$d,this._textureCoordinate1=Z$e,this._blendIndex=Z$f,this._blendWeight=Z$i}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(88,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector2",15),new Z$ia(56,"vector4",7),new Z$ia(72,"vector4",6)])}]),Z$a}(),Z$ua=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate0=Z$d,this._textureCoordinate1=Z$e,this._tangent=Z$f,this._blendIndex=Z$i,this._blendWeight=Z$j}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(104,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector2",15),new Z$ia(56,"vector4",7),new Z$ia(72,"vector4",6),new Z$ia(88,"vector4",5)])}]),Z$a}(),Z$va=function(){function Z$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$b.VertexPositionNormalColorTexture0SkinTangent=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate0=Z$d,this._textureCoordinate1=Z$e,this._tangent=Z$f,this._blendIndex=Z$i,this._blendWeight=Z$j},Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(100,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector2",15),new Z$ia(56,"vector4",7),new Z$ia(72,"vector4",6),new Z$ia(88,"vector3",5)])}]),Z$a}(),Z$wa=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate0=Z$d,this._textureCoordinate1=Z$e,this._tangent=Z$f}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(72,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector2",15),new Z$ia(56,"vector4",5)])}]),Z$a}(),Z$xa=function(){function Z$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$b.VertexPositionNormalColorTexture0Tangent=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate0=Z$d,this._textureCoordinate1=Z$e,this._tangent=Z$f},Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(68,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector2",15),new Z$ia(56,"vector3",5)])}]),Z$a}(),Z$ya=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate=Z$d,this._blendIndex=Z$e,this._blendWeight=Z$f}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(80,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector4",7),new Z$ia(64,"vector4",6)])}]),Z$a}(),Z$za=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate=Z$d,this._tangent=Z$e,this._blendIndex=Z$f,this._blendWeight=Z$i}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(96,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector4",7),new Z$ia(64,"vector4",6),new Z$ia(80,"vector4",5)])}]),Z$a}(),Z$Aa=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate=Z$d,this._tangent=Z$e,this._blendIndex=Z$f,this._blendWeight=Z$i}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(92,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector4",7),new Z$ia(64,"vector4",6),new Z$ia(80,"vector3",5)])}]),Z$a}(),Z$Ba=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate=Z$d,this._tangent=Z$e}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(64,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector4",5)])}]),Z$a}(),Z$Ca=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._color=Z$c,this._textureCoordinate=Z$d,this._tangent=Z$e}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"color",function(){return this._color}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(60,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",1),new Z$ia(40,"vector2",2),new Z$ia(48,"vector3",5)])}]),Z$a}(),Z$Da=function(){function Z$a(Z$a,Z$b,Z$c){this._position=null,this._normal=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._tangent=Z$c}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalSTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(40,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector4",5)])}]),Z$a}(),Z$Ea=function(){function Z$a(Z$a,Z$b,Z$c){this._position=null,this._normal=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._tangent=Z$c}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(36,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector3",5)])}]),Z$a}(),Z$Fa=function(){function Z$a(Z$a,Z$b,Z$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate=Z$c}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTexture");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(32,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2)])}]),Z$a}(),Z$Ga=function(){function Z$a(Z$a,Z$b,Z$c,Z$d){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate0=Z$c,this._textureCoordinate1=Z$d}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(40,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector2",15)])}]),Z$a}(),Z$Ha=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate0=Z$c,this._textureCoordinate1=Z$d,this._blendIndex=Z$e,this._blendWeight=Z$f}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(72,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector2",15),new Z$ia(40,"vector4",7),new Z$ia(56,"vector4",6)])}]),Z$a}(),Z$Ia=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate0=Z$c,this._textureCoordinate1=Z$d,this._tangent=Z$e,this._blendIndex=Z$f,this._blendWeight=Z$i}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(88,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector2",15),new Z$ia(40,"vector4",7),new Z$ia(56,"vector4",6),new Z$ia(72,"vector4",5)])}]),Z$a}(),Z$Ja=function(){function Z$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$b.VertexPositionNormalTexture0SkinTangent=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){this._position=Z$a,this._normal=Z$b,this._textureCoordinate0=Z$c,this._textureCoordinate1=Z$d,this._tangent=Z$e,this._blendIndex=Z$f,this._blendWeight=Z$i},Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(84,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector2",15),new Z$ia(40,"vector4",7),new Z$ia(56,"vector4",6),new Z$ia(72,"vector3",5)])}]),Z$a}(),Z$Ka=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate0=Z$c,this._textureCoordinate1=Z$d,this._tangent=Z$e}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(56,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector2",15),new Z$ia(40,"vector4",5)])}]),Z$a}(),Z$La=function(){function Z$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$b.VertexPositionNormalTexture0Tangent=function(Z$a,Z$b,Z$c,Z$d,Z$e){this._position=Z$a,this._normal=Z$b,this._textureCoordinate0=Z$c,this._textureCoordinate1=Z$d,this._tangent=Z$e},Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(52,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector2",15),new Z$ia(40,"vector3",5)])}]),Z$a}(),Z$Ma=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate=Z$c,this._blendIndex=Z$d,this._blendWeight=Z$e}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTextureSkin");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(64,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector4",7),new Z$ia(48,"vector4",6)])}]),Z$a}(),Z$Na=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate=Z$c,this._tangent=Z$d,this._blendIndex=Z$e,this._blendWeight=Z$f}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(80,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector4",7),new Z$ia(48,"vector4",6),new Z$ia(64,"vector4",5)])}]),Z$a}(),Z$Oa=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate=Z$c,this._tangent=Z$d,this._blendIndex=Z$e,this._blendWeight=Z$f}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(76,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector4",7),new Z$ia(48,"vector4",6),new Z$ia(64,"vector3",5)])}]),Z$a}(),Z$Pa=function(){function Z$a(Z$a,Z$b,Z$c,Z$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate=Z$c,this._tangent=Z$d}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(48,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector4",5)])}]),Z$a}(),Z$Qa=function(){function Z$a(Z$a,Z$b,Z$c,Z$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate=Z$c,this._tangent=Z$d}Z$p(Z$a,"laya.d3.graphics.VertexPositionNormalTextureTangent");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(44,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector3",5)])}]),Z$a}(),Z$Ra=function(){function Z$a(Z$a,Z$b,Z$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate=Z$c}Z$p(Z$a,"laya.d3.graphics.VertexPositionNTBTexture");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(56,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector3",5),new Z$ia(36,"vector3",4),new Z$ia(48,"vector2",2)])}]),Z$a}(),Z$Sa=function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate0=Z$d,this._textureCoordinate1=Z$e,this._tangent=Z$f,Z$c=Z$c,this._blendIndex=Z$i,this._blendWeight=Z$j}Z$p(Z$a,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"tangent",function(){return this._tangent}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(0,Z$b,"textureCoordinate1",function(){return this._textureCoordinate1}),Z$q(0,Z$b,"blendIndex",function(){return this._blendIndex}),Z$q(0,Z$b,"blendWeight",function(){return this._blendWeight}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(96,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector3",5),new Z$ia(36,"vector3",4),new Z$ia(48,"vector2",2),new Z$ia(56,"vector2",15),new Z$ia(64,"vector4",7),new Z$ia(80,"vector4",6)])}]),Z$a}(),Z$Ta=function(){function Z$a(Z$a,Z$b,Z$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=Z$a,this._normal=Z$b,this._textureCoordinate=Z$c}Z$p(Z$a,"laya.d3.graphics.VertexPositionNTBTextureSkin");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"textureCoordinate",function(){return this._textureCoordinate}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(88,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector3",5),new Z$ia(36,"vector3",4),new Z$ia(48,"vector2",2),new Z$ia(56,"vector4",7),new Z$ia(72,"vector4",6)])}]),Z$a}(),Z$Ua=(function(){function Z$a(Z$a,Z$b,Z$c,Z$d){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=Z$a,this._normal=Z$b,this._textureCoord0=Z$c,this._textureCoord1=Z$d}Z$p(Z$a,"laya.d3.graphics.VertexPositionTerrain");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"normal",function(){return this._normal}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"textureCoord0",function(){return this._textureCoord0}),Z$q(0,Z$b,"textureCoord1",function(){return this._textureCoord1}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(40,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector3",3),new Z$ia(24,"vector2",2),new Z$ia(32,"vector2",15)])}])}(),function(){function Z$a(Z$a,Z$b){this._position=null,this._textureCoordinate0=null,this._position=Z$a,this._textureCoordinate0=Z$b}Z$p(Z$a,"laya.d3.graphics.VertexPositionTexture0");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"position",function(){return this._position}),Z$q(0,Z$b,"textureCoordinate0",function(){return this._textureCoordinate0}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(20,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector2",2)])}]),Z$a}()),Z$Va=(function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$n,Z$o,Z$p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=Z$a,this._positionStartLifeTime=Z$b,this._velocity=Z$c,this._startColor=Z$d,this._startSize=Z$e,this._startRotation0=Z$f,this._startRotation1=Z$i,this._startRotation2=Z$j,this._startLifeTime=Z$k,this._time=Z$l,this._startSpeed=Z$m,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=Z$p}Z$p(Z$a,"laya.d3.graphics.VertexShurikenParticleBillboard");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),Z$q(0,Z$b,"random1",function(){return this._randoms1}),Z$q(0,Z$b,"startRotation2",function(){return this._startRotation2}),Z$q(0,Z$b,"positionStartLifeTime",function(){return this._positionStartLifeTime}),Z$q(0,Z$b,"velocity",function(){return this._velocity}),Z$q(0,Z$b,"random0",function(){return this._randoms0}),Z$q(0,Z$b,"startSize",function(){return this._startSize}),Z$q(0,Z$b,"startColor",function(){return this._startColor}),Z$q(0,Z$b,"startRotation0",function(){return this._startRotation0}),Z$q(0,Z$b,"startRotation1",function(){return this._startRotation1}),Z$q(0,Z$b,"startLifeTime",function(){return this._startLifeTime}),Z$q(0,Z$b,"time",function(){return this._time}),Z$q(0,Z$b,"startSpeed",function(){return this._startSpeed}),Z$q(0,Z$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(152,[new Z$ia(0,"vector4",17),new Z$ia(16,"vector4",30),new Z$ia(32,"vector4",32),new Z$ia(48,"vector4",19),new Z$ia(64,"vector3",20),new Z$ia(76,"vector3",22),new Z$ia(88,"single",31),new Z$ia(92,"vector4",34),new Z$ia(108,"vector4",35),new Z$ia(124,"vector3",36),new Z$ia(136,"vector4",37)])}])}(),function(){function Z$a(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$n,Z$o,Z$p){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=Z$a,this._positionStartLifeTime=Z$b,this._velocity=Z$c,this._startColor=Z$d,this._startSize=Z$e,this._startRotation0=Z$f,this._startRotation1=Z$i,this._startRotation2=Z$j,this._startLifeTime=Z$k,this._time=Z$l,this._startSpeed=Z$m,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=Z$p}Z$p(Z$a,"laya.d3.graphics.VertexShurikenParticleMesh");var Z$b=Z$a.prototype;Z$x.imps(Z$b,{"laya.d3.graphics.IVertex":!0}),Z$q(0,Z$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),Z$q(0,Z$b,"velocity",function(){return this._velocity}),Z$q(0,Z$b,"position",function(){return this._positionStartLifeTime}),Z$q(0,Z$b,"random0",function(){return this._randoms0}),Z$q(0,Z$b,"startSize",function(){return this._startSize}),Z$q(0,Z$b,"startColor",function(){return this._startColor}),Z$q(0,Z$b,"startRotation0",function(){return this._startRotation0}),Z$q(0,Z$b,"startRotation1",function(){return this._startRotation1}),Z$q(0,Z$b,"random1",function(){return this._randoms1}),Z$q(0,Z$b,"startRotation2",function(){return this._startRotation2}),Z$q(0,Z$b,"startLifeTime",function(){return this._startLifeTime}),Z$q(0,Z$b,"time",function(){return this._time}),Z$q(0,Z$b,"startSpeed",function(){return this._startSpeed}),Z$q(0,Z$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),Z$q(0,Z$b,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$q(1,Z$a,"vertexDeclaration",function(){return Z$a._vertexDeclaration}),Z$n(Z$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new Z$fa(172,[new Z$ia(0,"vector3",0),new Z$ia(12,"vector4",1),new Z$ia(28,"vector2",2),new Z$ia(36,"vector4",30),new Z$ia(52,"vector4",32),new Z$ia(68,"vector4",19),new Z$ia(84,"vector3",20),new Z$ia(96,"vector3",22),new Z$ia(108,"single",31),new Z$ia(112,"vector4",34),new Z$ia(128,"vector4",35),new Z$ia(144,"vector3",36),new Z$ia(156,"vector4",37)])}])}(),function(){function Z$v(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=Z$c,this._materials=Z$d,this._subMeshes=Z$e,this._materialMap=Z$f,this._version=Z$b,this._onLoaded(Z$a)}Z$p(Z$v,"laya.d3.loaders.LoadModelV01");var Z$a=Z$v.prototype;return Z$a._onLoaded=function(Z$a){this._readData=Z$a,this.READ_BLOCK();for(var Z$b=0;Z$b<this._BLOCK.count;Z$b++){var Z$c=this._readData.getUint16(),Z$d=this._strings[Z$c],Z$e=this["READ_"+Z$d];if(null==Z$e)throw new Error("model file err,no this function:"+Z$c+" "+Z$d);if(!Z$e.call(this))break}return this._mesh},Z$a.onError=function(){},Z$a._readString=function(){return this._strings[this._readData.getUint16()]},Z$a.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},Z$a.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},Z$a.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var Z$a=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var Z$b=0;Z$b<this._STRINGS.size;Z$b++)this._strings[Z$b]=this._readData.readUTFString();return this._readData.pos=Z$a,!0},Z$a.READ_MATERIAL=function(){var Z$a=this._readData.getUint16(),Z$b=(this._readString(),this._readString());return this._materials[Z$a]="null"!==Z$b?Z$t.getRes(this._materialMap[Z$b]):new Z$Eb,!0},Z$a.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var Z$a,Z$b=this._readData.__getBuffer(),Z$c=0,Z$d=this._readData.getUint32(),Z$e=this._readData.getUint32(),Z$f=(new Float32Array(Z$b.slice(Z$d+this._DATA.offset,Z$d+this._DATA.offset+Z$e)),this._readData.getUint32()),Z$i=this._readData.getUint32(),Z$j=new Float32Array(Z$b.slice(Z$f+this._DATA.offset,Z$f+this._DATA.offset+Z$i));for(this.mesh._inverseBindPoses=[],Z$c=0,Z$a=Z$j.length;Z$c<Z$a;Z$c+=16){var Z$k=new Z$ab(Z$j[Z$c+0],Z$j[Z$c+1],Z$j[Z$c+2],Z$j[Z$c+3],Z$j[Z$c+4],Z$j[Z$c+5],Z$j[Z$c+6],Z$j[Z$c+7],Z$j[Z$c+8],Z$j[Z$c+9],Z$j[Z$c+10],Z$j[Z$c+11],Z$j[Z$c+12],Z$j[Z$c+13],Z$j[Z$c+14],Z$j[Z$c+15]);this.mesh._inverseBindPoses.push(Z$k)}break;default:throw new Error("LoadModel:unknown version.")}return!0},Z$a.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var Z$a=this._readString();this._shaderAttributes=Z$a.match(Z$v._attrReg);var Z$b=this._readData.getUint32(),Z$c=this._readData.getUint32(),Z$d=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),Z$e=this._readData.getUint32(),Z$f=this._readData.getUint32(),Z$i=this._readData.getUint32(),Z$j=this._readData.__getBuffer(),Z$k=new Z$lb(this._mesh),Z$l=this._getVertexDeclaration(),Z$m=Z$Ob.create(Z$l,Z$e/Z$l.vertexStride,35044,!0),Z$n=Z$d+this._DATA.offset,Z$o=Z$j.slice(Z$n,Z$n+Z$e);Z$m.setData(new Float32Array(Z$o));for(var Z$p=(Z$k._vertexBuffer=Z$m).vertexDeclaration.getVertexElements(),Z$q=0;Z$q<Z$p.length;Z$q++)Z$k._bufferUsage[Z$p[Z$q].elementUsage]=Z$m;var Z$r=Z$Nb.create("ushort",Z$c/2,35044,!0),Z$s=Z$b+this._DATA.offset,Z$t=Z$j.slice(Z$s,Z$s+Z$c);Z$r.setData(new Uint16Array(Z$t)),Z$k._indexBuffer=Z$r;var Z$u=Z$j.slice(Z$f+this._DATA.offset,Z$f+this._DATA.offset+Z$i);return Z$k._boneIndicesList[0]=new Uint8Array(Z$u),this._subMeshes.push(Z$k),!0},Z$a.READ_DATAAREA=function(){return!1},Z$a._getVertexDeclaration=function(){for(var Z$a,Z$b=!1,Z$c=!1,Z$d=!1,Z$e=!1,Z$f=!1,Z$i=!1,Z$j=!1,Z$k=!1,Z$l=!1,Z$m=0;Z$m<this._shaderAttributes.length;Z$m+=8)switch(this._shaderAttributes[Z$m]){case"POSITION":Z$b=!0;break;case"NORMAL":Z$c=!0;break;case"COLOR":Z$d=!0;break;case"UV":Z$e=!0;break;case"UV1":Z$f=!0;break;case"BLENDWEIGHT":Z$j=!0;break;case"BLENDINDICES":Z$k=!0;break;case"TANGENT":Z$i=!0;break;case"BINORMAL":Z$l=!0}return Z$b&&Z$c&&Z$d&&Z$e&&Z$f&&Z$j&&Z$k&&Z$i?Z$a=Z$va.vertexDeclaration:Z$b&&Z$c&&Z$d&&Z$e&&Z$f&&Z$j&&Z$k?Z$a=Z$ta.vertexDeclaration:Z$b&&Z$c&&Z$e&&Z$f&&Z$j&&Z$k&&Z$i?Z$a=Z$Ja.vertexDeclaration:Z$b&&Z$c&&Z$e&&Z$f&&Z$j&&Z$k?Z$a=Z$Ha.vertexDeclaration:Z$b&&Z$c&&Z$d&&Z$e&&Z$j&&Z$k&&Z$i?Z$a=Z$Aa.vertexDeclaration:Z$b&&Z$c&&Z$d&&Z$e&&Z$j&&Z$k?Z$a=Z$ya.vertexDeclaration:Z$b&&Z$c&&Z$i&&Z$l&&Z$e&&Z$j&&Z$k?Z$a=Z$Ta.vertexDeclaration:Z$b&&Z$c&&Z$e&&Z$j&&Z$k&&Z$i?Z$a=Z$Oa.vertexDeclaration:Z$b&&Z$c&&Z$e&&Z$j&&Z$k?Z$a=Z$Ma.vertexDeclaration:Z$b&&Z$c&&Z$d&&Z$j&&Z$k&&Z$i?Z$a=Z$oa.vertexDeclaration:Z$b&&Z$c&&Z$d&&Z$j&&Z$k?Z$a=Z$ma.vertexDeclaration:Z$b&&Z$c&&Z$d&&Z$e&&Z$f&&Z$i?Z$a=Z$xa.vertexDeclaration:Z$b&&Z$c&&Z$d&&Z$e&&Z$f?Z$a=Z$sa.vertexDeclaration:Z$b&&Z$c&&Z$e&&Z$f&&Z$i?Z$a=Z$La.vertexDeclaration:Z$b&&Z$c&&Z$e&&Z$f?Z$a=Z$Ga.vertexDeclaration:Z$b&&Z$c&&Z$d&&Z$e&&Z$i?Z$a=Z$Ca.vertexDeclaration:Z$b&&Z$c&&Z$e&&Z$i&&Z$l?Z$a=Z$Ra.vertexDeclaration:Z$b&&Z$c&&Z$d&&Z$e?Z$a=Z$ra.vertexDeclaration:Z$b&&Z$c&&Z$e&&Z$i?Z$a=Z$Qa.vertexDeclaration:Z$b&&Z$c&&Z$e?Z$a=Z$Fa.vertexDeclaration:Z$b&&Z$c&&Z$d&&Z$i?Z$a=Z$qa.vertexDeclaration:Z$b&&Z$c&&Z$d&&(Z$a=Z$la.vertexDeclaration),Z$a},Z$q(0,Z$a,"mesh",function(){return this._mesh}),Z$v._attrReg=new RegExp("(\\w+)|([:,;])","g"),Z$v}()),Z$Wa=function(){function Z$z(){}return Z$p(Z$z,"laya.d3.loaders.LoadModelV02"),Z$z.parse=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){Z$z._mesh=Z$c,Z$z._materials=Z$d,Z$z._subMeshes=Z$e,Z$z._materialMap=Z$f,Z$z._version=Z$b,Z$z._readData=Z$a,Z$z.READ_DATA(),Z$z.READ_BLOCK(),Z$z.READ_STRINGS();for(var Z$i=0,Z$j=Z$z._BLOCK.count;Z$i<Z$j;Z$i++){Z$z._readData.pos=Z$z._BLOCK.blockStarts[Z$i];var Z$k=Z$z._readData.getUint16(),Z$l=Z$z._strings[Z$k],Z$m=Z$z["READ_"+Z$l];if(null==Z$m)throw new Error("model file err,no this function:"+Z$k+" "+Z$l);Z$m.call()}Z$z._strings.length=0,Z$z._readData=null,Z$z._version=null,Z$z._mesh=null,Z$z._materials=null,Z$z._subMeshes=null,Z$z._materialMap=null},Z$z._readString=function(){return Z$z._strings[Z$z._readData.getUint16()]},Z$z.READ_DATA=function(){Z$z._DATA.offset=Z$z._readData.getUint32(),Z$z._DATA.size=Z$z._readData.getUint32()},Z$z.READ_BLOCK=function(){for(var Z$a=Z$z._BLOCK.count=Z$z._readData.getUint16(),Z$b=Z$z._BLOCK.blockStarts=[],Z$c=Z$z._BLOCK.blockLengths=[],Z$d=0;Z$d<Z$a;Z$d++)Z$b.push(Z$z._readData.getUint32()),Z$c.push(Z$z._readData.getUint32())},Z$z.READ_STRINGS=function(){var Z$a=Z$z._readData.getUint32(),Z$b=Z$z._readData.getUint16(),Z$c=Z$z._readData.pos;Z$z._readData.pos=Z$a+Z$z._DATA.offset;for(var Z$d=0;Z$d<Z$b;Z$d++)Z$z._strings[Z$d]=Z$z._readData.readUTFString();Z$z._readData.pos=Z$c},Z$z.READ_MATERIAL=function(){Z$z._readString(),Z$z._readString();var Z$a=Z$z._readString();return""!==Z$a&&Z$z._materials.push(Z$t.getRes(Z$z._materialMap[Z$a])),!0},Z$z.READ_MESH=function(){Z$z._readString();var Z$a,Z$b=Z$z._readData.__getBuffer(),Z$c=0,Z$d=Z$z._readData.getInt16(),Z$e=Z$z._DATA.offset;for(Z$c=0;Z$c<Z$d;Z$c++){var Z$f=Z$e+Z$z._readData.getUint32(),Z$i=Z$z._readData.getUint32(),Z$j=new Float32Array(Z$b.slice(Z$f,Z$f+Z$i)),Z$k=Z$z._readString().match(Z$z._attrReg),Z$l=Z$z._getVertexDeclaration(Z$k),Z$m=Z$Ob.create(Z$l,4*Z$j.length/Z$l.vertexStride,35044,!0);Z$m.setData(Z$j),Z$z._mesh._vertexBuffers.push(Z$m)}var Z$n=Z$e+Z$z._readData.getUint32(),Z$o=Z$z._readData.getUint32(),Z$p=new Uint16Array(Z$b.slice(Z$n,Z$n+Z$o)),Z$q=Z$Nb.create("ushort",Z$o/2,35044,!0);Z$q.setData(Z$p),Z$z._mesh._indexBuffer=Z$q;var Z$r=Z$z._mesh._boneNames=[],Z$s=Z$z._readData.getUint16();for(Z$r.length=Z$s,Z$c=0;Z$c<Z$s;Z$c++)Z$r[Z$c]=Z$z._strings[Z$z._readData.getUint16()];var Z$t=Z$z._readData.getUint32(),Z$u=Z$z._readData.getUint32(),Z$v=(new Float32Array(Z$b.slice(Z$e+Z$t,Z$e+Z$t+Z$u)),Z$z._readData.getUint32()),Z$w=Z$z._readData.getUint32(),Z$x=new Float32Array(Z$b.slice(Z$e+Z$v,Z$e+Z$v+Z$w));for(Z$z._mesh._inverseBindPoses=[],Z$c=0,Z$a=Z$x.length;Z$c<Z$a;Z$c+=16){var Z$y=new Z$ab(Z$x[Z$c+0],Z$x[Z$c+1],Z$x[Z$c+2],Z$x[Z$c+3],Z$x[Z$c+4],Z$x[Z$c+5],Z$x[Z$c+6],Z$x[Z$c+7],Z$x[Z$c+8],Z$x[Z$c+9],Z$x[Z$c+10],Z$x[Z$c+11],Z$x[Z$c+12],Z$x[Z$c+13],Z$x[Z$c+14],Z$x[Z$c+15]);Z$z._mesh._inverseBindPoses.push(Z$y)}return Z$z._mesh._skinnedDatas=new Float32Array(16*Z$x.length),!0},Z$z.READ_SUBMESH=function(){var Z$a=Z$z._readData.__getBuffer(),Z$b=new Z$lb(Z$z._mesh),Z$c=Z$z._readData.getInt16(),Z$d=Z$z._readData.getUint32(),Z$e=Z$z._readData.getUint32();Z$b._vertexBuffer=Z$z._mesh._vertexBuffers[Z$c],Z$b._vertexStart=Z$d,Z$b._vertexCount=Z$e;var Z$f=Z$z._readData.getUint32(),Z$i=Z$z._readData.getUint32(),Z$j=Z$z._mesh._indexBuffer;Z$b._indexBuffer=Z$j,Z$b._indexStart=Z$f,Z$b._indexCount=Z$i,Z$b._indices=new Uint16Array(Z$j.getData().buffer,2*Z$f,Z$i);var Z$k=Z$z._DATA.offset,Z$l=Z$b._subIndexBufferStart,Z$m=Z$b._subIndexBufferCount,Z$n=Z$b._boneIndicesList,Z$o=Z$z._readData.getUint16();Z$l.length=Z$o,Z$m.length=Z$o,Z$n.length=Z$o;for(var Z$p=0;Z$p<Z$o;Z$p++){Z$l[Z$p]=Z$z._readData.getUint32(),Z$m[Z$p]=Z$z._readData.getUint32();var Z$q=Z$z._readData.getUint32(),Z$r=Z$z._readData.getUint32();Z$b._boneIndicesList[Z$p]=new Uint8Array(Z$a.slice(Z$k+Z$q,Z$k+Z$q+Z$r))}return Z$z._subMeshes.push(Z$b),!0},Z$z._getVertexDeclaration=function(Z$a){for(var Z$b,Z$c=!1,Z$d=!1,Z$e=!1,Z$f=!1,Z$i=!1,Z$j=!1,Z$k=!1,Z$l=!1,Z$m=!1,Z$n=0;Z$n<Z$a.length;Z$n++)switch(Z$a[Z$n]){case"POSITION":Z$c=!0;break;case"NORMAL":Z$d=!0;break;case"COLOR":Z$e=!0;break;case"UV":Z$f=!0;break;case"UV1":Z$i=!0;break;case"BLENDWEIGHT":Z$k=!0;break;case"BLENDINDICES":Z$l=!0;break;case"TANGENT":Z$j=!0;break;case"BINORMAL":Z$m=!0}return Z$c&&Z$d&&Z$e&&Z$f&&Z$i&&Z$k&&Z$l&&Z$j?Z$b=Z$va.vertexDeclaration:Z$c&&Z$d&&Z$e&&Z$f&&Z$i&&Z$k&&Z$l?Z$b=Z$ta.vertexDeclaration:Z$c&&Z$d&&Z$f&&Z$i&&Z$k&&Z$l&&Z$j?Z$b=Z$Ja.vertexDeclaration:Z$c&&Z$d&&Z$f&&Z$i&&Z$k&&Z$l?Z$b=Z$Ha.vertexDeclaration:Z$c&&Z$d&&Z$e&&Z$f&&Z$k&&Z$l&&Z$j?Z$b=Z$Aa.vertexDeclaration:Z$c&&Z$d&&Z$e&&Z$f&&Z$k&&Z$l?Z$b=Z$ya.vertexDeclaration:Z$c&&Z$d&&Z$f&&Z$k&&Z$l&&Z$j?Z$b=Z$Oa.vertexDeclaration:Z$c&&Z$d&&Z$f&&Z$k&&Z$l?Z$b=Z$Ma.vertexDeclaration:Z$c&&Z$d&&Z$e&&Z$k&&Z$l&&Z$j?Z$b=Z$oa.vertexDeclaration:Z$c&&Z$d&&Z$e&&Z$k&&Z$l?Z$b=Z$ma.vertexDeclaration:Z$c&&Z$d&&Z$e&&Z$f&&Z$i&&Z$j?Z$b=Z$xa.vertexDeclaration:Z$c&&Z$d&&Z$e&&Z$f&&Z$i?Z$b=Z$sa.vertexDeclaration:Z$c&&Z$d&&Z$f&&Z$i&&Z$j?Z$b=Z$La.vertexDeclaration:Z$c&&Z$d&&Z$f&&Z$i?Z$b=Z$Ga.vertexDeclaration:Z$c&&Z$d&&Z$e&&Z$f&&Z$j?Z$b=Z$Ca.vertexDeclaration:Z$c&&Z$d&&Z$f&&Z$j&&Z$m?Z$b=Z$Ra.vertexDeclaration:Z$c&&Z$d&&Z$e&&Z$f?Z$b=Z$ra.vertexDeclaration:Z$c&&Z$d&&Z$f&&Z$j?Z$b=Z$Qa.vertexDeclaration:Z$c&&Z$d&&Z$f?Z$b=Z$Fa.vertexDeclaration:Z$c&&Z$d&&Z$e&&Z$j?Z$b=Z$qa.vertexDeclaration:Z$c&&Z$d&&Z$e&&(Z$b=Z$la.vertexDeclaration),Z$b},Z$z._attrReg=new RegExp("(\\w+)|([:,;])","g"),Z$z._strings=[],Z$z._readData=null,Z$z._version=null,Z$z._mesh=null,Z$z._materials=null,Z$z._subMeshes=null,Z$z._materialMap=null,Z$n(Z$z,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),Z$z}(),Z$Xa=function(){function Z$y(){}return Z$p(Z$y,"laya.d3.loaders.LoadModelV03"),Z$y.parse=function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$y._mesh=Z$c,Z$y._subMeshes=Z$d,Z$y._materialMap=Z$e,Z$y._version=Z$b,Z$y._readData=Z$a,Z$y.READ_DATA(),Z$y.READ_BLOCK(),Z$y.READ_STRINGS();for(var Z$f=0,Z$i=Z$y._BLOCK.count;Z$f<Z$i;Z$f++){Z$y._readData.pos=Z$y._BLOCK.blockStarts[Z$f];var Z$j=Z$y._readData.getUint16(),Z$k=Z$y._strings[Z$j],Z$l=Z$y["READ_"+Z$k];if(null==Z$l)throw new Error("model file err,no this function:"+Z$j+" "+Z$k);Z$l.call()}Z$y._strings.length=0,Z$y._readData=null,Z$y._version=null,Z$y._mesh=null,Z$y._subMeshes=null,Z$y._materialMap=null},Z$y._readString=function(){return Z$y._strings[Z$y._readData.getUint16()]},Z$y.READ_DATA=function(){Z$y._DATA.offset=Z$y._readData.getUint32(),Z$y._DATA.size=Z$y._readData.getUint32()},Z$y.READ_BLOCK=function(){for(var Z$a=Z$y._BLOCK.count=Z$y._readData.getUint16(),Z$b=Z$y._BLOCK.blockStarts=[],Z$c=Z$y._BLOCK.blockLengths=[],Z$d=0;Z$d<Z$a;Z$d++)Z$b.push(Z$y._readData.getUint32()),Z$c.push(Z$y._readData.getUint32())},Z$y.READ_STRINGS=function(){var Z$a=Z$y._readData.getUint32(),Z$b=Z$y._readData.getUint16(),Z$c=Z$y._readData.pos;Z$y._readData.pos=Z$a+Z$y._DATA.offset;for(var Z$d=0;Z$d<Z$b;Z$d++)Z$y._strings[Z$d]=Z$y._readData.readUTFString();Z$y._readData.pos=Z$c},Z$y.READ_MESH=function(){var Z$a,Z$b=Z$y._readString(),Z$c=Z$y._readData.__getBuffer(),Z$d=0,Z$e=Z$y._readData.getInt16(),Z$f=Z$y._DATA.offset;for(Z$d=0;Z$d<Z$e;Z$d++){var Z$i,Z$j=Z$f+Z$y._readData.getUint32(),Z$k=Z$y._readData.getUint32(),Z$l=new Float32Array(Z$c.slice(Z$j,Z$j+Z$k)),Z$m=Z$y._readString();switch(Z$y._version){case"LAYAMODEL:03":Z$i=Z$y._vertexDeclarationMap_Discard[Z$m];break;case"LAYAMODEL:0301":Z$i=Z$y._vertexDeclarationMap[Z$m];break;default:throw new Error("LoadModelV03: unknown version.")}if(!Z$i)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+Z$y._version+"  bufferAttribute="+Z$m+"  name="+Z$b+"  url="+(Z$y._mesh?Z$y._mesh.url:"null"));var Z$n=Z$Ob.create(Z$i,4*Z$l.length/Z$i.vertexStride,35044,!0,Z$y._mesh._url+"_"+Z$d);Z$n.setData(Z$l),Z$y._mesh._vertexBuffers.push(Z$n)}var Z$o=Z$f+Z$y._readData.getUint32(),Z$p=Z$y._readData.getUint32(),Z$q=new Uint16Array(Z$c.slice(Z$o,Z$o+Z$p)),Z$r=Z$Nb.create("ushort",Z$p/2,35044,!0,Z$y._mesh._url);Z$r.setData(Z$q),Z$y._mesh._indexBuffer=Z$r;var Z$s=Z$y._mesh._boneNames=[],Z$t=Z$y._readData.getUint16();for(Z$s.length=Z$t,Z$d=0;Z$d<Z$t;Z$d++)Z$s[Z$d]=Z$y._strings[Z$y._readData.getUint16()];Z$y._readData.pos+=8;var Z$u=Z$y._readData.getUint32(),Z$v=Z$y._readData.getUint32(),Z$w=new Float32Array(Z$c.slice(Z$f+Z$u,Z$f+Z$u+Z$v));for(Z$y._mesh._inverseBindPoses=[],Z$d=0,Z$a=Z$w.length;Z$d<Z$a;Z$d+=16){var Z$x=new Z$ab(Z$w[Z$d+0],Z$w[Z$d+1],Z$w[Z$d+2],Z$w[Z$d+3],Z$w[Z$d+4],Z$w[Z$d+5],Z$w[Z$d+6],Z$w[Z$d+7],Z$w[Z$d+8],Z$w[Z$d+9],Z$w[Z$d+10],Z$w[Z$d+11],Z$w[Z$d+12],Z$w[Z$d+13],Z$w[Z$d+14],Z$w[Z$d+15]);Z$y._mesh._inverseBindPoses.push(Z$x)}return Z$y._mesh._skinnedDatas=new Float32Array(16*Z$w.length),!0},Z$y.READ_SUBMESH=function(){var Z$a=Z$y._readData.__getBuffer(),Z$b=new Z$lb(Z$y._mesh),Z$c=Z$y._readData.getInt16(),Z$d=Z$y._readData.getUint32(),Z$e=Z$y._readData.getUint32();Z$b._vertexBuffer=Z$y._mesh._vertexBuffers[Z$c],Z$b._vertexStart=Z$d,Z$b._vertexCount=Z$e;var Z$f=Z$y._readData.getUint32(),Z$i=Z$y._readData.getUint32(),Z$j=Z$y._mesh._indexBuffer;Z$b._indexBuffer=Z$j,Z$b._indexStart=Z$f,Z$b._indexCount=Z$i,Z$b._indices=new Uint16Array(Z$j.getData().buffer,2*Z$f,Z$i);var Z$k=Z$y._DATA.offset,Z$l=Z$b._subIndexBufferStart,Z$m=Z$b._subIndexBufferCount,Z$n=Z$b._boneIndicesList,Z$o=Z$y._readData.getUint16();Z$l.length=Z$o,Z$m.length=Z$o,Z$n.length=Z$o;for(var Z$p=0;Z$p<Z$o;Z$p++){Z$l[Z$p]=Z$y._readData.getUint32(),Z$m[Z$p]=Z$y._readData.getUint32();var Z$q=Z$y._readData.getUint32(),Z$r=Z$y._readData.getUint32();Z$n[Z$p]=new Uint8Array(Z$a.slice(Z$k+Z$q,Z$k+Z$q+Z$r))}return Z$y._subMeshes.push(Z$b),!0},Z$y._strings=[],Z$y._readData=null,Z$y._version=null,Z$y._mesh=null,Z$y._subMeshes=null,Z$y._materialMap=null,Z$n(Z$y,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":Z$va.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":Z$ta.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":Z$Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":Z$Ja.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":Z$Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":Z$Aa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":Z$ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":Z$Oa.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":Z$Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":Z$oa.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":Z$ma.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":Z$xa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":Z$sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":Z$La.vertexDeclaration,"POSITION,NORMAL,UV,UV1":Z$Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":Z$Ca.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":Z$Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":Z$ra.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":Z$Qa.vertexDeclaration,"POSITION,NORMAL,UV":Z$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":Z$qa.vertexDeclaration,"POSITION,NORMAL,COLOR":Z$la.vertexDeclaration,"POSITION,NORMAL,TANGENT":Z$Ea.vertexDeclaration,"POSITION,NORMAL":Z$ka.vertexDeclaration,"POSITION,UV":Z$Ua.vertexDeclaration,POSITION:Z$ja.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":Z$ua.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":Z$ta.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":Z$Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":Z$Ia.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":Z$Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":Z$za.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":Z$ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":Z$Na.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":Z$Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":Z$na.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":Z$ma.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":Z$wa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":Z$sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":Z$Ka.vertexDeclaration,"POSITION,NORMAL,UV,UV1":Z$Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":Z$Ba.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":Z$Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":Z$ra.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":Z$Pa.vertexDeclaration,"POSITION,NORMAL,UV":Z$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":Z$pa.vertexDeclaration,"POSITION,NORMAL,COLOR":Z$la.vertexDeclaration,"POSITION,NORMAL,TANGENT":Z$Da.vertexDeclaration,"POSITION,NORMAL":Z$ka.vertexDeclaration,"POSITION,UV":Z$Ua.vertexDeclaration,POSITION:Z$ja.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),Z$y}(),Z$Ya=function(){function Z$j(){}return Z$p(Z$j,"laya.d3.loaders.MeshReader"),Z$j.read=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=new Z$y(Z$a);Z$f.pos=0;var Z$i=Z$f.readUTFString();switch(Z$i){case"LAYAMODEL:01":case"LAYASKINANI:01":Z$j._readVersion01(Z$f,Z$i,Z$b,Z$c,Z$d,Z$e);break;case"LAYAMODEL:02":Z$Wa.parse(Z$f,Z$i,Z$b,Z$c,Z$d,Z$e);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":Z$Xa.parse(Z$f,Z$i,Z$b,Z$d,Z$e);break;default:throw new Error("MeshReader: unknown mesh version.")}Z$b._setSubMeshes(Z$d)},Z$j._readVersion01=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){new Z$Va(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f)},Z$j}(),Z$Za=function(){function Z$a(Z$a,Z$b){this.min=null,this.max=null,this.min=Z$a,this.max=Z$b}Z$p(Z$a,"laya.d3.math.BoundBox");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.getCorners=function(Z$a){Z$a.length=8;var Z$b=this.min.elements,Z$c=this.max.elements,Z$d=Z$b[0],Z$e=Z$b[1],Z$f=Z$b[2],Z$i=Z$c[0],Z$j=Z$c[1],Z$k=Z$c[2];Z$a[0]=new Z$ib(Z$d,Z$j,Z$k),Z$a[1]=new Z$ib(Z$i,Z$j,Z$k),Z$a[2]=new Z$ib(Z$i,Z$e,Z$k),Z$a[3]=new Z$ib(Z$d,Z$e,Z$k),Z$a[4]=new Z$ib(Z$d,Z$j,Z$f),Z$a[5]=new Z$ib(Z$i,Z$j,Z$f),Z$a[6]=new Z$ib(Z$i,Z$e,Z$f),Z$a[7]=new Z$ib(Z$d,Z$e,Z$f)},Z$b.toDefault=function(){this.min.toDefault(),this.max.toDefault()},Z$b.cloneTo=function(Z$a){var Z$b=Z$a;this.min.cloneTo(Z$b.min),this.max.cloneTo(Z$b.max)},Z$b.clone=function(){var Z$a=new this.constructor(new Z$ib,new Z$ib);return this.cloneTo(Z$a),Z$a},Z$a.createfromPoints=function(Z$a,Z$b){if(null==Z$a)throw new Error("points");var Z$c=Z$b.min,Z$d=Z$b.max,Z$e=Z$c.elements;Z$e[0]=Number.MAX_VALUE,Z$e[1]=Number.MAX_VALUE,Z$e[2]=Number.MAX_VALUE;var Z$f=Z$d.elements;Z$f[0]=-Number.MAX_VALUE,Z$f[1]=-Number.MAX_VALUE,Z$f[2]=-Number.MAX_VALUE;for(var Z$i=0,Z$j=Z$a.length;Z$i<Z$j;++Z$i)Z$ib.min(Z$c,Z$a[Z$i],Z$c),Z$ib.max(Z$d,Z$a[Z$i],Z$d)},Z$a.merge=function(Z$a,Z$b,Z$c){Z$ib.min(Z$a.min,Z$b.min,Z$c.min),Z$ib.max(Z$a.max,Z$b.max,Z$c.max)},Z$a}(),Z$$a=function(){function Z$l(Z$a){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=Z$a,this._near=new Z$bb(new Z$ib),this._far=new Z$bb(new Z$ib),this._left=new Z$bb(new Z$ib),this._right=new Z$bb(new Z$ib),this._top=new Z$bb(new Z$ib),this._bottom=new Z$bb(new Z$ib),Z$l._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}Z$p(Z$l,"laya.d3.math.BoundFrustum");var Z$a=Z$l.prototype;return Z$a.equalsBoundFrustum=function(Z$a){return this._matrix.equalsOtherMatrix(Z$a.matrix)},Z$a.equalsObj=function(Z$a){if(Z$a instanceof laya.d3.math.BoundFrustum){var Z$b=Z$a;return this.equalsBoundFrustum(Z$b)}return!1},Z$a.getPlane=function(Z$a){switch(Z$a){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},Z$a.getCorners=function(Z$a){Z$l._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(Z$a[0]),Z$l._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(Z$a[1]),Z$l._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(Z$a[2]),Z$l._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(Z$a[3]),Z$l._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(Z$a[4]),Z$l._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(Z$a[5]),Z$l._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(Z$a[6]),Z$l._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(Z$a[7])},Z$a.containsPoint=function(Z$a){for(var Z$b=Z$bb.PlaneIntersectionType_Front,Z$c=Z$bb.PlaneIntersectionType_Front,Z$d=0;Z$d<6;Z$d++){switch(Z$d){case 0:Z$c=Collision.intersectsPlaneAndPoint(this._near,Z$a);break;case 1:Z$c=Collision.intersectsPlaneAndPoint(this._far,Z$a);break;case 2:Z$c=Collision.intersectsPlaneAndPoint(this._left,Z$a);break;case 3:Z$c=Collision.intersectsPlaneAndPoint(this._right,Z$a);break;case 4:Z$c=Collision.intersectsPlaneAndPoint(this._top,Z$a);break;case 5:Z$c=Collision.intersectsPlaneAndPoint(this._bottom,Z$a)}switch(Z$c){case Z$bb.PlaneIntersectionType_Back:return 0;case Z$bb.PlaneIntersectionType_Intersecting:Z$b=Z$bb.PlaneIntersectionType_Intersecting}}switch(Z$b){case Z$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},Z$a.containsBoundBox=function(Z$a){for(var Z$b,Z$c=Z$l._tempV30,Z$d=Z$l._tempV31,Z$e=1,Z$f=0;Z$f<6;Z$f++){if(Z$b=this.getPlane(Z$f),this._getBoxToPlanePVertexNVertex(Z$a,Z$b.normal,Z$c,Z$d),Collision.intersectsPlaneAndPoint(Z$b,Z$c)===Z$bb.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(Z$b,Z$d)===Z$bb.PlaneIntersectionType_Back&&(Z$e=2)}return Z$e},Z$a.containsBoundSphere=function(Z$a){for(var Z$b=Z$bb.PlaneIntersectionType_Front,Z$c=Z$bb.PlaneIntersectionType_Front,Z$d=0;Z$d<6;Z$d++){switch(Z$d){case 0:Z$c=Collision.intersectsPlaneAndSphere(this._near,Z$a);break;case 1:Z$c=Collision.intersectsPlaneAndSphere(this._far,Z$a);break;case 2:Z$c=Collision.intersectsPlaneAndSphere(this._left,Z$a);break;case 3:Z$c=Collision.intersectsPlaneAndSphere(this._right,Z$a);break;case 4:Z$c=Collision.intersectsPlaneAndSphere(this._top,Z$a);break;case 5:Z$c=Collision.intersectsPlaneAndSphere(this._bottom,Z$a)}switch(Z$c){case Z$bb.PlaneIntersectionType_Back:return 0;case Z$bb.PlaneIntersectionType_Intersecting:Z$b=Z$bb.PlaneIntersectionType_Intersecting}}switch(Z$b){case Z$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},Z$a._getBoxToPlanePVertexNVertex=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.min,Z$f=Z$e.elements,Z$i=Z$a.max,Z$j=Z$i.elements,Z$k=Z$b.elements,Z$l=Z$k[0],Z$m=Z$k[1],Z$n=Z$k[2];Z$e.cloneTo(Z$c);var Z$o=Z$c.elements;0<=Z$l&&(Z$o[0]=Z$j[0]),0<=Z$m&&(Z$o[1]=Z$j[1]),0<=Z$n&&(Z$o[2]=Z$j[2]),Z$i.cloneTo(Z$d);var Z$p=Z$d.elements;0<=Z$l&&(Z$p[0]=Z$f[0]),0<=Z$m&&(Z$p[1]=Z$f[1]),0<=Z$n&&(Z$p[2]=Z$f[2])},Z$q(0,Z$a,"top",function(){return this._top}),Z$q(0,Z$a,"matrix",function(){return this._matrix},function(Z$a){this._matrix=Z$a,Z$l._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),Z$q(0,Z$a,"near",function(){return this._near}),Z$q(0,Z$a,"far",function(){return this._far}),Z$q(0,Z$a,"left",function(){return this._left}),Z$q(0,Z$a,"right",function(){return this._right}),Z$q(0,Z$a,"bottom",function(){return this._bottom}),Z$l._getPlanesFromMatrix=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){var Z$j=Z$a.elements,Z$k=Z$j[0],Z$l=Z$j[1],Z$m=Z$j[2],Z$n=Z$j[3],Z$o=Z$j[4],Z$p=Z$j[5],Z$q=Z$j[6],Z$r=Z$j[7],Z$s=Z$j[8],Z$t=Z$j[9],Z$u=Z$j[10],Z$v=Z$j[11],Z$w=Z$j[12],Z$x=Z$j[13],Z$y=Z$j[14],Z$z=Z$j[15],Z$A=Z$b.normal.elements;Z$A[0]=Z$n+Z$m,Z$A[1]=Z$r+Z$q,Z$A[2]=Z$v+Z$u,Z$b.distance=Z$z+Z$y,Z$b.normalize();var Z$B=Z$c.normal.elements;Z$B[0]=Z$n-Z$m,Z$B[1]=Z$r-Z$q,Z$B[2]=Z$v-Z$u,Z$c.distance=Z$z-Z$y,Z$c.normalize();var Z$C=Z$d.normal.elements;Z$C[0]=Z$n+Z$k,Z$C[1]=Z$r+Z$o,Z$C[2]=Z$v+Z$s,Z$d.distance=Z$z+Z$w,Z$d.normalize();var Z$D=Z$e.normal.elements;Z$D[0]=Z$n-Z$k,Z$D[1]=Z$r-Z$o,Z$D[2]=Z$v-Z$s,Z$e.distance=Z$z-Z$w,Z$e.normalize();var Z$E=Z$f.normal.elements;Z$E[0]=Z$n-Z$l,Z$E[1]=Z$r-Z$p,Z$E[2]=Z$v-Z$t,Z$f.distance=Z$z-Z$x,Z$f.normalize();var Z$F=Z$i.normal.elements;Z$F[0]=Z$n+Z$l,Z$F[1]=Z$r+Z$p,Z$F[2]=Z$v+Z$t,Z$i.distance=Z$z+Z$x,Z$i.normalize()},Z$l._get3PlaneInterPoint=function(Z$a,Z$b,Z$c){var Z$d=Z$a.normal,Z$e=Z$b.normal,Z$f=Z$c.normal;Z$ib.cross(Z$e,Z$f,Z$l._tempV30),Z$ib.cross(Z$f,Z$d,Z$l._tempV31),Z$ib.cross(Z$d,Z$e,Z$l._tempV32);var Z$i=Z$ib.dot(Z$d,Z$l._tempV30),Z$j=Z$ib.dot(Z$e,Z$l._tempV31),Z$k=Z$ib.dot(Z$f,Z$l._tempV32);return Z$ib.scale(Z$l._tempV30,-Z$a.distance/Z$i,Z$l._tempV33),Z$ib.scale(Z$l._tempV31,-Z$b.distance/Z$j,Z$l._tempV34),Z$ib.scale(Z$l._tempV32,-Z$c.distance/Z$k,Z$l._tempV35),Z$ib.add(Z$l._tempV33,Z$l._tempV34,Z$l._tempV36),Z$ib.add(Z$l._tempV35,Z$l._tempV36,Z$l._tempV37),Z$l._tempV37},Z$n(Z$l,["_tempV30",function(){return this._tempV30=new Z$ib},"_tempV31",function(){return this._tempV31=new Z$ib},"_tempV32",function(){return this._tempV32=new Z$ib},"_tempV33",function(){return this._tempV33=new Z$ib},"_tempV34",function(){return this._tempV34=new Z$ib},"_tempV35",function(){return this._tempV35=new Z$ib},"_tempV36",function(){return this._tempV36=new Z$ib},"_tempV37",function(){return this._tempV37=new Z$ib}]),Z$l}(),Z$_a=function(){function Z$m(Z$a,Z$b){this.center=null,this.radius=NaN,this.center=Z$a,this.radius=Z$b}Z$p(Z$m,"laya.d3.math.BoundSphere");var Z$a=Z$m.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.toDefault=function(){this.center.toDefault(),this.radius=0},Z$a.intersectsRayDistance=function(Z$a){return Collision.intersectsRayAndSphereRD(Z$a,this)},Z$a.intersectsRayPoint=function(Z$a,Z$b){return Collision.intersectsRayAndSphereRP(Z$a,this,Z$b)},Z$a.cloneTo=function(Z$a){var Z$b=Z$a;this.center.cloneTo(Z$b.center),Z$b.radius=this.radius},Z$a.clone=function(){var Z$a=new this.constructor(new Z$ib,new Z$ib);return this.cloneTo(Z$a),Z$a},Z$m.createFromSubPoints=function(Z$a,Z$b,Z$c,Z$d){if(null==Z$a)throw new Error("points");if(Z$b<0||Z$b>=Z$a.length)throw new Error("start"+Z$b+"Must be in the range [0, "+(Z$a.length-1)+"]");if(Z$c<0||Z$b+Z$c>Z$a.length)throw new Error("count"+Z$c+"Must be in the range <= "+Z$a.length+"}");var Z$e=Z$b+Z$c,Z$f=Z$m._tempVector3;Z$f.elements[0]=0,Z$f.elements[1]=0,Z$f.elements[2]=0;for(var Z$i=Z$b;Z$i<Z$e;++Z$i)Z$ib.add(Z$a[Z$i],Z$f,Z$f);var Z$j=Z$d.center;Z$ib.scale(Z$f,1/Z$c,Z$j);var Z$k=0;for(Z$i=Z$b;Z$i<Z$e;++Z$i){var Z$l=Z$ib.distanceSquared(Z$j,Z$a[Z$i]);Z$k<Z$l&&(Z$k=Z$l)}Z$d.radius=Math.sqrt(Z$k)},Z$m.createfromPoints=function(Z$a,Z$b){if(null==Z$a)throw new Error("points");Z$m.createFromSubPoints(Z$a,0,Z$a.length,Z$b)},Z$n(Z$m,["_tempVector3",function(){return this._tempVector3=new Z$ib}]),Z$m}(),Z$ga=(function(){function Z$a(){}Z$p(Z$a,"laya.d3.math.ContainmentType"),Z$a.Disjoint=0,Z$a.Contains=1,Z$a.Intersects=2}(),function(){function Z$c(){}return Z$p(Z$c,"laya.d3.math.MathUtils3D"),Z$c.isZero=function(Z$a){return Math.abs(Z$a)<Z$c.zeroTolerance},Z$c.nearEqual=function(Z$a,Z$b){return!!Z$c.isZero(Z$a-Z$b)},Z$c.fastInvSqrt=function(Z$a){return Z$c.isZero(Z$a)?Z$a:1/Math.sqrt(Z$a)},Z$n(Z$c,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),Z$c}()),Z$ha=function(){function Z$k(){var Z$a=this.elements=new Float32Array(9);Z$a[0]=1,Z$a[1]=0,Z$a[2]=0,Z$a[3]=0,Z$a[4]=1,Z$a[5]=0,Z$a[6]=0,Z$a[7]=0,Z$a[8]=1}Z$p(Z$k,"laya.d3.math.Matrix3x3");var Z$a=Z$k.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.determinant=function(){var Z$a=this.elements,Z$b=Z$a[0],Z$c=Z$a[1],Z$d=Z$a[2],Z$e=Z$a[3],Z$f=Z$a[4],Z$i=Z$a[5],Z$j=Z$a[6],Z$k=Z$a[7],Z$l=Z$a[8];return Z$b*(Z$l*Z$f-Z$i*Z$k)+Z$c*(-Z$l*Z$e+Z$i*Z$j)+Z$d*(Z$k*Z$e-Z$f*Z$j)},Z$a.translate=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=this.elements,Z$e=Z$a.elements,Z$f=Z$d[0],Z$i=Z$d[1],Z$j=Z$d[2],Z$k=Z$d[3],Z$l=Z$d[4],Z$m=Z$d[5],Z$n=Z$d[6],Z$o=Z$d[7],Z$p=Z$d[8],Z$q=Z$e[0],Z$r=Z$e[1];Z$c[0]=Z$f,Z$c[1]=Z$i,Z$c[2]=Z$j,Z$c[3]=Z$k,Z$c[4]=Z$l,Z$c[5]=Z$m,Z$c[6]=Z$q*Z$f+Z$r*Z$k+Z$n,Z$c[7]=Z$q*Z$i+Z$r*Z$l+Z$o,Z$c[8]=Z$q*Z$j+Z$r*Z$m+Z$p},Z$a.rotate=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=this.elements,Z$e=Z$d[0],Z$f=Z$d[1],Z$i=Z$d[2],Z$j=Z$d[3],Z$k=Z$d[4],Z$l=Z$d[5],Z$m=Z$d[6],Z$n=Z$d[7],Z$o=Z$d[8],Z$p=Math.sin(Z$a),Z$q=Math.cos(Z$a);Z$c[0]=Z$q*Z$e+Z$p*Z$j,Z$c[1]=Z$q*Z$f+Z$p*Z$k,Z$c[2]=Z$q*Z$i+Z$p*Z$l,Z$c[3]=Z$q*Z$j-Z$p*Z$e,Z$c[4]=Z$q*Z$k-Z$p*Z$f,Z$c[5]=Z$q*Z$l-Z$p*Z$i,Z$c[6]=Z$m,Z$c[7]=Z$n,Z$c[8]=Z$o},Z$a.scale=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=this.elements,Z$e=Z$a.elements,Z$f=Z$e[0],Z$i=Z$e[1];Z$c[0]=Z$f*Z$d[0],Z$c[1]=Z$f*Z$d[1],Z$c[2]=Z$f*Z$d[2],Z$c[3]=Z$i*Z$d[3],Z$c[4]=Z$i*Z$d[4],Z$c[5]=Z$i*Z$d[5],Z$c[6]=Z$d[6],Z$c[7]=Z$d[7],Z$c[8]=Z$d[8]},Z$a.invert=function(Z$a){var Z$b=Z$a.elements,Z$c=this.elements,Z$d=Z$c[0],Z$e=Z$c[1],Z$f=Z$c[2],Z$i=Z$c[3],Z$j=Z$c[4],Z$k=Z$c[5],Z$l=Z$c[6],Z$m=Z$c[7],Z$n=Z$c[8],Z$o=Z$n*Z$j-Z$k*Z$m,Z$p=-Z$n*Z$i+Z$k*Z$l,Z$q=Z$m*Z$i-Z$j*Z$l,Z$r=Z$d*Z$o+Z$e*Z$p+Z$f*Z$q;Z$r||(Z$a=null),Z$r=1/Z$r,Z$b[0]=Z$o*Z$r,Z$b[1]=(-Z$n*Z$e+Z$f*Z$m)*Z$r,Z$b[2]=(Z$k*Z$e-Z$f*Z$j)*Z$r,Z$b[3]=Z$p*Z$r,Z$b[4]=(Z$n*Z$d-Z$f*Z$l)*Z$r,Z$b[5]=(-Z$k*Z$d+Z$f*Z$i)*Z$r,Z$b[6]=Z$q*Z$r,Z$b[7]=(-Z$m*Z$d+Z$e*Z$l)*Z$r,Z$b[8]=(Z$j*Z$d-Z$e*Z$i)*Z$r},Z$a.transpose=function(Z$a){var Z$b=Z$a.elements,Z$c=this.elements;if(Z$a===this){var Z$d=Z$c[1],Z$e=Z$c[2],Z$f=Z$c[5];Z$b[1]=Z$c[3],Z$b[2]=Z$c[6],Z$b[3]=Z$d,Z$b[5]=Z$c[7],Z$b[6]=Z$e,Z$b[7]=Z$f}else Z$b[0]=Z$c[0],Z$b[1]=Z$c[3],Z$b[2]=Z$c[6],Z$b[3]=Z$c[1],Z$b[4]=Z$c[4],Z$b[5]=Z$c[7],Z$b[6]=Z$c[2],Z$b[7]=Z$c[5],Z$b[8]=Z$c[8]},Z$a.identity=function(){var Z$a=this.elements;Z$a[0]=1,Z$a[1]=0,Z$a[2]=0,Z$a[3]=0,Z$a[4]=1,Z$a[5]=0,Z$a[6]=0,Z$a[7]=0,Z$a[8]=1},Z$a.cloneTo=function(Z$a){var Z$b,Z$c,Z$d;if((Z$c=this.elements)!==(Z$d=Z$a.elements))for(Z$b=0;Z$b<9;++Z$b)Z$d[Z$b]=Z$c[Z$b]},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$k.createFromTranslation=function(Z$a,Z$b){Z$b.elements;var Z$c=Z$a.elements;Z$b[0]=1,Z$b[1]=0,Z$b[2]=0,Z$b[3]=0,Z$b[4]=1,Z$b[5]=0,Z$b[6]=Z$c[0],Z$b[7]=Z$c[1],Z$b[8]=1},Z$k.createFromRotation=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=Math.sin(Z$a),Z$e=Math.cos(Z$a);Z$c[0]=Z$e,Z$c[1]=Z$d,Z$c[2]=0,Z$c[3]=-Z$d,Z$c[4]=Z$e,Z$c[5]=0,Z$c[6]=0,Z$c[7]=0,Z$c[8]=1},Z$k.createFromScaling=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=Z$a.elements;Z$c[0]=Z$d[0],Z$c[1]=0,Z$c[2]=0,Z$c[3]=0,Z$c[4]=Z$d[1],Z$c[5]=0,Z$c[6]=0,Z$c[7]=0,Z$c[8]=1},Z$k.createFromMatrix4x4=function(Z$a,Z$b){Z$b[0]=Z$a[0],Z$b[1]=Z$a[1],Z$b[2]=Z$a[2],Z$b[3]=Z$a[4],Z$b[4]=Z$a[5],Z$b[5]=Z$a[6],Z$b[6]=Z$a[8],Z$b[7]=Z$a[9],Z$b[8]=Z$a[10]},Z$k.multiply=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements,Z$i=Z$e[0],Z$j=Z$e[1],Z$k=Z$e[2],Z$l=Z$e[3],Z$m=Z$e[4],Z$n=Z$e[5],Z$o=Z$e[6],Z$p=Z$e[7],Z$q=Z$e[8],Z$r=Z$f[0],Z$s=Z$f[1],Z$t=Z$f[2],Z$u=Z$f[3],Z$v=Z$f[4],Z$w=Z$f[5],Z$x=Z$f[6],Z$y=Z$f[7],Z$z=Z$f[8];Z$d[0]=Z$r*Z$i+Z$s*Z$l+Z$t*Z$o,Z$d[1]=Z$r*Z$j+Z$s*Z$m+Z$t*Z$p,Z$d[2]=Z$r*Z$k+Z$s*Z$n+Z$t*Z$q,Z$d[3]=Z$u*Z$i+Z$v*Z$l+Z$w*Z$o,Z$d[4]=Z$u*Z$j+Z$v*Z$m+Z$w*Z$p,Z$d[5]=Z$u*Z$k+Z$v*Z$n+Z$w*Z$q,Z$d[6]=Z$x*Z$i+Z$y*Z$l+Z$z*Z$o,Z$d[7]=Z$x*Z$j+Z$y*Z$m+Z$z*Z$p,Z$d[8]=Z$x*Z$k+Z$y*Z$n+Z$z*Z$q},Z$k.lookAt=function(Z$a,Z$b,Z$c,Z$d){Z$ib.subtract(Z$a,Z$b,Z$k._tempV30),Z$ib.normalize(Z$k._tempV30,Z$k._tempV30),Z$ib.cross(Z$c,Z$k._tempV30,Z$k._tempV31),Z$ib.normalize(Z$k._tempV31,Z$k._tempV31),Z$ib.cross(Z$k._tempV30,Z$k._tempV31,Z$k._tempV32);var Z$e=Z$k._tempV30.elements,Z$f=Z$k._tempV31.elements,Z$i=Z$k._tempV32.elements,Z$j=Z$d.elements;Z$j[0]=Z$f[0],Z$j[3]=Z$f[1],Z$j[6]=Z$f[2],Z$j[1]=Z$i[0],Z$j[4]=Z$i[1],Z$j[7]=Z$i[2],Z$j[2]=Z$e[0],Z$j[5]=Z$e[1],Z$j[8]=Z$e[2]},Z$k.DEFAULT=new Z$k,Z$n(Z$k,["_tempV30",function(){return this._tempV30=new Z$ib},"_tempV31",function(){return this._tempV31=new Z$ib},"_tempV32",function(){return this._tempV32=new Z$ib}]),Z$k}(),Z$ab=function(){function Z$B(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$n,Z$o,Z$p,Z$q,Z$r){void 0===Z$a&&(Z$a=1),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0),void 0===Z$f&&(Z$f=1),void 0===Z$i&&(Z$i=0),void 0===Z$j&&(Z$j=0),void 0===Z$k&&(Z$k=0),void 0===Z$l&&(Z$l=0),void 0===Z$m&&(Z$m=1),void 0===Z$n&&(Z$n=0),void 0===Z$o&&(Z$o=0),void 0===Z$p&&(Z$p=0),void 0===Z$q&&(Z$q=0),void 0===Z$r&&(Z$r=1);var Z$s=this.elements=new Float32Array(16);Z$s[0]=Z$a,Z$s[1]=Z$b,Z$s[2]=Z$c,Z$s[3]=Z$d,Z$s[4]=Z$e,Z$s[5]=Z$f,Z$s[6]=Z$i,Z$s[7]=Z$j,Z$s[8]=Z$k,Z$s[9]=Z$l,Z$s[10]=Z$m,Z$s[11]=Z$n,Z$s[12]=Z$o,Z$s[13]=Z$p,Z$s[14]=Z$q,Z$s[15]=Z$r}Z$p(Z$B,"laya.d3.math.Matrix4x4");var Z$a=Z$B.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.getElementByRowColumn=function(Z$a,Z$b){if(Z$a<0||3<Z$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(Z$b<0||3<Z$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*Z$a+Z$b]},Z$a.setElementByRowColumn=function(Z$a,Z$b,Z$c){if(Z$a<0||3<Z$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(Z$b<0||3<Z$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*Z$a+Z$b]=Z$c},Z$a.equalsOtherMatrix=function(Z$a){var Z$b=this.elements,Z$c=Z$a.elements;return Z$ga.nearEqual(Z$b[0],Z$c[0])&&Z$ga.nearEqual(Z$b[1],Z$c[1])&&Z$ga.nearEqual(Z$b[2],Z$c[2])&&Z$ga.nearEqual(Z$b[3],Z$c[3])&&Z$ga.nearEqual(Z$b[4],Z$c[4])&&Z$ga.nearEqual(Z$b[5],Z$c[5])&&Z$ga.nearEqual(Z$b[6],Z$c[6])&&Z$ga.nearEqual(Z$b[7],Z$c[7])&&Z$ga.nearEqual(Z$b[8],Z$c[8])&&Z$ga.nearEqual(Z$b[9],Z$c[9])&&Z$ga.nearEqual(Z$b[10],Z$c[10])&&Z$ga.nearEqual(Z$b[11],Z$c[11])&&Z$ga.nearEqual(Z$b[12],Z$c[12])&&Z$ga.nearEqual(Z$b[13],Z$c[13])&&Z$ga.nearEqual(Z$b[14],Z$c[14])&&Z$ga.nearEqual(Z$b[15],Z$c[15])},Z$a.decomposeTransRotScale=function(Z$a,Z$b,Z$c){var Z$d=Z$B._tempMatrix4x4;return this.decomposeTransRotMatScale(Z$a,Z$d,Z$c)?(Z$cb.createFromMatrix4x4(Z$d,Z$b),!0):(Z$b.identity(),!1)},Z$a.decomposeTransRotMatScale=function(Z$a,Z$b,Z$c){var Z$d=this.elements,Z$e=Z$a.elements,Z$f=Z$b.elements,Z$i=Z$c.elements;Z$e[0]=Z$d[12],Z$e[1]=Z$d[13],Z$e[2]=Z$d[14];var Z$j=Z$d[0],Z$k=Z$d[1],Z$l=Z$d[2],Z$m=Z$d[4],Z$n=Z$d[5],Z$o=Z$d[6],Z$p=Z$d[8],Z$q=Z$d[9],Z$r=Z$d[10],Z$s=Z$i[0]=Math.sqrt(Z$j*Z$j+Z$k*Z$k+Z$l*Z$l),Z$t=Z$i[1]=Math.sqrt(Z$m*Z$m+Z$n*Z$n+Z$o*Z$o),Z$u=Z$i[2]=Math.sqrt(Z$p*Z$p+Z$q*Z$q+Z$r*Z$r);if(Z$ga.isZero(Z$s)||Z$ga.isZero(Z$t)||Z$ga.isZero(Z$u))return Z$f[1]=Z$f[2]=Z$f[3]=Z$f[4]=Z$f[6]=Z$f[7]=Z$f[8]=Z$f[9]=Z$f[11]=Z$f[12]=Z$f[13]=Z$f[14]=0,Z$f[0]=Z$f[5]=Z$f[10]=Z$f[15]=1,!1;var Z$v=Z$B._tempVector0,Z$w=Z$v.elements;Z$w[0]=Z$p/Z$u,Z$w[1]=Z$q/Z$u,Z$w[2]=Z$r/Z$u;var Z$x=Z$B._tempVector1,Z$y=Z$x.elements;Z$y[0]=Z$j/Z$s,Z$y[1]=Z$k/Z$s,Z$y[2]=Z$l/Z$s;var Z$z=Z$B._tempVector2;Z$ib.cross(Z$v,Z$x,Z$z);var Z$A=Z$B._tempVector1;return Z$ib.cross(Z$z,Z$v,Z$A),Z$f[3]=Z$f[7]=Z$f[11]=Z$f[12]=Z$f[13]=Z$f[14]=0,Z$f[15]=1,Z$f[0]=Z$A.x,Z$f[1]=Z$A.y,Z$f[2]=Z$A.z,Z$f[4]=Z$z.x,Z$f[5]=Z$z.y,Z$f[6]=Z$z.z,Z$f[8]=Z$v.x,Z$f[9]=Z$v.y,Z$f[10]=Z$v.z,Z$f[0]*Z$j+Z$f[1]*Z$k+Z$f[2]*Z$l<0&&(Z$i[0]=-Z$s),Z$f[4]*Z$m+Z$f[5]*Z$n+Z$f[6]*Z$o<0&&(Z$i[1]=-Z$t),Z$f[8]*Z$p+Z$f[9]*Z$q+Z$f[10]*Z$r<0&&(Z$i[2]=-Z$u),!0},Z$a.decomposeYawPitchRoll=function(Z$a){var Z$b=Z$a.elements,Z$c=Math.asin(-this.elements[9]);Z$b[1]=Z$c,Math.cos(Z$c)>Z$ga.zeroTolerance?(Z$b[2]=Math.atan2(this.elements[1],this.elements[5]),Z$b[0]=Math.atan2(this.elements[8],this.elements[10])):(Z$b[2]=Math.atan2(-this.elements[4],this.elements[0]),Z$b[0]=0)},Z$a.normalize=function(){var Z$a=this.elements,Z$b=Z$a[0],Z$c=Z$a[1],Z$d=Z$a[2],Z$e=Math.sqrt(Z$b*Z$b+Z$c*Z$c+Z$d*Z$d);if(!Z$e)return Z$a[0]=0,Z$a[1]=0,void(Z$a[2]=0);1!=Z$e&&(Z$e=1/Z$e,Z$a[0]=Z$b*Z$e,Z$a[1]=Z$c*Z$e,Z$a[2]=Z$d*Z$e)},Z$a.transpose=function(){var Z$a,Z$b;return Z$b=(Z$a=this.elements)[1],Z$a[1]=Z$a[4],Z$a[4]=Z$b,Z$b=Z$a[2],Z$a[2]=Z$a[8],Z$a[8]=Z$b,Z$b=Z$a[3],Z$a[3]=Z$a[12],Z$a[12]=Z$b,Z$b=Z$a[6],Z$a[6]=Z$a[9],Z$a[9]=Z$b,Z$b=Z$a[7],Z$a[7]=Z$a[13],Z$a[13]=Z$b,Z$b=Z$a[11],Z$a[11]=Z$a[14],Z$a[14]=Z$b,this},Z$a.invert=function(Z$a){var Z$b=this.elements,Z$c=Z$a.elements,Z$d=Z$b[0],Z$e=Z$b[1],Z$f=Z$b[2],Z$i=Z$b[3],Z$j=Z$b[4],Z$k=Z$b[5],Z$l=Z$b[6],Z$m=Z$b[7],Z$n=Z$b[8],Z$o=Z$b[9],Z$p=Z$b[10],Z$q=Z$b[11],Z$r=Z$b[12],Z$s=Z$b[13],Z$t=Z$b[14],Z$u=Z$b[15],Z$v=Z$d*Z$k-Z$e*Z$j,Z$w=Z$d*Z$l-Z$f*Z$j,Z$x=Z$d*Z$m-Z$i*Z$j,Z$y=Z$e*Z$l-Z$f*Z$k,Z$z=Z$e*Z$m-Z$i*Z$k,Z$A=Z$f*Z$m-Z$i*Z$l,Z$B=Z$n*Z$s-Z$o*Z$r,Z$C=Z$n*Z$t-Z$p*Z$r,Z$D=Z$n*Z$u-Z$q*Z$r,Z$E=Z$o*Z$t-Z$p*Z$s,Z$F=Z$o*Z$u-Z$q*Z$s,Z$G=Z$p*Z$u-Z$q*Z$t,Z$H=Z$v*Z$G-Z$w*Z$F+Z$x*Z$E+Z$y*Z$D-Z$z*Z$C+Z$A*Z$B;0!==Math.abs(Z$H)&&(Z$H=1/Z$H,Z$c[0]=(Z$k*Z$G-Z$l*Z$F+Z$m*Z$E)*Z$H,Z$c[1]=(Z$f*Z$F-Z$e*Z$G-Z$i*Z$E)*Z$H,Z$c[2]=(Z$s*Z$A-Z$t*Z$z+Z$u*Z$y)*Z$H,Z$c[3]=(Z$p*Z$z-Z$o*Z$A-Z$q*Z$y)*Z$H,Z$c[4]=(Z$l*Z$D-Z$j*Z$G-Z$m*Z$C)*Z$H,Z$c[5]=(Z$d*Z$G-Z$f*Z$D+Z$i*Z$C)*Z$H,Z$c[6]=(Z$t*Z$x-Z$r*Z$A-Z$u*Z$w)*Z$H,Z$c[7]=(Z$n*Z$A-Z$p*Z$x+Z$q*Z$w)*Z$H,Z$c[8]=(Z$j*Z$F-Z$k*Z$D+Z$m*Z$B)*Z$H,Z$c[9]=(Z$e*Z$D-Z$d*Z$F-Z$i*Z$B)*Z$H,Z$c[10]=(Z$r*Z$z-Z$s*Z$x+Z$u*Z$v)*Z$H,Z$c[11]=(Z$o*Z$x-Z$n*Z$z-Z$q*Z$v)*Z$H,Z$c[12]=(Z$k*Z$C-Z$j*Z$E-Z$l*Z$B)*Z$H,Z$c[13]=(Z$d*Z$E-Z$e*Z$C+Z$f*Z$B)*Z$H,Z$c[14]=(Z$s*Z$w-Z$r*Z$y-Z$t*Z$v)*Z$H,Z$c[15]=(Z$n*Z$y-Z$o*Z$w+Z$p*Z$v)*Z$H)},Z$a.identity=function(){var Z$a=this.elements;Z$a[1]=Z$a[2]=Z$a[3]=Z$a[4]=Z$a[6]=Z$a[7]=Z$a[8]=Z$a[9]=Z$a[11]=Z$a[12]=Z$a[13]=Z$a[14]=0,Z$a[0]=Z$a[5]=Z$a[10]=Z$a[15]=1},Z$a.cloneTo=function(Z$a){var Z$b,Z$c,Z$d;if((Z$c=this.elements)!==(Z$d=Z$a.elements))for(Z$b=0;Z$b<16;++Z$b)Z$d[Z$b]=Z$c[Z$b]},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$a.getTranslationVector=function(Z$a){var Z$b=this.elements,Z$c=Z$a.elements;Z$c[0]=Z$b[12],Z$c[1]=Z$b[13],Z$c[2]=Z$b[14]},Z$a.setTranslationVector=function(Z$a){var Z$b=this.elements,Z$c=Z$a.elements;Z$b[12]=Z$c[0],Z$b[13]=Z$c[1],Z$b[14]=Z$c[2]},Z$a.getForward=function(Z$a){var Z$b=this.elements,Z$c=Z$a.elements;Z$c[0]=-Z$b[8],Z$c[1]=-Z$b[9],Z$c[2]=-Z$b[10]},Z$a.setForward=function(Z$a){var Z$b=this.elements,Z$c=Z$a.elements;Z$b[8]=-Z$c[0],Z$b[9]=-Z$c[1],Z$b[10]=-Z$c[2]},Z$B.createRotationX=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=Math.sin(Z$a),Z$e=Math.cos(Z$a);Z$c[1]=Z$c[2]=Z$c[3]=Z$c[4]=Z$c[7]=Z$c[8]=Z$c[11]=Z$c[12]=Z$c[13]=Z$c[14]=0,Z$c[0]=Z$c[15]=1,Z$c[5]=Z$c[10]=Z$e,Z$c[6]=Z$d,Z$c[9]=-Z$d},Z$B.createRotationY=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=Math.sin(Z$a),Z$e=Math.cos(Z$a);Z$c[1]=Z$c[3]=Z$c[4]=Z$c[6]=Z$c[7]=Z$c[9]=Z$c[11]=Z$c[12]=Z$c[13]=Z$c[14]=0,Z$c[5]=Z$c[15]=1,Z$c[0]=Z$c[10]=Z$e,Z$c[2]=-Z$d,Z$c[8]=Z$d},Z$B.createRotationZ=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=Math.sin(Z$a),Z$e=Math.cos(Z$a);Z$c[2]=Z$c[3]=Z$c[6]=Z$c[7]=Z$c[8]=Z$c[9]=Z$c[11]=Z$c[12]=Z$c[13]=Z$c[14]=0,Z$c[10]=Z$c[15]=1,Z$c[0]=Z$c[5]=Z$e,Z$c[1]=Z$d,Z$c[4]=-Z$d},Z$B.createRotationYawPitchRoll=function(Z$a,Z$b,Z$c,Z$d){Z$cb.createFromYawPitchRoll(Z$a,Z$b,Z$c,Z$B._tempQuaternion),Z$B.createRotationQuaternion(Z$B._tempQuaternion,Z$d)},Z$B.createRotationAxis=function(Z$a,Z$b,Z$c){var Z$d=Z$a.elements,Z$e=Z$d[0],Z$f=Z$d[1],Z$i=Z$d[2],Z$j=Math.cos(Z$b),Z$k=Math.sin(Z$b),Z$l=Z$e*Z$e,Z$m=Z$f*Z$f,Z$n=Z$i*Z$i,Z$o=Z$e*Z$f,Z$p=Z$e*Z$i,Z$q=Z$f*Z$i,Z$r=Z$c.elements;Z$r[3]=Z$r[7]=Z$r[11]=Z$r[12]=Z$r[13]=Z$r[14]=0,Z$r[15]=1,Z$r[0]=Z$l+Z$j*(1-Z$l),Z$r[1]=Z$o-Z$j*Z$o+Z$k*Z$i,Z$r[2]=Z$p-Z$j*Z$p-Z$k*Z$f,Z$r[4]=Z$o-Z$j*Z$o-Z$k*Z$i,Z$r[5]=Z$m+Z$j*(1-Z$m),Z$r[6]=Z$q-Z$j*Z$q+Z$k*Z$e,Z$r[8]=Z$p-Z$j*Z$p+Z$k*Z$f,Z$r[9]=Z$q-Z$j*Z$q-Z$k*Z$e,Z$r[10]=Z$n+Z$j*(1-Z$n)},Z$B.createRotationQuaternion=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements,Z$e=Z$c[0],Z$f=Z$c[1],Z$i=Z$c[2],Z$j=Z$c[3],Z$k=Z$e*Z$e,Z$l=Z$f*Z$f,Z$m=Z$i*Z$i,Z$n=Z$e*Z$f,Z$o=Z$i*Z$j,Z$p=Z$i*Z$e,Z$q=Z$f*Z$j,Z$r=Z$f*Z$i,Z$s=Z$e*Z$j;Z$d[3]=Z$d[7]=Z$d[11]=Z$d[12]=Z$d[13]=Z$d[14]=0,Z$d[15]=1,Z$d[0]=1-2*(Z$l+Z$m),Z$d[1]=2*(Z$n+Z$o),Z$d[2]=2*(Z$p-Z$q),Z$d[4]=2*(Z$n-Z$o),Z$d[5]=1-2*(Z$m+Z$k),Z$d[6]=2*(Z$r+Z$s),Z$d[8]=2*(Z$p+Z$q),Z$d[9]=2*(Z$r-Z$s),Z$d[10]=1-2*(Z$l+Z$k)},Z$B.createTranslate=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements;Z$d[4]=Z$d[8]=Z$d[1]=Z$d[9]=Z$d[2]=Z$d[6]=Z$d[3]=Z$d[7]=Z$d[11]=0,Z$d[0]=Z$d[5]=Z$d[10]=Z$d[15]=1,Z$d[12]=Z$c[0],Z$d[13]=Z$c[1],Z$d[14]=Z$c[2]},Z$B.createScaling=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements;Z$d[0]=Z$c[0],Z$d[5]=Z$c[1],Z$d[10]=Z$c[2],Z$d[1]=Z$d[4]=Z$d[8]=Z$d[12]=Z$d[9]=Z$d[13]=Z$d[2]=Z$d[6]=Z$d[14]=Z$d[3]=Z$d[7]=Z$d[11]=0,Z$d[15]=1},Z$B.multiply=function(Z$a,Z$b,Z$c){var Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m;for(Z$e=Z$c.elements,Z$f=Z$a.elements,Z$e===(Z$i=Z$b.elements)&&(Z$i=Z$i.slice()),Z$d=0;Z$d<4;Z$d++)Z$j=Z$f[Z$d],Z$k=Z$f[Z$d+4],Z$l=Z$f[Z$d+8],Z$m=Z$f[Z$d+12],Z$e[Z$d]=Z$j*Z$i[0]+Z$k*Z$i[1]+Z$l*Z$i[2]+Z$m*Z$i[3],Z$e[Z$d+4]=Z$j*Z$i[4]+Z$k*Z$i[5]+Z$l*Z$i[6]+Z$m*Z$i[7],Z$e[Z$d+8]=Z$j*Z$i[8]+Z$k*Z$i[9]+Z$l*Z$i[10]+Z$m*Z$i[11],Z$e[Z$d+12]=Z$j*Z$i[12]+Z$k*Z$i[13]+Z$l*Z$i[14]+Z$m*Z$i[15]},Z$B.createFromQuaternion=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=Z$a.elements,Z$e=Z$d[0],Z$f=Z$d[1],Z$i=Z$d[2],Z$j=Z$d[3],Z$k=Z$e+Z$e,Z$l=Z$f+Z$f,Z$m=Z$i+Z$i,Z$n=Z$e*Z$k,Z$o=Z$f*Z$k,Z$p=Z$f*Z$l,Z$q=Z$i*Z$k,Z$r=Z$i*Z$l,Z$s=Z$i*Z$m,Z$t=Z$j*Z$k,Z$u=Z$j*Z$l,Z$v=Z$j*Z$m;Z$c[0]=1-Z$p-Z$s,Z$c[1]=Z$o+Z$v,Z$c[2]=Z$q-Z$u,Z$c[3]=0,Z$c[4]=Z$o-Z$v,Z$c[5]=1-Z$n-Z$s,Z$c[6]=Z$r+Z$t,Z$c[7]=0,Z$c[8]=Z$q+Z$u,Z$c[9]=Z$r-Z$t,Z$c[10]=1-Z$n-Z$p,Z$c[11]=0,Z$c[12]=0,Z$c[13]=0,Z$c[14]=0,Z$c[15]=1},Z$B.createAffineTransformation=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.elements,Z$f=Z$b.elements,Z$i=Z$c.elements,Z$j=Z$d.elements,Z$k=Z$f[0],Z$l=Z$f[1],Z$m=Z$f[2],Z$n=Z$f[3],Z$o=Z$k+Z$k,Z$p=Z$l+Z$l,Z$q=Z$m+Z$m,Z$r=Z$k*Z$o,Z$s=Z$k*Z$p,Z$t=Z$k*Z$q,Z$u=Z$l*Z$p,Z$v=Z$l*Z$q,Z$w=Z$m*Z$q,Z$x=Z$n*Z$o,Z$y=Z$n*Z$p,Z$z=Z$n*Z$q,Z$A=Z$i[0],Z$B=Z$i[1],Z$C=Z$i[2];Z$j[0]=(1-(Z$u+Z$w))*Z$A,Z$j[1]=(Z$s+Z$z)*Z$A,Z$j[2]=(Z$t-Z$y)*Z$A,Z$j[3]=0,Z$j[4]=(Z$s-Z$z)*Z$B,Z$j[5]=(1-(Z$r+Z$w))*Z$B,Z$j[6]=(Z$v+Z$x)*Z$B,Z$j[7]=0,Z$j[8]=(Z$t+Z$y)*Z$C,Z$j[9]=(Z$v-Z$x)*Z$C,Z$j[10]=(1-(Z$r+Z$u))*Z$C,Z$j[11]=0,Z$j[12]=Z$e[0],Z$j[13]=Z$e[1],Z$j[14]=Z$e[2],Z$j[15]=1},Z$B.createLookAt=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$d.elements,Z$f=Z$B._tempVector0,Z$i=Z$B._tempVector1,Z$j=Z$B._tempVector2;Z$ib.subtract(Z$a,Z$b,Z$j),Z$ib.normalize(Z$j,Z$j),Z$ib.cross(Z$c,Z$j,Z$f),Z$ib.normalize(Z$f,Z$f),Z$ib.cross(Z$j,Z$f,Z$i),Z$d.identity(),Z$e[0]=Z$f.x,Z$e[4]=Z$f.y,Z$e[8]=Z$f.z,Z$e[1]=Z$i.x,Z$e[5]=Z$i.y,Z$e[9]=Z$i.z,Z$e[2]=Z$j.x,Z$e[6]=Z$j.y,Z$e[10]=Z$j.z,Z$e[12]=-Z$ib.dot(Z$f,Z$a),Z$e[13]=-Z$ib.dot(Z$i,Z$a),Z$e[14]=-Z$ib.dot(Z$j,Z$a)},Z$B.createPerspective=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$e.elements,Z$i=1/Math.tan(Z$a/2),Z$j=1/(Z$c-Z$d);Z$f[0]=Z$i/Z$b,Z$f[5]=Z$i,Z$f[10]=(Z$d+Z$c)*Z$j,Z$f[11]=-1,Z$f[14]=2*Z$d*Z$c*Z$j,Z$f[1]=Z$f[2]=Z$f[3]=Z$f[4]=Z$f[6]=Z$f[7]=Z$f[8]=Z$f[9]=Z$f[12]=Z$f[13]=Z$f[15]=0},Z$B.createOrthoOffCenterRH=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){var Z$j=Z$i.elements,Z$k=1/(Z$a-Z$b),Z$l=1/(Z$c-Z$d),Z$m=1/(Z$e-Z$f);Z$j[1]=Z$j[2]=Z$j[3]=Z$j[4]=Z$j[6]=Z$j[7]=Z$j[8]=Z$j[9]=Z$j[11]=0,Z$j[15]=1,Z$j[0]=-2*Z$k,Z$j[5]=-2*Z$l,Z$j[10]=2*Z$m,Z$j[12]=(Z$a+Z$b)*Z$k,Z$j[13]=(Z$d+Z$c)*Z$l,Z$j[14]=(Z$f+Z$e)*Z$m},Z$B.translation=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements;Z$d[0]=Z$d[5]=Z$d[10]=Z$d[15]=1,Z$d[12]=Z$c[0],Z$d[13]=Z$c[1],Z$d[14]=Z$c[2]},Z$n(Z$B,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new Z$B},"_tempVector0",function(){return this._tempVector0=new Z$ib},"_tempVector1",function(){return this._tempVector1=new Z$ib},"_tempVector2",function(){return this._tempVector2=new Z$ib},"_tempQuaternion",function(){return this._tempQuaternion=new Z$cb},"DEFAULT",function(){return this.DEFAULT=new Z$B},"ZERO",function(){return this.ZERO=new Z$B(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),Z$B}(),Z$bb=(function(){function Z$v(Z$a,Z$b){this.extents=null,this.transformation=null,this.extents=Z$a,this.transformation=Z$b}Z$p(Z$v,"laya.d3.math.OrientedBoundBox");var Z$a=Z$v.prototype;Z$a.getCorners=function(Z$a){var Z$b=Z$v._tempV30.elements,Z$c=Z$v._tempV31.elements,Z$d=Z$v._tempV32.elements,Z$e=this.extents.elements;Z$b[0]=Z$e[0],Z$b[1]=Z$b[2]=0,Z$c[1]=Z$e[1],Z$c[0]=Z$c[2]=0,Z$d[2]=Z$e[2],Z$d[0]=Z$d[1]=0,Z$ib.TransformNormal(Z$v._tempV30,this.transformation,Z$v._tempV30),Z$ib.TransformNormal(Z$v._tempV31,this.transformation,Z$v._tempV31),Z$ib.TransformNormal(Z$v._tempV32,this.transformation,Z$v._tempV32);var Z$f=Z$v._tempV33;this.transformation.getTranslationVector(Z$f),Z$a.length=8,Z$ib.add(Z$f,Z$v._tempV30,Z$v._tempV34),Z$ib.add(Z$v._tempV34,Z$v._tempV31,Z$v._tempV34),Z$ib.add(Z$v._tempV34,Z$v._tempV32,Z$a[0]),Z$ib.add(Z$f,Z$v._tempV30,Z$v._tempV34),Z$ib.add(Z$v._tempV34,Z$v._tempV31,Z$v._tempV34),Z$ib.subtract(Z$v._tempV34,Z$v._tempV32,Z$a[1]),Z$ib.subtract(Z$f,Z$v._tempV30,Z$v._tempV34),Z$ib.add(Z$v._tempV34,Z$v._tempV31,Z$v._tempV34),Z$ib.subtract(Z$v._tempV34,Z$v._tempV32,Z$a[2]),Z$ib.subtract(Z$f,Z$v._tempV30,Z$v._tempV34),Z$ib.add(Z$v._tempV34,Z$v._tempV31,Z$v._tempV34),Z$ib.add(Z$v._tempV34,Z$v._tempV32,Z$a[3]),Z$ib.add(Z$f,Z$v._tempV30,Z$v._tempV34),Z$ib.subtract(Z$v._tempV34,Z$v._tempV31,Z$v._tempV34),Z$ib.add(Z$v._tempV34,Z$v._tempV32,Z$a[4]),Z$ib.add(Z$f,Z$v._tempV30,Z$v._tempV34),Z$ib.subtract(Z$v._tempV34,Z$v._tempV31,Z$v._tempV34),Z$ib.subtract(Z$v._tempV34,Z$v._tempV32,Z$a[5]),Z$ib.subtract(Z$f,Z$v._tempV30,Z$v._tempV34),Z$ib.subtract(Z$v._tempV34,Z$v._tempV31,Z$v._tempV34),Z$ib.subtract(Z$v._tempV34,Z$v._tempV32,Z$a[6]),Z$ib.subtract(Z$f,Z$v._tempV30,Z$v._tempV34),Z$ib.subtract(Z$v._tempV34,Z$v._tempV31,Z$v._tempV34),Z$ib.add(Z$v._tempV34,Z$v._tempV32,Z$a[7])},Z$a.transform=function(Z$a){Z$ab.multiply(this.transformation,Z$a,this.transformation)},Z$a.scale=function(Z$a){Z$ib.multiply(this.extents,Z$a,this.extents)},Z$a.translate=function(Z$a){this.transformation.getTranslationVector(Z$v._tempV30),Z$ib.add(Z$v._tempV30,Z$a,Z$v._tempV31),this.transformation.setTranslationVector(Z$v._tempV31)},Z$a.Size=function(Z$a){Z$ib.scale(this.extents,2,Z$a)},Z$a.getSize=function(Z$a){var Z$b=this.extents.elements;Z$v._tempV30.x=Z$b[0],Z$v._tempV31.y=Z$b[1],Z$v._tempV32.z=Z$b[2],Z$ib.TransformNormal(Z$v._tempV30,this.transformation,Z$v._tempV30),Z$ib.TransformNormal(Z$v._tempV31,this.transformation,Z$v._tempV31),Z$ib.TransformNormal(Z$v._tempV31,this.transformation,Z$v._tempV32);var Z$c=Z$a.elements;Z$c[0]=Z$ib.scalarLength(Z$v._tempV30),Z$c[1]=Z$ib.scalarLength(Z$v._tempV31),Z$c[2]=Z$ib.scalarLength(Z$v._tempV32)},Z$a.getSizeSquared=function(Z$a){var Z$b=this.extents.elements;Z$v._tempV30.x=Z$b[0],Z$v._tempV31.y=Z$b[1],Z$v._tempV32.z=Z$b[2],Z$ib.TransformNormal(Z$v._tempV30,this.transformation,Z$v._tempV30),Z$ib.TransformNormal(Z$v._tempV31,this.transformation,Z$v._tempV31),Z$ib.TransformNormal(Z$v._tempV31,this.transformation,Z$v._tempV32);var Z$c=Z$a.elements;Z$c[0]=Z$ib.scalarLengthSquared(Z$v._tempV30),Z$c[1]=Z$ib.scalarLengthSquared(Z$v._tempV31),Z$c[2]=Z$ib.scalarLengthSquared(Z$v._tempV32)},Z$a.getCenter=function(Z$a){this.transformation.getTranslationVector(Z$a)},Z$a.containsPoint=function(Z$a){var Z$b=this.extents.elements,Z$c=Z$b[0],Z$d=Z$b[1],Z$e=Z$b[2];this.transformation.invert(Z$v._tempM0),Z$ib.transformCoordinate(Z$a,Z$v._tempM0,Z$v._tempV30);var Z$f=Z$v._tempV30.elements,Z$i=Math.abs(Z$f[0]),Z$j=Math.abs(Z$f[1]),Z$k=Math.abs(Z$f[2]);return Z$ga.nearEqual(Z$i,Z$c)&&Z$ga.nearEqual(Z$j,Z$d)&&Z$ga.nearEqual(Z$k,Z$e)?2:Z$i<Z$c&&Z$j<Z$d&&Z$k<Z$e?1:0},Z$a.containsPoints=function(Z$a){var Z$b=this.extents.elements,Z$c=Z$b[0],Z$d=Z$b[1],Z$e=Z$b[2];this.transformation.invert(Z$v._tempM0);for(var Z$f=!0,Z$i=!1,Z$j=0;Z$j<Z$a.length;Z$j++){Z$ib.transformCoordinate(Z$a[Z$j],Z$v._tempM0,Z$v._tempV30);var Z$k=Z$v._tempV30.elements,Z$l=Math.abs(Z$k[0]),Z$m=Math.abs(Z$k[1]),Z$n=Math.abs(Z$k[2]);Z$ga.nearEqual(Z$l,Z$c)&&Z$ga.nearEqual(Z$m,Z$d)&&Z$ga.nearEqual(Z$n,Z$e)&&(Z$i=!0),Z$l<Z$c&&Z$m<Z$d&&Z$n<Z$e?Z$i=!0:Z$f=!1}return Z$f?1:Z$i?2:0},Z$a.containsSphere=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!1);var Z$c=this.extents.elements,Z$d=Z$c[0],Z$e=Z$c[1],Z$f=Z$c[2],Z$i=Z$a.radius;this.transformation.invert(Z$v._tempM0),Z$ib.transformCoordinate(Z$a.center,Z$v._tempM0,Z$v._tempV30);var Z$j=NaN;if(Z$j=Z$b?Z$i:(Z$ib.scale(Z$ib.UnitX,Z$i,Z$v._tempV31),Z$ib.TransformNormal(Z$v._tempV31,Z$v._tempM0,Z$v._tempV31),Z$ib.scalarLength(Z$v._tempV31)),Z$ib.scale(this.extents,-1,Z$v._tempV32),Z$ib.Clamp(Z$v._tempV30,Z$v._tempV32,this.extents,Z$v._tempV33),Z$j*Z$j<Z$ib.distanceSquared(Z$v._tempV30,Z$v._tempV33))return 0;var Z$k=Z$v._tempV30.elements,Z$l=Z$k[0],Z$m=Z$k[1],Z$n=Z$k[2],Z$o=Z$v._tempV32.elements,Z$p=Z$o[0],Z$q=Z$o[1],Z$r=Z$o[2];return Z$p+Z$j<=Z$l&&Z$l<=Z$d-Z$j&&Z$j<Z$d-Z$p&&Z$q+Z$j<=Z$m&&Z$m<=Z$e-Z$j&&Z$j<Z$e-Z$q&&Z$r+Z$j<=Z$n&&Z$n<=Z$f-Z$j&&Z$j<Z$f-Z$r?1:2},Z$a.containsOrientedBoundBox=function(Z$a){var Z$b=0,Z$c=0;Z$a.getCorners(Z$v._corners);var Z$d=this.containsPoints(Z$v._corners);if(0!=Z$d)return Z$d;var Z$e=this.extents.elements;Z$a.extents.cloneTo(Z$v._tempV35);var Z$f=Z$v._tempV35.elements;Z$v._getRows(this.transformation,Z$v._rows1),Z$v._getRows(Z$a.transformation,Z$v._rows2);var Z$i=NaN;for(Z$b=0;Z$b<4;Z$b++)for(Z$c=0;Z$c<4;Z$c++)3==Z$b||3==Z$c?(Z$v._tempM0.setElementByRowColumn(Z$b,Z$c,0),Z$v._tempM1.setElementByRowColumn(Z$b,Z$c,0)):(Z$i=Z$ib.dot(Z$v._rows1[Z$b],Z$v._rows2[Z$c]),Z$v._tempM0.setElementByRowColumn(Z$b,Z$c,Z$i),Z$v._tempM1.setElementByRowColumn(Z$b,Z$c,Math.abs(Z$i)));Z$a.getCenter(Z$v._tempV34),this.getCenter(Z$v._tempV36),Z$ib.subtract(Z$v._tempV34,Z$v._tempV36,Z$v._tempV30);var Z$j=Z$v._tempV31.elements;Z$j[0]=Z$ib.dot(Z$v._tempV30,Z$v._rows1[0]),Z$j[1]=Z$ib.dot(Z$v._tempV30,Z$v._rows1[1]),Z$j[2]=Z$ib.dot(Z$v._tempV30,Z$v._rows1[2]);var Z$k=Z$v._tempV32.elements,Z$l=Z$v._tempV33.elements;for(Z$b=0;Z$b<3;Z$b++)if(Z$k[0]=Z$v._tempM1.getElementByRowColumn(Z$b,0),Z$k[1]=Z$v._tempM1.getElementByRowColumn(Z$b,1),Z$k[2]=Z$v._tempM1.getElementByRowColumn(Z$b,2),Z$e[Z$b]+Z$ib.dot(Z$v._tempV35,Z$v._tempV32)<Math.abs(Z$j[Z$b]))return 0;for(Z$c=0;Z$c<3;Z$c++)if(Z$k[0]=Z$v._tempM1.getElementByRowColumn(0,Z$c),Z$k[1]=Z$v._tempM1.getElementByRowColumn(1,Z$c),Z$k[2]=Z$v._tempM1.getElementByRowColumn(2,Z$c),Z$l[0]=Z$v._tempM0.getElementByRowColumn(0,Z$c),Z$l[1]=Z$v._tempM0.getElementByRowColumn(1,Z$c),Z$l[2]=Z$v._tempM0.getElementByRowColumn(2,Z$c),Z$ib.dot(this.extents,Z$v._tempV32)+Z$f[Z$c]<Math.abs(Z$ib.dot(Z$v._tempV31,Z$v._tempV33)))return 0;for(Z$b=0;Z$b<3;Z$b++)for(Z$c=0;Z$c<3;Z$c++){var Z$m=(Z$b+1)%3,Z$n=(Z$b+2)%3,Z$o=(Z$c+1)%3,Z$p=(Z$c+2)%3;if(Z$e[Z$m]*Z$v._tempM1.getElementByRowColumn(Z$n,Z$c)+Z$e[Z$n]*Z$v._tempM1.getElementByRowColumn(Z$m,Z$c)+(Z$f[Z$o]*Z$v._tempM1.getElementByRowColumn(Z$b,Z$p)+Z$f[Z$p]*Z$v._tempM1.getElementByRowColumn(Z$b,Z$o))<Math.abs(Z$j[Z$n]*Z$v._tempM0.getElementByRowColumn(Z$m,Z$c)-Z$j[Z$m]*Z$v._tempM0.getElementByRowColumn(Z$n,Z$c)))return 0}return 2},Z$a.containsLine=function(Z$a,Z$b){Z$v._corners[0]=Z$a,Z$v._corners[1]=Z$b;var Z$c=this.containsPoints(Z$v._corners);if(0!=Z$c)return Z$c;var Z$d=this.extents.elements,Z$e=Z$d[0],Z$f=Z$d[1],Z$i=Z$d[2];this.transformation.invert(Z$v._tempM0),Z$ib.transformCoordinate(Z$a,Z$v._tempM0,Z$v._tempV30),Z$ib.transformCoordinate(Z$b,Z$v._tempM0,Z$v._tempV31),Z$ib.add(Z$v._tempV30,Z$v._tempV31,Z$v._tempV32),Z$ib.scale(Z$v._tempV32,.5,Z$v._tempV32),Z$ib.subtract(Z$v._tempV30,Z$v._tempV32,Z$v._tempV33);var Z$j=Z$v._tempV33.elements,Z$k=Z$j[0],Z$l=Z$j[1],Z$m=Z$j[2],Z$n=Z$v._tempV34.elements,Z$o=Z$n[0]=Math.abs(Z$j[0]),Z$p=Z$n[1]=Math.abs(Z$j[1]),Z$q=Z$n[2]=Math.abs(Z$j[2]),Z$r=Z$v._tempV32.elements,Z$s=Z$r[0],Z$t=Z$r[1],Z$u=Z$r[2];return Math.abs(Z$s)>Z$e+Z$o?0:Math.abs(Z$t)>Z$f+Z$p?0:Math.abs(Z$u)>Z$i+Z$q?0:Math.abs(Z$t*Z$m-Z$u*Z$l)>Z$f*Z$q+Z$i*Z$p?0:Math.abs(Z$s*Z$m-Z$u*Z$k)>Z$e*Z$q+Z$i*Z$o?0:Math.abs(Z$s*Z$l-Z$t*Z$k)>Z$e*Z$p+Z$f*Z$o?0:2},Z$a.containsBoundBox=function(Z$a){var Z$b=0,Z$c=0,Z$d=Z$a.min,Z$e=Z$a.max;Z$a.getCorners(Z$v._corners);var Z$f=this.containsPoints(Z$v._corners);if(0!=Z$f)return Z$f;Z$ib.subtract(Z$e,Z$d,Z$v._tempV30),Z$ib.scale(Z$v._tempV30,.5,Z$v._tempV30),Z$ib.add(Z$d,Z$v._tempV30,Z$v._tempV30),Z$ib.subtract(Z$e,Z$v._tempV30,Z$v._tempV31);var Z$i=this.extents.elements,Z$j=Z$v._tempV31.elements;Z$v._getRows(this.transformation,Z$v._rows1),this.transformation.invert(Z$v._tempM0);for(Z$b=0;Z$b<3;Z$b++)for(Z$c=0;Z$c<3;Z$c++)Z$v._tempM1.setElementByRowColumn(Z$b,Z$c,Math.abs(Z$v._tempM0.getElementByRowColumn(Z$b,Z$c)));this.getCenter(Z$v._tempV35),Z$ib.subtract(Z$v._tempV30,Z$v._tempV35,Z$v._tempV32);var Z$k=Z$v._tempV31.elements;Z$k[0]=Z$ib.dot(Z$v._tempV32,Z$v._rows1[0]),Z$k[1]=Z$ib.dot(Z$v._tempV32,Z$v._rows1[1]),Z$k[2]=Z$ib.dot(Z$v._tempV32,Z$v._rows1[2]);var Z$l=Z$v._tempV33.elements,Z$m=Z$v._tempV34.elements;for(Z$b=0;Z$b<3;Z$b++)if(Z$l[0]=Z$v._tempM1.getElementByRowColumn(Z$b,0),Z$l[1]=Z$v._tempM1.getElementByRowColumn(Z$b,1),Z$l[2]=Z$v._tempM1.getElementByRowColumn(Z$b,2),Z$i[Z$b]+Z$ib.dot(Z$v._tempV31,Z$v._tempV33)<Math.abs(Z$k[Z$b]))return 0;for(Z$c=0;Z$c<3;Z$c++)if(Z$l[0]=Z$v._tempM1.getElementByRowColumn(0,Z$c),Z$l[1]=Z$v._tempM1.getElementByRowColumn(1,Z$c),Z$l[2]=Z$v._tempM1.getElementByRowColumn(2,Z$c),Z$m[0]=Z$v._tempM0.getElementByRowColumn(0,Z$c),Z$m[1]=Z$v._tempM0.getElementByRowColumn(1,Z$c),Z$m[2]=Z$v._tempM0.getElementByRowColumn(2,Z$c),Z$ib.dot(this.extents,Z$v._tempV33)+Z$j[Z$c]<Math.abs(Z$ib.dot(Z$v._tempV31,Z$v._tempV34)))return 0;for(Z$b=0;Z$b<3;Z$b++)for(Z$c=0;Z$c<3;Z$c++){var Z$n=(Z$b+1)%3,Z$o=(Z$b+2)%3,Z$p=(Z$c+1)%3,Z$q=(Z$c+2)%3;if(Z$i[Z$n]*Z$v._tempM1.getElementByRowColumn(Z$o,Z$c)+Z$i[Z$o]*Z$v._tempM1.getElementByRowColumn(Z$n,Z$c)+(Z$j[Z$p]*Z$v._tempM1.getElementByRowColumn(Z$b,Z$q)+Z$j[Z$q]*Z$v._tempM1.getElementByRowColumn(Z$b,Z$p))<Math.abs(Z$k[Z$o]*Z$v._tempM0.getElementByRowColumn(Z$n,Z$c)-Z$k[Z$n]*Z$v._tempM0.getElementByRowColumn(Z$o,Z$c)))return 0}return 2},Z$a.intersectsRay=function(Z$a,Z$b){Z$ib.scale(this.extents,-1,Z$v._tempV30),this.transformation.invert(Z$v._tempM0),Z$ib.TransformNormal(Z$a.direction,Z$v._tempM0,Z$v._ray.direction),Z$ib.transformCoordinate(Z$a.origin,Z$v._tempM0,Z$v._ray.origin),Z$v._boxBound1.min=Z$v._tempV30,Z$v._boxBound1.max=this.extents;var Z$c=Collision.intersectsRayAndBoxRP(Z$v._ray,Z$v._boxBound1,Z$b);return-1!==Z$c&&Z$ib.transformCoordinate(Z$b,this.transformation,Z$b),Z$c},Z$a._getLocalCorners=function(Z$a){Z$a.length=8;var Z$b=this.extents.elements;Z$v._tempV30.x=Z$b[0],Z$v._tempV31.y=Z$b[1],Z$v._tempV32.z=Z$b[2],Z$ib.add(Z$v._tempV30,Z$v._tempV31,Z$v._tempV33),Z$ib.add(Z$v._tempV33,Z$v._tempV32,Z$a[0]),Z$ib.add(Z$v._tempV30,Z$v._tempV31,Z$v._tempV33),Z$ib.subtract(Z$v._tempV33,Z$v._tempV32,Z$a[1]),Z$ib.subtract(Z$v._tempV31,Z$v._tempV30,Z$v._tempV33),Z$ib.subtract(Z$v._tempV33,Z$v._tempV30,Z$a[2]),Z$ib.subtract(Z$v._tempV31,Z$v._tempV30,Z$v._tempV33),Z$ib.add(Z$v._tempV33,Z$v._tempV32,Z$a[3]),Z$ib.subtract(Z$v._tempV30,Z$v._tempV31,Z$v._tempV33),Z$ib.add(Z$v._tempV33,Z$v._tempV32,Z$a[4]),Z$ib.subtract(Z$v._tempV30,Z$v._tempV31,Z$v._tempV33),Z$ib.subtract(Z$v._tempV33,Z$v._tempV32,Z$a[5]),Z$ib.scale(Z$a[0],-1,Z$a[6]),Z$ib.subtract(Z$v._tempV32,Z$v._tempV30,Z$v._tempV33),Z$ib.subtract(Z$v._tempV33,Z$v._tempV31,Z$a[7])},Z$a.equals=function(Z$a){return this.extents==Z$a.extents&&this.transformation==Z$a.transformation},Z$a.cloneTo=function(Z$a){var Z$b=Z$a;this.extents.cloneTo(Z$b.extents),this.transformation.cloneTo(Z$b.transformation)},Z$v.createByBoundBox=function(Z$a,Z$b){var Z$c=Z$a.min,Z$d=Z$a.max;Z$ib.subtract(Z$d,Z$c,Z$v._tempV30),Z$ib.scale(Z$v._tempV30,.5,Z$v._tempV30),Z$ib.add(Z$c,Z$v._tempV30,Z$v._tempV31),Z$ib.subtract(Z$d,Z$v._tempV31,Z$v._tempV32),Z$ab.translation(Z$v._tempV31,Z$v._tempM0);var Z$e=Z$v._tempV32.clone(),Z$f=Z$v._tempM0.clone();Z$b.extents=Z$e,Z$b.transformation=Z$f},Z$v.createByMinAndMaxVertex=function(Z$a,Z$b){return Z$ib.subtract(Z$b,Z$a,Z$v._tempV30),Z$ib.scale(Z$v._tempV30,.5,Z$v._tempV30),Z$ib.add(Z$a,Z$v._tempV30,Z$v._tempV31),Z$ib.subtract(Z$b,Z$v._tempV31,Z$v._tempV32),Z$ab.translation(Z$v._tempV31,Z$v._tempM0),new Z$v(Z$v._tempV32,Z$v._tempM0)},Z$v._getRows=function(Z$a,Z$b){Z$b.length=3;var Z$c=Z$a.elements,Z$d=Z$b[0].elements;Z$d[0]=Z$c[0],Z$d[1]=Z$c[1],Z$d[2]=Z$c[2];var Z$e=Z$b[1].elements;Z$e[0]=Z$c[4],Z$e[1]=Z$c[5],Z$e[2]=Z$c[6];var Z$f=Z$b[2].elements;Z$f[0]=Z$c[8],Z$f[1]=Z$c[9],Z$f[2]=Z$c[10]},Z$v.getObbtoObbMatrix4x4=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.transformation,Z$f=Z$b.transformation;if(Z$c){Z$v._getRows(Z$e,Z$v._rows1),Z$v._getRows(Z$f,Z$v._rows2);for(var Z$i=0;Z$i<3;Z$i++)for(var Z$j=0;Z$j<3;Z$j++)Z$d.setElementByRowColumn(Z$i,Z$j,Z$ib.dot(Z$v._rows2[Z$i],Z$v._rows1[Z$j]));Z$b.getCenter(Z$v._tempV30),Z$a.getCenter(Z$v._tempV31),Z$ib.subtract(Z$v._tempV30,Z$v._tempV31,Z$v._tempV32);var Z$k=Z$d.elements;Z$k[12]=Z$ib.dot(Z$v._tempV32,Z$v._rows1[0]),Z$k[13]=Z$ib.dot(Z$v._tempV32,Z$v._rows1[1]),Z$k[14]=Z$ib.dot(Z$v._tempV32,Z$v._rows1[2]),Z$k[15]=1}else Z$e.invert(Z$v._tempM0),Z$ab.multiply(Z$f,Z$v._tempM0,Z$d)},Z$v.merge=function(Z$a,Z$b,Z$c){var Z$d=Z$a.extents,Z$e=Z$a.transformation;Z$v.getObbtoObbMatrix4x4(Z$a,Z$b,Z$c,Z$v._tempM0),Z$b._getLocalCorners(Z$v._corners),Z$ib.transformCoordinate(Z$v._corners[0],Z$v._tempM0,Z$v._corners[0]),Z$ib.transformCoordinate(Z$v._corners[1],Z$v._tempM0,Z$v._corners[1]),Z$ib.transformCoordinate(Z$v._corners[2],Z$v._tempM0,Z$v._corners[2]),Z$ib.transformCoordinate(Z$v._corners[3],Z$v._tempM0,Z$v._corners[3]),Z$ib.transformCoordinate(Z$v._corners[4],Z$v._tempM0,Z$v._corners[4]),Z$ib.transformCoordinate(Z$v._corners[5],Z$v._tempM0,Z$v._corners[5]),Z$ib.transformCoordinate(Z$v._corners[6],Z$v._tempM0,Z$v._corners[6]),Z$ib.transformCoordinate(Z$v._corners[7],Z$v._tempM0,Z$v._corners[7]),Z$ib.scale(Z$d,-1,Z$v._boxBound1.min),Z$d.cloneTo(Z$v._boxBound1.max),Z$Za.createfromPoints(Z$v._corners,Z$v._boxBound2),Z$Za.merge(Z$v._boxBound2,Z$v._boxBound1,Z$v._boxBound3);var Z$f=Z$v._boxBound3.min,Z$i=Z$v._boxBound3.max;Z$ib.subtract(Z$i,Z$f,Z$v._tempV30),Z$ib.scale(Z$v._tempV30,.5,Z$v._tempV30),Z$ib.add(Z$f,Z$v._tempV30,Z$v._tempV32),Z$ib.subtract(Z$i,Z$v._tempV32,Z$d),Z$ib.transformCoordinate(Z$v._tempV32,Z$e,Z$v._tempV33)},Z$n(Z$v,["_tempV30",function(){return this._tempV30=new Z$ib},"_tempV31",function(){return this._tempV31=new Z$ib},"_tempV32",function(){return this._tempV32=new Z$ib},"_tempV33",function(){return this._tempV33=new Z$ib},"_tempV34",function(){return this._tempV34=new Z$ib},"_tempV35",function(){return this._tempV35=new Z$ib},"_tempV36",function(){return this._tempV36=new Z$ib},"_tempM0",function(){return this._tempM0=new Z$ab},"_tempM1",function(){return this._tempM1=new Z$ab},"_corners",function(){return this._corners=[new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib]},"_rows1",function(){return this._rows1=[new Z$ib,new Z$ib,new Z$ib]},"_rows2",function(){return this._rows2=[new Z$ib,new Z$ib,new Z$ib]},"_ray",function(){return this._ray=new Z$eb(new Z$ib,new Z$ib)},"_boxBound1",function(){return this._boxBound1=new Z$Za(new Z$ib,new Z$ib)},"_boxBound2",function(){return this._boxBound2=new Z$Za(new Z$ib,new Z$ib)},"_boxBound3",function(){return this._boxBound3=new Z$Za(new Z$ib,new Z$ib)}])}(),function(){function Z$x(Z$a,Z$b){this.normal=null,this.distance=NaN,void 0===Z$b&&(Z$b=0),this.normal=Z$a,this.distance=Z$b}return Z$p(Z$x,"laya.d3.math.Plane"),Z$x.prototype.normalize=function(){var Z$a=this.normal.elements,Z$b=Z$a[0],Z$c=Z$a[1],Z$d=Z$a[2],Z$e=1/Math.sqrt(Z$b*Z$b+Z$c*Z$c+Z$d*Z$d);Z$a[0]=Z$b*Z$e,Z$a[1]=Z$c*Z$e,Z$a[2]=Z$d*Z$e,this.distance*=Z$e},Z$x.createPlaneBy3P=function(Z$a,Z$b,Z$c){var Z$d=Z$a.elements,Z$e=Z$b.elements,Z$f=Z$c.elements,Z$i=Z$e[0]-Z$d[0],Z$j=Z$e[1]-Z$d[1],Z$k=Z$e[2]-Z$d[2],Z$l=Z$f[0]-Z$d[0],Z$m=Z$f[1]-Z$d[1],Z$n=Z$f[2]-Z$d[2],Z$o=Z$j*Z$n-Z$k*Z$m,Z$p=Z$k*Z$l-Z$i*Z$n,Z$q=Z$i*Z$m-Z$j*Z$l,Z$r=1/Math.sqrt(Z$o*Z$o+Z$p*Z$p+Z$q*Z$q),Z$s=Z$o*Z$r,Z$t=Z$p*Z$r,Z$u=Z$q*Z$r,Z$v=Z$x._TEMPVec3.elements;Z$v[0]=Z$s,Z$v[1]=Z$t,Z$v[2]=Z$u;var Z$w=-(Z$s*Z$d[0]+Z$t*Z$d[1]+Z$u*Z$d[2]);return new Z$x(Z$x._TEMPVec3,Z$w)},Z$x.PlaneIntersectionType_Back=0,Z$x.PlaneIntersectionType_Front=1,Z$x.PlaneIntersectionType_Intersecting=2,Z$n(Z$x,["_TEMPVec3",function(){return this._TEMPVec3=new Z$ib}]),Z$x}()),Z$cb=function(){function Z$e(Z$a,Z$b,Z$c,Z$d){this.elements=new Float32Array(4),void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=1),this.elements[0]=Z$a,this.elements[1]=Z$b,this.elements[2]=Z$c,this.elements[3]=Z$d}Z$p(Z$e,"laya.d3.math.Quaternion");var Z$a=Z$e.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.scaling=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=this.elements;Z$c[0]=Z$d[0]*Z$a,Z$c[1]=Z$d[1]*Z$a,Z$c[2]=Z$d[2]*Z$a,Z$c[3]=Z$d[3]*Z$a},Z$a.normalize=function(Z$a){var Z$b=Z$a.elements,Z$c=this.elements,Z$d=Z$c[0],Z$e=Z$c[1],Z$f=Z$c[2],Z$i=Z$c[3],Z$j=Z$d*Z$d+Z$e*Z$e+Z$f*Z$f+Z$i*Z$i;0<Z$j&&(Z$j=1/Math.sqrt(Z$j),Z$b[0]=Z$d*Z$j,Z$b[1]=Z$e*Z$j,Z$b[2]=Z$f*Z$j,Z$b[3]=Z$i*Z$j)},Z$a.length=function(){var Z$a=this.elements,Z$b=Z$a[0],Z$c=Z$a[1],Z$d=Z$a[2],Z$e=Z$a[3];return Math.sqrt(Z$b*Z$b+Z$c*Z$c+Z$d*Z$d+Z$e*Z$e)},Z$a.rotateX=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=this.elements;Z$a*=.5;var Z$e=Z$d[0],Z$f=Z$d[1],Z$i=Z$d[2],Z$j=Z$d[3],Z$k=Math.sin(Z$a),Z$l=Math.cos(Z$a);Z$c[0]=Z$e*Z$l+Z$j*Z$k,Z$c[1]=Z$f*Z$l+Z$i*Z$k,Z$c[2]=Z$i*Z$l-Z$f*Z$k,Z$c[3]=Z$j*Z$l-Z$e*Z$k},Z$a.rotateY=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=this.elements;Z$a*=.5;var Z$e=Z$d[0],Z$f=Z$d[1],Z$i=Z$d[2],Z$j=Z$d[3],Z$k=Math.sin(Z$a),Z$l=Math.cos(Z$a);Z$c[0]=Z$e*Z$l-Z$i*Z$k,Z$c[1]=Z$f*Z$l+Z$j*Z$k,Z$c[2]=Z$i*Z$l+Z$e*Z$k,Z$c[3]=Z$j*Z$l-Z$f*Z$k},Z$a.rotateZ=function(Z$a,Z$b){var Z$c=Z$b.elements,Z$d=this.elements;Z$a*=.5;var Z$e=Z$d[0],Z$f=Z$d[1],Z$i=Z$d[2],Z$j=Z$d[3],Z$k=Math.sin(Z$a),Z$l=Math.cos(Z$a);Z$c[0]=Z$e*Z$l+Z$f*Z$k,Z$c[1]=Z$f*Z$l-Z$e*Z$k,Z$c[2]=Z$i*Z$l+Z$j*Z$k,Z$c[3]=Z$j*Z$l-Z$i*Z$k},Z$a.getYawPitchRoll=function(Z$a){Z$ib.transformQuat(Z$ib.ForwardRH,this,Z$e.TEMPVector31),Z$ib.transformQuat(Z$ib.Up,this,Z$e.TEMPVector32);var Z$b=Z$e.TEMPVector32.elements;Z$e.angleTo(Z$ib.ZERO,Z$e.TEMPVector31,Z$e.TEMPVector33);var Z$c=Z$e.TEMPVector33.elements;Z$c[0]==Math.PI/2?(Z$c[1]=Z$e.arcTanAngle(Z$b[2],Z$b[0]),Z$c[2]=0):Z$c[0]==-Math.PI/2?(Z$c[1]=Z$e.arcTanAngle(-Z$b[2],-Z$b[0]),Z$c[2]=0):(Z$ab.createRotationY(-Z$c[1],Z$e.TEMPMatrix0),Z$ab.createRotationX(-Z$c[0],Z$e.TEMPMatrix1),Z$ib.transformCoordinate(Z$e.TEMPVector32,Z$e.TEMPMatrix0,Z$e.TEMPVector32),Z$ib.transformCoordinate(Z$e.TEMPVector32,Z$e.TEMPMatrix1,Z$e.TEMPVector32),Z$c[2]=Z$e.arcTanAngle(Z$b[1],-Z$b[0])),Z$c[1]<=-Math.PI&&(Z$c[1]=Math.PI),Z$c[2]<=-Math.PI&&(Z$c[2]=Math.PI),Z$c[1]>=Math.PI&&Z$c[2]>=Math.PI&&(Z$c[1]=0,Z$c[2]=0,Z$c[0]=Math.PI-Z$c[0]);var Z$d=Z$a.elements;Z$d[0]=Z$c[1],Z$d[1]=Z$c[0],Z$d[2]=Z$c[2]},Z$a.invert=function(Z$a){var Z$b=Z$a.elements,Z$c=this.elements,Z$d=Z$c[0],Z$e=Z$c[1],Z$f=Z$c[2],Z$i=Z$c[3],Z$j=Z$d*Z$d+Z$e*Z$e+Z$f*Z$f+Z$i*Z$i,Z$k=Z$j?1/Z$j:0;Z$b[0]=-Z$d*Z$k,Z$b[1]=-Z$e*Z$k,Z$b[2]=-Z$f*Z$k,Z$b[3]=Z$i*Z$k},Z$a.identity=function(){var Z$a=this.elements;Z$a[0]=0,Z$a[1]=0,Z$a[2]=0,Z$a[3]=1},Z$a.fromArray=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0),this.elements[0]=Z$a[Z$b+0],this.elements[1]=Z$a[Z$b+1],this.elements[2]=Z$a[Z$b+2],this.elements[3]=Z$a[Z$b+3]},Z$a.cloneTo=function(Z$a){var Z$b,Z$c,Z$d;if((Z$c=this.elements)!==(Z$d=Z$a.elements))for(Z$b=0;Z$b<4;++Z$b)Z$d[Z$b]=Z$c[Z$b]},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$a.equals=function(Z$a){var Z$b=this.elements,Z$c=Z$a.elements;return Z$ga.nearEqual(Z$b[0],Z$c[0])&&Z$ga.nearEqual(Z$b[1],Z$c[1])&&Z$ga.nearEqual(Z$b[2],Z$c[2])&&Z$ga.nearEqual(Z$b[3],Z$c[3])},Z$a.lengthSquared=function(){var Z$a=this.elements[0],Z$b=this.elements[1],Z$c=this.elements[2],Z$d=this.elements[3];return Z$a*Z$a+Z$b*Z$b+Z$c*Z$c+Z$d*Z$d},Z$q(0,Z$a,"x",function(){return this.elements[0]}),Z$q(0,Z$a,"y",function(){return this.elements[1]}),Z$q(0,Z$a,"z",function(){return this.elements[2]}),Z$q(0,Z$a,"w",function(){return this.elements[3]}),Z$e.createFromYawPitchRoll=function(Z$a,Z$b,Z$c,Z$d){var Z$e=.5*Z$c,Z$f=.5*Z$b,Z$i=.5*Z$a,Z$j=Math.sin(Z$e),Z$k=Math.cos(Z$e),Z$l=Math.sin(Z$f),Z$m=Math.cos(Z$f),Z$n=Math.sin(Z$i),Z$o=Math.cos(Z$i),Z$p=Z$d.elements;Z$p[0]=Z$o*Z$l*Z$k+Z$n*Z$m*Z$j,Z$p[1]=Z$n*Z$m*Z$k-Z$o*Z$l*Z$j,Z$p[2]=Z$o*Z$m*Z$j-Z$n*Z$l*Z$k,Z$p[3]=Z$o*Z$m*Z$k+Z$n*Z$l*Z$j},Z$e.multiply=function(Z$a,Z$b,Z$c){var Z$d=Z$a.elements,Z$e=Z$b.elements,Z$f=Z$c.elements,Z$i=Z$d[0],Z$j=Z$d[1],Z$k=Z$d[2],Z$l=Z$d[3],Z$m=Z$e[0],Z$n=Z$e[1],Z$o=Z$e[2],Z$p=Z$e[3],Z$q=Z$j*Z$o-Z$k*Z$n,Z$r=Z$k*Z$m-Z$i*Z$o,Z$s=Z$i*Z$n-Z$j*Z$m,Z$t=Z$i*Z$m+Z$j*Z$n+Z$k*Z$o;Z$f[0]=Z$i*Z$p+Z$m*Z$l+Z$q,Z$f[1]=Z$j*Z$p+Z$n*Z$l+Z$r,Z$f[2]=Z$k*Z$p+Z$o*Z$l+Z$s,Z$f[3]=Z$l*Z$p-Z$t},Z$e.arcTanAngle=function(Z$a,Z$b){return 0==Z$a?1==Z$b?Math.PI/2:-Math.PI/2:0<Z$a?Math.atan(Z$b/Z$a):Z$a<0?0<Z$b?Math.atan(Z$b/Z$a)+Math.PI:Math.atan(Z$b/Z$a)-Math.PI:0},Z$e.angleTo=function(Z$a,Z$b,Z$c){Z$ib.subtract(Z$b,Z$a,Z$e.TEMPVector30),Z$ib.normalize(Z$e.TEMPVector30,Z$e.TEMPVector30),Z$c.elements[0]=Math.asin(Z$e.TEMPVector30.y),Z$c.elements[1]=Z$e.arcTanAngle(-Z$e.TEMPVector30.z,-Z$e.TEMPVector30.x)},Z$e.createFromAxisAngle=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements;Z$b*=.5;var Z$f=Math.sin(Z$b);Z$d[0]=Z$f*Z$e[0],Z$d[1]=Z$f*Z$e[1],Z$d[2]=Z$f*Z$e[2],Z$d[3]=Math.cos(Z$b)},Z$e.createFromMatrix3x3=function(Z$a,Z$b){var Z$c,Z$d=Z$b.elements,Z$e=Z$a.elements,Z$f=Z$e[0]+Z$e[4]+Z$e[8];if(0<Z$f)Z$c=Math.sqrt(Z$f+1),Z$d[3]=.5*Z$c,Z$c=.5/Z$c,Z$d[0]=(Z$e[5]-Z$e[7])*Z$c,Z$d[1]=(Z$e[6]-Z$e[2])*Z$c,Z$d[2]=(Z$e[1]-Z$e[3])*Z$c;else{var Z$i=0;Z$e[4]>Z$e[0]&&(Z$i=1),Z$e[8]>Z$e[3*Z$i+Z$i]&&(Z$i=2);var Z$j=(Z$i+1)%3,Z$k=(Z$i+2)%3;Z$c=Math.sqrt(Z$e[3*Z$i+Z$i]-Z$e[3*Z$j+Z$j]-Z$e[3*Z$k+Z$k]+1),Z$d[Z$i]=.5*Z$c,Z$c=.5/Z$c,Z$d[3]=(Z$e[3*Z$j+Z$k]-Z$e[3*Z$k+Z$j])*Z$c,Z$d[Z$j]=(Z$e[3*Z$j+Z$i]+Z$e[3*Z$i+Z$j])*Z$c,Z$d[Z$k]=(Z$e[3*Z$k+Z$i]+Z$e[3*Z$i+Z$k])*Z$c}},Z$e.createFromMatrix4x4=function(Z$a,Z$b){var Z$c,Z$d,Z$e=Z$a.elements,Z$f=Z$b.elements,Z$i=Z$e[0]+Z$e[5]+Z$e[10];0<Z$i?(Z$c=Math.sqrt(Z$i+1),Z$f[3]=.5*Z$c,Z$c=.5/Z$c,Z$f[0]=(Z$e[6]-Z$e[9])*Z$c,Z$f[1]=(Z$e[8]-Z$e[2])*Z$c,Z$f[2]=(Z$e[1]-Z$e[4])*Z$c):Z$e[0]>=Z$e[5]&&Z$e[0]>=Z$e[10]?(Z$d=.5/(Z$c=Math.sqrt(1+Z$e[0]-Z$e[5]-Z$e[10])),Z$f[0]=.5*Z$c,Z$f[1]=(Z$e[1]+Z$e[4])*Z$d,Z$f[2]=(Z$e[2]+Z$e[8])*Z$d,Z$f[3]=(Z$e[6]-Z$e[9])*Z$d):Z$e[5]>Z$e[10]?(Z$d=.5/(Z$c=Math.sqrt(1+Z$e[5]-Z$e[0]-Z$e[10])),Z$f[0]=(Z$e[4]+Z$e[1])*Z$d,Z$f[1]=.5*Z$c,Z$f[2]=(Z$e[9]+Z$e[6])*Z$d,Z$f[3]=(Z$e[8]-Z$e[2])*Z$d):(Z$d=.5/(Z$c=Math.sqrt(1+Z$e[10]-Z$e[0]-Z$e[5])),Z$f[0]=(Z$e[8]+Z$e[2])*Z$d,Z$f[1]=(Z$e[9]+Z$e[6])*Z$d,Z$f[2]=.5*Z$c,Z$f[3]=(Z$e[1]-Z$e[4])*Z$d)},Z$e.slerp=function(Z$a,Z$b,Z$c,Z$d){var Z$e,Z$f,Z$i,Z$j,Z$k,Z$l=Z$a.elements,Z$m=Z$b.elements,Z$n=Z$d.elements,Z$o=Z$l[0],Z$p=Z$l[1],Z$q=Z$l[2],Z$r=Z$l[3],Z$s=Z$m[0],Z$t=Z$m[1],Z$u=Z$m[2],Z$v=Z$m[3];return(Z$f=Z$o*Z$s+Z$p*Z$t+Z$q*Z$u+Z$r*Z$v)<0&&(Z$f=-Z$f,Z$s=-Z$s,Z$t=-Z$t,Z$u=-Z$u,Z$v=-Z$v),Z$k=1e-6<1-Z$f?(Z$e=Math.acos(Z$f),Z$i=Math.sin(Z$e),Z$j=Math.sin((1-Z$c)*Z$e)/Z$i,Math.sin(Z$c*Z$e)/Z$i):(Z$j=1-Z$c,Z$c),Z$n[0]=Z$j*Z$o+Z$k*Z$s,Z$n[1]=Z$j*Z$p+Z$k*Z$t,Z$n[2]=Z$j*Z$q+Z$k*Z$u,Z$n[3]=Z$j*Z$r+Z$k*Z$v,Z$n},Z$e.lerp=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$d.elements,Z$f=Z$a.elements,Z$i=Z$b.elements,Z$j=Z$f[0],Z$k=Z$f[1],Z$l=Z$f[2],Z$m=Z$f[3];Z$e[0]=Z$j+Z$c*(Z$i[0]-Z$j),Z$e[1]=Z$k+Z$c*(Z$i[1]-Z$k),Z$e[2]=Z$l+Z$c*(Z$i[2]-Z$l),Z$e[3]=Z$m+Z$c*(Z$i[3]-Z$m)},Z$e.add=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Z$e[0]+Z$f[0],Z$d[1]=Z$e[1]+Z$f[1],Z$d[2]=Z$e[2]+Z$f[2],Z$d[3]=Z$e[3]+Z$f[3]},Z$e.dot=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements;return Z$c[0]*Z$d[0]+Z$c[1]*Z$d[1]+Z$c[2]*Z$d[2]+Z$c[3]*Z$d[3]},Z$e.rotationLookAt=function(Z$a,Z$b,Z$c){Z$e.lookAt(Z$ib.ZERO,Z$a,Z$b,Z$c)},Z$e.lookAt=function(Z$a,Z$b,Z$c,Z$d){Z$ha.lookAt(Z$a,Z$b,Z$c,Z$e._tempMatrix3x3),Z$e.rotationMatrix(Z$e._tempMatrix3x3,Z$d)},Z$e.invert=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements,Z$e=Z$a.lengthSquared();Z$ga.isZero(Z$e)||(Z$e=1/Z$e,Z$d[0]=-Z$c[0]*Z$e,Z$d[1]=-Z$c[1]*Z$e,Z$d[2]=-Z$c[2]*Z$e,Z$d[3]=Z$c[3]*Z$e)},Z$e.rotationMatrix=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$c[0],Z$e=Z$c[1],Z$f=Z$c[2],Z$i=Z$c[3],Z$j=Z$c[4],Z$k=Z$c[5],Z$l=Z$c[6],Z$m=Z$c[7],Z$n=Z$c[8],Z$o=Z$b.elements,Z$p=NaN,Z$q=NaN,Z$r=Z$d+Z$j+Z$n;0<Z$r?(Z$p=Math.sqrt(Z$r+1),Z$o[3]=.5*Z$p,Z$p=.5/Z$p,Z$o[0]=(Z$k-Z$m)*Z$p,Z$o[1]=(Z$l-Z$f)*Z$p,Z$o[2]=(Z$e-Z$i)*Z$p):Z$j<=Z$d&&Z$n<=Z$d?(Z$q=.5/(Z$p=Math.sqrt(1+Z$d-Z$j-Z$n)),Z$o[0]=.5*Z$p,Z$o[1]=(Z$e+Z$i)*Z$q,Z$o[2]=(Z$f+Z$l)*Z$q,Z$o[3]=(Z$k-Z$m)*Z$q):Z$n<Z$j?(Z$q=.5/(Z$p=Math.sqrt(1+Z$j-Z$d-Z$n)),Z$o[0]=(Z$i+Z$e)*Z$q,Z$o[1]=.5*Z$p,Z$o[2]=(Z$m+Z$k)*Z$q,Z$o[3]=(Z$l-Z$f)*Z$q):(Z$q=.5/(Z$p=Math.sqrt(1+Z$n-Z$d-Z$j)),Z$o[0]=(Z$l+Z$f)*Z$q,Z$o[1]=(Z$m+Z$k)*Z$q,Z$o[2]=.5*Z$p,Z$o[3]=(Z$e-Z$i)*Z$q)},Z$e.DEFAULT=new Z$e,Z$n(Z$e,["TEMPVector30",function(){return this.TEMPVector30=new Z$ib},"TEMPVector31",function(){return this.TEMPVector31=new Z$ib},"TEMPVector32",function(){return this.TEMPVector32=new Z$ib},"TEMPVector33",function(){return this.TEMPVector33=new Z$ib},"TEMPMatrix0",function(){return this.TEMPMatrix0=new Z$ab},"TEMPMatrix1",function(){return this.TEMPMatrix1=new Z$ab},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new Z$ha},"NAN",function(){return this.NAN=new Z$e(NaN,NaN,NaN,NaN)}]),Z$e}(),Z$db=function(){function Z$a(Z$a){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=Z$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}Z$p(Z$a,"laya.d3.math.Rand");var Z$b=Z$a.prototype;return Z$b.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},Z$b.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},Z$b.getSignedFloat=function(){return 2*this.getFloat()-1},Z$q(0,Z$b,"seed",function(){return this.seeds[0]},function(Z$a){this.seeds[0]=Z$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),Z$a.getFloatFromInt=function(Z$a){return 1/8388607*(8388607&Z$a)},Z$a.getByteFromInt=function(Z$a){return(8388607&Z$a)>>>15},Z$a}(),Z$eb=(function(){function Z$e(Z$a){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(Z$a instanceof Array)||4!==Z$a.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|Z$a[0],this._state0L=0|Z$a[1],this._state1U=0|Z$a[2],this._state1L=0|Z$a[3]}Z$p(Z$e,"laya.d3.math.RandX");var Z$a=Z$e.prototype;Z$a.randomint=function(){var Z$a=this._state0U,Z$b=this._state0L,Z$c=this._state1U,Z$d=this._state1L,Z$e=(Z$d>>>0)+(Z$b>>>0),Z$f=Z$c+Z$a+(Z$e/2>>>31)>>>0,Z$i=Z$e>>>0,Z$j=0,Z$k=0;Z$j=(Z$a^=Z$j=Z$a<<23|(-512&Z$b)>>>9)^(this._state0U=Z$c),Z$k=(Z$b^=Z$k=Z$b<<23)^(this._state0L=Z$d);Z$j^=Z$a>>>18,Z$k^=Z$b>>>18|(262143&Z$a)<<14;return Z$j^=Z$c>>>5,Z$k^=Z$d>>>5|(31&Z$c)<<27,this._state1U=Z$j,this._state1L=Z$k,[Z$f,Z$i]},Z$a.random=function(){var Z$a=this.randomint(),Z$b=Z$a[0],Z$c=1023<<20|Z$b>>>12,Z$d=0|(Z$a[1]>>>12|(4095&Z$b)<<20);return Z$e._CONVERTION_BUFFER.setUint32(0,Z$c,!1),Z$e._CONVERTION_BUFFER.setUint32(4,Z$d,!1),Z$db._CONVERTION_BUFFER.getFloat64(0,!1)-1},Z$n(Z$e,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new Z$db([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function Z$a(Z$a,Z$b){this.origin=null,this.direction=null,this.origin=Z$a,this.direction=Z$b}return Z$p(Z$a,"laya.d3.math.Ray"),Z$a}()),Z$fb=function(){function Z$a(Z$a,Z$b){this.elements=new Float32Array(2),void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0);var Z$c=this.elements;Z$c[0]=Z$a,Z$c[1]=Z$b}Z$p(Z$a,"laya.d3.math.Vector2");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.fromArray=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0),this.elements[0]=Z$a[Z$b+0],this.elements[1]=Z$a[Z$b+1]},Z$b.cloneTo=function(Z$a){var Z$b=Z$a.elements,Z$c=this.elements;Z$b[0]=Z$c[0],Z$b[1]=Z$c[1]},Z$b.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$b,"x",function(){return this.elements[0]},function(Z$a){this.elements[0]=Z$a}),Z$q(0,Z$b,"y",function(){return this.elements[1]},function(Z$a){this.elements[1]=Z$a}),Z$a.scale=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements;Z$d[0]=Z$e[0]*Z$b,Z$d[1]=Z$e[1]*Z$b},Z$n(Z$a,["ZERO",function(){return this.ZERO=new Z$a(0,0)},"ONE",function(){return this.ONE=new Z$a(1,1)}]),Z$a}(),Z$ib=function(){function Z$m(Z$a,Z$b,Z$c){this.elements=new Float32Array(3),void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0);var Z$d=this.elements;Z$d[0]=Z$a,Z$d[1]=Z$b,Z$d[2]=Z$c}Z$p(Z$m,"laya.d3.math.Vector3");var Z$a=Z$m.prototype;return Z$x.imps(Z$a,{"laya.d3.core.IClone":!0}),Z$a.fromArray=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0),this.elements[0]=Z$a[Z$b+0],this.elements[1]=Z$a[Z$b+1],this.elements[2]=Z$a[Z$b+2]},Z$a.cloneTo=function(Z$a){var Z$b=Z$a.elements,Z$c=this.elements;Z$b[0]=Z$c[0],Z$b[1]=Z$c[1],Z$b[2]=Z$c[2]},Z$a.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$a.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},Z$a.reset=function(Z$a,Z$b,Z$c){this.elements[0]=Z$a,this.elements[1]=Z$b,this.elements[2]=Z$c},Z$q(0,Z$a,"x",function(){return this.elements[0]},function(Z$a){this.elements[0]=Z$a}),Z$q(0,Z$a,"y",function(){return this.elements[1]},function(Z$a){this.elements[1]=Z$a}),Z$q(0,Z$a,"z",function(){return this.elements[2]},function(Z$a){this.elements[2]=Z$a}),Z$m.distanceSquared=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements,Z$e=Z$c[0]-Z$d[0],Z$f=Z$c[1]-Z$d[1],Z$i=Z$c[2]-Z$d[2];return Z$e*Z$e+Z$f*Z$f+Z$i*Z$i},Z$m.distance=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements,Z$e=Z$c[0]-Z$d[0],Z$f=Z$c[1]-Z$d[1],Z$i=Z$c[2]-Z$d[2];return Math.sqrt(Z$e*Z$e+Z$f*Z$f+Z$i*Z$i)},Z$m.min=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Math.min(Z$e[0],Z$f[0]),Z$d[1]=Math.min(Z$e[1],Z$f[1]),Z$d[2]=Math.min(Z$e[2],Z$f[2])},Z$m.max=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Math.max(Z$e[0],Z$f[0]),Z$d[1]=Math.max(Z$e[1],Z$f[1]),Z$d[2]=Math.max(Z$e[2],Z$f[2])},Z$m.transformQuat=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements,Z$i=Z$e[0],Z$j=Z$e[1],Z$k=Z$e[2],Z$l=Z$f[0],Z$m=Z$f[1],Z$n=Z$f[2],Z$o=Z$f[3],Z$p=Z$o*Z$i+Z$m*Z$k-Z$n*Z$j,Z$q=Z$o*Z$j+Z$n*Z$i-Z$l*Z$k,Z$r=Z$o*Z$k+Z$l*Z$j-Z$m*Z$i,Z$s=-Z$l*Z$i-Z$m*Z$j-Z$n*Z$k;Z$d[0]=Z$p*Z$o+Z$s*-Z$l+Z$q*-Z$n-Z$r*-Z$m,Z$d[1]=Z$q*Z$o+Z$s*-Z$m+Z$r*-Z$l-Z$p*-Z$n,Z$d[2]=Z$r*Z$o+Z$s*-Z$n+Z$p*-Z$m-Z$q*-Z$l},Z$m.scalarLength=function(Z$a){var Z$b=Z$a.elements,Z$c=Z$b[0],Z$d=Z$b[1],Z$e=Z$b[2];return Math.sqrt(Z$c*Z$c+Z$d*Z$d+Z$e*Z$e)},Z$m.scalarLengthSquared=function(Z$a){var Z$b=Z$a.elements,Z$c=Z$b[0],Z$d=Z$b[1],Z$e=Z$b[2];return Z$c*Z$c+Z$d*Z$d+Z$e*Z$e},Z$m.normalize=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements,Z$e=Z$c[0],Z$f=Z$c[1],Z$i=Z$c[2],Z$j=Z$e*Z$e+Z$f*Z$f+Z$i*Z$i;0<Z$j&&(Z$j=1/Math.sqrt(Z$j),Z$d[0]=Z$c[0]*Z$j,Z$d[1]=Z$c[1]*Z$j,Z$d[2]=Z$c[2]*Z$j)},Z$m.multiply=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Z$e[0]*Z$f[0],Z$d[1]=Z$e[1]*Z$f[1],Z$d[2]=Z$e[2]*Z$f[2]},Z$m.scale=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements;Z$d[0]=Z$e[0]*Z$b,Z$d[1]=Z$e[1]*Z$b,Z$d[2]=Z$e[2]*Z$b},Z$m.lerp=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$d.elements,Z$f=Z$a.elements,Z$i=Z$b.elements,Z$j=Z$f[0],Z$k=Z$f[1],Z$l=Z$f[2];Z$e[0]=Z$j+Z$c*(Z$i[0]-Z$j),Z$e[1]=Z$k+Z$c*(Z$i[1]-Z$k),Z$e[2]=Z$l+Z$c*(Z$i[2]-Z$l)},Z$m.transformV3ToV3=function(Z$a,Z$b,Z$c){var Z$d=Z$m._tempVector4;Z$m.transformV3ToV4(Z$a,Z$b,Z$d);var Z$e=Z$d.elements,Z$f=Z$c.elements;Z$f[0]=Z$e[0],Z$f[1]=Z$e[1],Z$f[2]=Z$e[2]},Z$m.transformV3ToV4=function(Z$a,Z$b,Z$c){var Z$d=Z$a.elements,Z$e=Z$d[0],Z$f=Z$d[1],Z$i=Z$d[2],Z$j=Z$b.elements,Z$k=Z$c.elements;Z$k[0]=Z$e*Z$j[0]+Z$f*Z$j[4]+Z$i*Z$j[8]+Z$j[12],Z$k[1]=Z$e*Z$j[1]+Z$f*Z$j[5]+Z$i*Z$j[9]+Z$j[13],Z$k[2]=Z$e*Z$j[2]+Z$f*Z$j[6]+Z$i*Z$j[10]+Z$j[14],Z$k[3]=Z$e*Z$j[3]+Z$f*Z$j[7]+Z$i*Z$j[11]+Z$j[15]},Z$m.TransformNormal=function(Z$a,Z$b,Z$c){var Z$d=Z$a.elements,Z$e=Z$d[0],Z$f=Z$d[1],Z$i=Z$d[2],Z$j=Z$b.elements,Z$k=Z$c.elements;Z$k[0]=Z$e*Z$j[0]+Z$f*Z$j[4]+Z$i*Z$j[8],Z$k[1]=Z$e*Z$j[1]+Z$f*Z$j[5]+Z$i*Z$j[9],Z$k[2]=Z$e*Z$j[2]+Z$f*Z$j[6]+Z$i*Z$j[10]},Z$m.transformCoordinate=function(Z$a,Z$b,Z$c){var Z$d=Z$m._tempVector4.elements,Z$e=Z$a.elements,Z$f=Z$e[0],Z$i=Z$e[1],Z$j=Z$e[2],Z$k=Z$b.elements;Z$d[0]=Z$f*Z$k[0]+Z$i*Z$k[4]+Z$j*Z$k[8]+Z$k[12],Z$d[1]=Z$f*Z$k[1]+Z$i*Z$k[5]+Z$j*Z$k[9]+Z$k[13],Z$d[2]=Z$f*Z$k[2]+Z$i*Z$k[6]+Z$j*Z$k[10]+Z$k[14],Z$d[3]=1/(Z$f*Z$k[3]+Z$i*Z$k[7]+Z$j*Z$k[11]+Z$k[15]);var Z$l=Z$c.elements;Z$l[0]=Z$d[0]*Z$d[3],Z$l[1]=Z$d[1]*Z$d[3],Z$l[2]=Z$d[2]*Z$d[3]},Z$m.Clamp=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.elements,Z$f=Z$e[0],Z$i=Z$e[1],Z$j=Z$e[2],Z$k=Z$b.elements,Z$l=Z$k[0],Z$m=Z$k[1],Z$n=Z$k[2],Z$o=Z$c.elements,Z$p=Z$o[0],Z$q=Z$o[1],Z$r=Z$o[2],Z$s=Z$d.elements;Z$f=(Z$f=Z$p<Z$f?Z$p:Z$f)<Z$l?Z$l:Z$f,Z$i=(Z$i=Z$q<Z$i?Z$q:Z$i)<Z$m?Z$m:Z$i,Z$j=(Z$j=Z$r<Z$j?Z$r:Z$j)<Z$n?Z$n:Z$j,Z$s[0]=Z$f,Z$s[1]=Z$i,Z$s[2]=Z$j},Z$m.add=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Z$e[0]+Z$f[0],Z$d[1]=Z$e[1]+Z$f[1],Z$d[2]=Z$e[2]+Z$f[2]},Z$m.subtract=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Z$e[0]-Z$f[0],Z$d[1]=Z$e[1]-Z$f[1],Z$d[2]=Z$e[2]-Z$f[2]},Z$m.cross=function(Z$a,Z$b,Z$c){var Z$d=Z$a.elements,Z$e=Z$b.elements,Z$f=Z$c.elements,Z$i=Z$d[0],Z$j=Z$d[1],Z$k=Z$d[2],Z$l=Z$e[0],Z$m=Z$e[1],Z$n=Z$e[2];Z$f[0]=Z$j*Z$n-Z$k*Z$m,Z$f[1]=Z$k*Z$l-Z$i*Z$n,Z$f[2]=Z$i*Z$m-Z$j*Z$l},Z$m.dot=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements;return Z$c[0]*Z$d[0]+Z$c[1]*Z$d[1]+Z$c[2]*Z$d[2]},Z$m.equals=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements;return Z$ga.nearEqual(Math.abs(Z$c[0]),Math.abs(Z$d[0]))&&Z$ga.nearEqual(Math.abs(Z$c[1]),Math.abs(Z$d[1]))&&Z$ga.nearEqual(Math.abs(Z$c[2]),Math.abs(Z$d[2]))},Z$m.ZERO=new Z$m(0,0,0),Z$m.ONE=new Z$m(1,1,1),Z$m.NegativeUnitX=new Z$m(-1,0,0),Z$m.UnitX=new Z$m(1,0,0),Z$m.UnitY=new Z$m(0,1,0),Z$m.UnitZ=new Z$m(0,0,1),Z$m.ForwardRH=new Z$m(0,0,-1),Z$m.ForwardLH=new Z$m(0,0,1),Z$m.Up=new Z$m(0,1,0),Z$m.NAN=new Z$m(NaN,NaN,NaN),Z$n(Z$m,["_tempVector4",function(){return this._tempVector4=new Z$jb}]),Z$m}(),Z$jb=function(){function Z$a(Z$a,Z$b,Z$c,Z$d){this.elements=new Float32Array(4),void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=0);var Z$e=this.elements;Z$e[0]=Z$a,Z$e[1]=Z$b,Z$e[2]=Z$c,Z$e[3]=Z$d}Z$p(Z$a,"laya.d3.math.Vector4");var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b.fromArray=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0),this.elements[0]=Z$a[Z$b+0],this.elements[1]=Z$a[Z$b+1],this.elements[2]=Z$a[Z$b+2],this.elements[3]=Z$a[Z$b+3]},Z$b.cloneTo=function(Z$a){var Z$b=Z$a.elements,Z$c=this.elements;Z$b[0]=Z$c[0],Z$b[1]=Z$c[1],Z$b[2]=Z$c[2],Z$b[3]=Z$c[3]},Z$b.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$b.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},Z$b.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},Z$q(0,Z$b,"x",function(){return this.elements[0]},function(Z$a){this.elements[0]=Z$a}),Z$q(0,Z$b,"y",function(){return this.elements[1]},function(Z$a){this.elements[1]=Z$a}),Z$q(0,Z$b,"z",function(){return this.elements[2]},function(Z$a){this.elements[2]=Z$a}),Z$q(0,Z$b,"w",function(){return this.elements[3]},function(Z$a){this.elements[3]=Z$a}),Z$a.lerp=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$d.elements,Z$f=Z$a.elements,Z$i=Z$b.elements,Z$j=Z$f[0],Z$k=Z$f[1],Z$l=Z$f[2],Z$m=Z$f[3];Z$e[0]=Z$j+Z$c*(Z$i[0]-Z$j),Z$e[1]=Z$k+Z$c*(Z$i[1]-Z$k),Z$e[2]=Z$l+Z$c*(Z$i[2]-Z$l),Z$e[3]=Z$m+Z$c*(Z$i[3]-Z$m)},Z$a.transformByM4x4=function(Z$a,Z$b,Z$c){var Z$d=Z$a.elements,Z$e=Z$d[0],Z$f=Z$d[1],Z$i=Z$d[2],Z$j=Z$d[3],Z$k=Z$b.elements,Z$l=Z$c.elements;Z$l[0]=Z$e*Z$k[0]+Z$f*Z$k[4]+Z$i*Z$k[8]+Z$j*Z$k[12],Z$l[1]=Z$e*Z$k[1]+Z$f*Z$k[5]+Z$i*Z$k[9]+Z$j*Z$k[13],Z$l[2]=Z$e*Z$k[2]+Z$f*Z$k[6]+Z$i*Z$k[10]+Z$j*Z$k[14],Z$l[3]=Z$e*Z$k[3]+Z$f*Z$k[7]+Z$i*Z$k[11]+Z$j*Z$k[15]},Z$a.equals=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements;return Z$ga.nearEqual(Math.abs(Z$c[0]),Math.abs(Z$d[0]))&&Z$ga.nearEqual(Math.abs(Z$c[1]),Math.abs(Z$d[1]))&&Z$ga.nearEqual(Math.abs(Z$c[2]),Math.abs(Z$d[2]))&&Z$ga.nearEqual(Math.abs(Z$c[3]),Math.abs(Z$d[3]))},Z$a.normalize=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements,Z$e=Z$a.length();0<Z$e&&(Z$d[0]=Z$c[0]*Z$e,Z$d[1]=Z$c[1]*Z$e,Z$d[2]=Z$c[2]*Z$e,Z$d[3]=Z$c[3]*Z$e)},Z$a.add=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Z$e[0]+Z$f[0],Z$d[1]=Z$e[1]+Z$f[1],Z$d[2]=Z$e[2]+Z$f[2],Z$d[3]=Z$e[3]+Z$f[3]},Z$a.subtract=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Z$e[0]-Z$f[0],Z$d[1]=Z$e[1]-Z$f[1],Z$d[2]=Z$e[2]-Z$f[2],Z$d[3]=Z$e[3]-Z$f[3]},Z$a.multiply=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Z$e[0]*Z$f[0],Z$d[1]=Z$e[1]*Z$f[1],Z$d[2]=Z$e[2]*Z$f[2],Z$d[3]=Z$e[3]*Z$f[3]},Z$a.scale=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements;Z$d[0]=Z$e[0]*Z$b,Z$d[1]=Z$e[1]*Z$b,Z$d[2]=Z$e[2]*Z$b,Z$d[3]=Z$e[3]*Z$b},Z$a.Clamp=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.elements,Z$f=Z$e[0],Z$i=Z$e[1],Z$j=Z$e[2],Z$k=Z$e[3],Z$l=Z$b.elements,Z$m=Z$l[0],Z$n=Z$l[1],Z$o=Z$l[2],Z$p=Z$l[3],Z$q=Z$c.elements,Z$r=Z$q[0],Z$s=Z$q[1],Z$t=Z$q[2],Z$u=Z$q[3],Z$v=Z$d.elements;Z$f=(Z$f=Z$r<Z$f?Z$r:Z$f)<Z$m?Z$m:Z$f,Z$i=(Z$i=Z$s<Z$i?Z$s:Z$i)<Z$n?Z$n:Z$i,Z$j=(Z$j=Z$t<Z$j?Z$t:Z$j)<Z$o?Z$o:Z$j,Z$k=(Z$k=Z$u<Z$k?Z$u:Z$k)<Z$p?Z$p:Z$k,Z$v[0]=Z$f,Z$v[1]=Z$i,Z$v[2]=Z$j,Z$v[3]=Z$k},Z$a.distanceSquared=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements,Z$e=Z$c[0]-Z$d[0],Z$f=Z$c[1]-Z$d[1],Z$i=Z$c[2]-Z$d[2],Z$j=Z$c[3]-Z$d[3];return Z$e*Z$e+Z$f*Z$f+Z$i*Z$i+Z$j*Z$j},Z$a.distance=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements,Z$e=Z$c[0]-Z$d[0],Z$f=Z$c[1]-Z$d[1],Z$i=Z$c[2]-Z$d[2],Z$j=Z$c[3]-Z$d[3];return Math.sqrt(Z$e*Z$e+Z$f*Z$f+Z$i*Z$i+Z$j*Z$j)},Z$a.dot=function(Z$a,Z$b){var Z$c=Z$a.elements,Z$d=Z$b.elements;return Z$c[0]*Z$d[0]+Z$c[1]*Z$d[1]+Z$c[2]*Z$d[2]+Z$c[3]*Z$d[3]},Z$a.min=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Math.min(Z$e[0],Z$f[0]),Z$d[1]=Math.min(Z$e[1],Z$f[1]),Z$d[2]=Math.min(Z$e[2],Z$f[2]),Z$d[3]=Math.min(Z$e[3],Z$f[3])},Z$a.max=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b.elements;Z$d[0]=Math.max(Z$e[0],Z$f[0]),Z$d[1]=Math.max(Z$e[1],Z$f[1]),Z$d[2]=Math.max(Z$e[2],Z$f[2]),Z$d[3]=Math.max(Z$e[3],Z$f[3])},Z$n(Z$a,["ZERO",function(){return this.ZERO=new Z$a},"ONE",function(){return this.ONE=new Z$a(1,1,1,1)},"UnitX",function(){return this.UnitX=new Z$a(1,0,0,0)},"UnitY",function(){return this.UnitY=new Z$a(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new Z$a(0,0,1,0)},"UnitW",function(){return this.UnitW=new Z$a(0,0,0,1)}]),Z$a}(),Z$kb=function(){function Z$f(Z$a,Z$b,Z$c,Z$d){this.minDepth=0,this.maxDepth=1,this.x=Z$a,this.y=Z$b,this.width=Z$c,this.height=Z$d}Z$p(Z$f,"laya.d3.math.Viewport");var Z$a=Z$f.prototype;return Z$a.project=function(Z$a,Z$b,Z$c){Z$ib.transformV3ToV3(Z$a,Z$b,Z$c);var Z$d=Z$a.elements,Z$e=Z$b.elements,Z$f=Z$c.elements,Z$i=Z$d[0]*Z$e[3]+Z$d[1]*Z$e[7]+Z$d[2]*Z$e[11]+Z$e[15];1!==Z$i&&(Z$f[0]=Z$f[0]/Z$i,Z$f[1]=Z$f[1]/Z$i,Z$f[2]=Z$f[2]/Z$i),Z$f[0]=.5*(Z$f[0]+1)*this.width+this.x,Z$f[1]=.5*(1-Z$f[1])*this.height+this.y,Z$f[2]=Z$f[2]*(this.maxDepth-this.minDepth)+this.minDepth},Z$a.unprojectFromMat=function(Z$a,Z$b,Z$c){var Z$d=Z$a.elements,Z$e=Z$b.elements,Z$f=Z$c.elements;Z$f[0]=(Z$d[0]-this.x)/this.width*2-1,Z$f[1]=-((Z$d[1]-this.y)/this.height*2-1);var Z$i=(this.maxDepth-this.minDepth)/2;Z$f[2]=(Z$d[2]-this.minDepth-Z$i)/Z$i;var Z$j=Z$f[0]*Z$e[3]+Z$f[1]*Z$e[7]+Z$f[2]*Z$e[11]+Z$e[15];Z$ib.transformV3ToV3(Z$c,Z$b,Z$c),1!==Z$j&&(Z$f[0]=Z$f[0]/Z$j,Z$f[1]=Z$f[1]/Z$j,Z$f[2]=Z$f[2]/Z$j)},Z$a.unprojectFromWVP=function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$ab.multiply(Z$b,Z$c,Z$f._tempMatrix4x4),Z$d&&Z$ab.multiply(Z$f._tempMatrix4x4,Z$d,Z$f._tempMatrix4x4),Z$f._tempMatrix4x4.invert(Z$f._tempMatrix4x4),this.unprojectFromMat(Z$a,Z$f._tempMatrix4x4,Z$e)},Z$n(Z$f,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new Z$ab}]),Z$f}(),Z$lb=function(){function Z$E(Z$a){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=Z$a,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}Z$p(Z$E,"laya.d3.resource.models.SubMesh");var Z$a=Z$E.prototype;return Z$x.imps(Z$a,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),Z$a._getVertexBuffer=function(Z$a){return void 0===Z$a&&(Z$a=0),0===Z$a?this._vertexBuffer:null},Z$a._getIndexBuffer=function(){return this._indexBuffer},Z$a._getStaticBatchBakedVertexs=function(Z$a,Z$b){var Z$c,Z$d,Z$e=this._vertexBuffer,Z$f=Z$e.vertexDeclaration,Z$i=Z$f.getVertexElementByUsage(0).offset/4,Z$j=Z$f.getVertexElementByUsage(3).offset/4,Z$k=Z$b.meshRender.lightmapScaleOffset,Z$l=0,Z$m=0,Z$n=0,Z$o=0,Z$p=0,Z$q=0;if(Z$k)if(Z$d=Z$f.getVertexElementByUsage(15))Z$n=Z$f.vertexStride/4,Z$c=0<this._vertexCount?Z$e.getData().slice(this._vertexStart*Z$n,(this._vertexStart+this._vertexCount)*Z$n):Z$e.getData().slice(),Z$o=Z$d.offset/4;else{Z$n=(Z$q=Z$f.vertexStride/4)+2,Z$c=this._vertexCount?new Float32Array(this._vertexCount*(Z$e.vertexDeclaration.vertexStride/4+2)):new Float32Array(Z$e.vertexCount*(Z$e.vertexDeclaration.vertexStride/4+2)),Z$o=(Z$p=Z$f.getVertexElementByUsage(2).offset/4)+2;var Z$r=Z$e.getData();for(Z$l=0,Z$m=Z$r.length/Z$q;Z$l<Z$m;Z$l++){var Z$s=0;Z$s=0<this._vertexCount?(this._vertexStart+Z$l)*Z$q:Z$l*Z$q;var Z$t=Z$l*Z$n,Z$u=0;for(Z$u=0;Z$u<Z$o;Z$u++)Z$c[Z$t+Z$u]=Z$r[Z$s+Z$u];for(Z$u=Z$o;Z$u<Z$q;Z$u++)Z$c[Z$t+Z$u+2]=Z$r[Z$s+Z$u]}}else Z$n=Z$f.vertexStride/4,Z$c=this._vertexCount?Z$e.getData().slice(this._vertexStart*Z$n,(this._vertexStart+this._vertexCount)*Z$n):Z$e.getData().slice();if(Z$a){var Z$v=Z$a.worldMatrix,Z$w=Z$E._tempMatrix4x40;Z$v.invert(Z$w);var Z$x=Z$E._tempMatrix4x41,Z$y=Z$b.transform.worldMatrix;Z$ab.multiply(Z$w,Z$y,Z$x)}else Z$x=Z$b.transform.worldMatrix;var Z$z=Z$E._tempQuaternion0;for(Z$x.decomposeTransRotScale(Z$E._tempVector30,Z$z,Z$E._tempVector31),Z$l=0,Z$m=Z$c.length/Z$n;Z$l<Z$m;Z$l++){var Z$A=Z$l*Z$n+Z$i,Z$B=Z$l*Z$n+Z$j;if(Z$sb.transformVector3ArrayToVector3ArrayCoordinate(Z$c,Z$A,Z$x,Z$c,Z$A),Z$sb.transformVector3ArrayByQuat(Z$c,Z$B,Z$z,Z$c,Z$B),Z$k){var Z$C=Z$l*Z$n+Z$o;if(Z$d)Z$sb.transformLightingMapTexcoordByUV1Array(Z$c,Z$C,Z$k,Z$c,Z$C);else{var Z$D=Z$l*Z$q+Z$p;Z$sb.transformLightingMapTexcoordByUV0Array(Z$r,Z$D,Z$k,Z$c,Z$C)}}}return Z$c},Z$a._getVertexBuffers=function(){return null},Z$a._beforeRender=function(Z$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},Z$a._render=function(Z$a){var Z$b,Z$c=0,Z$d=Z$a.renderElement;if(1<this._indexCount){var Z$e=this._boneIndicesList.length;if(1<Z$e){for(var Z$f=0;Z$f<Z$e;Z$f++)(Z$b=Z$d._skinAnimationDatas||this._skinAnimationDatas)&&(Z$d._shaderValue.setValue(0,Z$b[Z$f]),Z$a._shader.uploadRenderElementUniforms(Z$d._shaderValue.data)),Z$F.mainContext.drawElements(4,this._subIndexBufferCount[Z$f],5123,2*this._subIndexBufferStart[Z$f]);Z$A.drawCall+=Z$e}else(Z$b=Z$d._skinAnimationDatas||this._skinAnimationDatas)&&(Z$d._shaderValue.setValue(0,Z$b[0]),Z$a._shader.uploadRenderElementUniforms(Z$d._shaderValue.data)),Z$F.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),Z$A.drawCall++;Z$c=this._indexCount}else Z$c=this._indexBuffer.indexCount,(Z$b=Z$d._skinAnimationDatas||this._skinAnimationDatas)&&(Z$d._shaderValue.setValue(0,Z$b[0]),Z$a._shader.uploadRenderElementUniforms(Z$d._shaderValue.data)),Z$F.mainContext.drawElements(4,Z$c,5123,0),Z$A.drawCall++;Z$A.trianglesFaces+=Z$c/3},Z$a.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},Z$a.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},Z$q(0,Z$a,"_vertexBufferCount",function(){return 1}),Z$q(0,Z$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),Z$n(Z$E,["_tempVector30",function(){return this._tempVector30=new Z$ib},"_tempVector31",function(){return this._tempVector31=new Z$ib},"_tempQuaternion0",function(){return this._tempQuaternion0=new Z$cb},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new Z$ab},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new Z$ab}]),Z$E}(),Z$mb=function(){function Z$a(Z$a){this.defineCounter=0,this.defines=null,Z$a?(this.defineCounter=Z$a.defineCounter,this.defines=Z$a.defines.slice()):(this.defineCounter=0,this.defines=[])}return Z$p(Z$a,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),Z$a.prototype.registerDefine=function(Z$a){var Z$b=Math.pow(2,this.defineCounter++);return this.defines[Z$b]=Z$a,Z$b},Z$a}(),Z$nb=function(){function Z$a(){}return Z$p(Z$a,"laya.d3.shader.ShaderInit3D"),Z$a.__init__=function(){var Z$a,Z$b;Z$Ab._globalRegDefine("HIGHPRECISION",Z$Ab.SHADERDEFINE_HIGHPRECISION),Z$Ab._globalRegDefine("FOG",Z$Ab.SHADERDEFINE_FOG),Z$Ab._globalRegDefine("DIRECTIONLIGHT",Z$Ab.SHADERDEFINE_DIRECTIONLIGHT),Z$Ab._globalRegDefine("POINTLIGHT",Z$Ab.SHADERDEFINE_POINTLIGHT),Z$Ab._globalRegDefine("SPOTLIGHT",Z$Ab.SHADERDEFINE_SPOTLIGHT),Z$Ab._globalRegDefine("UV",Z$Ab.SHADERDEFINE_UV0),Z$Ab._globalRegDefine("COLOR",Z$Ab.SHADERDEFINE_COLOR),Z$Ab._globalRegDefine("UV1",Z$Ab.SHADERDEFINE_UV1),Z$Ab._globalRegDefine("CASTSHADOW",Z$pb.SHADERDEFINE_CAST_SHADOW),Z$Ab._globalRegDefine("SHADOWMAP_PSSM1",Z$pb.SHADERDEFINE_SHADOW_PSSM1),Z$Ab._globalRegDefine("SHADOWMAP_PSSM2",Z$pb.SHADERDEFINE_SHADOW_PSSM2),Z$Ab._globalRegDefine("SHADOWMAP_PSSM3",Z$pb.SHADERDEFINE_SHADOW_PSSM3),Z$Ab._globalRegDefine("SHADOWMAP_PCF_NO",Z$pb.SHADERDEFINE_SHADOW_PCF_NO),Z$Ab._globalRegDefine("SHADOWMAP_PCF1",Z$pb.SHADERDEFINE_SHADOW_PCF1),Z$Ab._globalRegDefine("SHADOWMAP_PCF2",Z$pb.SHADERDEFINE_SHADOW_PCF2),Z$Ab._globalRegDefine("SHADOWMAP_PCF3",Z$pb.SHADERDEFINE_SHADOW_PCF3),Z$Ab._globalRegDefine("DEPTHFOG",Z$Ab.SAHDERDEFINE_DEPTHFOG),Z$Lb.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),Z$Lb.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),Z$a={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},Z$b={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var Z$c=Z$Lb.nameKey.add("SIMPLE");shaderCompile=Z$Ab.add(Z$c,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',Z$a,Z$b),Z$Mb.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),Z$Mb.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),Z$Mb.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),Z$Mb.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),Z$Mb.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),Z$Mb.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),Z$Mb.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),Z$Mb.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),Z$Mb.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},Z$a}(),Z$ob=function(){function Z$a(){this._data=null,this._data=[]}Z$p(Z$a,"laya.d3.shader.ValusArray");var Z$b=Z$a.prototype;return Z$b.setValue=function(Z$a,Z$b){this._data[Z$a]=Z$b},Z$q(0,Z$b,"data",function(){return this._data}),Z$a}(),Z$pb=function(){function Z$a(){}return Z$a.SHADERDEFINE_RECEIVE_SHADOW=1,Z$a.SHADERDEFINE_CAST_SHADOW=512,Z$a.SHADERDEFINE_SHADOW_PSSM1=1024,Z$a.SHADERDEFINE_SHADOW_PSSM2=2048,Z$a.SHADERDEFINE_SHADOW_PSSM3=4096,Z$a.SHADERDEFINE_SHADOW_PCF_NO=8192,Z$a.SHADERDEFINE_SHADOW_PCF1=16384,Z$a.SHADERDEFINE_SHADOW_PCF2=32768,Z$a.SHADERDEFINE_SHADOW_PCF3=65536,Z$a.MAX_PSSM_COUNT=3,Z$a}(),Z$qb=function(){function Z$X(){}return Z$p(Z$X,"laya.d3.utils.Picker"),Z$X.calculateCursorRay=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=Z$a.elements[0],Z$j=Z$a.elements[1],Z$k=Z$X._tempVector30,Z$l=Z$k.elements;Z$l[0]=Z$i,Z$l[1]=Z$j,Z$l[2]=Z$b.minDepth;var Z$m=Z$X._tempVector31,Z$n=Z$m.elements;Z$n[0]=Z$i,Z$n[1]=Z$j,Z$n[2]=Z$b.maxDepth;var Z$o=Z$f.origin,Z$p=Z$X._tempVector32;Z$b.unprojectFromWVP(Z$k,Z$c,Z$d,Z$e,Z$o),Z$b.unprojectFromWVP(Z$m,Z$c,Z$d,Z$e,Z$p);var Z$q=Z$f.direction.elements;Z$q[0]=Z$p.x-Z$o.x,Z$q[1]=Z$p.y-Z$o.y,Z$q[2]=Z$p.z-Z$o.z,Z$ib.normalize(Z$f.direction,Z$f.direction)},Z$X.rayIntersectsPositionsAndIndices=function(Z$a,Z$b,Z$c,Z$d,Z$e){for(var Z$f=Z$c.vertexStride/4,Z$i=Z$c.getVertexElementByUsage(0).offset/4,Z$j=Number.MAX_VALUE,Z$k=-1,Z$l=-1,Z$m=-1,Z$n=0;Z$n<Z$d.length;Z$n+=3){var Z$o=Z$X._tempVector35,Z$p=Z$o.elements,Z$q=Z$d[Z$n]*Z$f,Z$r=Z$q+Z$i;Z$p[0]=Z$b[Z$r],Z$p[1]=Z$b[1+Z$r],Z$p[2]=Z$b[2+Z$r];var Z$s=Z$X._tempVector36,Z$t=Z$s.elements,Z$u=Z$d[Z$n+1]*Z$f,Z$v=Z$u+Z$i;Z$t[0]=Z$b[Z$v],Z$t[1]=Z$b[1+Z$v],Z$t[2]=Z$b[2+Z$v];var Z$w=Z$X._tempVector37,Z$x=Z$w.elements,Z$y=Z$d[Z$n+2]*Z$f,Z$z=Z$y+Z$i;Z$x[0]=Z$b[Z$z],Z$x[1]=Z$b[1+Z$z],Z$x[2]=Z$b[2+Z$z];var Z$A=laya.d3.utils.Picker.rayIntersectsTriangle(Z$a,Z$o,Z$s,Z$w);!isNaN(Z$A)&&Z$A<Z$j&&(Z$j=Z$A,Z$k=Z$q,Z$l=Z$u,Z$m=Z$y)}if(Z$j===Number.MAX_VALUE)return Z$e.position.toDefault(),Z$e.distance=Number.MAX_VALUE,Z$e.trianglePositions[0].toDefault(),Z$e.trianglePositions[1].toDefault(),Z$e.trianglePositions[2].toDefault(),Z$e.triangleNormals[0].toDefault(),Z$e.triangleNormals[1].toDefault(),Z$e.triangleNormals[2].toDefault(),!1;Z$e.distance=Z$j,Z$ib.scale(Z$a.direction,Z$j,Z$e.position),Z$ib.add(Z$a.origin,Z$e.position,Z$e.position);var Z$B=Z$e.trianglePositions,Z$C=Z$B[0],Z$D=Z$B[1],Z$E=Z$B[2],Z$F=Z$C.elements,Z$G=Z$D.elements,Z$H=Z$E.elements,Z$I=Z$k+Z$i;Z$F[0]=Z$b[Z$I],Z$F[1]=Z$b[Z$I+1],Z$F[2]=Z$b[Z$I+2];var Z$J=Z$l+Z$i;Z$G[0]=Z$b[Z$J],Z$G[1]=Z$b[Z$J+1],Z$G[2]=Z$b[Z$J+2];var Z$K=Z$m+Z$i;Z$H[0]=Z$b[Z$K],Z$H[1]=Z$b[Z$K+1],Z$H[2]=Z$b[Z$K+2];var Z$L=Z$c.getVertexElementByUsage(3);if(Z$L){var Z$M=Z$L.offset/4,Z$N=Z$e.triangleNormals,Z$O=Z$N[0],Z$P=Z$N[1],Z$Q=Z$N[2],Z$R=Z$O.elements,Z$S=Z$P.elements,Z$T=Z$Q.elements,Z$U=Z$k+Z$M;Z$R[0]=Z$b[Z$U],Z$R[1]=Z$b[Z$U+1],Z$R[2]=Z$b[Z$U+2];var Z$V=Z$l+Z$M;Z$S[0]=Z$b[Z$V],Z$S[1]=Z$b[Z$V+1],Z$S[2]=Z$b[Z$V+2];var Z$W=Z$m+Z$M;Z$T[0]=Z$b[Z$W],Z$T[1]=Z$b[Z$W+1],Z$T[2]=Z$b[Z$W+2]}return!0},Z$X.rayIntersectsTriangle=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$X._tempVector30,Z$f=Z$X._tempVector31;Z$ib.subtract(Z$c,Z$b,Z$e),Z$ib.subtract(Z$d,Z$b,Z$f);var Z$i,Z$j=Z$X._tempVector32;if(Z$ib.cross(Z$a.direction,Z$f,Z$j),(Z$i=Z$ib.dot(Z$e,Z$j))>-Number.MIN_VALUE&&Z$i<Number.MIN_VALUE)return Number.NaN;var Z$k,Z$l=1/Z$i,Z$m=Z$X._tempVector33;if(Z$ib.subtract(Z$a.origin,Z$b,Z$m),Z$k=Z$ib.dot(Z$m,Z$j),(Z$k*=Z$l)<0||1<Z$k)return Number.NaN;var Z$n,Z$o,Z$p=Z$X._tempVector34;return Z$ib.cross(Z$m,Z$e,Z$p),Z$n=Z$ib.dot(Z$a.direction,Z$p),(Z$n*=Z$l)<0||1<Z$k+Z$n?Number.NaN:(Z$o=Z$ib.dot(Z$f,Z$p),(Z$o*=Z$l)<0?Number.NaN:Z$o)},Z$n(Z$X,["_tempVector30",function(){return this._tempVector30=new Z$ib},"_tempVector31",function(){return this._tempVector31=new Z$ib},"_tempVector32",function(){return this._tempVector32=new Z$ib},"_tempVector33",function(){return this._tempVector33=new Z$ib},"_tempVector34",function(){return this._tempVector34=new Z$ib},"_tempVector35",function(){return this._tempVector35=new Z$ib},"_tempVector36",function(){return this._tempVector36=new Z$ib},"_tempVector37",function(){return this._tempVector37=new Z$ib}]),Z$X}(),Z$rb=(function(){function Z$a(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new Z$ib,new Z$ib,new Z$ib],this.trianglePositions.length=3,this.triangleNormals=[new Z$ib,new Z$ib,new Z$ib],this.triangleNormals.length=3,this.position=new Z$ib}Z$p(Z$a,"laya.d3.utils.RaycastHit"),Z$a.prototype.cloneTo=function(Z$a){Z$a.distance=this.distance,this.trianglePositions[0].cloneTo(Z$a.trianglePositions[0]),this.trianglePositions[1].cloneTo(Z$a.trianglePositions[1]),this.trianglePositions[2].cloneTo(Z$a.trianglePositions[2]),this.triangleNormals[0].cloneTo(Z$a.triangleNormals[0]),this.triangleNormals[1].cloneTo(Z$a.triangleNormals[1]),this.triangleNormals[2].cloneTo(Z$a.triangleNormals[2]),this.position.cloneTo(Z$a.position),Z$a.sprite3D=this.sprite3D}}(),function(){function Z$a(Z$a,Z$b){this._width=0,this._height=0,this._width=Z$a,this._height=Z$b}Z$p(Z$a,"laya.d3.utils.Size");var Z$b=Z$a.prototype;return Z$q(0,Z$b,"width",function(){return-1===this._width?Z$Y.clientWidth:this._width}),Z$q(0,Z$b,"height",function(){return-1===this._height?Z$Y.clientHeight:this._height}),Z$q(1,Z$a,"fullScreen",function(){return new Z$a(-1,-1)}),Z$a}()),Z$sb=function(){function Z$I(){}return Z$p(Z$I,"laya.d3.utils.Utils3D"),Z$I._rotationTransformScaleSkinAnimation=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$n){var Z$o,Z$p,Z$q,Z$r,Z$s,Z$t=Z$I._tempArray16_0,Z$u=Z$I._tempArray16_1,Z$v=Z$I._tempArray16_2,Z$w=Z$d+Z$d,Z$x=Z$e+Z$e,Z$y=Z$f+Z$f,Z$z=Z$d*Z$w,Z$A=Z$e*Z$w,Z$B=Z$e*Z$x,Z$C=Z$f*Z$w,Z$D=Z$f*Z$x,Z$E=Z$f*Z$y,Z$F=Z$i*Z$w,Z$G=Z$i*Z$x,Z$H=Z$i*Z$y;for(Z$t[15]=1,Z$t[0]=1-Z$B-Z$E,Z$t[1]=Z$A+Z$H,Z$t[2]=Z$C-Z$G,Z$t[4]=Z$A-Z$H,Z$t[5]=1-Z$z-Z$E,Z$t[6]=Z$D+Z$F,Z$t[8]=Z$C+Z$G,Z$t[9]=Z$D-Z$F,Z$t[10]=1-Z$z-Z$B,Z$u[15]=1,Z$u[0]=Z$j,Z$u[5]=Z$k,Z$u[10]=Z$l,Z$o=0;Z$o<4;Z$o++)Z$p=Z$t[Z$o],Z$q=Z$t[Z$o+4],Z$r=Z$t[Z$o+8],Z$s=Z$t[Z$o+12],Z$v[Z$o]=Z$p,Z$v[Z$o+4]=Z$q,Z$v[Z$o+8]=Z$r,Z$v[Z$o+12]=Z$p*Z$a+Z$q*Z$b+Z$r*Z$c+Z$s;for(Z$o=0;Z$o<4;Z$o++)Z$p=Z$v[Z$o],Z$q=Z$v[Z$o+4],Z$r=Z$v[Z$o+8],Z$s=Z$v[Z$o+12],Z$m[Z$o+Z$n]=Z$p*Z$u[0]+Z$q*Z$u[1]+Z$r*Z$u[2]+Z$s*Z$u[3],Z$m[Z$o+Z$n+4]=Z$p*Z$u[4]+Z$q*Z$u[5]+Z$r*Z$u[6]+Z$s*Z$u[7],Z$m[Z$o+Z$n+8]=Z$p*Z$u[8]+Z$q*Z$u[9]+Z$r*Z$u[10]+Z$s*Z$u[11],Z$m[Z$o+Z$n+12]=Z$p*Z$u[12]+Z$q*Z$u[13]+Z$r*Z$u[14]+Z$s*Z$u[15]},Z$I._createNodeByJson=function(Z$a,Z$b,Z$c,Z$d){if(!Z$c)switch(Z$b.type){case"Sprite3D":Z$c=new Z$Kb;break;case"MeshSprite3D":Z$c=new Z$Xb;break;case"SkinnedMeshSprite3D":Z$c=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":Z$c=new ShuriKenParticle3D;break;case"TrailSprite3D":Z$c=new TrailSprite3D;break;case"Terrain":Z$c=new Terrain;break;case"Camera":Z$c=new Z$Wb;break;case"DirectionLight":Z$c=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var Z$e=Z$b.props;if(Z$e)for(var Z$f in Z$e)Z$c[Z$f]=Z$e[Z$f];var Z$i=Z$b.customProps;Z$i&&(Z$c instanceof laya.d3.core.Sprite3D?(Z$c._parseBaseCustomProps(Z$i),Z$c._parseCustomProps(Z$a,Z$d,Z$i,Z$b),Z$c._parseCustomComponent(Z$a,Z$d,Z$b.components)):Z$c._parseCustomProps(Z$a,Z$d,Z$i,Z$b));var Z$j=Z$b.child;if(Z$j)for(var Z$k=0,Z$l=Z$j.length;Z$k<Z$l;Z$k++){var Z$m=Z$I._createNodeByJson(Z$a,Z$j[Z$k],null,Z$d);Z$c.addChild(Z$m)}return Z$c},Z$I._computeBoneAndAnimationDatasByBindPoseMatrxix=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i,Z$j,Z$k=0,Z$l=0,Z$m=Z$a.length;for(Z$i=0;Z$i<Z$m;Z$k+=Z$a[Z$i].keyframeWidth,Z$l+=16,Z$i++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(Z$b[Z$k+0],Z$b[Z$k+1],Z$b[Z$k+2],Z$b[Z$k+3],Z$b[Z$k+4],Z$b[Z$k+5],Z$b[Z$k+6],Z$b[Z$k+7],Z$b[Z$k+8],Z$b[Z$k+9],Z$d,Z$l),0!=Z$i&&(Z$j=16*Z$a[Z$i].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(Z$d,Z$j,Z$d,Z$l,Z$d,Z$l));var Z$n=Z$c.length;for(Z$i=0;Z$i<Z$n;Z$i++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(Z$d,16*Z$f[Z$i],Z$c[Z$i],Z$e,16*Z$i)},Z$I._computeAnimationDatasByArrayAndMatrixFast=function(Z$a,Z$b,Z$c,Z$d){for(var Z$e=0,Z$f=Z$a.length;Z$e<Z$f;Z$e++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(Z$b,16*Z$d[Z$e],Z$a[Z$e],Z$c,16*Z$e)},Z$I._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f,Z$i,Z$j=0,Z$k=0,Z$l=Z$a.length;for(Z$f=0;Z$f<Z$l;Z$j+=Z$a[Z$f].keyframeWidth,Z$k+=16,Z$f++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(Z$b[Z$j+7],Z$b[Z$j+8],Z$b[Z$j+9],Z$b[Z$j+3],Z$b[Z$j+4],Z$b[Z$j+5],Z$b[Z$j+6],Z$b[Z$j+0],Z$b[Z$j+1],Z$b[Z$j+2],Z$d,Z$k),0!=Z$f&&(Z$i=16*Z$a[Z$f].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(Z$d,Z$i,Z$d,Z$k,Z$d,Z$k));var Z$m=Z$c.length;for(Z$f=0;Z$f<Z$m;Z$f++){var Z$n=16*Z$f;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(Z$d,Z$n,Z$c[Z$f],Z$e,Z$n)}},Z$I._computeAnimationDatasByArrayAndMatrixFastOld=function(Z$a,Z$b,Z$c){for(var Z$d=Z$a.length,Z$e=0;Z$e<Z$d;Z$e++){var Z$f=16*Z$e;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(Z$b,Z$f,Z$a[Z$e],Z$c,Z$f)}},Z$I._computeRootAnimationData=function(Z$a,Z$b,Z$c){for(var Z$d=0,Z$e=0,Z$f=0,Z$i=Z$a.length;Z$d<Z$i;Z$e+=Z$a[Z$d].keyframeWidth,Z$f+=16,Z$d++)laya.d3.utils.Utils3D.createAffineTransformationArray(Z$b[Z$e+0],Z$b[Z$e+1],Z$b[Z$e+2],Z$b[Z$e+3],Z$b[Z$e+4],Z$b[Z$e+5],Z$b[Z$e+6],Z$b[Z$e+7],Z$b[Z$e+8],Z$b[Z$e+9],Z$c,Z$f)},Z$I.transformVector3ArrayByQuat=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$c.elements,Z$i=Z$a[Z$b],Z$j=Z$a[Z$b+1],Z$k=Z$a[Z$b+2],Z$l=Z$f[0],Z$m=Z$f[1],Z$n=Z$f[2],Z$o=Z$f[3],Z$p=Z$o*Z$i+Z$m*Z$k-Z$n*Z$j,Z$q=Z$o*Z$j+Z$n*Z$i-Z$l*Z$k,Z$r=Z$o*Z$k+Z$l*Z$j-Z$m*Z$i,Z$s=-Z$l*Z$i-Z$m*Z$j-Z$n*Z$k;Z$d[Z$e]=Z$p*Z$o+Z$s*-Z$l+Z$q*-Z$n-Z$r*-Z$m,Z$d[Z$e+1]=Z$q*Z$o+Z$s*-Z$m+Z$r*-Z$l-Z$p*-Z$n,Z$d[Z$e+2]=Z$r*Z$o+Z$s*-Z$n+Z$p*-Z$m-Z$q*-Z$l},Z$I.mulMatrixByArray=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i,Z$j,Z$k,Z$l,Z$m;if(Z$e===Z$c){for(Z$c=Z$I._tempArray16_3,Z$i=0;Z$i<16;++Z$i)Z$c[Z$i]=Z$e[Z$f+Z$i];Z$d=0}for(Z$i=0;Z$i<4;Z$i++)Z$j=Z$a[Z$b+Z$i],Z$k=Z$a[Z$b+Z$i+4],Z$l=Z$a[Z$b+Z$i+8],Z$m=Z$a[Z$b+Z$i+12],Z$e[Z$f+Z$i]=Z$j*Z$c[Z$d+0]+Z$k*Z$c[Z$d+1]+Z$l*Z$c[Z$d+2]+Z$m*Z$c[Z$d+3],Z$e[Z$f+Z$i+4]=Z$j*Z$c[Z$d+4]+Z$k*Z$c[Z$d+5]+Z$l*Z$c[Z$d+6]+Z$m*Z$c[Z$d+7],Z$e[Z$f+Z$i+8]=Z$j*Z$c[Z$d+8]+Z$k*Z$c[Z$d+9]+Z$l*Z$c[Z$d+10]+Z$m*Z$c[Z$d+11],Z$e[Z$f+Z$i+12]=Z$j*Z$c[Z$d+12]+Z$k*Z$c[Z$d+13]+Z$l*Z$c[Z$d+14]+Z$m*Z$c[Z$d+15]},Z$I.mulMatrixByArrayFast=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i,Z$j,Z$k,Z$l,Z$m;for(Z$i=0;Z$i<4;Z$i++)Z$j=Z$a[Z$b+Z$i],Z$k=Z$a[Z$b+Z$i+4],Z$l=Z$a[Z$b+Z$i+8],Z$m=Z$a[Z$b+Z$i+12],Z$e[Z$f+Z$i]=Z$j*Z$c[Z$d+0]+Z$k*Z$c[Z$d+1]+Z$l*Z$c[Z$d+2]+Z$m*Z$c[Z$d+3],Z$e[Z$f+Z$i+4]=Z$j*Z$c[Z$d+4]+Z$k*Z$c[Z$d+5]+Z$l*Z$c[Z$d+6]+Z$m*Z$c[Z$d+7],Z$e[Z$f+Z$i+8]=Z$j*Z$c[Z$d+8]+Z$k*Z$c[Z$d+9]+Z$l*Z$c[Z$d+10]+Z$m*Z$c[Z$d+11],Z$e[Z$f+Z$i+12]=Z$j*Z$c[Z$d+12]+Z$k*Z$c[Z$d+13]+Z$l*Z$c[Z$d+14]+Z$m*Z$c[Z$d+15]},Z$I.mulMatrixByArrayAndMatrixFast=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f,Z$i,Z$j,Z$k,Z$l,Z$m=Z$c.elements,Z$n=Z$m[0],Z$o=Z$m[1],Z$p=Z$m[2],Z$q=Z$m[3],Z$r=Z$m[4],Z$s=Z$m[5],Z$t=Z$m[6],Z$u=Z$m[7],Z$v=Z$m[8],Z$w=Z$m[9],Z$x=Z$m[10],Z$y=Z$m[11],Z$z=Z$m[12],Z$A=Z$m[13],Z$B=Z$m[14],Z$C=Z$m[15],Z$D=Z$b,Z$E=Z$b+4,Z$F=Z$b+8,Z$G=Z$b+12,Z$H=Z$e,Z$I=Z$e+4,Z$J=Z$e+8,Z$K=Z$e+12;for(Z$f=0;Z$f<4;Z$f++)Z$i=Z$a[Z$D+Z$f],Z$j=Z$a[Z$E+Z$f],Z$k=Z$a[Z$F+Z$f],Z$l=Z$a[Z$G+Z$f],Z$d[Z$H+Z$f]=Z$i*Z$n+Z$j*Z$o+Z$k*Z$p+Z$l*Z$q,Z$d[Z$I+Z$f]=Z$i*Z$r+Z$j*Z$s+Z$k*Z$t+Z$l*Z$u,Z$d[Z$J+Z$f]=Z$i*Z$v+Z$j*Z$w+Z$k*Z$x+Z$l*Z$y,Z$d[Z$K+Z$f]=Z$i*Z$z+Z$j*Z$A+Z$k*Z$B+Z$l*Z$C},Z$I.createAffineTransformationArray=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$n){var Z$o=Z$d+Z$d,Z$p=Z$e+Z$e,Z$q=Z$f+Z$f,Z$r=Z$d*Z$o,Z$s=Z$d*Z$p,Z$t=Z$d*Z$q,Z$u=Z$e*Z$p,Z$v=Z$e*Z$q,Z$w=Z$f*Z$q,Z$x=Z$i*Z$o,Z$y=Z$i*Z$p,Z$z=Z$i*Z$q;Z$m[Z$n+0]=(1-(Z$u+Z$w))*Z$j,Z$m[Z$n+1]=(Z$s+Z$z)*Z$j,Z$m[Z$n+2]=(Z$t-Z$y)*Z$j,Z$m[Z$n+3]=0,Z$m[Z$n+4]=(Z$s-Z$z)*Z$k,Z$m[Z$n+5]=(1-(Z$r+Z$w))*Z$k,Z$m[Z$n+6]=(Z$v+Z$x)*Z$k,Z$m[Z$n+7]=0,Z$m[Z$n+8]=(Z$t+Z$y)*Z$l,Z$m[Z$n+9]=(Z$v-Z$x)*Z$l,Z$m[Z$n+10]=(1-(Z$r+Z$u))*Z$l,Z$m[Z$n+11]=0,Z$m[Z$n+12]=Z$a,Z$m[Z$n+13]=Z$b,Z$m[Z$n+14]=Z$c,Z$m[Z$n+15]=1},Z$I.transformVector3ArrayToVector3ArrayCoordinate=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$I._tempArray4_0,Z$i=Z$a[Z$b+0],Z$j=Z$a[Z$b+1],Z$k=Z$a[Z$b+2],Z$l=Z$c.elements;Z$f[0]=Z$i*Z$l[0]+Z$j*Z$l[4]+Z$k*Z$l[8]+Z$l[12],Z$f[1]=Z$i*Z$l[1]+Z$j*Z$l[5]+Z$k*Z$l[9]+Z$l[13],Z$f[2]=Z$i*Z$l[2]+Z$j*Z$l[6]+Z$k*Z$l[10]+Z$l[14],Z$f[3]=1/(Z$i*Z$l[3]+Z$j*Z$l[7]+Z$k*Z$l[11]+Z$l[15]),Z$d[Z$e+0]=Z$f[0]*Z$f[3],Z$d[Z$e+1]=Z$f[1]*Z$f[3],Z$d[Z$e+2]=Z$f[2]*Z$f[3]},Z$I.transformLightingMapTexcoordByUV0Array=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$c.elements;Z$d[Z$e+0]=Z$a[Z$b+0]*Z$f[0]+Z$f[2],Z$d[Z$e+1]=(Z$a[Z$b+1]-1)*Z$f[1]+Z$f[3]},Z$I.transformLightingMapTexcoordByUV1Array=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$c.elements;Z$d[Z$e+0]=Z$a[Z$b+0]*Z$f[0]+Z$f[2],Z$d[Z$e+1]=1+Z$a[Z$b+1]*Z$f[1]+Z$f[3]},Z$I.getURLVerion=function(Z$a){var Z$b=Z$a.indexOf("?");return 0<=Z$b?Z$a.substr(Z$b):null},Z$I._quaternionCreateFromYawPitchRollArray=function(Z$a,Z$b,Z$c,Z$d){var Z$e=.5*Z$c,Z$f=.5*Z$b,Z$i=.5*Z$a,Z$j=Math.sin(Z$e),Z$k=Math.cos(Z$e),Z$l=Math.sin(Z$f),Z$m=Math.cos(Z$f),Z$n=Math.sin(Z$i),Z$o=Math.cos(Z$i);Z$d[0]=Z$o*Z$l*Z$k+Z$n*Z$m*Z$j,Z$d[1]=Z$n*Z$m*Z$k-Z$o*Z$l*Z$j,Z$d[2]=Z$o*Z$m*Z$j-Z$n*Z$l*Z$k,Z$d[3]=Z$o*Z$m*Z$k+Z$n*Z$l*Z$j},Z$I._createAffineTransformationArray=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$b[0],Z$f=Z$b[1],Z$i=Z$b[2],Z$j=Z$b[3],Z$k=Z$e+Z$e,Z$l=Z$f+Z$f,Z$m=Z$i+Z$i,Z$n=Z$e*Z$k,Z$o=Z$e*Z$l,Z$p=Z$e*Z$m,Z$q=Z$f*Z$l,Z$r=Z$f*Z$m,Z$s=Z$i*Z$m,Z$t=Z$j*Z$k,Z$u=Z$j*Z$l,Z$v=Z$j*Z$m,Z$w=Z$c[0],Z$x=Z$c[1],Z$y=Z$c[2];Z$d[0]=(1-(Z$q+Z$s))*Z$w,Z$d[1]=(Z$o+Z$v)*Z$w,Z$d[2]=(Z$p-Z$u)*Z$w,Z$d[3]=0,Z$d[4]=(Z$o-Z$v)*Z$x,Z$d[5]=(1-(Z$n+Z$s))*Z$x,Z$d[6]=(Z$r+Z$t)*Z$x,Z$d[7]=0,Z$d[8]=(Z$p+Z$u)*Z$y,Z$d[9]=(Z$r-Z$t)*Z$y,Z$d[10]=(1-(Z$n+Z$q))*Z$y,Z$d[11]=0,Z$d[12]=Z$a[0],Z$d[13]=Z$a[1],Z$d[14]=Z$a[2],Z$d[15]=1},Z$I._mulMatrixArray=function(Z$a,Z$b,Z$c,Z$d){var Z$e,Z$f,Z$i,Z$j,Z$k,Z$l=Z$b.elements,Z$m=Z$l[0],Z$n=Z$l[1],Z$o=Z$l[2],Z$p=Z$l[3],Z$q=Z$l[4],Z$r=Z$l[5],Z$s=Z$l[6],Z$t=Z$l[7],Z$u=Z$l[8],Z$v=Z$l[9],Z$w=Z$l[10],Z$x=Z$l[11],Z$y=Z$l[12],Z$z=Z$l[13],Z$A=Z$l[14],Z$B=Z$l[15],Z$C=Z$d,Z$D=Z$d+4,Z$E=Z$d+8,Z$F=Z$d+12;for(Z$e=0;Z$e<4;Z$e++)Z$f=Z$a[Z$e],Z$i=Z$a[Z$e+4],Z$j=Z$a[Z$e+8],Z$k=Z$a[Z$e+12],Z$c[Z$C+Z$e]=Z$f*Z$m+Z$i*Z$n+Z$j*Z$o+Z$k*Z$p,Z$c[Z$D+Z$e]=Z$f*Z$q+Z$i*Z$r+Z$j*Z$s+Z$k*Z$t,Z$c[Z$E+Z$e]=Z$f*Z$u+Z$i*Z$v+Z$j*Z$w+Z$k*Z$x,Z$c[Z$F+Z$e]=Z$f*Z$y+Z$i*Z$z+Z$j*Z$A+Z$k*Z$B},Z$I.getYawPitchRoll=function(Z$a,Z$b){Z$I.transformQuat(Z$ib.ForwardRH,Z$a,Z$cb.TEMPVector31),Z$I.transformQuat(Z$ib.Up,Z$a,Z$cb.TEMPVector32);var Z$c=Z$cb.TEMPVector32.elements;Z$I.angleTo(Z$ib.ZERO,Z$cb.TEMPVector31,Z$cb.TEMPVector33);var Z$d=Z$cb.TEMPVector33.elements;Z$d[0]==Math.PI/2?(Z$d[1]=Z$I.arcTanAngle(Z$c[2],Z$c[0]),Z$d[2]=0):Z$d[0]==-Math.PI/2?(Z$d[1]=Z$I.arcTanAngle(-Z$c[2],-Z$c[0]),Z$d[2]=0):(Z$ab.createRotationY(-Z$d[1],Z$cb.TEMPMatrix0),Z$ab.createRotationX(-Z$d[0],Z$cb.TEMPMatrix1),Z$ib.transformCoordinate(Z$cb.TEMPVector32,Z$cb.TEMPMatrix0,Z$cb.TEMPVector32),Z$ib.transformCoordinate(Z$cb.TEMPVector32,Z$cb.TEMPMatrix1,Z$cb.TEMPVector32),Z$d[2]=Z$I.arcTanAngle(Z$c[1],-Z$c[0])),Z$d[1]<=-Math.PI&&(Z$d[1]=Math.PI),Z$d[2]<=-Math.PI&&(Z$d[2]=Math.PI),Z$d[1]>=Math.PI&&Z$d[2]>=Math.PI&&(Z$d[1]=0,Z$d[2]=0,Z$d[0]=Math.PI-Z$d[0]),Z$b[0]=Z$d[1],Z$b[1]=Z$d[0],Z$b[2]=Z$d[2]},Z$I.arcTanAngle=function(Z$a,Z$b){return 0==Z$a?1==Z$b?Math.PI/2:-Math.PI/2:0<Z$a?Math.atan(Z$b/Z$a):Z$a<0?0<Z$b?Math.atan(Z$b/Z$a)+Math.PI:Math.atan(Z$b/Z$a)-Math.PI:0},Z$I.angleTo=function(Z$a,Z$b,Z$c){Z$ib.subtract(Z$b,Z$a,Z$cb.TEMPVector30),Z$ib.normalize(Z$cb.TEMPVector30,Z$cb.TEMPVector30),Z$c.elements[0]=Math.asin(Z$cb.TEMPVector30.y),Z$c.elements[1]=Z$I.arcTanAngle(-Z$cb.TEMPVector30.z,-Z$cb.TEMPVector30.x)},Z$I.transformQuat=function(Z$a,Z$b,Z$c){var Z$d=Z$c.elements,Z$e=Z$a.elements,Z$f=Z$b,Z$i=Z$e[0],Z$j=Z$e[1],Z$k=Z$e[2],Z$l=Z$f[0],Z$m=Z$f[1],Z$n=Z$f[2],Z$o=Z$f[3],Z$p=Z$o*Z$i+Z$m*Z$k-Z$n*Z$j,Z$q=Z$o*Z$j+Z$n*Z$i-Z$l*Z$k,Z$r=Z$o*Z$k+Z$l*Z$j-Z$m*Z$i,Z$s=-Z$l*Z$i-Z$m*Z$j-Z$n*Z$k;Z$d[0]=Z$p*Z$o+Z$s*-Z$l+Z$q*-Z$n-Z$r*-Z$m,Z$d[1]=Z$q*Z$o+Z$s*-Z$m+Z$r*-Z$l-Z$p*-Z$n,Z$d[2]=Z$r*Z$o+Z$s*-Z$n+Z$p*-Z$m-Z$q*-Z$l},Z$I.quaterionNormalize=function(Z$a,Z$b){var Z$c=Z$a[0],Z$d=Z$a[1],Z$e=Z$a[2],Z$f=Z$a[3],Z$i=Z$c*Z$c+Z$d*Z$d+Z$e*Z$e+Z$f*Z$f;0<Z$i&&(Z$i=1/Math.sqrt(Z$i),Z$b[0]=Z$c*Z$i,Z$b[1]=Z$d*Z$i,Z$b[2]=Z$e*Z$i,Z$b[3]=Z$f*Z$i)},Z$I.matrix4x4MultiplyFFF=function(Z$a,Z$b,Z$c){var Z$d,Z$e,Z$f,Z$i,Z$j;if(Z$c===Z$b)for(Z$b=new Float32Array(16),Z$d=0;Z$d<16;++Z$d)Z$b[Z$d]=Z$c[Z$d];for(Z$d=0;Z$d<4;Z$d++)Z$e=Z$a[Z$d],Z$f=Z$a[Z$d+4],Z$i=Z$a[Z$d+8],Z$j=Z$a[Z$d+12],Z$c[Z$d]=Z$e*Z$b[0]+Z$f*Z$b[1]+Z$i*Z$b[2]+Z$j*Z$b[3],Z$c[Z$d+4]=Z$e*Z$b[4]+Z$f*Z$b[5]+Z$i*Z$b[6]+Z$j*Z$b[7],Z$c[Z$d+8]=Z$e*Z$b[8]+Z$f*Z$b[9]+Z$i*Z$b[10]+Z$j*Z$b[11],Z$c[Z$d+12]=Z$e*Z$b[12]+Z$f*Z$b[13]+Z$i*Z$b[14]+Z$j*Z$b[15]},Z$I.matrix4x4MultiplyMFM=function(Z$a,Z$b,Z$c){Z$I.matrix4x4MultiplyFFF(Z$a.elements,Z$b,Z$c.elements)},Z$n(Z$I,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new Z$ib},"_tempVector3_1",function(){return this._tempVector3_1=new Z$ib},"_tempVector3_2",function(){return this._tempVector3_2=new Z$ib},"_tempVector3_3",function(){return this._tempVector3_3=new Z$ib},"_tempVector3_4",function(){return this._tempVector3_4=new Z$ib},"_tempVector3_5",function(){return this._tempVector3_5=new Z$ib},"_tempVector3_6",function(){return this._tempVector3_6=new Z$ib},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),Z$I}(),Z$tb=function(){function Z$G(){}return Z$p(Z$G,"Laya3D"),Z$G._cancelLoadByUrl=function(Z$a){Z$x.loader.cancelLoadByUrl(Z$a),Z$G._innerFirstLevelLoaderManager.cancelLoadByUrl(Z$a),Z$G._innerSecondLevelLoaderManager.cancelLoadByUrl(Z$a),Z$G._innerThirdLevelLoaderManager.cancelLoadByUrl(Z$a),Z$G._innerFourthLevelLoaderManager.cancelLoadByUrl(Z$a)},Z$G._changeWebGLSize=function(Z$a,Z$b){Z$F.onStageResize(Z$a,Z$b),Z$Y.clientWidth=Z$a,Z$Y.clientHeight=Z$b},Z$G.__init__=function(){var Z$a=Z$b.createMap;Z$a.lh=[Z$Kb,"SPRITE3DHIERARCHY"],Z$a.ls=[Z$Jb,"SPRITE3DHIERARCHY"],Z$a.lm=[Z$Rb,"MESH"],Z$a.lmat=[Z$Mb,"MATERIAL"],Z$a.jpg=[Z$Tb,"nativeimage"],Z$a.jpeg=[Z$Tb,"nativeimage"],Z$a.png=[Z$Tb,"nativeimage"],Z$a.pkm=[Z$Tb,"arraybuffer"],Z$a.raw=[Z$Pb,"arraybuffer"],Z$a.mipmaps=[Z$Pb,"arraybuffer"],Z$t.parserMap.SPRITE3DHIERARCHY=Z$G._loadHierarchy,Z$t.parserMap.MESH=Z$G._loadMesh,Z$t.parserMap.MATERIAL=Z$G._loadMaterial,Z$t.parserMap.TEXTURECUBE=Z$G._loadTextureCube,Z$t.parserMap.TERRAIN=Z$G._loadTerrain,Z$G._innerFirstLevelLoaderManager.on("error",null,Z$G._eventLoadManagerError),Z$G._innerSecondLevelLoaderManager.on("error",null,Z$G._eventLoadManagerError),Z$G._innerThirdLevelLoaderManager.on("error",null,Z$G._eventLoadManagerError),Z$G._innerFourthLevelLoaderManager.on("error",null,Z$G._eventLoadManagerError)},Z$G.READ_BLOCK=function(){return Z$G._readData.pos+=4,!0},Z$G.READ_DATA=function(){return Z$G._DATA.offset=Z$G._readData.getUint32(),Z$G._DATA.size=Z$G._readData.getUint32(),!0},Z$G.READ_STRINGS=function(){var Z$a=[],Z$b={offset:0,size:0};Z$b.offset=Z$G._readData.getUint16(),Z$b.size=Z$G._readData.getUint16();Z$G._readData.pos;Z$G._readData.pos=Z$b.offset+Z$G._DATA.offset;for(var Z$c=0;Z$c<Z$b.size;Z$c++){var Z$d=Z$G._readData.readUTFString();-1===Z$d.lastIndexOf(".lmat")&&-1===Z$d.lastIndexOf(".lpbr")||Z$a.push(Z$d)}return Z$a},Z$G.formatRelativePath=function(Z$a,Z$b){var Z$c;if("."===Z$b.charAt(0)){for(var Z$d=(Z$a+Z$b).split("/"),Z$e=0,Z$f=Z$d.length;Z$e<Z$f;Z$e++)if(".."==Z$d[Z$e]){var Z$i=Z$e-1;0<Z$i&&".."!==Z$d[Z$i]&&(Z$d.splice(Z$i,2),Z$e-=2)}Z$c=Z$d.join("/")}else Z$c=Z$a+Z$b;return null!=Z$E.customFormat&&(Z$c=Z$E.customFormat(Z$c,null)),Z$c},Z$G._eventLoadManagerError=function(Z$a){Z$x.loader.event("error",Z$a)},Z$G._addHierarchyInnerUrls=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i=Z$G.formatRelativePath(Z$d,Z$e);Z$c&&(Z$i+=Z$c),Z$a.push({url:Z$i,clas:Z$f}),Z$b[Z$e]=Z$i},Z$G._getSprite3DHierarchyInnerUrls=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){var Z$j,Z$k=0,Z$l=0;switch(Z$a.type){case"Scene":var Z$m=Z$a.customProps.lightmaps;for(Z$k=0,Z$l=Z$m.length;Z$k<Z$l;Z$k++){var Z$n=Z$m[Z$k].replace(".exr",".png");Z$G._addHierarchyInnerUrls(Z$d,Z$e,Z$f,Z$i,Z$n,Z$Tb)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var Z$o;if(Z$a.instanceParams)(Z$o=Z$a.instanceParams.loadPath)&&Z$G._addHierarchyInnerUrls(Z$b,Z$e,Z$f,Z$i,Z$o,Z$Rb);else{(Z$o=(Z$j=Z$a.customProps).meshPath)&&Z$G._addHierarchyInnerUrls(Z$b,Z$e,Z$f,Z$i,Z$o,Z$Rb);var Z$p=Z$j.materials;if(Z$p)for(Z$k=0,Z$l=Z$p.length;Z$k<Z$l;Z$k++){for(var Z$q=Z$p[Z$k],Z$r=Z$q.type.split("."),Z$s=Z$H.window,Z$t=0,Z$u=Z$r.length;Z$t<Z$u;++Z$t){Z$s=Z$s[this.clasPaths[Z$t]]}if("function"!=typeof Z$s)throw"_getSprite3DHierarchyInnerUrls 错误: "+Z$q.type+" 不是类";Z$G._addHierarchyInnerUrls(Z$c,Z$e,Z$f,Z$i,Z$q.path,Z$s)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var Z$v=(Z$j=Z$a.customProps).meshPath;Z$v&&Z$G._addHierarchyInnerUrls(Z$b,Z$e,Z$f,Z$i,Z$v,Z$Rb);var Z$w=Z$j.material;if(Z$w){Z$r=Z$w.type.split("."),Z$s=Z$H.window;for(Z$t=0,Z$u=Z$r.length;Z$t<Z$u;++Z$t){Z$s=Z$s[this.clasPaths[Z$t]]}Z$G._addHierarchyInnerUrls(Z$c,Z$e,Z$f,Z$i,Z$w.path,Z$s)}else{var Z$x=Z$j.materialPath;if(Z$x)Z$G._addHierarchyInnerUrls(Z$c,Z$e,Z$f,Z$i,Z$x,ShurikenParticleMaterial);else{var Z$y=Z$j.texturePath;Z$y&&Z$G._addHierarchyInnerUrls(Z$d,Z$e,Z$f,Z$i,Z$y,Z$Tb)}}break;case"Terrain":Z$G._addHierarchyInnerUrls(Z$d,Z$e,Z$f,Z$i,Z$a.customProps.dataPath,TerrainRes)}var Z$z=Z$a.components;for(var Z$A in Z$z){var Z$B=Z$z[Z$A];switch(Z$A){case"Animator":var Z$C=Z$B.avatarPath;if(Z$C)Z$G._addHierarchyInnerUrls(Z$d,Z$e,Z$f,Z$i,Z$C,Avatar);else{var Z$D=Z$B.avatar;Z$D&&Z$G._addHierarchyInnerUrls(Z$d,Z$e,Z$f,Z$i,Z$D.path,Avatar)}var Z$E=Z$B.clipPaths;for(Z$k=0,Z$l=Z$E.length;Z$k<Z$l;Z$k++)Z$G._addHierarchyInnerUrls(Z$d,Z$e,Z$f,Z$i,Z$E[Z$k],AnimationClip)}}var Z$F=Z$a.child;for(Z$k=0,Z$l=Z$F.length;Z$k<Z$l;Z$k++)Z$G._getSprite3DHierarchyInnerUrls(Z$F[Z$k],Z$b,Z$c,Z$d,Z$e,Z$f,Z$i)},Z$G._loadHierarchy=function(Z$a){Z$a.on("loaded",null,Z$G._onHierarchylhLoaded,[Z$a,Z$a._class._getGroup()]),Z$a.load(Z$a.url,"json",!1,null,!0)},Z$G._onHierarchylhLoaded=function(Z$a,Z$b,Z$c){if(Z$a._class.destroyed)Z$a.endLoad();else{var Z$d=Z$a.url,Z$e=Z$sb.getURLVerion(Z$d),Z$f=Z$E.getPath(Z$d),Z$i=[],Z$j=[],Z$k=[],Z$l={};Z$G._getSprite3DHierarchyInnerUrls(Z$c,Z$i,Z$j,Z$k,Z$l,Z$e,Z$f);var Z$m=Z$i.length+Z$j.length+Z$k.length,Z$n=Z$m+1,Z$o=1/Z$n;if(Z$G._onProcessChange(Z$a,0,Z$o,1),0<Z$k.length){var Z$p=Z$m/Z$n,Z$q=Z$D.create(null,Z$G._onProcessChange,[Z$a,Z$o,Z$p],!1);Z$G._innerFourthLevelLoaderManager.create(Z$k,Z$D.create(null,Z$G._onHierarchyInnerForthLevResouLoaded,[Z$a,Z$b,Z$q,Z$c,Z$l,Z$i,Z$j,Z$o+Z$p*Z$k.length,Z$p]),Z$q,null,null,1,!0,Z$b)}else Z$G._onHierarchyInnerForthLevResouLoaded(Z$a,Z$b,null,Z$c,Z$l,Z$i,Z$j,Z$o,Z$p)}},Z$G._onHierarchyInnerForthLevResouLoaded=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){if(Z$a._class.destroyed)Z$a.endLoad();else if(Z$c&&Z$c.recover(),0<Z$i.length){var Z$l=Z$D.create(null,Z$G._onProcessChange,[Z$a,Z$j,Z$k],!1);Z$G._innerSecondLevelLoaderManager.create(Z$i,Z$D.create(null,Z$G._onHierarchyInnerSecondLevResouLoaded,[Z$a,Z$b,Z$l,Z$d,Z$e,Z$f,Z$j+Z$k*Z$i.length,Z$k]),Z$c,null,null,1,!0,Z$b)}else Z$G._onHierarchyInnerSecondLevResouLoaded(Z$a,Z$b,null,Z$d,Z$e,Z$f,Z$j,Z$k)},Z$G._onHierarchyInnerSecondLevResouLoaded=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j){if(Z$a._class.destroyed)Z$a.endLoad();else if(Z$c&&Z$c.recover(),0<Z$f.length){var Z$k=Z$D.create(null,Z$G._onProcessChange,[Z$a,Z$i,Z$j],!1);Z$G._innerFirstLevelLoaderManager.create(Z$f,Z$D.create(null,Z$G._onHierarchyInnerFirstLevResouLoaded,[Z$a,Z$k,Z$d,Z$e]),Z$c,null,null,1,!0,Z$b)}else Z$G._onHierarchyInnerFirstLevResouLoaded(Z$a,null,Z$d,Z$e)},Z$G._onHierarchyInnerFirstLevResouLoaded=function(Z$a,Z$b,Z$c,Z$d){Z$b&&Z$b.recover(),Z$a.endLoad([Z$c,Z$d])},Z$G._loadTerrain=function(Z$a){Z$a.on("loaded",null,Z$G._onTerrainLtLoaded,[Z$a,Z$a._class._getGroup()]),Z$a.load(Z$a.url,"json",!1,null,!0)},Z$G._onTerrainLtLoaded=function(Z$a,Z$b,Z$c){if(Z$a._class.destroyed)Z$a.endLoad();else{var Z$d,Z$e,Z$f=Z$a.url,Z$i=Z$sb.getURLVerion(Z$f),Z$j=Z$E.getPath(Z$f),Z$k=[],Z$l={},Z$m=0,Z$n=0,Z$o=Z$c.heightData;Z$d=Z$o.url,Z$e=Z$G.formatRelativePath(Z$j,Z$d),Z$i&&(Z$e+=Z$i),Z$d=Z$l[Z$d]=Z$e;var Z$p=Z$c.detailTexture;for(Z$m=0,Z$n=Z$p.length;Z$m<Z$n;Z$m++)Z$k.push({url:Z$p[Z$m].diffuse});var Z$q=Z$c.normalMap;for(Z$m=0,Z$n=Z$q.length;Z$m<Z$n;Z$m++)Z$k.push({url:Z$q[Z$m]});var Z$r=Z$c.alphaMap;for(Z$m=0,Z$n=Z$r.length;Z$m<Z$n;Z$m++)Z$k.push({url:Z$r[Z$m],params:[!1,!1,6408,!0]});for(Z$m=0,Z$n=Z$k.length;Z$m<Z$n;Z$m++){var Z$s=Z$k[Z$m].url;Z$e=Z$G.formatRelativePath(Z$j,Z$s),Z$i&&(Z$e+=Z$i),Z$k[Z$m].url=Z$e,Z$l[Z$s]=Z$e}var Z$t=Z$k.length,Z$u=Z$t+2,Z$v=1/Z$u;Z$G._onProcessChange(Z$a,0,Z$v,1);var Z$w={heightMapLoaded:!1,texturesLoaded:!1},Z$x=Z$D.create(null,Z$G._onProcessChange,[Z$a,Z$v,Z$v],!1);Z$G._innerFourthLevelLoaderManager.create(Z$d,Z$D.create(null,Z$G._onTerrainHeightMapLoaded,[Z$a,Z$x,Z$c,Z$l,Z$w]),Z$x,null,[Z$o.numX,Z$o.numZ,Z$o.bitType,Z$o.value],1,!0,Z$b);var Z$y=Z$D.create(null,Z$G._onProcessChange,[Z$a,2*Z$v,Z$t/Z$u],!1);Z$G._innerFourthLevelLoaderManager.create(Z$k,Z$D.create(null,Z$G._onTerrainTexturesLoaded,[Z$a,Z$y,Z$c,Z$l,Z$w]),Z$y,null,null,1,!0,Z$b)}},Z$G._onTerrainHeightMapLoaded=function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$e.heightMapLoaded=!0,Z$e.texturesLoaded&&(Z$a.endLoad([Z$c,Z$d]),Z$b.recover())},Z$G._onTerrainTexturesLoaded=function(Z$a,Z$b,Z$c,Z$d,Z$e){Z$e.texturesLoaded=!0,Z$e.heightMapLoaded&&(Z$a.endLoad([Z$c,Z$d]),Z$b.recover())},Z$G._loadMesh=function(Z$a){Z$a.on("loaded",null,Z$G._onMeshLmLoaded,[Z$a,Z$a._class._getGroup()]),Z$a.load(Z$a.url,"arraybuffer",!1,null,!0)},Z$G._onMeshLmLoaded=function(Z$a,Z$b,Z$c){if(Z$a._class.destroyed)Z$a.endLoad();else{var Z$d,Z$e,Z$f,Z$i=Z$a.url,Z$j=Z$sb.getURLVerion(Z$i),Z$k=Z$E.getPath(Z$i),Z$l={},Z$m=0,Z$n=0;switch((Z$G._readData=new Z$y(Z$c)).pos=0,Z$G._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var Z$o=Z$G._readData.getUint32();Z$G._readData.pos=Z$G._readData.pos+4,Z$n=Z$G._readData.getUint16(),Z$G._readData.pos=Z$G._readData.pos+8*Z$n;var Z$p=Z$G._readData.getUint32();for(Z$n=Z$G._readData.getUint16(),Z$G._readData.pos=Z$o+Z$p,Z$d=[],Z$m=0;Z$m<Z$n;Z$m++){var Z$q=Z$G._readData.readUTFString();-1!==Z$q.lastIndexOf(".lmat")&&Z$d.push(Z$q)}break;default:for(Z$G.READ_BLOCK(),Z$m=0;Z$m<2;Z$m++){var Z$r=Z$G._readData.getUint16(),Z$s=Z$G._strings[Z$r],Z$t=Z$G["READ_"+Z$s];if(null==Z$t)throw new Error("model file err,no this function:"+Z$r+" "+Z$s);1===Z$m?Z$d=Z$t.call():Z$t.call()}}for(Z$m=0,Z$f=Z$d.length;Z$m<Z$f;Z$m++){var Z$u=Z$d[Z$m];Z$e=Z$G.formatRelativePath(Z$k,Z$u),Z$j&&(Z$e+=Z$j),Z$d[Z$m]=Z$e,Z$l[Z$u]=Z$e}if(0<Z$d.length){Z$G._onProcessChange(Z$a,0,.5,1);var Z$v=Z$D.create(null,Z$G._onProcessChange,[Z$a,.5,.5],!1);Z$G._innerSecondLevelLoaderManager.create(Z$d,Z$D.create(null,Z$G._onMeshMateialLoaded,[Z$a,Z$v,Z$c,Z$l]),Z$v,null,null,1,!0,Z$b)}else Z$a.endLoad([Z$c,Z$l])}},Z$G._onMeshMateialLoaded=function(Z$a,Z$b,Z$c,Z$d){Z$a.endLoad([Z$c,Z$d]),Z$b.recover()},Z$G._getMaterialTexturePath=function(Z$a,Z$b,Z$c){var Z$d=Z$a.length-4;return Z$a.indexOf(".dds")!=Z$d&&Z$a.indexOf(".tga")!=Z$d&&Z$a.indexOf(".exr")!=Z$d&&Z$a.indexOf(".DDS")!=Z$d&&Z$a.indexOf(".TGA")!=Z$d&&Z$a.indexOf(".EXR")!=Z$d||(Z$a=Z$a.substr(0,Z$d)+".png"),Z$a=Z$G.formatRelativePath(Z$c,Z$a),Z$b&&(Z$a+=Z$b),Z$a},Z$G._loadMaterial=function(Z$a){Z$a.on("loaded",null,Z$G._onMaterilLmatLoaded,[Z$a,Z$a._class._getGroup()]),Z$a.load(Z$a.url,"json",!1,null,!0)},Z$G._onMaterilLmatLoaded=function(Z$a,Z$b,Z$c){if(Z$a._class.destroyed)Z$a.endLoad();else{var Z$d,Z$e=Z$a.url,Z$f=Z$sb.getURLVerion(Z$e),Z$i=Z$E.getPath(Z$e),Z$j=[],Z$k={},Z$l=Z$c.customProps,Z$m=Z$c.version;if(Z$m)switch(Z$m){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var Z$n=Z$c.props.textures,Z$o=0,Z$p=Z$n.length;Z$o<Z$p;Z$o++){var Z$q=Z$n[Z$o],Z$r=Z$q.path;if(Z$r){var Z$s=Z$r.length-4;Z$r.indexOf(".exr")!=Z$s&&Z$r.indexOf(".EXR")!=Z$s||(Z$r=Z$r.substr(0,Z$s)+".png"),Z$d=Z$G.formatRelativePath(Z$i,Z$r),Z$f&&(Z$d+=Z$f),Z$j.push({url:Z$d,params:Z$q.params}),Z$k[Z$r]=Z$d}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var Z$t=Z$l.diffuseTexture.texture2D;if(Z$t&&(Z$d=Z$G._getMaterialTexturePath(Z$t,Z$f,Z$i),Z$j.push(Z$d),Z$k[Z$t]=Z$d),Z$l.normalTexture){var Z$u=Z$l.normalTexture.texture2D;Z$u&&(Z$d=Z$G._getMaterialTexturePath(Z$u,Z$f,Z$i),Z$j.push(Z$d),Z$k[Z$u]=Z$d)}if(Z$l.specularTexture){var Z$v=Z$l.specularTexture.texture2D;Z$v&&(Z$d=Z$G._getMaterialTexturePath(Z$v,Z$f,Z$i),Z$j.push(Z$d),Z$k[Z$v]=Z$d)}if(Z$l.emissiveTexture){var Z$w=Z$l.emissiveTexture.texture2D;Z$w&&(Z$d=Z$G._getMaterialTexturePath(Z$w,Z$f,Z$i),Z$j.push(Z$d),Z$k[Z$w]=Z$d)}if(Z$l.ambientTexture){var Z$x=Z$l.ambientTexture.texture2D;Z$x&&(Z$d=Z$G._getMaterialTexturePath(Z$x,Z$f,Z$i),Z$j.push(Z$d),Z$k[Z$x]=Z$d)}if(Z$l.reflectTexture){var Z$y=Z$l.reflectTexture.texture2D;Z$y&&(Z$d=Z$G._getMaterialTexturePath(Z$y,Z$f,Z$i),Z$j.push(Z$d),Z$k[Z$y]=Z$d)}}var Z$z=Z$j.length,Z$A=Z$z+1,Z$B=1/Z$A;if(Z$G._onProcessChange(Z$a,0,Z$B,1),0<Z$z){var Z$C=Z$D.create(null,Z$G._onProcessChange,[Z$a,Z$B,Z$z/Z$A],!1);Z$G._innerFourthLevelLoaderManager.create(Z$j,Z$D.create(null,Z$G._onMateialTexturesLoaded,[Z$a,Z$C,Z$c,Z$k]),Z$C,Z$Tb,null,1,!0,Z$b)}else Z$G._onMateialTexturesLoaded(Z$a,null,Z$c,null)}},Z$G._onMateialTexturesLoaded=function(Z$a,Z$b,Z$c,Z$d){Z$a.endLoad([Z$c,Z$d]),Z$b&&Z$b.recover()},Z$G._loadTextureCube=function(Z$a){Z$a.on("loaded",null,Z$G._onTextureCubeLtcLoaded,[Z$a]),Z$a.load(Z$a.url,"json",!1,null,!0)},Z$G._onTextureCubeLtcLoaded=function(Z$a,Z$b){if(Z$a._class.destroyed)Z$a.endLoad();else{var Z$c=Z$E.getPath(Z$a.url),Z$d=[Z$G.formatRelativePath(Z$c,Z$b.px),Z$G.formatRelativePath(Z$c,Z$b.nx),Z$G.formatRelativePath(Z$c,Z$b.py),Z$G.formatRelativePath(Z$c,Z$b.ny),Z$G.formatRelativePath(Z$c,Z$b.pz),Z$G.formatRelativePath(Z$c,Z$b.nz)];Z$G._onProcessChange(Z$a,0,1/7,1);var Z$e=Z$D.create(null,Z$G._onProcessChange,[Z$a,1/7,6/7],!1);Z$G._innerFourthLevelLoaderManager.load(Z$d,Z$D.create(null,Z$G._onTextureCubeImagesLoaded,[Z$a,Z$d,Z$e]),Z$e,"nativeimage")}},Z$G._onTextureCubeImagesLoaded=function(Z$a,Z$b,Z$c){var Z$d=[];Z$d.length=6;for(var Z$e=0;Z$e<6;Z$e++){var Z$f=Z$b[Z$e];Z$d[Z$e]=Z$t.getRes(Z$f),Z$t.clearRes(Z$f)}Z$a.endLoad(Z$d),Z$c.recover()},Z$G._onProcessChange=function(Z$a,Z$b,Z$c,Z$d){(Z$d=Z$b+Z$d*Z$c)<1&&Z$a.event("progress",Z$d)},Z$G.init=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){if(void 0===Z$c&&(Z$c=!1),void 0===Z$d&&(Z$d=!1),void 0===Z$e&&(Z$e=!0),void 0===Z$f&&(Z$f=!0),Z$u.update3DLoop=function(){},Z$u.cancelLoadByUrl=function(Z$a){Z$G._cancelLoadByUrl(Z$a)},Z$k.isAntialias=Z$c,Z$k.isAlpha=Z$d,Z$k.premultipliedAlpha=Z$e,Z$k.isStencil=Z$f,!Z$F.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");Z$u.changeWebGLSize=Z$G._changeWebGLSize,Z$r.is3DMode=!0,Z$x.init(Z$a,Z$b),Z$I.__init__(),Z$nb.__init__(),Z$Xb.__init__(),Z$Q.__init__(),Z$G.__init__(),Z$i.maxTextureCount=2,(Z$G.debugMode||Z$Z.debugMode)&&(Z$G._debugPhasorSprite=new Z$V)},Z$G.HIERARCHY="SPRITE3DHIERARCHY",Z$G.MESH="MESH",Z$G.MATERIAL="MATERIAL",Z$G.PBRMATERIAL="PBRMTL",Z$G.TEXTURECUBE="TEXTURECUBE",Z$G.TERRAIN="TERRAIN",Z$G._readData=null,Z$G._debugPhasorSprite=null,Z$G.debugMode=!1,Z$n(Z$G,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new Z$b},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new Z$b},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new Z$b},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new Z$b}]),Z$G}(),Z$ub=function(Z$a){function Z$e(Z$a){Z$e.__super.call(this),this._owner=Z$a,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}Z$p(Z$e,"laya.d3.animation.AnimationTransform3D",Z$f);var Z$b=Z$e.prototype;return Z$b._getlocalMatrix=function(){return this._localUpdate&&(Z$sb._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},Z$b._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++)this._childs[Z$a]._onWorldTransform()}},Z$b._setWorldMatrixAndUpdate=function(Z$a){if(this._worldMatrix=Z$a,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var Z$b=this._getlocalMatrix(),Z$c=0;Z$c<16;++Z$c)this._worldMatrix[Z$c]=Z$b[Z$c];else Z$sb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},Z$b._setWorldMatrixNoUpdate=function(Z$a){this._worldMatrix=Z$a},Z$b._setWorldMatrixIgnoreUpdate=function(Z$a){this._worldMatrix=Z$a,this._worldUpdate=!1},Z$b.getLocalPosition=function(){return this._localPosition},Z$b.setLocalPosition=function(Z$a){if(this._parent)this._localPosition=Z$a,this._localUpdate=!0,this._onWorldTransform();else{var Z$b=this._entity.owner._transform,Z$c=this._entity.localPosition,Z$d=Z$c.elements;Z$d[0]=Z$a[0],Z$d[1]=Z$a[1],Z$d[2]=Z$a[2],Z$b.localPosition=Z$c}},Z$b.getLocalRotation=function(){if(this._localQuaternionUpdate){var Z$a=this._localRotationEuler;Z$sb._quaternionCreateFromYawPitchRollArray(Z$a[1]/Z$e._angleToRandin,Z$a[0]/Z$e._angleToRandin,Z$a[2]/Z$e._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},Z$b.setLocalRotation=function(Z$a){if(this._parent)this._localRotation=Z$a,Z$sb.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var Z$b=this._entity.owner._transform,Z$c=this._entity.localRotation,Z$d=Z$c.elements;Z$d[0]=Z$a[0],Z$d[1]=Z$a[1],Z$d[2]=Z$a[2],Z$d[3]=Z$a[3],Z$b.localRotation=Z$c}},Z$b.getLocalScale=function(){return this._localScale},Z$b.setLocalScale=function(Z$a){if(this._parent)this._localScale=Z$a,this._localUpdate=!0,this._onWorldTransform();else{var Z$b=this._entity.owner._transform,Z$c=this._entity.localScale,Z$d=Z$c.elements;Z$d[0]=Z$a[0],Z$d[1]=Z$a[1],Z$d[2]=Z$a[2],Z$b.localScale=Z$c}},Z$b.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){Z$sb.getYawPitchRoll(this._localRotation,Z$e._tempVector3);var Z$a=Z$e._tempVector3,Z$b=this._localRotationEuler;Z$b[0]=Z$a[1]*Z$e._angleToRandin,Z$b[1]=Z$a[0]*Z$e._angleToRandin,Z$b[2]=Z$a[2]*Z$e._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},Z$b.setLocalRotationEuler=function(Z$a){if(this._parent)Z$sb._quaternionCreateFromYawPitchRollArray(Z$a[1]/Z$e._angleToRandin,Z$a[0]/Z$e._angleToRandin,Z$a[2]/Z$e._angleToRandin,this._localRotation),this._localRotationEuler=Z$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var Z$b=this._entity.owner._transform,Z$c=this._entity.localRotationEuler,Z$d=Z$c.elements;Z$d[0]=Z$a[0],Z$d[1]=Z$a[1],Z$d[2]=Z$a[2],Z$b.localRotationEuler=Z$c}},Z$b.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)Z$sb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var Z$a=this._getlocalMatrix(),Z$b=0;Z$b<16;++Z$b)this._worldMatrix[Z$b]=Z$a[Z$b];this._worldUpdate=!1}return this._worldMatrix},Z$b.setParent=function(Z$a){if(this._parent!==Z$a){if(this._parent){var Z$b=this._parent._childs,Z$c=Z$b.indexOf(this);Z$b.splice(Z$c,1)}Z$a&&(Z$a._childs.push(this),Z$a&&this._onWorldTransform()),this._parent=Z$a}},Z$n(Z$e,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),Z$e}(),Z$vb=function(Z$a){function Z$b(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,Z$b.__super.call(this),this._destroyed=!1,this._id=Z$b._uniqueIDCounter,Z$b._uniqueIDCounter++}Z$p(Z$b,"laya.d3.component.Component3D",Z$f);var Z$c=Z$b.prototype;return Z$x.imps(Z$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),Z$c._initialize=function(Z$a){this._owner=Z$a,this._enable=!0,this.started=!1,this._load(Z$a)},Z$c._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},Z$c._load=function(Z$a){},Z$c._start=function(Z$a){},Z$c._update=function(Z$a){},Z$c._lateUpdate=function(Z$a){},Z$c._preRenderUpdate=function(Z$a){},Z$c._postRenderUpdate=function(Z$a){},Z$c._unload=function(Z$a){this.offAll()},Z$c._cloneTo=function(Z$a){},Z$q(0,Z$c,"id",function(){return this._id}),Z$q(0,Z$c,"destroyed",function(){return this._destroyed}),Z$q(0,Z$c,"owner",function(){return this._owner}),Z$q(0,Z$c,"enable",function(){return this._enable},function(Z$a){this._enable!==Z$a&&(this._enable=Z$a,this.event("enablechanged",this._enable))}),Z$q(0,Z$c,"isSingleton",function(){return Z$b._isSingleton}),Z$b._isSingleton=!0,Z$b._uniqueIDCounter=1,Z$b}(),Z$wb=function(Z$a){function Z$b(){this._destroyed=!1,Z$b.__super.call(this),this._destroyed=!1}Z$p(Z$b,"laya.d3.core.GeometryFilter",Z$f);var Z$c=Z$b.prototype;return Z$x.imps(Z$c,{"laya.resource.IDestroy":!0}),Z$c._destroy=function(){this.offAll(),this._destroyed=!0},Z$q(0,Z$c,"_isAsyncLoaded",function(){return!0}),Z$q(0,Z$c,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),Z$q(0,Z$c,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),Z$q(0,Z$c,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),Z$q(0,Z$c,"destroyed",function(){return this._destroyed}),Z$b}(),Z$xb=function(Z$a){function Z$d(Z$a){Z$d.__super.call(this),this._id=++Z$d._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new Z$Za(new Z$ib,new Z$ib),this._boundingBoxCenter=new Z$ib,this._boundingSphere=new Z$_a(new Z$ib,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=Z$a,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}Z$p(Z$d,"laya.d3.core.render.BaseRender",Z$f);var Z$b=Z$d.prototype;return Z$x.imps(Z$b,{"laya.resource.IDestroy":!0}),Z$b._changeMaterialReference=function(Z$a,Z$b){Z$a&&Z$a._removeReference(),Z$b._addReference()},Z$b._getInstanceMaterial=function(Z$a,Z$b){var Z$c=new Z$a.constructor;return Z$a.cloneTo(Z$c),Z$c.name=Z$c.name+"(Instance)",this._materialsInstance[Z$b]=!0,this._changeMaterialReference(this._materials[Z$b],Z$c),this._materials[Z$b]=Z$c},Z$b._setShaderValuelightMap=function(Z$a){this._setShaderValueTexture(3,Z$a)},Z$b._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},Z$b._renderRenderableBoundBox=function(){var Z$a=Z$tb._debugPhasorSprite,Z$b=this.boundingBox,Z$c=Z$d._tempBoundBoxCorners;Z$b.getCorners(Z$c),Z$a.line(Z$c[0],Z$d._greenColor,Z$c[1],Z$d._greenColor),Z$a.line(Z$c[2],Z$d._greenColor,Z$c[3],Z$d._greenColor),Z$a.line(Z$c[4],Z$d._greenColor,Z$c[5],Z$d._greenColor),Z$a.line(Z$c[6],Z$d._greenColor,Z$c[7],Z$d._greenColor),Z$a.line(Z$c[0],Z$d._greenColor,Z$c[3],Z$d._greenColor),Z$a.line(Z$c[1],Z$d._greenColor,Z$c[2],Z$d._greenColor),Z$a.line(Z$c[2],Z$d._greenColor,Z$c[6],Z$d._greenColor),Z$a.line(Z$c[3],Z$d._greenColor,Z$c[7],Z$d._greenColor),Z$a.line(Z$c[0],Z$d._greenColor,Z$c[4],Z$d._greenColor),Z$a.line(Z$c[1],Z$d._greenColor,Z$c[5],Z$d._greenColor),Z$a.line(Z$c[4],Z$d._greenColor,Z$c[7],Z$d._greenColor),Z$a.line(Z$c[5],Z$d._greenColor,Z$c[6],Z$d._greenColor)},Z$b._calculateBoundingSphere=function(){throw"BaseRender: must override it."},Z$b._calculateBoundingBox=function(){throw"BaseRender: must override it."},Z$b._setShaderValueTexture=function(Z$a,Z$b){this._owner._shaderValues.setValue(Z$a,Z$b)},Z$b._setShaderValueMatrix4x4=function(Z$a,Z$b){this._owner._shaderValues.setValue(Z$a,Z$b?Z$b.elements:null)},Z$b._setShaderValueColor=function(Z$a,Z$b){this._owner._shaderValues.setValue(Z$a,Z$b?Z$b.elements:null)},Z$b._setShaderValueBuffer=function(Z$a,Z$b){this._owner._shaderValues.setValue(Z$a,Z$b)},Z$b._setShaderValueInt=function(Z$a,Z$b){this._owner._shaderValues.setValue(Z$a,Z$b)},Z$b._setShaderValueBool=function(Z$a,Z$b){this._owner._shaderValues.setValue(Z$a,Z$b)},Z$b._setShaderValueNumber=function(Z$a,Z$b){this._owner._shaderValues.setValue(Z$a,Z$b)},Z$b._setShaderValueVector2=function(Z$a,Z$b){this._owner._shaderValues.setValue(Z$a,Z$b?Z$b.elements:null)},Z$b._addShaderDefine=function(Z$a){this._owner._shaderDefineValue|=Z$a},Z$b._removeShaderDefine=function(Z$a){this._owner._shaderDefineValue&=~Z$a},Z$b._renderUpdate=function(Z$a){return!0},Z$b._applyLightMapParams=function(){if(0<=this._lightmapIndex){var Z$a=this._owner.scene;if(Z$a){var Z$b=Z$a.getlightmaps()[this._lightmapIndex];Z$b?(this._addShaderDefine(Z$Vb.SAHDERDEFINE_LIGHTMAP),Z$b.loaded?this._setShaderValuelightMap(Z$b):Z$b.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(Z$Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(Z$Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(Z$Vb.SAHDERDEFINE_LIGHTMAP)},Z$b._updateOctreeNode=function(){var Z$a=this._treeNode;Z$a&&this._octreeNodeNeedChange&&(Z$a.updateObject(this),this._octreeNodeNeedChange=!1)},Z$b._destroy=function(){this.offAll();var Z$a=0,Z$b=0;for(Z$a=0,Z$b=this._renderElements.length;Z$a<Z$b;Z$a++)this._renderElements[Z$a]._destroy();for(Z$a=0,Z$b=this._materials.length;Z$a<Z$b;Z$a++)this._materials[Z$a]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},Z$q(0,Z$b,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),Z$q(0,Z$b,"id",function(){return this._id}),Z$q(0,Z$b,"material",function(){var Z$a=this._materials[0];if(Z$a&&!this._materialsInstance[0]){var Z$b=this._getInstanceMaterial(Z$a,0);this.event("materialchanged",[this,0,Z$b])}return this._materials[0]},function(Z$a){this.sharedMaterial=Z$a}),Z$q(0,Z$b,"sharedMaterial",function(){return this._materials[0]},function(Z$a){var Z$b=this._materials[0];Z$b!==Z$a&&(this._materials[0]=Z$a,this._materialsInstance[0]=!1,this._changeMaterialReference(Z$b,Z$a),this.event("materialchanged",[this,0,Z$a]))}),Z$q(0,Z$b,"lightmapIndex",function(){return this._lightmapIndex},function(Z$a){this._lightmapIndex=Z$a,this._applyLightMapParams()}),Z$q(0,Z$b,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(Z$a){this._lightmapScaleOffset=Z$a,this._setShaderValueColor(2,Z$a),this._addShaderDefine(Z$Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),Z$q(0,Z$b,"enable",function(){return this._enable},function(Z$a){this._enable=Z$a,this.event("enablechanged",[this,Z$a])}),Z$q(0,Z$b,"materials",function(){for(var Z$a=0,Z$b=this._materials.length;Z$a<Z$b;Z$a++)if(!this._materialsInstance[Z$a]){var Z$c=this._getInstanceMaterial(this._materials[Z$a],Z$a);this.event("materialchanged",[this,Z$a,Z$c])}return this._materials.slice()},function(Z$a){this.sharedMaterials=Z$a}),Z$q(0,Z$b,"sharedMaterials",function(){return this._materials.slice()},function(Z$a){if(!Z$a)throw new Error("MeshRender: shadredMaterials value can't be null.");var Z$b=Z$a.length;this._materialsInstance.length=Z$b;for(var Z$c=0;Z$c<Z$b;Z$c++){var Z$d=this._materials[Z$c];Z$d!==Z$a[Z$c]&&(this._materialsInstance[Z$c]=!1,this._changeMaterialReference(Z$d,Z$a[Z$c]),this.event("materialchanged",[this,Z$c,Z$a[Z$c]]))}this._materials=Z$a}),Z$q(0,Z$b,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),Z$q(0,Z$b,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var Z$a=this.boundingBox;Z$ib.add(Z$a.min,Z$a.max,this._boundingBoxCenter),Z$ib.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),Z$q(0,Z$b,"receiveShadow",function(){return this._receiveShadow},function(Z$a){this._receiveShadow!==Z$a&&((this._receiveShadow=Z$a)?this._addShaderDefine(Z$pb.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(Z$pb.SHADERDEFINE_RECEIVE_SHADOW))}),Z$q(0,Z$b,"destroyed",function(){return this._destroyed}),Z$d._uniqueIDCounter=0,Z$n(Z$d,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib,new Z$ib]},"_greenColor",function(){return this._greenColor=new Z$jb(0,1,0,1)}]),Z$d}(),Z$yb=function(Z$a){function Z$j(Z$a){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,Z$j.__super.call(this),this._localPosition=new Z$ib,this._localRotation=new Z$cb(0,0,0,1),this._localScale=new Z$ib(1,1,1),this._localRotationEuler=new Z$ib,this._localMatrix=new Z$ab,this._position=new Z$ib,this._rotation=new Z$cb(0,0,0,1),this._scale=new Z$ib(1,1,1),this._worldMatrix=new Z$ab,this._forward=new Z$ib,this._up=new Z$ib,this._right=new Z$ib,this._owner=Z$a,this._childs=[]}Z$p(Z$j,"laya.d3.core.Transform3D",Z$f);var Z$b=Z$j.prototype;return Z$b._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)Z$ab.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var Z$a=Z$j._tempVector30;Z$ib.multiply(this.pivot,this._localScale,Z$a);var Z$b=Z$j._tempVector31;Z$ib.subtract(Z$a,this.pivot,Z$b);var Z$c=Z$j._tempVector32,Z$d=this.localRotation;Z$ib.transformQuat(Z$a,Z$d,Z$c),Z$ib.subtract(Z$c,Z$a,Z$c);var Z$e=Z$j._tempVector33;Z$ib.subtract(this._localPosition,Z$b,Z$e),Z$ib.subtract(Z$e,Z$c,Z$e),Z$ab.createAffineTransformation(Z$e,Z$d,this._localScale,this._localMatrix)}},Z$b._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++)this._childs[Z$a]._onWorldPositionRotationTransform()}},Z$b._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++)this._childs[Z$a]._onWorldPositionScaleTransform()}},Z$b._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++)this._childs[Z$a]._onWorldPositionTransform()}},Z$b._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++)this._childs[Z$a]._onWorldPositionRotationTransform()}},Z$b._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++)this._childs[Z$a]._onWorldPositionScaleTransform()}},Z$b._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++)this._childs[Z$a]._onWorldTransform()}},Z$b.translate=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!0),Z$b?(Z$ab.createFromQuaternion(this.localRotation,Z$j._tempMatrix0),Z$ib.transformCoordinate(Z$a,Z$j._tempMatrix0,Z$j._tempVector30),Z$ib.add(this.localPosition,Z$j._tempVector30,this._localPosition),this.localPosition=this._localPosition):(Z$ib.add(this.position,Z$a,this._position),this.position=this._position)},Z$b.rotate=function(Z$a,Z$b,Z$c){var Z$d;void 0===Z$b&&(Z$b=!0),void 0===Z$c&&(Z$c=!0),Z$d=Z$c?Z$a:(Z$ib.scale(Z$a,Math.PI/180,Z$j._tempVector30),Z$j._tempVector30),Z$cb.createFromYawPitchRoll(Z$d.y,Z$d.x,Z$d.z,Z$j._tempQuaternion0),Z$b?(Z$cb.multiply(this._localRotation,Z$j._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(Z$cb.multiply(Z$j._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},Z$b.lookAt=function(Z$a,Z$b,Z$c){void 0===Z$c&&(Z$c=!1);var Z$d,Z$e=Z$a.elements;if(Z$c){if(Z$d=this._localPosition.elements,Math.abs(Z$d[0]-Z$e[0])<Z$ga.zeroTolerance&&Math.abs(Z$d[1]-Z$e[1])<Z$ga.zeroTolerance&&Math.abs(Z$d[2]-Z$e[2])<Z$ga.zeroTolerance)return;Z$cb.lookAt(this._localPosition,Z$a,Z$b,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var Z$f=this.position;if(Z$d=Z$f.elements,Math.abs(Z$d[0]-Z$e[0])<Z$ga.zeroTolerance&&Math.abs(Z$d[1]-Z$e[1])<Z$ga.zeroTolerance&&Math.abs(Z$d[2]-Z$e[2])<Z$ga.zeroTolerance)return;Z$cb.lookAt(Z$f,Z$a,Z$b,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},Z$q(0,Z$b,"_isFrontFaceInvert",function(){var Z$a=this.scale,Z$b=Z$a.x<0;return Z$a.y<0&&(Z$b=!Z$b),Z$a.z<0&&(Z$b=!Z$b),Z$b}),Z$q(0,Z$b,"owner",function(){return this._owner}),Z$q(0,Z$b,"localRotation",function(){if(this._localQuaternionUpdate){var Z$a=this._localRotationEuler.elements;Z$cb.createFromYawPitchRoll(Z$a[1]/Z$j._angleToRandin,Z$a[0]/Z$j._angleToRandin,Z$a[2]/Z$j._angleToRandin,this._localRotation)}return this._localRotation},function(Z$a){this._localRotation=Z$a,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),Z$q(0,Z$b,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?Z$ab.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(Z$a){null===this._parent?Z$a.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),Z$ab.multiply(this._localMatrix,Z$a,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=Z$a,this._worldUpdate=!1}),Z$q(0,Z$b,"worldNeedUpdate",function(){return this._worldUpdate}),Z$q(0,Z$b,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(Z$a){this._localMatrix=Z$a,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),Z$q(0,Z$b,"dummy",function(){return this._dummy},function(Z$a){this._dummy!==Z$a&&(this._dummy&&(this._dummy._entity=null),Z$a&&(Z$a._entity=this),this._dummy=Z$a)}),Z$q(0,Z$b,"localPosition",function(){return this._localPosition},function(Z$a){this._localPosition=Z$a,this._localUpdate=!0,this._onWorldPositionTransform()}),Z$q(0,Z$b,"position",function(){if(this._positionUpdate){if(null!=this._parent){var Z$a=this._parent.position;Z$ib.multiply(this._localPosition,this._parent.scale,Z$j._tempVector30),Z$ib.transformQuat(Z$j._tempVector30,this._parent.rotation,Z$j._tempVector30),Z$ib.add(Z$a,Z$j._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(Z$a){if(null!=this._parent){Z$ib.subtract(Z$a,this._parent.position,this._localPosition);var Z$b=this._parent.scale.elements,Z$c=Z$b[0],Z$d=Z$b[1],Z$e=Z$b[2];if(1!==Z$c||1!==Z$d||1!==Z$e){var Z$f=Z$j._tempVector30,Z$i=Z$f.elements;Z$i[0]=1/Z$c,Z$i[1]=1/Z$d,Z$i[2]=1/Z$e,Z$ib.multiply(this._localPosition,Z$f,this._localPosition)}this._parent.rotation.invert(Z$j._tempQuaternion0),Z$ib.transformQuat(this._localPosition,Z$j._tempQuaternion0,this._localPosition)}else Z$a.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=Z$a,this._positionUpdate=!1}),Z$q(0,Z$b,"localScale",function(){return this._localScale},function(Z$a){this._localScale=Z$a,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),Z$q(0,Z$b,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(Z$j._tempVector30);var Z$a=Z$j._tempVector30.elements,Z$b=this._localRotationEuler.elements;Z$b[0]=Z$a[1]*Z$j._angleToRandin,Z$b[1]=Z$a[0]*Z$j._angleToRandin,Z$b[2]=Z$a[2]*Z$j._angleToRandin}return this._localRotationEuler},function(Z$a){this._localRotationEuler=Z$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),Z$q(0,Z$b,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?Z$cb.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(Z$a){null!=this._parent?(this._parent.rotation.invert(Z$j._tempQuaternion0),Z$cb.multiply(Z$a,Z$j._tempQuaternion0,this._localRotation)):Z$a.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=Z$a,this._rotationUpdate=!1}),Z$q(0,Z$b,"scale",function(){return this._scaleUpdate&&(null!==this._parent?Z$ib.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(Z$a){if(null!==this._parent){var Z$b=this._parent.scale.elements,Z$c=Z$j._tempVector30.elements;Z$c[0]=1/Z$b[0],Z$c[1]=1/Z$b[1],Z$c[2]=1/Z$b[2],Z$ib.multiply(Z$a,Z$j._tempVector30,this._localScale)}else Z$a.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=Z$a,this._scaleUpdate=!1}),Z$q(0,Z$b,"rotationEuler",null,function(Z$a){Z$cb.createFromYawPitchRoll(Z$a.y,Z$a.x,Z$a.z,this._rotation),this.rotation=this._rotation}),Z$q(0,Z$b,"forward",function(){var Z$a=this.worldMatrix.elements;return this._forward.elements[0]=-Z$a[8],this._forward.elements[1]=-Z$a[9],this._forward.elements[2]=-Z$a[10],this._forward}),Z$q(0,Z$b,"up",function(){var Z$a=this.worldMatrix.elements;return this._up.elements[0]=Z$a[4],this._up.elements[1]=Z$a[5],this._up.elements[2]=Z$a[6],this._up}),Z$q(0,Z$b,"right",function(){var Z$a=this.worldMatrix.elements;return this._right.elements[0]=Z$a[0],this._right.elements[1]=Z$a[1],this._right.elements[2]=Z$a[2],this._right}),Z$q(0,Z$b,"parent",function(){return this._parent},function(Z$a){if(this._parent!==Z$a){if(this._parent){var Z$b=this._parent._childs,Z$c=Z$b.indexOf(this);Z$b.splice(Z$c,1)}Z$a&&(Z$a._childs.push(this),Z$a&&this._onWorldTransform()),this._parent=Z$a}}),Z$n(Z$j,["_tempVector30",function(){return this._tempVector30=new Z$ib},"_tempVector31",function(){return this._tempVector31=new Z$ib},"_tempVector32",function(){return this._tempVector32=new Z$ib},"_tempVector33",function(){return this._tempVector33=new Z$ib},"_tempQuaternion0",function(){return this._tempQuaternion0=new Z$cb},"_tempMatrix0",function(){return this._tempMatrix0=new Z$ab},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),Z$j}(),Z$zb=(function(Z$a){function Z$b(){this._rotation=0,this._matNeedUpdte=!1,Z$b.__super.call(this),this._matrix=new Z$ab,this._offset=new Z$fb,this._tiling=new Z$fb(1,1)}Z$p(Z$b,"laya.d3.core.TransformUV",Z$f);var Z$c=Z$b.prototype;Z$x.imps(Z$c,{"laya.d3.core.IClone":!0}),Z$c._updateMatrix=function(){Z$b._tempOffsetV3.elements[0]=this._offset.x,Z$b._tempOffsetV3.elements[1]=this._offset.y,Z$cb.createFromYawPitchRoll(0,0,this._rotation,Z$b._tempRotationQua),Z$b._tempTitlingV3.elements[0]=this._tiling.x,Z$b._tempTitlingV3.elements[1]=this._tiling.y,Z$ab.createAffineTransformation(Z$b._tempOffsetV3,Z$b._tempRotationQua,Z$b._tempTitlingV3,this._matrix)},Z$c.cloneTo=function(Z$a){Z$a._matrix=this._matrix.clone(),Z$a._offset=this._offset.clone(),Z$a._rotation=this._rotation,Z$a._tiling=this._tiling.clone()},Z$c.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$c,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),Z$q(0,Z$c,"tiling",function(){return this._tiling},function(Z$a){this._tiling=Z$a,this._matNeedUpdte=!0}),Z$q(0,Z$c,"offset",function(){return this._offset},function(Z$a){this._offset=Z$a,this._matNeedUpdte=!0}),Z$q(0,Z$c,"rotation",function(){return this._rotation},function(Z$a){this._rotation=Z$a,this._matNeedUpdte=!0}),Z$n(Z$b,["_tempOffsetV3",function(){return this._tempOffsetV3=new Z$ib(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new Z$cb},"_tempTitlingV3",function(){return this._tempTitlingV3=new Z$ib(1,1,1)}])}(),function(Z$c){function Z$a(){this.x=NaN,this.y=NaN,this.z=NaN,Z$a.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.shape.BoxShape",Z$c);var Z$b=Z$a.prototype;Z$b._getShapeBoundBox=function(Z$a){var Z$b=Z$a.min.elements;Z$b[0]=.5*-this.x,Z$b[1]=.5*-this.y,Z$b[2]=.5*-this.z;var Z$c=Z$a.max.elements;Z$c[0]=.5*this.x,Z$c[1]=.5*this.y,Z$c[2]=.5*this.z},Z$b._getSpeedBoundBox=function(Z$a){var Z$b=Z$a.min.elements;Z$b[0]=0,Z$b[1]=0,Z$b[2]=0;var Z$c=Z$a.max.elements;Z$c[0]=0,Z$c[1]=1,Z$c[2]=0},Z$b.generatePositionAndDirection=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.elements,Z$f=Z$b.elements;Z$c?(Z$c.seed=Z$d[16],Z$T._randomPointInsideHalfUnitBox(Z$a,Z$c),Z$d[16]=Z$c.seed):Z$T._randomPointInsideHalfUnitBox(Z$a),Z$e[0]=this.x*Z$e[0],Z$e[1]=this.y*Z$e[1],Z$e[2]=this.z*Z$e[2],this.randomDirection?Z$c?(Z$c.seed=Z$d[17],Z$T._randomPointUnitSphere(Z$b,Z$c),Z$d[17]=Z$c.seed):Z$T._randomPointUnitSphere(Z$b):(Z$f[0]=0,Z$f[1]=0,Z$f[2]=1)},Z$b.cloneTo=function(Z$a){Z$c.prototype.cloneTo.call(this,Z$a);var Z$b=Z$a;Z$b.x=this.x,Z$b.y=this.y,Z$b.z=this.z,Z$b.randomDirection=this.randomDirection}}(Z$O),function(Z$c){function Z$i(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,Z$i.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}Z$p(Z$i,"laya.d3.core.particleShuriKen.module.shape.CircleShape",Z$c);var Z$a=Z$i.prototype;Z$a._getShapeBoundBox=function(Z$a){var Z$b=Z$a.min.elements;Z$b[0]=Z$b[2]=-this.radius,Z$b[1]=0;var Z$c=Z$a.max.elements;Z$c[0]=Z$c[2]=this.radius,Z$c[1]=0},Z$a._getSpeedBoundBox=function(Z$a){var Z$b=Z$a.min.elements;Z$b[0]=Z$b[1]=-1,Z$b[2]=0;var Z$c=Z$a.max.elements;Z$c[0]=Z$c[1]=1,Z$c[2]=0},Z$a.generatePositionAndDirection=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.elements,Z$f=Z$i._tempPositionPoint.elements;Z$c?(Z$c.seed=Z$d[16],this.emitFromEdge?Z$T._randomPointUnitArcCircle(this.arc,Z$i._tempPositionPoint,Z$c):Z$T._randomPointInsideUnitArcCircle(this.arc,Z$i._tempPositionPoint,Z$c),Z$d[16]=Z$c.seed):this.emitFromEdge?Z$T._randomPointUnitArcCircle(this.arc,Z$i._tempPositionPoint):Z$T._randomPointInsideUnitArcCircle(this.arc,Z$i._tempPositionPoint),Z$e[0]=-Z$f[0],Z$e[1]=Z$f[1],Z$e[2]=0,Z$ib.scale(Z$a,this.radius,Z$a),this.randomDirection?Z$c?(Z$c.seed=Z$d[17],Z$T._randomPointUnitSphere(Z$b,Z$c),Z$d[17]=Z$c.seed):Z$T._randomPointUnitSphere(Z$b):Z$a.cloneTo(Z$b)},Z$a.cloneTo=function(Z$a){Z$c.prototype.cloneTo.call(this,Z$a);var Z$b=Z$a;Z$b.radius=this.radius,Z$b.arc=this.arc,Z$b.emitFromEdge=this.emitFromEdge,Z$b.randomDirection=this.randomDirection},Z$n(Z$i,["_tempPositionPoint",function(){return this._tempPositionPoint=new Z$fb}])}(Z$O),function(Z$c){function Z$o(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,Z$o.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}Z$p(Z$o,"laya.d3.core.particleShuriKen.module.shape.ConeShape",Z$c);var Z$a=Z$o.prototype;Z$a._getShapeBoundBox=function(Z$a){var Z$b=this.radius+this.length*Math.sin(this.angle),Z$c=this.length*Math.cos(this.angle),Z$d=Z$a.min.elements;Z$d[0]=Z$d[1]=-Z$b,Z$d[2]=0;var Z$e=Z$a.max.elements;Z$e[0]=Z$e[1]=Z$b,Z$e[2]=Z$c},Z$a._getSpeedBoundBox=function(Z$a){var Z$b=Math.sin(this.angle),Z$c=Z$a.min.elements;Z$c[0]=Z$c[1]=-Z$b,Z$c[2]=0;var Z$d=Z$a.max.elements;Z$d[0]=Z$c[1]=Z$b,Z$d[2]=1},Z$a.generatePositionAndDirection=function(Z$a,Z$b,Z$c,Z$d){var Z$e,Z$f=Z$a.elements,Z$i=Z$b.elements,Z$j=Z$o._tempPositionPoint.elements,Z$k=NaN,Z$l=NaN,Z$m=Math.cos(this.angle),Z$n=Math.sin(this.angle);switch(this.emitType){case 0:Z$c?(Z$c.seed=Z$d[16],Z$T._randomPointInsideUnitCircle(Z$o._tempPositionPoint,Z$c),Z$d[16]=Z$c.seed):Z$T._randomPointInsideUnitCircle(Z$o._tempPositionPoint),Z$k=Z$j[0],Z$l=Z$j[1],Z$f[0]=Z$k*this.radius,Z$f[1]=Z$l*this.radius,Z$f[2]=0,this.randomDirection?(Z$c?(Z$c.seed=Z$d[17],Z$T._randomPointInsideUnitCircle(Z$o._tempDirectionPoint,Z$c),Z$d[17]=Z$c.seed):Z$T._randomPointInsideUnitCircle(Z$o._tempDirectionPoint),Z$e=Z$o._tempDirectionPoint.elements,Z$i[0]=Z$e[0]*Z$n,Z$i[1]=Z$e[1]*Z$n):(Z$i[0]=Z$k*Z$n,Z$i[1]=Z$l*Z$n),Z$i[2]=Z$m;break;case 1:Z$c?(Z$c.seed=Z$d[16],Z$T._randomPointUnitCircle(Z$o._tempPositionPoint,Z$c),Z$d[16]=Z$c.seed):Z$T._randomPointUnitCircle(Z$o._tempPositionPoint),Z$k=Z$j[0],Z$l=Z$j[1],Z$f[0]=Z$k*this.radius,Z$f[1]=Z$l*this.radius,Z$f[2]=0,this.randomDirection?(Z$c?(Z$c.seed=Z$d[17],Z$T._randomPointInsideUnitCircle(Z$o._tempDirectionPoint,Z$c),Z$d[17]=Z$c.seed):Z$T._randomPointInsideUnitCircle(Z$o._tempDirectionPoint),Z$e=Z$o._tempDirectionPoint.elements,Z$i[0]=Z$e[0]*Z$n,Z$i[1]=Z$e[1]*Z$n):(Z$i[0]=Z$k*Z$n,Z$i[1]=Z$l*Z$n),Z$i[2]=Z$m;break;case 2:Z$c?(Z$c.seed=Z$d[16],Z$T._randomPointInsideUnitCircle(Z$o._tempPositionPoint,Z$c)):Z$T._randomPointInsideUnitCircle(Z$o._tempPositionPoint),Z$k=Z$j[0],Z$l=Z$j[1],Z$f[0]=Z$k*this.radius,Z$f[1]=Z$l*this.radius,Z$i[Z$f[2]=0]=Z$k*Z$n,Z$i[1]=Z$l*Z$n,Z$i[2]=Z$m,Z$ib.normalize(Z$b,Z$b),Z$c?(Z$ib.scale(Z$b,this.length*Z$c.getFloat(),Z$b),Z$d[16]=Z$c.seed):Z$ib.scale(Z$b,this.length*Math.random(),Z$b),Z$ib.add(Z$a,Z$b,Z$a),this.randomDirection&&(Z$c?(Z$c.seed=Z$d[17],Z$T._randomPointUnitSphere(Z$b,Z$c),Z$d[17]=Z$c.seed):Z$T._randomPointUnitSphere(Z$b));break;case 3:Z$c?(Z$c.seed=Z$d[16],Z$T._randomPointUnitCircle(Z$o._tempPositionPoint,Z$c)):Z$T._randomPointUnitCircle(Z$o._tempPositionPoint),Z$k=Z$j[0],Z$l=Z$j[1],Z$f[0]=Z$k*this.radius,Z$f[1]=Z$l*this.radius,Z$i[Z$f[2]=0]=Z$k*Z$n,Z$i[1]=Z$l*Z$n,Z$i[2]=Z$m,Z$ib.normalize(Z$b,Z$b),Z$c?(Z$ib.scale(Z$b,this.length*Z$c.getFloat(),Z$b),Z$d[16]=Z$c.seed):Z$ib.scale(Z$b,this.length*Math.random(),Z$b),Z$ib.add(Z$a,Z$b,Z$a),this.randomDirection&&(Z$c?(Z$c.seed=Z$d[17],Z$T._randomPointUnitSphere(Z$b,Z$c),Z$d[17]=Z$c.seed):Z$T._randomPointUnitSphere(Z$b));break;default:throw new Error("ConeShape:emitType is invalid.")}},Z$a.cloneTo=function(Z$a){Z$c.prototype.cloneTo.call(this,Z$a);var Z$b=Z$a;Z$b.angle=this.angle,Z$b.radius=this.radius,Z$b.length=this.length,Z$b.emitType=this.emitType,Z$b.randomDirection=this.randomDirection},Z$n(Z$o,["_tempPositionPoint",function(){return this._tempPositionPoint=new Z$fb},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new Z$fb}])}(Z$O),function(Z$c){function Z$a(){this.radius=NaN,this.emitFromShell=!1,Z$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",Z$c);var Z$b=Z$a.prototype;Z$b._getShapeBoundBox=function(Z$a){var Z$b=Z$a.min.elements;Z$b[0]=Z$b[1]=Z$b[2]=-this.radius;var Z$c=Z$a.max.elements;Z$c[0]=Z$c[1]=this.radius,Z$c[2]=0},Z$b._getSpeedBoundBox=function(Z$a){var Z$b=Z$a.min.elements;Z$b[0]=Z$b[1]=-1,Z$b[2]=0;var Z$c=Z$a.max.elements;Z$c[0]=Z$c[1]=Z$c[2]=1},Z$b.generatePositionAndDirection=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.elements;Z$c?(Z$c.seed=Z$d[16],this.emitFromShell?Z$T._randomPointUnitSphere(Z$a,Z$c):Z$T._randomPointInsideUnitSphere(Z$a,Z$c),Z$d[16]=Z$c.seed):this.emitFromShell?Z$T._randomPointUnitSphere(Z$a):Z$T._randomPointInsideUnitSphere(Z$a),Z$ib.scale(Z$a,this.radius,Z$a);var Z$f=Z$e[2];Z$f<0&&(Z$e[2]=-1*Z$f),this.randomDirection?Z$c?(Z$c.seed=Z$d[17],Z$T._randomPointUnitSphere(Z$b,Z$c),Z$d[17]=Z$c.seed):Z$T._randomPointUnitSphere(Z$b):Z$a.cloneTo(Z$b)},Z$b.cloneTo=function(Z$a){Z$c.prototype.cloneTo.call(this,Z$a);var Z$b=Z$a;Z$b.radius=this.radius,Z$b.emitFromShell=this.emitFromShell,Z$b.randomDirection=this.randomDirection}}(Z$O),function(Z$c){function Z$a(){this.radius=NaN,this.emitFromShell=!1,Z$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}Z$p(Z$a,"laya.d3.core.particleShuriKen.module.shape.SphereShape",Z$c);var Z$b=Z$a.prototype;Z$b._getShapeBoundBox=function(Z$a){var Z$b=Z$a.min.elements;Z$b[0]=Z$b[1]=Z$b[2]=-this.radius;var Z$c=Z$a.max.elements;Z$c[0]=Z$c[1]=Z$c[2]=this.radius},Z$b._getSpeedBoundBox=function(Z$a){var Z$b=Z$a.min.elements;Z$b[0]=Z$b[1]=Z$b[2]=-1;var Z$c=Z$a.max.elements;Z$c[0]=Z$c[1]=Z$c[2]=1},Z$b.generatePositionAndDirection=function(Z$a,Z$b,Z$c,Z$d){Z$c?(Z$c.seed=Z$d[16],this.emitFromShell?Z$T._randomPointUnitSphere(Z$a,Z$c):Z$T._randomPointInsideUnitSphere(Z$a,Z$c),Z$d[16]=Z$c.seed):this.emitFromShell?Z$T._randomPointUnitSphere(Z$a):Z$T._randomPointInsideUnitSphere(Z$a),Z$ib.scale(Z$a,this.radius,Z$a),this.randomDirection?Z$c?(Z$c.seed=Z$d[17],Z$T._randomPointUnitSphere(Z$b,Z$c),Z$d[17]=Z$c.seed):Z$T._randomPointUnitSphere(Z$b):Z$a.cloneTo(Z$b)},Z$b.cloneTo=function(Z$a){Z$c.prototype.cloneTo.call(this,Z$a);var Z$b=Z$a;Z$b.radius=this.radius,Z$b.emitFromShell=this.emitFromShell,Z$b.randomDirection=this.randomDirection}}(Z$O),function(Z$a){function Z$b(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,Z$b.__super.call(this)}return Z$p(Z$b,"laya.d3.core.render.SubMeshRenderElement",Z$W),Z$b}()),Z$Ab=function(Z$a){function Z$s(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=Z$a,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[Z$pb.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[Z$Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[Z$Vb.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[Z$Eb.SHADERDEFINE_ALPHATEST]="ALPHATEST";Z$s.__super.call(this,Z$a,Z$b,Z$c,null,{}),this._attributeMap=Z$d;var Z$i;for(Z$i in Z$e){var Z$j=Z$e[Z$i];switch(Z$j[1]){case 0:this._renderElementUniformMap[Z$i]=Z$j[0];break;case 1:this._materialUniformMap[Z$i]=Z$j[0];break;case 2:this._spriteUniformMap[Z$i]=Z$j[0];break;case 3:this._cameraUniformMap[Z$i]=Z$j[0];break;case 4:this._sceneUniformMap[Z$i]=Z$j[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}Z$p(Z$s,"laya.d3.shader.ShaderCompile3D",Z$v);var Z$b=Z$s.prototype;return Z$b._definesToNameDic=function(Z$a,Z$b){for(var Z$c={},Z$d=1,Z$e=0;Z$e<32&&!(Z$a<(Z$d=1<<Z$e));Z$e++)if(Z$a&Z$d){var Z$f=Z$b[Z$d];Z$f&&(Z$c[Z$f]="")}return Z$c},Z$b.withCompile=function(Z$a,Z$b,Z$c,Z$d){var Z$e,Z$f,Z$i;if(Z$f=this.sharders[Z$a])if(Z$i=Z$f[Z$b]){if(Z$e=Z$i[Z$c])return Z$e}else Z$i=Z$f[Z$b]=[];else Z$i=(Z$f=this.sharders[Z$a]=[])[Z$b]=[];var Z$j,Z$k=this._definesToNameDic(Z$a,Z$s._globalInt2name),Z$l=this._definesToNameDic(Z$b,this._spriteInt2name),Z$m=this._definesToNameDic(Z$c,this._materialInt2name),Z$n={},Z$o="";if(Z$k)for(Z$j in Z$k)Z$o+="#define "+Z$j+"\n",Z$n[Z$j]=!0;if(Z$l)for(Z$j in Z$l)Z$o+="#define "+Z$j+"\n",Z$n[Z$j]=!0;if(Z$m)for(Z$j in Z$m)Z$o+="#define "+Z$j+"\n",Z$n[Z$j]=!0;var Z$p=Z$Lb.nameKey.getName(this._name)+" compile ("+Z$a+","+Z$b+","+Z$c+")",Z$q=this._VS.toscript(Z$n,[]),Z$r=this._PS.toscript(Z$n,[]);Z$H.now();if(Z$e=Z$Lb.create(Z$o+Z$q.join("\n"),Z$o+Z$r.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,Z$d,Z$p),Z$i[Z$c]=Z$e,laya.d3.shader.ShaderCompile3D.debugMode)Z$H.now();return Z$e},Z$b.precompileShaderWithShaderDefine=function(Z$a,Z$b,Z$c){this.withCompile(Z$a,Z$b,Z$c,!0)},Z$b.addMaterialDefines=function(Z$a){var Z$b=Z$a.defines;for(var Z$c in Z$b){var Z$d=Z$b[Z$c],Z$e=parseInt(Z$c);this._materialInt2name[Z$e]=Z$d,this._materialName2Int[Z$d]=Z$e}},Z$b.addSpriteDefines=function(Z$a){var Z$b=Z$a.defines;for(var Z$c in Z$b){var Z$d=Z$b[Z$c],Z$e=parseInt(Z$c);this._spriteInt2name[Z$e]=Z$d,this._spriteName2Int[Z$d]=Z$e}},Z$b.getMaterialDefineByName=function(Z$a){return this._materialName2Int[Z$a]},Z$b.registerMaterialDefine=function(Z$a){var Z$b=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[Z$b]=Z$a,this._materialName2Int[Z$a]=Z$b},Z$b.registerSpriteDefine=function(Z$a){var Z$b=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[Z$b]=Z$a,this._spriteName2Int[Z$a]=Z$b},Z$s._globalRegDefine=function(Z$a,Z$b){Z$s._globalInt2name[Z$b]=Z$a},Z$s.add=function(Z$a,Z$b,Z$c,Z$d,Z$e){return laya.d3.shader.ShaderCompile3D._preCompileShader[Z$a]=new Z$s(Z$a,Z$b,Z$c,Z$d,Z$e,Z$v.includes)},Z$s.get=function(Z$a){return laya.d3.shader.ShaderCompile3D._preCompileShader[Z$Lb.nameKey.getID(Z$a)]},Z$s._preCompileShader={},Z$s._globalInt2name=[],Z$s.debugMode=!1,Z$s.SHADERDEFINE_HIGHPRECISION=1,Z$s.SHADERDEFINE_FOG=4,Z$s.SHADERDEFINE_DIRECTIONLIGHT=8,Z$s.SHADERDEFINE_POINTLIGHT=16,Z$s.SHADERDEFINE_SPOTLIGHT=32,Z$s.SHADERDEFINE_UV0=64,Z$s.SHADERDEFINE_COLOR=128,Z$s.SHADERDEFINE_UV1=256,Z$s.SAHDERDEFINE_DEPTHFOG=131072,Z$s}(),Z$Bb=function(Z$a){function Z$q(){Z$q.__super.call(this)}Z$p(Z$q,"laya.d3.graphics.MeshSprite3DStaticBatchManager",Z$da);var Z$b=Z$q.prototype;return Z$b._getStaticBatch=function(Z$a,Z$b,Z$c,Z$d){var Z$e,Z$f;return Z$f=Z$a?Z$a.id.toString()+Z$c.id.toString()+Z$b.id.toString()+Z$d.toString():Z$c.id.toString()+Z$b.id.toString()+Z$d.toString(),this._staticBatches[Z$f]?Z$e=this._staticBatches[Z$f]:this._staticBatches[Z$f]=Z$e=new Z$Cb(Z$f,this,Z$a,Z$b,Z$c),Z$e},Z$b._initStaticBatchs=function(Z$a){var Z$b,Z$c;this._initBatchRenderElements.sort(Z$q._sortPrepareStaticBatch);for(var Z$d,Z$e=!1,Z$f=0,Z$i=0,Z$j=this._initBatchRenderElements.length;Z$i<Z$j;Z$i++){var Z$k,Z$l=this._initBatchRenderElements[Z$i],Z$m=Z$l.renderObj._getVertexBuffer(0);Z$l._sprite3D;if(Z$c===Z$m.vertexDeclaration&&Z$b===Z$l._material)if(Z$e)Z$d._addCombineBatchRenderObjTest(Z$l)?(Z$k=Z$l._staticBatch)!==Z$d&&(Z$k&&Z$k._deleteCombineBatchRenderObj(Z$l),Z$d._addCombineBatchRenderObj(Z$l)):(Z$e=!1,Z$f++);else{var Z$n=this._initBatchRenderElements[Z$i-1],Z$o=Z$n.renderObj,Z$p=Z$l.renderObj;Z$e=!(65535<Z$o._getVertexBuffer().vertexCount+Z$p._getVertexBuffer().vertexCount)&&(Z$d=this._getStaticBatch(Z$a,Z$c,Z$b,Z$f),(Z$k=Z$n._staticBatch)!==Z$d&&(Z$k&&Z$k._deleteCombineBatchRenderObj(Z$n),Z$d._addCombineBatchRenderObj(Z$n)),(Z$k=Z$l._staticBatch)!==Z$d&&(Z$k&&Z$k._deleteCombineBatchRenderObj(Z$l),Z$d._addCombineBatchRenderObj(Z$l)),!0)}else Z$e=!1,Z$f=0;Z$b=Z$l._material,Z$c=Z$m.vertexDeclaration}},Z$q._sortPrepareStaticBatch=function(Z$a,Z$b){var Z$c=Z$a._render,Z$d=Z$b._render,Z$e=Z$c.lightmapIndex-Z$d.lightmapIndex;if(0!=Z$e)return Z$e;var Z$f=Z$c.receiveShadow-Z$d.receiveShadow;if(0!=Z$f)return Z$f;var Z$i=Z$a._mainSortID-Z$b._mainSortID;return 0==Z$i?Z$a.renderObj.triangleCount-Z$b.renderObj.triangleCount:Z$i},Z$q}(),Z$Cb=function(Z$a){function Z$f(Z$a,Z$b,Z$c,Z$d,Z$e){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,Z$f.__super.call(this,Z$a,Z$b,Z$c),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=Z$d,this._material=Z$e}Z$p(Z$f,"laya.d3.graphics.SubMeshStaticBatch",Z$ea);var Z$b=Z$f.prototype;return Z$b._compareBatchRenderElement=function(Z$a,Z$b){return Z$a._batchIndexStart>Z$b._batchIndexStart},Z$b._addCombineBatchRenderObjTest=function(Z$a){var Z$b=Z$a.renderObj._vertexCount;return!(65535<(0<Z$b?this._currentCombineVertexCount+Z$b:this._currentCombineVertexCount+Z$a.renderObj._getVertexBuffer().vertexCount))},Z$b._addCombineBatchRenderObj=function(Z$a){var Z$b=Z$a.renderObj,Z$c=Z$b._vertexCount;this._initBatchRenderElements.push(Z$a),Z$a._staticBatch=this,0<Z$c?(this._currentCombineIndexCount+=Z$b._indexCount,this._currentCombineVertexCount+=Z$c):(this._currentCombineIndexCount=this._currentCombineIndexCount+Z$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+Z$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0},Z$b._deleteCombineBatchRenderObj=function(Z$a){var Z$b=Z$a.renderObj,Z$c=this._initBatchRenderElements.indexOf(Z$a);if(-1!==Z$c){this._initBatchRenderElements.splice(Z$c,1),Z$a._staticBatch=null;var Z$d=Z$b._vertexCount;0<Z$d?(this._currentCombineIndexCount=this._currentCombineIndexCount-Z$b._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-Z$d):(this._currentCombineIndexCount=this._currentCombineIndexCount-Z$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-Z$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},Z$b._finishInit=function(){if(this._needFinishCombine){var Z$a=0,Z$b=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var Z$c=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),Z$d=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=Z$Ob.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=Z$Nb.create("ushort",this._currentCombineIndexCount,35044);for(var Z$e=0,Z$f=this._initBatchRenderElements.length;Z$e<Z$f;Z$e++){var Z$i=this._initBatchRenderElements[Z$e],Z$j=Z$i.renderObj,Z$k=Z$j._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,Z$i._sprite3D),Z$l=Z$j.getIndices(),Z$m=Z$i._sprite3D.transform._isFrontFaceInvert,Z$n=Z$a/(this._vertexDeclaration.vertexStride/4)-Z$j._vertexStart,Z$o=Z$b,Z$p=Z$o+Z$l.length;Z$i._batchIndexStart=Z$o,Z$i._batchIndexEnd=Z$p,Z$d.set(Z$l,Z$b);var Z$q=0;if(Z$m)for(Z$q=Z$o;Z$q<Z$p;Z$q+=3){Z$d[Z$q]=Z$n+Z$d[Z$q];var Z$r=Z$d[Z$q+1],Z$s=Z$d[Z$q+2];Z$d[Z$q+1]=Z$n+Z$s,Z$d[Z$q+2]=Z$n+Z$r}else for(Z$q=Z$o;Z$q<Z$p;Z$q+=3)Z$d[Z$q]=Z$n+Z$d[Z$q],Z$d[Z$q+1]=Z$n+Z$d[Z$q+1],Z$d[Z$q+2]=Z$n+Z$d[Z$q+2];Z$b+=Z$l.length,Z$c.set(Z$k,Z$a),Z$a+=Z$k.length}this._vertexBuffer.setData(Z$c),this._indexBuffer.setData(Z$d),this._needFinishCombine=!1}},Z$b._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new Z$zb)},Z$b._getRenderElement=function(Z$a,Z$b,Z$c){for(var Z$d,Z$e,Z$f=this._batchRenderElements.length,Z$i=!0,Z$j=0;Z$j<Z$f;Z$j++){var Z$k,Z$l,Z$m=(Z$e=this._batchRenderElements[Z$j])._sprite3D._render;if(0!==Z$j&&(Z$i=(Z$k=(Z$d=this._batchRenderElements[Z$j-1])._sprite3D._render).lightmapIndex!==Z$m.lightmapIndex||Z$k.receiveShadow!==Z$m.receiveShadow||Z$d._batchIndexEnd!==Z$e._batchIndexStart),Z$i){(Z$l=this._getCombineRenderElementFromPool()).renderObj=this,Z$l._material=this._material,Z$l._batchIndexStart=Z$e._batchIndexStart,Z$l._batchIndexEnd=Z$e._batchIndexEnd;var Z$n=Z$m.lightmapIndex,Z$o=Z$n+1,Z$p=this._batchOwnerIndices[Z$o];Z$p||(Z$p=this._batchOwnerIndices[Z$o]=[]);var Z$q,Z$r=Z$p[Z$e._render.receiveShadow?1:0];void 0===Z$r?(Z$p[Z$m.receiveShadow?1:0]=this._batchOwners.length,(Z$q=new Z$Xb(null,"StaticBatchMeshSprite3D"))._scene=Z$b,Z$q._transform=this._rootOwner?this._rootOwner._transform:null,Z$q._render.lightmapIndex=Z$n,Z$q._render.receiveShadow=Z$e._render.receiveShadow,this._batchOwners.push(Z$q)):Z$q=this._batchOwners[Z$r],Z$q._render._renderUpdate(Z$c),Z$l._sprite3D=Z$q,Z$a.push(Z$l)}else Z$l._batchIndexEnd=Z$e._batchIndexEnd}},Z$b._beforeRender=function(Z$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},Z$b._render=function(Z$a){var Z$b=Z$a.renderElement,Z$c=Z$b._batchIndexStart,Z$d=Z$b._batchIndexEnd-Z$c;Z$F.mainContext.drawElements(4,Z$d,5123,2*Z$c),Z$A.drawCall++,Z$A.trianglesFaces+=Z$d/3},Z$b.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},Z$b._getVertexBuffer=function(Z$a){return void 0===Z$a&&(Z$a=0),this._vertexBuffer},Z$f}(),Z$Db=function(Z$a){function Z$b(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,Z$b.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}Z$p(Z$b,"laya.d3.core.ComponentNode",Z$l);var Z$c=Z$b.prototype;return Z$c.addComponent=function(Z$a){var Z$b,Z$c=this._componentsMap.indexOf(Z$a);if(-1===Z$c)Z$b=[],this._componentsMap.push(Z$a),this._typeComponentsIndices.push(Z$b);else if(Z$b=this._typeComponentsIndices[Z$c],this._components[Z$b[0]].isSingleton)throw new Error("无法单实例创建"+Z$a+"组件，"+Z$a+"组件已存在！");var Z$d=Z$e.getInstance(Z$a);return Z$b.push(this._components.length),this._components.push(Z$d),Z$d instanceof laya.d3.component.Script&&this._scripts.push(Z$d),Z$d._initialize(this),Z$d},Z$c._removeComponent=function(Z$a,Z$b){var Z$c=this._typeComponentsIndices[Z$a],Z$d=Z$c[Z$b],Z$e=this._components[Z$d];this._components.splice(Z$d,1),Z$e instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(Z$e),1),Z$c.splice(Z$b,1),0===Z$c.length&&(this._typeComponentsIndices.splice(Z$a,1),this._componentsMap.splice(Z$a,1));for(var Z$f=0,Z$i=this._componentsMap.length;Z$f<Z$i;Z$f++)for(var Z$j=(Z$c=this._typeComponentsIndices[Z$f]).length-1;0<=Z$j;Z$j--){var Z$k=Z$c[Z$j];if(!(Z$d<Z$k))break;Z$c[Z$j]=--Z$k}Z$e._destroy()},Z$c.getComponentByType=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0);var Z$c=this._componentsMap.indexOf(Z$a);return-1===Z$c?null:this._components[this._typeComponentsIndices[Z$c][Z$b]]},Z$c.getComponentsByType=function(Z$a,Z$b){var Z$c=this._componentsMap.indexOf(Z$a);if(-1!==Z$c){var Z$d=this._typeComponentsIndices[Z$c],Z$e=Z$d.length;Z$b.length=Z$e;for(var Z$f=0;Z$f<Z$e;Z$f++)Z$b[Z$f]=this._components[Z$d[Z$f]]}else Z$b.length=0},Z$c.getComponentByIndex=function(Z$a){return this._components[Z$a]},Z$c.removeComponentByType=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0);var Z$c=this._componentsMap.indexOf(Z$a);-1!==Z$c&&this._removeComponent(Z$c,Z$b)},Z$c.removeComponentsByType=function(Z$a){var Z$b=this._componentsMap.indexOf(Z$a);if(-1!==Z$b)for(var Z$c=this._typeComponentsIndices[Z$b],Z$d=0,Z$e=Z$c.length;Z$d<Z$e;Z$c.length<Z$e?Z$e--:Z$d++)this._removeComponent(Z$b,Z$d)},Z$c.removeAllComponent=function(){for(var Z$a=0,Z$b=this._componentsMap.length;Z$a<Z$b;this._componentsMap.length<Z$b?Z$b--:Z$a++)this.removeComponentsByType(this._componentsMap[Z$a])},Z$c._updateComponents=function(Z$a){for(var Z$b=0,Z$c=this._components.length;Z$b<Z$c;Z$b++){var Z$d=this._components[Z$b];!Z$d.started&&(Z$d._start(Z$a),Z$d.started=!0),Z$d.enable&&Z$d._update(Z$a)}},Z$c._lateUpdateComponents=function(Z$a){for(var Z$b=0;Z$b<this._components.length;Z$b++){var Z$c=this._components[Z$b];!Z$c.started&&(Z$c._start(Z$a),Z$c.started=!0),Z$c.enable&&Z$c._lateUpdate(Z$a)}},Z$c._preRenderUpdateComponents=function(Z$a){for(var Z$b=0;Z$b<this._components.length;Z$b++){var Z$c=this._components[Z$b];!Z$c.started&&(Z$c._start(Z$a),Z$c.started=!0),Z$c.enable&&Z$c._preRenderUpdate(Z$a)}},Z$c._postRenderUpdateComponents=function(Z$a){for(var Z$b=0;Z$b<this._components.length;Z$b++){var Z$c=this._components[Z$b];!Z$c.started&&(Z$c._start(Z$a),Z$c.started=!0),Z$c.enable&&Z$c._postRenderUpdate(Z$a)}},Z$b}(),Z$Eb=function(Z$d){function Z$a(){Z$a.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new Z$ob,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new Z$jb(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}Z$p(Z$a,"laya.d3.core.material.BaseMaterial",Z$d);var Z$b=Z$a.prototype;return Z$x.imps(Z$b,{"laya.d3.core.IClone":!0}),Z$b._addShaderDefine=function(Z$a){this._shaderDefineValue|=Z$a},Z$b._removeShaderDefine=function(Z$a){this._shaderDefineValue&=~Z$a},Z$b._addDisablePublicShaderDefine=function(Z$a){this._disablePublicShaderDefine|=Z$a},Z$b._removeDisablePublicShaderDefine=function(Z$a){this._disablePublicShaderDefine&=~Z$a},Z$b._setBuffer=function(Z$a,Z$b){this._shaderValues.setValue(Z$a,Z$b),this._values[Z$a]=Z$b},Z$b._getBuffer=function(Z$a){return this._values[Z$a]},Z$b._setMatrix4x4=function(Z$a,Z$b){this._shaderValues.setValue(Z$a,Z$b?Z$b.elements:null),this._values[Z$a]=Z$b},Z$b._getMatrix4x4=function(Z$a){return this._values[Z$a]},Z$b._setInt=function(Z$a,Z$b){this._shaderValues.setValue(Z$a,Z$b),this._values[Z$a]=Z$b},Z$b._getInt=function(Z$a){return this._values[Z$a]},Z$b._setNumber=function(Z$a,Z$b){this._shaderValues.setValue(Z$a,Z$b),this._values[Z$a]=Z$b},Z$b._getNumber=function(Z$a){return this._values[Z$a]},Z$b._setBool=function(Z$a,Z$b){this._shaderValues.setValue(Z$a,Z$b),this._values[Z$a]=Z$b},Z$b._getBool=function(Z$a){return this._values[Z$a]},Z$b._setVector2=function(Z$a,Z$b){this._shaderValues.setValue(Z$a,Z$b?Z$b.elements:null),this._values[Z$a]=Z$b},Z$b._getVector2=function(Z$a){return this._values[Z$a]},Z$b._setColor=function(Z$a,Z$b){this._shaderValues.setValue(Z$a,Z$b?Z$b.elements:null),this._values[Z$a]=Z$b},Z$b._getColor=function(Z$a){return this._values[Z$a]},Z$b._setTexture=function(Z$a,Z$b){var Z$c=this._values[Z$a];this._values[Z$a]=Z$b,this._shaderValues.setValue(Z$a,Z$b),0<this.referenceCount&&(Z$c&&Z$c._removeReference(),Z$b&&Z$b._addReference())},Z$b._getTexture=function(Z$a){return this._values[Z$a]},Z$b._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},Z$b._getShader=function(Z$a,Z$b,Z$c){var Z$d=(Z$a|Z$b)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(Z$d,Z$c,this._shaderDefineValue),this._shader},Z$b._setRenderStateBlendDepth=function(){var Z$a=Z$F.mainContext;switch(Z$G.setDepthMask(Z$a,this.depthWrite),0===this.depthTest?Z$G.setDepthTest(Z$a,!1):(Z$G.setDepthTest(Z$a,!0),Z$G.setDepthFunc(Z$a,this.depthTest)),this.blend){case 0:Z$G.setBlend(Z$a,!1);break;case 1:Z$G.setBlend(Z$a,!0),Z$G.setBlendFunc(Z$a,this.srcBlend,this.dstBlend);break;case 2:Z$G.setBlend(Z$a,!0)}},Z$b._setRenderStateFrontFace=function(Z$a,Z$b){var Z$c=Z$F.mainContext,Z$d=0;switch(this.cull){case 0:Z$G.setCullFace(Z$c,!1);break;case 1:Z$G.setCullFace(Z$c,!0),Z$d=Z$a?Z$b&&Z$b._isFrontFaceInvert?2305:2304:Z$b&&Z$b._isFrontFaceInvert?2304:2305,Z$G.setFrontFace(Z$c,Z$d);break;case 2:Z$G.setCullFace(Z$c,!0),Z$d=Z$a?Z$b&&Z$b._isFrontFaceInvert?2304:2305:Z$b&&Z$b._isFrontFaceInvert?2305:2304,Z$G.setFrontFace(Z$c,Z$d)}},Z$b.onAsynLoaded=function(Z$a,Z$b,Z$c){var Z$d=Z$b[0],Z$e=Z$b[1];switch(Z$d.version){case"LAYAMATERIAL:01":var Z$f=0,Z$i=0,Z$j=Z$d.props;for(var Z$k in Z$j)switch(Z$k){case"vectors":var Z$l=Z$j[Z$k];for(Z$f=0,Z$i=Z$l.length;Z$f<Z$i;Z$f++){var Z$m=Z$l[Z$f],Z$n=Z$m.value;switch(Z$n.length){case 2:this[Z$m.name]=new Z$fb(Z$n[0],Z$n[1]);break;case 3:this[Z$m.name]=new Z$ib(Z$n[0],Z$n[1],Z$n[2]);break;case 4:this[Z$m.name]=new Z$jb(Z$n[0],Z$n[1],Z$n[2],Z$n[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var Z$o=Z$j[Z$k];for(Z$f=0,Z$i=Z$o.length;Z$f<Z$i;Z$f++){var Z$p=Z$o[Z$f],Z$q=Z$p.path;Z$q&&(this[Z$p.name]=Z$t.getRes(Z$e[Z$q]))}break;case"defines":var Z$r=Z$j[Z$k];for(Z$f=0,Z$i=Z$r.length;Z$f<Z$i;Z$f++){var Z$s=this._shaderCompile.getMaterialDefineByName(Z$r[Z$f]);this._addShaderDefine(Z$s)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[Z$k]=Z$j[Z$k];break;case"renderQueue":switch(Z$j[Z$k]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[Z$k]=Z$j[Z$k]}break;case"LAYAMATERIAL:02":for(Z$k in Z$j=Z$d.props)switch(Z$k){case"vectors":for(Z$f=0,Z$i=(Z$l=Z$j[Z$k]).length;Z$f<Z$i;Z$f++)switch((Z$n=(Z$m=Z$l[Z$f]).value).length){case 2:this[Z$m.name]=new Z$fb(Z$n[0],Z$n[1]);break;case 3:this[Z$m.name]=new Z$ib(Z$n[0],Z$n[1],Z$n[2]);break;case 4:this[Z$m.name]=new Z$jb(Z$n[0],Z$n[1],Z$n[2],Z$n[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(Z$f=0,Z$i=(Z$o=Z$j[Z$k]).length;Z$f<Z$i;Z$f++)(Z$q=(Z$p=Z$o[Z$f]).path)&&(this[Z$p.name]=Z$t.getRes(Z$e[Z$q]));break;case"defines":for(Z$f=0,Z$i=(Z$r=Z$j[Z$k]).length;Z$f<Z$i;Z$f++)Z$s=this._shaderCompile.getMaterialDefineByName(Z$r[Z$f]),this._addShaderDefine(Z$s);break;default:this[Z$k]=Z$j[Z$k]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},Z$b._addReference=function(){Z$d.prototype._addReference.call(this);for(var Z$a=0,Z$b=this._values.length;Z$a<Z$b;Z$a++){var Z$c=this._values[Z$a];Z$c&&Z$c instanceof laya.d3.resource.BaseTexture&&Z$c._addReference()}},Z$b._removeReference=function(){Z$d.prototype._removeReference.call(this);for(var Z$a=0,Z$b=this._values.length;Z$a<Z$b;Z$a++){var Z$c=this._values[Z$a];Z$c&&Z$c instanceof laya.d3.resource.BaseTexture&&Z$c._removeReference()}},Z$b.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},Z$b.setShaderName=function(Z$a){var Z$b=Z$Lb.nameKey.getID(Z$a);if(-1===Z$b)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=Z$Ab._preCompileShader[Z$b]},Z$b.cloneTo=function(Z$a){var Z$b=Z$a;Z$b.name=this.name,Z$b.cull=this.cull,Z$b.blend=this.blend,Z$b.srcBlend=this.srcBlend,Z$b.dstBlend=this.dstBlend,Z$b.srcBlendRGB=this.srcBlendRGB,Z$b.dstBlendRGB=this.dstBlendRGB,Z$b.srcBlendAlpha=this.srcBlendAlpha,Z$b.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(Z$b.blendConstColor),Z$b.blendEquation=this.blendEquation,Z$b.blendEquationRGB=this.blendEquationRGB,Z$b.blendEquationAlpha=this.blendEquationAlpha,Z$b.depthTest=this.depthTest,Z$b.depthWrite=this.depthWrite,Z$b.renderQueue=this.renderQueue,Z$b._shader=this._shader,Z$b._disablePublicShaderDefine=this._disablePublicShaderDefine,Z$b._shaderDefineValue=this._shaderDefineValue;var Z$c,Z$d=0,Z$e=Z$b._shaderValues;Z$b._shaderValues.data.length=this._shaderValues.data.length;var Z$f=this._values.length,Z$i=Z$b._values;for(Z$d=0,Z$c=Z$i.length=Z$f;Z$d<Z$c;Z$d++){var Z$j=this._values[Z$d];if(Z$j)if("number"==typeof Z$j)Z$i[Z$d]=Z$j,Z$e.data[Z$d]=Z$j;else if("number"==typeof Z$j&&Math.floor(Z$j)==Z$j)Z$i[Z$d]=Z$j,Z$e.data[Z$d]=Z$j;else if("boolean"==typeof Z$j)Z$i[Z$d]=Z$j,Z$e.data[Z$d]=Z$j;else if(Z$j instanceof laya.d3.math.Vector2){var Z$k=Z$i[Z$d]||(Z$i[Z$d]=new Z$fb);Z$j.cloneTo(Z$k),Z$e.data[Z$d]=Z$k.elements}else if(Z$j instanceof laya.d3.math.Vector3){var Z$l=Z$i[Z$d]||(Z$i[Z$d]=new Z$ib);Z$j.cloneTo(Z$l),Z$e.data[Z$d]=Z$l.elements}else if(Z$j instanceof laya.d3.math.Vector4){var Z$m=Z$i[Z$d]||(Z$i[Z$d]=new Z$jb);Z$j.cloneTo(Z$m),Z$e.data[Z$d]=Z$m.elements}else if(Z$j instanceof laya.d3.math.Matrix4x4){var Z$n=Z$i[Z$d]||(Z$i[Z$d]=new Z$ab);Z$j.cloneTo(Z$n),Z$e.data[Z$d]=Z$n.elements}else Z$j instanceof laya.d3.resource.BaseTexture&&(Z$i[Z$d]=Z$j,Z$e.data[Z$d]=Z$j)}},Z$b.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$q(0,Z$b,"alphaTestValue",function(){return this._getNumber(0)},function(Z$a){this._setNumber(0,Z$a)}),Z$q(0,Z$b,"alphaTest",function(){return this._alphaTest},function(Z$a){(this._alphaTest=Z$a)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),Z$a.__init__=function(){Z$a.SHADERDEFINE_ALPHATEST=Z$a.shaderDefines.registerDefine("ALPHATEST")},Z$a.RENDERQUEUE_OPAQUE=2e3,Z$a.RENDERQUEUE_ALPHATEST=2450,Z$a.RENDERQUEUE_TRANSPARENT=3e3,Z$a.CULL_NONE=0,Z$a.CULL_FRONT=1,Z$a.CULL_BACK=2,Z$a.BLEND_DISABLE=0,Z$a.BLEND_ENABLE_ALL=1,Z$a.BLEND_ENABLE_SEPERATE=2,Z$a.BLENDPARAM_ZERO=0,Z$a.BLENDPARAM_ONE=1,Z$a.BLENDPARAM_SRC_COLOR=768,Z$a.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,Z$a.BLENDPARAM_DST_COLOR=774,Z$a.BLENDPARAM_ONE_MINUS_DST_COLOR=775,Z$a.BLENDPARAM_SRC_ALPHA=770,Z$a.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,Z$a.BLENDPARAM_DST_ALPHA=772,Z$a.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,Z$a.BLENDPARAM_SRC_ALPHA_SATURATE=776,Z$a.BLENDEQUATION_ADD=0,Z$a.BLENDEQUATION_SUBTRACT=1,Z$a.BLENDEQUATION_REVERSE_SUBTRACT=2,Z$a.DEPTHTEST_OFF=0,Z$a.DEPTHTEST_NEVER=512,Z$a.DEPTHTEST_LESS=513,Z$a.DEPTHTEST_EQUAL=514,Z$a.DEPTHTEST_LEQUAL=515,Z$a.DEPTHTEST_GREATER=516,Z$a.DEPTHTEST_NOTEQUAL=517,Z$a.DEPTHTEST_GEQUAL=518,Z$a.DEPTHTEST_ALWAYS=519,Z$a.SHADERDEFINE_ALPHATEST=1,Z$a.ALPHATESTVALUE=0,Z$n(Z$a,["shaderDefines",function(){return this.shaderDefines=new Z$mb}]),Z$a}(Z$s),Z$Fb=function(Z$a){function Z$b(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,Z$b.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}Z$p(Z$b,"laya.d3.resource.BaseTexture",Z$s);var Z$c=Z$b.prototype;return Z$q(0,Z$c,"width",function(){return this._width}),Z$q(0,Z$c,"repeat",function(){return this._repeat},function(Z$a){if(this._repeat!==Z$a&&(this._repeat=Z$a,this._source)){var Z$b=Z$F.mainContext;Z$G.bindTexture(Z$b,this._type,this._source),Z$w.isPOT(this._width,this._height)&&this._repeat?(Z$b.texParameteri(this._type,10242,10497),Z$b.texParameteri(this._type,10243,10497)):(Z$b.texParameteri(this._type,10242,33071),Z$b.texParameteri(this._type,10243,33071))}}),Z$q(0,Z$c,"height",function(){return this._height}),Z$q(0,Z$c,"magFifter",function(){return this._magFifter},function(Z$a){(this._magFifter=Z$a)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(Z$a)}),Z$q(0,Z$c,"wrapModeV",function(){return this._wrapModeV}),Z$q(0,Z$c,"size",function(){return this._size}),Z$q(0,Z$c,"wrapModeU",function(){return this._wrapModeU}),Z$q(0,Z$c,"mipmap",function(){return this._mipmap},function(Z$a){this._mipmap=Z$a,this._mipmap!=Z$a&&this._conchTexture&&this._conchTexture.setMipMap(Z$a)}),Z$q(0,Z$c,"minFifter",function(){return this._minFifter},function(Z$a){this._minFifter=Z$a,this._minFifter!=Z$a&&this._conchTexture&&this._conchTexture.setMinFifter(Z$a)}),Z$q(0,Z$c,"format",function(){return this._format}),Z$q(0,Z$c,"source",function(){return this.activeResource(),this._source}),Z$q(0,Z$c,"defaulteTexture",function(){return Z$Sb.grayTexture}),Z$b.WARPMODE_REPEAT=0,Z$b.WARPMODE_CLAMP=1,Z$b}(),Z$Gb=function(Z$a){function Z$b(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,Z$b.__super.call(this),this._boundingBoxCorners=Z$d(8,null)}Z$p(Z$b,"laya.d3.resource.models.BaseMesh",Z$s);var Z$c=Z$b.prototype;return Z$c._getPositions=function(){throw new Error("未Override,请重载该属性！")},Z$c._generateBoundingObject=function(){this._boundingSphere=new Z$_a(new Z$ib,0),Z$_a.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new Z$Za(new Z$ib,new Z$ib),Z$Za.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},Z$c.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},Z$c.getRenderElement=function(Z$a){throw new Error("未Override,请重载该属性！")},Z$q(0,Z$c,"subMeshCount",function(){return this._subMeshCount}),Z$q(0,Z$c,"boundingBox",function(){return this._boundingBox}),Z$q(0,Z$c,"boundingBoxCorners",function(){return this._boundingBoxCorners}),Z$q(0,Z$c,"boundingSphere",function(){return this._boundingSphere}),Z$b}(),Z$Hb=(function(Z$a){function Z$b(){Z$b.__super.call(this)}Z$p(Z$b,"laya.d3.component.Script",Z$vb);var Z$c=Z$b.prototype;Z$c.onTriggerEnter=function(Z$a){},Z$c.onTriggerExit=function(Z$a){},Z$c.onTriggerStay=function(Z$a){},Z$q(0,Z$c,"isSingleton",function(){return Z$b._isSingleton}),Z$b._isSingleton=!1}(),function(Z$a){function Z$b(Z$a){this._owner=null,this._sharedMesh=null,Z$b.__super.call(this),this._owner=Z$a}Z$p(Z$b,"laya.d3.core.MeshFilter",Z$a);var Z$c=Z$b.prototype;return Z$c._sharedMeshLoaded=function(){this.event("loaded")},Z$c._destroy=function(){Z$a.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},Z$q(0,Z$c,"sharedMesh",function(){return this._sharedMesh},function(Z$a){var Z$b=this._sharedMesh;Z$b&&Z$b._removeReference(),(this._sharedMesh=Z$a)._addReference(),this.event("meshchanged",[this,Z$b,Z$a]),Z$a.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),Z$q(0,Z$c,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),Z$q(0,Z$c,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),Z$q(0,Z$c,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),Z$q(0,Z$c,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),Z$b}(Z$wb)),Z$Ib=function(Z$a){function Z$b(Z$a){Z$b.__super.call(this,Z$a),Z$a.meshFilter.on("meshchanged",this,this._onMeshChanged)}Z$p(Z$b,"laya.d3.core.MeshRender",Z$xb);var Z$c=Z$b.prototype;return Z$c._onMeshChanged=function(Z$a,Z$b,Z$c){Z$c.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:Z$c.once("loaded",this,this._onMeshLoaed)},Z$c._onMeshLoaed=function(Z$a,Z$b){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},Z$c._calculateBoundingSphereByInitSphere=function(Z$a){var Z$b=NaN,Z$c=this._owner.transform,Z$d=Z$c.scale.elements,Z$e=Math.abs(Z$d[0]),Z$f=Math.abs(Z$d[1]),Z$i=Math.abs(Z$d[2]);Z$b=Z$f<=Z$e&&Z$i<=Z$e?Z$e:Z$i<=Z$f?Z$f:Z$i,Z$ib.transformCoordinate(Z$a.center,Z$c.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=Z$a.radius*Z$b},Z$c._calculateBoundBoxByInitCorners=function(Z$a){for(var Z$b=this._owner.transform.worldMatrix,Z$c=0;Z$c<8;Z$c++)Z$ib.transformCoordinate(Z$a[Z$c],Z$b,Z$xb._tempBoundBoxCorners[Z$c]);Z$Za.createfromPoints(Z$xb._tempBoundBoxCorners,this._boundingBox)},Z$c._calculateBoundingSphere=function(){var Z$a=this._owner.meshFilter.sharedMesh;null==Z$a||null==Z$a.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(Z$a.boundingSphere)},Z$c._calculateBoundingBox=function(){var Z$a=this._owner.meshFilter.sharedMesh;null==Z$a||null==Z$a.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(Z$a.boundingBoxCorners)},Z$c._renderUpdate=function(Z$a){var Z$b=this._owner.transform;if(Z$b){this._setShaderValueMatrix4x4(0,Z$b.worldMatrix);var Z$c=this._owner.getProjectionViewWorldMatrix(Z$a);this._setShaderValueMatrix4x4(1,Z$c)}else this._setShaderValueMatrix4x4(0,Z$ab.DEFAULT),this._setShaderValueMatrix4x4(1,Z$a);return Z$tb.debugMode&&this._renderRenderableBoundBox(),!0},Z$b}(),Z$Jb=function(Z$b){function Z$d(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,Z$d.__super.call(this),this._renderState=new Z$Y,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new Z$ob,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new Z$ba,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new Z$ib(.7,.7,.7),this.ambientColor=new Z$ib(.212,.227,.259),Z$F.shaderHighPrecision&&this.addShaderDefine(Z$Ab.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}Z$p(Z$d,"laya.d3.core.scene.Scene",Z$b);var Z$a=Z$d.prototype;return Z$x.imps(Z$a,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),Z$a._setUrl=function(Z$a){this._url=Z$a},Z$a._getGroup=function(){return this._group},Z$a._setGroup=function(Z$a){this._group=Z$a},Z$a._display=function(){Z$x.stage._scenes.push(this),Z$x.stage._scenes.sort(Z$d._sortScenes);for(var Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++){var Z$c=this._childs[Z$a];Z$c.active&&Z$c._activeHierarchy()}},Z$a._unDisplay=function(){var Z$a=Z$x.stage._scenes;Z$a.splice(Z$a.indexOf(this),1);for(var Z$b=0,Z$c=this._childs.length;Z$b<Z$c;Z$b++){var Z$d=this._childs[Z$b];Z$d.active&&Z$d._inActiveHierarchy()}},Z$a._addChild3D=function(Z$a){Z$a.transform._onWorldTransform(),Z$a._setBelongScene(this),this.displayedInStage&&Z$a.active&&Z$a._activeHierarchy()},Z$a._removeChild3D=function(Z$a){Z$a.transform.parent=null,this.displayedInStage&&Z$a.active&&Z$a._inActiveHierarchy(),Z$a._setUnBelongScene()},Z$a.initOctree=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$e&&(Z$e=6),this.treeSize=new Z$ib(Z$a,Z$b,Z$c),this.treeLevel=Z$e,this.treeRoot=new Z$Z(this,0),this.treeRoot.init(Z$d,this.treeSize)},Z$a._prepareUpdateToRenderState=function(Z$a,Z$b){Z$b.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,Z$b.scene=this},Z$a._prepareSceneToRender=function(Z$a){var Z$b=this._lights.length;if(0<Z$b)for(var Z$c=0,Z$d=0;Z$d<Z$b&&!(this._lights[Z$d]._prepareToScene(Z$a)&&++Z$c>=this._enableLightCount);Z$d++);},Z$a._updateChilds=function(Z$a){for(var Z$b=0,Z$c=this._childs.length;Z$b<Z$c;++Z$b)this._childs[Z$b]._update(Z$a)},Z$a._preRenderScene=function(Z$a,Z$b,Z$c){var Z$d,Z$e=Z$b._viewMatrix,Z$f=Z$b._projectionMatrix,Z$i=Z$b._projectionViewMatrix,Z$j=0,Z$k=Z$b.camera;for(Z$k.useOcclusionCulling?this.treeRoot?Z$ca.renderObjectCullingOctree(Z$c,this,Z$k,Z$e,Z$f,Z$i):Z$ca.renderObjectCulling(Z$c,this,Z$k,Z$e,Z$f,Z$i):Z$ca.renderObjectCullingNoBoundFrustum(this,Z$k,Z$e,Z$f,Z$i),Z$j=0,Z$d=this._quenes.length;Z$j<Z$d;Z$j++)this._quenes[Z$j]&&this._quenes[Z$j]._preRender(Z$b)},Z$a._clear=function(Z$a,Z$b){var Z$c=Z$b._viewport,Z$d=Z$b.camera,Z$e=Z$c.x,Z$f=Z$d.renderTargetSize.height-Z$c.y-Z$c.height,Z$i=Z$c.width,Z$j=Z$c.height;Z$a.viewport(Z$e,Z$f,Z$i,Z$j);var Z$k=256,Z$l=Z$d.renderTarget;switch(Z$d.clearFlag){case 0:var Z$m=Z$d.clearColor;if(Z$m){Z$a.enable(3089),Z$a.scissor(Z$e,Z$f,Z$i,Z$j);var Z$n=Z$m.elements;Z$a.clearColor(Z$n[0],Z$n[1],Z$n[2],Z$n[3]),Z$k|=16384}if(Z$l)switch(Z$m||(Z$k=16384),Z$l.depthStencilFormat){case 33189:Z$k|=256;break;case 36168:Z$k|=1024;break;case 34041:Z$k|=256,Z$k|=1024}Z$a.clear(Z$k),Z$m&&Z$a.disable(3089);break;case 1:case 2:if(Z$l)switch(Z$k=16384,Z$l.depthStencilFormat){case 33189:Z$k|=256;break;case 36168:Z$k|=1024;break;case 34041:Z$k|=256,Z$k|=1024}Z$a.clear(Z$k);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},Z$a._renderScene=function(Z$a,Z$b){var Z$c,Z$d,Z$e=Z$b.camera,Z$f=0;for(Z$f=0;Z$f<2;Z$f++)(Z$d=this._quenes[Z$f])&&(Z$e.renderTarget?Z$d._render(Z$b,!0):Z$d._render(Z$b,!1));if(1===Z$e.clearFlag){var Z$i=Z$e.sky;Z$i&&(Z$G.setCullFace(Z$a,!1),Z$G.setDepthFunc(Z$a,515),Z$G.setDepthMask(Z$a,!1),Z$i._render(Z$b),Z$G.setDepthFunc(Z$a,513),Z$G.setDepthMask(Z$a,!0))}for(Z$f=2,Z$c=this._quenes.length;Z$f<Z$c;Z$f++)(Z$d=this._quenes[Z$f])&&(Z$d._sortAlpha(Z$b.camera.transform.position),Z$e.renderTarget?Z$d._render(Z$b,!0):Z$d._render(Z$b,!1))},Z$a._set3DRenderConfig=function(Z$a){Z$a.disable(3042),Z$G._blend=!1,Z$a.blendFunc(770,771),Z$G._sFactor=770,Z$G._dFactor=771,Z$a.disable(2929),Z$G._depthTest=!1,Z$a.enable(2884),Z$G._cullFace=!0,Z$a.depthMask(1),Z$G._depthMask=!0,Z$a.frontFace(2304),Z$G._frontFace=2304},Z$a._set2DRenderConfig=function(Z$a){Z$G.setBlend(Z$a,!0),Z$G.setBlendFunc(Z$a,1,771),Z$G.setDepthTest(Z$a,!1),Z$G.setCullFace(Z$a,!1),Z$G.setDepthMask(Z$a,!0),Z$G.setFrontFace(Z$a,2305),Z$a.viewport(0,0,Z$m.width,Z$m.height)},Z$a._parseCustomProps=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$d.customProps.lightmaps,Z$f=Z$e.length,Z$i=this._lightmaps;Z$i.length=Z$f;for(var Z$j=0;Z$j<Z$f;Z$j++)Z$i[Z$j]=Z$t.getRes(Z$b[Z$e[Z$j].replace(".exr",".png")]);this.setlightmaps(Z$i);var Z$k=Z$d.customProps.ambientColor;Z$k&&(this.ambientColor=new Z$ib(Z$k[0],Z$k[1],Z$k[2]));var Z$l=Z$d.customProps.fogColor;Z$l&&(this.fogColor=new Z$ib(Z$l[0],Z$l[1],Z$l[2]))},Z$a._addLight=function(Z$a){this._lights.indexOf(Z$a)<0&&this._lights.push(Z$a)},Z$a._removeLight=function(Z$a){var Z$b=this._lights.indexOf(Z$a);0<=Z$b&&this._lights.splice(Z$b,1)},Z$a._updateScene=function(){var Z$a=this._renderState;this._prepareUpdateToRenderState(Z$F.mainContext,Z$a),this._updateComponents(Z$a),this._updateChilds(Z$a),this._lateUpdateComponents(Z$a),this._time+=Z$a.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},Z$a._updateSceneConch=function(){var Z$a=this._renderState;this._prepareUpdateToRenderState(Z$F.mainContext,Z$a),this._updateComponents(Z$a),this._lateUpdateComponents(Z$a),this._prepareSceneToRender(Z$a);for(var Z$b=0,Z$c=this._cameraPool.length;Z$b<Z$c;Z$b++){var Z$d=this._cameraPool[Z$b];(Z$a.camera=Z$d)._prepareCameraToRender()}},Z$a._preRenderShadow=function(Z$a,Z$b,Z$c,Z$d,Z$e){this.treeRoot?Z$ca.renderShadowObjectCullingOctree(this,Z$b,Z$c,Z$d,Z$e):Z$ca.renderShadowObjectCulling(this,Z$b,Z$c,Z$d,Z$e);for(var Z$f=0,Z$i=Z$c.length;Z$f<Z$i;Z$f++)Z$c[Z$f]&&Z$c[Z$f]._preRender(Z$a)},Z$a._renderShadowMap=function(Z$a,Z$b,Z$c){var Z$d=this.parallelSplitShadowMaps[0];Z$d._calcAllLightCameraInfo(Z$c);var Z$e,Z$f,Z$i,Z$j=Z$d.PSSMNum;if(this._preRenderShadow(Z$b,Z$d._lightCulling,Z$d._shadowQuenes,Z$d._lightVPMatrix[0],Z$j),this.addShaderDefine(Z$pb.SHADERDEFINE_CAST_SHADOW),1<Z$j)for(var Z$k=0;Z$k<Z$j;Z$k++)Z$e=Z$d.getRenderTarget(Z$k+1),Z$d.beginRenderTarget(Z$k+1),Z$a.clearColor(1,1,1,1),Z$a.clear(16640),Z$a.viewport(0,0,Z$e.width,Z$e.height),Z$b.camera=Z$i=Z$d.getLightCamera(Z$k),Z$i._prepareCameraToRender(),Z$i._prepareCameraViewProject(Z$i.viewMatrix,Z$i.projectionMatrix),Z$b._projectionViewMatrix=Z$d._lightVPMatrix[Z$k+1],(Z$f=Z$d._shadowQuenes[Z$k])._preRender(Z$b),Z$f._renderShadow(Z$b,!1),Z$d.endRenderTarget(Z$k+1);else Z$e=Z$d.getRenderTarget(1),Z$d.beginRenderTarget(1),Z$a.clearColor(1,1,1,1),Z$a.clear(16640),Z$a.viewport(0,0,Z$e.width,Z$e.height),Z$b.camera=Z$i=Z$d.getLightCamera(0),Z$i._prepareCameraToRender(),Z$i._prepareCameraViewProject(Z$i.viewMatrix,Z$i.projectionMatrix),Z$b._projectionViewMatrix=Z$d._lightVPMatrix[0],(Z$f=Z$d._shadowQuenes[0])._preRender(Z$b),Z$f._renderShadow(Z$b,!0),Z$d.endRenderTarget(1);this.removeShaderDefine(Z$pb.SHADERDEFINE_CAST_SHADOW)},Z$a.addTreeNode=function(Z$a){this.treeRoot.addTreeNode(Z$a)},Z$a.removeTreeNode=function(Z$a){this.treeSize&&Z$a._treeNode&&Z$a._treeNode.removeObject(Z$a)},Z$a.setlightmaps=function(Z$a){this._lightmaps=Z$a;for(var Z$b=0,Z$c=this._renderableSprite3Ds.length;Z$b<Z$c;Z$b++)this._renderableSprite3Ds[Z$b]._render._applyLightMapParams()},Z$a.getlightmaps=function(){return this._lightmaps},Z$a.addChildAt=function(Z$a,Z$b){if(!(Z$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(Z$a&&Z$a.__className));if(!Z$a||this.destroyed||Z$a===this)return Z$a;if(Z$a.zOrder&&this._set$P("hasZorder",!0),0<=Z$b&&Z$b<=this._childs.length){if(Z$a._parent===this){var Z$c=this.getChildIndex(Z$a);this._childs.splice(Z$c,1),this._childs.splice(Z$b,0,Z$a),this.conchModel&&(this.conchModel.removeChild(Z$a.conchModel),this.conchModel.addChildAt(Z$a.conchModel,Z$b)),this._childChanged()}else Z$a.parent&&Z$a.parent.removeChild(Z$a),this._childs===Z$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(Z$b,0,Z$a),this.conchModel&&this.conchModel.addChildAt(Z$a.conchModel,Z$b),(Z$a.parent=this)._addChild3D(Z$a);return Z$a}throw new Error("appendChildAt:The index is out of bounds")},Z$a.addChild=function(Z$a){if(!(Z$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!Z$a||this.destroyed||Z$a===this)return Z$a;if(Z$a.zOrder&&this._set$P("hasZorder",!0),Z$a._parent===this){var Z$b=this.getChildIndex(Z$a);Z$b!==this._childs.length-1&&(this._childs.splice(Z$b,1),this._childs.push(Z$a),this.conchModel&&(this.conchModel.removeChild(Z$a.conchModel),this.conchModel.addChildAt(Z$a.conchModel,this._childs.length-1)),this._childChanged())}else Z$a.parent&&Z$a.parent.removeChild(Z$a),this._childs===Z$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(Z$a),this.conchModel&&this.conchModel.addChildAt(Z$a.conchModel,this._childs.length-1),(Z$a.parent=this)._childChanged(),this._addChild3D(Z$a);return Z$a},Z$a.removeChildAt=function(Z$a){var Z$b=this.getChildAt(Z$a);return Z$b&&(this._removeChild3D(Z$b),this._childs.splice(Z$a,1),this.conchModel&&this.conchModel.removeChild(Z$b.conchModel),Z$b.parent=null),Z$b},Z$a.removeChildren=function(Z$a,Z$b){if(void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=2147483647),this._childs&&0<this._childs.length){var Z$c=this._childs;if(0===Z$a&&Z$f<=Z$b){var Z$d=Z$c;this._childs=Z$l.ARRAY_EMPTY}else Z$d=Z$c.splice(Z$a,Z$b-Z$a);for(var Z$e=0,Z$f=Z$d.length;Z$e<Z$f;Z$e++)this._removeChild3D(Z$d[Z$e]),Z$d[Z$e].parent=null,this.conchModel&&this.conchModel.removeChild(Z$d[Z$e].conchModel)}return this},Z$a.addFrustumCullingObject=function(Z$a){this.treeRoot?this.addTreeNode(Z$a):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(Z$a):this._cullingRenders[this._cullingRendersLength]=Z$a,Z$a._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},Z$a.removeFrustumCullingObject=function(Z$a){if(this.treeRoot)this.removeTreeNode(Z$a);else{this._cullingRendersLength--;var Z$b=Z$a._indexInSceneFrustumCullingObjects;if(Z$b!==this._cullingRendersLength){var Z$c=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[Z$b]=Z$c)._indexInSceneFrustumCullingObjects=Z$b,Z$a._indexInSceneFrustumCullingObjects=-1}}},Z$a.getRenderQueue=function(Z$a){return Z$a<3e3?this._quenes[1]||(this._quenes[1]=new Z$X(this)):this._quenes[2]||(this._quenes[2]=new Z$X(this))},Z$a.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new Z$X(this)},Z$a.addShaderDefine=function(Z$a){this._shaderDefineValue|=Z$a},Z$a.removeShaderDefine=function(Z$a){this._shaderDefineValue&=~Z$a},Z$a.addScript=function(Z$a){return this._addComponent(Z$a)},Z$a.getScriptByType=function(Z$a,Z$b){return void 0===Z$b&&(Z$b=0),this._getComponentByType(Z$a,Z$b)},Z$a.getScriptsByType=function(Z$a,Z$b){this._getComponentsByType(Z$a,Z$b)},Z$a.getScriptByIndex=function(Z$a){return this._getComponentByIndex(Z$a)},Z$a.removeScriptByType=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0),this._removeComponentByType(Z$a,Z$b)},Z$a.removeScriptsByType=function(Z$a){this._removeComponentByType(Z$a)},Z$a.removeAllScript=function(){this._removeAllComponent()},Z$a.render=function(Z$a,Z$b,Z$c){(Z$r._context.ctx._renderKey=0)<this._childs.length&&Z$a.addRenderObject(this)},Z$a.renderSubmit=function(){var Z$a=Z$F.mainContext,Z$b=this._renderState;this._set3DRenderConfig(Z$a),this._prepareSceneToRender(this._renderState);var Z$c,Z$d=0,Z$e=0;if(Z$tb.debugMode||Z$Z.debugMode)for(Z$d=0,Z$e=this._cameraPool.length;Z$d<Z$e;Z$d++)Z$c=this._cameraPool[Z$d],Z$tb._debugPhasorSprite.begin(1,Z$c),Z$c.activeInHierarchy&&Z$c._renderCamera(Z$a,Z$b,this),Z$tb._debugPhasorSprite.end();else for(Z$d=0,Z$e=this._cameraPool.length;Z$d<Z$e;Z$d++)(Z$c=this._cameraPool[Z$d]).activeInHierarchy&&Z$c._renderCamera(Z$a,Z$b,this);return this._set2DRenderConfig(Z$a),1},Z$a.onAsynLoaded=function(Z$a,Z$b,Z$c){var Z$d=Z$b[0];if("Scene"!==Z$d.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var Z$e=Z$b[1];Z$sb._createNodeByJson(this,Z$d,this,Z$e),this.event("hierarchyloaded",[this]),this.__loaded=!0},Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),this.destroyed||(Z$b.prototype.destroy.call(this,Z$a),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,Z$t.clearRes(this.url),this.loaded||Z$tb._cancelLoadByUrl(this.url))},Z$a.getRenderType=function(){return 0},Z$a.releaseRender=function(){},Z$a._addComponent=function(Z$a){var Z$b,Z$c=this._componentsMap.indexOf(Z$a);if(-1===Z$c)Z$b=[],this._componentsMap.push(Z$a),this._typeComponentsIndices.push(Z$b);else if(Z$b=this._typeComponentsIndices[Z$c],this._components[Z$b[0]].isSingleton)throw new Error("无法单实例创建"+Z$a+"组件，"+Z$a+"组件已存在！");var Z$d=Z$e.getInstance(Z$a);Z$b.push(this._components.length),this._components.push(Z$d);return Z$d._initialize(this),Z$d},Z$a._removeComponent=function(Z$a,Z$b){var Z$c=this._typeComponentsIndices[Z$a],Z$d=Z$c[Z$b],Z$e=this._components[Z$d];this._components.splice(Z$d,1),Z$c.splice(Z$b,1),0===Z$c.length&&(this._typeComponentsIndices.splice(Z$a,1),this._componentsMap.splice(Z$a,1));for(var Z$f=0,Z$i=this._componentsMap.length;Z$f<Z$i;Z$f++)for(var Z$j=(Z$c=this._typeComponentsIndices[Z$f]).length-1;0<=Z$j;Z$j--){var Z$k=Z$c[Z$j];if(!(Z$d<Z$k))break;Z$c[Z$j]=--Z$k}Z$e._destroy()},Z$a._getComponentByType=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0);var Z$c=this._componentsMap.indexOf(Z$a);return-1===Z$c?null:this._components[this._typeComponentsIndices[Z$c][Z$b]]},Z$a._getComponentsByType=function(Z$a,Z$b){var Z$c=this._componentsMap.indexOf(Z$a);if(-1!==Z$c){var Z$d=this._typeComponentsIndices[Z$c],Z$e=Z$d.length;Z$b.length=Z$e;for(var Z$f=0;Z$f<Z$e;Z$f++)Z$b[Z$f]=this._components[Z$d[Z$f]]}else Z$b.length=0},Z$a._getComponentByIndex=function(Z$a){return this._components[Z$a]},Z$a._removeComponentByType=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0);var Z$c=this._componentsMap.indexOf(Z$a);-1!==Z$c&&this._removeComponent(Z$c,Z$b)},Z$a._removeComponentsByType=function(Z$a){var Z$b=this._componentsMap.indexOf(Z$a);if(-1!==Z$b)for(var Z$c=this._typeComponentsIndices[Z$b],Z$d=0,Z$e=Z$c.length;Z$d<Z$e;Z$c.length<Z$e?Z$e--:Z$d++)this._removeComponent(Z$b,Z$d)},Z$a._removeAllComponent=function(){for(var Z$a=0,Z$b=this._componentsMap.length;Z$a<Z$b;this._componentsMap.length<Z$b?Z$b--:Z$a++)this._removeComponentsByType(this._componentsMap[Z$a])},Z$a._updateComponents=function(Z$a){for(var Z$b=0,Z$c=this._components.length;Z$b<Z$c;Z$b++){var Z$d=this._components[Z$b];!Z$d.started&&(Z$d._start(Z$a),Z$d.started=!0),Z$d.enable&&Z$d._update(Z$a)}},Z$a._lateUpdateComponents=function(Z$a){for(var Z$b=0;Z$b<this._components.length;Z$b++){var Z$c=this._components[Z$b];!Z$c.started&&(Z$c._start(Z$a),Z$c.started=!0),Z$c.enable&&Z$c._lateUpdate(Z$a)}},Z$a._preRenderUpdateComponents=function(Z$a){for(var Z$b=0;Z$b<this._components.length;Z$b++){var Z$c=this._components[Z$b];!Z$c.started&&(Z$c._start(Z$a),Z$c.started=!0),Z$c.enable&&Z$c._preRenderUpdate(Z$a)}},Z$a._postRenderUpdateComponents=function(Z$a){for(var Z$b=0;Z$b<this._components.length;Z$b++){var Z$c=this._components[Z$b];!Z$c.started&&(Z$c._start(Z$a),Z$c.started=!0),Z$c.enable&&Z$c._postRenderUpdate(Z$a)}},Z$q(0,Z$a,"_loaded",null,function(Z$a){this.__loaded=Z$a}),Z$q(0,Z$a,"fogColor",function(){return this._fogColor},function(Z$a){this._fogColor=Z$a,this._shaderValues.setValue(0,Z$a.elements)}),Z$q(0,Z$a,"enableFog",function(){return this._enableFog},function(Z$a){this._enableFog!==Z$a&&((this._enableFog=Z$a)?(this.addShaderDefine(Z$Ab.SHADERDEFINE_FOG),this.removeShaderDefine(Z$Ab.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(Z$Ab.SHADERDEFINE_FOG))}),Z$q(0,Z$a,"url",function(){return this._url}),Z$q(0,Z$a,"loaded",function(){return this.__loaded}),Z$q(0,Z$a,"enableDepthFog",function(){return this._enableDepthFog},function(Z$a){this._enableDepthFog!=Z$a&&((this._enableDepthFog=Z$a)?(this.addShaderDefine(Z$Ab.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(Z$Ab.SHADERDEFINE_FOG)):this.removeShaderDefine(Z$Ab.SAHDERDEFINE_DEPTHFOG))}),Z$q(0,Z$a,"fogStart",function(){return this._fogStart},function(Z$a){this._fogStart=Z$a,this._shaderValues.setValue(1,Z$a)}),Z$q(0,Z$a,"fogRange",function(){return this._fogRange},function(Z$a){this._fogRange=Z$a,this._shaderValues.setValue(2,Z$a)}),Z$q(0,Z$a,"ambientColor",function(){return this._ambientColor},function(Z$a){this._ambientColor=Z$a,this._shaderValues.setValue(21,Z$a.elements)}),Z$q(0,Z$a,"scene",function(){return this}),Z$q(0,Z$a,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),Z$d._sortScenes=function(Z$a,Z$b){if(Z$a.parent!==Z$x.stage||Z$b.parent!==Z$x.stage)return Z$a.parent!==Z$x.stage&&Z$b.parent!==Z$x.stage?Z$d._sortScenes(Z$a.parent,Z$b.parent):Z$a.parent===Z$x.stage?-1:1;var Z$c=Z$x.stage._childs;return Z$c.indexOf(Z$a)-Z$c.indexOf(Z$b)},Z$d.load=function(Z$a){return Z$x.loader.create(Z$a,null,null,Z$d)},Z$d.FOGCOLOR=0,Z$d.FOGSTART=1,Z$d.FOGRANGE=2,Z$d.LIGHTDIRECTION=3,Z$d.LIGHTDIRCOLOR=4,Z$d.POINTLIGHTPOS=5,Z$d.POINTLIGHTRANGE=6,Z$d.POINTLIGHTATTENUATION=7,Z$d.POINTLIGHTCOLOR=8,Z$d.SPOTLIGHTPOS=9,Z$d.SPOTLIGHTDIRECTION=10,Z$d.SPOTLIGHTSPOT=11,Z$d.SPOTLIGHTRANGE=12,Z$d.SPOTLIGHTATTENUATION=13,Z$d.SPOTLIGHTCOLOR=14,Z$d.SHADOWDISTANCE=15,Z$d.SHADOWLIGHTVIEWPROJECT=16,Z$d.SHADOWMAPPCFOFFSET=17,Z$d.SHADOWMAPTEXTURE1=18,Z$d.SHADOWMAPTEXTURE2=19,Z$d.SHADOWMAPTEXTURE3=20,Z$d.AMBIENTCOLOR=21,Z$d.TIME=22,Z$d}(Z$z),Z$Kb=function(Z$a){function Z$b(Z$a){Z$b.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new Z$ab,this._shaderValues=new Z$ob,this._colliders=[],this._id=++Z$b._uniqueIDCounter,this._transform=new Z$yb(this),this.name=Z$a||"Sprite3D-"+Z$b._nameNumberCounter++,this.layer=Z$I.currentCreationLayer,this.active=!0}Z$p(Z$b,"laya.d3.core.Sprite3D",Z$Db);var Z$c=Z$b.prototype;return Z$x.imps(Z$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),Z$c._setUrl=function(Z$a){this._url=Z$a},Z$c._getGroup=function(){return this._group},Z$c._setGroup=function(Z$a){this._group=Z$a},Z$c._addChild3D=function(Z$a){Z$a.transform.parent=this.transform,this._hierarchyAnimator&&(!Z$a._hierarchyAnimator&&Z$a._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(Z$a,!0,[Z$a.name])),this._scene&&(Z$a._setBelongScene(this._scene),this._activeInHierarchy&&Z$a._active&&Z$a._activeHierarchy())},Z$c._removeChild3D=function(Z$a){Z$a.transform.parent=null,this._scene&&(this._activeInHierarchy&&Z$a._active&&Z$a._inActiveHierarchy(),Z$a._setUnBelongScene()),this._hierarchyAnimator&&(Z$a._hierarchyAnimator==this._hierarchyAnimator&&Z$a._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(Z$a,!1,[Z$a.name]))},Z$c._parseBaseCustomProps=function(Z$a){var Z$b=this.transform.localPosition;Z$a.translate?(Z$b.fromArray(Z$a.translate),Z$b.x*=100,Z$b.y*=100,Z$b.z*=100):Z$b.elements.fill(0),this.transform.localPosition=Z$b;var Z$c=this.transform.localRotation;Z$a.rotation?Z$c.fromArray(Z$a.rotation):Z$c.fromArray([0,0,0,-1]),this.transform.localRotation=Z$c;var Z$d=this.transform.localScale;Z$a.scale?Z$d.fromArray(Z$a.scale):Z$d.elements.fill(1),this.transform.localScale=Z$d;var Z$e=Z$a.layer;null!=Z$e&&(this.layer=Z$I.getLayerByNumber(Z$e))},Z$c._parseCustomComponent=function(Z$a,Z$b,Z$c){for(var Z$d in Z$c){var Z$e=Z$c[Z$d];switch(Z$d){case"Animator":var Z$f=this.addComponent(Animator);if(Z$e.avatarPath)Z$f.avatar=Z$t.getRes(Z$b[Z$e.avatarPath]);else{var Z$i=Z$e.avatar;if(Z$i){Z$f.avatar=Z$t.getRes(Z$b[Z$i.path]);var Z$j=Z$i.linkSprites;Z$j&&Z$a.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[Z$f,Z$j])}}for(var Z$k=Z$e.clipPaths,Z$l=Z$k.length,Z$m=0;Z$m<Z$l;Z$m++)Z$f.addClip(Z$t.getRes(Z$b[Z$k[Z$m]]));Z$f.clip=Z$t.getRes(Z$b[Z$k[0]]);var Z$n=Z$e.playOnWake;void 0!==Z$n&&(Z$f.playOnWake=Z$n);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var Z$o=this.addComponent(SphereCollider);Z$o.isTrigger=Z$e.isTrigger;var Z$p=Z$o.center;Z$p.fromArray(Z$e.center),Z$o.center=Z$p,Z$o.radius=Z$e.radius;break;case"BoxCollider":var Z$q=this.addComponent(BoxCollider);Z$q.isTrigger=Z$e.isTrigger,Z$q.center.fromArray(Z$e.center);var Z$r=Z$q.size;Z$r.fromArray(Z$e.size),Z$q.size=Z$r;break;case"MeshCollider":this.addComponent(MeshCollider)}}},Z$c._onRootNodeHierarchyLoaded=function(Z$a,Z$b){for(var Z$c in Z$b){for(var Z$d=this,Z$e=Z$b[Z$c],Z$f=0,Z$i=Z$e.length;Z$f<Z$i;Z$f++){var Z$j=Z$e[Z$f];if(""===Z$j)break;if(!(Z$d=Z$d.getChildByName(Z$j)))break}Z$d&&Z$a.linkSprite3DToAvatarNode(Z$c,Z$d)}},Z$c._setHierarchyAnimator=function(Z$a,Z$b){this._changeHierarchyAnimator(Z$a);for(var Z$c=0,Z$d=this._childs.length;Z$c<Z$d;Z$c++){var Z$e=this._childs[Z$c];Z$e._hierarchyAnimator==Z$b&&Z$e._setHierarchyAnimator(Z$a,Z$b)}},Z$c._clearHierarchyAnimator=function(Z$a,Z$b){this._changeHierarchyAnimator(Z$b);for(var Z$c=0,Z$d=this._childs.length;Z$c<Z$d;Z$c++){var Z$e=this._childs[Z$c];Z$e._hierarchyAnimator==Z$a&&Z$e._clearHierarchyAnimator(Z$a,Z$b)}},Z$c._getAnimatorToLinkSprite3D=function(Z$a,Z$b,Z$c){var Z$d=this.getComponentByType(Animator);if(Z$d&&(Z$d.avatar?Z$d.avatar._version||Z$a._setAnimatorToLinkAvatar(Z$d,Z$b):Z$a._setAnimatorToLinkSprite3DNoAvatar(Z$d,Z$b,Z$c)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){Z$c.unshift(this._parent.name);var Z$e=this._parent;Z$e._hierarchyAnimator&&Z$e._getAnimatorToLinkSprite3D(Z$a,Z$b,Z$c)}},Z$c._setAnimatorToLinkSprite3DNoAvatar=function(Z$a,Z$b,Z$c){var Z$d=0,Z$e=0;for(Z$d=0,Z$e=Z$a.getClipCount();Z$d<Z$e;Z$d++)Z$a._handleSpriteOwnersBySprite(Z$d,Z$b,Z$c,this);for(Z$d=0,Z$e=this._childs.length;Z$d<Z$e;Z$d++){var Z$f=this._childs[Z$d],Z$i=Z$c.length;Z$c.push(Z$f.name),Z$f._setAnimatorToLinkSprite3DNoAvatar(Z$a,Z$b,Z$c),Z$c.splice(Z$i,1)}},Z$c._changeHierarchyAnimator=function(Z$a){this._hierarchyAnimator=Z$a},Z$c._isLinkSpriteToAnimationNode=function(Z$a,Z$b,Z$c){var Z$d=Z$a._avatarNodes.indexOf(Z$b),Z$e=Z$a._cacheSpriteToNodesMap;if(Z$c)this._transform.dummy=Z$b.transform,Z$a._cacheNodesToSpriteMap[Z$d]=Z$e.length,Z$e.push(Z$d);else{this._transform.dummy=null;var Z$f=Z$a._cacheNodesToSpriteMap[Z$d];Z$a._cacheNodesToSpriteMap[Z$d]=null,Z$e.splice(Z$f,1)}},Z$c._setBelongScene=function(Z$a){this._scene=Z$a;for(var Z$b=0,Z$c=this._childs.length;Z$b<Z$c;Z$b++)this._childs[Z$b]._setBelongScene(Z$a)},Z$c._setUnBelongScene=function(){this._scene=null;for(var Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++)this._childs[Z$a]._setUnBelongScene()},Z$c._activeHierarchy=function(){var Z$a=0,Z$b=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),Z$a=0,Z$b=this._colliders.length;Z$a<Z$b;Z$a++)this._layer._addCollider(this._colliders[Z$a]);for(this.event("activeinhierarchychanged",!0),Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++){var Z$c=this._childs[Z$a];Z$c._active&&Z$c._activeHierarchy()}},Z$c._inActiveHierarchy=function(){var Z$a=0,Z$b=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),Z$a=0,Z$b=this._colliders.length;Z$a<Z$b;Z$a++){var Z$c=this._colliders[Z$a];Z$c._clearCollsionMap(),this._layer._removeCollider(Z$c)}for(this.event("activeinhierarchychanged",!1),Z$a=0,Z$b=this._childs.length;Z$a<Z$b;Z$a++){var Z$d=this._childs[Z$a];Z$d._active&&Z$d._inActiveHierarchy()}},Z$c.addComponent=function(Z$a){var Z$b,Z$c=this._componentsMap.indexOf(Z$a);if(-1===Z$c)Z$b=[],this._componentsMap.push(Z$a),this._typeComponentsIndices.push(Z$b);else if(Z$b=this._typeComponentsIndices[Z$c],this._components[Z$b[0]].isSingleton)throw new Error("无法单实例创建"+Z$a+"组件，"+Z$a+"组件已存在！");var Z$d=Z$e.getInstance(Z$a);return Z$b.push(this._components.length),this._components.push(Z$d),Z$d instanceof laya.d3.component.Script&&this._scripts.push(Z$d),Z$d._initialize(this),Z$d},Z$c._removeComponent=function(Z$a,Z$b){var Z$c,Z$d=0,Z$e=this._typeComponentsIndices[Z$a],Z$f=Z$e[Z$b],Z$i=this._components[Z$f];for(Z$i instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(Z$i),1),Z$e.splice(Z$b,1),0===Z$e.length&&(this._typeComponentsIndices.splice(Z$a,1),this._componentsMap.splice(Z$a,1)),Z$d=0,Z$c=this._componentsMap.length;Z$d<Z$c;Z$d++)for(var Z$j=(Z$e=this._typeComponentsIndices[Z$d]).length-1;0<=Z$j;Z$j--){var Z$k=Z$e[Z$j];if(!(Z$f<Z$k))break;Z$e[Z$j]=--Z$k}Z$i._destroy()},Z$c._clearSelfRenderObjects=function(){},Z$c._addSelfRenderObjects=function(){},Z$c._parseCustomProps=function(Z$a,Z$b,Z$c,Z$d){},Z$c._updateChilds=function(Z$a){var Z$b=this._childs.length;if(0!==Z$b)for(var Z$c=0;Z$c<Z$b;++Z$c)this._childs[Z$c]._update(Z$a)},Z$c._getSortID=function(Z$a,Z$b){return 1e3*Z$b.id+Z$a._getVertexBuffer().vertexDeclaration.id},Z$c._update=function(Z$a){(Z$a.owner=this)._activeInHierarchy&&(this._updateComponents(Z$a),this._lateUpdateComponents(Z$a),Z$A.spriteCount++,this._childs.length&&this._updateChilds(Z$a))},Z$c.getProjectionViewWorldMatrix=function(Z$a){return Z$ab.multiply(Z$a,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},Z$c.loadHierarchy=function(Z$a){this.addChild(laya.d3.core.Sprite3D.load(Z$a))},Z$c.addChildAt=function(Z$a,Z$b){if(!(Z$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!Z$a||this.destroyed||Z$a===this)return Z$a;if(Z$a.zOrder&&this._set$P("hasZorder",!0),0<=Z$b&&Z$b<=this._childs.length){if(Z$a._parent===this){var Z$c=this.getChildIndex(Z$a);this._childs.splice(Z$c,1),this._childs.splice(Z$b,0,Z$a),this.conchModel&&(this.conchModel.removeChild(Z$a.conchModel),this.conchModel.addChildAt(Z$a.conchModel,Z$b)),this._childChanged()}else Z$a.parent&&Z$a.parent.removeChild(Z$a),this._childs===Z$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(Z$b,0,Z$a),this.conchModel&&this.conchModel.addChildAt(Z$a.conchModel,Z$b),(Z$a.parent=this)._addChild3D(Z$a);return Z$a}throw new Error("appendChildAt:The index is out of bounds")},Z$c.addChild=function(Z$a){if(!(Z$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!Z$a||this.destroyed||Z$a===this)return Z$a;if(Z$a.zOrder&&this._set$P("hasZorder",!0),Z$a._parent===this){var Z$b=this.getChildIndex(Z$a);Z$b!==this._childs.length-1&&(this._childs.splice(Z$b,1),this._childs.push(Z$a),this.conchModel&&(this.conchModel.removeChild(Z$a.conchModel),this.conchModel.addChildAt(Z$a.conchModel,this._childs.length-1)),this._childChanged())}else Z$a.parent&&Z$a.parent.removeChild(Z$a),this._childs===Z$l.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(Z$a),this.conchModel&&this.conchModel.addChildAt(Z$a.conchModel,this._childs.length-1),(Z$a.parent=this)._childChanged(),this._addChild3D(Z$a);return Z$a},Z$c.removeChildAt=function(Z$a){var Z$b=this.getChildAt(Z$a);return Z$b&&(this._removeChild3D(Z$b),this._childs.splice(Z$a,1),this.conchModel&&this.conchModel.removeChild(Z$b.conchModel),Z$b.parent=null),Z$b},Z$c.removeChildren=function(Z$a,Z$b){if(void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=2147483647),this._childs&&0<this._childs.length){var Z$c=this._childs;if(0===Z$a&&Z$f<=Z$b){var Z$d=Z$c;this._childs=Z$l.ARRAY_EMPTY}else Z$d=Z$c.splice(Z$a,Z$b-Z$a);for(var Z$e=0,Z$f=Z$d.length;Z$e<Z$f;Z$e++)this._removeChild3D(Z$d[Z$e]),Z$d[Z$e].parent=null,this.conchModel&&this.conchModel.removeChild(Z$d[Z$e].conchModel)}return this},Z$c.onAsynLoaded=function(Z$a,Z$b,Z$c){var Z$d=Z$b[0];if("Sprite3D"!==Z$d.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var Z$e=Z$b[1];Z$sb._createNodeByJson(this,Z$d,this,Z$e),this.event("hierarchyloaded",[this]),this.__loaded=!0},Z$c.cloneTo=function(Z$a){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var Z$b=Z$a;Z$b.name=this.name,Z$b._destroyed=this._destroyed,Z$b.timer=this.timer,Z$b._$P=this._$P,Z$b.active=this._active;var Z$c=Z$b.transform.localPosition;this.transform.localPosition.cloneTo(Z$c),Z$b.transform.localPosition=Z$c;var Z$d=Z$b.transform.localRotation;this.transform.localRotation.cloneTo(Z$d),Z$b.transform.localRotation=Z$d;var Z$e=Z$b.transform.localScale;this.transform.localScale.cloneTo(Z$e),Z$b.transform.localScale=Z$e,Z$b.isStatic=this.isStatic;var Z$f=0,Z$i=0;for(Z$f=0,Z$i=this._componentsMap.length;Z$f<Z$i;Z$f++){var Z$j=Z$b.addComponent(this._componentsMap[Z$f]);this._components[Z$f]._cloneTo(Z$j)}for(Z$f=0,Z$i=this._childs.length;Z$f<Z$i;Z$f++)Z$b.addChild(this._childs[Z$f].clone());var Z$k=Z$b.getComponentByType(Animator);if(Z$k){var Z$l=Z$k._linkSpritesData;if(Z$l)for(var Z$m in Z$l){for(var Z$n=Z$l[Z$m],Z$o=Z$b,Z$p=0,Z$q=Z$n.length;Z$p<Z$q&&(Z$o=Z$o.getChildByName(Z$n[Z$p]));Z$p++);if(Z$o){var Z$r=Z$k._avatarNodeMap[Z$m];Z$o._isLinkSpriteToAnimationNode(Z$k,Z$r,!0)}}}},Z$c.clone=function(){var Z$a=new this.constructor;return this.cloneTo(Z$a),Z$a},Z$c.destroy=function(Z$a){if(void 0===Z$a&&(Z$a=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,Z$a);var Z$b,Z$c=0;for(Z$c=0,Z$b=this._components.length;Z$c<Z$b;Z$c++)this._components[Z$c]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,Z$t.clearRes(this.url),this.loaded||Z$tb._cancelLoadByUrl(this.url)}},Z$c._handleSpriteToAvatar=function(Z$a,Z$b){Z$a._avatarNodes;var Z$c=Z$a._avatarNodeMap[this.name];Z$c&&Z$c.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(Z$a,Z$c,Z$b)},Z$c._setAnimatorToLinkAvatar=function(Z$a,Z$b){this._handleSpriteToAvatar(Z$a,Z$b);for(var Z$c=0,Z$d=this._childs.length;Z$c<Z$d;Z$c++){this._childs[Z$c]._setAnimatorToLinkAvatar(Z$a,Z$b)}},Z$q(0,Z$c,"activeInHierarchy",function(){return this._activeInHierarchy}),Z$q(0,Z$c,"_loaded",null,function(Z$a){this.__loaded=Z$a}),Z$q(0,Z$c,"active",function(){return this._active},function(Z$a){this._active!==Z$a&&(this._active=Z$a,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(Z$a?this._activeHierarchy():this._inActiveHierarchy()))}),Z$q(0,Z$c,"componentsCount",function(){return this._components.length}),Z$q(0,Z$c,"loaded",function(){return this.__loaded}),Z$q(0,Z$c,"id",function(){return this._id}),Z$q(0,Z$c,"url",function(){return this._url}),Z$q(0,Z$c,"layer",function(){return this._layer},function(Z$a){if(this._layer!==Z$a){if(!Z$a)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var Z$b=0,Z$c=this._colliders.length;if(this._layer)for(Z$b=0;Z$b<Z$c;Z$b++)this._layer._removeCollider(this._colliders[Z$b]);for(Z$b=0;Z$b<Z$c;Z$b++)Z$a._addCollider(this._colliders[Z$b])}this._layer=Z$a,this.event("layerchanged",Z$a)}}),Z$q(0,Z$c,"scene",function(){return this._scene}),Z$q(0,Z$c,"transform",function(){return this._transform}),Z$b.instantiate=function(Z$a,Z$b,Z$c,Z$d,Z$e){void 0===Z$c&&(Z$c=!0);var Z$f=Z$a.clone();Z$b&&Z$b.addChild(Z$f);var Z$i=Z$f.transform;if(Z$c){var Z$j=Z$i.worldMatrix;Z$a.transform.worldMatrix.cloneTo(Z$j),Z$i.worldMatrix=Z$j}else Z$d&&(Z$i.position=Z$d),Z$e&&(Z$i.rotation=Z$e);return Z$f},Z$b.load=function(Z$a){return Z$x.loader.create(Z$a,null,null,Z$b)},Z$b.WORLDMATRIX=0,Z$b.MVPMATRIX=1,Z$b._uniqueIDCounter=0,Z$b._nameNumberCounter=0,Z$b}(),Z$Lb=function(Z$a){function Z$m(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],Z$m.__super.call(this),!Z$a||!Z$b)throw"Shader Error";this._id=++Z$m._count,this._vs=Z$a,this._ps=Z$b,this._attributeMap=Z$c,this._sceneUniformMap=Z$d,this._cameraUniformMap=Z$e,this._spriteUniformMap=Z$f,this._materialUniformMap=Z$i,this._renderElementUniformMap=Z$j,this._precompile=Z$k,this._define=Z$l,this._precompile&&Z$m.extCompileObj&&Z$m.extCompileFunc?Z$m.extCompileFunc.call(Z$m.extCompileObj,Z$a,Z$b,Z$l):this.recreateResource()}Z$p(Z$m,"laya.d3.shader.Shader3D",Z$c);var Z$b=Z$m.prototype;return Z$b.recreateResource=function(){Z$H.now();this._compile(),this.completeCreate(),this.memorySize=0},Z$b.disposeResource=function(){Z$F.mainContext.deleteShader(this._vshader),Z$F.mainContext.deleteShader(this._pshader),Z$F.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},Z$b._compile=function(){if(!Z$F.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var Z$a=[this._vs,this._ps],Z$b=Z$F.mainContext;if(this._program=Z$b.createProgram(),this._vshader=Z$m._createShader(Z$b,Z$a[0],35633),this._pshader=Z$m._createShader(Z$b,Z$a[1],35632),Z$b.attachShader(this._program,this._vshader),Z$b.attachShader(this._program,this._pshader),Z$b.linkProgram(this._program),!Z$r.isConchApp&&Z$Ab.debugMode&&!Z$b.getProgramParameter(this._program,35714))throw Z$b.getProgramInfoLog(this._program);var Z$c,Z$d=0,Z$e=0,Z$f=0;for(Z$f=Z$r.isConchApp?Z$b.getProgramParameterEx(this._vs,this._ps,"",35721):Z$b.getProgramParameter(this._program,35721),Z$d=0;Z$d<Z$f;Z$d++){var Z$i=null;Z$c={vartype:"attribute",ivartype:0,attrib:Z$i=Z$r.isConchApp?Z$b.getActiveAttribEx(this._vs,this._ps,"",Z$d):Z$b.getActiveAttrib(this._program,Z$d),location:Z$b.getAttribLocation(this._program,Z$i.name),name:Z$i.name,type:Z$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(Z$c)}var Z$j=0;for(Z$j=Z$r.isConchApp?Z$b.getProgramParameterEx(this._vs,this._ps,"",35718):Z$b.getProgramParameter(this._program,35718),Z$d=0;Z$d<Z$j;Z$d++){var Z$k=null;Z$k=Z$r.isConchApp?Z$b.getActiveUniformEx(this._vs,this._ps,"",Z$d):Z$b.getActiveUniform(this._program,Z$d),0<(Z$c={vartype:"uniform",ivartype:1,attrib:Z$i,location:Z$b.getUniformLocation(this._program,Z$k.name),name:Z$k.name,type:Z$k.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(Z$c.name=Z$c.name.substr(0,Z$c.name.length-3),Z$c.isArray=!0,Z$c.location=Z$b.getUniformLocation(this._program,Z$c.name)),this._uniformParams.push(Z$c)}for(Z$d=0,Z$e=this._attributeParams.length;Z$d<Z$e;Z$d++)(Z$c=this._attributeParams[Z$d]).indexOfParams=Z$d,Z$c.index=1,Z$c.value=[Z$c.location,null],Z$c.codename=Z$c.name,Z$c.name=null!=this._attributeMap[Z$c.codename]?this._attributeMap[Z$c.codename]:Z$c.codename,this._attributeParamsMap.push(Z$c.name),this._attributeParamsMap.push(Z$c),Z$c._this=this,Z$c.uploadedValue=[],Z$c.fun=this._attribute;for(Z$d=0,Z$e=this._uniformParams.length;Z$d<Z$e;Z$d++)switch((Z$c=this._uniformParams[Z$d]).indexOfParams=Z$d,Z$c.index=1,Z$c.value=[Z$c.location,null],Z$c.codename=Z$c.name,null!=this._sceneUniformMap[Z$c.codename]?(Z$c.name=this._sceneUniformMap[Z$c.codename],this._sceneUniformParamsMap.push(Z$c.name),this._sceneUniformParamsMap.push(Z$c)):null!=this._cameraUniformMap[Z$c.codename]?(Z$c.name=this._cameraUniformMap[Z$c.codename],this._cameraUniformParamsMap.push(Z$c.name),this._cameraUniformParamsMap.push(Z$c)):null!=this._spriteUniformMap[Z$c.codename]?(Z$c.name=this._spriteUniformMap[Z$c.codename],this._spriteUniformParamsMap.push(Z$c.name),this._spriteUniformParamsMap.push(Z$c)):null!=this._materialUniformMap[Z$c.codename]?(Z$c.name=this._materialUniformMap[Z$c.codename],this._materialUniformParamsMap.push(Z$c.name),this._materialUniformParamsMap.push(Z$c)):null!=this._renderElementUniformMap[Z$c.codename]?(Z$c.name=this._renderElementUniformMap[Z$c.codename],this._renderElementUniformParamsMap.push(Z$c.name),this._renderElementUniformParamsMap.push(Z$c)):console.log("Shader:can't find uinform name:"+Z$c.codename+" in shader file."),Z$c._this=this,Z$c.uploadedValue=[],Z$c.type){case 5124:Z$c.fun=Z$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:Z$c.fun=Z$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:Z$c.fun=Z$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:Z$c.fun=Z$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:Z$c.fun=Z$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:Z$c.fun=this._uniform_sampler2D;break;case 35680:Z$c.fun=this._uniform_samplerCube;break;case 35676:Z$c.fun=this._uniformMatrix4fv;break;case 35670:Z$c.fun=this._uniform1i;break;case 35674:Z$c.fun=this._uinformMatrix2fv;break;case 35675:Z$c.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},Z$b._attribute=function(Z$a,Z$b){var Z$c=Z$F.mainContext,Z$d=Z$j._enableAtributes,Z$e=Z$a.location;return Z$d[Z$e]||Z$c.enableVertexAttribArray(Z$e),Z$c.vertexAttribPointer(Z$e,Z$b[0],Z$b[1],Z$b[2],Z$b[3],Z$b[4]),Z$d[Z$e]=Z$j._bindVertexBuffer,1},Z$b._uniform1f=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b?(Z$F.mainContext.uniform1f(Z$a.location,Z$c[0]=Z$b),1):0},Z$b._uniform1fv=function(Z$a,Z$b){if(Z$b.length<4){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]||Z$c[3]!==Z$b[3]?(Z$F.mainContext.uniform1fv(Z$a.location,Z$b),Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2],Z$c[3]=Z$b[3],1):0}return Z$F.mainContext.uniform1fv(Z$a.location,Z$b),1},Z$b._uniform_vec2=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]?(Z$F.mainContext.uniform2f(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1]),1):0},Z$b._uniform_vec2v=function(Z$a,Z$b){if(Z$b.length<2){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]||Z$c[3]!==Z$b[3]?(Z$F.mainContext.uniform2fv(Z$a.location,Z$b),Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2],Z$c[3]=Z$b[3],1):0}return Z$F.mainContext.uniform2fv(Z$a.location,Z$b),1},Z$b._uniform_vec3=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]?(Z$F.mainContext.uniform3f(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2]),1):0},Z$b._uniform_vec3v=function(Z$a,Z$b){return Z$F.mainContext.uniform3fv(Z$a.location,Z$b),1},Z$b._uniform_vec4=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]||Z$c[3]!==Z$b[3]?(Z$F.mainContext.uniform4f(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2],Z$c[3]=Z$b[3]),1):0},Z$b._uniform_vec4v=function(Z$a,Z$b){return Z$F.mainContext.uniform4fv(Z$a.location,Z$b),1},Z$b._uniformMatrix2fv=function(Z$a,Z$b){return Z$F.mainContext.uniformMatrix2fv(Z$a.location,!1,Z$b),1},Z$b._uniformMatrix3fv=function(Z$a,Z$b){return Z$F.mainContext.uniformMatrix3fv(Z$a.location,!1,Z$b),1},Z$b._uniformMatrix4fv=function(Z$a,Z$b){return Z$F.mainContext.uniformMatrix4fv(Z$a.location,!1,Z$b),1},Z$b._uinformMatrix2fv=function(Z$a,Z$b){return Z$F.mainContext.uniformMatrix2fv(Z$a.location,!1,Z$b),1},Z$b._uinformMatrix3fv=function(Z$a,Z$b){return Z$F.mainContext.uniformMatrix3fv(Z$a.location,!1,Z$b),1},Z$b._uniform1i=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b?(Z$F.mainContext.uniform1i(Z$a.location,Z$c[0]=Z$b),1):0},Z$b._uniform1iv=function(Z$a,Z$b){return Z$F.mainContext.uniform1iv(Z$a.location,Z$b),1},Z$b._uniform_ivec2=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]?(Z$F.mainContext.uniform2i(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1]),1):0},Z$b._uniform_ivec2v=function(Z$a,Z$b){return Z$F.mainContext.uniform2iv(Z$a.location,Z$b),1},Z$b._uniform_vec3i=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]?(Z$F.mainContext.uniform3i(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2]),1):0},Z$b._uniform_vec3vi=function(Z$a,Z$b){return Z$F.mainContext.uniform3iv(Z$a.location,Z$b),1},Z$b._uniform_vec4i=function(Z$a,Z$b){var Z$c=Z$a.uploadedValue;return Z$c[0]!==Z$b[0]||Z$c[1]!==Z$b[1]||Z$c[2]!==Z$b[2]||Z$c[3]!==Z$b[3]?(Z$F.mainContext.uniform4i(Z$a.location,Z$c[0]=Z$b[0],Z$c[1]=Z$b[1],Z$c[2]=Z$b[2],Z$c[3]=Z$b[3]),1):0},Z$b._uniform_vec4vi=function(Z$a,Z$b){return Z$F.mainContext.uniform4iv(Z$a.location,Z$b),1},Z$b._uniform_sampler2D=function(Z$a,Z$b){var Z$c=Z$b.source||Z$b.defaulteTexture.source,Z$d=Z$F.mainContext,Z$e=Z$a.uploadedValue;if(null!=Z$e[0])return Z$d.activeTexture(Z$m._TEXTURES[Z$e[0]]),Z$c&&Z$G.bindTexture(Z$d,3553,Z$c),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return Z$e[0]=this._curActTexIndex,Z$d.uniform1i(Z$a.location,this._curActTexIndex),Z$d.activeTexture(Z$m._TEXTURES[this._curActTexIndex]),Z$c&&Z$G.bindTexture(Z$d,3553,Z$c),this._curActTexIndex++,1},Z$b._uniform_samplerCube=function(Z$a,Z$b){var Z$c=Z$b.source||Z$b.defaulteTexture.source,Z$d=Z$F.mainContext,Z$e=Z$a.uploadedValue;if(null!=Z$e[0])return Z$d.activeTexture(Z$m._TEXTURES[Z$e[0]]),Z$c?Z$G.bindTexture(Z$d,34067,Z$c):Z$G.bindTexture(Z$d,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return Z$e[0]=this._curActTexIndex,Z$d.uniform1i(Z$a.location,this._curActTexIndex),Z$d.activeTexture(Z$m._TEXTURES[this._curActTexIndex]),Z$c?Z$G.bindTexture(Z$d,34067,Z$c):Z$G.bindTexture(Z$d,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},Z$b._noSetValue=function(Z$a){console.log("no....:"+Z$a.name)},Z$b.bind=function(){return Z$c.activeShader=this,(Z$c.bindShader=this).activeResource(),Z$G.UseProgram(this._program)},Z$b.uploadAttributes=function(Z$a,Z$b){for(var Z$c,Z$d,Z$e=0,Z$f=0,Z$i=this._attributeParamsMap.length;Z$f<Z$i;Z$f+=2)Z$d=this._attributeParamsMap[Z$f+1],null!=(Z$c=Z$a[this._attributeParamsMap[Z$f]])&&(Z$b&&Z$b[Z$d.name]&&Z$b[Z$d.name].bind(),Z$e+=Z$d.fun.call(this,Z$d,Z$c));Z$A.shaderCall+=Z$e},Z$b.uploadAttributesX=function(Z$a,Z$b){for(var Z$c,Z$d,Z$e=0,Z$f=0,Z$i=this._attributeParamsMap.length;Z$f<Z$i;Z$f+=2)Z$d=this._attributeParamsMap[Z$f+1],null!=(Z$c=Z$a[this._attributeParamsMap[Z$f]])&&(Z$b._bind(),Z$e+=Z$d.fun.call(this,Z$d,Z$c));Z$A.shaderCall+=Z$e},Z$b.uploadSceneUniforms=function(Z$a){for(var Z$b,Z$c,Z$d=0,Z$e=0,Z$f=this._sceneUniformParamsMap.length;Z$e<Z$f;Z$e+=2)Z$c=this._sceneUniformParamsMap[Z$e+1],null!=(Z$b=Z$a[this._sceneUniformParamsMap[Z$e]])&&(Z$d+=Z$c.fun.call(this,Z$c,Z$b));Z$A.shaderCall+=Z$d},Z$b.uploadCameraUniforms=function(Z$a){for(var Z$b,Z$c,Z$d=0,Z$e=0,Z$f=this._cameraUniformParamsMap.length;Z$e<Z$f;Z$e+=2)Z$c=this._cameraUniformParamsMap[Z$e+1],null!=(Z$b=Z$a[this._cameraUniformParamsMap[Z$e]])&&(Z$d+=Z$c.fun.call(this,Z$c,Z$b));Z$A.shaderCall+=Z$d},Z$b.uploadSpriteUniforms=function(Z$a){for(var Z$b,Z$c,Z$d=0,Z$e=0,Z$f=this._spriteUniformParamsMap.length;Z$e<Z$f;Z$e+=2)Z$c=this._spriteUniformParamsMap[Z$e+1],null!=(Z$b=Z$a[this._spriteUniformParamsMap[Z$e]])&&(Z$d+=Z$c.fun.call(this,Z$c,Z$b));Z$A.shaderCall+=Z$d},Z$b.uploadMaterialUniforms=function(Z$a){for(var Z$b,Z$c,Z$d=0,Z$e=0,Z$f=this._materialUniformParamsMap.length;Z$e<Z$f;Z$e+=2)Z$c=this._materialUniformParamsMap[Z$e+1],null!=(Z$b=Z$a[this._materialUniformParamsMap[Z$e]])&&(Z$d+=Z$c.fun.call(this,Z$c,Z$b));Z$A.shaderCall+=Z$d},Z$b.uploadRenderElementUniforms=function(Z$a){for(var Z$b,Z$c,Z$d=0,Z$e=0,Z$f=this._renderElementUniformParamsMap.length;Z$e<Z$f;Z$e+=2)Z$c=this._renderElementUniformParamsMap[Z$e+1],null!=(Z$b=Z$a[this._renderElementUniformParamsMap[Z$e]])&&(Z$d+=Z$c.fun.call(this,Z$c,Z$b));Z$A.shaderCall+=Z$d},Z$m.create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){return new Z$m(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l)},Z$m.addInclude=function(Z$a,Z$b){Z$v.addInclude(Z$a,Z$b)},Z$m._createShader=function(Z$a,Z$b,Z$c){var Z$d=Z$a.createShader(Z$c);if(Z$a.shaderSource(Z$d,Z$b),Z$a.compileShader(Z$d),Z$Ab.debugMode&&!Z$a.getShaderParameter(Z$d,35713))throw Z$a.getShaderInfoLog(Z$d);return Z$d},Z$m.PERIOD_RENDERELEMENT=0,Z$m.PERIOD_MATERIAL=1,Z$m.PERIOD_SPRITE=2,Z$m.PERIOD_CAMERA=3,Z$m.PERIOD_SCENE=4,Z$m._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],Z$m._count=0,Z$m._preCompile=!1,Z$m.extCompileFunc=null,Z$m.extCompileObj=null,Z$n(Z$m,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new Z$B}]),Z$m}(),Z$Mb=function(Z$j){function Z$k(){this._transformUV=null,Z$k.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new Z$ib(.6,.6,.6)),this._setColor(10,new Z$ib(1,1,1)),this._setColor(11,new Z$jb(1,1,1,8)),this._setColor(12,new Z$ib(1,1,1)),this._setColor(7,new Z$jb(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new Z$jb(1,1,0,0)),this.renderMode=1}Z$p(Z$k,"laya.d3.core.material.StandardMaterial",Z$j);var Z$a=Z$k.prototype;return Z$a.disableLight=function(){this._addDisablePublicShaderDefine(Z$Ab.SHADERDEFINE_POINTLIGHT|Z$Ab.SHADERDEFINE_SPOTLIGHT|Z$Ab.SHADERDEFINE_DIRECTIONLIGHT)},Z$a.disableFog=function(){this._addDisablePublicShaderDefine(Z$Ab.SHADERDEFINE_FOG)},Z$a.onAsynLoaded=function(Z$a,Z$b,Z$c){var Z$d=Z$b[0];if(Z$d.version)Z$j.prototype.onAsynLoaded.call(this,Z$a,Z$b,Z$c);else{var Z$e=Z$b[1],Z$f=Z$d.props;for(var Z$i in Z$f)this[Z$i]=Z$f[Z$i];Z$k._parseStandardMaterial(Z$e,this,Z$d),this._endLoaded()}},Z$a.cloneTo=function(Z$a){Z$j.prototype.cloneTo.call(this,Z$a);var Z$b=Z$a;this._transformUV&&(Z$b._transformUV=this._transformUV.clone())},Z$q(0,Z$a,"ambientColor",function(){return this._getColor(9)},function(Z$a){this._setColor(9,Z$a)}),Z$q(0,Z$a,"ambientTexture",function(){return this._getTexture(5)},function(Z$a){Z$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,Z$a)}),Z$q(0,Z$a,"renderMode",null,function(Z$a){switch(Z$a){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(Z$k.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(Z$a)}),Z$q(0,Z$a,"reflectColor",function(){return this._getColor(12)},function(Z$a){this._setColor(12,Z$a)}),Z$q(0,Z$a,"tilingOffset",function(){return this._getColor(15)},function(Z$a){if(Z$a){var Z$b=Z$a.elements;1!=Z$b[0]||1!=Z$b[1]||0!=Z$b[2]||0!=Z$b[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,Z$a)}),Z$q(0,Z$a,"albedo",function(){return this._getColor(7)},function(Z$a){this._setColor(7,Z$a)}),Z$q(0,Z$a,"diffuseColor",function(){return this._getColor(10)},function(Z$a){this._setColor(10,Z$a)}),Z$q(0,Z$a,"albedoColor",function(){return this._getColor(7)},function(Z$a){this._setColor(7,Z$a)}),Z$q(0,Z$a,"specularColor",function(){return this._getColor(11)},function(Z$a){this._setColor(11,Z$a)}),Z$q(0,Z$a,"diffuseTexture",function(){return this._getTexture(1)},function(Z$a){Z$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,Z$a)}),Z$q(0,Z$a,"normalTexture",function(){return this._getTexture(2)},function(Z$a){Z$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,Z$a)}),Z$q(0,Z$a,"specularTexture",function(){return this._getTexture(3)},function(Z$a){Z$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,Z$a)}),Z$q(0,Z$a,"emissiveTexture",function(){return this._getTexture(4)},function(Z$a){Z$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,Z$a)}),Z$q(0,Z$a,"reflectTexture",function(){return this._getTexture(6)},function(Z$a){Z$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,Z$a)}),Z$q(0,Z$a,"transformUV",function(){return this._transformUV},function(Z$a){this._transformUV=Z$a,this._setMatrix4x4(13,Z$a.matrix),Z$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,Z$a.matrix.elements,0)}),Z$k.__init__=function(){Z$k.SHADERDEFINE_DIFFUSEMAP=Z$k.shaderDefines.registerDefine("DIFFUSEMAP"),Z$k.SHADERDEFINE_NORMALMAP=Z$k.shaderDefines.registerDefine("NORMALMAP"),Z$k.SHADERDEFINE_SPECULARMAP=Z$k.shaderDefines.registerDefine("SPECULARMAP"),Z$k.SHADERDEFINE_EMISSIVEMAP=Z$k.shaderDefines.registerDefine("EMISSIVEMAP"),Z$k.SHADERDEFINE_AMBIENTMAP=Z$k.shaderDefines.registerDefine("AMBIENTMAP"),Z$k.SHADERDEFINE_REFLECTMAP=Z$k.shaderDefines.registerDefine("REFLECTMAP"),Z$k.SHADERDEFINE_UVTRANSFORM=Z$k.shaderDefines.registerDefine("UVTRANSFORM"),Z$k.SHADERDEFINE_TILINGOFFSET=Z$k.shaderDefines.registerDefine("TILINGOFFSET"),Z$k.SHADERDEFINE_ADDTIVEFOG=Z$k.shaderDefines.registerDefine("ADDTIVEFOG")},Z$k.load=function(Z$a){return Z$x.loader.create(Z$a,null,null,Z$k)},Z$k._parseStandardMaterial=function(Z$a,Z$b,Z$c){var Z$d=Z$c.customProps,Z$e=Z$d.ambientColor;Z$b.ambientColor=new Z$ib(Z$e[0],Z$e[1],Z$e[2]);var Z$f=Z$d.diffuseColor;Z$b.diffuseColor=new Z$ib(Z$f[0],Z$f[1],Z$f[2]);var Z$i=Z$d.specularColor;Z$b.specularColor=new Z$jb(Z$i[0],Z$i[1],Z$i[2],Z$i[3]);var Z$j=Z$d.reflectColor;Z$b.reflectColor=new Z$ib(Z$j[0],Z$j[1],Z$j[2]);var Z$k=Z$d.albedoColor;Z$k&&(Z$b.albedo=new Z$jb(Z$k[0],Z$k[1],Z$k[2],Z$k[3]));var Z$l=Z$d.diffuseTexture.texture2D;Z$l&&(Z$b.diffuseTexture=Z$t.getRes(Z$a[Z$l]));var Z$m=Z$d.normalTexture.texture2D;Z$m&&(Z$b.normalTexture=Z$t.getRes(Z$a[Z$m]));var Z$n=Z$d.specularTexture.texture2D;Z$n&&(Z$b.specularTexture=Z$t.getRes(Z$a[Z$n]));var Z$o=Z$d.emissiveTexture.texture2D;Z$o&&(Z$b.emissiveTexture=Z$t.getRes(Z$a[Z$o]));var Z$p=Z$d.ambientTexture.texture2D;Z$p&&(Z$b.ambientTexture=Z$t.getRes(Z$a[Z$p]));var Z$q=Z$d.reflectTexture.texture2D;Z$q&&(Z$b.reflectTexture=Z$t.getRes(Z$a[Z$q]))},Z$k.RENDERMODE_OPAQUE=1,Z$k.RENDERMODE_OPAQUEDOUBLEFACE=2,Z$k.RENDERMODE_CUTOUT=3,Z$k.RENDERMODE_CUTOUTDOUBLEFACE=4,Z$k.RENDERMODE_TRANSPARENT=13,Z$k.RENDERMODE_TRANSPARENTDOUBLEFACE=14,Z$k.RENDERMODE_ADDTIVE=15,Z$k.RENDERMODE_ADDTIVEDOUBLEFACE=16,Z$k.RENDERMODE_DEPTHREAD_TRANSPARENT=5,Z$k.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,Z$k.RENDERMODE_DEPTHREAD_ADDTIVE=7,Z$k.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,Z$k.RENDERMODE_NONDEPTH_TRANSPARENT=9,Z$k.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,Z$k.RENDERMODE_NONDEPTH_ADDTIVE=11,Z$k.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,Z$k.SHADERDEFINE_DIFFUSEMAP=0,Z$k.SHADERDEFINE_NORMALMAP=0,Z$k.SHADERDEFINE_SPECULARMAP=0,Z$k.SHADERDEFINE_EMISSIVEMAP=0,Z$k.SHADERDEFINE_AMBIENTMAP=0,Z$k.SHADERDEFINE_REFLECTMAP=0,Z$k.SHADERDEFINE_UVTRANSFORM=0,Z$k.SHADERDEFINE_TILINGOFFSET=0,Z$k.SHADERDEFINE_ADDTIVEFOG=0,Z$k.DIFFUSETEXTURE=1,Z$k.NORMALTEXTURE=2,Z$k.SPECULARTEXTURE=3,Z$k.EMISSIVETEXTURE=4,Z$k.AMBIENTTEXTURE=5,Z$k.REFLECTTEXTURE=6,Z$k.ALBEDO=7,Z$k.UVANIAGE=8,Z$k.MATERIALAMBIENT=9,Z$k.MATERIALDIFFUSE=10,Z$k.MATERIALSPECULAR=11,Z$k.MATERIALREFLECT=12,Z$k.UVMATRIX=13,Z$k.UVAGE=14,Z$k.TILINGOFFSET=15,Z$n(Z$k,["defaultMaterial",function(){var Z$a=new Z$k;return Z$a.lock=!0,this.defaultMaterial=Z$a},"shaderDefines",function(){return this.shaderDefines=new Z$mb(Z$Eb.shaderDefines)}]),Z$k}(Z$Eb),Z$Nb=function(Z$a){function Z$i(Z$a,Z$b,Z$c,Z$d,Z$e){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===Z$c&&(Z$c=35044),void 0===Z$d&&(Z$d=!1),Z$i.__super.call(this),this._indexType=Z$a,this._indexCount=Z$b,this._bufferUsage=Z$c,this._bufferType=34963,this._canRead=Z$d;var Z$f;if("ushort"==Z$a)this._indexTypeByteCount=2;else{if("ubyte"!=Z$a)throw new Error("unidentification index type.");this._indexTypeByteCount=1}Z$f=this._indexTypeByteCount*Z$b,this._byteLength=Z$f,this._bind(),Z$j._gl.bufferData(this._bufferType,Z$f,this._bufferUsage),this.uri=Z$e,Z$d?("ushort"==Z$a?this._buffer=new Uint16Array(Z$b):"ubyte"==Z$a&&(this._buffer=new Uint8Array(Z$b)),this.memorySize=2*Z$f):this.memorySize=Z$f}Z$p(Z$i,"laya.d3.graphics.IndexBuffer3D",Z$a);var Z$b=Z$i.prototype;return Z$b.setData=function(Z$a,Z$b,Z$c,Z$d){void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=4294967295);var Z$e=0;if("ushort"==this._indexType?(Z$e=2,0===Z$c&&4294967295===Z$d||(Z$a=new Uint16Array(Z$a.buffer,Z$c*Z$e,Z$d))):"ubyte"==this._indexType&&(Z$e=1,0===Z$c&&4294967295===Z$d||(Z$a=new Uint8Array(Z$a.buffer,Z$c*Z$e,Z$d))),this._bind(),Z$j._gl.bufferSubData(this._bufferType,Z$b*Z$e,Z$a),this._canRead)if(0!==Z$b||0!==Z$c||4294967295!==Z$d){var Z$f=this._buffer.length-Z$b;Z$f<Z$d&&(Z$d=Z$f);for(var Z$i=0;Z$i<Z$d;Z$i++)this._buffer[Z$b+Z$i]=Z$a[Z$i]}else this._buffer=Z$a},Z$b.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},Z$b.disposeResource=function(){Z$a.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},Z$q(0,Z$b,"indexType",function(){return this._indexType}),Z$q(0,Z$b,"indexTypeByteCount",function(){return this._indexTypeByteCount}),Z$q(0,Z$b,"indexCount",function(){return this._indexCount}),Z$q(0,Z$b,"canRead",function(){return this._canRead}),Z$i.INDEXTYPE_UBYTE="ubyte",Z$i.INDEXTYPE_USHORT="ushort",Z$i.create=function(Z$a,Z$b,Z$c,Z$d,Z$e){return void 0===Z$c&&(Z$c=35044),void 0===Z$d&&(Z$d=!1),new Z$i(Z$a,Z$b,Z$c,Z$d,Z$e)},Z$i}(Z$j),Z$Ob=function(Z$f){function Z$i(Z$a,Z$b,Z$c,Z$d,Z$e){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===Z$d&&(Z$d=!1),Z$i.__super.call(this),this._vertexDeclaration=Z$a,this._vertexCount=Z$b,this._bufferUsage=Z$c,this._bufferType=34962,this._canRead=Z$d,this.uri=Z$e,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*Z$b,this._bind(),Z$j._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),Z$d&&(this._buffer=new Float32Array(this._byteLength/4))}Z$p(Z$i,"laya.d3.graphics.VertexBuffer3D",Z$f);var Z$a=Z$i.prototype;return Z$a.bindWithIndexBuffer=function(Z$a){Z$a&&Z$a._bind(),this._bind()},Z$a.setData=function(Z$a,Z$b,Z$c,Z$d){if(void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=4294967295),0===Z$c&&4294967295===Z$d||(Z$a=new Float32Array(Z$a.buffer,4*Z$c,Z$d)),this._bind(),Z$j._gl.bufferSubData(this._bufferType,4*Z$b,Z$a),this._canRead)if(0!==Z$b||0!==Z$c||4294967295!==Z$d){var Z$e=this._buffer.length-Z$b;Z$e<Z$d&&(Z$d=Z$e);for(var Z$f=0;Z$f<Z$d;Z$f++)this._buffer[Z$b+Z$f]=Z$a[Z$f]}else this._buffer=Z$a},Z$a.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},Z$a.disposeResource=function(){for(var Z$a=Z$F.mainContext,Z$b=this._vertexDeclaration.getVertexElements(),Z$c=Z$j._enableAtributes,Z$d=0,Z$e=Z$b.length;Z$d<Z$e;Z$d++)Z$c[Z$d]===this._glBuffer&&(Z$a.disableVertexAttribArray(Z$d),Z$c[Z$d]=null);Z$f.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},Z$q(0,Z$a,"vertexDeclaration",function(){return this._vertexDeclaration}),Z$q(0,Z$a,"vertexCount",function(){return this._vertexCount}),Z$q(0,Z$a,"canRead",function(){return this._canRead}),Z$i.create=function(Z$a,Z$b,Z$c,Z$d,Z$e){return void 0===Z$c&&(Z$c=35044),void 0===Z$d&&(Z$d=!1),new Z$i(Z$a,Z$b,Z$c,Z$d,Z$e)},Z$i}(Z$j),Z$Pb=function(Z$a){function Z$v(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,Z$v.__super.call(this),this._type=3553}Z$p(Z$v,"laya.d3.resource.DataTexture2D",Z$Fb);var Z$b=Z$v.prototype;return Z$b.genDebugMipmaps=function(){var Z$a=[];return Z$a.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),Z$a.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),Z$a.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),Z$a.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),Z$a.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),Z$a.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),Z$a.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),Z$a.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),Z$a.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),Z$a.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),Z$a},Z$b._onTextureLoaded=function(Z$a){},Z$b._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var Z$a=Z$F.mainContext,Z$b=this._source=Z$a.createTexture(),Z$c=this._width,Z$d=this._height,Z$e=Z$G.curBindTexTarget,Z$f=Z$G.curBindTexValue,Z$i=!1;if(Z$G.bindTexture(Z$a,this._type,Z$b),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var Z$j=0;Z$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var Z$k=0;Z$k<this._mipmaps.length;Z$k++){if(this._mipmaps[Z$k].byteLength!=Z$l*Z$m*4)throw"mipmap size error  level:"+Z$k;Z$a.texSubImage2D(this._type,0,Z$v.simLodRect[Z$j++],Z$v.simLodRect[Z$j++],Z$v.simLodRect[Z$j++],Z$v.simLodRect[Z$j++],6408,5121,new Uint8Array(this._mipmaps[Z$k]))}this.minFifter=9729,this.magFifter=9729}else{var Z$l=this._width,Z$m=this._height;for(Z$j=0,Z$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),Z$k=0;Z$k<this._mipmaps.length;Z$k++){if(this._mipmaps[Z$k].byteLength!=Z$l*Z$m*4)throw"mipmap size error  level:"+Z$k;Z$a.texImage2D(this._type,Z$k,6408,Z$l,Z$m,0,6408,5121,new Uint8Array(this._mipmaps[Z$k])),(Z$l/=2)<1&&(Z$l=1),(Z$m/=2)<1&&(Z$m=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&Z$a.pixelStorei(Z$a.UNPACK_ALIGNMENT,1),Z$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var Z$n=0,Z$o=!1,Z$p=!1;this._buffer.byteLength==4*Z$c*Z$d?(Z$n=6408,Z$o=!0):this._buffer.byteLength==3*Z$c*Z$d?(Z$n=6407,Z$p=!0):Z$n=this._format,Z$o||Z$p?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),Z$p&&Z$a.pixelStorei(Z$a.UNPACK_ALIGNMENT,1),Z$a.texImage2D(this._type,0,Z$n,Z$c,Z$d,0,Z$n,5121,this._buffer)):Z$a&&Z$n==Z$a.ALPHA?(Z$a.texImage2D(3553,0,Z$n,Z$c,Z$d,0,Z$n,Z$a.UNSIGNED_BYTE,this._buffer),Z$i=!0):0!=Z$n&&(Z$a.compressedTexImage2D(3553,0,Z$n,Z$c,Z$d,0,this._buffer),Z$i=!0)}var Z$q=this._minFifter,Z$r=this._magFifter,Z$s=0==this._wrapModeU?10497:33071,Z$t=0==this._wrapModeV?10497:33071,Z$u=Z$w.isPOT(Z$c,Z$d);Z$u?(this._mipmap||this._mipmaps?-1!==Z$q||(Z$q=9987):-1!==Z$q||(Z$q=9729),-1!==Z$r||(Z$r=9729),Z$a.texParameteri(this._type,10241,Z$q),Z$a.texParameteri(this._type,10240,Z$r),Z$a.texParameteri(this._type,10242,Z$s),Z$a.texParameteri(this._type,10243,Z$t),this._mipmap&&Z$a.generateMipmap(this._type)):(-1!==Z$q||(Z$q=9729),-1!==Z$r||(Z$r=9729),Z$a.texParameteri(this._type,10241,Z$q),Z$a.texParameteri(this._type,10240,Z$r),Z$a.texParameteri(this._type,10242,33071),Z$a.texParameteri(this._type,10243,33071)),Z$e&&Z$f&&Z$G.bindTexture(Z$a,Z$e,Z$f),this.memorySize=Z$i?this._buffer.length:Z$u?Z$c*Z$d*4*(1+1/3):Z$c*Z$d*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},Z$b.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},Z$b.onAsynLoaded=function(Z$a,Z$b,Z$c){var Z$d;Z$c&&(Z$d=Z$c[0].call(this,Z$b)),Z$d&&(this._width=Z$d.width,this._height=Z$d.height,this._buffer=Z$d.data),this._src=Z$a,this._size=new Z$rb(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},Z$b.getPixels=function(){return new Uint8Array(this._buffer)},Z$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(Z$F.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},Z$q(0,Z$b,"src",function(){return this._src}),Z$v.create=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){if(void 0===Z$d&&(Z$d=9729),void 0===Z$e&&(Z$e=9729),void 0===Z$f&&(Z$f=!0),!Z$a||Z$a.byteLength<Z$b*Z$c*4)throw"DataTexture2D create error";var Z$j=new Z$v;return Z$j.uri=Z$i,Z$j._buffer=Z$a,Z$j._width=Z$b,Z$j._height=Z$c,Z$j._mipmap=Z$f,Z$j._magFifter=Z$d,Z$j._minFifter=Z$e,Z$j._size=new Z$rb(Z$j._width,Z$j._height),Z$j._conchTexture?alert("怎么给runtime传递datatexture数据"):Z$j.activeResource(),Z$j},Z$v.load=function(Z$a,Z$b,Z$c,Z$d,Z$e){if(void 0===Z$b&&(Z$b=0),void 0===Z$c&&(Z$c=0),void 0===Z$d&&(Z$d=9729),void 0===Z$e&&(Z$e=9729),"mipmaps"===Z$C.getFileExtension(Z$a)){var Z$f=Z$x.loader.create(Z$a,null,null,Z$v,[function(Z$a){this._mipmaps=[];var Z$b=new Uint32Array(Z$a);this._width=Z$b[0];var Z$c=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,Z$c=1024),this._width!=Z$c)throw"现在只支持512x256的环境贴图。当前的是"+Z$b[0];this._height=Z$b[1];for(var Z$d=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,Z$e=this._height,Z$f=8;;){var Z$i=Z$d*Z$e*4;if(Z$f+Z$i>Z$a.byteLength)throw"load mipmaps data size error ";var Z$j=new Uint8Array(Z$a,Z$f,Z$i);if(this._mipmaps.push(Z$j),Z$f+=Z$i,1==Z$d&&1==Z$e)break;(Z$d/=2)<1&&(Z$d=1),(Z$e/=2)<1&&(Z$e=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){Z$f.simLodInfo=new Float32Array(40);for(var Z$i=0;Z$i<Z$f.simLodInfo.length;)Z$f.simLodInfo[Z$i]=(Z$v.simLodRect[Z$i]+.5)/1024,Z$i++,Z$f.simLodInfo[Z$i]=(Z$v.simLodRect[Z$i]+.5)/256,Z$i++,Z$f.simLodInfo[Z$i]=Math.max(Z$v.simLodRect[Z$i]-1,.1)/1024,Z$i++,Z$f.simLodInfo[Z$i]=Math.max(Z$v.simLodRect[Z$i]-1.5,.1)/256,Z$i++}return Z$f}if("number"==typeof Z$b)return Z$x.loader.create(Z$a,null,null,Z$v,[function(Z$a){return this._width=Z$b,this._height=Z$c,this._buffer=Z$a,null}]);if("function"==typeof Z$b)return Z$x.loader.create(Z$a,null,null,Z$v,[Z$b]);throw new Error("unknown params.")},Z$v.lodasatlas=!1,Z$n(Z$v,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),Z$v}(),Z$Qb=function(Z$a){function Z$b(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,Z$b.__super.call(this)}Z$p(Z$b,"laya.d3.resource.models.PrimitiveMesh",Z$Gb);var Z$c=Z$b.prototype;return Z$x.imps(Z$c,{"laya.d3.core.render.IRenderable":!0}),Z$c._getVertexBuffer=function(Z$a){return void 0===Z$a&&(Z$a=0),0===Z$a?this._vertexBuffer:null},Z$c._getVertexBuffers=function(){return null},Z$c._getIndexBuffer=function(){return this._indexBuffer},Z$c._getPositions=function(){var Z$a,Z$b=[],Z$c=this._vertexBuffer.vertexDeclaration.getVertexElements(),Z$d=0;for(Z$d=0;Z$d<Z$c.length;Z$d++){var Z$e=Z$c[Z$d];if("vector3"===Z$e.elementFormat&&0===Z$e.elementUsage){Z$a=Z$e;break}}var Z$f=this._vertexBuffer.getData();for(Z$d=0;Z$d<Z$f.length;Z$d+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var Z$i=Z$d+Z$a.offset/4,Z$j=new Z$ib(Z$f[Z$i+0],Z$f[Z$i+1],Z$f[Z$i+2]);Z$b.push(Z$j)}return Z$b},Z$c.getRenderElement=function(Z$a){return this},Z$c.getRenderElementsCount=function(){return 1},Z$c.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},Z$c._beforeRender=function(Z$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},Z$c._render=function(Z$a){Z$F.mainContext.drawElements(4,this._numberIndices,5123,0),Z$A.drawCall++,Z$A.trianglesFaces+=this._numberIndices/3},Z$q(0,Z$c,"_vertexBufferCount",function(){return 1}),Z$q(0,Z$c,"triangleCount",function(){return this._indexBuffer.indexCount/3}),Z$b}(),Z$Rb=function(Z$a){function Z$b(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,Z$b.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}Z$p(Z$b,"laya.d3.resource.models.Mesh",Z$Gb);var Z$c=Z$b.prototype;return Z$c._getPositions=function(){var Z$a,Z$b,Z$c,Z$d,Z$e,Z$f=[],Z$i=0,Z$j=0,Z$k=0;if(0!==this._vertexBuffers.length){var Z$l=this._vertexBuffers.length;for(Z$i=0;Z$i<Z$l;Z$i++){for(Z$c=(Z$a=this._vertexBuffers[Z$i]).vertexDeclaration.getVertexElements(),Z$j=0;Z$j<Z$c.length;Z$j++)if("vector3"===(Z$d=Z$c[Z$j]).elementFormat&&0===Z$d.elementUsage){Z$b=Z$d;break}for(Z$e=Z$a.getData(),Z$j=0;Z$j<Z$e.length;Z$j+=Z$a.vertexDeclaration.vertexStride/4)Z$k=Z$j+Z$b.offset/4,Z$f.push(new Z$ib(Z$e[Z$k+0],Z$e[Z$k+1],Z$e[Z$k+2]))}}else{var Z$m=this._subMeshes.length;for(Z$i=0;Z$i<Z$m;Z$i++){for(Z$c=(Z$a=this._subMeshes[Z$i]._getVertexBuffer()).vertexDeclaration.getVertexElements(),Z$j=0;Z$j<Z$c.length;Z$j++)if("vector3"===(Z$d=Z$c[Z$j]).elementFormat&&0===Z$d.elementUsage){Z$b=Z$d;break}for(Z$e=Z$a.getData(),Z$j=0;Z$j<Z$e.length;Z$j+=Z$a.vertexDeclaration.vertexStride/4)Z$k=Z$j+Z$b.offset/4,Z$f.push(new Z$ib(Z$e[Z$k+0],Z$e[Z$k+1],Z$e[Z$k+2]))}}return Z$f},Z$c._setSubMeshes=function(Z$a){this._subMeshes=Z$a,this._subMeshCount=Z$a.length;for(var Z$b=0;Z$b<this._subMeshCount;Z$b++)Z$a[Z$b]._indexInMesh=Z$b;this._positions=this._getPositions(),this._generateBoundingObject()},Z$c.onAsynLoaded=function(Z$a,Z$b,Z$c){var Z$d=Z$b[0],Z$e=Z$b[1];Z$Ya.read(Z$d,this,this._materials,this._subMeshes,Z$e),this.completeCreate(),this._endLoaded()},Z$c.getSubMesh=function(Z$a){return this._subMeshes[Z$a]},Z$c.getSubMeshCount=function(){return this._subMeshes.length},Z$c.getRenderElementsCount=function(){return this._subMeshes.length},Z$c.getRenderElement=function(Z$a){return this._subMeshes[Z$a]},Z$c.disposeResource=function(){for(var Z$a=0;Z$a<this._subMeshes.length;Z$a++)this._subMeshes[Z$a].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},Z$q(0,Z$c,"materials",function(){return this._materials.slice()}),Z$q(0,Z$c,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),Z$b.load=function(Z$a){return Z$x.loader.create(Z$a,null,null,Z$b)},Z$b}(),Z$Sb=(function(Z$a){function Z$l(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===Z$c&&(Z$c=6408),void 0===Z$d&&(Z$d=5121),void 0===Z$e&&(Z$e=33189),void 0===Z$f&&(Z$f=!1),void 0===Z$i&&(Z$i=!1),void 0===Z$j&&(Z$j=-1),void 0===Z$k&&(Z$k=-1),Z$l.__super.call(this),this._type=3553,this._width=Z$a,this._height=Z$b,this._size=new Z$rb(Z$a,Z$b),this._surfaceFormat=Z$c,this._surfaceType=Z$d,this._depthStencilFormat=Z$e,Z$r.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=Z$f,this._repeat=Z$i,this._minFifter=Z$j,this._magFifter=Z$k,this.activeResource(),this._alreadyResolved=!0}Z$p(Z$l,"laya.d3.resource.RenderTexture",Z$Fb);var Z$b=Z$l.prototype;Z$b.recreateResource=function(){var Z$a=Z$F.mainContext;this._frameBuffer=Z$a.createFramebuffer(),this._source=Z$a.createTexture();var Z$b=Z$G.curBindTexTarget,Z$c=Z$G.curBindTexValue;Z$G.bindTexture(Z$a,this._type,this._source),Z$a.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var Z$d=this._minFifter,Z$e=this._magFifter,Z$f=this._repeat?10497:33071;if(Z$w.isPOT(this._width,this._height)?(this._mipmap?-1!==Z$d||(Z$d=9987):-1!==Z$d||(Z$d=9729),-1!==Z$e||(Z$e=9729),Z$a.texParameteri(this._type,10241,Z$d),Z$a.texParameteri(this._type,10240,Z$e),Z$a.texParameteri(this._type,10242,Z$f),Z$a.texParameteri(this._type,10243,Z$f),this._mipmap&&Z$a.generateMipmap(this._type)):(-1!==Z$d||(Z$d=9729),-1!==Z$e||(Z$e=9729),Z$a.texParameteri(this._type,10241,Z$d),Z$a.texParameteri(this._type,10240,Z$e),Z$a.texParameteri(this._type,10242,33071),Z$a.texParameteri(this._type,10243,33071)),Z$b&&Z$c&&Z$G.bindTexture(Z$a,Z$b,Z$c),Z$a.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=Z$a.createRenderbuffer(),Z$a.bindRenderbuffer(36161,this._depthStencilBuffer),Z$a.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),Z$a.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:Z$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:Z$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:Z$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}Z$a.framebufferTexture2D(36160,36064,3553,this._source,0),Z$a.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},Z$b.start=function(){Z$F.mainContext.bindFramebuffer(36160,this.frameBuffer),(Z$l._currentRenderTarget=this)._alreadyResolved=!1},Z$b.end=function(){Z$F.mainContext.bindFramebuffer(36160,null),Z$l._currentRenderTarget=null,this._alreadyResolved=!0},Z$b.getData=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$F.mainContext;if(Z$e.bindFramebuffer(36160,this._frameBuffer),!(36053===Z$e.checkFramebufferStatus(36160)))return Z$e.bindFramebuffer(36160,null),null;var Z$f=new Uint8Array(this._width*this._height*4);return Z$e.readPixels(Z$a,Z$b,Z$c,Z$d,this._surfaceFormat,this._surfaceType,Z$f),Z$e.bindFramebuffer(36160,null),Z$f},Z$b.disposeResource=function(){if(this._frameBuffer){var Z$a=Z$F.mainContext;Z$a.deleteTexture(this._source),Z$a.deleteFramebuffer(this._frameBuffer),Z$a.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},Z$q(0,Z$b,"surfaceFormat",function(){return this._surfaceFormat}),Z$q(0,Z$b,"surfaceType",function(){return this._surfaceType}),Z$q(0,Z$b,"depthStencilFormat",function(){return this._depthStencilFormat}),Z$q(0,Z$b,"source",function(){return this._alreadyResolved?Z$x.superGet(Z$Fb,this,"source"):null}),Z$q(0,Z$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),Z$q(0,Z$b,"frameBuffer",function(){return this._frameBuffer}),Z$l._currentRenderTarget=null}(),function(Z$a){function Z$b(Z$a){this._color=null,this._pixels=null,Z$b.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new Z$rb(this.width,this.height),this._color=Z$a,this._pixels=new Uint8Array([255*Z$a.x,255*Z$a.y,255*Z$a.z,255*Z$a.w]),this.uri="SolidColorTexture2D_"+this.id}Z$p(Z$b,"laya.d3.resource.SolidColorTexture2D",Z$Fb);var Z$c=Z$b.prototype;return Z$c._createWebGlTexture=function(){var Z$a=Z$F.mainContext,Z$b=this._source=Z$a.createTexture(),Z$c=this._width,Z$d=this._height,Z$e=Z$G.curBindTexTarget,Z$f=Z$G.curBindTexValue;Z$G.bindTexture(Z$a,this._type,Z$b),Z$a.texImage2D(this._type,0,6408,Z$c,Z$d,0,6408,5121,this._pixels);var Z$i=this._minFifter,Z$j=this._magFifter,Z$k=this._repeat?10497:33071,Z$l=Z$w.isPOT(Z$c,Z$d);Z$l?(this._mipmap?-1!==Z$i||(Z$i=9987):-1!==Z$i||(Z$i=9729),-1!==Z$j||(Z$j=9729),Z$a.texParameteri(this._type,10241,Z$i),Z$a.texParameteri(this._type,10240,Z$j),Z$a.texParameteri(this._type,10242,Z$k),Z$a.texParameteri(this._type,10243,Z$k),this._mipmap&&Z$a.generateMipmap(this._type)):(-1!==Z$i||(Z$i=9729),-1!==Z$j||(Z$j=9729),Z$a.texParameteri(this._type,10241,Z$i),Z$a.texParameteri(this._type,10240,Z$j),Z$a.texParameteri(this._type,10242,33071),Z$a.texParameteri(this._type,10243,33071)),Z$e&&Z$f&&Z$G.bindTexture(Z$a,Z$e,Z$f),this.memorySize=Z$l?Z$c*Z$d*4*(1+1/3):Z$c*Z$d*4},Z$c.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},Z$c.disposeResource=function(){this._source&&(Z$F.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},Z$n(Z$b,["magentaTexture",function(){var Z$a=new Z$b(new Z$jb(1,0,1,1));return Z$a.lock=!0,this.magentaTexture=Z$a},"grayTexture",function(){var Z$a=new Z$b(new Z$jb(.5,.5,.5,1));return Z$a.lock=!0,this.grayTexture=Z$a}]),Z$b}()),Z$Tb=function(Z$a){function Z$e(Z$a,Z$b,Z$c,Z$d){this._canRead=!1,this._image=null,this._pixels=null,void 0===Z$a&&(Z$a=!1),void 0===Z$b&&(Z$b=!0),void 0===Z$c&&(Z$c=6408),void 0===Z$d&&(Z$d=!0),Z$e.__super.call(this),this._type=3553,this._repeat=Z$b,this._canRead=Z$a,this._format=Z$c,this._mipmap=Z$d}Z$p(Z$e,"laya.d3.resource.Texture2D",Z$Fb);var Z$b=Z$e.prototype;return Z$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var Z$a=Z$F.mainContext,Z$b=this._source=Z$a.createTexture(),Z$c=this._width,Z$d=this._height,Z$e=Z$G.curBindTexTarget,Z$f=Z$G.curBindTexValue;switch(Z$G.bindTexture(Z$a,this._type,Z$b),this._format){case 6407:case 6408:this._canRead?Z$a.texImage2D(this._type,0,this._format,Z$c,Z$d,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?Z$a.texImage2D(this._type,0,this._image._format,Z$c,Z$d,0,this._image._format,5121,this._image.atlasSource):Z$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case Z$F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:Z$a.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var Z$i=this._minFifter,Z$j=this._magFifter,Z$k=this._repeat?10497:33071,Z$l=0==this._wrapModeU?10497:33071,Z$m=0==this._wrapModeV?10497:33071,Z$n=Z$w.isPOT(Z$c,Z$d);Z$n?(this._mipmap?-1!==Z$i||(Z$i=9987):-1!==Z$i||(Z$i=9729),-1!==Z$j||(Z$j=9729),Z$a.texParameteri(this._type,10241,Z$i),Z$a.texParameteri(this._type,10240,Z$j),Z$a.texParameteri(this._type,10242,Z$k),Z$a.texParameteri(this._type,10243,Z$k),Z$a.texParameteri(this._type,10242,Z$l),Z$a.texParameteri(this._type,10243,Z$m),this._mipmap&&Z$a.generateMipmap(this._type)):(-1!==Z$i||(Z$i=9729),-1!==Z$j||(Z$j=9729),Z$a.texParameteri(this._type,10241,Z$i),Z$a.texParameteri(this._type,10240,Z$j),Z$a.texParameteri(this._type,10242,33071),Z$a.texParameteri(this._type,10243,33071)),Z$e&&Z$f&&Z$G.bindTexture(Z$a,Z$e,Z$f),this._image.onload=null,this._image=null,this.memorySize=Z$n?Z$c*Z$d*4*(1+1/3):Z$c*Z$d*4},Z$b.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},Z$b.onAsynLoaded=function(Z$a,Z$b,Z$c){if(Z$c){var Z$d=Z$c[0];void 0!==Z$d&&(this._canRead=Z$d);var Z$e=Z$c[1];void 0!==Z$e&&(this._repeat=Z$e);var Z$f=Z$c[2];void 0!==Z$f&&(this._format=Z$f);var Z$i=Z$c[3];void 0!==Z$i&&(this._mipmap=Z$i);var Z$j=Z$c.wrapModeU;void 0!==Z$j&&(this._wrapModeU=Z$j);var Z$k=Z$c.wrapModeV;void 0!==Z$k&&(this._wrapModeV=Z$k)}switch(this._format){case 6407:case 6408:var Z$l=(this._image=Z$b).width,Z$m=Z$b.height;this._width=Z$l,this._height=Z$m,this._size=new Z$rb(Z$l,Z$m),this._canRead&&(Z$r.isConchApp?Z$b instanceof Z$o.HTMLElement&&(this._pixels=new Uint8Array(Z$b.getImageData(0,0,Z$l,Z$m))):(Z$H.canvas.size(Z$l,Z$m),Z$H.canvas.clear(),Z$H.context.drawImage(Z$b,0,0,Z$l,Z$m),this._pixels=new Uint8Array(Z$H.context.getImageData(0,0,Z$l,Z$m).data.buffer)));break;case Z$F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var Z$n=new Z$y(Z$b);Z$n.readUTFBytes(4),Z$n.readUTFBytes(2),Z$n.getInt16();Z$n.endian="bigEndian",this._width=Z$n.getInt16(),this._height=Z$n.getInt16(),this._size=new Z$rb(this._width,this._height);Z$n.getInt16(),Z$n.getInt16();this._image=new Uint8Array(Z$b,Z$n.pos)}this.recreateResource(),this._endLoaded()},Z$b.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},Z$b.disposeResource=function(){this._source&&(Z$F.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},Z$q(0,Z$b,"_src",function(){return this.url}),Z$q(0,Z$b,"src",function(){return this.url}),Z$e.load=function(Z$a){return Z$x.loader.create(Z$a,null,null,Z$e)},Z$e}(),Z$Ub=function(Z$b){function Z$c(Z$a,Z$b){Z$c.__super.call(this),void 0===Z$a&&(Z$a=.3),void 0===Z$b&&(Z$b=1e3),this._tempVector3=new Z$ib,this._position=new Z$ib,this._up=new Z$ib,this._forward=new Z$ib,this._right=new Z$ib,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=Z$rb.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=Z$a,this._farPlane=Z$b,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),Z$x.stage.on("resize",this,this._onScreenSizeChanged)}Z$p(Z$c,"laya.d3.core.BaseCamera",Z$b);var Z$a=Z$c.prototype;return Z$a._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var Z$a=this.scene._cameraPool,Z$b=Z$a.length-1,Z$c=0;Z$c<Z$b;Z$c++)if(Z$a[Z$c].renderingOrder>Z$a[Z$b].renderingOrder){var Z$d=Z$a[Z$c];Z$a[Z$c]=Z$a[Z$b],Z$a[Z$b]=Z$d}},Z$a._calculateProjectionMatrix=function(){},Z$a._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},Z$a._prepareCameraToRender=function(){Z$I._currentCameraCullingMask=this.cullingMask;var Z$a=this._shaderValues;Z$a.setValue(0,this.transform.position.elements),Z$a.setValue(5,this.forward.elements),Z$a.setValue(6,this.up.elements)},Z$a._prepareCameraViewProject=function(Z$a,Z$b){var Z$c=this._shaderValues;Z$c.setValue(1,Z$a.elements),Z$c.setValue(2,Z$b.elements)},Z$a._renderCamera=function(Z$a,Z$b,Z$c){},Z$a.addLayer=function(Z$a){29!==Z$a.number&&30!=Z$a.number&&(this.cullingMask=this.cullingMask|Z$a.mask)},Z$a.removeLayer=function(Z$a){29!==Z$a.number&&30!=Z$a.number&&(this.cullingMask=this.cullingMask&~Z$a.mask)},Z$a.addAllLayers=function(){this.cullingMask=2147483647},Z$a.removeAllLayers=function(){this.cullingMask=0|Z$I.getLayerByNumber(29).mask|Z$I.getLayerByNumber(30).mask},Z$a.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},Z$a.moveForward=function(Z$a){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=Z$a,this.transform.translate(this._tempVector3)},Z$a.moveRight=function(Z$a){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=Z$a,this.transform.translate(this._tempVector3)},Z$a.moveVertical=function(Z$a){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=Z$a,this.transform.translate(this._tempVector3,!1)},Z$a._addSelfRenderObjects=function(){var Z$a=this.scene._cameraPool,Z$b=Z$a.length;if(0<Z$b){for(var Z$c=Z$b-1;0<=Z$c;Z$c--)if(this.renderingOrder<=Z$a[Z$c].renderingOrder){Z$a.splice(Z$c+1,0,this);break}}else Z$a.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},Z$a._clearSelfRenderObjects=function(){var Z$a=this.scene._cameraPool;Z$a.splice(Z$a.indexOf(this),1)},Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,Z$x.stage.off("resize",this,this._onScreenSizeChanged),Z$b.prototype.destroy.call(this,Z$a)},Z$q(0,Z$a,"sky",function(){return this._sky},function(Z$a){(this._sky=Z$a)._ownerCamera=this}),Z$q(0,Z$a,"forward",function(){var Z$a=this.transform.worldMatrix.elements,Z$b=this._forward.elements;return Z$b[0]=-Z$a[8],Z$b[1]=-Z$a[9],Z$b[2]=-Z$a[10],this._forward}),Z$q(0,Z$a,"position",function(){var Z$a=this.transform.worldMatrix.elements,Z$b=this._position.elements;return Z$b[0]=Z$a[12],Z$b[1]=Z$a[13],Z$b[2]=Z$a[14],this._position}),Z$q(0,Z$a,"renderTarget",function(){return this._renderTarget},function(Z$a){null!=(this._renderTarget=Z$a)&&(this._renderTargetSize=Z$a.size)}),Z$q(0,Z$a,"up",function(){var Z$a=this.transform.worldMatrix.elements,Z$b=this._up.elements;return Z$b[0]=Z$a[4],Z$b[1]=Z$a[5],Z$b[2]=Z$a[6],this._up}),Z$q(0,Z$a,"right",function(){var Z$a=this.transform.worldMatrix.elements,Z$b=this._right.elements;return Z$b[0]=Z$a[0],Z$b[1]=Z$a[1],Z$b[2]=Z$a[2],this._right}),Z$q(0,Z$a,"renderTargetSize",function(){return this._renderTargetSize},function(Z$a){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=Z$a,this._calculateProjectionMatrix()}),Z$q(0,Z$a,"fieldOfView",function(){return this._fieldOfView},function(Z$a){this._fieldOfView=Z$a,this._calculateProjectionMatrix()}),Z$q(0,Z$a,"nearPlane",function(){return this._nearPlane},function(Z$a){this._nearPlane=Z$a,this._calculateProjectionMatrix()}),Z$q(0,Z$a,"farPlane",function(){return this._farPlane},function(Z$a){this._farPlane=Z$a,this._calculateProjectionMatrix()}),Z$q(0,Z$a,"orthographic",function(){return this._orthographic},function(Z$a){this._orthographic=Z$a,this._calculateProjectionMatrix()}),Z$q(0,Z$a,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(Z$a){this._orthographicVerticalSize=Z$a,this._calculateProjectionMatrix()}),Z$q(0,Z$a,"renderingOrder",function(){return this._renderingOrder},function(Z$a){this._renderingOrder=Z$a,this._sortCamerasByRenderingOrder()}),Z$c.CAMERAPOS=0,Z$c.VIEWMATRIX=1,Z$c.PROJECTMATRIX=2,Z$c.VPMATRIX=3,Z$c.VPMATRIX_NO_TRANSLATE=4,Z$c.CAMERADIRECTION=5,Z$c.CAMERAUP=6,Z$c.ENVIRONMENTDIFFUSE=7,Z$c.ENVIRONMENTSPECULAR=8,Z$c.SIMLODINFO=9,Z$c.DIFFUSEIRRADMATR=10,Z$c.DIFFUSEIRRADMATG=11,Z$c.DIFFUSEIRRADMATB=12,Z$c.HDREXPOSURE=13,Z$c.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",Z$c.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",Z$c.CLEARFLAG_SOLIDCOLOR=0,Z$c.CLEARFLAG_SKY=1,Z$c.CLEARFLAG_DEPTHONLY=2,Z$c.CLEARFLAG_NONE=3,Z$n(Z$c,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new Z$ab(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new Z$ab},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new Z$ab}]),Z$c}(Z$Kb),Z$Vb=function(Z$c){function Z$b(Z$a){this._render=null,this._geometryFilter=null,Z$b.__super.call(this,Z$a)}Z$p(Z$b,"laya.d3.core.RenderableSprite3D",Z$c);var Z$a=Z$b.prototype;return Z$a._addToInitStaticBatchManager=function(){},Z$a._setBelongScene=function(Z$a){Z$c.prototype._setBelongScene.call(this,Z$a),Z$a._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},Z$a._setUnBelongScene=function(){var Z$a=this._scene._renderableSprite3Ds,Z$b=Z$a.indexOf(this);Z$a.splice(Z$b,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),Z$c.prototype._setUnBelongScene.call(this)},Z$a._update=function(Z$a){(Z$a.owner=this)._activeInHierarchy&&(this._updateComponents(Z$a),this._render._updateOctreeNode(),this._lateUpdateComponents(Z$a),Z$A.spriteCount++,this._childs.length&&this._updateChilds(Z$a))},Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$c.prototype.destroy.call(this,Z$a),this._render._destroy(),this._render=null},Z$b.__init__=function(){Z$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=Z$b.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),Z$b.SAHDERDEFINE_LIGHTMAP=Z$b.shaderDefines.registerDefine("LIGHTMAP")},Z$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,Z$b.SAHDERDEFINE_LIGHTMAP=4,Z$b.LIGHTMAPSCALEOFFSET=2,Z$b.LIGHTMAP=3,Z$n(Z$b,["shaderDefines",function(){return this.shaderDefines=new Z$mb}]),Z$b}(Z$Kb),Z$Wb=(function(Z$a){function Z$d(Z$a,Z$b,Z$c){this._long=NaN,this._width=NaN,this._height=NaN,void 0===Z$a&&(Z$a=1),void 0===Z$b&&(Z$b=1),void 0===Z$c&&(Z$c=1),Z$d.__super.call(this),this._long=Z$a,this._width=Z$b,this._height=Z$c,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}Z$p(Z$d,"laya.d3.resource.models.BoxMesh",Z$Qb);var Z$b=Z$d.prototype;Z$b.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var Z$a=Z$Fa.vertexDeclaration,Z$b=(Z$a.vertexStride,this._long/2),Z$c=this._height/2,Z$d=this._width/2,Z$e=new Float32Array([-Z$b,Z$c,-Z$d,0,1,0,0,0,Z$b,Z$c,-Z$d,0,1,0,1,0,Z$b,Z$c,Z$d,0,1,0,1,1,-Z$b,Z$c,Z$d,0,1,0,0,1,-Z$b,-Z$c,-Z$d,0,-1,0,0,1,Z$b,-Z$c,-Z$d,0,-1,0,1,1,Z$b,-Z$c,Z$d,0,-1,0,1,0,-Z$b,-Z$c,Z$d,0,-1,0,0,0,-Z$b,Z$c,-Z$d,-1,0,0,0,0,-Z$b,Z$c,Z$d,-1,0,0,1,0,-Z$b,-Z$c,Z$d,-1,0,0,1,1,-Z$b,-Z$c,-Z$d,-1,0,0,0,1,Z$b,Z$c,-Z$d,1,0,0,1,0,Z$b,Z$c,Z$d,1,0,0,0,0,Z$b,-Z$c,Z$d,1,0,0,0,1,Z$b,-Z$c,-Z$d,1,0,0,1,1,-Z$b,Z$c,Z$d,0,0,1,0,0,Z$b,Z$c,Z$d,0,0,1,1,0,Z$b,-Z$c,Z$d,0,0,1,1,1,-Z$b,-Z$c,Z$d,0,0,1,0,1,-Z$b,Z$c,-Z$d,0,0,-1,1,0,Z$b,Z$c,-Z$d,0,0,-1,0,0,Z$b,-Z$c,-Z$d,0,0,-1,0,1,-Z$b,-Z$c,-Z$d,0,0,-1,1,1]),Z$f=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new Z$Ob(Z$a,this._numberVertices,35044,!0),this._indexBuffer=new Z$Nb("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(Z$e),this._indexBuffer.setData(Z$f),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},Z$q(0,Z$b,"long",function(){return this._long},function(Z$a){this._long!==Z$a&&(this._long=Z$a,this.releaseResource(),this.activeResource())}),Z$q(0,Z$b,"width",function(){return this._width},function(Z$a){this._width!==Z$a&&(this._width=Z$a,this.releaseResource(),this.activeResource())}),Z$q(0,Z$b,"height",function(){return this._height},function(Z$a){this._height!==Z$a&&(this._height=Z$a,this.releaseResource(),this.activeResource())})}(),function(Z$a){function Z$e(Z$a,Z$b,Z$c,Z$d){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===Z$a&&(Z$a=10),void 0===Z$b&&(Z$b=10),void 0===Z$c&&(Z$c=10),void 0===Z$d&&(Z$d=10),Z$e.__super.call(this),this._long=Z$a,this._width=Z$b,this._stacks=Z$c,this._slices=Z$d,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}Z$p(Z$e,"laya.d3.resource.models.PlaneMesh",Z$Qb);var Z$b=Z$e.prototype;Z$b.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var Z$a=new Uint16Array(this._numberIndices),Z$b=Z$Fa.vertexDeclaration,Z$c=Z$b.vertexStride/4,Z$d=new Float32Array(this._numberVertices*Z$c),Z$e=this._long/2,Z$f=this._width/2,Z$i=this._long/this._stacks,Z$j=this._width/this._slices,Z$k=0,Z$l=0;Z$l<=this._slices;Z$l++)for(var Z$m=0;Z$m<=this._stacks;Z$m++)Z$d[Z$k++]=Z$m*Z$i-Z$e,Z$d[Z$k++]=0,Z$d[Z$k++]=Z$l*Z$j-Z$f,Z$d[Z$k++]=0,Z$d[Z$k++]=1,Z$d[Z$k++]=0,Z$d[Z$k++]=1*Z$m/this._stacks,Z$d[Z$k++]=1*Z$l/this._slices;var Z$n=0;for(Z$l=0;Z$l<this._slices;Z$l++)for(Z$m=0;Z$m<this._stacks;Z$m++)Z$a[Z$n++]=(Z$l+1)*(this._stacks+1)+Z$m,Z$a[Z$n++]=Z$l*(this._stacks+1)+Z$m,Z$a[Z$n++]=(Z$l+1)*(this._stacks+1)+Z$m+1,Z$a[Z$n++]=Z$l*(this._stacks+1)+Z$m,Z$a[Z$n++]=Z$l*(this._stacks+1)+Z$m+1,Z$a[Z$n++]=(Z$l+1)*(this._stacks+1)+Z$m+1;this._vertexBuffer=new Z$Ob(Z$b,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new Z$Nb("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(Z$d),this._indexBuffer.setData(Z$a),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},Z$q(0,Z$b,"long",function(){return this._long},function(Z$a){this._long!==Z$a&&(this._long=Z$a,this.releaseResource(),this.activeResource())}),Z$q(0,Z$b,"width",function(){return this._width},function(Z$a){this._width!==Z$a&&(this._width=Z$a,this.releaseResource(),this.activeResource())}),Z$q(0,Z$b,"stacks",function(){return this._stacks},function(Z$a){this._stacks!==Z$a&&(this._stacks=Z$a,this.releaseResource(),this.activeResource())}),Z$q(0,Z$b,"slices",function(){return this._slices},function(Z$a){this._slices!==Z$a&&(this._slices=Z$a,this.releaseResource(),this.activeResource())})}(),function(Z$a){function Z$i(Z$a,Z$b,Z$c){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=.3),void 0===Z$c&&(Z$c=1e3),this._viewMatrix=new Z$ab,this._projectionMatrix=new Z$ab,this._projectionViewMatrix=new Z$ab,this._viewport=new Z$kb(0,0,0,0),this._normalizedViewport=new Z$kb(0,0,1,1),this._aspectRatio=Z$a,this._boundFrustumUpdate=!0,this._boundFrustum=new Z$$a(Z$ab.DEFAULT),Z$i.__super.call(this,Z$b,Z$c),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}Z$p(Z$i,"laya.d3.core.Camera",Z$Ub);var Z$b=Z$i.prototype;return Z$b._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},Z$b._parseCustomProps=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$c.clearColor;this.clearColor=new Z$jb(Z$e[0],Z$e[1],Z$e[2],Z$e[3]);var Z$f=Z$c.viewport;this.normalizedViewport=new Z$kb(Z$f[0],Z$f[1],Z$f[2],Z$f[3])},Z$b._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var Z$a=this.orthographicVerticalSize*this.aspectRatio*.5,Z$b=.5*this.orthographicVerticalSize;Z$ab.createOrthoOffCenterRH(-Z$a,Z$a,-Z$b,Z$b,this.nearPlane,this.farPlane,this._projectionMatrix)}else Z$ab.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},Z$b._update=function(Z$a){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,Z$a)},Z$b._renderCamera=function(Z$a,Z$b,Z$c){var Z$d,Z$e;Z$c.parallelSplitShadowMaps[0]&&Z$c._renderShadowMap(Z$a,Z$b,this),(Z$b.camera=this)._prepareCameraToRender(),Z$c._preRenderUpdateComponents(Z$b),Z$d=Z$b._viewMatrix=this.viewMatrix;var Z$f=this._renderTarget;Z$f?(Z$f.start(),Z$ab.multiply(Z$Ub._invertYScaleMatrix,this._projectionMatrix,Z$Ub._invertYProjectionMatrix),Z$ab.multiply(Z$Ub._invertYScaleMatrix,this.projectionViewMatrix,Z$Ub._invertYProjectionViewMatrix),Z$e=Z$b._projectionMatrix=Z$Ub._invertYProjectionMatrix,Z$b._projectionViewMatrix=Z$Ub._invertYProjectionViewMatrix):(Z$e=Z$b._projectionMatrix=this._projectionMatrix,Z$b._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(Z$d,Z$e),Z$b._viewport=this.viewport,Z$c._preRenderScene(Z$a,Z$b,this.boundFrustum),Z$c._clear(Z$a,Z$b),Z$c._renderScene(Z$a,Z$b),Z$c._postRenderUpdateComponents(Z$b),Z$f&&Z$f.end()},Z$b.viewportPointToRay=function(Z$a,Z$b){Z$qb.calculateCursorRay(Z$a,this.viewport,this._projectionMatrix,this.viewMatrix,null,Z$b)},Z$b.normalizedViewportPointToRay=function(Z$a,Z$b){var Z$c=Z$i._tempVector20,Z$d=this.viewport,Z$e=Z$a.elements,Z$f=Z$c.elements;Z$f[0]=Z$e[0]*Z$d.width,Z$f[1]=Z$e[1]*Z$d.height,Z$qb.calculateCursorRay(Z$c,this.viewport,this._projectionMatrix,this.viewMatrix,null,Z$b)},Z$b.worldToViewportPoint=function(Z$a,Z$b){Z$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(Z$a,this._projectionViewMatrix,Z$b);var Z$c=Z$b.elements;Z$c[0]=Z$c[0]/Z$x.stage.clientScaleX,Z$c[1]=Z$c[1]/Z$x.stage.clientScaleY},Z$b.worldToNormalizedViewportPoint=function(Z$a,Z$b){Z$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(Z$a,this._projectionViewMatrix,Z$b);var Z$c=Z$b.elements;Z$c[0]=Z$c[0]/Z$x.stage.clientScaleX,Z$c[1]=Z$c[1]/Z$x.stage.clientScaleY},Z$b.convertScreenCoordToOrthographicCoord=function(Z$a,Z$b){if(this._orthographic){var Z$c=Z$Y.clientWidth,Z$d=Z$Y.clientHeight,Z$e=this.orthographicVerticalSize*this.aspectRatio/Z$c,Z$f=this.orthographicVerticalSize/Z$d,Z$i=Z$a.elements,Z$j=Z$b.elements;return Z$j[0]=(-Z$c/2+Z$i[0])*Z$e,Z$j[1]=(Z$d/2-Z$i[1])*Z$f,Z$j[2]=(this.nearPlane-this.farPlane)*(Z$i[2]+1)/2-this.nearPlane,Z$ib.transformCoordinate(Z$b,this.transform.worldMatrix,Z$b),!0}return!1},Z$q(0,Z$b,"projectionViewMatrix",function(){return Z$ab.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),Z$q(0,Z$b,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var Z$a=this.viewport;return Z$a.width/Z$a.height},function(Z$a){if(Z$a<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=Z$a,this._calculateProjectionMatrix()}),Z$q(0,Z$b,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),Z$q(0,Z$b,"needViewport",function(){var Z$a=this.normalizedViewport;return 0===Z$a.x&&0===Z$a.y&&1===Z$a.width&&1===Z$a.height}),Z$q(0,Z$b,"viewport",function(){if(this._viewportExpressedInClipSpace){var Z$a=this._normalizedViewport,Z$b=this.renderTargetSize,Z$c=Z$b.width,Z$d=Z$b.height;this._viewport.x=Z$a.x*Z$c,this._viewport.y=Z$a.y*Z$d,this._viewport.width=Z$a.width*Z$c,this._viewport.height=Z$a.height*Z$d}return this._viewport},function(Z$a){if(null!=this.renderTarget&&(Z$a.x<0||Z$a.y<0||0==Z$a.width||0==Z$a.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=Z$a,this._calculateProjectionMatrix()}),Z$q(0,Z$b,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var Z$a=this._viewport,Z$b=this.renderTargetSize,Z$c=Z$b.width,Z$d=Z$b.height;this._normalizedViewport.x=Z$a.x/Z$c,this._normalizedViewport.y=Z$a.y/Z$d,this._normalizedViewport.width=Z$a.width/Z$c,this._normalizedViewport.height=Z$a.height/Z$d}return this._normalizedViewport},function(Z$a){Z$a.x<0&&(Z$a.x=0,console.warn("Camera: viewport.x must large than 0.0.")),Z$a.y<0&&(Z$a.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<Z$a.x+Z$a.width&&(Z$a.width=1-Z$a.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<Z$a.y+Z$a.height&&(Z$a.height=1-Z$a.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=Z$a,this._calculateProjectionMatrix()}),Z$q(0,Z$b,"projectionMatrix",function(){return this._projectionMatrix},function(Z$a){this._projectionMatrix=Z$a,this._useUserProjectionMatrix=!0}),Z$q(0,Z$b,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),Z$n(Z$i,["_tempVector20",function(){return this._tempVector20=new Z$fb}]),Z$i}()),Z$Xb=function(Z$c){function Z$d(Z$a,Z$b){Z$d.__super.call(this,Z$b),this._geometryFilter=new Z$Hb(this),this._render=new Z$Ib(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),Z$a&&(this._geometryFilter.sharedMesh=Z$a)instanceof laya.d3.resource.models.Mesh&&(Z$a.loaded?this._render.sharedMaterials=Z$a.materials:Z$a.once("loaded",this,this._applyMeshMaterials))}Z$p(Z$d,"laya.d3.core.MeshSprite3D",Z$c);var Z$a=Z$d.prototype;return Z$a._changeRenderObjectByMesh=function(Z$a){var Z$b=this._render._renderElements,Z$c=Z$b[Z$a];Z$c||(Z$c=Z$b[Z$a]=new Z$zb),Z$c._render=this._render;var Z$d=this._render.sharedMaterials[Z$a];Z$d||(Z$d=Z$Mb.defaultMaterial);var Z$e=this._geometryFilter.sharedMesh.getRenderElement(Z$a);return Z$c._mainSortID=this._getSortID(Z$e,Z$d),Z$c._sprite3D=this,Z$c.renderObj=Z$e,Z$c._material=Z$d,Z$c},Z$a._changeRenderObjectByMaterial=function(Z$a,Z$b){var Z$c=this._render._renderElements[Z$a];Z$b||(Z$b=Z$Mb.defaultMaterial);var Z$d=this._geometryFilter.sharedMesh.getRenderElement(Z$a);return Z$c._mainSortID=this._getSortID(Z$d,Z$b),Z$c._sprite3D=this,Z$c.renderObj=Z$d,Z$c._material=Z$b,Z$c},Z$a._changeRenderObjectsByMesh=function(){var Z$a=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=Z$a;for(var Z$b=0;Z$b<Z$a;Z$b++)this._changeRenderObjectByMesh(Z$b)},Z$a._onMeshChanged=function(Z$a){var Z$b=Z$a.sharedMesh;Z$b.loaded?this._changeRenderObjectsByMesh():Z$b.once("loaded",this,this._onMeshLoaded)},Z$a._onMeshLoaded=function(Z$a){Z$a===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},Z$a._onMaterialChanged=function(Z$a,Z$b,Z$c){Z$b<this._render._renderElements.length&&this._changeRenderObjectByMaterial(Z$b,Z$c)},Z$a._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},Z$a._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},Z$a._parseCustomProps=function(Z$a,Z$b,Z$c,Z$d){var Z$e=this.meshRender,Z$f=Z$c.lightmapIndex;null!=Z$f&&(Z$e.lightmapIndex=Z$f);var Z$i,Z$j,Z$k=Z$c.lightmapScaleOffset;if(Z$k&&(Z$e.lightmapScaleOffset=new Z$jb(Z$k[0],Z$k[1],Z$k[2],Z$k[3])),Z$d.instanceParams)(Z$i=Z$d.instanceParams.loadPath)&&(Z$j=Z$t.getRes(Z$b[Z$i]),(this.meshFilter.sharedMesh=Z$j).loaded?Z$e.sharedMaterials=Z$j.materials:Z$j.once("loaded",this,this._applyMeshMaterials));else{(Z$i=Z$c.meshPath)&&(Z$j=Z$t.getRes(Z$b[Z$i]),this.meshFilter.sharedMesh=Z$j);var Z$l=Z$c.materials;if(Z$l){var Z$m=Z$e.sharedMaterials,Z$n=Z$l.length;Z$m.length=Z$n;for(var Z$o=0;Z$o<Z$n;Z$o++)Z$m[Z$o]=Z$t.getRes(Z$b[Z$l[Z$o].path]);Z$e.sharedMaterials=Z$m}}},Z$a._applyMeshMaterials=function(Z$a){for(var Z$b=this._render.sharedMaterials,Z$c=Z$a.materials,Z$d=0,Z$e=Z$c.length;Z$d<Z$e;Z$d++)Z$b[Z$d]||(Z$b[Z$d]=Z$c[Z$d]);this._render.sharedMaterials=Z$b},Z$a._addToInitStaticBatchManager=function(){Z$d._staticBatchManager._addInitBatchSprite(this)},Z$a.cloneTo=function(Z$a){var Z$b=Z$a;Z$b._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var Z$c=this._render,Z$d=Z$b._render;Z$d.enable=Z$c.enable,Z$d.sharedMaterials=Z$c.sharedMaterials,Z$d.castShadow=Z$c.castShadow;var Z$e=Z$c.lightmapScaleOffset;Z$e&&(Z$d.lightmapScaleOffset=Z$e.clone()),Z$d.lightmapIndex=Z$c.lightmapIndex,Z$d.receiveShadow=Z$c.receiveShadow,Z$d.sortingFudge=Z$c.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,Z$a)},Z$a.destroy=function(Z$a){if(void 0===Z$a&&(Z$a=!0),!this.destroyed){var Z$b=this.meshFilter.sharedMesh;null!=Z$b&&(Z$b.loaded||Z$b.off("loaded",this,this._applyMeshMaterials)),Z$c.prototype.destroy.call(this,Z$a),this._geometryFilter._destroy()}},Z$q(0,Z$a,"meshFilter",function(){return this._geometryFilter}),Z$q(0,Z$a,"meshRender",function(){return this._render}),Z$d.__init__=function(){Z$da._staticBatchManagers.push(Z$d._staticBatchManager)},Z$d.load=function(Z$a){return Z$x.loader.create(Z$a,null,null,Z$d)},Z$n(Z$d,["_staticBatchManager",function(){return this._staticBatchManager=new Z$Bb}]),Z$d}(Z$Vb)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(Z$a,Z$b){"use strict";for(var Z$c in Object.defineProperty(Z$b,"__esModule",{value:!0}),Laya){var Z$d=Laya[Z$c];Z$d&&Z$d.__isclass&&(Z$b[Z$c]=Z$d)}}),function(Z$a,Z$b,Z$ea){Z$ea.un,Z$ea.uns;var Z$c=Z$ea.static,Z$d=Z$ea.class,Z$f=Z$ea.getset,Z$r=Z$ea.__newvec,Z$j=laya.maths.Bezier,Z$n=laya.utils.Browser,Z$Fa=laya.utils.Byte,Z$e=(laya.events.Event,laya.events.EventDispatcher),Z$i=laya.display.Graphics,Z$k=(laya.resource.HTMLCanvas,laya.utils.Handler),Z$l=laya.net.Loader,Z$o=laya.maths.MathUtil,Z$Ga=laya.maths.Matrix,Z$s=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),Z$m=(laya.renders.RenderContext,laya.resource.Resource),Z$p=laya.utils.RunDriver,Z$fa=laya.display.Sprite,Z$q=laya.utils.Stat,Z$Ha=laya.resource.Texture,Z$t=(laya.net.URL,laya.utils.Utils),Z$G=function(){function Z$a(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return Z$d(Z$a,"laya.ani.AnimationContent"),Z$a}(),Z$H=function(){function Z$a(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return Z$d(Z$a,"laya.ani.AnimationNodeContent"),Z$a}(),Z$v=function(){function Z$a(){}return Z$d(Z$a,"laya.ani.AnimationParser01"),Z$a.parse=function(Z$a,Z$b){var Z$c=Z$b.__getBuffer(),Z$d=0,Z$e=0,Z$f=0,Z$i=0,Z$j=0,Z$k=0,Z$l=0,Z$m=Z$b.readUTFString();Z$a._aniClassName=Z$m;var Z$n,Z$o=Z$b.readUTFString().split("\n"),Z$p=Z$b.getUint8(),Z$q=Z$b.getUint32(),Z$r=Z$b.getUint32();0<Z$q&&(Z$n=Z$c.slice(Z$q,Z$r));var Z$s=new Z$Fa(Z$n);for(0<Z$r&&(Z$a._publicExtData=Z$c.slice(Z$r,Z$c.byteLength)),Z$a._useParent=!!Z$b.getUint8(),Z$a._anis.length=Z$p,Z$d=0;Z$d<Z$p;Z$d++){var Z$t=Z$a._anis[Z$d]=new Z$G;Z$t.nodes=new Array;var Z$u=Z$t.name=Z$o[Z$b.getUint16()];Z$a._aniMap[Z$u]=Z$d,Z$t.bone3DMap={},Z$t.playTime=Z$b.getFloat32(),Z$t.playTime<=0&&console.error("播放时间不能为0  url="+Z$a.url+" name="+Z$t.name);var Z$v=Z$t.nodes.length=Z$b.getUint8();for(Z$e=Z$t.totalKeyframeDatasLength=0;Z$e<Z$v;Z$e++){var Z$w=Z$t.nodes[Z$e]=new Z$H;Z$w.childs=[];var Z$x=Z$b.getInt16();0<=Z$x&&(Z$w.name=Z$o[Z$x],Z$t.bone3DMap[Z$w.name]=Z$e),Z$w.keyFrame=new Array,Z$w.parentIndex=Z$b.getInt16(),-1==Z$w.parentIndex?Z$w.parent=null:Z$w.parent=Z$t.nodes[Z$w.parentIndex],Z$w.lerpType=Z$b.getUint8();var Z$y=Z$b.getUint32();Z$s.pos=Z$y;var Z$z=Z$w.keyframeWidth=Z$s.getUint16();if(Z$t.totalKeyframeDatasLength+=Z$z,0===Z$w.lerpType||1===Z$w.lerpType)for(Z$w.interpolationMethod=[],Z$w.interpolationMethod.length=Z$z,Z$f=0;Z$f<Z$z;Z$f++)Z$w.interpolationMethod[Z$f]=Z$K.interpolation[Z$s.getUint8()];null!=Z$w.parent&&Z$w.parent.childs.push(Z$w);var Z$A=Z$b.getUint16();0<Z$A&&(Z$w.extenData=Z$c.slice(Z$b.pos,Z$b.pos+Z$A),Z$b.pos+=Z$A);var Z$B,Z$C=Z$b.getUint16(),Z$D=0;for(Z$f=0,Z$i=Z$w.keyFrame.length=Z$C;Z$f<Z$i;Z$f++){if((Z$B=Z$w.keyFrame[Z$f]=new Z$I).duration=Z$b.getFloat32(),Z$B.startTime=Z$D,2===Z$w.lerpType){Z$B.interpolationData=[];var Z$E,Z$F=Z$b.getUint8();switch(Z$E=Z$b.getFloat32()){case 254:for(Z$B.interpolationData.length=Z$z,Z$l=0;Z$l<Z$z;Z$l++)Z$B.interpolationData[Z$l]=0;break;case 255:for(Z$B.interpolationData.length=Z$z,Z$l=0;Z$l<Z$z;Z$l++)Z$B.interpolationData[Z$l]=5;break;default:for(Z$B.interpolationData.push(Z$E),Z$k=1;Z$k<Z$F;Z$k++)Z$B.interpolationData.push(Z$b.getFloat32())}}for(Z$B.data=new Float32Array(Z$z),Z$j=0;Z$j<Z$z;Z$j++)Z$B.data[Z$j]=Z$b.getFloat32(),-1e-8<Z$B.data[Z$j]&&Z$B.data[Z$j]<1e-8&&(Z$B.data[Z$j]=0);Z$D+=Z$B.duration}Z$B.startTime=Z$t.playTime,Z$w.playTime=Z$t.playTime,Z$a._calculateKeyFrame(Z$w,Z$C,Z$z)}}},Z$a}(),Z$w=function(){function Z$x(){}return Z$d(Z$x,"laya.ani.AnimationParser02"),Z$x.READ_DATA=function(){Z$x._DATA.offset=Z$x._reader.getUint32(),Z$x._DATA.size=Z$x._reader.getUint32()},Z$x.READ_BLOCK=function(){for(var Z$a=Z$x._BLOCK.count=Z$x._reader.getUint16(),Z$b=Z$x._BLOCK.blockStarts=[],Z$c=Z$x._BLOCK.blockLengths=[],Z$d=0;Z$d<Z$a;Z$d++)Z$b.push(Z$x._reader.getUint32()),Z$c.push(Z$x._reader.getUint32())},Z$x.READ_STRINGS=function(){var Z$a=Z$x._reader.getUint32(),Z$b=Z$x._reader.getUint16(),Z$c=Z$x._reader.pos;Z$x._reader.pos=Z$a+Z$x._DATA.offset;for(var Z$d=0;Z$d<Z$b;Z$d++)Z$x._strings[Z$d]=Z$x._reader.readUTFString();Z$x._reader.pos=Z$c},Z$x.parse=function(Z$a,Z$b){Z$x._templet=Z$a;(Z$x._reader=Z$b).__getBuffer();Z$x.READ_DATA(),Z$x.READ_BLOCK(),Z$x.READ_STRINGS();for(var Z$c=0,Z$d=Z$x._BLOCK.count;Z$c<Z$d;Z$c++){var Z$e=Z$b.getUint16(),Z$f=Z$x._strings[Z$e],Z$i=Z$x["READ_"+Z$f];if(null==Z$i)throw new Error("model file err,no this function:"+Z$e+" "+Z$f);Z$i.call()}},Z$x.READ_ANIMATIONS=function(){var Z$a=Z$x._reader,Z$b=Z$a.__getBuffer(),Z$c=0,Z$d=0,Z$e=0,Z$f=0,Z$i=Z$a.getUint16(),Z$j=[];for(Z$j.length=Z$i,Z$c=0;Z$c<Z$i;Z$c++)Z$j[Z$c]=Z$K.interpolation[Z$a.getByte()];var Z$k=Z$a.getUint8();for(Z$x._templet._anis.length=Z$k,Z$c=0;Z$c<Z$k;Z$c++){var Z$l=Z$x._templet._anis[Z$c]={};Z$l.nodes=new Array;var Z$m=Z$l.name=Z$x._strings[Z$a.getUint16()];Z$x._templet._aniMap[Z$m]=Z$c,Z$l.bone3DMap={},Z$l.playTime=Z$a.getFloat32();var Z$n=Z$l.nodes.length=Z$a.getInt16();for(Z$d=Z$l.totalKeyframeDatasLength=0;Z$d<Z$n;Z$d++){var Z$o=Z$l.nodes[Z$d]={};Z$o.keyframeWidth=Z$i,Z$o.childs=[];var Z$p=Z$a.getUint16();0<=Z$p&&(Z$o.name=Z$x._strings[Z$p],Z$l.bone3DMap[Z$o.name]=Z$d),Z$o.keyFrame=new Array,Z$o.parentIndex=Z$a.getInt16(),-1==Z$o.parentIndex?Z$o.parent=null:Z$o.parent=Z$l.nodes[Z$o.parentIndex],Z$l.totalKeyframeDatasLength+=Z$i,Z$o.interpolationMethod=Z$j,null!=Z$o.parent&&Z$o.parent.childs.push(Z$o);var Z$q=Z$a.getUint16(),Z$r=null,Z$s=null;for(Z$e=0,Z$f=Z$o.keyFrame.length=Z$q;Z$e<Z$f;Z$e++){(Z$r=Z$o.keyFrame[Z$e]={}).startTime=Z$a.getFloat32(),Z$s&&(Z$s.duration=Z$r.startTime-Z$s.startTime);var Z$t=Z$x._DATA.offset,Z$u=Z$a.getUint32(),Z$v=4*Z$i,Z$w=Z$b.slice(Z$t+Z$u,Z$t+Z$u+Z$v);Z$r.data=new Float32Array(Z$w),Z$s=Z$r}Z$r.duration=0,Z$o.playTime=Z$l.playTime,Z$x._templet._calculateKeyFrame(Z$o,Z$q,Z$i)}}},Z$x._templet=null,Z$x._reader=null,Z$x._strings=[],Z$c(Z$x,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),Z$x}(),Z$Ia=(function(){function Z$a(){}Z$d(Z$a,"laya.ani.AnimationState"),Z$a.stopped=0,Z$a.paused=1,Z$a.playing=2}(),function(){function Z$e(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new Z$Va,this.resultMatrix=new Z$Ga,this._children=[]}Z$d(Z$e,"laya.ani.bone.Bone");var Z$a=Z$e.prototype;return Z$a.setTempMatrix=function(Z$a){this._tempMatrix=Z$a;var Z$b,Z$c=0;for(Z$c=0,Z$b=this._children.length;Z$c<Z$b;Z$c++)this._children[Z$c].setTempMatrix(this._tempMatrix)},Z$a.update=function(Z$a){var Z$b;if(this.rotation=this.transform.skX,Z$a)Z$b=this.resultTransform.getMatrix(),Z$Ga.mul(Z$b,Z$a,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)Z$b=this.resultTransform.getMatrix(),Z$Ga.mul(Z$b,this.parentBone.resultMatrix,this.resultMatrix);else{var Z$c=this.parentBone,Z$d=NaN,Z$e=NaN,Z$f=NaN,Z$i=this.parentBone.resultMatrix;Z$b=this.resultTransform.getMatrix();var Z$j=Z$i.a*Z$b.tx+Z$i.c*Z$b.ty+Z$i.tx,Z$k=Z$i.b*Z$b.tx+Z$i.d*Z$b.ty+Z$i.ty,Z$l=new Z$Ga;this.inheritRotation?(Z$d=Math.atan2(Z$c.resultMatrix.b,Z$c.resultMatrix.a),Z$e=Math.cos(Z$d),Z$f=Math.sin(Z$d),Z$l.setTo(Z$e,Z$f,-Z$f,Z$e,0,0),Z$Ga.mul(this._tempMatrix,Z$l,Z$Ga.TEMP),Z$Ga.TEMP.copyTo(Z$l),Z$b=this.resultTransform.getMatrix(),Z$Ga.mul(Z$b,Z$l,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,Z$b=this.resultTransform.getMatrix(),Z$Ga.TEMP.identity(),Z$Ga.TEMP.d=this.d,Z$Ga.mul(Z$b,Z$Ga.TEMP,this.resultMatrix)),this.resultMatrix.tx=Z$j,this.resultMatrix.ty=Z$k}else(Z$b=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var Z$m,Z$n=0;for(Z$n=0,Z$m=this._children.length;Z$n<Z$m;Z$n++)this._children[Z$n].update()},Z$a.updateChild=function(){var Z$a,Z$b=0;for(Z$b=0,Z$a=this._children.length;Z$b<Z$a;Z$b++)this._children[Z$b].update()},Z$a.setRotation=function(Z$a){this._sprite&&(this._sprite.rotation=180*Z$a/Math.PI)},Z$a.updateDraw=function(Z$a,Z$b){Z$e.ShowBones&&!Z$e.ShowBones[this.name]||(this._sprite||(this._sprite=new Z$fa,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),Z$ea.stage.addChild(this._sprite)),this._sprite.x=Z$a+this.resultMatrix.tx,this._sprite.y=Z$b+this.resultMatrix.ty);var Z$c,Z$d=0;for(Z$d=0,Z$c=this._children.length;Z$d<Z$c;Z$d++)this._children[Z$d].updateDraw(Z$a,Z$b)},Z$a.addChild=function(Z$a){this._children.push(Z$a),Z$a.parentBone=this},Z$a.findBone=function(Z$a){if(this.name==Z$a)return this;var Z$b,Z$c,Z$d=0;for(Z$d=0,Z$b=this._children.length;Z$d<Z$b;Z$d++)if(Z$c=this._children[Z$d].findBone(Z$a))return Z$c;return null},Z$a.localToWorld=function(Z$a){var Z$b=Z$a[0],Z$c=Z$a[1];Z$a[0]=Z$b*this.resultMatrix.a+Z$c*this.resultMatrix.c+this.resultMatrix.tx,Z$a[1]=Z$b*this.resultMatrix.b+Z$c*this.resultMatrix.d+this.resultMatrix.ty},Z$e.ShowBones={},Z$e}()),Z$Ja=function(){function Z$r(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}Z$d(Z$r,"laya.ani.bone.BoneSlot");var Z$a=Z$r.prototype;return Z$a.showSlotData=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!0),this.currSlotData=Z$a,Z$b&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},Z$a.showDisplayByName=function(Z$a){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(Z$a))},Z$a.replaceDisplayByName=function(Z$a,Z$b){if(this.currSlotData){var Z$c;Z$c=this.currSlotData.getDisplayByName(Z$a);var Z$d;Z$d=this.currSlotData.getDisplayByName(Z$b),this.replaceDisplayByIndex(Z$c,Z$d)}},Z$a.replaceDisplayByIndex=function(Z$a,Z$b){this.currSlotData&&(this._replaceDic[Z$a]=Z$b,this.displayIndex==Z$a&&this.showDisplayByIndex(Z$a))},Z$a.showDisplayByIndex=function(Z$a){if(null!=this._replaceDic[Z$a]&&(Z$a=this._replaceDic[Z$a]),this.currSlotData&&-1<Z$a&&Z$a<this.currSlotData.displayArr.length){if(this.displayIndex=Z$a,this.currDisplayData=this.currSlotData.displayArr[Z$a],this.currDisplayData){var Z$b=this.currDisplayData.name;this.currTexture=this.templet.getTexture(Z$b),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!Z$s.isConchApp||Z$s.isConchApp&&"0.9.15"<Z$fa.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},Z$a.replaceSkin=function(Z$a){this._diyTexture=Z$a,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},Z$a.setParentMatrix=function(Z$a){this._parentMatrix=Z$a},Z$a.draw=function(Z$a,Z$b,Z$c,Z$d){if(void 0===Z$c&&(Z$c=!1),void 0===Z$d&&(Z$d=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var Z$e,Z$f=this.currTexture;switch(this._diyTexture&&(Z$f=this._diyTexture),this.currDisplayData.type){case 0:if(Z$a){var Z$i=this.getDisplayMatrix();if(this._parentMatrix){var Z$j=!1;if(Z$i){var Z$k;if(Z$Ga.mul(Z$i,this._parentMatrix,Z$Ga.TEMP),Z$k=Z$c?(null==this._resultMatrix&&(this._resultMatrix=new Z$Ga),this._resultMatrix):new Z$Ga,!Z$s.isWebGL&&this.currDisplayData.uvs||Z$s.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var Z$l=Z$r._tempMatrix;Z$l.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(Z$l.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(Z$j=!0,Z$l.rotate(-Math.PI/2)),Z$Ga.mul(Z$l,Z$Ga.TEMP,Z$k)}else Z$Ga.TEMP.copyTo(Z$k);Z$j?Z$a.drawTexture(Z$f,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,Z$k):Z$a.drawTexture(Z$f,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,Z$k)}}}break;case 1:if(null==(Z$e=Z$c?(null==this._skinSprite&&(this._skinSprite=Z$r.createSkinMesh()),this._skinSprite):Z$r.createSkinMesh()))return;var Z$m;if(null==this.currDisplayData.bones){var Z$n,Z$o=this.currDisplayData.weights;this.deformData&&(Z$o=this.deformData),Z$n=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=Z$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=Z$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=Z$o;this.currDisplayData.triangles.length;Z$m=this.currDisplayData.triangles,Z$e.init2(Z$f,null,Z$m,this._mVerticleArr,Z$n);var Z$p,Z$q=this.getDisplayMatrix();if(this._parentMatrix)if(Z$q)Z$Ga.mul(Z$q,this._parentMatrix,Z$Ga.TEMP),Z$p=Z$c?(null==this._resultMatrix&&(this._resultMatrix=new Z$Ga),this._resultMatrix):new Z$Ga,Z$Ga.TEMP.copyTo(Z$p),Z$e.transform=Z$p}else this.skinMesh(Z$b,Z$e,Z$d);Z$a.drawSkin(Z$e);break;case 2:if(null==(Z$e=Z$c?(null==this._skinSprite&&(this._skinSprite=Z$r.createSkinMesh()),this._skinSprite):Z$r.createSkinMesh()))return;this.skinMesh(Z$b,Z$e,Z$d),Z$a.drawSkin(Z$e)}}},Z$a.skinMesh=function(Z$a,Z$b,Z$c){var Z$d,Z$e=this.currTexture,Z$f=this.currDisplayData.bones;Z$d=this._diyTexture?(Z$e=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=Z$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=Z$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var Z$i,Z$j,Z$k=this.currDisplayData.weights,Z$l=this.currDisplayData.triangles,Z$m=0,Z$n=0,Z$o=0,Z$p=NaN,Z$q=NaN,Z$r=0,Z$s=0,Z$t=[],Z$u=0,Z$v=0;if(this.deformData&&0<this.deformData.length){var Z$w=0;for(Z$u=0,Z$v=Z$f.length;Z$u<Z$v;){for(Z$o=Z$f[Z$u++]+Z$u,Z$n=Z$m=0;Z$u<Z$o;Z$u++)Z$j=Z$a[Z$f[Z$u]],Z$p=Z$k[Z$r]+this.deformData[Z$w++],Z$q=Z$k[Z$r+1]+this.deformData[Z$w++],Z$s=Z$k[Z$r+2],Z$m+=(Z$p*Z$j.a+Z$q*Z$j.c+Z$j.tx)*Z$s,Z$n+=(Z$p*Z$j.b+Z$q*Z$j.d+Z$j.ty)*Z$s,Z$r+=3;Z$t.push(Z$m,Z$n)}}else for(Z$u=0,Z$v=Z$f.length;Z$u<Z$v;){for(Z$o=Z$f[Z$u++]+Z$u,Z$n=Z$m=0;Z$u<Z$o;Z$u++)Z$j=Z$a[Z$f[Z$u]],Z$p=Z$k[Z$r],Z$q=Z$k[Z$r+1],Z$s=Z$k[Z$r+2],Z$m+=(Z$p*Z$j.a+Z$q*Z$j.c+Z$j.tx)*Z$s,Z$n+=(Z$p*Z$j.b+Z$q*Z$j.d+Z$j.ty)*Z$s,Z$r+=3;Z$t.push(Z$m,Z$n)}this._mVerticleArr=Z$t,Z$i=Z$l,Z$b.init2(Z$e,null,Z$i,this._mVerticleArr,Z$d)},Z$a.drawBonePoint=function(Z$a){Z$a&&this._parentMatrix&&Z$a.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},Z$a.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},Z$a.getMatrix=function(){return this._resultMatrix},Z$a.copy=function(){var Z$a=new Z$r;return Z$a.type="copy",Z$a.name=this.name,Z$a.attachmentName=this.attachmentName,Z$a.srcDisplayIndex=this.srcDisplayIndex,Z$a.parent=this.parent,Z$a.displayIndex=this.displayIndex,Z$a.templet=this.templet,Z$a.currSlotData=this.currSlotData,Z$a.currTexture=this.currTexture,Z$a.currDisplayData=this.currDisplayData,Z$a},Z$r.createSkinMesh=function(){return Z$s.isWebGL||Z$s.isConchApp?Z$p.skinAniSprite():(Z$s.isWebGL,null)},Z$c(Z$r,["_tempMatrix",function(){return this._tempMatrix=new Z$Ga}]),Z$r}(),Z$Ka=function(){function Z$a(){this.skinName=null,this.deformSlotDataList=[]}return Z$d(Z$a,"laya.ani.bone.DeformAniData"),Z$a}(),Z$La=function(){function Z$a(){this.deformSlotDisplayList=[]}return Z$d(Z$a,"laya.ani.bone.DeformSlotData"),Z$a}(),Z$Ma=function(){function Z$a(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}Z$d(Z$a,"laya.ani.bone.DeformSlotDisplayData");var Z$b=Z$a.prototype;return Z$b.binarySearch1=function(Z$a,Z$b){var Z$c=0,Z$d=Z$a.length-2;if(0==Z$d)return 1;for(var Z$e=Z$d>>>1;;){if(Z$a[Math.floor(Z$e+1)]<=Z$b?Z$c=Z$e+1:Z$d=Z$e,Z$c==Z$d)return Z$c+1;Z$e=Z$c+Z$d>>>1}return 0},Z$b.apply=function(Z$a,Z$b,Z$c){if(void 0===Z$c&&(Z$c=1),Z$a+=.05,!(this.timeList.length<=0)){var Z$d=0;if(!(Z$a<this.timeList[0])){var Z$e=this.vectices[0].length,Z$f=[],Z$i=this.binarySearch1(this.timeList,Z$a);if(this.frameIndex=Z$i,Z$a>=this.timeList[this.timeList.length-1]){var Z$j=this.vectices[this.vectices.length-1];if(Z$c<1)for(Z$d=0;Z$d<Z$e;Z$d++)Z$f[Z$d]+=(Z$j[Z$d]-Z$f[Z$d])*Z$c;else for(Z$d=0;Z$d<Z$e;Z$d++)Z$f[Z$d]=Z$j[Z$d];this.deformData=Z$f}else{this.tweenKeyList[this.frameIndex];var Z$k=this.vectices[this.frameIndex-1],Z$l=this.vectices[this.frameIndex],Z$m=this.timeList[this.frameIndex-1],Z$n=this.timeList[this.frameIndex];Z$c=this.tweenKeyList[Z$i-1]?(Z$a-Z$m)/(Z$n-Z$m):0;var Z$o=NaN;for(Z$d=0;Z$d<Z$e;Z$d++)Z$o=Z$k[Z$d],Z$f[Z$d]=Z$o+(Z$l[Z$d]-Z$o)*Z$c;this.deformData=Z$f}}}},Z$a}(),Z$Na=function(){function Z$a(){this.time=NaN,this.drawOrder=[]}return Z$d(Z$a,"laya.ani.bone.DrawOrderData"),Z$a}(),Z$Oa=function(){function Z$a(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return Z$d(Z$a,"laya.ani.bone.EventData"),Z$a}(),Z$u=function(){function Z$da(Z$a,Z$b){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=Z$a,this._targetBone=Z$b[Z$a.targetBoneIndex],this.isSpine=Z$a.isSpine,null==this._bones&&(this._bones=[]);for(var Z$c=this._bones.length=0,Z$d=Z$a.boneIndexs.length;Z$c<Z$d;Z$c++)this._bones.push(Z$b[Z$a.boneIndexs[Z$c]]);this.name=Z$a.name,this.mix=Z$a.mix,this.bendDirection=Z$a.bendDirection}Z$d(Z$da,"laya.ani.bone.IkConstraint");var Z$a=Z$da.prototype;return Z$a.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},Z$a._applyIk1=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$a.parentBone,Z$f=1/(Z$e.resultMatrix.a*Z$e.resultMatrix.d-Z$e.resultMatrix.b*Z$e.resultMatrix.c),Z$i=Z$b-Z$e.resultMatrix.tx,Z$j=Z$c-Z$e.resultMatrix.ty,Z$k=(Z$i*Z$e.resultMatrix.d-Z$j*Z$e.resultMatrix.c)*Z$f-Z$a.transform.x,Z$l=(Z$j*Z$e.resultMatrix.a-Z$i*Z$e.resultMatrix.b)*Z$f-Z$a.transform.y,Z$m=Math.atan2(Z$l,Z$k)*Z$da.radDeg-0-Z$a.transform.skX;Z$a.transform.scX<0&&(Z$m+=180),180<Z$m?Z$m-=360:Z$m<-180&&(Z$m+=360),Z$a.transform.skX=Z$a.transform.skY=Z$a.transform.skX+Z$m*Z$d,Z$a.update()},Z$a.updatePos=function(Z$a,Z$b){this._sp&&this._sp.pos(Z$a,Z$b)},Z$a._applyIk2=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){if(0!=Z$f){var Z$i=Z$a.resultTransform.x,Z$j=Z$a.resultTransform.y,Z$k=Z$a.transform.scX,Z$l=Z$a.transform.scY,Z$m=Z$b.transform.scX,Z$n=0,Z$o=0,Z$p=0;Z$p=Z$k<0?(Z$k=-Z$k,Z$n=180,-1):(Z$n=0,1),Z$l<0&&(Z$l=-Z$l,Z$p=-Z$p),Z$o=Z$m<0?(Z$m=-Z$m,180):0;var Z$q=Z$b.resultTransform.x,Z$r=NaN,Z$s=NaN,Z$t=NaN,Z$u=Z$a.resultMatrix.a,Z$v=Z$a.resultMatrix.c,Z$w=Z$a.resultMatrix.b,Z$x=Z$a.resultMatrix.d,Z$y=Math.abs(Z$k-Z$l)<=1e-4;Z$t=Z$y?(Z$s=Z$u*Z$q+Z$v*(Z$r=Z$b.resultTransform.y)+Z$a.resultMatrix.tx,Z$w*Z$q+Z$x*Z$r+Z$a.resultMatrix.ty):(Z$r=0,Z$s=Z$u*Z$q+Z$a.resultMatrix.tx,Z$w*Z$q+Z$a.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new Z$fa,Z$ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(Z$c,Z$d,15,"#ffff00"),this._sp.graphics.drawCircle(Z$s,Z$t,15,"#ff00ff")),Z$a.setRotation(Math.atan2(Z$t-Z$a.resultMatrix.ty,Z$s-Z$a.resultMatrix.tx));var Z$z=Z$a.parentBone;Z$u=Z$z.resultMatrix.a,Z$v=Z$z.resultMatrix.c,Z$w=Z$z.resultMatrix.b;var Z$A=1/(Z$u*(Z$x=Z$z.resultMatrix.d)-Z$v*Z$w),Z$B=Z$c-Z$z.resultMatrix.tx,Z$C=Z$d-Z$z.resultMatrix.ty,Z$D=(Z$B*Z$x-Z$C*Z$v)*Z$A-Z$i,Z$E=(Z$C*Z$u-Z$B*Z$w)*Z$A-Z$j,Z$F=((Z$B=Z$s-Z$z.resultMatrix.tx)*Z$x-(Z$C=Z$t-Z$z.resultMatrix.ty)*Z$v)*Z$A-Z$i,Z$G=(Z$C*Z$u-Z$B*Z$w)*Z$A-Z$j,Z$H=Math.sqrt(Z$F*Z$F+Z$G*Z$G),Z$I=Z$b.length*Z$m,Z$J=NaN,Z$K=NaN;if(Z$y){var Z$L=(Z$D*Z$D+Z$E*Z$E-Z$H*Z$H-(Z$I*=Z$k)*Z$I)/(2*Z$H*Z$I);Z$L<-1?Z$L=-1:1<Z$L&&(Z$L=1),Z$K=Math.acos(Z$L)*Z$e,Z$u=Z$H+Z$I*Z$L,Z$v=Z$I*Math.sin(Z$K),Z$J=Math.atan2(Z$E*Z$u-Z$D*Z$v,Z$D*Z$u+Z$E*Z$v)}else{var Z$M=(Z$u=Z$k*Z$I)*Z$u,Z$N=(Z$v=Z$l*Z$I)*Z$v,Z$O=Z$D*Z$D+Z$E*Z$E,Z$P=Math.atan2(Z$E,Z$D),Z$Q=-2*Z$N*Z$H,Z$R=Z$N-Z$M;if(0<(Z$x=Z$Q*Z$Q-4*Z$R*(Z$w=Z$N*Z$H*Z$H+Z$M*Z$O-Z$M*Z$N))){var Z$S=Math.sqrt(Z$x);Z$Q<0&&(Z$S=-Z$S);var Z$T=(Z$S=-(Z$Q+Z$S)/2)/Z$R,Z$U=Z$w/Z$S,Z$V=Math.abs(Z$T)<Math.abs(Z$U)?Z$T:Z$U;Z$V*Z$V<=Z$O&&(Z$C=Math.sqrt(Z$O-Z$V*Z$V)*Z$e,Z$J=Z$P-Math.atan2(Z$C,Z$V),Z$K=Math.atan2(Z$C/Z$l,(Z$V-Z$H)/Z$k))}var Z$W=0,Z$X=Number.MAX_VALUE,Z$Y=0,Z$Z=0,Z$$=0,Z$_=0,Z$g=0,Z$h=0;Z$_<(Z$x=(Z$B=Z$H+Z$u)*Z$B)&&(Z$$=0,Z$_=Z$x,Z$g=Z$B),(Z$x=(Z$B=Z$H-Z$u)*Z$B)<Z$X&&(Z$W=Math.PI,Z$X=Z$x,Z$Y=Z$B);var Z$aa=Math.acos(-Z$u*Z$H/(Z$M-Z$N));(Z$x=(Z$B=Z$u*Math.cos(Z$aa)+Z$H)*Z$B+(Z$C=Z$v*Math.sin(Z$aa))*Z$C)<Z$X&&(Z$W=Z$aa,Z$X=Z$x,Z$Y=Z$B,Z$Z=Z$C),Z$_<Z$x&&(Z$$=Z$aa,Z$_=Z$x,Z$g=Z$B,Z$h=Z$C),Z$K=Z$O<=(Z$X+Z$_)/2?(Z$J=Z$P-Math.atan2(Z$Z*Z$e,Z$Y),Z$W*Z$e):(Z$J=Z$P-Math.atan2(Z$h*Z$e,Z$g),Z$$*Z$e)}var Z$ba=Math.atan2(Z$r,Z$q)*Z$p,Z$ca=Z$a.resultTransform.skX;180<(Z$J=(Z$J-Z$ba)*Z$da.radDeg+Z$n-Z$ca)?Z$J-=360:Z$J<-180&&(Z$J+=360),Z$a.resultTransform.x=Z$i,Z$a.resultTransform.y=Z$j,Z$a.resultTransform.skX=Z$a.resultTransform.skY=Z$ca+Z$J*Z$f,Z$ca=Z$b.resultTransform.skX,180<(Z$K=((Z$K+Z$ba)*Z$da.radDeg-0)*Z$p+Z$o-(Z$ca%=360))?Z$K-=360:Z$K<-180&&(Z$K+=360),Z$b.resultTransform.x=Z$q,Z$b.resultTransform.y=Z$r,Z$b.resultTransform.skX=Z$b.resultTransform.skY=Z$b.resultTransform.skY+Z$K*Z$f,Z$a.update()}},Z$a._applyIk3=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){if(0!=Z$f){var Z$i,Z$j,Z$k=Z$b.resultMatrix.a*Z$b.length,Z$l=Z$b.resultMatrix.b*Z$b.length,Z$m=Z$k*Z$k+Z$l*Z$l,Z$n=Math.sqrt(Z$m),Z$o=Z$a.resultMatrix.tx,Z$p=Z$a.resultMatrix.ty,Z$q=Z$b.resultMatrix.tx,Z$r=Z$b.resultMatrix.ty,Z$s=Z$q-Z$o,Z$t=Z$r-Z$p,Z$u=Z$s*Z$s+Z$t*Z$t,Z$v=Math.sqrt(Z$u),Z$w=(Z$s=Z$c-Z$a.resultMatrix.tx)*Z$s+(Z$t=Z$d-Z$a.resultMatrix.ty)*Z$t,Z$x=Math.sqrt(Z$w);if(Z$n+Z$v<=Z$x||Z$x+Z$n<=Z$v||Z$x+Z$v<=Z$n){var Z$y=NaN;Z$q=Z$o+(Z$y=Z$n+Z$v<=Z$x?1:-1)*(Z$c-Z$o)*Z$v/Z$x,Z$r=Z$p+Z$y*(Z$d-Z$p)*Z$v/Z$x}else{var Z$z=(Z$u-Z$m+Z$w)/(2*Z$w),Z$A=Math.sqrt(Z$u-Z$z*Z$z*Z$w)/Z$x,Z$B=Z$o+Z$s*Z$z,Z$C=Z$p+Z$t*Z$z,Z$D=-Z$t*Z$A,Z$E=Z$s*Z$A;Z$r=0<Z$e?(Z$q=Z$B-Z$D,Z$C-Z$E):(Z$q=Z$B+Z$D,Z$C+Z$E)}Z$i=Z$q,Z$j=Z$r,this.isDebug&&(this._sp||(this._sp=new Z$fa,Z$ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(Z$o,Z$p,15,"#ff00ff"),this._sp.graphics.drawCircle(Z$c,Z$d,15,"#ffff00"),this._sp.graphics.drawCircle(Z$i,Z$j,15,"#ff00ff"));var Z$F,Z$G;Z$F=Math.atan2(Z$j-Z$a.resultMatrix.ty,Z$i-Z$a.resultMatrix.tx),Z$a.setRotation(Z$F),(Z$G=Z$da._tempMatrix).identity(),Z$G.rotate(Z$F),Z$G.scale(Z$a.resultMatrix.getScaleX(),Z$a.resultMatrix.getScaleY()),Z$G.translate(Z$a.resultMatrix.tx,Z$a.resultMatrix.ty),Z$G.copyTo(Z$a.resultMatrix),Z$a.updateChild();var Z$H,Z$I;Z$H=Math.atan2(Z$d-Z$j,Z$c-Z$i),Z$b.setRotation(Z$H),(Z$I=Z$da._tempMatrix).identity(),Z$I.rotate(Z$H),Z$I.scale(Z$b.resultMatrix.getScaleX(),Z$b.resultMatrix.getScaleY()),Z$I.translate(Z$i,Z$j),Z$G.copyTo(Z$b.resultMatrix),Z$b.updateChild()}},Z$c(Z$da,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new Z$Ga}]),Z$da}(),Z$Pa=function(){function Z$a(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return Z$d(Z$a,"laya.ani.bone.IkConstraintData"),Z$a}(),Z$x=function(){function Z$I(Z$a,Z$b){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=Z$a,this.position=Z$a.position,this.spacing=Z$a.spacing,this.rotateMix=Z$a.rotateMix,this.translateMix=Z$a.translateMix,this.bones=[];for(var Z$c=this.data.bones,Z$d=0,Z$e=Z$c.length;Z$d<Z$e;Z$d++)this.bones.push(Z$b[Z$c[Z$d]])}Z$d(Z$I,"laya.ani.bone.PathConstraint");var Z$a=Z$I.prototype;return Z$a.apply=function(Z$a,Z$b){if(this.target){var Z$c=this.translateMix,Z$d=this.translateMix,Z$e=0<Z$d,Z$f=this.data.spacingMode,Z$i="length"==Z$f,Z$j=this.data.rotateMode,Z$k="tangent"==Z$j,Z$l="chainScale"==Z$j,Z$m=[],Z$n=this.bones.length,Z$o=Z$k?Z$n:Z$n+1,Z$p=[];(this._spaces=Z$p)[0]=this.position;var Z$q=this.spacing;if(Z$l||Z$i)for(var Z$r=0,Z$s=Z$o-1;Z$r<Z$s;){var Z$t=this.bones[Z$r],Z$u=Z$t.length,Z$v=Z$u*Z$t.resultMatrix.a,Z$w=Z$u*Z$t.resultMatrix.b;Z$u=Math.sqrt(Z$v*Z$v+Z$w*Z$w),Z$l&&(Z$m[Z$r]=Z$u),Z$p[++Z$r]=Z$i?Math.max(0,Z$u+Z$q):Z$q}else for(Z$r=1;Z$r<Z$o;Z$r++)Z$p[Z$r]=Z$q;var Z$x=this.computeWorldPositions(this.target,Z$a,Z$b,Z$o,Z$k,"percent"==this.data.positionMode,"percent"==Z$f);if(this._debugKey){for(Z$r=0;Z$r<Z$x.length;Z$r++)Z$b.drawCircle(Z$x[Z$r++],Z$x[Z$r++],5,"#00ff00");var Z$y=[];for(Z$r=0;Z$r<Z$x.length;Z$r++)Z$y.push(Z$x[Z$r++],Z$x[Z$r++]);Z$b.drawLines(0,0,Z$y,"#ff0000")}var Z$z=Z$x[0],Z$A=Z$x[1],Z$B=this.data.offsetRotation,Z$C="chain"==Z$j&&0==Z$B,Z$D=NaN;for(Z$r=0,Z$D=3;Z$r<Z$n;Z$r++,Z$D+=3){(Z$t=this.bones[Z$r]).resultMatrix.tx+=(Z$z-Z$t.resultMatrix.tx)*Z$c,Z$t.resultMatrix.ty+=(Z$A-Z$t.resultMatrix.ty)*Z$c;var Z$E=(Z$v=Z$x[Z$D])-Z$z,Z$F=(Z$w=Z$x[Z$D+1])-Z$A;if(Z$l&&0!=(Z$u=Z$m[Z$r])){var Z$G=(Math.sqrt(Z$E*Z$E+Z$F*Z$F)/Z$u-1)*Z$d+1;Z$t.resultMatrix.a*=Z$G,Z$t.resultMatrix.c*=Z$G}if(Z$z=Z$v,Z$A=Z$w,Z$e){var Z$H=Z$t.resultMatrix.a,Z$I=Z$t.resultMatrix.c,Z$J=Z$t.resultMatrix.b,Z$K=Z$t.resultMatrix.d,Z$L=NaN,Z$M=NaN,Z$N=NaN;Z$L=Z$k?Z$x[Z$D-1]:0==Z$p[Z$r+1]?Z$x[Z$D+2]:Math.atan2(Z$F,Z$E),Z$L-=Math.atan2(Z$J,Z$H)-Z$B/180*Math.PI,Z$C&&(Z$M=Math.cos(Z$L),Z$N=Math.sin(Z$L),Z$z+=((Z$u=Z$t.length)*(Z$M*Z$H-Z$N*Z$J)-Z$E)*Z$d,Z$A+=(Z$u*(Z$N*Z$H+Z$M*Z$J)-Z$F)*Z$d),Z$L>Math.PI?Z$L-=2*Math.PI:Z$L<-Math.PI&&(Z$L+=2*Math.PI),Z$L*=Z$d,Z$M=Math.cos(Z$L),Z$N=Math.sin(Z$L),Z$t.resultMatrix.a=Z$M*Z$H-Z$N*Z$J,Z$t.resultMatrix.c=Z$M*Z$I-Z$N*Z$K,Z$t.resultMatrix.b=Z$N*Z$H+Z$M*Z$J,Z$t.resultMatrix.d=Z$N*Z$I+Z$M*Z$K}}}},Z$a.computeWorldVertices2=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){var Z$i,Z$j,Z$k=Z$a.currDisplayData.bones,Z$l=Z$a.currDisplayData.weights,Z$m=Z$a.currDisplayData.triangles,Z$n=0,Z$o=0,Z$p=0,Z$q=0,Z$r=0,Z$s=0,Z$t=0,Z$u=0,Z$v=0,Z$w=0,Z$x=0;if(null!=Z$k){for(Z$n=0;Z$n<Z$c;Z$n+=2)Z$o+=(Z$q=Z$k[Z$o])+1,Z$p+=Z$q;var Z$y=Z$b;for(Z$r=Z$f,Z$s=3*Z$p;Z$r<Z$d;Z$r+=2){for(Z$u=Z$t=0,Z$q=Z$k[Z$o++],Z$q+=Z$o;Z$o<Z$q;Z$o++,Z$s+=3){Z$i=Z$y[Z$k[Z$o]].resultMatrix,Z$v=Z$l[Z$s],Z$w=Z$l[Z$s+1];var Z$z=Z$l[Z$s+2];Z$t+=(Z$v*Z$i.a+Z$w*Z$i.c+Z$i.tx)*Z$z,Z$u+=(Z$v*Z$i.b+Z$w*Z$i.d+Z$i.ty)*Z$z}Z$e[Z$r]=Z$t,Z$e[Z$r+1]=Z$u}}else{var Z$A,Z$B;if(Z$m||(Z$m=Z$l),Z$a.deformData&&(Z$m=Z$a.deformData),Z$A=Z$a.parent,Z$b)for(Z$x=Z$b.length,Z$n=0;Z$n<Z$x;Z$n++)if(Z$b[Z$n].name==Z$A){Z$j=Z$b[Z$n];break}Z$j&&(Z$B=Z$j.resultMatrix),Z$B||(Z$B=Z$I._tempMt);var Z$C=Z$B.tx,Z$D=Z$B.ty,Z$E=Z$B.a,Z$F=Z$B.b,Z$G=Z$B.c,Z$H=Z$B.d;for(Z$j&&(Z$H*=Z$j.d),Z$o=Z$c,Z$r=Z$f;Z$r<Z$d;Z$o+=2,Z$r+=2)Z$v=Z$m[Z$o],Z$w=Z$m[Z$o+1],Z$e[Z$r]=Z$v*Z$E+Z$w*Z$F+Z$C,Z$e[Z$r+1]=-(Z$v*Z$G+Z$w*Z$H+Z$D)}},Z$a.computeWorldPositions=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i){Z$a.currDisplayData.bones,Z$a.currDisplayData.weights,Z$a.currDisplayData.triangles;var Z$j=[],Z$k=0,Z$l=Z$a.currDisplayData.verLen,Z$m=this.position,Z$n=this._spaces,Z$o=[],Z$p=[],Z$q=Z$l/6,Z$r=-1,Z$s=NaN,Z$t=0,Z$u=0,Z$v=NaN,Z$w=NaN,Z$x=NaN,Z$y=NaN;if(Z$q--,Z$l-=4,this.computeWorldVertices2(Z$a,Z$b,2,Z$l,Z$j,0),this._debugKey)for(Z$k=0;Z$k<Z$j.length;)Z$c.drawCircle(Z$j[Z$k++],Z$j[Z$k++],10,"#ff0000");Z$o=Z$j,this._curves.length=Z$q;var Z$z=this._curves,Z$A=Z$o[Z$s=0],Z$B=Z$o[1],Z$C=0,Z$D=0,Z$E=0,Z$F=0,Z$G=0,Z$H=0,Z$I=NaN,Z$J=NaN,Z$K=NaN,Z$L=NaN,Z$M=NaN,Z$N=NaN,Z$O=NaN,Z$P=NaN,Z$Q=0;for(Z$k=0,Z$Q=2;Z$k<Z$q;Z$k++,Z$Q+=6)Z$C=Z$o[Z$Q],Z$D=Z$o[Z$Q+1],Z$E=Z$o[Z$Q+2],Z$F=Z$o[Z$Q+3],Z$M=2*(Z$I=.1875*(Z$A-2*Z$C+Z$E))+(Z$K=.09375*(3*(Z$C-Z$E)-Z$A+(Z$G=Z$o[Z$Q+4]))),Z$N=2*(Z$J=.1875*(Z$B-2*Z$D+Z$F))+(Z$L=.09375*(3*(Z$D-Z$F)-Z$B+(Z$H=Z$o[Z$Q+5]))),Z$O=.75*(Z$C-Z$A)+Z$I+.16666667*Z$K,Z$P=.75*(Z$D-Z$B)+Z$J+.16666667*Z$L,Z$s+=Math.sqrt(Z$O*Z$O+Z$P*Z$P),Z$O+=Z$M,Z$P+=Z$N,Z$M+=Z$K,Z$N+=Z$L,Z$s+=Math.sqrt(Z$O*Z$O+Z$P*Z$P),Z$O+=Z$M,Z$P+=Z$N,Z$s+=Math.sqrt(Z$O*Z$O+Z$P*Z$P),Z$O+=Z$M+Z$K,Z$P+=Z$N+Z$L,Z$s+=Math.sqrt(Z$O*Z$O+Z$P*Z$P),Z$z[Z$k]=Z$s,Z$A=Z$G,Z$B=Z$H;if(Z$f&&(Z$m*=Z$s),Z$i)for(Z$k=0;Z$k<Z$d;Z$k++)Z$n[Z$k]*=Z$s;var Z$R=this._segments,Z$S=0,Z$T=0;for(Z$T=Z$u=Z$t=Z$k=0;Z$k<Z$d;Z$k++,Z$t+=3)if((Z$v=Z$m+=Z$w=Z$n[Z$k])<0)this.addBeforePosition(Z$v,Z$o,0,Z$p,Z$t);else if(Z$s<Z$v)this.addAfterPosition(Z$v-Z$s,Z$o,Z$l-4,Z$p,Z$t);else{for(;;Z$u++)if(!((Z$y=Z$z[Z$u])<Z$v)){0==Z$u?Z$v/=Z$y:Z$v=(Z$v-(Z$x=Z$z[Z$u-1]))/(Z$y-Z$x);break}if(Z$u!=Z$r){var Z$U=6*(Z$r=Z$u);for(Z$A=Z$o[Z$U],Z$B=Z$o[Z$U+1],Z$C=Z$o[Z$U+2],Z$D=Z$o[Z$U+3],Z$E=Z$o[Z$U+4],Z$F=Z$o[Z$U+5],Z$M=2*(Z$I=.03*(Z$A-2*Z$C+Z$E))+(Z$K=.006*(3*(Z$C-Z$E)-Z$A+(Z$G=Z$o[Z$U+6]))),Z$N=2*(Z$J=.03*(Z$B-2*Z$D+Z$F))+(Z$L=.006*(3*(Z$D-Z$F)-Z$B+(Z$H=Z$o[Z$U+7]))),Z$O=.3*(Z$C-Z$A)+Z$I+.16666667*Z$K,Z$P=.3*(Z$D-Z$B)+Z$J+.16666667*Z$L,Z$S=Math.sqrt(Z$O*Z$O+Z$P*Z$P),Z$R[0]=Z$S,Z$U=1;Z$U<8;Z$U++)Z$O+=Z$M,Z$P+=Z$N,Z$M+=Z$K,Z$N+=Z$L,Z$S+=Math.sqrt(Z$O*Z$O+Z$P*Z$P),Z$R[Z$U]=Z$S;Z$O+=Z$M,Z$P+=Z$N,Z$S+=Math.sqrt(Z$O*Z$O+Z$P*Z$P),Z$R[8]=Z$S,Z$O+=Z$M+Z$K,Z$P+=Z$N+Z$L,Z$S+=Math.sqrt(Z$O*Z$O+Z$P*Z$P),Z$R[9]=Z$S,Z$T=0}for(Z$v*=Z$S;;Z$T++)if(!((Z$y=Z$R[Z$T])<Z$v)){0==Z$T?Z$v/=Z$y:Z$v=Z$T+(Z$v-(Z$x=Z$R[Z$T-1]))/(Z$y-Z$x);break}this.addCurvePosition(.1*Z$v,Z$A,Z$B,Z$C,Z$D,Z$E,Z$F,Z$G,Z$H,Z$p,Z$t,Z$e||0<Z$k&&0==Z$w)}return Z$p},Z$a.addBeforePosition=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$b[Z$c],Z$i=Z$b[Z$c+1],Z$j=Z$b[Z$c+2]-Z$f,Z$k=Z$b[Z$c+3]-Z$i,Z$l=Math.atan2(Z$k,Z$j);Z$d[Z$e]=Z$f+Z$a*Math.cos(Z$l),Z$d[Z$e+1]=Z$i+Z$a*Math.sin(Z$l),Z$d[Z$e+2]=Z$l},Z$a.addAfterPosition=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$b[Z$c+2],Z$i=Z$b[Z$c+3],Z$j=Z$f-Z$b[Z$c],Z$k=Z$i-Z$b[Z$c+1],Z$l=Math.atan2(Z$k,Z$j);Z$d[Z$e]=Z$f+Z$a*Math.cos(Z$l),Z$d[Z$e+1]=Z$i+Z$a*Math.sin(Z$l),Z$d[Z$e+2]=Z$l},Z$a.addCurvePosition=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m,Z$n){0==Z$a&&(Z$a=1e-4);var Z$o=Z$a*Z$a,Z$p=Z$o*Z$a,Z$q=1-Z$a,Z$r=Z$q*Z$q,Z$s=Z$r*Z$q,Z$t=Z$q*Z$a,Z$u=3*Z$t,Z$v=Z$q*Z$u,Z$w=Z$u*Z$a,Z$x=Z$b*Z$s+Z$d*Z$v+Z$f*Z$w+Z$j*Z$p,Z$y=Z$c*Z$s+Z$e*Z$v+Z$i*Z$w+Z$k*Z$p;Z$l[Z$m]=Z$x,Z$l[Z$m+1]=Z$y,Z$l[Z$m+2]=Z$n?Math.atan2(Z$y-(Z$c*Z$r+Z$e*Z$t*2+Z$i*Z$o),Z$x-(Z$b*Z$r+Z$d*Z$t*2+Z$f*Z$o)):0},Z$I.NONE=-1,Z$I.BEFORE=-2,Z$I.AFTER=-3,Z$c(Z$I,["_tempMt",function(){return this._tempMt=new Z$Ga}]),Z$I}(),Z$Qa=function(){function Z$a(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return Z$d(Z$a,"laya.ani.bone.PathConstraintData"),Z$a}(),Z$Ra=function(){function Z$a(){this.name=null,this.slotArr=[]}return Z$d(Z$a,"laya.ani.bone.SkinData"),Z$a}(),Z$Sa=function(){function Z$a(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}Z$d(Z$a,"laya.ani.bone.SkinSlotDisplayData");var Z$b=Z$a.prototype;return Z$b.createTexture=function(Z$a){return this.texture||(this.texture=new Z$Ha(Z$a.bitmap,this.uvs),Z$a.bitmap.alphaTexture&&(this.texture.alphaTexture=new Z$Ha(Z$a.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=Z$a.height,this.texture.height=Z$a.width,this.texture.offsetX=-Z$a.offsetX,this.texture.offsetY=-Z$a.offsetY,this.texture.sourceWidth=Z$a.sourceHeight,this.texture.sourceHeight=Z$a.sourceWidth):(this.texture.width=Z$a.width,this.texture.height=Z$a.height,this.texture.offsetX=-Z$a.offsetX,this.texture.offsetY=-Z$a.offsetY,this.texture.sourceWidth=Z$a.sourceWidth,this.texture.sourceHeight=Z$a.sourceHeight),Z$s.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},Z$b.destory=function(){this.texture&&this.texture.destroy()},Z$a}(),Z$Ta=function(){function Z$a(){this.name=null,this.displayArr=[]}return Z$d(Z$a,"laya.ani.bone.SlotData"),Z$a.prototype.getDisplayByName=function(Z$a){for(var Z$b=0,Z$c=this.displayArr.length;Z$b<Z$c;Z$b++)if(this.displayArr[Z$b].attachmentName==Z$a)return Z$b;return-1},Z$a}(),Z$y=function(){function Z$a(Z$a,Z$b){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=Z$r(2,0),this._data=Z$a,null==this._bones&&(this._bones=[]),this.target=Z$b[Z$a.targetIndex];var Z$c,Z$d=0;for(Z$d=0,Z$c=Z$a.boneIndexs.length;Z$d<Z$c;Z$d++)this._bones.push(Z$b[Z$a.boneIndexs[Z$d]]);this.rotateMix=Z$a.rotateMix,this.translateMix=Z$a.translateMix,this.scaleMix=Z$a.scaleMix,this.shearMix=Z$a.shearMix}return Z$d(Z$a,"laya.ani.bone.TfConstraint"),Z$a.prototype.apply=function(){for(var Z$a,Z$b=this.target.resultMatrix.a,Z$c=this.target.resultMatrix.b,Z$d=this.target.resultMatrix.c,Z$e=this.target.resultMatrix.d,Z$f=0,Z$i=this._bones.length;Z$f<Z$i;Z$f++){if(Z$a=this._bones[Z$f],0<this.rotateMix){var Z$j=Z$a.resultMatrix.a,Z$k=Z$a.resultMatrix.b,Z$l=Z$a.resultMatrix.c,Z$m=Z$a.resultMatrix.d,Z$n=Math.atan2(Z$d,Z$b)-Math.atan2(Z$l,Z$j)+this._data.offsetRotation*Math.PI/180;Z$n>Math.PI?Z$n-=2*Math.PI:Z$n<-Math.PI&&(Z$n+=2*Math.PI),Z$n*=this.rotateMix;var Z$o=Math.cos(Z$n),Z$p=Math.sin(Z$n);Z$a.resultMatrix.a=Z$o*Z$j-Z$p*Z$l,Z$a.resultMatrix.b=Z$o*Z$k-Z$p*Z$m,Z$a.resultMatrix.c=Z$p*Z$j+Z$o*Z$l,Z$a.resultMatrix.d=Z$p*Z$k+Z$o*Z$m}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),Z$a.resultMatrix.tx+=(this._temp[0]-Z$a.resultMatrix.tx)*this.translateMix,Z$a.resultMatrix.ty+=(this._temp[1]-Z$a.resultMatrix.ty)*this.translateMix,Z$a.updateChild()),0<this.scaleMix){var Z$q=Math.sqrt(Z$a.resultMatrix.a*Z$a.resultMatrix.a+Z$a.resultMatrix.c*Z$a.resultMatrix.c),Z$r=Math.sqrt(Z$b*Z$b+Z$d*Z$d),Z$s=1e-5<Z$q?(Z$q+(Z$r-Z$q+this._data.offsetScaleX)*this.scaleMix)/Z$q:0;Z$a.resultMatrix.a*=Z$s,Z$a.resultMatrix.c*=Z$s,Z$q=Math.sqrt(Z$a.resultMatrix.b*Z$a.resultMatrix.b+Z$a.resultMatrix.d*Z$a.resultMatrix.d),Z$r=Math.sqrt(Z$c*Z$c+Z$e*Z$e),Z$s=1e-5<Z$q?(Z$q+(Z$r-Z$q+this._data.offsetScaleY)*this.scaleMix)/Z$q:0,Z$a.resultMatrix.b*=Z$s,Z$a.resultMatrix.d*=Z$s}if(0<this.shearMix){Z$k=Z$a.resultMatrix.b,Z$m=Z$a.resultMatrix.d;var Z$t=Math.atan2(Z$m,Z$k);(Z$n=Math.atan2(Z$e,Z$c)-Math.atan2(Z$d,Z$b)-(Z$t-Math.atan2(Z$a.resultMatrix.c,Z$a.resultMatrix.a)))>Math.PI?Z$n-=2*Math.PI:Z$n<-Math.PI&&(Z$n+=2*Math.PI),Z$n=Z$t+(Z$n+this._data.offsetShearY*Math.PI/180)*this.shearMix,Z$s=Math.sqrt(Z$k*Z$k+Z$m*Z$m),Z$a.resultMatrix.b=Math.cos(Z$n)*Z$s,Z$a.resultMatrix.d=Math.sin(Z$n)*Z$s}}},Z$a}(),Z$Ua=function(){function Z$a(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return Z$d(Z$a,"laya.ani.bone.TfConstraintData"),Z$a}(),Z$Va=function(){function Z$a(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}Z$d(Z$a,"laya.ani.bone.Transform");var Z$b=Z$a.prototype;return Z$b.initData=function(Z$a){null!=Z$a.x&&(this.x=Z$a.x),null!=Z$a.y&&(this.y=Z$a.y),null!=Z$a.skX&&(this.skX=Z$a.skX),null!=Z$a.skY&&(this.skY=Z$a.skY),null!=Z$a.scX&&(this.scX=Z$a.scX),null!=Z$a.scY&&(this.scY=Z$a.scY)},Z$b.getMatrix=function(){var Z$a;return(Z$a=this.mMatrix?this.mMatrix:this.mMatrix=new Z$Ga).identity(),Z$a.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(Z$a,this.skewX*Math.PI/180,this.skewY*Math.PI/180),Z$a.rotate(this.skX*Math.PI/180),Z$a.translate(this.x,this.y),Z$a},Z$b.skew=function(Z$a,Z$b,Z$c){var Z$d=Math.sin(Z$c),Z$e=Math.cos(Z$c),Z$f=Math.sin(Z$b),Z$i=Math.cos(Z$b);return Z$a.setTo(Z$a.a*Z$i-Z$a.b*Z$d,Z$a.a*Z$f+Z$a.b*Z$e,Z$a.c*Z$i-Z$a.d*Z$d,Z$a.c*Z$f+Z$a.d*Z$e,Z$a.tx*Z$i-Z$a.ty*Z$d,Z$a.tx*Z$f+Z$a.ty*Z$e),Z$a},Z$a}(),Z$z=function(){function Z$a(){}return Z$d(Z$a,"laya.ani.bone.UVTools"),Z$a.getRelativeUV=function(Z$a,Z$b,Z$c){var Z$d=Z$a[0],Z$e=Z$a[2]-Z$a[0],Z$f=Z$a[1],Z$i=Z$a[5]-Z$a[1];Z$c||(Z$c=[]),Z$c.length=Z$b.length;var Z$j,Z$k=0;Z$j=Z$c.length;var Z$l=1/Z$e,Z$m=1/Z$i;for(Z$k=0;Z$k<Z$j;Z$k+=2)Z$c[Z$k]=(Z$b[Z$k]-Z$d)*Z$l,Z$c[Z$k+1]=(Z$b[Z$k+1]-Z$f)*Z$m;return Z$c},Z$a.getAbsoluteUV=function(Z$a,Z$b,Z$c){if(0==Z$a[0]&&0==Z$a[1]&&1==Z$a[4]&&1==Z$a[5])return Z$c?(Z$t.copyArray(Z$c,Z$b),Z$c):Z$b;var Z$d=Z$a[0],Z$e=Z$a[2]-Z$a[0],Z$f=Z$a[1],Z$i=Z$a[5]-Z$a[1];Z$c||(Z$c=[]),Z$c.length=Z$b.length;var Z$j,Z$k=0;for(Z$j=Z$c.length,Z$k=0;Z$k<Z$j;Z$k+=2)Z$c[Z$k]=Z$b[Z$k]*Z$e+Z$d,Z$c[Z$k+1]=Z$b[Z$k+1]*Z$i+Z$f;return Z$c},Z$a}(),Z$I=function(){function Z$a(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return Z$d(Z$a,"laya.ani.KeyFramesContent"),Z$a}(),Z$A=function(){function Z$m(){}return Z$d(Z$m,"laya.ani.math.BezierLerp"),Z$m.getBezierRate=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$m._getBezierParamKey(Z$b,Z$c,Z$d,Z$e),Z$i=100*Z$f+Z$a;if(Z$m._bezierResultCache[Z$i])return Z$m._bezierResultCache[Z$i];var Z$j,Z$k=Z$m._getBezierPoints(Z$b,Z$c,Z$d,Z$e,Z$f),Z$l=0;for(Z$j=Z$k.length,Z$l=0;Z$l<Z$j;Z$l+=2)if(Z$a<=Z$k[Z$l])return Z$m._bezierResultCache[Z$i]=Z$k[Z$l+1],Z$k[Z$l+1];return Z$m._bezierResultCache[Z$i]=1},Z$m._getBezierParamKey=function(Z$a,Z$b,Z$c,Z$d){return 100*(100*(100*(100*Z$a+Z$b)+Z$c)+Z$d)},Z$m._getBezierPoints=function(Z$a,Z$b,Z$c,Z$d,Z$e){return Z$m._bezierPointsCache[Z$e]?Z$m._bezierPointsCache[Z$e]:(Z$f=[0,0,Z$a,Z$b,Z$c,Z$d,1,1],Z$i=(new Z$j).getBezierPoints(Z$f,100,3),Z$m._bezierPointsCache[Z$e]=Z$i);var Z$f,Z$i},Z$m._bezierResultCache={},Z$m._bezierPointsCache={},Z$m}(),Z$B=function(Z$a){function Z$b(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,Z$b.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}Z$d(Z$b,"laya.ani.AnimationPlayer",Z$e);var Z$c=Z$b.prototype;return Z$ea.imps(Z$c,{"laya.resource.IDestroy":!0}),Z$c._onTempletLoadedComputeFullKeyframeIndices=function(Z$a,Z$b,Z$c){this._templet===Z$c&&this._cachePlayRate===Z$a&&this._cacheFrameRate===Z$b&&this._computeFullKeyframeIndices()},Z$c._computeFullKeyframeIndices=function(){for(var Z$a=this._fullFrames=[],Z$b=this._templet,Z$c=this._cacheFrameRateInterval*this._cachePlayRate,Z$d=0,Z$e=Z$b.getAnimationCount();Z$d<Z$e;Z$d++){for(var Z$f=[],Z$i=0,Z$j=Z$b.getAnimation(Z$d).nodes.length;Z$i<Z$j;Z$i++){for(var Z$k=Z$b.getAnimation(Z$d).nodes[Z$i],Z$l=Math.floor(Z$k.playTime/Z$c+.01),Z$m=new Uint16Array(Z$l+1),Z$n=-1,Z$o=0,Z$p=Z$k.keyFrame.length;Z$o<Z$p;Z$o++){var Z$q=Z$k.keyFrame[Z$o],Z$r=Z$q.startTime,Z$s=Z$r+Z$q.duration+Z$c;do{for(var Z$t=Math.floor(Z$r/Z$c+.5),Z$u=Z$n+1;Z$u<Z$t;Z$u++)Z$m[Z$u]=Z$o;Z$m[Z$n=Z$t]=Z$o,Z$r+=Z$c}while(Z$r<=Z$s)}Z$f.push(Z$m)}Z$a.push(Z$f)}},Z$c._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},Z$c._calculatePlayDuration=function(){if(0!==this.state){var Z$a=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=Z$a),this._playEnd>Z$a&&(this._playEnd=Z$a),this._playDuration=this._playEnd-this._playStart}},Z$c._setPlayParams=function(Z$a,Z$b){this._currentTime=Z$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/Z$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*Z$b},Z$c._setPlayParamsWhenStop=function(Z$a,Z$b){this._currentTime=Z$a,this._currentKeyframeIndex=Math.max(Math.floor(Z$a/Z$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*Z$b,this._currentAnimationClipIndex=-1},Z$c._update=function(Z$a){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var Z$b=this._cacheFrameRateInterval*this._cachePlayRate,Z$c=0;this._startUpdateLoopCount!==Z$q.loopCount&&(Z$c=Z$a*this.playbackRate,this._elapsedPlaybackTime+=Z$c);var Z$d=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=Z$d)return this._setPlayParamsWhenStop(Z$d,Z$b),void this.event("stopped");if(Z$c+=this._currentTime,0<Z$d)if(Z$d<=Z$c)do{if(Z$c-=Z$d,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(Z$d,Z$b),this._stopWhenCircleFinish=!1,void this.event("stopped");Z$c<Z$d&&(this._setPlayParams(Z$c,Z$b),this.event("complete"))}while(Z$d<=Z$c);else this._setPlayParams(Z$c,Z$b);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(Z$d,Z$b),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},Z$c._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},Z$c.play=function(Z$a,Z$b,Z$c,Z$d,Z$e){if(void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=1),void 0===Z$c&&(Z$c=2147483647),void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(Z$c<0||Z$d<0||Z$e<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==Z$e&&Z$e<Z$d)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=Z$b,this._overallDuration=Z$c,this._playStart=Z$d,this._playEnd=Z$e,this._paused=!1,this._currentAnimationClipIndex=Z$a,this._currentKeyframeIndex=0,this._startUpdateLoopCount=Z$q.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},Z$c.playByFrame=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$a&&(Z$a=0),void 0===Z$b&&(Z$b=1),void 0===Z$c&&(Z$c=2147483647),void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0),void 0===Z$f&&(Z$f=30);var Z$i=1e3/Z$f;this.play(Z$a,Z$b,Z$c,Z$d*Z$i,Z$e*Z$i)},Z$c.stop=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$a?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},Z$f(0,Z$c,"playEnd",function(){return this._playEnd}),Z$f(0,Z$c,"templet",function(){return this._templet},function(Z$a){0===!this.state&&this.stop(!0),this._templet!==Z$a&&((this._templet=Z$a).loaded?this._computeFullKeyframeIndices():Z$a.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),Z$f(0,Z$c,"playStart",function(){return this._playStart}),Z$f(0,Z$c,"playDuration",function(){return this._playDuration}),Z$f(0,Z$c,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),Z$f(0,Z$c,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),Z$f(0,Z$c,"overallDuration",function(){return this._overallDuration}),Z$f(0,Z$c,"currentFrameTime",function(){return this._currentFrameTime}),Z$f(0,Z$c,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),Z$f(0,Z$c,"currentPlayTime",function(){return this._currentTime+this._playStart}),Z$f(0,Z$c,"cachePlayRate",function(){return this._cachePlayRate},function(Z$a){this._cachePlayRate!==Z$a&&(this._cachePlayRate=Z$a,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[Z$a,this._cacheFrameRate])))}),Z$f(0,Z$c,"cacheFrameRate",function(){return this._cacheFrameRate},function(Z$a){this._cacheFrameRate!==Z$a&&(this._cacheFrameRate=Z$a,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,Z$a])))}),Z$f(0,Z$c,"currentTime",null,function(Z$a){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(Z$a<this._playStart||Z$a>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=Z$q.loopCount;var Z$b=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=Z$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/Z$b),0),this._currentFrameTime=this._currentKeyframeIndex*Z$b}}),Z$f(0,Z$c,"paused",function(){return this._paused},function(Z$a){(this._paused=Z$a)&&this.event("paused")}),Z$f(0,Z$c,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),Z$f(0,Z$c,"destroyed",function(){return this._destroyed}),Z$b}(),Z$J=function(Z$a){function Z$b(){Z$b.__super.call(this),Z$s.isConchNode&&(this.drawSkin=function(Z$a){Z$a.transform||(Z$a.transform=Z$Ga.EMPTY),this._addCmd([Z$a]),this.setSkinMesh&&this.setSkinMesh(Z$a._ps,Z$a.mVBData,Z$a.mEleNum,0,Z$a.mTexture,Z$a.transform)})}return Z$d(Z$b,"laya.ani.GraphicsAni",Z$i),Z$b.prototype.drawSkin=function(Z$a){var Z$b=[Z$a];this._saveToCmd(Z$s._context._drawSkin,Z$b)},Z$b.create=function(){return Z$b._caches.pop()||new Z$b},Z$b.recycle=function(Z$a){Z$a.clear(),Z$b._caches.push(Z$a)},Z$b._caches=[],Z$b}(),Z$K=function(Z$a){function Z$u(){this._aniMap={},this.unfixedLastAniIndex=-1,Z$u.__super.call(this),this._anis=new Array}Z$d(Z$u,"laya.ani.AnimationTemplet",Z$m);var Z$b=Z$u.prototype;return Z$b.parse=function(Z$a){var Z$b=new Z$Fa(Z$a);this._aniVersion=Z$b.readUTFString(),Z$v.parse(this,Z$b)},Z$b._calculateKeyFrame=function(Z$a,Z$b,Z$c){var Z$d=Z$a.keyFrame;Z$d[Z$b]=Z$d[0];for(var Z$e=0;Z$e<Z$b;Z$e++){var Z$f=Z$d[Z$e];Z$f.nextData=0===Z$f.duration?Z$f.data:Z$d[Z$e+1].data}Z$d.length--},Z$b.onAsynLoaded=function(Z$a,Z$b,Z$c){var Z$d=new Z$Fa(Z$b);switch(this._aniVersion=Z$d.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":Z$w.parse(this,Z$d);break;default:Z$v.parse(this,Z$d)}this._endLoaded()},Z$b.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},Z$b.getAnimationCount=function(){return this._anis.length},Z$b.getAnimation=function(Z$a){return this._anis[Z$a]},Z$b.getAniDuration=function(Z$a){return this._anis[Z$a].playTime},Z$b.getNodes=function(Z$a){return this._anis[Z$a].nodes},Z$b.getNodeIndexWithName=function(Z$a,Z$b){return this._anis[Z$a].bone3DMap[Z$b]},Z$b.getNodeCount=function(Z$a){return this._anis[Z$a].nodes.length},Z$b.getTotalkeyframesLength=function(Z$a){return this._anis[Z$a].totalKeyframeDatasLength},Z$b.getPublicExtData=function(){return this._publicExtData},Z$b.getAnimationDataWithCache=function(Z$a,Z$b,Z$c,Z$d){var Z$e=Z$b[Z$c];if(Z$e){var Z$f=Z$e[Z$a];return Z$f?Z$f[Z$d]:null}return null},Z$b.setAnimationDataWithCache=function(Z$a,Z$b,Z$c,Z$d,Z$e){var Z$f=Z$b[Z$c]||(Z$b[Z$c]={});(Z$f[Z$a]||(Z$f[Z$a]=[]))[Z$d]=Z$e},Z$b.getOriginalData=function(Z$a,Z$b,Z$c,Z$d,Z$e){for(var Z$f=this._anis[Z$a].nodes,Z$i=0,Z$j=0,Z$k=Z$f.length,Z$l=0;Z$j<Z$k;Z$j++){var Z$m,Z$n=Z$f[Z$j];Z$m=Z$n.keyFrame[Z$c[Z$j][Z$d]],Z$n.dataOffset=Z$l;var Z$o=Z$e-Z$m.startTime,Z$p=Z$n.lerpType;if(Z$p)switch(Z$p){case 0:case 1:for(Z$i=0;Z$i<Z$n.keyframeWidth;)Z$i+=Z$n.interpolationMethod[Z$i](Z$n,Z$i,Z$b,Z$l+Z$i,Z$m.data,Z$o,null,Z$m.duration,Z$m.nextData);break;case 2:var Z$q=Z$m.interpolationData,Z$r=Z$q.length,Z$s=0;for(Z$i=0;Z$i<Z$r;){var Z$t=Z$q[Z$i];switch(Z$t){case 6:case 7:Z$i+=Z$u.interpolation[Z$t](Z$n,Z$s,Z$b,Z$l+Z$s,Z$m.data,Z$o,null,Z$m.duration,Z$m.nextData,Z$q,Z$i+1);break;default:Z$i+=Z$u.interpolation[Z$t](Z$n,Z$s,Z$b,Z$l+Z$s,Z$m.data,Z$o,null,Z$m.duration,Z$m.nextData)}Z$s++}}else for(Z$i=0;Z$i<Z$n.keyframeWidth;)Z$i+=Z$n.interpolationMethod[Z$i](Z$n,Z$i,Z$b,Z$l+Z$i,Z$m.data,Z$o,null,Z$m.duration,Z$m.nextData);Z$l+=Z$n.keyframeWidth}},Z$b.getNodesCurrentFrameIndex=function(Z$a,Z$b){var Z$c=this._anis[Z$a].nodes;Z$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(Z$c.length),this.unfixedCurrentTimes=new Float32Array(Z$c.length),this.unfixedLastAniIndex=Z$a);for(var Z$d=0,Z$e=Z$c.length;Z$d<Z$e;Z$d++){var Z$f=Z$c[Z$d];for(Z$b<this.unfixedCurrentTimes[Z$d]&&(this.unfixedCurrentFrameIndexes[Z$d]=0),this.unfixedCurrentTimes[Z$d]=Z$b;this.unfixedCurrentFrameIndexes[Z$d]<Z$f.keyFrame.length&&!(Z$f.keyFrame[this.unfixedCurrentFrameIndexes[Z$d]].startTime>this.unfixedCurrentTimes[Z$d]);)this.unfixedCurrentFrameIndexes[Z$d]++;this.unfixedCurrentFrameIndexes[Z$d]--}return this.unfixedCurrentFrameIndexes},Z$b.getOriginalDataUnfixedRate=function(Z$a,Z$b,Z$c){var Z$d=this._anis[Z$a].nodes;Z$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(Z$d.length),this.unfixedCurrentTimes=new Float32Array(Z$d.length),this.unfixedKeyframes=Z$r(Z$d.length),this.unfixedLastAniIndex=Z$a);for(var Z$e=0,Z$f=0,Z$i=Z$d.length,Z$j=0;Z$f<Z$i;Z$f++){var Z$k=Z$d[Z$f];for(Z$c<this.unfixedCurrentTimes[Z$f]&&(this.unfixedCurrentFrameIndexes[Z$f]=0),this.unfixedCurrentTimes[Z$f]=Z$c;this.unfixedCurrentFrameIndexes[Z$f]<Z$k.keyFrame.length&&!(Z$k.keyFrame[this.unfixedCurrentFrameIndexes[Z$f]].startTime>this.unfixedCurrentTimes[Z$f]);)this.unfixedKeyframes[Z$f]=Z$k.keyFrame[this.unfixedCurrentFrameIndexes[Z$f]],this.unfixedCurrentFrameIndexes[Z$f]++;var Z$l=this.unfixedKeyframes[Z$f];Z$k.dataOffset=Z$j;var Z$m=Z$c-Z$l.startTime;if(Z$k.lerpType)switch(Z$k.lerpType){case 0:case 1:for(Z$e=0;Z$e<Z$k.keyframeWidth;)Z$e+=Z$k.interpolationMethod[Z$e](Z$k,Z$e,Z$b,Z$j+Z$e,Z$l.data,Z$m,null,Z$l.duration,Z$l.nextData);break;case 2:var Z$n=Z$l.interpolationData,Z$o=Z$n.length,Z$p=0;for(Z$e=0;Z$e<Z$o;){var Z$q=Z$n[Z$e];switch(Z$q){case 6:case 7:Z$e+=Z$u.interpolation[Z$q](Z$k,Z$p,Z$b,Z$j+Z$p,Z$l.data,Z$m,null,Z$l.duration,Z$l.nextData,Z$n,Z$e+1);break;default:Z$e+=Z$u.interpolation[Z$q](Z$k,Z$p,Z$b,Z$j+Z$p,Z$l.data,Z$m,null,Z$l.duration,Z$l.nextData)}Z$p++}}else for(Z$e=0;Z$e<Z$k.keyframeWidth;)Z$e+=Z$k.interpolationMethod[Z$e](Z$k,Z$e,Z$b,Z$j+Z$e,Z$l.data,Z$m,null,Z$l.duration,Z$l.nextData);Z$j+=Z$k.keyframeWidth}},Z$u._LinearInterpolation_0=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){var Z$m=0===Z$j?0:Z$f/Z$j;return Z$c[Z$d]=(1-Z$m)*Z$e[Z$b]+Z$m*Z$k[Z$b],1},Z$u._QuaternionInterpolation_1=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){var Z$m=0===Z$j?0:Z$f/Z$j;return Z$o.slerpQuaternionArray(Z$e,Z$b,Z$k,Z$b,Z$m,Z$c,Z$d),4},Z$u._AngleInterpolation_2=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){return 0},Z$u._RadiansInterpolation_3=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){return 0},Z$u._Matrix4x4Interpolation_4=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){for(var Z$m=0;Z$m<16;Z$m++,Z$b++)Z$c[Z$d+Z$m]=Z$e[Z$b]+Z$f*Z$i[Z$b];return 16},Z$u._NoInterpolation_5=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l){return Z$c[Z$d]=Z$e[Z$b],1},Z$u._BezierInterpolation_6=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m){return void 0===Z$m&&(Z$m=0),Z$c[Z$d]=Z$e[Z$b]+(Z$k[Z$b]-Z$e[Z$b])*Z$A.getBezierRate(Z$f/Z$j,Z$l[Z$m],Z$l[Z$m+1],Z$l[Z$m+2],Z$l[Z$m+3]),5},Z$u._BezierInterpolation_7=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f,Z$i,Z$j,Z$k,Z$l,Z$m){return void 0===Z$m&&(Z$m=0),Z$c[Z$d]=Z$l[Z$m+4]+Z$l[Z$m+5]*Z$A.getBezierRate((.001*Z$f+Z$l[Z$m+6])/Z$l[Z$m+7],Z$l[Z$m],Z$l[Z$m+1],Z$l[Z$m+2],Z$l[Z$m+3]),9},Z$u.load=function(Z$a){return Z$ea.loader.create(Z$a,null,null,Z$u)},Z$u.interpolation=[Z$u._LinearInterpolation_0,Z$u._QuaternionInterpolation_1,Z$u._AngleInterpolation_2,Z$u._RadiansInterpolation_3,Z$u._Matrix4x4Interpolation_4,Z$u._NoInterpolation_5,Z$u._BezierInterpolation_6,Z$u._BezierInterpolation_7],Z$u}(),Z$C=function(Z$b){function Z$c(Z$a,Z$b){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,Z$c.__super.call(this),void 0===Z$b&&(Z$b=0),Z$a&&this.init(Z$a,Z$b)}Z$d(Z$c,"laya.ani.bone.Skeleton",Z$b);var Z$a=Z$c.prototype;return Z$a.init=function(Z$a,Z$b){void 0===Z$b&&(Z$b=0);var Z$c,Z$d,Z$e,Z$f=0,Z$i=0;if(1==Z$b)for(this._graphicsCache=[],Z$f=0,Z$i=Z$a.getAnimationCount();Z$f<Z$i;Z$f++)this._graphicsCache.push([]);if(this._yReverseMatrix=Z$a.yReverseMatrix,this._aniMode=Z$b,this._templet=Z$a,this._player=new Z$B,this._player.cacheFrameRate=Z$a.rate,this._player.templet=Z$a,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=Z$a.mBoneArr,this._rootBone=Z$a.mRootBone,this._aniSectionDic=Z$a.aniSectionDic,0<Z$a.ikArr.length)for(this._ikArr=[],Z$f=0,Z$i=Z$a.ikArr.length;Z$f<Z$i;Z$f++)this._ikArr.push(new Z$u(Z$a.ikArr[Z$f],this._boneList));if(0<Z$a.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),Z$f=0,Z$i=Z$a.pathArr.length;Z$f<Z$i;Z$f++)Z$c=Z$a.pathArr[Z$f],Z$d=new Z$x(Z$c,this._boneList),(Z$e=this._boneSlotDic[Z$c.name])&&((Z$d=new Z$x(Z$c,this._boneList)).target=Z$e),this._pathDic[Z$c.name]=Z$d;if(0<Z$a.tfArr.length)for(this._tfArr=[],Z$f=0,Z$i=Z$a.tfArr.length;Z$f<Z$i;Z$f++)this._tfArr.push(new Z$y(Z$a.tfArr[Z$f],this._boneList));if(0<Z$a.skinDataArray.length){var Z$j=this._templet.skinDataArray[this._skinIndex];this._skinName=Z$j.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},Z$a.load=function(Z$a,Z$b,Z$c){},Z$a._onLoaded=function(){},Z$a._parseComplete=function(){var Z$a=Z$D.TEMPLET_DICTIONARY[this._aniPath];Z$a&&(this.init(Z$a,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},Z$a._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},Z$a._onPlay=function(){this.event("played")},Z$a._onStop=function(){var Z$a,Z$b=this._templet.eventAniArr[this._aniClipIndex];if(Z$b&&this._eventIndex<Z$b.length)for(;this._eventIndex<Z$b.length;this._eventIndex++)(Z$a=Z$b[this._eventIndex]).time>=this._player.playStart&&Z$a.time<=this._player.playEnd&&this.event("label",Z$a);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},Z$a._onPause=function(){this.event("paused")},Z$a._parseSrcBoneMatrix=function(){var Z$a=0,Z$b=0;for(Z$b=this._templet.srcBoneMatrixArr.length,Z$a=0;Z$a<Z$b;Z$a++)this._boneMatrixArray.push(new Z$Ga);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var Z$c,Z$d,Z$e=this._templet.boneSlotArray;for(Z$a=0,Z$b=Z$e.length;Z$a<Z$b;Z$a++)Z$c=Z$e[Z$a],null==(Z$d=this._bindBoneBoneSlotDic[Z$c.parent])&&(this._bindBoneBoneSlotDic[Z$c.parent]=Z$d=[]),this._boneSlotDic[Z$c.name]=Z$c=Z$c.copy(),Z$d.push(Z$c),this._boneSlotArray.push(Z$c)}},Z$a._emitMissedEvents=function(Z$a,Z$b,Z$c){void 0===Z$c&&(Z$c=0);var Z$d=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(Z$d){var Z$e,Z$f,Z$i=0;for(Z$e=Z$d.length,Z$i=Z$c;Z$i<Z$e;Z$i++)(Z$f=Z$d[Z$i]).time>=this._player.playStart&&Z$f.time<=this._player.playEnd&&this.event("label",Z$f)}},Z$a._update=function(Z$a){if(void 0===Z$a&&(Z$a=!0),!(this._pause||Z$a&&this._indexControl)){var Z$b=this.timer.currTimer,Z$c=this._player.currentKeyframeIndex,Z$d=Z$b-this._lastTime;if(Z$a?this._player._update(Z$d):Z$c=-1,this._lastTime=Z$b,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<Z$d&&this._clipIndex==Z$c&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var Z$e;this._lastUpdateAniClipIndex=this._aniClipIndex,Z$c>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var Z$f,Z$i=this._templet.eventAniArr[this._aniClipIndex];if(Z$i&&this._eventIndex<Z$i.length&&((Z$e=Z$i[this._eventIndex]).time>=this._player.playStart&&Z$e.time<=this._player.playEnd?this._player.currentPlayTime>=Z$e.time&&(this.event("label",Z$e),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(Z$f=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=Z$f&&(this.graphics=Z$f));var Z$j=0,Z$k=0;for(Z$k=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,Z$k-1)&&0<Z$k;)Z$k--;if(Z$k<this._clipIndex)for(Z$j=Z$k;Z$j<this._clipIndex;Z$j++)this._createGraphics(Z$j)}else if(1==this._aniMode){if(Z$f=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=Z$f&&(this.graphics=Z$f));for(Z$k=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,Z$k-1)&&0<Z$k;)Z$k--;if(Z$k<this._clipIndex)for(Z$j=Z$k;Z$j<this._clipIndex;Z$j++)this._createGraphics(Z$j)}this._createGraphics()}}},Z$a._createGraphics=function(Z$a){void 0===Z$a&&(Z$a=-1),-1==Z$a&&(Z$a=this._clipIndex);var Z$b,Z$c,Z$d=Z$a*this._player.cacheFrameRateInterval,Z$e=this._templet.drawOrderAniArr[this._aniClipIndex];if(Z$e&&0<Z$e.length)for(this._drawOrderIndex=0,Z$b=Z$e[this._drawOrderIndex];Z$d>=Z$b.time&&(this._drawOrder=Z$b.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=Z$e.length));)Z$b=Z$e[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=Z$J.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=Z$J.create(),Z$c=this.graphics;var Z$f=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],Z$a,Z$d);var Z$i,Z$j,Z$k,Z$l,Z$m=this._aniSectionDic[this._aniClipIndex],Z$n=0,Z$o=0,Z$p=0,Z$q=0,Z$r=0,Z$s=this._templet.srcBoneMatrixArr.length;for(Z$r=Z$m[Z$o=0];Z$o<Z$s;Z$o++)Z$l=this._boneList[Z$o],Z$k=this._templet.srcBoneMatrixArr[Z$o],Z$l.resultTransform.scX=Z$k.scX*this._curOriginalData[Z$n++],Z$l.resultTransform.skX=Z$k.skX+this._curOriginalData[Z$n++],Z$l.resultTransform.skY=Z$k.skY+this._curOriginalData[Z$n++],Z$l.resultTransform.scY=Z$k.scY*this._curOriginalData[Z$n++],Z$l.resultTransform.x=Z$k.x+this._curOriginalData[Z$n++],Z$l.resultTransform.y=Z$k.y+this._curOriginalData[Z$n++],8===this._templet.tMatrixDataLen&&(Z$l.resultTransform.skewX=Z$k.skewX+this._curOriginalData[Z$n++],Z$l.resultTransform.skewY=Z$k.skewY+this._curOriginalData[Z$n++]);var Z$t,Z$u={},Z$v={};for(Z$r+=Z$m[1];Z$o<Z$r;Z$o++)Z$u[(Z$t=Z$f[Z$o]).name]=this._curOriginalData[Z$n++],Z$v[Z$t.name]=this._curOriginalData[Z$n++],this._curOriginalData[Z$n++],this._curOriginalData[Z$n++],this._curOriginalData[Z$n++],this._curOriginalData[Z$n++];var Z$w,Z$x,Z$y={},Z$z={};for(Z$r+=Z$m[2];Z$o<Z$r;Z$o++)Z$y[(Z$t=Z$f[Z$o]).name]=this._curOriginalData[Z$n++],Z$z[Z$t.name]=this._curOriginalData[Z$n++],this._curOriginalData[Z$n++],this._curOriginalData[Z$n++],this._curOriginalData[Z$n++],this._curOriginalData[Z$n++];if(this._pathDic)for(Z$r+=Z$m[3];Z$o<Z$r;Z$o++){if(Z$t=Z$f[Z$o],Z$w=this._pathDic[Z$t.name])switch(new Z$Fa(Z$t.extenData).getByte()){case 1:Z$w.position=this._curOriginalData[Z$n++];break;case 2:Z$w.spacing=this._curOriginalData[Z$n++];break;case 3:Z$w.rotateMix=this._curOriginalData[Z$n++],Z$w.translateMix=this._curOriginalData[Z$n++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(Z$Ga.TEMP.identity()),this._ikArr)for(Z$o=0,Z$r=this._ikArr.length;Z$o<Z$r;Z$o++)Z$x=this._ikArr[Z$o],Z$y.hasOwnProperty(Z$x.name)&&(Z$x.bendDirection=Z$y[Z$x.name]),Z$z.hasOwnProperty(Z$x.name)&&(Z$x.mix=Z$z[Z$x.name]),Z$x.apply();if(this._pathDic)for(var Z$A in this._pathDic)(Z$w=this._pathDic[Z$A]).apply(this._boneList,Z$c);if(this._tfArr)for(Z$o=0,Z$q=this._tfArr.length;Z$o<Z$q;Z$o++)this._tfArr[Z$o].apply();for(Z$o=0,Z$q=this._boneList.length;Z$o<Z$q;Z$o++)if(Z$l=this._boneList[Z$o],Z$j=this._bindBoneBoneSlotDic[Z$l.name],Z$l.resultMatrix.copyTo(this._boneMatrixArray[Z$o]),Z$j)for(Z$p=0,Z$r=Z$j.length;Z$p<Z$r;Z$p++)(Z$i=Z$j[Z$p])&&Z$i.setParentMatrix(Z$l.resultMatrix);var Z$B,Z$C,Z$D,Z$E,Z$F={},Z$G=this._templet.deformAniArr;if(Z$G&&0<Z$G.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,Z$o=0,Z$r=this._boneSlotArray.length;Z$o<Z$r;Z$o++)(Z$i=this._boneSlotArray[Z$o]).deformData=null;var Z$H,Z$I=Z$G[this._aniClipIndex];for(Z$H in Z$B=Z$I.default,this._setDeform(Z$B,Z$F,this._boneSlotArray,Z$d),Z$I)"default"!=Z$H&&Z$H!=this._skinName&&(Z$B=Z$I[Z$H],this._setDeform(Z$B,Z$F,this._boneSlotArray,Z$d));Z$B=Z$I[this._skinName],this._setDeform(Z$B,Z$F,this._boneSlotArray,Z$d)}if(this._drawOrder)for(Z$o=0,Z$r=this._drawOrder.length;Z$o<Z$r;Z$o++)Z$C=Z$u[(Z$i=this._boneSlotArray[this._drawOrder[Z$o]]).name],Z$D=Z$v[Z$i.name],isNaN(Z$D)||(Z$c.save(),Z$c.alpha(Z$D)),isNaN(Z$C)||-2==Z$C||(this._templet.attachmentNames?Z$i.showDisplayByName(this._templet.attachmentNames[Z$C]):Z$i.showDisplayByIndex(Z$C)),Z$F[this._drawOrder[Z$o]]?(Z$E=Z$F[this._drawOrder[Z$o]],Z$i.currDisplayData&&Z$E[Z$i.currDisplayData.attachmentName]?Z$i.deformData=Z$E[Z$i.currDisplayData.attachmentName]:Z$i.deformData=null):Z$i.deformData=null,isNaN(Z$D)?Z$i.draw(Z$c,this._boneMatrixArray,2==this._aniMode):Z$i.draw(Z$c,this._boneMatrixArray,2==this._aniMode,Z$D),isNaN(Z$D)||Z$c.restore();else for(Z$o=0,Z$r=this._boneSlotArray.length;Z$o<Z$r;Z$o++)Z$C=Z$u[(Z$i=this._boneSlotArray[Z$o]).name],Z$D=Z$v[Z$i.name],isNaN(Z$D)||(Z$c.save(),Z$c.alpha(Z$D)),isNaN(Z$C)||-2==Z$C||(this._templet.attachmentNames?Z$i.showDisplayByName(this._templet.attachmentNames[Z$C]):Z$i.showDisplayByIndex(Z$C)),Z$F[Z$o]?(Z$E=Z$F[Z$o],Z$i.currDisplayData&&Z$E[Z$i.currDisplayData.attachmentName]?Z$i.deformData=Z$E[Z$i.currDisplayData.attachmentName]:Z$i.deformData=null):Z$i.deformData=null,isNaN(Z$D)?Z$i.draw(Z$c,this._boneMatrixArray,2==this._aniMode):Z$i.draw(Z$c,this._boneMatrixArray,2==this._aniMode,Z$D),isNaN(Z$D)||Z$c.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,Z$a,Z$c):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,Z$a,Z$c)},Z$a._setDeform=function(Z$a,Z$b,Z$c,Z$d){if(Z$a){var Z$e,Z$f,Z$i,Z$j=0,Z$k=0,Z$l=0;if(Z$a)for(Z$j=0,Z$k=Z$a.deformSlotDataList.length;Z$j<Z$k;Z$j++)for(Z$e=Z$a.deformSlotDataList[Z$j],Z$l=0;Z$l<Z$e.deformSlotDisplayList.length;Z$l++)Z$i=Z$c[(Z$f=Z$e.deformSlotDisplayList[Z$l]).slotIndex],Z$f.apply(Z$d,Z$i),Z$b[Z$f.slotIndex]||(Z$b[Z$f.slotIndex]={}),Z$b[Z$f.slotIndex][Z$f.attachment]=Z$f.deformData}},Z$a.getAnimNum=function(){return this._templet.getAnimationCount()},Z$a.getAniNameByIndex=function(Z$a){return this._templet.getAniNameByIndex(Z$a)},Z$a.getSlotByName=function(Z$a){return this._boneSlotDic[Z$a]},Z$a.showSkinByName=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(Z$a),Z$b)},Z$a.showSkinByIndex=function(Z$a,Z$b){void 0===Z$b&&(Z$b=!0);for(var Z$c=0;Z$c<this._boneSlotArray.length;Z$c++)this._boneSlotArray[Z$c].showSlotData(null,Z$b);if(this._templet.showSkinByIndex(this._boneSlotDic,Z$a,Z$b)){var Z$d=this._templet.skinDataArray[Z$a];this._skinIndex=Z$a,this._skinName=Z$d.name}this._clearCache()},Z$a.showSlotSkinByIndex=function(Z$a,Z$b){if(0!=this._aniMode){var Z$c=this.getSlotByName(Z$a);Z$c&&Z$c.showDisplayByIndex(Z$b),this._clearCache()}},Z$a.showSlotSkinByName=function(Z$a,Z$b){if(0!=this._aniMode){var Z$c=this.getSlotByName(Z$a);Z$c&&Z$c.showDisplayByName(Z$b),this._clearCache()}},Z$a.replaceSlotSkinName=function(Z$a,Z$b,Z$c){if(0!=this._aniMode){var Z$d=this.getSlotByName(Z$a);Z$d&&Z$d.replaceDisplayByName(Z$b,Z$c),this._clearCache()}},Z$a.replaceSlotSkinByIndex=function(Z$a,Z$b,Z$c){if(0!=this._aniMode){var Z$d=this.getSlotByName(Z$a);Z$d&&Z$d.replaceDisplayByIndex(Z$b,Z$c),this._clearCache()}},Z$a.setSlotSkin=function(Z$a,Z$b){if(0!=this._aniMode){var Z$c=this.getSlotByName(Z$a);Z$c&&Z$c.replaceSkin(Z$b),this._clearCache()}},Z$a._clearCache=function(){if(1==this._aniMode)for(var Z$a=0,Z$b=this._graphicsCache.length;Z$a<Z$b;Z$a++){for(var Z$c=0,Z$d=this._graphicsCache[Z$a].length;Z$c<Z$d;Z$c++){var Z$e=this._graphicsCache[Z$a][Z$c];Z$e!=this.graphics&&Z$J.recycle(Z$e)}this._graphicsCache[Z$a].length=0}},Z$a.play=function(Z$a,Z$b,Z$c,Z$d,Z$e,Z$f){void 0===Z$c&&(Z$c=!0),void 0===Z$d&&(Z$d=0),void 0===Z$e&&(Z$e=0),void 0===Z$f&&(Z$f=!0),this._indexControl=!1;var Z$i=-1,Z$j=NaN;if(Z$j=Z$b?2147483647:0,"string"==typeof Z$a)for(var Z$k=0,Z$l=this._templet.getAnimationCount();Z$k<Z$l;Z$k++){var Z$m=this._templet.getAnimation(Z$k);if(Z$m&&Z$a==Z$m.name){Z$i=Z$k;break}}else Z$i=Z$a;-1<Z$i&&Z$i<this.getAnimNum()&&(this._aniClipIndex=Z$i,(Z$c||this._pause||this._currAniIndex!=Z$i)&&(this._currAniIndex=Z$i,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(Z$i)),this._drawOrder=null,this._eventIndex=0,this._player.play(Z$i,this._player.playbackRate,Z$j,Z$d,Z$e),Z$f&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=Z$n.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},Z$a.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},Z$a.playbackRate=function(Z$a){this._player&&(this._player.playbackRate=Z$a)},Z$a.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},Z$a.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=Z$n.now(),this.timer.frameLoop(1,this,this._update,null,!0))},Z$a._getGrahicsDataWithCache=function(Z$a,Z$b){return this._graphicsCache[Z$a][Z$b]},Z$a._setGrahicsDataWithCache=function(Z$a,Z$b,Z$c){this._graphicsCache[Z$a][Z$b]=Z$c},Z$a.destroy=function(Z$a){void 0===Z$a&&(Z$a=!0),Z$b.prototype.destroy.call(this,Z$a),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},Z$f(0,Z$a,"url",function(){return this._aniPath},function(Z$a){this.load(Z$a)}),Z$f(0,Z$a,"index",function(){return this._index},function(Z$a){this.player&&(this._index=Z$a,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),Z$f(0,Z$a,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),Z$f(0,Z$a,"templet",function(){return this._templet}),Z$f(0,Z$a,"player",function(){return this._player}),Z$c.useSimpleMeshInCanvas=!1,Z$c}(Z$fa),Z$D=function(Z$b){function Z$e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,Z$e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}Z$d(Z$e,"laya.ani.bone.Templet",Z$b);var Z$a=Z$e.prototype;return Z$a.getLoadList=function(){return this._loadList},Z$a.loadAni=function(Z$a){this._skBufferUrl=Z$a,Z$ea.loader.load(Z$a,Z$k.create(this,this.onComplete),null,"arraybuffer")},Z$a.onComplete=function(Z$a){if(this._isDestroyed)this.destroy();else{var Z$b=Z$l.getRes(this._skBufferUrl);Z$b?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,Z$b)):this.event("error","load failed:"+this._skBufferUrl)}},Z$a.parseData=function(Z$a,Z$b,Z$c){void 0===Z$c&&(Z$c=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=Z$a,this._mainTexture&&Z$s.isWebGL&&Z$a.bitmap&&(Z$a.bitmap.enableMerageInAtlas=!1),this._rate=Z$c,this.parse(Z$b)},Z$a.buildArmature=function(Z$a){return void 0===Z$a&&(Z$a=0),new Z$C(this,Z$a)},Z$a.parse=function(Z$a){Z$b.prototype.parse.call(this,Z$a),this._endLoaded(),this._aniVersion!=Z$e.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+Z$e.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},Z$a._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var Z$a=0;this._loadList=[];var Z$b,Z$c=new Z$Fa(this.getPublicExtData()),Z$d=0,Z$e=0,Z$f=0,Z$i=Z$c.getInt32(),Z$j=Z$c.readUTFString(),Z$k=Z$j.split("\n");for(Z$a=0;Z$a<Z$i;Z$a++)Z$b=this._path+Z$k[2*Z$a],Z$j=Z$k[2*Z$a+1],Z$c.getFloat32(),Z$c.getFloat32(),Z$d=Z$c.getFloat32(),Z$e=Z$c.getFloat32(),Z$f=Z$c.getFloat32(),isNaN(Z$f)?0:Z$f,Z$f=Z$c.getFloat32(),isNaN(Z$f)?0:Z$f,Z$f=Z$c.getFloat32(),isNaN(Z$f)?Z$d:Z$f,Z$f=Z$c.getFloat32(),isNaN(Z$f)?Z$e:Z$f,-1==this._loadList.indexOf(Z$b)&&this._loadList.push(Z$b);this.event("inited",this)}},Z$a._textureComplete=function(){for(var Z$a,Z$b,Z$c=0,Z$d=this._loadList.length;Z$c<Z$d;Z$c++)Z$b=this._loadList[Z$c],Z$a=this._textureDic[Z$b]=Z$l.getRes(Z$b),Z$s.isWebGL&&Z$a&&Z$a.bitmap&&(Z$a.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},Z$a._parsePublicExtData=function(){var Z$a=0,Z$b=0,Z$c=0,Z$d=0,Z$e=0;for(Z$a=0,Z$e=this.getAnimationCount();Z$a<Z$e;Z$a++)this._graphicsCache.push([]);var Z$f;Z$f="Dragon"!=this._aniClassName;var Z$i,Z$j,Z$k=new Z$Fa(this.getPublicExtData()),Z$l=0,Z$m=0,Z$n=0,Z$o=0,Z$p=0,Z$q=0,Z$r=0,Z$s=0,Z$t=0,Z$u=Z$k.getInt32(),Z$v=Z$k.readUTFString(),Z$w=Z$v.split("\n");for(Z$a=0;Z$a<Z$u;Z$a++){if(Z$i=this._mainTexture,Z$j=this._path+Z$w[2*Z$a],Z$v=Z$w[2*Z$a+1],null==this._mainTexture&&(Z$i=this._textureDic[Z$j]),!Z$i)return this.event("error",this),void(this.isParseFail=!0);Z$l=Z$k.getFloat32(),Z$m=Z$k.getFloat32(),Z$n=Z$k.getFloat32(),Z$o=Z$k.getFloat32(),Z$t=Z$k.getFloat32(),Z$p=isNaN(Z$t)?0:Z$t,Z$t=Z$k.getFloat32(),Z$q=isNaN(Z$t)?0:Z$t,Z$t=Z$k.getFloat32(),Z$r=isNaN(Z$t)?Z$n:Z$t,Z$t=Z$k.getFloat32(),Z$s=isNaN(Z$t)?Z$o:Z$t,this.subTextureDic[Z$v]=Z$Ha.create(Z$i,Z$l,Z$m,Z$n,Z$o,-Z$p,-Z$q,Z$r,Z$s),Z$i.alphaTexture&&(this.subTextureDic[Z$v].alphaTexture=Z$Ha.create(Z$i.alphaTexture,Z$l,Z$m,Z$n,Z$o,-Z$p,-Z$q,Z$r,Z$s))}this._mainTexture=Z$i;var Z$x,Z$y,Z$z,Z$A,Z$B,Z$C=Z$k.getUint16();for(Z$a=0;Z$a<Z$C;Z$a++)(Z$x=[]).push(Z$k.getUint16()),Z$x.push(Z$k.getUint16()),Z$x.push(Z$k.getUint16()),Z$x.push(Z$k.getUint16()),this.aniSectionDic[Z$a]=Z$x;var Z$D,Z$E=Z$k.getInt16(),Z$F={};for(Z$a=0;Z$a<Z$E;Z$a++)Z$y=new Z$Ia,0==Z$a?Z$D=Z$y:Z$y.root=Z$D,Z$y.d=Z$f?-1:1,Z$A=Z$k.readUTFString(),Z$B=Z$k.readUTFString(),Z$y.length=Z$k.getFloat32(),1==Z$k.getByte()&&(Z$y.inheritRotation=!1),1==Z$k.getByte()&&(Z$y.inheritScale=!1),Z$y.name=Z$A,Z$B&&((Z$z=Z$F[Z$B])?Z$z.addChild(Z$y):this.mRootBone=Z$y),Z$F[Z$A]=Z$y,this.mBoneArr.push(Z$y);this.tMatrixDataLen=Z$k.getUint16();var Z$G,Z$H,Z$I=Z$k.getUint16(),Z$J=Math.floor(Z$I/this.tMatrixDataLen),Z$K=this.srcBoneMatrixArr;for(Z$a=0;Z$a<Z$J;Z$a++)(Z$G=new Z$Va).scX=Z$k.getFloat32(),Z$G.skX=Z$k.getFloat32(),Z$G.skY=Z$k.getFloat32(),Z$G.scY=Z$k.getFloat32(),Z$G.x=Z$k.getFloat32(),Z$G.y=Z$k.getFloat32(),8===this.tMatrixDataLen&&(Z$G.skewX=Z$k.getFloat32(),Z$G.skewY=Z$k.getFloat32()),Z$K.push(Z$G),(Z$y=this.mBoneArr[Z$a]).transform=Z$G;var Z$L,Z$M=Z$k.getUint16(),Z$N=0;for(Z$a=0;Z$a<Z$M;Z$a++){for(Z$H=new Z$Pa,Z$N=Z$k.getUint16(),Z$b=0;Z$b<Z$N;Z$b++)Z$H.boneNames.push(Z$k.readUTFString()),Z$H.boneIndexs.push(Z$k.getInt16());Z$H.name=Z$k.readUTFString(),Z$H.targetBoneName=Z$k.readUTFString(),Z$H.targetBoneIndex=Z$k.getInt16(),Z$H.bendDirection=Z$k.getFloat32(),Z$H.mix=Z$k.getFloat32(),Z$H.isSpine=Z$f,this.ikArr.push(Z$H)}var Z$O,Z$P=Z$k.getUint16(),Z$Q=0;for(Z$a=0;Z$a<Z$P;Z$a++){for(Z$L=new Z$Ua,Z$Q=Z$k.getUint16(),Z$b=0;Z$b<Z$Q;Z$b++)Z$L.boneIndexs.push(Z$k.getInt16());Z$L.name=Z$k.getUTFString(),Z$L.targetIndex=Z$k.getInt16(),Z$L.rotateMix=Z$k.getFloat32(),Z$L.translateMix=Z$k.getFloat32(),Z$L.scaleMix=Z$k.getFloat32(),Z$L.shearMix=Z$k.getFloat32(),Z$L.offsetRotation=Z$k.getFloat32(),Z$L.offsetX=Z$k.getFloat32(),Z$L.offsetY=Z$k.getFloat32(),Z$L.offsetScaleX=Z$k.getFloat32(),Z$L.offsetScaleY=Z$k.getFloat32(),Z$L.offsetShearY=Z$k.getFloat32(),this.tfArr.push(Z$L)}var Z$R=Z$k.getUint16(),Z$S=0;for(Z$a=0;Z$a<Z$R;Z$a++){for((Z$O=new Z$Qa).name=Z$k.readUTFString(),Z$S=Z$k.getUint16(),Z$b=0;Z$b<Z$S;Z$b++)Z$O.bones.push(Z$k.getInt16());Z$O.target=Z$k.readUTFString(),Z$O.positionMode=Z$k.readUTFString(),Z$O.spacingMode=Z$k.readUTFString(),Z$O.rotateMode=Z$k.readUTFString(),Z$O.offsetRotation=Z$k.getFloat32(),Z$O.position=Z$k.getFloat32(),Z$O.spacing=Z$k.getFloat32(),Z$O.rotateMix=Z$k.getFloat32(),Z$O.translateMix=Z$k.getFloat32(),this.pathArr.push(Z$O)}var Z$T,Z$U,Z$V,Z$W,Z$X,Z$Y=0,Z$Z=0,Z$$=0,Z$_=NaN,Z$g=0,Z$h=Z$k.getInt16();for(Z$a=0;Z$a<Z$h;Z$a++){var Z$aa=Z$k.getUint8(),Z$ba={};this.deformAniArr.push(Z$ba);for(var Z$ca=0;Z$ca<Z$aa;Z$ca++)for((Z$T=new Z$Ka).skinName=Z$k.getUTFString(),Z$ba[Z$T.skinName]=Z$T,Z$Y=Z$k.getInt16(),Z$b=0;Z$b<Z$Y;Z$b++)for(Z$U=new Z$La,Z$T.deformSlotDataList.push(Z$U),Z$Z=Z$k.getInt16(),Z$c=0;Z$c<Z$Z;Z$c++)for(Z$V=new Z$Ma,Z$U.deformSlotDisplayList.push(Z$V),Z$V.slotIndex=Z$k.getInt16(),Z$V.attachment=Z$k.getUTFString(),Z$$=Z$k.getInt16(),Z$d=0;Z$d<Z$$;Z$d++)for(1==Z$k.getByte()?Z$V.tweenKeyList.push(!0):Z$V.tweenKeyList.push(!1),Z$_=Z$k.getFloat32(),Z$V.timeList.push(Z$_),Z$W=[],Z$V.vectices.push(Z$W),Z$g=Z$k.getInt16(),Z$e=0;Z$e<Z$g;Z$e++)Z$W.push(Z$k.getFloat32())}var Z$da,Z$ea,Z$fa=Z$k.getInt16(),Z$ia=0,Z$ja=0;for(Z$a=0;Z$a<Z$fa;Z$a++){for(Z$ia=Z$k.getInt16(),Z$X=[],Z$b=0;Z$b<Z$ia;Z$b++){for((Z$da=new Z$Na).time=Z$k.getFloat32(),Z$ja=Z$k.getInt16(),Z$c=0;Z$c<Z$ja;Z$c++)Z$da.drawOrder.push(Z$k.getInt16());Z$X.push(Z$da)}this.drawOrderAniArr.push(Z$X)}var Z$ka,Z$la=Z$k.getInt16(),Z$ma=0;for(Z$a=0;Z$a<Z$la;Z$a++){for(Z$ma=Z$k.getInt16(),Z$ea=[],Z$b=0;Z$b<Z$ma;Z$b++)(Z$ka=new Z$Oa).name=Z$k.getUTFString(),Z$ka.intValue=Z$k.getInt32(),Z$ka.floatValue=Z$k.getFloat32(),Z$ka.stringValue=Z$k.getUTFString(),Z$ka.time=Z$k.getFloat32(),Z$ea.push(Z$ka);this.eventAniArr.push(Z$ea)}var Z$na=Z$k.getInt16();if(0<Z$na)for(this.attachmentNames=[],Z$a=0;Z$a<Z$na;Z$a++)this.attachmentNames.push(Z$k.getUTFString());var Z$oa,Z$pa,Z$qa=Z$k.getInt16();for(Z$a=0;Z$a<Z$qa;Z$a++)(Z$oa=new Z$Ja).name=Z$k.readUTFString(),Z$oa.parent=Z$k.readUTFString(),Z$oa.attachmentName=Z$k.readUTFString(),Z$oa.srcDisplayIndex=Z$oa.displayIndex=Z$k.getInt16(),(Z$oa.templet=this).boneSlotDic[Z$oa.name]=Z$oa,null==(Z$pa=this.bindBoneBoneSlotDic[Z$oa.parent])&&(this.bindBoneBoneSlotDic[Z$oa.parent]=Z$pa=[]),Z$pa.push(Z$oa),this.boneSlotArray.push(Z$oa);var Z$ra,Z$sa,Z$ta,Z$ua=Z$k.readUTFString().split("\n"),Z$va=0,Z$wa=Z$k.getUint8(),Z$xa=0,Z$ya=0,Z$za=0,Z$Aa=0,Z$Ba=0,Z$Ca=0,Z$Da=0;for(Z$a=0;Z$a<Z$wa;Z$a++){for((Z$ra=new Z$Ra).name=Z$ua[Z$va++],Z$xa=Z$k.getUint8(),Z$b=0;Z$b<Z$xa;Z$b++){for((Z$sa=new Z$Ta).name=Z$ua[Z$va++],Z$oa=this.boneSlotDic[Z$sa.name],Z$ya=Z$k.getUint8(),Z$c=0;Z$c<Z$ya;Z$c++){if(Z$ta=new Z$Sa,this.skinSlotDisplayDataArr.push(Z$ta),Z$ta.name=Z$ua[Z$va++],Z$ta.attachmentName=Z$ua[Z$va++],Z$ta.transform=new Z$Va,Z$ta.transform.scX=Z$k.getFloat32(),Z$ta.transform.skX=Z$k.getFloat32(),Z$ta.transform.skY=Z$k.getFloat32(),Z$ta.transform.scY=Z$k.getFloat32(),Z$ta.transform.x=Z$k.getFloat32(),Z$ta.transform.y=Z$k.getFloat32(),Z$sa.displayArr.push(Z$ta),Z$ta.width=Z$k.getFloat32(),Z$ta.height=Z$k.getFloat32(),Z$ta.type=Z$k.getUint8(),Z$ta.verLen=Z$k.getUint16(),0<(Z$E=Z$k.getUint16()))for(Z$ta.bones=[],Z$d=0;Z$d<Z$E;Z$d++){var Z$Ea=Z$k.getUint16();Z$ta.bones.push(Z$Ea)}if(0<(Z$za=Z$k.getUint16()))for(Z$ta.uvs=[],Z$d=0;Z$d<Z$za;Z$d++)Z$ta.uvs.push(Z$k.getFloat32());if(0<(Z$Aa=Z$k.getUint16()))for(Z$ta.weights=[],Z$d=0;Z$d<Z$Aa;Z$d++)Z$ta.weights.push(Z$k.getFloat32());if(0<(Z$Ba=Z$k.getUint16()))for(Z$ta.triangles=[],Z$d=0;Z$d<Z$Ba;Z$d++)Z$ta.triangles.push(Z$k.getUint16());if(0<(Z$Ca=Z$k.getUint16()))for(Z$ta.vertices=[],Z$d=0;Z$d<Z$Ca;Z$d++)Z$ta.vertices.push(Z$k.getFloat32());if(0<(Z$Da=Z$k.getUint16()))for(Z$ta.lengths=[],Z$d=0;Z$d<Z$Da;Z$d++)Z$ta.lengths.push(Z$k.getFloat32())}Z$ra.slotArr.push(Z$sa)}this.skinDic[Z$ra.name]=Z$ra,this.skinDataArray.push(Z$ra)}1==Z$k.getUint8()?(this.yReverseMatrix=new Z$Ga(1,0,0,-1,0,0),Z$D&&Z$D.setTempMatrix(this.yReverseMatrix)):Z$D&&Z$D.setTempMatrix(new Z$Ga),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},Z$a.getTexture=function(Z$a){var Z$b=this.subTextureDic[Z$a];return Z$b||(Z$b=this.subTextureDic[Z$a.substr(0,Z$a.length-1)]),null==Z$b?this._mainTexture:Z$b},Z$a.showSkinByIndex=function(Z$a,Z$b,Z$c){if(void 0===Z$c&&(Z$c=!0),Z$b<0&&Z$b>=this.skinDataArray.length)return!1;var Z$d,Z$e,Z$f=0,Z$i=0,Z$j=this.skinDataArray[Z$b];if(Z$j){for(Z$f=0,Z$i=Z$j.slotArr.length;Z$f<Z$i;Z$f++)(Z$e=Z$j.slotArr[Z$f])&&(Z$d=Z$a[Z$e.name])&&(Z$d.showSlotData(Z$e,Z$c),Z$c&&"undefined"!=Z$d.attachmentName&&"null"!=Z$d.attachmentName?Z$d.showDisplayByName(Z$d.attachmentName):Z$d.showDisplayByIndex(Z$d.displayIndex));return!0}return!1},Z$a.getSkinIndexByName=function(Z$a){for(var Z$b=0,Z$c=this.skinDataArray.length;Z$b<Z$c;Z$b++)if(this.skinDataArray[Z$b].name==Z$a)return Z$b;return-1},Z$a.getGrahicsDataWithCache=function(Z$a,Z$b){return this._graphicsCache[Z$a][Z$b]},Z$a.setGrahicsDataWithCache=function(Z$a,Z$b,Z$c){this._graphicsCache[Z$a][Z$b]=Z$c},Z$a.destroy=function(){var Z$a;for(var Z$b in this._isDestroyed=!0,this.subTextureDic)(Z$a=this.subTextureDic[Z$b])&&Z$a.destroy();for(Z$b in this._textureDic)(Z$a=this._textureDic[Z$b])&&Z$a.destroy();for(var Z$c=0,Z$d=this.skinSlotDisplayDataArr.length;Z$c<Z$d;Z$c++)this.skinSlotDisplayDataArr[Z$c].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete Z$e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},Z$a.getAniNameByIndex=function(Z$a){var Z$b=this.getAnimation(Z$a);return Z$b?Z$b.name:null},Z$f(0,Z$a,"rate",function(){return this._rate},function(Z$a){this._rate=Z$a}),Z$e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",Z$e.TEMPLET_DICTIONARY=null,Z$e}(Z$K)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(Z$a,Z$b){"use strict";for(var Z$c in Object.defineProperty(Z$b,"__esModule",{value:!0}),Laya){var Z$d=Laya[Z$c];Z$d&&Z$d.__isclass&&(Z$b[Z$c]=Z$d)}});