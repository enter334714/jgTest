var Laya=window.Laya=function(F$A,F$J){var F$$={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(F$J,F$y){return 1==arguments.length?F$$.__presubstr.call(this,F$J):F$$.__presubstr.call(this,F$J,0<F$y?F$y:this.length+F$y)},__init:function(F$J){F$J.forEach(function(F$J){F$J.__init$&&F$J.__init$()})},__isClass:function(F$J){return F$J&&(F$J.__isclass||F$J==Object||F$J==String||F$J==Array)},__newvec:function(F$J,F$y){var F$T=[];F$T.length=F$J;for(var F$V=0;F$V<F$J;F$V++)F$T[F$V]=F$y;return F$T},__extend:function(F$J,F$y){for(var F$T in F$y)if(F$y.hasOwnProperty(F$T)){var F$V=Object.getOwnPropertyDescriptor(F$y,F$T),F$Z=F$V.get,F$m=F$V.set;F$Z||F$m?F$Z&&F$m?Object.defineProperty(F$J,F$T,F$V):(F$Z&&Object.defineProperty(F$J,F$T,F$Z),F$m&&Object.defineProperty(F$J,F$T,F$m)):F$J[F$T]=F$y[F$T]}function F$R(){F$$.un(this,"constructor",F$J)}F$R.prototype=F$y.prototype,F$J.prototype=new F$R,F$$.un(F$J.prototype,"__imps",F$$.__copy({},F$y.prototype.__imps))},__copy:function(F$J,F$y){if(!F$y)return null;for(var F$T in F$J=F$J||{},F$y)F$J[F$T]=F$y[F$T];return F$J},__package:function(F$J,F$y){if(!F$$.__packages[F$J]){F$$.__packages[F$J]=!0;var F$T=F$A,F$V=F$J.split(".");if(1<F$V.length)for(var F$Z=0,F$m=F$V.length-1;F$Z<F$m;F$Z++){var F$R=F$T[F$V[F$Z]];F$T=F$R||(F$T[F$V[F$Z]]={})}F$T[F$V[F$V.length-1]]||(F$T[F$V[F$V.length-1]]=F$y||{})}},__hasOwnProperty:function(F$J,F$y){return F$y=F$y||this,Object.hasOwnProperty.call(F$y,F$J)||function F$J(F$y,F$T){if(Object.hasOwnProperty.call(F$T.prototype,F$y))return!0;var F$V=F$T.prototype.__super;return null==F$V?null:F$J(F$y,F$V)}(F$J,F$y.__class)},__typeof:function(F$J,F$y){if(!F$J||!F$y)return!1;if(F$y===String)return"string"==typeof F$J;if(F$y===Number)return"number"==typeof F$J;if(F$y.__interface__)F$y=F$y.__interface__;else if("string"!=typeof F$y)return F$J instanceof F$y;return F$J.__imps&&F$J.__imps[F$y]||F$J.__class==F$y},__as:function(F$J,F$y){return this.__typeof(F$J,F$y)?F$J:null},__int:function(F$J){return F$J?parseInt(F$J):0},interface:function(F$J,F$y){F$$.__package(F$J,{});var F$T=F$$.__internals,F$V=F$T[F$J]=F$T[F$J]||{self:F$J};if(F$y){var F$Z=F$y.split(",");F$V.extend=[];for(var F$m=0;F$m<F$Z.length;F$m++){var F$R=F$Z[F$m];F$T[F$R]=F$T[F$R]||{self:F$R},F$V.extend.push(F$T[F$R])}}var F$n=F$A,F$K=F$J.split(".");for(F$m=0;F$m<F$K.length-1;F$m++)F$n=F$n[F$K[F$m]];F$n[F$K[F$K.length-1]]={__interface__:F$J}},class:function(F$J,F$y,F$T,F$V){if(F$T&&F$$.__extend(F$J,F$T),F$y)if(F$$.__package(F$y,F$J),F$$.__classmap[F$y]=F$J,0<F$y.indexOf(".")){if(0==F$y.indexOf("laya.")){var F$Z=F$y.split(".");F$V=F$V||F$Z[F$Z.length-1],F$$[F$V]&&console.log("Warning!,this class["+F$V+"] already exist:",F$$[F$V]),F$$[F$V]=F$J}}else"Main"==F$y?F$A.Main=F$J:"MainWX"==F$y?F$A.MainWX=F$J:(F$$[F$y]&&console.log("Error!,this class["+F$y+"] already exist:",F$$[F$y]),F$$[F$y]=F$J);var F$m=F$$.un,F$R=F$J.prototype;F$m(F$R,"hasOwnProperty",F$$.__hasOwnProperty),F$m(F$R,"__class",F$J),F$m(F$R,"__super",F$T),F$m(F$R,"__className",F$y),F$m(F$J,"__super",F$T),F$m(F$J,"__className",F$y),F$m(F$J,"__isclass",!0),F$m(F$J,"super",function(F$J){this.__super.call(F$J)})},imps:function(F$J,F$y){if(!F$y)return null;var F$Z=F$J.__imps||F$$.un(F$J,"__imps",{});function F$m(F$J){var F$y,F$T;if((F$y=F$$.__internals[F$J])&&(F$Z[F$J]=!0,F$T=F$y.extend))for(var F$V=0;F$V<F$T.length;F$V++)F$m(F$T[F$V].self)}for(var F$T in F$y)F$m(F$T)},superSet:function(F$J,F$y,F$T,F$V){var F$Z=F$J.prototype["_$set_"+F$T];F$Z&&F$Z.call(F$y,F$V)},superGet:function(F$J,F$y,F$T){var F$V=F$J.prototype["_$get_"+F$T];return F$V?F$V.call(F$y):null},getset:function(F$J,F$y,F$T,F$V,F$Z){F$J?(F$V&&(F$y["_$GET_"+F$T]=F$V),F$Z&&(F$y["_$SET_"+F$T]=F$Z)):(F$V&&F$$.un(F$y,"_$get_"+F$T,F$V),F$Z&&F$$.un(F$y,"_$set_"+F$T,F$Z)),F$V&&F$Z?Object.defineProperty(F$y,F$T,{get:F$V,set:F$Z,enumerable:!1,configurable:!0}):(F$V&&Object.defineProperty(F$y,F$T,{get:F$V,enumerable:!1,configurable:!0}),F$Z&&Object.defineProperty(F$y,F$T,{set:F$Z,enumerable:!1,configurable:!0}))},static:function(F$T,F$V){for(var F$Z=0,F$J=F$V.length;F$Z<F$J;F$Z+=2)if("length"==F$V[F$Z])F$T.length=F$V[F$Z+1].call(F$T);else{function F$y(){var F$y=F$V[F$Z],F$J=F$V[F$Z+1];Object.defineProperty(F$T,F$y,{get:function(){return delete this[F$y],this[F$y]=F$J.call(this)},set:function(F$J){delete this[F$y],this[F$y]=F$J},enumerable:!0,configurable:!0})}F$y()}},un:function(F$J,F$y,F$T){return F$T||(F$T=F$J[F$y]),F$$.__propun.value=F$T,Object.defineProperty(F$J,F$y,F$$.__propun),F$T},uns:function(F$y,F$J){F$J.forEach(function(F$J){F$$.un(F$y,F$J)})}};return F$A.console=F$A.console||{log:function(){}},F$A.trace=F$A.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),F$$}(window,document);!function(F$J,F$y,F$T){F$T.un,F$T.uns,F$T.static,F$T.class,F$T.getset,F$T.__newvec}(window,document,Laya),function(F$R,F$y,F$a){F$a.un,F$a.uns;var F$K=F$a.static,F$$=F$a.class,F$B=F$a.getset;F$a.__newvec;F$a.interface("laya.runtime.IMarket"),F$a.interface("laya.filters.IFilter"),F$a.interface("laya.display.ILayout"),F$a.interface("laya.resource.IDispose"),F$a.interface("laya.runtime.IPlatform"),F$a.interface("laya.resource.IDestroy"),F$a.interface("laya.runtime.IConchNode"),F$a.interface("laya.filters.IFilterAction"),F$a.interface("laya.runtime.ICPlatformClass"),F$a.interface("laya.resource.ICreateResource"),F$a.interface("laya.runtime.IConchRenderObject"),F$a.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var F$v=function(){function F$m(){}return F$$(F$m,"laya.utils.RunDriver"),F$m.FILTER_ACTIONS=[],F$m.pixelRatio=-1,F$m._charSizeTestDiv=null,F$m.now=function(){return Date.now()},F$m.getWindow=function(){return F$R},F$m.getPixelRatio=function(){if(F$m.pixelRatio<0){var F$J=F$f.context,F$y=F$J.backingStorePixelRatio||F$J.webkitBackingStorePixelRatio||F$J.mozBackingStorePixelRatio||F$J.msBackingStorePixelRatio||F$J.oBackingStorePixelRatio||F$J.backingStorePixelRatio||1;(F$m.pixelRatio=(F$f.window.devicePixelRatio||1)/F$y)<1&&(F$m.pixelRatio=1)}return F$m.pixelRatio},F$m.getIncludeStr=function(F$J){return null},F$m.createShaderCondition=function(F$J){var F$y="(function() {return "+F$J+";})";return F$a._runScript(F$y)},F$m.fontMap=[],F$m.measureText=function(F$J,F$y){var F$T=F$m.hanzi.test(F$J);if(F$T&&F$m.fontMap[F$y])return F$m.fontMap[F$y];var F$V=F$f.context;F$V.font=F$y;var F$Z=F$V.measureText(F$J);return F$Z||(F$Z={width:16,height:16}),F$T&&(F$m.fontMap[F$y]=F$Z),F$Z},F$m.getWebGLContext=function(F$J){},F$m.beginFlush=function(){},F$m.endFinish=function(){},F$m.addToAtlas=null,F$m.flashFlushImage=function(F$J){},F$m.drawToCanvas=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=F$LJ.create("2D"),F$n=new F$x(F$T,F$V,F$R);return F$k.renders[F$y]._fun(F$J,F$n,F$Z,F$m),F$R},F$m.createParticleTemplate2D=null,F$m.createGLTextur=null,F$m.createWebGLContext2D=null,F$m.changeWebGLSize=function(F$J,F$y){},F$m.createRenderSprite=function(F$J,F$y){return new F$k(F$J,F$y)},F$m.createFilterAction=function(F$J){return new F$L},F$m.createGraphics=function(){return new F$M},F$m.clear=function(F$J){F$u._context.ctx.clear()},F$m.cancelLoadByUrl=function(F$J){},F$m.clearAtlas=function(F$J){},F$m.isAtlas=function(F$J){return!1},F$m.addTextureToAtlas=function(F$J){},F$m.getTexturePixels=function(F$J,F$y,F$T,F$V,F$Z){return null},F$m.skinAniSprite=function(){return null},F$m.update3DLoop=function(){},F$K(F$m,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),F$m}(),F$V=(F$B(1,F$a,"alertGlobalError",null,function(F$J){var F$m=0;F$f.window.onerror=F$J?function(F$J,F$y,F$T,F$V,F$Z){F$m++<5&&F$Z&&alert(F$Z.stack||F$Z)}:null}),F$a.init=function(F$J,F$y,F$T){for(var F$V=[],F$Z=2,F$m=arguments.length;F$Z<F$m;F$Z++)F$V.push(arguments[F$Z]);if(!F$a._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=F$a._arrayBufferSlice),F$a._isinit=!0,F$f.__init__(),F$X.__init__(),F$M.__init__(),F$a.timer=new F$p,F$a.scaleTimer=new F$p,F$a.loader=new F$KJ,F$w.__init__(),F$Z=0;for(var F$R=F$V.length;F$Z<F$R;F$Z++)F$V[F$Z].enable&&F$V[F$Z].enable();return F$G.__init__(),F$n.__init__(),F$S.__init__(),F$I.beginCheck(),F$a._currentStage=F$a.stage=new F$EJ,F$a.stage.conchModel&&F$a.stage.conchModel.setRootNode(),F$a._getUrlPath(),F$a.render=new F$u(0,0),F$a.stage.size(F$J,F$y),F$k.__init__(),F$e.__init__(),F$o.instance.__init__(F$a.stage,F$u.canvas),F$PJ.__init__(),F$t.autoStopMusic=!0,F$D.__init__(),F$u.canvas}},F$a._getUrlPath=function(){var F$J=F$f.window.location,F$y=F$J.pathname;F$y=F$y&&":"==F$y.charAt(2)?F$y.substring(1):F$y,F$c.rootPath=F$c.basePath=F$c.getPath("file:"==F$J.protocol?F$y:F$J.protocol+"//"+F$J.host+F$J.pathname)},F$a._arrayBufferSlice=function(F$J,F$y){var F$T=new Uint8Array(this,F$J,F$y-F$J),F$V=new Uint8Array(F$T.length);return F$V.set(F$T),F$V.buffer},F$a._runScript=function(F$J){return F$f.window[F$a._evcode](F$J)},F$a.stage=null,F$a.timer=null,F$a.scaleTimer=null,F$a.loader=null,F$a.version="1.8.6",F$a.render=null,F$a._currentStage=null,F$a._isinit=!1,F$a.isDebug=!1,F$a.MiniAdpter={init:function(){F$R.navigator&&F$R.navigator.userAgent&&-1<F$R.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},F$K(F$a,["conchMarket",function(){return this.conchMarket=F$R.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=F$R.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function F$J(){}return F$$(F$J,"Config"),F$J.WebGLTextCacheCount=500,F$J.atlasEnable=!1,F$J.showCanvasMark=!1,F$J.animationInterval=50,F$J.isAntialias=!1,F$J.isAlpha=!1,F$J.premultipliedAlpha=!0,F$J.isStencil=!0,F$J.preserveDrawingBuffer=!1,F$J}()),F$A=function(){function F$A(){this._events=null}F$$(F$A,"laya.events.EventDispatcher");var F$J=F$A.prototype;return F$J.hasListener=function(F$J){return!!(this._events&&this._events[F$J])},F$J.getListener=function(F$J){return this._events?this._events[F$J]:null},F$J.event=function(F$J,F$y){if(!this._events||!this._events[F$J])return!1;var F$T=this._events[F$J];if(F$T.lock)F$T.queue||(F$T.queue=[]),F$T.queue.push(F$y);else{var F$V;for(F$T.lock=!0,F$T.cursor=F$T.head;F$T.cursor;)F$V=F$T.cursor,F$T.cursor=F$V.next,F$V.once&&F$A.delNode(F$T,F$V),null!=F$y?F$V.args?F$V.method.apply(F$V.caller,F$V.args.concat(F$y)):F$y instanceof Array?F$V.method.apply(F$V.caller,F$y):F$V.method.call(F$V.caller,F$y):F$V.method.apply(F$V.caller,F$V.args),F$V.once&&F$A.recoverHandler(F$V);F$T.lock=!1,!F$T.head&&this._events&&this._events[F$J]==F$T&&delete this._events[F$J],F$T.queue&&F$T.queue.length&&this.event(F$J,F$T.queue.shift())}return!0},F$J.on=function(F$J,F$y,F$T,F$V){return this._createListener(F$J,F$y,F$T,F$V,!1)},F$J.once=function(F$J,F$y,F$T,F$V){return this._createListener(F$J,F$y,F$T,F$V,!0)},F$J._createListener=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$m&&(F$m=!0),F$m&&this.off(F$J,F$y,F$T,F$Z);var F$R=F$A.createHandler(F$y||this,F$T,F$V,F$Z);this._events||(this._events={});var F$n=this._events,F$K=F$n[F$J];return F$K?F$K.tail?(F$R.prev=F$K.tail,F$K.tail.next=F$R,F$K.tail=F$R):F$K.head=F$K.tail=F$R:F$n[F$J]={head:F$R,tail:F$R,cursor:null,lock:!1},this},F$J.off=function(F$J,F$y,F$T,F$V){if(void 0===F$V&&(F$V=!1),!this._events||!this._events[F$J])return this;for(var F$Z=this._events[F$J],F$m=F$Z.head;F$m;){if((!F$y||F$m.caller===F$y)&&F$m.method===F$T&&(!F$V||F$m.once)){F$A.delNode(F$Z,F$m),F$Z.cursor==F$m&&(F$Z.cursor=F$m.next),F$A.recoverHandler(F$m);break}F$m=F$m.next}return this},F$J.offAll=function(F$J){var F$y=this._events;if(!F$y)return this;if(F$J)this._recoverHandlers(F$y[F$J]),delete F$y[F$J];else{for(var F$T in F$y)this._recoverHandlers(F$y[F$T]);this._events=null}return this},F$J._recoverHandlers=function(F$J){if(F$J){for(var F$y=F$J.head;F$y;){F$A.delNode(F$J,F$y);var F$T=F$y.next;F$A.recoverHandler(F$y),F$y=F$T}F$J.cursor=null}},F$J.isMouseEvent=function(F$J){return F$A.MOUSE_EVENTS[F$J]},F$A.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},F$A.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},F$A.delNode=function(F$J,F$y){F$y.prev?F$y.prev.next=F$y.next:F$J.head=F$y.next,F$y.next?F$y.next.prev=F$y.prev:F$J.tail=F$y.prev},F$A.createHandler=function(F$J,F$y,F$T,F$V){var F$Z=F$A._freeHandler;return F$Z?(F$A._freeCount--,F$A._freeHandler=F$Z.next,F$Z.caller=F$J,F$Z.method=F$y,F$Z.args=F$T,F$Z.once=F$V):F$Z={caller:F$J,method:F$y,args:F$T,once:F$V},F$Z.prev=F$Z.next=null,F$Z},F$A.recoverHandler=function(F$J){F$J.caller=F$J.method=F$J.args=F$J.prev=null,F$J.next=F$A._freeHandler,F$A._freeHandler=F$J,F$A._freeCount++},F$A._freeHandler=null,F$A._freeCount=0,F$A}(),F$O=function(){function F$Z(F$J,F$y,F$T,F$V){this.once=!1,void(this._id=0)===F$V&&(F$V=!1),this.setTo(F$J,F$y,F$T,F$V)}F$$(F$Z,"laya.utils.Handler");var F$J=F$Z.prototype;return F$J.setTo=function(F$J,F$y,F$T,F$V){return this._id=F$Z._gid++,this.caller=F$J,this.method=F$y,this.args=F$T,this.once=F$V,this},F$J.run=function(){if(null==this.method)return null;var F$J=this._id,F$y=this.method.apply(this.caller,this.args);return this._id===F$J&&this.once&&this.recover(),F$y},F$J.runWith=function(F$J){if(null==this.method)return null;var F$y=this._id;if(null==F$J)var F$T=this.method.apply(this.caller,this.args);else F$T=this.args||F$J.unshift?this.args?this.method.apply(this.caller,this.args.concat(F$J)):this.method.apply(this.caller,F$J):this.method.call(this.caller,F$J);return this._id===F$y&&this.once&&this.recover(),F$T},F$J.clear=function(){return this.caller=null,this.method=null,this.args=null,this},F$J.recover=function(){0<this._id&&(this._id=0,this.clear())},F$Z.create=function(F$J,F$y,F$T,F$V){return void 0===F$V&&(F$V=!0),new F$Z(F$J,F$y,F$T,F$V)},F$Z._gid=1,F$Z}(),F$_=function(){function F$J(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}F$$(F$J,"laya.display.BitmapFont");var F$y=F$J.prototype;return F$y.loadFont=function(F$J,F$y){this._path=F$J,this._complete=F$y,F$a.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],F$O.create(this,this.onLoaded))},F$y.onLoaded=function(){this.parseFont(F$nJ.getRes(this._path),F$nJ.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},F$y.parseFont=function(F$J,F$y){if(null!=F$J&&null!=F$y){this._texture=F$y;var F$T=F$J.getElementsByTagName("info");if(!F$T[0].getAttributeNode)return this.parseFont2(F$J,F$y);this.fontSize=parseInt(F$T[0].getAttributeNode("size").nodeValue);var F$V,F$Z=F$T[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(F$Z[0]),parseInt(F$Z[1]),parseInt(F$Z[2]),parseInt(F$Z[3])],F$V=F$J.getElementsByTagName("char");var F$m=0;for(F$m=0;F$m<F$V.length;F$m++){var F$R=F$V[F$m],F$n=parseInt(F$R.getAttributeNode("id").nodeValue),F$K=parseInt(F$R.getAttributeNode("xoffset").nodeValue)/1,F$A=parseInt(F$R.getAttributeNode("yoffset").nodeValue)/1,F$$=parseInt(F$R.getAttributeNode("xadvance").nodeValue)/1,F$e=new F$r;F$e.x=parseInt(F$R.getAttributeNode("x").nodeValue),F$e.y=parseInt(F$R.getAttributeNode("y").nodeValue),F$e.width=parseInt(F$R.getAttributeNode("width").nodeValue),F$e.height=parseInt(F$R.getAttributeNode("height").nodeValue);var F$M=F$$J.create(F$y,F$e.x,F$e.y,F$e.width,F$e.height,F$K,F$A);this._maxWidth=Math.max(this._maxWidth,F$$+this.letterSpacing),this._fontCharDic[F$n]=F$M,this._fontWidthMap[F$n]=F$$}}},F$y.parseFont2=function(F$J,F$y){if(null!=F$J&&null!=F$y){this._texture=F$y;var F$T=F$J.getElementsByTagName("info");this.fontSize=parseInt(F$T[0].attributes.size.nodeValue);var F$V=F$T[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(F$V[0]),parseInt(F$V[1]),parseInt(F$V[2]),parseInt(F$V[3])];var F$Z=F$J.getElementsByTagName("char"),F$m=0;for(F$m=0;F$m<F$Z.length;F$m++){var F$R=F$Z[F$m].attributes,F$n=parseInt(F$R.id.nodeValue),F$K=parseInt(F$R.xoffset.nodeValue)/1,F$A=parseInt(F$R.yoffset.nodeValue)/1,F$$=parseInt(F$R.xadvance.nodeValue)/1,F$e=new F$r;F$e.x=parseInt(F$R.x.nodeValue),F$e.y=parseInt(F$R.y.nodeValue),F$e.width=parseInt(F$R.width.nodeValue),F$e.height=parseInt(F$R.height.nodeValue);var F$M=F$$J.create(F$y,F$e.x,F$e.y,F$e.width,F$e.height,F$K,F$A);this._maxWidth=Math.max(this._maxWidth,F$$+this.letterSpacing),this._fontCharDic[F$n]=F$M,this._fontWidthMap[F$n]=F$$}}},F$y.getCharTexture=function(F$J){return this._fontCharDic[F$J.charCodeAt(0)]},F$y.destroy=function(){if(this._texture){for(var F$J in this._fontCharDic){var F$y=this._fontCharDic[F$J];F$y&&F$y.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},F$y.setSpaceWidth=function(F$J){this._spaceWidth=F$J},F$y.getCharWidth=function(F$J){var F$y=F$J.charCodeAt(0);return this._fontWidthMap[F$y]?this._fontWidthMap[F$y]+this.letterSpacing:" "==F$J?this._spaceWidth+this.letterSpacing:0},F$y.getTextWidth=function(F$J){for(var F$y=0,F$T=0,F$V=F$J.length;F$T<F$V;F$T++)F$y+=this.getCharWidth(F$J.charAt(F$T));return F$y},F$y.getMaxWidth=function(){return this._maxWidth},F$y.getMaxHeight=function(){return this.fontSize},F$y.drawText=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R,F$n=this.getTextWidth(F$J),F$K=0;"center"===F$Z&&(F$K=(F$m-F$n)/2),"right"===F$Z&&(F$K=F$m-F$n);for(var F$A=0,F$$=0,F$e=F$J.length;F$$<F$e;F$$++)(F$R=this.getCharTexture(F$J.charAt(F$$)))&&(F$y.graphics.drawTexture(F$R,F$T+F$A+F$K,F$V),F$A+=this.getCharWidth(F$J.charAt(F$$)))},F$J}(),F$n=function(){function F$T(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=F$T._TF_EMPTY}F$$(F$T,"laya.display.css.Style");var F$J=F$T.prototype;return F$J.getTransform=function(){return this._tf},F$J.setTransform=function(F$J){this._tf="none"!==F$J&&F$J?F$J:F$T._TF_EMPTY},F$J.setTranslateX=function(F$J){this._tf===F$T._TF_EMPTY&&(this._tf=new F$Z),this._tf.translateX=F$J},F$J.setTranslateY=function(F$J){this._tf===F$T._TF_EMPTY&&(this._tf=new F$Z),this._tf.translateY=F$J},F$J.setScaleX=function(F$J){this._tf===F$T._TF_EMPTY&&(this._tf=new F$Z),this._tf.scaleX=F$J},F$J.setScale=function(F$J,F$y){this._tf===F$T._TF_EMPTY&&(this._tf=new F$Z),this._tf.scaleX=F$J,this._tf.scaleY=F$y},F$J.setScaleY=function(F$J){this._tf===F$T._TF_EMPTY&&(this._tf=new F$Z),this._tf.scaleY=F$J},F$J.setRotate=function(F$J){this._tf===F$T._TF_EMPTY&&(this._tf=new F$Z),this._tf.rotate=F$J},F$J.setSkewX=function(F$J){this._tf===F$T._TF_EMPTY&&(this._tf=new F$Z),this._tf.skewX=F$J},F$J.setSkewY=function(F$J){this._tf===F$T._TF_EMPTY&&(this._tf=new F$Z),this._tf.skewY=F$J},F$J.destroy=function(){this.scrollRect=null},F$J.render=function(F$J,F$y,F$T,F$V){},F$J.getCSSStyle=function(){return F$yJ.EMPTY},F$J._enableLayout=function(){return!1},F$B(0,F$J,"scaleX",function(){return this._tf.scaleX},function(F$J){this.setScaleX(F$J)}),F$B(0,F$J,"transform",function(){return this.getTransform()},function(F$J){this.setTransform(F$J)}),F$B(0,F$J,"translateX",function(){return this._tf.translateX},function(F$J){this.setTranslateX(F$J)}),F$B(0,F$J,"translateY",function(){return this._tf.translateY},function(F$J){this.setTranslateY(F$J)}),F$B(0,F$J,"scaleY",function(){return this._tf.scaleY},function(F$J){this.setScaleY(F$J)}),F$B(0,F$J,"block",function(){return 0!=(1&this._type)}),F$B(0,F$J,"skewY",function(){return this._tf.skewY},function(F$J){this.setSkewY(F$J)}),F$B(0,F$J,"rotate",function(){return this._tf.rotate},function(F$J){this.setRotate(F$J)}),F$B(0,F$J,"skewX",function(){return this._tf.skewX},function(F$J){this.setSkewX(F$J)}),F$B(0,F$J,"paddingLeft",function(){return 0}),F$B(0,F$J,"paddingTop",function(){return 0}),F$B(0,F$J,"absolute",function(){return!0}),F$T.__init__=function(){F$T._TF_EMPTY=new F$Z,F$T.EMPTY=new F$T},F$T.EMPTY=null,F$T._TF_EMPTY=null,F$T}(),F$G=function(){function F$y(F$J){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=F$U.create(F$y.defaultColor),this.family=F$y.defaultFamily,this.stroke=F$y._STROKE,this.size=F$y.defaultSize,F$J&&F$J!==F$y.EMPTY&&F$J.copyTo(this)}F$$(F$y,"laya.display.css.Font");var F$J=F$y.prototype;return F$J.set=function(F$J){this._text=null;for(var F$y=F$J.split(" "),F$T=0,F$V=F$y.length;F$T<F$V;F$T++){var F$Z=F$y[F$T];switch(F$Z){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<F$Z.indexOf("px")&&(this.size=parseInt(F$Z),this.family=F$y[F$T+1],F$T++)}},F$J.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},F$J.copyTo=function(F$J){F$J._type=this._type,F$J._text=this._text,F$J._weight=this._weight,F$J._color=this._color,F$J.family=this.family,F$J.stroke=this.stroke!=F$y._STROKE?this.stroke.slice():F$y._STROKE,F$J.indent=this.indent,F$J.size=this.size},F$B(0,F$J,"password",function(){return 0!=(1024&this._type)},function(F$J){F$J?this._type|=1024:this._type&=-1025}),F$B(0,F$J,"color",function(){return this._color.strColor},function(F$J){this._color=F$U.create(F$J)}),F$B(0,F$J,"italic",function(){return 0!=(512&this._type)},function(F$J){F$J?this._type|=512:this._type&=-513}),F$B(0,F$J,"bold",function(){return 0!=(2048&this._type)},function(F$J){F$J?this._type|=2048:this._type&=-2049}),F$B(0,F$J,"weight",function(){return""+this._weight},function(F$J){var F$y=0;switch(F$J){case"normal":break;case"bold":this.bold=!0,F$y=700;break;case"bolder":F$y=800;break;case"lighter":F$y=100;break;default:F$y=parseInt(F$J)}this._weight=F$y,this._text=null}),F$B(0,F$J,"decoration",function(){return this._decoration?this._decoration.value:null},function(F$J){var F$y=F$J.split(" ");switch(this._decoration||(this._decoration={}),F$y[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=F$y[0]}F$y[1]&&(this._decoration.color=F$U.create(F$y)),this._decoration.value=F$J}),F$y.__init__=function(){F$y.EMPTY=new F$y(null)},F$y.EMPTY=null,F$y.defaultColor="#000000",F$y.defaultSize=12,F$y.defaultFamily="Arial",F$y.defaultFont="12px Arial",F$y._STROKE=[0,"#000000"],F$y._ITALIC=512,F$y._PASSWORD=1024,F$y._BOLD=2048,F$y}(),F$Z=function(){function F$J(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return F$$(F$J,"laya.display.css.TransformInfo"),F$J}(),F$M=function(){function F$e(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,F$u.isConchNode){this._nativeObj=new F$R._conchGraphics,this.id=this._nativeObj.conchID}}F$$(F$e,"laya.display.Graphics");var F$J=F$e.prototype;return F$J.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},F$J.clear=function(F$J){void 0===F$J&&(F$J=!1);var F$y=0,F$T=0;if(F$J){var F$V=this._one;if(this._cmds){for(F$T=this._cmds.length,F$y=0;F$y<F$T;F$y++)!(F$V=this._cmds[F$y])||F$V.callee!==F$u._context._drawTexture&&F$V.callee!==F$u._context._drawTextureWithTransform||(F$V[0]=null,F$e._cache.push(F$V));this._cmds.length=0}else F$V&&(!F$V||F$V.callee!==F$u._context._drawTexture&&F$V.callee!==F$u._context._drawTextureWithTransform||(F$V[0]=null,F$e._cache.push(F$V)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(F$y=0,F$T=this._vectorgraphArray.length;F$y<F$T;F$y++)F$N.getInstance().deleteShape(this._vectorgraphArray[F$y]);this._vectorgraphArray.length=0}},F$J._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},F$J._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new F$T,this._graphicBounds._graphics=this)},F$J._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},F$J._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},F$J.getBounds=function(F$J){return void 0===F$J&&(F$J=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(F$J)},F$J.getBoundPoints=function(F$J){return void 0===F$J&&(F$J=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(F$J)},F$J._addCmd=function(F$J){this._cmds=this._cmds||[],F$J.callee=F$J.shift(),this._cmds.push(F$J)},F$J.setFilters=function(F$J){this._saveToCmd(F$u._context._setFilters,F$J)},F$J.drawTexture=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){if(void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0),void 0===F$R&&(F$R=1),!F$J||F$R<.01)return null;F$V||(F$V=F$J.sourceWidth),F$Z||(F$Z=F$J.sourceHeight),F$R=F$R<0?0:1<F$R?1:F$R;var F$n,F$K=!F$u.isWebGL&&(F$f.onFirefox||F$f.onEdge||F$f.onIE||F$f.onSafari)?.5:0,F$A=F$V/F$J.sourceWidth,F$$=F$Z/F$J.sourceHeight;return F$V=F$J.width*F$A,F$Z=F$J.height*F$$,F$J.loaded&&(F$V<=0||F$Z<=0)?null:(F$y+=F$J.offsetX*F$A,F$T+=F$J.offsetY*F$$,this._sp&&(this._sp._renderType|=512),F$y-=F$K,F$T-=F$K,F$V+=2*F$K,F$Z+=2*F$K,F$e._cache.length?((F$n=F$e._cache.pop())[0]=F$J,F$n[1]=F$y,F$n[2]=F$T,F$n[3]=F$V,F$n[4]=F$Z,F$n[5]=F$m,F$n[6]=F$R):F$n=[F$J,F$y,F$T,F$V,F$Z,F$m,F$R],F$n.callee=F$m||1!=F$R?F$u._context._drawTextureWithTransform:F$u._context._drawTexture,null!=this._one||F$m||1!=F$R?this._saveToCmd(F$n.callee,F$n):(this._one=F$n,this._render=this._renderOneImg),F$J.loaded||F$J.once("loaded",this,this._textureLoaded,[F$J,F$n]),this._repaint(),F$n)},F$J.cleanByTexture=function(F$J,F$y,F$T,F$V,F$Z){if(void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0),!F$J)return this.clear();if(this._one&&this._render===this._renderOneImg){F$V||(F$V=F$J.sourceWidth),F$Z||(F$Z=F$J.sourceHeight);var F$m=F$V/F$J.sourceWidth,F$R=F$Z/F$J.sourceHeight;F$V=F$J.width*F$m,F$Z=F$J.height*F$R,F$y+=F$J.offsetX*F$m,F$T+=F$J.offsetY*F$R,this._one[0]=F$J,this._one[1]=F$y,this._one[2]=F$T,this._one[3]=F$V,this._one[4]=F$Z,this._repaint()}else this.clear(),F$J&&this.drawTexture(F$J,F$y,F$T,F$V,F$Z)},F$J.drawTextures=function(F$J,F$y){F$J&&this._saveToCmd(F$u._context._drawTextures,[F$J,F$y])},F$J.fillTexture=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){if(void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0),void 0===F$m&&(F$m="repeat"),F$J){var F$n=[F$J,F$y,F$T,F$V,F$Z,F$m,F$R||F$q.EMPTY,{}];F$J.loaded||F$J.once("loaded",this,this._textureLoaded,[F$J,F$n]),this._saveToCmd(F$u._context._fillTexture,F$n)}},F$J._textureLoaded=function(F$J,F$y){F$y[3]=F$y[3]||F$J.width,F$y[4]=F$y[4]||F$J.height,this._repaint()},F$J.fillCircle=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){F$T.bitmap.enableMerageInAtlas=!1;var F$n=new Float32Array(2*(F$R+1)),F$K=new Float32Array(2*(F$R+1)),F$A=new Uint16Array(3*F$R),F$$=2*Math.PI/F$R,F$e=0;F$n[0]=F$V,F$n[1]=F$Z,F$K[0]=F$V/F$T.width,F$K[1]=F$Z/F$T.height;for(var F$M=2,F$G=0;F$G<F$R;F$G++){var F$B=F$m*Math.cos(F$e)+F$V,F$o=F$m*Math.sin(F$e)+F$Z;F$n[F$M]=F$B,F$n[F$M+1]=F$o,F$K[F$M]=F$B/F$T.width,F$K[F$M+1]=F$o/F$T.height,F$e+=F$$,F$M+=2}for(F$G=F$M=0;F$G<F$R;F$G++)F$A[F$M++]=0,F$A[F$M++]=F$G+1,F$A[F$M++]=F$R+1<=F$G+2?1:F$G+2;this.drawTriangles(F$T,F$J,F$y,F$n,F$K,F$A)},F$J.drawTriangles=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){void 0===F$n&&(F$n=1),this._saveToCmd(F$u._context.drawTriangles,[F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A])},F$J._saveToCmd=function(F$J,F$y){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=F$y,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(F$y)),F$y.callee=F$J,this._repaint(),F$y},F$J.clipRect=function(F$J,F$y,F$T,F$V){this._saveToCmd(F$u._context._clipRect,[F$J,F$y,F$T,F$V])},F$J.fillText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){void 0===F$R&&(F$R=0),this._saveToCmd(F$u._context._fillText,[F$J,F$y,F$T,F$V||F$G.defaultFont,F$Z,F$m])},F$J.fillBorderText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){this._saveToCmd(F$u._context._fillBorderText,[F$J,F$y,F$T,F$V||F$G.defaultFont,F$Z,F$m,F$R,F$n])},F$J.strokeText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this._saveToCmd(F$u._context._strokeText,[F$J,F$y,F$T,F$V||F$G.defaultFont,F$Z,F$m,F$R])},F$J.alpha=function(F$J){F$J=F$J<0?0:1<F$J?1:F$J,this._saveToCmd(F$u._context._alpha,[F$J])},F$J.setAlpha=function(F$J){F$J=F$J<0?0:1<F$J?1:F$J,this._saveToCmd(F$u._context._setAlpha,[F$J])},F$J.transform=function(F$J,F$y,F$T){void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),this._saveToCmd(F$u._context._transform,[F$J,F$y,F$T])},F$J.rotate=function(F$J,F$y,F$T){void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),this._saveToCmd(F$u._context._rotate,[F$J,F$y,F$T])},F$J.scale=function(F$J,F$y,F$T,F$V){void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=0),this._saveToCmd(F$u._context._scale,[F$J,F$y,F$T,F$V])},F$J.translate=function(F$J,F$y){this._saveToCmd(F$u._context._translate,[F$J,F$y])},F$J.save=function(){this._saveToCmd(F$u._context._save,[])},F$J.restore=function(){this._saveToCmd(F$u._context._restore,[])},F$J.replaceText=function(F$J){this._repaint();var F$y=this._cmds;if(F$y){for(var F$T=F$y.length-1;-1<F$T;F$T--)if(this._isTextCmd(F$y[F$T].callee))return F$y[F$T][0].toUpperCase?F$y[F$T][0]=F$J:F$y[F$T][0].setText(F$J),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=F$J:this._one[0].setText(F$J),!0;return!1},F$J._isTextCmd=function(F$J){return F$J===F$u._context._fillText||F$J===F$u._context._fillBorderText||F$J===F$u._context._strokeText},F$J.replaceTextColor=function(F$J){this._repaint();var F$y=this._cmds;if(F$y)for(var F$T=F$y.length-1;-1<F$T;F$T--)this._isTextCmd(F$y[F$T].callee)&&(F$y[F$T][4]=F$J,F$y[F$T][0].toUpperCase||(F$y[F$T][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=F$J,this._one[0].toUpperCase||(this._one[0].changed=!0))},F$J.loadImage=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=this;void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0);var F$n=F$nJ.getRes(F$J);function F$K(F$J){F$J&&(F$R.drawTexture(F$J,F$y,F$T,F$V,F$Z),null!=F$m&&F$m.call(F$R._sp,F$J))}F$n?F$K(F$n):F$a.loader.load(F$J,F$O.create(null,F$K),null,"image")},F$J._renderEmpty=function(F$J,F$y,F$T,F$V){},F$J._renderAll=function(F$J,F$y,F$T,F$V){for(var F$Z,F$m=this._cmds,F$R=0,F$n=F$m.length;F$R<F$n;F$R++)(F$Z=F$m[F$R]).callee.call(F$y,F$T,F$V,F$Z)},F$J._renderOne=function(F$J,F$y,F$T,F$V){this._one.callee.call(F$y,F$T,F$V,this._one)},F$J._renderOneImg=function(F$J,F$y,F$T,F$V){this._one.callee.call(F$y,F$T,F$V,this._one),2305!==F$J._renderType&&(F$J._renderType|=1)},F$J.drawLine=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$m&&(F$m=1);var F$R=0;F$u.isWebGL&&(F$R=F$N.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$R));var F$n=F$m%2==0?0:.5,F$K=[F$J+F$n,F$y+F$n,F$T+F$n,F$V+F$n,F$Z,F$m,F$R];this._saveToCmd(F$u._context._drawLine,F$K)},F$J.drawLines=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$Z&&(F$Z=1);var F$m=0;if(F$T&&!(F$T.length<4)){F$u.isWebGL&&(F$m=F$N.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$m));var F$R=F$Z%2==0?0:.5,F$n=[F$J+F$R,F$y+F$R,F$T,F$V,F$Z,F$m];this._saveToCmd(F$u._context._drawLines,F$n)}},F$J.drawCurves=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$Z&&(F$Z=1);var F$m=[F$J,F$y,F$T,F$V,F$Z];this._saveToCmd(F$u._context._drawCurves,F$m)},F$J.drawRect=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){void 0===F$R&&(F$R=1);var F$n=F$m?F$R/2:0,F$K=F$m?F$R:0,F$A=[F$J+F$n,F$y+F$n,F$T-F$K,F$V-F$K,F$Z,F$m,F$R];this._saveToCmd(F$u._context._drawRect,F$A)},F$J.drawCircle=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$m&&(F$m=1);var F$R=F$Z?F$m/2:0,F$n=0;F$u.isWebGL&&(F$n=F$N.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$n));var F$K=[F$J,F$y,F$T-F$R,F$V,F$Z,F$m,F$n];this._saveToCmd(F$u._context._drawCircle,F$K)},F$J.drawPie=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){void 0===F$n&&(F$n=1);var F$K=F$R?F$n/2:0,F$A=F$R?F$n:0,F$$=0;F$u.isWebGL&&(F$$=F$N.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$$));var F$e=[F$J+F$K,F$y+F$K,F$T-F$A,F$V,F$Z,F$m,F$R,F$n,F$$];F$e[3]=F$g.toRadian(F$V),F$e[4]=F$g.toRadian(F$Z),this._saveToCmd(F$u._context._drawPie,F$e)},F$J.drawPoly=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$m&&(F$m=1);var F$R=0,F$n=!1;F$u.isWebGL&&(F$R=F$N.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$R),F$n=!(6<F$T.length));var F$K=F$Z?F$m%2==0?0:.5:0,F$A=[F$J+F$K,F$y+F$K,F$T,F$V,F$Z,F$m,F$R,F$n];this._saveToCmd(F$u._context._drawPoly,F$A)},F$J.drawPath=function(F$J,F$y,F$T,F$V,F$Z){var F$m=[F$J,F$y,F$T,F$V,F$Z];this._saveToCmd(F$u._context._drawPath,F$m)},F$B(0,F$J,"cmds",function(){return this._cmds},function(F$J){this._sp&&(this._sp._renderType|=512),this._cmds=F$J,this._render=this._renderAll,this._repaint()}),F$e.__init__=function(){if(F$u.isConchNode){for(var F$J=laya.display.Graphics.prototype,F$y=F$f.window.ConchGraphics.prototype,F$T=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],F$V=0,F$Z=F$T.length;F$V<=F$Z;F$V++){var F$m=F$T[F$V];F$J[F$m]=F$y[F$m]}F$J._saveToCmd=null,F$y.drawImageS&&(F$J.drawTextures=function(F$J,F$y){if(F$J&&F$J.loaded&&F$J.bitmap&&F$J.source){var F$T=F$J.uv,F$V=F$J.bitmap.width,F$Z=F$J.bitmap.height;this.drawImageS(F$J.bitmap.source,F$T[0]*F$V,F$T[1]*F$Z,(F$T[2]-F$T[0])*F$V,(F$T[5]-F$T[3])*F$Z,F$J.offsetX,F$J.offsetY,F$J.width,F$J.height,F$y)}}),F$J.drawTexture=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){if(void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0),void 0===F$R&&(F$R=1),F$J)if(F$J.loaded){if(F$J.loaded&&F$J.bitmap&&F$J.source&&(F$V||(F$V=F$J.sourceWidth),F$Z||(F$Z=F$J.sourceHeight),F$R=F$R<0?0:1<F$R?1:F$R,F$V=F$V-F$J.sourceWidth+F$J.width,F$Z=F$Z-F$J.sourceHeight+F$J.height,!(F$V<=0||F$Z<=0))){F$y+=F$J.offsetX,F$T+=F$J.offsetY;var F$n=F$J.uv,F$K=F$J.bitmap.width,F$A=F$J.bitmap.height;F$n[4]<F$n[0]&&F$n[5]<F$n[1]?this.drawImageM(F$J.bitmap.source,F$n[4]*F$K,F$n[5]*F$A,(F$n[0]-F$n[4])*F$K,(F$n[1]-F$n[5])*F$A,F$y,F$T,F$V,F$Z,F$m,F$R):this.drawImageM(F$J.bitmap.source,F$n[0]*F$K,F$n[1]*F$A,(F$n[2]-F$n[0])*F$K,(F$n[5]-F$n[3])*F$A,F$y,F$T,F$V,F$Z,F$m,F$R),this._repaint()}}else F$J.once("loaded",this,function(){this.drawTexture(F$J,F$y,F$T,F$V,F$Z,F$m)})},F$J.fillTexture=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){if(void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0),void 0===F$m&&(F$m="repeat"),F$J&&F$J.loaded){var F$n,F$K=F$u._context.ctx,F$A=F$J.bitmap.width,F$$=F$J.bitmap.height,F$e=F$J.uv;F$n=F$J.uv!=F$$J.DEF_UV?F$K.createPattern(F$J.bitmap.source,F$m,F$e[0]*F$A,F$e[1]*F$$,(F$e[2]-F$e[0])*F$A,(F$e[5]-F$e[3])*F$$):F$K.createPattern(F$J.bitmap.source,F$m);var F$M=0,F$G=0;F$R&&(F$y+=F$R.x%F$J.width,F$T+=F$R.y%F$J.height,F$M-=F$R.x%F$J.width,F$G-=F$R.y%F$J.height),this._fillImage(F$n,F$y,F$T,F$M,F$G,F$V,F$Z)}}}},F$e._cache=[],F$e}(),F$T=function(){function F$L(){this._cacheBoundsType=!1}F$$(F$L,"laya.display.GraphicsBounds");var F$J=F$L.prototype;return F$J.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},F$J.reset=function(){this._temp&&(this._temp.length=0)},F$J.getBounds=function(F$J){return void 0===F$J&&(F$J=!1),(!this._bounds||!this._temp||this._temp.length<1||F$J!=this._cacheBoundsType)&&(this._bounds=F$r._getWrapRec(this.getBoundPoints(F$J),this._bounds)),this._cacheBoundsType=F$J,this._bounds},F$J.getBoundPoints=function(F$J){return void 0===F$J&&(F$J=!1),(!this._temp||this._temp.length<1||F$J!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(F$J)),this._cacheBoundsType=F$J,this._rstBoundPoints=F$g.copyArray(this._rstBoundPoints,this._temp)},F$J._getCmdPoints=function(F$J){void 0===F$J&&(F$J=!1);var F$y,F$T,F$V=F$u._context,F$Z=this._graphics.cmds;if((F$y=this._temp||(this._temp=[])).length=0,F$Z||null==this._graphics._one||(F$L._tempCmds.length=0,F$L._tempCmds.push(this._graphics._one),F$Z=F$L._tempCmds),!F$Z)return F$y;(F$T=F$L._tempMatrixArrays).length=0;var F$m=F$L._initMatrix;F$m.identity();for(var F$R,F$n,F$K=F$L._tempMatrix,F$A=NaN,F$$=NaN,F$e=NaN,F$M=NaN,F$G=NaN,F$B=NaN,F$o=0,F$s=F$Z.length;F$o<F$s;F$o++)if((F$R=F$Z[F$o]).callee)switch(F$R.callee){case F$V._save:case 7:F$T.push(F$m),F$m=F$m.clone();break;case F$V._restore:case 8:F$m=F$T.pop();break;case F$V._scale:case 5:F$K.identity(),F$K.translate(-F$R[2],-F$R[3]),F$K.scale(F$R[0],F$R[1]),F$K.translate(F$R[2],F$R[3]),this._switchMatrix(F$m,F$K);break;case F$V._rotate:case 3:F$K.identity(),F$K.translate(-F$R[1],-F$R[2]),F$K.rotate(F$R[0]),F$K.translate(F$R[1],F$R[2]),this._switchMatrix(F$m,F$K);break;case F$V._translate:case 6:F$K.identity(),F$K.translate(F$R[0],F$R[1]),this._switchMatrix(F$m,F$K);break;case F$V._transform:case 4:F$K.identity(),F$K.translate(-F$R[1],-F$R[2]),F$K.concat(F$R[0]),F$K.translate(F$R[1],F$R[2]),this._switchMatrix(F$m,F$K);break;case 16:case 24:F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[0],F$R[1],F$R[2],F$R[3]),F$m);break;case 17:F$m.copyTo(F$K),F$K.concat(F$R[4]),F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[0],F$R[1],F$R[2],F$R[3]),F$K);break;case F$V._drawTexture:F$n=F$R[0],F$J?F$R[3]&&F$R[4]?F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[1],F$R[2],F$R[3],F$R[4]),F$m):(F$n=F$R[0],F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[1],F$R[2],F$n.width,F$n.height),F$m)):(F$A=(F$R[3]||F$n.sourceWidth)/F$n.width,F$$=(F$R[4]||F$n.sourceHeight)/F$n.height,F$e=F$A*F$n.sourceWidth,F$M=F$$*F$n.sourceHeight,F$G=0<F$n.offsetX?F$n.offsetX:0,F$B=0<F$n.offsetY?F$n.offsetY:0,F$G*=F$A,F$B*=F$$,F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[1]-F$G,F$R[2]-F$B,F$e,F$M),F$m));break;case F$V._fillTexture:F$R[3]&&F$R[4]?F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[1],F$R[2],F$R[3],F$R[4]),F$m):(F$n=F$R[0],F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[1],F$R[2],F$n.width,F$n.height),F$m));break;case F$V._drawTextureWithTransform:var F$E;F$E=F$R[5]?(F$m.copyTo(F$K),F$K.concat(F$R[5]),F$K):F$m,F$J?F$R[3]&&F$R[4]?F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[1],F$R[2],F$R[3],F$R[4]),F$E):(F$n=F$R[0],F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[1],F$R[2],F$n.width,F$n.height),F$E)):(F$n=F$R[0],F$A=(F$R[3]||F$n.sourceWidth)/F$n.width,F$$=(F$R[4]||F$n.sourceHeight)/F$n.height,F$e=F$A*F$n.sourceWidth,F$M=F$$*F$n.sourceHeight,F$G=0<F$n.offsetX?F$n.offsetX:0,F$B=0<F$n.offsetY?F$n.offsetY:0,F$G*=F$A,F$B*=F$$,F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[1]-F$G,F$R[2]-F$B,F$e,F$M),F$E));break;case F$V._drawRect:case 13:F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[0],F$R[1],F$R[2],F$R[3]),F$m);break;case F$V._drawCircle:case F$V._fillCircle:case 14:F$L._addPointArrToRst(F$y,F$r._getBoundPointS(F$R[0]-F$R[2],F$R[1]-F$R[2],F$R[2]+F$R[2],F$R[2]+F$R[2]),F$m);break;case F$V._drawLine:case 20:F$L._tempPoints.length=0;var F$O;F$O=.5*F$R[5],F$R[0]==F$R[2]?F$L._tempPoints.push(F$R[0]+F$O,F$R[1],F$R[2]+F$O,F$R[3],F$R[0]-F$O,F$R[1],F$R[2]-F$O,F$R[3]):F$R[1]==F$R[3]?F$L._tempPoints.push(F$R[0],F$R[1]+F$O,F$R[2],F$R[3]+F$O,F$R[0],F$R[1]-F$O,F$R[2],F$R[3]-F$O):F$L._tempPoints.push(F$R[0],F$R[1],F$R[2],F$R[3]),F$L._addPointArrToRst(F$y,F$L._tempPoints,F$m);break;case F$V._drawCurves:case 22:F$L._addPointArrToRst(F$y,F$H.I.getBezierPoints(F$R[2]),F$m,F$R[0],F$R[1]);break;case F$V._drawPoly:case F$V._drawLines:case 18:F$L._addPointArrToRst(F$y,F$R[2],F$m,F$R[0],F$R[1]);break;case F$V._drawPath:case 19:F$L._addPointArrToRst(F$y,this._getPathPoints(F$R[2]),F$m,F$R[0],F$R[1]);break;case F$V._drawPie:case 15:F$L._addPointArrToRst(F$y,this._getPiePoints(F$R[0],F$R[1],F$R[2],F$R[3],F$R[4]),F$m)}return 200<F$y.length?F$y=F$g.copyArray(F$y,F$r._getWrapRec(F$y)._getBoundPoints()):8<F$y.length&&(F$y=F$P.scanPList(F$y)),F$y},F$J._switchMatrix=function(F$J,F$y){F$y.concat(F$J),F$y.copyTo(F$J)},F$J._getPiePoints=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$L._tempPoints;F$L._tempPoints.length=0,F$m.push(F$J,F$y);var F$R=(F$Z-F$V)%(2*Math.PI)/10,F$n=NaN,F$K=F$V;for(F$n=0;F$n<=10;F$n++)F$m.push(F$J+F$T*Math.cos(F$K),F$y+F$T*Math.sin(F$K)),F$K+=F$R;return F$m},F$J._getPathPoints=function(F$J){var F$y,F$T,F$V=0,F$Z=F$L._tempPoints;for(F$Z.length=0,F$y=F$J.length,F$V=0;F$V<F$y;F$V++)1<(F$T=F$J[F$V]).length&&(F$Z.push(F$T[1],F$T[2]),3<F$T.length&&F$Z.push(F$T[3],F$T[4]));return F$Z},F$L._addPointArrToRst=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0);var F$m,F$R=0;for(F$m=F$y.length,F$R=0;F$R<F$m;F$R+=2)F$L._addPointToRst(F$J,F$y[F$R]+F$V,F$y[F$R+1]+F$Z,F$T)},F$L._addPointToRst=function(F$J,F$y,F$T,F$V){var F$Z=F$q.TEMP;F$Z.setTo(F$y||0,F$T||0),F$V.transformPoint(F$Z),F$J.push(F$Z.x,F$Z.y)},F$L._tempPoints=[],F$L._tempMatrixArrays=[],F$L._tempCmds=[],F$K(F$L,["_tempMatrix",function(){return this._tempMatrix=new F$Q},"_initMatrix",function(){return this._initMatrix=new F$Q}]),F$L}(),F$m=function(){function F$J(){}F$$(F$J,"laya.events.Event");var F$y=F$J.prototype;return F$y.setTo=function(F$J,F$y,F$T){return this.type=F$J,this.currentTarget=F$y,this.target=F$T,this},F$y.stopPropagation=function(){this._stoped=!0},F$B(0,F$y,"stageY",function(){return F$a.stage.mouseY}),F$B(0,F$y,"charCode",function(){return this.nativeEvent.charCode}),F$B(0,F$y,"touches",function(){var F$J=this.nativeEvent.touches;if(F$J)for(var F$y=F$a.stage,F$T=0,F$V=F$J.length;F$T<F$V;F$T++){var F$Z=F$J[F$T],F$m=F$q.TEMP;F$m.setTo(F$Z.clientX,F$Z.clientY),F$y._canvasTransform.invertTransformPoint(F$m),F$y.transform.invertTransformPoint(F$m),F$Z.stageX=F$m.x,F$Z.stageY=F$m.y}return F$J}),F$B(0,F$y,"keyLocation",function(){return this.nativeEvent.keyLocation}),F$B(0,F$y,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),F$B(0,F$y,"altKey",function(){return this.nativeEvent.altKey}),F$B(0,F$y,"shiftKey",function(){return this.nativeEvent.shiftKey}),F$B(0,F$y,"stageX",function(){return F$a.stage.mouseX}),F$J.EMPTY=new F$J,F$J.MOUSE_DOWN="mousedown",F$J.MOUSE_UP="mouseup",F$J.CLICK="click",F$J.RIGHT_MOUSE_DOWN="rightmousedown",F$J.RIGHT_MOUSE_UP="rightmouseup",F$J.RIGHT_CLICK="rightclick",F$J.MOUSE_MOVE="mousemove",F$J.MOUSE_OVER="mouseover",F$J.MOUSE_OUT="mouseout",F$J.MOUSE_WHEEL="mousewheel",F$J.ROLL_OVER="mouseover",F$J.ROLL_OUT="mouseout",F$J.DOUBLE_CLICK="doubleclick",F$J.CHANGE="change",F$J.CHANGED="changed",F$J.RESIZE="resize",F$J.ADDED="added",F$J.REMOVED="removed",F$J.DISPLAY="display",F$J.UNDISPLAY="undisplay",F$J.ERROR="error",F$J.COMPLETE="complete",F$J.LOADED="loaded",F$J.INITED="inited",F$J.PROGRESS="progress",F$J.INPUT="input",F$J.RENDER="render",F$J.OPEN="open",F$J.MESSAGE="message",F$J.CLOSE="close",F$J.KEY_DOWN="keydown",F$J.KEY_PRESS="keypress",F$J.KEY_UP="keyup",F$J.FRAME="enterframe",F$J.DRAG_START="dragstart",F$J.DRAG_MOVE="dragmove",F$J.DRAG_END="dragend",F$J.ENTER="enter",F$J.SELECT="select",F$J.BLUR="blur",F$J.FOCUS="focus",F$J.VISIBILITY_CHANGE="visibilitychange",F$J.FOCUS_CHANGE="focuschange",F$J.PLAYED="played",F$J.PAUSED="paused",F$J.STOPPED="stopped",F$J.START="start",F$J.END="end",F$J.ENABLE_CHANGED="enablechanged",F$J.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",F$J.COMPONENT_ADDED="componentadded",F$J.COMPONENT_REMOVED="componentremoved",F$J.LAYER_CHANGED="layerchanged",F$J.HIERARCHY_LOADED="hierarchyloaded",F$J.RECOVERED="recovered",F$J.RELEASED="released",F$J.LINK="link",F$J.LABEL="label",F$J.FULL_SCREEN_CHANGE="fullscreenchange",F$J.DEVICE_LOST="devicelost",F$J.MESH_CHANGED="meshchanged",F$J.MATERIAL_CHANGED="materialchanged",F$J.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",F$J.ANIMATION_CHANGED="animationchanged",F$J.TRIGGER_ENTER="triggerenter",F$J.TRIGGER_STAY="triggerstay",F$J.TRIGGER_EXIT="triggerexit",F$J.TRAIL_FILTER_CHANGE="trailfilterchange",F$J.DOMINO_FILTER_CHANGE="dominofilterchange",F$J}(),F$e=(function(){function F$J(){}F$$(F$J,"laya.events.Keyboard"),F$J.NUMBER_0=48,F$J.NUMBER_1=49,F$J.NUMBER_2=50,F$J.NUMBER_3=51,F$J.NUMBER_4=52,F$J.NUMBER_5=53,F$J.NUMBER_6=54,F$J.NUMBER_7=55,F$J.NUMBER_8=56,F$J.NUMBER_9=57,F$J.A=65,F$J.B=66,F$J.C=67,F$J.D=68,F$J.E=69,F$J.F=70,F$J.G=71,F$J.H=72,F$J.I=73,F$J.J=74,F$J.K=75,F$J.L=76,F$J.M=77,F$J.N=78,F$J.O=79,F$J.P=80,F$J.Q=81,F$J.R=82,F$J.S=83,F$J.T=84,F$J.U=85,F$J.V=86,F$J.W=87,F$J.X=88,F$J.Y=89,F$J.Z=90,F$J.F1=112,F$J.F2=113,F$J.F3=114,F$J.F4=115,F$J.F5=116,F$J.F6=117,F$J.F7=118,F$J.F8=119,F$J.F9=120,F$J.F10=121,F$J.F11=122,F$J.F12=123,F$J.F13=124,F$J.F14=125,F$J.F15=126,F$J.NUMPAD=21,F$J.NUMPAD_0=96,F$J.NUMPAD_1=97,F$J.NUMPAD_2=98,F$J.NUMPAD_3=99,F$J.NUMPAD_4=100,F$J.NUMPAD_5=101,F$J.NUMPAD_6=102,F$J.NUMPAD_7=103,F$J.NUMPAD_8=104,F$J.NUMPAD_9=105,F$J.NUMPAD_ADD=107,F$J.NUMPAD_DECIMAL=110,F$J.NUMPAD_DIVIDE=111,F$J.NUMPAD_ENTER=108,F$J.NUMPAD_MULTIPLY=106,F$J.NUMPAD_SUBTRACT=109,F$J.SEMICOLON=186,F$J.EQUAL=187,F$J.COMMA=188,F$J.MINUS=189,F$J.PERIOD=190,F$J.SLASH=191,F$J.BACKQUOTE=192,F$J.LEFTBRACKET=219,F$J.BACKSLASH=220,F$J.RIGHTBRACKET=221,F$J.QUOTE=222,F$J.ALTERNATE=18,F$J.BACKSPACE=8,F$J.CAPS_LOCK=20,F$J.COMMAND=15,F$J.CONTROL=17,F$J.DELETE=46,F$J.ENTER=13,F$J.ESCAPE=27,F$J.PAGE_UP=33,F$J.PAGE_DOWN=34,F$J.END=35,F$J.HOME=36,F$J.LEFT=37,F$J.UP=38,F$J.RIGHT=39,F$J.DOWN=40,F$J.SHIFT=16,F$J.SPACE=32,F$J.TAB=9,F$J.INSERT=45}(),function(){function F$Z(){}return F$$(F$Z,"laya.events.KeyBoardManager"),F$Z.__init__=function(){F$Z._addEvent("keydown"),F$Z._addEvent("keypress"),F$Z._addEvent("keyup")},F$Z._addEvent=function(F$y){F$f.document.addEventListener(F$y,function(F$J){laya.events.KeyBoardManager._dispatch(F$J,F$y)},!0)},F$Z._dispatch=function(F$J,F$y){if(F$Z.enabled){F$Z._event._stoped=!1,F$Z._event.nativeEvent=F$J,F$Z._event.keyCode=F$J.keyCode||F$J.which||F$J.charCode,"keydown"===F$y?F$Z._pressKeys[F$Z._event.keyCode]=!0:"keyup"===F$y&&(F$Z._pressKeys[F$Z._event.keyCode]=null);for(var F$T=F$a.stage.focus&&null!=F$a.stage.focus.event&&F$a.stage.focus.displayedInStage?F$a.stage.focus:F$a.stage,F$V=F$T;F$V;)F$V.event(F$y,F$Z._event.setTo(F$y,F$V,F$T)),F$V=F$V.parent}},F$Z.hasKeyDown=function(F$J){return F$Z._pressKeys[F$J]},F$Z._pressKeys={},F$Z.enabled=!0,F$K(F$Z,["_event",function(){return this._event=new F$m}]),F$Z}()),F$o=(function(){function F$J(){}F$$(F$J,"laya.events.KeyLocation"),F$J.STANDARD=0,F$J.LEFT=1,F$J.RIGHT=2,F$J.NUM_PAD=3}(),function(){function F$A(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=F$f.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new F$m,this._matrix=new F$Q,this._point=new F$q,this._rect=new F$r,this._prePoint=new F$q,this._curTouchID=NaN}F$$(F$A,"laya.events.MouseManager");var F$J=F$A.prototype;return F$J.__init__=function(F$J,F$y){var F$T=this;this._stage=F$J;var F$V=this,F$Z=this._eventList;F$y.oncontextmenu=function(F$J){if(F$A.enabled)return!1},F$y.addEventListener("mousedown",function(F$J){F$A.enabled&&(F$f.onIE||F$J.preventDefault(),F$Z.push(F$J),F$V.mouseDownTime=F$f.now())}),F$y.addEventListener("mouseup",function(F$J){F$A.enabled&&(F$J.preventDefault(),F$Z.push(F$J),F$V.mouseDownTime=-F$f.now())},!0),F$y.addEventListener("mousemove",function(F$J){if(F$A.enabled){F$J.preventDefault();var F$y=F$f.now();if(F$y-F$V._lastMoveTimer<10)return;F$V._lastMoveTimer=F$y,F$Z.push(F$J)}},!0),F$y.addEventListener("mouseout",function(F$J){F$A.enabled&&F$Z.push(F$J)}),F$y.addEventListener("mouseover",function(F$J){F$A.enabled&&F$Z.push(F$J)}),F$y.addEventListener("touchstart",function(F$J){F$A.enabled&&(F$Z.push(F$J),F$A._isFirstTouch||F$PJ.isInputting||F$J.preventDefault(),F$V.mouseDownTime=F$f.now())}),F$y.addEventListener("touchend",function(F$J){F$A.enabled?(F$A._isFirstTouch||F$PJ.isInputting||F$J.preventDefault(),F$A._isFirstTouch=!1,F$Z.push(F$J),F$V.mouseDownTime=-F$f.now()):F$T._curTouchID=NaN},!0),F$y.addEventListener("touchmove",function(F$J){F$A.enabled&&(F$J.preventDefault(),F$Z.push(F$J))},!0),F$y.addEventListener("touchcancel",function(F$J){F$A.enabled?(F$J.preventDefault(),F$Z.push(F$J)):F$T._curTouchID=NaN},!0),F$y.addEventListener("mousewheel",function(F$J){F$A.enabled&&F$Z.push(F$J)}),F$y.addEventListener("DOMMouseScroll",function(F$J){F$A.enabled&&F$Z.push(F$J)})},F$J.initEvent=function(F$J,F$y){var F$T;this._event._stoped=!1,this._event.nativeEvent=F$y||F$J,this._target=null,this._point.setTo(F$J.pageX||F$J.clientX,F$J.pageY||F$J.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=F$J.identifier||0,this._tTouchID=this._event.touchId,(F$T=F$s.I._event)._stoped=!1,F$T.nativeEvent=this._event.nativeEvent,F$T.touchId=this._event.touchId},F$J.checkMouseWheel=function(F$J){this._event.delta=F$J.wheelDelta?.025*F$J.wheelDelta:-F$J.detail;for(var F$y=F$s.I.getLastOvers(),F$T=0,F$V=F$y.length;F$T<F$V;F$T++){var F$Z=F$y[F$T];F$Z.event("mousewheel",this._event.setTo("mousewheel",F$Z,this._target))}},F$J.onMouseMove=function(F$J){F$s.I.onMouseMove(F$J,this._tTouchID)},F$J.onMouseDown=function(F$J){if(F$PJ.isInputting&&F$a.stage.focus&&F$a.stage.focus.focus&&!F$a.stage.focus.contains(this._target)){var F$y=F$a.stage.focus._tf||F$a.stage.focus,F$T=F$J._tf||F$J;F$T instanceof laya.display.Input&&F$T.multiline==F$y.multiline?F$y._focusOut():F$y.focus=!1}F$s.I.onMouseDown(F$J,this._tTouchID,this._isLeftMouse)},F$J.onMouseUp=function(F$J){F$s.I.onMouseUp(F$J,this._tTouchID,this._isLeftMouse)},F$J.check=function(F$J,F$y,F$T,F$V){this._point.setTo(F$y,F$T),F$J.fromParentPoint(this._point),F$y=this._point.x,F$T=this._point.y;var F$Z=F$J.scrollRect;if(F$Z&&(this._rect.setTo(F$Z.x,F$Z.y,F$Z.width,F$Z.height),!this._rect.contains(F$y,F$T)))return!1;if(!this.disableMouseEvent){if(F$J.hitTestPrior&&!F$J.mouseThrough&&!this.hitTest(F$J,F$y,F$T))return!1;for(var F$m=F$J._childs.length-1;-1<F$m;F$m--){var F$R=F$J._childs[F$m];if(!F$R.destroyed&&F$R.mouseEnabled&&F$R.visible&&this.check(F$R,F$y,F$T,F$V))return!0}}var F$n=!(!F$J.hitTestPrior||F$J.mouseThrough||this.disableMouseEvent)||this.hitTest(F$J,F$y,F$T);return F$n?(this._target=F$J,F$V.call(this,F$J)):F$V===this.onMouseUp&&F$J===this._stage&&(this._target=this._stage,F$V.call(this,this._target)),F$n},F$J.hitTest=function(F$J,F$y,F$T){var F$V=!1;if(F$J.scrollRect&&(F$y-=F$J.scrollRect.x,F$T-=F$J.scrollRect.y),F$J.hitArea instanceof laya.utils.HitArea)return F$J.hitArea.isHit(F$y,F$T);if(0<F$J.width&&0<F$J.height||F$J.mouseThrough||F$J.hitArea)if(F$J.mouseThrough)F$V=F$J.getGraphicBounds().contains(F$y,F$T);else{var F$Z=this._rect;F$J.hitArea?F$Z=F$J.hitArea:F$Z.setTo(0,0,F$J.width,F$J.height),F$V=F$Z.contains(F$y,F$T)}return F$V},F$J.runEvent=function(){var F$J=this._eventList.length;if(F$J){this.mouseEventTime=F$f.now();var F$y,F$T=0,F$V=0,F$Z=0;try{for(;F$T<F$J;){var F$m=this._eventList[F$T];switch("mousemove"!==F$m.type&&(this._prePoint.x=this._prePoint.y=-1e6),F$m.type){case"mousedown":this._touchIDs[0]=this._id++,F$A._isTouchRespond?F$A._isTouchRespond=!1:(this._isLeftMouse=0===F$m.button,this.initEvent(F$m),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===F$m.button,this.initEvent(F$m),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-F$m.clientX)+Math.abs(this._prePoint.y-F$m.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=F$m.clientX,this._prePoint.y=F$m.clientY,this.initEvent(F$m),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":F$A._isTouchRespond=!0,this._isLeftMouse=!0;var F$R=F$m.changedTouches;for(F$V=0,F$Z=F$R.length;F$V<F$Z;F$V++)F$y=F$R[F$V],(F$A.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=F$y.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[F$y.identifier]=this._id++,this.initEvent(F$y,F$m),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":F$A._isTouchRespond=!0,this._isLeftMouse=!0;var F$n=F$m.changedTouches;for(F$V=0,F$Z=F$n.length;F$V<F$Z;F$V++)if(F$y=F$n[F$V],F$A.multiTouchEnabled||F$y.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(F$y,F$m);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var F$K=F$m.changedTouches;for(F$V=0,F$Z=F$K.length;F$V<F$Z;F$V++)F$y=F$K[F$V],(F$A.multiTouchEnabled||F$y.identifier==this._curTouchID)&&(this.initEvent(F$y,F$m),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(F$m);break;case"mouseout":F$s.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}F$T++}}catch(F$J){throw this._eventList.length=0,F$J}this._eventList.length=0}},F$A.enabled=!0,F$A.multiTouchEnabled=!0,F$A._isTouchRespond=!1,F$A._isFirstTouch=!0,F$K(F$A,["instance",function(){return this.instance=new F$A}]),F$A}()),F$s=function(){function F$B(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new F$m}F$$(F$B,"laya.events.TouchManager");var F$J=F$B.prototype;return F$J._clearTempArrs=function(){F$B._oldArr.length=0,F$B._newArr.length=0,F$B._tEleArr.length=0},F$J.getTouchFromArr=function(F$J,F$y){var F$T,F$V,F$Z=0;for(F$T=F$y.length,F$Z=0;F$Z<F$T;F$Z++)if((F$V=F$y[F$Z]).id==F$J)return F$V;return null},F$J.removeTouchFromArr=function(F$J,F$y){var F$T=0;for(F$T=F$y.length-1;0<=F$T;F$T--)F$y[F$T].id==F$J&&F$y.splice(F$T,1)},F$J.createTouchO=function(F$J,F$y){var F$T;return(F$T=F$b.getItem("TouchData")||{}).id=F$y,F$T.tar=F$J,F$T},F$J.onMouseDown=function(F$J,F$y,F$T){var F$V,F$Z,F$m,F$R;(void 0===F$T&&(F$T=!1),this.enable)&&(F$V=this.getTouchFromArr(F$y,this.preOvers),F$m=this.getEles(F$J,null,F$B._tEleArr),F$V?F$V.tar=F$J:(F$Z=this.createTouchO(F$J,F$y),this.preOvers.push(F$Z)),F$f.onMobile&&this.sendEvents(F$m,"mouseover",F$y),F$R=F$T?this.preDowns:this.preRightDowns,(F$V=this.getTouchFromArr(F$y,F$R))?F$V.tar=F$J:(F$Z=this.createTouchO(F$J,F$y),F$R.push(F$Z)),this.sendEvents(F$m,F$T?"mousedown":"rightmousedown",F$y),this._clearTempArrs())},F$J.sendEvents=function(F$J,F$y,F$T){void 0===F$T&&(F$T=0);var F$V,F$Z,F$m,F$R=0;for(F$V=F$J.length,this._event._stoped=!1,F$Z=F$J[0],F$R=0;F$R<F$V;F$R++){if((F$m=F$J[F$R]).destroyed)return;if(F$m.event(F$y,this._event.setTo(F$y,F$m,F$Z)),this._event._stoped)break}},F$J.getEles=function(F$J,F$y,F$T){for(F$T?F$T.length=0:F$T=[];F$J&&F$J!=F$y;)F$T.push(F$J),F$J=F$J.parent;return F$T},F$J.checkMouseOutAndOverOfMove=function(F$J,F$y,F$T){if(void 0===F$T&&(F$T=0),F$y!=F$J){var F$V,F$Z,F$m=0,F$R=0;if(F$y.contains(F$J))F$Z=this.getEles(F$J,F$y,F$B._tEleArr),this.sendEvents(F$Z,"mouseover",F$T);else if(F$J.contains(F$y))F$Z=this.getEles(F$y,F$J,F$B._tEleArr),this.sendEvents(F$Z,"mouseout",F$T);else{var F$n,F$K;(F$Z=F$B._tEleArr).length=0,F$n=this.getEles(F$y,null,F$B._oldArr),F$K=this.getEles(F$J,null,F$B._newArr),F$R=F$n.length;var F$A=0;for(F$m=0;F$m<F$R;F$m++){if(F$V=F$n[F$m],0<=(F$A=F$K.indexOf(F$V))){F$K.splice(F$A,F$K.length-F$A);break}F$Z.push(F$V)}0<F$Z.length&&this.sendEvents(F$Z,"mouseout",F$T),0<F$K.length&&this.sendEvents(F$K,"mouseover",F$T)}}},F$J.onMouseMove=function(F$J,F$y){var F$T,F$V;this.enable&&((F$T=this.getTouchFromArr(F$y,this.preOvers))?(this.checkMouseOutAndOverOfMove(F$J,F$T.tar),F$T.tar=F$J,F$V=this.getEles(F$J,null,F$B._tEleArr)):(F$V=this.getEles(F$J,null,F$B._tEleArr),this.sendEvents(F$V,"mouseover",F$y),this.preOvers.push(this.createTouchO(F$J,F$y))),this.sendEvents(F$V,"mousemove",F$y),this._clearTempArrs())},F$J.getLastOvers=function(){return(F$B._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,F$B._tEleArr):(F$B._tEleArr.push(F$a.stage),F$B._tEleArr)},F$J.stageMouseOut=function(){var F$J;F$J=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(F$J,"mouseout",0)},F$J.onMouseUp=function(F$J,F$y,F$T){if(void 0===F$T&&(F$T=!1),this.enable){var F$V,F$Z,F$m,F$R,F$n,F$K,F$A=0,F$$=0,F$e=F$f.onMobile;if(F$Z=this.getEles(F$J,null,F$B._tEleArr),this.sendEvents(F$Z,F$T?"mouseup":"rightmouseup",F$y),F$K=F$T?this.preDowns:this.preRightDowns,F$V=this.getTouchFromArr(F$y,F$K)){var F$M,F$G=F$f.now();if(F$M=F$G-this._lastClickTime<300,this._lastClickTime=F$G,F$J==F$V.tar)F$n=F$Z;else for(F$m=this.getEles(F$V.tar,null,F$B._oldArr),(F$n=F$B._newArr).length=0,F$$=F$m.length,F$A=0;F$A<F$$;F$A++)F$R=F$m[F$A],0<=F$Z.indexOf(F$R)&&F$n.push(F$R);0<F$n.length&&this.sendEvents(F$n,F$T?"click":"rightclick",F$y),F$T&&F$M&&this.sendEvents(F$n,"doubleclick",F$y),this.removeTouchFromArr(F$y,F$K),F$V.tar=null,F$b.recover("TouchData",F$V)}else;(F$V=this.getTouchFromArr(F$y,this.preOvers))&&F$e&&((F$n=this.getEles(F$V.tar,null,F$n))&&0<F$n.length&&this.sendEvents(F$n,"mouseout",F$y),this.removeTouchFromArr(F$y,this.preOvers),F$V.tar=null,F$b.recover("TouchData",F$V)),this._clearTempArrs()}},F$B._oldArr=[],F$B._newArr=[],F$B._tEleArr=[],F$K(F$B,["I",function(){return this.I=new F$B}]),F$B}(),F$E=function(){function F$J(){this._action=null}F$$(F$J,"laya.filters.Filter");var F$y=F$J.prototype;return F$a.imps(F$y,{"laya.filters.IFilter":!0}),F$y.callNative=function(F$J){},F$B(0,F$y,"type",function(){return-1}),F$B(0,F$y,"action",function(){return this._action}),F$J.BLUR=16,F$J.COLOR=32,F$J.GLOW=8,F$J._filterStart=null,F$J._filterEnd=null,F$J._EndTarget=null,F$J._recycleScope=null,F$J._filter=null,F$J._useSrc=null,F$J._endSrc=null,F$J._useOut=null,F$J._endOut=null,F$J}(),F$L=function(){function F$J(){this.data=null}F$$(F$J,"laya.filters.ColorFilterAction");var F$y=F$J.prototype;return F$a.imps(F$y,{"laya.filters.IFilterAction":!0}),F$y.apply=function(F$J){var F$y=F$J.ctx.ctx,F$T=F$J.ctx.ctx.canvas;if(0==F$T.width||0==F$T.height)return F$T;for(var F$V,F$Z=F$y.getImageData(0,0,F$T.width,F$T.height),F$m=F$Z.data,F$R=0,F$n=F$m.length;F$R<F$n;F$R+=4)F$V=this.getColor(F$m[F$R],F$m[F$R+1],F$m[F$R+2],F$m[F$R+3]),0!=F$m[F$R+3]&&(F$m[F$R]=F$V[0],F$m[F$R+1]=F$V[1],F$m[F$R+2]=F$V[2],F$m[F$R+3]=F$V[3]);return F$y.putImageData(F$Z,0,0),F$J},F$y.getColor=function(F$J,F$y,F$T,F$V){var F$Z=[];if(this.data._mat&&this.data._alpha){var F$m=this.data._mat,F$R=this.data._alpha;F$Z[0]=F$m[0]*F$J+F$m[1]*F$y+F$m[2]*F$T+F$m[3]*F$V+F$R[0],F$Z[1]=F$m[4]*F$J+F$m[5]*F$y+F$m[6]*F$T+F$m[7]*F$V+F$R[1],F$Z[2]=F$m[8]*F$J+F$m[9]*F$y+F$m[10]*F$T+F$m[11]*F$V+F$R[2],F$Z[3]=F$m[12]*F$J+F$m[13]*F$y+F$m[14]*F$T+F$m[15]*F$V+F$R[3]}return F$Z},F$J}(),F$H=(function(){function F$J(){}F$$(F$J,"laya.maths.Arith"),F$J.formatR=function(F$J){return F$J>Math.PI&&(F$J-=2*Math.PI),F$J<-Math.PI&&(F$J+=2*Math.PI),F$J},F$J.isPOT=function(F$J,F$y){return 0<F$J&&0==(F$J&F$J-1)&&0<F$y&&0==(F$y&F$y-1)},F$J.setMatToArray=function(F$J,F$y){F$J.a,F$J.b,F$J.c,F$J.d,F$J.tx,F$J.ty,F$y[0]=F$J.a,F$y[1]=F$J.b,F$y[4]=F$J.c,F$y[5]=F$J.d,F$y[12]=F$J.tx,F$y[13]=F$J.ty}}(),function(){function F$J(){this._controlPoints=[new F$q,new F$q,new F$q],this._calFun=this.getPoint2}F$$(F$J,"laya.maths.Bezier");var F$y=F$J.prototype;return F$y._switchPoint=function(F$J,F$y){var F$T=this._controlPoints.shift();F$T.setTo(F$J,F$y),this._controlPoints.push(F$T)},F$y.getPoint2=function(F$J,F$y){var F$T=this._controlPoints[0],F$V=this._controlPoints[1],F$Z=this._controlPoints[2],F$m=Math.pow(1-F$J,2)*F$T.x+2*F$J*(1-F$J)*F$V.x+Math.pow(F$J,2)*F$Z.x,F$R=Math.pow(1-F$J,2)*F$T.y+2*F$J*(1-F$J)*F$V.y+Math.pow(F$J,2)*F$Z.y;F$y.push(F$m,F$R)},F$y.getPoint3=function(F$J,F$y){var F$T=this._controlPoints[0],F$V=this._controlPoints[1],F$Z=this._controlPoints[2],F$m=this._controlPoints[3],F$R=Math.pow(1-F$J,3)*F$T.x+3*F$V.x*F$J*(1-F$J)*(1-F$J)+3*F$Z.x*F$J*F$J*(1-F$J)+F$m.x*Math.pow(F$J,3),F$n=Math.pow(1-F$J,3)*F$T.y+3*F$V.y*F$J*(1-F$J)*(1-F$J)+3*F$Z.y*F$J*F$J*(1-F$J)+F$m.y*Math.pow(F$J,3);F$y.push(F$R,F$n)},F$y.insertPoints=function(F$J,F$y){var F$T,F$V=NaN;for(F$T=1/(F$J=0<F$J?F$J:5),F$V=0;F$V<=1;F$V+=F$T)this._calFun(F$V,F$y)},F$y.getBezierPoints=function(F$J,F$y,F$T){void 0===F$y&&(F$y=5),void 0===F$T&&(F$T=2);var F$V,F$Z,F$m=0;if((F$V=F$J.length)<2*(F$T+1))return[];switch(F$Z=[],F$T){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=F$T;)this._controlPoints.push(new F$q);for(F$m=0;F$m<2*F$T;F$m+=2)this._switchPoint(F$J[F$m],F$J[F$m+1]);for(F$m=2*F$T;F$m<F$V;F$m+=2)this._switchPoint(F$J[F$m],F$J[F$m+1]),F$m/2%F$T==0&&this.insertPoints(F$y,F$Z);return F$Z},F$K(F$J,["I",function(){return this.I=new F$J}]),F$J}()),F$P=function(){function F$A(){}return F$$(F$A,"laya.maths.GrahamScan"),F$A.multiply=function(F$J,F$y,F$T){return(F$J.x-F$T.x)*(F$y.y-F$T.y)-(F$y.x-F$T.x)*(F$J.y-F$T.y)},F$A.dis=function(F$J,F$y){return(F$J.x-F$y.x)*(F$J.x-F$y.x)+(F$J.y-F$y.y)*(F$J.y-F$y.y)},F$A._getPoints=function(F$J,F$y,F$T){for(void 0===F$y&&(F$y=!1),F$A._mPointList||(F$A._mPointList=[]);F$A._mPointList.length<F$J;)F$A._mPointList.push(new F$q);return F$T||(F$T=[]),F$T.length=0,F$y?F$A.getFrom(F$T,F$A._mPointList,F$J):F$A.getFromR(F$T,F$A._mPointList,F$J),F$T},F$A.getFrom=function(F$J,F$y,F$T){var F$V=0;for(F$V=0;F$V<F$T;F$V++)F$J.push(F$y[F$V]);return F$J},F$A.getFromR=function(F$J,F$y,F$T){var F$V=0;for(F$V=0;F$V<F$T;F$V++)F$J.push(F$y.pop());return F$J},F$A.pListToPointList=function(F$J,F$y){void 0===F$y&&(F$y=!1);var F$T=0,F$V=F$J.length/2,F$Z=F$A._getPoints(F$V,F$y,F$A._tempPointList);for(F$T=0;F$T<F$V;F$T++)F$Z[F$T].setTo(F$J[F$T+F$T],F$J[F$T+F$T+1]);return F$Z},F$A.pointListToPlist=function(F$J){var F$y,F$T=0,F$V=F$J.length,F$Z=F$A._temPList;for(F$T=F$Z.length=0;F$T<F$V;F$T++)F$y=F$J[F$T],F$Z.push(F$y.x,F$y.y);return F$Z},F$A.scanPList=function(F$J){return F$g.copyArray(F$J,F$A.pointListToPlist(F$A.scan(F$A.pListToPointList(F$J,!0))))},F$A.scan=function(F$J){var F$y,F$T,F$V,F$Z=0,F$m=0,F$R=0,F$n=F$J.length,F$K={};for((F$T=F$A._temArr).length=0,F$Z=(F$n=F$J.length)-1;0<=F$Z;F$Z--)F$V=(F$y=F$J[F$Z]).x+"_"+F$y.y,F$K.hasOwnProperty(F$V)||(F$K[F$V]=!0,F$T.push(F$y));for(F$n=F$T.length,F$g.copyArray(F$J,F$T),F$Z=1;F$Z<F$n;F$Z++)(F$J[F$Z].y<F$J[F$R].y||F$J[F$Z].y==F$J[F$R].y&&F$J[F$Z].x<F$J[F$R].x)&&(F$R=F$Z);for(F$y=F$J[0],F$J[0]=F$J[F$R],F$J[F$R]=F$y,F$Z=1;F$Z<F$n-1;F$Z++){for(F$m=(F$R=F$Z)+1;F$m<F$n;F$m++)(0<F$A.multiply(F$J[F$m],F$J[F$R],F$J[0])||0==F$A.multiply(F$J[F$m],F$J[F$R],F$J[0])&&F$A.dis(F$J[0],F$J[F$m])<F$A.dis(F$J[0],F$J[F$R]))&&(F$R=F$m);F$y=F$J[F$Z],F$J[F$Z]=F$J[F$R],F$J[F$R]=F$y}if((F$T=F$A._temArr).length=0,F$J.length<3)return F$g.copyArray(F$T,F$J);for(F$T.push(F$J[0],F$J[1],F$J[2]),F$Z=3;F$Z<F$n;F$Z++){for(;2<=F$T.length&&0<=F$A.multiply(F$J[F$Z],F$T[F$T.length-1],F$T[F$T.length-2]);)F$T.pop();F$J[F$Z]&&F$T.push(F$J[F$Z])}return F$T},F$A._mPointList=null,F$A._tempPointList=[],F$A._temPList=[],F$A._temArr=[],F$A}(),F$l=function(){function F$Z(){}return F$$(F$Z,"laya.maths.MathUtil"),F$Z.subtractVector3=function(F$J,F$y,F$T){F$T[0]=F$J[0]-F$y[0],F$T[1]=F$J[1]-F$y[1],F$T[2]=F$J[2]-F$y[2]},F$Z.lerp=function(F$J,F$y,F$T){return F$J*(1-F$T)+F$y*F$T},F$Z.scaleVector3=function(F$J,F$y,F$T){F$T[0]=F$J[0]*F$y,F$T[1]=F$J[1]*F$y,F$T[2]=F$J[2]*F$y},F$Z.lerpVector3=function(F$J,F$y,F$T,F$V){var F$Z=F$J[0],F$m=F$J[1],F$R=F$J[2];F$V[0]=F$Z+F$T*(F$y[0]-F$Z),F$V[1]=F$m+F$T*(F$y[1]-F$m),F$V[2]=F$R+F$T*(F$y[2]-F$R)},F$Z.lerpVector4=function(F$J,F$y,F$T,F$V){var F$Z=F$J[0],F$m=F$J[1],F$R=F$J[2],F$n=F$J[3];F$V[0]=F$Z+F$T*(F$y[0]-F$Z),F$V[1]=F$m+F$T*(F$y[1]-F$m),F$V[2]=F$R+F$T*(F$y[2]-F$R),F$V[3]=F$n+F$T*(F$y[3]-F$n)},F$Z.slerpQuaternionArray=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){var F$n,F$K,F$A,F$$,F$e,F$M=F$J[F$y+0],F$G=F$J[F$y+1],F$B=F$J[F$y+2],F$o=F$J[F$y+3],F$s=F$T[F$V+0],F$E=F$T[F$V+1],F$O=F$T[F$V+2],F$L=F$T[F$V+3];return(F$K=F$M*F$s+F$G*F$E+F$B*F$O+F$o*F$L)<0&&(F$K=-F$K,F$s=-F$s,F$E=-F$E,F$O=-F$O,F$L=-F$L),F$e=1e-6<1-F$K?(F$n=Math.acos(F$K),F$A=Math.sin(F$n),F$$=Math.sin((1-F$Z)*F$n)/F$A,Math.sin(F$Z*F$n)/F$A):(F$$=1-F$Z,F$Z),F$m[F$R+0]=F$$*F$M+F$e*F$s,F$m[F$R+1]=F$$*F$G+F$e*F$E,F$m[F$R+2]=F$$*F$B+F$e*F$O,F$m[F$R+3]=F$$*F$o+F$e*F$L,F$m},F$Z.getRotation=function(F$J,F$y,F$T,F$V){return Math.atan2(F$V-F$y,F$T-F$J)/Math.PI*180},F$Z.sortBigFirst=function(F$J,F$y){return F$J==F$y?0:F$J<F$y?1:-1},F$Z.sortSmallFirst=function(F$J,F$y){return F$J==F$y?0:F$J<F$y?-1:1},F$Z.sortNumBigFirst=function(F$J,F$y){return parseFloat(F$y)-parseFloat(F$J)},F$Z.sortNumSmallFirst=function(F$J,F$y){return parseFloat(F$J)-parseFloat(F$y)},F$Z.sortByKey=function(F$T,F$J,F$y){var F$V;return void 0===F$J&&(F$J=!1),void 0===F$y&&(F$y=!0),F$V=F$J?F$y?F$Z.sortNumBigFirst:F$Z.sortBigFirst:F$y?F$Z.sortNumSmallFirst:F$Z.sortSmallFirst,function(F$J,F$y){return F$V(F$J[F$T],F$y[F$T])}},F$Z}(),F$Q=function(){function F$T(F$J,F$y,F$T,F$V,F$Z,F$m){this.inPool=!1,this.bTransform=!1,void 0===F$J&&(F$J=1),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=1),void 0===F$Z&&(F$Z=0),void 0===F$m&&(F$m=0),this.a=F$J,this.b=F$y,this.c=F$T,this.d=F$V,this.tx=F$Z,this.ty=F$m,this._checkTransform()}F$$(F$T,"laya.maths.Matrix");var F$J=F$T.prototype;return F$J.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},F$J._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},F$J.setTranslate=function(F$J,F$y){return this.tx=F$J,this.ty=F$y,this},F$J.translate=function(F$J,F$y){return this.tx+=F$J,this.ty+=F$y,this},F$J.scale=function(F$J,F$y){this.a*=F$J,this.d*=F$y,this.c*=F$J,this.b*=F$y,this.tx*=F$J,this.ty*=F$y,this.bTransform=!0},F$J.rotate=function(F$J){var F$y=Math.cos(F$J),F$T=Math.sin(F$J),F$V=this.a,F$Z=this.c,F$m=this.tx;this.a=F$V*F$y-this.b*F$T,this.b=F$V*F$T+this.b*F$y,this.c=F$Z*F$y-this.d*F$T,this.d=F$Z*F$T+this.d*F$y,this.tx=F$m*F$y-this.ty*F$T,this.ty=F$m*F$T+this.ty*F$y,this.bTransform=!0},F$J.skew=function(F$J,F$y){var F$T=Math.tan(F$J),F$V=Math.tan(F$y),F$Z=this.a,F$m=this.b;return this.a+=F$V*this.c,this.b+=F$V*this.d,this.c+=F$T*F$Z,this.d+=F$T*F$m,this},F$J.invertTransformPoint=function(F$J){var F$y=this.a,F$T=this.b,F$V=this.c,F$Z=this.d,F$m=this.tx,F$R=F$y*F$Z-F$T*F$V,F$n=F$Z/F$R,F$K=-F$T/F$R,F$A=-F$V/F$R,F$$=F$y/F$R,F$e=(F$V*this.ty-F$Z*F$m)/F$R,F$M=-(F$y*this.ty-F$T*F$m)/F$R;return F$J.setTo(F$n*F$J.x+F$A*F$J.y+F$e,F$K*F$J.x+F$$*F$J.y+F$M)},F$J.transformPoint=function(F$J){return F$J.setTo(this.a*F$J.x+this.c*F$J.y+this.tx,this.b*F$J.x+this.d*F$J.y+this.ty)},F$J.transformPointN=function(F$J){return F$J.setTo(this.a*F$J.x+this.c*F$J.y,this.b*F$J.x+this.d*F$J.y)},F$J.transformPointArray=function(F$J,F$y){for(var F$T=F$J.length,F$V=0;F$V<F$T;F$V+=2){var F$Z=F$J[F$V],F$m=F$J[F$V+1];F$y[F$V]=this.a*F$Z+this.c*F$m+this.tx,F$y[F$V+1]=this.b*F$Z+this.d*F$m+this.ty}return F$y},F$J.transformPointArrayScale=function(F$J,F$y){for(var F$T=F$J.length,F$V=0;F$V<F$T;F$V+=2){var F$Z=F$J[F$V],F$m=F$J[F$V+1];F$y[F$V]=this.a*F$Z+this.c*F$m,F$y[F$V+1]=this.b*F$Z+this.d*F$m}return F$y},F$J.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},F$J.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},F$J.invert=function(){var F$J=this.a,F$y=this.b,F$T=this.c,F$V=this.d,F$Z=this.tx,F$m=F$J*F$V-F$y*F$T;return this.a=F$V/F$m,this.b=-F$y/F$m,this.c=-F$T/F$m,this.d=F$J/F$m,this.tx=(F$T*this.ty-F$V*F$Z)/F$m,this.ty=-(F$J*this.ty-F$y*F$Z)/F$m,this},F$J.setTo=function(F$J,F$y,F$T,F$V,F$Z,F$m){return this.a=F$J,this.b=F$y,this.c=F$T,this.d=F$V,this.tx=F$Z,this.ty=F$m,this},F$J.concat=function(F$J){var F$y=this.a,F$T=this.c,F$V=this.tx;return this.a=F$y*F$J.a+this.b*F$J.c,this.b=F$y*F$J.b+this.b*F$J.d,this.c=F$T*F$J.a+this.d*F$J.c,this.d=F$T*F$J.b+this.d*F$J.d,this.tx=F$V*F$J.a+this.ty*F$J.c+F$J.tx,this.ty=F$V*F$J.b+this.ty*F$J.d+F$J.ty,this},F$J.scaleEx=function(F$J,F$y){var F$T=this.a,F$V=this.b,F$Z=this.c,F$m=this.d;0!==F$V||0!==F$Z?(this.a=F$J*F$T,this.b=F$J*F$V,this.c=F$y*F$Z):(this.a=F$J*F$T,this.b=0*F$m,this.c=0*F$T),this.d=F$y*F$m,this.bTransform=!0},F$J.rotateEx=function(F$J){var F$y=Math.cos(F$J),F$T=Math.sin(F$J),F$V=this.a,F$Z=this.b,F$m=this.c,F$R=this.d;0!==F$Z||0!==F$m?(this.a=F$y*F$V+F$T*F$m,this.b=F$y*F$Z+F$T*F$R,this.c=-F$T*F$V+F$y*F$m,this.d=-F$T*F$Z+F$y*F$R):(this.a=F$y*F$V,this.b=F$T*F$R,this.c=-F$T*F$V,this.d=F$y*F$R),this.bTransform=!0},F$J.clone=function(){var F$J=F$T.create();return F$J.a=this.a,F$J.b=this.b,F$J.c=this.c,F$J.d=this.d,F$J.tx=this.tx,F$J.ty=this.ty,F$J.bTransform=this.bTransform,F$J},F$J.copyTo=function(F$J){return F$J.a=this.a,F$J.b=this.b,F$J.c=this.c,F$J.d=this.d,F$J.tx=this.tx,F$J.ty=this.ty,F$J.bTransform=this.bTransform,F$J},F$J.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},F$J.destroy=function(){if(!this.inPool){var F$J=F$T._cache;this.inPool=!0,F$J._length||(F$J._length=0),(F$J[F$J._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},F$T.mul=function(F$J,F$y,F$T){var F$V=F$J.a,F$Z=F$J.b,F$m=F$J.c,F$R=F$J.d,F$n=F$J.tx,F$K=F$J.ty,F$A=F$y.a,F$$=F$y.b,F$e=F$y.c,F$M=F$y.d,F$G=F$y.tx,F$B=F$y.ty;return 0!==F$$||0!==F$e?(F$T.a=F$V*F$A+F$Z*F$e,F$T.b=F$V*F$$+F$Z*F$M,F$T.c=F$m*F$A+F$R*F$e,F$T.d=F$m*F$$+F$R*F$M,F$T.tx=F$A*F$n+F$e*F$K+F$G,F$T.ty=F$$*F$n+F$M*F$K+F$B):(F$T.a=F$V*F$A,F$T.b=F$Z*F$M,F$T.c=F$m*F$A,F$T.d=F$R*F$M,F$T.tx=F$A*F$n+F$G,F$T.ty=F$M*F$K+F$B),F$T},F$T.mul16=function(F$J,F$y,F$T){var F$V=F$J.a,F$Z=F$J.b,F$m=F$J.c,F$R=F$J.d,F$n=F$J.tx,F$K=F$J.ty,F$A=F$y.a,F$$=F$y.b,F$e=F$y.c,F$M=F$y.d,F$G=F$y.tx,F$B=F$y.ty;return 0!==F$$||0!==F$e?(F$T[0]=F$V*F$A+F$Z*F$e,F$T[1]=F$V*F$$+F$Z*F$M,F$T[4]=F$m*F$A+F$R*F$e,F$T[5]=F$m*F$$+F$R*F$M,F$T[12]=F$A*F$n+F$e*F$K+F$G,F$T[13]=F$$*F$n+F$M*F$K+F$B):(F$T[0]=F$V*F$A,F$T[1]=F$Z*F$M,F$T[4]=F$m*F$A,F$T[5]=F$R*F$M,F$T[12]=F$A*F$n+F$G,F$T[13]=F$M*F$K+F$B),F$T},F$T.mulPre=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){var F$K=F$J.a,F$A=F$J.b,F$$=F$J.c,F$e=F$J.d,F$M=F$J.tx,F$G=F$J.ty;return 0!==F$T||0!==F$V?(F$n.a=F$K*F$y+F$A*F$V,F$n.b=F$K*F$T+F$A*F$Z,F$n.c=F$$*F$y+F$e*F$V,F$n.d=F$$*F$T+F$e*F$Z,F$n.tx=F$y*F$M+F$V*F$G+F$m,F$n.ty=F$T*F$M+F$Z*F$G+F$R):(F$n.a=F$K*F$y,F$n.b=F$A*F$Z,F$n.c=F$$*F$y,F$n.d=F$e*F$Z,F$n.tx=F$y*F$M+F$m,F$n.ty=F$Z*F$G+F$R),F$n},F$T.mulPos=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){var F$K=F$J.a,F$A=F$J.b,F$$=F$J.c,F$e=F$J.d,F$M=F$J.tx,F$G=F$J.ty;return 0!==F$A||0!==F$$?(F$n.a=F$y*F$K+F$T*F$$,F$n.b=F$y*F$A+F$T*F$e,F$n.c=F$V*F$K+F$Z*F$$,F$n.d=F$V*F$A+F$Z*F$e,F$n.tx=F$K*F$m+F$$*F$R+F$M,F$n.ty=F$A*F$m+F$e*F$R+F$G):(F$n.a=F$y*F$K,F$n.b=F$T*F$e,F$n.c=F$V*F$K,F$n.d=F$Z*F$e,F$n.tx=F$K*F$m+F$M,F$n.ty=F$e*F$R+F$G),F$n},F$T.preMul=function(F$J,F$y,F$T){var F$V=F$J.a,F$Z=F$J.b,F$m=F$J.c,F$R=F$J.d,F$n=F$y.a,F$K=F$y.b,F$A=F$y.c,F$$=F$y.d,F$e=F$y.tx,F$M=F$y.ty;return F$T.a=F$n*F$V,F$T.b=F$T.c=0,F$T.d=F$$*F$R,F$T.tx=F$e*F$V+F$J.tx,F$T.ty=F$M*F$R+F$J.ty,0===F$K&&0===F$A&&0===F$Z&&0===F$m||(F$T.a+=F$K*F$m,F$T.d+=F$A*F$Z,F$T.b+=F$n*F$Z+F$K*F$R,F$T.c+=F$A*F$V+F$$*F$m,F$T.tx+=F$M*F$m,F$T.ty+=F$e*F$Z),F$T},F$T.preMulXY=function(F$J,F$y,F$T,F$V){var F$Z=F$J.a,F$m=F$J.b,F$R=F$J.c,F$n=F$J.d;return F$V.a=F$Z,F$V.b=F$m,F$V.c=F$R,F$V.d=F$n,F$V.tx=F$y*F$Z+F$J.tx+F$T*F$R,F$V.ty=F$T*F$n+F$J.ty+F$y*F$m,F$V},F$T.create=function(){var F$J=F$T._cache,F$y=F$J._length?F$J[--F$J._length]:new F$T;return F$y.inPool=!1,F$y},F$T.EMPTY=new F$T,F$T.TEMP=new F$T,F$T._cache=[],F$T}(),F$q=function(){function F$J(F$J,F$y){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),this.x=F$J,this.y=F$y}F$$(F$J,"laya.maths.Point");var F$y=F$J.prototype;return F$y.setTo=function(F$J,F$y){return this.x=F$J,this.y=F$y,this},F$y.distance=function(F$J,F$y){return Math.sqrt((this.x-F$J)*(this.x-F$J)+(this.y-F$y)*(this.y-F$y))},F$y.toString=function(){return this.x+","+this.y},F$y.normalize=function(){var F$J=Math.sqrt(this.x*this.x+this.y*this.y);if(0<F$J){var F$y=1/F$J;this.x*=F$y,this.y*=F$y}},F$J.TEMP=new F$J,F$J.EMPTY=new F$J,F$J}(),F$r=function(){function F$A(F$J,F$y,F$T,F$V){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=0),this.x=F$J,this.y=F$y,this.width=F$T,this.height=F$V}F$$(F$A,"laya.maths.Rectangle");var F$J=F$A.prototype;return F$J.setTo=function(F$J,F$y,F$T,F$V){return this.x=F$J,this.y=F$y,this.width=F$T,this.height=F$V,this},F$J.copyFrom=function(F$J){return this.x=F$J.x,this.y=F$J.y,this.width=F$J.width,this.height=F$J.height,this},F$J.contains=function(F$J,F$y){return!(this.width<=0||this.height<=0)&&(F$J>=this.x&&F$J<this.right&&F$y>=this.y&&F$y<this.bottom)},F$J.intersects=function(F$J){return!(F$J.x>this.x+this.width||F$J.x+F$J.width<this.x||F$J.y>this.y+this.height||F$J.y+F$J.height<this.y)},F$J.intersection=function(F$J,F$y){return this.intersects(F$J)?(F$y||(F$y=new F$A),F$y.x=Math.max(this.x,F$J.x),F$y.y=Math.max(this.y,F$J.y),F$y.width=Math.min(this.right,F$J.right)-F$y.x,F$y.height=Math.min(this.bottom,F$J.bottom)-F$y.y,F$y):null},F$J.union=function(F$J,F$y){return F$y||(F$y=new F$A),this.clone(F$y),F$J.width<=0||F$J.height<=0?F$y:(F$y.addPoint(F$J.x,F$J.y),F$y.addPoint(F$J.right,F$J.bottom),this)},F$J.clone=function(F$J){return F$J||(F$J=new F$A),F$J.x=this.x,F$J.y=this.y,F$J.width=this.width,F$J.height=this.height,F$J},F$J.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},F$J.equals=function(F$J){return!(!F$J||F$J.x!==this.x||F$J.y!==this.y||F$J.width!==this.width||F$J.height!==this.height)},F$J.addPoint=function(F$J,F$y){return this.x>F$J&&(this.width+=this.x-F$J,this.x=F$J),this.y>F$y&&(this.height+=this.y-F$y,this.y=F$y),this.width<F$J-this.x&&(this.width=F$J-this.x),this.height<F$y-this.y&&(this.height=F$y-this.y),this},F$J._getBoundPoints=function(){var F$J=F$A._temB;return(F$J.length=0)==this.width||0==this.height||F$J.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),F$J},F$J.isEmpty=function(){return this.width<=0||this.height<=0},F$B(0,F$J,"right",function(){return this.x+this.width}),F$B(0,F$J,"bottom",function(){return this.y+this.height}),F$A._getBoundPointS=function(F$J,F$y,F$T,F$V){var F$Z=F$A._temA;return(F$Z.length=0)==F$T||0==F$V||F$Z.push(F$J,F$y,F$J+F$T,F$y,F$J,F$y+F$V,F$J+F$T,F$y+F$V),F$Z},F$A._getWrapRec=function(F$J,F$y){if(!F$J||F$J.length<1)return F$y?F$y.setTo(0,0,0,0):F$A.TEMP.setTo(0,0,0,0);F$y=F$y||new F$A;var F$T,F$V,F$Z,F$m,F$R,F$n=F$J.length,F$K=F$q.TEMP;for(F$Z=F$R=-(F$V=F$m=99999),F$T=0;F$T<F$n;F$T+=2)F$K.x=F$J[F$T],F$K.y=F$J[F$T+1],F$V=F$V<F$K.x?F$V:F$K.x,F$m=F$m<F$K.y?F$m:F$K.y,F$Z=F$Z>F$K.x?F$Z:F$K.x,F$R=F$R>F$K.y?F$R:F$K.y;return F$y.setTo(F$V,F$m,F$Z-F$V,F$R-F$m)},F$A.EMPTY=new F$A,F$A.TEMP=new F$A,F$A._temB=[],F$A._temA=[],F$A}(),F$t=function(){function F$K(){}return F$$(F$K,"laya.media.SoundManager"),F$B(1,F$K,"useAudioMusic",function(){return F$K._useAudioMusic},function(F$J){F$K._useAudioMusic=F$J,F$K._musicClass=F$J?F$TJ:null}),F$B(1,F$K,"autoStopMusic",function(){return F$K._autoStopMusic},function(F$J){F$a.stage.off("blur",null,F$K._stageOnBlur),F$a.stage.off("focus",null,F$K._stageOnFocus),F$a.stage.off("visibilitychange",null,F$K._visibilityChange),(F$K._autoStopMusic=F$J)&&(F$a.stage.on("blur",null,F$K._stageOnBlur),F$a.stage.on("focus",null,F$K._stageOnFocus),F$a.stage.on("visibilitychange",null,F$K._visibilityChange))}),F$B(1,F$K,"muted",function(){return F$K._muted},function(F$J){F$J!=F$K._muted&&(F$J&&F$K.stopAllSound(),F$K.musicMuted=F$J,F$K._muted=F$J)}),F$B(1,F$K,"musicMuted",function(){return F$K._musicMuted},function(F$J){F$J!=F$K._musicMuted&&(F$J?(F$K._tMusic&&F$K._musicChannel&&!F$K._musicChannel.isStopped?F$K._musicChannel.pause():F$K._musicChannel=null,F$K._musicMuted=F$J):(F$K._musicMuted=F$J,F$K._tMusic&&F$K._musicChannel&&F$K._musicChannel.resume()))}),F$B(1,F$K,"soundMuted",function(){return F$K._soundMuted},function(F$J){F$K._soundMuted=F$J}),F$K.addChannel=function(F$J){0<=F$K._channels.indexOf(F$J)||(F$K._channels.push(F$J),F$K.autoReleaseSound&&0!=F$K._notUsedCount&&F$K._notUsedUrls[F$J.url]&&(delete F$K._notUsedUrls[F$J.url],0==--F$K._notUsedCount&&F$a.timer.clear(F$K,F$K.disposeSoundIfNotUsed)))},F$K.removeChannel=function(F$J){var F$y=F$K._channels,F$T=F$y.indexOf(F$J);if(-1!=F$T&&(F$y.splice(F$T,1),F$K.autoReleaseSound)){var F$V=F$J.url,F$Z=F$K.defaultIntervals[F$V]||2e4;if(0<F$Z){var F$m=!0;for(F$T=F$y.length-1;0<=F$T;F$T--)if(F$y[F$T].url==F$V){F$m=!1;break}F$m&&(F$K._notUsedUrls[F$V]=Date.now()+F$Z,0==F$K._notUsedCount++&&F$a.timer.loop(1e4,F$K,F$K.disposeSoundIfNotUsed))}}},F$K.disposeSoundIfNotUsed=function(){var F$J=F$K._notUsedUrls;if(0!=F$K._notUsedCount){var F$y=Date.now();for(var F$T in F$J)F$y>=F$J[F$T]&&(delete F$J[F$T],--F$K._notUsedCount,F$K.destroySound(F$T));if(0!=F$K._notUsedCount)return}F$a.timer.clear(F$K,F$K.disposeSoundIfNotUsed)},F$K._visibilityChange=function(){F$a.stage.isVisibility?F$K._stageOnFocus():F$K._stageOnBlur()},F$K._stageOnBlur=function(){F$K._isActive=!1,F$K._musicChannel&&(F$K._musicChannel.isStopped||(F$K._blurPaused=!0,F$K._musicChannel.pause())),F$K.stopAllSound(),F$a.stage.once("mousedown",null,F$K._stageOnFocus)},F$K._recoverWebAudio=function(){F$mJ.ctx&&"running"!=F$mJ.ctx.state&&F$mJ.ctx.resume&&F$mJ.ctx.resume()},F$K._stageOnFocus=function(){if(F$K._isActive=!0,F$K._recoverWebAudio(),F$a.stage.off("mousedown",null,F$K._stageOnFocus),F$K._blurPaused){var F$J=F$K._musicChannel;F$J&&F$K._music&&F$J.isStopped&&(F$K._blurPaused=!1,F$K._music._disposed?F$K.playMusic(F$J.url,F$J.loops,F$J.startHandler,F$J.completeHandler,F$J.startTime):F$J.audioBuffer?F$J.resume():F$K._music.play(F$J.startTime,F$J.loops,F$J.startHandler,F$J))}},F$K.playSound=function(F$J,F$y,F$T,F$V,F$Z,F$m){if(void 0===F$y&&(F$y=1),void 0===F$m&&(F$m=0),!F$J)return null;if(F$K._muted)return null;if(F$K._recoverWebAudio(),F$J==F$K._tMusic){if(F$K._musicMuted)return null}else{if(!F$K._isActive)return null;if(F$K._soundMuted)return null}var F$R,F$n=F$K._pool[F$J];return F$Z||(F$Z=F$K._soundClass),F$n||((F$n=new F$Z).load(F$J),F$K._pool[F$J]=F$n),(F$R=F$n.play(F$m,F$y,F$T))?(F$J==F$K._tMusic&&(F$K._music=F$n,F$K._isActive||(F$K._blurPaused=!0,F$R.pause())),F$R.url=F$J,F$R.volume=F$J==F$K._tMusic?F$K.musicVolume:F$K.soundVolume,F$R.completeHandler=F$V,F$R):null},F$K.destroySound=function(F$J){var F$y=F$K._pool[F$J];F$y&&(delete F$K._pool[F$J],F$y.dispose())},F$K.playMusic=function(F$J,F$y,F$T,F$V,F$Z){return void 0===F$y&&(F$y=0),void 0===F$Z&&(F$Z=0),F$K._tMusic=F$J,F$K._musicChannel&&F$K._musicChannel.stop(),F$K._musicChannel=F$K.playSound(F$J,F$y,F$T,F$V,null,F$Z)},F$K.stopSound=function(F$J){for(var F$y,F$T=F$K._channels.length-1;0<=F$T;F$T--)(F$y=F$K._channels[F$T]).url==F$J&&F$y.stop()},F$K.stopAll=function(){F$K._tMusic=null;var F$J=0;for(F$J=F$K._channels.length-1;0<=F$J;F$J--)F$K._channels[F$J].stop()},F$K.stopAllSound=function(){var F$J,F$y=0;for(F$y=F$K._channels.length-1;0<=F$y;F$y--)(F$J=F$K._channels[F$y]).url!=F$K._tMusic&&F$J.stop()},F$K.stopMusic=function(){F$K._musicChannel&&F$K._musicChannel.stop(),F$K._tMusic=null},F$K.setSoundVolume=function(F$J,F$y){if(F$y)F$K._setVolume(F$y,F$J);else{F$K.soundVolume=F$J;var F$T,F$V=0;for(F$V=F$K._channels.length-1;0<=F$V;F$V--)(F$T=F$K._channels[F$V]).url!=F$K._tMusic&&(F$T.volume=F$J)}},F$K.setMusicVolume=function(F$J){F$K.musicVolume=F$J,F$K._setVolume(F$K._tMusic,F$J)},F$K._setVolume=function(F$J,F$y){for(var F$T,F$V=F$K._channels.length-1;0<=F$V;F$V--)(F$T=F$K._channels[F$V]).url==F$J&&(F$T.volume=F$y)},F$K.musicVolume=1,F$K.soundVolume=1,F$K.playbackRate=1,F$K._useAudioMusic=!0,F$K._muted=!1,F$K._soundMuted=!1,F$K._musicMuted=!1,F$K._tMusic=null,F$K._musicChannel=null,F$K._music=null,F$K._channels=[],F$K._autoStopMusic=!1,F$K._blurPaused=!1,F$K._isActive=!0,F$K._soundClass=null,F$K._musicClass=null,F$K.autoReleaseSound=!0,F$K._pool={},F$K.defaultIntervals={},F$K._notUsedUrls={},F$K._notUsedCount=0,F$K}(),F$D=function(){var F$J;function F$T(){}return F$$(F$T,"laya.net.LocalStorage"),F$T.__init__=function(){F$T._baseClass||(F$T._baseClass=F$J).init(),F$T.items=F$T._baseClass.items,F$T.support=F$T._baseClass.support},F$T.setItem=function(F$J,F$y){F$T._baseClass.setItem(F$J,F$y)},F$T.getItem=function(F$J){return F$T._baseClass.getItem(F$J)},F$T.setJSON=function(F$J,F$y){F$T._baseClass.setJSON(F$J,F$y)},F$T.getJSON=function(F$J){return F$T._baseClass.getJSON(F$J)},F$T.removeItem=function(F$J){F$T._baseClass.removeItem(F$J)},F$T.clear=function(){F$T._baseClass.clear()},F$T._baseClass=null,F$T.items=null,F$T.support=!1,F$T.__init$=function(){F$J=function(){function F$T(){}return F$$(F$T,""),F$T.init=function(){try{F$T.support=!0,F$T.items=F$R.localStorage,F$T.setItem("laya","1"),F$T.removeItem("laya")}catch(F$J){F$T.support=!1}F$T.support||console.log("LocalStorage is not supprot or browser is private mode.")},F$T.setItem=function(F$J,F$y){try{F$T.support&&F$T.items.setItem(F$J,F$y)}catch(F$J){console.warn("set localStorage failed",F$J)}},F$T.getItem=function(F$J){return F$T.support?F$T.items.getItem(F$J):null},F$T.setJSON=function(F$J,F$y){try{F$T.support&&F$T.items.setItem(F$J,JSON.stringify(F$y))}catch(F$J){console.warn("set localStorage failed",F$J)}},F$T.getJSON=function(F$J){return JSON.parse(F$T.support?F$T.items.getItem(F$J):null)},F$T.removeItem=function(F$J){F$T.support&&F$T.items.removeItem(F$J)},F$T.clear=function(){F$T.support&&F$T.items.clear()},F$T.items=null,F$T.support=!1,F$T}()},F$T}(),F$i=(function(){function F$V(){}F$$(F$V,"laya.net.ResourceVersion"),F$V.enable=function(F$J,F$y,F$T){void 0===F$T&&(F$T=2),laya.net.ResourceVersion.type=F$T,F$a.loader.load(F$J,F$O.create(null,F$V.onManifestLoaded,[F$y]),null,"json"),F$c.customFormat=F$V.addVersionPrefix},F$V.onManifestLoaded=function(F$J,F$y){F$V.manifest=F$y,F$J.run(),F$y||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},F$V.addVersionPrefix=function(F$J){return F$V.manifest&&F$V.manifest[F$J]?2==F$V.type?F$V.manifest[F$J]:F$V.manifest[F$J]+"/"+F$J:F$J},F$V.FOLDER_VERSION=1,F$V.FILENAME_VERSION=2,F$V.manifest=null,F$V.type=1}(),function(){function F$J(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}F$$(F$J,"laya.net.TTFLoader");var F$y=F$J.prototype;return F$y.load=function(F$J){var F$y=(this._url=F$J).split(".ttf")[0].split("/");this.fontName=F$y[F$y.length-1],F$f.window.conch?this._loadConch():F$f.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},F$y._loadConch=function(){this._http=new F$RJ,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},F$y._onHttpLoaded=function(F$J){F$f.window.conch.setFontFaceFromBuffer(this.fontName,F$J),this._clearHttp(),this._complete()},F$y._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},F$y._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},F$y._complete=function(){F$a.timer.clear(this,this._complete),F$a.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},F$y._checkComplete=function(){F$v.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},F$y._loadWithFontFace=function(){var F$J=new F$f.window.FontFace(this.fontName,"url('"+this._url+"')");F$f.window.document.fonts.add(F$J);var F$y=this;F$J.loaded.then(function(){F$y._complete()}),F$J.load()},F$y._createDiv=function(){this._div=F$f.createElement("div"),this._div.innerHTML="laya";var F$J=this._div.style;F$J.fontFamily=this.fontName,F$J.position="absolute",F$J.left="-100px",F$J.top="-100px",F$f.document.body.appendChild(this._div)},F$y._loadWithCSS=function(){var F$J=this,F$y=F$f.createElement("style");F$y.type="text/css",F$f.document.body.appendChild(F$y),F$y.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=F$v.measureText("LayaTTFFont",this._fontTxt).width;var F$T=this;F$y.onload=function(){F$a.timer.once(1e4,F$T,F$J._complete)},F$a.timer.loop(20,this,this._checkComplete),this._createDiv()},F$J._testString="LayaTTFFont",F$J}()),F$c=function(){function F$V(F$J){this._url=null,this._path=null,this._url=F$V.formatURL(F$J),this._path=F$V.getPath(F$J)}F$$(F$V,"laya.net.URL");var F$J=F$V.prototype;return F$B(0,F$J,"path",function(){return this._path}),F$B(0,F$J,"url",function(){return this._url}),F$V.formatURL=function(F$J,F$y){if(!F$J)return"null path";if(0<F$J.indexOf(":"))return F$J;null!=F$V.customFormat&&(F$J=F$V.customFormat(F$J,F$y));var F$T=F$J.charAt(0);if("."===F$T)return F$V.formatRelativePath((F$y||F$V.basePath)+F$J);if("~"===F$T)return F$V.rootPath+F$J.substring(1);if("d"===F$T){if(0===F$J.indexOf("data:image"))return F$J}else if("/"===F$T)return F$J;return(F$y||F$V.basePath)+F$J},F$V.formatRelativePath=function(F$J){for(var F$y=F$J.split("/"),F$T=0,F$V=F$y.length;F$T<F$V;F$T++)".."==F$y[F$T]&&(F$y.splice(F$T-1,2),F$T-=2);return F$y.join("/")},F$V.isAbsolute=function(F$J){return 0<F$J.indexOf(":")||"/"==F$J.charAt(0)},F$V.getPath=function(F$J){var F$y=F$J.lastIndexOf("/");return 0<F$y?F$J.substr(0,F$y+1):""},F$V.getFileName=function(F$J){var F$y=F$J.lastIndexOf("/");return 0<F$y?F$J.substr(F$y+1):F$J},F$V.version={},F$V.basePath="",F$V.rootPath="",F$V.customFormat=function(F$J){var F$y=F$V.version[F$J];return!F$u.isConchApp&&F$y&&(F$J+="?v="+F$y),F$J},F$V}(),F$u=function(){function F$Z(F$J,F$y){this._timeId=0;var F$T=F$Z._mainCanvas.source.style;F$T.position="absolute",F$T.top=F$T.left="0px",F$T.background="#000000",F$Z._mainCanvas.source.id="layaCanvas";var F$V=laya.renders.Render.isWebGL;F$Z._mainCanvas.source.width=F$J,F$Z._mainCanvas.source.height=F$y,F$V&&F$Z.WebGL.init(F$Z._mainCanvas,F$J,F$y),F$f.container.appendChild(F$Z._mainCanvas.source),(F$Z._context=new F$x(F$J,F$y,F$V?null:F$Z._mainCanvas)).ctx.setIsMainContext(),F$f.window.requestAnimationFrame(function F$J(F$y){F$f.window.requestAnimationFrame(F$J);F$a.stage._loop()}),F$a.stage.on("visibilitychange",this,this._onVisibilitychange)}F$$(F$Z,"laya.renders.Render");var F$J=F$Z.prototype;return F$J._onVisibilitychange=function(){F$a.stage.isVisibility?0!=this._timeId&&F$f.window.clearInterval(this._timeId):this._timeId=F$f.window.setInterval(this._enterFrame,1e3)},F$J._enterFrame=function(F$J){F$a.stage._loop()},F$B(1,F$Z,"context",function(){return F$Z._context}),F$B(1,F$Z,"canvas",function(){return F$Z._mainCanvas.source}),F$Z._context=null,F$Z._mainCanvas=null,F$Z.WebGL=null,F$Z.isConchNode=!1,F$Z.isConchApp=!1,F$Z.isConchWebGL=!1,F$Z.isWebGL=!1,F$Z.is3DMode=!1,F$Z.optimizeTextureMemory=function(F$J,F$y){return!0},F$Z.__init$=function(){F$R.ConchRenderType=F$R.ConchRenderType||1,F$R.ConchRenderType|=F$R.conch?4:0,F$Z.isConchNode=5==(5&F$R.ConchRenderType),F$Z.isConchApp=4==(4&F$R.ConchRenderType),F$Z.isConchWebGL=6==F$R.ConchRenderType},F$Z}(),F$x=function(){function F$R(F$J,F$y,F$T){this.x=0,this.y=0,this._drawTexture=function(F$J,F$y,F$T){F$T[0].loaded&&this.ctx.drawTexture(F$T[0],F$T[1],F$T[2],F$T[3],F$T[4],F$J,F$y)},this._fillTexture=function(F$J,F$y,F$T){F$T[0].loaded&&this.ctx.fillTexture(F$T[0],F$T[1]+F$J,F$T[2]+F$y,F$T[3],F$T[4],F$T[5],F$T[6],F$T[7])},this._drawTextureWithTransform=function(F$J,F$y,F$T){F$T[0].loaded&&this.ctx.drawTextureWithTransform(F$T[0],F$T[1],F$T[2],F$T[3],F$T[4],F$T[5],F$J,F$y,F$T[6])},this._fillQuadrangle=function(F$J,F$y,F$T){this.ctx.fillQuadrangle(F$T[0],F$T[1],F$T[2],F$T[3],F$T[4])},this._drawRect=function(F$J,F$y,F$T){var F$V=this.ctx;null!=F$T[4]&&(F$V.fillStyle=F$T[4],F$V.fillRect(F$J+F$T[0],F$y+F$T[1],F$T[2],F$T[3],null)),null!=F$T[5]&&(F$V.strokeStyle=F$T[5],F$V.lineWidth=F$T[6],F$V.strokeRect(F$J+F$T[0],F$y+F$T[1],F$T[2],F$T[3],F$T[6]))},this._drawPie=function(F$J,F$y,F$T){var F$V=this.ctx;F$u.isWebGL&&F$V.setPathId(F$T[8]),F$V.beginPath(),F$u.isWebGL?(F$V.movePath(F$T[0]+F$J,F$T[1]+F$y),F$V.moveTo(0,0)):F$V.moveTo(F$J+F$T[0],F$y+F$T[1]),F$V.arc(F$J+F$T[0],F$y+F$T[1],F$T[2],F$T[3],F$T[4]),F$V.closePath(),this._fillAndStroke(F$T[5],F$T[6],F$T[7],!0)},this._clipRect=function(F$J,F$y,F$T){this.ctx.clipRect(F$J+F$T[0],F$y+F$T[1],F$T[2],F$T[3])},this._fillRect=function(F$J,F$y,F$T){this.ctx.fillRect(F$J+F$T[0],F$y+F$T[1],F$T[2],F$T[3],F$T[4])},this._drawCircle=function(F$J,F$y,F$T){var F$V=this.ctx;F$u.isWebGL&&F$V.setPathId(F$T[6]),F$h.drawCall++,F$V.beginPath(),F$u.isWebGL&&F$V.movePath(F$T[0]+F$J,F$T[1]+F$y),F$V.arc(F$T[0]+F$J,F$T[1]+F$y,F$T[2],0,F$R.PI2),F$V.closePath(),this._fillAndStroke(F$T[3],F$T[4],F$T[5],!0)},this._fillCircle=function(F$J,F$y,F$T){F$h.drawCall++;var F$V=this.ctx;F$V.beginPath(),F$V.fillStyle=F$T[3],F$V.arc(F$T[0]+F$J,F$T[1]+F$y,F$T[2],0,F$R.PI2),F$V.fill()},this._setShader=function(F$J,F$y,F$T){this.ctx.setShader(F$T[0])},this._drawLine=function(F$J,F$y,F$T){var F$V=this.ctx;F$u.isWebGL&&F$V.setPathId(F$T[6]),F$V.beginPath(),F$V.strokeStyle=F$T[4],F$V.lineWidth=F$T[5],F$u.isWebGL?(F$V.movePath(F$J,F$y),F$V.moveTo(F$T[0],F$T[1]),F$V.lineTo(F$T[2],F$T[3])):(F$V.moveTo(F$J+F$T[0],F$y+F$T[1]),F$V.lineTo(F$J+F$T[2],F$y+F$T[3])),F$V.stroke()},this._drawLines=function(F$J,F$y,F$T){var F$V=this.ctx;F$u.isWebGL&&F$V.setPathId(F$T[5]),F$V.beginPath(),F$J+=F$T[0],F$y+=F$T[1],F$u.isWebGL&&F$V.movePath(F$J,F$y),F$V.strokeStyle=F$T[3],F$V.lineWidth=F$T[4];var F$Z=F$T[2],F$m=2,F$R=F$Z.length;if(F$u.isWebGL)for(F$V.moveTo(F$Z[0],F$Z[1]);F$m<F$R;)F$V.lineTo(F$Z[F$m++],F$Z[F$m++]);else for(F$V.moveTo(F$J+F$Z[0],F$y+F$Z[1]);F$m<F$R;)F$V.lineTo(F$J+F$Z[F$m++],F$y+F$Z[F$m++]);F$V.stroke()},this._drawLinesWebGL=function(F$J,F$y,F$T){this.ctx.drawLines(F$J+this.x+F$T[0],F$y+this.y+F$T[1],F$T[2],F$T[3],F$T[4])},this._drawCurves=function(F$J,F$y,F$T){this.ctx.drawCurves(F$J,F$y,F$T)},this._draw=function(F$J,F$y,F$T){F$T[0].call(null,this,F$J,F$y)},this._transformByMatrix=function(F$J,F$y,F$T){this.ctx.transformByMatrix(F$T[0])},this._setTransform=function(F$J,F$y,F$T){this.ctx.setTransform(F$T[0],F$T[1],F$T[2],F$T[3],F$T[4],F$T[5])},this._setTransformByMatrix=function(F$J,F$y,F$T){this.ctx.setTransformByMatrix(F$T[0])},this._save=function(F$J,F$y,F$T){this.ctx.save()},this._restore=function(F$J,F$y,F$T){this.ctx.restore()},this._translate=function(F$J,F$y,F$T){this.ctx.translate(F$T[0],F$T[1])},this._transform=function(F$J,F$y,F$T){this.ctx.translate(F$T[1]+F$J,F$T[2]+F$y);var F$V=F$T[0];this.ctx.transform(F$V.a,F$V.b,F$V.c,F$V.d,F$V.tx,F$V.ty),this.ctx.translate(-F$J-F$T[1],-F$y-F$T[2])},this._rotate=function(F$J,F$y,F$T){this.ctx.translate(F$T[1]+F$J,F$T[2]+F$y),this.ctx.rotate(F$T[0]),this.ctx.translate(-F$J-F$T[1],-F$y-F$T[2])},this._scale=function(F$J,F$y,F$T){this.ctx.translate(F$T[2]+F$J,F$T[3]+F$y),this.ctx.scale(F$T[0],F$T[1]),this.ctx.translate(-F$J-F$T[2],-F$y-F$T[3])},this._alpha=function(F$J,F$y,F$T){this.ctx.globalAlpha*=F$T[0]},this._setAlpha=function(F$J,F$y,F$T){this.ctx.globalAlpha=F$T[0]},this._fillText=function(F$J,F$y,F$T){this.ctx.fillText(F$T[0],F$T[1]+F$J,F$T[2]+F$y,F$T[3],F$T[4],F$T[5])},this._strokeText=function(F$J,F$y,F$T){this.ctx.strokeText(F$T[0],F$T[1]+F$J,F$T[2]+F$y,F$T[3],F$T[4],F$T[5],F$T[6])},this._fillBorderText=function(F$J,F$y,F$T){this.ctx.fillBorderText(F$T[0],F$T[1]+F$J,F$T[2]+F$y,F$T[3],F$T[4],F$T[5],F$T[6],F$T[7])},this._blendMode=function(F$J,F$y,F$T){this.ctx.globalCompositeOperation=F$T[0]},this._beginClip=function(F$J,F$y,F$T){this.ctx.beginClip&&this.ctx.beginClip(F$J+F$T[0],F$y+F$T[1],F$T[2],F$T[3])},this._setIBVB=function(F$J,F$y,F$T){this.ctx.setIBVB(F$T[0]+F$J,F$T[1]+F$y,F$T[2],F$T[3],F$T[4],F$T[5],F$T[6],F$T[7])},this._fillTrangles=function(F$J,F$y,F$T){this.ctx.fillTrangles(F$T[0],F$T[1]+F$J,F$T[2]+F$y,F$T[3],F$T[4])},this._drawPath=function(F$J,F$y,F$T){var F$V=this.ctx;F$u.isWebGL&&F$V.setPathId(-1),F$V.beginPath(),F$J+=F$T[0],F$y+=F$T[1],F$u.isWebGL&&F$V.movePath(F$J,F$y);for(var F$Z=F$T[2],F$m=0,F$R=F$Z.length;F$m<F$R;F$m++){var F$n=F$Z[F$m];switch(F$n[0]){case"moveTo":F$u.isWebGL?F$V.moveTo(F$n[1],F$n[2]):F$V.moveTo(F$J+F$n[1],F$y+F$n[2]);break;case"lineTo":F$u.isWebGL?F$V.lineTo(F$n[1],F$n[2]):F$V.lineTo(F$J+F$n[1],F$y+F$n[2]);break;case"arcTo":F$u.isWebGL?F$V.arcTo(F$n[1],F$n[2],F$n[3],F$n[4],F$n[5]):F$V.arcTo(F$J+F$n[1],F$y+F$n[2],F$J+F$n[3],F$y+F$n[4],F$n[5]);break;case"closePath":F$V.closePath()}}var F$K=F$T[3];null!=F$K&&(F$V.fillStyle=F$K.fillStyle,F$V.fill());var F$A=F$T[4];null!=F$A&&(F$V.strokeStyle=F$A.strokeStyle,F$V.lineWidth=F$A.lineWidth||1,F$V.lineJoin=F$A.lineJoin,F$V.lineCap=F$A.lineCap,F$V.miterLimit=F$A.miterLimit,F$V.stroke())},this.drawPoly=function(F$J,F$y,F$T){this.ctx.drawPoly(F$J+this.x+F$T[0],F$y+this.y+F$T[1],F$T[2],F$T[3],F$T[4],F$T[5],F$T[6])},this._drawPoly=function(F$J,F$y,F$T){var F$V=this.ctx,F$Z=F$T[2],F$m=2,F$R=F$Z.length;if(F$u.isWebGL)for(F$V.setPathId(F$T[6]),F$V.beginPath(),F$J+=F$T[0],F$y+=F$T[1],F$V.movePath(F$J,F$y),F$V.moveTo(F$Z[0],F$Z[1]);F$m<F$R;)F$V.lineTo(F$Z[F$m++],F$Z[F$m++]);else for(F$V.beginPath(),F$J+=F$T[0],F$y+=F$T[1],F$V.moveTo(F$J+F$Z[0],F$y+F$Z[1]);F$m<F$R;)F$V.lineTo(F$J+F$Z[F$m++],F$y+F$Z[F$m++]);F$V.closePath(),this._fillAndStroke(F$T[3],F$T[4],F$T[5],F$T[7])},this._drawSkin=function(F$J,F$y,F$T){var F$V=F$T[0];if(F$V){var F$Z=this.ctx;F$V.render(F$Z,F$J,F$y)}},this._drawParticle=function(F$J,F$y,F$T){this.ctx.drawParticle(F$J+this.x,F$y+this.y,F$T[0])},this._setFilters=function(F$J,F$y,F$T){this.ctx.setFilters(F$T)},F$T?this.ctx=F$T.getContext("2d"):(F$T=F$LJ.create("3D"),this.ctx=F$v.createWebGLContext2D(F$T),F$T._setContext(this.ctx)),F$T.size(F$J,F$y),this.canvas=F$T}F$$(F$R,"laya.renders.RenderContext");var F$J=F$R.prototype;return F$J.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},F$J.drawTexture=function(F$J,F$y,F$T,F$V,F$Z){F$J.loaded&&this.ctx.drawTexture(F$J,F$y,F$T,F$V,F$Z,this.x,this.y)},F$J._drawTextures=function(F$J,F$y,F$T){F$T[0].loaded&&this.ctx.drawTextures(F$T[0],F$T[1],F$J+this.x,F$y+this.y)},F$J.drawTextureWithTransform=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){F$J.loaded&&this.ctx.drawTextureWithTransform(F$J,F$y,F$T,F$V,F$Z,F$m,this.x,this.y,F$R)},F$J.fillQuadrangle=function(F$J,F$y,F$T,F$V,F$Z){this.ctx.fillQuadrangle(F$J,F$y,F$T,F$V,F$Z)},F$J.drawCanvas=function(F$J,F$y,F$T,F$V,F$Z){this.ctx.drawCanvas(F$J,F$y+this.x,F$T+this.y,F$V,F$Z)},F$J.drawRect=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$m&&(F$m=1);var F$R=this.ctx;F$R.strokeStyle=F$Z,F$R.lineWidth=F$m,F$R.strokeRect(F$J+this.x,F$y+this.y,F$T,F$V,F$m)},F$J._fillAndStroke=function(F$J,F$y,F$T,F$V){void 0===F$V&&(F$V=!1);var F$Z=this.ctx;null!=F$J&&(F$Z.fillStyle=F$J,F$u.isWebGL?F$Z.fill(F$V):F$Z.fill()),null!=F$y&&0<F$T&&(F$Z.strokeStyle=F$y,F$Z.lineWidth=F$T,F$Z.stroke())},F$J.clipRect=function(F$J,F$y,F$T,F$V){this.ctx.clipRect(F$J+this.x,F$y+this.y,F$T,F$V)},F$J.fillRect=function(F$J,F$y,F$T,F$V,F$Z){this.ctx.fillRect(F$J+this.x,F$y+this.y,F$T,F$V,F$Z)},F$J.drawCircle=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$Z&&(F$Z=1),F$h.drawCall++;var F$m=this.ctx;F$m.beginPath(),F$m.strokeStyle=F$V,F$m.lineWidth=F$Z,F$m.arc(F$J+this.x,F$y+this.y,F$T,0,F$R.PI2),F$m.stroke()},F$J.drawTriangles=function(F$J,F$y,F$T){if(F$u.isWebGL)this.ctx.drawTriangles(F$T[0],F$J+F$T[1],F$y+F$T[2],F$T[3],F$T[4],F$T[5],F$T[6],F$T[7],F$T[8],F$T[9]);else{var F$V=F$T[5],F$Z=0,F$m=F$V.length,F$R=this.ctx;for(F$Z=0;F$Z<F$m;F$Z+=3){var F$n=2*F$V[F$Z],F$K=2*F$V[F$Z+1],F$A=2*F$V[F$Z+2];F$R.drawTriangle(F$T[0],F$T[3],F$T[4],F$n,F$K,F$A,F$T[6],!0)}}},F$J.fillCircle=function(F$J,F$y,F$T,F$V){F$h.drawCall++;var F$Z=this.ctx;F$Z.beginPath(),F$Z.fillStyle=F$V,F$Z.arc(F$J+this.x,F$y+this.y,F$T,0,F$R.PI2),F$Z.fill()},F$J.setShader=function(F$J){this.ctx.setShader(F$J)},F$J.drawLine=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$m&&(F$m=1);var F$R=this.ctx;F$R.beginPath(),F$R.strokeStyle=F$Z,F$R.lineWidth=F$m,F$R.moveTo(this.x+F$J,this.y+F$y),F$R.lineTo(this.x+F$T,this.y+F$V),F$R.stroke()},F$J.clear=function(){this.ctx.clear()},F$J.transformByMatrix=function(F$J){this.ctx.transformByMatrix(F$J)},F$J.setTransform=function(F$J,F$y,F$T,F$V,F$Z,F$m){this.ctx.setTransform(F$J,F$y,F$T,F$V,F$Z,F$m)},F$J.setTransformByMatrix=function(F$J){this.ctx.setTransformByMatrix(F$J)},F$J.save=function(){this.ctx.save()},F$J.restore=function(){this.ctx.restore()},F$J.translate=function(F$J,F$y){this.ctx.translate(F$J,F$y)},F$J.transform=function(F$J,F$y,F$T,F$V,F$Z,F$m){this.ctx.transform(F$J,F$y,F$T,F$V,F$Z,F$m)},F$J.rotate=function(F$J){this.ctx.rotate(F$J)},F$J.scale=function(F$J,F$y){this.ctx.scale(F$J,F$y)},F$J.alpha=function(F$J){this.ctx.globalAlpha*=F$J},F$J.setAlpha=function(F$J){this.ctx.globalAlpha=F$J},F$J.fillWords=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$m&&(F$m=0),this.ctx.fillWords(F$J,F$y,F$T,F$V,F$Z,F$m)},F$J.fillBorderWords=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this.ctx.fillBorderWords(F$J,F$y,F$T,F$V,F$Z,F$m,F$R)},F$J.fillText=function(F$J,F$y,F$T,F$V,F$Z,F$m){this.ctx.fillText(F$J,F$y+this.x,F$T+this.y,F$V,F$Z,F$m)},F$J.strokeText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this.ctx.strokeText(F$J,F$y+this.x,F$T+this.y,F$V,F$Z,F$m,F$R)},F$J.blendMode=function(F$J){this.ctx.globalCompositeOperation=F$J},F$J.flush=function(){this.ctx.flush&&this.ctx.flush()},F$J.addRenderObject=function(F$J){this.ctx.addRenderObject(F$J)},F$J.beginClip=function(F$J,F$y,F$T,F$V){this.ctx.beginClip&&this.ctx.beginClip(F$J,F$y,F$T,F$V)},F$J.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},F$J.fillTrangles=function(F$J,F$y,F$T){this.ctx.fillTrangles(F$T[0],F$T[1],F$T[2],F$T[3],4<F$T.length?F$T[4]:null)},F$R.PI2=2*Math.PI,F$R}(),F$k=function(){function F$R(F$J,F$y){switch(this._next=F$y||F$R.NORENDER,F$J){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=F$E._filter);case 69905:return void(this._fun=F$R._initRenderFun)}this.onCreate(F$J)}F$$(F$R,"laya.renders.RenderSprite");var F$J=F$R.prototype;return F$J.onCreate=function(F$J){},F$J._style=function(F$J,F$y,F$T,F$V){F$J._style.render(F$J,F$y,F$T,F$V);var F$Z=this._next;F$Z._fun.call(F$Z,F$J,F$y,F$T,F$V)},F$J._no=function(F$J,F$y,F$T,F$V){},F$J._custom=function(F$J,F$y,F$T,F$V){F$J.customRender(F$y,F$T,F$V);var F$Z=F$J._style._tf;this._next._fun.call(this._next,F$J,F$y,F$T-F$Z.translateX,F$V-F$Z.translateY)},F$J._clip=function(F$J,F$y,F$T,F$V){var F$Z=this._next;if(F$Z!=F$R.NORENDER){var F$m=F$J._style.scrollRect;F$y.ctx.save(),F$y.ctx.clipRect(F$T,F$V,F$m.width,F$m.height),F$Z._fun.call(F$Z,F$J,F$y,F$T-F$m.x,F$V-F$m.y),F$y.ctx.restore()}},F$J._blend=function(F$J,F$y,F$T,F$V){var F$Z=F$J._style;F$Z.blendMode&&(F$y.ctx.globalCompositeOperation=F$Z.blendMode);var F$m=this._next;F$m._fun.call(F$m,F$J,F$y,F$T,F$V),F$y.ctx.globalCompositeOperation="source-over"},F$J._mask=function(F$J,F$y,F$T,F$V){var F$Z=this._next;F$Z._fun.call(F$Z,F$J,F$y,F$T,F$V);var F$m=F$J.mask;F$m&&(F$y.ctx.globalCompositeOperation="destination-in",(0<F$m.numChildren||!F$m.graphics._isOnlyOne())&&(F$m.cacheAsBitmap=!0),F$m.render(F$y,F$T-F$J.pivotX,F$V-F$J.pivotY)),F$y.ctx.globalCompositeOperation="source-over"},F$J._graphics=function(F$J,F$y,F$T,F$V){var F$Z=F$J._style._tf;F$J._graphics&&F$J._graphics._render(F$J,F$y,F$T-F$Z.translateX,F$V-F$Z.translateY);var F$m=this._next;F$m._fun.call(F$m,F$J,F$y,F$T,F$V)},F$J._image=function(F$J,F$y,F$T,F$V){var F$Z=F$J._style;F$y.ctx.drawTexture2(F$T,F$V,F$Z._tf.translateX,F$Z._tf.translateY,F$J.transform,F$Z.alpha,F$Z.blendMode,F$J._graphics._one)},F$J._image2=function(F$J,F$y,F$T,F$V){var F$Z=F$J._style._tf;F$y.ctx.drawTexture2(F$T,F$V,F$Z.translateX,F$Z.translateY,F$J.transform,1,null,F$J._graphics._one)},F$J._alpha=function(F$J,F$y,F$T,F$V){var F$Z;if(.01<(F$Z=F$J._style.alpha)||F$J._needRepaint()){var F$m=F$y.ctx.globalAlpha;F$y.ctx.globalAlpha*=F$Z;var F$R=this._next;F$R._fun.call(F$R,F$J,F$y,F$T,F$V),F$y.ctx.globalAlpha=F$m}},F$J._transform=function(F$J,F$y,F$T,F$V){var F$Z=F$J.transform,F$m=this._next;F$Z&&F$m!=F$R.NORENDER?(F$y.save(),F$y.transform(F$Z.a,F$Z.b,F$Z.c,F$Z.d,F$Z.tx+F$T,F$Z.ty+F$V),F$m._fun.call(F$m,F$J,F$y,0,0),F$y.restore()):F$m._fun.call(F$m,F$J,F$y,F$T,F$V)},F$J._childs=function(F$J,F$y,F$T,F$V){var F$Z=F$J._style,F$m=F$Z._tf;if(F$T=F$T-F$m.translateX+F$Z.paddingLeft,F$V=F$V-F$m.translateY+F$Z.paddingTop,F$Z._calculation){var F$R=F$J._getWords();if(F$R){var F$n=F$Z;F$n&&(F$n.stroke?F$y.fillBorderWords(F$R,F$T,F$V,F$n.font,F$n.color,F$n.strokeColor,F$n.stroke):F$y.fillWords(F$R,F$T,F$V,F$n.font,F$n.color,"none"!=F$n.textDecoration&&F$n.underLine?1:0))}}var F$K,F$A=F$J._childs,F$$=F$A.length;if(F$J.viewport||F$J.optimizeScrollRect&&F$J._style.scrollRect){var F$e=F$J.viewport||F$J._style.scrollRect,F$M=F$e.x,F$G=F$e.y,F$B=F$e.right,F$o=F$e.bottom,F$s=NaN,F$E=NaN;for(F$O=0;F$O<F$$;++F$O)(F$K=F$A[F$O]).visible&&(F$s=F$K._x)<F$B&&F$s+F$K.width>F$M&&(F$E=F$K._y)<F$o&&F$E+F$K.height>F$G&&F$K.render(F$y,F$T,F$V)}else for(var F$O=0;F$O<F$$;++F$O)(F$K=F$A[F$O])._style.visible&&F$K.render(F$y,F$T,F$V)},F$J._canvas=function(F$J,F$y,F$T,F$V){var F$Z=F$J._$P.cacheCanvas;if(F$Z){"bitmap"===F$Z.type?F$h.canvasBitmap++:F$h.canvasNormal++;var F$m=F$Z.ctx;if(F$J._needRepaint()||!F$m)this._canvas_repaint(F$J,F$y,F$T,F$V);else{var F$R=F$Z._cacheRec;F$y.drawCanvas(F$m.canvas,F$T+F$R.x,F$V+F$R.y,F$R.width,F$R.height)}}else this._next._fun.call(this._next,F$J,F$y,F$T,F$V)},F$J._canvas_repaint=function(F$J,F$y,F$T,F$V){var F$Z=F$J._$P.cacheCanvas,F$m=this._next;if(F$Z){var F$R,F$n,F$K,F$A,F$$=F$Z.ctx,F$e=F$J._needRepaint()||!F$$,F$M=F$Z.type;if("bitmap"===F$M?F$h.canvasBitmap++:F$h.canvasNormal++,F$e){var F$G,F$B;F$Z._cacheRec||(F$Z._cacheRec=new F$r),F$u.isWebGL&&"bitmap"!==F$M?F$Z._cacheRec.setTo(-F$J.pivotX,-F$J.pivotY,1,1):((F$A=F$J.getSelfBounds()).x=F$A.x-F$J.pivotX,F$A.y=F$A.y-F$J.pivotY,F$A.x=F$A.x-16,F$A.y=F$A.y-16,F$A.width=F$A.width+32,F$A.height=F$A.height+32,F$A.x=Math.floor(F$A.x+F$T)-F$T,F$A.y=Math.floor(F$A.y+F$V)-F$V,F$A.width=Math.floor(F$A.width),F$A.height=Math.floor(F$A.height),F$Z._cacheRec.copyFrom(F$A)),F$A=F$Z._cacheRec;var F$o,F$s=F$u.isWebGL?1:F$f.pixelRatio*F$a.stage.clientScaleX,F$E=F$u.isWebGL?1:F$f.pixelRatio*F$a.stage.clientScaleY;if(!F$u.isWebGL){var F$O,F$L=1,F$H=1;for(F$O=F$J;F$O&&F$O!=F$a.stage;)F$L*=F$O.scaleX,F$H*=F$O.scaleY,F$O=F$O.parent;F$u.isWebGL?(F$L<1&&(F$s*=F$L),F$H<1&&(F$E*=F$H)):(1<F$L&&(F$s*=F$L),1<F$H&&(F$E*=F$H))}if(F$J.scrollRect){var F$P=F$J.scrollRect;F$A.x-=F$P.x,F$A.y-=F$P.y}if(F$G=F$A.width*F$s,F$B=F$A.height*F$E,F$n=F$A.x,F$K=F$A.y,F$u.isWebGL&&"bitmap"===F$M&&(2048<F$G||2048<F$B))return console.warn("cache bitmap size larger than 2048,cache ignored"),F$Z.ctx&&(F$b.recover("RenderContext",F$Z.ctx),F$Z.ctx.canvas.size(0,0),F$Z.ctx=null),void F$m._fun.call(F$m,F$J,F$y,F$T,F$V);if(F$$||(F$$=F$Z.ctx=F$b.getItem("RenderContext")||new F$x(F$G,F$B,F$LJ.create("AUTO"))),F$$.ctx.sprite=F$J,(F$R=F$$.canvas).clear(),(F$R.width!=F$G||F$R.height!=F$B)&&F$R.size(F$G,F$B),"bitmap"===F$M?F$R.context.asBitmap=!0:"normal"===F$M&&(F$R.context.asBitmap=!1),1!=F$s||1!=F$E){var F$l=F$$.ctx;F$l.save(),F$l.scale(F$s,F$E),!F$u.isConchWebGL&&F$u.isConchApp&&(F$o=F$J._$P.cf)&&F$l.setFilterMatrix&&F$l.setFilterMatrix(F$o._mat,F$o._alpha),F$m._fun.call(F$m,F$J,F$$,-F$n,-F$K),F$l.restore(),F$u.isConchApp&&!F$u.isConchWebGL||F$J._applyFilters()}else F$l=F$$.ctx,!F$u.isConchWebGL&&F$u.isConchApp&&(F$o=F$J._$P.cf)&&F$l.setFilterMatrix&&F$l.setFilterMatrix(F$o._mat,F$o._alpha),F$m._fun.call(F$m,F$J,F$$,-F$n,-F$K),F$u.isConchApp&&!F$u.isConchWebGL||F$J._applyFilters();F$J._$P.staticCache&&(F$Z.reCache=!1),F$h.canvasReCache++}else F$n=(F$A=F$Z._cacheRec).x,F$K=F$A.y,F$R=F$$.canvas;F$y.drawCanvas(F$R,F$T+F$n,F$V+F$K,F$A.width,F$A.height)}else F$m._fun.call(F$m,F$J,F$$,F$T,F$V)},F$R.__init__=function(){var F$J,F$y,F$T=0;for(F$y=F$v.createRenderSprite(69905,null),F$J=F$R.renders.length=4096,F$T=0;F$T<F$J;F$T++)F$R.renders[F$T]=F$y;F$R.renders[0]=F$v.createRenderSprite(0,null),function(F$J,F$y){for(var F$T=0,F$V=0;F$V<F$J.length;F$V++)F$T|=F$J[F$V],F$R.renders[F$T]=F$y}([1,512,4,2],new F$R(1,null)),F$R.renders[513]=F$v.createRenderSprite(513,null),F$R.renders[517]=new F$R(517,null)},F$R._initRenderFun=function(F$J,F$y,F$T,F$V){var F$Z=F$J._renderType;(F$R.renders[F$Z]=F$R._getTypeRender(F$Z))._fun(F$J,F$y,F$T,F$V)},F$R._getTypeRender=function(F$J){for(var F$y=null,F$T=2048;1<F$T;)F$T&F$J&&(F$y=F$v.createRenderSprite(F$T,F$y)),F$T>>=1;return F$y},F$R.IMAGE=1,F$R.ALPHA=2,F$R.TRANSFORM=4,F$R.BLEND=8,F$R.CANVAS=16,F$R.FILTERS=32,F$R.MASK=64,F$R.CLIP=128,F$R.STYLE=256,F$R.GRAPHICS=512,F$R.CUSTOM=1024,F$R.CHILDS=2048,F$R.INIT=69905,F$R.renders=[],F$R.NORENDER=new F$R(0,null),F$R}(),F$X=function(){function F$n(){this._repaint=!1}F$$(F$n,"laya.resource.Context");var F$J=F$n.prototype;return F$J.replaceReset=function(){var F$J,F$y,F$T=0;for(F$J=F$n.replaceKeys.length,F$T=0;F$T<F$J;F$T++)F$y=F$n.replaceKeys[F$T],this[F$n.newKeys[F$T]]=this[F$y]},F$J.replaceResotre=function(){this.__restore(),this.__reset()},F$J.setIsMainContext=function(){},F$J.drawTextures=function(F$J,F$y,F$T,F$V){F$h.drawCall+=F$y.length/2;for(var F$Z=F$J.width,F$m=F$J.height,F$R=0,F$n=F$y.length;F$R<F$n;F$R+=2)this.drawTexture(F$J,F$y[F$R],F$y[F$R+1],F$Z,F$m,F$T,F$V)},F$J.drawCanvas=function(F$J,F$y,F$T,F$V,F$Z){F$h.drawCall++,this.drawImage(F$J.source,F$y,F$T,F$V,F$Z)},F$J.fillRect=function(F$J,F$y,F$T,F$V,F$Z){F$h.drawCall++,F$Z&&(this.fillStyle=F$Z),this.__fillRect(F$J,F$y,F$T,F$V)},F$J.fillText=function(F$J,F$y,F$T,F$V,F$Z,F$m){F$h.drawCall++,3<arguments.length&&null!=F$V&&(this.font=F$V,this.fillStyle=F$Z,this.textAlign=F$m,this.textBaseline="top"),this.__fillText(F$J,F$y,F$T)},F$J.fillBorderText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){F$h.drawCall++,this.font=F$V,this.fillStyle=F$Z,this.textBaseline="top",this.strokeStyle=F$m,this.lineWidth=F$R,this.textAlign=F$n,this.__strokeText(F$J,F$y,F$T),this.__fillText(F$J,F$y,F$T)},F$J.strokeText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){F$h.drawCall++,3<arguments.length&&null!=F$V&&(this.font=F$V,this.strokeStyle=F$Z,this.lineWidth=F$m,this.textAlign=F$R,this.textBaseline="top"),this.__strokeText(F$J,F$y,F$T)},F$J.transformByMatrix=function(F$J){this.transform(F$J.a,F$J.b,F$J.c,F$J.d,F$J.tx,F$J.ty)},F$J.setTransformByMatrix=function(F$J){this.setTransform(F$J.a,F$J.b,F$J.c,F$J.d,F$J.tx,F$J.ty)},F$J.clipRect=function(F$J,F$y,F$T,F$V){F$h.drawCall++,this.beginPath(),this.rect(F$J,F$y,F$T,F$V),this.clip()},F$J.drawTexture=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){F$h.drawCall++;var F$n=F$J.uv,F$K=F$J.bitmap.width,F$A=F$J.bitmap.height;this.drawImage(F$J.source,F$n[0]*F$K,F$n[1]*F$A,(F$n[2]-F$n[0])*F$K,(F$n[5]-F$n[3])*F$A,F$y+F$m,F$T+F$R,F$V,F$Z)},F$J.drawTextureWithTransform=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){F$h.drawCall++;var F$A=F$J.uv,F$$=F$J.bitmap.width,F$e=F$J.bitmap.height;this.save(),1!=F$K&&(this.globalAlpha*=F$K),F$m?(this.transform(F$m.a,F$m.b,F$m.c,F$m.d,F$m.tx+F$R,F$m.ty+F$n),this.drawImage(F$J.source,F$A[0]*F$$,F$A[1]*F$e,(F$A[2]-F$A[0])*F$$,(F$A[5]-F$A[3])*F$e,F$y,F$T,F$V,F$Z)):this.drawImage(F$J.source,F$A[0]*F$$,F$A[1]*F$e,(F$A[2]-F$A[0])*F$$,(F$A[5]-F$A[3])*F$e,F$y+F$R,F$T+F$n,F$V,F$Z),this.restore()},F$J.drawTexture2=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){var F$K=F$n[0];if(F$K.loaded&&F$K.bitmap&&F$K.source){F$h.drawCall++;var F$A=1!==F$m;if(F$A){var F$$=this.globalAlpha;this.globalAlpha*=F$m}var F$e=F$K.uv,F$M=F$K.bitmap.width,F$G=F$K.bitmap.height;F$Z?(this.save(),this.transform(F$Z.a,F$Z.b,F$Z.c,F$Z.d,F$Z.tx+F$J,F$Z.ty+F$y),this.drawImage(F$K.source,F$e[0]*F$M,F$e[1]*F$G,(F$e[2]-F$e[0])*F$M,(F$e[5]-F$e[3])*F$G,F$n[1]-F$T,F$n[2]-F$V,F$n[3],F$n[4]),this.restore()):this.drawImage(F$K.source,F$e[0]*F$M,F$e[1]*F$G,(F$e[2]-F$e[0])*F$M,(F$e[5]-F$e[3])*F$G,F$n[1]-F$T+F$J,F$n[2]-F$V+F$y,F$n[3],F$n[4]),F$A&&(this.globalAlpha=F$$)}},F$J.fillTexture=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){if(!F$n.pat){if(F$J.uv!=F$$J.DEF_UV){var F$K=new F$LJ("2D");F$K.getContext("2d"),F$K.size(F$J.width,F$J.height),F$K.context.drawTexture(F$J,0,0,F$J.width,F$J.height,0,0),F$J=new F$$J(F$K)}F$n.pat=this.createPattern(F$J.bitmap.source,F$m)}var F$A=F$y,F$$=F$T,F$e=0,F$M=0;F$R&&(F$A+=F$R.x%F$J.width,F$$+=F$R.y%F$J.height,F$e-=F$R.x%F$J.width,F$M-=F$R.y%F$J.height),this.translate(F$A,F$$),this.fillRect(F$e,F$M,F$V,F$Z,F$n.pat),this.translate(-F$A,-F$$)},F$J.drawTriangle=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){var F$K=F$J.bitmap,F$A=F$K.source,F$$=F$J.width,F$e=F$J.height,F$M=F$K.width,F$G=F$K.height,F$B=F$T[F$V]*F$M,F$o=F$T[F$Z]*F$M,F$s=F$T[F$m]*F$M,F$E=F$T[F$V+1]*F$G,F$O=F$T[F$Z+1]*F$G,F$L=F$T[F$m+1]*F$G,F$H=F$y[F$V],F$P=F$y[F$Z],F$l=F$y[F$m],F$a=F$y[F$V+1],F$q=F$y[F$Z+1],F$r=F$y[F$m+1];if(F$n){var F$D=(F$H+F$P+F$l)/3,F$_=(F$a+F$q+F$r)/3,F$t=F$H-F$D,F$v=F$a-F$_,F$Q=Math.sqrt(F$t*F$t+F$v*F$v);F$H=F$D+F$t/F$Q*(F$Q+1),F$a=F$_+F$v/F$Q*(F$Q+1),F$v=F$q-F$_,F$P=F$D+(F$t=F$P-F$D)/(F$Q=Math.sqrt(F$t*F$t+F$v*F$v))*(F$Q+1),F$q=F$_+F$v/F$Q*(F$Q+1),F$v=F$r-F$_,F$l=F$D+(F$t=F$l-F$D)/(F$Q=Math.sqrt(F$t*F$t+F$v*F$v))*(F$Q+1),F$r=F$_+F$v/F$Q*(F$Q+1)}this.save(),F$R&&this.transform(F$R.a,F$R.b,F$R.c,F$R.d,F$R.tx,F$R.ty),this.beginPath(),this.moveTo(F$H,F$a),this.lineTo(F$P,F$q),this.lineTo(F$l,F$r),this.closePath(),this.clip();var F$i=1/(F$B*F$O+F$E*F$s+F$o*F$L-F$O*F$s-F$E*F$o-F$B*F$L),F$c=F$H*F$O+F$E*F$l+F$P*F$L-F$O*F$l-F$E*F$P-F$H*F$L,F$u=F$B*F$P+F$H*F$s+F$o*F$l-F$P*F$s-F$H*F$o-F$B*F$l,F$x=F$B*F$O*F$l+F$E*F$P*F$s+F$H*F$o*F$L-F$H*F$O*F$s-F$E*F$o*F$l-F$B*F$P*F$L,F$k=F$a*F$O+F$E*F$r+F$q*F$L-F$O*F$r-F$E*F$q-F$a*F$L,F$X=F$B*F$q+F$a*F$s+F$o*F$r-F$q*F$s-F$a*F$o-F$B*F$r,F$S=F$B*F$O*F$r+F$E*F$q*F$s+F$a*F$o*F$L-F$a*F$O*F$s-F$E*F$o*F$r-F$B*F$q*F$L;this.transform(F$c*F$i,F$k*F$i,F$u*F$i,F$X*F$i,F$x*F$i,F$S*F$i),this.drawImage(F$A,F$J.uv[0]*F$M,F$J.uv[1]*F$G,F$$,F$e,F$J.uv[0]*F$M,F$J.uv[1]*F$G,F$$,F$e),this.restore()},F$J.flush=function(){return 0},F$J.fillWords=function(F$J,F$y,F$T,F$V,F$Z,F$m){F$V&&(this.font=F$V),F$Z&&(this.fillStyle=F$Z);this.textBaseline="top",this.textAlign="left";for(var F$R=0,F$n=F$J.length;F$R<F$n;F$R++){var F$K=F$J[F$R];if(this.__fillText(F$K.char,F$K.x+F$y,F$K.y+F$T),1===F$m){var F$A=F$K.height,F$$=.5*F$K.style.letterSpacing;F$$||(F$$=0),this.beginPath(),this.strokeStyle=F$Z,this.lineWidth=1,this.moveTo(F$y+F$K.x-F$$+.5,F$T+F$K.y+F$A+.5),this.lineTo(F$y+F$K.x+F$K.width+F$$+.5,F$T+F$K.y+F$A+.5),this.stroke()}}},F$J.fillBorderWords=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){F$V&&(this.font=F$V),F$Z&&(this.fillStyle=F$Z),this.textBaseline="top",this.lineWidth=F$R,this.textAlign="left",this.strokeStyle=F$m;for(var F$n=0,F$K=F$J.length;F$n<F$K;F$n++){var F$A=F$J[F$n];this.__strokeText(F$A.char,F$A.x+F$y,F$A.y+F$T),this.__fillText(F$A.char,F$A.x+F$y,F$A.y+F$T)}},F$J.destroy=function(){this.canvas.width=this.canvas.height=0},F$J.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},F$J.drawCurves=function(F$J,F$y,F$T){this.beginPath(),this.strokeStyle=F$T[3],this.lineWidth=F$T[4];var F$V=F$T[2];F$J+=F$T[0],F$y+=F$T[1],this.moveTo(F$J+F$V[0],F$y+F$V[1]);for(var F$Z=2,F$m=F$V.length;F$Z<F$m;)this.quadraticCurveTo(F$J+F$V[F$Z++],F$y+F$V[F$Z++],F$J+F$V[F$Z++],F$y+F$V[F$Z++]);this.stroke()},F$n.__init__=function(F$y){var F$T=laya.resource.Context.prototype;if(!(F$y=F$y||CanvasRenderingContext2D.prototype).inited){F$y.inited=!0,F$y.__fillText=F$y.fillText,F$y.__fillRect=F$y.fillRect,F$y.__strokeText=F$y.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(F$J){F$y[F$J]=F$T[F$J]})}},F$n.replaceCanvasGetSet=function(F$J,F$y){var F$T=Object.getOwnPropertyDescriptor(F$J,F$y);if(!F$T||!F$T.configurable)return!1;var F$V,F$Z={};for(F$V in F$T)"set"!=F$V&&(F$Z[F$V]=F$T[F$V]);var F$m=F$T.set;return F$Z.set=function(F$J){F$m.call(this,F$J);var F$y=this.getContext("2d");F$y&&"__reset"in F$y&&F$y.__reset()},Object.defineProperty(F$J,F$y,F$Z),!0},F$n.replaceGetSet=function(F$J,F$y){var F$T=Object.getOwnPropertyDescriptor(F$J,F$y);if(!F$T||!F$T.configurable)return!1;var F$V,F$Z={};for(F$V in F$T)"set"!=F$V&&(F$Z[F$V]=F$T[F$V]);var F$m=F$T.set,F$R="___"+F$y+"__";return F$n.newKeys.push(F$R),F$Z.set=function(F$J){F$J!=this[F$R]&&(this[F$R]=F$J,F$m.call(this,F$J))},Object.defineProperty(F$J,F$y,F$Z),!0},F$n._default=new F$n,F$n.newKeys=[],F$K(F$n,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),F$n}(),F$S=function(){function F$m(F$J){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++F$m._uniqueIDCounter,this._name=F$J||"Content Manager",F$m._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,F$m._resourceManagers.push(this),this._resources=[],this._records={}}F$$(F$m,"laya.resource.ResourceManager");var F$J=F$m.prototype;return F$a.imps(F$J,{"laya.resource.IDispose":!0}),F$J.getResourceByIndex=function(F$J){return this._resources[F$J]},F$J.getResourcesLength=function(){return this._resources.length},F$J.addResource=function(F$J){return F$J.resourceManager&&F$J.resourceManager.removeResource(F$J),-1===this._resources.indexOf(F$J)&&((F$J._resourceManager=this)._resources.push(F$J),this.addRecord(F$J.uri,F$J.__className,F$J.memorySize),this.addSize(F$J.memorySize),!0)},F$J.removeResource=function(F$J){var F$y=this._resources.indexOf(F$J);return-1!==F$y&&(this._resources.splice(F$y,1),F$J._resourceManager=null,this._memorySize-=F$J.memorySize,this.addRecord(F$J.uri,F$J.__className,-F$J.memorySize),!0)},F$J.unload=function(){for(var F$J=this._resources.slice(0,this._resources.length),F$y=0;F$y<F$J.length;F$y++){F$J[F$y].destroy()}F$J.length=0},F$J.dispose=function(){if(this===F$m._systemResourceManager)throw new Error("systemResourceManager不能被释放！");F$m._resourceManagers.splice(F$m._resourceManagers.indexOf(this),1),F$m._isResourceManagersSorted=!1;for(var F$J=this._resources.slice(0,this._resources.length),F$y=0;F$y<F$J.length;F$y++){var F$T=F$J[F$y];F$T.resourceManager.removeResource(F$T),F$T.destroy()}F$J.length=0},F$J.addSize=function(F$J){F$J&&(this.autoRelease&&0<F$J&&this._memorySize+F$J>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=F$J)},F$J.addRecord=function(F$J,F$y,F$T){DEBUG&&F$T&&!F$J&&console.error(F$J,F$y,F$T),F$J&&(this._records.hasOwnProperty(F$y+"|"+F$J)||(this._records[F$y+"|"+F$J]=0),this._records[F$y+"|"+F$J]+=F$T,DEBUG&&this._records[F$y+"|"+F$J]<0&&console.error(F$J,F$y,this._records[F$y+"|"+F$J]))},F$J.garbageCollection=function(F$J){var F$y=this._resources;(F$y=F$y.slice()).sort(function(F$J,F$y){if(!F$J||!F$y)throw new Error("a或b不能为空！");return F$J.released&&F$y.released?0:F$J.released?1:F$y.released?-1:F$J._lastUseFrameCount-F$y._lastUseFrameCount});for(var F$T=F$h.loopCount,F$V=0,F$Z=F$y.length;F$V<F$Z;F$V++){var F$m=F$y[F$V];if(!(1<F$T-F$m._lastUseFrameCount))return void(this._memorySize>=F$J&&(this._isOverflow=!0));if(F$m.releaseResource(),this._memorySize<F$J)return void(this._isOverflow=!1)}},F$B(0,F$J,"id",function(){return this._id}),F$B(0,F$J,"name",function(){return this._name},function(F$J){!F$J&&""===F$J||this._name===F$J||(this._name=F$J,F$m._isResourceManagersSorted=!1)}),F$B(0,F$J,"memorySize",function(){return this._memorySize}),F$B(0,F$J,"records",function(){return this._records}),F$B(1,F$m,"systemResourceManager",function(){return F$m._systemResourceManager}),F$m.__init__=function(){F$m.currentResourceManager=F$m.systemResourceManager},F$m.getLoadedResourceManagerByIndex=function(F$J){return F$m._resourceManagers[F$J]},F$m.getLoadedResourceManagersCount=function(){return F$m._resourceManagers.length},F$m.recreateContentManagers=function(F$J){void 0===F$J&&(F$J=!1);for(var F$y=F$m.currentResourceManager,F$T=0;F$T<F$m._resourceManagers.length;F$T++){F$m.currentResourceManager=F$m._resourceManagers[F$T];for(var F$V=0;F$V<F$m.currentResourceManager._resources.length;F$V++)F$m.currentResourceManager._resources[F$V].releaseResource(F$J),F$m.currentResourceManager._resources[F$V].activeResource(F$J)}F$m.currentResourceManager=F$y},F$m.releaseContentManagers=function(F$J){void 0===F$J&&(F$J=!1);for(var F$y=F$m.currentResourceManager,F$T=0;F$T<F$m._resourceManagers.length;F$T++){F$m.currentResourceManager=F$m._resourceManagers[F$T];for(var F$V=0;F$V<F$m.currentResourceManager._resources.length;F$V++){var F$Z=F$m.currentResourceManager._resources[F$V];!F$Z.released&&F$Z.releaseResource(F$J)}}F$m.currentResourceManager=F$y},F$m._uniqueIDCounter=0,F$m._isResourceManagersSorted=!1,F$m._resourceManagers=[],F$K(F$m,["_systemResourceManager",function(){return this._systemResourceManager=new F$m("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=F$m._systemResourceManager}]),F$m}(),F$f=(function(){function F$J(){}F$$(F$J,"laya.system.System"),F$J.changeDefinition=function(F$J,F$y){F$a[F$J]=F$y;var F$T=F$J+"=classObj";F$a._runScript(F$T)},F$J.__init__=function(){F$u.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function F$T(){}return F$$(F$T,"laya.utils.Browser"),F$B(1,F$T,"pixelRatio",function(){return F$T.__init__(),-1<F$T.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:F$v.getPixelRatio()}),F$B(1,F$T,"height",function(){return F$T.__init__(),(F$a.stage&&F$a.stage.canvasRotation?F$T.clientWidth:F$T.clientHeight)*F$T.pixelRatio}),F$B(1,F$T,"clientWidth",function(){return F$T.__init__(),F$T.window.innerWidth||F$T.document.body.clientWidth}),F$B(1,F$T,"window",function(){return F$T.__init__(),F$T._window}),F$B(1,F$T,"clientHeight",function(){return F$T.__init__(),F$T.window.innerHeight||F$T.document.body.clientHeight||F$T.document.documentElement.clientHeight}),F$B(1,F$T,"width",function(){return F$T.__init__(),(F$a.stage&&F$a.stage.canvasRotation?F$T.clientHeight:F$T.clientWidth)*F$T.pixelRatio}),F$B(1,F$T,"container",function(){return F$T.__init__(),F$T._container||((F$T._container=F$T.createElement("div")).id="layaContainer",F$T.document.body.appendChild(F$T._container)),F$T._container},function(F$J){F$T._container=F$J}),F$B(1,F$T,"document",function(){return F$T.__init__(),F$T._document}),F$T.__init__=function(){if(!F$T._window){F$T._window=F$v.getWindow(),F$T._document=F$T.window.document,F$T._window.addEventListener("message",function(F$J){laya.utils.Browser._onMessage(F$J)},!1),F$T.document.__createElement=F$T.document.createElement,F$R.requestAnimationFrame=F$R.requestAnimationFrame||F$R.webkitRequestAnimationFrame||F$R.mozRequestAnimationFrame||F$R.oRequestAnimationFrame||F$R.msRequestAnimationFrame||function(F$J){return F$R.setTimeout(F$J,1e3/60)};var F$J=F$R.document.body.style;F$J["-webkit-user-select"]="none",F$J["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",F$T.userAgent=F$T.window.navigator.userAgent,F$T.onIOS=!!(F$T.u=F$T.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),F$T.onMobile=-1<F$T.u.indexOf("Mobile"),F$T.onIPhone=-1<F$T.u.indexOf("iPhone"),F$T.onMac=-1<F$T.u.indexOf("Mac OS X"),F$T.onIPad=-1<F$T.u.indexOf("iPad"),F$T.onAndroid=-1<F$T.u.indexOf("Android")||-1<F$T.u.indexOf("Adr"),F$T.onWP=-1<F$T.u.indexOf("Windows Phone"),F$T.onQQBrowser=-1<F$T.u.indexOf("QQBrowser"),F$T.onMQQBrowser=-1<F$T.u.indexOf("MQQBrowser")||-1<F$T.u.indexOf("Mobile")&&-1<F$T.u.indexOf("QQ"),F$T.onIE=!!F$T.window.ActiveXObject||"ActiveXObject"in F$T.window,F$T.onWeiXin=-1<F$T.u.indexOf("MicroMessenger"),F$T.onPC=!F$T.onMobile,F$T.onSafari=-1<F$T.u.indexOf("Safari"),F$T.onFirefox=-1<F$T.u.indexOf("Firefox"),F$T.onEdge=-1<F$T.u.indexOf("Edge"),F$T.onMiniGame=-1<F$T.u.indexOf("MiniGame"),F$T.onLimixiu=-1<F$T.u.indexOf("limixiu"),F$T.httpProtocol="http:"==F$T.window.location.protocol,F$T.onMiniGame&&null==F$T.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),F$T.webAudioEnabled=!!(F$T.window.AudioContext||F$T.window.webkitAudioContext||F$T.window.mozAudioContext),F$T.soundType=F$T.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",F$ZJ=F$T.webAudioEnabled?F$mJ:F$TJ,F$T.webAudioEnabled&&F$mJ.initWebAudio(),F$TJ._initMusicAudio(),F$T.enableTouch="ontouchstart"in F$R||F$R.DocumentTouch&&F$y instanceof DocumentTouch,F$R.focus(),F$t._soundClass=F$ZJ,F$t._musicClass=F$TJ,F$u._mainCanvas=F$u._mainCanvas||F$LJ.create("2D"),F$T.canvas||(F$T.canvas=F$LJ.create("2D"),F$T.context=F$T.canvas.getContext("2d"))}},F$T._onMessage=function(F$J){if(F$J.data&&"size"==F$J.data.name){if(F$T.window.innerWidth=F$J.data.width,F$T.window.innerHeight=F$J.data.height,F$T.window.__innerHeight=F$J.data.clientHeight,!F$T.document.createEvent)return void console.warn("no document.createEvent");var F$y=F$T.document.createEvent("HTMLEvents");return F$y.initEvent("resize",!1,!1),void F$T.window.dispatchEvent(F$y)}},F$T.createElement=function(F$J){return F$T.__init__(),F$T.document.__createElement(F$J)},F$T.getElementById=function(F$J){return F$T.__init__(),F$T.document.getElementById(F$J)},F$T.removeElement=function(F$J){F$J&&F$J.parentNode&&F$J.parentNode.removeChild(F$J)},F$T.now=function(){return F$v.now()},F$T._window=null,F$T._document=null,F$T._container=null,F$T.userAgent=null,F$T.u=null,F$T.onIOS=!1,F$T.onMac=!1,F$T.onMobile=!1,F$T.onIPhone=!1,F$T.onIPad=!1,F$T.onAndroid=!1,F$T.onWP=!1,F$T.onQQBrowser=!1,F$T.onMQQBrowser=!1,F$T.onSafari=!1,F$T.onFirefox=!1,F$T.onEdge=!1,F$T.onIE=!1,F$T.onWeiXin=!1,F$T.onMiniGame=!1,F$T.onLimixiu=!1,F$T.onPC=!1,F$T.httpProtocol=!1,F$T.webAudioEnabled=!1,F$T.soundType=null,F$T.enableTouch=!1,F$T.canvas=null,F$T.context=null,F$T.__init$=function(){},F$T}()),F$W=function(){function F$y(F$J){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,F$J?(this._u8d_=new Uint8Array(F$J),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}F$$(F$y,"laya.utils.Byte");var F$J=F$y.prototype;return F$J.___resizeBuffer=function(F$y){try{var F$J=new Uint8Array(F$y);null!=this._u8d_&&(this._u8d_.length<=F$y?F$J.set(this._u8d_):F$J.set(this._u8d_.subarray(0,F$y))),this._u8d_=F$J,this._d_=new DataView(F$J.buffer)}catch(F$J){throw"___resizeBuffer err:"+F$y}},F$J.getString=function(){return this.rUTF(this.getUint16())},F$J.getFloat32Array=function(F$J,F$y){var F$T=F$J+F$y;F$T=F$T>this._length?this._length:F$T;var F$V=new Float32Array(this._d_.buffer.slice(F$J,F$T));return this._pos_=F$T,F$V},F$J.getUint8Array=function(F$J,F$y){var F$T=F$J+F$y;F$T=F$T>this._length?this._length:F$T;var F$V=new Uint8Array(this._d_.buffer.slice(F$J,F$T));return this._pos_=F$T,F$V},F$J.getInt16Array=function(F$J,F$y){var F$T=F$J+F$y;F$T=F$T>this._length?this._length:F$T;var F$V=new Int16Array(this._d_.buffer.slice(F$J,F$T));return this._pos_=F$T,F$V},F$J.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var F$J=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,F$J},F$J.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var F$J=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,F$J},F$J.writeFloat32=function(F$J){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,F$J,this._xd_),this._pos_+=4},F$J.writeFloat64=function(F$J){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,F$J,this._xd_),this._pos_+=8},F$J.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var F$J=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,F$J},F$J.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var F$J=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,F$J},F$J.writeInt32=function(F$J){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,F$J,this._xd_),this._pos_+=4},F$J.writeUint32=function(F$J){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,F$J,this._xd_),this._pos_+=4},F$J.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var F$J=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,F$J},F$J.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var F$J=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,F$J},F$J.writeUint16=function(F$J){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,F$J,this._xd_),this._pos_+=2},F$J.writeInt16=function(F$J){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,F$J,this._xd_),this._pos_+=2},F$J.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},F$J.writeUint8=function(F$J){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,F$J),this._pos_++},F$J._getUInt8=function(F$J){return this._d_.getUint8(F$J)},F$J._getUint16=function(F$J){return this._d_.getUint16(F$J,this._xd_)},F$J._getMatrix=function(){return new F$Q(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},F$J.rUTF=function(F$J){for(var F$y=[],F$T=this._pos_+F$J,F$V=0,F$Z=0,F$m=0,F$R=String.fromCharCode,F$n=this._u8d_;this._pos_<F$T;)(F$V=F$n[this._pos_++])<128?0!=F$V&&F$y.push(F$R(F$V)):F$V<224?F$y.push(F$R((63&F$V)<<6|127&F$n[this._pos_++])):F$V<240?(F$Z=F$n[this._pos_++],F$y.push(F$R((31&F$V)<<12|(127&F$Z)<<6|127&F$n[this._pos_++]))):(F$Z=F$n[this._pos_++],F$m=F$n[this._pos_++],F$y.push(F$R((15&F$V)<<18|(127&F$Z)<<12|F$m<<6&127|127&F$n[this._pos_++]))),0;return F$y.join("")},F$J.getCustomString=function(F$J){for(var F$y=[],F$T=0,F$V=0,F$Z=0,F$m=String.fromCharCode,F$R=this._u8d_;0<F$J;)if((F$V=F$R[this._pos_])<128)F$y.push(F$m(F$V)),this._pos_++,F$J--;else for(F$T=F$V-128,this._pos_++,F$J-=F$T;0<F$T;)F$V=F$R[this._pos_++],F$Z=F$R[this._pos_++],F$y.push(F$m(F$Z<<8|F$V)),F$T--;return F$y.join("")},F$J.clear=function(){this._pos_=0,this.length=0},F$J.__getBuffer=function(){return this._d_.buffer},F$J.writeUTFBytes=function(F$J){for(var F$y=0,F$T=(F$J+="").length;F$y<F$T;F$y++){var F$V=F$J.charCodeAt(F$y);F$V<=127?this.writeByte(F$V):F$V<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|F$V>>6,128|63&F$V],this._pos_),this._pos_+=2):F$V<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|F$V>>12,128|F$V>>6&63,128|63&F$V],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|F$V>>18,128|F$V>>12&63,128|F$V>>6&63,128|63&F$V],this._pos_),this._pos_+=4)}},F$J.writeUTFString=function(F$J){var F$y=this.pos;this.writeUint16(1),this.writeUTFBytes(F$J);var F$T=this.pos-F$y-2;if(65536<=F$T)throw"writeUTFString byte len more than 65536";this._d_.setUint16(F$y,F$T,this._xd_)},F$J.readUTFString=function(){return this.readUTFBytes(this.getUint16())},F$J.getUTFString=function(){return this.readUTFString()},F$J.readUTFBytes=function(F$J){if(void 0===F$J&&(F$J=-1),0==F$J)return"";var F$y=this.bytesAvailable;if(F$y<F$J)throw"readUTFBytes error - Out of bounds";return F$J=0<F$J?F$J:F$y,this.rUTF(F$J)},F$J.getUTFBytes=function(F$J){return void 0===F$J&&(F$J=-1),this.readUTFBytes(F$J)},F$J.writeByte=function(F$J){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,F$J),this._pos_+=1},F$J.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},F$J.getByte=function(){return this.readByte()},F$J.ensureWrite=function(F$J){this._length<F$J&&(this._length=F$J),this._allocated_<F$J&&(this.length=F$J)},F$J.writeArrayBuffer=function(F$J,F$y,F$T){if(void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),F$y<0||F$T<0)throw"writeArrayBuffer error - Out of bounds";0==F$T&&(F$T=F$J.byteLength-F$y),this.ensureWrite(this._pos_+F$T);var F$V=new Uint8Array(F$J);this._u8d_.set(F$V.subarray(F$y,F$y+F$T),this._pos_),this._pos_+=F$T},F$B(0,F$J,"buffer",function(){var F$J=this._d_.buffer;return F$J.byteLength==this.length?F$J:F$J.slice(0,this.length)}),F$B(0,F$J,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(F$J){this._xd_="littleEndian"==F$J}),F$B(0,F$J,"length",function(){return this._length},function(F$J){this._allocated_<F$J?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(F$J,2*this._allocated_))):this._allocated_>F$J&&this.___resizeBuffer(this._allocated_=F$J),this._length=F$J}),F$B(0,F$J,"pos",function(){return this._pos_},function(F$J){this._pos_=F$J}),F$B(0,F$J,"bytesAvailable",function(){return this._length-this._pos_}),F$y.getSystemEndian=function(){if(!F$y._sysEndian){var F$J=new ArrayBuffer(2);new DataView(F$J).setInt16(0,256,!0),F$y._sysEndian=256===new Int16Array(F$J)[0]?"littleEndian":"bigEndian"}return F$y._sysEndian},F$y.BIG_ENDIAN="bigEndian",F$y.LITTLE_ENDIAN="littleEndian",F$y._sysEndian=null,F$y}(),F$I=function(){function F$Z(){}return F$$(F$Z,"laya.utils.CacheManager"),F$Z.regCacheByFunction=function(F$J,F$y){var F$T;F$Z.unRegCacheByFunction(F$J,F$y),F$T={tryDispose:F$J,getCacheList:F$y},F$Z._cacheList.push(F$T)},F$Z.unRegCacheByFunction=function(F$J,F$y){var F$T,F$V=0;for(F$T=F$Z._cacheList.length,F$V=0;F$V<F$T;F$V++)if(F$Z._cacheList[F$V].tryDispose==F$J&&F$Z._cacheList[F$V].getCacheList==F$y)return void F$Z._cacheList.splice(F$V,1)},F$Z.forceDispose=function(){var F$J=0,F$y=F$Z._cacheList.length;for(F$J=0;F$J<F$y;F$J++)F$Z._cacheList[F$J].tryDispose(!0)},F$Z.beginCheck=function(F$J){void 0===F$J&&(F$J=15e3),F$a.timer.loop(F$J,null,F$Z._checkLoop)},F$Z.stopCheck=function(){F$a.timer.clear(null,F$Z._checkLoop)},F$Z._checkLoop=function(){var F$J=F$Z._cacheList;if(!(F$J.length<1)){var F$y,F$T=F$f.now(),F$V=0;for(F$y=F$V=F$J.length;0<F$V&&(F$J[F$Z._index=++F$Z._index%F$y].tryDispose(!1),!(F$f.now()-F$T>F$Z.loopTimeLimit));)F$V--}},F$Z.loopTimeLimit=2,F$Z._cacheList=[],F$Z._index=0,F$Z}(),F$Y=function(){function F$G(){}return F$$(F$G,"laya.utils.ClassUtils"),F$G.regClass=function(F$J,F$y){F$G._classMap[F$J]=F$y},F$G.getRegClass=function(F$J){return F$G._classMap[F$J]},F$G.getInstance=function(F$J){var F$y=F$G.getClass(F$J);return F$y?new F$y:(console.warn("[error] Undefined class:",F$J),null)},F$G.createByJson=function(F$J,F$y,F$T,F$V,F$Z){"string"==typeof F$J&&(F$J=JSON.parse(F$J));var F$m=F$J.props;if(!F$y&&!(F$y=F$Z?F$Z.runWith(F$J):F$G.getInstance(F$m.runtime||F$J.type)))return null;var F$R=F$J.child;if(F$R)for(var F$n=0,F$K=F$R.length;F$n<F$K;F$n++){var F$A=F$R[F$n];if("render"!==F$A.props.name&&"render"!==F$A.props.renderType||!F$y._$set_itemRender)if("Graphic"==F$A.type)F$G.addGraphicsToSprite(F$A,F$y);else if(F$G.isDrawType(F$A.type))F$G.addGraphicToSprite(F$A,F$y,!0);else{var F$$=F$G.createByJson(F$A,null,F$T,F$V,F$Z);"Script"==F$A.type?F$$.hasOwnProperty("owner")?F$$.owner=F$y:F$$.hasOwnProperty("target")&&(F$$.target=F$y):"mask"==F$A.props.renderType?F$y.mask=F$$:F$y.addChild(F$$)}else F$y.itemRender=F$A}if(F$m)for(var F$e in F$m){var F$M=F$m[F$e];"var"===F$e&&F$T?F$T[F$M]=F$y:F$M instanceof Array&&"function"==typeof F$y[F$e]?F$y[F$e].apply(F$y,F$M):F$y[F$e]=F$M}return F$V&&F$J.customProps&&F$V.runWith([F$y,F$J]),F$y.created&&F$y.created(),F$y},F$G.addGraphicsToSprite=function(F$J,F$y){var F$T;if((F$T=F$J.child)&&!(F$T.length<1)){var F$V;F$V=F$G._getGraphicsFromSprite(F$J,F$y);var F$Z=0,F$m=0;F$J.props&&(F$Z=F$G._getObjVar(F$J.props,"x",0),F$m=F$G._getObjVar(F$J.props,"y",0)),0!=F$Z&&0!=F$m&&F$V.translate(F$Z,F$m);var F$R,F$n=0;for(F$R=F$T.length,F$n=0;F$n<F$R;F$n++)F$G._addGraphicToGraphics(F$T[F$n],F$V);0!=F$Z&&0!=F$m&&F$V.translate(-F$Z,-F$m)}},F$G.addGraphicToSprite=function(F$J,F$y,F$T){var F$V;void 0===F$T&&(F$T=!1),F$V=F$T?F$G._getGraphicsFromSprite(F$J,F$y):F$y.graphics,F$G._addGraphicToGraphics(F$J,F$V)},F$G._getGraphicsFromSprite=function(F$J,F$y){var F$T,F$V;if(!F$J||!F$J.props)return F$y.graphics;switch(F$V=F$J.props.renderType){case"hit":case"unHit":var F$Z;F$y.hitArea||(F$y.hitArea=new F$F),(F$Z=F$y.hitArea)[F$V]||(F$Z[F$V]=new F$M),F$T=F$Z[F$V]}return F$T||(F$T=F$y.graphics),F$T},F$G._getTransformData=function(F$J){var F$y;(F$J.hasOwnProperty("pivotX")||F$J.hasOwnProperty("pivotY"))&&(F$y=F$y||new F$Q).translate(-F$G._getObjVar(F$J,"pivotX",0),-F$G._getObjVar(F$J,"pivotY",0));var F$T=F$G._getObjVar(F$J,"scaleX",1),F$V=F$G._getObjVar(F$J,"scaleY",1),F$Z=F$G._getObjVar(F$J,"rotation",0);F$G._getObjVar(F$J,"skewX",0),F$G._getObjVar(F$J,"skewY",0);return 1==F$T&&1==F$V&&0==F$Z||((F$y=F$y||new F$Q).scale(F$T,F$V),F$y.rotate(.0174532922222222*F$Z)),F$y},F$G._addGraphicToGraphics=function(F$J,F$y){var F$T,F$V;if((F$T=F$J.props)&&(F$V=F$G.DrawTypeDic[F$J.type])){var F$Z,F$m;F$Z=F$y;var F$R=F$G._getParams(F$T,F$V[1],F$V[2],F$V[3]);((F$m=F$G._tM)||1!=F$G._alpha)&&(F$Z.save(),F$m&&F$Z.transform(F$m),1!=F$G._alpha&&F$Z.alpha(F$G._alpha)),F$Z[F$V[0]].apply(F$Z,F$R),(F$m||1!=F$G._alpha)&&F$Z.restore()}},F$G._adptLineData=function(F$J){return F$J[2]=parseFloat(F$J[0])+parseFloat(F$J[2]),F$J[3]=parseFloat(F$J[1])+parseFloat(F$J[3]),F$J},F$G._adptTextureData=function(F$J){return F$J[0]=F$nJ.getRes(F$J[0]),F$J},F$G._adptLinesData=function(F$J){return F$J[2]=F$G._getPointListByStr(F$J[2]),F$J},F$G.isDrawType=function(F$J){return"Image"!=F$J&&F$G.DrawTypeDic.hasOwnProperty(F$J)},F$G._getParams=function(F$J,F$y,F$T,F$V){var F$Z;void 0===F$T&&(F$T=0),(F$Z=F$G._temParam).length=F$y.length;var F$m,F$R,F$n=0;for(F$m=F$y.length,F$n=0;F$n<F$m;F$n++)F$Z[F$n]=F$G._getObjVar(F$J,F$y[F$n][0],F$y[F$n][1]);return F$G._alpha=F$G._getObjVar(F$J,"alpha",1),F$R=F$G._getTransformData(F$J),F$G._tM=F$R?(F$T||(F$T=0),F$R.translate(F$Z[F$T],F$Z[F$T+1]),F$Z[F$T]=F$Z[F$T+1]=0,F$R):null,F$V&&F$G[F$V]&&(F$Z=F$G[F$V](F$Z)),F$Z},F$G._getPointListByStr=function(F$J){var F$y,F$T,F$V=0;for(F$T=(F$y=F$J.split(",")).length,F$V=0;F$V<F$T;F$V++)F$y[F$V]=parseFloat(F$y[F$V]);return F$y},F$G._getObjVar=function(F$J,F$y,F$T){return F$J.hasOwnProperty(F$y)?F$J[F$y]:F$T},F$G._temParam=[],F$G._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},F$G.getClass=function(F$J){var F$y=F$G._classMap[F$J]||F$J;return"string"==typeof F$y?F$a.__classmap[F$y]:F$y},F$G._tM=null,F$G._alpha=NaN,F$K(F$G,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),F$G}(),F$U=function(){function F$m(F$J){if(this._color=[],"string"==typeof F$J){null===(this.strColor=F$J)&&(F$J="#000000"),"#"==F$J.charAt(0)&&(F$J=F$J.substr(1));var F$y=F$J.length;if(3==F$y||4==F$y){for(var F$T="",F$V=0;F$V<F$y;F$V++)F$T+=F$J[F$V]+F$J[F$V];F$J=F$T}var F$Z=this.numColor=parseInt(F$J,16);if(8==F$J.length)return void(this._color=[parseInt(F$J.substr(0,2),16)/255,((16711680&F$Z)>>16)/255,((65280&F$Z)>>8)/255,(255&F$Z)/255])}else F$Z=this.numColor=F$J,this.strColor=F$g.toHexColor(F$Z);this._color=[((16711680&F$Z)>>16)/255,((65280&F$Z)>>8)/255,(255&F$Z)/255,1],this._color.__id=++F$m._COLODID}return F$$(F$m,"laya.utils.Color"),F$m._initDefault=function(){for(var F$J in F$m._DEFAULT={},F$m._COLOR_MAP)F$m._SAVE[F$J]=F$m._DEFAULT[F$J]=new F$m(F$m._COLOR_MAP[F$J]);return F$m._DEFAULT},F$m._initSaveMap=function(){for(var F$J in F$m._SAVE_SIZE=0,F$m._SAVE={},F$m._DEFAULT)F$m._SAVE[F$J]=F$m._DEFAULT[F$J]},F$m.create=function(F$J){var F$y=F$m._SAVE[F$J+""];return null!=F$y?F$y:(F$m._SAVE_SIZE<1e3||F$m._initSaveMap(),F$m._SAVE[F$J+""]=new F$m(F$J))},F$m._SAVE={},F$m._SAVE_SIZE=0,F$m._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},F$m._DEFAULT=F$m._initDefault(),F$m._COLODID=1,F$m}(),F$d=(function(){function F$J(){this._values=[],this._keys=[]}F$$(F$J,"laya.utils.Dictionary");var F$y=F$J.prototype;F$y.set=function(F$J,F$y){var F$T=this.indexOf(F$J);0<=F$T?this._values[F$T]=F$y:(this._keys.push(F$J),this._values.push(F$y))},F$y.indexOf=function(F$J){var F$y=this._keys.indexOf(F$J);return 0<=F$y?F$y:(F$J="string"==typeof F$J?Number(F$J):"number"==typeof F$J?F$J.toString():F$J,this._keys.indexOf(F$J))},F$y.get=function(F$J){var F$y=this.indexOf(F$J);return F$y<0?null:this._values[F$y]},F$y.remove=function(F$J){var F$y=this.indexOf(F$J);return 0<=F$y&&(this._keys.splice(F$y,1),this._values.splice(F$y,1),!0)},F$y.clear=function(){this._values.length=0,this._keys.length=0},F$B(0,F$y,"values",function(){return this._values}),F$B(0,F$y,"keys",function(){return this._keys})}(),function(){function F$J(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}F$$(F$J,"laya.utils.Dragging");var F$y=F$J.prototype;return F$y.start=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){void 0===F$n&&(F$n=.92),this.clearTimer(),this.target=F$J,this.area=F$y,this.hasInertia=F$T,this.elasticDistance=F$y?F$V:0,this.elasticBackTime=F$Z,this.data=F$m,this._disableMouseEvent=F$R,this.ratio=F$n,1!=F$J.globalScaleX||1!=F$J.globalScaleY?this._parent=F$J.parent:this._parent=F$a.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,F$a.stage.on("mouseup",this,this.onStageMouseUp),F$a.stage.on("mouseout",this,this.onStageMouseUp),F$a.timer.frameLoop(1,this,this.loop)},F$y.clearTimer=function(){F$a.timer.clear(this,this.loop),F$a.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},F$y.stop=function(){this._dragging&&(F$o.instance.disableMouseEvent=!1,F$a.stage.off("mouseup",this,this.onStageMouseUp),F$a.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},F$y.loop=function(){var F$J=this._parent.getMousePoint(),F$y=F$J.x,F$T=F$J.y,F$V=F$y-this._lastX,F$Z=F$T-this._lastY;if(this._clickOnly){if(!(1<Math.abs(F$V*F$a.stage._canvasTransform.getScaleX())||1<Math.abs(F$Z*F$a.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),F$o.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(F$V,F$Z);0==F$V&&0==F$Z||(this._lastX=F$y,this._lastY=F$T,this.target.x+=F$V*this._elasticRateX,this.target.y+=F$Z*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},F$y.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var F$J=this.area.x-this.target.x;else F$J=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-F$J/this.elasticDistance),this.target.y<this.area.y)var F$y=this.area.y-this.target.y;else F$y=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-F$y/this.elasticDistance)}},F$y.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},F$y.onStageMouseUp=function(F$J){if(F$o.instance.disableMouseEvent=!1,F$a.stage.off("mouseup",this,this.onStageMouseUp),F$a.stage.off("mouseout",this,this.onStageMouseUp),F$a.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var F$y=this._offsets.length,F$T=Math.min(F$y,6),F$V=this._offsets.length-F$T,F$Z=F$y-1;F$V<F$Z;F$Z--)this._offsetY+=this._offsets[F$Z--],this._offsetX+=this._offsets[F$Z];this._offsetX=this._offsetX/F$T*2,this._offsetY=this._offsetY/F$T*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),F$a.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},F$y.checkElastic=function(){var F$J=NaN,F$y=NaN;if(this.target.x<this.area.x?F$J=this.area.x:this.target.x>this.area.x+this.area.width&&(F$J=this.area.x+this.area.width),this.target.y<this.area.y?F$y=this.area.y:this.target.y>this.area.y+this.area.height&&(F$y=this.area.y+this.area.height),isNaN(F$J)&&isNaN(F$y))this.clear();else{var F$T={};isNaN(F$J)||(F$T.x=F$J),isNaN(F$y)||(F$T.y=F$y),this._tween=F$j.to(this.target,F$T,this.elasticBackTime,F$C.sineOut,F$O.create(this,this.clear),0,!1,!1)}},F$y.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(F$a.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},F$y.clear=function(){if(this.target){this.clearTimer();var F$J=this.target;this.target=null,this._parent=null,F$J.event("dragend",this.data)}},F$J}()),F$C=function(){function F$n(){}return F$$(F$n,"laya.utils.Ease"),F$n.linearNone=function(F$J,F$y,F$T,F$V){return F$T*F$J/F$V+F$y},F$n.linearIn=function(F$J,F$y,F$T,F$V){return F$T*F$J/F$V+F$y},F$n.linearInOut=function(F$J,F$y,F$T,F$V){return F$T*F$J/F$V+F$y},F$n.linearOut=function(F$J,F$y,F$T,F$V){return F$T*F$J/F$V+F$y},F$n.bounceIn=function(F$J,F$y,F$T,F$V){return F$T-F$n.bounceOut(F$V-F$J,0,F$T,F$V)+F$y},F$n.bounceInOut=function(F$J,F$y,F$T,F$V){return F$J<.5*F$V?.5*F$n.bounceIn(2*F$J,0,F$T,F$V)+F$y:.5*F$n.bounceOut(2*F$J-F$V,0,F$T,F$V)+.5*F$T+F$y},F$n.bounceOut=function(F$J,F$y,F$T,F$V){return(F$J/=F$V)<1/2.75?F$T*(7.5625*F$J*F$J)+F$y:F$J<2/2.75?F$T*(7.5625*(F$J-=1.5/2.75)*F$J+.75)+F$y:F$J<2.5/2.75?F$T*(7.5625*(F$J-=2.25/2.75)*F$J+.9375)+F$y:F$T*(7.5625*(F$J-=2.625/2.75)*F$J+.984375)+F$y},F$n.backIn=function(F$J,F$y,F$T,F$V,F$Z){return void 0===F$Z&&(F$Z=1.70158),F$T*(F$J/=F$V)*F$J*((F$Z+1)*F$J-F$Z)+F$y},F$n.backInOut=function(F$J,F$y,F$T,F$V,F$Z){return void 0===F$Z&&(F$Z=1.70158),(F$J/=.5*F$V)<1?.5*F$T*(F$J*F$J*((1+(F$Z*=1.525))*F$J-F$Z))+F$y:F$T/2*((F$J-=2)*F$J*((1+(F$Z*=1.525))*F$J+F$Z)+2)+F$y},F$n.backOut=function(F$J,F$y,F$T,F$V,F$Z){return void 0===F$Z&&(F$Z=1.70158),F$T*((F$J=F$J/F$V-1)*F$J*((F$Z+1)*F$J+F$Z)+1)+F$y},F$n.elasticIn=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R;return void 0===F$Z&&(F$Z=0),void 0===F$m&&(F$m=0),0==F$J?F$y:1==(F$J/=F$V)?F$y+F$T:(F$m||(F$m=.3*F$V),F$R=!F$Z||0<F$T&&F$Z<F$T||F$T<0&&F$Z<-F$T?(F$Z=F$T,F$m/4):F$m/F$n.PI2*Math.asin(F$T/F$Z),-F$Z*Math.pow(2,10*(F$J-=1))*Math.sin((F$J*F$V-F$R)*F$n.PI2/F$m)+F$y)},F$n.elasticInOut=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R;return void 0===F$Z&&(F$Z=0),void 0===F$m&&(F$m=0),0==F$J?F$y:2==(F$J/=.5*F$V)?F$y+F$T:(F$m||(F$m=F$V*(.3*1.5)),F$R=!F$Z||0<F$T&&F$Z<F$T||F$T<0&&F$Z<-F$T?(F$Z=F$T,F$m/4):F$m/F$n.PI2*Math.asin(F$T/F$Z),F$J<1?F$Z*Math.pow(2,10*(F$J-=1))*Math.sin((F$J*F$V-F$R)*F$n.PI2/F$m)*-.5+F$y:F$Z*Math.pow(2,-10*(F$J-=1))*Math.sin((F$J*F$V-F$R)*F$n.PI2/F$m)*.5+F$T+F$y)},F$n.elasticOut=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R;return void 0===F$Z&&(F$Z=0),void 0===F$m&&(F$m=0),0==F$J?F$y:1==(F$J/=F$V)?F$y+F$T:(F$m||(F$m=.3*F$V),F$R=!F$Z||0<F$T&&F$Z<F$T||F$T<0&&F$Z<-F$T?(F$Z=F$T,F$m/4):F$m/F$n.PI2*Math.asin(F$T/F$Z),F$Z*Math.pow(2,-10*F$J)*Math.sin((F$J*F$V-F$R)*F$n.PI2/F$m)+F$T+F$y)},F$n.strongIn=function(F$J,F$y,F$T,F$V){return F$T*(F$J/=F$V)*F$J*F$J*F$J*F$J+F$y},F$n.strongInOut=function(F$J,F$y,F$T,F$V){return(F$J/=.5*F$V)<1?.5*F$T*F$J*F$J*F$J*F$J*F$J+F$y:.5*F$T*((F$J-=2)*F$J*F$J*F$J*F$J+2)+F$y},F$n.strongOut=function(F$J,F$y,F$T,F$V){return F$T*((F$J=F$J/F$V-1)*F$J*F$J*F$J*F$J+1)+F$y},F$n.sineInOut=function(F$J,F$y,F$T,F$V){return.5*-F$T*(Math.cos(Math.PI*F$J/F$V)-1)+F$y},F$n.sineIn=function(F$J,F$y,F$T,F$V){return-F$T*Math.cos(F$J/F$V*F$n.HALF_PI)+F$T+F$y},F$n.sineOut=function(F$J,F$y,F$T,F$V){return F$T*Math.sin(F$J/F$V*F$n.HALF_PI)+F$y},F$n.quintIn=function(F$J,F$y,F$T,F$V){return F$T*(F$J/=F$V)*F$J*F$J*F$J*F$J+F$y},F$n.quintInOut=function(F$J,F$y,F$T,F$V){return(F$J/=.5*F$V)<1?.5*F$T*F$J*F$J*F$J*F$J*F$J+F$y:.5*F$T*((F$J-=2)*F$J*F$J*F$J*F$J+2)+F$y},F$n.quintOut=function(F$J,F$y,F$T,F$V){return F$T*((F$J=F$J/F$V-1)*F$J*F$J*F$J*F$J+1)+F$y},F$n.quartIn=function(F$J,F$y,F$T,F$V){return F$T*(F$J/=F$V)*F$J*F$J*F$J+F$y},F$n.quartInOut=function(F$J,F$y,F$T,F$V){return(F$J/=.5*F$V)<1?.5*F$T*F$J*F$J*F$J*F$J+F$y:.5*-F$T*((F$J-=2)*F$J*F$J*F$J-2)+F$y},F$n.quartOut=function(F$J,F$y,F$T,F$V){return-F$T*((F$J=F$J/F$V-1)*F$J*F$J*F$J-1)+F$y},F$n.cubicIn=function(F$J,F$y,F$T,F$V){return F$T*(F$J/=F$V)*F$J*F$J+F$y},F$n.cubicInOut=function(F$J,F$y,F$T,F$V){return(F$J/=.5*F$V)<1?.5*F$T*F$J*F$J*F$J+F$y:.5*F$T*((F$J-=2)*F$J*F$J+2)+F$y},F$n.cubicOut=function(F$J,F$y,F$T,F$V){return F$T*((F$J=F$J/F$V-1)*F$J*F$J+1)+F$y},F$n.quadIn=function(F$J,F$y,F$T,F$V){return F$T*(F$J/=F$V)*F$J+F$y},F$n.quadInOut=function(F$J,F$y,F$T,F$V){return(F$J/=.5*F$V)<1?.5*F$T*F$J*F$J+F$y:.5*-F$T*(--F$J*(F$J-2)-1)+F$y},F$n.quadOut=function(F$J,F$y,F$T,F$V){return-F$T*(F$J/=F$V)*(F$J-2)+F$y},F$n.expoIn=function(F$J,F$y,F$T,F$V){return 0==F$J?F$y:F$T*Math.pow(2,10*(F$J/F$V-1))+F$y-.001*F$T},F$n.expoInOut=function(F$J,F$y,F$T,F$V){return 0==F$J?F$y:F$J==F$V?F$y+F$T:(F$J/=.5*F$V)<1?.5*F$T*Math.pow(2,10*(F$J-1))+F$y:.5*F$T*(2-Math.pow(2,-10*--F$J))+F$y},F$n.expoOut=function(F$J,F$y,F$T,F$V){return F$J==F$V?F$y+F$T:F$T*(1-Math.pow(2,-10*F$J/F$V))+F$y},F$n.circIn=function(F$J,F$y,F$T,F$V){return-F$T*(Math.sqrt(1-(F$J/=F$V)*F$J)-1)+F$y},F$n.circInOut=function(F$J,F$y,F$T,F$V){return(F$J/=.5*F$V)<1?.5*-F$T*(Math.sqrt(1-F$J*F$J)-1)+F$y:.5*F$T*(Math.sqrt(1-(F$J-=2)*F$J)+1)+F$y},F$n.circOut=function(F$J,F$y,F$T,F$V){return F$T*Math.sqrt(1-(F$J=F$J/F$V-1)*F$J)+F$y},F$n.HALF_PI=.5*Math.PI,F$n.PI2=2*Math.PI,F$n}(),F$F=function(){function F$e(){this._hit=null,this._unHit=null}F$$(F$e,"laya.utils.HitArea");var F$J=F$e.prototype;return F$J.isHit=function(F$J,F$y){return!!F$e.isHitGraphic(F$J,F$y,this.hit)&&!F$e.isHitGraphic(F$J,F$y,this.unHit)},F$J.contains=function(F$J,F$y){return this.isHit(F$J,F$y)},F$B(0,F$J,"hit",function(){return this._hit||(this._hit=new F$M),this._hit},function(F$J){this._hit=F$J}),F$B(0,F$J,"unHit",function(){return this._unHit||(this._unHit=new F$M),this._unHit},function(F$J){this._unHit=F$J}),F$e.isHitGraphic=function(F$J,F$y,F$T){if(!F$T)return!1;var F$V;if(!(F$V=F$T.cmds)&&F$T._one&&((F$V=F$e._cmds).length=1,F$V[0]=F$T._one),!F$V)return!1;var F$Z,F$m,F$R=0;for(F$Z=F$V.length,F$R=0;F$R<F$Z;F$R++)if(F$m=F$V[F$R]){var F$n=F$u._context;switch(F$m.callee){case F$n._translate:case 6:F$J-=F$m[0],F$y-=F$m[1]}if(F$e.isHitCmd(F$J,F$y,F$m))return!0}return!1},F$e.isHitCmd=function(F$J,F$y,F$T){if(!F$T)return!1;var F$V=F$u._context,F$Z=!1;switch(F$T.callee){case F$V._drawRect:case 13:F$e._rec.setTo(F$T[0],F$T[1],F$T[2],F$T[3]),F$Z=F$e._rec.contains(F$J,F$y);break;case F$V._drawCircle:case F$V._fillCircle:case 14:F$Z=(F$J-=F$T[0])*F$J+(F$y-=F$T[1])*F$y<F$T[2]*F$T[2];break;case F$V._drawPoly:case 18:F$J-=F$T[0],F$y-=F$T[1],F$Z=F$e.ptInPolygon(F$J,F$y,F$T[2])}return F$Z},F$e.ptInPolygon=function(F$J,F$y,F$T){var F$V;(F$V=F$e._ptPoint).setTo(F$J,F$y);var F$Z,F$m=0,F$R=NaN,F$n=NaN,F$K=NaN,F$A=NaN;F$Z=F$T.length;for(var F$$=0;F$$<F$Z;F$$+=2){if(F$R=F$T[F$$],F$n=F$T[F$$+1],F$K=F$T[(F$$+2)%F$Z],F$n!=(F$A=F$T[(F$$+3)%F$Z]))if(!(F$V.y<Math.min(F$n,F$A)))if(!(F$V.y>=Math.max(F$n,F$A)))(F$V.y-F$n)*(F$K-F$R)/(F$A-F$n)+F$R>F$V.x&&F$m++}return F$m%2==1},F$e._cmds=[],F$K(F$e,["_rec",function(){return this._rec=new F$r},"_ptPoint",function(){return this._ptPoint=new F$q}]),F$e}(),F$b=(function(){function F$Z(F$J,F$y,F$T,F$V){this.char=F$J,this.charNum=F$J.charCodeAt(0),this._x=this._y=0,this.width=F$y,this.height=F$T,this.style=F$V,this.isWord=!F$Z._isWordRegExp.test(F$J)}F$$(F$Z,"laya.utils.HTMLChar");var F$J=F$Z.prototype;F$a.imps(F$J,{"laya.display.ILayout":!0}),F$J.setSprite=function(F$J){this._sprite=F$J},F$J.getSprite=function(){return this._sprite},F$J._isChar=function(){return!0},F$J._getCSSStyle=function(){return this.style},F$B(0,F$J,"width",function(){return this._w},function(F$J){this._w=F$J}),F$B(0,F$J,"x",function(){return this._x},function(F$J){this._sprite&&(this._sprite.x=F$J),this._x=F$J}),F$B(0,F$J,"y",function(){return this._y},function(F$J){this._sprite&&(this._sprite.y=F$J),this._y=F$J}),F$B(0,F$J,"height",function(){return this._h},function(F$J){this._h=F$J}),F$Z._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function F$y(){}F$$(F$y,"laya.utils.Log"),F$y.enable=function(){F$y._logdiv||(F$y._logdiv=F$f.window.document.createElement("div"),F$f.window.document.body.appendChild(F$y._logdiv),F$y._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},F$y.toggle=function(){var F$J=F$y._logdiv.style;"1px"==F$J.width?F$J.width=F$J.height="50%":F$J.width=F$J.height="1px"},F$y.print=function(F$J){F$y._logdiv&&(F$y.maxCount<=F$y._count&&F$y.clear(),F$y._count++,F$y._logdiv.innerText+=F$J+"\n",F$y._logdiv.scrollTop=F$y._logdiv.scrollHeight)},F$y.clear=function(){F$y._logdiv.innerText="",F$y._count=0},F$y._logdiv=null,F$y._count=0,F$y.maxCount=20}(),function(){function F$y(){}F$$(F$y,"laya.utils.Mouse"),F$B(1,F$y,"cursor",function(){return F$y._style.cursor},function(F$J){F$y._style.cursor=F$J}),F$y.hide=function(){"none"!=F$y.cursor&&(F$y._preCursor=F$y.cursor,F$y.cursor="none")},F$y.show=function(){"none"==F$y.cursor&&(F$y.cursor=F$y._preCursor?F$y._preCursor:"auto")},F$y._preCursor=null,F$K(F$y,["_style",function(){return this._style=F$f.document.body.style}])}(),function(){function F$m(){}return F$$(F$m,"laya.utils.Pool"),F$m.getPoolBySign=function(F$J){return F$m._poolDic[F$J]||(F$m._poolDic[F$J]=[])},F$m.clearBySign=function(F$J){F$m._poolDic[F$J]&&(F$m._poolDic[F$J].length=0)},F$m.recover=function(F$J,F$y){F$y.__InPool||(F$y.__InPool=!0,F$m.getPoolBySign(F$J).push(F$y))},F$m.getItemByClass=function(F$J,F$y){var F$T=F$m.getPoolBySign(F$J),F$V=F$T.length?F$T.pop():new F$y;return F$V.__InPool=!1,F$V},F$m.getItemByCreateFun=function(F$J,F$y,F$T){var F$V=F$m.getPoolBySign(F$J),F$Z=F$V.length?F$V.pop():F$y.call(F$T);return F$Z.__InPool=!1,F$Z},F$m.getItem=function(F$J){var F$y=F$m.getPoolBySign(F$J),F$T=F$y.length?F$y.pop():null;return F$T&&(F$T.__InPool=!1),F$T},F$m._poolDic={},F$m.InPoolSign="__InPool",F$m}()),F$h=function(){function F$K(){}return F$$(F$K,"laya.utils.Stat"),F$B(1,F$K,"onclick",null,function(F$J){F$K._sp&&F$K._sp.on("click",F$K._sp,F$J),F$K._canvas&&(F$K._canvas.source.onclick=F$J,F$K._canvas.source.style.pointerEvents="")}),F$K.show=function(F$J,F$y,F$T){if(void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),!F$u.isConchApp||F$u.isConchWebGL){if(F$u.isConchWebGL||F$f.onMiniGame||F$f.onLimixiu||(F$K._useCanvas=!0),F$K._show=!0,F$K._fpsData.length=60,F$K._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},F$K._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},F$K._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},F$K._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},F$u.isWebGL)if(F$K._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},F$u.is3DMode){if(F$K._view[0].title="FPS(3D)",F$K._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},F$K._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},F$K._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==F$T){var F$V=8;F$K._view[F$V++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},F$K._view[F$V++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},F$K._view[F$V++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},F$K._view[F$V++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$K._view[F$V++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$K._view[F$V++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$K._view[F$V++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},F$K._view[F$V++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},F$K._view[F$V++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==F$T){F$V=8;F$K._view[F$V++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},F$K._view[F$V++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},F$K._view[F$V++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},F$K._view[F$V++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},F$K._view[F$V++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},F$K._view[F$V++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},F$K._view[F$V++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else F$K._view[0].title="FPS(WebGL)",F$K._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else F$K._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};F$K._useCanvas?F$K.createUIPre(F$J,F$y):F$K.createUI(F$J,F$y),F$K.enable()}else F$f.window.conch.showFPS&&F$f.window.conch.showFPS(F$J,F$y)},F$K.createUIPre=function(F$J,F$y){var F$T=F$f.pixelRatio;F$K._width=170*F$T,F$K._vx=75*F$T,F$K._height=F$T*(12*F$K._view.length+3*F$T)+4,F$K._fontSize=12*F$T;for(var F$V=0;F$V<F$K._view.length;F$V++)F$K._view[F$V].x=4,F$K._view[F$V].y=F$V*F$K._fontSize+2*F$T;F$K._canvas||((F$K._canvas=new F$LJ("2D")).size(F$K._width,F$K._height),(F$K._ctx=F$K._canvas.getContext("2d")).textBaseline="top",F$K._ctx.font=F$K._fontSize+"px Sans-serif",F$K._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+F$J+"px;top:"+F$y+"px;width:"+F$K._width/F$T+"px;height:"+F$K._height/F$T+"px;"),F$K._first=!0,F$K.loop(),F$K._first=!1,F$f.container.appendChild(F$K._canvas.source)},F$K.createUI=function(F$J,F$y){var F$T=F$K._sp,F$V=F$f.pixelRatio;F$T||(F$T=new F$eJ,(F$K._leftText=new F$sJ).pos(5,5),F$K._leftText.color="#ffffff",F$T.addChild(F$K._leftText),(F$K._txt=new F$sJ).pos(80*F$V,5),F$K._txt.color="#ffffff",F$T.addChild(F$K._txt),F$K._sp=F$T),F$T.pos(F$J,F$y);for(var F$Z="",F$m=0;F$m<F$K._view.length;F$m++){F$Z+=F$K._view[F$m].title+"\n"}F$K._leftText.text=F$Z;var F$R=170*F$V,F$n=F$V*(12*F$K._view.length+3*F$V)+4;F$K._txt.fontSize=F$K._fontSize*F$V,F$K._leftText.fontSize=F$K._fontSize*F$V,F$T.size(F$R,F$n),F$T.graphics.clear(),F$T.graphics.setAlpha(.5),F$T.graphics.drawRect(0,0,F$R,F$n,"#999999"),F$T.graphics.setAlpha(1),F$K.loop()},F$K.enable=function(){F$a.timer.frameLoop(1,F$K,F$K.loop)},F$K.hide=function(){F$K._show=!1,F$a.timer.clear(F$K,F$K.loop),F$K._canvas&&F$f.removeElement(F$K._canvas.source)},F$K.clear=function(){F$K.trianglesFaces=F$K.drawCall=F$K.shaderCall=F$K.spriteCount=F$K.spriteRenderUseCacheCount=F$K.treeNodeCollision=F$K.treeSpriteCollision=F$K.canvasNormal=F$K.canvasBitmap=F$K.canvasReCache=0},F$K.loop=function(){F$K._count++;var F$J=F$f.now();if(!(F$J-F$K._timer<1e3)){var F$y=F$K._count;if(F$K.FPS=Math.round(1e3*F$y/(F$J-F$K._timer)),F$K._show){F$K.trianglesFaces=Math.round(F$K.trianglesFaces/F$y),F$K.spriteCount=F$K._useCanvas?(F$K.drawCall=Math.round(F$K.drawCall/F$y)-2,F$K.shaderCall=Math.round(F$K.shaderCall/F$y),Math.round(F$K.spriteCount/F$y)-1):(F$K.drawCall=Math.round(F$K.drawCall/F$y)-2,F$K.shaderCall=Math.round(F$K.shaderCall/F$y)-4,Math.round(F$K.spriteCount/F$y)-4),F$K.spriteRenderUseCacheCount=Math.round(F$K.spriteRenderUseCacheCount/F$y),F$K.canvasNormal=Math.round(F$K.canvasNormal/F$y),F$K.canvasBitmap=Math.round(F$K.canvasBitmap/F$y),F$K.canvasReCache=Math.ceil(F$K.canvasReCache/F$y),F$K.treeNodeCollision=Math.round(F$K.treeNodeCollision/F$y),F$K.treeSpriteCollision=Math.round(F$K.treeSpriteCollision/F$y);var F$T=0<F$K.FPS?Math.floor(1e3/F$K.FPS).toString():" ";F$K._fpsStr=F$K.FPS+(F$K.renderSlow?" slow":"")+" "+F$T,F$K._spriteStr=F$K.spriteCount+(F$K.spriteRenderUseCacheCount?"/"+F$K.spriteRenderUseCacheCount:""),F$K._canvasStr=F$K.canvasReCache+"/"+F$K.canvasNormal+"/"+F$K.canvasBitmap,F$K.currentMemorySize=F$S.systemResourceManager.memorySize,F$K._useCanvas?F$K.renderInfoPre():F$K.renderInfo(),F$K.clear()}F$K._count=0,F$K._timer=F$J}},F$K.renderInfoPre=function(){if(F$K._canvas){var F$J=F$K._ctx;F$J.clearRect(F$K._first?0:F$K._vx,0,F$K._width,F$K._height);for(var F$y=F$u.WebGL.mainContext,F$T=0;F$T<F$K._view.length;F$T++){var F$V=F$K._view[F$T];F$K._first&&(F$J.fillStyle="white",F$J.fillText(F$V.title,F$V.x,F$V.y,null,null,null)),F$J.fillStyle=F$V.color;var F$Z=-1;if((F$V=F$K._view[F$T]).varying){if(F$y)switch(F$V.varying){case 1:F$Z=F$y.getParameter(F$y[F$V.value]);break;case 2:F$Z=F$y.getExtension(F$V.value)}}else F$Z=F$K[F$V.value];"M"==F$V.units&&(F$Z=Math.floor(F$Z/1048576*100)/100+" M"),"K"==F$V.units&&(F$Z=Math.floor(F$Z/1024*100)/100+" K"),"string"==F$V.units&&(F$Z=F$Z.match(/\d+\.?\d/i)),F$J.fillText(F$Z+"",F$V.x+F$K._vx,F$V.y,null,null,null)}}},F$K.renderInfo=function(){for(var F$J="",F$y=F$u.WebGL.mainContext,F$T=0;F$T<F$K._view.length;F$T++){var F$V=F$K._view[F$T],F$Z=-1;if(F$V.varying){if(F$y)switch(F$V.varying){case 1:F$Z=F$y.getParameter(F$y[F$V.value]);break;case 2:F$Z=F$y.getExtension(F$V.value)}}else F$Z=F$K[F$V.value];"M"==F$V.units&&(F$Z=Math.floor(F$Z/1048576*100)/100+" M"),"K"==F$V.units&&(F$Z=Math.floor(F$Z/1024*100)/100+" K"),"string"==F$V.units&&(F$Z=F$Z.match(/\d+\.?\d/i)),F$J+=F$Z+"\n"}F$K._txt.text=F$J},F$K.FPS=0,F$K.loopCount=0,F$K.shaderCall=0,F$K.drawCall=0,F$K.trianglesFaces=0,F$K.spriteCount=0,F$K.spriteRenderUseCacheCount=0,F$K.treeNodeCollision=0,F$K.treeSpriteCollision=0,F$K.canvasNormal=0,F$K.canvasBitmap=0,F$K.canvasReCache=0,F$K.renderSlow=!1,F$K.currentMemorySize=0,F$K._fpsStr=null,F$K._canvasStr=null,F$K._spriteStr=null,F$K._fpsData=[],F$K._timer=0,F$K._count=0,F$K._view=[],F$K._fontSize=12,F$K._txt=null,F$K._leftText=null,F$K._sp=null,F$K._show=!1,F$K._useCanvas=!1,F$K._canvas=null,F$K._ctx=null,F$K._first=!1,F$K._vx=NaN,F$K._width=0,F$K._height=100,F$K}(),F$p=(function(){function F$J(){this._strsToID={},this._idToStrs=[],this._length=0}F$$(F$J,"laya.utils.StringKey");var F$y=F$J.prototype;F$y.add=function(F$J){var F$y=this._strsToID[F$J];return null!=F$y?F$y:(this._idToStrs[this._length]=F$J,this._strsToID[F$J]=this._length++)},F$y.getID=function(F$J){var F$y=this._strsToID[F$J];return null==F$y?-1:F$y},F$y.getName=function(F$J){var F$y=this._idToStrs[F$J];return null==F$y?void 0:F$y}}(),function(){var F$A;function F$J(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}F$$(F$J,"laya.utils.Timer");var F$y=F$J.prototype;return F$y._init=function(){F$a.timer&&F$a.timer.frameLoop(1,this,this._update)},F$y._now=function(){return Date.now()},F$y._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var F$J=this.currFrame=this.currFrame+this.scale,F$y=this._now();this._delta=(F$y-this._lastTimer)*this.scale;var F$T=this.currTimer=this.currTimer+this._delta;F$a.isDebug&&6e4<Math.abs(F$y-this._lastTimer)&&console.error("系统时间错误！"+(F$y-this._lastTimer)),this._lastTimer=F$y;var F$V=this._handlers;for(F$R=this._count=0,F$n=F$V.length;F$R<F$n;F$R++)if(null!==(F$K=F$V[F$R]).method){var F$Z=F$K.userFrame?F$J:F$T;if(F$Z>=F$K.exeTime)if(F$K.repeat)if(F$K.jumpFrame)for(;F$Z>=F$K.exeTime;)F$K.exeTime+=F$K.delay,F$K.run(!1);else F$K.exeTime+=F$K.delay,F$K.run(!1),F$Z>F$K.exeTime&&(F$K.exeTime+=Math.ceil((F$Z-F$K.exeTime)/F$K.delay)*F$K.delay);else F$K.run(!0)}else this._count++;(30<this._count||F$J%200==0)&&this._clearHandlers();for(var F$m=this._laters,F$R=0,F$n=F$m.length-1;F$R<=F$n;F$R++){var F$K=F$m[F$R];this._isIgnoreRecover(F$K)||(null!==F$K.method&&(delete this._map[F$K.key],F$K.run(!1)),this._recoverHandler(F$K)),F$R===F$n&&(F$n=F$m.length-1)}F$m.length=0}},F$y._clearHandlers=function(){for(var F$J=this._handlers,F$y=0,F$T=F$J.length;F$y<F$T;F$y++){var F$V=F$J[F$y];null!==F$V.method?this._temp.push(F$V):this._isIgnoreRecover(F$V)?this._temp.push(F$V):this._recoverHandler(F$V)}this._handlers=this._temp,this._temp=F$J,this._temp.length=0},F$y._recoverHandler=function(F$J){this._map[F$J.key]==F$J&&delete this._map[F$J.key],F$J.recover()},F$y._create=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){if(!F$T)return F$Z.apply(F$V,F$m),null;if(F$R){var F$K=this._getHandler(F$V,F$Z);if(F$K)return F$K.repeat=F$y,F$K.userFrame=F$J,F$K.delay=F$T,F$K.ignoreRecover=F$n,F$K.caller=F$V,F$K.method=F$Z,F$K.args=F$m,F$K.exeTime=F$T+(F$J?this.currFrame:this.currTimer+this._now()-this._lastTimer),F$K}return(F$K=F$A.create()).repeat=F$y,F$K.userFrame=F$J,F$K.delay=F$T,F$K.ignoreRecover=F$n,F$K.caller=F$V,F$K.method=F$Z,F$K.args=F$m,F$K.exeTime=F$T+(F$J?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(F$K),this._handlers.push(F$K),F$K},F$y._indexHandler=function(F$J){var F$y=F$J.caller,F$T=F$J.method,F$V=F$y?F$y.$_GID||(F$y.$_GID=F$g.getGID()):0,F$Z=F$T.$_TID||(F$T.$_TID=this._mid++);F$J.key=F$V+"_"+F$Z,this._map[F$J.key]=F$J},F$y.once=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$Z&&(F$Z=!0),this._create(!1,!1,F$J,F$y,F$T,F$V,F$Z,!1)},F$y.loop=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){void 0===F$Z&&(F$Z=!0),void 0===F$m&&(F$m=!1),void 0===F$R&&(F$R=!1);var F$n=this._create(!1,!0,F$J,F$y,F$T,F$V,F$Z,F$R);F$n&&(F$n.jumpFrame=F$m)},F$y.frameOnce=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$Z&&(F$Z=!0),this._create(!0,!1,F$J,F$y,F$T,F$V,F$Z,!1)},F$y.frameLoop=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$Z&&(F$Z=!0),void 0===F$m&&(F$m=!1),this._create(!0,!0,F$J,F$y,F$T,F$V,F$Z,F$m)},F$y.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+F$A._freeCount},F$y.clear=function(F$J,F$y){var F$T=this._getHandler(F$J,F$y);return!(!F$T||this._isIgnoreRecover(F$T))&&(delete this._map[F$T.key],F$T.key=null,F$T.clear(),!0)},F$y.clearAll=function(F$J){if(F$J)for(var F$y=0,F$T=this._handlers.length;F$y<F$T;F$y++){var F$V=this._handlers[F$y];F$V.caller===F$J&&(this._isIgnoreRecover(F$V)||(delete this._map[F$V.key],F$V.key=null,F$V.clear()))}},F$y._getHandler=function(F$J,F$y){var F$T=F$J?F$J.$_GID||(F$J.$_GID=F$g.getGID()):0,F$V=F$y.$_TID||(F$y.$_TID=this._mid++);return this._map[F$T+"_"+F$V]},F$y._isIgnoreRecover=function(F$J){if(F$J.ignoreRecover||F$J.caller&&"IgnoreRecover"==F$J.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var F$y="";try{arguments.propertyIsEnumerable.caller}catch(F$J){F$y=F$J.stack}F$a.recordError("报错：核心定时器销毁忽略  "+F$y)}return!0}return!1},F$y.hasHandler=function(F$J,F$y){return this._map[F$J.$_GID+"_"+F$y.$_TID]},F$y.callLater=function(F$J,F$y,F$T){if(null==this._getHandler(F$J,F$y)){var F$V=F$A.create();F$V.caller=F$J,F$V.method=F$y,F$V.args=F$T,this._indexHandler(F$V),this._laters.push(F$V)}},F$y.runCallLater=function(F$J,F$y){var F$T=this._getHandler(F$J,F$y);F$T&&null!=F$T.method&&(this._isIgnoreRecover(F$T)||(delete this._map[F$T.key],F$T.run(!0)))},F$y.runTimer=function(F$J,F$y){this.runCallLater(F$J,F$y)},F$B(0,F$y,"delta",function(){return this._delta}),F$J.__init$=function(){F$A=function(){function F$y(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}F$$(F$y,"");var F$J=F$y.prototype;return F$J.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},F$J.recover=function(){this.clear(),this.args=F$y._freeHandler,F$y._freeHandler=this,F$y._freeCount++},F$J.run=function(F$J){var F$y=this.caller;if(F$y&&F$y.destroyed)return this.clear();var F$T=this.method,F$V=this.args;F$J&&this.clear(),null!=F$T&&(F$V?F$T.apply(F$y,F$V):F$T.call(F$y))},F$y._freeHandler=null,F$y._freeCount=0,F$y.create=function(){var F$J=F$y._freeHandler;return F$J?(F$y._freeHandler=F$J.args,--F$y._freeCount,F$J.args=null,F$J):new F$y},F$y}()},F$J}()),F$j=function(){function F$e(){this.gid=0}F$$(F$e,"laya.utils.Tween");var F$J=F$e.prototype;return F$J.to=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){return void 0===F$m&&(F$m=0),void 0===F$R&&(F$R=!1),this._create(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,!0,!1,!0)},F$J.from=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){return void 0===F$m&&(F$m=0),void 0===F$R&&(F$R=!1),this._create(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,!1,!1,!0)},F$J._create=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){if(!F$J)throw new Error("Tween:target is null");this._target=F$J,this._duration=F$T,this._ease=F$V||F$y.ease||F$e.easeNone,this._complete=F$Z||F$y.complete,this._delay=F$m,this._props=[],this._usedTimer=0,this._startTimer=F$f.now(),this._usedPool=F$K,this._delayParam=null,this.update=F$y.update;var F$$=F$J.$_GID||(F$J.$_GID=F$g.getGID());return F$e.tweenMap[F$$]?(F$R&&F$e.clearTween(F$J),F$e.tweenMap[F$$].push(this)):F$e.tweenMap[F$$]=[this],F$A?F$m<=0?this.firstStart(F$J,F$y,F$n):(this._delayParam=[F$J,F$y,F$n],F$a.scaleTimer.once(F$m,this,this.firstStart,this._delayParam)):this._initProps(F$J,F$y,F$n),this},F$J.firstStart=function(F$J,F$y,F$T){this._delayParam=null,F$J.destroyed?this.clear():(this._initProps(F$J,F$y,F$T),this._beginLoop())},F$J._initProps=function(F$J,F$y,F$T){for(var F$V in F$y)if("number"==typeof F$J[F$V]){var F$Z=F$T?F$J[F$V]:F$y[F$V],F$m=F$T?F$y[F$V]:F$J[F$V];this._props.push([F$V,F$Z,F$m-F$Z]),F$T||(F$J[F$V]=F$Z)}},F$J._beginLoop=function(){F$a.scaleTimer.frameLoop(1,this,this._doEase)},F$J._doEase=function(){this._updateEase(F$f.now())},F$J._updateEase=function(F$J){var F$y=this._target;if(F$y){if(F$y.destroyed)return F$e.clearTween(F$y);var F$T=this._usedTimer=F$J-this._startTimer-this._delay;if(!(F$T<0)){if(F$T>=this._duration)return this.complete();for(var F$V=0<F$T?this._ease(F$T,0,1,this._duration):0,F$Z=this._props,F$m=0,F$R=F$Z.length;F$m<F$R;F$m++){var F$n=F$Z[F$m];F$y[F$n[0]]=F$n[1]+F$V*F$n[2]}this.update&&this.update.run()}}},F$J.complete=function(){if(this._target){F$a.scaleTimer.runTimer(this,this.firstStart);for(var F$J=this._target,F$y=this._props,F$T=this._complete,F$V=0,F$Z=F$y.length;F$V<F$Z;F$V++){var F$m=F$y[F$V];F$J[F$m[0]]=F$m[1]+F$m[2]}this.update&&this.update.run(),this.clear(),F$T&&F$T.run()}},F$J.pause=function(){F$a.scaleTimer.clear(this,this._beginLoop),F$a.scaleTimer.clear(this,this._doEase),F$a.scaleTimer.clear(this,this.firstStart);var F$J;(F$J=F$f.now()-this._startTimer-this._delay)<0&&(this._usedTimer=F$J)},F$J.setStartTime=function(F$J){this._startTimer=F$J},F$J.clear=function(){this._target&&(this._remove(),this._clear())},F$J._clear=function(){this.pause(),F$a.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,F$b.recover("tween",this))},F$J.recover=function(){this._usedPool=!0,this._clear()},F$J._remove=function(){var F$J=F$e.tweenMap[this._target.$_GID];if(F$J)for(var F$y=0,F$T=F$J.length;F$y<F$T;F$y++)if(F$J[F$y]===this){F$J.splice(F$y,1);break}},F$J.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=F$f.now(),this._delayParam)F$a.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var F$J=this._props,F$y=0,F$T=F$J.length;F$y<F$T;F$y++){var F$V=F$J[F$y];this._target[F$V[0]]=F$V[1]}F$a.scaleTimer.once(this._delay,this,this._beginLoop)}},F$J.resume=function(){this._usedTimer>=this._duration||(this._startTimer=F$f.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?F$a.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},F$B(0,F$J,"progress",null,function(F$J){var F$y=F$J*this._duration;this._startTimer=F$f.now()-this._delay-F$y}),F$e.to=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){return void 0===F$m&&(F$m=0),void 0===F$R&&(F$R=!1),void 0===F$n&&(F$n=!0),F$b.getItemByClass("tween",F$e)._create(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,!0,F$n,!0)},F$e.from=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){return void 0===F$m&&(F$m=0),void 0===F$R&&(F$R=!1),void 0===F$n&&(F$n=!0),F$b.getItemByClass("tween",F$e)._create(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,!1,F$n,!0)},F$e.clearAll=function(F$J){if(F$J&&F$J.$_GID){var F$y=F$e.tweenMap[F$J.$_GID];if(F$y){for(var F$T=0,F$V=F$y.length;F$T<F$V;F$T++)F$y[F$T]._clear();F$y.length=0}}},F$e.clear=function(F$J){F$J.clear()},F$e.clearTween=function(F$J){F$e.clearAll(F$J)},F$e.easeNone=function(F$J,F$y,F$T,F$V){return F$T*F$J/F$V+F$y},F$e.tweenMap={},F$e}(),F$g=function(){function F$n(){}return F$$(F$n,"laya.utils.Utils"),F$n.toRadian=function(F$J){return F$J*F$n._pi2},F$n.toAngle=function(F$J){return F$J*F$n._pi},F$n.toHexColor=function(F$J){if(F$J<0||isNaN(F$J))return null;for(var F$y=F$J.toString(16);F$y.length<6;)F$y="0"+F$y;return"#"+F$y},F$n.getGID=function(){return F$n._gid++},F$n.concatArray=function(F$J,F$y){if(!F$y)return F$J;if(!F$J)return F$y;var F$T=0,F$V=F$y.length;for(F$T=0;F$T<F$V;F$T++)F$J.push(F$y[F$T]);return F$J},F$n.clearArray=function(F$J){return F$J&&(F$J.length=0),F$J},F$n.copyArray=function(F$J,F$y){if(F$J||(F$J=[]),!F$y)return F$J;F$J.length=F$y.length;var F$T=0,F$V=F$y.length;for(F$T=0;F$T<F$V;F$T++)F$J[F$T]=F$y[F$T];return F$J},F$n.getGlobalRecByPoints=function(F$J,F$y,F$T,F$V,F$Z){var F$m,F$R;return F$m=new F$q(F$y,F$T),F$m=F$J.localToGlobal(F$m),F$R=new F$q(F$V,F$Z),F$R=F$J.localToGlobal(F$R),F$r._getWrapRec([F$m.x,F$m.y,F$R.x,F$R.y])},F$n.getGlobalPosAndScale=function(F$J){return F$n.getGlobalRecByPoints(F$J,0,0,1,1)},F$n.bind=function(F$J,F$y){return F$J.bind(F$y)},F$n.measureText=function(F$J,F$y){return F$v.measureText(F$J,F$y)},F$n.contextMeasureText=function(F$J){var F$y=F$f.context.measureText(F$J);return F$y||(F$y={width:16,height:16}),F$y},F$n.updateOrder=function(F$J){if(!F$J||F$J.length<2)return!1;for(var F$y,F$T=1,F$V=0,F$Z=F$J.length,F$m=NaN;F$T<F$Z;){for(F$y=F$J[F$V=F$T],F$m=F$J[F$V]._zOrder;-1<--F$V&&F$J[F$V]._zOrder>F$m;)F$J[F$V+1]=F$J[F$V];F$J[F$V+1]=F$y,F$T++}var F$R=F$y.parent.conchModel;if(F$R)if(null!=F$R.updateZOrder)F$R.updateZOrder();else{for(F$T=0;F$T<F$Z;F$T++)F$R.removeChild(F$J[F$T].conchModel);for(F$T=0;F$T<F$Z;F$T++)F$R.addChildAt(F$J[F$T].conchModel,F$T)}return!0},F$n.transPointList=function(F$J,F$y,F$T){var F$V=0,F$Z=F$J.length;for(F$V=0;F$V<F$Z;F$V+=2)F$J[F$V]+=F$y,F$J[F$V+1]+=F$T},F$n.parseInt=function(F$J,F$y){void 0===F$y&&(F$y=0);var F$T=F$f.window.parseInt(F$J,F$y);return isNaN(F$T)?0:F$T},F$n.getFileExtension=function(F$J){F$n._extReg.lastIndex=F$J.lastIndexOf(".");var F$y=F$n._extReg.exec(F$J);return F$y&&1<F$y.length?F$y[1].toLowerCase():null},F$n.getTransformRelativeToWindow=function(F$J,F$y,F$T){var F$V=F$a.stage,F$Z=laya.utils.Utils.getGlobalPosAndScale(F$J),F$m=F$V._canvasTransform.clone(),F$R=F$m.tx,F$n=F$m.ty;F$m.rotate(-Math.PI/180*F$a.stage.canvasDegree),F$m.scale(F$a.stage.clientScaleX,F$a.stage.clientScaleY);var F$K=F$a.stage.canvasDegree%180!=0,F$A=NaN,F$$=NaN;F$K?(F$A=F$T+F$Z.y,F$$=F$y+F$Z.x,F$A*=F$m.d,F$$*=F$m.a,90==F$a.stage.canvasDegree?(F$A=F$R-F$A,F$$+=F$n):(F$A+=F$R,F$$=F$n-F$$)):(F$A=F$y+F$Z.x,F$$=F$T+F$Z.y,F$A*=F$m.a,F$$*=F$m.d,F$A+=F$R,F$$+=F$n);var F$e=NaN,F$M=NaN;return F$M=F$K?(F$e=F$m.d*F$Z.height,F$m.a*F$Z.width):(F$e=F$m.a*F$Z.width,F$m.d*F$Z.height),{x:F$A,y:F$$,scaleX:F$e,scaleY:F$M}},F$n.fitDOMElementInArea=function(F$J,F$y,F$T,F$V,F$Z,F$m){F$J._fitLayaAirInitialized||(F$J._fitLayaAirInitialized=!0,F$J.style.transformOrigin=F$J.style.webKittransformOrigin="left top",F$J.style.position="absolute");var F$R=F$n.getTransformRelativeToWindow(F$y,F$T,F$V);F$J.style.transform=F$J.style.webkitTransform="scale("+F$R.scaleX+","+F$R.scaleY+") rotate("+F$a.stage.canvasDegree+"deg)",F$J.style.width=F$Z+"px",F$J.style.height=F$m+"px",F$J.style.left=F$R.x+"px",F$J.style.top=F$R.y+"px"},F$n.isOkTextureList=function(F$J){if(!F$J)return!1;var F$y,F$T=0,F$V=F$J.length;for(F$T=0;F$T<F$V;F$T++)if(!(F$y=F$J[F$T])||!F$y.source)return!1;return!0},F$n.isOKCmdList=function(F$J){if(!F$J)return!1;var F$y,F$T,F$V=0,F$Z=F$J.length,F$m=F$u._context;for(F$V=0;F$V<F$Z;F$V++)switch((F$y=F$J[F$V]).callee){case F$m._drawTexture:case F$m._fillTexture:case F$m._drawTextureWithTransform:if(!(F$T=F$y[0])||!F$T.source)return!1}return!0},F$n._gid=1,F$n._pi=180/Math.PI,F$n._pi2=Math.PI/180,F$n._extReg=/\.(\w+)\??/g,F$n.parseXMLFromString=function(F$J){var F$y;if(F$J=F$J.replace(/>\s+</g,"><"),-1<(F$y=(new DOMParser).parseFromString(F$J,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(F$y.firstChild.firstChild.textContent);return F$y},F$n}(),F$N=function(){function F$J(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],F$u.isWebGL&&F$I.regCacheByFunction(F$g.bind(this.startDispose,this),F$g.bind(this.getCacheList,this))}F$$(F$J,"laya.utils.VectorGraphManager");var F$y=F$J.prototype;return F$y.getId=function(){return this._id++},F$y.addShape=function(F$J,F$y){this.shapeDic[F$J]=F$y,this.useDic[F$J]||(this.useDic[F$J]=!0)},F$y.addLine=function(F$J,F$y){this.shapeLineDic[F$J]=F$y,this.shapeLineDic[F$J]||(this.shapeLineDic[F$J]=!0)},F$y.getShape=function(F$J){this._checkKey&&null!=this.useDic[F$J]&&(this.useDic[F$J]=!0)},F$y.deleteShape=function(F$J){this.shapeDic[F$J]&&(this.shapeDic[F$J]=null,delete this.shapeDic[F$J]),this.shapeLineDic[F$J]&&(this.shapeLineDic[F$J]=null,delete this.shapeLineDic[F$J]),null!=this.useDic[F$J]&&delete this.useDic[F$J]},F$y.getCacheList=function(){var F$J,F$y=[];for(F$J in this.shapeDic)F$y.push(this.shapeDic[F$J]);for(F$J in this.shapeLineDic)F$y.push(this.shapeLineDic[F$J]);return F$y},F$y.startDispose=function(F$J){var F$y;for(F$y in this.useDic)this.useDic[F$y]=!1;this._checkKey=!0},F$y.endDispose=function(){if(this._checkKey){var F$J;for(F$J in this.useDic)this.useDic[F$J]||this.deleteShape(F$J);this._checkKey=!1}},F$J.getInstance=function(){return F$J.instance=F$J.instance||new F$J},F$J.instance=null,F$J}(),F$w=function(){function F$V(){this._obj=null,this._obj=F$V.supportWeakMap?new F$f.window.WeakMap:{},F$V.supportWeakMap||F$V._maps.push(this)}F$$(F$V,"laya.utils.WeakObject");var F$J=F$V.prototype;return F$J.set=function(F$J,F$y){if(null!=F$J)if(F$V.supportWeakMap){var F$T=F$J;"string"!=typeof F$J&&"number"!=typeof F$J||(F$T=F$V._keys[F$J])||(F$T=F$V._keys[F$J]={k:F$J}),this._obj.set(F$T,F$y)}else"string"==typeof F$J||"number"==typeof F$J?this._obj[F$J]=F$y:(F$J.$_GID||(F$J.$_GID=F$g.getGID()),this._obj[F$J.$_GID]=F$y)},F$J.get=function(F$J){if(null==F$J)return null;if(F$V.supportWeakMap){var F$y="string"==typeof F$J||"number"==typeof F$J?F$V._keys[F$J]:F$J;return F$y?this._obj.get(F$y):null}return"string"==typeof F$J||"number"==typeof F$J?this._obj[F$J]:this._obj[F$J.$_GID]},F$J.del=function(F$J){if(null!=F$J)if(F$V.supportWeakMap){var F$y="string"==typeof F$J||"number"==typeof F$J?F$V._keys[F$J]:F$J;if(!F$y)return;this._obj.delete(F$y)}else"string"==typeof F$J||"number"==typeof F$J?delete this._obj[F$J]:delete this._obj[this._obj.$_GID]},F$J.has=function(F$J){if(null==F$J)return!1;if(F$V.supportWeakMap){var F$y="string"==typeof F$J||"number"==typeof F$J?F$V._keys[F$J]:F$J;return this._obj.has(F$y)}return"string"==typeof F$J||"number"==typeof F$J?null!=this._obj[F$J]:null!=this._obj[this._obj.$_GID]},F$V.__init__=function(){(F$V.supportWeakMap=null!=F$f.window.WeakMap)||F$a.timer.loop(F$V.delInterval,null,F$V.clearCache)},F$V.clearCache=function(){for(var F$J=0,F$y=F$V._maps.length;F$J<F$y;F$J++){F$V._maps[F$J]._obj={}}},F$V.supportWeakMap=!1,F$V.delInterval=3e5,F$V._keys={},F$V._maps=[],F$K(F$V,["I",function(){return this.I=new F$V}]),F$V}(),F$z=function(){function F$J(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}F$$(F$J,"laya.utils.WordText");var F$y=F$J.prototype;return F$y.setText=function(F$J){this.changed=!0,this._text=F$J},F$y.toString=function(){return this._text},F$y.charCodeAt=function(F$J){return this._text?this._text.charCodeAt(F$J):NaN},F$y.charAt=function(F$J){return this._text?this._text.charAt(F$J):null},F$B(0,F$y,"length",function(){return this._text?this._text.length:0}),F$J}(),F$JJ=function(F$J){function F$R(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,F$R.__super.call(this),this._childs=F$R.ARRAY_EMPTY,this._$P=F$R.PROP_EMPTY,this.timer=F$a.scaleTimer,this.conchModel=F$u.isConchNode?this.createConchModel():null}F$$(F$R,"laya.display.Node",F$A);var F$y=F$R.prototype;return F$y._setBit=function(F$J,F$y){1==F$J&&(this._getBit(F$J)!=F$y&&this._updateDisplayedInstage());F$y?this._bits|=F$J:this._bits&=~F$J},F$y._getBit=function(F$J){return 0!=(this._bits&F$J)},F$y._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},F$y._setUpNoticeType=function(F$J){var F$y=this;for(F$y._setBit(F$J,!0),F$y=F$y.parent;F$y;){if(F$y._getBit(F$J))return;F$y._setBit(F$J,!0),F$y=F$y.parent}},F$y.on=function(F$J,F$y,F$T,F$V){return"display"!==F$J&&"undisplay"!==F$J||this._getBit(1)||this._setUpNoticeType(1),this._createListener(F$J,F$y,F$T,F$V,!1)},F$y.once=function(F$J,F$y,F$T,F$V){return"display"!==F$J&&"undisplay"!==F$J||this._getBit(1)||this._setUpNoticeType(1),this._createListener(F$J,F$y,F$T,F$V,!0)},F$y.createConchModel=function(){return null},F$y.destroy=function(F$J){void 0===F$J&&(F$J=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(F$J?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},F$y.destroyChildren=function(){if(this._childs)for(var F$J=this._childs.length-1;-1<F$J;F$J--)this._childs[F$J].destroy(!0)},F$y.addChild=function(F$J){if(!F$J||this.destroyed||F$J===this)return F$J;if(F$J.zOrder&&this._set$P("hasZorder",!0),F$J._parent===this){var F$y=this.getChildIndex(F$J);F$y!==this._childs.length-1&&(this._childs.splice(F$y,1),this._childs.push(F$J),this.conchModel&&(this.conchModel.removeChild(F$J.conchModel),this.conchModel.addChildAt(F$J.conchModel,this._childs.length-1)),this._childChanged())}else F$J.parent&&F$J.parent.removeChild(F$J),this._childs===F$R.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$J),this.conchModel&&this.conchModel.addChildAt(F$J.conchModel,this._childs.length-1),(F$J.parent=this)._childChanged();return F$J},F$y.addChildren=function(F$J){for(var F$y=arguments,F$T=0,F$V=F$y.length;F$T<F$V;)this.addChild(F$y[F$T++])},F$y.addChildAt=function(F$J,F$y){if(!F$J||this.destroyed||F$J===this)return F$J;if(F$J.zOrder&&this._set$P("hasZorder",!0),0<=F$y&&F$y<=this._childs.length){if(F$J._parent===this){var F$T=this.getChildIndex(F$J);this._childs.splice(F$T,1),this._childs.splice(F$y,0,F$J),this.conchModel&&(this.conchModel.removeChild(F$J.conchModel),this.conchModel.addChildAt(F$J.conchModel,F$y)),this._childChanged()}else F$J.parent&&F$J.parent.removeChild(F$J),this._childs===F$R.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$y,0,F$J),this.conchModel&&this.conchModel.addChildAt(F$J.conchModel,F$y),F$J.parent=this;return F$J}throw new Error("appendChildAt:The index is out of bounds")},F$y.getChildIndex=function(F$J){return this._childs.indexOf(F$J)},F$y.getChildByName=function(F$J){var F$y=this._childs;if(F$y)for(var F$T=0,F$V=F$y.length;F$T<F$V;F$T++){var F$Z=F$y[F$T];if(F$Z.name===F$J)return F$Z}return null},F$y._get$P=function(F$J){return this._$P[F$J]},F$y._set$P=function(F$J,F$y){return this.destroyed||(this._$P===F$R.PROP_EMPTY&&(this._$P={}),this._$P[F$J]=F$y),F$y},F$y.getChildAt=function(F$J){return this._childs[F$J]},F$y.setChildIndex=function(F$J,F$y){var F$T=this._childs;if(F$y<0||F$y>=F$T.length)throw new Error("setChildIndex:The index is out of bounds.");var F$V=this.getChildIndex(F$J);if(F$V<0)throw new Error("setChildIndex:node is must child of this object.");return F$T.splice(F$V,1),F$T.splice(F$y,0,F$J),this.conchModel&&(this.conchModel.removeChild(F$J.conchModel),this.conchModel.addChildAt(F$J.conchModel,F$y)),this._childChanged(),F$J},F$y._childChanged=function(F$J){},F$y.removeChild=function(F$J){if(!this._childs)return F$J;var F$y=this._childs.indexOf(F$J);return this.removeChildAt(F$y)},F$y.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},F$y.removeChildByName=function(F$J){var F$y=this.getChildByName(F$J);return F$y&&this.removeChild(F$y),F$y},F$y.removeChildAt=function(F$J){var F$y=this.getChildAt(F$J);if(F$y){for(var F$T=this._childs.length-1,F$V=F$J;F$V<F$T;++F$V)this._childs[F$V]=this._childs[F$V+1];this._childs.length=F$T,this.conchModel&&this.conchModel.removeChild(F$y.conchModel),F$y.parent=null}return F$y},F$y.removeChildren=function(F$J,F$y){if(void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=2147483647),this._childs&&0<this._childs.length){var F$T=this._childs;if(0===F$J&&F$m<=F$y){var F$V=F$T;this._childs=F$R.ARRAY_EMPTY}else F$V=F$T.splice(F$J,F$y-F$J);for(var F$Z=0,F$m=F$V.length;F$Z<F$m;F$Z++)F$V[F$Z].parent=null,this.conchModel&&this.conchModel.removeChild(F$V[F$Z].conchModel)}return this},F$y.replaceChild=function(F$J,F$y){var F$T=this._childs.indexOf(F$y);return-1<F$T?(this._childs.splice(F$T,1,F$J),this.conchModel&&(this.conchModel.removeChild(F$y.conchModel),this.conchModel.addChildAt(F$J.conchModel,F$T)),F$y.parent=null,F$J.parent=this,F$J):null},F$y._updateDisplayedInstage=function(){var F$J;F$J=this;var F$y=F$a.stage;for(this._displayedInStage=!1;F$J;){if(F$J._getBit(1)){this._displayedInStage=F$J._displayedInStage;break}if(F$J==F$y||F$J._displayedInStage){this._displayedInStage=!0;break}F$J=F$J.parent}},F$y._setDisplay=function(F$J){this._displayedInStage!==F$J&&((this._displayedInStage=F$J)?this.event("display"):this.event("undisplay"))},F$y._displayChild=function(F$J,F$y){var F$T=F$J._childs;if(F$T)for(var F$V=0;F$V<F$T.length;F$V++){var F$Z=F$T[F$V];F$Z&&F$Z._getBit(1)&&(0<F$Z._childs.length?this._displayChild(F$Z,F$y):F$Z._setDisplay(F$y))}F$J._setDisplay(F$y)},F$y.contains=function(F$J){if(F$J===this)return!0;for(;F$J;){if(F$J.parent===this)return!0;F$J=F$J.parent}return!1},F$y.timerLoop=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$Z&&(F$Z=!0),void 0===F$m&&(F$m=!1),this.timer.loop(F$J,F$y,F$T,F$V,F$Z,F$m)},F$y.timerOnce=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$Z&&(F$Z=!0),this.timer._create(!1,!1,F$J,F$y,F$T,F$V,F$Z)},F$y.frameLoop=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$Z&&(F$Z=!0),this.timer._create(!0,!0,F$J,F$y,F$T,F$V,F$Z)},F$y.frameOnce=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$Z&&(F$Z=!0),this.timer._create(!0,!1,F$J,F$y,F$T,F$V,F$Z)},F$y.clearTimer=function(F$J,F$y){this.timer.clear(F$J,F$y)},F$B(0,F$y,"numChildren",function(){return this._childs.length}),F$B(0,F$y,"destroyed",function(){return this._destroyed}),F$B(0,F$y,"parent",function(){return this._parent},function(F$J){this._parent!==F$J&&(F$J?(this._parent=F$J,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),F$J.displayedInStage&&this._displayChild(this,!0)),F$J._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=F$J))}),F$B(0,F$y,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),F$R.ARRAY_EMPTY=[],F$R.PROP_EMPTY={},F$R.NOTICE_DISPLAY=1,F$R.MOUSEENABLE=2,F$R}(),F$yJ=function(F$J){function F$M(F$J){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,F$M.__super.call(this),this._padding=F$M._PADDING,this._spacing=F$M._SPACING,this._aligns=F$M._ALIGNS,this._font=F$G.EMPTY,this._ower=F$J}F$$(F$M,"laya.display.css.CSSStyle",F$J);var F$y=F$M.prototype;return F$y.destroy=function(){this._ower=null,this._font=null,this._rect=null},F$y.inherit=function(F$J){this._font=F$J._font,this._spacing=F$J._spacing===F$M._SPACING?F$M._SPACING:F$J._spacing.slice(),this.lineHeight=F$J.lineHeight},F$y._widthAuto=function(){return 0!=(262144&this._type)},F$y.widthed=function(F$J){return 0!=(8&this._type)},F$y._calculation=function(F$J,F$y){if(F$y.indexOf("%")<0)return!1;var F$V=this._ower,F$Z=F$V.parent,F$m=this._rect;function F$R(F$J,F$y,F$T){return F$J*F$T[0]+F$y*F$T[1]+F$T[2]}function F$T(F$J){var F$y=F$Z.width,F$T=F$V.width;F$m.width&&(F$V.width=F$R(F$y,F$T,F$m.width)),F$m.height&&(F$V.height=F$R(F$y,F$T,F$m.height)),F$m.left&&(F$V.x=F$R(F$y,F$T,F$m.left)),F$m.top&&(F$V.y=F$R(F$y,F$T,F$m.top))}null===F$m&&(F$Z._getCSSStyle()._type|=524288,F$Z.on("resize",this,F$T),this._rect=F$m={input:{}});var F$n=F$y.split(" ");return F$n[0]=parseFloat(F$n[0])/100,1==F$n.length?F$n[1]=F$n[2]=0:(F$n[1]=parseFloat(F$n[1])/100,F$n[2]=parseFloat(F$n[2])),F$m[F$J]=F$n,F$m.input[F$J]=F$y,F$T(),!0},F$y.heighted=function(F$J){return 0!=(8192&this._type)},F$y.size=function(F$J,F$y){var F$T=this._ower,F$V=!1;-1!==F$J&&F$J!=this._ower.width&&(this._type|=8,this._ower.width=F$J,F$V=!0),-1!==F$y&&F$y!=this._ower.height&&(this._type|=8192,this._ower.height=F$y,F$V=!0),F$V&&(F$T._layoutLater(),524288&this._type&&F$T.event("resize",this))},F$y._getAlign=function(){return this._aligns[0]},F$y._getValign=function(){return this._aligns[1]},F$y._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},F$y._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new F$G(this._font))},F$y.render=function(F$J,F$y,F$T,F$V){var F$Z=F$J.width,F$m=F$J.height;F$T-=F$J.pivotX,F$V-=F$J.pivotY,this._bgground&&null!=this._bgground.color&&F$y.ctx.fillRect(F$T,F$V,F$Z,F$m,this._bgground.color),this._border&&this._border.color&&F$y.drawRect(F$T,F$V,F$Z,F$m,this._border.color.strColor,this._border.size)},F$y.getCSSStyle=function(){return this},F$y.cssText=function(F$J){this.attrs(F$M.parseOneCSS(F$J,";"))},F$y.attrs=function(F$J){if(F$J)for(var F$y=0,F$T=F$J.length;F$y<F$T;F$y++){var F$V=F$J[F$y];this[F$V[0]]=F$V[1]}},F$y.setTransform=function(F$J){"none"===F$J?this._tf=F$n._TF_EMPTY:this.attrs(F$M.parseOneCSS(F$J,","))},F$y.translate=function(F$J,F$y){this._tf===F$n._TF_EMPTY&&(this._tf=new F$Z),this._tf.translateX=F$J,this._tf.translateY=F$y},F$y.scale=function(F$J,F$y){this._tf===F$n._TF_EMPTY&&(this._tf=new F$Z),this._tf.scaleX=F$J,this._tf.scaleY=F$y},F$y._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},F$B(0,F$y,"block",F$J.prototype._$get_block,function(F$J){F$J?this._type|=1:this._type&=-2}),F$B(0,F$y,"valign",function(){return F$M._valigndef[this._aligns[1]]},function(F$J){this._aligns===F$M._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=F$M._valigndef[F$J]}),F$B(0,F$y,"height",null,function(F$J){if(this._type|=8192,"string"==typeof F$J){if(this._calculation("height",F$J))return;F$J=parseInt(F$J)}this.size(-1,F$J)}),F$B(0,F$y,"width",null,function(F$J){if(this._type|=8,"string"==typeof F$J){var F$y=F$J.indexOf("auto");if(0<=F$y&&(this._type|=262144,F$J=F$J.substr(0,F$y)),this._calculation("width",F$J))return;F$J=parseInt(F$J)}this.size(F$J,-1)}),F$B(0,F$y,"fontWeight",function(){return this._font.weight},function(F$J){this._createFont().weight=F$J}),F$B(0,F$y,"left",null,function(F$J){var F$y=this._ower;if("string"==typeof F$J){if("center"===F$J?F$J="50% -50% 0":"right"===F$J&&(F$J="100% -100% 0"),this._calculation("left",F$J))return;F$J=parseInt(F$J)}F$y.x=F$J}),F$B(0,F$y,"_translate",null,function(F$J){this.translate(F$J[0],F$J[1])}),F$B(0,F$y,"absolute",function(){return 0!=(4&this._type)}),F$B(0,F$y,"top",null,function(F$J){var F$y=this._ower;if("string"==typeof F$J){if("middle"===F$J?F$J="50% -50% 0":"bottom"===F$J&&(F$J="100% -100% 0"),this._calculation("top",F$J))return;F$J=parseInt(F$J)}F$y.y=F$J}),F$B(0,F$y,"align",function(){return F$M._aligndef[this._aligns[0]]},function(F$J){this._aligns===F$M._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=F$M._aligndef[F$J]}),F$B(0,F$y,"bold",function(){return this._font.bold},function(F$J){this._createFont().bold=F$J}),F$B(0,F$y,"padding",function(){return this._padding},function(F$J){this._padding=F$J}),F$B(0,F$y,"leading",function(){return this._spacing[1]},function(F$J){"string"==typeof F$J&&(F$J=parseInt(F$J+"")),this._spacing===F$M._SPACING&&(this._spacing=[0,0]),this._spacing[1]=F$J}),F$B(0,F$y,"lineElement",function(){return 0!=(65536&this._type)},function(F$J){F$J?this._type|=65536:this._type&=-65537}),F$B(0,F$y,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(F$J){this.lineElement=!1,"right"===F$J?this._type|=32768:this._type&=-32769}),F$B(0,F$y,"textDecoration",function(){return this._font.decoration},function(F$J){this._createFont().decoration=F$J}),F$B(0,F$y,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(F$J){"nowrap"===F$J&&(this._type|=131072),"none"===F$J&&(this._type&=-131073)}),F$B(0,F$y,"background",null,function(F$J){F$J?(this._bgground||(this._bgground={}),this._bgground.color=F$J,this._ower.conchModel&&this._ower.conchModel.bgColor(F$J),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),F$B(0,F$y,"wordWrap",function(){return 0==(131072&this._type)},function(F$J){F$J?this._type&=-131073:this._type|=131072}),F$B(0,F$y,"color",function(){return this._font.color},function(F$J){this._createFont().color=F$J}),F$B(0,F$y,"password",function(){return this._font.password},function(F$J){this._createFont().password=F$J}),F$B(0,F$y,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(F$J){"none"===F$J?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=F$J),this._ower.conchModel&&this._ower.conchModel.bgColor(F$J),this._ower._renderType|=256}),F$B(0,F$y,"font",function(){return this._font.toString()},function(F$J){this._createFont().set(F$J)}),F$B(0,F$y,"weight",null,function(F$J){this._createFont().weight=F$J}),F$B(0,F$y,"letterSpacing",function(){return this._spacing[0]},function(F$J){"string"==typeof F$J&&(F$J=parseInt(F$J+"")),this._spacing===F$M._SPACING&&(this._spacing=[0,0]),this._spacing[0]=F$J}),F$B(0,F$y,"fontSize",function(){return this._font.size},function(F$J){this._createFont().size=F$J}),F$B(0,F$y,"italic",function(){return this._font.italic},function(F$J){this._createFont().italic=F$J}),F$B(0,F$y,"fontFamily",function(){return this._font.family},function(F$J){this._createFont().family=F$J}),F$B(0,F$y,"stroke",function(){return this._font.stroke[0]},function(F$J){this._createFont().stroke===F$G._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=F$J}),F$B(0,F$y,"strokeColor",function(){return this._font.stroke[1]},function(F$J){this._createFont().stroke===F$G._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=F$J}),F$B(0,F$y,"border",function(){return this._border?this._border.value:""},function(F$J){if("none"!=F$J){this._border||(this._border={});var F$y=(this._border.value=F$J).split(" ");if(this._border.color=F$U.create(F$y[F$y.length-1]),1==F$y.length)return this._border.size=1,void(this._border.type="solid");var F$T=0;0<F$y[0].indexOf("px")?(this._border.size=parseInt(F$y[0]),F$T++):this._border.size=1,this._border.type=F$y[F$T],this._ower._renderType|=256}else this._border=null}),F$B(0,F$y,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(F$J){F$J?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==F$J?null:F$U.create(F$J),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),F$B(0,F$y,"position",function(){return 4&this._type?"absolute":""},function(F$J){"absolute"==F$J?this._type|=4:this._type&=-5}),F$B(0,F$y,"display",null,function(F$J){switch(F$J){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),F$B(0,F$y,"paddingLeft",function(){return this.padding[3]}),F$B(0,F$y,"paddingTop",function(){return this.padding[0]}),F$B(0,F$y,"_scale",null,function(F$J){this._ower.scale(F$J[0],F$J[1])}),F$B(0,F$y,"_rotate",null,function(F$J){this._ower.rotation=F$J}),F$M.parseOneCSS=function(F$J,F$y){for(var F$T,F$V=[],F$Z=F$J.split(F$y),F$m=0,F$R=F$Z.length;F$m<F$R;F$m++){var F$n=F$Z[F$m],F$K=F$n.indexOf(":"),F$A=F$n.substr(0,F$K).replace(/^\s+|\s+$/g,"");if(0!=F$A.length){var F$$=F$n.substr(F$K+1).replace(/^\s+|\s+$/g,""),F$e=[F$A,F$$];switch(F$A){case"italic":case"bold":F$e[1]="true"==F$$;break;case"line-height":F$e[0]="lineHeight",F$e[1]=parseInt(F$$);break;case"font-size":F$e[0]="fontSize",F$e[1]=parseInt(F$$);break;case"padding":1<(F$T=F$$.split(" ")).length||(F$T[1]=F$T[2]=F$T[3]=F$T[0]),F$e[1]=[parseInt(F$T[0]),parseInt(F$T[1]),parseInt(F$T[2]),parseInt(F$T[3])];break;case"rotate":F$e[0]="_rotate",F$e[1]=parseFloat(F$$);break;case"scale":F$T=F$$.split(" "),F$e[0]="_scale",F$e[1]=[parseFloat(F$T[0]),parseFloat(F$T[1])];break;case"translate":F$T=F$$.split(" "),F$e[0]="_translate",F$e[1]=[parseInt(F$T[0]),parseInt(F$T[1])];break;default:(F$e[0]=F$M._CSSTOVALUE[F$A])||(F$e[0]=F$A)}F$V.push(F$e)}}return F$V},F$M.parseCSS=function(F$J,F$y){for(var F$T;null!=(F$T=F$M._parseCSSRegExp.exec(F$J));)F$M.styleSheets[F$T[1]]=F$M.parseOneCSS(F$T[2],";")},F$M.EMPTY=new F$M(null),F$M._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},F$M._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),F$M._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},F$M._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},F$M.styleSheets={},F$M.ALIGN_CENTER=1,F$M.ALIGN_RIGHT=2,F$M.VALIGN_MIDDLE=1,F$M.VALIGN_BOTTOM=2,F$M._CSS_BLOCK=1,F$M._DISPLAY_NONE=2,F$M._ABSOLUTE=4,F$M._WIDTH_SET=8,F$M._PADDING=[0,0,0,0],F$M._RECT=[-1,-1,-1,-1],F$M._SPACING=[0,0],F$M._ALIGNS=[0,0,0],F$M.ADDLAYOUTED=512,F$M._NEWFONT=4096,F$M._HEIGHT_SET=8192,F$M._BACKGROUND_SET=16384,F$M._FLOAT_RIGHT=32768,F$M._LINE_ELEMENT=65536,F$M._NOWARP=131072,F$M._WIDTHAUTO=262144,F$M._LISTERRESZIE=524288,F$M}(F$n),F$TJ=function(F$J){function F$R(){this.url=null,this.audio=null,this.loaded=!1,F$R.__super.call(this)}F$$(F$R,"laya.media.h5audio.AudioSound",F$A);var F$y=F$R.prototype;return F$y.dispose=function(){var F$J=F$R._audioCache[this.url];F$J&&(F$J.src="",delete F$R._audioCache[this.url])},F$y.load=function(F$J){var F$y;if(F$J=F$c.formatURL(F$J),(this.url=F$J)==F$t._tMusic?(F$R._initMusicAudio(),(F$y=F$R._musicAudio).src!=F$J&&(F$R._audioCache[F$y.src]=null,F$y=null)):F$y=F$R._audioCache[F$J],F$y&&2<=F$y.readyState)this.event("complete");else{F$y||(F$y=F$J==F$t._tMusic?(F$R._initMusicAudio(),F$R._musicAudio):F$f.createElement("audio"),(F$R._audioCache[F$J]=F$y).src=F$J),F$y.addEventListener("canplaythrough",F$V),F$y.addEventListener("error",F$Z);var F$T=this;(this.audio=F$y).load?F$y.load():F$Z()}function F$V(){F$m(),F$T.loaded=!0,F$T.event("complete")}function F$Z(){F$y.load=null,F$m(),F$T.event("error")}function F$m(){F$y.removeEventListener("canplaythrough",F$V),F$y.removeEventListener("error",F$Z)}},F$y.play=function(F$J,F$y,F$T){if(void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),!this.url)return null;var F$V,F$Z;if(!(F$V=this.url==F$t._tMusic?F$R._musicAudio:F$R._audioCache[this.url]))return null;F$Z=F$b.getItem("audio:"+this.url),F$u.isConchApp?F$Z||((F$Z=F$f.createElement("audio")).src=this.url):this.url==F$t._tMusic?(F$R._initMusicAudio(),(F$Z=F$R._musicAudio).src=this.url):F$Z=F$Z||F$V.cloneNode(!0);var F$m=new F$MJ(F$Z);return F$m.url=this.url,F$m.loops=F$y,F$m.startTime=F$J,F$m.startHandler=F$T,F$m.play(!1),F$t.addChannel(F$m),F$m},F$B(0,F$y,"duration",function(){var F$J;return(F$J=F$R._audioCache[this.url])?F$J.duration:0}),F$R._initMusicAudio=function(){F$R._musicAudio||(F$R._musicAudio||(F$R._musicAudio=F$f.createElement("audio")),F$u.isConchApp||F$f.document.addEventListener("mousedown",F$R._makeMusicOK))},F$R._makeMusicOK=function(){F$f.document.removeEventListener("mousedown",F$R._makeMusicOK),F$R._musicAudio.src?F$R._musicAudio.play():(F$R._musicAudio.src="",F$R._musicAudio.load())},F$R._audioCache={},F$R._musicAudio=null,F$R}(),F$VJ=function(F$J){function F$y(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,F$y.__super.call(this)}F$$(F$y,"laya.media.SoundChannel",F$A);var F$T=F$y.prototype;return F$T.play=function(){},F$T.stop=function(){},F$T.pause=function(){},F$T.resume=function(){},F$T.__runComplete=function(F$J){F$J&&F$J.run()},F$B(0,F$T,"volume",function(){return 1},function(F$J){}),F$B(0,F$T,"position",function(){return 0}),F$B(0,F$T,"duration",function(){return 0}),F$y}(),F$ZJ=function(F$J){function F$y(){F$y.__super.call(this)}F$$(F$y,"laya.media.Sound",F$A);var F$T=F$y.prototype;return F$T.load=function(F$J){},F$T.play=function(F$J,F$y,F$T){return void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),null},F$T.dispose=function(){},F$B(0,F$T,"duration",function(){return 0}),F$y}(),F$mJ=function(F$J){function F$Z(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,F$Z.__super.call(this)}F$$(F$Z,"laya.media.webaudio.WebAudioSound",F$A);var F$y=F$Z.prototype;return F$y.load=function(F$J){this.url=F$J,this.audioBuffer=F$Z._dataCache[F$J],this.audioBuffer?this._loaded(this.audioBuffer):(F$Z.e.on("loaded:"+F$J,this,this._loaded),F$Z.e.on("err:"+F$J,this,this._err),F$Z.__loadingSound[F$J]||(F$Z.__loadingSound[F$J]=!0,F$a.loader.load(F$J,F$O.create(this,this.onloaded),null,F$nJ.BUFFER,4,!1,null,!0)))},F$y.onloaded=function(F$J){F$J||this._err(),this._disposed?this._removeLoadEvents():(this.data=F$J,F$Z.buffs.push({buffer:this.data,url:this.url}),F$Z.decode())},F$y._err=function(){if(this._removeLoadEvents(),F$Z.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var F$J,F$y,F$T,F$V=0;for(F$J=(F$y=this.__toPlays).length,F$V=0;F$V<F$J;F$V++)(F$T=F$y[F$V])[3]&&!F$T[3].isStopped&&F$T[3].event("error");this.__toPlays.length=0}},F$y._loaded=function(F$J){this._removeLoadEvents(),this._disposed||(this.audioBuffer=F$J,this.loaded=!0,this.event("complete"))},F$y._removeLoadEvents=function(){F$Z.e.off("loaded:"+this.url,this,this._loaded),F$Z.e.off("err:"+this.url,this,this._err)},F$y.__playAfterLoaded=function(){if(this.__toPlays){var F$J,F$y,F$T,F$V=0;for(F$J=(F$y=this.__toPlays).length,F$V=0;F$V<F$J;F$V++)(F$T=F$y[F$V])[3]&&!F$T[3].isStopped&&this.play(F$T[0],F$T[1],F$T[2],F$T[3]);this.__toPlays.length=0}},F$y.play=function(F$J,F$y,F$T,F$V){return void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),F$V=F$V||new F$GJ,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([F$J,F$y,F$T,F$V]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),F$V.url=this.url,F$V.loops=F$y,F$V.audioBuffer=this.audioBuffer,F$V.startTime=F$J,F$V.startHandler=F$T,F$V.play(!1),F$t.addChannel(F$V),F$V},F$y.dispose=function(){this._disposed=!0,delete F$Z._dataCache[this.url],delete F$Z.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},F$B(0,F$y,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),F$Z.decode=function(){if(!(F$Z.buffs.length<=0||F$Z.isDecoding))if(F$Z.isDecoding=!0,(F$Z.tInfo=F$Z.buffs.shift())&&F$Z.tInfo.buffer&&F$Z.tInfo.buffer.byteLength)try{F$Z.ctx.decodeAudioData(F$Z.tInfo.buffer,F$Z._done,F$Z._fail)}catch(F$J){console.error("decodeAudioData error  byteLength:"+F$Z.tInfo.buffer.byteLength+"  url:"+F$Z.tInfo.url)}else F$Z._fail()},F$Z._done=function(F$J){F$Z.e.event("loaded:"+F$Z.tInfo.url,F$J),F$Z._dataCache[F$Z.tInfo.url]=F$J,F$Z.isDecoding=!1,F$Z.decode()},F$Z._fail=function(){F$Z.e.event("err:"+F$Z.tInfo.url,null),F$Z.isDecoding=!1,F$Z.decode()},F$Z._playEmptySound=function(){if(null!=F$Z.ctx){if(F$Z._emptySource&&(F$Z._emptySource.stop(),F$Z._emptySource.disconnect(0),!F$GJ._tryCleanFailed))try{F$Z._emptySource.buffer=null}catch(F$J){F$GJ._tryCleanFailed=!0}var F$J=F$Z.ctx.createBufferSource();F$J.buffer=F$Z._miniBuffer,F$J.connect(F$Z.ctx.destination),F$J.start(0,0,0),F$Z._emptySource=F$J}},F$Z._unlock=function(){F$Z._unlocked||(F$Z._playEmptySound(),"running"==F$Z.ctx.state?(F$f.document.removeEventListener("mousedown",F$Z._unlock,!0),F$f.document.removeEventListener("touchend",F$Z._unlock,!0),F$f.document.removeEventListener("touchstart",F$Z._unlock,!0),F$Z._unlocked=!0):"suspended"==F$Z.ctx.state&&F$t._recoverWebAudio())},F$Z.initWebAudio=function(){"running"!=F$Z.ctx.state&&(F$Z._unlock(),F$f.document.addEventListener("mousedown",F$Z._unlock,!0),F$f.document.addEventListener("touchend",F$Z._unlock,!0),F$f.document.addEventListener("touchstart",F$Z._unlock,!0))},F$Z._emptySource=null,F$Z._dataCache={},F$Z.buffs=[],F$Z.isDecoding=!1,F$Z._unlocked=!1,F$Z.tInfo=null,F$Z.__loadingSound={},F$K(F$Z,["window",function(){return this.window=F$f.window},"webAudioEnabled",function(){return this.webAudioEnabled=F$Z.window.AudioContext||F$Z.window.webkitAudioContext||F$Z.window.mozAudioContext},"ctx",function(){return this.ctx=F$Z.webAudioEnabled?new(F$Z.window.AudioContext||F$Z.window.webkitAudioContext||F$Z.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=F$Z.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new F$A}]),F$Z}(),F$RJ=function(F$J){function F$y(){this._responseType=null,this._data=null,F$y.__super.call(this),this._http=new F$f.window.XMLHttpRequest}F$$(F$y,"laya.net.HttpRequest",F$A);var F$T=F$y.prototype;return F$T.send=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$T&&(F$T="get"),void 0===F$V&&(F$V="text"),this._responseType=F$V,this._data=null;var F$m=this,F$R=this._http;if(F$R.open(F$T,F$J,!0),F$Z)for(var F$n=0;F$n<F$Z.length;F$n++)F$R.setRequestHeader(F$Z[F$n++],F$Z[F$n]);else F$u.isConchApp||(F$y&&"string"!=typeof F$y?F$R.setRequestHeader("Content-Type","application/json"):F$R.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));F$R.responseType="arraybuffer"!==F$V?"text":"arraybuffer",F$R.onerror=function(F$J){F$m._onError(F$J)},F$R.onabort=function(F$J){F$m._onAbort(F$J)},F$R.onprogress=function(F$J){F$m._onProgress(F$J)},F$R.onload=function(F$J){F$m._onLoad(F$J)},F$R.send(F$y)},F$T._onProgress=function(F$J){F$J&&F$J.lengthComputable&&this.event("progress",F$J.loaded/F$J.total)},F$T._onAbort=function(F$J){this.error("Request was aborted by user")},F$T._onError=function(F$J){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},F$T._onLoad=function(F$J){var F$y=this._http,F$T=void 0!==F$y.status?F$y.status:200;200===F$T||204===F$T||0===F$T?this.complete():this.error("["+F$y.status+"]"+F$y.statusText+":"+F$y.responseURL)},F$T.error=function(F$J){this.clear(),this.event("error",F$J)},F$T.complete=function(){this.clear();var F$y=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=F$g.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(F$J){F$y=!1,this.error(F$J.message)}F$y&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},F$T.clear=function(){var F$J=this._http;F$J.onerror=F$J.onabort=F$J.onprogress=F$J.onload=null},F$B(0,F$T,"url",function(){return this._http.responseURL}),F$B(0,F$T,"http",function(){return this._http}),F$B(0,F$T,"data",function(){return this._data}),F$y}(),F$nJ=function(F$J){function F$D(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,F$D.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}F$$(F$D,"laya.net.Loader",F$A);var F$y=F$D.prototype;return F$y.load=function(F$J,F$y,F$T,F$V,F$Z){if(F$J&&""!=F$J||console.error("Loader 加载的url不合法 "+F$J),void 0===F$T&&(F$T=!0),void 0===F$Z&&(F$Z=!1),0===(this._url=F$J).indexOf("data:image")?this._type=F$y="image":this._type=F$y||(F$y=this.getTypeFromUrl(F$J)),this._cache=F$T,this._data=null,!F$Z&&F$D.loadedMap[F$J])return this._data=F$D.loadedMap[F$J],this.event("progress",1),void this.event("complete",this._data);if(F$V&&F$D.setGroup(F$J,F$V),null!=F$D.parserMap[F$y])return this._customParse=!0,void(F$D.parserMap[F$y]instanceof laya.utils.Handler?F$D.parserMap[F$y].runWith(this):F$D.parserMap[F$y].call(null,this));if("image"===F$y||"htmlimage"===F$y||"nativeimage"===F$y)return this._loadImage(F$J);if("ttf"===F$y)return this._loadTTF(F$J);switch(F$y){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:F$y}F$D.preLoadedMap[F$J]?this.onLoaded(F$D.preLoadedMap[F$J]):F$R.resMgrLoad(F$J,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},F$y.getTypeFromUrl=function(F$J){var F$y=F$g.getFileExtension(F$J);return F$y?F$D.typeMap[F$y]:(console.warn("Not recognize the resources suffix",F$J),"text")},F$y._loadTTF=function(F$J){F$J=F$c.formatURL(F$J);var F$y=new F$i;F$y.complete=F$O.create(this,this.onLoaded),F$y.load(F$J)},F$y._loadImage=function(F$J){F$R.imgMgrLoad(F$J,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},F$y._loadImageComplete=function(F$J,F$y,F$T){if(null!=F$T)if(F$T instanceof ArrayBuffer){var F$V=new DataView(F$T),F$Z=new laya.webgl.resource.WebGLImage(new Uint8Array(F$T,8),F$J,0,!1,F$V.getUint32(0),F$V.getUint32(4));this.onLoaded(F$Z)}else if(F$T instanceof F$$J)F$D.imgMgrSet[F$J]=F$y,F$R.imgMgrLock(F$J,F$D.imgMgrSet[F$J]),this._url=F$J,this.complete(F$T);else{var F$m=-1!=F$J.indexOf(".png",F$J.length-4)?6408:6407;F$Z=new laya.webgl.resource.WebGLImage(F$T,F$J,F$m,!1,F$T.width,F$T.height);this.onLoaded(F$Z)}else this.event("error","Load image failed")},F$y.imageCancel=function(F$J,F$y,F$T){F$R.imgMgrCancel(F$J,this._onImageCallback)},F$y._loadSound=function(F$J){var F$y=new F$t._soundClass,F$T=this;function F$V(){F$y.offAll()}F$y.on("complete",this,function(){F$V(),F$T.onLoaded(F$y)}),F$y.on("error",this,function(){F$V(),F$y.dispose(),F$T.event("error","Load sound failed")}),F$y.load(F$J)},F$y.onProgress=function(F$J){"atlas"===this._type?this.event("progress",.3*F$J):this.event("progress",F$J)},F$y.onError=function(F$J){this.event("error",F$J)},F$y._loadedComplete=function(F$J,F$y,F$T){if(null!=F$T)switch(this._type){case"atlas":case"plf":case"json":var F$V=new F$W(F$T);this.onLoaded(JSON.parse(F$V.readUTFBytes()));break;case"font":F$V=new F$W(F$T);this.onLoaded(F$g.parseXMLFromString(F$V.readUTFBytes()));break;default:this.onLoaded(F$T)}else this.event("error",F$J)},F$y.onLoaded=function(F$J){var F$y=this._type;if("plf"==F$y)this.parsePLFData(F$J),this.complete(F$J);else if("image"===F$y){var F$T=new F$$J(F$J);F$T.url=this._url,this.complete(F$T)}else if("sound"===F$y||"htmlimage"===F$y||"nativeimage"===F$y)this.complete(F$J);else if("atlas"===F$y){if(!F$J.src&&!F$J._setContext){if(!this._data){if((this._data=F$J).meta&&F$J.meta.image)for(var F$V=F$J.meta.image.split(","),F$Z=0<=this._url.indexOf("/")?"/":"\\",F$m=this._url.lastIndexOf(F$Z),F$R=0<=F$m?this._url.substr(0,F$m+1):"",F$n=0,F$K=F$V.length;F$n<F$K;F$n++)F$V[F$n]=F$R+F$V[F$n];else F$V=[this._url.replace(".json",".png")];F$V.reverse(),F$J.toLoads=F$V,F$J.pics=[]}return this.event("progress",.3+1/F$V.length*.6),this._loadImage(F$V.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(F$J),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var F$A=this._data.frames,F$$=this._url.split("?")[0],F$e=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:F$$.substring(0,F$$.lastIndexOf("."))+"/",F$M=this._data.pics,F$G=F$c.formatURL(this._url),F$B=F$D.atlasMap[F$G]||(F$D.atlasMap[F$G]=[]);F$B.dir=F$e;var F$o=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var F$s in F$o=parseFloat(this._data.meta.scale),F$A){var F$E,F$O=F$A[F$s],F$L=F$M[F$O.frame.idx?F$O.frame.idx:0],F$H=F$c.formatURL(F$e+F$s);F$L.scaleRate=F$o,F$E=F$$J.create(F$L,F$O.frame.x,F$O.frame.y,F$O.frame.w,F$O.frame.h,F$O.spriteSourceSize.x,F$O.spriteSourceSize.y,F$O.sourceSize.w,F$O.sourceSize.h),F$D.cacheRes(F$H,F$E),F$D.keepCache(this._url,F$e+F$s),F$E.url=F$H,F$B.push(F$H)}else for(F$s in F$A)F$L=F$M[(F$O=F$A[F$s]).frame.idx?F$O.frame.idx:0],F$H=F$c.formatURL(F$e+F$s),F$D.cacheRes(F$H,F$$J.create(F$L,F$O.frame.x,F$O.frame.y,F$O.frame.w,F$O.frame.h,F$O.spriteSourceSize.x,F$O.spriteSourceSize.y,F$O.sourceSize.w,F$O.sourceSize.h)),F$D.loadedMap[F$H].url=F$H,F$D.keepCache(this._url,F$e+F$s),F$B.push(F$H);delete this._data.pics,this.complete(this._data)}else if("font"==F$y){if(!F$J.src)return this._data=F$J,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var F$P=new F$_;F$P.parseFont(this._data,F$J);var F$l=this._url.split(".fnt")[0].split("/"),F$a=F$l[F$l.length-1];F$sJ.registerBitmapFont(F$a,F$P),this._data=F$P,this.complete(this._data)}else if("pkm"==F$y){var F$q=F$lJ.create(F$J,this._url),F$r=new F$$J(F$q);F$r.url=this._url,this.complete(F$r)}else this.complete(F$J)},F$y.parsePLFData=function(F$J){var F$y,F$T,F$V;for(F$y in F$J)switch(F$V=F$J[F$y],F$y){case"json":case"text":for(F$T in F$V)F$D.preLoadedMap[F$c.formatURL(F$T)]=F$V[F$T];break;default:for(F$T in F$V)F$D.preLoadedMap[F$c.formatURL(F$T)]=F$V[F$T]}},F$y.complete=function(F$J){this._data=F$J,this._customParse?this.event("loaded",F$J instanceof Array?[F$J]:F$J):(F$D._loaders.push(this),F$D._isWorking||F$D.checkNext())},F$y.endLoad=function(F$J){F$J&&(this._data=F$J),this._cache&&F$D.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},F$B(0,F$y,"url",function(){return this._url}),F$B(0,F$y,"data",function(){return this._data}),F$B(0,F$y,"cache",function(){return this._cache}),F$B(0,F$y,"type",function(){return this._type}),F$D.checkNext=function(){F$D._isWorking=!0;for(var F$J=F$f.now();F$D._startIndex<F$D._loaders.length;)if(F$f.now(),F$D._loaders[F$D._startIndex].endLoad(),F$D._startIndex++,F$f.now()-F$J>F$D.maxTimeOut)return console.warn("loader callback cost a long time:"+(F$f.now()-F$J)+" url="+F$D._loaders[F$D._startIndex-1].url),void F$a.timer.frameOnce(1,null,F$D.checkNext);F$D._loaders.length=0,F$D._startIndex=0,F$D._isWorking=!1},F$D.clearRes=function(F$J,F$y){if(null!=F$J){void 0===F$y&&(F$y=!1),F$J=F$c.formatURL(F$J);var F$T=F$D.getAtlas(F$J);if(F$T){for(var F$V=0,F$Z=F$T.length;F$V<F$Z;F$V++){var F$m=F$T[F$V],F$R=F$D.getRes(F$m);delete F$D.loadedMap[F$m],F$D.clearCache(F$J.substring(F$c.basePath.length),F$m.substring(F$c.basePath.length)),F$R&&F$R.destroy(F$y)}F$T.length=0,delete F$D.atlasMap[F$J],delete F$D.loadedMap[F$J]}else{var F$n=F$D.loadedMap[F$J];F$n&&(delete F$D.loadedMap[F$J],F$n instanceof laya.resource.Texture&&F$n.bitmap&&F$n.destroy(F$y))}}},F$D.clearTextureRes=function(F$J){F$J=F$c.formatURL(F$J);var F$y=laya.net.Loader.getAtlas(F$J),F$T=F$y&&0<F$y.length?laya.net.Loader.getRes(F$y[0]):laya.net.Loader.getRes(F$J);F$T&&F$T.bitmap&&(F$u.isConchApp&&!F$u.isConchWebGL?F$T.bitmap.source.releaseTexture&&F$T.bitmap.source.releaseTexture():null==F$T.bitmap._atlaser&&F$T.bitmap.releaseResource(!0))},F$D.getRes=function(F$J){return F$D.loadedMap[F$c.formatURL(F$J)]},F$D.getAtlas=function(F$J){return F$D.atlasMap[F$c.formatURL(F$J)]},F$D.cacheRes=function(F$J,F$y){F$J=F$c.formatURL(F$J),null!=F$D.loadedMap[F$J]?console.warn("Resources already exist,is repeated loading:",F$J):F$D.loadedMap[F$J]=F$y},F$D.setGroup=function(F$J,F$y){F$D.groupMap[F$y]||(F$D.groupMap[F$y]=[]),F$D.groupMap[F$y].push(F$J)},F$D.clearResByGroup=function(F$J){if(F$D.groupMap[F$J]){var F$y=F$D.groupMap[F$J],F$T=0,F$V=F$y.length;for(F$T=0;F$T<F$V;F$T++)F$D.clearRes(F$y[F$T]);F$y.length=0}},F$D.keepCache=function(F$J,F$y){if(F$J&&F$y){var F$T=F$D.cacheSet[F$y];F$T?-1==F$T.indexOf(F$J)&&F$T.push(F$J):F$D.cacheSet[F$y]=[F$J]}},F$D.clearCache=function(F$J,F$y){if(F$J&&F$y){var F$T=F$D.cacheSet[F$y];if(F$T){var F$V=F$T.indexOf(F$J);if(-1!==F$V){var F$Z=F$T.length-1;0==F$Z?(delete F$D.cacheSet[F$y],0<F$D.imgMgrSet[F$y]?F$R.imgMgrFree(F$y,F$D.imgMgrSet[F$y]):F$D.clearRes(F$y,!0)):(F$T[F$V]=F$T[F$Z],F$T.length=F$Z)}}}},F$D.saveObject=function(F$J,F$y,F$T){if(F$y&&F$J){var F$V=F$D.objectSet[F$J];F$V?(console.warn("Loader.saveObject: "+F$J),F$V[0]=F$y,F$V[1]=F$T):F$D.objectSet[F$J]=[F$y,F$T,[]]}},F$D.findObject=function(F$J){if(F$J){var F$y=F$D.objectSet[F$J];if(F$y)return F$y[0]}return null},F$D.keepObject=function(F$J,F$y){if(F$J&&F$y){var F$T=F$D.objectSet[F$y];F$T&&-1===F$T[2].indexOf(F$J)&&F$T[2].push(F$J)}},F$D.clearObject=function(F$J,F$y){if(F$J&&F$y){var F$T=F$D.objectSet[F$y];if(F$T){var F$V=F$T[2],F$Z=F$V.indexOf(F$J);if(-1!==F$Z){var F$m=F$V.length-1;0==F$m?(delete F$D.objectSet[F$y],F$T[1]&&F$T[1].call(null,F$T[0])):(F$V[F$Z]=F$V[F$m],F$V.length=F$m)}}}},F$D.TEXT="text",F$D.JSON="json",F$D.XML="xml",F$D.BUFFER="arraybuffer",F$D.IMAGE="image",F$D.SOUND="sound",F$D.ATLAS="atlas",F$D.FONT="font",F$D.TTF="ttf",F$D.PLF="plf",F$D.PKM="pkm",F$D.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},F$D.parserMap={},F$D.groupMap={},F$D.maxTimeOut=100,F$D.loadedMap={},F$D.preLoadedMap={},F$D.atlasMap={},F$D._loaders=[],F$D._isWorking=!1,F$D._startIndex=0,F$D.imgCache={},F$D.cacheSet={},F$D.objectSet={},F$D.imgMgrSet={},F$D}(),F$KJ=function(F$J){var F$M;function F$G(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},F$G.__super.call(this);for(var F$J=0;F$J<this._maxPriority;F$J++)this._resInfos[F$J]=[]}F$$(F$G,"laya.net.LoaderManager",F$A);var F$y=F$G.prototype;return F$y.create=function(F$J,F$T,F$y,F$V,F$Z,F$m,F$R,F$n){if(null==F$m&&(F$m=2),null==F$R&&(F$R=!0),F$J instanceof Array){var F$K=F$J,F$A=F$K.length,F$$=0;if(F$y)var F$e=F$O.create(F$y.caller,F$y.method,F$y.args,!1);for(var F$M=0;F$M<F$A;F$M++){var F$G=F$K[F$M];"string"==typeof F$G&&(F$G=F$K[F$M]={url:F$G}),F$G.progress=0}for(F$M=0;F$M<F$A;F$M++){F$G=F$K[F$M];var F$B=F$y?F$O.create(null,F$E,[F$G],!1):null,F$o=F$y||F$T?F$O.create(null,F$s,[F$G]):null;this._create(F$G.url,F$o,F$B,F$G.clas||F$V,F$G.params||F$Z,null!=F$G.priority&&0<=F$G.priority?F$G.priority:F$m,F$R,F$G.group||F$n)}function F$s(F$J,F$y){F$$++,F$J.progress=1,F$$===F$A&&F$T&&F$T.run()}function F$E(F$J,F$y){F$J.progress=F$y;for(var F$T=0,F$V=0;F$V<F$A;F$V++){F$T+=F$K[F$V].progress}var F$Z=F$T/F$A;F$e.runWith(F$Z)}return!0}return this._create(F$J,F$T,F$y,F$V,F$Z,F$m,F$R,F$n)},F$y._create=function(F$y,F$T,F$J,F$V,F$Z,F$m,F$R,F$n){F$y&&""!=F$y||console.error("加载的url不合法 "+F$y),null==F$m&&(F$m=2),null==F$R&&(F$R=!0);var F$K=F$c.formatURL(F$y),F$A=this.getRes(F$K);if(F$A)!F$A.hasOwnProperty("loaded")||F$A.loaded?(F$J&&F$J.runWith(1),F$T&&F$T.run()):F$T&&F$a.loader._createListener(F$y,F$T.caller,F$T.method,F$T.args,!0,!1);else{var F$$=F$g.getFileExtension(F$y),F$e=F$G.createMap[F$$];if(!F$e)throw new Error("LoaderManager:unknown file("+F$y+") extension with: "+F$$+".");F$V||(F$V=F$e[0]);var F$M=F$e[1];if("atlas"==F$$)this.load(F$y,F$T,F$J,F$M,F$m,F$R);else{F$V===F$$J&&(F$M="htmlimage"),(F$A=F$V?new F$V:null).hasOwnProperty("_loaded")&&(F$A._loaded=!1),F$A._setUrl(F$y),F$n&&F$A._setGroup(F$n),this._createLoad(F$A,F$y,F$O.create(null,function(F$J){F$A&&!F$A.destroyed&&F$J&&F$A.onAsynLoaded.call(F$A,F$y,F$J,F$Z),F$T&&F$T.run();F$a.loader.event(F$y)}),F$J,F$M,F$m,!1,F$n,!0),F$R&&this.cacheRes(F$K,F$A)}}return F$A},F$y.load=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){F$J&&""!=F$J||console.error("加载的url不合法 "+F$J);var F$K=this;if(null==F$Z&&(F$Z=2),null==F$m&&(F$m=!0),void 0===F$n&&(F$n=!1),F$J instanceof Array)return this._loadAssets(F$J,F$y,F$T,F$V,F$Z,F$m,F$R);var F$A=F$nJ.getRes(F$J);if(null!=F$A)F$a.timer.frameOnce(1,null,function(){F$T&&F$T.runWith(1),F$y&&F$y.runWith(F$A),F$K._loaderCount||F$K.event("complete")});else{var F$$=F$G._resMap[F$J];F$$?(F$y&&F$$._createListener("complete",F$y.caller,F$y.method,F$y.args,!1,!1),F$T&&F$$._createListener("progress",F$T.caller,F$T.method,F$T.args,!1,!1)):((F$$=this._infoPool.length?this._infoPool.pop():new F$M).url=F$J,F$$.clas=null,F$$.type=F$V,F$$.cache=F$m,F$$.group=F$R,F$$.ignoreCache=F$n,F$$.priority=F$Z,F$y&&F$$.on("complete",F$y.caller,F$y.method,F$y.args),F$T&&F$$.on("progress",F$T.caller,F$T.method,F$T.args),F$G._resMap[F$J]=F$$,F$Z=F$Z<this._maxPriority?0<=F$Z?F$Z:0:this._maxPriority-1,this._resInfos[F$Z].push(F$$),this._next())}return this},F$y.cancel=function(F$J,F$y,F$T){if(F$A=F$G._resMap[F$J]){F$y&&F$A.off("complete",F$y.caller,F$y.method,!1),F$T&&F$A.off("progress",F$T.caller,F$T.method,!1);var F$V=F$A.getListener("complete"),F$Z=F$A.getListener("progress");if(!(F$V&&F$V.head||F$Z&&F$Z.head)){if(F$A.loader){var F$m=F$A.loader;F$m.imageCancel(F$J),F$m.offAll(),F$m._data=null,F$m._customParse=!1,this._loaders.push(F$m),this._loaderCount--,delete this._loaderMap[F$A.url]}for(var F$R=0;F$R<this._maxPriority;F$R++)for(var F$n=this._resInfos[F$R],F$K=F$n.length-1;-1<F$K;F$K--){var F$A;(F$A=F$n[F$K])&&F$A.url===F$J&&(F$n[F$K]=null,F$A.destroy(),F$A.offAll(),this._infoPool.push(F$A))}delete F$G._resMap[F$J],this._next()}}},F$y._createLoad=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){var F$A=this;if(null==F$m&&(F$m=2),null==F$R&&(F$R=!0),void 0===F$K&&(F$K=!1),F$y instanceof Array)return this._loadAssets(F$y,F$T,F$V,F$Z,F$m,F$R,F$n);var F$$=F$nJ.getRes(F$y);if(null!=F$$)F$a.timer.frameOnce(1,null,function(){F$V&&F$V.runWith(1),F$T&&F$T.runWith(F$$),F$A._loaderCount||F$A.event("complete")});else{var F$e=F$G._resMap[F$y];F$e?(F$T&&F$e._createListener("complete",F$T.caller,F$T.method,F$T.args,!1,!1),F$V&&F$e._createListener("progress",F$V.caller,F$V.method,F$V.args,!1,!1)):((F$e=this._infoPool.length?this._infoPool.pop():new F$M).url=F$y,F$e.clas=F$J,F$e.type=F$Z,F$e.cache=F$R,F$e.group=F$n,F$e.ignoreCache=F$K,F$e.priority=F$m,F$T&&F$e.on("complete",F$T.caller,F$T.method,F$T.args),F$V&&F$e.on("progress",F$V.caller,F$V.method,F$V.args),F$G._resMap[F$y]=F$e,F$m=F$m<this._maxPriority?0<=F$m?F$m:0:this._maxPriority-1,this._resInfos[F$m].push(F$e),this._next())}return this},F$y._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var F$J=0;F$J<this._maxPriority;F$J++)for(var F$y=this._resInfos[F$J];0<F$y.length;){var F$T=F$y.shift();if(F$T)return this._doLoad(F$T)}this._loaderCount||this.event("complete")}},F$y._doLoad=function(F$y){var F$T=this._loaders.length?this._loaders.pop():new F$nJ;this._loaderCount++,(this._loaderMap[F$y.url]=F$T).on("complete",null,F$Z),F$T.on("progress",null,function(F$J){F$y.event("progress",F$J)}),F$T.on("error",null,function(F$J){F$Z(null)}),F$y.loader=F$T;var F$V=this;function F$Z(F$J){F$T.offAll(),F$T._data=null,F$T._customParse=!1,F$V._endLoad(F$y,F$J instanceof Array?[F$J]:F$J),F$V._loaders.push(F$T),F$V._loaderCount--,delete F$V._loaderMap[F$y.url],F$V._next()}F$T._class=F$y.clas,1<=F$y.priority?(F$T.priority=F$y.priority,F$T.realTime=!1):(F$T.priority=0,F$T.realTime=!0),F$T.load(F$y.url,F$y.type,F$y.cache,F$y.group,F$y.ignoreCache)},F$y._endLoad=function(F$J,F$y){var F$T=F$J.url;if(null==F$y){var F$V=this._failRes[F$T]||0;if(F$V<this.retryNum)return console.warn("[warn]Retry to load:",F$T),this._failRes[F$T]=F$V+1,void F$a.timer.once(this.retryDelay,this,this._addReTry,[F$J],!1);console.warn("[error]Failed to load:",F$T),this.event("error",F$T)}this._failRes[F$T]&&(this._failRes[F$T]=0),delete F$G._resMap[F$T],F$J.event("complete",F$y),F$J.destroy(),F$J.offAll(),this._infoPool.push(F$J)},F$y._addReTry=function(F$J){this._resInfos[this._maxPriority-1].push(F$J),this._next()},F$y.clearRes=function(F$J,F$y){void 0===F$y&&(F$y=!1),F$nJ.clearRes(F$J,F$y)},F$y.getRes=function(F$J){return F$nJ.getRes(F$J)},F$y.cacheRes=function(F$J,F$y){F$nJ.cacheRes(F$J,F$y)},F$y.clearTextureRes=function(F$J){F$nJ.clearTextureRes(F$J)},F$y.setGroup=function(F$J,F$y){F$nJ.setGroup(F$J,F$y)},F$y.clearResByGroup=function(F$J){F$nJ.clearResByGroup(F$J)},F$y.clearUnLoaded=function(){for(var F$J=0;F$J<this._maxPriority;F$J++){for(var F$y=this._resInfos[F$J],F$T=F$y.length-1;-1<F$T;F$T--){var F$V=F$y[F$T];F$V&&(F$V.destroy(),F$V.offAll(),this._infoPool.push(F$V))}F$y.length=0}this._loaderCount=0,F$G._resMap={}},F$y.cancelLoadByUrls=function(F$J){if(F$J)for(var F$y=0,F$T=F$J.length;F$y<F$T;F$y++)this.cancelLoadByUrl(F$J[F$y])},F$y.cancelLoadByUrl=function(F$J){for(var F$y=0;F$y<this._maxPriority;F$y++)for(var F$T=this._resInfos[F$y],F$V=F$T.length-1;-1<F$V;F$V--){var F$Z=F$T[F$V];F$Z&&F$Z.url===F$J&&(F$T[F$V]=null,F$Z.destroy(),F$Z.offAll(),this._infoPool.push(F$Z))}F$G._resMap[F$J]&&delete F$G._resMap[F$J]},F$y._loadAssets=function(F$J,F$T,F$R,F$y,F$V,F$Z,F$m){null==F$V&&(F$V=2),null==F$Z&&(F$Z=!0);for(var F$n=F$J.length,F$K=0,F$A=0,F$$=[],F$e=!0,F$M=0;F$M<F$n;F$M++){var F$G=F$J[F$M];if(!F$G)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+F$J);"string"==typeof F$G&&(F$G={url:F$G,type:F$y,size:1,priority:F$V}),F$G.size||(F$G.size=1),F$G.progress=0,F$A+=F$G.size,F$$.push(F$G);var F$B=F$R?F$O.create(null,F$E,[F$G],!1):null,F$o=F$T||F$R?F$O.create(null,F$s,[F$G]):null;this.load(F$G.url,F$o,F$B,F$G.type,null!=F$G.priority&&0<=F$G.priority?F$G.priority:2,F$Z,F$G.group||F$m)}function F$s(F$J,F$y){F$K++,F$J.progress=1,F$y||(F$e=!1),F$K===F$n&&F$T&&F$T.runWith(F$e)}function F$E(F$J,F$y){if(null!=F$R){F$J.progress=F$y;for(var F$T=0,F$V=0;F$V<F$$.length;F$V++){var F$Z=F$$[F$V];F$T+=F$Z.size*F$Z.progress}var F$m=F$T/F$A;F$R.runWith(F$m)}}return this},F$G.cacheRes=function(F$J,F$y){F$nJ.cacheRes(F$J,F$y)},F$G._resMap={},F$K(F$G,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),F$G.__init$=function(){F$M=function(F$J){function F$y(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,F$y.__super.call(this)}return F$$(F$y,"",F$A),F$y.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},F$y}()},F$G}(),F$AJ=(function(F$J){function F$Z(F$J){F$Z.__super.call(this),F$J||(F$J=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var F$y=0,F$T=0,F$V=0;F$V<20;F$V++)F$V%5!=4?this._mat[F$y++]=F$J[F$V]:this._alpha[F$T++]=F$J[F$V];this._action=F$v.createFilterAction(32),this._action.data=this}F$$(F$Z,"laya.filters.ColorFilter",F$E);var F$y=F$Z.prototype;F$a.imps(F$y,{"laya.filters.IFilter":!0}),F$y.callNative=function(F$J){F$J._$P.cf=this;F$J.conchModel&&F$J.conchModel.setFilterMatrix&&F$J.conchModel.setFilterMatrix(this._mat,this._alpha)},F$B(0,F$y,"type",function(){return 32}),F$B(0,F$y,"action",function(){return this._action})}(),function(F$J){function F$V(F$J,F$y,F$T){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===F$y&&(F$y=0),F$V.__super.call(this),this._byteClass=F$T||F$W,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,F$J&&0<F$y&&F$y<65535&&this.connect(F$J,F$y)}F$$(F$V,"laya.net.Socket",F$A);var F$y=F$V.prototype;F$y.connect=function(F$J,F$y){var F$T="ws://"+F$J+":"+F$y;F$T="https:"==F$f.window.location.protocol?"wss://"+F$J+":"+F$y:"ws://"+F$J+":"+F$y,this.connectByUrl(F$T)},F$y.connectByUrl=function(F$J){var F$y=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new F$f.window.WebSocket(F$J,this.protocols):this._socket=new F$f.window.WebSocket(F$J),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(F$J){F$y._onOpen(F$J)},this._socket.onmessage=function(F$J){F$y._onMessage(F$J)},this._socket.onclose=function(F$J){F$y._onClose(F$J)},this._socket.onerror=function(F$J){F$y._onError(F$J)}},F$y.cleanSocket=function(){try{this._socket.close()}catch(F$J){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},F$y.close=function(){if(null!=this._socket)try{this._socket.close()}catch(F$J){}},F$y._onOpen=function(F$J){this._connected=!0,this.event("open",F$J)},F$y._onMessage=function(F$J){if(F$J&&F$J.data){var F$y=F$J.data;if(this.disableInput&&F$y)this.event("message",F$y);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var F$T=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,F$y&&("string"==typeof F$y?this._input.writeUTFBytes(F$y):this._input.writeArrayBuffer(F$y),this._addInputPosition=this._input.pos,this._input.pos=F$T),this.event("message",F$y)}}},F$y._onClose=function(F$J){this._connected=!1,this.event("close",F$J)},F$y._onError=function(F$J){this.event("error",F$J)},F$y.send=function(F$J){this._socket.send(F$J)},F$y.flush=function(){if(this._output&&0<this._output.length){var F$y;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(F$J){F$y=F$J}this._output.endian=this.endian,this._output.clear(),F$y&&this.event("error",F$y)}},F$B(0,F$y,"input",function(){return this._input}),F$B(0,F$y,"output",function(){return this._output}),F$B(0,F$y,"connected",function(){return this._connected}),F$B(0,F$y,"endian",function(){return this._endian},function(F$J){this._endian=F$J,null!=this._input&&(this._input.endian=F$J),null!=this._output&&(this._output.endian=F$J)}),F$V.LITTLE_ENDIAN="littleEndian",F$V.BIG_ENDIAN="bigEndian"}(),function(F$J){function F$n(){F$n.__super.call(this),this._$1__id=++F$n._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(F$n._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,F$S.currentResourceManager&&F$S.currentResourceManager.addResource(this)}F$$(F$n,"laya.resource.Resource",F$A);var F$y=F$n.prototype;return F$a.imps(F$y,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),F$y._setUrl=function(F$J){var F$y;this._url!==F$J&&(this._url&&((F$y=F$n._urlResourcesMap[this._url]).splice(F$y.indexOf(this),1),0===F$y.length&&delete F$n._urlResourcesMap[this._url]),F$J&&((F$y=F$n._urlResourcesMap[F$J])||(F$n._urlResourcesMap[F$J]=F$y=[]),F$y.push(this)),this._url=F$J)},F$y._getGroup=function(){return this._group},F$y._setGroup=function(F$J){var F$y;this._group!==F$J&&(this._group&&((F$y=F$n._groupResourcesMap[this._group]).splice(F$y.indexOf(this),1),0===F$y.length&&delete F$n._groupResourcesMap[this._group]),F$J&&((F$y=F$n._groupResourcesMap[F$J])||(F$n._groupResourcesMap[F$J]=F$y=[]),F$y.push(this)),this._group=F$J)},F$y._addReference=function(){this._referenceCount++},F$y._removeReference=function(){this._referenceCount--},F$y._clearReference=function(){this._referenceCount=0},F$y._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},F$y.recreateResource=function(){this.completeCreate()},F$y.disposeResource=function(){},F$y.activeResource=function(F$J){void 0===F$J&&(F$J=!1),this._lastUseFrameCount=F$h.loopCount,!this._destroyed&&this.__loaded&&(this._released||F$J)&&this.recreateResource()},F$y.releaseResource=function(F$J){return void 0===F$J&&(F$J=!0),!(!F$J&&this.lock)&&(!(this._released&&!F$J)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},F$y.onAsynLoaded=function(F$J,F$y,F$T){throw new Error("Resource: must override this function!")},F$y.destroy=function(){var F$J;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete F$n._idResourcesMap[this.id],this._url&&((F$J=F$n._urlResourcesMap[this._url])&&(F$J.splice(F$J.indexOf(this),1),0===F$J.length&&delete F$n._urlResourcesMap[this.url]),F$nJ.clearRes(this._url),this.__loaded||F$v.cancelLoadByUrl(this._url)),this._group&&((F$J=F$n._groupResourcesMap[this._group]).splice(F$J.indexOf(this),1),0===F$J.length&&delete F$n._groupResourcesMap[this.url]))},F$y.completeCreate=function(){this._released=!1,this.event("recovered",this)},F$y.dispose=function(){this.destroy()},F$B(0,F$y,"memorySize",function(){return this._memorySize},function(F$J){var F$y=F$J-this._memorySize;this._memorySize=F$J,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,F$y),this.resourceManager&&this.resourceManager.addSize(F$y)}),F$B(0,F$y,"_loaded",null,function(F$J){this.__loaded=F$J}),F$B(0,F$y,"loaded",function(){return this.__loaded}),F$B(0,F$y,"id",function(){return this._$1__id}),F$B(0,F$y,"destroyed",function(){return this._destroyed}),F$B(0,F$y,"group",function(){return this._getGroup()},function(F$J){this._setGroup(F$J)}),F$B(0,F$y,"resourceManager",function(){return this._resourceManager}),F$B(0,F$y,"url",function(){return this._url}),F$B(0,F$y,"released",function(){return this._released}),F$B(0,F$y,"referenceCount",function(){return this._referenceCount}),F$n.getResourceByID=function(F$J){return F$n._idResourcesMap[F$J]},F$n.getResourceByURL=function(F$J,F$y){return void 0===F$y&&(F$y=0),null==F$n._urlResourcesMap[F$J]?null:F$n._urlResourcesMap[F$J][F$y]},F$n.getResourceCountByURL=function(F$J){return F$n._urlResourcesMap[F$J].length},F$n.destroyUnusedResources=function(F$J){var F$y;if(F$J){var F$T=F$n._groupResourcesMap[F$J];if(F$T)for(var F$V=F$T.slice(),F$Z=0,F$m=F$V.length;F$Z<F$m;F$Z++)(F$y=F$V[F$Z]).lock||0!==F$y._referenceCount||F$y.destroy()}else for(var F$R in F$n._idResourcesMap)(F$y=F$n._idResourcesMap[F$R]).lock||0!==F$y._referenceCount||F$y.destroy()},F$n._uniqueIDCounter=0,F$n._idResourcesMap={},F$n._urlResourcesMap={},F$n._groupResourcesMap={},F$n}()),F$$J=function(F$J){function F$D(F$J,F$y){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,F$D.__super.call(this),F$J&&null!=F$J._addReference&&F$J._addReference(),this.setTo(F$J,F$y)}F$$(F$D,"laya.resource.Texture",F$A);var F$y=F$D.prototype;return F$y._setUrl=function(F$J){this.url=F$J},F$y.setTo=function(F$J,F$y){if(F$J instanceof F$R.HTMLElement){var F$T=F$LJ.create("2D",F$J);this.bitmap=F$T}else this.bitmap=F$J;if(this.uv=F$y||F$D.DEF_UV,F$J){this._w=F$J.width,this._h=F$J.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var F$V=this;if(this._loaded)F$v.addToAtlas&&F$v.addToAtlas(F$V);else{var F$Z=F$J;F$Z instanceof laya.resource.HTMLImage&&F$Z.image&&F$Z.image.addEventListener("load",function(F$J){F$v.addToAtlas&&F$v.addToAtlas(F$V)},!1)}}},F$y.active=function(){this.bitmap&&this.bitmap.activeResource()},F$y.destroy=function(F$J){if(void 0===F$J&&(F$J=!1),this.alphaTexture&&(this.alphaTexture.destroy(F$J),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var F$y=this.bitmap;F$J?(F$u.isConchApp&&F$y.source&&F$y.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,F$y.dispose(),F$y._clearReference()):(F$y._removeReference(),0==F$y.referenceCount&&(F$u.isConchApp&&F$y.source&&F$y.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,F$y.dispose())),this.url&&this===F$a.loader.getRes(this.url)&&F$a.loader.clearRes(this.url,F$J),this._loaded=!1}},F$y.load=function(F$J){var F$y=this;this._loaded=!1,F$J=F$c.customFormat(F$J);var F$T=this.bitmap||(this.bitmap=F$lJ.create(F$J));F$T.uri=F$J,F$T&&F$T._addReference();var F$V=this;F$T.onload=function(){F$T.onload=null,F$V._loaded=!0,F$y.sourceWidth=F$y._w=F$T.width,F$y.sourceHeight=F$y._h=F$T.height,F$V.event("loaded",this),F$v.addToAtlas&&F$v.addToAtlas(F$V)}},F$y.addTextureToAtlas=function(F$J){F$v.addTextureToAtlas(this)},F$y.getPixels=function(F$J,F$y,F$T,F$V){if(F$u.isConchApp){var F$Z=this.bitmap;if(F$Z.source&&F$Z.source.getImageData){var F$m=F$Z.source.getImageData(F$J,F$y,F$T,F$V),F$R=new Uint8Array(F$m);return Array.from(F$R)}return null}return F$u.isWebGL?F$v.getTexturePixels(this,F$J,F$y,F$T,F$V):(F$f.canvas.size(F$T,F$V),F$f.canvas.clear(),F$f.context.drawTexture(this,-F$J,-F$y,this.width,this.height,0,0),F$f.context.getImageData(0,0,F$T,F$V).data)},F$y.onAsynLoaded=function(F$J,F$y){if(F$y){if("function"!=typeof F$y._addReference)throw new Error("bitmap._addReference is not a function. "+F$y.className+" "+typeof F$y._addReference+" "+F$y.constructor);F$y._addReference()}this.setTo(F$y,this.uv),this._loaded&&this.event("loaded",this)},F$B(0,F$y,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),F$B(0,F$y,"loaded",function(){return this._loaded}),F$B(0,F$y,"released",function(){return!this.bitmap||this.bitmap.released}),F$B(0,F$y,"width",function(){return this._w?this._w:this.uv&&this.uv!==F$D.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(F$J){this._w=F$J,this.sourceWidth||(this.sourceWidth=F$J)}),F$B(0,F$y,"repeat",function(){return!F$u.isWebGL||!this.bitmap||this.bitmap.repeat},function(F$J){F$J&&F$u.isWebGL&&this.bitmap&&(this.bitmap.repeat=F$J)&&(this.bitmap.enableMerageInAtlas=!1)}),F$B(0,F$y,"height",function(){return this._h?this._h:this.uv&&this.uv!==F$D.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(F$J){this._h=F$J,this.sourceHeight||(this.sourceHeight=F$J)}),F$B(0,F$y,"isLinearSampling",function(){return!F$u.isWebGL||9728!=this.bitmap.minFifter},function(F$J){!F$J&&F$u.isWebGL&&(F$J||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),F$D.moveUV=function(F$J,F$y,F$T){for(var F$V=0;F$V<8;F$V+=2)F$T[F$V]+=F$J,F$T[F$V+1]+=F$y;return F$T},F$D.create=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){void 0===F$m&&(F$m=0),void 0===F$R&&(F$R=0),void 0===F$n&&(F$n=0),void 0===F$K&&(F$K=0);var F$A=F$J instanceof laya.resource.Texture,F$$=F$A?F$J.uv:F$D.DEF_UV,F$e=F$A?F$J.bitmap:F$J,F$M=F$v.isAtlas(F$e);if(F$M){var F$G=F$e._atlaser,F$B=F$J._atlasID;if(-1==F$B)throw new Error("create texture error");F$e=F$G._inAtlasTextureBitmapValue[F$B],F$$=F$G._inAtlasTextureOriUVValue[F$B]}var F$o=new F$D(F$e,null);F$e.width&&F$y+F$V>F$e.width&&(F$V=F$e.width-F$y),F$e.height&&F$T+F$Z>F$e.height&&(F$Z=F$e.height-F$T),F$o.width=F$V,F$o.height=F$Z,F$o.offsetX=F$m,F$o.offsetY=F$R,F$o.sourceWidth=F$n||F$V,F$o.sourceHeight=F$K||F$Z;var F$s=1/F$e.width,F$E=1/F$e.height;F$y*=F$s,F$T*=F$E,F$V*=F$s,F$Z*=F$E;var F$O=F$o.uv[0],F$L=F$o.uv[1],F$H=F$o.uv[4],F$P=F$o.uv[5],F$l=F$H-F$O,F$a=F$P-F$L,F$q=F$D.moveUV(F$$[0],F$$[1],[F$y,F$T,F$y+F$V,F$T,F$y+F$V,F$T+F$Z,F$y,F$T+F$Z]);F$o.uv=[F$O+F$q[0]*F$l,F$L+F$q[1]*F$a,F$H-(1-F$q[2])*F$l,F$L+F$q[3]*F$a,F$H-(1-F$q[4])*F$l,F$P-(1-F$q[5])*F$a,F$O+F$q[6]*F$l,F$P-(1-F$q[7])*F$a],F$M&&F$o.addTextureToAtlas();var F$r=F$e.scaleRate;return F$r&&1!=F$r?(F$o.sourceWidth/=F$r,F$o.sourceHeight/=F$r,F$o.width/=F$r,F$o.height/=F$r,F$o.scaleRate=F$r,F$o.offsetX/=F$r,F$o.offsetY/=F$r):F$o.scaleRate=1,F$o},F$D.createFromTexture=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$J.scaleRate;1!=F$m&&(F$y*=F$m,F$T*=F$m,F$V*=F$m,F$Z*=F$m);var F$R=F$r.TEMP.setTo(F$y-F$J.offsetX,F$T-F$J.offsetY,F$V,F$Z),F$n=F$R.intersection(F$D._rect1.setTo(0,0,F$J.width,F$J.height),F$D._rect2);if(!F$n)return null;var F$K=F$D.create(F$J,F$n.x,F$n.y,F$n.width,F$n.height,F$n.x-F$R.x,F$n.y-F$R.y,F$V,F$Z);if(F$K.bitmap&&F$K.bitmap._removeReference)return F$K.bitmap._removeReference(),F$K;var F$A="bitmap:"+(F$K.bitmap?F$K.bitmap.constructor?F$K.bitmap.constructor.name:F$K.bitmap.__className:"")+", url:"+(F$J.url+" | "+(F$K.bitmap?F$K.bitmap.url:F$J.url))+", x="+F$y+",y="+F$T+",width="+F$V+",height="+F$Z+", result="+(F$n?F$n.x+","+F$n.y+","+F$n.width+","+F$n.height:"null")+", rect="+F$R.x+","+F$R.y+","+F$R.width+","+F$R.height;throw new Error("报错：bitmap._removeReference is not a function  "+F$A)},F$D.DEF_UV=[0,0,1,0,1,1,0,1],F$D.INV_UV=[0,1,1,1,1,0,0,0],F$D._rect1=new F$r,F$D._rect2=new F$r,F$D}(),F$J=function(F$J){var F$n;function F$m(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,F$m.__super.call(this)}F$$(F$m,"laya.utils.TimeLine",F$A);var F$y=F$m.prototype;return F$y.to=function(F$J,F$y,F$T,F$V,F$Z){return void 0===F$Z&&(F$Z=0),this._create(F$J,F$y,F$T,F$V,F$Z,!0)},F$y.from=function(F$J,F$y,F$T,F$V,F$Z){return void 0===F$Z&&(F$Z=0),this._create(F$J,F$y,F$T,F$V,F$Z,!1)},F$y._create=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=F$b.getItemByClass("tweenData",F$n);return F$R.isTo=F$m,F$R.type=0,F$R.target=F$J,F$R.duration=F$T,F$R.data=F$y,F$R.startTime=this._startTime+F$Z,F$R.endTime=F$R.startTime+F$R.duration,F$R.ease=F$V,this._startTime=Math.max(F$R.endTime,this._startTime),this._tweenDataList.push(F$R),this._startTimeSort=!0,this._endTimeSort=!0,this},F$y.addLabel=function(F$J,F$y){var F$T=F$b.getItemByClass("tweenData",F$n);return F$T.type=1,F$T.data=F$J,F$T.endTime=F$T.startTime=this._startTime+F$y,this._labelDic||(this._labelDic={}),this._labelDic[F$J]=F$T,this._tweenDataList.push(F$T),this},F$y.removeLabel=function(F$J){if(this._labelDic&&this._labelDic[F$J]){var F$y=this._labelDic[F$J];if(F$y){var F$T=this._tweenDataList.indexOf(F$y);-1<F$T&&this._tweenDataList.splice(F$T,1)}delete this._labelDic[F$J]}},F$y.gotoTime=function(F$J){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var F$y,F$T,F$V,F$Z;for(var F$m in this._firstTweenDic)if(F$T=this._firstTweenDic[F$m])for(var F$R in F$T)F$T.diyTarget.hasOwnProperty(F$R)&&(F$T.diyTarget[F$R]=F$T[F$R]);for(F$m in this._tweenDic)(F$y=this._tweenDic[F$m]).clear(),delete this._tweenDic[F$m];if(this._index=0,this._gidIndex=0,this._currTime=F$J,this._lastTime=F$f.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=F$V=this._tweenDataList.concat(),F$V.sort(function(F$J,F$y){return F$J.endTime>F$y.endTime?1:F$J.endTime<F$y.endTime?-1:0})}else F$V=this._endTweenDataList;for(var F$n=0,F$K=F$V.length;F$n<F$K;F$n++)if(0==(F$Z=F$V[F$n]).type){if(!(F$J>=F$Z.endTime))break;this._index=Math.max(this._index,F$n+1);var F$A=F$Z.data;if(F$Z.isTo)for(var F$$ in F$A)F$Z.target[F$$]=F$A[F$$]}for(F$n=0,F$K=this._tweenDataList.length;F$n<F$K;F$n++)0==(F$Z=this._tweenDataList[F$n]).type&&F$J>=F$Z.startTime&&F$J<F$Z.endTime&&(this._index=Math.max(this._index,F$n+1),this._gidIndex++,(F$y=F$b.getItemByClass("tween",F$j))._create(F$Z.target,F$Z.data,F$Z.duration,F$Z.ease,F$O.create(this,this._animComplete,[this._gidIndex]),0,!1,F$Z.isTo,!0,!1),F$y.setStartTime(this._currTime-(F$J-F$Z.startTime)),F$y._updateEase(this._currTime),F$y.gid=this._gidIndex,this._tweenDic[this._gidIndex]=F$y)}},F$y.gotoLabel=function(F$J){if(null!=this._labelDic){var F$y=this._labelDic[F$J];F$y&&this.gotoTime(F$y.startTime)}},F$y.pause=function(){F$a.timer.clear(this,this._update)},F$y.resume=function(){this.play(this._currTime,this._loopKey)},F$y.play=function(F$J,F$y){if(void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(F$J,F$y){return F$J.startTime>F$y.startTime?1:F$J.startTime<F$y.startTime?-1:0});for(var F$T=0,F$V=this._tweenDataList.length;F$T<F$V;F$T++){var F$Z=this._tweenDataList[F$T];if(null!=F$Z&&0==F$Z.type){var F$m=F$Z.target,F$R=F$m.$_GID||(F$m.$_GID=F$g.getGID()),F$n=null;for(var F$K in null==this._firstTweenDic[F$R]?((F$n={}).diyTarget=F$m,this._firstTweenDic[F$R]=F$n):F$n=this._firstTweenDic[F$R],F$Z.data)null==F$n[F$K]&&(F$n[F$K]=F$m[F$K])}}}"string"==typeof F$J?this.gotoLabel(F$J):this.gotoTime(F$J),this._loopKey=F$y,this._lastTime=F$f.now(),F$a.timer.frameLoop(1,this,this._update)}},F$y._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var F$J in this._tweenDic)(F$y=this._tweenDic[F$J]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var F$y,F$T=F$f.now(),F$V=F$T-this._lastTime,F$Z=this._currTime+=F$V*this.scale;for(F$J in this._lastTime=F$T,this._tweenDic)(F$y=this._tweenDic[F$J])._updateEase(F$Z);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var F$m=this._tweenDataList[this._index];F$Z>=F$m.startTime&&(this._index++,0==F$m.type?(this._gidIndex++,(F$y=F$b.getItemByClass("tween",F$j))._create(F$m.target,F$m.data,F$m.duration,F$m.ease,F$O.create(this,this._animComplete,[this._gidIndex]),0,!1,F$m.isTo,!0,!1),F$y.setStartTime(F$Z),F$y.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=F$y)._updateEase(F$Z)):this.event("label",F$m.data))}},F$y._animComplete=function(F$J){this._tweenDic[F$J]&&delete this._tweenDic[F$J]},F$y._complete=function(){this.event("complete")},F$y.reset=function(){var F$J;if(this._labelDic)for(F$J in this._labelDic)delete this._labelDic[F$J];for(F$J in this._tweenDic)this._tweenDic[F$J].clear(),delete this._tweenDic[F$J];for(F$J in this._firstTweenDic)delete this._firstTweenDic[F$J];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var F$y,F$T=0;for(F$y=this._tweenDataList.length,F$T=0;F$T<F$y;F$T++)this._tweenDataList[F$T]&&this._tweenDataList[F$T].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,F$a.timer.clear(this,this._update)},F$y.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},F$B(0,F$y,"index",function(){return this._frameIndex},function(F$J){this._frameIndex=F$J,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),F$B(0,F$y,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),F$m.to=function(F$J,F$y,F$T,F$V,F$Z){return void 0===F$Z&&(F$Z=0),(new F$m).to(F$J,F$y,F$T,F$V,F$Z)},F$m.from=function(F$J,F$y,F$T,F$V,F$Z){return void 0===F$Z&&(F$Z=0),(new F$m).from(F$J,F$y,F$T,F$V,F$Z)},F$m.__init$=function(){F$n=function(){function F$J(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return F$$(F$J,""),F$J.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,F$b.recover("tweenData",this)},F$J}()},F$m}(),F$eJ=function(F$Z){function F$T(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,F$T.__super.call(this),this._style=F$n.EMPTY}F$$(F$T,"laya.display.Sprite",F$Z);var F$J=F$T.prototype;return F$a.imps(F$J,{"laya.display.ILayout":!0}),F$J.createConchModel=function(){return new ConchNode},F$J.destroy=function(F$J){if(void 0===F$J&&(F$J=!0),this._releaseMem(),!this._destroyed){this.filters=null;var F$y=this.mask;F$y&&(this.mask=null,F$y.destroy(F$J))}F$Z.prototype.destroy.call(this,F$J),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},F$J.updateZOrder=function(){F$g.updateOrder(this._childs)&&this.repaint()},F$J.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},F$J.setBounds=function(F$J){this._set$P("uBounds",F$J)},F$J.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new F$r),F$r._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},F$J.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new F$r),F$r._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},F$J._boundPointsToParent=function(F$J){void 0===F$J&&(F$J=!1);var F$y=0,F$T=0;this._style&&(F$y=this._style._tf.translateX,F$T=this._style._tf.translateY,F$J=F$J||0!==this._style._tf.rotate,this._style.scrollRect&&(F$y+=this._style.scrollRect.x,F$T+=this._style.scrollRect.y));var F$V=this._getBoundPointsM(F$J);if(!F$V||F$V.length<1)return F$V;if(8!=F$V.length&&(F$V=F$J?F$P.scanPList(F$V):F$r._getWrapRec(F$V,F$r.TEMP)._getBoundPoints()),!this.transform)return F$g.transPointList(F$V,this._x-F$y,this._y-F$T),F$V;var F$Z=F$q.TEMP,F$m=0,F$R=F$V.length;for(F$m=0;F$m<F$R;F$m+=2)F$Z.x=F$V[F$m],F$Z.y=F$V[F$m+1],this.toParentPoint(F$Z),F$V[F$m]=F$Z.x,F$V[F$m+1]=F$Z.y;return F$V},F$J.getGraphicBounds=function(F$J){return void 0===F$J&&(F$J=!1),this._graphics?this._graphics.getBounds(F$J):F$r.TEMP.setTo(0,0,0,0)},F$J._getBoundPointsM=function(F$J){if(void 0===F$J&&(F$J=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var F$y=F$g.clearArray(this._$P.temBM),F$T=F$r.TEMP;return F$T.copyFrom(this.scrollRect),F$g.concatArray(F$y,F$T._getBoundPoints()),F$y}for(var F$V,F$Z,F$m,F$R=this._graphics?this._graphics.getBoundPoints():F$g.clearArray(this._$P.temBM),F$n=0,F$K=(F$m=this._childs).length;F$n<F$K;F$n++)(F$V=F$m[F$n])instanceof laya.display.Sprite&&1==F$V.visible&&(F$Z=F$V._boundPointsToParent(F$J))&&(F$R=F$R?F$g.concatArray(F$R,F$Z):F$Z);return F$R},F$J.getStyle=function(){return this._style===F$n.EMPTY&&(this._style=new F$n),this._style},F$J.setStyle=function(F$J){this._style=F$J},F$J._adjustTransform=function(){this._tfChanged=!1;var F$J,F$y=this._style._tf,F$T=F$y.scaleX,F$V=F$y.scaleY;if(F$y.rotate||1!==F$T||1!==F$V||F$y.skewX||F$y.skewY){(F$J=this._transform||(this._transform=F$Q.create())).bTransform=!0;var F$Z=.0174532922222222*(F$y.rotate-F$y.skewX),F$m=.0174532922222222*(F$y.rotate+F$y.skewY),F$R=Math.cos(F$m),F$n=Math.sin(F$m),F$K=Math.sin(F$Z),F$A=Math.cos(F$Z);return F$J.a=F$T*F$R,F$J.b=F$T*F$n,F$J.c=-F$V*F$K,F$J.d=F$V*F$A,F$J.tx=F$J.ty=0,F$J}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,F$J},F$J.pos=function(F$J,F$y,F$T){if(void 0===F$T&&(F$T=!1),this._x!==F$J||this._y!==F$y){if(this.destroyed)return this;if(F$T){this._x=F$J,this._y=F$y,this.conchModel&&this.conchModel.pos(this._x,this._y);var F$V=this._parent;F$V&&0===F$V._repaint&&(F$V._repaint=1,F$V.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=F$J,this.y=F$y}return this},F$J.pivot=function(F$J,F$y){return this.pivotX=F$J,this.pivotY=F$y,this},F$J.size=function(F$J,F$y){return this.width=F$J,this.height=F$y,this},F$J.scale=function(F$J,F$y,F$T){void 0===F$T&&(F$T=!1);var F$V=this.getStyle(),F$Z=F$V._tf;if(F$Z.scaleX!=F$J||F$Z.scaleY!=F$y){if(this.destroyed)return this;if(F$T){F$V.setScale(F$J,F$y),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$J,F$y),this._renderType|=4;var F$m=this._parent;F$m&&0===F$m._repaint&&(F$m._repaint=1,F$m.parentRepaint())}else this.scaleX=F$J,this.scaleY=F$y}return this},F$J.skew=function(F$J,F$y){return this.skewX=F$J,this.skewY=F$y,this},F$J.render=function(F$J,F$y,F$T){F$h.spriteCount++,F$k.renders[this._renderType]._fun(this,F$J,F$y+this._x,F$T+this._y),this._repaint=0},F$J.drawToCanvas=function(F$J,F$y,F$T,F$V){if(F$u.isConchNode){var F$Z=F$LJ.create("2D");return new F$x(F$J,F$y,F$Z).ctx.setCanvasType(1),this.conchModel.drawToCanvas(F$Z.source,F$T,F$V),F$Z}return F$v.drawToCanvas(this,this._renderType,F$J,F$y,F$T,F$V)},F$J.customRender=function(F$J,F$y,F$T){this._renderType|=1024},F$J._applyFilters=function(){var F$J;if(!F$u.isWebGL&&((F$J=this._$P.filters)&&!(F$J.length<1)))for(var F$y=0,F$T=F$J.length;F$y<F$T;F$y++)F$J[F$y].action.apply(this._$P.cacheCanvas)},F$J._isHaveGlowFilter=function(){var F$J,F$y=0;if(this.filters)for(F$y=0;F$y<this.filters.length;F$y++)if(8==this.filters[F$y].type)return!0;for(F$y=0,F$J=this._childs.length;F$y<F$J;F$y++)if(this._childs[F$y]._isHaveGlowFilter())return!0;return!1},F$J.localToGlobal=function(F$J,F$y){void 0===F$y&&(F$y=!1),!0===F$y&&(F$J=new F$q(F$J.x,F$J.y));for(var F$T=this;F$T&&F$T!=F$a.stage;)F$J=F$T.toParentPoint(F$J),F$T=F$T.parent;return F$J},F$J.globalToLocal=function(F$J,F$y){void 0===F$y&&(F$y=!1),F$y&&(F$J=new F$q(F$J.x,F$J.y));for(var F$T=this,F$V=[];F$T&&F$T!=F$a.stage;)F$V.push(F$T),F$T=F$T.parent;for(var F$Z=F$V.length-1;0<=F$Z;)F$J=(F$T=F$V[F$Z]).fromParentPoint(F$J),F$Z--;return F$J},F$J.toParentPoint=function(F$J){if(!F$J)return F$J;F$J.x-=this.pivotX,F$J.y-=this.pivotY,this.transform&&this._transform.transformPoint(F$J),F$J.x+=this._x,F$J.y+=this._y;var F$y=this._style.scrollRect;return F$y&&(F$J.x-=F$y.x,F$J.y-=F$y.y),F$J},F$J.fromParentPoint=function(F$J){if(!F$J)return F$J;F$J.x-=this._x,F$J.y-=this._y;var F$y=this._style.scrollRect;return F$y&&(F$J.x+=F$y.x,F$J.y+=F$y.y),this.transform&&this._transform.invertTransformPoint(F$J),F$J.x+=this.pivotX,F$J.y+=this.pivotY,F$J},F$J.on=function(F$J,F$y,F$T,F$V){return 1!==this._mouseEnableState&&this.isMouseEvent(F$J)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(F$J,F$y,F$T,F$V,!1)):F$Z.prototype.on.call(this,F$J,F$y,F$T,F$V)},F$J.once=function(F$J,F$y,F$T,F$V){return 1!==this._mouseEnableState&&this.isMouseEvent(F$J)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(F$J,F$y,F$T,F$V,!0)):F$Z.prototype.once.call(this,F$J,F$y,F$T,F$V)},F$J._$2__onDisplay=function(){if(1!==this._mouseEnableState){var F$J=this;for(F$J=F$J.parent;F$J&&1!==F$J._mouseEnableState&&!F$J._getBit(2);)F$J.mouseEnabled=!0,F$J._setBit(2,!0),F$J=F$J.parent}},F$J.loadImage=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=this;return void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0),this.graphics.loadImage(F$J,F$y,F$T,F$V,F$Z,function(F$J){F$R.destroyed||(F$R.size(F$y+(F$V||F$J.width),F$T+(F$Z||F$J.height)),F$R.repaint(),F$m&&F$m.runWith(F$J))}),this},F$J.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},F$J._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},F$J._childChanged=function(F$J){this._childs.length?this._renderType|=2048:this._renderType&=-2049,F$J&&this._get$P("hasZorder")&&F$a.timer.callLater(this,this.updateZOrder),this.repaint()},F$J.parentRepaint=function(){var F$J=this._parent;F$J&&0===F$J._repaint&&(F$J._repaint=1,F$J.parentRepaint())},F$J.startDrag=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){void 0===F$y&&(F$y=!1),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=300),void 0===F$m&&(F$m=!1),void 0===F$R&&(F$R=.92),this._$P.dragging||this._set$P("dragging",new F$d),this._$P.dragging.start(this,F$J,F$y,F$T,F$V,F$Z,F$m,F$R)},F$J.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},F$J._releaseMem=function(){if(this._$P){var F$J=this._$P.cacheCanvas;F$J&&F$J.ctx&&(F$b.recover("RenderContext",F$J.ctx),F$J.ctx.canvas.size(0,0),F$J.ctx=null);var F$y=this._$P._filterCache;F$y&&(F$y.destroy(),F$y.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},F$J._setDisplay=function(F$J){F$J||this._releaseMem(),F$Z.prototype._setDisplay.call(this,F$J)},F$J.hitTestPoint=function(F$J,F$y){var F$T=this.globalToLocal(F$q.TEMP.setTo(F$J,F$y));return F$J=F$T.x,F$y=F$T.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?F$r.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(F$J,F$y)},F$J.getMousePoint=function(){return this.globalToLocal(F$q.TEMP.setTo(F$a.stage.mouseX,F$a.stage.mouseY))},F$J._getWords=function(){return null},F$J._addChildsToLayout=function(F$J){var F$y=this._getWords();if(null==F$y&&0==this._childs.length)return!1;if(F$y)for(var F$T=0,F$V=F$y.length;F$T<F$V;F$T++)F$J.push(F$y[F$T]);F$T=0;for(var F$Z=this._childs.length;F$T<F$Z;++F$T){var F$m=this._childs[F$T];F$m._style._enableLayout()&&F$m._addToLayout(F$J)}return!0},F$J._addToLayout=function(F$J){this._style.absolute||(this._style.block?F$J.push(this):this._addChildsToLayout(F$J)&&(this.x=this.y=0))},F$J._isChar=function(){return!1},F$J._getCSSStyle=function(){return this._style.getCSSStyle()},F$J._setAttributes=function(F$J,F$y){switch(F$J){case"x":this.x=parseFloat(F$y);break;case"y":this.y=parseFloat(F$y);break;case"width":this.width=parseFloat(F$y);break;case"height":this.height=parseFloat(F$y);break;default:this[F$J]=F$y}},F$J._layoutLater=function(){this.parent&&this.parent._layoutLater()},F$B(0,F$J,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(F$J){this._optimizeScrollRect!=F$J&&(this._optimizeScrollRect=F$J,this.conchModel&&this.conchModel.optimizeScrollRect(F$J))}),F$B(0,F$J,"customRenderEnable",null,function(F$J){if(F$J&&(this._renderType|=1024,F$u.isConchNode)){F$T.CustomList.push(this);var F$y=new F$LJ("2d");F$y._setContext(new CanvasRenderingContext2D),this.customContext=new F$x(0,0,F$y),F$y.context.setCanvasType&&F$y.context.setCanvasType(2),this.conchModel.custom(F$y.context)}}),F$B(0,F$J,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(F$J){this.cacheAs=F$J?this._$P.hasFilter?"none":"normal":"none"}),F$B(0,F$J,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(F$J){var F$y=this._$P.cacheCanvas;if(F$J!==(F$y?F$y.type:"none")){if("none"!==F$J)this._getBit(1)||this._setUpNoticeType(1),F$y||(F$y=this._set$P("cacheCanvas",F$b.getItemByClass("cacheCanvas",Object))),F$y.type=F$J,F$y.reCache=!0,this._renderType|=16,"bitmap"==F$J&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(F$y){var F$T=F$y;F$T&&F$T.ctx&&(F$b.recover("RenderContext",F$T.ctx),F$T.ctx.canvas.size(0,0),F$T.ctx=null),F$b.recover("cacheCanvas",F$y)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),F$B(0,F$J,"zOrder",function(){return this._zOrder},function(F$J){this._zOrder!=F$J&&(this._zOrder=F$J,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(F$J),this._parent&&(F$J&&this._parent._set$P("hasZorder",!0),F$a.timer.callLater(this._parent,this.updateZOrder)))}),F$B(0,F$J,"rotation",function(){return this._style._tf.rotate},function(F$J){var F$y=this.getStyle();if(F$y._tf.rotate!==F$J){F$y.setRotate(F$J),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(F$J),this._renderType|=4;var F$T=this._parent;F$T&&0===F$T._repaint&&(F$T._repaint=1,F$T.parentRepaint())}}),F$B(0,F$J,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(F$J){this._width!==F$J&&(this._width=F$J,this.conchModel&&this.conchModel.size(F$J,this._height),this.repaint())}),F$B(0,F$J,"x",function(){return this._x},function(F$J){if(this._x!==F$J){if(this.destroyed)return;this._x=F$J,this.conchModel&&this.conchModel.pos(F$J,this._y);var F$y=this._parent;F$y&&0===F$y._repaint&&(F$y._repaint=1,F$y.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),F$B(0,F$J,"globalScaleY",function(){for(var F$J=1,F$y=this;F$y&&F$y!==F$a.stage;)F$J*=F$y.scaleY,F$y=F$y.parent;return F$J}),F$B(0,F$J,"hitArea",function(){return this._$P.hitArea},function(F$J){this._set$P("hitArea",F$J)}),F$B(0,F$J,"staticCache",function(){return this._$P.staticCache},function(F$J){this._set$P("staticCache",F$J),F$J||this.reCache()}),F$B(0,F$J,"texture",function(){return this._texture},function(F$J){this._texture!=F$J&&(this._texture=F$J,this.graphics.cleanByTexture(F$J,0,0))}),F$B(0,F$J,"y",function(){return this._y},function(F$J){if(this._y!==F$J){if(this.destroyed)return;this._y=F$J,this.conchModel&&this.conchModel.pos(this._x,F$J);var F$y=this._parent;F$y&&0===F$y._repaint&&(F$y._repaint=1,F$y.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),F$B(0,F$J,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(F$J){this._height!==F$J&&(this._height=F$J,this.conchModel&&this.conchModel.size(this._width,F$J),this.repaint())}),F$B(0,F$J,"blendMode",function(){return this._style.blendMode},function(F$J){this.getStyle().blendMode=F$J,this.conchModel&&this.conchModel.blendMode(F$J),F$J&&"source-over"!=F$J?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),F$B(0,F$J,"scaleX",function(){return this._style._tf.scaleX},function(F$J){var F$y=this.getStyle();if(F$y._tf.scaleX!==F$J){F$y.setScaleX(F$J),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$J,F$y._tf.scaleY),this._renderType|=4;var F$T=this._parent;F$T&&0===F$T._repaint&&(F$T._repaint=1,F$T.parentRepaint())}}),F$B(0,F$J,"scaleY",function(){return this._style._tf.scaleY},function(F$J){var F$y=this.getStyle();if(F$y._tf.scaleY!==F$J){F$y.setScaleY(F$J),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$y._tf.scaleX,F$J),this._renderType|=4;var F$T=this._parent;F$T&&0===F$T._repaint&&(F$T._repaint=1,F$T.parentRepaint())}}),F$B(0,F$J,"stage",function(){return F$a.stage}),F$B(0,F$J,"skewX",function(){return this._style._tf.skewX},function(F$J){var F$y=this.getStyle();if(F$y._tf.skewX!==F$J){F$y.setSkewX(F$J),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(F$J,F$y._tf.skewY),this._renderType|=4;var F$T=this._parent;F$T&&0===F$T._repaint&&(F$T._repaint=1,F$T.parentRepaint())}}),F$B(0,F$J,"scrollRect",function(){return this._style.scrollRect},function(F$J){this.getStyle().scrollRect=F$J,this.repaint(),F$J?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(F$J.x,F$J.y,F$J.width,F$J.height)):(this._renderType&=-129,this.conchModel&&(F$T.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),F$B(0,F$J,"skewY",function(){return this._style._tf.skewY},function(F$J){var F$y=this.getStyle();if(F$y._tf.skewY!==F$J){F$y.setSkewY(F$J),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(F$y._tf.skewX,F$J),this._renderType|=4;var F$T=this._parent;F$T&&0===F$T._repaint&&(F$T._repaint=1,F$T.parentRepaint())}}),F$B(0,F$J,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(F$J){this._tfChanged=!1,(this._transform=F$J)&&(this._x=F$J.tx,this._y=F$J.ty,F$J.tx=F$J.ty=0,this.conchModel&&this.conchModel.transform(F$J.a,F$J.b,F$J.c,F$J.d,this._x,this._y)),F$J?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),F$B(0,F$J,"pivotX",function(){return this._style._tf.translateX},function(F$J){this.getStyle().setTranslateX(F$J),this.conchModel&&this.conchModel.pivot(F$J,this._style._tf.translateY),this.repaint()}),F$B(0,F$J,"pivotY",function(){return this._style._tf.translateY},function(F$J){this.getStyle().setTranslateY(F$J),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,F$J),this.repaint()}),F$B(0,F$J,"alpha",function(){return this._style.alpha},function(F$J){this._style&&this._style.alpha!==F$J&&(F$J=F$J<0?0:1<F$J?1:F$J,this.getStyle().alpha=F$J,this.conchModel&&this.conchModel.alpha(F$J),1!==F$J?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),F$B(0,F$J,"visible",function(){return this._style.visible},function(F$J){this._style&&this._style.visible!==F$J&&(this.getStyle().visible=F$J,this.conchModel&&this.conchModel.visible(F$J),this.parentRepaint())}),F$B(0,F$J,"graphics",function(){return this._graphics||(this.graphics=F$v.createGraphics())},function(F$J){this._graphics&&(this._graphics._sp=null),(this._graphics=F$J)?(this._renderType&=-2,this._renderType|=512,(F$J._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(F$T.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),F$B(0,F$J,"filters",function(){return this._$P.filters},function(F$J){F$J&&0===F$J.length&&(F$J=null),this._$P.filters!=F$J&&(this._set$P("filters",F$J?F$J.slice():null),F$u.isConchApp&&(this.conchModel&&(F$T.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),F$u.isWebGL&&(F$J&&F$J.length?this._renderType|=32:this._renderType&=-33),F$J&&0<F$J.length?(this._getBit(1)||this._setUpNoticeType(1),F$u.isWebGL&&1==F$J.length&&F$J[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(F$u.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),F$B(0,F$J,"parent",F$Z.prototype._$get_parent,function(F$J){F$a.superSet(F$JJ,this,"parent",F$J),F$J&&this._getBit(2)&&this._$2__onDisplay()}),F$B(0,F$J,"mask",function(){return this._$P._mask},function(F$J){F$J&&this.mask&&this.mask._$P.maskParent||(F$J?(this.cacheAs="bitmap",this._set$P("_mask",F$J),F$J._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",F$J),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(F$J?F$J.conchModel:null),this._renderType|=64,this.parentRepaint())}),F$B(0,F$J,"mouseEnabled",function(){return 1<this._mouseEnableState},function(F$J){this._mouseEnableState=F$J?2:1}),F$B(0,F$J,"globalScaleX",function(){for(var F$J=1,F$y=this;F$y&&F$y!==F$a.stage;)F$J*=F$y.scaleX,F$y=F$y.parent;return F$J}),F$B(0,F$J,"mouseX",function(){return this.getMousePoint().x}),F$B(0,F$J,"mouseY",function(){return this.getMousePoint().y}),F$T.fromImage=function(F$J){return(new F$T).loadImage(F$J)},F$T._cachePool=[],F$T.CustomList=[],F$K(F$T,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=F$R.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),F$T}(F$JJ),F$MJ=function(F$J){function F$y(F$J){this._audio=null,this._onEnd=null,this._resumePlay=null,F$y.__super.call(this),this._onEnd=F$g.bind(this.__onEnd,this),this._resumePlay=F$g.bind(this.__resumePlay,this),F$J.addEventListener("ended",this._onEnd),this._audio=F$J}F$$(F$y,"laya.media.h5audio.AudioSoundChannel",F$VJ);var F$T=F$y.prototype;return F$T.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(F$a.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},F$T.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,F$f.container.appendChild(this._audio),this._audio.play()}catch(F$J){this.event("error")}},F$T.play=function(F$J){this.isStopped=!1;try{this._audio.playbackRate=F$t.playbackRate,this._audio.currentTime=this.startTime}catch(F$J){return void this._audio.addEventListener("canplay",this._resumePlay)}F$t.addChannel(this),F$f.container.appendChild(this._audio),!F$J&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},F$T.stop=function(){this.isStopped=!0,F$t.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&F$u.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),F$f.onIE||this._audio!=F$TJ._musicAudio&&F$b.recover("audio:"+this.url,this._audio),F$f.removeElement(this._audio),this._audio=null)},F$T.pause=function(){this.isStopped=!0,F$t.removeChannel(this),"pause"in this._audio&&this._audio.pause()},F$T.resume=function(){this._audio&&(this.isStopped=!1,F$t.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},F$B(0,F$T,"position",function(){return this._audio?this._audio.currentTime:0}),F$B(0,F$T,"duration",function(){return this._audio?this._audio.duration:0}),F$B(0,F$T,"volume",function(){return this._audio?this._audio.volume:1},function(F$J){this._audio&&(this._audio.volume=F$J)}),F$y}(),F$GJ=function(F$J){function F$y(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=F$mJ.ctx,F$y.__super.call(this),this._onPlayEnd=F$g.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}F$$(F$y,"laya.media.webaudio.WebAudioSoundChannel",F$VJ);var F$T=F$y.prototype;return F$T.play=function(F$J){if(F$t.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var F$y=this.context,F$T=this.gain,F$V=F$y.createBufferSource();(this.bufferSource=F$V).buffer=this.audioBuffer,F$V.connect(F$T),F$T&&F$T.disconnect(),F$T.connect(F$y.destination),F$V.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=F$f.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(F$V.loop=!0),F$V.playbackRate.setTargetAtTime?F$V.playbackRate.setTargetAtTime(F$t.playbackRate,this.context.currentTime,.1):F$V.playbackRate.value=F$t.playbackRate,F$V.start(0,this.startTime),!F$J&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},F$T.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(F$a.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},F$T._clearBufferSource=function(){if(this.bufferSource){var F$J=this.bufferSource;F$J.stop?F$J.stop(0):F$J.noteOff(0),F$J.disconnect(0),F$J.onended=null,F$y._tryCleanFailed||this._tryClearBuffer(F$J),this.bufferSource=null}},F$T._tryClearBuffer=function(F$J){try{F$J.buffer=null}catch(F$J){F$y._tryCleanFailed=!0}},F$T.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,F$t.removeChannel(this),this.startHandler=null,this.completeHandler=null},F$T.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,F$t.removeChannel(this)},F$T.resume=function(){this.startTime=this._pauseTime,this.play(!1)},F$B(0,F$T,"position",function(){return this.bufferSource?(F$f.now()-this._startTime)/1e3+this.startTime:0}),F$B(0,F$T,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),F$B(0,F$T,"volume",function(){return this._volume},function(F$J){this.isStopped||(this._volume=F$J,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(F$J,this.context.currentTime,.1):this.gain.gain.value=F$J)}),F$y._tryCleanFailed=!1,F$y}(),F$BJ=function(F$J){function F$y(){F$y.__super.call(this),this._w=0,this._h=0}F$$(F$y,"laya.resource.Bitmap",F$AJ);var F$T=F$y.prototype;return F$B(0,F$T,"width",function(){return this._w}),F$B(0,F$T,"height",function(){return this._h}),F$B(0,F$T,"source",function(){return this._source}),F$y}(),F$oJ=function(F$y){function F$J(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,F$J.__super.call(this),this._interval=F$V.animationInterval,this._setUpNoticeType(1)}F$$(F$J,"laya.display.AnimationPlayerBase",F$y);var F$T=F$J.prototype;return F$T.play=function(F$J,F$y,F$T,F$V){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=!0),void 0===F$T&&(F$T=""),void 0===F$V&&(F$V=!0),this._isPlaying=!0,this.index="string"==typeof F$J?this._getFrameByLabel(F$J):F$J,this.loop=F$y,this._actionName=F$T,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},F$T._getFrameByLabel=function(F$J){var F$y=0;for(F$y=0;F$y<this._count;F$y++)if(this._labels[F$y]&&0<=this._labels[F$y].indexOf(F$J))return F$y;return 0},F$T._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},F$T._setControlNode=function(F$J){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=F$J)&&F$J!=this&&(F$J.on("display",this,this._checkResumePlaying),F$J.on("undisplay",this,this._checkResumePlaying))},F$T._setDisplay=function(F$J){F$y.prototype._setDisplay.call(this,F$J),this._checkResumePlaying()},F$T._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},F$T.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},F$T.addLabel=function(F$J,F$y){this._labels||(this._labels={}),this._labels[F$y]||(this._labels[F$y]=[]),this._labels[F$y].push(F$J)},F$T.removeLabel=function(F$J){if(F$J){if(this._labels)for(var F$y in this._labels)this._removeLabelFromLabelList(this._labels[F$y],F$J)}else this._labels=null},F$T._removeLabelFromLabelList=function(F$J,F$y){if(F$J)for(var F$T=F$J.length-1;0<=F$T;F$T--)F$J[F$T]==F$y&&F$J.splice(F$T,1)},F$T.gotoAndStop=function(F$J){this.index="string"==typeof F$J?this._getFrameByLabel(F$J):F$J,this.stop()},F$T._displayToIndex=function(F$J){},F$T.clear=function(){this.stop(),this._labels=null},F$B(0,F$T,"interval",function(){return this._interval},function(F$J){this._interval!=F$J&&(this._frameRateChanged=!0,this._interval=F$J,this._isPlaying&&0<F$J&&this.timerLoop(F$J,this,this._frameLoop,null,!0,!0))}),F$B(0,F$T,"isPlaying",function(){return this._isPlaying}),F$B(0,F$T,"index",function(){return this._index},function(F$J){if(this._index=F$J,this._displayToIndex(F$J),this._labels&&this._labels[F$J])for(var F$y=this._labels[F$J],F$T=0,F$V=F$y.length;F$T<F$V;F$T++)this.event("label",F$y[F$T])}),F$B(0,F$T,"count",function(){return this._count}),F$J.WRAP_POSITIVE=0,F$J.WRAP_REVERSE=1,F$J.WRAP_PINGPONG=2,F$J}(F$eJ),F$sJ=function(F$y){function F$G(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,F$G.__super.call(this),this.overflow=F$G.VISIBLE,this._style=new F$yJ(this),this._style.wordWrap=!1}F$$(F$G,"laya.display.Text",F$y);var F$J=F$G.prototype;return F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._lines=null,this._words&&(this._words.length=0,this._words=null)},F$J._getBoundPointsM=function(F$J){void 0===F$J&&(F$J=!1);var F$y=F$r.TEMP;return F$y.setTo(0,0,this.width,this.height),F$y._getBoundPoints()},F$J.getGraphicBounds=function(F$J){void 0===F$J&&(F$J=!1);var F$y=F$r.TEMP;return F$y.setTo(0,0,this.width,this.height),F$y},F$J._getCSSStyle=function(){return this._style},F$J.lang=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$){if(F$J=F$G.langPacks&&F$G.langPacks[F$J]?F$G.langPacks[F$J]:F$J,arguments.length<2)this._text=F$J;else{for(var F$e=0,F$M=arguments.length;F$e<F$M;F$e++)F$J=F$J.replace("{"+F$e+"}",arguments[F$e+1]);this._text=F$J}},F$J._isPassWordMode=function(){var F$J=this._style.password;return"prompt"in this&&this.prompt==this._text&&(F$J=!1),F$J},F$J._getPassWordTxt=function(F$J){var F$y;F$y="";for(var F$T=F$J.length;0<F$T;F$T--)F$y+="●";return F$y},F$J.renderText=function(F$J,F$y){var F$T=this.graphics;F$T.clear(!0);var F$V=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(F$f.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);F$f.context.font=F$V;var F$Z=this.padding,F$m=F$Z[3],F$R="left",F$n=this._lines,F$K=this.leading+this._charSize.height,F$A=this._currBitmapFont;F$A&&(F$K=this.leading+F$A.getMaxHeight());var F$$=F$Z[0];if(!F$A&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(F$R="right",F$m=this._width-F$Z[1]):"center"==this.align&&(F$R="center",F$m=.5*this._width+F$Z[3]-F$Z[1])),0<this._height){var F$e=this._textHeight>this._height?"top":this.valign;"middle"===F$e?F$$=.5*(this._height-F$y*F$K)+F$Z[0]-F$Z[2]:"bottom"===F$e&&(F$$=this._height-F$y*F$K-F$Z[2])}var F$M=this._style;if(F$A&&F$A.autoScaleSize)var F$G=F$A.fontSize/this.fontSize;if(this._clipPoint)if(F$T.save(),F$A&&F$A.autoScaleSize){var F$B=0,F$o=0;F$B=this._width?this._width-F$Z[3]-F$Z[1]:this._textWidth,F$o=this._height?this._height-F$Z[0]-F$Z[2]:this._textHeight,F$B*=F$G,F$o*=F$G,F$T.clipRect(F$Z[3],F$Z[0],F$B,F$o)}else F$T.clipRect(F$Z[3],F$Z[0],this._width?this._width-F$Z[3]-F$Z[1]:this._textWidth,this._height?this._height-F$Z[0]-F$Z[2]:this._textHeight);var F$s=F$M.password;"prompt"in this&&this.prompt==this._text&&(F$s=!1);for(var F$E=0,F$O=0,F$L=Math.min(this._lines.length,F$y+F$J)||1,F$H=F$J;F$H<F$L;F$H++){var F$P,F$l=F$n[F$H];if(F$s){var F$a=F$l.length;F$l="";for(var F$q=F$a;0<F$q;F$q--)F$l+="●"}if(F$E=F$m-(this._clipPoint?this._clipPoint.x:0),F$O=F$$+F$K*F$H-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(F$R,F$E,F$O,F$H),F$A){var F$r=this.width;F$A.autoScaleSize&&(F$r=this.width*F$G),F$A.drawText(F$l,this,F$E,F$O,this.align,F$r)}else F$u.isWebGL?(this._words||(this._words=[]),(F$P=this._words.length>F$H-F$J?this._words[F$H-F$J]:new F$z).setText(F$l)):F$P=F$l,F$M.stroke?F$T.fillBorderText(F$P,F$E,F$O,F$V,this.color,F$M.strokeColor,F$M.stroke,F$R):F$T.fillText(F$P,F$E,F$O,F$V,this.color,F$R)}if(F$A&&F$A.autoScaleSize){var F$D=1/F$G;this.scale(F$D,F$D)}this._clipPoint&&F$T.restore(),this._startX=F$m,this._startY=F$$},F$J.drawUnderline=function(F$J,F$y,F$T,F$V){var F$Z=this._lineWidths[F$V];switch(F$J){case"center":F$y-=F$Z/2;break;case"right":F$y-=F$Z}F$T+=this._charSize.height,this._graphics.drawLine(F$y,F$T,F$y+F$Z,F$T,this.underlineColor||this.color,1)},F$J.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);F$f.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new F$q(0,0)):this._clipPoint=null;var F$J=this._lines.length;if(this.overflow!=F$G.VISIBLE){var F$y=this.overflow==F$G.HIDDEN?Math.floor:Math.ceil;F$J=Math.min(F$J,F$y((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var F$T=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(F$T,F$J),this.repaint()},F$J.evalTextSize=function(){var F$J,F$y=NaN;F$J=Math.max.apply(this,this._lineWidths),F$y=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],F$J==this._textWidth&&F$y==this._textHeight||(this._textWidth=F$J,this._textHeight=F$y,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},F$J.checkEnabledViewportOrNot=function(){return this.overflow==F$G.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},F$J.changeText=function(F$J){this._text!==F$J&&(this.lang(F$J+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},F$J.parseLines=function(F$J){var F$y=this.wordWrap||this.overflow==F$G.HIDDEN;if(F$y)var F$T=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var F$V=F$g.contextMeasureText(F$G._testWord);F$u.isConchApp&&0===F$V.width&&0===F$V.height&&(F$V=F$g.contextMeasureText("W")),this._charSize.width=F$V.width,this._charSize.height=F$V.height||this.fontSize}for(var F$Z=F$J.replace(/\r\n/g,"\n").split("\n"),F$m=0,F$R=F$Z.length;F$m<F$R;F$m++){var F$n=F$Z[F$m];F$y?this.parseLine(F$n,F$T):(this._lineWidths.push(this.getTextWidth(F$n)),this._lines.push(F$n))}},F$J.parseLine=function(F$J,F$y){F$f.context;var F$T,F$V=this._lines,F$Z=0,F$m=NaN,F$R=NaN,F$n=0;if((F$m=this.getTextWidth(F$J))<=F$y)return F$V.push(F$J),void this._lineWidths.push(F$m);F$m=this._charSize.width,0==(F$Z=Math.floor(F$y/F$m))&&(F$Z=1),F$R=F$m=this.getTextWidth(F$J.substring(0,F$Z));for(var F$K=F$Z,F$A=F$J.length;F$K<F$A;F$K++)if(F$y<(F$R+=F$m=this.getTextWidth(F$J.charAt(F$K))))if(this.wordWrap){var F$$=F$J.substring(F$n,F$K);if(F$$.charCodeAt(F$$.length-1)<255?(F$T=/(?:\w|-)+$/.exec(F$$))&&(F$K=F$T.index+F$n,0==F$T.index?F$K+=F$$.length:F$$=F$J.substring(F$n,F$K)):F$G.RightToLeft&&(F$T=/([\u0600-\u06FF])+$/.exec(F$$))&&(F$K=F$T.index+F$n,0==F$T.index?F$K+=F$$.length:F$$=F$J.substring(F$n,F$K)),F$V.push(F$$),this._lineWidths.push(F$R-F$m),!((F$n=F$K)+F$Z<F$A)){F$V.push(F$J.substring(F$n,F$A)),this._lineWidths.push(this.getTextWidth(F$V[F$V.length-1])),F$n=-1;break}F$K+=F$Z,F$R=F$m=this.getTextWidth(F$J.substring(F$n,F$K)),F$K--}else if(this.overflow==F$G.HIDDEN)return F$V.push(F$J.substring(0,F$K)),void this._lineWidths.push(this.getTextWidth(F$V[F$V.length-1]));this.wordWrap&&-1!=F$n&&(F$V.push(F$J.substring(F$n,F$A)),this._lineWidths.push(this.getTextWidth(F$V[F$V.length-1])))},F$J.getTextWidth=function(F$J){return this._currBitmapFont?this._currBitmapFont.getTextWidth(F$J):F$g.contextMeasureText(F$J).width},F$J.getWordWrapWidth=function(){var F$J=this.padding,F$y=NaN;return(F$y=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(F$y=this.wordWrap?100:F$f.width),F$y<=0&&(F$y=100),F$y-F$J[3]-F$J[1]},F$J.getCharPoint=function(F$J,F$y){this._isChanged&&F$a.timer.runCallLater(this,this.typeset);for(var F$T=0,F$V=this._lines,F$Z=0,F$m=0,F$R=F$V.length;F$m<F$R;F$m++){if(F$J<(F$T+=F$V[F$m].length)){var F$n=F$m;break}F$Z=F$T}var F$K=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;F$f.context.font=F$K;var F$A=this.getTextWidth(this._text.substring(F$Z,F$J));return(F$y||new F$q).setTo(this._startX+F$A-(this._clipPoint?this._clipPoint.x:0),this._startY+F$n*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},F$B(0,F$J,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(F$J){F$J!=this._width&&(F$a.superSet(F$eJ,this,"width",F$J),this.isChanged=!0)}),F$B(0,F$J,"textWidth",function(){return this._isChanged&&F$a.timer.runCallLater(this,this.typeset),this._textWidth}),F$B(0,F$J,"height",function(){return this._height?this._height:this.textHeight},function(F$J){F$J!=this._height&&(F$a.superSet(F$eJ,this,"height",F$J),this.isChanged=!0)}),F$B(0,F$J,"textHeight",function(){return this._isChanged&&F$a.timer.runCallLater(this,this.typeset),this._textHeight}),F$B(0,F$J,"padding",function(){return this._getCSSStyle().padding},function(F$J){this._getCSSStyle().padding=F$J,this.isChanged=!0}),F$B(0,F$J,"bold",function(){return this._getCSSStyle().bold},function(F$J){this._getCSSStyle().bold=F$J,this.isChanged=!0}),F$B(0,F$J,"text",function(){return this._text||""},function(F$J){this._text!==F$J&&(this.lang(F$J+""),this.isChanged=!0,this.event("change"))}),F$B(0,F$J,"color",function(){return this._getCSSStyle().color},function(F$J){this._getCSSStyle().color!=F$J&&(this._getCSSStyle().color=F$J,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),F$B(0,F$J,"font",function(){return this._getCSSStyle().fontFamily},function(F$J){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),F$G._bitmapFonts&&F$G._bitmapFonts[F$J]&&(this._currBitmapFont=F$G._bitmapFonts[F$J]),this._getCSSStyle().fontFamily=F$J,this.isChanged=!0}),F$B(0,F$J,"fontSize",function(){return this._getCSSStyle().fontSize},function(F$J){this._getCSSStyle().fontSize=F$J,this.isChanged=!0}),F$B(0,F$J,"italic",function(){return this._getCSSStyle().italic},function(F$J){this._getCSSStyle().italic=F$J,this.isChanged=!0}),F$B(0,F$J,"align",function(){return this._getCSSStyle().align},function(F$J){this._getCSSStyle().align=F$J,this.isChanged=!0}),F$B(0,F$J,"valign",function(){return this._getCSSStyle().valign},function(F$J){this._getCSSStyle().valign=F$J,this.isChanged=!0}),F$B(0,F$J,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(F$J){this._getCSSStyle().wordWrap=F$J,this.isChanged=!0}),F$B(0,F$J,"leading",function(){return this._getCSSStyle().leading},function(F$J){this._getCSSStyle().leading=F$J,this.isChanged=!0}),F$B(0,F$J,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(F$J){this._getCSSStyle().backgroundColor=F$J,this.isChanged=!0}),F$B(0,F$J,"borderColor",function(){return this._getCSSStyle().borderColor},function(F$J){this._getCSSStyle().borderColor=F$J,this.isChanged=!0}),F$B(0,F$J,"stroke",function(){return this._getCSSStyle().stroke},function(F$J){this._getCSSStyle().stroke=F$J,this.isChanged=!0}),F$B(0,F$J,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(F$J){this._getCSSStyle().strokeColor=F$J,this.isChanged=!0}),F$B(0,F$J,"isChanged",null,function(F$J){this._isChanged!==F$J&&(this._isChanged=F$J)&&F$a.timer.callLater(this,this.typeset)}),F$B(0,F$J,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(F$J){if(!(this.overflow!=F$G.SCROLL||this.textWidth<this._width)&&this._clipPoint){F$J=F$J<this.padding[3]?this.padding[3]:F$J;var F$y=this._textWidth-this._width;F$J=F$y<F$J?F$y:F$J;var F$T=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=F$J,this.renderText(this._lastVisibleLineIndex,F$T)}}),F$B(0,F$J,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(F$J){if(!(this.overflow!=F$G.SCROLL||this.textHeight<this._height)&&this._clipPoint){F$J=F$J<this.padding[0]?this.padding[0]:F$J;var F$y=this._textHeight-this._height,F$T=(F$J=F$y<F$J?F$y:F$J)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=F$T;var F$V=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=F$J,this.renderText(F$T,F$V)}}),F$B(0,F$J,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),F$B(0,F$J,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),F$B(0,F$J,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),F$B(0,F$J,"underlineColor",function(){return this._underlineColor},function(F$J){this._underlineColor=F$J,this._isChanged=!0,this.typeset()}),F$G.registerBitmapFont=function(F$J,F$y){F$G._bitmapFonts||(F$G._bitmapFonts={}),F$G._bitmapFonts[F$J]=F$y},F$G.unregisterBitmapFont=function(F$J,F$y){if(void 0===F$y&&(F$y=!0),F$G._bitmapFonts&&F$G._bitmapFonts[F$J]){var F$T=F$G._bitmapFonts[F$J];F$y&&F$T.destroy(),delete F$G._bitmapFonts[F$J]}},F$G.setTextRightToLeft=function(){var F$J;(F$J=F$f.canvas.source.style).display="none",F$J.position="absolute",F$J.direction="rtl",F$u._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,F$f.document.body.appendChild(F$f.canvas.source)},F$G.supportFont=function(F$J){F$f.context.font="10px sans-serif";var F$y=F$g.contextMeasureText("abcji").width;F$f.context.font="10px "+F$J;var F$T=F$g.contextMeasureText("abcji").width;return console.log(F$y,F$T),F$y!==F$T},F$G._testWord="游",F$G.langPacks=null,F$G.VISIBLE="visible",F$G.SCROLL="scroll",F$G.HIDDEN="hidden",F$G.CharacterCache=!0,F$G.RightToLeft=!1,F$G._bitmapFonts=null,F$K(F$G,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),F$G}(F$eJ),F$EJ=function(F$e){function F$R(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",F$R.__super.call(this),this.offset=new F$q,this._canvasTransform=new F$Q,this._previousOrientation=F$f.window.orientation;var F$y=this;this.transform=F$Q.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var F$J=F$f.window,F$T=this;F$J.addEventListener("focus",function(){F$y._isFocused=!0,F$T.event("focus"),F$T.event("focuschange")}),F$J.addEventListener("blur",function(){F$y._isFocused=!1,F$T.event("blur"),F$T.event("focuschange"),F$T._isInputting()&&(F$PJ.inputElement.target.focus=!1)});var F$V="visibilityState",F$Z="visibilitychange",F$m=F$J.document;void 0!==F$m.hidden?(F$Z="visibilitychange",F$V="visibilityState"):void 0!==F$m.mozHidden?(F$Z="mozvisibilitychange",F$V="mozVisibilityState"):void 0!==F$m.msHidden?(F$Z="msvisibilitychange",F$V="msVisibilityState"):void 0!==F$m.webkitHidden&&(F$Z="webkitvisibilitychange",F$V="webkitVisibilityState"),F$J.document.addEventListener(F$Z,function(){"hidden"==F$f.document[F$V]?F$T._setStageVisible(!1):F$T._setStageVisible(!0)}),F$J.document.addEventListener("qbrowserVisibilityChange",function(F$J){F$T._setStageVisible(!F$J.hidden)}),F$J.addEventListener("resize",function(){var F$J=F$f.window.orientation;null!=F$J&&F$J!=F$y._previousOrientation&&F$T._isInputting()&&(F$PJ.inputElement.target.focus=!1),F$y._previousOrientation=F$J,F$T._isInputting()||F$T._resetCanvas()}),F$J.addEventListener("orientationchange",function(F$J){F$T._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),F$f.onMobile&&this.on("mousedown",this,this._onmouseMove)}F$$(F$R,"laya.display.Stage",F$e);var F$J=F$R.prototype;return F$J._setStageVisible=function(F$J){this._isVisibility!=F$J&&(this._isVisibility=F$J,this._isVisibility||this._isInputting()&&(F$PJ.inputElement.target.focus=!1),this.event("visibilitychange"))},F$J._isInputting=function(){return F$f.onMobile&&F$PJ.isInputting},F$J._changeCanvasSize=function(){this.setScreenSize(F$f.clientWidth*F$f.pixelRatio,F$f.clientHeight*F$f.pixelRatio)},F$J._resetCanvas=function(){if(this.screenAdaptationEnabled){var F$J=F$u._mainCanvas;F$J.source.style;F$J.size(1,1),F$a.timer.once(100,this,this._changeCanvasSize)}},F$J.setScreenSize=function(F$J,F$y){var F$T=!1;if("none"!==this._screenMode&&(F$T=(F$J/F$y<1?"vertical":"horizontal")!==this._screenMode)){var F$V=F$y;F$y=F$J,F$J=F$V}this.canvasRotation=F$T;var F$Z=F$u._mainCanvas,F$m=F$Z.source.style,F$R=this._canvasTransform.identity(),F$n=this._scaleMode,F$K=F$J/this.designWidth,F$A=F$y/this.designHeight,F$$=this.designWidth,F$e=this.designHeight,F$M=F$J,F$G=F$y,F$B=F$f.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,F$n){case"noscale":F$K=F$A=1,F$M=this.designWidth,F$G=this.designHeight;break;case"showall":F$K=F$A=Math.min(F$K,F$A),F$$=F$M=Math.round(this.designWidth*F$K),F$e=F$G=Math.round(this.designHeight*F$A);break;case"noborder":F$K=F$A=Math.max(F$K,F$A),F$M=Math.round(this.designWidth*F$K),F$G=Math.round(this.designHeight*F$A);break;case"full":F$K=F$A=1,this._width=F$$=F$J,this._height=F$e=F$y;break;case"fixedwidth":F$A=F$K,this._height=F$e=Math.round(F$y/F$K);break;case"fixedheight":F$K=F$A,this._width=F$$=Math.round(F$J/F$A);break;case"fixedauto":F$J/F$y<this.designWidth/this.designHeight?(F$A=F$K,this._height=F$e=Math.round(F$y/F$K)):(F$K=F$A,this._width=F$$=Math.round(F$J/F$A))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,F$$=F$$+1&2147483646,F$e=F$e+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),F$K*=this.scaleX,F$A*=this.scaleY,1===F$K&&1===F$A?this.transform.identity():(this.transform.a=this._formatData(F$K/(F$M/F$$)),this.transform.d=this._formatData(F$A/(F$G/F$e)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),F$Z.size(F$$,F$e),F$v.changeWebGLSize(F$$,F$e),F$R.scale(F$M/F$$/F$B,F$G/F$e/F$B),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(F$J-F$M)/F$B:this.offset.x=.5*(F$J-F$M)/F$B,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(F$y-F$G)/F$B:this.offset.y=.5*(F$y-F$G)/F$B,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),F$R.translate(this.offset.x,this.offset.y),this.canvasDegree=0,F$T&&("horizontal"===this._screenMode?(F$R.rotate(Math.PI/2),F$R.translate(F$y/F$B,0),this.canvasDegree=90):(F$R.rotate(-Math.PI/2),F$R.translate(0,F$J/F$B),this.canvasDegree=-90)),F$R.a=this._formatData(F$R.a),F$R.d=this._formatData(F$R.d),F$R.tx=this._formatData(F$R.tx),F$R.ty=this._formatData(F$R.ty),F$m.transformOrigin=F$m.webkitTransformOrigin=F$m.msTransformOrigin=F$m.mozTransformOrigin=F$m.oTransformOrigin="0px 0px 0px",F$m.transform=F$m.webkitTransform=F$m.msTransform=F$m.mozTransform=F$m.oTransform="matrix("+F$R.toString()+")",F$R.translate(parseInt(F$m.left)||0,parseInt(F$m.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},F$J._formatData=function(F$J){return Math.abs(F$J)<1e-6?0:Math.abs(1-F$J)<.001?0<F$J?1:-1:F$J},F$J.getMousePoint=function(){return F$q.TEMP.setTo(this.mouseX,this.mouseY)},F$J.repaint=function(){this._repaint=1},F$J.parentRepaint=function(){},F$J._loop=function(){return this.render(F$u.context,0,0),!0},F$J._onmouseMove=function(F$J){this._mouseMoveTime=F$f.now()},F$J.getTimeFromFrameStart=function(){return F$f.now()-this._frameStartTime},F$J.render=function(F$J,F$y,F$T){if("sleep"===this._frameRate&&!F$u.isConchApp){var F$V=F$f.now();if(!(1e3<=F$V-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(F$h.loopCount++,F$o.instance.runEvent(),F$a.timer._update()));this._frameStartTime=F$V}if(this._renderCount++,F$u.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=F$f.now();var F$Z="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),F$m=this._renderCount%2==0;if(F$h.renderSlow=!F$Z,F$Z||F$m||F$u.isConchApp){var F$R;F$h.loopCount++,F$o.instance.runEvent(),F$a.timer._update(),F$v.update3DLoop();var F$n=0,F$K=0;if(F$u.isConchNode)for(F$n=0,F$K=this._scenes.length;F$n<F$K;F$n++)(F$R=this._scenes[F$n])&&F$R._updateSceneConch();else for(F$n=0,F$K=this._scenes.length;F$n<F$K;F$n++)(F$R=this._scenes[F$n])&&F$R._updateScene();if(F$u.isConchNode){var F$A=F$eJ.CustomList;for(F$n=0,F$K=F$A.length;F$n<F$K;F$n++){var F$$=F$A[F$n];F$$.customRender(F$$.customContext,0,0)}return}}F$u.isConchNode||this.renderingEnabled&&(F$Z||!F$m||F$u.isConchWebGL)&&(F$u.isWebGL?F$u.WebGL.mainContext&&!F$u.WebGL.mainContext.isContextLost()&&(F$J.clear(),F$e.prototype.render.call(this,F$J,F$y,F$T),F$h._show&&F$h._sp&&F$h._sp.render(F$J,F$y,F$T),F$v.clear(this._bgColor),F$v.beginFlush(),F$J.flush(),F$v.endFinish(),F$N.instance&&F$N.getInstance().endDispose()):(F$v.clear(this._bgColor),F$e.prototype.render.call(this,F$J,F$y,F$T),F$h._show&&F$h._sp&&F$h._sp.render(F$J,F$y,F$T)))}else this._renderCount%5==0&&(F$h.loopCount++,F$o.instance.runEvent(),F$a.timer._update())},F$J._requestFullscreen=function(){var F$J=F$f.document.documentElement;F$J.requestFullscreen?F$J.requestFullscreen():F$J.mozRequestFullScreen?F$J.mozRequestFullScreen():F$J.webkitRequestFullscreen?F$J.webkitRequestFullscreen():F$J.msRequestFullscreen&&F$J.msRequestFullscreen()},F$J._fullScreenChanged=function(){F$a.stage.event("fullscreenchange")},F$J.exitFullscreen=function(){var F$J=F$f.document;F$J.exitFullscreen?F$J.exitFullscreen():F$J.mozCancelFullScreen?F$J.mozCancelFullScreen():F$J.webkitExitFullscreen&&F$J.webkitExitFullscreen()},F$B(0,F$J,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),F$B(0,F$J,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),F$B(0,F$J,"frameRate",function(){return this._frameRate},function(F$J){if(this._frameRate=F$J,F$u.isConchApp)switch(this._frameRate){case"slow":F$f.window.conch&&F$f.window.conchConfig.setSlowFrame&&F$f.window.conchConfig.setSlowFrame(!0);break;case"fast":F$f.window.conch&&F$f.window.conchConfig.setSlowFrame&&F$f.window.conchConfig.setSlowFrame(!1);break;case"mouse":F$f.window.conch&&F$f.window.conchConfig.setMouseFrame&&F$f.window.conchConfig.setMouseFrame(2e3);break;case"sleep":F$f.window.conch&&F$f.window.conchConfig.setLimitFPS&&F$f.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),F$B(0,F$J,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),F$B(0,F$J,"width",F$e.prototype._$get_width,function(F$J){this.designWidth=F$J,F$a.superSet(F$eJ,this,"width",F$J),F$a.timer.callLater(this,this._changeCanvasSize)}),F$B(0,F$J,"alignH",function(){return this._alignH},function(F$J){this._alignH=F$J,F$a.timer.callLater(this,this._changeCanvasSize)}),F$B(0,F$J,"isFocused",function(){return this._isFocused}),F$B(0,F$J,"height",F$e.prototype._$get_height,function(F$J){this.designHeight=F$J,F$a.superSet(F$eJ,this,"height",F$J),F$a.timer.callLater(this,this._changeCanvasSize)}),F$B(0,F$J,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||F$Q.create()},F$e.prototype._$set_transform),F$B(0,F$J,"isVisibility",function(){return this._isVisibility}),F$B(0,F$J,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),F$B(0,F$J,"scaleMode",function(){return this._scaleMode},function(F$J){this._scaleMode=F$J,F$a.timer.callLater(this,this._changeCanvasSize)}),F$B(0,F$J,"alignV",function(){return this._alignV},function(F$J){this._alignV=F$J,F$a.timer.callLater(this,this._changeCanvasSize)}),F$B(0,F$J,"bgColor",function(){return this._bgColor},function(F$J){this._bgColor=F$J,this.conchModel&&this.conchModel.bgColor(F$J),F$u.isWebGL&&(F$J?F$R._wgColor=F$U.create(F$J)._color:F$f.onMiniGame||(F$R._wgColor=null)),F$f.onLimixiu?F$R._wgColor=F$U.create(F$J)._color:F$u.canvas.style.background=F$J||"none"}),F$B(0,F$J,"mouseX",function(){return Math.round(F$o.instance.mouseX/this.clientScaleX)}),F$B(0,F$J,"mouseY",function(){return Math.round(F$o.instance.mouseY/this.clientScaleY)}),F$B(0,F$J,"screenMode",function(){return this._screenMode},function(F$J){this._screenMode=F$J}),F$B(0,F$J,"visible",F$e.prototype._$get_visible,function(F$J){this.visible!==F$J&&(F$a.superSet(F$eJ,this,"visible",F$J),F$u._mainCanvas.source.style.visibility=F$J?"visible":"hidden")}),F$B(0,F$J,"fullScreenEnabled",null,function(F$J){var F$y=F$f.document,F$T=F$u.canvas;F$J?(F$T.addEventListener("mousedown",this._requestFullscreen),F$T.addEventListener("touchstart",this._requestFullscreen),F$y.addEventListener("fullscreenchange",this._fullScreenChanged),F$y.addEventListener("mozfullscreenchange",this._fullScreenChanged),F$y.addEventListener("webkitfullscreenchange",this._fullScreenChanged),F$y.addEventListener("msfullscreenchange",this._fullScreenChanged)):(F$T.removeEventListener("mousedown",this._requestFullscreen),F$T.removeEventListener("touchstart",this._requestFullscreen),F$y.removeEventListener("fullscreenchange",this._fullScreenChanged),F$y.removeEventListener("mozfullscreenchange",this._fullScreenChanged),F$y.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),F$y.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),F$R.SCALE_NOSCALE="noscale",F$R.SCALE_EXACTFIT="exactfit",F$R.SCALE_SHOWALL="showall",F$R.SCALE_NOBORDER="noborder",F$R.SCALE_FULL="full",F$R.SCALE_FIXED_WIDTH="fixedwidth",F$R.SCALE_FIXED_HEIGHT="fixedheight",F$R.SCALE_FIXED_AUTO="fixedauto",F$R.ALIGN_LEFT="left",F$R.ALIGN_RIGHT="right",F$R.ALIGN_CENTER="center",F$R.ALIGN_TOP="top",F$R.ALIGN_MIDDLE="middle",F$R.ALIGN_BOTTOM="bottom",F$R.SCREEN_NONE="none",F$R.SCREEN_HORIZONTAL="horizontal",F$R.SCREEN_VERTICAL="vertical",F$R.FRAME_FAST="fast",F$R.FRAME_SLOW="slow",F$R.FRAME_MOUSE="mouse",F$R.FRAME_SLEEP="sleep",F$R.FRAME_MOUSE_THREDHOLD=2e3,F$K(F$R,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),F$R}(F$eJ),F$OJ=(function(F$J){function F$y(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,F$y.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}F$$(F$y,"laya.media.SoundNode",F$eJ);var F$T=F$y.prototype;F$T._onParentChange=function(){this.target=this.parent},F$T.play=function(F$J,F$y){void 0===F$J&&(F$J=1),isNaN(F$J)&&(F$J=1),this.url&&(this.stop(),this._channel=F$t.playSound(this.url,F$J,null,F$y))},F$T.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},F$T._setPlayAction=function(F$J,F$y,F$T,F$V){void 0===F$V&&(F$V=!0),this[F$T]&&F$J&&(F$V?F$J.on(F$y,this,this[F$T]):F$J.off(F$y,this,this[F$T]))},F$T._setPlayActions=function(F$J,F$y,F$T,F$V){if(void 0===F$V&&(F$V=!0),F$J&&F$y){var F$Z,F$m=F$y.split(","),F$R=0;for(F$Z=F$m.length,F$R=0;F$R<F$Z;F$R++)this._setPlayAction(F$J,F$m[F$R],F$T,F$V)}},F$B(0,F$T,"playEvent",null,function(F$J){(this._playEvents=F$J)&&this._tar&&this._setPlayActions(this._tar,F$J,"play")}),F$B(0,F$T,"target",null,function(F$J){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=F$J,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),F$B(0,F$T,"stopEvent",null,function(F$J){(this._stopEvents=F$J)&&this._tar&&this._setPlayActions(this._tar,F$J,"stop")})}(),function(F$J){function F$y(){this._src=null,this._onload=null,this._onerror=null,F$y.__super.call(this)}F$$(F$y,"laya.resource.FileBitmap",F$BJ);var F$T=F$y.prototype;return F$B(0,F$T,"src",function(){return this._src},function(F$J){this._src=F$J}),F$B(0,F$T,"onload",null,function(F$J){}),F$B(0,F$T,"onerror",null,function(F$J){}),F$y}()),F$LJ=function(F$J){function F$T(F$J,F$y){this._is2D=!1,F$T.__super.call(this);var F$V=this;if(this._source=this,"2D"===F$J||"AUTO"===F$J&&!F$u.isWebGL){this._is2D=!0,this._source=F$y||F$f.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var F$Z=this;F$Z.getContext=function(F$J,F$y){if(F$V._ctx)return F$V._ctx;var F$T=F$V._ctx=F$V._source.getContext(F$J,F$y);return F$T&&(F$T._canvas=F$Z,F$u.isFlash||F$f.onLimixiu||(F$T.size=function(F$J,F$y){})),F$T}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}F$$(F$T,"laya.resource.HTMLCanvas",F$BJ);var F$y=F$T.prototype;return F$y.clear=function(){this._ctx&&this._ctx.clear()},F$y.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},F$y.release=function(){},F$y._setContext=function(F$J){this._ctx=F$J},F$y.getContext=function(F$J,F$y){return this._ctx?this._ctx:this._ctx=F$T._createContext(this)},F$y.getMemSize=function(){return 0},F$y.size=function(F$J,F$y){(this._w!=F$J||this._h!=F$y||this._source&&(this._source.width!=F$J||this._source.height!=F$y))&&(this._w=F$J,this._h=F$y,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(F$J,F$y),this._source&&(this._source.height=F$y,this._source.width=F$J))},F$y.getCanvas=function(){return this._source},F$y.toBase64=function(F$J,F$y,F$T){if(this._source)if(F$u.isConchApp&&this._source.toBase64)this._source.toBase64(F$J,F$y,F$T);else{var F$V=this._source.toDataURL(F$J,F$y);F$T.call(this,F$V)}},F$B(0,F$y,"context",function(){return this._ctx}),F$B(0,F$y,"asBitmap",null,function(F$J){}),F$T.create=function(F$J,F$y){return new F$T(F$J,F$y)},F$T.TYPE2D="2D",F$T.TYPE3D="3D",F$T.TYPEAUTO="AUTO",F$T._createContext=null,F$T}(),F$HJ=(function(F$J){function F$K(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){throw F$K.__super.call(this),new Error("不允许new！")}F$$(F$K,"laya.resource.HTMLSubImage",F$BJ),F$K.create=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){return void 0===F$n&&(F$n=!1),new F$K(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n)}}(),function(F$J){function F$e(){this._frames=null,this._url=null,F$e.__super.call(this),this._setControlNode(this)}F$$(F$e,"laya.display.Animation",F$J);var F$y=F$e.prototype;F$y.destroy=function(F$J){void 0===F$J&&(F$J=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,F$J),this._frames=null,this._labels=null},F$y.play=function(F$J,F$y,F$T,F$V){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=!0),void 0===F$T&&(F$T=""),void 0===F$V&&(F$V=!0),F$T&&this._setFramesFromCache(F$T,F$V),this._isPlaying=!0,this.index="string"==typeof F$J?this._getFrameByLabel(F$J):F$J,this.loop=F$y,this._actionName=F$T,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},F$y._setFramesFromCache=function(F$J,F$y){var F$T;return void 0===F$y&&(F$y=!1),this._url&&(F$J=this._url+"#"+F$J),F$J&&F$e.framesMap[F$J]?((F$T=F$e.framesMap[F$J])instanceof Array?(this._frames=F$e.framesMap[F$J],this._count=this._frames.length):(F$T.nodeRoot&&(F$e.framesMap[F$J]=this._parseGraphicAnimationByData(F$T),F$T=F$e.framesMap[F$J]),this._frames=F$T.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=F$T.interval),this._labels=this._copyLabels(F$T.labels)),!0):(F$y&&console.log("ani not found:",F$J),!1)},F$y._copyLabels=function(F$J){if(!F$J)return null;var F$y,F$T;for(F$T in F$y={},F$J)F$y[F$T]=F$g.copyArray([],F$J[F$T]);return F$y},F$y._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&F$J.prototype._frameLoop.call(this)},F$y._displayToIndex=function(F$J){this._frames&&(this.graphics=this._frames[F$J])},F$y.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},F$y.loadImages=function(F$J,F$y){return void 0===F$y&&(F$y=""),this._url="",this._setFramesFromCache(F$y)||(this.frames=F$e.framesMap[F$y]?F$e.framesMap[F$y]:F$e.createFrames(F$J,F$y)),this},F$y.loadAtlas=function(F$y,F$T,F$V){void 0===F$V&&(F$V=""),this._url="";var F$Z=this;function F$J(F$J){F$y===F$J&&(F$Z.frames=F$e.framesMap[F$V]?F$e.framesMap[F$V]:F$e.createFrames(F$y,F$V),F$T&&F$T.run())}return F$Z._setFramesFromCache(F$V)||(F$nJ.getAtlas(F$y)?F$J(F$y):F$a.loader.load(F$y,F$O.create(null,F$J,[F$y]),null,"atlas")),this},F$y.loadAnimation=function(F$J,F$y,F$T){this._url=F$J;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,F$y&&F$y.run()):!F$T||F$nJ.getAtlas(F$T)?this._loadAnimationData(F$J,F$y,F$T):F$a.loader.load(F$T,F$O.create(this,this._loadAnimationData,[F$J,F$y,F$T]),null,"atlas"),this},F$y._loadAnimationData=function(F$n,F$K,F$J){var F$A=this;if(!F$J||F$nJ.getAtlas(F$J)){var F$$=this;F$nJ.getRes(F$n)?F$y(F$n):F$a.loader.load(F$n,F$O.create(null,F$y,[F$n]),null,"json"),F$nJ.clearRes(F$n)}else console.warn("atlas load fail:"+F$J);function F$y(F$J){if(F$nJ.getRes(F$J)&&F$n===F$J){var F$y;if(F$e.framesMap[F$n+"#"])F$$._setFramesFromCache(F$A._actionName,!0),F$A.index=0,F$A._checkResumePlaying();else{var F$T=F$$._parseGraphicAnimation(F$nJ.getRes(F$n));if(!F$T)return;var F$V,F$Z=F$T.animationList,F$m=0,F$R=F$Z.length;for(F$m=0;F$m<F$R;F$m++)F$y=F$Z[F$m],F$e.framesMap[F$n+"#"+F$y.name]=F$y,F$V||(F$V=F$y);F$V&&(F$e.framesMap[F$n+"#"]=F$V,F$$._setFramesFromCache(F$A._actionName,!0),F$A.index=0),F$A._checkResumePlaying()}F$K&&F$K.run()}}},F$y._parseGraphicAnimation=function(F$J){return F$aJ.parseAnimationData(F$J)},F$y._parseGraphicAnimationByData=function(F$J){return F$aJ.parseAnimationByData(F$J)},F$B(0,F$y,"frames",function(){return this._frames},function(F$J){(this._frames=F$J)&&(this._count=F$J.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),F$B(0,F$y,"autoPlay",null,function(F$J){F$J?this.play():this.stop()}),F$B(0,F$y,"source",null,function(F$J){-1<F$J.indexOf(".ani")?this.loadAnimation(F$J):-1<F$J.indexOf(".json")||-1<F$J.indexOf("als")||-1<F$J.indexOf("atlas")?this.loadAtlas(F$J):this.loadImages(F$J.split(","))}),F$B(0,F$y,"autoAnimation",null,function(F$J){this.play(0,!0,F$J,!1)}),F$e.createFrames=function(F$J,F$y){var F$T,F$V,F$Z=0,F$m=0;if("string"==typeof F$J){var F$R=F$nJ.getAtlas(F$J);if(F$R&&F$R.length)for(F$T=[],F$Z=0,F$m=F$R.length;F$Z<F$m;F$Z++)(F$V=new F$v.createGraphics).drawTexture(F$nJ.getRes(F$R[F$Z]),0,0),F$T.push(F$V)}else if(F$J instanceof Array)for(F$T=[],F$Z=0,F$m=F$J.length;F$Z<F$m;F$Z++)(F$V=new F$v.createGraphics).loadImage(F$J[F$Z],0,0),F$T.push(F$V);return F$y&&(F$e.framesMap[F$y]=F$T),F$T},F$e.clearCache=function(F$J){var F$y,F$T=F$e.framesMap,F$V=F$J+"#";for(F$y in F$T)F$y!==F$J&&0!=F$y.indexOf(F$V)||delete F$e.framesMap[F$y]},F$e.framesMap={}}(F$oJ),function(F$J){function F$m(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,F$m.__super.call(this),null==F$m._sortIndexFun&&(F$m._sortIndexFun=F$l.sortByKey("index",!1,!0))}F$$(F$m,"laya.display.FrameAnimation",F$J);var F$y=F$m.prototype;return F$y._setUp=function(F$J,F$y){this._labels=null,this._animationNewFrames=null,this._targetDic=F$J,this._animationData=F$y,this.interval=1e3/F$y.frameRate,F$y.parsed?(this._count=F$y.count,this._labels=F$y.labels,this._animationNewFrames=F$y.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),F$y.parsed=!0,F$y.labels=this._labels,F$y.count=this._count,F$y.animationNewFrames=this._animationNewFrames},F$y.clear=function(){F$J.prototype.clear.call(this),this._targetDic=null,this._animationData=null},F$y._displayToIndex=function(F$J){if(this._animationData){F$J<0&&(F$J=0),F$J>this._count&&(F$J=this._count);var F$y=this._animationData.nodes,F$T=0,F$V=F$y.length;for(F$T=0;F$T<F$V;F$T++)this._displayNodeToFrame(F$y[F$T],F$J)}},F$y._displayNodeToFrame=function(F$J,F$y,F$T){F$T||(F$T=this._targetDic);var F$V=F$T[F$J.target];if(F$V){var F$Z,F$m,F$R,F$n=F$J.frames,F$K=F$J.keys,F$A=0,F$$=F$K.length;for(F$A=0;F$A<F$$;F$A++)F$R=(F$m=F$n[F$Z=F$K[F$A]]).length>F$y?F$m[F$y]:F$m[F$m.length-1],F$V[F$Z]=F$R}},F$y._calculateDatas=function(){if(this._animationData){var F$J,F$y=this._animationData.nodes,F$T=0,F$V=F$y.length;for(F$T=this._count=0;F$T<F$V;F$T++)F$J=F$y[F$T],this._calculateNodeKeyFrames(F$J);this._count+=1}},F$y._calculateNodeKeyFrames=function(F$J){var F$y,F$T,F$V=F$J.keyframes,F$Z=F$J.target;for(F$y in F$J.frames||(F$J.frames={}),F$J.keys?F$J.keys.length=0:F$J.keys=[],F$J.initValues||(F$J.initValues={}),F$V)F$T=F$V[F$y],F$J.frames[F$y]||(F$J.frames[F$y]=[]),this._targetDic&&this._targetDic[F$Z]&&(F$J.initValues[F$y]=this._targetDic[F$Z][F$y]),F$T.sort(F$m._sortIndexFun),F$J.keys.push(F$y),this._calculateNodePropFrames(F$T,F$J.frames[F$y],F$y,F$Z)},F$y.resetToInitState=function(){if(this._targetDic&&this._animationData){var F$J,F$y,F$T=this._animationData.nodes,F$V=0,F$Z=F$T.length;for(F$V=0;F$V<F$Z;F$V++)if(F$y=(F$J=F$T[F$V]).initValues){var F$m,F$R=this._targetDic[F$J.target];if(F$R)for(F$m in F$y)F$R[F$m]=F$y[F$m]}}},F$y._calculateNodePropFrames=function(F$J,F$y,F$T,F$V){var F$Z=0,F$m=F$J.length-1;if(0<F$m){for(F$y.length=F$J[F$m].index+1,F$Z=0;F$Z<F$m;F$Z++)this._dealKeyFrame(F$J[F$Z]),this._calculateFrameValues(F$J[F$Z],F$J[F$Z+1],F$y);this._dealKeyFrame(F$J[F$Z])}0==F$m&&(F$y[F$J[0].index]=F$J[0].value,this._animationNewFrames&&(this._animationNewFrames[F$J[0].index]=!0))},F$y._dealKeyFrame=function(F$J){F$J.label&&""!=F$J.label&&this.addLabel(F$J.label,F$J.index)},F$y._calculateFrameValues=function(F$J,F$y,F$T){var F$V,F$Z=0,F$m=F$J.index,F$R=F$y.index,F$n=F$J.value,F$K=F$y.value-F$J.value,F$A=F$R-F$m;if(F$R>this._count&&(this._count=F$R),F$J.tween)for(null==(F$V=F$C[F$J.tweenMethod])&&(F$V=F$C.linearNone),F$Z=F$m;F$Z<F$R;F$Z++)F$T[F$Z]=F$V(F$Z-F$m,F$n,F$K,F$A),this._animationNewFrames&&(this._animationNewFrames[F$Z]=!0);else for(F$Z=F$m;F$Z<F$R;F$Z++)F$T[F$Z]=F$n;this._animationNewFrames&&(this._animationNewFrames[F$J.index]=!0,this._animationNewFrames[F$y.index]=!0),F$T[F$y.index]=F$y.value},F$m._sortIndexFun=null,F$m}(F$oJ)),F$PJ=function(F$y){function F$Z(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",F$Z.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=F$sJ.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}F$$(F$Z,"laya.display.Input",F$y);var F$J=F$Z.prototype;return F$J.setSelection=function(F$J,F$y){this.focus=!0,laya.display.Input.inputElement.selectionStart=F$J,laya.display.Input.inputElement.selectionEnd=F$y},F$J._onUnDisplay=function(F$J){this.focus=!1},F$J._onMouseDown=function(F$J){this.focus=!0},F$J._syncInputTransform=function(){var F$J=this.nativeInput,F$y=F$g.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),F$T=this._width-this.padding[1]-this.padding[3],F$V=this._height-this.padding[0]-this.padding[2];F$u.isConchApp?(F$J.setScale(F$y.scaleX,F$y.scaleY),F$J.setSize(F$T,F$V),F$J.setPos(F$y.x,F$y.y)):(F$Z.inputContainer.style.transform=F$Z.inputContainer.style.webkitTransform="scale("+F$y.scaleX+","+F$y.scaleY+") rotate("+F$a.stage.canvasDegree+"deg)",F$J.style.width=F$T+"px",F$J.style.height=F$V+"px",F$Z.inputContainer.style.left=F$y.x+"px",F$Z.inputContainer.style.top=F$y.y+"px")},F$J.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},F$J._setInputMethod=function(){F$Z.input.parentElement&&F$Z.inputContainer.removeChild(F$Z.input),F$Z.area.parentElement&&F$Z.inputContainer.removeChild(F$Z.area),F$Z.inputElement=this._multiline?F$Z.area:F$Z.input,F$Z.inputContainer.appendChild(F$Z.inputElement),F$sJ.RightToLeft&&(F$Z.inputElement.style.direction="rtl")},F$J._focusIn=function(){laya.display.Input.isInputting=!0;var F$J=this.nativeInput;this._focus=!0;var F$y=F$J.style;F$y.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),F$J.readOnly=!this._editable,F$u.isConchApp&&(F$J.setType(this._type),F$J.setForbidEdit(!this._editable)),F$J.maxLength=this._maxChars;this.padding;if(F$J.type=this._type,F$J.value=this._content,F$J.placeholder=this._prompt,F$a.stage.off("keydown",this,this._onKeyDown),F$a.stage.on("keydown",this,this._onKeyDown),(F$a.stage.focus=this).event("focus"),F$f.onPC&&F$J.focus(),!F$f.onMiniGame){this._text;this._text=null}this.typeset(),F$J.setColor(this._originColor),F$J.setFontSize(this.fontSize),F$J.setFontFace(F$f.onIPhone&&F$sJ._fontFamilyMap[this.font]||this.font),F$u.isConchApp&&F$J.setMultiAble&&F$J.setMultiAble(this._multiline),F$y.lineHeight=this.leading+this.fontSize+"px",F$y.fontStyle=this.italic?"italic":"normal",F$y.fontWeight=this.bold?"bold":"normal",F$y.textAlign=this.align,F$y.padding="0 0",this._syncInputTransform(),!F$u.isConchApp&&F$f.onPC&&F$a.timer.frameLoop(1,this,this._syncInputTransform)},F$J._setPromptColor=function(){(F$Z.promptStyleDOM=F$f.getElementById("promptStyle"))||((F$Z.promptStyleDOM=F$f.createElement("style")).setAttribute("id","promptStyle"),F$f.document.head.appendChild(F$Z.promptStyleDOM)),F$Z.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},F$J._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(F$a.superSet(F$sJ,this,"text",this._content),F$a.superSet(F$sJ,this,"color",this._originColor)):(F$a.superSet(F$sJ,this,"text",this._prompt),F$a.superSet(F$sJ,this,"color",this._promptColor)),F$a.stage.off("keydown",this,this._onKeyDown),F$a.stage.focus=null,this.event("blur"),F$u.isConchApp&&this.nativeInput.blur(),F$f.onPC&&F$a.timer.clear(this,this._syncInputTransform)},F$J._onKeyDown=function(F$J){13===F$J.keyCode&&(F$f.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},F$J.changeText=function(F$J){this._content=F$J,this._focus?(this.nativeInput.value=F$J||"",this.event("change")):F$y.prototype.changeText.call(this,F$J)},F$B(0,F$J,"color",F$y.prototype._$get_color,function(F$J){this._focus&&this.nativeInput.setColor(F$J),F$a.superSet(F$sJ,this,"color",this._content?F$J:this._promptColor),this._originColor=F$J}),F$B(0,F$J,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(F$J){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),F$B(0,F$J,"multiline",function(){return this._multiline},function(F$J){this._multiline=F$J,this.valign=F$J?"top":"middle"}),F$B(0,F$J,"maxChars",function(){return this._maxChars},function(F$J){F$J<=0&&(F$J=1e5),this._maxChars=F$J}),F$B(0,F$J,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(F$J){F$a.superSet(F$sJ,this,"color",this._originColor),F$J+="",this._focus?(this.nativeInput.value=F$J||"",this.event("change")):(this._multiline||(F$J=F$J.replace(/\r?\n/g,"")),(this._content=F$J)?F$a.superSet(F$sJ,this,"text",F$J):(F$a.superSet(F$sJ,this,"text",this._prompt),F$a.superSet(F$sJ,this,"color",this.promptColor)))}),F$B(0,F$J,"nativeInput",function(){return this._multiline?F$Z.area:F$Z.input}),F$B(0,F$J,"prompt",function(){return this._prompt},function(F$J){!this._text&&F$J&&F$a.superSet(F$sJ,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?F$a.superSet(F$sJ,this,"text",this._text==this._prompt?F$J:this._text):F$a.superSet(F$sJ,this,"text",F$J),this._prompt=F$sJ.langPacks&&F$sJ.langPacks[F$J]?F$sJ.langPacks[F$J]:F$J}),F$B(0,F$J,"focus",function(){return this._focus},function(F$J){var F$y=this.nativeInput;this._focus!==F$J&&(F$J?(F$y.target?F$y.target._focusOut():this._setInputMethod(),(F$y.target=this)._focusIn()):(F$y.target=null,this._focusOut(),F$f.document.body.scrollTop=0,F$y.blur(),F$u.isConchApp?F$y.setPos(-1e4,-1e4):F$Z.inputContainer.contains(F$y)&&F$Z.inputContainer.removeChild(F$y)))}),F$B(0,F$J,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(F$J){F$J?(-1<(F$J="[^"+F$J+"]").indexOf("^^")&&(F$J=F$J.replace("^^","")),this._restrictPattern=new RegExp(F$J,"g")):this._restrictPattern=null}),F$B(0,F$J,"editable",function(){return this._editable},function(F$J){this._editable=F$J,F$u.isConchApp&&F$Z.input.setForbidEdit(!F$J)}),F$B(0,F$J,"promptColor",function(){return this._promptColor},function(F$J){this._promptColor=F$J,this._content||F$a.superSet(F$sJ,this,"color",F$J)}),F$B(0,F$J,"type",function(){return this._type},function(F$J){this._getCSSStyle().password="password"==F$J,this._type=F$J,F$u.isConchApp&&this.nativeInput.setType(F$J)}),F$B(0,F$J,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(F$J){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),F$B(0,F$J,"asPassword",function(){return this._getCSSStyle().password},function(F$J){this._getCSSStyle().password=F$J,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),F$Z.__init__=function(){F$Z._createInputElement(),F$f.onMobile&&F$u.canvas.addEventListener(F$Z.IOS_IFRAME?F$f.onMiniGame?"touchend":"click":"touchend",F$Z._popupInputMethod)},F$Z._popupInputMethod=function(F$J){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},F$Z._createInputElement=function(){F$Z._initInput(F$Z.area=F$f.createElement("textarea")),F$Z._initInput(F$Z.input=F$f.createElement("input")),(F$Z.inputContainer=F$f.createElement("div")).style.position="absolute",F$Z.inputContainer.style.zIndex=1e5,F$f.container.appendChild(F$Z.inputContainer),F$Z.inputContainer.setPos=function(F$J,F$y){F$Z.inputContainer.style.left=F$J+"px",F$Z.inputContainer.style.top=F$y+"px"}},F$Z._initInput=function(F$y){var F$J=F$y.style;F$J.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",F$J.resize="none",F$J.backgroundColor="transparent",F$J.border="none",F$J.outline="none",F$J.zIndex=1,F$y.addEventListener("input",F$Z._processInputting),F$y.addEventListener("mousemove",F$Z._stopEvent),F$y.addEventListener("mousedown",F$Z._stopEvent),F$y.addEventListener("touchmove",F$Z._stopEvent),F$y.setFontFace=function(F$J){F$y.style.fontFamily=F$J},F$u.isConchApp||(F$y.setColor=function(F$J){F$y.style.color=F$J},F$y.setFontSize=function(F$J){F$y.style.fontSize=F$J+"px"})},F$Z._processInputting=function(F$J){var F$y=laya.display.Input.inputElement.target;if(F$y){var F$T=laya.display.Input.inputElement.value;F$y._restrictPattern&&(F$T=F$T.replace(/\u2006|\x27/g,""),F$y._restrictPattern.test(F$T)&&(F$T=F$T.replace(F$y._restrictPattern,""),laya.display.Input.inputElement.value=F$T)),F$y._text=F$T,F$y.event("input")}},F$Z._stopEvent=function(F$J){"touchmove"==F$J.type&&F$J.preventDefault(),F$J.stopPropagation&&F$J.stopPropagation()},F$Z.TYPE_TEXT="text",F$Z.TYPE_PASSWORD="password",F$Z.TYPE_EMAIL="email",F$Z.TYPE_URL="url",F$Z.TYPE_NUMBER="number",F$Z.TYPE_RANGE="range",F$Z.TYPE_DATE="date",F$Z.TYPE_MONTH="month",F$Z.TYPE_WEEK="week",F$Z.TYPE_TIME="time",F$Z.TYPE_DATE_TIME="datetime",F$Z.TYPE_DATE_TIME_LOCAL="datetime-local",F$Z.TYPE_SEARCH="search",F$Z.input=null,F$Z.area=null,F$Z.inputElement=null,F$Z.inputContainer=null,F$Z.confirmButton=null,F$Z.promptStyleDOM=null,F$Z.inputHeight=45,F$Z.isInputting=!1,F$Z.stageMatrix=null,F$K(F$Z,["IOS_IFRAME",function(){return this.IOS_IFRAME=F$f.onIOS&&F$f.window.top!=F$f.window.self}]),F$Z}(F$sJ),F$lJ=function(F$J){function F$T(F$J,F$y){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,F$T.__super.call(this),F$J&&this._init_(F$J,F$y)}F$$(F$T,"laya.resource.HTMLImage",F$OJ);var F$y=F$T.prototype;return F$y._init_=function(F$J,F$y){this._src=F$J,this._source=new F$f.window.Image,F$y&&(F$y.onload&&(this.onload=F$y.onload),F$y.onerror&&(this.onerror=F$y.onerror),F$y.onCreate&&F$y.onCreate(this)),0!=F$J.indexOf("data:image")&&(this._source.crossOrigin=""),F$J&&(this._source.src=F$J)},F$y.recreateResource=function(){var F$J=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var F$y=this;this._source=new F$f.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(F$y._needReleaseAgain)return F$y._needReleaseAgain=!1,F$y._source.onload=null,void(F$y._source=null);F$y._source.onload=null,F$y.memorySize=F$J._w*F$J._h*4,F$y._recreateLock=!1,F$y.completeCreate()},this._source.src=this._src}},F$y.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},F$y.onresize=function(){this._w=this._source.width,this._h=this._source.height},F$B(0,F$y,"onload",null,function(F$J){var F$y=this;this._onload=F$J,this._source&&(this._source.onload=null!=this._onload?function(){F$y.onresize(),F$y._onload()}:null)}),F$B(0,F$y,"onerror",null,function(F$J){var F$y=this;this._onerror=F$J,this._source&&(this._source.onerror=null!=this._onerror?function(){F$y._onerror()}:null)}),F$B(0,F$y,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(F$J){this._enableMerageInAtlas=F$J,F$u.isConchApp&&this._source&&(this._source.enableMerageInAtlas=F$J)}),F$T.create=function(F$J,F$y){return new F$T(F$J,F$y)},F$T}(),F$aJ=(function(F$m){function F$J(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,F$J.__super.call(this)}F$$(F$J,"laya.display.EffectAnimation",F$m);var F$y=F$J.prototype;F$y._onOtherBegin=function(F$J){F$J!=this&&this.stop()},F$y.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},F$y._onPlayAction=function(){this.play(0,!1)},F$y.play=function(F$J,F$y,F$T,F$V){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=!0),void 0===F$T&&(F$T=""),void 0===F$V&&(F$V=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,F$J,F$y,F$T,F$V))},F$y._recordInitData=function(){if(this._aniKeys){var F$J,F$y,F$T=0;for(F$J=this._aniKeys.length,F$T=0;F$T<F$J;F$T++)F$y=this._aniKeys[F$T],this._initData[F$y]=this._target[F$y]}},F$y._displayToIndex=function(F$J){if(this._animationData){F$J<0&&(F$J=0),F$J>this._count&&(F$J=this._count);var F$y=this._animationData.nodes,F$T=0,F$V=F$y.length;for(F$V=1<F$V?1:F$V,F$T=0;F$T<F$V;F$T++)this._displayNodeToFrame(F$y[F$T],F$J)}},F$y._displayNodeToFrame=function(F$J,F$y,F$T){if(this._target){var F$V;F$V=this._target;var F$Z,F$m,F$R,F$n,F$K=F$J.frames,F$A=F$J.keys,F$$=0,F$e=F$A.length;F$n=F$J.secondFrames;var F$M,F$G,F$B,F$o,F$s=0;for(F$$=0;F$$<F$e;F$$++)F$m=F$K[F$Z=F$A[F$$]],F$R=-1==(F$s=F$n[F$Z])?this._initData[F$Z]:F$y<F$s?(F$B=(F$G=F$J.keyframes[F$Z])[0]).tween?(null==(F$M=F$C[F$B.tweenMethod])&&(F$M=F$C.linearNone),F$o=F$G[1],F$M(F$y,this._initData[F$Z],F$o.value-this._initData[F$Z],F$o.index)):this._initData[F$Z]:F$m.length>F$y?F$m[F$y]:F$m[F$m.length-1],F$V[F$Z]=F$R}},F$y._calculateNodeKeyFrames=function(F$J){F$m.prototype._calculateNodeKeyFrames.call(this,F$J);var F$y,F$T,F$V,F$Z=F$J.keyframes;F$J.target;for(F$y in F$V={},F$J.secondFrames=F$V,F$Z)(F$T=F$Z[F$y]).length<=1?F$V[F$y]=-1:F$V[F$y]=F$T[1].index},F$B(0,F$y,"target",function(){return this._target},function(F$J){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=F$J,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),F$B(0,F$y,"playEvent",null,function(F$J){(this._playEvents=F$J)&&this.addEvent()}),F$B(0,F$y,"effectData",null,function(F$J){var F$y;F$J&&((F$y=F$J.animations)&&F$y[0]&&(this._setUp({},F$y[0]),F$y[0].nodes&&F$y[0].nodes[0]&&(this._aniKeys=F$y[0].nodes[0].keys)))}),F$B(0,F$y,"effectClass",null,function(F$J){var F$y,F$T;(this._effectClass=F$Y.getClass(F$J),this._effectClass)&&((F$y=this._effectClass.uiView)&&(F$T=F$y.animations)&&F$T[0]&&(this._setUp({},F$T[0]),F$T[0].nodes&&F$T[0].nodes[0]&&(this._aniKeys=F$T[0].nodes[0].keys)))}),F$J.EffectAnimationBegin="effectanimationbegin"}(F$HJ),function(F$y){var F$_;function F$t(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,F$t.__super.call(this)}F$$(F$t,"laya.utils.GraphicAnimation",F$y);var F$J=F$t.prototype;return F$J._parseNodeList=function(F$J){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[F$J.compId]=F$J.props,F$J.compId&&this._nodeList.push(F$J.compId);var F$y=F$J.child;if(F$y){var F$T=0,F$V=F$y.length;for(F$T=0;F$T<F$V;F$T++)this._parseNodeList(F$y[F$T])}},F$J._calGraphicData=function(F$J){var F$y;if(this._setUp(null,F$J),this._createGraphicData(),this._nodeIDAniDic)for(F$y in this._nodeIDAniDic)this._nodeIDAniDic[F$y]=null},F$J._createGraphicData=function(){var F$J,F$y=[],F$T=0,F$V=this.count,F$Z=this._animationNewFrames;for(F$Z||(F$Z=[]),F$T=0;F$T<F$V;F$T++)!F$Z[F$T]&&F$J||(F$J=this._createFrameGraphic(F$T)),F$y.push(F$J);this._gList=F$y},F$J._createFrameGraphic=function(F$J){var F$y=F$v.createGraphics();return F$t._rootMatrix||(F$t._rootMatrix=new F$Q),this._updateNodeGraphic(this._rootNode,F$J,F$t._rootMatrix,F$y),F$y},F$J._updateNodeGraphic=function(F$J,F$y,F$T,F$V,F$Z){var F$m;void 0===F$Z&&(F$Z=1);var F$R,F$n,F$K,F$A=(F$m=this._nodeGDic[F$J.compId]=this._getNodeGraphicData(F$J.compId,F$y,this._nodeGDic[F$J.compId])).alpha*F$Z;if(!(F$A<.01)&&(F$m.resultTransform||(F$m.resultTransform=F$Q.create()),F$R=F$m.resultTransform,F$Q.mul(F$m.transform,F$T,F$R),F$m.skin&&(F$n=this._getTextureByUrl(F$m.skin))&&(F$R._checkTransform()?(F$V.drawTexture(F$n,0,0,F$m.width,F$m.height,F$R,F$A),F$m.resultTransform=null):F$V.drawTexture(F$n,F$R.tx,F$R.ty,F$m.width,F$m.height,null,F$A)),F$K=F$J.child)){var F$$,F$e=0;for(F$$=F$K.length,F$e=0;F$e<F$$;F$e++)this._updateNodeGraphic(F$K[F$e],F$y,F$R,F$V,F$A)}},F$J._updateNoChilds=function(F$J,F$y){if(F$J.skin){var F$T=this._getTextureByUrl(F$J.skin);if(F$T){var F$V=F$J.transform;F$V._checkTransform();!F$V.bTransform?F$y.drawTexture(F$T,F$V.tx,F$V.ty,F$J.width,F$J.height,null,F$J.alpha):F$y.drawTexture(F$T,0,0,F$J.width,F$J.height,F$V.clone(),F$J.alpha)}}},F$J._updateNodeGraphic2=function(F$J,F$y,F$T){var F$V;if(F$V=this._nodeGDic[F$J.compId]=this._getNodeGraphicData(F$J.compId,F$y,this._nodeGDic[F$J.compId]),F$J.child){var F$Z=F$V.transform;F$Z._checkTransform();var F$m,F$R;F$R=(F$m=!F$Z.bTransform)&&(0!=F$Z.tx||0!=F$Z.ty);var F$n,F$K,F$A;if((F$n=F$Z.bTransform||1!=F$V.alpha)&&F$T.save(),1!=F$V.alpha&&F$T.alpha(F$V.alpha),F$m?F$R&&F$T.translate(F$Z.tx,F$Z.ty):F$T.transform(F$Z.clone()),F$K=F$J.child,F$V.skin&&(F$A=this._getTextureByUrl(F$V.skin))&&F$T.drawTexture(F$A,0,0,F$V.width,F$V.height),F$K){var F$$,F$e=0;for(F$$=F$K.length,F$e=0;F$e<F$$;F$e++)this._updateNodeGraphic2(F$K[F$e],F$y,F$T)}F$n?F$T.restore():F$m?F$R&&F$T.translate(-F$Z.tx,-F$Z.ty):F$T.transform(F$Z.clone().invert())}else this._updateNoChilds(F$V,F$T)},F$J._calculateNodeKeyFrames=function(F$J){F$y.prototype._calculateNodeKeyFrames.call(this,F$J),this._nodeIDAniDic[F$J.target]=F$J},F$J.getNodeDataByID=function(F$J){return this._nodeIDAniDic[F$J]},F$J._getParams=function(F$J,F$y,F$T,F$V){var F$Z=F$t._temParam;F$Z.length=F$y.length;var F$m=0,F$R=F$y.length;for(F$m=0;F$m<F$R;F$m++)F$Z[F$m]=this._getObjVar(F$J,F$y[F$m][0],F$T,F$y[F$m][1],F$V);return F$Z},F$J._getObjVar=function(F$J,F$y,F$T,F$V,F$Z){if(F$J.hasOwnProperty(F$y)){var F$m=F$J[F$y];if(F$T>=F$m.length&&(F$T=F$m.length-1),null!=F$J[F$y][F$T])return F$J[F$y][F$T]}return F$Z.hasOwnProperty(F$y)?F$Z[F$y]:F$V},F$J._getNodeGraphicData=function(F$J,F$y,F$T){F$T||(F$T=F$_.create()),F$T.transform?F$T.transform.identity():F$T.transform=F$Q.create();var F$V=this.getNodeDataByID(F$J);if(!F$V)return F$T;var F$Z,F$m,F$R=F$V.frames,F$n=this._getParams(F$R,F$t._drawTextureCmd,F$y,this._nodeDefaultProps[F$J]),F$K=F$n[0],F$A=NaN,F$$=NaN,F$e=F$n[5],F$M=F$n[6],F$G=F$n[13],F$B=F$n[14],F$o=F$n[7],F$s=F$n[8],F$E=F$n[9],F$O=F$n[11],F$L=F$n[12];F$A=F$n[3],F$$=F$n[4],0!=F$A&&0!=F$$||(F$K=null),-1==F$A&&(F$A=0),-1==F$$&&(F$$=0),F$T.skin=F$K,F$T.width=F$A,F$T.height=F$$,F$K&&((F$Z=this._getTextureByUrl(F$K))?(F$A||(F$A=F$Z.sourceWidth),F$$||(F$$=F$Z.sourceHeight)):console.warn("lost skin:",F$K,",you may load pics first")),F$T.alpha=F$n[10],F$m=F$T.transform,0!=F$G&&(F$e=F$G*F$A),0!=F$B&&(F$M=F$B*F$$),0==F$e&&0==F$M||F$m.translate(-F$e,-F$M);var F$H=null;if(F$E||1!==F$o||1!==F$s||F$O||F$L){(F$H=F$t._tempMt).identity(),F$H.bTransform=!0;var F$P=.0174532922222222*(F$E-F$O),F$l=.0174532922222222*(F$E+F$L),F$a=Math.cos(F$l),F$q=Math.sin(F$l),F$r=Math.sin(F$P),F$D=Math.cos(F$P);F$H.a=F$o*F$a,F$H.b=F$o*F$q,F$H.c=-F$s*F$r,F$H.d=F$s*F$D,F$H.tx=F$H.ty=0}return F$H&&(F$m=F$Q.mul(F$m,F$H,F$m)),F$m.translate(F$n[1],F$n[2]),F$T},F$J._getTextureByUrl=function(F$J){return F$nJ.getRes(F$J)},F$J.setAniData=function(F$J,F$y){if(F$J.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=F$J,this._parseNodeList(F$J);var F$T,F$V={},F$Z=[],F$m=F$J.animations,F$R=0,F$n=F$m.length;for(F$R=0;F$R<F$n;F$R++)if(F$T=F$m[F$R],this._labels=null,(!F$y||F$y==F$T.name)&&F$T){try{this._calGraphicData(F$T)}catch(F$J){console.warn("parse animation fail:"+F$T.name+",empty animation created"),this._gList=[]}var F$K={};F$K.interval=1e3/F$T.frameRate,F$K.frames=this._gList,F$K.labels=this._labels,F$K.name=F$T.name,F$Z.push(F$K),F$V[F$T.name]=F$K}this.animationList=F$Z,this.animationDic=F$V}F$t._temParam.length=0},F$J.parseByData=function(F$J){var F$y,F$T;F$y=F$J.nodeRoot,F$T=F$J.aniO,delete F$J.nodeRoot,delete F$J.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=F$y,this._parseNodeList(F$y),this._labels=null;try{this._calGraphicData(F$T)}catch(F$J){console.warn("parse animation fail:"+F$T.name+",empty animation created"),this._gList=[]}var F$V=F$J;return F$V.interval=1e3/F$T.frameRate,F$V.frames=this._gList,F$V.labels=this._labels,F$V.name=F$T.name,F$V},F$J.setUpAniData=function(F$J){if(F$J.animations){var F$y,F$T={},F$V=[],F$Z=F$J.animations,F$m=0,F$R=F$Z.length;for(F$m=0;F$m<F$R;F$m++)if(F$y=F$Z[F$m]){var F$n={};F$n.name=F$y.name,F$n.aniO=F$y,F$n.nodeRoot=F$J,F$V.push(F$n),F$T[F$y.name]=F$n}this.animationList=F$V,this.animationDic=F$T}},F$J._clear=function(){var F$J,F$y;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(F$J in this._nodeGDic)(F$y=this._nodeGDic[F$J])&&F$y.recover();this._nodeGDic=null},F$t.parseAnimationByData=function(F$J){var F$y;return F$t._I||(F$t._I=new F$t),F$y=F$t._I.parseByData(F$J),F$t._I._clear(),F$y},F$t.parseAnimationData=function(F$J){var F$y;return F$t._I||(F$t._I=new F$t),F$t._I.setUpAniData(F$J),(F$y={}).animationList=F$t._I.animationList,F$y.animationDic=F$t._I.animationDic,F$t._I._clear(),F$y},F$t._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],F$t._temParam=[],F$t._I=null,F$t._rootMatrix=null,F$K(F$t,["_tempMt",function(){return this._tempMt=new F$Q}]),F$t.__init$=function(){F$_=function(){function F$J(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return F$$(F$J,""),F$J.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),F$b.recover("GraphicNode",this)},F$J.create=function(){return F$b.getItemByClass("GraphicNode",F$J)},F$J}()},F$t}(F$HJ));F$a.__init([F$A,F$KJ,F$u,F$f,F$p,F$D,F$J,F$aJ])}(window,document,Laya),function(F$J,F$y,F$T){F$T.un,F$T.uns,F$T.static;var F$V=F$T.class;F$T.getset,F$T.__newvec;new(function(){function F$J(){}return F$V(F$J,"LayaMain"),F$J}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$J,F$y){"use strict";for(var F$T in Object.defineProperty(F$y,"__esModule",{value:!0}),Laya){var F$V=Laya[F$T];F$V&&F$V.__isclass&&(F$y[F$T]=F$V)}}),function(F$J,F$y,F$l){F$l.un,F$l.uns;var F$R=F$l.static,F$M=F$l.class,F$V=F$l.getset,F$m=F$l.__newvec,F$$=laya.maths.Arith,F$e=laya.maths.Bezier,F$T=laya.resource.Bitmap,F$G=laya.utils.Browser,F$K=laya.utils.Byte,F$B=laya.utils.Color,F$a=(laya.filters.ColorFilter,F$l.Config),F$Z=laya.resource.Context,F$q=(laya.events.Event,laya.filters.Filter),F$n=laya.display.Graphics,F$A=laya.resource.HTMLCanvas,F$o=(laya.utils.HTMLChar,laya.resource.HTMLImage),F$s=laya.resource.HTMLSubImage,F$r=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),F$D=laya.maths.Point,F$_=laya.maths.Rectangle,F$E=laya.renders.Render,F$O=(laya.renders.RenderContext,laya.renders.RenderSprite),F$L=laya.resource.Resource,F$H=laya.resource.ResourceManager,F$P=laya.utils.RunDriver,F$t=laya.display.Sprite,F$v=laya.display.Stage,F$Q=laya.utils.Stat,F$i=laya.utils.StringKey,F$c=(laya.display.css.Style,laya.system.System),F$u=laya.display.Text,F$x=laya.resource.Texture,F$k=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),F$X=laya.utils.VectorGraphManager;laya.utils.WordText;F$l.interface("laya.webgl.shapes.IShape"),F$l.interface("laya.webgl.submit.ISubmit"),F$l.interface("laya.webgl.text.ICharSegment"),F$l.interface("laya.webgl.canvas.save.ISaveData"),F$l.interface("laya.webgl.resource.IMergeAtlasBitmap"),F$l.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var F$S=function(){function F$J(){}F$M(F$J,"laya.filters.webgl.FilterActionGL");var F$y=F$J.prototype;return F$l.imps(F$y,{"laya.filters.IFilterActionGL":!0}),F$y.setValue=function(F$J){},F$y.setValueMix=function(F$J){},F$y.apply3d=function(F$J,F$y,F$T,F$V,F$Z){return null},F$y.apply=function(F$J){return null},F$V(0,F$y,"typeMix",function(){return 0}),F$J}(),F$f=function(){function F$J(){}return F$M(F$J,"laya.webgl.shader.ShaderValue"),F$J}(),F$W=function(){var F$V,F$Z;function F$J(F$J,F$y,F$T){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new F$Z,void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),this._cells=null,this._rowInfo=null,this._init(F$J,F$y),this._atlasID=F$T}F$M(F$J,"laya.webgl.atlas.AtlasGrid");var F$y=F$J.prototype;return F$y.getAltasID=function(){return this._atlasID},F$y.setAltasID=function(F$J){0<=F$J&&(this._atlasID=F$J)},F$y.addTex=function(F$J,F$y,F$T){var F$V=this._get(F$y,F$T);return 0==F$V.ret||(this._fill(F$V.x,F$V.y,F$y,F$T,F$J),this._texCount++),F$V},F$y._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},F$y._init=function(F$J,F$y){if(this._width=F$J,this._height=F$y,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=F$m(this._height);for(var F$T=0;F$T<this._height;F$T++)this._rowInfo[F$T]=new F$V;return this._clear(),!0},F$y._get=function(F$J,F$y){var F$T=new F$Y;if(F$J>=this._failSize.width&&F$y>=this._failSize.height)return F$T;for(var F$V=-1,F$Z=-1,F$m=this._width,F$R=this._height,F$n=this._cells,F$K=0;F$K<F$R;F$K++)if(!(this._rowInfo[F$K].spaceCount<F$J))for(var F$A=0;F$A<F$m;){var F$$=3*(F$K*F$m+F$A);if(0!=F$n[F$$]||F$n[1+F$$]<F$J||F$n[2+F$$]<F$y)F$A+=F$n[1+F$$];else{F$V=F$A,F$Z=F$K;for(var F$e=0;F$e<F$J;F$e++)if(F$n[3*F$e+F$$+2]<F$y){F$V=-1;break}if(!(F$V<0))return F$T.ret=!0,F$T.x=F$V,F$T.y=F$Z,F$T;F$A+=F$n[1+F$$]}}return F$T},F$y._fill=function(F$J,F$y,F$T,F$V,F$Z){var F$m=this._width,F$R=this._height;this._check(F$J+F$T<=F$m&&F$y+F$V<=F$R);for(var F$n=F$y;F$n<F$V+F$y;++F$n){this._check(this._rowInfo[F$n].spaceCount>=F$T),this._rowInfo[F$n].spaceCount-=F$T;for(var F$K=0;F$K<F$T;F$K++){var F$A=3*(F$J+F$n*F$m+F$K);this._check(0==this._cells[F$A]),this._cells[F$A]=F$Z,this._cells[1+F$A]=F$T,this._cells[2+F$A]=F$V}}if(0<F$J)for(F$n=0;F$n<F$V;++F$n){var F$$=0;for(F$K=F$J-1;0<=F$K&&0==this._cells[3*((F$y+F$n)*F$m+F$K)];--F$K,++F$$);for(F$K=F$$;0<F$K;--F$K)this._cells[3*((F$y+F$n)*F$m+F$J-F$K)+1]=F$K,this._check(0<F$K)}if(0<F$y)for(F$K=F$J;F$K<F$J+F$T;++F$K){for(F$$=0,F$n=F$y-1;0<=F$n&&0==this._cells[3*(F$K+F$n*F$m)];--F$n,F$$++);for(F$n=F$$;0<F$n;--F$n)this._cells[3*(F$K+(F$y-F$n)*F$m)+2]=F$n,this._check(0<F$n)}},F$y._check=function(F$J){0==F$J&&console.log("xtexMerger 错误啦")},F$y._clear=function(){for(var F$J=this._texCount=0;F$J<this._height;F$J++)this._rowInfo[F$J].spaceCount=this._width;for(var F$y=0;F$y<this._height;F$y++)for(var F$T=0;F$T<this._width;F$T++){var F$V=3*(F$y*this._width+F$T);this._cells[F$V]=0,this._cells[1+F$V]=this._width-F$T,this._cells[2+F$V]=this._width-F$y}this._failSize.width=this._width+1,this._failSize.height=this._height+1},F$J.__init$=function(){F$V=function(){function F$J(){this.spaceCount=0}return F$M(F$J,""),F$J}(),F$Z=function(){function F$J(){this.width=0,this.height=0}return F$M(F$J,""),F$J}()},F$J}(),F$I=function(){function F$E(F$J,F$y,F$T,F$V){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=F$J,this._height=F$y,this._gridSize=F$T,this._maxAtlaserCount=F$V,this._gridNumX=F$J/F$T,this._gridNumY=F$y/F$T,this._curAtlasIndex=0,this._atlaserArray=[]}F$M(F$E,"laya.webgl.atlas.AtlasResourceManager");var F$J=F$E.prototype;return F$J.setAtlasParam=function(F$J,F$y,F$T,F$V){if(1==this._setAtlasParam)return F$E._sid_=0,this._width=F$J,this._height=F$y,this._gridSize=F$T,this._maxAtlaserCount=F$V,this._gridNumX=F$J/F$T,this._gridNumY=F$y/F$T,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},F$J.pushData=function(F$J){var F$y,F$T=F$J.bitmap,F$V=-1,F$Z=null,F$m=0,F$R=0;for(F$m=0,F$y=this._atlaserArray.length;F$m<F$y&&(F$R=(this._curAtlasIndex+F$m)%F$y,-1==(F$V=(F$Z=this._atlaserArray[F$R]).findBitmapIsExist(F$T)));F$m++);if(-1!=F$V){var F$n=F$Z.InAtlasWebGLImagesOffsetValue[F$V];return F$B=F$n[0],F$o=F$n[1],F$Z.addToAtlas(F$J,F$B,F$o),!0}this._setAtlasParam=!1;for(var F$K=Math.ceil((F$J.bitmap.width+2)/this._gridSize),F$A=Math.ceil((F$J.bitmap.height+2)/this._gridSize),F$$=!1,F$e=0;F$e<2;F$e++){var F$M=this._maxAtlaserCount;for(F$m=0;F$m<F$M;F$m++){F$R=(this._curAtlasIndex+F$m)%F$M,this._atlaserArray.length-1>=F$R||this._atlaserArray.push(new F$_J(this._gridNumX,this._gridNumY,this._width,this._height,F$E._sid_++));var F$G=this._atlaserArray[F$R],F$B=0,F$o=0,F$s=F$G.addTex(1,F$K,F$A);if(F$s.ret){F$B=F$s.x*this._gridSize+1,F$o=F$s.y*this._gridSize+1,F$T.lock=!0,F$G.addToAtlasTexture(F$T,F$B,F$o),F$G.addToAtlas(F$J,F$B,F$o),F$$=!0,this._curAtlasIndex=F$R;break}}if(F$$)break;this._atlaserArray.push(new F$_J(this._gridNumX,this._gridNumY,this._width,this._height,F$E._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return F$$||console.log(">>>AtlasManager pushData error"),F$$},F$J.addToAtlas=function(F$J){laya.webgl.atlas.AtlasResourceManager.instance.pushData(F$J)},F$J.garbageCollection=function(){if(!0===this._needGC){for(var F$J=this._atlaserArray.length-this._maxAtlaserCount,F$y=0;F$y<F$J;F$y++)this._atlaserArray[F$y].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+F$J),this._atlaserArray.splice(0,F$J),this._needGC=!1}return!0},F$J.freeAll=function(){for(var F$J=0,F$y=this._atlaserArray.length;F$J<F$y;F$J++)this._atlaserArray[F$J].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},F$J.getAtlaserCount=function(){return this._atlaserArray.length},F$J.getAtlaserByIndex=function(F$J){return this._atlaserArray[F$J]},F$V(1,F$E,"instance",function(){return F$E._Instance||(F$E._Instance=new F$E(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),F$E._Instance}),F$V(1,F$E,"enabled",function(){return F$a.atlasEnable}),F$V(1,F$E,"atlasLimitWidth",function(){return F$E._atlasLimitWidth},function(F$J){F$E._atlasLimitWidth=F$J}),F$V(1,F$E,"atlasLimitHeight",function(){return F$E._atlasLimitHeight},function(F$J){F$E._atlasLimitHeight=F$J}),F$E._enable=function(){F$a.atlasEnable=!0},F$E._disable=function(){F$a.atlasEnable=!1},F$E.__init__=function(){F$E.atlasTextureWidth=2048,F$E.atlasTextureHeight=2048,F$E.maxTextureCount=6,F$E.atlasLimitWidth=512,F$E.atlasLimitHeight=512},F$E._atlasLimitWidth=0,F$E._atlasLimitHeight=0,F$E.gridSize=16,F$E.atlasTextureWidth=0,F$E.atlasTextureHeight=0,F$E.maxTextureCount=0,F$E._atlasRestore=0,F$E.BOARDER_TYPE_NO=0,F$E.BOARDER_TYPE_RIGHT=1,F$E.BOARDER_TYPE_LEFT=2,F$E.BOARDER_TYPE_BOTTOM=4,F$E.BOARDER_TYPE_TOP=8,F$E.BOARDER_TYPE_ALL=15,F$E._sid_=0,F$E._Instance=null,F$E}(),F$Y=function(){function F$J(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return F$M(F$J,"laya.webgl.atlas.MergeFillInfo"),F$J}(),F$U=function(){function F$y(){}return F$M(F$y,"laya.webgl.canvas.BlendMode"),F$y._init_=function(F$J){F$y.fns=[F$y.BlendNormal,F$y.BlendAdd,F$y.BlendMultiply,F$y.BlendScreen,F$y.BlendOverlay,F$y.BlendLight,F$y.BlendMask,F$y.BlendDestinationOut],F$y.targetFns=[F$y.BlendNormalTarget,F$y.BlendAddTarget,F$y.BlendMultiplyTarget,F$y.BlendScreenTarget,F$y.BlendOverlayTarget,F$y.BlendLightTarget,F$y.BlendMask,F$y.BlendDestinationOut]},F$y.BlendNormal=function(F$J){F$J.blendFunc(1,771)},F$y.BlendAdd=function(F$J){F$J.blendFunc(1,772)},F$y.BlendMultiply=function(F$J){F$J.blendFunc(774,771)},F$y.BlendScreen=function(F$J){F$J.blendFunc(1,1)},F$y.BlendOverlay=function(F$J){F$J.blendFunc(1,769)},F$y.BlendLight=function(F$J){F$J.blendFunc(1,1)},F$y.BlendNormalTarget=function(F$J){F$J.blendFunc(1,771)},F$y.BlendAddTarget=function(F$J){F$J.blendFunc(1,772)},F$y.BlendMultiplyTarget=function(F$J){F$J.blendFunc(774,771)},F$y.BlendScreenTarget=function(F$J){F$J.blendFunc(1,1)},F$y.BlendOverlayTarget=function(F$J){F$J.blendFunc(1,769)},F$y.BlendLightTarget=function(F$J){F$J.blendFunc(1,1)},F$y.BlendMask=function(F$J){F$J.blendFunc(0,770)},F$y.BlendDestinationOut=function(F$J){F$J.blendFunc(0,0)},F$y.activeBlendFunction=null,F$y.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],F$y.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},F$y.NORMAL="normal",F$y.ADD="add",F$y.MULTIPLY="multiply",F$y.SCREEN="screen",F$y.LIGHT="light",F$y.OVERLAY="overlay",F$y.DESTINATIONOUT="destination-out",F$y.fns=[],F$y.targetFns=[],F$y}(),F$d=function(){function F$T(F$J){this._color=F$B.create("black"),this.setValue(F$J)}F$M(F$T,"laya.webgl.canvas.DrawStyle");var F$J=F$T.prototype;return F$J.setValue=function(F$J){if(F$J){if("string"==typeof F$J)return void(this._color=F$B.create(F$J));if(F$J instanceof laya.utils.Color)return void(this._color=F$J)}},F$J.reset=function(){this._color=F$B.create("black")},F$J.equal=function(F$J){return"string"==typeof F$J?this._color.strColor===F$J:F$J instanceof laya.utils.Color&&this._color.numColor===F$J.numColor},F$J.toColorStr=function(){return this._color.strColor},F$T.create=function(F$J){var F$y;if(F$J&&("string"==typeof F$J?F$y=F$B.create(F$J):F$J instanceof laya.utils.Color&&(F$y=F$J),F$y))return F$y._drawStyle||(F$y._drawStyle=new F$T(F$J));return laya.webgl.canvas.DrawStyle.DEFAULT},F$R(F$T,["DEFAULT",function(){return this.DEFAULT=new F$T("#000000")}]),F$T}(),F$C=function(){function F$J(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];F$HJ.mainContext;this.ib=F$wJ.create(35048),this.vb=F$zJ.create(5)}F$M(F$J,"laya.webgl.canvas.Path");var F$y=F$J.prototype;return F$y.addPoint=function(F$J,F$y){this.tempArray.push(F$J,F$y)},F$y.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},F$y.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},F$y.polygon=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R;return this.geomatrys.push(this._curGeomatry=F$R=new F$iJ(F$J,F$y,F$T,F$V,F$Z,F$m)),F$V||(F$R.fill=!1),null==F$m&&(F$R.borderWidth=0),F$R},F$y.setGeomtry=function(F$J){this.geomatrys.push(this._curGeomatry=F$J)},F$y.drawLine=function(F$J,F$y,F$T,F$V,F$Z){var F$m;return this.closePath?this.geomatrys.push(this._curGeomatry=F$m=new F$QJ(F$J,F$y,F$T,F$V,F$Z)):this.geomatrys.push(this._curGeomatry=F$m=new F$vJ(F$J,F$y,F$T,F$V,F$Z)),F$m.fill=!1,F$m},F$y.update=function(){var F$J=this.ib._byteLength,F$y=this.geomatrys.length;this.offset=F$J;for(var F$T=this.geoStart;F$T<F$y;F$T++)this.geomatrys[F$T].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=F$y,this.count=(this.ib._byteLength-F$J)/F$oJ.BYTES_PIDX},F$y.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},F$y.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},F$J}(),F$F=function(){function F$n(){}F$M(F$n,"laya.webgl.canvas.save.SaveBase");var F$J=F$n.prototype;return F$l.imps(F$J,{"laya.webgl.canvas.save.ISaveData":!0}),F$J.isSaveMark=function(){return!1},F$J.restore=function(F$J){this._dataObj[this._valueName]=this._value,(F$n._cache[F$n._cache._length++]=this)._newSubmit&&(F$J._curSubmit=F$mJ.RENDERBASE,F$J._renderKey=0)},F$n._createArray=function(){var F$J=[];return F$J._length=0,F$J},F$n._init=function(){var F$J=F$n._namemap={};return F$J[1]="ALPHA",F$J[2]="fillStyle",F$J[8]="font",F$J[256]="lineWidth",F$J[512]="strokeStyle",F$J[8192]="_mergeID",F$J[1024]=F$J[2048]=F$J[4096]=[],F$J[16384]="textBaseline",F$J[32768]="textAlign",F$J[65536]="_nBlendType",F$J[1048576]="shader",F$J[2097152]="filters",F$J},F$n.save=function(F$J,F$y,F$T,F$V){if((F$J._saveMark._saveuse&F$y)!==F$y){F$J._saveMark._saveuse|=F$y;var F$Z=F$n._cache,F$m=0<F$Z._length?F$Z[--F$Z._length]:new F$n;F$m._value=F$T[F$m._valueName=F$n._namemap[F$y]],F$m._dataObj=F$T,F$m._newSubmit=F$V;var F$R=F$J._save;F$R[F$R._length++]=F$m}},F$n._cache=laya.webgl.canvas.save.SaveBase._createArray(),F$n._namemap=F$n._init(),F$n}(),F$b=function(){function F$m(){this._clipRect=new F$_}F$M(F$m,"laya.webgl.canvas.save.SaveClipRect");var F$J=F$m.prototype;return F$l.imps(F$J,{"laya.webgl.canvas.save.ISaveData":!0}),F$J.isSaveMark=function(){return!1},F$J.restore=function(F$J){F$J._clipRect=this._clipSaveRect,(F$m._cache[F$m._cache._length++]=this)._submitScissor.submitLength=F$J._submits._length-this._submitScissor.submitIndex,F$J._curSubmit=F$mJ.RENDERBASE,F$J._renderKey=0},F$m.save=function(F$J,F$y){if(131072!=(131072&F$J._saveMark._saveuse)){F$J._saveMark._saveuse|=131072;var F$T=F$m._cache,F$V=0<F$T._length?F$T[--F$T._length]:new F$m;F$V._clipSaveRect=F$J._clipRect,F$J._clipRect=F$V._clipRect.copyFrom(F$J._clipRect),F$V._submitScissor=F$y;var F$Z=F$J._save;F$Z[F$Z._length++]=F$V}},F$R(F$m,["_cache",function(){return this._cache=F$F._createArray()}]),F$m}(),F$h=function(){function F$G(){this._contextX=0,this._contextY=0,this._clipRect=new F$_,this._rect=new F$_,this._matrix=new F$r}F$M(F$G,"laya.webgl.canvas.save.SaveClipRectStencil");var F$J=F$G.prototype;return F$l.imps(F$J,{"laya.webgl.canvas.save.ISaveData":!0}),F$J.isSaveMark=function(){return!1},F$J.restore=function(F$J){F$$J.restore(F$J,this._rect,this._saveMatrix,this._contextX,this._contextY),F$J._clipRect=this._clipSaveRect,F$J._curMat=this._saveMatrix,F$J._x=this._contextX,F$J._y=this._contextY,F$G._cache[F$G._cache._length++]=this,F$J._curSubmit=F$mJ.RENDERBASE},F$G.save=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){if(262144!=(262144&F$J._saveMark._saveuse)){F$J._saveMark._saveuse|=262144;var F$$=F$G._cache,F$e=0<F$$._length?F$$[--F$$._length]:new F$G;F$e._clipSaveRect=F$J._clipRect,F$e._clipRect.setTo(F$R,F$n,F$K,F$A),F$J._clipRect=F$e._clipRect,F$e._rect.x=F$T,F$e._rect.y=F$V,F$e._rect.width=F$Z,F$e._rect.height=F$m,F$e._contextX=F$J._x,F$e._contextY=F$J._y,F$e._saveMatrix=F$J._curMat,F$J._curMat.copyTo(F$e._matrix),F$J._curMat=F$e._matrix,F$e._submitStencil=F$y;var F$M=F$J._save;F$M[F$M._length++]=F$e}},F$R(F$G,["_cache",function(){return this._cache=F$F._createArray()}]),F$G}(),F$p=function(){function F$V(){this._saveuse=0}F$M(F$V,"laya.webgl.canvas.save.SaveMark");var F$J=F$V.prototype;return F$l.imps(F$J,{"laya.webgl.canvas.save.ISaveData":!0}),F$J.isSaveMark=function(){return!0},F$J.restore=function(F$J){F$J._saveMark=this._preSaveMark,F$V._no[F$V._no._length++]=this},F$V.Create=function(F$J){var F$y=F$V._no,F$T=0<F$y._length?F$y[--F$y._length]:new F$V;return F$T._saveuse=0,F$T._preSaveMark=F$J._saveMark,F$J._saveMark=F$T},F$R(F$V,["_no",function(){return this._no=F$F._createArray()}]),F$V}(),F$j=function(){function F$m(){this._matrix=new F$r}F$M(F$m,"laya.webgl.canvas.save.SaveTransform");var F$J=F$m.prototype;return F$l.imps(F$J,{"laya.webgl.canvas.save.ISaveData":!0}),F$J.isSaveMark=function(){return!1},F$J.restore=function(F$J){F$J._curMat=this._savematrix,F$m._no[F$m._no._length++]=this},F$m.save=function(F$J){var F$y=F$J._saveMark;if(2048!=(2048&F$y._saveuse)){F$y._saveuse|=2048;var F$T=F$m._no,F$V=0<F$T._length?F$T[--F$T._length]:new F$m;F$V._savematrix=F$J._curMat,F$J._curMat=F$J._curMat.copyTo(F$V._matrix);var F$Z=F$J._save;F$Z[F$Z._length++]=F$V}},F$R(F$m,["_no",function(){return this._no=F$F._createArray()}]),F$m}(),F$g=function(){function F$Z(){}F$M(F$Z,"laya.webgl.canvas.save.SaveTranslate");var F$J=F$Z.prototype;return F$l.imps(F$J,{"laya.webgl.canvas.save.ISaveData":!0}),F$J.isSaveMark=function(){return!1},F$J.restore=function(F$J){F$J._curMat;F$J._x=this._x,F$J._y=this._y,F$Z._no[F$Z._no._length++]=this},F$Z.save=function(F$J){var F$y=F$Z._no,F$T=0<F$y._length?F$y[--F$y._length]:new F$Z;F$T._x=F$J._x,F$T._y=F$J._y;var F$V=F$J._save;F$V[F$V._length++]=F$T},F$R(F$Z,["_no",function(){return this._no=F$F._createArray()}]),F$Z}(),F$N=function(){function F$J(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new F$_}F$M(F$J,"laya.webgl.resource.RenderTargetMAX");var F$y=F$J.prototype;return F$y.setSP=function(F$J){this._sp=F$J},F$y.size=function(F$J,F$y){var F$T=this;this._width!==F$J||this._height!==F$y?(this.repaint=!0,this._width=F$J,this._height=F$y,this.target?this.target.size(F$J,F$y):this.target=F$XJ.create(F$J,F$y),this.target.hasListener("recovered")||this.target.on("recovered",this,function(F$J){F$l.timer.callLater(F$T._sp,F$T._sp.repaint)})):this.target.size(F$J,F$y)},F$y._flushToTarget=function(F$J,F$y){if(!F$y._destroy){var F$T=F$OJ.worldScissorTest,F$V=F$OJ.worldClipRect;F$OJ.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,F$OJ.worldScissorTest=!1,F$HJ.mainContext.disable(3089);var F$Z=F$OJ.worldAlpha,F$m=F$OJ.worldMatrix4,F$R=F$OJ.worldMatrix,F$n=F$OJ.worldFilters,F$K=F$OJ.worldShaderDefines;if(F$OJ.worldMatrix=F$r.EMPTY,F$OJ.restoreTempArray(),F$OJ.worldMatrix4=F$OJ.TEMPMAT4_ARRAY,F$OJ.worldAlpha=1,F$OJ.worldFilters=null,F$OJ.worldShaderDefines=null,F$kJ.activeShader=null,F$y.start(),F$a.showCanvasMark?F$y.clear(0,1,0,.3):F$y.clear(0,0,0,0),F$J.flush(),F$y.end(),F$kJ.activeShader=null,F$OJ.worldAlpha=F$Z,F$OJ.worldMatrix4=F$m,F$OJ.worldMatrix=F$R,F$OJ.worldFilters=F$n,F$OJ.worldShaderDefines=F$K,F$OJ.worldScissorTest=F$T){var F$A=F$OJ.height-F$V.y-F$V.height;F$HJ.mainContext.scissor(F$V.x,F$A,F$V.width,F$V.height),F$HJ.mainContext.enable(3089)}F$OJ.worldClipRect=F$V}},F$y.flush=function(F$J){this.repaint&&(this._flushToTarget(F$J,this.target),this.repaint=!1)},F$y.drawTo=function(F$J,F$y,F$T,F$V,F$Z){F$J.drawTexture(this.target.getTexture(),F$y,F$T,F$V,F$Z,0,0)},F$y.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},F$J}(),F$w=function(){function F$J(){this.ALPHA=1,this.shaderType=0,this.defines=new F$tJ}return F$M(F$J,"laya.webgl.shader.d2.Shader2D"),F$J.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},F$J.__init__=function(){var F$J,F$y;F$pJ.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),F$pJ.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),F$pJ.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),F$pJ.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),F$pJ.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),F$pJ.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),F$pJ.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),F$pJ.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),F$J="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",F$y='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',F$pJ.preCompile2D(0,1,F$J,F$y,null),F$J="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",F$y='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',F$pJ.preCompile2D(0,2,F$J,F$y,null),F$J="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",F$y="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",F$pJ.preCompile2D(0,4,F$J,F$y,null),F$J="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",F$y='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',F$pJ.preCompile2D(0,256,F$J,F$y,null),F$J="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",F$y="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",F$pJ.preCompile2D(0,512,F$J,F$y,null)},F$J}(),F$z=function(){function F$y(F$J,F$y,F$T){this._value=0,this._name2int=F$J,this._int2name=F$y,this._int2nameMap=F$T}F$M(F$y,"laya.webgl.shader.ShaderDefines");var F$J=F$y.prototype;return F$J.add=function(F$J){return"string"==typeof F$J&&(F$J=this._name2int[F$J]),this._value|=F$J,this._value},F$J.addInt=function(F$J){return this._value|=F$J,this._value},F$J.remove=function(F$J){return"string"==typeof F$J&&(F$J=this._name2int[F$J]),this._value&=~F$J,this._value},F$J.isDefine=function(F$J){return(this._value&F$J)===F$J},F$J.getValue=function(){return this._value},F$J.setValue=function(F$J){this._value=F$J},F$J.toNameDic=function(){var F$J=this._int2nameMap[this._value];return F$J||F$y._toText(this._value,this._int2name,this._int2nameMap)},F$y._reg=function(F$J,F$y,F$T,F$V){F$V[F$T[F$J]=F$y]=F$J},F$y._toText=function(F$J,F$y,F$T){var F$V=F$T[F$J];if(F$V)return F$V;for(var F$Z={},F$m=1,F$R=0;F$R<32&&!(F$J<(F$m=1<<F$R));F$R++)if(F$J&F$m){var F$n=F$y[F$m];F$n&&(F$Z[F$n]="")}return F$T[F$J]=F$Z},F$y._toInt=function(F$J,F$y){for(var F$T=F$J.split("."),F$V=0,F$Z=0,F$m=F$T.length;F$Z<F$m;F$Z++){var F$R=F$y[F$T[F$Z]];if(!F$R)throw new Error("Defines to int err:"+F$J+"/"+F$T[F$Z]);F$V|=F$R}return F$V},F$y}(),F$JJ=function(){function F$R(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new F$r}F$M(F$R,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var F$J=F$R.prototype;return F$J.init=function(F$J,F$y,F$T){if(F$y)this._vs=F$y;else{this._vs=[];var F$V=F$J.width,F$Z=F$J.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(F$V,0,1,0,1,1,1,1),this._vs.push(F$V,F$Z,1,1,1,1,1,1),this._vs.push(0,F$Z,0,1,1,1,1,1)}F$T?this._ps=F$T:(F$R._defaultPS||(F$R._defaultPS=[]).push(0,1,3,3,1,2),this._ps=F$R._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=F$J},F$J.init2=function(F$J,F$y,F$T,F$V,F$Z){this.transform&&(this.transform=null),F$T?this._ps=F$T:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=F$V,this._uvs=F$Z,this.mEleNum=this._ps.length,this.mTexture=F$J,(F$E.isConchNode||F$E.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},F$J._initMyData=function(){var F$J=0,F$y=0,F$T=4*this._verticles.length;this._vs=F$R._tempVS;var F$V=!1;if(F$E.isConchNode||F$E.isConchApp?(this._vs.length=F$T,F$V=!0):this._vs.length<F$T&&(this._vs.length=F$T,F$V=!0),F$R._tVSLen=F$T,F$V)for(;F$J<F$T;)this._vs[F$J]=this._verticles[F$y],this._vs[F$J+1]=this._verticles[F$y+1],this._vs[F$J+2]=this._uvs[F$y],this._vs[F$J+3]=this._uvs[F$y+1],this._vs[F$J+4]=1,this._vs[F$J+5]=1,this._vs[F$J+6]=1,this._vs[F$J+7]=1,F$J+=8,F$y+=2;else for(;F$J<F$T;)this._vs[F$J]=this._verticles[F$y],this._vs[F$J+1]=this._verticles[F$y+1],this._vs[F$J+2]=this._uvs[F$y],this._vs[F$J+3]=this._uvs[F$y+1],F$J+=8,F$y+=2},F$J.getData2=function(F$J,F$y,F$T){var F$V;this.mVBBuffer=F$J,this.mIBBuffer=F$y,this._initMyData(),F$J.appendEx2(this._vs,Float32Array,F$R._tVSLen,4),this._indexStart=F$y._byteLength,(F$V=F$R._tempIB).length<this._ps.length&&(F$V.length=this._ps.length);for(var F$Z=0,F$m=this._ps.length;F$Z<F$m;F$Z++)F$V[F$Z]=this._ps[F$Z]+F$T;F$y.appendEx2(F$V,Uint16Array,this._ps.length,2)},F$J.getData=function(F$J,F$y,F$T){if(this.mVBBuffer=F$J,this.mIBBuffer=F$y,F$J.append(this.mVBData),this._indexStart=F$y._byteLength,this.mIBData.start!=F$T){for(var F$V=0,F$Z=this._ps.length;F$V<F$Z;F$V++)this.mIBData[F$V]=this._ps[F$V]+F$T;this.mIBData.start=F$T}F$y.append(this.mIBData)},F$J.render=function(F$J,F$y,F$T){if(F$E.isWebGL&&this.mTexture){F$J._renderKey=0,F$J._shader2D.glTexture=null,F$yJ.getInstance().addSkinMesh(this);var F$V=F$mJ.createShape(F$J,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,F$qJ.create(512,0));this.transform||(this.transform=F$r.EMPTY),this.transform.translate(F$y,F$T),F$r.mul(this.transform,F$J._curMat,this._tempMatrix),this.transform.translate(-F$y,-F$T);var F$Z=F$V.shaderValue,F$m=F$Z.u_mmat2||F$OJ.getMatrArray();F$OJ.mat2MatArray(this._tempMatrix,F$m),F$Z.textureHost=this.mTexture,F$Z.offsetX=0,F$Z.offsetY=0,F$Z.u_mmat2=F$m,F$Z.ALPHA=F$J._shader2D.ALPHA,F$J._submits[F$J._submits._length++]=F$V}else F$E.isConchApp&&this.mTexture&&(this.transform||(this.transform=F$r.EMPTY),F$J.setSkinMesh&&F$J.setSkinMesh(F$y,F$T,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},F$R._tempVS=[],F$R._tempIB=[],F$R._defaultPS=null,F$R._tVSLen=0,F$R}(),F$yJ=function(){function F$J(){this.ib=null,this.vb=null;F$HJ.mainContext;this.ib=F$wJ.create(35048),this.vb=F$zJ.create(8)}F$M(F$J,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var F$y=F$J.prototype;return F$y.addSkinMesh=function(F$J){F$J.getData2(this.vb,this.ib,this.vb._byteLength/32)},F$y.reset=function(){this.vb.clear(),this.ib.clear()},F$J.getInstance=function(){return F$J.instance=F$J.instance||new F$J},F$J.instance=null,F$J}(),F$TJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===F$K&&(F$K=0),this.x=F$J,this.y=F$y,this.width=F$T,this.height=F$V,this.edges=F$Z,this.color=F$m,this.borderWidth=F$R,this.borderColor=F$n}F$M(F$J,"laya.webgl.shapes.BasePoly");var F$y=F$J.prototype;return F$l.imps(F$y,{"laya.webgl.shapes.IShape":!0}),F$y.getData=function(F$J,F$y,F$T){},F$y.rebuild=function(F$J){},F$y.setMatrix=function(F$J){},F$y.needUpdate=function(F$J){return!0},F$y.sector=function(F$J,F$y,F$T){var F$V=this.x,F$Z=this.y,F$m=this.edges,F$R=(this.r1-this.r0)/F$m,F$n=this.width,F$K=this.height,F$A=this.color,F$$=(F$A>>16&255)/255,F$e=(F$A>>8&255)/255,F$M=(255&F$A)/255;F$J.push(F$V,F$Z,F$$,F$e,F$M);for(var F$G=0;F$G<F$m+1;F$G++)F$J.push(F$V+Math.sin(F$R*F$G+this.r0)*F$n,F$Z+Math.cos(F$R*F$G+this.r0)*F$K),F$J.push(F$$,F$e,F$M);for(F$G=0;F$G<F$m;F$G++)F$y.push(F$T,F$T+F$G+1,F$T+F$G+2)},F$y.createLine2=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R,F$n,F$K,F$A,F$$,F$e,F$M,F$G,F$B,F$o,F$s,F$E,F$O,F$L,F$H,F$P,F$l,F$a,F$q,F$r,F$D=F$J.concat(),F$_=F$Z,F$t=this.borderColor,F$v=(F$t>>16&255)/255,F$Q=(F$t>>8&255)/255,F$i=(255&F$t)/255,F$c=F$D.length/2,F$u=F$V,F$x=F$T/2;F$K=F$D[0],F$A=F$D[1],F$o=F$K-(F$$=F$D[2]),F$B=(F$B=-(F$A-(F$e=F$D[3])))/(F$r=Math.sqrt(F$B*F$B+F$o*F$o))*F$x,F$o=F$o/F$r*F$x,F$_.push(F$K-F$B+this.x,F$A-F$o+this.y,F$v,F$Q,F$i,F$K+F$B+this.x,F$A+F$o+this.y,F$v,F$Q,F$i);for(var F$k=1;F$k<F$c-1;F$k++)F$K=F$D[2*(F$k-1)],F$A=F$D[2*(F$k-1)+1],F$$=F$D[2*F$k],F$e=F$D[2*F$k+1],F$M=F$D[2*(F$k+1)],F$G=F$D[2*(F$k+1)+1],F$o=F$K-F$$,F$E=F$$-F$M,F$H=(-(F$B=(F$B=-(F$A-F$e))/(F$r=Math.sqrt(F$B*F$B+F$o*F$o))*F$x)+F$K)*(-(F$o=F$o/F$r*F$x)+F$e)-(-F$B+F$$)*(-F$o+F$A),F$a=(-(F$s=(F$s=-(F$e-F$G))/(F$r=Math.sqrt(F$s*F$s+F$E*F$E))*F$x)+F$M)*(-(F$E=F$E/F$r*F$x)+F$e)-(-F$s+F$$)*(-F$E+F$G),F$q=(F$O=-F$o+F$A-(-F$o+F$e))*(F$l=-F$s+F$$-(-F$s+F$M))-(F$P=-F$E+F$G-(-F$E+F$e))*(F$L=-F$B+F$$-(-F$B+F$K)),Math.abs(F$q)<.1?(F$q+=10.1,F$_.push(F$$-F$B+this.x,F$e-F$o+this.y,F$v,F$Q,F$i,F$$+F$B+this.x,F$e+F$o+this.y,F$v,F$Q,F$i)):(((F$R=(F$L*F$a-F$l*F$H)/F$q)-F$$)*(F$R-F$$)+((F$n=(F$P*F$H-F$O*F$a)/F$q)-F$e)+(F$n-F$e),F$_.push(F$R+this.x,F$n+this.y,F$v,F$Q,F$i,F$$-(F$R-F$$)+this.x,F$e-(F$n-F$e)+this.y,F$v,F$Q,F$i));F$K=F$D[F$D.length-4],F$A=F$D[F$D.length-3],F$o=F$K-(F$$=F$D[F$D.length-2]),F$B=(F$B=-(F$A-(F$e=F$D[F$D.length-1])))/(F$r=Math.sqrt(F$B*F$B+F$o*F$o))*F$x,F$o=F$o/F$r*F$x,F$_.push(F$$-F$B+this.x,F$e-F$o+this.y,F$v,F$Q,F$i,F$$+F$B+this.x,F$e+F$o+this.y,F$v,F$Q,F$i);var F$X=F$m;for(F$k=1;F$k<F$X;F$k++)F$y.push(F$u+2*(F$k-1),F$u+2*(F$k-1)+1,F$u+2*F$k+1,F$u+2*F$k+1,F$u+2*F$k,F$u+2*(F$k-1));return F$_},F$y.createLine=function(F$J,F$y,F$T,F$V){var F$Z=F$J.concat(),F$m=F$J,F$R=this.borderColor,F$n=(F$R>>16&255)/255,F$K=(F$R>>8&255)/255,F$A=(255&F$R)/255;F$Z.splice(0,5);var F$$,F$e,F$M,F$G,F$B,F$o,F$s,F$E,F$O,F$L,F$H,F$P,F$l,F$a,F$q,F$r,F$D,F$_,F$t,F$v,F$Q=F$Z.length/5,F$i=F$V,F$c=F$T/2;F$M=F$Z[0],F$G=F$Z[1],F$L=F$M-(F$B=F$Z[5]),F$O=(F$O=-(F$G-(F$o=F$Z[6])))/(F$v=Math.sqrt(F$O*F$O+F$L*F$L))*F$c,F$L=F$L/F$v*F$c,F$m.push(F$M-F$O,F$G-F$L,F$n,F$K,F$A,F$M+F$O,F$G+F$L,F$n,F$K,F$A);for(var F$u=1;F$u<F$Q-1;F$u++)F$M=F$Z[5*(F$u-1)],F$G=F$Z[5*(F$u-1)+1],F$B=F$Z[5*F$u],F$o=F$Z[5*F$u+1],F$s=F$Z[5*(F$u+1)],F$E=F$Z[5*(F$u+1)+1],F$L=F$M-F$B,F$P=F$B-F$s,F$q=(-(F$O=(F$O=-(F$G-F$o))/(F$v=Math.sqrt(F$O*F$O+F$L*F$L))*F$c)+F$M)*(-(F$L=F$L/F$v*F$c)+F$o)-(-F$O+F$B)*(-F$L+F$G),F$_=(-(F$H=(F$H=-(F$o-F$E))/(F$v=Math.sqrt(F$H*F$H+F$P*F$P))*F$c)+F$s)*(-(F$P=F$P/F$v*F$c)+F$o)-(-F$H+F$B)*(-F$P+F$E),F$t=(F$l=-F$L+F$G-(-F$L+F$o))*(F$D=-F$H+F$B-(-F$H+F$s))-(F$r=-F$P+F$E-(-F$P+F$o))*(F$a=-F$O+F$B-(-F$O+F$M)),Math.abs(F$t)<.1?(F$t+=10.1,F$m.push(F$B-F$O,F$o-F$L,F$n,F$K,F$A,F$B+F$O,F$o+F$L,F$n,F$K,F$A)):(((F$$=(F$a*F$_-F$D*F$q)/F$t)-F$B)*(F$$-F$B)+((F$e=(F$r*F$q-F$l*F$_)/F$t)-F$o)+(F$e-F$o),F$m.push(F$$,F$e,F$n,F$K,F$A,F$B-(F$$-F$B),F$o-(F$e-F$o),F$n,F$K,F$A));F$M=F$Z[F$Z.length-10],F$G=F$Z[F$Z.length-9],F$L=F$M-(F$B=F$Z[F$Z.length-5]),F$O=(F$O=-(F$G-(F$o=F$Z[F$Z.length-4])))/(F$v=Math.sqrt(F$O*F$O+F$L*F$L))*F$c,F$L=F$L/F$v*F$c,F$m.push(F$B-F$O,F$o-F$L,F$n,F$K,F$A,F$B+F$O,F$o+F$L,F$n,F$K,F$A);var F$x=this.edges+1;for(F$u=1;F$u<F$x;F$u++)F$y.push(F$i+2*(F$u-1),F$i+2*(F$u-1)+1,F$i+2*F$u+1,F$i+2*F$u+1,F$i+2*F$u,F$i+2*(F$u-1));return F$m},F$y.createLoopLine=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=F$J.concat(),F$n=F$Z||F$J,F$K=this.borderColor,F$A=(F$K>>16&255)/255,F$$=(F$K>>8&255)/255,F$e=(255&F$K)/255;F$R.splice(0,5);var F$M=[F$R[0],F$R[1]],F$G=[F$R[F$R.length-5],F$R[F$R.length-4]],F$B=F$G[0]+.5*(F$M[0]-F$G[0]),F$o=F$G[1]+.5*(F$M[1]-F$G[1]);F$R.unshift(F$B,F$o,0,0,0),F$R.push(F$B,F$o,0,0,0);var F$s,F$E,F$O,F$L,F$H,F$P,F$l,F$a,F$q,F$r,F$D,F$_,F$t,F$v,F$Q,F$i,F$c,F$u,F$x,F$k,F$X=F$R.length/5,F$S=F$V,F$f=F$T/2;F$O=F$R[0],F$L=F$R[1],F$r=F$O-(F$H=F$R[5]),F$q=(F$q=-(F$L-(F$P=F$R[6])))/(F$k=Math.sqrt(F$q*F$q+F$r*F$r))*F$f,F$r=F$r/F$k*F$f,F$n.push(F$O-F$q,F$L-F$r,F$A,F$$,F$e,F$O+F$q,F$L+F$r,F$A,F$$,F$e);for(var F$W=1;F$W<F$X-1;F$W++)F$O=F$R[5*(F$W-1)],F$L=F$R[5*(F$W-1)+1],F$H=F$R[5*F$W],F$P=F$R[5*F$W+1],F$l=F$R[5*(F$W+1)],F$a=F$R[5*(F$W+1)+1],F$r=F$O-F$H,F$_=F$H-F$l,F$Q=(-(F$q=(F$q=-(F$L-F$P))/(F$k=Math.sqrt(F$q*F$q+F$r*F$r))*F$f)+F$O)*(-(F$r=F$r/F$k*F$f)+F$P)-(-F$q+F$H)*(-F$r+F$L),F$u=(-(F$D=(F$D=-(F$P-F$a))/(F$k=Math.sqrt(F$D*F$D+F$_*F$_))*F$f)+F$l)*(-(F$_=F$_/F$k*F$f)+F$P)-(-F$D+F$H)*(-F$_+F$a),F$x=(F$t=-F$r+F$L-(-F$r+F$P))*(F$c=-F$D+F$H-(-F$D+F$l))-(F$i=-F$_+F$a-(-F$_+F$P))*(F$v=-F$q+F$H-(-F$q+F$O)),Math.abs(F$x)<.1?(F$x+=10.1,F$n.push(F$H-F$q,F$P-F$r,F$A,F$$,F$e,F$H+F$q,F$P+F$r,F$A,F$$,F$e)):(((F$s=(F$v*F$u-F$c*F$Q)/F$x)-F$H)*(F$s-F$H)+((F$E=(F$i*F$Q-F$t*F$u)/F$x)-F$P)+(F$E-F$P),F$n.push(F$s,F$E,F$A,F$$,F$e,F$H-(F$s-F$H),F$P-(F$E-F$P),F$A,F$$,F$e));F$m&&(F$y=F$m);var F$I=this.edges+1;for(F$W=1;F$W<F$I;F$W++)F$y.push(F$S+2*(F$W-1),F$S+2*(F$W-1)+1,F$S+2*F$W+1,F$S+2*F$W+1,F$S+2*F$W,F$S+2*(F$W-1));return F$y.push(F$S+2*(F$W-1),F$S+2*(F$W-1)+1,F$S+1,F$S+1,F$S,F$S+2*(F$W-1)),F$n},F$J}(),F$VJ=function(){function F$o(){}return F$M(F$o,"laya.webgl.shapes.Earcut"),F$o.earcut=function(F$J,F$y,F$T){F$T=F$T||2;var F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$=F$y&&F$y.length,F$e=F$$?F$y[0]*F$T:F$J.length,F$M=F$o.linkedList(F$J,0,F$e,F$T,!0),F$G=[];if(!F$M)return F$G;if(F$$&&(F$M=F$o.eliminateHoles(F$J,F$y,F$M,F$T)),F$J.length>80*F$T){F$V=F$m=F$J[0],F$Z=F$R=F$J[1];for(var F$B=F$T;F$B<F$e;F$B+=F$T)(F$n=F$J[F$B])<F$V&&(F$V=F$n),(F$K=F$J[F$B+1])<F$Z&&(F$Z=F$K),F$m<F$n&&(F$m=F$n),F$R<F$K&&(F$R=F$K);F$A=0!==(F$A=Math.max(F$m-F$V,F$R-F$Z))?1/F$A:0}return F$o.earcutLinked(F$M,F$G,F$T,F$V,F$Z,F$A),F$G},F$o.linkedList=function(F$J,F$y,F$T,F$V,F$Z){var F$m,F$R;if(F$Z===0<F$o.signedArea(F$J,F$y,F$T,F$V))for(F$m=F$y;F$m<F$T;F$m+=F$V)F$R=F$o.insertNode(F$m,F$J[F$m],F$J[F$m+1],F$R);else for(F$m=F$T-F$V;F$y<=F$m;F$m-=F$V)F$R=F$o.insertNode(F$m,F$J[F$m],F$J[F$m+1],F$R);return F$R&&F$o.equals(F$R,F$R.next)&&(F$o.removeNode(F$R),F$R=F$R.next),F$R},F$o.filterPoints=function(F$J,F$y){if(!F$J)return F$J;F$y||(F$y=F$J);var F$T,F$V=F$J;do{if(F$T=!1,F$V.steiner||!F$o.equals(F$V,F$V.next)&&0!==F$o.area(F$V.prev,F$V,F$V.next))F$V=F$V.next;else{if(F$o.removeNode(F$V),(F$V=F$y=F$V.prev)===F$V.next)break;F$T=!0}}while(F$T||F$V!==F$y);return F$y},F$o.earcutLinked=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){if(F$J){!F$R&&F$m&&F$o.indexCurve(F$J,F$V,F$Z,F$m);for(var F$n,F$K,F$A=F$J;F$J.prev!==F$J.next;)if(F$n=F$J.prev,F$K=F$J.next,F$m?F$o.isEarHashed(F$J,F$V,F$Z,F$m):F$o.isEar(F$J))F$y.push(F$n.i/F$T),F$y.push(F$J.i/F$T),F$y.push(F$K.i/F$T),F$o.removeNode(F$J),F$J=F$K.next,F$A=F$K.next;else if((F$J=F$K)===F$A){F$R?1===F$R?(F$J=F$o.cureLocalIntersections(F$J,F$y,F$T),F$o.earcutLinked(F$J,F$y,F$T,F$V,F$Z,F$m,2)):2===F$R&&F$o.splitEarcut(F$J,F$y,F$T,F$V,F$Z,F$m):F$o.earcutLinked(F$o.filterPoints(F$J,null),F$y,F$T,F$V,F$Z,F$m,1);break}}},F$o.isEar=function(F$J){var F$y=F$J.prev,F$T=F$J,F$V=F$J.next;if(0<=F$o.area(F$y,F$T,F$V))return!1;for(var F$Z=F$J.next.next;F$Z!==F$J.prev;){if(F$o.pointInTriangle(F$y.x,F$y.y,F$T.x,F$T.y,F$V.x,F$V.y,F$Z.x,F$Z.y)&&0<=F$o.area(F$Z.prev,F$Z,F$Z.next))return!1;F$Z=F$Z.next}return!0},F$o.isEarHashed=function(F$J,F$y,F$T,F$V){var F$Z=F$J.prev,F$m=F$J,F$R=F$J.next;if(0<=F$o.area(F$Z,F$m,F$R))return!1;for(var F$n=F$Z.x<F$m.x?F$Z.x<F$R.x?F$Z.x:F$R.x:F$m.x<F$R.x?F$m.x:F$R.x,F$K=F$Z.y<F$m.y?F$Z.y<F$R.y?F$Z.y:F$R.y:F$m.y<F$R.y?F$m.y:F$R.y,F$A=F$Z.x>F$m.x?F$Z.x>F$R.x?F$Z.x:F$R.x:F$m.x>F$R.x?F$m.x:F$R.x,F$$=F$Z.y>F$m.y?F$Z.y>F$R.y?F$Z.y:F$R.y:F$m.y>F$R.y?F$m.y:F$R.y,F$e=F$o.zOrder(F$n,F$K,F$y,F$T,F$V),F$M=F$o.zOrder(F$A,F$$,F$y,F$T,F$V),F$G=F$J.nextZ;F$G&&F$G.z<=F$M;){if(F$G!==F$J.prev&&F$G!==F$J.next&&F$o.pointInTriangle(F$Z.x,F$Z.y,F$m.x,F$m.y,F$R.x,F$R.y,F$G.x,F$G.y)&&0<=F$o.area(F$G.prev,F$G,F$G.next))return!1;F$G=F$G.nextZ}for(F$G=F$J.prevZ;F$G&&F$G.z>=F$e;){if(F$G!==F$J.prev&&F$G!==F$J.next&&F$o.pointInTriangle(F$Z.x,F$Z.y,F$m.x,F$m.y,F$R.x,F$R.y,F$G.x,F$G.y)&&0<=F$o.area(F$G.prev,F$G,F$G.next))return!1;F$G=F$G.prevZ}return!0},F$o.cureLocalIntersections=function(F$J,F$y,F$T){var F$V=F$J;do{var F$Z=F$V.prev,F$m=F$V.next.next;!F$o.equals(F$Z,F$m)&&F$o.intersects(F$Z,F$V,F$V.next,F$m)&&F$o.locallyInside(F$Z,F$m)&&F$o.locallyInside(F$m,F$Z)&&(F$y.push(F$Z.i/F$T),F$y.push(F$V.i/F$T),F$y.push(F$m.i/F$T),F$o.removeNode(F$V),F$o.removeNode(F$V.next),F$V=F$J=F$m),F$V=F$V.next}while(F$V!==F$J);return F$V},F$o.splitEarcut=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=F$J;do{for(var F$n=F$R.next.next;F$n!==F$R.prev;){if(F$R.i!==F$n.i&&F$o.isValidDiagonal(F$R,F$n)){var F$K=F$o.splitPolygon(F$R,F$n);return F$R=F$o.filterPoints(F$R,F$R.next),F$K=F$o.filterPoints(F$K,F$K.next),F$o.earcutLinked(F$R,F$y,F$T,F$V,F$Z,F$m),void F$o.earcutLinked(F$K,F$y,F$T,F$V,F$Z,F$m)}F$n=F$n.next}F$R=F$R.next}while(F$R!==F$J)},F$o.eliminateHoles=function(F$J,F$y,F$T,F$V){var F$Z,F$m,F$R,F$n,F$K,F$A=[];for(F$Z=0,F$m=F$y.length;F$Z<F$m;F$Z++)F$R=F$y[F$Z]*F$V,F$n=F$Z<F$m-1?F$y[F$Z+1]*F$V:F$J.length,(F$K=F$o.linkedList(F$J,F$R,F$n,F$V,!1))===F$K.next&&(F$K.steiner=!0),F$A.push(F$o.getLeftmost(F$K));for(F$A.sort(F$o.compareX),F$Z=0;F$Z<F$A.length;F$Z++)F$o.eliminateHole(F$A[F$Z],F$T),F$T=F$o.filterPoints(F$T,F$T.next);return F$T},F$o.compareX=function(F$J,F$y){return F$J.x-F$y.x},F$o.eliminateHole=function(F$J,F$y){if(F$y=F$o.findHoleBridge(F$J,F$y)){var F$T=F$o.splitPolygon(F$y,F$J);F$o.filterPoints(F$T,F$T.next)}},F$o.findHoleBridge=function(F$J,F$y){var F$T,F$V=F$y,F$Z=F$J.x,F$m=F$J.y,F$R=-1/0;do{if(F$m<=F$V.y&&F$m>=F$V.next.y&&F$V.next.y!==F$V.y){var F$n=F$V.x+(F$m-F$V.y)*(F$V.next.x-F$V.x)/(F$V.next.y-F$V.y);if(F$n<=F$Z&&F$R<F$n){if((F$R=F$n)===F$Z){if(F$m===F$V.y)return F$V;if(F$m===F$V.next.y)return F$V.next}F$T=F$V.x<F$V.next.x?F$V:F$V.next}}F$V=F$V.next}while(F$V!==F$y);if(!F$T)return null;if(F$Z===F$R)return F$T.prev;var F$K,F$A=F$T,F$$=F$T.x,F$e=F$T.y,F$M=1/0;for(F$V=F$T.next;F$V!==F$A;)F$Z>=F$V.x&&F$V.x>=F$$&&F$Z!==F$V.x&&F$o.pointInTriangle(F$m<F$e?F$Z:F$R,F$m,F$$,F$e,F$m<F$e?F$R:F$Z,F$m,F$V.x,F$V.y)&&((F$K=Math.abs(F$m-F$V.y)/(F$Z-F$V.x))<F$M||F$K===F$M&&F$V.x>F$T.x)&&F$o.locallyInside(F$V,F$J)&&(F$T=F$V,F$M=F$K),F$V=F$V.next;return F$T},F$o.indexCurve=function(F$J,F$y,F$T,F$V){for(var F$Z=F$J;null===F$Z.z&&(F$Z.z=F$o.zOrder(F$Z.x,F$Z.y,F$y,F$T,F$V)),F$Z.prevZ=F$Z.prev,F$Z.nextZ=F$Z.next,(F$Z=F$Z.next)!==F$J;);F$Z.prevZ.nextZ=null,F$Z.prevZ=null,F$o.sortLinked(F$Z)},F$o.sortLinked=function(F$J){var F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A=1;do{for(F$T=F$J,F$m=F$J=null,F$R=0;F$T;){for(F$R++,F$V=F$T,F$y=F$n=0;F$y<F$A&&(F$n++,F$V=F$V.nextZ);F$y++);for(F$K=F$A;0<F$n||0<F$K&&F$V;)0!==F$n&&(0===F$K||!F$V||F$T.z<=F$V.z)?(F$T=(F$Z=F$T).nextZ,F$n--):(F$V=(F$Z=F$V).nextZ,F$K--),F$m?F$m.nextZ=F$Z:F$J=F$Z,F$Z.prevZ=F$m,F$m=F$Z;F$T=F$V}F$m.nextZ=null,F$A*=2}while(1<F$R);return F$J},F$o.zOrder=function(F$J,F$y,F$T,F$V,F$Z){return(F$J=1431655765&((F$J=858993459&((F$J=252645135&((F$J=16711935&((F$J=32767*(F$J-F$T)*F$Z)|F$J<<8))|F$J<<4))|F$J<<2))|F$J<<1))|(F$y=1431655765&((F$y=858993459&((F$y=252645135&((F$y=16711935&((F$y=32767*(F$y-F$V)*F$Z)|F$y<<8))|F$y<<4))|F$y<<2))|F$y<<1))<<1},F$o.getLeftmost=function(F$J){for(var F$y=F$J,F$T=F$J;F$y.x<F$T.x&&(F$T=F$y),(F$y=F$y.next)!==F$J;);return F$T},F$o.pointInTriangle=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){return 0<=(F$Z-F$R)*(F$y-F$n)-(F$J-F$R)*(F$m-F$n)&&0<=(F$J-F$R)*(F$V-F$n)-(F$T-F$R)*(F$y-F$n)&&0<=(F$T-F$R)*(F$m-F$n)-(F$Z-F$R)*(F$V-F$n)},F$o.isValidDiagonal=function(F$J,F$y){return F$J.next.i!==F$y.i&&F$J.prev.i!==F$y.i&&!F$o.intersectsPolygon(F$J,F$y)&&F$o.locallyInside(F$J,F$y)&&F$o.locallyInside(F$y,F$J)&&F$o.middleInside(F$J,F$y)},F$o.area=function(F$J,F$y,F$T){return(F$y.y-F$J.y)*(F$T.x-F$y.x)-(F$y.x-F$J.x)*(F$T.y-F$y.y)},F$o.equals=function(F$J,F$y){return F$J.x===F$y.x&&F$J.y===F$y.y},F$o.intersects=function(F$J,F$y,F$T,F$V){return!!(F$o.equals(F$J,F$y)&&F$o.equals(F$T,F$V)||F$o.equals(F$J,F$V)&&F$o.equals(F$T,F$y))||0<F$o.area(F$J,F$y,F$T)!=0<F$o.area(F$J,F$y,F$V)&&0<F$o.area(F$T,F$V,F$J)!=0<F$o.area(F$T,F$V,F$y)},F$o.intersectsPolygon=function(F$J,F$y){var F$T=F$J;do{if(F$T.i!==F$J.i&&F$T.next.i!==F$J.i&&F$T.i!==F$y.i&&F$T.next.i!==F$y.i&&F$o.intersects(F$T,F$T.next,F$J,F$y))return!0;F$T=F$T.next}while(F$T!==F$J);return!1},F$o.locallyInside=function(F$J,F$y){return F$o.area(F$J.prev,F$J,F$J.next)<0?0<=F$o.area(F$J,F$y,F$J.next)&&0<=F$o.area(F$J,F$J.prev,F$y):F$o.area(F$J,F$y,F$J.prev)<0||F$o.area(F$J,F$J.next,F$y)<0},F$o.middleInside=function(F$J,F$y){for(var F$T=F$J,F$V=!1,F$Z=(F$J.x+F$y.x)/2,F$m=(F$J.y+F$y.y)/2;F$T.y>F$m!=F$T.next.y>F$m&&F$T.next.y!==F$T.y&&F$Z<(F$T.next.x-F$T.x)*(F$m-F$T.y)/(F$T.next.y-F$T.y)+F$T.x&&(F$V=!F$V),(F$T=F$T.next)!==F$J;);return F$V},F$o.splitPolygon=function(F$J,F$y){var F$T=new F$ZJ(F$J.i,F$J.x,F$J.y),F$V=new F$ZJ(F$y.i,F$y.x,F$y.y),F$Z=F$J.next,F$m=F$y.prev;return(F$J.next=F$y).prev=F$J,(F$T.next=F$Z).prev=F$T,(F$V.next=F$T).prev=F$V,(F$m.next=F$V).prev=F$m,F$V},F$o.insertNode=function(F$J,F$y,F$T,F$V){var F$Z=new F$ZJ(F$J,F$y,F$T);return F$V?(F$Z.next=F$V.next,(F$Z.prev=F$V).next.prev=F$Z,F$V.next=F$Z):(F$Z.prev=F$Z).next=F$Z,F$Z},F$o.removeNode=function(F$J){F$J.next.prev=F$J.prev,F$J.prev.next=F$J.next,F$J.prevZ&&(F$J.prevZ.nextZ=F$J.nextZ),F$J.nextZ&&(F$J.nextZ.prevZ=F$J.prevZ)},F$o.signedArea=function(F$J,F$y,F$T,F$V){for(var F$Z=0,F$m=F$y,F$R=F$T-F$V;F$m<F$T;F$m+=F$V)F$Z+=(F$J[F$R]-F$J[F$m])*(F$J[F$m+1]+F$J[F$R+1]),F$R=F$m;return F$Z},F$o}(),F$ZJ=function(){function F$J(F$J,F$y,F$T){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=F$J,this.x=F$y,this.y=F$T,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return F$M(F$J,"laya.webgl.shapes.EarcutNode"),F$J}(),F$mJ=(function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this.lineWidth=F$J,this.lineColor=F$y,this.lineAlpha=F$T,this.fillColor=F$V,this.fillAlpha=F$Z,this.shape=F$R,this.fill=F$m}F$M(F$J,"laya.webgl.shapes.GeometryData");var F$y=F$J.prototype;F$y.clone=function(){return new F$J(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},F$y.getIndexData=function(){return null},F$y.getVertexData=function(){return null},F$y.destroy=function(){this.shape=null}}(),function(){function F$J(F$J){if(F$J instanceof Float32Array)this.points=F$J;else if(F$J instanceof Array){F$J.length;this.points=new Float32Array(F$J)}}F$M(F$J,"laya.webgl.shapes.Vertex");var F$y=F$J.prototype;F$l.imps(F$y,{"laya.webgl.shapes.IShape":!0}),F$y.getData=function(F$J,F$y,F$T){},F$y.needUpdate=function(F$J){return!1},F$y.rebuild=function(F$J){},F$y.setMatrix=function(F$J){}}(),function(){function F$K(F$J){void 0===F$J&&(F$J=1e4),this._renderType=F$J}F$M(F$K,"laya.webgl.submit.Submit");var F$J=F$K.prototype;return F$l.imps(F$J,{"laya.webgl.submit.ISubmit":!0}),F$J.releaseRender=function(){var F$J=F$K._cache;(F$J[F$J._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$J.getRenderType=function(){return this._renderType},F$J.renderSubmit=function(){if(0===this._numEle)return 1;var F$J=this.shaderValue.textureHost;if(F$J){var F$y=F$J.source;if(!F$J.bitmap||!F$y)return 1;this.shaderValue.texture=F$y,F$J.alphaTexture&&F$J.alphaTexture.source&&(this.shaderValue.texture1=F$J.alphaTexture.source)}this._vb.bind_upload(this._ib);var F$T=F$HJ.mainContext;return this.shaderValue.upload(),F$U.activeBlendFunction!==this._blendFn&&(F$T.enable(3042),this._blendFn(F$T),F$U.activeBlendFunction=this._blendFn),F$Q.drawCall++,F$Q.trianglesFaces+=this._numEle/3,F$T.drawElements(4,this._numEle,5123,this._startIdx),1},F$K.__init__=function(){var F$J=F$K.RENDERBASE=new F$K(-1);F$J.shaderValue=new F$qJ(0,0),F$J.shaderValue.ALPHA=-1234},F$K.createSubmit=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$K._cache._length?F$K._cache[--F$K._cache._length]:new F$K;null==F$T&&((F$T=F$m._selfVb||(F$m._selfVb=F$zJ.create(-1))).clear(),F$V=0),F$m._ib=F$y,F$m._vb=F$T,F$m._startIdx=F$V*F$oJ.BYTES_PIDX,F$m._numEle=0;var F$R=F$J._nBlendType;F$m._blendFn=F$J._targets?F$U.targetFns[F$R]:F$U.fns[F$R],F$m.shaderValue=F$Z,F$m.shaderValue.setValue(F$J._shader2D);var F$n=F$J._shader2D.filters;return F$n&&F$m.shaderValue.setFilters(F$n),F$m},F$K.createShape=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=F$K._cache._length?F$K._cache[--F$K._cache._length]:new F$K;F$R._ib=F$y,F$R._vb=F$T,F$R._numEle=F$V,F$R._startIdx=F$Z,F$R.shaderValue=F$m,F$R.shaderValue.setValue(F$J._shader2D);var F$n=F$J._nBlendType;return F$R._blendFn=F$J._targets?F$U.targetFns[F$n]:F$U.fns[F$n],F$R},F$K.TYPE_2D=1e4,F$K.TYPE_CANVAS=10003,F$K.TYPE_CMDSETRT=10004,F$K.TYPE_CUSTOM=10005,F$K.TYPE_BLURRT=10006,F$K.TYPE_CMDDESTORYPRERT=10007,F$K.TYPE_DISABLESTENCIL=10008,F$K.TYPE_OTHERIBVB=10009,F$K.TYPE_PRIMITIVE=10010,F$K.TYPE_RT=10011,F$K.TYPE_BLUR_RT=10012,F$K.TYPE_TARGET=10013,F$K.TYPE_CHANGE_VALUE=10014,F$K.TYPE_SHAPE=10015,F$K.TYPE_TEXTURE=10016,F$K.TYPE_FILLTEXTURE=10017,F$K.RENDERBASE=null,F$K._cache=((F$K._cache=[])._length=0,F$K._cache),F$K}()),F$RJ=function(){function F$V(){this.fun=null,this.args=null}F$M(F$V,"laya.webgl.submit.SubmitCMD");var F$J=F$V.prototype;return F$l.imps(F$J,{"laya.webgl.submit.ISubmit":!0}),F$J.renderSubmit=function(){return this.fun.apply(null,this.args),1},F$J.getRenderType=function(){return 0},F$J.releaseRender=function(){var F$J=F$V._cache;F$J[F$J._length++]=this},F$V.create=function(F$J,F$y){var F$T=F$V._cache._length?F$V._cache[--F$V._cache._length]:new F$V;return F$T.fun=F$y,F$T.args=F$J,F$T},F$V._cache=((F$V._cache=[])._length=0,F$V._cache),F$V}(),F$nJ=function(){function F$y(){this.variables={}}F$M(F$y,"laya.webgl.submit.SubmitCMDScope");var F$J=F$y.prototype;return F$J.getValue=function(F$J){return this.variables[F$J]},F$J.addValue=function(F$J,F$y){return this.variables[F$J]=F$y},F$J.setValue=function(F$J,F$y){return this.variables.hasOwnProperty(F$J)?this.variables[F$J]=F$y:null},F$J.clear=function(){for(var F$J in this.variables)delete this.variables[F$J]},F$J.recycle=function(){this.clear(),F$y.POOL.push(this)},F$y.create=function(){var F$J=F$y.POOL.pop();return F$J||(F$J=new F$y),F$J},F$y.POOL=[],F$y}(),F$KJ=function(){function F$e(){this.offset=0,this.startIndex=0,this._mat=F$r.create()}F$M(F$e,"laya.webgl.submit.SubmitOtherIBVB");var F$J=F$e.prototype;return F$l.imps(F$J,{"laya.webgl.submit.ISubmit":!0}),F$J.releaseRender=function(){var F$J=F$e._cache;(F$J[F$J._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$J.getRenderType=function(){return 10009},F$J.renderSubmit=function(){var F$J=this._shaderValue.textureHost;if(F$J){var F$y=F$J.source;if(!F$J.bitmap||!F$y)return 1;this._shaderValue.texture=F$y}this._vb.bind_upload(this._ib);var F$T=F$OJ.worldMatrix4,F$V=F$r.TEMP;F$r.mulPre(this._mat,F$T[0],F$T[1],F$T[4],F$T[5],F$T[12],F$T[13],F$V);var F$Z=F$OJ.worldMatrix4=F$e.tempMatrix4;F$Z[0]=F$V.a,F$Z[1]=F$V.b,F$Z[4]=F$V.c,F$Z[5]=F$V.d,F$Z[12]=F$V.tx,F$Z[13]=F$V.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var F$m=F$HJ.mainContext;return F$U.activeBlendFunction!==this._blendFn&&(F$m.enable(3042),this._blendFn(F$m),F$U.activeBlendFunction=this._blendFn),F$Q.drawCall++,F$Q.trianglesFaces+=this._numEle/3,F$m.drawElements(4,this._numEle,5123,this.startIndex),F$OJ.worldMatrix4=F$T,F$kJ.activeShader=null,1},F$e.create=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){void 0===F$K&&(F$K=0);var F$A=F$e._cache._length?F$e._cache[--F$e._cache._length]:new F$e;F$A._ib=F$T,F$A._vb=F$y,F$A._numEle=F$V,F$A._shader=F$Z,F$A._shaderValue=F$m;var F$$=F$J._nBlendType;switch(F$A._blendFn=F$J._targets?F$U.targetFns[F$$]:F$U.fns[F$$],F$K){case 0:F$A.offset=0,F$A.startIndex=F$n/(F$oJ.BYTES_PE*F$y.vertexStride)*1.5,F$A.startIndex*=F$oJ.BYTES_PIDX;break;case 1:F$A.startIndex=F$R,F$A.offset=F$n}return F$A},F$e._cache=((F$e._cache=[])._length=0,F$e._cache),F$e.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$e}(),F$AJ=function(){function F$T(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new F$_,this.screenRect=new F$_}F$M(F$T,"laya.webgl.submit.SubmitScissor");var F$J=F$T.prototype;return F$l.imps(F$J,{"laya.webgl.submit.ISubmit":!0}),F$J._scissor=function(F$J,F$y,F$T,F$V){var F$Z=F$OJ.worldMatrix4,F$m=F$Z[0],F$R=F$Z[5],F$n=F$Z[12],F$K=F$Z[13];if(F$V*=F$R,(F$T*=F$m)<1||F$V<1)return!1;var F$A=(F$J=F$J*F$m+F$n)+F$T,F$$=(F$y=F$y*F$R+F$K)+F$V;F$J<0&&(F$T=F$A-(F$J=0)),F$y<0&&(F$V=F$$-(F$y=0));var F$e=F$OJ.worldClipRect;if(F$J=Math.max(F$J,F$e.x),F$y=Math.max(F$y,F$e.y),F$T=Math.min(F$A,F$e.right)-F$J,F$V=Math.min(F$$,F$e.bottom)-F$y,F$T<1||F$V<1)return!1;var F$M=F$OJ.worldScissorTest;return this.screenRect.copyFrom(F$e),F$e.x=F$J,F$e.y=F$y,F$e.width=F$T,F$e.height=F$V,F$OJ.worldScissorTest=!0,F$y=F$OJ.height-F$y-F$V,F$HJ.mainContext.scissor(F$J,F$y,F$T,F$V),F$HJ.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),F$M?(F$y=F$OJ.height-this.screenRect.y-this.screenRect.height,F$HJ.mainContext.scissor(this.screenRect.x,F$y,this.screenRect.width,this.screenRect.height),F$HJ.mainContext.enable(3089)):(F$HJ.mainContext.disable(3089),F$OJ.worldScissorTest=!1),F$e.copyFrom(this.screenRect),!0},F$J._scissorWithTagart=function(F$J,F$y,F$T,F$V){if(F$T<1||F$V<1)return!1;var F$Z=F$J+F$T,F$m=F$y+F$V;F$J<0&&(F$T=F$Z-(F$J=0)),F$y<0&&(F$V=F$m-(F$y=0));var F$R=F$OJ.worldClipRect;if(F$J=Math.max(F$J,F$R.x),F$y=Math.max(F$y,F$R.y),F$T=Math.min(F$Z,F$R.right)-F$J,F$V=Math.min(F$m,F$R.bottom)-F$y,F$T<1||F$V<1)return!1;var F$n=F$OJ.worldScissorTest;return this.screenRect.copyFrom(F$R),F$OJ.worldScissorTest=!0,F$R.x=F$J,F$R.y=F$y,F$R.width=F$T,F$R.height=F$V,F$y=F$OJ.height-F$y-F$V,F$HJ.mainContext.scissor(F$J,F$y,F$T,F$V),F$HJ.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),F$n?(F$y=F$OJ.height-this.screenRect.y-this.screenRect.height,F$HJ.mainContext.scissor(this.screenRect.x,F$y,this.screenRect.width,this.screenRect.height),F$HJ.mainContext.enable(3089)):(F$HJ.mainContext.disable(3089),F$OJ.worldScissorTest=!1),F$R.copyFrom(this.screenRect),!0},F$J.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},F$J.getRenderType=function(){return 0},F$J.releaseRender=function(){var F$J=F$T._cache;(F$J[F$J._length++]=this).context=null},F$T.create=function(F$J){var F$y=F$T._cache._length?F$T._cache[--F$T._cache._length]:new F$T;return F$y.context=F$J,F$y},F$T._cache=((F$T._cache=[])._length=0,F$T._cache),F$T}(),F$$J=function(){function F$K(){this.step=0,this.blendMode=null,this.level=0}F$M(F$K,"laya.webgl.submit.SubmitStencil");var F$J=F$K.prototype;return F$l.imps(F$J,{"laya.webgl.submit.ISubmit":!0}),F$J.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},F$J.getRenderType=function(){return 0},F$J.releaseRender=function(){var F$J=F$K._cache;F$J[F$J._length++]=this},F$J.do1=function(){var F$J=F$HJ.mainContext;F$J.enable(2960),F$J.clear(1024),F$J.colorMask(!1,!1,!1,!1),F$J.stencilFunc(514,this.level,255),F$J.stencilOp(7680,7680,7682)},F$J.do2=function(){var F$J=F$HJ.mainContext;F$J.stencilFunc(514,this.level+1,255),F$J.colorMask(!0,!0,!0,!0),F$J.stencilOp(7680,7680,7680)},F$J.do3=function(){var F$J=F$HJ.mainContext;F$J.colorMask(!0,!0,!0,!0),F$J.stencilOp(7680,7680,7680),F$J.clear(1024),F$J.disable(2960)},F$J.do4=function(){var F$J=F$HJ.mainContext;0==this.level&&(F$J.enable(2960),F$J.clear(1024)),F$J.colorMask(!1,!1,!1,!1),F$J.stencilFunc(519,0,255),F$J.stencilOp(7680,7680,7682)},F$J.do5=function(){var F$J=F$HJ.mainContext;F$J.stencilFunc(514,this.level,255),F$J.colorMask(!0,!0,!0,!0),F$J.stencilOp(7680,7680,7680)},F$J.do6=function(){var F$J=F$HJ.mainContext;F$U.targetFns[F$U.TOINT[this.blendMode]](F$J)},F$J.do7=function(){var F$J=F$HJ.mainContext;F$J.colorMask(!1,!1,!1,!1),F$J.stencilOp(7680,7680,7683)},F$J.do8=function(){var F$J=F$HJ.mainContext;F$J.colorMask(!0,!0,!0,!0),F$J.stencilFunc(514,this.level,255),F$J.stencilOp(7680,7680,7680)},F$K.restore=function(F$J,F$y,F$T,F$V,F$Z){var F$m;if((F$J._renderKey=0)<F$K._mask&&F$K._mask--,0==F$K._mask)F$m=laya.webgl.submit.SubmitStencil.create(3),F$J.addRenderObject(F$m),F$J._curSubmit=F$mJ.RENDERBASE;else{F$m=laya.webgl.submit.SubmitStencil.create(7),F$J.addRenderObject(F$m);var F$R=F$J._vb;F$R._byteLength;if(F$sJ.fillRectImgVb(F$R,null,F$y.x,F$y.y,F$y.width,F$y.height,F$x.DEF_UV,F$T,F$V,F$Z,0,0)){F$J._shader2D.glTexture=null;var F$n=F$J._curSubmit=F$mJ.createSubmit(F$J,F$J._ib,F$R,(F$R._byteLength-64)/32*3,F$qJ.create(2,0));F$n.shaderValue.ALPHA=1,F$J._submits[F$J._submits._length++]=F$n,F$J._curSubmit._numEle+=6,F$J._curSubmit=F$mJ.RENDERBASE}else alert("clipRect calc stencil rect error");F$m=laya.webgl.submit.SubmitStencil.create(8),F$J.addRenderObject(F$m)}},F$K.restore2=function(F$J,F$y){var F$T;(F$J._renderKey=0)<F$K._mask&&F$K._mask--,0==F$K._mask?(F$T=laya.webgl.submit.SubmitStencil.create(3),F$J.addRenderObject(F$T),F$J._curSubmit=F$mJ.RENDERBASE):(F$T=laya.webgl.submit.SubmitStencil.create(7),F$J.addRenderObject(F$T),F$J._submits[F$J._submits._length++]=F$y,F$T=laya.webgl.submit.SubmitStencil.create(8),F$J.addRenderObject(F$T))},F$K.create=function(F$J){var F$y=F$K._cache._length?F$K._cache[--F$K._cache._length]:new F$K;return 5==(F$y.step=F$J)&&++F$K._mask,F$y.level=F$K._mask,F$y},F$K._cache=((F$K._cache=[])._length=0,F$K._cache),F$K._mask=0,F$K}(),F$eJ=function(){function F$n(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}F$M(F$n,"laya.webgl.submit.SubmitTarget");var F$J=F$n.prototype;return F$l.imps(F$J,{"laya.webgl.submit.ISubmit":!0}),F$J.renderSubmit=function(){this._vb.bind_upload(this._ib);var F$J=this.scope.getValue(this.proName);return F$J&&(this.shaderValue.texture=F$J.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[F$J.width,F$J.height]),this.shaderValue.upload(),this.blend(),F$Q.drawCall++,F$Q.trianglesFaces+=this._numEle/3,F$HJ.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},F$J.blend=function(){if(F$U.activeBlendFunction!==F$U.fns[this.blendType]){var F$J=F$HJ.mainContext;F$J.enable(3042),F$U.fns[this.blendType](F$J),F$U.activeBlendFunction=F$U.fns[this.blendType]}},F$J.getRenderType=function(){return 0},F$J.releaseRender=function(){var F$J=F$n._cache;(F$J[F$J._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$n.create=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=F$n._cache._length?F$n._cache[--F$n._cache._length]:new F$n;return F$R._ib=F$y,F$R._vb=F$T,F$R.proName=F$m,F$R._startIdx=F$V*F$oJ.BYTES_PIDX,F$R._numEle=0,F$R.blendType=F$J._nBlendType,F$R.shaderValue=F$Z,F$R.shaderValue.setValue(F$J._shader2D),F$R},F$n._cache=((F$n._cache=[])._length=0,F$n._cache),F$n}(),F$MJ=function(){function F$J(){this._sourceStr=null}F$M(F$J,"laya.webgl.text.CharSegment");var F$y=F$J.prototype;return F$l.imps(F$y,{"laya.webgl.text.ICharSegment":!0}),F$y.textToSpit=function(F$J){this._sourceStr=F$J},F$y.getChar=function(F$J){return this._sourceStr.charAt(F$J)},F$y.getCharCode=function(F$J){return this._sourceStr.charCodeAt(F$J)},F$y.length=function(){return this._sourceStr.length},F$J}(),F$GJ=function(){var F$J;function F$Q(){}return F$M(F$Q,"laya.webgl.text.DrawText"),F$Q.__init__=function(){F$Q._charsTemp=new Array,F$Q._drawValue=new F$J,F$Q._charSeg=new F$MJ},F$Q.customCharSeg=function(F$J){F$Q._charSeg=F$J},F$Q.getChar=function(F$J,F$y,F$T){var F$V=F$FJ.createOneChar(F$J,F$T);return-1!=F$y&&(F$Q._charsCache[F$y]=F$V),F$V},F$Q._drawSlow=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$e,F$M,F$G,F$B){var F$o,F$s,F$E=F$Q._drawValue.value(F$m,F$n,F$K,F$A,F$M,F$G,F$B),F$O=0,F$L=0,F$H=F$Q._charsTemp,F$P=0,F$l=NaN;if(F$V)for(F$H.length=F$V.length,F$O=0,F$L=F$V.length;F$O<F$L;F$O++)(F$s=F$V[F$O])&&(F$l=F$s.charNum+F$E.txtID,F$H[F$O]=F$o=F$Q._charsCache[F$l]||F$Q.getChar(F$s.char,F$l,F$E),F$o.active());else{var F$a=F$T instanceof laya.utils.WordText?F$T.toString():F$T;if(F$u.CharacterCache){F$Q._charSeg.textToSpit(F$a);var F$q=F$Q._charSeg.length();for(F$O=0,F$L=F$H.length=F$q;F$O<F$L;F$O++)F$l=F$Q._charSeg.getCharCode(F$O)+F$E.txtID,F$H[F$O]=F$o=F$Q._charsCache[F$l]||F$Q.getChar(F$Q._charSeg.getChar(F$O),F$l,F$E),F$o.active(),F$P+=F$o.cw}else F$H.length=0,(F$o=F$Q.getChar(F$a,-1,F$E)).active(),F$P+=F$o.cw,F$H[0]=F$o}var F$r=0;null!==F$R&&"left"!==F$R&&(F$r=-("center"==F$R?F$P/2:F$P));var F$D,F$_,F$t=NaN,F$v=0;if(F$V)for(F$O=0,F$L=F$H.length;F$O<F$L;F$O++)F$o=F$H[F$O],F$s=F$V[F$O],F$o&&F$s&&!F$o.isSpace&&(F$t=F$o.borderSize,F$D=F$o.texture,F$y._drawText(F$D,F$$+F$r+F$s.x*F$M-F$t,F$e+F$s.y*F$G-F$t,F$D.width,F$D.height,F$Z,0,0,0,0));else{for(F$O=0,F$L=F$H.length;F$O<F$L;F$O++)(F$o=F$H[F$O])&&!F$o.isSpace&&(F$t=F$o.borderSize,F$D=F$o.texture,F$y._drawText(F$D,F$$+F$r-F$t,F$e-F$t,F$D.width,F$D.height,F$Z,0,0,0,0),F$J&&((F$_=F$J[F$v++])||(F$_=F$J[F$v-1]=[]),F$_[0]=F$D,F$_[1]=F$r-F$t,F$_[2]=-F$t)),F$r+=F$o.cw;F$J&&(F$J.length=F$v)}},F$Q._drawFast=function(F$J,F$y,F$T,F$V,F$Z){for(var F$m,F$R,F$n=0,F$K=F$J.length;F$n<F$K;F$n++)(F$m=(F$R=F$J[F$n])[0]).active(),F$y._drawText(F$m,F$V+F$R[1],F$Z+F$R[2],F$m.width,F$m.height,F$T,0,0,0,0)},F$Q.drawText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$e){if(void 0===F$e&&(F$e=0),!(F$y&&0===F$y.length||F$T&&0===F$T.length)){var F$M=F$V.a,F$G=F$V.d;(0!==F$V.b||0!==F$V.c)&&(F$M=F$G=1);var F$B=1!==F$M||1!==F$G;if(F$B&&F$l.stage.transform){var F$o=F$l.stage.transform;F$B=F$o.a===F$M&&F$o.d===F$G}else F$B=!1;if(F$B){var F$s=(F$V=F$V.copyTo(F$aJ._tmpMatrix)).tx,F$E=F$V.ty;F$V.scale(1/F$M,1/F$G),F$V._checkTransform(),F$A*=F$M,F$$*=F$G,F$A+=F$s-F$V.tx,F$$+=F$E-F$V.ty}else F$M=F$G=1;if(F$T)F$Q._drawSlow(null,F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$M,F$G,F$e);else{if(null===F$y.toUpperCase){var F$O=F$M+1e5*F$G,F$L=F$y;return void(F$L.changed||F$L.id!==F$O?(F$L.id=F$O,F$L.changed=!1,F$Q._drawSlow(F$L.save,F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$M,F$G,F$e)):F$Q._drawFast(F$L.save,F$J,F$V,F$A,F$$))}var F$H=F$y+F$Z.toString()+F$R+F$n+F$K+F$M+F$G+F$m,F$P=F$Q._textsCache[F$H];F$u.CharacterCache?F$P?F$Q._drawFast(F$P,F$J,F$V,F$A,F$$):(F$Q._textsCache.__length||(F$Q._textsCache.__length=0),F$Q._textsCache.__length>F$a.WebGLTextCacheCount&&((F$Q._textsCache={}).__length=0,F$Q._curPoolIndex=0),F$Q._textCachesPool[F$Q._curPoolIndex]?(F$P=F$Q._textsCache[F$H]=F$Q._textCachesPool[F$Q._curPoolIndex]).length=0:F$Q._textCachesPool[F$Q._curPoolIndex]=F$P=F$Q._textsCache[F$H]=[],F$Q._textsCache.__length++,F$Q._curPoolIndex++,F$Q._drawSlow(F$P,F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$M,F$G,F$e)):F$Q._drawSlow(F$P,F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$M,F$G,F$e)}}},F$Q._charsTemp=null,F$Q._textCachesPool=[],F$Q._curPoolIndex=0,F$Q._charsCache={},F$Q._textsCache={},F$Q._drawValue=null,F$Q.d=[],F$Q._charSeg=null,F$Q.__init$=function(){F$J=function(){function F$K(){}return F$M(F$K,""),F$K.prototype.value=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this.font=F$J,this.fillColor=F$y,this.borderColor=F$T,this.lineWidth=F$V,this.scaleX=F$Z,this.scaleY=F$m,this.underLine=F$R;var F$n=F$J.toString()+F$Z+F$m+F$V+(F$y?F$y.toLowerCase():" ")+(F$T?F$T.toLowerCase():" ")+F$R;return this.txtID=F$K._keymap[F$n],this.txtID||(this.txtID=1e-7*++F$K._keymapCount,F$K._keymap[F$n]=this.txtID),this},F$K.clear=function(){F$K._keymap={},F$K._keymapCount=1},F$K._keymap={},F$K._keymapCount=1,F$K}()},F$Q}(),F$BJ=function(){function F$Z(F$J){this._index=0,this._size=14,this._italic=-2,F$Z._cache2=F$Z._cache2||[],this.setFont(F$J||"14px Arial")}F$M(F$Z,"laya.webgl.text.FontInContext");var F$J=F$Z.prototype;return F$J.setFont=function(F$J){var F$y=F$Z._cache2[F$J];if(F$y)this._words=F$y[0],this._size=F$y[1];else{this._words=F$J.split(" ");for(var F$T=0,F$V=this._words.length;F$T<F$V;F$T++)if(0<this._words[F$T].indexOf("px")){this._index=F$T;break}this._size=parseInt(this._words[this._index]),F$Z._cache2[F$J]=[this._words,this._size]}this._text=null,this._italic=-2},F$J.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},F$J.hasType=function(F$J){for(var F$y=0,F$T=this._words.length;F$y<F$T;F$y++)if(this._words[F$y]===F$J)return F$y;return-1},F$J.removeType=function(F$J){for(var F$y=0,F$T=this._words.length;F$y<F$T;F$y++)if(this._words[F$y]===F$J){this._words.splice(F$y,1),this._index>F$y&&this._index--;break}this._text=null,this._italic=-2},F$J.copyTo=function(F$J){return F$J._text=this._text,F$J._size=this._size,F$J._index=this._index,F$J._words=this._words.slice(),F$J._italic=-2,F$J},F$J.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},F$V(0,F$J,"size",function(){return this._size},function(F$J){this._size=F$J,this._words[this._index]=F$J+"px",this._text=null}),F$Z.create=function(F$J){var F$y=F$Z._cache[F$J];return F$y||(F$y=F$Z._cache[F$J]=new F$Z(F$J))},F$Z.EMPTY=new F$Z,F$Z._cache={},F$Z._cache2=null,F$Z}(),F$oJ=function(){function F$J(){}return F$M(F$J,"laya.webgl.utils.CONST3D2D"),F$J.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$J.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],F$J.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],F$J._TMPARRAY=[],F$J._OFFSETX=0,F$J._OFFSETY=0,F$R(F$J,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),F$J}(),F$sJ=function(){function F$B(){}return F$M(F$B,"laya.webgl.utils.GlUtils"),F$B.make2DProjection=function(F$J,F$y,F$T){return[2/F$J,0,0,0,0,-2/F$y,0,0,0,0,2/F$T,0,-1,1,0,1]},F$B.fillIBQuadrangle=function(F$J,F$y){if(65535/4<F$y)throw Error("IBQuadrangle count:"+F$y+" must<:"+Math.floor(65535/4));F$y=Math.floor(F$y),F$J._resizeBuffer(6*(F$y+1)*2,!1),F$J.byteLength=F$J.bufferLength;for(var F$T=F$J.getUint16Array(),F$V=0,F$Z=0;F$Z<F$y;F$Z++)F$T[F$V++]=4*F$Z,F$T[F$V++]=4*F$Z+2,F$T[F$V++]=4*F$Z+1,F$T[F$V++]=4*F$Z,F$T[F$V++]=4*F$Z+3,F$T[F$V++]=4*F$Z+2;return F$J.setNeedUpload(),!0},F$B.expandIBQuadrangle=function(F$J,F$y){F$J.bufferLength>=6*F$y*2||F$B.fillIBQuadrangle(F$J,F$y)},F$B.mathCeilPowerOfTwo=function(F$J){return F$J--,F$J|=F$J>>1,F$J|=F$J>>2,F$J|=F$J>>4,F$J|=F$J>>8,F$J|=F$J>>16,++F$J},F$B.fillQuadrangleImgVb=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){var F$K=16+(F$J._byteLength>>2);F$J.byteLength=F$K<<2;var F$A=F$J.getFloat32Array();F$A[(F$K-=16)+2]=F$Z[0],F$A[F$K+3]=F$Z[1],F$A[F$K+6]=F$Z[2],F$A[F$K+7]=F$Z[3],F$A[F$K+10]=F$Z[4],F$A[F$K+11]=F$Z[5],F$A[F$K+14]=F$Z[6],F$A[F$K+15]=F$Z[7];var F$$=F$m.a,F$e=F$m.b,F$M=F$m.c,F$G=F$m.d;if(1!==F$$||0!==F$e||0!==F$M||1!==F$G){F$m.bTransform=!0;var F$B=F$m.tx+F$R,F$o=F$m.ty+F$n;F$A[F$K]=(F$V[0]+F$y)*F$$+(F$V[1]+F$T)*F$M+F$B,F$A[F$K+1]=(F$V[0]+F$y)*F$e+(F$V[1]+F$T)*F$G+F$o,F$A[F$K+4]=(F$V[2]+F$y)*F$$+(F$V[3]+F$T)*F$M+F$B,F$A[F$K+5]=(F$V[2]+F$y)*F$e+(F$V[3]+F$T)*F$G+F$o,F$A[F$K+8]=(F$V[4]+F$y)*F$$+(F$V[5]+F$T)*F$M+F$B,F$A[F$K+9]=(F$V[4]+F$y)*F$e+(F$V[5]+F$T)*F$G+F$o,F$A[F$K+12]=(F$V[6]+F$y)*F$$+(F$V[7]+F$T)*F$M+F$B,F$A[F$K+13]=(F$V[6]+F$y)*F$e+(F$V[7]+F$T)*F$G+F$o}else F$m.bTransform=!1,F$y+=F$m.tx+F$R,F$T+=F$m.ty+F$n,F$A[F$K]=F$y+F$V[0],F$A[F$K+1]=F$T+F$V[1],F$A[F$K+4]=F$y+F$V[2],F$A[F$K+5]=F$T+F$V[3],F$A[F$K+8]=F$y+F$V[4],F$A[F$K+9]=F$T+F$V[5],F$A[F$K+12]=F$y+F$V[6],F$A[F$K+13]=F$T+F$V[7];return F$J._upload=!0},F$B.fillTranglesVB=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){var F$n=(F$J._byteLength>>2)+F$V.length;F$J.byteLength=F$n<<2;var F$K=F$J.getFloat32Array();F$n-=F$V.length;for(var F$A=F$V.length,F$$=F$Z.a,F$e=F$Z.b,F$M=F$Z.c,F$G=F$Z.d,F$B=0;F$B<F$A;F$B+=4)if(F$K[F$n+F$B+2]=F$V[F$B+2],F$K[F$n+F$B+3]=F$V[F$B+3],1!==F$$||0!==F$e||0!==F$M||1!==F$G){F$Z.bTransform=!0;var F$o=F$Z.tx+F$m,F$s=F$Z.ty+F$R;F$K[F$n+F$B]=(F$V[F$B]+F$y)*F$$+(F$V[F$B+1]+F$T)*F$M+F$o,F$K[F$n+F$B+1]=(F$V[F$B]+F$y)*F$e+(F$V[F$B+1]+F$T)*F$G+F$s}else F$Z.bTransform=!1,F$y+=F$Z.tx+F$m,F$T+=F$Z.ty+F$R,F$K[F$n+F$B]=F$y+F$V[F$B],F$K[F$n+F$B+1]=F$T+F$V[F$B+1];return F$J._upload=!0},F$B.copyPreImgVb=function(F$J,F$y,F$T){var F$V=F$J._byteLength>>2;F$J.byteLength=F$V+16<<2;for(var F$Z=F$J.getFloat32Array(),F$m=0,F$R=F$V-16;F$m<4;F$m++)F$Z[F$V]=F$Z[F$R]+F$y,++F$R,F$Z[++F$V]=F$Z[F$R]+F$T,++F$R,F$Z[++F$V]=F$Z[F$R],++F$R,F$Z[++F$V]=F$Z[F$R],++F$V,++F$R;F$J._upload=!0},F$B.fillRectImgVb=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$e,F$M){void 0===F$M&&(F$M=!1);var F$G,F$B,F$o,F$s,F$E,F$O,F$L,F$H,F$P,F$l,F$a,F$q,F$r,F$D,F$_,F$t,F$v=1,F$Q=F$n.a,F$i=F$n.b,F$c=F$n.c,F$u=F$n.d,F$x=F$y&&F$y.width<99999999;if(1!==F$Q||0!==F$i||0!==F$c||1!==F$u?(F$n.bTransform=!0,0===F$i&&0===F$c&&(F$v=23,F$P=F$Z+F$T,F$l=F$m+F$V,F$G=F$Q*F$T+(F$a=F$n.tx+F$K),F$o=F$Q*F$P+F$a,F$B=F$u*F$V+(F$q=F$n.ty+F$A),F$s=F$u*F$l+F$q)):(F$v=23,F$n.bTransform=!1,F$o=(F$G=F$T+F$n.tx+F$K)+F$Z,F$s=(F$B=F$V+F$n.ty+F$A)+F$m),F$x&&(F$E=F$y.x,F$O=F$y.y,F$L=F$y.width+F$E,F$H=F$y.height+F$O),1!==F$v){if(Math.min(F$G,F$o)>=F$L)return!1;if(Math.min(F$B,F$s)>=F$H)return!1;if(Math.max(F$o,F$G)<=F$E)return!1;if(Math.max(F$s,F$B)<=F$O)return!1}var F$k=F$J._byteLength>>2;F$J.byteLength=16+F$k<<2;var F$X=F$J.getFloat32Array();switch(F$X[2+F$k]=F$R[0],F$X[3+F$k]=F$R[1],F$X[6+F$k]=F$R[2],F$X[7+F$k]=F$R[3],F$X[10+F$k]=F$R[4],F$X[11+F$k]=F$R[5],F$X[14+F$k]=F$R[6],F$X[15+F$k]=F$R[7],F$v){case 1:F$a=F$n.tx+F$K,F$q=F$n.ty+F$A;var F$S=F$Q*F$T,F$f=F$c*F$V,F$W=F$u*F$V,F$I=F$i*F$T,F$Y=F$Q*(F$P=F$Z+F$T),F$U=F$c*(F$l=F$m+F$V),F$d=F$u*F$l,F$C=F$i*F$P;F$M?(F$r=F$S+F$f+F$a,F$_=Math.round(F$r)-F$r,F$D=F$W+F$I+F$q,F$t=Math.round(F$D)-F$D,F$X[F$k]=F$r+F$_,F$X[1+F$k]=F$D+F$t,F$X[4+F$k]=F$Y+F$f+F$a+F$_,F$X[5+F$k]=F$W+F$C+F$q+F$t,F$X[8+F$k]=F$Y+F$U+F$a+F$_,F$X[9+F$k]=F$d+F$C+F$q+F$t,F$X[12+F$k]=F$S+F$U+F$a+F$_,F$X[13+F$k]=F$d+F$I+F$q+F$t):(F$X[F$k]=F$S+F$f+F$a,F$X[1+F$k]=F$W+F$I+F$q,F$X[4+F$k]=F$Y+F$f+F$a,F$X[5+F$k]=F$W+F$C+F$q,F$X[8+F$k]=F$Y+F$U+F$a,F$X[9+F$k]=F$d+F$C+F$q,F$X[12+F$k]=F$S+F$U+F$a,F$X[13+F$k]=F$d+F$I+F$q);break;case 23:F$M?(F$r=F$G+F$$,F$_=Math.round(F$r)-F$r,F$D=F$B,F$t=Math.round(F$D)-F$D,F$X[F$k]=F$r+F$_,F$X[1+F$k]=F$D+F$t,F$X[4+F$k]=F$o+F$$+F$_,F$X[5+F$k]=F$B+F$t,F$X[8+F$k]=F$o+F$_,F$X[9+F$k]=F$s+F$t,F$X[12+F$k]=F$G+F$_,F$X[13+F$k]=F$s+F$t):(F$X[F$k]=F$G+F$$,F$X[1+F$k]=F$B,F$X[4+F$k]=F$o+F$$,F$X[5+F$k]=F$B,F$X[8+F$k]=F$o,F$X[9+F$k]=F$s,F$X[12+F$k]=F$G,F$X[13+F$k]=F$s)}return F$J._upload=!0},F$B.fillLineVb=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){var F$K=.5*F$R,F$A=F$B._fillLineArray,F$$=-(F$V-F$m),F$e=F$T-F$Z,F$M=Math.sqrt(F$$*F$$+F$e*F$e);F$$/=F$M,F$e/=F$M,F$$*=F$K,F$e*=F$K,F$A[0]=F$T-F$$,F$A[1]=F$V-F$e,F$A[4]=F$T+F$$,F$A[5]=F$V+F$e,F$A[8]=F$Z+F$$,F$A[9]=F$m+F$e,F$A[12]=F$Z-F$$,F$A[13]=F$m-F$e,F$n&&F$n.transformPointArray(F$A,F$A);var F$G=16+(F$J._byteLength>>2);return F$J.byteLength=F$G<<2,F$J.insertData(F$A,F$G-16),!0},F$B._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F$B}(),F$EJ=(function(){function F$K(){}F$M(F$K,"laya.webgl.utils.MatirxArray"),F$K.ArrayMul=function(F$J,F$y,F$T){if(F$J)if(F$y)for(var F$V=NaN,F$Z=NaN,F$m=NaN,F$R=NaN,F$n=0;F$n<4;F$n++)F$V=F$J[F$n],F$Z=F$J[F$n+4],F$m=F$J[F$n+8],F$R=F$J[F$n+12],F$T[F$n]=F$V*F$y[0]+F$Z*F$y[1]+F$m*F$y[2]+F$R*F$y[3],F$T[F$n+4]=F$V*F$y[4]+F$Z*F$y[5]+F$m*F$y[6]+F$R*F$y[7],F$T[F$n+8]=F$V*F$y[8]+F$Z*F$y[9]+F$m*F$y[10]+F$R*F$y[11],F$T[F$n+12]=F$V*F$y[12]+F$Z*F$y[13]+F$m*F$y[14]+F$R*F$y[15];else F$K.copyArray(F$J,F$T);else F$K.copyArray(F$y,F$T)},F$K.copyArray=function(F$J,F$y){if(F$J&&F$y)for(var F$T=0;F$T<F$J.length;F$T++)F$y[F$T]=F$J[F$T]}}(),function(){function F$y(F$J,F$y,F$T){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=F$J,this._vb=new F$zJ(F$J,35048),F$y&&this._vb._resizeBuffer(F$y,!1),this._ib=new F$wJ,F$T&&this._ib._resizeBuffer(F$T,!1)}F$M(F$y,"laya.webgl.utils.Mesh2D");var F$J=F$y.prototype;return F$J.cloneWithNewVB=function(){var F$J=new F$y(this._stride,0,0);return F$J._ib=this._ib,F$J._quadNum=this._quadNum,F$J._attribInfo=this._attribInfo,F$J},F$J.cloneWithNewVBIB=function(){var F$J=new F$y(this._stride,0,0);return F$J._attribInfo=this._attribInfo,F$J},F$J.getVBW=function(){return this._vb.setNeedUpload(),this._vb},F$J.getVBR=function(){return this._vb},F$J.getIBR=function(){return this._ib},F$J.getIBW=function(){return this._ib.setNeedUpload(),this._ib},F$J.createQuadIB=function(F$J){this._quadNum=F$J,this._ib._resizeBuffer(6*F$J*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var F$y=this._ib.getUint16Array(),F$T=0,F$V=0,F$Z=0;F$Z<F$J;F$Z++)F$y[F$T++]=F$V,F$y[F$T++]=F$V+2,F$y[F$T++]=F$V+1,F$y[F$T++]=F$V,F$y[F$T++]=F$V+3,F$y[F$T++]=F$V+2,F$V+=4;this._ib.setNeedUpload()},F$J.setAttributes=function(F$J){if(this._attribInfo=F$J,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},F$J.getEleNum=function(){return this._ib.getBuffer().byteLength/2},F$J.releaseMesh=function(){},F$J.destroy=function(){},F$J.clearVB=function(){this._vb.clear()},F$y._gvaoid=0,F$y}()),F$OJ=function(){function F$Z(){}return F$M(F$Z,"laya.webgl.utils.RenderState2D"),F$Z.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},F$Z.mat2MatArray=function(F$J,F$y){var F$T=F$J,F$V=F$y;return F$V[0]=F$T.a,F$V[1]=F$T.b,F$V[2]=F$Z.EMPTYMAT4_ARRAY[2],F$V[3]=F$Z.EMPTYMAT4_ARRAY[3],F$V[4]=F$T.c,F$V[5]=F$T.d,F$V[6]=F$Z.EMPTYMAT4_ARRAY[6],F$V[7]=F$Z.EMPTYMAT4_ARRAY[7],F$V[8]=F$Z.EMPTYMAT4_ARRAY[8],F$V[9]=F$Z.EMPTYMAT4_ARRAY[9],F$V[10]=F$Z.EMPTYMAT4_ARRAY[10],F$V[11]=F$Z.EMPTYMAT4_ARRAY[11],F$V[12]=F$T.tx,F$V[13]=F$T.ty,F$V[14]=F$Z.EMPTYMAT4_ARRAY[14],F$V[15]=F$Z.EMPTYMAT4_ARRAY[15],F$y},F$Z.restoreTempArray=function(){F$Z.TEMPMAT4_ARRAY[0]=1,F$Z.TEMPMAT4_ARRAY[1]=0,F$Z.TEMPMAT4_ARRAY[4]=0,F$Z.TEMPMAT4_ARRAY[5]=1,F$Z.TEMPMAT4_ARRAY[12]=0,F$Z.TEMPMAT4_ARRAY[13]=0},F$Z.clear=function(){F$Z.worldScissorTest=!1,F$Z.worldShaderDefines=null,F$Z.worldFilters=null,F$Z.worldAlpha=1,F$Z.worldClipRect.x=F$Z.worldClipRect.y=0,F$Z.worldClipRect.width=F$Z.width,F$Z.worldClipRect.height=F$Z.height,F$Z.curRenderTarget=null},F$Z._MAXSIZE=99999999,F$Z.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$Z.worldMatrix4=F$Z.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$Z.worldAlpha=1,F$Z.worldScissorTest=!1,F$Z.worldFilters=null,F$Z.worldShaderDefines=null,F$Z.curRenderTarget=null,F$Z.width=0,F$Z.height=0,F$R(F$Z,["worldMatrix",function(){return this.worldMatrix=new F$r},"worldClipRect",function(){return this.worldClipRect=new F$_(0,0,99999999,99999999)}]),F$Z}(),F$LJ=function(){var F$O,F$T;function F$L(F$J,F$y,F$T,F$V,F$Z){var F$m=this;function F$R(F$J){var F$y=[],F$T=new F$O(F$y);return F$m._compileToTree(F$T,F$J.split("\n"),0,F$y,F$Z),F$T}var F$n=F$G.now();this._VS=F$R(F$y),this._PS=F$R(F$T),this._nameMap=F$V,2<F$G.now()-F$n&&console.log("ShaderCompile use time:"+(F$G.now()-F$n)+"  size:"+F$y.length+"/"+F$T.length)}F$M(F$L,"laya.webgl.utils.ShaderCompile");var F$J=F$L.prototype;return F$J._compileToTree=function(F$J,F$y,F$T,F$V,F$Z){var F$m,F$R,F$n,F$K,F$A,F$$,F$e,F$M=0,F$G=0,F$B=0,F$o=0;for(F$G=F$T;F$G<F$y.length;F$G++)if(!((F$n=F$y[F$G]).length<1)&&0!==(F$M=F$n.indexOf("//"))){if(0<=F$M&&(F$n=F$n.substr(0,F$M)),F$m=F$e||new F$O(F$V),F$e=null,F$m.text=F$n,F$m.noCompile=!0,0<=(F$M=F$n.indexOf("#"))){for(F$K="#",F$o=F$M+1,F$B=F$n.length;F$o<F$B;F$o++){var F$s=F$n.charAt(F$o);if(" "===F$s||"\t"===F$s||"\r"===F$s||"\n"===F$s||"?"===F$s)break;F$K+=F$s}switch(F$m.name=F$K){case"#ifdef":case"#ifndef":if(F$m.src=F$n,F$m.noCompile=null!=F$n.match(/[!&|()=<>]/),F$m.noCompile?console.log("function():Boolean{return "+F$n.substr(F$M+F$m.name.length)+"}"):(F$$=F$n.replace(/^\s*/,"").split(/\s+/),F$m.setCondition(F$$[1],"#ifdef"===F$K?1:2),F$m.text="//"+F$m.text),F$m.setParent(F$J),F$J=F$m,F$Z)for(F$$=F$n.substr(F$o).split(F$L._splitToWordExps3),F$o=0;F$o<F$$.length;F$o++)(F$n=F$$[F$o]).length&&(F$Z[F$n]=!0);continue;case"#if":if(F$m.src=F$n,F$m.noCompile=!0,F$m.setParent(F$J),F$J=F$m,F$Z)for(F$$=F$n.substr(F$o).split(F$L._splitToWordExps3),F$o=0;F$o<F$$.length;F$o++)(F$n=F$$[F$o]).length&&"defined"!=F$n&&(F$Z[F$n]=!0);continue;case"#else":F$m.src=F$n,F$R=(F$J=F$J.parent).childs[F$J.childs.length-1],F$m.noCompile=F$R.noCompile,F$m.noCompile||(F$m.condition=F$R.condition,F$m.conditionType=1==F$R.conditionType?2:1,F$m.text="//"+F$m.text+" "+F$R.text+" "+F$m.conditionType),F$m.setParent(F$J),F$J=F$m;continue;case"#endif":F$R=(F$J=F$J.parent).childs[F$J.childs.length-1],F$m.noCompile=F$R.noCompile,F$m.noCompile||(F$m.text="//"+F$m.text),F$m.setParent(F$J);continue;case"#include":F$$=F$L.splitToWords(F$n,null);var F$E=F$L.includes[F$$[1]];if(!F$E)throw"ShaderCompile error no this include file:"+F$$[1];if((F$M=F$$[0].indexOf("?"))<0){F$m.setParent(F$J),F$n=F$E.getWith("with"==F$$[2]?F$$[3]:null),this._compileToTree(F$m,F$n.split("\n"),0,F$V,F$Z),F$m.text="";continue}F$m.setCondition(F$$[0].substr(F$M+1),1),F$m.text=F$E.getWith("with"==F$$[2]?F$$[3]:null);break;case"#import":F$A=(F$$=F$L.splitToWords(F$n,null))[1],F$V.push({node:F$m,file:F$L.includes[F$A],ofs:F$m.text.length});continue}}else{if((F$R=F$J.childs[F$J.childs.length-1])&&!F$R.name){0<F$V.length&&F$L.splitToWords(F$n,F$R),F$e=F$m,F$R.text+="\n"+F$n;continue}0<F$V.length&&F$L.splitToWords(F$n,F$m)}F$m.setParent(F$J)}},F$J.createShader=function(F$J,F$y,F$T){var F$V={},F$Z="";if(F$J)for(var F$m in F$J)F$Z+="#define "+F$m+"\n",F$V[F$m]=!0;var F$R=this._VS.toscript(F$V,[]),F$n=this._PS.toscript(F$V,[]);return(F$T||F$pJ.create)(F$Z+F$R.join("\n"),F$Z+F$n.join("\n"),F$y,this._nameMap)},F$L._parseOne=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R={type:F$L.shaderParamsMap[F$T[F$V+1]],name:F$T[F$V+2],size:isNaN(parseInt(F$T[F$V+3]))?1:parseInt(F$T[F$V+3])};return F$m&&("attribute"==F$Z?F$J.push(F$R):F$y.push(F$R)),":"==F$T[F$V+3]&&(F$R.type=F$T[F$V+4],F$V+=2),F$V+=2},F$L.addInclude=function(F$J,F$y){if(!F$y||0===F$y.length)throw new Error("add shader include file err:"+F$J);if(F$L.includes[F$J])throw new Error("add shader include file err, has add:"+F$J);F$L.includes[F$J]=new F$T(F$y)},F$L.preGetParams=function(F$J,F$y){var F$T=[F$J,F$y],F$V={},F$Z=[],F$m=[],F$R={},F$n=[];F$V.attributes=F$Z,F$V.uniforms=F$m,F$V.defines=F$R;for(var F$K=0,F$A=0,F$$=0;F$$<2;F$$++){F$T[F$$]=F$T[F$$].replace(F$L._removeAnnotation,"");var F$e,F$M=F$T[F$$].match(F$L._reg);for(F$K=0,F$A=F$M.length;F$K<F$A;F$K++){var F$G=F$M[F$K];if("attribute"==F$G||"uniform"==F$G)F$K=F$L._parseOne(F$Z,F$m,F$M,F$K,F$G,!0);else{if("#define"==F$G){F$n[F$G=F$M[++F$K]]=1;continue}if("#ifdef"==F$G){F$R[F$e=F$M[++F$K]]=F$R[F$e]||[];for(F$K++;F$K<F$A;F$K++)if("attribute"==(F$G=F$M[F$K])||"uniform"==F$G)F$K=F$L._parseOne(F$Z,F$m,F$M,F$K,F$G,F$n[F$e]);else if("#else"==F$G)for(F$K++;F$K<F$A;F$K++)if("attribute"==(F$G=F$M[F$K])||"uniform"==F$G)F$K=F$L._parseOne(F$Z,F$m,F$M,F$K,F$G,!F$n[F$e]);else if("#endif"==F$G)break}}}}return F$V},F$L.splitToWords=function(F$J,F$y){for(var F$T,F$V,F$Z=[],F$m=-1,F$R=0,F$n=F$J.length;F$R<F$n;F$R++)if(F$T=F$J.charAt(F$R),0<=" \t=+-*/&%!<>()'\",;".indexOf(F$T)){if(0<=F$m&&1<F$R-F$m&&(F$V=F$J.substr(F$m,F$R-F$m),F$Z.push(F$V)),'"'==F$T||"'"==F$T){var F$K=F$J.indexOf(F$T,F$R+1);if(F$K<0)throw"Sharder err:"+F$J;F$Z.push(F$J.substr(F$R+1,F$K-F$R-1)),F$R=F$K,F$m=-1;continue}"("==F$T&&F$y&&0<F$Z.length&&(F$V=F$Z[F$Z.length-1]+";","vec4;main;".indexOf(F$V)<0&&(F$y.useFuns+=F$V)),F$m=-1}else F$m<0&&(F$m=F$R);return F$m<F$n&&1<F$n-F$m&&(F$V=F$J.substr(F$m,F$n-F$m),F$Z.push(F$V)),F$Z},F$L.IFDEF_NO=0,F$L.IFDEF_YES=1,F$L.IFDEF_ELSE=2,F$L.IFDEF_PARENT=3,F$L._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),F$L._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),F$L._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),F$L.includes={},F$R(F$L,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),F$L.__init$=function(){F$O=function(){function F$T(F$J){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=F$J}F$M(F$T,"");var F$J=F$T.prototype;return F$J.setParent=function(F$J){F$J.childs.push(this),this.z=F$J.z+1,this.parent=F$J},F$J.setCondition=function(F$J,F$y){F$J&&(this.conditionType=F$y,F$J=F$J.replace(/(\s*$)/g,""),this.condition=function(){return this[F$J]},this.condition.__condition=F$J)},F$J.toscript=function(F$J,F$y){return this._toscript(F$J,F$y,++F$T.__id)},F$J._toscript=function(F$V,F$Z,F$m){if(this.childs.length<1&&!this.text)return F$Z;F$Z.length;if(this.condition){var F$J=!!this.condition.call(F$V);if(2===this.conditionType&&(F$J=!F$J),!F$J)return F$Z}if(this.text&&F$Z.push(this.text),0<this.childs.length&&this.childs.forEach(function(F$J,F$y,F$T){F$J._toscript(F$V,F$Z,F$m)}),0<this.includefiles.length&&0<this.useFuns.length)for(var F$y,F$T=0,F$R=this.includefiles.length;F$T<F$R;F$T++)this.includefiles[F$T].curUseID!=F$m&&0<(F$y=this.includefiles[F$T].file.getFunsScript(this.useFuns)).length&&(this.includefiles[F$T].curUseID=F$m,F$Z[0]=F$y+F$Z[0]);return F$Z},F$T.__id=1,F$T}(),F$T=function(){function F$J(F$J){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=F$J;for(var F$y=0,F$T=0,F$V=0;!((F$y=F$J.indexOf("#begin",F$y))<0);){for(F$V=F$y+5;!((F$V=F$J.indexOf("#end",F$V))<0)&&"i"===F$J.charAt(F$V+4);)F$V+=5;if(F$V<0)throw"add include err,no #end:"+F$J;F$T=F$J.indexOf("\n",F$y);var F$Z=F$L.splitToWords(F$J.substr(F$y,F$T-F$y),null);"code"==F$Z[1]?this.codes[F$Z[2]]=F$J.substr(F$T+1,F$V-F$T-1):"function"==F$Z[1]&&(F$T=F$J.indexOf("function",F$y),F$T+="function".length,this.funs[F$Z[3]]=F$J.substr(F$T+1,F$V-F$T-1),this.funnames+=F$Z[3]+";"),F$y=F$V+1}}F$M(F$J,"");var F$y=F$J.prototype;return F$y.getWith=function(F$J){var F$y=F$J?this.codes[F$J]:this.script;if(!F$y)throw"get with error:"+F$J;return F$y},F$y.getFunsScript=function(F$J){var F$y="";for(var F$T in this.funs)0<=F$J.indexOf(F$T+";")&&(F$y+=this.funs[F$T]);return F$y},F$J}()},F$L}(),F$HJ=function(){function F$R(){}return F$M(F$R,"laya.webgl.WebGL"),F$R._uint8ArraySlice=function(){for(var F$J=this.length,F$y=new Uint8Array(this.length),F$T=0;F$T<F$J;F$T++)F$y[F$T]=this[F$T];return F$y},F$R._float32ArraySlice=function(){for(var F$J=this.length,F$y=new Float32Array(this.length),F$T=0;F$T<F$J;F$T++)F$y[F$T]=this[F$T];return F$y},F$R._uint16ArraySlice=function(F$J){var F$y,F$T=arguments,F$V=0,F$Z=0;if(0===F$T.length)for(F$V=this.length,F$y=new Uint16Array(F$V),F$Z=0;F$Z<F$V;F$Z++)F$y[F$Z]=this[F$Z];else if(2===F$T.length){var F$m=F$T[0],F$R=F$T[1];if(F$m<F$R)for(F$V=F$R-F$m,F$y=new Uint16Array(F$V),F$Z=F$m;F$Z<F$R;F$Z++)F$y[F$Z-F$m]=this[F$Z];else F$y=new Uint16Array(0)}return F$y},F$R.expandContext=function(){var F$J=F$Z.prototype,F$y=CanvasRenderingContext2D.prototype;F$y.fillTrangles=F$J.fillTrangles,F$jJ.__int__(null),F$y.setIBVB=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){void 0===F$K&&(F$K=0),void 0===F$A&&(F$A=0),null===F$T&&(this._ib=this._ib||F$wJ.QuadrangleIB,F$T=this._ib,F$sJ.expandIBQuadrangle(F$T,F$V._byteLength/64+8)),this._setIBVB(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A)},F$y.fillTrangles=function(F$J,F$y,F$T,F$V,F$Z){this._curMat=this._curMat||F$r.create(),this._vb=this._vb||F$zJ.create(),this._ib||(this._ib=F$wJ.create(),F$sJ.fillIBQuadrangle(this._ib,F$R/4));var F$m=this._vb,F$R=F$V.length>>4;F$sJ.fillTranglesVB(F$m,F$y,F$T,F$V,F$Z||this._curMat,0,0),F$sJ.expandIBQuadrangle(this._ib,F$m._byteLength/64+8);var F$n=new F$qJ(1,0);F$n.textureHost=F$J;var F$K=new F$NJ("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");F$m._vertType=3,this._setIBVB(F$y,F$T,this._ib,F$m,6*F$R,F$Z,F$K,F$n,0,0)}},F$R.enable=function(){if(F$G.__init__(),F$E.isConchApp&&!F$E.isConchWebGL)return F$P.skinAniSprite=function(){return new F$JJ},F$R.expandContext(),!1;if(F$P.getWebGLContext=function(F$J){for(var F$y,F$T=["webgl","experimental-webgl","webkit-3d","moz-webgl"],F$V=0;F$V<F$T.length;F$V++){try{F$y=F$J.getContext(F$T[F$V],{stencil:F$a.isStencil,alpha:F$a.isAlpha,antialias:F$a.isAntialias,premultipliedAlpha:F$a.premultipliedAlpha,preserveDrawingBuffer:F$a.preserveDrawingBuffer})}catch(F$J){}if(F$y)return F$y}return null},null==(F$R.mainContext=F$R.mainContext||F$P.getWebGLContext(F$E._mainCanvas)))return!1;if(F$E.isWebGL)return!0;F$o.create=function(F$J,F$y){return new F$Jy(F$J,F$y)},F$s.create=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){return new F$hJ(F$J,F$y,F$T,F$V,F$Z,F$m,F$R)},F$E.WebGL=F$R,F$E.isWebGL=!0,F$GJ.__init__(),F$P.createRenderSprite=function(F$J,F$y){return new F$rJ(F$J,F$y)},F$P.createWebGLContext2D=function(F$J){return new F$aJ(F$J)},F$P.changeWebGLSize=function(F$J,F$y){laya.webgl.WebGL.onStageResize(F$J,F$y)},F$P.createGraphics=function(){return new F$lJ};var F$J=F$P.createFilterAction;return F$P.createFilterAction=F$J||function(F$J){return new F$DJ},F$P.clear=function(F$J){F$OJ.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var F$y=F$E.context.ctx,F$T=0==F$y._submits._length||F$a.preserveDrawingBuffer?F$B.create(F$J)._color:F$v._wgColor;F$T&&F$y.clearBG(F$T[0],F$T[1],F$T[2],F$T[3]),F$OJ.clear()},F$P.addToAtlas=function(F$J,F$y){void 0===F$y&&(F$y=!1);var F$T=F$J.bitmap;F$E.optimizeTextureMemory(F$J.url,F$J)?F$l.__typeof(F$T,"laya.webgl.resource.IMergeAtlasBitmap")&&F$T.allowMerageInAtlas&&F$T.on("recovered",F$J,F$J.addTextureToAtlas):F$T.enableMerageInAtlas=!1},F$P.isAtlas=function(F$J){return F$J instanceof laya.webgl.atlas.AtlasWebGLCanvas},F$I._enable(),F$P.beginFlush=function(){for(var F$J=F$I.instance,F$y=F$J.getAtlaserCount(),F$T=0;F$T<F$y;F$T++){var F$V=F$J.getAtlaserByIndex(F$T).texture;F$V._flashCacheImageNeedFlush&&F$P.flashFlushImage(F$V)}},F$P.drawToCanvas=function(F$J,F$y,F$T,F$V,F$Z,F$m){(F$T<=0||F$V<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),F$T|=0,F$V|=0,F$Z|=0,F$m|=0;var F$R=F$XJ.create(F$T,F$V,6408,5121,0,!1);F$R.start(),F$R.clear(0,0,0,0),F$E.context.clear(),F$O.renders[F$y]._fun(F$J,F$E.context,F$Z,F$OJ.height-F$V+F$m),F$E.context.flush(),F$R.end();var F$n=F$R.getData(0,0,F$T,F$V);if(F$R.recycle(),F$n.byteLength==F$T*F$V*4){var F$K=new F$CJ;F$K._canvas=F$G.createElement("canvas"),F$K.size(F$T,F$V);var F$A=F$K._canvas.getContext("2d");F$G.canvas.size(F$T,F$V);var F$$=F$G.context,F$e=F$$.createImageData(F$T,F$V);return F$e.data.set(new Uint8ClampedArray(F$n.buffer)),F$K._imgData=F$e,F$$.putImageData(F$e,0,0),F$A.save(),F$A.translate(0,F$V),F$A.scale(1,-1),F$A.drawImage(F$G.canvas.source,0,0),F$A.restore(),F$K}console.log("drawToCanvas error: w:"+F$T+",h:"+F$V+",datalen:"+F$n.byteLength)},F$P.createFilterAction=function(F$J){var F$y;switch(F$J){case 32:F$y=new F$DJ}return F$y},F$P.addTextureToAtlas=function(F$J){F$J._uvID++,F$I._atlasRestore++,F$J.bitmap.enableMerageInAtlas&&F$I.instance.addToAtlas(F$J)},F$P.getTexturePixels=function(F$J,F$y,F$T,F$V,F$Z){F$E.context.ctx.clear();var F$m=new F$t;F$m.graphics.drawTexture(F$J,-F$y,-F$T);var F$R=F$XJ.create(F$V,F$Z);F$R.start(),F$R.clear(0,0,0,0),F$m.render(F$E.context,0,0),F$E.context.ctx.flush(),F$R.end();for(var F$n=F$R.getData(0,0,F$V,F$Z),F$K=[],F$A=0,F$$=F$Z-1;0<=F$$;F$$--)for(var F$e=0;F$e<F$V;F$e++)F$A=4*(F$$*F$V+F$e),F$K.push(F$n[F$A]),F$K.push(F$n[F$A+1]),F$K.push(F$n[F$A+2]),F$K.push(F$n[F$A+3]);return F$K},F$P.skinAniSprite=function(){return new F$JJ},F$A.create=function(F$J,F$y){var F$T=new F$CJ;return F$T._imgData=F$y,F$T.flipY=!1,F$T},F$q._filterStart=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$J.getValue("bounds"),F$R=F$XJ.create(F$m.width,F$m.height);if(F$R.start(),F$R.clear(0,0,0,0),F$J.addValue("src",F$R),F$J.addValue("ScissorTest",F$OJ.worldScissorTest),F$OJ.worldScissorTest){var F$n=new F$_;F$n.copyFrom(F$T.ctx._clipRect),F$J.addValue("clipRect",F$n),F$OJ.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},F$q._filterEnd=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$J.getValue("bounds");F$J.getValue("src").end();var F$R=F$XJ.create(F$m.width,F$m.height);F$R.start(),F$R.clear(0,0,0,0),F$J.addValue("out",F$R),F$y._set$P("_filterCache",F$R),F$y._set$P("_isHaveGlowFilter",F$J.getValue("_isHaveGlowFilter"))},F$q._EndTarget=function(F$J,F$y){if(F$J.getValue("src").recycle(),F$J.getValue("out").end(),F$J.getValue("ScissorTest")){F$OJ.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),F$y.ctx.save();var F$T=F$J.getValue("clipRect");F$y.ctx.clipRect(F$T.x,F$T.y,F$T.width,F$T.height)}},F$q._useSrc=function(F$J){var F$y=F$J.getValue("out");F$y.end(),(F$y=F$J.getValue("src")).start(),F$y.clear(0,0,0,0)},F$q._endSrc=function(F$J){F$J.getValue("src").end()},F$q._useOut=function(F$J){var F$y=F$J.getValue("src");F$y.end(),(F$y=F$J.getValue("out")).start(),F$y.clear(0,0,0,0)},F$q._endOut=function(F$J){F$J.getValue("out").end()},F$q._recycleScope=function(F$J){F$J.recycle()},F$q._filter=function(F$J,F$y,F$T,F$V){var F$Z=this._next;if(F$Z){var F$m,F$R,F$n=F$J.filters,F$K=F$n.length;if(1==F$K&&32==F$n[0].type)return F$y.ctx.save(),F$y.ctx.setFilters([F$n[0]]),F$Z._fun.call(F$Z,F$J,F$y,F$T,F$V),void F$y.ctx.restore();var F$A=F$nJ.create(),F$$=F$D.TEMP,F$e=F$y.ctx._getTransformMatrix(),F$M=F$r.create();F$e.copyTo(F$M);var F$G=0,F$B=0,F$o=!1,F$s=F$J._$P._filterCache?F$J._$P._filterCache:null;if(!F$s||F$J._repaint){F$o=F$J._isHaveGlowFilter(),F$A.addValue("_isHaveGlowFilter",F$o),F$o&&(F$G=50,F$B=25),(F$R=new F$_).copyFrom(F$J.getSelfBounds()),F$R.x+=F$J.x,F$R.y+=F$J.y,F$R.x-=F$J.pivotX+4,F$R.y-=F$J.pivotY+4;var F$E=F$R.x,F$O=F$R.y;if(F$R.width+=F$G+8,F$R.height+=F$G+8,F$$.x=F$R.x*F$M.a+F$R.y*F$M.c,F$$.y=F$R.y*F$M.d+F$R.x*F$M.b,F$R.x=F$$.x,F$R.y=F$$.y,F$$.x=F$R.width*F$M.a+F$R.height*F$M.c,F$$.y=F$R.height*F$M.d+F$R.width*F$M.b,F$R.width=F$$.x,F$R.height=F$$.y,F$R.width<=0||F$R.height<=0)return;F$s&&F$s.recycle(),F$A.addValue("bounds",F$R);var F$L=F$RJ.create([F$A,F$J,F$y,0,0],F$q._filterStart);F$y.addRenderObject(F$L),F$y.ctx._renderKey=0,F$y.ctx._shader2D.glTexture=null;var F$H=F$J.x-F$E+F$B,F$P=F$J.y-F$O+F$B;F$Z._fun.call(F$Z,F$J,F$y,F$H,F$P),F$L=F$RJ.create([F$A,F$J,F$y,0,0],F$q._filterEnd),F$y.addRenderObject(F$L);for(var F$l=0;F$l<F$K;F$l++){0!=F$l&&(F$L=F$RJ.create([F$A],F$q._useSrc),F$y.addRenderObject(F$L),F$m=F$qJ.create(1,0),F$r.TEMP.identity(),F$y.ctx.drawTarget(F$A,0,0,F$R.width,F$R.height,F$r.TEMP,"out",F$m,null,F$U.TOINT.overlay),F$L=F$RJ.create([F$A],F$q._useOut),F$y.addRenderObject(F$L)),F$n[F$l].action.apply3d(F$A,F$J,F$y,0,0)}F$L=F$RJ.create([F$A,F$y],F$q._EndTarget),F$y.addRenderObject(F$L)}else{if((F$o=!!F$J._$P._isHaveGlowFilter&&F$J._$P._isHaveGlowFilter)&&(F$G=50,F$B=25),(F$R=F$J.getBounds()).width<=0||F$R.height<=0)return;F$R.width+=F$G,F$R.height+=F$G,F$$.x=F$R.x*F$M.a+F$R.y*F$M.c,F$$.y=F$R.y*F$M.d+F$R.x*F$M.b,F$R.x=F$$.x,F$R.y=F$$.y,F$$.x=F$R.width*F$M.a+F$R.height*F$M.c,F$$.y=F$R.height*F$M.d+F$R.width*F$M.b,F$R.width=F$$.x,F$R.height=F$$.y,F$A.addValue("out",F$s)}F$T=F$T-F$B-F$J.x,F$V=F$V-F$B-F$J.y,F$$.setTo(F$T,F$V),F$M.transformPoint(F$$),F$T=F$$.x+F$R.x,F$V=F$$.y+F$R.y,F$m=F$qJ.create(1,0),F$r.TEMP.identity(),F$y.ctx.drawTarget(F$A,F$T,F$V,F$R.width,F$R.height,F$r.TEMP,"out",F$m,null,F$U.TOINT.overlay),F$L=F$RJ.create([F$A],F$q._recycleScope),F$y.addRenderObject(F$L),F$M.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=F$R._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=F$R._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=F$R._uint8ArraySlice),!0},F$R.onStageResize=function(F$J,F$y){null!=F$R.mainContext&&(F$R.mainContext.viewport(0,0,F$J,F$y),F$OJ.width=F$J,F$OJ.height=F$y)},F$R.onInvalidGLRes=function(){F$I.instance.freeAll(),F$H.releaseContentManagers(!0),F$R.doNodeRepaint(F$l.stage),F$R.mainContext.viewport(0,0,F$OJ.width,F$OJ.height),F$l.stage.event("devicelost")},F$R.doNodeRepaint=function(F$J){0==F$J.numChildren&&F$J.repaint();for(var F$y=0;F$y<F$J.numChildren;F$y++)F$R.doNodeRepaint(F$J.getChildAt(F$y))},F$R.init=function(F$J,F$y,F$T){F$R.mainCanvas=F$J,F$A._createContext=function(F$J){return new F$aJ(F$J)},F$CJ._createContext=function(F$J){return new F$aJ(F$J)};var F$V=laya.webgl.WebGL.mainContext;if(null!=F$V.getShaderPrecisionFormat){var F$Z=F$V.getShaderPrecisionFormat(35633,36338),F$m=F$V.getShaderPrecisionFormat(35632,36338);F$R.shaderHighPrecision=!(!F$Z.precision||!F$m.precision)}else F$R.shaderHighPrecision=!1;if(F$R.compressAstc=F$V.getExtension("WEBGL_compressed_texture_astc"),F$R.compressAtc=F$V.getExtension("WEBGL_compressed_texture_atc"),F$R.compressEtc=F$V.getExtension("WEBGL_compressed_texture_etc"),F$R.compressEtc1=F$V.getExtension("WEBGL_compressed_texture_etc1"),F$R.compressPvrtc=F$V.getExtension("WEBGL_compressed_texture_pvrtc"),F$R.compressS3tc=F$V.getExtension("WEBGL_compressed_texture_s3tc"),F$R.compressS3tc_srgb=F$V.getExtension("WEBGL_compressed_texture_s3tc_srgb"),F$R.compressAstc=F$R.compressAstc?F$R.compressAstc:{},F$R.compressAtc=F$R.compressAtc?F$R.compressAtc:{},F$R.compressEtc=F$R.compressEtc?F$R.compressEtc:{},F$R.compressEtc1=F$R.compressEtc1?F$R.compressEtc1:{},F$R.compressPvrtc=F$R.compressPvrtc?F$R.compressPvrtc:{},F$R.compressS3tc=F$R.compressS3tc?F$R.compressS3tc:{},F$R.compressS3tc_srgb=F$R.compressS3tc_srgb?F$R.compressS3tc_srgb:{},F$V.deleteTexture1=F$V.deleteTexture,F$V.deleteTexture=function(F$J){F$J==F$PJ.curBindTexValue&&(F$PJ.curBindTexValue=null),F$V.deleteTexture1(F$J)},F$R.onStageResize(F$y,F$T),null==F$R.mainContext)throw new Error("webGL getContext err!");F$c.__init__(),F$I.__init__(),F$tJ.__init__(),F$mJ.__init__(),F$aJ.__init__(),F$qJ.__init__(),F$w.__init__(),F$jJ.__int__(F$V),F$U._init_(F$V),F$E.isConchApp&&conch.setOnInvalidGLRes(F$R.onInvalidGLRes)},F$R.mainCanvas=null,F$R.antialias=!0,F$R.shaderHighPrecision=!1,F$R._bg_null=[0,0,0,0],F$R}(),F$PJ=function(){function F$V(){}return F$M(F$V,"laya.webgl.WebGLContext"),F$V.UseProgram=function(F$J){return F$V._useProgram!==F$J&&(F$HJ.mainContext.useProgram(F$J),F$V._useProgram=F$J,!0)},F$V.setDepthTest=function(F$J,F$y){F$y!==F$V._depthTest&&((F$V._depthTest=F$y)?F$J.enable(2929):F$J.disable(2929))},F$V.setDepthMask=function(F$J,F$y){F$y!==F$V._depthMask&&(F$V._depthMask=F$y,F$J.depthMask(F$y))},F$V.setDepthFunc=function(F$J,F$y){F$y!==F$V._depthFunc&&(F$V._depthFunc=F$y,F$J.depthFunc(F$y))},F$V.setBlend=function(F$J,F$y){F$y!==F$V._blend&&((F$V._blend=F$y)?F$J.enable(3042):F$J.disable(3042))},F$V.setBlendFunc=function(F$J,F$y,F$T){(F$y!==F$V._sFactor||F$T!==F$V._dFactor)&&(F$V._sFactor=F$y,F$V._dFactor=F$T,F$J.blendFunc(F$y,F$T))},F$V.setCullFace=function(F$J,F$y){F$y!==F$V._cullFace&&((F$V._cullFace=F$y)?F$J.enable(2884):F$J.disable(2884))},F$V.setFrontFace=function(F$J,F$y){F$y!==F$V._frontFace&&(F$V._frontFace=F$y,F$J.frontFace(F$y))},F$V.bindTexture=function(F$J,F$y,F$T){F$J.bindTexture(F$y,F$T),F$V.curBindTexTarget=F$y,F$V.curBindTexValue=F$T},F$V.DEPTH_BUFFER_BIT=256,F$V.STENCIL_BUFFER_BIT=1024,F$V.COLOR_BUFFER_BIT=16384,F$V.POINTS=0,F$V.LINES=1,F$V.LINE_LOOP=2,F$V.LINE_STRIP=3,F$V.TRIANGLES=4,F$V.TRIANGLE_STRIP=5,F$V.TRIANGLE_FAN=6,F$V.ZERO=0,F$V.ONE=1,F$V.SRC_COLOR=768,F$V.ONE_MINUS_SRC_COLOR=769,F$V.SRC_ALPHA=770,F$V.ONE_MINUS_SRC_ALPHA=771,F$V.DST_ALPHA=772,F$V.ONE_MINUS_DST_ALPHA=773,F$V.DST_COLOR=774,F$V.ONE_MINUS_DST_COLOR=775,F$V.SRC_ALPHA_SATURATE=776,F$V.FUNC_ADD=32774,F$V.BLEND_EQUATION=32777,F$V.BLEND_EQUATION_RGB=32777,F$V.BLEND_EQUATION_ALPHA=34877,F$V.FUNC_SUBTRACT=32778,F$V.FUNC_REVERSE_SUBTRACT=32779,F$V.BLEND_DST_RGB=32968,F$V.BLEND_SRC_RGB=32969,F$V.BLEND_DST_ALPHA=32970,F$V.BLEND_SRC_ALPHA=32971,F$V.CONSTANT_COLOR=32769,F$V.ONE_MINUS_CONSTANT_COLOR=32770,F$V.CONSTANT_ALPHA=32771,F$V.ONE_MINUS_CONSTANT_ALPHA=32772,F$V.BLEND_COLOR=32773,F$V.ARRAY_BUFFER=34962,F$V.ELEMENT_ARRAY_BUFFER=34963,F$V.ARRAY_BUFFER_BINDING=34964,F$V.ELEMENT_ARRAY_BUFFER_BINDING=34965,F$V.STREAM_DRAW=35040,F$V.STATIC_DRAW=35044,F$V.DYNAMIC_DRAW=35048,F$V.BUFFER_SIZE=34660,F$V.BUFFER_USAGE=34661,F$V.CURRENT_VERTEX_ATTRIB=34342,F$V.FRONT=1028,F$V.BACK=1029,F$V.CULL_FACE=2884,F$V.FRONT_AND_BACK=1032,F$V.BLEND=3042,F$V.DITHER=3024,F$V.STENCIL_TEST=2960,F$V.DEPTH_TEST=2929,F$V.SCISSOR_TEST=3089,F$V.POLYGON_OFFSET_FILL=32823,F$V.SAMPLE_ALPHA_TO_COVERAGE=32926,F$V.SAMPLE_COVERAGE=32928,F$V.NO_ERROR=0,F$V.INVALID_ENUM=1280,F$V.INVALID_VALUE=1281,F$V.INVALID_OPERATION=1282,F$V.OUT_OF_MEMORY=1285,F$V.CW=2304,F$V.CCW=2305,F$V.LINE_WIDTH=2849,F$V.ALIASED_POINT_SIZE_RANGE=33901,F$V.ALIASED_LINE_WIDTH_RANGE=33902,F$V.CULL_FACE_MODE=2885,F$V.FRONT_FACE=2886,F$V.DEPTH_RANGE=2928,F$V.DEPTH_WRITEMASK=2930,F$V.DEPTH_CLEAR_VALUE=2931,F$V.DEPTH_FUNC=2932,F$V.STENCIL_CLEAR_VALUE=2961,F$V.STENCIL_FUNC=2962,F$V.STENCIL_FAIL=2964,F$V.STENCIL_PASS_DEPTH_FAIL=2965,F$V.STENCIL_PASS_DEPTH_PASS=2966,F$V.STENCIL_REF=2967,F$V.STENCIL_VALUE_MASK=2963,F$V.STENCIL_WRITEMASK=2968,F$V.STENCIL_BACK_FUNC=34816,F$V.STENCIL_BACK_FAIL=34817,F$V.STENCIL_BACK_PASS_DEPTH_FAIL=34818,F$V.STENCIL_BACK_PASS_DEPTH_PASS=34819,F$V.STENCIL_BACK_REF=36003,F$V.STENCIL_BACK_VALUE_MASK=36004,F$V.STENCIL_BACK_WRITEMASK=36005,F$V.VIEWPORT=2978,F$V.SCISSOR_BOX=3088,F$V.COLOR_CLEAR_VALUE=3106,F$V.COLOR_WRITEMASK=3107,F$V.UNPACK_ALIGNMENT=3317,F$V.PACK_ALIGNMENT=3333,F$V.MAX_TEXTURE_SIZE=3379,F$V.MAX_VIEWPORT_DIMS=3386,F$V.SUBPIXEL_BITS=3408,F$V.RED_BITS=3410,F$V.GREEN_BITS=3411,F$V.BLUE_BITS=3412,F$V.ALPHA_BITS=3413,F$V.DEPTH_BITS=3414,F$V.STENCIL_BITS=3415,F$V.POLYGON_OFFSET_UNITS=10752,F$V.POLYGON_OFFSET_FACTOR=32824,F$V.TEXTURE_BINDING_2D=32873,F$V.SAMPLE_BUFFERS=32936,F$V.SAMPLES=32937,F$V.SAMPLE_COVERAGE_VALUE=32938,F$V.SAMPLE_COVERAGE_INVERT=32939,F$V.NUM_COMPRESSED_TEXTURE_FORMATS=34466,F$V.COMPRESSED_TEXTURE_FORMATS=34467,F$V.DONT_CARE=4352,F$V.FASTEST=4353,F$V.NICEST=4354,F$V.GENERATE_MIPMAP_HINT=33170,F$V.BYTE=5120,F$V.UNSIGNED_BYTE=5121,F$V.SHORT=5122,F$V.UNSIGNED_SHORT=5123,F$V.INT=5124,F$V.UNSIGNED_INT=5125,F$V.FLOAT=5126,F$V.DEPTH_COMPONENT=6402,F$V.ALPHA=6406,F$V.RGB=6407,F$V.RGBA=6408,F$V.LUMINANCE=6409,F$V.LUMINANCE_ALPHA=6410,F$V.UNSIGNED_SHORT_4_4_4_4=32819,F$V.UNSIGNED_SHORT_5_5_5_1=32820,F$V.UNSIGNED_SHORT_5_6_5=33635,F$V.FRAGMENT_SHADER=35632,F$V.VERTEX_SHADER=35633,F$V.MAX_VERTEX_ATTRIBS=34921,F$V.MAX_VERTEX_UNIFORM_VECTORS=36347,F$V.MAX_VARYING_VECTORS=36348,F$V.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,F$V.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,F$V.MAX_TEXTURE_IMAGE_UNITS=34930,F$V.MAX_FRAGMENT_UNIFORM_VECTORS=36349,F$V.SHADER_TYPE=35663,F$V.DELETE_STATUS=35712,F$V.LINK_STATUS=35714,F$V.VALIDATE_STATUS=35715,F$V.ATTACHED_SHADERS=35717,F$V.ACTIVE_UNIFORMS=35718,F$V.ACTIVE_ATTRIBUTES=35721,F$V.SHADING_LANGUAGE_VERSION=35724,F$V.CURRENT_PROGRAM=35725,F$V.NEVER=512,F$V.LESS=513,F$V.EQUAL=514,F$V.LEQUAL=515,F$V.GREATER=516,F$V.NOTEQUAL=517,F$V.GEQUAL=518,F$V.ALWAYS=519,F$V.KEEP=7680,F$V.REPLACE=7681,F$V.INCR=7682,F$V.DECR=7683,F$V.INVERT=5386,F$V.INCR_WRAP=34055,F$V.DECR_WRAP=34056,F$V.VENDOR=7936,F$V.RENDERER=7937,F$V.VERSION=7938,F$V.NEAREST=9728,F$V.LINEAR=9729,F$V.NEAREST_MIPMAP_NEAREST=9984,F$V.LINEAR_MIPMAP_NEAREST=9985,F$V.NEAREST_MIPMAP_LINEAR=9986,F$V.LINEAR_MIPMAP_LINEAR=9987,F$V.TEXTURE_MAG_FILTER=10240,F$V.TEXTURE_MIN_FILTER=10241,F$V.TEXTURE_WRAP_S=10242,F$V.TEXTURE_WRAP_T=10243,F$V.TEXTURE_2D=3553,F$V.TEXTURE=5890,F$V.TEXTURE_CUBE_MAP=34067,F$V.TEXTURE_BINDING_CUBE_MAP=34068,F$V.TEXTURE_CUBE_MAP_POSITIVE_X=34069,F$V.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,F$V.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,F$V.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,F$V.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,F$V.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,F$V.MAX_CUBE_MAP_TEXTURE_SIZE=34076,F$V.TEXTURE0=33984,F$V.TEXTURE1=33985,F$V.TEXTURE2=33986,F$V.TEXTURE3=33987,F$V.TEXTURE4=33988,F$V.TEXTURE5=33989,F$V.TEXTURE6=33990,F$V.TEXTURE7=33991,F$V.TEXTURE8=33992,F$V.TEXTURE9=33993,F$V.TEXTURE10=33994,F$V.TEXTURE11=33995,F$V.TEXTURE12=33996,F$V.TEXTURE13=33997,F$V.TEXTURE14=33998,F$V.TEXTURE15=33999,F$V.TEXTURE16=34e3,F$V.TEXTURE17=34001,F$V.TEXTURE18=34002,F$V.TEXTURE19=34003,F$V.TEXTURE20=34004,F$V.TEXTURE21=34005,F$V.TEXTURE22=34006,F$V.TEXTURE23=34007,F$V.TEXTURE24=34008,F$V.TEXTURE25=34009,F$V.TEXTURE26=34010,F$V.TEXTURE27=34011,F$V.TEXTURE28=34012,F$V.TEXTURE29=34013,F$V.TEXTURE30=34014,F$V.TEXTURE31=34015,F$V.ACTIVE_TEXTURE=34016,F$V.REPEAT=10497,F$V.CLAMP_TO_EDGE=33071,F$V.MIRRORED_REPEAT=33648,F$V.FLOAT_VEC2=35664,F$V.FLOAT_VEC3=35665,F$V.FLOAT_VEC4=35666,F$V.INT_VEC2=35667,F$V.INT_VEC3=35668,F$V.INT_VEC4=35669,F$V.BOOL=35670,F$V.BOOL_VEC2=35671,F$V.BOOL_VEC3=35672,F$V.BOOL_VEC4=35673,F$V.FLOAT_MAT2=35674,F$V.FLOAT_MAT3=35675,F$V.FLOAT_MAT4=35676,F$V.SAMPLER_2D=35678,F$V.SAMPLER_CUBE=35680,F$V.VERTEX_ATTRIB_ARRAY_ENABLED=34338,F$V.VERTEX_ATTRIB_ARRAY_SIZE=34339,F$V.VERTEX_ATTRIB_ARRAY_STRIDE=34340,F$V.VERTEX_ATTRIB_ARRAY_TYPE=34341,F$V.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,F$V.VERTEX_ATTRIB_ARRAY_POINTER=34373,F$V.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,F$V.COMPILE_STATUS=35713,F$V.LOW_FLOAT=36336,F$V.MEDIUM_FLOAT=36337,F$V.HIGH_FLOAT=36338,F$V.LOW_INT=36339,F$V.MEDIUM_INT=36340,F$V.HIGH_INT=36341,F$V.FRAMEBUFFER=36160,F$V.RENDERBUFFER=36161,F$V.RGBA4=32854,F$V.RGB5_A1=32855,F$V.RGB565=36194,F$V.DEPTH_COMPONENT16=33189,F$V.STENCIL_INDEX=6401,F$V.STENCIL_INDEX8=36168,F$V.DEPTH_STENCIL=34041,F$V.RENDERBUFFER_WIDTH=36162,F$V.RENDERBUFFER_HEIGHT=36163,F$V.RENDERBUFFER_INTERNAL_FORMAT=36164,F$V.RENDERBUFFER_RED_SIZE=36176,F$V.RENDERBUFFER_GREEN_SIZE=36177,F$V.RENDERBUFFER_BLUE_SIZE=36178,F$V.RENDERBUFFER_ALPHA_SIZE=36179,F$V.RENDERBUFFER_DEPTH_SIZE=36180,F$V.RENDERBUFFER_STENCIL_SIZE=36181,F$V.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,F$V.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,F$V.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,F$V.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,F$V.COLOR_ATTACHMENT0=36064,F$V.DEPTH_ATTACHMENT=36096,F$V.STENCIL_ATTACHMENT=36128,F$V.DEPTH_STENCIL_ATTACHMENT=33306,F$V.NONE=0,F$V.FRAMEBUFFER_COMPLETE=36053,F$V.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,F$V.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,F$V.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,F$V.FRAMEBUFFER_UNSUPPORTED=36061,F$V.FRAMEBUFFER_BINDING=36006,F$V.RENDERBUFFER_BINDING=36007,F$V.MAX_RENDERBUFFER_SIZE=34024,F$V.INVALID_FRAMEBUFFER_OPERATION=1286,F$V.UNPACK_FLIP_Y_WEBGL=37440,F$V.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,F$V.CONTEXT_LOST_WEBGL=37442,F$V.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,F$V.BROWSER_DEFAULT_WEBGL=37444,F$V._useProgram=null,F$V._depthTest=!0,F$V._depthMask=!0,F$V._blend=!1,F$V._cullFace=!1,F$V.curBindTexTarget=null,F$V.curBindTexValue=null,F$R(F$V,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),F$V}(),F$lJ=function(F$J){function F$y(){F$y.__super.call(this)}F$M(F$y,"laya.webgl.display.GraphicsGL",F$n);var F$T=F$y.prototype;return F$T.setShader=function(F$J){this._saveToCmd(F$E.context._setShader,[F$J])},F$T.setIBVB=function(F$J,F$y,F$T,F$V,F$Z,F$m){this._saveToCmd(F$E.context._setIBVB,[F$J,F$y,F$T,F$V,F$Z,F$m])},F$T.drawParticle=function(F$J,F$y,F$T){var F$V=F$P.createParticleTemplate2D(F$T);F$V.x=F$J,F$V.y=F$y,this._saveToCmd(F$E.context._drawParticle,[F$V])},F$y}(),F$aJ=function(F$J){var F$T;function F$W(F$J){this._x=0,this._y=0,this._id=++F$W._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,F$W.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=F$W.MAXCLIPRECT,this.mOutPoint,this._canvas=F$J,this._canvas._addReference(),F$W._contextcount++,F$E.isFlash?(this._ib=F$wJ.create(35044),F$sJ.fillIBQuadrangle(this._ib,16)):this._ib=F$wJ.QuadrangleIB,this.clear()}F$M(F$W,"laya.webgl.canvas.WebGLContext2D",F$Z);var F$y=F$W.prototype;return F$y.setIsMainContext=function(){this._isMain=!0},F$y.clearBG=function(F$J,F$y,F$T,F$V){var F$Z=F$HJ.mainContext;F$Z.clearColor(F$J,F$y,F$T,F$V),F$Z.clear(16384)},F$y._getSubmits=function(){return this._submits},F$y._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var F$J=0,F$y=this._submits._length;F$J<F$y;F$J++)this._submits[F$J].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},F$y.destroy=function(){--F$W._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=F$wJ.QuadrangleIB&&this._ib.releaseResource()},F$y.clear=function(){this._submits||(this._other=F$T.DEFAULT,this._curMat=F$r.create(),this._vb=F$zJ.create(-1),this._submits=[],this._save=[F$p.Create(this)],this._save.length=10,this._shader2D=new F$w,this._triangleMesh=F$xJ.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=F$T.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=F$W.MAXCLIPRECT,this._curSubmit=F$mJ.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=F$d.DEFAULT;for(var F$J=0,F$y=this._submits._length;F$J<F$y;F$J++)this._submits[F$J].releaseRender(),this._submits[F$J]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},F$y.size=function(F$J,F$y){if(this._width!=F$J||this._height!=F$y)if(0==F$J||0==F$y){0!=this._vb._byteLength&&(this._width=F$J,this._height=F$y,this._vb.clear(),this._vb.upload());for(var F$T=0,F$V=this._submits._length;F$T<F$V;F$T++)this._submits[F$T].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=F$J,this._height=F$y,this._targets&&this._targets.size(F$J,F$y),this._canvas.memorySize-=this._canvas.memorySize;0===F$J&&0===F$y&&this._releaseMem()},F$y._getTransformMatrix=function(){return this._curMat},F$y.translate=function(F$J,F$y){0===F$J&&0===F$y||(F$g.save(this),this._curMat.bTransform&&(F$j.save(this),this._curMat.transformPointN(F$D.TEMP.setTo(F$J,F$y)),F$J=F$D.TEMP.x,F$y=F$D.TEMP.y),this._x+=F$J,this._y+=F$y)},F$y.save=function(){this._save[this._save._length++]=F$p.Create(this)},F$y.restore=function(){var F$J=this._save._length;if(!(F$J<1))for(var F$y=F$J-1;0<=F$y;F$y--){var F$T=this._save[F$y];if(F$T.restore(this),F$T.isSaveMark())return void(this._save._length=F$y)}},F$y._fillText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){void 0===F$A&&(F$A=0);var F$$=this._shader2D,F$e=this._curSubmit.shaderValue,F$M=F$Z?F$BJ.create(F$Z):this._other.font;if(F$I.enabled)F$$.ALPHA!==F$e.ALPHA&&(F$$.glTexture=null),F$GJ.drawText(this,F$J,F$y,this._curMat,F$M,F$K||this._other.textAlign,F$m,F$R,F$n,F$T,F$V,F$A);else{this._shader2D.defines.getValue();var F$G=F$m?F$B.create(F$m)._color:F$$.colorAdd;F$$.ALPHA===F$e.ALPHA&&F$G===F$$.colorAdd&&F$e.colorAdd===F$$.colorAdd||(F$$.glTexture=null,F$$.colorAdd=F$G),F$GJ.drawText(this,F$J,F$y,this._curMat,F$M,F$K||this._other.textAlign,F$m,F$R,F$n,F$T,F$V,F$A)}},F$y.fillWords=function(F$J,F$y,F$T,F$V,F$Z,F$m){this._fillText(null,F$J,F$y,F$T,F$V,F$Z,null,-1,null,F$m)},F$y.fillBorderWords=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this._fillBorderText(null,F$J,F$y,F$T,F$V,F$Z,F$m,F$R,null)},F$y.fillText=function(F$J,F$y,F$T,F$V,F$Z,F$m){this._fillText(F$J,null,F$y,F$T,F$V,F$Z,null,-1,F$m)},F$y.strokeText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this._fillText(F$J,null,F$y,F$T,F$V,null,F$Z,F$m||1,F$R)},F$y.fillBorderText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){this._fillBorderText(F$J,null,F$y,F$T,F$V,F$Z,F$m,F$R,F$n)},F$y._fillBorderText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){if(!F$I.enabled)return this._fillText(F$J,F$y,F$T,F$V,F$Z,null,F$R,F$n||1,F$K),void this._fillText(F$J,F$y,F$T,F$V,F$Z,F$m,null,-1,F$K);var F$A=this._shader2D,F$$=this._curSubmit.shaderValue;F$A.ALPHA!==F$$.ALPHA&&(F$A.glTexture=null);var F$e=F$Z?(F$W._fontTemp.setFont(F$Z),F$W._fontTemp):this._other.font;F$GJ.drawText(this,F$J,F$y,this._curMat,F$e,F$K||this._other.textAlign,F$m,F$R,F$n||1,F$T,F$V,0)},F$y.fillRect=function(F$J,F$y,F$T,F$V,F$Z){var F$m=this._vb;if(F$sJ.fillRectImgVb(F$m,this._clipRect,F$J,F$y,F$T,F$V,F$x.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var F$R=this._shader2D.fillStyle;F$Z&&(this._shader2D.fillStyle=F$d.create(F$Z));var F$n=this._shader2D,F$K=this._curSubmit.shaderValue;if(F$n.fillStyle!==F$K.fillStyle||F$n.ALPHA!==F$K.ALPHA){F$n.glTexture=null;var F$A=this._curSubmit=F$mJ.createSubmit(this,this._ib,F$m,(F$m._byteLength-64)/32*3,F$qJ.create(2,0));F$A.shaderValue.color=F$n.fillStyle._color._color,F$A.shaderValue.ALPHA=F$n.ALPHA,this._submits[this._submits._length++]=F$A}this._curSubmit._numEle+=6,this._shader2D.fillStyle=F$R}},F$y.fillTexture=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){if(F$J.loaded&&F$J.bitmap&&F$J.source){var F$K=this._vb,F$A=F$J.bitmap.width,F$$=F$J.bitmap.height,F$e=F$J.uv,F$M=F$R.x%F$J.width,F$G=F$R.y%F$J.height;if(F$A!=F$n.w||F$$!=F$n.h){if(!F$n.w&&!F$n.h)switch(F$n.oy=F$n.ox=0,F$m){case"repeat":F$n.width=F$V,F$n.height=F$Z;break;case"repeat-x":F$n.width=F$V,F$G<0?F$J.height+F$G>F$Z?F$n.height=F$Z:F$n.height=F$J.height+F$G:(F$n.oy=F$G,F$J.height+F$G>F$Z?F$n.height=F$Z-F$G:F$n.height=F$J.height);break;case"repeat-y":F$M<0?F$J.width+F$M>F$V?F$n.width=F$V:F$n.width=F$J.width+F$M:(F$n.ox=F$M,F$J.width+F$M>F$V?F$n.width=F$V-F$M:F$n.width=F$J.width),F$n.height=F$Z;break;case"no-repeat":F$M<0?F$J.width+F$M>F$V?F$n.width=F$V:F$n.width=F$J.width+F$M:(F$n.ox=F$M,F$J.width+F$M>F$V?F$n.width=F$V-F$M:F$n.width=F$J.width),F$G<0?F$J.height+F$G>F$Z?F$n.height=F$Z:F$n.height=F$J.height+F$G:(F$n.oy=F$G,F$J.height+F$G>F$Z?F$n.height=F$Z-F$G:F$n.height=F$J.height);break;default:F$n.width=F$V,F$n.height=F$Z}F$n.w=F$A,F$n.h=F$$,F$n.uv=[0,0,F$n.width/F$A,0,F$n.width/F$A,F$n.height/F$$,0,F$n.height/F$$]}if(F$y+=F$n.ox,F$T+=F$n.oy,F$M-=F$n.ox,F$G-=F$n.oy,F$sJ.fillRectImgVb(F$K,this._clipRect,F$y,F$T,F$n.width,F$n.height,F$n.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var F$B=F$uJ.create(this,this._ib,F$K,(F$K._byteLength-64)/32*3,F$qJ.create(256,0)),F$o=(this._submits[this._submits._length++]=F$B).shaderValue;F$o.textureHost=F$J;var F$s=F$e[0]*F$A,F$E=F$e[1]*F$$,F$O=(F$e[2]-F$e[0])*F$A,F$L=(F$e[5]-F$e[3])*F$$,F$H=-F$M/F$A,F$P=-F$G/F$$;F$o.u_TexRange[0]=F$s/F$A,F$o.u_TexRange[1]=F$O/F$A,F$o.u_TexRange[2]=F$E/F$$,F$o.u_TexRange[3]=F$L/F$$,F$o.u_offset[0]=F$H,F$o.u_offset[1]=F$P,F$I.enabled&&!this._isMain&&F$B.addTexture(F$J,(F$K._byteLength>>2)-16),(this._curSubmit=F$B)._renderType=10017,F$B._numEle+=6}}else this.sprite&&F$l.timer.callLater(this,this._repaintSprite)},F$y.setShader=function(F$J){F$F.save(this,1048576,this._shader2D,!0),this._shader2D.shader=F$J},F$y.setFilters=function(F$J){F$F.save(this,2097152,this._shader2D,!0),this._shader2D.filters=F$J,this._curSubmit=F$mJ.RENDERBASE,this._renderKey=0,this._drawCount++},F$y.drawTexture=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this._drawTextureM(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,null,1)},F$y.addTextureVb=function(F$J,F$y,F$T){var F$V=this._curSubmit._vb||this._vb,F$Z=F$V._byteLength>>2;F$V.byteLength=F$Z+16<<2;for(var F$m=F$V.getFloat32Array(),F$R=0;F$R<16;F$R+=4)F$m[F$Z++]=F$J[F$R]+F$y,F$m[F$Z++]=F$J[F$R+1]+F$T,F$m[F$Z++]=F$J[F$R+2],F$m[F$Z++]=F$J[F$R+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),F$V._upload=!0},F$y.willDrawTexture=function(F$J,F$y){if(!(F$J.loaded&&F$J.bitmap&&F$J.source))return this.sprite&&F$l.timer.callLater(this,this._repaintSprite),0;var F$T=F$J.bitmap,F$V=F$T.id+this._shader2D.ALPHA*F$y+10016;if(F$V==this._renderKey)return F$V;var F$Z=this._shader2D,F$m=F$Z.ALPHA,F$R=this._curSubmit.shaderValue;F$Z.ALPHA*=F$y,this._renderKey=F$V,this._drawCount++,F$Z.glTexture=F$T;var F$n=this._vb,F$K=null,F$A=F$n._byteLength/32*3,F$$=F$R.textureHost&&F$R.textureHost==F$J&&F$R.textureHost.alphaTexture==F$J.alphaTexture;return F$K=F$uJ.create(this,this._ib,F$n,F$A,F$qJ.create(1,0)),(this._submits[this._submits._length++]=F$K).shaderValue.textureHost=F$J,F$K._renderType=10016,F$K._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$Z.ALPHA===F$R.ALPHA&&F$$,this._curSubmit=F$K,F$Z.ALPHA=F$m,F$V},F$y.drawTextures=function(F$J,F$y,F$T,F$V){if(F$J.loaded&&F$J.bitmap&&F$J.source){var F$Z=this._clipRect;if(this._clipRect=F$W.MAXCLIPRECT,this._drawTextureM(F$J,F$y[0],F$y[1],F$J.width,F$J.height,F$T,F$V,null,1)){if(this._clipRect=F$Z,F$Q.drawCall++,!(F$y.length<4)){for(var F$m=this._curSubmit._vb||this._vb,F$R=this._curMat.a,F$n=this._curMat.d,F$K=2,F$A=F$y.length;F$K<F$A;F$K+=2)F$sJ.copyPreImgVb(F$m,(F$y[F$K]-F$y[F$K-2])*F$R,(F$y[F$K+1]-F$y[F$K-1])*F$n),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&F$l.timer.callLater(this,this._repaintSprite)},F$y._drawTextureM=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){if(!F$J.loaded||!F$J.source)return this.sprite&&F$l.timer.callLater(this,this._repaintSprite),!1;var F$A=this._curSubmit._vb||this._vb,F$$=F$J.bitmap;F$y+=F$m,F$T+=F$R,this._drawCount++;var F$e=F$$.id+this._shader2D.ALPHA*F$K+10016;if(F$e!=this._renderKey){this._renderKey=F$e;var F$M=this._curSubmit.shaderValue,F$G=this._shader2D,F$B=F$G.ALPHA;F$G.ALPHA*=F$K,F$G.glTexture=F$$;var F$o=this._vb,F$s=null,F$E=F$o._byteLength/32*3,F$O=F$M.textureHost&&F$M.textureHost==F$J&&F$M.textureHost.alphaTexture==F$J.alphaTexture;F$s=F$uJ.create(this,this._ib,F$o,F$E,F$qJ.create(1,0)),(this._submits[this._submits._length++]=F$s).shaderValue.textureHost=F$J,F$s._renderType=10016,F$s._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$G.ALPHA===F$M.ALPHA&&F$O,this._curSubmit=F$s,F$A=this._curSubmit._vb||this._vb,F$G.ALPHA=F$B}return!!F$sJ.fillRectImgVb(F$A,this._clipRect,F$y,F$T,F$V||F$J.width,F$Z||F$J.height,F$J.uv,F$n||this._curMat,this._x,this._y,0,0)&&(F$I.enabled&&!this._isMain&&this._curSubmit.addTexture(F$J,(F$A._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},F$y._repaintSprite=function(){this.sprite&&this.sprite.repaint()},F$y._drawText=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){var F$$=F$J.bitmap;this._drawCount++;var F$e=F$$.id+this._shader2D.ALPHA+10016;if(F$e!=this._renderKey){this._renderKey=F$e;var F$M=this._curSubmit.shaderValue,F$G=this._shader2D;F$G.glTexture=F$$;var F$B=this._vb,F$o=null,F$s=F$B._byteLength/32*3,F$E=F$M.textureHost&&F$M.textureHost==F$J&&F$M.textureHost.alphaTexture==F$J.alphaTexture;(F$o=F$I.enabled?F$uJ.create(this,this._ib,F$B,F$s,F$qJ.create(1,0)):F$uJ.create(this,this._ib,F$B,F$s,F$gJ.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$G.ALPHA===F$M.ALPHA&&F$E,(this._submits[this._submits._length++]=F$o).shaderValue.textureHost=F$J,F$o._renderType=10016,this._curSubmit=F$o}F$J.active();var F$O=this._curSubmit._vb||this._vb;F$sJ.fillRectImgVb(F$O,this._clipRect,F$y+F$R,F$T+F$n,F$V||F$J.width,F$Z||F$J.height,F$J.uv,F$m||this._curMat,this._x,this._y,F$K,F$A,!0)&&(F$I.enabled&&!this._isMain&&this._curSubmit.addTexture(F$J,(F$O._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},F$y.drawTextureWithTransform=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){if(F$m){var F$A=this._curMat,F$$=this._x,F$e=this._y;(0!==F$R||0!==F$n)&&(this._x=F$R*F$A.a+F$n*F$A.c,this._y=F$n*F$A.d+F$R*F$A.b),F$m&&F$A.bTransform?(F$r.mul(F$m,F$A,F$W._tmpMatrix),(F$m=F$W._tmpMatrix)._checkTransform()):(this._x+=F$A.tx,this._y+=F$A.ty),this._drawTextureM(F$J,F$y,F$T,F$V,F$Z,0,0,F$m,F$K),this._x=F$$,this._y=F$e}else this._drawTextureM(F$J,F$y,F$T,F$V,F$Z,F$R,F$n,null,F$K)},F$y.fillQuadrangle=function(F$J,F$y,F$T,F$V,F$Z){var F$m=this._curSubmit,F$R=this._vb,F$n=this._shader2D,F$K=F$m.shaderValue;if(this._renderKey=0,F$J.bitmap){var F$A=F$J.bitmap;F$n.glTexture==F$A&&F$n.ALPHA===F$K.ALPHA||(F$n.glTexture=F$A,(F$m=this._curSubmit=F$mJ.createSubmit(this,this._ib,F$R,F$R._byteLength/32*3,F$qJ.create(1,0))).shaderValue.glTexture=F$A,this._submits[this._submits._length++]=F$m),F$sJ.fillQuadrangleImgVb(F$R,F$y,F$T,F$V,F$J.uv,F$Z||this._curMat,this._x,this._y)}else F$m.shaderValue.fillStyle&&F$m.shaderValue.fillStyle.equal(F$J)&&F$n.ALPHA===F$K.ALPHA||(F$n.glTexture=null,(F$m=this._curSubmit=F$mJ.createSubmit(this,this._ib,F$R,F$R._byteLength/32*3,F$qJ.create(2,0))).shaderValue.defines.add(2),F$m.shaderValue.fillStyle=F$d.create(F$J),this._submits[this._submits._length++]=F$m),F$sJ.fillQuadrangleImgVb(F$R,F$y,F$T,F$V,F$x.DEF_UV,F$Z||this._curMat,this._x,this._y);F$m._numEle+=6},F$y.drawTexture2=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){if(0!=F$m){var F$K=this._curMat;if(this._x=F$J*F$K.a+F$y*F$K.c,this._y=F$y*F$K.d+F$J*F$K.b,F$Z&&(F$Z=F$K.bTransform||F$Z.bTransform?(F$r.mul(F$Z,F$K,F$W._tmpMatrix),F$W._tmpMatrix):(this._x+=F$Z.tx+F$K.tx,this._y+=F$Z.ty+F$K.ty,F$r.EMPTY)),1!==F$m||F$R){var F$A=this._shader2D.ALPHA,F$$=this._nBlendType;this._shader2D.ALPHA=F$m,F$R&&(this._nBlendType=F$U.TOINT(F$R)),this._drawTextureM(F$n[0],F$n[1]-F$T,F$n[2]-F$V,F$n[3],F$n[4],0,0,F$Z,1),this._shader2D.ALPHA=F$A,this._nBlendType=F$$}else this._drawTextureM(F$n[0],F$n[1]-F$T,F$n[2]-F$V,F$n[3],F$n[4],0,0,F$Z,1);this._x=this._y=0}},F$y.drawCanvas=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$J.context;if(this._renderKey=0,F$m._targets)this._submits[this._submits._length++]=F$cJ.create(F$m,0,null),this._curSubmit=F$mJ.RENDERBASE,F$m._targets.drawTo(this,F$y,F$T,F$V,F$Z);else{var F$R=this._submits[this._submits._length++]=F$cJ.create(F$m,this._shader2D.ALPHA,this._shader2D.filters),F$n=F$V/F$J.width,F$K=F$Z/F$J.height,F$A=F$R._matrix;this._curMat.copyTo(F$A),1!=F$n&&1!=F$K&&F$A.scale(F$n,F$K);var F$$=F$A.tx,F$e=F$A.ty;F$A.tx=F$A.ty=0,F$A.transformPoint(F$D.TEMP.setTo(F$y,F$T)),F$A.translate(F$D.TEMP.x+F$$,F$D.TEMP.y+F$e),this._curSubmit=F$mJ.RENDERBASE}F$a.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=F$m._targets?"yellow":"green",this.strokeRect(F$y-1,F$T-1,F$V+2,F$Z+2,1),this.strokeRect(F$y,F$T,F$V,F$Z,1),this.restore())},F$y.drawTarget=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){void 0===F$A&&(F$A=-1);var F$$=this._vb;if(F$sJ.fillRectImgVb(F$$,this._clipRect,F$y,F$T,F$V,F$Z,F$K||F$x.DEF_UV,F$m||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var F$e=this._curSubmit=F$eJ.create(this,this._ib,F$$,(F$$._byteLength-64)/32*3,F$n,F$R);F$e.blendType=-1==F$A?this._nBlendType:F$A,F$e.scope=F$J,this._submits[this._submits._length++]=F$e,this._curSubmit._numEle+=6}},F$y.mixRGBandAlpha=function(F$J){return this._mixRGBandAlpha(F$J,this._shader2D.ALPHA)},F$y._mixRGBandAlpha=function(F$J,F$y){var F$T=(4278190080&F$J)>>>24;return 0!=F$T?F$T*=F$y:F$T=255*F$y,16777215&F$J|F$T<<24},F$y.drawTriangles=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){if(!F$J.loaded||!F$J.source)return this.sprite&&F$l.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;F$J.bitmap;var F$$=this._mixRGBandAlpha(4294967295,F$n),F$e=(F$V.length,F$m.length);this._renderKey=-1;var F$M=this._curSubmit=F$uJ.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,F$qJ.create(1,0));return F$M.shaderValue.textureHost=F$J,F$M._renderType=10016,this._submits[this._submits._length++]=F$M,F$R?(F$W._tmpMatrix.a=F$R.a,F$W._tmpMatrix.b=F$R.b,F$W._tmpMatrix.c=F$R.c,F$W._tmpMatrix.d=F$R.d,F$W._tmpMatrix.tx=F$R.tx+F$y,F$W._tmpMatrix.ty=F$R.ty+F$T,F$r.mul(F$W._tmpMatrix,this._curMat,F$W._tmpMatrix)):(F$W._tmpMatrix.a=this._curMat.a,F$W._tmpMatrix.b=this._curMat.b,F$W._tmpMatrix.c=this._curMat.c,F$W._tmpMatrix.d=this._curMat.d,F$W._tmpMatrix.tx=this._curMat.tx+F$y,F$W._tmpMatrix.ty=this._curMat.ty+F$T),this._triangleMesh.addData(F$V,F$Z,F$m,F$W._tmpMatrix,F$$,this),this._curSubmit._numEle+=F$e,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},F$y.transform=function(F$J,F$y,F$T,F$V,F$Z,F$m){F$j.save(this),F$r.mul(F$r.TEMP.setTo(F$J,F$y,F$T,F$V,F$Z,F$m),this._curMat,this._curMat),this._curMat._checkTransform()},F$y.setTransformByMatrix=function(F$J){F$J.copyTo(this._curMat)},F$y.transformByMatrix=function(F$J){F$j.save(this),F$r.mul(F$J,this._curMat,this._curMat),this._curMat._checkTransform()},F$y.rotate=function(F$J){F$j.save(this),this._curMat.rotateEx(F$J)},F$y.scale=function(F$J,F$y){F$j.save(this),this._curMat.scaleEx(F$J,F$y)},F$y.clipRect=function(F$J,F$y,F$T,F$V){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var F$Z=F$$J.create(4);this.addRenderObject(F$Z);var F$m=this._vb,F$R=F$m._byteLength>>2;if(F$sJ.fillRectImgVb(F$m,null,F$J,F$y,F$T,F$V,F$x.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var F$n=this._curSubmit=F$mJ.createSubmit(this,this._ib,F$m,(F$m._byteLength-64)/32*3,F$qJ.create(2,0));F$n.shaderValue.ALPHA=1,this._submits[this._submits._length++]=F$n,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var F$K=F$$J.create(5);this.addRenderObject(F$K);var F$A=F$m.getFloat32Array(),F$$=Math.min(Math.min(Math.min(F$A[0+F$R],F$A[4+F$R]),F$A[8+F$R]),F$A[12+F$R]),F$e=Math.max(Math.max(Math.max(F$A[0+F$R],F$A[4+F$R]),F$A[8+F$R]),F$A[12+F$R]),F$M=Math.min(Math.min(Math.min(F$A[1+F$R],F$A[5+F$R]),F$A[9+F$R]),F$A[13+F$R]),F$G=Math.max(Math.max(Math.max(F$A[1+F$R],F$A[5+F$R]),F$A[9+F$R]),F$A[13+F$R]);F$h.save(this,F$K,F$J,F$y,F$T,F$V,F$$,F$M,F$e-F$$,F$G-F$M),this._curSubmit=F$mJ.RENDERBASE}else{F$T*=this._curMat.a,F$V*=this._curMat.d;var F$B=F$D.TEMP;this._curMat.transformPoint(F$B.setTo(F$J,F$y)),F$T<0&&(F$B.x=F$B.x+F$T,F$T=-F$T),F$V<0&&(F$B.y=F$B.y+F$V,F$V=-F$V),this._renderKey=0;var F$o=this._curSubmit=F$AJ.create(this);(this._submits[this._submits._length++]=F$o).submitIndex=this._submits._length,F$o.submitLength=9999999,F$b.save(this,F$o);var F$s=this._clipRect,F$E=F$s.x,F$O=F$s.y,F$L=F$B.x+F$T,F$H=F$B.y+F$V;F$E<F$B.x&&(F$s.x=F$B.x),F$O<F$B.y&&(F$s.y=F$B.y),F$s.width=Math.min(F$L,F$E+F$s.width)-F$s.x,F$s.height=Math.min(F$H,F$O+F$s.height)-F$s.y,this._shader2D.glTexture=null,F$o.clipRect.copyFrom(F$s),this._curSubmit=F$mJ.RENDERBASE}},F$y.setIBVB=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$){if(void 0===F$K&&(F$K=0),void 0===F$A&&(F$A=0),void 0===F$$&&(F$$=0),null===F$T){if(F$E.isFlash){var F$e=F$V;F$e._selfIB||(F$e._selfIB=F$wJ.create(35044)),F$e._selfIB.clear(),F$T=F$e._selfIB}else F$T=this._ib;F$sJ.expandIBQuadrangle(F$T,F$V._byteLength/(4*F$V.vertexStride*4))}if(!F$n||!F$R)throw Error("setIBVB must input:shader shaderValues");var F$M=F$KJ.create(this,F$V,F$T,F$Z,F$R,F$n,F$K,F$A,F$$);F$m||(F$m=F$r.EMPTY),F$m.translate(F$J,F$y),F$r.mul(F$m,this._curMat,F$M._mat),F$m.translate(-F$J,-F$y),this._submits[this._submits._length++]=F$M,this._curSubmit=F$mJ.RENDERBASE,this._renderKey=0},F$y.addRenderObject=function(F$J){this._submits[this._submits._length++]=F$J},F$y.fillTrangles=function(F$J,F$y,F$T,F$V,F$Z){var F$m=this._curSubmit,F$R=this._vb,F$n=this._shader2D,F$K=F$m.shaderValue,F$A=F$V.length>>4,F$$=F$J.bitmap;this._renderKey=0,F$n.glTexture==F$$&&F$n.ALPHA===F$K.ALPHA||((F$m=this._curSubmit=F$mJ.createSubmit(this,this._ib,F$R,F$R._byteLength/32*3,F$qJ.create(1,0))).shaderValue.textureHost=F$J,this._submits[this._submits._length++]=F$m),F$sJ.fillTranglesVB(F$R,F$y,F$T,F$V,F$Z||this._curMat,this._x,this._y),F$m._numEle+=6*F$A},F$y.submitElement=function(F$J,F$y){var F$T=this._submits;for(F$y<0&&(F$y=F$T._length);F$J<F$y;)F$J+=F$T[F$J].renderSubmit()},F$y.finish=function(){F$HJ.mainContext.finish()},F$y.flush=function(){var F$J=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(F$J>this._ib.bufferLength/12&&F$sJ.expandIBQuadrangle(this._ib,F$J),!this._isMain&&F$I.enabled&&F$I._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=F$I._atlasRestore;for(var F$y=this._submits,F$T=0,F$V=F$y._length;F$T<F$V;F$T++){var F$Z=F$y[F$T];10016===F$Z.getRenderType()&&F$Z.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),F$yJ.instance&&F$yJ.getInstance().reset();var F$m;for(F$T=0,F$m=this.meshlist.length;F$T<F$m;F$T++){var F$R=this.meshlist[F$T];F$R.canReuse?F$R.releaseMesh():F$R.destroy()}return this.meshlist.length=0,this._curSubmit=F$mJ.RENDERBASE,this._renderKey=0,this._triangleMesh=F$xJ.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},F$y.setPathId=function(F$J){if(this.mId=F$J,-1!=this.mId){this.mHaveKey=!1;var F$y=F$X.getInstance();F$y.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,F$y.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},F$y.movePath=function(F$J,F$y){var F$T=F$J,F$V=F$y;F$J=this._curMat.a*F$T+this._curMat.c*F$V+this._curMat.tx,F$y=this._curMat.b*F$T+this._curMat.d*F$V+this._curMat.ty,this.mX+=F$J,this.mY+=F$y},F$y.beginPath=function(){var F$J=this._getPath();F$J.tempArray.length=0,F$J.closePath=!1,this.mX=0,this.mY=0},F$y.closePath=function(){this._path.closePath=!0},F$y.fill=function(F$J){void 0===F$J&&(F$J=!1);var F$y=this._getPath();this.drawPoly(0,0,F$y.tempArray,this.fillStyle._color.numColor,0,0,F$J)},F$y.stroke=function(){var F$J=this._getPath();if(0<this.lineWidth){if(-1==this.mId)F$J.drawLine(0,0,F$J.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var F$y=F$X.getInstance().shapeLineDic[this.mId];F$y.rebuild(F$J.tempArray),F$J.setGeomtry(F$y)}else F$X.getInstance().addLine(this.mId,F$J.drawLine(0,0,F$J.tempArray,this.lineWidth,this.strokeStyle._color.numColor));F$J.update();var F$T=[this.mX,this.mY],F$V=F$mJ.createShape(this,F$J.ib,F$J.vb,F$J.count,F$J.offset,F$qJ.create(4,0));F$V.shaderValue.ALPHA=this._shader2D.ALPHA,F$V.shaderValue.u_pos=F$T,F$V.shaderValue.u_mmat2=F$OJ.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=F$V,this._renderKey=-1}},F$y.line=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=this._curSubmit,F$n=this._vb;if(F$sJ.fillLineVb(F$n,this._clipRect,F$J,F$y,F$T,F$V,F$Z,F$m)){this._renderKey=0;var F$K=this._shader2D,F$A=F$R.shaderValue;F$K.strokeStyle===F$A.strokeStyle&&F$K.ALPHA===F$A.ALPHA||(F$K.glTexture=null,(F$R=this._curSubmit=F$mJ.createSubmit(this,this._ib,F$n,(F$n._byteLength-64)/32*3,F$qJ.create(2,0))).shaderValue.strokeStyle=F$K.strokeStyle,F$R.shaderValue.mainID=2,F$R.shaderValue.ALPHA=F$K.ALPHA,this._submits[this._submits._length++]=F$R),F$R._numEle+=6}},F$y.moveTo=function(F$J,F$y,F$T){void 0===F$T&&(F$T=!0);var F$V=this._getPath();if(F$T){var F$Z=F$J,F$m=F$y;F$J=this._curMat.a*F$Z+this._curMat.c*F$m,F$y=this._curMat.b*F$Z+this._curMat.d*F$m}F$V.addPoint(F$J,F$y)},F$y.lineTo=function(F$J,F$y,F$T){void 0===F$T&&(F$T=!0);var F$V=this._getPath();if(F$T){var F$Z=F$J,F$m=F$y;F$J=this._curMat.a*F$Z+this._curMat.c*F$m,F$y=this._curMat.b*F$Z+this._curMat.d*F$m}F$V.addPoint(F$J,F$y)},F$y.drawCurves=function(F$J,F$y,F$T){this.setPathId(-1),this.beginPath(),this.strokeStyle=F$T[3],this.lineWidth=F$T[4];var F$V=F$T[2];F$J+=F$T[0],F$y+=F$T[1],this.movePath(F$J,F$y),this.moveTo(F$V[0],F$V[1]);for(var F$Z=2,F$m=F$V.length;F$Z<F$m;)this.quadraticCurveTo(F$V[F$Z++],F$V[F$Z++],F$V[F$Z++],F$V[F$Z++]);this.stroke()},F$y.arcTo=function(F$J,F$y,F$T,F$V,F$Z){if(-1==this.mId||!this.mHaveKey){var F$m=0,F$R=0,F$n=0,F$K=this._getPath();this._curMat.copyTo(F$W._tmpMatrix),F$W._tmpMatrix.tx=F$W._tmpMatrix.ty=0,F$W._tempPoint.setTo(F$K.getEndPointX(),F$K.getEndPointY()),F$W._tmpMatrix.invertTransformPoint(F$W._tempPoint);var F$A=F$W._tempPoint.x-F$J,F$$=F$W._tempPoint.y-F$y,F$e=Math.sqrt(F$A*F$A+F$$*F$$);if(!(F$e<=1e-6)){var F$M=F$A/F$e,F$G=F$$/F$e,F$B=F$T-F$J,F$o=F$V-F$y,F$s=F$B*F$B+F$o*F$o,F$E=Math.sqrt(F$s);if(!(F$E<=1e-6)){var F$O=F$B/F$E,F$L=F$o/F$E,F$H=F$M+F$O,F$P=F$G+F$L,F$l=Math.sqrt(F$H*F$H+F$P*F$P);if(!(F$l<=1e-6)){var F$a=F$H/F$l,F$q=F$P/F$l,F$r=Math.acos(F$a*F$M+F$q*F$G),F$D=Math.PI/2-F$r,F$_=(F$e=F$Z/Math.tan(F$D))*F$M+F$J,F$t=F$e*F$G+F$y,F$v=Math.sqrt(F$e*F$e+F$Z*F$Z),F$Q=F$J+F$a*F$v,F$i=F$y+F$q*F$v,F$c=0,F$u=0;if(0<=F$M*F$L-F$G*F$O){var F$x=2*F$D/F$W.SEGNUM;F$c=Math.sin(F$x),F$u=Math.cos(F$x)}else F$x=2*-F$D/F$W.SEGNUM,F$c=Math.sin(F$x),F$u=Math.cos(F$x);F$R=this._curMat.a*F$_+this._curMat.c*F$t,F$n=this._curMat.b*F$_+this._curMat.d*F$t,F$R==this._path.getEndPointX()&&F$n==this._path.getEndPointY()||F$K.addPoint(F$R,F$n);var F$k=F$_-F$Q,F$X=F$t-F$i;for(F$m=0;F$m<F$W.SEGNUM;F$m++){var F$S=F$k*F$u+F$X*F$c,F$f=-F$k*F$c+F$X*F$u;F$R=F$S+F$Q,F$n=F$f+F$i,F$J=this._curMat.a*F$R+this._curMat.c*F$n,F$n=F$y=this._curMat.b*F$R+this._curMat.d*F$n,(F$R=F$J)==this._path.getEndPointX()&&F$n==this._path.getEndPointY()||F$K.addPoint(F$R,F$n),F$k=F$S,F$X=F$f}}}}}},F$y.arc=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){if(void 0===F$m&&(F$m=!1),void 0===F$R&&(F$R=!0),-1!=this.mId){var F$n=F$X.getInstance().shapeDic[this.mId];if(F$n&&this.mHaveKey&&!F$n.needUpdate(this._curMat))return;F$y=F$J=0}var F$K,F$A=0,F$$=0,F$e=0,F$M=0,F$G=0,F$B=0,F$o=0;if(F$$=F$Z-F$V,F$m)if(Math.abs(F$$)>=2*Math.PI)F$$=2*-Math.PI;else for(;0<F$$;)F$$-=2*Math.PI;else if(Math.abs(F$$)>=2*Math.PI)F$$=2*Math.PI;else for(;F$$<0;)F$$+=2*Math.PI;F$K=F$$/(F$o=F$T<101?Math.max(10,F$$*F$T/5):F$T<201?Math.max(10,F$$*F$T/20):Math.max(10,F$$*F$T/40))/2,F$e=Math.abs(4/3*(1-Math.cos(F$K))/Math.sin(F$K)),F$m&&(F$e=-F$e);var F$s=this._getPath(),F$E=NaN,F$O=NaN;for(F$B=0;F$B<=F$o;F$B++)F$A=F$V+F$$*(F$B/F$o),F$M=F$J+Math.cos(F$A)*F$T,F$G=F$y+Math.sin(F$A)*F$T,F$R&&(F$E=F$M,F$O=F$G,F$M=this._curMat.a*F$E+this._curMat.c*F$O,F$G=this._curMat.b*F$E+this._curMat.d*F$O),F$M==this._path.getEndPointX()&&F$G==this._path.getEndPointY()||F$s.addPoint(F$M,F$G);F$M=F$J+Math.cos(F$Z)*F$T,F$G=F$y+Math.sin(F$Z)*F$T,F$R&&(F$E=F$M,F$O=F$G,F$M=this._curMat.a*F$E+this._curMat.c*F$O,F$G=this._curMat.b*F$E+this._curMat.d*F$O),F$M==this._path.getEndPointX()&&F$G==this._path.getEndPointY()||F$s.addPoint(F$M,F$G)},F$y.quadraticCurveTo=function(F$J,F$y,F$T,F$V){var F$Z=F$e.I,F$m=F$T,F$R=F$V;F$T=this._curMat.a*F$m+this._curMat.c*F$R,F$V=this._curMat.b*F$m+this._curMat.d*F$R,F$m=F$J,F$R=F$y,F$J=this._curMat.a*F$m+this._curMat.c*F$R,F$y=this._curMat.b*F$m+this._curMat.d*F$R;for(var F$n=F$Z.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),F$J,F$y,F$T,F$V],30,2),F$K=0,F$A=F$n.length/2;F$K<F$A;F$K++)this.lineTo(F$n[2*F$K],F$n[2*F$K+1],!1);this.lineTo(F$T,F$V,!1)},F$y.rect=function(F$J,F$y,F$T,F$V){this._other=this._other.make(),this._other.path||(this._other.path=new F$C),this._other.path.rect(F$J,F$y,F$T,F$V)},F$y.strokeRect=function(F$J,F$y,F$T,F$V,F$Z){var F$m=.5*F$Z;this.line(F$J-F$m,F$y,F$J+F$T+F$m,F$y,F$Z,this._curMat),this.line(F$J+F$T,F$y,F$J+F$T,F$y+F$V,F$Z,this._curMat),this.line(F$J,F$y,F$J,F$y+F$V,F$Z,this._curMat),this.line(F$J-F$m,F$y+F$V,F$J+F$T+F$m,F$y+F$V,F$Z,this._curMat)},F$y.clip=function(){},F$y.drawPoly=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){void 0===F$R&&(F$R=!1),this._renderKey=0,this._shader2D.glTexture=null;var F$n=this._getPath();if(-1==this.mId)F$n.polygon(F$J,F$y,F$T,F$V,F$Z||1,F$m);else if(this.mHaveKey){var F$K=F$X.getInstance().shapeDic[this.mId];F$K.setMatrix(this._curMat),F$K.rebuild(F$n.tempArray),F$n.setGeomtry(F$K)}else{var F$A=F$n.polygon(F$J,F$y,F$T,F$V,F$Z||1,F$m);F$X.getInstance().addShape(this.mId,F$A),F$A.setMatrix(this._curMat)}F$n.update();var F$$,F$e=[this.mX,this.mY];if((F$$=F$mJ.createShape(this,F$n.ib,F$n.vb,F$n.count,F$n.offset,F$qJ.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,F$$.shaderValue.u_pos=F$e,F$$.shaderValue.u_mmat2=F$OJ.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=F$$,0<F$Z){if(this.mHaveLineKey){var F$M=F$X.getInstance().shapeLineDic[this.mId];F$M.rebuild(F$n.tempArray),F$n.setGeomtry(F$M)}else F$X.getInstance().addShape(this.mId,F$n.drawLine(F$J,F$y,F$T,F$Z,F$m));F$n.update(),(F$$=F$mJ.createShape(this,F$n.ib,F$n.vb,F$n.count,F$n.offset,F$qJ.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,F$$.shaderValue.u_mmat2=F$OJ.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=F$$}},F$y.drawParticle=function(F$J,F$y,F$T){F$T.x=F$J,F$T.y=F$y,this._submits[this._submits._length++]=F$T},F$y._getPath=function(){return this._path||(this._path=new F$C)},F$V(0,F$y,"globalCompositeOperation",function(){return F$U.NAMES[this._nBlendType]},function(F$J){var F$y=F$U.TOINT[F$J];null==F$y||this._nBlendType===F$y||(F$F.save(this,65536,this,!0),this._curSubmit=F$mJ.RENDERBASE,this._renderKey=0,this._nBlendType=F$y)}),F$V(0,F$y,"strokeStyle",function(){return this._shader2D.strokeStyle},function(F$J){this._shader2D.strokeStyle.equal(F$J)||(F$F.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=F$d.create(F$J))}),F$V(0,F$y,"globalAlpha",function(){return this._shader2D.ALPHA},function(F$J){(F$J=Math.floor(1e3*F$J)/1e3)!=this._shader2D.ALPHA&&(F$F.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=F$J)}),F$V(0,F$y,"asBitmap",null,function(F$J){if(F$J){if(this._targets||(this._targets=new F$N),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),F$V(0,F$y,"fillStyle",function(){return this._shader2D.fillStyle},function(F$J){this._shader2D.fillStyle.equal(F$J)||(F$F.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=F$d.create(F$J))}),F$V(0,F$y,"textAlign",function(){return this._other.textAlign},function(F$J){this._other.textAlign===F$J||(this._other=this._other.make(),F$F.save(this,32768,this._other,!1),this._other.textAlign=F$J)}),F$V(0,F$y,"lineWidth",function(){return this._other.lineWidth},function(F$J){this._other.lineWidth===F$J||(this._other=this._other.make(),F$F.save(this,256,this._other,!1),this._other.lineWidth=F$J)}),F$V(0,F$y,"textBaseline",function(){return this._other.textBaseline},function(F$J){this._other.textBaseline===F$J||(this._other=this._other.make(),F$F.save(this,16384,this._other,!1),this._other.textBaseline=F$J)}),F$V(0,F$y,"font",null,function(F$J){F$J!=this._other.font.toString()&&(this._other=this._other.make(),F$F.save(this,8,this._other,!1),this._other.font===F$BJ.EMPTY?this._other.font=new F$BJ(F$J):this._other.font.setFont(F$J))}),F$W.__init__=function(){F$T.DEFAULT=new F$T},F$W._tempPoint=new F$D,F$W._SUBMITVBSIZE=32e3,F$W._MAXSIZE=99999999,F$W._RECTVBSIZE=16,F$W.MAXCLIPRECT=new F$_(0,0,99999999,99999999),F$W._COUNT=0,F$W._tmpMatrix=new F$r,F$W.SEGNUM=32,F$W._contextcount=0,F$R(F$W,["_fontTemp",function(){return this._fontTemp=new F$BJ},"_drawStyleTemp",function(){return this._drawStyleTemp=new F$d(null)}]),F$W.__init$=function(){F$T=function(){function F$J(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=F$BJ.EMPTY}F$M(F$J,"");var F$y=F$J.prototype;return F$y.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=F$BJ.EMPTY},F$y.make=function(){return this===F$J.DEFAULT?new F$J:this},F$J.DEFAULT=null,F$J}()},F$W}(),F$qJ=function(F$J){function F$V(F$J,F$y){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,F$V.__super.call(this),this.defines=new F$tJ,this.position=F$V._POSITION,this.mainID=F$J,this.subID=F$y,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=F$J|F$y,this._inClassCache=F$V._cache[this._cacheID],0<F$J&&!this._inClassCache&&(this._inClassCache=F$V._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}F$M(F$V,"laya.webgl.shader.d2.value.Value2D",F$f);var F$y=F$V.prototype;return F$y.setValue=function(F$J){},F$y.refresh=function(){var F$J=this.size;return F$J[0]=F$OJ.width,F$J[1]=F$OJ.height,this.alpha=this.ALPHA*F$OJ.worldAlpha,this.mmat=F$OJ.worldMatrix4,this},F$y._ShaderWithCompile=function(){return F$pJ.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,F$NJ.create)},F$y._withWorldShaderDefines=function(){var F$J=F$OJ.worldShaderDefines,F$y=F$pJ.sharders[this.mainID|this.defines._value|F$J.getValue()];if(!F$y){var F$T,F$V={};for(F$T in this.defines.toNameDic())F$V[F$T]="";for(F$T in F$J.toNameDic())F$V[F$T]="";F$y=F$pJ.withCompile2D(0,this.mainID,F$V,this.mainID|this.defines._value|F$J.getValue(),F$NJ.create)}var F$Z=F$OJ.worldFilters;if(!F$Z)return F$y;for(var F$m,F$R=F$Z.length,F$n=0;F$n<F$R;F$n++)(F$m=F$Z[F$n])&&F$m.action.setValue(this);return F$y},F$y.upload=function(){var F$J=F$OJ;this.alpha=this.ALPHA*F$J.worldAlpha,F$OJ.worldMatrix4!==F$OJ.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),F$HJ.shaderHighPrecision&&this.defines.add(1024);var F$y,F$T=F$J.worldShaderDefines?this._withWorldShaderDefines():F$pJ.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=F$J.width,this.size[1]=F$J.height,this.mmat=F$J.worldMatrix4,F$kJ.activeShader!==F$T?F$T._shaderValueWidth!==F$J.width||F$T._shaderValueHeight!==F$J.height?(F$T._shaderValueWidth=F$J.width,F$T._shaderValueHeight=F$J.height):F$y=F$T._params2dQuick2||F$T._make2dQuick2():F$T._shaderValueWidth!==F$J.width||F$T._shaderValueHeight!==F$J.height?(F$T._shaderValueWidth=F$J.width,F$T._shaderValueHeight=F$J.height):F$y=F$T._params2dQuick1||F$T._make2dQuick1(),F$T.upload(this,F$y)},F$y.setFilters=function(F$J){if(this.filters=F$J)for(var F$y,F$T=F$J.length,F$V=0;F$V<F$T;F$V++)(F$y=F$J[F$V])&&(this.defines.add(F$y.type),F$y.action.setValue(this))},F$y.clear=function(){this.defines.setValue(this.subID)},F$y.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},F$V._initone=function(F$J,F$y){F$V._typeClass[F$J]=F$y,F$V._cache[F$J]=[],F$V._cache[F$J]._length=0},F$V.__init__=function(){F$V._POSITION=[2,5126,!1,4*F$oJ.BYTES_PE,0],F$V._TEXCOORD=[2,5126,!1,4*F$oJ.BYTES_PE,2*F$oJ.BYTES_PE],F$V._initone(2,F$WJ),F$V._initone(4,F$UJ),F$V._initone(256,F$IJ),F$V._initone(512,F$fJ),F$V._initone(1,F$YJ),F$V._initone(65,F$gJ),F$V._initone(9,F$YJ)},F$V.create=function(F$J,F$y){var F$T=F$V._cache[F$J|F$y];return F$T._length?F$T[--F$T._length]:new F$V._typeClass[F$J|F$y](F$y)},F$V._POSITION=null,F$V._TEXCOORD=null,F$V._cache=[],F$V._typeClass=[],F$V.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$V}(),F$rJ=function(F$J){function F$s(F$J,F$y){F$s.__super.call(this,F$J,F$y)}F$M(F$s,"laya.webgl.utils.RenderSprite3D",F$O);var F$y=F$s.prototype;return F$y.onCreate=function(F$J){switch(F$J){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},F$y._mask=function(F$J,F$y,F$T,F$V){var F$Z,F$m,F$R=this._next,F$n=F$J.mask;if(F$n){F$y.ctx.save();var F$K=F$y.ctx.globalCompositeOperation,F$A=new F$_;if(F$A.copyFrom(F$n.getBounds()),F$A.width=Math.round(F$A.width),F$A.height=Math.round(F$A.height),F$A.x=Math.round(F$A.x),F$A.y=Math.round(F$A.y),0<F$A.width&&0<F$A.height){var F$$=F$J._style._tf,F$e=F$nJ.create();F$e.addValue("bounds",F$A),F$Z=F$RJ.create([F$e,F$y],laya.webgl.utils.RenderSprite3D.tmpTarget),F$y.addRenderObject(F$Z),F$n.render(F$y,-F$A.x,-F$A.y),F$Z=F$RJ.create([F$e],laya.webgl.utils.RenderSprite3D.endTmpTarget),F$y.addRenderObject(F$Z),F$y.ctx.save(),F$y.clipRect(F$T-F$$.translateX+F$A.x,F$V-F$$.translateY+F$A.y,F$A.width,F$A.height),F$R._fun.call(F$R,F$J,F$y,F$T,F$V),F$y.ctx.restore(),F$m=F$$J.create(6),F$K=F$y.ctx.globalCompositeOperation,F$m.blendMode="mask",F$y.addRenderObject(F$m),F$r.TEMP.identity();var F$M=F$qJ.create(1,0),F$G=F$x.INV_UV,F$B=F$A.width,F$o=F$A.height;(F$A.width<32||F$A.height<32)&&((F$G=F$s.tempUV)[0]=0,F$G[1]=0,F$G[2]=32<=F$A.width?1:F$A.width/32,F$G[3]=0,F$G[4]=32<=F$A.width?1:F$A.width/32,F$G[5]=32<=F$A.height?1:F$A.height/32,F$G[6]=0,F$G[7]=32<=F$A.height?1:F$A.height/32,F$A.width=32<=F$A.width?F$A.width:32,F$A.height=32<=F$A.height?F$A.height:32,F$G[1]*=-1,F$G[3]*=-1,F$G[5]*=-1,F$G[7]*=-1,F$G[1]+=1,F$G[3]+=1,F$G[5]+=1,F$G[7]+=1),F$y.ctx.drawTarget(F$e,F$T+F$A.x-F$$.translateX,F$V+F$A.y-F$$.translateY,F$B,F$o,F$r.TEMP,"tmpTarget",F$M,F$G,6),F$Z=F$RJ.create([F$e],laya.webgl.utils.RenderSprite3D.recycleTarget),F$y.addRenderObject(F$Z),(F$m=F$$J.create(6)).blendMode=F$K,F$y.addRenderObject(F$m)}F$y.ctx.restore()}else F$R._fun.call(F$R,F$J,F$y,F$T,F$V)},F$y._blend=function(F$J,F$y,F$T,F$V){var F$Z=F$J._style,F$m=this._next;F$Z.blendMode?(F$y.ctx.save(),F$y.ctx.globalCompositeOperation=F$Z.blendMode,F$m._fun.call(F$m,F$J,F$y,F$T,F$V),F$y.ctx.restore()):F$m._fun.call(F$m,F$J,F$y,F$T,F$V)},F$y._transform=function(F$J,F$y,F$T,F$V){var F$Z=F$J.transform,F$m=this._next;if(F$Z&&F$m!=F$O.NORENDER){var F$R=F$y.ctx;F$J._style;F$Z.tx=F$T,F$Z.ty=F$V;var F$n=F$R._getTransformMatrix(),F$K=F$n.clone();F$r.mul(F$Z,F$n,F$n),F$n._checkTransform(),F$Z.tx=F$Z.ty=0,F$m._fun.call(F$m,F$J,F$y,0,0),F$K.copyTo(F$n),F$K.destroy()}else F$m._fun.call(F$m,F$J,F$y,F$T,F$V)},F$s.tmpTarget=function(F$J,F$y){var F$T=F$J.getValue("bounds"),F$V=F$XJ.create(F$T.width,F$T.height);F$V.start(),F$V.clear(0,0,0,0),F$J.addValue("tmpTarget",F$V)},F$s.endTmpTarget=function(F$J){F$J.getValue("tmpTarget").end()},F$s.recycleTarget=function(F$J){F$J.getValue("tmpTarget").recycle(),F$J.recycle()},F$R(F$s,["tempUV",function(){return this.tempUV=new Array(8)}]),F$s}(),F$DJ=function(F$J){function F$y(){this.data=null,F$y.__super.call(this)}F$M(F$y,"laya.filters.webgl.ColorFilterActionGL",F$S);var F$T=F$y.prototype;return F$l.imps(F$T,{"laya.filters.IFilterActionGL":!0}),F$T.setValue=function(F$J){F$J.colorMat=this.data._mat,F$J.colorAlpha=this.data._alpha},F$T.apply3d=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$J.getValue("bounds"),F$R=F$qJ.create(1,0);F$R.setFilters([this.data]);var F$n=F$r.TEMP;F$n.identity(),F$T.ctx.drawTarget(F$J,0,0,F$m.width,F$m.height,F$n,"src",F$R)},F$y}(),F$_J=function(F$J){function F$m(F$J,F$y,F$T,F$V,F$Z){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,F$m.__super.call(this,F$J,F$y,F$Z),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new F$dJ,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=F$T,this._atlasCanvas.height=F$V,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}F$M(F$m,"laya.webgl.atlas.Atlaser",F$W);var F$y=F$m.prototype;return F$y.computeUVinAtlasTexture=function(F$J,F$y,F$T,F$V){var F$Z=F$I.atlasTextureWidth,F$m=F$I.atlasTextureHeight,F$R=F$T/F$Z,F$n=F$V/F$m,F$K=(F$T+F$J.bitmap.width)/F$Z,F$A=(F$V+F$J.bitmap.height)/F$m,F$$=F$J.bitmap.width/F$Z,F$e=F$J.bitmap.height/F$m;F$J.uv=[F$R+F$y[0]*F$$,F$n+F$y[1]*F$e,F$K-(1-F$y[2])*F$$,F$n+F$y[3]*F$e,F$K-(1-F$y[4])*F$$,F$A-(1-F$y[5])*F$e,F$R+F$y[6]*F$$,F$A-(1-F$y[7])*F$e]},F$y.findBitmapIsExist=function(F$J){if(F$J instanceof laya.webgl.resource.WebGLImage){var F$y=F$J,F$T=F$y.url,F$V=this._InAtlasWebGLImagesKey[F$T||F$y.id];if(F$V)return F$V.offsetInfoID}return-1},F$y.addToAtlasTexture=function(F$J,F$y,F$T){if(F$J instanceof laya.webgl.resource.WebGLImage){var F$V=F$J,F$Z=F$V.url;this._InAtlasWebGLImagesKey[F$Z||F$V.id]={bitmap:F$J,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([F$y,F$T])}this._atlasCanvas.texSubImage2D(F$y,F$T,F$J.atlasSource),F$J.clearAtlasSource()},F$y.addToAtlas=function(F$J,F$y,F$T){F$J._atlasID=this._inAtlasTextureKey.length;var F$V=F$J.uv.slice(),F$Z=F$J.bitmap;this._inAtlasTextureKey.push(F$J),this._inAtlasTextureOriUVValue.push(F$V),this._inAtlasTextureBitmapValue.push(F$Z),this.computeUVinAtlasTexture(F$J,F$V,F$y,F$T),F$J.bitmap=this._atlasCanvas},F$y.clear=function(){for(var F$J=0,F$y=this._inAtlasTextureKey.length;F$J<F$y;F$J++)this._inAtlasTextureKey[F$J].bitmap=this._inAtlasTextureBitmapValue[F$J],this._inAtlasTextureKey[F$J].uv=this._inAtlasTextureOriUVValue[F$J],this._inAtlasTextureKey[F$J]._atlasID=-1,this._inAtlasTextureKey[F$J].bitmap.lock=!1,this._inAtlasTextureKey[F$J].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},F$y.dispose=function(){this.clear(),this._atlasCanvas.destroy()},F$V(0,F$y,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),F$V(0,F$y,"texture",function(){return this._atlasCanvas}),F$V(0,F$y,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),F$m}(),F$tJ=function(F$J){function F$T(){F$T.__super.call(this,F$T.__name2int,F$T.__int2name,F$T.__int2nameMap)}return F$M(F$T,"laya.webgl.shader.d2.ShaderDefines2D",F$z),F$T.__init__=function(){F$T.reg("TEXTURE2D",1),F$T.reg("COLOR2D",2),F$T.reg("PRIMITIVE",4),F$T.reg("GLOW_FILTER",8),F$T.reg("BLUR_FILTER",16),F$T.reg("COLOR_FILTER",32),F$T.reg("COLOR_ADD",64),F$T.reg("WORLDMAT",128),F$T.reg("FILLTEXTURE",256),F$T.reg("FSHIGHPRECISION",1024),F$T.reg("TXTALPHA",2048),F$T.reg("TXTCOMPRESS",4096)},F$T.reg=function(F$J,F$y){F$z._reg(F$J,F$y,F$T.__name2int,F$T.__int2name)},F$T.toText=function(F$J,F$y,F$T){return F$z._toText(F$J,F$y,F$T)},F$T.toInt=function(F$J){return F$z._toInt(F$J,F$T.__name2int)},F$T.TEXTURE2D=1,F$T.COLOR2D=2,F$T.PRIMITIVE=4,F$T.FILTERGLOW=8,F$T.FILTERBLUR=16,F$T.FILTERCOLOR=32,F$T.COLORADD=64,F$T.WORLDMAT=128,F$T.FILLTEXTURE=256,F$T.SKINMESH=512,F$T.SHADERDEFINE_FSHIGHPRECISION=1024,F$T.TXTALPHA=2048,F$T.TXTCOMPRESS=4096,F$T.__name2int={},F$T.__int2name=[],F$T.__int2nameMap=[],F$T}(),F$vJ=(function(F$J){function F$n(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){F$n.__super.call(this,F$J,F$y,F$T,F$V,40,F$Z,F$m,F$R)}F$M(F$n,"laya.webgl.shapes.Ellipse",F$TJ)}(),function(F$J){function F$m(F$J,F$y,F$T,F$V,F$Z){this._points=[],this.rebuild(F$T),F$m.__super.call(this,F$J,F$y,0,0,0,F$Z,F$V,F$Z,0)}F$M(F$m,"laya.webgl.shapes.Line",F$TJ);var F$y=F$m.prototype;return F$y.rebuild=function(F$J){var F$y=F$J.length;F$y!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(F$y/2-1)),this.mFloat32Array=new Float32Array(5*F$y)),this._points.length=0;for(var F$T=NaN,F$V=NaN,F$Z=-1,F$m=-1,F$R=F$J.length/2,F$n=0;F$n<F$R;F$n++)F$T=F$J[2*F$n],F$V=F$J[2*F$n+1],(.01<Math.abs(F$Z-F$T)||.01<Math.abs(F$m-F$V))&&this._points.push(F$T,F$V),F$Z=F$T,F$m=F$V},F$y.getData=function(F$J,F$y,F$T){var F$V=[],F$Z=[];0<this.borderWidth&&this.createLine2(this._points,F$V,this.borderWidth,F$T,F$Z,this._points.length/2),this.mUint16Array.set(F$V,0),this.mFloat32Array.set(F$Z,0),F$J.append(this.mUint16Array),F$y.append(this.mFloat32Array)},F$m}()),F$QJ=function(F$J){function F$e(F$J,F$y,F$T,F$V,F$Z){this._points=[];for(var F$m=NaN,F$R=NaN,F$n=-1,F$K=-1,F$A=F$T.length/2-1,F$$=0;F$$<F$A;F$$++)F$m=F$T[2*F$$],F$R=F$T[2*F$$+1],(.01<Math.abs(F$n-F$m)||.01<Math.abs(F$K-F$R))&&this._points.push(F$m,F$R),F$n=F$m,F$K=F$R;F$m=F$T[2*F$A],F$R=F$T[2*F$A+1],F$n=this._points[0],F$K=this._points[1],(.01<Math.abs(F$n-F$m)||.01<Math.abs(F$K-F$R))&&this._points.push(F$m,F$R),F$e.__super.call(this,F$J,F$y,0,0,this._points.length/2,0,F$V,F$Z)}F$M(F$e,"laya.webgl.shapes.LoopLine",F$TJ);var F$y=F$e.prototype;return F$y.getData=function(F$J,F$y,F$T){if(0<this.borderWidth){for(var F$V=this.color,F$Z=(F$V>>16&255)/255,F$m=(F$V>>8&255)/255,F$R=(255&F$V)/255,F$n=[],F$K=0,F$A=0,F$$=[],F$e=Math.floor(this._points.length/2),F$M=0;F$M<F$e;F$M++)F$K=this._points[2*F$M],F$A=this._points[2*F$M+1],F$n.push(this.x+F$K,this.y+F$A,F$Z,F$m,F$R);this.createLoopLine(F$n,F$$,this.borderWidth,F$T+F$n.length/5),F$J.append(new Uint16Array(F$$)),F$y.append(new Float32Array(F$n))}},F$y.createLoopLine=function(F$J,F$y,F$T,F$V,F$Z,F$m){F$J.length;var F$R=F$J.concat(),F$n=F$Z||F$J,F$K=this.borderColor,F$A=(F$K>>16&255)/255,F$$=(F$K>>8&255)/255,F$e=(255&F$K)/255,F$M=[F$R[0],F$R[1]],F$G=[F$R[F$R.length-5],F$R[F$R.length-4]],F$B=F$G[0]+.5*(F$M[0]-F$G[0]),F$o=F$G[1]+.5*(F$M[1]-F$G[1]);F$R.unshift(F$B,F$o,0,0,0),F$R.push(F$B,F$o,0,0,0);var F$s,F$E,F$O,F$L,F$H,F$P,F$l,F$a,F$q,F$r,F$D,F$_,F$t,F$v,F$Q,F$i,F$c,F$u,F$x,F$k,F$X=F$R.length/5,F$S=F$V,F$f=F$T/2;F$O=F$R[0],F$L=F$R[1],F$r=F$O-(F$H=F$R[5]),F$q=(F$q=-(F$L-(F$P=F$R[6])))/(F$k=Math.sqrt(F$q*F$q+F$r*F$r))*F$f,F$r=F$r/F$k*F$f,F$n.push(F$O-F$q,F$L-F$r,F$A,F$$,F$e,F$O+F$q,F$L+F$r,F$A,F$$,F$e);for(var F$W=1;F$W<F$X-1;F$W++)F$O=F$R[5*(F$W-1)],F$L=F$R[5*(F$W-1)+1],F$H=F$R[5*F$W],F$P=F$R[5*F$W+1],F$l=F$R[5*(F$W+1)],F$a=F$R[5*(F$W+1)+1],F$r=F$O-F$H,F$_=F$H-F$l,F$Q=(-(F$q=(F$q=-(F$L-F$P))/(F$k=Math.sqrt(F$q*F$q+F$r*F$r))*F$f)+F$O)*(-(F$r=F$r/F$k*F$f)+F$P)-(-F$q+F$H)*(-F$r+F$L),F$u=(-(F$D=(F$D=-(F$P-F$a))/(F$k=Math.sqrt(F$D*F$D+F$_*F$_))*F$f)+F$l)*(-(F$_=F$_/F$k*F$f)+F$P)-(-F$D+F$H)*(-F$_+F$a),F$x=(F$t=-F$r+F$L-(-F$r+F$P))*(F$c=-F$D+F$H-(-F$D+F$l))-(F$i=-F$_+F$a-(-F$_+F$P))*(F$v=-F$q+F$H-(-F$q+F$O)),Math.abs(F$x)<.1?(F$x+=10.1,F$n.push(F$H-F$q,F$P-F$r,F$A,F$$,F$e,F$H+F$q,F$P+F$r,F$A,F$$,F$e)):(((F$s=(F$v*F$u-F$c*F$Q)/F$x)-F$H)*(F$s-F$H)+((F$E=(F$i*F$Q-F$t*F$u)/F$x)-F$P)+(F$E-F$P),F$n.push(F$s,F$E,F$A,F$$,F$e,F$H-(F$s-F$H),F$P-(F$E-F$P),F$A,F$$,F$e));F$m&&(F$y=F$m);var F$I=this.edges+1;for(F$W=1;F$W<F$I;F$W++)F$y.push(F$S+2*(F$W-1),F$S+2*(F$W-1)+1,F$S+2*F$W+1,F$S+2*F$W+1,F$S+2*F$W,F$S+2*(F$W-1));return F$y.push(F$S+2*(F$W-1),F$S+2*(F$W-1)+1,F$S+1,F$S+1,F$S,F$S+2*(F$W-1)),F$n},F$e}(),F$iJ=function(F$J){function F$R(F$J,F$y,F$T,F$V,F$Z,F$m){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=F$r.create(),this._points=F$T.slice(0,F$T.length),F$R.__super.call(this,F$J,F$y,0,0,this._points.length/2,F$V,F$Z,F$m)}F$M(F$R,"laya.webgl.shapes.Polygon",F$TJ);var F$y=F$R.prototype;return F$y.rebuild=function(F$J){this._repaint||(this._points.length=0,this._points=this._points.concat(F$J))},F$y.setMatrix=function(F$J){F$J.copyTo(this._mat)},F$y.needUpdate=function(F$J){return this._repaint=this._mat.a==F$J.a&&this._mat.b==F$J.b&&this._mat.c==F$J.c&&this._mat.d==F$J.d&&this._mat.tx==F$J.tx&&this._mat.ty==F$J.ty,!this._repaint},F$y.getData=function(F$J,F$y,F$T){var F$V,F$Z=0,F$m=this._points,F$R=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=F$T){for(this._start=F$T,F$V=[],F$R=this.earcutTriangles.length,F$Z=0;F$Z<F$R;F$Z++)F$V.push(this.earcutTriangles[F$Z]+F$T);this.mUint16Array=new Uint16Array(F$V)}}else{this._start=F$T,F$V=[];var F$n=[],F$K=[],F$A=this.color,F$$=(F$A>>16&255)/255,F$e=(F$A>>8&255)/255,F$M=(255&F$A)/255;for(F$R=Math.floor(F$m.length/2),F$Z=0;F$Z<F$R;F$Z++)F$n.push(this.x+F$m[2*F$Z],this.y+F$m[2*F$Z+1],F$$,F$e,F$M),F$K.push(this.x+F$m[2*F$Z],this.y+F$m[2*F$Z+1]);for(this.earcutTriangles=F$VJ.earcut(F$K,null,2),F$R=this.earcutTriangles.length,F$Z=0;F$Z<F$R;F$Z++)F$V.push(this.earcutTriangles[F$Z]+F$T);this.mUint16Array=new Uint16Array(F$V),this.mFloat32Array=new Float32Array(F$n)}F$J.append(this.mUint16Array),F$y.append(this.mFloat32Array)},F$R}(),F$cJ=function(F$J){function F$m(){this._matrix=new F$r,this._matrix4=F$oJ.defaultMatrix4.concat(),F$m.__super.call(this,1e4),this.shaderValue=new F$qJ(0,0)}F$M(F$m,"laya.webgl.submit.SubmitCanvas",F$mJ);var F$y=F$m.prototype;return F$y.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var F$J=F$OJ.worldAlpha,F$y=F$OJ.worldMatrix4,F$T=F$OJ.worldMatrix,F$V=F$OJ.worldFilters,F$Z=F$OJ.worldShaderDefines,F$m=this.shaderValue,F$R=this._matrix,F$n=this._matrix4,F$K=F$r.TEMP;return F$r.mul(F$R,F$T,F$K),F$n[0]=F$K.a,F$n[1]=F$K.b,F$n[4]=F$K.c,F$n[5]=F$K.d,F$n[12]=F$K.tx,F$n[13]=F$K.ty,F$OJ.worldMatrix=F$K.clone(),F$OJ.worldMatrix4=F$n,F$OJ.worldAlpha=F$OJ.worldAlpha*F$m.alpha,F$m.filters&&F$m.filters.length&&(F$OJ.worldFilters=F$m.filters,F$OJ.worldShaderDefines=F$m.defines),this._ctx_src.flush(),F$OJ.worldAlpha=F$J,F$OJ.worldMatrix4=F$y,F$OJ.worldMatrix.destroy(),F$OJ.worldMatrix=F$T,F$OJ.worldFilters=F$V,F$OJ.worldShaderDefines=F$Z,1},F$y.releaseRender=function(){var F$J=F$m._cache;this._ctx_src=null,F$J[F$J._length++]=this},F$y.getRenderType=function(){return 10003},F$m.create=function(F$J,F$y,F$T){var F$V=F$m._cache._length?F$m._cache[--F$m._cache._length]:new F$m;F$V._ctx_src=F$J;var F$Z=F$V.shaderValue;return F$Z.alpha=F$y,F$Z.defines.setValue(0),F$T&&F$T.length&&F$Z.setFilters(F$T),F$V},F$m._cache=((F$m._cache=[])._length=0,F$m._cache),F$m}(),F$uJ=function(F$J){function F$A(F$J){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===F$J&&(F$J=1e4),F$A.__super.call(this,F$J)}F$M(F$A,"laya.webgl.submit.SubmitTexture",F$mJ);var F$y=F$A.prototype;return F$y.releaseRender=function(){var F$J=F$A._cache;(F$J[F$J._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},F$y.addTexture=function(F$J,F$y){this._texsID[this._texs.length]=F$J._uvID,this._texs.push(F$J),this._vbPos.push(F$y)},F$y.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var F$J=this.shaderValue.textureHost.bitmap;if(null!==F$J)for(var F$y=this._vb.getFloat32Array(),F$T=0,F$V=this._texs.length;F$T<F$V;F$T++){var F$Z=this._texs[F$T];F$Z.active();var F$m=F$Z.uv;if(this._texsID[F$T]!==F$Z._uvID){this._texsID[F$T]=F$Z._uvID;var F$R=this._vbPos[F$T];F$y[F$R+2]=F$m[0],F$y[F$R+3]=F$m[1],F$y[F$R+6]=F$m[2],F$y[F$R+7]=F$m[3],F$y[F$R+10]=F$m[4],F$y[F$R+11]=F$m[5],F$y[F$R+14]=F$m[6],F$y[F$R+15]=F$m[7],this._vb.setNeedUpload()}F$Z.bitmap!==F$J&&(this._isSameTexture=!1)}}},F$y.renderSubmit=function(){if(0===this._numEle)return F$A._shaderSet=!1,1;var F$J=this.shaderValue.textureHost;if(F$J){var F$y=F$J.source;if(!F$J.bitmap||!F$y)return F$A._shaderSet=!1,1;this.shaderValue.texture=F$y,F$J.alphaTexture&&F$J.alphaTexture.source&&(this.shaderValue.texture1=F$J.alphaTexture.source)}this._vb.bind_upload(this._ib);var F$T=F$HJ.mainContext;if(F$U.activeBlendFunction!==this._blendFn&&(F$T.enable(3042),this._blendFn(F$T),F$U.activeBlendFunction=this._blendFn),F$Q.drawCall++,F$Q.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&F$kJ.activeShader&&F$A._shaderSet?(F$kJ.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&F$kJ.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),F$A._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var F$V=F$J.bitmap,F$Z=0,F$m=F$kJ.activeShader,F$R=0,F$n=this._texs.length;F$R<F$n;F$R++){var F$K=this._texs[F$R];F$K.bitmap===F$V&&F$R+1!==F$n||(F$m.uploadTexture2D(F$K.source),F$T.drawElements(4,6*(F$R-F$Z+1),5123,this._startIdx+6*F$Z*F$oJ.BYTES_PIDX),F$V=F$K.bitmap,F$Z=F$R)}else F$T.drawElements(4,this._numEle,5123,this._startIdx);return 1},F$A.create=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$A._cache._length?F$A._cache[--F$A._cache._length]:new F$A;null==F$T&&((F$T=F$m._selfVb||(F$m._selfVb=F$zJ.create(-1))).clear(),F$V=0),F$m._ib=F$y,F$m._vb=F$T,F$m._startIdx=F$V*F$oJ.BYTES_PIDX,F$m._numEle=0;var F$R=F$J._nBlendType;F$m._blendFn=F$J._targets?F$U.targetFns[F$R]:F$U.fns[F$R],F$m.shaderValue=F$Z,F$m.shaderValue.setValue(F$J._shader2D);var F$n=F$J._shader2D.filters;return F$n&&F$m.shaderValue.setFilters(F$n),F$m},F$A._cache=((F$A._cache=[])._length=0,F$A._cache),F$A._shaderSet=!0,F$A}(),F$xJ=function(F$J){function F$E(){F$E.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}F$M(F$E,"laya.webgl.utils.MeshTexture",F$EJ);var F$y=F$E.prototype;return F$y.addData=function(F$J,F$y,F$T,F$V,F$Z,F$m){for(var F$R=F$J.length/2,F$n=this._vb.needSize(F$R*F$E.const_stride)>>2,F$K=this._vb.getFloat32Array(),F$A=0,F$$=0;F$$<F$R;F$$++){var F$e=F$J[F$A],F$M=F$J[F$A+1],F$G=F$e*F$V.a+F$M*F$V.c+F$V.tx,F$B=F$e*F$V.b+F$M*F$V.d+F$V.ty;F$K[F$n++]=F$G,F$K[F$n++]=F$B,F$K[F$n++]=F$y[F$A],F$K[F$n++]=F$y[F$A+1],F$A+=2}this._vb.setNeedUpload();var F$o=this.vertNum;if(0<F$o){(F$R=F$T.length)>F$E.tmpIdx.length&&(F$E.tmpIdx=new Uint16Array(F$R));for(var F$s=0;F$s<F$R;F$s++)F$E.tmpIdx[F$s]=F$T[F$s]+F$o;this._ib.appendU16Array(F$E.tmpIdx,F$T.length)}else this._ib.append(F$T);this._ib.setNeedUpload(),this.vertNum+=F$R,this.indexNum+=F$T.length},F$y.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},F$y.destroy=function(){this._ib.destroy(),this._vb.destroy()},F$E.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new F$E},F$E.const_stride=16,F$E._POOL=[],F$R(F$E,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),F$E}(),F$kJ=function(F$J){function F$y(){F$y.__super.call(this),this.lock=!0}return F$M(F$y,"laya.webgl.shader.BaseShader",F$L),F$y.activeShader=null,F$y.bindShader=null,F$y}(),F$XJ=function(F$y){function F$$(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===F$T&&(F$T=6408),void 0===F$V&&(F$V=5121),void 0===F$Z&&(F$Z=34041),void 0===F$m&&(F$m=!1),void 0===F$R&&(F$R=!1),void 0===F$n&&(F$n=-1),void 0===F$K&&(F$K=-1),this._type=1,this._w=F$J,this._h=F$y,this._surfaceFormat=F$T,this._surfaceType=F$V,this._depthStencilFormat=F$Z,F$E.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=F$m,this._repeat=F$R,this._minFifter=F$n,this._magFifter=F$K,this._createWebGLRenderTarget(),this.bitmap.lock=!0,F$$.__super.call(this,this.bitmap,F$x.INV_UV)}F$M(F$$,"laya.webgl.resource.RenderTarget2D",F$y);var F$J=F$$.prototype;return F$l.imps(F$J,{"laya.resource.IDispose":!0}),F$J.getType=function(){return this._type},F$J.getTexture=function(){return this},F$J.size=function(F$J,F$y){this._w==F$J&&this._h==F$y||(this._w=F$J,this._h=F$y,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},F$J.release=function(){this.destroy()},F$J.recycle=function(){F$$.POOL.push(this)},F$J.start=function(){var F$J=F$HJ.mainContext;return this._preRenderTarget=F$OJ.curRenderTarget,F$OJ.curRenderTarget=this,F$J.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(F$J.viewport(0,0,this._w,this._h),this._svWidth=F$OJ.width,this._svHeight=F$OJ.height,F$OJ.width=this._w,F$OJ.height=this._h,F$kJ.activeShader=null),this},F$J.clear=function(F$J,F$y,F$T,F$V){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=1);var F$Z=F$HJ.mainContext;F$Z.clearColor(F$J,F$y,F$T,F$V);var F$m=16384;switch(this._depthStencilFormat){case 33189:F$m|=256;break;case 36168:F$m|=1024;break;case 34041:F$m|=256,F$m|=1024}F$Z.clear(F$m)},F$J.end=function(){var F$J=F$HJ.mainContext;F$J.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,F$OJ.curRenderTarget=this._preRenderTarget,1==this._type?(F$J.viewport(0,0,this._svWidth,this._svHeight),F$OJ.width=this._svWidth,F$OJ.height=this._svHeight,F$kJ.activeShader=null):F$J.viewport(0,0,F$l.stage.width,F$l.stage.height)},F$J.getData=function(F$J,F$y,F$T,F$V){var F$Z=F$HJ.mainContext;if(F$Z.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===F$Z.checkFramebufferStatus(36160)))return F$Z.bindFramebuffer(36160,null),null;var F$m=new Uint8Array(this._w*this._h*4);return F$Z.readPixels(F$J,F$y,F$T,F$V,this._surfaceFormat,this._surfaceType,F$m),F$Z.bindFramebuffer(36160,null),F$m},F$J.destroy=function(F$J){void 0===F$J&&(F$J=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,F$y.prototype.destroy.call(this))},F$J.dispose=function(){},F$J._createWebGLRenderTarget=function(){this.bitmap=new F$bJ(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(F$J){this.event("recovered")})},F$V(0,F$J,"surfaceFormat",function(){return this._surfaceFormat}),F$V(0,F$J,"magFifter",function(){return this._magFifter}),F$V(0,F$J,"surfaceType",function(){return this._surfaceType}),F$V(0,F$J,"mipMap",function(){return this._mipMap}),F$V(0,F$J,"depthStencilFormat",function(){return this._depthStencilFormat}),F$V(0,F$J,"minFifter",function(){return this._minFifter}),F$V(0,F$J,"source",function(){return this._alreadyResolved?F$l.superGet(F$x,this,"source"):null}),F$$.create=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){void 0===F$T&&(F$T=6408),void 0===F$V&&(F$V=5121),void 0===F$Z&&(F$Z=34041),void 0===F$m&&(F$m=!1),void 0===F$R&&(F$R=!1),void 0===F$n&&(F$n=-1),void 0===F$K&&(F$K=-1);var F$A=F$$.POOL.pop();return F$A||(F$A=new F$$(F$J,F$y)),F$A.bitmap&&F$A._w==F$J&&F$A._h==F$y&&F$A._surfaceFormat==F$T&&F$A._surfaceType==F$V&&F$A._depthStencilFormat==F$Z&&F$A._mipMap==F$m&&F$A._repeat==F$R&&F$A._minFifter==F$n&&F$A._magFifter==F$K||(F$A._w=F$J,F$A._h=F$y,F$A._surfaceFormat=F$T,F$A._surfaceType=F$V,F$A._depthStencilFormat=F$Z,F$E.isConchWebGL&&34041===F$A._depthStencilFormat&&(F$A._depthStencilFormat=33189),F$A._mipMap=F$m,F$A._repeat=F$R,F$A._minFifter=F$n,F$A._magFifter=F$K,F$A.release(),F$A._createWebGLRenderTarget()),F$A},F$$.TYPE2D=1,F$$.TYPE3D=2,F$$.POOL=[],F$$}(F$x),F$SJ=function(F$J){function F$y(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,F$y.__super.call(this),F$y._gl=F$HJ.mainContext}F$M(F$y,"laya.webgl.utils.Buffer",F$L);var F$T=F$y.prototype;return F$T._bind=function(){this.activeResource(),F$y._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(F$y._bindVertexBuffer=this._glBuffer),F$y._gl.bindBuffer(this._bufferType,F$y._bindActive[this._bufferType]=this._glBuffer),F$kJ.activeShader=null)},F$T.recreateResource=function(){this._glBuffer||(this._glBuffer=F$y._gl.createBuffer()),this.completeCreate()},F$T.disposeResource=function(){this._glBuffer&&(F$HJ.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},F$V(0,F$T,"bufferUsage",function(){return this._bufferUsage}),F$y._gl=null,F$y._bindActive={},F$y._bindVertexBuffer=null,F$y._enableAtributes=[],F$y}(),F$fJ=function(F$J){function F$T(F$J){this.texcoord=null,this.offsetX=300,this.offsetY=0,F$T.__super.call(this,512,0);var F$y=8*F$oJ.BYTES_PE;this.position=[2,5126,!1,F$y,0],this.texcoord=[2,5126,!1,F$y,2*F$oJ.BYTES_PE],this.color=[4,5126,!1,F$y,4*F$oJ.BYTES_PE]}return F$M(F$T,"laya.webgl.shader.d2.skinAnishader.SkinSV",F$qJ),F$T}(),F$WJ=function(F$J){function F$y(F$J){F$y.__super.call(this,2,0),this.color=[]}return F$M(F$y,"laya.webgl.shader.d2.value.Color2dSV",F$qJ),F$y.prototype.setValue=function(F$J){F$J.fillStyle&&(this.color=F$J.fillStyle._color._color),F$J.strokeStyle&&(this.color=F$J.strokeStyle._color._color)},F$y}(),F$IJ=function(F$J){function F$y(F$J){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=F$qJ._TEXCOORD,F$y.__super.call(this,256,0)}F$M(F$y,"laya.webgl.shader.d2.value.FillTextureSV",F$qJ);var F$T=F$y.prototype;return F$T.setValue=function(F$J){this.ALPHA=F$J.ALPHA,F$J.filters&&this.setFilters(F$J.filters)},F$T.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},F$y}(),F$YJ=function(F$J){function F$y(F$J){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=F$qJ._TEXCOORD,void 0===F$J&&(F$J=0),F$y.__super.call(this,1,F$J)}F$M(F$y,"laya.webgl.shader.d2.value.TextureSV",F$qJ);var F$T=F$y.prototype;return F$T.setValue=function(F$J){this.ALPHA=F$J.ALPHA,F$J.filters&&this.setFilters(F$J.filters)},F$T.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},F$y}(),F$UJ=function(F$J){function F$y(F$J){this.a_color=null,this.u_pos=[0,0],F$y.__super.call(this,4,0),this.position=[2,5126,!1,5*F$oJ.BYTES_PE,0],this.a_color=[3,5126,!1,5*F$oJ.BYTES_PE,2*F$oJ.BYTES_PE]}return F$M(F$y,"laya.webgl.shader.d2.value.PrimitiveSV",F$qJ),F$y}(),F$dJ=function(F$J){function F$y(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,F$y.__super.call(this)}F$M(F$y,"laya.webgl.atlas.AtlasWebGLCanvas",F$J);var F$T=F$y.prototype;return F$T.recreateResource=function(){var F$J=F$HJ.mainContext,F$y=this._source=F$J.createTexture(),F$T=F$PJ.curBindTexTarget,F$V=F$PJ.curBindTexValue;F$PJ.bindTexture(F$J,3553,F$y),F$J.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),F$J.texParameteri(3553,10241,9729),F$J.texParameteri(3553,10240,9729),F$J.texParameteri(3553,10242,33071),F$J.texParameteri(3553,10243,33071),F$T&&F$V&&F$PJ.bindTexture(F$J,F$T,F$V),this.memorySize=this._w*this._h*4,this.completeCreate()},F$T.disposeResource=function(){this._source&&(F$HJ.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$T.texSubImage2D=function(F$J,F$y,F$T){if(F$E.isFlash){this._flashCacheImage||(this._flashCacheImage=F$o.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var F$V=F$T.bitmapdata;this._flashCacheImage._image.copyPixels(F$V,0,0,F$V.width,F$V.height,F$J,F$y),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var F$Z=F$HJ.mainContext,F$m=F$PJ.curBindTexTarget,F$R=F$PJ.curBindTexValue;F$PJ.bindTexture(F$Z,3553,this._source),F$Z.pixelStorei(37441,!0),0<=F$J-1&&F$Z.texSubImage2D(3553,0,F$J-1,F$y,6408,5121,F$T),F$J+1<=this._w&&F$Z.texSubImage2D(3553,0,F$J+1,F$y,6408,5121,F$T),0<=F$y-1&&F$Z.texSubImage2D(3553,0,F$J,F$y-1,6408,5121,F$T),F$y+1<=this._h&&F$Z.texSubImage2D(3553,0,F$J,F$y+1,6408,5121,F$T),F$Z.texSubImage2D(3553,0,F$J,F$y,6408,5121,F$T),F$Z.pixelStorei(37441,!1),F$m&&F$R&&F$PJ.bindTexture(F$Z,F$m,F$R)}},F$T.texSubImage2DPixel=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$HJ.mainContext,F$R=F$PJ.curBindTexTarget,F$n=F$PJ.curBindTexValue;F$PJ.bindTexture(F$m,3553,this._source);var F$K=new Uint8Array(F$Z.data);F$m.pixelStorei(37441,!0),F$m.texSubImage2D(3553,0,F$J,F$y,F$T,F$V,6408,5121,F$K),F$m.pixelStorei(37441,!1),F$R&&F$n&&F$PJ.bindTexture(F$m,F$R,F$n)},F$V(0,F$T,"width",F$J.prototype._$get_width,function(F$J){this._w=F$J}),F$V(0,F$T,"height",F$J.prototype._$get_height,function(F$J){this._h=F$J}),F$y}(F$T),F$CJ=function(F$J){function F$Z(){this.flipY=!0,this.alwaysChange=!1,F$Z.__super.call(this)}F$M(F$Z,"laya.webgl.resource.WebGLCanvas",F$T);var F$y=F$Z.prototype;return F$y.getCanvas=function(){return this._canvas},F$y.clear=function(){this._ctx&&this._ctx.clear()},F$y.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},F$y._setContext=function(F$J){this._ctx=F$J},F$y.getContext=function(F$J,F$y){return this._ctx?this._ctx:this._ctx=F$Z._createContext(this)},F$y.size=function(F$J,F$y){this._w==F$J&&this._h==F$y||(this._w=F$J,this._h=F$y,this._ctx&&this._ctx.size(F$J,F$y),this._canvas&&(this._canvas.height=F$y,this._canvas.width=F$J))},F$y.activeResource=function(F$J){void 0===F$J&&(F$J=!1),this._source||this.recreateResource()},F$y.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},F$y.disposeResource=function(){this._source&&!this.iscpuSource&&(F$HJ.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$y.createWebGlTexture=function(){var F$J=F$HJ.mainContext;this._canvas;var F$y=this._source=F$J.createTexture();this.iscpuSource=!1;var F$T=F$PJ.curBindTexTarget,F$V=F$PJ.curBindTexValue;F$PJ.bindTexture(F$J,3553,F$y),F$J.pixelStorei(37440,this.flipY?1:0),F$Z.premulAlpha&&F$J.pixelStorei(37441,!0),F$J.texImage2D(3553,0,6408,6408,5121,this._imgData),F$Z.premulAlpha&&F$J.pixelStorei(37441,!1),F$J.texParameteri(3553,10240,9729),F$J.texParameteri(3553,10241,9729),F$J.texParameteri(3553,10242,33071),F$J.texParameteri(3553,10243,33071),F$J.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,F$T&&F$V&&F$PJ.bindTexture(F$J,F$T,F$V)},F$y.reloadCanvasData=function(){var F$J=F$HJ.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var F$y=F$PJ.curBindTexTarget,F$T=F$PJ.curBindTexValue;F$PJ.bindTexture(F$J,3553,this._source),F$Z.premulAlpha&&F$J.pixelStorei(37441,!0),F$J.texImage2D(3553,0,6408,6408,5121,this._imgData),F$Z.premulAlpha&&F$J.pixelStorei(37441,!1),F$J.pixelStorei(37440,0),F$y&&F$T&&F$PJ.bindTexture(F$J,F$y,F$T)},F$y.texSubImage2D=function(F$J,F$y,F$T){var F$V=F$HJ.mainContext,F$Z=F$PJ.curBindTexTarget,F$m=F$PJ.curBindTexValue;F$PJ.bindTexture(F$V,3553,this._source),F$V.pixelStorei(37441,!0),F$V.texSubImage2D(3553,0,F$y,F$T,6408,5121,F$J._source),F$V.pixelStorei(37441,!1),F$Z&&F$m&&F$PJ.bindTexture(F$V,F$Z,F$m)},F$y.toBase64=function(F$J,F$y,F$T){var F$V=null;this._canvas&&(F$V=this._canvas.toDataURL(F$J,F$y)),F$T.call(this,F$V)},F$V(0,F$y,"context",function(){return this._ctx}),F$V(0,F$y,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),F$V(0,F$y,"asBitmap",null,function(F$J){this._ctx&&(this._ctx.asBitmap=F$J)}),F$Z._createContext=null,F$Z.premulAlpha=!1,F$Z}(),F$FJ=function(F$J){function F$m(F$J,F$y){this.CborderSize=12,F$m.__super.call(this),this.char=F$J,this.isSpace=" "===F$J,this.xs=F$y.scaleX,this.ys=F$y.scaleY,this.font=F$y.font.toString(),this.fontSize=F$y.font.size,this.fillColor=F$y.fillColor,this.borderColor=F$y.borderColor,this.lineWidth=F$y.lineWidth,this.underLine=F$y.underLine;var F$T,F$V=F$E.isConchApp;F$V?((F$T=ConchTextCanvas)._source=ConchTextCanvas,F$T._source.canvas=ConchTextCanvas):F$T=F$G.canvas.source,this.canvas=F$T,this._enableMerageInAtlas=!0,this._ctx=F$V?F$T:this.canvas.getContext("2d",void 0);var F$Z=F$k.measureText(this.char,this.font);this.cw=F$Z.width*this.xs,this.ch=(F$Z.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new F$x(this)}F$M(F$m,"laya.webgl.resource.WebGLCharImage",F$T);var F$y=F$m.prototype;return F$l.imps(F$y,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$y.active=function(){this.texture.active()},F$y.recreateResource=function(){var F$J=F$E.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),F$J){var F$y=this.fontSize;1==this.xs&&1==this.ys||(F$y=parseInt(F$y*(this.xs>this.ys?this.xs:this.ys)+""));var F$T="normal 100 "+this.font;F$T=F$T.replace(F$m._fontSizeReg,F$y),this.borderColor&&(F$T+=" 1 "+this.borderColor),this._ctx.font=F$T,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,F$u.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var F$V=this._ctx.measureText(this.char);F$V||(F$V={width:16});var F$Z=F$V.width+1;this._ctx.lineTo(F$Z,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},F$y.onresize=function(F$J,F$y){this._w=F$J,this._h=F$y,this._allowMerageInAtlas=!0},F$y.clearAtlasSource=function(){},F$V(0,F$y,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$V(0,F$y,"atlasSource",function(){return this.canvas}),F$V(0,F$y,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(F$J){this._enableMerageInAtlas=F$J}),F$m.createOneChar=function(F$J,F$y){return new F$m(F$J,F$y)},F$m._fontSizeReg=new RegExp("\\d+(?=px)","g"),F$m}(),F$bJ=function(F$J){function F$A(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){void 0===F$T&&(F$T=6408),void 0===F$V&&(F$V=5121),void 0===F$Z&&(F$Z=34041),void 0===F$m&&(F$m=!1),void 0===F$R&&(F$R=!1),void 0===F$n&&(F$n=-1),void 0===F$K&&(F$K=1),F$A.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=F$J,this._h=F$y,this._surfaceFormat=F$T,this._surfaceType=F$V,this._depthStencilFormat=F$Z,this._mipMap=F$m,this._repeat=F$R,this._minFifter=F$n,this._magFifter=F$K}F$M(F$A,"laya.webgl.resource.WebGLRenderTarget",F$T);var F$y=F$A.prototype;return F$y.recreateResource=function(){var F$J=F$HJ.mainContext;this._frameBuffer||(this._frameBuffer=F$J.createFramebuffer()),this._source||(this._source=F$J.createTexture());var F$y=F$PJ.curBindTexTarget,F$T=F$PJ.curBindTexValue;F$PJ.bindTexture(F$J,3553,this._source),F$J.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var F$V=this._minFifter,F$Z=this._magFifter,F$m=this._repeat?10497:33071,F$R=F$$.isPOT(this._w,this._h);if(F$R?(this._mipMap?-1!==F$V||(F$V=9987):-1!==F$V||(F$V=9729),-1!==F$Z||(F$Z=9729),F$J.texParameteri(3553,10241,F$V),F$J.texParameteri(3553,10240,F$Z),F$J.texParameteri(3553,10242,F$m),F$J.texParameteri(3553,10243,F$m),this._mipMap&&F$J.generateMipmap(3553)):(-1!==F$V||(F$V=9729),-1!==F$Z||(F$Z=9729),F$J.texParameteri(3553,10241,F$V),F$J.texParameteri(3553,10240,F$Z),F$J.texParameteri(3553,10242,33071),F$J.texParameteri(3553,10243,33071)),F$J.bindFramebuffer(36160,this._frameBuffer),F$J.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=F$J.createRenderbuffer()),F$J.bindRenderbuffer(36161,this._depthStencilBuffer),F$J.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:F$J.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:F$J.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:F$J.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}F$J.bindFramebuffer(36160,null),F$y&&F$T&&F$PJ.bindTexture(F$J,F$y,F$T),F$J.bindRenderbuffer(36161,null),F$R&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},F$y.disposeResource=function(){this._frameBuffer&&(F$HJ.mainContext.deleteTexture(this._source),F$HJ.mainContext.deleteFramebuffer(this._frameBuffer),F$HJ.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},F$V(0,F$y,"depthStencilBuffer",function(){return this._depthStencilBuffer}),F$V(0,F$y,"frameBuffer",function(){return this._frameBuffer}),F$A}(),F$hJ=function(F$J){function F$n(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this.offsetX=0,this.offsetY=0,F$n.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=F$m,this.canvas=F$J,this._ctx=F$J.getContext("2d",void 0),this._w=F$V,this._h=F$Z,this.offsetX=F$y,this.offsetY=F$T,this.src=F$R,this._enableMerageInAtlas=!0,F$I.enabled&&this._w<F$I.atlasLimitWidth&&this._h<F$I.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}F$M(F$n,"laya.webgl.resource.WebGLSubImage",F$T);var F$y=F$n.prototype;return F$l.imps(F$y,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$y.size=function(F$J,F$y){this._w=F$J,this._h=F$y,this._ctx&&this._ctx.size(F$J,F$y),this.canvas&&(this.canvas.height=F$y,this.canvas.width=F$J)},F$y.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},F$y.createWebGlTexture=function(){var F$J=F$HJ.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var F$y=this._source=F$J.createTexture(),F$T=F$PJ.curBindTexTarget,F$V=F$PJ.curBindTexValue;F$PJ.bindTexture(F$J,3553,F$y),F$J.pixelStorei(37441,!0),F$J.texImage2D(3553,0,6408,6408,5121,this.canvas),F$J.pixelStorei(37441,!1);var F$Z=this.minFifter,F$m=this.magFifter,F$R=this.repeat?10497:33071,F$n=F$$.isPOT(this.width,this.height);F$n?(this.mipmap?-1!==F$Z||(F$Z=9987):-1!==F$Z||(F$Z=9729),-1!==F$m||(F$m=9729),F$J.texParameteri(3553,10240,F$m),F$J.texParameteri(3553,10241,F$Z),F$J.texParameteri(3553,10242,F$R),F$J.texParameteri(3553,10243,F$R),this.mipmap&&F$J.generateMipmap(3553)):(-1!==F$Z||(F$Z=9729),-1!==F$m||(F$m=9729),F$J.texParameteri(3553,10241,F$Z),F$J.texParameteri(3553,10240,F$m),F$J.texParameteri(3553,10242,33071),F$J.texParameteri(3553,10243,33071)),F$T&&F$V&&F$PJ.bindTexture(F$J,F$T,F$V),this.canvas=null,F$n&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},F$y.disposeResource=function(){F$I.enabled&&this._allowMerageInAtlas||!this._source||(F$HJ.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$y.clearAtlasSource=function(){},F$V(0,F$y,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$V(0,F$y,"atlasSource",function(){return this.canvas}),F$V(0,F$y,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(F$J){this._allowMerageInAtlas=F$J}),F$n}(),F$pJ=function(F$J){function F$A(F$J,F$y,F$T,F$V){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,F$A.__super.call(this),!F$J||!F$y)throw"Shader Error";this._id=++F$A._count,this._vs=F$J,this._ps=F$y,this._nameMap=F$V||{},null!=F$T&&(F$A.sharders[F$T]=this)}F$M(F$A,"laya.webgl.shader.Shader",F$kJ);var F$y=F$A.prototype;return F$y.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},F$y.disposeResource=function(){F$HJ.mainContext.deleteShader(this._vshader),F$HJ.mainContext.deleteShader(this._pshader),F$HJ.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},F$y._compile=function(){if(!F$HJ.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var F$J=[this._vs,this._ps],F$y=F$HJ.mainContext;if(this._program=F$y.createProgram(),this._vshader=F$A._createShader(F$y,F$J[0],35633),this._pshader=F$A._createShader(F$y,F$J[1],35632),F$y.attachShader(this._program,this._vshader),F$y.attachShader(this._program,this._pshader),F$y.linkProgram(this._program),!F$E.isConchApp&&!F$y.getProgramParameter(this._program,35714))throw F$y.getProgramInfoLog(this._program);var F$T,F$V,F$Z=0,F$m=0;for(F$m=F$E.isConchApp?F$y.getProgramParameterEx(this._vs,this._ps,"",35721):F$y.getProgramParameter(this._program,35721),F$Z=0;F$Z<F$m;F$Z++){var F$R=null;F$T={vartype:"attribute",glfun:null,ivartype:0,attrib:F$R=F$E.isConchApp?F$y.getActiveAttribEx(this._vs,this._ps,"",F$Z):F$y.getActiveAttrib(this._program,F$Z),location:F$y.getAttribLocation(this._program,F$R.name),name:F$R.name,type:F$R.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(F$T)}var F$n=0;for(F$n=F$E.isConchApp?F$y.getProgramParameterEx(this._vs,this._ps,"",35718):F$y.getProgramParameter(this._program,35718),F$Z=0;F$Z<F$n;F$Z++){var F$K=null;F$K=F$E.isConchApp?F$y.getActiveUniformEx(this._vs,this._ps,"",F$Z):F$y.getActiveUniform(this._program,F$Z),0<(F$T={vartype:"uniform",glfun:null,ivartype:1,attrib:F$R,location:F$y.getUniformLocation(this._program,F$K.name),name:F$K.name,type:F$K.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(F$T.name=F$T.name.substr(0,F$T.name.length-3),F$T.isArray=!0,F$T.location=F$y.getUniformLocation(this._program,F$T.name)),this._params.push(F$T)}for(F$Z=0,F$V=this._params.length;F$Z<F$V;F$Z++)if((F$T=this._params[F$Z]).indexOfParams=F$Z,F$T.index=1,F$T.value=[F$T.location,null],F$T.codename=F$T.name,F$T.name=this._nameMap[F$T.codename]?this._nameMap[F$T.codename]:F$T.codename,(this._paramsMap[F$T.name]=F$T)._this=this,F$T.uploadedValue=[],"attribute"!==F$T.vartype)switch(F$T.type){case 5124:F$T.fun=F$T.isArray?this._uniform1iv:this._uniform1i;break;case 5126:F$T.fun=F$T.isArray?this._uniform1fv:this._uniform1f;break;case 35664:F$T.fun=F$T.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:F$T.fun=F$T.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:F$T.fun=F$T.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:F$T.fun=this._uniform_sampler2D;break;case 35680:F$T.fun=this._uniform_samplerCube;break;case 35676:F$T.glfun=F$y.uniformMatrix4fv,F$T.fun=this._uniformMatrix4fv;break;case 35670:F$T.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else F$T.fun=this._attribute}},F$y.getUniform=function(F$J){return this._paramsMap[F$J]},F$y._attribute=function(F$J,F$y){var F$T=F$HJ.mainContext,F$V=F$SJ._enableAtributes,F$Z=F$J.location;return F$V[F$Z]||F$T.enableVertexAttribArray(F$Z),F$T.vertexAttribPointer(F$Z,F$y[0],F$y[1],F$y[2],F$y[3],F$y[4]+this._offset),F$V[F$Z]=F$SJ._bindVertexBuffer,1},F$y._uniform1f=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y?(F$HJ.mainContext.uniform1f(F$J.location,F$T[0]=F$y),1):0},F$y._uniform1fv=function(F$J,F$y){if(F$y.length<4){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]||F$T[3]!==F$y[3]?(F$HJ.mainContext.uniform1fv(F$J.location,F$y),F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2],F$T[3]=F$y[3],1):0}return F$HJ.mainContext.uniform1fv(F$J.location,F$y),1},F$y._uniform_vec2=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]?(F$HJ.mainContext.uniform2f(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1]),1):0},F$y._uniform_vec2v=function(F$J,F$y){if(F$y.length<2){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]||F$T[3]!==F$y[3]?(F$HJ.mainContext.uniform2fv(F$J.location,F$y),F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2],F$T[3]=F$y[3],1):0}return F$HJ.mainContext.uniform2fv(F$J.location,F$y),1},F$y._uniform_vec3=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]?(F$HJ.mainContext.uniform3f(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2]),1):0},F$y._uniform_vec3v=function(F$J,F$y){return F$HJ.mainContext.uniform3fv(F$J.location,F$y),1},F$y._uniform_vec4=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]||F$T[3]!==F$y[3]?(F$HJ.mainContext.uniform4f(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2],F$T[3]=F$y[3]),1):0},F$y._uniform_vec4v=function(F$J,F$y){return F$HJ.mainContext.uniform4fv(F$J.location,F$y),1},F$y._uniformMatrix2fv=function(F$J,F$y){return F$HJ.mainContext.uniformMatrix2fv(F$J.location,!1,F$y),1},F$y._uniformMatrix3fv=function(F$J,F$y){return F$HJ.mainContext.uniformMatrix3fv(F$J.location,!1,F$y),1},F$y._uniformMatrix4fv=function(F$J,F$y){return F$HJ.mainContext.uniformMatrix4fv(F$J.location,!1,F$y),1},F$y._uniform1i=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y?(F$HJ.mainContext.uniform1i(F$J.location,F$T[0]=F$y),1):0},F$y._uniform1iv=function(F$J,F$y){return F$HJ.mainContext.uniform1iv(F$J.location,F$y),1},F$y._uniform_ivec2=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]?(F$HJ.mainContext.uniform2i(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1]),1):0},F$y._uniform_ivec2v=function(F$J,F$y){return F$HJ.mainContext.uniform2iv(F$J.location,F$y),1},F$y._uniform_vec3i=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]?(F$HJ.mainContext.uniform3i(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2]),1):0},F$y._uniform_vec3vi=function(F$J,F$y){return F$HJ.mainContext.uniform3iv(F$J.location,F$y),1},F$y._uniform_vec4i=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]||F$T[3]!==F$y[3]?(F$HJ.mainContext.uniform4i(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2],F$T[3]=F$y[3]),1):0},F$y._uniform_vec4vi=function(F$J,F$y){return F$HJ.mainContext.uniform4iv(F$J.location,F$y),1},F$y._uniform_sampler2D=function(F$J,F$y){var F$T=F$HJ.mainContext,F$V=F$J.uploadedValue;return null==F$V[0]?(F$V[0]=this._curActTexIndex,F$T.uniform1i(F$J.location,this._curActTexIndex),F$T.activeTexture(F$A._TEXTURES[this._curActTexIndex]),F$PJ.bindTexture(F$T,3553,F$y),this._curActTexIndex++,1):(F$T.activeTexture(F$A._TEXTURES[F$V[0]]),F$PJ.bindTexture(F$T,3553,F$y),0)},F$y._uniform_samplerCube=function(F$J,F$y){var F$T=F$HJ.mainContext,F$V=F$J.uploadedValue;return null==F$V[0]?(F$V[0]=this._curActTexIndex,F$T.uniform1i(F$J.location,this._curActTexIndex),F$T.activeTexture(F$A._TEXTURES[this._curActTexIndex]),F$PJ.bindTexture(F$T,34067,F$y),this._curActTexIndex++,1):(F$T.activeTexture(F$A._TEXTURES[F$V[0]]),F$PJ.bindTexture(F$T,34067,F$y),0)},F$y._noSetValue=function(F$J){console.log("no....:"+F$J.name)},F$y.uploadOne=function(F$J,F$y){this.activeResource(),F$PJ.UseProgram(this._program);var F$T=this._paramsMap[F$J];F$T.fun.call(this,F$T,F$y)},F$y.uploadTexture2D=function(F$J){F$Q.shaderCall++;var F$y=F$HJ.mainContext;F$y.activeTexture(33984),F$PJ.bindTexture(F$y,3553,F$J)},F$y.uploadTexture2D1=function(F$J){F$Q.shaderCall++;var F$y=F$HJ.mainContext;F$y.activeTexture(33985),F$PJ.bindTexture(F$y,3553,F$J)},F$y.upload=function(F$J,F$y){F$kJ.activeShader=F$kJ.bindShader=this,this._lastUseFrameCount===F$Q.loopCount||this.activeResource(),F$PJ.UseProgram(this._program),this._reCompile?(F$y=this._params,this._reCompile=!1):F$y=F$y||this._params;F$HJ.mainContext;for(var F$T,F$V,F$Z=F$y.length,F$m=0,F$R=0;F$R<F$Z;F$R++)null!==(F$V=F$J[(F$T=F$y[F$R]).name])&&(F$m+=F$T.fun.call(this,F$T,F$V));F$Q.shaderCall+=F$m},F$y.uploadArray=function(F$J,F$y,F$T){F$kJ.activeShader=this,(F$kJ.bindShader=this).activeResource(),F$PJ.UseProgram(this._program);this._params;for(var F$V,F$Z,F$m=0,F$R=F$y-2;0<=F$R;F$R-=2)(F$Z=this._paramsMap[F$J[F$R]])&&null!=(F$V=F$J[F$R+1])&&(F$T&&F$T[F$Z.name]&&F$T[F$Z.name].bind(),F$m+=F$Z.fun.call(this,F$Z,F$V));F$Q.shaderCall+=F$m},F$y.getParams=function(){return this._params},F$A.getShader=function(F$J){return F$A.sharders[F$J]},F$A.create=function(F$J,F$y,F$T,F$V){return new F$A(F$J,F$y,F$T,F$V)},F$A.withCompile=function(F$J,F$y,F$T,F$V){if(F$T&&F$A.sharders[F$T])return F$A.sharders[F$T];var F$Z=F$A._preCompileShader[2e-4*F$J];if(!F$Z)throw new Error("withCompile shader err!"+F$J);return F$Z.createShader(F$y,F$T,F$V)},F$A.withCompile2D=function(F$J,F$y,F$T,F$V,F$Z){if(F$V&&F$A.sharders[F$V])return F$A.sharders[F$V];var F$m=F$A._preCompileShader[2e-4*F$J+F$y];if(!F$m)throw new Error("withCompile shader err!"+F$J+" "+F$y);return F$m.createShader(F$T,F$V,F$Z)},F$A.addInclude=function(F$J,F$y){F$LJ.addInclude(F$J,F$y)},F$A.preCompile=function(F$J,F$y,F$T,F$V){var F$Z=2e-4*F$J;F$A._preCompileShader[F$Z]=new F$LJ(F$Z,F$y,F$T,F$V)},F$A.preCompile2D=function(F$J,F$y,F$T,F$V,F$Z){var F$m=2e-4*F$J+F$y;F$A._preCompileShader[F$m]=new F$LJ(F$m,F$T,F$V,F$Z)},F$A._createShader=function(F$J,F$y,F$T){var F$V=F$J.createShader(F$T);return F$J.shaderSource(F$V,F$y),F$J.compileShader(F$V),F$V},F$A._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],F$A._count=0,F$A._preCompileShader={},F$A.SHADERNAME2ID=2e-4,F$A.sharders=((F$A.sharders=[]).length=32,F$A.sharders),F$R(F$A,["nameKey",function(){return this.nameKey=new F$i}]),F$A}(),F$jJ=function(F$J){function F$y(){this._maxsize=0,this._upload=!0,this._uploadSize=0,F$y.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}F$M(F$y,"laya.webgl.utils.Buffer2D",F$J);var F$T=F$y.prototype;return F$T.needSize=function(F$J){var F$y=this._byteLength;if(F$J){var F$T=this._byteLength+F$J;F$T<=this._buffer.byteLength||this._resizeBuffer(F$T<<1,!0),this._byteLength=F$T}return F$y},F$T._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),F$Q.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,F$SJ._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),F$SJ._gl.bufferSubData(this._bufferType,0,this._buffer)},F$T._bufferSubData=function(F$J,F$y,F$T){if(void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),this._maxsize=Math.max(this._maxsize,this._byteLength),F$Q.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,F$SJ._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),F$y||F$T){var F$V=this._buffer.slice(F$y,F$T);F$SJ._gl.bufferSubData(this._bufferType,F$J,F$V)}else F$SJ._gl.bufferSubData(this._bufferType,F$J,this._buffer)},F$T._checkArrayUse=function(){},F$T._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},F$T._bind_subUpload=function(F$J,F$y,F$T){return void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(F$J,F$y,F$T),!0)},F$T._resizeBuffer=function(F$J,F$y){if(F$J<this._buffer.byteLength)return this;if(this.memorySize=F$J,F$y&&this._buffer&&0<this._buffer.byteLength){var F$T=new ArrayBuffer(F$J);new Uint8Array(F$T).set(new Uint8Array(this._buffer),0),this._buffer=F$T}else this._buffer=new ArrayBuffer(F$J);return this._checkArrayUse(),this._upload=!0,this},F$T.append=function(F$J){this._upload=!0;var F$y,F$T;F$y=F$J.byteLength,F$J instanceof Uint8Array?(this._resizeBuffer(this._byteLength+F$y,!0),F$T=new Uint8Array(this._buffer,this._byteLength)):F$J instanceof Uint16Array?(this._resizeBuffer(this._byteLength+F$y,!0),F$T=new Uint16Array(this._buffer,this._byteLength)):F$J instanceof Float32Array&&(this._resizeBuffer(this._byteLength+F$y,!0),F$T=new Float32Array(this._buffer,this._byteLength)),F$T.set(F$J,0),this._byteLength+=F$y,this._checkArrayUse()},F$T.appendU16Array=function(F$J,F$y){this._resizeBuffer(this._byteLength+2*F$y,!0);for(var F$T=new Uint16Array(this._buffer,this._byteLength,F$y),F$V=0;F$V<F$y;F$V++)F$T[F$V]=F$J[F$V];this._byteLength+=2*F$y,this._checkArrayUse()},F$T.appendEx=function(F$J,F$y){this._upload=!0;var F$T;F$T=F$J.byteLength,this._resizeBuffer(this._byteLength+F$T,!0),new F$y(this._buffer,this._byteLength).set(F$J,0),this._byteLength+=F$T,this._checkArrayUse()},F$T.appendEx2=function(F$J,F$y,F$T,F$V){void 0===F$V&&(F$V=1),this._upload=!0;var F$Z,F$m;F$Z=F$T*F$V,this._resizeBuffer(this._byteLength+F$Z,!0),F$m=new F$y(this._buffer,this._byteLength);var F$R=0;for(F$R=0;F$R<F$T;F$R++)F$m[F$R]=F$J[F$R];this._byteLength+=F$Z,this._checkArrayUse()},F$T.getBuffer=function(){return this._buffer},F$T.setNeedUpload=function(){this._upload=!0},F$T.getNeedUpload=function(){return this._upload},F$T.upload=function(){var F$J=this._bind_upload();return F$SJ._gl.bindBuffer(this._bufferType,null),F$SJ._bindActive[this._bufferType]=null,F$kJ.activeShader=null,F$J},F$T.subUpload=function(F$J,F$y,F$T){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0);var F$V=this._bind_subUpload();return F$SJ._gl.bindBuffer(this._bufferType,null),F$SJ._bindActive[this._bufferType]=null,F$kJ.activeShader=null,F$V},F$T.disposeResource=function(){F$J.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},F$T.clear=function(){this._byteLength=0,this._upload=!0},F$V(0,F$T,"bufferLength",function(){return this._buffer.byteLength}),F$V(0,F$T,"byteLength",null,function(F$J){this._byteLength!==F$J&&(F$J<=this._buffer.byteLength||this._resizeBuffer(2*F$J+256,!0),this._byteLength=F$J)}),F$y.__int__=function(F$J){F$wJ.QuadrangleIB=F$wJ.create(35044),F$sJ.fillIBQuadrangle(F$wJ.QuadrangleIB,16)},F$y.FLOAT32=4,F$y.SHORT=2,F$y}(F$SJ),F$gJ=(function(F$y){function F$T(F$J){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,F$T.__super.call(this,9)}F$M(F$T,"laya.webgl.shader.d2.value.GlowSV",F$y);var F$J=F$T.prototype;F$J.setValue=function(F$J){F$y.prototype.setValue.call(this,F$J)},F$J.clear=function(){F$y.prototype.clear.call(this)}}(F$YJ),function(F$J){function F$y(F$J){F$y.__super.call(this,64),this.defines.add(64)}F$M(F$y,"laya.webgl.shader.d2.value.TextSV",F$J);var F$T=F$y.prototype;return F$T.release=function(){(F$y.pool[F$y._length++]=this).clear()},F$T.clear=function(){F$J.prototype.clear.call(this)},F$y.create=function(){return F$y._length?F$y.pool[--F$y._length]:new F$y(null)},F$y.pool=[],F$y._length=0,F$y}(F$YJ)),F$NJ=function(F$J){function F$Z(F$J,F$y,F$T,F$V){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,F$Z.__super.call(this,F$J,F$y,F$T,F$V)}F$M(F$Z,"laya.webgl.shader.d2.Shader2X",F$J);var F$y=F$Z.prototype;return F$y.upload2dQuick1=function(F$J){this.upload(F$J,this._params2dQuick1||this._make2dQuick1())},F$y._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var F$J,F$y=this._params,F$T=0,F$V=F$y.length;F$T<F$V;F$T++)F$J=F$y[F$T],(F$E.isFlash||"size"!==F$J.name&&"position"!==F$J.name&&"texcoord"!==F$J.name)&&this._params2dQuick1.push(F$J)}return this._params2dQuick1},F$y.disposeResource=function(){F$J.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},F$y.upload2dQuick2=function(F$J){this.upload(F$J,this._params2dQuick2||this._make2dQuick2())},F$y._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var F$J,F$y=this._params,F$T=0,F$V=F$y.length;F$T<F$V;F$T++)F$J=F$y[F$T],(F$E.isFlash||"size"!==F$J.name)&&this._params2dQuick2.push(F$J)}return this._params2dQuick2},F$Z.create=function(F$J,F$y,F$T,F$V){return new F$Z(F$J,F$y,F$T,F$V)},F$Z}(F$pJ),F$wJ=function(F$J){function F$y(F$J){this._uint8Array=null,this._uint16Array=null,void 0===F$J&&(F$J=35044),F$y.__super.call(this),this._bufferUsage=F$J,this._bufferType=34963,F$E.isFlash||(this._buffer=new ArrayBuffer(8))}F$M(F$y,"laya.webgl.utils.IndexBuffer2D",F$jJ);var F$T=F$y.prototype;return F$T._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},F$T.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},F$T.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},F$T.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},F$y.QuadrangleIB=null,F$y.create=function(F$J){return void 0===F$J&&(F$J=35044),new F$y(F$J)},F$y}(),F$zJ=function(F$J){function F$T(F$J,F$y){this._floatArray32=null,this._vertexStride=0,F$T.__super.call(this),this._vertexStride=F$J,this._bufferUsage=F$y,this._bufferType=34962,F$E.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}F$M(F$T,"laya.webgl.utils.VertexBuffer2D",F$J);var F$y=F$T.prototype;return F$y.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},F$y.bind=function(F$J){F$J&&F$J._bind(),this._bind()},F$y.insertData=function(F$J,F$y){this.getFloat32Array().set(F$J,F$y),this._upload=!0},F$y.bind_upload=function(F$J){F$J._bind_upload()||F$J._bind(),this._bind_upload()||this._bind()},F$y._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},F$y.disposeResource=function(){F$J.prototype.disposeResource.call(this)},F$y.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},F$V(0,F$y,"vertexStride",function(){return this._vertexStride}),F$T.create=function(F$J,F$y){return void 0===F$y&&(F$y=35048),new F$T(F$J,F$y)},F$T}(F$jJ),F$Jy=function(F$J){function F$n(F$J,F$y,F$T,F$V,F$Z,F$m){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===F$T&&(F$T=6408),void 0===F$V&&(F$V=!0),F$n.__super.call(this,F$J,F$y),F$J){if(this._format=F$T,this._mipmap=F$V,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof F$J)this._url=F$J,this._src=F$J,this._image=new F$G.window.Image,F$y&&(F$y.onload&&(this.onload=F$y.onload),F$y.onerror&&(this.onerror=F$y.onerror),F$y.onCreate&&F$y.onCreate(this)),this._image.crossOrigin=F$J&&0==F$J.indexOf("data:")?null:"",F$J&&(this._image.src=F$J);else if(F$J instanceof ArrayBuffer){this._src=F$y,this._url=this._src;var F$R=new F$K(F$J);F$R.readUTFBytes(4),F$R.readUTFBytes(2),F$R.getInt16();F$R.endian="bigEndian",this._w=F$R.getInt16(),this._h=F$R.getInt16();F$R.getInt16(),F$R.getInt16();this._image=new Uint8Array(F$J,F$R.pos),this._format=F$HJ.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,F$I.enabled&&this._w<F$I.atlasLimitWidth&&this._h<F$I.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(F$J instanceof Uint8Array))return this._src=F$y,this._url=this._src,this._image=F$J.source||F$J,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=F$y,this._url=this._src,this._w=F$Z,this._h=F$m,this._image=F$J,this._format=0===F$T?F$J.byteLength/(F$Z*F$m)==4?6408:6407:F$T}this._$5__enableMerageInAtlas=!0}}F$M(F$n,"laya.webgl.resource.WebGLImage",F$o);var F$y=F$n.prototype;return F$l.imps(F$y,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$y._init_=function(F$J,F$y){},F$y._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var F$J=F$HJ.mainContext,F$y=this._source=F$J.createTexture(),F$T=F$PJ.curBindTexTarget,F$V=F$PJ.curBindTexValue;F$PJ.bindTexture(F$J,3553,F$y);var F$Z=this.minFifter,F$m=this.magFifter,F$R=this.repeat?10497:33071,F$n=F$$.isPOT(this._w,this._h),F$K=!1;switch(F$n?(this.mipmap?-1!==F$Z||(F$Z=9987):-1!==F$Z||(F$Z=9729),-1!==F$m||(F$m=9729),F$J.texParameteri(3553,10241,F$Z),F$J.texParameteri(3553,10240,F$m),F$J.texParameteri(3553,10242,F$R),F$J.texParameteri(3553,10243,F$R),this.mipmap&&F$J.generateMipmap(3553)):(-1!==F$Z||(F$Z=9729),-1!==F$m||(F$m=9729),F$J.texParameteri(3553,10241,F$Z),F$J.texParameteri(3553,10240,F$m),F$J.texParameteri(3553,10242,33071),F$J.texParameteri(3553,10243,33071)),F$J.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&F$J.pixelStorei(F$J.UNPACK_ALIGNMENT,1),F$J.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&F$J.pixelStorei(F$J.UNPACK_ALIGNMENT,1),F$J.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:F$K=!0,F$J.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case F$HJ.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:F$K=!0,F$J.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}F$J.pixelStorei(37441,!1),F$T&&F$V&&F$PJ.bindTexture(F$J,F$T,F$V),this.uri||(this.uri=this._url),F$K?this.memorySize=this._image.length:F$n&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},F$y.recreateResource=function(){var F$J=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var F$y=this;this._image=new F$G.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(F$y._needReleaseAgain)return F$y._needReleaseAgain=!1,F$y._image.onload=null,void(F$y._image=null);F$y._allowMerageInAtlas&&F$y._enableMerageInAtlas?(F$J.memorySize=0,F$J._recreateLock=!1):F$y._createWebGlTexture(),F$y.completeCreate()},this._image.src=this._src}},F$y.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&F$HJ.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},F$y.onresize=function(){this._w=this._image.width,this._h=this._image.height,F$I.enabled&&this._w<F$I.atlasLimitWidth&&this._h<F$I.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},F$y.clearAtlasSource=function(){this._image=null},F$V(0,F$y,"format",function(){return this._format}),F$V(0,F$y,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(F$J){this._$5__enableMerageInAtlas=F$J}),F$V(0,F$y,"mipmap",function(){return this._mipmap}),F$V(0,F$y,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$V(0,F$y,"atlasSource",function(){return this._image}),F$V(0,F$y,"onload",null,function(F$J){var F$y=this;this._onload=F$J,this._image&&(this._image.onload=null!=this._onload?function(){F$y.onresize(),F$y._onload()}:null)}),F$V(0,F$y,"onerror",null,function(F$J){var F$y=this;this._onerror=F$J,this._image&&(this._image.onerror=null!=this._onerror?function(){F$y._onerror()}:null)}),F$n}();F$l.__init([F$GJ,F$W,F$aJ,F$LJ])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$J,F$y){"use strict";for(var F$T in Object.defineProperty(F$y,"__esModule",{value:!0}),Laya){var F$V=Laya[F$T];F$V&&F$V.__isclass&&(F$y[F$T]=F$V)}}),function(F$m,F$J,F$V){F$V.un,F$V.uns;var F$Z=F$V.static,F$R=F$V.class,F$n=F$V.getset,F$K=(F$V.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),F$B=laya.utils.ClassUtils,F$e=(laya.events.Event,laya.utils.HTMLChar),F$A=laya.net.Loader,F$$=(laya.display.Node,laya.maths.Rectangle),F$M=laya.renders.Render,F$G=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),F$o=laya.utils.Stat,F$k=laya.display.Text,F$s=laya.resource.Texture,F$E=laya.net.URL,F$O=laya.utils.Utils,F$L=function(){function F$G(){}return F$R(F$G,"laya.html.utils.HTMLParse"),F$G.parse=function(F$J,F$y,F$T){F$y=(F$y="<root>"+(F$y=F$y.replace(/<br>/g,"<br/>"))+"</root>").replace(F$G.spacePattern,F$G.char255);var F$V=F$O.parseXMLFromString(F$y);F$G._parseXML(F$J,F$V.childNodes[0].childNodes,F$T)},F$G._parseXML=function(F$J,F$y,F$T,F$V){var F$Z=0,F$m=0;if(F$y.join||F$y.item)for(F$Z=0,F$m=F$y.length;F$Z<F$m;++F$Z)F$G._parseXML(F$J,F$y[F$Z],F$T,F$V);else{var F$R,F$n,F$K;if(3==F$y.nodeType)return void(F$J instanceof laya.html.dom.HTMLDivElement?(null==F$y.nodeName&&(F$y.nodeName="#text"),F$n=F$y.nodeName.toLowerCase(),0<(F$K=F$y.textContent.replace(/^\s+|\s+$/g,"")).length&&(F$R=F$B.getInstance(F$n))&&(F$J.addChild(F$R),F$R.innerTEXT=F$K.replace(F$G.char255AndOneSpacePattern," "))):0<(F$K=F$y.textContent.replace(/^\s+|\s+$/g,"")).length&&(F$J.innerTEXT=F$K.replace(F$G.char255AndOneSpacePattern," ")));if("#comment"==(F$n=F$y.nodeName.toLowerCase()))return;if(F$R=F$B.getInstance(F$n)){(F$R=F$J.addChild(F$R)).URI=F$T,F$R.href=F$V;var F$A=F$y.attributes;if(F$A&&0<F$A.length)for(F$Z=0,F$m=F$A.length;F$Z<F$m;++F$Z){var F$$=F$A[F$Z],F$e=F$$.nodeName,F$M=F$$.value;F$R._setAttributes(F$e,F$M)}F$G._parseXML(F$R,F$y.childNodes,F$T,F$R.href)}else F$G._parseXML(F$J,F$y.childNodes,F$T,F$V)}},F$G.char255=String.fromCharCode(255),F$G.spacePattern=/&nbsp;|&#160;/g,F$G.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),F$G}(),F$H=function(){function F$x(){}return F$R(F$x,"laya.html.utils.Layout"),F$x.later=function(F$J){null==F$x._will&&(F$x._will=[],F$V.stage.frameLoop(1,null,function(){if(!(F$x._will.length<1)){for(var F$J=0;F$J<F$x._will.length;F$J++)laya.html.utils.Layout.layout(F$x._will[F$J]);F$x._will.length=0}})),F$x._will.push(F$J)},F$x.layout=function(F$J){if(!F$J||!F$J._style)return null;if(0==(512&F$J._style._type))return null;F$J.getStyle()._type&=-513;var F$y=F$x._multiLineLayout(F$J);return F$M.isConchApp&&F$J.layaoutCallNative&&F$J.layaoutCallNative(),F$y},F$x._multiLineLayout=function(F$J){if(F$k.RightToLeft)return F$x._multiLineLayout2(F$J);var F$y=new Array;F$J._addChildsToLayout(F$y);var F$T,F$V,F$Z,F$m,F$R,F$n=0,F$K=F$y.length,F$A=F$J._getCSSStyle(),F$$=F$A.letterSpacing,F$e=F$A.leading,F$M=F$A.lineHeight,F$G=F$A._widthAuto()||!F$A.wordWrap,F$B=F$G?999999:F$J.width,F$o=(F$J.height,0),F$s=F$A.italic?F$A.fontSize/3:0,F$E=F$A._getAlign(),F$O=F$A._getValign(),F$L=0!==F$O||0!==F$E||0!=F$M,F$H=0,F$P=0,F$l=0,F$a=0,F$q=new Array,F$r=F$q[0]=new F$X,F$D=!1,F$_=!1;F$r.h=0,F$A.italic&&(F$B-=F$A.fontSize/3);var F$t=0,F$v=!0;function F$Q(){F$r.y=F$P,F$P+=F$r.h+F$e,0==F$r.h&&(F$P+=F$M),F$r.mWidth=F$t,F$t=0,F$r=new F$X,F$q.push(F$r),F$r.h=0,F$D=!(F$v=!(F$H=0))}for(F$n=0;F$n<F$K;F$n++)if(null!=(F$T=F$y[F$n]))if(F$v=!1,F$T instanceof laya.html.dom.HTMLBrElement)F$Q(),F$r.y=F$P;else{if(F$T._isChar()){if((F$m=F$T).isWord)F$D=F$_||"\n"===F$m.char,F$r.wordStartIndex=F$r.elements.length;else{if(F$l=F$m.width+F$m.style.letterSpacin,0<F$q.length&&F$B<F$H+F$l&&0<F$r.wordStartIndex){var F$i;F$i=F$r.elements.length-F$r.wordStartIndex+1,F$r.elements.length=F$r.wordStartIndex,F$n-=F$i,F$Q();continue}F$D=!1,F$t+=F$m.width}F$l=F$m.width+F$$,F$a=F$m.height,F$_=!1,(F$D=F$D||F$B<F$H+F$l)&&F$Q(),F$r.minTextHeight=Math.min(F$r.minTextHeight,F$T.height)}else F$V=F$T._getCSSStyle(),F$R=F$T,F$Z=F$V.padding,0===F$V._getCssFloat()||(F$L=!0),F$D=F$_||F$V.lineElement,F$l=F$R.width*F$R._style._tf.scaleX+F$Z[1]+F$Z[3]+F$$,F$a=F$R.height*F$R._style._tf.scaleY+F$Z[0]+F$Z[2],F$_=F$V.lineElement,(F$D=F$D||F$B<F$H+F$l&&F$V.wordWrap)&&F$Q();F$r.elements.push(F$T),F$r.h=Math.max(F$r.h,F$a),F$T.x=F$H,F$T.y=F$P,F$H+=F$l,F$r.w=F$H-F$$,F$r.y=F$P,F$o=Math.max(F$H+F$s,F$o)}else F$v||(F$H+=F$x.DIV_ELEMENT_PADDING),F$r.wordStartIndex=F$r.elements.length;if(F$P=F$r.y+F$r.h,F$L){var F$c=0,F$u=F$B;for(F$G&&0<F$J.width&&(F$u=F$J.width),F$n=0,F$K=F$q.length;F$n<F$K;F$n++)F$q[F$n].updatePos(0,F$u,F$n,F$c,F$E,F$O,F$M),F$c+=Math.max(F$M,F$q[F$n].h+F$e);F$P=F$c}return F$G&&(F$J.width=F$o),F$P>F$J.height&&(F$J.height=F$P),[F$o,F$P]},F$x._multiLineLayout2=function(F$J){var F$y=new Array;F$J._addChildsToLayout(F$y);var F$T,F$V,F$Z,F$m,F$R,F$n=0,F$K=F$y.length,F$A=F$J._getCSSStyle(),F$$=F$A.letterSpacing,F$e=F$A.leading,F$M=F$A.lineHeight,F$G=F$A._widthAuto()||!F$A.wordWrap,F$B=F$G?999999:F$J.width,F$o=(F$J.height,0),F$s=F$A.italic?F$A.fontSize/3:0,F$E=2-F$A._getAlign(),F$O=F$A._getValign(),F$L=0!==F$O||0!=F$E||0!=F$M,F$H=0,F$P=0,F$l=0,F$a=0,F$q=new Array,F$r=F$q[0]=new F$X,F$D=!1,F$_=!1;F$r.h=0,F$A.italic&&(F$B-=F$A.fontSize/3);var F$t=0,F$v=!0;function F$Q(){F$r.y=F$P,F$P+=F$r.h+F$e,0==F$r.h&&(F$P+=F$M),F$r.mWidth=F$t,F$t=0,F$r=new F$X,F$q.push(F$r),F$r.h=0,F$D=!(F$v=!(F$H=0))}for(F$n=0;F$n<F$K;F$n++)if(null!=(F$T=F$y[F$n]))if(F$v=!1,F$T instanceof laya.html.dom.HTMLBrElement)F$Q(),F$r.y=F$P;else{if(F$T._isChar()){if((F$m=F$T).isWord)F$D=F$_||"\n"===F$m.char,F$r.wordStartIndex=F$r.elements.length;else{if(0<F$q.length&&F$B<F$H+F$l&&0<F$r.wordStartIndex){var F$i;F$i=F$r.elements.length-F$r.wordStartIndex+1,F$r.elements.length=F$r.wordStartIndex,F$n-=F$i,F$Q();continue}F$D=!1,F$t+=F$m.width}F$l=F$m.width+F$$,F$a=F$m.height,F$_=!1,(F$D=F$D||F$B<F$H+F$l)&&F$Q(),F$r.minTextHeight=Math.min(F$r.minTextHeight,F$T.height)}else F$V=F$T._getCSSStyle(),F$R=F$T,F$Z=F$V.padding,0===F$V._getCssFloat()||(F$L=!0),F$D=F$_||F$V.lineElement,F$l=F$R.width*F$R._style._tf.scaleX+F$Z[1]+F$Z[3]+F$$,F$a=F$R.height*F$R._style._tf.scaleY+F$Z[0]+F$Z[2],F$_=F$V.lineElement,(F$D=F$D||F$B<F$H+F$l&&F$V.wordWrap)&&F$Q();F$r.elements.push(F$T),F$r.h=Math.max(F$r.h,F$a),F$T.x=F$H,F$T.y=F$P,F$H+=F$l,F$r.w=F$H-F$$,F$r.y=F$P,F$o=Math.max(F$H+F$s,F$o)}else F$v||(F$H+=F$x.DIV_ELEMENT_PADDING),F$r.wordStartIndex=F$r.elements.length;if(F$P=F$r.y+F$r.h,F$L){var F$c=0,F$u=F$B;for(F$n=0,F$K=F$q.length;F$n<F$K;F$n++)F$q[F$n].updatePos(0,F$u,F$n,F$c,F$E,F$O,F$M),F$c+=Math.max(F$M,F$q[F$n].h+F$e);F$P=F$c}for(F$G&&(F$J.width=F$o),F$P>F$J.height&&(F$J.height=F$P),F$n=0,F$K=F$q.length;F$n<F$K;F$n++)F$q[F$n].revertOrder(F$B);return[F$o,F$P]},F$x._will=null,F$x.DIV_ELEMENT_PADDING=0,F$x}(),F$X=function(){function F$J(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}F$R(F$J,"laya.html.utils.LayoutLine");var F$y=F$J.prototype;return F$y.updatePos=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){var F$n,F$K=0;0<this.elements.length&&(F$K=(F$n=this.elements[this.elements.length-1]).x+F$n.width-this.elements[0].x);var F$A=0,F$$=NaN;1===F$Z&&(F$A=(F$y-F$K)/2),2===F$Z&&(F$A=F$y-F$K),0===F$R||0!=F$m||(F$m=1);for(var F$e=0,F$M=this.elements.length;F$e<F$M;F$e++){var F$G=(F$n=this.elements[F$e])._getCSSStyle();switch(0!==F$A&&(F$n.x+=F$A),F$G._getValign()){case 0:F$n.y=F$V;break;case 1:var F$B=0;99999!=this.minTextHeight&&(F$B=this.minTextHeight);var F$o=(F$B+F$R)/2;F$o=Math.max(F$o,this.h),F$$=(laya.html.dom.HTMLImageElement,F$V+F$o-F$n.height),F$n.y=F$$;break;case 2:F$n.y=F$V+(F$R-F$n.height)}}},F$y.revertOrder=function(F$J){var F$y;if(0<this.elements.length){var F$T,F$V=0;for(F$T=this.elements.length,F$V=0;F$V<F$T;F$V++)(F$y=this.elements[F$V]).x=F$J-F$y.x-F$y.width}},F$J}(),F$P=function(F$T){function F$y(){this.URI=null,this._href=null,F$y.__super.call(this),this._text=F$y._EMPTYTEXT,this.setStyle(new F$K(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}F$R(F$y,"laya.html.dom.HTMLElement",F$T);var F$J=F$y.prototype;return F$J.layaoutCallNative=function(){var F$J=0;if(this._childs&&0<(F$J=this._childs.length))for(var F$y=0;F$y<F$J;F$y++)this._childs[F$y].layaoutCallNative&&this._childs[F$y].layaoutCallNative();var F$T=this._getWords();F$T?laya.html.dom.HTMLElement.fillWords(this,F$T,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},F$J.appendChild=function(F$J){return this.addChild(F$J)},F$J._getWords2=function(){var F$J=this._text.text;if(!F$J||0===F$J.length)return null;var F$y,F$T,F$V=0,F$Z=0;if(this._text.drawWords)F$T=this._text.drawWords;else{for(F$Z=(F$y=F$J.split(" ")).length-1,F$T=[],F$V=0;F$V<F$Z;F$V++)F$T.push(F$y[F$V]," ");0<=F$Z&&F$T.push(F$y[F$Z]),this._text.drawWords=F$T}var F$m,F$R=this._text.words;if(F$R&&F$R.length===F$T.length)return F$R;null===F$R&&(this._text.words=F$R=[]),F$R.length=F$T.length;var F$n=this.style,F$K=F$n.font;for(F$V=0,F$Z=F$T.length;F$V<F$Z;F$V++){F$m=F$O.measureText(F$T[F$V],F$K);var F$A=F$R[F$V]=new F$e(F$T[F$V],F$m.width,F$m.height||F$n.fontSize,F$n);if(1<F$A.char.length&&(F$A.charNum=F$A.char),this.href){var F$$=new F$G;this.addChild(F$$),F$A.setSprite(F$$)}}return F$R},F$J._getWords=function(){if(!F$k.CharacterCache)return this._getWords2();var F$J=this._text.text;if(!F$J||0===F$J.length)return null;var F$y,F$T=this._text.words;if(F$T&&F$T.length===F$J.length)return F$T;null===F$T&&(this._text.words=F$T=[]),F$T.length=F$J.length;for(var F$V=this.style,F$Z=F$V.font,F$m=0,F$R=F$J.length;F$m<F$R;F$m++)if(F$y=F$O.measureText(F$J.charAt(F$m),F$Z)){var F$n=F$T[F$m]=new F$e(F$J.charAt(F$m),F$y.width,F$y.height||F$V.fontSize,F$V);if(this.href){var F$K=new F$G;this.addChild(F$K),F$n.setSprite(F$K)}}else console.warn("_getWords size is null"+F$J.charAt(F$m),F$Z);return F$T},F$J.showLinkSprite=function(){var F$J=this._text.words;if(F$J)for(var F$y,F$T,F$V=[],F$Z=0;F$Z<F$J.length;F$Z++)F$T=F$J[F$Z],(F$y=new F$G).graphics.drawRect(0,0,F$T.width,F$T.height,"#ff0000"),F$y.width=F$T.width,F$y.height=F$T.height,this.addChild(F$y),F$V.push(F$y)},F$J._layoutLater=function(){var F$J=this.style;512&F$J._type||(F$J.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&F$J.block?(F$H.later(this),F$J._type|=512):this.parent&&this.parent._layoutLater())},F$J._setAttributes=function(F$J,F$y){switch(F$J){case"style":return void this.style.cssText(F$y);case"class":return void(this.className=F$y)}F$T.prototype._setAttributes.call(this,F$J,F$y)},F$J.updateHref=function(){if(null!=this._href){var F$J=this._getWords();if(F$J)for(var F$y,F$T,F$V=0;F$V<F$J.length;F$V++)(F$T=(F$y=F$J[F$V]).getSprite())&&(F$T.size(F$y.width,F$y.height),F$T.on("click",this,this.onLinkHandler))}},F$J.onLinkHandler=function(F$J){switch(F$J.type){case"click":for(var F$y=this;F$y;)F$y.event("link",[this.href]),F$y=F$y.parent}},F$J.formatURL=function(F$J){return this.URI?F$E.formatURL(F$J,this.URI?this.URI.path:null):F$J},F$n(0,F$J,"href",function(){return this._href},function(F$J){null!=(this._href=F$J)&&(this._getCSSStyle().underLine=1,this.updateHref())}),F$n(0,F$J,"color",null,function(F$J){this.style.color=F$J}),F$n(0,F$J,"onClick",null,function(F$J){F$V._runScript("fn=function(event){"+F$J+";}"),this.on("click",this,void 0)}),F$n(0,F$J,"id",null,function(F$J){F$l.document.setElementById(F$J,this)}),F$n(0,F$J,"innerTEXT",function(){return this._text.text},function(F$J){this.text=F$J}),F$n(0,F$J,"style",function(){return this._style}),F$n(0,F$J,"text",function(){return this._text.text},function(F$J){this._text==F$y._EMPTYTEXT?this._text={text:F$J,words:null}:(this._text.text=F$J,this._text.words&&(this._text.words.length=0)),F$M.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),F$n(0,F$J,"parent",F$T.prototype._$get_parent,function(F$J){if(F$J instanceof laya.html.dom.HTMLElement){var F$y=F$J;this.URI||(this.URI=F$y.URI),this.style.inherit(F$y.style)}F$V.superSet(F$G,this,"parent",F$J)}),F$n(0,F$J,"className",null,function(F$J){this.style.attrs(F$l.document.styleSheets["."+F$J])}),F$y.fillWords=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){F$J.graphics.clear();for(var F$n=0,F$K=F$y.length;F$n<F$K;F$n++){var F$A=F$y[F$n];F$J.graphics.fillText(F$A.char,F$A.x+F$T,F$A.y+F$V,F$Z,F$m,"left",F$R)}},F$y._EMPTYTEXT={text:null,words:null},F$y}(F$G),F$y=(function(F$J){function F$y(){F$y.__super.call(this),this.style.lineElement=!0,this.style.block=!0}F$R(F$y,"laya.html.dom.HTMLBrElement",F$P)}(),function(F$J){function F$y(){this.contextHeight=NaN,this.contextWidth=NaN,F$y.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}F$R(F$y,"laya.html.dom.HTMLDivElement",F$J);var F$T=F$y.prototype;return F$T.appendHTML=function(F$J){F$L.parse(this,F$J,this.URI),this.layout()},F$T._addChildsToLayout=function(F$y){var F$J=this._getWords();if(null==F$J&&0==this._childs.length)return!1;F$J&&F$J.forEach(function(F$J){F$y.push(F$J)});for(var F$T=!0,F$V=0,F$Z=this._childs.length;F$V<F$Z;F$V++){var F$m=this._childs[F$V];F$T?F$T=!1:F$y.push(null),F$m._addToLayout(F$y)}return!0},F$T._addToLayout=function(F$J){this.layout()},F$T.layout=function(){if(this.style){this.style._type|=512;var F$J=F$H.layout(this);if(F$J){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new F$$);var F$y=this._$P.mHtmlBounds;F$y.x=F$y.y=0,F$y.width=this.contextWidth=F$J[0],F$y.height=this.contextHeight=F$J[1],this.setBounds(F$y)}}},F$n(0,F$T,"height",function(){return this._height?this._height:this.contextHeight},F$J.prototype._$set_height),F$n(0,F$T,"innerHTML",null,function(F$J){this.destroyChildren(),this.appendHTML(F$J)}),F$n(0,F$T,"width",function(){return this._width?this._width:this.contextWidth},function(F$J){var F$y=!1;F$y=0===F$J?F$J!=this._width:F$J!=this.width,F$V.superSet(F$P,this,"width",F$J),F$y&&this.layout()}),F$y}(F$P)),F$l=function(F$J){function F$y(){this.all=new Array,this.styleSheets=F$K.styleSheets,F$y.__super.call(this)}F$R(F$y,"laya.html.dom.HTMLDocument",F$P);var F$T=F$y.prototype;return F$T.getElementById=function(F$J){return this.all[F$J]},F$T.setElementById=function(F$J,F$y){this.all[F$J]=F$y},F$Z(F$y,["document",function(){return this.document=new F$y}]),F$y}();(function(F$J){function F$y(){this._tex=null,this._url=null,this._renderArgs=[],F$y.__super.call(this),this.style.block=!0}F$R(F$y,"laya.html.dom.HTMLImageElement",F$P);var F$T=F$y.prototype;F$T._addToLayout=function(F$J){!this._style.absolute&&F$J.push(this)},F$T.render=function(F$J,F$y,F$T){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(F$o.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,F$J.ctx.drawTexture2(F$y,F$T,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},F$T.layaoutCallNative=function(){var F$J=0;if(this._childs&&0<(F$J=this._childs.length))for(var F$y=0;F$y<F$J;F$y++)this._childs[F$y].layaoutCallNative&&this._childs[F$y].layaoutCallNative()},F$n(0,F$T,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(F$J){this._width!==F$J&&(this._width=F$J,this._style.width=F$J,this.repaint())}),F$n(0,F$T,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(F$J){this._height!==F$J&&(this._height=F$J,this._style.height=F$J,this.repaint())}),F$T.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),F$A.clearCache(this,this._url),this._tex=null),F$P.prototype.destroy.call(this)},F$T.onloaded=function(){var F$J=this._style;F$J&&!F$J.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),F$J&&!F$J.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),F$M.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},F$T._loadImageComplete=function(F$J,F$y,F$T){if(!this._destroyed)if(null!=F$T)if(F$T instanceof ArrayBuffer){var F$V=new DataView(F$T);new laya.webgl.resource.WebGLImage(new Uint8Array(F$T,8),F$J,0,!1,F$V.getUint32(0),F$V.getUint32(4));this.onloaded()}else if(F$T instanceof F$s)F$A.imgMgrSet[F$J]=F$y,F$m.imgMgrLock(F$J,F$A.imgMgrSet[F$J]),this._url=F$J,this._tex=F$T,F$A.keepCache(this,F$J),F$A.cacheRes(F$J,this._tex),this.onloaded();else{var F$Z=-1!=F$J.indexOf(".png",F$J.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(F$T,F$J,F$Z,!1,F$T.width,F$T.height);this.onloaded()}else this.event("error","Load image failed")},F$n(0,F$T,"src",null,function(F$J){(F$J=this.formatURL(F$J),this._url!=F$J)&&(null!=this._tex&&(F$A.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=F$J,(this._tex=F$A.getRes(F$J))?(F$A.keepCache(this,F$J),this.onloaded()):F$m.imgMgrLoad(F$J,this._loadImageComplete.bind(this),2,!1))})})(),function(F$J){function F$y(){this.type=null,F$y.__super.call(this),this.visible=!1}F$R(F$y,"laya.html.dom.HTMLLinkElement",F$J);var F$T=F$y.prototype;F$T._onload=function(F$J){switch(this.type){case"text/css":F$K.parseCSS(F$J,this.URI)}},F$n(0,F$T,"href",F$J.prototype._$get_href,function(F$J){var F$y=this;F$J=this.formatURL(F$J),this.URI=new F$E(F$J);var F$T=new F$A;F$T.once("complete",null,function(F$J){F$y._onload(F$J)}),F$T.load(F$J,"text")}),F$y._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(F$P),function(F$J){function F$y(){F$y.__super.call(this),this.visible=!1}F$R(F$y,"laya.html.dom.HTMLStyleElement",F$J),F$n(0,F$y.prototype,"text",F$J.prototype._$get_text,function(F$J){F$K.parseCSS(F$J,null)})}(F$P),function(F$J){function F$y(){F$y.__super.call(this),this._getCSSStyle().valign="middle"}F$R(F$y,"laya.html.dom.HTMLIframeElement",F$J),F$n(0,F$y.prototype,"href",F$J.prototype._$get_href,function(F$T){var F$V=this;F$T=this.formatURL(F$T);var F$J=new F$A;F$J.once("complete",null,function(F$J){var F$y=F$V.URI;F$V.URI=new F$E(F$T),F$V.innerHTML=F$J,!F$y||(F$V.URI=F$y)}),F$J.load(F$T,"text")})}(F$y)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$J,F$y){"use strict";for(var F$T in Object.defineProperty(F$y,"__esModule",{value:!0}),Laya){var F$V=Laya[F$T];F$V&&F$V.__isclass&&(F$y[F$T]=F$V)}}),function(F$Z,F$J,F$o){F$o.un,F$o.uns;var F$V=F$o.static,F$m=F$o.class,F$R=F$o.getset,F$T=(F$o.__newvec,laya.display.Animation),F$s=(laya.utils.Browser,laya.utils.ClassUtils),F$n=laya.filters.ColorFilter,F$K=laya.utils.Ease,F$A=laya.events.Event,F$$=(laya.events.EventDispatcher,laya.display.css.Font),F$e=laya.display.FrameAnimation,F$y=laya.display.Graphics,F$M=laya.utils.Handler,F$G=laya.display.Input,F$O=laya.net.Loader,F$B=(laya.display.Node,laya.maths.Point),F$E=laya.maths.Rectangle,F$L=laya.renders.Render,F$H=laya.display.Sprite,F$P=laya.display.Text,F$l=laya.resource.Texture,F$a=laya.utils.Tween,F$q=laya.utils.Utils,F$r=laya.utils.WeakObject;F$o.interface("laya.ui.IItem"),F$o.interface("laya.ui.ISelect"),F$o.interface("laya.ui.IRender"),F$o.interface("laya.ui.IComponent"),F$o.interface("laya.ui.IBox","IComponent");var F$D=function(){function F$J(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return F$m(F$J,"laya.ui.LayoutStyle"),F$V(F$J,["EMPTY",function(){return this.EMPTY=new F$J}]),F$J}(),F$_=function(){function F$J(){}return F$m(F$J,"laya.ui.Styles"),F$J.labelColor="#000000",F$J.buttonStateNum=3,F$J.scrollBarMinNum=15,F$J.scrollBarDelayTime=500,F$V(F$J,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),F$J}(),F$t=function(){function F$Z(){}return F$m(F$Z,"laya.ui.UIUtils"),F$Z.fillArray=function(F$J,F$y,F$T){var F$V=F$J.concat();if(F$y)for(var F$Z=F$y.split(","),F$m=0,F$R=Math.min(F$V.length,F$Z.length);F$m<F$R;F$m++){var F$n=F$Z[F$m];F$V[F$m]="true"==F$n||"false"!=F$n&&F$n,null!=F$T&&(F$V[F$m]=F$T(F$n))}return F$V},F$Z.toColor=function(F$J){return F$q.toHexColor(F$J)},F$Z.gray=function(F$J,F$y){void 0===F$y&&(F$y=!0),F$y?F$Z.addFilter(F$J,F$Z.grayFilter):F$Z.clearFilter(F$J,F$n)},F$Z.addFilter=function(F$J,F$y){var F$T=F$J.filters||[];F$T.push(F$y),F$J.filters=F$T},F$Z.clearFilter=function(F$J,F$y){var F$T=F$J.filters;if(null!=F$T&&0<F$T.length){for(var F$V=F$T.length-1;-1<F$V;F$V--){var F$Z=F$T[F$V];F$o.__typeof(F$Z,F$y)&&F$T.splice(F$V,1)}F$J.filters=F$T}},F$Z._getReplaceStr=function(F$J){return F$Z.escapeSequence[F$J]},F$Z.adptString=function(F$J){return F$J.replace(/\\(\w)/g,F$Z._getReplaceStr)},F$Z.getBindFun=function(F$J){var F$y=F$Z._funMap.get(F$J);if(null==F$y){var F$T='"'+F$J+'"',F$V="(function(data){if(data==null)return;with(data){try{\nreturn "+(F$T=F$T.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";F$y=F$o._runScript(F$V),F$Z._funMap.set(F$J,F$y)}return F$y},F$V(F$Z,["grayFilter",function(){return this.grayFilter=new F$n([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new F$r}]),F$Z}(),F$v=function(){function F$J(){}return F$m(F$J,"UIConfig"),F$J.touchScrollEnable=!0,F$J.mouseWheelEnable=!0,F$J.showButtons=!0,F$J.popupBgColor="#000000",F$J.popupBgAlpha=.5,F$J.closeDialogOnSide=!0,F$J}(),F$Q=function(F$T){function F$E(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,F$E.__super.call(this),this._weakKeys=[]}F$m(F$E,"laya.ui.AutoBitmap",F$T);var F$J=F$E.prototype;return F$J.destroy=function(){if(F$O.clearObject(this,this._weakKey),this._weakKeys){for(var F$J=0,F$y=this._weakKeys.length;F$J<F$y;++F$J)F$O.clearObject(this,this._weakKeys[F$J]);this._weakKeys=null}F$T.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},F$J._setChanged=function(){this._isChanged||(this._isChanged=!0,F$o.timer.callLater(this,this.changeSource))},F$J.changeSource=function(){this._isChanged=!1;var F$J=this._source;if(F$J&&F$J.bitmap){var F$y=this.width,F$T=this.height,F$V=this._sizeGrid,F$Z=F$J.sourceWidth,F$m=F$J.sourceHeight;if(!F$V||F$Z===F$y&&F$m===F$T)this.cleanByTexture(F$J,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,F$y,F$T);else{F$O.clearObject(this,this._weakKey),F$J.$_GID||(F$J.$_GID=F$q.getGID());var F$R=F$J.$_GID+"."+F$y+"."+F$T+"."+F$V.join("."),F$n=F$O.findObject(F$R);if(F$q.isOKCmdList(F$n))return this._weakKey=F$R,F$O.keepObject(this,this._weakKey),void(this.cmds=F$n);this.clear();var F$K,F$A,F$$=F$V[0],F$e=F$V[1],F$M=F$V[2],F$G=F$V[3],F$B=F$V[4],F$o=!1;if(F$y==F$Z&&(F$G=F$e=0),F$T==F$m&&(F$$=F$M=0),F$y<F$G+F$e){var F$s=F$y;F$o=!0,F$y=F$G+F$e,this.save(),this.clipRect(0,0,F$s,F$T)}F$G&&F$$&&(F$K=F$E.getTexture(F$J,0,0,F$G,F$$),F$A=this._weakKeys[0],F$K?(F$A!=F$K.weakKey&&(F$O.clearObject(this,F$A),F$O.keepObject(this,F$K.weakKey),this._weakKeys[0]=F$K.weakKey),this.drawTexture(F$K,0,0,F$G,F$$)):(F$O.clearObject(this,F$A),this._weakKeys[0]="")),F$e&&F$$&&(F$K=F$E.getTexture(F$J,F$Z-F$e,0,F$e,F$$),F$A=this._weakKeys[1],F$K?(F$A!=F$K.weakKey&&(F$O.clearObject(this,F$A),F$O.keepObject(this,F$K.weakKey),this._weakKeys[1]=F$K.weakKey),this.drawTexture(F$K,F$y-F$e,0,F$e,F$$)):(F$O.clearObject(this,F$A),this._weakKeys[1]="")),F$G&&F$M&&(F$K=F$E.getTexture(F$J,0,F$m-F$M,F$G,F$M),F$A=this._weakKeys[2],F$K?(F$A!=F$K.weakKey&&(F$O.clearObject(this,F$A),F$O.keepObject(this,F$K.weakKey),this._weakKeys[2]=F$K.weakKey),this.drawTexture(F$K,0,F$T-F$M,F$G,F$M)):(F$O.clearObject(this,F$A),this._weakKeys[2]="")),F$e&&F$M&&(F$K=F$E.getTexture(F$J,F$Z-F$e,F$m-F$M,F$e,F$M),F$A=this._weakKeys[3],F$K?(F$A!=F$K.weakKey&&(F$O.clearObject(this,F$A),F$O.keepObject(this,F$K.weakKey),this._weakKeys[3]=F$K.weakKey),this.drawTexture(F$K,F$y-F$e,F$T-F$M,F$e,F$M)):(F$O.clearObject(this,F$A),this._weakKeys[3]="")),F$$&&(F$K=F$E.getTexture(F$J,F$G,0,F$Z-F$G-F$e,F$$),F$A=this._weakKeys[4],F$K?(F$A!=F$K.weakKey&&(F$O.clearObject(this,F$A),F$O.keepObject(this,F$K.weakKey),this._weakKeys[4]=F$K.weakKey),this.drawBitmap(F$B,F$K,F$G,0,F$y-F$G-F$e,F$$)):(F$O.clearObject(this,F$A),this._weakKeys[4]="")),F$M&&(F$K=F$E.getTexture(F$J,F$G,F$m-F$M,F$Z-F$G-F$e,F$M),F$A=this._weakKeys[5],F$K?(F$A!=F$K.weakKey&&(F$O.clearObject(this,F$A),F$O.keepObject(this,F$K.weakKey),this._weakKeys[5]=F$K.weakKey),this.drawBitmap(F$B,F$K,F$G,F$T-F$M,F$y-F$G-F$e,F$M)):(F$O.clearObject(this,F$A),this._weakKeys[5]="")),F$G&&(F$K=F$E.getTexture(F$J,0,F$$,F$G,F$m-F$$-F$M),F$A=this._weakKeys[6],F$K?(F$A!=F$K.weakKey&&(F$O.clearObject(this,F$A),F$O.keepObject(this,F$K.weakKey),this._weakKeys[6]=F$K.weakKey),this.drawBitmap(F$B,F$K,0,F$$,F$G,F$T-F$$-F$M)):(F$O.clearObject(this,F$A),this._weakKeys[6]="")),F$e&&(F$K=F$E.getTexture(F$J,F$Z-F$e,F$$,F$e,F$m-F$$-F$M),F$A=this._weakKeys[7],F$K?(F$A!=F$K.weakKey&&(F$O.clearObject(this,F$A),F$O.keepObject(this,F$K.weakKey),this._weakKeys[7]=F$K.weakKey),this.drawBitmap(F$B,F$K,F$y-F$e,F$$,F$e,F$T-F$$-F$M)):(F$O.clearObject(this,F$A),this._weakKeys[7]="")),F$K=F$E.getTexture(F$J,F$G,F$$,F$Z-F$G-F$e,F$m-F$$-F$M),F$A=this._weakKeys[8],F$K?(F$A!=F$K.weakKey&&(F$O.clearObject(this,F$A),F$O.keepObject(this,F$K.weakKey),this._weakKeys[8]=F$K.weakKey),this.drawBitmap(F$B,F$K,F$G,F$$,F$y-F$G-F$e,F$T-F$$-F$M)):(F$O.clearObject(this,F$A),this._weakKeys[8]=""),F$o&&this.restore(),this.autoCacheCmd&&!F$L.isConchApp&&(F$O.saveObject(F$R,this.cmds,null),this._weakKey=F$R,F$O.keepObject(this,this._weakKey))}this._repaint()}},F$J.drawBitmap=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$Z&&(F$Z=0),void 0===F$m&&(F$m=0),F$Z<.1||F$m<.1||(!F$J||F$y.width==F$Z&&F$y.height==F$m?this.drawTexture(F$y,F$T,F$V,F$Z,F$m):this.fillTexture(F$y,F$T,F$V,F$Z,F$m))},F$J.clear=function(F$J){void 0===F$J&&(F$J=!0),F$T.prototype.clear.call(this,!1)},F$R(0,F$J,"sizeGrid",function(){return this._sizeGrid},function(F$J){this._sizeGrid=F$J,this._setChanged()}),F$R(0,F$J,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(F$J){this._width!=F$J&&(this._width=F$J,this._setChanged())}),F$R(0,F$J,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(F$J){this._height!=F$J&&(this._height=F$J,this._setChanged())}),F$R(0,F$J,"source",function(){return this._source},function(F$J){F$J?(this._source=F$J,this._setChanged()):(this._source=null,this.clear())}),F$E.getTexture=function(F$J,F$y,F$T,F$V,F$Z){F$V<=0&&(F$V=1),F$Z<=0&&(F$Z=1),F$J.$_GID||(F$J.$_GID=F$q.getGID());var F$m=F$J.$_GID+"."+F$y+"."+F$T+"."+F$V+"."+F$Z,F$R=F$O.findObject(F$m);if((!F$R||!F$R.source)&&(F$R=F$l.createFromTexture(F$J,F$y,F$T,F$V,F$Z))){if(F$J.alphaTexture){var F$n=F$J.width/F$J.alphaTexture.width;F$R.alphaTexture=F$l.createFromTexture(F$J.alphaTexture,F$y/F$n,F$T/F$n,F$V/F$n,F$Z/F$n)}F$O.saveObject(F$m,F$R),F$R.weakKey=F$m}return F$R},F$E}(F$y),F$i=(function(F$J){function F$y(){F$y.__super.call(this)}F$m(F$y,"laya.ui.UIEvent",F$A),F$y.SHOW_TIP="showtip",F$y.HIDE_TIP="hidetip"}(),function(F$y){function F$J(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,F$J.__super.call(this),this._layout=F$D.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}F$m(F$J,"laya.ui.Component",F$y);var F$T=F$J.prototype;return F$o.imps(F$T,{"laya.ui.IComponent":!0}),F$T.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},F$T.preinitialize=function(){},F$T.createChildren=function(){},F$T.initialize=function(){},F$T.callLater=function(F$J,F$y){F$o.timer.callLater(this,F$J,F$y)},F$T.runCallLater=function(F$J){F$o.timer.runCallLater(this,F$J)},F$T.commitMeasure=function(){},F$T.changeSize=function(){this.event("resize")},F$T.getLayout=function(){return this._layout===F$D.EMPTY&&(this._layout=new F$D),this._layout},F$T._setLayoutEnabled=function(F$J){this._layout&&this._layout.enable!=F$J&&(this._layout.enable=F$J,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},F$T.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},F$T.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},F$T.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},F$T.resetLayoutX=function(){var F$J=this._layout;if(isNaN(F$J.anchorX)||(this.pivotX=F$J.anchorX*this.width),this.layoutEnabled){var F$y=this.parent;F$y&&(isNaN(F$J.centerX)?isNaN(F$J.left)?isNaN(F$J.right)||(this.x=Math.round(F$y.width-this.displayWidth-F$J.right+this.pivotX*this.scaleX)):(this.x=Math.round(F$J.left+this.pivotX*this.scaleX),isNaN(F$J.right)||(this.width=(F$y._width-F$J.left-F$J.right)/(this.scaleX||.01))):this.x=Math.round(.5*(F$y.width-this.displayWidth)+F$J.centerX+this.pivotX*this.scaleX))}},F$T.resetLayoutY=function(){var F$J=this._layout;if(isNaN(F$J.anchorY)||(this.pivotY=F$J.anchorY*this.height),this.layoutEnabled){var F$y=this.parent;F$y&&(isNaN(F$J.centerY)?isNaN(F$J.top)?isNaN(F$J.bottom)||(this.y=Math.round(F$y.height-this.displayHeight-F$J.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(F$J.top+this.pivotY*this.scaleY),isNaN(F$J.bottom)||(this.height=(F$y._height-F$J.top-F$J.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(F$y.height-this.displayHeight)+F$J.centerY+this.pivotY*this.scaleY))}},F$T.onMouseOver=function(F$J){F$o.stage.event("showtip",this._toolTip)},F$T.onMouseOut=function(F$J){F$o.stage.event("hidetip",this._toolTip)},F$R(0,F$T,"displayWidth",function(){return this.width*this.scaleX}),F$R(0,F$T,"width",function(){return this._width?this._width:this.measureWidth},function(F$J){this._width!=F$J&&(this._width=F$J,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),F$R(0,F$T,"measureWidth",function(){var F$J=0;this.commitMeasure();for(var F$y=this.numChildren-1;-1<F$y;F$y--){var F$T=this.getChildAt(F$y);F$T.visible&&(F$J=Math.max(F$T.x+F$T.width*F$T.scaleX,F$J))}return F$J}),F$R(0,F$T,"displayHeight",function(){return this.height*this.scaleY}),F$R(0,F$T,"height",function(){return this._height?this._height:this.measureHeight},function(F$J){this._height!=F$J&&(this._height=F$J,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),F$R(0,F$T,"dataSource",function(){return this._dataSource},function(F$J){for(var F$y in this._dataSource=F$J,this._dataSource)this.hasOwnProperty(F$y)&&"function"!=typeof this[F$y]&&(this[F$y]=this._dataSource[F$y])}),F$R(0,F$T,"scaleY",F$y.prototype._$get_scaleY,function(F$J){F$o.superGet(F$H,this,"scaleY")!=F$J&&(F$o.superSet(F$H,this,"scaleY",F$J),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),F$R(0,F$T,"measureHeight",function(){var F$J=0;this.commitMeasure();for(var F$y=this.numChildren-1;-1<F$y;F$y--){var F$T=this.getChildAt(F$y);F$T.visible&&(F$J=Math.max(F$T.y+F$T.height*F$T.scaleY,F$J))}return F$J}),F$R(0,F$T,"scaleX",F$y.prototype._$get_scaleX,function(F$J){F$o.superGet(F$H,this,"scaleX")!=F$J&&(F$o.superSet(F$H,this,"scaleX",F$J),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),F$R(0,F$T,"top",function(){return this._layout.top},function(F$J){F$J!=this._layout.top&&(this.getLayout().top=F$J,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$R(0,F$T,"bottom",function(){return this._layout.bottom},function(F$J){F$J!=this._layout.bottom&&(this.getLayout().bottom=F$J,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$R(0,F$T,"left",function(){return this._layout.left},function(F$J){F$J!=this._layout.left&&(this.getLayout().left=F$J,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$R(0,F$T,"right",function(){return this._layout.right},function(F$J){F$J!=this._layout.right&&(this.getLayout().right=F$J,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$R(0,F$T,"centerX",function(){return this._layout.centerX},function(F$J){F$J!=this._layout.centerX&&(this.getLayout().centerX=F$J,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$R(0,F$T,"centerY",function(){return this._layout.centerY},function(F$J){F$J!=this._layout.centerY&&(this.getLayout().centerY=F$J,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$R(0,F$T,"anchorX",function(){return this._layout.anchorX},function(F$J){F$J!=this._layout.anchorX&&(this.getLayout().anchorX=F$J,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$R(0,F$T,"anchorY",function(){return this._layout.anchorY},function(F$J){F$J!=this._layout.anchorY&&(this.getLayout().anchorY=F$J,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$R(0,F$T,"tag",function(){return this._tag},function(F$J){this._tag=F$J}),F$R(0,F$T,"toolTip",function(){return this._toolTip},function(F$J){this._toolTip!=F$J&&(null!=(this._toolTip=F$J)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),F$R(0,F$T,"comXml",function(){return this._comXml},function(F$J){this._comXml=F$J}),F$R(0,F$T,"gray",function(){return this._gray},function(F$J){F$J!==this._gray&&(this._gray=F$J,F$t.gray(this,F$J))}),F$R(0,F$T,"disabled",function(){return this._disabled},function(F$J){F$J!==this._disabled&&(this.gray=this._disabled=F$J,this.mouseEnabled=!F$J)}),F$J}(F$H)),F$c=function(F$J){function F$y(){this.lockLayer=null,this.popupEffect=function(F$J){F$J.scale(1,1),F$a.from(F$J,{x:F$o.stage.width/2,y:F$o.stage.height/2,scaleX:0,scaleY:0},300,F$K.backOut,F$M.create(this,this.doOpen,[F$J]))},this.closeEffect=function(F$J,F$y){F$a.to(F$J,{x:F$o.stage.width/2,y:F$o.stage.height/2,scaleX:0,scaleY:0},300,F$K.strongOut,F$M.create(this,this.doClose,[F$J,F$y]))},F$y.__super.call(this),this.maskLayer=new F$H,this.popupEffectHandler=F$M.create(this,this.popupEffect,null,!1),this.closeEffectHandler=F$M.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,F$o.stage.addChild(this),F$o.stage.on("resize",this,this._onResize),F$v.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}F$m(F$y,"laya.ui.DialogManager",F$H);var F$T=F$y.prototype;return F$T._closeOnSide=function(){var F$J=this.getChildAt(this.numChildren-1);F$J instanceof laya.ui.Dialog&&F$J.close("side")},F$T.setLockView=function(F$J){this.lockLayer||(this.lockLayer=new F$u,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(F$o.stage.width,F$o.stage.height)),this.lockLayer.removeChildren(),F$J&&(F$J.centerX=F$J.centerY=0,this.lockLayer.addChild(F$J))},F$T._onResize=function(F$J){var F$y=this.maskLayer.width=F$o.stage.width,F$T=this.maskLayer.height=F$o.stage.height;this.lockLayer&&this.lockLayer.size(F$y,F$T),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,F$y,F$T,F$v.popupBgColor),this.maskLayer.alpha=F$v.popupBgAlpha;for(var F$V=this.numChildren-1;-1<F$V;F$V--){var F$Z=this.getChildAt(F$V);F$Z.popupCenter&&this._centerDialog(F$Z)}},F$T._centerDialog=function(F$J){F$J.x=Math.round((F$o.stage.width-F$J.width>>1)+F$J.pivotX),F$J.y=Math.round((F$o.stage.height-F$J.height>>1)+F$J.pivotY)},F$T.open=function(F$J,F$y,F$T){void 0===F$y&&(F$y=!1),void 0===F$T&&(F$T=!1),F$y&&this._closeAll(),F$J.popupCenter&&this._centerDialog(F$J),this.addChild(F$J),(F$J.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),F$T&&null!=F$J.popupEffect?F$J.popupEffect.runWith(F$J):this.doOpen(F$J),this.event("open")},F$T.doOpen=function(F$J){F$J.onOpened()},F$T.lock=function(F$J){this.lockLayer&&(F$J?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},F$T.close=function(F$J,F$y,F$T){void 0===F$T&&(F$T=!1),F$T&&null!=F$J.closeEffect?F$J.closeEffect.runWith([F$J,F$y]):this.doClose(F$J,F$y),this.event("close")},F$T.doClose=function(F$J,F$y){F$J.removeSelf(),F$J.isModal&&this._checkMask(),F$J.closeHandler&&F$J.closeHandler.runWith(F$y),F$J.onClosed(F$y)},F$T.closeAll=function(){this._closeAll(),this.event("close")},F$T._closeAll=function(){for(var F$J=this.numChildren-1;-1<F$J;F$J--){var F$y=this.getChildAt(F$J);F$y&&null!=F$y.close&&this.doClose(F$y)}},F$T.getDialogsByGroup=function(F$J){for(var F$y=[],F$T=this.numChildren-1;-1<F$T;F$T--){var F$V=this.getChildAt(F$T);F$V&&F$V.group===F$J&&F$y.push(F$V)}return F$y},F$T.closeByGroup=function(F$J){for(var F$y=[],F$T=this.numChildren-1;-1<F$T;F$T--){var F$V=this.getChildAt(F$T);F$V&&F$V.group===F$J&&(F$V.close(),F$y.push(F$V))}return F$y},F$T._checkMask=function(){this.maskLayer.removeSelf();for(var F$J=this.numChildren-1;-1<F$J;F$J--){var F$y=this.getChildAt(F$J);if(F$y&&F$y.isModal)return void this.addChildAt(this.maskLayer,F$J)}},F$y}(),F$u=function(F$J){function F$y(){F$y.__super.call(this)}F$m(F$y,"laya.ui.Box",F$J);var F$T=F$y.prototype;return F$o.imps(F$T,{"laya.ui.IBox":!0}),F$R(0,F$T,"dataSource",F$J.prototype._$get_dataSource,function(F$J){for(var F$y in this._dataSource=F$J){var F$T=this.getChildByName(F$y);F$T?F$T.dataSource=F$J[F$y]:this.hasOwnProperty(F$y)&&"function"!=typeof this[F$y]&&(this[F$y]=F$J[F$y])}}),F$y}(F$i),F$x=function(F$y){function F$T(F$J,F$y){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,F$T.__super.call(this),this._labelColors=F$_.buttonLabelColors,this._stateNum=F$_.buttonStateNum,void 0===F$y&&(F$y=""),this.skin=F$J,this.label=F$y}F$m(F$T,"laya.ui.Button",F$y);var F$J=F$T.prototype;return F$o.imps(F$J,{"laya.ui.ISelect":!0}),F$J.destroy=function(F$J){this.clearEvent(),F$O.clearCache(this,this._skin),F$O.clearObject(this,this._weakKey),void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(F$J),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},F$J.clearEvent=function(){this._skin&&F$Z.atalsNotify&&F$Z.atalsNotify.off(this._skin,this,this._setBtnSource)},F$J.createChildren=function(){this.graphics=this._bitmap=new F$Q},F$J.createText=function(){this._text||(this._text=new F$P,this._text.overflow=F$P.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},F$J.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},F$J.onMouse=function(F$J){if(!1!==this.toggle||!this._selected)return"click"===F$J.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=F$T.stateMap[F$J.type]))},F$J.changeClips=function(){var F$J=F$O.getRes(this._skin);if(F$J)if(this._skin&&""!=this._skin){F$O.clearObject(this,this._weakKey);var F$y=F$J.sourceWidth,F$T=F$J.sourceHeight/this._stateNum;F$J.$_GID||(F$J.$_GID=F$q.getGID());var F$V=F$J.$_GID+"-"+this._stateNum,F$Z=F$O.findObject(F$V);if(F$q.isOkTextureList(F$Z)||(F$Z=null),F$Z)this._weakKey=F$V,F$O.keepObject(this,this._weakKey),this._sources=F$Z;else{if(this._sources=[],1===this._stateNum)this._sources.push(F$J);else for(var F$m=0;F$m<this._stateNum;F$m++){var F$R=F$l.createFromTexture(F$J,0,F$T*F$m,F$y,F$T);if(F$J.alphaTexture){var F$n=F$J.width/F$J.alphaTexture.width;F$R.alphaTexture=F$l.createFromTexture(F$J.alphaTexture,0/F$n,F$T*F$m/F$n,F$y/F$n,F$T/F$n)}this._sources.push(F$R)}F$O.saveObject(F$V,this._sources),this._weakKey=F$V,F$O.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||F$y,this._bitmap.height=this._height||F$T,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=F$y)}else console.warn("lose skin ",this._skin,this.name,this.__className)},F$J.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var F$J=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[F$J]),this.label&&(this._text.color=this._labelColors[F$J],this._strokeColors&&(this._text.strokeColor=this._strokeColors[F$J]))},F$J._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},F$R(0,F$J,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(F$J){this.createText(),this._text.strokeColor=F$J}),F$R(0,F$J,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),F$R(0,F$J,"skin",function(){return this._skin},function(F$J){if(this._skin!=F$J)if(this.clearEvent(),F$O.clearCache(this,this._skin),this._skin=F$J,F$O.keepCache(this,this._skin),F$O.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var F$y=F$Z.resAtalsObj&&F$Z.resAtalsObj[this._skin];F$y?(F$Z.atalsNotify&&F$Z.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=F$y.sourceW),0==this.height&&(this.height=F$y.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),F$J._setBtnSource=function(F$J,F$y){F$J===this._skin&&F$y&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},F$R(0,F$J,"state",function(){return this._state},function(F$J){this._state!=F$J&&(this._state=F$J,this._setStateChanged())}),F$R(0,F$J,"text",function(){return this.createText(),this._text}),F$R(0,F$J,"stateNum",function(){return this._stateNum},function(F$J){"string"==typeof F$J&&(F$J=parseInt(F$J)),this._stateNum!=F$J&&(this._stateNum=F$J<1?1:3<F$J?3:F$J,this.callLater(this.changeClips))}),F$R(0,F$J,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(F$J){this._strokeColors=F$t.fillArray(F$_.buttonLabelColors,F$J,String),this._setStateChanged()}),F$R(0,F$J,"labelColors",function(){return this._labelColors.join(",")},function(F$J){this._labelColors=F$t.fillArray(F$_.buttonLabelColors,F$J,String),this._setStateChanged()}),F$R(0,F$J,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),F$R(0,F$J,"label",function(){return this._text?this._text.text:null},function(F$J){(this._text||F$J)&&(this.createText(),this._text.text!=F$J&&(F$J&&!this._text.parent&&this.addChild(this._text),this._text.text=(F$J+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),F$R(0,F$J,"selected",function(){return this._selected},function(F$J){this._selected!=F$J&&(this._selected=F$J,this.state=this._selected?2:0,this.event("change"))}),F$R(0,F$J,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(F$J){this.createText(),this._text.padding=F$t.fillArray(F$_.labelPadding,F$J,Number)}),F$R(0,F$J,"labelSize",function(){return this.createText(),this._text.fontSize},function(F$J){this.createText(),this._text.fontSize=F$J}),F$R(0,F$J,"labelStroke",function(){return this.createText(),this._text.stroke},function(F$J){this.createText(),this._text.stroke=F$J}),F$R(0,F$J,"labelBold",function(){return this.createText(),this._text.bold},function(F$J){this.createText(),this._text.bold=F$J}),F$R(0,F$J,"labelFont",function(){return this.createText(),this._text.font},function(F$J){this.createText(),this._text.font=F$J}),F$R(0,F$J,"labelAlign",function(){return this.createText(),this._text.align},function(F$J){this.createText(),this._text.align=F$J}),F$R(0,F$J,"clickHandler",function(){return this._clickHandler},function(F$J){this._clickHandler=F$J}),F$R(0,F$J,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$J){this._bitmap.sizeGrid=F$t.fillArray(F$_.defaultSizeGrid,F$J,Number)}),F$R(0,F$J,"width",F$y.prototype._$get_width,function(F$J){F$o.superSet(F$i,this,"width",F$J),this._autoSize&&(this._bitmap.width=F$J,this._text&&(this._text.width=F$J))}),F$R(0,F$J,"height",F$y.prototype._$get_height,function(F$J){F$o.superSet(F$i,this,"height",F$J),this._autoSize&&(this._bitmap.height=F$J,this._text&&(this._text.height=F$J))}),F$R(0,F$J,"dataSource",F$y.prototype._$get_dataSource,function(F$J){"number"==typeof(this._dataSource=F$J)||"string"==typeof F$J?this.label=F$J+"":F$o.superSet(F$i,this,"dataSource",F$J)}),F$R(0,F$J,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(F$J){this._bitmap._offset=F$J?F$t.fillArray([1,1],F$J,Number):[]}),F$V(F$T,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),F$T}(F$i),F$k=function(F$y){function F$V(F$J,F$y,F$T){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,F$V.__super.call(this),void 0===F$y&&(F$y=1),void 0===F$T&&(F$T=1),this._clipX=F$y,this._clipY=F$T,this.skin=F$J}F$m(F$V,"laya.ui.Clip",F$y);var F$J=F$V.prototype;return F$J.destroy=function(F$J){this.clearEvent(),this.clearLoad(),F$O.clearCache(this,this._skin),F$O.clearObject(this,this._weakKey),void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},F$J.dispose=function(){this.destroy(!0),F$o.loader.clearRes(this._skin)},F$J.createChildren=function(){this.graphics=this._bitmap=new F$Q},F$J._onDisplay=function(F$J){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},F$J.changeClip=function(){if(this._clipChanged=!1,this._skin){var F$J=F$O.getRes(this._skin);if(F$J)this.loadComplete(this._skin,F$J);else{if(F$Z.resAtalsObj&&F$Z.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=F$M.create(this,this.loadComplete,[this._skin]),this._progress=null,F$o.loader.load(this._skin,this._complete,this._progress)}}},F$J.loadComplete=function(F$J,F$y){if(F$J===this._skin&&F$y){F$O.clearObject(this,this._weakKey);var F$T=this._clipWidth||Math.ceil(F$y.sourceWidth/this._clipX),F$V=this._clipHeight||Math.ceil(F$y.sourceHeight/this._clipY),F$Z=this._skin+F$T+F$V,F$m=F$O.findObject(F$Z);if(F$q.isOkTextureList(F$m)||(F$m=null),F$m)this._weakKey=F$Z,F$O.keepObject(this,this._weakKey),this._sources=F$m;else{this._sources=[];for(var F$R=0;F$R<this._clipY;F$R++)for(var F$n=0;F$n<this._clipX;F$n++){var F$K=F$l.createFromTexture(F$y,F$T*F$n,F$V*F$R,F$T,F$V);if(F$y.alphaTexture){var F$A=F$y.width/F$y.alphaTexture.width;F$K.alphaTexture=F$l.createFromTexture(F$y.alphaTexture,F$T*F$n/F$A,F$V*F$R/F$A,F$T/F$A,F$V/F$A)}this._sources.push(F$K)}F$O.saveObject(F$Z,this._sources),this._weakKey=F$Z,F$O.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},F$J.play=function(F$J,F$y){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=-1),this._isPlaying=!0,this.index=F$J,this._toIndex=F$y,this._index++,F$o.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},F$J._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},F$J.stop=function(){this._isPlaying=!1,F$o.timer.clear(this,this._loop),this.event("complete")},F$J._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},F$R(0,F$J,"interval",function(){return this._interval},function(F$J){this._interval!=F$J&&(this._interval=F$J,this._isPlaying&&this.play())}),F$J.clearEvent=function(){this._skin&&F$Z.atalsNotify&&F$Z.atalsNotify.off(this._skin,this,this._setBtnSource)},F$J.clearLoad=function(){this._skin&&((this._complete||this._progress)&&F$o.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},F$R(0,F$J,"skin",function(){return this._skin},function(F$J){if(this._skin!=F$J)if(this.clearLoad(),this.clearEvent(),F$O.clearCache(this,this._skin),this._skin=F$J){F$O.keepCache(this,this._skin);var F$y=F$O.getRes(F$J),F$T=F$Z.resAtalsObj&&F$Z.resAtalsObj[this._skin];!F$y&&F$T?F$Z.atalsNotify&&F$Z.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),F$J._setBtnSource=function(F$J,F$y){F$J===this._skin&&F$y&&(this.loadComplete(F$J,F$y),this.clearEvent())},F$R(0,F$J,"sources",function(){return this._sources},function(F$J){this._sources=F$J,this.index=this._index,this.event("loaded")}),F$R(0,F$J,"clipX",function(){return this._clipX},function(F$J){this._clipX=F$J||1,this._setClipChanged()}),F$R(0,F$J,"clipY",function(){return this._clipY},function(F$J){this._clipY=F$J||1,this._setClipChanged()}),F$R(0,F$J,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),F$R(0,F$J,"clipWidth",function(){return this._clipWidth},function(F$J){this._clipWidth=F$J,this._setClipChanged()}),F$R(0,F$J,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$J){this._bitmap.sizeGrid=F$t.fillArray(F$_.defaultSizeGrid,F$J,Number)}),F$R(0,F$J,"group",function(){return this._group},function(F$J){F$J&&this._skin&&F$O.setGroup(this._skin,F$J),this._group=F$J}),F$R(0,F$J,"clipHeight",function(){return this._clipHeight},function(F$J){this._clipHeight=F$J,this._setClipChanged()}),F$R(0,F$J,"width",F$y.prototype._$get_width,function(F$J){F$o.superSet(F$i,this,"width",F$J),this._bitmap.width=F$J}),F$R(0,F$J,"height",F$y.prototype._$get_height,function(F$J){F$o.superSet(F$i,this,"height",F$J),this._bitmap.height=F$J}),F$R(0,F$J,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),F$R(0,F$J,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),F$R(0,F$J,"index",function(){return this._index},function(F$J){this._index=F$J,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[F$J]),this.event("change")}),F$R(0,F$J,"autoPlay",function(){return this._autoPlay},function(F$J){this._autoPlay!=F$J&&((this._autoPlay=F$J)?this.play():this.stop())}),F$R(0,F$J,"isPlaying",function(){return this._isPlaying},function(F$J){this._isPlaying=F$J}),F$R(0,F$J,"dataSource",F$y.prototype._$get_dataSource,function(F$J){"number"==typeof(this._dataSource=F$J)&&Math.floor(F$J)==F$J||"string"==typeof F$J?this.index=parseInt(F$J):F$o.superSet(F$i,this,"dataSource",F$J)}),F$R(0,F$J,"bitmap",function(){return this._bitmap}),F$V}(F$i),F$X=function(F$y){function F$J(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,F$J.__super.call(this)}F$m(F$J,"laya.ui.ColorPicker",F$y);var F$T=F$J.prototype;return F$T.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._colorPanel&&this._colorPanel.destroy(F$J),this._colorButton&&this._colorButton.destroy(F$J),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},F$T.createChildren=function(){this.addChild(this._colorButton=new F$x),this._colorPanel=new F$u,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new F$H),this._colorPanel.addChild(this._colorBlock=new F$H),this._colorPanel.addChild(this._colorInput=new F$G)},F$T.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},F$T.onPanelMouseDown=function(F$J){F$J.stopPropagation()},F$T.changePanel=function(){this._panelChanged=!1;var F$J=this._colorPanel.graphics;F$J.clear(),F$J.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(F$J=this._colorTiles.graphics).clear();for(var F$y=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],F$T=0;F$T<12;F$T++)for(var F$V=0;F$V<20;F$V++){var F$Z=0;F$Z=0===F$V?F$y[F$T]:1===F$V?0:51*(((3*F$T+F$V/6)%3<<0)+3*(F$T/6<<0))<<16|F$V%6*51<<8|(F$T<<0)%6*51;var F$m=F$t.toColor(F$Z);this._colors.push(F$m);var F$R=F$V*this._gridSize,F$n=F$T*this._gridSize;F$J.drawRect(F$R,F$n,this._gridSize,this._gridSize,F$m,"#000000")}},F$T.onColorButtonClick=function(F$J){this._colorPanel.parent?this.close():this.open()},F$T.open=function(){var F$J=this.localToGlobal(new F$B),F$y=F$J.x+this._colorPanel.width<=F$o.stage.width?F$J.x:F$o.stage.width-this._colorPanel.width,F$T=F$J.y+this._colorButton.height;F$T=F$T+this._colorPanel.height<=F$o.stage.height?F$T:F$J.y-this._colorPanel.height,this._colorPanel.pos(F$y,F$T),this._colorPanel.zOrder=1001,F$o._currentStage.addChild(this._colorPanel),F$o.stage.on("mousedown",this,this.removeColorBox)},F$T.close=function(){F$o.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},F$T.removeColorBox=function(F$J){this.close()},F$T.onColorFieldKeyDown=function(F$J){13==F$J.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),F$J.stopPropagation())},F$T.onColorInputChange=function(F$J){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},F$T.onColorTilesClick=function(F$J){this.selectedColor=this.getColorByMouse(),this.close()},F$T.onColorTilesMouseMove=function(F$J){this._colorInput.focus=!1;var F$y=this.getColorByMouse();this._colorInput.text=F$y,this.drawBlock(F$y)},F$T.getColorByMouse=function(){var F$J=this._colorTiles.getMousePoint(),F$y=Math.floor(F$J.x/this._gridSize),F$T=Math.floor(F$J.y/this._gridSize);return this._colors[20*F$T+F$y]},F$T.drawBlock=function(F$J){var F$y=this._colorBlock.graphics;F$y.clear();var F$T=F$J||"#ffffff";F$y.drawRect(0,0,50,20,F$T,this._borderColor),F$J||F$y.drawLine(0,0,50,20,"#ff0000")},F$T.changeColor=function(){var F$J=this.graphics;F$J.clear();var F$y=this._selectedColor||"#000000";F$J.drawRect(0,0,this._colorButton.width,this._colorButton.height,F$y)},F$T._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},F$R(0,F$T,"inputBgColor",function(){return this._inputBgColor},function(F$J){this._inputBgColor=F$J,this._setPanelChanged()}),F$R(0,F$T,"selectedColor",function(){return this._selectedColor},function(F$J){this._selectedColor!=F$J&&(this._selectedColor=this._colorInput.text=F$J,this.drawBlock(F$J),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",F$A.EMPTY.setTo("change",this,this)))}),F$R(0,F$T,"skin",function(){return this._colorButton.skin},function(F$J){this._colorButton.skin=F$J,this.changeColor()}),F$R(0,F$T,"bgColor",function(){return this._bgColor},function(F$J){this._bgColor=F$J,this._setPanelChanged()}),F$R(0,F$T,"borderColor",function(){return this._borderColor},function(F$J){this._borderColor=F$J,this._setPanelChanged()}),F$R(0,F$T,"inputColor",function(){return this._inputColor},function(F$J){this._inputColor=F$J,this._setPanelChanged()}),F$J}(F$i),F$S=function(F$y){function F$T(F$J,F$y){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,F$T.__super.call(this),this._itemColors=F$_.comboBoxItemColors,this.skin=F$J,this.labels=F$y}F$m(F$T,"laya.ui.ComboBox",F$y);var F$J=F$T.prototype;return F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._button&&this._button.destroy(F$J),this._list&&this._list.destroy(F$J),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},F$J.createChildren=function(){this.addChild(this._button=new F$x),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},F$J._createList=function(){this._list=new F$h,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},F$J._setListEvent=function(F$J){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=F$M.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},F$J.onListDown=function(F$J){F$J.stopPropagation()},F$J.onScrollBarDown=function(F$J){F$J.stopPropagation()},F$J.onButtonMouseDown=function(F$J){this.callLater(this.switchTo,[!this._isOpen])},F$J.changeList=function(){this._listChanged=!1;var F$J=this.width-2,F$y=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:F$J,height:this._itemHeight,fontSize:this._itemSize,color:F$y}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},F$J.onlistItemMouse=function(F$J,F$y){var F$T=F$J.type;if("mouseover"===F$T||"mouseout"===F$T){if(this._isCustomList)return;var F$V=this._list.getCell(F$y);if(!F$V)return;var F$Z=F$V.getChildByName("label");F$Z&&("mouseover"===F$T?(F$Z.bgColor=this._itemColors[0],F$Z.color=this._itemColors[1]):(F$Z.bgColor=null,F$Z.color=this._itemColors[2]))}else"click"===F$T&&(this.selectedIndex=F$y,this.isOpen=!1)},F$J.switchTo=function(F$J){this.isOpen=F$J},F$J.changeOpen=function(){this.isOpen=!this._isOpen},F$J.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var F$J=this._list.graphics;F$J.clear(),F$J.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var F$y=this._list.array||[],F$T=F$y.length=0,F$V=this._labels.length;F$T<F$V;F$T++)F$y.push({label:this._labels[F$T]});this._list.height=this._listHeight,this._list.array=F$y},F$J.changeSelected=function(){this._button.label=this.selectedLabel},F$J._onStageMouseWheel=function(F$J){this._list&&!this._list.contains(F$J.target)&&this.removeList(null)},F$J.removeList=function(F$J){F$o.stage.off("mousedown",this,this.removeList),F$o.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},F$R(0,F$J,"selectedIndex",function(){return this._selectedIndex},function(F$J){this._selectedIndex!=F$J&&(this._selectedIndex=F$J,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[F$A.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),F$R(0,F$J,"measureHeight",function(){return this._button.height}),F$R(0,F$J,"skin",function(){return this._button.skin},function(F$J){this._button.skin!=F$J&&(this._button.skin=F$J,this._listChanged=!0)}),F$R(0,F$J,"measureWidth",function(){return this._button.width}),F$R(0,F$J,"width",F$y.prototype._$get_width,function(F$J){F$o.superSet(F$i,this,"width",F$J),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),F$R(0,F$J,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(F$J){this.selectedIndex=this._labels.indexOf(F$J)}),F$R(0,F$J,"labels",function(){return this._labels.join(",")},function(F$J){0<this._labels.length&&(this.selectedIndex=-1),F$J?this._labels=F$J.split(","):this._labels.length=0,this._itemChanged=!0}),F$R(0,F$J,"height",F$y.prototype._$get_height,function(F$J){F$o.superSet(F$i,this,"height",F$J),this._button.height=this._height}),F$R(0,F$J,"selectHandler",function(){return this._selectHandler},function(F$J){this._selectHandler=F$J}),F$R(0,F$J,"visibleNum",function(){return this._visibleNum},function(F$J){this._visibleNum=F$J,this._listChanged=!0}),F$R(0,F$J,"labelBold",function(){return this._button.text.bold},function(F$J){this._button.text.bold=F$J}),F$R(0,F$J,"itemColors",function(){return String(this._itemColors)},function(F$J){this._itemColors=F$t.fillArray(this._itemColors,F$J,String),this._listChanged=!0}),F$R(0,F$J,"itemSize",function(){return this._itemSize},function(F$J){this._itemSize=F$J,this._listChanged=!0}),F$R(0,F$J,"scrollBar",function(){return this.list.scrollBar}),F$R(0,F$J,"isOpen",function(){return this._isOpen},function(F$J){if(this._isOpen!=F$J)if(this._isOpen=F$J,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var F$y=this.localToGlobal(F$B.TEMP.setTo(0,0)),F$T=F$y.y+this._button.height;F$T=F$T+this._listHeight<=F$o.stage.height?F$T:F$y.y-this._listHeight,this._list.pos(F$y.x,F$T),this._list.zOrder=1001,F$o._currentStage.addChild(this._list),F$o.stage.once("mousedown",this,this.removeList),F$o.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),F$R(0,F$J,"scrollBarSkin",function(){return this._scrollBarSkin},function(F$J){this._scrollBarSkin=F$J}),F$R(0,F$J,"sizeGrid",function(){return this._button.sizeGrid},function(F$J){this._button.sizeGrid=F$J}),F$R(0,F$J,"button",function(){return this._button}),F$R(0,F$J,"list",function(){return this._list||this._createList(),this._list},function(F$J){F$J&&(F$J.removeSelf(),this._isCustomList=!0,this._list=F$J,this._setListEvent(F$J),this._itemHeight=F$J.getCell(0).height+F$J.spaceY)}),F$R(0,F$J,"dataSource",F$y.prototype._$get_dataSource,function(F$J){"number"==typeof(this._dataSource=F$J)&&Math.floor(F$J)==F$J||"string"==typeof F$J?this.selectedIndex=parseInt(F$J):F$J instanceof Array?this.labels=F$J.join(","):F$o.superSet(F$i,this,"dataSource",F$J)}),F$R(0,F$J,"labelColors",function(){return this._button.labelColors},function(F$J){this._button.labelColors!=F$J&&(this._button.labelColors=F$J)}),F$R(0,F$J,"labelPadding",function(){return this._button.text.padding.join(",")},function(F$J){this._button.text.padding=F$t.fillArray(F$_.labelPadding,F$J,Number)}),F$R(0,F$J,"labelSize",function(){return this._button.text.fontSize},function(F$J){this._button.text.fontSize=F$J}),F$R(0,F$J,"labelFont",function(){return this._button.text.font},function(F$J){this._button.text.font=F$J}),F$R(0,F$J,"stateNum",function(){return this._button.stateNum},function(F$J){this._button.stateNum=F$J}),F$T}(F$i),F$f=function(F$y){function F$T(F$J){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,F$T.__super.call(this),this._showButtons=F$v.showButtons,this._touchScrollEnable=F$v.touchScrollEnable,this._mouseWheelEnable=F$v.mouseWheelEnable,this.skin=F$J,this.max=1}F$m(F$T,"laya.ui.ScrollBar",F$y);var F$J=F$T.prototype;return F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),this.stopScroll(),this.target=null,F$y.prototype.destroy.call(this,F$J),this.upButton&&this.upButton.destroy(F$J),this.downButton&&this.downButton.destroy(F$J),this.slider&&this.slider.destroy(F$J),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},F$J.createChildren=function(){this.addChild(this.slider=new F$W),this.addChild(this.upButton=new F$x),this.addChild(this.downButton=new F$x)},F$J.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},F$J.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},F$J.onButtonMouseDown=function(F$J){var F$y=F$J.currentTarget===this.upButton;this.slide(F$y),F$o.timer.once(F$_.scrollBarDelayTime,this,this.startLoop,[F$y]),F$o.stage.once("mouseup",this,this.onStageMouseUp)},F$J.startLoop=function(F$J){F$o.timer.frameLoop(1,this,this.slide,[F$J])},F$J.slide=function(F$J){F$J?this.value-=this._scrollSize:this.value+=this._scrollSize},F$J.onStageMouseUp=function(F$J){F$o.timer.clear(this,this.startLoop),F$o.timer.clear(this,this.slide)},F$J.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},F$J.changeSize=function(){F$y.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},F$J.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},F$J.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},F$J.setScroll=function(F$J,F$y,F$T){this.runCallLater(this.changeSize),this.slider.setSlider(F$J,F$y,F$T),this.slider.bar.visible=0<F$y,!this._hide&&this.autoHide&&(this.visible=!1)},F$J.onTargetMouseWheel=function(F$J){this.value-=F$J.delta*this._scrollSize,this.target=this._target},F$J.onTargetMouseDown=function(F$J){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new F$B),this._lastPoint.setTo(F$o.stage.mouseX,F$o.stage.mouseY),F$o.timer.clear(this,this.tweenMove),F$a.clearTween(this),F$o.stage.once("mouseup",this,this.onStageMouseUp2),F$o.stage.once("mouseout",this,this.onStageMouseUp2),F$o.timer.frameLoop(1,this,this.loop)},F$J.loop=function(){var F$J=F$o.stage.mouseY,F$y=F$o.stage.mouseX;if(this._lastOffset=this.isVertical?F$J-this._lastPoint.y:F$y-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?F$o.stage._canvasTransform.getScaleY():F$o.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=F$y,this._lastPoint.y=F$J,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},F$J.onStageMouseUp2=function(F$J){if(F$o.stage.off("mouseup",this,this.onStageMouseUp2),F$o.stage.off("mouseout",this,this.onStageMouseUp2),F$o.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?F$a.to(this,{value:this.min},this.elasticBackTime,F$K.sineOut,F$M.create(this,this.elasticOver)):this._value>this.max&&F$a.to(this,{value:this.max},this.elasticBackTime,F$K.sineOut,F$M.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?F$o.stage.mouseY-this._lastPoint.y:F$o.stage.mouseX-this._lastPoint.x);for(var F$y=0,F$T=Math.min(this._offsets.length,3),F$V=0;F$V<F$T;F$V++)F$y+=this._offsets[this._offsets.length-1-F$V];if(this._lastOffset=F$y/F$T,(F$y=Math.abs(this._lastOffset))<2)return void this.event("end");60<F$y&&(this._lastOffset=0<this._lastOffset?60:-60);var F$Z=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));F$o.timer.frameLoop(1,this,this.tweenMove,[F$Z])}},F$J.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&F$a.to(this,{alpha:0},500),this.event("end")},F$J.tweenMove=function(F$J){this._lastOffset*=this.rollRatio;var F$y=NaN;if(0<F$J&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,F$y=.5*-(this.min-F$J-this.value),this._lastOffset>F$y&&(this._lastOffset=F$y)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,F$y=.5*-(this.max+F$J-this.value),this._lastOffset<F$y&&(this._lastOffset=F$y))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(F$o.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?F$a.to(this,{value:this.min},this.elasticBackTime,F$K.sineOut,F$M.create(this,this.elasticOver)):this._value>this.max?F$a.to(this,{value:this.max},this.elasticBackTime,F$K.sineOut,F$M.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&F$a.to(this,{alpha:0},500)}},F$J.stopScroll=function(){this.onStageMouseUp2(null),F$o.timer.clear(this,this.tweenMove),F$a.clearTween(this)},F$R(0,F$J,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),F$R(0,F$J,"skin",function(){return this._skin},function(F$J){this._skin!=F$J&&(this._skin=F$J,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),F$R(0,F$J,"max",function(){return this.slider.max},function(F$J){this.slider.max=F$J}),F$R(0,F$J,"showButtons",function(){return this._showButtons},function(F$J){this._showButtons=F$J,this.callLater(this.changeScrollBar)}),F$R(0,F$J,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),F$R(0,F$J,"min",function(){return this.slider.min},function(F$J){this.slider.min=F$J}),F$R(0,F$J,"value",function(){return this._value},function(F$J){F$J!==this._value&&(this._value=F$J,this._isElastic||(this.slider._value!=F$J&&(this.slider._value=F$J,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),F$R(0,F$J,"isVertical",function(){return this.slider.isVertical},function(F$J){this.slider.isVertical=F$J}),F$R(0,F$J,"sizeGrid",function(){return this.slider.sizeGrid},function(F$J){this.slider.sizeGrid=F$J}),F$R(0,F$J,"scrollSize",function(){return this._scrollSize},function(F$J){this._scrollSize=F$J}),F$R(0,F$J,"dataSource",F$y.prototype._$get_dataSource,function(F$J){"number"==typeof(this._dataSource=F$J)||"string"==typeof F$J?this.value=Number(F$J):F$o.superSet(F$i,this,"dataSource",F$J)}),F$R(0,F$J,"thumbPercent",function(){return this._thumbPercent},function(F$J){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),F$J=1<=F$J?.99:F$J,this._thumbPercent=F$J,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*F$J,F$_.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*F$J,F$_.scrollBarMinNum))}),F$R(0,F$J,"target",function(){return this._target},function(F$J){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=F$J)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),F$R(0,F$J,"hide",function(){return this._hide},function(F$J){this._hide=F$J,this.visible=!F$J}),F$R(0,F$J,"touchScrollEnable",function(){return this._touchScrollEnable},function(F$J){this._touchScrollEnable=F$J,this.target=this._target}),F$R(0,F$J,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(F$J){this._mouseWheelEnable=F$J,this.target=this._target}),F$R(0,F$J,"tick",function(){return this.slider.tick},function(F$J){this.slider.tick=F$J}),F$T}(F$i),F$W=function(F$y){function F$T(F$J){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,F$T.__super.call(this),this.skin=F$J}F$m(F$T,"laya.ui.Slider",F$y);var F$J=F$T.prototype;return F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._bg&&this._bg.destroy(F$J),this._bar&&this._bar.destroy(F$J),this._progress&&this._progress.destroy(F$J),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},F$J.createChildren=function(){this.addChild(this._bg=new F$I),this.addChild(this._bar=new F$x)},F$J.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},F$J.onBarMouseDown=function(F$J){this._globalSacle||(this._globalSacle=new F$B),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=F$o.stage.mouseX,this._ty=F$o.stage.mouseY,F$o.stage.on("mousemove",this,this.mouseMove),F$o.stage.once("mouseup",this,this.mouseUp),F$o.stage.once("mouseout",this,this.mouseUp),this.showValueText()},F$J.showValueText=function(){if(this.showLabel){var F$J=laya.ui.Slider.label;this.addChild(F$J),F$J.textField.changeText(this._value+""),this.isVertical?(F$J.x=this._bar.x+20,F$J.y=.5*(this._bar.height-F$J.height)+this._bar.y):(F$J.y=this._bar.y-20,F$J.x=.5*(this._bar.width-F$J.width)+this._bar.x)}},F$J.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},F$J.mouseUp=function(F$J){F$o.stage.off("mousemove",this,this.mouseMove),F$o.stage.off("mouseup",this,this.mouseUp),F$o.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},F$J.mouseMove=function(F$J){var F$y=this._value;this.isVertical?(this._bar.y+=(F$o.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(F$o.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=F$o.stage.mouseX,this._ty=F$o.stage.mouseY;var F$T=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*F$T)/F$T,this._value!=F$y&&this.sendChangeEvent(),this.showValueText()},F$J.sendChangeEvent=function(F$J){void 0===F$J&&(F$J="change"),this.event(F$J),this.changeHandler&&this.changeHandler.runWith(this._value)},F$J.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},F$J.changeSize=function(){F$y.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},F$J.setSlider=function(F$J,F$y,F$T){this._value=-1,this._min=F$J,this._max=F$J<F$y?F$y:F$J,this.value=F$T<F$J?F$J:F$y<F$T?F$y:F$T},F$J.changeValue=function(){var F$J=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*F$J)/F$J,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var F$y=this._max-this._min;0===F$y&&(F$y=1),this.isVertical?(this._bar.y=(this._value-this._min)/F$y*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/F$y*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},F$J.onBgMouseDown=function(F$J){var F$y=this._bg.getMousePoint();this.isVertical?this.value=F$y.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=F$y.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},F$R(0,F$J,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),F$R(0,F$J,"skin",function(){return this._skin},function(F$J){if(this._skin!=F$J){this._skin=F$J,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var F$y=this._skin.replace(".png","$progress.png");F$O.getRes(F$y)&&(this._progress||(this.addChild(this._progress=new F$I),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=F$y),this.setBarPoint(),this.callLater(this.changeValue)}}),F$R(0,F$J,"allowClickBack",function(){return this._allowClickBack},function(F$J){this._allowClickBack!=F$J&&((this._allowClickBack=F$J)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),F$R(0,F$J,"max",function(){return this._max},function(F$J){this._max!=F$J&&(this._max=F$J,this.callLater(this.changeValue))}),F$R(0,F$J,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),F$R(0,F$J,"tick",function(){return this._tick},function(F$J){this._tick!=F$J&&(this._tick=F$J,this.callLater(this.changeValue))}),F$R(0,F$J,"sizeGrid",function(){return this._bg.sizeGrid},function(F$J){this._bg.sizeGrid=F$J,this._bar.sizeGrid=F$J,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),F$R(0,F$J,"min",function(){return this._min},function(F$J){this._min!=F$J&&(this._min=F$J,this.callLater(this.changeValue))}),F$R(0,F$J,"value",function(){return this._value},function(F$J){if(this._value!=F$J){var F$y=this._value;this._value=F$J,this.changeValue(),this._value!=F$y&&this.sendChangeEvent()}}),F$R(0,F$J,"dataSource",F$y.prototype._$get_dataSource,function(F$J){"number"==typeof(this._dataSource=F$J)||"string"==typeof F$J?this.value=Number(F$J):F$o.superSet(F$i,this,"dataSource",F$J)}),F$R(0,F$J,"bar",function(){return this._bar}),F$V(F$T,["label",function(){return this.label=new F$Y}]),F$T}(F$i),F$I=function(F$y){function F$T(F$J){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,F$T.__super.call(this),this.skin=F$J}F$m(F$T,"laya.ui.Image",F$y);var F$J=F$T.prototype;return F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,F$O.clearCache(this,this._skin)},F$J.dispose=function(){this.destroy(!0),F$O.clearCache(this,this._skin),this.clearEvent()},F$J.createChildren=function(){this.graphics=this._bitmap=new F$Q},F$J.setSource=function(F$J,F$y){F$J===this._skin&&F$y&&(this.source=F$y,this.onCompResize(),this.clearEvent())},F$J.clearEvent=function(){this._skin&&F$Z.atalsNotify&&F$Z.atalsNotify.off(this._skin,this,this.setSource)},F$J.clearLoad=function(){this._skin&&((this._complete||this._progress)&&F$o.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},F$R(0,F$J,"source",function(){return this._bitmap.source},function(F$J){this._bitmap&&(this._bitmap.source=F$J,this.event("loaded"),this.repaint())}),F$R(0,F$J,"dataSource",F$y.prototype._$get_dataSource,function(F$J){"string"==typeof(this._dataSource=F$J)?this.skin=F$J:F$o.superSet(F$i,this,"dataSource",F$J)}),F$R(0,F$J,"measureHeight",function(){return this._bitmap.height}),F$R(0,F$J,"skin",function(){return this._skin},function(F$J){if(this._skin!=F$J)if(F$O.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=F$J){F$O.keepCache(this,this._skin);var F$y=F$O.getRes(F$J),F$T=F$Z.resAtalsObj&&F$Z.resAtalsObj[this._skin];F$y?(this.source=F$y,this.onCompResize()):F$T?(F$Z.atalsNotify&&F$Z.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=F$T.sourceW),0==this.height&&(this.height=F$T.sourceH)):(this._complete=F$M.create(this,this.setSource,[this._skin]),this._progress=null,F$o.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),F$R(0,F$J,"group",function(){return this._group},function(F$J){F$J&&this._skin&&F$O.setGroup(this._skin,F$J),this._group=F$J}),F$R(0,F$J,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$J){this._bitmap.sizeGrid=F$t.fillArray(F$_.defaultSizeGrid,F$J,Number)}),F$R(0,F$J,"measureWidth",function(){return this._bitmap.width}),F$R(0,F$J,"width",F$y.prototype._$get_width,function(F$J){F$o.superSet(F$i,this,"width",F$J),this._bitmap.width=0==F$J?1e-7:F$J}),F$R(0,F$J,"height",F$y.prototype._$get_height,function(F$J){F$o.superSet(F$i,this,"height",F$J),this._bitmap.height=0==F$J?1e-7:F$J}),F$T}(F$i),F$Y=function(F$y){function F$T(F$J){this._tf=null,F$T.__super.call(this),void 0===F$J&&(F$J=""),F$$.defaultColor=F$_.labelColor,this.text=F$J}F$m(F$T,"laya.ui.Label",F$y);var F$J=F$T.prototype;return F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._tf=null},F$J.createChildren=function(){this.addChild(this._tf=new F$P)},F$J.changeText=function(F$J){this._tf.changeText(F$J)},F$R(0,F$J,"padding",function(){return this._tf.padding.join(",")},function(F$J){this._tf.padding=F$t.fillArray(F$_.labelPadding,F$J,Number)}),F$R(0,F$J,"bold",function(){return this._tf.bold},function(F$J){this._tf.bold=F$J}),F$R(0,F$J,"align",function(){return this._tf.align},function(F$J){this._tf.align=F$J}),F$R(0,F$J,"text",function(){return this._tf.text},function(F$J){this._tf.text!=F$J&&(F$J&&(F$J=F$t.adptString(F$J+"")),this._tf.text=F$J,this.event("change"),this._width&&this._height||this.onCompResize())}),F$R(0,F$J,"italic",function(){return this._tf.italic},function(F$J){this._tf.italic=F$J}),F$R(0,F$J,"wordWrap",function(){return this._tf.wordWrap},function(F$J){this._tf.wordWrap=F$J}),F$R(0,F$J,"font",function(){return this._tf.font},function(F$J){this._tf.font=F$J}),F$R(0,F$J,"dataSource",F$y.prototype._$get_dataSource,function(F$J){"number"==typeof(this._dataSource=F$J)||"string"==typeof F$J?this.text=F$J+"":F$o.superSet(F$i,this,"dataSource",F$J)}),F$R(0,F$J,"color",function(){return this._tf.color},function(F$J){this._tf.color=F$J}),F$R(0,F$J,"valign",function(){return this._tf.valign},function(F$J){this._tf.valign=F$J}),F$R(0,F$J,"leading",function(){return this._tf.leading},function(F$J){this._tf.leading=F$J}),F$R(0,F$J,"fontSize",function(){return this._tf.fontSize},function(F$J){this._tf.fontSize=F$J}),F$R(0,F$J,"bgColor",function(){return this._tf.bgColor},function(F$J){this._tf.bgColor=F$J}),F$R(0,F$J,"borderColor",function(){return this._tf.borderColor},function(F$J){this._tf.borderColor=F$J}),F$R(0,F$J,"stroke",function(){return this._tf.stroke},function(F$J){this._tf.stroke=F$J}),F$R(0,F$J,"strokeColor",function(){return this._tf.strokeColor},function(F$J){this._tf.strokeColor=F$J}),F$R(0,F$J,"textField",function(){return this._tf}),F$R(0,F$J,"measureWidth",function(){return this._tf.width}),F$R(0,F$J,"measureHeight",function(){return this._tf.height}),F$R(0,F$J,"width",function(){return this._width||this._tf.text?F$o.superGet(F$i,this,"width"):0},function(F$J){F$o.superSet(F$i,this,"width",F$J),this._tf.width=F$J}),F$R(0,F$J,"height",function(){return this._height||this._tf.text?F$o.superGet(F$i,this,"height"):0},function(F$J){F$o.superSet(F$i,this,"height",F$J),this._tf.height=F$J}),F$R(0,F$J,"overflow",function(){return this._tf.overflow},function(F$J){this._tf.overflow=F$J}),F$R(0,F$J,"underline",function(){return this._tf.underline},function(F$J){this._tf.underline=F$J}),F$R(0,F$J,"underlineColor",function(){return this._tf.underlineColor},function(F$J){this._tf.underlineColor=F$J}),F$T}(F$i),F$U=function(F$y){function F$T(F$J){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,F$T.__super.call(this),this.skin=F$J}F$m(F$T,"laya.ui.ProgressBar",F$y);var F$J=F$T.prototype;return F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._bg&&this._bg.destroy(F$J),this._bar&&this._bar.destroy(F$J),this._bg=this._bar=null,this.changeHandler=null},F$J.createChildren=function(){this.addChild(this._bg=new F$I),this.addChild(this._bar=new F$I)},F$J.changeValue=function(){if(this.sizeGrid){var F$J=this.sizeGrid.split(","),F$y=Number(F$J[3]),F$T=Number(F$J[1]),F$V=(this.width-F$y-F$T)*this._value;this._bar.width=F$y+F$T+F$V,this._bar.visible=this._bar.width>F$y+F$T}else this._bar.width=this.width*this._value},F$R(0,F$J,"measureHeight",function(){return this._bg.height}),F$R(0,F$J,"skin",function(){return this._skin},function(F$J){this._skin!=F$J&&(this._skin=F$J,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),F$R(0,F$J,"measureWidth",function(){return this._bg.width}),F$R(0,F$J,"height",F$y.prototype._$get_height,function(F$J){F$o.superSet(F$i,this,"height",F$J),this._bg.height=this._height,this._bar.height=this._height}),F$R(0,F$J,"bar",function(){return this._bar}),F$R(0,F$J,"value",function(){return this._value},function(F$J){this._value!=F$J&&(F$J=1<F$J?1:F$J<0?0:F$J,this._value=F$J,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(F$J))}),F$R(0,F$J,"bg",function(){return this._bg}),F$R(0,F$J,"sizeGrid",function(){return this._bg.sizeGrid},function(F$J){this._bg.sizeGrid=this._bar.sizeGrid=F$J}),F$R(0,F$J,"width",F$y.prototype._$get_width,function(F$J){F$o.superSet(F$i,this,"width",F$J),this._bg.width=this._width,this.callLater(this.changeValue)}),F$R(0,F$J,"dataSource",F$y.prototype._$get_dataSource,function(F$J){"number"==typeof(this._dataSource=F$J)||"string"==typeof F$J?this.value=Number(F$J):F$o.superSet(F$i,this,"dataSource",F$J)}),F$T}(F$i),F$d=(function(F$J){function F$T(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,F$T.__super.call(this),this._tipBox=new F$i,this._tipBox.addChild(this._tipText=new F$P),this._tipText.x=this._tipText.y=5,this._tipText.color=F$T.tipTextColor,this._defaultTipHandler=this._showDefaultTip,F$o.stage.on("showtip",this,this._onStageShowTip),F$o.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}F$m(F$T,"laya.ui.TipManager",F$i);var F$y=F$T.prototype;F$y._onStageHideTip=function(F$J){F$o.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},F$y._onStageShowTip=function(F$J){F$o.timer.once(F$T.tipDelay,this,this._showTip,[F$J],!0)},F$y._showTip=function(F$J){if("string"==typeof F$J){var F$y=String(F$J);Boolean(F$y)&&this._defaultTipHandler(F$y)}else F$J instanceof laya.utils.Handler?F$J.run():"function"==typeof F$J&&F$J.apply();F$o.stage.on("mousemove",this,this._onStageMouseMove),F$o.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},F$y._onStageMouseDown=function(F$J){this.closeAll()},F$y._onStageMouseMove=function(F$J){this._showToStage(this,F$T.offsetX,F$T.offsetY)},F$y._showToStage=function(F$J,F$y,F$T){void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0);var F$V=F$J.getBounds();F$J.x=F$o.stage.mouseX+F$y,F$J.y=F$o.stage.mouseY+F$T,F$J.x+F$V.width>F$o.stage.width&&(F$J.x-=F$V.width+F$y),F$J.y+F$V.height>F$o.stage.height&&(F$J.y-=F$V.height+F$T)},F$y.closeAll=function(){F$o.timer.clear(this,this._showTip),F$o.stage.off("mousemove",this,this._onStageMouseMove),F$o.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},F$y.showDislayTip=function(F$J){this.addChild(F$J),this._showToStage(this),F$o._currentStage.addChild(this)},F$y._showDefaultTip=function(F$J){this._tipText.text=F$J;var F$y=this._tipBox.graphics;F$y.clear(),F$y.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,F$T.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),F$o._currentStage.addChild(this)},F$R(0,F$y,"defaultTipHandler",function(){return this._defaultTipHandler},function(F$J){this._defaultTipHandler=F$J}),F$T.offsetX=10,F$T.offsetY=15,F$T.tipTextColor="#ffffff",F$T.tipBackColor="#111111",F$T.tipDelay=200}(),function(F$J){var F$G;function F$B(){this._idMap=null,this._aniList=null,this._watchMap={},F$B.__super.call(this)}F$m(F$B,"laya.ui.View",F$u);var F$y=F$B.prototype;return F$y.createView=function(F$J){if(F$J.animations&&!this._idMap&&(this._idMap={}),F$B.createComp(F$J,this,this),F$J.animations){var F$y,F$T,F$V=[],F$Z=F$J.animations,F$m=0,F$R=F$Z.length;for(F$m=0;F$m<F$R;F$m++){switch(F$y=new F$e,F$T=F$Z[F$m],F$y._setUp(this._idMap,F$T),(this[F$T.name]=F$y)._setControlNode(this),F$T.action){case 1:F$y.play(0,!1);break;case 2:F$y.play(0,!0)}F$V.push(F$y)}this._aniList=F$V}0<this._width&&null==F$J.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},F$y.onEvent=function(F$J,F$y){},F$y.loadUI=function(F$J){var F$y=F$B.uiMap[F$J];F$y&&this.createView(F$y)},F$y.destroy=function(F$J){void 0===F$J&&(F$J=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,F$J)},F$y.changeData=function(F$J){var F$y=this._watchMap[F$J];if(F$y){console.log("change",F$J);for(var F$T=0,F$V=F$y.length;F$T<F$V;F$T++){F$y[F$T].exe(this)}}},F$B._regs=function(){for(var F$J in F$B.uiClassMap)F$s.regClass(F$J,F$B.uiClassMap[F$J])},F$B.createComp=function(F$J,F$y,F$T,F$V){if(!(F$y=F$y||F$B.getCompInstance(F$J)))return console.warn("can not create:"+F$J.type),null;var F$Z=F$J.child;if(F$Z)for(var F$m=F$y instanceof laya.ui.List,F$R=0,F$n=F$Z.length;F$R<F$n;F$R++){var F$K=F$Z[F$R];if(!F$y.hasOwnProperty("itemRender")||"render"!=F$K.props.name&&"render"!==F$K.props.renderType)if("Graphic"==F$K.type)F$s.addGraphicsToSprite(F$K,F$y);else if(F$s.isDrawType(F$K.type))F$s.addGraphicToSprite(F$K,F$y,!0);else{if(F$m){var F$A=[],F$$=F$B.createComp(F$K,null,F$T,F$A);F$A.length&&(F$$._$bindData=F$A)}else F$$=F$B.createComp(F$K,null,F$T,F$V);"Script"==F$K.type?"owner"in F$$?F$$.owner=F$y:"target"in F$$&&(F$$.target=F$y):"mask"==F$K.props.renderType||"mask"==F$K.props.name?F$y.mask=F$$:F$$ instanceof laya.display.Sprite&&F$y.addChild(F$$)}else F$y.itemRender=F$K}var F$e=F$J.props;for(var F$M in F$e){var F$G=F$e[F$M];F$B.eventDic[F$M]?F$G&&F$T&&F$y.on(F$M,F$T,F$T.onEvent,[F$G]):F$B.setCompValue(F$y,F$M,F$G,F$T,F$V)}return F$o.__typeof(F$y,"laya.ui.IItem")&&F$y.initItems(),F$J.compId&&F$T&&F$T._idMap&&(F$T._idMap[F$J.compId]=F$y),F$y},F$B.setCompValue=function(F$J,F$y,F$T,F$V,F$Z){if("string"==typeof F$T&&-1<F$T.indexOf("${")){if(F$B._sheet||(F$B._sheet=F$s.getClass("laya.data.Table")),!F$B._sheet)return void console.warn("Can not find class Sheet");if(F$Z)F$Z.push(F$J,F$y,F$T);else if(F$V){-1==F$T.indexOf("].")&&(F$T=F$T.replace(".","[0]."));var F$m,F$R,F$n=new F$G(F$J,F$y,F$T);F$n.exe(F$V);for(var F$K=F$T.replace(/\[.*?\]\./g,".");null!=(F$m=F$B._parseWatchData.exec(F$K));){for(var F$A=F$m[1];null!=(F$R=F$B._parseKeyWord.exec(F$A));){var F$$=F$R[0],F$e=F$V._watchMap[F$$]||(F$V._watchMap[F$$]=[]);F$e.push(F$n),F$B._sheet.I.notifer.on(F$$,F$V,F$V.changeData,[F$$])}(F$e=F$V._watchMap[F$A]||(F$V._watchMap[F$A]=[])).push(F$n),F$B._sheet.I.notifer.on(F$A,F$V,F$V.changeData,[F$A])}}}else if("var"===F$y&&F$V)F$V[F$T]=F$J;else if("onClick"==F$y){var F$M=F$o._runScript("(function(){"+F$T+"})");F$J.on("click",F$V,F$M)}else F$J[F$y]="true"===F$T||"false"!==F$T&&F$T},F$B.getCompInstance=function(F$J){var F$y,F$T=F$J.props?F$J.props.runtime:null;return F$y=F$T?F$B.viewClassMap[F$T]||F$B.uiClassMap[F$T]||F$o.__classmap[F$T]:F$B.uiClassMap[F$J.type],F$J.props&&F$J.props.hasOwnProperty("renderType")&&"instance"==F$J.props.renderType?F$y.instance:F$y?new F$y:null},F$B.regComponent=function(F$J,F$y){F$B.uiClassMap[F$J]=F$y,F$s.regClass(F$J,F$y)},F$B.regViewRuntime=function(F$J,F$y){F$B.viewClassMap[F$J]=F$y},F$B.uiMap={},F$B.viewClassMap={},F$B._sheet=null,F$V(F$B,["uiClassMap",function(){return this.uiClassMap={ViewStack:F$JJ,LinkButton:F$x,TextArea:F$AJ,ColorPicker:F$X,Box:F$u,Button:F$x,CheckBox:F$C,Clip:F$k,ComboBox:F$S,Component:F$i,HScrollBar:F$p,HSlider:F$g,Image:F$I,Label:F$Y,List:F$h,Panel:F$j,ProgressBar:F$U,Radio:F$w,RadioGroup:F$nJ,ScrollBar:F$f,Slider:F$W,Tab:F$KJ,TextInput:F$TJ,View:F$B,VScrollBar:F$yJ,VSlider:F$VJ,Tree:F$z,HBox:F$mJ,VBox:F$RJ,Sprite:F$H,Animation:F$T,Text:F$P,FontClip:F$b}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),F$B.__init$=function(){F$B._regs(),F$G=function(){function F$J(F$J,F$y,F$T){this.comp=null,this.prop=null,this.value=null,this.comp=F$J,this.prop=F$y,this.value=F$T}return F$m(F$J,""),F$J.prototype.exe=function(F$J){var F$y=F$t.getBindFun(this.value);this.comp[this.prop]=F$y.call(this,F$J)},F$J}()},F$B}()),F$C=function(F$J){function F$T(F$J,F$y){void 0===F$y&&(F$y=""),F$T.__super.call(this,F$J,F$y)}F$m(F$T,"laya.ui.CheckBox",F$J);var F$y=F$T.prototype;return F$y.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},F$y.initialize=function(){F$J.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},F$R(0,F$y,"dataSource",F$J.prototype._$get_dataSource,function(F$J){"boolean"==typeof(this._dataSource=F$J)?this.selected=F$J:"string"==typeof F$J?this.selected="true"===F$J:F$o.superSet(F$x,this,"dataSource",F$J)}),F$T}(F$x),F$F=function(F$J){function F$y(){this._space=0,this._align="none",this._itemChanged=!1,F$y.__super.call(this)}F$m(F$y,"laya.ui.LayoutBox",F$u);var F$T=F$y.prototype;return F$T.addChild=function(F$J){return F$J.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,F$J)},F$T.onResize=function(F$J){this._setItemChanged()},F$T.addChildAt=function(F$J,F$y){return F$J.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,F$J,F$y)},F$T.removeChild=function(F$J){return F$J.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,F$J)},F$T.removeChildAt=function(F$J){return this.getChildAt(F$J).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,F$J)},F$T.refresh=function(){this._setItemChanged()},F$T.changeItems=function(){this._itemChanged=!1},F$T.sortItem=function(F$J){F$J&&F$J.sort(function(F$J,F$y){return F$J.y-F$y.y})},F$T._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},F$R(0,F$T,"space",function(){return this._space},function(F$J){this._space=F$J,this._setItemChanged()}),F$R(0,F$T,"align",function(){return this._align},function(F$J){this._align=F$J,this._setItemChanged()}),F$y}(),F$b=function(F$y){function F$T(F$J,F$y){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,F$T.__super.call(this),F$J&&(this.skin=F$J),F$y&&(this.sheet=F$y)}F$m(F$T,"laya.ui.FontClip",F$y);var F$J=F$T.prototype;return F$J.createChildren=function(){this._bitmap=new F$Q,this.on("loaded",this,this._onClipLoaded)},F$J._onClipLoaded=function(){this.callLater(this.changeValue)},F$J.changeValue=function(){var F$J;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),F$J=this._sources[0]))){var F$y="horizontal"===this._direction;F$y?(this._wordsW=this._valueArr.length*(F$J.sourceWidth+this.spaceX),this._wordsH=F$J.sourceHeight):(this._wordsW=F$J.sourceWidth,this._wordsH=(F$J.sourceHeight+this.spaceY)*this._valueArr.length);var F$T=0;if(this._width)switch(this._align){case"center":F$T=.5*(this._width-this._wordsW);break;case"right":F$T=this._width-this._wordsW;break;default:F$T=0}for(var F$V=0,F$Z=this._valueArr.length;F$V<F$Z;F$V++){var F$m=this._indexMap[this._valueArr.charAt(F$V)];this.sources[F$m]&&(F$J=this.sources[F$m],F$y?this.graphics.drawTexture(F$J,F$T+F$V*(F$J.sourceWidth+this.spaceX),0,F$J.sourceWidth,F$J.sourceHeight):this.graphics.drawTexture(F$J,0+F$T,F$V*(F$J.sourceHeight+this.spaceY),F$J.sourceWidth,F$J.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),F$y.prototype.destroy.call(this,F$J)},F$R(0,F$J,"sheet",function(){return this._sheet},function(F$J){F$J+="";var F$y=(this._sheet=F$J).split(" ");this._clipX=String(F$y[0]).length,this.clipY=F$y.length,this._indexMap={};for(var F$T=0;F$T<this._clipY;F$T++)for(var F$V=F$y[F$T].split(""),F$Z=0,F$m=F$V.length;F$Z<F$m;F$Z++)this._indexMap[F$V[F$Z]]=F$T*this._clipX+F$Z}),F$R(0,F$J,"height",F$y.prototype._$get_height,function(F$J){F$o.superSet(F$k,this,"height",F$J),this.callLater(this.changeValue)}),F$R(0,F$J,"direction",function(){return this._direction},function(F$J){this._direction=F$J,this.callLater(this.changeValue)}),F$R(0,F$J,"value",function(){return this._valueArr?this._valueArr:""},function(F$J){F$J+="",this._valueArr=F$J,this.callLater(this.changeValue)}),F$R(0,F$J,"width",F$y.prototype._$get_width,function(F$J){F$o.superSet(F$k,this,"width",F$J),this.callLater(this.changeValue)}),F$R(0,F$J,"spaceX",function(){return this._spaceX},function(F$J){this._spaceX=F$J,"horizontal"===this._direction&&this.callLater(this.changeValue)}),F$R(0,F$J,"spaceY",function(){return this._spaceY},function(F$J){this._spaceY=F$J,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),F$R(0,F$J,"align",function(){return this._align},function(F$J){this._align=F$J,this.callLater(this.changeValue)}),F$R(0,F$J,"measureWidth",function(){return this._wordsW}),F$R(0,F$J,"measureHeight",function(){return this._wordsH}),F$T}(F$k),F$h=function(F$J){function F$y(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new F$B,F$y.__super.call(this)}F$m(F$y,"laya.ui.List",F$J);var F$T=F$y.prototype;return F$o.imps(F$T,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),F$T.destroy=function(F$J){void 0===F$J&&(F$J=!0),this._content&&this._content.destroy(F$J),this._scrollBar&&this._scrollBar.destroy(F$J),laya.ui.Component.prototype.destroy.call(this,F$J),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},F$T.createChildren=function(){this.addChild(this._content=new F$u)},F$T.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=F$o.superGet(F$u,this,"cacheAs")),F$o.superSet(F$u,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},F$T.onScrollEnd=function(){F$o.superSet(F$u,this,"cacheAs",this._$P.cacheAs)},F$T._removePreScrollBar=function(){var F$J=this.removeChildByName("scrollBar");F$J&&F$J.destroy(!0)},F$T.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var F$J=this._getOneCell(),F$y=F$J.width+this._spaceX||1,F$T=F$J.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/F$y):Math.ceil(this._width/F$y)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/F$T):Math.round(this._height/F$T));var F$V=this._width?this._width:F$y*this.repeatX-this._spaceX,F$Z=this._height?this._height:F$T*this.repeatY-this._spaceY;this._cellSize=this._isVertical?F$T:F$y,this._cellOffset=this._isVertical?F$T*Math.max(this._repeatY2,this._repeatY)-F$Z-this._spaceY:F$y*Math.max(this._repeatX2,this._repeatX)-F$V-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=F$Z:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=F$V),this.setContentSize(F$V,F$Z);var F$m=this._isVertical?this.repeatX:this.repeatY,F$R=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,F$m,F$R),this._createdLine=F$R,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},F$T._getOneCell=function(){if(0===this._cells.length){var F$J=this.createItem();if(this._offset.setTo(F$J.x,F$J.y),this.cacheContent)return F$J;this._cells.push(F$J)}return this._cells[0]},F$T._createItems=function(F$J,F$y,F$T){var F$V=this._content,F$Z=this._getOneCell(),F$m=F$Z.width+this._spaceX,F$R=F$Z.height+this._spaceY;if(this.cacheContent){var F$n=new F$u;F$n.cacheAsBitmap=!0,F$n.pos((this._isVertical?0:F$J)*F$m,(this._isVertical?F$J:0)*F$R),this._content.addChild(F$n),this._content.optimizeScrollRect=!0,F$V=F$n}else{for(var F$K=[],F$A=this._cells.length-1;-1<F$A;F$A--){var F$$=this._cells[F$A];F$$.removeSelf(),F$K.push(F$$)}this._cells.length=0}for(var F$e=F$J;F$e<F$T;F$e++)for(var F$M=0;F$M<F$y;F$M++)(F$Z=F$K&&F$K.length?F$K.pop():this.createItem()).x=(this._isVertical?F$M:F$e)*F$m-F$V.x,F$Z.y=(this._isVertical?F$e:F$M)*F$R-F$V.y,F$Z.name="item"+(F$e*F$y+F$M),F$V.addChild(F$Z),this.addCell(F$Z)},F$T.createItem=function(){var F$J=[];if("function"==typeof this._itemRender)var F$y=new this._itemRender;else F$y=F$d.createComp(this._itemRender,null,null,F$J);if(0==F$J.length&&F$y._watchMap){var F$T=F$y._watchMap;for(var F$V in F$T)for(var F$Z=F$T[F$V],F$m=0;F$m<F$Z.length;F$m++){var F$R=F$Z[F$m];F$J.push(F$R.comp,F$R.prop,F$R.value)}}return F$J.length&&(F$y._$bindData=F$J),F$y},F$T.addCell=function(F$J){F$J.on("click",this,this.onCellMouse),F$J.on("rightclick",this,this.onCellMouse),F$J.on("mouseover",this,this.onCellMouse),F$J.on("mouseout",this,this.onCellMouse),F$J.on("mousedown",this,this.onCellMouse),F$J.on("mouseup",this,this.onCellMouse),this._cells.push(F$J)},F$T.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var F$J=0,F$y=F$J=0;F$y<1e4;F$y++){var F$T=this.getChildByName("item"+F$y);if(!F$T)break;this.addCell(F$T),F$J++}this.repeatY=F$J}},F$T.setContentSize=function(F$J,F$y){this._content.width=F$J,this._content.height=F$y,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new F$E),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,F$J,F$y),this._content.scrollRect=this._content.scrollRect),this.event("resize")},F$T.onCellMouse=function(F$J){"mousedown"===F$J.type&&(this._isMoved=!1);var F$y=F$J.currentTarget,F$T=this._startIndex+this._cells.indexOf(F$y);F$T<0||("click"===F$J.type||"rightclick"===F$J.type?this.selectEnable&&!this._isMoved?this.selectedIndex=F$T:this.changeCellState(F$y,!0,0):"mouseover"!==F$J.type&&"mouseout"!==F$J.type||this._selectedIndex===F$T||this.changeCellState(F$y,"mouseover"===F$J.type,0),this.mouseHandler&&this.mouseHandler.runWith([F$J,F$T]))},F$T.changeCellState=function(F$J,F$y,F$T){var F$V=F$J.getChildByName("selectBox");F$V&&(this.selectEnable=!0,F$V.visible=F$y,F$V.index=F$T)},F$T.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},F$T.onScrollBarChange=function(F$J){this.runCallLater(this.changeCells);var F$y=this._scrollBar.value,F$T=this._isVertical?this.repeatX:this.repeatY,F$V=this._isVertical?this.repeatY:this.repeatX,F$Z=Math.floor(F$y/this._cellSize);if(this.cacheContent)F$R=F$V+1,this._createdLine-F$Z<F$R&&(this._createItems(this._createdLine,F$T,this._createdLine+F$R),this.renderItems(this._createdLine*F$T,0),this._createdLine+=F$R);else{var F$m=F$Z*F$T,F$R=0;if(F$m>this._startIndex){F$R=F$m-this._startIndex;var F$n=!0,F$K=this._startIndex+F$T*(F$V+1);this._isMoved=!0}else F$m<this._startIndex&&(F$R=this._startIndex-F$m,F$n=!1,F$K=this._startIndex-1,this._isMoved=!0);for(var F$A=0;F$A<F$R;F$A++){if(F$n){var F$$=this._cells.shift();this._cells[this._cells.length]=F$$;var F$e=F$K+F$A}else F$$=this._cells.pop(),this._cells.unshift(F$$),F$e=F$K-F$A;var F$M=Math.floor(F$e/F$T)*this._cellSize;this._isVertical?F$$.y=F$M:F$$.x=F$M,this.renderItem(F$$,F$e)}this._startIndex=F$m,this.changeSelectStatus()}var F$G=this._content.scrollRect;this._isVertical?(F$G.y=F$y-this._offset.y,F$G.x=-this._offset.x):(F$G.y=-this._offset.y,F$G.x=F$y-this._offset.x),this._content.scrollRect=F$G},F$T.posCell=function(F$J,F$y){if(this._scrollBar){var F$T=this._isVertical?this.repeatX:this.repeatY,F$V=(this._isVertical?this.repeatY:this.repeatX,Math.floor(F$y/F$T)*this._cellSize);this._isVertical?F$J.y=F$V:F$J.x=F$V}},F$T.changeSelectStatus=function(){for(var F$J=0,F$y=this._cells.length;F$J<F$y;F$J++)this.changeCellState(this._cells[F$J],this._selectedIndex===this._startIndex+F$J,1)},F$T.renderItems=function(F$J,F$y){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0);for(var F$T=F$J,F$V=F$y||this._cells.length;F$T<F$V;F$T++)this.renderItem(this._cells[F$T],this._startIndex+F$T);this.changeSelectStatus()},F$T.renderItem=function(F$J,F$y){this._array&&0<=F$y&&F$y<this._array.length?(F$J.visible=!0,F$J._$bindData?(F$J._dataSource=this._array[F$y],this._bindData(F$J,this._array[F$y])):F$J.dataSource=this._array[F$y],this.cacheContent||this.posCell(F$J,F$y),this.hasListener("render")&&this.event("render",[F$J,F$y]),this.renderHandler&&this.renderHandler.runWith([F$J,F$y])):(F$J.visible=!1,F$J.dataSource=null)},F$T._bindData=function(F$J,F$y){for(var F$T=F$J._$bindData,F$V=0,F$Z=F$T.length;F$V<F$Z;F$V++){var F$m=F$T[F$V++],F$R=F$T[F$V++],F$n=F$T[F$V],F$K=F$t.getBindFun(F$n);F$m[F$R]=F$K.call(this,F$y)}},F$T.refresh=function(){this.array=this._array},F$T.getItem=function(F$J){return-1<F$J&&F$J<this._array.length?this._array[F$J]:null},F$T.changeItem=function(F$J,F$y){-1<F$J&&F$J<this._array.length&&(this._array[F$J]=F$y,F$J>=this._startIndex&&F$J<this._startIndex+this._cells.length&&this.renderItem(this.getCell(F$J),F$J))},F$T.setItem=function(F$J,F$y){this.changeItem(F$J,F$y)},F$T.addItem=function(F$J){this._array.push(F$J),this.array=this._array},F$T.addItemAt=function(F$J,F$y){this._array.splice(F$y,0,F$J),this.array=this._array},F$T.deleteItem=function(F$J){this._array.splice(F$J,1),this.array=this._array},F$T.getCell=function(F$J){return this.runCallLater(this.changeCells),-1<F$J&&this._cells?this._cells[(F$J-this._startIndex)%this._cells.length]:null},F$T.scrollTo=function(F$J){if(this._scrollBar){var F$y=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(F$J/F$y)*this._cellSize}else this.startIndex=F$J},F$T.tweenTo=function(F$J,F$y,F$T){if(void 0===F$y&&(F$y=200),this._scrollBar){var F$V=this._isVertical?this.repeatX:this.repeatY;F$a.to(this._scrollBar,{value:Math.floor(F$J/F$V)*this._cellSize},F$y,null,F$T,0,!0)}else this.startIndex=F$J,F$T&&F$T.run()},F$T._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},F$T.commitMeasure=function(){this.runCallLater(this.changeCells)},F$R(0,F$T,"cacheAs",F$J.prototype._$get_cacheAs,function(F$J){F$o.superSet(F$u,this,"cacheAs",F$J),this._scrollBar&&(this._$P.cacheAs=null,"none"!==F$J?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),F$R(0,F$T,"content",function(){return this._content}),F$R(0,F$T,"height",F$J.prototype._$get_height,function(F$J){F$J!=this._height&&(F$o.superSet(F$u,this,"height",F$J),this._setCellChanged())}),F$R(0,F$T,"itemRender",function(){return this._itemRender},function(F$J){if(this._itemRender!=F$J){this._itemRender=F$J;for(var F$y=this._cells.length-1;-1<F$y;F$y--)this._cells[F$y].destroy();this._cells.length=0,this._setCellChanged()}}),F$R(0,F$T,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(F$J){this._removePreScrollBar();var F$y=new F$yJ;F$y.name="scrollBar",F$y.right=0,F$J&&" "!=F$J&&(F$y.skin=F$J),this.scrollBar=F$y,this.addChild(F$y),this._setCellChanged()}),F$R(0,F$T,"page",function(){return this._page},function(F$J){this._page=F$J,this._array&&(this._page=0<F$J?F$J:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),F$R(0,F$T,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(F$J){this._removePreScrollBar();var F$y=new F$p;F$y.name="scrollBar",F$y.bottom=0,F$J&&" "!=F$J&&(F$y.skin=F$J),this.scrollBar=F$y,this.addChild(F$y),this._setCellChanged()}),F$R(0,F$T,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(F$J){this._repeatX=F$J,this._setCellChanged()}),F$R(0,F$T,"scrollBar",function(){return this._scrollBar},function(F$J){this._scrollBar!=F$J&&(this._scrollBar=F$J)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),F$R(0,F$T,"width",F$J.prototype._$get_width,function(F$J){F$J!=this._width&&(F$o.superSet(F$u,this,"width",F$J),this._setCellChanged())}),F$R(0,F$T,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(F$J){this._repeatY=F$J,this._setCellChanged()}),F$R(0,F$T,"spaceX",function(){return this._spaceX},function(F$J){this._spaceX=F$J,this._setCellChanged()}),F$R(0,F$T,"spaceY",function(){return this._spaceY},function(F$J){this._spaceY=F$J,this._setCellChanged()}),F$R(0,F$T,"selectedIndex",function(){return this._selectedIndex},function(F$J){this._selectedIndex!=F$J&&(this._selectedIndex=F$J,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(F$J),this.startIndex=this._startIndex)}),F$R(0,F$T,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(F$J){this.selectedIndex=this._array.indexOf(F$J)}),F$R(0,F$T,"length",function(){return this._array?this._array.length:0}),F$R(0,F$T,"selection",function(){return this.getCell(this._selectedIndex)},function(F$J){this.selectedIndex=this._startIndex+this._cells.indexOf(F$J)}),F$R(0,F$T,"startIndex",function(){return this._startIndex},function(F$J){this._startIndex=0<F$J?F$J:0,this.callLater(this.renderItems)}),F$R(0,F$T,"array",function(){return this._array},function(F$J){this.runCallLater(this.changeCells),this._array=F$J||[];var F$y=this._array.length;if(this.totalPage=Math.ceil(F$y/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<F$y?this._selectedIndex:F$y-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var F$T=this._isVertical?this.repeatX:this.repeatY,F$V=this._isVertical?this.repeatY:this.repeatX,F$Z=Math.ceil(F$y/F$T);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=F$V/F$Z,this._scrollBar.setScroll(0,(F$Z-F$V)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),F$R(0,F$T,"dataSource",F$J.prototype._$get_dataSource,function(F$J){"number"==typeof(this._dataSource=F$J)&&Math.floor(F$J)==F$J||"string"==typeof F$J?this.selectedIndex=parseInt(F$J):F$J instanceof Array?this.array=F$J:F$o.superSet(F$u,this,"dataSource",F$J)}),F$R(0,F$T,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),F$y}(F$u),F$p=function(F$J){function F$y(){F$y.__super.call(this)}return F$m(F$y,"laya.ui.HScrollBar",F$J),F$y.prototype.initialize=function(){F$J.prototype.initialize.call(this),this.slider.isVertical=!1},F$y}(F$f),F$j=function(F$J){function F$y(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,F$y.__super.call(this),this.width=this.height=100}F$m(F$y,"laya.ui.Panel",F$J);var F$T=F$y.prototype;return F$T.destroy=function(F$J){void 0===F$J&&(F$J=!0),laya.ui.Component.prototype.destroy.call(this,F$J),this._content&&this._content.destroy(F$J),this._vScrollBar&&this._vScrollBar.destroy(F$J),this._hScrollBar&&this._hScrollBar.destroy(F$J),this._vScrollBar=null,this._hScrollBar=null,this._content=null},F$T.destroyChildren=function(){this._content.destroyChildren()},F$T.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new F$u)},F$T.addChild=function(F$J){return F$J.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(F$J)},F$T.onResize=function(){this._setScrollChanged()},F$T.addChildAt=function(F$J,F$y){return F$J.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(F$J,F$y)},F$T.removeChild=function(F$J){return F$J.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(F$J)},F$T.removeChildAt=function(F$J){return this.getChildAt(F$J).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(F$J)},F$T.removeChildren=function(F$J,F$y){return void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=2147483647),this._content.removeChildren(F$J,F$y),this._setScrollChanged(),this},F$T.getChildAt=function(F$J){return this._content.getChildAt(F$J)},F$T.getChildByName=function(F$J){return this._content.getChildByName(F$J)},F$T.getChildIndex=function(F$J){return this._content.getChildIndex(F$J)},F$T.changeScroll=function(){this._scrollChanged=!1;var F$J=this.contentWidth||1,F$y=this.contentHeight||1,F$T=this._vScrollBar,F$V=this._hScrollBar,F$Z=F$T&&F$y>this._height,F$m=F$V&&F$J>this._width,F$R=F$Z?this._width-F$T.width:this._width,F$n=F$m?this._height-F$V.height:this._height;F$T&&(F$T.x=this._width-F$T.width,F$T.y=0,F$T.height=this._height-(F$m?F$V.height:0),F$T.scrollSize=Math.max(.033*this._height,1),F$T.thumbPercent=F$n/F$y,F$T.setScroll(0,F$y-F$n,F$T.value)),F$V&&(F$V.x=0,F$V.y=this._height-F$V.height,F$V.width=this._width-(F$Z?F$T.width:0),F$V.scrollSize=Math.max(.033*this._width,1),F$V.thumbPercent=F$R/F$J,F$V.setScroll(0,F$J-F$R,F$V.value))},F$T.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},F$T.setContentSize=function(F$J,F$y){var F$T=this._content;F$T.width=F$J,F$T.height=F$y,F$T.scrollRect||(F$T.scrollRect=new F$E),F$T.scrollRect.setTo(0,0,F$J,F$y),F$T.scrollRect=F$T.scrollRect},F$T.onScrollBarChange=function(F$J){var F$y=this._content.scrollRect;if(F$y){var F$T=Math.round(F$J.value);F$J.isVertical?F$y.y=F$T:F$y.x=F$T,this._content.scrollRect=F$y}},F$T.scrollTo=function(F$J,F$y){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),this.vScrollBar&&(this.vScrollBar.value=F$y),this.hScrollBar&&(this.hScrollBar.value=F$J)},F$T.refresh=function(){this.changeScroll()},F$T.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=F$o.superGet(F$u,this,"cacheAs")),F$o.superSet(F$u,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},F$T.onScrollEnd=function(){F$o.superSet(F$u,this,"cacheAs",this._$P.cacheAs)},F$T._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},F$R(0,F$T,"numChildren",function(){return this._content.numChildren}),F$R(0,F$T,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(F$J){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new F$p),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=F$J}),F$R(0,F$T,"contentWidth",function(){for(var F$J=0,F$y=this._content.numChildren-1;-1<F$y;F$y--){var F$T=this._content.getChildAt(F$y);F$J=Math.max(F$T.x+F$T.width*F$T.scaleX,F$J)}return F$J}),F$R(0,F$T,"contentHeight",function(){for(var F$J=0,F$y=this._content.numChildren-1;-1<F$y;F$y--){var F$T=this._content.getChildAt(F$y);F$J=Math.max(F$T.y+F$T.height*F$T.scaleY,F$J)}return F$J}),F$R(0,F$T,"width",F$J.prototype._$get_width,function(F$J){F$o.superSet(F$u,this,"width",F$J),this._setScrollChanged()}),F$R(0,F$T,"hScrollBar",function(){return this._hScrollBar}),F$R(0,F$T,"content",function(){return this._content}),F$R(0,F$T,"height",F$J.prototype._$get_height,function(F$J){F$o.superSet(F$u,this,"height",F$J),this._setScrollChanged()}),F$R(0,F$T,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(F$J){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new F$yJ),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=F$J}),F$R(0,F$T,"vScrollBar",function(){return this._vScrollBar}),F$R(0,F$T,"cacheAs",F$J.prototype._$get_cacheAs,function(F$J){F$o.superSet(F$u,this,"cacheAs",F$J),this._$P.cacheAs=null,"none"!==F$J?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),F$y}(F$u),F$g=function(F$J){function F$y(F$J){F$y.__super.call(this,F$J),this.isVertical=!1}return F$m(F$y,"laya.ui.HSlider",F$W),F$y}(),F$N=function(F$J){function F$T(F$J,F$y){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,F$T.__super.call(this),this.skin=F$y,this.labels=F$J}F$m(F$T,"laya.ui.UIGroup",F$J);var F$y=F$T.prototype;return F$o.imps(F$y,{"laya.ui.IItem":!0}),F$y.preinitialize=function(){this.mouseEnabled=!0},F$y.destroy=function(F$J){void 0===F$J&&(F$J=!0),laya.ui.Component.prototype.destroy.call(this,F$J),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},F$y.addItem=function(F$J,F$y){void 0===F$y&&(F$y=!0);var F$T=F$J,F$V=this._items.length;if(F$T.name="item"+F$V,this.addChild(F$T),this.initItems(),F$y&&0<F$V){var F$Z=this._items[F$V-1];"horizontal"==this._direction?F$T.x=F$Z.x+F$Z.width+this._space:F$T.y=F$Z.y+F$Z.height+this._space}else F$y&&(F$T.x=0,F$T.y=0);return F$V},F$y.delItem=function(F$J,F$y){void 0===F$y&&(F$y=!0);var F$T=this._items.indexOf(F$J);if(-1!=F$T){var F$V=F$J;this.removeChild(F$V);for(var F$Z=F$T+1,F$m=this._items.length;F$Z<F$m;F$Z++){var F$R=this._items[F$Z];F$R.name="item"+(F$Z-1),F$y&&("horizontal"==this._direction?F$R.x-=F$V.width+this._space:F$R.y-=F$V.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var F$n;F$n=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=F$n}}},F$y.initItems=function(){this._items||(this._items=[]);for(var F$J=this._items.length=0;F$J<1e4;F$J++){var F$y=this.getChildByName("item"+F$J);if(null==F$y)break;this._items.push(F$y),F$y.selected=F$J===this._selectedIndex,F$y.clickHandler=F$M.create(this,this.itemClick,[F$J],!1)}},F$y.itemClick=function(F$J){this.selectedIndex=F$J},F$y.setSelect=function(F$J,F$y){this._items&&-1<F$J&&F$J<this._items.length&&(this._items[F$J].selected=F$y)},F$y.createItem=function(F$J,F$y){return null},F$y.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var F$J=0,F$y=0,F$T=this._items.length;F$y<F$T;F$y++){var F$V=this._items[F$y];this._skin&&(F$V.skin=this._skin),this._labelColors&&(F$V.labelColors=this._labelColors),this._labelSize&&(F$V.labelSize=this._labelSize),this._labelStroke&&(F$V.labelStroke=this._labelStroke),this._labelStrokeColor&&(F$V.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(F$V.strokeColors=this._strokeColors),this._labelBold&&(F$V.labelBold=this._labelBold),this._labelPadding&&(F$V.labelPadding=this._labelPadding),this._labelAlign&&(F$V.labelAlign=this._labelAlign),this._stateNum&&(F$V.stateNum=this._stateNum),this._labelFont&&(F$V.labelFont=this._labelFont),"horizontal"===this._direction?(F$V.y=0,F$V.x=F$J,F$J+=F$V.width+this._space):(F$V.x=0,F$V.y=F$J,F$J+=F$V.height+this._space)}this.changeSize()},F$y.commitMeasure=function(){this.runCallLater(this.changeLabels)},F$y._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},F$R(0,F$y,"labelStrokeColor",function(){return this._labelStrokeColor},function(F$J){this._labelStrokeColor!=F$J&&(this._labelStrokeColor=F$J,this._setLabelChanged())}),F$R(0,F$y,"skin",function(){return this._skin},function(F$J){this._skin!=F$J&&(this._skin=F$J,this._setLabelChanged())}),F$R(0,F$y,"selectedIndex",function(){return this._selectedIndex},function(F$J){this._selectedIndex!=F$J&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=F$J,this.setSelect(F$J,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),F$R(0,F$y,"labels",function(){return this._labels},function(F$J){if(this._labels!=F$J){if(this._labels=F$J,this.removeChildren(),this._setLabelChanged(),this._labels)for(var F$y=this._labels.split(","),F$T=0,F$V=F$y.length;F$T<F$V;F$T++){var F$Z=this.createItem(this._skin,F$y[F$T]);F$Z.name="item"+F$T,this.addChild(F$Z)}this.initItems()}}),F$R(0,F$y,"strokeColors",function(){return this._strokeColors},function(F$J){this._strokeColors!=F$J&&(this._strokeColors=F$J,this._setLabelChanged())}),F$R(0,F$y,"labelColors",function(){return this._labelColors},function(F$J){this._labelColors!=F$J&&(this._labelColors=F$J,this._setLabelChanged())}),F$R(0,F$y,"labelStroke",function(){return this._labelStroke},function(F$J){this._labelStroke!=F$J&&(this._labelStroke=F$J,this._setLabelChanged())}),F$R(0,F$y,"labelSize",function(){return this._labelSize},function(F$J){this._labelSize!=F$J&&(this._labelSize=F$J,this._setLabelChanged())}),F$R(0,F$y,"stateNum",function(){return this._stateNum},function(F$J){this._stateNum!=F$J&&(this._stateNum=F$J,this._setLabelChanged())}),F$R(0,F$y,"labelBold",function(){return this._labelBold},function(F$J){this._labelBold!=F$J&&(this._labelBold=F$J,this._setLabelChanged())}),F$R(0,F$y,"labelFont",function(){return this._labelFont},function(F$J){this._labelFont!=F$J&&(this._labelFont=F$J,this._setLabelChanged())}),F$R(0,F$y,"labelPadding",function(){return this._labelPadding},function(F$J){this._labelPadding!=F$J&&(this._labelPadding=F$J,this._setLabelChanged())}),F$R(0,F$y,"direction",function(){return this._direction},function(F$J){this._direction=F$J,this._setLabelChanged()}),F$R(0,F$y,"space",function(){return this._space},function(F$J){this._space=F$J,this._setLabelChanged()}),F$R(0,F$y,"items",function(){return this._items}),F$R(0,F$y,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(F$J){this.selectedIndex=this._items.indexOf(F$J)}),F$R(0,F$y,"dataSource",F$J.prototype._$get_dataSource,function(F$J){"number"==typeof(this._dataSource=F$J)&&Math.floor(F$J)==F$J||"string"==typeof F$J?this.selectedIndex=parseInt(F$J):F$J instanceof Array?this.labels=F$J.join(","):F$o.superSet(F$u,this,"dataSource",F$J)}),F$T}(F$u),F$w=function(F$y){function F$T(F$J,F$y){this._value=null,void 0===F$y&&(F$y=""),F$T.__super.call(this,F$J,F$y)}F$m(F$T,"laya.ui.Radio",F$y);var F$J=F$T.prototype;return F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._value=null},F$J.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},F$J.initialize=function(){F$y.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},F$J.onClick=function(F$J){this.selected=!0},F$R(0,F$J,"value",function(){return null!=this._value?this._value:this.label},function(F$J){this._value=F$J}),F$T}(F$x),F$z=function(F$J){function F$y(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,F$y.__super.call(this),this.width=this.height=200}F$m(F$y,"laya.ui.Tree",F$J);var F$T=F$y.prototype;return F$o.imps(F$T,{"laya.ui.IRender":!0}),F$T.destroy=function(F$J){void 0===F$J&&(F$J=!0),laya.ui.Component.prototype.destroy.call(this,F$J),this._list&&this._list.destroy(F$J),this._list=null,this._source=null,this._renderHandler=null},F$T.createChildren=function(){this.addChild(this._list=new F$h),this._list.renderHandler=F$M.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},F$T.onListChange=function(F$J){this.event("change")},F$T.getArray=function(){var F$J,F$y=[];for(var F$T in this._source)F$J=this._source[F$T],this.getParentOpenStatus(F$J)&&(F$J.x=this._spaceLeft*this.getDepth(F$J),F$y.push(F$J));return F$y},F$T.getDepth=function(F$J,F$y){return void 0===F$y&&(F$y=0),null==F$J.nodeParent?F$y:this.getDepth(F$J.nodeParent,F$y+1)},F$T.getParentOpenStatus=function(F$J){var F$y=F$J.nodeParent;return null==F$y||!!F$y.isOpen&&(null==F$y.nodeParent||this.getParentOpenStatus(F$y))},F$T.renderItem=function(F$J,F$y){var F$T=F$J.dataSource;if(F$T){F$J.left=F$T.x;var F$V=F$J.getChildByName("arrow");F$V&&(F$T.hasChild?(F$V.visible=!0,F$V.index=F$T.isOpen?1:0,F$V.tag=F$y,F$V.off("click",this,this.onArrowClick),F$V.on("click",this,this.onArrowClick)):F$V.visible=!1);var F$Z=F$J.getChildByName("folder");F$Z&&(2==F$Z.clipY?F$Z.index=F$T.isDirectory?0:1:F$Z.index=F$T.isDirectory?F$T.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([F$J,F$y])}},F$T.onArrowClick=function(F$J){var F$y=F$J.currentTarget.tag;this._list.array[F$y].isOpen=!this._list.array[F$y].isOpen,this.event("open"),this._list.array=this.getArray()},F$T.setItemState=function(F$J,F$y){this._list.array[F$J]&&(this._list.array[F$J].isOpen=F$y,this._list.array=this.getArray())},F$T.fresh=function(){this._list.array=this.getArray(),this.repaint()},F$T.parseXml=function(F$J,F$y,F$T,F$V){var F$Z,F$m=F$J.childNodes,F$R=F$m.length;if(!F$V){F$Z={};var F$n,F$K=F$J.attributes;for(var F$A in F$K){var F$$=(F$n=F$K[F$A]).nodeName,F$e=F$n.nodeValue;F$Z[F$$]="true"==F$e||"false"!=F$e&&F$e}F$Z.nodeParent=F$T,0<F$R&&(F$Z.isDirectory=!0),F$Z.hasChild=0<F$R,F$y.push(F$Z)}for(var F$M=0;F$M<F$R;F$M++){var F$G=F$m[F$M];this.parseXml(F$G,F$y,F$Z,!1)}},F$T.parseOpenStatus=function(F$J,F$y){for(var F$T=0,F$V=F$y.length;F$T<F$V;F$T++){var F$Z=F$y[F$T];if(F$Z.isDirectory)for(var F$m=0,F$R=F$J.length;F$m<F$R;F$m++){var F$n=F$J[F$m];if(F$n.isDirectory&&this.isSameParent(F$n,F$Z)&&F$Z.label==F$n.label){F$Z.isOpen=F$n.isOpen;break}}}},F$T.isSameParent=function(F$J,F$y){return null==F$J.nodeParent&&null==F$y.nodeParent||null!=F$J.nodeParent&&null!=F$y.nodeParent&&(F$J.nodeParent.label==F$y.nodeParent.label&&this.isSameParent(F$J.nodeParent,F$y.nodeParent))},F$T.filter=function(F$J){if(Boolean(F$J)){var F$y=[];this.getFilterSource(this._source,F$y,F$J),this._list.array=F$y}else this._list.array=this.getArray()},F$T.getFilterSource=function(F$J,F$y,F$T){var F$V;for(var F$Z in F$T=F$T.toLocaleLowerCase(),F$J)!(F$V=F$J[F$Z]).isDirectory&&-1<String(F$V.label).toLowerCase().indexOf(F$T)&&(F$V.x=0,F$y.push(F$V)),F$V.child&&0<F$V.child.length&&this.getFilterSource(F$V.child,F$y,F$T)},F$R(0,F$T,"spaceBottom",function(){return this._list.spaceY},function(F$J){this._list.spaceY=F$J}),F$R(0,F$T,"keepStatus",function(){return this._keepStatus},function(F$J){this._keepStatus=F$J}),F$R(0,F$T,"itemRender",function(){return this._list.itemRender},function(F$J){this._list.itemRender=F$J}),F$R(0,F$T,"array",function(){return this._list.array},function(F$J){this._keepStatus&&this._list.array&&F$J&&this.parseOpenStatus(this._list.array,F$J),this._source=F$J,this._list.array=this.getArray()}),F$R(0,F$T,"mouseHandler",function(){return this._list.mouseHandler},function(F$J){this._list.mouseHandler=F$J}),F$R(0,F$T,"dataSource",F$J.prototype._$get_dataSource,function(F$J){this._dataSource=F$J,F$o.superSet(F$u,this,"dataSource",F$J)}),F$R(0,F$T,"source",function(){return this._source}),F$R(0,F$T,"scrollBar",function(){return this._list.scrollBar}),F$R(0,F$T,"list",function(){return this._list}),F$R(0,F$T,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(F$J){this._list.vScrollBarSkin=F$J}),F$R(0,F$T,"renderHandler",function(){return this._renderHandler},function(F$J){this._renderHandler=F$J}),F$R(0,F$T,"selectedIndex",function(){return this._list.selectedIndex},function(F$J){this._list.selectedIndex=F$J}),F$R(0,F$T,"spaceLeft",function(){return this._spaceLeft},function(F$J){this._spaceLeft=F$J}),F$R(0,F$T,"selectedItem",function(){return this._list.selectedItem},function(F$J){this._list.selectedItem=F$J}),F$R(0,F$T,"width",F$J.prototype._$get_width,function(F$J){F$o.superSet(F$u,this,"width",F$J),this._list.width=F$J}),F$R(0,F$T,"height",F$J.prototype._$get_height,function(F$J){F$o.superSet(F$u,this,"height",F$J),this._list.height=F$J}),F$R(0,F$T,"xml",null,function(F$J){var F$y=[];this.parseXml(F$J.childNodes[0],F$y,null,!0),this.array=F$y}),F$R(0,F$T,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),F$y}(F$u),F$JJ=function(F$J){function F$y(){this._items=null,this._selectedIndex=0,F$y.__super.call(this),this._setIndexHandler=F$M.create(this,this.setIndex,null,!1)}F$m(F$y,"laya.ui.ViewStack",F$J);var F$T=F$y.prototype;return F$o.imps(F$T,{"laya.ui.IItem":!0}),F$T.setItems=function(F$J){this.removeChildren();for(var F$y=0,F$T=0,F$V=F$J.length;F$T<F$V;F$T++){var F$Z=F$J[F$T];F$Z&&(F$Z.name="item"+F$y,this.addChild(F$Z),F$y++)}this.initItems()},F$T.addItem=function(F$J){F$J.name="item"+this._items.length,this.addChild(F$J),this.initItems()},F$T.initItems=function(){this._items=[];for(var F$J=0;F$J<1e4;F$J++){var F$y=this.getChildByName("item"+F$J);if(null==F$y)break;this._items.push(F$y),F$y.visible=F$J==this._selectedIndex}},F$T.setSelect=function(F$J,F$y){this._items&&-1<F$J&&F$J<this._items.length&&(this._items[F$J].visible=F$y)},F$T.setIndex=function(F$J){this.selectedIndex=F$J},F$R(0,F$T,"dataSource",F$J.prototype._$get_dataSource,function(F$J){if("number"==typeof(this._dataSource=F$J)&&Math.floor(F$J)==F$J||"string"==typeof F$J)this.selectedIndex=parseInt(F$J);else for(var F$y in this._dataSource)this.hasOwnProperty(F$y)&&(this[F$y]=this._dataSource[F$y])}),F$R(0,F$T,"selectedIndex",function(){return this._selectedIndex},function(F$J){this._selectedIndex!=F$J&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=F$J,this.setSelect(this._selectedIndex,!0))}),F$R(0,F$T,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(F$J){this.selectedIndex=this._items.indexOf(F$J)}),F$R(0,F$T,"items",function(){return this._items}),F$R(0,F$T,"setIndexHandler",function(){return this._setIndexHandler},function(F$J){this._setIndexHandler=F$J}),F$y}(F$u),F$yJ=function(F$J){function F$y(){F$y.__super.call(this)}return F$m(F$y,"laya.ui.VScrollBar",F$f),F$y}(),F$TJ=function(F$y){function F$T(F$J){this._bg=null,this._skin=null,F$T.__super.call(this),void 0===F$J&&(F$J=""),this.text=F$J,this.skin=this.skin}F$m(F$T,"laya.ui.TextInput",F$y);var F$J=F$T.prototype;return F$J.preinitialize=function(){this.mouseEnabled=!0},F$J.destroy=function(F$J){F$O.clearCache(this,this._skin),void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._bg&&this._bg.destroy(),this._bg=null},F$J.createChildren=function(){this.addChild(this._tf=new F$G),this._tf.padding=F$_.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},F$J._onFocus=function(){this.event("focus",this)},F$J._onBlur=function(){this.event("blur",this)},F$J._onInput=function(){this.event("input",this)},F$J._onEnter=function(){this.event("enter",this)},F$J.initialize=function(){this.width=128,this.height=22},F$J.select=function(){this._tf.select()},F$J.setSelection=function(F$J,F$y){this._tf.setSelection(F$J,F$y)},F$R(0,F$J,"text",F$y.prototype._$get_text,function(F$J){this._tf.text!=F$J&&(F$J+="",this._tf.text=F$J,this.event("change"))}),F$R(0,F$J,"bg",function(){return this._bg},function(F$J){this.graphics=this._bg=F$J}),F$R(0,F$J,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(F$J){this._tf.inputElementYAdjuster=F$J}),F$R(0,F$J,"multiline",function(){return this._tf.multiline},function(F$J){this._tf.multiline=F$J}),F$R(0,F$J,"skin",function(){return this._skin},function(F$J){this._skin!=F$J&&(F$O.clearCache(this,this._skin),this._skin=F$J,this._bg||(this.graphics=this._bg=new F$Q),F$O.keepCache(this,this._skin),this._bg.source=F$O.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),F$R(0,F$J,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(F$J){this._bg||(this.graphics=this._bg=new F$Q),this._bg.sizeGrid=F$t.fillArray(F$_.defaultSizeGrid,F$J,Number)}),F$R(0,F$J,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(F$J){this._tf.inputElementXAdjuster=F$J}),F$R(0,F$J,"width",F$y.prototype._$get_width,function(F$J){F$o.superSet(F$Y,this,"width",F$J),this._bg&&(this._bg.width=F$J)}),F$R(0,F$J,"height",F$y.prototype._$get_height,function(F$J){F$o.superSet(F$Y,this,"height",F$J),this._bg&&(this._bg.height=F$J)}),F$R(0,F$J,"editable",function(){return this._tf.editable},function(F$J){this._tf.editable=F$J}),F$R(0,F$J,"restrict",function(){return this._tf.restrict},function(F$J){this._tf.restrict=F$J}),F$R(0,F$J,"prompt",function(){return this._tf.prompt},function(F$J){this._tf.prompt=F$J}),F$R(0,F$J,"promptColor",function(){return this._tf.promptColor},function(F$J){this._tf.promptColor=F$J}),F$R(0,F$J,"maxChars",function(){return this._tf.maxChars},function(F$J){this._tf.maxChars=F$J}),F$R(0,F$J,"focus",function(){return this._tf.focus},function(F$J){this._tf.focus=F$J}),F$R(0,F$J,"type",function(){return this._tf.type},function(F$J){this._tf.type=F$J}),F$R(0,F$J,"asPassword",function(){return this._tf.asPassword},function(F$J){this._tf.asPassword=F$J}),F$T}(F$Y),F$VJ=function(F$J){function F$y(){F$y.__super.call(this)}return F$m(F$y,"laya.ui.VSlider",F$W),F$y}(),F$ZJ=function(F$J){function F$V(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,F$V.__super.call(this)}F$m(F$V,"laya.ui.Dialog",F$J);var F$y=F$V.prototype;return F$y.initialize=function(){this.popupEffect=F$V.manager.popupEffectHandler,this.closeEffect=F$V.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},F$y._dealDragArea=function(){var F$J=this.getChildByName("drag");F$J&&(this.dragArea=F$J.x+","+F$J.y+","+F$J.width+","+F$J.height,F$J.removeSelf())},F$y._onClick=function(F$J){var F$y=F$J.target;if(F$y)switch(F$y.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(F$y.name)}},F$y.show=function(F$J,F$y){void 0===F$J&&(F$J=!1),void 0===F$y&&(F$y=!0),this._open(!1,F$J,F$y)},F$y.popup=function(F$J,F$y){void 0===F$J&&(F$J=!1),void 0===F$y&&(F$y=!0),this._open(!0,F$J,F$y)},F$y._open=function(F$J,F$y,F$T){F$V.manager.lock(!1),this.isModal=F$J,F$V.manager.open(this,F$y,F$T)},F$y.onOpened=function(){},F$y.close=function(F$J,F$y){void 0===F$y&&(F$y=!0),F$V.manager.close(this,F$J,F$y)},F$y.onClosed=function(F$J){},F$y._onMouseDown=function(F$J){var F$y=this.getMousePoint();this._dragArea.contains(F$y.x,F$y.y)?this.startDrag():this.stopDrag()},F$R(0,F$y,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(F$J){if(F$J){var F$y=F$t.fillArray([0,0,0,0],F$J,Number);this._dragArea=new F$E(F$y[0],F$y[1],F$y[2],F$y[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),F$R(0,F$y,"isPopup",function(){return null!=this.parent}),F$R(0,F$y,"zOrder",F$J.prototype._$get_zOrder,function(F$J){F$o.superSet(F$d,this,"zOrder",F$J),F$V.manager._checkMask()}),F$R(1,F$V,"manager",function(){return F$V._manager=F$V._manager||new F$c},function(F$J){F$V._manager=F$J}),F$V.setLockView=function(F$J){F$V.manager.setLockView(F$J)},F$V.lock=function(F$J){F$V.manager.lock(F$J)},F$V.closeAll=function(){F$V.manager.closeAll()},F$V.getDialogsByGroup=function(F$J){return F$V.manager.getDialogsByGroup(F$J)},F$V.closeByGroup=function(F$J){return F$V.manager.closeByGroup(F$J)},F$V.CLOSE="close",F$V.CANCEL="cancel",F$V.SURE="sure",F$V.NO="no",F$V.OK="ok",F$V.YES="yes",F$V._manager=null,F$V}(F$d),F$mJ=function(F$J){function F$y(){F$y.__super.call(this)}F$m(F$y,"laya.ui.HBox",F$J);var F$T=F$y.prototype;return F$T.sortItem=function(F$J){F$J&&F$J.sort(function(F$J,F$y){return F$J.x-F$y.x})},F$T.changeItems=function(){this._itemChanged=!1;for(var F$J=[],F$y=0,F$T=0,F$V=this.numChildren;F$T<F$V;F$T++){var F$Z=this.getChildAt(F$T);F$Z&&F$Z.layoutEnabled&&(F$J.push(F$Z),F$y=this._height?this._height:Math.max(F$y,F$Z.height*F$Z.scaleY))}this.sortItem(F$J);var F$m=0;for(F$T=0,F$V=F$J.length;F$T<F$V;F$T++)(F$Z=F$J[F$T]).x=F$m,F$m+=F$Z.width*F$Z.scaleX+this._space,"top"==this._align?F$Z.y=0:"middle"==this._align?F$Z.y=.5*(F$y-F$Z.height*F$Z.scaleY):"bottom"==this._align&&(F$Z.y=F$y-F$Z.height*F$Z.scaleY);this.changeSize()},F$R(0,F$T,"height",F$J.prototype._$get_height,function(F$J){this._height!=F$J&&(F$o.superSet(F$F,this,"height",F$J),this.callLater(this.changeItems))}),F$y.NONE="none",F$y.TOP="top",F$y.MIDDLE="middle",F$y.BOTTOM="bottom",F$y}(F$F),F$RJ=function(F$J){function F$y(){F$y.__super.call(this)}F$m(F$y,"laya.ui.VBox",F$J);var F$T=F$y.prototype;return F$T.changeItems=function(){this._itemChanged=!1;for(var F$J=[],F$y=0,F$T=0,F$V=this.numChildren;F$T<F$V;F$T++){var F$Z=this.getChildAt(F$T);F$Z&&F$Z.layoutEnabled&&(F$J.push(F$Z),F$y=this._width?this._width:Math.max(F$y,F$Z.width*F$Z.scaleX))}this.sortItem(F$J);var F$m=0;for(F$T=0,F$V=F$J.length;F$T<F$V;F$T++)(F$Z=F$J[F$T]).y=F$m,F$m+=F$Z.height*F$Z.scaleY+this._space,"left"==this._align?F$Z.x=0:"center"==this._align?F$Z.x=.5*(F$y-F$Z.width*F$Z.scaleX):"right"==this._align&&(F$Z.x=F$y-F$Z.width*F$Z.scaleX);this.changeSize()},F$R(0,F$T,"width",F$J.prototype._$get_width,function(F$J){this._width!=F$J&&(F$o.superSet(F$F,this,"width",F$J),this.callLater(this.changeItems))}),F$y.NONE="none",F$y.LEFT="left",F$y.CENTER="center",F$y.RIGHT="right",F$y}(F$F),F$nJ=function(F$J){function F$y(){F$y.__super.call(this)}return F$m(F$y,"laya.ui.RadioGroup",F$N),F$y.prototype.createItem=function(F$J,F$y){return new F$w(F$J,F$y)},F$y}(),F$KJ=function(F$J){function F$y(){F$y.__super.call(this)}return F$m(F$y,"laya.ui.Tab",F$N),F$y.prototype.createItem=function(F$J,F$y){return new F$x(F$J,F$y)},F$y}(),F$AJ=function(F$y){function F$T(F$J){this._vScrollBar=null,this._hScrollBar=null,void 0===F$J&&(F$J=""),F$T.__super.call(this,F$J)}F$m(F$T,"laya.ui.TextArea",F$y);var F$J=F$T.prototype;return F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},F$J.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},F$J.onVBarChanged=function(F$J){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},F$J.onHBarChanged=function(F$J){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},F$J.changeScroll=function(){var F$J=this._vScrollBar&&0<this._tf.maxScrollY,F$y=this._hScrollBar&&0<this._tf.maxScrollX,F$T=F$J?this._width-this._vScrollBar.width:this._width,F$V=F$y?this._height-this._hScrollBar.height:this._height,F$Z=this._tf.padding||F$_.labelPadding;this._tf.width=F$T,this._tf.height=F$V,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-F$Z[2],this._vScrollBar.y=F$Z[1],this._vScrollBar.height=this._height-(F$y?this._hScrollBar.height:0)-F$Z[1]-F$Z[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=F$V/Math.max(this._tf.textHeight,F$V),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=F$J),this._hScrollBar&&(this._hScrollBar.x=F$Z[0],this._hScrollBar.y=this._height-this._hScrollBar.height-F$Z[3],this._hScrollBar.width=this._width-(F$J?this._vScrollBar.width:0)-F$Z[0]-F$Z[2],this._hScrollBar.scrollSize=Math.max(.033*F$T,1),this._hScrollBar.thumbPercent=F$T/Math.max(this._tf.textWidth,F$T),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=F$y)},F$J.scrollTo=function(F$J){this.commitMeasure(),this._tf.scrollY=F$J},F$R(0,F$J,"scrollY",function(){return this._tf.scrollY}),F$R(0,F$J,"width",F$y.prototype._$get_width,function(F$J){F$o.superSet(F$TJ,this,"width",F$J),this.callLater(this.changeScroll)}),F$R(0,F$J,"hScrollBar",function(){return this._hScrollBar}),F$R(0,F$J,"height",F$y.prototype._$get_height,function(F$J){F$o.superSet(F$TJ,this,"height",F$J),this.callLater(this.changeScroll)}),F$R(0,F$J,"maxScrollX",function(){return this._tf.maxScrollX}),F$R(0,F$J,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(F$J){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new F$yJ),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=F$J}),F$R(0,F$J,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(F$J){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new F$p),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=F$J}),F$R(0,F$J,"vScrollBar",function(){return this._vScrollBar}),F$R(0,F$J,"maxScrollY",function(){return this._tf.maxScrollY}),F$R(0,F$J,"scrollX",function(){return this._tf.scrollX}),F$T}(F$TJ);!function(F$J){function F$y(){this._uiView=null,this.isCloseOther=!1,F$y.__super.call(this)}F$m(F$y,"laya.ui.AsynDialog",F$ZJ);var F$T=F$y.prototype;F$T.createView=function(F$J){this._uiView=F$J},F$T._open=function(F$J,F$y,F$T){this.isModal=F$J,this.isCloseOther=F$y,F$ZJ.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},F$T.onCreated=function(){this.createUI(),this.onOpen()},F$T.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},F$T.onOpen=function(){F$ZJ.manager.open(this,this.isCloseOther),F$ZJ.manager.lock(!1)},F$T.close=function(F$J,F$y){void 0===F$y&&(F$y=!0),F$ZJ.manager.close(this),this.onClose()},F$T.onClose=function(){},F$T.destroy=function(F$J){void 0===F$J&&(F$J=!0),laya.ui.View.prototype.destroy.call(this,F$J),this._uiView=null,this.onDestroy()},F$T.onDestroy=function(){}}();F$o.__init([F$d])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$J,F$y){"use strict";for(var F$T in Object.defineProperty(F$y,"__esModule",{value:!0}),Laya){var F$V=Laya[F$T];F$V&&F$V.__isclass&&(F$y[F$T]=F$V)}}),function(F$M,F$J,F$P){F$P.un,F$P.uns;var F$e=F$P.static,F$G=F$P.class,F$B=F$P.getset,F$V=F$P.__newvec,F$H=laya.maths.Arith,F$R=laya.webgl.atlas.AtlasResourceManager,F$T=laya.webgl.shader.BaseShader,F$i=laya.utils.Browser,F$n=laya.webgl.utils.Buffer,F$l=laya.utils.Byte,F$Z=laya.utils.ClassUtils,F$K=F$P.Config,F$m=(laya.events.Event,laya.events.EventDispatcher),F$_=laya.utils.Handler,F$E=laya.net.Loader,F$y=laya.net.LoaderManager,F$A=(laya.maths.MathUtil,laya.display.Node),F$o=laya.renders.Render,F$$=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),F$s=laya.resource.Resource,F$O=laya.utils.RunDriver,F$L=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),F$a=laya.display.Sprite,F$q=laya.utils.Stat,F$r=laya.utils.StringKey,F$t=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),F$D=laya.utils.Utils,F$v=laya.webgl.WebGL,F$Q=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;F$P.interface("laya.d3.core.IClone"),F$P.interface("laya.d3.graphics.IVertex"),F$P.interface("laya.d3.core.render.IUpdate"),F$P.interface("laya.d3.core.scene.ITreeNode"),F$P.interface("laya.d3.core.render.IRenderable");(function(){function F$x(){}F$G(F$x,"laya.d3.animation.AnimationClipParser01"),F$x.READ_DATA=function(){F$x._DATA.offset=F$x._reader.getUint32(),F$x._DATA.size=F$x._reader.getUint32()},F$x.READ_BLOCK=function(){for(var F$J=F$x._BLOCK.count=F$x._reader.getUint16(),F$y=F$x._BLOCK.blockStarts=[],F$T=F$x._BLOCK.blockLengths=[],F$V=0;F$V<F$J;F$V++)F$y.push(F$x._reader.getUint32()),F$T.push(F$x._reader.getUint32())},F$x.READ_STRINGS=function(){var F$J=F$x._reader.getUint32(),F$y=F$x._reader.getUint16(),F$T=F$x._reader.pos;F$x._reader.pos=F$J+F$x._DATA.offset;for(var F$V=0;F$V<F$y;F$V++)F$x._strings[F$V]=F$x._reader.readUTFString();F$x._reader.pos=F$T},F$x.parse=function(F$J,F$y){F$x._animationClip=F$J;(F$x._reader=F$y).__getBuffer();F$x.READ_DATA(),F$x.READ_BLOCK(),F$x.READ_STRINGS();for(var F$T=0,F$V=F$x._BLOCK.count;F$T<F$V;F$T++){var F$Z=F$y.getUint16(),F$m=F$x._strings[F$Z],F$R=F$x["READ_"+F$m];if(null==F$R)throw new Error("model file err,no this function:"+F$Z+" "+F$m);F$R.call()}},F$x.READ_ANIMATIONS=function(){var F$J,F$y=0,F$T=0,F$V=F$x._reader,F$Z=F$V.__getBuffer(),F$m=[],F$R=F$V.getUint8();for(F$m.length=F$R,F$y=0;F$y<F$R;F$y++)F$m[F$y]=F$V.getUint16();var F$n=[],F$K=F$V.getUint16();for(F$n.length=F$K,F$y=0;F$y<F$K;F$y++)F$n[F$y]=F$V.getFloat32();var F$A=F$x._animationClip;F$A.name=F$x._strings[F$V.getUint16()];var F$$=F$A._duration=F$V.getFloat32();F$A.islooping=!!F$V.getByte(),F$A._frameRate=F$V.getInt16();var F$e=F$V.getInt16(),F$M=F$A._nodes=new Array;F$M.length=F$e,(F$A._publicClipDatas=[]).length=F$e;var F$G=F$A._nodesMap={},F$B=0,F$o=0;for(F$y=0;F$y<F$e;F$y++){F$J=F$M[F$y]=new F$U;var F$s=F$V.getUint16(),F$E=F$J.path=[];for(F$E.length=F$s,F$T=0;F$T<F$s;F$T++)F$E[F$T]=F$x._strings[F$V.getUint16()];var F$O=F$E.join("/"),F$L=F$G[F$O];F$L||(F$G[F$O]=F$L=[]),F$L.push(F$J);var F$H=F$V.getInt16();-1!==F$H&&(F$J.componentType=F$x._strings[F$H]);var F$P=F$I._propertyIndexDic[F$x._strings[F$V.getUint16()]];if(null==F$P)throw new Error("AnimationClipParser01:unknown property name.");var F$l=F$P<4,F$a=!F$l||F$l&&""===F$E[0];(F$J._cacheProperty=F$a)?F$B++:F$o++,F$J.propertyNameID=F$P;var F$q=F$m[F$V.getUint8()];F$J.keyFrameWidth=F$q/4;var F$r=F$J.keyFrames=[],F$D=F$r.length=F$V.getUint16(),F$_=null,F$t=NaN;for(F$T=0;F$T<F$D;F$T++){var F$v=F$r[F$T]=new F$Y;F$t=F$v.startTime=F$n[F$V.getUint16()];var F$Q=F$V.pos;F$v.inTangent=new Float32Array(F$Z.slice(F$Q,F$Q+F$q)),F$V.pos+=F$q,F$Q=F$V.pos,F$v.outTangent=new Float32Array(F$Z.slice(F$Q,F$Q+F$q)),F$V.pos+=F$q,F$Q=F$V.pos,F$v.data=new Float32Array(F$Z.slice(F$Q,F$Q+F$q)),F$V.pos+=F$q,F$_&&(F$_.next=F$v,F$_.duration=F$t-F$_.startTime),F$_=F$v}F$v.next=null,F$v.duration=F$$-F$t}var F$i=F$A._nodeToCachePropertyMap=new Int32Array(F$e),F$c=F$A._cachePropertyMap=new Int32Array(F$B),F$u=F$A._unCachePropertyMap=new Int32Array(F$o);for(F$B=F$o=0,F$y=0;F$y<F$e;F$y++)(F$J=F$M[F$y])._cacheProperty?(F$i[F$y]=F$B,F$c[F$B++]=F$y):F$u[F$o++]=F$y},F$x._animationClip=null,F$x._reader=null,F$x._strings=[],F$e(F$x,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function F$f(){}F$G(F$f,"laya.d3.animation.AnimationClipParser02"),F$f.READ_DATA=function(){F$f._DATA.offset=F$f._reader.getUint32(),F$f._DATA.size=F$f._reader.getUint32()},F$f.READ_BLOCK=function(){for(var F$J=F$f._BLOCK.count=F$f._reader.getUint16(),F$y=F$f._BLOCK.blockStarts=[],F$T=F$f._BLOCK.blockLengths=[],F$V=0;F$V<F$J;F$V++)F$y.push(F$f._reader.getUint32()),F$T.push(F$f._reader.getUint32())},F$f.READ_STRINGS=function(){var F$J=F$f._reader.getUint32(),F$y=F$f._reader.getUint16(),F$T=F$f._reader.pos;F$f._reader.pos=F$J+F$f._DATA.offset;for(var F$V=0;F$V<F$y;F$V++)F$f._strings[F$V]=F$f._reader.readUTFString();F$f._reader.pos=F$T},F$f.parse=function(F$J,F$y){F$f._animationClip=F$J;(F$f._reader=F$y).__getBuffer();F$f.READ_DATA(),F$f.READ_BLOCK(),F$f.READ_STRINGS();for(var F$T=0,F$V=F$f._BLOCK.count;F$T<F$V;F$T++){var F$Z=F$y.getUint16(),F$m=F$f._strings[F$Z],F$R=F$f["READ_"+F$m];if(null==F$R)throw new Error("model file err,no this function:"+F$Z+" "+F$m);F$R.call()}},F$f.READ_ANIMATIONS=function(){var F$J,F$y=0,F$T=0,F$V=F$f._reader,F$Z=F$V.__getBuffer(),F$m=[],F$R=F$V.getUint8();for(F$m.length=F$R,F$y=0;F$y<F$R;F$y++)F$m[F$y]=F$V.getUint16();var F$n=[],F$K=F$V.getUint16();for(F$n.length=F$K,F$y=0;F$y<F$K;F$y++)F$n[F$y]=F$V.getFloat32();var F$A=F$f._animationClip;F$A.name=F$f._strings[F$V.getUint16()];var F$$=F$A._duration=F$V.getFloat32();F$A.islooping=!!F$V.getByte(),F$A._frameRate=F$V.getInt16();var F$e=F$V.getInt16(),F$M=F$A._nodes=new Array;F$M.length=F$e,(F$A._publicClipDatas=[]).length=F$e;var F$G=F$A._nodesMap={},F$B=0,F$o=0;for(F$y=0;F$y<F$e;F$y++){F$J=F$M[F$y]=new F$U;var F$s=F$V.getUint16(),F$E=F$J.path=[];for(F$E.length=F$s,F$T=0;F$T<F$s;F$T++)F$E[F$T]=F$f._strings[F$V.getUint16()];var F$O=F$E.join("/"),F$L=F$G[F$O];F$L||(F$G[F$O]=F$L=[]),F$L.push(F$J);var F$H=F$V.getInt16();-1!==F$H&&(F$J.componentType=F$f._strings[F$H]);var F$P=F$I._propertyIndexDic[F$f._strings[F$V.getUint16()]];if(null==F$P)throw new Error("AnimationClipParser02:unknown property name.");var F$l=F$P<4,F$a=!F$l||F$l&&""===F$E[0];(F$J._cacheProperty=F$a)?F$B++:F$o++,F$J.propertyNameID=F$P;var F$q=F$m[F$V.getUint8()];F$J.keyFrameWidth=F$q/4;var F$r=F$J.keyFrames=[],F$D=F$r.length=F$V.getUint16(),F$_=null,F$t=NaN;for(F$T=0;F$T<F$D;F$T++){var F$v=F$r[F$T]=new F$Y;F$t=F$v.startTime=F$n[F$V.getUint16()];var F$Q=F$V.pos;F$v.inTangent=new Float32Array(F$Z.slice(F$Q,F$Q+F$q)),F$V.pos+=F$q,F$Q=F$V.pos,F$v.outTangent=new Float32Array(F$Z.slice(F$Q,F$Q+F$q)),F$V.pos+=F$q,F$Q=F$V.pos,F$v.data=new Float32Array(F$Z.slice(F$Q,F$Q+F$q)),F$V.pos+=F$q,F$_&&(F$_.next=F$v,F$_.duration=F$t-F$_.startTime),F$_=F$v}F$v.next=null,F$v.duration=F$$-F$t}var F$i=F$V.getUint16();for(F$y=0;F$y<F$i;F$y++){var F$c,F$u=new F$W;F$u.time=F$V.getFloat32(),F$u.eventName=F$f._strings[F$V.getUint16()];var F$x=F$V.getUint16();for(0<F$x&&(F$u.params=F$c=[]),F$T=0;F$T<F$x;F$T++){switch(F$V.getByte()){case 0:F$c.push(!!F$V.getByte());break;case 1:F$c.push(F$V.getInt32());break;case 2:F$c.push(F$V.getFloat32());break;case 3:F$c.push(F$f._strings[F$V.getUint16()]);break;default:throw new Error("unknown type.")}}F$A.addEvent(F$u)}var F$k=F$A._nodeToCachePropertyMap=new Int32Array(F$e),F$X=F$A._cachePropertyMap=new Int32Array(F$B),F$S=F$A._unCachePropertyMap=new Int32Array(F$o);for(F$B=F$o=0,F$y=0;F$y<F$e;F$y++)(F$J=F$M[F$y])._cacheProperty?(F$k[F$y]=F$B,F$X[F$B++]=F$y):F$S[F$o++]=F$y},F$f._animationClip=null,F$f._reader=null,F$f._strings=[],F$e(F$f,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var F$W=function(){function F$J(){this.time=NaN,this.eventName=null,this.params=null}return F$G(F$J,"laya.d3.animation.AnimationEvent"),F$J}(),F$I=function(){function F$V(){this._childs=[],this.transform=new F$Oy(this)}F$G(F$V,"laya.d3.animation.AnimationNode");var F$J=F$V.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.addChild=function(F$J){F$J._parent=this,F$J.transform.setParent(this.transform),this._childs.push(F$J)},F$J.removeChild=function(F$J){var F$y=this._childs.indexOf(F$J);-1!==F$y&&this._childs.splice(F$y,1)},F$J.getChildByName=function(F$J){for(var F$y=0,F$T=this._childs.length;F$y<F$T;F$y++){var F$V=this._childs[F$y];if(F$V.name===F$J)return F$V}return null},F$J.getChildByIndex=function(F$J){return this._childs[F$J]},F$J.getChildCount=function(){return this._childs.length},F$J.cloneTo=function(F$J){var F$y=F$J;F$y.name=this.name;for(var F$T=0,F$V=this._childs.length;F$T<F$V;F$T++){var F$Z=this._childs[F$T],F$m=F$Z.clone();F$y.addChild(F$m);var F$R=F$Z.transform,F$n=F$m.transform;F$n.setLocalPosition(F$R.getLocalPosition()),F$n.setLocalRotation(F$R.getLocalRotation()),F$n.setLocalScale(F$R.getLocalScale()),F$n._localRotationEuler=F$R._localRotationEuler,F$n._setWorldMatrixIgnoreUpdate(F$R.getWorldMatrix())}},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$V.__init__=function(){F$V.registerAnimationNodeProperty("localPosition",F$V._getLocalPosition,F$V._setLocalPosition),F$V.registerAnimationNodeProperty("localRotation",F$V._getLocalRotation,F$V._setLocalRotation),F$V.registerAnimationNodeProperty("localScale",F$V._getLocalScale,F$V._setLocalScale),F$V.registerAnimationNodeProperty("localRotationEuler",F$V._getLocalRotationEuler,F$V._setLocalRotationEuler),F$V.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",F$V._getParticleRenderSharedMaterialTintColor,F$V._setParticleRenderSharedMaterialTintColor),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",F$V._getMeshRenderSharedMaterialTilingOffset,F$V._setMeshRenderSharedMaterialTilingOffset),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",F$V._getMeshRenderSharedMaterialAlbedo,F$V._setMeshRenderSharedMaterialAlbedo),F$V.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",F$V._getSkinnedMeshRenderSharedMaterialTilingOffset,F$V._setSkinnedMeshRenderSharedMaterialTilingOffset),F$V.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",F$V._getSkinnedMeshRenderSharedMaterialAlbedo,F$V._setSkinnedMeshRenderSharedMaterialAlbedo),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",F$V._getMeshRenderSharedMaterialAlbedo,F$V._setMeshRenderSharedMaterialAlbedo),F$V.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",F$V._getSkinnedMeshRenderSharedMaterialAlbedo,F$V._setSkinnedMeshRenderSharedMaterialAlbedo),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",F$V._getMeshRenderSharedMaterialIntensity,F$V._setMeshRenderSharedMaterialIntensity),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",F$V._getMeshRenderSharedMaterialAlpha,F$V._setMeshRenderSharedMaterialAlpha),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",F$V._getMeshRenderSharedMaterialAlphaColor,F$V._setMeshRenderSharedMaterialAlphaColor),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",F$V._getMeshRenderSharedMaterialBaseColor,F$V._setMeshRenderSharedMaterialBaseColor),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",F$V._getMeshRenderSharedMaterialDissolve,F$V._setMeshRenderSharedMaterialDissolve),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",F$V._getMeshRenderSharedMaterialDissolveSpeed,F$V._setMeshRenderSharedMaterialDissolveSpeed),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",F$V._getMeshRenderSharedMaterialMMultiplier,F$V._setMeshRenderSharedMaterialMMultiplier),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",F$V._getMeshRenderSharedMaterialBaseScrollSpeedX,F$V._setMeshRenderSharedMaterialBaseScrollSpeedX),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",F$V._getMeshRenderSharedMaterialBaseScrollSpeedY,F$V._setMeshRenderSharedMaterialBaseScrollSpeedY),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",F$V._getMeshRenderSharedMaterialSecondScrollSpeedX,F$V._setMeshRenderSharedMaterialSecondScrollSpeedX),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",F$V._getMeshRenderSharedMaterialSecondScrollSpeedY,F$V._setMeshRenderSharedMaterialSecondScrollSpeedY),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",F$V._getMeshRenderSharedMaterialDetailTilingOffset,F$V._setMeshRenderSharedMaterialDetailTilingOffset),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",F$V._getMeshRenderSharedMaterialDissolveTilingOffset,F$V._setMeshRenderSharedMaterialDissolveTilingOffset),F$V.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",F$V._getMeshRenderSharedMaterialMaskTilingOffset,F$V._setMeshRenderSharedMaterialMaskTilingOffset)},F$V.registerAnimationNodeProperty=function(F$J,F$y,F$T){if(F$V._propertyIndexDic[F$J])throw new Error("AnimationNode: this propertyName has registered.");F$V._propertyIndexDic[F$J]=F$V._propertyIDCounter,F$V._propertyGetFuncs[F$V._propertyIDCounter]=F$y,F$V._propertySetFuncs[F$V._propertyIDCounter]=F$T,F$V._propertyIDCounter++},F$V._getLocalPosition=function(F$J,F$y){return F$J?F$J.transform.getLocalPosition():F$y._transform.localPosition.elements},F$V._setLocalPosition=function(F$J,F$y,F$T){if(F$J)F$J.transform.setLocalPosition(F$T);else{var F$V=F$y._transform,F$Z=F$V.localPosition;F$Z.elements=F$T,F$V.localPosition=F$Z}},F$V._getLocalRotation=function(F$J,F$y){return F$J?F$J.transform.getLocalRotation():F$y._transform.localRotation.elements},F$V._setLocalRotation=function(F$J,F$y,F$T){if(F$J)F$J.transform.setLocalRotation(F$T);else{var F$V=F$y._transform,F$Z=F$V.localRotation;F$Z.elements=F$T,F$V.localRotation=F$Z}},F$V._getLocalScale=function(F$J,F$y){return F$J?F$J.transform.getLocalScale():F$y._transform.localScale.elements},F$V._setLocalScale=function(F$J,F$y,F$T){if(F$J)F$J.transform.setLocalScale(F$T);else{var F$V=F$y._transform,F$Z=F$V.localScale;F$Z.elements=F$T,F$V.localScale=F$Z}},F$V._getLocalRotationEuler=function(F$J,F$y){return F$J?F$J.transform.getLocalRotationEuler():F$y._transform.localRotationEuler.elements},F$V._setLocalRotationEuler=function(F$J,F$y,F$T){if(F$J)F$J.transform.setLocalRotationEuler(F$T);else{var F$V=F$y._transform,F$Z=F$V.localRotationEuler;F$Z.elements=F$T,F$V.localRotationEuler=F$Z}},F$V._getMeshRenderSharedMaterialTilingOffset=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return F$y.meshRender.sharedMaterial.tilingOffset.elements},F$V._setMeshRenderSharedMaterialTilingOffset=function(F$J,F$y,F$T){var F$V,F$Z;if(F$J){var F$m=F$J.transform._entity;F$m&&((F$Z=(F$V=F$m.owner.meshRender.material).tilingOffset).elements=F$T,F$V.tilingOffset=F$Z)}else(F$Z=(F$V=F$y.meshRender.material).tilingOffset).elements=F$T,F$V.tilingOffset=F$Z},F$V._getMeshRenderSharedMaterialAlbedo=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.albedoColor.elements:null}return F$y.meshRender.sharedMaterial.albedoColor.elements},F$V._setMeshRenderSharedMaterialAlbedo=function(F$J,F$y,F$T){var F$V,F$Z;if(F$J){var F$m=F$J.transform._entity;F$m&&((F$Z=(F$V=F$m.owner.meshRender.material).albedoColor).elements=F$T,F$V.albedoColor=F$Z)}else(F$Z=(F$V=F$y.meshRender.material).albedoColor).elements=F$T,F$V.albedoColor=F$Z},F$V._getSkinnedMeshRenderSharedMaterialTilingOffset=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return F$y.skinnedMeshRender.sharedMaterial.tilingOffset.elements},F$V._setSkinnedMeshRenderSharedMaterialTilingOffset=function(F$J,F$y,F$T){var F$V,F$Z;if(F$J){var F$m=F$J.transform._entity;F$m&&((F$Z=(F$V=F$m.owner.skinnedMeshRender.material).tilingOffset).elements=F$T,F$V.tilingOffset=F$Z)}else(F$Z=(F$V=F$y.skinnedMeshRender.material).tilingOffset).elements=F$T,F$V.tilingOffset=F$Z},F$V._getSkinnedMeshRenderSharedMaterialAlbedo=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return F$y.skinnedMeshRender.sharedMaterial.albedoColor.elements},F$V._setSkinnedMeshRenderSharedMaterialAlbedo=function(F$J,F$y,F$T){var F$V,F$Z;if(F$J){var F$m=F$J.transform._entity;F$m&&((F$Z=(F$V=F$m.owner.skinnedMeshRender.material).albedoColor).elements=F$T,F$V.albedoColor=F$Z)}else(F$Z=(F$V=F$y.skinnedMeshRender.material).albedoColor).elements=F$T,F$V.albedoColor=F$Z},F$V._getParticleRenderSharedMaterialTintColor=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.particleRender.sharedMaterial.tintColor.elements:null}return F$y.particleRender.sharedMaterial.tintColor.elements},F$V._setParticleRenderSharedMaterialTintColor=function(F$J,F$y,F$T){var F$V,F$Z;if(F$J){var F$m=F$J.transform._entity;F$m&&((F$Z=(F$V=F$m.owner.particleRender.material).tintColor).elements=F$T,F$V.tintColor=F$Z)}else(F$Z=(F$V=F$y.particleRender.material).tintColor).elements=F$T,F$V.tintColor=F$Z},F$V._getMeshRenderSharedMaterialAlphaColor=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.alphaColor.elements:null}return F$y.meshRender.sharedMaterial.alphaColor.elements},F$V._setMeshRenderSharedMaterialAlphaColor=function(F$J,F$y,F$T){var F$V,F$Z;if(F$J){var F$m=F$J.transform._entity;F$m&&((F$Z=(F$V=F$m.owner.meshRender.material).alphaColor).elements=F$T,F$V.alphaColor=F$Z)}else(F$Z=(F$V=F$y.meshRender.material).alphaColor).elements=F$T,F$V.alphaColor=F$Z},F$V._getMeshRenderSharedMaterialBaseColor=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.baseColor.elements:null}return F$y.meshRender.sharedMaterial.baseColor.elements},F$V._setMeshRenderSharedMaterialBaseColor=function(F$J,F$y,F$T){var F$V,F$Z;if(F$J){var F$m=F$J.transform._entity;F$m&&((F$Z=(F$V=F$m.owner.meshRender.material).baseColor).elements=F$T,F$V.baseColor=F$Z)}else(F$Z=(F$V=F$y.meshRender.material).baseColor).elements=F$T,F$V.baseColor=F$Z},F$V._getMeshRenderSharedMaterialDissolve=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.dissolve:0}return F$y.meshRender.sharedMaterial.dissolve},F$V._setMeshRenderSharedMaterialDissolve=function(F$J,F$y,F$T){if(F$J){var F$V=F$J.transform._entity;F$V&&(F$V.owner.meshRender.material.dissolve=F$T[0])}else F$y.meshRender.material.dissolve=F$T[0]},F$V._getMeshRenderSharedMaterialDissolveSpeed=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.dissolveSpeed:0}return F$y.meshRender.sharedMaterial.dissolveSpeed},F$V._setMeshRenderSharedMaterialDissolveSpeed=function(F$J,F$y,F$T){if(F$J){var F$V=F$J.transform._entity;F$V&&(F$V.owner.meshRender.material.dissolveSpeed=F$T[0])}else F$y.meshRender.material.dissolveSpeed=F$T[0]},F$V._getMeshRenderSharedMaterialMMultiplier=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.mMultiplier:0}return F$y.meshRender.sharedMaterial.mMultiplier},F$V._setMeshRenderSharedMaterialMMultiplier=function(F$J,F$y,F$T){if(F$J){var F$V=F$J.transform._entity;F$V&&(F$V.owner.meshRender.material.mMultiplier=F$T[0])}else F$y.meshRender.material.mMultiplier=F$T[0]},F$V._getMeshRenderSharedMaterialBaseScrollSpeedX=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return F$y.meshRender.sharedMaterial.baseScrollSpeedX},F$V._setMeshRenderSharedMaterialBaseScrollSpeedX=function(F$J,F$y,F$T){if(F$J){var F$V=F$J.transform._entity;F$V&&(F$V.owner.meshRender.material.baseScrollSpeedX=F$T[0])}else F$y.meshRender.material.baseScrollSpeedX=F$T[0]},F$V._getMeshRenderSharedMaterialBaseScrollSpeedY=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return F$y.meshRender.sharedMaterial.baseScrollSpeedY},F$V._setMeshRenderSharedMaterialBaseScrollSpeedY=function(F$J,F$y,F$T){if(F$J){var F$V=F$J.transform._entity;F$V&&(F$V.owner.meshRender.material.baseScrollSpeedY=F$T[0])}else F$y.meshRender.material.baseScrollSpeedY=F$T[0]},F$V._getMeshRenderSharedMaterialSecondScrollSpeedX=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return F$y.meshRender.sharedMaterial.secondScrollSpeedX},F$V._setMeshRenderSharedMaterialSecondScrollSpeedX=function(F$J,F$y,F$T){if(F$J){var F$V=F$J.transform._entity;F$V&&(F$V.owner.meshRender.material.secondScrollSpeedX=F$T[0])}else F$y.meshRender.material.secondScrollSpeedX=F$T[0]},F$V._getMeshRenderSharedMaterialSecondScrollSpeedY=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return F$y.meshRender.sharedMaterial.secondScrollSpeedY},F$V._setMeshRenderSharedMaterialSecondScrollSpeedY=function(F$J,F$y,F$T){if(F$J){var F$V=F$J.transform._entity;F$V&&(F$V.owner.meshRender.material.secondScrollSpeedY=F$T[0])}else F$y.meshRender.material.secondScrollSpeedY=F$T[0]},F$V._getMeshRenderSharedMaterialAlpha=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.alpha:0}return F$y.meshRender.sharedMaterial.alpha},F$V._setMeshRenderSharedMaterialAlpha=function(F$J,F$y,F$T){if(F$J){var F$V=F$J.transform._entity;F$V&&(F$V.owner.meshRender.material.alpha=F$T[0])}else F$y.meshRender.material.alpha=F$T[0]},F$V._getMeshRenderSharedMaterialIntensity=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.intensity:0}return F$y.meshRender.sharedMaterial.intensity},F$V._setMeshRenderSharedMaterialIntensity=function(F$J,F$y,F$T){if(F$J){var F$V=F$J.transform._entity;F$V&&(F$V.owner.meshRender.material.intensity=F$T[0])}else F$y.meshRender.material.intensity=F$T[0]},F$V._getMeshRenderSharedMaterialDetailTilingOffset=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return F$y.meshRender.sharedMaterial.detailTilingOffset.elements},F$V._setMeshRenderSharedMaterialDetailTilingOffset=function(F$J,F$y,F$T){var F$V,F$Z;if(F$J){var F$m=F$J.transform._entity;F$m&&((F$Z=(F$V=F$m.owner.meshRender.material).detailTilingOffset).elements=F$T,F$V.detailTilingOffset=F$Z)}else(F$Z=(F$V=F$y.meshRender.material).detailTilingOffset).elements=F$T,F$V.detailTilingOffset=F$Z},F$V._getMeshRenderSharedMaterialDissolveTilingOffset=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return F$y.meshRender.sharedMaterial.dissolveTilingOffset.elements},F$V._setMeshRenderSharedMaterialDissolveTilingOffset=function(F$J,F$y,F$T){var F$V,F$Z;if(F$J){var F$m=F$J.transform._entity;F$m&&((F$Z=(F$V=F$m.owner.meshRender.material).dissolveTilingOffset).elements=F$T,F$V.dissolveTilingOffset=F$Z)}else(F$Z=(F$V=F$y.meshRender.material).dissolveTilingOffset).elements=F$T,F$V.dissolveTilingOffset=F$Z},F$V._getMeshRenderSharedMaterialMaskTilingOffset=function(F$J,F$y){if(F$J){var F$T=F$J.transform._entity;return F$T?F$T.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return F$y.meshRender.sharedMaterial.maskTilingOffset.elements},F$V._setMeshRenderSharedMaterialMaskTilingOffset=function(F$J,F$y,F$T){var F$V,F$Z;if(F$J){var F$m=F$J.transform._entity;F$m&&((F$Z=(F$V=F$m.owner.meshRender.material).maskTilingOffset).elements=F$T,F$V.maskTilingOffset=F$Z)}else(F$Z=(F$V=F$y.meshRender.material).maskTilingOffset).elements=F$T,F$V.maskTilingOffset=F$Z},F$V._propertyIDCounter=0,F$V._propertyIndexDic={},F$V._propertySetFuncs=[],F$V._propertyGetFuncs=[],F$V}(),F$Y=function(){function F$J(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return F$G(F$J,"laya.d3.animation.Keyframe"),F$J}(),F$U=function(){function F$J(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return F$G(F$J,"laya.d3.animation.KeyframeNode"),F$J}(),F$c=(function(){function F$J(){this._tempVector30=new F$Ry,this._tempVector31=new F$Ry,this._tempVector32=new F$Ry,this._a=new F$Ry,this._b=new F$Ry,this._c=new F$Ry,this._d=new F$Ry}F$G(F$J,"laya.d3.core.glitter.SplineCurvePositionVelocity");var F$y=F$J.prototype;F$y.Init=function(F$J,F$y,F$T,F$V){F$J.cloneTo(this._d),F$y.cloneTo(this._c),F$Ry.scale(F$J,2,this._a),F$Ry.scale(F$T,2,this._tempVector30),F$Ry.subtract(this._a,this._tempVector30,this._a),F$Ry.add(this._a,F$y,this._a),F$Ry.add(this._a,F$V,this._a),F$Ry.scale(F$T,3,this._b),F$Ry.scale(F$J,3,this._tempVector30),F$Ry.subtract(this._b,this._tempVector30,this._b),F$Ry.subtract(this._b,F$V,this._b),F$Ry.scale(F$y,2,this._tempVector30),F$Ry.subtract(this._b,this._tempVector30,this._b)},F$y.Slerp=function(F$J,F$y){F$Ry.scale(this._a,F$J*F$J*F$J,this._tempVector30),F$Ry.scale(this._b,F$J*F$J,this._tempVector31),F$Ry.scale(this._c,F$J,this._tempVector32),F$Ry.add(this._tempVector30,this._tempVector31,F$y),F$Ry.add(F$y,this._tempVector32,F$y),F$Ry.add(F$y,this._d,F$y)}}(),function(){function F$X(F$J,F$y,F$T,F$V){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=F$J,this._h=F$y,this._minHeight=F$T,this._maxHeight=F$V}F$G(F$X,"laya.d3.core.HeightMap");var F$J=F$X.prototype;F$J._inBounds=function(F$J,F$y){return 0<=F$J&&F$J<this._h&&0<=F$y&&F$y<this._w},F$J.getHeight=function(F$J,F$y){return this._inBounds(F$J,F$y)?this._datas[F$J][F$y]:NaN},F$B(0,F$J,"width",function(){return this._w}),F$B(0,F$J,"height",function(){return this._h}),F$B(0,F$J,"maxHeight",function(){return this._maxHeight}),F$B(0,F$J,"minHeight",function(){return this._minHeight}),F$X.creatFromMesh=function(F$J,F$y,F$T,F$V){for(var F$Z=[],F$m=[],F$R=F$J.getSubMeshCount(),F$n=0;F$n<F$R;F$n++){for(var F$K=F$J.getSubMesh(F$n),F$A=F$K._getVertexBuffer(),F$$=F$A.getData(),F$e=[],F$M=0;F$M<F$$.length;F$M+=F$A.vertexDeclaration.vertexStride/4){var F$G=new F$Ry(F$$[F$M+0],F$$[F$M+1],F$$[F$M+2]);F$e.push(F$G)}F$Z.push(F$e);var F$B=F$K._getIndexBuffer();F$m.push(F$B.getData())}var F$o=F$J.boundingBox,F$s=F$o.min.x,F$E=F$o.min.z,F$O=F$o.max.x,F$L=F$o.max.z,F$H=F$o.min.y,F$P=F$o.max.y,F$l=F$O-F$s,F$a=F$L-F$E,F$q=F$V.elements[0]=F$l/(F$y-1),F$r=F$V.elements[1]=F$a/(F$T-1),F$D=new F$X(F$y,F$T,F$H,F$P),F$_=F$X._tempRay,F$t=F$_.direction.elements;F$t[0]=0,F$t[1]=-1,F$t[2]=0;var F$v=F$P+.1;F$_.origin.elements[1]=F$v;for(var F$Q=0;F$Q<F$T;F$Q++){var F$i=F$E+F$Q*F$r;F$D._datas[F$Q]=[];for(var F$c=0;F$c<F$y;F$c++){var F$u=F$s+F$c*F$q,F$x=F$_.origin.elements;F$x[0]=F$u,F$x[2]=F$i;var F$k=F$X._getPosition(F$_,F$Z,F$m);F$D._datas[F$Q][F$c]=F$k===Number.MAX_VALUE?NaN:F$v-F$k}}return F$D},F$X.createFromImage=function(F$J,F$y,F$T){for(var F$V=F$J.width,F$Z=F$J.height,F$m=new F$X(F$V,F$Z,F$y,F$T),F$R=(F$T-F$y)/254,F$n=F$J.getPixels(),F$K=0,F$A=0;F$A<F$Z;F$A++)for(var F$$=F$m._datas[F$A]=[],F$e=0;F$e<F$V;F$e++){var F$M=F$n[F$K++],F$G=F$n[F$K++],F$B=F$n[F$K++],F$o=F$n[F$K++];F$$[F$e]=255==F$M&&255==F$G&&255==F$B&&255==F$o?NaN:(F$M+F$G+F$B)/3*F$R+F$y}return F$m},F$X._getPosition=function(F$J,F$y,F$T){for(var F$V=Number.MAX_VALUE,F$Z=0;F$Z<F$y.length;F$Z++)for(var F$m=F$y[F$Z],F$R=F$T[F$Z],F$n=0;F$n<F$R.length;F$n+=3){var F$K=F$m[F$R[F$n+0]],F$A=F$m[F$R[F$n+1]],F$$=F$m[F$R[F$n+2]],F$e=F$By.rayIntersectsTriangle(F$J,F$K,F$A,F$$);!isNaN(F$e)&&F$e<F$V&&(F$V=F$e)}return F$V},F$e(F$X,["_tempRay",function(){return this._tempRay=new F$Zy(new F$Ry,new F$Ry)}])}(),function(){function F$Z(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}F$G(F$Z,"laya.d3.core.Layer");var F$J=F$Z.prototype;return F$J._binarySearchIndex=function(){for(var F$J=0,F$y=F$Z._collsionTestList.length-1,F$T=0;F$J<=F$y;){F$T=Math.floor((F$J+F$y)/2);var F$V=F$Z._collsionTestList[F$T];if(F$V==this._number)return F$T;F$V>this._number?F$y=F$T-1:F$J=F$T+1}return F$J},F$J._addCollider=function(F$J){0===this._colliders.length&&F$Z._collsionTestList.splice(this._binarySearchIndex(),0,this._number),F$J._isRigidbody?(this._colliders.unshift(F$J),this._nonRigidbodyOffset++):this._colliders.push(F$J)},F$J._removeCollider=function(F$J){var F$y=this._colliders.indexOf(F$J);F$y<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(F$y,1),0===this._colliders.length&&F$Z._collsionTestList.splice(F$Z._collsionTestList.indexOf(this._number),1)},F$B(0,F$J,"number",function(){return this._number}),F$B(0,F$J,"visible",function(){return this._visible},function(F$J){this._visible=F$J,F$Z._visibleLayers=F$J?F$Z._visibleLayers|this.mask:F$Z._visibleLayers&~this.mask}),F$B(0,F$J,"mask",function(){return this._mask}),F$B(1,F$Z,"visibleLayers",function(){return F$Z._visibleLayers},function(F$J){F$Z._visibleLayers=F$J;for(var F$y=0,F$T=F$Z._layerList.length;F$y<F$T;F$y++){var F$V=F$Z._layerList[F$y];F$V._visible=0!=(F$V._mask&F$Z._visibleLayers)}}),F$Z.__init__=function(){F$Z._layerList.length=31;for(var F$J=0;F$J<31;F$J++){var F$y=new F$Z;F$Z._layerList[F$J]=F$y,0===F$J?(F$y.name="Default Layer",F$y.visible=!0):(F$y.name="Layer-"+F$J,F$y.visible=!1),F$y._number=F$J,F$y._mask=Math.pow(2,F$J)}F$Z.currentCreationLayer=F$Z._layerList[0]},F$Z.getLayerByNumber=function(F$J){if(F$J<0||30<F$J)throw new Error("无法返回指定Layer，该number超出范围！");return F$Z._layerList[F$J]},F$Z.getLayerByName=function(F$J){for(var F$y=0;F$y<31;F$y++)if(F$Z._layerList[F$y].name===F$J)return F$Z._layerList[F$y];throw new Error("无法返回指定Layer,该name不存在")},F$Z.isVisible=function(F$J){return 0!=(F$J&F$Z._currentCameraCullingMask&F$Z._visibleLayers)},F$Z._layerList=[],F$Z._visibleLayers=2147483647,F$Z._collsionTestList=[],F$Z._currentCameraCullingMask=2147483647,F$Z.maxCount=31,F$Z.currentCreationLayer=null,F$Z}()),F$u=(function(){function F$J(F$J,F$y,F$T){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=F$J,this._minCount=F$y,this._maxCount=F$T}F$G(F$J,"laya.d3.core.particleShuriKen.module.Burst");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.cloneTo=function(F$J){var F$y=F$J;F$y._time=this._time,F$y._minCount=this._minCount,F$y._maxCount=this._maxCount},F$y.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$y,"time",function(){return this._time}),F$B(0,F$y,"minCount",function(){return this._minCount}),F$B(0,F$y,"maxCount",function(){return this._maxCount})}(),function(){function F$J(F$J){this._color=null,this.enbale=!1,this._color=F$J}F$G(F$J,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var F$y=F$J.prototype;F$y.cloneTo=function(F$J){var F$y=F$J;this._color.cloneTo(F$y._color),F$y.enbale=this.enbale},F$y.clone=function(){var F$J;switch(this._color.type){case 0:F$J=F$k.createByConstant(this._color.constant.clone());break;case 1:F$J=F$k.createByGradient(this._color.gradient.clone());break;case 2:F$J=F$k.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:F$J=F$k.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var F$y=new this.constructor(F$J);return F$y.enbale=this.enbale,F$y},F$B(0,F$y,"color",function(){return this._color})}(),function(){function F$J(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}F$G(F$J,"laya.d3.core.particleShuriKen.module.Emission");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),F$y._destroy=function(){this._bursts=null,this._destroyed=!0},F$y.getBurstsCount=function(){return this._bursts.length},F$y.getBurstByIndex=function(F$J){return this._bursts[F$J]},F$y.addBurst=function(F$J){var F$y=this._bursts.length;if(0<F$y)for(var F$T=0;F$T<F$y;F$T++)this._bursts[F$T].time>F$J.time&&this._bursts.splice(F$T,0,F$J);this._bursts.push(F$J)},F$y.removeBurst=function(F$J){var F$y=this._bursts.indexOf(F$J);-1!==F$y&&this._bursts.splice(F$y,1)},F$y.removeBurstByIndex=function(F$J){this._bursts.splice(F$J,1)},F$y.clearBurst=function(){this._bursts.length=0},F$y.cloneTo=function(F$J){var F$y=F$J,F$T=F$y._bursts;F$T.length=this._bursts.length;for(var F$V=0,F$Z=this._bursts.length;F$V<F$Z;F$V++){var F$m=F$T[F$V];F$m?this._bursts[F$V].cloneTo(F$m):F$T[F$V]=this._bursts[F$V].clone()}F$y._emissionRate=this._emissionRate,F$y.enbale=this.enbale},F$y.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$y,"destroyed",function(){return this._destroyed}),F$B(0,F$y,"emissionRate",function(){return this._emissionRate},function(F$J){if(F$J<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=F$J})}(),function(){function F$V(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}F$G(F$V,"laya.d3.core.particleShuriKen.module.FrameOverTime");var F$J=F$V.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.cloneTo=function(F$J){var F$y=F$J;F$y._type=this._type,F$y._constant=this._constant,this._overTime.cloneTo(F$y._overTime),F$y._constantMin=this._constantMin,F$y._constantMax=this._constantMax,this._overTimeMin.cloneTo(F$y._overTimeMin),this._overTimeMax.cloneTo(F$y._overTimeMax)},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$J,"frameOverTimeData",function(){return this._overTime}),F$B(0,F$J,"constant",function(){return this._constant}),F$B(0,F$J,"type",function(){return this._type}),F$B(0,F$J,"frameOverTimeDataMin",function(){return this._overTimeMin}),F$B(0,F$J,"constantMin",function(){return this._constantMin}),F$B(0,F$J,"frameOverTimeDataMax",function(){return this._overTimeMax}),F$B(0,F$J,"constantMax",function(){return this._constantMax}),F$V.createByConstant=function(F$J){var F$y=new F$V;return F$y._type=0,F$y._constant=F$J,F$y},F$V.createByOverTime=function(F$J){var F$y=new F$V;return F$y._type=1,F$y._overTime=F$J,F$y},F$V.createByRandomTwoConstant=function(F$J,F$y){var F$T=new F$V;return F$T._type=2,F$T._constantMin=F$J,F$T._constantMax=F$y,F$T},F$V.createByRandomTwoOverTime=function(F$J,F$y){var F$T=new F$V;return F$T._type=3,F$T._overTimeMin=F$J,F$T._overTimeMax=F$y,F$T},F$V}()),F$x=function(){function F$A(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}F$G(F$A,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var F$J=F$A.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.cloneTo=function(F$J){var F$y=F$J;F$y._type=this._type,F$y._separateAxes=this._separateAxes,F$y._constant=this._constant,this._constantSeparate.cloneTo(F$y._constantSeparate),this._gradient.cloneTo(F$y._gradient),this._gradientX.cloneTo(F$y._gradientX),this._gradientY.cloneTo(F$y._gradientY),this._gradientZ.cloneTo(F$y._gradientZ),F$y._constantMin=this._constantMin,F$y._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(F$y._constantMinSeparate),this._constantMaxSeparate.cloneTo(F$y._constantMaxSeparate),this._gradientMin.cloneTo(F$y._gradientMin),this._gradientMax.cloneTo(F$y._gradientMax),this._gradientXMin.cloneTo(F$y._gradientXMin),this._gradientXMax.cloneTo(F$y._gradientXMax),this._gradientYMin.cloneTo(F$y._gradientYMin),this._gradientYMax.cloneTo(F$y._gradientYMax),this._gradientZMin.cloneTo(F$y._gradientZMin),this._gradientZMax.cloneTo(F$y._gradientZMax)},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$J,"gradientZ",function(){return this._gradientZ}),F$B(0,F$J,"constant",function(){return this._constant}),F$B(0,F$J,"gradient",function(){return this._gradient}),F$B(0,F$J,"separateAxes",function(){return this._separateAxes}),F$B(0,F$J,"type",function(){return this._type}),F$B(0,F$J,"constantSeparate",function(){return this._constantSeparate}),F$B(0,F$J,"gradientX",function(){return this._gradientX}),F$B(0,F$J,"gradientY",function(){return this._gradientY}),F$B(0,F$J,"gradientW",function(){return this._gradientW}),F$B(0,F$J,"gradientMin",function(){return this._gradientMin}),F$B(0,F$J,"constantMin",function(){return this._constantMin}),F$B(0,F$J,"gradientMax",function(){return this._gradientMax}),F$B(0,F$J,"constantMax",function(){return this._constantMax}),F$B(0,F$J,"gradientWMin",function(){return this._gradientWMin}),F$B(0,F$J,"constantMinSeparate",function(){return this._constantMinSeparate}),F$B(0,F$J,"constantMaxSeparate",function(){return this._constantMaxSeparate}),F$B(0,F$J,"gradientXMin",function(){return this._gradientXMin}),F$B(0,F$J,"gradientXMax",function(){return this._gradientXMax}),F$B(0,F$J,"gradientWMax",function(){return this._gradientWMax}),F$B(0,F$J,"gradientYMin",function(){return this._gradientYMin}),F$B(0,F$J,"gradientYMax",function(){return this._gradientYMax}),F$B(0,F$J,"gradientZMin",function(){return this._gradientZMin}),F$B(0,F$J,"gradientZMax",function(){return this._gradientZMax}),F$A.createByConstant=function(F$J){var F$y=new F$A;return F$y._type=0,F$y._separateAxes=!1,F$y._constant=F$J,F$y},F$A.createByConstantSeparate=function(F$J){var F$y=new F$A;return F$y._type=0,F$y._separateAxes=!0,F$y._constantSeparate=F$J,F$y},F$A.createByGradient=function(F$J){var F$y=new F$A;return F$y._type=1,F$y._separateAxes=!1,F$y._gradient=F$J,F$y},F$A.createByGradientSeparate=function(F$J,F$y,F$T,F$V){var F$Z=new F$A;return F$Z._type=1,F$Z._separateAxes=!0,F$Z._gradientX=F$J,F$Z._gradientY=F$y,F$Z._gradientZ=F$T,F$Z._gradientW=F$V,F$Z},F$A.createByRandomTwoConstant=function(F$J,F$y){var F$T=new F$A;return F$T._type=2,F$T._separateAxes=!1,F$T._constantMin=F$J,F$T._constantMax=F$y,F$T},F$A.createByRandomTwoConstantSeparate=function(F$J,F$y){var F$T=new F$A;return F$T._type=2,F$T._separateAxes=!0,F$T._constantMinSeparate=F$J,F$T._constantMaxSeparate=F$y,F$T},F$A.createByRandomTwoGradient=function(F$J,F$y){var F$T=new F$A;return F$T._type=3,F$T._separateAxes=!1,F$T._gradientMin=F$J,F$T._gradientMax=F$y,F$T},F$A.createByRandomTwoGradientSeparate=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){var F$K=new F$A;return F$K._type=3,F$K._separateAxes=!0,F$K._gradientXMin=F$J,F$K._gradientXMax=F$y,F$K._gradientYMin=F$T,F$K._gradientYMax=F$V,F$K._gradientZMin=F$Z,F$K._gradientZMax=F$m,F$K._gradientWMin=F$R,F$K._gradientWMax=F$n,F$K},F$A}(),F$k=function(){function F$V(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}F$G(F$V,"laya.d3.core.particleShuriKen.module.GradientColor");var F$J=F$V.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.cloneTo=function(F$J){var F$y=F$J;F$y._type=this._type,this._constant.cloneTo(F$y._constant),this._constantMin.cloneTo(F$y._constantMin),this._constantMax.cloneTo(F$y._constantMax),this._gradient.cloneTo(F$y._gradient),this._gradientMin.cloneTo(F$y._gradientMin),this._gradientMax.cloneTo(F$y._gradientMax)},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$J,"gradient",function(){return this._gradient}),F$B(0,F$J,"constant",function(){return this._constant}),F$B(0,F$J,"type",function(){return this._type}),F$B(0,F$J,"gradientMin",function(){return this._gradientMin}),F$B(0,F$J,"constantMin",function(){return this._constantMin}),F$B(0,F$J,"gradientMax",function(){return this._gradientMax}),F$B(0,F$J,"constantMax",function(){return this._constantMax}),F$V.createByConstant=function(F$J){var F$y=new F$V;return F$y._type=0,F$y._constant=F$J,F$y},F$V.createByGradient=function(F$J){var F$y=new F$V;return F$y._type=1,F$y._gradient=F$J,F$y},F$V.createByRandomTwoConstant=function(F$J,F$y){var F$T=new F$V;return F$T._type=2,F$T._constantMin=F$J,F$T._constantMax=F$y,F$T},F$V.createByRandomTwoGradient=function(F$J,F$y){var F$T=new F$V;return F$T._type=3,F$T._gradientMin=F$J,F$T._gradientMax=F$y,F$T},F$V}(),F$X=(function(){function F$J(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}F$G(F$J,"laya.d3.core.particleShuriKen.module.GradientDataColor");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.addAlpha=function(F$J,F$y){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==F$J&&(F$J=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=F$J,this._alphaElements[this._alphaCurrentLength++]=F$y):DEBUG},F$y.addRGB=function(F$J,F$y){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==F$J&&(F$J=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=F$J,this._rgbElements[this._rgbCurrentLength++]=F$y.x,this._rgbElements[this._rgbCurrentLength++]=F$y.y,this._rgbElements[this._rgbCurrentLength++]=F$y.z):DEBUG},F$y.cloneTo=function(F$J){var F$y=F$J,F$T=0,F$V=0;F$y._alphaCurrentLength=this._alphaCurrentLength;var F$Z=F$y._alphaElements;for(F$Z.length=this._alphaElements.length,F$T=0,F$V=this._alphaElements.length;F$T<F$V;F$T++)F$Z[F$T]=this._alphaElements[F$T];F$y._rgbCurrentLength=this._rgbCurrentLength;var F$m=F$y._rgbElements;for(F$m.length=this._rgbElements.length,F$T=0,F$V=this._rgbElements.length;F$T<F$V;F$T++)F$m[F$T]=this._rgbElements[F$T]},F$y.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$y,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),F$B(0,F$y,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function F$J(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}F$G(F$J,"laya.d3.core.particleShuriKen.module.GradientDataInt");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.add=function(F$J,F$y){this._currentLength<8?(6===this._currentLength&&1!==F$J&&(F$J=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=F$J,this._elements[this._currentLength++]=F$y):console.log("Warning:data count must lessEqual than 4")},F$y.cloneTo=function(F$J){var F$y=F$J;F$y._currentLength=this._currentLength;var F$T=F$y._elements;F$T.length=this._elements.length;for(var F$V=0,F$Z=this._elements.length;F$V<F$Z;F$V++)F$T[F$V]=this._elements[F$V]},F$y.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$y,"gradientCount",function(){return this._currentLength/2})}(),function(){function F$J(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}F$G(F$J,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.add=function(F$J,F$y){this._currentLength<8?(6===this._currentLength&&1!==F$J&&(F$J=1,DEBUG),this._elements[this._currentLength++]=F$J,this._elements[this._currentLength++]=F$y):DEBUG},F$y.getKeyByIndex=function(F$J){return this._elements[2*F$J]},F$y.getValueByIndex=function(F$J){return this._elements[2*F$J+1]},F$y.getAverageValue=function(){for(var F$J=0,F$y=this._currentLength-2;F$J<F$y;F$J+=2){this._elements[F$J+1];this._elements[F$J+3],this._elements[F$J+2]-this._elements[F$J]}return 0},F$y.cloneTo=function(F$J){var F$y=F$J;F$y._currentLength=this._currentLength;var F$T=F$y._elements;F$T.length=this._elements.length;for(var F$V=0,F$Z=this._elements.length;F$V<F$Z;F$V++)F$T[F$V]=this._elements[F$V]},F$y.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$y,"gradientCount",function(){return this._currentLength/2})}(),function(){function F$J(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}F$G(F$J,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.add=function(F$J,F$y){this._currentLength<8?(6===this._currentLength&&1!==F$J&&(F$J=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=F$J,this._elements[this._currentLength++]=F$y.x,this._elements[this._currentLength++]=F$y.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},F$y.cloneTo=function(F$J){var F$y=F$J;F$y._currentLength=this._currentLength;var F$T=F$y._elements;F$T.length=this._elements.length;for(var F$V=0,F$Z=this._elements.length;F$V<F$Z;F$V++)F$T[F$V]=this._elements[F$V]},F$y.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$y,"gradientCount",function(){return this._currentLength/3})}(),function(){function F$n(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}F$G(F$n,"laya.d3.core.particleShuriKen.module.GradientSize");var F$J=F$n.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.getMaxSizeInGradient=function(){var F$J=0,F$y=0,F$T=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(F$J=0,F$y=this._gradientX.gradientCount;F$J<F$y;F$J++)F$T=Math.max(F$T,this._gradientX.getValueByIndex(F$J));for(F$J=0,F$y=this._gradientY.gradientCount;F$J<F$y;F$J++)F$T=Math.max(F$T,this._gradientY.getValueByIndex(F$J))}else for(F$J=0,F$y=this._gradient.gradientCount;F$J<F$y;F$J++)F$T=Math.max(F$T,this._gradient.getValueByIndex(F$J));break;case 1:F$T=this._separateAxes?(F$T=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),F$T=Math.max(F$T,this._constantMinSeparate.y),Math.max(F$T,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(F$J=0,F$y=this._gradientXMin.gradientCount;F$J<F$y;F$J++)F$T=Math.max(F$T,this._gradientXMin.getValueByIndex(F$J));for(F$J=0,F$y=this._gradientXMax.gradientCount;F$J<F$y;F$J++)F$T=Math.max(F$T,this._gradientXMax.getValueByIndex(F$J));for(F$J=0,F$y=this._gradientYMin.gradientCount;F$J<F$y;F$J++)F$T=Math.max(F$T,this._gradientYMin.getValueByIndex(F$J));for(F$J=0,F$y=this._gradientZMax.gradientCount;F$J<F$y;F$J++)F$T=Math.max(F$T,this._gradientZMax.getValueByIndex(F$J))}else{for(F$J=0,F$y=this._gradientMin.gradientCount;F$J<F$y;F$J++)F$T=Math.max(F$T,this._gradientMin.getValueByIndex(F$J));for(F$J=0,F$y=this._gradientMax.gradientCount;F$J<F$y;F$J++)F$T=Math.max(F$T,this._gradientMax.getValueByIndex(F$J))}}return F$T},F$J.cloneTo=function(F$J){var F$y=F$J;F$y._type=this._type,F$y._separateAxes=this._separateAxes,this._gradient.cloneTo(F$y._gradient),this._gradientX.cloneTo(F$y._gradientX),this._gradientY.cloneTo(F$y._gradientY),this._gradientZ.cloneTo(F$y._gradientZ),F$y._constantMin=this._constantMin,F$y._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(F$y._constantMinSeparate),this._constantMaxSeparate.cloneTo(F$y._constantMaxSeparate),this._gradientMin.cloneTo(F$y._gradientMin),this._gradientMax.cloneTo(F$y._gradientMax),this._gradientXMin.cloneTo(F$y._gradientXMin),this._gradientXMax.cloneTo(F$y._gradientXMax),this._gradientYMin.cloneTo(F$y._gradientYMin),this._gradientYMax.cloneTo(F$y._gradientYMax),this._gradientZMin.cloneTo(F$y._gradientZMin),this._gradientZMax.cloneTo(F$y._gradientZMax)},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$J,"gradientZ",function(){return this._gradientZ}),F$B(0,F$J,"gradient",function(){return this._gradient}),F$B(0,F$J,"separateAxes",function(){return this._separateAxes}),F$B(0,F$J,"type",function(){return this._type}),F$B(0,F$J,"gradientMin",function(){return this._gradientMin}),F$B(0,F$J,"constantMin",function(){return this._constantMin}),F$B(0,F$J,"gradientX",function(){return this._gradientX}),F$B(0,F$J,"gradientY",function(){return this._gradientY}),F$B(0,F$J,"gradientMax",function(){return this._gradientMax}),F$B(0,F$J,"constantMax",function(){return this._constantMax}),F$B(0,F$J,"constantMinSeparate",function(){return this._constantMinSeparate}),F$B(0,F$J,"constantMaxSeparate",function(){return this._constantMaxSeparate}),F$B(0,F$J,"gradientXMin",function(){return this._gradientXMin}),F$B(0,F$J,"gradientXMax",function(){return this._gradientXMax}),F$B(0,F$J,"gradientYMin",function(){return this._gradientYMin}),F$B(0,F$J,"gradientYMax",function(){return this._gradientYMax}),F$B(0,F$J,"gradientZMin",function(){return this._gradientZMin}),F$B(0,F$J,"gradientZMax",function(){return this._gradientZMax}),F$n.createByGradient=function(F$J){var F$y=new F$n;return F$y._type=0,F$y._separateAxes=!1,F$y._gradient=F$J,F$y},F$n.createByGradientSeparate=function(F$J,F$y,F$T){var F$V=new F$n;return F$V._type=0,F$V._separateAxes=!0,F$V._gradientX=F$J,F$V._gradientY=F$y,F$V._gradientZ=F$T,F$V},F$n.createByRandomTwoConstant=function(F$J,F$y){var F$T=new F$n;return F$T._type=1,F$T._separateAxes=!1,F$T._constantMin=F$J,F$T._constantMax=F$y,F$T},F$n.createByRandomTwoConstantSeparate=function(F$J,F$y){var F$T=new F$n;return F$T._type=1,F$T._separateAxes=!0,F$T._constantMinSeparate=F$J,F$T._constantMaxSeparate=F$y,F$T},F$n.createByRandomTwoGradient=function(F$J,F$y){var F$T=new F$n;return F$T._type=2,F$T._separateAxes=!1,F$T._gradientMin=F$J,F$T._gradientMax=F$y,F$T},F$n.createByRandomTwoGradientSeparate=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=new F$n;return F$R._type=2,F$R._separateAxes=!0,F$R._gradientXMin=F$J,F$R._gradientXMax=F$y,F$R._gradientYMin=F$T,F$R._gradientYMax=F$V,F$R._gradientZMin=F$Z,F$R._gradientZMax=F$m,F$R},F$n}()),F$S=function(){function F$n(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}F$G(F$n,"laya.d3.core.particleShuriKen.module.GradientVelocity");var F$J=F$n.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.cloneTo=function(F$J){var F$y=F$J;F$y._type=this._type,this._constant.cloneTo(F$y._constant),this._gradientX.cloneTo(F$y._gradientX),this._gradientY.cloneTo(F$y._gradientY),this._gradientZ.cloneTo(F$y._gradientZ),this._constantMin.cloneTo(F$y._constantMin),this._constantMax.cloneTo(F$y._constantMax),this._gradientXMin.cloneTo(F$y._gradientXMin),this._gradientXMax.cloneTo(F$y._gradientXMax),this._gradientYMin.cloneTo(F$y._gradientYMin),this._gradientYMax.cloneTo(F$y._gradientYMax),this._gradientZMin.cloneTo(F$y._gradientZMin),this._gradientZMax.cloneTo(F$y._gradientZMax)},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$J,"gradientZ",function(){return this._gradientZ}),F$B(0,F$J,"constant",function(){return this._constant}),F$B(0,F$J,"type",function(){return this._type}),F$B(0,F$J,"gradientXMax",function(){return this._gradientXMax}),F$B(0,F$J,"constantMin",function(){return this._constantMin}),F$B(0,F$J,"gradientX",function(){return this._gradientX}),F$B(0,F$J,"gradientY",function(){return this._gradientY}),F$B(0,F$J,"gradientXMin",function(){return this._gradientXMin}),F$B(0,F$J,"constantMax",function(){return this._constantMax}),F$B(0,F$J,"gradientYMin",function(){return this._gradientYMin}),F$B(0,F$J,"gradientYMax",function(){return this._gradientYMax}),F$B(0,F$J,"gradientZMin",function(){return this._gradientZMin}),F$B(0,F$J,"gradientZMax",function(){return this._gradientZMax}),F$n.createByConstant=function(F$J){var F$y=new F$n;return F$y._type=0,F$y._constant=F$J,F$y},F$n.createByGradient=function(F$J,F$y,F$T){var F$V=new F$n;return F$V._type=1,F$V._gradientX=F$J,F$V._gradientY=F$y,F$V._gradientZ=F$T,F$V},F$n.createByRandomTwoConstant=function(F$J,F$y){var F$T=new F$n;return F$T._type=2,F$T._constantMin=F$J,F$T._constantMax=F$y,F$T},F$n.createByRandomTwoGradient=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=new F$n;return F$R._type=3,F$R._gradientXMin=F$J,F$R._gradientXMax=F$y,F$R._gradientYMin=F$T,F$R._gradientYMax=F$V,F$R._gradientZMin=F$Z,F$R._gradientZMax=F$m,F$R},F$n}(),F$f=(function(){function F$J(F$J){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=F$J}F$G(F$J,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.cloneTo=function(F$J){var F$y=F$J;this._angularVelocity.cloneTo(F$y._angularVelocity),F$y.enbale=this.enbale},F$y.clone=function(){var F$J;switch(this._angularVelocity.type){case 0:F$J=this._angularVelocity.separateAxes?F$x.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):F$x.createByConstant(this._angularVelocity.constant);break;case 1:F$J=this._angularVelocity.separateAxes?F$x.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):F$x.createByGradient(this._angularVelocity.gradient.clone());break;case 2:F$J=this._angularVelocity.separateAxes?F$x.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):F$x.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:F$J=this._angularVelocity.separateAxes?F$x.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):F$x.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var F$y=new this.constructor(F$J);return F$y.enbale=this.enbale,F$y},F$B(0,F$y,"angularVelocity",function(){return this._angularVelocity})}(),function(){function F$J(){this.enable=!1,this.randomDirection=!1}F$G(F$J,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y._getShapeBoundBox=function(F$J){throw new Error("BaseShape: must override it.")},F$y._getSpeedBoundBox=function(F$J){throw new Error("BaseShape: must override it.")},F$y.generatePositionAndDirection=function(F$J,F$y,F$T,F$V){throw new Error("BaseShape: must override it.")},F$y._calculateProceduralBounds=function(F$J,F$y,F$T){this._getShapeBoundBox(F$J);var F$V=F$J.min,F$Z=F$J.max;F$Ry.multiply(F$V,F$y,F$V),F$Ry.multiply(F$Z,F$y,F$Z);var F$m=new F$jJ(new F$Ry,new F$Ry);this.randomDirection?(F$m.min=new F$Ry(-1,-1,-1),F$m.max=new F$Ry(1,1,1)):this._getSpeedBoundBox(F$m);var F$R=new F$jJ(new F$Ry,new F$Ry),F$n=F$R.min,F$K=F$R.max;F$Ry.scale(F$m.min,F$T.y,F$n),F$Ry.scale(F$m.max,F$T.y,F$K),F$Ry.add(F$J.min,F$n,F$n),F$Ry.add(F$J.max,F$K,F$K),F$Ry.min(F$J.min,F$n,F$J.min),F$Ry.max(F$J.max,F$n,F$J.max);var F$A=new F$jJ(new F$Ry,new F$Ry),F$$=F$A.min,F$e=F$A.max;F$Ry.scale(F$m.min,F$T.x,F$$),F$Ry.scale(F$m.max,F$T.x,F$e),F$Ry.min(F$A.min,F$e,F$n),F$Ry.max(F$A.min,F$e,F$K),F$Ry.min(F$J.min,F$n,F$J.min),F$Ry.max(F$J.max,F$n,F$J.max)},F$y.cloneTo=function(F$J){F$J.enable=this.enable},F$y.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$J}()),F$d=function(){function F$m(){}return F$G(F$m,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),F$m._randomPointUnitArcCircle=function(F$J,F$y,F$T){var F$V=F$y.elements,F$Z=NaN;F$Z=F$T?F$T.getFloat()*F$J:Math.random()*F$J,F$V[0]=Math.cos(F$Z),F$V[1]=Math.sin(F$Z)},F$m._randomPointInsideUnitArcCircle=function(F$J,F$y,F$T){var F$V=F$y.elements;F$m._randomPointUnitArcCircle(F$J,F$y,F$T);var F$Z=NaN;F$Z=F$T?Math.pow(F$T.getFloat(),.5):Math.pow(Math.random(),.5),F$V[0]=F$V[0]*F$Z,F$V[1]=F$V[1]*F$Z},F$m._randomPointUnitCircle=function(F$J,F$y){var F$T=F$J.elements,F$V=NaN;F$V=F$y?F$y.getFloat()*Math.PI*2:Math.random()*Math.PI*2,F$T[0]=Math.cos(F$V),F$T[1]=Math.sin(F$V)},F$m._randomPointInsideUnitCircle=function(F$J,F$y){var F$T=F$J.elements;F$m._randomPointUnitCircle(F$J);var F$V=NaN;F$V=F$y?Math.pow(F$y.getFloat(),.5):Math.pow(Math.random(),.5),F$T[0]=F$T[0]*F$V,F$T[1]=F$T[1]*F$V},F$m._randomPointUnitSphere=function(F$J,F$y){var F$T=F$J.elements,F$V=NaN,F$Z=NaN;F$Z=F$y?(F$V=F$T[2]=2*F$y.getFloat()-1,F$y.getFloat()*Math.PI*2):(F$V=F$T[2]=2*Math.random()-1,Math.random()*Math.PI*2);var F$m=Math.sqrt(1-F$V*F$V);F$T[0]=F$m*Math.cos(F$Z),F$T[1]=F$m*Math.sin(F$Z)},F$m._randomPointInsideUnitSphere=function(F$J,F$y){var F$T=F$J.elements;F$m._randomPointUnitSphere(F$J);var F$V=NaN;F$V=F$y?Math.pow(F$y.getFloat(),1/3):Math.pow(Math.random(),1/3),F$T[0]=F$T[0]*F$V,F$T[1]=F$T[1]*F$V,F$T[2]=F$T[2]*F$V},F$m._randomPointInsideHalfUnitBox=function(F$J,F$y){var F$T=F$J.elements;F$y?(F$T[0]=F$y.getFloat()-.5,F$T[1]=F$y.getFloat()-.5,F$T[2]=F$y.getFloat()-.5):(F$T[0]=Math.random()-.5,F$T[1]=Math.random()-.5,F$T[2]=Math.random()-.5)},F$m}(),F$C=(function(){function F$J(F$J){this._size=null,this.enbale=!1,this._size=F$J}F$G(F$J,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.cloneTo=function(F$J){var F$y=F$J;this._size.cloneTo(F$y._size),F$y.enbale=this.enbale},F$y.clone=function(){var F$J;switch(this._size.type){case 0:F$J=this._size.separateAxes?F$X.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):F$X.createByGradient(this._size.gradient.clone());break;case 1:F$J=this._size.separateAxes?F$X.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):F$X.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:F$J=this._size.separateAxes?F$X.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):F$X.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var F$y=new this.constructor(F$J);return F$y.enbale=this.enbale,F$y},F$B(0,F$y,"size",function(){return this._size})}(),function(){function F$V(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}F$G(F$V,"laya.d3.core.particleShuriKen.module.StartFrame");var F$J=F$V.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.cloneTo=function(F$J){var F$y=F$J;F$y._type=this._type,F$y._constant=this._constant,F$y._constantMin=this._constantMin,F$y._constantMax=this._constantMax},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$J,"constant",function(){return this._constant}),F$B(0,F$J,"type",function(){return this._type}),F$B(0,F$J,"constantMin",function(){return this._constantMin}),F$B(0,F$J,"constantMax",function(){return this._constantMax}),F$V.createByConstant=function(F$J){var F$y=new F$V;return F$y._type=0,F$y._constant=F$J,F$y},F$V.createByRandomTwoConstant=function(F$J,F$y){var F$T=new F$V;return F$T._type=1,F$T._constantMin=F$J,F$T._constantMax=F$y,F$T},F$V}()),F$F=(function(){function F$J(F$J,F$y){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new F$my(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=F$J,this._startFrame=F$y}F$G(F$J,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.cloneTo=function(F$J){var F$y=F$J;this.tiles.cloneTo(F$y.tiles),F$y.type=this.type,F$y.randomRow=this.randomRow,this._frame.cloneTo(F$y._frame),this._startFrame.cloneTo(F$y._startFrame),F$y.cycles=this.cycles,F$y.enableUVChannels=this.enableUVChannels,F$y.enable=this.enable},F$y.clone=function(){var F$J,F$y;switch(this._frame.type){case 0:F$J=F$u.createByConstant(this._frame.constant);break;case 1:F$J=F$u.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:F$J=F$u.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:F$J=F$u.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:F$y=F$C.createByConstant(this._startFrame.constant);break;case 1:F$y=F$C.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var F$T=new this.constructor(F$J,F$y);return this.tiles.cloneTo(F$T.tiles),F$T.type=this.type,F$T.randomRow=this.randomRow,F$T.cycles=this.cycles,F$T.enableUVChannels=this.enableUVChannels,F$T.enable=this.enable,F$T},F$B(0,F$y,"frame",function(){return this._frame}),F$B(0,F$y,"startFrame",function(){return this._startFrame})}(),function(){function F$J(F$J){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=F$J}F$G(F$J,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.cloneTo=function(F$J){var F$y=F$J;this._velocity.cloneTo(F$y._velocity),F$y.enbale=this.enbale,F$y.space=this.space},F$y.clone=function(){var F$J;switch(this._velocity.type){case 0:F$J=F$S.createByConstant(this._velocity.constant.clone());break;case 1:F$J=F$S.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:F$J=F$S.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:F$J=F$S.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var F$y=new this.constructor(F$J);return F$y.enbale=this.enbale,F$y.space=this.space,F$y},F$B(0,F$y,"velocity",function(){return this._velocity})}(),function(){function F$J(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new F$My,this._vb=F$fy.create(F$J._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=F$Sy.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=F$ky.nameKey.getID("LINE"),this._shaderCompile=F$qy._preCompileShader[this._sharderNameID]}F$G(F$J,"laya.d3.core.PhasorSpriter3D");var F$y=F$J.prototype;return F$y.line=function(F$J,F$y,F$T,F$V){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$J.x,F$J.y,F$J.z,F$y.x,F$y.y,F$y.z,F$y.w),this.addVertex(F$T.x,F$T.y,F$T.z,F$V.x,F$V.y,F$V.z,F$V.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},F$y.circle=function(F$J,F$y,F$T,F$V,F$Z,F$m){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*F$y,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/F$y,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*F$J,Math.cos(this._tempNumver0)*F$J,0,F$T,F$V,F$Z,F$m),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},F$y.plane=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=F$V/2,this._tempNumver1=F$Z/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$J-this._tempNumver0,F$y+this._tempNumver1,F$T,F$m,F$R,F$n,F$K),this.addVertex(F$J+this._tempNumver0,F$y+this._tempNumver1,F$T,F$m,F$R,F$n,F$K),this.addVertex(F$J-this._tempNumver0,F$y-this._tempNumver1,F$T,F$m,F$R,F$n,F$K),this.addVertex(F$J+this._tempNumver0,F$y-this._tempNumver1,F$T,F$m,F$R,F$n,F$K),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},F$y.box=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=F$V/2,this._tempNumver1=F$Z/2,this._tempNumver2=F$m/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$J-this._tempNumver0,F$y+this._tempNumver1,F$T+this._tempNumver2,F$R,F$n,F$K,F$A),this.addVertex(F$J+this._tempNumver0,F$y+this._tempNumver1,F$T+this._tempNumver2,F$R,F$n,F$K,F$A),this.addVertex(F$J-this._tempNumver0,F$y-this._tempNumver1,F$T+this._tempNumver2,F$R,F$n,F$K,F$A),this.addVertex(F$J+this._tempNumver0,F$y-this._tempNumver1,F$T+this._tempNumver2,F$R,F$n,F$K,F$A),this.addVertex(F$J+this._tempNumver0,F$y+this._tempNumver1,F$T-this._tempNumver2,F$R,F$n,F$K,F$A),this.addVertex(F$J-this._tempNumver0,F$y+this._tempNumver1,F$T-this._tempNumver2,F$R,F$n,F$K,F$A),this.addVertex(F$J+this._tempNumver0,F$y-this._tempNumver1,F$T-this._tempNumver2,F$R,F$n,F$K,F$A),this.addVertex(F$J-this._tempNumver0,F$y-this._tempNumver1,F$T-this._tempNumver2,F$R,F$n,F$K,F$A),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},F$y.cone=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*F$T+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*F$T>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/F$T,this.addVertexIndex(0,F$y,0,F$V,F$Z,F$m,F$R,this._tempUint0),this.addVertexIndex(0,0,0,F$V,F$Z,F$m,F$R,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<F$T;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(F$J*this._tempNumver2,0,F$J*this._tempNumver3,F$V,F$Z,F$m,F$R,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==F$T-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(F$J*this._tempNumver2,0,F$J*this._tempNumver3,F$V,F$Z,F$m,F$R,this._tempUint0+(this._tempInt0+F$T)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==F$T-1?this.addIndexes(this._tempUint1+F$T+2):this.addIndexes(this._tempUint1+this._tempInt0+F$T+1),this.addIndexes(this._tempUint1+this._tempInt0+F$T),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},F$y.boundingBoxLine=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$J,F$Z,F$m,F$R,F$n,F$K,F$A),this.addVertex(F$V,F$Z,F$m,F$R,F$n,F$K,F$A),this.addVertex(F$J,F$y,F$m,F$R,F$n,F$K,F$A),this.addVertex(F$V,F$y,F$m,F$R,F$n,F$K,F$A),this.addVertex(F$V,F$Z,F$T,F$R,F$n,F$K,F$A),this.addVertex(F$J,F$Z,F$T,F$R,F$n,F$K,F$A),this.addVertex(F$V,F$y,F$T,F$R,F$n,F$K,F$A),this.addVertex(F$J,F$y,F$T,F$R,F$n,F$K,F$A),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},F$y.addVertex=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=F$J,this._vbData[this._posInVBData+1]=F$y,this._vbData[this._posInVBData+2]=F$T,this._vbData[this._posInVBData+3]=F$V,this._vbData[this._posInVBData+4]=F$Z,this._vbData[this._posInVBData+5]=F$m,this._vbData[this._posInVBData+6]=F$R,this._posInVBData+=this._floatSizePerVer,this},F$y.addVertexIndex=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){return this._hasBegun||this.addVertexIndexException(),this._vbData[F$n]=F$J,this._vbData[F$n+1]=F$y,this._vbData[F$n+2]=F$T,this._vbData[F$n+3]=F$V,this._vbData[F$n+4]=F$Z,this._vbData[F$n+5]=F$m,this._vbData[F$n+6]=F$R,(F$n+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=F$n),this},F$y.addIndexes=function(F$J){var F$y=arguments;this._hasBegun||this.addVertexIndexException();for(var F$T=0;F$T<F$y.length;F$T++)this._ibData[this._posInIBData]=F$y[F$T],this._posInIBData++;return this},F$y.begin=function(F$J,F$y){return this._hasBegun&&this.beginException0(),1!==F$J&&4!==F$J&&this.beginException1(),this._primitiveType=F$J,this._camera=F$y,this._hasBegun=!0,this},F$y.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},F$y.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(F$J._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),F$q.drawCall++,F$v.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},F$y.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},F$y.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},F$y.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},F$y.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},F$y.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},F$y.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(28,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector4",1)])}]),F$J}()),F$b=function(){function F$J(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++F$J._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new F$My}F$G(F$J,"laya.d3.core.render.RenderElement");var F$y=F$J.prototype;return F$y.getDynamicBatchBakedVertexs=function(F$J){for(var F$y=this._renderObj._getVertexBuffer(F$J),F$T=F$y.getData().slice(),F$V=F$y.vertexDeclaration,F$Z=F$V.getVertexElementByUsage(0).offset/4,F$m=F$V.getVertexElementByUsage(3).offset/4,F$R=this._sprite3D.transform,F$n=F$R.worldMatrix,F$K=F$R.rotation,F$A=F$V.vertexStride/4,F$$=0,F$e=F$T.length;F$$<F$e;F$$+=F$A){var F$M=F$$+F$Z,F$G=F$$+F$m;F$sy.transformVector3ArrayToVector3ArrayCoordinate(F$T,F$M,F$n,F$T,F$M),F$sy.transformVector3ArrayByQuat(F$T,F$G,F$K,F$T,F$G)}return F$T},F$y.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},F$y._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},F$B(0,F$y,"id",function(){return this._id}),F$B(0,F$y,"renderObj",function(){return this._renderObj},function(F$J){this._renderObj!==F$J&&(this._renderObj=F$J)}),F$J._uniqueIDCounter=0,F$J}(),F$h=function(){function F$y(F$J){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++F$y._uniqueIDCounter,this._needSort=!1,this._scene=F$J,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}F$G(F$y,"laya.d3.core.render.RenderQueue");var F$J=F$y.prototype;return F$J._sortOpaqueFunc=function(F$J,F$y){if(F$J._render&&F$y._render){var F$T=F$J._material.renderQueue-F$y._material.renderQueue;return 0==F$T?F$J._render._distanceForSort-F$y._render._distanceForSort:F$T}return 0},F$J._sortAlphaFunc=function(F$J,F$y){if(F$J._render&&F$y._render){var F$T=F$J._material.renderQueue-F$y._material.renderQueue;return 0==F$T?F$y._render._distanceForSort-F$J._render._distanceForSort:F$T}return 0},F$J._begainRenderElement=function(F$J,F$y,F$T){return!!F$y._beforeRender(F$J)},F$J._sortAlpha=function(F$J){F$y._cameraPosition=F$J,this._finalElements.sort(this._sortAlphaFunc)},F$J._sortOpaque=function(F$J){F$y._cameraPosition=F$J,this._finalElements.sort(this._sortOpaqueFunc)},F$J._preRender=function(F$J){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},F$J._render=function(F$J,F$y){for(var F$T,F$V,F$Z,F$m,F$R,F$n,F$K=F$q.loopCount,F$A=this._scene,F$$=F$J.camera,F$e=(F$$.id,!1),F$M=0,F$G=this._finalElements.length;F$M<F$G;F$M++){var F$B,F$o,F$s,F$E=this._finalElements[F$M];if(null!=F$E._onPreRenderFunction&&F$E._onPreRenderFunction.call(F$E._sprite3D,F$J),0===F$E._type){if(F$J.owner=F$s=F$E._sprite3D,F$J.renderElement=F$E,F$s._preRenderUpdateComponents(F$J),F$B=F$E.renderObj,F$o=F$E._material,this._begainRenderElement(F$J,F$B,F$o)){if(F$T=F$B._getVertexBuffers(),!(F$Z=(F$V=F$B._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[F$V.id]){this._errorRecord[F$V.id]=1;var F$O="vertexBuffer:"+("("+F$V._destroyed+","+F$V._released+","+F$V._referenceCount+","+F$V._buffer+")")+", material:"+(F$o?F$o.__className+"("+F$o._destroyed+","+F$o._released+")":"null")+", owner:"+(F$s?F$s.__className+"("+F$s._destroyed+","+F$s._activeInHierarchy+","+F$s._displayedInStage+")":"null")+", renderObj:"+(F$B?F$B.__className+"("+F$B._destroyed+","+F$B._released+","+F$B._referenceCount+")":"")+", parent:, url:"+(F$s?F$s.url:"")+", disposeStack:"+F$V.disposeStack;F$P.recordError("报错：unknown vertexDeclaration  "+F$O)}continue}if(F$e=(F$m=F$J._shader=F$o._getShader(F$A._shaderDefineValue,F$Z.shaderDefineValue,F$s._shaderDefineValue)).bind()||F$K!==F$m._uploadLoopCount,F$T){if(F$m._uploadVertexBuffer!==F$T||F$e){for(var F$L=0;F$L<F$T.length;F$L++){var F$H=F$T[F$L];F$m.uploadAttributesX(F$H.vertexDeclaration.shaderValues.data,F$H)}F$m._uploadVertexBuffer=F$T}}else(F$m._uploadVertexBuffer!==F$V||F$e)&&(F$m.uploadAttributes(F$Z.shaderValues.data,null),F$m._uploadVertexBuffer=F$V);(F$m._uploadScene!==F$A||F$e)&&(F$m.uploadSceneUniforms(F$A._shaderValues.data),F$m._uploadScene=F$A),(F$$!==F$m._uploadCamera||F$m._uploadSprite3D!==F$s||F$e)&&(F$m.uploadSpriteUniforms(F$s._shaderValues.data),F$m._uploadSprite3D=F$s),(F$$!==F$m._uploadCamera||F$e)&&(F$m.uploadCameraUniforms(F$$._shaderValues.data),F$m._uploadCamera=F$$),(F$m._uploadMaterial!==F$o||F$e)&&(F$o._upload(),F$m._uploadMaterial=F$o),F$R!==F$o?(F$o._setRenderStateBlendDepth(),F$o._setRenderStateFrontFace(F$y,F$s.transform),F$R=F$o,F$n=F$s):F$n!==F$s&&(F$o._setRenderStateFrontFace(F$y,F$s.transform),F$n=F$s),F$B._render(F$J),F$m._uploadLoopCount=F$K}F$s._postRenderUpdateComponents(F$J)}else if(2===F$E._type){F$E.renderObj;F$J.owner=F$s=F$E._sprite3D,F$J.renderElement=F$E,F$J._batchIndexStart=F$E._tempBatchIndexStart,F$J._batchIndexEnd=F$E._tempBatchIndexEnd,F$B=F$E.renderObj,F$o=F$E._material,this._begainRenderElement(F$J,F$B,F$o)&&(F$Z=(F$V=F$B._getVertexBuffer(0)).vertexDeclaration,F$e=(F$m=F$J._shader=F$o._getShader(F$A._shaderDefineValue,F$Z.shaderDefineValue,F$s._shaderDefineValue)).bind()||F$K!==F$m._uploadLoopCount,(F$m._uploadVertexBuffer!==F$V||F$e)&&(F$m.uploadAttributes(F$Z.shaderValues.data,null),F$m._uploadVertexBuffer=F$V),(F$m._uploadScene!==F$A||F$e)&&(F$m.uploadSceneUniforms(F$A._shaderValues.data),F$m._uploadScene=F$A),(F$$!==F$m._uploadCamera||F$m._uploadSprite3D!==F$s||F$e)&&(F$m.uploadSpriteUniforms(F$s._shaderValues.data),F$m._uploadSprite3D=F$s),(F$$!==F$m._uploadCamera||F$e)&&(F$m.uploadCameraUniforms(F$$._shaderValues.data),F$m._uploadCamera=F$$),(F$m._uploadMaterial!==F$o||F$e)&&(F$o._upload(),F$m._uploadMaterial=F$o),F$R!==F$o?(F$o._setRenderStateBlendDepth(),F$o._setRenderStateFrontFace(F$y,F$s.transform),F$R=F$o,F$n=F$s):F$n!==F$s&&(F$o._setRenderStateFrontFace(F$y,F$s.transform),F$n=F$s),F$B._render(F$J),F$m._uploadLoopCount=F$K)}}},F$J._renderShadow=function(F$J,F$y){for(var F$T,F$V,F$Z,F$m,F$R,F$n=F$q.loopCount,F$K=this._scene,F$A=F$J.camera,F$$=!1,F$e=0,F$M=this._finalElements.length;F$e<F$M;F$e++){var F$G,F$B,F$o,F$s=this._finalElements[F$e];0===F$s._type&&(F$J.owner=F$o=F$s._sprite3D,F$y||F$o._projectionViewWorldUpdateCamera===F$A&&F$o._projectionViewWorldUpdateLoopCount===F$q.loopCount||(F$o._render._renderUpdate(F$J._projectionViewMatrix),F$o._projectionViewWorldUpdateLoopCount=F$q.loopCount,F$o._projectionViewWorldUpdateCamera=F$A),F$J.renderElement=F$s,F$o._preRenderUpdateComponents(F$J),F$G=F$s.renderObj,F$B=F$s._material,this._begainRenderElement(F$J,F$G,null)&&(F$V=(F$T=F$G._getVertexBuffer(0)).vertexDeclaration,F$$=(F$Z=F$J._shader=F$B._getShader(F$K._shaderDefineValue,F$V.shaderDefineValue,F$o._shaderDefineValue)).bind()||F$n!==F$Z._uploadLoopCount,(F$Z._uploadVertexBuffer!==F$T||F$$)&&(F$Z.uploadAttributes(F$V.shaderValues.data,null),F$Z._uploadVertexBuffer=F$T),(F$A!==F$Z._uploadCamera||F$Z._uploadSprite3D!==F$o||F$$)&&(F$Z.uploadSpriteUniforms(F$o._shaderValues.data),F$Z._uploadSprite3D=F$o),(F$A!==F$Z._uploadCamera||F$$)&&(F$Z.uploadCameraUniforms(F$A._shaderValues.data),F$Z._uploadCamera=F$A),(F$Z._uploadMaterial!==F$B||F$$)&&(F$B._upload(),F$Z._uploadMaterial=F$B),F$Z._uploadRenderElement,F$m!==F$B?(F$B._setRenderStateFrontFace(!1,F$o.transform),F$m=F$B,F$R=F$o):F$R!==F$o&&(F$B._setRenderStateFrontFace(!1,F$o.transform),F$R=F$o),F$G._render(F$J),F$Z._uploadLoopCount=F$n),F$o._postRenderUpdateComponents(F$J))}},F$J._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},F$J._addRenderElement=function(F$J){this._renderElements.push(F$J),this._needSort=!0},F$J._addDynamicBatchElement=function(F$J){this._dynamicBatchCombineRenderElements.push(F$J)},F$B(0,F$J,"id",function(){return this._id}),F$y._uniqueIDCounter=0,F$y._cameraPosition=null,F$y}(),F$p=function(){function F$J(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return F$G(F$J,"laya.d3.core.render.RenderState"),F$J.clientWidth=0,F$J.clientHeight=0,F$J}(),F$j=function(){function F$R(F$J,F$y){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new F$NJ(new F$Ry,0),this._corners=[new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry],this._boundingBoxCenter=new F$Ry,this._children=F$V(8),this._objects=[],this._tempBoundBoxCorners=[new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry],this._scene=F$J,this._currentDepth=F$y}F$G(F$R,"laya.d3.core.scene.OctreeNode");var F$J=F$R.prototype;return F$P.imps(F$J,{"laya.d3.core.scene.ITreeNode":!0}),F$J.init=function(F$J,F$y){var F$T=new F$Ry,F$V=new F$Ry;F$Ry.scale(F$y,-.5,F$T),F$Ry.scale(F$y,.5,F$V),F$Ry.add(F$T,F$J,F$T),F$Ry.add(F$V,F$J,F$V),this.exactBox=new F$jJ(F$T,F$V),this.relaxBox=new F$jJ(F$T,F$V)},F$J.addTreeNode=function(F$J){1===Collision.boxContainsBox(this._relaxBox,F$J.boundingBox)?this.addNodeDown(F$J,0):this.addObject(F$J)},F$J.addChild=function(F$J){var F$y=this._children[F$J];if(null==F$y){F$y=new F$R(this._scene,this._currentDepth+1),(this._children[F$J]=F$y)._parent=this,F$Ry.subtract(this._exactBox.max,this._exactBox.min,F$R.tempSize),F$Ry.multiply(F$R.tempSize,F$R._octreeSplit[F$J],F$R.tempCenter),F$Ry.add(this._exactBox.min,F$R.tempCenter,F$R.tempCenter),F$Ry.scale(F$R.tempSize,.25,F$R.tempSize);var F$T=new F$Ry,F$V=new F$Ry;F$Ry.subtract(F$R.tempCenter,F$R.tempSize,F$T),F$Ry.add(F$R.tempCenter,F$R.tempSize,F$V),F$y.exactBox=new F$jJ(F$T,F$V),F$Ry.scale(F$R.tempSize,F$R.relax,F$R.tempSize);var F$Z=new F$Ry,F$m=new F$Ry;F$Ry.subtract(F$R.tempCenter,F$R.tempSize,F$Z),F$Ry.add(F$R.tempCenter,F$R.tempSize,F$m),F$y.relaxBox=new F$jJ(F$Z,F$m)}return F$y},F$J.addObject=function(F$J){(F$J._treeNode=this)._objects.push(F$J)},F$J.removeObject=function(F$J){if(F$J._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var F$y=this._objects.indexOf(F$J);return-1!==F$y&&(this._objects.splice(F$y,1),!0)},F$J.clearObject=function(){this._objects.length=0},F$J.addNodeUp=function(F$J,F$y){this._parent&&1!==Collision.boxContainsBox(this._exactBox,F$J.boundingBox)?this._parent.addNodeUp(F$J,F$y-1):this.addNodeDown(F$J,F$y)},F$J.addNodeDown=function(F$J,F$y){if(F$y<this._scene.treeLevel){var F$T=this.inChildIndex(F$J.boundingBoxCenter),F$V=this.addChild(F$T);1===Collision.boxContainsBox(F$V._relaxBox,F$J.boundingBox)?F$V.addNodeDown(F$J,++F$y):this.addObject(F$J)}else this.addObject(F$J)},F$J.inChildIndex=function(F$J){return 4*(F$J.z<this._boundingBoxCenter.z?0:1)+2*(F$J.y<this._boundingBoxCenter.y?0:1)+(F$J.x<this._boundingBoxCenter.x?0:1)},F$J.updateObject=function(F$J){1===Collision.boxContainsBox(this._relaxBox,F$J.boundingBox)?(this.removeObject(F$J),F$J._treeNode=null,this.addNodeDown(F$J,this._currentDepth)):this._parent&&(this.removeObject(F$J),F$J._treeNode=null,this._parent.addNodeUp(F$J,this._currentDepth-1))},F$J.cullingObjects=function(F$J,F$y,F$T,F$V,F$Z){var F$m,F$R=0,F$n=0,F$K=0,F$A=this._scene._dynamicBatchManager;for(F$R=0,F$m=this._objects.length;F$R<F$m;F$R++){var F$$=this._objects[F$R];if(F$c.isVisible(F$$._owner.layer.mask)&&F$$.enable){if(F$y&&(F$q.treeSpriteCollision+=1,0===F$J.containsBoundSphere(F$$.boundingSphere)))continue;F$$._renderUpdate(F$Z),F$$._distanceForSort=F$Ry.distance(F$$.boundingSphere.center,F$V)+F$$.sortingFudge;var F$e=F$$._renderElements;for(F$n=0,F$K=F$e.length;F$n<F$K;F$n++){var F$M=F$e[F$n],F$G=F$M._staticBatch;if(F$G&&F$G._material===F$M._material)F$G._addBatchRenderElement(F$M);else{var F$B=F$M.renderObj;F$B.triangleCount<10&&1===F$B._vertexBufferCount&&F$B._getIndexBuffer()&&F$M._material.renderQueue<2&&F$M._canDynamicBatch&&!F$$._owner.isStatic?F$A._addPrepareRenderElement(F$M):this._scene.getRenderQueue(F$M._material.renderQueue)._addRenderElement(F$M)}}}}for(F$R=0;F$R<8;F$R++){var F$o=this._children[F$R];if(null!=F$o){var F$s=F$y;if(F$y){var F$E=F$J.containsBoundBox(F$o._relaxBox);if(F$q.treeNodeCollision+=1,0===F$E)continue;F$s=2===F$E}F$o.cullingObjects(F$J,F$s,F$T,F$V,F$Z)}}},F$J.cullingShadowObjects=function(F$J,F$y,F$T,F$V,F$Z){var F$m,F$R=0,F$n=0,F$K=0;this._scene._dynamicBatchManager;for(F$R=0,F$m=this._objects.length;F$R<F$m;F$R++){var F$A=this._objects[F$R];if(F$A.castShadow&&F$c.isVisible(F$A._owner.layer.mask)&&F$A.enable){if(F$T&&0===F$J[0].containsBoundSphere(F$A.boundingSphere))continue;for(var F$$=1,F$e=F$J.length;F$$<F$e;F$$++){var F$M=F$y[F$$-1];if(0!==F$J[F$$].containsBoundSphere(F$A.boundingSphere)){var F$G=F$A._renderElements;for(F$n=0,F$K=F$G.length;F$n<F$K;F$n++)F$M._addRenderElement(F$G[F$n])}}}}for(F$R=0;F$R<8;F$R++){var F$B=this._children[F$R];if(null!=F$B){var F$o=F$T;if(F$T){var F$s=F$J[0].containsBoundBox(F$B._relaxBox);if(0===F$s)continue;F$o=2===F$s}F$B.cullingShadowObjects(F$J,F$y,F$o,F$V,F$Z)}}},F$J.cullingShadowObjectsOnePSSM=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R,F$n=F$y[0],F$K=0,F$A=0,F$$=0;for(F$K=0,F$R=this._objects.length;F$K<F$R;F$K++){var F$e=this._objects[F$K];if(F$e.castShadow&&F$c.isVisible(F$e._owner.layer.mask)&&F$e.enable){if(F$V&&0===F$J.containsBoundSphere(F$e.boundingSphere))continue;F$e._renderUpdate(F$T);var F$M=F$e._renderElements;for(F$A=0,F$$=F$M.length;F$A<F$$;F$A++)F$n._addRenderElement(F$M[F$A])}}for(F$K=0;F$K<8;F$K++){var F$G=this._children[F$K];if(null!=F$G){var F$B=F$V;if(F$V){var F$o=F$J.containsBoundBox(F$G._relaxBox);if(0===F$o)continue;F$B=2===F$o}F$G.cullingShadowObjectsOnePSSM(F$J,F$y,F$T,F$B,F$Z,F$m)}}},F$J.renderBoudingBox=function(F$J){this._renderBoudingBox(F$J);for(var F$y=0;F$y<8;++F$y){var F$T=this._children[F$y];F$T&&F$T.renderBoudingBox(F$J)}},F$J.buildAllChild=function(F$J){if(F$J<this._scene.treeLevel)for(var F$y=0;F$y<8;F$y++){this.addChild(F$y).buildAllChild(F$J+1)}},F$J._renderBoudingBox=function(F$J){},F$B(0,F$J,"exactBox",function(){return this._exactBox},function(F$J){this._exactBox=F$J,F$Ry.add(F$J.min,F$J.max,this._boundingBoxCenter),F$Ry.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),F$B(0,F$J,"relaxBox",function(){return this._relaxBox},function(F$J){(this._relaxBox=F$J).getCorners(this._corners),F$NJ.createfromPoints(this._corners,this._boundingSphere)}),F$R.debugMode=!1,F$R.relax=1.15,F$R.CHILDNUM=8,F$e(F$R,["tempVector0",function(){return this.tempVector0=new F$Ry},"tempSize",function(){return this.tempSize=new F$Ry},"tempCenter",function(){return this.tempCenter=new F$Ry},"_octreeSplit",function(){return this._octreeSplit=[new F$Ry(.25,.25,.25),new F$Ry(.75,.25,.25),new F$Ry(.25,.75,.25),new F$Ry(.75,.75,.25),new F$Ry(.25,.25,.75),new F$Ry(.75,.25,.75),new F$Ry(.25,.75,.75),new F$Ry(.75,.75,.75)]}]),F$R}(),F$g=(function(){function F$J(){}F$G(F$J,"laya.d3.core.scene.SceneManager")}(),function(){function F$J(F$J,F$y,F$T,F$V){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===F$J&&(F$J=1),void 0===F$y&&(F$y=1),void 0===F$T&&(F$T=1),void 0===F$V&&(F$V=1),this._r=F$J,this._g=F$y,this._b=F$T,this._a=F$V}return F$G(F$J,"laya.d3.core.trail.module.Color",null,"Color$1"),F$J.prototype.cloneTo=function(F$J){F$J._r=this._r,F$J._g=this._g,F$J._b=this._b,F$J._a=this._a},F$e(F$J,["RED",function(){return this.RED=new F$J(1,0,0,1)},"GREEN",function(){return this.GREEN=new F$J(0,1,0,1)},"BLUE",function(){return this.BLUE=new F$J(0,0,1,1)},"CYAN",function(){return this.CYAN=new F$J(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new F$J(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new F$J(1,0,1,1)},"GRAY",function(){return this.GRAY=new F$J(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new F$J(1,1,1,1)},"BLACK",function(){return this.BLACK=new F$J(0,0,0,1)}]),F$J}()),F$N=(function(){function F$J(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}F$G(F$J,"laya.d3.core.trail.module.Gradient");var F$y=F$J.prototype;F$y.setKeys=function(F$J,F$y){var F$T,F$V;this._colorKeys=F$J;for(var F$Z=this.index=0;F$Z<F$J.length;F$Z++){var F$m=(F$T=F$J[F$Z]).color;this._colorKeyData[this.index++]=F$m._r,this._colorKeyData[this.index++]=F$m._g,this._colorKeyData[this.index++]=F$m._b,this._colorKeyData[this.index++]=F$T.time}this._alphaKeys=F$y;for(var F$R=this.index=0;F$R<F$y.length;F$R++)F$V=F$y[F$R],this._alphaKeyData[this.index++]=F$V.alpha,this._alphaKeyData[this.index++]=F$V.time},F$y.cloneTo=function(F$J){var F$y=0,F$T=0,F$V=this.colorKeys,F$Z=[];for(F$y=0,F$T=F$V.length;F$y<F$T;F$y++){var F$m=new F$w;F$V[F$y].cloneTo(F$m),F$Z.push(F$m)}var F$R=this.alphaKeys,F$n=[];for(F$y=0,F$T=F$R.length;F$y<F$T;F$y++){var F$K=new F$N;F$R[F$y].cloneTo(F$K),F$n.push(F$K)}F$J.setKeys(F$Z,F$n)},F$B(0,F$y,"mode",function(){return this._mode},function(F$J){this._mode=F$J}),F$B(0,F$y,"colorKeys",function(){return this._colorKeys},function(F$J){this._colorKeys=F$J;for(var F$y=this.index=0;F$y<F$J.length;F$y++){var F$T=F$J[F$y],F$V=F$T.color;this._colorKeyData[this.index++]=F$V._r,this._colorKeyData[this.index++]=F$V._g,this._colorKeyData[this.index++]=F$V._b,this._colorKeyData[this.index++]=F$T.time}}),F$B(0,F$y,"alphaKeys",function(){return this._alphaKeys},function(F$J){this._alphaKeys=F$J;for(var F$y=this.index=0;F$y<F$J.length;F$y++){var F$T=F$J[F$y];this._alphaKeyData[this.index++]=F$T.alpha,this._alphaKeyData[this.index++]=F$T.time}})}(),function(){function F$J(F$J,F$y){this._alpha=NaN,this._time=NaN,void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),this._alpha=F$J,this._time=F$y}F$G(F$J,"laya.d3.core.trail.module.GradientAlphaKey");var F$y=F$J.prototype;return F$y.cloneTo=function(F$J){F$J.alpha=this.alpha,F$J.time=this.time},F$B(0,F$y,"alpha",function(){return this._alpha},function(F$J){this._alpha=F$J}),F$B(0,F$y,"time",function(){return this._time},function(F$J){this._time=F$J}),F$J}()),F$w=function(){function F$J(F$J,F$y){this._color=null,this._time=NaN,void 0===F$y&&(F$y=0),this._color=F$J||new F$g,this._time=F$y}F$G(F$J,"laya.d3.core.trail.module.GradientColorKey");var F$y=F$J.prototype;return F$y.cloneTo=function(F$J){this.color.cloneTo(F$J.color),F$J.time=this.time},F$B(0,F$y,"color",function(){return this._color},function(F$J){this._color=F$J}),F$B(0,F$y,"time",function(){return this._time},function(F$J){this._time=F$J}),F$J}(),F$z=(function(){function F$J(){}F$G(F$J,"laya.d3.core.trail.module.GradientMode"),F$J.Blend=0,F$J.Fixed=1}(),function(){function F$J(){}F$G(F$J,"laya.d3.core.trail.module.TextureMode"),F$J.Stretch=0,F$J.Tile=1}(),function(){function F$J(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}F$G(F$J,"laya.d3.core.trail.module.TrailKeyFrame"),F$J.prototype.cloneTo=function(F$J){F$J.time=this.time,F$J.inTangent=this.inTangent,F$J.outTangent=this.outTangent,F$J.value=this.value}}(),function(){function F$y(F$J){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new F$Ry,this._curPosition=new F$Ry,this._delVector3=new F$Ry,this._lastFixedVertexPosition=new F$Ry,this._pointAtoBVector3=new F$Ry,this._pointA=new F$Ry,this._pointB=new F$Ry,this._owner=F$J,this._id=F$y.renderElementCount++,0==this._id?F$J._owner.transform.position.cloneTo(this._lastPosition):F$J._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new F$fy(F$z.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new F$fy(F$z.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}F$G(F$y,"laya.d3.core.trail.TrailRenderElement");var F$J=F$y.prototype;F$P.imps(F$J,{"laya.d3.core.render.IRenderable":!0}),F$J._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},F$J._addTrailByFirstPosition=function(F$J,F$y){F$Ry.subtract(F$y,F$J,this._delVector3),F$Ry.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),F$Ry.normalize(this._pointAtoBVector3,this._pointAtoBVector3),F$Ry.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(F$J),F$J.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},F$J._addTrailByNextPosition=function(F$J){F$Ry.subtract(F$J,this._lastFixedVertexPosition,this._delVector3),F$Ry.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),F$Ry.normalize(this._pointAtoBVector3,this._pointAtoBVector3),F$Ry.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=F$Ry.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=F$wJ.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(F$J),F$J.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(F$J),this._virtualVerticesCount=2)},F$J._updateVerticesByPosition=function(F$J){this._pointe=F$J.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},F$J._updateVertexBuffer2=function(){var F$J,F$y=0,F$T=0,F$V=0;for(F$V=0,F$J=(this._verticesCount+this._virtualVerticesCount)/2;F$V<F$J;F$V++)F$T=0==this._owner.textureMode?(this._VerticesToTailLength[F$V]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[F$V],this._vertices2[F$y++]=1-F$T,this._vertices2[F$y++]=1-F$T;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},F$J._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},F$J._updateDisappear=function(){var F$J,F$y=0;for(F$y=this._curDisappearIndex,F$J=(this._verticesCount+this._virtualVerticesCount)/2;F$y<F$J;F$y++)this._owner._curtime-this._everyGroupVertexBirthTime[F$y]>=this._owner.time+F$wJ.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},F$J._beforeRender=function(F$J){return this._camera=F$J.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),F$Ry.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},F$J._render=function(F$J){this._isDead||(F$v.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),F$q.drawCall++,F$q.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},F$J._getVertexBuffer=function(F$J){return void 0===F$J&&(F$J=0),0===F$J?this._vertexBuffer1:1===F$J?this._vertexBuffer2:null},F$J._getVertexBuffers=function(){return this._vertexBuffers},F$J._getIndexBuffer=function(){return null},F$J.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},F$J._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},F$B(0,F$J,"_vertexBufferCount",function(){return this._vertexBuffers.length}),F$B(0,F$J,"triangleCount",function(){return 0}),F$y.renderElementCount=0}(),function(){function F$J(){}F$G(F$J,"laya.d3.core.trail.VertexTrail");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration1}),F$B(1,F$J,"vertexDeclaration1",function(){return F$J._vertexDeclaration1}),F$B(1,F$J,"vertexDeclaration2",function(){return F$J._vertexDeclaration2}),F$e(F$J,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new F$mJ(32,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",41),new F$RJ(24,"single",33),new F$RJ(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new F$mJ(4,[new F$RJ(0,"single",38)])}]),F$J}()),F$JJ=function(){function F$H(F$J){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=F$J}F$G(F$H,"laya.d3.graphics.DynamicBatch");var F$J=F$H.prototype;return F$P.imps(F$J,{"laya.d3.core.render.IRenderable":!0}),F$J._getVertexBuffer=function(F$J){return void 0===F$J&&(F$J=0),0===F$J?this._vertexBuffer:null},F$J._getIndexBuffer=function(){return this._indexBuffer},F$J._getCombineRenderElementFromPool=function(F$J,F$y,F$T){var F$V=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return F$V||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=F$V=new F$b,F$V._sprite3D=new F$hy),F$V._sprite3D._render._renderUpdate(F$T),F$V},F$J._getRenderElement=function(F$J,F$y,F$T){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*F$H.maxVertexCount),this._indexDatas=new Uint16Array(F$H.maxIndexCount),this._vertexBuffer=F$fy.create(this._vertexDeclaration,F$H.maxVertexCount,35048),this._indexBuffer=F$Sy.create("ushort",F$H.maxIndexCount,35048));for(var F$V=this._merageElements.length=0,F$Z=0,F$m=0,F$R=this._combineRenderElements.length;F$m<F$R;F$m++){var F$n=this._combineRenderElements[F$m],F$K=F$n.getDynamicBatchBakedVertexs(0),F$A=F$n.getBakedIndices(),F$$=F$n._sprite3D.transform._isFrontFaceInvert,F$e=F$V/(this._vertexDeclaration.vertexStride/4),F$M=F$Z,F$G=F$M+F$A.length;F$n._tempBatchIndexStart=F$M,F$n._tempBatchIndexEnd=F$G,this._indexDatas.set(F$A,F$Z);var F$B=0;if(F$$)for(F$B=F$M;F$B<F$G;F$B+=3){this._indexDatas[F$B]=F$e+this._indexDatas[F$B];var F$o=this._indexDatas[F$B+1],F$s=this._indexDatas[F$B+2];this._indexDatas[F$B+1]=F$e+F$s,this._indexDatas[F$B+2]=F$e+F$o}else for(F$B=F$M;F$B<F$G;F$B+=3)this._indexDatas[F$B]=F$e+this._indexDatas[F$B],this._indexDatas[F$B+1]=F$e+this._indexDatas[F$B+1],this._indexDatas[F$B+2]=F$e+this._indexDatas[F$B+2];F$Z+=F$A.length,this._vertexDatas.set(F$K,F$V),F$V+=F$K.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),F$m=this._combineRenderElementPoolIndex=0,F$R=this._materials.length;F$m<F$R;F$m++){var F$E=this._getCombineRenderElementFromPool(F$J,F$y,F$T);F$E._type=2,F$E._staticBatch=null;var F$O=(F$E.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[F$m]]._tempBatchIndexStart,F$L=F$m+1===this._materialToRenderElementsOffsets.length?F$Z:this._combineRenderElements[this._materialToRenderElementsOffsets[F$m+1]]._tempBatchIndexStart;F$E._tempBatchIndexStart=F$O,F$E._tempBatchIndexEnd=F$L,F$E._material=this._materials[F$m],this._merageElements.push(F$E)}},F$J._addCombineRenderObjTest=function(F$J){var F$y=F$J.renderObj,F$T=this._currentCombineIndexCount+F$y._getIndexBuffer().indexCount,F$V=this._currentCombineVertexCount+F$y._getVertexBuffer().vertexCount;return!(F$H.maxVertexCount<F$V||F$H.maxIndexCount<F$T)},F$J._addCombineRenderObj=function(F$J){var F$y=F$J.renderObj;this._combineRenderElements.push(F$J),this._currentCombineIndexCount=this._currentCombineIndexCount+F$y._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+F$y._getVertexBuffer().vertexCount},F$J._addCombineMaterial=function(F$J){this._materials.push(F$J)},F$J._addMaterialToRenderElementOffset=function(F$J){this._materialToRenderElementsOffsets.push(F$J)},F$J._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},F$J._addToRenderQueue=function(F$J,F$y,F$T,F$V){this._getRenderElement(F$y,F$T,F$V);for(var F$Z=0,F$m=this._materials.length;F$Z<F$m;F$Z++)F$J.getRenderQueue(this._materials[F$Z].renderQueue)._addDynamicBatchElement(this._merageElements[F$Z])},F$J._beforeRender=function(F$J){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$J._render=function(F$J){var F$y=F$J._batchIndexEnd-F$J._batchIndexStart;F$v.mainContext.drawElements(4,F$y,5123,2*F$J._batchIndexStart),F$q.drawCall++,F$q.trianglesFaces+=F$y/3},F$J._getVertexBuffers=function(){return null},F$B(0,F$J,"_vertexBufferCount",function(){return 1}),F$B(0,F$J,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$B(0,F$J,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),F$H.maxVertexCount=2e4,F$H.maxIndexCount=4e4,F$H.maxCombineTriangleCount=10,F$H}(),F$yJ=function(){function F$H(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}F$G(F$H,"laya.d3.graphics.DynamicBatchManager");var F$J=F$H.prototype;return F$J.getDynamicBatch=function(F$J,F$y){var F$T,F$V=F$J.id.toString()+F$y;return this._dynamicBatches[F$V]?F$T=this._dynamicBatches[F$V]:this._dynamicBatches[F$V]=F$T=new F$JJ(F$J),F$T},F$J._garbageCollection=function(){for(var F$J in this._dynamicBatches)0===this._dynamicBatches[F$J].combineRenderElementsCount&&delete this._dynamicBatches[F$J]},F$J._addPrepareRenderElement=function(F$J){this._prepareDynamicBatchCombineElements.push(F$J)},F$J._finishCombineDynamicBatch=function(F$J){var F$y,F$T,F$V;this._prepareDynamicBatchCombineElements.sort(F$H._sortPrepareDynamicBatch);for(var F$Z,F$m,F$R,F$n,F$K,F$A=-1,F$$=!0,F$e=0,F$M=-1,F$G=0,F$B=this._prepareDynamicBatchCombineElements.length;F$G<F$B;F$G++){var F$o=(F$m=this._prepareDynamicBatchCombineElements[F$G]).renderObj._getVertexBuffer(0).vertexDeclaration,F$s=F$T!==F$o;F$s&&(F$e=0,F$T=F$o);var F$E=F$e!==F$A;if(F$E&&(F$A=F$e),(F$s||F$E)&&(F$R=this.getDynamicBatch(F$o,F$e),F$y=null),F$$)if(F$R._addCombineRenderObjTest(F$m)){if(F$y!==(F$Z=F$m._material))F$n&&(F$J.getRenderQueue(F$K._material.renderQueue)._addRenderElement(F$K),F$K=F$n=null,F$M=-1),F$n=F$Z,F$M=F$R.combineRenderElementsCount,F$K=F$m,F$y=F$Z;else if(F$n){var F$O=F$K.renderObj,F$L=F$m.renderObj;F$O._getVertexBuffer().vertexCount+F$L._getVertexBuffer().vertexCount>F$JJ.maxVertexCount||F$O._getIndexBuffer().indexCount+F$L._getIndexBuffer().indexCount>F$JJ.maxIndexCount?(F$J.getRenderQueue(F$K._material.renderQueue)._addRenderElement(F$K),F$n=F$Z,F$M=F$R.combineRenderElementsCount,F$K=F$m):(F$R._addCombineMaterial(F$n),F$R._addMaterialToRenderElementOffset(F$M),F$R._addCombineRenderObj(F$K),F$K=F$n=null,F$M=-1,F$R._addCombineRenderObj(F$m))}else F$R._addCombineRenderObj(F$m);F$$=!0}else F$n&&(F$J.getRenderQueue(F$K._material.renderQueue)._addRenderElement(F$K),F$K=F$n=null,F$M=-1),F$e++,F$$=!1;else F$V=this._prepareDynamicBatchCombineElements[F$G-1],F$R._addMaterialToRenderElementOffset(F$R.combineRenderElementsCount),F$y=F$V._material,F$R._addCombineMaterial(F$y),F$R._addCombineRenderObj(F$V),F$$=!0,F$y!==(F$Z=F$m._material)?(F$n=F$Z,F$M=F$R.combineRenderElementsCount,F$K=F$m):F$R._addCombineRenderObj(F$m),F$y=F$Z}F$n&&(F$J.getRenderQueue(F$K._material.renderQueue)._addRenderElement(F$K),F$K=F$n=null,F$M=-1),this._prepareDynamicBatchCombineElements.length=0},F$J._clearRenderElements=function(){for(var F$J in this._dynamicBatches)this._dynamicBatches[F$J]._clearRenderElements()},F$J._addToRenderQueue=function(F$J,F$y,F$T,F$V){for(var F$Z in this._dynamicBatches){var F$m=this._dynamicBatches[F$Z];0<F$m.combineRenderElementsCount&&F$m._addToRenderQueue(F$J,F$y,F$T,F$V)}},F$J.dispose=function(){this._dynamicBatches=null},F$H._sortPrepareDynamicBatch=function(F$J,F$y){return F$J._mainSortID-F$y._mainSortID},F$H}(),F$TJ=function(){function F$J(){}return F$G(F$J,"laya.d3.graphics.FrustumCulling"),F$J.renderShadowObjectCulling=function(F$J,F$y,F$T,F$V,F$Z){var F$m=0,F$R=0,F$n=0,F$K=0;for(F$m=0,F$n=F$T.length;F$m<F$n;F$m++){var F$A=F$T[F$m];F$A&&F$A._clearRenderElements()}var F$$,F$e,F$M,F$G=F$J._cullingRenders;if(1<F$Z){for(F$m=0,F$n=F$J._cullingRendersLength;F$m<F$n;F$m++)if((F$$=F$G[F$m]).castShadow&&F$c.isVisible(F$$._owner.layer.mask)&&F$$.enable)for(var F$B=1,F$o=F$y.length;F$B<F$o;F$B++)if(F$e=F$T[F$B-1],0!==F$y[F$B].containsBoundSphere(F$$.boundingSphere))for(F$R=0,F$K=(F$M=F$$._renderElements).length;F$R<F$K;F$R++)F$e._addRenderElement(F$M[F$R])}else for(F$m=0,F$n=F$J._cullingRendersLength;F$m<F$n;F$m++)if((F$$=F$G[F$m]).castShadow&&F$c.isVisible(F$$._owner.layer.mask)&&F$$.enable&&0!==F$y[0].containsBoundSphere(F$$.boundingSphere))for(F$$._renderUpdate(F$V),F$e=F$T[0],F$R=0,F$K=(F$M=F$$._renderElements).length;F$R<F$K;F$R++)F$e._addRenderElement(F$M[F$R])},F$J.renderShadowObjectCullingOctree=function(F$J,F$y,F$T,F$V,F$Z){for(var F$m=0,F$R=F$T.length;F$m<F$R;F$m++){var F$n=F$T[F$m];F$n&&F$n._clearRenderElements()}1<F$Z?F$J.treeRoot.cullingShadowObjects(F$y,F$T,!0,0,F$J):F$J.treeRoot.cullingShadowObjectsOnePSSM(F$y[0],F$T,F$V,!0,0,F$J)},F$J.renderObjectCulling=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=0,F$n=0,F$K=0,F$A=0,F$$=F$y._quenes,F$e=F$y._dynamicBatchManager,F$M=F$y._cullingRenders;for(F$R=0,F$n=F$$.length;F$R<F$n;F$R++){var F$G=F$$[F$R];F$G&&F$G._clearRenderElements()}var F$B=F$VJ._staticBatchManagers;for(F$R=0,F$n=F$B.length;F$R<F$n;F$R++)F$B[F$R]._clearRenderElements();F$e._clearRenderElements();var F$o=F$T.transform.position;for(F$R=0,F$n=F$y._cullingRendersLength;F$R<F$n;F$R++){var F$s=F$M[F$R];if(F$c.isVisible(F$s._owner.layer.mask)&&F$s.enable&&0!==F$J.containsBoundSphere(F$s.boundingSphere)&&F$s._renderUpdate(F$m)){F$s._distanceForSort=F$Ry.distance(F$s.boundingSphere.center,F$o)+F$s.sortingFudge;var F$E=F$s._renderElements;for(F$K=0,F$A=F$E.length;F$K<F$A;F$K++){var F$O=F$E[F$K],F$L=F$O._staticBatch;if(F$L&&F$L._material===F$O._material)F$L._addBatchRenderElement(F$O);else{var F$H=F$O.renderObj;F$H.triangleCount<10&&1===F$H._vertexBufferCount&&F$H._getIndexBuffer()&&F$O._material.renderQueue<2&&F$O._canDynamicBatch&&!F$s._owner.isStatic?F$e._addPrepareRenderElement(F$O):F$y.getRenderQueue(F$O._material.renderQueue)._addRenderElement(F$O)}}}}for(F$R=0,F$n=F$B.length;F$R<F$n;F$R++)F$B[F$R]._addToRenderQueue(F$y,F$V,F$Z,F$m);F$e._finishCombineDynamicBatch(F$y),F$e._addToRenderQueue(F$y,F$V,F$Z,F$m)},F$J.renderObjectCullingOctree=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=0,F$n=0,F$K=F$y._quenes,F$A=F$y._dynamicBatchManager;for(F$R=0,F$n=F$K.length;F$R<F$n;F$R++){var F$$=F$K[F$R];F$$&&F$$._clearRenderElements()}var F$e=F$VJ._staticBatchManagers;for(F$R=0,F$n=F$e.length;F$R<F$n;F$R++)F$e[F$R]._clearRenderElements();for(F$A._clearRenderElements(),F$y._cullingRenders.length=0,F$y.treeRoot.cullingObjects(F$J,!0,0,F$T.transform.position,F$m),F$R=0,F$n=F$e.length;F$R<F$n;F$R++)F$e[F$R]._addToRenderQueue(F$y,F$V,F$Z,F$m);F$A._finishCombineDynamicBatch(F$y),F$A._addToRenderQueue(F$y,F$V,F$Z,F$m)},F$J.renderObjectCullingNoBoundFrustum=function(F$J,F$y,F$T,F$V,F$Z){var F$m=0,F$R=0,F$n=0,F$K=0,F$A=F$J._quenes,F$$=F$J._dynamicBatchManager,F$e=F$J._cullingRenders;for(F$m=0,F$R=F$A.length;F$m<F$R;F$m++){var F$M=F$A[F$m];F$M&&F$M._clearRenderElements()}var F$G=F$VJ._staticBatchManagers;for(F$m=0,F$R=F$G.length;F$m<F$R;F$m++)F$G[F$m]._clearRenderElements();F$$._clearRenderElements();var F$B=F$y.transform.position;for(F$m=0,F$R=F$J._cullingRendersLength;F$m<F$R;F$m++){var F$o=F$e[F$m];if(F$c.isVisible(F$o._owner.layer.mask)&&F$o.enable){F$o._renderUpdate(F$Z),F$o._distanceForSort=F$Ry.distance(F$o.boundingSphere.center,F$B)+F$o.sortingFudge;var F$s=F$o._renderElements;for(F$n=0,F$K=F$s.length;F$n<F$K;F$n++){var F$E=F$s[F$n],F$O=F$E._staticBatch;if(F$O&&F$O._material===F$E._material)F$O._addBatchRenderElement(F$E);else{var F$L=F$E.renderObj;F$L.triangleCount<10&&1===F$L._vertexBufferCount&&F$L._getIndexBuffer()&&F$E._material.renderQueue<2&&F$E._canDynamicBatch&&!F$o._owner.isStatic?F$$._addPrepareRenderElement(F$E):F$J.getRenderQueue(F$E._material.renderQueue)._addRenderElement(F$E)}}}}for(F$m=0,F$R=F$G.length;F$m<F$R;F$m++)F$G[F$m]._addToRenderQueue(F$J,F$T,F$V,F$Z);F$$._finishCombineDynamicBatch(F$J),F$$._addToRenderQueue(F$J,F$T,F$V,F$Z)},F$J}(),F$VJ=function(){function F$m(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}F$G(F$m,"laya.d3.graphics.StaticBatchManager");var F$J=F$m.prototype;return F$J._finishInit=function(){for(var F$J in this._staticBatches)this._staticBatches[F$J]._finishInit();this._initBatchRenderElements.length=0},F$J._initStaticBatchs=function(F$J){throw new Error("StaticBatchManager:must override this function.")},F$J._addInitBatchSprite=function(F$J){for(var F$y=F$J._render._renderElements,F$T=0,F$V=F$y.length;F$T<F$V;F$T++)this._initBatchRenderElements.push(F$y[F$T])},F$J._clearRenderElements=function(){for(var F$J in this._staticBatches)this._staticBatches[F$J]._clearRenderElements()},F$J._garbageCollection=function(F$J){var F$y=F$J._staticBatch,F$T=F$y._initBatchRenderElements,F$V=F$T.indexOf(F$J);F$T.splice(F$V,1),0===F$T.length&&(F$y.dispose(),delete this._staticBatches[F$y._key])},F$J._addToRenderQueue=function(F$J,F$y,F$T,F$V){for(var F$Z in this._staticBatches){var F$m=this._staticBatches[F$Z];0<F$m._batchRenderElements.length&&F$m._updateToRenderQueue(F$J,F$V)}},F$J.dispose=function(){this._staticBatches=null},F$m._addToStaticBatchQueue=function(F$J){F$J instanceof laya.d3.core.RenderableSprite3D&&F$J._addToInitStaticBatchManager();for(var F$y=0,F$T=F$J.numChildren;F$y<F$T;F$y++)F$m._addToStaticBatchQueue(F$J._childs[F$y])},F$m.combine=function(F$J,F$y){var F$T,F$V=0,F$Z=0;if(F$y)for(F$V=0,F$Z=F$y.length;F$V<F$Z;F$V++){F$y[F$V]._addToInitStaticBatchManager()}else F$J&&F$m._addToStaticBatchQueue(F$J);for(F$V=0,F$Z=F$m._staticBatchManagers.length;F$V<F$Z;F$V++)(F$T=F$m._staticBatchManagers[F$V])._initStaticBatchs(F$J),F$T._finishInit()},F$m._staticBatchManagers=[],F$m}(),F$ZJ=function(){function F$J(F$J,F$y,F$T){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=F$J,this._manager=F$y,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=F$T}F$G(F$J,"laya.d3.graphics.StaticBatch");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),F$y._binarySearch=function(F$J){for(var F$y=0,F$T=this._batchRenderElements.length-1,F$V=0;F$y<=F$T;)F$V=Math.floor((F$y+F$T)/2),this._compareBatchRenderElement(this._batchRenderElements[F$V],F$J)?F$T=F$V-1:F$y=F$V+1;return F$y},F$y._compareBatchRenderElement=function(F$J,F$y){throw new Error("StaticBatch:must override this function.")},F$y._getVertexDecLightMap=function(F$J){return F$J===F$SJ.vertexDeclaration?F$cJ.vertexDeclaration:F$J===F$XJ.vertexDeclaration?F$iJ.vertexDeclaration:F$J===F$rJ.vertexDeclaration?F$HJ.vertexDeclaration:F$J===F$YJ.vertexDeclaration?null:F$J===F$oJ.vertexDeclaration?F$sJ.vertexDeclaration:F$J===F$WJ.vertexDeclaration?F$xJ.vertexDeclaration:F$J===F$vJ.vertexDeclaration?F$QJ.vertexDeclaration:F$J===F$fJ.vertexDeclaration?F$uJ.vertexDeclaration:F$J===F$XJ.vertexDeclaration?F$iJ.vertexDeclaration:F$J===F$DJ.vertexDeclaration?F$PJ.vertexDeclaration:F$J===F$YJ.vertexDeclaration?null:F$J===F$oJ.vertexDeclaration?F$sJ.vertexDeclaration:F$J===F$IJ.vertexDeclaration?F$kJ.vertexDeclaration:F$J===F$vJ.vertexDeclaration?F$QJ.vertexDeclaration:F$J},F$y._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},F$y._addBatchRenderElement=function(F$J){this._batchRenderElements.splice(this._binarySearch(F$J),0,F$J)},F$y._updateToRenderQueue=function(F$J,F$y){this._combineRenderElementPoolIndex=0,this._getRenderElement(F$J.getRenderQueue(this._material.renderQueue)._renderElements,F$J,F$y)},F$y._getRenderElement=function(F$J,F$y,F$T){throw new Error("StaticBatch:must override this function.")},F$y._finishInit=function(){throw new Error("StaticBatch:must override this function.")},F$y._clearRenderElements=function(){this._batchRenderElements.length=0},F$y.dispose=function(){},F$y._getVertexBuffer=function(F$J){return void 0===F$J&&(F$J=0),null},F$y._getIndexBuffer=function(){return null},F$y._beforeRender=function(F$J){return!0},F$y._render=function(F$J){},F$y._getVertexBuffers=function(){return null},F$B(0,F$y,"_vertexBufferCount",function(){return 1}),F$B(0,F$y,"triangleCount",function(){return 0}),F$J.combine=function(F$J){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),F$VJ.combine(F$J)},F$J.maxBatchVertexCount=65535,F$J}(),F$mJ=function(){function F$R(F$J,F$y){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++F$R._uniqueIDCounter,this._id>F$R.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",F$R.maxVertexDeclaration);this._shaderValues=new F$My,this._vertexElementsDic={},this._vertexStride=F$J,this._vertexElements=F$y;for(var F$T=0;F$T<F$y.length;F$T++){var F$V=F$y[F$T],F$Z=F$V.elementUsage;this._vertexElementsDic[F$Z]=F$V;var F$m=[F$R._getTypeSize(F$V.elementFormat)/4,5126,!1,this._vertexStride,F$V.offset];switch(this._shaderValues.setValue(F$Z,F$m),F$Z){case 1:this._addShaderDefine(F$qy.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(F$qy.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(F$qy.SHADERDEFINE_UV1)}}}F$G(F$R,"laya.d3.graphics.VertexDeclaration");var F$J=F$R.prototype;return F$J._addShaderDefine=function(F$J){this._shaderDefineValue|=F$J},F$J._removeShaderDefine=function(F$J){this._shaderDefineValue&=~F$J},F$J.getVertexElements=function(){return this._vertexElements.slice()},F$J.getVertexElementByUsage=function(F$J){return this._vertexElementsDic[F$J]},F$J.unBinding=function(){},F$B(0,F$J,"shaderDefineValue",function(){return this._shaderDefineValue}),F$B(0,F$J,"id",function(){return this._id}),F$B(0,F$J,"vertexStride",function(){return this._vertexStride}),F$B(0,F$J,"shaderValues",function(){return this._shaderValues}),F$R._getTypeSize=function(F$J){switch(F$J){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},F$R.getVertexStride=function(F$J){for(var F$y=0,F$T=0;F$T<F$J.Length;F$T++){var F$V=F$J[F$T],F$Z=F$V.offset+F$R._getTypeSize(F$V.elementFormat);F$y<F$Z&&(F$y=F$Z)}return F$y},F$R._maxVertexDeclarationBit=1e3,F$R._uniqueIDCounter=1,F$e(F$R,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),F$R}(),F$RJ=function(){function F$J(F$J,F$y,F$T){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=F$J,this.elementFormat=F$y,this.elementUsage=F$T}return F$G(F$J,"laya.d3.graphics.VertexElement"),F$J}(),F$nJ=(function(){function F$J(){}F$G(F$J,"laya.d3.graphics.VertexElementFormat"),F$J.Single="single",F$J.Vector2="vector2",F$J.Vector3="vector3",F$J.Vector4="vector4",F$J.Color="color",F$J.Byte4="byte4",F$J.Short2="short2",F$J.Short4="short4",F$J.NormalizedShort2="normalizedshort2",F$J.NormalizedShort4="normalizedshort4",F$J.HalfVector2="halfvector2",F$J.HalfVector4="halfvector4"}(),function(){function F$J(){}F$G(F$J,"laya.d3.graphics.VertexElementUsage"),F$J.POSITION0=0,F$J.COLOR0=1,F$J.TEXTURECOORDINATE0=2,F$J.NORMAL0=3,F$J.BINORMAL0=4,F$J.TANGENT0=5,F$J.BLENDINDICES0=6,F$J.BLENDWEIGHT0=7,F$J.DEPTH0=8,F$J.FOG0=9,F$J.POINTSIZE0=10,F$J.SAMPLE0=11,F$J.TESSELLATEFACTOR0=12,F$J.COLOR1=13,F$J.NEXTTEXTURECOORDINATE0=14,F$J.TEXTURECOORDINATE1=15,F$J.NEXTTEXTURECOORDINATE1=16,F$J.CORNERTEXTURECOORDINATE0=17,F$J.VELOCITY0=18,F$J.STARTCOLOR0=19,F$J.STARTSIZE=20,F$J.AGEADDSCALE0=21,F$J.STARTROTATION=22,F$J.ENDCOLOR0=23,F$J.STARTLIFETIME=24,F$J.TIME0=33,F$J.SHAPEPOSITIONSTARTLIFETIME=30,F$J.DIRECTIONTIME=32,F$J.SIZEROTATION0=27,F$J.RADIUS0=28,F$J.RADIAN0=29,F$J.STARTSPEED=31,F$J.RANDOM0=34,F$J.RANDOM1=35,F$J.SIMULATIONWORLDPOSTION=36,F$J.SIMULATIONWORLDROTATION=37,F$J.TEXTURECOORDINATE0X=38,F$J.TEXTURECOORDINATE0X1=39,F$J.TEXTURECOORDINATE0Y=40,F$J.OFFSETVECTOR=41}(),function(){function F$J(F$J,F$y,F$T){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=F$J,this._textureCoordinate0=F$y,this._time=F$T}F$G(F$J,"laya.d3.graphics.VertexGlitter");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate0}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"time",function(){return this._time}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(24,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector2",2),new F$RJ(20,"single",33)])}])}(),function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=F$J,this._position=F$y,this._velocity=F$T,this._startColor=F$V,this._endColor=F$Z,this._sizeRotation=F$m,this._radius=F$R,this._radian=F$n,this._ageAddScale=F$K,this._time=F$A}F$G(F$J,"laya.d3.graphics.VertexParticle");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"endColor",function(){return this._endColor}),F$B(0,F$y,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$B(0,F$y,"sizeRotation",function(){return this._sizeRotation}),F$B(0,F$y,"velocity",function(){return this._velocity}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"startColor",function(){return this._startColor}),F$B(0,F$y,"radius",function(){return this._radius}),F$B(0,F$y,"radian",function(){return this._radian}),F$B(0,F$y,"ageAddScale",function(){return this._ageAddScale}),F$B(0,F$y,"time",function(){return this._time}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(116,[new F$RJ(0,"vector4",17),new F$RJ(16,"vector3",0),new F$RJ(28,"vector3",18),new F$RJ(40,"vector4",19),new F$RJ(56,"vector4",23),new F$RJ(72,"vector3",27),new F$RJ(84,"vector2",28),new F$RJ(92,"vector4",29),new F$RJ(108,"single",24),new F$RJ(112,"single",33)])}])}(),function(){function F$J(F$J){this._position=null,this._position=F$J}F$G(F$J,"laya.d3.graphics.VertexPosition");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(12,[new F$RJ(0,"vector3",0)])}]),F$J}()),F$KJ=function(){function F$J(F$J,F$y){this._position=null,this._normal=null,this._position=F$J,this._normal=F$y}F$G(F$J,"laya.d3.graphics.VertexPositionNormal");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(24,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3)])}]),F$J}(),F$AJ=function(){function F$J(F$J,F$y,F$T){this._position=null,this._normal=null,this._color=null,this._position=F$J,this._normal=F$y,this._color=F$T}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColor");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(40,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1)])}]),F$J}(),F$$J=function(){function F$J(F$J,F$y,F$T,F$V,F$Z){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._blendIndex=F$V,this._blendWeight=F$Z}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorSkin");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(72,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector4",7),new F$RJ(56,"vector4",6)])}]),F$J}(),F$eJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._tangent=F$V,this._blendIndex=F$Z,this._blendWeight=F$m}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(88,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector4",7),new F$RJ(56,"vector4",6),new F$RJ(72,"vector4",5)])}]),F$J}(),F$MJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._tangent=F$V,this._blendIndex=F$Z,this._blendWeight=F$m}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(84,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector4",7),new F$RJ(56,"vector4",6),new F$RJ(72,"vector3",5)])}]),F$J}(),F$GJ=function(){function F$J(F$J,F$y,F$T,F$V){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._tangent=F$V}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorSTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(56,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector4",5)])}]),F$J}(),F$BJ=function(){function F$J(F$J,F$y,F$T,F$V){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._tangent=F$V}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(52,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector3",5)])}]),F$J}(),F$oJ=function(){function F$J(F$J,F$y,F$T,F$V){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate=F$V}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTexture");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(48,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2)])}]),F$J}(),F$sJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate0=F$V,this._textureCoordinate1=F$Z}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(56,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector2",15)])}]),F$J}(),F$EJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate0=F$V,this._textureCoordinate1=F$Z,this._blendIndex=F$m,this._blendWeight=F$R}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(88,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector2",15),new F$RJ(56,"vector4",7),new F$RJ(72,"vector4",6)])}]),F$J}(),F$OJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate0=F$V,this._textureCoordinate1=F$Z,this._tangent=F$m,this._blendIndex=F$R,this._blendWeight=F$n}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(104,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector2",15),new F$RJ(56,"vector4",7),new F$RJ(72,"vector4",6),new F$RJ(88,"vector4",5)])}]),F$J}(),F$LJ=function(){function F$J(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$y.VertexPositionNormalColorTexture0SkinTangent=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate0=F$V,this._textureCoordinate1=F$Z,this._tangent=F$m,this._blendIndex=F$R,this._blendWeight=F$n},F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(100,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector2",15),new F$RJ(56,"vector4",7),new F$RJ(72,"vector4",6),new F$RJ(88,"vector3",5)])}]),F$J}(),F$HJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate0=F$V,this._textureCoordinate1=F$Z,this._tangent=F$m}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(72,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector2",15),new F$RJ(56,"vector4",5)])}]),F$J}(),F$PJ=function(){function F$J(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$y.VertexPositionNormalColorTexture0Tangent=function(F$J,F$y,F$T,F$V,F$Z,F$m){this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate0=F$V,this._textureCoordinate1=F$Z,this._tangent=F$m},F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(68,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector2",15),new F$RJ(56,"vector3",5)])}]),F$J}(),F$lJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate=F$V,this._blendIndex=F$Z,this._blendWeight=F$m}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(80,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector4",7),new F$RJ(64,"vector4",6)])}]),F$J}(),F$aJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate=F$V,this._tangent=F$Z,this._blendIndex=F$m,this._blendWeight=F$R}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(96,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector4",7),new F$RJ(64,"vector4",6),new F$RJ(80,"vector4",5)])}]),F$J}(),F$qJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate=F$V,this._tangent=F$Z,this._blendIndex=F$m,this._blendWeight=F$R}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(92,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector4",7),new F$RJ(64,"vector4",6),new F$RJ(80,"vector3",5)])}]),F$J}(),F$rJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate=F$V,this._tangent=F$Z}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(64,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector4",5)])}]),F$J}(),F$DJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._color=F$T,this._textureCoordinate=F$V,this._tangent=F$Z}F$G(F$J,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"color",function(){return this._color}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(60,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",1),new F$RJ(40,"vector2",2),new F$RJ(48,"vector3",5)])}]),F$J}(),F$_J=function(){function F$J(F$J,F$y,F$T){this._position=null,this._normal=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._tangent=F$T}F$G(F$J,"laya.d3.graphics.VertexPositionNormalSTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(40,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector4",5)])}]),F$J}(),F$tJ=function(){function F$J(F$J,F$y,F$T){this._position=null,this._normal=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._tangent=F$T}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(36,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector3",5)])}]),F$J}(),F$vJ=function(){function F$J(F$J,F$y,F$T){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$J,this._normal=F$y,this._textureCoordinate=F$T}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTexture");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(32,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2)])}]),F$J}(),F$QJ=function(){function F$J(F$J,F$y,F$T,F$V){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=F$J,this._normal=F$y,this._textureCoordinate0=F$T,this._textureCoordinate1=F$V}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(40,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector2",15)])}]),F$J}(),F$iJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=F$J,this._normal=F$y,this._textureCoordinate0=F$T,this._textureCoordinate1=F$V,this._blendIndex=F$Z,this._blendWeight=F$m}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(72,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector2",15),new F$RJ(40,"vector4",7),new F$RJ(56,"vector4",6)])}]),F$J}(),F$cJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._textureCoordinate0=F$T,this._textureCoordinate1=F$V,this._tangent=F$Z,this._blendIndex=F$m,this._blendWeight=F$R}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(88,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector2",15),new F$RJ(40,"vector4",7),new F$RJ(56,"vector4",6),new F$RJ(72,"vector4",5)])}]),F$J}(),F$uJ=function(){function F$J(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$y.VertexPositionNormalTexture0SkinTangent=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){this._position=F$J,this._normal=F$y,this._textureCoordinate0=F$T,this._textureCoordinate1=F$V,this._tangent=F$Z,this._blendIndex=F$m,this._blendWeight=F$R},F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(84,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector2",15),new F$RJ(40,"vector4",7),new F$RJ(56,"vector4",6),new F$RJ(72,"vector3",5)])}]),F$J}(),F$xJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._textureCoordinate0=F$T,this._textureCoordinate1=F$V,this._tangent=F$Z}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(56,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector2",15),new F$RJ(40,"vector4",5)])}]),F$J}(),F$kJ=function(){function F$J(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$y.VertexPositionNormalTexture0Tangent=function(F$J,F$y,F$T,F$V,F$Z){this._position=F$J,this._normal=F$y,this._textureCoordinate0=F$T,this._textureCoordinate1=F$V,this._tangent=F$Z},F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(52,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector2",15),new F$RJ(40,"vector3",5)])}]),F$J}(),F$XJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=F$J,this._normal=F$y,this._textureCoordinate=F$T,this._blendIndex=F$V,this._blendWeight=F$Z}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTextureSkin");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(64,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector4",7),new F$RJ(48,"vector4",6)])}]),F$J}(),F$SJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._textureCoordinate=F$T,this._tangent=F$V,this._blendIndex=F$Z,this._blendWeight=F$m}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(80,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector4",7),new F$RJ(48,"vector4",6),new F$RJ(64,"vector4",5)])}]),F$J}(),F$fJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._textureCoordinate=F$T,this._tangent=F$V,this._blendIndex=F$Z,this._blendWeight=F$m}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(76,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector4",7),new F$RJ(48,"vector4",6),new F$RJ(64,"vector3",5)])}]),F$J}(),F$WJ=function(){function F$J(F$J,F$y,F$T,F$V){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._textureCoordinate=F$T,this._tangent=F$V}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(48,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector4",5)])}]),F$J}(),F$IJ=function(){function F$J(F$J,F$y,F$T,F$V){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=F$J,this._normal=F$y,this._textureCoordinate=F$T,this._tangent=F$V}F$G(F$J,"laya.d3.graphics.VertexPositionNormalTextureTangent");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(44,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector3",5)])}]),F$J}(),F$YJ=function(){function F$J(F$J,F$y,F$T){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$J,this._normal=F$y,this._textureCoordinate=F$T}F$G(F$J,"laya.d3.graphics.VertexPositionNTBTexture");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(56,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector3",5),new F$RJ(36,"vector3",4),new F$RJ(48,"vector2",2)])}]),F$J}(),F$UJ=function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=F$J,this._normal=F$y,this._textureCoordinate0=F$V,this._textureCoordinate1=F$Z,this._tangent=F$m,F$T=F$T,this._blendIndex=F$R,this._blendWeight=F$n}F$G(F$J,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"tangent",function(){return this._tangent}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(0,F$y,"textureCoordinate1",function(){return this._textureCoordinate1}),F$B(0,F$y,"blendIndex",function(){return this._blendIndex}),F$B(0,F$y,"blendWeight",function(){return this._blendWeight}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(96,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector3",5),new F$RJ(36,"vector3",4),new F$RJ(48,"vector2",2),new F$RJ(56,"vector2",15),new F$RJ(64,"vector4",7),new F$RJ(80,"vector4",6)])}]),F$J}(),F$dJ=function(){function F$J(F$J,F$y,F$T){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$J,this._normal=F$y,this._textureCoordinate=F$T}F$G(F$J,"laya.d3.graphics.VertexPositionNTBTextureSkin");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"textureCoordinate",function(){return this._textureCoordinate}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(88,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector3",5),new F$RJ(36,"vector3",4),new F$RJ(48,"vector2",2),new F$RJ(56,"vector4",7),new F$RJ(72,"vector4",6)])}]),F$J}(),F$CJ=(function(){function F$J(F$J,F$y,F$T,F$V){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=F$J,this._normal=F$y,this._textureCoord0=F$T,this._textureCoord1=F$V}F$G(F$J,"laya.d3.graphics.VertexPositionTerrain");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"normal",function(){return this._normal}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"textureCoord0",function(){return this._textureCoord0}),F$B(0,F$y,"textureCoord1",function(){return this._textureCoord1}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(40,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector3",3),new F$RJ(24,"vector2",2),new F$RJ(32,"vector2",15)])}])}(),function(){function F$J(F$J,F$y){this._position=null,this._textureCoordinate0=null,this._position=F$J,this._textureCoordinate0=F$y}F$G(F$J,"laya.d3.graphics.VertexPositionTexture0");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"position",function(){return this._position}),F$B(0,F$y,"textureCoordinate0",function(){return this._textureCoordinate0}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(20,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector2",2)])}]),F$J}()),F$FJ=(function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$e,F$M,F$G){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=F$J,this._positionStartLifeTime=F$y,this._velocity=F$T,this._startColor=F$V,this._startSize=F$Z,this._startRotation0=F$m,this._startRotation1=F$R,this._startRotation2=F$n,this._startLifeTime=F$K,this._time=F$A,this._startSpeed=F$$,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=F$G}F$G(F$J,"laya.d3.graphics.VertexShurikenParticleBillboard");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$B(0,F$y,"random1",function(){return this._randoms1}),F$B(0,F$y,"startRotation2",function(){return this._startRotation2}),F$B(0,F$y,"positionStartLifeTime",function(){return this._positionStartLifeTime}),F$B(0,F$y,"velocity",function(){return this._velocity}),F$B(0,F$y,"random0",function(){return this._randoms0}),F$B(0,F$y,"startSize",function(){return this._startSize}),F$B(0,F$y,"startColor",function(){return this._startColor}),F$B(0,F$y,"startRotation0",function(){return this._startRotation0}),F$B(0,F$y,"startRotation1",function(){return this._startRotation1}),F$B(0,F$y,"startLifeTime",function(){return this._startLifeTime}),F$B(0,F$y,"time",function(){return this._time}),F$B(0,F$y,"startSpeed",function(){return this._startSpeed}),F$B(0,F$y,"simulationWorldPostion",function(){return this._simulationWorldPostion}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(152,[new F$RJ(0,"vector4",17),new F$RJ(16,"vector4",30),new F$RJ(32,"vector4",32),new F$RJ(48,"vector4",19),new F$RJ(64,"vector3",20),new F$RJ(76,"vector3",22),new F$RJ(88,"single",31),new F$RJ(92,"vector4",34),new F$RJ(108,"vector4",35),new F$RJ(124,"vector3",36),new F$RJ(136,"vector4",37)])}])}(),function(){function F$J(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$e,F$M,F$G){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=F$J,this._positionStartLifeTime=F$y,this._velocity=F$T,this._startColor=F$V,this._startSize=F$Z,this._startRotation0=F$m,this._startRotation1=F$R,this._startRotation2=F$n,this._startLifeTime=F$K,this._time=F$A,this._startSpeed=F$$,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=F$G}F$G(F$J,"laya.d3.graphics.VertexShurikenParticleMesh");var F$y=F$J.prototype;F$P.imps(F$y,{"laya.d3.graphics.IVertex":!0}),F$B(0,F$y,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$B(0,F$y,"velocity",function(){return this._velocity}),F$B(0,F$y,"position",function(){return this._positionStartLifeTime}),F$B(0,F$y,"random0",function(){return this._randoms0}),F$B(0,F$y,"startSize",function(){return this._startSize}),F$B(0,F$y,"startColor",function(){return this._startColor}),F$B(0,F$y,"startRotation0",function(){return this._startRotation0}),F$B(0,F$y,"startRotation1",function(){return this._startRotation1}),F$B(0,F$y,"random1",function(){return this._randoms1}),F$B(0,F$y,"startRotation2",function(){return this._startRotation2}),F$B(0,F$y,"startLifeTime",function(){return this._startLifeTime}),F$B(0,F$y,"time",function(){return this._time}),F$B(0,F$y,"startSpeed",function(){return this._startSpeed}),F$B(0,F$y,"simulationWorldPostion",function(){return this._simulationWorldPostion}),F$B(0,F$y,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$B(1,F$J,"vertexDeclaration",function(){return F$J._vertexDeclaration}),F$e(F$J,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$mJ(172,[new F$RJ(0,"vector3",0),new F$RJ(12,"vector4",1),new F$RJ(28,"vector2",2),new F$RJ(36,"vector4",30),new F$RJ(52,"vector4",32),new F$RJ(68,"vector4",19),new F$RJ(84,"vector3",20),new F$RJ(96,"vector3",22),new F$RJ(108,"single",31),new F$RJ(112,"vector4",34),new F$RJ(128,"vector4",35),new F$RJ(144,"vector3",36),new F$RJ(156,"vector4",37)])}])}(),function(){function F$L(F$J,F$y,F$T,F$V,F$Z,F$m){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=F$T,this._materials=F$V,this._subMeshes=F$Z,this._materialMap=F$m,this._version=F$y,this._onLoaded(F$J)}F$G(F$L,"laya.d3.loaders.LoadModelV01");var F$J=F$L.prototype;return F$J._onLoaded=function(F$J){this._readData=F$J,this.READ_BLOCK();for(var F$y=0;F$y<this._BLOCK.count;F$y++){var F$T=this._readData.getUint16(),F$V=this._strings[F$T],F$Z=this["READ_"+F$V];if(null==F$Z)throw new Error("model file err,no this function:"+F$T+" "+F$V);if(!F$Z.call(this))break}return this._mesh},F$J.onError=function(){},F$J._readString=function(){return this._strings[this._readData.getUint16()]},F$J.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},F$J.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},F$J.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var F$J=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var F$y=0;F$y<this._STRINGS.size;F$y++)this._strings[F$y]=this._readData.readUTFString();return this._readData.pos=F$J,!0},F$J.READ_MATERIAL=function(){var F$J=this._readData.getUint16(),F$y=(this._readString(),this._readString());return this._materials[F$J]="null"!==F$y?F$E.getRes(this._materialMap[F$y]):new F$ty,!0},F$J.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var F$J,F$y=this._readData.__getBuffer(),F$T=0,F$V=this._readData.getUint32(),F$Z=this._readData.getUint32(),F$m=(new Float32Array(F$y.slice(F$V+this._DATA.offset,F$V+this._DATA.offset+F$Z)),this._readData.getUint32()),F$R=this._readData.getUint32(),F$n=new Float32Array(F$y.slice(F$m+this._DATA.offset,F$m+this._DATA.offset+F$R));for(this.mesh._inverseBindPoses=[],F$T=0,F$J=F$n.length;F$T<F$J;F$T+=16){var F$K=new F$Jy(F$n[F$T+0],F$n[F$T+1],F$n[F$T+2],F$n[F$T+3],F$n[F$T+4],F$n[F$T+5],F$n[F$T+6],F$n[F$T+7],F$n[F$T+8],F$n[F$T+9],F$n[F$T+10],F$n[F$T+11],F$n[F$T+12],F$n[F$T+13],F$n[F$T+14],F$n[F$T+15]);this.mesh._inverseBindPoses.push(F$K)}break;default:throw new Error("LoadModel:unknown version.")}return!0},F$J.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var F$J=this._readString();this._shaderAttributes=F$J.match(F$L._attrReg);var F$y=this._readData.getUint32(),F$T=this._readData.getUint32(),F$V=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),F$Z=this._readData.getUint32(),F$m=this._readData.getUint32(),F$R=this._readData.getUint32(),F$n=this._readData.__getBuffer(),F$K=new F$Ay(this._mesh),F$A=this._getVertexDeclaration(),F$$=F$fy.create(F$A,F$Z/F$A.vertexStride,35044,!0),F$e=F$V+this._DATA.offset,F$M=F$n.slice(F$e,F$e+F$Z);F$$.setData(new Float32Array(F$M));for(var F$G=(F$K._vertexBuffer=F$$).vertexDeclaration.getVertexElements(),F$B=0;F$B<F$G.length;F$B++)F$K._bufferUsage[F$G[F$B].elementUsage]=F$$;var F$o=F$Sy.create("ushort",F$T/2,35044,!0),F$s=F$y+this._DATA.offset,F$E=F$n.slice(F$s,F$s+F$T);F$o.setData(new Uint16Array(F$E)),F$K._indexBuffer=F$o;var F$O=F$n.slice(F$m+this._DATA.offset,F$m+this._DATA.offset+F$R);return F$K._boneIndicesList[0]=new Uint8Array(F$O),this._subMeshes.push(F$K),!0},F$J.READ_DATAAREA=function(){return!1},F$J._getVertexDeclaration=function(){for(var F$J,F$y=!1,F$T=!1,F$V=!1,F$Z=!1,F$m=!1,F$R=!1,F$n=!1,F$K=!1,F$A=!1,F$$=0;F$$<this._shaderAttributes.length;F$$+=8)switch(this._shaderAttributes[F$$]){case"POSITION":F$y=!0;break;case"NORMAL":F$T=!0;break;case"COLOR":F$V=!0;break;case"UV":F$Z=!0;break;case"UV1":F$m=!0;break;case"BLENDWEIGHT":F$n=!0;break;case"BLENDINDICES":F$K=!0;break;case"TANGENT":F$R=!0;break;case"BINORMAL":F$A=!0}return F$y&&F$T&&F$V&&F$Z&&F$m&&F$n&&F$K&&F$R?F$J=F$LJ.vertexDeclaration:F$y&&F$T&&F$V&&F$Z&&F$m&&F$n&&F$K?F$J=F$EJ.vertexDeclaration:F$y&&F$T&&F$Z&&F$m&&F$n&&F$K&&F$R?F$J=F$uJ.vertexDeclaration:F$y&&F$T&&F$Z&&F$m&&F$n&&F$K?F$J=F$iJ.vertexDeclaration:F$y&&F$T&&F$V&&F$Z&&F$n&&F$K&&F$R?F$J=F$qJ.vertexDeclaration:F$y&&F$T&&F$V&&F$Z&&F$n&&F$K?F$J=F$lJ.vertexDeclaration:F$y&&F$T&&F$R&&F$A&&F$Z&&F$n&&F$K?F$J=F$dJ.vertexDeclaration:F$y&&F$T&&F$Z&&F$n&&F$K&&F$R?F$J=F$fJ.vertexDeclaration:F$y&&F$T&&F$Z&&F$n&&F$K?F$J=F$XJ.vertexDeclaration:F$y&&F$T&&F$V&&F$n&&F$K&&F$R?F$J=F$MJ.vertexDeclaration:F$y&&F$T&&F$V&&F$n&&F$K?F$J=F$$J.vertexDeclaration:F$y&&F$T&&F$V&&F$Z&&F$m&&F$R?F$J=F$PJ.vertexDeclaration:F$y&&F$T&&F$V&&F$Z&&F$m?F$J=F$sJ.vertexDeclaration:F$y&&F$T&&F$Z&&F$m&&F$R?F$J=F$kJ.vertexDeclaration:F$y&&F$T&&F$Z&&F$m?F$J=F$QJ.vertexDeclaration:F$y&&F$T&&F$V&&F$Z&&F$R?F$J=F$DJ.vertexDeclaration:F$y&&F$T&&F$Z&&F$R&&F$A?F$J=F$YJ.vertexDeclaration:F$y&&F$T&&F$V&&F$Z?F$J=F$oJ.vertexDeclaration:F$y&&F$T&&F$Z&&F$R?F$J=F$IJ.vertexDeclaration:F$y&&F$T&&F$Z?F$J=F$vJ.vertexDeclaration:F$y&&F$T&&F$V&&F$R?F$J=F$BJ.vertexDeclaration:F$y&&F$T&&F$V&&(F$J=F$AJ.vertexDeclaration),F$J},F$B(0,F$J,"mesh",function(){return this._mesh}),F$L._attrReg=new RegExp("(\\w+)|([:,;])","g"),F$L}()),F$bJ=function(){function F$a(){}return F$G(F$a,"laya.d3.loaders.LoadModelV02"),F$a.parse=function(F$J,F$y,F$T,F$V,F$Z,F$m){F$a._mesh=F$T,F$a._materials=F$V,F$a._subMeshes=F$Z,F$a._materialMap=F$m,F$a._version=F$y,F$a._readData=F$J,F$a.READ_DATA(),F$a.READ_BLOCK(),F$a.READ_STRINGS();for(var F$R=0,F$n=F$a._BLOCK.count;F$R<F$n;F$R++){F$a._readData.pos=F$a._BLOCK.blockStarts[F$R];var F$K=F$a._readData.getUint16(),F$A=F$a._strings[F$K],F$$=F$a["READ_"+F$A];if(null==F$$)throw new Error("model file err,no this function:"+F$K+" "+F$A);F$$.call()}F$a._strings.length=0,F$a._readData=null,F$a._version=null,F$a._mesh=null,F$a._materials=null,F$a._subMeshes=null,F$a._materialMap=null},F$a._readString=function(){return F$a._strings[F$a._readData.getUint16()]},F$a.READ_DATA=function(){F$a._DATA.offset=F$a._readData.getUint32(),F$a._DATA.size=F$a._readData.getUint32()},F$a.READ_BLOCK=function(){for(var F$J=F$a._BLOCK.count=F$a._readData.getUint16(),F$y=F$a._BLOCK.blockStarts=[],F$T=F$a._BLOCK.blockLengths=[],F$V=0;F$V<F$J;F$V++)F$y.push(F$a._readData.getUint32()),F$T.push(F$a._readData.getUint32())},F$a.READ_STRINGS=function(){var F$J=F$a._readData.getUint32(),F$y=F$a._readData.getUint16(),F$T=F$a._readData.pos;F$a._readData.pos=F$J+F$a._DATA.offset;for(var F$V=0;F$V<F$y;F$V++)F$a._strings[F$V]=F$a._readData.readUTFString();F$a._readData.pos=F$T},F$a.READ_MATERIAL=function(){F$a._readString(),F$a._readString();var F$J=F$a._readString();return""!==F$J&&F$a._materials.push(F$E.getRes(F$a._materialMap[F$J])),!0},F$a.READ_MESH=function(){F$a._readString();var F$J,F$y=F$a._readData.__getBuffer(),F$T=0,F$V=F$a._readData.getInt16(),F$Z=F$a._DATA.offset;for(F$T=0;F$T<F$V;F$T++){var F$m=F$Z+F$a._readData.getUint32(),F$R=F$a._readData.getUint32(),F$n=new Float32Array(F$y.slice(F$m,F$m+F$R)),F$K=F$a._readString().match(F$a._attrReg),F$A=F$a._getVertexDeclaration(F$K),F$$=F$fy.create(F$A,4*F$n.length/F$A.vertexStride,35044,!0);F$$.setData(F$n),F$a._mesh._vertexBuffers.push(F$$)}var F$e=F$Z+F$a._readData.getUint32(),F$M=F$a._readData.getUint32(),F$G=new Uint16Array(F$y.slice(F$e,F$e+F$M)),F$B=F$Sy.create("ushort",F$M/2,35044,!0);F$B.setData(F$G),F$a._mesh._indexBuffer=F$B;var F$o=F$a._mesh._boneNames=[],F$s=F$a._readData.getUint16();for(F$o.length=F$s,F$T=0;F$T<F$s;F$T++)F$o[F$T]=F$a._strings[F$a._readData.getUint16()];var F$E=F$a._readData.getUint32(),F$O=F$a._readData.getUint32(),F$L=(new Float32Array(F$y.slice(F$Z+F$E,F$Z+F$E+F$O)),F$a._readData.getUint32()),F$H=F$a._readData.getUint32(),F$P=new Float32Array(F$y.slice(F$Z+F$L,F$Z+F$L+F$H));for(F$a._mesh._inverseBindPoses=[],F$T=0,F$J=F$P.length;F$T<F$J;F$T+=16){var F$l=new F$Jy(F$P[F$T+0],F$P[F$T+1],F$P[F$T+2],F$P[F$T+3],F$P[F$T+4],F$P[F$T+5],F$P[F$T+6],F$P[F$T+7],F$P[F$T+8],F$P[F$T+9],F$P[F$T+10],F$P[F$T+11],F$P[F$T+12],F$P[F$T+13],F$P[F$T+14],F$P[F$T+15]);F$a._mesh._inverseBindPoses.push(F$l)}return F$a._mesh._skinnedDatas=new Float32Array(16*F$P.length),!0},F$a.READ_SUBMESH=function(){var F$J=F$a._readData.__getBuffer(),F$y=new F$Ay(F$a._mesh),F$T=F$a._readData.getInt16(),F$V=F$a._readData.getUint32(),F$Z=F$a._readData.getUint32();F$y._vertexBuffer=F$a._mesh._vertexBuffers[F$T],F$y._vertexStart=F$V,F$y._vertexCount=F$Z;var F$m=F$a._readData.getUint32(),F$R=F$a._readData.getUint32(),F$n=F$a._mesh._indexBuffer;F$y._indexBuffer=F$n,F$y._indexStart=F$m,F$y._indexCount=F$R,F$y._indices=new Uint16Array(F$n.getData().buffer,2*F$m,F$R);var F$K=F$a._DATA.offset,F$A=F$y._subIndexBufferStart,F$$=F$y._subIndexBufferCount,F$e=F$y._boneIndicesList,F$M=F$a._readData.getUint16();F$A.length=F$M,F$$.length=F$M,F$e.length=F$M;for(var F$G=0;F$G<F$M;F$G++){F$A[F$G]=F$a._readData.getUint32(),F$$[F$G]=F$a._readData.getUint32();var F$B=F$a._readData.getUint32(),F$o=F$a._readData.getUint32();F$y._boneIndicesList[F$G]=new Uint8Array(F$J.slice(F$K+F$B,F$K+F$B+F$o))}return F$a._subMeshes.push(F$y),!0},F$a._getVertexDeclaration=function(F$J){for(var F$y,F$T=!1,F$V=!1,F$Z=!1,F$m=!1,F$R=!1,F$n=!1,F$K=!1,F$A=!1,F$$=!1,F$e=0;F$e<F$J.length;F$e++)switch(F$J[F$e]){case"POSITION":F$T=!0;break;case"NORMAL":F$V=!0;break;case"COLOR":F$Z=!0;break;case"UV":F$m=!0;break;case"UV1":F$R=!0;break;case"BLENDWEIGHT":F$K=!0;break;case"BLENDINDICES":F$A=!0;break;case"TANGENT":F$n=!0;break;case"BINORMAL":F$$=!0}return F$T&&F$V&&F$Z&&F$m&&F$R&&F$K&&F$A&&F$n?F$y=F$LJ.vertexDeclaration:F$T&&F$V&&F$Z&&F$m&&F$R&&F$K&&F$A?F$y=F$EJ.vertexDeclaration:F$T&&F$V&&F$m&&F$R&&F$K&&F$A&&F$n?F$y=F$uJ.vertexDeclaration:F$T&&F$V&&F$m&&F$R&&F$K&&F$A?F$y=F$iJ.vertexDeclaration:F$T&&F$V&&F$Z&&F$m&&F$K&&F$A&&F$n?F$y=F$qJ.vertexDeclaration:F$T&&F$V&&F$Z&&F$m&&F$K&&F$A?F$y=F$lJ.vertexDeclaration:F$T&&F$V&&F$m&&F$K&&F$A&&F$n?F$y=F$fJ.vertexDeclaration:F$T&&F$V&&F$m&&F$K&&F$A?F$y=F$XJ.vertexDeclaration:F$T&&F$V&&F$Z&&F$K&&F$A&&F$n?F$y=F$MJ.vertexDeclaration:F$T&&F$V&&F$Z&&F$K&&F$A?F$y=F$$J.vertexDeclaration:F$T&&F$V&&F$Z&&F$m&&F$R&&F$n?F$y=F$PJ.vertexDeclaration:F$T&&F$V&&F$Z&&F$m&&F$R?F$y=F$sJ.vertexDeclaration:F$T&&F$V&&F$m&&F$R&&F$n?F$y=F$kJ.vertexDeclaration:F$T&&F$V&&F$m&&F$R?F$y=F$QJ.vertexDeclaration:F$T&&F$V&&F$Z&&F$m&&F$n?F$y=F$DJ.vertexDeclaration:F$T&&F$V&&F$m&&F$n&&F$$?F$y=F$YJ.vertexDeclaration:F$T&&F$V&&F$Z&&F$m?F$y=F$oJ.vertexDeclaration:F$T&&F$V&&F$m&&F$n?F$y=F$IJ.vertexDeclaration:F$T&&F$V&&F$m?F$y=F$vJ.vertexDeclaration:F$T&&F$V&&F$Z&&F$n?F$y=F$BJ.vertexDeclaration:F$T&&F$V&&F$Z&&(F$y=F$AJ.vertexDeclaration),F$y},F$a._attrReg=new RegExp("(\\w+)|([:,;])","g"),F$a._strings=[],F$a._readData=null,F$a._version=null,F$a._mesh=null,F$a._materials=null,F$a._subMeshes=null,F$a._materialMap=null,F$e(F$a,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$a}(),F$hJ=function(){function F$l(){}return F$G(F$l,"laya.d3.loaders.LoadModelV03"),F$l.parse=function(F$J,F$y,F$T,F$V,F$Z){F$l._mesh=F$T,F$l._subMeshes=F$V,F$l._materialMap=F$Z,F$l._version=F$y,F$l._readData=F$J,F$l.READ_DATA(),F$l.READ_BLOCK(),F$l.READ_STRINGS();for(var F$m=0,F$R=F$l._BLOCK.count;F$m<F$R;F$m++){F$l._readData.pos=F$l._BLOCK.blockStarts[F$m];var F$n=F$l._readData.getUint16(),F$K=F$l._strings[F$n],F$A=F$l["READ_"+F$K];if(null==F$A)throw new Error("model file err,no this function:"+F$n+" "+F$K);F$A.call()}F$l._strings.length=0,F$l._readData=null,F$l._version=null,F$l._mesh=null,F$l._subMeshes=null,F$l._materialMap=null},F$l._readString=function(){return F$l._strings[F$l._readData.getUint16()]},F$l.READ_DATA=function(){F$l._DATA.offset=F$l._readData.getUint32(),F$l._DATA.size=F$l._readData.getUint32()},F$l.READ_BLOCK=function(){for(var F$J=F$l._BLOCK.count=F$l._readData.getUint16(),F$y=F$l._BLOCK.blockStarts=[],F$T=F$l._BLOCK.blockLengths=[],F$V=0;F$V<F$J;F$V++)F$y.push(F$l._readData.getUint32()),F$T.push(F$l._readData.getUint32())},F$l.READ_STRINGS=function(){var F$J=F$l._readData.getUint32(),F$y=F$l._readData.getUint16(),F$T=F$l._readData.pos;F$l._readData.pos=F$J+F$l._DATA.offset;for(var F$V=0;F$V<F$y;F$V++)F$l._strings[F$V]=F$l._readData.readUTFString();F$l._readData.pos=F$T},F$l.READ_MESH=function(){var F$J,F$y=F$l._readString(),F$T=F$l._readData.__getBuffer(),F$V=0,F$Z=F$l._readData.getInt16(),F$m=F$l._DATA.offset;for(F$V=0;F$V<F$Z;F$V++){var F$R,F$n=F$m+F$l._readData.getUint32(),F$K=F$l._readData.getUint32(),F$A=new Float32Array(F$T.slice(F$n,F$n+F$K)),F$$=F$l._readString();switch(F$l._version){case"LAYAMODEL:03":F$R=F$l._vertexDeclarationMap_Discard[F$$];break;case"LAYAMODEL:0301":F$R=F$l._vertexDeclarationMap[F$$];break;default:throw new Error("LoadModelV03: unknown version.")}if(!F$R)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+F$l._version+"  bufferAttribute="+F$$+"  name="+F$y+"  url="+(F$l._mesh?F$l._mesh.url:"null"));var F$e=F$fy.create(F$R,4*F$A.length/F$R.vertexStride,35044,!0,F$l._mesh._url+"_"+F$V);F$e.setData(F$A),F$l._mesh._vertexBuffers.push(F$e)}var F$M=F$m+F$l._readData.getUint32(),F$G=F$l._readData.getUint32(),F$B=new Uint16Array(F$T.slice(F$M,F$M+F$G)),F$o=F$Sy.create("ushort",F$G/2,35044,!0,F$l._mesh._url);F$o.setData(F$B),F$l._mesh._indexBuffer=F$o;var F$s=F$l._mesh._boneNames=[],F$E=F$l._readData.getUint16();for(F$s.length=F$E,F$V=0;F$V<F$E;F$V++)F$s[F$V]=F$l._strings[F$l._readData.getUint16()];F$l._readData.pos+=8;var F$O=F$l._readData.getUint32(),F$L=F$l._readData.getUint32(),F$H=new Float32Array(F$T.slice(F$m+F$O,F$m+F$O+F$L));for(F$l._mesh._inverseBindPoses=[],F$V=0,F$J=F$H.length;F$V<F$J;F$V+=16){var F$P=new F$Jy(F$H[F$V+0],F$H[F$V+1],F$H[F$V+2],F$H[F$V+3],F$H[F$V+4],F$H[F$V+5],F$H[F$V+6],F$H[F$V+7],F$H[F$V+8],F$H[F$V+9],F$H[F$V+10],F$H[F$V+11],F$H[F$V+12],F$H[F$V+13],F$H[F$V+14],F$H[F$V+15]);F$l._mesh._inverseBindPoses.push(F$P)}return F$l._mesh._skinnedDatas=new Float32Array(16*F$H.length),!0},F$l.READ_SUBMESH=function(){var F$J=F$l._readData.__getBuffer(),F$y=new F$Ay(F$l._mesh),F$T=F$l._readData.getInt16(),F$V=F$l._readData.getUint32(),F$Z=F$l._readData.getUint32();F$y._vertexBuffer=F$l._mesh._vertexBuffers[F$T],F$y._vertexStart=F$V,F$y._vertexCount=F$Z;var F$m=F$l._readData.getUint32(),F$R=F$l._readData.getUint32(),F$n=F$l._mesh._indexBuffer;F$y._indexBuffer=F$n,F$y._indexStart=F$m,F$y._indexCount=F$R,F$y._indices=new Uint16Array(F$n.getData().buffer,2*F$m,F$R);var F$K=F$l._DATA.offset,F$A=F$y._subIndexBufferStart,F$$=F$y._subIndexBufferCount,F$e=F$y._boneIndicesList,F$M=F$l._readData.getUint16();F$A.length=F$M,F$$.length=F$M,F$e.length=F$M;for(var F$G=0;F$G<F$M;F$G++){F$A[F$G]=F$l._readData.getUint32(),F$$[F$G]=F$l._readData.getUint32();var F$B=F$l._readData.getUint32(),F$o=F$l._readData.getUint32();F$e[F$G]=new Uint8Array(F$J.slice(F$K+F$B,F$K+F$B+F$o))}return F$l._subMeshes.push(F$y),!0},F$l._strings=[],F$l._readData=null,F$l._version=null,F$l._mesh=null,F$l._subMeshes=null,F$l._materialMap=null,F$e(F$l,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$LJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$EJ.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":F$UJ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$uJ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$iJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$qJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":F$lJ.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$fJ.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":F$XJ.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":F$MJ.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":F$$J.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":F$PJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":F$sJ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":F$kJ.vertexDeclaration,"POSITION,NORMAL,UV,UV1":F$QJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":F$DJ.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":F$YJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":F$oJ.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":F$IJ.vertexDeclaration,"POSITION,NORMAL,UV":F$vJ.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":F$BJ.vertexDeclaration,"POSITION,NORMAL,COLOR":F$AJ.vertexDeclaration,"POSITION,NORMAL,TANGENT":F$tJ.vertexDeclaration,"POSITION,NORMAL":F$KJ.vertexDeclaration,"POSITION,UV":F$CJ.vertexDeclaration,POSITION:F$nJ.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$OJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$EJ.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":F$UJ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$cJ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$iJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$aJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":F$lJ.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$SJ.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":F$XJ.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":F$eJ.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":F$$J.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":F$HJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":F$sJ.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":F$xJ.vertexDeclaration,"POSITION,NORMAL,UV,UV1":F$QJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":F$rJ.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":F$YJ.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":F$oJ.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":F$WJ.vertexDeclaration,"POSITION,NORMAL,UV":F$vJ.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":F$GJ.vertexDeclaration,"POSITION,NORMAL,COLOR":F$AJ.vertexDeclaration,"POSITION,NORMAL,TANGENT":F$_J.vertexDeclaration,"POSITION,NORMAL":F$KJ.vertexDeclaration,"POSITION,UV":F$CJ.vertexDeclaration,POSITION:F$nJ.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$l}(),F$pJ=function(){function F$n(){}return F$G(F$n,"laya.d3.loaders.MeshReader"),F$n.read=function(F$J,F$y,F$T,F$V,F$Z){var F$m=new F$l(F$J);F$m.pos=0;var F$R=F$m.readUTFString();switch(F$R){case"LAYAMODEL:01":case"LAYASKINANI:01":F$n._readVersion01(F$m,F$R,F$y,F$T,F$V,F$Z);break;case"LAYAMODEL:02":F$bJ.parse(F$m,F$R,F$y,F$T,F$V,F$Z);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":F$hJ.parse(F$m,F$R,F$y,F$V,F$Z);break;default:throw new Error("MeshReader: unknown mesh version.")}F$y._setSubMeshes(F$V)},F$n._readVersion01=function(F$J,F$y,F$T,F$V,F$Z,F$m){new F$FJ(F$J,F$y,F$T,F$V,F$Z,F$m)},F$n}(),F$jJ=function(){function F$J(F$J,F$y){this.min=null,this.max=null,this.min=F$J,this.max=F$y}F$G(F$J,"laya.d3.math.BoundBox");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.getCorners=function(F$J){F$J.length=8;var F$y=this.min.elements,F$T=this.max.elements,F$V=F$y[0],F$Z=F$y[1],F$m=F$y[2],F$R=F$T[0],F$n=F$T[1],F$K=F$T[2];F$J[0]=new F$Ry(F$V,F$n,F$K),F$J[1]=new F$Ry(F$R,F$n,F$K),F$J[2]=new F$Ry(F$R,F$Z,F$K),F$J[3]=new F$Ry(F$V,F$Z,F$K),F$J[4]=new F$Ry(F$V,F$n,F$m),F$J[5]=new F$Ry(F$R,F$n,F$m),F$J[6]=new F$Ry(F$R,F$Z,F$m),F$J[7]=new F$Ry(F$V,F$Z,F$m)},F$y.toDefault=function(){this.min.toDefault(),this.max.toDefault()},F$y.cloneTo=function(F$J){var F$y=F$J;this.min.cloneTo(F$y.min),this.max.cloneTo(F$y.max)},F$y.clone=function(){var F$J=new this.constructor(new F$Ry,new F$Ry);return this.cloneTo(F$J),F$J},F$J.createfromPoints=function(F$J,F$y){if(null==F$J)throw new Error("points");var F$T=F$y.min,F$V=F$y.max,F$Z=F$T.elements;F$Z[0]=Number.MAX_VALUE,F$Z[1]=Number.MAX_VALUE,F$Z[2]=Number.MAX_VALUE;var F$m=F$V.elements;F$m[0]=-Number.MAX_VALUE,F$m[1]=-Number.MAX_VALUE,F$m[2]=-Number.MAX_VALUE;for(var F$R=0,F$n=F$J.length;F$R<F$n;++F$R)F$Ry.min(F$T,F$J[F$R],F$T),F$Ry.max(F$V,F$J[F$R],F$V)},F$J.merge=function(F$J,F$y,F$T){F$Ry.min(F$J.min,F$y.min,F$T.min),F$Ry.max(F$J.max,F$y.max,F$T.max)},F$J}(),F$gJ=function(){function F$A(F$J){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=F$J,this._near=new F$yy(new F$Ry),this._far=new F$yy(new F$Ry),this._left=new F$yy(new F$Ry),this._right=new F$yy(new F$Ry),this._top=new F$yy(new F$Ry),this._bottom=new F$yy(new F$Ry),F$A._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}F$G(F$A,"laya.d3.math.BoundFrustum");var F$J=F$A.prototype;return F$J.equalsBoundFrustum=function(F$J){return this._matrix.equalsOtherMatrix(F$J.matrix)},F$J.equalsObj=function(F$J){if(F$J instanceof laya.d3.math.BoundFrustum){var F$y=F$J;return this.equalsBoundFrustum(F$y)}return!1},F$J.getPlane=function(F$J){switch(F$J){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},F$J.getCorners=function(F$J){F$A._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(F$J[0]),F$A._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(F$J[1]),F$A._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(F$J[2]),F$A._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(F$J[3]),F$A._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(F$J[4]),F$A._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(F$J[5]),F$A._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(F$J[6]),F$A._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(F$J[7])},F$J.containsPoint=function(F$J){for(var F$y=F$yy.PlaneIntersectionType_Front,F$T=F$yy.PlaneIntersectionType_Front,F$V=0;F$V<6;F$V++){switch(F$V){case 0:F$T=Collision.intersectsPlaneAndPoint(this._near,F$J);break;case 1:F$T=Collision.intersectsPlaneAndPoint(this._far,F$J);break;case 2:F$T=Collision.intersectsPlaneAndPoint(this._left,F$J);break;case 3:F$T=Collision.intersectsPlaneAndPoint(this._right,F$J);break;case 4:F$T=Collision.intersectsPlaneAndPoint(this._top,F$J);break;case 5:F$T=Collision.intersectsPlaneAndPoint(this._bottom,F$J)}switch(F$T){case F$yy.PlaneIntersectionType_Back:return 0;case F$yy.PlaneIntersectionType_Intersecting:F$y=F$yy.PlaneIntersectionType_Intersecting}}switch(F$y){case F$yy.PlaneIntersectionType_Intersecting:return 2;default:return 1}},F$J.containsBoundBox=function(F$J){for(var F$y,F$T=F$A._tempV30,F$V=F$A._tempV31,F$Z=1,F$m=0;F$m<6;F$m++){if(F$y=this.getPlane(F$m),this._getBoxToPlanePVertexNVertex(F$J,F$y.normal,F$T,F$V),Collision.intersectsPlaneAndPoint(F$y,F$T)===F$yy.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(F$y,F$V)===F$yy.PlaneIntersectionType_Back&&(F$Z=2)}return F$Z},F$J.containsBoundSphere=function(F$J){for(var F$y=F$yy.PlaneIntersectionType_Front,F$T=F$yy.PlaneIntersectionType_Front,F$V=0;F$V<6;F$V++){switch(F$V){case 0:F$T=Collision.intersectsPlaneAndSphere(this._near,F$J);break;case 1:F$T=Collision.intersectsPlaneAndSphere(this._far,F$J);break;case 2:F$T=Collision.intersectsPlaneAndSphere(this._left,F$J);break;case 3:F$T=Collision.intersectsPlaneAndSphere(this._right,F$J);break;case 4:F$T=Collision.intersectsPlaneAndSphere(this._top,F$J);break;case 5:F$T=Collision.intersectsPlaneAndSphere(this._bottom,F$J)}switch(F$T){case F$yy.PlaneIntersectionType_Back:return 0;case F$yy.PlaneIntersectionType_Intersecting:F$y=F$yy.PlaneIntersectionType_Intersecting}}switch(F$y){case F$yy.PlaneIntersectionType_Intersecting:return 2;default:return 1}},F$J._getBoxToPlanePVertexNVertex=function(F$J,F$y,F$T,F$V){var F$Z=F$J.min,F$m=F$Z.elements,F$R=F$J.max,F$n=F$R.elements,F$K=F$y.elements,F$A=F$K[0],F$$=F$K[1],F$e=F$K[2];F$Z.cloneTo(F$T);var F$M=F$T.elements;0<=F$A&&(F$M[0]=F$n[0]),0<=F$$&&(F$M[1]=F$n[1]),0<=F$e&&(F$M[2]=F$n[2]),F$R.cloneTo(F$V);var F$G=F$V.elements;0<=F$A&&(F$G[0]=F$m[0]),0<=F$$&&(F$G[1]=F$m[1]),0<=F$e&&(F$G[2]=F$m[2])},F$B(0,F$J,"top",function(){return this._top}),F$B(0,F$J,"matrix",function(){return this._matrix},function(F$J){this._matrix=F$J,F$A._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),F$B(0,F$J,"near",function(){return this._near}),F$B(0,F$J,"far",function(){return this._far}),F$B(0,F$J,"left",function(){return this._left}),F$B(0,F$J,"right",function(){return this._right}),F$B(0,F$J,"bottom",function(){return this._bottom}),F$A._getPlanesFromMatrix=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){var F$n=F$J.elements,F$K=F$n[0],F$A=F$n[1],F$$=F$n[2],F$e=F$n[3],F$M=F$n[4],F$G=F$n[5],F$B=F$n[6],F$o=F$n[7],F$s=F$n[8],F$E=F$n[9],F$O=F$n[10],F$L=F$n[11],F$H=F$n[12],F$P=F$n[13],F$l=F$n[14],F$a=F$n[15],F$q=F$y.normal.elements;F$q[0]=F$e+F$$,F$q[1]=F$o+F$B,F$q[2]=F$L+F$O,F$y.distance=F$a+F$l,F$y.normalize();var F$r=F$T.normal.elements;F$r[0]=F$e-F$$,F$r[1]=F$o-F$B,F$r[2]=F$L-F$O,F$T.distance=F$a-F$l,F$T.normalize();var F$D=F$V.normal.elements;F$D[0]=F$e+F$K,F$D[1]=F$o+F$M,F$D[2]=F$L+F$s,F$V.distance=F$a+F$H,F$V.normalize();var F$_=F$Z.normal.elements;F$_[0]=F$e-F$K,F$_[1]=F$o-F$M,F$_[2]=F$L-F$s,F$Z.distance=F$a-F$H,F$Z.normalize();var F$t=F$m.normal.elements;F$t[0]=F$e-F$A,F$t[1]=F$o-F$G,F$t[2]=F$L-F$E,F$m.distance=F$a-F$P,F$m.normalize();var F$v=F$R.normal.elements;F$v[0]=F$e+F$A,F$v[1]=F$o+F$G,F$v[2]=F$L+F$E,F$R.distance=F$a+F$P,F$R.normalize()},F$A._get3PlaneInterPoint=function(F$J,F$y,F$T){var F$V=F$J.normal,F$Z=F$y.normal,F$m=F$T.normal;F$Ry.cross(F$Z,F$m,F$A._tempV30),F$Ry.cross(F$m,F$V,F$A._tempV31),F$Ry.cross(F$V,F$Z,F$A._tempV32);var F$R=F$Ry.dot(F$V,F$A._tempV30),F$n=F$Ry.dot(F$Z,F$A._tempV31),F$K=F$Ry.dot(F$m,F$A._tempV32);return F$Ry.scale(F$A._tempV30,-F$J.distance/F$R,F$A._tempV33),F$Ry.scale(F$A._tempV31,-F$y.distance/F$n,F$A._tempV34),F$Ry.scale(F$A._tempV32,-F$T.distance/F$K,F$A._tempV35),F$Ry.add(F$A._tempV33,F$A._tempV34,F$A._tempV36),F$Ry.add(F$A._tempV35,F$A._tempV36,F$A._tempV37),F$A._tempV37},F$e(F$A,["_tempV30",function(){return this._tempV30=new F$Ry},"_tempV31",function(){return this._tempV31=new F$Ry},"_tempV32",function(){return this._tempV32=new F$Ry},"_tempV33",function(){return this._tempV33=new F$Ry},"_tempV34",function(){return this._tempV34=new F$Ry},"_tempV35",function(){return this._tempV35=new F$Ry},"_tempV36",function(){return this._tempV36=new F$Ry},"_tempV37",function(){return this._tempV37=new F$Ry}]),F$A}(),F$NJ=function(){function F$$(F$J,F$y){this.center=null,this.radius=NaN,this.center=F$J,this.radius=F$y}F$G(F$$,"laya.d3.math.BoundSphere");var F$J=F$$.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.toDefault=function(){this.center.toDefault(),this.radius=0},F$J.intersectsRayDistance=function(F$J){return Collision.intersectsRayAndSphereRD(F$J,this)},F$J.intersectsRayPoint=function(F$J,F$y){return Collision.intersectsRayAndSphereRP(F$J,this,F$y)},F$J.cloneTo=function(F$J){var F$y=F$J;this.center.cloneTo(F$y.center),F$y.radius=this.radius},F$J.clone=function(){var F$J=new this.constructor(new F$Ry,new F$Ry);return this.cloneTo(F$J),F$J},F$$.createFromSubPoints=function(F$J,F$y,F$T,F$V){if(null==F$J)throw new Error("points");if(F$y<0||F$y>=F$J.length)throw new Error("start"+F$y+"Must be in the range [0, "+(F$J.length-1)+"]");if(F$T<0||F$y+F$T>F$J.length)throw new Error("count"+F$T+"Must be in the range <= "+F$J.length+"}");var F$Z=F$y+F$T,F$m=F$$._tempVector3;F$m.elements[0]=0,F$m.elements[1]=0,F$m.elements[2]=0;for(var F$R=F$y;F$R<F$Z;++F$R)F$Ry.add(F$J[F$R],F$m,F$m);var F$n=F$V.center;F$Ry.scale(F$m,1/F$T,F$n);var F$K=0;for(F$R=F$y;F$R<F$Z;++F$R){var F$A=F$Ry.distanceSquared(F$n,F$J[F$R]);F$K<F$A&&(F$K=F$A)}F$V.radius=Math.sqrt(F$K)},F$$.createfromPoints=function(F$J,F$y){if(null==F$J)throw new Error("points");F$$.createFromSubPoints(F$J,0,F$J.length,F$y)},F$e(F$$,["_tempVector3",function(){return this._tempVector3=new F$Ry}]),F$$}(),F$wJ=(function(){function F$J(){}F$G(F$J,"laya.d3.math.ContainmentType"),F$J.Disjoint=0,F$J.Contains=1,F$J.Intersects=2}(),function(){function F$T(){}return F$G(F$T,"laya.d3.math.MathUtils3D"),F$T.isZero=function(F$J){return Math.abs(F$J)<F$T.zeroTolerance},F$T.nearEqual=function(F$J,F$y){return!!F$T.isZero(F$J-F$y)},F$T.fastInvSqrt=function(F$J){return F$T.isZero(F$J)?F$J:1/Math.sqrt(F$J)},F$e(F$T,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),F$T}()),F$zJ=function(){function F$K(){var F$J=this.elements=new Float32Array(9);F$J[0]=1,F$J[1]=0,F$J[2]=0,F$J[3]=0,F$J[4]=1,F$J[5]=0,F$J[6]=0,F$J[7]=0,F$J[8]=1}F$G(F$K,"laya.d3.math.Matrix3x3");var F$J=F$K.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.determinant=function(){var F$J=this.elements,F$y=F$J[0],F$T=F$J[1],F$V=F$J[2],F$Z=F$J[3],F$m=F$J[4],F$R=F$J[5],F$n=F$J[6],F$K=F$J[7],F$A=F$J[8];return F$y*(F$A*F$m-F$R*F$K)+F$T*(-F$A*F$Z+F$R*F$n)+F$V*(F$K*F$Z-F$m*F$n)},F$J.translate=function(F$J,F$y){var F$T=F$y.elements,F$V=this.elements,F$Z=F$J.elements,F$m=F$V[0],F$R=F$V[1],F$n=F$V[2],F$K=F$V[3],F$A=F$V[4],F$$=F$V[5],F$e=F$V[6],F$M=F$V[7],F$G=F$V[8],F$B=F$Z[0],F$o=F$Z[1];F$T[0]=F$m,F$T[1]=F$R,F$T[2]=F$n,F$T[3]=F$K,F$T[4]=F$A,F$T[5]=F$$,F$T[6]=F$B*F$m+F$o*F$K+F$e,F$T[7]=F$B*F$R+F$o*F$A+F$M,F$T[8]=F$B*F$n+F$o*F$$+F$G},F$J.rotate=function(F$J,F$y){var F$T=F$y.elements,F$V=this.elements,F$Z=F$V[0],F$m=F$V[1],F$R=F$V[2],F$n=F$V[3],F$K=F$V[4],F$A=F$V[5],F$$=F$V[6],F$e=F$V[7],F$M=F$V[8],F$G=Math.sin(F$J),F$B=Math.cos(F$J);F$T[0]=F$B*F$Z+F$G*F$n,F$T[1]=F$B*F$m+F$G*F$K,F$T[2]=F$B*F$R+F$G*F$A,F$T[3]=F$B*F$n-F$G*F$Z,F$T[4]=F$B*F$K-F$G*F$m,F$T[5]=F$B*F$A-F$G*F$R,F$T[6]=F$$,F$T[7]=F$e,F$T[8]=F$M},F$J.scale=function(F$J,F$y){var F$T=F$y.elements,F$V=this.elements,F$Z=F$J.elements,F$m=F$Z[0],F$R=F$Z[1];F$T[0]=F$m*F$V[0],F$T[1]=F$m*F$V[1],F$T[2]=F$m*F$V[2],F$T[3]=F$R*F$V[3],F$T[4]=F$R*F$V[4],F$T[5]=F$R*F$V[5],F$T[6]=F$V[6],F$T[7]=F$V[7],F$T[8]=F$V[8]},F$J.invert=function(F$J){var F$y=F$J.elements,F$T=this.elements,F$V=F$T[0],F$Z=F$T[1],F$m=F$T[2],F$R=F$T[3],F$n=F$T[4],F$K=F$T[5],F$A=F$T[6],F$$=F$T[7],F$e=F$T[8],F$M=F$e*F$n-F$K*F$$,F$G=-F$e*F$R+F$K*F$A,F$B=F$$*F$R-F$n*F$A,F$o=F$V*F$M+F$Z*F$G+F$m*F$B;F$o||(F$J=null),F$o=1/F$o,F$y[0]=F$M*F$o,F$y[1]=(-F$e*F$Z+F$m*F$$)*F$o,F$y[2]=(F$K*F$Z-F$m*F$n)*F$o,F$y[3]=F$G*F$o,F$y[4]=(F$e*F$V-F$m*F$A)*F$o,F$y[5]=(-F$K*F$V+F$m*F$R)*F$o,F$y[6]=F$B*F$o,F$y[7]=(-F$$*F$V+F$Z*F$A)*F$o,F$y[8]=(F$n*F$V-F$Z*F$R)*F$o},F$J.transpose=function(F$J){var F$y=F$J.elements,F$T=this.elements;if(F$J===this){var F$V=F$T[1],F$Z=F$T[2],F$m=F$T[5];F$y[1]=F$T[3],F$y[2]=F$T[6],F$y[3]=F$V,F$y[5]=F$T[7],F$y[6]=F$Z,F$y[7]=F$m}else F$y[0]=F$T[0],F$y[1]=F$T[3],F$y[2]=F$T[6],F$y[3]=F$T[1],F$y[4]=F$T[4],F$y[5]=F$T[7],F$y[6]=F$T[2],F$y[7]=F$T[5],F$y[8]=F$T[8]},F$J.identity=function(){var F$J=this.elements;F$J[0]=1,F$J[1]=0,F$J[2]=0,F$J[3]=0,F$J[4]=1,F$J[5]=0,F$J[6]=0,F$J[7]=0,F$J[8]=1},F$J.cloneTo=function(F$J){var F$y,F$T,F$V;if((F$T=this.elements)!==(F$V=F$J.elements))for(F$y=0;F$y<9;++F$y)F$V[F$y]=F$T[F$y]},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$K.createFromTranslation=function(F$J,F$y){F$y.elements;var F$T=F$J.elements;F$y[0]=1,F$y[1]=0,F$y[2]=0,F$y[3]=0,F$y[4]=1,F$y[5]=0,F$y[6]=F$T[0],F$y[7]=F$T[1],F$y[8]=1},F$K.createFromRotation=function(F$J,F$y){var F$T=F$y.elements,F$V=Math.sin(F$J),F$Z=Math.cos(F$J);F$T[0]=F$Z,F$T[1]=F$V,F$T[2]=0,F$T[3]=-F$V,F$T[4]=F$Z,F$T[5]=0,F$T[6]=0,F$T[7]=0,F$T[8]=1},F$K.createFromScaling=function(F$J,F$y){var F$T=F$y.elements,F$V=F$J.elements;F$T[0]=F$V[0],F$T[1]=0,F$T[2]=0,F$T[3]=0,F$T[4]=F$V[1],F$T[5]=0,F$T[6]=0,F$T[7]=0,F$T[8]=1},F$K.createFromMatrix4x4=function(F$J,F$y){F$y[0]=F$J[0],F$y[1]=F$J[1],F$y[2]=F$J[2],F$y[3]=F$J[4],F$y[4]=F$J[5],F$y[5]=F$J[6],F$y[6]=F$J[8],F$y[7]=F$J[9],F$y[8]=F$J[10]},F$K.multiply=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements,F$R=F$Z[0],F$n=F$Z[1],F$K=F$Z[2],F$A=F$Z[3],F$$=F$Z[4],F$e=F$Z[5],F$M=F$Z[6],F$G=F$Z[7],F$B=F$Z[8],F$o=F$m[0],F$s=F$m[1],F$E=F$m[2],F$O=F$m[3],F$L=F$m[4],F$H=F$m[5],F$P=F$m[6],F$l=F$m[7],F$a=F$m[8];F$V[0]=F$o*F$R+F$s*F$A+F$E*F$M,F$V[1]=F$o*F$n+F$s*F$$+F$E*F$G,F$V[2]=F$o*F$K+F$s*F$e+F$E*F$B,F$V[3]=F$O*F$R+F$L*F$A+F$H*F$M,F$V[4]=F$O*F$n+F$L*F$$+F$H*F$G,F$V[5]=F$O*F$K+F$L*F$e+F$H*F$B,F$V[6]=F$P*F$R+F$l*F$A+F$a*F$M,F$V[7]=F$P*F$n+F$l*F$$+F$a*F$G,F$V[8]=F$P*F$K+F$l*F$e+F$a*F$B},F$K.lookAt=function(F$J,F$y,F$T,F$V){F$Ry.subtract(F$J,F$y,F$K._tempV30),F$Ry.normalize(F$K._tempV30,F$K._tempV30),F$Ry.cross(F$T,F$K._tempV30,F$K._tempV31),F$Ry.normalize(F$K._tempV31,F$K._tempV31),F$Ry.cross(F$K._tempV30,F$K._tempV31,F$K._tempV32);var F$Z=F$K._tempV30.elements,F$m=F$K._tempV31.elements,F$R=F$K._tempV32.elements,F$n=F$V.elements;F$n[0]=F$m[0],F$n[3]=F$m[1],F$n[6]=F$m[2],F$n[1]=F$R[0],F$n[4]=F$R[1],F$n[7]=F$R[2],F$n[2]=F$Z[0],F$n[5]=F$Z[1],F$n[8]=F$Z[2]},F$K.DEFAULT=new F$K,F$e(F$K,["_tempV30",function(){return this._tempV30=new F$Ry},"_tempV31",function(){return this._tempV31=new F$Ry},"_tempV32",function(){return this._tempV32=new F$Ry}]),F$K}(),F$Jy=function(){function F$r(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$e,F$M,F$G,F$B,F$o){void 0===F$J&&(F$J=1),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0),void 0===F$m&&(F$m=1),void 0===F$R&&(F$R=0),void 0===F$n&&(F$n=0),void 0===F$K&&(F$K=0),void 0===F$A&&(F$A=0),void 0===F$$&&(F$$=1),void 0===F$e&&(F$e=0),void 0===F$M&&(F$M=0),void 0===F$G&&(F$G=0),void 0===F$B&&(F$B=0),void 0===F$o&&(F$o=1);var F$s=this.elements=new Float32Array(16);F$s[0]=F$J,F$s[1]=F$y,F$s[2]=F$T,F$s[3]=F$V,F$s[4]=F$Z,F$s[5]=F$m,F$s[6]=F$R,F$s[7]=F$n,F$s[8]=F$K,F$s[9]=F$A,F$s[10]=F$$,F$s[11]=F$e,F$s[12]=F$M,F$s[13]=F$G,F$s[14]=F$B,F$s[15]=F$o}F$G(F$r,"laya.d3.math.Matrix4x4");var F$J=F$r.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.getElementByRowColumn=function(F$J,F$y){if(F$J<0||3<F$J)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(F$y<0||3<F$y)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*F$J+F$y]},F$J.setElementByRowColumn=function(F$J,F$y,F$T){if(F$J<0||3<F$J)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(F$y<0||3<F$y)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*F$J+F$y]=F$T},F$J.equalsOtherMatrix=function(F$J){var F$y=this.elements,F$T=F$J.elements;return F$wJ.nearEqual(F$y[0],F$T[0])&&F$wJ.nearEqual(F$y[1],F$T[1])&&F$wJ.nearEqual(F$y[2],F$T[2])&&F$wJ.nearEqual(F$y[3],F$T[3])&&F$wJ.nearEqual(F$y[4],F$T[4])&&F$wJ.nearEqual(F$y[5],F$T[5])&&F$wJ.nearEqual(F$y[6],F$T[6])&&F$wJ.nearEqual(F$y[7],F$T[7])&&F$wJ.nearEqual(F$y[8],F$T[8])&&F$wJ.nearEqual(F$y[9],F$T[9])&&F$wJ.nearEqual(F$y[10],F$T[10])&&F$wJ.nearEqual(F$y[11],F$T[11])&&F$wJ.nearEqual(F$y[12],F$T[12])&&F$wJ.nearEqual(F$y[13],F$T[13])&&F$wJ.nearEqual(F$y[14],F$T[14])&&F$wJ.nearEqual(F$y[15],F$T[15])},F$J.decomposeTransRotScale=function(F$J,F$y,F$T){var F$V=F$r._tempMatrix4x4;return this.decomposeTransRotMatScale(F$J,F$V,F$T)?(F$Ty.createFromMatrix4x4(F$V,F$y),!0):(F$y.identity(),!1)},F$J.decomposeTransRotMatScale=function(F$J,F$y,F$T){var F$V=this.elements,F$Z=F$J.elements,F$m=F$y.elements,F$R=F$T.elements;F$Z[0]=F$V[12],F$Z[1]=F$V[13],F$Z[2]=F$V[14];var F$n=F$V[0],F$K=F$V[1],F$A=F$V[2],F$$=F$V[4],F$e=F$V[5],F$M=F$V[6],F$G=F$V[8],F$B=F$V[9],F$o=F$V[10],F$s=F$R[0]=Math.sqrt(F$n*F$n+F$K*F$K+F$A*F$A),F$E=F$R[1]=Math.sqrt(F$$*F$$+F$e*F$e+F$M*F$M),F$O=F$R[2]=Math.sqrt(F$G*F$G+F$B*F$B+F$o*F$o);if(F$wJ.isZero(F$s)||F$wJ.isZero(F$E)||F$wJ.isZero(F$O))return F$m[1]=F$m[2]=F$m[3]=F$m[4]=F$m[6]=F$m[7]=F$m[8]=F$m[9]=F$m[11]=F$m[12]=F$m[13]=F$m[14]=0,F$m[0]=F$m[5]=F$m[10]=F$m[15]=1,!1;var F$L=F$r._tempVector0,F$H=F$L.elements;F$H[0]=F$G/F$O,F$H[1]=F$B/F$O,F$H[2]=F$o/F$O;var F$P=F$r._tempVector1,F$l=F$P.elements;F$l[0]=F$n/F$s,F$l[1]=F$K/F$s,F$l[2]=F$A/F$s;var F$a=F$r._tempVector2;F$Ry.cross(F$L,F$P,F$a);var F$q=F$r._tempVector1;return F$Ry.cross(F$a,F$L,F$q),F$m[3]=F$m[7]=F$m[11]=F$m[12]=F$m[13]=F$m[14]=0,F$m[15]=1,F$m[0]=F$q.x,F$m[1]=F$q.y,F$m[2]=F$q.z,F$m[4]=F$a.x,F$m[5]=F$a.y,F$m[6]=F$a.z,F$m[8]=F$L.x,F$m[9]=F$L.y,F$m[10]=F$L.z,F$m[0]*F$n+F$m[1]*F$K+F$m[2]*F$A<0&&(F$R[0]=-F$s),F$m[4]*F$$+F$m[5]*F$e+F$m[6]*F$M<0&&(F$R[1]=-F$E),F$m[8]*F$G+F$m[9]*F$B+F$m[10]*F$o<0&&(F$R[2]=-F$O),!0},F$J.decomposeYawPitchRoll=function(F$J){var F$y=F$J.elements,F$T=Math.asin(-this.elements[9]);F$y[1]=F$T,Math.cos(F$T)>F$wJ.zeroTolerance?(F$y[2]=Math.atan2(this.elements[1],this.elements[5]),F$y[0]=Math.atan2(this.elements[8],this.elements[10])):(F$y[2]=Math.atan2(-this.elements[4],this.elements[0]),F$y[0]=0)},F$J.normalize=function(){var F$J=this.elements,F$y=F$J[0],F$T=F$J[1],F$V=F$J[2],F$Z=Math.sqrt(F$y*F$y+F$T*F$T+F$V*F$V);if(!F$Z)return F$J[0]=0,F$J[1]=0,void(F$J[2]=0);1!=F$Z&&(F$Z=1/F$Z,F$J[0]=F$y*F$Z,F$J[1]=F$T*F$Z,F$J[2]=F$V*F$Z)},F$J.transpose=function(){var F$J,F$y;return F$y=(F$J=this.elements)[1],F$J[1]=F$J[4],F$J[4]=F$y,F$y=F$J[2],F$J[2]=F$J[8],F$J[8]=F$y,F$y=F$J[3],F$J[3]=F$J[12],F$J[12]=F$y,F$y=F$J[6],F$J[6]=F$J[9],F$J[9]=F$y,F$y=F$J[7],F$J[7]=F$J[13],F$J[13]=F$y,F$y=F$J[11],F$J[11]=F$J[14],F$J[14]=F$y,this},F$J.invert=function(F$J){var F$y=this.elements,F$T=F$J.elements,F$V=F$y[0],F$Z=F$y[1],F$m=F$y[2],F$R=F$y[3],F$n=F$y[4],F$K=F$y[5],F$A=F$y[6],F$$=F$y[7],F$e=F$y[8],F$M=F$y[9],F$G=F$y[10],F$B=F$y[11],F$o=F$y[12],F$s=F$y[13],F$E=F$y[14],F$O=F$y[15],F$L=F$V*F$K-F$Z*F$n,F$H=F$V*F$A-F$m*F$n,F$P=F$V*F$$-F$R*F$n,F$l=F$Z*F$A-F$m*F$K,F$a=F$Z*F$$-F$R*F$K,F$q=F$m*F$$-F$R*F$A,F$r=F$e*F$s-F$M*F$o,F$D=F$e*F$E-F$G*F$o,F$_=F$e*F$O-F$B*F$o,F$t=F$M*F$E-F$G*F$s,F$v=F$M*F$O-F$B*F$s,F$Q=F$G*F$O-F$B*F$E,F$i=F$L*F$Q-F$H*F$v+F$P*F$t+F$l*F$_-F$a*F$D+F$q*F$r;0!==Math.abs(F$i)&&(F$i=1/F$i,F$T[0]=(F$K*F$Q-F$A*F$v+F$$*F$t)*F$i,F$T[1]=(F$m*F$v-F$Z*F$Q-F$R*F$t)*F$i,F$T[2]=(F$s*F$q-F$E*F$a+F$O*F$l)*F$i,F$T[3]=(F$G*F$a-F$M*F$q-F$B*F$l)*F$i,F$T[4]=(F$A*F$_-F$n*F$Q-F$$*F$D)*F$i,F$T[5]=(F$V*F$Q-F$m*F$_+F$R*F$D)*F$i,F$T[6]=(F$E*F$P-F$o*F$q-F$O*F$H)*F$i,F$T[7]=(F$e*F$q-F$G*F$P+F$B*F$H)*F$i,F$T[8]=(F$n*F$v-F$K*F$_+F$$*F$r)*F$i,F$T[9]=(F$Z*F$_-F$V*F$v-F$R*F$r)*F$i,F$T[10]=(F$o*F$a-F$s*F$P+F$O*F$L)*F$i,F$T[11]=(F$M*F$P-F$e*F$a-F$B*F$L)*F$i,F$T[12]=(F$K*F$D-F$n*F$t-F$A*F$r)*F$i,F$T[13]=(F$V*F$t-F$Z*F$D+F$m*F$r)*F$i,F$T[14]=(F$s*F$H-F$o*F$l-F$E*F$L)*F$i,F$T[15]=(F$e*F$l-F$M*F$H+F$G*F$L)*F$i)},F$J.identity=function(){var F$J=this.elements;F$J[1]=F$J[2]=F$J[3]=F$J[4]=F$J[6]=F$J[7]=F$J[8]=F$J[9]=F$J[11]=F$J[12]=F$J[13]=F$J[14]=0,F$J[0]=F$J[5]=F$J[10]=F$J[15]=1},F$J.cloneTo=function(F$J){var F$y,F$T,F$V;if((F$T=this.elements)!==(F$V=F$J.elements))for(F$y=0;F$y<16;++F$y)F$V[F$y]=F$T[F$y]},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$J.getTranslationVector=function(F$J){var F$y=this.elements,F$T=F$J.elements;F$T[0]=F$y[12],F$T[1]=F$y[13],F$T[2]=F$y[14]},F$J.setTranslationVector=function(F$J){var F$y=this.elements,F$T=F$J.elements;F$y[12]=F$T[0],F$y[13]=F$T[1],F$y[14]=F$T[2]},F$J.getForward=function(F$J){var F$y=this.elements,F$T=F$J.elements;F$T[0]=-F$y[8],F$T[1]=-F$y[9],F$T[2]=-F$y[10]},F$J.setForward=function(F$J){var F$y=this.elements,F$T=F$J.elements;F$y[8]=-F$T[0],F$y[9]=-F$T[1],F$y[10]=-F$T[2]},F$r.createRotationX=function(F$J,F$y){var F$T=F$y.elements,F$V=Math.sin(F$J),F$Z=Math.cos(F$J);F$T[1]=F$T[2]=F$T[3]=F$T[4]=F$T[7]=F$T[8]=F$T[11]=F$T[12]=F$T[13]=F$T[14]=0,F$T[0]=F$T[15]=1,F$T[5]=F$T[10]=F$Z,F$T[6]=F$V,F$T[9]=-F$V},F$r.createRotationY=function(F$J,F$y){var F$T=F$y.elements,F$V=Math.sin(F$J),F$Z=Math.cos(F$J);F$T[1]=F$T[3]=F$T[4]=F$T[6]=F$T[7]=F$T[9]=F$T[11]=F$T[12]=F$T[13]=F$T[14]=0,F$T[5]=F$T[15]=1,F$T[0]=F$T[10]=F$Z,F$T[2]=-F$V,F$T[8]=F$V},F$r.createRotationZ=function(F$J,F$y){var F$T=F$y.elements,F$V=Math.sin(F$J),F$Z=Math.cos(F$J);F$T[2]=F$T[3]=F$T[6]=F$T[7]=F$T[8]=F$T[9]=F$T[11]=F$T[12]=F$T[13]=F$T[14]=0,F$T[10]=F$T[15]=1,F$T[0]=F$T[5]=F$Z,F$T[1]=F$V,F$T[4]=-F$V},F$r.createRotationYawPitchRoll=function(F$J,F$y,F$T,F$V){F$Ty.createFromYawPitchRoll(F$J,F$y,F$T,F$r._tempQuaternion),F$r.createRotationQuaternion(F$r._tempQuaternion,F$V)},F$r.createRotationAxis=function(F$J,F$y,F$T){var F$V=F$J.elements,F$Z=F$V[0],F$m=F$V[1],F$R=F$V[2],F$n=Math.cos(F$y),F$K=Math.sin(F$y),F$A=F$Z*F$Z,F$$=F$m*F$m,F$e=F$R*F$R,F$M=F$Z*F$m,F$G=F$Z*F$R,F$B=F$m*F$R,F$o=F$T.elements;F$o[3]=F$o[7]=F$o[11]=F$o[12]=F$o[13]=F$o[14]=0,F$o[15]=1,F$o[0]=F$A+F$n*(1-F$A),F$o[1]=F$M-F$n*F$M+F$K*F$R,F$o[2]=F$G-F$n*F$G-F$K*F$m,F$o[4]=F$M-F$n*F$M-F$K*F$R,F$o[5]=F$$+F$n*(1-F$$),F$o[6]=F$B-F$n*F$B+F$K*F$Z,F$o[8]=F$G-F$n*F$G+F$K*F$m,F$o[9]=F$B-F$n*F$B-F$K*F$Z,F$o[10]=F$e+F$n*(1-F$e)},F$r.createRotationQuaternion=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements,F$Z=F$T[0],F$m=F$T[1],F$R=F$T[2],F$n=F$T[3],F$K=F$Z*F$Z,F$A=F$m*F$m,F$$=F$R*F$R,F$e=F$Z*F$m,F$M=F$R*F$n,F$G=F$R*F$Z,F$B=F$m*F$n,F$o=F$m*F$R,F$s=F$Z*F$n;F$V[3]=F$V[7]=F$V[11]=F$V[12]=F$V[13]=F$V[14]=0,F$V[15]=1,F$V[0]=1-2*(F$A+F$$),F$V[1]=2*(F$e+F$M),F$V[2]=2*(F$G-F$B),F$V[4]=2*(F$e-F$M),F$V[5]=1-2*(F$$+F$K),F$V[6]=2*(F$o+F$s),F$V[8]=2*(F$G+F$B),F$V[9]=2*(F$o-F$s),F$V[10]=1-2*(F$A+F$K)},F$r.createTranslate=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements;F$V[4]=F$V[8]=F$V[1]=F$V[9]=F$V[2]=F$V[6]=F$V[3]=F$V[7]=F$V[11]=0,F$V[0]=F$V[5]=F$V[10]=F$V[15]=1,F$V[12]=F$T[0],F$V[13]=F$T[1],F$V[14]=F$T[2]},F$r.createScaling=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements;F$V[0]=F$T[0],F$V[5]=F$T[1],F$V[10]=F$T[2],F$V[1]=F$V[4]=F$V[8]=F$V[12]=F$V[9]=F$V[13]=F$V[2]=F$V[6]=F$V[14]=F$V[3]=F$V[7]=F$V[11]=0,F$V[15]=1},F$r.multiply=function(F$J,F$y,F$T){var F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$;for(F$Z=F$T.elements,F$m=F$J.elements,F$Z===(F$R=F$y.elements)&&(F$R=F$R.slice()),F$V=0;F$V<4;F$V++)F$n=F$m[F$V],F$K=F$m[F$V+4],F$A=F$m[F$V+8],F$$=F$m[F$V+12],F$Z[F$V]=F$n*F$R[0]+F$K*F$R[1]+F$A*F$R[2]+F$$*F$R[3],F$Z[F$V+4]=F$n*F$R[4]+F$K*F$R[5]+F$A*F$R[6]+F$$*F$R[7],F$Z[F$V+8]=F$n*F$R[8]+F$K*F$R[9]+F$A*F$R[10]+F$$*F$R[11],F$Z[F$V+12]=F$n*F$R[12]+F$K*F$R[13]+F$A*F$R[14]+F$$*F$R[15]},F$r.createFromQuaternion=function(F$J,F$y){var F$T=F$y.elements,F$V=F$J.elements,F$Z=F$V[0],F$m=F$V[1],F$R=F$V[2],F$n=F$V[3],F$K=F$Z+F$Z,F$A=F$m+F$m,F$$=F$R+F$R,F$e=F$Z*F$K,F$M=F$m*F$K,F$G=F$m*F$A,F$B=F$R*F$K,F$o=F$R*F$A,F$s=F$R*F$$,F$E=F$n*F$K,F$O=F$n*F$A,F$L=F$n*F$$;F$T[0]=1-F$G-F$s,F$T[1]=F$M+F$L,F$T[2]=F$B-F$O,F$T[3]=0,F$T[4]=F$M-F$L,F$T[5]=1-F$e-F$s,F$T[6]=F$o+F$E,F$T[7]=0,F$T[8]=F$B+F$O,F$T[9]=F$o-F$E,F$T[10]=1-F$e-F$G,F$T[11]=0,F$T[12]=0,F$T[13]=0,F$T[14]=0,F$T[15]=1},F$r.createAffineTransformation=function(F$J,F$y,F$T,F$V){var F$Z=F$J.elements,F$m=F$y.elements,F$R=F$T.elements,F$n=F$V.elements,F$K=F$m[0],F$A=F$m[1],F$$=F$m[2],F$e=F$m[3],F$M=F$K+F$K,F$G=F$A+F$A,F$B=F$$+F$$,F$o=F$K*F$M,F$s=F$K*F$G,F$E=F$K*F$B,F$O=F$A*F$G,F$L=F$A*F$B,F$H=F$$*F$B,F$P=F$e*F$M,F$l=F$e*F$G,F$a=F$e*F$B,F$q=F$R[0],F$r=F$R[1],F$D=F$R[2];F$n[0]=(1-(F$O+F$H))*F$q,F$n[1]=(F$s+F$a)*F$q,F$n[2]=(F$E-F$l)*F$q,F$n[3]=0,F$n[4]=(F$s-F$a)*F$r,F$n[5]=(1-(F$o+F$H))*F$r,F$n[6]=(F$L+F$P)*F$r,F$n[7]=0,F$n[8]=(F$E+F$l)*F$D,F$n[9]=(F$L-F$P)*F$D,F$n[10]=(1-(F$o+F$O))*F$D,F$n[11]=0,F$n[12]=F$Z[0],F$n[13]=F$Z[1],F$n[14]=F$Z[2],F$n[15]=1},F$r.createLookAt=function(F$J,F$y,F$T,F$V){var F$Z=F$V.elements,F$m=F$r._tempVector0,F$R=F$r._tempVector1,F$n=F$r._tempVector2;F$Ry.subtract(F$J,F$y,F$n),F$Ry.normalize(F$n,F$n),F$Ry.cross(F$T,F$n,F$m),F$Ry.normalize(F$m,F$m),F$Ry.cross(F$n,F$m,F$R),F$V.identity(),F$Z[0]=F$m.x,F$Z[4]=F$m.y,F$Z[8]=F$m.z,F$Z[1]=F$R.x,F$Z[5]=F$R.y,F$Z[9]=F$R.z,F$Z[2]=F$n.x,F$Z[6]=F$n.y,F$Z[10]=F$n.z,F$Z[12]=-F$Ry.dot(F$m,F$J),F$Z[13]=-F$Ry.dot(F$R,F$J),F$Z[14]=-F$Ry.dot(F$n,F$J)},F$r.createPerspective=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$Z.elements,F$R=1/Math.tan(F$J/2),F$n=1/(F$T-F$V);F$m[0]=F$R/F$y,F$m[5]=F$R,F$m[10]=(F$V+F$T)*F$n,F$m[11]=-1,F$m[14]=2*F$V*F$T*F$n,F$m[1]=F$m[2]=F$m[3]=F$m[4]=F$m[6]=F$m[7]=F$m[8]=F$m[9]=F$m[12]=F$m[13]=F$m[15]=0},F$r.createOrthoOffCenterRH=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){var F$n=F$R.elements,F$K=1/(F$J-F$y),F$A=1/(F$T-F$V),F$$=1/(F$Z-F$m);F$n[1]=F$n[2]=F$n[3]=F$n[4]=F$n[6]=F$n[7]=F$n[8]=F$n[9]=F$n[11]=0,F$n[15]=1,F$n[0]=-2*F$K,F$n[5]=-2*F$A,F$n[10]=2*F$$,F$n[12]=(F$J+F$y)*F$K,F$n[13]=(F$V+F$T)*F$A,F$n[14]=(F$m+F$Z)*F$$},F$r.translation=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements;F$V[0]=F$V[5]=F$V[10]=F$V[15]=1,F$V[12]=F$T[0],F$V[13]=F$T[1],F$V[14]=F$T[2]},F$e(F$r,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new F$r},"_tempVector0",function(){return this._tempVector0=new F$Ry},"_tempVector1",function(){return this._tempVector1=new F$Ry},"_tempVector2",function(){return this._tempVector2=new F$Ry},"_tempQuaternion",function(){return this._tempQuaternion=new F$Ty},"DEFAULT",function(){return this.DEFAULT=new F$r},"ZERO",function(){return this.ZERO=new F$r(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),F$r}(),F$yy=(function(){function F$L(F$J,F$y){this.extents=null,this.transformation=null,this.extents=F$J,this.transformation=F$y}F$G(F$L,"laya.d3.math.OrientedBoundBox");var F$J=F$L.prototype;F$J.getCorners=function(F$J){var F$y=F$L._tempV30.elements,F$T=F$L._tempV31.elements,F$V=F$L._tempV32.elements,F$Z=this.extents.elements;F$y[0]=F$Z[0],F$y[1]=F$y[2]=0,F$T[1]=F$Z[1],F$T[0]=F$T[2]=0,F$V[2]=F$Z[2],F$V[0]=F$V[1]=0,F$Ry.TransformNormal(F$L._tempV30,this.transformation,F$L._tempV30),F$Ry.TransformNormal(F$L._tempV31,this.transformation,F$L._tempV31),F$Ry.TransformNormal(F$L._tempV32,this.transformation,F$L._tempV32);var F$m=F$L._tempV33;this.transformation.getTranslationVector(F$m),F$J.length=8,F$Ry.add(F$m,F$L._tempV30,F$L._tempV34),F$Ry.add(F$L._tempV34,F$L._tempV31,F$L._tempV34),F$Ry.add(F$L._tempV34,F$L._tempV32,F$J[0]),F$Ry.add(F$m,F$L._tempV30,F$L._tempV34),F$Ry.add(F$L._tempV34,F$L._tempV31,F$L._tempV34),F$Ry.subtract(F$L._tempV34,F$L._tempV32,F$J[1]),F$Ry.subtract(F$m,F$L._tempV30,F$L._tempV34),F$Ry.add(F$L._tempV34,F$L._tempV31,F$L._tempV34),F$Ry.subtract(F$L._tempV34,F$L._tempV32,F$J[2]),F$Ry.subtract(F$m,F$L._tempV30,F$L._tempV34),F$Ry.add(F$L._tempV34,F$L._tempV31,F$L._tempV34),F$Ry.add(F$L._tempV34,F$L._tempV32,F$J[3]),F$Ry.add(F$m,F$L._tempV30,F$L._tempV34),F$Ry.subtract(F$L._tempV34,F$L._tempV31,F$L._tempV34),F$Ry.add(F$L._tempV34,F$L._tempV32,F$J[4]),F$Ry.add(F$m,F$L._tempV30,F$L._tempV34),F$Ry.subtract(F$L._tempV34,F$L._tempV31,F$L._tempV34),F$Ry.subtract(F$L._tempV34,F$L._tempV32,F$J[5]),F$Ry.subtract(F$m,F$L._tempV30,F$L._tempV34),F$Ry.subtract(F$L._tempV34,F$L._tempV31,F$L._tempV34),F$Ry.subtract(F$L._tempV34,F$L._tempV32,F$J[6]),F$Ry.subtract(F$m,F$L._tempV30,F$L._tempV34),F$Ry.subtract(F$L._tempV34,F$L._tempV31,F$L._tempV34),F$Ry.add(F$L._tempV34,F$L._tempV32,F$J[7])},F$J.transform=function(F$J){F$Jy.multiply(this.transformation,F$J,this.transformation)},F$J.scale=function(F$J){F$Ry.multiply(this.extents,F$J,this.extents)},F$J.translate=function(F$J){this.transformation.getTranslationVector(F$L._tempV30),F$Ry.add(F$L._tempV30,F$J,F$L._tempV31),this.transformation.setTranslationVector(F$L._tempV31)},F$J.Size=function(F$J){F$Ry.scale(this.extents,2,F$J)},F$J.getSize=function(F$J){var F$y=this.extents.elements;F$L._tempV30.x=F$y[0],F$L._tempV31.y=F$y[1],F$L._tempV32.z=F$y[2],F$Ry.TransformNormal(F$L._tempV30,this.transformation,F$L._tempV30),F$Ry.TransformNormal(F$L._tempV31,this.transformation,F$L._tempV31),F$Ry.TransformNormal(F$L._tempV31,this.transformation,F$L._tempV32);var F$T=F$J.elements;F$T[0]=F$Ry.scalarLength(F$L._tempV30),F$T[1]=F$Ry.scalarLength(F$L._tempV31),F$T[2]=F$Ry.scalarLength(F$L._tempV32)},F$J.getSizeSquared=function(F$J){var F$y=this.extents.elements;F$L._tempV30.x=F$y[0],F$L._tempV31.y=F$y[1],F$L._tempV32.z=F$y[2],F$Ry.TransformNormal(F$L._tempV30,this.transformation,F$L._tempV30),F$Ry.TransformNormal(F$L._tempV31,this.transformation,F$L._tempV31),F$Ry.TransformNormal(F$L._tempV31,this.transformation,F$L._tempV32);var F$T=F$J.elements;F$T[0]=F$Ry.scalarLengthSquared(F$L._tempV30),F$T[1]=F$Ry.scalarLengthSquared(F$L._tempV31),F$T[2]=F$Ry.scalarLengthSquared(F$L._tempV32)},F$J.getCenter=function(F$J){this.transformation.getTranslationVector(F$J)},F$J.containsPoint=function(F$J){var F$y=this.extents.elements,F$T=F$y[0],F$V=F$y[1],F$Z=F$y[2];this.transformation.invert(F$L._tempM0),F$Ry.transformCoordinate(F$J,F$L._tempM0,F$L._tempV30);var F$m=F$L._tempV30.elements,F$R=Math.abs(F$m[0]),F$n=Math.abs(F$m[1]),F$K=Math.abs(F$m[2]);return F$wJ.nearEqual(F$R,F$T)&&F$wJ.nearEqual(F$n,F$V)&&F$wJ.nearEqual(F$K,F$Z)?2:F$R<F$T&&F$n<F$V&&F$K<F$Z?1:0},F$J.containsPoints=function(F$J){var F$y=this.extents.elements,F$T=F$y[0],F$V=F$y[1],F$Z=F$y[2];this.transformation.invert(F$L._tempM0);for(var F$m=!0,F$R=!1,F$n=0;F$n<F$J.length;F$n++){F$Ry.transformCoordinate(F$J[F$n],F$L._tempM0,F$L._tempV30);var F$K=F$L._tempV30.elements,F$A=Math.abs(F$K[0]),F$$=Math.abs(F$K[1]),F$e=Math.abs(F$K[2]);F$wJ.nearEqual(F$A,F$T)&&F$wJ.nearEqual(F$$,F$V)&&F$wJ.nearEqual(F$e,F$Z)&&(F$R=!0),F$A<F$T&&F$$<F$V&&F$e<F$Z?F$R=!0:F$m=!1}return F$m?1:F$R?2:0},F$J.containsSphere=function(F$J,F$y){void 0===F$y&&(F$y=!1);var F$T=this.extents.elements,F$V=F$T[0],F$Z=F$T[1],F$m=F$T[2],F$R=F$J.radius;this.transformation.invert(F$L._tempM0),F$Ry.transformCoordinate(F$J.center,F$L._tempM0,F$L._tempV30);var F$n=NaN;if(F$n=F$y?F$R:(F$Ry.scale(F$Ry.UnitX,F$R,F$L._tempV31),F$Ry.TransformNormal(F$L._tempV31,F$L._tempM0,F$L._tempV31),F$Ry.scalarLength(F$L._tempV31)),F$Ry.scale(this.extents,-1,F$L._tempV32),F$Ry.Clamp(F$L._tempV30,F$L._tempV32,this.extents,F$L._tempV33),F$n*F$n<F$Ry.distanceSquared(F$L._tempV30,F$L._tempV33))return 0;var F$K=F$L._tempV30.elements,F$A=F$K[0],F$$=F$K[1],F$e=F$K[2],F$M=F$L._tempV32.elements,F$G=F$M[0],F$B=F$M[1],F$o=F$M[2];return F$G+F$n<=F$A&&F$A<=F$V-F$n&&F$n<F$V-F$G&&F$B+F$n<=F$$&&F$$<=F$Z-F$n&&F$n<F$Z-F$B&&F$o+F$n<=F$e&&F$e<=F$m-F$n&&F$n<F$m-F$o?1:2},F$J.containsOrientedBoundBox=function(F$J){var F$y=0,F$T=0;F$J.getCorners(F$L._corners);var F$V=this.containsPoints(F$L._corners);if(0!=F$V)return F$V;var F$Z=this.extents.elements;F$J.extents.cloneTo(F$L._tempV35);var F$m=F$L._tempV35.elements;F$L._getRows(this.transformation,F$L._rows1),F$L._getRows(F$J.transformation,F$L._rows2);var F$R=NaN;for(F$y=0;F$y<4;F$y++)for(F$T=0;F$T<4;F$T++)3==F$y||3==F$T?(F$L._tempM0.setElementByRowColumn(F$y,F$T,0),F$L._tempM1.setElementByRowColumn(F$y,F$T,0)):(F$R=F$Ry.dot(F$L._rows1[F$y],F$L._rows2[F$T]),F$L._tempM0.setElementByRowColumn(F$y,F$T,F$R),F$L._tempM1.setElementByRowColumn(F$y,F$T,Math.abs(F$R)));F$J.getCenter(F$L._tempV34),this.getCenter(F$L._tempV36),F$Ry.subtract(F$L._tempV34,F$L._tempV36,F$L._tempV30);var F$n=F$L._tempV31.elements;F$n[0]=F$Ry.dot(F$L._tempV30,F$L._rows1[0]),F$n[1]=F$Ry.dot(F$L._tempV30,F$L._rows1[1]),F$n[2]=F$Ry.dot(F$L._tempV30,F$L._rows1[2]);var F$K=F$L._tempV32.elements,F$A=F$L._tempV33.elements;for(F$y=0;F$y<3;F$y++)if(F$K[0]=F$L._tempM1.getElementByRowColumn(F$y,0),F$K[1]=F$L._tempM1.getElementByRowColumn(F$y,1),F$K[2]=F$L._tempM1.getElementByRowColumn(F$y,2),F$Z[F$y]+F$Ry.dot(F$L._tempV35,F$L._tempV32)<Math.abs(F$n[F$y]))return 0;for(F$T=0;F$T<3;F$T++)if(F$K[0]=F$L._tempM1.getElementByRowColumn(0,F$T),F$K[1]=F$L._tempM1.getElementByRowColumn(1,F$T),F$K[2]=F$L._tempM1.getElementByRowColumn(2,F$T),F$A[0]=F$L._tempM0.getElementByRowColumn(0,F$T),F$A[1]=F$L._tempM0.getElementByRowColumn(1,F$T),F$A[2]=F$L._tempM0.getElementByRowColumn(2,F$T),F$Ry.dot(this.extents,F$L._tempV32)+F$m[F$T]<Math.abs(F$Ry.dot(F$L._tempV31,F$L._tempV33)))return 0;for(F$y=0;F$y<3;F$y++)for(F$T=0;F$T<3;F$T++){var F$$=(F$y+1)%3,F$e=(F$y+2)%3,F$M=(F$T+1)%3,F$G=(F$T+2)%3;if(F$Z[F$$]*F$L._tempM1.getElementByRowColumn(F$e,F$T)+F$Z[F$e]*F$L._tempM1.getElementByRowColumn(F$$,F$T)+(F$m[F$M]*F$L._tempM1.getElementByRowColumn(F$y,F$G)+F$m[F$G]*F$L._tempM1.getElementByRowColumn(F$y,F$M))<Math.abs(F$n[F$e]*F$L._tempM0.getElementByRowColumn(F$$,F$T)-F$n[F$$]*F$L._tempM0.getElementByRowColumn(F$e,F$T)))return 0}return 2},F$J.containsLine=function(F$J,F$y){F$L._corners[0]=F$J,F$L._corners[1]=F$y;var F$T=this.containsPoints(F$L._corners);if(0!=F$T)return F$T;var F$V=this.extents.elements,F$Z=F$V[0],F$m=F$V[1],F$R=F$V[2];this.transformation.invert(F$L._tempM0),F$Ry.transformCoordinate(F$J,F$L._tempM0,F$L._tempV30),F$Ry.transformCoordinate(F$y,F$L._tempM0,F$L._tempV31),F$Ry.add(F$L._tempV30,F$L._tempV31,F$L._tempV32),F$Ry.scale(F$L._tempV32,.5,F$L._tempV32),F$Ry.subtract(F$L._tempV30,F$L._tempV32,F$L._tempV33);var F$n=F$L._tempV33.elements,F$K=F$n[0],F$A=F$n[1],F$$=F$n[2],F$e=F$L._tempV34.elements,F$M=F$e[0]=Math.abs(F$n[0]),F$G=F$e[1]=Math.abs(F$n[1]),F$B=F$e[2]=Math.abs(F$n[2]),F$o=F$L._tempV32.elements,F$s=F$o[0],F$E=F$o[1],F$O=F$o[2];return Math.abs(F$s)>F$Z+F$M?0:Math.abs(F$E)>F$m+F$G?0:Math.abs(F$O)>F$R+F$B?0:Math.abs(F$E*F$$-F$O*F$A)>F$m*F$B+F$R*F$G?0:Math.abs(F$s*F$$-F$O*F$K)>F$Z*F$B+F$R*F$M?0:Math.abs(F$s*F$A-F$E*F$K)>F$Z*F$G+F$m*F$M?0:2},F$J.containsBoundBox=function(F$J){var F$y=0,F$T=0,F$V=F$J.min,F$Z=F$J.max;F$J.getCorners(F$L._corners);var F$m=this.containsPoints(F$L._corners);if(0!=F$m)return F$m;F$Ry.subtract(F$Z,F$V,F$L._tempV30),F$Ry.scale(F$L._tempV30,.5,F$L._tempV30),F$Ry.add(F$V,F$L._tempV30,F$L._tempV30),F$Ry.subtract(F$Z,F$L._tempV30,F$L._tempV31);var F$R=this.extents.elements,F$n=F$L._tempV31.elements;F$L._getRows(this.transformation,F$L._rows1),this.transformation.invert(F$L._tempM0);for(F$y=0;F$y<3;F$y++)for(F$T=0;F$T<3;F$T++)F$L._tempM1.setElementByRowColumn(F$y,F$T,Math.abs(F$L._tempM0.getElementByRowColumn(F$y,F$T)));this.getCenter(F$L._tempV35),F$Ry.subtract(F$L._tempV30,F$L._tempV35,F$L._tempV32);var F$K=F$L._tempV31.elements;F$K[0]=F$Ry.dot(F$L._tempV32,F$L._rows1[0]),F$K[1]=F$Ry.dot(F$L._tempV32,F$L._rows1[1]),F$K[2]=F$Ry.dot(F$L._tempV32,F$L._rows1[2]);var F$A=F$L._tempV33.elements,F$$=F$L._tempV34.elements;for(F$y=0;F$y<3;F$y++)if(F$A[0]=F$L._tempM1.getElementByRowColumn(F$y,0),F$A[1]=F$L._tempM1.getElementByRowColumn(F$y,1),F$A[2]=F$L._tempM1.getElementByRowColumn(F$y,2),F$R[F$y]+F$Ry.dot(F$L._tempV31,F$L._tempV33)<Math.abs(F$K[F$y]))return 0;for(F$T=0;F$T<3;F$T++)if(F$A[0]=F$L._tempM1.getElementByRowColumn(0,F$T),F$A[1]=F$L._tempM1.getElementByRowColumn(1,F$T),F$A[2]=F$L._tempM1.getElementByRowColumn(2,F$T),F$$[0]=F$L._tempM0.getElementByRowColumn(0,F$T),F$$[1]=F$L._tempM0.getElementByRowColumn(1,F$T),F$$[2]=F$L._tempM0.getElementByRowColumn(2,F$T),F$Ry.dot(this.extents,F$L._tempV33)+F$n[F$T]<Math.abs(F$Ry.dot(F$L._tempV31,F$L._tempV34)))return 0;for(F$y=0;F$y<3;F$y++)for(F$T=0;F$T<3;F$T++){var F$e=(F$y+1)%3,F$M=(F$y+2)%3,F$G=(F$T+1)%3,F$B=(F$T+2)%3;if(F$R[F$e]*F$L._tempM1.getElementByRowColumn(F$M,F$T)+F$R[F$M]*F$L._tempM1.getElementByRowColumn(F$e,F$T)+(F$n[F$G]*F$L._tempM1.getElementByRowColumn(F$y,F$B)+F$n[F$B]*F$L._tempM1.getElementByRowColumn(F$y,F$G))<Math.abs(F$K[F$M]*F$L._tempM0.getElementByRowColumn(F$e,F$T)-F$K[F$e]*F$L._tempM0.getElementByRowColumn(F$M,F$T)))return 0}return 2},F$J.intersectsRay=function(F$J,F$y){F$Ry.scale(this.extents,-1,F$L._tempV30),this.transformation.invert(F$L._tempM0),F$Ry.TransformNormal(F$J.direction,F$L._tempM0,F$L._ray.direction),F$Ry.transformCoordinate(F$J.origin,F$L._tempM0,F$L._ray.origin),F$L._boxBound1.min=F$L._tempV30,F$L._boxBound1.max=this.extents;var F$T=Collision.intersectsRayAndBoxRP(F$L._ray,F$L._boxBound1,F$y);return-1!==F$T&&F$Ry.transformCoordinate(F$y,this.transformation,F$y),F$T},F$J._getLocalCorners=function(F$J){F$J.length=8;var F$y=this.extents.elements;F$L._tempV30.x=F$y[0],F$L._tempV31.y=F$y[1],F$L._tempV32.z=F$y[2],F$Ry.add(F$L._tempV30,F$L._tempV31,F$L._tempV33),F$Ry.add(F$L._tempV33,F$L._tempV32,F$J[0]),F$Ry.add(F$L._tempV30,F$L._tempV31,F$L._tempV33),F$Ry.subtract(F$L._tempV33,F$L._tempV32,F$J[1]),F$Ry.subtract(F$L._tempV31,F$L._tempV30,F$L._tempV33),F$Ry.subtract(F$L._tempV33,F$L._tempV30,F$J[2]),F$Ry.subtract(F$L._tempV31,F$L._tempV30,F$L._tempV33),F$Ry.add(F$L._tempV33,F$L._tempV32,F$J[3]),F$Ry.subtract(F$L._tempV30,F$L._tempV31,F$L._tempV33),F$Ry.add(F$L._tempV33,F$L._tempV32,F$J[4]),F$Ry.subtract(F$L._tempV30,F$L._tempV31,F$L._tempV33),F$Ry.subtract(F$L._tempV33,F$L._tempV32,F$J[5]),F$Ry.scale(F$J[0],-1,F$J[6]),F$Ry.subtract(F$L._tempV32,F$L._tempV30,F$L._tempV33),F$Ry.subtract(F$L._tempV33,F$L._tempV31,F$J[7])},F$J.equals=function(F$J){return this.extents==F$J.extents&&this.transformation==F$J.transformation},F$J.cloneTo=function(F$J){var F$y=F$J;this.extents.cloneTo(F$y.extents),this.transformation.cloneTo(F$y.transformation)},F$L.createByBoundBox=function(F$J,F$y){var F$T=F$J.min,F$V=F$J.max;F$Ry.subtract(F$V,F$T,F$L._tempV30),F$Ry.scale(F$L._tempV30,.5,F$L._tempV30),F$Ry.add(F$T,F$L._tempV30,F$L._tempV31),F$Ry.subtract(F$V,F$L._tempV31,F$L._tempV32),F$Jy.translation(F$L._tempV31,F$L._tempM0);var F$Z=F$L._tempV32.clone(),F$m=F$L._tempM0.clone();F$y.extents=F$Z,F$y.transformation=F$m},F$L.createByMinAndMaxVertex=function(F$J,F$y){return F$Ry.subtract(F$y,F$J,F$L._tempV30),F$Ry.scale(F$L._tempV30,.5,F$L._tempV30),F$Ry.add(F$J,F$L._tempV30,F$L._tempV31),F$Ry.subtract(F$y,F$L._tempV31,F$L._tempV32),F$Jy.translation(F$L._tempV31,F$L._tempM0),new F$L(F$L._tempV32,F$L._tempM0)},F$L._getRows=function(F$J,F$y){F$y.length=3;var F$T=F$J.elements,F$V=F$y[0].elements;F$V[0]=F$T[0],F$V[1]=F$T[1],F$V[2]=F$T[2];var F$Z=F$y[1].elements;F$Z[0]=F$T[4],F$Z[1]=F$T[5],F$Z[2]=F$T[6];var F$m=F$y[2].elements;F$m[0]=F$T[8],F$m[1]=F$T[9],F$m[2]=F$T[10]},F$L.getObbtoObbMatrix4x4=function(F$J,F$y,F$T,F$V){var F$Z=F$J.transformation,F$m=F$y.transformation;if(F$T){F$L._getRows(F$Z,F$L._rows1),F$L._getRows(F$m,F$L._rows2);for(var F$R=0;F$R<3;F$R++)for(var F$n=0;F$n<3;F$n++)F$V.setElementByRowColumn(F$R,F$n,F$Ry.dot(F$L._rows2[F$R],F$L._rows1[F$n]));F$y.getCenter(F$L._tempV30),F$J.getCenter(F$L._tempV31),F$Ry.subtract(F$L._tempV30,F$L._tempV31,F$L._tempV32);var F$K=F$V.elements;F$K[12]=F$Ry.dot(F$L._tempV32,F$L._rows1[0]),F$K[13]=F$Ry.dot(F$L._tempV32,F$L._rows1[1]),F$K[14]=F$Ry.dot(F$L._tempV32,F$L._rows1[2]),F$K[15]=1}else F$Z.invert(F$L._tempM0),F$Jy.multiply(F$m,F$L._tempM0,F$V)},F$L.merge=function(F$J,F$y,F$T){var F$V=F$J.extents,F$Z=F$J.transformation;F$L.getObbtoObbMatrix4x4(F$J,F$y,F$T,F$L._tempM0),F$y._getLocalCorners(F$L._corners),F$Ry.transformCoordinate(F$L._corners[0],F$L._tempM0,F$L._corners[0]),F$Ry.transformCoordinate(F$L._corners[1],F$L._tempM0,F$L._corners[1]),F$Ry.transformCoordinate(F$L._corners[2],F$L._tempM0,F$L._corners[2]),F$Ry.transformCoordinate(F$L._corners[3],F$L._tempM0,F$L._corners[3]),F$Ry.transformCoordinate(F$L._corners[4],F$L._tempM0,F$L._corners[4]),F$Ry.transformCoordinate(F$L._corners[5],F$L._tempM0,F$L._corners[5]),F$Ry.transformCoordinate(F$L._corners[6],F$L._tempM0,F$L._corners[6]),F$Ry.transformCoordinate(F$L._corners[7],F$L._tempM0,F$L._corners[7]),F$Ry.scale(F$V,-1,F$L._boxBound1.min),F$V.cloneTo(F$L._boxBound1.max),F$jJ.createfromPoints(F$L._corners,F$L._boxBound2),F$jJ.merge(F$L._boxBound2,F$L._boxBound1,F$L._boxBound3);var F$m=F$L._boxBound3.min,F$R=F$L._boxBound3.max;F$Ry.subtract(F$R,F$m,F$L._tempV30),F$Ry.scale(F$L._tempV30,.5,F$L._tempV30),F$Ry.add(F$m,F$L._tempV30,F$L._tempV32),F$Ry.subtract(F$R,F$L._tempV32,F$V),F$Ry.transformCoordinate(F$L._tempV32,F$Z,F$L._tempV33)},F$e(F$L,["_tempV30",function(){return this._tempV30=new F$Ry},"_tempV31",function(){return this._tempV31=new F$Ry},"_tempV32",function(){return this._tempV32=new F$Ry},"_tempV33",function(){return this._tempV33=new F$Ry},"_tempV34",function(){return this._tempV34=new F$Ry},"_tempV35",function(){return this._tempV35=new F$Ry},"_tempV36",function(){return this._tempV36=new F$Ry},"_tempM0",function(){return this._tempM0=new F$Jy},"_tempM1",function(){return this._tempM1=new F$Jy},"_corners",function(){return this._corners=[new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry]},"_rows1",function(){return this._rows1=[new F$Ry,new F$Ry,new F$Ry]},"_rows2",function(){return this._rows2=[new F$Ry,new F$Ry,new F$Ry]},"_ray",function(){return this._ray=new F$Zy(new F$Ry,new F$Ry)},"_boxBound1",function(){return this._boxBound1=new F$jJ(new F$Ry,new F$Ry)},"_boxBound2",function(){return this._boxBound2=new F$jJ(new F$Ry,new F$Ry)},"_boxBound3",function(){return this._boxBound3=new F$jJ(new F$Ry,new F$Ry)}])}(),function(){function F$P(F$J,F$y){this.normal=null,this.distance=NaN,void 0===F$y&&(F$y=0),this.normal=F$J,this.distance=F$y}return F$G(F$P,"laya.d3.math.Plane"),F$P.prototype.normalize=function(){var F$J=this.normal.elements,F$y=F$J[0],F$T=F$J[1],F$V=F$J[2],F$Z=1/Math.sqrt(F$y*F$y+F$T*F$T+F$V*F$V);F$J[0]=F$y*F$Z,F$J[1]=F$T*F$Z,F$J[2]=F$V*F$Z,this.distance*=F$Z},F$P.createPlaneBy3P=function(F$J,F$y,F$T){var F$V=F$J.elements,F$Z=F$y.elements,F$m=F$T.elements,F$R=F$Z[0]-F$V[0],F$n=F$Z[1]-F$V[1],F$K=F$Z[2]-F$V[2],F$A=F$m[0]-F$V[0],F$$=F$m[1]-F$V[1],F$e=F$m[2]-F$V[2],F$M=F$n*F$e-F$K*F$$,F$G=F$K*F$A-F$R*F$e,F$B=F$R*F$$-F$n*F$A,F$o=1/Math.sqrt(F$M*F$M+F$G*F$G+F$B*F$B),F$s=F$M*F$o,F$E=F$G*F$o,F$O=F$B*F$o,F$L=F$P._TEMPVec3.elements;F$L[0]=F$s,F$L[1]=F$E,F$L[2]=F$O;var F$H=-(F$s*F$V[0]+F$E*F$V[1]+F$O*F$V[2]);return new F$P(F$P._TEMPVec3,F$H)},F$P.PlaneIntersectionType_Back=0,F$P.PlaneIntersectionType_Front=1,F$P.PlaneIntersectionType_Intersecting=2,F$e(F$P,["_TEMPVec3",function(){return this._TEMPVec3=new F$Ry}]),F$P}()),F$Ty=function(){function F$Z(F$J,F$y,F$T,F$V){this.elements=new Float32Array(4),void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=1),this.elements[0]=F$J,this.elements[1]=F$y,this.elements[2]=F$T,this.elements[3]=F$V}F$G(F$Z,"laya.d3.math.Quaternion");var F$J=F$Z.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.scaling=function(F$J,F$y){var F$T=F$y.elements,F$V=this.elements;F$T[0]=F$V[0]*F$J,F$T[1]=F$V[1]*F$J,F$T[2]=F$V[2]*F$J,F$T[3]=F$V[3]*F$J},F$J.normalize=function(F$J){var F$y=F$J.elements,F$T=this.elements,F$V=F$T[0],F$Z=F$T[1],F$m=F$T[2],F$R=F$T[3],F$n=F$V*F$V+F$Z*F$Z+F$m*F$m+F$R*F$R;0<F$n&&(F$n=1/Math.sqrt(F$n),F$y[0]=F$V*F$n,F$y[1]=F$Z*F$n,F$y[2]=F$m*F$n,F$y[3]=F$R*F$n)},F$J.length=function(){var F$J=this.elements,F$y=F$J[0],F$T=F$J[1],F$V=F$J[2],F$Z=F$J[3];return Math.sqrt(F$y*F$y+F$T*F$T+F$V*F$V+F$Z*F$Z)},F$J.rotateX=function(F$J,F$y){var F$T=F$y.elements,F$V=this.elements;F$J*=.5;var F$Z=F$V[0],F$m=F$V[1],F$R=F$V[2],F$n=F$V[3],F$K=Math.sin(F$J),F$A=Math.cos(F$J);F$T[0]=F$Z*F$A+F$n*F$K,F$T[1]=F$m*F$A+F$R*F$K,F$T[2]=F$R*F$A-F$m*F$K,F$T[3]=F$n*F$A-F$Z*F$K},F$J.rotateY=function(F$J,F$y){var F$T=F$y.elements,F$V=this.elements;F$J*=.5;var F$Z=F$V[0],F$m=F$V[1],F$R=F$V[2],F$n=F$V[3],F$K=Math.sin(F$J),F$A=Math.cos(F$J);F$T[0]=F$Z*F$A-F$R*F$K,F$T[1]=F$m*F$A+F$n*F$K,F$T[2]=F$R*F$A+F$Z*F$K,F$T[3]=F$n*F$A-F$m*F$K},F$J.rotateZ=function(F$J,F$y){var F$T=F$y.elements,F$V=this.elements;F$J*=.5;var F$Z=F$V[0],F$m=F$V[1],F$R=F$V[2],F$n=F$V[3],F$K=Math.sin(F$J),F$A=Math.cos(F$J);F$T[0]=F$Z*F$A+F$m*F$K,F$T[1]=F$m*F$A-F$Z*F$K,F$T[2]=F$R*F$A+F$n*F$K,F$T[3]=F$n*F$A-F$R*F$K},F$J.getYawPitchRoll=function(F$J){F$Ry.transformQuat(F$Ry.ForwardRH,this,F$Z.TEMPVector31),F$Ry.transformQuat(F$Ry.Up,this,F$Z.TEMPVector32);var F$y=F$Z.TEMPVector32.elements;F$Z.angleTo(F$Ry.ZERO,F$Z.TEMPVector31,F$Z.TEMPVector33);var F$T=F$Z.TEMPVector33.elements;F$T[0]==Math.PI/2?(F$T[1]=F$Z.arcTanAngle(F$y[2],F$y[0]),F$T[2]=0):F$T[0]==-Math.PI/2?(F$T[1]=F$Z.arcTanAngle(-F$y[2],-F$y[0]),F$T[2]=0):(F$Jy.createRotationY(-F$T[1],F$Z.TEMPMatrix0),F$Jy.createRotationX(-F$T[0],F$Z.TEMPMatrix1),F$Ry.transformCoordinate(F$Z.TEMPVector32,F$Z.TEMPMatrix0,F$Z.TEMPVector32),F$Ry.transformCoordinate(F$Z.TEMPVector32,F$Z.TEMPMatrix1,F$Z.TEMPVector32),F$T[2]=F$Z.arcTanAngle(F$y[1],-F$y[0])),F$T[1]<=-Math.PI&&(F$T[1]=Math.PI),F$T[2]<=-Math.PI&&(F$T[2]=Math.PI),F$T[1]>=Math.PI&&F$T[2]>=Math.PI&&(F$T[1]=0,F$T[2]=0,F$T[0]=Math.PI-F$T[0]);var F$V=F$J.elements;F$V[0]=F$T[1],F$V[1]=F$T[0],F$V[2]=F$T[2]},F$J.invert=function(F$J){var F$y=F$J.elements,F$T=this.elements,F$V=F$T[0],F$Z=F$T[1],F$m=F$T[2],F$R=F$T[3],F$n=F$V*F$V+F$Z*F$Z+F$m*F$m+F$R*F$R,F$K=F$n?1/F$n:0;F$y[0]=-F$V*F$K,F$y[1]=-F$Z*F$K,F$y[2]=-F$m*F$K,F$y[3]=F$R*F$K},F$J.identity=function(){var F$J=this.elements;F$J[0]=0,F$J[1]=0,F$J[2]=0,F$J[3]=1},F$J.fromArray=function(F$J,F$y){void 0===F$y&&(F$y=0),this.elements[0]=F$J[F$y+0],this.elements[1]=F$J[F$y+1],this.elements[2]=F$J[F$y+2],this.elements[3]=F$J[F$y+3]},F$J.cloneTo=function(F$J){var F$y,F$T,F$V;if((F$T=this.elements)!==(F$V=F$J.elements))for(F$y=0;F$y<4;++F$y)F$V[F$y]=F$T[F$y]},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$J.equals=function(F$J){var F$y=this.elements,F$T=F$J.elements;return F$wJ.nearEqual(F$y[0],F$T[0])&&F$wJ.nearEqual(F$y[1],F$T[1])&&F$wJ.nearEqual(F$y[2],F$T[2])&&F$wJ.nearEqual(F$y[3],F$T[3])},F$J.lengthSquared=function(){var F$J=this.elements[0],F$y=this.elements[1],F$T=this.elements[2],F$V=this.elements[3];return F$J*F$J+F$y*F$y+F$T*F$T+F$V*F$V},F$B(0,F$J,"x",function(){return this.elements[0]}),F$B(0,F$J,"y",function(){return this.elements[1]}),F$B(0,F$J,"z",function(){return this.elements[2]}),F$B(0,F$J,"w",function(){return this.elements[3]}),F$Z.createFromYawPitchRoll=function(F$J,F$y,F$T,F$V){var F$Z=.5*F$T,F$m=.5*F$y,F$R=.5*F$J,F$n=Math.sin(F$Z),F$K=Math.cos(F$Z),F$A=Math.sin(F$m),F$$=Math.cos(F$m),F$e=Math.sin(F$R),F$M=Math.cos(F$R),F$G=F$V.elements;F$G[0]=F$M*F$A*F$K+F$e*F$$*F$n,F$G[1]=F$e*F$$*F$K-F$M*F$A*F$n,F$G[2]=F$M*F$$*F$n-F$e*F$A*F$K,F$G[3]=F$M*F$$*F$K+F$e*F$A*F$n},F$Z.multiply=function(F$J,F$y,F$T){var F$V=F$J.elements,F$Z=F$y.elements,F$m=F$T.elements,F$R=F$V[0],F$n=F$V[1],F$K=F$V[2],F$A=F$V[3],F$$=F$Z[0],F$e=F$Z[1],F$M=F$Z[2],F$G=F$Z[3],F$B=F$n*F$M-F$K*F$e,F$o=F$K*F$$-F$R*F$M,F$s=F$R*F$e-F$n*F$$,F$E=F$R*F$$+F$n*F$e+F$K*F$M;F$m[0]=F$R*F$G+F$$*F$A+F$B,F$m[1]=F$n*F$G+F$e*F$A+F$o,F$m[2]=F$K*F$G+F$M*F$A+F$s,F$m[3]=F$A*F$G-F$E},F$Z.arcTanAngle=function(F$J,F$y){return 0==F$J?1==F$y?Math.PI/2:-Math.PI/2:0<F$J?Math.atan(F$y/F$J):F$J<0?0<F$y?Math.atan(F$y/F$J)+Math.PI:Math.atan(F$y/F$J)-Math.PI:0},F$Z.angleTo=function(F$J,F$y,F$T){F$Ry.subtract(F$y,F$J,F$Z.TEMPVector30),F$Ry.normalize(F$Z.TEMPVector30,F$Z.TEMPVector30),F$T.elements[0]=Math.asin(F$Z.TEMPVector30.y),F$T.elements[1]=F$Z.arcTanAngle(-F$Z.TEMPVector30.z,-F$Z.TEMPVector30.x)},F$Z.createFromAxisAngle=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements;F$y*=.5;var F$m=Math.sin(F$y);F$V[0]=F$m*F$Z[0],F$V[1]=F$m*F$Z[1],F$V[2]=F$m*F$Z[2],F$V[3]=Math.cos(F$y)},F$Z.createFromMatrix3x3=function(F$J,F$y){var F$T,F$V=F$y.elements,F$Z=F$J.elements,F$m=F$Z[0]+F$Z[4]+F$Z[8];if(0<F$m)F$T=Math.sqrt(F$m+1),F$V[3]=.5*F$T,F$T=.5/F$T,F$V[0]=(F$Z[5]-F$Z[7])*F$T,F$V[1]=(F$Z[6]-F$Z[2])*F$T,F$V[2]=(F$Z[1]-F$Z[3])*F$T;else{var F$R=0;F$Z[4]>F$Z[0]&&(F$R=1),F$Z[8]>F$Z[3*F$R+F$R]&&(F$R=2);var F$n=(F$R+1)%3,F$K=(F$R+2)%3;F$T=Math.sqrt(F$Z[3*F$R+F$R]-F$Z[3*F$n+F$n]-F$Z[3*F$K+F$K]+1),F$V[F$R]=.5*F$T,F$T=.5/F$T,F$V[3]=(F$Z[3*F$n+F$K]-F$Z[3*F$K+F$n])*F$T,F$V[F$n]=(F$Z[3*F$n+F$R]+F$Z[3*F$R+F$n])*F$T,F$V[F$K]=(F$Z[3*F$K+F$R]+F$Z[3*F$R+F$K])*F$T}},F$Z.createFromMatrix4x4=function(F$J,F$y){var F$T,F$V,F$Z=F$J.elements,F$m=F$y.elements,F$R=F$Z[0]+F$Z[5]+F$Z[10];0<F$R?(F$T=Math.sqrt(F$R+1),F$m[3]=.5*F$T,F$T=.5/F$T,F$m[0]=(F$Z[6]-F$Z[9])*F$T,F$m[1]=(F$Z[8]-F$Z[2])*F$T,F$m[2]=(F$Z[1]-F$Z[4])*F$T):F$Z[0]>=F$Z[5]&&F$Z[0]>=F$Z[10]?(F$V=.5/(F$T=Math.sqrt(1+F$Z[0]-F$Z[5]-F$Z[10])),F$m[0]=.5*F$T,F$m[1]=(F$Z[1]+F$Z[4])*F$V,F$m[2]=(F$Z[2]+F$Z[8])*F$V,F$m[3]=(F$Z[6]-F$Z[9])*F$V):F$Z[5]>F$Z[10]?(F$V=.5/(F$T=Math.sqrt(1+F$Z[5]-F$Z[0]-F$Z[10])),F$m[0]=(F$Z[4]+F$Z[1])*F$V,F$m[1]=.5*F$T,F$m[2]=(F$Z[9]+F$Z[6])*F$V,F$m[3]=(F$Z[8]-F$Z[2])*F$V):(F$V=.5/(F$T=Math.sqrt(1+F$Z[10]-F$Z[0]-F$Z[5])),F$m[0]=(F$Z[8]+F$Z[2])*F$V,F$m[1]=(F$Z[9]+F$Z[6])*F$V,F$m[2]=.5*F$T,F$m[3]=(F$Z[1]-F$Z[4])*F$V)},F$Z.slerp=function(F$J,F$y,F$T,F$V){var F$Z,F$m,F$R,F$n,F$K,F$A=F$J.elements,F$$=F$y.elements,F$e=F$V.elements,F$M=F$A[0],F$G=F$A[1],F$B=F$A[2],F$o=F$A[3],F$s=F$$[0],F$E=F$$[1],F$O=F$$[2],F$L=F$$[3];return(F$m=F$M*F$s+F$G*F$E+F$B*F$O+F$o*F$L)<0&&(F$m=-F$m,F$s=-F$s,F$E=-F$E,F$O=-F$O,F$L=-F$L),F$K=1e-6<1-F$m?(F$Z=Math.acos(F$m),F$R=Math.sin(F$Z),F$n=Math.sin((1-F$T)*F$Z)/F$R,Math.sin(F$T*F$Z)/F$R):(F$n=1-F$T,F$T),F$e[0]=F$n*F$M+F$K*F$s,F$e[1]=F$n*F$G+F$K*F$E,F$e[2]=F$n*F$B+F$K*F$O,F$e[3]=F$n*F$o+F$K*F$L,F$e},F$Z.lerp=function(F$J,F$y,F$T,F$V){var F$Z=F$V.elements,F$m=F$J.elements,F$R=F$y.elements,F$n=F$m[0],F$K=F$m[1],F$A=F$m[2],F$$=F$m[3];F$Z[0]=F$n+F$T*(F$R[0]-F$n),F$Z[1]=F$K+F$T*(F$R[1]-F$K),F$Z[2]=F$A+F$T*(F$R[2]-F$A),F$Z[3]=F$$+F$T*(F$R[3]-F$$)},F$Z.add=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=F$Z[0]+F$m[0],F$V[1]=F$Z[1]+F$m[1],F$V[2]=F$Z[2]+F$m[2],F$V[3]=F$Z[3]+F$m[3]},F$Z.dot=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements;return F$T[0]*F$V[0]+F$T[1]*F$V[1]+F$T[2]*F$V[2]+F$T[3]*F$V[3]},F$Z.rotationLookAt=function(F$J,F$y,F$T){F$Z.lookAt(F$Ry.ZERO,F$J,F$y,F$T)},F$Z.lookAt=function(F$J,F$y,F$T,F$V){F$zJ.lookAt(F$J,F$y,F$T,F$Z._tempMatrix3x3),F$Z.rotationMatrix(F$Z._tempMatrix3x3,F$V)},F$Z.invert=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements,F$Z=F$J.lengthSquared();F$wJ.isZero(F$Z)||(F$Z=1/F$Z,F$V[0]=-F$T[0]*F$Z,F$V[1]=-F$T[1]*F$Z,F$V[2]=-F$T[2]*F$Z,F$V[3]=F$T[3]*F$Z)},F$Z.rotationMatrix=function(F$J,F$y){var F$T=F$J.elements,F$V=F$T[0],F$Z=F$T[1],F$m=F$T[2],F$R=F$T[3],F$n=F$T[4],F$K=F$T[5],F$A=F$T[6],F$$=F$T[7],F$e=F$T[8],F$M=F$y.elements,F$G=NaN,F$B=NaN,F$o=F$V+F$n+F$e;0<F$o?(F$G=Math.sqrt(F$o+1),F$M[3]=.5*F$G,F$G=.5/F$G,F$M[0]=(F$K-F$$)*F$G,F$M[1]=(F$A-F$m)*F$G,F$M[2]=(F$Z-F$R)*F$G):F$n<=F$V&&F$e<=F$V?(F$B=.5/(F$G=Math.sqrt(1+F$V-F$n-F$e)),F$M[0]=.5*F$G,F$M[1]=(F$Z+F$R)*F$B,F$M[2]=(F$m+F$A)*F$B,F$M[3]=(F$K-F$$)*F$B):F$e<F$n?(F$B=.5/(F$G=Math.sqrt(1+F$n-F$V-F$e)),F$M[0]=(F$R+F$Z)*F$B,F$M[1]=.5*F$G,F$M[2]=(F$$+F$K)*F$B,F$M[3]=(F$A-F$m)*F$B):(F$B=.5/(F$G=Math.sqrt(1+F$e-F$V-F$n)),F$M[0]=(F$A+F$m)*F$B,F$M[1]=(F$$+F$K)*F$B,F$M[2]=.5*F$G,F$M[3]=(F$Z-F$R)*F$B)},F$Z.DEFAULT=new F$Z,F$e(F$Z,["TEMPVector30",function(){return this.TEMPVector30=new F$Ry},"TEMPVector31",function(){return this.TEMPVector31=new F$Ry},"TEMPVector32",function(){return this.TEMPVector32=new F$Ry},"TEMPVector33",function(){return this.TEMPVector33=new F$Ry},"TEMPMatrix0",function(){return this.TEMPMatrix0=new F$Jy},"TEMPMatrix1",function(){return this.TEMPMatrix1=new F$Jy},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new F$zJ},"NAN",function(){return this.NAN=new F$Z(NaN,NaN,NaN,NaN)}]),F$Z}(),F$Vy=function(){function F$J(F$J){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=F$J,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}F$G(F$J,"laya.d3.math.Rand");var F$y=F$J.prototype;return F$y.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},F$y.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},F$y.getSignedFloat=function(){return 2*this.getFloat()-1},F$B(0,F$y,"seed",function(){return this.seeds[0]},function(F$J){this.seeds[0]=F$J,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),F$J.getFloatFromInt=function(F$J){return 1/8388607*(8388607&F$J)},F$J.getByteFromInt=function(F$J){return(8388607&F$J)>>>15},F$J}(),F$Zy=(function(){function F$Z(F$J){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(F$J instanceof Array)||4!==F$J.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|F$J[0],this._state0L=0|F$J[1],this._state1U=0|F$J[2],this._state1L=0|F$J[3]}F$G(F$Z,"laya.d3.math.RandX");var F$J=F$Z.prototype;F$J.randomint=function(){var F$J=this._state0U,F$y=this._state0L,F$T=this._state1U,F$V=this._state1L,F$Z=(F$V>>>0)+(F$y>>>0),F$m=F$T+F$J+(F$Z/2>>>31)>>>0,F$R=F$Z>>>0,F$n=0,F$K=0;F$n=(F$J^=F$n=F$J<<23|(-512&F$y)>>>9)^(this._state0U=F$T),F$K=(F$y^=F$K=F$y<<23)^(this._state0L=F$V);F$n^=F$J>>>18,F$K^=F$y>>>18|(262143&F$J)<<14;return F$n^=F$T>>>5,F$K^=F$V>>>5|(31&F$T)<<27,this._state1U=F$n,this._state1L=F$K,[F$m,F$R]},F$J.random=function(){var F$J=this.randomint(),F$y=F$J[0],F$T=1023<<20|F$y>>>12,F$V=0|(F$J[1]>>>12|(4095&F$y)<<20);return F$Z._CONVERTION_BUFFER.setUint32(0,F$T,!1),F$Z._CONVERTION_BUFFER.setUint32(4,F$V,!1),F$Vy._CONVERTION_BUFFER.getFloat64(0,!1)-1},F$e(F$Z,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new F$Vy([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function F$J(F$J,F$y){this.origin=null,this.direction=null,this.origin=F$J,this.direction=F$y}return F$G(F$J,"laya.d3.math.Ray"),F$J}()),F$my=function(){function F$J(F$J,F$y){this.elements=new Float32Array(2),void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0);var F$T=this.elements;F$T[0]=F$J,F$T[1]=F$y}F$G(F$J,"laya.d3.math.Vector2");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.fromArray=function(F$J,F$y){void 0===F$y&&(F$y=0),this.elements[0]=F$J[F$y+0],this.elements[1]=F$J[F$y+1]},F$y.cloneTo=function(F$J){var F$y=F$J.elements,F$T=this.elements;F$y[0]=F$T[0],F$y[1]=F$T[1]},F$y.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$y,"x",function(){return this.elements[0]},function(F$J){this.elements[0]=F$J}),F$B(0,F$y,"y",function(){return this.elements[1]},function(F$J){this.elements[1]=F$J}),F$J.scale=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements;F$V[0]=F$Z[0]*F$y,F$V[1]=F$Z[1]*F$y},F$e(F$J,["ZERO",function(){return this.ZERO=new F$J(0,0)},"ONE",function(){return this.ONE=new F$J(1,1)}]),F$J}(),F$Ry=function(){function F$$(F$J,F$y,F$T){this.elements=new Float32Array(3),void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0);var F$V=this.elements;F$V[0]=F$J,F$V[1]=F$y,F$V[2]=F$T}F$G(F$$,"laya.d3.math.Vector3");var F$J=F$$.prototype;return F$P.imps(F$J,{"laya.d3.core.IClone":!0}),F$J.fromArray=function(F$J,F$y){void 0===F$y&&(F$y=0),this.elements[0]=F$J[F$y+0],this.elements[1]=F$J[F$y+1],this.elements[2]=F$J[F$y+2]},F$J.cloneTo=function(F$J){var F$y=F$J.elements,F$T=this.elements;F$y[0]=F$T[0],F$y[1]=F$T[1],F$y[2]=F$T[2]},F$J.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$J.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},F$J.reset=function(F$J,F$y,F$T){this.elements[0]=F$J,this.elements[1]=F$y,this.elements[2]=F$T},F$B(0,F$J,"x",function(){return this.elements[0]},function(F$J){this.elements[0]=F$J}),F$B(0,F$J,"y",function(){return this.elements[1]},function(F$J){this.elements[1]=F$J}),F$B(0,F$J,"z",function(){return this.elements[2]},function(F$J){this.elements[2]=F$J}),F$$.distanceSquared=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements,F$Z=F$T[0]-F$V[0],F$m=F$T[1]-F$V[1],F$R=F$T[2]-F$V[2];return F$Z*F$Z+F$m*F$m+F$R*F$R},F$$.distance=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements,F$Z=F$T[0]-F$V[0],F$m=F$T[1]-F$V[1],F$R=F$T[2]-F$V[2];return Math.sqrt(F$Z*F$Z+F$m*F$m+F$R*F$R)},F$$.min=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=Math.min(F$Z[0],F$m[0]),F$V[1]=Math.min(F$Z[1],F$m[1]),F$V[2]=Math.min(F$Z[2],F$m[2])},F$$.max=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=Math.max(F$Z[0],F$m[0]),F$V[1]=Math.max(F$Z[1],F$m[1]),F$V[2]=Math.max(F$Z[2],F$m[2])},F$$.transformQuat=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements,F$R=F$Z[0],F$n=F$Z[1],F$K=F$Z[2],F$A=F$m[0],F$$=F$m[1],F$e=F$m[2],F$M=F$m[3],F$G=F$M*F$R+F$$*F$K-F$e*F$n,F$B=F$M*F$n+F$e*F$R-F$A*F$K,F$o=F$M*F$K+F$A*F$n-F$$*F$R,F$s=-F$A*F$R-F$$*F$n-F$e*F$K;F$V[0]=F$G*F$M+F$s*-F$A+F$B*-F$e-F$o*-F$$,F$V[1]=F$B*F$M+F$s*-F$$+F$o*-F$A-F$G*-F$e,F$V[2]=F$o*F$M+F$s*-F$e+F$G*-F$$-F$B*-F$A},F$$.scalarLength=function(F$J){var F$y=F$J.elements,F$T=F$y[0],F$V=F$y[1],F$Z=F$y[2];return Math.sqrt(F$T*F$T+F$V*F$V+F$Z*F$Z)},F$$.scalarLengthSquared=function(F$J){var F$y=F$J.elements,F$T=F$y[0],F$V=F$y[1],F$Z=F$y[2];return F$T*F$T+F$V*F$V+F$Z*F$Z},F$$.normalize=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements,F$Z=F$T[0],F$m=F$T[1],F$R=F$T[2],F$n=F$Z*F$Z+F$m*F$m+F$R*F$R;0<F$n&&(F$n=1/Math.sqrt(F$n),F$V[0]=F$T[0]*F$n,F$V[1]=F$T[1]*F$n,F$V[2]=F$T[2]*F$n)},F$$.multiply=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=F$Z[0]*F$m[0],F$V[1]=F$Z[1]*F$m[1],F$V[2]=F$Z[2]*F$m[2]},F$$.scale=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements;F$V[0]=F$Z[0]*F$y,F$V[1]=F$Z[1]*F$y,F$V[2]=F$Z[2]*F$y},F$$.lerp=function(F$J,F$y,F$T,F$V){var F$Z=F$V.elements,F$m=F$J.elements,F$R=F$y.elements,F$n=F$m[0],F$K=F$m[1],F$A=F$m[2];F$Z[0]=F$n+F$T*(F$R[0]-F$n),F$Z[1]=F$K+F$T*(F$R[1]-F$K),F$Z[2]=F$A+F$T*(F$R[2]-F$A)},F$$.transformV3ToV3=function(F$J,F$y,F$T){var F$V=F$$._tempVector4;F$$.transformV3ToV4(F$J,F$y,F$V);var F$Z=F$V.elements,F$m=F$T.elements;F$m[0]=F$Z[0],F$m[1]=F$Z[1],F$m[2]=F$Z[2]},F$$.transformV3ToV4=function(F$J,F$y,F$T){var F$V=F$J.elements,F$Z=F$V[0],F$m=F$V[1],F$R=F$V[2],F$n=F$y.elements,F$K=F$T.elements;F$K[0]=F$Z*F$n[0]+F$m*F$n[4]+F$R*F$n[8]+F$n[12],F$K[1]=F$Z*F$n[1]+F$m*F$n[5]+F$R*F$n[9]+F$n[13],F$K[2]=F$Z*F$n[2]+F$m*F$n[6]+F$R*F$n[10]+F$n[14],F$K[3]=F$Z*F$n[3]+F$m*F$n[7]+F$R*F$n[11]+F$n[15]},F$$.TransformNormal=function(F$J,F$y,F$T){var F$V=F$J.elements,F$Z=F$V[0],F$m=F$V[1],F$R=F$V[2],F$n=F$y.elements,F$K=F$T.elements;F$K[0]=F$Z*F$n[0]+F$m*F$n[4]+F$R*F$n[8],F$K[1]=F$Z*F$n[1]+F$m*F$n[5]+F$R*F$n[9],F$K[2]=F$Z*F$n[2]+F$m*F$n[6]+F$R*F$n[10]},F$$.transformCoordinate=function(F$J,F$y,F$T){var F$V=F$$._tempVector4.elements,F$Z=F$J.elements,F$m=F$Z[0],F$R=F$Z[1],F$n=F$Z[2],F$K=F$y.elements;F$V[0]=F$m*F$K[0]+F$R*F$K[4]+F$n*F$K[8]+F$K[12],F$V[1]=F$m*F$K[1]+F$R*F$K[5]+F$n*F$K[9]+F$K[13],F$V[2]=F$m*F$K[2]+F$R*F$K[6]+F$n*F$K[10]+F$K[14],F$V[3]=1/(F$m*F$K[3]+F$R*F$K[7]+F$n*F$K[11]+F$K[15]);var F$A=F$T.elements;F$A[0]=F$V[0]*F$V[3],F$A[1]=F$V[1]*F$V[3],F$A[2]=F$V[2]*F$V[3]},F$$.Clamp=function(F$J,F$y,F$T,F$V){var F$Z=F$J.elements,F$m=F$Z[0],F$R=F$Z[1],F$n=F$Z[2],F$K=F$y.elements,F$A=F$K[0],F$$=F$K[1],F$e=F$K[2],F$M=F$T.elements,F$G=F$M[0],F$B=F$M[1],F$o=F$M[2],F$s=F$V.elements;F$m=(F$m=F$G<F$m?F$G:F$m)<F$A?F$A:F$m,F$R=(F$R=F$B<F$R?F$B:F$R)<F$$?F$$:F$R,F$n=(F$n=F$o<F$n?F$o:F$n)<F$e?F$e:F$n,F$s[0]=F$m,F$s[1]=F$R,F$s[2]=F$n},F$$.add=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=F$Z[0]+F$m[0],F$V[1]=F$Z[1]+F$m[1],F$V[2]=F$Z[2]+F$m[2]},F$$.subtract=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=F$Z[0]-F$m[0],F$V[1]=F$Z[1]-F$m[1],F$V[2]=F$Z[2]-F$m[2]},F$$.cross=function(F$J,F$y,F$T){var F$V=F$J.elements,F$Z=F$y.elements,F$m=F$T.elements,F$R=F$V[0],F$n=F$V[1],F$K=F$V[2],F$A=F$Z[0],F$$=F$Z[1],F$e=F$Z[2];F$m[0]=F$n*F$e-F$K*F$$,F$m[1]=F$K*F$A-F$R*F$e,F$m[2]=F$R*F$$-F$n*F$A},F$$.dot=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements;return F$T[0]*F$V[0]+F$T[1]*F$V[1]+F$T[2]*F$V[2]},F$$.equals=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements;return F$wJ.nearEqual(Math.abs(F$T[0]),Math.abs(F$V[0]))&&F$wJ.nearEqual(Math.abs(F$T[1]),Math.abs(F$V[1]))&&F$wJ.nearEqual(Math.abs(F$T[2]),Math.abs(F$V[2]))},F$$.ZERO=new F$$(0,0,0),F$$.ONE=new F$$(1,1,1),F$$.NegativeUnitX=new F$$(-1,0,0),F$$.UnitX=new F$$(1,0,0),F$$.UnitY=new F$$(0,1,0),F$$.UnitZ=new F$$(0,0,1),F$$.ForwardRH=new F$$(0,0,-1),F$$.ForwardLH=new F$$(0,0,1),F$$.Up=new F$$(0,1,0),F$$.NAN=new F$$(NaN,NaN,NaN),F$e(F$$,["_tempVector4",function(){return this._tempVector4=new F$ny}]),F$$}(),F$ny=function(){function F$J(F$J,F$y,F$T,F$V){this.elements=new Float32Array(4),void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=0);var F$Z=this.elements;F$Z[0]=F$J,F$Z[1]=F$y,F$Z[2]=F$T,F$Z[3]=F$V}F$G(F$J,"laya.d3.math.Vector4");var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.fromArray=function(F$J,F$y){void 0===F$y&&(F$y=0),this.elements[0]=F$J[F$y+0],this.elements[1]=F$J[F$y+1],this.elements[2]=F$J[F$y+2],this.elements[3]=F$J[F$y+3]},F$y.cloneTo=function(F$J){var F$y=F$J.elements,F$T=this.elements;F$y[0]=F$T[0],F$y[1]=F$T[1],F$y[2]=F$T[2],F$y[3]=F$T[3]},F$y.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$y.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},F$y.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},F$B(0,F$y,"x",function(){return this.elements[0]},function(F$J){this.elements[0]=F$J}),F$B(0,F$y,"y",function(){return this.elements[1]},function(F$J){this.elements[1]=F$J}),F$B(0,F$y,"z",function(){return this.elements[2]},function(F$J){this.elements[2]=F$J}),F$B(0,F$y,"w",function(){return this.elements[3]},function(F$J){this.elements[3]=F$J}),F$J.lerp=function(F$J,F$y,F$T,F$V){var F$Z=F$V.elements,F$m=F$J.elements,F$R=F$y.elements,F$n=F$m[0],F$K=F$m[1],F$A=F$m[2],F$$=F$m[3];F$Z[0]=F$n+F$T*(F$R[0]-F$n),F$Z[1]=F$K+F$T*(F$R[1]-F$K),F$Z[2]=F$A+F$T*(F$R[2]-F$A),F$Z[3]=F$$+F$T*(F$R[3]-F$$)},F$J.transformByM4x4=function(F$J,F$y,F$T){var F$V=F$J.elements,F$Z=F$V[0],F$m=F$V[1],F$R=F$V[2],F$n=F$V[3],F$K=F$y.elements,F$A=F$T.elements;F$A[0]=F$Z*F$K[0]+F$m*F$K[4]+F$R*F$K[8]+F$n*F$K[12],F$A[1]=F$Z*F$K[1]+F$m*F$K[5]+F$R*F$K[9]+F$n*F$K[13],F$A[2]=F$Z*F$K[2]+F$m*F$K[6]+F$R*F$K[10]+F$n*F$K[14],F$A[3]=F$Z*F$K[3]+F$m*F$K[7]+F$R*F$K[11]+F$n*F$K[15]},F$J.equals=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements;return F$wJ.nearEqual(Math.abs(F$T[0]),Math.abs(F$V[0]))&&F$wJ.nearEqual(Math.abs(F$T[1]),Math.abs(F$V[1]))&&F$wJ.nearEqual(Math.abs(F$T[2]),Math.abs(F$V[2]))&&F$wJ.nearEqual(Math.abs(F$T[3]),Math.abs(F$V[3]))},F$J.normalize=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements,F$Z=F$J.length();0<F$Z&&(F$V[0]=F$T[0]*F$Z,F$V[1]=F$T[1]*F$Z,F$V[2]=F$T[2]*F$Z,F$V[3]=F$T[3]*F$Z)},F$J.add=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=F$Z[0]+F$m[0],F$V[1]=F$Z[1]+F$m[1],F$V[2]=F$Z[2]+F$m[2],F$V[3]=F$Z[3]+F$m[3]},F$J.subtract=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=F$Z[0]-F$m[0],F$V[1]=F$Z[1]-F$m[1],F$V[2]=F$Z[2]-F$m[2],F$V[3]=F$Z[3]-F$m[3]},F$J.multiply=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=F$Z[0]*F$m[0],F$V[1]=F$Z[1]*F$m[1],F$V[2]=F$Z[2]*F$m[2],F$V[3]=F$Z[3]*F$m[3]},F$J.scale=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements;F$V[0]=F$Z[0]*F$y,F$V[1]=F$Z[1]*F$y,F$V[2]=F$Z[2]*F$y,F$V[3]=F$Z[3]*F$y},F$J.Clamp=function(F$J,F$y,F$T,F$V){var F$Z=F$J.elements,F$m=F$Z[0],F$R=F$Z[1],F$n=F$Z[2],F$K=F$Z[3],F$A=F$y.elements,F$$=F$A[0],F$e=F$A[1],F$M=F$A[2],F$G=F$A[3],F$B=F$T.elements,F$o=F$B[0],F$s=F$B[1],F$E=F$B[2],F$O=F$B[3],F$L=F$V.elements;F$m=(F$m=F$o<F$m?F$o:F$m)<F$$?F$$:F$m,F$R=(F$R=F$s<F$R?F$s:F$R)<F$e?F$e:F$R,F$n=(F$n=F$E<F$n?F$E:F$n)<F$M?F$M:F$n,F$K=(F$K=F$O<F$K?F$O:F$K)<F$G?F$G:F$K,F$L[0]=F$m,F$L[1]=F$R,F$L[2]=F$n,F$L[3]=F$K},F$J.distanceSquared=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements,F$Z=F$T[0]-F$V[0],F$m=F$T[1]-F$V[1],F$R=F$T[2]-F$V[2],F$n=F$T[3]-F$V[3];return F$Z*F$Z+F$m*F$m+F$R*F$R+F$n*F$n},F$J.distance=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements,F$Z=F$T[0]-F$V[0],F$m=F$T[1]-F$V[1],F$R=F$T[2]-F$V[2],F$n=F$T[3]-F$V[3];return Math.sqrt(F$Z*F$Z+F$m*F$m+F$R*F$R+F$n*F$n)},F$J.dot=function(F$J,F$y){var F$T=F$J.elements,F$V=F$y.elements;return F$T[0]*F$V[0]+F$T[1]*F$V[1]+F$T[2]*F$V[2]+F$T[3]*F$V[3]},F$J.min=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=Math.min(F$Z[0],F$m[0]),F$V[1]=Math.min(F$Z[1],F$m[1]),F$V[2]=Math.min(F$Z[2],F$m[2]),F$V[3]=Math.min(F$Z[3],F$m[3])},F$J.max=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y.elements;F$V[0]=Math.max(F$Z[0],F$m[0]),F$V[1]=Math.max(F$Z[1],F$m[1]),F$V[2]=Math.max(F$Z[2],F$m[2]),F$V[3]=Math.max(F$Z[3],F$m[3])},F$e(F$J,["ZERO",function(){return this.ZERO=new F$J},"ONE",function(){return this.ONE=new F$J(1,1,1,1)},"UnitX",function(){return this.UnitX=new F$J(1,0,0,0)},"UnitY",function(){return this.UnitY=new F$J(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new F$J(0,0,1,0)},"UnitW",function(){return this.UnitW=new F$J(0,0,0,1)}]),F$J}(),F$Ky=function(){function F$m(F$J,F$y,F$T,F$V){this.minDepth=0,this.maxDepth=1,this.x=F$J,this.y=F$y,this.width=F$T,this.height=F$V}F$G(F$m,"laya.d3.math.Viewport");var F$J=F$m.prototype;return F$J.project=function(F$J,F$y,F$T){F$Ry.transformV3ToV3(F$J,F$y,F$T);var F$V=F$J.elements,F$Z=F$y.elements,F$m=F$T.elements,F$R=F$V[0]*F$Z[3]+F$V[1]*F$Z[7]+F$V[2]*F$Z[11]+F$Z[15];1!==F$R&&(F$m[0]=F$m[0]/F$R,F$m[1]=F$m[1]/F$R,F$m[2]=F$m[2]/F$R),F$m[0]=.5*(F$m[0]+1)*this.width+this.x,F$m[1]=.5*(1-F$m[1])*this.height+this.y,F$m[2]=F$m[2]*(this.maxDepth-this.minDepth)+this.minDepth},F$J.unprojectFromMat=function(F$J,F$y,F$T){var F$V=F$J.elements,F$Z=F$y.elements,F$m=F$T.elements;F$m[0]=(F$V[0]-this.x)/this.width*2-1,F$m[1]=-((F$V[1]-this.y)/this.height*2-1);var F$R=(this.maxDepth-this.minDepth)/2;F$m[2]=(F$V[2]-this.minDepth-F$R)/F$R;var F$n=F$m[0]*F$Z[3]+F$m[1]*F$Z[7]+F$m[2]*F$Z[11]+F$Z[15];F$Ry.transformV3ToV3(F$T,F$y,F$T),1!==F$n&&(F$m[0]=F$m[0]/F$n,F$m[1]=F$m[1]/F$n,F$m[2]=F$m[2]/F$n)},F$J.unprojectFromWVP=function(F$J,F$y,F$T,F$V,F$Z){F$Jy.multiply(F$y,F$T,F$m._tempMatrix4x4),F$V&&F$Jy.multiply(F$m._tempMatrix4x4,F$V,F$m._tempMatrix4x4),F$m._tempMatrix4x4.invert(F$m._tempMatrix4x4),this.unprojectFromMat(F$J,F$m._tempMatrix4x4,F$Z)},F$e(F$m,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new F$Jy}]),F$m}(),F$Ay=function(){function F$t(F$J){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=F$J,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}F$G(F$t,"laya.d3.resource.models.SubMesh");var F$J=F$t.prototype;return F$P.imps(F$J,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),F$J._getVertexBuffer=function(F$J){return void 0===F$J&&(F$J=0),0===F$J?this._vertexBuffer:null},F$J._getIndexBuffer=function(){return this._indexBuffer},F$J._getStaticBatchBakedVertexs=function(F$J,F$y){var F$T,F$V,F$Z=this._vertexBuffer,F$m=F$Z.vertexDeclaration,F$R=F$m.getVertexElementByUsage(0).offset/4,F$n=F$m.getVertexElementByUsage(3).offset/4,F$K=F$y.meshRender.lightmapScaleOffset,F$A=0,F$$=0,F$e=0,F$M=0,F$G=0,F$B=0;if(F$K)if(F$V=F$m.getVertexElementByUsage(15))F$e=F$m.vertexStride/4,F$T=0<this._vertexCount?F$Z.getData().slice(this._vertexStart*F$e,(this._vertexStart+this._vertexCount)*F$e):F$Z.getData().slice(),F$M=F$V.offset/4;else{F$e=(F$B=F$m.vertexStride/4)+2,F$T=this._vertexCount?new Float32Array(this._vertexCount*(F$Z.vertexDeclaration.vertexStride/4+2)):new Float32Array(F$Z.vertexCount*(F$Z.vertexDeclaration.vertexStride/4+2)),F$M=(F$G=F$m.getVertexElementByUsage(2).offset/4)+2;var F$o=F$Z.getData();for(F$A=0,F$$=F$o.length/F$B;F$A<F$$;F$A++){var F$s=0;F$s=0<this._vertexCount?(this._vertexStart+F$A)*F$B:F$A*F$B;var F$E=F$A*F$e,F$O=0;for(F$O=0;F$O<F$M;F$O++)F$T[F$E+F$O]=F$o[F$s+F$O];for(F$O=F$M;F$O<F$B;F$O++)F$T[F$E+F$O+2]=F$o[F$s+F$O]}}else F$e=F$m.vertexStride/4,F$T=this._vertexCount?F$Z.getData().slice(this._vertexStart*F$e,(this._vertexStart+this._vertexCount)*F$e):F$Z.getData().slice();if(F$J){var F$L=F$J.worldMatrix,F$H=F$t._tempMatrix4x40;F$L.invert(F$H);var F$P=F$t._tempMatrix4x41,F$l=F$y.transform.worldMatrix;F$Jy.multiply(F$H,F$l,F$P)}else F$P=F$y.transform.worldMatrix;var F$a=F$t._tempQuaternion0;for(F$P.decomposeTransRotScale(F$t._tempVector30,F$a,F$t._tempVector31),F$A=0,F$$=F$T.length/F$e;F$A<F$$;F$A++){var F$q=F$A*F$e+F$R,F$r=F$A*F$e+F$n;if(F$sy.transformVector3ArrayToVector3ArrayCoordinate(F$T,F$q,F$P,F$T,F$q),F$sy.transformVector3ArrayByQuat(F$T,F$r,F$a,F$T,F$r),F$K){var F$D=F$A*F$e+F$M;if(F$V)F$sy.transformLightingMapTexcoordByUV1Array(F$T,F$D,F$K,F$T,F$D);else{var F$_=F$A*F$B+F$G;F$sy.transformLightingMapTexcoordByUV0Array(F$o,F$_,F$K,F$T,F$D)}}}return F$T},F$J._getVertexBuffers=function(){return null},F$J._beforeRender=function(F$J){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$J._render=function(F$J){var F$y,F$T=0,F$V=F$J.renderElement;if(1<this._indexCount){var F$Z=this._boneIndicesList.length;if(1<F$Z){for(var F$m=0;F$m<F$Z;F$m++)(F$y=F$V._skinAnimationDatas||this._skinAnimationDatas)&&(F$V._shaderValue.setValue(0,F$y[F$m]),F$J._shader.uploadRenderElementUniforms(F$V._shaderValue.data)),F$v.mainContext.drawElements(4,this._subIndexBufferCount[F$m],5123,2*this._subIndexBufferStart[F$m]);F$q.drawCall+=F$Z}else(F$y=F$V._skinAnimationDatas||this._skinAnimationDatas)&&(F$V._shaderValue.setValue(0,F$y[0]),F$J._shader.uploadRenderElementUniforms(F$V._shaderValue.data)),F$v.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),F$q.drawCall++;F$T=this._indexCount}else F$T=this._indexBuffer.indexCount,(F$y=F$V._skinAnimationDatas||this._skinAnimationDatas)&&(F$V._shaderValue.setValue(0,F$y[0]),F$J._shader.uploadRenderElementUniforms(F$V._shaderValue.data)),F$v.mainContext.drawElements(4,F$T,5123,0),F$q.drawCall++;F$q.trianglesFaces+=F$T/3},F$J.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},F$J.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},F$B(0,F$J,"_vertexBufferCount",function(){return 1}),F$B(0,F$J,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$e(F$t,["_tempVector30",function(){return this._tempVector30=new F$Ry},"_tempVector31",function(){return this._tempVector31=new F$Ry},"_tempQuaternion0",function(){return this._tempQuaternion0=new F$Ty},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new F$Jy},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new F$Jy}]),F$t}(),F$$y=function(){function F$J(F$J){this.defineCounter=0,this.defines=null,F$J?(this.defineCounter=F$J.defineCounter,this.defines=F$J.defines.slice()):(this.defineCounter=0,this.defines=[])}return F$G(F$J,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),F$J.prototype.registerDefine=function(F$J){var F$y=Math.pow(2,this.defineCounter++);return this.defines[F$y]=F$J,F$y},F$J}(),F$ey=function(){function F$J(){}return F$G(F$J,"laya.d3.shader.ShaderInit3D"),F$J.__init__=function(){var F$J,F$y;F$qy._globalRegDefine("HIGHPRECISION",F$qy.SHADERDEFINE_HIGHPRECISION),F$qy._globalRegDefine("FOG",F$qy.SHADERDEFINE_FOG),F$qy._globalRegDefine("DIRECTIONLIGHT",F$qy.SHADERDEFINE_DIRECTIONLIGHT),F$qy._globalRegDefine("POINTLIGHT",F$qy.SHADERDEFINE_POINTLIGHT),F$qy._globalRegDefine("SPOTLIGHT",F$qy.SHADERDEFINE_SPOTLIGHT),F$qy._globalRegDefine("UV",F$qy.SHADERDEFINE_UV0),F$qy._globalRegDefine("COLOR",F$qy.SHADERDEFINE_COLOR),F$qy._globalRegDefine("UV1",F$qy.SHADERDEFINE_UV1),F$qy._globalRegDefine("CASTSHADOW",F$Gy.SHADERDEFINE_CAST_SHADOW),F$qy._globalRegDefine("SHADOWMAP_PSSM1",F$Gy.SHADERDEFINE_SHADOW_PSSM1),F$qy._globalRegDefine("SHADOWMAP_PSSM2",F$Gy.SHADERDEFINE_SHADOW_PSSM2),F$qy._globalRegDefine("SHADOWMAP_PSSM3",F$Gy.SHADERDEFINE_SHADOW_PSSM3),F$qy._globalRegDefine("SHADOWMAP_PCF_NO",F$Gy.SHADERDEFINE_SHADOW_PCF_NO),F$qy._globalRegDefine("SHADOWMAP_PCF1",F$Gy.SHADERDEFINE_SHADOW_PCF1),F$qy._globalRegDefine("SHADOWMAP_PCF2",F$Gy.SHADERDEFINE_SHADOW_PCF2),F$qy._globalRegDefine("SHADOWMAP_PCF3",F$Gy.SHADERDEFINE_SHADOW_PCF3),F$qy._globalRegDefine("DEPTHFOG",F$qy.SAHDERDEFINE_DEPTHFOG),F$ky.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),F$ky.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),F$J={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},F$y={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var F$T=F$ky.nameKey.add("SIMPLE");shaderCompile=F$qy.add(F$T,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',F$J,F$y),F$Xy.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),F$Xy.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),F$Xy.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),F$Xy.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),F$Xy.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),F$Xy.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),F$Xy.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),F$Xy.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),F$Xy.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},F$J}(),F$My=function(){function F$J(){this._data=null,this._data=[]}F$G(F$J,"laya.d3.shader.ValusArray");var F$y=F$J.prototype;return F$y.setValue=function(F$J,F$y){this._data[F$J]=F$y},F$B(0,F$y,"data",function(){return this._data}),F$J}(),F$Gy=function(){function F$J(){}return F$J.SHADERDEFINE_RECEIVE_SHADOW=1,F$J.SHADERDEFINE_CAST_SHADOW=512,F$J.SHADERDEFINE_SHADOW_PSSM1=1024,F$J.SHADERDEFINE_SHADOW_PSSM2=2048,F$J.SHADERDEFINE_SHADOW_PSSM3=4096,F$J.SHADERDEFINE_SHADOW_PCF_NO=8192,F$J.SHADERDEFINE_SHADOW_PCF1=16384,F$J.SHADERDEFINE_SHADOW_PCF2=32768,F$J.SHADERDEFINE_SHADOW_PCF3=65536,F$J.MAX_PSSM_COUNT=3,F$J}(),F$By=function(){function F$h(){}return F$G(F$h,"laya.d3.utils.Picker"),F$h.calculateCursorRay=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=F$J.elements[0],F$n=F$J.elements[1],F$K=F$h._tempVector30,F$A=F$K.elements;F$A[0]=F$R,F$A[1]=F$n,F$A[2]=F$y.minDepth;var F$$=F$h._tempVector31,F$e=F$$.elements;F$e[0]=F$R,F$e[1]=F$n,F$e[2]=F$y.maxDepth;var F$M=F$m.origin,F$G=F$h._tempVector32;F$y.unprojectFromWVP(F$K,F$T,F$V,F$Z,F$M),F$y.unprojectFromWVP(F$$,F$T,F$V,F$Z,F$G);var F$B=F$m.direction.elements;F$B[0]=F$G.x-F$M.x,F$B[1]=F$G.y-F$M.y,F$B[2]=F$G.z-F$M.z,F$Ry.normalize(F$m.direction,F$m.direction)},F$h.rayIntersectsPositionsAndIndices=function(F$J,F$y,F$T,F$V,F$Z){for(var F$m=F$T.vertexStride/4,F$R=F$T.getVertexElementByUsage(0).offset/4,F$n=Number.MAX_VALUE,F$K=-1,F$A=-1,F$$=-1,F$e=0;F$e<F$V.length;F$e+=3){var F$M=F$h._tempVector35,F$G=F$M.elements,F$B=F$V[F$e]*F$m,F$o=F$B+F$R;F$G[0]=F$y[F$o],F$G[1]=F$y[1+F$o],F$G[2]=F$y[2+F$o];var F$s=F$h._tempVector36,F$E=F$s.elements,F$O=F$V[F$e+1]*F$m,F$L=F$O+F$R;F$E[0]=F$y[F$L],F$E[1]=F$y[1+F$L],F$E[2]=F$y[2+F$L];var F$H=F$h._tempVector37,F$P=F$H.elements,F$l=F$V[F$e+2]*F$m,F$a=F$l+F$R;F$P[0]=F$y[F$a],F$P[1]=F$y[1+F$a],F$P[2]=F$y[2+F$a];var F$q=laya.d3.utils.Picker.rayIntersectsTriangle(F$J,F$M,F$s,F$H);!isNaN(F$q)&&F$q<F$n&&(F$n=F$q,F$K=F$B,F$A=F$O,F$$=F$l)}if(F$n===Number.MAX_VALUE)return F$Z.position.toDefault(),F$Z.distance=Number.MAX_VALUE,F$Z.trianglePositions[0].toDefault(),F$Z.trianglePositions[1].toDefault(),F$Z.trianglePositions[2].toDefault(),F$Z.triangleNormals[0].toDefault(),F$Z.triangleNormals[1].toDefault(),F$Z.triangleNormals[2].toDefault(),!1;F$Z.distance=F$n,F$Ry.scale(F$J.direction,F$n,F$Z.position),F$Ry.add(F$J.origin,F$Z.position,F$Z.position);var F$r=F$Z.trianglePositions,F$D=F$r[0],F$_=F$r[1],F$t=F$r[2],F$v=F$D.elements,F$Q=F$_.elements,F$i=F$t.elements,F$c=F$K+F$R;F$v[0]=F$y[F$c],F$v[1]=F$y[F$c+1],F$v[2]=F$y[F$c+2];var F$u=F$A+F$R;F$Q[0]=F$y[F$u],F$Q[1]=F$y[F$u+1],F$Q[2]=F$y[F$u+2];var F$x=F$$+F$R;F$i[0]=F$y[F$x],F$i[1]=F$y[F$x+1],F$i[2]=F$y[F$x+2];var F$k=F$T.getVertexElementByUsage(3);if(F$k){var F$X=F$k.offset/4,F$S=F$Z.triangleNormals,F$f=F$S[0],F$W=F$S[1],F$I=F$S[2],F$Y=F$f.elements,F$U=F$W.elements,F$d=F$I.elements,F$C=F$K+F$X;F$Y[0]=F$y[F$C],F$Y[1]=F$y[F$C+1],F$Y[2]=F$y[F$C+2];var F$F=F$A+F$X;F$U[0]=F$y[F$F],F$U[1]=F$y[F$F+1],F$U[2]=F$y[F$F+2];var F$b=F$$+F$X;F$d[0]=F$y[F$b],F$d[1]=F$y[F$b+1],F$d[2]=F$y[F$b+2]}return!0},F$h.rayIntersectsTriangle=function(F$J,F$y,F$T,F$V){var F$Z=F$h._tempVector30,F$m=F$h._tempVector31;F$Ry.subtract(F$T,F$y,F$Z),F$Ry.subtract(F$V,F$y,F$m);var F$R,F$n=F$h._tempVector32;if(F$Ry.cross(F$J.direction,F$m,F$n),(F$R=F$Ry.dot(F$Z,F$n))>-Number.MIN_VALUE&&F$R<Number.MIN_VALUE)return Number.NaN;var F$K,F$A=1/F$R,F$$=F$h._tempVector33;if(F$Ry.subtract(F$J.origin,F$y,F$$),F$K=F$Ry.dot(F$$,F$n),(F$K*=F$A)<0||1<F$K)return Number.NaN;var F$e,F$M,F$G=F$h._tempVector34;return F$Ry.cross(F$$,F$Z,F$G),F$e=F$Ry.dot(F$J.direction,F$G),(F$e*=F$A)<0||1<F$K+F$e?Number.NaN:(F$M=F$Ry.dot(F$m,F$G),(F$M*=F$A)<0?Number.NaN:F$M)},F$e(F$h,["_tempVector30",function(){return this._tempVector30=new F$Ry},"_tempVector31",function(){return this._tempVector31=new F$Ry},"_tempVector32",function(){return this._tempVector32=new F$Ry},"_tempVector33",function(){return this._tempVector33=new F$Ry},"_tempVector34",function(){return this._tempVector34=new F$Ry},"_tempVector35",function(){return this._tempVector35=new F$Ry},"_tempVector36",function(){return this._tempVector36=new F$Ry},"_tempVector37",function(){return this._tempVector37=new F$Ry}]),F$h}(),F$oy=(function(){function F$J(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new F$Ry,new F$Ry,new F$Ry],this.trianglePositions.length=3,this.triangleNormals=[new F$Ry,new F$Ry,new F$Ry],this.triangleNormals.length=3,this.position=new F$Ry}F$G(F$J,"laya.d3.utils.RaycastHit"),F$J.prototype.cloneTo=function(F$J){F$J.distance=this.distance,this.trianglePositions[0].cloneTo(F$J.trianglePositions[0]),this.trianglePositions[1].cloneTo(F$J.trianglePositions[1]),this.trianglePositions[2].cloneTo(F$J.trianglePositions[2]),this.triangleNormals[0].cloneTo(F$J.triangleNormals[0]),this.triangleNormals[1].cloneTo(F$J.triangleNormals[1]),this.triangleNormals[2].cloneTo(F$J.triangleNormals[2]),this.position.cloneTo(F$J.position),F$J.sprite3D=this.sprite3D}}(),function(){function F$J(F$J,F$y){this._width=0,this._height=0,this._width=F$J,this._height=F$y}F$G(F$J,"laya.d3.utils.Size");var F$y=F$J.prototype;return F$B(0,F$y,"width",function(){return-1===this._width?F$p.clientWidth:this._width}),F$B(0,F$y,"height",function(){return-1===this._height?F$p.clientHeight:this._height}),F$B(1,F$J,"fullScreen",function(){return new F$J(-1,-1)}),F$J}()),F$sy=function(){function F$c(){}return F$G(F$c,"laya.d3.utils.Utils3D"),F$c._rotationTransformScaleSkinAnimation=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$e){var F$M,F$G,F$B,F$o,F$s,F$E=F$c._tempArray16_0,F$O=F$c._tempArray16_1,F$L=F$c._tempArray16_2,F$H=F$V+F$V,F$P=F$Z+F$Z,F$l=F$m+F$m,F$a=F$V*F$H,F$q=F$Z*F$H,F$r=F$Z*F$P,F$D=F$m*F$H,F$_=F$m*F$P,F$t=F$m*F$l,F$v=F$R*F$H,F$Q=F$R*F$P,F$i=F$R*F$l;for(F$E[15]=1,F$E[0]=1-F$r-F$t,F$E[1]=F$q+F$i,F$E[2]=F$D-F$Q,F$E[4]=F$q-F$i,F$E[5]=1-F$a-F$t,F$E[6]=F$_+F$v,F$E[8]=F$D+F$Q,F$E[9]=F$_-F$v,F$E[10]=1-F$a-F$r,F$O[15]=1,F$O[0]=F$n,F$O[5]=F$K,F$O[10]=F$A,F$M=0;F$M<4;F$M++)F$G=F$E[F$M],F$B=F$E[F$M+4],F$o=F$E[F$M+8],F$s=F$E[F$M+12],F$L[F$M]=F$G,F$L[F$M+4]=F$B,F$L[F$M+8]=F$o,F$L[F$M+12]=F$G*F$J+F$B*F$y+F$o*F$T+F$s;for(F$M=0;F$M<4;F$M++)F$G=F$L[F$M],F$B=F$L[F$M+4],F$o=F$L[F$M+8],F$s=F$L[F$M+12],F$$[F$M+F$e]=F$G*F$O[0]+F$B*F$O[1]+F$o*F$O[2]+F$s*F$O[3],F$$[F$M+F$e+4]=F$G*F$O[4]+F$B*F$O[5]+F$o*F$O[6]+F$s*F$O[7],F$$[F$M+F$e+8]=F$G*F$O[8]+F$B*F$O[9]+F$o*F$O[10]+F$s*F$O[11],F$$[F$M+F$e+12]=F$G*F$O[12]+F$B*F$O[13]+F$o*F$O[14]+F$s*F$O[15]},F$c._createNodeByJson=function(F$J,F$y,F$T,F$V){if(!F$T)switch(F$y.type){case"Sprite3D":F$T=new F$xy;break;case"MeshSprite3D":F$T=new F$hy;break;case"SkinnedMeshSprite3D":F$T=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":F$T=new ShuriKenParticle3D;break;case"TrailSprite3D":F$T=new TrailSprite3D;break;case"Terrain":F$T=new Terrain;break;case"Camera":F$T=new F$by;break;case"DirectionLight":F$T=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var F$Z=F$y.props;if(F$Z)for(var F$m in F$Z)F$T[F$m]=F$Z[F$m];var F$R=F$y.customProps;F$R&&(F$T instanceof laya.d3.core.Sprite3D?(F$T._parseBaseCustomProps(F$R),F$T._parseCustomProps(F$J,F$V,F$R,F$y),F$T._parseCustomComponent(F$J,F$V,F$y.components)):F$T._parseCustomProps(F$J,F$V,F$R,F$y));var F$n=F$y.child;if(F$n)for(var F$K=0,F$A=F$n.length;F$K<F$A;F$K++){var F$$=F$c._createNodeByJson(F$J,F$n[F$K],null,F$V);F$T.addChild(F$$)}return F$T},F$c._computeBoneAndAnimationDatasByBindPoseMatrxix=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R,F$n,F$K=0,F$A=0,F$$=F$J.length;for(F$R=0;F$R<F$$;F$K+=F$J[F$R].keyframeWidth,F$A+=16,F$R++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(F$y[F$K+0],F$y[F$K+1],F$y[F$K+2],F$y[F$K+3],F$y[F$K+4],F$y[F$K+5],F$y[F$K+6],F$y[F$K+7],F$y[F$K+8],F$y[F$K+9],F$V,F$A),0!=F$R&&(F$n=16*F$J[F$R].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(F$V,F$n,F$V,F$A,F$V,F$A));var F$e=F$T.length;for(F$R=0;F$R<F$e;F$R++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$V,16*F$m[F$R],F$T[F$R],F$Z,16*F$R)},F$c._computeAnimationDatasByArrayAndMatrixFast=function(F$J,F$y,F$T,F$V){for(var F$Z=0,F$m=F$J.length;F$Z<F$m;F$Z++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$y,16*F$V[F$Z],F$J[F$Z],F$T,16*F$Z)},F$c._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(F$J,F$y,F$T,F$V,F$Z){var F$m,F$R,F$n=0,F$K=0,F$A=F$J.length;for(F$m=0;F$m<F$A;F$n+=F$J[F$m].keyframeWidth,F$K+=16,F$m++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(F$y[F$n+7],F$y[F$n+8],F$y[F$n+9],F$y[F$n+3],F$y[F$n+4],F$y[F$n+5],F$y[F$n+6],F$y[F$n+0],F$y[F$n+1],F$y[F$n+2],F$V,F$K),0!=F$m&&(F$R=16*F$J[F$m].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(F$V,F$R,F$V,F$K,F$V,F$K));var F$$=F$T.length;for(F$m=0;F$m<F$$;F$m++){var F$e=16*F$m;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$V,F$e,F$T[F$m],F$Z,F$e)}},F$c._computeAnimationDatasByArrayAndMatrixFastOld=function(F$J,F$y,F$T){for(var F$V=F$J.length,F$Z=0;F$Z<F$V;F$Z++){var F$m=16*F$Z;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$y,F$m,F$J[F$Z],F$T,F$m)}},F$c._computeRootAnimationData=function(F$J,F$y,F$T){for(var F$V=0,F$Z=0,F$m=0,F$R=F$J.length;F$V<F$R;F$Z+=F$J[F$V].keyframeWidth,F$m+=16,F$V++)laya.d3.utils.Utils3D.createAffineTransformationArray(F$y[F$Z+0],F$y[F$Z+1],F$y[F$Z+2],F$y[F$Z+3],F$y[F$Z+4],F$y[F$Z+5],F$y[F$Z+6],F$y[F$Z+7],F$y[F$Z+8],F$y[F$Z+9],F$T,F$m)},F$c.transformVector3ArrayByQuat=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$T.elements,F$R=F$J[F$y],F$n=F$J[F$y+1],F$K=F$J[F$y+2],F$A=F$m[0],F$$=F$m[1],F$e=F$m[2],F$M=F$m[3],F$G=F$M*F$R+F$$*F$K-F$e*F$n,F$B=F$M*F$n+F$e*F$R-F$A*F$K,F$o=F$M*F$K+F$A*F$n-F$$*F$R,F$s=-F$A*F$R-F$$*F$n-F$e*F$K;F$V[F$Z]=F$G*F$M+F$s*-F$A+F$B*-F$e-F$o*-F$$,F$V[F$Z+1]=F$B*F$M+F$s*-F$$+F$o*-F$A-F$G*-F$e,F$V[F$Z+2]=F$o*F$M+F$s*-F$e+F$G*-F$$-F$B*-F$A},F$c.mulMatrixByArray=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R,F$n,F$K,F$A,F$$;if(F$Z===F$T){for(F$T=F$c._tempArray16_3,F$R=0;F$R<16;++F$R)F$T[F$R]=F$Z[F$m+F$R];F$V=0}for(F$R=0;F$R<4;F$R++)F$n=F$J[F$y+F$R],F$K=F$J[F$y+F$R+4],F$A=F$J[F$y+F$R+8],F$$=F$J[F$y+F$R+12],F$Z[F$m+F$R]=F$n*F$T[F$V+0]+F$K*F$T[F$V+1]+F$A*F$T[F$V+2]+F$$*F$T[F$V+3],F$Z[F$m+F$R+4]=F$n*F$T[F$V+4]+F$K*F$T[F$V+5]+F$A*F$T[F$V+6]+F$$*F$T[F$V+7],F$Z[F$m+F$R+8]=F$n*F$T[F$V+8]+F$K*F$T[F$V+9]+F$A*F$T[F$V+10]+F$$*F$T[F$V+11],F$Z[F$m+F$R+12]=F$n*F$T[F$V+12]+F$K*F$T[F$V+13]+F$A*F$T[F$V+14]+F$$*F$T[F$V+15]},F$c.mulMatrixByArrayFast=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R,F$n,F$K,F$A,F$$;for(F$R=0;F$R<4;F$R++)F$n=F$J[F$y+F$R],F$K=F$J[F$y+F$R+4],F$A=F$J[F$y+F$R+8],F$$=F$J[F$y+F$R+12],F$Z[F$m+F$R]=F$n*F$T[F$V+0]+F$K*F$T[F$V+1]+F$A*F$T[F$V+2]+F$$*F$T[F$V+3],F$Z[F$m+F$R+4]=F$n*F$T[F$V+4]+F$K*F$T[F$V+5]+F$A*F$T[F$V+6]+F$$*F$T[F$V+7],F$Z[F$m+F$R+8]=F$n*F$T[F$V+8]+F$K*F$T[F$V+9]+F$A*F$T[F$V+10]+F$$*F$T[F$V+11],F$Z[F$m+F$R+12]=F$n*F$T[F$V+12]+F$K*F$T[F$V+13]+F$A*F$T[F$V+14]+F$$*F$T[F$V+15]},F$c.mulMatrixByArrayAndMatrixFast=function(F$J,F$y,F$T,F$V,F$Z){var F$m,F$R,F$n,F$K,F$A,F$$=F$T.elements,F$e=F$$[0],F$M=F$$[1],F$G=F$$[2],F$B=F$$[3],F$o=F$$[4],F$s=F$$[5],F$E=F$$[6],F$O=F$$[7],F$L=F$$[8],F$H=F$$[9],F$P=F$$[10],F$l=F$$[11],F$a=F$$[12],F$q=F$$[13],F$r=F$$[14],F$D=F$$[15],F$_=F$y,F$t=F$y+4,F$v=F$y+8,F$Q=F$y+12,F$i=F$Z,F$c=F$Z+4,F$u=F$Z+8,F$x=F$Z+12;for(F$m=0;F$m<4;F$m++)F$R=F$J[F$_+F$m],F$n=F$J[F$t+F$m],F$K=F$J[F$v+F$m],F$A=F$J[F$Q+F$m],F$V[F$i+F$m]=F$R*F$e+F$n*F$M+F$K*F$G+F$A*F$B,F$V[F$c+F$m]=F$R*F$o+F$n*F$s+F$K*F$E+F$A*F$O,F$V[F$u+F$m]=F$R*F$L+F$n*F$H+F$K*F$P+F$A*F$l,F$V[F$x+F$m]=F$R*F$a+F$n*F$q+F$K*F$r+F$A*F$D},F$c.createAffineTransformationArray=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$e){var F$M=F$V+F$V,F$G=F$Z+F$Z,F$B=F$m+F$m,F$o=F$V*F$M,F$s=F$V*F$G,F$E=F$V*F$B,F$O=F$Z*F$G,F$L=F$Z*F$B,F$H=F$m*F$B,F$P=F$R*F$M,F$l=F$R*F$G,F$a=F$R*F$B;F$$[F$e+0]=(1-(F$O+F$H))*F$n,F$$[F$e+1]=(F$s+F$a)*F$n,F$$[F$e+2]=(F$E-F$l)*F$n,F$$[F$e+3]=0,F$$[F$e+4]=(F$s-F$a)*F$K,F$$[F$e+5]=(1-(F$o+F$H))*F$K,F$$[F$e+6]=(F$L+F$P)*F$K,F$$[F$e+7]=0,F$$[F$e+8]=(F$E+F$l)*F$A,F$$[F$e+9]=(F$L-F$P)*F$A,F$$[F$e+10]=(1-(F$o+F$O))*F$A,F$$[F$e+11]=0,F$$[F$e+12]=F$J,F$$[F$e+13]=F$y,F$$[F$e+14]=F$T,F$$[F$e+15]=1},F$c.transformVector3ArrayToVector3ArrayCoordinate=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$c._tempArray4_0,F$R=F$J[F$y+0],F$n=F$J[F$y+1],F$K=F$J[F$y+2],F$A=F$T.elements;F$m[0]=F$R*F$A[0]+F$n*F$A[4]+F$K*F$A[8]+F$A[12],F$m[1]=F$R*F$A[1]+F$n*F$A[5]+F$K*F$A[9]+F$A[13],F$m[2]=F$R*F$A[2]+F$n*F$A[6]+F$K*F$A[10]+F$A[14],F$m[3]=1/(F$R*F$A[3]+F$n*F$A[7]+F$K*F$A[11]+F$A[15]),F$V[F$Z+0]=F$m[0]*F$m[3],F$V[F$Z+1]=F$m[1]*F$m[3],F$V[F$Z+2]=F$m[2]*F$m[3]},F$c.transformLightingMapTexcoordByUV0Array=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$T.elements;F$V[F$Z+0]=F$J[F$y+0]*F$m[0]+F$m[2],F$V[F$Z+1]=(F$J[F$y+1]-1)*F$m[1]+F$m[3]},F$c.transformLightingMapTexcoordByUV1Array=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$T.elements;F$V[F$Z+0]=F$J[F$y+0]*F$m[0]+F$m[2],F$V[F$Z+1]=1+F$J[F$y+1]*F$m[1]+F$m[3]},F$c.getURLVerion=function(F$J){var F$y=F$J.indexOf("?");return 0<=F$y?F$J.substr(F$y):null},F$c._quaternionCreateFromYawPitchRollArray=function(F$J,F$y,F$T,F$V){var F$Z=.5*F$T,F$m=.5*F$y,F$R=.5*F$J,F$n=Math.sin(F$Z),F$K=Math.cos(F$Z),F$A=Math.sin(F$m),F$$=Math.cos(F$m),F$e=Math.sin(F$R),F$M=Math.cos(F$R);F$V[0]=F$M*F$A*F$K+F$e*F$$*F$n,F$V[1]=F$e*F$$*F$K-F$M*F$A*F$n,F$V[2]=F$M*F$$*F$n-F$e*F$A*F$K,F$V[3]=F$M*F$$*F$K+F$e*F$A*F$n},F$c._createAffineTransformationArray=function(F$J,F$y,F$T,F$V){var F$Z=F$y[0],F$m=F$y[1],F$R=F$y[2],F$n=F$y[3],F$K=F$Z+F$Z,F$A=F$m+F$m,F$$=F$R+F$R,F$e=F$Z*F$K,F$M=F$Z*F$A,F$G=F$Z*F$$,F$B=F$m*F$A,F$o=F$m*F$$,F$s=F$R*F$$,F$E=F$n*F$K,F$O=F$n*F$A,F$L=F$n*F$$,F$H=F$T[0],F$P=F$T[1],F$l=F$T[2];F$V[0]=(1-(F$B+F$s))*F$H,F$V[1]=(F$M+F$L)*F$H,F$V[2]=(F$G-F$O)*F$H,F$V[3]=0,F$V[4]=(F$M-F$L)*F$P,F$V[5]=(1-(F$e+F$s))*F$P,F$V[6]=(F$o+F$E)*F$P,F$V[7]=0,F$V[8]=(F$G+F$O)*F$l,F$V[9]=(F$o-F$E)*F$l,F$V[10]=(1-(F$e+F$B))*F$l,F$V[11]=0,F$V[12]=F$J[0],F$V[13]=F$J[1],F$V[14]=F$J[2],F$V[15]=1},F$c._mulMatrixArray=function(F$J,F$y,F$T,F$V){var F$Z,F$m,F$R,F$n,F$K,F$A=F$y.elements,F$$=F$A[0],F$e=F$A[1],F$M=F$A[2],F$G=F$A[3],F$B=F$A[4],F$o=F$A[5],F$s=F$A[6],F$E=F$A[7],F$O=F$A[8],F$L=F$A[9],F$H=F$A[10],F$P=F$A[11],F$l=F$A[12],F$a=F$A[13],F$q=F$A[14],F$r=F$A[15],F$D=F$V,F$_=F$V+4,F$t=F$V+8,F$v=F$V+12;for(F$Z=0;F$Z<4;F$Z++)F$m=F$J[F$Z],F$R=F$J[F$Z+4],F$n=F$J[F$Z+8],F$K=F$J[F$Z+12],F$T[F$D+F$Z]=F$m*F$$+F$R*F$e+F$n*F$M+F$K*F$G,F$T[F$_+F$Z]=F$m*F$B+F$R*F$o+F$n*F$s+F$K*F$E,F$T[F$t+F$Z]=F$m*F$O+F$R*F$L+F$n*F$H+F$K*F$P,F$T[F$v+F$Z]=F$m*F$l+F$R*F$a+F$n*F$q+F$K*F$r},F$c.getYawPitchRoll=function(F$J,F$y){F$c.transformQuat(F$Ry.ForwardRH,F$J,F$Ty.TEMPVector31),F$c.transformQuat(F$Ry.Up,F$J,F$Ty.TEMPVector32);var F$T=F$Ty.TEMPVector32.elements;F$c.angleTo(F$Ry.ZERO,F$Ty.TEMPVector31,F$Ty.TEMPVector33);var F$V=F$Ty.TEMPVector33.elements;F$V[0]==Math.PI/2?(F$V[1]=F$c.arcTanAngle(F$T[2],F$T[0]),F$V[2]=0):F$V[0]==-Math.PI/2?(F$V[1]=F$c.arcTanAngle(-F$T[2],-F$T[0]),F$V[2]=0):(F$Jy.createRotationY(-F$V[1],F$Ty.TEMPMatrix0),F$Jy.createRotationX(-F$V[0],F$Ty.TEMPMatrix1),F$Ry.transformCoordinate(F$Ty.TEMPVector32,F$Ty.TEMPMatrix0,F$Ty.TEMPVector32),F$Ry.transformCoordinate(F$Ty.TEMPVector32,F$Ty.TEMPMatrix1,F$Ty.TEMPVector32),F$V[2]=F$c.arcTanAngle(F$T[1],-F$T[0])),F$V[1]<=-Math.PI&&(F$V[1]=Math.PI),F$V[2]<=-Math.PI&&(F$V[2]=Math.PI),F$V[1]>=Math.PI&&F$V[2]>=Math.PI&&(F$V[1]=0,F$V[2]=0,F$V[0]=Math.PI-F$V[0]),F$y[0]=F$V[1],F$y[1]=F$V[0],F$y[2]=F$V[2]},F$c.arcTanAngle=function(F$J,F$y){return 0==F$J?1==F$y?Math.PI/2:-Math.PI/2:0<F$J?Math.atan(F$y/F$J):F$J<0?0<F$y?Math.atan(F$y/F$J)+Math.PI:Math.atan(F$y/F$J)-Math.PI:0},F$c.angleTo=function(F$J,F$y,F$T){F$Ry.subtract(F$y,F$J,F$Ty.TEMPVector30),F$Ry.normalize(F$Ty.TEMPVector30,F$Ty.TEMPVector30),F$T.elements[0]=Math.asin(F$Ty.TEMPVector30.y),F$T.elements[1]=F$c.arcTanAngle(-F$Ty.TEMPVector30.z,-F$Ty.TEMPVector30.x)},F$c.transformQuat=function(F$J,F$y,F$T){var F$V=F$T.elements,F$Z=F$J.elements,F$m=F$y,F$R=F$Z[0],F$n=F$Z[1],F$K=F$Z[2],F$A=F$m[0],F$$=F$m[1],F$e=F$m[2],F$M=F$m[3],F$G=F$M*F$R+F$$*F$K-F$e*F$n,F$B=F$M*F$n+F$e*F$R-F$A*F$K,F$o=F$M*F$K+F$A*F$n-F$$*F$R,F$s=-F$A*F$R-F$$*F$n-F$e*F$K;F$V[0]=F$G*F$M+F$s*-F$A+F$B*-F$e-F$o*-F$$,F$V[1]=F$B*F$M+F$s*-F$$+F$o*-F$A-F$G*-F$e,F$V[2]=F$o*F$M+F$s*-F$e+F$G*-F$$-F$B*-F$A},F$c.quaterionNormalize=function(F$J,F$y){var F$T=F$J[0],F$V=F$J[1],F$Z=F$J[2],F$m=F$J[3],F$R=F$T*F$T+F$V*F$V+F$Z*F$Z+F$m*F$m;0<F$R&&(F$R=1/Math.sqrt(F$R),F$y[0]=F$T*F$R,F$y[1]=F$V*F$R,F$y[2]=F$Z*F$R,F$y[3]=F$m*F$R)},F$c.matrix4x4MultiplyFFF=function(F$J,F$y,F$T){var F$V,F$Z,F$m,F$R,F$n;if(F$T===F$y)for(F$y=new Float32Array(16),F$V=0;F$V<16;++F$V)F$y[F$V]=F$T[F$V];for(F$V=0;F$V<4;F$V++)F$Z=F$J[F$V],F$m=F$J[F$V+4],F$R=F$J[F$V+8],F$n=F$J[F$V+12],F$T[F$V]=F$Z*F$y[0]+F$m*F$y[1]+F$R*F$y[2]+F$n*F$y[3],F$T[F$V+4]=F$Z*F$y[4]+F$m*F$y[5]+F$R*F$y[6]+F$n*F$y[7],F$T[F$V+8]=F$Z*F$y[8]+F$m*F$y[9]+F$R*F$y[10]+F$n*F$y[11],F$T[F$V+12]=F$Z*F$y[12]+F$m*F$y[13]+F$R*F$y[14]+F$n*F$y[15]},F$c.matrix4x4MultiplyMFM=function(F$J,F$y,F$T){F$c.matrix4x4MultiplyFFF(F$J.elements,F$y,F$T.elements)},F$e(F$c,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new F$Ry},"_tempVector3_1",function(){return this._tempVector3_1=new F$Ry},"_tempVector3_2",function(){return this._tempVector3_2=new F$Ry},"_tempVector3_3",function(){return this._tempVector3_3=new F$Ry},"_tempVector3_4",function(){return this._tempVector3_4=new F$Ry},"_tempVector3_5",function(){return this._tempVector3_5=new F$Ry},"_tempVector3_6",function(){return this._tempVector3_6=new F$Ry},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),F$c}(),F$Ey=function(){function F$Q(){}return F$G(F$Q,"Laya3D"),F$Q._cancelLoadByUrl=function(F$J){F$P.loader.cancelLoadByUrl(F$J),F$Q._innerFirstLevelLoaderManager.cancelLoadByUrl(F$J),F$Q._innerSecondLevelLoaderManager.cancelLoadByUrl(F$J),F$Q._innerThirdLevelLoaderManager.cancelLoadByUrl(F$J),F$Q._innerFourthLevelLoaderManager.cancelLoadByUrl(F$J)},F$Q._changeWebGLSize=function(F$J,F$y){F$v.onStageResize(F$J,F$y),F$p.clientWidth=F$J,F$p.clientHeight=F$y},F$Q.__init__=function(){var F$J=F$y.createMap;F$J.lh=[F$xy,"SPRITE3DHIERARCHY"],F$J.ls=[F$uy,"SPRITE3DHIERARCHY"],F$J.lm=[F$Yy,"MESH"],F$J.lmat=[F$Xy,"MATERIAL"],F$J.jpg=[F$dy,"nativeimage"],F$J.jpeg=[F$dy,"nativeimage"],F$J.png=[F$dy,"nativeimage"],F$J.pkm=[F$dy,"arraybuffer"],F$J.raw=[F$Wy,"arraybuffer"],F$J.mipmaps=[F$Wy,"arraybuffer"],F$E.parserMap.SPRITE3DHIERARCHY=F$Q._loadHierarchy,F$E.parserMap.MESH=F$Q._loadMesh,F$E.parserMap.MATERIAL=F$Q._loadMaterial,F$E.parserMap.TEXTURECUBE=F$Q._loadTextureCube,F$E.parserMap.TERRAIN=F$Q._loadTerrain,F$Q._innerFirstLevelLoaderManager.on("error",null,F$Q._eventLoadManagerError),F$Q._innerSecondLevelLoaderManager.on("error",null,F$Q._eventLoadManagerError),F$Q._innerThirdLevelLoaderManager.on("error",null,F$Q._eventLoadManagerError),F$Q._innerFourthLevelLoaderManager.on("error",null,F$Q._eventLoadManagerError)},F$Q.READ_BLOCK=function(){return F$Q._readData.pos+=4,!0},F$Q.READ_DATA=function(){return F$Q._DATA.offset=F$Q._readData.getUint32(),F$Q._DATA.size=F$Q._readData.getUint32(),!0},F$Q.READ_STRINGS=function(){var F$J=[],F$y={offset:0,size:0};F$y.offset=F$Q._readData.getUint16(),F$y.size=F$Q._readData.getUint16();F$Q._readData.pos;F$Q._readData.pos=F$y.offset+F$Q._DATA.offset;for(var F$T=0;F$T<F$y.size;F$T++){var F$V=F$Q._readData.readUTFString();-1===F$V.lastIndexOf(".lmat")&&-1===F$V.lastIndexOf(".lpbr")||F$J.push(F$V)}return F$J},F$Q.formatRelativePath=function(F$J,F$y){var F$T;if("."===F$y.charAt(0)){for(var F$V=(F$J+F$y).split("/"),F$Z=0,F$m=F$V.length;F$Z<F$m;F$Z++)if(".."==F$V[F$Z]){var F$R=F$Z-1;0<F$R&&".."!==F$V[F$R]&&(F$V.splice(F$R,2),F$Z-=2)}F$T=F$V.join("/")}else F$T=F$J+F$y;return null!=F$t.customFormat&&(F$T=F$t.customFormat(F$T,null)),F$T},F$Q._eventLoadManagerError=function(F$J){F$P.loader.event("error",F$J)},F$Q._addHierarchyInnerUrls=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R=F$Q.formatRelativePath(F$V,F$Z);F$T&&(F$R+=F$T),F$J.push({url:F$R,clas:F$m}),F$y[F$Z]=F$R},F$Q._getSprite3DHierarchyInnerUrls=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){var F$n,F$K=0,F$A=0;switch(F$J.type){case"Scene":var F$$=F$J.customProps.lightmaps;for(F$K=0,F$A=F$$.length;F$K<F$A;F$K++){var F$e=F$$[F$K].replace(".exr",".png");F$Q._addHierarchyInnerUrls(F$V,F$Z,F$m,F$R,F$e,F$dy)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var F$M;if(F$J.instanceParams)(F$M=F$J.instanceParams.loadPath)&&F$Q._addHierarchyInnerUrls(F$y,F$Z,F$m,F$R,F$M,F$Yy);else{(F$M=(F$n=F$J.customProps).meshPath)&&F$Q._addHierarchyInnerUrls(F$y,F$Z,F$m,F$R,F$M,F$Yy);var F$G=F$n.materials;if(F$G)for(F$K=0,F$A=F$G.length;F$K<F$A;F$K++){for(var F$B=F$G[F$K],F$o=F$B.type.split("."),F$s=F$i.window,F$E=0,F$O=F$o.length;F$E<F$O;++F$E){F$s=F$s[this.clasPaths[F$E]]}if("function"!=typeof F$s)throw"_getSprite3DHierarchyInnerUrls 错误: "+F$B.type+" 不是类";F$Q._addHierarchyInnerUrls(F$T,F$Z,F$m,F$R,F$B.path,F$s)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var F$L=(F$n=F$J.customProps).meshPath;F$L&&F$Q._addHierarchyInnerUrls(F$y,F$Z,F$m,F$R,F$L,F$Yy);var F$H=F$n.material;if(F$H){F$o=F$H.type.split("."),F$s=F$i.window;for(F$E=0,F$O=F$o.length;F$E<F$O;++F$E){F$s=F$s[this.clasPaths[F$E]]}F$Q._addHierarchyInnerUrls(F$T,F$Z,F$m,F$R,F$H.path,F$s)}else{var F$P=F$n.materialPath;if(F$P)F$Q._addHierarchyInnerUrls(F$T,F$Z,F$m,F$R,F$P,ShurikenParticleMaterial);else{var F$l=F$n.texturePath;F$l&&F$Q._addHierarchyInnerUrls(F$V,F$Z,F$m,F$R,F$l,F$dy)}}break;case"Terrain":F$Q._addHierarchyInnerUrls(F$V,F$Z,F$m,F$R,F$J.customProps.dataPath,TerrainRes)}var F$a=F$J.components;for(var F$q in F$a){var F$r=F$a[F$q];switch(F$q){case"Animator":var F$D=F$r.avatarPath;if(F$D)F$Q._addHierarchyInnerUrls(F$V,F$Z,F$m,F$R,F$D,Avatar);else{var F$_=F$r.avatar;F$_&&F$Q._addHierarchyInnerUrls(F$V,F$Z,F$m,F$R,F$_.path,Avatar)}var F$t=F$r.clipPaths;for(F$K=0,F$A=F$t.length;F$K<F$A;F$K++)F$Q._addHierarchyInnerUrls(F$V,F$Z,F$m,F$R,F$t[F$K],AnimationClip)}}var F$v=F$J.child;for(F$K=0,F$A=F$v.length;F$K<F$A;F$K++)F$Q._getSprite3DHierarchyInnerUrls(F$v[F$K],F$y,F$T,F$V,F$Z,F$m,F$R)},F$Q._loadHierarchy=function(F$J){F$J.on("loaded",null,F$Q._onHierarchylhLoaded,[F$J,F$J._class._getGroup()]),F$J.load(F$J.url,"json",!1,null,!0)},F$Q._onHierarchylhLoaded=function(F$J,F$y,F$T){if(F$J._class.destroyed)F$J.endLoad();else{var F$V=F$J.url,F$Z=F$sy.getURLVerion(F$V),F$m=F$t.getPath(F$V),F$R=[],F$n=[],F$K=[],F$A={};F$Q._getSprite3DHierarchyInnerUrls(F$T,F$R,F$n,F$K,F$A,F$Z,F$m);var F$$=F$R.length+F$n.length+F$K.length,F$e=F$$+1,F$M=1/F$e;if(F$Q._onProcessChange(F$J,0,F$M,1),0<F$K.length){var F$G=F$$/F$e,F$B=F$_.create(null,F$Q._onProcessChange,[F$J,F$M,F$G],!1);F$Q._innerFourthLevelLoaderManager.create(F$K,F$_.create(null,F$Q._onHierarchyInnerForthLevResouLoaded,[F$J,F$y,F$B,F$T,F$A,F$R,F$n,F$M+F$G*F$K.length,F$G]),F$B,null,null,1,!0,F$y)}else F$Q._onHierarchyInnerForthLevResouLoaded(F$J,F$y,null,F$T,F$A,F$R,F$n,F$M,F$G)}},F$Q._onHierarchyInnerForthLevResouLoaded=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){if(F$J._class.destroyed)F$J.endLoad();else if(F$T&&F$T.recover(),0<F$R.length){var F$A=F$_.create(null,F$Q._onProcessChange,[F$J,F$n,F$K],!1);F$Q._innerSecondLevelLoaderManager.create(F$R,F$_.create(null,F$Q._onHierarchyInnerSecondLevResouLoaded,[F$J,F$y,F$A,F$V,F$Z,F$m,F$n+F$K*F$R.length,F$K]),F$T,null,null,1,!0,F$y)}else F$Q._onHierarchyInnerSecondLevResouLoaded(F$J,F$y,null,F$V,F$Z,F$m,F$n,F$K)},F$Q._onHierarchyInnerSecondLevResouLoaded=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n){if(F$J._class.destroyed)F$J.endLoad();else if(F$T&&F$T.recover(),0<F$m.length){var F$K=F$_.create(null,F$Q._onProcessChange,[F$J,F$R,F$n],!1);F$Q._innerFirstLevelLoaderManager.create(F$m,F$_.create(null,F$Q._onHierarchyInnerFirstLevResouLoaded,[F$J,F$K,F$V,F$Z]),F$T,null,null,1,!0,F$y)}else F$Q._onHierarchyInnerFirstLevResouLoaded(F$J,null,F$V,F$Z)},F$Q._onHierarchyInnerFirstLevResouLoaded=function(F$J,F$y,F$T,F$V){F$y&&F$y.recover(),F$J.endLoad([F$T,F$V])},F$Q._loadTerrain=function(F$J){F$J.on("loaded",null,F$Q._onTerrainLtLoaded,[F$J,F$J._class._getGroup()]),F$J.load(F$J.url,"json",!1,null,!0)},F$Q._onTerrainLtLoaded=function(F$J,F$y,F$T){if(F$J._class.destroyed)F$J.endLoad();else{var F$V,F$Z,F$m=F$J.url,F$R=F$sy.getURLVerion(F$m),F$n=F$t.getPath(F$m),F$K=[],F$A={},F$$=0,F$e=0,F$M=F$T.heightData;F$V=F$M.url,F$Z=F$Q.formatRelativePath(F$n,F$V),F$R&&(F$Z+=F$R),F$V=F$A[F$V]=F$Z;var F$G=F$T.detailTexture;for(F$$=0,F$e=F$G.length;F$$<F$e;F$$++)F$K.push({url:F$G[F$$].diffuse});var F$B=F$T.normalMap;for(F$$=0,F$e=F$B.length;F$$<F$e;F$$++)F$K.push({url:F$B[F$$]});var F$o=F$T.alphaMap;for(F$$=0,F$e=F$o.length;F$$<F$e;F$$++)F$K.push({url:F$o[F$$],params:[!1,!1,6408,!0]});for(F$$=0,F$e=F$K.length;F$$<F$e;F$$++){var F$s=F$K[F$$].url;F$Z=F$Q.formatRelativePath(F$n,F$s),F$R&&(F$Z+=F$R),F$K[F$$].url=F$Z,F$A[F$s]=F$Z}var F$E=F$K.length,F$O=F$E+2,F$L=1/F$O;F$Q._onProcessChange(F$J,0,F$L,1);var F$H={heightMapLoaded:!1,texturesLoaded:!1},F$P=F$_.create(null,F$Q._onProcessChange,[F$J,F$L,F$L],!1);F$Q._innerFourthLevelLoaderManager.create(F$V,F$_.create(null,F$Q._onTerrainHeightMapLoaded,[F$J,F$P,F$T,F$A,F$H]),F$P,null,[F$M.numX,F$M.numZ,F$M.bitType,F$M.value],1,!0,F$y);var F$l=F$_.create(null,F$Q._onProcessChange,[F$J,2*F$L,F$E/F$O],!1);F$Q._innerFourthLevelLoaderManager.create(F$K,F$_.create(null,F$Q._onTerrainTexturesLoaded,[F$J,F$l,F$T,F$A,F$H]),F$l,null,null,1,!0,F$y)}},F$Q._onTerrainHeightMapLoaded=function(F$J,F$y,F$T,F$V,F$Z){F$Z.heightMapLoaded=!0,F$Z.texturesLoaded&&(F$J.endLoad([F$T,F$V]),F$y.recover())},F$Q._onTerrainTexturesLoaded=function(F$J,F$y,F$T,F$V,F$Z){F$Z.texturesLoaded=!0,F$Z.heightMapLoaded&&(F$J.endLoad([F$T,F$V]),F$y.recover())},F$Q._loadMesh=function(F$J){F$J.on("loaded",null,F$Q._onMeshLmLoaded,[F$J,F$J._class._getGroup()]),F$J.load(F$J.url,"arraybuffer",!1,null,!0)},F$Q._onMeshLmLoaded=function(F$J,F$y,F$T){if(F$J._class.destroyed)F$J.endLoad();else{var F$V,F$Z,F$m,F$R=F$J.url,F$n=F$sy.getURLVerion(F$R),F$K=F$t.getPath(F$R),F$A={},F$$=0,F$e=0;switch((F$Q._readData=new F$l(F$T)).pos=0,F$Q._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var F$M=F$Q._readData.getUint32();F$Q._readData.pos=F$Q._readData.pos+4,F$e=F$Q._readData.getUint16(),F$Q._readData.pos=F$Q._readData.pos+8*F$e;var F$G=F$Q._readData.getUint32();for(F$e=F$Q._readData.getUint16(),F$Q._readData.pos=F$M+F$G,F$V=[],F$$=0;F$$<F$e;F$$++){var F$B=F$Q._readData.readUTFString();-1!==F$B.lastIndexOf(".lmat")&&F$V.push(F$B)}break;default:for(F$Q.READ_BLOCK(),F$$=0;F$$<2;F$$++){var F$o=F$Q._readData.getUint16(),F$s=F$Q._strings[F$o],F$E=F$Q["READ_"+F$s];if(null==F$E)throw new Error("model file err,no this function:"+F$o+" "+F$s);1===F$$?F$V=F$E.call():F$E.call()}}for(F$$=0,F$m=F$V.length;F$$<F$m;F$$++){var F$O=F$V[F$$];F$Z=F$Q.formatRelativePath(F$K,F$O),F$n&&(F$Z+=F$n),F$V[F$$]=F$Z,F$A[F$O]=F$Z}if(0<F$V.length){F$Q._onProcessChange(F$J,0,.5,1);var F$L=F$_.create(null,F$Q._onProcessChange,[F$J,.5,.5],!1);F$Q._innerSecondLevelLoaderManager.create(F$V,F$_.create(null,F$Q._onMeshMateialLoaded,[F$J,F$L,F$T,F$A]),F$L,null,null,1,!0,F$y)}else F$J.endLoad([F$T,F$A])}},F$Q._onMeshMateialLoaded=function(F$J,F$y,F$T,F$V){F$J.endLoad([F$T,F$V]),F$y.recover()},F$Q._getMaterialTexturePath=function(F$J,F$y,F$T){var F$V=F$J.length-4;return F$J.indexOf(".dds")!=F$V&&F$J.indexOf(".tga")!=F$V&&F$J.indexOf(".exr")!=F$V&&F$J.indexOf(".DDS")!=F$V&&F$J.indexOf(".TGA")!=F$V&&F$J.indexOf(".EXR")!=F$V||(F$J=F$J.substr(0,F$V)+".png"),F$J=F$Q.formatRelativePath(F$T,F$J),F$y&&(F$J+=F$y),F$J},F$Q._loadMaterial=function(F$J){F$J.on("loaded",null,F$Q._onMaterilLmatLoaded,[F$J,F$J._class._getGroup()]),F$J.load(F$J.url,"json",!1,null,!0)},F$Q._onMaterilLmatLoaded=function(F$J,F$y,F$T){if(F$J._class.destroyed)F$J.endLoad();else{var F$V,F$Z=F$J.url,F$m=F$sy.getURLVerion(F$Z),F$R=F$t.getPath(F$Z),F$n=[],F$K={},F$A=F$T.customProps,F$$=F$T.version;if(F$$)switch(F$$){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var F$e=F$T.props.textures,F$M=0,F$G=F$e.length;F$M<F$G;F$M++){var F$B=F$e[F$M],F$o=F$B.path;if(F$o){var F$s=F$o.length-4;F$o.indexOf(".exr")!=F$s&&F$o.indexOf(".EXR")!=F$s||(F$o=F$o.substr(0,F$s)+".png"),F$V=F$Q.formatRelativePath(F$R,F$o),F$m&&(F$V+=F$m),F$n.push({url:F$V,params:F$B.params}),F$K[F$o]=F$V}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var F$E=F$A.diffuseTexture.texture2D;if(F$E&&(F$V=F$Q._getMaterialTexturePath(F$E,F$m,F$R),F$n.push(F$V),F$K[F$E]=F$V),F$A.normalTexture){var F$O=F$A.normalTexture.texture2D;F$O&&(F$V=F$Q._getMaterialTexturePath(F$O,F$m,F$R),F$n.push(F$V),F$K[F$O]=F$V)}if(F$A.specularTexture){var F$L=F$A.specularTexture.texture2D;F$L&&(F$V=F$Q._getMaterialTexturePath(F$L,F$m,F$R),F$n.push(F$V),F$K[F$L]=F$V)}if(F$A.emissiveTexture){var F$H=F$A.emissiveTexture.texture2D;F$H&&(F$V=F$Q._getMaterialTexturePath(F$H,F$m,F$R),F$n.push(F$V),F$K[F$H]=F$V)}if(F$A.ambientTexture){var F$P=F$A.ambientTexture.texture2D;F$P&&(F$V=F$Q._getMaterialTexturePath(F$P,F$m,F$R),F$n.push(F$V),F$K[F$P]=F$V)}if(F$A.reflectTexture){var F$l=F$A.reflectTexture.texture2D;F$l&&(F$V=F$Q._getMaterialTexturePath(F$l,F$m,F$R),F$n.push(F$V),F$K[F$l]=F$V)}}var F$a=F$n.length,F$q=F$a+1,F$r=1/F$q;if(F$Q._onProcessChange(F$J,0,F$r,1),0<F$a){var F$D=F$_.create(null,F$Q._onProcessChange,[F$J,F$r,F$a/F$q],!1);F$Q._innerFourthLevelLoaderManager.create(F$n,F$_.create(null,F$Q._onMateialTexturesLoaded,[F$J,F$D,F$T,F$K]),F$D,F$dy,null,1,!0,F$y)}else F$Q._onMateialTexturesLoaded(F$J,null,F$T,null)}},F$Q._onMateialTexturesLoaded=function(F$J,F$y,F$T,F$V){F$J.endLoad([F$T,F$V]),F$y&&F$y.recover()},F$Q._loadTextureCube=function(F$J){F$J.on("loaded",null,F$Q._onTextureCubeLtcLoaded,[F$J]),F$J.load(F$J.url,"json",!1,null,!0)},F$Q._onTextureCubeLtcLoaded=function(F$J,F$y){if(F$J._class.destroyed)F$J.endLoad();else{var F$T=F$t.getPath(F$J.url),F$V=[F$Q.formatRelativePath(F$T,F$y.px),F$Q.formatRelativePath(F$T,F$y.nx),F$Q.formatRelativePath(F$T,F$y.py),F$Q.formatRelativePath(F$T,F$y.ny),F$Q.formatRelativePath(F$T,F$y.pz),F$Q.formatRelativePath(F$T,F$y.nz)];F$Q._onProcessChange(F$J,0,1/7,1);var F$Z=F$_.create(null,F$Q._onProcessChange,[F$J,1/7,6/7],!1);F$Q._innerFourthLevelLoaderManager.load(F$V,F$_.create(null,F$Q._onTextureCubeImagesLoaded,[F$J,F$V,F$Z]),F$Z,"nativeimage")}},F$Q._onTextureCubeImagesLoaded=function(F$J,F$y,F$T){var F$V=[];F$V.length=6;for(var F$Z=0;F$Z<6;F$Z++){var F$m=F$y[F$Z];F$V[F$Z]=F$E.getRes(F$m),F$E.clearRes(F$m)}F$J.endLoad(F$V),F$T.recover()},F$Q._onProcessChange=function(F$J,F$y,F$T,F$V){(F$V=F$y+F$V*F$T)<1&&F$J.event("progress",F$V)},F$Q.init=function(F$J,F$y,F$T,F$V,F$Z,F$m){if(void 0===F$T&&(F$T=!1),void 0===F$V&&(F$V=!1),void 0===F$Z&&(F$Z=!0),void 0===F$m&&(F$m=!0),F$O.update3DLoop=function(){},F$O.cancelLoadByUrl=function(F$J){F$Q._cancelLoadByUrl(F$J)},F$K.isAntialias=F$T,F$K.isAlpha=F$V,F$K.premultipliedAlpha=F$Z,F$K.isStencil=F$m,!F$v.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");F$O.changeWebGLSize=F$Q._changeWebGLSize,F$o.is3DMode=!0,F$P.init(F$J,F$y),F$c.__init__(),F$ey.__init__(),F$hy.__init__(),F$I.__init__(),F$Q.__init__(),F$R.maxTextureCount=2,(F$Q.debugMode||F$j.debugMode)&&(F$Q._debugPhasorSprite=new F$F)},F$Q.HIERARCHY="SPRITE3DHIERARCHY",F$Q.MESH="MESH",F$Q.MATERIAL="MATERIAL",F$Q.PBRMATERIAL="PBRMTL",F$Q.TEXTURECUBE="TEXTURECUBE",F$Q.TERRAIN="TERRAIN",F$Q._readData=null,F$Q._debugPhasorSprite=null,F$Q.debugMode=!1,F$e(F$Q,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new F$y},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new F$y},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new F$y},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new F$y}]),F$Q}(),F$Oy=function(F$J){function F$Z(F$J){F$Z.__super.call(this),this._owner=F$J,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}F$G(F$Z,"laya.d3.animation.AnimationTransform3D",F$m);var F$y=F$Z.prototype;return F$y._getlocalMatrix=function(){return this._localUpdate&&(F$sy._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},F$y._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var F$J=0,F$y=this._childs.length;F$J<F$y;F$J++)this._childs[F$J]._onWorldTransform()}},F$y._setWorldMatrixAndUpdate=function(F$J){if(this._worldMatrix=F$J,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var F$y=this._getlocalMatrix(),F$T=0;F$T<16;++F$T)this._worldMatrix[F$T]=F$y[F$T];else F$sy.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},F$y._setWorldMatrixNoUpdate=function(F$J){this._worldMatrix=F$J},F$y._setWorldMatrixIgnoreUpdate=function(F$J){this._worldMatrix=F$J,this._worldUpdate=!1},F$y.getLocalPosition=function(){return this._localPosition},F$y.setLocalPosition=function(F$J){if(this._parent)this._localPosition=F$J,this._localUpdate=!0,this._onWorldTransform();else{var F$y=this._entity.owner._transform,F$T=this._entity.localPosition,F$V=F$T.elements;F$V[0]=F$J[0],F$V[1]=F$J[1],F$V[2]=F$J[2],F$y.localPosition=F$T}},F$y.getLocalRotation=function(){if(this._localQuaternionUpdate){var F$J=this._localRotationEuler;F$sy._quaternionCreateFromYawPitchRollArray(F$J[1]/F$Z._angleToRandin,F$J[0]/F$Z._angleToRandin,F$J[2]/F$Z._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},F$y.setLocalRotation=function(F$J){if(this._parent)this._localRotation=F$J,F$sy.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var F$y=this._entity.owner._transform,F$T=this._entity.localRotation,F$V=F$T.elements;F$V[0]=F$J[0],F$V[1]=F$J[1],F$V[2]=F$J[2],F$V[3]=F$J[3],F$y.localRotation=F$T}},F$y.getLocalScale=function(){return this._localScale},F$y.setLocalScale=function(F$J){if(this._parent)this._localScale=F$J,this._localUpdate=!0,this._onWorldTransform();else{var F$y=this._entity.owner._transform,F$T=this._entity.localScale,F$V=F$T.elements;F$V[0]=F$J[0],F$V[1]=F$J[1],F$V[2]=F$J[2],F$y.localScale=F$T}},F$y.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){F$sy.getYawPitchRoll(this._localRotation,F$Z._tempVector3);var F$J=F$Z._tempVector3,F$y=this._localRotationEuler;F$y[0]=F$J[1]*F$Z._angleToRandin,F$y[1]=F$J[0]*F$Z._angleToRandin,F$y[2]=F$J[2]*F$Z._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},F$y.setLocalRotationEuler=function(F$J){if(this._parent)F$sy._quaternionCreateFromYawPitchRollArray(F$J[1]/F$Z._angleToRandin,F$J[0]/F$Z._angleToRandin,F$J[2]/F$Z._angleToRandin,this._localRotation),this._localRotationEuler=F$J,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var F$y=this._entity.owner._transform,F$T=this._entity.localRotationEuler,F$V=F$T.elements;F$V[0]=F$J[0],F$V[1]=F$J[1],F$V[2]=F$J[2],F$y.localRotationEuler=F$T}},F$y.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)F$sy.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var F$J=this._getlocalMatrix(),F$y=0;F$y<16;++F$y)this._worldMatrix[F$y]=F$J[F$y];this._worldUpdate=!1}return this._worldMatrix},F$y.setParent=function(F$J){if(this._parent!==F$J){if(this._parent){var F$y=this._parent._childs,F$T=F$y.indexOf(this);F$y.splice(F$T,1)}F$J&&(F$J._childs.push(this),F$J&&this._onWorldTransform()),this._parent=F$J}},F$e(F$Z,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),F$Z}(),F$Ly=function(F$J){function F$y(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,F$y.__super.call(this),this._destroyed=!1,this._id=F$y._uniqueIDCounter,F$y._uniqueIDCounter++}F$G(F$y,"laya.d3.component.Component3D",F$m);var F$T=F$y.prototype;return F$P.imps(F$T,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),F$T._initialize=function(F$J){this._owner=F$J,this._enable=!0,this.started=!1,this._load(F$J)},F$T._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},F$T._load=function(F$J){},F$T._start=function(F$J){},F$T._update=function(F$J){},F$T._lateUpdate=function(F$J){},F$T._preRenderUpdate=function(F$J){},F$T._postRenderUpdate=function(F$J){},F$T._unload=function(F$J){this.offAll()},F$T._cloneTo=function(F$J){},F$B(0,F$T,"id",function(){return this._id}),F$B(0,F$T,"destroyed",function(){return this._destroyed}),F$B(0,F$T,"owner",function(){return this._owner}),F$B(0,F$T,"enable",function(){return this._enable},function(F$J){this._enable!==F$J&&(this._enable=F$J,this.event("enablechanged",this._enable))}),F$B(0,F$T,"isSingleton",function(){return F$y._isSingleton}),F$y._isSingleton=!0,F$y._uniqueIDCounter=1,F$y}(),F$Hy=function(F$J){function F$y(){this._destroyed=!1,F$y.__super.call(this),this._destroyed=!1}F$G(F$y,"laya.d3.core.GeometryFilter",F$m);var F$T=F$y.prototype;return F$P.imps(F$T,{"laya.resource.IDestroy":!0}),F$T._destroy=function(){this.offAll(),this._destroyed=!0},F$B(0,F$T,"_isAsyncLoaded",function(){return!0}),F$B(0,F$T,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),F$B(0,F$T,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),F$B(0,F$T,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),F$B(0,F$T,"destroyed",function(){return this._destroyed}),F$y}(),F$Py=function(F$J){function F$V(F$J){F$V.__super.call(this),this._id=++F$V._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new F$jJ(new F$Ry,new F$Ry),this._boundingBoxCenter=new F$Ry,this._boundingSphere=new F$NJ(new F$Ry,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=F$J,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}F$G(F$V,"laya.d3.core.render.BaseRender",F$m);var F$y=F$V.prototype;return F$P.imps(F$y,{"laya.resource.IDestroy":!0}),F$y._changeMaterialReference=function(F$J,F$y){F$J&&F$J._removeReference(),F$y._addReference()},F$y._getInstanceMaterial=function(F$J,F$y){var F$T=new F$J.constructor;return F$J.cloneTo(F$T),F$T.name=F$T.name+"(Instance)",this._materialsInstance[F$y]=!0,this._changeMaterialReference(this._materials[F$y],F$T),this._materials[F$y]=F$T},F$y._setShaderValuelightMap=function(F$J){this._setShaderValueTexture(3,F$J)},F$y._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},F$y._renderRenderableBoundBox=function(){var F$J=F$Ey._debugPhasorSprite,F$y=this.boundingBox,F$T=F$V._tempBoundBoxCorners;F$y.getCorners(F$T),F$J.line(F$T[0],F$V._greenColor,F$T[1],F$V._greenColor),F$J.line(F$T[2],F$V._greenColor,F$T[3],F$V._greenColor),F$J.line(F$T[4],F$V._greenColor,F$T[5],F$V._greenColor),F$J.line(F$T[6],F$V._greenColor,F$T[7],F$V._greenColor),F$J.line(F$T[0],F$V._greenColor,F$T[3],F$V._greenColor),F$J.line(F$T[1],F$V._greenColor,F$T[2],F$V._greenColor),F$J.line(F$T[2],F$V._greenColor,F$T[6],F$V._greenColor),F$J.line(F$T[3],F$V._greenColor,F$T[7],F$V._greenColor),F$J.line(F$T[0],F$V._greenColor,F$T[4],F$V._greenColor),F$J.line(F$T[1],F$V._greenColor,F$T[5],F$V._greenColor),F$J.line(F$T[4],F$V._greenColor,F$T[7],F$V._greenColor),F$J.line(F$T[5],F$V._greenColor,F$T[6],F$V._greenColor)},F$y._calculateBoundingSphere=function(){throw"BaseRender: must override it."},F$y._calculateBoundingBox=function(){throw"BaseRender: must override it."},F$y._setShaderValueTexture=function(F$J,F$y){this._owner._shaderValues.setValue(F$J,F$y)},F$y._setShaderValueMatrix4x4=function(F$J,F$y){this._owner._shaderValues.setValue(F$J,F$y?F$y.elements:null)},F$y._setShaderValueColor=function(F$J,F$y){this._owner._shaderValues.setValue(F$J,F$y?F$y.elements:null)},F$y._setShaderValueBuffer=function(F$J,F$y){this._owner._shaderValues.setValue(F$J,F$y)},F$y._setShaderValueInt=function(F$J,F$y){this._owner._shaderValues.setValue(F$J,F$y)},F$y._setShaderValueBool=function(F$J,F$y){this._owner._shaderValues.setValue(F$J,F$y)},F$y._setShaderValueNumber=function(F$J,F$y){this._owner._shaderValues.setValue(F$J,F$y)},F$y._setShaderValueVector2=function(F$J,F$y){this._owner._shaderValues.setValue(F$J,F$y?F$y.elements:null)},F$y._addShaderDefine=function(F$J){this._owner._shaderDefineValue|=F$J},F$y._removeShaderDefine=function(F$J){this._owner._shaderDefineValue&=~F$J},F$y._renderUpdate=function(F$J){return!0},F$y._applyLightMapParams=function(){if(0<=this._lightmapIndex){var F$J=this._owner.scene;if(F$J){var F$y=F$J.getlightmaps()[this._lightmapIndex];F$y?(this._addShaderDefine(F$Fy.SAHDERDEFINE_LIGHTMAP),F$y.loaded?this._setShaderValuelightMap(F$y):F$y.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(F$Fy.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(F$Fy.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(F$Fy.SAHDERDEFINE_LIGHTMAP)},F$y._updateOctreeNode=function(){var F$J=this._treeNode;F$J&&this._octreeNodeNeedChange&&(F$J.updateObject(this),this._octreeNodeNeedChange=!1)},F$y._destroy=function(){this.offAll();var F$J=0,F$y=0;for(F$J=0,F$y=this._renderElements.length;F$J<F$y;F$J++)this._renderElements[F$J]._destroy();for(F$J=0,F$y=this._materials.length;F$J<F$y;F$J++)this._materials[F$J]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},F$B(0,F$y,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),F$B(0,F$y,"id",function(){return this._id}),F$B(0,F$y,"material",function(){var F$J=this._materials[0];if(F$J&&!this._materialsInstance[0]){var F$y=this._getInstanceMaterial(F$J,0);this.event("materialchanged",[this,0,F$y])}return this._materials[0]},function(F$J){this.sharedMaterial=F$J}),F$B(0,F$y,"sharedMaterial",function(){return this._materials[0]},function(F$J){var F$y=this._materials[0];F$y!==F$J&&(this._materials[0]=F$J,this._materialsInstance[0]=!1,this._changeMaterialReference(F$y,F$J),this.event("materialchanged",[this,0,F$J]))}),F$B(0,F$y,"lightmapIndex",function(){return this._lightmapIndex},function(F$J){this._lightmapIndex=F$J,this._applyLightMapParams()}),F$B(0,F$y,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(F$J){this._lightmapScaleOffset=F$J,this._setShaderValueColor(2,F$J),this._addShaderDefine(F$Fy.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),F$B(0,F$y,"enable",function(){return this._enable},function(F$J){this._enable=F$J,this.event("enablechanged",[this,F$J])}),F$B(0,F$y,"materials",function(){for(var F$J=0,F$y=this._materials.length;F$J<F$y;F$J++)if(!this._materialsInstance[F$J]){var F$T=this._getInstanceMaterial(this._materials[F$J],F$J);this.event("materialchanged",[this,F$J,F$T])}return this._materials.slice()},function(F$J){this.sharedMaterials=F$J}),F$B(0,F$y,"sharedMaterials",function(){return this._materials.slice()},function(F$J){if(!F$J)throw new Error("MeshRender: shadredMaterials value can't be null.");var F$y=F$J.length;this._materialsInstance.length=F$y;for(var F$T=0;F$T<F$y;F$T++){var F$V=this._materials[F$T];F$V!==F$J[F$T]&&(this._materialsInstance[F$T]=!1,this._changeMaterialReference(F$V,F$J[F$T]),this.event("materialchanged",[this,F$T,F$J[F$T]]))}this._materials=F$J}),F$B(0,F$y,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),F$B(0,F$y,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var F$J=this.boundingBox;F$Ry.add(F$J.min,F$J.max,this._boundingBoxCenter),F$Ry.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),F$B(0,F$y,"receiveShadow",function(){return this._receiveShadow},function(F$J){this._receiveShadow!==F$J&&((this._receiveShadow=F$J)?this._addShaderDefine(F$Gy.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(F$Gy.SHADERDEFINE_RECEIVE_SHADOW))}),F$B(0,F$y,"destroyed",function(){return this._destroyed}),F$V._uniqueIDCounter=0,F$e(F$V,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry,new F$Ry]},"_greenColor",function(){return this._greenColor=new F$ny(0,1,0,1)}]),F$V}(),F$ly=function(F$J){function F$n(F$J){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,F$n.__super.call(this),this._localPosition=new F$Ry,this._localRotation=new F$Ty(0,0,0,1),this._localScale=new F$Ry(1,1,1),this._localRotationEuler=new F$Ry,this._localMatrix=new F$Jy,this._position=new F$Ry,this._rotation=new F$Ty(0,0,0,1),this._scale=new F$Ry(1,1,1),this._worldMatrix=new F$Jy,this._forward=new F$Ry,this._up=new F$Ry,this._right=new F$Ry,this._owner=F$J,this._childs=[]}F$G(F$n,"laya.d3.core.Transform3D",F$m);var F$y=F$n.prototype;return F$y._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)F$Jy.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var F$J=F$n._tempVector30;F$Ry.multiply(this.pivot,this._localScale,F$J);var F$y=F$n._tempVector31;F$Ry.subtract(F$J,this.pivot,F$y);var F$T=F$n._tempVector32,F$V=this.localRotation;F$Ry.transformQuat(F$J,F$V,F$T),F$Ry.subtract(F$T,F$J,F$T);var F$Z=F$n._tempVector33;F$Ry.subtract(this._localPosition,F$y,F$Z),F$Ry.subtract(F$Z,F$T,F$Z),F$Jy.createAffineTransformation(F$Z,F$V,this._localScale,this._localMatrix)}},F$y._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var F$J=0,F$y=this._childs.length;F$J<F$y;F$J++)this._childs[F$J]._onWorldPositionRotationTransform()}},F$y._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$J=0,F$y=this._childs.length;F$J<F$y;F$J++)this._childs[F$J]._onWorldPositionScaleTransform()}},F$y._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var F$J=0,F$y=this._childs.length;F$J<F$y;F$J++)this._childs[F$J]._onWorldPositionTransform()}},F$y._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var F$J=0,F$y=this._childs.length;F$J<F$y;F$J++)this._childs[F$J]._onWorldPositionRotationTransform()}},F$y._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$J=0,F$y=this._childs.length;F$J<F$y;F$J++)this._childs[F$J]._onWorldPositionScaleTransform()}},F$y._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$J=0,F$y=this._childs.length;F$J<F$y;F$J++)this._childs[F$J]._onWorldTransform()}},F$y.translate=function(F$J,F$y){void 0===F$y&&(F$y=!0),F$y?(F$Jy.createFromQuaternion(this.localRotation,F$n._tempMatrix0),F$Ry.transformCoordinate(F$J,F$n._tempMatrix0,F$n._tempVector30),F$Ry.add(this.localPosition,F$n._tempVector30,this._localPosition),this.localPosition=this._localPosition):(F$Ry.add(this.position,F$J,this._position),this.position=this._position)},F$y.rotate=function(F$J,F$y,F$T){var F$V;void 0===F$y&&(F$y=!0),void 0===F$T&&(F$T=!0),F$V=F$T?F$J:(F$Ry.scale(F$J,Math.PI/180,F$n._tempVector30),F$n._tempVector30),F$Ty.createFromYawPitchRoll(F$V.y,F$V.x,F$V.z,F$n._tempQuaternion0),F$y?(F$Ty.multiply(this._localRotation,F$n._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(F$Ty.multiply(F$n._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},F$y.lookAt=function(F$J,F$y,F$T){void 0===F$T&&(F$T=!1);var F$V,F$Z=F$J.elements;if(F$T){if(F$V=this._localPosition.elements,Math.abs(F$V[0]-F$Z[0])<F$wJ.zeroTolerance&&Math.abs(F$V[1]-F$Z[1])<F$wJ.zeroTolerance&&Math.abs(F$V[2]-F$Z[2])<F$wJ.zeroTolerance)return;F$Ty.lookAt(this._localPosition,F$J,F$y,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var F$m=this.position;if(F$V=F$m.elements,Math.abs(F$V[0]-F$Z[0])<F$wJ.zeroTolerance&&Math.abs(F$V[1]-F$Z[1])<F$wJ.zeroTolerance&&Math.abs(F$V[2]-F$Z[2])<F$wJ.zeroTolerance)return;F$Ty.lookAt(F$m,F$J,F$y,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},F$B(0,F$y,"_isFrontFaceInvert",function(){var F$J=this.scale,F$y=F$J.x<0;return F$J.y<0&&(F$y=!F$y),F$J.z<0&&(F$y=!F$y),F$y}),F$B(0,F$y,"owner",function(){return this._owner}),F$B(0,F$y,"localRotation",function(){if(this._localQuaternionUpdate){var F$J=this._localRotationEuler.elements;F$Ty.createFromYawPitchRoll(F$J[1]/F$n._angleToRandin,F$J[0]/F$n._angleToRandin,F$J[2]/F$n._angleToRandin,this._localRotation)}return this._localRotation},function(F$J){this._localRotation=F$J,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),F$B(0,F$y,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?F$Jy.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(F$J){null===this._parent?F$J.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),F$Jy.multiply(this._localMatrix,F$J,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=F$J,this._worldUpdate=!1}),F$B(0,F$y,"worldNeedUpdate",function(){return this._worldUpdate}),F$B(0,F$y,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(F$J){this._localMatrix=F$J,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),F$B(0,F$y,"dummy",function(){return this._dummy},function(F$J){this._dummy!==F$J&&(this._dummy&&(this._dummy._entity=null),F$J&&(F$J._entity=this),this._dummy=F$J)}),F$B(0,F$y,"localPosition",function(){return this._localPosition},function(F$J){this._localPosition=F$J,this._localUpdate=!0,this._onWorldPositionTransform()}),F$B(0,F$y,"position",function(){if(this._positionUpdate){if(null!=this._parent){var F$J=this._parent.position;F$Ry.multiply(this._localPosition,this._parent.scale,F$n._tempVector30),F$Ry.transformQuat(F$n._tempVector30,this._parent.rotation,F$n._tempVector30),F$Ry.add(F$J,F$n._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(F$J){if(null!=this._parent){F$Ry.subtract(F$J,this._parent.position,this._localPosition);var F$y=this._parent.scale.elements,F$T=F$y[0],F$V=F$y[1],F$Z=F$y[2];if(1!==F$T||1!==F$V||1!==F$Z){var F$m=F$n._tempVector30,F$R=F$m.elements;F$R[0]=1/F$T,F$R[1]=1/F$V,F$R[2]=1/F$Z,F$Ry.multiply(this._localPosition,F$m,this._localPosition)}this._parent.rotation.invert(F$n._tempQuaternion0),F$Ry.transformQuat(this._localPosition,F$n._tempQuaternion0,this._localPosition)}else F$J.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=F$J,this._positionUpdate=!1}),F$B(0,F$y,"localScale",function(){return this._localScale},function(F$J){this._localScale=F$J,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),F$B(0,F$y,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(F$n._tempVector30);var F$J=F$n._tempVector30.elements,F$y=this._localRotationEuler.elements;F$y[0]=F$J[1]*F$n._angleToRandin,F$y[1]=F$J[0]*F$n._angleToRandin,F$y[2]=F$J[2]*F$n._angleToRandin}return this._localRotationEuler},function(F$J){this._localRotationEuler=F$J,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),F$B(0,F$y,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?F$Ty.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(F$J){null!=this._parent?(this._parent.rotation.invert(F$n._tempQuaternion0),F$Ty.multiply(F$J,F$n._tempQuaternion0,this._localRotation)):F$J.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=F$J,this._rotationUpdate=!1}),F$B(0,F$y,"scale",function(){return this._scaleUpdate&&(null!==this._parent?F$Ry.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(F$J){if(null!==this._parent){var F$y=this._parent.scale.elements,F$T=F$n._tempVector30.elements;F$T[0]=1/F$y[0],F$T[1]=1/F$y[1],F$T[2]=1/F$y[2],F$Ry.multiply(F$J,F$n._tempVector30,this._localScale)}else F$J.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=F$J,this._scaleUpdate=!1}),F$B(0,F$y,"rotationEuler",null,function(F$J){F$Ty.createFromYawPitchRoll(F$J.y,F$J.x,F$J.z,this._rotation),this.rotation=this._rotation}),F$B(0,F$y,"forward",function(){var F$J=this.worldMatrix.elements;return this._forward.elements[0]=-F$J[8],this._forward.elements[1]=-F$J[9],this._forward.elements[2]=-F$J[10],this._forward}),F$B(0,F$y,"up",function(){var F$J=this.worldMatrix.elements;return this._up.elements[0]=F$J[4],this._up.elements[1]=F$J[5],this._up.elements[2]=F$J[6],this._up}),F$B(0,F$y,"right",function(){var F$J=this.worldMatrix.elements;return this._right.elements[0]=F$J[0],this._right.elements[1]=F$J[1],this._right.elements[2]=F$J[2],this._right}),F$B(0,F$y,"parent",function(){return this._parent},function(F$J){if(this._parent!==F$J){if(this._parent){var F$y=this._parent._childs,F$T=F$y.indexOf(this);F$y.splice(F$T,1)}F$J&&(F$J._childs.push(this),F$J&&this._onWorldTransform()),this._parent=F$J}}),F$e(F$n,["_tempVector30",function(){return this._tempVector30=new F$Ry},"_tempVector31",function(){return this._tempVector31=new F$Ry},"_tempVector32",function(){return this._tempVector32=new F$Ry},"_tempVector33",function(){return this._tempVector33=new F$Ry},"_tempQuaternion0",function(){return this._tempQuaternion0=new F$Ty},"_tempMatrix0",function(){return this._tempMatrix0=new F$Jy},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),F$n}(),F$ay=(function(F$J){function F$y(){this._rotation=0,this._matNeedUpdte=!1,F$y.__super.call(this),this._matrix=new F$Jy,this._offset=new F$my,this._tiling=new F$my(1,1)}F$G(F$y,"laya.d3.core.TransformUV",F$m);var F$T=F$y.prototype;F$P.imps(F$T,{"laya.d3.core.IClone":!0}),F$T._updateMatrix=function(){F$y._tempOffsetV3.elements[0]=this._offset.x,F$y._tempOffsetV3.elements[1]=this._offset.y,F$Ty.createFromYawPitchRoll(0,0,this._rotation,F$y._tempRotationQua),F$y._tempTitlingV3.elements[0]=this._tiling.x,F$y._tempTitlingV3.elements[1]=this._tiling.y,F$Jy.createAffineTransformation(F$y._tempOffsetV3,F$y._tempRotationQua,F$y._tempTitlingV3,this._matrix)},F$T.cloneTo=function(F$J){F$J._matrix=this._matrix.clone(),F$J._offset=this._offset.clone(),F$J._rotation=this._rotation,F$J._tiling=this._tiling.clone()},F$T.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$T,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),F$B(0,F$T,"tiling",function(){return this._tiling},function(F$J){this._tiling=F$J,this._matNeedUpdte=!0}),F$B(0,F$T,"offset",function(){return this._offset},function(F$J){this._offset=F$J,this._matNeedUpdte=!0}),F$B(0,F$T,"rotation",function(){return this._rotation},function(F$J){this._rotation=F$J,this._matNeedUpdte=!0}),F$e(F$y,["_tempOffsetV3",function(){return this._tempOffsetV3=new F$Ry(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new F$Ty},"_tempTitlingV3",function(){return this._tempTitlingV3=new F$Ry(1,1,1)}])}(),function(F$T){function F$J(){this.x=NaN,this.y=NaN,this.z=NaN,F$J.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}F$G(F$J,"laya.d3.core.particleShuriKen.module.shape.BoxShape",F$T);var F$y=F$J.prototype;F$y._getShapeBoundBox=function(F$J){var F$y=F$J.min.elements;F$y[0]=.5*-this.x,F$y[1]=.5*-this.y,F$y[2]=.5*-this.z;var F$T=F$J.max.elements;F$T[0]=.5*this.x,F$T[1]=.5*this.y,F$T[2]=.5*this.z},F$y._getSpeedBoundBox=function(F$J){var F$y=F$J.min.elements;F$y[0]=0,F$y[1]=0,F$y[2]=0;var F$T=F$J.max.elements;F$T[0]=0,F$T[1]=1,F$T[2]=0},F$y.generatePositionAndDirection=function(F$J,F$y,F$T,F$V){var F$Z=F$J.elements,F$m=F$y.elements;F$T?(F$T.seed=F$V[16],F$d._randomPointInsideHalfUnitBox(F$J,F$T),F$V[16]=F$T.seed):F$d._randomPointInsideHalfUnitBox(F$J),F$Z[0]=this.x*F$Z[0],F$Z[1]=this.y*F$Z[1],F$Z[2]=this.z*F$Z[2],this.randomDirection?F$T?(F$T.seed=F$V[17],F$d._randomPointUnitSphere(F$y,F$T),F$V[17]=F$T.seed):F$d._randomPointUnitSphere(F$y):(F$m[0]=0,F$m[1]=0,F$m[2]=1)},F$y.cloneTo=function(F$J){F$T.prototype.cloneTo.call(this,F$J);var F$y=F$J;F$y.x=this.x,F$y.y=this.y,F$y.z=this.z,F$y.randomDirection=this.randomDirection}}(F$f),function(F$T){function F$R(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,F$R.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}F$G(F$R,"laya.d3.core.particleShuriKen.module.shape.CircleShape",F$T);var F$J=F$R.prototype;F$J._getShapeBoundBox=function(F$J){var F$y=F$J.min.elements;F$y[0]=F$y[2]=-this.radius,F$y[1]=0;var F$T=F$J.max.elements;F$T[0]=F$T[2]=this.radius,F$T[1]=0},F$J._getSpeedBoundBox=function(F$J){var F$y=F$J.min.elements;F$y[0]=F$y[1]=-1,F$y[2]=0;var F$T=F$J.max.elements;F$T[0]=F$T[1]=1,F$T[2]=0},F$J.generatePositionAndDirection=function(F$J,F$y,F$T,F$V){var F$Z=F$J.elements,F$m=F$R._tempPositionPoint.elements;F$T?(F$T.seed=F$V[16],this.emitFromEdge?F$d._randomPointUnitArcCircle(this.arc,F$R._tempPositionPoint,F$T):F$d._randomPointInsideUnitArcCircle(this.arc,F$R._tempPositionPoint,F$T),F$V[16]=F$T.seed):this.emitFromEdge?F$d._randomPointUnitArcCircle(this.arc,F$R._tempPositionPoint):F$d._randomPointInsideUnitArcCircle(this.arc,F$R._tempPositionPoint),F$Z[0]=-F$m[0],F$Z[1]=F$m[1],F$Z[2]=0,F$Ry.scale(F$J,this.radius,F$J),this.randomDirection?F$T?(F$T.seed=F$V[17],F$d._randomPointUnitSphere(F$y,F$T),F$V[17]=F$T.seed):F$d._randomPointUnitSphere(F$y):F$J.cloneTo(F$y)},F$J.cloneTo=function(F$J){F$T.prototype.cloneTo.call(this,F$J);var F$y=F$J;F$y.radius=this.radius,F$y.arc=this.arc,F$y.emitFromEdge=this.emitFromEdge,F$y.randomDirection=this.randomDirection},F$e(F$R,["_tempPositionPoint",function(){return this._tempPositionPoint=new F$my}])}(F$f),function(F$T){function F$M(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,F$M.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}F$G(F$M,"laya.d3.core.particleShuriKen.module.shape.ConeShape",F$T);var F$J=F$M.prototype;F$J._getShapeBoundBox=function(F$J){var F$y=this.radius+this.length*Math.sin(this.angle),F$T=this.length*Math.cos(this.angle),F$V=F$J.min.elements;F$V[0]=F$V[1]=-F$y,F$V[2]=0;var F$Z=F$J.max.elements;F$Z[0]=F$Z[1]=F$y,F$Z[2]=F$T},F$J._getSpeedBoundBox=function(F$J){var F$y=Math.sin(this.angle),F$T=F$J.min.elements;F$T[0]=F$T[1]=-F$y,F$T[2]=0;var F$V=F$J.max.elements;F$V[0]=F$T[1]=F$y,F$V[2]=1},F$J.generatePositionAndDirection=function(F$J,F$y,F$T,F$V){var F$Z,F$m=F$J.elements,F$R=F$y.elements,F$n=F$M._tempPositionPoint.elements,F$K=NaN,F$A=NaN,F$$=Math.cos(this.angle),F$e=Math.sin(this.angle);switch(this.emitType){case 0:F$T?(F$T.seed=F$V[16],F$d._randomPointInsideUnitCircle(F$M._tempPositionPoint,F$T),F$V[16]=F$T.seed):F$d._randomPointInsideUnitCircle(F$M._tempPositionPoint),F$K=F$n[0],F$A=F$n[1],F$m[0]=F$K*this.radius,F$m[1]=F$A*this.radius,F$m[2]=0,this.randomDirection?(F$T?(F$T.seed=F$V[17],F$d._randomPointInsideUnitCircle(F$M._tempDirectionPoint,F$T),F$V[17]=F$T.seed):F$d._randomPointInsideUnitCircle(F$M._tempDirectionPoint),F$Z=F$M._tempDirectionPoint.elements,F$R[0]=F$Z[0]*F$e,F$R[1]=F$Z[1]*F$e):(F$R[0]=F$K*F$e,F$R[1]=F$A*F$e),F$R[2]=F$$;break;case 1:F$T?(F$T.seed=F$V[16],F$d._randomPointUnitCircle(F$M._tempPositionPoint,F$T),F$V[16]=F$T.seed):F$d._randomPointUnitCircle(F$M._tempPositionPoint),F$K=F$n[0],F$A=F$n[1],F$m[0]=F$K*this.radius,F$m[1]=F$A*this.radius,F$m[2]=0,this.randomDirection?(F$T?(F$T.seed=F$V[17],F$d._randomPointInsideUnitCircle(F$M._tempDirectionPoint,F$T),F$V[17]=F$T.seed):F$d._randomPointInsideUnitCircle(F$M._tempDirectionPoint),F$Z=F$M._tempDirectionPoint.elements,F$R[0]=F$Z[0]*F$e,F$R[1]=F$Z[1]*F$e):(F$R[0]=F$K*F$e,F$R[1]=F$A*F$e),F$R[2]=F$$;break;case 2:F$T?(F$T.seed=F$V[16],F$d._randomPointInsideUnitCircle(F$M._tempPositionPoint,F$T)):F$d._randomPointInsideUnitCircle(F$M._tempPositionPoint),F$K=F$n[0],F$A=F$n[1],F$m[0]=F$K*this.radius,F$m[1]=F$A*this.radius,F$R[F$m[2]=0]=F$K*F$e,F$R[1]=F$A*F$e,F$R[2]=F$$,F$Ry.normalize(F$y,F$y),F$T?(F$Ry.scale(F$y,this.length*F$T.getFloat(),F$y),F$V[16]=F$T.seed):F$Ry.scale(F$y,this.length*Math.random(),F$y),F$Ry.add(F$J,F$y,F$J),this.randomDirection&&(F$T?(F$T.seed=F$V[17],F$d._randomPointUnitSphere(F$y,F$T),F$V[17]=F$T.seed):F$d._randomPointUnitSphere(F$y));break;case 3:F$T?(F$T.seed=F$V[16],F$d._randomPointUnitCircle(F$M._tempPositionPoint,F$T)):F$d._randomPointUnitCircle(F$M._tempPositionPoint),F$K=F$n[0],F$A=F$n[1],F$m[0]=F$K*this.radius,F$m[1]=F$A*this.radius,F$R[F$m[2]=0]=F$K*F$e,F$R[1]=F$A*F$e,F$R[2]=F$$,F$Ry.normalize(F$y,F$y),F$T?(F$Ry.scale(F$y,this.length*F$T.getFloat(),F$y),F$V[16]=F$T.seed):F$Ry.scale(F$y,this.length*Math.random(),F$y),F$Ry.add(F$J,F$y,F$J),this.randomDirection&&(F$T?(F$T.seed=F$V[17],F$d._randomPointUnitSphere(F$y,F$T),F$V[17]=F$T.seed):F$d._randomPointUnitSphere(F$y));break;default:throw new Error("ConeShape:emitType is invalid.")}},F$J.cloneTo=function(F$J){F$T.prototype.cloneTo.call(this,F$J);var F$y=F$J;F$y.angle=this.angle,F$y.radius=this.radius,F$y.length=this.length,F$y.emitType=this.emitType,F$y.randomDirection=this.randomDirection},F$e(F$M,["_tempPositionPoint",function(){return this._tempPositionPoint=new F$my},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new F$my}])}(F$f),function(F$T){function F$J(){this.radius=NaN,this.emitFromShell=!1,F$J.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}F$G(F$J,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",F$T);var F$y=F$J.prototype;F$y._getShapeBoundBox=function(F$J){var F$y=F$J.min.elements;F$y[0]=F$y[1]=F$y[2]=-this.radius;var F$T=F$J.max.elements;F$T[0]=F$T[1]=this.radius,F$T[2]=0},F$y._getSpeedBoundBox=function(F$J){var F$y=F$J.min.elements;F$y[0]=F$y[1]=-1,F$y[2]=0;var F$T=F$J.max.elements;F$T[0]=F$T[1]=F$T[2]=1},F$y.generatePositionAndDirection=function(F$J,F$y,F$T,F$V){var F$Z=F$J.elements;F$T?(F$T.seed=F$V[16],this.emitFromShell?F$d._randomPointUnitSphere(F$J,F$T):F$d._randomPointInsideUnitSphere(F$J,F$T),F$V[16]=F$T.seed):this.emitFromShell?F$d._randomPointUnitSphere(F$J):F$d._randomPointInsideUnitSphere(F$J),F$Ry.scale(F$J,this.radius,F$J);var F$m=F$Z[2];F$m<0&&(F$Z[2]=-1*F$m),this.randomDirection?F$T?(F$T.seed=F$V[17],F$d._randomPointUnitSphere(F$y,F$T),F$V[17]=F$T.seed):F$d._randomPointUnitSphere(F$y):F$J.cloneTo(F$y)},F$y.cloneTo=function(F$J){F$T.prototype.cloneTo.call(this,F$J);var F$y=F$J;F$y.radius=this.radius,F$y.emitFromShell=this.emitFromShell,F$y.randomDirection=this.randomDirection}}(F$f),function(F$T){function F$J(){this.radius=NaN,this.emitFromShell=!1,F$J.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}F$G(F$J,"laya.d3.core.particleShuriKen.module.shape.SphereShape",F$T);var F$y=F$J.prototype;F$y._getShapeBoundBox=function(F$J){var F$y=F$J.min.elements;F$y[0]=F$y[1]=F$y[2]=-this.radius;var F$T=F$J.max.elements;F$T[0]=F$T[1]=F$T[2]=this.radius},F$y._getSpeedBoundBox=function(F$J){var F$y=F$J.min.elements;F$y[0]=F$y[1]=F$y[2]=-1;var F$T=F$J.max.elements;F$T[0]=F$T[1]=F$T[2]=1},F$y.generatePositionAndDirection=function(F$J,F$y,F$T,F$V){F$T?(F$T.seed=F$V[16],this.emitFromShell?F$d._randomPointUnitSphere(F$J,F$T):F$d._randomPointInsideUnitSphere(F$J,F$T),F$V[16]=F$T.seed):this.emitFromShell?F$d._randomPointUnitSphere(F$J):F$d._randomPointInsideUnitSphere(F$J),F$Ry.scale(F$J,this.radius,F$J),this.randomDirection?F$T?(F$T.seed=F$V[17],F$d._randomPointUnitSphere(F$y,F$T),F$V[17]=F$T.seed):F$d._randomPointUnitSphere(F$y):F$J.cloneTo(F$y)},F$y.cloneTo=function(F$J){F$T.prototype.cloneTo.call(this,F$J);var F$y=F$J;F$y.radius=this.radius,F$y.emitFromShell=this.emitFromShell,F$y.randomDirection=this.randomDirection}}(F$f),function(F$J){function F$y(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,F$y.__super.call(this)}return F$G(F$y,"laya.d3.core.render.SubMeshRenderElement",F$b),F$y}()),F$qy=function(F$J){function F$s(F$J,F$y,F$T,F$V,F$Z,F$m){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=F$J,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[F$Gy.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[F$Fy.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[F$Fy.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[F$ty.SHADERDEFINE_ALPHATEST]="ALPHATEST";F$s.__super.call(this,F$J,F$y,F$T,null,{}),this._attributeMap=F$V;var F$R;for(F$R in F$Z){var F$n=F$Z[F$R];switch(F$n[1]){case 0:this._renderElementUniformMap[F$R]=F$n[0];break;case 1:this._materialUniformMap[F$R]=F$n[0];break;case 2:this._spriteUniformMap[F$R]=F$n[0];break;case 3:this._cameraUniformMap[F$R]=F$n[0];break;case 4:this._sceneUniformMap[F$R]=F$n[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}F$G(F$s,"laya.d3.shader.ShaderCompile3D",F$L);var F$y=F$s.prototype;return F$y._definesToNameDic=function(F$J,F$y){for(var F$T={},F$V=1,F$Z=0;F$Z<32&&!(F$J<(F$V=1<<F$Z));F$Z++)if(F$J&F$V){var F$m=F$y[F$V];F$m&&(F$T[F$m]="")}return F$T},F$y.withCompile=function(F$J,F$y,F$T,F$V){var F$Z,F$m,F$R;if(F$m=this.sharders[F$J])if(F$R=F$m[F$y]){if(F$Z=F$R[F$T])return F$Z}else F$R=F$m[F$y]=[];else F$R=(F$m=this.sharders[F$J]=[])[F$y]=[];var F$n,F$K=this._definesToNameDic(F$J,F$s._globalInt2name),F$A=this._definesToNameDic(F$y,this._spriteInt2name),F$$=this._definesToNameDic(F$T,this._materialInt2name),F$e={},F$M="";if(F$K)for(F$n in F$K)F$M+="#define "+F$n+"\n",F$e[F$n]=!0;if(F$A)for(F$n in F$A)F$M+="#define "+F$n+"\n",F$e[F$n]=!0;if(F$$)for(F$n in F$$)F$M+="#define "+F$n+"\n",F$e[F$n]=!0;var F$G=F$ky.nameKey.getName(this._name)+" compile ("+F$J+","+F$y+","+F$T+")",F$B=this._VS.toscript(F$e,[]),F$o=this._PS.toscript(F$e,[]);F$i.now();if(F$Z=F$ky.create(F$M+F$B.join("\n"),F$M+F$o.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,F$V,F$G),F$R[F$T]=F$Z,laya.d3.shader.ShaderCompile3D.debugMode)F$i.now();return F$Z},F$y.precompileShaderWithShaderDefine=function(F$J,F$y,F$T){this.withCompile(F$J,F$y,F$T,!0)},F$y.addMaterialDefines=function(F$J){var F$y=F$J.defines;for(var F$T in F$y){var F$V=F$y[F$T],F$Z=parseInt(F$T);this._materialInt2name[F$Z]=F$V,this._materialName2Int[F$V]=F$Z}},F$y.addSpriteDefines=function(F$J){var F$y=F$J.defines;for(var F$T in F$y){var F$V=F$y[F$T],F$Z=parseInt(F$T);this._spriteInt2name[F$Z]=F$V,this._spriteName2Int[F$V]=F$Z}},F$y.getMaterialDefineByName=function(F$J){return this._materialName2Int[F$J]},F$y.registerMaterialDefine=function(F$J){var F$y=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[F$y]=F$J,this._materialName2Int[F$J]=F$y},F$y.registerSpriteDefine=function(F$J){var F$y=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[F$y]=F$J,this._spriteName2Int[F$J]=F$y},F$s._globalRegDefine=function(F$J,F$y){F$s._globalInt2name[F$y]=F$J},F$s.add=function(F$J,F$y,F$T,F$V,F$Z){return laya.d3.shader.ShaderCompile3D._preCompileShader[F$J]=new F$s(F$J,F$y,F$T,F$V,F$Z,F$L.includes)},F$s.get=function(F$J){return laya.d3.shader.ShaderCompile3D._preCompileShader[F$ky.nameKey.getID(F$J)]},F$s._preCompileShader={},F$s._globalInt2name=[],F$s.debugMode=!1,F$s.SHADERDEFINE_HIGHPRECISION=1,F$s.SHADERDEFINE_FOG=4,F$s.SHADERDEFINE_DIRECTIONLIGHT=8,F$s.SHADERDEFINE_POINTLIGHT=16,F$s.SHADERDEFINE_SPOTLIGHT=32,F$s.SHADERDEFINE_UV0=64,F$s.SHADERDEFINE_COLOR=128,F$s.SHADERDEFINE_UV1=256,F$s.SAHDERDEFINE_DEPTHFOG=131072,F$s}(),F$ry=function(F$J){function F$B(){F$B.__super.call(this)}F$G(F$B,"laya.d3.graphics.MeshSprite3DStaticBatchManager",F$VJ);var F$y=F$B.prototype;return F$y._getStaticBatch=function(F$J,F$y,F$T,F$V){var F$Z,F$m;return F$m=F$J?F$J.id.toString()+F$T.id.toString()+F$y.id.toString()+F$V.toString():F$T.id.toString()+F$y.id.toString()+F$V.toString(),this._staticBatches[F$m]?F$Z=this._staticBatches[F$m]:this._staticBatches[F$m]=F$Z=new F$Dy(F$m,this,F$J,F$y,F$T),F$Z},F$y._initStaticBatchs=function(F$J){var F$y,F$T;this._initBatchRenderElements.sort(F$B._sortPrepareStaticBatch);for(var F$V,F$Z=!1,F$m=0,F$R=0,F$n=this._initBatchRenderElements.length;F$R<F$n;F$R++){var F$K,F$A=this._initBatchRenderElements[F$R],F$$=F$A.renderObj._getVertexBuffer(0);F$A._sprite3D;if(F$T===F$$.vertexDeclaration&&F$y===F$A._material)if(F$Z)F$V._addCombineBatchRenderObjTest(F$A)?(F$K=F$A._staticBatch)!==F$V&&(F$K&&F$K._deleteCombineBatchRenderObj(F$A),F$V._addCombineBatchRenderObj(F$A)):(F$Z=!1,F$m++);else{var F$e=this._initBatchRenderElements[F$R-1],F$M=F$e.renderObj,F$G=F$A.renderObj;F$Z=!(65535<F$M._getVertexBuffer().vertexCount+F$G._getVertexBuffer().vertexCount)&&(F$V=this._getStaticBatch(F$J,F$T,F$y,F$m),(F$K=F$e._staticBatch)!==F$V&&(F$K&&F$K._deleteCombineBatchRenderObj(F$e),F$V._addCombineBatchRenderObj(F$e)),(F$K=F$A._staticBatch)!==F$V&&(F$K&&F$K._deleteCombineBatchRenderObj(F$A),F$V._addCombineBatchRenderObj(F$A)),!0)}else F$Z=!1,F$m=0;F$y=F$A._material,F$T=F$$.vertexDeclaration}},F$B._sortPrepareStaticBatch=function(F$J,F$y){var F$T=F$J._render,F$V=F$y._render,F$Z=F$T.lightmapIndex-F$V.lightmapIndex;if(0!=F$Z)return F$Z;var F$m=F$T.receiveShadow-F$V.receiveShadow;if(0!=F$m)return F$m;var F$R=F$J._mainSortID-F$y._mainSortID;return 0==F$R?F$J.renderObj.triangleCount-F$y.renderObj.triangleCount:F$R},F$B}(),F$Dy=function(F$J){function F$m(F$J,F$y,F$T,F$V,F$Z){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,F$m.__super.call(this,F$J,F$y,F$T),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=F$V,this._material=F$Z}F$G(F$m,"laya.d3.graphics.SubMeshStaticBatch",F$ZJ);var F$y=F$m.prototype;return F$y._compareBatchRenderElement=function(F$J,F$y){return F$J._batchIndexStart>F$y._batchIndexStart},F$y._addCombineBatchRenderObjTest=function(F$J){var F$y=F$J.renderObj._vertexCount;return!(65535<(0<F$y?this._currentCombineVertexCount+F$y:this._currentCombineVertexCount+F$J.renderObj._getVertexBuffer().vertexCount))},F$y._addCombineBatchRenderObj=function(F$J){var F$y=F$J.renderObj,F$T=F$y._vertexCount;this._initBatchRenderElements.push(F$J),F$J._staticBatch=this,0<F$T?(this._currentCombineIndexCount+=F$y._indexCount,this._currentCombineVertexCount+=F$T):(this._currentCombineIndexCount=this._currentCombineIndexCount+F$y._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+F$y._getVertexBuffer().vertexCount),this._needFinishCombine=!0},F$y._deleteCombineBatchRenderObj=function(F$J){var F$y=F$J.renderObj,F$T=this._initBatchRenderElements.indexOf(F$J);if(-1!==F$T){this._initBatchRenderElements.splice(F$T,1),F$J._staticBatch=null;var F$V=F$y._vertexCount;0<F$V?(this._currentCombineIndexCount=this._currentCombineIndexCount-F$y._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-F$V):(this._currentCombineIndexCount=this._currentCombineIndexCount-F$y._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-F$y._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},F$y._finishInit=function(){if(this._needFinishCombine){var F$J=0,F$y=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var F$T=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),F$V=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=F$fy.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=F$Sy.create("ushort",this._currentCombineIndexCount,35044);for(var F$Z=0,F$m=this._initBatchRenderElements.length;F$Z<F$m;F$Z++){var F$R=this._initBatchRenderElements[F$Z],F$n=F$R.renderObj,F$K=F$n._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,F$R._sprite3D),F$A=F$n.getIndices(),F$$=F$R._sprite3D.transform._isFrontFaceInvert,F$e=F$J/(this._vertexDeclaration.vertexStride/4)-F$n._vertexStart,F$M=F$y,F$G=F$M+F$A.length;F$R._batchIndexStart=F$M,F$R._batchIndexEnd=F$G,F$V.set(F$A,F$y);var F$B=0;if(F$$)for(F$B=F$M;F$B<F$G;F$B+=3){F$V[F$B]=F$e+F$V[F$B];var F$o=F$V[F$B+1],F$s=F$V[F$B+2];F$V[F$B+1]=F$e+F$s,F$V[F$B+2]=F$e+F$o}else for(F$B=F$M;F$B<F$G;F$B+=3)F$V[F$B]=F$e+F$V[F$B],F$V[F$B+1]=F$e+F$V[F$B+1],F$V[F$B+2]=F$e+F$V[F$B+2];F$y+=F$A.length,F$T.set(F$K,F$J),F$J+=F$K.length}this._vertexBuffer.setData(F$T),this._indexBuffer.setData(F$V),this._needFinishCombine=!1}},F$y._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new F$ay)},F$y._getRenderElement=function(F$J,F$y,F$T){for(var F$V,F$Z,F$m=this._batchRenderElements.length,F$R=!0,F$n=0;F$n<F$m;F$n++){var F$K,F$A,F$$=(F$Z=this._batchRenderElements[F$n])._sprite3D._render;if(0!==F$n&&(F$R=(F$K=(F$V=this._batchRenderElements[F$n-1])._sprite3D._render).lightmapIndex!==F$$.lightmapIndex||F$K.receiveShadow!==F$$.receiveShadow||F$V._batchIndexEnd!==F$Z._batchIndexStart),F$R){(F$A=this._getCombineRenderElementFromPool()).renderObj=this,F$A._material=this._material,F$A._batchIndexStart=F$Z._batchIndexStart,F$A._batchIndexEnd=F$Z._batchIndexEnd;var F$e=F$$.lightmapIndex,F$M=F$e+1,F$G=this._batchOwnerIndices[F$M];F$G||(F$G=this._batchOwnerIndices[F$M]=[]);var F$B,F$o=F$G[F$Z._render.receiveShadow?1:0];void 0===F$o?(F$G[F$$.receiveShadow?1:0]=this._batchOwners.length,(F$B=new F$hy(null,"StaticBatchMeshSprite3D"))._scene=F$y,F$B._transform=this._rootOwner?this._rootOwner._transform:null,F$B._render.lightmapIndex=F$e,F$B._render.receiveShadow=F$Z._render.receiveShadow,this._batchOwners.push(F$B)):F$B=this._batchOwners[F$o],F$B._render._renderUpdate(F$T),F$A._sprite3D=F$B,F$J.push(F$A)}else F$A._batchIndexEnd=F$Z._batchIndexEnd}},F$y._beforeRender=function(F$J){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$y._render=function(F$J){var F$y=F$J.renderElement,F$T=F$y._batchIndexStart,F$V=F$y._batchIndexEnd-F$T;F$v.mainContext.drawElements(4,F$V,5123,2*F$T),F$q.drawCall++,F$q.trianglesFaces+=F$V/3},F$y.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},F$y._getVertexBuffer=function(F$J){return void 0===F$J&&(F$J=0),this._vertexBuffer},F$m}(),F$_y=function(F$J){function F$y(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,F$y.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}F$G(F$y,"laya.d3.core.ComponentNode",F$A);var F$T=F$y.prototype;return F$T.addComponent=function(F$J){var F$y,F$T=this._componentsMap.indexOf(F$J);if(-1===F$T)F$y=[],this._componentsMap.push(F$J),this._typeComponentsIndices.push(F$y);else if(F$y=this._typeComponentsIndices[F$T],this._components[F$y[0]].isSingleton)throw new Error("无法单实例创建"+F$J+"组件，"+F$J+"组件已存在！");var F$V=F$Z.getInstance(F$J);return F$y.push(this._components.length),this._components.push(F$V),F$V instanceof laya.d3.component.Script&&this._scripts.push(F$V),F$V._initialize(this),F$V},F$T._removeComponent=function(F$J,F$y){var F$T=this._typeComponentsIndices[F$J],F$V=F$T[F$y],F$Z=this._components[F$V];this._components.splice(F$V,1),F$Z instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(F$Z),1),F$T.splice(F$y,1),0===F$T.length&&(this._typeComponentsIndices.splice(F$J,1),this._componentsMap.splice(F$J,1));for(var F$m=0,F$R=this._componentsMap.length;F$m<F$R;F$m++)for(var F$n=(F$T=this._typeComponentsIndices[F$m]).length-1;0<=F$n;F$n--){var F$K=F$T[F$n];if(!(F$V<F$K))break;F$T[F$n]=--F$K}F$Z._destroy()},F$T.getComponentByType=function(F$J,F$y){void 0===F$y&&(F$y=0);var F$T=this._componentsMap.indexOf(F$J);return-1===F$T?null:this._components[this._typeComponentsIndices[F$T][F$y]]},F$T.getComponentsByType=function(F$J,F$y){var F$T=this._componentsMap.indexOf(F$J);if(-1!==F$T){var F$V=this._typeComponentsIndices[F$T],F$Z=F$V.length;F$y.length=F$Z;for(var F$m=0;F$m<F$Z;F$m++)F$y[F$m]=this._components[F$V[F$m]]}else F$y.length=0},F$T.getComponentByIndex=function(F$J){return this._components[F$J]},F$T.removeComponentByType=function(F$J,F$y){void 0===F$y&&(F$y=0);var F$T=this._componentsMap.indexOf(F$J);-1!==F$T&&this._removeComponent(F$T,F$y)},F$T.removeComponentsByType=function(F$J){var F$y=this._componentsMap.indexOf(F$J);if(-1!==F$y)for(var F$T=this._typeComponentsIndices[F$y],F$V=0,F$Z=F$T.length;F$V<F$Z;F$T.length<F$Z?F$Z--:F$V++)this._removeComponent(F$y,F$V)},F$T.removeAllComponent=function(){for(var F$J=0,F$y=this._componentsMap.length;F$J<F$y;this._componentsMap.length<F$y?F$y--:F$J++)this.removeComponentsByType(this._componentsMap[F$J])},F$T._updateComponents=function(F$J){for(var F$y=0,F$T=this._components.length;F$y<F$T;F$y++){var F$V=this._components[F$y];!F$V.started&&(F$V._start(F$J),F$V.started=!0),F$V.enable&&F$V._update(F$J)}},F$T._lateUpdateComponents=function(F$J){for(var F$y=0;F$y<this._components.length;F$y++){var F$T=this._components[F$y];!F$T.started&&(F$T._start(F$J),F$T.started=!0),F$T.enable&&F$T._lateUpdate(F$J)}},F$T._preRenderUpdateComponents=function(F$J){for(var F$y=0;F$y<this._components.length;F$y++){var F$T=this._components[F$y];!F$T.started&&(F$T._start(F$J),F$T.started=!0),F$T.enable&&F$T._preRenderUpdate(F$J)}},F$T._postRenderUpdateComponents=function(F$J){for(var F$y=0;F$y<this._components.length;F$y++){var F$T=this._components[F$y];!F$T.started&&(F$T._start(F$J),F$T.started=!0),F$T.enable&&F$T._postRenderUpdate(F$J)}},F$y}(),F$ty=function(F$V){function F$J(){F$J.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new F$My,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new F$ny(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}F$G(F$J,"laya.d3.core.material.BaseMaterial",F$V);var F$y=F$J.prototype;return F$P.imps(F$y,{"laya.d3.core.IClone":!0}),F$y._addShaderDefine=function(F$J){this._shaderDefineValue|=F$J},F$y._removeShaderDefine=function(F$J){this._shaderDefineValue&=~F$J},F$y._addDisablePublicShaderDefine=function(F$J){this._disablePublicShaderDefine|=F$J},F$y._removeDisablePublicShaderDefine=function(F$J){this._disablePublicShaderDefine&=~F$J},F$y._setBuffer=function(F$J,F$y){this._shaderValues.setValue(F$J,F$y),this._values[F$J]=F$y},F$y._getBuffer=function(F$J){return this._values[F$J]},F$y._setMatrix4x4=function(F$J,F$y){this._shaderValues.setValue(F$J,F$y?F$y.elements:null),this._values[F$J]=F$y},F$y._getMatrix4x4=function(F$J){return this._values[F$J]},F$y._setInt=function(F$J,F$y){this._shaderValues.setValue(F$J,F$y),this._values[F$J]=F$y},F$y._getInt=function(F$J){return this._values[F$J]},F$y._setNumber=function(F$J,F$y){this._shaderValues.setValue(F$J,F$y),this._values[F$J]=F$y},F$y._getNumber=function(F$J){return this._values[F$J]},F$y._setBool=function(F$J,F$y){this._shaderValues.setValue(F$J,F$y),this._values[F$J]=F$y},F$y._getBool=function(F$J){return this._values[F$J]},F$y._setVector2=function(F$J,F$y){this._shaderValues.setValue(F$J,F$y?F$y.elements:null),this._values[F$J]=F$y},F$y._getVector2=function(F$J){return this._values[F$J]},F$y._setColor=function(F$J,F$y){this._shaderValues.setValue(F$J,F$y?F$y.elements:null),this._values[F$J]=F$y},F$y._getColor=function(F$J){return this._values[F$J]},F$y._setTexture=function(F$J,F$y){var F$T=this._values[F$J];this._values[F$J]=F$y,this._shaderValues.setValue(F$J,F$y),0<this.referenceCount&&(F$T&&F$T._removeReference(),F$y&&F$y._addReference())},F$y._getTexture=function(F$J){return this._values[F$J]},F$y._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},F$y._getShader=function(F$J,F$y,F$T){var F$V=(F$J|F$y)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(F$V,F$T,this._shaderDefineValue),this._shader},F$y._setRenderStateBlendDepth=function(){var F$J=F$v.mainContext;switch(F$Q.setDepthMask(F$J,this.depthWrite),0===this.depthTest?F$Q.setDepthTest(F$J,!1):(F$Q.setDepthTest(F$J,!0),F$Q.setDepthFunc(F$J,this.depthTest)),this.blend){case 0:F$Q.setBlend(F$J,!1);break;case 1:F$Q.setBlend(F$J,!0),F$Q.setBlendFunc(F$J,this.srcBlend,this.dstBlend);break;case 2:F$Q.setBlend(F$J,!0)}},F$y._setRenderStateFrontFace=function(F$J,F$y){var F$T=F$v.mainContext,F$V=0;switch(this.cull){case 0:F$Q.setCullFace(F$T,!1);break;case 1:F$Q.setCullFace(F$T,!0),F$V=F$J?F$y&&F$y._isFrontFaceInvert?2305:2304:F$y&&F$y._isFrontFaceInvert?2304:2305,F$Q.setFrontFace(F$T,F$V);break;case 2:F$Q.setCullFace(F$T,!0),F$V=F$J?F$y&&F$y._isFrontFaceInvert?2304:2305:F$y&&F$y._isFrontFaceInvert?2305:2304,F$Q.setFrontFace(F$T,F$V)}},F$y.onAsynLoaded=function(F$J,F$y,F$T){var F$V=F$y[0],F$Z=F$y[1];switch(F$V.version){case"LAYAMATERIAL:01":var F$m=0,F$R=0,F$n=F$V.props;for(var F$K in F$n)switch(F$K){case"vectors":var F$A=F$n[F$K];for(F$m=0,F$R=F$A.length;F$m<F$R;F$m++){var F$$=F$A[F$m],F$e=F$$.value;switch(F$e.length){case 2:this[F$$.name]=new F$my(F$e[0],F$e[1]);break;case 3:this[F$$.name]=new F$Ry(F$e[0],F$e[1],F$e[2]);break;case 4:this[F$$.name]=new F$ny(F$e[0],F$e[1],F$e[2],F$e[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var F$M=F$n[F$K];for(F$m=0,F$R=F$M.length;F$m<F$R;F$m++){var F$G=F$M[F$m],F$B=F$G.path;F$B&&(this[F$G.name]=F$E.getRes(F$Z[F$B]))}break;case"defines":var F$o=F$n[F$K];for(F$m=0,F$R=F$o.length;F$m<F$R;F$m++){var F$s=this._shaderCompile.getMaterialDefineByName(F$o[F$m]);this._addShaderDefine(F$s)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[F$K]=F$n[F$K];break;case"renderQueue":switch(F$n[F$K]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[F$K]=F$n[F$K]}break;case"LAYAMATERIAL:02":for(F$K in F$n=F$V.props)switch(F$K){case"vectors":for(F$m=0,F$R=(F$A=F$n[F$K]).length;F$m<F$R;F$m++)switch((F$e=(F$$=F$A[F$m]).value).length){case 2:this[F$$.name]=new F$my(F$e[0],F$e[1]);break;case 3:this[F$$.name]=new F$Ry(F$e[0],F$e[1],F$e[2]);break;case 4:this[F$$.name]=new F$ny(F$e[0],F$e[1],F$e[2],F$e[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(F$m=0,F$R=(F$M=F$n[F$K]).length;F$m<F$R;F$m++)(F$B=(F$G=F$M[F$m]).path)&&(this[F$G.name]=F$E.getRes(F$Z[F$B]));break;case"defines":for(F$m=0,F$R=(F$o=F$n[F$K]).length;F$m<F$R;F$m++)F$s=this._shaderCompile.getMaterialDefineByName(F$o[F$m]),this._addShaderDefine(F$s);break;default:this[F$K]=F$n[F$K]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},F$y._addReference=function(){F$V.prototype._addReference.call(this);for(var F$J=0,F$y=this._values.length;F$J<F$y;F$J++){var F$T=this._values[F$J];F$T&&F$T instanceof laya.d3.resource.BaseTexture&&F$T._addReference()}},F$y._removeReference=function(){F$V.prototype._removeReference.call(this);for(var F$J=0,F$y=this._values.length;F$J<F$y;F$J++){var F$T=this._values[F$J];F$T&&F$T instanceof laya.d3.resource.BaseTexture&&F$T._removeReference()}},F$y.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},F$y.setShaderName=function(F$J){var F$y=F$ky.nameKey.getID(F$J);if(-1===F$y)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=F$qy._preCompileShader[F$y]},F$y.cloneTo=function(F$J){var F$y=F$J;F$y.name=this.name,F$y.cull=this.cull,F$y.blend=this.blend,F$y.srcBlend=this.srcBlend,F$y.dstBlend=this.dstBlend,F$y.srcBlendRGB=this.srcBlendRGB,F$y.dstBlendRGB=this.dstBlendRGB,F$y.srcBlendAlpha=this.srcBlendAlpha,F$y.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(F$y.blendConstColor),F$y.blendEquation=this.blendEquation,F$y.blendEquationRGB=this.blendEquationRGB,F$y.blendEquationAlpha=this.blendEquationAlpha,F$y.depthTest=this.depthTest,F$y.depthWrite=this.depthWrite,F$y.renderQueue=this.renderQueue,F$y._shader=this._shader,F$y._disablePublicShaderDefine=this._disablePublicShaderDefine,F$y._shaderDefineValue=this._shaderDefineValue;var F$T,F$V=0,F$Z=F$y._shaderValues;F$y._shaderValues.data.length=this._shaderValues.data.length;var F$m=this._values.length,F$R=F$y._values;for(F$V=0,F$T=F$R.length=F$m;F$V<F$T;F$V++){var F$n=this._values[F$V];if(F$n)if("number"==typeof F$n)F$R[F$V]=F$n,F$Z.data[F$V]=F$n;else if("number"==typeof F$n&&Math.floor(F$n)==F$n)F$R[F$V]=F$n,F$Z.data[F$V]=F$n;else if("boolean"==typeof F$n)F$R[F$V]=F$n,F$Z.data[F$V]=F$n;else if(F$n instanceof laya.d3.math.Vector2){var F$K=F$R[F$V]||(F$R[F$V]=new F$my);F$n.cloneTo(F$K),F$Z.data[F$V]=F$K.elements}else if(F$n instanceof laya.d3.math.Vector3){var F$A=F$R[F$V]||(F$R[F$V]=new F$Ry);F$n.cloneTo(F$A),F$Z.data[F$V]=F$A.elements}else if(F$n instanceof laya.d3.math.Vector4){var F$$=F$R[F$V]||(F$R[F$V]=new F$ny);F$n.cloneTo(F$$),F$Z.data[F$V]=F$$.elements}else if(F$n instanceof laya.d3.math.Matrix4x4){var F$e=F$R[F$V]||(F$R[F$V]=new F$Jy);F$n.cloneTo(F$e),F$Z.data[F$V]=F$e.elements}else F$n instanceof laya.d3.resource.BaseTexture&&(F$R[F$V]=F$n,F$Z.data[F$V]=F$n)}},F$y.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$B(0,F$y,"alphaTestValue",function(){return this._getNumber(0)},function(F$J){this._setNumber(0,F$J)}),F$B(0,F$y,"alphaTest",function(){return this._alphaTest},function(F$J){(this._alphaTest=F$J)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),F$J.__init__=function(){F$J.SHADERDEFINE_ALPHATEST=F$J.shaderDefines.registerDefine("ALPHATEST")},F$J.RENDERQUEUE_OPAQUE=2e3,F$J.RENDERQUEUE_ALPHATEST=2450,F$J.RENDERQUEUE_TRANSPARENT=3e3,F$J.CULL_NONE=0,F$J.CULL_FRONT=1,F$J.CULL_BACK=2,F$J.BLEND_DISABLE=0,F$J.BLEND_ENABLE_ALL=1,F$J.BLEND_ENABLE_SEPERATE=2,F$J.BLENDPARAM_ZERO=0,F$J.BLENDPARAM_ONE=1,F$J.BLENDPARAM_SRC_COLOR=768,F$J.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,F$J.BLENDPARAM_DST_COLOR=774,F$J.BLENDPARAM_ONE_MINUS_DST_COLOR=775,F$J.BLENDPARAM_SRC_ALPHA=770,F$J.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,F$J.BLENDPARAM_DST_ALPHA=772,F$J.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,F$J.BLENDPARAM_SRC_ALPHA_SATURATE=776,F$J.BLENDEQUATION_ADD=0,F$J.BLENDEQUATION_SUBTRACT=1,F$J.BLENDEQUATION_REVERSE_SUBTRACT=2,F$J.DEPTHTEST_OFF=0,F$J.DEPTHTEST_NEVER=512,F$J.DEPTHTEST_LESS=513,F$J.DEPTHTEST_EQUAL=514,F$J.DEPTHTEST_LEQUAL=515,F$J.DEPTHTEST_GREATER=516,F$J.DEPTHTEST_NOTEQUAL=517,F$J.DEPTHTEST_GEQUAL=518,F$J.DEPTHTEST_ALWAYS=519,F$J.SHADERDEFINE_ALPHATEST=1,F$J.ALPHATESTVALUE=0,F$e(F$J,["shaderDefines",function(){return this.shaderDefines=new F$$y}]),F$J}(F$s),F$vy=function(F$J){function F$y(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,F$y.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}F$G(F$y,"laya.d3.resource.BaseTexture",F$s);var F$T=F$y.prototype;return F$B(0,F$T,"width",function(){return this._width}),F$B(0,F$T,"repeat",function(){return this._repeat},function(F$J){if(this._repeat!==F$J&&(this._repeat=F$J,this._source)){var F$y=F$v.mainContext;F$Q.bindTexture(F$y,this._type,this._source),F$H.isPOT(this._width,this._height)&&this._repeat?(F$y.texParameteri(this._type,10242,10497),F$y.texParameteri(this._type,10243,10497)):(F$y.texParameteri(this._type,10242,33071),F$y.texParameteri(this._type,10243,33071))}}),F$B(0,F$T,"height",function(){return this._height}),F$B(0,F$T,"magFifter",function(){return this._magFifter},function(F$J){(this._magFifter=F$J)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(F$J)}),F$B(0,F$T,"wrapModeV",function(){return this._wrapModeV}),F$B(0,F$T,"size",function(){return this._size}),F$B(0,F$T,"wrapModeU",function(){return this._wrapModeU}),F$B(0,F$T,"mipmap",function(){return this._mipmap},function(F$J){this._mipmap=F$J,this._mipmap!=F$J&&this._conchTexture&&this._conchTexture.setMipMap(F$J)}),F$B(0,F$T,"minFifter",function(){return this._minFifter},function(F$J){this._minFifter=F$J,this._minFifter!=F$J&&this._conchTexture&&this._conchTexture.setMinFifter(F$J)}),F$B(0,F$T,"format",function(){return this._format}),F$B(0,F$T,"source",function(){return this.activeResource(),this._source}),F$B(0,F$T,"defaulteTexture",function(){return F$Uy.grayTexture}),F$y.WARPMODE_REPEAT=0,F$y.WARPMODE_CLAMP=1,F$y}(),F$Qy=function(F$J){function F$y(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,F$y.__super.call(this),this._boundingBoxCorners=F$V(8,null)}F$G(F$y,"laya.d3.resource.models.BaseMesh",F$s);var F$T=F$y.prototype;return F$T._getPositions=function(){throw new Error("未Override,请重载该属性！")},F$T._generateBoundingObject=function(){this._boundingSphere=new F$NJ(new F$Ry,0),F$NJ.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new F$jJ(new F$Ry,new F$Ry),F$jJ.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},F$T.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},F$T.getRenderElement=function(F$J){throw new Error("未Override,请重载该属性！")},F$B(0,F$T,"subMeshCount",function(){return this._subMeshCount}),F$B(0,F$T,"boundingBox",function(){return this._boundingBox}),F$B(0,F$T,"boundingBoxCorners",function(){return this._boundingBoxCorners}),F$B(0,F$T,"boundingSphere",function(){return this._boundingSphere}),F$y}(),F$iy=(function(F$J){function F$y(){F$y.__super.call(this)}F$G(F$y,"laya.d3.component.Script",F$Ly);var F$T=F$y.prototype;F$T.onTriggerEnter=function(F$J){},F$T.onTriggerExit=function(F$J){},F$T.onTriggerStay=function(F$J){},F$B(0,F$T,"isSingleton",function(){return F$y._isSingleton}),F$y._isSingleton=!1}(),function(F$J){function F$y(F$J){this._owner=null,this._sharedMesh=null,F$y.__super.call(this),this._owner=F$J}F$G(F$y,"laya.d3.core.MeshFilter",F$J);var F$T=F$y.prototype;return F$T._sharedMeshLoaded=function(){this.event("loaded")},F$T._destroy=function(){F$J.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},F$B(0,F$T,"sharedMesh",function(){return this._sharedMesh},function(F$J){var F$y=this._sharedMesh;F$y&&F$y._removeReference(),(this._sharedMesh=F$J)._addReference(),this.event("meshchanged",[this,F$y,F$J]),F$J.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),F$B(0,F$T,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),F$B(0,F$T,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),F$B(0,F$T,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),F$B(0,F$T,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),F$y}(F$Hy)),F$cy=function(F$J){function F$y(F$J){F$y.__super.call(this,F$J),F$J.meshFilter.on("meshchanged",this,this._onMeshChanged)}F$G(F$y,"laya.d3.core.MeshRender",F$Py);var F$T=F$y.prototype;return F$T._onMeshChanged=function(F$J,F$y,F$T){F$T.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:F$T.once("loaded",this,this._onMeshLoaed)},F$T._onMeshLoaed=function(F$J,F$y){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},F$T._calculateBoundingSphereByInitSphere=function(F$J){var F$y=NaN,F$T=this._owner.transform,F$V=F$T.scale.elements,F$Z=Math.abs(F$V[0]),F$m=Math.abs(F$V[1]),F$R=Math.abs(F$V[2]);F$y=F$m<=F$Z&&F$R<=F$Z?F$Z:F$R<=F$m?F$m:F$R,F$Ry.transformCoordinate(F$J.center,F$T.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=F$J.radius*F$y},F$T._calculateBoundBoxByInitCorners=function(F$J){for(var F$y=this._owner.transform.worldMatrix,F$T=0;F$T<8;F$T++)F$Ry.transformCoordinate(F$J[F$T],F$y,F$Py._tempBoundBoxCorners[F$T]);F$jJ.createfromPoints(F$Py._tempBoundBoxCorners,this._boundingBox)},F$T._calculateBoundingSphere=function(){var F$J=this._owner.meshFilter.sharedMesh;null==F$J||null==F$J.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(F$J.boundingSphere)},F$T._calculateBoundingBox=function(){var F$J=this._owner.meshFilter.sharedMesh;null==F$J||null==F$J.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(F$J.boundingBoxCorners)},F$T._renderUpdate=function(F$J){var F$y=this._owner.transform;if(F$y){this._setShaderValueMatrix4x4(0,F$y.worldMatrix);var F$T=this._owner.getProjectionViewWorldMatrix(F$J);this._setShaderValueMatrix4x4(1,F$T)}else this._setShaderValueMatrix4x4(0,F$Jy.DEFAULT),this._setShaderValueMatrix4x4(1,F$J);return F$Ey.debugMode&&this._renderRenderableBoundBox(),!0},F$y}(),F$uy=function(F$y){function F$V(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,F$V.__super.call(this),this._renderState=new F$p,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new F$My,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new F$yJ,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new F$Ry(.7,.7,.7),this.ambientColor=new F$Ry(.212,.227,.259),F$v.shaderHighPrecision&&this.addShaderDefine(F$qy.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}F$G(F$V,"laya.d3.core.scene.Scene",F$y);var F$J=F$V.prototype;return F$P.imps(F$J,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),F$J._setUrl=function(F$J){this._url=F$J},F$J._getGroup=function(){return this._group},F$J._setGroup=function(F$J){this._group=F$J},F$J._display=function(){F$P.stage._scenes.push(this),F$P.stage._scenes.sort(F$V._sortScenes);for(var F$J=0,F$y=this._childs.length;F$J<F$y;F$J++){var F$T=this._childs[F$J];F$T.active&&F$T._activeHierarchy()}},F$J._unDisplay=function(){var F$J=F$P.stage._scenes;F$J.splice(F$J.indexOf(this),1);for(var F$y=0,F$T=this._childs.length;F$y<F$T;F$y++){var F$V=this._childs[F$y];F$V.active&&F$V._inActiveHierarchy()}},F$J._addChild3D=function(F$J){F$J.transform._onWorldTransform(),F$J._setBelongScene(this),this.displayedInStage&&F$J.active&&F$J._activeHierarchy()},F$J._removeChild3D=function(F$J){F$J.transform.parent=null,this.displayedInStage&&F$J.active&&F$J._inActiveHierarchy(),F$J._setUnBelongScene()},F$J.initOctree=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$Z&&(F$Z=6),this.treeSize=new F$Ry(F$J,F$y,F$T),this.treeLevel=F$Z,this.treeRoot=new F$j(this,0),this.treeRoot.init(F$V,this.treeSize)},F$J._prepareUpdateToRenderState=function(F$J,F$y){F$y.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,F$y.scene=this},F$J._prepareSceneToRender=function(F$J){var F$y=this._lights.length;if(0<F$y)for(var F$T=0,F$V=0;F$V<F$y&&!(this._lights[F$V]._prepareToScene(F$J)&&++F$T>=this._enableLightCount);F$V++);},F$J._updateChilds=function(F$J){for(var F$y=0,F$T=this._childs.length;F$y<F$T;++F$y)this._childs[F$y]._update(F$J)},F$J._preRenderScene=function(F$J,F$y,F$T){var F$V,F$Z=F$y._viewMatrix,F$m=F$y._projectionMatrix,F$R=F$y._projectionViewMatrix,F$n=0,F$K=F$y.camera;for(F$K.useOcclusionCulling?this.treeRoot?F$TJ.renderObjectCullingOctree(F$T,this,F$K,F$Z,F$m,F$R):F$TJ.renderObjectCulling(F$T,this,F$K,F$Z,F$m,F$R):F$TJ.renderObjectCullingNoBoundFrustum(this,F$K,F$Z,F$m,F$R),F$n=0,F$V=this._quenes.length;F$n<F$V;F$n++)this._quenes[F$n]&&this._quenes[F$n]._preRender(F$y)},F$J._clear=function(F$J,F$y){var F$T=F$y._viewport,F$V=F$y.camera,F$Z=F$T.x,F$m=F$V.renderTargetSize.height-F$T.y-F$T.height,F$R=F$T.width,F$n=F$T.height;F$J.viewport(F$Z,F$m,F$R,F$n);var F$K=256,F$A=F$V.renderTarget;switch(F$V.clearFlag){case 0:var F$$=F$V.clearColor;if(F$$){F$J.enable(3089),F$J.scissor(F$Z,F$m,F$R,F$n);var F$e=F$$.elements;F$J.clearColor(F$e[0],F$e[1],F$e[2],F$e[3]),F$K|=16384}if(F$A)switch(F$$||(F$K=16384),F$A.depthStencilFormat){case 33189:F$K|=256;break;case 36168:F$K|=1024;break;case 34041:F$K|=256,F$K|=1024}F$J.clear(F$K),F$$&&F$J.disable(3089);break;case 1:case 2:if(F$A)switch(F$K=16384,F$A.depthStencilFormat){case 33189:F$K|=256;break;case 36168:F$K|=1024;break;case 34041:F$K|=256,F$K|=1024}F$J.clear(F$K);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},F$J._renderScene=function(F$J,F$y){var F$T,F$V,F$Z=F$y.camera,F$m=0;for(F$m=0;F$m<2;F$m++)(F$V=this._quenes[F$m])&&(F$Z.renderTarget?F$V._render(F$y,!0):F$V._render(F$y,!1));if(1===F$Z.clearFlag){var F$R=F$Z.sky;F$R&&(F$Q.setCullFace(F$J,!1),F$Q.setDepthFunc(F$J,515),F$Q.setDepthMask(F$J,!1),F$R._render(F$y),F$Q.setDepthFunc(F$J,513),F$Q.setDepthMask(F$J,!0))}for(F$m=2,F$T=this._quenes.length;F$m<F$T;F$m++)(F$V=this._quenes[F$m])&&(F$V._sortAlpha(F$y.camera.transform.position),F$Z.renderTarget?F$V._render(F$y,!0):F$V._render(F$y,!1))},F$J._set3DRenderConfig=function(F$J){F$J.disable(3042),F$Q._blend=!1,F$J.blendFunc(770,771),F$Q._sFactor=770,F$Q._dFactor=771,F$J.disable(2929),F$Q._depthTest=!1,F$J.enable(2884),F$Q._cullFace=!0,F$J.depthMask(1),F$Q._depthMask=!0,F$J.frontFace(2304),F$Q._frontFace=2304},F$J._set2DRenderConfig=function(F$J){F$Q.setBlend(F$J,!0),F$Q.setBlendFunc(F$J,1,771),F$Q.setDepthTest(F$J,!1),F$Q.setCullFace(F$J,!1),F$Q.setDepthMask(F$J,!0),F$Q.setFrontFace(F$J,2305),F$J.viewport(0,0,F$$.width,F$$.height)},F$J._parseCustomProps=function(F$J,F$y,F$T,F$V){var F$Z=F$V.customProps.lightmaps,F$m=F$Z.length,F$R=this._lightmaps;F$R.length=F$m;for(var F$n=0;F$n<F$m;F$n++)F$R[F$n]=F$E.getRes(F$y[F$Z[F$n].replace(".exr",".png")]);this.setlightmaps(F$R);var F$K=F$V.customProps.ambientColor;F$K&&(this.ambientColor=new F$Ry(F$K[0],F$K[1],F$K[2]));var F$A=F$V.customProps.fogColor;F$A&&(this.fogColor=new F$Ry(F$A[0],F$A[1],F$A[2]))},F$J._addLight=function(F$J){this._lights.indexOf(F$J)<0&&this._lights.push(F$J)},F$J._removeLight=function(F$J){var F$y=this._lights.indexOf(F$J);0<=F$y&&this._lights.splice(F$y,1)},F$J._updateScene=function(){var F$J=this._renderState;this._prepareUpdateToRenderState(F$v.mainContext,F$J),this._updateComponents(F$J),this._updateChilds(F$J),this._lateUpdateComponents(F$J),this._time+=F$J.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},F$J._updateSceneConch=function(){var F$J=this._renderState;this._prepareUpdateToRenderState(F$v.mainContext,F$J),this._updateComponents(F$J),this._lateUpdateComponents(F$J),this._prepareSceneToRender(F$J);for(var F$y=0,F$T=this._cameraPool.length;F$y<F$T;F$y++){var F$V=this._cameraPool[F$y];(F$J.camera=F$V)._prepareCameraToRender()}},F$J._preRenderShadow=function(F$J,F$y,F$T,F$V,F$Z){this.treeRoot?F$TJ.renderShadowObjectCullingOctree(this,F$y,F$T,F$V,F$Z):F$TJ.renderShadowObjectCulling(this,F$y,F$T,F$V,F$Z);for(var F$m=0,F$R=F$T.length;F$m<F$R;F$m++)F$T[F$m]&&F$T[F$m]._preRender(F$J)},F$J._renderShadowMap=function(F$J,F$y,F$T){var F$V=this.parallelSplitShadowMaps[0];F$V._calcAllLightCameraInfo(F$T);var F$Z,F$m,F$R,F$n=F$V.PSSMNum;if(this._preRenderShadow(F$y,F$V._lightCulling,F$V._shadowQuenes,F$V._lightVPMatrix[0],F$n),this.addShaderDefine(F$Gy.SHADERDEFINE_CAST_SHADOW),1<F$n)for(var F$K=0;F$K<F$n;F$K++)F$Z=F$V.getRenderTarget(F$K+1),F$V.beginRenderTarget(F$K+1),F$J.clearColor(1,1,1,1),F$J.clear(16640),F$J.viewport(0,0,F$Z.width,F$Z.height),F$y.camera=F$R=F$V.getLightCamera(F$K),F$R._prepareCameraToRender(),F$R._prepareCameraViewProject(F$R.viewMatrix,F$R.projectionMatrix),F$y._projectionViewMatrix=F$V._lightVPMatrix[F$K+1],(F$m=F$V._shadowQuenes[F$K])._preRender(F$y),F$m._renderShadow(F$y,!1),F$V.endRenderTarget(F$K+1);else F$Z=F$V.getRenderTarget(1),F$V.beginRenderTarget(1),F$J.clearColor(1,1,1,1),F$J.clear(16640),F$J.viewport(0,0,F$Z.width,F$Z.height),F$y.camera=F$R=F$V.getLightCamera(0),F$R._prepareCameraToRender(),F$R._prepareCameraViewProject(F$R.viewMatrix,F$R.projectionMatrix),F$y._projectionViewMatrix=F$V._lightVPMatrix[0],(F$m=F$V._shadowQuenes[0])._preRender(F$y),F$m._renderShadow(F$y,!0),F$V.endRenderTarget(1);this.removeShaderDefine(F$Gy.SHADERDEFINE_CAST_SHADOW)},F$J.addTreeNode=function(F$J){this.treeRoot.addTreeNode(F$J)},F$J.removeTreeNode=function(F$J){this.treeSize&&F$J._treeNode&&F$J._treeNode.removeObject(F$J)},F$J.setlightmaps=function(F$J){this._lightmaps=F$J;for(var F$y=0,F$T=this._renderableSprite3Ds.length;F$y<F$T;F$y++)this._renderableSprite3Ds[F$y]._render._applyLightMapParams()},F$J.getlightmaps=function(){return this._lightmaps},F$J.addChildAt=function(F$J,F$y){if(!(F$J instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(F$J&&F$J.__className));if(!F$J||this.destroyed||F$J===this)return F$J;if(F$J.zOrder&&this._set$P("hasZorder",!0),0<=F$y&&F$y<=this._childs.length){if(F$J._parent===this){var F$T=this.getChildIndex(F$J);this._childs.splice(F$T,1),this._childs.splice(F$y,0,F$J),this.conchModel&&(this.conchModel.removeChild(F$J.conchModel),this.conchModel.addChildAt(F$J.conchModel,F$y)),this._childChanged()}else F$J.parent&&F$J.parent.removeChild(F$J),this._childs===F$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$y,0,F$J),this.conchModel&&this.conchModel.addChildAt(F$J.conchModel,F$y),(F$J.parent=this)._addChild3D(F$J);return F$J}throw new Error("appendChildAt:The index is out of bounds")},F$J.addChild=function(F$J){if(!(F$J instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$J||this.destroyed||F$J===this)return F$J;if(F$J.zOrder&&this._set$P("hasZorder",!0),F$J._parent===this){var F$y=this.getChildIndex(F$J);F$y!==this._childs.length-1&&(this._childs.splice(F$y,1),this._childs.push(F$J),this.conchModel&&(this.conchModel.removeChild(F$J.conchModel),this.conchModel.addChildAt(F$J.conchModel,this._childs.length-1)),this._childChanged())}else F$J.parent&&F$J.parent.removeChild(F$J),this._childs===F$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$J),this.conchModel&&this.conchModel.addChildAt(F$J.conchModel,this._childs.length-1),(F$J.parent=this)._childChanged(),this._addChild3D(F$J);return F$J},F$J.removeChildAt=function(F$J){var F$y=this.getChildAt(F$J);return F$y&&(this._removeChild3D(F$y),this._childs.splice(F$J,1),this.conchModel&&this.conchModel.removeChild(F$y.conchModel),F$y.parent=null),F$y},F$J.removeChildren=function(F$J,F$y){if(void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=2147483647),this._childs&&0<this._childs.length){var F$T=this._childs;if(0===F$J&&F$m<=F$y){var F$V=F$T;this._childs=F$A.ARRAY_EMPTY}else F$V=F$T.splice(F$J,F$y-F$J);for(var F$Z=0,F$m=F$V.length;F$Z<F$m;F$Z++)this._removeChild3D(F$V[F$Z]),F$V[F$Z].parent=null,this.conchModel&&this.conchModel.removeChild(F$V[F$Z].conchModel)}return this},F$J.addFrustumCullingObject=function(F$J){this.treeRoot?this.addTreeNode(F$J):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(F$J):this._cullingRenders[this._cullingRendersLength]=F$J,F$J._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},F$J.removeFrustumCullingObject=function(F$J){if(this.treeRoot)this.removeTreeNode(F$J);else{this._cullingRendersLength--;var F$y=F$J._indexInSceneFrustumCullingObjects;if(F$y!==this._cullingRendersLength){var F$T=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[F$y]=F$T)._indexInSceneFrustumCullingObjects=F$y,F$J._indexInSceneFrustumCullingObjects=-1}}},F$J.getRenderQueue=function(F$J){return F$J<3e3?this._quenes[1]||(this._quenes[1]=new F$h(this)):this._quenes[2]||(this._quenes[2]=new F$h(this))},F$J.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new F$h(this)},F$J.addShaderDefine=function(F$J){this._shaderDefineValue|=F$J},F$J.removeShaderDefine=function(F$J){this._shaderDefineValue&=~F$J},F$J.addScript=function(F$J){return this._addComponent(F$J)},F$J.getScriptByType=function(F$J,F$y){return void 0===F$y&&(F$y=0),this._getComponentByType(F$J,F$y)},F$J.getScriptsByType=function(F$J,F$y){this._getComponentsByType(F$J,F$y)},F$J.getScriptByIndex=function(F$J){return this._getComponentByIndex(F$J)},F$J.removeScriptByType=function(F$J,F$y){void 0===F$y&&(F$y=0),this._removeComponentByType(F$J,F$y)},F$J.removeScriptsByType=function(F$J){this._removeComponentByType(F$J)},F$J.removeAllScript=function(){this._removeAllComponent()},F$J.render=function(F$J,F$y,F$T){(F$o._context.ctx._renderKey=0)<this._childs.length&&F$J.addRenderObject(this)},F$J.renderSubmit=function(){var F$J=F$v.mainContext,F$y=this._renderState;this._set3DRenderConfig(F$J),this._prepareSceneToRender(this._renderState);var F$T,F$V=0,F$Z=0;if(F$Ey.debugMode||F$j.debugMode)for(F$V=0,F$Z=this._cameraPool.length;F$V<F$Z;F$V++)F$T=this._cameraPool[F$V],F$Ey._debugPhasorSprite.begin(1,F$T),F$T.activeInHierarchy&&F$T._renderCamera(F$J,F$y,this),F$Ey._debugPhasorSprite.end();else for(F$V=0,F$Z=this._cameraPool.length;F$V<F$Z;F$V++)(F$T=this._cameraPool[F$V]).activeInHierarchy&&F$T._renderCamera(F$J,F$y,this);return this._set2DRenderConfig(F$J),1},F$J.onAsynLoaded=function(F$J,F$y,F$T){var F$V=F$y[0];if("Scene"!==F$V.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var F$Z=F$y[1];F$sy._createNodeByJson(this,F$V,this,F$Z),this.event("hierarchyloaded",[this]),this.__loaded=!0},F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),this.destroyed||(F$y.prototype.destroy.call(this,F$J),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,F$E.clearRes(this.url),this.loaded||F$Ey._cancelLoadByUrl(this.url))},F$J.getRenderType=function(){return 0},F$J.releaseRender=function(){},F$J._addComponent=function(F$J){var F$y,F$T=this._componentsMap.indexOf(F$J);if(-1===F$T)F$y=[],this._componentsMap.push(F$J),this._typeComponentsIndices.push(F$y);else if(F$y=this._typeComponentsIndices[F$T],this._components[F$y[0]].isSingleton)throw new Error("无法单实例创建"+F$J+"组件，"+F$J+"组件已存在！");var F$V=F$Z.getInstance(F$J);F$y.push(this._components.length),this._components.push(F$V);return F$V._initialize(this),F$V},F$J._removeComponent=function(F$J,F$y){var F$T=this._typeComponentsIndices[F$J],F$V=F$T[F$y],F$Z=this._components[F$V];this._components.splice(F$V,1),F$T.splice(F$y,1),0===F$T.length&&(this._typeComponentsIndices.splice(F$J,1),this._componentsMap.splice(F$J,1));for(var F$m=0,F$R=this._componentsMap.length;F$m<F$R;F$m++)for(var F$n=(F$T=this._typeComponentsIndices[F$m]).length-1;0<=F$n;F$n--){var F$K=F$T[F$n];if(!(F$V<F$K))break;F$T[F$n]=--F$K}F$Z._destroy()},F$J._getComponentByType=function(F$J,F$y){void 0===F$y&&(F$y=0);var F$T=this._componentsMap.indexOf(F$J);return-1===F$T?null:this._components[this._typeComponentsIndices[F$T][F$y]]},F$J._getComponentsByType=function(F$J,F$y){var F$T=this._componentsMap.indexOf(F$J);if(-1!==F$T){var F$V=this._typeComponentsIndices[F$T],F$Z=F$V.length;F$y.length=F$Z;for(var F$m=0;F$m<F$Z;F$m++)F$y[F$m]=this._components[F$V[F$m]]}else F$y.length=0},F$J._getComponentByIndex=function(F$J){return this._components[F$J]},F$J._removeComponentByType=function(F$J,F$y){void 0===F$y&&(F$y=0);var F$T=this._componentsMap.indexOf(F$J);-1!==F$T&&this._removeComponent(F$T,F$y)},F$J._removeComponentsByType=function(F$J){var F$y=this._componentsMap.indexOf(F$J);if(-1!==F$y)for(var F$T=this._typeComponentsIndices[F$y],F$V=0,F$Z=F$T.length;F$V<F$Z;F$T.length<F$Z?F$Z--:F$V++)this._removeComponent(F$y,F$V)},F$J._removeAllComponent=function(){for(var F$J=0,F$y=this._componentsMap.length;F$J<F$y;this._componentsMap.length<F$y?F$y--:F$J++)this._removeComponentsByType(this._componentsMap[F$J])},F$J._updateComponents=function(F$J){for(var F$y=0,F$T=this._components.length;F$y<F$T;F$y++){var F$V=this._components[F$y];!F$V.started&&(F$V._start(F$J),F$V.started=!0),F$V.enable&&F$V._update(F$J)}},F$J._lateUpdateComponents=function(F$J){for(var F$y=0;F$y<this._components.length;F$y++){var F$T=this._components[F$y];!F$T.started&&(F$T._start(F$J),F$T.started=!0),F$T.enable&&F$T._lateUpdate(F$J)}},F$J._preRenderUpdateComponents=function(F$J){for(var F$y=0;F$y<this._components.length;F$y++){var F$T=this._components[F$y];!F$T.started&&(F$T._start(F$J),F$T.started=!0),F$T.enable&&F$T._preRenderUpdate(F$J)}},F$J._postRenderUpdateComponents=function(F$J){for(var F$y=0;F$y<this._components.length;F$y++){var F$T=this._components[F$y];!F$T.started&&(F$T._start(F$J),F$T.started=!0),F$T.enable&&F$T._postRenderUpdate(F$J)}},F$B(0,F$J,"_loaded",null,function(F$J){this.__loaded=F$J}),F$B(0,F$J,"fogColor",function(){return this._fogColor},function(F$J){this._fogColor=F$J,this._shaderValues.setValue(0,F$J.elements)}),F$B(0,F$J,"enableFog",function(){return this._enableFog},function(F$J){this._enableFog!==F$J&&((this._enableFog=F$J)?(this.addShaderDefine(F$qy.SHADERDEFINE_FOG),this.removeShaderDefine(F$qy.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(F$qy.SHADERDEFINE_FOG))}),F$B(0,F$J,"url",function(){return this._url}),F$B(0,F$J,"loaded",function(){return this.__loaded}),F$B(0,F$J,"enableDepthFog",function(){return this._enableDepthFog},function(F$J){this._enableDepthFog!=F$J&&((this._enableDepthFog=F$J)?(this.addShaderDefine(F$qy.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(F$qy.SHADERDEFINE_FOG)):this.removeShaderDefine(F$qy.SAHDERDEFINE_DEPTHFOG))}),F$B(0,F$J,"fogStart",function(){return this._fogStart},function(F$J){this._fogStart=F$J,this._shaderValues.setValue(1,F$J)}),F$B(0,F$J,"fogRange",function(){return this._fogRange},function(F$J){this._fogRange=F$J,this._shaderValues.setValue(2,F$J)}),F$B(0,F$J,"ambientColor",function(){return this._ambientColor},function(F$J){this._ambientColor=F$J,this._shaderValues.setValue(21,F$J.elements)}),F$B(0,F$J,"scene",function(){return this}),F$B(0,F$J,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),F$V._sortScenes=function(F$J,F$y){if(F$J.parent!==F$P.stage||F$y.parent!==F$P.stage)return F$J.parent!==F$P.stage&&F$y.parent!==F$P.stage?F$V._sortScenes(F$J.parent,F$y.parent):F$J.parent===F$P.stage?-1:1;var F$T=F$P.stage._childs;return F$T.indexOf(F$J)-F$T.indexOf(F$y)},F$V.load=function(F$J){return F$P.loader.create(F$J,null,null,F$V)},F$V.FOGCOLOR=0,F$V.FOGSTART=1,F$V.FOGRANGE=2,F$V.LIGHTDIRECTION=3,F$V.LIGHTDIRCOLOR=4,F$V.POINTLIGHTPOS=5,F$V.POINTLIGHTRANGE=6,F$V.POINTLIGHTATTENUATION=7,F$V.POINTLIGHTCOLOR=8,F$V.SPOTLIGHTPOS=9,F$V.SPOTLIGHTDIRECTION=10,F$V.SPOTLIGHTSPOT=11,F$V.SPOTLIGHTRANGE=12,F$V.SPOTLIGHTATTENUATION=13,F$V.SPOTLIGHTCOLOR=14,F$V.SHADOWDISTANCE=15,F$V.SHADOWLIGHTVIEWPROJECT=16,F$V.SHADOWMAPPCFOFFSET=17,F$V.SHADOWMAPTEXTURE1=18,F$V.SHADOWMAPTEXTURE2=19,F$V.SHADOWMAPTEXTURE3=20,F$V.AMBIENTCOLOR=21,F$V.TIME=22,F$V}(F$a),F$xy=function(F$J){function F$y(F$J){F$y.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new F$Jy,this._shaderValues=new F$My,this._colliders=[],this._id=++F$y._uniqueIDCounter,this._transform=new F$ly(this),this.name=F$J||"Sprite3D-"+F$y._nameNumberCounter++,this.layer=F$c.currentCreationLayer,this.active=!0}F$G(F$y,"laya.d3.core.Sprite3D",F$_y);var F$T=F$y.prototype;return F$P.imps(F$T,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),F$T._setUrl=function(F$J){this._url=F$J},F$T._getGroup=function(){return this._group},F$T._setGroup=function(F$J){this._group=F$J},F$T._addChild3D=function(F$J){F$J.transform.parent=this.transform,this._hierarchyAnimator&&(!F$J._hierarchyAnimator&&F$J._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(F$J,!0,[F$J.name])),this._scene&&(F$J._setBelongScene(this._scene),this._activeInHierarchy&&F$J._active&&F$J._activeHierarchy())},F$T._removeChild3D=function(F$J){F$J.transform.parent=null,this._scene&&(this._activeInHierarchy&&F$J._active&&F$J._inActiveHierarchy(),F$J._setUnBelongScene()),this._hierarchyAnimator&&(F$J._hierarchyAnimator==this._hierarchyAnimator&&F$J._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(F$J,!1,[F$J.name]))},F$T._parseBaseCustomProps=function(F$J){var F$y=this.transform.localPosition;F$J.translate?(F$y.fromArray(F$J.translate),F$y.x*=100,F$y.y*=100,F$y.z*=100):F$y.elements.fill(0),this.transform.localPosition=F$y;var F$T=this.transform.localRotation;F$J.rotation?F$T.fromArray(F$J.rotation):F$T.fromArray([0,0,0,-1]),this.transform.localRotation=F$T;var F$V=this.transform.localScale;F$J.scale?F$V.fromArray(F$J.scale):F$V.elements.fill(1),this.transform.localScale=F$V;var F$Z=F$J.layer;null!=F$Z&&(this.layer=F$c.getLayerByNumber(F$Z))},F$T._parseCustomComponent=function(F$J,F$y,F$T){for(var F$V in F$T){var F$Z=F$T[F$V];switch(F$V){case"Animator":var F$m=this.addComponent(Animator);if(F$Z.avatarPath)F$m.avatar=F$E.getRes(F$y[F$Z.avatarPath]);else{var F$R=F$Z.avatar;if(F$R){F$m.avatar=F$E.getRes(F$y[F$R.path]);var F$n=F$R.linkSprites;F$n&&F$J.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[F$m,F$n])}}for(var F$K=F$Z.clipPaths,F$A=F$K.length,F$$=0;F$$<F$A;F$$++)F$m.addClip(F$E.getRes(F$y[F$K[F$$]]));F$m.clip=F$E.getRes(F$y[F$K[0]]);var F$e=F$Z.playOnWake;void 0!==F$e&&(F$m.playOnWake=F$e);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var F$M=this.addComponent(SphereCollider);F$M.isTrigger=F$Z.isTrigger;var F$G=F$M.center;F$G.fromArray(F$Z.center),F$M.center=F$G,F$M.radius=F$Z.radius;break;case"BoxCollider":var F$B=this.addComponent(BoxCollider);F$B.isTrigger=F$Z.isTrigger,F$B.center.fromArray(F$Z.center);var F$o=F$B.size;F$o.fromArray(F$Z.size),F$B.size=F$o;break;case"MeshCollider":this.addComponent(MeshCollider)}}},F$T._onRootNodeHierarchyLoaded=function(F$J,F$y){for(var F$T in F$y){for(var F$V=this,F$Z=F$y[F$T],F$m=0,F$R=F$Z.length;F$m<F$R;F$m++){var F$n=F$Z[F$m];if(""===F$n)break;if(!(F$V=F$V.getChildByName(F$n)))break}F$V&&F$J.linkSprite3DToAvatarNode(F$T,F$V)}},F$T._setHierarchyAnimator=function(F$J,F$y){this._changeHierarchyAnimator(F$J);for(var F$T=0,F$V=this._childs.length;F$T<F$V;F$T++){var F$Z=this._childs[F$T];F$Z._hierarchyAnimator==F$y&&F$Z._setHierarchyAnimator(F$J,F$y)}},F$T._clearHierarchyAnimator=function(F$J,F$y){this._changeHierarchyAnimator(F$y);for(var F$T=0,F$V=this._childs.length;F$T<F$V;F$T++){var F$Z=this._childs[F$T];F$Z._hierarchyAnimator==F$J&&F$Z._clearHierarchyAnimator(F$J,F$y)}},F$T._getAnimatorToLinkSprite3D=function(F$J,F$y,F$T){var F$V=this.getComponentByType(Animator);if(F$V&&(F$V.avatar?F$V.avatar._version||F$J._setAnimatorToLinkAvatar(F$V,F$y):F$J._setAnimatorToLinkSprite3DNoAvatar(F$V,F$y,F$T)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){F$T.unshift(this._parent.name);var F$Z=this._parent;F$Z._hierarchyAnimator&&F$Z._getAnimatorToLinkSprite3D(F$J,F$y,F$T)}},F$T._setAnimatorToLinkSprite3DNoAvatar=function(F$J,F$y,F$T){var F$V=0,F$Z=0;for(F$V=0,F$Z=F$J.getClipCount();F$V<F$Z;F$V++)F$J._handleSpriteOwnersBySprite(F$V,F$y,F$T,this);for(F$V=0,F$Z=this._childs.length;F$V<F$Z;F$V++){var F$m=this._childs[F$V],F$R=F$T.length;F$T.push(F$m.name),F$m._setAnimatorToLinkSprite3DNoAvatar(F$J,F$y,F$T),F$T.splice(F$R,1)}},F$T._changeHierarchyAnimator=function(F$J){this._hierarchyAnimator=F$J},F$T._isLinkSpriteToAnimationNode=function(F$J,F$y,F$T){var F$V=F$J._avatarNodes.indexOf(F$y),F$Z=F$J._cacheSpriteToNodesMap;if(F$T)this._transform.dummy=F$y.transform,F$J._cacheNodesToSpriteMap[F$V]=F$Z.length,F$Z.push(F$V);else{this._transform.dummy=null;var F$m=F$J._cacheNodesToSpriteMap[F$V];F$J._cacheNodesToSpriteMap[F$V]=null,F$Z.splice(F$m,1)}},F$T._setBelongScene=function(F$J){this._scene=F$J;for(var F$y=0,F$T=this._childs.length;F$y<F$T;F$y++)this._childs[F$y]._setBelongScene(F$J)},F$T._setUnBelongScene=function(){this._scene=null;for(var F$J=0,F$y=this._childs.length;F$J<F$y;F$J++)this._childs[F$J]._setUnBelongScene()},F$T._activeHierarchy=function(){var F$J=0,F$y=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),F$J=0,F$y=this._colliders.length;F$J<F$y;F$J++)this._layer._addCollider(this._colliders[F$J]);for(this.event("activeinhierarchychanged",!0),F$J=0,F$y=this._childs.length;F$J<F$y;F$J++){var F$T=this._childs[F$J];F$T._active&&F$T._activeHierarchy()}},F$T._inActiveHierarchy=function(){var F$J=0,F$y=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),F$J=0,F$y=this._colliders.length;F$J<F$y;F$J++){var F$T=this._colliders[F$J];F$T._clearCollsionMap(),this._layer._removeCollider(F$T)}for(this.event("activeinhierarchychanged",!1),F$J=0,F$y=this._childs.length;F$J<F$y;F$J++){var F$V=this._childs[F$J];F$V._active&&F$V._inActiveHierarchy()}},F$T.addComponent=function(F$J){var F$y,F$T=this._componentsMap.indexOf(F$J);if(-1===F$T)F$y=[],this._componentsMap.push(F$J),this._typeComponentsIndices.push(F$y);else if(F$y=this._typeComponentsIndices[F$T],this._components[F$y[0]].isSingleton)throw new Error("无法单实例创建"+F$J+"组件，"+F$J+"组件已存在！");var F$V=F$Z.getInstance(F$J);return F$y.push(this._components.length),this._components.push(F$V),F$V instanceof laya.d3.component.Script&&this._scripts.push(F$V),F$V._initialize(this),F$V},F$T._removeComponent=function(F$J,F$y){var F$T,F$V=0,F$Z=this._typeComponentsIndices[F$J],F$m=F$Z[F$y],F$R=this._components[F$m];for(F$R instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(F$R),1),F$Z.splice(F$y,1),0===F$Z.length&&(this._typeComponentsIndices.splice(F$J,1),this._componentsMap.splice(F$J,1)),F$V=0,F$T=this._componentsMap.length;F$V<F$T;F$V++)for(var F$n=(F$Z=this._typeComponentsIndices[F$V]).length-1;0<=F$n;F$n--){var F$K=F$Z[F$n];if(!(F$m<F$K))break;F$Z[F$n]=--F$K}F$R._destroy()},F$T._clearSelfRenderObjects=function(){},F$T._addSelfRenderObjects=function(){},F$T._parseCustomProps=function(F$J,F$y,F$T,F$V){},F$T._updateChilds=function(F$J){var F$y=this._childs.length;if(0!==F$y)for(var F$T=0;F$T<F$y;++F$T)this._childs[F$T]._update(F$J)},F$T._getSortID=function(F$J,F$y){return 1e3*F$y.id+F$J._getVertexBuffer().vertexDeclaration.id},F$T._update=function(F$J){(F$J.owner=this)._activeInHierarchy&&(this._updateComponents(F$J),this._lateUpdateComponents(F$J),F$q.spriteCount++,this._childs.length&&this._updateChilds(F$J))},F$T.getProjectionViewWorldMatrix=function(F$J){return F$Jy.multiply(F$J,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},F$T.loadHierarchy=function(F$J){this.addChild(laya.d3.core.Sprite3D.load(F$J))},F$T.addChildAt=function(F$J,F$y){if(!(F$J instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$J||this.destroyed||F$J===this)return F$J;if(F$J.zOrder&&this._set$P("hasZorder",!0),0<=F$y&&F$y<=this._childs.length){if(F$J._parent===this){var F$T=this.getChildIndex(F$J);this._childs.splice(F$T,1),this._childs.splice(F$y,0,F$J),this.conchModel&&(this.conchModel.removeChild(F$J.conchModel),this.conchModel.addChildAt(F$J.conchModel,F$y)),this._childChanged()}else F$J.parent&&F$J.parent.removeChild(F$J),this._childs===F$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$y,0,F$J),this.conchModel&&this.conchModel.addChildAt(F$J.conchModel,F$y),(F$J.parent=this)._addChild3D(F$J);return F$J}throw new Error("appendChildAt:The index is out of bounds")},F$T.addChild=function(F$J){if(!(F$J instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$J||this.destroyed||F$J===this)return F$J;if(F$J.zOrder&&this._set$P("hasZorder",!0),F$J._parent===this){var F$y=this.getChildIndex(F$J);F$y!==this._childs.length-1&&(this._childs.splice(F$y,1),this._childs.push(F$J),this.conchModel&&(this.conchModel.removeChild(F$J.conchModel),this.conchModel.addChildAt(F$J.conchModel,this._childs.length-1)),this._childChanged())}else F$J.parent&&F$J.parent.removeChild(F$J),this._childs===F$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$J),this.conchModel&&this.conchModel.addChildAt(F$J.conchModel,this._childs.length-1),(F$J.parent=this)._childChanged(),this._addChild3D(F$J);return F$J},F$T.removeChildAt=function(F$J){var F$y=this.getChildAt(F$J);return F$y&&(this._removeChild3D(F$y),this._childs.splice(F$J,1),this.conchModel&&this.conchModel.removeChild(F$y.conchModel),F$y.parent=null),F$y},F$T.removeChildren=function(F$J,F$y){if(void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=2147483647),this._childs&&0<this._childs.length){var F$T=this._childs;if(0===F$J&&F$m<=F$y){var F$V=F$T;this._childs=F$A.ARRAY_EMPTY}else F$V=F$T.splice(F$J,F$y-F$J);for(var F$Z=0,F$m=F$V.length;F$Z<F$m;F$Z++)this._removeChild3D(F$V[F$Z]),F$V[F$Z].parent=null,this.conchModel&&this.conchModel.removeChild(F$V[F$Z].conchModel)}return this},F$T.onAsynLoaded=function(F$J,F$y,F$T){var F$V=F$y[0];if("Sprite3D"!==F$V.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var F$Z=F$y[1];F$sy._createNodeByJson(this,F$V,this,F$Z),this.event("hierarchyloaded",[this]),this.__loaded=!0},F$T.cloneTo=function(F$J){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var F$y=F$J;F$y.name=this.name,F$y._destroyed=this._destroyed,F$y.timer=this.timer,F$y._$P=this._$P,F$y.active=this._active;var F$T=F$y.transform.localPosition;this.transform.localPosition.cloneTo(F$T),F$y.transform.localPosition=F$T;var F$V=F$y.transform.localRotation;this.transform.localRotation.cloneTo(F$V),F$y.transform.localRotation=F$V;var F$Z=F$y.transform.localScale;this.transform.localScale.cloneTo(F$Z),F$y.transform.localScale=F$Z,F$y.isStatic=this.isStatic;var F$m=0,F$R=0;for(F$m=0,F$R=this._componentsMap.length;F$m<F$R;F$m++){var F$n=F$y.addComponent(this._componentsMap[F$m]);this._components[F$m]._cloneTo(F$n)}for(F$m=0,F$R=this._childs.length;F$m<F$R;F$m++)F$y.addChild(this._childs[F$m].clone());var F$K=F$y.getComponentByType(Animator);if(F$K){var F$A=F$K._linkSpritesData;if(F$A)for(var F$$ in F$A){for(var F$e=F$A[F$$],F$M=F$y,F$G=0,F$B=F$e.length;F$G<F$B&&(F$M=F$M.getChildByName(F$e[F$G]));F$G++);if(F$M){var F$o=F$K._avatarNodeMap[F$$];F$M._isLinkSpriteToAnimationNode(F$K,F$o,!0)}}}},F$T.clone=function(){var F$J=new this.constructor;return this.cloneTo(F$J),F$J},F$T.destroy=function(F$J){if(void 0===F$J&&(F$J=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,F$J);var F$y,F$T=0;for(F$T=0,F$y=this._components.length;F$T<F$y;F$T++)this._components[F$T]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,F$E.clearRes(this.url),this.loaded||F$Ey._cancelLoadByUrl(this.url)}},F$T._handleSpriteToAvatar=function(F$J,F$y){F$J._avatarNodes;var F$T=F$J._avatarNodeMap[this.name];F$T&&F$T.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(F$J,F$T,F$y)},F$T._setAnimatorToLinkAvatar=function(F$J,F$y){this._handleSpriteToAvatar(F$J,F$y);for(var F$T=0,F$V=this._childs.length;F$T<F$V;F$T++){this._childs[F$T]._setAnimatorToLinkAvatar(F$J,F$y)}},F$B(0,F$T,"activeInHierarchy",function(){return this._activeInHierarchy}),F$B(0,F$T,"_loaded",null,function(F$J){this.__loaded=F$J}),F$B(0,F$T,"active",function(){return this._active},function(F$J){this._active!==F$J&&(this._active=F$J,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(F$J?this._activeHierarchy():this._inActiveHierarchy()))}),F$B(0,F$T,"componentsCount",function(){return this._components.length}),F$B(0,F$T,"loaded",function(){return this.__loaded}),F$B(0,F$T,"id",function(){return this._id}),F$B(0,F$T,"url",function(){return this._url}),F$B(0,F$T,"layer",function(){return this._layer},function(F$J){if(this._layer!==F$J){if(!F$J)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var F$y=0,F$T=this._colliders.length;if(this._layer)for(F$y=0;F$y<F$T;F$y++)this._layer._removeCollider(this._colliders[F$y]);for(F$y=0;F$y<F$T;F$y++)F$J._addCollider(this._colliders[F$y])}this._layer=F$J,this.event("layerchanged",F$J)}}),F$B(0,F$T,"scene",function(){return this._scene}),F$B(0,F$T,"transform",function(){return this._transform}),F$y.instantiate=function(F$J,F$y,F$T,F$V,F$Z){void 0===F$T&&(F$T=!0);var F$m=F$J.clone();F$y&&F$y.addChild(F$m);var F$R=F$m.transform;if(F$T){var F$n=F$R.worldMatrix;F$J.transform.worldMatrix.cloneTo(F$n),F$R.worldMatrix=F$n}else F$V&&(F$R.position=F$V),F$Z&&(F$R.rotation=F$Z);return F$m},F$y.load=function(F$J){return F$P.loader.create(F$J,null,null,F$y)},F$y.WORLDMATRIX=0,F$y.MVPMATRIX=1,F$y._uniqueIDCounter=0,F$y._nameNumberCounter=0,F$y}(),F$ky=function(F$J){function F$$(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],F$$.__super.call(this),!F$J||!F$y)throw"Shader Error";this._id=++F$$._count,this._vs=F$J,this._ps=F$y,this._attributeMap=F$T,this._sceneUniformMap=F$V,this._cameraUniformMap=F$Z,this._spriteUniformMap=F$m,this._materialUniformMap=F$R,this._renderElementUniformMap=F$n,this._precompile=F$K,this._define=F$A,this._precompile&&F$$.extCompileObj&&F$$.extCompileFunc?F$$.extCompileFunc.call(F$$.extCompileObj,F$J,F$y,F$A):this.recreateResource()}F$G(F$$,"laya.d3.shader.Shader3D",F$T);var F$y=F$$.prototype;return F$y.recreateResource=function(){F$i.now();this._compile(),this.completeCreate(),this.memorySize=0},F$y.disposeResource=function(){F$v.mainContext.deleteShader(this._vshader),F$v.mainContext.deleteShader(this._pshader),F$v.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},F$y._compile=function(){if(!F$v.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var F$J=[this._vs,this._ps],F$y=F$v.mainContext;if(this._program=F$y.createProgram(),this._vshader=F$$._createShader(F$y,F$J[0],35633),this._pshader=F$$._createShader(F$y,F$J[1],35632),F$y.attachShader(this._program,this._vshader),F$y.attachShader(this._program,this._pshader),F$y.linkProgram(this._program),!F$o.isConchApp&&F$qy.debugMode&&!F$y.getProgramParameter(this._program,35714))throw F$y.getProgramInfoLog(this._program);var F$T,F$V=0,F$Z=0,F$m=0;for(F$m=F$o.isConchApp?F$y.getProgramParameterEx(this._vs,this._ps,"",35721):F$y.getProgramParameter(this._program,35721),F$V=0;F$V<F$m;F$V++){var F$R=null;F$T={vartype:"attribute",ivartype:0,attrib:F$R=F$o.isConchApp?F$y.getActiveAttribEx(this._vs,this._ps,"",F$V):F$y.getActiveAttrib(this._program,F$V),location:F$y.getAttribLocation(this._program,F$R.name),name:F$R.name,type:F$R.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(F$T)}var F$n=0;for(F$n=F$o.isConchApp?F$y.getProgramParameterEx(this._vs,this._ps,"",35718):F$y.getProgramParameter(this._program,35718),F$V=0;F$V<F$n;F$V++){var F$K=null;F$K=F$o.isConchApp?F$y.getActiveUniformEx(this._vs,this._ps,"",F$V):F$y.getActiveUniform(this._program,F$V),0<(F$T={vartype:"uniform",ivartype:1,attrib:F$R,location:F$y.getUniformLocation(this._program,F$K.name),name:F$K.name,type:F$K.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(F$T.name=F$T.name.substr(0,F$T.name.length-3),F$T.isArray=!0,F$T.location=F$y.getUniformLocation(this._program,F$T.name)),this._uniformParams.push(F$T)}for(F$V=0,F$Z=this._attributeParams.length;F$V<F$Z;F$V++)(F$T=this._attributeParams[F$V]).indexOfParams=F$V,F$T.index=1,F$T.value=[F$T.location,null],F$T.codename=F$T.name,F$T.name=null!=this._attributeMap[F$T.codename]?this._attributeMap[F$T.codename]:F$T.codename,this._attributeParamsMap.push(F$T.name),this._attributeParamsMap.push(F$T),F$T._this=this,F$T.uploadedValue=[],F$T.fun=this._attribute;for(F$V=0,F$Z=this._uniformParams.length;F$V<F$Z;F$V++)switch((F$T=this._uniformParams[F$V]).indexOfParams=F$V,F$T.index=1,F$T.value=[F$T.location,null],F$T.codename=F$T.name,null!=this._sceneUniformMap[F$T.codename]?(F$T.name=this._sceneUniformMap[F$T.codename],this._sceneUniformParamsMap.push(F$T.name),this._sceneUniformParamsMap.push(F$T)):null!=this._cameraUniformMap[F$T.codename]?(F$T.name=this._cameraUniformMap[F$T.codename],this._cameraUniformParamsMap.push(F$T.name),this._cameraUniformParamsMap.push(F$T)):null!=this._spriteUniformMap[F$T.codename]?(F$T.name=this._spriteUniformMap[F$T.codename],this._spriteUniformParamsMap.push(F$T.name),this._spriteUniformParamsMap.push(F$T)):null!=this._materialUniformMap[F$T.codename]?(F$T.name=this._materialUniformMap[F$T.codename],this._materialUniformParamsMap.push(F$T.name),this._materialUniformParamsMap.push(F$T)):null!=this._renderElementUniformMap[F$T.codename]?(F$T.name=this._renderElementUniformMap[F$T.codename],this._renderElementUniformParamsMap.push(F$T.name),this._renderElementUniformParamsMap.push(F$T)):console.log("Shader:can't find uinform name:"+F$T.codename+" in shader file."),F$T._this=this,F$T.uploadedValue=[],F$T.type){case 5124:F$T.fun=F$T.isArray?this._uniform1iv:this._uniform1i;break;case 5126:F$T.fun=F$T.isArray?this._uniform1fv:this._uniform1f;break;case 35664:F$T.fun=F$T.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:F$T.fun=F$T.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:F$T.fun=F$T.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:F$T.fun=this._uniform_sampler2D;break;case 35680:F$T.fun=this._uniform_samplerCube;break;case 35676:F$T.fun=this._uniformMatrix4fv;break;case 35670:F$T.fun=this._uniform1i;break;case 35674:F$T.fun=this._uinformMatrix2fv;break;case 35675:F$T.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},F$y._attribute=function(F$J,F$y){var F$T=F$v.mainContext,F$V=F$n._enableAtributes,F$Z=F$J.location;return F$V[F$Z]||F$T.enableVertexAttribArray(F$Z),F$T.vertexAttribPointer(F$Z,F$y[0],F$y[1],F$y[2],F$y[3],F$y[4]),F$V[F$Z]=F$n._bindVertexBuffer,1},F$y._uniform1f=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y?(F$v.mainContext.uniform1f(F$J.location,F$T[0]=F$y),1):0},F$y._uniform1fv=function(F$J,F$y){if(F$y.length<4){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]||F$T[3]!==F$y[3]?(F$v.mainContext.uniform1fv(F$J.location,F$y),F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2],F$T[3]=F$y[3],1):0}return F$v.mainContext.uniform1fv(F$J.location,F$y),1},F$y._uniform_vec2=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]?(F$v.mainContext.uniform2f(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1]),1):0},F$y._uniform_vec2v=function(F$J,F$y){if(F$y.length<2){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]||F$T[3]!==F$y[3]?(F$v.mainContext.uniform2fv(F$J.location,F$y),F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2],F$T[3]=F$y[3],1):0}return F$v.mainContext.uniform2fv(F$J.location,F$y),1},F$y._uniform_vec3=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]?(F$v.mainContext.uniform3f(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2]),1):0},F$y._uniform_vec3v=function(F$J,F$y){return F$v.mainContext.uniform3fv(F$J.location,F$y),1},F$y._uniform_vec4=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]||F$T[3]!==F$y[3]?(F$v.mainContext.uniform4f(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2],F$T[3]=F$y[3]),1):0},F$y._uniform_vec4v=function(F$J,F$y){return F$v.mainContext.uniform4fv(F$J.location,F$y),1},F$y._uniformMatrix2fv=function(F$J,F$y){return F$v.mainContext.uniformMatrix2fv(F$J.location,!1,F$y),1},F$y._uniformMatrix3fv=function(F$J,F$y){return F$v.mainContext.uniformMatrix3fv(F$J.location,!1,F$y),1},F$y._uniformMatrix4fv=function(F$J,F$y){return F$v.mainContext.uniformMatrix4fv(F$J.location,!1,F$y),1},F$y._uinformMatrix2fv=function(F$J,F$y){return F$v.mainContext.uniformMatrix2fv(F$J.location,!1,F$y),1},F$y._uinformMatrix3fv=function(F$J,F$y){return F$v.mainContext.uniformMatrix3fv(F$J.location,!1,F$y),1},F$y._uniform1i=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y?(F$v.mainContext.uniform1i(F$J.location,F$T[0]=F$y),1):0},F$y._uniform1iv=function(F$J,F$y){return F$v.mainContext.uniform1iv(F$J.location,F$y),1},F$y._uniform_ivec2=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]?(F$v.mainContext.uniform2i(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1]),1):0},F$y._uniform_ivec2v=function(F$J,F$y){return F$v.mainContext.uniform2iv(F$J.location,F$y),1},F$y._uniform_vec3i=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]?(F$v.mainContext.uniform3i(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2]),1):0},F$y._uniform_vec3vi=function(F$J,F$y){return F$v.mainContext.uniform3iv(F$J.location,F$y),1},F$y._uniform_vec4i=function(F$J,F$y){var F$T=F$J.uploadedValue;return F$T[0]!==F$y[0]||F$T[1]!==F$y[1]||F$T[2]!==F$y[2]||F$T[3]!==F$y[3]?(F$v.mainContext.uniform4i(F$J.location,F$T[0]=F$y[0],F$T[1]=F$y[1],F$T[2]=F$y[2],F$T[3]=F$y[3]),1):0},F$y._uniform_vec4vi=function(F$J,F$y){return F$v.mainContext.uniform4iv(F$J.location,F$y),1},F$y._uniform_sampler2D=function(F$J,F$y){var F$T=F$y.source||F$y.defaulteTexture.source,F$V=F$v.mainContext,F$Z=F$J.uploadedValue;if(null!=F$Z[0])return F$V.activeTexture(F$$._TEXTURES[F$Z[0]]),F$T&&F$Q.bindTexture(F$V,3553,F$T),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return F$Z[0]=this._curActTexIndex,F$V.uniform1i(F$J.location,this._curActTexIndex),F$V.activeTexture(F$$._TEXTURES[this._curActTexIndex]),F$T&&F$Q.bindTexture(F$V,3553,F$T),this._curActTexIndex++,1},F$y._uniform_samplerCube=function(F$J,F$y){var F$T=F$y.source||F$y.defaulteTexture.source,F$V=F$v.mainContext,F$Z=F$J.uploadedValue;if(null!=F$Z[0])return F$V.activeTexture(F$$._TEXTURES[F$Z[0]]),F$T?F$Q.bindTexture(F$V,34067,F$T):F$Q.bindTexture(F$V,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return F$Z[0]=this._curActTexIndex,F$V.uniform1i(F$J.location,this._curActTexIndex),F$V.activeTexture(F$$._TEXTURES[this._curActTexIndex]),F$T?F$Q.bindTexture(F$V,34067,F$T):F$Q.bindTexture(F$V,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},F$y._noSetValue=function(F$J){console.log("no....:"+F$J.name)},F$y.bind=function(){return F$T.activeShader=this,(F$T.bindShader=this).activeResource(),F$Q.UseProgram(this._program)},F$y.uploadAttributes=function(F$J,F$y){for(var F$T,F$V,F$Z=0,F$m=0,F$R=this._attributeParamsMap.length;F$m<F$R;F$m+=2)F$V=this._attributeParamsMap[F$m+1],null!=(F$T=F$J[this._attributeParamsMap[F$m]])&&(F$y&&F$y[F$V.name]&&F$y[F$V.name].bind(),F$Z+=F$V.fun.call(this,F$V,F$T));F$q.shaderCall+=F$Z},F$y.uploadAttributesX=function(F$J,F$y){for(var F$T,F$V,F$Z=0,F$m=0,F$R=this._attributeParamsMap.length;F$m<F$R;F$m+=2)F$V=this._attributeParamsMap[F$m+1],null!=(F$T=F$J[this._attributeParamsMap[F$m]])&&(F$y._bind(),F$Z+=F$V.fun.call(this,F$V,F$T));F$q.shaderCall+=F$Z},F$y.uploadSceneUniforms=function(F$J){for(var F$y,F$T,F$V=0,F$Z=0,F$m=this._sceneUniformParamsMap.length;F$Z<F$m;F$Z+=2)F$T=this._sceneUniformParamsMap[F$Z+1],null!=(F$y=F$J[this._sceneUniformParamsMap[F$Z]])&&(F$V+=F$T.fun.call(this,F$T,F$y));F$q.shaderCall+=F$V},F$y.uploadCameraUniforms=function(F$J){for(var F$y,F$T,F$V=0,F$Z=0,F$m=this._cameraUniformParamsMap.length;F$Z<F$m;F$Z+=2)F$T=this._cameraUniformParamsMap[F$Z+1],null!=(F$y=F$J[this._cameraUniformParamsMap[F$Z]])&&(F$V+=F$T.fun.call(this,F$T,F$y));F$q.shaderCall+=F$V},F$y.uploadSpriteUniforms=function(F$J){for(var F$y,F$T,F$V=0,F$Z=0,F$m=this._spriteUniformParamsMap.length;F$Z<F$m;F$Z+=2)F$T=this._spriteUniformParamsMap[F$Z+1],null!=(F$y=F$J[this._spriteUniformParamsMap[F$Z]])&&(F$V+=F$T.fun.call(this,F$T,F$y));F$q.shaderCall+=F$V},F$y.uploadMaterialUniforms=function(F$J){for(var F$y,F$T,F$V=0,F$Z=0,F$m=this._materialUniformParamsMap.length;F$Z<F$m;F$Z+=2)F$T=this._materialUniformParamsMap[F$Z+1],null!=(F$y=F$J[this._materialUniformParamsMap[F$Z]])&&(F$V+=F$T.fun.call(this,F$T,F$y));F$q.shaderCall+=F$V},F$y.uploadRenderElementUniforms=function(F$J){for(var F$y,F$T,F$V=0,F$Z=0,F$m=this._renderElementUniformParamsMap.length;F$Z<F$m;F$Z+=2)F$T=this._renderElementUniformParamsMap[F$Z+1],null!=(F$y=F$J[this._renderElementUniformParamsMap[F$Z]])&&(F$V+=F$T.fun.call(this,F$T,F$y));F$q.shaderCall+=F$V},F$$.create=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){return new F$$(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A)},F$$.addInclude=function(F$J,F$y){F$L.addInclude(F$J,F$y)},F$$._createShader=function(F$J,F$y,F$T){var F$V=F$J.createShader(F$T);if(F$J.shaderSource(F$V,F$y),F$J.compileShader(F$V),F$qy.debugMode&&!F$J.getShaderParameter(F$V,35713))throw F$J.getShaderInfoLog(F$V);return F$V},F$$.PERIOD_RENDERELEMENT=0,F$$.PERIOD_MATERIAL=1,F$$.PERIOD_SPRITE=2,F$$.PERIOD_CAMERA=3,F$$.PERIOD_SCENE=4,F$$._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],F$$._count=0,F$$._preCompile=!1,F$$.extCompileFunc=null,F$$.extCompileObj=null,F$e(F$$,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new F$r}]),F$$}(),F$Xy=function(F$n){function F$K(){this._transformUV=null,F$K.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new F$Ry(.6,.6,.6)),this._setColor(10,new F$Ry(1,1,1)),this._setColor(11,new F$ny(1,1,1,8)),this._setColor(12,new F$Ry(1,1,1)),this._setColor(7,new F$ny(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new F$ny(1,1,0,0)),this.renderMode=1}F$G(F$K,"laya.d3.core.material.StandardMaterial",F$n);var F$J=F$K.prototype;return F$J.disableLight=function(){this._addDisablePublicShaderDefine(F$qy.SHADERDEFINE_POINTLIGHT|F$qy.SHADERDEFINE_SPOTLIGHT|F$qy.SHADERDEFINE_DIRECTIONLIGHT)},F$J.disableFog=function(){this._addDisablePublicShaderDefine(F$qy.SHADERDEFINE_FOG)},F$J.onAsynLoaded=function(F$J,F$y,F$T){var F$V=F$y[0];if(F$V.version)F$n.prototype.onAsynLoaded.call(this,F$J,F$y,F$T);else{var F$Z=F$y[1],F$m=F$V.props;for(var F$R in F$m)this[F$R]=F$m[F$R];F$K._parseStandardMaterial(F$Z,this,F$V),this._endLoaded()}},F$J.cloneTo=function(F$J){F$n.prototype.cloneTo.call(this,F$J);var F$y=F$J;this._transformUV&&(F$y._transformUV=this._transformUV.clone())},F$B(0,F$J,"ambientColor",function(){return this._getColor(9)},function(F$J){this._setColor(9,F$J)}),F$B(0,F$J,"ambientTexture",function(){return this._getTexture(5)},function(F$J){F$J?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,F$J)}),F$B(0,F$J,"renderMode",null,function(F$J){switch(F$J){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$K.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(F$J)}),F$B(0,F$J,"reflectColor",function(){return this._getColor(12)},function(F$J){this._setColor(12,F$J)}),F$B(0,F$J,"tilingOffset",function(){return this._getColor(15)},function(F$J){if(F$J){var F$y=F$J.elements;1!=F$y[0]||1!=F$y[1]||0!=F$y[2]||0!=F$y[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,F$J)}),F$B(0,F$J,"albedo",function(){return this._getColor(7)},function(F$J){this._setColor(7,F$J)}),F$B(0,F$J,"diffuseColor",function(){return this._getColor(10)},function(F$J){this._setColor(10,F$J)}),F$B(0,F$J,"albedoColor",function(){return this._getColor(7)},function(F$J){this._setColor(7,F$J)}),F$B(0,F$J,"specularColor",function(){return this._getColor(11)},function(F$J){this._setColor(11,F$J)}),F$B(0,F$J,"diffuseTexture",function(){return this._getTexture(1)},function(F$J){F$J?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,F$J)}),F$B(0,F$J,"normalTexture",function(){return this._getTexture(2)},function(F$J){F$J?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,F$J)}),F$B(0,F$J,"specularTexture",function(){return this._getTexture(3)},function(F$J){F$J?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,F$J)}),F$B(0,F$J,"emissiveTexture",function(){return this._getTexture(4)},function(F$J){F$J?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,F$J)}),F$B(0,F$J,"reflectTexture",function(){return this._getTexture(6)},function(F$J){F$J?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,F$J)}),F$B(0,F$J,"transformUV",function(){return this._transformUV},function(F$J){this._transformUV=F$J,this._setMatrix4x4(13,F$J.matrix),F$J?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,F$J.matrix.elements,0)}),F$K.__init__=function(){F$K.SHADERDEFINE_DIFFUSEMAP=F$K.shaderDefines.registerDefine("DIFFUSEMAP"),F$K.SHADERDEFINE_NORMALMAP=F$K.shaderDefines.registerDefine("NORMALMAP"),F$K.SHADERDEFINE_SPECULARMAP=F$K.shaderDefines.registerDefine("SPECULARMAP"),F$K.SHADERDEFINE_EMISSIVEMAP=F$K.shaderDefines.registerDefine("EMISSIVEMAP"),F$K.SHADERDEFINE_AMBIENTMAP=F$K.shaderDefines.registerDefine("AMBIENTMAP"),F$K.SHADERDEFINE_REFLECTMAP=F$K.shaderDefines.registerDefine("REFLECTMAP"),F$K.SHADERDEFINE_UVTRANSFORM=F$K.shaderDefines.registerDefine("UVTRANSFORM"),F$K.SHADERDEFINE_TILINGOFFSET=F$K.shaderDefines.registerDefine("TILINGOFFSET"),F$K.SHADERDEFINE_ADDTIVEFOG=F$K.shaderDefines.registerDefine("ADDTIVEFOG")},F$K.load=function(F$J){return F$P.loader.create(F$J,null,null,F$K)},F$K._parseStandardMaterial=function(F$J,F$y,F$T){var F$V=F$T.customProps,F$Z=F$V.ambientColor;F$y.ambientColor=new F$Ry(F$Z[0],F$Z[1],F$Z[2]);var F$m=F$V.diffuseColor;F$y.diffuseColor=new F$Ry(F$m[0],F$m[1],F$m[2]);var F$R=F$V.specularColor;F$y.specularColor=new F$ny(F$R[0],F$R[1],F$R[2],F$R[3]);var F$n=F$V.reflectColor;F$y.reflectColor=new F$Ry(F$n[0],F$n[1],F$n[2]);var F$K=F$V.albedoColor;F$K&&(F$y.albedo=new F$ny(F$K[0],F$K[1],F$K[2],F$K[3]));var F$A=F$V.diffuseTexture.texture2D;F$A&&(F$y.diffuseTexture=F$E.getRes(F$J[F$A]));var F$$=F$V.normalTexture.texture2D;F$$&&(F$y.normalTexture=F$E.getRes(F$J[F$$]));var F$e=F$V.specularTexture.texture2D;F$e&&(F$y.specularTexture=F$E.getRes(F$J[F$e]));var F$M=F$V.emissiveTexture.texture2D;F$M&&(F$y.emissiveTexture=F$E.getRes(F$J[F$M]));var F$G=F$V.ambientTexture.texture2D;F$G&&(F$y.ambientTexture=F$E.getRes(F$J[F$G]));var F$B=F$V.reflectTexture.texture2D;F$B&&(F$y.reflectTexture=F$E.getRes(F$J[F$B]))},F$K.RENDERMODE_OPAQUE=1,F$K.RENDERMODE_OPAQUEDOUBLEFACE=2,F$K.RENDERMODE_CUTOUT=3,F$K.RENDERMODE_CUTOUTDOUBLEFACE=4,F$K.RENDERMODE_TRANSPARENT=13,F$K.RENDERMODE_TRANSPARENTDOUBLEFACE=14,F$K.RENDERMODE_ADDTIVE=15,F$K.RENDERMODE_ADDTIVEDOUBLEFACE=16,F$K.RENDERMODE_DEPTHREAD_TRANSPARENT=5,F$K.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,F$K.RENDERMODE_DEPTHREAD_ADDTIVE=7,F$K.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,F$K.RENDERMODE_NONDEPTH_TRANSPARENT=9,F$K.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,F$K.RENDERMODE_NONDEPTH_ADDTIVE=11,F$K.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,F$K.SHADERDEFINE_DIFFUSEMAP=0,F$K.SHADERDEFINE_NORMALMAP=0,F$K.SHADERDEFINE_SPECULARMAP=0,F$K.SHADERDEFINE_EMISSIVEMAP=0,F$K.SHADERDEFINE_AMBIENTMAP=0,F$K.SHADERDEFINE_REFLECTMAP=0,F$K.SHADERDEFINE_UVTRANSFORM=0,F$K.SHADERDEFINE_TILINGOFFSET=0,F$K.SHADERDEFINE_ADDTIVEFOG=0,F$K.DIFFUSETEXTURE=1,F$K.NORMALTEXTURE=2,F$K.SPECULARTEXTURE=3,F$K.EMISSIVETEXTURE=4,F$K.AMBIENTTEXTURE=5,F$K.REFLECTTEXTURE=6,F$K.ALBEDO=7,F$K.UVANIAGE=8,F$K.MATERIALAMBIENT=9,F$K.MATERIALDIFFUSE=10,F$K.MATERIALSPECULAR=11,F$K.MATERIALREFLECT=12,F$K.UVMATRIX=13,F$K.UVAGE=14,F$K.TILINGOFFSET=15,F$e(F$K,["defaultMaterial",function(){var F$J=new F$K;return F$J.lock=!0,this.defaultMaterial=F$J},"shaderDefines",function(){return this.shaderDefines=new F$$y(F$ty.shaderDefines)}]),F$K}(F$ty),F$Sy=function(F$J){function F$R(F$J,F$y,F$T,F$V,F$Z){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===F$T&&(F$T=35044),void 0===F$V&&(F$V=!1),F$R.__super.call(this),this._indexType=F$J,this._indexCount=F$y,this._bufferUsage=F$T,this._bufferType=34963,this._canRead=F$V;var F$m;if("ushort"==F$J)this._indexTypeByteCount=2;else{if("ubyte"!=F$J)throw new Error("unidentification index type.");this._indexTypeByteCount=1}F$m=this._indexTypeByteCount*F$y,this._byteLength=F$m,this._bind(),F$n._gl.bufferData(this._bufferType,F$m,this._bufferUsage),this.uri=F$Z,F$V?("ushort"==F$J?this._buffer=new Uint16Array(F$y):"ubyte"==F$J&&(this._buffer=new Uint8Array(F$y)),this.memorySize=2*F$m):this.memorySize=F$m}F$G(F$R,"laya.d3.graphics.IndexBuffer3D",F$J);var F$y=F$R.prototype;return F$y.setData=function(F$J,F$y,F$T,F$V){void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=4294967295);var F$Z=0;if("ushort"==this._indexType?(F$Z=2,0===F$T&&4294967295===F$V||(F$J=new Uint16Array(F$J.buffer,F$T*F$Z,F$V))):"ubyte"==this._indexType&&(F$Z=1,0===F$T&&4294967295===F$V||(F$J=new Uint8Array(F$J.buffer,F$T*F$Z,F$V))),this._bind(),F$n._gl.bufferSubData(this._bufferType,F$y*F$Z,F$J),this._canRead)if(0!==F$y||0!==F$T||4294967295!==F$V){var F$m=this._buffer.length-F$y;F$m<F$V&&(F$V=F$m);for(var F$R=0;F$R<F$V;F$R++)this._buffer[F$y+F$R]=F$J[F$R]}else this._buffer=F$J},F$y.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},F$y.disposeResource=function(){F$J.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},F$B(0,F$y,"indexType",function(){return this._indexType}),F$B(0,F$y,"indexTypeByteCount",function(){return this._indexTypeByteCount}),F$B(0,F$y,"indexCount",function(){return this._indexCount}),F$B(0,F$y,"canRead",function(){return this._canRead}),F$R.INDEXTYPE_UBYTE="ubyte",F$R.INDEXTYPE_USHORT="ushort",F$R.create=function(F$J,F$y,F$T,F$V,F$Z){return void 0===F$T&&(F$T=35044),void 0===F$V&&(F$V=!1),new F$R(F$J,F$y,F$T,F$V,F$Z)},F$R}(F$n),F$fy=function(F$m){function F$R(F$J,F$y,F$T,F$V,F$Z){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===F$V&&(F$V=!1),F$R.__super.call(this),this._vertexDeclaration=F$J,this._vertexCount=F$y,this._bufferUsage=F$T,this._bufferType=34962,this._canRead=F$V,this.uri=F$Z,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*F$y,this._bind(),F$n._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),F$V&&(this._buffer=new Float32Array(this._byteLength/4))}F$G(F$R,"laya.d3.graphics.VertexBuffer3D",F$m);var F$J=F$R.prototype;return F$J.bindWithIndexBuffer=function(F$J){F$J&&F$J._bind(),this._bind()},F$J.setData=function(F$J,F$y,F$T,F$V){if(void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=4294967295),0===F$T&&4294967295===F$V||(F$J=new Float32Array(F$J.buffer,4*F$T,F$V)),this._bind(),F$n._gl.bufferSubData(this._bufferType,4*F$y,F$J),this._canRead)if(0!==F$y||0!==F$T||4294967295!==F$V){var F$Z=this._buffer.length-F$y;F$Z<F$V&&(F$V=F$Z);for(var F$m=0;F$m<F$V;F$m++)this._buffer[F$y+F$m]=F$J[F$m]}else this._buffer=F$J},F$J.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},F$J.disposeResource=function(){for(var F$J=F$v.mainContext,F$y=this._vertexDeclaration.getVertexElements(),F$T=F$n._enableAtributes,F$V=0,F$Z=F$y.length;F$V<F$Z;F$V++)F$T[F$V]===this._glBuffer&&(F$J.disableVertexAttribArray(F$V),F$T[F$V]=null);F$m.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},F$B(0,F$J,"vertexDeclaration",function(){return this._vertexDeclaration}),F$B(0,F$J,"vertexCount",function(){return this._vertexCount}),F$B(0,F$J,"canRead",function(){return this._canRead}),F$R.create=function(F$J,F$y,F$T,F$V,F$Z){return void 0===F$T&&(F$T=35044),void 0===F$V&&(F$V=!1),new F$R(F$J,F$y,F$T,F$V,F$Z)},F$R}(F$n),F$Wy=function(F$J){function F$L(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,F$L.__super.call(this),this._type=3553}F$G(F$L,"laya.d3.resource.DataTexture2D",F$vy);var F$y=F$L.prototype;return F$y.genDebugMipmaps=function(){var F$J=[];return F$J.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),F$J.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),F$J.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),F$J.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),F$J.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),F$J.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),F$J.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),F$J.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),F$J.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),F$J.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),F$J},F$y._onTextureLoaded=function(F$J){},F$y._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var F$J=F$v.mainContext,F$y=this._source=F$J.createTexture(),F$T=this._width,F$V=this._height,F$Z=F$Q.curBindTexTarget,F$m=F$Q.curBindTexValue,F$R=!1;if(F$Q.bindTexture(F$J,this._type,F$y),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var F$n=0;F$J.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var F$K=0;F$K<this._mipmaps.length;F$K++){if(this._mipmaps[F$K].byteLength!=F$A*F$$*4)throw"mipmap size error  level:"+F$K;F$J.texSubImage2D(this._type,0,F$L.simLodRect[F$n++],F$L.simLodRect[F$n++],F$L.simLodRect[F$n++],F$L.simLodRect[F$n++],6408,5121,new Uint8Array(this._mipmaps[F$K]))}this.minFifter=9729,this.magFifter=9729}else{var F$A=this._width,F$$=this._height;for(F$n=0,F$J.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),F$K=0;F$K<this._mipmaps.length;F$K++){if(this._mipmaps[F$K].byteLength!=F$A*F$$*4)throw"mipmap size error  level:"+F$K;F$J.texImage2D(this._type,F$K,6408,F$A,F$$,0,6408,5121,new Uint8Array(this._mipmaps[F$K])),(F$A/=2)<1&&(F$A=1),(F$$/=2)<1&&(F$$=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&F$J.pixelStorei(F$J.UNPACK_ALIGNMENT,1),F$J.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var F$e=0,F$M=!1,F$G=!1;this._buffer.byteLength==4*F$T*F$V?(F$e=6408,F$M=!0):this._buffer.byteLength==3*F$T*F$V?(F$e=6407,F$G=!0):F$e=this._format,F$M||F$G?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),F$G&&F$J.pixelStorei(F$J.UNPACK_ALIGNMENT,1),F$J.texImage2D(this._type,0,F$e,F$T,F$V,0,F$e,5121,this._buffer)):F$J&&F$e==F$J.ALPHA?(F$J.texImage2D(3553,0,F$e,F$T,F$V,0,F$e,F$J.UNSIGNED_BYTE,this._buffer),F$R=!0):0!=F$e&&(F$J.compressedTexImage2D(3553,0,F$e,F$T,F$V,0,this._buffer),F$R=!0)}var F$B=this._minFifter,F$o=this._magFifter,F$s=0==this._wrapModeU?10497:33071,F$E=0==this._wrapModeV?10497:33071,F$O=F$H.isPOT(F$T,F$V);F$O?(this._mipmap||this._mipmaps?-1!==F$B||(F$B=9987):-1!==F$B||(F$B=9729),-1!==F$o||(F$o=9729),F$J.texParameteri(this._type,10241,F$B),F$J.texParameteri(this._type,10240,F$o),F$J.texParameteri(this._type,10242,F$s),F$J.texParameteri(this._type,10243,F$E),this._mipmap&&F$J.generateMipmap(this._type)):(-1!==F$B||(F$B=9729),-1!==F$o||(F$o=9729),F$J.texParameteri(this._type,10241,F$B),F$J.texParameteri(this._type,10240,F$o),F$J.texParameteri(this._type,10242,33071),F$J.texParameteri(this._type,10243,33071)),F$Z&&F$m&&F$Q.bindTexture(F$J,F$Z,F$m),this.memorySize=F$R?this._buffer.length:F$O?F$T*F$V*4*(1+1/3):F$T*F$V*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},F$y.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},F$y.onAsynLoaded=function(F$J,F$y,F$T){var F$V;F$T&&(F$V=F$T[0].call(this,F$y)),F$V&&(this._width=F$V.width,this._height=F$V.height,this._buffer=F$V.data),this._src=F$J,this._size=new F$oy(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},F$y.getPixels=function(){return new Uint8Array(this._buffer)},F$y.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(F$v.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},F$B(0,F$y,"src",function(){return this._src}),F$L.create=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){if(void 0===F$V&&(F$V=9729),void 0===F$Z&&(F$Z=9729),void 0===F$m&&(F$m=!0),!F$J||F$J.byteLength<F$y*F$T*4)throw"DataTexture2D create error";var F$n=new F$L;return F$n.uri=F$R,F$n._buffer=F$J,F$n._width=F$y,F$n._height=F$T,F$n._mipmap=F$m,F$n._magFifter=F$V,F$n._minFifter=F$Z,F$n._size=new F$oy(F$n._width,F$n._height),F$n._conchTexture?alert("怎么给runtime传递datatexture数据"):F$n.activeResource(),F$n},F$L.load=function(F$J,F$y,F$T,F$V,F$Z){if(void 0===F$y&&(F$y=0),void 0===F$T&&(F$T=0),void 0===F$V&&(F$V=9729),void 0===F$Z&&(F$Z=9729),"mipmaps"===F$D.getFileExtension(F$J)){var F$m=F$P.loader.create(F$J,null,null,F$L,[function(F$J){this._mipmaps=[];var F$y=new Uint32Array(F$J);this._width=F$y[0];var F$T=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,F$T=1024),this._width!=F$T)throw"现在只支持512x256的环境贴图。当前的是"+F$y[0];this._height=F$y[1];for(var F$V=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,F$Z=this._height,F$m=8;;){var F$R=F$V*F$Z*4;if(F$m+F$R>F$J.byteLength)throw"load mipmaps data size error ";var F$n=new Uint8Array(F$J,F$m,F$R);if(this._mipmaps.push(F$n),F$m+=F$R,1==F$V&&1==F$Z)break;(F$V/=2)<1&&(F$V=1),(F$Z/=2)<1&&(F$Z=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){F$m.simLodInfo=new Float32Array(40);for(var F$R=0;F$R<F$m.simLodInfo.length;)F$m.simLodInfo[F$R]=(F$L.simLodRect[F$R]+.5)/1024,F$R++,F$m.simLodInfo[F$R]=(F$L.simLodRect[F$R]+.5)/256,F$R++,F$m.simLodInfo[F$R]=Math.max(F$L.simLodRect[F$R]-1,.1)/1024,F$R++,F$m.simLodInfo[F$R]=Math.max(F$L.simLodRect[F$R]-1.5,.1)/256,F$R++}return F$m}if("number"==typeof F$y)return F$P.loader.create(F$J,null,null,F$L,[function(F$J){return this._width=F$y,this._height=F$T,this._buffer=F$J,null}]);if("function"==typeof F$y)return F$P.loader.create(F$J,null,null,F$L,[F$y]);throw new Error("unknown params.")},F$L.lodasatlas=!1,F$e(F$L,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),F$L}(),F$Iy=function(F$J){function F$y(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,F$y.__super.call(this)}F$G(F$y,"laya.d3.resource.models.PrimitiveMesh",F$Qy);var F$T=F$y.prototype;return F$P.imps(F$T,{"laya.d3.core.render.IRenderable":!0}),F$T._getVertexBuffer=function(F$J){return void 0===F$J&&(F$J=0),0===F$J?this._vertexBuffer:null},F$T._getVertexBuffers=function(){return null},F$T._getIndexBuffer=function(){return this._indexBuffer},F$T._getPositions=function(){var F$J,F$y=[],F$T=this._vertexBuffer.vertexDeclaration.getVertexElements(),F$V=0;for(F$V=0;F$V<F$T.length;F$V++){var F$Z=F$T[F$V];if("vector3"===F$Z.elementFormat&&0===F$Z.elementUsage){F$J=F$Z;break}}var F$m=this._vertexBuffer.getData();for(F$V=0;F$V<F$m.length;F$V+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var F$R=F$V+F$J.offset/4,F$n=new F$Ry(F$m[F$R+0],F$m[F$R+1],F$m[F$R+2]);F$y.push(F$n)}return F$y},F$T.getRenderElement=function(F$J){return this},F$T.getRenderElementsCount=function(){return 1},F$T.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},F$T._beforeRender=function(F$J){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$T._render=function(F$J){F$v.mainContext.drawElements(4,this._numberIndices,5123,0),F$q.drawCall++,F$q.trianglesFaces+=this._numberIndices/3},F$B(0,F$T,"_vertexBufferCount",function(){return 1}),F$B(0,F$T,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$y}(),F$Yy=function(F$J){function F$y(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,F$y.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}F$G(F$y,"laya.d3.resource.models.Mesh",F$Qy);var F$T=F$y.prototype;return F$T._getPositions=function(){var F$J,F$y,F$T,F$V,F$Z,F$m=[],F$R=0,F$n=0,F$K=0;if(0!==this._vertexBuffers.length){var F$A=this._vertexBuffers.length;for(F$R=0;F$R<F$A;F$R++){for(F$T=(F$J=this._vertexBuffers[F$R]).vertexDeclaration.getVertexElements(),F$n=0;F$n<F$T.length;F$n++)if("vector3"===(F$V=F$T[F$n]).elementFormat&&0===F$V.elementUsage){F$y=F$V;break}for(F$Z=F$J.getData(),F$n=0;F$n<F$Z.length;F$n+=F$J.vertexDeclaration.vertexStride/4)F$K=F$n+F$y.offset/4,F$m.push(new F$Ry(F$Z[F$K+0],F$Z[F$K+1],F$Z[F$K+2]))}}else{var F$$=this._subMeshes.length;for(F$R=0;F$R<F$$;F$R++){for(F$T=(F$J=this._subMeshes[F$R]._getVertexBuffer()).vertexDeclaration.getVertexElements(),F$n=0;F$n<F$T.length;F$n++)if("vector3"===(F$V=F$T[F$n]).elementFormat&&0===F$V.elementUsage){F$y=F$V;break}for(F$Z=F$J.getData(),F$n=0;F$n<F$Z.length;F$n+=F$J.vertexDeclaration.vertexStride/4)F$K=F$n+F$y.offset/4,F$m.push(new F$Ry(F$Z[F$K+0],F$Z[F$K+1],F$Z[F$K+2]))}}return F$m},F$T._setSubMeshes=function(F$J){this._subMeshes=F$J,this._subMeshCount=F$J.length;for(var F$y=0;F$y<this._subMeshCount;F$y++)F$J[F$y]._indexInMesh=F$y;this._positions=this._getPositions(),this._generateBoundingObject()},F$T.onAsynLoaded=function(F$J,F$y,F$T){var F$V=F$y[0],F$Z=F$y[1];F$pJ.read(F$V,this,this._materials,this._subMeshes,F$Z),this.completeCreate(),this._endLoaded()},F$T.getSubMesh=function(F$J){return this._subMeshes[F$J]},F$T.getSubMeshCount=function(){return this._subMeshes.length},F$T.getRenderElementsCount=function(){return this._subMeshes.length},F$T.getRenderElement=function(F$J){return this._subMeshes[F$J]},F$T.disposeResource=function(){for(var F$J=0;F$J<this._subMeshes.length;F$J++)this._subMeshes[F$J].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},F$B(0,F$T,"materials",function(){return this._materials.slice()}),F$B(0,F$T,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),F$y.load=function(F$J){return F$P.loader.create(F$J,null,null,F$y)},F$y}(),F$Uy=(function(F$J){function F$A(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===F$T&&(F$T=6408),void 0===F$V&&(F$V=5121),void 0===F$Z&&(F$Z=33189),void 0===F$m&&(F$m=!1),void 0===F$R&&(F$R=!1),void 0===F$n&&(F$n=-1),void 0===F$K&&(F$K=-1),F$A.__super.call(this),this._type=3553,this._width=F$J,this._height=F$y,this._size=new F$oy(F$J,F$y),this._surfaceFormat=F$T,this._surfaceType=F$V,this._depthStencilFormat=F$Z,F$o.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=F$m,this._repeat=F$R,this._minFifter=F$n,this._magFifter=F$K,this.activeResource(),this._alreadyResolved=!0}F$G(F$A,"laya.d3.resource.RenderTexture",F$vy);var F$y=F$A.prototype;F$y.recreateResource=function(){var F$J=F$v.mainContext;this._frameBuffer=F$J.createFramebuffer(),this._source=F$J.createTexture();var F$y=F$Q.curBindTexTarget,F$T=F$Q.curBindTexValue;F$Q.bindTexture(F$J,this._type,this._source),F$J.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var F$V=this._minFifter,F$Z=this._magFifter,F$m=this._repeat?10497:33071;if(F$H.isPOT(this._width,this._height)?(this._mipmap?-1!==F$V||(F$V=9987):-1!==F$V||(F$V=9729),-1!==F$Z||(F$Z=9729),F$J.texParameteri(this._type,10241,F$V),F$J.texParameteri(this._type,10240,F$Z),F$J.texParameteri(this._type,10242,F$m),F$J.texParameteri(this._type,10243,F$m),this._mipmap&&F$J.generateMipmap(this._type)):(-1!==F$V||(F$V=9729),-1!==F$Z||(F$Z=9729),F$J.texParameteri(this._type,10241,F$V),F$J.texParameteri(this._type,10240,F$Z),F$J.texParameteri(this._type,10242,33071),F$J.texParameteri(this._type,10243,33071)),F$y&&F$T&&F$Q.bindTexture(F$J,F$y,F$T),F$J.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=F$J.createRenderbuffer(),F$J.bindRenderbuffer(36161,this._depthStencilBuffer),F$J.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),F$J.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:F$J.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:F$J.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:F$J.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}F$J.framebufferTexture2D(36160,36064,3553,this._source,0),F$J.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},F$y.start=function(){F$v.mainContext.bindFramebuffer(36160,this.frameBuffer),(F$A._currentRenderTarget=this)._alreadyResolved=!1},F$y.end=function(){F$v.mainContext.bindFramebuffer(36160,null),F$A._currentRenderTarget=null,this._alreadyResolved=!0},F$y.getData=function(F$J,F$y,F$T,F$V){var F$Z=F$v.mainContext;if(F$Z.bindFramebuffer(36160,this._frameBuffer),!(36053===F$Z.checkFramebufferStatus(36160)))return F$Z.bindFramebuffer(36160,null),null;var F$m=new Uint8Array(this._width*this._height*4);return F$Z.readPixels(F$J,F$y,F$T,F$V,this._surfaceFormat,this._surfaceType,F$m),F$Z.bindFramebuffer(36160,null),F$m},F$y.disposeResource=function(){if(this._frameBuffer){var F$J=F$v.mainContext;F$J.deleteTexture(this._source),F$J.deleteFramebuffer(this._frameBuffer),F$J.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},F$B(0,F$y,"surfaceFormat",function(){return this._surfaceFormat}),F$B(0,F$y,"surfaceType",function(){return this._surfaceType}),F$B(0,F$y,"depthStencilFormat",function(){return this._depthStencilFormat}),F$B(0,F$y,"source",function(){return this._alreadyResolved?F$P.superGet(F$vy,this,"source"):null}),F$B(0,F$y,"depthStencilBuffer",function(){return this._depthStencilBuffer}),F$B(0,F$y,"frameBuffer",function(){return this._frameBuffer}),F$A._currentRenderTarget=null}(),function(F$J){function F$y(F$J){this._color=null,this._pixels=null,F$y.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new F$oy(this.width,this.height),this._color=F$J,this._pixels=new Uint8Array([255*F$J.x,255*F$J.y,255*F$J.z,255*F$J.w]),this.uri="SolidColorTexture2D_"+this.id}F$G(F$y,"laya.d3.resource.SolidColorTexture2D",F$vy);var F$T=F$y.prototype;return F$T._createWebGlTexture=function(){var F$J=F$v.mainContext,F$y=this._source=F$J.createTexture(),F$T=this._width,F$V=this._height,F$Z=F$Q.curBindTexTarget,F$m=F$Q.curBindTexValue;F$Q.bindTexture(F$J,this._type,F$y),F$J.texImage2D(this._type,0,6408,F$T,F$V,0,6408,5121,this._pixels);var F$R=this._minFifter,F$n=this._magFifter,F$K=this._repeat?10497:33071,F$A=F$H.isPOT(F$T,F$V);F$A?(this._mipmap?-1!==F$R||(F$R=9987):-1!==F$R||(F$R=9729),-1!==F$n||(F$n=9729),F$J.texParameteri(this._type,10241,F$R),F$J.texParameteri(this._type,10240,F$n),F$J.texParameteri(this._type,10242,F$K),F$J.texParameteri(this._type,10243,F$K),this._mipmap&&F$J.generateMipmap(this._type)):(-1!==F$R||(F$R=9729),-1!==F$n||(F$n=9729),F$J.texParameteri(this._type,10241,F$R),F$J.texParameteri(this._type,10240,F$n),F$J.texParameteri(this._type,10242,33071),F$J.texParameteri(this._type,10243,33071)),F$Z&&F$m&&F$Q.bindTexture(F$J,F$Z,F$m),this.memorySize=F$A?F$T*F$V*4*(1+1/3):F$T*F$V*4},F$T.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},F$T.disposeResource=function(){this._source&&(F$v.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$e(F$y,["magentaTexture",function(){var F$J=new F$y(new F$ny(1,0,1,1));return F$J.lock=!0,this.magentaTexture=F$J},"grayTexture",function(){var F$J=new F$y(new F$ny(.5,.5,.5,1));return F$J.lock=!0,this.grayTexture=F$J}]),F$y}()),F$dy=function(F$J){function F$Z(F$J,F$y,F$T,F$V){this._canRead=!1,this._image=null,this._pixels=null,void 0===F$J&&(F$J=!1),void 0===F$y&&(F$y=!0),void 0===F$T&&(F$T=6408),void 0===F$V&&(F$V=!0),F$Z.__super.call(this),this._type=3553,this._repeat=F$y,this._canRead=F$J,this._format=F$T,this._mipmap=F$V}F$G(F$Z,"laya.d3.resource.Texture2D",F$vy);var F$y=F$Z.prototype;return F$y._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var F$J=F$v.mainContext,F$y=this._source=F$J.createTexture(),F$T=this._width,F$V=this._height,F$Z=F$Q.curBindTexTarget,F$m=F$Q.curBindTexValue;switch(F$Q.bindTexture(F$J,this._type,F$y),this._format){case 6407:case 6408:this._canRead?F$J.texImage2D(this._type,0,this._format,F$T,F$V,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?F$J.texImage2D(this._type,0,this._image._format,F$T,F$V,0,this._image._format,5121,this._image.atlasSource):F$J.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case F$v.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:F$J.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var F$R=this._minFifter,F$n=this._magFifter,F$K=this._repeat?10497:33071,F$A=0==this._wrapModeU?10497:33071,F$$=0==this._wrapModeV?10497:33071,F$e=F$H.isPOT(F$T,F$V);F$e?(this._mipmap?-1!==F$R||(F$R=9987):-1!==F$R||(F$R=9729),-1!==F$n||(F$n=9729),F$J.texParameteri(this._type,10241,F$R),F$J.texParameteri(this._type,10240,F$n),F$J.texParameteri(this._type,10242,F$K),F$J.texParameteri(this._type,10243,F$K),F$J.texParameteri(this._type,10242,F$A),F$J.texParameteri(this._type,10243,F$$),this._mipmap&&F$J.generateMipmap(this._type)):(-1!==F$R||(F$R=9729),-1!==F$n||(F$n=9729),F$J.texParameteri(this._type,10241,F$R),F$J.texParameteri(this._type,10240,F$n),F$J.texParameteri(this._type,10242,33071),F$J.texParameteri(this._type,10243,33071)),F$Z&&F$m&&F$Q.bindTexture(F$J,F$Z,F$m),this._image.onload=null,this._image=null,this.memorySize=F$e?F$T*F$V*4*(1+1/3):F$T*F$V*4},F$y.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},F$y.onAsynLoaded=function(F$J,F$y,F$T){if(F$T){var F$V=F$T[0];void 0!==F$V&&(this._canRead=F$V);var F$Z=F$T[1];void 0!==F$Z&&(this._repeat=F$Z);var F$m=F$T[2];void 0!==F$m&&(this._format=F$m);var F$R=F$T[3];void 0!==F$R&&(this._mipmap=F$R);var F$n=F$T.wrapModeU;void 0!==F$n&&(this._wrapModeU=F$n);var F$K=F$T.wrapModeV;void 0!==F$K&&(this._wrapModeV=F$K)}switch(this._format){case 6407:case 6408:var F$A=(this._image=F$y).width,F$$=F$y.height;this._width=F$A,this._height=F$$,this._size=new F$oy(F$A,F$$),this._canRead&&(F$o.isConchApp?F$y instanceof F$M.HTMLElement&&(this._pixels=new Uint8Array(F$y.getImageData(0,0,F$A,F$$))):(F$i.canvas.size(F$A,F$$),F$i.canvas.clear(),F$i.context.drawImage(F$y,0,0,F$A,F$$),this._pixels=new Uint8Array(F$i.context.getImageData(0,0,F$A,F$$).data.buffer)));break;case F$v.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var F$e=new F$l(F$y);F$e.readUTFBytes(4),F$e.readUTFBytes(2),F$e.getInt16();F$e.endian="bigEndian",this._width=F$e.getInt16(),this._height=F$e.getInt16(),this._size=new F$oy(this._width,this._height);F$e.getInt16(),F$e.getInt16();this._image=new Uint8Array(F$y,F$e.pos)}this.recreateResource(),this._endLoaded()},F$y.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},F$y.disposeResource=function(){this._source&&(F$v.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},F$B(0,F$y,"_src",function(){return this.url}),F$B(0,F$y,"src",function(){return this.url}),F$Z.load=function(F$J){return F$P.loader.create(F$J,null,null,F$Z)},F$Z}(),F$Cy=function(F$y){function F$T(F$J,F$y){F$T.__super.call(this),void 0===F$J&&(F$J=.3),void 0===F$y&&(F$y=1e3),this._tempVector3=new F$Ry,this._position=new F$Ry,this._up=new F$Ry,this._forward=new F$Ry,this._right=new F$Ry,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=F$oy.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=F$J,this._farPlane=F$y,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),F$P.stage.on("resize",this,this._onScreenSizeChanged)}F$G(F$T,"laya.d3.core.BaseCamera",F$y);var F$J=F$T.prototype;return F$J._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var F$J=this.scene._cameraPool,F$y=F$J.length-1,F$T=0;F$T<F$y;F$T++)if(F$J[F$T].renderingOrder>F$J[F$y].renderingOrder){var F$V=F$J[F$T];F$J[F$T]=F$J[F$y],F$J[F$y]=F$V}},F$J._calculateProjectionMatrix=function(){},F$J._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},F$J._prepareCameraToRender=function(){F$c._currentCameraCullingMask=this.cullingMask;var F$J=this._shaderValues;F$J.setValue(0,this.transform.position.elements),F$J.setValue(5,this.forward.elements),F$J.setValue(6,this.up.elements)},F$J._prepareCameraViewProject=function(F$J,F$y){var F$T=this._shaderValues;F$T.setValue(1,F$J.elements),F$T.setValue(2,F$y.elements)},F$J._renderCamera=function(F$J,F$y,F$T){},F$J.addLayer=function(F$J){29!==F$J.number&&30!=F$J.number&&(this.cullingMask=this.cullingMask|F$J.mask)},F$J.removeLayer=function(F$J){29!==F$J.number&&30!=F$J.number&&(this.cullingMask=this.cullingMask&~F$J.mask)},F$J.addAllLayers=function(){this.cullingMask=2147483647},F$J.removeAllLayers=function(){this.cullingMask=0|F$c.getLayerByNumber(29).mask|F$c.getLayerByNumber(30).mask},F$J.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},F$J.moveForward=function(F$J){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=F$J,this.transform.translate(this._tempVector3)},F$J.moveRight=function(F$J){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=F$J,this.transform.translate(this._tempVector3)},F$J.moveVertical=function(F$J){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=F$J,this.transform.translate(this._tempVector3,!1)},F$J._addSelfRenderObjects=function(){var F$J=this.scene._cameraPool,F$y=F$J.length;if(0<F$y){for(var F$T=F$y-1;0<=F$T;F$T--)if(this.renderingOrder<=F$J[F$T].renderingOrder){F$J.splice(F$T+1,0,this);break}}else F$J.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},F$J._clearSelfRenderObjects=function(){var F$J=this.scene._cameraPool;F$J.splice(F$J.indexOf(this),1)},F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,F$P.stage.off("resize",this,this._onScreenSizeChanged),F$y.prototype.destroy.call(this,F$J)},F$B(0,F$J,"sky",function(){return this._sky},function(F$J){(this._sky=F$J)._ownerCamera=this}),F$B(0,F$J,"forward",function(){var F$J=this.transform.worldMatrix.elements,F$y=this._forward.elements;return F$y[0]=-F$J[8],F$y[1]=-F$J[9],F$y[2]=-F$J[10],this._forward}),F$B(0,F$J,"position",function(){var F$J=this.transform.worldMatrix.elements,F$y=this._position.elements;return F$y[0]=F$J[12],F$y[1]=F$J[13],F$y[2]=F$J[14],this._position}),F$B(0,F$J,"renderTarget",function(){return this._renderTarget},function(F$J){null!=(this._renderTarget=F$J)&&(this._renderTargetSize=F$J.size)}),F$B(0,F$J,"up",function(){var F$J=this.transform.worldMatrix.elements,F$y=this._up.elements;return F$y[0]=F$J[4],F$y[1]=F$J[5],F$y[2]=F$J[6],this._up}),F$B(0,F$J,"right",function(){var F$J=this.transform.worldMatrix.elements,F$y=this._right.elements;return F$y[0]=F$J[0],F$y[1]=F$J[1],F$y[2]=F$J[2],this._right}),F$B(0,F$J,"renderTargetSize",function(){return this._renderTargetSize},function(F$J){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=F$J,this._calculateProjectionMatrix()}),F$B(0,F$J,"fieldOfView",function(){return this._fieldOfView},function(F$J){this._fieldOfView=F$J,this._calculateProjectionMatrix()}),F$B(0,F$J,"nearPlane",function(){return this._nearPlane},function(F$J){this._nearPlane=F$J,this._calculateProjectionMatrix()}),F$B(0,F$J,"farPlane",function(){return this._farPlane},function(F$J){this._farPlane=F$J,this._calculateProjectionMatrix()}),F$B(0,F$J,"orthographic",function(){return this._orthographic},function(F$J){this._orthographic=F$J,this._calculateProjectionMatrix()}),F$B(0,F$J,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(F$J){this._orthographicVerticalSize=F$J,this._calculateProjectionMatrix()}),F$B(0,F$J,"renderingOrder",function(){return this._renderingOrder},function(F$J){this._renderingOrder=F$J,this._sortCamerasByRenderingOrder()}),F$T.CAMERAPOS=0,F$T.VIEWMATRIX=1,F$T.PROJECTMATRIX=2,F$T.VPMATRIX=3,F$T.VPMATRIX_NO_TRANSLATE=4,F$T.CAMERADIRECTION=5,F$T.CAMERAUP=6,F$T.ENVIRONMENTDIFFUSE=7,F$T.ENVIRONMENTSPECULAR=8,F$T.SIMLODINFO=9,F$T.DIFFUSEIRRADMATR=10,F$T.DIFFUSEIRRADMATG=11,F$T.DIFFUSEIRRADMATB=12,F$T.HDREXPOSURE=13,F$T.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",F$T.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",F$T.CLEARFLAG_SOLIDCOLOR=0,F$T.CLEARFLAG_SKY=1,F$T.CLEARFLAG_DEPTHONLY=2,F$T.CLEARFLAG_NONE=3,F$e(F$T,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new F$Jy(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new F$Jy},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new F$Jy}]),F$T}(F$xy),F$Fy=function(F$T){function F$y(F$J){this._render=null,this._geometryFilter=null,F$y.__super.call(this,F$J)}F$G(F$y,"laya.d3.core.RenderableSprite3D",F$T);var F$J=F$y.prototype;return F$J._addToInitStaticBatchManager=function(){},F$J._setBelongScene=function(F$J){F$T.prototype._setBelongScene.call(this,F$J),F$J._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},F$J._setUnBelongScene=function(){var F$J=this._scene._renderableSprite3Ds,F$y=F$J.indexOf(this);F$J.splice(F$y,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),F$T.prototype._setUnBelongScene.call(this)},F$J._update=function(F$J){(F$J.owner=this)._activeInHierarchy&&(this._updateComponents(F$J),this._render._updateOctreeNode(),this._lateUpdateComponents(F$J),F$q.spriteCount++,this._childs.length&&this._updateChilds(F$J))},F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$T.prototype.destroy.call(this,F$J),this._render._destroy(),this._render=null},F$y.__init__=function(){F$y.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=F$y.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),F$y.SAHDERDEFINE_LIGHTMAP=F$y.shaderDefines.registerDefine("LIGHTMAP")},F$y.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,F$y.SAHDERDEFINE_LIGHTMAP=4,F$y.LIGHTMAPSCALEOFFSET=2,F$y.LIGHTMAP=3,F$e(F$y,["shaderDefines",function(){return this.shaderDefines=new F$$y}]),F$y}(F$xy),F$by=(function(F$J){function F$V(F$J,F$y,F$T){this._long=NaN,this._width=NaN,this._height=NaN,void 0===F$J&&(F$J=1),void 0===F$y&&(F$y=1),void 0===F$T&&(F$T=1),F$V.__super.call(this),this._long=F$J,this._width=F$y,this._height=F$T,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}F$G(F$V,"laya.d3.resource.models.BoxMesh",F$Iy);var F$y=F$V.prototype;F$y.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var F$J=F$vJ.vertexDeclaration,F$y=(F$J.vertexStride,this._long/2),F$T=this._height/2,F$V=this._width/2,F$Z=new Float32Array([-F$y,F$T,-F$V,0,1,0,0,0,F$y,F$T,-F$V,0,1,0,1,0,F$y,F$T,F$V,0,1,0,1,1,-F$y,F$T,F$V,0,1,0,0,1,-F$y,-F$T,-F$V,0,-1,0,0,1,F$y,-F$T,-F$V,0,-1,0,1,1,F$y,-F$T,F$V,0,-1,0,1,0,-F$y,-F$T,F$V,0,-1,0,0,0,-F$y,F$T,-F$V,-1,0,0,0,0,-F$y,F$T,F$V,-1,0,0,1,0,-F$y,-F$T,F$V,-1,0,0,1,1,-F$y,-F$T,-F$V,-1,0,0,0,1,F$y,F$T,-F$V,1,0,0,1,0,F$y,F$T,F$V,1,0,0,0,0,F$y,-F$T,F$V,1,0,0,0,1,F$y,-F$T,-F$V,1,0,0,1,1,-F$y,F$T,F$V,0,0,1,0,0,F$y,F$T,F$V,0,0,1,1,0,F$y,-F$T,F$V,0,0,1,1,1,-F$y,-F$T,F$V,0,0,1,0,1,-F$y,F$T,-F$V,0,0,-1,1,0,F$y,F$T,-F$V,0,0,-1,0,0,F$y,-F$T,-F$V,0,0,-1,0,1,-F$y,-F$T,-F$V,0,0,-1,1,1]),F$m=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new F$fy(F$J,this._numberVertices,35044,!0),this._indexBuffer=new F$Sy("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(F$Z),this._indexBuffer.setData(F$m),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},F$B(0,F$y,"long",function(){return this._long},function(F$J){this._long!==F$J&&(this._long=F$J,this.releaseResource(),this.activeResource())}),F$B(0,F$y,"width",function(){return this._width},function(F$J){this._width!==F$J&&(this._width=F$J,this.releaseResource(),this.activeResource())}),F$B(0,F$y,"height",function(){return this._height},function(F$J){this._height!==F$J&&(this._height=F$J,this.releaseResource(),this.activeResource())})}(),function(F$J){function F$R(F$J,F$y,F$T){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=.3),void 0===F$T&&(F$T=1e3),this._viewMatrix=new F$Jy,this._projectionMatrix=new F$Jy,this._projectionViewMatrix=new F$Jy,this._viewport=new F$Ky(0,0,0,0),this._normalizedViewport=new F$Ky(0,0,1,1),this._aspectRatio=F$J,this._boundFrustumUpdate=!0,this._boundFrustum=new F$gJ(F$Jy.DEFAULT),F$R.__super.call(this,F$y,F$T),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}F$G(F$R,"laya.d3.core.Camera",F$Cy);var F$y=F$R.prototype;return F$y._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},F$y._parseCustomProps=function(F$J,F$y,F$T,F$V){var F$Z=F$T.clearColor;this.clearColor=new F$ny(F$Z[0],F$Z[1],F$Z[2],F$Z[3]);var F$m=F$T.viewport;this.normalizedViewport=new F$Ky(F$m[0],F$m[1],F$m[2],F$m[3])},F$y._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var F$J=this.orthographicVerticalSize*this.aspectRatio*.5,F$y=.5*this.orthographicVerticalSize;F$Jy.createOrthoOffCenterRH(-F$J,F$J,-F$y,F$y,this.nearPlane,this.farPlane,this._projectionMatrix)}else F$Jy.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},F$y._update=function(F$J){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,F$J)},F$y._renderCamera=function(F$J,F$y,F$T){var F$V,F$Z;F$T.parallelSplitShadowMaps[0]&&F$T._renderShadowMap(F$J,F$y,this),(F$y.camera=this)._prepareCameraToRender(),F$T._preRenderUpdateComponents(F$y),F$V=F$y._viewMatrix=this.viewMatrix;var F$m=this._renderTarget;F$m?(F$m.start(),F$Jy.multiply(F$Cy._invertYScaleMatrix,this._projectionMatrix,F$Cy._invertYProjectionMatrix),F$Jy.multiply(F$Cy._invertYScaleMatrix,this.projectionViewMatrix,F$Cy._invertYProjectionViewMatrix),F$Z=F$y._projectionMatrix=F$Cy._invertYProjectionMatrix,F$y._projectionViewMatrix=F$Cy._invertYProjectionViewMatrix):(F$Z=F$y._projectionMatrix=this._projectionMatrix,F$y._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(F$V,F$Z),F$y._viewport=this.viewport,F$T._preRenderScene(F$J,F$y,this.boundFrustum),F$T._clear(F$J,F$y),F$T._renderScene(F$J,F$y),F$T._postRenderUpdateComponents(F$y),F$m&&F$m.end()},F$y.viewportPointToRay=function(F$J,F$y){F$By.calculateCursorRay(F$J,this.viewport,this._projectionMatrix,this.viewMatrix,null,F$y)},F$y.normalizedViewportPointToRay=function(F$J,F$y){var F$T=F$R._tempVector20,F$V=this.viewport,F$Z=F$J.elements,F$m=F$T.elements;F$m[0]=F$Z[0]*F$V.width,F$m[1]=F$Z[1]*F$V.height,F$By.calculateCursorRay(F$T,this.viewport,this._projectionMatrix,this.viewMatrix,null,F$y)},F$y.worldToViewportPoint=function(F$J,F$y){F$Jy.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(F$J,this._projectionViewMatrix,F$y);var F$T=F$y.elements;F$T[0]=F$T[0]/F$P.stage.clientScaleX,F$T[1]=F$T[1]/F$P.stage.clientScaleY},F$y.worldToNormalizedViewportPoint=function(F$J,F$y){F$Jy.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(F$J,this._projectionViewMatrix,F$y);var F$T=F$y.elements;F$T[0]=F$T[0]/F$P.stage.clientScaleX,F$T[1]=F$T[1]/F$P.stage.clientScaleY},F$y.convertScreenCoordToOrthographicCoord=function(F$J,F$y){if(this._orthographic){var F$T=F$p.clientWidth,F$V=F$p.clientHeight,F$Z=this.orthographicVerticalSize*this.aspectRatio/F$T,F$m=this.orthographicVerticalSize/F$V,F$R=F$J.elements,F$n=F$y.elements;return F$n[0]=(-F$T/2+F$R[0])*F$Z,F$n[1]=(F$V/2-F$R[1])*F$m,F$n[2]=(this.nearPlane-this.farPlane)*(F$R[2]+1)/2-this.nearPlane,F$Ry.transformCoordinate(F$y,this.transform.worldMatrix,F$y),!0}return!1},F$B(0,F$y,"projectionViewMatrix",function(){return F$Jy.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),F$B(0,F$y,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var F$J=this.viewport;return F$J.width/F$J.height},function(F$J){if(F$J<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=F$J,this._calculateProjectionMatrix()}),F$B(0,F$y,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),F$B(0,F$y,"needViewport",function(){var F$J=this.normalizedViewport;return 0===F$J.x&&0===F$J.y&&1===F$J.width&&1===F$J.height}),F$B(0,F$y,"viewport",function(){if(this._viewportExpressedInClipSpace){var F$J=this._normalizedViewport,F$y=this.renderTargetSize,F$T=F$y.width,F$V=F$y.height;this._viewport.x=F$J.x*F$T,this._viewport.y=F$J.y*F$V,this._viewport.width=F$J.width*F$T,this._viewport.height=F$J.height*F$V}return this._viewport},function(F$J){if(null!=this.renderTarget&&(F$J.x<0||F$J.y<0||0==F$J.width||0==F$J.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=F$J,this._calculateProjectionMatrix()}),F$B(0,F$y,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var F$J=this._viewport,F$y=this.renderTargetSize,F$T=F$y.width,F$V=F$y.height;this._normalizedViewport.x=F$J.x/F$T,this._normalizedViewport.y=F$J.y/F$V,this._normalizedViewport.width=F$J.width/F$T,this._normalizedViewport.height=F$J.height/F$V}return this._normalizedViewport},function(F$J){F$J.x<0&&(F$J.x=0,console.warn("Camera: viewport.x must large than 0.0.")),F$J.y<0&&(F$J.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<F$J.x+F$J.width&&(F$J.width=1-F$J.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<F$J.y+F$J.height&&(F$J.height=1-F$J.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=F$J,this._calculateProjectionMatrix()}),F$B(0,F$y,"projectionMatrix",function(){return this._projectionMatrix},function(F$J){this._projectionMatrix=F$J,this._useUserProjectionMatrix=!0}),F$B(0,F$y,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),F$e(F$R,["_tempVector20",function(){return this._tempVector20=new F$my}]),F$R}()),F$hy=function(F$T){function F$V(F$J,F$y){F$V.__super.call(this,F$y),this._geometryFilter=new F$iy(this),this._render=new F$cy(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),F$J&&(this._geometryFilter.sharedMesh=F$J)instanceof laya.d3.resource.models.Mesh&&(F$J.loaded?this._render.sharedMaterials=F$J.materials:F$J.once("loaded",this,this._applyMeshMaterials))}F$G(F$V,"laya.d3.core.MeshSprite3D",F$T);var F$J=F$V.prototype;return F$J._changeRenderObjectByMesh=function(F$J){var F$y=this._render._renderElements,F$T=F$y[F$J];F$T||(F$T=F$y[F$J]=new F$ay),F$T._render=this._render;var F$V=this._render.sharedMaterials[F$J];F$V||(F$V=F$Xy.defaultMaterial);var F$Z=this._geometryFilter.sharedMesh.getRenderElement(F$J);return F$T._mainSortID=this._getSortID(F$Z,F$V),F$T._sprite3D=this,F$T.renderObj=F$Z,F$T._material=F$V,F$T},F$J._changeRenderObjectByMaterial=function(F$J,F$y){var F$T=this._render._renderElements[F$J];F$y||(F$y=F$Xy.defaultMaterial);var F$V=this._geometryFilter.sharedMesh.getRenderElement(F$J);return F$T._mainSortID=this._getSortID(F$V,F$y),F$T._sprite3D=this,F$T.renderObj=F$V,F$T._material=F$y,F$T},F$J._changeRenderObjectsByMesh=function(){var F$J=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=F$J;for(var F$y=0;F$y<F$J;F$y++)this._changeRenderObjectByMesh(F$y)},F$J._onMeshChanged=function(F$J){var F$y=F$J.sharedMesh;F$y.loaded?this._changeRenderObjectsByMesh():F$y.once("loaded",this,this._onMeshLoaded)},F$J._onMeshLoaded=function(F$J){F$J===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},F$J._onMaterialChanged=function(F$J,F$y,F$T){F$y<this._render._renderElements.length&&this._changeRenderObjectByMaterial(F$y,F$T)},F$J._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},F$J._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},F$J._parseCustomProps=function(F$J,F$y,F$T,F$V){var F$Z=this.meshRender,F$m=F$T.lightmapIndex;null!=F$m&&(F$Z.lightmapIndex=F$m);var F$R,F$n,F$K=F$T.lightmapScaleOffset;if(F$K&&(F$Z.lightmapScaleOffset=new F$ny(F$K[0],F$K[1],F$K[2],F$K[3])),F$V.instanceParams)(F$R=F$V.instanceParams.loadPath)&&(F$n=F$E.getRes(F$y[F$R]),(this.meshFilter.sharedMesh=F$n).loaded?F$Z.sharedMaterials=F$n.materials:F$n.once("loaded",this,this._applyMeshMaterials));else{(F$R=F$T.meshPath)&&(F$n=F$E.getRes(F$y[F$R]),this.meshFilter.sharedMesh=F$n);var F$A=F$T.materials;if(F$A){var F$$=F$Z.sharedMaterials,F$e=F$A.length;F$$.length=F$e;for(var F$M=0;F$M<F$e;F$M++)F$$[F$M]=F$E.getRes(F$y[F$A[F$M].path]);F$Z.sharedMaterials=F$$}}},F$J._applyMeshMaterials=function(F$J){for(var F$y=this._render.sharedMaterials,F$T=F$J.materials,F$V=0,F$Z=F$T.length;F$V<F$Z;F$V++)F$y[F$V]||(F$y[F$V]=F$T[F$V]);this._render.sharedMaterials=F$y},F$J._addToInitStaticBatchManager=function(){F$V._staticBatchManager._addInitBatchSprite(this)},F$J.cloneTo=function(F$J){var F$y=F$J;F$y._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var F$T=this._render,F$V=F$y._render;F$V.enable=F$T.enable,F$V.sharedMaterials=F$T.sharedMaterials,F$V.castShadow=F$T.castShadow;var F$Z=F$T.lightmapScaleOffset;F$Z&&(F$V.lightmapScaleOffset=F$Z.clone()),F$V.lightmapIndex=F$T.lightmapIndex,F$V.receiveShadow=F$T.receiveShadow,F$V.sortingFudge=F$T.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,F$J)},F$J.destroy=function(F$J){if(void 0===F$J&&(F$J=!0),!this.destroyed){var F$y=this.meshFilter.sharedMesh;null!=F$y&&(F$y.loaded||F$y.off("loaded",this,this._applyMeshMaterials)),F$T.prototype.destroy.call(this,F$J),this._geometryFilter._destroy()}},F$B(0,F$J,"meshFilter",function(){return this._geometryFilter}),F$B(0,F$J,"meshRender",function(){return this._render}),F$V.__init__=function(){F$VJ._staticBatchManagers.push(F$V._staticBatchManager)},F$V.load=function(F$J){return F$P.loader.create(F$J,null,null,F$V)},F$e(F$V,["_staticBatchManager",function(){return this._staticBatchManager=new F$ry}]),F$V}(F$Fy)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$J,F$y){"use strict";for(var F$T in Object.defineProperty(F$y,"__esModule",{value:!0}),Laya){var F$V=Laya[F$T];F$V&&F$V.__isclass&&(F$y[F$T]=F$V)}}),function(F$J,F$y,F$ZJ){F$ZJ.un,F$ZJ.uns;var F$T=F$ZJ.static,F$V=F$ZJ.class,F$m=F$ZJ.getset,F$o=F$ZJ.__newvec,F$n=laya.maths.Bezier,F$e=laya.utils.Browser,F$vJ=laya.utils.Byte,F$Z=(laya.events.Event,laya.events.EventDispatcher),F$R=laya.display.Graphics,F$K=(laya.resource.HTMLCanvas,laya.utils.Handler),F$A=laya.net.Loader,F$M=laya.maths.MathUtil,F$QJ=laya.maths.Matrix,F$s=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),F$$=(laya.renders.RenderContext,laya.resource.Resource),F$G=laya.utils.RunDriver,F$mJ=laya.display.Sprite,F$B=laya.utils.Stat,F$iJ=laya.resource.Texture,F$E=(laya.net.URL,laya.utils.Utils),F$Q=function(){function F$J(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return F$V(F$J,"laya.ani.AnimationContent"),F$J}(),F$i=function(){function F$J(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return F$V(F$J,"laya.ani.AnimationNodeContent"),F$J}(),F$L=function(){function F$J(){}return F$V(F$J,"laya.ani.AnimationParser01"),F$J.parse=function(F$J,F$y){var F$T=F$y.__getBuffer(),F$V=0,F$Z=0,F$m=0,F$R=0,F$n=0,F$K=0,F$A=0,F$$=F$y.readUTFString();F$J._aniClassName=F$$;var F$e,F$M=F$y.readUTFString().split("\n"),F$G=F$y.getUint8(),F$B=F$y.getUint32(),F$o=F$y.getUint32();0<F$B&&(F$e=F$T.slice(F$B,F$o));var F$s=new F$vJ(F$e);for(0<F$o&&(F$J._publicExtData=F$T.slice(F$o,F$T.byteLength)),F$J._useParent=!!F$y.getUint8(),F$J._anis.length=F$G,F$V=0;F$V<F$G;F$V++){var F$E=F$J._anis[F$V]=new F$Q;F$E.nodes=new Array;var F$O=F$E.name=F$M[F$y.getUint16()];F$J._aniMap[F$O]=F$V,F$E.bone3DMap={},F$E.playTime=F$y.getFloat32(),F$E.playTime<=0&&console.error("播放时间不能为0  url="+F$J.url+" name="+F$E.name);var F$L=F$E.nodes.length=F$y.getUint8();for(F$Z=F$E.totalKeyframeDatasLength=0;F$Z<F$L;F$Z++){var F$H=F$E.nodes[F$Z]=new F$i;F$H.childs=[];var F$P=F$y.getInt16();0<=F$P&&(F$H.name=F$M[F$P],F$E.bone3DMap[F$H.name]=F$Z),F$H.keyFrame=new Array,F$H.parentIndex=F$y.getInt16(),-1==F$H.parentIndex?F$H.parent=null:F$H.parent=F$E.nodes[F$H.parentIndex],F$H.lerpType=F$y.getUint8();var F$l=F$y.getUint32();F$s.pos=F$l;var F$a=F$H.keyframeWidth=F$s.getUint16();if(F$E.totalKeyframeDatasLength+=F$a,0===F$H.lerpType||1===F$H.lerpType)for(F$H.interpolationMethod=[],F$H.interpolationMethod.length=F$a,F$m=0;F$m<F$a;F$m++)F$H.interpolationMethod[F$m]=F$x.interpolation[F$s.getUint8()];null!=F$H.parent&&F$H.parent.childs.push(F$H);var F$q=F$y.getUint16();0<F$q&&(F$H.extenData=F$T.slice(F$y.pos,F$y.pos+F$q),F$y.pos+=F$q);var F$r,F$D=F$y.getUint16(),F$_=0;for(F$m=0,F$R=F$H.keyFrame.length=F$D;F$m<F$R;F$m++){if((F$r=F$H.keyFrame[F$m]=new F$c).duration=F$y.getFloat32(),F$r.startTime=F$_,2===F$H.lerpType){F$r.interpolationData=[];var F$t,F$v=F$y.getUint8();switch(F$t=F$y.getFloat32()){case 254:for(F$r.interpolationData.length=F$a,F$A=0;F$A<F$a;F$A++)F$r.interpolationData[F$A]=0;break;case 255:for(F$r.interpolationData.length=F$a,F$A=0;F$A<F$a;F$A++)F$r.interpolationData[F$A]=5;break;default:for(F$r.interpolationData.push(F$t),F$K=1;F$K<F$v;F$K++)F$r.interpolationData.push(F$y.getFloat32())}}for(F$r.data=new Float32Array(F$a),F$n=0;F$n<F$a;F$n++)F$r.data[F$n]=F$y.getFloat32(),-1e-8<F$r.data[F$n]&&F$r.data[F$n]<1e-8&&(F$r.data[F$n]=0);F$_+=F$r.duration}F$r.startTime=F$E.playTime,F$H.playTime=F$E.playTime,F$J._calculateKeyFrame(F$H,F$D,F$a)}}},F$J}(),F$H=function(){function F$P(){}return F$V(F$P,"laya.ani.AnimationParser02"),F$P.READ_DATA=function(){F$P._DATA.offset=F$P._reader.getUint32(),F$P._DATA.size=F$P._reader.getUint32()},F$P.READ_BLOCK=function(){for(var F$J=F$P._BLOCK.count=F$P._reader.getUint16(),F$y=F$P._BLOCK.blockStarts=[],F$T=F$P._BLOCK.blockLengths=[],F$V=0;F$V<F$J;F$V++)F$y.push(F$P._reader.getUint32()),F$T.push(F$P._reader.getUint32())},F$P.READ_STRINGS=function(){var F$J=F$P._reader.getUint32(),F$y=F$P._reader.getUint16(),F$T=F$P._reader.pos;F$P._reader.pos=F$J+F$P._DATA.offset;for(var F$V=0;F$V<F$y;F$V++)F$P._strings[F$V]=F$P._reader.readUTFString();F$P._reader.pos=F$T},F$P.parse=function(F$J,F$y){F$P._templet=F$J;(F$P._reader=F$y).__getBuffer();F$P.READ_DATA(),F$P.READ_BLOCK(),F$P.READ_STRINGS();for(var F$T=0,F$V=F$P._BLOCK.count;F$T<F$V;F$T++){var F$Z=F$y.getUint16(),F$m=F$P._strings[F$Z],F$R=F$P["READ_"+F$m];if(null==F$R)throw new Error("model file err,no this function:"+F$Z+" "+F$m);F$R.call()}},F$P.READ_ANIMATIONS=function(){var F$J=F$P._reader,F$y=F$J.__getBuffer(),F$T=0,F$V=0,F$Z=0,F$m=0,F$R=F$J.getUint16(),F$n=[];for(F$n.length=F$R,F$T=0;F$T<F$R;F$T++)F$n[F$T]=F$x.interpolation[F$J.getByte()];var F$K=F$J.getUint8();for(F$P._templet._anis.length=F$K,F$T=0;F$T<F$K;F$T++){var F$A=F$P._templet._anis[F$T]={};F$A.nodes=new Array;var F$$=F$A.name=F$P._strings[F$J.getUint16()];F$P._templet._aniMap[F$$]=F$T,F$A.bone3DMap={},F$A.playTime=F$J.getFloat32();var F$e=F$A.nodes.length=F$J.getInt16();for(F$V=F$A.totalKeyframeDatasLength=0;F$V<F$e;F$V++){var F$M=F$A.nodes[F$V]={};F$M.keyframeWidth=F$R,F$M.childs=[];var F$G=F$J.getUint16();0<=F$G&&(F$M.name=F$P._strings[F$G],F$A.bone3DMap[F$M.name]=F$V),F$M.keyFrame=new Array,F$M.parentIndex=F$J.getInt16(),-1==F$M.parentIndex?F$M.parent=null:F$M.parent=F$A.nodes[F$M.parentIndex],F$A.totalKeyframeDatasLength+=F$R,F$M.interpolationMethod=F$n,null!=F$M.parent&&F$M.parent.childs.push(F$M);var F$B=F$J.getUint16(),F$o=null,F$s=null;for(F$Z=0,F$m=F$M.keyFrame.length=F$B;F$Z<F$m;F$Z++){(F$o=F$M.keyFrame[F$Z]={}).startTime=F$J.getFloat32(),F$s&&(F$s.duration=F$o.startTime-F$s.startTime);var F$E=F$P._DATA.offset,F$O=F$J.getUint32(),F$L=4*F$R,F$H=F$y.slice(F$E+F$O,F$E+F$O+F$L);F$o.data=new Float32Array(F$H),F$s=F$o}F$o.duration=0,F$M.playTime=F$A.playTime,F$P._templet._calculateKeyFrame(F$M,F$B,F$R)}}},F$P._templet=null,F$P._reader=null,F$P._strings=[],F$T(F$P,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$P}(),F$cJ=(function(){function F$J(){}F$V(F$J,"laya.ani.AnimationState"),F$J.stopped=0,F$J.paused=1,F$J.playing=2}(),function(){function F$Z(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new F$FJ,this.resultMatrix=new F$QJ,this._children=[]}F$V(F$Z,"laya.ani.bone.Bone");var F$J=F$Z.prototype;return F$J.setTempMatrix=function(F$J){this._tempMatrix=F$J;var F$y,F$T=0;for(F$T=0,F$y=this._children.length;F$T<F$y;F$T++)this._children[F$T].setTempMatrix(this._tempMatrix)},F$J.update=function(F$J){var F$y;if(this.rotation=this.transform.skX,F$J)F$y=this.resultTransform.getMatrix(),F$QJ.mul(F$y,F$J,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)F$y=this.resultTransform.getMatrix(),F$QJ.mul(F$y,this.parentBone.resultMatrix,this.resultMatrix);else{var F$T=this.parentBone,F$V=NaN,F$Z=NaN,F$m=NaN,F$R=this.parentBone.resultMatrix;F$y=this.resultTransform.getMatrix();var F$n=F$R.a*F$y.tx+F$R.c*F$y.ty+F$R.tx,F$K=F$R.b*F$y.tx+F$R.d*F$y.ty+F$R.ty,F$A=new F$QJ;this.inheritRotation?(F$V=Math.atan2(F$T.resultMatrix.b,F$T.resultMatrix.a),F$Z=Math.cos(F$V),F$m=Math.sin(F$V),F$A.setTo(F$Z,F$m,-F$m,F$Z,0,0),F$QJ.mul(this._tempMatrix,F$A,F$QJ.TEMP),F$QJ.TEMP.copyTo(F$A),F$y=this.resultTransform.getMatrix(),F$QJ.mul(F$y,F$A,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,F$y=this.resultTransform.getMatrix(),F$QJ.TEMP.identity(),F$QJ.TEMP.d=this.d,F$QJ.mul(F$y,F$QJ.TEMP,this.resultMatrix)),this.resultMatrix.tx=F$n,this.resultMatrix.ty=F$K}else(F$y=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var F$$,F$e=0;for(F$e=0,F$$=this._children.length;F$e<F$$;F$e++)this._children[F$e].update()},F$J.updateChild=function(){var F$J,F$y=0;for(F$y=0,F$J=this._children.length;F$y<F$J;F$y++)this._children[F$y].update()},F$J.setRotation=function(F$J){this._sprite&&(this._sprite.rotation=180*F$J/Math.PI)},F$J.updateDraw=function(F$J,F$y){F$Z.ShowBones&&!F$Z.ShowBones[this.name]||(this._sprite||(this._sprite=new F$mJ,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),F$ZJ.stage.addChild(this._sprite)),this._sprite.x=F$J+this.resultMatrix.tx,this._sprite.y=F$y+this.resultMatrix.ty);var F$T,F$V=0;for(F$V=0,F$T=this._children.length;F$V<F$T;F$V++)this._children[F$V].updateDraw(F$J,F$y)},F$J.addChild=function(F$J){this._children.push(F$J),F$J.parentBone=this},F$J.findBone=function(F$J){if(this.name==F$J)return this;var F$y,F$T,F$V=0;for(F$V=0,F$y=this._children.length;F$V<F$y;F$V++)if(F$T=this._children[F$V].findBone(F$J))return F$T;return null},F$J.localToWorld=function(F$J){var F$y=F$J[0],F$T=F$J[1];F$J[0]=F$y*this.resultMatrix.a+F$T*this.resultMatrix.c+this.resultMatrix.tx,F$J[1]=F$y*this.resultMatrix.b+F$T*this.resultMatrix.d+this.resultMatrix.ty},F$Z.ShowBones={},F$Z}()),F$uJ=function(){function F$o(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}F$V(F$o,"laya.ani.bone.BoneSlot");var F$J=F$o.prototype;return F$J.showSlotData=function(F$J,F$y){void 0===F$y&&(F$y=!0),this.currSlotData=F$J,F$y&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},F$J.showDisplayByName=function(F$J){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(F$J))},F$J.replaceDisplayByName=function(F$J,F$y){if(this.currSlotData){var F$T;F$T=this.currSlotData.getDisplayByName(F$J);var F$V;F$V=this.currSlotData.getDisplayByName(F$y),this.replaceDisplayByIndex(F$T,F$V)}},F$J.replaceDisplayByIndex=function(F$J,F$y){this.currSlotData&&(this._replaceDic[F$J]=F$y,this.displayIndex==F$J&&this.showDisplayByIndex(F$J))},F$J.showDisplayByIndex=function(F$J){if(null!=this._replaceDic[F$J]&&(F$J=this._replaceDic[F$J]),this.currSlotData&&-1<F$J&&F$J<this.currSlotData.displayArr.length){if(this.displayIndex=F$J,this.currDisplayData=this.currSlotData.displayArr[F$J],this.currDisplayData){var F$y=this.currDisplayData.name;this.currTexture=this.templet.getTexture(F$y),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!F$s.isConchApp||F$s.isConchApp&&"0.9.15"<F$mJ.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},F$J.replaceSkin=function(F$J){this._diyTexture=F$J,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},F$J.setParentMatrix=function(F$J){this._parentMatrix=F$J},F$J.draw=function(F$J,F$y,F$T,F$V){if(void 0===F$T&&(F$T=!1),void 0===F$V&&(F$V=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var F$Z,F$m=this.currTexture;switch(this._diyTexture&&(F$m=this._diyTexture),this.currDisplayData.type){case 0:if(F$J){var F$R=this.getDisplayMatrix();if(this._parentMatrix){var F$n=!1;if(F$R){var F$K;if(F$QJ.mul(F$R,this._parentMatrix,F$QJ.TEMP),F$K=F$T?(null==this._resultMatrix&&(this._resultMatrix=new F$QJ),this._resultMatrix):new F$QJ,!F$s.isWebGL&&this.currDisplayData.uvs||F$s.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var F$A=F$o._tempMatrix;F$A.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(F$A.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(F$n=!0,F$A.rotate(-Math.PI/2)),F$QJ.mul(F$A,F$QJ.TEMP,F$K)}else F$QJ.TEMP.copyTo(F$K);F$n?F$J.drawTexture(F$m,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,F$K):F$J.drawTexture(F$m,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,F$K)}}}break;case 1:if(null==(F$Z=F$T?(null==this._skinSprite&&(this._skinSprite=F$o.createSkinMesh()),this._skinSprite):F$o.createSkinMesh()))return;var F$$;if(null==this.currDisplayData.bones){var F$e,F$M=this.currDisplayData.weights;this.deformData&&(F$M=this.deformData),F$e=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=F$a.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=F$a.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=F$M;this.currDisplayData.triangles.length;F$$=this.currDisplayData.triangles,F$Z.init2(F$m,null,F$$,this._mVerticleArr,F$e);var F$G,F$B=this.getDisplayMatrix();if(this._parentMatrix)if(F$B)F$QJ.mul(F$B,this._parentMatrix,F$QJ.TEMP),F$G=F$T?(null==this._resultMatrix&&(this._resultMatrix=new F$QJ),this._resultMatrix):new F$QJ,F$QJ.TEMP.copyTo(F$G),F$Z.transform=F$G}else this.skinMesh(F$y,F$Z,F$V);F$J.drawSkin(F$Z);break;case 2:if(null==(F$Z=F$T?(null==this._skinSprite&&(this._skinSprite=F$o.createSkinMesh()),this._skinSprite):F$o.createSkinMesh()))return;this.skinMesh(F$y,F$Z,F$V),F$J.drawSkin(F$Z)}}},F$J.skinMesh=function(F$J,F$y,F$T){var F$V,F$Z=this.currTexture,F$m=this.currDisplayData.bones;F$V=this._diyTexture?(F$Z=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=F$a.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=F$a.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var F$R,F$n,F$K=this.currDisplayData.weights,F$A=this.currDisplayData.triangles,F$$=0,F$e=0,F$M=0,F$G=NaN,F$B=NaN,F$o=0,F$s=0,F$E=[],F$O=0,F$L=0;if(this.deformData&&0<this.deformData.length){var F$H=0;for(F$O=0,F$L=F$m.length;F$O<F$L;){for(F$M=F$m[F$O++]+F$O,F$e=F$$=0;F$O<F$M;F$O++)F$n=F$J[F$m[F$O]],F$G=F$K[F$o]+this.deformData[F$H++],F$B=F$K[F$o+1]+this.deformData[F$H++],F$s=F$K[F$o+2],F$$+=(F$G*F$n.a+F$B*F$n.c+F$n.tx)*F$s,F$e+=(F$G*F$n.b+F$B*F$n.d+F$n.ty)*F$s,F$o+=3;F$E.push(F$$,F$e)}}else for(F$O=0,F$L=F$m.length;F$O<F$L;){for(F$M=F$m[F$O++]+F$O,F$e=F$$=0;F$O<F$M;F$O++)F$n=F$J[F$m[F$O]],F$G=F$K[F$o],F$B=F$K[F$o+1],F$s=F$K[F$o+2],F$$+=(F$G*F$n.a+F$B*F$n.c+F$n.tx)*F$s,F$e+=(F$G*F$n.b+F$B*F$n.d+F$n.ty)*F$s,F$o+=3;F$E.push(F$$,F$e)}this._mVerticleArr=F$E,F$R=F$A,F$y.init2(F$Z,null,F$R,this._mVerticleArr,F$V)},F$J.drawBonePoint=function(F$J){F$J&&this._parentMatrix&&F$J.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},F$J.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},F$J.getMatrix=function(){return this._resultMatrix},F$J.copy=function(){var F$J=new F$o;return F$J.type="copy",F$J.name=this.name,F$J.attachmentName=this.attachmentName,F$J.srcDisplayIndex=this.srcDisplayIndex,F$J.parent=this.parent,F$J.displayIndex=this.displayIndex,F$J.templet=this.templet,F$J.currSlotData=this.currSlotData,F$J.currTexture=this.currTexture,F$J.currDisplayData=this.currDisplayData,F$J},F$o.createSkinMesh=function(){return F$s.isWebGL||F$s.isConchApp?F$G.skinAniSprite():(F$s.isWebGL,null)},F$T(F$o,["_tempMatrix",function(){return this._tempMatrix=new F$QJ}]),F$o}(),F$xJ=function(){function F$J(){this.skinName=null,this.deformSlotDataList=[]}return F$V(F$J,"laya.ani.bone.DeformAniData"),F$J}(),F$kJ=function(){function F$J(){this.deformSlotDisplayList=[]}return F$V(F$J,"laya.ani.bone.DeformSlotData"),F$J}(),F$XJ=function(){function F$J(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}F$V(F$J,"laya.ani.bone.DeformSlotDisplayData");var F$y=F$J.prototype;return F$y.binarySearch1=function(F$J,F$y){var F$T=0,F$V=F$J.length-2;if(0==F$V)return 1;for(var F$Z=F$V>>>1;;){if(F$J[Math.floor(F$Z+1)]<=F$y?F$T=F$Z+1:F$V=F$Z,F$T==F$V)return F$T+1;F$Z=F$T+F$V>>>1}return 0},F$y.apply=function(F$J,F$y,F$T){if(void 0===F$T&&(F$T=1),F$J+=.05,!(this.timeList.length<=0)){var F$V=0;if(!(F$J<this.timeList[0])){var F$Z=this.vectices[0].length,F$m=[],F$R=this.binarySearch1(this.timeList,F$J);if(this.frameIndex=F$R,F$J>=this.timeList[this.timeList.length-1]){var F$n=this.vectices[this.vectices.length-1];if(F$T<1)for(F$V=0;F$V<F$Z;F$V++)F$m[F$V]+=(F$n[F$V]-F$m[F$V])*F$T;else for(F$V=0;F$V<F$Z;F$V++)F$m[F$V]=F$n[F$V];this.deformData=F$m}else{this.tweenKeyList[this.frameIndex];var F$K=this.vectices[this.frameIndex-1],F$A=this.vectices[this.frameIndex],F$$=this.timeList[this.frameIndex-1],F$e=this.timeList[this.frameIndex];F$T=this.tweenKeyList[F$R-1]?(F$J-F$$)/(F$e-F$$):0;var F$M=NaN;for(F$V=0;F$V<F$Z;F$V++)F$M=F$K[F$V],F$m[F$V]=F$M+(F$A[F$V]-F$M)*F$T;this.deformData=F$m}}}},F$J}(),F$SJ=function(){function F$J(){this.time=NaN,this.drawOrder=[]}return F$V(F$J,"laya.ani.bone.DrawOrderData"),F$J}(),F$fJ=function(){function F$J(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return F$V(F$J,"laya.ani.bone.EventData"),F$J}(),F$O=function(){function F$VJ(F$J,F$y){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=F$J,this._targetBone=F$y[F$J.targetBoneIndex],this.isSpine=F$J.isSpine,null==this._bones&&(this._bones=[]);for(var F$T=this._bones.length=0,F$V=F$J.boneIndexs.length;F$T<F$V;F$T++)this._bones.push(F$y[F$J.boneIndexs[F$T]]);this.name=F$J.name,this.mix=F$J.mix,this.bendDirection=F$J.bendDirection}F$V(F$VJ,"laya.ani.bone.IkConstraint");var F$J=F$VJ.prototype;return F$J.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},F$J._applyIk1=function(F$J,F$y,F$T,F$V){var F$Z=F$J.parentBone,F$m=1/(F$Z.resultMatrix.a*F$Z.resultMatrix.d-F$Z.resultMatrix.b*F$Z.resultMatrix.c),F$R=F$y-F$Z.resultMatrix.tx,F$n=F$T-F$Z.resultMatrix.ty,F$K=(F$R*F$Z.resultMatrix.d-F$n*F$Z.resultMatrix.c)*F$m-F$J.transform.x,F$A=(F$n*F$Z.resultMatrix.a-F$R*F$Z.resultMatrix.b)*F$m-F$J.transform.y,F$$=Math.atan2(F$A,F$K)*F$VJ.radDeg-0-F$J.transform.skX;F$J.transform.scX<0&&(F$$+=180),180<F$$?F$$-=360:F$$<-180&&(F$$+=360),F$J.transform.skX=F$J.transform.skY=F$J.transform.skX+F$$*F$V,F$J.update()},F$J.updatePos=function(F$J,F$y){this._sp&&this._sp.pos(F$J,F$y)},F$J._applyIk2=function(F$J,F$y,F$T,F$V,F$Z,F$m){if(0!=F$m){var F$R=F$J.resultTransform.x,F$n=F$J.resultTransform.y,F$K=F$J.transform.scX,F$A=F$J.transform.scY,F$$=F$y.transform.scX,F$e=0,F$M=0,F$G=0;F$G=F$K<0?(F$K=-F$K,F$e=180,-1):(F$e=0,1),F$A<0&&(F$A=-F$A,F$G=-F$G),F$M=F$$<0?(F$$=-F$$,180):0;var F$B=F$y.resultTransform.x,F$o=NaN,F$s=NaN,F$E=NaN,F$O=F$J.resultMatrix.a,F$L=F$J.resultMatrix.c,F$H=F$J.resultMatrix.b,F$P=F$J.resultMatrix.d,F$l=Math.abs(F$K-F$A)<=1e-4;F$E=F$l?(F$s=F$O*F$B+F$L*(F$o=F$y.resultTransform.y)+F$J.resultMatrix.tx,F$H*F$B+F$P*F$o+F$J.resultMatrix.ty):(F$o=0,F$s=F$O*F$B+F$J.resultMatrix.tx,F$H*F$B+F$J.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new F$mJ,F$ZJ.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(F$T,F$V,15,"#ffff00"),this._sp.graphics.drawCircle(F$s,F$E,15,"#ff00ff")),F$J.setRotation(Math.atan2(F$E-F$J.resultMatrix.ty,F$s-F$J.resultMatrix.tx));var F$a=F$J.parentBone;F$O=F$a.resultMatrix.a,F$L=F$a.resultMatrix.c,F$H=F$a.resultMatrix.b;var F$q=1/(F$O*(F$P=F$a.resultMatrix.d)-F$L*F$H),F$r=F$T-F$a.resultMatrix.tx,F$D=F$V-F$a.resultMatrix.ty,F$_=(F$r*F$P-F$D*F$L)*F$q-F$R,F$t=(F$D*F$O-F$r*F$H)*F$q-F$n,F$v=((F$r=F$s-F$a.resultMatrix.tx)*F$P-(F$D=F$E-F$a.resultMatrix.ty)*F$L)*F$q-F$R,F$Q=(F$D*F$O-F$r*F$H)*F$q-F$n,F$i=Math.sqrt(F$v*F$v+F$Q*F$Q),F$c=F$y.length*F$$,F$u=NaN,F$x=NaN;if(F$l){var F$k=(F$_*F$_+F$t*F$t-F$i*F$i-(F$c*=F$K)*F$c)/(2*F$i*F$c);F$k<-1?F$k=-1:1<F$k&&(F$k=1),F$x=Math.acos(F$k)*F$Z,F$O=F$i+F$c*F$k,F$L=F$c*Math.sin(F$x),F$u=Math.atan2(F$t*F$O-F$_*F$L,F$_*F$O+F$t*F$L)}else{var F$X=(F$O=F$K*F$c)*F$O,F$S=(F$L=F$A*F$c)*F$L,F$f=F$_*F$_+F$t*F$t,F$W=Math.atan2(F$t,F$_),F$I=-2*F$S*F$i,F$Y=F$S-F$X;if(0<(F$P=F$I*F$I-4*F$Y*(F$H=F$S*F$i*F$i+F$X*F$f-F$X*F$S))){var F$U=Math.sqrt(F$P);F$I<0&&(F$U=-F$U);var F$d=(F$U=-(F$I+F$U)/2)/F$Y,F$C=F$H/F$U,F$F=Math.abs(F$d)<Math.abs(F$C)?F$d:F$C;F$F*F$F<=F$f&&(F$D=Math.sqrt(F$f-F$F*F$F)*F$Z,F$u=F$W-Math.atan2(F$D,F$F),F$x=Math.atan2(F$D/F$A,(F$F-F$i)/F$K))}var F$b=0,F$h=Number.MAX_VALUE,F$p=0,F$j=0,F$g=0,F$N=0,F$w=0,F$z=0;F$N<(F$P=(F$r=F$i+F$O)*F$r)&&(F$g=0,F$N=F$P,F$w=F$r),(F$P=(F$r=F$i-F$O)*F$r)<F$h&&(F$b=Math.PI,F$h=F$P,F$p=F$r);var F$JJ=Math.acos(-F$O*F$i/(F$X-F$S));(F$P=(F$r=F$O*Math.cos(F$JJ)+F$i)*F$r+(F$D=F$L*Math.sin(F$JJ))*F$D)<F$h&&(F$b=F$JJ,F$h=F$P,F$p=F$r,F$j=F$D),F$N<F$P&&(F$g=F$JJ,F$N=F$P,F$w=F$r,F$z=F$D),F$x=F$f<=(F$h+F$N)/2?(F$u=F$W-Math.atan2(F$j*F$Z,F$p),F$b*F$Z):(F$u=F$W-Math.atan2(F$z*F$Z,F$w),F$g*F$Z)}var F$yJ=Math.atan2(F$o,F$B)*F$G,F$TJ=F$J.resultTransform.skX;180<(F$u=(F$u-F$yJ)*F$VJ.radDeg+F$e-F$TJ)?F$u-=360:F$u<-180&&(F$u+=360),F$J.resultTransform.x=F$R,F$J.resultTransform.y=F$n,F$J.resultTransform.skX=F$J.resultTransform.skY=F$TJ+F$u*F$m,F$TJ=F$y.resultTransform.skX,180<(F$x=((F$x+F$yJ)*F$VJ.radDeg-0)*F$G+F$M-(F$TJ%=360))?F$x-=360:F$x<-180&&(F$x+=360),F$y.resultTransform.x=F$B,F$y.resultTransform.y=F$o,F$y.resultTransform.skX=F$y.resultTransform.skY=F$y.resultTransform.skY+F$x*F$m,F$J.update()}},F$J._applyIk3=function(F$J,F$y,F$T,F$V,F$Z,F$m){if(0!=F$m){var F$R,F$n,F$K=F$y.resultMatrix.a*F$y.length,F$A=F$y.resultMatrix.b*F$y.length,F$$=F$K*F$K+F$A*F$A,F$e=Math.sqrt(F$$),F$M=F$J.resultMatrix.tx,F$G=F$J.resultMatrix.ty,F$B=F$y.resultMatrix.tx,F$o=F$y.resultMatrix.ty,F$s=F$B-F$M,F$E=F$o-F$G,F$O=F$s*F$s+F$E*F$E,F$L=Math.sqrt(F$O),F$H=(F$s=F$T-F$J.resultMatrix.tx)*F$s+(F$E=F$V-F$J.resultMatrix.ty)*F$E,F$P=Math.sqrt(F$H);if(F$e+F$L<=F$P||F$P+F$e<=F$L||F$P+F$L<=F$e){var F$l=NaN;F$B=F$M+(F$l=F$e+F$L<=F$P?1:-1)*(F$T-F$M)*F$L/F$P,F$o=F$G+F$l*(F$V-F$G)*F$L/F$P}else{var F$a=(F$O-F$$+F$H)/(2*F$H),F$q=Math.sqrt(F$O-F$a*F$a*F$H)/F$P,F$r=F$M+F$s*F$a,F$D=F$G+F$E*F$a,F$_=-F$E*F$q,F$t=F$s*F$q;F$o=0<F$Z?(F$B=F$r-F$_,F$D-F$t):(F$B=F$r+F$_,F$D+F$t)}F$R=F$B,F$n=F$o,this.isDebug&&(this._sp||(this._sp=new F$mJ,F$ZJ.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(F$M,F$G,15,"#ff00ff"),this._sp.graphics.drawCircle(F$T,F$V,15,"#ffff00"),this._sp.graphics.drawCircle(F$R,F$n,15,"#ff00ff"));var F$v,F$Q;F$v=Math.atan2(F$n-F$J.resultMatrix.ty,F$R-F$J.resultMatrix.tx),F$J.setRotation(F$v),(F$Q=F$VJ._tempMatrix).identity(),F$Q.rotate(F$v),F$Q.scale(F$J.resultMatrix.getScaleX(),F$J.resultMatrix.getScaleY()),F$Q.translate(F$J.resultMatrix.tx,F$J.resultMatrix.ty),F$Q.copyTo(F$J.resultMatrix),F$J.updateChild();var F$i,F$c;F$i=Math.atan2(F$V-F$n,F$T-F$R),F$y.setRotation(F$i),(F$c=F$VJ._tempMatrix).identity(),F$c.rotate(F$i),F$c.scale(F$y.resultMatrix.getScaleX(),F$y.resultMatrix.getScaleY()),F$c.translate(F$R,F$n),F$Q.copyTo(F$y.resultMatrix),F$y.updateChild()}},F$T(F$VJ,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new F$QJ}]),F$VJ}(),F$WJ=function(){function F$J(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return F$V(F$J,"laya.ani.bone.IkConstraintData"),F$J}(),F$P=function(){function F$c(F$J,F$y){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=F$J,this.position=F$J.position,this.spacing=F$J.spacing,this.rotateMix=F$J.rotateMix,this.translateMix=F$J.translateMix,this.bones=[];for(var F$T=this.data.bones,F$V=0,F$Z=F$T.length;F$V<F$Z;F$V++)this.bones.push(F$y[F$T[F$V]])}F$V(F$c,"laya.ani.bone.PathConstraint");var F$J=F$c.prototype;return F$J.apply=function(F$J,F$y){if(this.target){var F$T=this.translateMix,F$V=this.translateMix,F$Z=0<F$V,F$m=this.data.spacingMode,F$R="length"==F$m,F$n=this.data.rotateMode,F$K="tangent"==F$n,F$A="chainScale"==F$n,F$$=[],F$e=this.bones.length,F$M=F$K?F$e:F$e+1,F$G=[];(this._spaces=F$G)[0]=this.position;var F$B=this.spacing;if(F$A||F$R)for(var F$o=0,F$s=F$M-1;F$o<F$s;){var F$E=this.bones[F$o],F$O=F$E.length,F$L=F$O*F$E.resultMatrix.a,F$H=F$O*F$E.resultMatrix.b;F$O=Math.sqrt(F$L*F$L+F$H*F$H),F$A&&(F$$[F$o]=F$O),F$G[++F$o]=F$R?Math.max(0,F$O+F$B):F$B}else for(F$o=1;F$o<F$M;F$o++)F$G[F$o]=F$B;var F$P=this.computeWorldPositions(this.target,F$J,F$y,F$M,F$K,"percent"==this.data.positionMode,"percent"==F$m);if(this._debugKey){for(F$o=0;F$o<F$P.length;F$o++)F$y.drawCircle(F$P[F$o++],F$P[F$o++],5,"#00ff00");var F$l=[];for(F$o=0;F$o<F$P.length;F$o++)F$l.push(F$P[F$o++],F$P[F$o++]);F$y.drawLines(0,0,F$l,"#ff0000")}var F$a=F$P[0],F$q=F$P[1],F$r=this.data.offsetRotation,F$D="chain"==F$n&&0==F$r,F$_=NaN;for(F$o=0,F$_=3;F$o<F$e;F$o++,F$_+=3){(F$E=this.bones[F$o]).resultMatrix.tx+=(F$a-F$E.resultMatrix.tx)*F$T,F$E.resultMatrix.ty+=(F$q-F$E.resultMatrix.ty)*F$T;var F$t=(F$L=F$P[F$_])-F$a,F$v=(F$H=F$P[F$_+1])-F$q;if(F$A&&0!=(F$O=F$$[F$o])){var F$Q=(Math.sqrt(F$t*F$t+F$v*F$v)/F$O-1)*F$V+1;F$E.resultMatrix.a*=F$Q,F$E.resultMatrix.c*=F$Q}if(F$a=F$L,F$q=F$H,F$Z){var F$i=F$E.resultMatrix.a,F$c=F$E.resultMatrix.c,F$u=F$E.resultMatrix.b,F$x=F$E.resultMatrix.d,F$k=NaN,F$X=NaN,F$S=NaN;F$k=F$K?F$P[F$_-1]:0==F$G[F$o+1]?F$P[F$_+2]:Math.atan2(F$v,F$t),F$k-=Math.atan2(F$u,F$i)-F$r/180*Math.PI,F$D&&(F$X=Math.cos(F$k),F$S=Math.sin(F$k),F$a+=((F$O=F$E.length)*(F$X*F$i-F$S*F$u)-F$t)*F$V,F$q+=(F$O*(F$S*F$i+F$X*F$u)-F$v)*F$V),F$k>Math.PI?F$k-=2*Math.PI:F$k<-Math.PI&&(F$k+=2*Math.PI),F$k*=F$V,F$X=Math.cos(F$k),F$S=Math.sin(F$k),F$E.resultMatrix.a=F$X*F$i-F$S*F$u,F$E.resultMatrix.c=F$X*F$c-F$S*F$x,F$E.resultMatrix.b=F$S*F$i+F$X*F$u,F$E.resultMatrix.d=F$S*F$c+F$X*F$x}}}},F$J.computeWorldVertices2=function(F$J,F$y,F$T,F$V,F$Z,F$m){var F$R,F$n,F$K=F$J.currDisplayData.bones,F$A=F$J.currDisplayData.weights,F$$=F$J.currDisplayData.triangles,F$e=0,F$M=0,F$G=0,F$B=0,F$o=0,F$s=0,F$E=0,F$O=0,F$L=0,F$H=0,F$P=0;if(null!=F$K){for(F$e=0;F$e<F$T;F$e+=2)F$M+=(F$B=F$K[F$M])+1,F$G+=F$B;var F$l=F$y;for(F$o=F$m,F$s=3*F$G;F$o<F$V;F$o+=2){for(F$O=F$E=0,F$B=F$K[F$M++],F$B+=F$M;F$M<F$B;F$M++,F$s+=3){F$R=F$l[F$K[F$M]].resultMatrix,F$L=F$A[F$s],F$H=F$A[F$s+1];var F$a=F$A[F$s+2];F$E+=(F$L*F$R.a+F$H*F$R.c+F$R.tx)*F$a,F$O+=(F$L*F$R.b+F$H*F$R.d+F$R.ty)*F$a}F$Z[F$o]=F$E,F$Z[F$o+1]=F$O}}else{var F$q,F$r;if(F$$||(F$$=F$A),F$J.deformData&&(F$$=F$J.deformData),F$q=F$J.parent,F$y)for(F$P=F$y.length,F$e=0;F$e<F$P;F$e++)if(F$y[F$e].name==F$q){F$n=F$y[F$e];break}F$n&&(F$r=F$n.resultMatrix),F$r||(F$r=F$c._tempMt);var F$D=F$r.tx,F$_=F$r.ty,F$t=F$r.a,F$v=F$r.b,F$Q=F$r.c,F$i=F$r.d;for(F$n&&(F$i*=F$n.d),F$M=F$T,F$o=F$m;F$o<F$V;F$M+=2,F$o+=2)F$L=F$$[F$M],F$H=F$$[F$M+1],F$Z[F$o]=F$L*F$t+F$H*F$v+F$D,F$Z[F$o+1]=-(F$L*F$Q+F$H*F$i+F$_)}},F$J.computeWorldPositions=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R){F$J.currDisplayData.bones,F$J.currDisplayData.weights,F$J.currDisplayData.triangles;var F$n=[],F$K=0,F$A=F$J.currDisplayData.verLen,F$$=this.position,F$e=this._spaces,F$M=[],F$G=[],F$B=F$A/6,F$o=-1,F$s=NaN,F$E=0,F$O=0,F$L=NaN,F$H=NaN,F$P=NaN,F$l=NaN;if(F$B--,F$A-=4,this.computeWorldVertices2(F$J,F$y,2,F$A,F$n,0),this._debugKey)for(F$K=0;F$K<F$n.length;)F$T.drawCircle(F$n[F$K++],F$n[F$K++],10,"#ff0000");F$M=F$n,this._curves.length=F$B;var F$a=this._curves,F$q=F$M[F$s=0],F$r=F$M[1],F$D=0,F$_=0,F$t=0,F$v=0,F$Q=0,F$i=0,F$c=NaN,F$u=NaN,F$x=NaN,F$k=NaN,F$X=NaN,F$S=NaN,F$f=NaN,F$W=NaN,F$I=0;for(F$K=0,F$I=2;F$K<F$B;F$K++,F$I+=6)F$D=F$M[F$I],F$_=F$M[F$I+1],F$t=F$M[F$I+2],F$v=F$M[F$I+3],F$X=2*(F$c=.1875*(F$q-2*F$D+F$t))+(F$x=.09375*(3*(F$D-F$t)-F$q+(F$Q=F$M[F$I+4]))),F$S=2*(F$u=.1875*(F$r-2*F$_+F$v))+(F$k=.09375*(3*(F$_-F$v)-F$r+(F$i=F$M[F$I+5]))),F$f=.75*(F$D-F$q)+F$c+.16666667*F$x,F$W=.75*(F$_-F$r)+F$u+.16666667*F$k,F$s+=Math.sqrt(F$f*F$f+F$W*F$W),F$f+=F$X,F$W+=F$S,F$X+=F$x,F$S+=F$k,F$s+=Math.sqrt(F$f*F$f+F$W*F$W),F$f+=F$X,F$W+=F$S,F$s+=Math.sqrt(F$f*F$f+F$W*F$W),F$f+=F$X+F$x,F$W+=F$S+F$k,F$s+=Math.sqrt(F$f*F$f+F$W*F$W),F$a[F$K]=F$s,F$q=F$Q,F$r=F$i;if(F$m&&(F$$*=F$s),F$R)for(F$K=0;F$K<F$V;F$K++)F$e[F$K]*=F$s;var F$Y=this._segments,F$U=0,F$d=0;for(F$d=F$O=F$E=F$K=0;F$K<F$V;F$K++,F$E+=3)if((F$L=F$$+=F$H=F$e[F$K])<0)this.addBeforePosition(F$L,F$M,0,F$G,F$E);else if(F$s<F$L)this.addAfterPosition(F$L-F$s,F$M,F$A-4,F$G,F$E);else{for(;;F$O++)if(!((F$l=F$a[F$O])<F$L)){0==F$O?F$L/=F$l:F$L=(F$L-(F$P=F$a[F$O-1]))/(F$l-F$P);break}if(F$O!=F$o){var F$C=6*(F$o=F$O);for(F$q=F$M[F$C],F$r=F$M[F$C+1],F$D=F$M[F$C+2],F$_=F$M[F$C+3],F$t=F$M[F$C+4],F$v=F$M[F$C+5],F$X=2*(F$c=.03*(F$q-2*F$D+F$t))+(F$x=.006*(3*(F$D-F$t)-F$q+(F$Q=F$M[F$C+6]))),F$S=2*(F$u=.03*(F$r-2*F$_+F$v))+(F$k=.006*(3*(F$_-F$v)-F$r+(F$i=F$M[F$C+7]))),F$f=.3*(F$D-F$q)+F$c+.16666667*F$x,F$W=.3*(F$_-F$r)+F$u+.16666667*F$k,F$U=Math.sqrt(F$f*F$f+F$W*F$W),F$Y[0]=F$U,F$C=1;F$C<8;F$C++)F$f+=F$X,F$W+=F$S,F$X+=F$x,F$S+=F$k,F$U+=Math.sqrt(F$f*F$f+F$W*F$W),F$Y[F$C]=F$U;F$f+=F$X,F$W+=F$S,F$U+=Math.sqrt(F$f*F$f+F$W*F$W),F$Y[8]=F$U,F$f+=F$X+F$x,F$W+=F$S+F$k,F$U+=Math.sqrt(F$f*F$f+F$W*F$W),F$Y[9]=F$U,F$d=0}for(F$L*=F$U;;F$d++)if(!((F$l=F$Y[F$d])<F$L)){0==F$d?F$L/=F$l:F$L=F$d+(F$L-(F$P=F$Y[F$d-1]))/(F$l-F$P);break}this.addCurvePosition(.1*F$L,F$q,F$r,F$D,F$_,F$t,F$v,F$Q,F$i,F$G,F$E,F$Z||0<F$K&&0==F$H)}return F$G},F$J.addBeforePosition=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$y[F$T],F$R=F$y[F$T+1],F$n=F$y[F$T+2]-F$m,F$K=F$y[F$T+3]-F$R,F$A=Math.atan2(F$K,F$n);F$V[F$Z]=F$m+F$J*Math.cos(F$A),F$V[F$Z+1]=F$R+F$J*Math.sin(F$A),F$V[F$Z+2]=F$A},F$J.addAfterPosition=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$y[F$T+2],F$R=F$y[F$T+3],F$n=F$m-F$y[F$T],F$K=F$R-F$y[F$T+1],F$A=Math.atan2(F$K,F$n);F$V[F$Z]=F$m+F$J*Math.cos(F$A),F$V[F$Z+1]=F$R+F$J*Math.sin(F$A),F$V[F$Z+2]=F$A},F$J.addCurvePosition=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$,F$e){0==F$J&&(F$J=1e-4);var F$M=F$J*F$J,F$G=F$M*F$J,F$B=1-F$J,F$o=F$B*F$B,F$s=F$o*F$B,F$E=F$B*F$J,F$O=3*F$E,F$L=F$B*F$O,F$H=F$O*F$J,F$P=F$y*F$s+F$V*F$L+F$m*F$H+F$n*F$G,F$l=F$T*F$s+F$Z*F$L+F$R*F$H+F$K*F$G;F$A[F$$]=F$P,F$A[F$$+1]=F$l,F$A[F$$+2]=F$e?Math.atan2(F$l-(F$T*F$o+F$Z*F$E*2+F$R*F$M),F$P-(F$y*F$o+F$V*F$E*2+F$m*F$M)):0},F$c.NONE=-1,F$c.BEFORE=-2,F$c.AFTER=-3,F$T(F$c,["_tempMt",function(){return this._tempMt=new F$QJ}]),F$c}(),F$IJ=function(){function F$J(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return F$V(F$J,"laya.ani.bone.PathConstraintData"),F$J}(),F$YJ=function(){function F$J(){this.name=null,this.slotArr=[]}return F$V(F$J,"laya.ani.bone.SkinData"),F$J}(),F$UJ=function(){function F$J(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}F$V(F$J,"laya.ani.bone.SkinSlotDisplayData");var F$y=F$J.prototype;return F$y.createTexture=function(F$J){return this.texture||(this.texture=new F$iJ(F$J.bitmap,this.uvs),F$J.bitmap.alphaTexture&&(this.texture.alphaTexture=new F$iJ(F$J.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=F$J.height,this.texture.height=F$J.width,this.texture.offsetX=-F$J.offsetX,this.texture.offsetY=-F$J.offsetY,this.texture.sourceWidth=F$J.sourceHeight,this.texture.sourceHeight=F$J.sourceWidth):(this.texture.width=F$J.width,this.texture.height=F$J.height,this.texture.offsetX=-F$J.offsetX,this.texture.offsetY=-F$J.offsetY,this.texture.sourceWidth=F$J.sourceWidth,this.texture.sourceHeight=F$J.sourceHeight),F$s.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},F$y.destory=function(){this.texture&&this.texture.destroy()},F$J}(),F$dJ=function(){function F$J(){this.name=null,this.displayArr=[]}return F$V(F$J,"laya.ani.bone.SlotData"),F$J.prototype.getDisplayByName=function(F$J){for(var F$y=0,F$T=this.displayArr.length;F$y<F$T;F$y++)if(this.displayArr[F$y].attachmentName==F$J)return F$y;return-1},F$J}(),F$l=function(){function F$J(F$J,F$y){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=F$o(2,0),this._data=F$J,null==this._bones&&(this._bones=[]),this.target=F$y[F$J.targetIndex];var F$T,F$V=0;for(F$V=0,F$T=F$J.boneIndexs.length;F$V<F$T;F$V++)this._bones.push(F$y[F$J.boneIndexs[F$V]]);this.rotateMix=F$J.rotateMix,this.translateMix=F$J.translateMix,this.scaleMix=F$J.scaleMix,this.shearMix=F$J.shearMix}return F$V(F$J,"laya.ani.bone.TfConstraint"),F$J.prototype.apply=function(){for(var F$J,F$y=this.target.resultMatrix.a,F$T=this.target.resultMatrix.b,F$V=this.target.resultMatrix.c,F$Z=this.target.resultMatrix.d,F$m=0,F$R=this._bones.length;F$m<F$R;F$m++){if(F$J=this._bones[F$m],0<this.rotateMix){var F$n=F$J.resultMatrix.a,F$K=F$J.resultMatrix.b,F$A=F$J.resultMatrix.c,F$$=F$J.resultMatrix.d,F$e=Math.atan2(F$V,F$y)-Math.atan2(F$A,F$n)+this._data.offsetRotation*Math.PI/180;F$e>Math.PI?F$e-=2*Math.PI:F$e<-Math.PI&&(F$e+=2*Math.PI),F$e*=this.rotateMix;var F$M=Math.cos(F$e),F$G=Math.sin(F$e);F$J.resultMatrix.a=F$M*F$n-F$G*F$A,F$J.resultMatrix.b=F$M*F$K-F$G*F$$,F$J.resultMatrix.c=F$G*F$n+F$M*F$A,F$J.resultMatrix.d=F$G*F$K+F$M*F$$}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),F$J.resultMatrix.tx+=(this._temp[0]-F$J.resultMatrix.tx)*this.translateMix,F$J.resultMatrix.ty+=(this._temp[1]-F$J.resultMatrix.ty)*this.translateMix,F$J.updateChild()),0<this.scaleMix){var F$B=Math.sqrt(F$J.resultMatrix.a*F$J.resultMatrix.a+F$J.resultMatrix.c*F$J.resultMatrix.c),F$o=Math.sqrt(F$y*F$y+F$V*F$V),F$s=1e-5<F$B?(F$B+(F$o-F$B+this._data.offsetScaleX)*this.scaleMix)/F$B:0;F$J.resultMatrix.a*=F$s,F$J.resultMatrix.c*=F$s,F$B=Math.sqrt(F$J.resultMatrix.b*F$J.resultMatrix.b+F$J.resultMatrix.d*F$J.resultMatrix.d),F$o=Math.sqrt(F$T*F$T+F$Z*F$Z),F$s=1e-5<F$B?(F$B+(F$o-F$B+this._data.offsetScaleY)*this.scaleMix)/F$B:0,F$J.resultMatrix.b*=F$s,F$J.resultMatrix.d*=F$s}if(0<this.shearMix){F$K=F$J.resultMatrix.b,F$$=F$J.resultMatrix.d;var F$E=Math.atan2(F$$,F$K);(F$e=Math.atan2(F$Z,F$T)-Math.atan2(F$V,F$y)-(F$E-Math.atan2(F$J.resultMatrix.c,F$J.resultMatrix.a)))>Math.PI?F$e-=2*Math.PI:F$e<-Math.PI&&(F$e+=2*Math.PI),F$e=F$E+(F$e+this._data.offsetShearY*Math.PI/180)*this.shearMix,F$s=Math.sqrt(F$K*F$K+F$$*F$$),F$J.resultMatrix.b=Math.cos(F$e)*F$s,F$J.resultMatrix.d=Math.sin(F$e)*F$s}}},F$J}(),F$CJ=function(){function F$J(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return F$V(F$J,"laya.ani.bone.TfConstraintData"),F$J}(),F$FJ=function(){function F$J(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}F$V(F$J,"laya.ani.bone.Transform");var F$y=F$J.prototype;return F$y.initData=function(F$J){null!=F$J.x&&(this.x=F$J.x),null!=F$J.y&&(this.y=F$J.y),null!=F$J.skX&&(this.skX=F$J.skX),null!=F$J.skY&&(this.skY=F$J.skY),null!=F$J.scX&&(this.scX=F$J.scX),null!=F$J.scY&&(this.scY=F$J.scY)},F$y.getMatrix=function(){var F$J;return(F$J=this.mMatrix?this.mMatrix:this.mMatrix=new F$QJ).identity(),F$J.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(F$J,this.skewX*Math.PI/180,this.skewY*Math.PI/180),F$J.rotate(this.skX*Math.PI/180),F$J.translate(this.x,this.y),F$J},F$y.skew=function(F$J,F$y,F$T){var F$V=Math.sin(F$T),F$Z=Math.cos(F$T),F$m=Math.sin(F$y),F$R=Math.cos(F$y);return F$J.setTo(F$J.a*F$R-F$J.b*F$V,F$J.a*F$m+F$J.b*F$Z,F$J.c*F$R-F$J.d*F$V,F$J.c*F$m+F$J.d*F$Z,F$J.tx*F$R-F$J.ty*F$V,F$J.tx*F$m+F$J.ty*F$Z),F$J},F$J}(),F$a=function(){function F$J(){}return F$V(F$J,"laya.ani.bone.UVTools"),F$J.getRelativeUV=function(F$J,F$y,F$T){var F$V=F$J[0],F$Z=F$J[2]-F$J[0],F$m=F$J[1],F$R=F$J[5]-F$J[1];F$T||(F$T=[]),F$T.length=F$y.length;var F$n,F$K=0;F$n=F$T.length;var F$A=1/F$Z,F$$=1/F$R;for(F$K=0;F$K<F$n;F$K+=2)F$T[F$K]=(F$y[F$K]-F$V)*F$A,F$T[F$K+1]=(F$y[F$K+1]-F$m)*F$$;return F$T},F$J.getAbsoluteUV=function(F$J,F$y,F$T){if(0==F$J[0]&&0==F$J[1]&&1==F$J[4]&&1==F$J[5])return F$T?(F$E.copyArray(F$T,F$y),F$T):F$y;var F$V=F$J[0],F$Z=F$J[2]-F$J[0],F$m=F$J[1],F$R=F$J[5]-F$J[1];F$T||(F$T=[]),F$T.length=F$y.length;var F$n,F$K=0;for(F$n=F$T.length,F$K=0;F$K<F$n;F$K+=2)F$T[F$K]=F$y[F$K]*F$Z+F$V,F$T[F$K+1]=F$y[F$K+1]*F$R+F$m;return F$T},F$J}(),F$c=function(){function F$J(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return F$V(F$J,"laya.ani.KeyFramesContent"),F$J}(),F$q=function(){function F$$(){}return F$V(F$$,"laya.ani.math.BezierLerp"),F$$.getBezierRate=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$$._getBezierParamKey(F$y,F$T,F$V,F$Z),F$R=100*F$m+F$J;if(F$$._bezierResultCache[F$R])return F$$._bezierResultCache[F$R];var F$n,F$K=F$$._getBezierPoints(F$y,F$T,F$V,F$Z,F$m),F$A=0;for(F$n=F$K.length,F$A=0;F$A<F$n;F$A+=2)if(F$J<=F$K[F$A])return F$$._bezierResultCache[F$R]=F$K[F$A+1],F$K[F$A+1];return F$$._bezierResultCache[F$R]=1},F$$._getBezierParamKey=function(F$J,F$y,F$T,F$V){return 100*(100*(100*(100*F$J+F$y)+F$T)+F$V)},F$$._getBezierPoints=function(F$J,F$y,F$T,F$V,F$Z){return F$$._bezierPointsCache[F$Z]?F$$._bezierPointsCache[F$Z]:(F$m=[0,0,F$J,F$y,F$T,F$V,1,1],F$R=(new F$n).getBezierPoints(F$m,100,3),F$$._bezierPointsCache[F$Z]=F$R);var F$m,F$R},F$$._bezierResultCache={},F$$._bezierPointsCache={},F$$}(),F$r=function(F$J){function F$y(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,F$y.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}F$V(F$y,"laya.ani.AnimationPlayer",F$Z);var F$T=F$y.prototype;return F$ZJ.imps(F$T,{"laya.resource.IDestroy":!0}),F$T._onTempletLoadedComputeFullKeyframeIndices=function(F$J,F$y,F$T){this._templet===F$T&&this._cachePlayRate===F$J&&this._cacheFrameRate===F$y&&this._computeFullKeyframeIndices()},F$T._computeFullKeyframeIndices=function(){for(var F$J=this._fullFrames=[],F$y=this._templet,F$T=this._cacheFrameRateInterval*this._cachePlayRate,F$V=0,F$Z=F$y.getAnimationCount();F$V<F$Z;F$V++){for(var F$m=[],F$R=0,F$n=F$y.getAnimation(F$V).nodes.length;F$R<F$n;F$R++){for(var F$K=F$y.getAnimation(F$V).nodes[F$R],F$A=Math.floor(F$K.playTime/F$T+.01),F$$=new Uint16Array(F$A+1),F$e=-1,F$M=0,F$G=F$K.keyFrame.length;F$M<F$G;F$M++){var F$B=F$K.keyFrame[F$M],F$o=F$B.startTime,F$s=F$o+F$B.duration+F$T;do{for(var F$E=Math.floor(F$o/F$T+.5),F$O=F$e+1;F$O<F$E;F$O++)F$$[F$O]=F$M;F$$[F$e=F$E]=F$M,F$o+=F$T}while(F$o<=F$s)}F$m.push(F$$)}F$J.push(F$m)}},F$T._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},F$T._calculatePlayDuration=function(){if(0!==this.state){var F$J=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=F$J),this._playEnd>F$J&&(this._playEnd=F$J),this._playDuration=this._playEnd-this._playStart}},F$T._setPlayParams=function(F$J,F$y){this._currentTime=F$J,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/F$y+.01),0),this._currentFrameTime=this._currentKeyframeIndex*F$y},F$T._setPlayParamsWhenStop=function(F$J,F$y){this._currentTime=F$J,this._currentKeyframeIndex=Math.max(Math.floor(F$J/F$y+.01),0),this._currentFrameTime=this._currentKeyframeIndex*F$y,this._currentAnimationClipIndex=-1},F$T._update=function(F$J){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var F$y=this._cacheFrameRateInterval*this._cachePlayRate,F$T=0;this._startUpdateLoopCount!==F$B.loopCount&&(F$T=F$J*this.playbackRate,this._elapsedPlaybackTime+=F$T);var F$V=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=F$V)return this._setPlayParamsWhenStop(F$V,F$y),void this.event("stopped");if(F$T+=this._currentTime,0<F$V)if(F$V<=F$T)do{if(F$T-=F$V,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(F$V,F$y),this._stopWhenCircleFinish=!1,void this.event("stopped");F$T<F$V&&(this._setPlayParams(F$T,F$y),this.event("complete"))}while(F$V<=F$T);else this._setPlayParams(F$T,F$y);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(F$V,F$y),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},F$T._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},F$T.play=function(F$J,F$y,F$T,F$V,F$Z){if(void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=1),void 0===F$T&&(F$T=2147483647),void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(F$T<0||F$V<0||F$Z<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==F$Z&&F$Z<F$V)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=F$y,this._overallDuration=F$T,this._playStart=F$V,this._playEnd=F$Z,this._paused=!1,this._currentAnimationClipIndex=F$J,this._currentKeyframeIndex=0,this._startUpdateLoopCount=F$B.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},F$T.playByFrame=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$J&&(F$J=0),void 0===F$y&&(F$y=1),void 0===F$T&&(F$T=2147483647),void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0),void 0===F$m&&(F$m=30);var F$R=1e3/F$m;this.play(F$J,F$y,F$T,F$V*F$R,F$Z*F$R)},F$T.stop=function(F$J){void 0===F$J&&(F$J=!0),F$J?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},F$m(0,F$T,"playEnd",function(){return this._playEnd}),F$m(0,F$T,"templet",function(){return this._templet},function(F$J){0===!this.state&&this.stop(!0),this._templet!==F$J&&((this._templet=F$J).loaded?this._computeFullKeyframeIndices():F$J.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),F$m(0,F$T,"playStart",function(){return this._playStart}),F$m(0,F$T,"playDuration",function(){return this._playDuration}),F$m(0,F$T,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),F$m(0,F$T,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),F$m(0,F$T,"overallDuration",function(){return this._overallDuration}),F$m(0,F$T,"currentFrameTime",function(){return this._currentFrameTime}),F$m(0,F$T,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),F$m(0,F$T,"currentPlayTime",function(){return this._currentTime+this._playStart}),F$m(0,F$T,"cachePlayRate",function(){return this._cachePlayRate},function(F$J){this._cachePlayRate!==F$J&&(this._cachePlayRate=F$J,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[F$J,this._cacheFrameRate])))}),F$m(0,F$T,"cacheFrameRate",function(){return this._cacheFrameRate},function(F$J){this._cacheFrameRate!==F$J&&(this._cacheFrameRate=F$J,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,F$J])))}),F$m(0,F$T,"currentTime",null,function(F$J){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(F$J<this._playStart||F$J>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=F$B.loopCount;var F$y=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=F$J,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/F$y),0),this._currentFrameTime=this._currentKeyframeIndex*F$y}}),F$m(0,F$T,"paused",function(){return this._paused},function(F$J){(this._paused=F$J)&&this.event("paused")}),F$m(0,F$T,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),F$m(0,F$T,"destroyed",function(){return this._destroyed}),F$y}(),F$u=function(F$J){function F$y(){F$y.__super.call(this),F$s.isConchNode&&(this.drawSkin=function(F$J){F$J.transform||(F$J.transform=F$QJ.EMPTY),this._addCmd([F$J]),this.setSkinMesh&&this.setSkinMesh(F$J._ps,F$J.mVBData,F$J.mEleNum,0,F$J.mTexture,F$J.transform)})}return F$V(F$y,"laya.ani.GraphicsAni",F$R),F$y.prototype.drawSkin=function(F$J){var F$y=[F$J];this._saveToCmd(F$s._context._drawSkin,F$y)},F$y.create=function(){return F$y._caches.pop()||new F$y},F$y.recycle=function(F$J){F$J.clear(),F$y._caches.push(F$J)},F$y._caches=[],F$y}(),F$x=function(F$J){function F$O(){this._aniMap={},this.unfixedLastAniIndex=-1,F$O.__super.call(this),this._anis=new Array}F$V(F$O,"laya.ani.AnimationTemplet",F$$);var F$y=F$O.prototype;return F$y.parse=function(F$J){var F$y=new F$vJ(F$J);this._aniVersion=F$y.readUTFString(),F$L.parse(this,F$y)},F$y._calculateKeyFrame=function(F$J,F$y,F$T){var F$V=F$J.keyFrame;F$V[F$y]=F$V[0];for(var F$Z=0;F$Z<F$y;F$Z++){var F$m=F$V[F$Z];F$m.nextData=0===F$m.duration?F$m.data:F$V[F$Z+1].data}F$V.length--},F$y.onAsynLoaded=function(F$J,F$y,F$T){var F$V=new F$vJ(F$y);switch(this._aniVersion=F$V.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":F$H.parse(this,F$V);break;default:F$L.parse(this,F$V)}this._endLoaded()},F$y.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},F$y.getAnimationCount=function(){return this._anis.length},F$y.getAnimation=function(F$J){return this._anis[F$J]},F$y.getAniDuration=function(F$J){return this._anis[F$J].playTime},F$y.getNodes=function(F$J){return this._anis[F$J].nodes},F$y.getNodeIndexWithName=function(F$J,F$y){return this._anis[F$J].bone3DMap[F$y]},F$y.getNodeCount=function(F$J){return this._anis[F$J].nodes.length},F$y.getTotalkeyframesLength=function(F$J){return this._anis[F$J].totalKeyframeDatasLength},F$y.getPublicExtData=function(){return this._publicExtData},F$y.getAnimationDataWithCache=function(F$J,F$y,F$T,F$V){var F$Z=F$y[F$T];if(F$Z){var F$m=F$Z[F$J];return F$m?F$m[F$V]:null}return null},F$y.setAnimationDataWithCache=function(F$J,F$y,F$T,F$V,F$Z){var F$m=F$y[F$T]||(F$y[F$T]={});(F$m[F$J]||(F$m[F$J]=[]))[F$V]=F$Z},F$y.getOriginalData=function(F$J,F$y,F$T,F$V,F$Z){for(var F$m=this._anis[F$J].nodes,F$R=0,F$n=0,F$K=F$m.length,F$A=0;F$n<F$K;F$n++){var F$$,F$e=F$m[F$n];F$$=F$e.keyFrame[F$T[F$n][F$V]],F$e.dataOffset=F$A;var F$M=F$Z-F$$.startTime,F$G=F$e.lerpType;if(F$G)switch(F$G){case 0:case 1:for(F$R=0;F$R<F$e.keyframeWidth;)F$R+=F$e.interpolationMethod[F$R](F$e,F$R,F$y,F$A+F$R,F$$.data,F$M,null,F$$.duration,F$$.nextData);break;case 2:var F$B=F$$.interpolationData,F$o=F$B.length,F$s=0;for(F$R=0;F$R<F$o;){var F$E=F$B[F$R];switch(F$E){case 6:case 7:F$R+=F$O.interpolation[F$E](F$e,F$s,F$y,F$A+F$s,F$$.data,F$M,null,F$$.duration,F$$.nextData,F$B,F$R+1);break;default:F$R+=F$O.interpolation[F$E](F$e,F$s,F$y,F$A+F$s,F$$.data,F$M,null,F$$.duration,F$$.nextData)}F$s++}}else for(F$R=0;F$R<F$e.keyframeWidth;)F$R+=F$e.interpolationMethod[F$R](F$e,F$R,F$y,F$A+F$R,F$$.data,F$M,null,F$$.duration,F$$.nextData);F$A+=F$e.keyframeWidth}},F$y.getNodesCurrentFrameIndex=function(F$J,F$y){var F$T=this._anis[F$J].nodes;F$J!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(F$T.length),this.unfixedCurrentTimes=new Float32Array(F$T.length),this.unfixedLastAniIndex=F$J);for(var F$V=0,F$Z=F$T.length;F$V<F$Z;F$V++){var F$m=F$T[F$V];for(F$y<this.unfixedCurrentTimes[F$V]&&(this.unfixedCurrentFrameIndexes[F$V]=0),this.unfixedCurrentTimes[F$V]=F$y;this.unfixedCurrentFrameIndexes[F$V]<F$m.keyFrame.length&&!(F$m.keyFrame[this.unfixedCurrentFrameIndexes[F$V]].startTime>this.unfixedCurrentTimes[F$V]);)this.unfixedCurrentFrameIndexes[F$V]++;this.unfixedCurrentFrameIndexes[F$V]--}return this.unfixedCurrentFrameIndexes},F$y.getOriginalDataUnfixedRate=function(F$J,F$y,F$T){var F$V=this._anis[F$J].nodes;F$J!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(F$V.length),this.unfixedCurrentTimes=new Float32Array(F$V.length),this.unfixedKeyframes=F$o(F$V.length),this.unfixedLastAniIndex=F$J);for(var F$Z=0,F$m=0,F$R=F$V.length,F$n=0;F$m<F$R;F$m++){var F$K=F$V[F$m];for(F$T<this.unfixedCurrentTimes[F$m]&&(this.unfixedCurrentFrameIndexes[F$m]=0),this.unfixedCurrentTimes[F$m]=F$T;this.unfixedCurrentFrameIndexes[F$m]<F$K.keyFrame.length&&!(F$K.keyFrame[this.unfixedCurrentFrameIndexes[F$m]].startTime>this.unfixedCurrentTimes[F$m]);)this.unfixedKeyframes[F$m]=F$K.keyFrame[this.unfixedCurrentFrameIndexes[F$m]],this.unfixedCurrentFrameIndexes[F$m]++;var F$A=this.unfixedKeyframes[F$m];F$K.dataOffset=F$n;var F$$=F$T-F$A.startTime;if(F$K.lerpType)switch(F$K.lerpType){case 0:case 1:for(F$Z=0;F$Z<F$K.keyframeWidth;)F$Z+=F$K.interpolationMethod[F$Z](F$K,F$Z,F$y,F$n+F$Z,F$A.data,F$$,null,F$A.duration,F$A.nextData);break;case 2:var F$e=F$A.interpolationData,F$M=F$e.length,F$G=0;for(F$Z=0;F$Z<F$M;){var F$B=F$e[F$Z];switch(F$B){case 6:case 7:F$Z+=F$O.interpolation[F$B](F$K,F$G,F$y,F$n+F$G,F$A.data,F$$,null,F$A.duration,F$A.nextData,F$e,F$Z+1);break;default:F$Z+=F$O.interpolation[F$B](F$K,F$G,F$y,F$n+F$G,F$A.data,F$$,null,F$A.duration,F$A.nextData)}F$G++}}else for(F$Z=0;F$Z<F$K.keyframeWidth;)F$Z+=F$K.interpolationMethod[F$Z](F$K,F$Z,F$y,F$n+F$Z,F$A.data,F$$,null,F$A.duration,F$A.nextData);F$n+=F$K.keyframeWidth}},F$O._LinearInterpolation_0=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){var F$$=0===F$n?0:F$m/F$n;return F$T[F$V]=(1-F$$)*F$Z[F$y]+F$$*F$K[F$y],1},F$O._QuaternionInterpolation_1=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){var F$$=0===F$n?0:F$m/F$n;return F$M.slerpQuaternionArray(F$Z,F$y,F$K,F$y,F$$,F$T,F$V),4},F$O._AngleInterpolation_2=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){return 0},F$O._RadiansInterpolation_3=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){return 0},F$O._Matrix4x4Interpolation_4=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){for(var F$$=0;F$$<16;F$$++,F$y++)F$T[F$V+F$$]=F$Z[F$y]+F$m*F$R[F$y];return 16},F$O._NoInterpolation_5=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A){return F$T[F$V]=F$Z[F$y],1},F$O._BezierInterpolation_6=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$){return void 0===F$$&&(F$$=0),F$T[F$V]=F$Z[F$y]+(F$K[F$y]-F$Z[F$y])*F$q.getBezierRate(F$m/F$n,F$A[F$$],F$A[F$$+1],F$A[F$$+2],F$A[F$$+3]),5},F$O._BezierInterpolation_7=function(F$J,F$y,F$T,F$V,F$Z,F$m,F$R,F$n,F$K,F$A,F$$){return void 0===F$$&&(F$$=0),F$T[F$V]=F$A[F$$+4]+F$A[F$$+5]*F$q.getBezierRate((.001*F$m+F$A[F$$+6])/F$A[F$$+7],F$A[F$$],F$A[F$$+1],F$A[F$$+2],F$A[F$$+3]),9},F$O.load=function(F$J){return F$ZJ.loader.create(F$J,null,null,F$O)},F$O.interpolation=[F$O._LinearInterpolation_0,F$O._QuaternionInterpolation_1,F$O._AngleInterpolation_2,F$O._RadiansInterpolation_3,F$O._Matrix4x4Interpolation_4,F$O._NoInterpolation_5,F$O._BezierInterpolation_6,F$O._BezierInterpolation_7],F$O}(),F$D=function(F$y){function F$T(F$J,F$y){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,F$T.__super.call(this),void 0===F$y&&(F$y=0),F$J&&this.init(F$J,F$y)}F$V(F$T,"laya.ani.bone.Skeleton",F$y);var F$J=F$T.prototype;return F$J.init=function(F$J,F$y){void 0===F$y&&(F$y=0);var F$T,F$V,F$Z,F$m=0,F$R=0;if(1==F$y)for(this._graphicsCache=[],F$m=0,F$R=F$J.getAnimationCount();F$m<F$R;F$m++)this._graphicsCache.push([]);if(this._yReverseMatrix=F$J.yReverseMatrix,this._aniMode=F$y,this._templet=F$J,this._player=new F$r,this._player.cacheFrameRate=F$J.rate,this._player.templet=F$J,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=F$J.mBoneArr,this._rootBone=F$J.mRootBone,this._aniSectionDic=F$J.aniSectionDic,0<F$J.ikArr.length)for(this._ikArr=[],F$m=0,F$R=F$J.ikArr.length;F$m<F$R;F$m++)this._ikArr.push(new F$O(F$J.ikArr[F$m],this._boneList));if(0<F$J.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),F$m=0,F$R=F$J.pathArr.length;F$m<F$R;F$m++)F$T=F$J.pathArr[F$m],F$V=new F$P(F$T,this._boneList),(F$Z=this._boneSlotDic[F$T.name])&&((F$V=new F$P(F$T,this._boneList)).target=F$Z),this._pathDic[F$T.name]=F$V;if(0<F$J.tfArr.length)for(this._tfArr=[],F$m=0,F$R=F$J.tfArr.length;F$m<F$R;F$m++)this._tfArr.push(new F$l(F$J.tfArr[F$m],this._boneList));if(0<F$J.skinDataArray.length){var F$n=this._templet.skinDataArray[this._skinIndex];this._skinName=F$n.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},F$J.load=function(F$J,F$y,F$T){},F$J._onLoaded=function(){},F$J._parseComplete=function(){var F$J=F$_.TEMPLET_DICTIONARY[this._aniPath];F$J&&(this.init(F$J,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},F$J._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},F$J._onPlay=function(){this.event("played")},F$J._onStop=function(){var F$J,F$y=this._templet.eventAniArr[this._aniClipIndex];if(F$y&&this._eventIndex<F$y.length)for(;this._eventIndex<F$y.length;this._eventIndex++)(F$J=F$y[this._eventIndex]).time>=this._player.playStart&&F$J.time<=this._player.playEnd&&this.event("label",F$J);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},F$J._onPause=function(){this.event("paused")},F$J._parseSrcBoneMatrix=function(){var F$J=0,F$y=0;for(F$y=this._templet.srcBoneMatrixArr.length,F$J=0;F$J<F$y;F$J++)this._boneMatrixArray.push(new F$QJ);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var F$T,F$V,F$Z=this._templet.boneSlotArray;for(F$J=0,F$y=F$Z.length;F$J<F$y;F$J++)F$T=F$Z[F$J],null==(F$V=this._bindBoneBoneSlotDic[F$T.parent])&&(this._bindBoneBoneSlotDic[F$T.parent]=F$V=[]),this._boneSlotDic[F$T.name]=F$T=F$T.copy(),F$V.push(F$T),this._boneSlotArray.push(F$T)}},F$J._emitMissedEvents=function(F$J,F$y,F$T){void 0===F$T&&(F$T=0);var F$V=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(F$V){var F$Z,F$m,F$R=0;for(F$Z=F$V.length,F$R=F$T;F$R<F$Z;F$R++)(F$m=F$V[F$R]).time>=this._player.playStart&&F$m.time<=this._player.playEnd&&this.event("label",F$m)}},F$J._update=function(F$J){if(void 0===F$J&&(F$J=!0),!(this._pause||F$J&&this._indexControl)){var F$y=this.timer.currTimer,F$T=this._player.currentKeyframeIndex,F$V=F$y-this._lastTime;if(F$J?this._player._update(F$V):F$T=-1,this._lastTime=F$y,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<F$V&&this._clipIndex==F$T&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var F$Z;this._lastUpdateAniClipIndex=this._aniClipIndex,F$T>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var F$m,F$R=this._templet.eventAniArr[this._aniClipIndex];if(F$R&&this._eventIndex<F$R.length&&((F$Z=F$R[this._eventIndex]).time>=this._player.playStart&&F$Z.time<=this._player.playEnd?this._player.currentPlayTime>=F$Z.time&&(this.event("label",F$Z),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(F$m=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=F$m&&(this.graphics=F$m));var F$n=0,F$K=0;for(F$K=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,F$K-1)&&0<F$K;)F$K--;if(F$K<this._clipIndex)for(F$n=F$K;F$n<this._clipIndex;F$n++)this._createGraphics(F$n)}else if(1==this._aniMode){if(F$m=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=F$m&&(this.graphics=F$m));for(F$K=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,F$K-1)&&0<F$K;)F$K--;if(F$K<this._clipIndex)for(F$n=F$K;F$n<this._clipIndex;F$n++)this._createGraphics(F$n)}this._createGraphics()}}},F$J._createGraphics=function(F$J){void 0===F$J&&(F$J=-1),-1==F$J&&(F$J=this._clipIndex);var F$y,F$T,F$V=F$J*this._player.cacheFrameRateInterval,F$Z=this._templet.drawOrderAniArr[this._aniClipIndex];if(F$Z&&0<F$Z.length)for(this._drawOrderIndex=0,F$y=F$Z[this._drawOrderIndex];F$V>=F$y.time&&(this._drawOrder=F$y.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=F$Z.length));)F$y=F$Z[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=F$u.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=F$u.create(),F$T=this.graphics;var F$m=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],F$J,F$V);var F$R,F$n,F$K,F$A,F$$=this._aniSectionDic[this._aniClipIndex],F$e=0,F$M=0,F$G=0,F$B=0,F$o=0,F$s=this._templet.srcBoneMatrixArr.length;for(F$o=F$$[F$M=0];F$M<F$s;F$M++)F$A=this._boneList[F$M],F$K=this._templet.srcBoneMatrixArr[F$M],F$A.resultTransform.scX=F$K.scX*this._curOriginalData[F$e++],F$A.resultTransform.skX=F$K.skX+this._curOriginalData[F$e++],F$A.resultTransform.skY=F$K.skY+this._curOriginalData[F$e++],F$A.resultTransform.scY=F$K.scY*this._curOriginalData[F$e++],F$A.resultTransform.x=F$K.x+this._curOriginalData[F$e++],F$A.resultTransform.y=F$K.y+this._curOriginalData[F$e++],8===this._templet.tMatrixDataLen&&(F$A.resultTransform.skewX=F$K.skewX+this._curOriginalData[F$e++],F$A.resultTransform.skewY=F$K.skewY+this._curOriginalData[F$e++]);var F$E,F$O={},F$L={};for(F$o+=F$$[1];F$M<F$o;F$M++)F$O[(F$E=F$m[F$M]).name]=this._curOriginalData[F$e++],F$L[F$E.name]=this._curOriginalData[F$e++],this._curOriginalData[F$e++],this._curOriginalData[F$e++],this._curOriginalData[F$e++],this._curOriginalData[F$e++];var F$H,F$P,F$l={},F$a={};for(F$o+=F$$[2];F$M<F$o;F$M++)F$l[(F$E=F$m[F$M]).name]=this._curOriginalData[F$e++],F$a[F$E.name]=this._curOriginalData[F$e++],this._curOriginalData[F$e++],this._curOriginalData[F$e++],this._curOriginalData[F$e++],this._curOriginalData[F$e++];if(this._pathDic)for(F$o+=F$$[3];F$M<F$o;F$M++){if(F$E=F$m[F$M],F$H=this._pathDic[F$E.name])switch(new F$vJ(F$E.extenData).getByte()){case 1:F$H.position=this._curOriginalData[F$e++];break;case 2:F$H.spacing=this._curOriginalData[F$e++];break;case 3:F$H.rotateMix=this._curOriginalData[F$e++],F$H.translateMix=this._curOriginalData[F$e++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(F$QJ.TEMP.identity()),this._ikArr)for(F$M=0,F$o=this._ikArr.length;F$M<F$o;F$M++)F$P=this._ikArr[F$M],F$l.hasOwnProperty(F$P.name)&&(F$P.bendDirection=F$l[F$P.name]),F$a.hasOwnProperty(F$P.name)&&(F$P.mix=F$a[F$P.name]),F$P.apply();if(this._pathDic)for(var F$q in this._pathDic)(F$H=this._pathDic[F$q]).apply(this._boneList,F$T);if(this._tfArr)for(F$M=0,F$B=this._tfArr.length;F$M<F$B;F$M++)this._tfArr[F$M].apply();for(F$M=0,F$B=this._boneList.length;F$M<F$B;F$M++)if(F$A=this._boneList[F$M],F$n=this._bindBoneBoneSlotDic[F$A.name],F$A.resultMatrix.copyTo(this._boneMatrixArray[F$M]),F$n)for(F$G=0,F$o=F$n.length;F$G<F$o;F$G++)(F$R=F$n[F$G])&&F$R.setParentMatrix(F$A.resultMatrix);var F$r,F$D,F$_,F$t,F$v={},F$Q=this._templet.deformAniArr;if(F$Q&&0<F$Q.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,F$M=0,F$o=this._boneSlotArray.length;F$M<F$o;F$M++)(F$R=this._boneSlotArray[F$M]).deformData=null;var F$i,F$c=F$Q[this._aniClipIndex];for(F$i in F$r=F$c.default,this._setDeform(F$r,F$v,this._boneSlotArray,F$V),F$c)"default"!=F$i&&F$i!=this._skinName&&(F$r=F$c[F$i],this._setDeform(F$r,F$v,this._boneSlotArray,F$V));F$r=F$c[this._skinName],this._setDeform(F$r,F$v,this._boneSlotArray,F$V)}if(this._drawOrder)for(F$M=0,F$o=this._drawOrder.length;F$M<F$o;F$M++)F$D=F$O[(F$R=this._boneSlotArray[this._drawOrder[F$M]]).name],F$_=F$L[F$R.name],isNaN(F$_)||(F$T.save(),F$T.alpha(F$_)),isNaN(F$D)||-2==F$D||(this._templet.attachmentNames?F$R.showDisplayByName(this._templet.attachmentNames[F$D]):F$R.showDisplayByIndex(F$D)),F$v[this._drawOrder[F$M]]?(F$t=F$v[this._drawOrder[F$M]],F$R.currDisplayData&&F$t[F$R.currDisplayData.attachmentName]?F$R.deformData=F$t[F$R.currDisplayData.attachmentName]:F$R.deformData=null):F$R.deformData=null,isNaN(F$_)?F$R.draw(F$T,this._boneMatrixArray,2==this._aniMode):F$R.draw(F$T,this._boneMatrixArray,2==this._aniMode,F$_),isNaN(F$_)||F$T.restore();else for(F$M=0,F$o=this._boneSlotArray.length;F$M<F$o;F$M++)F$D=F$O[(F$R=this._boneSlotArray[F$M]).name],F$_=F$L[F$R.name],isNaN(F$_)||(F$T.save(),F$T.alpha(F$_)),isNaN(F$D)||-2==F$D||(this._templet.attachmentNames?F$R.showDisplayByName(this._templet.attachmentNames[F$D]):F$R.showDisplayByIndex(F$D)),F$v[F$M]?(F$t=F$v[F$M],F$R.currDisplayData&&F$t[F$R.currDisplayData.attachmentName]?F$R.deformData=F$t[F$R.currDisplayData.attachmentName]:F$R.deformData=null):F$R.deformData=null,isNaN(F$_)?F$R.draw(F$T,this._boneMatrixArray,2==this._aniMode):F$R.draw(F$T,this._boneMatrixArray,2==this._aniMode,F$_),isNaN(F$_)||F$T.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,F$J,F$T):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,F$J,F$T)},F$J._setDeform=function(F$J,F$y,F$T,F$V){if(F$J){var F$Z,F$m,F$R,F$n=0,F$K=0,F$A=0;if(F$J)for(F$n=0,F$K=F$J.deformSlotDataList.length;F$n<F$K;F$n++)for(F$Z=F$J.deformSlotDataList[F$n],F$A=0;F$A<F$Z.deformSlotDisplayList.length;F$A++)F$R=F$T[(F$m=F$Z.deformSlotDisplayList[F$A]).slotIndex],F$m.apply(F$V,F$R),F$y[F$m.slotIndex]||(F$y[F$m.slotIndex]={}),F$y[F$m.slotIndex][F$m.attachment]=F$m.deformData}},F$J.getAnimNum=function(){return this._templet.getAnimationCount()},F$J.getAniNameByIndex=function(F$J){return this._templet.getAniNameByIndex(F$J)},F$J.getSlotByName=function(F$J){return this._boneSlotDic[F$J]},F$J.showSkinByName=function(F$J,F$y){void 0===F$y&&(F$y=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(F$J),F$y)},F$J.showSkinByIndex=function(F$J,F$y){void 0===F$y&&(F$y=!0);for(var F$T=0;F$T<this._boneSlotArray.length;F$T++)this._boneSlotArray[F$T].showSlotData(null,F$y);if(this._templet.showSkinByIndex(this._boneSlotDic,F$J,F$y)){var F$V=this._templet.skinDataArray[F$J];this._skinIndex=F$J,this._skinName=F$V.name}this._clearCache()},F$J.showSlotSkinByIndex=function(F$J,F$y){if(0!=this._aniMode){var F$T=this.getSlotByName(F$J);F$T&&F$T.showDisplayByIndex(F$y),this._clearCache()}},F$J.showSlotSkinByName=function(F$J,F$y){if(0!=this._aniMode){var F$T=this.getSlotByName(F$J);F$T&&F$T.showDisplayByName(F$y),this._clearCache()}},F$J.replaceSlotSkinName=function(F$J,F$y,F$T){if(0!=this._aniMode){var F$V=this.getSlotByName(F$J);F$V&&F$V.replaceDisplayByName(F$y,F$T),this._clearCache()}},F$J.replaceSlotSkinByIndex=function(F$J,F$y,F$T){if(0!=this._aniMode){var F$V=this.getSlotByName(F$J);F$V&&F$V.replaceDisplayByIndex(F$y,F$T),this._clearCache()}},F$J.setSlotSkin=function(F$J,F$y){if(0!=this._aniMode){var F$T=this.getSlotByName(F$J);F$T&&F$T.replaceSkin(F$y),this._clearCache()}},F$J._clearCache=function(){if(1==this._aniMode)for(var F$J=0,F$y=this._graphicsCache.length;F$J<F$y;F$J++){for(var F$T=0,F$V=this._graphicsCache[F$J].length;F$T<F$V;F$T++){var F$Z=this._graphicsCache[F$J][F$T];F$Z!=this.graphics&&F$u.recycle(F$Z)}this._graphicsCache[F$J].length=0}},F$J.play=function(F$J,F$y,F$T,F$V,F$Z,F$m){void 0===F$T&&(F$T=!0),void 0===F$V&&(F$V=0),void 0===F$Z&&(F$Z=0),void 0===F$m&&(F$m=!0),this._indexControl=!1;var F$R=-1,F$n=NaN;if(F$n=F$y?2147483647:0,"string"==typeof F$J)for(var F$K=0,F$A=this._templet.getAnimationCount();F$K<F$A;F$K++){var F$$=this._templet.getAnimation(F$K);if(F$$&&F$J==F$$.name){F$R=F$K;break}}else F$R=F$J;-1<F$R&&F$R<this.getAnimNum()&&(this._aniClipIndex=F$R,(F$T||this._pause||this._currAniIndex!=F$R)&&(this._currAniIndex=F$R,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(F$R)),this._drawOrder=null,this._eventIndex=0,this._player.play(F$R,this._player.playbackRate,F$n,F$V,F$Z),F$m&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=F$e.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},F$J.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},F$J.playbackRate=function(F$J){this._player&&(this._player.playbackRate=F$J)},F$J.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},F$J.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=F$e.now(),this.timer.frameLoop(1,this,this._update,null,!0))},F$J._getGrahicsDataWithCache=function(F$J,F$y){return this._graphicsCache[F$J][F$y]},F$J._setGrahicsDataWithCache=function(F$J,F$y,F$T){this._graphicsCache[F$J][F$y]=F$T},F$J.destroy=function(F$J){void 0===F$J&&(F$J=!0),F$y.prototype.destroy.call(this,F$J),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},F$m(0,F$J,"url",function(){return this._aniPath},function(F$J){this.load(F$J)}),F$m(0,F$J,"index",function(){return this._index},function(F$J){this.player&&(this._index=F$J,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),F$m(0,F$J,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),F$m(0,F$J,"templet",function(){return this._templet}),F$m(0,F$J,"player",function(){return this._player}),F$T.useSimpleMeshInCanvas=!1,F$T}(F$mJ),F$_=function(F$y){function F$Z(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,F$Z.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}F$V(F$Z,"laya.ani.bone.Templet",F$y);var F$J=F$Z.prototype;return F$J.getLoadList=function(){return this._loadList},F$J.loadAni=function(F$J){this._skBufferUrl=F$J,F$ZJ.loader.load(F$J,F$K.create(this,this.onComplete),null,"arraybuffer")},F$J.onComplete=function(F$J){if(this._isDestroyed)this.destroy();else{var F$y=F$A.getRes(this._skBufferUrl);F$y?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,F$y)):this.event("error","load failed:"+this._skBufferUrl)}},F$J.parseData=function(F$J,F$y,F$T){void 0===F$T&&(F$T=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=F$J,this._mainTexture&&F$s.isWebGL&&F$J.bitmap&&(F$J.bitmap.enableMerageInAtlas=!1),this._rate=F$T,this.parse(F$y)},F$J.buildArmature=function(F$J){return void 0===F$J&&(F$J=0),new F$D(this,F$J)},F$J.parse=function(F$J){F$y.prototype.parse.call(this,F$J),this._endLoaded(),this._aniVersion!=F$Z.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+F$Z.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},F$J._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var F$J=0;this._loadList=[];var F$y,F$T=new F$vJ(this.getPublicExtData()),F$V=0,F$Z=0,F$m=0,F$R=F$T.getInt32(),F$n=F$T.readUTFString(),F$K=F$n.split("\n");for(F$J=0;F$J<F$R;F$J++)F$y=this._path+F$K[2*F$J],F$n=F$K[2*F$J+1],F$T.getFloat32(),F$T.getFloat32(),F$V=F$T.getFloat32(),F$Z=F$T.getFloat32(),F$m=F$T.getFloat32(),isNaN(F$m)?0:F$m,F$m=F$T.getFloat32(),isNaN(F$m)?0:F$m,F$m=F$T.getFloat32(),isNaN(F$m)?F$V:F$m,F$m=F$T.getFloat32(),isNaN(F$m)?F$Z:F$m,-1==this._loadList.indexOf(F$y)&&this._loadList.push(F$y);this.event("inited",this)}},F$J._textureComplete=function(){for(var F$J,F$y,F$T=0,F$V=this._loadList.length;F$T<F$V;F$T++)F$y=this._loadList[F$T],F$J=this._textureDic[F$y]=F$A.getRes(F$y),F$s.isWebGL&&F$J&&F$J.bitmap&&(F$J.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},F$J._parsePublicExtData=function(){var F$J=0,F$y=0,F$T=0,F$V=0,F$Z=0;for(F$J=0,F$Z=this.getAnimationCount();F$J<F$Z;F$J++)this._graphicsCache.push([]);var F$m;F$m="Dragon"!=this._aniClassName;var F$R,F$n,F$K=new F$vJ(this.getPublicExtData()),F$A=0,F$$=0,F$e=0,F$M=0,F$G=0,F$B=0,F$o=0,F$s=0,F$E=0,F$O=F$K.getInt32(),F$L=F$K.readUTFString(),F$H=F$L.split("\n");for(F$J=0;F$J<F$O;F$J++){if(F$R=this._mainTexture,F$n=this._path+F$H[2*F$J],F$L=F$H[2*F$J+1],null==this._mainTexture&&(F$R=this._textureDic[F$n]),!F$R)return this.event("error",this),void(this.isParseFail=!0);F$A=F$K.getFloat32(),F$$=F$K.getFloat32(),F$e=F$K.getFloat32(),F$M=F$K.getFloat32(),F$E=F$K.getFloat32(),F$G=isNaN(F$E)?0:F$E,F$E=F$K.getFloat32(),F$B=isNaN(F$E)?0:F$E,F$E=F$K.getFloat32(),F$o=isNaN(F$E)?F$e:F$E,F$E=F$K.getFloat32(),F$s=isNaN(F$E)?F$M:F$E,this.subTextureDic[F$L]=F$iJ.create(F$R,F$A,F$$,F$e,F$M,-F$G,-F$B,F$o,F$s),F$R.alphaTexture&&(this.subTextureDic[F$L].alphaTexture=F$iJ.create(F$R.alphaTexture,F$A,F$$,F$e,F$M,-F$G,-F$B,F$o,F$s))}this._mainTexture=F$R;var F$P,F$l,F$a,F$q,F$r,F$D=F$K.getUint16();for(F$J=0;F$J<F$D;F$J++)(F$P=[]).push(F$K.getUint16()),F$P.push(F$K.getUint16()),F$P.push(F$K.getUint16()),F$P.push(F$K.getUint16()),this.aniSectionDic[F$J]=F$P;var F$_,F$t=F$K.getInt16(),F$v={};for(F$J=0;F$J<F$t;F$J++)F$l=new F$cJ,0==F$J?F$_=F$l:F$l.root=F$_,F$l.d=F$m?-1:1,F$q=F$K.readUTFString(),F$r=F$K.readUTFString(),F$l.length=F$K.getFloat32(),1==F$K.getByte()&&(F$l.inheritRotation=!1),1==F$K.getByte()&&(F$l.inheritScale=!1),F$l.name=F$q,F$r&&((F$a=F$v[F$r])?F$a.addChild(F$l):this.mRootBone=F$l),F$v[F$q]=F$l,this.mBoneArr.push(F$l);this.tMatrixDataLen=F$K.getUint16();var F$Q,F$i,F$c=F$K.getUint16(),F$u=Math.floor(F$c/this.tMatrixDataLen),F$x=this.srcBoneMatrixArr;for(F$J=0;F$J<F$u;F$J++)(F$Q=new F$FJ).scX=F$K.getFloat32(),F$Q.skX=F$K.getFloat32(),F$Q.skY=F$K.getFloat32(),F$Q.scY=F$K.getFloat32(),F$Q.x=F$K.getFloat32(),F$Q.y=F$K.getFloat32(),8===this.tMatrixDataLen&&(F$Q.skewX=F$K.getFloat32(),F$Q.skewY=F$K.getFloat32()),F$x.push(F$Q),(F$l=this.mBoneArr[F$J]).transform=F$Q;var F$k,F$X=F$K.getUint16(),F$S=0;for(F$J=0;F$J<F$X;F$J++){for(F$i=new F$WJ,F$S=F$K.getUint16(),F$y=0;F$y<F$S;F$y++)F$i.boneNames.push(F$K.readUTFString()),F$i.boneIndexs.push(F$K.getInt16());F$i.name=F$K.readUTFString(),F$i.targetBoneName=F$K.readUTFString(),F$i.targetBoneIndex=F$K.getInt16(),F$i.bendDirection=F$K.getFloat32(),F$i.mix=F$K.getFloat32(),F$i.isSpine=F$m,this.ikArr.push(F$i)}var F$f,F$W=F$K.getUint16(),F$I=0;for(F$J=0;F$J<F$W;F$J++){for(F$k=new F$CJ,F$I=F$K.getUint16(),F$y=0;F$y<F$I;F$y++)F$k.boneIndexs.push(F$K.getInt16());F$k.name=F$K.getUTFString(),F$k.targetIndex=F$K.getInt16(),F$k.rotateMix=F$K.getFloat32(),F$k.translateMix=F$K.getFloat32(),F$k.scaleMix=F$K.getFloat32(),F$k.shearMix=F$K.getFloat32(),F$k.offsetRotation=F$K.getFloat32(),F$k.offsetX=F$K.getFloat32(),F$k.offsetY=F$K.getFloat32(),F$k.offsetScaleX=F$K.getFloat32(),F$k.offsetScaleY=F$K.getFloat32(),F$k.offsetShearY=F$K.getFloat32(),this.tfArr.push(F$k)}var F$Y=F$K.getUint16(),F$U=0;for(F$J=0;F$J<F$Y;F$J++){for((F$f=new F$IJ).name=F$K.readUTFString(),F$U=F$K.getUint16(),F$y=0;F$y<F$U;F$y++)F$f.bones.push(F$K.getInt16());F$f.target=F$K.readUTFString(),F$f.positionMode=F$K.readUTFString(),F$f.spacingMode=F$K.readUTFString(),F$f.rotateMode=F$K.readUTFString(),F$f.offsetRotation=F$K.getFloat32(),F$f.position=F$K.getFloat32(),F$f.spacing=F$K.getFloat32(),F$f.rotateMix=F$K.getFloat32(),F$f.translateMix=F$K.getFloat32(),this.pathArr.push(F$f)}var F$d,F$C,F$F,F$b,F$h,F$p=0,F$j=0,F$g=0,F$N=NaN,F$w=0,F$z=F$K.getInt16();for(F$J=0;F$J<F$z;F$J++){var F$JJ=F$K.getUint8(),F$yJ={};this.deformAniArr.push(F$yJ);for(var F$TJ=0;F$TJ<F$JJ;F$TJ++)for((F$d=new F$xJ).skinName=F$K.getUTFString(),F$yJ[F$d.skinName]=F$d,F$p=F$K.getInt16(),F$y=0;F$y<F$p;F$y++)for(F$C=new F$kJ,F$d.deformSlotDataList.push(F$C),F$j=F$K.getInt16(),F$T=0;F$T<F$j;F$T++)for(F$F=new F$XJ,F$C.deformSlotDisplayList.push(F$F),F$F.slotIndex=F$K.getInt16(),F$F.attachment=F$K.getUTFString(),F$g=F$K.getInt16(),F$V=0;F$V<F$g;F$V++)for(1==F$K.getByte()?F$F.tweenKeyList.push(!0):F$F.tweenKeyList.push(!1),F$N=F$K.getFloat32(),F$F.timeList.push(F$N),F$b=[],F$F.vectices.push(F$b),F$w=F$K.getInt16(),F$Z=0;F$Z<F$w;F$Z++)F$b.push(F$K.getFloat32())}var F$VJ,F$ZJ,F$mJ=F$K.getInt16(),F$RJ=0,F$nJ=0;for(F$J=0;F$J<F$mJ;F$J++){for(F$RJ=F$K.getInt16(),F$h=[],F$y=0;F$y<F$RJ;F$y++){for((F$VJ=new F$SJ).time=F$K.getFloat32(),F$nJ=F$K.getInt16(),F$T=0;F$T<F$nJ;F$T++)F$VJ.drawOrder.push(F$K.getInt16());F$h.push(F$VJ)}this.drawOrderAniArr.push(F$h)}var F$KJ,F$AJ=F$K.getInt16(),F$$J=0;for(F$J=0;F$J<F$AJ;F$J++){for(F$$J=F$K.getInt16(),F$ZJ=[],F$y=0;F$y<F$$J;F$y++)(F$KJ=new F$fJ).name=F$K.getUTFString(),F$KJ.intValue=F$K.getInt32(),F$KJ.floatValue=F$K.getFloat32(),F$KJ.stringValue=F$K.getUTFString(),F$KJ.time=F$K.getFloat32(),F$ZJ.push(F$KJ);this.eventAniArr.push(F$ZJ)}var F$eJ=F$K.getInt16();if(0<F$eJ)for(this.attachmentNames=[],F$J=0;F$J<F$eJ;F$J++)this.attachmentNames.push(F$K.getUTFString());var F$MJ,F$GJ,F$BJ=F$K.getInt16();for(F$J=0;F$J<F$BJ;F$J++)(F$MJ=new F$uJ).name=F$K.readUTFString(),F$MJ.parent=F$K.readUTFString(),F$MJ.attachmentName=F$K.readUTFString(),F$MJ.srcDisplayIndex=F$MJ.displayIndex=F$K.getInt16(),(F$MJ.templet=this).boneSlotDic[F$MJ.name]=F$MJ,null==(F$GJ=this.bindBoneBoneSlotDic[F$MJ.parent])&&(this.bindBoneBoneSlotDic[F$MJ.parent]=F$GJ=[]),F$GJ.push(F$MJ),this.boneSlotArray.push(F$MJ);var F$oJ,F$sJ,F$EJ,F$OJ=F$K.readUTFString().split("\n"),F$LJ=0,F$HJ=F$K.getUint8(),F$PJ=0,F$lJ=0,F$aJ=0,F$qJ=0,F$rJ=0,F$DJ=0,F$_J=0;for(F$J=0;F$J<F$HJ;F$J++){for((F$oJ=new F$YJ).name=F$OJ[F$LJ++],F$PJ=F$K.getUint8(),F$y=0;F$y<F$PJ;F$y++){for((F$sJ=new F$dJ).name=F$OJ[F$LJ++],F$MJ=this.boneSlotDic[F$sJ.name],F$lJ=F$K.getUint8(),F$T=0;F$T<F$lJ;F$T++){if(F$EJ=new F$UJ,this.skinSlotDisplayDataArr.push(F$EJ),F$EJ.name=F$OJ[F$LJ++],F$EJ.attachmentName=F$OJ[F$LJ++],F$EJ.transform=new F$FJ,F$EJ.transform.scX=F$K.getFloat32(),F$EJ.transform.skX=F$K.getFloat32(),F$EJ.transform.skY=F$K.getFloat32(),F$EJ.transform.scY=F$K.getFloat32(),F$EJ.transform.x=F$K.getFloat32(),F$EJ.transform.y=F$K.getFloat32(),F$sJ.displayArr.push(F$EJ),F$EJ.width=F$K.getFloat32(),F$EJ.height=F$K.getFloat32(),F$EJ.type=F$K.getUint8(),F$EJ.verLen=F$K.getUint16(),0<(F$t=F$K.getUint16()))for(F$EJ.bones=[],F$V=0;F$V<F$t;F$V++){var F$tJ=F$K.getUint16();F$EJ.bones.push(F$tJ)}if(0<(F$aJ=F$K.getUint16()))for(F$EJ.uvs=[],F$V=0;F$V<F$aJ;F$V++)F$EJ.uvs.push(F$K.getFloat32());if(0<(F$qJ=F$K.getUint16()))for(F$EJ.weights=[],F$V=0;F$V<F$qJ;F$V++)F$EJ.weights.push(F$K.getFloat32());if(0<(F$rJ=F$K.getUint16()))for(F$EJ.triangles=[],F$V=0;F$V<F$rJ;F$V++)F$EJ.triangles.push(F$K.getUint16());if(0<(F$DJ=F$K.getUint16()))for(F$EJ.vertices=[],F$V=0;F$V<F$DJ;F$V++)F$EJ.vertices.push(F$K.getFloat32());if(0<(F$_J=F$K.getUint16()))for(F$EJ.lengths=[],F$V=0;F$V<F$_J;F$V++)F$EJ.lengths.push(F$K.getFloat32())}F$oJ.slotArr.push(F$sJ)}this.skinDic[F$oJ.name]=F$oJ,this.skinDataArray.push(F$oJ)}1==F$K.getUint8()?(this.yReverseMatrix=new F$QJ(1,0,0,-1,0,0),F$_&&F$_.setTempMatrix(this.yReverseMatrix)):F$_&&F$_.setTempMatrix(new F$QJ),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},F$J.getTexture=function(F$J){var F$y=this.subTextureDic[F$J];return F$y||(F$y=this.subTextureDic[F$J.substr(0,F$J.length-1)]),null==F$y?this._mainTexture:F$y},F$J.showSkinByIndex=function(F$J,F$y,F$T){if(void 0===F$T&&(F$T=!0),F$y<0&&F$y>=this.skinDataArray.length)return!1;var F$V,F$Z,F$m=0,F$R=0,F$n=this.skinDataArray[F$y];if(F$n){for(F$m=0,F$R=F$n.slotArr.length;F$m<F$R;F$m++)(F$Z=F$n.slotArr[F$m])&&(F$V=F$J[F$Z.name])&&(F$V.showSlotData(F$Z,F$T),F$T&&"undefined"!=F$V.attachmentName&&"null"!=F$V.attachmentName?F$V.showDisplayByName(F$V.attachmentName):F$V.showDisplayByIndex(F$V.displayIndex));return!0}return!1},F$J.getSkinIndexByName=function(F$J){for(var F$y=0,F$T=this.skinDataArray.length;F$y<F$T;F$y++)if(this.skinDataArray[F$y].name==F$J)return F$y;return-1},F$J.getGrahicsDataWithCache=function(F$J,F$y){return this._graphicsCache[F$J][F$y]},F$J.setGrahicsDataWithCache=function(F$J,F$y,F$T){this._graphicsCache[F$J][F$y]=F$T},F$J.destroy=function(){var F$J;for(var F$y in this._isDestroyed=!0,this.subTextureDic)(F$J=this.subTextureDic[F$y])&&F$J.destroy();for(F$y in this._textureDic)(F$J=this._textureDic[F$y])&&F$J.destroy();for(var F$T=0,F$V=this.skinSlotDisplayDataArr.length;F$T<F$V;F$T++)this.skinSlotDisplayDataArr[F$T].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete F$Z.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},F$J.getAniNameByIndex=function(F$J){var F$y=this.getAnimation(F$J);return F$y?F$y.name:null},F$m(0,F$J,"rate",function(){return this._rate},function(F$J){this._rate=F$J}),F$Z.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",F$Z.TEMPLET_DICTIONARY=null,F$Z}(F$x)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$J,F$y){"use strict";for(var F$T in Object.defineProperty(F$y,"__esModule",{value:!0}),Laya){var F$V=Laya[F$T];F$V&&F$V.__isclass&&(F$y[F$T]=F$V)}});