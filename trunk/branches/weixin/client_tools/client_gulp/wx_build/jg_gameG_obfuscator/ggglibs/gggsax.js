var m=wx.$g;function ggqe(){}function gp5bf_(r,u,l,a,n){function fdt3o4(e){var t=e.slice(1,-1);return t in l?l[t]:"#"===t.charAt(0)?65535<(t=parseInt(t.substr(1).replace("x","0x")))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t):(n.error("entity not found:"+e),e)}function wvq7ye(e){var t;i<e&&(t=r.substring(i,e).replace(/&#?\w+;/g,fdt3o4),s&&i1hxk(i),a.characters(t,0,e-i),i=e)}function i1hxk(e,t){for(;f<=e&&(t=h.exec(r));)d=t.index,f=d+t[0].length,s.lineNumber++;s.columnNumber=e-d+1}for(var d=0,f=0,h=/.*(?:\r\n?|\n)|.*$/g,s=a.locator,m=[{currentNSMap:u}],p={},i=0;;){try{var e=r.indexOf("<",i);var w,b;if(e<0)return void(r.substr(i).match(/^\s*$/)||(b=(w=a.doc).createTextNode(r.substr(i)),w.appendChild(b),a.currentElement=b));switch(i<e&&wvq7ye(e),r.charAt(e+1)){case"/":var t=r.indexOf(">",e+3),c=r.substring(e+2,t),g=m.pop();t<0?(c=r.substring(e+2).replace(/[\s<].*/,""),n.error("end tag name: "+c+" is not complete:"+g.tagName),t=e+1+c.length):c.match(/\s</)&&(c=c.replace(/[\s<].*/,""),n.error("end tag name: "+c+" maybe not complete"),t=e+1+c.length);var x=g.localNSMap,v=g.tagName==c;if(v||g.tagName&&g.tagName.toLowerCase()==c.toLowerCase()){if(a.endElement(g.uri,g.localName,c),x)for(var k in x)a.endPrefixMapping(k);v||n.fatalError("end tag name: "+c+" is not match the current start tagName:"+g.tagName)}else m.push(g);t++;break;case"?":s&&i1hxk(e),t=gb5xpi(r,e,a);break;case"!":s&&i1hxk(e),t=gujr6$m(r,e,a,n);break;default:s&&i1hxk(e);var o=new gz4do3,N=m[m.length-1].currentNSMap,t=g_pb5f0(r,e,o,N,fdt3o4,n),$=o.length;if(!o.closed&&gs7cq(r,t,o.tagName,p)&&(o.closed=!0,l.nbsp||n.warning("unclosed xml attribute")),s&&$){for(var _=gsc8l9(s,{}),q=0;q<$;q++){var F=o[q];i1hxk(F.offset),F.locator=gsc8l9(s,{})}a.locator=_,gc8sgq7(o,a,N)&&m.push(o),a.locator=s}else gc8sgq7(o,a,N)&&m.push(o);"http://www.w3.org/1999/xhtml"!==o.uri||o.closed?t++:t=gh1kaxw(r,t,o.tagName,fdt3o4,a)}}catch(e){n.error("element parse error: "+e),t=-1}i<t?i=t:wvq7ye(Math.max(e,i)+1)}}function gsc8l9(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function g_pb5f0(e,t,r,u,a,n){for(var s,i=++t,c=g_ip50;;){var g=e.charAt(i);switch(g){case"=":if(c===ghkw1e)s=e.slice(t,i),c=gz2r6;else{if(c!==glsc9g)throw new Error("attribute equal must after attrName");c=gz2r6}break;case"'":case'"':if(c===gz2r6||c===ghkw1e){if(c===ghkw1e&&(n.warning('attribute value must after "="'),s=e.slice(t,i)),!(0<(i=e.indexOf(g,t=i+1))))throw new Error("attribute value no end '"+g+"' match");o=e.slice(t,i).replace(/&#?\w+;/g,a),r.add(s,o,t-1),c=gey1khw}else{if(c!=g_ft0bp)throw new Error('attribute value must after "="');o=e.slice(t,i).replace(/&#?\w+;/g,a),r.add(s,o,t),n.warning('attribute "'+s+'" missed start quot('+g+")!!"),t=i+1,c=gey1khw}break;case"/":switch(c){case g_ip50:r.setTagName(e.slice(t,i));case gey1khw:case go6zd2:case gip05b:c=gip05b,r.closed=!0;case g_ft0bp:case ghkw1e:case glsc9g:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return n.error("unexpected end of input"),c==g_ip50&&r.setTagName(e.slice(t,i)),i;case">":switch(c){case g_ip50:r.setTagName(e.slice(t,i));case gey1khw:case go6zd2:case gip05b:break;case g_ft0bp:case ghkw1e:"/"===(o=e.slice(t,i)).slice(-1)&&(r.closed=!0,o=o.slice(0,-1));case glsc9g:c===glsc9g&&(o=s),c==g_ft0bp?(n.warning('attribute "'+o+'" missed quot(")!!'),r.add(s,o.replace(/&#?\w+;/g,a),t)):("http://www.w3.org/1999/xhtml"===u[""]&&o.match(/^(?:disabled|checked|selected)$/i)||n.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),r.add(o,o,t));break;case gz2r6:throw new Error("attribute value missed!!")}return i;case"\x80":g=" ";default:if(g<=" ")switch(c){case g_ip50:r.setTagName(e.slice(t,i)),c=go6zd2;break;case ghkw1e:s=e.slice(t,i),c=glsc9g;break;case g_ft0bp:var o=e.slice(t,i).replace(/&#?\w+;/g,a);n.warning('attribute "'+o+'" missed quot(")!!'),r.add(s,o,t);case gey1khw:c=go6zd2}else switch(c){case glsc9g:r.tagName,"http://www.w3.org/1999/xhtml"===u[""]&&s.match(/^(?:disabled|checked|selected)$/i)||n.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),r.add(s,s,t),t=i,c=ghkw1e;break;case gey1khw:n.warning('attribute space is required"'+s+'"!!');case go6zd2:c=ghkw1e,t=i;break;case gz2r6:c=g_ft0bp,t=i;break;case gip05b:throw new Error("elements closed character '/' and '>' must be connected to")}}i++}}function gc8sgq7(e,u,t){for(var r=e.tagName,a=null,n=e.length;n--;){var s=e[n],i=s.qName,l=s.value;var c;i=0<(g=i.indexOf(":"))?(o=s.prefix=i.slice(0,g),c=i.slice(g+1),"xmlns"===o&&c):(o=null,"xmlns"===(c=i)&&""),s.localName=c,!1!==i&&(null==a&&(a={},gp5xabi(t,t={})),t[i]=a[i]=l,s.uri="http://www.w3.org/2000/xmlns/",u.startPrefixMapping(i,l))}for(n=e.length;n--;)(o=(s=e[n]).prefix)&&("xml"===o&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==o&&(s.uri=t[o||""]));var g;c=0<(g=r.indexOf(":"))?(o=e.prefix=r.slice(0,g),e.localName=r.slice(g+1)):(o=null,e.localName=r);var d=e.uri=t[o||""];if(u.startElement(d,c,r,e),!e.closed)return e.currentNSMap=t,e.localNSMap=a,!0;if(u.endElement(d,c,r),a)for(var o in a)u.endPrefixMapping(o)}function gh1kaxw(e,t,r,a,n){if(/^(?:script|textarea)$/i.test(r)){var s=e.indexOf("</"+r+">",t),e=e.substring(t+1,s);if(/[&<]/.test(e))return/^script$/i.test(r)||(e=e.replace(/&#?\w+;/g,a)),n.characters(e,0,e.length),s}return t+1}function gs7cq(e,t,r,a){var n=a[r];return null==n&&((n=e.lastIndexOf("</"+r+">"))<t&&(n=e.lastIndexOf("</"+r)),a[r]=n),n<t}function gp5xabi(e,t){for(var r in e)t[r]=e[r]}function gujr6$m(e,t,r,a){var n=e.charAt(t+2);return"-"===n?"-"!==e.charAt(t+3)?-1:t<(s=e.indexOf("--\x3e",t+4))?(r.comment(e,t+4,s-t-4),s+3):(a.error("Unclosed comment"),-1):"CDATA["==e.substr(t+3,6)?(s=e.indexOf("]]>",t+9),r.startCDATA(),r.characters(e,t+9,s-t-9),r.endCDATA(),s+3):1<(a=(n=gbf0tp_(e,t)).length)&&/!doctype/i.test(n[0][0])?(s=n[1][0],e=3<a&&/^public$/i.test(n[2][0])&&n[3][0],t=4<a&&n[4][0],n=n[a-1],r.startDTD(s,e&&e.replace(/^(['"])(.*?)\1$/,"$2"),t&&t.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),n.index+n[0].length):-1;var s}function gb5xpi(e,t,r){var a=e.indexOf("?>",t);return a&&(e=e.substring(t,a).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(e[0].length,r.processingInstruction(e[1],e[2]),a+2):-1}function gz4do3(){}function grm6$uj(e,t){return e.__proto__=t,e}function gbf0tp_(e,t){var r,a=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=t,n.exec(e);r=n.exec(e);)if(a.push(r),r[1])return a}var ggs7qcv=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g$6m=new RegExp("[\\-\\.0-9"+ggs7qcv.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),gj2r6zd=new RegExp("^"+ggs7qcv.source+g$6m.source+"*(?::"+ggs7qcv.source+g$6m.source+"*)?$"),g_ip50=0,ghkw1e=1,glsc9g=2,gz2r6=3,g_ft0bp=4,gey1khw=5,go6zd2=6,gip05b=7;ggqe.prototype={parse:function(e,t,r){var a=this.domBuilder;a.startDocument(),gp5xabi(t,t={}),gp5bf_(e,t,r,a,this.errorHandler),a.endDocument()}},gz4do3.prototype={setTagName:function(e){if(!gj2r6zd.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!gj2r6zd.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},grm6$uj({},grm6$uj.prototype)instanceof grm6$uj||(grm6$uj=function(e,t){function hia1x5(){}for(t in hia1x5.prototype=t,hia1x5=new hia1x5,e)hia1x5[t]=e[t];return hia1x5}),exports.XMLReader=ggqe;