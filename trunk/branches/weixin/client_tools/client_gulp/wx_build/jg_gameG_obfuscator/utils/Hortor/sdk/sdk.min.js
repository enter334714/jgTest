(window || global).regeneratorRuntime = void 0;var e = function (t, n) {
  return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) {
    e.__proto__ = t;
  } || function (e, t) {
    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
  }, e(t, n);
};function t(t, n) {
  function r() {
    this.constructor = t;
  }e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
}var n = function () {
  return n = Object.assign || function (e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) for (var i in t = arguments[n]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);return e;
  }, n.apply(this, arguments);
};function r(e, t, n, r) {
  return new (n || (n = Promise))(function (i, o) {
    function s(e) {
      try {
        c(r.next(e));
      } catch (e) {
        o(e);
      }
    }function a(e) {
      try {
        c(r.throw(e));
      } catch (e) {
        o(e);
      }
    }function c(e) {
      e.done ? i(e.value) : new n(function (t) {
        t(e.value);
      }).then(s, a);
    }c((r = r.apply(e, t || [])).next());
  });
}function i(e, t) {
  var n,
      r,
      i,
      o,
      s = { label: 0, sent: function () {
      if (1 & i[0]) throw i[1];return i[1];
    }, trys: [], ops: [] };return o = { next: a(0), throw: a(1), return: a(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () {
    return this;
  }), o;function a(o) {
    return function (a) {
      return function (o) {
        if (n) throw new TypeError("Generator is already executing.");for (; s;) try {
          if (n = 1, r && (i = 2 & o[0] ? r.return : o[0] ? r.throw || ((i = r.return) && i.call(r), 0) : r.next) && !(i = i.call(r, o[1])).done) return i;switch (r = 0, i && (o = [2 & o[0], i.value]), o[0]) {case 0:case 1:
              i = o;break;case 4:
              return s.label++, { value: o[1], done: !1 };case 5:
              s.label++, r = o[1], o = [0];continue;case 7:
              o = s.ops.pop(), s.trys.pop();continue;default:
              if (!(i = s.trys, (i = i.length > 0 && i[i.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                s = 0;continue;
              }if (3 === o[0] && (!i || o[1] > i[0] && o[1] < i[3])) {
                s.label = o[1];break;
              }if (6 === o[0] && s.label < i[1]) {
                s.label = i[1], i = o;break;
              }if (i && s.label < i[2]) {
                s.label = i[2], s.ops.push(o);break;
              }i[2] && s.ops.pop(), s.trys.pop();continue;}o = t.call(e, s);
        } catch (e) {
          o = [6, e], r = 0;
        } finally {
          n = i = 0;
        }if (5 & o[0]) throw o[1];return { value: o[0] ? o[1] : void 0, done: !0 };
      }([o, a]);
    };
  }
}function o() {
  for (var e = 0, t = 0, n = arguments.length; t < n; t++) e += arguments[t].length;var r = Array(e),
      i = 0;for (t = 0; t < n; t++) for (var o = arguments[t], s = 0, a = o.length; s < a; s++, i++) r[i] = o[s];return r;
}var s = function (e) {
  return "[HortorSDK] " + e;
};function a(e) {
  for (var t = [], n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];console.log.apply(console, o([s(e)], t));
}function c(e) {
  for (var t = [], n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];console.info.apply(console, o([s(e)], t));
}function u(e) {
  for (var t = [], n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];console.warn.apply(console, o([s(e)], t));
}var h = "4.3.0",
    d = "wx",
    f = "new_promise",
    l = "6/7/2022, 4:18:19 PM";var p = "object" == typeof window.tt && "object" == typeof window.wx && window.tt === window.wx ? (u("当前为头条环境, 但是使用的是微信sdk, 请使用头条sdk"), "tt") : "object" == typeof window.wx ? "wx" : "debug",
    g = { errCode: 500, errMsg: "未知错误" },
    v = { errCode: 1e3, errMsg: "网络错误" };function m(e) {
  var t = this;this.data = e, this._stopped = !1, this.stopPropagation = function () {
    t._stopped = !0;
  }, this.isStopped = function () {
    return t._stopped;
  };
}var _,
    y,
    w,
    I = {},
    T = { _on: function (e, t, n, r) {
    if (void 0 === n && (n = 0), void 0 === r && (r = !1), t) {
      var i = I[e] || [];i.push({ priority: n, listener: t, once: r }), I[e] = i.sort(function (e, t) {
        return e.priority < t.priority ? 1 : e.priority > t.priority ? -1 : 0;
      });
    }
  }, once: function (e, t, n) {
    void 0 === n && (n = 0), this._on(e, t, n, !0);
  }, on: function (e, t, n) {
    void 0 === n && (n = 0), this._on(e, t, n, !1);
  }, off: function (e, t) {
    var n = I[e];n && (n = n.filter(function (e) {
      return e.listener !== t;
    }), I[e] = n);
  }, dispatch: function (e, t) {
    this._dispatch(e, t);
  }, _dispatch: function (e, t) {
    var n = I[e];if (n && !(n.length <= 0)) for (var r = new m(t), i = 0; i < n.length; i++) {
      var o = n[i];try {
        o.listener(r);
      } catch (t) {
        u("EventBus invoke '" + e + "' exception: ", t);
      }if (o.once && this.off(e, o.listener), r.isStopped()) break;
    }
  } },
    S = { _inited: !1, init: function (e) {
    return !!this._checkValid(e) && (this.config = e, this._print(e), T.dispatch("EVT_SDK_READY", this.config), !0);
  }, sdkConfig: function () {
    return this.config || {};
  }, _checkValid: function (e) {
    return this._inited ? (u("already initiated"), !1) : this._checkConfigValid(e) ? (this._inited = !0, !0) : (function (e) {
      for (var t = [], n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];console.error.apply(console, o([s(e)], t));
    }("initiate failed, please check config!"), !1);
  }, _checkConfigValid: function (e) {
    return e.env && e.gameId && e.gameVersion;
  }, _print: function (e) {
    c("/*************************/"), c(" SDK(" + h + ") initiated"), c(" TagTime: " + l), c(" Platform: " + d), c(" ApiType: " + f), c(" Env: " + e.env), c(" GameID: " + e.gameId), c(" GameVersion: " + e.gameVersion), c("/*************************/");
  } };function b(e) {
  return "https://" + e + ".hortorgames.com";
}var E = { host: { prod: "wxmini", test: "wxmini-test", dev: "wxmini-dev" }, server: { prod: "platform", test: "platform-test", dev: "platform-dev" }, log: { prod: "wxmini-log", test: "wxmini-test", dev: "wxmini-dev" } },
    C = { HOST: (_ = {}, _.Prod = b(E.host.prod), _.Test = b(E.host.test), _.Dev = b(E.host.dev), _), HOST_SERVER: (y = {}, y.Prod = b(E.server.prod), y.Test = b(E.server.test), y.Dev = b(E.server.dev), y), HOST_LOG: (w = {}, w.Prod = b(E.log.prod), w.Test = b(E.log.test), w.Dev = b(E.log.dev), w) },
    k = { Dev: "-dev", Test: "-test", Prod: "" },
    O = { getHost: function () {
    var e = S.sdkConfig() && S.sdkConfig().env || "Prod",
        t = C.HOST;return (void 0 === t ? {} : t)[e];
  }, getServerHost: function () {
    var e = S.sdkConfig() && S.sdkConfig().env || "Prod",
        t = C.HOST_SERVER;return (void 0 === t ? {} : t)[e];
  }, getLogHost: function () {
    var e = S.sdkConfig() && S.sdkConfig().env || "Prod",
        t = C.HOST_LOG;return (void 0 === t ? {} : t)[e];
  }, get logHost() {
    var e = S.sdkConfig() && S.sdkConfig().env || "Prod";return "https://platform-stat" + k[e] + ".hortorgames.com";
  } },
    A = window || global || {};A.$__sdk__ || (A.$__sdk__ = {});var x = { platform: A.$__sdk__.platform },
    D = { request: function (e, t, n, o, s, a) {
    return void 0 === a && (a = !0), r(this, void 0, void 0, function () {
      var r, c, h, d, f, l, p;return i(this, function (i) {
        switch (i.label) {case 0:
            r = null, i.label = 1;case 1:
            return i.trys.push([1, 3,, 4]), c = Object.assign({}, s, { "content-type": a ? "application/json" : "application/x-www-form-urlencoded" }), h = this._jointQuery(t, n || {}), [4, x.platform.network.request(e, h, o, c)];case 2:
            return d = i.sent(), f = d.data, l = void 0 === f ? {} : f, this._checkRespValid(d) ? [2, { meta: l.meta, data: l.data }] : (r = l.meta, [3, 4]);case 3:
            return u("request get failed", p = i.sent()), r = p, [3, 4];case 4:
            return [4, this._onFailed(r)];case 5:
            return [2, i.sent()];}
      });
    });
  }, get: function (e, t) {
    return void 0 === t && (t = null), this.request("GET", e, t);
  }, post: function (e, t, n) {
    return void 0 === n && (n = null), this.request("POST", e, n, t, {}, !0);
  }, postForm: function (e, t, n) {
    return void 0 === n && (n = null), this.request("POST", e, n, t, {}, !1);
  }, _onFailed: function (e) {
    var t = e && e.errCode ? e : v;return a("--- net error ---", e, t), Promise.reject(t);
  }, _checkRespValid: function (e) {
    return 200 === e.statusCode && e.data && (!e.data.meta || 0 === e.data.meta.errCode);
  }, _jointQuery: function (e, t) {
    return Object.keys(t).forEach(function (n, r) {
      var i = 0 === r && e.indexOf("?") < 0 ? "?" : "&";e += "" + i + n + "=" + t[n];
    }), e;
  } },
    R = { isFun: function (e) {
    return "function" == typeof e;
  }, isNull: function (e) {
    return null == e;
  }, toNStr: function (e, t) {
    return void 0 === t && (t = ""), "string" == typeof e ? e : this.toStr(e, t);
  }, toStr: function (e, t) {
    if (void 0 === t && (t = ""), this.isNull(e)) return t;try {
      return JSON.stringify(e);
    } catch (e) {
      return t;
    }
  }, toNumber: function (e, t) {
    void 0 === t && (t = 0);try {
      return Number(e) || t;
    } catch (e) {
      return t;
    }
  }, toBoolean: function (e, t) {
    void 0 === t && (t = !1);try {
      return !!JSON.parse(e);
    } catch (n) {
      return !!e || t;
    }
  }, toObject: function (e, t) {
    void 0 === t && (t = void 0);try {
      return JSON.parse(e);
    } catch (e) {
      return t;
    }
  }, isEmpty: function (e) {
    return this.isNull(e) || "" === e;
  }, wait: function (e) {
    return new Promise(function (t) {
      setTimeout(t, e);
    });
  }, toLine: function (e) {
    return e.replace(/([A-Z])/g, "_$1").toLowerCase();
  }, startsWith: function (e, t) {
    return e.slice(0, t.length) === t;
  }, endsWith: function (e, t) {
    return -1 !== e.indexOf(t, e.length - t.length);
  }, generateGuid: function () {
    for (var e = [], t = "0123456789abcdef", n = 0; n < 36; ++n) e[n] = t.substr(Math.floor(16 * Math.random()), 1);return e[14] = "4", e[19] = t.substr(3 & e[19] | 8, 1), e[8] = e[13] = e[18] = e[23] = "-", e.join("");
  } };function P() {
  this.timer = null;
}P.prototype = { setTimer: function (e) {
    this.timer = e;
  }, getTimer: function () {
    return this.timer;
  } };var U = { getTime: function () {
    return Date.now();
  }, getTimeSec: function () {
    return Math.floor(this.getTime() / 1e3);
  }, todayStart: function (e) {
    var t = e ? new Date(e) : new Date();return new Date(t.getFullYear(), t.getMonth(), t.getDate()).getTime();
  }, toMSecond: function (e) {
    return 3600 * e * 1e3;
  }, resetInterval: function (e, t) {
    var n = new P();return n.setTimer(setTimeout(function r() {
      e && !1 !== e() && n.setTimer(setTimeout(r, t));
    }, t)), n;
  }, reclearInterval: function (e) {
    var t = e && e.getTimer ? e.getTimer() : null;t && (clearTimeout(t), e.setTimer(null));
  } },
    L = { geVersion: function (e, t) {
    return this._compareVersion(e, t) >= 0;
  }, ltVersion: function (e, t) {
    return this._compareVersion(e, t) < 0;
  }, _compareVersion: function (e, t) {
    for (var n = e.split("."), r = t.split("."), i = Math.max(n.length, r.length), o = 0; o < i; o++) {
      var s = parseInt(n[o], 10) || 0,
          a = parseInt(r[o], 10) || 0;if (s > a) return 1;if (s < a) return -1;
    }return 0;
  } },
    N = { reset: function (e, t) {
    var n = Object.assign({}, e);return Object.keys(t || {}).forEach(function (r) {
      R.isNull(e[r]) && !R.isNull(t[r]) && (n[r] = t[r]);
    }), n;
  }, copy: function (e, t) {
    if (void 0 === t && (t = []), R.isNull(e)) return {};var n = {};return Object.keys(e).forEach(function (r) {
      t && t.indexOf(r) > -1 || R.isNull(e[r]) || (n[r] = e[r]);
    }), n;
  }, deepCopyTo: function (e, t, n, r, i) {
    var o = this;return void 0 === n && (n = 0), void 0 === r && (r = []), void 0 === i && (i = 0), null === e || "object" != typeof e || !t || 0 !== n && i >= n ? e : (Object.keys(e).forEach(function (s) {
      r && r.indexOf(s) > -1 || (t[s] = o.deepCopyTo(e[s], t[s], n, r, ++i));
    }), t);
  }, queryToJson: function (e) {
    if (R.isEmpty(e)) return {};try {
      var t = {};return decodeURIComponent(e).split("&").forEach(function (e) {
        if (e && e.split) {
          var n = e.split("=");t[n[0]] = n[1];
        }
      }), t;
    } catch (e) {
      return {};
    }
  }, jsonToQuery: function (e, t) {
    if (R.isNull(e)) return "";try {
      var n = [];return Object.keys(e).forEach(function (r) {
        if (!R.isNull(e[r])) {
          var i = t ? encodeURIComponent(e[r]) : e[r];n.push(r + "=" + i);
        }
      }), n.join("&");
    } catch (e) {
      return "";
    }
  }, addToQuery: function (e, t) {
    var n = this.queryToJson(e),
        r = this.reset(n, t);return this.jsonToQuery(r);
  }, defineProperty: function (e, t, n) {
    if (e) {
      var r = "function" == typeof e[t] ? e[t].bind(e) : e[t];Object.defineProperty(e, t, { value: n(r) });
    }
  } },
    V = n(n(n(n(n({}, R), U), L), { pkgError: function (e, t) {
    return { errCode: e && e.errCode || t.errCode, errMsg: e && (e.errMsg || e.message) || t.errMsg };
  } }), N),
    H = { getString: function (e, t) {
    return void 0 === t && (t = ""), this._get(e, function (e) {
      return V.toStr(e, t);
    });
  }, getNumber: function (e, t) {
    return void 0 === t && (t = 0), this._get(e, function (e) {
      return V.toNumber(e, t);
    });
  }, getBoolean: function (e, t) {
    return void 0 === t && (t = !1), this._get(e, function (e) {
      return V.toBoolean(e, t);
    });
  }, get: function (e, t) {
    return void 0 === t && (t = void 0), this._get(e, function (e) {
      return V.toObject(e, t);
    });
  }, set: function (e, t) {
    return this._set(e, t);
  }, remove: function (e) {
    return x.platform.storage.removeStorage(e);
  }, clear: function () {
    return x.platform.storage.clearStorage();
  }, _get: function (e, t) {
    return t(x.platform.storage.getStorage(e));
  }, _set: function (e, t) {
    var n = V.toStr(t);return x.platform.storage.setStorage(e, n);
  } },
    M = {};function q(e, t) {
  var n = M[e] || [];n.push(t), M[e] = n;
}function F(e, t) {
  return r(this, void 0, void 0, function () {
    var n, r, o, s;return i(this, function (i) {
      switch (i.label) {case 0:
          if (!(n = this.getProcessors(e))) return [2, t];r = {}, o = 0, i.label = 1;case 1:
          return o < n.length ? [4, n[o](t)] : [3, 4];case 2:
          s = i.sent(), r = Object.assign(r, s || {}), i.label = 3;case 3:
          return o++, [3, 1];case 4:
          return [2, r];}
    });
  });
}var G = T,
    j = x,
    K = a,
    B = D,
    z = { _logs: [], _delayer: void 0, post: function (e, t) {
    void 0 === t && (t = !1), e && (this._logs.push(e), t ? this._report() : this._delayReport());
  }, _init: function () {
    G.on("EVT_REPORT_LOG", this._onReport.bind(this));
  }, _onReport: function (e) {
    var t = e.data || {},
        n = t.log,
        r = t.immediate;this.post(n, r);
  }, _report: function () {
    var e = this._logs;this._logs = [];var t = j.platform.information,
        n = t.getUserInfo() || {},
        r = n.userId,
        i = n.uniqueId,
        o = t.getConfig(),
        s = o.gameId,
        a = o.gameVersion,
        c = t.getSystemStr(),
        u = t.getLaunchOpts().query;null == e || e.forEach(function (e) {
      e.queryRaw = JSON.stringify(u);
    });var h = { gameId: s, userId: r, uniqueId: i, gameVersion: a, sysInfo: c, logs: e },
        d = function () {
      var e = O.getLogHost() + "/mini/api/v1/log/multi";B.post(e, h).then(function () {
        K("log zcz success", h);
      }).catch(function (e) {
        K("log zcz fail", e);
      });
    };S.sdkConfig() && S.sdkConfig().env ? d() : G.once("EVT_SDK_READY", function () {
      K("sdk ready report"), d();
    });
  }, _delayReport: function () {
    var e = this;if (!this._delayer) {
      var t = (j.platform.information.getConfig() || {}).logReportFrequency,
          n = void 0 === t ? 5e3 : t;this._delayer = setTimeout(function () {
        e._report(), e._delayer = null;
      }, n);
    }
  } };z._init();var W = { post: z.post.bind(z) };function J(e) {
  return void 0 === e && (e = {}), W.post(e.data, e.immediate);
}function Q() {
  return new Promise(function (e, t) {
    wx.getSetting({ withSubscriptions: !0, success: function (t) {
        a("wx setting ", JSON.parse(JSON.stringify(t))), e(t);
      }, fail: function (e) {
        t(e);
      } });
  });
}var Y = { AggrType: { SWITCH: "customSwitch", IP_REGION: "ipregion", SHARE: "share" }, post: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, a, c, u, h, d, f, l, p, g;return i(this, function (i) {
        switch (i.label) {case 0:
            return t = S.sdkConfig(), n = t.gameId, r = t.gameVersion, o = x.platform.information, s = o.getUserInfo() || {}, a = s.uniqueId, c = s.userId, u = s.name, h = o.getSystemStr(), [4, F("PROC_PRE_AGGR", e)];case 1:
            return d = i.sent(), f = Object.keys(d), l = { gameId: n, gameVersion: r, openId: c, uniqueId: a, userId: a, servers: f, nickName: u || "", params: d, sysInfo: h }, p = O.getServerHost() + "/platform-gateway-server/api/v1/aggr", [4, D.post(p, l)];case 2:
            return g = i.sent(), [4, this._renderResult(g.data, d)];case 3:
            return [2, i.sent()];}
      });
    });
  }, _renderResult: function (e, t) {
    return r(this, void 0, void 0, function () {
      var n, r, o;return i(this, function (i) {
        switch (i.label) {case 0:
            return n = e || {}, r = {}, Object.keys(n).forEach(function (e) {
              var t = { data: null, err: null },
                  i = n[e] || {},
                  o = i.data,
                  s = i.meta;s && s.errCode ? t.err = s : t.data = o, r[e] = t;
            }), [4, F("PROC_REQ_AGGR", { req: t, resp: r })];case 1:
            return o = i.sent(), [2, Object.assign(r, o)];}
      });
    });
  } };function X() {
  return Promise.resolve({ type: Y.AggrType });
}function $(e) {
  return Y.post(e);
}var Z = function (e) {
  return S.init(e);
};function ee(e) {
  return Z(e);
}var te = { getExtUserInfo: function () {
    return r(this, void 0, void 0, function () {
      var e, t, n, r, o;return i(this, function (i) {
        switch (i.label) {case 0:
            return e = S.sdkConfig().gameId, t = x.platform.information, n = (t.getUserInfo() || {}).uniqueId, r = { userId: n, gameId: e }, o = O.getServerHost() + "/wechat/user-info", [4, D.get(o, r)];case 1:
            return [2, i.sent().data];}
      });
    });
  }, getUserGsInfo: function () {
    return r(this, void 0, void 0, function () {
      var e, t, n, r, o, s, a, c, u, h, d;return i(this, function (i) {
        switch (i.label) {case 0:
            return e = S.sdkConfig().gameId, t = x.platform.information, n = (t.getUserInfo() || {}).uniqueId, r = { gameId: e, uniqueId: n }, o = O.getServerHost() + "/customer/api/v1/gs/new/info", [4, D.get(o, r)];case 1:
            return s = i.sent(), a = s.data && s.data.conf || {}, c = a.iconShowTp, u = "game" == c, h = a.forceAlert || !1, d = a.wxSendConf || {}, this.gsInfoConfig = a, console.log("[SDK GS INFO]", s), [2, { isShowGsUserByGame: u, forceAlert: h, conf: a, customerServiceParams: d }];}
      });
    });
  }, reportUserGsLog: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, a, c, u, h, d;return i(this, function (i) {
        switch (i.label) {case 0:
            return t = S.sdkConfig().gameId, n = x.platform.information, r = (n.getUserInfo() || {}).uniqueId, o = O.getServerHost() + "/customer/api/v1/gs/new/log", s = this.gsInfoConfig || {}, a = s.confTp, c = s.forceAlert, u = s.iconShowTp, h = e.eventTp || "", d = { gameId: t, iconShowTp: u, uniqueId: r, confTp: a, forceAlert: c, eventTp: { ICON_SHOW: 0, ICON_CLICK: 1, PAGE_SHOW_FORCE: 3, PAGE_SHOW: 3, JUMP_CUSTOMER_FORCE: 4, JUMP_CUSTOMER: 4 }[h], isUserClick: "PAGE_SHOW" === h || "JUMP_CUSTOMER" === h }, [4, D.post(o, d)];case 1:
            return i.sent(), [2];}
      });
    });
  } };function ne() {
  return te.getExtUserInfo();
}function re() {
  return te.getUserGsInfo();
}function ie(e) {
  te.reportUserGsLog(e);
}var oe = { init: function () {
    q("PROC_PRE_AGGR", this._processAggr.bind(this));
  }, checkIps: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, a, c, u, h;return i(this, function (i) {
        switch (i.label) {case 0:
            return t = e.interfaceIds, n = e.userId, r = S.sdkConfig(), o = r.gameId, s = r.gameVersion, a = x.platform.information, c = (a.getUserInfo() || {}).uniqueId, u = { gameId: o, gameVersion: s, interfaceIds: t || [], userId: n || c }, h = O.getServerHost() + "/ipregion/api/v1/blockstatus/multi", [4, D.post(h, u)];case 1:
            return [2, i.sent().data];}
      });
    });
  }, _processAggr: function (e) {
    if (!e || !e.ipregion) return null;var t = (x.platform.information.getUserInfo() || {}).uniqueId,
        n = Object.assign({}, e.ipregion);return e.ipregion.userId || (n = Object.assign(n, { userId: t || "" })), { ipregion: n };
  } };function se(e) {
  return oe.checkIps(e);
}oe.init();var ae = { Text: 1, Image: 2, Scroll: 4 },
    ce = ae.Text | ae.Image,
    ue = { NoticeTypes: ae, getNotice: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r;return i(this, function (i) {
        switch (i.label) {case 0:
            return t = S.sdkConfig().gameId, n = Object.assign({}, { gameId: t, tp: ce }, e || {}), r = O.getServerHost() + "/capi/v1/notice", [4, D.get(r, n)];case 1:
            return [2, i.sent().data];}
      });
    });
  } };function he(e) {
  return void 0 === e && (e = {}), ue.getNotice(e);
}var de = { ERROR: "error", WARN: "warn", DEBUG: "debug" },
    fe = { LOG_TP: de, init: function () {
    var e = this;T.on("EVT_LOGIN_FAIL", function (t) {
      e.postLog(de.ERROR, t.data);
    }), T.on("EVT_ON_ERROR", function (t) {
      e.postLog(de.ERROR, t.data);
    });
  }, postLog: function (e, t, n) {
    t && "object" == typeof t && !n && (n = t, t = "");var r = n || {},
        i = r.msg,
        o = r.errMsg,
        s = r.message,
        c = r.logTp,
        u = t || i || s || o;a(e + ": " + u, n);var h = x.platform.information,
        d = h.getUserInfo() || {},
        f = d.userId,
        l = d.uniqueId,
        p = h.getConfig(),
        g = p.gameId,
        v = p.gameVersion,
        m = h.getSystemStr(),
        _ = Object.assign({ msg: u, logTp: c, gameId: g, gameVersion: v, userId: f, uniqueId: l, sysInfo: m, hortorMsg: u, hortorLogTp: e }, n || {}),
        y = O.logHost + "/wxlog/api/v1/log";D.post(y, _).then(function () {
      a("log remote success");
    }).catch(function (e) {
      a("log remote fail", e);
    });
  } };function le(e) {
  void 0 === e && (e = {}), fe.postLog(fe.LOG_TP.DEBUG, e.msg, e.data);
}function pe(e) {
  void 0 === e && (e = {}), fe.postLog(fe.LOG_TP.WARN, e.msg, e.data);
}function ge(e) {
  void 0 === e && (e = {}), fe.postLog(fe.LOG_TP.ERROR, e.msg, e.data);
}fe.init();var ve = { init: function () {
    q("PROC_PRE_AGGR", this._processAggr.bind(this)), q("PROC_REQ_AGGR", this._processAggrReq.bind(this));
  }, _renderSwitches: function (e) {
    var t = [];return e.map(function (e) {
      if (e) {
        var n = "string" == typeof e ? e : e.switchId;t.some(function (e) {
          return e.switchId === n;
        }) || t.push({ switchId: n });
      }
    }), t;
  }, _renderParams: function (e) {
    var t = {};if (e) for (var n in e) {
      var r = e[n];void 0 !== r && "nickName" !== n && (t[n] = r);
    }return t;
  }, _getRequestData: function (e, t) {
    var n = (t || {}).nickName,
        r = x.platform.information,
        i = r && r.getUserInfo() || {},
        o = i.userId,
        s = i.uniqueId,
        a = i.name,
        c = i.channel,
        u = r && r.getLaunchOpts() || {},
        h = u.scene,
        d = u.custom.channel,
        f = S.sdkConfig();return { gameId: f.gameId, gameVersion: f.gameVersion, nickName: n || a || "", uniqueId: s, channel: c, openId: o, scene: h, currentChannel: d, defCustomParams: this._renderParams(t), switches: this._renderSwitches(e) };
  }, _transformResult: function (e, t) {
    var n = (e || {}).rlt,
        r = void 0 === n ? [] : n,
        i = {};return t.map(function (e, t) {
      i[e.switchId] = !!r[t];
    }), a("switch result", i), i;
  }, _processAggr: function (e) {
    if (!e || !e.customSwitch) return null;var t = e.customSwitch,
        n = t.switches,
        r = t.params;return { customSwitch: this._getRequestData(n, r) };
  }, _processAggrReq: function (e) {
    if (!(e && e.resp && e.req && e.req.customSwitch && e.resp.customSwitch)) return null;var t = e.req.customSwitch.switches,
        n = e.resp.customSwitch.data;return { customSwitch: { data: this._transformResult(n, t) } };
  }, check: function (e, t) {
    return r(this, void 0, void 0, function () {
      var n, r, o;return i(this, function (i) {
        switch (i.label) {case 0:
            return n = O.getServerHost() + "/custom-switch/api/v1/switch/multi/status", r = this._getRequestData(e, t), [4, D.post(n, r)];case 1:
            return o = i.sent(), [2, this._transformResult(o.data, r.switches)];}
      });
    });
  } };function me(e) {
  return ve.check(e.switches, e.params);
}function _e(e) {
  return parseInt(e) === e;
}function ye(e) {
  if (!_e(e.length)) return !1;for (var t = 0; t < e.length; t++) if (!_e(e[t]) || e[t] < 0 || e[t] > 255) return !1;return !0;
}function we(e, t) {
  if (e.buffer && ArrayBuffer.isView(e) && "Uint8Array" === e.name) return t && (e = e.slice ? e.slice() : Array.prototype.slice.call(e)), e;if (Array.isArray(e)) {
    if (!ye(e)) throw new Error("Array contains invalid value: " + e);return new Uint8Array(e);
  }if (_e(e.length) && ye(e)) return new Uint8Array(e);throw new Error("unsupported array-like object");
}function Ie(e) {
  return new Uint8Array(e);
}function Te(e, t, n, r, i) {
  null == r && null == i || (e = e.slice ? e.slice(r, i) : Array.prototype.slice.call(e, r, i)), t.set(e, n);
}ve.init();var Se,
    be = { toBytes: function (e) {
    var t = [],
        n = 0;for (e = encodeURI(e); n < e.length;) {
      var r = e.charCodeAt(n++);37 === r ? (t.push(parseInt(e.substr(n, 2), 16)), n += 2) : t.push(r);
    }return we(t);
  }, fromBytes: function (e) {
    for (var t = [], n = 0; n < e.length;) {
      var r = e[n];r < 128 ? (t.push(String.fromCharCode(r)), n++) : r > 191 && r < 224 ? (t.push(String.fromCharCode((31 & r) << 6 | 63 & e[n + 1])), n += 2) : (t.push(String.fromCharCode((15 & r) << 12 | (63 & e[n + 1]) << 6 | 63 & e[n + 2])), n += 3);
    }return t.join("");
  } },
    Ee = (Se = "0123456789abcdef", { toBytes: function (e) {
    for (var t = [], n = 0; n < e.length; n += 2) t.push(parseInt(e.substr(n, 2), 16));return t;
  }, fromBytes: function (e) {
    for (var t = [], n = 0; n < e.length; n++) {
      var r = e[n];t.push(Se[(240 & r) >> 4] + Se[15 & r]);
    }return t.join("");
  } }),
    Ce = { 16: 10, 24: 12, 32: 14 },
    ke = [1, 2, 4, 8, 16, 32, 64, 128, 27, 54, 108, 216, 171, 77, 154, 47, 94, 188, 99, 198, 151, 53, 106, 212, 179, 125, 250, 239, 197, 145],
    Oe = [99, 124, 119, 123, 242, 107, 111, 197, 48, 1, 103, 43, 254, 215, 171, 118, 202, 130, 201, 125, 250, 89, 71, 240, 173, 212, 162, 175, 156, 164, 114, 192, 183, 253, 147, 38, 54, 63, 247, 204, 52, 165, 229, 241, 113, 216, 49, 21, 4, 199, 35, 195, 24, 150, 5, 154, 7, 18, 128, 226, 235, 39, 178, 117, 9, 131, 44, 26, 27, 110, 90, 160, 82, 59, 214, 179, 41, 227, 47, 132, 83, 209, 0, 237, 32, 252, 177, 91, 106, 203, 190, 57, 74, 76, 88, 207, 208, 239, 170, 251, 67, 77, 51, 133, 69, 249, 2, 127, 80, 60, 159, 168, 81, 163, 64, 143, 146, 157, 56, 245, 188, 182, 218, 33, 16, 255, 243, 210, 205, 12, 19, 236, 95, 151, 68, 23, 196, 167, 126, 61, 100, 93, 25, 115, 96, 129, 79, 220, 34, 42, 144, 136, 70, 238, 184, 20, 222, 94, 11, 219, 224, 50, 58, 10, 73, 6, 36, 92, 194, 211, 172, 98, 145, 149, 228, 121, 231, 200, 55, 109, 141, 213, 78, 169, 108, 86, 244, 234, 101, 122, 174, 8, 186, 120, 37, 46, 28, 166, 180, 198, 232, 221, 116, 31, 75, 189, 139, 138, 112, 62, 181, 102, 72, 3, 246, 14, 97, 53, 87, 185, 134, 193, 29, 158, 225, 248, 152, 17, 105, 217, 142, 148, 155, 30, 135, 233, 206, 85, 40, 223, 140, 161, 137, 13, 191, 230, 66, 104, 65, 153, 45, 15, 176, 84, 187, 22],
    Ae = [82, 9, 106, 213, 48, 54, 165, 56, 191, 64, 163, 158, 129, 243, 215, 251, 124, 227, 57, 130, 155, 47, 255, 135, 52, 142, 67, 68, 196, 222, 233, 203, 84, 123, 148, 50, 166, 194, 35, 61, 238, 76, 149, 11, 66, 250, 195, 78, 8, 46, 161, 102, 40, 217, 36, 178, 118, 91, 162, 73, 109, 139, 209, 37, 114, 248, 246, 100, 134, 104, 152, 22, 212, 164, 92, 204, 93, 101, 182, 146, 108, 112, 72, 80, 253, 237, 185, 218, 94, 21, 70, 87, 167, 141, 157, 132, 144, 216, 171, 0, 140, 188, 211, 10, 247, 228, 88, 5, 184, 179, 69, 6, 208, 44, 30, 143, 202, 63, 15, 2, 193, 175, 189, 3, 1, 19, 138, 107, 58, 145, 17, 65, 79, 103, 220, 234, 151, 242, 207, 206, 240, 180, 230, 115, 150, 172, 116, 34, 231, 173, 53, 133, 226, 249, 55, 232, 28, 117, 223, 110, 71, 241, 26, 113, 29, 41, 197, 137, 111, 183, 98, 14, 170, 24, 190, 27, 252, 86, 62, 75, 198, 210, 121, 32, 154, 219, 192, 254, 120, 205, 90, 244, 31, 221, 168, 51, 136, 7, 199, 49, 177, 18, 16, 89, 39, 128, 236, 95, 96, 81, 127, 169, 25, 181, 74, 13, 45, 229, 122, 159, 147, 201, 156, 239, 160, 224, 59, 77, 174, 42, 245, 176, 200, 235, 187, 60, 131, 83, 153, 97, 23, 43, 4, 126, 186, 119, 214, 38, 225, 105, 20, 99, 85, 33, 12, 125],
    xe = [3328402341, 4168907908, 4000806809, 4135287693, 4294111757, 3597364157, 3731845041, 2445657428, 1613770832, 33620227, 3462883241, 1445669757, 3892248089, 3050821474, 1303096294, 3967186586, 2412431941, 528646813, 2311702848, 4202528135, 4026202645, 2992200171, 2387036105, 4226871307, 1101901292, 3017069671, 1604494077, 1169141738, 597466303, 1403299063, 3832705686, 2613100635, 1974974402, 3791519004, 1033081774, 1277568618, 1815492186, 2118074177, 4126668546, 2211236943, 1748251740, 1369810420, 3521504564, 4193382664, 3799085459, 2883115123, 1647391059, 706024767, 134480908, 2512897874, 1176707941, 2646852446, 806885416, 932615841, 168101135, 798661301, 235341577, 605164086, 461406363, 3756188221, 3454790438, 1311188841, 2142417613, 3933566367, 302582043, 495158174, 1479289972, 874125870, 907746093, 3698224818, 3025820398, 1537253627, 2756858614, 1983593293, 3084310113, 2108928974, 1378429307, 3722699582, 1580150641, 327451799, 2790478837, 3117535592, 0, 3253595436, 1075847264, 3825007647, 2041688520, 3059440621, 3563743934, 2378943302, 1740553945, 1916352843, 2487896798, 2555137236, 2958579944, 2244988746, 3151024235, 3320835882, 1336584933, 3992714006, 2252555205, 2588757463, 1714631509, 293963156, 2319795663, 3925473552, 67240454, 4269768577, 2689618160, 2017213508, 631218106, 1269344483, 2723238387, 1571005438, 2151694528, 93294474, 1066570413, 563977660, 1882732616, 4059428100, 1673313503, 2008463041, 2950355573, 1109467491, 537923632, 3858759450, 4260623118, 3218264685, 2177748300, 403442708, 638784309, 3287084079, 3193921505, 899127202, 2286175436, 773265209, 2479146071, 1437050866, 4236148354, 2050833735, 3362022572, 3126681063, 840505643, 3866325909, 3227541664, 427917720, 2655997905, 2749160575, 1143087718, 1412049534, 999329963, 193497219, 2353415882, 3354324521, 1807268051, 672404540, 2816401017, 3160301282, 369822493, 2916866934, 3688947771, 1681011286, 1949973070, 336202270, 2454276571, 201721354, 1210328172, 3093060836, 2680341085, 3184776046, 1135389935, 3294782118, 965841320, 831886756, 3554993207, 4068047243, 3588745010, 2345191491, 1849112409, 3664604599, 26054028, 2983581028, 2622377682, 1235855840, 3630984372, 2891339514, 4092916743, 3488279077, 3395642799, 4101667470, 1202630377, 268961816, 1874508501, 4034427016, 1243948399, 1546530418, 941366308, 1470539505, 1941222599, 2546386513, 3421038627, 2715671932, 3899946140, 1042226977, 2521517021, 1639824860, 227249030, 260737669, 3765465232, 2084453954, 1907733956, 3429263018, 2420656344, 100860677, 4160157185, 470683154, 3261161891, 1781871967, 2924959737, 1773779408, 394692241, 2579611992, 974986535, 664706745, 3655459128, 3958962195, 731420851, 571543859, 3530123707, 2849626480, 126783113, 865375399, 765172662, 1008606754, 361203602, 3387549984, 2278477385, 2857719295, 1344809080, 2782912378, 59542671, 1503764984, 160008576, 437062935, 1707065306, 3622233649, 2218934982, 3496503480, 2185314755, 697932208, 1512910199, 504303377, 2075177163, 2824099068, 1841019862, 739644986],
    De = [2781242211, 2230877308, 2582542199, 2381740923, 234877682, 3184946027, 2984144751, 1418839493, 1348481072, 50462977, 2848876391, 2102799147, 434634494, 1656084439, 3863849899, 2599188086, 1167051466, 2636087938, 1082771913, 2281340285, 368048890, 3954334041, 3381544775, 201060592, 3963727277, 1739838676, 4250903202, 3930435503, 3206782108, 4149453988, 2531553906, 1536934080, 3262494647, 484572669, 2923271059, 1783375398, 1517041206, 1098792767, 49674231, 1334037708, 1550332980, 4098991525, 886171109, 150598129, 2481090929, 1940642008, 1398944049, 1059722517, 201851908, 1385547719, 1699095331, 1587397571, 674240536, 2704774806, 252314885, 3039795866, 151914247, 908333586, 2602270848, 1038082786, 651029483, 1766729511, 3447698098, 2682942837, 454166793, 2652734339, 1951935532, 775166490, 758520603, 3000790638, 4004797018, 4217086112, 4137964114, 1299594043, 1639438038, 3464344499, 2068982057, 1054729187, 1901997871, 2534638724, 4121318227, 1757008337, 0, 750906861, 1614815264, 535035132, 3363418545, 3988151131, 3201591914, 1183697867, 3647454910, 1265776953, 3734260298, 3566750796, 3903871064, 1250283471, 1807470800, 717615087, 3847203498, 384695291, 3313910595, 3617213773, 1432761139, 2484176261, 3481945413, 283769337, 100925954, 2180939647, 4037038160, 1148730428, 3123027871, 3813386408, 4087501137, 4267549603, 3229630528, 2315620239, 2906624658, 3156319645, 1215313976, 82966005, 3747855548, 3245848246, 1974459098, 1665278241, 807407632, 451280895, 251524083, 1841287890, 1283575245, 337120268, 891687699, 801369324, 3787349855, 2721421207, 3431482436, 959321879, 1469301956, 4065699751, 2197585534, 1199193405, 2898814052, 3887750493, 724703513, 2514908019, 2696962144, 2551808385, 3516813135, 2141445340, 1715741218, 2119445034, 2872807568, 2198571144, 3398190662, 700968686, 3547052216, 1009259540, 2041044702, 3803995742, 487983883, 1991105499, 1004265696, 1449407026, 1316239930, 504629770, 3683797321, 168560134, 1816667172, 3837287516, 1570751170, 1857934291, 4014189740, 2797888098, 2822345105, 2754712981, 936633572, 2347923833, 852879335, 1133234376, 1500395319, 3084545389, 2348912013, 1689376213, 3533459022, 3762923945, 3034082412, 4205598294, 133428468, 634383082, 2949277029, 2398386810, 3913789102, 403703816, 3580869306, 2297460856, 1867130149, 1918643758, 607656988, 4049053350, 3346248884, 1368901318, 600565992, 2090982877, 2632479860, 557719327, 3717614411, 3697393085, 2249034635, 2232388234, 2430627952, 1115438654, 3295786421, 2865522278, 3633334344, 84280067, 33027830, 303828494, 2747425121, 1600795957, 4188952407, 3496589753, 2434238086, 1486471617, 658119965, 3106381470, 953803233, 334231800, 3005978776, 857870609, 3151128937, 1890179545, 2298973838, 2805175444, 3056442267, 574365214, 2450884487, 550103529, 1233637070, 4289353045, 2018519080, 2057691103, 2399374476, 4166623649, 2148108681, 387583245, 3664101311, 836232934, 3330556482, 3100665960, 3280093505, 2955516313, 2002398509, 287182607, 3413881008, 4238890068, 3597515707, 975967766],
    Re = [1671808611, 2089089148, 2006576759, 2072901243, 4061003762, 1807603307, 1873927791, 3310653893, 810573872, 16974337, 1739181671, 729634347, 4263110654, 3613570519, 2883997099, 1989864566, 3393556426, 2191335298, 3376449993, 2106063485, 4195741690, 1508618841, 1204391495, 4027317232, 2917941677, 3563566036, 2734514082, 2951366063, 2629772188, 2767672228, 1922491506, 3227229120, 3082974647, 4246528509, 2477669779, 644500518, 911895606, 1061256767, 4144166391, 3427763148, 878471220, 2784252325, 3845444069, 4043897329, 1905517169, 3631459288, 827548209, 356461077, 67897348, 3344078279, 593839651, 3277757891, 405286936, 2527147926, 84871685, 2595565466, 118033927, 305538066, 2157648768, 3795705826, 3945188843, 661212711, 2999812018, 1973414517, 152769033, 2208177539, 745822252, 439235610, 455947803, 1857215598, 1525593178, 2700827552, 1391895634, 994932283, 3596728278, 3016654259, 695947817, 3812548067, 795958831, 2224493444, 1408607827, 3513301457, 0, 3979133421, 543178784, 4229948412, 2982705585, 1542305371, 1790891114, 3410398667, 3201918910, 961245753, 1256100938, 1289001036, 1491644504, 3477767631, 3496721360, 4012557807, 2867154858, 4212583931, 1137018435, 1305975373, 861234739, 2241073541, 1171229253, 4178635257, 33948674, 2139225727, 1357946960, 1011120188, 2679776671, 2833468328, 1374921297, 2751356323, 1086357568, 2408187279, 2460827538, 2646352285, 944271416, 4110742005, 3168756668, 3066132406, 3665145818, 560153121, 271589392, 4279952895, 4077846003, 3530407890, 3444343245, 202643468, 322250259, 3962553324, 1608629855, 2543990167, 1154254916, 389623319, 3294073796, 2817676711, 2122513534, 1028094525, 1689045092, 1575467613, 422261273, 1939203699, 1621147744, 2174228865, 1339137615, 3699352540, 577127458, 712922154, 2427141008, 2290289544, 1187679302, 3995715566, 3100863416, 339486740, 3732514782, 1591917662, 186455563, 3681988059, 3762019296, 844522546, 978220090, 169743370, 1239126601, 101321734, 611076132, 1558493276, 3260915650, 3547250131, 2901361580, 1655096418, 2443721105, 2510565781, 3828863972, 2039214713, 3878868455, 3359869896, 928607799, 1840765549, 2374762893, 3580146133, 1322425422, 2850048425, 1823791212, 1459268694, 4094161908, 3928346602, 1706019429, 2056189050, 2934523822, 135794696, 3134549946, 2022240376, 628050469, 779246638, 472135708, 2800834470, 3032970164, 3327236038, 3894660072, 3715932637, 1956440180, 522272287, 1272813131, 3185336765, 2340818315, 2323976074, 1888542832, 1044544574, 3049550261, 1722469478, 1222152264, 50660867, 4127324150, 236067854, 1638122081, 895445557, 1475980887, 3117443513, 2257655686, 3243809217, 489110045, 2662934430, 3778599393, 4162055160, 2561878936, 288563729, 1773916777, 3648039385, 2391345038, 2493985684, 2612407707, 505560094, 2274497927, 3911240169, 3460925390, 1442818645, 678973480, 3749357023, 2358182796, 2717407649, 2306869641, 219617805, 3218761151, 3862026214, 1120306242, 1756942440, 1103331905, 2578459033, 762796589, 252780047, 2966125488, 1425844308, 3151392187, 372911126],
    Pe = [1667474886, 2088535288, 2004326894, 2071694838, 4075949567, 1802223062, 1869591006, 3318043793, 808472672, 16843522, 1734846926, 724270422, 4278065639, 3621216949, 2880169549, 1987484396, 3402253711, 2189597983, 3385409673, 2105378810, 4210693615, 1499065266, 1195886990, 4042263547, 2913856577, 3570689971, 2728590687, 2947541573, 2627518243, 2762274643, 1920112356, 3233831835, 3082273397, 4261223649, 2475929149, 640051788, 909531756, 1061110142, 4160160501, 3435941763, 875846760, 2779116625, 3857003729, 4059105529, 1903268834, 3638064043, 825316194, 353713962, 67374088, 3351728789, 589522246, 3284360861, 404236336, 2526454071, 84217610, 2593830191, 117901582, 303183396, 2155911963, 3806477791, 3958056653, 656894286, 2998062463, 1970642922, 151591698, 2206440989, 741110872, 437923380, 454765878, 1852748508, 1515908788, 2694904667, 1381168804, 993742198, 3604373943, 3014905469, 690584402, 3823320797, 791638366, 2223281939, 1398011302, 3520161977, 0, 3991743681, 538992704, 4244381667, 2981218425, 1532751286, 1785380564, 3419096717, 3200178535, 960056178, 1246420628, 1280103576, 1482221744, 3486468741, 3503319995, 4025428677, 2863326543, 4227536621, 1128514950, 1296947098, 859002214, 2240123921, 1162203018, 4193849577, 33687044, 2139062782, 1347481760, 1010582648, 2678045221, 2829640523, 1364325282, 2745433693, 1077985408, 2408548869, 2459086143, 2644360225, 943212656, 4126475505, 3166494563, 3065430391, 3671750063, 555836226, 269496352, 4294908645, 4092792573, 3537006015, 3452783745, 202118168, 320025894, 3974901699, 1600119230, 2543297077, 1145359496, 387397934, 3301201811, 2812801621, 2122220284, 1027426170, 1684319432, 1566435258, 421079858, 1936954854, 1616945344, 2172753945, 1330631070, 3705438115, 572679748, 707427924, 2425400123, 2290647819, 1179044492, 4008585671, 3099120491, 336870440, 3739122087, 1583276732, 185277718, 3688593069, 3772791771, 842159716, 976899700, 168435220, 1229577106, 101059084, 606366792, 1549591736, 3267517855, 3553849021, 2897014595, 1650632388, 2442242105, 2509612081, 3840161747, 2038008818, 3890688725, 3368567691, 926374254, 1835907034, 2374863873, 3587531953, 1313788572, 2846482505, 1819063512, 1448540844, 4109633523, 3941213647, 1701162954, 2054852340, 2930698567, 134748176, 3132806511, 2021165296, 623210314, 774795868, 471606328, 2795958615, 3031746419, 3334885783, 3907527627, 3722280097, 1953799400, 522133822, 1263263126, 3183336545, 2341176845, 2324333839, 1886425312, 1044267644, 3048588401, 1718004428, 1212733584, 50529542, 4143317495, 235803164, 1633788866, 892690282, 1465383342, 3115962473, 2256965911, 3250673817, 488449850, 2661202215, 3789633753, 4177007595, 2560144171, 286339874, 1768537042, 3654906025, 2391705863, 2492770099, 2610673197, 505291324, 2273808917, 3924369609, 3469625735, 1431699370, 673740880, 3755965093, 2358021891, 2711746649, 2307489801, 218961690, 3217021541, 3873845719, 1111672452, 1751693520, 1094828930, 2576986153, 757954394, 252645662, 2964376443, 1414855848, 3149649517, 370555436],
    Ue = [1374988112, 2118214995, 437757123, 975658646, 1001089995, 530400753, 2902087851, 1273168787, 540080725, 2910219766, 2295101073, 4110568485, 1340463100, 3307916247, 641025152, 3043140495, 3736164937, 632953703, 1172967064, 1576976609, 3274667266, 2169303058, 2370213795, 1809054150, 59727847, 361929877, 3211623147, 2505202138, 3569255213, 1484005843, 1239443753, 2395588676, 1975683434, 4102977912, 2572697195, 666464733, 3202437046, 4035489047, 3374361702, 2110667444, 1675577880, 3843699074, 2538681184, 1649639237, 2976151520, 3144396420, 4269907996, 4178062228, 1883793496, 2403728665, 2497604743, 1383856311, 2876494627, 1917518562, 3810496343, 1716890410, 3001755655, 800440835, 2261089178, 3543599269, 807962610, 599762354, 33778362, 3977675356, 2328828971, 2809771154, 4077384432, 1315562145, 1708848333, 101039829, 3509871135, 3299278474, 875451293, 2733856160, 92987698, 2767645557, 193195065, 1080094634, 1584504582, 3178106961, 1042385657, 2531067453, 3711829422, 1306967366, 2438237621, 1908694277, 67556463, 1615861247, 429456164, 3602770327, 2302690252, 1742315127, 2968011453, 126454664, 3877198648, 2043211483, 2709260871, 2084704233, 4169408201, 0, 159417987, 841739592, 504459436, 1817866830, 4245618683, 260388950, 1034867998, 908933415, 168810852, 1750902305, 2606453969, 607530554, 202008497, 2472011535, 3035535058, 463180190, 2160117071, 1641816226, 1517767529, 470948374, 3801332234, 3231722213, 1008918595, 303765277, 235474187, 4069246893, 766945465, 337553864, 1475418501, 2943682380, 4003061179, 2743034109, 4144047775, 1551037884, 1147550661, 1543208500, 2336434550, 3408119516, 3069049960, 3102011747, 3610369226, 1113818384, 328671808, 2227573024, 2236228733, 3535486456, 2935566865, 3341394285, 496906059, 3702665459, 226906860, 2009195472, 733156972, 2842737049, 294930682, 1206477858, 2835123396, 2700099354, 1451044056, 573804783, 2269728455, 3644379585, 2362090238, 2564033334, 2801107407, 2776292904, 3669462566, 1068351396, 742039012, 1350078989, 1784663195, 1417561698, 4136440770, 2430122216, 775550814, 2193862645, 2673705150, 1775276924, 1876241833, 3475313331, 3366754619, 270040487, 3902563182, 3678124923, 3441850377, 1851332852, 3969562369, 2203032232, 3868552805, 2868897406, 566021896, 4011190502, 3135740889, 1248802510, 3936291284, 699432150, 832877231, 708780849, 3332740144, 899835584, 1951317047, 4236429990, 3767586992, 866637845, 4043610186, 1106041591, 2144161806, 395441711, 1984812685, 1139781709, 3433712980, 3835036895, 2664543715, 1282050075, 3240894392, 1181045119, 2640243204, 25965917, 4203181171, 4211818798, 3009879386, 2463879762, 3910161971, 1842759443, 2597806476, 933301370, 1509430414, 3943906441, 3467192302, 3076639029, 3776767469, 2051518780, 2631065433, 1441952575, 404016761, 1942435775, 1408749034, 1610459739, 3745345300, 2017778566, 3400528769, 3110650942, 941896748, 3265478751, 371049330, 3168937228, 675039627, 4279080257, 967311729, 135050206, 3635733660, 1683407248, 2076935265, 3576870512, 1215061108, 3501741890],
    Le = [1347548327, 1400783205, 3273267108, 2520393566, 3409685355, 4045380933, 2880240216, 2471224067, 1428173050, 4138563181, 2441661558, 636813900, 4233094615, 3620022987, 2149987652, 2411029155, 1239331162, 1730525723, 2554718734, 3781033664, 46346101, 310463728, 2743944855, 3328955385, 3875770207, 2501218972, 3955191162, 3667219033, 768917123, 3545789473, 692707433, 1150208456, 1786102409, 2029293177, 1805211710, 3710368113, 3065962831, 401639597, 1724457132, 3028143674, 409198410, 2196052529, 1620529459, 1164071807, 3769721975, 2226875310, 486441376, 2499348523, 1483753576, 428819965, 2274680428, 3075636216, 598438867, 3799141122, 1474502543, 711349675, 129166120, 53458370, 2592523643, 2782082824, 4063242375, 2988687269, 3120694122, 1559041666, 730517276, 2460449204, 4042459122, 2706270690, 3446004468, 3573941694, 533804130, 2328143614, 2637442643, 2695033685, 839224033, 1973745387, 957055980, 2856345839, 106852767, 1371368976, 4181598602, 1033297158, 2933734917, 1179510461, 3046200461, 91341917, 1862534868, 4284502037, 605657339, 2547432937, 3431546947, 2003294622, 3182487618, 2282195339, 954669403, 3682191598, 1201765386, 3917234703, 3388507166, 0, 2198438022, 1211247597, 2887651696, 1315723890, 4227665663, 1443857720, 507358933, 657861945, 1678381017, 560487590, 3516619604, 975451694, 2970356327, 261314535, 3535072918, 2652609425, 1333838021, 2724322336, 1767536459, 370938394, 182621114, 3854606378, 1128014560, 487725847, 185469197, 2918353863, 3106780840, 3356761769, 2237133081, 1286567175, 3152976349, 4255350624, 2683765030, 3160175349, 3309594171, 878443390, 1988838185, 3704300486, 1756818940, 1673061617, 3403100636, 272786309, 1075025698, 545572369, 2105887268, 4174560061, 296679730, 1841768865, 1260232239, 4091327024, 3960309330, 3497509347, 1814803222, 2578018489, 4195456072, 575138148, 3299409036, 446754879, 3629546796, 4011996048, 3347532110, 3252238545, 4270639778, 915985419, 3483825537, 681933534, 651868046, 2755636671, 3828103837, 223377554, 2607439820, 1649704518, 3270937875, 3901806776, 1580087799, 4118987695, 3198115200, 2087309459, 2842678573, 3016697106, 1003007129, 2802849917, 1860738147, 2077965243, 164439672, 4100872472, 32283319, 2827177882, 1709610350, 2125135846, 136428751, 3874428392, 3652904859, 3460984630, 3572145929, 3593056380, 2939266226, 824852259, 818324884, 3224740454, 930369212, 2801566410, 2967507152, 355706840, 1257309336, 4148292826, 243256656, 790073846, 2373340630, 1296297904, 1422699085, 3756299780, 3818836405, 457992840, 3099667487, 2135319889, 77422314, 1560382517, 1945798516, 788204353, 1521706781, 1385356242, 870912086, 325965383, 2358957921, 2050466060, 2388260884, 2313884476, 4006521127, 901210569, 3990953189, 1014646705, 1503449823, 1062597235, 2031621326, 3212035895, 3931371469, 1533017514, 350174575, 2256028891, 2177544179, 1052338372, 741876788, 1606591296, 1914052035, 213705253, 2334669897, 1107234197, 1899603969, 3725069491, 2631447780, 2422494913, 1635502980, 1893020342, 1950903388, 1120974935],
    Ne = [2807058932, 1699970625, 2764249623, 1586903591, 1808481195, 1173430173, 1487645946, 59984867, 4199882800, 1844882806, 1989249228, 1277555970, 3623636965, 3419915562, 1149249077, 2744104290, 1514790577, 459744698, 244860394, 3235995134, 1963115311, 4027744588, 2544078150, 4190530515, 1608975247, 2627016082, 2062270317, 1507497298, 2200818878, 567498868, 1764313568, 3359936201, 2305455554, 2037970062, 1047239e3, 1910319033, 1337376481, 2904027272, 2892417312, 984907214, 1243112415, 830661914, 861968209, 2135253587, 2011214180, 2927934315, 2686254721, 731183368, 1750626376, 4246310725, 1820824798, 4172763771, 3542330227, 48394827, 2404901663, 2871682645, 671593195, 3254988725, 2073724613, 145085239, 2280796200, 2779915199, 1790575107, 2187128086, 472615631, 3029510009, 4075877127, 3802222185, 4107101658, 3201631749, 1646252340, 4270507174, 1402811438, 1436590835, 3778151818, 3950355702, 3963161475, 4020912224, 2667994737, 273792366, 2331590177, 104699613, 95345982, 3175501286, 2377486676, 1560637892, 3564045318, 369057872, 4213447064, 3919042237, 1137477952, 2658625497, 1119727848, 2340947849, 1530455833, 4007360968, 172466556, 266959938, 516552836, 0, 2256734592, 3980931627, 1890328081, 1917742170, 4294704398, 945164165, 3575528878, 958871085, 3647212047, 2787207260, 1423022939, 775562294, 1739656202, 3876557655, 2530391278, 2443058075, 3310321856, 547512796, 1265195639, 437656594, 3121275539, 719700128, 3762502690, 387781147, 218828297, 3350065803, 2830708150, 2848461854, 428169201, 122466165, 3720081049, 1627235199, 648017665, 4122762354, 1002783846, 2117360635, 695634755, 3336358691, 4234721005, 4049844452, 3704280881, 2232435299, 574624663, 287343814, 612205898, 1039717051, 840019705, 2708326185, 793451934, 821288114, 1391201670, 3822090177, 376187827, 3113855344, 1224348052, 1679968233, 2361698556, 1058709744, 752375421, 2431590963, 1321699145, 3519142200, 2734591178, 188127444, 2177869557, 3727205754, 2384911031, 3215212461, 2648976442, 2450346104, 3432737375, 1180849278, 331544205, 3102249176, 4150144569, 2952102595, 2159976285, 2474404304, 766078933, 313773861, 2570832044, 2108100632, 1668212892, 3145456443, 2013908262, 418672217, 3070356634, 2594734927, 1852171925, 3867060991, 3473416636, 3907448597, 2614737639, 919489135, 164948639, 2094410160, 2997825956, 590424639, 2486224549, 1723872674, 3157750862, 3399941250, 3501252752, 3625268135, 2555048196, 3673637356, 1343127501, 4130281361, 3599595085, 2957853679, 1297403050, 81781910, 3051593425, 2283490410, 532201772, 1367295589, 3926170974, 895287692, 1953757831, 1093597963, 492483431, 3528626907, 1446242576, 1192455638, 1636604631, 209336225, 344873464, 1015671571, 669961897, 3375740769, 3857572124, 2973530695, 3747192018, 1933530610, 3464042516, 935293895, 3454686199, 2858115069, 1863638845, 3683022916, 4085369519, 3292445032, 875313188, 1080017571, 3279033885, 621591778, 1233856572, 2504130317, 24197544, 3017672716, 3835484340, 3247465558, 2220981195, 3060847922, 1551124588, 1463996600],
    Ve = [4104605777, 1097159550, 396673818, 660510266, 2875968315, 2638606623, 4200115116, 3808662347, 821712160, 1986918061, 3430322568, 38544885, 3856137295, 718002117, 893681702, 1654886325, 2975484382, 3122358053, 3926825029, 4274053469, 796197571, 1290801793, 1184342925, 3556361835, 2405426947, 2459735317, 1836772287, 1381620373, 3196267988, 1948373848, 3764988233, 3385345166, 3263785589, 2390325492, 1480485785, 3111247143, 3780097726, 2293045232, 548169417, 3459953789, 3746175075, 439452389, 1362321559, 1400849762, 1685577905, 1806599355, 2174754046, 137073913, 1214797936, 1174215055, 3731654548, 2079897426, 1943217067, 1258480242, 529487843, 1437280870, 3945269170, 3049390895, 3313212038, 923313619, 679998e3, 3215307299, 57326082, 377642221, 3474729866, 2041877159, 133361907, 1776460110, 3673476453, 96392454, 878845905, 2801699524, 777231668, 4082475170, 2330014213, 4142626212, 2213296395, 1626319424, 1906247262, 1846563261, 562755902, 3708173718, 1040559837, 3871163981, 1418573201, 3294430577, 114585348, 1343618912, 2566595609, 3186202582, 1078185097, 3651041127, 3896688048, 2307622919, 425408743, 3371096953, 2081048481, 1108339068, 2216610296, 0, 2156299017, 736970802, 292596766, 1517440620, 251657213, 2235061775, 2933202493, 758720310, 265905162, 1554391400, 1532285339, 908999204, 174567692, 1474760595, 4002861748, 2610011675, 3234156416, 3693126241, 2001430874, 303699484, 2478443234, 2687165888, 585122620, 454499602, 151849742, 2345119218, 3064510765, 514443284, 4044981591, 1963412655, 2581445614, 2137062819, 19308535, 1928707164, 1715193156, 4219352155, 1126790795, 600235211, 3992742070, 3841024952, 836553431, 1669664834, 2535604243, 3323011204, 1243905413, 3141400786, 4180808110, 698445255, 2653899549, 2989552604, 2253581325, 3252932727, 3004591147, 1891211689, 2487810577, 3915653703, 4237083816, 4030667424, 2100090966, 865136418, 1229899655, 953270745, 3399679628, 3557504664, 4118925222, 2061379749, 3079546586, 2915017791, 983426092, 2022837584, 1607244650, 2118541908, 2366882550, 3635996816, 972512814, 3283088770, 1568718495, 3499326569, 3576539503, 621982671, 2895723464, 410887952, 2623762152, 1002142683, 645401037, 1494807662, 2595684844, 1335535747, 2507040230, 4293295786, 3167684641, 367585007, 3885750714, 1865862730, 2668221674, 2960971305, 2763173681, 1059270954, 2777952454, 2724642869, 1320957812, 2194319100, 2429595872, 2815956275, 77089521, 3973773121, 3444575871, 2448830231, 1305906550, 4021308739, 2857194700, 2516901860, 3518358430, 1787304780, 740276417, 1699839814, 1592394909, 2352307457, 2272556026, 188821243, 1729977011, 3687994002, 274084841, 3594982253, 3613494426, 2701949495, 4162096729, 322734571, 2837966542, 1640576439, 484830689, 1202797690, 3537852828, 4067639125, 349075736, 3342319475, 4157467219, 4255800159, 1030690015, 1155237496, 2951971274, 1757691577, 607398968, 2738905026, 499347990, 3794078908, 1011452712, 227885567, 2818666809, 213114376, 3034881240, 1455525988, 3414450555, 850817237, 1817998408, 3092726480],
    He = [0, 235474187, 470948374, 303765277, 941896748, 908933415, 607530554, 708780849, 1883793496, 2118214995, 1817866830, 1649639237, 1215061108, 1181045119, 1417561698, 1517767529, 3767586992, 4003061179, 4236429990, 4069246893, 3635733660, 3602770327, 3299278474, 3400528769, 2430122216, 2664543715, 2362090238, 2193862645, 2835123396, 2801107407, 3035535058, 3135740889, 3678124923, 3576870512, 3341394285, 3374361702, 3810496343, 3977675356, 4279080257, 4043610186, 2876494627, 2776292904, 3076639029, 3110650942, 2472011535, 2640243204, 2403728665, 2169303058, 1001089995, 899835584, 666464733, 699432150, 59727847, 226906860, 530400753, 294930682, 1273168787, 1172967064, 1475418501, 1509430414, 1942435775, 2110667444, 1876241833, 1641816226, 2910219766, 2743034109, 2976151520, 3211623147, 2505202138, 2606453969, 2302690252, 2269728455, 3711829422, 3543599269, 3240894392, 3475313331, 3843699074, 3943906441, 4178062228, 4144047775, 1306967366, 1139781709, 1374988112, 1610459739, 1975683434, 2076935265, 1775276924, 1742315127, 1034867998, 866637845, 566021896, 800440835, 92987698, 193195065, 429456164, 395441711, 1984812685, 2017778566, 1784663195, 1683407248, 1315562145, 1080094634, 1383856311, 1551037884, 101039829, 135050206, 437757123, 337553864, 1042385657, 807962610, 573804783, 742039012, 2531067453, 2564033334, 2328828971, 2227573024, 2935566865, 2700099354, 3001755655, 3168937228, 3868552805, 3902563182, 4203181171, 4102977912, 3736164937, 3501741890, 3265478751, 3433712980, 1106041591, 1340463100, 1576976609, 1408749034, 2043211483, 2009195472, 1708848333, 1809054150, 832877231, 1068351396, 766945465, 599762354, 159417987, 126454664, 361929877, 463180190, 2709260871, 2943682380, 3178106961, 3009879386, 2572697195, 2538681184, 2236228733, 2336434550, 3509871135, 3745345300, 3441850377, 3274667266, 3910161971, 3877198648, 4110568485, 4211818798, 2597806476, 2497604743, 2261089178, 2295101073, 2733856160, 2902087851, 3202437046, 2968011453, 3936291284, 3835036895, 4136440770, 4169408201, 3535486456, 3702665459, 3467192302, 3231722213, 2051518780, 1951317047, 1716890410, 1750902305, 1113818384, 1282050075, 1584504582, 1350078989, 168810852, 67556463, 371049330, 404016761, 841739592, 1008918595, 775550814, 540080725, 3969562369, 3801332234, 4035489047, 4269907996, 3569255213, 3669462566, 3366754619, 3332740144, 2631065433, 2463879762, 2160117071, 2395588676, 2767645557, 2868897406, 3102011747, 3069049960, 202008497, 33778362, 270040487, 504459436, 875451293, 975658646, 675039627, 641025152, 2084704233, 1917518562, 1615861247, 1851332852, 1147550661, 1248802510, 1484005843, 1451044056, 933301370, 967311729, 733156972, 632953703, 260388950, 25965917, 328671808, 496906059, 1206477858, 1239443753, 1543208500, 1441952575, 2144161806, 1908694277, 1675577880, 1842759443, 3610369226, 3644379585, 3408119516, 3307916247, 4011190502, 3776767469, 4077384432, 4245618683, 2809771154, 2842737049, 3144396420, 3043140495, 2673705150, 2438237621, 2203032232, 2370213795],
    Me = [0, 185469197, 370938394, 487725847, 741876788, 657861945, 975451694, 824852259, 1483753576, 1400783205, 1315723890, 1164071807, 1950903388, 2135319889, 1649704518, 1767536459, 2967507152, 3152976349, 2801566410, 2918353863, 2631447780, 2547432937, 2328143614, 2177544179, 3901806776, 3818836405, 4270639778, 4118987695, 3299409036, 3483825537, 3535072918, 3652904859, 2077965243, 1893020342, 1841768865, 1724457132, 1474502543, 1559041666, 1107234197, 1257309336, 598438867, 681933534, 901210569, 1052338372, 261314535, 77422314, 428819965, 310463728, 3409685355, 3224740454, 3710368113, 3593056380, 3875770207, 3960309330, 4045380933, 4195456072, 2471224067, 2554718734, 2237133081, 2388260884, 3212035895, 3028143674, 2842678573, 2724322336, 4138563181, 4255350624, 3769721975, 3955191162, 3667219033, 3516619604, 3431546947, 3347532110, 2933734917, 2782082824, 3099667487, 3016697106, 2196052529, 2313884476, 2499348523, 2683765030, 1179510461, 1296297904, 1347548327, 1533017514, 1786102409, 1635502980, 2087309459, 2003294622, 507358933, 355706840, 136428751, 53458370, 839224033, 957055980, 605657339, 790073846, 2373340630, 2256028891, 2607439820, 2422494913, 2706270690, 2856345839, 3075636216, 3160175349, 3573941694, 3725069491, 3273267108, 3356761769, 4181598602, 4063242375, 4011996048, 3828103837, 1033297158, 915985419, 730517276, 545572369, 296679730, 446754879, 129166120, 213705253, 1709610350, 1860738147, 1945798516, 2029293177, 1239331162, 1120974935, 1606591296, 1422699085, 4148292826, 4233094615, 3781033664, 3931371469, 3682191598, 3497509347, 3446004468, 3328955385, 2939266226, 2755636671, 3106780840, 2988687269, 2198438022, 2282195339, 2501218972, 2652609425, 1201765386, 1286567175, 1371368976, 1521706781, 1805211710, 1620529459, 2105887268, 1988838185, 533804130, 350174575, 164439672, 46346101, 870912086, 954669403, 636813900, 788204353, 2358957921, 2274680428, 2592523643, 2441661558, 2695033685, 2880240216, 3065962831, 3182487618, 3572145929, 3756299780, 3270937875, 3388507166, 4174560061, 4091327024, 4006521127, 3854606378, 1014646705, 930369212, 711349675, 560487590, 272786309, 457992840, 106852767, 223377554, 1678381017, 1862534868, 1914052035, 2031621326, 1211247597, 1128014560, 1580087799, 1428173050, 32283319, 182621114, 401639597, 486441376, 768917123, 651868046, 1003007129, 818324884, 1503449823, 1385356242, 1333838021, 1150208456, 1973745387, 2125135846, 1673061617, 1756818940, 2970356327, 3120694122, 2802849917, 2887651696, 2637442643, 2520393566, 2334669897, 2149987652, 3917234703, 3799141122, 4284502037, 4100872472, 3309594171, 3460984630, 3545789473, 3629546796, 2050466060, 1899603969, 1814803222, 1730525723, 1443857720, 1560382517, 1075025698, 1260232239, 575138148, 692707433, 878443390, 1062597235, 243256656, 91341917, 409198410, 325965383, 3403100636, 3252238545, 3704300486, 3620022987, 3874428392, 3990953189, 4042459122, 4227665663, 2460449204, 2578018489, 2226875310, 2411029155, 3198115200, 3046200461, 2827177882, 2743944855],
    qe = [0, 218828297, 437656594, 387781147, 875313188, 958871085, 775562294, 590424639, 1750626376, 1699970625, 1917742170, 2135253587, 1551124588, 1367295589, 1180849278, 1265195639, 3501252752, 3720081049, 3399941250, 3350065803, 3835484340, 3919042237, 4270507174, 4085369519, 3102249176, 3051593425, 2734591178, 2952102595, 2361698556, 2177869557, 2530391278, 2614737639, 3145456443, 3060847922, 2708326185, 2892417312, 2404901663, 2187128086, 2504130317, 2555048196, 3542330227, 3727205754, 3375740769, 3292445032, 3876557655, 3926170974, 4246310725, 4027744588, 1808481195, 1723872674, 1910319033, 2094410160, 1608975247, 1391201670, 1173430173, 1224348052, 59984867, 244860394, 428169201, 344873464, 935293895, 984907214, 766078933, 547512796, 1844882806, 1627235199, 2011214180, 2062270317, 1507497298, 1423022939, 1137477952, 1321699145, 95345982, 145085239, 532201772, 313773861, 830661914, 1015671571, 731183368, 648017665, 3175501286, 2957853679, 2807058932, 2858115069, 2305455554, 2220981195, 2474404304, 2658625497, 3575528878, 3625268135, 3473416636, 3254988725, 3778151818, 3963161475, 4213447064, 4130281361, 3599595085, 3683022916, 3432737375, 3247465558, 3802222185, 4020912224, 4172763771, 4122762354, 3201631749, 3017672716, 2764249623, 2848461854, 2331590177, 2280796200, 2431590963, 2648976442, 104699613, 188127444, 472615631, 287343814, 840019705, 1058709744, 671593195, 621591778, 1852171925, 1668212892, 1953757831, 2037970062, 1514790577, 1463996600, 1080017571, 1297403050, 3673637356, 3623636965, 3235995134, 3454686199, 4007360968, 3822090177, 4107101658, 4190530515, 2997825956, 3215212461, 2830708150, 2779915199, 2256734592, 2340947849, 2627016082, 2443058075, 172466556, 122466165, 273792366, 492483431, 1047239e3, 861968209, 612205898, 695634755, 1646252340, 1863638845, 2013908262, 1963115311, 1446242576, 1530455833, 1277555970, 1093597963, 1636604631, 1820824798, 2073724613, 1989249228, 1436590835, 1487645946, 1337376481, 1119727848, 164948639, 81781910, 331544205, 516552836, 1039717051, 821288114, 669961897, 719700128, 2973530695, 3157750862, 2871682645, 2787207260, 2232435299, 2283490410, 2667994737, 2450346104, 3647212047, 3564045318, 3279033885, 3464042516, 3980931627, 3762502690, 4150144569, 4199882800, 3070356634, 3121275539, 2904027272, 2686254721, 2200818878, 2384911031, 2570832044, 2486224549, 3747192018, 3528626907, 3310321856, 3359936201, 3950355702, 3867060991, 4049844452, 4234721005, 1739656202, 1790575107, 2108100632, 1890328081, 1402811438, 1586903591, 1233856572, 1149249077, 266959938, 48394827, 369057872, 418672217, 1002783846, 919489135, 567498868, 752375421, 209336225, 24197544, 376187827, 459744698, 945164165, 895287692, 574624663, 793451934, 1679968233, 1764313568, 2117360635, 1933530610, 1343127501, 1560637892, 1243112415, 1192455638, 3704280881, 3519142200, 3336358691, 3419915562, 3907448597, 3857572124, 4075877127, 4294704398, 3029510009, 3113855344, 2927934315, 2744104290, 2159976285, 2377486676, 2594734927, 2544078150],
    Fe = [0, 151849742, 303699484, 454499602, 607398968, 758720310, 908999204, 1059270954, 1214797936, 1097159550, 1517440620, 1400849762, 1817998408, 1699839814, 2118541908, 2001430874, 2429595872, 2581445614, 2194319100, 2345119218, 3034881240, 3186202582, 2801699524, 2951971274, 3635996816, 3518358430, 3399679628, 3283088770, 4237083816, 4118925222, 4002861748, 3885750714, 1002142683, 850817237, 698445255, 548169417, 529487843, 377642221, 227885567, 77089521, 1943217067, 2061379749, 1640576439, 1757691577, 1474760595, 1592394909, 1174215055, 1290801793, 2875968315, 2724642869, 3111247143, 2960971305, 2405426947, 2253581325, 2638606623, 2487810577, 3808662347, 3926825029, 4044981591, 4162096729, 3342319475, 3459953789, 3576539503, 3693126241, 1986918061, 2137062819, 1685577905, 1836772287, 1381620373, 1532285339, 1078185097, 1229899655, 1040559837, 923313619, 740276417, 621982671, 439452389, 322734571, 137073913, 19308535, 3871163981, 4021308739, 4104605777, 4255800159, 3263785589, 3414450555, 3499326569, 3651041127, 2933202493, 2815956275, 3167684641, 3049390895, 2330014213, 2213296395, 2566595609, 2448830231, 1305906550, 1155237496, 1607244650, 1455525988, 1776460110, 1626319424, 2079897426, 1928707164, 96392454, 213114376, 396673818, 514443284, 562755902, 679998e3, 865136418, 983426092, 3708173718, 3557504664, 3474729866, 3323011204, 4180808110, 4030667424, 3945269170, 3794078908, 2507040230, 2623762152, 2272556026, 2390325492, 2975484382, 3092726480, 2738905026, 2857194700, 3973773121, 3856137295, 4274053469, 4157467219, 3371096953, 3252932727, 3673476453, 3556361835, 2763173681, 2915017791, 3064510765, 3215307299, 2156299017, 2307622919, 2459735317, 2610011675, 2081048481, 1963412655, 1846563261, 1729977011, 1480485785, 1362321559, 1243905413, 1126790795, 878845905, 1030690015, 645401037, 796197571, 274084841, 425408743, 38544885, 188821243, 3613494426, 3731654548, 3313212038, 3430322568, 4082475170, 4200115116, 3780097726, 3896688048, 2668221674, 2516901860, 2366882550, 2216610296, 3141400786, 2989552604, 2837966542, 2687165888, 1202797690, 1320957812, 1437280870, 1554391400, 1669664834, 1787304780, 1906247262, 2022837584, 265905162, 114585348, 499347990, 349075736, 736970802, 585122620, 972512814, 821712160, 2595684844, 2478443234, 2293045232, 2174754046, 3196267988, 3079546586, 2895723464, 2777952454, 3537852828, 3687994002, 3234156416, 3385345166, 4142626212, 4293295786, 3841024952, 3992742070, 174567692, 57326082, 410887952, 292596766, 777231668, 660510266, 1011452712, 893681702, 1108339068, 1258480242, 1343618912, 1494807662, 1715193156, 1865862730, 1948373848, 2100090966, 2701949495, 2818666809, 3004591147, 3122358053, 2235061775, 2352307457, 2535604243, 2653899549, 3915653703, 3764988233, 4219352155, 4067639125, 3444575871, 3294430577, 3746175075, 3594982253, 836553431, 953270745, 600235211, 718002117, 367585007, 484830689, 133361907, 251657213, 2041877159, 1891211689, 1806599355, 1654886325, 1568718495, 1418573201, 1335535747, 1184342925];function Ge(e) {
  for (var t = [], n = 0; n < e.length; n += 4) t.push(e[n] << 24 | e[n + 1] << 16 | e[n + 2] << 8 | e[n + 3]);return t;
}var je = function (e) {
  if (!(this instanceof je)) throw Error("AES must be instanitated with `new`");Object.defineProperty(this, "key", { value: we(e, !0) }), this._prepare();
};je.prototype._prepare = function () {
  var e = Ce[this.key.length];if (null == e) throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke = [], this._Kd = [];for (var t = 0; t <= e; t++) this._Ke.push([0, 0, 0, 0]), this._Kd.push([0, 0, 0, 0]);var n,
      r = 4 * (e + 1),
      i = this.key.length / 4,
      o = Ge(this.key);for (t = 0; t < i; t++) n = t >> 2, this._Ke[n][t % 4] = o[t], this._Kd[e - n][t % 4] = o[t];for (var tt, s = 0, a = i; a < r;) {
    if (tt = o[i - 1], o[0] ^= Oe[tt >> 16 & 255] << 24 ^ Oe[tt >> 8 & 255] << 16 ^ Oe[255 & tt] << 8 ^ Oe[tt >> 24 & 255] ^ ke[s] << 24, s += 1, 8 != i) for (t = 1; t < i; t++) o[t] ^= o[t - 1];else {
      for (t = 1; t < i / 2; t++) o[t] ^= o[t - 1];tt = o[i / 2 - 1], o[i / 2] ^= Oe[255 & tt] ^ Oe[tt >> 8 & 255] << 8 ^ Oe[tt >> 16 & 255] << 16 ^ Oe[tt >> 24 & 255] << 24;for (t = i / 2 + 1; t < i; t++) o[t] ^= o[t - 1];
    }for (t = 0; t < i && a < r;) c = a >> 2, u = a % 4, this._Ke[c][u] = o[t], this._Kd[e - c][u] = o[t++], a++;
  }for (var c = 1; c < e; c++) for (var u = 0; u < 4; u++) tt = this._Kd[c][u], this._Kd[c][u] = He[tt >> 24 & 255] ^ Me[tt >> 16 & 255] ^ qe[tt >> 8 & 255] ^ Fe[255 & tt];
}, je.prototype.encrypt = function (e) {
  if (16 != e.length) throw new Error("invalid plaintext size (must be 16 bytes)");for (var t = this._Ke.length - 1, n = [0, 0, 0, 0], r = Ge(e), i = 0; i < 4; i++) r[i] ^= this._Ke[0][i];for (var o = 1; o < t; o++) {
    for (i = 0; i < 4; i++) n[i] = xe[r[i] >> 24 & 255] ^ De[r[(i + 1) % 4] >> 16 & 255] ^ Re[r[(i + 2) % 4] >> 8 & 255] ^ Pe[255 & r[(i + 3) % 4]] ^ this._Ke[o][i];r = n.slice();
  }var tt,
      s = Ie(16);for (i = 0; i < 4; i++) tt = this._Ke[t][i], s[4 * i] = 255 & (Oe[r[i] >> 24 & 255] ^ tt >> 24), s[4 * i + 1] = 255 & (Oe[r[(i + 1) % 4] >> 16 & 255] ^ tt >> 16), s[4 * i + 2] = 255 & (Oe[r[(i + 2) % 4] >> 8 & 255] ^ tt >> 8), s[4 * i + 3] = 255 & (Oe[255 & r[(i + 3) % 4]] ^ tt);return s;
}, je.prototype.decrypt = function (e) {
  if (16 != e.length) throw new Error("invalid ciphertext size (must be 16 bytes)");for (var t = this._Kd.length - 1, n = [0, 0, 0, 0], r = Ge(e), i = 0; i < 4; i++) r[i] ^= this._Kd[0][i];for (var o = 1; o < t; o++) {
    for (i = 0; i < 4; i++) n[i] = Ue[r[i] >> 24 & 255] ^ Le[r[(i + 3) % 4] >> 16 & 255] ^ Ne[r[(i + 2) % 4] >> 8 & 255] ^ Ve[255 & r[(i + 1) % 4]] ^ this._Kd[o][i];r = n.slice();
  }var tt,
      s = Ie(16);for (i = 0; i < 4; i++) tt = this._Kd[t][i], s[4 * i] = 255 & (Ae[r[i] >> 24 & 255] ^ tt >> 24), s[4 * i + 1] = 255 & (Ae[r[(i + 3) % 4] >> 16 & 255] ^ tt >> 16), s[4 * i + 2] = 255 & (Ae[r[(i + 2) % 4] >> 8 & 255] ^ tt >> 8), s[4 * i + 3] = 255 & (Ae[255 & r[(i + 1) % 4]] ^ tt);return s;
};var Ke = function (e) {
  if (!(this instanceof Ke)) throw Error("AES must be instanitated with `new`");this.description = "Electronic Code Block", this.name = "ecb", this._aes = new je(e);
};Ke.prototype.encrypt = function (e) {
  if ((e = we(e)).length % 16 != 0) throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for (var t = Ie(e.length), n = Ie(16), r = 0; r < e.length; r += 16) Te(e, n, 0, r, r + 16), Te(n = this._aes.encrypt(n), t, r);return t;
}, Ke.prototype.decrypt = function (e) {
  if ((e = we(e)).length % 16 != 0) throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for (var t = Ie(e.length), n = Ie(16), r = 0; r < e.length; r += 16) Te(e, n, 0, r, r + 16), Te(n = this._aes.decrypt(n), t, r);return t;
};var Be = function (e, t) {
  if (!(this instanceof Be)) throw Error("AES must be instanitated with `new`");if (this.description = "Cipher Block Chaining", this.name = "cbc", t) {
    if (16 != t.length) throw new Error("invalid initialation vector size (must be 16 bytes)");
  } else t = Ie(16);this._lastCipherblock = we(t, !0), this._aes = new je(e);
};Be.prototype.encrypt = function (e) {
  if ((e = we(e)).length % 16 != 0) throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for (var t = Ie(e.length), n = Ie(16), r = 0; r < e.length; r += 16) {
    Te(e, n, 0, r, r + 16);for (var i = 0; i < 16; i++) n[i] ^= this._lastCipherblock[i];this._lastCipherblock = this._aes.encrypt(n), Te(this._lastCipherblock, t, r);
  }return t;
}, Be.prototype.decrypt = function (e) {
  if ((e = we(e)).length % 16 != 0) throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for (var t = Ie(e.length), n = Ie(16), r = 0; r < e.length; r += 16) {
    Te(e, n, 0, r, r + 16), n = this._aes.decrypt(n);for (var i = 0; i < 16; i++) t[r + i] = n[i] ^ this._lastCipherblock[i];Te(e, this._lastCipherblock, 0, r, r + 16);
  }return t;
};var ze = function (e, t, n) {
  if (!(this instanceof ze)) throw Error("AES must be instanitated with `new`");if (this.description = "Cipher Feedback", this.name = "cfb", t) {
    if (16 != t.length) throw new Error("invalid initialation vector size (must be 16 size)");
  } else t = Ie(16);n || (n = 1), this.segmentSize = n, this._shiftRegister = we(t, !0), this._aes = new je(e);
};ze.prototype.encrypt = function (e) {
  if (e.length % this.segmentSize != 0) throw new Error("invalid plaintext size (must be segmentSize bytes)");for (var t, n = we(e, !0), r = 0; r < n.length; r += this.segmentSize) {
    t = this._aes.encrypt(this._shiftRegister);for (var i = 0; i < this.segmentSize; i++) n[r + i] ^= t[i];Te(this._shiftRegister, this._shiftRegister, 0, this.segmentSize), Te(n, this._shiftRegister, 16 - this.segmentSize, r, r + this.segmentSize);
  }return n;
}, ze.prototype.decrypt = function (e) {
  if (e.length % this.segmentSize != 0) throw new Error("invalid ciphertext size (must be segmentSize bytes)");for (var t, n = we(e, !0), r = 0; r < n.length; r += this.segmentSize) {
    t = this._aes.encrypt(this._shiftRegister);for (var i = 0; i < this.segmentSize; i++) n[r + i] ^= t[i];Te(this._shiftRegister, this._shiftRegister, 0, this.segmentSize), Te(e, this._shiftRegister, 16 - this.segmentSize, r, r + this.segmentSize);
  }return n;
};var We = function (e, t) {
  if (!(this instanceof We)) throw Error("AES must be instanitated with `new`");if (this.description = "Output Feedback", this.name = "ofb", t) {
    if (16 != t.length) throw new Error("invalid initialation vector size (must be 16 bytes)");
  } else t = Ie(16);this._lastPrecipher = we(t, !0), this._lastPrecipherIndex = 16, this._aes = new je(e);
};We.prototype.encrypt = function (e) {
  for (var t = we(e, !0), n = 0; n < t.length; n++) 16 === this._lastPrecipherIndex && (this._lastPrecipher = this._aes.encrypt(this._lastPrecipher), this._lastPrecipherIndex = 0), t[n] ^= this._lastPrecipher[this._lastPrecipherIndex++];return t;
}, We.prototype.decrypt = We.prototype.encrypt;var Je = function (e) {
  if (!(this instanceof Je)) throw Error("Counter must be instanitated with `new`");0 === e || e || (e = 1), "number" == typeof e ? (this._counter = Ie(16), this.setValue(e)) : this.setBytes(e);
};Je.prototype.setValue = function (e) {
  if ("number" != typeof e || parseInt(e) != e) throw new Error("invalid counter value (must be an integer)");for (var t = 15; t >= 0; --t) this._counter[t] = e % 256, e >>= 8;
}, Je.prototype.setBytes = function (e) {
  if (16 != (e = we(e, !0)).length) throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter = e;
}, Je.prototype.increment = function () {
  for (var e = 15; e >= 0; e--) {
    if (255 !== this._counter[e]) {
      this._counter[e]++;break;
    }this._counter[e] = 0;
  }
};var Qe = function (e, t) {
  if (!(this instanceof Qe)) throw Error("AES must be instanitated with `new`");this.description = "Counter", this.name = "ctr", t instanceof Je || (t = new Je(t)), this._counter = t, this._remainingCounter = null, this._remainingCounterIndex = 16, this._aes = new je(e);
};Qe.prototype.encrypt = function (e) {
  for (var t = we(e, !0), n = 0; n < t.length; n++) 16 === this._remainingCounterIndex && (this._remainingCounter = this._aes.encrypt(this._counter._counter), this._remainingCounterIndex = 0, this._counter.increment()), t[n] ^= this._remainingCounter[this._remainingCounterIndex++];return t;
}, Qe.prototype.decrypt = Qe.prototype.encrypt;var Ye,
    Xe,
    $e,
    Ze = { AES: je, Counter: Je, ModeOfOperation: { ecb: Ke, cbc: Be, cfb: ze, ofb: We, ctr: Qe }, utils: { hex: Ee, utf8: be }, padding: { pkcs7: { pad: function (e) {
        var t = 16 - (e = we(e, !0)).length % 16,
            n = Ie(e.length + t);Te(e, n);for (var r = e.length; r < n.length; r++) n[r] = t;return n;
      }, strip: function (e) {
        if ((e = we(e, !0)).length < 16) throw new Error("PKCS#7 invalid length");var t = e[e.length - 1];if (t > 16) throw new Error("PKCS#7 padding byte out of range");for (var n = e.length - t, r = 0; r < t; r++) if (e[n + r] !== t) throw new Error("PKCS#7 invalid padding byte");var i = Ie(n);return Te(e, i, 0, 0, n), i;
      } } }, _arrayTest: { coerceArray: we, createArray: Ie, copyArray: Te } };function et(e, t) {
  var n = nt().SDKVersion;return !(!wx[e] || !V.geVersion(n, t));
}function nt() {
  return Xe || ((Xe = wx.getSystemInfoSync()).hortorSDKVersion = h), Xe || {};
}function rt() {
  if (!$e) {
    var e = nt();$e = JSON.stringify({ SDKVersion: e.SDKVersion, brand: e.brand, model: e.model, system: e.system, version: e.version, screenHeight: e.screenHeight, screenWidth: e.screenWidth, pixelRatio: e.pixelRatio, benchmarkLevel: e.benchmarkLevel, hortorSDKVersion: e.hortorSDKVersion });
  }return $e;
}function it() {
  return r(this, void 0, void 0, function () {
    return i(this, function (e) {
      switch (e.label) {case 0:
          return Ye ? [3, 2] : (et("offNetworkStatusChange", "2.8.1") && V.defineProperty(wx, "offNetworkStatusChange", st), ot(), [4, new Promise(function (e, t) {
            wx.getNetworkType({ success: e, fail: t });
          })]);case 1:
          Ye = e.sent(), e.label = 2;case 2:
          return [2, Ye];}
    });
  });
}function ot() {
  var e;e = function (e) {
    Ye = e;
  }, V.isFun(e) && et("onNetworkStatusChange", "1.1.0") && wx.onNetworkStatusChange(e);
}function st(e) {
  return function (t) {
    V.isFun(e) && e(t), ot();
  };
}var at = { errCode: 1001, errMsg: "微信Code获取失败" },
    ct = { errCode: 1002, errMsg: "支付取消" },
    ut = { errCode: 1003, errMsg: "支付失败" },
    ht = { errCode: 1005, errMsg: "拒绝授权获取用户信息" },
    dt = { errCode: 1006, errMsg: "需要用户授权" },
    ft = { errCode: 1007, errMsg: "获取用户信息失败" },
    lt = { errCode: 20002, errMsg: "订单数据不全，请传入创建订单返回的全部数据" },
    pt = { errCode: 20008, errMsg: "当前版本不支持使用动态分享" },
    gt = { errCode: 20009, errMsg: "频繁调用分享" },
    vt = { errCode: 20005, errMsg: "获取分享数据失败" },
    mt = { errCode: 3e4, errMsg: "方法暂不支持" },
    _t = { errCode: 30001, errMsg: "传参错误" },
    yt = { errCode: 30002, errMsg: "未登录" },
    wt = { errCode: 30003, errMsg: "已销毁" },
    It = { errCode: 20013, errMsg: "录音时长太短" },
    Tt = { errCode: 1004, errMsg: "暂无广告" },
    St = { errCode: 1005, errMsg: "微信广告单元id参数必填" },
    bt = { errCode: 1006, errMsg: "无效hortor视频广告" },
    Et = { SUC: "success", FAIL: "fail", AUTO: void 0 };function Ct() {
  if (et("getUserCryptoManager", "2.17.3")) return wx.getUserCryptoManager();throw mt;
}function kt(e) {
  return new Promise(function (t, n) {
    try {
      Ct().getLatestUserKey({ success: function (r) {
          var i = r.encryptKey,
              o = r.iv,
              s = (r.version, r.expireTime, "");e && e.msg && (s = e.msg);try {
            var a = function (e, t, n) {
              var r = Ze.utils.utf8.toBytes(e);r = Ze.padding.pkcs7.pad(r);var i = Ze.utils.utf8.toBytes(t),
                  o = Ze.utils.utf8.toBytes(n);return function (e) {
                for (var t, n, r, i, o, s, a, c = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", u = "", h = 0; h < e.length;) i = (t = e[h++]) >> 2, o = (3 & t) << 4 | (n = h < e.length ? e[h++] : Number.NaN) >> 4, s = (15 & n) << 2 | (r = h < e.length ? e[h++] : Number.NaN) >> 6, a = 63 & r, isNaN(n) ? s = a = 64 : isNaN(r) && (a = 64), u += c.charAt(i) + c.charAt(o) + c.charAt(s) + c.charAt(a);return u;
              }(new Ze.ModeOfOperation.cbc(i, o).encrypt(r));
            }(s, i, o);t({ msg: a });
          } catch (e) {
            n(e);
          }
        }, fail: function (e) {
          n(e);
        } });
    } catch (e) {
      n(e);
    }
  });
}function Ot() {
  return new Promise(function (e, t) {
    try {
      Ct().getLatestUserKey({ success: function (t) {
          e(t);
        }, fail: function (e) {
          t(e);
        } });
    } catch (e) {
      t(e);
    }
  });
}var At,
    xt = et("createBannerAd", "2.0.4"),
    Dt = et("createRewardedVideoAd", "2.0.4"),
    Rt = et("createRewardedVideoAd", "2.8.0"),
    Pt = et("createInterstitialAd", "2.6.0"),
    Ut = et("createGridAd", "2.9.2");function Lt() {
  return wx.getLaunchOptionsSync();
}function Nt(e) {
  wx.onShow(e);
}function Vt(e) {
  wx.onHide(e);
}function Ht(e) {
  wx.onError(e);
}function Mt() {
  T.on("EVT_ON_SHOW", Ft), Ht(function (e) {
    T.dispatch("EVT_ON_ERROR", e);
  });
}function qt() {
  return At || Gt(Lt()), At;
}function Ft(e) {
  Gt(e.data);
}function Gt(e) {
  a("onShow", e), At = n(n({}, e), { custom: jt(e) });
}function jt(e) {
  var t = (e || {}).query,
      n = void 0 === t ? {} : t,
      r = { channel: n.channel || n.c || "hortor", origChannel: n.origChannel || "", shareConfigId: n.shareConfigId || "", activityId: n.activityId || "", h_shareCode: n.h_shareCode || "", pageQuery: n.scene || "", boxCode: n.wallCode || n.horwall || "" },
      i = V.queryToJson(n.scene);return r.channel = i.channel || i.c || r.channel, r.origChannel = i.origChannel || r.origChannel, r.boxCode = i.wallCode || i.horwall || r.boxCode, r;
}function Kt() {
  return qt() || {};
}function Bt() {
  return S.sdkConfig() || {};
}Mt();var zt = "",
    Wt = { create: function (e) {
    var t = e || {},
        n = t.adUnitId,
        r = t.customScene;zt = r;var i = function (e) {
      return xt ? wx.createBannerAd(e) : null;
    }(e);return i && (V.defineProperty(i, "show", this._showHandler.bind(this, n)), V.defineProperty(i, "hide", this._hideHandler.bind(this, n)), i.onError(function (e) {
      a("banner ad err", e);
    })), i;
  }, _showHandler: function (e, t) {
    var n = this;return function () {
      return new Promise(function (r, i) {
        n._postLog(e, 28), t().then(function (t) {
          r(t), a("banner ad show"), n._postLog(e, 21);
        }).catch(function (e) {
          i(e), a("banner ad show fail", e);
        });
      });
    };
  }, _hideHandler: function (e, t) {
    var n = this;return function (r) {
      t(r), a("banner ad hide"), n._postLog(e, 22);
    };
  }, _postLog: function (e, t) {
    var n = Kt(),
        r = n.scene,
        i = { adUnitId: e, logType: t, channel: (n.custom || {}).channel, scene: r, customScene: zt || "" };T.dispatch("EVT_REPORT_LOG", { log: i });
  } },
    Jt = "";function Qt(e) {
  var t = e || {},
      n = t.adUnitId,
      r = t.customScene;return Jt = r, this.options = e || {}, this.adUnitId = n, this.adInstance = null, this.destroyed = !1, this.create(e), this;
}Qt.prototype = { bindedOnClose: null, injectKeys: ["Close", "Error", "Load"], injectHandlers: {}, create: function (e) {
    var t,
        n = (t = e, Pt ? wx.createInterstitialAd(t) : null);return n && (V.defineProperty(n, "show", this._showHandler.bind(this)), V.defineProperty(n, "destroy", this._destroyHandler.bind(this)), V.defineProperty(n, "offClose", this._offCloseHandler.bind(this)), this.adInstance = n, this._bindOnClose(), n.onError(function (e) {
      a("interstitial ad err", e);
    })), n;
  }, destroy: function () {
    !this.destroyed && this.adInstance && (this.destroyed = !0, this.adInstance.destroy(), this.adInstance = null);
  }, setOptions: function (e) {
    var t = this;if (e) {
      var n = e.customScene;Jt = n || Jt, this.options = e, this.injectKeys.forEach(function (n) {
        var r = "on" + n;V.isFun(e[r]) && (t.options = t.options || {}, t.options[r] = e[r]);
      });
    }
  }, bindHandlers: function () {
    var e = this;this.adInstance && this.injectKeys.forEach(function (t) {
      var n = "on" + t,
          r = function (t) {
        e.options && V.isFun(e.options[n]) && e.options[n](t);
      };e.injectHandlers[n] = r, e.adInstance[n] && e.adInstance[n](r);
    });
  }, unbindHandlers: function () {
    var e = this;this.adInstance && (this.injectKeys.forEach(function (t) {
      var n = "off" + t,
          r = "on" + t,
          i = e.injectHandlers[r];e.adInstance[n] && i && e.adInstance[n](i);
    }), this.options = null, this.injectHandlers = {});
  }, _showHandler: function (e) {
    var t = this;return function () {
      return new Promise(function (n, r) {
        V.isFun(e) || r(mt), t._postLog(25), e().then(function (e) {
          n(e), t._postLog(26), t._stdInterstitialAdLog(!0);
        }).catch(function (e) {
          r(e), t._stdInterstitialAdLog(!1, e.errCode), a("interstitial ad show fail", e);
        });
      });
    };
  }, _stdInterstitialAdLog: function (e, t) {
    void 0 === t && (t = 0), a("interstitial this.options", this.options);var n = this.options,
        r = n.adUnitId,
        i = n.sequenceInfo;T.dispatch("EVT_INTERSTITIAL_AD_SHOW", { adUnitId: r, isEnded: e, playFailCode: t, spentTime: 0, sequenceInfo: i, adType: 1 });
  }, _destroyHandler: function (e) {
    var t = this;return function (n) {
      t._unbindOnClose(), t.destroyed = !0, t.adInstance = null, V.isFun(e) && e(n);
    };
  }, _offCloseHandler: function (e) {
    var t = this;return function (n) {
      V.isFun(e) && (e(n), n || t.destroyed || (t._unbindOnClose(), t._bindOnClose()));
    };
  }, _unbindOnClose: function () {
    var e = this.adInstance;this.bindedOnClose && e && V.isFun(e.offClose) && e.offClose(this.bindedOnClose), this.bindedOnClose = null;
  }, _bindOnClose: function () {
    var e = this,
        t = this.adInstance;!this.bindedOnClose && t && V.isFun(t.onClose) && (this.bindedOnClose = function () {
      a("interstitial ad close"), e._postLog(27);
    }, t.onClose(this.bindedOnClose));
  }, _postLog: function (e) {
    var t = Kt(),
        n = t.scene,
        r = (t.custom || {}).channel;T.dispatch("EVT_REPORT_LOG", { log: { adUnitId: this.adUnitId, logType: e, channel: r, scene: n, customScene: Jt || "" } });
  } };var Yt = {},
    Xt = { create: function (e) {
    return new Qt(e).adInstance;
  }, createAdManager: function (e) {
    var t = e.adUnitId,
        n = new Qt(e);return n.bindHandlers(), Yt[t] = n, n;
  }, preLoad: function (e) {
    return r(this, void 0, void 0, function () {
      var t,
          n = this;return i(this, function (r) {
        if (!(t = e.adUnitIds) || !t.length) throw _t;if (!Pt) throw mt;return t.forEach(function (e) {
          Yt[e] = Yt[e] || n.createAdManager({ adUnitId: e });
        }), a("preLoad ad success"), [2, Yt];
      });
    });
  }, show: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r;return i(this, function (i) {
        switch (i.label) {case 0:
            if (a("show interstitial ad ", e), t = e.adUnitId, (n = Yt[t] || this.createAdManager(e)).setOptions(e), !(r = n.adInstance)) throw mt;return [4, r.show()];case 1:
            return [2, i.sent()];}
      });
    });
  }, getInterstitialAd: function (e) {
    a("get interstitial ad ", e);var t = e.adUnitId,
        n = (Yt[t] || this.createAdManager(e)).adInstance;if (!n) throw mt;return n;
  }, _destroy: function (e) {
    var t = Yt[e];t && (t.unbindHandlers(), t.destroy(), Yt[e] = null);
  }, destroy: function (e) {
    var t = this;a("destroy interstitial ad", e);var n = (e || {}).adUnitId;if (n) return this._destroy(n);Object.keys(Yt || {}).forEach(function (e) {
      t._destroy(e);
    });
  } },
    $t = "/ad-platform-server/api/v1/platform/strategy",
    Zt = "/ad-platform-server/api/v1/platform/fetch",
    en = "hortor",
    tn = "wx",
    nn = "",
    rn = "无hortor视频广告",
    on = "无微信视频广告",
    sn = "暂无视频广告",
    an = "hortor视频广告",
    cn = "微信视频广告",
    un = "视频广告冻结期间, 暂无视频广告",
    hn = "",
    dn = function (e, t, n) {
  void 0 === n && (n = ""), hn = n || hn;var r = Kt(),
      i = r.scene,
      o = { adUnitId: e, logType: t, channel: (r.custom || {}).channel, scene: i, customScene: hn || "" };T.dispatch("EVT_REPORT_LOG", { log: o });
},
    fn = function (e) {
  var t = e.sequenceInfo;T.dispatch("EVT_VIDEO_AD_PLAY_FINISH", { sequenceInfo: t, adType: 2 }), T.dispatch("EVT_HORTOR_AD_PLAY_SUCCESS");
};function ln() {
  var e = Bt(),
      t = e.videoCoolTime,
      n = e.videoTimeout;this.adInstance = void 0, this.loaded = !1, this.loading = !0, this.loadReported = !1, this.coolLoad = !1, this.coolTimer = null, this.loadCoolTime = t || 18e4, this.callTimeout = n || 5e3, this.destroyed = !1, this.fstLoaded = !1, this.cacheQueue = [], this.isOnlyUseWX = !0, this.cacheHortorAdInfo = null, this.isNeedConsumeQueue = !0, this.preAd = 0, this.videoPlayFreezeTime = 0, this.videoPlayFreezeEnable = 0, this.activeFreezeTime = 0, this.freezeTimer = 0, T.on("EVT_HORTOR_AD_PLAY_SUCCESS", this._initVideoFreezeTime.bind(this));
}ln.prototype = { _sCool: function () {
    this.coolLoad = !1, this.coolTimer = null;
  }, _sRest: function () {
    this.loaded = !1, this.loading = !0, this.isNeedConsumeQueue = !0, this._sCool();
  }, _sLoad: function (e) {
    a("ad loaded", e), this.loaded = !0, this.loading = !1, this.fstLoaded = !0, this._sCool();
  }, _sError: function (e) {
    a("ad err", e), this.loaded = !1, this.loading = !1, this.fstLoaded = !0;var t = e.errCode;!this.coolTimer && [1002, 1004].indexOf(t) > -1 && (this.coolLoad = !0, this.coolTimer = setTimeout(this._sCool.bind(this), this.loadCoolTime));
  }, _loadAd: function (e, t) {
    return r(this, void 0, void 0, function () {
      var n;return i(this, function (r) {
        switch (r.label) {case 0:
            a("ad reload"), r.label = 1;case 1:
            if (r.trys.push([1, 3,, 4]), this.coolLoad && t) throw t;return [4, e.load()];case 2:
            return r.sent(), this._sLoad(), [2, !0];case 3:
            throw n = r.sent(), this._sError(n), n;case 4:
            return [2];}
      });
    });
  }, _showAd: function (e, t) {
    return r(this, void 0, void 0, function () {
      var n;return i(this, function (r) {
        switch (r.label) {case 0:
            a("ad show", t), r.label = 1;case 1:
            return r.trys.push([1, 3,, 5]), [4, e.show(t)];case 2:
            return [2, r.sent()];case 3:
            return n = r.sent(), [4, this._loadAd(e, n)];case 4:
            return r.sent(), [2, e.show()];case 5:
            return [2];}
      });
    });
  }, _waitResult: function (e) {
    var t = this;return a("ad wait"), new Promise(function (n, r) {
      var i = setTimeout(function () {
        if (a("ad wait timeout"), t.fstLoaded) return t._sLoad("fake"), n(!0);t._loadAd(e).then(n).catch(r);
      }, t.callTimeout);e.onLoad(function (t) {
        e.offLoad(this), clearTimeout(i), n(!0);
      }), e.onError(function (t) {
        e.offError(this), clearTimeout(i), r(t);
      });
    });
  }, getInstance: function (e) {
    if (void 0 !== this.adInstance) return this.adInstance;var t = function (e) {
      return Dt ? wx.createRewardedVideoAd(e) : null;
    }(e);return this.adInstance = t, t ? (t.onLoad(this._sLoad.bind(this)), t.onError(this._sError.bind(this)), this.adInstance) : null;
  }, _getAdInstance: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        if (this.destroyed) throw wt;if (!(t = this.getInstance(e))) throw mt;return [2, t];
      });
    });
  }, _checkLoaded: function (e) {
    return r(this, void 0, void 0, function () {
      return i(this, function (t) {
        switch (t.label) {case 0:
            return this.loaded ? [2, !0] : this.loading ? [4, this._waitResult(e)] : [3, 2];case 1:case 3:
            return [2, t.sent()];case 2:
            return this.coolLoad ? [3, 4] : (a("ad try load"), [4, this._loadAd(e)]);case 4:
            if (!this.loaded) throw Tt;return [2, !0];}
      });
    });
  }, destroy: function () {
    this.adInstance && (this.adInstance.destroy(), this.adInstance = null), this.destroyed = !0, this._sRest(), this.loading = !1;
  }, _showStart: function (e) {
    this.loadReported = !1, T.dispatch("EVT_VIDEO_AD_PLAY_START", { adUnitId: e });
  }, _showSuccess: function (e) {
    T.dispatch("EVT_VIDEO_AD_PLAY_START", { adUnitId: e, playSuccess: !0 });
  }, _showFinish: function (e, t, n, r, i) {
    void 0 === n && (n = 0);var o = r ? Math.max(V.getTime() - r, 0) : 0;T.dispatch("EVT_VIDEO_AD_PLAY_FINISH", { adUnitId: e, isEnded: t, playFailCode: n, spentTime: o, sequenceInfo: i, adType: 0 }), t && this._initVideoFreezeTime();
  }, _initVideoFreezeTime: function () {
    var e = H.get("__sdk_std_seq") || {};if (this.videoPlayFreezeEnable = e.video_play_freeze_enable || 0, this.videoPlayFreezeTime = e.video_play_freeze_time || 0, this.activeFreezeTime = this.videoPlayFreezeTime, clearTimeout(this.freezeTimer), !(this.activeFreezeTime <= 0 || 0 === this.videoPlayFreezeEnable)) {
      var t = this,
          n = function () {
        t.activeFreezeTime--, clearTimeout(t.freezeTimer), t.activeFreezeTime <= 0 || (t.freezeTimer = setTimeout(function () {
          n();
        }, 1e3));
      };n();
    }
  }, show: function (e) {
    return r(this, void 0, void 0, function () {
      var t,
          n,
          r,
          o,
          s,
          c,
          u,
          h,
          d,
          f,
          l,
          p = this;return i(this, function (i) {
        switch (i.label) {case 0:
            return a("调用展示广告"), [4, this._getAdInstance(e)];case 1:
            t = i.sent(), n = e.adUnitId, r = e.onClose, o = e.sequenceInfo, s = e.customScene, a("showing ad", n), c = V.getTime(), u = function (e) {
              t.offClose(u), r && r(e);var i = (e || {}).isEnded,
                  a = void 0 === i || i;dn(n, a ? 17 : 18, s), p._showFinish(n, a, 0, c, o);
            }, t.onClose(u), dn(n, 15, s), this._showStart(n), i.label = 2;case 2:
            return i.trys.push([2, 5,, 6]), [4, this._checkLoaded(t)];case 3:
            return i.sent(), [4, this._showAd(t, e)];case 4:
            return h = i.sent(), this._showSuccess(n), this._sRest(), dn(n, 16, s), [2, h];case 5:
            throw d = i.sent(), t.offClose(u), f = (d || {}).errCode, l = void 0 === f ? 1 : f, this._showFinish(n, !1, l, c, o), a("ad show err", n, d), T.dispatch("EVT_VIDEO_AD_ERROR", { adUnitId: n, err: d }), d;case 6:
            return [2];}
      });
    });
  }, prepareShowHortorVedioAd: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n;return i(this, function (r) {
        switch (r.label) {case 0:
            return t = JSON.parse(JSON.stringify(this.cacheHortorAdInfo)), this.cacheHortorAdInfo = null, this.isNeedConsumeQueue = !0, [4, this._hortorAdCheck(e)];case 1:
            return r.sent(), n = new Promise(function (e, n) {
              var r = t || {},
                  i = r.jumpConfig,
                  o = r.videoResource;i && o ? e(t) : n(bt);
            }), [2, n];}
      });
    });
  }, check: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o;return i(this, function (i) {
        switch (i.label) {case 0:
            return [4, this._getAdInstance(e)];case 1:
            t = i.sent(), a("checking ad", n = e.adUnitId), this.loadReported || dn(n, 23), i.label = 2;case 2:
            return i.trys.push([2, 4, 5, 6]), [4, this._checkLoaded(t)];case 3:
            return r = i.sent(), this.loadReported || dn(n, 24), [2, r];case 4:
            throw o = i.sent(), a("ad check err", n, o), T.dispatch("EVT_VIDEO_AD_ERROR", { adUnitId: n, err: o }), o;case 5:
            return this.loadReported = !0, [7];case 6:
            return [2];}
      });
    });
  }, _getConnomHorotrAdParams: function (e) {
    var t = x.platform.information,
        n = t.getUserInfo() || {},
        r = n.gameId,
        i = n.uniqueId,
        o = n.openId,
        s = t.getSystemInfo();return { adPositionId: e.hortorAdUnitId, gameId: r, uniqueId: i, openId: o, sysInfo: JSON.stringify(s) };
  }, _getAdQueueInfo: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, s, a, c, u;return i(this, function (i) {
        switch (i.label) {case 0:
            if (n = (t = this).isOnlyUseWX, (r = t.cacheQueue).length > 1) return [2, { isOnlyUseWX: n, cacheQueue: r }];s = "" + O.getServerHost() + $t, a = this._getConnomHorotrAdParams(e), i.label = 1;case 1:
            return i.trys.push([1, 3,, 4]), [4, D.post(s, a)];case 2:
            return c = i.sent().data, u = c.strategyList || [], this.isOnlyUseWX = c.isOnlyUseWX, this.cacheQueue = o(this.cacheQueue, u), [2, { isOnlyUseWX: this.isOnlyUseWX, cacheQueue: this.cacheQueue }];case 3:
            return i.sent(), [2, Promise.resolve({ isOnlyUseWX: this.isOnlyUseWX, cacheQueue: this.cacheQueue })];case 4:
            return [2];}
      });
    });
  }, _hortorAdCheck: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, c;return i(this, function (i) {
        switch (i.label) {case 0:
            return t = { isHaveAd: !1, adType: en, msg: rn, isFreeze: !1, freezeTime: 0 }, this.cacheHortorAdInfo ? [2, Object.assign(t, { isHaveAd: !0, msg: an })] : (n = "" + O.getServerHost() + Zt, r = this._getConnomHorotrAdParams(e), [4, D.post(n, r)]);case 1:
            return o = i.sent(), s = o.data, c = o.meta, a("get ad info", s, c), c && 0 !== c.errCode ? [2, t] : (this.cacheHortorAdInfo = s, [2, Object.assign(t, { isHaveAd: !0, msg: an })]);}
      });
    });
  }, _wxAdCheck: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return a("_wxAdCheck"), [4, this.check(e)];case 1:
            return a("wx ad check", t = n.sent()), [2, { isHaveAd: t, adType: tn, msg: t ? cn : on, isFreeze: !1, freezeTime: 0 }];}
      });
    });
  }, _consumeQueue: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s;return i(this, function (i) {
        switch (i.label) {case 0:
            return i.trys.push([0, 6,, 7]), t = ["_wxAdCheck", "_hortorAdCheck"], n = 0, this.isNeedConsumeQueue ? (n = this.cacheQueue.shift(), this.preAd = n, this.isNeedConsumeQueue = !1, a("consume queue", n)) : a("no consume queue", n = this.preAd), r = null, n >= t.length ? [4, this._wxAdCheck(e)] : [3, 2];case 1:
            return [2, r = i.sent()];case 2:
            return o = t[n], s = t[Number(!n)], [4, this[o](e)];case 3:
            return (r = i.sent()).isHaveAd ? [3, 5] : [4, this[s](e)];case 4:
            r = i.sent(), i.label = 5;case 5:
            return r.isHaveAd || (r = { isHaveAd: !1, adType: nn, msg: sn, isFreeze: !1, freezeTime: 0 }), [2, r];case 6:
            throw i.sent();case 7:
            return [2];}
      });
    });
  }, mixCheck: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, c, u, h, d;return i(this, function (i) {
        switch (i.label) {case 0:
            if (t = {}, n = e.adUnitId, r = e.hortorAdUnitId, !n) throw St;return s = (o = this).activeFreezeTime, o.videoPlayFreezeEnable && s > 0 ? [2, t = { isHaveAd: !1, adType: nn, msg: un, isFreeze: !0, freezeTime: this.activeFreezeTime }] : (c = !0, r ? [4, this._getAdQueueInfo(e)] : [3, 2]);case 1:
            u = i.sent(), h = u.isOnlyUseWX, d = u.cacheQueue, c = h || 0 === d.length, a("get ad queue", u), i.label = 2;case 2:
            return c ? (a("isWxAd"), [4, this._wxAdCheck(e)]) : [3, 4];case 3:
            return a("adInfo", t = i.sent()), [2, t];case 4:
            return [4, this._consumeQueue(e)];case 5:
            return a("ad result", t = i.sent()), [2, t];}
      });
    });
  } };var pn = { managerOrder: [], adManagers: {}, idToManagerKeys: {}, _getOpt: function (e) {
    var t = Object.assign({}, e),
        n = t.multiton,
        r = t.type;return t.multiton = !(!n && !r || !Rt), t;
  }, _getManagerKey: function (e) {
    var t = e.adUnitId,
        n = e.multiton,
        r = e.type,
        i = this.idToManagerKeys[t];return i || (n ? (this.idToManagerKeys[t] = r || t, r || t) : (this.idToManagerKeys[t] = "global", "global"));
  }, _getAdManager: function (e) {
    var t = this._getManagerKey(e),
        n = this.adManagers[t] || null;if (n) return n;var r = Bt().maxTempVideoAdLen;this.managerOrder.length >= r && this.destroy(this.managerOrder[0]);var i = e.adUnitId,
        o = new ln();return a("create adManager", t, i), this.adManagers[t] = o, this.managerOrder.push(t), this.idToManagerKeys[i] = t, o;
  }, destroy: function (e) {
    var t = "";if ((t = "string" == typeof e ? this.idToManagerKeys[e] || e || "" : e ? this._getManagerKey(this._getOpt(e)) : "") && "global" !== t) {
      var n = this.adManagers[t];if (n) {
        n.destroy(), this.adManagers[t] = null;var r = this.managerOrder.indexOf(t);r > -1 && this.managerOrder.splice(r, 1), a("destroy adManager", t);
      }
    }
  }, check: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return t = this._getOpt(e), [4, this._getAdManager(t).check(t)];case 1:
            return [2, n.sent()];}
      });
    });
  }, mixCheck: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return t = this._getOpt(e), [4, this._getAdManager(t).mixCheck(t)];case 1:
            return [2, n.sent()];}
      });
    });
  }, show: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return t = this._getOpt(e), [4, this._getAdManager(t).show(t)];case 1:
            return [2, n.sent()];}
      });
    });
  }, prepareShowHortorVedioAd: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return t = this._getOpt(e), [4, this._getAdManager(t).prepareShowHortorVedioAd(t)];case 1:
            return [2, n.sent()];}
      });
    });
  }, play: function (e) {
    var t = this;return new Promise(function (n, r) {
      var i = (e || {}).onShow;t.show(Object.assign({}, e || {}, { onClose: function (e) {
          n(e || { isEnded: !0 });
        } })).then(function (e) {
        i && i(e);
      }).catch(r);
    });
  }, getVideoAd: function (e) {
    var t = this._getOpt(e);return this._getAdManager(t).getInstance(t);
  }, adPointShow: function (e, t) {
    void 0 === e && (e = ""), void 0 === t && (t = ""), dn(e, 20, t);
  }, hortorAdPlaySuccess: function (e) {
    fn(e);
  } },
    gn = "",
    vn = { create: function (e) {
    var t = e || {},
        n = t.adUnitId,
        r = t.customScene;gn = r;var i = function (e) {
      return Ut ? wx.createGridAd(e) : null;
    }(e);return i && (V.defineProperty(i, "show", this._showHandler.bind(this, n)), V.defineProperty(i, "hide", this._hideHandler.bind(this, n)), i.onError(function (e) {
      a("grid ad err", e);
    })), i;
  }, _showHandler: function (e, t) {
    var n = this;return function () {
      return new Promise(function (r, i) {
        n._postLog(e, 41), t().then(function (t) {
          r(t), a("grid ad show"), n._postLog(e, 42);
        }).catch(function (e) {
          i(e), a("grid ad show fail", e);
        });
      });
    };
  }, _hideHandler: function (e, t) {
    var n = this;return function (r) {
      t(r), a("grid ad hide"), n._postLog(e, 43);
    };
  }, _postLog: function (e, t) {
    var n = Kt(),
        r = n.scene,
        i = { adUnitId: e, logType: t, channel: (n.custom || {}).channel, scene: r, customScene: gn || "" };T.dispatch("EVT_REPORT_LOG", { log: i });
  } };function mn(e) {
  return Wt.create(e);
}function _n(e) {
  return vn.create(e);
}function yn(e) {
  return Xt.preLoad(e);
}function wn(e) {
  return Xt.show(e);
}function In(e) {
  return Xt.destroy(e);
}function Tn(e) {
  pn.adPointShow((null == e ? void 0 : e.id) || "", (null == e ? void 0 : e.customScene) || "");
}function Sn(e) {
  pn.hortorAdPlaySuccess(e);
}function bn(e) {
  return pn.check(e);
}function En(e) {
  return pn.mixCheck(e);
}function Cn(e) {
  return pn.show(e);
}function kn(e) {
  return pn.prepareShowHortorVedioAd(e);
}function On(e) {
  return pn.play(e);
}function An(e) {
  pn.destroy(e);
}function xn(e) {
  return pn.getVideoAd(e);
}function Dn(e) {
  return Xt.getInterstitialAd(e);
}var Rn = function () {
  var e = Bt();return "__sdk_login_" + e.gameId + "_" + e.env;
},
    Pn = void 0,
    Un = function () {
  return void 0 === Pn && (a("get login storage", Rn()), Pn = H.get(Rn(), null)), Pn;
},
    Ln = void 0,
    Nn = {},
    Vn = { clearUserInfo: function () {
    return Pn = null, H.remove(Rn());
  }, getUserInfo: function (e) {
    var t = Un() || {},
        n = t.userInfo,
        r = t.saveTime;if (!n || !r) return null;var i = ((n || {}).userSdk || {}).hasUserInfo;if (!e && !i) return null;var o = Bt().expireTime || 86400,
        s = V.getTimeSec();return r + o < s || r > s ? null : n;
  }, setUserInfo: function (e) {
    var t = e || {},
        n = t.encryptUserInfo,
        r = t.userSdk;if (!n) return !1;var i = { userInfo: e, saveTime: V.getTimeSec() };H.set(Rn(), i), i.userInfo = Object.assign(e, { userSdk: this._inheritOldData(r) }), Pn = i;
  }, _inheritOldData: function (e) {
    var t = this.getTempUser();if (!t || !e) return e;var n = t.isNewUser;return V.isNull(n) || (e.isNewUser = !!n), e;
  }, getSDKUserInfo: function () {
    var e = ((Un() || {}).userInfo || {}).userSdk;return e && (e.gameUser = this.getGameUser()), e;
  }, updateIsNewUser: function () {
    var e = Un();e.userInfo.userSdk.isNewUser = !1, H.set(Rn(), e), Pn = void 0;
  }, setTempUser: function (e) {
    var t = (e || {}).userSdk;Ln = t ? this._inheritOldData(t) : null;
  }, getTempUser: function () {
    if (!Ln) {
      var e = ((Un() || {}).userInfo || {}).userSdk;Ln = e || null;
    }return Ln;
  }, setGameUser: function (e) {
    Nn = Object.assign(Nn, e), T.dispatch("EVT_SET_GAMEUSER", Nn);
  }, getGameUser: function () {
    return Nn;
  } };var Hn,
    Mn = { canUseAdvised: et("checkIsUserAdvisedToRest", "1.9.97"), checkNeedRest: function (e) {
    var t = this;return new Promise(function (n, r) {
      t.canUseAdvised ? wx.checkIsUserAdvisedToRest({ todayPlayedTime: e, success: function (e) {
          n(e.result);
        }, fail: function (e) {
          r(e);
        } }) : r(mt);
    });
  } };function qn(e) {
  this.beatTotal = {}, this.canReport = !0, this._init(e);
}function Fn() {
  return function () {
    return r(this, void 0, void 0, function () {
      var e, t, n, r;return i(this, function (i) {
        switch (i.label) {case 0:
            return e = (Vn.getSDKUserInfo() || {}).uniqueId, t = { uniqueId: e }, n = O.getServerHost() + "/common/api/v1/realname", [4, D.get(n, t)];case 1:
            return (r = i.sent()).data ? [2, Promise.resolve(r.data)] : [2, Promise.reject(r.meta)];}
      });
    });
  }().then(function (e) {
    return Promise.resolve(e);
  }).catch(function (e) {
    return Promise.reject(e);
  });
}function Gn(e) {
  return function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, a;return i(this, function (i) {
        switch (i.label) {case 0:
            if (n = (t = e || {}).name, r = t.idCard, o = (Vn.getSDKUserInfo() || {}).uniqueId, s = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/, !o) throw yt;if (!n || !r || !s.test(r.toString())) throw _t;return a = O.getServerHost() + "/common/api/v1/realname", [4, D.postForm(a, { uniqueId: o, name: n, idCard: r })];case 1:
            return [2, i.sent().data];}
      });
    });
  }(e);
}function jn(e) {
  return void 0 === e && (e = {}), function (e, t) {
    if (void 0 === t && (t = {}), !Mn.canUseAdvised) return !1;a("startCheck");var n = t.maxGameTime,
        r = void 0 === n ? 10800 : n,
        i = t.space,
        o = void 0 === i ? 300 : i,
        s = t.reportOnStart,
        c = void 0 !== s && s,
        u = parseInt(String(r / 60)),
        h = { beatFreq: o, reportFreq: { default: o }, onReport: e, reportOnStart: c };return h.reportFreq[u.toString()] = r, Hn ? (t && Hn.resetOpt(h), Hn.restart()) : (Hn = new qn(h)).start();
  }(e.listener, e.config);
}function Kn() {
  return Hn ? Hn.stop() : (a("did not startCheck"), !1);
}function Bn(e, t) {
  return "function" == typeof (null == e ? void 0 : e.listener) ? e : (u("请正确调用api: ", t + "({ listener: listenFunction })"), "function" == typeof e ? { listener: e } : { listener: function () {} });
}function zn() {
  return qt() || {};
}function Wn() {
  return S.sdkConfig() || {};
}function Jn() {
  return function () {
    var e = nt(),
        t = e.screenHeight,
        n = void 0 === t ? 0 : t,
        r = e.screenWidth;return { result: n / (void 0 === r ? 1 : r) > 2 };
  }();
}function Qn(e) {
  Nt((e = Bn(e, "onShow")).listener);
}function Yn(e) {
  var t;e = Bn(e, "offShow"), t = e.listener, wx.offShow(t);
}function Xn(e) {
  Vt((e = Bn(e, "onHide")).listener);
}function $n(e) {
  var t;e = Bn(e, "offHide"), t = e.listener, wx.offHide(t);
}function Zn(e) {
  Ht((e = Bn(e, "onError")).listener);
}function er(e) {
  var t;e = Bn(e, "offError"), t = e.listener, wx.offError(t);
}function tr(e) {
  void 0 === e && (e = {}), this.lastIndex = -1, this.allZero = !1, this.allWeight = 0, this.unitWeight = 100, this.opt = e, this._init();
}qn.prototype = { _init: function (e) {
    this.opt = !e && this.opt ? this.opt : V.reset(e, { storageKey: "__sdk_BeatTotal", beatFreq: 5, reportFreq: { 5: 30, 30: 60, default: 300 }, onReport: null, reportOnStart: !1 }), a("HeartBeat opt", this.opt), this._bindEvent();
  }, _bindEvent: function () {
    this.starter = this.start.bind(this), this.pauseer = this.pause.bind(this), T.on("EVT_ON_SHOW", this.starter), T.on("EVT_ON_HIDE", this.pauseer);
  }, _unbindEvent: function () {
    T.off("EVT_ON_SHOW", this.starter), T.off("EVT_ON_HIDE", this.pauseer);
  }, start: function (e) {
    return void 0 === e && (e = ""), this._heartBeat("isBeat" === e), this._timer = setTimeout(this.start.bind(this, "isBeat"), 1e3 * this.opt.beatFreq), !!this._timer;
  }, pause: function () {
    return this._timer && (clearTimeout(this._timer), this._timer = null), !!this._timer;
  }, stop: function () {
    return this.canReport = !1, this._unbindEvent(), this.pause();
  }, restart: function () {
    return this.stop(), this._bindEvent(), this.canReport = !0, this.start();
  }, resetOpt: function (e) {
    this.opt = Object.assign(this.opt, e);
  }, _heartBeat: function (e) {
    if (this.pause(), this.today = new Date().toLocaleDateString(), e) {
      var t = this._getTodayTotal() + this.opt.beatFreq;this._checkReport(t), this._setTodayTotal(t);
    } else this.opt.reportOnStart && this._checkReport();
  }, _checkReport: function (e) {
    var t = e || this._getTodayTotal(),
        n = this.opt.reportFreq,
        r = 0;for (var i in n) {
      var o = 60 * Number(i);if (r = n[i], !isNaN(o) && t <= o) break;
    }a("heart beat " + this.today, r, t), t && t % r == 0 && this.canReport && this._onReport(t);
  }, _setTodayTotal: function (e) {
    this.beatTotal[this.today] = e || 0;var t = this.opt.storageKey;H.set(t, this.today + "_" + e);
  }, _getTodayTotal: function (e) {
    if (V.isNull(this.beatTotal[this.today])) {
      var t = this.opt.storageKey,
          n = (H.get(t) || "").split("_");this.beatTotal[this.today] = this.today === n[0] ? Number(n[1]) : 0;
    }return this.beatTotal[this.today];
  }, _onReport: function (e) {
    a("heart beat report");var t = (this.opt || {}).onReport;Mn.checkNeedRest(e).then(function (n) {
      n && V.isFun(t) && t(e);
    }).catch(function (e) {
      a("heart beat report err", e);
    });
  } }, Mt(), tr.prototype = { _init: function () {
    var e = this.opt,
        t = e.list,
        n = e.lastIndex,
        r = e.weightCount;if (t && t.length) {
      this.lastIndex = "number" == typeof n ? n : -1;var i = 0;"number" == typeof r ? i = r : t.map(function (e) {
        var t = e.weight;i += (void 0 === t ? 0 : t) - 0;
      }), 0 === i && (this.allZero = !0, i = t.length * this.unitWeight), this.allWeight = i;
    }
  }, _setLastIndex: function (e) {
    this.lastIndex = e;
  }, _getLastIndex: function () {
    return this.lastIndex;
  }, _getRandomIndex: function () {
    var e = this,
        t = this.opt.list,
        n = Math.floor(Math.random() * this.allWeight),
        r = 0;return t.findIndex(function (t) {
      var i = e.allZero ? e.unitWeight : t.weight,
          o = !!(r <= n && n < r + i);return o || (r += i), o;
    });
  }, _getUniqueIndex: function () {
    var e = this._getLastIndex(),
        t = this._getRandomIndex();return t !== e ? (this._setLastIndex(t), t) : this._getUniqueIndex();
  }, getIndex: function () {
    var e = -1;switch (this.opt.list.length) {case 0:
        e = -1;break;case 1:
        e = 0;break;default:
        e = this._getUniqueIndex();}return e;
  }, getData: function () {
    var e = (this.opt || {}).list;return (void 0 === e ? [] : e)[this.getIndex()];
  } };var nr = { _canUseNavigate: et("navigateToMiniProgram", "2.2.0"), navigateToMiniProgram: function (e, t) {
    var n = this;return new Promise(function (r, i) {
      if (!n._canUseNavigate) return t ? r(n.previewImage(t)) : i(_t);var o = Object.assign({}, e, { success: r, fail: function (e) {
          var o = (e || {}).errMsg;if ((void 0 === o ? "" : o).indexOf("cancel") > -1) e.isCancel = !0;else if (t) return r(n.previewImage(t));i(e || _t);
        } });wx.navigateToMiniProgram(o);
    });
  }, previewImage: function (e) {
    return new Promise(function (t, n) {
      if (!e) return n(_t);wx.previewImage({ current: e, urls: [e], success: t, fail: n });
    });
  } },
    rr = "/cross/api/v1/fetch",
    ir = "/cross/api/v1/log/multi",
    or = "_CSDK_LastIndex",
    sr = "_CSDK_RulesInfo",
    ar = { errCode: 5e4, errMsg: "adsId is null" },
    cr = { errCode: 50001, errMsg: "没有广告数据" },
    ur = { errCode: 50002, errMsg: "not stopLoop" },
    hr = { errCode: 50003, errMsg: "not setOnLoop" },
    dr = { errCode: 50004, errMsg: "still jumping" },
    fr = 1,
    lr = 2,
    pr = 3,
    gr = 4,
    vr = null,
    mr = "",
    _r = function () {
  if (!mr) {
    var e = nt();mr = JSON.stringify({ SDKVersion: e.SDKVersion, brand: e.brand, model: e.model, system: e.system, version: e.version, crossSDKV: e.hortorSDKVersion });
  }return mr;
},
    yr = [],
    wr = _r,
    Ir = function (e) {
  yr.push(e), vr || (vr = setTimeout(function () {
    !function () {
      if (yr.length) {
        var e = Bt() || {},
            t = e.gameId,
            n = e.gameVersion,
            r = Vn.getSDKUserInfo() || {},
            i = r.userId,
            o = r.uniqueId,
            s = { gameId: t, gameVersion: n, openId: i, sex: r.sex, userId: o, channel: r.channel, origChannel: r.origChannel, logs: yr, sysInfo: _r() },
            c = "" + O.getServerHost() + ir;D.post(c, s).catch(function (e) {
          a("cross report fail", e);
        }), yr = [];
      }
    }(), vr = null;
  }, 1e3));
},
    Tr = null,
    Sr = { openCount: {} },
    br = function () {
  var e = V.todayStart(),
      t = Tr || H.get(sr, null);return Tr = t && t.time && t.time < e ? Sr : t || Sr;
},
    Er = function (e) {
  var t = e || {},
      n = t.adsId,
      r = t.prId,
      i = br();n && (i.openCount[n] = i.openCount[n] || 0, i.openCount[n] += 1), r && (i.openCount[r] = i.openCount[r] || 0, i.openCount[r] += 1), function (e) {
    (Tr = e || Sr).time = V.getTime(), H.set(sr, Tr);
  }(i);
},
    Cr = function (e) {
  return br().openCount[e] || 0;
};function kr(e) {
  var t = e || {},
      n = t.adsId,
      r = t.playerOptions;this.adsId = n, this.playerOptions = r, this.options = V.copy(e, ["adsId", "success", "fail"]), this.adsData = {}, this.adsMap = {}, this.randomer = null, this.nowAd = null, this.destroied = !1, this.jumping = !1;
}kr.prototype = { getAdsData: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        switch (e.label) {case 0:
            return this.randomer && this.adsData ? [2, this.adsData] : [4, this._loadData()];case 1:
            return [2, e.sent()];}
      });
    });
  }, getAdDataList: function () {
    return this.getAdsData();
  }, getAdDataListWithPlayerOptions: function (e) {
    return r(this, void 0, void 0, function () {
      return i(this, function (t) {
        switch (t.label) {case 0:
            return [4, this._loadData(e)];case 1:
            return [2, t.sent()];}
      });
    });
  }, getAdDataWithPlayerOptions: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o;return i(this, function (i) {
        switch (i.label) {case 0:
            return [4, this._loadData(e)];case 1:
            if (t = i.sent(), !this._checkAds(t)) throw cr;if (n = this.randomer.getIndex(), H.set(this._getSTGKey(), n), r = t.ads, !(o = r ? r[n] : null) || !this._checkAd(o)) throw cr;return this.nowAd = o, this.reportShow([o]), a("cross get ad", o), [2, o];}
      });
    });
  }, _getSTGKey: function () {
    return "" + or + this.adsId;
  }, _loadData: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, a, c, u, h, d, f, l;return i(this, function (i) {
        switch (i.label) {case 0:
            if (!this.adsId) throw ar;return t = (Bt() || {}).gameId, n = Vn.getSDKUserInfo() || {}, r = n.userId, o = n.uniqueId, s = n.sex, a = n.channel, c = n.origChannel, u = n.createdAt, h = Object.assign({ adsId: this.adsId, gameId: t, openId: r, userId: o, sex: s, channel: a, origChannel: c, userCreatedAt: u || 0, sysInfo: wr() }, this.options), this.playerOptions && (h = Object.assign(h, this.playerOptions)), delete h.playerOptions, e && e.playerOptions && (h = Object.assign(h, e.playerOptions)), d = "" + O.getServerHost() + rr, [4, D.postForm(d, h)];case 1:
            if (f = i.sent().data, !(l = (f || {}).ads) || !l.length) throw cr;return this.nowAd = l[0], [2, this._renderData(f)];}
      });
    });
  }, _renderData: function (e) {
    var t = this,
        n = e.ads,
        r = [];n.map(function (e) {
      if (e) {
        e.show_duration = e.show_duration - 0 || 0;var n = {},
            i = e.jumpConfig || {},
            o = ["jumpConfig"];for (var s in e) o.indexOf(s) < 0 && (n[s] = i[s] || e[s]);t.adsMap[e.prId] = n, r.push(n);
      }
    });var i = H.getNumber(this._getSTGKey(), -1);return this.randomer = new tr({ list: r, lastIndex: i }), this.adsData = Object.assign({}, e, { ads: r }), a("cross adsData", this.adsData), this.adsData;
  }, getAdData: function () {
    return r(this, void 0, void 0, function () {
      var e, t, n, r;return i(this, function (i) {
        switch (i.label) {case 0:
            return [4, this.getAdsData()];case 1:
            if (e = i.sent(), !this._checkAds(e)) throw cr;if (t = this.randomer.getIndex(), H.set(this._getSTGKey(), t), n = e.ads, !(r = n ? n[t] : null) || !this._checkAd(r)) throw cr;return this.nowAd = r, this.reportShow([r]), a("cross get ad", r), [2, r];}
      });
    });
  }, _checkAds: function (e) {
    var t = (e || {}).max_open_count;return !t || Cr(this.adsId) < t;
  }, _checkAd: function (e) {
    var t = e || {},
        n = t.prId,
        r = t.adType,
        i = (t.screen_info || {}).screenOpenCnt;return r === gr && i ? Cr(n) < i : !!n;
  }, _afterShow: function (e) {
    var t = e || {},
        n = t.prId,
        r = t.adType,
        i = (t.screen_info || {}).screenOpenCnt;n && r === gr && i && Er({ adsId: this.adsId, prId: n });
  }, setOnLoop: function (e) {
    V.isFun(e) && (this._loopEnv = e);
  }, _loop: function () {
    return r(this, void 0, void 0, function () {
      var e,
          t,
          n = this;return i(this, function (r) {
        switch (r.label) {case 0:
            if (!this._loopEnv) throw hr;return this._clearLoop(), [4, this.getAdData()];case 1:
            return e = r.sent(), this._loopEnv(e), (t = e.show_duration) && (this._looper = setTimeout(function () {
              n._loop().catch(function () {});
            }, 1e3 * t)), [2];}
      });
    });
  }, _clearLoop: function () {
    this._looper && (clearTimeout(this._looper), this._looper = null);
  }, startLoop: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        switch (e.label) {case 0:
            if (this._looper) throw ur;return [4, this._loop()];case 1:
            return e.sent(), a("cross loop started"), [2];}
      });
    });
  }, stopLoop: function () {
    this._clearLoop(), a("cross loop stoped");
  }, _jump: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, c, u, h, d, f, l, p;return i(this, function (i) {
        switch (i.label) {case 0:
            if (t = (this.nowAd || {}).prId, n = (e || {}).prId, r = n || t, !(o = this.adsMap[r])) throw cr;return this.reportClick(r), s = o.url, c = o.appId, u = o.path, h = o.envVersion, d = o.extraData, f = o.use_code_jump, d = d || {}, f ? [4, nr.previewImage(s)] : [3, 2];case 1:
            return i.sent(), [3, 4];case 2:
            return l = (Bt() || {}).gameId, p = (Vn.getSDKUserInfo() || {}).uniqueId, d = Object.assign(d, { origGameId: l || "", origUniqueId: p || "" }), a("cross jump params", { appId: c, path: u, envVersion: h, extraData: d }, s), [4, nr.navigateToMiniProgram({ appId: c, path: u, envVersion: h, extraData: d }, s)];case 3:
            i.sent(), i.label = 4;case 4:
            return this.reportJumped(r), this._loop().catch(function () {}), [2];}
      });
    });
  }, jump: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            if (this.jumping) throw dr;this.jumping = !0, n.label = 1;case 1:
            return n.trys.push([1, 3, 4, 5]), [4, this._jump(e)];case 2:
            return n.sent(), [3, 5];case 3:
            throw a("cross jump fail", t = n.sent()), t;case 4:
            return this.jumping = !1, [7];case 5:
            return [2];}
      });
    });
  }, reportShow: function (e) {
    var t = this,
        n = this.adsData.ads;(e || n || []).map(function (e) {
      var n = e ? "string" == typeof e ? e : e.prId : "";t._report(lr, n), t._afterShow(t.adsMap[n]);
    });
  }, reportClick: function (e) {
    this._report(pr, e);
  }, reportJumped: function (e) {
    this._report(fr, e);
  }, _report: function (e, t) {
    t && Ir({ logType: e, prId: t, adsId: this.adsId });
  }, destroy: function () {
    this.stopLoop(), this.adsData = {}, this.adsMap = {}, this.randomer = null, this.nowAd = null, this.destroied = !0;
  } };var Or = {},
    Ar = function (e) {
  var t = (e || {}).adsId,
      n = Or[t];return n && !n.destroied || (Or[t] = new kr(e)), Or[t];
};function xr(e) {
  return Ar(e);
}var Dr = { _canUseCustomer: et("openCustomerServiceConversation", "2.0.3"), openCustomerServiceConversation: function (e) {
    var t = this;return new Promise(function (n, r) {
      t._canUseCustomer ? wx.openCustomerServiceConversation(Object.assign({}, e, { success: n, fail: r })) : r(mt);
    });
  } },
    Rr = { _getAppInfo: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, a, c;return i(this, function (i) {
        switch (i.label) {case 0:
            if (this.jumpInfo) return [2, this.jumpInfo];if (t = Bt().gameId, n = Vn.getSDKUserInfo() || {}, r = n.uniqueId, o = n.channel, !(s = Object.assign({}, e || {}, { fromGameId: t, fromUserId: r, channel: o })).fromUserId) throw yt;return a = O.getServerHost() + "/sdk/conf/api/v1/customer/get", [4, D.get(a, s)];case 1:
            return c = i.sent().data, this.jumpInfo = c || {}, [2, c];}
      });
    });
  }, goCustomer: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return [4, this._getAppInfo(e)];case 1:
            return t = n.sent(), [4, nr.navigateToMiniProgram(t, t.url)];case 2:
            return n.sent(), [2];}
      });
    });
  } };function Pr(e) {
  return Rr.goCustomer(e);
}function Ur(e) {
  return Dr.openCustomerServiceConversation(e);
}function Lr(e, t) {
  return W.post(e, t);
}var Nr = et("createGameBanner", "2.7.5"),
    Vr = et("createGameIcon", "2.8.3"),
    Hr = et("createGamePortal", "2.7.5");function Mr() {
  this.canUseAd = Nr;
}function qr() {
  this.canUseAd = Vr;
}function Fr() {
  this.canUseAd = Hr;
}Mr.prototype = { constructor: Mr, _postLog: function (e, t) {
    var n = Kt(),
        r = n.scene;Lr({ adUnitId: e, channel: (n.custom || {}).channel, scene: r, logType: t });
  }, _showHandler: function (e, t) {
    var n = this;return function () {
      return new Promise(function (r, i) {
        if (!V.isFun(t)) return i(mt);n._postLog(e, 32), t().then(function (t) {
          r(t), n._postLog(e, 33), a("game banner show succ", e);
        }).catch(i);
      });
    };
  }, _hideHandler: function (e, t) {
    var n = this;return function () {
      return n._postLog(e, 34), a("game banner hide", e), V.isFun(t) && t();
    };
  }, _create: function (e) {
    if (!this.canUseAd) return null;var t = e.adUnitId;if (!t) return null;var n = function (e) {
      return Nr ? wx.createGameBanner(e) : null;
    }(e);return n ? (this.defineProperty(n, "show", this._showHandler.bind(this, t)), this.defineProperty(n, "hide", this._hideHandler.bind(this, t)), n) : null;
  }, create: function (e) {
    return this._create(e);
  } }, qr.prototype = { constructor: qr, _postLog: function (e, t) {
    var n = Kt(),
        r = n.scene;Lr({ adUnitId: e, channel: (n.custom || {}).channel, scene: r, logType: t });
  }, _showHandler: function (e, t, n) {
    var r = this;return function () {
      return new Promise(function (i, o) {
        if (!V.isFun(n)) return o(mt);r._postLog(t, 35), e.load().then(function () {
          n().then(function (e) {
            i(e), r._postLog(t, 36), a("game icon show succ", t);
          }).catch(o);
        }).catch(o);
      });
    };
  }, _hideHandler: function (e, t) {
    var n = this;return function () {
      return n._postLog(e, 37), a("game icon hide", e), V.isFun(t) && t();
    };
  }, _create: function (e) {
    if (!this.canUseAd) return null;var t = e.adUnitId,
        n = e.count;if (!t) return null;e.count = n || 1;var r = function (e) {
      return Vr ? wx.createGameIcon(e) : null;
    }(e);return r ? (this.defineProperty(r, "show", this._showHandler.bind(this, r, t)), this.defineProperty(r, "hide", this._hideHandler.bind(this, t)), r) : null;
  }, create: function (e) {
    return this._create(e);
  } }, Fr.prototype = { constructor: Fr, _postLog: function (e, t) {
    var n = Kt(),
        r = n.scene;Lr({ adUnitId: e, channel: (n.custom || {}).channel, scene: r, logType: t });
  }, _showHandler: function (e, t, n) {
    var r = this;return function () {
      return new Promise(function (i, o) {
        if (!V.isFun(n)) return o(mt);r._postLog(t, 29), e.load().then(function () {
          n().then(function (e) {
            i(e), r._postLog(t, 30), a("game portal show succ", t);
          }).catch(o);
        }).catch(o);
      });
    };
  }, _closeHandler: function (e) {
    var t = this;return function () {
      t._postLog(e, 31), a("game portal closed", e);
    };
  }, _offCloseHandler: function (e) {
    return function (t) {
      V.isFun(t) && V.isFun(e) && e(t);
    };
  }, _create: function (e) {
    if (!this.canUseAd) return null;var t = e.adUnitId;if (!t) return null;var n = function (e) {
      return Hr ? wx.createGamePortal(e) : null;
    }(e);return n ? (this.defineProperty(n, "show", this._showHandler.bind(this, n, t)), this.defineProperty(n, "offClose", this._offCloseHandler.bind(this)), n.onClose(this._closeHandler(t)), n) : null;
  }, create: function (e) {
    return this._create(e);
  } };var Gr = { GameBanner: new Mr(), GameIcon: new qr(), GamePortal: new Fr() };function jr(e) {
  return Gr.GameBanner.create(e);
}function Kr(e) {
  return Gr.GameIcon.create(e);
}function Br(e) {
  return Gr.GamePortal.create(e);
}var zr,
    Wr = et("getGameRecorder", "2.8.0"),
    Jr = et("getGameRecorder", "2.10.0"),
    Qr = { getGameRecorder: function () {
    if (!Wr) return null;var e = wx.getGameRecorder();return e && e.isFrameSupported() ? e : null;
  }, createGameRecorderShareButton: function (e) {
    if (!Wr) return null;var t = Object.assign({}, e.share);t.shareConfigId = this._renderShareId(t), t.shareGuid = this._renderShareGuid(t), t.title = this._renderTitle(t), t.query = this._renderQuery(t), e.share = t;var n = wx.createGameRecorderShareButton(e);return n && (n.hide(), V.deepCopyTo(e, n, 0, ["text"])), this._shareStart(t), n;
  }, _renderTitle: function (e) {
    var t = e.title || "";return JSON.stringify(t);
  }, _shareStart: function (e) {
    var t = e.button,
        n = e.bgm,
        r = e.timeRange,
        i = e.volume,
        o = e.atempo,
        s = e.audioMix,
        a = { shareData: e, wx_share_type: 2, extend: { videoShareInfo: JSON.stringify({ button: t, bgm: n, timeRange: r, volume: i, atempo: o, audioMix: s }) } };T.dispatch("EVT_SHARE_START", { wx_share_type: 2 }), setTimeout(function () {
      T.dispatch("EVT_SHARE_END", a);
    }, 0);
  }, _renderShareId: function (e) {
    var t = e || {},
        n = t.query,
        r = void 0 === n ? "" : n,
        i = t.id;return i || V.queryToJson(r).shareConfigId || "";
  }, _renderShareGuid: function (e) {
    var t = e || {},
        n = t.query,
        r = t.shareGuid,
        i = void 0 === r ? "" : r;if (!V.isEmpty(i)) return i;var o = V.queryToJson(n);return V.isEmpty(o.share_guid) ? V.generateGuid() : o.share_guid;
  }, _renderQuery: function (e) {
    var t = e || {},
        n = t.query,
        r = t.shareConfigId,
        i = t.shareGuid,
        o = V.getTimeSec(),
        s = Vn.getSDKUserInfo() || {},
        a = s.h_shareCode,
        c = void 0 === a ? "" : a,
        u = s.channel,
        h = void 0 === u ? "hortor_" : u,
        d = s.origChannel,
        f = void 0 === d ? "" : d,
        l = { channel: V.endsWith(h, "_") ? h : h + "_", h_shareCode: c, timestamp: o, origChannel: f, shareConfigId: r, share_guid: i };return V.addToQuery(n, l);
  } },
    Yr = ["start", "stop", "pause", "resume", "abort", "timeUpdate", "error"];function Xr(e) {
  return this.listener = null, this.timer = null, this.startTime = 0, this.duration = 1e3 * (e.duration || 0), this.recorder = Qr.getGameRecorder(), this.options = e, this;
}function $r() {
  return "boolean" != typeof zr && (zr = null != Qr.getGameRecorder()), zr;
}function Zr() {
  return $r();
}function ei() {
  return function () {
    if (!Jr) return !1;var e = Qr.getGameRecorder();return !!e && e.isAtempoSupported();
  }();
}function ti() {
  return !!(e = Qr.getGameRecorder()) && e.isSoundSupported();var e;
}function ni() {
  return function () {
    if (!Jr) return !1;var e = Qr.getGameRecorder();return !!e && e.isVolumeSupported();
  }();
}function ri(e) {
  return t = e, $r() ? new Xr(t) : null;var t;
}function ii(e) {
  return function (e) {
    return $r() ? Qr.createGameRecorderShareButton(e) : null;
  }(e);
}Xr.prototype = { bindRecordListener: function (e) {
    this.listener = e, this._bindEvent();
  }, unbindRecordListener: function () {
    this._unbindEvent(), this.listener = null;
  }, isValid: function () {
    return null !== this.recorder;
  }, start: function (e) {
    return r(this, void 0, void 0, function () {
      return i(this, function (t) {
        switch (t.label) {case 0:
            return this._checkValid(), e && (this.options = Object.assign({}, e, this.options)), this.duration = this.options && 1e3 * (this.options.duration || 0) || 0, this.bindRecordListener(this.options.listener), [4, this.recorder.start(this.options)];case 1:
            return t.sent(), [2];}
      });
    });
  }, stop: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        switch (e.label) {case 0:
            return this._checkValid(), this._stopMonitor(), [4, this.recorder.stop()];case 1:
            return e.sent(), [2];}
      });
    });
  }, pause: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        switch (e.label) {case 0:
            return this._checkValid(), this._stopMonitor(), this.duration = Math.max(0, this.duration - (V.getTime() - this.startTime)), [4, this.recorder.pause()];case 1:
            return e.sent(), [2];}
      });
    });
  }, resume: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        switch (e.label) {case 0:
            return this._checkValid(), [4, this.recorder.resume()];case 1:
            return e.sent(), [2];}
      });
    });
  }, abort: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        switch (e.label) {case 0:
            return this._checkValid(), this._stopMonitor(), [4, this.recorder.abort()];case 1:
            return e.sent(), [2];}
      });
    });
  }, _bindEvent: function () {
    var e = this;Yr.forEach(function (t) {
      var n = function (n) {
        if (a("GameRecord receive " + t, n), e.listener) {
          switch (t) {case "start":case "resume":
              e.startTime = V.getTime(), e._startMonitor(e.duration);}var r = "on" + t.charAt(0).toUpperCase() + t.slice(1);"function" == typeof e.listener[r] && e.listener[r](n);
        }
      },
          r = e.recorder[t + "Handler"];r && e.recorder.off(t, r), e.recorder[t + "Handler"] = n, e.recorder.on(t, n);
    });
  }, _unbindEvent: function () {
    var e = this;Yr.forEach(function (t) {
      var n = e.recorder[t + "Handler"];e.recorder.off(t, n);
    });
  }, _checkValid: function () {
    if (!this.isValid()) throw this.listener && this.listener.onError && this.listener.onError({ error: mt }), mt;
  }, _startMonitor: function (e) {
    e && (this._stopMonitor(), this.timer = setTimeout(this.stop.bind(this), e));
  }, _stopMonitor: function () {
    this.timer && (clearTimeout(this.timer), this.timer = null);
  } };var oi = et("createUserInfoButton", "2.0.1");var si = null;function ai() {
  return new Promise(function (e, t) {
    wx.getUserInfo({ withCredentials: !0, lang: "zh_CN", success: function (n) {
        if ((n || {}).encryptedData) return e(n);t(ft);
      }, fail: t });
  });
}var ci = function (e) {
  return new Promise(function (t, n) {
    wx.showModal(Object.assign({ success: t, fail: n }, e));
  });
},
    ui = { getStorage: function (e) {
    try {
      return wx.getStorageSync(e);
    } catch (e) {
      return null;
    }
  }, setStorage: function (e, t) {
    if (V.isNull(t)) return !1;try {
      return wx.setStorageSync(e, t), !0;
    } catch (e) {
      return !1;
    }
  }, removeStorage: function (e) {
    try {
      return wx.removeStorageSync(e), !0;
    } catch (e) {
      return !1;
    }
  }, clearStorage: function () {
    try {
      return wx.clearStorageSync(), !0;
    } catch (e) {
      return !1;
    }
  } },
    hi = "sdk_share",
    di = "sdk_video_ad_show",
    fi = "track",
    li = "user_set",
    pi = { ALI: 1, TGA: 2, STD: 4, SDK: 8 },
    gi = "begin",
    vi = "suc",
    mi = "fail",
    _i = "abort",
    yi = "complete",
    wi = { INIT: { topic: "", eventType: fi, eventName: "sdk_init", logType: pi.TGA }, LOGIN: { topic: "", eventType: fi, eventName: "sdk_login", logType: pi.TGA }, AUTH: { topic: "", eventType: li, eventName: "sdk_auth", logType: pi.STD }, OPEN: { topic: "", eventType: fi, eventName: "sdk_open", logType: pi.STD }, CLOSE: { topic: "", eventType: fi, eventName: "sdk_close", logType: pi.STD }, SHARE: { topic: "", eventType: fi, eventName: hi, logType: pi.TGA }, SHARE_END: { topic: "", eventType: fi, eventName: hi, logType: pi.TGA | pi.STD }, VIDEO_AD_SHOW: { topic: "", eventType: fi, eventName: di, logType: pi.TGA }, VIDEO_AD_END: { topic: "", eventType: fi, eventName: di, logType: pi.TGA | pi.STD }, BEAT: { topic: "", eventType: fi, eventName: "sdk_heartbeat", logType: pi.STD }, PROFILE: { topic: "", eventType: li, eventName: "sdk_user_profile", logType: pi.STD }, SET_USER_INFO: { topic: "", eventType: li, eventName: "wx_game_role", logType: pi.STD }, SHARE_FRIEND: { topic: "", eventType: fi, eventName: "sdk_share_to_friend", logType: pi.TGA } },
    Ii = {};Object.keys(wi).map(function (e) {
  Ii[e] = e, wi[e].topic = e;
});var Ti,
    Si = wi,
    bi = Ii;function Ei() {
  var e = Bt(),
      t = e.gameId + "_" + e.env + "_tgaDistinctId",
      n = ui.getStorage(t);return n || (n = V.generateGuid(), ui.setStorage(t, n)), n;
}!function () {
  r(this, void 0, void 0, function () {
    var e;return i(this, function (t) {
      switch (t.label) {case 0:
          return [4, it()];case 1:
          return e = t.sent(), Ti = e.networkType, [2];}
    });
  });
}();var Ci = { getCommonData: function () {
    return r(this, void 0, void 0, function () {
      var e;return i(this, function (t) {
        switch (t.label) {case 0:
            return this.baseData = this._getBaseData(), [4, this._getChangeData()];case 1:
            return (e = t.sent()).clientInfo = Object.assign({}, this.baseData ? this.baseData.clientInfo : {}, e.clientInfo || {}), [2, Object.assign({}, this.baseData, e)];}
      });
    });
  }, getLogDataByTopic: function (e, t) {
    switch (e) {case Si.OPEN.topic:
        return this._getOpenData(t);case Si.AUTH.topic:
        return this._getAuthData(t);case Si.SHARE.topic:
        return this._getShareData(t);case Si.SHARE_END.topic:
        return this._getShareEndData(t);case Si.VIDEO_AD_SHOW.topic:
        return this._getVideoAdPlayData(t);case Si.VIDEO_AD_END.topic:
        return this._getVideoAdEndData(t);case Si.LOGIN.topic:
        return this._getLoginData(t);case Si.BEAT.topic:
        return this._getHeartbeatData(t);case Si.PROFILE.topic:
        return this._getUserProfileData(t);case Si.SET_USER_INFO.topic:
        return this._getGameUserData(t);default:
        return this._getBasicData(t);}
  }, refreshDataByTopic: function (e, t) {
    return e === Si.OPEN.topic ? this._refreshOpenData(t) : t;
  }, _getBaseData: function () {
    var e = Bt(),
        t = e.gameId,
        n = e.gameVersion,
        r = nt();return { gameId: t, gameVersion: n, logSource: "mini-sdk", clientInfo: { clientType: "weixin", version: r.version, language: r.language, model: r.model, system: r.system, brand: r.brand, pixelRatio: r.pixelRatio, screenWidth: r.screenWidth, screenHeight: r.screenHeight, platform: r.platform, sdkVersion: r.SDKVersion, hsdkVersion: r.hortorSDKVersion, trackplatform: "sdk_frontend" } };
  }, _getChangeData: function () {
    return r(this, void 0, void 0, function () {
      var e, t, n, r, o, s, a, c, u;return i(this, function (i) {
        switch (i.label) {case 0:
            return e = Ei(), t = Vn.getSDKUserInfo() || {}, n = t.uniqueId, r = t.userId, o = t.channel, s = t.gameUser, a = void 0 === s ? {} : s, [4, it()];case 1:
            return c = i.sent().networkType, Ti = c, u = Bt().tgaUseDistinctId, [2, { distinctId: e, isForceAccountId: !!u, platformId: n || "", openId: r, channel: o, clientInfo: { netType: Ti }, accountId: a.accountId || "" }];}
      });
    });
  }, _pkg: function (e, t) {
    return { property: e, extra: t };
  }, _getBasicData: function (e) {
    var t = e || {},
        n = t.extend;if ("track" === t.eventType) {
      var r = nt(),
          i = (Kt() || {}).scene,
          o = (r.platform || "").toLowerCase(),
          s = (Ti || "WIFI").toUpperCase();n = Object.assign({ "#scene": i || 0, "#os": { android: "Android", ios: "iOS" }[o] || "", "#os_version": r.system || "", "#screen_height": r.screenHeight || 0, "#network_type": s, trackplatform: "sdk_frontend" }, n || {});
    }return this._pkg(null, n);
  }, _getShareData: function (e) {
    var t = e || {},
        n = t.extend,
        r = t.wx_share_type;return this._pkg({ event_step: gi, wx_share_type: r }, n);
  }, _getShareEndData: function (e) {
    var t = e || {},
        n = t.shareData,
        r = t.shareSuccess,
        i = t.spentTime,
        o = t.extend,
        s = t.wx_share_type,
        a = n || {},
        c = a.title,
        u = a.imageUrl,
        h = a.shareType,
        d = a.shareConfigId,
        f = a.shareGuid,
        l = (a.sequenceInfo || {}).modelId;return this._pkg({ share_guid: f || "", share_content_id: d || "", share_content_title: c || "", share_content_img: u || "", share_content_type: h || "", share_use_time: i || 0, event_state: r ? 0 : 1, event_step: r ? vi : mi, model_algorithm_id: l || "", wx_share_type: s }, o);
  }, _getVideoAdPlayData: function (e) {
    var t = e || {},
        n = t.adUnitId,
        r = t.playSuccess,
        i = t.extend;return this._pkg({ ad_id: n || "", event_step: r ? vi : gi }, i);
  }, _getVideoAdEndData: function (e) {
    var t = e || {},
        n = t.adUnitId,
        r = t.isEnded,
        i = t.playFailCode,
        o = t.spentTime,
        s = t.sequenceInfo,
        a = t.extend,
        c = t.adType,
        u = s || {},
        h = u.modelId,
        d = u.shareGuid,
        f = void 0 === r ? -1 : r ? 0 : 1,
        l = i ? 1004 === i || 1002 === i ? 2 : 1 : 0 === i ? 0 : 1;return this._pkg({ ad_id: n || "", event_state: l, ad_close_type: f, ad_show_time: o || 0, event_step: l ? mi : f > 0 ? _i : yi, model_algorithm_id: h || "", share_guid: d || "", ad_type: c || 0 }, a);
  }, _getGameUserData: function (e) {
    var t = (Kt() || {}).query,
        n = "toNumber",
        r = "toNStr",
        i = { roleId: r, roleName: r, serverId: r, level: n, vipLevel: n, energy: n, money1Consume: n, teamName: r, teamJob: r, roleCtime: n, id: r, wxUnionId: r, extend: "", accountId: r },
        o = { query_string: JSON.stringify(t) },
        s = (e || {}).extend;return Object.keys(i).map(function (t) {
      var n = e[t],
          r = i[t];if (r) {
        var s = "user_" + V.toLine(t);o[s] = V[r](n);
      }
    }), this._pkg(o, s);
  }, _getAuthData: function (e) {
    var t = Vn.getSDKUserInfo() || {},
        n = t.name,
        r = t.sex,
        i = ((Kt() || {}).query || {}).share_guid,
        o = e || {},
        s = o.gender,
        a = void 0 === s ? r : s,
        c = o.nickName,
        u = void 0 === c ? n : c,
        h = o.extend;return this._pkg({ gender: a || 0, nick: u || "", share_guid: i || "" }, h);
  }, _getOpenData: function (e) {
    var t = Vn.getSDKUserInfo() || {},
        n = t.isNewUser,
        r = t.createdAt;n && (a("change local isNewUser to false"), Vn.updateIsNewUser());var i = Kt() || {},
        o = i.query,
        s = i.scene,
        c = i.coldStart,
        u = i.referrerInfo,
        h = (o || {}).share_guid,
        d = e || {},
        f = d.isColdStart,
        l = void 0 === f ? !!c : f,
        p = d.isNewUser,
        g = void 0 === p ? n : p,
        v = d.extend,
        m = Object.assign(o, { referrerInfo: u }),
        _ = this._pkg({ is_new_user: g ? 0 : 1, open_type: l ? 0 : 1, source_type: s || 0, share_guid: h || "", query_string: JSON.stringify(m), reg_time: r }, v);return a("onShowReport", _), _;
  }, _getUserProfileData: function (e) {
    var t = e || {},
        n = t.label,
        r = t.extend;return this._pkg({ wx_tags_general: n || 0 }, r);
  }, _getHeartbeatData: function (e) {
    var t = (e || {}).interval;return this._pkg({ interval: t || 60 });
  }, _getLoginData: function (e) {
    var t = (Vn.getSDKUserInfo() || {}).isNewUser,
        n = Kt() || {},
        r = n.query,
        i = n.scene,
        o = (r || {}).shareConfigId,
        s = e || {},
        a = s.isNewUser,
        c = void 0 === a ? t : a,
        u = s.extend,
        h = this._getBasicData({ eventType: "track" });return u = Object.assign(h.extra || {}, u || {}), this._pkg({ is_new: c, f_share_id: o, wx_scene: i }, u);
  }, _refreshOpenData: function (e) {
    var t = Vn.getSDKUserInfo() || {},
        n = t.isNewUser,
        r = t.createdAt;return e && e.property && (e.property.is_new_user = n ? 0 : 1, e.property.reg_time = r), e;
  } },
    ki = { temps: void 0, report: function (e) {
    var t = this,
        n = this._getTempLogs(e && e.logs);if (this._clearTempLogs(), n && n.length) {
      var r = Kt().query;n.forEach(function (e) {
        e.queryRaw = JSON.stringify(r);
      });var i = O.logHost + "/htlog/api/v1/log",
          o = Object.assign({}, e, { logs: n });D.post(i, o).then(function () {
        a("std log", o);
      }).catch(function (e) {
        e && e.errCode === v.errCode && t._setTempLogs(n);
      });
    }
  }, _getTempLogs: function (e) {
    return void 0 === this.temps && (this.temps = H.get("__sdk_fail_logs")), this._limitLogs((this.temps || []).concat(e || []));
  }, _setTempLogs: function (e) {
    this.temps = this._limitLogs(e), H.set("__sdk_fail_logs", this.temps);
  }, _clearTempLogs: function () {
    this.temps = [], H.set("__sdk_fail_logs", "");
  }, _limitLogs: function (e) {
    var t = (e ? e.length : 0) - 50;return (e || []).slice(t > 0 ? t : 0);
  } },
    Oi = { lastLog: {}, logs: [], reporting: !1, delayCollect: 800, delayReport: 5e3, collect: function (e) {
    if (e) {
      var t = e.topic;if (t) {
        var n = this.lastLog[t],
            r = n && !n.fromPlatform ? n : e;0 === ((n || {}).params || {}).open_type && (r.params.open_type = 0), this.lastLog[t] = r, n || setTimeout(this._reduceLog.bind(this, t), this.delayCollect);
      } else this._reportLog(e);
    }
  }, _reportLog: function (e) {
    var t = e || {},
        n = t.immediateReport,
        r = t.params;r && (this.logs.push(r), this._report(n).catch(function () {}));
  }, _reduceLog: function (e) {
    var t = this.lastLog[e];t && (this._reportLog(t), this.lastLog[e] = null);
  }, _report: function (e) {
    return r(this, void 0, void 0, function () {
      var t, r, o;return i(this, function (i) {
        switch (i.label) {case 0:
            return e ? [3, 3] : this.reporting ? [2] : (this.reporting = !0, "number" == typeof (t = Bt().stdUploadFrequency) && (this.delayReport = t), this.delayReport > 0 ? [4, V.wait(this.delayReport)] : [3, 2]);case 1:
            i.sent(), i.label = 2;case 2:
            this.reporting = !1, i.label = 3;case 3:
            return [4, Ci.getCommonData()];case 4:
            return r = i.sent(), o = this.logs, ki.report(n(n({}, r), { logs: o })), this.logs = [], [2];}
      });
    });
  } };function Ai(e, t, n) {
  return this.guid = V.generateGuid(), this.opt = e, this.topic = e.topic, this.fromPlatform = !!n, this._init(t), this;
}Ai.prototype = { _init: function (e) {
    var t = { immediateReport: !1, stopWhenShare: !1, callAfterLogin: !1 };switch (this.topic) {case Si.CLOSE.topic:
        t.stopWhenShare = !0, t.immediateReport = !0;break;case Si.OPEN.topic:
        t.stopWhenShare = !0, Bt().tgaUseDistinctId || (t.callAfterLogin = this.fromPlatform);}this.config = t, this.data = {}, this.createAt = V.getTime(), this._setData(e);
  }, getConfig: function () {
    return this.config;
  }, start: function () {
    this.startTime = V.getTime();
  }, stop: function (e) {
    e && (e.spentTime = this.startTime ? Math.max(0, V.getTime() - this.startTime) : 0), this._setData(e);
  }, refreshData: function () {
    return this.data = Ci.refreshDataByTopic(this.topic, this.data), this;
  }, _setData: function (e) {
    var t = Ci.getLogDataByTopic(this.topic, e),
        n = t.property,
        r = t.extra,
        i = this.data,
        o = i.property,
        s = i.extra;return n && (this.data.property = Object.assign(o || {}, n)), r && (this.data.extra = Object.assign(s || {}, r)), this;
  }, _getData: function () {
    var e = this.opt,
        t = e.eventName,
        n = e.eventType,
        r = e.logType;return Object.assign({}, this.data, { logId: this.guid, logType: r, eventType: n, eventName: t, timestamp: this.createAt || 0 });
  }, toLogData: function () {
    var e = this._getData(),
        t = this.getConfig().immediateReport;return { topic: this.topic, fromPlatform: this.fromPlatform, immediateReport: t, params: e };
  } };var xi = {},
    Di = function (e, t) {
  xi[e] = t;
},
    Ri = function (e) {
  return !!xi[e];
},
    Pi = [],
    Ui = pi,
    Li = bi;function Ni() {
  T.once("EVT_SDK_READY", Vi.bind(this));
}function Vi() {
  T.on("EVT_SET_GAMEUSER", function (e) {
    Mi(bi.SET_USER_INFO, e.data);
  });var e = Bt(),
      t = e.autoUploadSDTLog,
      n = e.stdAutoUpload,
      r = e.tgaAutoUpload,
      i = e.stdHeartBeatInterval;if (!1 !== r || n || t) {
    if (Hi(Si.INIT, { eventType: "track", eventName: "sdk_init" }, !0), T.on("EVT_ON_SHOW", function () {
      Hi(Si.OPEN, null, !0);
    }), T.on("EVT_ON_HIDE", function () {
      Hi(Si.CLOSE, null, !0);
    }), T.on("EVT_SHARE_START", function (e) {
      Hi(Si.SHARE, e.data, !0);
    }), T.on("EVT_SHARE_END", function (e) {
      Hi(Si.SHARE_END, e.data, !0);
    }), T.on("EVT_SHARE_TIME_START", function (e) {
      Hi(Si.SHARE, e.data, !0);
    }), T.on("EVT_SHARE_TIME_END", function (e) {
      Hi(Si.SHARE_END, e.data, !0);
    }), T.on("EVT_VIDEO_AD_PLAY_START", function (e) {
      Hi(Si.VIDEO_AD_SHOW, e.data, !0);
    }), T.on("EVT_VIDEO_AD_PLAY_FINISH", function (e) {
      Hi(Si.VIDEO_AD_END, e.data, !0);
    }), T.on("EVT_INTERSTITIAL_AD_SHOW", function (e) {
      Hi(Si.VIDEO_AD_END, e.data, !0);
    }), T.on("EVT_ON_AUTH", function (e) {
      Hi(Si.AUTH, e.data, !0);
    }), T.once("EVT_ON_LOGIN", function (e) {
      Hi(Si.LOGIN, e.data, !0), new Promise(function (e, t) {
        et("getUserGameLabel", "2.9.3") ? wx.getUserGameLabel({ success: e, fail: t }) : t(mt);
      }).then(function (e) {
        Hi(Si.PROFILE, e, !0);
      }).catch(function (e) {});
    }), i) {
      var o = i - 0 || 60,
          s = { interval: o };isNaN(o) || V.resetInterval(function () {
        Hi(Si.BEAT, s, !0);
      }, 1e3 * o);
    }T.on("EVT_SHARE_FRIEND", function (e) {
      Hi(Si.SHARE_FRIEND, { extend: e.data }, !0);
    });
  }
}function Hi(e, t, n) {
  var r = pi.TGA,
      i = pi.STD,
      o = Bt(),
      s = o.autoUploadSDTLog,
      a = o.stdAutoUpload,
      c = o.tgaAutoUpload,
      u = e.logType;a || s || (u = (u | i) === u ? u ^ i : u), !1 === c && (u = (u | r) === u ? u ^ r : u), u && (e.logType = u, qi(e, t, n));
}function Mi(e, t) {
  var n = Si[e];n && qi(Object.assign({}, n, t || {}), t);
}function qi(e, t, n) {
  var r = new Ai(e, t, n),
      i = r.getConfig(),
      o = i.stopWhenShare,
      s = i.callAfterLogin;Ri("sharing") && o || (s ? function (e) {
    if (!V.isFun(e)) return;var t = Vn.getSDKUserInfo() || {},
        n = t.uniqueId;if (t.userId && n) return void e();Pi.push(e), T.once("EVT_ON_LOGIN", function (e) {
      Pi.forEach(function (t) {
        return t(e);
      }), Pi = [];
    });
  }(function () {
    Oi.collect(r.refreshData().toLogData());
  }) : Oi.collect(r.toLogData()));
}Ni();var Fi,
    Gi = Li;function ji(e) {
  return Mi(e.topic, e.data);
}function Ki(e) {
  return ji({ topic: Li.SET_USER_INFO, data: e });
}function Bi() {
  return Ui;
}function zi(e) {
  try {
    return qi(e, e, !1);
  } catch (e) {}
}function Wi(e, t) {
  return r(this, void 0, void 0, function () {
    var n;return i(this, function (r) {
      switch (r.label) {case 0:
          return T.dispatch("EVT_LOGIN_START"), zi({ eventName: "sdk_login_frontend", eventType: "track", logType: 2 }), [4, Yi(e, t, !1)];case 1:
          return n = r.sent(), vo(3), T.dispatch("EVT_ON_LOGIN", n), [2, n.encryptUserInfo];}
    });
  });
}function Ji(e) {
  var t = Bt().getUserInfoBtn,
      n = function (e) {
    return oi ? wx.createUserInfoButton(Object.assign({}, { lang: "zh_CN" }, e)) : null;
  }(e || t);return n && n.onTap(function (e) {
    var t = e || {},
        n = t.userInfo,
        r = t.encryptedData,
        i = n || {},
        o = i.nickName,
        s = i.gender;o && T.dispatch("EVT_ON_AUTH", { nickName: o, gender: s }), r || (T.dispatch("EVT_AUTH_DENY"), vo(10, { errMsg: e.errMsg }));
  }), n;
}function Qi() {
  return r(this, void 0, void 0, function () {
    return i(this, function (e) {
      switch (e.label) {case 0:
          return e.trys.push([0, 5,, 6]), oi ? [4, new Promise(function (e, t) {
            Q().then(function (t) {
              e(t.authSetting["scope.userInfo"]);
            }).catch(function (e) {
              t(e);
            });
          })] : [3, 2];case 1:case 3:
          return [2, e.sent()];case 2:
          return [4, new Promise(function (e, t) {
            wx.authorize({ scope: "scope.userInfo", success: function () {
                e(!0);
              }, fail: t });
          })];case 4:
          return [3, 6];case 5:
          return a("checkAuth fail", e.sent()), [2, !1];case 6:
          return [2];}
    });
  });
}function Yi(e, t, n) {
  return r(this, void 0, void 0, function () {
    var r, o, s, c, u, h, d, f, l, p;return i(this, function (i) {
      switch (i.label) {case 0:
          return i.trys.push([0, 6,, 7]), [4, Xi(t, n)];case 1:
          return r = i.sent(), o = Bt().gameId, r && (s = r.userSdk) && s.gameId === o ? (a("storageInfo", r), [2, r]) : (T.dispatch("EVT_TRACK_LOGIN", { stage: "开始请求微信登录", storageInfo: r, req: { btnConfig: e, isWeak: t, forceAuth: n } }), [4, ro()]);case 2:
          return c = i.sent(), T.dispatch("EVT_TRACK_LOGIN", { stage: "微信登录返回结果", code: c, req: { btnConfig: e, isWeak: t, forceAuth: n } }), u = new Date().getTime(), T.dispatch("EVT_TRACK_LOGIN", { stage: "开始请求平台登录", startTime: u, req: { btnConfig: e, isWeak: t, forceAuth: n } }), [4, io(c, t, n)];case 3:
          return h = i.sent(), d = new Date().getTime(), f = d - u, l = (h || {}).userSdk, T.dispatch("EVT_TRACK_LOGIN", { stage: "平台登录返回结果", platUserInfo: h, costTime: f, req: { btnConfig: e, isWeak: t, forceAuth: n } }), l && l.isAuth ? [2, h] : [4, oo(e)];case 4:
          return [4, so(i.sent())];case 5:
          return [2, i.sent()];case 6:
          throw p = i.sent(), T.dispatch("EVT_TRACK_LOGIN", { stage: "登录失败", error: p, req: { btnConfig: e, isWeak: t, forceAuth: n } }), V.pkgError(p, g);case 7:
          return [2];}
    });
  });
}function Xi(e, t) {
  return r(this, void 0, void 0, function () {
    var n;return i(this, function (r) {
      switch (r.label) {case 0:
          return t ? [2, null] : (n = Vn.getUserInfo(e)) ? [4, no()] : [2, null];case 1:
          return [2, r.sent() ? n : null];}
    });
  });
}var $i = null,
    Zi = null,
    eo = null;function to() {
  return null === eo && (eo = setTimeout(function () {
    $i = null, window.clearTimeout(eo), eo = null;
  }, 3e3)), null === $i ? new Promise(function (e, t) {
    (si ? Promise.resolve(si) : new Promise(function (e, t) {
      wx.checkSession({ success: function () {
          si = !0, e(!0);
        }, fail: function () {
          t(!1);
        } });
    })).then(function () {
      $i = !0, e(!0);
    }).catch(function (e) {
      Zi = e, $i = !1, t(e);
    });
  }) : !1 === $i ? Promise.reject(Zi) : Promise.resolve(!0);
}function no() {
  return r(this, void 0, void 0, function () {
    var e;return i(this, function (t) {
      switch (t.label) {case 0:
          return t.trys.push([0, 2,, 3]), [4, to()];case 1:
          return t.sent(), T.dispatch("EVT_SESSION", {}), [2, !0];case 2:
          return u("session fail", e = t.sent()), T.dispatch("EVT_SESSION", { err: e }), [2, !1];case 3:
          return [2];}
    });
  });
}function ro() {
  return r(this, void 0, void 0, function () {
    var e, t;return i(this, function (n) {
      switch (n.label) {case 0:
          return n.trys.push([0, 2,, 3]), [4, new Promise(function (e, t) {
            wx.login({ success: function (n) {
                var r = (n || {}).code;r ? e(r) : t(at);
              }, fail: function (e) {
                t(e);
              } });
          })];case 1:
          return e = n.sent(), T.dispatch("EVT_WX_LOGIN", { code: e }), [2, e];case 2:
          throw t = n.sent(), T.dispatch("EVT_WX_LOGIN", { err: t }), V.pkgError(t, at);case 3:
          return [2];}
    });
  });
}function io(e, t, n) {
  return r(this, void 0, void 0, function () {
    var r, o, s, c, d, f, l, p, g, m, _, y, w, I, T, S, b, E, C, k, A, x, R;return i(this, function (i) {
      switch (i.label) {case 0:
          r = Bt(), o = r.gameId, s = r.tgaUseDistinctId, c = Kt(), d = c.custom, f = c.query, l = c.scene, p = c.referrerInfo, g = "", m = "", p && p.extraData && (g = p.extraData.origGameId || "", m = p.extraData.origUniqueId || ""), y = (_ = d || {}).channel, w = _.origChannel, I = _.pageQuery, T = _.shareConfigId, S = _.activityId, b = _.h_shareCode, E = _.boxCode, C = "";try {
            C = JSON.stringify(c);
          } catch (e) {
            u("launchOptions error", e);
          }k = { origGameId: g, origUniqueId: m, version: h, gameId: o, channel: y, origChannel: w, query: I, queryRaw: JSON.stringify(f), shareConfigId: T, activityId: S, h_shareCode: b, boxCode: E, isWeak: t, forceAuth: n, code: e, sysInfo: rt(), scene: l, rawData: C, useDistinctId: s, distinctId: Ei() }, i.label = 1;case 1:
          return i.trys.push([1, 3,, 4]), A = O.getHost() + "/mini/api/v1/code", a("login code params", k), [4, D.postForm(A, k)];case 2:
          return a("entry login", x = i.sent().data), uo(x), Vn.setTempUser(x), [2, x];case 3:
          throw u("entry err", R = i.sent()), Vn.clearUserInfo(), V.pkgError(R, v);case 4:
          return [2];}
    });
  });
}function oo(e) {
  return r(this, void 0, void 0, function () {
    var t;return i(this, function (n) {
      switch (n.label) {case 0:
          return t = null, oi ? [4, ao(e)] : [3, 2];case 1:
          return t = n.sent(), [3, 4];case 2:
          return [4, po()];case 3:
          t = n.sent(), n.label = 4;case 4:
          return a("fetch userinfo", t), [2, t];}
    });
  });
}function so(e) {
  return r(this, void 0, void 0, function () {
    var t, n, r, o, s, a, c, h, d, f, l;return i(this, function (i) {
      switch (i.label) {case 0:
          n = (t = e || {}).encryptedData, r = t.iv, o = Vn.getTempUser() || {}, s = o.userId, a = o.uniqueId, c = Bt().gameId, h = { entryAlias: "minisdk", gameId: c, userId: s, uniqueId: a, encryptedData: n, iv: r }, i.label = 1;case 1:
          return i.trys.push([1, 3,, 4]), d = O.getHost() + "/mini/api/v1/userinfo", [4, D.postForm(d, h)];case 2:
          if (!(f = i.sent().data) || !f.encryptUserInfo) throw v;return uo(f), [2, f];case 3:
          throw u("_postUserInfo err", l = i.sent()), V.pkgError(l, v);case 4:
          return [2];}
    });
  });
}function ao(e) {
  return r(this, void 0, void 0, function () {
    var t, n, r, o, s, a;return i(this, function (i) {
      switch (i.label) {case 0:
          return [4, Qi()];case 1:
          return i.sent() ? [4, co()] : [3, 3];case 2:
          return n = i.sent(), [3, 4];case 3:
          n = null, i.label = 4;case 4:
          if (t = n) return [2, t];if (T.dispatch("EVT_NEED_AUTH"), r = Bt().getUserInfoBtn, s = (o = e || {}).useGameBtn, a = o.config, s || !a && !r) throw dt;return [4, ho(e)];case 5:
          return [2, i.sent()];}
    });
  });
}function co() {
  return r(this, void 0, void 0, function () {
    return i(this, function (e) {
      switch (e.label) {case 0:
          return e.trys.push([0, 2,, 3]), [4, ai()];case 1:
          return [2, e.sent()];case 2:
          return e.sent(), [2, null];case 3:
          return [2];}
    });
  });
}function uo(e) {
  var t = e || {},
      n = t.encryptUserInfo,
      r = t.userSdk,
      i = Bt().gameId;n && (!function () {
    if (Vn.getUserInfo(!0)) return;var e = Kt() || {},
        t = e.custom || {},
        n = t.shareConfigId,
        r = t.activityId,
        i = V.copy(e, ["custom"]);vo(1, { content: i, shareConfigId: n, activityId: r });
  }(), r && (r.gameId = i), Vn.setUserInfo(e));
}function ho(e) {
  var t = e || {},
      n = t.config,
      r = t.onTap,
      i = t.onShow,
      o = t.stayOnDeny;return new Promise(function (e, t) {
    var s = fo(n);if (!s) throw mt;s.onTap(function (n) {
      var i = (n || {}).encryptedData;i ? e(n) : o || t(ht), r && r(n), !i && o || lo();
    }), s.show(), i && i();
  });
}function fo(e) {
  return lo(), Fi = Ji(e);
}function lo() {
  Fi && (Fi.hide(), Fi.destroy(), Fi = null);
}function po() {
  return r(this, void 0, void 0, function () {
    var e;return i(this, function (t) {
      switch (t.label) {case 0:
          return [4, Qi()];case 1:
          return (e = t.sent()) ? [3, 3] : [4, go()];case 2:
          e = t.sent(), t.label = 3;case 3:
          if (!e) throw ht;return [4, ai()];case 4:
          return [2, t.sent()];}
    });
  });
}function go() {
  return r(this, void 0, void 0, function () {
    return i(this, function (e) {
      switch (e.label) {case 0:
          return e.trys.push([0, 4,, 5]), [4, new Promise(function (e, t) {
            wx.openSetting({ success: function (t) {
                e(t.authSetting["scope.userInfo"]);
              }, fail: t });
          })];case 1:
          return e.sent() ? [2, !0] : [4, ci({ title: "提示", content: "需要开启访问用户信息权限", showCancel: !0, cancelText: "知道了", confirmText: "去设置" })];case 2:
          return e.sent().confirm ? [4, go()] : [2, !1];case 3:
          return [2, e.sent()];case 4:
          return a("low auth fail", e.sent()), [2, !1];case 5:
          return [2];}
    });
  });
}function vo(e, t) {
  var n = Vn.getTempUser() || {},
      r = n.userId,
      i = n.uniqueId,
      o = Kt(),
      s = "";try {
    s = JSON.stringify(o);
  } catch (e) {
    u("_postLog err", e);
  }var a = ui.getStorage("__sdk_postLog_rawData_logType_" + e + "__");a && a === s ? s = "" : ui.setStorage("__sdk_postLog_rawData_logType_" + e + "__", s);var c = o.custom,
      h = o.scene,
      d = c || {},
      f = o.coldStart ? 0 : 1,
      l = { logType: e, channel: d.channel, origChannel: d.origChannel, shareConfigId: d.shareConfigId, scene: h, userId: r, uniqueId: i };3 === e && (l.open_type = f), s && (l.rawData = s);var p = t ? Object.assign(l, t) : l;T.dispatch("EVT_REPORT_LOG", { log: p });
}function mo(e) {
  return Ji(e);
}function _o(e) {
  return Wi(e, !1);
}function yo(e) {
  return Wi(e, !0);
}function wo(e) {
  return function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return T.dispatch("EVT_UPDATE_START"), [4, Yi(e, !1, !0)];case 1:
            return t = n.sent(), vo(3), T.dispatch("EVT_ON_UPDATE", t), [2, t.encryptUserInfo];}
      });
    });
  }(e);
}function Io(e) {
  var t;e = Bn(e, "registerOnLogin"), t = e.listener, T.on("EVT_ON_LOGIN", t);
}function To(e) {
  return Fi && !e ? Fi : fo(e);
}function So(e) {
  !function (e) {
    Vn.setGameUser(e);
  }(e);
}var bo = function (e) {
  return new Promise(function (t, n) {
    wx.requestMidasPayment(Object.assign({}, e, { success: t, fail: n }));
  });
};function Eo(e) {
  try {
    return JSON.stringify(e);
  } catch (e) {
    return "";
  }
}Ni();var Co = 1,
    ko = 3,
    Oo = "",
    Ao = 0;function xo(e, t, n) {
  T.dispatch("EVT_REPORT_LOG", { log: { orderId: t, logType: e, errMsg: n } });
}function Do(e) {
  return r(this, void 0, void 0, function () {
    var t, n, r, o;return i(this, function (i) {
      switch (i.label) {case 0:
          if (t = e.orderId, n = e.midashiPayInfo, !t) throw lt;xo(13, t, "[SDK] call midashi: " + t), i.label = 1;case 1:
          return i.trys.push([1, 4,, 5]), [4, bo(n)];case 2:
          return i.sent(), xo(8, t, "[SDK] midashi success: " + t), o = O.getHost() + "/mini/api/v1/pay/callback", [4, D.post(o, { orderId: t })];case 3:
          if ("success" !== i.sent().data) throw ut;return xo(9, t, "[SDK] MinigameCallback Success: " + t), [3, 5];case 4:
          throw r = i.sent(), xo(7, t, JSON.stringify(r)), o = O.getHost() + "/mini/api/v1/order/cancel", D.post(o, { orderId: t }).catch(function () {}), T.dispatch("EVY_PAY_FAIL", { payType: 0, err: r }), r;case 5:
          return [2];}
    });
  });
}function Ro(e) {
  return r(this, void 0, void 0, function () {
    var t, n, r;return i(this, function (i) {
      switch (i.label) {case 0:
          if (t = e.orderId, n = e.jumpType, !t || "number" != typeof n) throw lt;i.label = 1;case 1:
          return i.trys.push([1, 7,, 8]), n !== Co ? [3, 3] : [4, Po(e)];case 2:
          return [2, i.sent()];case 3:
          return n !== ko ? [3, 5] : [4, Lo(e)];case 4:
          return [2, i.sent()];case 5:
          return [4, Uo(e)];case 6:
          return [2, i.sent()];case 7:
          throw r = i.sent(), T.dispatch("EVY_PAY_FAIL", { payType: n, err: r }), xo(7, t, JSON.stringify(r)), r;case 8:
          return [2];}
    });
  });
}function Po(e) {
  return r(this, void 0, void 0, function () {
    var t, n, r, o, s, c, u, h, d, f;return i(this, function (i) {
      switch (i.label) {case 0:
          n = (t = e || {}).orderId, r = t.appId, o = t.path, s = t.extraData, c = t.envVersion, u = void 0 === c ? "release" : c, h = encodeURIComponent("o=" + n), d = o || "/pages/index/index?scene=" + h, i.label = 1;case 1:
          return i.trys.push([1, 3,, 7]), [4, nr.navigateToMiniProgram({ appId: r, path: d, extraData: s, envVersion: u })];case 2:
          return [2, i.sent()];case 3:
          if (!(f = i.sent()) || !f.isCancel) return [3, 4];throw ct;case 4:
          return a("jumpAppPay fail", f), [4, Uo(e)];case 5:
          return [2, i.sent()];case 6:
          return [3, 7];case 7:
          return [2];}
    });
  });
}function Uo(e) {
  return r(this, void 0, void 0, function () {
    var t, n;return i(this, function (r) {
      switch (r.label) {case 0:
          return t = e.orderId, n = O.getHost() + "/mini/api/v1/minicode/create2?orderId=" + t, [4, nr.previewImage(n)];case 1:
          return [2, r.sent()];}
    });
  });
}function Lo(e) {
  var t = e.orderId;Oo = t;var n = (Vn.getSDKUserInfo() || {}).uniqueId,
      o = Bt().gameId;return new Promise(function (s, a) {
    var c = O.getHost() + "/mini/api/v1/order/minigame-ios/pay?orderId=" + t + "&uniqueId=" + n + "&gameId=" + o;D.get(c).then(function (n) {
      var o;if (0 === (null === (o = null == n ? void 0 : n.meta) || void 0 === o ? void 0 : o.errCode) && (null == n ? void 0 : n.data)) {
        var c = n.data,
            u = c.imgUrl,
            h = c.title,
            d = c.money,
            f = c.host,
            l = c.previewImg;Ao = d;var p = e.showJumpCustomerTip;(function (e) {
          var t = e.orderId,
              n = e.imgUrl,
              o = e.title,
              s = e.money,
              a = e.host,
              c = e.previewImg,
              u = e.showJumpCustomerTip;return r(this, void 0, void 0, function () {
            return i(this, function (e) {
              return [2, new Promise(function (e, r) {
                var i = function (e, r, i) {
                  if (void 0 === i && (i = !1), "object" == typeof i && (i = i.isCancel), i) {
                    var u = "tip cancel";No({ state: "sdkfail", errMsg: u }), No({ state: "dialogue1cancel" }), r({ errMsg: u });
                  } else {
                    No({ state: "dialogue1confirm" });var h = "index?min_h5_orderInfo=" + JSON.stringify({ host: encodeURIComponent(a), money: s, orderId: t, previewImg: c });Dr.openCustomerServiceConversation({ sessionFrom: h, showMessageCard: !0, sendMessageTitle: o, sendMessageImg: n, sendMessagePath: h }).then(function (t) {
                      No({ state: "sdksuccess" }), No({ state: "dialogue2confirm" }), e({ msg: "跳转客服会话成功" });
                    }).catch(function (e) {
                      No({ state: "dialogue2cancel" }), No({ state: "sdkfail", errMsg: "open " + Eo(e) }), r(e);
                    });
                  }
                };"function" == typeof u ? u(function (t) {
                  return i(e, r, t);
                }) : wx.showModal({ title: "", content: "即将进入客服会话。在客服会话中点击右下角图片即可开始充值", confirmText: "去充值", success: function (t) {
                    if (t.confirm) i(e, r);else if (t.cancel) {
                      var n = "modal cancel";No({ state: "sdkfail", errMsg: n }), r({ errMsg: n });
                    }
                  }, fail: function (e) {
                    No({ state: "sdkfail", errMsg: "modal " + Eo(e) }), r(e);
                  } });
              })];
            });
          });
        })({ orderId: t, imgUrl: u, title: h, money: d, host: f, previewImg: l, showJumpCustomerTip: p }).then(function (e) {
          s(e);
        }).catch(function (e) {
          a(e);
        });
      } else a(n);
    }).catch(function (e) {
      a(e);
    });
  });
}function No(e) {
  var t = e.state,
      n = e.errMsg;!function (e) {
    var t = e.eventName,
        n = void 0 === t ? "" : t,
        r = e.data,
        i = void 0 === r ? {} : r,
        o = e.eventType,
        s = void 0 === o ? "track" : o;i.sdk_trackplatform = "sdk_c";var a = { eventName: n, extend: i, logType: 2, eventType: s };qi(a, a, !1);
  }({ eventName: "sdk_h5_pay", data: { pay_state: t, orderId: Oo, pay_amount: Ao, pay_callback: void 0 === n ? "" : n } });
}function Vo(e) {
  return zi({ eventName: "sdk_paystart", eventType: "track", logType: 2, extend: e }), new Promise(function (t, n) {
    Do(e).then(function (n) {
      zi({ eventName: "sdk_payend_frontend", eventType: "track", logType: 2, extend: { payData: e, payRes: n } }), t(n);
    }).catch(function (t) {
      zi({ eventName: "sdk_payend_frontend", eventType: "track", logType: 2, extend: { payData: e, payErr: t } }), n(t);
    });
  });
}function Ho(e) {
  return zi({ eventName: "sdk_paystart", eventType: "track", logType: 2, extend: e }), new Promise(function (t, n) {
    Ro(e).then(function (n) {
      zi({ eventName: "sdk_payend_frontend", eventType: "track", logType: 2, extend: { payData: e, payRes: n } }), t(n);
    }).catch(function (t) {
      zi({ eventName: "sdk_payend_frontend", eventType: "track", logType: 2, extend: { payData: e, payErr: t } }), n(t);
    });
  });
}function Mo(e) {
  return zi({ eventName: "sdk_paystart", eventType: "track", logType: 2, extend: e }), new Promise(function (t, n) {
    (function (e) {
      try {
        var t = nt();return t && t.system && t.system.toLowerCase() ? t.system.toLowerCase().startsWith("ios") ? Ro(e) : Do(e) : Promise.reject({ errMsg: "无法判断系统类型" });
      } catch (e) {
        return Promise.reject(e);
      }
    })(e).then(function (n) {
      zi({ eventName: "sdk_payend_frontend", eventType: "track", logType: 2, extend: { payData: e, payRes: n } }), t(n);
    }).catch(function (t) {
      zi({ eventName: "sdk_payend_frontend", eventType: "track", logType: 2, extend: { payData: e, payErr: t } }), n(t);
    });
  });
}var qo = { _canUseRecorder: et("getRecorderManager", "1.6.0"), getRecorder: function () {
    if (this._canUseRecorder) return wx.getRecorderManager();
  } },
    Fo = function (e) {
  return new Promise(function (t, n) {
    wx.uploadFile({ url: e.url, filePath: e.filePath, name: e.fileName, formData: e.formData, success: function (e) {
        t(e);
      }, fail: function (e) {
        n(e);
      } });
  });
},
    Go = function () {
  function e(e) {
    return encodeURIComponent(e).replace(/!/g, "%21").replace(/'/g, "%27").replace(/\(/g, "%28").replace(/\)/g, "%29").replace(/\*/g, "%2A");
  }var t = t || function (e, t) {
    var n = {},
        r = n.lib = {},
        i = function () {},
        o = r.Base = { extend: function (e) {
        i.prototype = this;var t = new i();return e && t.mixIn(e), t.hasOwnProperty("init") || (t.init = function () {
          t.$super.init.apply(this, arguments);
        }), t.init.prototype = t, t.$super = this, t;
      }, create: function () {
        var e = this.extend();return e.init.apply(e, arguments), e;
      }, init: function () {}, mixIn: function (e) {
        for (var t in e) e.hasOwnProperty(t) && (this[t] = e[t]);e.hasOwnProperty("toString") && (this.toString = e.toString);
      }, clone: function () {
        return this.init.prototype.extend(this);
      } },
        s = r.WordArray = o.extend({ init: function (e, t) {
        e = this.words = e || [], this.sigBytes = null != t ? t : 4 * e.length;
      }, toString: function (e) {
        return (e || c).stringify(this);
      }, concat: function (e) {
        var t = this.words,
            n = e.words,
            r = this.sigBytes;if (e = e.sigBytes, this.clamp(), r % 4) for (var i = 0; i < e; i++) t[r + i >>> 2] |= (n[i >>> 2] >>> 24 - i % 4 * 8 & 255) << 24 - (r + i) % 4 * 8;else if (65535 < n.length) for (i = 0; i < e; i += 4) t[r + i >>> 2] = n[i >>> 2];else t.push.apply(t, n);return this.sigBytes += e, this;
      }, clamp: function () {
        var t = this.words,
            n = this.sigBytes;t[n >>> 2] &= 4294967295 << 32 - n % 4 * 8, t.length = e.ceil(n / 4);
      }, clone: function () {
        var e = o.clone.call(this);return e.words = this.words.slice(0), e;
      }, random: function (t) {
        for (var n = [], r = 0; r < t; r += 4) n.push(4294967296 * e.random() | 0);return new s.init(n, t);
      } }),
        a = n.enc = {},
        c = a.Hex = { stringify: function (e) {
        var t = e.words;e = e.sigBytes;for (var n = [], r = 0; r < e; r++) {
          var i = t[r >>> 2] >>> 24 - r % 4 * 8 & 255;n.push((i >>> 4).toString(16)), n.push((15 & i).toString(16));
        }return n.join("");
      }, parse: function (e) {
        for (var t = e.length, n = [], r = 0; r < t; r += 2) n[r >>> 3] |= parseInt(e.substr(r, 2), 16) << 24 - r % 8 * 4;return new s.init(n, t / 2);
      } },
        u = a.Latin1 = { stringify: function (e) {
        var t = e.words;e = e.sigBytes;for (var n = [], r = 0; r < e; r++) n.push(String.fromCharCode(t[r >>> 2] >>> 24 - r % 4 * 8 & 255));return n.join("");
      }, parse: function (e) {
        for (var t = e.length, n = [], r = 0; r < t; r++) n[r >>> 2] |= (255 & e.charCodeAt(r)) << 24 - r % 4 * 8;return new s.init(n, t);
      } },
        h = a.Utf8 = { stringify: function (e) {
        try {
          return decodeURIComponent(escape(u.stringify(e)));
        } catch (e) {
          throw Error("Malformed UTF-8 data");
        }
      }, parse: function (e) {
        return u.parse(unescape(encodeURIComponent(e)));
      } },
        d = r.BufferedBlockAlgorithm = o.extend({ reset: function () {
        this._data = new s.init(), this._nDataBytes = 0;
      }, _append: function (e) {
        "string" == typeof e && (e = h.parse(e)), this._data.concat(e), this._nDataBytes += e.sigBytes;
      }, _process: function (t) {
        var n = this._data,
            r = n.words,
            i = n.sigBytes,
            o = this.blockSize,
            a = i / (4 * o);if (t = (a = t ? e.ceil(a) : e.max((0 | a) - this._minBufferSize, 0)) * o, i = e.min(4 * t, i), t) {
          for (var c = 0; c < t; c += o) this._doProcessBlock(r, c);c = r.splice(0, t), n.sigBytes -= i;
        }return new s.init(c, i);
      }, clone: function () {
        var e = o.clone.call(this);return e._data = this._data.clone(), e;
      }, _minBufferSize: 0 });r.Hasher = d.extend({ cfg: o.extend(), init: function (e) {
        this.cfg = this.cfg.extend(e), this.reset();
      }, reset: function () {
        d.reset.call(this), this._doReset();
      }, update: function (e) {
        return this._append(e), this._process(), this;
      }, finalize: function (e) {
        return e && this._append(e), this._doFinalize();
      }, blockSize: 16, _createHelper: function (e) {
        return function (t, n) {
          return new e.init(n).finalize(t);
        };
      }, _createHmacHelper: function (e) {
        return function (t, n) {
          return new f.HMAC.init(e, n).finalize(t);
        };
      } });var f = n.algo = {};return n;
  }(Math);!function () {
    var e = t,
        n = (o = e.lib).WordArray,
        r = o.Hasher,
        i = [],
        o = e.algo.SHA1 = r.extend({ _doReset: function () {
        this._hash = new n.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
      }, _doProcessBlock: function (e, t) {
        for (var n = this._hash.words, r = n[0], o = n[1], s = n[2], a = n[3], c = n[4], u = 0; 80 > u; u++) {
          if (16 > u) i[u] = 0 | e[t + u];else {
            var h = i[u - 3] ^ i[u - 8] ^ i[u - 14] ^ i[u - 16];i[u] = h << 1 | h >>> 31;
          }h = (r << 5 | r >>> 27) + c + i[u], h = 20 > u ? h + (1518500249 + (o & s | ~o & a)) : 40 > u ? h + (1859775393 + (o ^ s ^ a)) : 60 > u ? h + ((o & s | o & a | s & a) - 1894007588) : h + ((o ^ s ^ a) - 899497514), c = a, a = s, s = o << 30 | o >>> 2, o = r, r = h;
        }n[0] = n[0] + r | 0, n[1] = n[1] + o | 0, n[2] = n[2] + s | 0, n[3] = n[3] + a | 0, n[4] = n[4] + c | 0;
      }, _doFinalize: function () {
        var e = this._data,
            t = e.words,
            n = 8 * this._nDataBytes,
            r = 8 * e.sigBytes;return t[r >>> 5] |= 128 << 24 - r % 32, t[14 + (r + 64 >>> 9 << 4)] = Math.floor(n / 4294967296), t[15 + (r + 64 >>> 9 << 4)] = n, e.sigBytes = 4 * t.length, this._process(), this._hash;
      }, clone: function () {
        var e = r.clone.call(this);return e._hash = this._hash.clone(), e;
      } });e.SHA1 = r._createHelper(o), e.HmacSHA1 = r._createHmacHelper(o);
  }(), function () {
    var e = t,
        n = e.enc.Utf8;e.algo.HMAC = e.lib.Base.extend({ init: function (e, t) {
        e = this._hasher = new e.init(), "string" == typeof t && (t = n.parse(t));var r = e.blockSize,
            i = 4 * r;t.sigBytes > i && (t = e.finalize(t)), t.clamp();for (var o = this._oKey = t.clone(), s = this._iKey = t.clone(), a = o.words, c = s.words, u = 0; u < r; u++) a[u] ^= 1549556828, c[u] ^= 909522486;o.sigBytes = s.sigBytes = i, this.reset();
      }, reset: function () {
        var e = this._hasher;e.reset(), e.update(this._iKey);
      }, update: function (e) {
        return this._hasher.update(e), this;
      }, finalize: function (e) {
        var t = this._hasher;return e = t.finalize(e), t.reset(), t.finalize(this._oKey.clone().concat(e));
      } });
  }(), function () {
    var e = t,
        n = e.lib.WordArray;e.enc.Base64 = { stringify: function (e) {
        var t = e.words,
            n = e.sigBytes,
            r = this._map;e.clamp();for (var i = [], o = 0; o < n; o += 3) for (var s = (t[o >>> 2] >>> 24 - o % 4 * 8 & 255) << 16 | (t[o + 1 >>> 2] >>> 24 - (o + 1) % 4 * 8 & 255) << 8 | t[o + 2 >>> 2] >>> 24 - (o + 2) % 4 * 8 & 255, a = 0; a < 4 && o + .75 * a < n; a++) i.push(r.charAt(s >>> 6 * (3 - a) & 63));var c = r.charAt(64);if (c) for (; i.length % 4;) i.push(c);return i.join("");
      }, parse: function (e) {
        var t = e.length,
            r = this._map,
            i = r.charAt(64);if (i) {
          var o = e.indexOf(i);-1 != o && (t = o);
        }for (var s = [], a = 0, c = 0; c < t; c++) if (c % 4) {
          var u = r.indexOf(e.charAt(c - 1)) << c % 4 * 2,
              h = r.indexOf(e.charAt(c)) >>> 6 - c % 4 * 2;s[a >>> 2] |= (u | h) << 24 - a % 4 * 8, a++;
        }return n.create(s, a);
      }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" };
  }();return function (n) {
    if (!n.SecretId) return console.error("missing param SecretId");if (!n.SecretKey) return console.error("missing param SecretKey");if ("4.0" === n.Version) return function (e) {
      var n = e.Pathname || "/",
          r = e.Expires,
          i = "",
          o = "",
          s = e.Bucket.match(/^(.+)-(\d+)$/);s && (i = s[1], o = s[2]);var a = parseInt(String(Math.random() * Math.pow(2, 32))),
          c = parseInt(String(Date.now() / 1e3)),
          u = c + (void 0 === r ? 900 : 1 * r || 0),
          h = "/" + o + "/" + i + encodeURIComponent(n).replace(/%2F/g, "/"),
          d = "a=" + o + "&b=" + i + "&k=" + e.SecretId + "&e=" + u + "&t=" + c + "&r=" + a + "&f=" + h,
          f = t.HmacSHA1(d, e.SecretKey),
          l = t.enc.Utf8.parse(d);return f.concat(l).toString(t.enc.Base64);
    }(n);var r = (n = n || {}).SecretId,
        i = n.SecretKey,
        o = (n.Method || "get").toLowerCase(),
        s = n.Query || {},
        a = n.Headers || {},
        c = n.Pathname || "/",
        u = n.Expires,
        h = function (e) {
      var t = [];for (var n in e) e.hasOwnProperty(n) && t.push(n);return t.sort(function (e, t) {
        return (e = e.toLowerCase()) === (t = t.toLowerCase()) ? 0 : e > t ? 1 : -1;
      });
    },
        d = function (t) {
      var n,
          r,
          i,
          o = [],
          s = h(t);for (n = 0; n < s.length; n++) i = void 0 === t[r = s[n]] || null === t[r] ? "" : "" + t[r], r = e(r = r.toLowerCase()), i = e(i) || "", o.push(r + "=" + i);return o.join("&");
    },
        f = parseInt(String(new Date().getTime() / 1e3)) - 1,
        l = f + (void 0 === u ? 900 : 1 * u || 0),
        p = r,
        g = f + ";" + l,
        v = f + ";" + l,
        m = h(a).join(";").toLowerCase(),
        _ = h(s).join(";").toLowerCase(),
        y = t.HmacSHA1(v, i).toString(),
        w = [o, c, d(s), d(a), ""].join("\n"),
        I = ["sha1", g, t.SHA1(w).toString(), ""].join("\n");return ["q-sign-algorithm=sha1", "q-ak=" + p, "q-sign-time=" + g, "q-key-time=" + v, "q-header-list=" + m, "q-url-param-list=" + _, "q-signature=" + t.HmacSHA1(I, y).toString()].join("&");
  };
}(),
    jo = { upload: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r;return i(this, function (i) {
        switch (i.label) {case 0:
            return [4, this._getCredit()];case 1:
            return t = i.sent(), [4, this._getAuth(t)];case 2:
            return n = i.sent(), r = e.substr(e.lastIndexOf("/") + 1), [4, this._upload(n, e, { key: t.pathName + "/" + r, success_action_status: 200, Signature: n.Authorization, "x-cos-security-token": n.XCosSecurityToken, "Content-Type": "" })];case 3:
            return [2, i.sent()];}
      });
    });
  }, _upload: function (e, t, n) {
    return r(this, void 0, void 0, function () {
      return i(this, function (r) {
        switch (r.label) {case 0:
            return [4, Fo(Object.assign({}, e, { fileName: "file", filePath: t, formData: n }))];case 1:
            return 200 !== r.sent().statusCode ? [3, 2] : [2, e.fileUrl + "/" + n.key];case 2:
            return [4, Promise.reject(new Error("upload failed!"))];case 3:
            r.sent(), a("upload failed!"), r.label = 4;case 4:
            return [2];}
      });
    });
  }, _getCredit: function () {
    return r(this, void 0, void 0, function () {
      var e;return i(this, function (t) {
        switch (t.label) {case 0:
            return (e = this._getCreditFromStorage()) ? [2, e] : [4, this._requestCredit()];case 1:
            return [2, t.sent()];}
      });
    });
  }, _getAuth: function (e) {
    return r(this, void 0, void 0, function () {
      return i(this, function (t) {
        return [2, { pathName: e.pathName, url: e.upUrl, fileUrl: e.cdnUrl, XCosSecurityToken: e.sessionToken, Authorization: Go({ SecretId: e.tmpSecretId, SecretKey: e.tmpSecretKey, Method: "POST", Pathname: "/" }) }];
      });
    });
  }, _requestCredit: function () {
    return r(this, void 0, void 0, function () {
      var e, t, n, r, o, s, a;return i(this, function (i) {
        switch (i.label) {case 0:
            return e = Bt(), t = e.gameId, n = e.gameVersion, r = (Vn.getSDKUserInfo() || {}).uniqueId, o = { gameId: t, gameVersion: n, userId: r }, s = O.getServerHost() + "/cos-server/api/v1/cos/tmpsts", [4, D.get(s, o)];case 1:
            return a = i.sent(), this._setCreditToStorage(a.data), [2, a.data];}
      });
    });
  }, _setCreditToStorage: function (e) {
    this._creditCache = e, H.set("UploadCredit", e);
  }, _getCreditFromStorage: function () {
    var e = this._creditCache || H.get("UploadCredit") || {},
        t = e.expire;return (!t || V.getTime() > t) && (H.remove("UploadCredit"), e = null), this._creditCache = e, this._creditCache;
  } },
    Ko = ["onStart", "onStop", "onPause", "onResume", "onError", "onFrameRecorded", "onInterruptionBegin", "onInterruptionEnd"];function Bo() {
  return this.config = null, this.isCanceled = !1, this.listener = null, this.recorder = qo.getRecorder(), this;
}Bo.prototype = { isValid: function () {
    return null != this.recorder;
  }, bindRecordListener: function (e) {
    this.listener = e, this._bindEvent();
  }, unbindRecordListener: function () {
    this._unbindEvent(), this.listener = null;
  }, start: function (e) {
    return r(this, void 0, void 0, function () {
      return i(this, function (t) {
        return this.config = e || {}, this._checkValid(), this.recorder.start(e), [2];
      });
    });
  }, stop: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        return this._checkValid(), this.recorder.stop(), [2];
      });
    });
  }, cancel: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        return this._checkValid(), this.isCanceled = !0, this.recorder.stop(), [2];
      });
    });
  }, pause: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        return this._checkValid(), this.recorder.pause(), [2];
      });
    });
  }, resume: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        return this._checkValid(), this.recorder.resume(), [2];
      });
    });
  }, _checkValid: function () {
    if (!this.isValid()) throw this.listener && this.listener.onError && this.listener.onError(mt), mt;
  }, _bindEvent: function () {
    var e = this;Ko.forEach(function (t) {
      e.recorder[t](function (n, r) {
        if (e.listener) return "onStop" === t ? e._handleOnStop(n, r) : void (e.listener[t] && e.listener[t](n));
      });
    });
  }, _unbindEvent: function () {
    var e = this;Ko.forEach(function (t) {
      e.recorder[t] = null;
    });
  }, _handleOnStop: function (e, t) {
    return r(this, void 0, void 0, function () {
      var n, r;return i(this, function (i) {
        switch (i.label) {case 0:
            if (this.isCanceled) return this.isCanceled = !1, [2, this.listener.onCancel && this.listener.onCancel()];if (t) return [2, this.listener.onError && this.listener.onError(t)];if (!this.config) return [2, this.listener.onError && this.listener.onError(_t)];if (e.duration < this.config.minDuration && this.listener.onError && this.listener.onError(It), e.url = e.tempFilePath, this.config.disableUpload) return [3, 4];i.label = 1;case 1:
            return i.trys.push([1, 3,, 4]), n = e, [4, jo.upload(e.url)];case 2:
            return n.url = i.sent(), [3, 4];case 3:
            return r = i.sent(), this.listener.onError && this.listener.onError(r), [3, 4];case 4:
            return this.listener.onStop(e), [2];}
      });
    });
  } };var zo = function () {
  var e = new Bo();return e.isValid() ? e : null;
};function Wo() {
  return zo();
}var Jo,
    Qo,
    Yo,
    Xo = function () {
  return { ins: zo(), start: function (e) {
      if (this.ins) {
        var t = e.config;this.ins.bindRecordListener(e), this.ins.start(t).catch(function () {});
      }
    }, stop: function () {
      this.ins && this.ins.stop().catch(function () {});
    }, cancel: function () {
      this.ins && this.ins.cancel().catch(function () {});
    }, pause: function () {
      this.ins && this.ins.pause().catch(function () {});
    }, resume: function () {
      this.ins && this.ins.resume().catch(function () {});
    } };
},
    $o = { _opt: { newDays: 3, newShareLimitHours: 2, newShareLimitTimes: 15, firstShareFail: !0, successTimesAfterFail: 1, shareFailRate: .3 }, _save: null, _resetHour: 0, _getSave: function () {
    return this._save || (this._save = H.get("__sdk_share_rules") || { shareCounts: [], forceSucTimes: 0, updateTime: 0 }), this._save;
  }, _setSave: function (e) {
    e && (this._save = Object.assign({}, this._save || {}, e), this._save.updateTime = V.getTime(), H.set("__sdk_share_rules", this._save));
  }, checkStorage: function (e) {
    var t = this._getSave(),
        n = t.updateTime,
        r = t.todayStart,
        i = e.now,
        o = n || 0,
        s = r + V.toMSecond(this._resetHour);(i > s && o < s || o > i) && (this._save.shareCounts = [], this._save.forceSucTimes = 0);
  }, setOptions: function (e) {
    this._opt = e || this._opt;
  }, getShareState: function () {
    return Et;
  }, getDays: function (e) {
    var t = 1e3 * ~~(Vn.getSDKUserInfo() || {}).createdAt;return t ? (e - V.todayStart(t)) / V.toMSecond(24) : 0;
  }, _getResult: function (e) {
    var t = e.days,
        n = this._getSave(),
        r = n.shareCounts,
        i = n.forceSucTimes,
        o = r.length,
        s = this._opt,
        a = s.firstShareFail,
        c = s.shareFailRate,
        u = void 0 === c ? 0 : c;return t < 1 && 0 === o ? Et.AUTO : a && t >= 1 && 0 === o ? Et.FAIL : i ? Et.AUTO : u && Math.random() < u ? Et.FAIL : Et.AUTO;
  }, getResult: function (e) {
    var t = this._getResult(e),
        n = this._getSave().forceSucTimes,
        r = n;(r > 0 && r--, t === Et.FAIL) && (r = this._opt.successTimesAfterFail || 1);return r !== n && this._setSave({ forceSucTimes: r }), t;
  }, canUse: function (e) {
    var t = e.now,
        n = e.days;if (e.forceShare) return !0;if (n < this._opt.newDays) {
      var r = this._opt,
          i = r.newShareLimitTimes,
          o = r.newShareLimitHours,
          s = this._getSave().shareCounts,
          a = void 0 === s ? [] : s,
          c = t - (a[0] || 0),
          u = a.length,
          h = V.toMSecond(o);if (u >= i && c < h) return !1;
    }return !0;
  }, consume: function () {
    var e = this._opt.newShareLimitTimes,
        t = this._getSave().shareCounts,
        n = void 0 === t ? [] : t;n.push(V.getTime());var r = n.length - e;r > 0 && n.splice(0, r), this._setSave({ shareCounts: n });
  } },
    Zo = { ad: 0, share: 1, interstitial: 100 },
    es = [0, 1, 100],
    ts = !1,
    ns = Zo;function rs(e) {
  Yo = Object.assign({}, Yo || {}, e || {}), $o.setOptions(Yo);
}function is(e, t) {
  return { type: e, shareGuid: V.generateGuid(), forceResult: t, isGray: !1, isLocal: !0 };
}function os(e) {
  var t,
      n = e || {},
      r = n.seq,
      i = void 0 === r ? [] : r,
      o = n.isGray,
      s = n.video_play_freeze_time,
      a = void 0 === s ? 0 : s,
      c = n.video_play_freeze_enable,
      u = void 0 === c ? 0 : c;o && !Jo.isGray && (Jo.seq = []);var h = i && i.length ? function (e) {
    return void 0 === e && (e = []), e.filter(function (e) {
      return es.includes(e.type);
    }).map(function (e) {
      return e.isLocal = !1, e;
    });
  }(i) : Yo.defaultSeq.map(function (e) {
    return is(e);
  });(t = Jo.seq).push.apply(t, h), Jo.saveTime = V.getTime(), Jo.isGray = !!o, Jo.video_play_freeze_time = a, Jo.video_play_freeze_enable = u, H.set("__sdk_std_seq", Jo);
}function ss(e) {
  var t = e.forceShare,
      n = function (e) {
    Yo || rs({ newDays: 3, newShareLimitHours: 2, newShareLimitTimes: 15, firstShareFail: !0, successTimesAfterFail: 1, shareFailRate: .3, seqResetHour: 6, defaultSeq: [1, 0, 1, 0, 1, 0, 0, 1, 0, 0] }), Jo || (Jo = H.get("__sdk_std_seq") || { seq: [] }), $o.checkStorage(e);var t = Jo.saveTime;if (!t) return Jo;var n = e.now,
        r = t || 0,
        i = e.todayStart + V.toMSecond(Yo.seqResetHour);return (n > i && r < i || r > n) && (Jo.seq = []), Jo;
  }(e),
      r = n.seq,
      i = n.isGray;if ((r ? r.length : 0) <= 2 && function () {
    var e = Vn.getSDKUserInfo() || {},
        t = e.createdAt,
        n = e.uniqueId,
        r = e.userId,
        i = { gameId: Bt().gameId, uniqueId: n, openId: r, createdAt: t },
        o = O.getServerHost() + "/share_seq-server/api/v1/seq";D.get(o, i).then(function (e) {
      a("load std schemes: ", e), os(e && e.data);
    }).catch(function (e) {
      os(null);
    });
  }(), !i) return is($o.canUse(e) ? Zo.share : Zo.ad);var o = t || !r.length ? is(Zo.share) : r[0];return o.isGray = i || !1, o;
}function as(e) {
  var t = Qo || {},
      n = t.shareGuid,
      r = t.type;if (n) {
    var i = (e || {}).data;if (r === Zo.share) {
      var o = i || {},
          s = o.shareData,
          c = o.shareSuccess,
          u = o.isForce,
          h = o.isActiveUse;if (((l = (s || {}).sequenceInfo) || {}).shareGuid != n) return;return u && !c ? (Qo.forceResult = Et.AUTO, void a("seq change")) : void (c && !h && us());
    }if (r !== Zo.ad) {
      if (r !== Zo.interstitial) ;else {
        if (((l = (i || {}).sequenceInfo) || {}).shareGuid != n) return;(h = (i || {}).isActiveUse) || us();
      }
    } else {
      var d = i || {},
          f = d.isEnded,
          l = d.sequenceInfo,
          h = d.isActiveUse;if ((l || {}).shareGuid != n) return;!f && void 0 !== f || h || us();
    }
  }
}function cs(e) {
  !function () {
    ts || (ts = !0, T.on("EVT_SHARE_END", as.bind(this)), T.on("EVT_VIDEO_AD_PLAY_FINISH", as.bind(this)), T.on("EVT_INTERSTITIAL_AD_SHOW", as.bind(this)));
  }();var t = (e || {}).forceShare;if (Qo) return Qo;var n = V.getTime(),
      r = { now: n, days: $o.getDays(n), forceShare: t, todayStart: V.todayStart(n) };a("get seq by: ", r, Jo);var i = ss(r);i.type === Zo.share && (i.forceResult = $o.getResult(r)), Qo = i;var o = JSON.parse(JSON.stringify(i));return delete o.isLocal, o;
}function us(e) {
  if (void 0 === e && (e = !1), Qo) {
    var t = Qo.isLocal;e && Qo && function (e) {
      var t = Qo.type,
          n = Qo;t === Zo.ad && (a("use seq videoAd"), T.dispatch("EVT_VIDEO_AD_PLAY_FINISH", { sequenceInfo: n, adType: 0, isActiveUse: e }));t === Zo.share && (a("use seq share", n), T.dispatch("EVT_SHARE_END", { wx_share_type: 3, shareData: { sequenceInfo: n, shareGuid: n.shareGuid }, isActiveUse: e }));t === Zo.interstitial && (a("use seq interstitialAd"), T.dispatch("EVT_INTERSTITIAL_AD_SHOW", { sequenceInfo: n, adType: 1, isActiveUse: e }));
    }(e), Qo = null;var n = (Jo || {}).seq;n && n.length && t === n[0].isLocal && (Jo.seq.shift(), H.set("__sdk_std_seq", Jo)), $o.consume(), a("seq consume");
  }
}function hs() {
  return { newDays: 3, newShareLimitHours: 2, newShareLimitTimes: 15, firstShareFail: !0, successTimesAfterFail: 1, shareFailRate: .3, seqResetHour: 6, defaultSeq: [1, 0, 1, 0, 1, 0, 0, 1, 0, 0] };
}function ds(e) {
  rs(Object.assign(fs(), e));
}function fs() {
  return Yo || { newDays: 3, newShareLimitHours: 2, newShareLimitTimes: 15, firstShareFail: !0, successTimesAfterFail: 1, shareFailRate: .3, seqResetHour: 6, defaultSeq: [1, 0, 1, 0, 1, 0, 0, 1, 0, 0] };
}function ls() {
  return ns;
}function ps(e) {
  return cs(e);
}function gs() {
  us(!0);
}var vs = { _renderQuery: function (e) {
    var t = e || {},
        n = t.query,
        r = t.shareConfigId,
        i = t.activityId,
        o = t.shareGuid,
        s = V.getTimeSec(),
        a = Vn.getSDKUserInfo() || {},
        c = a.h_shareCode,
        u = void 0 === c ? "" : c,
        h = a.channel,
        d = void 0 === h ? "hortor_" : h,
        f = a.origChannel,
        l = void 0 === f ? "" : f,
        p = { channel: V.endsWith(d, "_") ? d : d + "_", h_shareCode: u, timestamp: s, origChannel: l, shareConfigId: r, activityId: i, share_guid: o };return V.addToQuery(n, p);
  }, _renderTitle: function (e) {
    var t = e || {},
        n = t.title,
        r = t.titleParams;if (!n) return "";r && "object" == typeof r && Object.keys(r).forEach(function (e) {
      if (new RegExp("({{" + e + "}})").test(n)) {
        var t = r[e] + "";n = n.replace(RegExp.$1, t);
      }
    });return n = n.replace(/({{[-\w]*}})/g, "");
  }, _renderImageUrl: function (e) {
    var t = e || {},
        n = t.imageUrl,
        r = t.imageParams;if (!n) return "";r && "object" == typeof r && Object.keys(r).forEach(function (e) {
      if (new RegExp("({{" + e + "}})").test(n)) {
        var t = r[e] + "";n = n.replace(RegExp.$1, t);
      }
    });return n = n.replace(/({{[-\w]*}})/g, "");
  }, _renderShareGuid: function (e) {
    var t = e || {},
        n = t.query,
        r = t.shareGuid,
        i = void 0 === r ? "" : r,
        o = (t.sequenceInfo || {}).shareGuid;if (!V.isEmpty(o)) return o;if (!V.isEmpty(i)) return i;var s = V.queryToJson(n);return V.isEmpty(s.share_guid) ? V.generateGuid() : s.share_guid;
  }, _renderForceResult: function (e) {
    return ((e || {}).sequenceInfo || {}).forceResult;
  }, _renderShareId: function (e) {
    var t = e || {},
        n = t.id,
        r = t.query;return n || V.queryToJson(r).shareConfigId || "";
  }, renderShare: function (e, t) {
    var n = (e || {}).beforeShare,
        r = V.isFun(n) ? n(t) : null,
        i = Object.assign({}, t || {}, e || {}, r || {});return i.shareConfigId = this._renderShareId(i), i.title = this._renderTitle(i), i.imageUrl = this._renderImageUrl(i), i.shareGuid = this._renderShareGuid(i), i.query = this._renderQuery(i), i.forceResult = this._renderForceResult(i), V.copy(i, ["id", "gameID", "beforeShare", "success", "fail", "complete"]);
  }, renderShareThemes: function (e) {
    if (!e || !e.length) return {};var t = {},
        n = {};for (var r in e.map(function (e) {
      t[e.type] = t[e.type] || [], t[e.type].push(e);
    }), t) n[r] = new tr({ list: t[r] });return n;
  }, renderPostParams: function (e) {
    var t = e || {},
        n = t.shareConfigId;return { shareConfigId: void 0 === n ? "" : n, customShareType: t.shareType, activityId: t.activityId, content: V.copy(e, ["activityId", "shareType", "shareConfigId"]) };
  } },
    ms = et("updateShareMenu", "1.2.0"),
    _s = et("updateShareMenu", "2.4.0");function ys(e) {
  wx.showShareMenu(e);
}function ws(e) {
  return new Promise(function (t, n) {
    ms ? void 0 === e.isUpdatableMessage || _s ? wx.updateShareMenu(Object.assign({}, e || {}, { success: t, fail: n })) : n(pt) : n(mt);
  });
}function Is(e) {
  return new Promise(function (t, n) {
    wx.getShareInfo(Object.assign({}, e, { success: function (e) {
        "getShareInfo:ok" === e.errMsg ? t(e) : n(e);
      }, fail: n }));
  });
}function Ts(e) {
  et("onShareMessageToFriend", "2.9.4") && wx.onShareMessageToFriend(e);
}var Ss = { set: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r;return i(this, function (i) {
        switch (i.label) {case 0:
            return n = (t = e || {}).activityId, r = t.templateInfo, [4, ws({ withShareTicket: !0, isUpdatableMessage: !0, activityId: n, templateInfo: void 0 === r ? {} : r })];case 1:
            return [2, i.sent()];}
      });
    });
  }, clear: function () {
    return r(this, void 0, void 0, function () {
      return i(this, function (e) {
        switch (e.label) {case 0:
            return [4, V.wait(1)];case 1:
            return e.sent(), [4, ws({ withShareTicket: !0, isUpdatableMessage: !1, templateInfo: {} })];case 2:
            return [2, e.sent()];}
      });
    });
  } };function bs() {
  return this.forceResult = void 0, this.destroyed = !1, this.inited = !1, this;
}bs.prototype = { init: function (e) {
    if (!this.inited) {
      this.inited = !0;var t = e || {},
          n = t.forceResult,
          r = t.shareSuccessDiff,
          i = t.onShareCallbackTime,
          o = t.success,
          s = t.fail,
          a = t.complete;this.successDiff = r || 2e3, this.onCallbackTime = i || 500, this.forceResult = n, this.showEnv = this.onShow.bind(this, { success: o, fail: s, complete: a }), this._bind();
    }
  }, _bind: function () {
    T.on("EVT_ON_SHOW", this.showEnv);
  }, _unbind: function () {
    T.off("EVT_ON_SHOW", this.showEnv);
  }, onShow: function (e, t) {
    if (!this.destroyed) {
      var n = e || {},
          r = n.success,
          i = n.fail,
          o = n.complete,
          s = ((t || {}).data || {}).hideDuration;this._check(s || 0).then(function (e) {
        o && V.isFun(o) && o(e), V.isFun(r) && r(e);
      }).catch(function (e) {
        o && V.isFun(o) && o(e), V.isFun(i) && i(e);
      });
    }
  }, _check: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n;return i(this, function (r) {
        switch (r.label) {case 0:
            return V.getTime(), t = this.successDiff, this.destroy(), [4, V.wait(this.onCallbackTime)];case 1:
            if (r.sent(), n = { isForce: !1, isFake: !0, diffTime: e, successDiff: t, errMsg: "微信分享回调已经废弃，这是模拟分享成功" }, this.forceResult === Et.SUC) return n.isForce = !0, n.errMsg = "强制分享成功", [2, n];if (this.forceResult === Et.FAIL) throw n.isForce = !0, n.errMsg = "强制分享失败", n;if (e < t) throw n.errMsg = "分享操作太快，模拟分享失败", n;return [2, n];}
      });
    });
  }, destroy: function () {
    this.destroyed || (this._unbind(), this.destroyed = !0);
  } };var Es = { withShareTicket: !0, openGetShareTheme: !0, shareSuccessDiff: 2e3, onShareCallbackTime: 500, useShareAdapter: !0 },
    Cs = {},
    ks = {},
    Os = null,
    As = "",
    xs = "",
    Ds = !1;function Rs() {
  q("PROC_REQ_AGGR", Ps), Us(Bt());var e = Cs.openShareTimeline,
      t = void 0 !== e && e,
      n = et("onShareTimeline", "2.11.3") && t;ys(n ? { withShareTicket: !0, menus: ["shareAppMessage", "shareTimeline"] } : { withShareTicket: !0 }), js(), n && Ks();var o = Cs || {},
      s = o.openGetShareTheme,
      c = void 0 === s || s,
      u = o.shareThemes;c && function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r;return i(this, function (i) {
        switch (i.label) {case 0:
            return t = (Cs || {}).gameId, n = { gameID: t }, e && e.length && (n.shareTypes = e), r = O.getServerHost() + "/share/api/v1/scheme/all", [4, D.post(r, n)];case 1:
            return [2, i.sent()];}
      });
    });
  }(u).then(function (e) {
    Ls(e);
  }).catch(function (e) {
    a("getShareTheme err", e);
  }), Ts(function (e) {
    T.dispatch("EVT_SHARE_FRIEND", e);
  });
}function Ps(e) {
  a("share process aggr req");var t = (e || {}).resp,
      n = (t || {}).share;return n && Ls(n), t || null;
}function Us(e) {
  Cs = Object.assign({}, Cs || Es, e || {});
}function Ls(e) {
  var t = ((e || {}).data || {}).schemes;t && (ks = vs.renderShareThemes(function (e) {
    return e.map(function (e) {
      return 2 === e.shareScene && (e.imageUrl = e.thumbnailUrl, e.imageUrlId = e.thumbnailId, e.imagePreviewUrl = e.previewUrl, e.imagePreviewUrlId = e.previewId), e;
    });
  }(t)));
}function Ns(e) {
  Di("sharing", !0), e ? T.dispatch("EVT_SHARE_TIME_START", { wx_share_type: 1 }) : T.dispatch("EVT_SHARE_START", { wx_share_type: 0 });
}function Vs(e, t, r, i, o) {
  Di("sharing", !1);var s = i ? Math.max(V.getTime() - i, 0) : 0,
      a = n(n({ shareData: t, shareSuccess: r, spentTime: s }, e), { wx_share_type: o ? 1 : 0 });return o ? T.dispatch("EVT_SHARE_TIME_END", a) : T.dispatch("EVT_SHARE_END", a), a;
}function Hs(e) {
  var t = (Cs || {}).shareData,
      n = (e || {}).shareType,
      r = n ? ks[n] : null,
      i = r ? r.getData() : t || {};return vs.renderShare(e, i);
}function Ms(e, t, r, i) {
  Ds = i;var o,
      s = V.getTime();if (As !== e.shareType) o = Hs(e), xs = "";else {
    var c = Hs(e);o = Object.assign(c, { shareConfigId: (null == Os ? void 0 : Os.shareConfigId) || (null == c ? void 0 : c.shareConfigId) || "" });
  }a("_handleShare inData", o);var u = Cs || {},
      h = u.shareSuccessDiff,
      d = u.onShareCallbackTime,
      f = o || {},
      l = f.shareSuccessDiff,
      p = f.onShareCallbackTime,
      g = f.activityId,
      v = Object.assign({}, o, { shareSuccessDiff: l || h, onShareCallbackTime: p || d }),
      m = t || {},
      _ = m.success,
      y = m.fail,
      w = m.complete,
      I = vs.renderPostParams(v),
      T = new bs(),
      S = { complete: function (e) {
      T.destroy(), w && V.isFun(w) && w(e), g && Ss.clear().catch(function (e) {
        a("update fail", e);
      });
    }, success: function (e) {
      a("share success", e);var t = Vs(e, v, !0, s);i || (qs(I, 2), qs(I, 12)), V.isFun(_) && _(t);
    }, fail: function (e) {
      a("share fail", e);var t = Vs(e, v, !1, s);V.isFun(y) && y(t);
    } },
      b = n(n({}, v), S);return T.init(b), qs(I, i ? 2 : 11), Ns(), b;
}function qs(e, t) {
  T.dispatch("EVT_REPORT_LOG", { log: n(n({}, e), { logType: t, customScene: Ds ? "hsdk_menue" : xs }) });
}function Fs(e, t) {
  return r(this, void 0, void 0, function () {
    return i(this, function (n) {
      switch (n.label) {case 0:
          if (Ri("sharing")) throw gt;if (!e.activityId) return [3, 4];n.label = 1;case 1:
          return n.trys.push([1, 3,, 4]), [4, Ss.set(e)];case 2:
          return n.sent(), [3, 4];case 3:
          return a("update share err", n.sent()), [3, 4];case 4:
          return [4, Gs(e, t)];case 5:
          return [2, n.sent()];}
    });
  });
}function Gs(e, t) {
  return new Promise(function (t, n) {
    var r,
        i = Ms(e, { success: t, fail: n }, 0, !1);r = i, wx.shareAppMessage(r);
  });
}function js(e) {
  !function (e) {
    wx.onShareAppMessage(e);
  }(function (t) {
    var n = e && V.isFun(e) ? e(t) : null,
        r = n || {};return Ms(n, { success: r.success, fail: r.fail, complete: r.complete }, 0, !0);
  });
}function Ks(e) {
  !function (e) {
    wx.onShareTimeline && wx.onShareTimeline(e);
  }(function (t) {
    var r = e && V.isFun(e) ? e(t) : null,
        i = r || {};return function (e, t, r, i) {
      Ds = i;var o,
          s = V.getTime();if (As !== e.shareType) o = Hs(e), xs = "";else {
        var c = Hs(e);o = Object.assign(c, { shareConfigId: (null == Os ? void 0 : Os.shareConfigId) || (null == c ? void 0 : c.shareConfigId) || "" });
      }var u = Cs || {},
          h = u.shareSuccessDiff,
          d = u.onShareCallbackTime,
          f = o || {},
          l = f.shareSuccessDiff,
          p = f.onShareCallbackTime,
          g = f.activityId,
          v = Object.assign({}, o, { shareSuccessDiff: l || h, onShareCallbackTime: p || d }),
          m = t || {},
          _ = m.success,
          y = m.fail,
          w = m.complete,
          I = vs.renderPostParams(v),
          T = new bs(),
          S = { complete: function (e) {
          a("share complete", e), T.destroy(), w && V.isFun(w) && w(e), g && Ss.clear().catch(function (e) {
            a("update fail", e);
          });
        }, success: function (e) {
          a("share success", e);var t = Vs(e, v, !0, s, !0);V.isFun(_) && _(t);
        }, fail: function (e) {
          a("share fail", e);var t = Vs(e, v, !1, s, !0);V.isFun(y) && y(t);
        } },
          b = n(n({}, v), S);return T.init(b), qs(I, 44), Ns(!0), b;
    }(r, { success: i.success, fail: i.fail, complete: i.complete }, 0, !0);
  });
}function Bs(e) {
  return Fs(e, !0);
}function zs(e) {
  return Fs(e, !1);
}function Ws(e) {
  return function (e) {
    js(function () {
      return e;
    });
  }(e);
}function Js(e) {
  return function (e) {
    Ks(function () {
      return e;
    });
  }(e);
}function Qs(e) {
  return function (e) {
    return r(this, void 0, void 0, function () {
      var t, r, o, s, c, u, h, d;return i(this, function (i) {
        switch (i.label) {case 0:
            if (!(t = (e || {}).shareTicket)) throw _t;return [4, Is(e)];case 1:
            return r = i.sent(), o = (Cs || {}).gameId, s = (Vn.getSDKUserInfo() || {}).uniqueId, c = O.getServerHost() + "/mini/api/v1/shareinfo", a("getShareInfo params", u = n({ userId: s, gameId: o, shareTicket: t }, r)), [4, D.postForm(c, u)];case 2:
            if (h = i.sent().data, !(d = h) || !d.openGId) throw vt;return [2, d];}
      });
    });
  }(e);
}function Ys(e) {
  var t, n;t = (null == e ? void 0 : e.shareType) || "", void 0 === (n = (null == e ? void 0 : e.shareScene) || "") && (n = ""), As = t, xs = n, a("sharePointShow _inData", Os = Hs({ shareType: t })), qs({ customShareType: t, shareConfigId: (null == Os ? void 0 : Os.shareConfigId) || "", customScene: n }, 19);
}function Xs(e) {
  Us(e);
}function $s(e) {
  return Hs(e);
}function Zs(e) {
  return ws(e);
}function ea(e) {
  return function (e) {
    return !!et("setMessageToFriendQuery", "2.9.0") && wx.setMessageToFriendQuery(e);
  }(e);
}function ta(e) {
  Ts((e = Bn(e, "onShareMessageToFriend")).listener);
}function na(e) {
  var t;e = Bn(e, "onInteractiveStorageModified"), t = e.listener, et("onInteractiveStorageModified", "2.9.0") && wx.onInteractiveStorageModified(t);
}T.once("EVT_SDK_READY", Rs);var ra = et("requestSubscribeMessage", "2.8.3"),
    ia = et("requestSubscribeWhatsNew", "2.10.4");function oa(e) {
  return new Promise(function (t, n) {
    ra ? wx.requestSubscribeMessage(Object.assign({}, e, { success: t, fail: n })) : n(mt);
  });
}function sa(e) {
  return new Promise(function (t, n) {
    ia ? wx.getWhatsNewSubscriptionsSetting(Object.assign({}, e, { success: t, fail: n })) : n(mt);
  });
}function aa(e) {
  return new Promise(function (t, n) {
    ia ? wx.requestSubscribeWhatsNew(Object.assign({}, e, { success: t, fail: n })) : n(mt);
  });
}var ca = { accept: "acceptIds", reject: "rejectIds", ban: "banIds" };function ua(e) {
  return r(this, void 0, void 0, function () {
    var t, n, r, o;return i(this, function (i) {
      switch (i.label) {case 0:
          t = (e || {}).playerId, i.label = 1;case 1:
          return i.trys.push([1, 3,, 4]), [4, oa(e)];case 2:
          return n = i.sent(), r = function (e, t) {
            var n = { playerId: t };for (var r in ca) n[ca[r]] = [];for (var r in e) {
              var i = ca[e[r]];n[i] && n[i].push(r);
            }return n;
          }(n, t), ha(r, 0), [2, r];case 3:
          return a("订阅消息 err", o = i.sent()), [2, Promise.reject(o)];case 4:
          return [2];}
    });
  });
}function ha(e, t) {
  if (void 0 === t && (t = 0), !(t > 3)) {
    var n = Bt(),
        r = n.gameId;if (n.reportSubscribeMessage) {
      var i = e || {},
          o = i.acceptIds,
          s = void 0 === o ? [] : o,
          c = i.playerId;if (s.length) {
        var u = Vn.getSDKUserInfo() || {},
            h = u.userId,
            d = u.uniqueId,
            f = { gameId: r, playerId: V.toNStr(c), openId: h, uniqueId: d, templateIds: s },
            l = O.logHost + "/wxlog/api/v1/log/msg/subscribe";D.post(l, f).then(function () {
          a("subscribe count add", f);
        }).catch(function () {
          setTimeout(function () {
            ha(e, ++t);
          }, 5e3);
        });
      }
    }
  }
}function da(e) {
  return ua(e);
}function fa() {
  return function () {
    return r(this, void 0, void 0, function () {
      var e, t, n, r, o, s;return i(this, function (i) {
        switch (i.label) {case 0:
            return i.trys.push([0, 2,, 3]), e = Bt().gameId, t = Vn.getSDKUserInfo() || {}, n = t.userId, r = t.uniqueId, o = O.logHost + "/wxlog/api/v1/log/msg/subscribe/num", [4, D.get(o, { gameId: e, openId: n, uniqueId: r })];case 1:
            return [2, i.sent().data];case 2:
            return a("获取订阅次数 err", s = i.sent()), [2, Promise.reject(s)];case 3:
            return [2];}
      });
    });
  }();
}function la(e) {
  return function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return n.trys.push([0, 2,, 3]), [4, sa(e)];case 1:
            return [2, n.sent()];case 2:
            return a("获取游戏更新订阅状态 err", t = n.sent()), [2, Promise.reject(t)];case 3:
            return [2];}
      });
    });
  }(e);
}function pa(e) {
  return function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return n.trys.push([0, 2,, 3]), [4, aa(e)];case 1:
            return [2, n.sent()];case 2:
            return a("游戏更新订阅 err", t = n.sent()), [2, Promise.reject(t)];case 3:
            return [2];}
      });
    });
  }(e);
}var ga = et("getSetting", "1.2.0"),
    va = et("authorize", "1.2.0"),
    ma = et("joinVoIPChat", "2.7.0"),
    _a = et("exitVoIPChat", "2.7.0"),
    ya = et("updateVoIPChatMuteConfig", "2.7.0"),
    wa = et("onVoIPChatMembersChanged", "2.7.0"),
    Ia = et("onVoIPChatSpeakersChanged", "2.7.0"),
    Ta = et("onVoIPChatInterrupted", "2.7.0"),
    Sa = et("offVoIPChatSpeakersChanged", "2.9.0"),
    ba = et("offVoIPChatMembersChanged", "2.9.0"),
    Ea = et("offVoIPChatInterrupted", "2.9.0"),
    Ca = function () {
  return Promise.reject(mt);
};function ka(e) {
  return ga ? new Promise(function (t, n) {
    Q().then(function (n) {
      t(!!n.authSetting[e]);
    }).catch(function (e) {
      n(e);
    });
  }) : Ca();
}function Oa(e) {
  return va ? new Promise(function (t, n) {
    wx.authorize({ scope: e, success: function () {
        t(!0);
      }, fail: function () {
        t(!1);
      } });
  }) : Ca();
}function Aa(e) {
  return ma ? new Promise(function (t, n) {
    wx.joinVoIPChat(Object.assign(e, { success: t, fail: n }));
  }) : Ca();
}function xa() {
  return ka("scope.record");
}function Da() {
  return Oa("scope.record");
}function Ra() {
  return ka("scope.camera");
}function Pa() {
  return Oa("scope.camera");
}function Ua(e) {
  return r(this, void 0, void 0, function () {
    var t, n, r, o, s, a, c, u, h, d, f, l, p;return i(this, function (i) {
      switch (i.label) {case 0:
          t = e.groupId, n = O.getServerHost() + "/mini/api/v1/sign/voip_chat", r = S.sdkConfig(), o = r.gameId, s = r.appId, a = x.platform.information, c = (a.getUserInfo() || {}).uniqueId, i.label = 1;case 1:
          return i.trys.push([1, 3,, 4]), [4, D.post(n, { appId: s, gameId: o, uniqueId: c, groupId: t })];case 2:
          return u = i.sent(), h = u.data, d = h.sign, f = h.nonceStr, l = h.timeStamp, [2, Aa(Object.assign(e, { signature: d, nonceStr: f, timeStamp: l }))];case 3:
          return p = i.sent(), [2, Promise.reject(p)];case 4:
          return [2];}
    });
  });
}function La(e) {
  return function (e) {
    return _a ? new Promise(function (t, n) {
      wx.exitVoIPChat(Object.assign(e, { success: t, fail: n }));
    }) : Ca();
  }(e);
}function Na(e) {
  return function (e) {
    return ya ? new Promise(function (t, n) {
      wx.updateVoIPChatMuteConfig(Object.assign(e, { success: t, fail: n }));
    }) : Ca();
  }(e);
}function Va(e) {
  return function (e) {
    return !!wa && (wx.onVoIPChatMembersChanged(e.listener), !0);
  }(e);
}function Ha(e) {
  return function (e) {
    return !!ba && (wx.offVoIPChatMembersChanged(e.listener), !0);
  }(e = Bn(e, "offVoIPChatMembersChanged"));
}function Ma(e) {
  return function (e) {
    return !!Ia && (wx.onVoIPChatSpeakersChanged(e.listener), !0);
  }(e);
}function qa(e) {
  return function (e) {
    return !!Sa && (wx.offVoIPChatSpeakersChanged(e.listener), !0);
  }(e = Bn(e, "offVoIPChatSpeakersChanged"));
}function Fa(e) {
  return function (e) {
    return !!Ta && (wx.onVoIPChatInterrupted(e.listener), !0);
  }(e);
}function Ga(e) {
  return function (e) {
    return !!Ea && (wx.offVoIPChatInterrupted(e.listener), !0);
  }(e = Bn(e, "offVoIPChatInterrupted"));
}var ja = "/wall/api/v1/tasks",
    Ka = "/wall/api/v1/go_task",
    Ba = "/wall/api/v1/log",
    za = "/wall/api/v1/award",
    Wa = "/wall/api/v1/task/status",
    Ja = { TasksErr: { errCode: 70001, errMsg: "获取任务失败" }, NoTask: { errCode: 70002, errMsg: "任务不存在" }, GoErr: { errCode: 70003, errMsg: "跳转任务失败" }, AwardGetted: { errCode: 70004, errMsg: "已经领取奖励" }, GetAwardErr: { errCode: 70005, errMsg: "领奖失败" } },
    Qa = 2,
    Ya = 3,
    Xa = 4,
    $a = 5,
    Za = 6,
    ec = 8,
    tc = "panel",
    nc = "banner",
    rc = { InBox: 1, InGame: 2, Login: 3, Play: 4, PlayNoSDK: 5 },
    ic = "",
    oc = function () {
  if (!ic) {
    var e = nt();ic = JSON.stringify({ SDKVersion: e.SDKVersion, brand: e.brand, model: e.model, system: e.system, version: e.version, wallSDKV: e.hortorSDKVersion });
  }return ic;
},
    sc = function (e) {
  var t = Bt() || {},
      n = t.gameId,
      r = t.key,
      i = t.gameVersion,
      o = Vn.getSDKUserInfo() || {},
      s = o.userId,
      a = o.uniqueId,
      c = o.sex,
      u = o.channel,
      h = o.origChannel,
      d = Vn.getGameUser().serverId,
      f = void 0 === d ? "" : d;return Object.assign({ gameId: n, key: r, gameVersion: i, openId: s, gameServerId: f, sex: c, uniqueId: a, channel: u, origChannel: h, sysInfo: oc() }, e || {});
},
    ac = "",
    cc = sc,
    uc = function () {
  return ac;
},
    hc = function (e, t) {
  !function (e) {
    var t = (Kt().custom || {}).boxCode,
        n = void 0 === t ? "" : t,
        r = sc(Object.assign({ traceId: "", wallCode: n }, e || {})),
        i = "" + O.getServerHost() + Ba;D.postForm(i, r).then(function (e) {
      var t = ((e || {}).data || {}).traceIdStr;ac = t || "";
    }).catch(function (e) {
      a("wall report fail", e);
    });
  }(n({ logType: e }, t));
};var dc = { createQRCode: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, c;return i(this, function (i) {
        switch (i.label) {case 0:
            return i.trys.push([0, 4, 5, 6]), a("creating code ", e), n = (t = e || {}).codeUrl, r = t.backUrl, wx.showLoading(Object.assign({ title: "请稍等..." }, u || {})), [4, this._createImages({ codeUrl: n, backUrl: r })];case 1:
            return o = i.sent(), [4, this._drawQRCodeMiniGame(o)];case 2:
            return s = i.sent().tempFilePath, [4, nr.previewImage(s)];case 3:
            return [2, i.sent()];case 4:
            throw a("create code fail ", c = i.sent()), c;case 5:
            return wx.hideLoading(), [7];case 6:
            return [2];}var u;
      });
    });
  }, _createImages: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, a, c;return i(this, function (i) {
        switch (i.label) {case 0:
            for (r in t = {}, n = [], e) n.push(r);o = 0, i.label = 1;case 1:
            return o < n.length ? (s = n[o], a = t, c = s, [4, (u = e[s], new Promise(function (e, t) {
              var n = wx.createImage();n.src = u, n.onload = function (t) {
                e(n);
              }, n.onerror = t;
            }))]) : [3, 4];case 2:
            a[c] = i.sent(), i.label = 3;case 3:
            return o++, [3, 1];case 4:
            return [4, V.wait(100)];case 5:
            return i.sent(), [2, t];}var u;
      });
    });
  }, _drawQRCodeMiniGame: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s;return i(this, function (i) {
        switch (i.label) {case 0:
            return t = e.backUrl, n = e.codeUrl, (r = { w: 750, h: 1334, cw: 260, cp: .05, cx: .5, cy: .828 }).cx = parseInt(String(r.cx * r.w), 10), r.cy = parseInt(String(r.cy * r.h), 10), r.cp = parseInt(String(r.cp * r.cw), 10), r.cr = parseInt(String(r.cw / 2), 10), r.cqw = parseInt(String(r.cw - 2 * r.cp), 10), r.cqx = parseInt(String(r.cx - r.cqw / 2), 10), r.cqy = parseInt(String(r.cy - r.cqw / 2), 10), (o = wx.createCanvas()).width = r.w, o.height = r.h, (s = o.getContext("2d")).drawImage(t, 0, 0, r.w, r.h), s.beginPath(), s.arc(r.cx, r.cy, r.cr, 0, 2 * Math.PI), s.fillStyle = "rgba(255,255,255,1)", s.fill(), s.clip(), s.drawImage(n, r.cqx, r.cqy, r.cqw, r.cqw), [4, V.wait(100)];case 1:
            return i.sent(), [4, this._toTempFilePath(o, r)];case 2:
            return [2, i.sent()];}
      });
    });
  }, _toTempFilePath: function (e, t) {
    return new Promise(function (n, r) {
      var i = t.x,
          o = void 0 === i ? 0 : i,
          s = t.y,
          a = void 0 === s ? 0 : s,
          c = t.w,
          u = t.h;e.toTempFilePath({ x: o, y: a, width: c, height: u, destWidth: c, destHeight: u, success: n, fail: r });
    });
  } },
    fc = !1,
    lc = { logined: !1, tasksMap: {}, lastTask: null, onlineTimer: null, onlineTime: 0, onlineTotal: 0, allTasks: [], dataSource: "", init: function () {
    T.once("EVT_ON_SHOW", this._onLaunch.bind(this)), T.once("EVT_SET_GAMEUSER", this._onLogined.bind(this));
  }, _onLaunch: function () {
    a("wall launched");var e = Vn.getSDKUserInfo() || {},
        t = e.userId,
        n = e.uniqueId;if (t && n) return hc(Qa);T.once("EVT_ON_LOGIN", function () {
      hc(Qa);
    });
  }, _onLogined: function () {
    this.logined || (this.logined = !0, a("wall logined"), this.postLog(Ya), this._startOnline(), this._bindEvent());
  }, _startOnline: function () {
    var e = this;if ((Kt().custom || {}).boxCode) {
      (Bt() || {}).taskCheckDelay;var t = function () {
        e.onlineTime += 10, e.onlineTotal += 10;var t = uc();!t || e.onlineTime < 60 || (e.postLog(Za, { wallCode: "", online: e.onlineTime, onlineTotal: e.onlineTotal, traceIdStr: t }), e.onlineTime = 0);
      },
          n = function () {
        a("wall start beat"), V.reclearInterval(e.onlineTimer), e.onlineTimer = V.resetInterval(t, 1e4);
      };T.on("EVT_ON_SHOW", n), T.on("EVT_ON_HIDE", function () {
        a("wall clear beat"), V.reclearInterval(e.onlineTimer);
      }), n();
    }
  }, _bindEvent: function () {
    var e = this,
        t = null,
        n = (Bt() || {}).taskCheckDelay || 1500;T.on("EVT_ON_SHOW", function (r) {
      var i = (r || {}).data;e._fixOnlineLog(i), t = setTimeout(e.checkLastTask.bind(e), n);
    }), T.on("EVT_ON_HIDE", function () {
      t && (clearTimeout(t), t = null);
    });
  }, _getTasks: function (e) {
    return r(this, void 0, void 0, function () {
      var t,
          n,
          r,
          o,
          s,
          c,
          u = this;return i(this, function (i) {
        switch (i.label) {case 0:
            return t = "" + O.getServerHost() + ja, n = cc(), e && e.playerOptions && (n = Object.assign(n, e.playerOptions)), [4, D.postForm(t, n)];case 1:
            if (r = i.sent().data, s = (o = r || {}).tasks, (c = o.dataSource) && (this.dataSource = c), a("wall get tasks", r), !s) throw Ja.TasksErr;return s.length && (fc = !!s[0].isABTest), s.map(function (e) {
              u.tasksMap[e.taskId] = e;
            }), this.allTasks = s, [2, r];}
      });
    });
  }, getTasks: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return n.trys.push([0, 2,, 3]), [4, this._getTasks(e)];case 1:
            return [2, n.sent()];case 2:
            throw a("wall get tasks err", t = n.sent()), t;case 3:
            return [2];}
      });
    });
  }, _goTask: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s, c, u, h, d, f, l, p, g, v, m, _, y, w, I;return i(this, function (i) {
        switch (i.label) {case 0:
            if (n = (t = e || {}).taskId, r = t.wallPosition, !(o = this.tasksMap[n])) throw Ja.NoTask;return (s = cc({ taskId: n, wallPosition: r, isABTest: fc }) || {}).dataSource = this.dataSource, c = "" + O.getServerHost() + Ka, [4, D.postForm(c, s)];case 1:
            if (u = i.sent().data, h = (u || {}).traceId, a("wall go task", u), !h) throw u || Ja.GoErr;f = (d = u || {}).useNav, l = d.appId, p = d.appPath, g = d.appEnvVersion, v = d.appExtraData, m = d.mixedQrcodeImg, _ = { appId: l, path: p, envVersion: g || "release", extraData: v ? JSON.parse(v) : {} }, y = (Bt() || {}).gameId, w = (Vn.getSDKUserInfo() || {}).uniqueId, _.extraData = Object.assign(_.extraData, { origGameId: y || "", origUniqueId: w || "" }), i.label = 2;case 2:
            return i.trys.push([2, 7,, 9]), f && nr._canUseNavigate ? (a("wall jump params", _, m), [4, nr.navigateToMiniProgram(_, m)]) : [3, 4];case 3:
            return i.sent(), [3, 6];case 4:
            return [4, nr.previewImage(m)];case 5:
            i.sent(), i.label = 6;case 6:
            return [3, 9];case 7:
            if ((I = i.sent()).isCancel) throw I;return a("wall try go err", I), [4, dc.createQRCode({ codeUrl: u.qrcodeImg, backUrl: u.qrcodeBg, posX: u.qrcodePosX, posY: u.qrcodePosY })];case 8:
            return i.sent(), [3, 9];case 9:
            return this.postLog($a, { taskId: n, traceId: h, wallPosition: r, isABTest: fc }), this._setLastTask(o, h), [2, u];}
      });
    });
  }, goTask: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return n.trys.push([0, 2,, 3]), a("wall start go", e), [4, this._goTask(e)];case 1:
            return [2, n.sent()];case 2:
            throw a("wall go task err", t = n.sent()), t;case 3:
            return [2];}
      });
    });
  }, _getAward: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s;return i(this, function (i) {
        switch (i.label) {case 0:
            if (!(t = this.tasksMap[e])) throw Ja.NoTask;if (0 != t.awareAccpetStatus) throw Ja.AwardGetted;return n = cc({ taskId: e }), r = "" + O.getServerHost() + za, [4, D.postForm(r, n)];case 1:
            if (o = i.sent().data, s = (o || {}).traceId, a("wall get award", o), !s) throw o || Ja.GetAwardErr;return [2, o];}
      });
    });
  }, getAward: function (e) {
    return r(this, void 0, void 0, function () {
      var t;return i(this, function (n) {
        switch (n.label) {case 0:
            return n.trys.push([0, 2,, 3]), [4, this._getAward(e)];case 1:
            return [2, n.sent()];case 2:
            throw a("wall get award err", t = n.sent()), t;case 3:
            return [2];}
      });
    });
  }, _setLastTask: function (e, t) {
    this.lastTask = n({ traceId: "" + t }, e);
  }, _checkLastTask: function (e) {
    return r(this, void 0, void 0, function () {
      var t, n, r, o, s;return i(this, function (i) {
        switch (i.label) {case 0:
            return n = (t = e || {}).taskId, r = t.actionType, n && -1 !== [rc.Play, rc.PlayNoSDK].indexOf(r) ? (a("wall check task", n, r), o = "" + O.getServerHost() + Wa, [4, D.get(o, cc({ taskId: n }))]) : [2, null];case 1:
            return s = i.sent().data, (s || {}).isAlert ? [4, ci(Object.assign({ title: "提醒", content: "还有游戏没体验完", showCancel: !1, confirmText: "确定" }, s))] : [2, null];case 2:
            return [2, i.sent()];}
      });
    });
  }, checkLastTask: function () {
    var e = this;this._checkLastTask(this.lastTask).then(function () {
      e.lastTask = null;
    }).catch(function (e) {
      a("wall check task err", e);
    });
  }, _fixOnlineLog: function (e) {
    var t = this.lastTask || {},
        n = t.traceId,
        r = t.taskId,
        i = t.actionType;if (r && n && i === rc.PlayNoSDK) {
      var o = (e || {}).hideDuration;a("wall fix log", r, o);var s = Math.floor(o / 1e3);this.postLog(ec, { traceId: n, traceIdStr: n, onlineTotal: s, online: 60, wallCode: "" });
    }
  }, postLog: function (e, t) {
    void 0 === t && (t = {}), t.dataSource = this.dataSource, hc(e, t);
  }, logOpenTaskPanel: function () {
    var e = this.allTasks.map(function (e) {
      return e.gameId;
    }).join(",");this.postLog(Xa, { wallPosition: tc, isABTest: fc, adGames: e });
  } };lc.init();var pc = Object.freeze({ __proto__: null, getTasks: function (e) {
    return lc.getTasks(e);
  }, goTask: function (e) {
    return lc.goTask({ taskId: e, wallPosition: tc });
  }, getAward: function (e) {
    return lc.getAward(e);
  }, logOpenTaskPanel: function () {
    lc.logOpenTaskPanel();
  }, goBannerTask: function (e) {
    return lc.goTask({ taskId: e, wallPosition: nc });
  }, logShowBanner: function (e) {
    lc.postLog(Xa, { taskId: e, wallPosition: nc });
  } });function gc() {
  return pc;
}var vc = et("setUserCloudStorage", "1.9.92"),
    mc = et("createGameClubButton", "2.0.3"),
    _c = et("onUserCaptureScreen", "2.8.1");function yc(e) {
  return new Promise(function (t, n) {
    vc ? wx.setUserCloudStorage(Object.assign({}, e, { success: t, fail: n })) : n(mt);
  });
}function wc(e) {
  var t = function (e) {
    return mc ? wx.createGameClubButton(e) : null;
  }(e);return t && t.onTap(function () {
    !function () {
      var e = Kt(),
          t = e.scene,
          n = { channel: (e.custom || {}).channel, scene: t, logType: 14 };T.dispatch("EVT_REPORT_LOG", n);
    }();
  }), t;
}var Ic = { gameEvent: null, eventBind: !1, init: function () {
    var e = this;T.on("EVT_SDK_READY", function () {
      Bt().reportCaptureScreen && e.onUserCaptureScreen();
    });
  }, onUserCaptureScreen: function (e) {
    var t = this;V.isFun(e) && (this.gameEvent = e), this.eventBind || (this.eventBind = !0, function (e) {
      _c && "function" == typeof e && wx.onUserCaptureScreen(function (t) {
        e(t);
      });
    }(function (e) {
      t.gameEvent && t.gameEvent(e), T.dispatch("EVT_REPORT_LOG", { log: { logType: 38 } }), a("capture screen");
    }));
  } };function Tc(e) {
  return function (e) {
    return r(this, void 0, void 0, function () {
      return i(this, function (t) {
        switch (t.label) {case 0:
            return [4, yc(e)];case 1:
            return [2, t.sent()];}
      });
    });
  }(e);
}function Sc(e) {
  return wc(e);
}function bc(e) {
  e = Bn(e, "onUserCaptureScreen"), Ic.onUserCaptureScreen(e.listener);
}Ic.init();var Ec,
    Cc = et("createFeedbackButton", "2.1.2"),
    kc = et("getLogManager", "2.1.0");function Oc(e) {
  return function (e) {
    return kc ? wx.getLogManager(e) : null;
  }(e);
}function Ac(e) {
  return function (e) {
    return Cc ? wx.createFeedbackButton(e) : null;
  }(e);
}function xc(e, t, n) {
  Ec || (Ec = Oc()), Ec && Ec[e]("SDK " + t, n || "");
}function Dc(e) {
  return Oc(e);
}function Rc(e) {
  return Ac(e);
}T.on("EVT_UPDATE_START", function () {
  xc("log", "update start");
}), T.on("EVT_LOGIN_START", function () {
  xc("log", "login start");
}), T.on("EVT_SESSION", function (e) {
  var t = ((e || {}).data || {}).err;if (t) return xc("warn", "checkSession err:", t);xc("log", "checkSession success");
}), T.on("EVT_WX_LOGIN", function (e) {
  var t = ((e || {}).data || {}).err;if (t) return xc("warn", "wx login err:", t);xc("log", "wx logined");
}), T.on("EVT_TRACK_LOGIN", function (e) {
  xc("log", "tracklogin: ", e && e.data);
}), T.on("EVT_NEED_AUTH", function () {
  xc("log", "wx need auth");
}), T.on("EVT_ON_AUTH", function () {
  xc("log", "wx authed");
}), T.on("EVT_AUTH_DENY", function () {
  xc("log", "wx auth deny");
}), T.on("EVT_ON_LOGIN", function () {
  xc("log", "logined");
}), T.on("EVT_ON_UPDATE", function () {
  xc("log", "updated");
}), T.on("EVT_ON_SHOW", function (e) {
  xc("log", "onshow");
}), T.on("EVT_ON_ERROR", function (e) {
  xc("warn", "onerr:", e && e.data);
}), T.on("EVY_PAY_FAIL", function (e) {
  xc("warn", "pay fail:", e && e.data);
}), T.on("EVT_VIDEO_AD_ERROR", function (e) {
  xc("warn", "video ad err:", e && e.data);
});var Pc = { getUserInfo: function () {
    return Vn.getSDKUserInfo();
  }, getSystemStr: function () {
    return rt();
  }, getSystemInfo: function () {
    return nt();
  }, getNetStatus: function () {
    return it();
  }, getLaunchOpts: function () {
    return Kt();
  }, getConfig: function () {
    return Bt();
  } },
    Uc = { request: function (e, t, n, r, i) {
    return new Promise(function (o, s) {
      var a = { url: t, method: e, data: n, header: r, responseType: i, success: function (e) {
          o(e);
        }, fail: function (e) {
          s(e);
        } };wx.request(a);
    });
  } },
    Lc = { _isShowed: !1, _isLaunched: !1, _sdkInited: !1, _hideAt: 0, init: function () {
    Nt(this._handleOnShow.bind(this)), Vt(this._handleOnHide.bind(this)), T.once("EVT_SDK_READY", this._onSDKInit.bind(this), -1);
  }, _onSDKInit: function () {
    var e = this;this._sdkInited = !0, this._isShowed ? this._triggerOnShow() : setTimeout(function () {
      e._isShowed || e._triggerOnShow();
    }, 2e3);
  }, _triggerOnShow: function () {
    var e = Lt();this._handleOnShow(e);
  }, _handleOnShow: function (e) {
    var t = this._hideAt ? Date.now() - this._hideAt : 0;e.hideDuration = t, this._isShowed = !0, e.coldStart = !this._isLaunched, T.dispatch("EVT_ON_SHOW", e), (Vn.getTempUser() || {}).userId && this._logOnShow(e), this._sdkInited && (this._isLaunched = !0);
  }, _handleOnHide: function (e) {
    this._hideAt = Date.now(), T.dispatch("EVT_ON_HIDE", e);
  }, _logOnShow: function (e) {
    void 0 === e && (e = {}), e && delete e.hideDuration;var t = e.scene,
        n = e.coldStart,
        r = Vn.getTempUser() || {},
        i = r.userId,
        o = r.uniqueId,
        s = Kt().custom || {},
        c = s.channel,
        h = s.origChannel,
        d = s.shareConfigId,
        f = n ? 0 : 1,
        l = "";try {
      e = Object.assign(e, { at: "onShow" }), l = JSON.stringify(e);
    } catch (e) {
      u("_logOnShow err", e);
    }var p = ui.getStorage("__sdk_logOnShow_rawData__");p && p === l ? l = "" : ui.setStorage("__sdk_logOnShow_rawData__", l), a("onshow report");var g = { logType: 3, channel: c, origChannel: h, shareConfigId: d, scene: t, userId: i, uniqueId: o, open_type: f, rawData: l };l && T.dispatch("EVT_REPORT_LOG", { log: g });
  } },
    Nc = { network: Uc, storage: ui, information: Pc };x.platform = Nc, Lc.init();var Vc = function () {
  function e(wx, e) {
    this.wx = wx, this._temp = null, this._max = e.MaxTempFailLogLength || 0, this.enable = e.EnabledTempFailLog;
  }return e.prototype.setStorage = function (e) {
    try {
      this._temp = e, this.wx.setStorageSync("__APM_TEMP_LOGS", e);
    } catch (e) {
      console.log("[APM] set storage err: ", e);
    }
  }, e.prototype.getStorage = function () {
    var e = this._temp;if (e) return e;try {
      e = this.wx.getStorageSync("__APM_TEMP_LOGS"), this._temp = e;
    } catch (t) {
      e = "", console.log("[APM] get storage err: ", t);
    }return e;
  }, e.prototype.limitLens = function (e, t) {
    var n = e,
        r = e.length - t;return t > 0 && r > 0 && (n = e.slice(r)), n;
  }, e.prototype.setTemp = function (e) {
    if (this.enable) {
      var t = this._temp || [];t.push(e), this._temp = this.limitLens(t, this._max), console.log("[APM] storage fail log: ", this._temp), this.setStorage(this._temp);
    }
  }, e.prototype.mergeNum = function (e, t) {
    var n = e || t;if (n) {
      for (var r in t = t || {}, e = e || {}, n) t[r] = t[r] || 0, t[r] += e[r] || 0;return t;
    }
  }, e.prototype.mergeTemp = function (e, t) {
    var n = t || {},
        r = n.logs,
        i = n.sockets,
        o = n.times,
        s = e || {},
        a = s.logs,
        c = s.sockets,
        u = s.times,
        h = {};h.logs = this.limitLens((a || []).concat(r || []), this._max), h.sockets = this.mergeNum(i, c);var d = o || u;if (d) for (var f in h.times = {}, d) h.times[f] = this.mergeNum((o || {})[f], (u || {})[f]);return h;
  }, e.prototype.getTemp = function (e) {
    var t = this;if (!this.enable) return e;var n = this.getStorage(),
        r = Object.assign({}, e || {});return n && n.length && (n.forEach(function (e) {
      r = t.mergeTemp(e, r);
    }), console.log("[APM] merge storage log: ", r), this.clear()), r;
  }, e.prototype.checkTemp = function () {
    return this.enable && this.getStorage();
  }, e.prototype.clear = function () {
    this.setStorage("");
  }, e;
}(),
    Hc = function () {
  function e(wx, e) {
    this.clientInfo = null, this.wx = wx, this.config = e, this.initNetworkType(), this.logTemper = new Vc(this.wx, e);
  }return e.prototype.setUserInfo = function (e) {
    this.config.userInfo = Object.assign(this.config.userInfo || {}, e);
  }, e.prototype.initNetworkType = function () {
    var e = this;this.netTp = "unknown", this.wx.getNetworkType({ success: function (t) {
        e.netTp = t.networkType;
      } }), this.wx.onNetworkStatusChange && "function" == typeof this.wx.onNetworkStatusChange && (this.bindedNetChangge || (this.bindedNetChangge = !0, this.wx.onNetworkStatusChange(function (t) {
      e.netTp = t.networkType;
    })));
  }, e.prototype.getClientInfo = function () {
    if (this.clientInfo) return this.clientInfo.netType = this.netTp, this.clientInfo;var e = this.wx.getSystemInfoSync();return this.clientInfo = { version: e.version, system: e.system, platform: e.platform, sdk: e.SDKVersion, model: e.model, netType: this.netTp, brand: e.brand };
  }, e.prototype.report = function (e, t) {
    var n = this;void 0 === e && (e = {});var r = e.logs,
        i = e.times,
        o = e.sockets;if (this.logTemper.checkTemp() || e.logs && e.logs.length || e.times || e.sockets) {
      var s = [];0 === r.length ? (i && (s = [{ type: "req-times" }]), o && (s = [{ type: "socket-track" }])) : s = r.map(function (e) {
        return e.toJSON();
      });var a = this.logTemper.getTemp({ logs: s, times: i, sockets: o }),
          c = this.config,
          u = { game: { gameId: c.gameId, version: c.gameVersion, env: c.env }, client: this.getClientInfo(), user: c.userInfo, logs: a.logs, requestInfo: a.times, socketInfo: a.sockets };this.post(u, function (e, r) {
        r ? n.logTemper.setTemp(a) : t && t(e);
      });
    }
  }, e.prototype.getReportUrl = function () {
    return this.config.Debug ? this.config.reportUrlDev : this.config.reportUrlProc;
  }, e.prototype.post = function (e, t) {
    this.wx.request({ url: this.getReportUrl(), method: "POST", data: e, header: { "content-type": "application/json" }, success: function (e) {
        void 0 === e && (e = {}), t && t(e.data);
      }, fail: function (e) {
        t && t(null, e);
      } });
  }, e;
}(),
    Mc = ["wxmini", "wxmini-log", "platform", "wxmini-test", "platform-test", "wxmini-dev", "platform-dev"],
    qc = "requestTimes",
    Fc = "downloadTimes",
    Gc = function () {
  function e(e) {
    this.collector = e, this.reset();
  }return e.prototype.getPlatformByUrl = function (e) {
    var t = [];"string" == typeof e && (t = e.split("//"));var n = [];"string" == typeof t[1] && (n = t[1].split("."));var r = n.length ? n[0] : "";return Mc.indexOf(r) > -1 ? "platformSource" : "gameSource";
  }, e.prototype.add = function (e, t) {
    if (e) {
      this.hadData = !0;var n = this.getPlatformByUrl(e);this.requestInfo[n][t] += 1;
    }
  }, e.prototype.reset = function () {
    this.hadData = !1, this.requestInfo = { platformSource: { requestTimes: 0, downloadTimes: 0 }, gameSource: { requestTimes: 0, downloadTimes: 0 } };
  }, e.prototype.getInfo = function () {
    return this.hadData ? this.requestInfo : void 0;
  }, e;
}(),
    jc = "connectTimes",
    Kc = "disconnectTimes",
    Bc = function () {
  function e(e) {
    this.collector = e, this.reset();
  }return e.prototype.add = function (e) {
    e && (this.hasSocketData = !0, this.socketInfo[e] += 1);
  }, e.prototype.reset = function () {
    this.hasSocketData = !1, this.socketInfo = { connectTimes: 0, disconnectTimes: 0 };
  }, e.prototype.getInfo = function () {
    return this.hasSocketData ? this.socketInfo : void 0;
  }, e;
}(),
    zc = { Debug: !1, ReportDelay: 6e4, ErrorReportDelay: 2e3, ClearRepeatLog: !0, EnabledDownLoadErr: !0, EnabledDownLoadPerf: !1, EnabledUpLoadErr: !0, EnabledUpLoadPerf: !1, EnabledConsoleErr: !1, EnabledAppOnErr: !0, EnabledAppLaunch: !1, EnabledPagePerf: !1, EnabledResErr: !0, EnabledResPerf: !1, EnabledSocket: !1, EnabledSocketTimes: !0, EnabledMemoryWarning: !0, EnabledTempFailLog: !1, MaxTempFailLogLength: 100, Filters: [], reportUrlProc: "https://platform-stat.hortorgames.com/wxlog/api/v1/apmlog", reportUrlDev: "https://platform-stat-test.hortorgames.com/wxlog/api/v1/apmlog" },
    Wc = { Filters: [/\/v1\/statlog$/, /\/v1\/log$/, /\/v1\/log\/multi$/] },
    Jc = function () {
  function e(wx) {
    this.modalStack = [], this.showIng = !1, this.wx = wx;
  }return e.prototype.isFun = function (e) {
    return !(!e || "function" != typeof e);
  }, e.prototype.show = function (e) {
    var t = this;if (this.showIng) return this.modalStack.push(this.show.bind(this, e));this.showIng = !0;var n = e.success;this.wx.showModal(Object.assign(e, { success: function (e) {
        if (t.showIng = !1, t.modalStack.length) {
          var r = t.modalStack.pop();t.isFun(r) && r();
        }t.isFun(n) && n(e);
      } }));
  }, e.prototype.alert = function (e, t, n) {
    this.show({ title: t, content: e, showCancel: !1, confirmText: "知道了", success: n });
  }, e;
}(),
    Qc = function () {
  function e(wx, e) {
    this.logs = [], this.started = !1, this.wx = wx, this.modal = new Jc(wx), this.config = e, this.reporter = new Hc(this.wx, e), this.timeser = new Gc(), this.socketTimeser = new Bc();
  }return e.prototype.clearReporter = function (e) {
    return e && clearTimeout(e), null;
  }, e.prototype.finalReport = function () {
    var e = this,
        t = this.logs,
        n = this.timeser.getInfo(),
        r = this.socketTimeser.getInfo();this.reporter.report({ logs: t, times: n, sockets: r }, function (t) {
      void 0 === t && (t = {});var n = t.data || [];if (n.length) {
        var r = n.join(", ");r && e.modal.alert("" + r, "错误ID");
      }
    }), this.logs = [], this.timeser.reset(), this.socketTimeser.reset(), this.errorReporter = this.clearReporter(this.errorReporter), this.fixedReporter = this.clearReporter(this.fixedReporter), this.fixedReport();
  }, e.prototype.fixedReport = function () {
    this.fixedReporter = setTimeout(this.finalReport.bind(this), this.config.ReportDelay);
  }, e.prototype.startFixedReport = function () {
    this.started || (this.started = !0, this.fixedReport());
  }, e.prototype.tryReport = function (e) {
    this.checkValid(e) && (this.add(e), this.errorReporter || (this.errorReporter = setTimeout(this.finalReport.bind(this), this.config.ErrorReportDelay)));
  }, e.prototype.collect = function (e) {
    this.checkValid(e) && this.add(e);
  }, e.prototype.checkValid = function (e) {
    return !(!e || e.resURI && e.resURI.startsWith(this.reporter.getReportUrl())) && (!e.resURI || (this.filters || (this.filters = Wc.Filters || [], this.filters = this.filters.concat(this.config.Filters)), !this.filters.length || !this.filters.some(function (t) {
      return t && t.test && t.test(e.resURI);
    })));
  }, e.prototype.isRepeat = function (e, t) {
    if (void 0 === e && (e = {}), void 0 === t && (t = {}), e.id && e.id === t.id) return !0;if (!this.config.ClearRepeatLog) return !1;return ["resURI", "logType", "extra"].every(function (n) {
      return JSON.stringify(e[n]) == JSON.stringify(t[n]);
    });
  }, e.prototype.add = function (e) {
    var t = this;this.logs.some(function (n, r) {
      if (t.isRepeat(e, n)) return (!e.timestamp || e.timestamp > n.timestamp) && (t.logs[r] = e), !0;
    }) || (this.logs.push(e), this.startFixedReport());
  }, e.prototype.addTimes = function (e, t) {
    this.checkValid({ resURI: e }) && (this.timeser.add(e, t), this.startFixedReport());
  }, e.prototype.addSocketTimes = function (e) {
    this.socketTimeser.add(e), this.startFixedReport();
  }, e;
}(),
    Yc = 1,
    Xc = "unc-err",
    $c = "res-req",
    Zc = "res-err",
    eu = "down-err",
    tu = "down-req",
    nu = "up-req",
    ru = "up-err",
    iu = "soc-req",
    ou = "soc-err",
    su = "game-notice",
    au = "game-track",
    cu = "mem-warn",
    uu = function () {
  function e(e, t) {
    void 0 === t && (t = {}), this.id = Yc++, this.logType = e, this.extra = {}, this.collected = !1, this.collector = t;
  }return e.prototype.setType = function (e) {
    return this.logType = e, this;
  }, e.prototype.addExtra = function (e) {
    return e.url && (this.resURI = e.url), e.errMsg && !e.msg && (e.msg = e.errMsg), this.extra = Object.assign(this.extra, e), this;
  }, e.prototype.start = function () {
    return this.startTime = new Date().getTime(), this;
  }, e.prototype.end = function () {
    return this.timestamp = new Date().getTime() - this.startTime, this.timestamp = this.timestamp < 0 ? 0 : this.timestamp, this.collect(), this;
  }, e.prototype.collect = function () {
    return this.collected || "function" != typeof this.collector.collect || (this.collected = !0, this.collector.collect(this)), this;
  }, e.prototype.tryReport = function () {
    return this.collected || "function" != typeof this.collector.tryReport || (this.collected = !0, this.collector.tryReport(this)), this;
  }, e.prototype.toJSON = function () {
    return { res: this.resURI, type: this.logType, ts: this.timestamp, ext: this.extra };
  }, e;
}(),
    hu = function () {
  function e(e) {
    var wx = e.wx,
        t = e.config,
        n = e.collector;this.wx = wx, this.config = t, this.collector = n;
  }return e.prototype.handle = function () {}, e.prototype.isFun = function (e) {
    return !(!e || "function" != typeof e);
  }, e.prototype.tracker = function (e, t) {
    return void 0 === t && (t = {}), new uu(e, this.collector).addExtra(t);
  }, e;
}();function du(e, t, n) {
  var r = e[t];Object.defineProperty(e, t, { value: n(r) });
}var fu = function (e) {
  function n(t) {
    return e.call(this, t) || this;
  }return t(n, e), n.prototype.handle = function () {
    (this.config.EnabledDownLoadErr || this.config.EnabledDownLoadPerf) && du(this.wx, "downloadFile", this.downloadFileHandler.bind(this));
  }, n.prototype.downloadFileHandler = function (e) {
    var t = this;return function (n) {
      var r = t.tracker("", { url: n.url, filePath: n.filePath }).start();t.collector.addTimes(n.url, Fc);var i = function (e) {
        console.log("[APM] download err", e), t.config.EnabledDownLoadErr && r.setType(eu).addExtra(e).end();
      };return e(Object.assign({}, n, { success: function (e) {
          void 0 === e && (e = {});var o,
              s = e.statusCode,
              a = e.header ? e.header["Content-Length"] : 0;200 == s ? (o = { status: s, size: a }, t.config.EnabledDownLoadPerf && r.setType(tu).addExtra(o).end()) : i({ status: s, err: e.data, size: a }), n.success && n.success.call(this, e);
        }, fail: function (e) {
          i({ err: e }), n.fail && n.fail.call(this, e);
        } }));
    };
  }, n;
}(hu),
    lu = function (e) {
  function n(t) {
    return e.call(this, t) || this;
  }return t(n, e), n.prototype.handle = function () {
    (this.config.EnabledResErr || this.config.EnabledResPerf) && du(this.wx, "request", this.requestHandler.bind(this));
  }, n.prototype.requestHandler = function (e) {
    var t = this;return function (n) {
      var r = t.tracker("", { url: n.url, method: n.method }).start();t.collector.addTimes(n.url, qc);var i = function (e) {
        console.log("[APM] request err", e), t.config.EnabledResErr && r.setType(Zc).addExtra(e).end();
      };return e(Object.assign({}, n, { success: function (e) {
          void 0 === e && (e = {});var o,
              s = e.header ? e.header["Content-Length"] : 0,
              a = e.statusCode;200 == a ? (o = { status: a, size: s }, t.config.EnabledResPerf && r.setType($c).addExtra(o).end()) : i({ status: a, err: e.data, size: s }), n.success && n.success.call(this, e);
        }, fail: function (e) {
          i({ err: e }), n.fail && n.fail.call(this, e);
        } }));
    };
  }, n;
}(hu),
    pu = function (e) {
  function n(t) {
    return e.call(this, t) || this;
  }return t(n, e), n.prototype.handle = function () {
    (this.config.EnabledUpLoadErr || this.config.EnabledUpLoadPerf) && du(this.wx, "uploadFile", this.uploadFileHandler.bind(this));
  }, n.prototype.uploadFileHandler = function (e) {
    var t = this;return function (n) {
      var r = t.tracker("", { url: n.url, filePath: n.method }).start(),
          i = function (e) {
        console.log("[APM] upload err", e), t.config.EnabledUpLoadErr && r.setType(ru).addExtra(e).end();
      };return e(Object.assign({}, n, { success: function (e) {
          void 0 === e && (e = {});var o,
              s = e.statusCode,
              a = e.header ? e.header["Content-Length"] : 0;200 == s ? (o = { status: s, size: a }, t.config.EnabledUpLoadPerf && r.setType(nu).addExtra(o).end()) : i({ status: s, err: e.data, size: a }), n.success && n.success.call(this, e);
        }, fail: function (e) {
          i({ err: e }), n.fail && n.fail.call(this, e);
        } }));
    };
  }, n;
}(hu),
    gu = function (e) {
  function n(t) {
    return e.call(this, t) || this;
  }return t(n, e), n.prototype.handle = function () {
    (this.config.EnabledSocket || this.config.EnabledSocketTimes) && du(this.wx, "connectSocket", this.connectSocketHandler.bind(this));
  }, n.prototype.connectSocketHandler = function (e) {
    var t = this;return function (n) {
      var r = void 0;if (t.config.EnabledSocket) {
        var i = { url: n.url, method: n.method, protocols: n.protocols },
            o = t.tracker("", i).start();(r = e(Object.assign({}, n, { success: function (e) {
            var t;t = { status: 200 }, o.setType(iu).addExtra(t).end(), n.success && n.success.call(this, e);
          }, fail: function (e) {
            !function (e) {
              o.setType(ou).addExtra(e).end();
            }({ err: e }), n.fail && n.fail.call(this, e);
          } }))) && r.onError(function (e) {
          !function (e) {
            t.tracker(ou, i).addExtra(e).collect();
          }({ err: e });
        });
      } else r = e(n);return r && t.config.EnabledSocketTimes && (t.collector.addSocketTimes(jc), r.onClose(function (e) {
        1e3 !== e.code && t.collector.addSocketTimes(Kc);
      })), r;
    };
  }, n;
}(hu),
    vu = function (e) {
  function n(t) {
    return e.call(this, t) || this;
  }return t(n, e), n.prototype.handle = function () {
    "undefined" != typeof console && this.config.EnabledConsoleErr && du(console, "error", this.consoleErrorHandler.bind(this)), this.wx.onError && this.config.EnabledAppOnErr && (du(this.wx, "onError", this.onErrorhandler.bind(this)), this.bindOnError(), this.wx.offError && du(this.wx, "offError", this.offErrorhandler.bind(this)));
  }, n.prototype.renderErrMsg = function (e) {
    if (void 0 === e && (e = ""), e && "string" != typeof e) return { msg: JSON.stringify(e) };var t = e.split("\n"),
        n = t.slice(0, 2).join("\n"),
        r = t.slice(2),
        i = (r[1] || "").split(":"),
        o = (i.pop() || "").replace(")", "") - 0,
        s = (i.pop() || "") - 0;return { line: s = isNaN(s) ? 0 : s, column: o, msg: n, stack: r };
  }, n.prototype.bindOnError = function () {
    var e = this;this.bindedOnError || (this.bindedOnError = !0, this.wx.onError(function (t) {
      console.log("[APM] onError error", t);var n = e.renderErrMsg(t.message);n.stack = t.stack || n.stack, e.tracker(Xc).addExtra(n).tryReport();
    }));
  }, n.prototype.onErrorhandler = function (e) {
    var t = this;return function (n) {
      return t.bindOnError(), e(n);
    };
  }, n.prototype.offErrorhandler = function (e) {
    var t = this;return function (n) {
      var r = e(n);return n || (t.bindedOnError = !1, t.bindOnError()), r;
    };
  }, n.prototype.consoleErrorHandler = function (e) {
    var t = this,
        n = function (e) {
      void 0 === e && (e = {});var n = t.renderErrMsg(e[0]);t.tracker(Xc).addExtra(n).tryReport();
    };return function () {
      for (var t = [], r = 0; r < arguments.length; r++) t[r] = arguments[r];return n(t), e.apply(void 0, t);
    };
  }, n;
}(hu),
    mu = function (e) {
  function n(t) {
    var n = e.call(this, t) || this;return n.bindTimes = 0, n.reported = !1, n;
  }return t(n, e), n.prototype.handle = function () {
    this.isFun(this.wx.onMemoryWarning) && this.config.EnabledMemoryWarning && (du(this.wx, "onMemoryWarning", this.memoryWranHandler.bind(this)), this.firstBind());
  }, n.prototype.firstBind = function () {
    this.wx.onMemoryWarning(function (e) {});
  }, n.prototype.report = function (e, t) {
    this.reported || t != this.bindTimes || (console.log("[APM] onMemoryWarning", e), this.tracker(cu).addExtra(e || {}).collect(), this.reported = !0);
  }, n.prototype.memoryWranHandler = function (e) {
    var t = this;return function (n) {
      var r = ++t.bindTimes;return e(function (e) {
        t.report(e, r), t.isFun(n) && n(e);
      });
    };
  }, n;
}(hu),
    _u = function () {
  function e(wx, e) {
    this.wx = wx, this.config = e, this.collector = new Qc(wx, e);var t = { wx: wx, config: e, collector: this.collector };this.handlers = [new gu(t), new vu(t), new lu(t), new fu(t), new pu(t), new mu(t)];
  }return e.prototype.track = function () {
    return this.handlers.forEach(function (e) {
      e.handle();
    }), this;
  }, e.prototype.tracker = function (e, t) {
    return void 0 === t && (t = {}), new uu(e, this.collector).addExtra(t);
  }, e.prototype.setUserInfo = function (e) {
    this.collector && this.collector.reporter.setUserInfo(e);
  }, e;
}(),
    yu = { version: "4.3.0", date: 1601443721480, mode: "dev" },
    wu = function () {
  function e() {}return e.prototype.init = function () {}, e.prototype._init = function (e) {
    var t = Object.assign({}, e);t.Debug = !t.env || "Prod" !== t.env || t.Debug, console.warn("[APM] config: ", t), console.log("%csdk默认集成apm, 若没有使用单独文件的apm, 请忽略该警告", "color: red"), this.wxTracker = new _u(wx, Object.assign({}, zc, yu, t)).track();
  }, e.prototype.notify = function (e) {
    var t = e.msg,
        n = e.data;return this.wxTracker ? this.wxTracker.tracker(su, Object.assign({ msg: t }, n)).collect() : { errMsg: "please init apm first" };
  }, e.prototype.notifyError = function (e) {
    var t = e.msg,
        n = e.data;return this.notify({ msg: t, data: n });
  }, e.prototype.newTracker = function (e) {
    var t = e.msg,
        n = e.data;return this.wxTracker ? this.wxTracker.tracker(au, Object.assign({ msg: t }, n)) : { errMsg: "please init apm first" };
  }, e.prototype.setUserInfo = function () {}, e.prototype._setUserInfo = function (e) {
    this.wxTracker ? (this.wxTracker.setUserInfo(e), console.warn("[APM] setUserInfo: ", e)) : console.warn("[APM] warning: 请先调用apm.init再设置用户信息");
  }, e;
}(),
    Iu = new wu();T.on("EVT_ON_LOGIN", function (e) {
  var t, n;Iu._setUserInfo({ userId: null === (n = null === (t = null == e ? void 0 : e.data) || void 0 === t ? void 0 : t.userSdk) || void 0 === n ? void 0 : n.uniqueId });
}), T.once("EVT_SDK_READY", function () {
  var e = Bt();Iu._init(e);
});var Tu = Iu;export { Gi as DefLogTopics, Tn as adPointShow, $ as aggregationRequest, Tu as apm, Fn as checkCertification, Zr as checkGameRecorder, ei as checkGameRecorderAtempo, ti as checkGameRecorderSound, ni as checkGameRecorderVolume, se as checkIPs, En as checkMixVideoAd, jn as checkRest, me as checkSwitches, bn as checkVideoAd, ji as coverDefLog, mn as createBannerAd, xr as createCrossAd, Rc as createFeedbackButton, jr as createGameBanner, Sc as createGameClubButton, Kr as createGameIcon, Br as createGamePortal, mo as createGetUserInfoBtn, _n as createGridAd, Ur as customerService, le as debugLog, In as destroyInterstitialAd, An as destroyVideoAd, kt as encryptMsg, ge as errorLog, La as exitVoIPChat, X as getAggregationTypes, Wn as getConfig, ne as getExtUserInfo, Bi as getGameLogTypes, ri as getGameRecorder, ii as getGameRecorderShareButton, To as getGetUserInfoBtn, Dn as getInterstitialAd, Dc as getLogManager, Jn as getNotchInfo, he as getNotice, Wo as getRecorder, Xo as getRecorderInstance, hs as getSTDDefOptions, fs as getSTDOptions, ls as getSTDSeqTypes, $s as getShareData, Qs as getShareInfo, fa as getSubscribeMessageCount, re as getUserGsInfo, Ot as getUserKey, xn as getVideoAd, gc as getWallInstance, la as getWhatsNewSubscriptionsSetting, Pr as goCustomer, Sn as hortorAdPlaySuccess, Pc as information, ee as init, Ua as joinVoIPChat, Ho as jumpPay, zn as launchOptions, _o as login, Vo as midasPay, Uc as network, ps as nextSTDSeq, er as offError, $n as offHide, Yn as offShow, Ga as offVoIPChatInterrupted, Ha as offVoIPChatMembersChanged, qa as offVoIPChatSpeakersChanged, Zn as onError, Xn as onHide, na as onInteractiveStorageModified, Ws as onShareAppMessage, ta as onShareMessageToFriend, Js as onShareTimeline, Qn as onShow, bc as onUserCaptureScreen, Fa as onVoIPChatInterrupted, Va as onVoIPChatMembersChanged, Ma as onVoIPChatSpeakersChanged, Mo as pay, p as platformType, On as playVideoAd, zi as postGameLog, J as postLog, yn as preloadInterstitialAds, kn as prepareShowHortorVedioAd, Ra as queryVoIPAuthCamera, xa as queryVoIPAuthRecord, Io as registerOnLogin, Ki as reportGameUserInfo, ie as reportUserGsLog, da as requestSubscribeMessage, pa as requestSubscribeWhatsNew, Pa as requestVoIPAuthCamera, Da as requestVoIPAuthRecord, Xs as resetShareConfig, Gn as setCertification, So as setGameUserInfo, ea as setMessageToFriendQuery, ds as setSTDOptions, Tc as setUserCloudStorage, zs as shareAppMessage, Bs as shareMessage, Ys as sharePointShow, wn as showInterstitialAd, Cn as showVideoAd, Kn as stopCheckRest, ui as storage, Zs as updateShareMenu, wo as updateUserInfo, Na as updateVoIPChatMuteConfig, gs as useSTDSeq, pe as warnLog, yo as weakLogin, Q as wxGetSetting };